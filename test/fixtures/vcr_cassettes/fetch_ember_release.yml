---
http_interactions:
- request:
    method: get
    uri: http://builds.emberjs.com/release/ember.js
    body:
      encoding: US-ASCII
      string: ''
    headers:
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - '*/*'
      User-Agent:
      - Ruby
      Host:
      - builds.emberjs.com
  response:
    status:
      code: 200
      message: OK
    headers:
      X-Amz-Id-2:
      - n7q17hdconuZGRmy4LYcE+pcQWa//UCLCggiqNJYGZ4F0ji/vX9XPGFU72SvnKK8
      X-Amz-Request-Id:
      - A5F433FBC536A263
      Date:
      - Mon, 17 Feb 2014 11:45:04 GMT
      Last-Modified:
      - Fri, 14 Feb 2014 14:20:28 GMT
      Etag:
      - '"8ee2c1ef5bdf6ac951dee1f7f720dd0b"'
      Content-Type:
      - text/javascript
      Content-Length:
      - '1192082'
      Server:
      - AmazonS3
    body:
      encoding: ASCII-8BIT
      string: !binary |-
        LyohCiAqIEBvdmVydmlldyAgRW1iZXIgLSBKYXZhU2NyaXB0IEFwcGxpY2F0
        aW9uIEZyYW1ld29yawogKiBAY29weXJpZ2h0IENvcHlyaWdodCAyMDExLTIw
        MTQgVGlsZGUgSW5jLiBhbmQgY29udHJpYnV0b3JzCiAqICAgICAgICAgICAg
        UG9ydGlvbnMgQ29weXJpZ2h0IDIwMDYtMjAxMSBTdHJvYmUgSW5jLgogKiAg
        ICAgICAgICAgIFBvcnRpb25zIENvcHlyaWdodCAyMDA4LTIwMTEgQXBwbGUg
        SW5jLiBBbGwgcmlnaHRzIHJlc2VydmVkLgogKiBAbGljZW5zZSAgIExpY2Vu
        c2VkIHVuZGVyIE1JVCBsaWNlbnNlCiAqICAgICAgICAgICAgU2VlIGh0dHBz
        Oi8vcmF3LmdpdGh1Yi5jb20vZW1iZXJqcy9lbWJlci5qcy9tYXN0ZXIvTElD
        RU5TRQogKiBAdmVyc2lvbiAgIDEuNC4xK3ByZS5hZjg3YmQyMAogKi8KCgoo
        ZnVuY3Rpb24oKSB7Ci8qZ2xvYmFsIF9fZmFpbF9fKi8KCi8qKgpFbWJlciBE
        ZWJ1ZwoKQG1vZHVsZSBlbWJlcgpAc3VibW9kdWxlIGVtYmVyLWRlYnVnCiov
        CgovKioKQGNsYXNzIEVtYmVyCiovCgppZiAoJ3VuZGVmaW5lZCcgPT09IHR5
        cGVvZiBFbWJlcikgewogIEVtYmVyID0ge307CgogIGlmICgndW5kZWZpbmVk
        JyAhPT0gdHlwZW9mIHdpbmRvdykgewogICAgd2luZG93LkVtID0gd2luZG93
        LkVtYmVyID0gRW0gPSBFbWJlcjsKICB9Cn0KCi8vIFRoaXMgbmVlZHMgdG8g
        YmUga2VwdCBpbiBzeW5jIHdpdGggdGhlIGxvZ2ljIGluCi8vIGBwYWNrYWdl
        cy9lbWJlci1tZXRhbC9saWIvY29yZS5qc2AuCi8vCi8vIFRoaXMgaXMgZHVw
        bGljYXRlZCBoZXJlIHRvIGVuc3VyZSB0aGF0IGBFbWJlci5FTlZgCi8vIGlz
        IHNldHVwIGV2ZW4gaWYgYEVtYmVyYCBpcyBub3QgbG9hZGVkIHlldC4KaWYg
        KEVtYmVyLkVOVikgewogIC8vIGRvIG5vdGhpbmcgaWYgRW1iZXIuRU5WIGlz
        IGFscmVhZHkgc2V0dXAKfSBlbHNlIGlmICgndW5kZWZpbmVkJyAhPT0gdHlw
        ZW9mIEVtYmVyRU5WKSB7CiAgRW1iZXIuRU5WID0gRW1iZXJFTlY7Cn0gZWxz
        ZSBpZigndW5kZWZpbmVkJyAhPT0gdHlwZW9mIEVOVikgewogIEVtYmVyLkVO
        ViA9IEVOVjsKfSBlbHNlIHsKICBFbWJlci5FTlYgPSB7fTsKfQoKaWYgKCEo
        J01BTkRBVE9SWV9TRVRURVInIGluIEVtYmVyLkVOVikpIHsKICBFbWJlci5F
        TlYuTUFOREFUT1JZX1NFVFRFUiA9IHRydWU7IC8vIGRlZmF1bHQgdG8gdHJ1
        ZSBmb3IgZGVidWcgZGlzdAp9CgovKioKICBEZWZpbmUgYW4gYXNzZXJ0aW9u
        IHRoYXQgd2lsbCB0aHJvdyBhbiBleGNlcHRpb24gaWYgdGhlIGNvbmRpdGlv
        biBpcyBub3QKICBtZXQuIEVtYmVyIGJ1aWxkIHRvb2xzIHdpbGwgcmVtb3Zl
        IGFueSBjYWxscyB0byBgRW1iZXIuYXNzZXJ0KClgIHdoZW4KICBkb2luZyBh
        IHByb2R1Y3Rpb24gYnVpbGQuIEV4YW1wbGU6CgogIGBgYGphdmFzY3JpcHQK
        ICAvLyBUZXN0IGZvciB0cnV0aGluZXNzCiAgRW1iZXIuYXNzZXJ0KCdNdXN0
        IHBhc3MgYSB2YWxpZCBvYmplY3QnLCBvYmopOwogIC8vIEZhaWwgdW5jb25k
        aXRpb25hbGx5CiAgRW1iZXIuYXNzZXJ0KCdUaGlzIGNvZGUgcGF0aCBzaG91
        bGQgbmV2ZXIgYmUgcnVuJykKICBgYGAKCiAgQG1ldGhvZCBhc3NlcnQKICBA
        cGFyYW0ge1N0cmluZ30gZGVzYyBBIGRlc2NyaXB0aW9uIG9mIHRoZSBhc3Nl
        cnRpb24uIFRoaXMgd2lsbCBiZWNvbWUKICAgIHRoZSB0ZXh0IG9mIHRoZSBF
        cnJvciB0aHJvd24gaWYgdGhlIGFzc2VydGlvbiBmYWlscy4KICBAcGFyYW0g
        e0Jvb2xlYW59IHRlc3QgTXVzdCBiZSB0cnV0aHkgZm9yIHRoZSBhc3NlcnRp
        b24gdG8gcGFzcy4gSWYKICAgIGZhbHN5LCBhbiBleGNlcHRpb24gd2lsbCBi
        ZSB0aHJvd24uCiovCkVtYmVyLmFzc2VydCA9IGZ1bmN0aW9uKGRlc2MsIHRl
        c3QpIHsKICBpZiAoIXRlc3QpIHsKICAgIHRocm93IG5ldyBFbWJlci5FcnJv
        cigiQXNzZXJ0aW9uIEZhaWxlZDogIiArIGRlc2MpOwogIH0KfTsKCgovKioK
        ICBEaXNwbGF5IGEgd2FybmluZyB3aXRoIHRoZSBwcm92aWRlZCBtZXNzYWdl
        LiBFbWJlciBidWlsZCB0b29scyB3aWxsCiAgcmVtb3ZlIGFueSBjYWxscyB0
        byBgRW1iZXIud2FybigpYCB3aGVuIGRvaW5nIGEgcHJvZHVjdGlvbiBidWls
        ZC4KCiAgQG1ldGhvZCB3YXJuCiAgQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2Ug
        QSB3YXJuaW5nIHRvIGRpc3BsYXkuCiAgQHBhcmFtIHtCb29sZWFufSB0ZXN0
        IEFuIG9wdGlvbmFsIGJvb2xlYW4uIElmIGZhbHN5LCB0aGUgd2FybmluZwog
        ICAgd2lsbCBiZSBkaXNwbGF5ZWQuCiovCkVtYmVyLndhcm4gPSBmdW5jdGlv
        bihtZXNzYWdlLCB0ZXN0KSB7CiAgaWYgKCF0ZXN0KSB7CiAgICBFbWJlci5M
        b2dnZXIud2FybigiV0FSTklORzogIittZXNzYWdlKTsKICAgIGlmICgndHJh
        Y2UnIGluIEVtYmVyLkxvZ2dlcikgRW1iZXIuTG9nZ2VyLnRyYWNlKCk7CiAg
        fQp9OwoKLyoqCiAgRGlzcGxheSBhIGRlYnVnIG5vdGljZS4gRW1iZXIgYnVp
        bGQgdG9vbHMgd2lsbCByZW1vdmUgYW55IGNhbGxzIHRvCiAgYEVtYmVyLmRl
        YnVnKClgIHdoZW4gZG9pbmcgYSBwcm9kdWN0aW9uIGJ1aWxkLgoKICBgYGBq
        YXZhc2NyaXB0CiAgRW1iZXIuZGVidWcoIkknbSBhIGRlYnVnIG5vdGljZSEi
        KTsKICBgYGAKCiAgQG1ldGhvZCBkZWJ1ZwogIEBwYXJhbSB7U3RyaW5nfSBt
        ZXNzYWdlIEEgZGVidWcgbWVzc2FnZSB0byBkaXNwbGF5LgoqLwpFbWJlci5k
        ZWJ1ZyA9IGZ1bmN0aW9uKG1lc3NhZ2UpIHsKICBFbWJlci5Mb2dnZXIuZGVi
        dWcoIkRFQlVHOiAiK21lc3NhZ2UpOwp9OwoKLyoqCiAgRGlzcGxheSBhIGRl
        cHJlY2F0aW9uIHdhcm5pbmcgd2l0aCB0aGUgcHJvdmlkZWQgbWVzc2FnZSBh
        bmQgYSBzdGFjayB0cmFjZQogIChDaHJvbWUgYW5kIEZpcmVmb3ggb25seSku
        IEVtYmVyIGJ1aWxkIHRvb2xzIHdpbGwgcmVtb3ZlIGFueSBjYWxscyB0bwog
        IGBFbWJlci5kZXByZWNhdGUoKWAgd2hlbiBkb2luZyBhIHByb2R1Y3Rpb24g
        YnVpbGQuCgogIEBtZXRob2QgZGVwcmVjYXRlCiAgQHBhcmFtIHtTdHJpbmd9
        IG1lc3NhZ2UgQSBkZXNjcmlwdGlvbiBvZiB0aGUgZGVwcmVjYXRpb24uCiAg
        QHBhcmFtIHtCb29sZWFufSB0ZXN0IEFuIG9wdGlvbmFsIGJvb2xlYW4uIElm
        IGZhbHN5LCB0aGUgZGVwcmVjYXRpb24KICAgIHdpbGwgYmUgZGlzcGxheWVk
        LgoqLwpFbWJlci5kZXByZWNhdGUgPSBmdW5jdGlvbihtZXNzYWdlLCB0ZXN0
        KSB7CiAgaWYgKEVtYmVyLlRFU1RJTkdfREVQUkVDQVRJT04pIHsgcmV0dXJu
        OyB9CgogIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAxKSB7IHRlc3QgPSBm
        YWxzZTsgfQogIGlmICh0ZXN0KSB7IHJldHVybjsgfQoKICBpZiAoRW1iZXIu
        RU5WLlJBSVNFX09OX0RFUFJFQ0FUSU9OKSB7IHRocm93IG5ldyBFbWJlci5F
        cnJvcihtZXNzYWdlKTsgfQoKICB2YXIgZXJyb3I7CgogIC8vIFdoZW4gdXNp
        bmcgbmV3IEVycm9yLCB3ZSBjYW4ndCBkbyB0aGUgYXJndW1lbnRzIGNoZWNr
        IGZvciBDaHJvbWUuIEFsdGVybmF0aXZlcyBhcmUgd2VsY29tZQogIHRyeSB7
        IF9fZmFpbF9fLmZhaWwoKTsgfSBjYXRjaCAoZSkgeyBlcnJvciA9IGU7IH0K
        CiAgaWYgKEVtYmVyLkxPR19TVEFDS1RSQUNFX09OX0RFUFJFQ0FUSU9OICYm
        IGVycm9yLnN0YWNrKSB7CiAgICB2YXIgc3RhY2ssIHN0YWNrU3RyID0gJyc7
        CiAgICBpZiAoZXJyb3JbJ2FyZ3VtZW50cyddKSB7CiAgICAgIC8vIENocm9t
        ZQogICAgICBzdGFjayA9IGVycm9yLnN0YWNrLnJlcGxhY2UoL15ccythdFxz
        Ky9nbSwgJycpLgogICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGxhY2Uo
        L14oW15cKF0rPykoW1xuJF0pL2dtLCAne2Fub255bW91c30oJDEpJDInKS4K
        ICAgICAgICAgICAgICAgICAgICAgICAgICByZXBsYWNlKC9eT2JqZWN0Ljxh
        bm9ueW1vdXM+XHMqXCgoW15cKV0rKVwpL2dtLCAne2Fub255bW91c30oJDEp
        Jykuc3BsaXQoJ1xuJyk7CiAgICAgIHN0YWNrLnNoaWZ0KCk7CiAgICB9IGVs
        c2UgewogICAgICAvLyBGaXJlZm94CiAgICAgIHN0YWNrID0gZXJyb3Iuc3Rh
        Y2sucmVwbGFjZSgvKD86XG5AOjApP1xzKyQvbSwgJycpLgogICAgICAgICAg
        ICAgICAgICAgICAgICAgIHJlcGxhY2UoL15cKC9nbSwgJ3thbm9ueW1vdXN9
        KCcpLnNwbGl0KCdcbicpOwogICAgfQoKICAgIHN0YWNrU3RyID0gIlxuICAg
        ICIgKyBzdGFjay5zbGljZSgyKS5qb2luKCJcbiAgICAiKTsKICAgIG1lc3Nh
        Z2UgPSBtZXNzYWdlICsgc3RhY2tTdHI7CiAgfQoKICBFbWJlci5Mb2dnZXIu
        d2FybigiREVQUkVDQVRJT046ICIrbWVzc2FnZSk7Cn07CgoKCi8qKgogIEFs
        aWFzIGFuIG9sZCwgZGVwcmVjYXRlZCBtZXRob2Qgd2l0aCBpdHMgbmV3IGNv
        dW50ZXJwYXJ0LgoKICBEaXNwbGF5IGEgZGVwcmVjYXRpb24gd2FybmluZyB3
        aXRoIHRoZSBwcm92aWRlZCBtZXNzYWdlIGFuZCBhIHN0YWNrIHRyYWNlCiAg
        KENocm9tZSBhbmQgRmlyZWZveCBvbmx5KSB3aGVuIHRoZSBhc3NpZ25lZCBt
        ZXRob2QgaXMgY2FsbGVkLgoKICBFbWJlciBidWlsZCB0b29scyB3aWxsIG5v
        dCByZW1vdmUgY2FsbHMgdG8gYEVtYmVyLmRlcHJlY2F0ZUZ1bmMoKWAsIHRo
        b3VnaAogIG5vIHdhcm5pbmdzIHdpbGwgYmUgc2hvd24gaW4gcHJvZHVjdGlv
        bi4KCiAgYGBgamF2YXNjcmlwdAogIEVtYmVyLm9sZE1ldGhvZCA9IEVtYmVy
        LmRlcHJlY2F0ZUZ1bmMoIlBsZWFzZSB1c2UgdGhlIG5ldywgdXBkYXRlZCBt
        ZXRob2QiLCBFbWJlci5uZXdNZXRob2QpOwogIGBgYAoKICBAbWV0aG9kIGRl
        cHJlY2F0ZUZ1bmMKICBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZSBBIGRlc2Ny
        aXB0aW9uIG9mIHRoZSBkZXByZWNhdGlvbi4KICBAcGFyYW0ge0Z1bmN0aW9u
        fSBmdW5jIFRoZSBuZXcgZnVuY3Rpb24gY2FsbGVkIHRvIHJlcGxhY2UgaXRz
        IGRlcHJlY2F0ZWQgY291bnRlcnBhcnQuCiAgQHJldHVybiB7RnVuY3Rpb259
        IGEgbmV3IGZ1bmN0aW9uIHRoYXQgd3JhcHBlZCB0aGUgb3JpZ2luYWwgZnVu
        Y3Rpb24gd2l0aCBhIGRlcHJlY2F0aW9uIHdhcm5pbmcKKi8KRW1iZXIuZGVw
        cmVjYXRlRnVuYyA9IGZ1bmN0aW9uKG1lc3NhZ2UsIGZ1bmMpIHsKICByZXR1
        cm4gZnVuY3Rpb24oKSB7CiAgICBFbWJlci5kZXByZWNhdGUobWVzc2FnZSk7
        CiAgICByZXR1cm4gZnVuYy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogIH07
        Cn07CgoKLy8gSW5mb3JtIHRoZSBkZXZlbG9wZXIgYWJvdXQgdGhlIEVtYmVy
        IEluc3BlY3RvciBpZiBub3QgaW5zdGFsbGVkLgppZiAoIUVtYmVyLnRlc3Rp
        bmcpIHsKICB2YXIgaXNGaXJlZm94ID0gdHlwZW9mIEluc3RhbGxUcmlnZ2Vy
        ICE9PSAndW5kZWZpbmVkJzsKICB2YXIgaXNDaHJvbWUgPSAhIXdpbmRvdy5j
        aHJvbWUgJiYgIXdpbmRvdy5vcGVyYTsKCiAgaWYgKHR5cGVvZiB3aW5kb3cg
        IT09ICd1bmRlZmluZWQnICYmIChpc0ZpcmVmb3ggfHwgaXNDaHJvbWUpICYm
        IHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKSB7CiAgICB3aW5kb3cuYWRkRXZl
        bnRMaXN0ZW5lcigibG9hZCIsIGZ1bmN0aW9uKCkgewogICAgICBpZiAoZG9j
        dW1lbnQuYm9keSAmJiBkb2N1bWVudC5ib2R5LmRhdGFzZXQgJiYgIWRvY3Vt
        ZW50LmJvZHkuZGF0YXNldC5lbWJlckV4dGVuc2lvbikgewogICAgICAgIHZh
        ciBkb3dubG9hZFVSTDsKCiAgICAgICAgaWYoaXNDaHJvbWUpIHsKICAgICAg
        ICAgIGRvd25sb2FkVVJMID0gJ2h0dHBzOi8vY2hyb21lLmdvb2dsZS5jb20v
        d2Vic3RvcmUvZGV0YWlsL2VtYmVyLWluc3BlY3Rvci9ibWRibG5jZWdrZW5r
        YWNpZWloZmhwamZwcG9jb25oaSc7CiAgICAgICAgfSBlbHNlIGlmKGlzRmly
        ZWZveCkgewogICAgICAgICAgZG93bmxvYWRVUkwgPSAnaHR0cHM6Ly9hZGRv
        bnMubW96aWxsYS5vcmcvZW4tVVMvZmlyZWZveC9hZGRvbi9lbWJlci1pbnNw
        ZWN0b3IvJwogICAgICAgIH0KCiAgICAgICAgRW1iZXIuZGVidWcoJ0ZvciBt
        b3JlIGFkdmFuY2VkIGRlYnVnZ2luZywgaW5zdGFsbCB0aGUgRW1iZXIgSW5z
        cGVjdG9yIGZyb20gJyArIGRvd25sb2FkVVJMKTsKICAgICAgfQogICAgfSwg
        ZmFsc2UpOwogIH0KfQoKfSkoKTsKCi8qIQogKiBAb3ZlcnZpZXcgIEVtYmVy
        IC0gSmF2YVNjcmlwdCBBcHBsaWNhdGlvbiBGcmFtZXdvcmsKICogQGNvcHly
        aWdodCBDb3B5cmlnaHQgMjAxMS0yMDE0IFRpbGRlIEluYy4gYW5kIGNvbnRy
        aWJ1dG9ycwogKiAgICAgICAgICAgIFBvcnRpb25zIENvcHlyaWdodCAyMDA2
        LTIwMTEgU3Ryb2JlIEluYy4KICogICAgICAgICAgICBQb3J0aW9ucyBDb3B5
        cmlnaHQgMjAwOC0yMDExIEFwcGxlIEluYy4gQWxsIHJpZ2h0cyByZXNlcnZl
        ZC4KICogQGxpY2Vuc2UgICBMaWNlbnNlZCB1bmRlciBNSVQgbGljZW5zZQog
        KiAgICAgICAgICAgIFNlZSBodHRwczovL3Jhdy5naXRodWIuY29tL2VtYmVy
        anMvZW1iZXIuanMvbWFzdGVyL0xJQ0VOU0UKICogQHZlcnNpb24gICAxLjQu
        MStwcmUuYWY4N2JkMjAKICovCgoKKGZ1bmN0aW9uKCkgewp2YXIgZGVmaW5l
        LCByZXF1aXJlTW9kdWxlLCByZXF1aXJlLCByZXF1aXJlanM7CgooZnVuY3Rp
        b24oKSB7CiAgdmFyIHJlZ2lzdHJ5ID0ge30sIHNlZW4gPSB7fTsKCiAgZGVm
        aW5lID0gZnVuY3Rpb24obmFtZSwgZGVwcywgY2FsbGJhY2spIHsKICAgIHJl
        Z2lzdHJ5W25hbWVdID0geyBkZXBzOiBkZXBzLCBjYWxsYmFjazogY2FsbGJh
        Y2sgfTsKICB9OwoKICByZXF1aXJlanMgPSByZXF1aXJlID0gcmVxdWlyZU1v
        ZHVsZSA9IGZ1bmN0aW9uKG5hbWUpIHsKICByZXF1aXJlanMuX2Vha19zZWVu
        ID0gcmVnaXN0cnk7CgogICAgaWYgKHNlZW5bbmFtZV0pIHsgcmV0dXJuIHNl
        ZW5bbmFtZV07IH0KICAgIHNlZW5bbmFtZV0gPSB7fTsKCiAgICBpZiAoIXJl
        Z2lzdHJ5W25hbWVdKSB7CiAgICAgIHRocm93IG5ldyBFcnJvcigiQ291bGQg
        bm90IGZpbmQgbW9kdWxlICIgKyBuYW1lKTsKICAgIH0KCiAgICB2YXIgbW9k
        ID0gcmVnaXN0cnlbbmFtZV0sCiAgICAgICAgZGVwcyA9IG1vZC5kZXBzLAog
        ICAgICAgIGNhbGxiYWNrID0gbW9kLmNhbGxiYWNrLAogICAgICAgIHJlaWZp
        ZWQgPSBbXSwKICAgICAgICBleHBvcnRzOwoKICAgIGZvciAodmFyIGk9MCwg
        bD1kZXBzLmxlbmd0aDsgaTxsOyBpKyspIHsKICAgICAgaWYgKGRlcHNbaV0g
        PT09ICdleHBvcnRzJykgewogICAgICAgIHJlaWZpZWQucHVzaChleHBvcnRz
        ID0ge30pOwogICAgICB9IGVsc2UgewogICAgICAgIHJlaWZpZWQucHVzaChy
        ZXF1aXJlTW9kdWxlKHJlc29sdmUoZGVwc1tpXSkpKTsKICAgICAgfQogICAg
        fQoKICAgIHZhciB2YWx1ZSA9IGNhbGxiYWNrLmFwcGx5KHRoaXMsIHJlaWZp
        ZWQpOwogICAgcmV0dXJuIHNlZW5bbmFtZV0gPSBleHBvcnRzIHx8IHZhbHVl
        OwoKICAgIGZ1bmN0aW9uIHJlc29sdmUoY2hpbGQpIHsKICAgICAgaWYgKGNo
        aWxkLmNoYXJBdCgwKSAhPT0gJy4nKSB7IHJldHVybiBjaGlsZDsgfQogICAg
        ICB2YXIgcGFydHMgPSBjaGlsZC5zcGxpdCgiLyIpOwogICAgICB2YXIgcGFy
        ZW50QmFzZSA9IG5hbWUuc3BsaXQoIi8iKS5zbGljZSgwLCAtMSk7CgogICAg
        ICBmb3IgKHZhciBpPTAsIGw9cGFydHMubGVuZ3RoOyBpPGw7IGkrKykgewog
        ICAgICAgIHZhciBwYXJ0ID0gcGFydHNbaV07CgogICAgICAgIGlmIChwYXJ0
        ID09PSAnLi4nKSB7IHBhcmVudEJhc2UucG9wKCk7IH0KICAgICAgICBlbHNl
        IGlmIChwYXJ0ID09PSAnLicpIHsgY29udGludWU7IH0KICAgICAgICBlbHNl
        IHsgcGFyZW50QmFzZS5wdXNoKHBhcnQpOyB9CiAgICAgIH0KCiAgICAgIHJl
        dHVybiBwYXJlbnRCYXNlLmpvaW4oIi8iKTsKICAgIH0KICB9Owp9KSgpOwoo
        ZnVuY3Rpb24oKSB7Ci8qZ2xvYmFscyBFbTp0cnVlIEVOViBFbWJlckVOViBN
        ZXRhbW9ycGhFTlY6dHJ1ZSAqLwoKLyoqCkBtb2R1bGUgZW1iZXIKQHN1Ym1v
        ZHVsZSBlbWJlci1tZXRhbAoqLwoKLyoqCiAgQWxsIEVtYmVyIG1ldGhvZHMg
        YW5kIGZ1bmN0aW9ucyBhcmUgZGVmaW5lZCBpbnNpZGUgb2YgdGhpcyBuYW1l
        c3BhY2UuIFlvdQogIGdlbmVyYWxseSBzaG91bGQgbm90IGFkZCBuZXcgcHJv
        cGVydGllcyB0byB0aGlzIG5hbWVzcGFjZSBhcyBpdCBtYXkgYmUKICBvdmVy
        d3JpdHRlbiBieSBmdXR1cmUgdmVyc2lvbnMgb2YgRW1iZXIuCgogIFlvdSBj
        YW4gYWxzbyB1c2UgdGhlIHNob3J0aGFuZCBgRW1gIGluc3RlYWQgb2YgYEVt
        YmVyYC4KCiAgRW1iZXItUnVudGltZSBpcyBhIGZyYW1ld29yayB0aGF0IHBy
        b3ZpZGVzIGNvcmUgZnVuY3Rpb25zIGZvciBFbWJlciBpbmNsdWRpbmcKICBj
        cm9zcy1wbGF0Zm9ybSBmdW5jdGlvbnMsIHN1cHBvcnQgZm9yIHByb3BlcnR5
        IG9ic2VydmluZyBhbmQgb2JqZWN0cy4gSXRzCiAgZm9jdXMgaXMgb24gc21h
        bGwgc2l6ZSBhbmQgcGVyZm9ybWFuY2UuIFlvdSBjYW4gdXNlIHRoaXMgaW4g
        cGxhY2Ugb2Ygb3IKICBhbG9uZy1zaWRlIG90aGVyIGNyb3NzLXBsYXRmb3Jt
        IGxpYnJhcmllcyBzdWNoIGFzIGpRdWVyeS4KCiAgVGhlIGNvcmUgUnVudGlt
        ZSBmcmFtZXdvcmsgaXMgYmFzZWQgb24gdGhlIGpRdWVyeSBBUEkgd2l0aCBh
        IG51bWJlciBvZgogIHBlcmZvcm1hbmNlIG9wdGltaXphdGlvbnMuCgogIEBj
        bGFzcyBFbWJlcgogIEBzdGF0aWMKICBAdmVyc2lvbiAxLjQuMStwcmUuYWY4
        N2JkMjAKKi8KCmlmICgndW5kZWZpbmVkJyA9PT0gdHlwZW9mIEVtYmVyKSB7
        CiAgLy8gQ3JlYXRlIGNvcmUgb2JqZWN0LiBNYWtlIGl0IGFjdCBsaWtlIGFu
        IGluc3RhbmNlIG9mIEVtYmVyLk5hbWVzcGFjZSBzbyB0aGF0CiAgLy8gb2Jq
        ZWN0cyBhc3NpZ25lZCB0byBpdCBhcmUgZ2l2ZW4gYSBzYW5lIHN0cmluZyBy
        ZXByZXNlbnRhdGlvbi4KICBFbWJlciA9IHt9Owp9CgovLyBEZWZhdWx0IGlt
        cG9ydHMsIGV4cG9ydHMgYW5kIGxvb2t1cCB0byB0aGUgZ2xvYmFsIG9iamVj
        dDsKdmFyIGltcG9ydHMgPSBFbWJlci5pbXBvcnRzID0gRW1iZXIuaW1wb3J0
        cyB8fCB0aGlzOwp2YXIgZXhwb3J0cyA9IEVtYmVyLmV4cG9ydHMgPSBFbWJl
        ci5leHBvcnRzIHx8IHRoaXM7CnZhciBsb29rdXAgID0gRW1iZXIubG9va3Vw
        ICA9IEVtYmVyLmxvb2t1cCAgfHwgdGhpczsKCi8vIGFsaWFzZXMgbmVlZGVk
        IHRvIGtlZXAgbWluaWZpZXJzIGZyb20gcmVtb3ZpbmcgdGhlIGdsb2JhbCBj
        b250ZXh0CmV4cG9ydHMuRW0gPSBleHBvcnRzLkVtYmVyID0gRW0gPSBFbWJl
        cjsKCi8vIE1ha2Ugc3VyZSB0aGVzZSBhcmUgc2V0IHdoZXRoZXIgRW1iZXIg
        d2FzIGFscmVhZHkgZGVmaW5lZCBvciBub3QKCkVtYmVyLmlzTmFtZXNwYWNl
        ID0gdHJ1ZTsKCkVtYmVyLnRvU3RyaW5nID0gZnVuY3Rpb24oKSB7IHJldHVy
        biAiRW1iZXIiOyB9OwoKCi8qKgogIEBwcm9wZXJ0eSBWRVJTSU9OCiAgQHR5
        cGUgU3RyaW5nCiAgQGRlZmF1bHQgJzEuNC4xK3ByZS5hZjg3YmQyMCcKICBA
        c3RhdGljCiovCkVtYmVyLlZFUlNJT04gPSAnMS40LjErcHJlLmFmODdiZDIw
        JzsKCi8qKgogIFN0YW5kYXJkIGVudmlyb25tZW50YWwgdmFyaWFibGVzLiBZ
        b3UgY2FuIGRlZmluZSB0aGVzZSBpbiBhIGdsb2JhbCBgRW1iZXJFTlZgCiAg
        dmFyaWFibGUgYmVmb3JlIGxvYWRpbmcgRW1iZXIgdG8gY29udHJvbCB2YXJp
        b3VzIGNvbmZpZ3VyYXRpb24gc2V0dGluZ3MuCgogIEZvciBiYWNrd2FyZHMg
        Y29tcGF0aWJpbGl0eSB3aXRoIGVhcmxpZXIgdmVyc2lvbnMgb2YgRW1iZXIg
        dGhlIGdsb2JhbCBgRU5WYAogIHZhcmlhYmxlIHdpbGwgYmUgdXNlZCBpZiBg
        RW1iZXJFTlZgIGlzIG5vdCBkZWZpbmVkLgoKICBAcHJvcGVydHkgRU5WCiAg
        QHR5cGUgSGFzaAoqLwoKLy8gVGhpcyBuZWVkcyB0byBiZSBrZXB0IGluIHN5
        bmMgd2l0aCB0aGUgbG9naWMgaW4KLy8gYHBhY2thZ2VzL2VtYmVyLWRlYnVn
        L2xpYi9tYWluLmpzYC4KaWYgKEVtYmVyLkVOVikgewogIC8vIGRvIG5vdGhp
        bmcgaWYgRW1iZXIuRU5WIGlzIGFscmVhZHkgc2V0dXAKfSBlbHNlIGlmICgn
        dW5kZWZpbmVkJyAhPT0gdHlwZW9mIEVtYmVyRU5WKSB7CiAgRW1iZXIuRU5W
        ID0gRW1iZXJFTlY7Cn0gZWxzZSBpZigndW5kZWZpbmVkJyAhPT0gdHlwZW9m
        IEVOVikgewogIEVtYmVyLkVOViA9IEVOVjsKfSBlbHNlIHsKICBFbWJlci5F
        TlYgPSB7fTsKfQoKRW1iZXIuY29uZmlnID0gRW1iZXIuY29uZmlnIHx8IHt9
        OwoKLy8gV2UgZGlzYWJsZSB0aGUgUkFOR0UgQVBJIGJ5IGRlZmF1bHQgZm9y
        IHBlcmZvcm1hbmNlIHJlYXNvbnMKaWYgKCd1bmRlZmluZWQnID09PSB0eXBl
        b2YgRW1iZXIuRU5WLkRJU0FCTEVfUkFOR0VfQVBJKSB7CiAgRW1iZXIuRU5W
        LkRJU0FCTEVfUkFOR0VfQVBJID0gdHJ1ZTsKfQoKaWYgKCJ1bmRlZmluZWQi
        ID09PSB0eXBlb2YgTWV0YW1vcnBoRU5WKSB7CiAgZXhwb3J0cy5NZXRhbW9y
        cGhFTlYgPSB7fTsKfQoKTWV0YW1vcnBoRU5WLkRJU0FCTEVfUkFOR0VfQVBJ
        ID0gRW1iZXIuRU5WLkRJU0FCTEVfUkFOR0VfQVBJOwoKLyoqCiAgSGFzaCBv
        ZiBlbmFibGVkIENhbmFyeSBmZWF0dXJlcy4gQWRkIHRvIGJlZm9yZSBjcmVh
        dGluZyB5b3VyIGFwcGxpY2F0aW9uLgoKICBZb3UgY2FuIGFsc28gZGVmaW5l
        IGBFTlYuRkVBVFVSRVNgIGlmIHlvdSBuZWVkIHRvIGVuYWJsZSBmZWF0dXJl
        cyBmbGFnZ2VkIGF0IHJ1bnRpbWUuCgogIEBwcm9wZXJ0eSBGRUFUVVJFUwog
        IEB0eXBlIEhhc2gKKi8KCkVtYmVyLkZFQVRVUkVTID0gRW1iZXIuRU5WLkZF
        QVRVUkVTIHx8IHt9OwoKLyoqCiAgVGVzdCB0aGF0IGEgZmVhdHVyZSBpcyBl
        bmFibGVkLiBQYXJzZWQgYnkgRW1iZXIncyBidWlsZCB0b29scyB0byBsZWF2
        ZQogIGV4cGVyaW1lbnRhbCBmZWF0dXJlcyBvdXQgb2YgYmV0YS9zdGFibGUg
        YnVpbGRzLgoKICBZb3UgY2FuIGRlZmluZSB0aGUgZm9sbG93aW5nIGNvbmZp
        Z3VyYXRpb24gb3B0aW9uczoKCiAgKiBgRU5WLkVOQUJMRV9BTExfRkVBVFVS
        RVNgIC0gZm9yY2UgYWxsIGZlYXR1cmVzIHRvIGJlIGVuYWJsZWQuCiAgKiBg
        RU5WLkVOQUJMRV9PUFRJT05BTF9GRUFUVVJFU2AgLSBlbmFibGUgYW55IGZl
        YXR1cmVzIHRoYXQgaGF2ZSBub3QgYmVlbiBleHBsaWNpdGx5CiAgICBlbmFi
        bGVkL2Rpc2FibGVkLgoKICBAbWV0aG9kIGlzRW5hYmxlZAogIEBwYXJhbSB7
        c3RyaW5nfSBmZWF0dXJlCiovCgpFbWJlci5GRUFUVVJFUy5pc0VuYWJsZWQg
        PSBmdW5jdGlvbihmZWF0dXJlKSB7CiAgdmFyIGZlYXR1cmVWYWx1ZSA9IEVt
        YmVyLkZFQVRVUkVTW2ZlYXR1cmVdOwoKICBpZiAoRW1iZXIuRU5WLkVOQUJM
        RV9BTExfRkVBVFVSRVMpIHsKICAgIHJldHVybiB0cnVlOwogIH0gZWxzZSBp
        ZiAoZmVhdHVyZVZhbHVlID09PSB0cnVlIHx8IGZlYXR1cmVWYWx1ZSA9PT0g
        ZmFsc2UgfHwgZmVhdHVyZVZhbHVlID09PSB1bmRlZmluZWQpIHsKICAgIHJl
        dHVybiBmZWF0dXJlVmFsdWU7CiAgfSBlbHNlIGlmIChFbWJlci5FTlYuRU5B
        QkxFX09QVElPTkFMX0ZFQVRVUkVTKSB7CiAgICByZXR1cm4gdHJ1ZTsKICB9
        IGVsc2UgewogICAgcmV0dXJuIGZhbHNlOwogIH0KfTsKCi8vIC4uLi4uLi4u
        Li4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4u
        Li4uLi4KLy8gQk9PVFNUUkFQCi8vCgovKioKICBEZXRlcm1pbmVzIHdoZXRo
        ZXIgRW1iZXIgc2hvdWxkIGVuaGFuY2VzIHNvbWUgYnVpbHQtaW4gb2JqZWN0
        IHByb3RvdHlwZXMgdG8KICBwcm92aWRlIGEgbW9yZSBmcmllbmRseSBBUEku
        IElmIGVuYWJsZWQsIGEgZmV3IG1ldGhvZHMgd2lsbCBiZSBhZGRlZCB0bwog
        IGBGdW5jdGlvbmAsIGBTdHJpbmdgLCBhbmQgYEFycmF5YC4gYE9iamVjdC5w
        cm90b3R5cGVgIHdpbGwgbm90IGJlIGVuaGFuY2VkLAogIHdoaWNoIGlzIHRo
        ZSBvbmUgdGhhdCBjYXVzZXMgbW9zdCB0cm91YmxlIGZvciBwZW9wbGUuCgog
        IEluIGdlbmVyYWwgd2UgcmVjb21tZW5kIGxlYXZpbmcgdGhpcyBvcHRpb24g
        c2V0IHRvIHRydWUgc2luY2UgaXQgcmFyZWx5CiAgY29uZmxpY3RzIHdpdGgg
        b3RoZXIgY29kZS4gSWYgeW91IG5lZWQgdG8gdHVybiBpdCBvZmYgaG93ZXZl
        ciwgeW91IGNhbgogIGRlZmluZSBhbiBgRU5WLkVYVEVORF9QUk9UT1RZUEVT
        YCBjb25maWcgdG8gZGlzYWJsZSBpdC4KCiAgQHByb3BlcnR5IEVYVEVORF9Q
        Uk9UT1RZUEVTCiAgQHR5cGUgQm9vbGVhbgogIEBkZWZhdWx0IHRydWUKKi8K
        RW1iZXIuRVhURU5EX1BST1RPVFlQRVMgPSBFbWJlci5FTlYuRVhURU5EX1BS
        T1RPVFlQRVM7CgppZiAodHlwZW9mIEVtYmVyLkVYVEVORF9QUk9UT1RZUEVT
        ID09PSAndW5kZWZpbmVkJykgewogIEVtYmVyLkVYVEVORF9QUk9UT1RZUEVT
        ID0gdHJ1ZTsKfQoKLyoqCiAgRGV0ZXJtaW5lcyB3aGV0aGVyIEVtYmVyIGxv
        Z3MgYSBmdWxsIHN0YWNrIHRyYWNlIGR1cmluZyBkZXByZWNhdGlvbiB3YXJu
        aW5ncwoKICBAcHJvcGVydHkgTE9HX1NUQUNLVFJBQ0VfT05fREVQUkVDQVRJ
        T04KICBAdHlwZSBCb29sZWFuCiAgQGRlZmF1bHQgdHJ1ZQoqLwpFbWJlci5M
        T0dfU1RBQ0tUUkFDRV9PTl9ERVBSRUNBVElPTiA9IChFbWJlci5FTlYuTE9H
        X1NUQUNLVFJBQ0VfT05fREVQUkVDQVRJT04gIT09IGZhbHNlKTsKCi8qKgog
        IERldGVybWluZXMgd2hldGhlciBFbWJlciBzaG91bGQgYWRkIEVDTUFTY3Jp
        cHQgNSBzaGltcyB0byBvbGRlciBicm93c2Vycy4KCiAgQHByb3BlcnR5IFNI
        SU1fRVM1CiAgQHR5cGUgQm9vbGVhbgogIEBkZWZhdWx0IEVtYmVyLkVYVEVO
        RF9QUk9UT1RZUEVTCiovCkVtYmVyLlNISU1fRVM1ID0gKEVtYmVyLkVOVi5T
        SElNX0VTNSA9PT0gZmFsc2UpID8gZmFsc2UgOiBFbWJlci5FWFRFTkRfUFJP
        VE9UWVBFUzsKCi8qKgogIERldGVybWluZXMgd2hldGhlciBFbWJlciBsb2dz
        IGluZm8gYWJvdXQgdmVyc2lvbiBvZiB1c2VkIGxpYnJhcmllcwoKICBAcHJv
        cGVydHkgTE9HX1ZFUlNJT04KICBAdHlwZSBCb29sZWFuCiAgQGRlZmF1bHQg
        dHJ1ZQoqLwpFbWJlci5MT0dfVkVSU0lPTiA9IChFbWJlci5FTlYuTE9HX1ZF
        UlNJT04gPT09IGZhbHNlKSA/IGZhbHNlIDogdHJ1ZTsKCi8qKgogIEVtcHR5
        IGZ1bmN0aW9uLiBVc2VmdWwgZm9yIHNvbWUgb3BlcmF0aW9ucy4gQWx3YXlz
        IHJldHVybnMgYHRoaXNgLgoKICBAbWV0aG9kIEsKICBAcHJpdmF0ZQogIEBy
        ZXR1cm4ge09iamVjdH0KKi8KRW1iZXIuSyA9IGZ1bmN0aW9uKCkgeyByZXR1
        cm4gdGhpczsgfTsKCgovLyBTdHViIG91dCB0aGUgbWV0aG9kcyBkZWZpbmVk
        IGJ5IHRoZSBlbWJlci1kZWJ1ZyBwYWNrYWdlIGluIGNhc2UgaXQncyBub3Qg
        bG9hZGVkCgppZiAoJ3VuZGVmaW5lZCcgPT09IHR5cGVvZiBFbWJlci5hc3Nl
        cnQpIHsgRW1iZXIuYXNzZXJ0ID0gRW1iZXIuSzsgfQppZiAoJ3VuZGVmaW5l
        ZCcgPT09IHR5cGVvZiBFbWJlci53YXJuKSB7IEVtYmVyLndhcm4gPSBFbWJl
        ci5LOyB9CmlmICgndW5kZWZpbmVkJyA9PT0gdHlwZW9mIEVtYmVyLmRlYnVn
        KSB7IEVtYmVyLmRlYnVnID0gRW1iZXIuSzsgfQppZiAoJ3VuZGVmaW5lZCcg
        PT09IHR5cGVvZiBFbWJlci5kZXByZWNhdGUpIHsgRW1iZXIuZGVwcmVjYXRl
        ID0gRW1iZXIuSzsgfQppZiAoJ3VuZGVmaW5lZCcgPT09IHR5cGVvZiBFbWJl
        ci5kZXByZWNhdGVGdW5jKSB7CiAgRW1iZXIuZGVwcmVjYXRlRnVuYyA9IGZ1
        bmN0aW9uKF8sIGZ1bmMpIHsgcmV0dXJuIGZ1bmM7IH07Cn0KCi8qKgogIFBy
        ZXZpb3VzbHkgd2UgdXNlZCBgRW1iZXIuJC51dWlkYCwgaG93ZXZlciBgJC51
        dWlkYCBoYXMgYmVlbiByZW1vdmVkIGZyb20KICBqUXVlcnkgbWFzdGVyLiBX
        ZSdsbCBqdXN0IGJvb3RzdHJhcCBvdXIgb3duIHV1aWQgbm93LgoKICBAcHJv
        cGVydHkgdXVpZAogIEB0eXBlIE51bWJlcgogIEBwcml2YXRlCiovCkVtYmVy
        LnV1aWQgPSAwOwoKLyoqCiAgTWVyZ2UgdGhlIGNvbnRlbnRzIG9mIHR3byBv
        YmplY3RzIHRvZ2V0aGVyIGludG8gdGhlIGZpcnN0IG9iamVjdC4KCiAgYGBg
        amF2YXNjcmlwdAogIEVtYmVyLm1lcmdlKHtmaXJzdDogJ1RvbSd9LCB7bGFz
        dDogJ0RhbGUnfSk7IC8vIHtmaXJzdDogJ1RvbScsIGxhc3Q6ICdEYWxlJ30K
        ICB2YXIgYSA9IHtmaXJzdDogJ1llaHVkYSd9LCBiID0ge2xhc3Q6ICdLYXR6
        J307CiAgRW1iZXIubWVyZ2UoYSwgYik7IC8vIGEgPT0ge2ZpcnN0OiAnWWVo
        dWRhJywgbGFzdDogJ0thdHonfSwgYiA9PSB7bGFzdDogJ0thdHonfQogIGBg
        YAoKICBAbWV0aG9kIG1lcmdlCiAgQGZvciBFbWJlcgogIEBwYXJhbSB7T2Jq
        ZWN0fSBvcmlnaW5hbCBUaGUgb2JqZWN0IHRvIG1lcmdlIGludG8KICBAcGFy
        YW0ge09iamVjdH0gdXBkYXRlcyBUaGUgb2JqZWN0IHRvIGNvcHkgcHJvcGVy
        dGllcyBmcm9tCiAgQHJldHVybiB7T2JqZWN0fQoqLwpFbWJlci5tZXJnZSA9
        IGZ1bmN0aW9uKG9yaWdpbmFsLCB1cGRhdGVzKSB7CiAgZm9yICh2YXIgcHJv
        cCBpbiB1cGRhdGVzKSB7CiAgICBpZiAoIXVwZGF0ZXMuaGFzT3duUHJvcGVy
        dHkocHJvcCkpIHsgY29udGludWU7IH0KICAgIG9yaWdpbmFsW3Byb3BdID0g
        dXBkYXRlc1twcm9wXTsKICB9CiAgcmV0dXJuIG9yaWdpbmFsOwp9OwoKLyoq
        CiAgUmV0dXJucyB0cnVlIGlmIHRoZSBwYXNzZWQgdmFsdWUgaXMgbnVsbCBv
        ciB1bmRlZmluZWQuIFRoaXMgYXZvaWRzIGVycm9ycwogIGZyb20gSlNMaW50
        IGNvbXBsYWluaW5nIGFib3V0IHVzZSBvZiA9PSwgd2hpY2ggY2FuIGJlIHRl
        Y2huaWNhbGx5CiAgY29uZnVzaW5nLgoKICBgYGBqYXZhc2NyaXB0CiAgRW1i
        ZXIuaXNOb25lKCk7ICAgICAgICAgICAgICAvLyB0cnVlCiAgRW1iZXIuaXNO
        b25lKG51bGwpOyAgICAgICAgICAvLyB0cnVlCiAgRW1iZXIuaXNOb25lKHVu
        ZGVmaW5lZCk7ICAgICAvLyB0cnVlCiAgRW1iZXIuaXNOb25lKCcnKTsgICAg
        ICAgICAgICAvLyBmYWxzZQogIEVtYmVyLmlzTm9uZShbXSk7ICAgICAgICAg
        ICAgLy8gZmFsc2UKICBFbWJlci5pc05vbmUoZnVuY3Rpb24oKSB7fSk7ICAv
        LyBmYWxzZQogIGBgYAoKICBAbWV0aG9kIGlzTm9uZQogIEBmb3IgRW1iZXIK
        ICBAcGFyYW0ge09iamVjdH0gb2JqIFZhbHVlIHRvIHRlc3QKICBAcmV0dXJu
        IHtCb29sZWFufQoqLwpFbWJlci5pc05vbmUgPSBmdW5jdGlvbihvYmopIHsK
        ICByZXR1cm4gb2JqID09PSBudWxsIHx8IG9iaiA9PT0gdW5kZWZpbmVkOwp9
        OwpFbWJlci5ub25lID0gRW1iZXIuZGVwcmVjYXRlRnVuYygiRW1iZXIubm9u
        ZSBpcyBkZXByZWNhdGVkLiBQbGVhc2UgdXNlIEVtYmVyLmlzTm9uZSBpbnN0
        ZWFkLiIsIEVtYmVyLmlzTm9uZSk7CgovKioKICBWZXJpZmllcyB0aGF0IGEg
        dmFsdWUgaXMgYG51bGxgIG9yIGFuIGVtcHR5IHN0cmluZywgZW1wdHkgYXJy
        YXksCiAgb3IgZW1wdHkgZnVuY3Rpb24uCgogIENvbnN0cmFpbnMgdGhlIHJ1
        bGVzIG9uIGBFbWJlci5pc05vbmVgIGJ5IHJldHVybmluZyBmYWxzZSBmb3Ig
        ZW1wdHkKICBzdHJpbmcgYW5kIGVtcHR5IGFycmF5cy4KCiAgYGBgamF2YXNj
        cmlwdAogIEVtYmVyLmlzRW1wdHkoKTsgICAgICAgICAgICAgICAgLy8gdHJ1
        ZQogIEVtYmVyLmlzRW1wdHkobnVsbCk7ICAgICAgICAgICAgLy8gdHJ1ZQog
        IEVtYmVyLmlzRW1wdHkodW5kZWZpbmVkKTsgICAgICAgLy8gdHJ1ZQogIEVt
        YmVyLmlzRW1wdHkoJycpOyAgICAgICAgICAgICAgLy8gdHJ1ZQogIEVtYmVy
        LmlzRW1wdHkoW10pOyAgICAgICAgICAgICAgLy8gdHJ1ZQogIEVtYmVyLmlz
        RW1wdHkoJ0FkYW0gSGF3a2lucycpOyAgLy8gZmFsc2UKICBFbWJlci5pc0Vt
        cHR5KFswLDEsMl0pOyAgICAgICAgIC8vIGZhbHNlCiAgYGBgCgogIEBtZXRo
        b2QgaXNFbXB0eQogIEBmb3IgRW1iZXIKICBAcGFyYW0ge09iamVjdH0gb2Jq
        IFZhbHVlIHRvIHRlc3QKICBAcmV0dXJuIHtCb29sZWFufQoqLwpFbWJlci5p
        c0VtcHR5ID0gZnVuY3Rpb24ob2JqKSB7CiAgcmV0dXJuIEVtYmVyLmlzTm9u
        ZShvYmopIHx8IChvYmoubGVuZ3RoID09PSAwICYmIHR5cGVvZiBvYmogIT09
        ICdmdW5jdGlvbicpIHx8ICh0eXBlb2Ygb2JqID09PSAnb2JqZWN0JyAmJiBF
        bWJlci5nZXQob2JqLCAnbGVuZ3RoJykgPT09IDApOwp9OwpFbWJlci5lbXB0
        eSA9IEVtYmVyLmRlcHJlY2F0ZUZ1bmMoIkVtYmVyLmVtcHR5IGlzIGRlcHJl
        Y2F0ZWQuIFBsZWFzZSB1c2UgRW1iZXIuaXNFbXB0eSBpbnN0ZWFkLiIsIEVt
        YmVyLmlzRW1wdHkpIDsKCgp9KSgpOwoKCgooZnVuY3Rpb24oKSB7Ci8qZ2xv
        YmFscyBOb2RlICovCi8qKgpAbW9kdWxlIGVtYmVyLW1ldGFsCiovCgovKioK
        ICBQbGF0Zm9ybSBzcGVjaWZpYyBtZXRob2RzIGFuZCBmZWF0dXJlIGRldGVj
        dG9ycyBuZWVkZWQgYnkgdGhlIGZyYW1ld29yay4KCiAgQGNsYXNzIHBsYXRm
        b3JtCiAgQG5hbWVzcGFjZSBFbWJlcgogIEBzdGF0aWMKKi8KdmFyIHBsYXRm
        b3JtID0gRW1iZXIucGxhdGZvcm0gPSB7fTsKCgovKioKICBJZGVudGljYWwg
        dG8gYE9iamVjdC5jcmVhdGUoKWAuIEltcGxlbWVudHMgaWYgbm90IGF2YWls
        YWJsZSBuYXRpdmVseS4KCiAgQG1ldGhvZCBjcmVhdGUKICBAZm9yIEVtYmVy
        CiovCkVtYmVyLmNyZWF0ZSA9IE9iamVjdC5jcmVhdGU7CgovLyBJRTggaGFz
        IE9iamVjdC5jcmVhdGUgYnV0IGl0IGNvdWxkbid0IHRyZWF0IHByb3BlcnR5
        IGRlc2NyaXB0b3JzLgppZiAoRW1iZXIuY3JlYXRlKSB7CiAgaWYgKEVtYmVy
        LmNyZWF0ZSh7YTogMX0sIHthOiB7dmFsdWU6IDJ9fSkuYSAhPT0gMikgewog
        ICAgRW1iZXIuY3JlYXRlID0gbnVsbDsKICB9Cn0KCi8vIFNUVUJfT0JKRUNU
        X0NSRUFURSBhbGxvd3MgdXMgdG8gb3ZlcnJpZGUgb3RoZXIgbGlicmFyaWVz
        IHRoYXQgc3R1YgovLyBPYmplY3QuY3JlYXRlIGRpZmZlcmVudCB0aGFuIHdl
        IHdvdWxkIHByZWZlcgppZiAoIUVtYmVyLmNyZWF0ZSB8fCBFbWJlci5FTlYu
        U1RVQl9PQkpFQ1RfQ1JFQVRFKSB7CiAgdmFyIEsgPSBmdW5jdGlvbigpIHt9
        OwoKICBFbWJlci5jcmVhdGUgPSBmdW5jdGlvbihvYmosIHByb3BzKSB7CiAg
        ICBLLnByb3RvdHlwZSA9IG9iajsKICAgIG9iaiA9IG5ldyBLKCk7CiAgICBp
        ZiAocHJvcHMpIHsKICAgICAgSy5wcm90b3R5cGUgPSBvYmo7CiAgICAgIGZv
        ciAodmFyIHByb3AgaW4gcHJvcHMpIHsKICAgICAgICBLLnByb3RvdHlwZVtw
        cm9wXSA9IHByb3BzW3Byb3BdLnZhbHVlOwogICAgICB9CiAgICAgIG9iaiA9
        IG5ldyBLKCk7CiAgICB9CiAgICBLLnByb3RvdHlwZSA9IG51bGw7CgogICAg
        cmV0dXJuIG9iajsKICB9OwoKICBFbWJlci5jcmVhdGUuaXNTaW11bGF0ZWQg
        PSB0cnVlOwp9Cgp2YXIgZGVmaW5lUHJvcGVydHkgPSBPYmplY3QuZGVmaW5l
        UHJvcGVydHk7CnZhciBjYW5SZWRlZmluZVByb3BlcnRpZXMsIGNhbkRlZmlu
        ZVByb3BlcnR5T25ET007CgovLyBDYXRjaCBJRTggd2hlcmUgT2JqZWN0LmRl
        ZmluZVByb3BlcnR5IGV4aXN0cyBidXQgb25seSB3b3JrcyBvbiBET00gZWxl
        bWVudHMKaWYgKGRlZmluZVByb3BlcnR5KSB7CiAgdHJ5IHsKICAgIGRlZmlu
        ZVByb3BlcnR5KHt9LCAnYScse2dldDpmdW5jdGlvbigpIHt9fSk7CiAgfSBj
        YXRjaCAoZSkgewogICAgZGVmaW5lUHJvcGVydHkgPSBudWxsOwogIH0KfQoK
        aWYgKGRlZmluZVByb3BlcnR5KSB7CiAgLy8gRGV0ZWN0cyBhIGJ1ZyBpbiBB
        bmRyb2lkIDwzLjIgd2hlcmUgeW91IGNhbm5vdCByZWRlZmluZSBhIHByb3Bl
        cnR5IHVzaW5nCiAgLy8gT2JqZWN0LmRlZmluZVByb3BlcnR5IG9uY2UgYWNj
        ZXNzb3JzIGhhdmUgYWxyZWFkeSBiZWVuIHNldC4KICBjYW5SZWRlZmluZVBy
        b3BlcnRpZXMgPSAoZnVuY3Rpb24oKSB7CiAgICB2YXIgb2JqID0ge307Cgog
        ICAgZGVmaW5lUHJvcGVydHkob2JqLCAnYScsIHsKICAgICAgY29uZmlndXJh
        YmxlOiB0cnVlLAogICAgICBlbnVtZXJhYmxlOiB0cnVlLAogICAgICBnZXQ6
        IGZ1bmN0aW9uKCkgeyB9LAogICAgICBzZXQ6IGZ1bmN0aW9uKCkgeyB9CiAg
        ICB9KTsKCiAgICBkZWZpbmVQcm9wZXJ0eShvYmosICdhJywgewogICAgICBj
        b25maWd1cmFibGU6IHRydWUsCiAgICAgIGVudW1lcmFibGU6IHRydWUsCiAg
        ICAgIHdyaXRhYmxlOiB0cnVlLAogICAgICB2YWx1ZTogdHJ1ZQogICAgfSk7
        CgogICAgcmV0dXJuIG9iai5hID09PSB0cnVlOwogIH0pKCk7CgogIC8vIFRo
        aXMgaXMgZm9yIFNhZmFyaSA1LjAsIHdoaWNoIHN1cHBvcnRzIE9iamVjdC5k
        ZWZpbmVQcm9wZXJ0eSwgYnV0IG5vdAogIC8vIG9uIERPTSBub2Rlcy4KICBj
        YW5EZWZpbmVQcm9wZXJ0eU9uRE9NID0gKGZ1bmN0aW9uKCkgewogICAgdHJ5
        IHsKICAgICAgZGVmaW5lUHJvcGVydHkoZG9jdW1lbnQuY3JlYXRlRWxlbWVu
        dCgnZGl2JyksICdkZWZpbmVQcm9wZXJ0eU9uRE9NJywge30pOwogICAgICBy
        ZXR1cm4gdHJ1ZTsKICAgIH0gY2F0Y2goZSkgeyB9CgogICAgcmV0dXJuIGZh
        bHNlOwogIH0pKCk7CgogIGlmICghY2FuUmVkZWZpbmVQcm9wZXJ0aWVzKSB7
        CiAgICBkZWZpbmVQcm9wZXJ0eSA9IG51bGw7CiAgfSBlbHNlIGlmICghY2Fu
        RGVmaW5lUHJvcGVydHlPbkRPTSkgewogICAgZGVmaW5lUHJvcGVydHkgPSBm
        dW5jdGlvbihvYmosIGtleU5hbWUsIGRlc2MpIHsKICAgICAgdmFyIGlzTm9k
        ZTsKCiAgICAgIGlmICh0eXBlb2YgTm9kZSA9PT0gIm9iamVjdCIpIHsKICAg
        ICAgICBpc05vZGUgPSBvYmogaW5zdGFuY2VvZiBOb2RlOwogICAgICB9IGVs
        c2UgewogICAgICAgIGlzTm9kZSA9IHR5cGVvZiBvYmogPT09ICJvYmplY3Qi
        ICYmIHR5cGVvZiBvYmoubm9kZVR5cGUgPT09ICJudW1iZXIiICYmIHR5cGVv
        ZiBvYmoubm9kZU5hbWUgPT09ICJzdHJpbmciOwogICAgICB9CgogICAgICBp
        ZiAoaXNOb2RlKSB7CiAgICAgICAgLy8gVE9ETzogU2hvdWxkIHdlIGhhdmUg
        YSB3YXJuaW5nIGhlcmU/CiAgICAgICAgcmV0dXJuIChvYmpba2V5TmFtZV0g
        PSBkZXNjLnZhbHVlKTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4g
        T2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5TmFtZSwgZGVzYyk7CiAg
        ICAgIH0KICAgIH07CiAgfQp9CgovKioKQGNsYXNzIHBsYXRmb3JtCkBuYW1l
        c3BhY2UgRW1iZXIKKi8KCi8qKgogIElkZW50aWNhbCB0byBgT2JqZWN0LmRl
        ZmluZVByb3BlcnR5KClgLiBJbXBsZW1lbnRzIGFzIG11Y2ggZnVuY3Rpb25h
        bGl0eQogIGFzIHBvc3NpYmxlIGlmIG5vdCBhdmFpbGFibGUgbmF0aXZlbHku
        CgogIEBtZXRob2QgZGVmaW5lUHJvcGVydHkKICBAcGFyYW0ge09iamVjdH0g
        b2JqIFRoZSBvYmplY3QgdG8gbW9kaWZ5CiAgQHBhcmFtIHtTdHJpbmd9IGtl
        eU5hbWUgcHJvcGVydHkgbmFtZSB0byBtb2RpZnkKICBAcGFyYW0ge09iamVj
        dH0gZGVzYyBkZXNjcmlwdG9yIGhhc2gKICBAcmV0dXJuIHt2b2lkfQoqLwpw
        bGF0Zm9ybS5kZWZpbmVQcm9wZXJ0eSA9IGRlZmluZVByb3BlcnR5OwoKLyoq
        CiAgU2V0IHRvIHRydWUgaWYgdGhlIHBsYXRmb3JtIHN1cHBvcnRzIG5hdGl2
        ZSBnZXR0ZXJzIGFuZCBzZXR0ZXJzLgoKICBAcHJvcGVydHkgaGFzUHJvcGVy
        dHlBY2Nlc3NvcnMKICBAZmluYWwKKi8KcGxhdGZvcm0uaGFzUHJvcGVydHlB
        Y2Nlc3NvcnMgPSB0cnVlOwoKaWYgKCFwbGF0Zm9ybS5kZWZpbmVQcm9wZXJ0
        eSkgewogIHBsYXRmb3JtLmhhc1Byb3BlcnR5QWNjZXNzb3JzID0gZmFsc2U7
        CgogIHBsYXRmb3JtLmRlZmluZVByb3BlcnR5ID0gZnVuY3Rpb24ob2JqLCBr
        ZXlOYW1lLCBkZXNjKSB7CiAgICBpZiAoIWRlc2MuZ2V0KSB7IG9ialtrZXlO
        YW1lXSA9IGRlc2MudmFsdWU7IH0KICB9OwoKICBwbGF0Zm9ybS5kZWZpbmVQ
        cm9wZXJ0eS5pc1NpbXVsYXRlZCA9IHRydWU7Cn0KCmlmIChFbWJlci5FTlYu
        TUFOREFUT1JZX1NFVFRFUiAmJiAhcGxhdGZvcm0uaGFzUHJvcGVydHlBY2Nl
        c3NvcnMpIHsKICBFbWJlci5FTlYuTUFOREFUT1JZX1NFVFRFUiA9IGZhbHNl
        Owp9Cgp9KSgpOwoKCgooZnVuY3Rpb24oKSB7Ci8qanNoaW50IG5ld2NhcDpm
        YWxzZSovCi8qKgpAbW9kdWxlIGVtYmVyLW1ldGFsCiovCgovLyBOT1RFOiBU
        aGVyZSBpcyBhIGJ1ZyBpbiBqc2hpbnQgdGhhdCBkb2Vzbid0IHJlY29nbml6
        ZSBgT2JqZWN0KClgIHdpdGhvdXQgYG5ld2AKLy8gYXMgYmVpbmcgb2sgdW5s
        ZXNzIGJvdGggYG5ld2NhcDpmYWxzZWAgYW5kIG5vdCBgdXNlIHN0cmljdGAu
        Ci8vIGh0dHBzOi8vZ2l0aHViLmNvbS9qc2hpbnQvanNoaW50L2lzc3Vlcy8z
        OTIKCi8vIFRlc3RpbmcgdGhpcyBpcyBub3QgaWRlYWwsIGJ1dCB3ZSB3YW50
        IHRvIHVzZSBuYXRpdmUgZnVuY3Rpb25zCi8vIGlmIGF2YWlsYWJsZSwgYnV0
        IG5vdCB0byB1c2UgdmVyc2lvbnMgY3JlYXRlZCBieSBsaWJyYXJpZXMgbGlr
        ZSBQcm90b3R5cGUKdmFyIGlzTmF0aXZlRnVuYyA9IGZ1bmN0aW9uKGZ1bmMp
        IHsKICAvLyBUaGlzIHNob3VsZCBwcm9iYWJseSB3b3JrIGluIGFsbCBicm93
        c2VycyBsaWtlbHkgdG8gaGF2ZSBFUzUgYXJyYXkgbWV0aG9kcwogIHJldHVy
        biBmdW5jICYmIEZ1bmN0aW9uLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGZ1
        bmMpLmluZGV4T2YoJ1tuYXRpdmUgY29kZV0nKSA+IC0xOwp9OwoKLy8gRnJv
        bTogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4vSmF2YVNjcmlw
        dC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvYXJyYXkvbWFwCnZhciBhcnJh
        eU1hcCA9IGlzTmF0aXZlRnVuYyhBcnJheS5wcm90b3R5cGUubWFwKSA/IEFy
        cmF5LnByb3RvdHlwZS5tYXAgOiBmdW5jdGlvbihmdW4gLyosIHRoaXNwICov
        KSB7CiAgLy8idXNlIHN0cmljdCI7CgogIGlmICh0aGlzID09PSB2b2lkIDAg
        fHwgdGhpcyA9PT0gbnVsbCkgewogICAgdGhyb3cgbmV3IFR5cGVFcnJvcigp
        OwogIH0KCiAgdmFyIHQgPSBPYmplY3QodGhpcyk7CiAgdmFyIGxlbiA9IHQu
        bGVuZ3RoID4+PiAwOwogIGlmICh0eXBlb2YgZnVuICE9PSAiZnVuY3Rpb24i
        KSB7CiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCk7CiAgfQoKICB2YXIgcmVz
        ID0gbmV3IEFycmF5KGxlbik7CiAgdmFyIHRoaXNwID0gYXJndW1lbnRzWzFd
        OwogIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHsKICAgIGlmIChp
        IGluIHQpIHsKICAgICAgcmVzW2ldID0gZnVuLmNhbGwodGhpc3AsIHRbaV0s
        IGksIHQpOwogICAgfQogIH0KCiAgcmV0dXJuIHJlczsKfTsKCi8vIEZyb206
        IGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuL0phdmFTY3JpcHQv
        UmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL2FycmF5L2ZvcmVhY2gKdmFyIGFy
        cmF5Rm9yRWFjaCA9IGlzTmF0aXZlRnVuYyhBcnJheS5wcm90b3R5cGUuZm9y
        RWFjaCkgPyBBcnJheS5wcm90b3R5cGUuZm9yRWFjaCA6IGZ1bmN0aW9uKGZ1
        biAvKiwgdGhpc3AgKi8pIHsKICAvLyJ1c2Ugc3RyaWN0IjsKCiAgaWYgKHRo
        aXMgPT09IHZvaWQgMCB8fCB0aGlzID09PSBudWxsKSB7CiAgICB0aHJvdyBu
        ZXcgVHlwZUVycm9yKCk7CiAgfQoKICB2YXIgdCA9IE9iamVjdCh0aGlzKTsK
        ICB2YXIgbGVuID0gdC5sZW5ndGggPj4+IDA7CiAgaWYgKHR5cGVvZiBmdW4g
        IT09ICJmdW5jdGlvbiIpIHsKICAgIHRocm93IG5ldyBUeXBlRXJyb3IoKTsK
        ICB9CgogIHZhciB0aGlzcCA9IGFyZ3VtZW50c1sxXTsKICBmb3IgKHZhciBp
        ID0gMDsgaSA8IGxlbjsgaSsrKSB7CiAgICBpZiAoaSBpbiB0KSB7CiAgICAg
        IGZ1bi5jYWxsKHRoaXNwLCB0W2ldLCBpLCB0KTsKICAgIH0KICB9Cn07Cgp2
        YXIgYXJyYXlJbmRleE9mID0gaXNOYXRpdmVGdW5jKEFycmF5LnByb3RvdHlw
        ZS5pbmRleE9mKSA/IEFycmF5LnByb3RvdHlwZS5pbmRleE9mIDogZnVuY3Rp
        b24gKG9iaiwgZnJvbUluZGV4KSB7CiAgaWYgKGZyb21JbmRleCA9PT0gbnVs
        bCB8fCBmcm9tSW5kZXggPT09IHVuZGVmaW5lZCkgeyBmcm9tSW5kZXggPSAw
        OyB9CiAgZWxzZSBpZiAoZnJvbUluZGV4IDwgMCkgeyBmcm9tSW5kZXggPSBN
        YXRoLm1heCgwLCB0aGlzLmxlbmd0aCArIGZyb21JbmRleCk7IH0KICBmb3Ig
        KHZhciBpID0gZnJvbUluZGV4LCBqID0gdGhpcy5sZW5ndGg7IGkgPCBqOyBp
        KyspIHsKICAgIGlmICh0aGlzW2ldID09PSBvYmopIHsgcmV0dXJuIGk7IH0K
        ICB9CiAgcmV0dXJuIC0xOwp9OwoKCiAgLyoqCiAgICBBcnJheSBwb2x5Zmls
        bHMgdG8gc3VwcG9ydCBFUzUgZmVhdHVyZXMgaW4gb2xkZXIgYnJvd3NlcnMu
        CgogICAgQG5hbWVzcGFjZSBFbWJlcgogICAgQHByb3BlcnR5IEFycmF5UG9s
        eWZpbGxzCiAgKi8KICBFbWJlci5BcnJheVBvbHlmaWxscyA9IHsKICAgIG1h
        cDogYXJyYXlNYXAsCiAgICBmb3JFYWNoOiBhcnJheUZvckVhY2gsCiAgICBp
        bmRleE9mOiBhcnJheUluZGV4T2YKICB9OwoKCmlmIChFbWJlci5TSElNX0VT
        NSkgewogIGlmICghQXJyYXkucHJvdG90eXBlLm1hcCkgewogICAgQXJyYXku
        cHJvdG90eXBlLm1hcCA9IGFycmF5TWFwOwogIH0KCiAgaWYgKCFBcnJheS5w
        cm90b3R5cGUuZm9yRWFjaCkgewogICAgQXJyYXkucHJvdG90eXBlLmZvckVh
        Y2ggPSBhcnJheUZvckVhY2g7CiAgfQoKICBpZiAoIUFycmF5LnByb3RvdHlw
        ZS5pbmRleE9mKSB7CiAgICBBcnJheS5wcm90b3R5cGUuaW5kZXhPZiA9IGFy
        cmF5SW5kZXhPZjsKICB9Cn0KCn0pKCk7CgoKCihmdW5jdGlvbigpIHsKdmFy
        IGVycm9yUHJvcHMgPSBbJ2Rlc2NyaXB0aW9uJywgJ2ZpbGVOYW1lJywgJ2xp
        bmVOdW1iZXInLCAnbWVzc2FnZScsICduYW1lJywgJ251bWJlcicsICdzdGFj
        ayddOwoKLyoqCiAgQSBzdWJjbGFzcyBvZiB0aGUgSmF2YVNjcmlwdCBFcnJv
        ciBvYmplY3QgZm9yIHVzZSBpbiBFbWJlci4KCiAgQGNsYXNzIEVycm9yCiAg
        QG5hbWVzcGFjZSBFbWJlcgogIEBleHRlbmRzIEVycm9yCiAgQGNvbnN0cnVj
        dG9yCiovCkVtYmVyLkVycm9yID0gZnVuY3Rpb24oKSB7CiAgdmFyIHRtcCA9
        IEVycm9yLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CgogIC8vIEFkZHMgYSBg
        c3RhY2tgIHByb3BlcnR5IHRvIHRoZSBnaXZlbiBlcnJvciBvYmplY3QgdGhh
        dCB3aWxsIHlpZWxkIHRoZQogIC8vIHN0YWNrIHRyYWNlIGF0IHRoZSB0aW1l
        IGNhcHR1cmVTdGFja1RyYWNlIHdhcyBjYWxsZWQuCiAgLy8gV2hlbiBjb2xs
        ZWN0aW5nIHRoZSBzdGFjayB0cmFjZSBhbGwgZnJhbWVzIGFib3ZlIHRoZSB0
        b3Btb3N0IGNhbGwKICAvLyB0byB0aGlzIGZ1bmN0aW9uLCBpbmNsdWRpbmcg
        dGhhdCBjYWxsLCB3aWxsIGJlIGxlZnQgb3V0IG9mIHRoZQogIC8vIHN0YWNr
        IHRyYWNlLgogIC8vIFRoaXMgaXMgdXNlZnVsIGJlY2F1c2Ugd2UgY2FuIGhp
        ZGUgRW1iZXIgaW1wbGVtZW50YXRpb24gZGV0YWlscwogIC8vIHRoYXQgYXJl
        IG5vdCB2ZXJ5IGhlbHBmdWwgZm9yIHRoZSB1c2VyLgogIGlmIChFcnJvci5j
        YXB0dXJlU3RhY2tUcmFjZSkgewogICAgRXJyb3IuY2FwdHVyZVN0YWNrVHJh
        Y2UodGhpcywgRW1iZXIuRXJyb3IpOwogIH0KICAvLyBVbmZvcnR1bmF0ZWx5
        IGVycm9ycyBhcmUgbm90IGVudW1lcmFibGUgaW4gQ2hyb21lIChhdCBsZWFz
        dCksIHNvIGBmb3IgcHJvcCBpbiB0bXBgIGRvZXNuJ3Qgd29yay4KICBmb3Ig
        KHZhciBpZHggPSAwOyBpZHggPCBlcnJvclByb3BzLmxlbmd0aDsgaWR4Kysp
        IHsKICAgIHRoaXNbZXJyb3JQcm9wc1tpZHhdXSA9IHRtcFtlcnJvclByb3Bz
        W2lkeF1dOwogIH0KfTsKCkVtYmVyLkVycm9yLnByb3RvdHlwZSA9IEVtYmVy
        LmNyZWF0ZShFcnJvci5wcm90b3R5cGUpOwoKLy8gLi4uLi4uLi4uLi4uLi4u
        Li4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLgov
        LyBFUlJPUiBIQU5ETElORwovLwoKLyoqCiAgQSBmdW5jdGlvbiBtYXkgYmUg
        YXNzaWduZWQgdG8gYEVtYmVyLm9uZXJyb3JgIHRvIGJlIGNhbGxlZCB3aGVu
        IEVtYmVyCiAgaW50ZXJuYWxzIGVuY291bnRlciBhbiBlcnJvci4gVGhpcyBp
        cyB1c2VmdWwgZm9yIHNwZWNpYWxpemVkIGVycm9yIGhhbmRsaW5nCiAgYW5k
        IHJlcG9ydGluZyBjb2RlLgoKICBgYGBqYXZhc2NyaXB0CiAgRW1iZXIub25l
        cnJvciA9IGZ1bmN0aW9uKGVycm9yKSB7CiAgICBFbS4kLmFqYXgoJy9yZXBv
        cnQtZXJyb3InLCAnUE9TVCcsIHsKICAgICAgc3RhY2s6IGVycm9yLnN0YWNr
        LAogICAgICBvdGhlckluZm9ybWF0aW9uOiAnd2hhdGV2ZXIgYXBwIHN0YXRl
        IHlvdSB3YW50IHRvIHByb3ZpZGUnCiAgICB9KTsKICB9OwogIGBgYAoKICBA
        ZXZlbnQgb25lcnJvcgogIEBmb3IgRW1iZXIKICBAcGFyYW0ge0V4Y2VwdGlv
        bn0gZXJyb3IgdGhlIGVycm9yIG9iamVjdAoqLwpFbWJlci5vbmVycm9yID0g
        bnVsbDsKCi8qKgogIFdyYXAgY29kZSBibG9jayBpbiBhIHRyeS9jYXRjaCBp
        ZiBgRW1iZXIub25lcnJvcmAgaXMgc2V0LgoKICBAcHJpdmF0ZQogIEBtZXRo
        b2QgaGFuZGxlRXJyb3JzCiAgQGZvciBFbWJlcgogIEBwYXJhbSB7RnVuY3Rp
        b259IGZ1bmMKICBAcGFyYW0gW2NvbnRleHRdCiovCkVtYmVyLmhhbmRsZUVy
        cm9ycyA9IGZ1bmN0aW9uKGZ1bmMsIGNvbnRleHQpIHsKICAvLyBVbmZvcnR1
        bmF0ZWx5IGluIHNvbWUgYnJvd3NlcnMgd2UgbG9zZSB0aGUgYmFja3RyYWNl
        IGlmIHdlIHJldGhyb3cgdGhlIGV4aXN0aW5nIGVycm9yLAogIC8vIHNvIGlu
        IHRoZSBldmVudCB0aGF0IHdlIGRvbid0IGhhdmUgYW4gYG9uZXJyb3JgIGhh
        bmRsZXIgd2UgZG9uJ3Qgd3JhcCBpbiBhIHRyeS9jYXRjaAogIGlmICgnZnVu
        Y3Rpb24nID09PSB0eXBlb2YgRW1iZXIub25lcnJvcikgewogICAgdHJ5IHsK
        ICAgICAgcmV0dXJuIGZ1bmMuY2FsbChjb250ZXh0IHx8IHRoaXMpOwogICAg
        fSBjYXRjaCAoZXJyb3IpIHsKICAgICAgRW1iZXIub25lcnJvcihlcnJvcik7
        CiAgICB9CiAgfSBlbHNlIHsKICAgIHJldHVybiBmdW5jLmNhbGwoY29udGV4
        dCB8fCB0aGlzKTsKICB9Cn07Cgp9KSgpOwoKCgooZnVuY3Rpb24oKSB7Ci8q
        KgpAbW9kdWxlIGVtYmVyLW1ldGFsCiovCgovKioKICBQcmVmaXggdXNlZCBm
        b3IgZ3VpZHMgdGhyb3VnaCBvdXQgRW1iZXIuCiAgQHByaXZhdGUKKi8KRW1i
        ZXIuR1VJRF9QUkVGSVggPSAnZW1iZXInOwoKCnZhciBvX2RlZmluZVByb3Bl
        cnR5ID0gRW1iZXIucGxhdGZvcm0uZGVmaW5lUHJvcGVydHksCiAgICBvX2Ny
        ZWF0ZSA9IEVtYmVyLmNyZWF0ZSwKICAgIC8vIFVzZWQgZm9yIGd1aWQgZ2Vu
        ZXJhdGlvbi4uLgogICAgR1VJRF9LRVkgPSAnX19lbWJlcicrICgrIG5ldyBE
        YXRlKCkpLAogICAgdXVpZCAgICAgICAgID0gMCwKICAgIG51bWJlckNhY2hl
        ICA9IFtdLAogICAgc3RyaW5nQ2FjaGUgID0ge307Cgp2YXIgTUFOREFUT1JZ
        X1NFVFRFUiA9IEVtYmVyLkVOVi5NQU5EQVRPUllfU0VUVEVSOwoKLyoqCiAg
        QSB1bmlxdWUga2V5IHVzZWQgdG8gYXNzaWduIGd1aWRzIGFuZCBvdGhlciBw
        cml2YXRlIG1ldGFkYXRhIHRvIG9iamVjdHMuCiAgSWYgeW91IGluc3BlY3Qg
        YW4gb2JqZWN0IGluIHlvdXIgYnJvd3NlciBkZWJ1Z2dlciB5b3Ugd2lsbCBv
        ZnRlbiBzZWUgdGhlc2UuCiAgVGhleSBjYW4gYmUgc2FmZWx5IGlnbm9yZWQu
        CgogIE9uIGJyb3dzZXJzIHRoYXQgc3VwcG9ydCBpdCwgdGhlc2UgcHJvcGVy
        dGllcyBhcmUgYWRkZWQgd2l0aCBlbnVtZXJhdGlvbgogIGRpc2FibGVkIHNv
        IHRoZXkgd29uJ3Qgc2hvdyB1cCB3aGVuIHlvdSBpdGVyYXRlIG92ZXIgeW91
        ciBwcm9wZXJ0aWVzLgoKICBAcHJpdmF0ZQogIEBwcm9wZXJ0eSBHVUlEX0tF
        WQogIEBmb3IgRW1iZXIKICBAdHlwZSBTdHJpbmcKICBAZmluYWwKKi8KRW1i
        ZXIuR1VJRF9LRVkgPSBHVUlEX0tFWTsKCnZhciBHVUlEX0RFU0MgPSB7CiAg
        d3JpdGFibGU6ICAgIGZhbHNlLAogIGNvbmZpZ3VyYWJsZTogZmFsc2UsCiAg
        ZW51bWVyYWJsZTogIGZhbHNlLAogIHZhbHVlOiBudWxsCn07CgovKioKICBH
        ZW5lcmF0ZXMgYSBuZXcgZ3VpZCwgb3B0aW9uYWxseSBzYXZpbmcgdGhlIGd1
        aWQgdG8gdGhlIG9iamVjdCB0aGF0IHlvdQogIHBhc3MgaW4uIFlvdSB3aWxs
        IHJhcmVseSBuZWVkIHRvIHVzZSB0aGlzIG1ldGhvZC4gSW5zdGVhZCB5b3Ug
        c2hvdWxkCiAgY2FsbCBgRW1iZXIuZ3VpZEZvcihvYmopYCwgd2hpY2ggcmV0
        dXJuIGFuIGV4aXN0aW5nIGd1aWQgaWYgYXZhaWxhYmxlLgoKICBAcHJpdmF0
        ZQogIEBtZXRob2QgZ2VuZXJhdGVHdWlkCiAgQGZvciBFbWJlcgogIEBwYXJh
        bSB7T2JqZWN0fSBbb2JqXSBPYmplY3QgdGhlIGd1aWQgd2lsbCBiZSB1c2Vk
        IGZvci4gSWYgcGFzc2VkIGluLCB0aGUgZ3VpZCB3aWxsCiAgICBiZSBzYXZl
        ZCBvbiB0aGUgb2JqZWN0IGFuZCByZXVzZWQgd2hlbmV2ZXIgeW91IHBhc3Mg
        dGhlIHNhbWUgb2JqZWN0CiAgICBhZ2Fpbi4KCiAgICBJZiBubyBvYmplY3Qg
        aXMgcGFzc2VkLCBqdXN0IGdlbmVyYXRlIGEgbmV3IGd1aWQuCiAgQHBhcmFt
        IHtTdHJpbmd9IFtwcmVmaXhdIFByZWZpeCB0byBwbGFjZSBpbiBmcm9udCBv
        ZiB0aGUgZ3VpZC4gVXNlZnVsIHdoZW4geW91IHdhbnQgdG8KICAgIHNlcGFy
        YXRlIHRoZSBndWlkIGludG8gc2VwYXJhdGUgbmFtZXNwYWNlcy4KICBAcmV0
        dXJuIHtTdHJpbmd9IHRoZSBndWlkCiovCkVtYmVyLmdlbmVyYXRlR3VpZCA9
        IGZ1bmN0aW9uIGdlbmVyYXRlR3VpZChvYmosIHByZWZpeCkgewogIGlmICgh
        cHJlZml4KSBwcmVmaXggPSBFbWJlci5HVUlEX1BSRUZJWDsKICB2YXIgcmV0
        ID0gKHByZWZpeCArICh1dWlkKyspKTsKICBpZiAob2JqKSB7CiAgICBHVUlE
        X0RFU0MudmFsdWUgPSByZXQ7CiAgICBvX2RlZmluZVByb3BlcnR5KG9iaiwg
        R1VJRF9LRVksIEdVSURfREVTQyk7CiAgfQogIHJldHVybiByZXQ7Cn07Cgov
        KioKICBSZXR1cm5zIGEgdW5pcXVlIGlkIGZvciB0aGUgb2JqZWN0LiBJZiB0
        aGUgb2JqZWN0IGRvZXMgbm90IHlldCBoYXZlIGEgZ3VpZCwKICBvbmUgd2ls
        bCBiZSBhc3NpZ25lZCB0byBpdC4gWW91IGNhbiBjYWxsIHRoaXMgb24gYW55
        IG9iamVjdCwKICBgRW1iZXIuT2JqZWN0YC1iYXNlZCBvciBub3QsIGJ1dCBi
        ZSBhd2FyZSB0aGF0IGl0IHdpbGwgYWRkIGEgYF9ndWlkYAogIHByb3BlcnR5
        LgoKICBZb3UgY2FuIGFsc28gdXNlIHRoaXMgbWV0aG9kIG9uIERPTSBFbGVt
        ZW50IG9iamVjdHMuCgogIEBwcml2YXRlCiAgQG1ldGhvZCBndWlkRm9yCiAg
        QGZvciBFbWJlcgogIEBwYXJhbSB7T2JqZWN0fSBvYmogYW55IG9iamVjdCwg
        c3RyaW5nLCBudW1iZXIsIEVsZW1lbnQsIG9yIHByaW1pdGl2ZQogIEByZXR1
        cm4ge1N0cmluZ30gdGhlIHVuaXF1ZSBndWlkIGZvciB0aGlzIGluc3RhbmNl
        LgoqLwpFbWJlci5ndWlkRm9yID0gZnVuY3Rpb24gZ3VpZEZvcihvYmopIHsK
        CiAgLy8gc3BlY2lhbCBjYXNlcyB3aGVyZSB3ZSBkb24ndCB3YW50IHRvIGFk
        ZCBhIGtleSB0byBvYmplY3QKICBpZiAob2JqID09PSB1bmRlZmluZWQpIHJl
        dHVybiAiKHVuZGVmaW5lZCkiOwogIGlmIChvYmogPT09IG51bGwpIHJldHVy
        biAiKG51bGwpIjsKCiAgdmFyIHJldDsKICB2YXIgdHlwZSA9IHR5cGVvZiBv
        Ymo7CgogIC8vIERvbid0IGFsbG93IHByb3RvdHlwZSBjaGFuZ2VzIHRvIFN0
        cmluZyBldGMuIHRvIGNoYW5nZSB0aGUgZ3VpZEZvcgogIHN3aXRjaCh0eXBl
        KSB7CiAgICBjYXNlICdudW1iZXInOgogICAgICByZXQgPSBudW1iZXJDYWNo
        ZVtvYmpdOwogICAgICBpZiAoIXJldCkgcmV0ID0gbnVtYmVyQ2FjaGVbb2Jq
        XSA9ICdudScrb2JqOwogICAgICByZXR1cm4gcmV0OwoKICAgIGNhc2UgJ3N0
        cmluZyc6CiAgICAgIHJldCA9IHN0cmluZ0NhY2hlW29ial07CiAgICAgIGlm
        ICghcmV0KSByZXQgPSBzdHJpbmdDYWNoZVtvYmpdID0gJ3N0JysodXVpZCsr
        KTsKICAgICAgcmV0dXJuIHJldDsKCiAgICBjYXNlICdib29sZWFuJzoKICAg
        ICAgcmV0dXJuIG9iaiA/ICcodHJ1ZSknIDogJyhmYWxzZSknOwoKICAgIGRl
        ZmF1bHQ6CiAgICAgIGlmIChvYmpbR1VJRF9LRVldKSByZXR1cm4gb2JqW0dV
        SURfS0VZXTsKICAgICAgaWYgKG9iaiA9PT0gT2JqZWN0KSByZXR1cm4gJyhP
        YmplY3QpJzsKICAgICAgaWYgKG9iaiA9PT0gQXJyYXkpICByZXR1cm4gJyhB
        cnJheSknOwogICAgICByZXQgPSAnZW1iZXInKyh1dWlkKyspOwogICAgICBH
        VUlEX0RFU0MudmFsdWUgPSByZXQ7CiAgICAgIG9fZGVmaW5lUHJvcGVydHko
        b2JqLCBHVUlEX0tFWSwgR1VJRF9ERVNDKTsKICAgICAgcmV0dXJuIHJldDsK
        ICB9Cn07CgovLyAuLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4u
        Li4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uCi8vIE1FVEEKLy8KCnZhciBNRVRB
        X0RFU0MgPSBFbWJlci5NRVRBX0RFU0MgPSB7CiAgd3JpdGFibGU6ICAgIHRy
        dWUsCiAgY29uZmlndXJhYmxlOiBmYWxzZSwKICBlbnVtZXJhYmxlOiAgZmFs
        c2UsCiAgdmFsdWU6IG51bGwKfTsKCnZhciBNRVRBX0tFWSA9IEVtYmVyLkdV
        SURfS0VZKydfbWV0YSc7CgovKioKICBUaGUga2V5IHVzZWQgdG8gc3RvcmUg
        bWV0YSBpbmZvcm1hdGlvbiBvbiBvYmplY3QgZm9yIHByb3BlcnR5IG9ic2Vy
        dmluZy4KCiAgQHByb3BlcnR5IE1FVEFfS0VZCiAgQGZvciBFbWJlcgogIEBw
        cml2YXRlCiAgQGZpbmFsCiAgQHR5cGUgU3RyaW5nCiovCkVtYmVyLk1FVEFf
        S0VZID0gTUVUQV9LRVk7Cgp2YXIgaXNEZWZpbmVQcm9wZXJ0eVNpbXVsYXRl
        ZCA9IEVtYmVyLnBsYXRmb3JtLmRlZmluZVByb3BlcnR5LmlzU2ltdWxhdGVk
        OwoKZnVuY3Rpb24gTWV0YShvYmopIHsKICB0aGlzLmRlc2NzID0ge307CiAg
        dGhpcy53YXRjaGluZyA9IHt9OwogIHRoaXMuY2FjaGUgPSB7fTsKICB0aGlz
        LnNvdXJjZSA9IG9iajsKfQoKTWV0YS5wcm90b3R5cGUgPSB7CiAgZGVzY3M6
        IG51bGwsCiAgZGVwczogbnVsbCwKICB3YXRjaGluZzogbnVsbCwKICBsaXN0
        ZW5lcnM6IG51bGwsCiAgY2FjaGU6IG51bGwsCiAgc291cmNlOiBudWxsLAog
        IG1peGluczogbnVsbCwKICBiaW5kaW5nczogbnVsbCwKICBjaGFpbnM6IG51
        bGwsCiAgY2hhaW5XYXRjaGVyczogbnVsbCwKICB2YWx1ZXM6IG51bGwsCiAg
        cHJvdG86IG51bGwKfTsKCmlmIChpc0RlZmluZVByb3BlcnR5U2ltdWxhdGVk
        KSB7CiAgLy8gb24gcGxhdGZvcm1zIHRoYXQgZG9uJ3Qgc3VwcG9ydCBlbnVt
        ZXJhYmxlIGZhbHNlCiAgLy8gbWFrZSBtZXRhIGZhaWwgalF1ZXJ5LmlzUGxh
        aW5PYmplY3QoKSB0byBoaWRlIGZyb20KICAvLyBqUXVlcnkuZXh0ZW5kKCkg
        YnkgaGF2aW5nIGEgcHJvcGVydHkgdGhhdCBmYWlscwogIC8vIGhhc093blBy
        b3BlcnR5IGNoZWNrLgogIE1ldGEucHJvdG90eXBlLl9fcHJldmVudFBsYWlu
        T2JqZWN0X18gPSB0cnVlOwoKICAvLyBXaXRob3V0IG5vbi1lbnVtZXJhYmxl
        IHByb3BlcnRpZXMsIG1ldGEgb2JqZWN0cyB3aWxsIGJlIG91dHB1dCBpbiBK
        U09OCiAgLy8gdW5sZXNzIGV4cGxpY2l0bHkgc3VwcHJlc3NlZAogIE1ldGEu
        cHJvdG90eXBlLnRvSlNPTiA9IGZ1bmN0aW9uICgpIHsgfTsKfQoKLy8gUGxh
        Y2Vob2xkZXIgZm9yIG5vbi13cml0YWJsZSBtZXRhcy4KdmFyIEVNUFRZX01F
        VEEgPSBuZXcgTWV0YShudWxsKTsKCmlmIChNQU5EQVRPUllfU0VUVEVSKSB7
        IEVNUFRZX01FVEEudmFsdWVzID0ge307IH0KCkVtYmVyLkVNUFRZX01FVEEg
        PSBFTVBUWV9NRVRBOwoKLyoqCiAgUmV0cmlldmVzIHRoZSBtZXRhIGhhc2gg
        Zm9yIGFuIG9iamVjdC4gSWYgYHdyaXRhYmxlYCBpcyB0cnVlIGVuc3VyZXMg
        dGhlCiAgaGFzaCBpcyB3cml0YWJsZSBmb3IgdGhpcyBvYmplY3QgYXMgd2Vs
        bC4KCiAgVGhlIG1ldGEgb2JqZWN0IGNvbnRhaW5zIGluZm9ybWF0aW9uIGFi
        b3V0IGNvbXB1dGVkIHByb3BlcnR5IGRlc2NyaXB0b3JzIGFzCiAgd2VsbCBh
        cyBhbnkgd2F0Y2hlZCBwcm9wZXJ0aWVzIGFuZCBvdGhlciBpbmZvcm1hdGlv
        bi4gWW91IGdlbmVyYWxseSB3aWxsCiAgbm90IGFjY2VzcyB0aGlzIGluZm9y
        bWF0aW9uIGRpcmVjdGx5IGJ1dCBpbnN0ZWFkIHdvcmsgd2l0aCBoaWdoZXIg
        bGV2ZWwKICBtZXRob2RzIHRoYXQgbWFuaXB1bGF0ZSB0aGlzIGhhc2ggaW5k
        aXJlY3RseS4KCiAgQG1ldGhvZCBtZXRhCiAgQGZvciBFbWJlcgogIEBwcml2
        YXRlCgogIEBwYXJhbSB7T2JqZWN0fSBvYmogVGhlIG9iamVjdCB0byByZXRy
        aWV2ZSBtZXRhIGZvcgogIEBwYXJhbSB7Qm9vbGVhbn0gW3dyaXRhYmxlPXRy
        dWVdIFBhc3MgYGZhbHNlYCBpZiB5b3UgZG8gbm90IGludGVuZCB0byBtb2Rp
        ZnkKICAgIHRoZSBtZXRhIGhhc2gsIGFsbG93aW5nIHRoZSBtZXRob2QgdG8g
        YXZvaWQgbWFraW5nIGFuIHVubmVjZXNzYXJ5IGNvcHkuCiAgQHJldHVybiB7
        T2JqZWN0fSB0aGUgbWV0YSBoYXNoIGZvciBhbiBvYmplY3QKKi8KRW1iZXIu
        bWV0YSA9IGZ1bmN0aW9uIG1ldGEob2JqLCB3cml0YWJsZSkgewoKICB2YXIg
        cmV0ID0gb2JqW01FVEFfS0VZXTsKICBpZiAod3JpdGFibGU9PT1mYWxzZSkg
        cmV0dXJuIHJldCB8fCBFTVBUWV9NRVRBOwoKICBpZiAoIXJldCkgewogICAg
        aWYgKCFpc0RlZmluZVByb3BlcnR5U2ltdWxhdGVkKSBvX2RlZmluZVByb3Bl
        cnR5KG9iaiwgTUVUQV9LRVksIE1FVEFfREVTQyk7CgogICAgcmV0ID0gbmV3
        IE1ldGEob2JqKTsKCiAgICBpZiAoTUFOREFUT1JZX1NFVFRFUikgeyByZXQu
        dmFsdWVzID0ge307IH0KCiAgICBvYmpbTUVUQV9LRVldID0gcmV0OwoKICAg
        IC8vIG1ha2Ugc3VyZSB3ZSBkb24ndCBhY2NpZGVudGFsbHkgdHJ5IHRvIGNy
        ZWF0ZSBjb25zdHJ1Y3RvciBsaWtlIGRlc2MKICAgIHJldC5kZXNjcy5jb25z
        dHJ1Y3RvciA9IG51bGw7CgogIH0gZWxzZSBpZiAocmV0LnNvdXJjZSAhPT0g
        b2JqKSB7CiAgICBpZiAoIWlzRGVmaW5lUHJvcGVydHlTaW11bGF0ZWQpIG9f
        ZGVmaW5lUHJvcGVydHkob2JqLCBNRVRBX0tFWSwgTUVUQV9ERVNDKTsKCiAg
        ICByZXQgPSBvX2NyZWF0ZShyZXQpOwogICAgcmV0LmRlc2NzICAgID0gb19j
        cmVhdGUocmV0LmRlc2NzKTsKICAgIHJldC53YXRjaGluZyA9IG9fY3JlYXRl
        KHJldC53YXRjaGluZyk7CiAgICByZXQuY2FjaGUgICAgPSB7fTsKICAgIHJl
        dC5zb3VyY2UgICA9IG9iajsKCiAgICBpZiAoTUFOREFUT1JZX1NFVFRFUikg
        eyByZXQudmFsdWVzID0gb19jcmVhdGUocmV0LnZhbHVlcyk7IH0KCiAgICBv
        YmpbTUVUQV9LRVldID0gcmV0OwogIH0KICByZXR1cm4gcmV0Owp9OwoKRW1i
        ZXIuZ2V0TWV0YSA9IGZ1bmN0aW9uIGdldE1ldGEob2JqLCBwcm9wZXJ0eSkg
        ewogIHZhciBtZXRhID0gRW1iZXIubWV0YShvYmosIGZhbHNlKTsKICByZXR1
        cm4gbWV0YVtwcm9wZXJ0eV07Cn07CgpFbWJlci5zZXRNZXRhID0gZnVuY3Rp
        b24gc2V0TWV0YShvYmosIHByb3BlcnR5LCB2YWx1ZSkgewogIHZhciBtZXRh
        ID0gRW1iZXIubWV0YShvYmosIHRydWUpOwogIG1ldGFbcHJvcGVydHldID0g
        dmFsdWU7CiAgcmV0dXJuIHZhbHVlOwp9OwoKLyoqCiAgQGRlcHJlY2F0ZWQK
        ICBAcHJpdmF0ZQoKICBJbiBvcmRlciB0byBzdG9yZSBkZWZhdWx0cyBmb3Ig
        YSBjbGFzcywgYSBwcm90b3R5cGUgbWF5IG5lZWQgdG8gY3JlYXRlCiAgYSBk
        ZWZhdWx0IG1ldGEgb2JqZWN0LCB3aGljaCB3aWxsIGJlIGluaGVyaXRlZCBi
        eSBhbnkgb2JqZWN0cyBpbnN0YW50aWF0ZWQKICBmcm9tIHRoZSBjbGFzcydz
        IGNvbnN0cnVjdG9yLgoKICBIb3dldmVyLCB0aGUgcHJvcGVydGllcyBvZiB0
        aGF0IG1ldGEgb2JqZWN0IGFyZSBvbmx5IHNoYWxsb3ctY2xvbmVkLAogIHNv
        IGlmIGEgcHJvcGVydHkgaXMgYSBoYXNoIChsaWtlIHRoZSBldmVudCBzeXN0
        ZW0ncyBgbGlzdGVuZXJzYCBoYXNoKSwKICBpdCB3aWxsIGJ5IGRlZmF1bHQg
        YmUgc2hhcmVkIGFjcm9zcyBhbGwgaW5zdGFuY2VzIG9mIHRoYXQgY2xhc3Mu
        CgogIFRoaXMgbWV0aG9kIGFsbG93cyBleHRlbnNpb25zIHRvIGRlZXBseSBj
        bG9uZSBhIHNlcmllcyBvZiBuZXN0ZWQgaGFzaGVzIG9yCiAgb3RoZXIgY29t
        cGxleCBvYmplY3RzLiBGb3IgaW5zdGFuY2UsIHRoZSBldmVudCBzeXN0ZW0g
        bWlnaHQgcGFzcwogIGBbJ2xpc3RlbmVycycsICdmb286Y2hhbmdlJywgJ2Vt
        YmVyMTU3J11gIHRvIGBwcmVwYXJlTWV0YVBhdGhgLCB3aGljaCB3aWxsCiAg
        d2FsayBkb3duIHRoZSBrZXlzIHByb3ZpZGVkLgoKICBGb3IgZWFjaCBrZXks
        IGlmIHRoZSBrZXkgZG9lcyBub3QgZXhpc3QsIGl0IGlzIGNyZWF0ZWQuIElm
        IGl0IGFscmVhZHkKICBleGlzdHMgYW5kIGl0IHdhcyBpbmhlcml0ZWQgZnJv
        bSBpdHMgY29uc3RydWN0b3IsIHRoZSBjb25zdHJ1Y3RvcidzCiAga2V5IGlz
        IGNsb25lZC4KCiAgWW91IGNhbiBhbHNvIHBhc3MgZmFsc2UgZm9yIGB3cml0
        YWJsZWAsIHdoaWNoIHdpbGwgc2ltcGx5IHJldHVybgogIHVuZGVmaW5lZCBp
        ZiBgcHJlcGFyZU1ldGFQYXRoYCBkaXNjb3ZlcnMgYW55IHBhcnQgb2YgdGhl
        IHBhdGggdGhhdAogIHNoYXJlZCBvciB1bmRlZmluZWQuCgogIEBtZXRob2Qg
        bWV0YVBhdGgKICBAZm9yIEVtYmVyCiAgQHBhcmFtIHtPYmplY3R9IG9iaiBU
        aGUgb2JqZWN0IHdob3NlIG1ldGEgd2UgYXJlIGV4YW1pbmluZwogIEBwYXJh
        bSB7QXJyYXl9IHBhdGggQW4gYXJyYXkgb2Yga2V5cyB0byB3YWxrIGRvd24K
        ICBAcGFyYW0ge0Jvb2xlYW59IHdyaXRhYmxlIHdoZXRoZXIgb3Igbm90IHRv
        IGNyZWF0ZSBhIG5ldyBtZXRhCiAgICAob3IgbWV0YSBwcm9wZXJ0eSkgaWYg
        b25lIGRvZXMgbm90IGFscmVhZHkgZXhpc3Qgb3IgaWYgaXQncwogICAgc2hh
        cmVkIHdpdGggaXRzIGNvbnN0cnVjdG9yCiovCkVtYmVyLm1ldGFQYXRoID0g
        ZnVuY3Rpb24gbWV0YVBhdGgob2JqLCBwYXRoLCB3cml0YWJsZSkgewogIEVt
        YmVyLmRlcHJlY2F0ZSgiRW1iZXIubWV0YVBhdGggaXMgZGVwcmVjYXRlZCBh
        bmQgd2lsbCBiZSByZW1vdmVkIGZyb20gZnV0dXJlIHJlbGVhc2VzLiIpOwog
        IHZhciBtZXRhID0gRW1iZXIubWV0YShvYmosIHdyaXRhYmxlKSwga2V5TmFt
        ZSwgdmFsdWU7CgogIGZvciAodmFyIGk9MCwgbD1wYXRoLmxlbmd0aDsgaTxs
        OyBpKyspIHsKICAgIGtleU5hbWUgPSBwYXRoW2ldOwogICAgdmFsdWUgPSBt
        ZXRhW2tleU5hbWVdOwoKICAgIGlmICghdmFsdWUpIHsKICAgICAgaWYgKCF3
        cml0YWJsZSkgeyByZXR1cm4gdW5kZWZpbmVkOyB9CiAgICAgIHZhbHVlID0g
        bWV0YVtrZXlOYW1lXSA9IHsgX19lbWJlcl9zb3VyY2VfXzogb2JqIH07CiAg
        ICB9IGVsc2UgaWYgKHZhbHVlLl9fZW1iZXJfc291cmNlX18gIT09IG9iaikg
        ewogICAgICBpZiAoIXdyaXRhYmxlKSB7IHJldHVybiB1bmRlZmluZWQ7IH0K
        ICAgICAgdmFsdWUgPSBtZXRhW2tleU5hbWVdID0gb19jcmVhdGUodmFsdWUp
        OwogICAgICB2YWx1ZS5fX2VtYmVyX3NvdXJjZV9fID0gb2JqOwogICAgfQoK
        ICAgIG1ldGEgPSB2YWx1ZTsKICB9CgogIHJldHVybiB2YWx1ZTsKfTsKCi8q
        KgogIFdyYXBzIHRoZSBwYXNzZWQgZnVuY3Rpb24gc28gdGhhdCBgdGhpcy5f
        c3VwZXJgIHdpbGwgcG9pbnQgdG8gdGhlIHN1cGVyRnVuYwogIHdoZW4gdGhl
        IGZ1bmN0aW9uIGlzIGludm9rZWQuIFRoaXMgaXMgdGhlIHByaW1pdGl2ZSB3
        ZSB1c2UgdG8gaW1wbGVtZW50CiAgY2FsbHMgdG8gc3VwZXIuCgogIEBwcml2
        YXRlCiAgQG1ldGhvZCB3cmFwCiAgQGZvciBFbWJlcgogIEBwYXJhbSB7RnVu
        Y3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGNhbGwKICBAcGFyYW0ge0Z1
        bmN0aW9ufSBzdXBlckZ1bmMgVGhlIHN1cGVyIGZ1bmN0aW9uLgogIEByZXR1
        cm4ge0Z1bmN0aW9ufSB3cmFwcGVkIGZ1bmN0aW9uLgoqLwpFbWJlci53cmFw
        ID0gZnVuY3Rpb24oZnVuYywgc3VwZXJGdW5jKSB7CiAgZnVuY3Rpb24gSygp
        IHt9CgogIGZ1bmN0aW9uIHN1cGVyV3JhcHBlcigpIHsKICAgIHZhciByZXQs
        IHN1cCA9IHRoaXMuX3N1cGVyOwogICAgdGhpcy5fc3VwZXIgPSBzdXBlckZ1
        bmMgfHwgSzsKICAgIHJldCA9IGZ1bmMuYXBwbHkodGhpcywgYXJndW1lbnRz
        KTsKICAgIHRoaXMuX3N1cGVyID0gc3VwOwogICAgcmV0dXJuIHJldDsKICB9
        CgogIHN1cGVyV3JhcHBlci53cmFwcGVkRnVuY3Rpb24gPSBmdW5jOwogIHN1
        cGVyV3JhcHBlci5fX2VtYmVyX29ic2VydmVzX18gPSBmdW5jLl9fZW1iZXJf
        b2JzZXJ2ZXNfXzsKICBzdXBlcldyYXBwZXIuX19lbWJlcl9vYnNlcnZlc0Jl
        Zm9yZV9fID0gZnVuYy5fX2VtYmVyX29ic2VydmVzQmVmb3JlX187CiAgc3Vw
        ZXJXcmFwcGVyLl9fZW1iZXJfbGlzdGVuc19fID0gZnVuYy5fX2VtYmVyX2xp
        c3RlbnNfXzsKCiAgcmV0dXJuIHN1cGVyV3JhcHBlcjsKfTsKCi8qKgogIFJl
        dHVybnMgdHJ1ZSBpZiB0aGUgcGFzc2VkIG9iamVjdCBpcyBhbiBhcnJheSBv
        ciBBcnJheS1saWtlLgoKICBFbWJlciBBcnJheSBQcm90b2NvbDoKCiAgICAt
        IHRoZSBvYmplY3QgaGFzIGFuIG9iamVjdEF0IHByb3BlcnR5CiAgICAtIHRo
        ZSBvYmplY3QgaXMgYSBuYXRpdmUgQXJyYXkKICAgIC0gdGhlIG9iamVjdCBp
        cyBhbiBPYmplY3QsIGFuZCBoYXMgYSBsZW5ndGggcHJvcGVydHkKCiAgVW5s
        aWtlIGBFbWJlci50eXBlT2ZgIHRoaXMgbWV0aG9kIHJldHVybnMgdHJ1ZSBl
        dmVuIGlmIHRoZSBwYXNzZWQgb2JqZWN0IGlzCiAgbm90IGZvcm1hbGx5IGFy
        cmF5IGJ1dCBhcHBlYXJzIHRvIGJlIGFycmF5LWxpa2UgKGkuZS4gaW1wbGVt
        ZW50cyBgRW1iZXIuQXJyYXlgKQoKICBgYGBqYXZhc2NyaXB0CiAgRW1iZXIu
        aXNBcnJheSgpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
        ICAgICAgICAgLy8gZmFsc2UKICBFbWJlci5pc0FycmF5KFtdKTsgICAgICAg
        ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0cnVlCiAg
        RW1iZXIuaXNBcnJheSggRW1iZXIuQXJyYXlQcm94eS5jcmVhdGUoeyBjb250
        ZW50OiBbXSB9KSApOyAgLy8gdHJ1ZQogIGBgYAoKICBAbWV0aG9kIGlzQXJy
        YXkKICBAZm9yIEVtYmVyCiAgQHBhcmFtIHtPYmplY3R9IG9iaiBUaGUgb2Jq
        ZWN0IHRvIHRlc3QKICBAcmV0dXJuIHtCb29sZWFufSB0cnVlIGlmIHRoZSBw
        YXNzZWQgb2JqZWN0IGlzIGFuIGFycmF5IG9yIEFycmF5LWxpa2UKKi8KRW1i
        ZXIuaXNBcnJheSA9IGZ1bmN0aW9uKG9iaikgewogIGlmICghb2JqIHx8IG9i
        ai5zZXRJbnRlcnZhbCkgeyByZXR1cm4gZmFsc2U7IH0KICBpZiAoQXJyYXku
        aXNBcnJheSAmJiBBcnJheS5pc0FycmF5KG9iaikpIHsgcmV0dXJuIHRydWU7
        IH0KICBpZiAoRW1iZXIuQXJyYXkgJiYgRW1iZXIuQXJyYXkuZGV0ZWN0KG9i
        aikpIHsgcmV0dXJuIHRydWU7IH0KICBpZiAoKG9iai5sZW5ndGggIT09IHVu
        ZGVmaW5lZCkgJiYgJ29iamVjdCc9PT10eXBlb2Ygb2JqKSB7IHJldHVybiB0
        cnVlOyB9CiAgcmV0dXJuIGZhbHNlOwp9OwoKLyoqCiAgRm9yY2VzIHRoZSBw
        YXNzZWQgb2JqZWN0IHRvIGJlIHBhcnQgb2YgYW4gYXJyYXkuIElmIHRoZSBv
        YmplY3QgaXMgYWxyZWFkeQogIGFuIGFycmF5IG9yIGFycmF5LWxpa2UsIHJl
        dHVybnMgdGhlIG9iamVjdC4gT3RoZXJ3aXNlIGFkZHMgdGhlIG9iamVjdCB0
        bwogIGFuIGFycmF5LiBJZiBvYmogaXMgYG51bGxgIG9yIGB1bmRlZmluZWRg
        LCByZXR1cm5zIGFuIGVtcHR5IGFycmF5LgoKICBgYGBqYXZhc2NyaXB0CiAg
        RW1iZXIubWFrZUFycmF5KCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAg
        Ly8gW10KICBFbWJlci5tYWtlQXJyYXkobnVsbCk7ICAgICAgICAgICAgICAg
        ICAgICAgICAvLyBbXQogIEVtYmVyLm1ha2VBcnJheSh1bmRlZmluZWQpOyAg
        ICAgICAgICAgICAgICAgIC8vIFtdCiAgRW1iZXIubWFrZUFycmF5KCdsaW5k
        c2F5Jyk7ICAgICAgICAgICAgICAgICAgLy8gWydsaW5kc2F5J10KICBFbWJl
        ci5tYWtlQXJyYXkoWzEsMiw0Ml0pOyAgICAgICAgICAgICAgICAgICAvLyBb
        MSwyLDQyXQoKICB2YXIgY29udHJvbGxlciA9IEVtYmVyLkFycmF5UHJveHku
        Y3JlYXRlKHsgY29udGVudDogW10gfSk7CiAgRW1iZXIubWFrZUFycmF5KGNv
        bnRyb2xsZXIpID09PSBjb250cm9sbGVyOyAgLy8gdHJ1ZQogIGBgYAoKICBA
        bWV0aG9kIG1ha2VBcnJheQogIEBmb3IgRW1iZXIKICBAcGFyYW0ge09iamVj
        dH0gb2JqIHRoZSBvYmplY3QKICBAcmV0dXJuIHtBcnJheX0KKi8KRW1iZXIu
        bWFrZUFycmF5ID0gZnVuY3Rpb24ob2JqKSB7CiAgaWYgKG9iaiA9PT0gbnVs
        bCB8fCBvYmogPT09IHVuZGVmaW5lZCkgeyByZXR1cm4gW107IH0KICByZXR1
        cm4gRW1iZXIuaXNBcnJheShvYmopID8gb2JqIDogW29ial07Cn07CgpmdW5j
        dGlvbiBjYW5JbnZva2Uob2JqLCBtZXRob2ROYW1lKSB7CiAgcmV0dXJuICEh
        KG9iaiAmJiB0eXBlb2Ygb2JqW21ldGhvZE5hbWVdID09PSAnZnVuY3Rpb24n
        KTsKfQoKLyoqCiAgQ2hlY2tzIHRvIHNlZSBpZiB0aGUgYG1ldGhvZE5hbWVg
        IGV4aXN0cyBvbiB0aGUgYG9iamAuCgogIGBgYGphdmFzY3JpcHQKICB2YXIg
        Zm9vID0ge2JhcjogRW1iZXIuSywgYmF6OiBudWxsfTsKICBFbWJlci5jYW5J
        bnZva2UoZm9vLCAnYmFyJyk7IC8vIHRydWUKICBFbWJlci5jYW5JbnZva2Uo
        Zm9vLCAnYmF6Jyk7IC8vIGZhbHNlCiAgRW1iZXIuY2FuSW52b2tlKGZvbywg
        J2JhdCcpOyAvLyBmYWxzZQogIGBgYAoKICBAbWV0aG9kIGNhbkludm9rZQog
        IEBmb3IgRW1iZXIKICBAcGFyYW0ge09iamVjdH0gb2JqIFRoZSBvYmplY3Qg
        dG8gY2hlY2sgZm9yIHRoZSBtZXRob2QKICBAcGFyYW0ge1N0cmluZ30gbWV0
        aG9kTmFtZSBUaGUgbWV0aG9kIG5hbWUgdG8gY2hlY2sgZm9yCiAgQHJldHVy
        biB7Qm9vbGVhbn0KKi8KRW1iZXIuY2FuSW52b2tlID0gY2FuSW52b2tlOwoK
        LyoqCiAgQ2hlY2tzIHRvIHNlZSBpZiB0aGUgYG1ldGhvZE5hbWVgIGV4aXN0
        cyBvbiB0aGUgYG9iamAsCiAgYW5kIGlmIGl0IGRvZXMsIGludm9rZXMgaXQg
        d2l0aCB0aGUgYXJndW1lbnRzIHBhc3NlZC4KCiAgYGBgamF2YXNjcmlwdAog
        IHZhciBkID0gbmV3IERhdGUoJzAzLzE1LzIwMTMnKTsKICBFbWJlci50cnlJ
        bnZva2UoZCwgJ2dldFRpbWUnKTsgLy8gMTM2MzMyMDAwMDAwMAogIEVtYmVy
        LnRyeUludm9rZShkLCAnc2V0RnVsbFllYXInLCBbMjAxNF0pOyAvLyAxMzk0
        ODU2MDAwMDAwCiAgRW1iZXIudHJ5SW52b2tlKGQsICdub1N1Y2hNZXRob2Qn
        LCBbMjAxNF0pOyAvLyB1bmRlZmluZWQKICBgYGAKCiAgQG1ldGhvZCB0cnlJ
        bnZva2UKICBAZm9yIEVtYmVyCiAgQHBhcmFtIHtPYmplY3R9IG9iaiBUaGUg
        b2JqZWN0IHRvIGNoZWNrIGZvciB0aGUgbWV0aG9kCiAgQHBhcmFtIHtTdHJp
        bmd9IG1ldGhvZE5hbWUgVGhlIG1ldGhvZCBuYW1lIHRvIGNoZWNrIGZvcgog
        IEBwYXJhbSB7QXJyYXl9IFthcmdzXSBUaGUgYXJndW1lbnRzIHRvIHBhc3Mg
        dG8gdGhlIG1ldGhvZAogIEByZXR1cm4geyp9IHRoZSByZXR1cm4gdmFsdWUg
        b2YgdGhlIGludm9rZWQgbWV0aG9kIG9yIHVuZGVmaW5lZCBpZiBpdCBjYW5u
        b3QgYmUgaW52b2tlZAoqLwpFbWJlci50cnlJbnZva2UgPSBmdW5jdGlvbihv
        YmosIG1ldGhvZE5hbWUsIGFyZ3MpIHsKICBpZiAoY2FuSW52b2tlKG9iaiwg
        bWV0aG9kTmFtZSkpIHsKICAgIHJldHVybiBvYmpbbWV0aG9kTmFtZV0uYXBw
        bHkob2JqLCBhcmdzIHx8IFtdKTsKICB9Cn07CgovLyBodHRwczovL2dpdGh1
        Yi5jb20vZW1iZXJqcy9lbWJlci5qcy9wdWxsLzE2MTcKdmFyIG5lZWRzRmlu
        YWxseUZpeCA9IChmdW5jdGlvbigpIHsKICB2YXIgY291bnQgPSAwOwogIHRy
        eXsKICAgIHRyeSB7IH0KICAgIGZpbmFsbHkgewogICAgICBjb3VudCsrOwog
        ICAgICB0aHJvdyBuZXcgRXJyb3IoJ25lZWRzRmluYWxseUZpeFRlc3QnKTsK
        ICAgIH0KICB9IGNhdGNoIChlKSB7fQoKICByZXR1cm4gY291bnQgIT09IDE7
        Cn0pKCk7CgovKioKICBQcm92aWRlcyB0cnkgeyB9IGZpbmFsbHkgeyB9IGZ1
        bmN0aW9uYWxpdHksIHdoaWxlIHdvcmtpbmcKICBhcm91bmQgU2FmYXJpJ3Mg
        ZG91YmxlIGZpbmFsbHkgYnVnLgoKICBgYGBqYXZhc2NyaXB0CiAgdmFyIHRy
        eWFibGUgPSBmdW5jdGlvbigpIHsKICAgIHNvbWVSZXNvdXJjZS5sb2NrKCk7
        CiAgICBydW5DYWxsYmFjaygpOyAvLyBNYXkgdGhyb3cgZXJyb3IuCiAgfTsK
        ICB2YXIgZmluYWxpemVyID0gZnVuY3Rpb24oKSB7CiAgICBzb21lUmVzb3Vy
        Y2UudW5sb2NrKCk7CiAgfTsKICBFbWJlci50cnlGaW5hbGx5KHRyeWFibGUs
        IGZpbmFsaXplcik7CiAgYGBgCgogIEBtZXRob2QgdHJ5RmluYWxseQogIEBm
        b3IgRW1iZXIKICBAcGFyYW0ge0Z1bmN0aW9ufSB0cnlhYmxlIFRoZSBmdW5j
        dGlvbiB0byBydW4gdGhlIHRyeSBjYWxsYmFjawogIEBwYXJhbSB7RnVuY3Rp
        b259IGZpbmFsaXplciBUaGUgZnVuY3Rpb24gdG8gcnVuIHRoZSBmaW5hbGx5
        IGNhbGxiYWNrCiAgQHBhcmFtIHtPYmplY3R9IFtiaW5kaW5nXSBUaGUgb3B0
        aW9uYWwgY2FsbGluZyBvYmplY3QuIERlZmF1bHRzIHRvICd0aGlzJwogIEBy
        ZXR1cm4geyp9IFRoZSByZXR1cm4gdmFsdWUgaXMgdGhlIHRoYXQgb2YgdGhl
        IGZpbmFsaXplciwKICB1bmxlc3MgdGhhdCB2YWx1ZSBpcyB1bmRlZmluZWQs
        IGluIHdoaWNoIGNhc2UgaXQgaXMgdGhlIHJldHVybiB2YWx1ZQogIG9mIHRo
        ZSB0cnlhYmxlCiovCgppZiAobmVlZHNGaW5hbGx5Rml4KSB7CiAgRW1iZXIu
        dHJ5RmluYWxseSA9IGZ1bmN0aW9uKHRyeWFibGUsIGZpbmFsaXplciwgYmlu
        ZGluZykgewogICAgdmFyIHJlc3VsdCwgZmluYWxSZXN1bHQsIGZpbmFsRXJy
        b3I7CgogICAgYmluZGluZyA9IGJpbmRpbmcgfHwgdGhpczsKCiAgICB0cnkg
        ewogICAgICByZXN1bHQgPSB0cnlhYmxlLmNhbGwoYmluZGluZyk7CiAgICB9
        IGZpbmFsbHkgewogICAgICB0cnkgewogICAgICAgIGZpbmFsUmVzdWx0ID0g
        ZmluYWxpemVyLmNhbGwoYmluZGluZyk7CiAgICAgIH0gY2F0Y2ggKGUpIHsK
        ICAgICAgICBmaW5hbEVycm9yID0gZTsKICAgICAgfQogICAgfQoKICAgIGlm
        IChmaW5hbEVycm9yKSB7IHRocm93IGZpbmFsRXJyb3I7IH0KCiAgICByZXR1
        cm4gKGZpbmFsUmVzdWx0ID09PSB1bmRlZmluZWQpID8gcmVzdWx0IDogZmlu
        YWxSZXN1bHQ7CiAgfTsKfSBlbHNlIHsKICBFbWJlci50cnlGaW5hbGx5ID0g
        ZnVuY3Rpb24odHJ5YWJsZSwgZmluYWxpemVyLCBiaW5kaW5nKSB7CiAgICB2
        YXIgcmVzdWx0LCBmaW5hbFJlc3VsdDsKCiAgICBiaW5kaW5nID0gYmluZGlu
        ZyB8fCB0aGlzOwoKICAgIHRyeSB7CiAgICAgIHJlc3VsdCA9IHRyeWFibGUu
        Y2FsbChiaW5kaW5nKTsKICAgIH0gZmluYWxseSB7CiAgICAgIGZpbmFsUmVz
        dWx0ID0gZmluYWxpemVyLmNhbGwoYmluZGluZyk7CiAgICB9CgogICAgcmV0
        dXJuIChmaW5hbFJlc3VsdCA9PT0gdW5kZWZpbmVkKSA/IHJlc3VsdCA6IGZp
        bmFsUmVzdWx0OwogIH07Cn0KCi8qKgogIFByb3ZpZGVzIHRyeSB7IH0gY2F0
        Y2ggZmluYWxseSB7IH0gZnVuY3Rpb25hbGl0eSwgd2hpbGUgd29ya2luZwog
        IGFyb3VuZCBTYWZhcmkncyBkb3VibGUgZmluYWxseSBidWcuCgogIGBgYGph
        dmFzY3JpcHQKICB2YXIgdHJ5YWJsZSA9IGZ1bmN0aW9uKCkgewogICAgZm9y
        IChpPTAsIGw9bGlzdGVuZXJzLmxlbmd0aDsgaTxsOyBpKyspIHsKICAgICAg
        bGlzdGVuZXIgPSBsaXN0ZW5lcnNbaV07CiAgICAgIGJlZm9yZVZhbHVlc1tp
        XSA9IGxpc3RlbmVyLmJlZm9yZShuYW1lLCB0aW1lKCksIHBheWxvYWQpOwog
        ICAgfQoKICAgIHJldHVybiBjYWxsYmFjay5jYWxsKGJpbmRpbmcpOwogIH07
        CgogIHZhciBjYXRjaGFibGUgPSBmdW5jdGlvbihlKSB7CiAgICBwYXlsb2Fk
        ID0gcGF5bG9hZCB8fCB7fTsKICAgIHBheWxvYWQuZXhjZXB0aW9uID0gZTsK
        ICB9OwoKICB2YXIgZmluYWxpemVyID0gZnVuY3Rpb24oKSB7CiAgICBmb3Ig
        KGk9MCwgbD1saXN0ZW5lcnMubGVuZ3RoOyBpPGw7IGkrKykgewogICAgICBs
        aXN0ZW5lciA9IGxpc3RlbmVyc1tpXTsKICAgICAgbGlzdGVuZXIuYWZ0ZXIo
        bmFtZSwgdGltZSgpLCBwYXlsb2FkLCBiZWZvcmVWYWx1ZXNbaV0pOwogICAg
        fQogIH07CiAgRW1iZXIudHJ5Q2F0Y2hGaW5hbGx5KHRyeWFibGUsIGNhdGNo
        YWJsZSwgZmluYWxpemVyKTsKICBgYGAKCiAgQG1ldGhvZCB0cnlDYXRjaEZp
        bmFsbHkKICBAZm9yIEVtYmVyCiAgQHBhcmFtIHtGdW5jdGlvbn0gdHJ5YWJs
        ZSBUaGUgZnVuY3Rpb24gdG8gcnVuIHRoZSB0cnkgY2FsbGJhY2sKICBAcGFy
        YW0ge0Z1bmN0aW9ufSBjYXRjaGFibGUgVGhlIGZ1bmN0aW9uIHRvIHJ1biB0
        aGUgY2F0Y2hhYmxlIGNhbGxiYWNrCiAgQHBhcmFtIHtGdW5jdGlvbn0gZmlu
        YWxpemVyIFRoZSBmdW5jdGlvbiB0byBydW4gdGhlIGZpbmFsbHkgY2FsbGJh
        Y2sKICBAcGFyYW0ge09iamVjdH0gW2JpbmRpbmddIFRoZSBvcHRpb25hbCBj
        YWxsaW5nIG9iamVjdC4gRGVmYXVsdHMgdG8gJ3RoaXMnCiAgQHJldHVybiB7
        Kn0gVGhlIHJldHVybiB2YWx1ZSBpcyB0aGUgdGhhdCBvZiB0aGUgZmluYWxp
        emVyLAogIHVubGVzcyB0aGF0IHZhbHVlIGlzIHVuZGVmaW5lZCwgaW4gd2hp
        Y2ggY2FzZSBpdCBpcyB0aGUgcmV0dXJuIHZhbHVlCiAgb2YgdGhlIHRyeWFi
        bGUuCiovCmlmIChuZWVkc0ZpbmFsbHlGaXgpIHsKICBFbWJlci50cnlDYXRj
        aEZpbmFsbHkgPSBmdW5jdGlvbih0cnlhYmxlLCBjYXRjaGFibGUsIGZpbmFs
        aXplciwgYmluZGluZykgewogICAgdmFyIHJlc3VsdCwgZmluYWxSZXN1bHQs
        IGZpbmFsRXJyb3I7CgogICAgYmluZGluZyA9IGJpbmRpbmcgfHwgdGhpczsK
        CiAgICB0cnkgewogICAgICByZXN1bHQgPSB0cnlhYmxlLmNhbGwoYmluZGlu
        Zyk7CiAgICB9IGNhdGNoKGVycm9yKSB7CiAgICAgIHJlc3VsdCA9IGNhdGNo
        YWJsZS5jYWxsKGJpbmRpbmcsIGVycm9yKTsKICAgIH0gZmluYWxseSB7CiAg
        ICAgIHRyeSB7CiAgICAgICAgZmluYWxSZXN1bHQgPSBmaW5hbGl6ZXIuY2Fs
        bChiaW5kaW5nKTsKICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgIGZpbmFs
        RXJyb3IgPSBlOwogICAgICB9CiAgICB9CgogICAgaWYgKGZpbmFsRXJyb3Ip
        IHsgdGhyb3cgZmluYWxFcnJvcjsgfQoKICAgIHJldHVybiAoZmluYWxSZXN1
        bHQgPT09IHVuZGVmaW5lZCkgPyByZXN1bHQgOiBmaW5hbFJlc3VsdDsKICB9
        Owp9IGVsc2UgewogIEVtYmVyLnRyeUNhdGNoRmluYWxseSA9IGZ1bmN0aW9u
        KHRyeWFibGUsIGNhdGNoYWJsZSwgZmluYWxpemVyLCBiaW5kaW5nKSB7CiAg
        ICB2YXIgcmVzdWx0LCBmaW5hbFJlc3VsdDsKCiAgICBiaW5kaW5nID0gYmlu
        ZGluZyB8fCB0aGlzOwoKICAgIHRyeSB7CiAgICAgIHJlc3VsdCA9IHRyeWFi
        bGUuY2FsbChiaW5kaW5nKTsKICAgIH0gY2F0Y2goZXJyb3IpIHsKICAgICAg
        cmVzdWx0ID0gY2F0Y2hhYmxlLmNhbGwoYmluZGluZywgZXJyb3IpOwogICAg
        fSBmaW5hbGx5IHsKICAgICAgZmluYWxSZXN1bHQgPSBmaW5hbGl6ZXIuY2Fs
        bChiaW5kaW5nKTsKICAgIH0KCiAgICByZXR1cm4gKGZpbmFsUmVzdWx0ID09
        PSB1bmRlZmluZWQpID8gcmVzdWx0IDogZmluYWxSZXN1bHQ7CiAgfTsKfQoK
        Ly8gLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLgov
        LyBUWVBJTkcgJiBBUlJBWSBNRVNTQUdJTkcKLy8KCnZhciBUWVBFX01BUCA9
        IHt9Owp2YXIgdCA9ICJCb29sZWFuIE51bWJlciBTdHJpbmcgRnVuY3Rpb24g
        QXJyYXkgRGF0ZSBSZWdFeHAgT2JqZWN0Ii5zcGxpdCgiICIpOwpFbWJlci5B
        cnJheVBvbHlmaWxscy5mb3JFYWNoLmNhbGwodCwgZnVuY3Rpb24obmFtZSkg
        ewogIFRZUEVfTUFQWyAiW29iamVjdCAiICsgbmFtZSArICJdIiBdID0gbmFt
        ZS50b0xvd2VyQ2FzZSgpOwp9KTsKCnZhciB0b1N0cmluZyA9IE9iamVjdC5w
        cm90b3R5cGUudG9TdHJpbmc7CgovKioKICBSZXR1cm5zIGEgY29uc2lzdGVu
        dCB0eXBlIGZvciB0aGUgcGFzc2VkIGl0ZW0uCgogIFVzZSB0aGlzIGluc3Rl
        YWQgb2YgdGhlIGJ1aWx0LWluIGB0eXBlb2ZgIHRvIGdldCB0aGUgdHlwZSBv
        ZiBhbiBpdGVtLgogIEl0IHdpbGwgcmV0dXJuIHRoZSBzYW1lIHJlc3VsdCBh
        Y3Jvc3MgYWxsIGJyb3dzZXJzIGFuZCBpbmNsdWRlcyBhIGJpdAogIG1vcmUg
        ZGV0YWlsLiBIZXJlIGlzIHdoYXQgd2lsbCBiZSByZXR1cm5lZDoKCiAgICAg
        IHwgUmV0dXJuIFZhbHVlICB8IE1lYW5pbmcgICAgICAgICAgICAgICAgICAg
        ICAgICAgICAgICAgICAgICAgICAgICAgICAgfAogICAgICB8LS0tLS0tLS0t
        LS0tLS0tfC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
        LS0tLS0tLS0tLS0tLS0tLXwKICAgICAgfCAnc3RyaW5nJyAgICAgIHwgU3Ry
        aW5nIHByaW1pdGl2ZSBvciBTdHJpbmcgb2JqZWN0LiAgICAgICAgICAgICAg
        ICAgICB8CiAgICAgIHwgJ251bWJlcicgICAgICB8IE51bWJlciBwcmltaXRp
        dmUgb3IgTnVtYmVyIG9iamVjdC4gICAgICAgICAgICAgICAgICAgfAogICAg
        ICB8ICdib29sZWFuJyAgICAgfCBCb29sZWFuIHByaW1pdGl2ZSBvciBCb29s
        ZWFuIG9iamVjdC4gICAgICAgICAgICAgICAgIHwKICAgICAgfCAnbnVsbCcg
        ICAgICAgIHwgTnVsbCB2YWx1ZSAgICAgICAgICAgICAgICAgICAgICAgICAg
        ICAgICAgICAgICAgICAgICB8CiAgICAgIHwgJ3VuZGVmaW5lZCcgICB8IFVu
        ZGVmaW5lZCB2YWx1ZSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
        ICAgICAgfAogICAgICB8ICdmdW5jdGlvbicgICAgfCBBIGZ1bmN0aW9uICAg
        ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwKICAg
        ICAgfCAnYXJyYXknICAgICAgIHwgQW4gaW5zdGFuY2Ugb2YgQXJyYXkgICAg
        ICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8CiAgICAgIHwgJ3JlZ2V4
        cCcgICAgICB8IEFuIGluc3RhbmNlIG9mIFJlZ0V4cCAgICAgICAgICAgICAg
        ICAgICAgICAgICAgICAgICAgfAogICAgICB8ICdkYXRlJyAgICAgICAgfCBB
        biBpbnN0YW5jZSBvZiBEYXRlICAgICAgICAgICAgICAgICAgICAgICAgICAg
        ICAgICAgIHwKICAgICAgfCAnY2xhc3MnICAgICAgIHwgQW4gRW1iZXIgY2xh
        c3MgKGNyZWF0ZWQgdXNpbmcgRW1iZXIuT2JqZWN0LmV4dGVuZCgpKSB8CiAg
        ICAgIHwgJ2luc3RhbmNlJyAgICB8IEFuIEVtYmVyIG9iamVjdCBpbnN0YW5j
        ZSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfAogICAgICB8ICdlcnJv
        cicgICAgICAgfCBBbiBpbnN0YW5jZSBvZiB0aGUgRXJyb3Igb2JqZWN0ICAg
        ICAgICAgICAgICAgICAgICAgIHwKICAgICAgfCAnb2JqZWN0JyAgICAgIHwg
        QSBKYXZhU2NyaXB0IG9iamVjdCBub3QgaW5oZXJpdGluZyBmcm9tIEVtYmVy
        Lk9iamVjdCB8CgogIEV4YW1wbGVzOgoKICBgYGBqYXZhc2NyaXB0CiAgRW1i
        ZXIudHlwZU9mKCk7ICAgICAgICAgICAgICAgICAgICAgICAvLyAndW5kZWZp
        bmVkJwogIEVtYmVyLnR5cGVPZihudWxsKTsgICAgICAgICAgICAgICAgICAg
        Ly8gJ251bGwnCiAgRW1iZXIudHlwZU9mKHVuZGVmaW5lZCk7ICAgICAgICAg
        ICAgICAvLyAndW5kZWZpbmVkJwogIEVtYmVyLnR5cGVPZignbWljaGFlbCcp
        OyAgICAgICAgICAgICAgLy8gJ3N0cmluZycKICBFbWJlci50eXBlT2YobmV3
        IFN0cmluZygnbWljaGFlbCcpKTsgIC8vICdzdHJpbmcnCiAgRW1iZXIudHlw
        ZU9mKDEwMSk7ICAgICAgICAgICAgICAgICAgICAvLyAnbnVtYmVyJwogIEVt
        YmVyLnR5cGVPZihuZXcgTnVtYmVyKDEwMSkpOyAgICAgICAgLy8gJ251bWJl
        cicKICBFbWJlci50eXBlT2YodHJ1ZSk7ICAgICAgICAgICAgICAgICAgIC8v
        ICdib29sZWFuJwogIEVtYmVyLnR5cGVPZihuZXcgQm9vbGVhbih0cnVlKSk7
        ICAgICAgLy8gJ2Jvb2xlYW4nCiAgRW1iZXIudHlwZU9mKEVtYmVyLm1ha2VB
        cnJheSk7ICAgICAgICAvLyAnZnVuY3Rpb24nCiAgRW1iZXIudHlwZU9mKFsx
        LDIsOTBdKTsgICAgICAgICAgICAgICAvLyAnYXJyYXknCiAgRW1iZXIudHlw
        ZU9mKC9hYmMvKTsgICAgICAgICAgICAgICAgICAvLyAncmVnZXhwJwogIEVt
        YmVyLnR5cGVPZihuZXcgRGF0ZSgpKTsgICAgICAgICAgICAgLy8gJ2RhdGUn
        CiAgRW1iZXIudHlwZU9mKEVtYmVyLk9iamVjdC5leHRlbmQoKSk7ICAvLyAn
        Y2xhc3MnCiAgRW1iZXIudHlwZU9mKEVtYmVyLk9iamVjdC5jcmVhdGUoKSk7
        ICAvLyAnaW5zdGFuY2UnCiAgRW1iZXIudHlwZU9mKG5ldyBFcnJvcigndGVh
        bW9jaWwnKSk7ICAvLyAnZXJyb3InCgogIC8vICJub3JtYWwiIEphdmFTY3Jp
        cHQgb2JqZWN0CiAgRW1iZXIudHlwZU9mKHthOiAnYid9KTsgICAgICAgICAg
        ICAgIC8vICdvYmplY3QnCiAgYGBgCgogIEBtZXRob2QgdHlwZU9mCiAgQGZv
        ciBFbWJlcgogIEBwYXJhbSB7T2JqZWN0fSBpdGVtIHRoZSBpdGVtIHRvIGNo
        ZWNrCiAgQHJldHVybiB7U3RyaW5nfSB0aGUgdHlwZQoqLwpFbWJlci50eXBl
        T2YgPSBmdW5jdGlvbihpdGVtKSB7CiAgdmFyIHJldDsKCiAgcmV0ID0gKGl0
        ZW0gPT09IG51bGwgfHwgaXRlbSA9PT0gdW5kZWZpbmVkKSA/IFN0cmluZyhp
        dGVtKSA6IFRZUEVfTUFQW3RvU3RyaW5nLmNhbGwoaXRlbSldIHx8ICdvYmpl
        Y3QnOwoKICBpZiAocmV0ID09PSAnZnVuY3Rpb24nKSB7CiAgICBpZiAoRW1i
        ZXIuT2JqZWN0ICYmIEVtYmVyLk9iamVjdC5kZXRlY3QoaXRlbSkpIHJldCA9
        ICdjbGFzcyc7CiAgfSBlbHNlIGlmIChyZXQgPT09ICdvYmplY3QnKSB7CiAg
        ICBpZiAoaXRlbSBpbnN0YW5jZW9mIEVycm9yKSByZXQgPSAnZXJyb3InOwog
        ICAgZWxzZSBpZiAoRW1iZXIuT2JqZWN0ICYmIGl0ZW0gaW5zdGFuY2VvZiBF
        bWJlci5PYmplY3QpIHJldCA9ICdpbnN0YW5jZSc7CiAgICBlbHNlIGlmIChp
        dGVtIGluc3RhbmNlb2YgRGF0ZSkgcmV0ID0gJ2RhdGUnOwogIH0KCiAgcmV0
        dXJuIHJldDsKfTsKCi8qKgogIENvbnZlbmllbmNlIG1ldGhvZCB0byBpbnNw
        ZWN0IGFuIG9iamVjdC4gVGhpcyBtZXRob2Qgd2lsbCBhdHRlbXB0IHRvCiAg
        Y29udmVydCB0aGUgb2JqZWN0IGludG8gYSB1c2VmdWwgc3RyaW5nIGRlc2Ny
        aXB0aW9uLgoKICBJdCBpcyBhIHByZXR0eSBzaW1wbGUgaW1wbGVtZW50YXRp
        b24uIElmIHlvdSB3YW50IHNvbWV0aGluZyBtb3JlIHJvYnVzdCwKICB1c2Ug
        c29tZXRoaW5nIGxpa2UgSlNEdW1wOiBodHRwczovL2dpdGh1Yi5jb20vTlYv
        anNEdW1wCgogIEBtZXRob2QgaW5zcGVjdAogIEBmb3IgRW1iZXIKICBAcGFy
        YW0ge09iamVjdH0gb2JqIFRoZSBvYmplY3QgeW91IHdhbnQgdG8gaW5zcGVj
        dC4KICBAcmV0dXJuIHtTdHJpbmd9IEEgZGVzY3JpcHRpb24gb2YgdGhlIG9i
        amVjdAoqLwpFbWJlci5pbnNwZWN0ID0gZnVuY3Rpb24ob2JqKSB7CiAgdmFy
        IHR5cGUgPSBFbWJlci50eXBlT2Yob2JqKTsKICBpZiAodHlwZSA9PT0gJ2Fy
        cmF5JykgewogICAgcmV0dXJuICdbJyArIG9iaiArICddJzsKICB9CiAgaWYg
        KHR5cGUgIT09ICdvYmplY3QnKSB7CiAgICByZXR1cm4gb2JqICsgJyc7CiAg
        fQoKICB2YXIgdiwgcmV0ID0gW107CiAgZm9yKHZhciBrZXkgaW4gb2JqKSB7
        CiAgICBpZiAob2JqLmhhc093blByb3BlcnR5KGtleSkpIHsKICAgICAgdiA9
        IG9ialtrZXldOwogICAgICBpZiAodiA9PT0gJ3RvU3RyaW5nJykgeyBjb250
        aW51ZTsgfSAvLyBpZ25vcmUgdXNlbGVzcyBpdGVtcwogICAgICBpZiAoRW1i
        ZXIudHlwZU9mKHYpID09PSAnZnVuY3Rpb24nKSB7IHYgPSAiZnVuY3Rpb24o
        KSB7IC4uLiB9IjsgfQogICAgICByZXQucHVzaChrZXkgKyAiOiAiICsgdik7
        CiAgICB9CiAgfQogIHJldHVybiAieyIgKyByZXQuam9pbigiLCAiKSArICJ9
        IjsKfTsKCgoKfSkoKTsKCgoKKGZ1bmN0aW9uKCkgewovLyBFbWJlci50cnlD
        YXRjaEZpbmFsbHkKCi8qKgogIFRoZSBwdXJwb3NlIG9mIHRoZSBFbWJlciBJ
        bnN0cnVtZW50YXRpb24gbW9kdWxlIGlzCiAgdG8gcHJvdmlkZSBlZmZpY2ll
        bnQsIGdlbmVyYWwtcHVycG9zZSBpbnN0cnVtZW50YXRpb24KICBmb3IgRW1i
        ZXIuCgogIFN1YnNjcmliZSB0byBhIGxpc3RlbmVyIGJ5IHVzaW5nIGBFbWJl
        ci5zdWJzY3JpYmVgOgoKICBgYGBqYXZhc2NyaXB0CiAgRW1iZXIuc3Vic2Ny
        aWJlKCJyZW5kZXIiLCB7CiAgICBiZWZvcmU6IGZ1bmN0aW9uKG5hbWUsIHRp
        bWVzdGFtcCwgcGF5bG9hZCkgewoKICAgIH0sCgogICAgYWZ0ZXI6IGZ1bmN0
        aW9uKG5hbWUsIHRpbWVzdGFtcCwgcGF5bG9hZCkgewoKICAgIH0KICB9KTsK
        ICBgYGAKCiAgSWYgeW91IHJldHVybiBhIHZhbHVlIGZyb20gdGhlIGBiZWZv
        cmVgIGNhbGxiYWNrLCB0aGF0IHNhbWUKICB2YWx1ZSB3aWxsIGJlIHBhc3Nl
        ZCBhcyBhIGZvdXJ0aCBwYXJhbWV0ZXIgdG8gdGhlIGBhZnRlcmAKICBjYWxs
        YmFjay4KCiAgSW5zdHJ1bWVudCBhIGJsb2NrIG9mIGNvZGUgYnkgdXNpbmcg
        YEVtYmVyLmluc3RydW1lbnRgOgoKICBgYGBqYXZhc2NyaXB0CiAgRW1iZXIu
        aW5zdHJ1bWVudCgicmVuZGVyLmhhbmRsZWJhcnMiLCBwYXlsb2FkLCBmdW5j
        dGlvbigpIHsKICAgIC8vIHJlbmRlcmluZyBsb2dpYwogIH0sIGJpbmRpbmcp
        OwogIGBgYAoKICBFdmVudCBuYW1lcyBwYXNzZWQgdG8gYEVtYmVyLmluc3Ry
        dW1lbnRgIGFyZSBuYW1lc3BhY2VkCiAgYnkgcGVyaW9kcywgZnJvbSBtb3Jl
        IGdlbmVyYWwgdG8gbW9yZSBzcGVjaWZpYy4gU3Vic2NyaWJlcnMKICBjYW4g
        bGlzdGVuIGZvciBldmVudHMgYnkgd2hhdGV2ZXIgbGV2ZWwgb2YgZ3JhbnVs
        YXJpdHkgdGhleQogIGFyZSBpbnRlcmVzdGVkIGluLgoKICBJbiB0aGUgYWJv
        dmUgZXhhbXBsZSwgdGhlIGV2ZW50IGlzIGByZW5kZXIuaGFuZGxlYmFyc2As
        CiAgYW5kIHRoZSBzdWJzY3JpYmVyIGxpc3RlbmVkIGZvciBhbGwgZXZlbnRz
        IGJlZ2lubmluZyB3aXRoCiAgYHJlbmRlcmAuIEl0IHdvdWxkIHJlY2VpdmUg
        Y2FsbGJhY2tzIGZvciBldmVudHMgbmFtZWQKICBgcmVuZGVyYCwgYHJlbmRl
        ci5oYW5kbGViYXJzYCwgYHJlbmRlci5jb250YWluZXJgLCBvcgogIGV2ZW4g
        YHJlbmRlci5oYW5kbGViYXJzLmxheW91dGAuCgogIEBjbGFzcyBJbnN0cnVt
        ZW50YXRpb24KICBAbmFtZXNwYWNlIEVtYmVyCiAgQHN0YXRpYwoqLwpFbWJl
        ci5JbnN0cnVtZW50YXRpb24gPSB7fTsKCnZhciBzdWJzY3JpYmVycyA9IFtd
        LCBjYWNoZSA9IHt9OwoKdmFyIHBvcHVsYXRlTGlzdGVuZXJzID0gZnVuY3Rp
        b24obmFtZSkgewogIHZhciBsaXN0ZW5lcnMgPSBbXSwgc3Vic2NyaWJlcjsK
        CiAgZm9yICh2YXIgaT0wLCBsPXN1YnNjcmliZXJzLmxlbmd0aDsgaTxsOyBp
        KyspIHsKICAgIHN1YnNjcmliZXIgPSBzdWJzY3JpYmVyc1tpXTsKICAgIGlm
        IChzdWJzY3JpYmVyLnJlZ2V4LnRlc3QobmFtZSkpIHsKICAgICAgbGlzdGVu
        ZXJzLnB1c2goc3Vic2NyaWJlci5vYmplY3QpOwogICAgfQogIH0KCiAgY2Fj
        aGVbbmFtZV0gPSBsaXN0ZW5lcnM7CiAgcmV0dXJuIGxpc3RlbmVyczsKfTsK
        CnZhciB0aW1lID0gKGZ1bmN0aW9uKCkgewogIHZhciBwZXJmID0gJ3VuZGVm
        aW5lZCcgIT09IHR5cGVvZiB3aW5kb3cgPyB3aW5kb3cucGVyZm9ybWFuY2Ug
        fHwge30gOiB7fTsKICB2YXIgZm4gPSBwZXJmLm5vdyB8fCBwZXJmLm1vek5v
        dyB8fCBwZXJmLndlYmtpdE5vdyB8fCBwZXJmLm1zTm93IHx8IHBlcmYub05v
        dzsKICAvLyBmbi5iaW5kIHdpbGwgYmUgYXZhaWxhYmxlIGluIGFsbCB0aGUg
        YnJvd3NlcnMgdGhhdCBzdXBwb3J0IHRoZSBhZHZhbmNlZCB3aW5kb3cucGVy
        Zm9ybWFuY2UuLi4gOy0pCiAgcmV0dXJuIGZuID8gZm4uYmluZChwZXJmKSA6
        IGZ1bmN0aW9uKCkgeyByZXR1cm4gK25ldyBEYXRlKCk7IH07Cn0pKCk7Cgov
        KioKICBOb3RpZmllcyBldmVudCdzIHN1YnNjcmliZXJzLCBjYWxscyBgYmVm
        b3JlYCBhbmQgYGFmdGVyYCBob29rcy4KCiAgQG1ldGhvZCBpbnN0cnVtZW50
        CiAgQG5hbWVzcGFjZSBFbWJlci5JbnN0cnVtZW50YXRpb24KCiAgQHBhcmFt
        IHtTdHJpbmd9IFtuYW1lXSBOYW1lc3BhY2VkIGV2ZW50IG5hbWUuCiAgQHBh
        cmFtIHtPYmplY3R9IHBheWxvYWQKICBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxs
        YmFjayBGdW5jdGlvbiB0aGF0IHlvdSdyZSBpbnN0cnVtZW50aW5nLgogIEBw
        YXJhbSB7T2JqZWN0fSBiaW5kaW5nIENvbnRleHQgdGhhdCBpbnN0cnVtZW50
        IGZ1bmN0aW9uIGlzIGNhbGxlZCB3aXRoLgoqLwpFbWJlci5JbnN0cnVtZW50
        YXRpb24uaW5zdHJ1bWVudCA9IGZ1bmN0aW9uKG5hbWUsIHBheWxvYWQsIGNh
        bGxiYWNrLCBiaW5kaW5nKSB7CiAgdmFyIGxpc3RlbmVycyA9IGNhY2hlW25h
        bWVdLCB0aW1lTmFtZSwgcmV0OwoKICBpZiAoRW1iZXIuU1RSVUNUVVJFRF9Q
        Uk9GSUxFKSB7CiAgICB0aW1lTmFtZSA9IG5hbWUgKyAiOiAiICsgcGF5bG9h
        ZC5vYmplY3Q7CiAgICBjb25zb2xlLnRpbWUodGltZU5hbWUpOwogIH0KCiAg
        aWYgKCFsaXN0ZW5lcnMpIHsKICAgIGxpc3RlbmVycyA9IHBvcHVsYXRlTGlz
        dGVuZXJzKG5hbWUpOwogIH0KCiAgaWYgKGxpc3RlbmVycy5sZW5ndGggPT09
        IDApIHsKICAgIHJldCA9IGNhbGxiYWNrLmNhbGwoYmluZGluZyk7CiAgICBp
        ZiAoRW1iZXIuU1RSVUNUVVJFRF9QUk9GSUxFKSB7IGNvbnNvbGUudGltZUVu
        ZCh0aW1lTmFtZSk7IH0KICAgIHJldHVybiByZXQ7CiAgfQoKICB2YXIgYmVm
        b3JlVmFsdWVzID0gW10sIGxpc3RlbmVyLCBpLCBsOwoKICBmdW5jdGlvbiB0
        cnlhYmxlKCkgewogICAgZm9yIChpPTAsIGw9bGlzdGVuZXJzLmxlbmd0aDsg
        aTxsOyBpKyspIHsKICAgICAgbGlzdGVuZXIgPSBsaXN0ZW5lcnNbaV07CiAg
        ICAgIGJlZm9yZVZhbHVlc1tpXSA9IGxpc3RlbmVyLmJlZm9yZShuYW1lLCB0
        aW1lKCksIHBheWxvYWQpOwogICAgfQoKICAgIHJldHVybiBjYWxsYmFjay5j
        YWxsKGJpbmRpbmcpOwogIH0KCiAgZnVuY3Rpb24gY2F0Y2hhYmxlKGUpIHsK
        ICAgIHBheWxvYWQgPSBwYXlsb2FkIHx8IHt9OwogICAgcGF5bG9hZC5leGNl
        cHRpb24gPSBlOwogIH0KCiAgZnVuY3Rpb24gZmluYWxpemVyKCkgewogICAg
        Zm9yIChpPTAsIGw9bGlzdGVuZXJzLmxlbmd0aDsgaTxsOyBpKyspIHsKICAg
        ICAgbGlzdGVuZXIgPSBsaXN0ZW5lcnNbaV07CiAgICAgIGxpc3RlbmVyLmFm
        dGVyKG5hbWUsIHRpbWUoKSwgcGF5bG9hZCwgYmVmb3JlVmFsdWVzW2ldKTsK
        ICAgIH0KCiAgICBpZiAoRW1iZXIuU1RSVUNUVVJFRF9QUk9GSUxFKSB7CiAg
        ICAgIGNvbnNvbGUudGltZUVuZCh0aW1lTmFtZSk7CiAgICB9CiAgfQoKICBy
        ZXR1cm4gRW1iZXIudHJ5Q2F0Y2hGaW5hbGx5KHRyeWFibGUsIGNhdGNoYWJs
        ZSwgZmluYWxpemVyKTsKfTsKCi8qKgogIFN1YnNjcmliZXMgdG8gYSBwYXJ0
        aWN1bGFyIGV2ZW50IG9yIGluc3RydW1lbnRlZCBibG9jayBvZiBjb2RlLgoK
        ICBAbWV0aG9kIHN1YnNjcmliZQogIEBuYW1lc3BhY2UgRW1iZXIuSW5zdHJ1
        bWVudGF0aW9uCgogIEBwYXJhbSB7U3RyaW5nfSBbcGF0dGVybl0gTmFtZXNw
        YWNlZCBldmVudCBuYW1lLgogIEBwYXJhbSB7T2JqZWN0fSBbb2JqZWN0XSBC
        ZWZvcmUgYW5kIEFmdGVyIGhvb2tzLgoKICBAcmV0dXJuIHtTdWJzY3JpYmVy
        fQoqLwpFbWJlci5JbnN0cnVtZW50YXRpb24uc3Vic2NyaWJlID0gZnVuY3Rp
        b24ocGF0dGVybiwgb2JqZWN0KSB7CiAgdmFyIHBhdGhzID0gcGF0dGVybi5z
        cGxpdCgiLiIpLCBwYXRoLCByZWdleCA9IFtdOwoKICBmb3IgKHZhciBpPTAs
        IGw9cGF0aHMubGVuZ3RoOyBpPGw7IGkrKykgewogICAgcGF0aCA9IHBhdGhz
        W2ldOwogICAgaWYgKHBhdGggPT09ICIqIikgewogICAgICByZWdleC5wdXNo
        KCJbXlxcLl0qIik7CiAgICB9IGVsc2UgewogICAgICByZWdleC5wdXNoKHBh
        dGgpOwogICAgfQogIH0KCiAgcmVnZXggPSByZWdleC5qb2luKCJcXC4iKTsK
        ICByZWdleCA9IHJlZ2V4ICsgIihcXC4uKik/IjsKCiAgdmFyIHN1YnNjcmli
        ZXIgPSB7CiAgICBwYXR0ZXJuOiBwYXR0ZXJuLAogICAgcmVnZXg6IG5ldyBS
        ZWdFeHAoIl4iICsgcmVnZXggKyAiJCIpLAogICAgb2JqZWN0OiBvYmplY3QK
        ICB9OwoKICBzdWJzY3JpYmVycy5wdXNoKHN1YnNjcmliZXIpOwogIGNhY2hl
        ID0ge307CgogIHJldHVybiBzdWJzY3JpYmVyOwp9OwoKLyoqCiAgVW5zdWJz
        Y3JpYmVzIGZyb20gYSBwYXJ0aWN1bGFyIGV2ZW50IG9yIGluc3RydW1lbnRl
        ZCBibG9jayBvZiBjb2RlLgoKICBAbWV0aG9kIHVuc3Vic2NyaWJlCiAgQG5h
        bWVzcGFjZSBFbWJlci5JbnN0cnVtZW50YXRpb24KCiAgQHBhcmFtIHtPYmpl
        Y3R9IFtzdWJzY3JpYmVyXQoqLwpFbWJlci5JbnN0cnVtZW50YXRpb24udW5z
        dWJzY3JpYmUgPSBmdW5jdGlvbihzdWJzY3JpYmVyKSB7CiAgdmFyIGluZGV4
        OwoKICBmb3IgKHZhciBpPTAsIGw9c3Vic2NyaWJlcnMubGVuZ3RoOyBpPGw7
        IGkrKykgewogICAgaWYgKHN1YnNjcmliZXJzW2ldID09PSBzdWJzY3JpYmVy
        KSB7CiAgICAgIGluZGV4ID0gaTsKICAgIH0KICB9CgogIHN1YnNjcmliZXJz
        LnNwbGljZShpbmRleCwgMSk7CiAgY2FjaGUgPSB7fTsKfTsKCi8qKgogIFJl
        c2V0cyBgRW1iZXIuSW5zdHJ1bWVudGF0aW9uYCBieSBmbHVzaGluZyBsaXN0
        IG9mIHN1YnNjcmliZXJzLgoKICBAbWV0aG9kIHJlc2V0CiAgQG5hbWVzcGFj
        ZSBFbWJlci5JbnN0cnVtZW50YXRpb24KKi8KRW1iZXIuSW5zdHJ1bWVudGF0
        aW9uLnJlc2V0ID0gZnVuY3Rpb24oKSB7CiAgc3Vic2NyaWJlcnMgPSBbXTsK
        ICBjYWNoZSA9IHt9Owp9OwoKRW1iZXIuaW5zdHJ1bWVudCA9IEVtYmVyLklu
        c3RydW1lbnRhdGlvbi5pbnN0cnVtZW50OwpFbWJlci5zdWJzY3JpYmUgPSBF
        bWJlci5JbnN0cnVtZW50YXRpb24uc3Vic2NyaWJlOwp9KSgpOwoKCgooZnVu
        Y3Rpb24oKSB7CnZhciBtYXAsIGZvckVhY2gsIGluZGV4T2YsIHNwbGljZSwg
        ZmlsdGVyOwptYXAgICAgID0gQXJyYXkucHJvdG90eXBlLm1hcCAgICAgfHwg
        RW1iZXIuQXJyYXlQb2x5ZmlsbHMubWFwOwpmb3JFYWNoID0gQXJyYXkucHJv
        dG90eXBlLmZvckVhY2ggfHwgRW1iZXIuQXJyYXlQb2x5ZmlsbHMuZm9yRWFj
        aDsKaW5kZXhPZiA9IEFycmF5LnByb3RvdHlwZS5pbmRleE9mIHx8IEVtYmVy
        LkFycmF5UG9seWZpbGxzLmluZGV4T2Y7CmZpbHRlciA9IEFycmF5LnByb3Rv
        dHlwZS5maWx0ZXIgfHwgRW1iZXIuQXJyYXlQb2x5ZmlsbHMuZmlsdGVyOwpz
        cGxpY2UgPSBBcnJheS5wcm90b3R5cGUuc3BsaWNlOwoKLyoqCiAqIERlZmlu
        ZXMgc29tZSBjb252ZW5pZW5jZSBtZXRob2RzIGZvciB3b3JraW5nIHdpdGgg
        RW51bWVyYWJsZXMuCiAqIGBFbWJlci5FbnVtZXJhYmxlVXRpbHNgIHVzZXMg
        YEVtYmVyLkFycmF5UG9seWZpbGxzYCB3aGVuIG5lY2Vzc2FyeS4KICoKICog
        QGNsYXNzIEVudW1lcmFibGVVdGlscwogKiBAbmFtZXNwYWNlIEVtYmVyCiAq
        IEBzdGF0aWMKICogKi8KdmFyIHV0aWxzID0gRW1iZXIuRW51bWVyYWJsZVV0
        aWxzID0gewogIC8qKgogICAqIENhbGxzIHRoZSBtYXAgZnVuY3Rpb24gb24g
        dGhlIHBhc3NlZCBvYmplY3Qgd2l0aCBhIHNwZWNpZmllZCBjYWxsYmFjay4g
        VGhpcwogICAqIHVzZXMgYEVtYmVyLkFycmF5UG9seWZpbGxgJ3MtbWFwIG1l
        dGhvZCB3aGVuIG5lY2Vzc2FyeS4KICAgKgogICAqIEBtZXRob2QgbWFwCiAg
        ICogQHBhcmFtIHtPYmplY3R9IG9iaiBUaGUgb2JqZWN0IHRoYXQgc2hvdWxk
        IGJlIG1hcHBlZAogICAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrIFRo
        ZSBjYWxsYmFjayB0byBleGVjdXRlCiAgICogQHBhcmFtIHtPYmplY3R9IHRo
        aXNBcmcgVmFsdWUgdG8gdXNlIGFzIHRoaXMgd2hlbiBleGVjdXRpbmcgKmNh
        bGxiYWNrKgogICAqCiAgICogQHJldHVybiB7QXJyYXl9IEFuIGFycmF5IG9m
        IG1hcHBlZCB2YWx1ZXMuCiAgICovCiAgbWFwOiBmdW5jdGlvbihvYmosIGNh
        bGxiYWNrLCB0aGlzQXJnKSB7CiAgICByZXR1cm4gb2JqLm1hcCA/IG9iai5t
        YXAuY2FsbChvYmosIGNhbGxiYWNrLCB0aGlzQXJnKSA6IG1hcC5jYWxsKG9i
        aiwgY2FsbGJhY2ssIHRoaXNBcmcpOwogIH0sCgogIC8qKgogICAqIENhbGxz
        IHRoZSBmb3JFYWNoIGZ1bmN0aW9uIG9uIHRoZSBwYXNzZWQgb2JqZWN0IHdp
        dGggYSBzcGVjaWZpZWQgY2FsbGJhY2suIFRoaXMKICAgKiB1c2VzIGBFbWJl
        ci5BcnJheVBvbHlmaWxsYCdzLWZvckVhY2ggbWV0aG9kIHdoZW4gbmVjZXNz
        YXJ5LgogICAqCiAgICogQG1ldGhvZCBmb3JFYWNoCiAgICogQHBhcmFtIHtP
        YmplY3R9IG9iaiBUaGUgb2JqZWN0IHRvIGNhbGwgZm9yRWFjaCBvbgogICAq
        IEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrIFRoZSBjYWxsYmFjayB0byBl
        eGVjdXRlCiAgICogQHBhcmFtIHtPYmplY3R9IHRoaXNBcmcgVmFsdWUgdG8g
        dXNlIGFzIHRoaXMgd2hlbiBleGVjdXRpbmcgKmNhbGxiYWNrKgogICAqCiAg
        ICovCiAgZm9yRWFjaDogZnVuY3Rpb24ob2JqLCBjYWxsYmFjaywgdGhpc0Fy
        ZykgewogICAgcmV0dXJuIG9iai5mb3JFYWNoID8gb2JqLmZvckVhY2guY2Fs
        bChvYmosIGNhbGxiYWNrLCB0aGlzQXJnKSA6IGZvckVhY2guY2FsbChvYmos
        IGNhbGxiYWNrLCB0aGlzQXJnKTsKICB9LAoKICAvKioKICAgKiBDYWxscyB0
        aGUgZmlsdGVyIGZ1bmN0aW9uIG9uIHRoZSBwYXNzZWQgb2JqZWN0IHdpdGgg
        YSBzcGVjaWZpZWQgY2FsbGJhY2suIFRoaXMKICAgKiB1c2VzIGBFbWJlci5B
        cnJheVBvbHlmaWxsYCdzLWZpbHRlciBtZXRob2Qgd2hlbiBuZWNlc3Nhcnku
        CiAgICoKICAgKiBAbWV0aG9kIGZpbHRlcgogICAqIEBwYXJhbSB7T2JqZWN0
        fSBvYmogVGhlIG9iamVjdCB0byBjYWxsIGZpbHRlciBvbgogICAqIEBwYXJh
        bSB7RnVuY3Rpb259IGNhbGxiYWNrIFRoZSBjYWxsYmFjayB0byBleGVjdXRl
        CiAgICogQHBhcmFtIHtPYmplY3R9IHRoaXNBcmcgVmFsdWUgdG8gdXNlIGFz
        IHRoaXMgd2hlbiBleGVjdXRpbmcgKmNhbGxiYWNrKgogICAqCiAgICogQHJl
        dHVybiB7QXJyYXl9IEFuIGFycmF5IGNvbnRhaW5pbmcgdGhlIGZpbHRlcmVk
        IHZhbHVlcwogICAqLwogIGZpbHRlcjogZnVuY3Rpb24ob2JqLCBjYWxsYmFj
        aywgdGhpc0FyZykgewogICAgcmV0dXJuIG9iai5maWx0ZXIgPyBvYmouZmls
        dGVyLmNhbGwob2JqLCBjYWxsYmFjaywgdGhpc0FyZykgOiBmaWx0ZXIuY2Fs
        bChvYmosIGNhbGxiYWNrLCB0aGlzQXJnKTsKICB9LAoKICAvKioKICAgKiBD
        YWxscyB0aGUgaW5kZXhPZiBmdW5jdGlvbiBvbiB0aGUgcGFzc2VkIG9iamVj
        dCB3aXRoIGEgc3BlY2lmaWVkIGNhbGxiYWNrLiBUaGlzCiAgICogdXNlcyBg
        RW1iZXIuQXJyYXlQb2x5ZmlsbGAncy1pbmRleE9mIG1ldGhvZCB3aGVuIG5l
        Y2Vzc2FyeS4KICAgKgogICAqIEBtZXRob2QgaW5kZXhPZgogICAqIEBwYXJh
        bSB7T2JqZWN0fSBvYmogVGhlIG9iamVjdCB0byBjYWxsIGluZGV4T24gb24K
        ICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjayBUaGUgY2FsbGJhY2sg
        dG8gZXhlY3V0ZQogICAqIEBwYXJhbSB7T2JqZWN0fSBpbmRleCBUaGUgaW5k
        ZXggdG8gc3RhcnQgc2VhcmNoaW5nIGZyb20KICAgKgogICAqLwogIGluZGV4
        T2Y6IGZ1bmN0aW9uKG9iaiwgZWxlbWVudCwgaW5kZXgpIHsKICAgIHJldHVy
        biBvYmouaW5kZXhPZiA/IG9iai5pbmRleE9mLmNhbGwob2JqLCBlbGVtZW50
        LCBpbmRleCkgOiBpbmRleE9mLmNhbGwob2JqLCBlbGVtZW50LCBpbmRleCk7
        CiAgfSwKCiAgLyoqCiAgICogUmV0dXJucyBhbiBhcnJheSBvZiBpbmRleGVz
        IG9mIHRoZSBmaXJzdCBvY2N1cnJlbmNlcyBvZiB0aGUgcGFzc2VkIGVsZW1l
        bnRzCiAgICogb24gdGhlIHBhc3NlZCBvYmplY3QuCiAgICoKICAgKiBgYGBq
        YXZhc2NyaXB0CiAgICogIHZhciBhcnJheSA9IFsxLCAyLCAzLCA0LCA1XTsK
        ICAgKiAgRW1iZXIuRW51bWVyYWJsZVV0aWxzLmluZGV4ZXNPZihhcnJheSwg
        WzIsIDVdKTsgLy8gWzEsIDRdCiAgICoKICAgKiAgdmFyIGZ1YmFyID0gIkZ1
        YmFyciI7CiAgICogIEVtYmVyLkVudW1lcmFibGVVdGlscy5pbmRleGVzT2Yo
        ZnViYXIsIFsnYicsICdyJ10pOyAvLyBbMiwgNF0KICAgKiBgYGAKICAgKgog
        ICAqIEBtZXRob2QgaW5kZXhlc09mCiAgICogQHBhcmFtIHtPYmplY3R9IG9i
        aiBUaGUgb2JqZWN0IHRvIGNoZWNrIGZvciBlbGVtZW50IGluZGV4ZXMKICAg
        KiBAcGFyYW0ge0FycmF5fSBlbGVtZW50cyBUaGUgZWxlbWVudHMgdG8gc2Vh
        cmNoIGZvciBvbiAqb2JqKgogICAqCiAgICogQHJldHVybiB7QXJyYXl9IEFu
        IGFycmF5IG9mIGluZGV4ZXMuCiAgICoKICAgKi8KICBpbmRleGVzT2Y6IGZ1
        bmN0aW9uKG9iaiwgZWxlbWVudHMpIHsKICAgIHJldHVybiBlbGVtZW50cyA9
        PT0gdW5kZWZpbmVkID8gW10gOiB1dGlscy5tYXAoZWxlbWVudHMsIGZ1bmN0
        aW9uKGl0ZW0pIHsKICAgICAgcmV0dXJuIHV0aWxzLmluZGV4T2Yob2JqLCBp
        dGVtKTsKICAgIH0pOwogIH0sCgogIC8qKiAKICAgKiBBZGRzIGFuIG9iamVj
        dCB0byBhbiBhcnJheS4gSWYgdGhlIGFycmF5IGFscmVhZHkgaW5jbHVkZXMg
        dGhlIG9iamVjdCB0aGlzCiAgICogbWV0aG9kIGhhcyBubyBlZmZlY3QuCiAg
        ICoKICAgKiBAbWV0aG9kIGFkZE9iamVjdAogICAqIEBwYXJhbSB7QXJyYXl9
        IGFycmF5IFRoZSBhcnJheSB0aGUgcGFzc2VkIGl0ZW0gc2hvdWxkIGJlIGFk
        ZGVkIHRvCiAgICogQHBhcmFtIHtPYmplY3R9IGl0ZW0gVGhlIGl0ZW0gdG8g
        YWRkIHRvIHRoZSBwYXNzZWQgYXJyYXkKICAgKgogICAqIEByZXR1cm4gJ3Vu
        ZGVmaW5lZCcKICAgKi8KICBhZGRPYmplY3Q6IGZ1bmN0aW9uKGFycmF5LCBp
        dGVtKSB7CiAgICB2YXIgaW5kZXggPSB1dGlscy5pbmRleE9mKGFycmF5LCBp
        dGVtKTsKICAgIGlmIChpbmRleCA9PT0gLTEpIHsgYXJyYXkucHVzaChpdGVt
        KTsgfQogIH0sCgogIC8qKgogICAqIFJlbW92ZXMgYW4gb2JqZWN0IGZyb20g
        YW4gYXJyYXkuIElmIHRoZSBhcnJheSBkb2VzIG5vdCBjb250YWluIHRoZSBw
        YXNzZWQKICAgKiBvYmplY3QgdGhpcyBtZXRob2QgaGFzIG5vIGVmZmVjdC4K
        ICAgKgogICAqIEBtZXRob2QgcmVtb3ZlT2JqZWN0CiAgICogQHBhcmFtIHtB
        cnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIHJlbW92ZSB0aGUgaXRlbSBmcm9t
        LgogICAqIEBwYXJhbSB7T2JqZWN0fSBpdGVtIFRoZSBpdGVtIHRvIHJlbW92
        ZSBmcm9tIHRoZSBwYXNzZWQgYXJyYXkuCiAgICoKICAgKiBAcmV0dXJuICd1
        bmRlZmluZWQnCiAgICovCiAgcmVtb3ZlT2JqZWN0OiBmdW5jdGlvbihhcnJh
        eSwgaXRlbSkgewogICAgdmFyIGluZGV4ID0gdXRpbHMuaW5kZXhPZihhcnJh
        eSwgaXRlbSk7CiAgICBpZiAoaW5kZXggIT09IC0xKSB7IGFycmF5LnNwbGlj
        ZShpbmRleCwgMSk7IH0KICB9LAoKICBfcmVwbGFjZTogZnVuY3Rpb24oYXJy
        YXksIGlkeCwgYW10LCBvYmplY3RzKSB7CiAgICB2YXIgYXJncyA9IFtdLmNv
        bmNhdChvYmplY3RzKSwgY2h1bmssIHJldCA9IFtdLAogICAgICAgIC8vIGh0
        dHBzOi8vY29kZS5nb29nbGUuY29tL3AvY2hyb21pdW0vaXNzdWVzL2RldGFp
        bD9pZD01NjU4OAogICAgICAgIHNpemUgPSA2MDAwMCwgc3RhcnQgPSBpZHgs
        IGVuZHMgPSBhbXQsIGNvdW50OwoKICAgIHdoaWxlIChhcmdzLmxlbmd0aCkg
        ewogICAgICBjb3VudCA9IGVuZHMgPiBzaXplID8gc2l6ZSA6IGVuZHM7CiAg
        ICAgIGlmIChjb3VudCA8PSAwKSB7IGNvdW50ID0gMDsgfQoKICAgICAgY2h1
        bmsgPSBhcmdzLnNwbGljZSgwLCBzaXplKTsKICAgICAgY2h1bmsgPSBbc3Rh
        cnQsIGNvdW50XS5jb25jYXQoY2h1bmspOwoKICAgICAgc3RhcnQgKz0gc2l6
        ZTsKICAgICAgZW5kcyAtPSBjb3VudDsKCiAgICAgIHJldCA9IHJldC5jb25j
        YXQoc3BsaWNlLmFwcGx5KGFycmF5LCBjaHVuaykpOwogICAgfQogICAgcmV0
        dXJuIHJldDsKICB9LAoKICAvKioKICAgKiBSZXBsYWNlcyBvYmplY3RzIGlu
        IGFuIGFycmF5IHdpdGggdGhlIHBhc3NlZCBvYmplY3RzLgogICAqCiAgICog
        YGBgamF2YXNjcmlwdAogICAqICAgdmFyIGFycmF5ID0gWzEsMiwzXTsKICAg
        KiAgIEVtYmVyLkVudW1lcmFibGVVdGlscy5yZXBsYWNlKGFycmF5LCAxLCAy
        LCBbNCwgNV0pOyAvLyBbMSwgNCwgNV0KICAgKgogICAqICAgdmFyIGFycmF5
        ID0gWzEsMiwzXTsKICAgKiAgIEVtYmVyLkVudW1lcmFibGVVdGlscy5yZXBs
        YWNlKGFycmF5LCAxLCAxLCBbNCwgNV0pOyAvLyBbMSwgNCwgNSwgM10KICAg
        KgogICAqICAgdmFyIGFycmF5ID0gWzEsMiwzXTsKICAgKiAgIEVtYmVyLkVu
        dW1lcmFibGVVdGlscy5yZXBsYWNlKGFycmF5LCAxMCwgMSwgWzQsIDVdKTsg
        Ly8gWzEsIDIsIDMsIDQsIDVdCiAgICogYGBgCiAgICogCiAgICogQG1ldGhv
        ZCByZXBsYWNlCiAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5
        IHRoZSBvYmplY3RzIHNob3VsZCBiZSBpbnNlcnRlZCBpbnRvLgogICAqIEBw
        YXJhbSB7TnVtYmVyfSBpZHggU3RhcnRpbmcgaW5kZXggaW4gdGhlIGFycmF5
        IHRvIHJlcGxhY2UuIElmICppZHgqID49CiAgICogbGVuZ3RoLCB0aGVuIGFw
        cGVuZCB0byB0aGUgZW5kIG9mIHRoZSBhcnJheS4KICAgKiBAcGFyYW0ge051
        bWJlcn0gYW10IE51bWJlciBvZiBlbGVtZW50cyB0aGF0IHNob3VsZCBiZSBy
        ZW1vdmUgZnJvbSB0aGUgYXJyYXksCiAgICogc3RhcnRpbmcgYXQgKmlkeCoK
        ICAgKiBAcGFyYW0ge0FycmF5fSBvYmplY3RzIEFuIGFycmF5IG9mIHplcm8g
        b3IgbW9yZSBvYmplY3RzIHRoYXQgc2hvdWxkIGJlCiAgICogaW5zZXJ0ZWQg
        aW50byB0aGUgYXJyYXkgYXQgKmlkeCoKICAgKgogICAqIEByZXR1cm4ge0Fy
        cmF5fSBUaGUgY2hhbmdlZCBhcnJheS4KICAgKi8KICByZXBsYWNlOiBmdW5j
        dGlvbihhcnJheSwgaWR4LCBhbXQsIG9iamVjdHMpIHsKICAgIGlmIChhcnJh
        eS5yZXBsYWNlKSB7CiAgICAgIHJldHVybiBhcnJheS5yZXBsYWNlKGlkeCwg
        YW10LCBvYmplY3RzKTsKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiB1dGls
        cy5fcmVwbGFjZShhcnJheSwgaWR4LCBhbXQsIG9iamVjdHMpOwogICAgfQog
        IH0sCgogIC8qKgogICAqIENhbGN1bGF0ZXMgdGhlIGludGVyc2VjdGlvbiBv
        ZiB0d28gYXJyYXlzLiBUaGlzIG1ldGhvZCByZXR1cm5zIGEgbmV3IGFycmF5
        CiAgICogZmlsbGVkIHdpdGggdGhlIHJlY29yZHMgdGhhdCB0aGUgdHdvIHBh
        c3NlZCBhcnJheXMgc2hhcmUgd2l0aCBlYWNoIG90aGVyLiAKICAgKiBJZiB0
        aGVyZSBpcyBubyBpbnRlcnNlY3Rpb24sIGFuIGVtcHR5IGFycmF5IHdpbGwg
        YmUgcmV0dXJuZWQuCiAgICoKICAgKiBgYGBqYXZhc2NyaXB0CiAgICogdmFy
        IGFycmF5MSA9IFsxLCAyLCAzLCA0LCA1XTsKICAgKiB2YXIgYXJyYXkyID0g
        WzEsIDMsIDUsIDYsIDddOwogICAqCiAgICogRW1iZXIuRW51bWVyYWJsZVV0
        aWxzLmludGVyc2VjdGlvbihhcnJheTEsIGFycmF5Mik7IC8vIFsxLCAzLCA1
        XQogICAqCiAgICogdmFyIGFycmF5MSA9IFsxLCAyLCAzXTsKICAgKiB2YXIg
        YXJyYXkyID0gWzQsIDUsIDZdOwogICAqCiAgICogRW1iZXIuRW51bWVyYWJs
        ZVV0aWxzLmludGVyc2VjdGlvbihhcnJheTEsIGFycmF5Mik7IC8vIFtdCiAg
        ICogYGBgCiAgICoKICAgKiBAbWV0aG9kIGludGVyc2VjdGlvbgogICAqIEBw
        YXJhbSB7QXJyYXl9IGFycmF5MSBUaGUgZmlyc3QgYXJyYXkKICAgKiBAcGFy
        YW0ge0FycmF5fSBhcnJheTIgVGhlIHNlY29uZCBhcnJheQogICAqCiAgICog
        QHJldHVybiB7QXJyYXl9IFRoZSBpbnRlcnNlY3Rpb24gb2YgdGhlIHR3byBw
        YXNzZWQgYXJyYXlzLgogICAqLwogIGludGVyc2VjdGlvbjogZnVuY3Rpb24o
        YXJyYXkxLCBhcnJheTIpIHsKICAgIHZhciBpbnRlcnNlY3Rpb24gPSBbXTsK
        CiAgICB1dGlscy5mb3JFYWNoKGFycmF5MSwgZnVuY3Rpb24oZWxlbWVudCkg
        ewogICAgICBpZiAodXRpbHMuaW5kZXhPZihhcnJheTIsIGVsZW1lbnQpID49
        IDApIHsKICAgICAgICBpbnRlcnNlY3Rpb24ucHVzaChlbGVtZW50KTsKICAg
        ICAgfQogICAgfSk7CgogICAgcmV0dXJuIGludGVyc2VjdGlvbjsKICB9Cn07
        Cgp9KSgpOwoKCgooZnVuY3Rpb24oKSB7Ci8qKgpAbW9kdWxlIGVtYmVyLW1l
        dGFsCiovCgp2YXIgTUVUQV9LRVkgPSBFbWJlci5NRVRBX0tFWSwgZ2V0OwoK
        dmFyIE1BTkRBVE9SWV9TRVRURVIgPSBFbWJlci5FTlYuTUFOREFUT1JZX1NF
        VFRFUjsKCnZhciBJU19HTE9CQUxfUEFUSCA9IC9eKFtBLVokXXwoWzAtOV1b
        QS1aJF0pKS4qW1wuXCpdLzsKdmFyIEhBU19USElTICA9IC9edGhpc1tcLlwq
        XS87CnZhciBGSVJTVF9LRVkgPSAvXihbXlwuXCpdKykvOwoKLy8gLi4uLi4u
        Li4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4u
        Li4uLi4uLgovLyBHRVQgQU5EIFNFVAovLwovLyBJZiB3ZSBhcmUgb24gYSBw
        bGF0Zm9ybSB0aGF0IHN1cHBvcnRzIGFjY2Vzc29ycyB3ZSBjYW4gdXNlIHRo
        b3NlLgovLyBPdGhlcndpc2Ugc2ltdWxhdGUgYWNjZXNzb3JzIGJ5IGxvb2tp
        bmcgdXAgdGhlIHByb3BlcnR5IGRpcmVjdGx5IG9uIHRoZQovLyBvYmplY3Qu
        CgovKioKICBHZXRzIHRoZSB2YWx1ZSBvZiBhIHByb3BlcnR5IG9uIGFuIG9i
        amVjdC4gSWYgdGhlIHByb3BlcnR5IGlzIGNvbXB1dGVkLAogIHRoZSBmdW5j
        dGlvbiB3aWxsIGJlIGludm9rZWQuIElmIHRoZSBwcm9wZXJ0eSBpcyBub3Qg
        ZGVmaW5lZCBidXQgdGhlCiAgb2JqZWN0IGltcGxlbWVudHMgdGhlIGB1bmtu
        b3duUHJvcGVydHlgIG1ldGhvZCB0aGVuIHRoYXQgd2lsbCBiZSBpbnZva2Vk
        LgoKICBJZiB5b3UgcGxhbiB0byBydW4gb24gSUU4IGFuZCBvbGRlciBicm93
        c2VycyB0aGVuIHlvdSBzaG91bGQgdXNlIHRoaXMKICBtZXRob2QgYW55dGlt
        ZSB5b3Ugd2FudCB0byByZXRyaWV2ZSBhIHByb3BlcnR5IG9uIGFuIG9iamVj
        dCB0aGF0IHlvdSBkb24ndAogIGtub3cgZm9yIHN1cmUgaXMgcHJpdmF0ZS4g
        KFByb3BlcnRpZXMgYmVnaW5uaW5nIHdpdGggYW4gdW5kZXJzY29yZSAnXycK
        ICBhcmUgY29uc2lkZXJlZCBwcml2YXRlLikKCiAgT24gYWxsIG5ld2VyIGJy
        b3dzZXJzLCB5b3Ugb25seSBuZWVkIHRvIHVzZSB0aGlzIG1ldGhvZCB0byBy
        ZXRyaWV2ZQogIHByb3BlcnRpZXMgaWYgdGhlIHByb3BlcnR5IG1pZ2h0IG5v
        dCBiZSBkZWZpbmVkIG9uIHRoZSBvYmplY3QgYW5kIHlvdSB3YW50CiAgdG8g
        cmVzcGVjdCB0aGUgYHVua25vd25Qcm9wZXJ0eWAgaGFuZGxlci4gT3RoZXJ3
        aXNlIHlvdSBjYW4gaWdub3JlIHRoaXMKICBtZXRob2QuCgogIE5vdGUgdGhh
        dCBpZiB0aGUgb2JqZWN0IGl0c2VsZiBpcyBgdW5kZWZpbmVkYCwgdGhpcyBt
        ZXRob2Qgd2lsbCB0aHJvdwogIGFuIGVycm9yLgoKICBAbWV0aG9kIGdldAog
        IEBmb3IgRW1iZXIKICBAcGFyYW0ge09iamVjdH0gb2JqIFRoZSBvYmplY3Qg
        dG8gcmV0cmlldmUgZnJvbS4KICBAcGFyYW0ge1N0cmluZ30ga2V5TmFtZSBU
        aGUgcHJvcGVydHkga2V5IHRvIHJldHJpZXZlCiAgQHJldHVybiB7T2JqZWN0
        fSB0aGUgcHJvcGVydHkgdmFsdWUgb3IgYG51bGxgLgoqLwpnZXQgPSBmdW5j
        dGlvbiBnZXQob2JqLCBrZXlOYW1lKSB7CiAgLy8gSGVscGVycyB0aGF0IG9w
        ZXJhdGUgd2l0aCAndGhpcycgd2l0aGluIGFuICNlYWNoCiAgaWYgKGtleU5h
        bWUgPT09ICcnKSB7CiAgICByZXR1cm4gb2JqOwogIH0KCiAgaWYgKCFrZXlO
        YW1lICYmICdzdHJpbmcnPT09dHlwZW9mIG9iaikgewogICAga2V5TmFtZSA9
        IG9iajsKICAgIG9iaiA9IG51bGw7CiAgfQoKICBFbWJlci5hc3NlcnQoIkNh
        bm5vdCBjYWxsIGdldCB3aXRoICIrIGtleU5hbWUgKyIga2V5LiIsICEha2V5
        TmFtZSk7CiAgRW1iZXIuYXNzZXJ0KCJDYW5ub3QgY2FsbCBnZXQgd2l0aCAn
        Iisga2V5TmFtZSArIicgb24gYW4gdW5kZWZpbmVkIG9iamVjdC4iLCBvYmog
        IT09IHVuZGVmaW5lZCk7CgogIGlmIChvYmogPT09IG51bGwgfHwga2V5TmFt
        ZS5pbmRleE9mKCcuJykgIT09IC0xKSB7CiAgICByZXR1cm4gZ2V0UGF0aChv
        YmosIGtleU5hbWUpOwogIH0KCiAgdmFyIG1ldGEgPSBvYmpbTUVUQV9LRVld
        LCBkZXNjID0gbWV0YSAmJiBtZXRhLmRlc2NzW2tleU5hbWVdLCByZXQ7CiAg
        aWYgKGRlc2MpIHsKICAgIHJldHVybiBkZXNjLmdldChvYmosIGtleU5hbWUp
        OwogIH0gZWxzZSB7CiAgICBpZiAoTUFOREFUT1JZX1NFVFRFUiAmJiBtZXRh
        ICYmIG1ldGEud2F0Y2hpbmdba2V5TmFtZV0gPiAwKSB7CiAgICAgIHJldCA9
        IG1ldGEudmFsdWVzW2tleU5hbWVdOwogICAgfSBlbHNlIHsKICAgICAgcmV0
        ID0gb2JqW2tleU5hbWVdOwogICAgfQoKICAgIGlmIChyZXQgPT09IHVuZGVm
        aW5lZCAmJgogICAgICAgICdvYmplY3QnID09PSB0eXBlb2Ygb2JqICYmICEo
        a2V5TmFtZSBpbiBvYmopICYmICdmdW5jdGlvbicgPT09IHR5cGVvZiBvYmou
        dW5rbm93blByb3BlcnR5KSB7CiAgICAgIHJldHVybiBvYmoudW5rbm93blBy
        b3BlcnR5KGtleU5hbWUpOwogICAgfQoKICAgIHJldHVybiByZXQ7CiAgfQp9
        OwoKLy8gQ3VycmVudGx5IHVzZWQgb25seSBieSBFbWJlciBEYXRhIHRlc3Rz
        CmlmIChFbWJlci5jb25maWcub3ZlcnJpZGVBY2Nlc3NvcnMpIHsKICBFbWJl
        ci5nZXQgPSBnZXQ7CiAgRW1iZXIuY29uZmlnLm92ZXJyaWRlQWNjZXNzb3Jz
        KCk7CiAgZ2V0ID0gRW1iZXIuZ2V0Owp9CgovKioKICBOb3JtYWxpemVzIGEg
        dGFyZ2V0L3BhdGggcGFpciB0byByZWZsZWN0IHRoYXQgYWN0dWFsIHRhcmdl
        dC9wYXRoIHRoYXQgc2hvdWxkCiAgYmUgb2JzZXJ2ZWQsIGV0Yy4gVGhpcyB0
        YWtlcyBpbnRvIGFjY291bnQgcGFzc2luZyBpbiBnbG9iYWwgcHJvcGVydHkK
        ICBwYXRocyAoaS5lLiBhIHBhdGggYmVnaW5uaW5nIHdpdGggYSBjYXB0aWFs
        IGxldHRlciBub3QgZGVmaW5lZCBvbiB0aGUKICB0YXJnZXQpIGFuZCAqIHNl
        cGFyYXRvcnMuCgogIEBwcml2YXRlCiAgQG1ldGhvZCBub3JtYWxpemVUdXBs
        ZQogIEBmb3IgRW1iZXIKICBAcGFyYW0ge09iamVjdH0gdGFyZ2V0IFRoZSBj
        dXJyZW50IHRhcmdldC4gTWF5IGJlIGBudWxsYC4KICBAcGFyYW0ge1N0cmlu
        Z30gcGF0aCBBIHBhdGggb24gdGhlIHRhcmdldCBvciBhIGdsb2JhbCBwcm9w
        ZXJ0eSBwYXRoLgogIEByZXR1cm4ge0FycmF5fSBhIHRlbXBvcmFyeSBhcnJh
        eSB3aXRoIHRoZSBub3JtYWxpemVkIHRhcmdldC9wYXRoIHBhaXIuCiovCnZh
        ciBub3JtYWxpemVUdXBsZSA9IEVtYmVyLm5vcm1hbGl6ZVR1cGxlID0gZnVu
        Y3Rpb24odGFyZ2V0LCBwYXRoKSB7CiAgdmFyIGhhc1RoaXMgID0gSEFTX1RI
        SVMudGVzdChwYXRoKSwKICAgICAgaXNHbG9iYWwgPSAhaGFzVGhpcyAmJiBJ
        U19HTE9CQUxfUEFUSC50ZXN0KHBhdGgpLAogICAgICBrZXk7CgogIGlmICgh
        dGFyZ2V0IHx8IGlzR2xvYmFsKSB0YXJnZXQgPSBFbWJlci5sb29rdXA7CiAg
        aWYgKGhhc1RoaXMpIHBhdGggPSBwYXRoLnNsaWNlKDUpOwoKICBpZiAodGFy
        Z2V0ID09PSBFbWJlci5sb29rdXApIHsKICAgIGtleSA9IHBhdGgubWF0Y2go
        RklSU1RfS0VZKVswXTsKICAgIHRhcmdldCA9IGdldCh0YXJnZXQsIGtleSk7
        CiAgICBwYXRoICAgPSBwYXRoLnNsaWNlKGtleS5sZW5ndGgrMSk7CiAgfQoK
        ICAvLyBtdXN0IHJldHVybiBzb21lIGtpbmQgb2YgcGF0aCB0byBiZSB2YWxp
        ZCBlbHNlIG90aGVyIHRoaW5ncyB3aWxsIGJyZWFrLgogIGlmICghcGF0aCB8
        fCBwYXRoLmxlbmd0aD09PTApIHRocm93IG5ldyBFbWJlci5FcnJvcignUGF0
        aCBjYW5ub3QgYmUgZW1wdHknKTsKCiAgcmV0dXJuIFsgdGFyZ2V0LCBwYXRo
        IF07Cn07Cgp2YXIgZ2V0UGF0aCA9IEVtYmVyLl9nZXRQYXRoID0gZnVuY3Rp
        b24ocm9vdCwgcGF0aCkgewogIHZhciBoYXNUaGlzLCBwYXJ0cywgdHVwbGUs
        IGlkeCwgbGVuOwoKICAvLyBJZiB0aGVyZSBpcyBubyByb290IGFuZCBwYXRo
        IGlzIGEga2V5IG5hbWUsIHJldHVybiB0aGF0CiAgLy8gcHJvcGVydHkgZnJv
        bSB0aGUgZ2xvYmFsIG9iamVjdC4KICAvLyBFLmcuIGdldCgnRW1iZXInKSAt
        PiBFbWJlcgogIGlmIChyb290ID09PSBudWxsICYmIHBhdGguaW5kZXhPZign
        LicpID09PSAtMSkgeyByZXR1cm4gZ2V0KEVtYmVyLmxvb2t1cCwgcGF0aCk7
        IH0KCiAgLy8gZGV0ZWN0IGNvbXBsaWNhdGVkIHBhdGhzIGFuZCBub3JtYWxp
        emUgdGhlbQogIGhhc1RoaXMgID0gSEFTX1RISVMudGVzdChwYXRoKTsKCiAg
        aWYgKCFyb290IHx8IGhhc1RoaXMpIHsKICAgIHR1cGxlID0gbm9ybWFsaXpl
        VHVwbGUocm9vdCwgcGF0aCk7CiAgICByb290ID0gdHVwbGVbMF07CiAgICBw
        YXRoID0gdHVwbGVbMV07CiAgICB0dXBsZS5sZW5ndGggPSAwOwogIH0KCiAg
        cGFydHMgPSBwYXRoLnNwbGl0KCIuIik7CiAgbGVuID0gcGFydHMubGVuZ3Ro
        OwogIGZvciAoaWR4ID0gMDsgcm9vdCAhPSBudWxsICYmIGlkeCA8IGxlbjsg
        aWR4KyspIHsKICAgIHJvb3QgPSBnZXQocm9vdCwgcGFydHNbaWR4XSwgdHJ1
        ZSk7CiAgICBpZiAocm9vdCAmJiByb290LmlzRGVzdHJveWVkKSB7IHJldHVy
        biB1bmRlZmluZWQ7IH0KICB9CiAgcmV0dXJuIHJvb3Q7Cn07CgpFbWJlci5n
        ZXRXaXRoRGVmYXVsdCA9IGZ1bmN0aW9uKHJvb3QsIGtleSwgZGVmYXVsdFZh
        bHVlKSB7CiAgdmFyIHZhbHVlID0gZ2V0KHJvb3QsIGtleSk7CgogIGlmICh2
        YWx1ZSA9PT0gdW5kZWZpbmVkKSB7IHJldHVybiBkZWZhdWx0VmFsdWU7IH0K
        ICByZXR1cm4gdmFsdWU7Cn07CgoKRW1iZXIuZ2V0ID0gZ2V0OwoKfSkoKTsK
        CgoKKGZ1bmN0aW9uKCkgewovKioKQG1vZHVsZSBlbWJlci1tZXRhbAoqLwoK
        dmFyIG9fY3JlYXRlID0gRW1iZXIuY3JlYXRlLAogICAgbWV0YUZvciA9IEVt
        YmVyLm1ldGEsCiAgICBNRVRBX0tFWSA9IEVtYmVyLk1FVEFfS0VZLAogICAg
        YV9zbGljZSA9IFtdLnNsaWNlLAogICAgLyogbGlzdGVuZXIgZmxhZ3MgKi8K
        ICAgIE9OQ0UgPSAxLCBTVVNQRU5ERUQgPSAyOwoKLyoKICBUaGUgZXZlbnQg
        c3lzdGVtIHVzZXMgYSBzZXJpZXMgb2YgbmVzdGVkIGhhc2hlcyB0byBzdG9y
        ZSBsaXN0ZW5lcnMgb24gYW4KICBvYmplY3QuIFdoZW4gYSBsaXN0ZW5lciBp
        cyByZWdpc3RlcmVkLCBvciB3aGVuIGFuIGV2ZW50IGFycml2ZXMsIHRoZXNl
        CiAgaGFzaGVzIGFyZSBjb25zdWx0ZWQgdG8gZGV0ZXJtaW5lIHdoaWNoIHRh
        cmdldCBhbmQgYWN0aW9uIHBhaXIgdG8gaW52b2tlLgoKICBUaGUgaGFzaGVz
        IGFyZSBzdG9yZWQgaW4gdGhlIG9iamVjdCdzIG1ldGEgaGFzaCwgYW5kIGxv
        b2sgbGlrZSB0aGlzOgoKICAgICAgLy8gT2JqZWN0J3MgbWV0YSBoYXNoCiAg
        ICAgIHsKICAgICAgICBsaXN0ZW5lcnM6IHsgICAgICAgLy8gdmFyaWFibGUg
        bmFtZTogYGxpc3RlbmVyU2V0YAogICAgICAgICAgImZvbzpjaGFuZ2VkIjog
        WyAvLyB2YXJpYWJsZSBuYW1lOiBgYWN0aW9uc2AKICAgICAgICAgICAgdGFy
        Z2V0LCBtZXRob2QsIGZsYWdzCiAgICAgICAgICBdCiAgICAgICAgfQogICAg
        ICB9CgoqLwoKZnVuY3Rpb24gaW5kZXhPZihhcnJheSwgdGFyZ2V0LCBtZXRo
        b2QpIHsKICB2YXIgaW5kZXggPSAtMTsKICBmb3IgKHZhciBpID0gMCwgbCA9
        IGFycmF5Lmxlbmd0aDsgaSA8IGw7IGkgKz0gMykgewogICAgaWYgKHRhcmdl
        dCA9PT0gYXJyYXlbaV0gJiYgbWV0aG9kID09PSBhcnJheVtpKzFdKSB7IGlu
        ZGV4ID0gaTsgYnJlYWs7IH0KICB9CiAgcmV0dXJuIGluZGV4Owp9CgpmdW5j
        dGlvbiBhY3Rpb25zRm9yKG9iaiwgZXZlbnROYW1lKSB7CiAgdmFyIG1ldGEg
        PSBtZXRhRm9yKG9iaiwgdHJ1ZSksCiAgICAgIGFjdGlvbnM7CgogIGlmICgh
        bWV0YS5saXN0ZW5lcnMpIHsgbWV0YS5saXN0ZW5lcnMgPSB7fTsgfQoKICBp
        ZiAoIW1ldGEuaGFzT3duUHJvcGVydHkoJ2xpc3RlbmVycycpKSB7CiAgICAv
        LyBzZXR1cCBpbmhlcml0ZWQgY29weSBvZiB0aGUgbGlzdGVuZXJzIG9iamVj
        dAogICAgbWV0YS5saXN0ZW5lcnMgPSBvX2NyZWF0ZShtZXRhLmxpc3RlbmVy
        cyk7CiAgfQoKICBhY3Rpb25zID0gbWV0YS5saXN0ZW5lcnNbZXZlbnROYW1l
        XTsKCiAgLy8gaWYgdGhlcmUgYXJlIGFjdGlvbnMsIGJ1dCB0aGUgZXZlbnRO
        YW1lIGRvZXNuJ3QgZXhpc3QgaW4gb3VyIGxpc3RlbmVycywgdGhlbiBjb3B5
        IHRoZW0gZnJvbSB0aGUgcHJvdG90eXBlCiAgaWYgKGFjdGlvbnMgJiYgIW1l
        dGEubGlzdGVuZXJzLmhhc093blByb3BlcnR5KGV2ZW50TmFtZSkpIHsKICAg
        IGFjdGlvbnMgPSBtZXRhLmxpc3RlbmVyc1tldmVudE5hbWVdID0gbWV0YS5s
        aXN0ZW5lcnNbZXZlbnROYW1lXS5zbGljZSgpOwogIH0gZWxzZSBpZiAoIWFj
        dGlvbnMpIHsKICAgIGFjdGlvbnMgPSBtZXRhLmxpc3RlbmVyc1tldmVudE5h
        bWVdID0gW107CiAgfQoKICByZXR1cm4gYWN0aW9uczsKfQoKZnVuY3Rpb24g
        YWN0aW9uc1VuaW9uKG9iaiwgZXZlbnROYW1lLCBvdGhlckFjdGlvbnMpIHsK
        ICB2YXIgbWV0YSA9IG9ialtNRVRBX0tFWV0sCiAgICAgIGFjdGlvbnMgPSBt
        ZXRhICYmIG1ldGEubGlzdGVuZXJzICYmIG1ldGEubGlzdGVuZXJzW2V2ZW50
        TmFtZV07CgogIGlmICghYWN0aW9ucykgeyByZXR1cm47IH0KICBmb3IgKHZh
        ciBpID0gYWN0aW9ucy5sZW5ndGggLSAzOyBpID49IDA7IGkgLT0gMykgewog
        ICAgdmFyIHRhcmdldCA9IGFjdGlvbnNbaV0sCiAgICAgICAgbWV0aG9kID0g
        YWN0aW9uc1tpKzFdLAogICAgICAgIGZsYWdzID0gYWN0aW9uc1tpKzJdLAog
        ICAgICAgIGFjdGlvbkluZGV4ID0gaW5kZXhPZihvdGhlckFjdGlvbnMsIHRh
        cmdldCwgbWV0aG9kKTsKCiAgICBpZiAoYWN0aW9uSW5kZXggPT09IC0xKSB7
        CiAgICAgIG90aGVyQWN0aW9ucy5wdXNoKHRhcmdldCwgbWV0aG9kLCBmbGFn
        cyk7CiAgICB9CiAgfQp9CgpmdW5jdGlvbiBhY3Rpb25zRGlmZihvYmosIGV2
        ZW50TmFtZSwgb3RoZXJBY3Rpb25zKSB7CiAgdmFyIG1ldGEgPSBvYmpbTUVU
        QV9LRVldLAogICAgICBhY3Rpb25zID0gbWV0YSAmJiBtZXRhLmxpc3RlbmVy
        cyAmJiBtZXRhLmxpc3RlbmVyc1tldmVudE5hbWVdLAogICAgICBkaWZmQWN0
        aW9ucyA9IFtdOwoKICBpZiAoIWFjdGlvbnMpIHsgcmV0dXJuOyB9CiAgZm9y
        ICh2YXIgaSA9IGFjdGlvbnMubGVuZ3RoIC0gMzsgaSA+PSAwOyBpIC09IDMp
        IHsKICAgIHZhciB0YXJnZXQgPSBhY3Rpb25zW2ldLAogICAgICAgIG1ldGhv
        ZCA9IGFjdGlvbnNbaSsxXSwKICAgICAgICBmbGFncyA9IGFjdGlvbnNbaSsy
        XSwKICAgICAgICBhY3Rpb25JbmRleCA9IGluZGV4T2Yob3RoZXJBY3Rpb25z
        LCB0YXJnZXQsIG1ldGhvZCk7CgogICAgaWYgKGFjdGlvbkluZGV4ICE9PSAt
        MSkgeyBjb250aW51ZTsgfQoKICAgIG90aGVyQWN0aW9ucy5wdXNoKHRhcmdl
        dCwgbWV0aG9kLCBmbGFncyk7CiAgICBkaWZmQWN0aW9ucy5wdXNoKHRhcmdl
        dCwgbWV0aG9kLCBmbGFncyk7CiAgfQoKICByZXR1cm4gZGlmZkFjdGlvbnM7
        Cn0KCi8qKgogIEFkZCBhbiBldmVudCBsaXN0ZW5lcgoKICBAbWV0aG9kIGFk
        ZExpc3RlbmVyCiAgQGZvciBFbWJlcgogIEBwYXJhbSBvYmoKICBAcGFyYW0g
        e1N0cmluZ30gZXZlbnROYW1lCiAgQHBhcmFtIHtPYmplY3R8RnVuY3Rpb259
        IHRhcmdldE9yTWV0aG9kIEEgdGFyZ2V0IG9iamVjdCBvciBhIGZ1bmN0aW9u
        CiAgQHBhcmFtIHtGdW5jdGlvbnxTdHJpbmd9IG1ldGhvZCBBIGZ1bmN0aW9u
        IG9yIHRoZSBuYW1lIG9mIGEgZnVuY3Rpb24gdG8gYmUgY2FsbGVkIG9uIGB0
        YXJnZXRgCiAgQHBhcmFtIHtCb29sZWFufSBvbmNlIEEgZmxhZyB3aGV0aGVy
        IGEgZnVuY3Rpb24gc2hvdWxkIG9ubHkgYmUgY2FsbGVkIG9uY2UKKi8KZnVu
        Y3Rpb24gYWRkTGlzdGVuZXIob2JqLCBldmVudE5hbWUsIHRhcmdldCwgbWV0
        aG9kLCBvbmNlKSB7CiAgRW1iZXIuYXNzZXJ0KCJZb3UgbXVzdCBwYXNzIGF0
        IGxlYXN0IGFuIG9iamVjdCBhbmQgZXZlbnQgbmFtZSB0byBFbWJlci5hZGRM
        aXN0ZW5lciIsICEhb2JqICYmICEhZXZlbnROYW1lKTsKCiAgaWYgKCFtZXRo
        b2QgJiYgJ2Z1bmN0aW9uJyA9PT0gdHlwZW9mIHRhcmdldCkgewogICAgbWV0
        aG9kID0gdGFyZ2V0OwogICAgdGFyZ2V0ID0gbnVsbDsKICB9CgogIHZhciBh
        Y3Rpb25zID0gYWN0aW9uc0ZvcihvYmosIGV2ZW50TmFtZSksCiAgICAgIGFj
        dGlvbkluZGV4ID0gaW5kZXhPZihhY3Rpb25zLCB0YXJnZXQsIG1ldGhvZCks
        CiAgICAgIGZsYWdzID0gMDsKCiAgaWYgKG9uY2UpIGZsYWdzIHw9IE9OQ0U7
        CgogIGlmIChhY3Rpb25JbmRleCAhPT0gLTEpIHsgcmV0dXJuOyB9CgogIGFj
        dGlvbnMucHVzaCh0YXJnZXQsIG1ldGhvZCwgZmxhZ3MpOwoKICBpZiAoJ2Z1
        bmN0aW9uJyA9PT0gdHlwZW9mIG9iai5kaWRBZGRMaXN0ZW5lcikgewogICAg
        b2JqLmRpZEFkZExpc3RlbmVyKGV2ZW50TmFtZSwgdGFyZ2V0LCBtZXRob2Qp
        OwogIH0KfQoKLyoqCiAgUmVtb3ZlIGFuIGV2ZW50IGxpc3RlbmVyCgogIEFy
        Z3VtZW50cyBzaG91bGQgbWF0Y2ggdGhvc2UgcGFzc2VkIHRvIGBFbWJlci5h
        ZGRMaXN0ZW5lcmAuCgogIEBtZXRob2QgcmVtb3ZlTGlzdGVuZXIKICBAZm9y
        IEVtYmVyCiAgQHBhcmFtIG9iagogIEBwYXJhbSB7U3RyaW5nfSBldmVudE5h
        bWUKICBAcGFyYW0ge09iamVjdHxGdW5jdGlvbn0gdGFyZ2V0T3JNZXRob2Qg
        QSB0YXJnZXQgb2JqZWN0IG9yIGEgZnVuY3Rpb24KICBAcGFyYW0ge0Z1bmN0
        aW9ufFN0cmluZ30gbWV0aG9kIEEgZnVuY3Rpb24gb3IgdGhlIG5hbWUgb2Yg
        YSBmdW5jdGlvbiB0byBiZSBjYWxsZWQgb24gYHRhcmdldGAKKi8KZnVuY3Rp
        b24gcmVtb3ZlTGlzdGVuZXIob2JqLCBldmVudE5hbWUsIHRhcmdldCwgbWV0
        aG9kKSB7CiAgRW1iZXIuYXNzZXJ0KCJZb3UgbXVzdCBwYXNzIGF0IGxlYXN0
        IGFuIG9iamVjdCBhbmQgZXZlbnQgbmFtZSB0byBFbWJlci5yZW1vdmVMaXN0
        ZW5lciIsICEhb2JqICYmICEhZXZlbnROYW1lKTsKCiAgaWYgKCFtZXRob2Qg
        JiYgJ2Z1bmN0aW9uJyA9PT0gdHlwZW9mIHRhcmdldCkgewogICAgbWV0aG9k
        ID0gdGFyZ2V0OwogICAgdGFyZ2V0ID0gbnVsbDsKICB9CgogIGZ1bmN0aW9u
        IF9yZW1vdmVMaXN0ZW5lcih0YXJnZXQsIG1ldGhvZCkgewogICAgdmFyIGFj
        dGlvbnMgPSBhY3Rpb25zRm9yKG9iaiwgZXZlbnROYW1lKSwKICAgICAgICBh
        Y3Rpb25JbmRleCA9IGluZGV4T2YoYWN0aW9ucywgdGFyZ2V0LCBtZXRob2Qp
        OwoKICAgIC8vIGFjdGlvbiBkb2Vzbid0IGV4aXN0LCBnaXZlIHVwIHNpbGVu
        dGx5CiAgICBpZiAoYWN0aW9uSW5kZXggPT09IC0xKSB7IHJldHVybjsgfQoK
        ICAgIGFjdGlvbnMuc3BsaWNlKGFjdGlvbkluZGV4LCAzKTsKCiAgICBpZiAo
        J2Z1bmN0aW9uJyA9PT0gdHlwZW9mIG9iai5kaWRSZW1vdmVMaXN0ZW5lcikg
        ewogICAgICBvYmouZGlkUmVtb3ZlTGlzdGVuZXIoZXZlbnROYW1lLCB0YXJn
        ZXQsIG1ldGhvZCk7CiAgICB9CiAgfQoKICBpZiAobWV0aG9kKSB7CiAgICBf
        cmVtb3ZlTGlzdGVuZXIodGFyZ2V0LCBtZXRob2QpOwogIH0gZWxzZSB7CiAg
        ICB2YXIgbWV0YSA9IG9ialtNRVRBX0tFWV0sCiAgICAgICAgYWN0aW9ucyA9
        IG1ldGEgJiYgbWV0YS5saXN0ZW5lcnMgJiYgbWV0YS5saXN0ZW5lcnNbZXZl
        bnROYW1lXTsKCiAgICBpZiAoIWFjdGlvbnMpIHsgcmV0dXJuOyB9CiAgICBm
        b3IgKHZhciBpID0gYWN0aW9ucy5sZW5ndGggLSAzOyBpID49IDA7IGkgLT0g
        MykgewogICAgICBfcmVtb3ZlTGlzdGVuZXIoYWN0aW9uc1tpXSwgYWN0aW9u
        c1tpKzFdKTsKICAgIH0KICB9Cn0KCi8qKgogIFN1c3BlbmQgbGlzdGVuZXIg
        ZHVyaW5nIGNhbGxiYWNrLgoKICBUaGlzIHNob3VsZCBvbmx5IGJlIHVzZWQg
        YnkgdGhlIHRhcmdldCBvZiB0aGUgZXZlbnQgbGlzdGVuZXIKICB3aGVuIGl0
        IGlzIHRha2luZyBhbiBhY3Rpb24gdGhhdCB3b3VsZCBjYXVzZSB0aGUgZXZl
        bnQsIGUuZy4KICBhbiBvYmplY3QgbWlnaHQgc3VzcGVuZCBpdHMgcHJvcGVy
        dHkgY2hhbmdlIGxpc3RlbmVyIHdoaWxlIGl0IGlzCiAgc2V0dGluZyB0aGF0
        IHByb3BlcnR5LgoKICBAcHJpdmF0ZQogIEBtZXRob2Qgc3VzcGVuZExpc3Rl
        bmVyCiAgQGZvciBFbWJlcgogIEBwYXJhbSBvYmoKICBAcGFyYW0ge1N0cmlu
        Z30gZXZlbnROYW1lCiAgQHBhcmFtIHtPYmplY3R8RnVuY3Rpb259IHRhcmdl
        dE9yTWV0aG9kIEEgdGFyZ2V0IG9iamVjdCBvciBhIGZ1bmN0aW9uCiAgQHBh
        cmFtIHtGdW5jdGlvbnxTdHJpbmd9IG1ldGhvZCBBIGZ1bmN0aW9uIG9yIHRo
        ZSBuYW1lIG9mIGEgZnVuY3Rpb24gdG8gYmUgY2FsbGVkIG9uIGB0YXJnZXRg
        CiAgQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2sKKi8KZnVuY3Rpb24gc3Vz
        cGVuZExpc3RlbmVyKG9iaiwgZXZlbnROYW1lLCB0YXJnZXQsIG1ldGhvZCwg
        Y2FsbGJhY2spIHsKICBpZiAoIW1ldGhvZCAmJiAnZnVuY3Rpb24nID09PSB0
        eXBlb2YgdGFyZ2V0KSB7CiAgICBtZXRob2QgPSB0YXJnZXQ7CiAgICB0YXJn
        ZXQgPSBudWxsOwogIH0KCiAgdmFyIGFjdGlvbnMgPSBhY3Rpb25zRm9yKG9i
        aiwgZXZlbnROYW1lKSwKICAgICAgYWN0aW9uSW5kZXggPSBpbmRleE9mKGFj
        dGlvbnMsIHRhcmdldCwgbWV0aG9kKTsKCiAgaWYgKGFjdGlvbkluZGV4ICE9
        PSAtMSkgewogICAgYWN0aW9uc1thY3Rpb25JbmRleCsyXSB8PSBTVVNQRU5E
        RUQ7IC8vIG1hcmsgdGhlIGFjdGlvbiBhcyBzdXNwZW5kZWQKICB9CgogIGZ1
        bmN0aW9uIHRyeWFibGUoKSAgIHsgcmV0dXJuIGNhbGxiYWNrLmNhbGwodGFy
        Z2V0KTsgfQogIGZ1bmN0aW9uIGZpbmFsaXplcigpIHsgaWYgKGFjdGlvbklu
        ZGV4ICE9PSAtMSkgeyBhY3Rpb25zW2FjdGlvbkluZGV4KzJdICY9IH5TVVNQ
        RU5ERUQ7IH0gfQoKICByZXR1cm4gRW1iZXIudHJ5RmluYWxseSh0cnlhYmxl
        LCBmaW5hbGl6ZXIpOwp9CgovKioKICBTdXNwZW5kcyBtdWx0aXBsZSBsaXN0
        ZW5lcnMgZHVyaW5nIGEgY2FsbGJhY2suCgogIEBwcml2YXRlCiAgQG1ldGhv
        ZCBzdXNwZW5kTGlzdGVuZXJzCiAgQGZvciBFbWJlcgogIEBwYXJhbSBvYmoK
        ICBAcGFyYW0ge0FycmF5fSBldmVudE5hbWUgQXJyYXkgb2YgZXZlbnQgbmFt
        ZXMKICBAcGFyYW0ge09iamVjdHxGdW5jdGlvbn0gdGFyZ2V0T3JNZXRob2Qg
        QSB0YXJnZXQgb2JqZWN0IG9yIGEgZnVuY3Rpb24KICBAcGFyYW0ge0Z1bmN0
        aW9ufFN0cmluZ30gbWV0aG9kIEEgZnVuY3Rpb24gb3IgdGhlIG5hbWUgb2Yg
        YSBmdW5jdGlvbiB0byBiZSBjYWxsZWQgb24gYHRhcmdldGAKICBAcGFyYW0g
        e0Z1bmN0aW9ufSBjYWxsYmFjawoqLwpmdW5jdGlvbiBzdXNwZW5kTGlzdGVu
        ZXJzKG9iaiwgZXZlbnROYW1lcywgdGFyZ2V0LCBtZXRob2QsIGNhbGxiYWNr
        KSB7CiAgaWYgKCFtZXRob2QgJiYgJ2Z1bmN0aW9uJyA9PT0gdHlwZW9mIHRh
        cmdldCkgewogICAgbWV0aG9kID0gdGFyZ2V0OwogICAgdGFyZ2V0ID0gbnVs
        bDsKICB9CgogIHZhciBzdXNwZW5kZWRBY3Rpb25zID0gW10sCiAgICAgIGFj
        dGlvbnNMaXN0ID0gW10sCiAgICAgIGV2ZW50TmFtZSwgYWN0aW9ucywgaSwg
        bDsKCiAgZm9yIChpPTAsIGw9ZXZlbnROYW1lcy5sZW5ndGg7IGk8bDsgaSsr
        KSB7CiAgICBldmVudE5hbWUgPSBldmVudE5hbWVzW2ldOwogICAgYWN0aW9u
        cyA9IGFjdGlvbnNGb3Iob2JqLCBldmVudE5hbWUpOwogICAgdmFyIGFjdGlv
        bkluZGV4ID0gaW5kZXhPZihhY3Rpb25zLCB0YXJnZXQsIG1ldGhvZCk7Cgog
        ICAgaWYgKGFjdGlvbkluZGV4ICE9PSAtMSkgewogICAgICBhY3Rpb25zW2Fj
        dGlvbkluZGV4KzJdIHw9IFNVU1BFTkRFRDsKICAgICAgc3VzcGVuZGVkQWN0
        aW9ucy5wdXNoKGFjdGlvbkluZGV4KTsKICAgICAgYWN0aW9uc0xpc3QucHVz
        aChhY3Rpb25zKTsKICAgIH0KICB9CgogIGZ1bmN0aW9uIHRyeWFibGUoKSB7
        IHJldHVybiBjYWxsYmFjay5jYWxsKHRhcmdldCk7IH0KCiAgZnVuY3Rpb24g
        ZmluYWxpemVyKCkgewogICAgZm9yICh2YXIgaSA9IDAsIGwgPSBzdXNwZW5k
        ZWRBY3Rpb25zLmxlbmd0aDsgaSA8IGw7IGkrKykgewogICAgICB2YXIgYWN0
        aW9uSW5kZXggPSBzdXNwZW5kZWRBY3Rpb25zW2ldOwogICAgICBhY3Rpb25z
        TGlzdFtpXVthY3Rpb25JbmRleCsyXSAmPSB+U1VTUEVOREVEOwogICAgfQog
        IH0KCiAgcmV0dXJuIEVtYmVyLnRyeUZpbmFsbHkodHJ5YWJsZSwgZmluYWxp
        emVyKTsKfQoKLyoqCiAgUmV0dXJuIGEgbGlzdCBvZiBjdXJyZW50bHkgd2F0
        Y2hlZCBldmVudHMKCiAgQHByaXZhdGUKICBAbWV0aG9kIHdhdGNoZWRFdmVu
        dHMKICBAZm9yIEVtYmVyCiAgQHBhcmFtIG9iagoqLwpmdW5jdGlvbiB3YXRj
        aGVkRXZlbnRzKG9iaikgewogIHZhciBsaXN0ZW5lcnMgPSBvYmpbTUVUQV9L
        RVldLmxpc3RlbmVycywgcmV0ID0gW107CgogIGlmIChsaXN0ZW5lcnMpIHsK
        ICAgIGZvcih2YXIgZXZlbnROYW1lIGluIGxpc3RlbmVycykgewogICAgICBp
        ZiAobGlzdGVuZXJzW2V2ZW50TmFtZV0pIHsgcmV0LnB1c2goZXZlbnROYW1l
        KTsgfQogICAgfQogIH0KICByZXR1cm4gcmV0Owp9CgovKioKICBTZW5kIGFu
        IGV2ZW50LiBUaGUgZXhlY3V0aW9uIG9mIHN1c3BlbmRlZCBsaXN0ZW5lcnMK
        ICBpcyBza2lwcGVkLCBhbmQgb25jZSBsaXN0ZW5lcnMgYXJlIHJlbW92ZWQu
        IEEgbGlzdGVuZXIgd2l0aG91dAogIGEgdGFyZ2V0IGlzIGV4ZWN1dGVkIG9u
        IHRoZSBwYXNzZWQgb2JqZWN0LiBJZiBhbiBhcnJheSBvZiBhY3Rpb25zCiAg
        aXMgbm90IHBhc3NlZCwgdGhlIGFjdGlvbnMgc3RvcmVkIG9uIHRoZSBwYXNz
        ZWQgb2JqZWN0IGFyZSBpbnZva2VkLgoKICBAbWV0aG9kIHNlbmRFdmVudAog
        IEBmb3IgRW1iZXIKICBAcGFyYW0gb2JqCiAgQHBhcmFtIHtTdHJpbmd9IGV2
        ZW50TmFtZQogIEBwYXJhbSB7QXJyYXl9IHBhcmFtcyBPcHRpb25hbCBwYXJh
        bWV0ZXJzIGZvciBlYWNoIGxpc3RlbmVyLgogIEBwYXJhbSB7QXJyYXl9IGFj
        dGlvbnMgT3B0aW9uYWwgYXJyYXkgb2YgYWN0aW9ucyAobGlzdGVuZXJzKS4K
        ICBAcmV0dXJuIHRydWUKKi8KZnVuY3Rpb24gc2VuZEV2ZW50KG9iaiwgZXZl
        bnROYW1lLCBwYXJhbXMsIGFjdGlvbnMpIHsKICAvLyBmaXJzdCBnaXZlIG9i
        amVjdCBhIGNoYW5jZSB0byBoYW5kbGUgaXQKICBpZiAob2JqICE9PSBFbWJl
        ciAmJiAnZnVuY3Rpb24nID09PSB0eXBlb2Ygb2JqLnNlbmRFdmVudCkgewog
        ICAgb2JqLnNlbmRFdmVudChldmVudE5hbWUsIHBhcmFtcyk7CiAgfQoKICBp
        ZiAoIWFjdGlvbnMpIHsKICAgIHZhciBtZXRhID0gb2JqW01FVEFfS0VZXTsK
        ICAgIGFjdGlvbnMgPSBtZXRhICYmIG1ldGEubGlzdGVuZXJzICYmIG1ldGEu
        bGlzdGVuZXJzW2V2ZW50TmFtZV07CiAgfQoKICBpZiAoIWFjdGlvbnMpIHsg
        cmV0dXJuOyB9CgogIGZvciAodmFyIGkgPSBhY3Rpb25zLmxlbmd0aCAtIDM7
        IGkgPj0gMDsgaSAtPSAzKSB7IC8vIGxvb3BpbmcgaW4gcmV2ZXJzZSBmb3Ig
        b25jZSBsaXN0ZW5lcnMKICAgIHZhciB0YXJnZXQgPSBhY3Rpb25zW2ldLCBt
        ZXRob2QgPSBhY3Rpb25zW2krMV0sIGZsYWdzID0gYWN0aW9uc1tpKzJdOwog
        ICAgaWYgKCFtZXRob2QpIHsgY29udGludWU7IH0KICAgIGlmIChmbGFncyAm
        IFNVU1BFTkRFRCkgeyBjb250aW51ZTsgfQogICAgaWYgKGZsYWdzICYgT05D
        RSkgeyByZW1vdmVMaXN0ZW5lcihvYmosIGV2ZW50TmFtZSwgdGFyZ2V0LCBt
        ZXRob2QpOyB9CiAgICBpZiAoIXRhcmdldCkgeyB0YXJnZXQgPSBvYmo7IH0K
        ICAgIGlmICgnc3RyaW5nJyA9PT0gdHlwZW9mIG1ldGhvZCkgeyBtZXRob2Qg
        PSB0YXJnZXRbbWV0aG9kXTsgfQogICAgaWYgKHBhcmFtcykgewogICAgICBt
        ZXRob2QuYXBwbHkodGFyZ2V0LCBwYXJhbXMpOwogICAgfSBlbHNlIHsKICAg
        ICAgbWV0aG9kLmNhbGwodGFyZ2V0KTsKICAgIH0KICB9CiAgcmV0dXJuIHRy
        dWU7Cn0KCi8qKgogIEBwcml2YXRlCiAgQG1ldGhvZCBoYXNMaXN0ZW5lcnMK
        ICBAZm9yIEVtYmVyCiAgQHBhcmFtIG9iagogIEBwYXJhbSB7U3RyaW5nfSBl
        dmVudE5hbWUKKi8KZnVuY3Rpb24gaGFzTGlzdGVuZXJzKG9iaiwgZXZlbnRO
        YW1lKSB7CiAgdmFyIG1ldGEgPSBvYmpbTUVUQV9LRVldLAogICAgICBhY3Rp
        b25zID0gbWV0YSAmJiBtZXRhLmxpc3RlbmVycyAmJiBtZXRhLmxpc3RlbmVy
        c1tldmVudE5hbWVdOwoKICByZXR1cm4gISEoYWN0aW9ucyAmJiBhY3Rpb25z
        Lmxlbmd0aCk7Cn0KCi8qKgogIEBwcml2YXRlCiAgQG1ldGhvZCBsaXN0ZW5l
        cnNGb3IKICBAZm9yIEVtYmVyCiAgQHBhcmFtIG9iagogIEBwYXJhbSB7U3Ry
        aW5nfSBldmVudE5hbWUKKi8KZnVuY3Rpb24gbGlzdGVuZXJzRm9yKG9iaiwg
        ZXZlbnROYW1lKSB7CiAgdmFyIHJldCA9IFtdOwogIHZhciBtZXRhID0gb2Jq
        W01FVEFfS0VZXSwKICAgICAgYWN0aW9ucyA9IG1ldGEgJiYgbWV0YS5saXN0
        ZW5lcnMgJiYgbWV0YS5saXN0ZW5lcnNbZXZlbnROYW1lXTsKCiAgaWYgKCFh
        Y3Rpb25zKSB7IHJldHVybiByZXQ7IH0KCiAgZm9yICh2YXIgaSA9IDAsIGwg
        PSBhY3Rpb25zLmxlbmd0aDsgaSA8IGw7IGkgKz0gMykgewogICAgdmFyIHRh
        cmdldCA9IGFjdGlvbnNbaV0sCiAgICAgICAgbWV0aG9kID0gYWN0aW9uc1tp
        KzFdOwogICAgcmV0LnB1c2goW3RhcmdldCwgbWV0aG9kXSk7CiAgfQoKICBy
        ZXR1cm4gcmV0Owp9CgovKioKICBEZWZpbmUgYSBwcm9wZXJ0eSBhcyBhIGZ1
        bmN0aW9uIHRoYXQgc2hvdWxkIGJlIGV4ZWN1dGVkIHdoZW4KICBhIHNwZWNp
        ZmllZCBldmVudCBvciBldmVudHMgYXJlIHRyaWdnZXJlZC4KCgogIGBgYCBq
        YXZhc2NyaXB0CiAgdmFyIEpvYiA9IEVtYmVyLk9iamVjdC5leHRlbmQoewog
        ICAgbG9nQ29tcGxldGVkOiBFbWJlci5vbignY29tcGxldGVkJywgZnVuY3Rp
        b24oKXsKICAgICAgY29uc29sZS5sb2coJ0pvYiBjb21wbGV0ZWQhJyk7CiAg
        ICB9KQogIH0pOwogIHZhciBqb2IgPSBKb2IuY3JlYXRlKCk7CiAgRW1iZXIu
        c2VuZEV2ZW50KGpvYiwgJ2NvbXBsZXRlZCcpOyAvLyBMb2dzICJKb2IgY29t
        cGxldGVkISIKIGBgYAoKICBAbWV0aG9kIG9uCiAgQGZvciBFbWJlcgogIEBw
        YXJhbSB7U3RyaW5nfSBldmVudE5hbWVzKgogIEBwYXJhbSB7RnVuY3Rpb259
        IGZ1bmMKICBAcmV0dXJuIGZ1bmMKKi8KRW1iZXIub24gPSBmdW5jdGlvbigp
        ewogIHZhciBmdW5jID0gYV9zbGljZS5jYWxsKGFyZ3VtZW50cywgLTEpWzBd
        LAogICAgICBldmVudHMgPSBhX3NsaWNlLmNhbGwoYXJndW1lbnRzLCAwLCAt
        MSk7CiAgZnVuYy5fX2VtYmVyX2xpc3RlbnNfXyA9IGV2ZW50czsKICByZXR1
        cm4gZnVuYzsKfTsKCkVtYmVyLmFkZExpc3RlbmVyID0gYWRkTGlzdGVuZXI7
        CkVtYmVyLnJlbW92ZUxpc3RlbmVyID0gcmVtb3ZlTGlzdGVuZXI7CkVtYmVy
        Ll9zdXNwZW5kTGlzdGVuZXIgPSBzdXNwZW5kTGlzdGVuZXI7CkVtYmVyLl9z
        dXNwZW5kTGlzdGVuZXJzID0gc3VzcGVuZExpc3RlbmVyczsKRW1iZXIuc2Vu
        ZEV2ZW50ID0gc2VuZEV2ZW50OwpFbWJlci5oYXNMaXN0ZW5lcnMgPSBoYXNM
        aXN0ZW5lcnM7CkVtYmVyLndhdGNoZWRFdmVudHMgPSB3YXRjaGVkRXZlbnRz
        OwpFbWJlci5saXN0ZW5lcnNGb3IgPSBsaXN0ZW5lcnNGb3I7CkVtYmVyLmxp
        c3RlbmVyc0RpZmYgPSBhY3Rpb25zRGlmZjsKRW1iZXIubGlzdGVuZXJzVW5p
        b24gPSBhY3Rpb25zVW5pb247Cgp9KSgpOwoKCgooZnVuY3Rpb24oKSB7CnZh
        ciBndWlkRm9yID0gRW1iZXIuZ3VpZEZvciwKICAgIHNlbmRFdmVudCA9IEVt
        YmVyLnNlbmRFdmVudDsKCi8qCiAgdGhpcy5vYnNlcnZlclNldCA9IHsKICAg
        IFtzZW5kZXJHdWlkXTogeyAvLyB2YXJpYWJsZSBuYW1lOiBga2V5U2V0YAog
        ICAgICBba2V5TmFtZV06IGxpc3RJbmRleAogICAgfQogIH0sCiAgdGhpcy5v
        YnNlcnZlcnMgPSBbCiAgICB7CiAgICAgIHNlbmRlcjogb2JqLAogICAgICBr
        ZXlOYW1lOiBrZXlOYW1lLAogICAgICBldmVudE5hbWU6IGV2ZW50TmFtZSwK
        ICAgICAgbGlzdGVuZXJzOiBbCiAgICAgICAgW3RhcmdldCwgbWV0aG9kLCBm
        bGFnc10KICAgICAgXQogICAgfSwKICAgIC4uLgogIF0KKi8KdmFyIE9ic2Vy
        dmVyU2V0ID0gRW1iZXIuX09ic2VydmVyU2V0ID0gZnVuY3Rpb24oKSB7CiAg
        dGhpcy5jbGVhcigpOwp9OwoKT2JzZXJ2ZXJTZXQucHJvdG90eXBlLmFkZCA9
        IGZ1bmN0aW9uKHNlbmRlciwga2V5TmFtZSwgZXZlbnROYW1lKSB7CiAgdmFy
        IG9ic2VydmVyU2V0ID0gdGhpcy5vYnNlcnZlclNldCwKICAgICAgb2JzZXJ2
        ZXJzID0gdGhpcy5vYnNlcnZlcnMsCiAgICAgIHNlbmRlckd1aWQgPSBndWlk
        Rm9yKHNlbmRlciksCiAgICAgIGtleVNldCA9IG9ic2VydmVyU2V0W3NlbmRl
        ckd1aWRdLAogICAgICBpbmRleDsKCiAgaWYgKCFrZXlTZXQpIHsKICAgIG9i
        c2VydmVyU2V0W3NlbmRlckd1aWRdID0ga2V5U2V0ID0ge307CiAgfQogIGlu
        ZGV4ID0ga2V5U2V0W2tleU5hbWVdOwogIGlmIChpbmRleCA9PT0gdW5kZWZp
        bmVkKSB7CiAgICBpbmRleCA9IG9ic2VydmVycy5wdXNoKHsKICAgICAgc2Vu
        ZGVyOiBzZW5kZXIsCiAgICAgIGtleU5hbWU6IGtleU5hbWUsCiAgICAgIGV2
        ZW50TmFtZTogZXZlbnROYW1lLAogICAgICBsaXN0ZW5lcnM6IFtdCiAgICB9
        KSAtIDE7CiAgICBrZXlTZXRba2V5TmFtZV0gPSBpbmRleDsKICB9CiAgcmV0
        dXJuIG9ic2VydmVyc1tpbmRleF0ubGlzdGVuZXJzOwp9OwoKT2JzZXJ2ZXJT
        ZXQucHJvdG90eXBlLmZsdXNoID0gZnVuY3Rpb24oKSB7CiAgdmFyIG9ic2Vy
        dmVycyA9IHRoaXMub2JzZXJ2ZXJzLCBpLCBsZW4sIG9ic2VydmVyLCBzZW5k
        ZXI7CiAgdGhpcy5jbGVhcigpOwogIGZvciAoaT0wLCBsZW49b2JzZXJ2ZXJz
        Lmxlbmd0aDsgaSA8IGxlbjsgKytpKSB7CiAgICBvYnNlcnZlciA9IG9ic2Vy
        dmVyc1tpXTsKICAgIHNlbmRlciA9IG9ic2VydmVyLnNlbmRlcjsKICAgIGlm
        IChzZW5kZXIuaXNEZXN0cm95aW5nIHx8IHNlbmRlci5pc0Rlc3Ryb3llZCkg
        eyBjb250aW51ZTsgfQogICAgc2VuZEV2ZW50KHNlbmRlciwgb2JzZXJ2ZXIu
        ZXZlbnROYW1lLCBbc2VuZGVyLCBvYnNlcnZlci5rZXlOYW1lXSwgb2JzZXJ2
        ZXIubGlzdGVuZXJzKTsKICB9Cn07CgpPYnNlcnZlclNldC5wcm90b3R5cGUu
        Y2xlYXIgPSBmdW5jdGlvbigpIHsKICB0aGlzLm9ic2VydmVyU2V0ID0ge307
        CiAgdGhpcy5vYnNlcnZlcnMgPSBbXTsKfTsKfSkoKTsKCgoKKGZ1bmN0aW9u
        KCkgewp2YXIgTUVUQV9LRVkgPSBFbWJlci5NRVRBX0tFWSwKICAgIGd1aWRG
        b3IgPSBFbWJlci5ndWlkRm9yLAogICAgdHJ5RmluYWxseSA9IEVtYmVyLnRy
        eUZpbmFsbHksCiAgICBzZW5kRXZlbnQgPSBFbWJlci5zZW5kRXZlbnQsCiAg
        ICBsaXN0ZW5lcnNVbmlvbiA9IEVtYmVyLmxpc3RlbmVyc1VuaW9uLAogICAg
        bGlzdGVuZXJzRGlmZiA9IEVtYmVyLmxpc3RlbmVyc0RpZmYsCiAgICBPYnNl
        cnZlclNldCA9IEVtYmVyLl9PYnNlcnZlclNldCwKICAgIGJlZm9yZU9ic2Vy
        dmVyU2V0ID0gbmV3IE9ic2VydmVyU2V0KCksCiAgICBvYnNlcnZlclNldCA9
        IG5ldyBPYnNlcnZlclNldCgpLAogICAgZGVmZXJyZWQgPSAwOwoKLy8gLi4u
        Li4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4u
        Li4uLi4uLi4uLgovLyBQUk9QRVJUWSBDSEFOR0VTCi8vCgovKioKICBUaGlz
        IGZ1bmN0aW9uIGlzIGNhbGxlZCBqdXN0IGJlZm9yZSBhbiBvYmplY3QgcHJv
        cGVydHkgaXMgYWJvdXQgdG8gY2hhbmdlLgogIEl0IHdpbGwgbm90aWZ5IGFu
        eSBiZWZvcmUgb2JzZXJ2ZXJzIGFuZCBwcmVwYXJlIGNhY2hlcyBhbW9uZyBv
        dGhlciB0aGluZ3MuCgogIE5vcm1hbGx5IHlvdSB3aWxsIG5vdCBuZWVkIHRv
        IGNhbGwgdGhpcyBtZXRob2QgZGlyZWN0bHkgYnV0IGlmIGZvciBzb21lCiAg
        cmVhc29uIHlvdSBjYW4ndCBkaXJlY3RseSB3YXRjaCBhIHByb3BlcnR5IHlv
        dSBjYW4gaW52b2tlIHRoaXMgbWV0aG9kCiAgbWFudWFsbHkgYWxvbmcgd2l0
        aCBgRW1iZXIucHJvcGVydHlEaWRDaGFuZ2UoKWAgd2hpY2ggeW91IHNob3Vs
        ZCBjYWxsIGp1c3QKICBhZnRlciB0aGUgcHJvcGVydHkgdmFsdWUgY2hhbmdl
        cy4KCiAgQG1ldGhvZCBwcm9wZXJ0eVdpbGxDaGFuZ2UKICBAZm9yIEVtYmVy
        CiAgQHBhcmFtIHtPYmplY3R9IG9iaiBUaGUgb2JqZWN0IHdpdGggdGhlIHBy
        b3BlcnR5IHRoYXQgd2lsbCBjaGFuZ2UKICBAcGFyYW0ge1N0cmluZ30ga2V5
        TmFtZSBUaGUgcHJvcGVydHkga2V5IChvciBwYXRoKSB0aGF0IHdpbGwgY2hh
        bmdlLgogIEByZXR1cm4ge3ZvaWR9CiovCmZ1bmN0aW9uIHByb3BlcnR5V2ls
        bENoYW5nZShvYmosIGtleU5hbWUpIHsKICB2YXIgbSA9IG9ialtNRVRBX0tF
        WV0sCiAgICAgIHdhdGNoaW5nID0gKG0gJiYgbS53YXRjaGluZ1trZXlOYW1l
        XSA+IDApIHx8IGtleU5hbWUgPT09ICdsZW5ndGgnLAogICAgICBwcm90byA9
        IG0gJiYgbS5wcm90bywKICAgICAgZGVzYyA9IG0gJiYgbS5kZXNjc1trZXlO
        YW1lXTsKCiAgaWYgKCF3YXRjaGluZykgeyByZXR1cm47IH0KICBpZiAocHJv
        dG8gPT09IG9iaikgeyByZXR1cm47IH0KICBpZiAoZGVzYyAmJiBkZXNjLndp
        bGxDaGFuZ2UpIHsgZGVzYy53aWxsQ2hhbmdlKG9iaiwga2V5TmFtZSk7IH0K
        ICBkZXBlbmRlbnRLZXlzV2lsbENoYW5nZShvYmosIGtleU5hbWUsIG0pOwog
        IGNoYWluc1dpbGxDaGFuZ2Uob2JqLCBrZXlOYW1lLCBtKTsKICBub3RpZnlC
        ZWZvcmVPYnNlcnZlcnMob2JqLCBrZXlOYW1lKTsKfQpFbWJlci5wcm9wZXJ0
        eVdpbGxDaGFuZ2UgPSBwcm9wZXJ0eVdpbGxDaGFuZ2U7CgovKioKICBUaGlz
        IGZ1bmN0aW9uIGlzIGNhbGxlZCBqdXN0IGFmdGVyIGFuIG9iamVjdCBwcm9w
        ZXJ0eSBoYXMgY2hhbmdlZC4KICBJdCB3aWxsIG5vdGlmeSBhbnkgb2JzZXJ2
        ZXJzIGFuZCBjbGVhciBjYWNoZXMgYW1vbmcgb3RoZXIgdGhpbmdzLgoKICBO
        b3JtYWxseSB5b3Ugd2lsbCBub3QgbmVlZCB0byBjYWxsIHRoaXMgbWV0aG9k
        IGRpcmVjdGx5IGJ1dCBpZiBmb3Igc29tZQogIHJlYXNvbiB5b3UgY2FuJ3Qg
        ZGlyZWN0bHkgd2F0Y2ggYSBwcm9wZXJ0eSB5b3UgY2FuIGludm9rZSB0aGlz
        IG1ldGhvZAogIG1hbnVhbGx5IGFsb25nIHdpdGggYEVtYmVyLnByb3BlcnR5
        V2lsbENoYW5nZSgpYCB3aGljaCB5b3Ugc2hvdWxkIGNhbGwganVzdAogIGJl
        Zm9yZSB0aGUgcHJvcGVydHkgdmFsdWUgY2hhbmdlcy4KCiAgQG1ldGhvZCBw
        cm9wZXJ0eURpZENoYW5nZQogIEBmb3IgRW1iZXIKICBAcGFyYW0ge09iamVj
        dH0gb2JqIFRoZSBvYmplY3Qgd2l0aCB0aGUgcHJvcGVydHkgdGhhdCB3aWxs
        IGNoYW5nZQogIEBwYXJhbSB7U3RyaW5nfSBrZXlOYW1lIFRoZSBwcm9wZXJ0
        eSBrZXkgKG9yIHBhdGgpIHRoYXQgd2lsbCBjaGFuZ2UuCiAgQHJldHVybiB7
        dm9pZH0KKi8KZnVuY3Rpb24gcHJvcGVydHlEaWRDaGFuZ2Uob2JqLCBrZXlO
        YW1lKSB7CiAgdmFyIG0gPSBvYmpbTUVUQV9LRVldLAogICAgICB3YXRjaGlu
        ZyA9IChtICYmIG0ud2F0Y2hpbmdba2V5TmFtZV0gPiAwKSB8fCBrZXlOYW1l
        ID09PSAnbGVuZ3RoJywKICAgICAgcHJvdG8gPSBtICYmIG0ucHJvdG8sCiAg
        ICAgIGRlc2MgPSBtICYmIG0uZGVzY3Nba2V5TmFtZV07CgogIGlmIChwcm90
        byA9PT0gb2JqKSB7IHJldHVybjsgfQoKICAvLyBzaG91bGRuJ3QgdGhpcyBt
        ZWFuIHRoYXQgd2UncmUgd2F0Y2hpbmcgdGhpcyBrZXk/CiAgaWYgKGRlc2Mg
        JiYgZGVzYy5kaWRDaGFuZ2UpIHsgZGVzYy5kaWRDaGFuZ2Uob2JqLCBrZXlO
        YW1lKTsgfQogIGlmICghd2F0Y2hpbmcgJiYga2V5TmFtZSAhPT0gJ2xlbmd0
        aCcpIHsgcmV0dXJuOyB9CgogIGRlcGVuZGVudEtleXNEaWRDaGFuZ2Uob2Jq
        LCBrZXlOYW1lLCBtKTsKICBjaGFpbnNEaWRDaGFuZ2Uob2JqLCBrZXlOYW1l
        LCBtLCBmYWxzZSk7CiAgbm90aWZ5T2JzZXJ2ZXJzKG9iaiwga2V5TmFtZSk7
        Cn0KRW1iZXIucHJvcGVydHlEaWRDaGFuZ2UgPSBwcm9wZXJ0eURpZENoYW5n
        ZTsKCnZhciBXSUxMX1NFRU4sIERJRF9TRUVOOwoKLy8gY2FsbGVkIHdoZW5l
        dmVyIGEgcHJvcGVydHkgaXMgYWJvdXQgdG8gY2hhbmdlIHRvIGNsZWFyIHRo
        ZSBjYWNoZSBvZiBhbnkgZGVwZW5kZW50IGtleXMgKGFuZCBub3RpZnkgdGhv
        c2UgcHJvcGVydGllcyBvZiBjaGFuZ2VzLCBldGMuLi4pCmZ1bmN0aW9uIGRl
        cGVuZGVudEtleXNXaWxsQ2hhbmdlKG9iaiwgZGVwS2V5LCBtZXRhKSB7CiAg
        aWYgKG9iai5pc0Rlc3Ryb3lpbmcpIHsgcmV0dXJuOyB9CgogIHZhciBzZWVu
        ID0gV0lMTF9TRUVOLCB0b3AgPSAhc2VlbjsKICBpZiAodG9wKSB7IHNlZW4g
        PSBXSUxMX1NFRU4gPSB7fTsgfQogIGl0ZXJEZXBzKHByb3BlcnR5V2lsbENo
        YW5nZSwgb2JqLCBkZXBLZXksIHNlZW4sIG1ldGEpOwogIGlmICh0b3ApIHsg
        V0lMTF9TRUVOID0gbnVsbDsgfQp9CgovLyBjYWxsZWQgd2hlbmV2ZXIgYSBw
        cm9wZXJ0eSBoYXMganVzdCBjaGFuZ2VkIHRvIHVwZGF0ZSBkZXBlbmRlbnQg
        a2V5cwpmdW5jdGlvbiBkZXBlbmRlbnRLZXlzRGlkQ2hhbmdlKG9iaiwgZGVw
        S2V5LCBtZXRhKSB7CiAgaWYgKG9iai5pc0Rlc3Ryb3lpbmcpIHsgcmV0dXJu
        OyB9CgogIHZhciBzZWVuID0gRElEX1NFRU4sIHRvcCA9ICFzZWVuOwogIGlm
        ICh0b3ApIHsgc2VlbiA9IERJRF9TRUVOID0ge307IH0KICBpdGVyRGVwcyhw
        cm9wZXJ0eURpZENoYW5nZSwgb2JqLCBkZXBLZXksIHNlZW4sIG1ldGEpOwog
        IGlmICh0b3ApIHsgRElEX1NFRU4gPSBudWxsOyB9Cn0KCmZ1bmN0aW9uIGl0
        ZXJEZXBzKG1ldGhvZCwgb2JqLCBkZXBLZXksIHNlZW4sIG1ldGEpIHsKICB2
        YXIgZ3VpZCA9IGd1aWRGb3Iob2JqKTsKICBpZiAoIXNlZW5bZ3VpZF0pIHNl
        ZW5bZ3VpZF0gPSB7fTsKICBpZiAoc2VlbltndWlkXVtkZXBLZXldKSByZXR1
        cm47CiAgc2VlbltndWlkXVtkZXBLZXldID0gdHJ1ZTsKCiAgdmFyIGRlcHMg
        PSBtZXRhLmRlcHM7CiAgZGVwcyA9IGRlcHMgJiYgZGVwc1tkZXBLZXldOwog
        IGlmIChkZXBzKSB7CiAgICBmb3IodmFyIGtleSBpbiBkZXBzKSB7CiAgICAg
        IHZhciBkZXNjID0gbWV0YS5kZXNjc1trZXldOwogICAgICBpZiAoZGVzYyAm
        JiBkZXNjLl9zdXNwZW5kZWQgPT09IG9iaikgY29udGludWU7CiAgICAgIG1l
        dGhvZChvYmosIGtleSk7CiAgICB9CiAgfQp9CgpmdW5jdGlvbiBjaGFpbnNX
        aWxsQ2hhbmdlKG9iaiwga2V5TmFtZSwgbSkgewogIGlmICghKG0uaGFzT3du
        UHJvcGVydHkoJ2NoYWluV2F0Y2hlcnMnKSAmJgogICAgICAgIG0uY2hhaW5X
        YXRjaGVyc1trZXlOYW1lXSkpIHsKICAgIHJldHVybjsKICB9CgogIHZhciBu
        b2RlcyA9IG0uY2hhaW5XYXRjaGVyc1trZXlOYW1lXSwKICAgICAgZXZlbnRz
        ID0gW10sCiAgICAgIGksIGw7CgogIGZvcihpID0gMCwgbCA9IG5vZGVzLmxl
        bmd0aDsgaSA8IGw7IGkrKykgewogICAgbm9kZXNbaV0ud2lsbENoYW5nZShl
        dmVudHMpOwogIH0KCiAgZm9yIChpID0gMCwgbCA9IGV2ZW50cy5sZW5ndGg7
        IGkgPCBsOyBpICs9IDIpIHsKICAgIHByb3BlcnR5V2lsbENoYW5nZShldmVu
        dHNbaV0sIGV2ZW50c1tpKzFdKTsKICB9Cn0KCmZ1bmN0aW9uIGNoYWluc0Rp
        ZENoYW5nZShvYmosIGtleU5hbWUsIG0sIHN1cHByZXNzRXZlbnRzKSB7CiAg
        aWYgKCEobSAmJiBtLmhhc093blByb3BlcnR5KCdjaGFpbldhdGNoZXJzJykg
        JiYKICAgICAgICBtLmNoYWluV2F0Y2hlcnNba2V5TmFtZV0pKSB7CiAgICBy
        ZXR1cm47CiAgfQoKICB2YXIgbm9kZXMgPSBtLmNoYWluV2F0Y2hlcnNba2V5
        TmFtZV0sCiAgICAgIGV2ZW50cyA9IHN1cHByZXNzRXZlbnRzID8gbnVsbCA6
        IFtdLAogICAgICBpLCBsOwoKICBmb3IoaSA9IDAsIGwgPSBub2Rlcy5sZW5n
        dGg7IGkgPCBsOyBpKyspIHsKICAgIG5vZGVzW2ldLmRpZENoYW5nZShldmVu
        dHMpOwogIH0KCiAgaWYgKHN1cHByZXNzRXZlbnRzKSB7CiAgICByZXR1cm47
        CiAgfQoKICBmb3IgKGkgPSAwLCBsID0gZXZlbnRzLmxlbmd0aDsgaSA8IGw7
        IGkgKz0gMikgewogICAgcHJvcGVydHlEaWRDaGFuZ2UoZXZlbnRzW2ldLCBl
        dmVudHNbaSsxXSk7CiAgfQp9CgpFbWJlci5vdmVycmlkZUNoYWlucyA9IGZ1
        bmN0aW9uKG9iaiwga2V5TmFtZSwgbSkgewogIGNoYWluc0RpZENoYW5nZShv
        YmosIGtleU5hbWUsIG0sIHRydWUpOwp9OwoKLyoqCiAgQG1ldGhvZCBiZWdp
        blByb3BlcnR5Q2hhbmdlcwogIEBjaGFpbmFibGUKICBAcHJpdmF0ZQoqLwpm
        dW5jdGlvbiBiZWdpblByb3BlcnR5Q2hhbmdlcygpIHsKICBkZWZlcnJlZCsr
        Owp9CgpFbWJlci5iZWdpblByb3BlcnR5Q2hhbmdlcyA9IGJlZ2luUHJvcGVy
        dHlDaGFuZ2VzOwoKLyoqCiAgQG1ldGhvZCBlbmRQcm9wZXJ0eUNoYW5nZXMK
        ICBAcHJpdmF0ZQoqLwpmdW5jdGlvbiBlbmRQcm9wZXJ0eUNoYW5nZXMoKSB7
        CiAgZGVmZXJyZWQtLTsKICBpZiAoZGVmZXJyZWQ8PTApIHsKICAgIGJlZm9y
        ZU9ic2VydmVyU2V0LmNsZWFyKCk7CiAgICBvYnNlcnZlclNldC5mbHVzaCgp
        OwogIH0KfQoKRW1iZXIuZW5kUHJvcGVydHlDaGFuZ2VzID0gZW5kUHJvcGVy
        dHlDaGFuZ2VzOwoKLyoqCiAgTWFrZSBhIHNlcmllcyBvZiBwcm9wZXJ0eSBj
        aGFuZ2VzIHRvZ2V0aGVyIGluIGFuCiAgZXhjZXB0aW9uLXNhZmUgd2F5LgoK
        ICBgYGBqYXZhc2NyaXB0CiAgRW1iZXIuY2hhbmdlUHJvcGVydGllcyhmdW5j
        dGlvbigpIHsKICAgIG9iajEuc2V0KCdmb28nLCBtYXlCbG93VXBXaGVuU2V0
        KTsKICAgIG9iajIuc2V0KCdiYXInLCBiYXopOwogIH0pOwogIGBgYAoKICBA
        bWV0aG9kIGNoYW5nZVByb3BlcnRpZXMKICBAcGFyYW0ge0Z1bmN0aW9ufSBj
        YWxsYmFjawogIEBwYXJhbSBbYmluZGluZ10KKi8KRW1iZXIuY2hhbmdlUHJv
        cGVydGllcyA9IGZ1bmN0aW9uKGNiLCBiaW5kaW5nKSB7CiAgYmVnaW5Qcm9w
        ZXJ0eUNoYW5nZXMoKTsKICB0cnlGaW5hbGx5KGNiLCBlbmRQcm9wZXJ0eUNo
        YW5nZXMsIGJpbmRpbmcpOwp9OwoKZnVuY3Rpb24gbm90aWZ5QmVmb3JlT2Jz
        ZXJ2ZXJzKG9iaiwga2V5TmFtZSkgewogIGlmIChvYmouaXNEZXN0cm95aW5n
        KSB7IHJldHVybjsgfQoKICB2YXIgZXZlbnROYW1lID0ga2V5TmFtZSArICc6
        YmVmb3JlJywgbGlzdGVuZXJzLCBkaWZmOwogIGlmIChkZWZlcnJlZCkgewog
        ICAgbGlzdGVuZXJzID0gYmVmb3JlT2JzZXJ2ZXJTZXQuYWRkKG9iaiwga2V5
        TmFtZSwgZXZlbnROYW1lKTsKICAgIGRpZmYgPSBsaXN0ZW5lcnNEaWZmKG9i
        aiwgZXZlbnROYW1lLCBsaXN0ZW5lcnMpOwogICAgc2VuZEV2ZW50KG9iaiwg
        ZXZlbnROYW1lLCBbb2JqLCBrZXlOYW1lXSwgZGlmZik7CiAgfSBlbHNlIHsK
        ICAgIHNlbmRFdmVudChvYmosIGV2ZW50TmFtZSwgW29iaiwga2V5TmFtZV0p
        OwogIH0KfQoKZnVuY3Rpb24gbm90aWZ5T2JzZXJ2ZXJzKG9iaiwga2V5TmFt
        ZSkgewogIGlmIChvYmouaXNEZXN0cm95aW5nKSB7IHJldHVybjsgfQoKICB2
        YXIgZXZlbnROYW1lID0ga2V5TmFtZSArICc6Y2hhbmdlJywgbGlzdGVuZXJz
        OwogIGlmIChkZWZlcnJlZCkgewogICAgbGlzdGVuZXJzID0gb2JzZXJ2ZXJT
        ZXQuYWRkKG9iaiwga2V5TmFtZSwgZXZlbnROYW1lKTsKICAgIGxpc3RlbmVy
        c1VuaW9uKG9iaiwgZXZlbnROYW1lLCBsaXN0ZW5lcnMpOwogIH0gZWxzZSB7
        CiAgICBzZW5kRXZlbnQob2JqLCBldmVudE5hbWUsIFtvYmosIGtleU5hbWVd
        KTsKICB9Cn0KCn0pKCk7CgoKCihmdW5jdGlvbigpIHsKLy8gTUVUQV9LRVkK
        Ly8gX2dldFBhdGgKLy8gcHJvcGVydHlXaWxsQ2hhbmdlLCBwcm9wZXJ0eURp
        ZENoYW5nZQoKdmFyIE1FVEFfS0VZID0gRW1iZXIuTUVUQV9LRVksCiAgICBN
        QU5EQVRPUllfU0VUVEVSID0gRW1iZXIuRU5WLk1BTkRBVE9SWV9TRVRURVIs
        CiAgICBJU19HTE9CQUwgPSAvXihbQS1aJF18KFswLTldW0EtWiRdKSkvLAog
        ICAgZ2V0UGF0aCA9IEVtYmVyLl9nZXRQYXRoOwoKLyoqCiAgU2V0cyB0aGUg
        dmFsdWUgb2YgYSBwcm9wZXJ0eSBvbiBhbiBvYmplY3QsIHJlc3BlY3Rpbmcg
        Y29tcHV0ZWQgcHJvcGVydGllcwogIGFuZCBub3RpZnlpbmcgb2JzZXJ2ZXJz
        IGFuZCBvdGhlciBsaXN0ZW5lcnMgb2YgdGhlIGNoYW5nZS4gSWYgdGhlCiAg
        cHJvcGVydHkgaXMgbm90IGRlZmluZWQgYnV0IHRoZSBvYmplY3QgaW1wbGVt
        ZW50cyB0aGUgYHNldFVua25vd25Qcm9wZXJ0eWAKICBtZXRob2QgdGhlbiB0
        aGF0IHdpbGwgYmUgaW52b2tlZCBhcyB3ZWxsLgoKICBAbWV0aG9kIHNldAog
        IEBmb3IgRW1iZXIKICBAcGFyYW0ge09iamVjdH0gb2JqIFRoZSBvYmplY3Qg
        dG8gbW9kaWZ5LgogIEBwYXJhbSB7U3RyaW5nfSBrZXlOYW1lIFRoZSBwcm9w
        ZXJ0eSBrZXkgdG8gc2V0CiAgQHBhcmFtIHtPYmplY3R9IHZhbHVlIFRoZSB2
        YWx1ZSB0byBzZXQKICBAcmV0dXJuIHtPYmplY3R9IHRoZSBwYXNzZWQgdmFs
        dWUuCiovCnZhciBzZXQgPSBmdW5jdGlvbiBzZXQob2JqLCBrZXlOYW1lLCB2
        YWx1ZSwgdG9sZXJhbnQpIHsKICBpZiAodHlwZW9mIG9iaiA9PT0gJ3N0cmlu
        ZycpIHsKICAgIEVtYmVyLmFzc2VydCgiUGF0aCAnIiArIG9iaiArICInIG11
        c3QgYmUgZ2xvYmFsIGlmIG5vIG9iaiBpcyBnaXZlbi4iLCBJU19HTE9CQUwu
        dGVzdChvYmopKTsKICAgIHZhbHVlID0ga2V5TmFtZTsKICAgIGtleU5hbWUg
        PSBvYmo7CiAgICBvYmogPSBudWxsOwogIH0KCiAgRW1iZXIuYXNzZXJ0KCJD
        YW5ub3QgY2FsbCBzZXQgd2l0aCAiKyBrZXlOYW1lICsiIGtleS4iLCAhIWtl
        eU5hbWUpOwoKICBpZiAoIW9iaiB8fCBrZXlOYW1lLmluZGV4T2YoJy4nKSAh
        PT0gLTEpIHsKICAgIHJldHVybiBzZXRQYXRoKG9iaiwga2V5TmFtZSwgdmFs
        dWUsIHRvbGVyYW50KTsKICB9CgogIEVtYmVyLmFzc2VydCgiWW91IG5lZWQg
        dG8gcHJvdmlkZSBhbiBvYmplY3QgYW5kIGtleSB0byBgc2V0YC4iLCAhIW9i
        aiAmJiBrZXlOYW1lICE9PSB1bmRlZmluZWQpOwogIEVtYmVyLmFzc2VydCgn
        Y2FsbGluZyBzZXQgb24gZGVzdHJveWVkIG9iamVjdCcsICFvYmouaXNEZXN0
        cm95ZWQpOwoKICB2YXIgbWV0YSA9IG9ialtNRVRBX0tFWV0sIGRlc2MgPSBt
        ZXRhICYmIG1ldGEuZGVzY3Nba2V5TmFtZV0sCiAgICAgIGlzVW5rbm93biwg
        Y3VycmVudFZhbHVlOwogIGlmIChkZXNjKSB7CiAgICBkZXNjLnNldChvYmos
        IGtleU5hbWUsIHZhbHVlKTsKICB9IGVsc2UgewogICAgaXNVbmtub3duID0g
        J29iamVjdCcgPT09IHR5cGVvZiBvYmogJiYgIShrZXlOYW1lIGluIG9iaik7
        CgogICAgLy8gc2V0VW5rbm93blByb3BlcnR5IGlzIGNhbGxlZCBpZiBgb2Jq
        YCBpcyBhbiBvYmplY3QsCiAgICAvLyB0aGUgcHJvcGVydHkgZG9lcyBub3Qg
        YWxyZWFkeSBleGlzdCwgYW5kIHRoZQogICAgLy8gYHNldFVua25vd25Qcm9w
        ZXJ0eWAgbWV0aG9kIGV4aXN0cyBvbiB0aGUgb2JqZWN0CiAgICBpZiAoaXNV
        bmtub3duICYmICdmdW5jdGlvbicgPT09IHR5cGVvZiBvYmouc2V0VW5rbm93
        blByb3BlcnR5KSB7CiAgICAgIG9iai5zZXRVbmtub3duUHJvcGVydHkoa2V5
        TmFtZSwgdmFsdWUpOwogICAgfSBlbHNlIGlmIChtZXRhICYmIG1ldGEud2F0
        Y2hpbmdba2V5TmFtZV0gPiAwKSB7CiAgICAgIGlmIChNQU5EQVRPUllfU0VU
        VEVSKSB7CiAgICAgICAgY3VycmVudFZhbHVlID0gbWV0YS52YWx1ZXNba2V5
        TmFtZV07CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY3VycmVudFZhbHVlID0g
        b2JqW2tleU5hbWVdOwogICAgICB9CiAgICAgIC8vIG9ubHkgdHJpZ2dlciBh
        IGNoYW5nZSBpZiB0aGUgdmFsdWUgaGFzIGNoYW5nZWQKICAgICAgaWYgKHZh
        bHVlICE9PSBjdXJyZW50VmFsdWUpIHsKICAgICAgICBFbWJlci5wcm9wZXJ0
        eVdpbGxDaGFuZ2Uob2JqLCBrZXlOYW1lKTsKICAgICAgICBpZiAoTUFOREFU
        T1JZX1NFVFRFUikgewogICAgICAgICAgaWYgKChjdXJyZW50VmFsdWUgPT09
        IHVuZGVmaW5lZCAmJiAhKGtleU5hbWUgaW4gb2JqKSkgfHwgIW9iai5wcm9w
        ZXJ0eUlzRW51bWVyYWJsZShrZXlOYW1lKSkgewogICAgICAgICAgICBFbWJl
        ci5kZWZpbmVQcm9wZXJ0eShvYmosIGtleU5hbWUsIG51bGwsIHZhbHVlKTsg
        Ly8gc2V0dXAgbWFuZGF0b3J5IHNldHRlcgogICAgICAgICAgfSBlbHNlIHsK
        ICAgICAgICAgICAgbWV0YS52YWx1ZXNba2V5TmFtZV0gPSB2YWx1ZTsKICAg
        ICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgb2JqW2tleU5h
        bWVdID0gdmFsdWU7CiAgICAgICAgfQogICAgICAgIEVtYmVyLnByb3BlcnR5
        RGlkQ2hhbmdlKG9iaiwga2V5TmFtZSk7CiAgICAgIH0KICAgIH0gZWxzZSB7
        CiAgICAgIG9ialtrZXlOYW1lXSA9IHZhbHVlOwogICAgfQogIH0KICByZXR1
        cm4gdmFsdWU7Cn07CgovLyBDdXJyZW50bHkgdXNlZCBvbmx5IGJ5IEVtYmVy
        IERhdGEgdGVzdHMKaWYgKEVtYmVyLmNvbmZpZy5vdmVycmlkZUFjY2Vzc29y
        cykgewogIEVtYmVyLnNldCA9IHNldDsKICBFbWJlci5jb25maWcub3ZlcnJp
        ZGVBY2Nlc3NvcnMoKTsKICBzZXQgPSBFbWJlci5zZXQ7Cn0KCmZ1bmN0aW9u
        IHNldFBhdGgocm9vdCwgcGF0aCwgdmFsdWUsIHRvbGVyYW50KSB7CiAgdmFy
        IGtleU5hbWU7CgogIC8vIGdldCB0aGUgbGFzdCBwYXJ0IG9mIHRoZSBwYXRo
        CiAga2V5TmFtZSA9IHBhdGguc2xpY2UocGF0aC5sYXN0SW5kZXhPZignLicp
        ICsgMSk7CgogIC8vIGdldCB0aGUgZmlyc3QgcGFydCBvZiB0aGUgcGFydAog
        IHBhdGggICAgPSAocGF0aCA9PT0ga2V5TmFtZSkgPyBrZXlOYW1lIDogcGF0
        aC5zbGljZSgwLCBwYXRoLmxlbmd0aC0oa2V5TmFtZS5sZW5ndGgrMSkpOwoK
        ICAvLyB1bmxlc3MgdGhlIHBhdGggaXMgdGhpcywgbG9vayB1cCB0aGUgZmly
        c3QgcGFydCB0bwogIC8vIGdldCB0aGUgcm9vdAogIGlmIChwYXRoICE9PSAn
        dGhpcycpIHsKICAgIHJvb3QgPSBnZXRQYXRoKHJvb3QsIHBhdGgpOwogIH0K
        CiAgaWYgKCFrZXlOYW1lIHx8IGtleU5hbWUubGVuZ3RoID09PSAwKSB7CiAg
        ICB0aHJvdyBuZXcgRW1iZXIuRXJyb3IoJ1Byb3BlcnR5IHNldCBmYWlsZWQ6
        IFlvdSBwYXNzZWQgYW4gZW1wdHkgcGF0aCcpOwogIH0KCiAgaWYgKCFyb290
        KSB7CiAgICBpZiAodG9sZXJhbnQpIHsgcmV0dXJuOyB9CiAgICBlbHNlIHsg
        dGhyb3cgbmV3IEVtYmVyLkVycm9yKCdQcm9wZXJ0eSBzZXQgZmFpbGVkOiBv
        YmplY3QgaW4gcGF0aCAiJytwYXRoKyciIGNvdWxkIG5vdCBiZSBmb3VuZCBv
        ciB3YXMgZGVzdHJveWVkLicpOyB9CiAgfQoKICByZXR1cm4gc2V0KHJvb3Qs
        IGtleU5hbWUsIHZhbHVlKTsKfQoKRW1iZXIuc2V0ID0gc2V0OwoKLyoqCiAg
        RXJyb3ItdG9sZXJhbnQgZm9ybSBvZiBgRW1iZXIuc2V0YC4gV2lsbCBub3Qg
        YmxvdyB1cCBpZiBhbnkgcGFydCBvZiB0aGUKICBjaGFpbiBpcyBgdW5kZWZp
        bmVkYCwgYG51bGxgLCBvciBkZXN0cm95ZWQuCgogIFRoaXMgaXMgcHJpbWFy
        aWx5IHVzZWQgd2hlbiBzeW5jaW5nIGJpbmRpbmdzLCB3aGljaCBtYXkgdHJ5
        IHRvIHVwZGF0ZSBhZnRlcgogIGFuIG9iamVjdCBoYXMgYmVlbiBkZXN0cm95
        ZWQuCgogIEBtZXRob2QgdHJ5U2V0CiAgQGZvciBFbWJlcgogIEBwYXJhbSB7
        T2JqZWN0fSBvYmogVGhlIG9iamVjdCB0byBtb2RpZnkuCiAgQHBhcmFtIHtT
        dHJpbmd9IHBhdGggVGhlIHByb3BlcnR5IHBhdGggdG8gc2V0CiAgQHBhcmFt
        IHtPYmplY3R9IHZhbHVlIFRoZSB2YWx1ZSB0byBzZXQKKi8KRW1iZXIudHJ5
        U2V0ID0gZnVuY3Rpb24ocm9vdCwgcGF0aCwgdmFsdWUpIHsKICByZXR1cm4g
        c2V0KHJvb3QsIHBhdGgsIHZhbHVlLCB0cnVlKTsKfTsKCn0pKCk7CgoKCihm
        dW5jdGlvbigpIHsKLyoqCkBtb2R1bGUgZW1iZXItbWV0YWwKKi8KCi8qCiAg
        SmF2YVNjcmlwdCAoYmVmb3JlIEVTNikgZG9lcyBub3QgaGF2ZSBhIE1hcCBp
        bXBsZW1lbnRhdGlvbi4gT2JqZWN0cywKICB3aGljaCBhcmUgb2Z0ZW4gdXNl
        ZCBhcyBkaWN0aW9uYXJpZXMsIG1heSBvbmx5IGhhdmUgU3RyaW5ncyBhcyBr
        ZXlzLgoKICBCZWNhdXNlIEVtYmVyIGhhcyBhIHdheSB0byBnZXQgYSB1bmlx
        dWUgaWRlbnRpZmllciBmb3IgZXZlcnkgb2JqZWN0CiAgdmlhIGBFbWJlci5n
        dWlkRm9yYCwgd2UgY2FuIGltcGxlbWVudCBhIHBlcmZvcm1hbnQgTWFwIHdp
        dGggYXJiaXRyYXJ5CiAga2V5cy4gQmVjYXVzZSBpdCBpcyBjb21tb25seSB1
        c2VkIGluIGxvdy1sZXZlbCBib29ra2VlcGluZywgTWFwIGlzCiAgaW1wbGVt
        ZW50ZWQgYXMgYSBwdXJlIEphdmFTY3JpcHQgb2JqZWN0IGZvciBwZXJmb3Jt
        YW5jZS4KCiAgVGhpcyBpbXBsZW1lbnRhdGlvbiBmb2xsb3dzIHRoZSBjdXJy
        ZW50IGl0ZXJhdGlvbiBvZiB0aGUgRVM2IHByb3Bvc2FsIGZvcgogIG1hcHMg
        KGh0dHA6Ly93aWtpLmVjbWFzY3JpcHQub3JnL2Rva3UucGhwP2lkPWhhcm1v
        bnk6c2ltcGxlX21hcHNfYW5kX3NldHMpLAogIHdpdGggdHdvIGV4Y2VwdGlv
        bnMuIEZpcnN0LCBiZWNhdXNlIHdlIG5lZWQgb3VyIGltcGxlbWVudGF0aW9u
        IHRvIGJlIHBsZWFzYW50CiAgb24gb2xkZXIgYnJvd3NlcnMsIHdlIGRvIG5v
        dCB1c2UgdGhlIGBkZWxldGVgIG5hbWUgKHVzaW5nIGByZW1vdmVgIGluc3Rl
        YWQpLgogIFNlY29uZCwgYXMgd2UgZG8gbm90IGhhdmUgdGhlIGx1eHVyeSBv
        ZiBpbi1WTSBpdGVyYXRpb24sIHdlIGltcGxlbWVudCBhCiAgZm9yRWFjaCBt
        ZXRob2QgZm9yIGl0ZXJhdGlvbi4KCiAgTWFwIGlzIG1vY2tlZCBvdXQgdG8g
        bG9vayBsaWtlIGFuIEVtYmVyIG9iamVjdCwgc28geW91IGNhbiBkbwogIGBF
        bWJlci5NYXAuY3JlYXRlKClgIGZvciBzeW1tZXRyeSB3aXRoIG90aGVyIEVt
        YmVyIGNsYXNzZXMuCiovCnZhciBzZXQgPSBFbWJlci5zZXQsCiAgICBndWlk
        Rm9yID0gRW1iZXIuZ3VpZEZvciwKICAgIGluZGV4T2YgPSBFbWJlci5BcnJh
        eVBvbHlmaWxscy5pbmRleE9mOwoKdmFyIGNvcHkgPSBmdW5jdGlvbihvYmop
        IHsKICB2YXIgb3V0cHV0ID0ge307CgogIGZvciAodmFyIHByb3AgaW4gb2Jq
        KSB7CiAgICBpZiAob2JqLmhhc093blByb3BlcnR5KHByb3ApKSB7IG91dHB1
        dFtwcm9wXSA9IG9ialtwcm9wXTsgfQogIH0KCiAgcmV0dXJuIG91dHB1dDsK
        fTsKCnZhciBjb3B5TWFwID0gZnVuY3Rpb24ob3JpZ2luYWwsIG5ld09iamVj
        dCkgewogIHZhciBrZXlzID0gb3JpZ2luYWwua2V5cy5jb3B5KCksCiAgICAg
        IHZhbHVlcyA9IGNvcHkob3JpZ2luYWwudmFsdWVzKTsKCiAgbmV3T2JqZWN0
        LmtleXMgPSBrZXlzOwogIG5ld09iamVjdC52YWx1ZXMgPSB2YWx1ZXM7CiAg
        bmV3T2JqZWN0Lmxlbmd0aCA9IG9yaWdpbmFsLmxlbmd0aDsKCiAgcmV0dXJu
        IG5ld09iamVjdDsKfTsKCi8qKgogIFRoaXMgY2xhc3MgaXMgdXNlZCBpbnRl
        cm5hbGx5IGJ5IEVtYmVyIGFuZCBFbWJlciBEYXRhLgogIFBsZWFzZSBkbyBu
        b3QgdXNlIGl0IGF0IHRoaXMgdGltZS4gV2UgcGxhbiB0byBjbGVhbiBpdCB1
        cAogIGFuZCBhZGQgbWFueSB0ZXN0cyBzb29uLgoKICBAY2xhc3MgT3JkZXJl
        ZFNldAogIEBuYW1lc3BhY2UgRW1iZXIKICBAY29uc3RydWN0b3IKICBAcHJp
        dmF0ZQoqLwp2YXIgT3JkZXJlZFNldCA9IEVtYmVyLk9yZGVyZWRTZXQgPSBm
        dW5jdGlvbigpIHsKICB0aGlzLmNsZWFyKCk7Cn07CgovKioKICBAbWV0aG9k
        IGNyZWF0ZQogIEBzdGF0aWMKICBAcmV0dXJuIHtFbWJlci5PcmRlcmVkU2V0
        fQoqLwpPcmRlcmVkU2V0LmNyZWF0ZSA9IGZ1bmN0aW9uKCkgewogIHJldHVy
        biBuZXcgT3JkZXJlZFNldCgpOwp9OwoKCk9yZGVyZWRTZXQucHJvdG90eXBl
        ID0gewogIC8qKgogICAgQG1ldGhvZCBjbGVhcgogICovCiAgY2xlYXI6IGZ1
        bmN0aW9uKCkgewogICAgdGhpcy5wcmVzZW5jZVNldCA9IHt9OwogICAgdGhp
        cy5saXN0ID0gW107CiAgfSwKCiAgLyoqCiAgICBAbWV0aG9kIGFkZAogICAg
        QHBhcmFtIG9iagogICovCiAgYWRkOiBmdW5jdGlvbihvYmopIHsKICAgIHZh
        ciBndWlkID0gZ3VpZEZvcihvYmopLAogICAgICAgIHByZXNlbmNlU2V0ID0g
        dGhpcy5wcmVzZW5jZVNldCwKICAgICAgICBsaXN0ID0gdGhpcy5saXN0OwoK
        ICAgIGlmIChndWlkIGluIHByZXNlbmNlU2V0KSB7IHJldHVybjsgfQoKICAg
        IHByZXNlbmNlU2V0W2d1aWRdID0gdHJ1ZTsKICAgIGxpc3QucHVzaChvYmop
        OwogIH0sCgogIC8qKgogICAgQG1ldGhvZCByZW1vdmUKICAgIEBwYXJhbSBv
        YmoKICAqLwogIHJlbW92ZTogZnVuY3Rpb24ob2JqKSB7CiAgICB2YXIgZ3Vp
        ZCA9IGd1aWRGb3Iob2JqKSwKICAgICAgICBwcmVzZW5jZVNldCA9IHRoaXMu
        cHJlc2VuY2VTZXQsCiAgICAgICAgbGlzdCA9IHRoaXMubGlzdDsKCiAgICBk
        ZWxldGUgcHJlc2VuY2VTZXRbZ3VpZF07CgogICAgdmFyIGluZGV4ID0gaW5k
        ZXhPZi5jYWxsKGxpc3QsIG9iaik7CiAgICBpZiAoaW5kZXggPiAtMSkgewog
        ICAgICBsaXN0LnNwbGljZShpbmRleCwgMSk7CiAgICB9CiAgfSwKCiAgLyoq
        CiAgICBAbWV0aG9kIGlzRW1wdHkKICAgIEByZXR1cm4ge0Jvb2xlYW59CiAg
        Ki8KICBpc0VtcHR5OiBmdW5jdGlvbigpIHsKICAgIHJldHVybiB0aGlzLmxp
        c3QubGVuZ3RoID09PSAwOwogIH0sCgogIC8qKgogICAgQG1ldGhvZCBoYXMK
        ICAgIEBwYXJhbSBvYmoKICAgIEByZXR1cm4ge0Jvb2xlYW59CiAgKi8KICBo
        YXM6IGZ1bmN0aW9uKG9iaikgewogICAgdmFyIGd1aWQgPSBndWlkRm9yKG9i
        aiksCiAgICAgICAgcHJlc2VuY2VTZXQgPSB0aGlzLnByZXNlbmNlU2V0OwoK
        ICAgIHJldHVybiBndWlkIGluIHByZXNlbmNlU2V0OwogIH0sCgogIC8qKgog
        ICAgQG1ldGhvZCBmb3JFYWNoCiAgICBAcGFyYW0ge0Z1bmN0aW9ufSBmbgog
        ICAgQHBhcmFtIHNlbGYKICAqLwogIGZvckVhY2g6IGZ1bmN0aW9uKGZuLCBz
        ZWxmKSB7CiAgICAvLyBhbGxvdyBtdXRhdGlvbiBkdXJpbmcgaXRlcmF0aW9u
        CiAgICB2YXIgbGlzdCA9IHRoaXMudG9BcnJheSgpOwoKICAgIGZvciAodmFy
        IGkgPSAwLCBqID0gbGlzdC5sZW5ndGg7IGkgPCBqOyBpKyspIHsKICAgICAg
        Zm4uY2FsbChzZWxmLCBsaXN0W2ldKTsKICAgIH0KICB9LAoKICAvKioKICAg
        IEBtZXRob2QgdG9BcnJheQogICAgQHJldHVybiB7QXJyYXl9CiAgKi8KICB0
        b0FycmF5OiBmdW5jdGlvbigpIHsKICAgIHJldHVybiB0aGlzLmxpc3Quc2xp
        Y2UoKTsKICB9LAoKICAvKioKICAgIEBtZXRob2QgY29weQogICAgQHJldHVy
        biB7RW1iZXIuT3JkZXJlZFNldH0KICAqLwogIGNvcHk6IGZ1bmN0aW9uKCkg
        ewogICAgdmFyIHNldCA9IG5ldyBPcmRlcmVkU2V0KCk7CgogICAgc2V0LnBy
        ZXNlbmNlU2V0ID0gY29weSh0aGlzLnByZXNlbmNlU2V0KTsKICAgIHNldC5s
        aXN0ID0gdGhpcy50b0FycmF5KCk7CgogICAgcmV0dXJuIHNldDsKICB9Cn07
        CgovKioKICBBIE1hcCBzdG9yZXMgdmFsdWVzIGluZGV4ZWQgYnkga2V5cy4g
        VW5saWtlIEphdmFTY3JpcHQncwogIGRlZmF1bHQgT2JqZWN0cywgdGhlIGtl
        eXMgb2YgYSBNYXAgY2FuIGJlIGFueSBKYXZhU2NyaXB0CiAgb2JqZWN0LgoK
        ICBJbnRlcm5hbGx5LCBhIE1hcCBoYXMgdHdvIGRhdGEgc3RydWN0dXJlczoK
        CiAgMS4gYGtleXNgOiBhbiBPcmRlcmVkU2V0IG9mIGFsbCBvZiB0aGUgZXhp
        c3Rpbmcga2V5cwogIDIuIGB2YWx1ZXNgOiBhIEphdmFTY3JpcHQgT2JqZWN0
        IGluZGV4ZWQgYnkgdGhlIGBFbWJlci5ndWlkRm9yKGtleSlgCgogIFdoZW4g
        YSBrZXkvdmFsdWUgcGFpciBpcyBhZGRlZCBmb3IgdGhlIGZpcnN0IHRpbWUs
        IHdlCiAgYWRkIHRoZSBrZXkgdG8gdGhlIGBrZXlzYCBPcmRlcmVkU2V0LCBh
        bmQgY3JlYXRlIG9yCiAgcmVwbGFjZSBhbiBlbnRyeSBpbiBgdmFsdWVzYC4g
        V2hlbiBhbiBlbnRyeSBpcyBkZWxldGVkLAogIHdlIGRlbGV0ZSBpdHMgZW50
        cnkgaW4gYGtleXNgIGFuZCBgdmFsdWVzYC4KCiAgQGNsYXNzIE1hcAogIEBu
        YW1lc3BhY2UgRW1iZXIKICBAcHJpdmF0ZQogIEBjb25zdHJ1Y3RvcgoqLwp2
        YXIgTWFwID0gRW1iZXIuTWFwID0gZnVuY3Rpb24oKSB7CiAgdGhpcy5rZXlz
        ID0gRW1iZXIuT3JkZXJlZFNldC5jcmVhdGUoKTsKICB0aGlzLnZhbHVlcyA9
        IHt9Owp9OwoKLyoqCiAgQG1ldGhvZCBjcmVhdGUKICBAc3RhdGljCiovCk1h
        cC5jcmVhdGUgPSBmdW5jdGlvbigpIHsKICByZXR1cm4gbmV3IE1hcCgpOwp9
        OwoKTWFwLnByb3RvdHlwZSA9IHsKICAvKioKICAgIFRoaXMgcHJvcGVydHkg
        d2lsbCBjaGFuZ2UgYXMgdGhlIG51bWJlciBvZiBvYmplY3RzIGluIHRoZSBt
        YXAgY2hhbmdlcy4KICAgCiAgICBAcHJvcGVydHkgbGVuZ3RoCiAgICBAdHlw
        ZSBudW1iZXIKICAgIEBkZWZhdWx0IDAKICAqLwogIGxlbmd0aDogMCwKICAg
        IAogICAgCiAgLyoqCiAgICBSZXRyaWV2ZSB0aGUgdmFsdWUgYXNzb2NpYXRl
        ZCB3aXRoIGEgZ2l2ZW4ga2V5LgoKICAgIEBtZXRob2QgZ2V0CiAgICBAcGFy
        YW0geyp9IGtleQogICAgQHJldHVybiB7Kn0gdGhlIHZhbHVlIGFzc29jaWF0
        ZWQgd2l0aCB0aGUga2V5LCBvciBgdW5kZWZpbmVkYAogICovCiAgZ2V0OiBm
        dW5jdGlvbihrZXkpIHsKICAgIHZhciB2YWx1ZXMgPSB0aGlzLnZhbHVlcywK
        ICAgICAgICBndWlkID0gZ3VpZEZvcihrZXkpOwoKICAgIHJldHVybiB2YWx1
        ZXNbZ3VpZF07CiAgfSwKCiAgLyoqCiAgICBBZGRzIGEgdmFsdWUgdG8gdGhl
        IG1hcC4gSWYgYSB2YWx1ZSBmb3IgdGhlIGdpdmVuIGtleSBoYXMgYWxyZWFk
        eSBiZWVuCiAgICBwcm92aWRlZCwgdGhlIG5ldyB2YWx1ZSB3aWxsIHJlcGxh
        Y2UgdGhlIG9sZCB2YWx1ZS4KCiAgICBAbWV0aG9kIHNldAogICAgQHBhcmFt
        IHsqfSBrZXkKICAgIEBwYXJhbSB7Kn0gdmFsdWUKICAqLwogIHNldDogZnVu
        Y3Rpb24oa2V5LCB2YWx1ZSkgewogICAgdmFyIGtleXMgPSB0aGlzLmtleXMs
        CiAgICAgICAgdmFsdWVzID0gdGhpcy52YWx1ZXMsCiAgICAgICAgZ3VpZCA9
        IGd1aWRGb3Ioa2V5KTsKCiAgICBrZXlzLmFkZChrZXkpOwogICAgdmFsdWVz
        W2d1aWRdID0gdmFsdWU7CiAgICBzZXQodGhpcywgJ2xlbmd0aCcsIGtleXMu
        bGlzdC5sZW5ndGgpOwogIH0sCgogIC8qKgogICAgUmVtb3ZlcyBhIHZhbHVl
        IGZyb20gdGhlIG1hcCBmb3IgYW4gYXNzb2NpYXRlZCBrZXkuCgogICAgQG1l
        dGhvZCByZW1vdmUKICAgIEBwYXJhbSB7Kn0ga2V5CiAgICBAcmV0dXJuIHtC
        b29sZWFufSB0cnVlIGlmIGFuIGl0ZW0gd2FzIHJlbW92ZWQsIGZhbHNlIG90
        aGVyd2lzZQogICovCiAgcmVtb3ZlOiBmdW5jdGlvbihrZXkpIHsKICAgIC8v
        IGRvbid0IHVzZSBFUzYgImRlbGV0ZSIgYmVjYXVzZSBpdCB3aWxsIGJlIGFu
        bm95aW5nCiAgICAvLyB0byB1c2UgaW4gYnJvd3NlcnMgdGhhdCBhcmUgbm90
        IEVTNiBmcmllbmRseTsKICAgIHZhciBrZXlzID0gdGhpcy5rZXlzLAogICAg
        ICAgIHZhbHVlcyA9IHRoaXMudmFsdWVzLAogICAgICAgIGd1aWQgPSBndWlk
        Rm9yKGtleSk7CgogICAgaWYgKHZhbHVlcy5oYXNPd25Qcm9wZXJ0eShndWlk
        KSkgewogICAgICBrZXlzLnJlbW92ZShrZXkpOwogICAgICBkZWxldGUgdmFs
        dWVzW2d1aWRdOwogICAgICBzZXQodGhpcywgJ2xlbmd0aCcsIGtleXMubGlz
        dC5sZW5ndGgpOwogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0gZWxzZSB7CiAg
        ICAgIHJldHVybiBmYWxzZTsKICAgIH0KICB9LAoKICAvKioKICAgIENoZWNr
        IHdoZXRoZXIgYSBrZXkgaXMgcHJlc2VudC4KCiAgICBAbWV0aG9kIGhhcwog
        ICAgQHBhcmFtIHsqfSBrZXkKICAgIEByZXR1cm4ge0Jvb2xlYW59IHRydWUg
        aWYgdGhlIGl0ZW0gd2FzIHByZXNlbnQsIGZhbHNlIG90aGVyd2lzZQogICov
        CiAgaGFzOiBmdW5jdGlvbihrZXkpIHsKICAgIHZhciB2YWx1ZXMgPSB0aGlz
        LnZhbHVlcywKICAgICAgICBndWlkID0gZ3VpZEZvcihrZXkpOwoKICAgIHJl
        dHVybiB2YWx1ZXMuaGFzT3duUHJvcGVydHkoZ3VpZCk7CiAgfSwKCiAgLyoq
        CiAgICBJdGVyYXRlIG92ZXIgYWxsIHRoZSBrZXlzIGFuZCB2YWx1ZXMuIENh
        bGxzIHRoZSBmdW5jdGlvbiBvbmNlCiAgICBmb3IgZWFjaCBrZXksIHBhc3Np
        bmcgaW4gdGhlIGtleSBhbmQgdmFsdWUsIGluIHRoYXQgb3JkZXIuCgogICAg
        VGhlIGtleXMgYXJlIGd1YXJhbnRlZWQgdG8gYmUgaXRlcmF0ZWQgb3ZlciBp
        biBpbnNlcnRpb24gb3JkZXIuCgogICAgQG1ldGhvZCBmb3JFYWNoCiAgICBA
        cGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjawogICAgQHBhcmFtIHsqfSBzZWxm
        IGlmIHBhc3NlZCwgdGhlIGB0aGlzYCB2YWx1ZSBpbnNpZGUgdGhlCiAgICAg
        IGNhbGxiYWNrLiBCeSBkZWZhdWx0LCBgdGhpc2AgaXMgdGhlIG1hcC4KICAq
        LwogIGZvckVhY2g6IGZ1bmN0aW9uKGNhbGxiYWNrLCBzZWxmKSB7CiAgICB2
        YXIga2V5cyA9IHRoaXMua2V5cywKICAgICAgICB2YWx1ZXMgPSB0aGlzLnZh
        bHVlczsKCiAgICBrZXlzLmZvckVhY2goZnVuY3Rpb24oa2V5KSB7CiAgICAg
        IHZhciBndWlkID0gZ3VpZEZvcihrZXkpOwogICAgICBjYWxsYmFjay5jYWxs
        KHNlbGYsIGtleSwgdmFsdWVzW2d1aWRdKTsKICAgIH0pOwogIH0sCgogIC8q
        KgogICAgQG1ldGhvZCBjb3B5CiAgICBAcmV0dXJuIHtFbWJlci5NYXB9CiAg
        Ki8KICBjb3B5OiBmdW5jdGlvbigpIHsKICAgIHJldHVybiBjb3B5TWFwKHRo
        aXMsIG5ldyBNYXAoKSk7CiAgfQp9OwoKLyoqCiAgQGNsYXNzIE1hcFdpdGhE
        ZWZhdWx0CiAgQG5hbWVzcGFjZSBFbWJlcgogIEBleHRlbmRzIEVtYmVyLk1h
        cAogIEBwcml2YXRlCiAgQGNvbnN0cnVjdG9yCiAgQHBhcmFtIFtvcHRpb25z
        XQogICAgQHBhcmFtIHsqfSBbb3B0aW9ucy5kZWZhdWx0VmFsdWVdCiovCnZh
        ciBNYXBXaXRoRGVmYXVsdCA9IEVtYmVyLk1hcFdpdGhEZWZhdWx0ID0gZnVu
        Y3Rpb24ob3B0aW9ucykgewogIE1hcC5jYWxsKHRoaXMpOwogIHRoaXMuZGVm
        YXVsdFZhbHVlID0gb3B0aW9ucy5kZWZhdWx0VmFsdWU7Cn07CgovKioKICBA
        bWV0aG9kIGNyZWF0ZQogIEBzdGF0aWMKICBAcGFyYW0gW29wdGlvbnNdCiAg
        ICBAcGFyYW0geyp9IFtvcHRpb25zLmRlZmF1bHRWYWx1ZV0KICBAcmV0dXJu
        IHtFbWJlci5NYXBXaXRoRGVmYXVsdHxFbWJlci5NYXB9IElmIG9wdGlvbnMg
        YXJlIHBhc3NlZCwgcmV0dXJucwogICAgYEVtYmVyLk1hcFdpdGhEZWZhdWx0
        YCBvdGhlcndpc2UgcmV0dXJucyBgRW1iZXIuTWFwYAoqLwpNYXBXaXRoRGVm
        YXVsdC5jcmVhdGUgPSBmdW5jdGlvbihvcHRpb25zKSB7CiAgaWYgKG9wdGlv
        bnMpIHsKICAgIHJldHVybiBuZXcgTWFwV2l0aERlZmF1bHQob3B0aW9ucyk7
        CiAgfSBlbHNlIHsKICAgIHJldHVybiBuZXcgTWFwKCk7CiAgfQp9OwoKTWFw
        V2l0aERlZmF1bHQucHJvdG90eXBlID0gRW1iZXIuY3JlYXRlKE1hcC5wcm90
        b3R5cGUpOwoKLyoqCiAgUmV0cmlldmUgdGhlIHZhbHVlIGFzc29jaWF0ZWQg
        d2l0aCBhIGdpdmVuIGtleS4KCiAgQG1ldGhvZCBnZXQKICBAcGFyYW0geyp9
        IGtleQogIEByZXR1cm4geyp9IHRoZSB2YWx1ZSBhc3NvY2lhdGVkIHdpdGgg
        dGhlIGtleSwgb3IgdGhlIGRlZmF1bHQgdmFsdWUKKi8KTWFwV2l0aERlZmF1
        bHQucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uKGtleSkgewogIHZhciBoYXNW
        YWx1ZSA9IHRoaXMuaGFzKGtleSk7CgogIGlmIChoYXNWYWx1ZSkgewogICAg
        cmV0dXJuIE1hcC5wcm90b3R5cGUuZ2V0LmNhbGwodGhpcywga2V5KTsKICB9
        IGVsc2UgewogICAgdmFyIGRlZmF1bHRWYWx1ZSA9IHRoaXMuZGVmYXVsdFZh
        bHVlKGtleSk7CiAgICB0aGlzLnNldChrZXksIGRlZmF1bHRWYWx1ZSk7CiAg
        ICByZXR1cm4gZGVmYXVsdFZhbHVlOwogIH0KfTsKCi8qKgogIEBtZXRob2Qg
        Y29weQogIEByZXR1cm4ge0VtYmVyLk1hcFdpdGhEZWZhdWx0fQoqLwpNYXBX
        aXRoRGVmYXVsdC5wcm90b3R5cGUuY29weSA9IGZ1bmN0aW9uKCkgewogIHJl
        dHVybiBjb3B5TWFwKHRoaXMsIG5ldyBNYXBXaXRoRGVmYXVsdCh7CiAgICBk
        ZWZhdWx0VmFsdWU6IHRoaXMuZGVmYXVsdFZhbHVlCiAgfSkpOwp9OwoKfSko
        KTsKCgoKKGZ1bmN0aW9uKCkgewpmdW5jdGlvbiBjb25zb2xlTWV0aG9kKG5h
        bWUpIHsKICB2YXIgY29uc29sZU9iaiwgbG9nVG9Db25zb2xlOwogIGlmIChF
        bWJlci5pbXBvcnRzLmNvbnNvbGUpIHsKICAgIGNvbnNvbGVPYmogPSBFbWJl
        ci5pbXBvcnRzLmNvbnNvbGU7CiAgfSBlbHNlIGlmICh0eXBlb2YgY29uc29s
        ZSAhPT0gJ3VuZGVmaW5lZCcpIHsKICAgIGNvbnNvbGVPYmogPSBjb25zb2xl
        OwogIH0KCiAgdmFyIG1ldGhvZCA9IHR5cGVvZiBjb25zb2xlT2JqID09PSAn
        b2JqZWN0JyA/IGNvbnNvbGVPYmpbbmFtZV0gOiBudWxsOwoKICBpZiAobWV0
        aG9kKSB7CiAgICAvLyBPbGRlciBJRSBkb2Vzbid0IHN1cHBvcnQgYXBwbHks
        IGJ1dCBDaHJvbWUgbmVlZHMgaXQKICAgIGlmIChtZXRob2QuYXBwbHkpIHsK
        ICAgICAgbG9nVG9Db25zb2xlID0gZnVuY3Rpb24oKSB7CiAgICAgICAgbWV0
        aG9kLmFwcGx5KGNvbnNvbGVPYmosIGFyZ3VtZW50cyk7CiAgICAgIH07CiAg
        ICAgIGxvZ1RvQ29uc29sZS5kaXNwbGF5TmFtZSA9ICdjb25zb2xlLicgKyBu
        YW1lOwogICAgICByZXR1cm4gbG9nVG9Db25zb2xlOwogICAgfSBlbHNlIHsK
        ICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkgewogICAgICAgIHZhciBtZXNzYWdl
        ID0gQXJyYXkucHJvdG90eXBlLmpvaW4uY2FsbChhcmd1bWVudHMsICcsICcp
        OwogICAgICAgIG1ldGhvZChtZXNzYWdlKTsKICAgICAgfTsKICAgIH0KICB9
        Cn0KCmZ1bmN0aW9uIGFzc2VydFBvbHlmaWxsKHRlc3QsIG1lc3NhZ2UpIHsK
        ICBpZiAoIXRlc3QpIHsKICAgIHRyeSB7CiAgICAgIC8vIGF0dGVtcHQgdG8g
        cHJlc2VydmUgdGhlIHN0YWNrCiAgICAgIHRocm93IG5ldyBFbWJlci5FcnJv
        cigiYXNzZXJ0aW9uIGZhaWxlZDogIiArIG1lc3NhZ2UpOwogICAgfSBjYXRj
        aChlcnJvcikgewogICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAg
        ICAgIHRocm93IGVycm9yOwogICAgICB9LCAwKTsKICAgIH0KICB9Cn0KCi8q
        KgogIEluc2lkZSBFbWJlci1NZXRhbCwgc2ltcGx5IHVzZXMgdGhlIG1ldGhv
        ZHMgZnJvbSBgaW1wb3J0cy5jb25zb2xlYC4KICBPdmVycmlkZSB0aGlzIHRv
        IHByb3ZpZGUgbW9yZSByb2J1c3QgbG9nZ2luZyBmdW5jdGlvbmFsaXR5LgoK
        ICBAY2xhc3MgTG9nZ2VyCiAgQG5hbWVzcGFjZSBFbWJlcgoqLwpFbWJlci5M
        b2dnZXIgPSB7CiAgLyoqCiAgIExvZ3MgdGhlIGFyZ3VtZW50cyB0byB0aGUg
        Y29uc29sZS4KICAgWW91IGNhbiBwYXNzIGFzIG1hbnkgYXJndW1lbnRzIGFz
        IHlvdSB3YW50IGFuZCB0aGV5IHdpbGwgYmUgam9pbmVkIHRvZ2V0aGVyIHdp
        dGggYSBzcGFjZS4KCiAgICBgYGBqYXZhc2NyaXB0CiAgICB2YXIgZm9vID0g
        MTsKICAgIEVtYmVyLkxvZ2dlci5sb2coJ2xvZyB2YWx1ZSBvZiBmb286Jywg
        Zm9vKTsgLy8gImxvZyB2YWx1ZSBvZiBmb286IDEiIHdpbGwgYmUgcHJpbnRl
        ZCB0byB0aGUgY29uc29sZQogICAgYGBgCgogICBAbWV0aG9kIGxvZwogICBA
        Zm9yIEVtYmVyLkxvZ2dlcgogICBAcGFyYW0geyp9IGFyZ3VtZW50cwogICov
        CiAgbG9nOiAgIGNvbnNvbGVNZXRob2QoJ2xvZycpICAgfHwgRW1iZXIuSywK
        CiAgLyoqCiAgIFByaW50cyB0aGUgYXJndW1lbnRzIHRvIHRoZSBjb25zb2xl
        IHdpdGggYSB3YXJuaW5nIGljb24uCiAgIFlvdSBjYW4gcGFzcyBhcyBtYW55
        IGFyZ3VtZW50cyBhcyB5b3Ugd2FudCBhbmQgdGhleSB3aWxsIGJlIGpvaW5l
        ZCB0b2dldGhlciB3aXRoIGEgc3BhY2UuCgogICAgYGBgamF2YXNjcmlwdAog
        ICAgRW1iZXIuTG9nZ2VyLndhcm4oJ1NvbWV0aGluZyBoYXBwZW5lZCEnKTsg
        Ly8gIlNvbWV0aGluZyBoYXBwZW5lZCEiIHdpbGwgYmUgcHJpbnRlZCB0byB0
        aGUgY29uc29sZSB3aXRoIGEgd2FybmluZyBpY29uLgogICAgYGBgCgogICBA
        bWV0aG9kIHdhcm4KICAgQGZvciBFbWJlci5Mb2dnZXIKICAgQHBhcmFtIHsq
        fSBhcmd1bWVudHMKICAqLwogIHdhcm46ICBjb25zb2xlTWV0aG9kKCd3YXJu
        JykgIHx8IEVtYmVyLkssCgogIC8qKgogICBQcmludHMgdGhlIGFyZ3VtZW50
        cyB0byB0aGUgY29uc29sZSB3aXRoIGFuIGVycm9yIGljb24sIHJlZCB0ZXh0
        IGFuZCBhIHN0YWNrIHRyYWNlLgogICBZb3UgY2FuIHBhc3MgYXMgbWFueSBh
        cmd1bWVudHMgYXMgeW91IHdhbnQgYW5kIHRoZXkgd2lsbCBiZSBqb2luZWQg
        dG9nZXRoZXIgd2l0aCBhIHNwYWNlLgoKICAgIGBgYGphdmFzY3JpcHQKICAg
        IEVtYmVyLkxvZ2dlci5lcnJvcignRGFuZ2VyISBEYW5nZXIhJyk7IC8vICJE
        YW5nZXIhIERhbmdlciEiIHdpbGwgYmUgcHJpbnRlZCB0byB0aGUgY29uc29s
        ZSBpbiByZWQgdGV4dC4KICAgIGBgYAoKICAgQG1ldGhvZCBlcnJvcgogICBA
        Zm9yIEVtYmVyLkxvZ2dlcgogICBAcGFyYW0geyp9IGFyZ3VtZW50cwogICov
        CiAgZXJyb3I6IGNvbnNvbGVNZXRob2QoJ2Vycm9yJykgfHwgRW1iZXIuSywK
        CiAgLyoqCiAgIExvZ3MgdGhlIGFyZ3VtZW50cyB0byB0aGUgY29uc29sZS4K
        ICAgWW91IGNhbiBwYXNzIGFzIG1hbnkgYXJndW1lbnRzIGFzIHlvdSB3YW50
        IGFuZCB0aGV5IHdpbGwgYmUgam9pbmVkIHRvZ2V0aGVyIHdpdGggYSBzcGFj
        ZS4KCiAgICBgYGBqYXZhc2NyaXB0CiAgICB2YXIgZm9vID0gMTsKICAgIEVt
        YmVyLkxvZ2dlci5pbmZvKCdsb2cgdmFsdWUgb2YgZm9vOicsIGZvbyk7IC8v
        ICJsb2cgdmFsdWUgb2YgZm9vOiAxIiB3aWxsIGJlIHByaW50ZWQgdG8gdGhl
        IGNvbnNvbGUKICAgIGBgYAoKICAgQG1ldGhvZCBpbmZvCiAgIEBmb3IgRW1i
        ZXIuTG9nZ2VyCiAgIEBwYXJhbSB7Kn0gYXJndW1lbnRzCiAgKi8KICBpbmZv
        OiAgY29uc29sZU1ldGhvZCgnaW5mbycpICB8fCBFbWJlci5LLAoKICAvKioK
        ICAgTG9ncyB0aGUgYXJndW1lbnRzIHRvIHRoZSBjb25zb2xlIGluIGJsdWUg
        dGV4dC4KICAgWW91IGNhbiBwYXNzIGFzIG1hbnkgYXJndW1lbnRzIGFzIHlv
        dSB3YW50IGFuZCB0aGV5IHdpbGwgYmUgam9pbmVkIHRvZ2V0aGVyIHdpdGgg
        YSBzcGFjZS4KCiAgICBgYGBqYXZhc2NyaXB0CiAgICB2YXIgZm9vID0gMTsK
        ICAgIEVtYmVyLkxvZ2dlci5kZWJ1ZygnbG9nIHZhbHVlIG9mIGZvbzonLCBm
        b28pOyAvLyAibG9nIHZhbHVlIG9mIGZvbzogMSIgd2lsbCBiZSBwcmludGVk
        IHRvIHRoZSBjb25zb2xlCiAgICBgYGAKCiAgIEBtZXRob2QgZGVidWcKICAg
        QGZvciBFbWJlci5Mb2dnZXIKICAgQHBhcmFtIHsqfSBhcmd1bWVudHMKICAq
        LwogIGRlYnVnOiBjb25zb2xlTWV0aG9kKCdkZWJ1ZycpIHx8IGNvbnNvbGVN
        ZXRob2QoJ2luZm8nKSB8fCBFbWJlci5LLAoKICAvKioKICAgSWYgdGhlIHZh
        bHVlIHBhc3NlZCBpbnRvIGBFbWJlci5Mb2dnZXIuYXNzZXJ0YCBpcyBub3Qg
        dHJ1dGh5IGl0IHdpbGwgdGhyb3cgYW4gZXJyb3Igd2l0aCBhIHN0YWNrIHRy
        YWNlLgoKICAgIGBgYGphdmFzY3JpcHQKICAgIEVtYmVyLkxvZ2dlci5hc3Nl
        cnQodHJ1ZSk7IC8vIHVuZGVmaW5lZAogICAgRW1iZXIuTG9nZ2VyLmFzc2Vy
        dCh0cnVlID09PSBmYWxzZSk7IC8vIFRocm93cyBhbiBBc3NlcnRpb24gZmFp
        bGVkIGVycm9yLgogICAgYGBgCgogICBAbWV0aG9kIGFzc2VydAogICBAZm9y
        IEVtYmVyLkxvZ2dlcgogICBAcGFyYW0ge0Jvb2xlYW59IGJvb2wgVmFsdWUg
        dG8gdGVzdAogICovCiAgYXNzZXJ0OiBjb25zb2xlTWV0aG9kKCdhc3NlcnQn
        KSB8fCBhc3NlcnRQb2x5ZmlsbAp9OwoKCn0pKCk7CgoKCihmdW5jdGlvbigp
        IHsKLyoqCkBtb2R1bGUgZW1iZXItbWV0YWwKKi8KCnZhciBNRVRBX0tFWSA9
        IEVtYmVyLk1FVEFfS0VZLAogICAgbWV0YUZvciA9IEVtYmVyLm1ldGEsCiAg
        ICBvYmplY3REZWZpbmVQcm9wZXJ0eSA9IEVtYmVyLnBsYXRmb3JtLmRlZmlu
        ZVByb3BlcnR5OwoKdmFyIE1BTkRBVE9SWV9TRVRURVIgPSBFbWJlci5FTlYu
        TUFOREFUT1JZX1NFVFRFUjsKCi8vIC4uLi4uLi4uLi4uLi4uLi4uLi4uLi4u
        Li4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4KLy8gREVTQ1JJ
        UFRPUgovLwoKLyoqCiAgT2JqZWN0cyBvZiB0aGlzIHR5cGUgY2FuIGltcGxl
        bWVudCBhbiBpbnRlcmZhY2UgdG8gcmVzcG9uZCB0byByZXF1ZXN0cyB0bwog
        IGdldCBhbmQgc2V0LiBUaGUgZGVmYXVsdCBpbXBsZW1lbnRhdGlvbiBoYW5k
        bGVzIHNpbXBsZSBwcm9wZXJ0aWVzLgoKICBZb3UgZ2VuZXJhbGx5IHdvbid0
        IG5lZWQgdG8gY3JlYXRlIG9yIHN1YmNsYXNzIHRoaXMgZGlyZWN0bHkuCgog
        IEBjbGFzcyBEZXNjcmlwdG9yCiAgQG5hbWVzcGFjZSBFbWJlcgogIEBwcml2
        YXRlCiAgQGNvbnN0cnVjdG9yCiovCkVtYmVyLkRlc2NyaXB0b3IgPSBmdW5j
        dGlvbigpIHt9OwoKLy8gLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4u
        Li4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLgovLyBERUZJTklORyBQUk9Q
        RVJUSUVTIEFQSQovLwoKdmFyIE1BTkRBVE9SWV9TRVRURVJfRlVOQ1RJT04g
        PSBFbWJlci5NQU5EQVRPUllfU0VUVEVSX0ZVTkNUSU9OID0gZnVuY3Rpb24o
        dmFsdWUpIHsKICBFbWJlci5hc3NlcnQoIllvdSBtdXN0IHVzZSBFbWJlci5z
        ZXQoKSB0byBhY2Nlc3MgdGhpcyBwcm9wZXJ0eSAob2YgIiArIHRoaXMgKyAi
        KSIsIGZhbHNlKTsKfTsKCnZhciBERUZBVUxUX0dFVFRFUl9GVU5DVElPTiA9
        IEVtYmVyLkRFRkFVTFRfR0VUVEVSX0ZVTkNUSU9OID0gZnVuY3Rpb24obmFt
        ZSkgewogIHJldHVybiBmdW5jdGlvbigpIHsKICAgIHZhciBtZXRhID0gdGhp
        c1tNRVRBX0tFWV07CiAgICByZXR1cm4gbWV0YSAmJiBtZXRhLnZhbHVlc1tu
        YW1lXTsKICB9Owp9OwoKLyoqCiAgTk9URTogVGhpcyBpcyBhIGxvdy1sZXZl
        bCBtZXRob2QgdXNlZCBieSBvdGhlciBwYXJ0cyBvZiB0aGUgQVBJLiBZb3Ug
        YWxtb3N0CiAgbmV2ZXIgd2FudCB0byBjYWxsIHRoaXMgbWV0aG9kIGRpcmVj
        dGx5LiBJbnN0ZWFkIHlvdSBzaG91bGQgdXNlCiAgYEVtYmVyLm1peGluKClg
        IHRvIGRlZmluZSBuZXcgcHJvcGVydGllcy4KCiAgRGVmaW5lcyBhIHByb3Bl
        cnR5IG9uIGFuIG9iamVjdC4gVGhpcyBtZXRob2Qgd29ya3MgbXVjaCBsaWtl
        IHRoZSBFUzUKICBgT2JqZWN0LmRlZmluZVByb3BlcnR5KClgIG1ldGhvZCBl
        eGNlcHQgdGhhdCBpdCBjYW4gYWxzbyBhY2NlcHQgY29tcHV0ZWQKICBwcm9w
        ZXJ0aWVzIGFuZCBvdGhlciBzcGVjaWFsIGRlc2NyaXB0b3JzLgoKICBOb3Jt
        YWxseSB0aGlzIG1ldGhvZCB0YWtlcyBvbmx5IHRocmVlIHBhcmFtZXRlcnMu
        IEhvd2V2ZXIgaWYgeW91IHBhc3MgYW4KICBpbnN0YW5jZSBvZiBgRW1iZXIu
        RGVzY3JpcHRvcmAgYXMgdGhlIHRoaXJkIHBhcmFtIHRoZW4geW91IGNhbiBw
        YXNzIGFuCiAgb3B0aW9uYWwgdmFsdWUgYXMgdGhlIGZvdXJ0aCBwYXJhbWV0
        ZXIuIFRoaXMgaXMgb2Z0ZW4gbW9yZSBlZmZpY2llbnQgdGhhbgogIGNyZWF0
        aW5nIG5ldyBkZXNjcmlwdG9yIGhhc2hlcyBmb3IgZWFjaCBwcm9wZXJ0eS4K
        CiAgIyMgRXhhbXBsZXMKCiAgYGBgamF2YXNjcmlwdAogIC8vIEVTNSBjb21w
        YXRpYmxlIG1vZGUKICBFbWJlci5kZWZpbmVQcm9wZXJ0eShjb250YWN0LCAn
        Zmlyc3ROYW1lJywgewogICAgd3JpdGFibGU6IHRydWUsCiAgICBjb25maWd1
        cmFibGU6IGZhbHNlLAogICAgZW51bWVyYWJsZTogdHJ1ZSwKICAgIHZhbHVl
        OiAnQ2hhcmxlcycKICB9KTsKCiAgLy8gZGVmaW5lIGEgc2ltcGxlIHByb3Bl
        cnR5CiAgRW1iZXIuZGVmaW5lUHJvcGVydHkoY29udGFjdCwgJ2xhc3ROYW1l
        JywgdW5kZWZpbmVkLCAnSm9sbGV5Jyk7CgogIC8vIGRlZmluZSBhIGNvbXB1
        dGVkIHByb3BlcnR5CiAgRW1iZXIuZGVmaW5lUHJvcGVydHkoY29udGFjdCwg
        J2Z1bGxOYW1lJywgRW1iZXIuY29tcHV0ZWQoZnVuY3Rpb24oKSB7CiAgICBy
        ZXR1cm4gdGhpcy5maXJzdE5hbWUrJyAnK3RoaXMubGFzdE5hbWU7CiAgfSku
        cHJvcGVydHkoJ2ZpcnN0TmFtZScsICdsYXN0TmFtZScpKTsKICBgYGAKCiAg
        QHByaXZhdGUKICBAbWV0aG9kIGRlZmluZVByb3BlcnR5CiAgQGZvciBFbWJl
        cgogIEBwYXJhbSB7T2JqZWN0fSBvYmogdGhlIG9iamVjdCB0byBkZWZpbmUg
        dGhpcyBwcm9wZXJ0eSBvbi4gVGhpcyBtYXkgYmUgYSBwcm90b3R5cGUuCiAg
        QHBhcmFtIHtTdHJpbmd9IGtleU5hbWUgdGhlIG5hbWUgb2YgdGhlIHByb3Bl
        cnR5CiAgQHBhcmFtIHtFbWJlci5EZXNjcmlwdG9yfSBbZGVzY10gYW4gaW5z
        dGFuY2Ugb2YgYEVtYmVyLkRlc2NyaXB0b3JgICh0eXBpY2FsbHkgYQogICAg
        Y29tcHV0ZWQgcHJvcGVydHkpIG9yIGFuIEVTNSBkZXNjcmlwdG9yLgogICAg
        WW91IG11c3QgcHJvdmlkZSB0aGlzIG9yIGBkYXRhYCBidXQgbm90IGJvdGgu
        CiAgQHBhcmFtIHsqfSBbZGF0YV0gc29tZXRoaW5nIG90aGVyIHRoYW4gYSBk
        ZXNjcmlwdG9yLCB0aGF0IHdpbGwKICAgIGJlY29tZSB0aGUgZXhwbGljaXQg
        dmFsdWUgb2YgdGhpcyBwcm9wZXJ0eS4KKi8KRW1iZXIuZGVmaW5lUHJvcGVy
        dHkgPSBmdW5jdGlvbihvYmosIGtleU5hbWUsIGRlc2MsIGRhdGEsIG1ldGEp
        IHsKICB2YXIgZGVzY3MsIGV4aXN0aW5nRGVzYywgd2F0Y2hpbmcsIHZhbHVl
        OwoKICBpZiAoIW1ldGEpIG1ldGEgPSBtZXRhRm9yKG9iaik7CiAgZGVzY3Mg
        PSBtZXRhLmRlc2NzOwogIGV4aXN0aW5nRGVzYyA9IG1ldGEuZGVzY3Nba2V5
        TmFtZV07CiAgd2F0Y2hpbmcgPSBtZXRhLndhdGNoaW5nW2tleU5hbWVdID4g
        MDsKCiAgaWYgKGV4aXN0aW5nRGVzYyBpbnN0YW5jZW9mIEVtYmVyLkRlc2Ny
        aXB0b3IpIHsKICAgIGV4aXN0aW5nRGVzYy50ZWFyZG93bihvYmosIGtleU5h
        bWUpOwogIH0KCiAgaWYgKGRlc2MgaW5zdGFuY2VvZiBFbWJlci5EZXNjcmlw
        dG9yKSB7CiAgICB2YWx1ZSA9IGRlc2M7CgogICAgZGVzY3Nba2V5TmFtZV0g
        PSBkZXNjOwogICAgaWYgKE1BTkRBVE9SWV9TRVRURVIgJiYgd2F0Y2hpbmcp
        IHsKICAgICAgb2JqZWN0RGVmaW5lUHJvcGVydHkob2JqLCBrZXlOYW1lLCB7
        CiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLAogICAgICAgIGVudW1lcmFi
        bGU6IHRydWUsCiAgICAgICAgd3JpdGFibGU6IHRydWUsCiAgICAgICAgdmFs
        dWU6IHVuZGVmaW5lZCAvLyBtYWtlIGVudW1lcmFibGUKICAgICAgfSk7CiAg
        ICB9IGVsc2UgewogICAgICBvYmpba2V5TmFtZV0gPSB1bmRlZmluZWQ7IC8v
        IG1ha2UgZW51bWVyYWJsZQogICAgfQoKICAgICAgfSBlbHNlIHsKICAgIGRl
        c2NzW2tleU5hbWVdID0gdW5kZWZpbmVkOyAvLyBzaGFkb3cgZGVzY3JpcHRv
        ciBpbiBwcm90bwogICAgaWYgKGRlc2MgPT0gbnVsbCkgewogICAgICB2YWx1
        ZSA9IGRhdGE7CgogICAgICBpZiAoTUFOREFUT1JZX1NFVFRFUiAmJiB3YXRj
        aGluZykgewogICAgICAgIG1ldGEudmFsdWVzW2tleU5hbWVdID0gZGF0YTsK
        ICAgICAgICBvYmplY3REZWZpbmVQcm9wZXJ0eShvYmosIGtleU5hbWUsIHsK
        ICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICAgICAgICAgIGVudW1l
        cmFibGU6IHRydWUsCiAgICAgICAgICBzZXQ6IE1BTkRBVE9SWV9TRVRURVJf
        RlVOQ1RJT04sCiAgICAgICAgICBnZXQ6IERFRkFVTFRfR0VUVEVSX0ZVTkNU
        SU9OKGtleU5hbWUpCiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAg
        ICAgb2JqW2tleU5hbWVdID0gZGF0YTsKICAgICAgfQogICAgfSBlbHNlIHsK
        ICAgICAgdmFsdWUgPSBkZXNjOwoKICAgICAgLy8gY29tcGF0aWJpbGl0eSB3
        aXRoIEVTNQogICAgICBvYmplY3REZWZpbmVQcm9wZXJ0eShvYmosIGtleU5h
        bWUsIGRlc2MpOwogICAgfQogIH0KCiAgLy8gaWYga2V5IGlzIGJlaW5nIHdh
        dGNoZWQsIG92ZXJyaWRlIGNoYWlucyB0aGF0CiAgLy8gd2VyZSBpbml0aWFs
        aXplZCB3aXRoIHRoZSBwcm90b3R5cGUKICBpZiAod2F0Y2hpbmcpIHsgRW1i
        ZXIub3ZlcnJpZGVDaGFpbnMob2JqLCBrZXlOYW1lLCBtZXRhKTsgfQoKICAv
        LyBUaGUgYHZhbHVlYCBwYXNzZWQgdG8gdGhlIGBkaWREZWZpbmVQcm9wZXJ0
        eWAgaG9vayBpcwogIC8vIGVpdGhlciB0aGUgZGVzY3JpcHRvciBvciBkYXRh
        LCB3aGljaGV2ZXIgd2FzIHBhc3NlZC4KICBpZiAob2JqLmRpZERlZmluZVBy
        b3BlcnR5KSB7IG9iai5kaWREZWZpbmVQcm9wZXJ0eShvYmosIGtleU5hbWUs
        IHZhbHVlKTsgfQoKICByZXR1cm4gdGhpczsKfTsKCgp9KSgpOwoKCgooZnVu
        Y3Rpb24oKSB7CnZhciBnZXQgPSBFbWJlci5nZXQ7CgovKioKICBUbyBnZXQg
        bXVsdGlwbGUgcHJvcGVydGllcyBhdCBvbmNlLCBjYWxsIGBFbWJlci5nZXRQ
        cm9wZXJ0aWVzYAogIHdpdGggYW4gb2JqZWN0IGZvbGxvd2VkIGJ5IGEgbGlz
        dCBvZiBzdHJpbmdzIG9yIGFuIGFycmF5OgoKICBgYGBqYXZhc2NyaXB0CiAg
        RW1iZXIuZ2V0UHJvcGVydGllcyhyZWNvcmQsICdmaXJzdE5hbWUnLCAnbGFz
        dE5hbWUnLCAnemlwQ29kZScpOyAgLy8geyBmaXJzdE5hbWU6ICdKb2huJywg
        bGFzdE5hbWU6ICdEb2UnLCB6aXBDb2RlOiAnMTAwMTEnIH0KICBgYGAKCiAg
        aXMgZXF1aXZhbGVudCB0bzoKCiAgYGBgamF2YXNjcmlwdAogIEVtYmVyLmdl
        dFByb3BlcnRpZXMocmVjb3JkLCBbJ2ZpcnN0TmFtZScsICdsYXN0TmFtZScs
        ICd6aXBDb2RlJ10pOyAgLy8geyBmaXJzdE5hbWU6ICdKb2huJywgbGFzdE5h
        bWU6ICdEb2UnLCB6aXBDb2RlOiAnMTAwMTEnIH0KICBgYGAKCiAgQG1ldGhv
        ZCBnZXRQcm9wZXJ0aWVzCiAgQHBhcmFtIG9iagogIEBwYXJhbSB7U3RyaW5n
        Li4ufEFycmF5fSBsaXN0IG9mIGtleXMgdG8gZ2V0CiAgQHJldHVybiB7SGFz
        aH0KKi8KRW1iZXIuZ2V0UHJvcGVydGllcyA9IGZ1bmN0aW9uKG9iaikgewog
        IHZhciByZXQgPSB7fSwKICAgICAgcHJvcGVydHlOYW1lcyA9IGFyZ3VtZW50
        cywKICAgICAgaSA9IDE7CgogIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAy
        ICYmIEVtYmVyLnR5cGVPZihhcmd1bWVudHNbMV0pID09PSAnYXJyYXknKSB7
        CiAgICBpID0gMDsKICAgIHByb3BlcnR5TmFtZXMgPSBhcmd1bWVudHNbMV07
        CiAgfQogIGZvcih2YXIgbGVuID0gcHJvcGVydHlOYW1lcy5sZW5ndGg7IGkg
        PCBsZW47IGkrKykgewogICAgcmV0W3Byb3BlcnR5TmFtZXNbaV1dID0gZ2V0
        KG9iaiwgcHJvcGVydHlOYW1lc1tpXSk7CiAgfQogIHJldHVybiByZXQ7Cn07
        Cgp9KSgpOwoKCgooZnVuY3Rpb24oKSB7CnZhciBjaGFuZ2VQcm9wZXJ0aWVz
        ID0gRW1iZXIuY2hhbmdlUHJvcGVydGllcywKICAgIHNldCA9IEVtYmVyLnNl
        dDsKCi8qKgogIFNldCBhIGxpc3Qgb2YgcHJvcGVydGllcyBvbiBhbiBvYmpl
        Y3QuIFRoZXNlIHByb3BlcnRpZXMgYXJlIHNldCBpbnNpZGUKICBhIHNpbmds
        ZSBgYmVnaW5Qcm9wZXJ0eUNoYW5nZXNgIGFuZCBgZW5kUHJvcGVydHlDaGFu
        Z2VzYCBiYXRjaCwgc28KICBvYnNlcnZlcnMgd2lsbCBiZSBidWZmZXJlZC4K
        CiAgYGBgamF2YXNjcmlwdAogIGFuT2JqZWN0LnNldFByb3BlcnRpZXMoewog
        ICAgZmlyc3ROYW1lOiAiU3RhbmxleSIsCiAgICBsYXN0TmFtZTogIlN0dWFy
        dCIsCiAgICBhZ2U6ICIyMSIKICB9KQogIGBgYAoKICBAbWV0aG9kIHNldFBy
        b3BlcnRpZXMKICBAcGFyYW0gc2VsZgogIEBwYXJhbSB7T2JqZWN0fSBoYXNo
        CiAgQHJldHVybiBzZWxmCiovCkVtYmVyLnNldFByb3BlcnRpZXMgPSBmdW5j
        dGlvbihzZWxmLCBoYXNoKSB7CiAgY2hhbmdlUHJvcGVydGllcyhmdW5jdGlv
        bigpIHsKICAgIGZvcih2YXIgcHJvcCBpbiBoYXNoKSB7CiAgICAgIGlmICho
        YXNoLmhhc093blByb3BlcnR5KHByb3ApKSB7IHNldChzZWxmLCBwcm9wLCBo
        YXNoW3Byb3BdKTsgfQogICAgfQogIH0pOwogIHJldHVybiBzZWxmOwp9OwoK
        fSkoKTsKCgoKKGZ1bmN0aW9uKCkgewp2YXIgbWV0YUZvciA9IEVtYmVyLm1l
        dGEsIC8vIHV0aWxzLmpzCiAgICB0eXBlT2YgPSBFbWJlci50eXBlT2YsIC8v
        IHV0aWxzLmpzCiAgICBNQU5EQVRPUllfU0VUVEVSID0gRW1iZXIuRU5WLk1B
        TkRBVE9SWV9TRVRURVIsCiAgICBvX2RlZmluZVByb3BlcnR5ID0gRW1iZXIu
        cGxhdGZvcm0uZGVmaW5lUHJvcGVydHk7CgpFbWJlci53YXRjaEtleSA9IGZ1
        bmN0aW9uKG9iaiwga2V5TmFtZSwgbWV0YSkgewogIC8vIGNhbid0IHdhdGNo
        IGxlbmd0aCBvbiBBcnJheSAtIGl0IGlzIHNwZWNpYWwuLi4KICBpZiAoa2V5
        TmFtZSA9PT0gJ2xlbmd0aCcgJiYgdHlwZU9mKG9iaikgPT09ICdhcnJheScp
        IHsgcmV0dXJuOyB9CgogIHZhciBtID0gbWV0YSB8fCBtZXRhRm9yKG9iaiks
        IHdhdGNoaW5nID0gbS53YXRjaGluZzsKCiAgLy8gYWN0aXZhdGUgd2F0Y2hp
        bmcgZmlyc3QgdGltZQogIGlmICghd2F0Y2hpbmdba2V5TmFtZV0pIHsKICAg
        IHdhdGNoaW5nW2tleU5hbWVdID0gMTsKCiAgICBpZiAoJ2Z1bmN0aW9uJyA9
        PT0gdHlwZW9mIG9iai53aWxsV2F0Y2hQcm9wZXJ0eSkgewogICAgICBvYmou
        d2lsbFdhdGNoUHJvcGVydHkoa2V5TmFtZSk7CiAgICB9CgogICAgaWYgKE1B
        TkRBVE9SWV9TRVRURVIgJiYga2V5TmFtZSBpbiBvYmopIHsKICAgICAgbS52
        YWx1ZXNba2V5TmFtZV0gPSBvYmpba2V5TmFtZV07CiAgICAgIG9fZGVmaW5l
        UHJvcGVydHkob2JqLCBrZXlOYW1lLCB7CiAgICAgICAgY29uZmlndXJhYmxl
        OiB0cnVlLAogICAgICAgIGVudW1lcmFibGU6IG9iai5wcm9wZXJ0eUlzRW51
        bWVyYWJsZShrZXlOYW1lKSwKICAgICAgICBzZXQ6IEVtYmVyLk1BTkRBVE9S
        WV9TRVRURVJfRlVOQ1RJT04sCiAgICAgICAgZ2V0OiBFbWJlci5ERUZBVUxU
        X0dFVFRFUl9GVU5DVElPTihrZXlOYW1lKQogICAgICB9KTsKICAgIH0KICB9
        IGVsc2UgewogICAgd2F0Y2hpbmdba2V5TmFtZV0gPSAod2F0Y2hpbmdba2V5
        TmFtZV0gfHwgMCkgKyAxOwogIH0KfTsKCgpFbWJlci51bndhdGNoS2V5ID0g
        ZnVuY3Rpb24ob2JqLCBrZXlOYW1lLCBtZXRhKSB7CiAgdmFyIG0gPSBtZXRh
        IHx8IG1ldGFGb3Iob2JqKSwgd2F0Y2hpbmcgPSBtLndhdGNoaW5nOwoKICBp
        ZiAod2F0Y2hpbmdba2V5TmFtZV0gPT09IDEpIHsKICAgIHdhdGNoaW5nW2tl
        eU5hbWVdID0gMDsKCiAgICBpZiAoJ2Z1bmN0aW9uJyA9PT0gdHlwZW9mIG9i
        ai5kaWRVbndhdGNoUHJvcGVydHkpIHsKICAgICAgb2JqLmRpZFVud2F0Y2hQ
        cm9wZXJ0eShrZXlOYW1lKTsKICAgIH0KCiAgICBpZiAoTUFOREFUT1JZX1NF
        VFRFUiAmJiBrZXlOYW1lIGluIG9iaikgewogICAgICBvX2RlZmluZVByb3Bl
        cnR5KG9iaiwga2V5TmFtZSwgewogICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1
        ZSwKICAgICAgICBlbnVtZXJhYmxlOiBvYmoucHJvcGVydHlJc0VudW1lcmFi
        bGUoa2V5TmFtZSksCiAgICAgICAgc2V0OiBmdW5jdGlvbih2YWwpIHsKICAg
        ICAgICAgIC8vIHJlZGVmaW5lIHRvIHNldCBhcyBlbnVtZXJhYmxlCiAgICAg
        ICAgICBvX2RlZmluZVByb3BlcnR5KG9iaiwga2V5TmFtZSwgewogICAgICAg
        ICAgICBjb25maWd1cmFibGU6IHRydWUsCiAgICAgICAgICAgIHdyaXRhYmxl
        OiB0cnVlLAogICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLAogICAgICAg
        ICAgICB2YWx1ZTogdmFsCiAgICAgICAgICB9KTsKICAgICAgICAgIGRlbGV0
        ZSBtLnZhbHVlc1trZXlOYW1lXTsKICAgICAgICB9LAogICAgICAgIGdldDog
        RW1iZXIuREVGQVVMVF9HRVRURVJfRlVOQ1RJT04oa2V5TmFtZSkKICAgICAg
        fSk7CiAgICB9CiAgfSBlbHNlIGlmICh3YXRjaGluZ1trZXlOYW1lXSA+IDEp
        IHsKICAgIHdhdGNoaW5nW2tleU5hbWVdLS07CiAgfQp9OwoKfSkoKTsKCgoK
        KGZ1bmN0aW9uKCkgewp2YXIgbWV0YUZvciA9IEVtYmVyLm1ldGEsIC8vIHV0
        aWxzLmpzCiAgICBnZXQgPSBFbWJlci5nZXQsIC8vIHByb3BlcnR5X2dldC5q
        cwogICAgbm9ybWFsaXplVHVwbGUgPSBFbWJlci5ub3JtYWxpemVUdXBsZSwg
        Ly8gcHJvcGVydHlfZ2V0LmpzCiAgICBmb3JFYWNoID0gRW1iZXIuQXJyYXlQ
        b2x5ZmlsbHMuZm9yRWFjaCwgLy8gYXJyYXkuanMKICAgIHdhcm4gPSBFbWJl
        ci53YXJuLAogICAgd2F0Y2hLZXkgPSBFbWJlci53YXRjaEtleSwKICAgIHVu
        d2F0Y2hLZXkgPSBFbWJlci51bndhdGNoS2V5LAogICAgRklSU1RfS0VZID0g
        L14oW15cLlwqXSspLywKICAgIE1FVEFfS0VZID0gRW1iZXIuTUVUQV9LRVk7
        CgpmdW5jdGlvbiBmaXJzdEtleShwYXRoKSB7CiAgcmV0dXJuIHBhdGgubWF0
        Y2goRklSU1RfS0VZKVswXTsKfQoKdmFyIHBlbmRpbmdRdWV1ZSA9IFtdOwoK
        Ly8gYXR0ZW1wdHMgdG8gYWRkIHRoZSBwZW5kaW5nUXVldWUgY2hhaW5zIGFn
        YWluLiBJZiBzb21lIG9mIHRoZW0gZW5kIHVwCi8vIGJhY2sgaW4gdGhlIHF1
        ZXVlIGFuZCByZXNjaGVkdWxlIGlzIHRydWUsIHNjaGVkdWxlcyBhIHRpbWVv
        dXQgdG8gdHJ5Ci8vIGFnYWluLgpFbWJlci5mbHVzaFBlbmRpbmdDaGFpbnMg
        PSBmdW5jdGlvbigpIHsKICBpZiAocGVuZGluZ1F1ZXVlLmxlbmd0aCA9PT0g
        MCkgeyByZXR1cm47IH0gLy8gbm90aGluZyB0byBkbwoKICB2YXIgcXVldWUg
        PSBwZW5kaW5nUXVldWU7CiAgcGVuZGluZ1F1ZXVlID0gW107CgogIGZvckVh
        Y2guY2FsbChxdWV1ZSwgZnVuY3Rpb24ocSkgeyBxWzBdLmFkZChxWzFdKTsg
        fSk7CgogIHdhcm4oJ1dhdGNoaW5nIGFuIHVuZGVmaW5lZCBnbG9iYWwsIEVt
        YmVyIGV4cGVjdHMgd2F0Y2hlZCBnbG9iYWxzIHRvIGJlIHNldHVwIGJ5IHRo
        ZSB0aW1lIHRoZSBydW4gbG9vcCBpcyBmbHVzaGVkLCBjaGVjayBmb3IgdHlw
        b3MnLCBwZW5kaW5nUXVldWUubGVuZ3RoID09PSAwKTsKfTsKCgpmdW5jdGlv
        biBhZGRDaGFpbldhdGNoZXIob2JqLCBrZXlOYW1lLCBub2RlKSB7CiAgaWYg
        KCFvYmogfHwgKCdvYmplY3QnICE9PSB0eXBlb2Ygb2JqKSkgeyByZXR1cm47
        IH0gLy8gbm90aGluZyB0byBkbwoKICB2YXIgbSA9IG1ldGFGb3Iob2JqKSwg
        bm9kZXMgPSBtLmNoYWluV2F0Y2hlcnM7CgogIGlmICghbS5oYXNPd25Qcm9w
        ZXJ0eSgnY2hhaW5XYXRjaGVycycpKSB7CiAgICBub2RlcyA9IG0uY2hhaW5X
        YXRjaGVycyA9IHt9OwogIH0KCiAgaWYgKCFub2Rlc1trZXlOYW1lXSkgeyBu
        b2Rlc1trZXlOYW1lXSA9IFtdOyB9CiAgbm9kZXNba2V5TmFtZV0ucHVzaChu
        b2RlKTsKICB3YXRjaEtleShvYmosIGtleU5hbWUsIG0pOwp9Cgp2YXIgcmVt
        b3ZlQ2hhaW5XYXRjaGVyID0gRW1iZXIucmVtb3ZlQ2hhaW5XYXRjaGVyID0g
        ZnVuY3Rpb24ob2JqLCBrZXlOYW1lLCBub2RlKSB7CiAgaWYgKCFvYmogfHwg
        J29iamVjdCcgIT09IHR5cGVvZiBvYmopIHsgcmV0dXJuOyB9IC8vIG5vdGhp
        bmcgdG8gZG8KCiAgdmFyIG0gPSBvYmpbTUVUQV9LRVldOwogIGlmIChtICYm
        ICFtLmhhc093blByb3BlcnR5KCdjaGFpbldhdGNoZXJzJykpIHsgcmV0dXJu
        OyB9IC8vIG5vdGhpbmcgdG8gZG8KCiAgdmFyIG5vZGVzID0gbSAmJiBtLmNo
        YWluV2F0Y2hlcnM7CgogIGlmIChub2RlcyAmJiBub2Rlc1trZXlOYW1lXSkg
        ewogICAgbm9kZXMgPSBub2Rlc1trZXlOYW1lXTsKICAgIGZvciAodmFyIGkg
        PSAwLCBsID0gbm9kZXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7CiAgICAgIGlm
        IChub2Rlc1tpXSA9PT0gbm9kZSkgeyBub2Rlcy5zcGxpY2UoaSwgMSk7IH0K
        ICAgIH0KICB9CiAgdW53YXRjaEtleShvYmosIGtleU5hbWUsIG0pOwp9OwoK
        Ly8gQSBDaGFpbk5vZGUgd2F0Y2hlcyBhIHNpbmdsZSBrZXkgb24gYW4gb2Jq
        ZWN0LiBJZiB5b3UgcHJvdmlkZSBhIHN0YXJ0aW5nCi8vIHZhbHVlIGZvciB0
        aGUga2V5IHRoZW4gdGhlIG5vZGUgd29uJ3QgYWN0dWFsbHkgd2F0Y2ggaXQu
        IEZvciBhIHJvb3Qgbm9kZQovLyBwYXNzIG51bGwgZm9yIHBhcmVudCBhbmQg
        a2V5IGFuZCBvYmplY3QgZm9yIHZhbHVlLgp2YXIgQ2hhaW5Ob2RlID0gRW1i
        ZXIuX0NoYWluTm9kZSA9IGZ1bmN0aW9uKHBhcmVudCwga2V5LCB2YWx1ZSkg
        ewogIHRoaXMuX3BhcmVudCA9IHBhcmVudDsKICB0aGlzLl9rZXkgICAgPSBr
        ZXk7CgogIC8vIF93YXRjaGluZyBpcyB0cnVlIHdoZW4gY2FsbGluZyBnZXQo
        dGhpcy5fcGFyZW50LCB0aGlzLl9rZXkpIHdpbGwKICAvLyByZXR1cm4gdGhl
        IHZhbHVlIG9mIHRoaXMgbm9kZS4KICAvLwogIC8vIEl0IGlzIGZhbHNlIGZv
        ciB0aGUgcm9vdCBvZiBhIGNoYWluIChiZWNhdXNlIHdlIGhhdmUgbm8gcGFy
        ZW50KQogIC8vIGFuZCBmb3IgZ2xvYmFsIHBhdGhzIChiZWNhdXNlIHRoZSBw
        YXJlbnQgbm9kZSBpcyB0aGUgb2JqZWN0IHdpdGgKICAvLyB0aGUgb2JzZXJ2
        ZXIgb24gaXQpCiAgdGhpcy5fd2F0Y2hpbmcgPSB2YWx1ZT09PXVuZGVmaW5l
        ZDsKCiAgdGhpcy5fdmFsdWUgID0gdmFsdWU7CiAgdGhpcy5fcGF0aHMgPSB7
        fTsKICBpZiAodGhpcy5fd2F0Y2hpbmcpIHsKICAgIHRoaXMuX29iamVjdCA9
        IHBhcmVudC52YWx1ZSgpOwogICAgaWYgKHRoaXMuX29iamVjdCkgeyBhZGRD
        aGFpbldhdGNoZXIodGhpcy5fb2JqZWN0LCB0aGlzLl9rZXksIHRoaXMpOyB9
        CiAgfQoKICAvLyBTcGVjaWFsLWNhc2U6IHRoZSBFYWNoUHJveHkgcmVsaWVz
        IG9uIGltbWVkaWF0ZSBldmFsdWF0aW9uIHRvCiAgLy8gZXN0YWJsaXNoIGl0
        cyBvYnNlcnZlcnMuCiAgLy8KICAvLyBUT0RPOiBSZXBsYWNlIHRoaXMgd2l0
        aCBhbiBlZmZpY2llbnQgY2FsbGJhY2sgdGhhdCB0aGUgRWFjaFByb3h5CiAg
        Ly8gY2FuIGltcGxlbWVudC4KICBpZiAodGhpcy5fcGFyZW50ICYmIHRoaXMu
        X3BhcmVudC5fa2V5ID09PSAnQGVhY2gnKSB7CiAgICB0aGlzLnZhbHVlKCk7
        CiAgfQp9OwoKdmFyIENoYWluTm9kZVByb3RvdHlwZSA9IENoYWluTm9kZS5w
        cm90b3R5cGU7CgpmdW5jdGlvbiBsYXp5R2V0KG9iaiwga2V5KSB7CiAgaWYg
        KCFvYmopIHJldHVybiB1bmRlZmluZWQ7CgogIHZhciBtZXRhID0gb2JqW01F
        VEFfS0VZXTsKICAvLyBjaGVjayBpZiBvYmplY3QgbWVhbnQgb25seSB0byBi
        ZSBhIHByb3RvdHlwZQogIGlmIChtZXRhICYmIG1ldGEucHJvdG8gPT09IG9i
        aikgcmV0dXJuIHVuZGVmaW5lZDsKCiAgaWYgKGtleSA9PT0gIkBlYWNoIikg
        cmV0dXJuIGdldChvYmosIGtleSk7CgogIC8vIGlmIGEgQ1Agb25seSByZXR1
        cm4gY2FjaGVkIHZhbHVlCiAgdmFyIGRlc2MgPSBtZXRhICYmIG1ldGEuZGVz
        Y3Nba2V5XTsKICBpZiAoZGVzYyAmJiBkZXNjLl9jYWNoZWFibGUpIHsKICAg
        IGlmIChrZXkgaW4gbWV0YS5jYWNoZSkgewogICAgICByZXR1cm4gbWV0YS5j
        YWNoZVtrZXldOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIHVuZGVmaW5l
        ZDsKICAgIH0KICB9CgogIHJldHVybiBnZXQob2JqLCBrZXkpOwp9CgpDaGFp
        bk5vZGVQcm90b3R5cGUudmFsdWUgPSBmdW5jdGlvbigpIHsKICBpZiAodGhp
        cy5fdmFsdWUgPT09IHVuZGVmaW5lZCAmJiB0aGlzLl93YXRjaGluZykgewog
        ICAgdmFyIG9iaiA9IHRoaXMuX3BhcmVudC52YWx1ZSgpOwogICAgdGhpcy5f
        dmFsdWUgPSBsYXp5R2V0KG9iaiwgdGhpcy5fa2V5KTsKICB9CiAgcmV0dXJu
        IHRoaXMuX3ZhbHVlOwp9OwoKQ2hhaW5Ob2RlUHJvdG90eXBlLmRlc3Ryb3kg
        PSBmdW5jdGlvbigpIHsKICBpZiAodGhpcy5fd2F0Y2hpbmcpIHsKICAgIHZh
        ciBvYmogPSB0aGlzLl9vYmplY3Q7CiAgICBpZiAob2JqKSB7IHJlbW92ZUNo
        YWluV2F0Y2hlcihvYmosIHRoaXMuX2tleSwgdGhpcyk7IH0KICAgIHRoaXMu
        X3dhdGNoaW5nID0gZmFsc2U7IC8vIHNvIGZ1dHVyZSBjYWxscyBkbyBub3Ro
        aW5nCiAgfQp9OwoKLy8gY29waWVzIGEgdG9wIGxldmVsIG9iamVjdCBvbmx5
        CkNoYWluTm9kZVByb3RvdHlwZS5jb3B5ID0gZnVuY3Rpb24ob2JqKSB7CiAg
        dmFyIHJldCA9IG5ldyBDaGFpbk5vZGUobnVsbCwgbnVsbCwgb2JqKSwKICAg
        ICAgcGF0aHMgPSB0aGlzLl9wYXRocywgcGF0aDsKICBmb3IgKHBhdGggaW4g
        cGF0aHMpIHsKICAgIGlmIChwYXRoc1twYXRoXSA8PSAwKSB7IGNvbnRpbnVl
        OyB9IC8vIHRoaXMgY2hlY2sgd2lsbCBhbHNvIGNhdGNoIG5vbi1udW1iZXIg
        dmFscy4KICAgIHJldC5hZGQocGF0aCk7CiAgfQogIHJldHVybiByZXQ7Cn07
        CgovLyBjYWxsZWQgb24gdGhlIHJvb3Qgbm9kZSBvZiBhIGNoYWluIHRvIHNl
        dHVwIHdhdGNoZXJzIG9uIHRoZSBzcGVjaWZpZWQKLy8gcGF0aC4KQ2hhaW5O
        b2RlUHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uKHBhdGgpIHsKICB2YXIgb2Jq
        LCB0dXBsZSwga2V5LCBzcmMsIHBhdGhzOwoKICBwYXRocyA9IHRoaXMuX3Bh
        dGhzOwogIHBhdGhzW3BhdGhdID0gKHBhdGhzW3BhdGhdIHx8IDApICsgMTsK
        CiAgb2JqID0gdGhpcy52YWx1ZSgpOwogIHR1cGxlID0gbm9ybWFsaXplVHVw
        bGUob2JqLCBwYXRoKTsKCiAgLy8gdGhlIHBhdGggd2FzIGEgbG9jYWwgcGF0
        aAogIGlmICh0dXBsZVswXSAmJiB0dXBsZVswXSA9PT0gb2JqKSB7CiAgICBw
        YXRoID0gdHVwbGVbMV07CiAgICBrZXkgID0gZmlyc3RLZXkocGF0aCk7CiAg
        ICBwYXRoID0gcGF0aC5zbGljZShrZXkubGVuZ3RoKzEpOwoKICAvLyBnbG9i
        YWwgcGF0aCwgYnV0IG9iamVjdCBkb2VzIG5vdCBleGlzdCB5ZXQuCiAgLy8g
        cHV0IGludG8gYSBxdWV1ZSBhbmQgdHJ5IHRvIGNvbm5lY3QgbGF0ZXIuCiAg
        fSBlbHNlIGlmICghdHVwbGVbMF0pIHsKICAgIHBlbmRpbmdRdWV1ZS5wdXNo
        KFt0aGlzLCBwYXRoXSk7CiAgICB0dXBsZS5sZW5ndGggPSAwOwogICAgcmV0
        dXJuOwoKICAvLyBnbG9iYWwgcGF0aCwgYW5kIG9iamVjdCBhbHJlYWR5IGV4
        aXN0cwogIH0gZWxzZSB7CiAgICBzcmMgID0gdHVwbGVbMF07CiAgICBrZXkg
        ID0gcGF0aC5zbGljZSgwLCAwLSh0dXBsZVsxXS5sZW5ndGgrMSkpOwogICAg
        cGF0aCA9IHR1cGxlWzFdOwogIH0KCiAgdHVwbGUubGVuZ3RoID0gMDsKICB0
        aGlzLmNoYWluKGtleSwgcGF0aCwgc3JjKTsKfTsKCi8vIGNhbGxlZCBvbiB0
        aGUgcm9vdCBub2RlIG9mIGEgY2hhaW4gdG8gdGVhcmRvd24gd2F0Y2hlciBv
        biB0aGUgc3BlY2lmaWVkCi8vIHBhdGgKQ2hhaW5Ob2RlUHJvdG90eXBlLnJl
        bW92ZSA9IGZ1bmN0aW9uKHBhdGgpIHsKICB2YXIgb2JqLCB0dXBsZSwga2V5
        LCBzcmMsIHBhdGhzOwoKICBwYXRocyA9IHRoaXMuX3BhdGhzOwogIGlmIChw
        YXRoc1twYXRoXSA+IDApIHsgcGF0aHNbcGF0aF0tLTsgfQoKICBvYmogPSB0
        aGlzLnZhbHVlKCk7CiAgdHVwbGUgPSBub3JtYWxpemVUdXBsZShvYmosIHBh
        dGgpOwogIGlmICh0dXBsZVswXSA9PT0gb2JqKSB7CiAgICBwYXRoID0gdHVw
        bGVbMV07CiAgICBrZXkgID0gZmlyc3RLZXkocGF0aCk7CiAgICBwYXRoID0g
        cGF0aC5zbGljZShrZXkubGVuZ3RoKzEpOwogIH0gZWxzZSB7CiAgICBzcmMg
        ID0gdHVwbGVbMF07CiAgICBrZXkgID0gcGF0aC5zbGljZSgwLCAwLSh0dXBs
        ZVsxXS5sZW5ndGgrMSkpOwogICAgcGF0aCA9IHR1cGxlWzFdOwogIH0KCiAg
        dHVwbGUubGVuZ3RoID0gMDsKICB0aGlzLnVuY2hhaW4oa2V5LCBwYXRoKTsK
        fTsKCkNoYWluTm9kZVByb3RvdHlwZS5jb3VudCA9IDA7CgpDaGFpbk5vZGVQ
        cm90b3R5cGUuY2hhaW4gPSBmdW5jdGlvbihrZXksIHBhdGgsIHNyYykgewog
        IHZhciBjaGFpbnMgPSB0aGlzLl9jaGFpbnMsIG5vZGU7CiAgaWYgKCFjaGFp
        bnMpIHsgY2hhaW5zID0gdGhpcy5fY2hhaW5zID0ge307IH0KCiAgbm9kZSA9
        IGNoYWluc1trZXldOwogIGlmICghbm9kZSkgeyBub2RlID0gY2hhaW5zW2tl
        eV0gPSBuZXcgQ2hhaW5Ob2RlKHRoaXMsIGtleSwgc3JjKTsgfQogIG5vZGUu
        Y291bnQrKzsgLy8gY291bnQgY2hhaW5zLi4uCgogIC8vIGNoYWluIHJlc3Qg
        b2YgcGF0aCBpZiB0aGVyZSBpcyBvbmUKICBpZiAocGF0aCAmJiBwYXRoLmxl
        bmd0aD4wKSB7CiAgICBrZXkgPSBmaXJzdEtleShwYXRoKTsKICAgIHBhdGgg
        PSBwYXRoLnNsaWNlKGtleS5sZW5ndGgrMSk7CiAgICBub2RlLmNoYWluKGtl
        eSwgcGF0aCk7IC8vIE5PVEU6IG5vIHNyYyBtZWFucyBpdCB3aWxsIG9ic2Vy
        dmUgY2hhbmdlcy4uLgogIH0KfTsKCkNoYWluTm9kZVByb3RvdHlwZS51bmNo
        YWluID0gZnVuY3Rpb24oa2V5LCBwYXRoKSB7CiAgdmFyIGNoYWlucyA9IHRo
        aXMuX2NoYWlucywgbm9kZSA9IGNoYWluc1trZXldOwoKICAvLyB1bmNoYWlu
        IHJlc3Qgb2YgcGF0aCBmaXJzdC4uLgogIGlmIChwYXRoICYmIHBhdGgubGVu
        Z3RoPjEpIHsKICAgIGtleSAgPSBmaXJzdEtleShwYXRoKTsKICAgIHBhdGgg
        PSBwYXRoLnNsaWNlKGtleS5sZW5ndGgrMSk7CiAgICBub2RlLnVuY2hhaW4o
        a2V5LCBwYXRoKTsKICB9CgogIC8vIGRlbGV0ZSBub2RlIGlmIG5lZWRlZC4K
        ICBub2RlLmNvdW50LS07CiAgaWYgKG5vZGUuY291bnQ8PTApIHsKICAgIGRl
        bGV0ZSBjaGFpbnNbbm9kZS5fa2V5XTsKICAgIG5vZGUuZGVzdHJveSgpOwog
        IH0KCn07CgpDaGFpbk5vZGVQcm90b3R5cGUud2lsbENoYW5nZSA9IGZ1bmN0
        aW9uKGV2ZW50cykgewogIHZhciBjaGFpbnMgPSB0aGlzLl9jaGFpbnM7CiAg
        aWYgKGNoYWlucykgewogICAgZm9yKHZhciBrZXkgaW4gY2hhaW5zKSB7CiAg
        ICAgIGlmICghY2hhaW5zLmhhc093blByb3BlcnR5KGtleSkpIHsgY29udGlu
        dWU7IH0KICAgICAgY2hhaW5zW2tleV0ud2lsbENoYW5nZShldmVudHMpOwog
        ICAgfQogIH0KCiAgaWYgKHRoaXMuX3BhcmVudCkgeyB0aGlzLl9wYXJlbnQu
        Y2hhaW5XaWxsQ2hhbmdlKHRoaXMsIHRoaXMuX2tleSwgMSwgZXZlbnRzKTsg
        fQp9OwoKQ2hhaW5Ob2RlUHJvdG90eXBlLmNoYWluV2lsbENoYW5nZSA9IGZ1
        bmN0aW9uKGNoYWluLCBwYXRoLCBkZXB0aCwgZXZlbnRzKSB7CiAgaWYgKHRo
        aXMuX2tleSkgeyBwYXRoID0gdGhpcy5fa2V5ICsgJy4nICsgcGF0aDsgfQoK
        ICBpZiAodGhpcy5fcGFyZW50KSB7CiAgICB0aGlzLl9wYXJlbnQuY2hhaW5X
        aWxsQ2hhbmdlKHRoaXMsIHBhdGgsIGRlcHRoKzEsIGV2ZW50cyk7CiAgfSBl
        bHNlIHsKICAgIGlmIChkZXB0aCA+IDEpIHsKICAgICAgZXZlbnRzLnB1c2go
        dGhpcy52YWx1ZSgpLCBwYXRoKTsKICAgIH0KICAgIHBhdGggPSAndGhpcy4n
        ICsgcGF0aDsKICAgIGlmICh0aGlzLl9wYXRoc1twYXRoXSA+IDApIHsKICAg
        ICAgZXZlbnRzLnB1c2godGhpcy52YWx1ZSgpLCBwYXRoKTsKICAgIH0KICB9
        Cn07CgpDaGFpbk5vZGVQcm90b3R5cGUuY2hhaW5EaWRDaGFuZ2UgPSBmdW5j
        dGlvbihjaGFpbiwgcGF0aCwgZGVwdGgsIGV2ZW50cykgewogIGlmICh0aGlz
        Ll9rZXkpIHsgcGF0aCA9IHRoaXMuX2tleSArICcuJyArIHBhdGg7IH0KICBp
        ZiAodGhpcy5fcGFyZW50KSB7CiAgICB0aGlzLl9wYXJlbnQuY2hhaW5EaWRD
        aGFuZ2UodGhpcywgcGF0aCwgZGVwdGgrMSwgZXZlbnRzKTsKICB9IGVsc2Ug
        ewogICAgaWYgKGRlcHRoID4gMSkgewogICAgICBldmVudHMucHVzaCh0aGlz
        LnZhbHVlKCksIHBhdGgpOwogICAgfQogICAgcGF0aCA9ICd0aGlzLicgKyBw
        YXRoOwogICAgaWYgKHRoaXMuX3BhdGhzW3BhdGhdID4gMCkgewogICAgICBl
        dmVudHMucHVzaCh0aGlzLnZhbHVlKCksIHBhdGgpOwogICAgfQogIH0KfTsK
        CkNoYWluTm9kZVByb3RvdHlwZS5kaWRDaGFuZ2UgPSBmdW5jdGlvbihldmVu
        dHMpIHsKICAvLyBpbnZhbGlkYXRlIG15IG93biB2YWx1ZSBmaXJzdC4KICBp
        ZiAodGhpcy5fd2F0Y2hpbmcpIHsKICAgIHZhciBvYmogPSB0aGlzLl9wYXJl
        bnQudmFsdWUoKTsKICAgIGlmIChvYmogIT09IHRoaXMuX29iamVjdCkgewog
        ICAgICByZW1vdmVDaGFpbldhdGNoZXIodGhpcy5fb2JqZWN0LCB0aGlzLl9r
        ZXksIHRoaXMpOwogICAgICB0aGlzLl9vYmplY3QgPSBvYmo7CiAgICAgIGFk
        ZENoYWluV2F0Y2hlcihvYmosIHRoaXMuX2tleSwgdGhpcyk7CiAgICB9CiAg
        ICB0aGlzLl92YWx1ZSAgPSB1bmRlZmluZWQ7CgogICAgLy8gU3BlY2lhbC1j
        YXNlOiB0aGUgRWFjaFByb3h5IHJlbGllcyBvbiBpbW1lZGlhdGUgZXZhbHVh
        dGlvbiB0bwogICAgLy8gZXN0YWJsaXNoIGl0cyBvYnNlcnZlcnMuCiAgICBp
        ZiAodGhpcy5fcGFyZW50ICYmIHRoaXMuX3BhcmVudC5fa2V5ID09PSAnQGVh
        Y2gnKQogICAgICB0aGlzLnZhbHVlKCk7CiAgfQoKICAvLyB0aGVuIG5vdGlm
        eSBjaGFpbnMuLi4KICB2YXIgY2hhaW5zID0gdGhpcy5fY2hhaW5zOwogIGlm
        IChjaGFpbnMpIHsKICAgIGZvcih2YXIga2V5IGluIGNoYWlucykgewogICAg
        ICBpZiAoIWNoYWlucy5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7IGNvbnRpbnVl
        OyB9CiAgICAgIGNoYWluc1trZXldLmRpZENoYW5nZShldmVudHMpOwogICAg
        fQogIH0KCiAgLy8gaWYgbm8gZXZlbnRzIGFyZSBwYXNzZWQgaW4gdGhlbiB3
        ZSBvbmx5IGNhcmUgYWJvdXQgdGhlIGFib3ZlIHdpcmluZyB1cGRhdGUKICBp
        ZiAoZXZlbnRzID09PSBudWxsKSB7IHJldHVybjsgfQoKICAvLyBhbmQgZmlu
        YWxseSB0ZWxsIHBhcmVudCBhYm91dCBteSBwYXRoIGNoYW5naW5nLi4uCiAg
        aWYgKHRoaXMuX3BhcmVudCkgeyB0aGlzLl9wYXJlbnQuY2hhaW5EaWRDaGFu
        Z2UodGhpcywgdGhpcy5fa2V5LCAxLCBldmVudHMpOyB9Cn07CgpFbWJlci5m
        aW5pc2hDaGFpbnMgPSBmdW5jdGlvbihvYmopIHsKICAvLyBXZSBvbmx5IGNy
        ZWF0ZSBtZXRhIGlmIHdlIHJlYWxseSBoYXZlIHRvCiAgdmFyIG0gPSBvYmpb
        TUVUQV9LRVldLCBjaGFpbnMgPSBtICYmIG0uY2hhaW5zOwogIGlmIChjaGFp
        bnMpIHsKICAgIGlmIChjaGFpbnMudmFsdWUoKSAhPT0gb2JqKSB7CiAgICAg
        IG1ldGFGb3Iob2JqKS5jaGFpbnMgPSBjaGFpbnMgPSBjaGFpbnMuY29weShv
        YmopOwogICAgfSBlbHNlIHsKICAgICAgY2hhaW5zLmRpZENoYW5nZShudWxs
        KTsKICAgIH0KICB9Cn07Cgp9KSgpOwoKCgooZnVuY3Rpb24oKSB7Ci8qKgog
        IEBtb2R1bGUgZW1iZXItbWV0YWwKICAqLwoKdmFyIGZvckVhY2ggPSBFbWJl
        ci5FbnVtZXJhYmxlVXRpbHMuZm9yRWFjaCwKQlJBQ0VfRVhQQU5TSU9OID0g
        L14oKD86W15cLl0qXC4pKilceyguKilcfSQvOwoKLyoqCiAgRXhwYW5kcyBg
        cGF0dGVybmAsIGludm9raW5nIGBjYWxsYmFja2AgZm9yIGVhY2ggZXhwYW5z
        aW9uLgoKICBUaGUgb25seSBwYXR0ZXJuIHN1cHBvcnRlZCBpcyBicmFjZS1l
        eHBhbnNpb24sIGFueXRoaW5nIGVsc2Ugd2lsbCBiZSBwYXNzZWQKICBvbmNl
        IHRvIGBjYWxsYmFja2AgZGlyZWN0bHkuIEJyYWNlIGV4cGFuc2lvbiBjYW4g
        b25seSBhcHBlYXIgYXQgdGhlIGVuZCBvZiBhCiAgcGF0dGVybiwgZm9yIGV4
        YW1wbGUgYXMgdGhlIGxhc3QgaXRlbSBpbiBhIGNoYWluLgoKICBFeGFtcGxl
        CiAgYGBganMKICBmdW5jdGlvbiBlY2hvKGFyZyl7IGNvbnNvbGUubG9nKGFy
        Zyk7IH0KCiAgRW1iZXIuZXhwYW5kUHJvcGVydGllcygnZm9vLmJhcicsIGVj
        aG8pOyAgICAgICAgLy89PiAnZm9vLmJhcicKICBFbWJlci5leHBhbmRQcm9w
        ZXJ0aWVzKCd7Zm9vLGJhcn0nLCBlY2hvKTsgICAgICAvLz0+ICdmb28nLCAn
        YmFyJwogIEVtYmVyLmV4cGFuZFByb3BlcnRpZXMoJ2Zvby57YmFyLGJhen0n
        LCBlY2hvKTsgIC8vPT4gJ2Zvby5iYXInLCAnZm9vLmJheicKICBFbWJlci5l
        eHBhbmRQcm9wZXJ0aWVzKCd7Zm9vLGJhcn0uYmF6JywgZWNobyk7ICAvLz0+
        ICd7Zm9vLGJhcn0uYmF6JwogIGBgYAoKICBAbWV0aG9kCiAgQHByaXZhdGUK
        ICBAcGFyYW0ge3N0cmluZ30gcGF0dGVybiBUaGUgcHJvcGVydHkgcGF0dGVy
        biB0byBleHBhbmQuCiAgQHBhcmFtIHtmdW5jdGlvbn0gY2FsbGJhY2sgVGhl
        IGNhbGxiYWNrIHRvIGludm9rZS4gIEl0IGlzIGludm9rZWQgb25jZSBwZXIK
        ICBleHBhbnNpb24sIGFuZCBpcyBwYXNzZWQgdGhlIGV4cGFuc2lvbi4KICAq
        LwpFbWJlci5leHBhbmRQcm9wZXJ0aWVzID0gZnVuY3Rpb24gKHBhdHRlcm4s
        IGNhbGxiYWNrKSB7CiAgdmFyIG1hdGNoLCBwcmVmaXgsIGxpc3Q7CgogIGlm
        IChtYXRjaCA9IEJSQUNFX0VYUEFOU0lPTi5leGVjKHBhdHRlcm4pKSB7CiAg
        ICBwcmVmaXggPSBtYXRjaFsxXTsKICAgIGxpc3QgPSBtYXRjaFsyXTsKCiAg
        ICBmb3JFYWNoKGxpc3Quc3BsaXQoJywnKSwgZnVuY3Rpb24gKHN1ZmZpeCkg
        ewogICAgICBjYWxsYmFjayhwcmVmaXggKyBzdWZmaXgpOwogICAgfSk7CiAg
        fSBlbHNlIHsKICAgIGNhbGxiYWNrKHBhdHRlcm4pOwogIH0KfTsKCn0pKCk7
        CgoKCihmdW5jdGlvbigpIHsKdmFyIG1ldGFGb3IgPSBFbWJlci5tZXRhLCAv
        LyB1dGlscy5qcwogICAgdHlwZU9mID0gRW1iZXIudHlwZU9mLCAvLyB1dGls
        cy5qcwogICAgQ2hhaW5Ob2RlID0gRW1iZXIuX0NoYWluTm9kZTsgLy8gY2hh
        aW5zLmpzCgovLyBnZXQgdGhlIGNoYWlucyBmb3IgdGhlIGN1cnJlbnQgb2Jq
        ZWN0LiBJZiB0aGUgY3VycmVudCBvYmplY3QgaGFzCi8vIGNoYWlucyBpbmhl
        cml0ZWQgZnJvbSB0aGUgcHJvdG8gdGhleSB3aWxsIGJlIGNsb25lZCBhbmQg
        cmVjb25maWd1cmVkIGZvcgovLyB0aGUgY3VycmVudCBvYmplY3QuCmZ1bmN0
        aW9uIGNoYWluc0ZvcihvYmosIG1ldGEpIHsKICB2YXIgbSA9IG1ldGEgfHwg
        bWV0YUZvcihvYmopLCByZXQgPSBtLmNoYWluczsKICBpZiAoIXJldCkgewog
        ICAgcmV0ID0gbS5jaGFpbnMgPSBuZXcgQ2hhaW5Ob2RlKG51bGwsIG51bGws
        IG9iaik7CiAgfSBlbHNlIGlmIChyZXQudmFsdWUoKSAhPT0gb2JqKSB7CiAg
        ICByZXQgPSBtLmNoYWlucyA9IHJldC5jb3B5KG9iaik7CiAgfQogIHJldHVy
        biByZXQ7Cn0KCkVtYmVyLndhdGNoUGF0aCA9IGZ1bmN0aW9uKG9iaiwga2V5
        UGF0aCwgbWV0YSkgewogIC8vIGNhbid0IHdhdGNoIGxlbmd0aCBvbiBBcnJh
        eSAtIGl0IGlzIHNwZWNpYWwuLi4KICBpZiAoa2V5UGF0aCA9PT0gJ2xlbmd0
        aCcgJiYgdHlwZU9mKG9iaikgPT09ICdhcnJheScpIHsgcmV0dXJuOyB9Cgog
        IHZhciBtID0gbWV0YSB8fCBtZXRhRm9yKG9iaiksIHdhdGNoaW5nID0gbS53
        YXRjaGluZzsKCiAgaWYgKCF3YXRjaGluZ1trZXlQYXRoXSkgeyAvLyBhY3Rp
        dmF0ZSB3YXRjaGluZyBmaXJzdCB0aW1lCiAgICB3YXRjaGluZ1trZXlQYXRo
        XSA9IDE7CiAgICBjaGFpbnNGb3Iob2JqLCBtKS5hZGQoa2V5UGF0aCk7CiAg
        fSBlbHNlIHsKICAgIHdhdGNoaW5nW2tleVBhdGhdID0gKHdhdGNoaW5nW2tl
        eVBhdGhdIHx8IDApICsgMTsKICB9Cn07CgpFbWJlci51bndhdGNoUGF0aCA9
        IGZ1bmN0aW9uKG9iaiwga2V5UGF0aCwgbWV0YSkgewogIHZhciBtID0gbWV0
        YSB8fCBtZXRhRm9yKG9iaiksIHdhdGNoaW5nID0gbS53YXRjaGluZzsKCiAg
        aWYgKHdhdGNoaW5nW2tleVBhdGhdID09PSAxKSB7CiAgICB3YXRjaGluZ1tr
        ZXlQYXRoXSA9IDA7CiAgICBjaGFpbnNGb3Iob2JqLCBtKS5yZW1vdmUoa2V5
        UGF0aCk7CiAgfSBlbHNlIGlmICh3YXRjaGluZ1trZXlQYXRoXSA+IDEpIHsK
        ICAgIHdhdGNoaW5nW2tleVBhdGhdLS07CiAgfQp9Owp9KSgpOwoKCgooZnVu
        Y3Rpb24oKSB7Ci8qKgpAbW9kdWxlIGVtYmVyLW1ldGFsCiovCgp2YXIgbWV0
        YUZvciA9IEVtYmVyLm1ldGEsIC8vIHV0aWxzLmpzCiAgICBHVUlEX0tFWSA9
        IEVtYmVyLkdVSURfS0VZLCAvLyB1dGlscy5qcwogICAgTUVUQV9LRVkgPSBF
        bWJlci5NRVRBX0tFWSwgLy8gdXRpbHMuanMKICAgIHJlbW92ZUNoYWluV2F0
        Y2hlciA9IEVtYmVyLnJlbW92ZUNoYWluV2F0Y2hlciwKICAgIHdhdGNoS2V5
        ID0gRW1iZXIud2F0Y2hLZXksIC8vIHdhdGNoX2tleS5qcwogICAgdW53YXRj
        aEtleSA9IEVtYmVyLnVud2F0Y2hLZXksCiAgICB3YXRjaFBhdGggPSBFbWJl
        ci53YXRjaFBhdGgsIC8vIHdhdGNoX3BhdGguanMKICAgIHVud2F0Y2hQYXRo
        ID0gRW1iZXIudW53YXRjaFBhdGgsCiAgICB0eXBlT2YgPSBFbWJlci50eXBl
        T2YsIC8vIHV0aWxzLmpzCiAgICBnZW5lcmF0ZUd1aWQgPSBFbWJlci5nZW5l
        cmF0ZUd1aWQsCiAgICBJU19QQVRIID0gL1tcLlwqXS87CgovLyByZXR1cm5z
        IHRydWUgaWYgdGhlIHBhc3NlZCBwYXRoIGlzIGp1c3QgYSBrZXlOYW1lCmZ1
        bmN0aW9uIGlzS2V5TmFtZShwYXRoKSB7CiAgcmV0dXJuIHBhdGg9PT0nKicg
        fHwgIUlTX1BBVEgudGVzdChwYXRoKTsKfQoKLyoqCiAgU3RhcnRzIHdhdGNo
        aW5nIGEgcHJvcGVydHkgb24gYW4gb2JqZWN0LiBXaGVuZXZlciB0aGUgcHJv
        cGVydHkgY2hhbmdlcywKICBpbnZva2VzIGBFbWJlci5wcm9wZXJ0eVdpbGxD
        aGFuZ2VgIGFuZCBgRW1iZXIucHJvcGVydHlEaWRDaGFuZ2VgLiBUaGlzIGlz
        IHRoZQogIHByaW1pdGl2ZSB1c2VkIGJ5IG9ic2VydmVycyBhbmQgZGVwZW5k
        ZW50IGtleXM7IHVzdWFsbHkgeW91IHdpbGwgbmV2ZXIgY2FsbAogIHRoaXMg
        bWV0aG9kIGRpcmVjdGx5IGJ1dCBpbnN0ZWFkIHVzZSBoaWdoZXIgbGV2ZWwg
        bWV0aG9kcyBsaWtlCiAgYEVtYmVyLmFkZE9ic2VydmVyKClgCgogIEBwcml2
        YXRlCiAgQG1ldGhvZCB3YXRjaAogIEBmb3IgRW1iZXIKICBAcGFyYW0gb2Jq
        CiAgQHBhcmFtIHtTdHJpbmd9IGtleU5hbWUKKi8KRW1iZXIud2F0Y2ggPSBm
        dW5jdGlvbihvYmosIF9rZXlQYXRoLCBtKSB7CiAgLy8gY2FuJ3Qgd2F0Y2gg
        bGVuZ3RoIG9uIEFycmF5IC0gaXQgaXMgc3BlY2lhbC4uLgogIGlmIChfa2V5
        UGF0aCA9PT0gJ2xlbmd0aCcgJiYgdHlwZU9mKG9iaikgPT09ICdhcnJheScp
        IHsgcmV0dXJuOyB9CgogIGlmIChpc0tleU5hbWUoX2tleVBhdGgpKSB7CiAg
        ICB3YXRjaEtleShvYmosIF9rZXlQYXRoLCBtKTsKICB9IGVsc2UgewogICAg
        d2F0Y2hQYXRoKG9iaiwgX2tleVBhdGgsIG0pOwogIH0KfTsKCkVtYmVyLmlz
        V2F0Y2hpbmcgPSBmdW5jdGlvbiBpc1dhdGNoaW5nKG9iaiwga2V5KSB7CiAg
        dmFyIG1ldGEgPSBvYmpbTUVUQV9LRVldOwogIHJldHVybiAobWV0YSAmJiBt
        ZXRhLndhdGNoaW5nW2tleV0pID4gMDsKfTsKCkVtYmVyLndhdGNoLmZsdXNo
        UGVuZGluZyA9IEVtYmVyLmZsdXNoUGVuZGluZ0NoYWluczsKCkVtYmVyLnVu
        d2F0Y2ggPSBmdW5jdGlvbihvYmosIF9rZXlQYXRoLCBtKSB7CiAgLy8gY2Fu
        J3Qgd2F0Y2ggbGVuZ3RoIG9uIEFycmF5IC0gaXQgaXMgc3BlY2lhbC4uLgog
        IGlmIChfa2V5UGF0aCA9PT0gJ2xlbmd0aCcgJiYgdHlwZU9mKG9iaikgPT09
        ICdhcnJheScpIHsgcmV0dXJuOyB9CgogIGlmIChpc0tleU5hbWUoX2tleVBh
        dGgpKSB7CiAgICB1bndhdGNoS2V5KG9iaiwgX2tleVBhdGgsIG0pOwogIH0g
        ZWxzZSB7CiAgICB1bndhdGNoUGF0aChvYmosIF9rZXlQYXRoLCBtKTsKICB9
        Cn07CgovKioKICBDYWxsIG9uIGFuIG9iamVjdCB3aGVuIHlvdSBmaXJzdCBi
        ZWdldCBpdCBmcm9tIGFub3RoZXIgb2JqZWN0LiBUaGlzIHdpbGwKICBzZXR1
        cCBhbnkgY2hhaW5lZCB3YXRjaGVycyBvbiB0aGUgb2JqZWN0IGluc3RhbmNl
        IGFzIG5lZWRlZC4gVGhpcyBtZXRob2QgaXMKICBzYWZlIHRvIGNhbGwgbXVs
        dGlwbGUgdGltZXMuCgogIEBwcml2YXRlCiAgQG1ldGhvZCByZXdhdGNoCiAg
        QGZvciBFbWJlcgogIEBwYXJhbSBvYmoKKi8KRW1iZXIucmV3YXRjaCA9IGZ1
        bmN0aW9uKG9iaikgewogIHZhciBtID0gb2JqW01FVEFfS0VZXSwgY2hhaW5z
        ID0gbSAmJiBtLmNoYWluczsKCiAgLy8gbWFrZSBzdXJlIHRoZSBvYmplY3Qg
        aGFzIGl0cyBvd24gZ3VpZC4KICBpZiAoR1VJRF9LRVkgaW4gb2JqICYmICFv
        YmouaGFzT3duUHJvcGVydHkoR1VJRF9LRVkpKSB7CiAgICBnZW5lcmF0ZUd1
        aWQob2JqKTsKICB9CgogIC8vIG1ha2Ugc3VyZSBhbnkgY2hhaW5lZCB3YXRj
        aGVycyB1cGRhdGUuCiAgaWYgKGNoYWlucyAmJiBjaGFpbnMudmFsdWUoKSAh
        PT0gb2JqKSB7CiAgICBtLmNoYWlucyA9IGNoYWlucy5jb3B5KG9iaik7CiAg
        fQp9OwoKdmFyIE5PREVfU1RBQ0sgPSBbXTsKCi8qKgogIFRlYXJzIGRvd24g
        dGhlIG1ldGEgb24gYW4gb2JqZWN0IHNvIHRoYXQgaXQgY2FuIGJlIGdhcmJh
        Z2UgY29sbGVjdGVkLgogIE11bHRpcGxlIGNhbGxzIHdpbGwgaGF2ZSBubyBl
        ZmZlY3QuCgogIEBtZXRob2QgZGVzdHJveQogIEBmb3IgRW1iZXIKICBAcGFy
        YW0ge09iamVjdH0gb2JqICB0aGUgb2JqZWN0IHRvIGRlc3Ryb3kKICBAcmV0
        dXJuIHt2b2lkfQoqLwpFbWJlci5kZXN0cm95ID0gZnVuY3Rpb24gKG9iaikg
        ewogIHZhciBtZXRhID0gb2JqW01FVEFfS0VZXSwgbm9kZSwgbm9kZXMsIGtl
        eSwgbm9kZU9iamVjdDsKICBpZiAobWV0YSkgewogICAgb2JqW01FVEFfS0VZ
        XSA9IG51bGw7CiAgICAvLyByZW1vdmUgY2hhaW5XYXRjaGVycyB0byByZW1v
        dmUgY2lyY3VsYXIgcmVmZXJlbmNlcyB0aGF0IHdvdWxkIHByZXZlbnQgR0MK
        ICAgIG5vZGUgPSBtZXRhLmNoYWluczsKICAgIGlmIChub2RlKSB7CiAgICAg
        IE5PREVfU1RBQ0sucHVzaChub2RlKTsKICAgICAgLy8gcHJvY2VzcyB0cmVl
        CiAgICAgIHdoaWxlIChOT0RFX1NUQUNLLmxlbmd0aCA+IDApIHsKICAgICAg
        ICBub2RlID0gTk9ERV9TVEFDSy5wb3AoKTsKICAgICAgICAvLyBwdXNoIGNo
        aWxkcmVuCiAgICAgICAgbm9kZXMgPSBub2RlLl9jaGFpbnM7CiAgICAgICAg
        aWYgKG5vZGVzKSB7CiAgICAgICAgICBmb3IgKGtleSBpbiBub2Rlcykgewog
        ICAgICAgICAgICBpZiAobm9kZXMuaGFzT3duUHJvcGVydHkoa2V5KSkgewog
        ICAgICAgICAgICAgIE5PREVfU1RBQ0sucHVzaChub2Rlc1trZXldKTsKICAg
        ICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICAvLyBy
        ZW1vdmUgY2hhaW5XYXRjaGVyIGluIG5vZGUgb2JqZWN0CiAgICAgICAgaWYg
        KG5vZGUuX3dhdGNoaW5nKSB7CiAgICAgICAgICBub2RlT2JqZWN0ID0gbm9k
        ZS5fb2JqZWN0OwogICAgICAgICAgaWYgKG5vZGVPYmplY3QpIHsKICAgICAg
        ICAgICAgcmVtb3ZlQ2hhaW5XYXRjaGVyKG5vZGVPYmplY3QsIG5vZGUuX2tl
        eSwgbm9kZSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9
        CiAgfQp9OwoKfSkoKTsKCgoKKGZ1bmN0aW9uKCkgewovKioKQG1vZHVsZSBl
        bWJlci1tZXRhbAoqLwoKRW1iZXIud2FybigiVGhlIENQX0RFRkFVTFRfQ0FD
        SEVBQkxFIGZsYWcgaGFzIGJlZW4gcmVtb3ZlZCBhbmQgY29tcHV0ZWQgcHJv
        cGVydGllcyBhcmUgYWx3YXlzIGNhY2hlZCBieSBkZWZhdWx0LiBVc2UgYHZv
        bGF0aWxlYCBpZiB5b3UgZG9uJ3Qgd2FudCBjYWNoaW5nLiIsIEVtYmVyLkVO
        Vi5DUF9ERUZBVUxUX0NBQ0hFQUJMRSAhPT0gZmFsc2UpOwoKCnZhciBnZXQg
        PSBFbWJlci5nZXQsCiAgICBzZXQgPSBFbWJlci5zZXQsCiAgICBtZXRhRm9y
        ID0gRW1iZXIubWV0YSwKICAgIGFfc2xpY2UgPSBbXS5zbGljZSwKICAgIG9f
        Y3JlYXRlID0gRW1iZXIuY3JlYXRlLAogICAgTUVUQV9LRVkgPSBFbWJlci5N
        RVRBX0tFWSwKICAgIHdhdGNoID0gRW1iZXIud2F0Y2gsCiAgICB1bndhdGNo
        ID0gRW1iZXIudW53YXRjaDsKCnZhciBleHBhbmRQcm9wZXJ0aWVzID0gRW1i
        ZXIuZXhwYW5kUHJvcGVydGllczsKCi8vIC4uLi4uLi4uLi4uLi4uLi4uLi4u
        Li4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4KLy8gREVQ
        RU5ERU5UIEtFWVMKLy8KCi8vIGRhdGEgc3RydWN0dXJlOgovLyAgbWV0YS5k
        ZXBzID0gewovLyAgICdkZXBLZXknOiB7Ci8vICAgICAna2V5TmFtZSc6IGNv
        dW50LAovLyAgIH0KLy8gIH0KCi8qCiAgVGhpcyBmdW5jdGlvbiByZXR1cm5z
        IGEgbWFwIG9mIHVuaXF1ZSBkZXBlbmRlbmNpZXMgZm9yIGEKICBnaXZlbiBv
        YmplY3QgYW5kIGtleS4KKi8KZnVuY3Rpb24ga2V5c0ZvckRlcChkZXBzTWV0
        YSwgZGVwS2V5KSB7CiAgdmFyIGtleXMgPSBkZXBzTWV0YVtkZXBLZXldOwog
        IGlmICgha2V5cykgewogICAgLy8gaWYgdGhlcmUgYXJlIG5vIGRlcGVuZGVu
        Y2llcyB5ZXQgZm9yIGEgdGhlIGdpdmVuIGtleQogICAgLy8gY3JlYXRlIGEg
        bmV3IGVtcHR5IGxpc3Qgb2YgZGVwZW5kZW5jaWVzIGZvciB0aGUga2V5CiAg
        ICBrZXlzID0gZGVwc01ldGFbZGVwS2V5XSA9IHt9OwogIH0gZWxzZSBpZiAo
        IWRlcHNNZXRhLmhhc093blByb3BlcnR5KGRlcEtleSkpIHsKICAgIC8vIG90
        aGVyd2lzZSBpZiB0aGUgZGVwZW5kZW5jeSBsaXN0IGlzIGluaGVyaXRlZCBm
        cm9tCiAgICAvLyBhIHN1cGVyY2xhc3MsIGNsb25lIHRoZSBoYXNoCiAgICBr
        ZXlzID0gZGVwc01ldGFbZGVwS2V5XSA9IG9fY3JlYXRlKGtleXMpOwogIH0K
        ICByZXR1cm4ga2V5czsKfQoKZnVuY3Rpb24gbWV0YUZvckRlcHMobWV0YSkg
        ewogIHJldHVybiBrZXlzRm9yRGVwKG1ldGEsICdkZXBzJyk7Cn0KCmZ1bmN0
        aW9uIGFkZERlcGVuZGVudEtleXMoZGVzYywgb2JqLCBrZXlOYW1lLCBtZXRh
        KSB7CiAgLy8gdGhlIGRlc2NyaXB0b3IgaGFzIGEgbGlzdCBvZiBkZXBlbmRl
        bnQga2V5cywgc28KICAvLyBhZGQgYWxsIG9mIGl0cyBkZXBlbmRlbnQga2V5
        cy4KICB2YXIgZGVwS2V5cyA9IGRlc2MuX2RlcGVuZGVudEtleXMsIGRlcHNN
        ZXRhLCBpZHgsIGxlbiwgZGVwS2V5LCBrZXlzOwogIGlmICghZGVwS2V5cykg
        cmV0dXJuOwoKICBkZXBzTWV0YSA9IG1ldGFGb3JEZXBzKG1ldGEpOwoKICBm
        b3IoaWR4ID0gMCwgbGVuID0gZGVwS2V5cy5sZW5ndGg7IGlkeCA8IGxlbjsg
        aWR4KyspIHsKICAgIGRlcEtleSA9IGRlcEtleXNbaWR4XTsKICAgIC8vIExv
        b2t1cCBrZXlzIG1ldGEgZm9yIGRlcEtleQogICAga2V5cyA9IGtleXNGb3JE
        ZXAoZGVwc01ldGEsIGRlcEtleSk7CiAgICAvLyBJbmNyZW1lbnQgdGhlIG51
        bWJlciBvZiB0aW1lcyBkZXBLZXkgZGVwZW5kcyBvbiBrZXlOYW1lLgogICAg
        a2V5c1trZXlOYW1lXSA9IChrZXlzW2tleU5hbWVdIHx8IDApICsgMTsKICAg
        IC8vIFdhdGNoIHRoZSBkZXBLZXkKICAgIHdhdGNoKG9iaiwgZGVwS2V5LCBt
        ZXRhKTsKICB9Cn0KCmZ1bmN0aW9uIHJlbW92ZURlcGVuZGVudEtleXMoZGVz
        Yywgb2JqLCBrZXlOYW1lLCBtZXRhKSB7CiAgLy8gdGhlIGRlc2NyaXB0b3Ig
        aGFzIGEgbGlzdCBvZiBkZXBlbmRlbnQga2V5cywgc28KICAvLyBhZGQgYWxs
        IG9mIGl0cyBkZXBlbmRlbnQga2V5cy4KICB2YXIgZGVwS2V5cyA9IGRlc2Mu
        X2RlcGVuZGVudEtleXMsIGRlcHNNZXRhLCBpZHgsIGxlbiwgZGVwS2V5LCBr
        ZXlzOwogIGlmICghZGVwS2V5cykgcmV0dXJuOwoKICBkZXBzTWV0YSA9IG1l
        dGFGb3JEZXBzKG1ldGEpOwoKICBmb3IoaWR4ID0gMCwgbGVuID0gZGVwS2V5
        cy5sZW5ndGg7IGlkeCA8IGxlbjsgaWR4KyspIHsKICAgIGRlcEtleSA9IGRl
        cEtleXNbaWR4XTsKICAgIC8vIExvb2t1cCBrZXlzIG1ldGEgZm9yIGRlcEtl
        eQogICAga2V5cyA9IGtleXNGb3JEZXAoZGVwc01ldGEsIGRlcEtleSk7CiAg
        ICAvLyBJbmNyZW1lbnQgdGhlIG51bWJlciBvZiB0aW1lcyBkZXBLZXkgZGVw
        ZW5kcyBvbiBrZXlOYW1lLgogICAga2V5c1trZXlOYW1lXSA9IChrZXlzW2tl
        eU5hbWVdIHx8IDApIC0gMTsKICAgIC8vIFdhdGNoIHRoZSBkZXBLZXkKICAg
        IHVud2F0Y2gob2JqLCBkZXBLZXksIG1ldGEpOwogIH0KfQoKLy8gLi4uLi4u
        Li4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4u
        Li4uLi4uLgovLyBDT01QVVRFRCBQUk9QRVJUWQovLwoKLyoqCiAgQSBjb21w
        dXRlZCBwcm9wZXJ0eSB0cmFuc2Zvcm1zIGFuIG9iamVjdHMgZnVuY3Rpb24g
        aW50byBhIHByb3BlcnR5LgoKICBCeSBkZWZhdWx0IHRoZSBmdW5jdGlvbiBi
        YWNraW5nIHRoZSBjb21wdXRlZCBwcm9wZXJ0eSB3aWxsIG9ubHkgYmUgY2Fs
        bGVkCiAgb25jZSBhbmQgdGhlIHJlc3VsdCB3aWxsIGJlIGNhY2hlZC4gWW91
        IGNhbiBzcGVjaWZ5IHZhcmlvdXMgcHJvcGVydGllcwogIHRoYXQgeW91ciBj
        b21wdXRlZCBwcm9wZXJ0eSBpcyBkZXBlbmRlbnQgb24uIFRoaXMgd2lsbCBm
        b3JjZSB0aGUgY2FjaGVkCiAgcmVzdWx0IHRvIGJlIHJlY29tcHV0ZWQgaWYg
        dGhlIGRlcGVuZGVuY2llcyBhcmUgbW9kaWZpZWQuCgogIEluIHRoZSBmb2xs
        b3dpbmcgZXhhbXBsZSB3ZSBkZWNsYXJlIGEgY29tcHV0ZWQgcHJvcGVydHkg
        KGJ5IGNhbGxpbmcKICBgLnByb3BlcnR5KClgIG9uIHRoZSBmdWxsTmFtZSBm
        dW5jdGlvbikgYW5kIHNldHVwIHRoZSBwcm9wZXJ0aWVzCiAgZGVwZW5kZW5j
        aWVzIChkZXBlbmRpbmcgb24gZmlyc3ROYW1lIGFuZCBsYXN0TmFtZSkuIFRo
        ZSBmdWxsTmFtZSBmdW5jdGlvbgogIHdpbGwgYmUgY2FsbGVkIG9uY2UgKHJl
        Z2FyZGxlc3Mgb2YgaG93IG1hbnkgdGltZXMgaXQgaXMgYWNjZXNzZWQpIGFz
        IGxvbmcKICBhcyBpdCdzIGRlcGVuZGVuY2llcyBoYXZlIG5vdCBiZWVuIGNo
        YW5nZWQuIE9uY2UgZmlyc3ROYW1lIG9yIGxhc3ROYW1lIGFyZSB1cGRhdGVk
        CiAgYW55IGZ1dHVyZSBjYWxscyAob3IgYW55dGhpbmcgYm91bmQpIHRvIGZ1
        bGxOYW1lIHdpbGwgaW5jb3Jwb3JhdGUgdGhlIG5ldwogIHZhbHVlcy4KCiAg
        YGBgamF2YXNjcmlwdAogIFBlcnNvbiA9IEVtYmVyLk9iamVjdC5leHRlbmQo
        ewogICAgLy8gdGhlc2Ugd2lsbCBiZSBzdXBwbGllZCBieSBgY3JlYXRlYAog
        ICAgZmlyc3ROYW1lOiBudWxsLAogICAgbGFzdE5hbWU6IG51bGwsCgogICAg
        ZnVsbE5hbWU6IGZ1bmN0aW9uKCkgewogICAgICB2YXIgZmlyc3ROYW1lID0g
        dGhpcy5nZXQoJ2ZpcnN0TmFtZScpOwogICAgICB2YXIgbGFzdE5hbWUgPSB0
        aGlzLmdldCgnbGFzdE5hbWUnKTsKCiAgICAgcmV0dXJuIGZpcnN0TmFtZSAr
        ICcgJyArIGxhc3ROYW1lOwogICAgfS5wcm9wZXJ0eSgnZmlyc3ROYW1lJywg
        J2xhc3ROYW1lJykKICB9KTsKCiAgdmFyIHRvbSA9IFBlcnNvbi5jcmVhdGUo
        ewogICAgZmlyc3ROYW1lOiAiVG9tIiwKICAgIGxhc3ROYW1lOiAiRGFsZSIK
        ICB9KTsKCiAgdG9tLmdldCgnZnVsbE5hbWUnKSAvLyAiVG9tIERhbGUiCiAg
        YGBgCgogIFlvdSBjYW4gYWxzbyBkZWZpbmUgd2hhdCBFbWJlciBzaG91bGQg
        ZG8gd2hlbiBzZXR0aW5nIGEgY29tcHV0ZWQgcHJvcGVydHkuCiAgSWYgeW91
        IHRyeSB0byBzZXQgYSBjb21wdXRlZCBwcm9wZXJ0eSwgaXQgd2lsbCBiZSBp
        bnZva2VkIHdpdGggdGhlIGtleSBhbmQKICB2YWx1ZSB5b3Ugd2FudCB0byBz
        ZXQgaXQgdG8uIFlvdSBjYW4gYWxzbyBhY2NlcHQgdGhlIHByZXZpb3VzIHZh
        bHVlIGFzIHRoZQogIHRoaXJkIHBhcmFtZXRlci4KCiAgYGBgamF2YXNjcmlw
        dAoKIFBlcnNvbiA9IEVtYmVyLk9iamVjdC5leHRlbmQoewogICAgLy8gdGhl
        c2Ugd2lsbCBiZSBzdXBwbGllZCBieSBgY3JlYXRlYAogICAgZmlyc3ROYW1l
        OiBudWxsLAogICAgbGFzdE5hbWU6IG51bGwsCgogICAgZnVsbE5hbWU6IGZ1
        bmN0aW9uKGtleSwgdmFsdWUsIG9sZFZhbHVlKSB7CiAgICAgIC8vIGdldHRl
        cgogICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMSkgewogICAgICAg
        IHZhciBmaXJzdE5hbWUgPSB0aGlzLmdldCgnZmlyc3ROYW1lJyk7CiAgICAg
        ICAgdmFyIGxhc3ROYW1lID0gdGhpcy5nZXQoJ2xhc3ROYW1lJyk7CgogICAg
        ICAgIHJldHVybiBmaXJzdE5hbWUgKyAnICcgKyBsYXN0TmFtZTsKCiAgICAg
        IC8vIHNldHRlcgogICAgICB9IGVsc2UgewogICAgICAgIHZhciBuYW1lID0g
        dmFsdWUuc3BsaXQoIiAiKTsKCiAgICAgICAgdGhpcy5zZXQoJ2ZpcnN0TmFt
        ZScsIG5hbWVbMF0pOwogICAgICAgIHRoaXMuc2V0KCdsYXN0TmFtZScsIG5h
        bWVbMV0pOwoKICAgICAgICByZXR1cm4gdmFsdWU7CiAgICAgIH0KICAgIH0u
        cHJvcGVydHkoJ2ZpcnN0TmFtZScsICdsYXN0TmFtZScpCiAgfSk7CgogIHZh
        ciBwZXJzb24gPSBQZXJzb24uY3JlYXRlKCk7CiAgcGVyc29uLnNldCgnZnVs
        bE5hbWUnLCAiUGV0ZXIgV2FnZW5ldCIpOwogIHBlcnNvbi5nZXQoJ2ZpcnN0
        TmFtZScpIC8vIFBldGVyCiAgcGVyc29uLmdldCgnbGFzdE5hbWUnKSAvLyBX
        YWdlbmV0CiAgYGBgCgogIEBjbGFzcyBDb21wdXRlZFByb3BlcnR5CiAgQG5h
        bWVzcGFjZSBFbWJlcgogIEBleHRlbmRzIEVtYmVyLkRlc2NyaXB0b3IKICBA
        Y29uc3RydWN0b3IKKi8KZnVuY3Rpb24gQ29tcHV0ZWRQcm9wZXJ0eShmdW5j
        LCBvcHRzKSB7CiAgdGhpcy5mdW5jID0gZnVuYzsKICAKICAgIHRoaXMuX2Rl
        cGVuZGVudEtleXMgPSBvcHRzICYmIG9wdHMuZGVwZW5kZW50S2V5czsKICAK
        CiAgdGhpcy5fY2FjaGVhYmxlID0gKG9wdHMgJiYgb3B0cy5jYWNoZWFibGUg
        IT09IHVuZGVmaW5lZCkgPyBvcHRzLmNhY2hlYWJsZSA6IHRydWU7CiAgdGhp
        cy5fcmVhZE9ubHkgPSBvcHRzICYmIChvcHRzLnJlYWRPbmx5ICE9PSB1bmRl
        ZmluZWQgfHwgISFvcHRzLnJlYWRPbmx5KTsKfQoKRW1iZXIuQ29tcHV0ZWRQ
        cm9wZXJ0eSA9IENvbXB1dGVkUHJvcGVydHk7CkNvbXB1dGVkUHJvcGVydHku
        cHJvdG90eXBlID0gbmV3IEVtYmVyLkRlc2NyaXB0b3IoKTsKCnZhciBDb21w
        dXRlZFByb3BlcnR5UHJvdG90eXBlID0gQ29tcHV0ZWRQcm9wZXJ0eS5wcm90
        b3R5cGU7CgoKLyoqCiAgUHJvcGVydGllcyBhcmUgY2FjaGVhYmxlIGJ5IGRl
        ZmF1bHQuIENvbXB1dGVkIHByb3BlcnR5IHdpbGwgYXV0b21hdGljYWxseQog
        IGNhY2hlIHRoZSByZXR1cm4gdmFsdWUgb2YgeW91ciBmdW5jdGlvbiB1bnRp
        bCBvbmUgb2YgdGhlIGRlcGVuZGVudCBrZXlzIGNoYW5nZXMuCgogIENhbGwg
        YHZvbGF0aWxlKClgIHRvIHNldCBpdCBpbnRvIG5vbi1jYWNoZWQgbW9kZS4g
        V2hlbiBpbiB0aGlzIG1vZGUKICB0aGUgY29tcHV0ZWQgcHJvcGVydHkgd2ls
        bCBub3QgYXV0b21hdGljYWxseSBjYWNoZSB0aGUgcmV0dXJuIHZhbHVlLgoK
        ICBIb3dldmVyLCBpZiBhIHByb3BlcnR5IGlzIHByb3Blcmx5IG9ic2VydmFi
        bGUsIHRoZXJlIGlzIG5vIHJlYXNvbiB0byBkaXNhYmxlCiAgY2FjaGluZy4K
        CiAgQG1ldGhvZCBjYWNoZWFibGUKICBAcGFyYW0ge0Jvb2xlYW59IGFGbGFn
        IG9wdGlvbmFsIHNldCB0byBgZmFsc2VgIHRvIGRpc2FibGUgY2FjaGluZwog
        IEByZXR1cm4ge0VtYmVyLkNvbXB1dGVkUHJvcGVydHl9IHRoaXMKICBAY2hh
        aW5hYmxlCiovCkNvbXB1dGVkUHJvcGVydHlQcm90b3R5cGUuY2FjaGVhYmxl
        ID0gZnVuY3Rpb24oYUZsYWcpIHsKICB0aGlzLl9jYWNoZWFibGUgPSBhRmxh
        ZyAhPT0gZmFsc2U7CiAgcmV0dXJuIHRoaXM7Cn07CgovKioKICBDYWxsIG9u
        IGEgY29tcHV0ZWQgcHJvcGVydHkgdG8gc2V0IGl0IGludG8gbm9uLWNhY2hl
        ZCBtb2RlLiBXaGVuIGluIHRoaXMKICBtb2RlIHRoZSBjb21wdXRlZCBwcm9w
        ZXJ0eSB3aWxsIG5vdCBhdXRvbWF0aWNhbGx5IGNhY2hlIHRoZSByZXR1cm4g
        dmFsdWUuCgogIGBgYGphdmFzY3JpcHQKICBNeUFwcC5vdXRzaWRlU2Vydmlj
        ZSA9IEVtYmVyLk9iamVjdC5leHRlbmQoewogICAgdmFsdWU6IGZ1bmN0aW9u
        KCkgewogICAgICByZXR1cm4gT3V0c2lkZVNlcnZpY2UuZ2V0VmFsdWUoKTsK
        ICAgIH0ucHJvcGVydHkoKS52b2xhdGlsZSgpCiAgfSkuY3JlYXRlKCk7CiAg
        YGBgCgogIEBtZXRob2Qgdm9sYXRpbGUKICBAcmV0dXJuIHtFbWJlci5Db21w
        dXRlZFByb3BlcnR5fSB0aGlzCiAgQGNoYWluYWJsZQoqLwpDb21wdXRlZFBy
        b3BlcnR5UHJvdG90eXBlLnZvbGF0aWxlID0gZnVuY3Rpb24oKSB7CiAgcmV0
        dXJuIHRoaXMuY2FjaGVhYmxlKGZhbHNlKTsKfTsKCi8qKgogIENhbGwgb24g
        YSBjb21wdXRlZCBwcm9wZXJ0eSB0byBzZXQgaXQgaW50byByZWFkLW9ubHkg
        bW9kZS4gV2hlbiBpbiB0aGlzCiAgbW9kZSB0aGUgY29tcHV0ZWQgcHJvcGVy
        dHkgd2lsbCB0aHJvdyBhbiBlcnJvciB3aGVuIHNldC4KCiAgYGBgamF2YXNj
        cmlwdAogIE15QXBwLlBlcnNvbiA9IEVtYmVyLk9iamVjdC5leHRlbmQoewog
        ICAgZ3VpZDogZnVuY3Rpb24oKSB7CiAgICAgIHJldHVybiAnZ3VpZC1ndWlk
        LWd1aWQnOwogICAgfS5wcm9wZXJ0eSgpLnJlYWRPbmx5KCkKICB9KTsKCiAg
        TXlBcHAucGVyc29uID0gTXlBcHAuUGVyc29uLmNyZWF0ZSgpOwoKICBNeUFw
        cC5wZXJzb24uc2V0KCdndWlkJywgJ25ldy1ndWlkJyk7IC8vIHdpbGwgdGhy
        b3cgYW4gZXhjZXB0aW9uCiAgYGBgCgogIEBtZXRob2QgcmVhZE9ubHkKICBA
        cmV0dXJuIHtFbWJlci5Db21wdXRlZFByb3BlcnR5fSB0aGlzCiAgQGNoYWlu
        YWJsZQoqLwpDb21wdXRlZFByb3BlcnR5UHJvdG90eXBlLnJlYWRPbmx5ID0g
        ZnVuY3Rpb24ocmVhZE9ubHkpIHsKICB0aGlzLl9yZWFkT25seSA9IHJlYWRP
        bmx5ID09PSB1bmRlZmluZWQgfHwgISFyZWFkT25seTsKICByZXR1cm4gdGhp
        czsKfTsKCi8qKgogIFNldHMgdGhlIGRlcGVuZGVudCBrZXlzIG9uIHRoaXMg
        Y29tcHV0ZWQgcHJvcGVydHkuIFBhc3MgYW55IG51bWJlciBvZgogIGFyZ3Vt
        ZW50cyBjb250YWluaW5nIGtleSBwYXRocyB0aGF0IHRoaXMgY29tcHV0ZWQg
        cHJvcGVydHkgZGVwZW5kcyBvbi4KCiAgYGBgamF2YXNjcmlwdAogIE15QXBw
        LlByZXNpZGVudCA9IEVtYmVyLk9iamVjdC5leHRlbmQoewogICAgZnVsbE5h
        bWU6IEVtYmVyLmNvbXB1dGVkKGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4g
        dGhpcy5nZXQoJ2ZpcnN0TmFtZScpICsgJyAnICsgdGhpcy5nZXQoJ2xhc3RO
        YW1lJyk7CgogICAgICAvLyBUZWxsIEVtYmVyIHRoYXQgdGhpcyBjb21wdXRl
        ZCBwcm9wZXJ0eSBkZXBlbmRzIG9uIGZpcnN0TmFtZQogICAgICAvLyBhbmQg
        bGFzdE5hbWUKICAgIH0pLnByb3BlcnR5KCdmaXJzdE5hbWUnLCAnbGFzdE5h
        bWUnKQogIH0pOwoKICBNeUFwcC5wcmVzaWRlbnQgPSBNeUFwcC5QcmVzaWRl
        bnQuY3JlYXRlKHsKICAgIGZpcnN0TmFtZTogJ0JhcmFjaycsCiAgICBsYXN0
        TmFtZTogJ09iYW1hJywKICB9KTsKICBNeUFwcC5wcmVzaWRlbnQuZ2V0KCdm
        dWxsTmFtZScpOyAvLyBCYXJhY2sgT2JhbWEKICBgYGAKCiAgQG1ldGhvZCBw
        cm9wZXJ0eQogIEBwYXJhbSB7U3RyaW5nfSBwYXRoKiB6ZXJvIG9yIG1vcmUg
        cHJvcGVydHkgcGF0aHMKICBAcmV0dXJuIHtFbWJlci5Db21wdXRlZFByb3Bl
        cnR5fSB0aGlzCiAgQGNoYWluYWJsZQoqLwpDb21wdXRlZFByb3BlcnR5UHJv
        dG90eXBlLnByb3BlcnR5ID0gZnVuY3Rpb24oKSB7CiAgdmFyIGFyZ3M7Cgog
        IHZhciBhZGRBcmcgPSBmdW5jdGlvbiAocHJvcGVydHkpIHsKICAgIGFyZ3Mu
        cHVzaChwcm9wZXJ0eSk7CiAgfTsKCiAgYXJncyA9IFtdOwogIGZvciAodmFy
        IGkgPSAwLCBsID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IGw7IGkrKykgewog
        ICAgZXhwYW5kUHJvcGVydGllcyhhcmd1bWVudHNbaV0sIGFkZEFyZyk7CiAg
        fQoKICAKICAgIHRoaXMuX2RlcGVuZGVudEtleXMgPSBhcmdzOwogIAoKICBy
        ZXR1cm4gdGhpczsKfTsKCi8qKgogIEluIHNvbWUgY2FzZXMsIHlvdSBtYXkg
        d2FudCB0byBhbm5vdGF0ZSBjb21wdXRlZCBwcm9wZXJ0aWVzIHdpdGggYWRk
        aXRpb25hbAogIG1ldGFkYXRhIGFib3V0IGhvdyB0aGV5IGZ1bmN0aW9uIG9y
        IHdoYXQgdmFsdWVzIHRoZXkgb3BlcmF0ZSBvbi4gRm9yIGV4YW1wbGUsCiAg
        Y29tcHV0ZWQgcHJvcGVydHkgZnVuY3Rpb25zIG1heSBjbG9zZSBvdmVyIHZh
        cmlhYmxlcyB0aGF0IGFyZSB0aGVuIG5vIGxvbmdlcgogIGF2YWlsYWJsZSBm
        b3IgaW50cm9zcGVjdGlvbi4KCiAgWW91IGNhbiBwYXNzIGEgaGFzaCBvZiB0
        aGVzZSB2YWx1ZXMgdG8gYSBjb21wdXRlZCBwcm9wZXJ0eSBsaWtlIHRoaXM6
        CgogIGBgYAogIHBlcnNvbjogZnVuY3Rpb24oKSB7CiAgICB2YXIgcGVyc29u
        SWQgPSB0aGlzLmdldCgncGVyc29uSWQnKTsKICAgIHJldHVybiBBcHAuUGVy
        c29uLmNyZWF0ZSh7IGlkOiBwZXJzb25JZCB9KTsKICB9LnByb3BlcnR5KCku
        bWV0YSh7IHR5cGU6IEFwcC5QZXJzb24gfSkKICBgYGAKCiAgVGhlIGhhc2gg
        dGhhdCB5b3UgcGFzcyB0byB0aGUgYG1ldGEoKWAgZnVuY3Rpb24gd2lsbCBi
        ZSBzYXZlZCBvbiB0aGUKICBjb21wdXRlZCBwcm9wZXJ0eSBkZXNjcmlwdG9y
        IHVuZGVyIHRoZSBgX21ldGFgIGtleS4gRW1iZXIgcnVudGltZQogIGV4cG9z
        ZXMgYSBwdWJsaWMgQVBJIGZvciByZXRyaWV2aW5nIHRoZXNlIHZhbHVlcyBm
        cm9tIGNsYXNzZXMsCiAgdmlhIHRoZSBgbWV0YUZvclByb3BlcnR5KClgIGZ1
        bmN0aW9uLgoKICBAbWV0aG9kIG1ldGEKICBAcGFyYW0ge0hhc2h9IG1ldGEK
        ICBAY2hhaW5hYmxlCiovCgpDb21wdXRlZFByb3BlcnR5UHJvdG90eXBlLm1l
        dGEgPSBmdW5jdGlvbihtZXRhKSB7CiAgaWYgKGFyZ3VtZW50cy5sZW5ndGgg
        PT09IDApIHsKICAgIHJldHVybiB0aGlzLl9tZXRhIHx8IHt9OwogIH0gZWxz
        ZSB7CiAgICB0aGlzLl9tZXRhID0gbWV0YTsKICAgIHJldHVybiB0aGlzOwog
        IH0KfTsKCi8qIGltcGwgZGVzY3JpcHRvciBBUEkgKi8KQ29tcHV0ZWRQcm9w
        ZXJ0eVByb3RvdHlwZS5kaWRDaGFuZ2UgPSBmdW5jdGlvbihvYmosIGtleU5h
        bWUpIHsKICAvLyBfc3VzcGVuZGVkIGlzIHNldCB2aWEgYSBDUC5zZXQgdG8g
        ZW5zdXJlIHdlIGRvbid0IGNsZWFyCiAgLy8gdGhlIGNhY2hlZCB2YWx1ZSBz
        ZXQgYnkgdGhlIHNldHRlcgogIGlmICh0aGlzLl9jYWNoZWFibGUgJiYgdGhp
        cy5fc3VzcGVuZGVkICE9PSBvYmopIHsKICAgIHZhciBtZXRhID0gbWV0YUZv
        cihvYmopOwogICAgaWYgKGtleU5hbWUgaW4gbWV0YS5jYWNoZSkgewogICAg
        ICBkZWxldGUgbWV0YS5jYWNoZVtrZXlOYW1lXTsKICAgICAgcmVtb3ZlRGVw
        ZW5kZW50S2V5cyh0aGlzLCBvYmosIGtleU5hbWUsIG1ldGEpOwogICAgfQog
        IH0KfTsKCmZ1bmN0aW9uIGZpbmlzaENoYWlucyhjaGFpbk5vZGVzKQp7CiAg
        Zm9yICh2YXIgaT0wLCBsPWNoYWluTm9kZXMubGVuZ3RoOyBpPGw7IGkrKykg
        ewogICAgY2hhaW5Ob2Rlc1tpXS5kaWRDaGFuZ2UobnVsbCk7CiAgfQp9Cgov
        KioKICBBY2Nlc3MgdGhlIHZhbHVlIG9mIHRoZSBmdW5jdGlvbiBiYWNraW5n
        IHRoZSBjb21wdXRlZCBwcm9wZXJ0eS4KICBJZiB0aGlzIHByb3BlcnR5IGhh
        cyBhbHJlYWR5IGJlZW4gY2FjaGVkLCByZXR1cm4gdGhlIGNhY2hlZCByZXN1
        bHQuCiAgT3RoZXJ3aXNlLCBjYWxsIHRoZSBmdW5jdGlvbiBwYXNzaW5nIHRo
        ZSBwcm9wZXJ0eSBuYW1lIGFzIGFuIGFyZ3VtZW50LgoKICBgYGBqYXZhc2Ny
        aXB0CiAgUGVyc29uID0gRW1iZXIuT2JqZWN0LmV4dGVuZCh7CiAgICBmdWxs
        TmFtZTogZnVuY3Rpb24oa2V5TmFtZSkgewogICAgICAvLyB0aGUga2V5TmFt
        ZSBwYXJhbWV0ZXIgaXMgJ2Z1bGxOYW1lJyBpbiB0aGlzIGNhc2UuCgogICAg
        ICByZXR1cm4gdGhpcy5nZXQoJ2ZpcnN0TmFtZScpICsgJyAnICsgdGhpcy5n
        ZXQoJ2xhc3ROYW1lJyk7CiAgICB9LnByb3BlcnR5KCdmaXJzdE5hbWUnLCAn
        bGFzdE5hbWUnKQogIH0pOwoKCiAgdmFyIHRvbSA9IFBlcnNvbi5jcmVhdGUo
        ewogICAgZmlyc3ROYW1lOiAiVG9tIiwKICAgIGxhc3ROYW1lOiAiRGFsZSIK
        ICB9KTsKCiAgdG9tLmdldCgnZnVsbE5hbWUnKSAvLyAiVG9tIERhbGUiCiAg
        YGBgCgogIEBtZXRob2QgZ2V0CiAgQHBhcmFtIHtTdHJpbmd9IGtleU5hbWUg
        VGhlIGtleSBiZWluZyBhY2Nlc3NlZC4KICBAcmV0dXJuIHtPYmplY3R9IFRo
        ZSByZXR1cm4gdmFsdWUgb2YgdGhlIGZ1bmN0aW9uIGJhY2tpbmcgdGhlIENQ
        LgoqLwpDb21wdXRlZFByb3BlcnR5UHJvdG90eXBlLmdldCA9IGZ1bmN0aW9u
        KG9iaiwga2V5TmFtZSkgewogIHZhciByZXQsIGNhY2hlLCBtZXRhLCBjaGFp
        bk5vZGVzOwogIGlmICh0aGlzLl9jYWNoZWFibGUpIHsKICAgIG1ldGEgPSBt
        ZXRhRm9yKG9iaik7CiAgICBjYWNoZSA9IG1ldGEuY2FjaGU7CiAgICBpZiAo
        a2V5TmFtZSBpbiBjYWNoZSkgeyByZXR1cm4gY2FjaGVba2V5TmFtZV07IH0K
        ICAgIHJldCA9IGNhY2hlW2tleU5hbWVdID0gdGhpcy5mdW5jLmNhbGwob2Jq
        LCBrZXlOYW1lKTsKICAgIGNoYWluTm9kZXMgPSBtZXRhLmNoYWluV2F0Y2hl
        cnMgJiYgbWV0YS5jaGFpbldhdGNoZXJzW2tleU5hbWVdOwogICAgaWYgKGNo
        YWluTm9kZXMpIHsgZmluaXNoQ2hhaW5zKGNoYWluTm9kZXMpOyB9CiAgICBh
        ZGREZXBlbmRlbnRLZXlzKHRoaXMsIG9iaiwga2V5TmFtZSwgbWV0YSk7CiAg
        fSBlbHNlIHsKICAgIHJldCA9IHRoaXMuZnVuYy5jYWxsKG9iaiwga2V5TmFt
        ZSk7CiAgfQogIHJldHVybiByZXQ7Cn07CgovKioKICBTZXQgdGhlIHZhbHVl
        IG9mIGEgY29tcHV0ZWQgcHJvcGVydHkuIElmIHRoZSBmdW5jdGlvbiB0aGF0
        IGJhY2tzIHlvdXIKICBjb21wdXRlZCBwcm9wZXJ0eSBkb2VzIG5vdCBhY2Nl
        cHQgYXJndW1lbnRzIHRoZW4gdGhlIGRlZmF1bHQgYWN0aW9uIGZvcgogIHNl
        dHRpbmcgd291bGQgYmUgdG8gZGVmaW5lIHRoZSBwcm9wZXJ0eSBvbiB0aGUg
        Y3VycmVudCBvYmplY3QsIGFuZCBzZXQKICB0aGUgdmFsdWUgb2YgdGhlIHBy
        b3BlcnR5IHRvIHRoZSB2YWx1ZSBiZWluZyBzZXQuCgogIEdlbmVyYWxseSBz
        cGVha2luZyBpZiB5b3UgaW50ZW5kIGZvciB5b3VyIGNvbXB1dGVkIHByb3Bl
        cnR5IHRvIGJlIHNldAogIHlvdXIgYmFja2luZyBmdW5jdGlvbiBzaG91bGQg
        YWNjZXB0IGVpdGhlciB0d28gb3IgdGhyZWUgYXJndW1lbnRzLgoKICBAbWV0
        aG9kIHNldAogIEBwYXJhbSB7U3RyaW5nfSBrZXlOYW1lIFRoZSBrZXkgYmVp
        bmcgYWNjZXNzZWQuCiAgQHBhcmFtIHtPYmplY3R9IG5ld1ZhbHVlIFRoZSBu
        ZXcgdmFsdWUgYmVpbmcgYXNzaWduZWQuCiAgQHBhcmFtIHtTdHJpbmd9IG9s
        ZFZhbHVlIFRoZSBvbGQgdmFsdWUgYmVpbmcgcmVwbGFjZWQuCiAgQHJldHVy
        biB7T2JqZWN0fSBUaGUgcmV0dXJuIHZhbHVlIG9mIHRoZSBmdW5jdGlvbiBi
        YWNraW5nIHRoZSBDUC4KKi8KQ29tcHV0ZWRQcm9wZXJ0eVByb3RvdHlwZS5z
        ZXQgPSBmdW5jdGlvbihvYmosIGtleU5hbWUsIHZhbHVlKSB7CiAgdmFyIGNh
        Y2hlYWJsZSA9IHRoaXMuX2NhY2hlYWJsZSwKICAgICAgZnVuYyA9IHRoaXMu
        ZnVuYywKICAgICAgbWV0YSA9IG1ldGFGb3Iob2JqLCBjYWNoZWFibGUpLAog
        ICAgICB3YXRjaGVkID0gbWV0YS53YXRjaGluZ1trZXlOYW1lXSwKICAgICAg
        b2xkU3VzcGVuZGVkID0gdGhpcy5fc3VzcGVuZGVkLAogICAgICBoYWRDYWNo
        ZWRWYWx1ZSA9IGZhbHNlLAogICAgICBjYWNoZSA9IG1ldGEuY2FjaGUsCiAg
        ICAgIGZ1bmNBcmdMZW5ndGgsIGNhY2hlZFZhbHVlLCByZXQ7CgogIGlmICh0
        aGlzLl9yZWFkT25seSkgewogICAgdGhyb3cgbmV3IEVtYmVyLkVycm9yKCdD
        YW5ub3QgU2V0OiAnICsga2V5TmFtZSArICcgb246ICcgKyBFbWJlci5pbnNw
        ZWN0KG9iaikpOwogIH0KCiAgdGhpcy5fc3VzcGVuZGVkID0gb2JqOwoKICB0
        cnkgewoKICAgIGlmIChjYWNoZWFibGUgJiYgY2FjaGUuaGFzT3duUHJvcGVy
        dHkoa2V5TmFtZSkpIHsKICAgICAgY2FjaGVkVmFsdWUgPSBjYWNoZVtrZXlO
        YW1lXTsKICAgICAgaGFkQ2FjaGVkVmFsdWUgPSB0cnVlOwogICAgfQoKICAg
        IC8vIENoZWNrIGlmIHRoZSBDUCBoYXMgYmVlbiB3cmFwcGVkLiBJZiBpZiBo
        YXMsIHVzZSB0aGUKICAgIC8vIGxlbmd0aCBmcm9tIHRoZSB3cmFwcGVkIGZ1
        bmN0aW9uLgogICAgZnVuY0FyZ0xlbmd0aCA9IChmdW5jLndyYXBwZWRGdW5j
        dGlvbiA/IGZ1bmMud3JhcHBlZEZ1bmN0aW9uLmxlbmd0aCA6IGZ1bmMubGVu
        Z3RoKTsKCiAgICAvLyBGb3IgYmFja3dhcmRzLWNvbXBhdGliaWxpdHkgd2l0
        aCBjb21wdXRlZCBwcm9wZXJ0aWVzCiAgICAvLyB0aGF0IGNoZWNrIGZvciBh
        cmd1bWVudHMubGVuZ3RoID09PSAyIHRvIGRldGVybWluZSBpZgogICAgLy8g
        dGhleSBhcmUgYmVpbmcgZ2V0IG9yIHNldCwgb25seSBwYXNzIHRoZSBvbGQg
        Y2FjaGVkCiAgICAvLyB2YWx1ZSBpZiB0aGUgY29tcHV0ZWQgcHJvcGVydHkg
        b3B0cyBpbnRvIGEgdGhpcmQKICAgIC8vIGFyZ3VtZW50LgogICAgaWYgKGZ1
        bmNBcmdMZW5ndGggPT09IDMpIHsKICAgICAgcmV0ID0gZnVuYy5jYWxsKG9i
        aiwga2V5TmFtZSwgdmFsdWUsIGNhY2hlZFZhbHVlKTsKICAgIH0gZWxzZSBp
        ZiAoZnVuY0FyZ0xlbmd0aCA9PT0gMikgewogICAgICByZXQgPSBmdW5jLmNh
        bGwob2JqLCBrZXlOYW1lLCB2YWx1ZSk7CiAgICB9IGVsc2UgewogICAgICBF
        bWJlci5kZWZpbmVQcm9wZXJ0eShvYmosIGtleU5hbWUsIG51bGwsIGNhY2hl
        ZFZhbHVlKTsKICAgICAgRW1iZXIuc2V0KG9iaiwga2V5TmFtZSwgdmFsdWUp
        OwogICAgICByZXR1cm47CiAgICB9CgogICAgaWYgKGhhZENhY2hlZFZhbHVl
        ICYmIGNhY2hlZFZhbHVlID09PSByZXQpIHsgcmV0dXJuOyB9CgogICAgaWYg
        KHdhdGNoZWQpIHsgRW1iZXIucHJvcGVydHlXaWxsQ2hhbmdlKG9iaiwga2V5
        TmFtZSk7IH0KCiAgICBpZiAoaGFkQ2FjaGVkVmFsdWUpIHsKICAgICAgZGVs
        ZXRlIGNhY2hlW2tleU5hbWVdOwogICAgfQoKICAgIGlmIChjYWNoZWFibGUp
        IHsKICAgICAgaWYgKCFoYWRDYWNoZWRWYWx1ZSkgewogICAgICAgIGFkZERl
        cGVuZGVudEtleXModGhpcywgb2JqLCBrZXlOYW1lLCBtZXRhKTsKICAgICAg
        fQogICAgICBjYWNoZVtrZXlOYW1lXSA9IHJldDsKICAgIH0KCiAgICBpZiAo
        d2F0Y2hlZCkgeyBFbWJlci5wcm9wZXJ0eURpZENoYW5nZShvYmosIGtleU5h
        bWUpOyB9CiAgfSBmaW5hbGx5IHsKICAgIHRoaXMuX3N1c3BlbmRlZCA9IG9s
        ZFN1c3BlbmRlZDsKICB9CiAgcmV0dXJuIHJldDsKfTsKCi8qIGNhbGxlZCBi
        ZWZvcmUgcHJvcGVydHkgaXMgb3ZlcnJpZGRlbiAqLwpDb21wdXRlZFByb3Bl
        cnR5UHJvdG90eXBlLnRlYXJkb3duID0gZnVuY3Rpb24ob2JqLCBrZXlOYW1l
        KSB7CiAgdmFyIG1ldGEgPSBtZXRhRm9yKG9iaik7CgogIGlmIChrZXlOYW1l
        IGluIG1ldGEuY2FjaGUpIHsKICAgIHJlbW92ZURlcGVuZGVudEtleXModGhp
        cywgb2JqLCBrZXlOYW1lLCBtZXRhKTsKICB9CgogIGlmICh0aGlzLl9jYWNo
        ZWFibGUpIHsgZGVsZXRlIG1ldGEuY2FjaGVba2V5TmFtZV07IH0KCiAgcmV0
        dXJuIG51bGw7IC8vIG5vIHZhbHVlIHRvIHJlc3RvcmUKfTsKCgovKioKICBU
        aGlzIGhlbHBlciByZXR1cm5zIGEgbmV3IHByb3BlcnR5IGRlc2NyaXB0b3Ig
        dGhhdCB3cmFwcyB0aGUgcGFzc2VkCiAgY29tcHV0ZWQgcHJvcGVydHkgZnVu
        Y3Rpb24uIFlvdSBjYW4gdXNlIHRoaXMgaGVscGVyIHRvIGRlZmluZSBwcm9w
        ZXJ0aWVzCiAgd2l0aCBtaXhpbnMgb3IgdmlhIGBFbWJlci5kZWZpbmVQcm9w
        ZXJ0eSgpYC4KCiAgVGhlIGZ1bmN0aW9uIHlvdSBwYXNzIHdpbGwgYmUgdXNl
        ZCB0byBib3RoIGdldCBhbmQgc2V0IHByb3BlcnR5IHZhbHVlcy4KICBUaGUg
        ZnVuY3Rpb24gc2hvdWxkIGFjY2VwdCB0d28gcGFyYW1ldGVycywga2V5IGFu
        ZCB2YWx1ZS4gSWYgdmFsdWUgaXMgbm90CiAgdW5kZWZpbmVkIHlvdSBzaG91
        bGQgc2V0IHRoZSB2YWx1ZSBmaXJzdC4gSW4gZWl0aGVyIGNhc2UgcmV0dXJu
        IHRoZQogIGN1cnJlbnQgdmFsdWUgb2YgdGhlIHByb3BlcnR5LgogIEBtZXRo
        b2QgY29tcHV0ZWQKICBAZm9yIEVtYmVyCiAgQHBhcmFtIHtGdW5jdGlvbn0g
        ZnVuYyBUaGUgY29tcHV0ZWQgcHJvcGVydHkgZnVuY3Rpb24uCiAgQHJldHVy
        biB7RW1iZXIuQ29tcHV0ZWRQcm9wZXJ0eX0gcHJvcGVydHkgZGVzY3JpcHRv
        ciBpbnN0YW5jZQoqLwpFbWJlci5jb21wdXRlZCA9IGZ1bmN0aW9uKGZ1bmMp
        IHsKICB2YXIgYXJnczsKCiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7
        CiAgICBhcmdzID0gYV9zbGljZS5jYWxsKGFyZ3VtZW50cywgMCwgLTEpOwog
        ICAgZnVuYyA9IGFfc2xpY2UuY2FsbChhcmd1bWVudHMsIC0xKVswXTsKICB9
        CgogIGlmICh0eXBlb2YgZnVuYyAhPT0gImZ1bmN0aW9uIikgewogICAgdGhy
        b3cgbmV3IEVtYmVyLkVycm9yKCJDb21wdXRlZCBQcm9wZXJ0eSBkZWNsYXJl
        ZCB3aXRob3V0IGEgcHJvcGVydHkgZnVuY3Rpb24iKTsKICB9CgogIHZhciBj
        cCA9IG5ldyBDb21wdXRlZFByb3BlcnR5KGZ1bmMpOwoKICBpZiAoYXJncykg
        ewogICAgY3AucHJvcGVydHkuYXBwbHkoY3AsIGFyZ3MpOwogIH0KCiAgcmV0
        dXJuIGNwOwp9OwoKLyoqCiAgUmV0dXJucyB0aGUgY2FjaGVkIHZhbHVlIGZv
        ciBhIHByb3BlcnR5LCBpZiBvbmUgZXhpc3RzLgogIFRoaXMgY2FuIGJlIHVz
        ZWZ1bCBmb3IgcGVla2luZyBhdCB0aGUgdmFsdWUgb2YgYSBjb21wdXRlZAog
        IHByb3BlcnR5IHRoYXQgaXMgZ2VuZXJhdGVkIGxhemlseSwgd2l0aG91dCBh
        Y2NpZGVudGFsbHkgY2F1c2luZwogIGl0IHRvIGJlIGNyZWF0ZWQuCgogIEBt
        ZXRob2QgY2FjaGVGb3IKICBAZm9yIEVtYmVyCiAgQHBhcmFtIHtPYmplY3R9
        IG9iaiB0aGUgb2JqZWN0IHdob3NlIHByb3BlcnR5IHlvdSB3YW50IHRvIGNo
        ZWNrCiAgQHBhcmFtIHtTdHJpbmd9IGtleSB0aGUgbmFtZSBvZiB0aGUgcHJv
        cGVydHkgd2hvc2UgY2FjaGVkIHZhbHVlIHlvdSB3YW50CiAgICB0byByZXR1
        cm4KICBAcmV0dXJuIHtPYmplY3R9IHRoZSBjYWNoZWQgdmFsdWUKKi8KRW1i
        ZXIuY2FjaGVGb3IgPSBmdW5jdGlvbiBjYWNoZUZvcihvYmosIGtleSkgewog
        IHZhciBtZXRhID0gb2JqW01FVEFfS0VZXSwKICAgICAgY2FjaGUgPSBtZXRh
        ICYmIG1ldGEuY2FjaGU7CgogIGlmIChjYWNoZSAmJiBrZXkgaW4gY2FjaGUp
        IHsKICAgIHJldHVybiBjYWNoZVtrZXldOwogIH0KfTsKCmZ1bmN0aW9uIGdl
        dFByb3BlcnRpZXMoc2VsZiwgcHJvcGVydHlOYW1lcykgewogIHZhciByZXQg
        PSB7fTsKICBmb3IodmFyIGkgPSAwOyBpIDwgcHJvcGVydHlOYW1lcy5sZW5n
        dGg7IGkrKykgewogICAgcmV0W3Byb3BlcnR5TmFtZXNbaV1dID0gZ2V0KHNl
        bGYsIHByb3BlcnR5TmFtZXNbaV0pOwogIH0KICByZXR1cm4gcmV0Owp9Cgp2
        YXIgcmVnaXN0ZXJDb21wdXRlZCwgcmVnaXN0ZXJDb21wdXRlZFdpdGhQcm9w
        ZXJ0aWVzOwoKCgogIHJlZ2lzdGVyQ29tcHV0ZWQgPSBmdW5jdGlvbiAobmFt
        ZSwgbWFjcm8pIHsKICAgIEVtYmVyLmNvbXB1dGVkW25hbWVdID0gZnVuY3Rp
        b24oZGVwZW5kZW50S2V5KSB7CiAgICAgIHZhciBhcmdzID0gYV9zbGljZS5j
        YWxsKGFyZ3VtZW50cyk7CiAgICAgIHJldHVybiBFbWJlci5jb21wdXRlZChk
        ZXBlbmRlbnRLZXksIGZ1bmN0aW9uKCkgewogICAgICAgIHJldHVybiBtYWNy
        by5hcHBseSh0aGlzLCBhcmdzKTsKICAgICAgfSk7CiAgICB9OwogIH07Cgog
        IHJlZ2lzdGVyQ29tcHV0ZWRXaXRoUHJvcGVydGllcyA9IGZ1bmN0aW9uKG5h
        bWUsIG1hY3JvKSB7CiAgICBFbWJlci5jb21wdXRlZFtuYW1lXSA9IGZ1bmN0
        aW9uKCkgewogICAgICB2YXIgcHJvcGVydGllcyA9IGFfc2xpY2UuY2FsbChh
        cmd1bWVudHMpOwoKICAgICAgdmFyIGNvbXB1dGVkID0gRW1iZXIuY29tcHV0
        ZWQoZnVuY3Rpb24oKSB7CiAgICAgICAgcmV0dXJuIG1hY3JvLmFwcGx5KHRo
        aXMsIFtnZXRQcm9wZXJ0aWVzKHRoaXMsIHByb3BlcnRpZXMpXSk7CiAgICAg
        IH0pOwoKICAgICAgcmV0dXJuIGNvbXB1dGVkLnByb3BlcnR5LmFwcGx5KGNv
        bXB1dGVkLCBwcm9wZXJ0aWVzKTsKICAgIH07CiAgfTsKCgoKCi8qKgogIEEg
        Y29tcHV0ZWQgcHJvcGVydHkgdGhhdCByZXR1cm5zIHRydWUgaWYgdGhlIHZh
        bHVlIG9mIHRoZSBkZXBlbmRlbnQKICBwcm9wZXJ0eSBpcyBudWxsLCBhbiBl
        bXB0eSBzdHJpbmcsIGVtcHR5IGFycmF5LCBvciBlbXB0eSBmdW5jdGlvbi4K
        CiAgTm90ZTogV2hlbiB1c2luZyBgRW1iZXIuY29tcHV0ZWQuZW1wdHlgIHRv
        IHdhdGNoIGFuIGFycmF5IG1ha2Ugc3VyZSB0bwogIHVzZSB0aGUgYGFycmF5
        LltdYCBzeW50YXggc28gdGhlIGNvbXB1dGVkIGNhbiBzdWJzY3JpYmUgdG8g
        dHJhbnNpdGlvbnMKICBmcm9tIGVtcHR5IHRvIG5vbi1lbXB0eSBzdGF0ZXMu
        CgogIEV4YW1wbGUKCiAgYGBgamF2YXNjcmlwdAogIHZhciBUb0RvTGlzdCA9
        IEVtYmVyLk9iamVjdC5leHRlbmQoewogICAgZG9uZTogRW1iZXIuY29tcHV0
        ZWQuZW1wdHkoJ3RvZG9zLltdJykgLy8gZGV0ZWN0IGFycmF5IGNoYW5nZXMK
        ICB9KTsKICB2YXIgdG9kb0xpc3QgPSBUb0RvTGlzdC5jcmVhdGUoe3RvZG9z
        OiBbJ1VuaXQgVGVzdCcsICdEb2N1bWVudGF0aW9uJywgJ1JlbGVhc2UnXX0p
        OwogIHRvZG9MaXN0LmdldCgnZG9uZScpOyAvLyBmYWxzZQogIHRvZG9MaXN0
        LmdldCgndG9kb3MnKS5jbGVhcigpOyAvLyBbXQogIHRvZG9MaXN0LmdldCgn
        ZG9uZScpOyAvLyB0cnVlCiAgYGBgCgogIEBtZXRob2QgY29tcHV0ZWQuZW1w
        dHkKICBAZm9yIEVtYmVyCiAgQHBhcmFtIHtTdHJpbmd9IGRlcGVuZGVudEtl
        eQogIEByZXR1cm4ge0VtYmVyLkNvbXB1dGVkUHJvcGVydHl9IGNvbXB1dGVk
        IHByb3BlcnR5IHdoaWNoIG5lZ2F0ZQogIHRoZSBvcmlnaW5hbCB2YWx1ZSBm
        b3IgcHJvcGVydHkKKi8KcmVnaXN0ZXJDb21wdXRlZCgnZW1wdHknLCBmdW5j
        dGlvbihkZXBlbmRlbnRLZXkpIHsKICByZXR1cm4gRW1iZXIuaXNFbXB0eShn
        ZXQodGhpcywgZGVwZW5kZW50S2V5KSk7Cn0pOwoKLyoqCiAgQSBjb21wdXRl
        ZCBwcm9wZXJ0eSB0aGF0IHJldHVybnMgdHJ1ZSBpZiB0aGUgdmFsdWUgb2Yg
        dGhlIGRlcGVuZGVudAogIHByb3BlcnR5IGlzIE5PVCBudWxsLCBhbiBlbXB0
        eSBzdHJpbmcsIGVtcHR5IGFycmF5LCBvciBlbXB0eSBmdW5jdGlvbi4KCiAg
        Tm90ZTogV2hlbiB1c2luZyBgRW1iZXIuY29tcHV0ZWQubm90RW1wdHlgIHRv
        IHdhdGNoIGFuIGFycmF5IG1ha2Ugc3VyZSB0bwogIHVzZSB0aGUgYGFycmF5
        LltdYCBzeW50YXggc28gdGhlIGNvbXB1dGVkIGNhbiBzdWJzY3JpYmUgdG8g
        dHJhbnNpdGlvbnMKICBmcm9tIGVtcHR5IHRvIG5vbi1lbXB0eSBzdGF0ZXMu
        CgogIEV4YW1wbGUKCiAgYGBgamF2YXNjcmlwdAogIHZhciBIYW1zdGVyID0g
        RW1iZXIuT2JqZWN0LmV4dGVuZCh7CiAgICBoYXNTdHVmZjogRW1iZXIuY29t
        cHV0ZWQubm90RW1wdHkoJ2JhY2twYWNrLltdJykKICB9KTsKICB2YXIgaGFt
        c3RlciA9IEhhbXN0ZXIuY3JlYXRlKHtiYWNrcGFjazogWydGb29kJywgJ1Ns
        ZWVwaW5nIEJhZycsICdUZW50J119KTsKICBoYW1zdGVyLmdldCgnaGFzU3R1
        ZmYnKTsgLy8gdHJ1ZQogIGhhbXN0ZXIuZ2V0KCdiYWNrcGFjaycpLmNsZWFy
        KCk7IC8vIFtdCiAgaGFtc3Rlci5nZXQoJ2hhc1N0dWZmJyk7IC8vIGZhbHNl
        CiAgYGBgCgogIEBtZXRob2QgY29tcHV0ZWQubm90RW1wdHkKICBAZm9yIEVt
        YmVyCiAgQHBhcmFtIHtTdHJpbmd9IGRlcGVuZGVudEtleQogIEByZXR1cm4g
        e0VtYmVyLkNvbXB1dGVkUHJvcGVydHl9IGNvbXB1dGVkIHByb3BlcnR5IHdo
        aWNoIHJldHVybnMgdHJ1ZSBpZgogIG9yaWdpbmFsIHZhbHVlIGZvciBwcm9w
        ZXJ0eSBpcyBub3QgZW1wdHkuCiovCnJlZ2lzdGVyQ29tcHV0ZWQoJ25vdEVt
        cHR5JywgZnVuY3Rpb24oZGVwZW5kZW50S2V5KSB7CiAgcmV0dXJuICFFbWJl
        ci5pc0VtcHR5KGdldCh0aGlzLCBkZXBlbmRlbnRLZXkpKTsKfSk7CgovKioK
        ICBBIGNvbXB1dGVkIHByb3BlcnR5IHRoYXQgcmV0dXJucyB0cnVlIGlmIHRo
        ZSB2YWx1ZSBvZiB0aGUgZGVwZW5kZW50CiAgcHJvcGVydHkgaXMgbnVsbCBv
        ciB1bmRlZmluZWQuIFRoaXMgYXZvaWRzIGVycm9ycyBmcm9tIEpTTGludCBj
        b21wbGFpbmluZwogIGFib3V0IHVzZSBvZiA9PSwgd2hpY2ggY2FuIGJlIHRl
        Y2huaWNhbGx5IGNvbmZ1c2luZy4KCiAgRXhhbXBsZQoKICBgYGBqYXZhc2Ny
        aXB0CiAgdmFyIEhhbXN0ZXIgPSBFbWJlci5PYmplY3QuZXh0ZW5kKHsKICAg
        IGlzSHVuZ3J5OiBFbWJlci5jb21wdXRlZC5ub25lKCdmb29kJykKICB9KTsK
        ICB2YXIgaGFtc3RlciA9IEhhbXN0ZXIuY3JlYXRlKCk7CiAgaGFtc3Rlci5n
        ZXQoJ2lzSHVuZ3J5Jyk7IC8vIHRydWUKICBoYW1zdGVyLnNldCgnZm9vZCcs
        ICdCYW5hbmEnKTsKICBoYW1zdGVyLmdldCgnaXNIdW5ncnknKTsgLy8gZmFs
        c2UKICBoYW1zdGVyLnNldCgnZm9vZCcsIG51bGwpOwogIGhhbXN0ZXIuZ2V0
        KCdpc0h1bmdyeScpOyAvLyB0cnVlCiAgYGBgCgogIEBtZXRob2QgY29tcHV0
        ZWQubm9uZQogIEBmb3IgRW1iZXIKICBAcGFyYW0ge1N0cmluZ30gZGVwZW5k
        ZW50S2V5CiAgQHJldHVybiB7RW1iZXIuQ29tcHV0ZWRQcm9wZXJ0eX0gY29t
        cHV0ZWQgcHJvcGVydHkgd2hpY2gKICByZXR1cm5zIHRydWUgaWYgb3JpZ2lu
        YWwgdmFsdWUgZm9yIHByb3BlcnR5IGlzIG51bGwgb3IgdW5kZWZpbmVkLgoq
        LwpyZWdpc3RlckNvbXB1dGVkKCdub25lJywgZnVuY3Rpb24oZGVwZW5kZW50
        S2V5KSB7CiAgcmV0dXJuIEVtYmVyLmlzTm9uZShnZXQodGhpcywgZGVwZW5k
        ZW50S2V5KSk7Cn0pOwoKLyoqCiAgQSBjb21wdXRlZCBwcm9wZXJ0eSB0aGF0
        IHJldHVybnMgdGhlIGludmVyc2UgYm9vbGVhbiB2YWx1ZQogIG9mIHRoZSBv
        cmlnaW5hbCB2YWx1ZSBmb3IgdGhlIGRlcGVuZGVudCBwcm9wZXJ0eS4KCiAg
        RXhhbXBsZQoKICBgYGBqYXZhc2NyaXB0CiAgdmFyIFVzZXIgPSBFbWJlci5P
        YmplY3QuZXh0ZW5kKHsKICAgIGlzQW5vbnltb3VzOiBFbWJlci5jb21wdXRl
        ZC5ub3QoJ2xvZ2dlZEluJykKICB9KTsKICB2YXIgdXNlciA9IFVzZXIuY3Jl
        YXRlKHtsb2dnZWRJbjogZmFsc2V9KTsKICB1c2VyLmdldCgnaXNBbm9ueW1v
        dXMnKTsgLy8gdHJ1ZQogIHVzZXIuc2V0KCdsb2dnZWRJbicsIHRydWUpOwog
        IHVzZXIuZ2V0KCdpc0Fub255bW91cycpOyAvLyBmYWxzZQogIGBgYAoKICBA
        bWV0aG9kIGNvbXB1dGVkLm5vdAogIEBmb3IgRW1iZXIKICBAcGFyYW0ge1N0
        cmluZ30gZGVwZW5kZW50S2V5CiAgQHJldHVybiB7RW1iZXIuQ29tcHV0ZWRQ
        cm9wZXJ0eX0gY29tcHV0ZWQgcHJvcGVydHkgd2hpY2ggcmV0dXJucwogIGlu
        dmVyc2Ugb2YgdGhlIG9yaWdpbmFsIHZhbHVlIGZvciBwcm9wZXJ0eQoqLwpy
        ZWdpc3RlckNvbXB1dGVkKCdub3QnLCBmdW5jdGlvbihkZXBlbmRlbnRLZXkp
        IHsKICByZXR1cm4gIWdldCh0aGlzLCBkZXBlbmRlbnRLZXkpOwp9KTsKCi8q
        KgogIEEgY29tcHV0ZWQgcHJvcGVydHkgdGhhdCBjb252ZXJ0cyB0aGUgcHJv
        dmlkZWQgZGVwZW5kZW50IHByb3BlcnR5CiAgaW50byBhIGJvb2xlYW4gdmFs
        dWUuCgogIGBgYGphdmFzY3JpcHQKICB2YXIgSGFtc3RlciA9IEVtYmVyLk9i
        amVjdC5leHRlbmQoewogICAgaGFzQmFuYW5hczogRW1iZXIuY29tcHV0ZWQu
        Ym9vbCgnbnVtQmFuYW5hcycpCiAgfSk7CiAgdmFyIGhhbXN0ZXIgPSBIYW1z
        dGVyLmNyZWF0ZSgpOwogIGhhbXN0ZXIuZ2V0KCdoYXNCYW5hbmFzJyk7IC8v
        IGZhbHNlCiAgaGFtc3Rlci5zZXQoJ251bUJhbmFuYXMnLCAwKTsKICBoYW1z
        dGVyLmdldCgnaGFzQmFuYW5hcycpOyAvLyBmYWxzZQogIGhhbXN0ZXIuc2V0
        KCdudW1CYW5hbmFzJywgMSk7CiAgaGFtc3Rlci5nZXQoJ2hhc0JhbmFuYXMn
        KTsgLy8gdHJ1ZQogIGhhbXN0ZXIuc2V0KCdudW1CYW5hbmFzJywgbnVsbCk7
        CiAgaGFtc3Rlci5nZXQoJ2hhc0JhbmFuYXMnKTsgLy8gZmFsc2UKICBgYGAK
        CiAgQG1ldGhvZCBjb21wdXRlZC5ib29sCiAgQGZvciBFbWJlcgogIEBwYXJh
        bSB7U3RyaW5nfSBkZXBlbmRlbnRLZXkKICBAcmV0dXJuIHtFbWJlci5Db21w
        dXRlZFByb3BlcnR5fSBjb21wdXRlZCBwcm9wZXJ0eSB3aGljaCBjb252ZXJ0
        cwogIHRvIGJvb2xlYW4gdGhlIG9yaWdpbmFsIHZhbHVlIGZvciBwcm9wZXJ0
        eQoqLwpyZWdpc3RlckNvbXB1dGVkKCdib29sJywgZnVuY3Rpb24oZGVwZW5k
        ZW50S2V5KSB7CiAgcmV0dXJuICEhZ2V0KHRoaXMsIGRlcGVuZGVudEtleSk7
        Cn0pOwoKLyoqCiAgQSBjb21wdXRlZCBwcm9wZXJ0eSB3aGljaCBtYXRjaGVz
        IHRoZSBvcmlnaW5hbCB2YWx1ZSBmb3IgdGhlCiAgZGVwZW5kZW50IHByb3Bl
        cnR5IGFnYWluc3QgYSBnaXZlbiBSZWdFeHAsIHJldHVybmluZyBgdHJ1ZWAK
        ICBpZiB0aGV5IHZhbHVlcyBtYXRjaGVzIHRoZSBSZWdFeHAgYW5kIGBmYWxz
        ZWAgaWYgaXQgZG9lcyBub3QuCgogIEV4YW1wbGUKCiAgYGBgamF2YXNjcmlw
        dAogIHZhciBVc2VyID0gRW1iZXIuT2JqZWN0LmV4dGVuZCh7CiAgICBoYXNW
        YWxpZEVtYWlsOiBFbWJlci5jb21wdXRlZC5tYXRjaCgnZW1haWwnLCAvXi4r
        QC4rXC4uKyQvKQogIH0pOwogIHZhciB1c2VyID0gVXNlci5jcmVhdGUoe2xv
        Z2dlZEluOiBmYWxzZX0pOwogIHVzZXIuZ2V0KCdoYXNWYWxpZEVtYWlsJyk7
        IC8vIGZhbHNlCiAgdXNlci5zZXQoJ2VtYWlsJywgJycpOwogIHVzZXIuZ2V0
        KCdoYXNWYWxpZEVtYWlsJyk7IC8vIGZhbHNlCiAgdXNlci5zZXQoJ2VtYWls
        JywgJ2VtYmVyX2hhbXN0ZXJAZXhhbXBsZS5jb20nKTsKICB1c2VyLmdldCgn
        aGFzVmFsaWRFbWFpbCcpOyAvLyB0cnVlCiAgYGBgCgogIEBtZXRob2QgY29t
        cHV0ZWQubWF0Y2gKICBAZm9yIEVtYmVyCiAgQHBhcmFtIHtTdHJpbmd9IGRl
        cGVuZGVudEtleQogIEBwYXJhbSB7UmVnRXhwfSByZWdleHAKICBAcmV0dXJu
        IHtFbWJlci5Db21wdXRlZFByb3BlcnR5fSBjb21wdXRlZCBwcm9wZXJ0eSB3
        aGljaCBtYXRjaAogIHRoZSBvcmlnaW5hbCB2YWx1ZSBmb3IgcHJvcGVydHkg
        YWdhaW5zdCBhIGdpdmVuIFJlZ0V4cAoqLwpyZWdpc3RlckNvbXB1dGVkKCdt
        YXRjaCcsIGZ1bmN0aW9uKGRlcGVuZGVudEtleSwgcmVnZXhwKSB7CiAgdmFy
        IHZhbHVlID0gZ2V0KHRoaXMsIGRlcGVuZGVudEtleSk7CiAgcmV0dXJuIHR5
        cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycgPyByZWdleHAudGVzdCh2YWx1ZSkg
        OiBmYWxzZTsKfSk7CgovKioKICBBIGNvbXB1dGVkIHByb3BlcnR5IHRoYXQg
        cmV0dXJucyB0cnVlIGlmIHRoZSBwcm92aWRlZCBkZXBlbmRlbnQgcHJvcGVy
        dHkKICBpcyBlcXVhbCB0byB0aGUgZ2l2ZW4gdmFsdWUuCgogIEV4YW1wbGUK
        CiAgYGBgamF2YXNjcmlwdAogIHZhciBIYW1zdGVyID0gRW1iZXIuT2JqZWN0
        LmV4dGVuZCh7CiAgICBuYXBUaW1lOiBFbWJlci5jb21wdXRlZC5lcXVhbCgn
        c3RhdGUnLCAnc2xlZXB5JykKICB9KTsKICB2YXIgaGFtc3RlciA9IEhhbXN0
        ZXIuY3JlYXRlKCk7CiAgaGFtc3Rlci5nZXQoJ25hcFRpbWUnKTsgLy8gZmFs
        c2UKICBoYW1zdGVyLnNldCgnc3RhdGUnLCAnc2xlZXB5Jyk7CiAgaGFtc3Rl
        ci5nZXQoJ25hcFRpbWUnKTsgLy8gdHJ1ZQogIGhhbXN0ZXIuc2V0KCdzdGF0
        ZScsICdodW5ncnknKTsKICBoYW1zdGVyLmdldCgnbmFwVGltZScpOyAvLyBm
        YWxzZQogIGBgYAoKICBAbWV0aG9kIGNvbXB1dGVkLmVxdWFsCiAgQGZvciBF
        bWJlcgogIEBwYXJhbSB7U3RyaW5nfSBkZXBlbmRlbnRLZXkKICBAcGFyYW0g
        e1N0cmluZ3xOdW1iZXJ8T2JqZWN0fSB2YWx1ZQogIEByZXR1cm4ge0VtYmVy
        LkNvbXB1dGVkUHJvcGVydHl9IGNvbXB1dGVkIHByb3BlcnR5IHdoaWNoIHJl
        dHVybnMgdHJ1ZSBpZgogIHRoZSBvcmlnaW5hbCB2YWx1ZSBmb3IgcHJvcGVy
        dHkgaXMgZXF1YWwgdG8gdGhlIGdpdmVuIHZhbHVlLgoqLwpyZWdpc3RlckNv
        bXB1dGVkKCdlcXVhbCcsIGZ1bmN0aW9uKGRlcGVuZGVudEtleSwgdmFsdWUp
        IHsKICByZXR1cm4gZ2V0KHRoaXMsIGRlcGVuZGVudEtleSkgPT09IHZhbHVl
        Owp9KTsKCi8qKgogIEEgY29tcHV0ZWQgcHJvcGVydHkgdGhhdCByZXR1cm5z
        IHRydWUgaWYgdGhlIHByb3ZpZWQgZGVwZW5kZW50IHByb3BlcnR5CiAgaXMg
        Z3JlYXRlciB0aGFuIHRoZSBwcm92aWRlZCB2YWx1ZS4KCiAgRXhhbXBsZQoK
        ICBgYGBqYXZhc2NyaXB0CiAgdmFyIEhhbXN0ZXIgPSBFbWJlci5PYmplY3Qu
        ZXh0ZW5kKHsKICAgIGhhc1Rvb01hbnlCYW5hbmFzOiBFbWJlci5jb21wdXRl
        ZC5ndCgnbnVtQmFuYW5hcycsIDEwKQogIH0pOwogIHZhciBoYW1zdGVyID0g
        SGFtc3Rlci5jcmVhdGUoKTsKICBoYW1zdGVyLmdldCgnaGFzVG9vTWFueUJh
        bmFuYXMnKTsgLy8gZmFsc2UKICBoYW1zdGVyLnNldCgnbnVtQmFuYW5hcycs
        IDMpOwogIGhhbXN0ZXIuZ2V0KCdoYXNUb29NYW55QmFuYW5hcycpOyAvLyBm
        YWxzZQogIGhhbXN0ZXIuc2V0KCdudW1CYW5hbmFzJywgMTEpOwogIGhhbXN0
        ZXIuZ2V0KCdoYXNUb29NYW55QmFuYW5hcycpOyAvLyB0cnVlCiAgYGBgCgog
        IEBtZXRob2QgY29tcHV0ZWQuZ3QKICBAZm9yIEVtYmVyCiAgQHBhcmFtIHtT
        dHJpbmd9IGRlcGVuZGVudEtleQogIEBwYXJhbSB7TnVtYmVyfSB2YWx1ZQog
        IEByZXR1cm4ge0VtYmVyLkNvbXB1dGVkUHJvcGVydHl9IGNvbXB1dGVkIHBy
        b3BlcnR5IHdoaWNoIHJldHVybnMgdHJ1ZSBpZgogIHRoZSBvcmlnaW5hbCB2
        YWx1ZSBmb3IgcHJvcGVydHkgaXMgZ3JlYXRlciB0aGVuIGdpdmVuIHZhbHVl
        LgoqLwpyZWdpc3RlckNvbXB1dGVkKCdndCcsIGZ1bmN0aW9uKGRlcGVuZGVu
        dEtleSwgdmFsdWUpIHsKICByZXR1cm4gZ2V0KHRoaXMsIGRlcGVuZGVudEtl
        eSkgPiB2YWx1ZTsKfSk7CgovKioKICBBIGNvbXB1dGVkIHByb3BlcnR5IHRo
        YXQgcmV0dXJucyB0cnVlIGlmIHRoZSBwcm92aWRlZCBkZXBlbmRlbnQgcHJv
        cGVydHkKICBpcyBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8gdGhlIHByb3Zp
        ZGVkIHZhbHVlLgoKICBFeGFtcGxlCgogIGBgYGphdmFzY3JpcHQKICB2YXIg
        SGFtc3RlciA9IEVtYmVyLk9iamVjdC5leHRlbmQoewogICAgaGFzVG9vTWFu
        eUJhbmFuYXM6IEVtYmVyLmNvbXB1dGVkLmd0ZSgnbnVtQmFuYW5hcycsIDEw
        KQogIH0pOwogIHZhciBoYW1zdGVyID0gSGFtc3Rlci5jcmVhdGUoKTsKICBo
        YW1zdGVyLmdldCgnaGFzVG9vTWFueUJhbmFuYXMnKTsgLy8gZmFsc2UKICBo
        YW1zdGVyLnNldCgnbnVtQmFuYW5hcycsIDMpOwogIGhhbXN0ZXIuZ2V0KCdo
        YXNUb29NYW55QmFuYW5hcycpOyAvLyBmYWxzZQogIGhhbXN0ZXIuc2V0KCdu
        dW1CYW5hbmFzJywgMTApOwogIGhhbXN0ZXIuZ2V0KCdoYXNUb29NYW55QmFu
        YW5hcycpOyAvLyB0cnVlCiAgYGBgCgogIEBtZXRob2QgY29tcHV0ZWQuZ3Rl
        CiAgQGZvciBFbWJlcgogIEBwYXJhbSB7U3RyaW5nfSBkZXBlbmRlbnRLZXkK
        ICBAcGFyYW0ge051bWJlcn0gdmFsdWUKICBAcmV0dXJuIHtFbWJlci5Db21w
        dXRlZFByb3BlcnR5fSBjb21wdXRlZCBwcm9wZXJ0eSB3aGljaCByZXR1cm5z
        IHRydWUgaWYKICB0aGUgb3JpZ2luYWwgdmFsdWUgZm9yIHByb3BlcnR5IGlz
        IGdyZWF0ZXIgb3IgZXF1YWwgdGhlbiBnaXZlbiB2YWx1ZS4KKi8KcmVnaXN0
        ZXJDb21wdXRlZCgnZ3RlJywgZnVuY3Rpb24oZGVwZW5kZW50S2V5LCB2YWx1
        ZSkgewogIHJldHVybiBnZXQodGhpcywgZGVwZW5kZW50S2V5KSA+PSB2YWx1
        ZTsKfSk7CgovKioKICBBIGNvbXB1dGVkIHByb3BlcnR5IHRoYXQgcmV0dXJu
        cyB0cnVlIGlmIHRoZSBwcm92aWRlZCBkZXBlbmRlbnQgcHJvcGVydHkKICBp
        cyBsZXNzIHRoYW4gdGhlIHByb3ZpZGVkIHZhbHVlLgoKICBFeGFtcGxlCgog
        IGBgYGphdmFzY3JpcHQKICB2YXIgSGFtc3RlciA9IEVtYmVyLk9iamVjdC5l
        eHRlbmQoewogICAgbmVlZHNNb3JlQmFuYW5hczogRW1iZXIuY29tcHV0ZWQu
        bHQoJ251bUJhbmFuYXMnLCAzKQogIH0pOwogIHZhciBoYW1zdGVyID0gSGFt
        c3Rlci5jcmVhdGUoKTsKICBoYW1zdGVyLmdldCgnbmVlZHNNb3JlQmFuYW5h
        cycpOyAvLyB0cnVlCiAgaGFtc3Rlci5zZXQoJ251bUJhbmFuYXMnLCAzKTsK
        ICBoYW1zdGVyLmdldCgnbmVlZHNNb3JlQmFuYW5hcycpOyAvLyBmYWxzZQog
        IGhhbXN0ZXIuc2V0KCdudW1CYW5hbmFzJywgMik7CiAgaGFtc3Rlci5nZXQo
        J25lZWRzTW9yZUJhbmFuYXMnKTsgLy8gdHJ1ZQogIGBgYAoKICBAbWV0aG9k
        IGNvbXB1dGVkLmx0CiAgQGZvciBFbWJlcgogIEBwYXJhbSB7U3RyaW5nfSBk
        ZXBlbmRlbnRLZXkKICBAcGFyYW0ge051bWJlcn0gdmFsdWUKICBAcmV0dXJu
        IHtFbWJlci5Db21wdXRlZFByb3BlcnR5fSBjb21wdXRlZCBwcm9wZXJ0eSB3
        aGljaCByZXR1cm5zIHRydWUgaWYKICB0aGUgb3JpZ2luYWwgdmFsdWUgZm9y
        IHByb3BlcnR5IGlzIGxlc3MgdGhlbiBnaXZlbiB2YWx1ZS4KKi8KcmVnaXN0
        ZXJDb21wdXRlZCgnbHQnLCBmdW5jdGlvbihkZXBlbmRlbnRLZXksIHZhbHVl
        KSB7CiAgcmV0dXJuIGdldCh0aGlzLCBkZXBlbmRlbnRLZXkpIDwgdmFsdWU7
        Cn0pOwoKLyoqCiAgQSBjb21wdXRlZCBwcm9wZXJ0eSB0aGF0IHJldHVybnMg
        dHJ1ZSBpZiB0aGUgcHJvdmlkZWQgZGVwZW5kZW50IHByb3BlcnR5CiAgaXMg
        bGVzcyB0aGFuIG9yIGVxdWFsIHRvIHRoZSBwcm92aWRlZCB2YWx1ZS4KCiAg
        RXhhbXBsZQoKICBgYGBqYXZhc2NyaXB0CiAgdmFyIEhhbXN0ZXIgPSBFbWJl
        ci5PYmplY3QuZXh0ZW5kKHsKICAgIG5lZWRzTW9yZUJhbmFuYXM6IEVtYmVy
        LmNvbXB1dGVkLmx0ZSgnbnVtQmFuYW5hcycsIDMpCiAgfSk7CiAgdmFyIGhh
        bXN0ZXIgPSBIYW1zdGVyLmNyZWF0ZSgpOwogIGhhbXN0ZXIuZ2V0KCduZWVk
        c01vcmVCYW5hbmFzJyk7IC8vIHRydWUKICBoYW1zdGVyLnNldCgnbnVtQmFu
        YW5hcycsIDUpOwogIGhhbXN0ZXIuZ2V0KCduZWVkc01vcmVCYW5hbmFzJyk7
        IC8vIGZhbHNlCiAgaGFtc3Rlci5zZXQoJ251bUJhbmFuYXMnLCAzKTsKICBo
        YW1zdGVyLmdldCgnbmVlZHNNb3JlQmFuYW5hcycpOyAvLyB0cnVlCiAgYGBg
        CgogIEBtZXRob2QgY29tcHV0ZWQubHRlCiAgQGZvciBFbWJlcgogIEBwYXJh
        bSB7U3RyaW5nfSBkZXBlbmRlbnRLZXkKICBAcGFyYW0ge051bWJlcn0gdmFs
        dWUKICBAcmV0dXJuIHtFbWJlci5Db21wdXRlZFByb3BlcnR5fSBjb21wdXRl
        ZCBwcm9wZXJ0eSB3aGljaCByZXR1cm5zIHRydWUgaWYKICB0aGUgb3JpZ2lu
        YWwgdmFsdWUgZm9yIHByb3BlcnR5IGlzIGxlc3Mgb3IgZXF1YWwgdGhlbiBn
        aXZlbiB2YWx1ZS4KKi8KcmVnaXN0ZXJDb21wdXRlZCgnbHRlJywgZnVuY3Rp
        b24oZGVwZW5kZW50S2V5LCB2YWx1ZSkgewogIHJldHVybiBnZXQodGhpcywg
        ZGVwZW5kZW50S2V5KSA8PSB2YWx1ZTsKfSk7CgovKioKICBBIGNvbXB1dGVk
        IHByb3BlcnR5IHRoYXQgcGVyZm9ybXMgYSBsb2dpY2FsIGBhbmRgIG9uIHRo
        ZQogIG9yaWdpbmFsIHZhbHVlcyBmb3IgdGhlIHByb3ZpZGVkIGRlcGVuZGVu
        dCBwcm9wZXJ0aWVzLgoKICBFeGFtcGxlCgogIGBgYGphdmFzY3JpcHQKICB2
        YXIgSGFtc3RlciA9IEVtYmVyLk9iamVjdC5leHRlbmQoewogICAgcmVhZHlG
        b3JDYW1wOiBFbWJlci5jb21wdXRlZC5hbmQoJ2hhc1RlbnQnLCAnaGFzQmFj
        a3BhY2snKQogIH0pOwogIHZhciBoYW1zdGVyID0gSGFtc3Rlci5jcmVhdGUo
        KTsKICBoYW1zdGVyLmdldCgncmVhZHlGb3JDYW1wJyk7IC8vIGZhbHNlCiAg
        aGFtc3Rlci5zZXQoJ2hhc1RlbnQnLCB0cnVlKTsKICBoYW1zdGVyLmdldCgn
        cmVhZHlGb3JDYW1wJyk7IC8vIGZhbHNlCiAgaGFtc3Rlci5zZXQoJ2hhc0Jh
        Y2twYWNrJywgdHJ1ZSk7CiAgaGFtc3Rlci5nZXQoJ3JlYWR5Rm9yQ2FtcCcp
        OyAvLyB0cnVlCiAgYGBgCgogIEBtZXRob2QgY29tcHV0ZWQuYW5kCiAgQGZv
        ciBFbWJlcgogIEBwYXJhbSB7U3RyaW5nfSBkZXBlbmRlbnRLZXkqCiAgQHJl
        dHVybiB7RW1iZXIuQ29tcHV0ZWRQcm9wZXJ0eX0gY29tcHV0ZWQgcHJvcGVy
        dHkgd2hpY2ggcGVyZm9ybXMKICBhIGxvZ2ljYWwgYGFuZGAgb24gdGhlIHZh
        bHVlcyBvZiBhbGwgdGhlIG9yaWdpbmFsIHZhbHVlcyBmb3IgcHJvcGVydGll
        cy4KKi8KcmVnaXN0ZXJDb21wdXRlZFdpdGhQcm9wZXJ0aWVzKCdhbmQnLCBm
        dW5jdGlvbihwcm9wZXJ0aWVzKSB7CiAgZm9yICh2YXIga2V5IGluIHByb3Bl
        cnRpZXMpIHsKICAgIGlmIChwcm9wZXJ0aWVzLmhhc093blByb3BlcnR5KGtl
        eSkgJiYgIXByb3BlcnRpZXNba2V5XSkgewogICAgICByZXR1cm4gZmFsc2U7
        CiAgICB9CiAgfQogIHJldHVybiB0cnVlOwp9KTsKCi8qKgogIEEgY29tcHV0
        ZWQgcHJvcGVydHkgd2hpY2ggcGVyZm9ybXMgYSBsb2dpY2FsIGBvcmAgb24g
        dGhlCiAgb3JpZ2luYWwgdmFsdWVzIGZvciB0aGUgcHJvdmlkZWQgZGVwZW5k
        ZW50IHByb3BlcnRpZXMuCgogIEV4YW1wbGUKCiAgYGBgamF2YXNjcmlwdAog
        IHZhciBIYW1zdGVyID0gRW1iZXIuT2JqZWN0LmV4dGVuZCh7CiAgICByZWFk
        eUZvclJhaW46IEVtYmVyLmNvbXB1dGVkLm9yKCdoYXNKYWNrZXQnLCAnaGFz
        VW1icmVsbGEnKQogIH0pOwogIHZhciBoYW1zdGVyID0gSGFtc3Rlci5jcmVh
        dGUoKTsKICBoYW1zdGVyLmdldCgncmVhZHlGb3JSYWluJyk7IC8vIGZhbHNl
        CiAgaGFtc3Rlci5zZXQoJ2hhc0phY2tldCcsIHRydWUpOwogIGhhbXN0ZXIu
        Z2V0KCdyZWFkeUZvclJhaW4nKTsgLy8gdHJ1ZQogIGBgYAoKICBAbWV0aG9k
        IGNvbXB1dGVkLm9yCiAgQGZvciBFbWJlcgogIEBwYXJhbSB7U3RyaW5nfSBk
        ZXBlbmRlbnRLZXkqCiAgQHJldHVybiB7RW1iZXIuQ29tcHV0ZWRQcm9wZXJ0
        eX0gY29tcHV0ZWQgcHJvcGVydHkgd2hpY2ggcGVyZm9ybXMKICBhIGxvZ2lj
        YWwgYG9yYCBvbiB0aGUgdmFsdWVzIG9mIGFsbCB0aGUgb3JpZ2luYWwgdmFs
        dWVzIGZvciBwcm9wZXJ0aWVzLgoqLwpyZWdpc3RlckNvbXB1dGVkV2l0aFBy
        b3BlcnRpZXMoJ29yJywgZnVuY3Rpb24ocHJvcGVydGllcykgewogIGZvciAo
        dmFyIGtleSBpbiBwcm9wZXJ0aWVzKSB7CiAgICBpZiAocHJvcGVydGllcy5o
        YXNPd25Qcm9wZXJ0eShrZXkpICYmIHByb3BlcnRpZXNba2V5XSkgewogICAg
        ICByZXR1cm4gdHJ1ZTsKICAgIH0KICB9CiAgcmV0dXJuIGZhbHNlOwp9KTsK
        Ci8qKgogIEEgY29tcHV0ZWQgcHJvcGVydHkgdGhhdCByZXR1cm5zIHRoZSBm
        aXJzdCB0cnV0aHkgdmFsdWUKICBmcm9tIGEgbGlzdCBvZiBkZXBlbmRlbnQg
        cHJvcGVydGllcy4KCiAgRXhhbXBsZQoKICBgYGBqYXZhc2NyaXB0CiAgdmFy
        IEhhbXN0ZXIgPSBFbWJlci5PYmplY3QuZXh0ZW5kKHsKICAgIGhhc0Nsb3Ro
        ZXM6IEVtYmVyLmNvbXB1dGVkLmFueSgnaGF0JywgJ3NoaXJ0JykKICB9KTsK
        ICB2YXIgaGFtc3RlciA9IEhhbXN0ZXIuY3JlYXRlKCk7CiAgaGFtc3Rlci5n
        ZXQoJ2hhc0Nsb3RoZXMnKTsgLy8gbnVsbAogIGhhbXN0ZXIuc2V0KCdzaGly
        dCcsICdIYXdhaWlhbiBTaGlydCcpOwogIGhhbXN0ZXIuZ2V0KCdoYXNDbG90
        aGVzJyk7IC8vICdIYXdhaWlhbiBTaGlydCcKICBgYGAKCiAgQG1ldGhvZCBj
        b21wdXRlZC5hbnkKICBAZm9yIEVtYmVyCiAgQHBhcmFtIHtTdHJpbmd9IGRl
        cGVuZGVudEtleSoKICBAcmV0dXJuIHtFbWJlci5Db21wdXRlZFByb3BlcnR5
        fSBjb21wdXRlZCBwcm9wZXJ0eSB3aGljaCByZXR1cm5zCiAgdGhlIGZpcnN0
        IHRydXRoeSB2YWx1ZSBvZiBnaXZlbiBsaXN0IG9mIHByb3BlcnRpZXMuCiov
        CnJlZ2lzdGVyQ29tcHV0ZWRXaXRoUHJvcGVydGllcygnYW55JywgZnVuY3Rp
        b24ocHJvcGVydGllcykgewogIGZvciAodmFyIGtleSBpbiBwcm9wZXJ0aWVz
        KSB7CiAgICBpZiAocHJvcGVydGllcy5oYXNPd25Qcm9wZXJ0eShrZXkpICYm
        IHByb3BlcnRpZXNba2V5XSkgewogICAgICByZXR1cm4gcHJvcGVydGllc1tr
        ZXldOwogICAgfQogIH0KICByZXR1cm4gbnVsbDsKfSk7CgovKioKICBBIGNv
        bXB1dGVkIHByb3BlcnR5IHRoYXQgcmV0dXJucyB0aGUgYXJyYXkgb2YgdmFs
        dWVzCiAgZm9yIHRoZSBwcm92aWRlZCBkZXBlbmRlbnQgcHJvcGVydGllcy4K
        CiAgRXhhbXBsZQoKICBgYGBqYXZhc2NyaXB0CiAgdmFyIEhhbXN0ZXIgPSBF
        bWJlci5PYmplY3QuZXh0ZW5kKHsKICAgIGNsb3RoZXM6IEVtYmVyLmNvbXB1
        dGVkLmNvbGxlY3QoJ2hhdCcsICdzaGlydCcpCiAgfSk7CiAgdmFyIGhhbXN0
        ZXIgPSBIYW1zdGVyLmNyZWF0ZSgpOwogIGhhbXN0ZXIuZ2V0KCdjbG90aGVz
        Jyk7IC8vIFtudWxsLCBudWxsXQogIGhhbXN0ZXIuc2V0KCdoYXQnLCAnQ2Ft
        cCBIYXQnKTsKICBoYW1zdGVyLnNldCgnc2hpcnQnLCAnQ2FtcCBTaGlydCcp
        OwogIGhhbXN0ZXIuZ2V0KCdjbG90aGVzJyk7IC8vIFsnQ2FtcCBIYXQnLCAn
        Q2FtcCBTaGlydCddCiAgYGBgCgogIEBtZXRob2QgY29tcHV0ZWQuY29sbGVj
        dAogIEBmb3IgRW1iZXIKICBAcGFyYW0ge1N0cmluZ30gZGVwZW5kZW50S2V5
        KgogIEByZXR1cm4ge0VtYmVyLkNvbXB1dGVkUHJvcGVydHl9IGNvbXB1dGVk
        IHByb3BlcnR5IHdoaWNoIG1hcHMKICB2YWx1ZXMgb2YgYWxsIHBhc3NlZCBw
        cm9wZXJ0aWVzIGluIHRvIGFuIGFycmF5LgoqLwpyZWdpc3RlckNvbXB1dGVk
        V2l0aFByb3BlcnRpZXMoJ2NvbGxlY3QnLCBmdW5jdGlvbihwcm9wZXJ0aWVz
        KSB7CiAgdmFyIHJlcyA9IFtdOwogIGZvciAodmFyIGtleSBpbiBwcm9wZXJ0
        aWVzKSB7CiAgICBpZiAocHJvcGVydGllcy5oYXNPd25Qcm9wZXJ0eShrZXkp
        KSB7CiAgICAgIGlmIChFbWJlci5pc05vbmUocHJvcGVydGllc1trZXldKSkg
        ewogICAgICAgIHJlcy5wdXNoKG51bGwpOwogICAgICB9IGVsc2UgewogICAg
        ICAgIHJlcy5wdXNoKHByb3BlcnRpZXNba2V5XSk7CiAgICAgIH0KICAgIH0K
        ICB9CiAgcmV0dXJuIHJlczsKfSk7CgovKioKICBDcmVhdGVzIGEgbmV3IHBy
        b3BlcnR5IHRoYXQgaXMgYW4gYWxpYXMgZm9yIGFub3RoZXIgcHJvcGVydHkK
        ICBvbiBhbiBvYmplY3QuIENhbGxzIHRvIGBnZXRgIG9yIGBzZXRgIHRoaXMg
        cHJvcGVydHkgYmVoYXZlIGFzCiAgdGhvdWdoIHRoZXkgd2VyZSBjYWxsZWQg
        b24gdGhlIG9yaWdpbmFsIHByb3BlcnR5LgoKICBgYGBqYXZhc2NyaXB0CiAg
        UGVyc29uID0gRW1iZXIuT2JqZWN0LmV4dGVuZCh7CiAgICBuYW1lOiAnQWxl
        eCBNYXRjaG5lZXInLAogICAgbm9tZW46IEVtYmVyLmNvbXB1dGVkLmFsaWFz
        KCduYW1lJykKICB9KTsKCiAgYWxleCA9IFBlcnNvbi5jcmVhdGUoKTsKICBh
        bGV4LmdldCgnbm9tZW4nKTsgLy8gJ0FsZXggTWF0Y2huZWVyJwogIGFsZXgu
        Z2V0KCduYW1lJyk7ICAvLyAnQWxleCBNYXRjaG5lZXInCgogIGFsZXguc2V0
        KCdub21lbicsICdAbWFjaHR5Jyk7CiAgYWxleC5nZXQoJ25hbWUnKTsgIC8v
        ICdAbWFjaHR5JwogIGBgYAogIEBtZXRob2QgY29tcHV0ZWQuYWxpYXMKICBA
        Zm9yIEVtYmVyCiAgQHBhcmFtIHtTdHJpbmd9IGRlcGVuZGVudEtleQogIEBy
        ZXR1cm4ge0VtYmVyLkNvbXB1dGVkUHJvcGVydHl9IGNvbXB1dGVkIHByb3Bl
        cnR5IHdoaWNoIGNyZWF0ZXMgYW4KICBhbGlhcyB0byB0aGUgb3JpZ2luYWwg
        dmFsdWUgZm9yIHByb3BlcnR5LgoqLwpFbWJlci5jb21wdXRlZC5hbGlhcyA9
        IGZ1bmN0aW9uKGRlcGVuZGVudEtleSkgewogIHJldHVybiBFbWJlci5jb21w
        dXRlZChkZXBlbmRlbnRLZXksIGZ1bmN0aW9uKGtleSwgdmFsdWUpIHsKICAg
        IGlmIChhcmd1bWVudHMubGVuZ3RoID4gMSkgewogICAgICBzZXQodGhpcywg
        ZGVwZW5kZW50S2V5LCB2YWx1ZSk7CiAgICAgIHJldHVybiB2YWx1ZTsKICAg
        IH0gZWxzZSB7CiAgICAgIHJldHVybiBnZXQodGhpcywgZGVwZW5kZW50S2V5
        KTsKICAgIH0KICB9KTsKfTsKCi8qKgogIFdoZXJlIGBjb21wdXRlZC5hbGlh
        c2AgYWxpYXNlcyBgZ2V0YCBhbmQgYHNldGAsIGFuZCBhbGxvd3MgZm9yIGJp
        ZGlyZWN0aW9uYWwKICBkYXRhIGZsb3csIGBjb21wdXRlZC5vbmVXYXlgIG9u
        bHkgcHJvdmlkZXMgYW4gYWxpYXNlZCBgZ2V0YC4gVGhlIGBzZXRgIHdpbGwK
        ICBub3QgbXV0YXRlIHRoZSB1cHN0cmVhbSBwcm9wZXJ0eSwgcmF0aGVyIGNh
        dXNlcyB0aGUgY3VycmVudCBwcm9wZXJ0eSB0bwogIGJlY29tZSB0aGUgdmFs
        dWUgc2V0LiBUaGlzIGNhdXNlcyB0aGUgZG93bnN0cmVhbSBwcm9wZXJ0eSB0
        byBwZXJtZW50YW50bHkKICBkaXZlcmdlIGZyb20gdGhlIHVwc3RyZWFtIHBy
        b3BlcnR5LgoKICBFeGFtcGxlCgogIGBgYGphdmFzY3JpcHQKICBVc2VyID0g
        RW1iZXIuT2JqZWN0LmV4dGVuZCh7CiAgICBmaXJzdE5hbWU6IG51bGwsCiAg
        ICBsYXN0TmFtZTogbnVsbCwKICAgIG5pY2tOYW1lOiBFbWJlci5jb21wdXRl
        ZC5vbmVXYXkoJ2ZpcnN0TmFtZScpCiAgfSk7CgogIHVzZXIgPSBVc2VyLmNy
        ZWF0ZSh7CiAgICBmaXJzdE5hbWU6ICdUZWRkeScsCiAgICBsYXN0TmFtZTog
        ICdaZWVubnknCiAgfSk7CgogIHVzZXIuZ2V0KCduaWNrTmFtZScpOwogICMg
        J1RlZGR5JwoKICB1c2VyLnNldCgnbmlja05hbWUnLCAnVGVkZHlCZWFyJyk7
        CiAgIyAnVGVkZHlCZWFyJwoKICB1c2VyLmdldCgnZmlyc3ROYW1lJyk7CiAg
        IyAnVGVkZHknCiAgYGBgCgogIEBtZXRob2QgY29tcHV0ZWQub25lV2F5CiAg
        QGZvciBFbWJlcgogIEBwYXJhbSB7U3RyaW5nfSBkZXBlbmRlbnRLZXkKICBA
        cmV0dXJuIHtFbWJlci5Db21wdXRlZFByb3BlcnR5fSBjb21wdXRlZCBwcm9w
        ZXJ0eSB3aGljaCBjcmVhdGVzIGEKICBvbmUgd2F5IGNvbXB1dGVkIHByb3Bl
        cnR5IHRvIHRoZSBvcmlnaW5hbCB2YWx1ZSBmb3IgcHJvcGVydHkuCiovCkVt
        YmVyLmNvbXB1dGVkLm9uZVdheSA9IGZ1bmN0aW9uKGRlcGVuZGVudEtleSkg
        ewogIHJldHVybiBFbWJlci5jb21wdXRlZChkZXBlbmRlbnRLZXksIGZ1bmN0
        aW9uKCkgewogICAgcmV0dXJuIGdldCh0aGlzLCBkZXBlbmRlbnRLZXkpOwog
        IH0pOwp9OwoKLyoqCiAgQSBjb21wdXRlZCBwcm9wZXJ0eSB0aGF0IGFjdHMg
        bGlrZSBhIHN0YW5kYXJkIGdldHRlciBhbmQgc2V0dGVyLAogIGJ1dCByZXR1
        cm5zIHRoZSB2YWx1ZSBhdCB0aGUgcHJvdmlkZWQgYGRlZmF1bHRQYXRoYCBp
        ZiB0aGUKICBwcm9wZXJ0eSBpdHNlbGYgaGFzIG5vdCBiZWVuIHNldCB0byBh
        IHZhbHVlCgogIEV4YW1wbGUKCiAgYGBgamF2YXNjcmlwdAogIHZhciBIYW1z
        dGVyID0gRW1iZXIuT2JqZWN0LmV4dGVuZCh7CiAgICB3aXNoTGlzdDogRW1i
        ZXIuY29tcHV0ZWQuZGVmYXVsdFRvKCdmYXZvcml0ZUZvb2QnKQogIH0pOwog
        IHZhciBoYW1zdGVyID0gSGFtc3Rlci5jcmVhdGUoe2Zhdm9yaXRlRm9vZDog
        J0JhbmFuYSd9KTsKICBoYW1zdGVyLmdldCgnd2lzaExpc3QnKTsgLy8gJ0Jh
        bmFuYScKICBoYW1zdGVyLnNldCgnd2lzaExpc3QnLCAnTW9yZSBVbml0IFRl
        c3RzJyk7CiAgaGFtc3Rlci5nZXQoJ3dpc2hMaXN0Jyk7IC8vICdNb3JlIFVu
        aXQgVGVzdHMnCiAgaGFtc3Rlci5nZXQoJ2Zhdm9yaXRlRm9vZCcpOyAvLyAn
        QmFuYW5hJwogIGBgYAoKICBAbWV0aG9kIGNvbXB1dGVkLmRlZmF1bHRUbwog
        IEBmb3IgRW1iZXIKICBAcGFyYW0ge1N0cmluZ30gZGVmYXVsdFBhdGgKICBA
        cmV0dXJuIHtFbWJlci5Db21wdXRlZFByb3BlcnR5fSBjb21wdXRlZCBwcm9w
        ZXJ0eSB3aGljaCBhY3RzIGxpa2UKICBhIHN0YW5kYXJkIGdldHRlciBhbmQg
        c2V0dGVyLCBidXQgZGVmYXVsdHMgdG8gdGhlIHZhbHVlIGZyb20gYGRlZmF1
        bHRQYXRoYC4KKi8KRW1iZXIuY29tcHV0ZWQuZGVmYXVsdFRvID0gZnVuY3Rp
        b24oZGVmYXVsdFBhdGgpIHsKICByZXR1cm4gRW1iZXIuY29tcHV0ZWQoZnVu
        Y3Rpb24oa2V5LCBuZXdWYWx1ZSwgY2FjaGVkVmFsdWUpIHsKICAgIGlmIChh
        cmd1bWVudHMubGVuZ3RoID09PSAxKSB7CiAgICAgIHJldHVybiBjYWNoZWRW
        YWx1ZSAhPSBudWxsID8gY2FjaGVkVmFsdWUgOiBnZXQodGhpcywgZGVmYXVs
        dFBhdGgpOwogICAgfQogICAgcmV0dXJuIG5ld1ZhbHVlICE9IG51bGwgPyBu
        ZXdWYWx1ZSA6IGdldCh0aGlzLCBkZWZhdWx0UGF0aCk7CiAgfSk7Cn07CgoK
        fSkoKTsKCgoKKGZ1bmN0aW9uKCkgewovLyBFbWJlci50cnlGaW5hbGx5Ci8q
        KgpAbW9kdWxlIGVtYmVyLW1ldGFsCiovCgp2YXIgQUZURVJfT0JTRVJWRVJT
        ID0gJzpjaGFuZ2UnLAogICAgQkVGT1JFX09CU0VSVkVSUyA9ICc6YmVmb3Jl
        JzsKCmZ1bmN0aW9uIGNoYW5nZUV2ZW50KGtleU5hbWUpIHsKICByZXR1cm4g
        a2V5TmFtZStBRlRFUl9PQlNFUlZFUlM7Cn0KCmZ1bmN0aW9uIGJlZm9yZUV2
        ZW50KGtleU5hbWUpIHsKICByZXR1cm4ga2V5TmFtZStCRUZPUkVfT0JTRVJW
        RVJTOwp9CgovKioKICBAbWV0aG9kIGFkZE9ic2VydmVyCiAgQHBhcmFtIG9i
        agogIEBwYXJhbSB7U3RyaW5nfSBwYXRoCiAgQHBhcmFtIHtPYmplY3R8RnVu
        Y3Rpb259IHRhcmdldE9yTWV0aG9kCiAgQHBhcmFtIHtGdW5jdGlvbnxTdHJp
        bmd9IFttZXRob2RdCiovCkVtYmVyLmFkZE9ic2VydmVyID0gZnVuY3Rpb24o
        b2JqLCBfcGF0aCwgdGFyZ2V0LCBtZXRob2QpIHsKICBFbWJlci5hZGRMaXN0
        ZW5lcihvYmosIGNoYW5nZUV2ZW50KF9wYXRoKSwgdGFyZ2V0LCBtZXRob2Qp
        OwogIEVtYmVyLndhdGNoKG9iaiwgX3BhdGgpOwoKICByZXR1cm4gdGhpczsK
        fTsKCkVtYmVyLm9ic2VydmVyc0ZvciA9IGZ1bmN0aW9uKG9iaiwgcGF0aCkg
        ewogIHJldHVybiBFbWJlci5saXN0ZW5lcnNGb3Iob2JqLCBjaGFuZ2VFdmVu
        dChwYXRoKSk7Cn07CgovKioKICBAbWV0aG9kIHJlbW92ZU9ic2VydmVyCiAg
        QHBhcmFtIG9iagogIEBwYXJhbSB7U3RyaW5nfSBwYXRoCiAgQHBhcmFtIHtP
        YmplY3R8RnVuY3Rpb259IHRhcmdldE9yTWV0aG9kCiAgQHBhcmFtIHtGdW5j
        dGlvbnxTdHJpbmd9IFttZXRob2RdCiovCkVtYmVyLnJlbW92ZU9ic2VydmVy
        ID0gZnVuY3Rpb24ob2JqLCBfcGF0aCwgdGFyZ2V0LCBtZXRob2QpIHsKICBF
        bWJlci51bndhdGNoKG9iaiwgX3BhdGgpOwogIEVtYmVyLnJlbW92ZUxpc3Rl
        bmVyKG9iaiwgY2hhbmdlRXZlbnQoX3BhdGgpLCB0YXJnZXQsIG1ldGhvZCk7
        CgogIHJldHVybiB0aGlzOwp9OwoKLyoqCiAgQG1ldGhvZCBhZGRCZWZvcmVP
        YnNlcnZlcgogIEBwYXJhbSBvYmoKICBAcGFyYW0ge1N0cmluZ30gcGF0aAog
        IEBwYXJhbSB7T2JqZWN0fEZ1bmN0aW9ufSB0YXJnZXRPck1ldGhvZAogIEBw
        YXJhbSB7RnVuY3Rpb258U3RyaW5nfSBbbWV0aG9kXQoqLwpFbWJlci5hZGRC
        ZWZvcmVPYnNlcnZlciA9IGZ1bmN0aW9uKG9iaiwgX3BhdGgsIHRhcmdldCwg
        bWV0aG9kKSB7CiAgRW1iZXIuYWRkTGlzdGVuZXIob2JqLCBiZWZvcmVFdmVu
        dChfcGF0aCksIHRhcmdldCwgbWV0aG9kKTsKICBFbWJlci53YXRjaChvYmos
        IF9wYXRoKTsKCiAgcmV0dXJuIHRoaXM7Cn07CgovLyBTdXNwZW5kIG9ic2Vy
        dmVyIGR1cmluZyBjYWxsYmFjay4KLy8KLy8gVGhpcyBzaG91bGQgb25seSBi
        ZSB1c2VkIGJ5IHRoZSB0YXJnZXQgb2YgdGhlIG9ic2VydmVyCi8vIHdoaWxl
        IGl0IGlzIHNldHRpbmcgdGhlIG9ic2VydmVkIHBhdGguCkVtYmVyLl9zdXNw
        ZW5kQmVmb3JlT2JzZXJ2ZXIgPSBmdW5jdGlvbihvYmosIHBhdGgsIHRhcmdl
        dCwgbWV0aG9kLCBjYWxsYmFjaykgewogIHJldHVybiBFbWJlci5fc3VzcGVu
        ZExpc3RlbmVyKG9iaiwgYmVmb3JlRXZlbnQocGF0aCksIHRhcmdldCwgbWV0
        aG9kLCBjYWxsYmFjayk7Cn07CgpFbWJlci5fc3VzcGVuZE9ic2VydmVyID0g
        ZnVuY3Rpb24ob2JqLCBwYXRoLCB0YXJnZXQsIG1ldGhvZCwgY2FsbGJhY2sp
        IHsKICByZXR1cm4gRW1iZXIuX3N1c3BlbmRMaXN0ZW5lcihvYmosIGNoYW5n
        ZUV2ZW50KHBhdGgpLCB0YXJnZXQsIG1ldGhvZCwgY2FsbGJhY2spOwp9OwoK
        dmFyIG1hcCA9IEVtYmVyLkFycmF5UG9seWZpbGxzLm1hcDsKCkVtYmVyLl9z
        dXNwZW5kQmVmb3JlT2JzZXJ2ZXJzID0gZnVuY3Rpb24ob2JqLCBwYXRocywg
        dGFyZ2V0LCBtZXRob2QsIGNhbGxiYWNrKSB7CiAgdmFyIGV2ZW50cyA9IG1h
        cC5jYWxsKHBhdGhzLCBiZWZvcmVFdmVudCk7CiAgcmV0dXJuIEVtYmVyLl9z
        dXNwZW5kTGlzdGVuZXJzKG9iaiwgZXZlbnRzLCB0YXJnZXQsIG1ldGhvZCwg
        Y2FsbGJhY2spOwp9OwoKRW1iZXIuX3N1c3BlbmRPYnNlcnZlcnMgPSBmdW5j
        dGlvbihvYmosIHBhdGhzLCB0YXJnZXQsIG1ldGhvZCwgY2FsbGJhY2spIHsK
        ICB2YXIgZXZlbnRzID0gbWFwLmNhbGwocGF0aHMsIGNoYW5nZUV2ZW50KTsK
        ICByZXR1cm4gRW1iZXIuX3N1c3BlbmRMaXN0ZW5lcnMob2JqLCBldmVudHMs
        IHRhcmdldCwgbWV0aG9kLCBjYWxsYmFjayk7Cn07CgpFbWJlci5iZWZvcmVP
        YnNlcnZlcnNGb3IgPSBmdW5jdGlvbihvYmosIHBhdGgpIHsKICByZXR1cm4g
        RW1iZXIubGlzdGVuZXJzRm9yKG9iaiwgYmVmb3JlRXZlbnQocGF0aCkpOwp9
        OwoKLyoqCiAgQG1ldGhvZCByZW1vdmVCZWZvcmVPYnNlcnZlcgogIEBwYXJh
        bSBvYmoKICBAcGFyYW0ge1N0cmluZ30gcGF0aAogIEBwYXJhbSB7T2JqZWN0
        fEZ1bmN0aW9ufSB0YXJnZXRPck1ldGhvZAogIEBwYXJhbSB7RnVuY3Rpb258
        U3RyaW5nfSBbbWV0aG9kXQoqLwpFbWJlci5yZW1vdmVCZWZvcmVPYnNlcnZl
        ciA9IGZ1bmN0aW9uKG9iaiwgX3BhdGgsIHRhcmdldCwgbWV0aG9kKSB7CiAg
        RW1iZXIudW53YXRjaChvYmosIF9wYXRoKTsKICBFbWJlci5yZW1vdmVMaXN0
        ZW5lcihvYmosIGJlZm9yZUV2ZW50KF9wYXRoKSwgdGFyZ2V0LCBtZXRob2Qp
        OwoKICByZXR1cm4gdGhpczsKfTsKCn0pKCk7CgoKCihmdW5jdGlvbigpIHsK
        ZGVmaW5lKCJiYWNrYnVybmVyL3F1ZXVlIiwKICBbImV4cG9ydHMiXSwKICBm
        dW5jdGlvbihfX2V4cG9ydHNfXykgewogICAgInVzZSBzdHJpY3QiOwogICAg
        ZnVuY3Rpb24gUXVldWUoZGFxLCBuYW1lLCBvcHRpb25zKSB7CiAgICAgIHRo
        aXMuZGFxID0gZGFxOwogICAgICB0aGlzLm5hbWUgPSBuYW1lOwogICAgICB0
        aGlzLm9wdGlvbnMgPSBvcHRpb25zOwogICAgICB0aGlzLl9xdWV1ZSA9IFtd
        OwogICAgfQoKICAgIFF1ZXVlLnByb3RvdHlwZSA9IHsKICAgICAgZGFxOiBu
        dWxsLAogICAgICBuYW1lOiBudWxsLAogICAgICBvcHRpb25zOiBudWxsLAog
        ICAgICBfcXVldWU6IG51bGwsCgogICAgICBwdXNoOiBmdW5jdGlvbih0YXJn
        ZXQsIG1ldGhvZCwgYXJncywgc3RhY2spIHsKICAgICAgICB2YXIgcXVldWUg
        PSB0aGlzLl9xdWV1ZTsKICAgICAgICBxdWV1ZS5wdXNoKHRhcmdldCwgbWV0
        aG9kLCBhcmdzLCBzdGFjayk7CiAgICAgICAgcmV0dXJuIHtxdWV1ZTogdGhp
        cywgdGFyZ2V0OiB0YXJnZXQsIG1ldGhvZDogbWV0aG9kfTsKICAgICAgfSwK
        CiAgICAgIHB1c2hVbmlxdWU6IGZ1bmN0aW9uKHRhcmdldCwgbWV0aG9kLCBh
        cmdzLCBzdGFjaykgewogICAgICAgIHZhciBxdWV1ZSA9IHRoaXMuX3F1ZXVl
        LCBjdXJyZW50VGFyZ2V0LCBjdXJyZW50TWV0aG9kLCBpLCBsOwoKICAgICAg
        ICBmb3IgKGkgPSAwLCBsID0gcXVldWUubGVuZ3RoOyBpIDwgbDsgaSArPSA0
        KSB7CiAgICAgICAgICBjdXJyZW50VGFyZ2V0ID0gcXVldWVbaV07CiAgICAg
        ICAgICBjdXJyZW50TWV0aG9kID0gcXVldWVbaSsxXTsKCiAgICAgICAgICBp
        ZiAoY3VycmVudFRhcmdldCA9PT0gdGFyZ2V0ICYmIGN1cnJlbnRNZXRob2Qg
        PT09IG1ldGhvZCkgewogICAgICAgICAgICBxdWV1ZVtpKzJdID0gYXJnczsg
        Ly8gcmVwbGFjZSBhcmdzCiAgICAgICAgICAgIHF1ZXVlW2krM10gPSBzdGFj
        azsgLy8gcmVwbGFjZSBzdGFjawogICAgICAgICAgICByZXR1cm4ge3F1ZXVl
        OiB0aGlzLCB0YXJnZXQ6IHRhcmdldCwgbWV0aG9kOiBtZXRob2R9OyAvLyBU
        T0RPOiB0ZXN0IHRoaXMgY29kZSBwYXRoCiAgICAgICAgICB9CiAgICAgICAg
        fQoKICAgICAgICB0aGlzLl9xdWV1ZS5wdXNoKHRhcmdldCwgbWV0aG9kLCBh
        cmdzLCBzdGFjayk7CiAgICAgICAgcmV0dXJuIHtxdWV1ZTogdGhpcywgdGFy
        Z2V0OiB0YXJnZXQsIG1ldGhvZDogbWV0aG9kfTsKICAgICAgfSwKCiAgICAg
        IC8vIFRPRE86IHJlbW92ZSBtZSwgb25seSBiZWluZyB1c2VkIGZvciBFbWJl
        ci5ydW4uc3luYwogICAgICBmbHVzaDogZnVuY3Rpb24oKSB7CiAgICAgICAg
        dmFyIHF1ZXVlID0gdGhpcy5fcXVldWUsCiAgICAgICAgICAgIG9wdGlvbnMg
        PSB0aGlzLm9wdGlvbnMsCiAgICAgICAgICAgIGJlZm9yZSA9IG9wdGlvbnMg
        JiYgb3B0aW9ucy5iZWZvcmUsCiAgICAgICAgICAgIGFmdGVyID0gb3B0aW9u
        cyAmJiBvcHRpb25zLmFmdGVyLAogICAgICAgICAgICB0YXJnZXQsIG1ldGhv
        ZCwgYXJncywgc3RhY2ssIGksIGwgPSBxdWV1ZS5sZW5ndGg7CgogICAgICAg
        IGlmIChsICYmIGJlZm9yZSkgeyBiZWZvcmUoKTsgfQogICAgICAgIGZvciAo
        aSA9IDA7IGkgPCBsOyBpICs9IDQpIHsKICAgICAgICAgIHRhcmdldCA9IHF1
        ZXVlW2ldOwogICAgICAgICAgbWV0aG9kID0gcXVldWVbaSsxXTsKICAgICAg
        ICAgIGFyZ3MgICA9IHF1ZXVlW2krMl07CiAgICAgICAgICBzdGFjayAgPSBx
        dWV1ZVtpKzNdOyAvLyBEZWJ1Z2dpbmcgYXNzaXN0YW5jZQoKICAgICAgICAg
        IC8vIFRPRE86IGVycm9yIGhhbmRsaW5nCiAgICAgICAgICBpZiAoYXJncyAm
        JiBhcmdzLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgbWV0aG9kLmFwcGx5
        KHRhcmdldCwgYXJncyk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAg
        ICBtZXRob2QuY2FsbCh0YXJnZXQpOwogICAgICAgICAgfQogICAgICAgIH0K
        ICAgICAgICBpZiAobCAmJiBhZnRlcikgeyBhZnRlcigpOyB9CgogICAgICAg
        IC8vIGNoZWNrIGlmIG5ldyBpdGVtcyBoYXZlIGJlZW4gYWRkZWQKICAgICAg
        ICBpZiAocXVldWUubGVuZ3RoID4gbCkgewogICAgICAgICAgdGhpcy5fcXVl
        dWUgPSBxdWV1ZS5zbGljZShsKTsKICAgICAgICAgIHRoaXMuZmx1c2goKTsK
        ICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5fcXVldWUubGVuZ3Ro
        ID0gMDsKICAgICAgICB9CiAgICAgIH0sCgogICAgICBjYW5jZWw6IGZ1bmN0
        aW9uKGFjdGlvblRvQ2FuY2VsKSB7CiAgICAgICAgdmFyIHF1ZXVlID0gdGhp
        cy5fcXVldWUsIGN1cnJlbnRUYXJnZXQsIGN1cnJlbnRNZXRob2QsIGksIGw7
        CgogICAgICAgIGZvciAoaSA9IDAsIGwgPSBxdWV1ZS5sZW5ndGg7IGkgPCBs
        OyBpICs9IDQpIHsKICAgICAgICAgIGN1cnJlbnRUYXJnZXQgPSBxdWV1ZVtp
        XTsKICAgICAgICAgIGN1cnJlbnRNZXRob2QgPSBxdWV1ZVtpKzFdOwoKICAg
        ICAgICAgIGlmIChjdXJyZW50VGFyZ2V0ID09PSBhY3Rpb25Ub0NhbmNlbC50
        YXJnZXQgJiYgY3VycmVudE1ldGhvZCA9PT0gYWN0aW9uVG9DYW5jZWwubWV0
        aG9kKSB7CiAgICAgICAgICAgIHF1ZXVlLnNwbGljZShpLCA0KTsKICAgICAg
        ICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAg
        ICAgICAvLyBpZiBub3QgZm91bmQgaW4gY3VycmVudCBxdWV1ZQogICAgICAg
        IC8vIGNvdWxkIGJlIGluIHRoZSBxdWV1ZSB0aGF0IGlzIGJlaW5nIGZsdXNo
        ZWQKICAgICAgICBxdWV1ZSA9IHRoaXMuX3F1ZXVlQmVpbmdGbHVzaGVkOwog
        ICAgICAgIGlmICghcXVldWUpIHsKICAgICAgICAgIHJldHVybjsKICAgICAg
        ICB9CiAgICAgICAgZm9yIChpID0gMCwgbCA9IHF1ZXVlLmxlbmd0aDsgaSA8
        IGw7IGkgKz0gNCkgewogICAgICAgICAgY3VycmVudFRhcmdldCA9IHF1ZXVl
        W2ldOwogICAgICAgICAgY3VycmVudE1ldGhvZCA9IHF1ZXVlW2krMV07Cgog
        ICAgICAgICAgaWYgKGN1cnJlbnRUYXJnZXQgPT09IGFjdGlvblRvQ2FuY2Vs
        LnRhcmdldCAmJiBjdXJyZW50TWV0aG9kID09PSBhY3Rpb25Ub0NhbmNlbC5t
        ZXRob2QpIHsKICAgICAgICAgICAgLy8gZG9uJ3QgbWVzcyB3aXRoIGFycmF5
        IGR1cmluZyBmbHVzaAogICAgICAgICAgICAvLyBqdXN0IG51bGxpZnkgdGhl
        IG1ldGhvZAogICAgICAgICAgICBxdWV1ZVtpKzFdID0gbnVsbDsKICAgICAg
        ICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICB9CiAgICAgICAgfQogICAg
        ICB9CiAgICB9OwoKCiAgICBfX2V4cG9ydHNfXy5RdWV1ZSA9IFF1ZXVlOwog
        IH0pOwoKZGVmaW5lKCJiYWNrYnVybmVyL2RlZmVycmVkX2FjdGlvbl9xdWV1
        ZXMiLAogIFsiYmFja2J1cm5lci9xdWV1ZSIsImV4cG9ydHMiXSwKICBmdW5j
        dGlvbihfX2RlcGVuZGVuY3kxX18sIF9fZXhwb3J0c19fKSB7CiAgICAidXNl
        IHN0cmljdCI7CiAgICB2YXIgUXVldWUgPSBfX2RlcGVuZGVuY3kxX18uUXVl
        dWU7CgogICAgZnVuY3Rpb24gRGVmZXJyZWRBY3Rpb25RdWV1ZXMocXVldWVO
        YW1lcywgb3B0aW9ucykgewogICAgICB2YXIgcXVldWVzID0gdGhpcy5xdWV1
        ZXMgPSB7fTsKICAgICAgdGhpcy5xdWV1ZU5hbWVzID0gcXVldWVOYW1lcyA9
        IHF1ZXVlTmFtZXMgfHwgW107CgogICAgICB2YXIgcXVldWVOYW1lOwogICAg
        ICBmb3IgKHZhciBpID0gMCwgbCA9IHF1ZXVlTmFtZXMubGVuZ3RoOyBpIDwg
        bDsgaSsrKSB7CiAgICAgICAgcXVldWVOYW1lID0gcXVldWVOYW1lc1tpXTsK
        ICAgICAgICBxdWV1ZXNbcXVldWVOYW1lXSA9IG5ldyBRdWV1ZSh0aGlzLCBx
        dWV1ZU5hbWUsIG9wdGlvbnNbcXVldWVOYW1lXSk7CiAgICAgIH0KICAgIH0K
        CiAgICBEZWZlcnJlZEFjdGlvblF1ZXVlcy5wcm90b3R5cGUgPSB7CiAgICAg
        IHF1ZXVlTmFtZXM6IG51bGwsCiAgICAgIHF1ZXVlczogbnVsbCwKCiAgICAg
        IHNjaGVkdWxlOiBmdW5jdGlvbihxdWV1ZU5hbWUsIHRhcmdldCwgbWV0aG9k
        LCBhcmdzLCBvbmNlRmxhZywgc3RhY2spIHsKICAgICAgICB2YXIgcXVldWVz
        ID0gdGhpcy5xdWV1ZXMsCiAgICAgICAgICAgIHF1ZXVlID0gcXVldWVzW3F1
        ZXVlTmFtZV07CgogICAgICAgIGlmICghcXVldWUpIHsgdGhyb3cgbmV3IEVy
        cm9yKCJZb3UgYXR0ZW1wdGVkIHRvIHNjaGVkdWxlIGFuIGFjdGlvbiBpbiBh
        IHF1ZXVlICgiICsgcXVldWVOYW1lICsgIikgdGhhdCBkb2Vzbid0IGV4aXN0
        Iik7IH0KCiAgICAgICAgaWYgKG9uY2VGbGFnKSB7CiAgICAgICAgICByZXR1
        cm4gcXVldWUucHVzaFVuaXF1ZSh0YXJnZXQsIG1ldGhvZCwgYXJncywgc3Rh
        Y2spOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXR1cm4gcXVldWUu
        cHVzaCh0YXJnZXQsIG1ldGhvZCwgYXJncywgc3RhY2spOwogICAgICAgIH0K
        ICAgICAgfSwKCiAgICAgIGZsdXNoOiBmdW5jdGlvbigpIHsKICAgICAgICB2
        YXIgcXVldWVzID0gdGhpcy5xdWV1ZXMsCiAgICAgICAgICAgIHF1ZXVlTmFt
        ZXMgPSB0aGlzLnF1ZXVlTmFtZXMsCiAgICAgICAgICAgIHF1ZXVlTmFtZSwg
        cXVldWUsIHF1ZXVlSXRlbXMsIHByaW9yUXVldWVOYW1lSW5kZXgsCiAgICAg
        ICAgICAgIHF1ZXVlTmFtZUluZGV4ID0gMCwgbnVtYmVyT2ZRdWV1ZXMgPSBx
        dWV1ZU5hbWVzLmxlbmd0aDsKCiAgICAgICAgb3V0ZXJsb29wOgogICAgICAg
        IHdoaWxlIChxdWV1ZU5hbWVJbmRleCA8IG51bWJlck9mUXVldWVzKSB7CiAg
        ICAgICAgICBxdWV1ZU5hbWUgPSBxdWV1ZU5hbWVzW3F1ZXVlTmFtZUluZGV4
        XTsKICAgICAgICAgIHF1ZXVlID0gcXVldWVzW3F1ZXVlTmFtZV07CiAgICAg
        ICAgICBxdWV1ZUl0ZW1zID0gcXVldWUuX3F1ZXVlQmVpbmdGbHVzaGVkID0g
        cXVldWUuX3F1ZXVlLnNsaWNlKCk7CiAgICAgICAgICBxdWV1ZS5fcXVldWUg
        PSBbXTsKCiAgICAgICAgICB2YXIgb3B0aW9ucyA9IHF1ZXVlLm9wdGlvbnMs
        CiAgICAgICAgICAgICAgYmVmb3JlID0gb3B0aW9ucyAmJiBvcHRpb25zLmJl
        Zm9yZSwKICAgICAgICAgICAgICBhZnRlciA9IG9wdGlvbnMgJiYgb3B0aW9u
        cy5hZnRlciwKICAgICAgICAgICAgICB0YXJnZXQsIG1ldGhvZCwgYXJncywg
        c3RhY2ssCiAgICAgICAgICAgICAgcXVldWVJbmRleCA9IDAsIG51bWJlck9m
        UXVldWVJdGVtcyA9IHF1ZXVlSXRlbXMubGVuZ3RoOwoKICAgICAgICAgIGlm
        IChudW1iZXJPZlF1ZXVlSXRlbXMgJiYgYmVmb3JlKSB7IGJlZm9yZSgpOyB9
        CiAgICAgICAgICB3aGlsZSAocXVldWVJbmRleCA8IG51bWJlck9mUXVldWVJ
        dGVtcykgewogICAgICAgICAgICB0YXJnZXQgPSBxdWV1ZUl0ZW1zW3F1ZXVl
        SW5kZXhdOwogICAgICAgICAgICBtZXRob2QgPSBxdWV1ZUl0ZW1zW3F1ZXVl
        SW5kZXgrMV07CiAgICAgICAgICAgIGFyZ3MgICA9IHF1ZXVlSXRlbXNbcXVl
        dWVJbmRleCsyXTsKICAgICAgICAgICAgc3RhY2sgID0gcXVldWVJdGVtc1tx
        dWV1ZUluZGV4KzNdOyAvLyBEZWJ1Z2dpbmcgYXNzaXN0YW5jZQoKICAgICAg
        ICAgICAgaWYgKHR5cGVvZiBtZXRob2QgPT09ICdzdHJpbmcnKSB7IG1ldGhv
        ZCA9IHRhcmdldFttZXRob2RdOyB9CgogICAgICAgICAgICAvLyBtZXRob2Qg
        Y291bGQgaGF2ZSBiZWVuIG51bGxpZmllZCAvIGNhbmNlbGVkIGR1cmluZyBm
        bHVzaAogICAgICAgICAgICBpZiAobWV0aG9kKSB7CiAgICAgICAgICAgICAg
        Ly8gVE9ETzogZXJyb3IgaGFuZGxpbmcKICAgICAgICAgICAgICBpZiAoYXJn
        cyAmJiBhcmdzLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgIG1ldGhv
        ZC5hcHBseSh0YXJnZXQsIGFyZ3MpOwogICAgICAgICAgICAgIH0gZWxzZSB7
        CiAgICAgICAgICAgICAgICBtZXRob2QuY2FsbCh0YXJnZXQpOwogICAgICAg
        ICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgcXVldWVJbmRl
        eCArPSA0OwogICAgICAgICAgfQogICAgICAgICAgcXVldWUuX3F1ZXVlQmVp
        bmdGbHVzaGVkID0gbnVsbDsKICAgICAgICAgIGlmIChudW1iZXJPZlF1ZXVl
        SXRlbXMgJiYgYWZ0ZXIpIHsgYWZ0ZXIoKTsgfQoKICAgICAgICAgIGlmICgo
        cHJpb3JRdWV1ZU5hbWVJbmRleCA9IGluZGV4T2ZQcmlvclF1ZXVlV2l0aEFj
        dGlvbnModGhpcywgcXVldWVOYW1lSW5kZXgpKSAhPT0gLTEpIHsKICAgICAg
        ICAgICAgcXVldWVOYW1lSW5kZXggPSBwcmlvclF1ZXVlTmFtZUluZGV4Owog
        ICAgICAgICAgICBjb250aW51ZSBvdXRlcmxvb3A7CiAgICAgICAgICB9Cgog
        ICAgICAgICAgcXVldWVOYW1lSW5kZXgrKzsKICAgICAgICB9CiAgICAgIH0K
        ICAgIH07CgogICAgZnVuY3Rpb24gaW5kZXhPZlByaW9yUXVldWVXaXRoQWN0
        aW9ucyhkYXEsIGN1cnJlbnRRdWV1ZUluZGV4KSB7CiAgICAgIHZhciBxdWV1
        ZU5hbWUsIHF1ZXVlOwoKICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBjdXJy
        ZW50UXVldWVJbmRleDsgaSA8PSBsOyBpKyspIHsKICAgICAgICBxdWV1ZU5h
        bWUgPSBkYXEucXVldWVOYW1lc1tpXTsKICAgICAgICBxdWV1ZSA9IGRhcS5x
        dWV1ZXNbcXVldWVOYW1lXTsKICAgICAgICBpZiAocXVldWUuX3F1ZXVlLmxl
        bmd0aCkgeyByZXR1cm4gaTsgfQogICAgICB9CgogICAgICByZXR1cm4gLTE7
        CiAgICB9CgoKICAgIF9fZXhwb3J0c19fLkRlZmVycmVkQWN0aW9uUXVldWVz
        ID0gRGVmZXJyZWRBY3Rpb25RdWV1ZXM7CiAgfSk7CgpkZWZpbmUoImJhY2ti
        dXJuZXIiLAogIFsiYmFja2J1cm5lci9kZWZlcnJlZF9hY3Rpb25fcXVldWVz
        IiwiZXhwb3J0cyJdLAogIGZ1bmN0aW9uKF9fZGVwZW5kZW5jeTFfXywgX19l
        eHBvcnRzX18pIHsKICAgICJ1c2Ugc3RyaWN0IjsKICAgIHZhciBEZWZlcnJl
        ZEFjdGlvblF1ZXVlcyA9IF9fZGVwZW5kZW5jeTFfXy5EZWZlcnJlZEFjdGlv
        blF1ZXVlczsKCiAgICB2YXIgc2xpY2UgPSBbXS5zbGljZSwKICAgICAgICBw
        b3AgPSBbXS5wb3AsCiAgICAgICAgdGhyb3R0bGVycyA9IFtdLAogICAgICAg
        IGRlYm91bmNlZXMgPSBbXSwKICAgICAgICB0aW1lcnMgPSBbXSwKICAgICAg
        ICBhdXRvcnVuLCBsYXRlclRpbWVyLCBsYXRlclRpbWVyRXhwaXJlc0F0LAog
        ICAgICAgIGdsb2JhbCA9IHRoaXMsCiAgICAgICAgTlVNQkVSID0gL1xkKy87
        CgogICAgZnVuY3Rpb24gaXNDb2VyY2FibGVOdW1iZXIobnVtYmVyKSB7CiAg
        ICAgIHJldHVybiB0eXBlb2YgbnVtYmVyID09PSAnbnVtYmVyJyB8fCBOVU1C
        RVIudGVzdChudW1iZXIpOwogICAgfQoKICAgIGZ1bmN0aW9uIEJhY2tidXJu
        ZXIocXVldWVOYW1lcywgb3B0aW9ucykgewogICAgICB0aGlzLnF1ZXVlTmFt
        ZXMgPSBxdWV1ZU5hbWVzOwogICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25z
        IHx8IHt9OwogICAgICBpZiAoIXRoaXMub3B0aW9ucy5kZWZhdWx0UXVldWUp
        IHsKICAgICAgICB0aGlzLm9wdGlvbnMuZGVmYXVsdFF1ZXVlID0gcXVldWVO
        YW1lc1swXTsKICAgICAgfQogICAgICB0aGlzLmluc3RhbmNlU3RhY2sgPSBb
        XTsKICAgIH0KCiAgICBCYWNrYnVybmVyLnByb3RvdHlwZSA9IHsKICAgICAg
        cXVldWVOYW1lczogbnVsbCwKICAgICAgb3B0aW9uczogbnVsbCwKICAgICAg
        Y3VycmVudEluc3RhbmNlOiBudWxsLAogICAgICBpbnN0YW5jZVN0YWNrOiBu
        dWxsLAoKICAgICAgYmVnaW46IGZ1bmN0aW9uKCkgewogICAgICAgIHZhciBv
        bkJlZ2luID0gdGhpcy5vcHRpb25zICYmIHRoaXMub3B0aW9ucy5vbkJlZ2lu
        LAogICAgICAgICAgICBwcmV2aW91c0luc3RhbmNlID0gdGhpcy5jdXJyZW50
        SW5zdGFuY2U7CgogICAgICAgIGlmIChwcmV2aW91c0luc3RhbmNlKSB7CiAg
        ICAgICAgICB0aGlzLmluc3RhbmNlU3RhY2sucHVzaChwcmV2aW91c0luc3Rh
        bmNlKTsKICAgICAgICB9CgogICAgICAgIHRoaXMuY3VycmVudEluc3RhbmNl
        ID0gbmV3IERlZmVycmVkQWN0aW9uUXVldWVzKHRoaXMucXVldWVOYW1lcywg
        dGhpcy5vcHRpb25zKTsKICAgICAgICBpZiAob25CZWdpbikgewogICAgICAg
        ICAgb25CZWdpbih0aGlzLmN1cnJlbnRJbnN0YW5jZSwgcHJldmlvdXNJbnN0
        YW5jZSk7CiAgICAgICAgfQogICAgICB9LAoKICAgICAgZW5kOiBmdW5jdGlv
        bigpIHsKICAgICAgICB2YXIgb25FbmQgPSB0aGlzLm9wdGlvbnMgJiYgdGhp
        cy5vcHRpb25zLm9uRW5kLAogICAgICAgICAgICBjdXJyZW50SW5zdGFuY2Ug
        PSB0aGlzLmN1cnJlbnRJbnN0YW5jZSwKICAgICAgICAgICAgbmV4dEluc3Rh
        bmNlID0gbnVsbDsKCiAgICAgICAgdHJ5IHsKICAgICAgICAgIGN1cnJlbnRJ
        bnN0YW5jZS5mbHVzaCgpOwogICAgICAgIH0gZmluYWxseSB7CiAgICAgICAg
        ICB0aGlzLmN1cnJlbnRJbnN0YW5jZSA9IG51bGw7CgogICAgICAgICAgaWYg
        KHRoaXMuaW5zdGFuY2VTdGFjay5sZW5ndGgpIHsKICAgICAgICAgICAgbmV4
        dEluc3RhbmNlID0gdGhpcy5pbnN0YW5jZVN0YWNrLnBvcCgpOwogICAgICAg
        ICAgICB0aGlzLmN1cnJlbnRJbnN0YW5jZSA9IG5leHRJbnN0YW5jZTsKICAg
        ICAgICAgIH0KCiAgICAgICAgICBpZiAob25FbmQpIHsKICAgICAgICAgICAg
        b25FbmQoY3VycmVudEluc3RhbmNlLCBuZXh0SW5zdGFuY2UpOwogICAgICAg
        ICAgfQogICAgICAgIH0KICAgICAgfSwKCiAgICAgIHJ1bjogZnVuY3Rpb24o
        dGFyZ2V0LCBtZXRob2QgLyosIGFyZ3MgKi8pIHsKICAgICAgICB2YXIgcmV0
        OwogICAgICAgIHRoaXMuYmVnaW4oKTsKCiAgICAgICAgaWYgKCFtZXRob2Qp
        IHsKICAgICAgICAgIG1ldGhvZCA9IHRhcmdldDsKICAgICAgICAgIHRhcmdl
        dCA9IG51bGw7CiAgICAgICAgfQoKICAgICAgICBpZiAodHlwZW9mIG1ldGhv
        ZCA9PT0gJ3N0cmluZycpIHsKICAgICAgICAgIG1ldGhvZCA9IHRhcmdldFtt
        ZXRob2RdOwogICAgICAgIH0KCiAgICAgICAgLy8gUHJldmVudCBTYWZhcmkg
        ZG91YmxlLWZpbmFsbHkuCiAgICAgICAgdmFyIGZpbmFsbHlBbHJlYWR5Q2Fs
        bGVkID0gZmFsc2U7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIGlmIChhcmd1
        bWVudHMubGVuZ3RoID4gMikgewogICAgICAgICAgICByZXQgPSBtZXRob2Qu
        YXBwbHkodGFyZ2V0LCBzbGljZS5jYWxsKGFyZ3VtZW50cywgMikpOwogICAg
        ICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmV0ID0gbWV0aG9kLmNhbGwo
        dGFyZ2V0KTsKICAgICAgICAgIH0KICAgICAgICB9IGZpbmFsbHkgewogICAg
        ICAgICAgaWYgKCFmaW5hbGx5QWxyZWFkeUNhbGxlZCkgewogICAgICAgICAg
        ICBmaW5hbGx5QWxyZWFkeUNhbGxlZCA9IHRydWU7CiAgICAgICAgICAgIHRo
        aXMuZW5kKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHJldHVy
        biByZXQ7CiAgICAgIH0sCgogICAgICBkZWZlcjogZnVuY3Rpb24ocXVldWVO
        YW1lLCB0YXJnZXQsIG1ldGhvZCAvKiAsIGFyZ3MgKi8pIHsKICAgICAgICBp
        ZiAoIW1ldGhvZCkgewogICAgICAgICAgbWV0aG9kID0gdGFyZ2V0OwogICAg
        ICAgICAgdGFyZ2V0ID0gbnVsbDsKICAgICAgICB9CgogICAgICAgIGlmICh0
        eXBlb2YgbWV0aG9kID09PSAnc3RyaW5nJykgewogICAgICAgICAgbWV0aG9k
        ID0gdGFyZ2V0W21ldGhvZF07CiAgICAgICAgfQoKICAgICAgICB2YXIgc3Rh
        Y2sgPSB0aGlzLkRFQlVHID8gbmV3IEVycm9yKCkgOiB1bmRlZmluZWQsCiAg
        ICAgICAgICAgIGFyZ3MgPSBhcmd1bWVudHMubGVuZ3RoID4gMyA/IHNsaWNl
        LmNhbGwoYXJndW1lbnRzLCAzKSA6IHVuZGVmaW5lZDsKICAgICAgICBpZiAo
        IXRoaXMuY3VycmVudEluc3RhbmNlKSB7IGNyZWF0ZUF1dG9ydW4odGhpcyk7
        IH0KICAgICAgICByZXR1cm4gdGhpcy5jdXJyZW50SW5zdGFuY2Uuc2NoZWR1
        bGUocXVldWVOYW1lLCB0YXJnZXQsIG1ldGhvZCwgYXJncywgZmFsc2UsIHN0
        YWNrKTsKICAgICAgfSwKCiAgICAgIGRlZmVyT25jZTogZnVuY3Rpb24ocXVl
        dWVOYW1lLCB0YXJnZXQsIG1ldGhvZCAvKiAsIGFyZ3MgKi8pIHsKICAgICAg
        ICBpZiAoIW1ldGhvZCkgewogICAgICAgICAgbWV0aG9kID0gdGFyZ2V0Owog
        ICAgICAgICAgdGFyZ2V0ID0gbnVsbDsKICAgICAgICB9CgogICAgICAgIGlm
        ICh0eXBlb2YgbWV0aG9kID09PSAnc3RyaW5nJykgewogICAgICAgICAgbWV0
        aG9kID0gdGFyZ2V0W21ldGhvZF07CiAgICAgICAgfQoKICAgICAgICB2YXIg
        c3RhY2sgPSB0aGlzLkRFQlVHID8gbmV3IEVycm9yKCkgOiB1bmRlZmluZWQs
        CiAgICAgICAgICAgIGFyZ3MgPSBhcmd1bWVudHMubGVuZ3RoID4gMyA/IHNs
        aWNlLmNhbGwoYXJndW1lbnRzLCAzKSA6IHVuZGVmaW5lZDsKICAgICAgICBp
        ZiAoIXRoaXMuY3VycmVudEluc3RhbmNlKSB7IGNyZWF0ZUF1dG9ydW4odGhp
        cyk7IH0KICAgICAgICByZXR1cm4gdGhpcy5jdXJyZW50SW5zdGFuY2Uuc2No
        ZWR1bGUocXVldWVOYW1lLCB0YXJnZXQsIG1ldGhvZCwgYXJncywgdHJ1ZSwg
        c3RhY2spOwogICAgICB9LAoKICAgICAgc2V0VGltZW91dDogZnVuY3Rpb24o
        KSB7CiAgICAgICAgdmFyIGFyZ3MgPSBzbGljZS5jYWxsKGFyZ3VtZW50cyk7
        CiAgICAgICAgdmFyIGxlbmd0aCA9IGFyZ3MubGVuZ3RoOwogICAgICAgIHZh
        ciBtZXRob2QsIHdhaXQsIHRhcmdldDsKICAgICAgICB2YXIgc2VsZiA9IHRo
        aXM7CiAgICAgICAgdmFyIG1ldGhvZE9yVGFyZ2V0LCBtZXRob2RPcldhaXQs
        IG1ldGhvZE9yQXJnczsKCiAgICAgICAgaWYgKGxlbmd0aCA9PT0gMCkgewog
        ICAgICAgICAgcmV0dXJuOwogICAgICAgIH0gZWxzZSBpZiAobGVuZ3RoID09
        PSAxKSB7CiAgICAgICAgICBtZXRob2QgPSBhcmdzLnNoaWZ0KCk7CiAgICAg
        ICAgICB3YWl0ID0gMDsKICAgICAgICB9IGVsc2UgaWYgKGxlbmd0aCA9PT0g
        MikgewogICAgICAgICAgbWV0aG9kT3JUYXJnZXQgPSBhcmdzWzBdOwogICAg
        ICAgICAgbWV0aG9kT3JXYWl0ID0gYXJnc1sxXTsKCiAgICAgICAgICBpZiAo
        dHlwZW9mIG1ldGhvZE9yV2FpdCA9PT0gJ2Z1bmN0aW9uJyB8fCB0eXBlb2Yg
        IG1ldGhvZE9yVGFyZ2V0W21ldGhvZE9yV2FpdF0gPT09ICdmdW5jdGlvbicp
        IHsKICAgICAgICAgICAgdGFyZ2V0ID0gYXJncy5zaGlmdCgpOwogICAgICAg
        ICAgICBtZXRob2QgPSBhcmdzLnNoaWZ0KCk7CiAgICAgICAgICAgIHdhaXQg
        PSAwOwogICAgICAgICAgfSBlbHNlIGlmIChpc0NvZXJjYWJsZU51bWJlciht
        ZXRob2RPcldhaXQpKSB7CiAgICAgICAgICAgIG1ldGhvZCA9IGFyZ3Muc2hp
        ZnQoKTsKICAgICAgICAgICAgd2FpdCA9IGFyZ3Muc2hpZnQoKTsKICAgICAg
        ICAgIH0gZWxzZSB7CiAgICAgICAgICAgIG1ldGhvZCA9IGFyZ3Muc2hpZnQo
        KTsKICAgICAgICAgICAgd2FpdCA9ICAwOwogICAgICAgICAgfQogICAgICAg
        IH0gZWxzZSB7CiAgICAgICAgICB2YXIgbGFzdCA9IGFyZ3NbYXJncy5sZW5n
        dGggLSAxXTsKCiAgICAgICAgICBpZiAoaXNDb2VyY2FibGVOdW1iZXIobGFz
        dCkpIHsKICAgICAgICAgICAgd2FpdCA9IGFyZ3MucG9wKCk7CiAgICAgICAg
        ICB9CgogICAgICAgICAgbWV0aG9kT3JUYXJnZXQgPSBhcmdzWzBdOwogICAg
        ICAgICAgbWV0aG9kT3JBcmdzID0gYXJnc1sxXTsKCiAgICAgICAgICBpZiAo
        dHlwZW9mIG1ldGhvZE9yQXJncyA9PT0gJ2Z1bmN0aW9uJyB8fCAodHlwZW9m
        IG1ldGhvZE9yQXJncyA9PT0gJ3N0cmluZycgJiYKICAgICAgICAgICAgICAg
        ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2RP
        clRhcmdldCAhPT0gbnVsbCAmJgogICAgICAgICAgICAgICAgICAgICAgICAg
        ICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZE9yQXJncyBpbiBt
        ZXRob2RPclRhcmdldCkpIHsKICAgICAgICAgICAgdGFyZ2V0ID0gYXJncy5z
        aGlmdCgpOwogICAgICAgICAgICBtZXRob2QgPSBhcmdzLnNoaWZ0KCk7CiAg
        ICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBtZXRob2QgPSBhcmdzLnNo
        aWZ0KCk7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICB2YXIgZXhl
        Y3V0ZUF0ID0gKCtuZXcgRGF0ZSgpKSArIHBhcnNlSW50KHdhaXQsIDEwKTsK
        CiAgICAgICAgaWYgKHR5cGVvZiBtZXRob2QgPT09ICdzdHJpbmcnKSB7CiAg
        ICAgICAgICBtZXRob2QgPSB0YXJnZXRbbWV0aG9kXTsKICAgICAgICB9Cgog
        ICAgICAgIGZ1bmN0aW9uIGZuKCkgewogICAgICAgICAgbWV0aG9kLmFwcGx5
        KHRhcmdldCwgYXJncyk7CiAgICAgICAgfQoKICAgICAgICAvLyBmaW5kIHBv
        c2l0aW9uIHRvIGluc2VydCAtIFRPRE86IGJpbmFyeSBzZWFyY2gKICAgICAg
        ICB2YXIgaSwgbDsKICAgICAgICBmb3IgKGkgPSAwLCBsID0gdGltZXJzLmxl
        bmd0aDsgaSA8IGw7IGkgKz0gMikgewogICAgICAgICAgaWYgKGV4ZWN1dGVB
        dCA8IHRpbWVyc1tpXSkgeyBicmVhazsgfQogICAgICAgIH0KCiAgICAgICAg
        dGltZXJzLnNwbGljZShpLCAwLCBleGVjdXRlQXQsIGZuKTsKCiAgICAgICAg
        dXBkYXRlTGF0ZXJUaW1lcihzZWxmLCBleGVjdXRlQXQsIHdhaXQpOwoKICAg
        ICAgICByZXR1cm4gZm47CiAgICAgIH0sCgogICAgICB0aHJvdHRsZTogZnVu
        Y3Rpb24odGFyZ2V0LCBtZXRob2QgLyogLCBhcmdzLCB3YWl0ICovKSB7CiAg
        ICAgICAgdmFyIHNlbGYgPSB0aGlzLAogICAgICAgICAgICBhcmdzID0gYXJn
        dW1lbnRzLAogICAgICAgICAgICB3YWl0ID0gcGFyc2VJbnQocG9wLmNhbGwo
        YXJncyksIDEwKSwKICAgICAgICAgICAgdGhyb3R0bGVyLAogICAgICAgICAg
        ICBpbmRleCwKICAgICAgICAgICAgdGltZXI7CgogICAgICAgIGluZGV4ID0g
        ZmluZFRocm90dGxlcih0YXJnZXQsIG1ldGhvZCk7CiAgICAgICAgaWYgKGlu
        ZGV4ID4gLTEpIHsgcmV0dXJuIHRocm90dGxlcnNbaW5kZXhdOyB9IC8vIHRo
        cm90dGxlZAoKICAgICAgICB0aW1lciA9IGdsb2JhbC5zZXRUaW1lb3V0KGZ1
        bmN0aW9uKCkgewogICAgICAgICAgc2VsZi5ydW4uYXBwbHkoc2VsZiwgYXJn
        cyk7CgogICAgICAgICAgdmFyIGluZGV4ID0gZmluZFRocm90dGxlcih0YXJn
        ZXQsIG1ldGhvZCk7CiAgICAgICAgICBpZiAoaW5kZXggPiAtMSkgeyB0aHJv
        dHRsZXJzLnNwbGljZShpbmRleCwgMSk7IH0KICAgICAgICB9LCB3YWl0KTsK
        CiAgICAgICAgdGhyb3R0bGVyID0gW3RhcmdldCwgbWV0aG9kLCB0aW1lcl07
        CgogICAgICAgIHRocm90dGxlcnMucHVzaCh0aHJvdHRsZXIpOwoKICAgICAg
        ICByZXR1cm4gdGhyb3R0bGVyOwogICAgICB9LAoKICAgICAgZGVib3VuY2U6
        IGZ1bmN0aW9uKHRhcmdldCwgbWV0aG9kIC8qICwgYXJncywgd2FpdCwgW2lt
        bWVkaWF0ZV0gKi8pIHsKICAgICAgICB2YXIgc2VsZiA9IHRoaXMsCiAgICAg
        ICAgICAgIGFyZ3MgPSBhcmd1bWVudHMsCiAgICAgICAgICAgIGltbWVkaWF0
        ZSA9IHBvcC5jYWxsKGFyZ3MpLAogICAgICAgICAgICB3YWl0LAogICAgICAg
        ICAgICBpbmRleCwKICAgICAgICAgICAgZGVib3VuY2VlLAogICAgICAgICAg
        ICB0aW1lcjsKCiAgICAgICAgaWYgKHR5cGVvZiBpbW1lZGlhdGUgPT09ICJu
        dW1iZXIiIHx8IHR5cGVvZiBpbW1lZGlhdGUgPT09ICJzdHJpbmciKSB7CiAg
        ICAgICAgICB3YWl0ID0gaW1tZWRpYXRlOwogICAgICAgICAgaW1tZWRpYXRl
        ID0gZmFsc2U7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHdhaXQgPSBw
        b3AuY2FsbChhcmdzKTsKICAgICAgICB9CgogICAgICAgIHdhaXQgPSBwYXJz
        ZUludCh3YWl0LCAxMCk7CiAgICAgICAgLy8gUmVtb3ZlIGRlYm91bmNlZQog
        ICAgICAgIGluZGV4ID0gZmluZERlYm91bmNlZSh0YXJnZXQsIG1ldGhvZCk7
        CgogICAgICAgIGlmIChpbmRleCA+IC0xKSB7CiAgICAgICAgICBkZWJvdW5j
        ZWUgPSBkZWJvdW5jZWVzW2luZGV4XTsKICAgICAgICAgIGRlYm91bmNlZXMu
        c3BsaWNlKGluZGV4LCAxKTsKICAgICAgICAgIGNsZWFyVGltZW91dChkZWJv
        dW5jZWVbMl0pOwogICAgICAgIH0KCiAgICAgICAgdGltZXIgPSBnbG9iYWwu
        c2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgICAgIGlmICghaW1tZWRp
        YXRlKSB7CiAgICAgICAgICAgIHNlbGYucnVuLmFwcGx5KHNlbGYsIGFyZ3Mp
        OwogICAgICAgICAgfQogICAgICAgICAgdmFyIGluZGV4ID0gZmluZERlYm91
        bmNlZSh0YXJnZXQsIG1ldGhvZCk7CiAgICAgICAgICBpZiAoaW5kZXggPiAt
        MSkgewogICAgICAgICAgICBkZWJvdW5jZWVzLnNwbGljZShpbmRleCwgMSk7
        CiAgICAgICAgICB9CiAgICAgICAgfSwgd2FpdCk7CgogICAgICAgIGlmIChp
        bW1lZGlhdGUgJiYgaW5kZXggPT09IC0xKSB7CiAgICAgICAgICBzZWxmLnJ1
        bi5hcHBseShzZWxmLCBhcmdzKTsKICAgICAgICB9CgogICAgICAgIGRlYm91
        bmNlZSA9IFt0YXJnZXQsIG1ldGhvZCwgdGltZXJdOwoKICAgICAgICBkZWJv
        dW5jZWVzLnB1c2goZGVib3VuY2VlKTsKCiAgICAgICAgcmV0dXJuIGRlYm91
        bmNlZTsKICAgICAgfSwKCiAgICAgIGNhbmNlbFRpbWVyczogZnVuY3Rpb24o
        KSB7CiAgICAgICAgdmFyIGksIGxlbjsKCiAgICAgICAgZm9yIChpID0gMCwg
        bGVuID0gdGhyb3R0bGVycy5sZW5ndGg7IGkgPCBsZW47IGkrKykgewogICAg
        ICAgICAgY2xlYXJUaW1lb3V0KHRocm90dGxlcnNbaV1bMl0pOwogICAgICAg
        IH0KICAgICAgICB0aHJvdHRsZXJzID0gW107CgogICAgICAgIGZvciAoaSA9
        IDAsIGxlbiA9IGRlYm91bmNlZXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHsK
        ICAgICAgICAgIGNsZWFyVGltZW91dChkZWJvdW5jZWVzW2ldWzJdKTsKICAg
        ICAgICB9CiAgICAgICAgZGVib3VuY2VlcyA9IFtdOwoKICAgICAgICBpZiAo
        bGF0ZXJUaW1lcikgewogICAgICAgICAgY2xlYXJUaW1lb3V0KGxhdGVyVGlt
        ZXIpOwogICAgICAgICAgbGF0ZXJUaW1lciA9IG51bGw7CiAgICAgICAgfQog
        ICAgICAgIHRpbWVycyA9IFtdOwoKICAgICAgICBpZiAoYXV0b3J1bikgewog
        ICAgICAgICAgY2xlYXJUaW1lb3V0KGF1dG9ydW4pOwogICAgICAgICAgYXV0
        b3J1biA9IG51bGw7CiAgICAgICAgfQogICAgICB9LAoKICAgICAgaGFzVGlt
        ZXJzOiBmdW5jdGlvbigpIHsKICAgICAgICByZXR1cm4gISF0aW1lcnMubGVu
        Z3RoIHx8IGF1dG9ydW47CiAgICAgIH0sCgogICAgICBjYW5jZWw6IGZ1bmN0
        aW9uKHRpbWVyKSB7CiAgICAgICAgdmFyIHRpbWVyVHlwZSA9IHR5cGVvZiB0
        aW1lcjsKCiAgICAgICAgaWYgKHRpbWVyICYmIHRpbWVyVHlwZSA9PT0gJ29i
        amVjdCcgJiYgdGltZXIucXVldWUgJiYgdGltZXIubWV0aG9kKSB7IC8vIHdl
        J3JlIGNhbmNlbGxpbmcgYSBkZWZlck9uY2UKICAgICAgICAgIHJldHVybiB0
        aW1lci5xdWV1ZS5jYW5jZWwodGltZXIpOwogICAgICAgIH0gZWxzZSBpZiAo
        dGltZXJUeXBlID09PSAnZnVuY3Rpb24nKSB7IC8vIHdlJ3JlIGNhbmNlbGxp
        bmcgYSBzZXRUaW1lb3V0CiAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbCA9
        IHRpbWVycy5sZW5ndGg7IGkgPCBsOyBpICs9IDIpIHsKICAgICAgICAgICAg
        aWYgKHRpbWVyc1tpICsgMV0gPT09IHRpbWVyKSB7CiAgICAgICAgICAgICAg
        dGltZXJzLnNwbGljZShpLCAyKTsgLy8gcmVtb3ZlIHRoZSB0d28gZWxlbWVu
        dHMKICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgfQog
        ICAgICAgICAgfQogICAgICAgIH0gZWxzZSBpZiAoT2JqZWN0LnByb3RvdHlw
        ZS50b1N0cmluZy5jYWxsKHRpbWVyKSA9PT0gIltvYmplY3QgQXJyYXldIil7
        IC8vIHdlJ3JlIGNhbmNlbGxpbmcgYSB0aHJvdHRsZSBvciBkZWJvdW5jZQog
        ICAgICAgICAgcmV0dXJuIHRoaXMuX2NhbmNlbEl0ZW0oZmluZFRocm90dGxl
        ciwgdGhyb3R0bGVycywgdGltZXIpIHx8IAogICAgICAgICAgICAgICAgICAg
        dGhpcy5fY2FuY2VsSXRlbShmaW5kRGVib3VuY2VlLCBkZWJvdW5jZWVzLCB0
        aW1lcik7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJldHVybjsgLy8g
        dGltZXIgd2FzIG51bGwgb3Igbm90IGEgdGltZXIKICAgICAgICB9CiAgICAg
        IH0sCgogICAgICBfY2FuY2VsSXRlbTogZnVuY3Rpb24oZmluZE1ldGhvZCwg
        YXJyYXksIHRpbWVyKXsKICAgICAgICB2YXIgaXRlbSwKICAgICAgICAgICAg
        aW5kZXg7CgogICAgICAgIGlmICh0aW1lci5sZW5ndGggPCAzKSB7IHJldHVy
        biBmYWxzZTsgfQoKICAgICAgICBpbmRleCA9IGZpbmRNZXRob2QodGltZXJb
        MF0sIHRpbWVyWzFdKTsKCiAgICAgICAgaWYoaW5kZXggPiAtMSkgewoKICAg
        ICAgICAgIGl0ZW0gPSBhcnJheVtpbmRleF07CgogICAgICAgICAgaWYoaXRl
        bVsyXSA9PT0gdGltZXJbMl0pewogICAgICAgICAgICBhcnJheS5zcGxpY2Uo
        aW5kZXgsIDEpOwogICAgICAgICAgICBjbGVhclRpbWVvdXQodGltZXJbMl0p
        OwogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgIH0KICAgICAg
        ICB9CgogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQoKICAgIH07Cgog
        ICAgQmFja2J1cm5lci5wcm90b3R5cGUuc2NoZWR1bGUgPSBCYWNrYnVybmVy
        LnByb3RvdHlwZS5kZWZlcjsKICAgIEJhY2tidXJuZXIucHJvdG90eXBlLnNj
        aGVkdWxlT25jZSA9IEJhY2tidXJuZXIucHJvdG90eXBlLmRlZmVyT25jZTsK
        ICAgIEJhY2tidXJuZXIucHJvdG90eXBlLmxhdGVyID0gQmFja2J1cm5lci5w
        cm90b3R5cGUuc2V0VGltZW91dDsKCiAgICBmdW5jdGlvbiBjcmVhdGVBdXRv
        cnVuKGJhY2tidXJuZXIpIHsKICAgICAgYmFja2J1cm5lci5iZWdpbigpOwog
        ICAgICBhdXRvcnVuID0gZ2xvYmFsLnNldFRpbWVvdXQoZnVuY3Rpb24oKSB7
        CiAgICAgICAgYXV0b3J1biA9IG51bGw7CiAgICAgICAgYmFja2J1cm5lci5l
        bmQoKTsKICAgICAgfSk7CiAgICB9CgogICAgZnVuY3Rpb24gdXBkYXRlTGF0
        ZXJUaW1lcihzZWxmLCBleGVjdXRlQXQsIHdhaXQpIHsKICAgICAgaWYgKCFs
        YXRlclRpbWVyIHx8IGV4ZWN1dGVBdCA8IGxhdGVyVGltZXJFeHBpcmVzQXQp
        IHsKICAgICAgICBpZiAobGF0ZXJUaW1lcikgewogICAgICAgICAgY2xlYXJU
        aW1lb3V0KGxhdGVyVGltZXIpOwogICAgICAgIH0KICAgICAgICBsYXRlclRp
        bWVyID0gZ2xvYmFsLnNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAg
        ICBsYXRlclRpbWVyID0gbnVsbDsKICAgICAgICAgIGxhdGVyVGltZXJFeHBp
        cmVzQXQgPSBudWxsOwogICAgICAgICAgZXhlY3V0ZVRpbWVycyhzZWxmKTsK
        ICAgICAgICB9LCB3YWl0KTsKICAgICAgICBsYXRlclRpbWVyRXhwaXJlc0F0
        ID0gZXhlY3V0ZUF0OwogICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gZXhl
        Y3V0ZVRpbWVycyhzZWxmKSB7CiAgICAgIHZhciBub3cgPSArbmV3IERhdGUo
        KSwKICAgICAgICAgIHRpbWUsIGZucywgaSwgbDsKCiAgICAgIHNlbGYucnVu
        KGZ1bmN0aW9uKCkgewogICAgICAgIC8vIFRPRE86IGJpbmFyeSBzZWFyY2gK
        ICAgICAgICBmb3IgKGkgPSAwLCBsID0gdGltZXJzLmxlbmd0aDsgaSA8IGw7
        IGkgKz0gMikgewogICAgICAgICAgdGltZSA9IHRpbWVyc1tpXTsKICAgICAg
        ICAgIGlmICh0aW1lID4gbm93KSB7IGJyZWFrOyB9CiAgICAgICAgfQoKICAg
        ICAgICBmbnMgPSB0aW1lcnMuc3BsaWNlKDAsIGkpOwoKICAgICAgICBmb3Ig
        KGkgPSAxLCBsID0gZm5zLmxlbmd0aDsgaSA8IGw7IGkgKz0gMikgewogICAg
        ICAgICAgc2VsZi5zY2hlZHVsZShzZWxmLm9wdGlvbnMuZGVmYXVsdFF1ZXVl
        LCBudWxsLCBmbnNbaV0pOwogICAgICAgIH0KICAgICAgfSk7CgogICAgICBp
        ZiAodGltZXJzLmxlbmd0aCkgewogICAgICAgIHVwZGF0ZUxhdGVyVGltZXIo
        c2VsZiwgdGltZXJzWzBdLCB0aW1lcnNbMF0gLSBub3cpOwogICAgICB9CiAg
        ICB9CgogICAgZnVuY3Rpb24gZmluZERlYm91bmNlZSh0YXJnZXQsIG1ldGhv
        ZCkgewogICAgICB2YXIgZGVib3VuY2VlLAogICAgICAgICAgaW5kZXggPSAt
        MTsKCiAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gZGVib3VuY2Vlcy5sZW5n
        dGg7IGkgPCBsOyBpKyspIHsKICAgICAgICBkZWJvdW5jZWUgPSBkZWJvdW5j
        ZWVzW2ldOwogICAgICAgIGlmIChkZWJvdW5jZWVbMF0gPT09IHRhcmdldCAm
        JiBkZWJvdW5jZWVbMV0gPT09IG1ldGhvZCkgewogICAgICAgICAgaW5kZXgg
        PSBpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICB9CgogICAg
        ICByZXR1cm4gaW5kZXg7CiAgICB9CgogICAgZnVuY3Rpb24gZmluZFRocm90
        dGxlcih0YXJnZXQsIG1ldGhvZCkgewogICAgICB2YXIgdGhyb3R0bGVyLAog
        ICAgICAgICAgaW5kZXggPSAtMTsKCiAgICAgIGZvciAodmFyIGkgPSAwLCBs
        ID0gdGhyb3R0bGVycy5sZW5ndGg7IGkgPCBsOyBpKyspIHsKICAgICAgICB0
        aHJvdHRsZXIgPSB0aHJvdHRsZXJzW2ldOwogICAgICAgIGlmICh0aHJvdHRs
        ZXJbMF0gPT09IHRhcmdldCAmJiB0aHJvdHRsZXJbMV0gPT09IG1ldGhvZCkg
        ewogICAgICAgICAgaW5kZXggPSBpOwogICAgICAgICAgYnJlYWs7CiAgICAg
        ICAgfQogICAgICB9CgogICAgICByZXR1cm4gaW5kZXg7CiAgICB9CgoKICAg
        IF9fZXhwb3J0c19fLkJhY2tidXJuZXIgPSBCYWNrYnVybmVyOwogIH0pOwoK
        fSkoKTsKCgoKKGZ1bmN0aW9uKCkgewp2YXIgb25CZWdpbiA9IGZ1bmN0aW9u
        KGN1cnJlbnQpIHsKICBFbWJlci5ydW4uY3VycmVudFJ1bkxvb3AgPSBjdXJy
        ZW50Owp9OwoKdmFyIG9uRW5kID0gZnVuY3Rpb24oY3VycmVudCwgbmV4dCkg
        ewogIEVtYmVyLnJ1bi5jdXJyZW50UnVuTG9vcCA9IG5leHQ7Cn07Cgp2YXIg
        QmFja2J1cm5lciA9IHJlcXVpcmVNb2R1bGUoJ2JhY2tidXJuZXInKS5CYWNr
        YnVybmVyLAogICAgYmFja2J1cm5lciA9IG5ldyBCYWNrYnVybmVyKFsnc3lu
        YycsICdhY3Rpb25zJywgJ2Rlc3Ryb3knXSwgewogICAgICBzeW5jOiB7CiAg
        ICAgICAgYmVmb3JlOiBFbWJlci5iZWdpblByb3BlcnR5Q2hhbmdlcywKICAg
        ICAgICBhZnRlcjogRW1iZXIuZW5kUHJvcGVydHlDaGFuZ2VzCiAgICAgIH0s
        CiAgICAgIGRlZmF1bHRRdWV1ZTogJ2FjdGlvbnMnLAogICAgICBvbkJlZ2lu
        OiBvbkJlZ2luLAogICAgICBvbkVuZDogb25FbmQKICAgIH0pLAogICAgc2xp
        Y2UgPSBbXS5zbGljZSwKICAgIGNvbmNhdCA9IFtdLmNvbmNhdDsKCi8vIC4u
        Li4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4u
        Li4uLi4uLi4uLi4KLy8gRW1iZXIucnVuIC0gdGhpcyBpcyBpZGVhbGx5IHRo
        ZSBvbmx5IHB1YmxpYyBBUEkgdGhlIGRldiBzZWVzCi8vCgovKioKICBSdW5z
        IHRoZSBwYXNzZWQgdGFyZ2V0IGFuZCBtZXRob2QgaW5zaWRlIG9mIGEgUnVu
        TG9vcCwgZW5zdXJpbmcgYW55CiAgZGVmZXJyZWQgYWN0aW9ucyBpbmNsdWRp
        bmcgYmluZGluZ3MgYW5kIHZpZXdzIHVwZGF0ZXMgYXJlIGZsdXNoZWQgYXQg
        dGhlCiAgZW5kLgoKICBOb3JtYWxseSB5b3Ugc2hvdWxkIG5vdCBuZWVkIHRv
        IGludm9rZSB0aGlzIG1ldGhvZCB5b3Vyc2VsZi4gSG93ZXZlciBpZgogIHlv
        dSBhcmUgaW1wbGVtZW50aW5nIHJhdyBldmVudCBoYW5kbGVycyB3aGVuIGlu
        dGVyZmFjaW5nIHdpdGggb3RoZXIKICBsaWJyYXJpZXMgb3IgcGx1Z2lucywg
        eW91IHNob3VsZCBwcm9iYWJseSB3cmFwIGFsbCBvZiB5b3VyIGNvZGUgaW5z
        aWRlIHRoaXMKICBjYWxsLgoKICBgYGBqYXZhc2NyaXB0CiAgRW1iZXIucnVu
        KGZ1bmN0aW9uKCkgewogICAgLy8gY29kZSB0byBiZSBleGVjdXRlIHdpdGhp
        biBhIFJ1bkxvb3AKICB9KTsKICBgYGAKCiAgQGNsYXNzIHJ1bgogIEBuYW1l
        c3BhY2UgRW1iZXIKICBAc3RhdGljCiAgQGNvbnN0cnVjdG9yCiAgQHBhcmFt
        IHtPYmplY3R9IFt0YXJnZXRdIHRhcmdldCBvZiBtZXRob2QgdG8gY2FsbAog
        IEBwYXJhbSB7RnVuY3Rpb258U3RyaW5nfSBtZXRob2QgTWV0aG9kIHRvIGlu
        dm9rZS4KICAgIE1heSBiZSBhIGZ1bmN0aW9uIG9yIGEgc3RyaW5nLiBJZiB5
        b3UgcGFzcyBhIHN0cmluZwogICAgdGhlbiBpdCB3aWxsIGJlIGxvb2tlZCB1
        cCBvbiB0aGUgcGFzc2VkIHRhcmdldC4KICBAcGFyYW0ge09iamVjdH0gW2Fy
        Z3MqXSBBbnkgYWRkaXRpb25hbCBhcmd1bWVudHMgeW91IHdpc2ggdG8gcGFz
        cyB0byB0aGUgbWV0aG9kLgogIEByZXR1cm4ge09iamVjdH0gcmV0dXJuIHZh
        bHVlIGZyb20gaW52b2tpbmcgdGhlIHBhc3NlZCBmdW5jdGlvbi4KKi8KRW1i
        ZXIucnVuID0gZnVuY3Rpb24odGFyZ2V0LCBtZXRob2QpIHsKICB2YXIgcmV0
        OwoKICBpZiAoRW1iZXIub25lcnJvcikgewogICAgdHJ5IHsKICAgICAgcmV0
        ID0gYmFja2J1cm5lci5ydW4uYXBwbHkoYmFja2J1cm5lciwgYXJndW1lbnRz
        KTsKICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgRW1iZXIub25lcnJvcihlKTsK
        ICAgIH0KICB9IGVsc2UgewogICAgcmV0ID0gYmFja2J1cm5lci5ydW4uYXBw
        bHkoYmFja2J1cm5lciwgYXJndW1lbnRzKTsKICB9CgogIHJldHVybiByZXQ7
        Cn07CgovKioKICBJZiBubyBydW4tbG9vcCBpcyBwcmVzZW50LCBpdCBjcmVh
        dGVzIGEgbmV3IG9uZS4gSWYgYSBydW4gbG9vcCBpcwogIHByZXNlbnQgaXQg
        d2lsbCBxdWV1ZSBpdHNlbGYgdG8gcnVuIG9uIHRoZSBleGlzdGluZyBydW4t
        bG9vcHMgYWN0aW9uCiAgcXVldWUuCgogIFBsZWFzZSBub3RlOiBUaGlzIGlz
        IG5vdCBmb3Igbm9ybWFsIHVzYWdlLCBhbmQgc2hvdWxkIGJlIHVzZWQgc3Bh
        cmluZ2x5LgoKICBJZiBpbnZva2VkIHdoZW4gbm90IHdpdGhpbiBhIHJ1biBs
        b29wOgoKICBgYGBqYXZhc2NyaXB0CiAgRW1iZXIucnVuLmpvaW4oZnVuY3Rp
        b24oKSB7CiAgICAvLyBjcmVhdGVzIGEgbmV3IHJ1bi1sb29wCiAgfSk7CiAg
        YGBgCgogIEFsdGVybmF0aXZlbHksIGlmIGNhbGxlZCB3aXRoaW4gYW4gZXhp
        c3RpbmcgcnVuIGxvb3A6CgogIGBgYGphdmFzY3JpcHQKICBFbWJlci5ydW4o
        ZnVuY3Rpb24oKSB7CiAgICAvLyBjcmVhdGVzIGEgbmV3IHJ1bi1sb29wCiAg
        ICBFbWJlci5ydW4uam9pbihmdW5jdGlvbigpIHsKICAgICAgLy8gam9pbnMg
        d2l0aCB0aGUgZXhpc3RpbmcgcnVuLWxvb3AsIGFuZCBxdWV1ZXMgZm9yIGlu
        dm9jYXRpb24gb24KICAgICAgLy8gdGhlIGV4aXN0aW5nIHJ1bi1sb29wcyBh
        Y3Rpb24gcXVldWUuCiAgICB9KTsKICB9KTsKICBgYGAKCiAgQG1ldGhvZCBq
        b2luCiAgQG5hbWVzcGFjZSBFbWJlcgogIEBwYXJhbSB7T2JqZWN0fSBbdGFy
        Z2V0XSB0YXJnZXQgb2YgbWV0aG9kIHRvIGNhbGwKICBAcGFyYW0ge0Z1bmN0
        aW9ufFN0cmluZ30gbWV0aG9kIE1ldGhvZCB0byBpbnZva2UuCiAgICBNYXkg
        YmUgYSBmdW5jdGlvbiBvciBhIHN0cmluZy4gSWYgeW91IHBhc3MgYSBzdHJp
        bmcKICAgIHRoZW4gaXQgd2lsbCBiZSBsb29rZWQgdXAgb24gdGhlIHBhc3Nl
        ZCB0YXJnZXQuCiAgQHBhcmFtIHtPYmplY3R9IFthcmdzKl0gQW55IGFkZGl0
        aW9uYWwgYXJndW1lbnRzIHlvdSB3aXNoIHRvIHBhc3MgdG8gdGhlIG1ldGhv
        ZC4KICBAcmV0dXJuIHtPYmplY3R9IFJldHVybiB2YWx1ZSBmcm9tIGludm9r
        aW5nIHRoZSBwYXNzZWQgZnVuY3Rpb24uIFBsZWFzZSBub3RlLAogIHdoZW4g
        Y2FsbGVkIHdpdGhpbiBhbiBleGlzdGluZyBsb29wLCBubyByZXR1cm4gdmFs
        dWUgaXMgcG9zc2libGUuCiovCkVtYmVyLnJ1bi5qb2luID0gZnVuY3Rpb24o
        dGFyZ2V0LCBtZXRob2QgLyogYXJncyAqLykgewogIGlmICghRW1iZXIucnVu
        LmN1cnJlbnRSdW5Mb29wKSB7CiAgICByZXR1cm4gRW1iZXIucnVuLmFwcGx5
        KEVtYmVyLnJ1biwgYXJndW1lbnRzKTsKICB9CgogIHZhciBhcmdzID0gc2xp
        Y2UuY2FsbChhcmd1bWVudHMpOwogIGFyZ3MudW5zaGlmdCgnYWN0aW9ucycp
        OwogIEVtYmVyLnJ1bi5zY2hlZHVsZS5hcHBseShFbWJlci5ydW4sIGFyZ3Mp
        Owp9OwoKLyoqCiAgUHJvdmlkZXMgYSB1c2VmdWwgdXRpbGl0eSBmb3Igd2hl
        biBpbnRlZ3JhdGluZyB3aXRoIG5vbi1FbWJlciBsaWJyYXJpZXMKICB0aGF0
        IHByb3ZpZGUgYXN5bmNocm9ub3VzIGNhbGxiYWNrcy4KCiAgRW1iZXIgdXRp
        bGl6ZXMgYSBydW4tbG9vcCB0byBiYXRjaCBhbmQgY29hbGVzY2UgY2hhbmdl
        cy4gVGhpcyB3b3JrcyBieQogIG1hcmtpbmcgdGhlIHN0YXJ0IGFuZCBlbmQg
        b2YgRW1iZXItcmVsYXRlZCBKYXZhc2NyaXB0IGV4ZWN1dGlvbi4KCiAgV2hl
        biB1c2luZyBldmVudHMgc3VjaCBhcyBhIFZpZXcncyBjbGljayBoYW5kbGVy
        LCBFbWJlciB3cmFwcyB0aGUgZXZlbnQKICBoYW5kbGVyIGluIGEgcnVuLWxv
        b3AsIGJ1dCB3aGVuIGludGVncmF0aW5nIHdpdGggbm9uLUVtYmVyIGxpYnJh
        cmllcyB0aGlzCiAgY2FuIGJlIHRlZGlvdXMuCgogIEZvciBleGFtcGxlLCB0
        aGUgZm9sbG93aW5nIGlzIHJhdGhlciB2ZXJib3NlIGJ1dCBpcyB0aGUgY29y
        cmVjdCB3YXkgdG8gY29tYmluZQogIHRoaXJkLXBhcnR5IGV2ZW50cyBhbmQg
        RW1iZXIgY29kZS4KCiAgYGBgamF2YXNjcmlwdAogIHZhciB0aGF0ID0gdGhp
        czsKICBqUXVlcnkod2luZG93KS5vbigncmVzaXplJywgZnVuY3Rpb24oKXsK
        ICAgIEVtYmVyLnJ1bihmdW5jdGlvbigpewogICAgICB0aGF0LmhhbmRsZVJl
        c2l6ZSgpOwogICAgfSk7CiAgfSk7CiAgYGBgCgogIFRvIHJlZHVjZSB0aGUg
        Ym9pbGVycGxhdGUsIHRoZSBmb2xsb3dpbmcgY2FuIGJlIHVzZWQgdG8gY29u
        c3RydWN0IGEKICBydW4tbG9vcC13cmFwcGVkIGNhbGxiYWNrIGhhbmRsZXIu
        CgogIGBgYGphdmFzY3JpcHQKICBqUXVlcnkod2luZG93KS5vbigncmVzaXpl
        JywgRW1iZXIucnVuLmJpbmQodGhpcywgdGhpcy50cmlnZ2VyUmVzaXplKSk7
        CiAgYGBgCgogIEBtZXRob2QgYmluZAogIEBuYW1lc3BhY2UgRW1iZXIucnVu
        CiAgQHBhcmFtIHtPYmplY3R9IFt0YXJnZXRdIHRhcmdldCBvZiBtZXRob2Qg
        dG8gY2FsbAogIEBwYXJhbSB7RnVuY3Rpb258U3RyaW5nfSBtZXRob2QgTWV0
        aG9kIHRvIGludm9rZS4KICAgIE1heSBiZSBhIGZ1bmN0aW9uIG9yIGEgc3Ry
        aW5nLiBJZiB5b3UgcGFzcyBhIHN0cmluZwogICAgdGhlbiBpdCB3aWxsIGJl
        IGxvb2tlZCB1cCBvbiB0aGUgcGFzc2VkIHRhcmdldC4KICBAcGFyYW0ge09i
        amVjdH0gW2FyZ3MqXSBBbnkgYWRkaXRpb25hbCBhcmd1bWVudHMgeW91IHdp
        c2ggdG8gcGFzcyB0byB0aGUgbWV0aG9kLgogIEByZXR1cm4ge09iamVjdH0g
        cmV0dXJuIHZhbHVlIGZyb20gaW52b2tpbmcgdGhlIHBhc3NlZCBmdW5jdGlv
        bi4gUGxlYXNlIG5vdGUsCiAgd2hlbiBjYWxsZWQgd2l0aGluIGFuIGV4aXN0
        aW5nIGxvb3AsIG5vIHJldHVybiB2YWx1ZSBpcyBwb3NzaWJsZS4KKi8KRW1i
        ZXIucnVuLmJpbmQgPSBmdW5jdGlvbih0YXJnZXQsIG1ldGhvZCAvKiBhcmdz
        Ki8pIHsKICB2YXIgYXJncyA9IGFyZ3VtZW50czsKICByZXR1cm4gZnVuY3Rp
        b24oKSB7CiAgICByZXR1cm4gRW1iZXIucnVuLmpvaW4uYXBwbHkoRW1iZXIu
        cnVuLCBhcmdzKTsKICB9Owp9OwoKRW1iZXIucnVuLmJhY2tidXJuZXIgPSBi
        YWNrYnVybmVyOwoKdmFyIHJ1biA9IEVtYmVyLnJ1bjsKCkVtYmVyLnJ1bi5j
        dXJyZW50UnVuTG9vcCA9IG51bGw7CgpFbWJlci5ydW4ucXVldWVzID0gYmFj
        a2J1cm5lci5xdWV1ZU5hbWVzOwoKLyoqCiAgQmVnaW5zIGEgbmV3IFJ1bkxv
        b3AuIEFueSBkZWZlcnJlZCBhY3Rpb25zIGludm9rZWQgYWZ0ZXIgdGhlIGJl
        Z2luIHdpbGwKICBiZSBidWZmZXJlZCB1bnRpbCB5b3UgaW52b2tlIGEgbWF0
        Y2hpbmcgY2FsbCB0byBgRW1iZXIucnVuLmVuZCgpYC4gVGhpcyBpcwogIGEg
        bG93ZXItbGV2ZWwgd2F5IHRvIHVzZSBhIFJ1bkxvb3AgaW5zdGVhZCBvZiB1
        c2luZyBgRW1iZXIucnVuKClgLgoKICBgYGBqYXZhc2NyaXB0CiAgRW1iZXIu
        cnVuLmJlZ2luKCk7CiAgLy8gY29kZSB0byBiZSBleGVjdXRlIHdpdGhpbiBh
        IFJ1bkxvb3AKICBFbWJlci5ydW4uZW5kKCk7CiAgYGBgCgogIEBtZXRob2Qg
        YmVnaW4KICBAcmV0dXJuIHt2b2lkfQoqLwpFbWJlci5ydW4uYmVnaW4gPSBm
        dW5jdGlvbigpIHsKICBiYWNrYnVybmVyLmJlZ2luKCk7Cn07CgovKioKICBF
        bmRzIGEgUnVuTG9vcC4gVGhpcyBtdXN0IGJlIGNhbGxlZCBzb21ldGltZSBh
        ZnRlciB5b3UgY2FsbAogIGBFbWJlci5ydW4uYmVnaW4oKWAgdG8gZmx1c2gg
        YW55IGRlZmVycmVkIGFjdGlvbnMuIFRoaXMgaXMgYSBsb3dlci1sZXZlbCB3
        YXkKICB0byB1c2UgYSBSdW5Mb29wIGluc3RlYWQgb2YgdXNpbmcgYEVtYmVy
        LnJ1bigpYC4KCiAgYGBgamF2YXNjcmlwdAogIEVtYmVyLnJ1bi5iZWdpbigp
        OwogIC8vIGNvZGUgdG8gYmUgZXhlY3V0ZSB3aXRoaW4gYSBSdW5Mb29wCiAg
        RW1iZXIucnVuLmVuZCgpOwogIGBgYAoKICBAbWV0aG9kIGVuZAogIEByZXR1
        cm4ge3ZvaWR9CiovCkVtYmVyLnJ1bi5lbmQgPSBmdW5jdGlvbigpIHsKICBi
        YWNrYnVybmVyLmVuZCgpOwp9OwoKLyoqCiAgQXJyYXkgb2YgbmFtZWQgcXVl
        dWVzLiBUaGlzIGFycmF5IGRldGVybWluZXMgdGhlIG9yZGVyIGluIHdoaWNo
        IHF1ZXVlcwogIGFyZSBmbHVzaGVkIGF0IHRoZSBlbmQgb2YgdGhlIFJ1bkxv
        b3AuIFlvdSBjYW4gZGVmaW5lIHlvdXIgb3duIHF1ZXVlcyBieQogIHNpbXBs
        eSBhZGRpbmcgdGhlIHF1ZXVlIG5hbWUgdG8gdGhpcyBhcnJheS4gTm9ybWFs
        bHkgeW91IHNob3VsZCBub3QgbmVlZAogIHRvIGluc3BlY3Qgb3IgbW9kaWZ5
        IHRoaXMgcHJvcGVydHkuCgogIEBwcm9wZXJ0eSBxdWV1ZXMKICBAdHlwZSBB
        cnJheQogIEBkZWZhdWx0IFsnc3luYycsICdhY3Rpb25zJywgJ2Rlc3Ryb3kn
        XQoqLwoKLyoqCiAgQWRkcyB0aGUgcGFzc2VkIHRhcmdldC9tZXRob2QgYW5k
        IGFueSBvcHRpb25hbCBhcmd1bWVudHMgdG8gdGhlIG5hbWVkCiAgcXVldWUg
        dG8gYmUgZXhlY3V0ZWQgYXQgdGhlIGVuZCBvZiB0aGUgUnVuTG9vcC4gSWYg
        eW91IGhhdmUgbm90IGFscmVhZHkKICBzdGFydGVkIGEgUnVuTG9vcCB3aGVu
        IGNhbGxpbmcgdGhpcyBtZXRob2Qgb25lIHdpbGwgYmUgc3RhcnRlZCBmb3Ig
        eW91CiAgYXV0b21hdGljYWxseS4KCiAgQXQgdGhlIGVuZCBvZiBhIFJ1bkxv
        b3AsIGFueSBtZXRob2RzIHNjaGVkdWxlZCBpbiB0aGlzIHdheSB3aWxsIGJl
        IGludm9rZWQuCiAgTWV0aG9kcyB3aWxsIGJlIGludm9rZWQgaW4gYW4gb3Jk
        ZXIgbWF0Y2hpbmcgdGhlIG5hbWVkIHF1ZXVlcyBkZWZpbmVkIGluCiAgdGhl
        IGBFbWJlci5ydW4ucXVldWVzYCBwcm9wZXJ0eS4KCiAgYGBgamF2YXNjcmlw
        dAogIEVtYmVyLnJ1bi5zY2hlZHVsZSgnc3luYycsIHRoaXMsIGZ1bmN0aW9u
        KCkgewogICAgLy8gdGhpcyB3aWxsIGJlIGV4ZWN1dGVkIGluIHRoZSBmaXJz
        dCBSdW5Mb29wIHF1ZXVlLCB3aGVuIGJpbmRpbmdzIGFyZSBzeW5jZWQKICAg
        IGNvbnNvbGUubG9nKCJzY2hlZHVsZWQgb24gc3luYyBxdWV1ZSIpOwogIH0p
        OwoKICBFbWJlci5ydW4uc2NoZWR1bGUoJ2FjdGlvbnMnLCB0aGlzLCBmdW5j
        dGlvbigpIHsKICAgIC8vIHRoaXMgd2lsbCBiZSBleGVjdXRlZCBpbiB0aGUg
        J2FjdGlvbnMnIHF1ZXVlLCBhZnRlciBiaW5kaW5ncyBoYXZlIHN5bmNlZC4K
        ICAgIGNvbnNvbGUubG9nKCJzY2hlZHVsZWQgb24gYWN0aW9ucyBxdWV1ZSIp
        OwogIH0pOwoKICAvLyBOb3RlIHRoZSBmdW5jdGlvbnMgd2lsbCBiZSBydW4g
        aW4gb3JkZXIgYmFzZWQgb24gdGhlIHJ1biBxdWV1ZXMgb3JkZXIuCiAgLy8g
        T3V0cHV0IHdvdWxkIGJlOgogIC8vICAgc2NoZWR1bGVkIG9uIHN5bmMgcXVl
        dWUKICAvLyAgIHNjaGVkdWxlZCBvbiBhY3Rpb25zIHF1ZXVlCiAgYGBgCgog
        IEBtZXRob2Qgc2NoZWR1bGUKICBAcGFyYW0ge1N0cmluZ30gcXVldWUgVGhl
        IG5hbWUgb2YgdGhlIHF1ZXVlIHRvIHNjaGVkdWxlIGFnYWluc3QuCiAgICBE
        ZWZhdWx0IHF1ZXVlcyBhcmUgJ3N5bmMnIGFuZCAnYWN0aW9ucycKICBAcGFy
        YW0ge09iamVjdH0gW3RhcmdldF0gdGFyZ2V0IG9iamVjdCB0byB1c2UgYXMg
        dGhlIGNvbnRleHQgd2hlbiBpbnZva2luZyBhIG1ldGhvZC4KICBAcGFyYW0g
        e1N0cmluZ3xGdW5jdGlvbn0gbWV0aG9kIFRoZSBtZXRob2QgdG8gaW52b2tl
        LiBJZiB5b3UgcGFzcyBhIHN0cmluZyBpdAogICAgd2lsbCBiZSByZXNvbHZl
        ZCBvbiB0aGUgdGFyZ2V0IG9iamVjdCBhdCB0aGUgdGltZSB0aGUgc2NoZWR1
        bGVkIGl0ZW0gaXMKICAgIGludm9rZWQgYWxsb3dpbmcgeW91IHRvIGNoYW5n
        ZSB0aGUgdGFyZ2V0IGZ1bmN0aW9uLgogIEBwYXJhbSB7T2JqZWN0fSBbYXJn
        dW1lbnRzKl0gT3B0aW9uYWwgYXJndW1lbnRzIHRvIGJlIHBhc3NlZCB0byB0
        aGUgcXVldWVkIG1ldGhvZC4KICBAcmV0dXJuIHt2b2lkfQoqLwpFbWJlci5y
        dW4uc2NoZWR1bGUgPSBmdW5jdGlvbihxdWV1ZSwgdGFyZ2V0LCBtZXRob2Qp
        IHsKICBjaGVja0F1dG9SdW4oKTsKICBiYWNrYnVybmVyLnNjaGVkdWxlLmFw
        cGx5KGJhY2tidXJuZXIsIGFyZ3VtZW50cyk7Cn07CgovLyBVc2VkIGJ5IGds
        b2JhbCB0ZXN0IHRlYXJkb3duCkVtYmVyLnJ1bi5oYXNTY2hlZHVsZWRUaW1l
        cnMgPSBmdW5jdGlvbigpIHsKICByZXR1cm4gYmFja2J1cm5lci5oYXNUaW1l
        cnMoKTsKfTsKCi8vIFVzZWQgYnkgZ2xvYmFsIHRlc3QgdGVhcmRvd24KRW1i
        ZXIucnVuLmNhbmNlbFRpbWVycyA9IGZ1bmN0aW9uICgpIHsKICBiYWNrYnVy
        bmVyLmNhbmNlbFRpbWVycygpOwp9OwoKLyoqCiAgSW1tZWRpYXRlbHkgZmx1
        c2hlcyBhbnkgZXZlbnRzIHNjaGVkdWxlZCBpbiB0aGUgJ3N5bmMnIHF1ZXVl
        LiBCaW5kaW5ncwogIHVzZSB0aGlzIHF1ZXVlIHNvIHRoaXMgbWV0aG9kIGlz
        IGEgdXNlZnVsIHdheSB0byBpbW1lZGlhdGVseSBmb3JjZSBhbGwKICBiaW5k
        aW5ncyBpbiB0aGUgYXBwbGljYXRpb24gdG8gc3luYy4KCiAgWW91IHNob3Vs
        ZCBjYWxsIHRoaXMgbWV0aG9kIGFueXRpbWUgeW91IG5lZWQgYW55IGNoYW5n
        ZWQgc3RhdGUgdG8gcHJvcGFnYXRlCiAgdGhyb3VnaG91dCB0aGUgYXBwIGlt
        bWVkaWF0ZWx5IHdpdGhvdXQgcmVwYWludGluZyB0aGUgVUkgKHdoaWNoIGhh
        cHBlbnMKICBpbiB0aGUgbGF0ZXIgJ3JlbmRlcicgcXVldWUgYWRkZWQgYnkg
        dGhlIGBlbWJlci12aWV3c2AgcGFja2FnZSkuCgogIGBgYGphdmFzY3JpcHQK
        ICBFbWJlci5ydW4uc3luYygpOwogIGBgYAoKICBAbWV0aG9kIHN5bmMKICBA
        cmV0dXJuIHt2b2lkfQoqLwpFbWJlci5ydW4uc3luYyA9IGZ1bmN0aW9uKCkg
        ewogIGlmIChiYWNrYnVybmVyLmN1cnJlbnRJbnN0YW5jZSkgewogICAgYmFj
        a2J1cm5lci5jdXJyZW50SW5zdGFuY2UucXVldWVzLnN5bmMuZmx1c2goKTsK
        ICB9Cn07CgovKioKICBJbnZva2VzIHRoZSBwYXNzZWQgdGFyZ2V0L21ldGhv
        ZCBhbmQgb3B0aW9uYWwgYXJndW1lbnRzIGFmdGVyIGEgc3BlY2lmaWVkCiAg
        cGVyaW9kIGlmIHRpbWUuIFRoZSBsYXN0IHBhcmFtZXRlciBvZiB0aGlzIG1l
        dGhvZCBtdXN0IGFsd2F5cyBiZSBhIG51bWJlcgogIG9mIG1pbGxpc2Vjb25k
        cy4KCiAgWW91IHNob3VsZCB1c2UgdGhpcyBtZXRob2Qgd2hlbmV2ZXIgeW91
        IG5lZWQgdG8gcnVuIHNvbWUgYWN0aW9uIGFmdGVyIGEKICBwZXJpb2Qgb2Yg
        dGltZSBpbnN0ZWFkIG9mIHVzaW5nIGBzZXRUaW1lb3V0KClgLiBUaGlzIG1l
        dGhvZCB3aWxsIGVuc3VyZSB0aGF0CiAgaXRlbXMgdGhhdCBleHBpcmUgZHVy
        aW5nIHRoZSBzYW1lIHNjcmlwdCBleGVjdXRpb24gY3ljbGUgYWxsIGV4ZWN1
        dGUKICB0b2dldGhlciwgd2hpY2ggaXMgb2Z0ZW4gbW9yZSBlZmZpY2llbnQg
        dGhhbiB1c2luZyBhIHJlYWwgc2V0VGltZW91dC4KCiAgYGBgamF2YXNjcmlw
        dAogIEVtYmVyLnJ1bi5sYXRlcihteUNvbnRleHQsIGZ1bmN0aW9uKCkgewog
        ICAgLy8gY29kZSBoZXJlIHdpbGwgZXhlY3V0ZSB3aXRoaW4gYSBSdW5Mb29w
        IGluIGFib3V0IDUwMG1zIHdpdGggdGhpcyA9PSBteUNvbnRleHQKICB9LCA1
        MDApOwogIGBgYAoKICBAbWV0aG9kIGxhdGVyCiAgQHBhcmFtIHtPYmplY3R9
        IFt0YXJnZXRdIHRhcmdldCBvZiBtZXRob2QgdG8gaW52b2tlCiAgQHBhcmFt
        IHtGdW5jdGlvbnxTdHJpbmd9IG1ldGhvZCBUaGUgbWV0aG9kIHRvIGludm9r
        ZS4KICAgIElmIHlvdSBwYXNzIGEgc3RyaW5nIGl0IHdpbGwgYmUgcmVzb2x2
        ZWQgb24gdGhlCiAgICB0YXJnZXQgYXQgdGhlIHRpbWUgdGhlIG1ldGhvZCBp
        cyBpbnZva2VkLgogIEBwYXJhbSB7T2JqZWN0fSBbYXJncypdIE9wdGlvbmFs
        IGFyZ3VtZW50cyB0byBwYXNzIHRvIHRoZSB0aW1lb3V0LgogIEBwYXJhbSB7
        TnVtYmVyfSB3YWl0IE51bWJlciBvZiBtaWxsaXNlY29uZHMgdG8gd2FpdC4K
        ICBAcmV0dXJuIHtTdHJpbmd9IGEgc3RyaW5nIHlvdSBjYW4gdXNlIHRvIGNh
        bmNlbCB0aGUgdGltZXIgaW4KICAgIGBFbWJlci5ydW4uY2FuY2VsYCBsYXRl
        ci4KKi8KRW1iZXIucnVuLmxhdGVyID0gZnVuY3Rpb24odGFyZ2V0LCBtZXRo
        b2QpIHsKICByZXR1cm4gYmFja2J1cm5lci5sYXRlci5hcHBseShiYWNrYnVy
        bmVyLCBhcmd1bWVudHMpOwp9OwoKLyoqCiAgU2NoZWR1bGUgYSBmdW5jdGlv
        biB0byBydW4gb25lIHRpbWUgZHVyaW5nIHRoZSBjdXJyZW50IFJ1bkxvb3Au
        IFRoaXMgaXMgZXF1aXZhbGVudAogIHRvIGNhbGxpbmcgYHNjaGVkdWxlT25j
        ZWAgd2l0aCB0aGUgImFjdGlvbnMiIHF1ZXVlLgoKICBAbWV0aG9kIG9uY2UK
        ICBAcGFyYW0ge09iamVjdH0gW3RhcmdldF0gVGhlIHRhcmdldCBvZiB0aGUg
        bWV0aG9kIHRvIGludm9rZS4KICBAcGFyYW0ge0Z1bmN0aW9ufFN0cmluZ30g
        bWV0aG9kIFRoZSBtZXRob2QgdG8gaW52b2tlLgogICAgSWYgeW91IHBhc3Mg
        YSBzdHJpbmcgaXQgd2lsbCBiZSByZXNvbHZlZCBvbiB0aGUKICAgIHRhcmdl
        dCBhdCB0aGUgdGltZSB0aGUgbWV0aG9kIGlzIGludm9rZWQuCiAgQHBhcmFt
        IHtPYmplY3R9IFthcmdzKl0gT3B0aW9uYWwgYXJndW1lbnRzIHRvIHBhc3Mg
        dG8gdGhlIHRpbWVvdXQuCiAgQHJldHVybiB7T2JqZWN0fSBUaW1lciBpbmZv
        cm1hdGlvbiBmb3IgdXNlIGluIGNhbmNlbGxpbmcsIHNlZSBgRW1iZXIucnVu
        LmNhbmNlbGAuCiovCkVtYmVyLnJ1bi5vbmNlID0gZnVuY3Rpb24odGFyZ2V0
        LCBtZXRob2QpIHsKICBjaGVja0F1dG9SdW4oKTsKICB2YXIgYXJncyA9IHNs
        aWNlLmNhbGwoYXJndW1lbnRzKTsKICBhcmdzLnVuc2hpZnQoJ2FjdGlvbnMn
        KTsKICByZXR1cm4gYmFja2J1cm5lci5zY2hlZHVsZU9uY2UuYXBwbHkoYmFj
        a2J1cm5lciwgYXJncyk7Cn07CgovKioKICBTY2hlZHVsZXMgYSBmdW5jdGlv
        biB0byBydW4gb25lIHRpbWUgaW4gYSBnaXZlbiBxdWV1ZSBvZiB0aGUgY3Vy
        cmVudCBSdW5Mb29wLgogIENhbGxpbmcgdGhpcyBtZXRob2Qgd2l0aCB0aGUg
        c2FtZSBxdWV1ZS90YXJnZXQvbWV0aG9kIGNvbWJpbmF0aW9uIHdpbGwgaGF2
        ZQogIG5vIGVmZmVjdCAocGFzdCB0aGUgaW5pdGlhbCBjYWxsKS4KCiAgTm90
        ZSB0aGF0IGFsdGhvdWdoIHlvdSBjYW4gcGFzcyBvcHRpb25hbCBhcmd1bWVu
        dHMgdGhlc2Ugd2lsbCBub3QgYmUKICBjb25zaWRlcmVkIHdoZW4gbG9va2lu
        ZyBmb3IgZHVwbGljYXRlcy4gTmV3IGFyZ3VtZW50cyB3aWxsIHJlcGxhY2Ug
        cHJldmlvdXMKICBjYWxscy4KCiAgYGBgamF2YXNjcmlwdAogIEVtYmVyLnJ1
        bihmdW5jdGlvbigpIHsKICAgIHZhciBzYXlIaSA9IGZ1bmN0aW9uKCkgeyBj
        b25zb2xlLmxvZygnaGknKTsgfQogICAgRW1iZXIucnVuLnNjaGVkdWxlT25j
        ZSgnYWZ0ZXJSZW5kZXInLCBteUNvbnRleHQsIHNheUhpKTsKICAgIEVtYmVy
        LnJ1bi5zY2hlZHVsZU9uY2UoJ2FmdGVyUmVuZGVyJywgbXlDb250ZXh0LCBz
        YXlIaSk7CiAgICAvLyBzYXlIaSB3aWxsIG9ubHkgYmUgZXhlY3V0ZWQgb25j
        ZSwgaW4gdGhlIGFmdGVyUmVuZGVyIHF1ZXVlIG9mIHRoZSBSdW5Mb29wCiAg
        fSk7CiAgYGBgCgogIEFsc28gbm90ZSB0aGF0IHBhc3NpbmcgYW4gYW5vbnlt
        b3VzIGZ1bmN0aW9uIHRvIGBFbWJlci5ydW4uc2NoZWR1bGVPbmNlYCB3aWxs
        CiAgbm90IHByZXZlbnQgYWRkaXRpb25hbCBjYWxscyB3aXRoIGFuIGlkZW50
        aWNhbCBhbm9ueW1vdXMgZnVuY3Rpb24gZnJvbQogIHNjaGVkdWxpbmcgdGhl
        IGl0ZW1zIG11bHRpcGxlIHRpbWVzLCBlLmcuOgoKICBgYGBqYXZhc2NyaXB0
        CiAgZnVuY3Rpb24gc2NoZWR1bGVJdCgpIHsKICAgIEVtYmVyLnJ1bi5zY2hl
        ZHVsZU9uY2UoJ2FjdGlvbnMnLCBteUNvbnRleHQsIGZ1bmN0aW9uKCkgeyBj
        b25zb2xlLmxvZygiQ2xvc3VyZSIpOyB9KTsKICB9CiAgc2NoZWR1bGVJdCgp
        OwogIHNjaGVkdWxlSXQoKTsKICAvLyAiQ2xvc3VyZSIgd2lsbCBwcmludCB0
        d2ljZSwgZXZlbiB0aG91Z2ggd2UncmUgdXNpbmcgYEVtYmVyLnJ1bi5zY2hl
        ZHVsZU9uY2VgLAogIC8vIGJlY2F1c2UgdGhlIGZ1bmN0aW9uIHdlIHBhc3Mg
        dG8gaXQgaXMgYW5vbnltb3VzIGFuZCB3b24ndCBtYXRjaCB0aGUKICAvLyBw
        cmV2aW91c2x5IHNjaGVkdWxlZCBvcGVyYXRpb24uCiAgYGBgCgogIEF2YWls
        YWJsZSBxdWV1ZXMsIGFuZCB0aGVpciBvcmRlciwgY2FuIGJlIGZvdW5kIGF0
        IGBFbWJlci5ydW4ucXVldWVzYAoKICBAbWV0aG9kIHNjaGVkdWxlT25jZQog
        IEBwYXJhbSB7U3RyaW5nfSBbcXVldWVdIFRoZSBuYW1lIG9mIHRoZSBxdWV1
        ZSB0byBzY2hlZHVsZSBhZ2FpbnN0LiBEZWZhdWx0IHF1ZXVlcyBhcmUgJ3N5
        bmMnIGFuZCAnYWN0aW9ucycuCiAgQHBhcmFtIHtPYmplY3R9IFt0YXJnZXRd
        IFRoZSB0YXJnZXQgb2YgdGhlIG1ldGhvZCB0byBpbnZva2UuCiAgQHBhcmFt
        IHtGdW5jdGlvbnxTdHJpbmd9IG1ldGhvZCBUaGUgbWV0aG9kIHRvIGludm9r
        ZS4KICAgIElmIHlvdSBwYXNzIGEgc3RyaW5nIGl0IHdpbGwgYmUgcmVzb2x2
        ZWQgb24gdGhlCiAgICB0YXJnZXQgYXQgdGhlIHRpbWUgdGhlIG1ldGhvZCBp
        cyBpbnZva2VkLgogIEBwYXJhbSB7T2JqZWN0fSBbYXJncypdIE9wdGlvbmFs
        IGFyZ3VtZW50cyB0byBwYXNzIHRvIHRoZSB0aW1lb3V0LgogIEByZXR1cm4g
        e09iamVjdH0gVGltZXIgaW5mb3JtYXRpb24gZm9yIHVzZSBpbiBjYW5jZWxs
        aW5nLCBzZWUgYEVtYmVyLnJ1bi5jYW5jZWxgLgoqLwpFbWJlci5ydW4uc2No
        ZWR1bGVPbmNlID0gZnVuY3Rpb24ocXVldWUsIHRhcmdldCwgbWV0aG9kKSB7
        CiAgY2hlY2tBdXRvUnVuKCk7CiAgcmV0dXJuIGJhY2tidXJuZXIuc2NoZWR1
        bGVPbmNlLmFwcGx5KGJhY2tidXJuZXIsIGFyZ3VtZW50cyk7Cn07CgovKioK
        ICBTY2hlZHVsZXMgYW4gaXRlbSB0byBydW4gZnJvbSB3aXRoaW4gYSBzZXBh
        cmF0ZSBydW4gbG9vcCwgYWZ0ZXIKICBjb250cm9sIGhhcyBiZWVuIHJldHVy
        bmVkIHRvIHRoZSBzeXN0ZW0uIFRoaXMgaXMgZXF1aXZhbGVudCB0byBjYWxs
        aW5nCiAgYEVtYmVyLnJ1bi5sYXRlcmAgd2l0aCBhIHdhaXQgdGltZSBvZiAx
        bXMuCgogIGBgYGphdmFzY3JpcHQKICBFbWJlci5ydW4ubmV4dChteUNvbnRl
        eHQsIGZ1bmN0aW9uKCkgewogICAgLy8gY29kZSB0byBiZSBleGVjdXRlZCBp
        biB0aGUgbmV4dCBydW4gbG9vcCwKICAgIC8vIHdoaWNoIHdpbGwgYmUgc2No
        ZWR1bGVkIGFmdGVyIHRoZSBjdXJyZW50IG9uZQogIH0pOwogIGBgYAoKICBN
        dWx0aXBsZSBvcGVyYXRpb25zIHNjaGVkdWxlZCB3aXRoIGBFbWJlci5ydW4u
        bmV4dGAgd2lsbCBjb2FsZXNjZQogIGludG8gdGhlIHNhbWUgbGF0ZXIgcnVu
        IGxvb3AsIGFsb25nIHdpdGggYW55IG90aGVyIG9wZXJhdGlvbnMKICBzY2hl
        ZHVsZWQgYnkgYEVtYmVyLnJ1bi5sYXRlcmAgdGhhdCBleHBpcmUgcmlnaHQg
        YXJvdW5kIHRoZSBzYW1lCiAgdGltZSB0aGF0IGBFbWJlci5ydW4ubmV4dGAg
        b3BlcmF0aW9ucyB3aWxsIGZpcmUuCgogIE5vdGUgdGhhdCB0aGVyZSBhcmUg
        b2Z0ZW4gYWx0ZXJuYXRpdmVzIHRvIHVzaW5nIGBFbWJlci5ydW4ubmV4dGAu
        CiAgRm9yIGluc3RhbmNlLCBpZiB5b3UnZCBsaWtlIHRvIHNjaGVkdWxlIGFu
        IG9wZXJhdGlvbiB0byBoYXBwZW4KICBhZnRlciBhbGwgRE9NIGVsZW1lbnQg
        b3BlcmF0aW9ucyBoYXZlIGNvbXBsZXRlZCB3aXRoaW4gdGhlIGN1cnJlbnQK
        ICBydW4gbG9vcCwgeW91IGNhbiBtYWtlIHVzZSBvZiB0aGUgYGFmdGVyUmVu
        ZGVyYCBydW4gbG9vcCBxdWV1ZSAoYWRkZWQKICBieSB0aGUgYGVtYmVyLXZp
        ZXdzYCBwYWNrYWdlLCBhbG9uZyB3aXRoIHRoZSBwcmVjZWRpbmcgYHJlbmRl
        cmAgcXVldWUKICB3aGVyZSBhbGwgdGhlIERPTSBlbGVtZW50IG9wZXJhdGlv
        bnMgaGFwcGVuKS4gRXhhbXBsZToKCiAgYGBgamF2YXNjcmlwdAogIEFwcC5N
        eUNvbGxlY3Rpb25WaWV3ID0gRW1iZXIuQ29sbGVjdGlvblZpZXcuZXh0ZW5k
        KHsKICAgIGRpZEluc2VydEVsZW1lbnQ6IGZ1bmN0aW9uKCkgewogICAgICBF
        bWJlci5ydW4uc2NoZWR1bGVPbmNlKCdhZnRlclJlbmRlcicsIHRoaXMsICdw
        cm9jZXNzQ2hpbGRFbGVtZW50cycpOwogICAgfSwKICAgIHByb2Nlc3NDaGls
        ZEVsZW1lbnRzOiBmdW5jdGlvbigpIHsKICAgICAgLy8gLi4uIGRvIHNvbWV0
        aGluZyB3aXRoIGNvbGxlY3Rpb25WaWV3J3MgY2hpbGQgdmlldwogICAgICAv
        LyBlbGVtZW50cyBhZnRlciB0aGV5J3ZlIGZpbmlzaGVkIHJlbmRlcmluZywg
        d2hpY2gKICAgICAgLy8gY2FuJ3QgYmUgZG9uZSB3aXRoaW4gdGhlIENvbGxl
        Y3Rpb25WaWV3J3MKICAgICAgLy8gYGRpZEluc2VydEVsZW1lbnRgIGhvb2sg
        YmVjYXVzZSB0aGF0IGdldHMgcnVuCiAgICAgIC8vIGJlZm9yZSB0aGUgY2hp
        bGQgZWxlbWVudHMgaGF2ZSBiZWVuIGFkZGVkIHRvIHRoZSBET00uCiAgICB9
        CiAgfSk7CiAgYGBgCgogIE9uZSBiZW5lZml0IG9mIHRoZSBhYm92ZSBhcHBy
        b2FjaCBjb21wYXJlZCB0byB1c2luZyBgRW1iZXIucnVuLm5leHRgIGlzCiAg
        dGhhdCB5b3Ugd2lsbCBiZSBhYmxlIHRvIHBlcmZvcm0gRE9NL0NTUyBvcGVy
        YXRpb25zIGJlZm9yZSB1bnByb2Nlc3NlZAogIGVsZW1lbnRzIGFyZSByZW5k
        ZXJlZCB0byB0aGUgc2NyZWVuLCB3aGljaCBtYXkgcHJldmVudCBmbGlja2Vy
        aW5nIG9yCiAgb3RoZXIgYXJ0aWZhY3RzIGNhdXNlZCBieSBkZWxheWluZyBw
        cm9jZXNzaW5nIHVudGlsIGFmdGVyIHJlbmRlcmluZy4KCiAgVGhlIG90aGVy
        IG1ham9yIGJlbmVmaXQgdG8gdGhlIGFib3ZlIGFwcHJvYWNoIGlzIHRoYXQg
        YEVtYmVyLnJ1bi5uZXh0YAogIGludHJvZHVjZXMgYW4gZWxlbWVudCBvZiBu
        b24tZGV0ZXJtaW5pc20sIHdoaWNoIGNhbiBtYWtlIHRoaW5ncyBtdWNoCiAg
        aGFyZGVyIHRvIHRlc3QsIGR1ZSB0byBpdHMgcmVsaWFuY2Ugb24gYHNldFRp
        bWVvdXRgOyBpdCdzIG11Y2ggaGFyZGVyCiAgdG8gZ3VhcmFudGVlIHRoZSBv
        cmRlciBvZiBzY2hlZHVsZWQgb3BlcmF0aW9ucyB3aGVuIHRoZXkgYXJlIHNj
        aGVkdWxlZAogIG91dHNpZGUgb2YgdGhlIGN1cnJlbnQgcnVuIGxvb3AsIGku
        ZS4gd2l0aCBgRW1iZXIucnVuLm5leHRgLgoKICBAbWV0aG9kIG5leHQKICBA
        cGFyYW0ge09iamVjdH0gW3RhcmdldF0gdGFyZ2V0IG9mIG1ldGhvZCB0byBp
        bnZva2UKICBAcGFyYW0ge0Z1bmN0aW9ufFN0cmluZ30gbWV0aG9kIFRoZSBt
        ZXRob2QgdG8gaW52b2tlLgogICAgSWYgeW91IHBhc3MgYSBzdHJpbmcgaXQg
        d2lsbCBiZSByZXNvbHZlZCBvbiB0aGUKICAgIHRhcmdldCBhdCB0aGUgdGlt
        ZSB0aGUgbWV0aG9kIGlzIGludm9rZWQuCiAgQHBhcmFtIHtPYmplY3R9IFth
        cmdzKl0gT3B0aW9uYWwgYXJndW1lbnRzIHRvIHBhc3MgdG8gdGhlIHRpbWVv
        dXQuCiAgQHJldHVybiB7T2JqZWN0fSBUaW1lciBpbmZvcm1hdGlvbiBmb3Ig
        dXNlIGluIGNhbmNlbGxpbmcsIHNlZSBgRW1iZXIucnVuLmNhbmNlbGAuCiov
        CkVtYmVyLnJ1bi5uZXh0ID0gZnVuY3Rpb24oKSB7CiAgdmFyIGFyZ3MgPSBz
        bGljZS5jYWxsKGFyZ3VtZW50cyk7CiAgYXJncy5wdXNoKDEpOwogIHJldHVy
        biBiYWNrYnVybmVyLmxhdGVyLmFwcGx5KGJhY2tidXJuZXIsIGFyZ3MpOwp9
        OwoKLyoqCiAgQ2FuY2VscyBhIHNjaGVkdWxlZCBpdGVtLiBNdXN0IGJlIGEg
        dmFsdWUgcmV0dXJuZWQgYnkgYEVtYmVyLnJ1bi5sYXRlcigpYCwKICBgRW1i
        ZXIucnVuLm9uY2UoKWAsIGBFbWJlci5ydW4ubmV4dCgpYCwgYEVtYmVyLnJ1
        bi5kZWJvdW5jZSgpYCwgb3IKICBgRW1iZXIucnVuLnRocm90dGxlKClgLgoK
        ICBgYGBqYXZhc2NyaXB0CiAgdmFyIHJ1bk5leHQgPSBFbWJlci5ydW4ubmV4
        dChteUNvbnRleHQsIGZ1bmN0aW9uKCkgewogICAgLy8gd2lsbCBub3QgYmUg
        ZXhlY3V0ZWQKICB9KTsKICBFbWJlci5ydW4uY2FuY2VsKHJ1bk5leHQpOwoK
        ICB2YXIgcnVuTGF0ZXIgPSBFbWJlci5ydW4ubGF0ZXIobXlDb250ZXh0LCBm
        dW5jdGlvbigpIHsKICAgIC8vIHdpbGwgbm90IGJlIGV4ZWN1dGVkCiAgfSwg
        NTAwKTsKICBFbWJlci5ydW4uY2FuY2VsKHJ1bkxhdGVyKTsKCiAgdmFyIHJ1
        bk9uY2UgPSBFbWJlci5ydW4ub25jZShteUNvbnRleHQsIGZ1bmN0aW9uKCkg
        ewogICAgLy8gd2lsbCBub3QgYmUgZXhlY3V0ZWQKICB9KTsKICBFbWJlci5y
        dW4uY2FuY2VsKHJ1bk9uY2UpOwoKICB2YXIgdGhyb3R0bGUgPSBFbWJlci5y
        dW4udGhyb3R0bGUobXlDb250ZXh0LCBmdW5jdGlvbigpIHsKICAgIC8vIHdp
        bGwgbm90IGJlIGV4ZWN1dGVkCiAgfSwgMSk7CiAgRW1iZXIucnVuLmNhbmNl
        bCh0aHJvdHRsZSk7CgogIHZhciBkZWJvdW5jZSA9IEVtYmVyLnJ1bi5kZWJv
        dW5jZShteUNvbnRleHQsIGZ1bmN0aW9uKCkgewogICAgLy8gd2lsbCBub3Qg
        YmUgZXhlY3V0ZWQKICB9LCAxKTsKICBFbWJlci5ydW4uY2FuY2VsKGRlYm91
        bmNlKTsKCiAgdmFyIGRlYm91bmNlSW1tZWRpYXRlID0gRW1iZXIucnVuLmRl
        Ym91bmNlKG15Q29udGV4dCwgZnVuY3Rpb24oKSB7CiAgICAvLyB3aWxsIGJl
        IGV4ZWN1dGVkIHNpbmNlIHdlIHBhc3NlZCBpbiB0cnVlIChpbW1lZGlhdGUp
        CiAgfSwgMTAwLCB0cnVlKTsKICAvLyB0aGUgMTAwbXMgZGVsYXkgdW50aWwg
        dGhpcyBtZXRob2QgY2FuIGJlIGNhbGxlZCBhZ2FpbiB3aWxsIGJlIGNhbmNl
        bGxlZAogIEVtYmVyLnJ1bi5jYW5jZWwoZGVib3VuY2VJbW1lZGlhdGUpOwog
        IGBgYAogIGBgYAogIGBgYAoKICBAbWV0aG9kIGNhbmNlbAogIEBwYXJhbSB7
        T2JqZWN0fSB0aW1lciBUaW1lciBvYmplY3QgdG8gY2FuY2VsCiAgQHJldHVy
        biB7Qm9vbGVhbn0gdHJ1ZSBpZiBjYW5jZWxsZWQgb3IgZmFsc2UvdW5kZWZp
        bmVkIGlmIGl0IHdhc24ndCBmb3VuZAoqLwpFbWJlci5ydW4uY2FuY2VsID0g
        ZnVuY3Rpb24odGltZXIpIHsKICByZXR1cm4gYmFja2J1cm5lci5jYW5jZWwo
        dGltZXIpOwp9OwoKLyoqCiAgRGVsYXkgY2FsbGluZyB0aGUgdGFyZ2V0IG1l
        dGhvZCB1bnRpbCB0aGUgZGVib3VuY2UgcGVyaW9kIGhhcyBlbGFwc2VkCiAg
        d2l0aCBubyBhZGRpdGlvbmFsIGRlYm91bmNlIGNhbGxzLiBJZiBgZGVib3Vu
        Y2VgIGlzIGNhbGxlZCBhZ2FpbiBiZWZvcmUKICB0aGUgc3BlY2lmaWVkIHRp
        bWUgaGFzIGVsYXBzZWQsIHRoZSB0aW1lciBpcyByZXNldCBhbmQgdGhlIGVu
        dGlyZSBwZXJpb2QKICBtdXN0IHBhc3MgYWdhaW4gYmVmb3JlIHRoZSB0YXJn
        ZXQgbWV0aG9kIGlzIGNhbGxlZC4KCiAgVGhpcyBtZXRob2Qgc2hvdWxkIGJl
        IHVzZWQgd2hlbiBhbiBldmVudCBtYXkgYmUgY2FsbGVkIG11bHRpcGxlIHRp
        bWVzCiAgYnV0IHRoZSBhY3Rpb24gc2hvdWxkIG9ubHkgYmUgY2FsbGVkIG9u
        Y2Ugd2hlbiB0aGUgZXZlbnQgaXMgZG9uZSBmaXJpbmcuCiAgQSBjb21tb24g
        ZXhhbXBsZSBpcyBmb3Igc2Nyb2xsIGV2ZW50cyB3aGVyZSB5b3Ugb25seSB3
        YW50IHVwZGF0ZXMgdG8KICBoYXBwZW4gb25jZSBzY3JvbGxpbmcgaGFzIGNl
        YXNlZC4KCiAgYGBgamF2YXNjcmlwdAogICAgdmFyIG15RnVuYyA9IGZ1bmN0
        aW9uKCkgeyBjb25zb2xlLmxvZyh0aGlzLm5hbWUgKyAnIHJhbi4nKTsgfTsK
        ICAgIHZhciBteUNvbnRleHQgPSB7bmFtZTogJ2RlYm91bmNlJ307CgogICAg
        RW1iZXIucnVuLmRlYm91bmNlKG15Q29udGV4dCwgbXlGdW5jLCAxNTApOwoK
        ICAgIC8vIGxlc3MgdGhhbiAxNTBtcyBwYXNzZXMKCiAgICBFbWJlci5ydW4u
        ZGVib3VuY2UobXlDb250ZXh0LCBteUZ1bmMsIDE1MCk7CgogICAgLy8gMTUw
        bXMgcGFzc2VzCiAgICAvLyBteUZ1bmMgaXMgaW52b2tlZCB3aXRoIGNvbnRl
        eHQgbXlDb250ZXh0CiAgICAvLyBjb25zb2xlIGxvZ3MgJ2RlYm91bmNlIHJh
        bi4nIG9uZSB0aW1lLgogIGBgYAoKICBJbW1lZGlhdGUgYWxsb3dzIHlvdSB0
        byBydW4gdGhlIGZ1bmN0aW9uIGltbWVkaWF0ZWx5LCBidXQgZGVib3VuY2UK
        ICBvdGhlciBjYWxscyBmb3IgdGhpcyBmdW5jdGlvbiB1bnRpbCB0aGUgd2Fp
        dCB0aW1lIGhhcyBlbGFwc2VkLiBJZgogIGBkZWJvdW5jZWAgaXMgY2FsbGVk
        IGFnYWluIGJlZm9yZSB0aGUgc3BlY2lmaWVkIHRpbWUgaGFzIGVsYXBzZWQs
        CiAgdGhlIHRpbWVyIGlzIHJlc2V0IGFuZCB0aGUgZW50aXJlIHBlcmlvZCBt
        c3V0IHBhc3MgYWdhaW4gYmVmb3JlCiAgdGhlIG1ldGhvZCBjYW4gYmUgY2Fs
        bGVkIGFnYWluLgoKICBgYGBqYXZhc2NyaXB0CiAgICB2YXIgbXlGdW5jID0g
        ZnVuY3Rpb24oKSB7IGNvbnNvbGUubG9nKHRoaXMubmFtZSArICcgcmFuLicp
        OyB9OwogICAgdmFyIG15Q29udGV4dCA9IHtuYW1lOiAnZGVib3VuY2UnfTsK
        CiAgICBFbWJlci5ydW4uZGVib3VuY2UobXlDb250ZXh0LCBteUZ1bmMsIDE1
        MCwgdHJ1ZSk7CgogICAgLy8gY29uc29sZSBsb2dzICdkZWJvdW5jZSByYW4u
        JyBvbmUgdGltZSBpbW1lZGlhdGVseS4KICAgIC8vIDEwMG1zIHBhc3NlcwoK
        ICAgIEVtYmVyLnJ1bi5kZWJvdW5jZShteUNvbnRleHQsIG15RnVuYywgMTUw
        LCB0cnVlKTsKCiAgICAvLyAxNTBtcyBwYXNzZXMgYW5kIG5vdGhpbmcgZWxz
        ZSBpcyBsb2dnZWQgdG8gdGhlIGNvbnNvbGUgYW5kCiAgICAvLyB0aGUgZGVi
        b3VuY2VlIGlzIG5vIGxvbmdlciBiZWluZyB3YXRjaGVkCgogICAgRW1iZXIu
        cnVuLmRlYm91bmNlKG15Q29udGV4dCwgbXlGdW5jLCAxNTAsIHRydWUpOwoK
        ICAgIC8vIGNvbnNvbGUgbG9ncyAnZGVib3VuY2UgcmFuLicgb25lIHRpbWUg
        aW1tZWRpYXRlbHkuCiAgICAvLyAxNTBtcyBwYXNzZXMgYW5kIG5vdGhpbmcg
        ZWxzZSBpcyBsb2dnZWQgdG90IGhlIGNvbnNvbGUgYW5kCiAgICAvLyB0aGUg
        ZGVib3VuY2VlIGlzIG5vIGxvbmdlciBiZWluZyB3YXRjaGVkCgogIGBgYAoK
        ICBAbWV0aG9kIGRlYm91bmNlCiAgQHBhcmFtIHtPYmplY3R9IFt0YXJnZXRd
        IHRhcmdldCBvZiBtZXRob2QgdG8gaW52b2tlCiAgQHBhcmFtIHtGdW5jdGlv
        bnxTdHJpbmd9IG1ldGhvZCBUaGUgbWV0aG9kIHRvIGludm9rZS4KICAgIE1h
        eSBiZSBhIGZ1bmN0aW9uIG9yIGEgc3RyaW5nLiBJZiB5b3UgcGFzcyBhIHN0
        cmluZwogICAgdGhlbiBpdCB3aWxsIGJlIGxvb2tlZCB1cCBvbiB0aGUgcGFz
        c2VkIHRhcmdldC4KICBAcGFyYW0ge09iamVjdH0gW2FyZ3MqXSBPcHRpb25h
        bCBhcmd1bWVudHMgdG8gcGFzcyB0byB0aGUgdGltZW91dC4KICBAcGFyYW0g
        e051bWJlcn0gd2FpdCBOdW1iZXIgb2YgbWlsbGlzZWNvbmRzIHRvIHdhaXQu
        CiAgQHBhcmFtIHtCb29sZWFufSBpbW1lZGlhdGUgVHJpZ2dlciB0aGUgZnVu
        Y3Rpb24gb24gdGhlIGxlYWRpbmcgaW5zdGVhZCBvZiB0aGUgdHJhaWxpbmcg
        ZWRnZSBvZiB0aGUgd2FpdCBpbnRlcnZhbC4KICBAcmV0dXJuIHtBcnJheX0g
        VGltZXIgaW5mb3JtYXRpb24gZm9yIHVzZSBpbiBjYW5jZWxsaW5nLCBzZWUg
        YEVtYmVyLnJ1bi5jYW5jZWxgLgoqLwpFbWJlci5ydW4uZGVib3VuY2UgPSBm
        dW5jdGlvbigpIHsKICByZXR1cm4gYmFja2J1cm5lci5kZWJvdW5jZS5hcHBs
        eShiYWNrYnVybmVyLCBhcmd1bWVudHMpOwp9OwoKLyoqCiAgRW5zdXJlIHRo
        YXQgdGhlIHRhcmdldCBtZXRob2QgaXMgbmV2ZXIgY2FsbGVkIG1vcmUgZnJl
        cXVlbnRseSB0aGFuCiAgdGhlIHNwZWNpZmllZCBzcGFjaW5nIHBlcmlvZC4K
        CiAgYGBgamF2YXNjcmlwdAogICAgdmFyIG15RnVuYyA9IGZ1bmN0aW9uKCkg
        eyBjb25zb2xlLmxvZyh0aGlzLm5hbWUgKyAnIHJhbi4nKTsgfTsKICAgIHZh
        ciBteUNvbnRleHQgPSB7bmFtZTogJ3Rocm90dGxlJ307CgogICAgRW1iZXIu
        cnVuLnRocm90dGxlKG15Q29udGV4dCwgbXlGdW5jLCAxNTApOwoKICAgIC8v
        IDUwbXMgcGFzc2VzCiAgICBFbWJlci5ydW4udGhyb3R0bGUobXlDb250ZXh0
        LCBteUZ1bmMsIDE1MCk7CgogICAgLy8gNTBtcyBwYXNzZXMKICAgIEVtYmVy
        LnJ1bi50aHJvdHRsZShteUNvbnRleHQsIG15RnVuYywgMTUwKTsKCiAgICAv
        LyA1MG1zIHBhc3NlcwogICAgRW1iZXIucnVuLnRocm90dGxlKG15Q29udGV4
        dCwgbXlGdW5jLCAxNTApOwoKICAgIC8vIDE1MG1zIHBhc3NlcwogICAgLy8g
        bXlGdW5jIGlzIGludm9rZWQgd2l0aCBjb250ZXh0IG15Q29udGV4dAogICAg
        Ly8gY29uc29sZSBsb2dzICd0aHJvdHRsZSByYW4uJyB0d2ljZSwgMTUwbXMg
        YXBhcnQuCiAgYGBgCgogIEBtZXRob2QgdGhyb3R0bGUKICBAcGFyYW0ge09i
        amVjdH0gW3RhcmdldF0gdGFyZ2V0IG9mIG1ldGhvZCB0byBpbnZva2UKICBA
        cGFyYW0ge0Z1bmN0aW9ufFN0cmluZ30gbWV0aG9kIFRoZSBtZXRob2QgdG8g
        aW52b2tlLgogICAgTWF5IGJlIGEgZnVuY3Rpb24gb3IgYSBzdHJpbmcuIElm
        IHlvdSBwYXNzIGEgc3RyaW5nCiAgICB0aGVuIGl0IHdpbGwgYmUgbG9va2Vk
        IHVwIG9uIHRoZSBwYXNzZWQgdGFyZ2V0LgogIEBwYXJhbSB7T2JqZWN0fSBb
        YXJncypdIE9wdGlvbmFsIGFyZ3VtZW50cyB0byBwYXNzIHRvIHRoZSB0aW1l
        b3V0LgogIEBwYXJhbSB7TnVtYmVyfSBzcGFjaW5nIE51bWJlciBvZiBtaWxs
        aXNlY29uZHMgdG8gc3BhY2Ugb3V0IHJlcXVlc3RzLgogIEByZXR1cm4ge0Fy
        cmF5fSBUaW1lciBpbmZvcm1hdGlvbiBmb3IgdXNlIGluIGNhbmNlbGxpbmcs
        IHNlZSBgRW1iZXIucnVuLmNhbmNlbGAuCiovCkVtYmVyLnJ1bi50aHJvdHRs
        ZSA9IGZ1bmN0aW9uKCkgewogIHJldHVybiBiYWNrYnVybmVyLnRocm90dGxl
        LmFwcGx5KGJhY2tidXJuZXIsIGFyZ3VtZW50cyk7Cn07CgovLyBNYWtlIHN1
        cmUgaXQncyBub3QgYW4gYXV0b3J1biBkdXJpbmcgdGVzdGluZwpmdW5jdGlv
        biBjaGVja0F1dG9SdW4oKSB7CiAgaWYgKCFFbWJlci5ydW4uY3VycmVudFJ1
        bkxvb3ApIHsKICAgIEVtYmVyLmFzc2VydCgiWW91IGhhdmUgdHVybmVkIG9u
        IHRlc3RpbmcgbW9kZSwgd2hpY2ggZGlzYWJsZWQgdGhlIHJ1bi1sb29wJ3Mg
        YXV0b3J1bi4gWW91IHdpbGwgbmVlZCB0byB3cmFwIGFueSBjb2RlIHdpdGgg
        YXN5bmNocm9ub3VzIHNpZGUtZWZmZWN0cyBpbiBhbiBFbWJlci5ydW4iLCAh
        RW1iZXIudGVzdGluZyk7CiAgfQp9Cgp9KSgpOwoKCgooZnVuY3Rpb24oKSB7
        Ci8vIEVtYmVyLkxvZ2dlcgovLyBnZXQKLy8gc2V0Ci8vIGd1aWRGb3IsIG1l
        dGEKLy8gYWRkT2JzZXJ2ZXIsIHJlbW92ZU9ic2VydmVyCi8vIEVtYmVyLnJ1
        bi5zY2hlZHVsZQovKioKQG1vZHVsZSBlbWJlci1tZXRhbAoqLwoKLy8gLi4u
        Li4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4u
        Li4uLi4uLi4uLgovLyBDT05TVEFOVFMKLy8KCi8qKgogIERlYnVnIHBhcmFt
        ZXRlciB5b3UgY2FuIHR1cm4gb24uIFRoaXMgd2lsbCBsb2cgYWxsIGJpbmRp
        bmdzIHRoYXQgZmlyZSB0bwogIHRoZSBjb25zb2xlLiBUaGlzIHNob3VsZCBi
        ZSBkaXNhYmxlZCBpbiBwcm9kdWN0aW9uIGNvZGUuIE5vdGUgdGhhdCB5b3UK
        ICBjYW4gYWxzbyBlbmFibGUgdGhpcyBmcm9tIHRoZSBjb25zb2xlIG9yIHRl
        bXBvcmFyaWx5LgoKICBAcHJvcGVydHkgTE9HX0JJTkRJTkdTCiAgQGZvciBF
        bWJlcgogIEB0eXBlIEJvb2xlYW4KICBAZGVmYXVsdCBmYWxzZQoqLwpFbWJl
        ci5MT0dfQklORElOR1MgPSBmYWxzZSB8fCAhIUVtYmVyLkVOVi5MT0dfQklO
        RElOR1M7Cgp2YXIgZ2V0ICAgICA9IEVtYmVyLmdldCwKICAgIHNldCAgICAg
        PSBFbWJlci5zZXQsCiAgICBndWlkRm9yID0gRW1iZXIuZ3VpZEZvciwKICAg
        IElTX0dMT0JBTCA9IC9eKFtBLVokXXwoWzAtOV1bQS1aJF0pKS87CgovKioK
        ICBSZXR1cm5zIHRydWUgaWYgdGhlIHByb3ZpZGVkIHBhdGggaXMgZ2xvYmFs
        IChlLmcuLCBgTXlBcHAuZm9vQ29udHJvbGxlci5iYXJgKQogIGluc3RlYWQg
        b2YgbG9jYWwgKGBmb28uYmFyLmJhemApLgoKICBAbWV0aG9kIGlzR2xvYmFs
        UGF0aAogIEBmb3IgRW1iZXIKICBAcHJpdmF0ZQogIEBwYXJhbSB7U3RyaW5n
        fSBwYXRoCiAgQHJldHVybiBCb29sZWFuCiovCnZhciBpc0dsb2JhbFBhdGgg
        PSBFbWJlci5pc0dsb2JhbFBhdGggPSBmdW5jdGlvbihwYXRoKSB7CiAgcmV0
        dXJuIElTX0dMT0JBTC50ZXN0KHBhdGgpOwp9OwoKZnVuY3Rpb24gZ2V0V2l0
        aEdsb2JhbHMob2JqLCBwYXRoKSB7CiAgcmV0dXJuIGdldChpc0dsb2JhbFBh
        dGgocGF0aCkgPyBFbWJlci5sb29rdXAgOiBvYmosIHBhdGgpOwp9CgovLyAu
        Li4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4u
        Li4uLi4uLi4uLi4uCi8vIEJJTkRJTkcKLy8KCnZhciBCaW5kaW5nID0gZnVu
        Y3Rpb24odG9QYXRoLCBmcm9tUGF0aCkgewogIHRoaXMuX2RpcmVjdGlvbiA9
        ICdmd2QnOwogIHRoaXMuX2Zyb20gPSBmcm9tUGF0aDsKICB0aGlzLl90byAg
        ID0gdG9QYXRoOwogIHRoaXMuX2RpcmVjdGlvbk1hcCA9IEVtYmVyLk1hcC5j
        cmVhdGUoKTsKfTsKCi8qKgpAY2xhc3MgQmluZGluZwpAbmFtZXNwYWNlIEVt
        YmVyCiovCgpCaW5kaW5nLnByb3RvdHlwZSA9IHsKICAvKioKICAgIFRoaXMg
        Y29waWVzIHRoZSBCaW5kaW5nIHNvIGl0IGNhbiBiZSBjb25uZWN0ZWQgdG8g
        YW5vdGhlciBvYmplY3QuCgogICAgQG1ldGhvZCBjb3B5CiAgICBAcmV0dXJu
        IHtFbWJlci5CaW5kaW5nfSBgdGhpc2AKICAqLwogIGNvcHk6IGZ1bmN0aW9u
        ICgpIHsKICAgIHZhciBjb3B5ID0gbmV3IEJpbmRpbmcodGhpcy5fdG8sIHRo
        aXMuX2Zyb20pOwogICAgaWYgKHRoaXMuX29uZVdheSkgeyBjb3B5Ll9vbmVX
        YXkgPSB0cnVlOyB9CiAgICByZXR1cm4gY29weTsKICB9LAoKICAvLyAuLi4u
        Li4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4u
        Li4uLi4uLi4uCiAgLy8gQ09ORklHCiAgLy8KCiAgLyoqCiAgICBUaGlzIHdp
        bGwgc2V0IGBmcm9tYCBwcm9wZXJ0eSBwYXRoIHRvIHRoZSBzcGVjaWZpZWQg
        dmFsdWUuIEl0IHdpbGwgbm90CiAgICBhdHRlbXB0IHRvIHJlc29sdmUgdGhp
        cyBwcm9wZXJ0eSBwYXRoIHRvIGFuIGFjdHVhbCBvYmplY3QgdW50aWwgeW91
        CiAgICBjb25uZWN0IHRoZSBiaW5kaW5nLgoKICAgIFRoZSBiaW5kaW5nIHdp
        bGwgc2VhcmNoIGZvciB0aGUgcHJvcGVydHkgcGF0aCBzdGFydGluZyBhdCB0
        aGUgcm9vdCBvYmplY3QKICAgIHlvdSBwYXNzIHdoZW4geW91IGBjb25uZWN0
        KClgIHRoZSBiaW5kaW5nLiBJdCBmb2xsb3dzIHRoZSBzYW1lIHJ1bGVzIGFz
        CiAgICBgZ2V0KClgIC0gc2VlIHRoYXQgbWV0aG9kIGZvciBtb3JlIGluZm9y
        bWF0aW9uLgoKICAgIEBtZXRob2QgZnJvbQogICAgQHBhcmFtIHtTdHJpbmd9
        IHBhdGggdGhlIHByb3BlcnR5IHBhdGggdG8gY29ubmVjdCB0bwogICAgQHJl
        dHVybiB7RW1iZXIuQmluZGluZ30gYHRoaXNgCiAgKi8KICBmcm9tOiBmdW5j
        dGlvbihwYXRoKSB7CiAgICB0aGlzLl9mcm9tID0gcGF0aDsKICAgIHJldHVy
        biB0aGlzOwogIH0sCgogIC8qKgogICAgVGhpcyB3aWxsIHNldCB0aGUgYHRv
        YCBwcm9wZXJ0eSBwYXRoIHRvIHRoZSBzcGVjaWZpZWQgdmFsdWUuIEl0IHdp
        bGwgbm90CiAgICBhdHRlbXB0IHRvIHJlc29sdmUgdGhpcyBwcm9wZXJ0eSBw
        YXRoIHRvIGFuIGFjdHVhbCBvYmplY3QgdW50aWwgeW91CiAgICBjb25uZWN0
        IHRoZSBiaW5kaW5nLgoKICAgIFRoZSBiaW5kaW5nIHdpbGwgc2VhcmNoIGZv
        ciB0aGUgcHJvcGVydHkgcGF0aCBzdGFydGluZyBhdCB0aGUgcm9vdCBvYmpl
        Y3QKICAgIHlvdSBwYXNzIHdoZW4geW91IGBjb25uZWN0KClgIHRoZSBiaW5k
        aW5nLiBJdCBmb2xsb3dzIHRoZSBzYW1lIHJ1bGVzIGFzCiAgICBgZ2V0KClg
        IC0gc2VlIHRoYXQgbWV0aG9kIGZvciBtb3JlIGluZm9ybWF0aW9uLgoKICAg
        IEBtZXRob2QgdG8KICAgIEBwYXJhbSB7U3RyaW5nfFR1cGxlfSBwYXRoIEEg
        cHJvcGVydHkgcGF0aCBvciB0dXBsZQogICAgQHJldHVybiB7RW1iZXIuQmlu
        ZGluZ30gYHRoaXNgCiAgKi8KICB0bzogZnVuY3Rpb24ocGF0aCkgewogICAg
        dGhpcy5fdG8gPSBwYXRoOwogICAgcmV0dXJuIHRoaXM7CiAgfSwKCiAgLyoq
        CiAgICBDb25maWd1cmVzIHRoZSBiaW5kaW5nIGFzIG9uZSB3YXkuIEEgb25l
        LXdheSBiaW5kaW5nIHdpbGwgcmVsYXkgY2hhbmdlcwogICAgb24gdGhlIGBm
        cm9tYCBzaWRlIHRvIHRoZSBgdG9gIHNpZGUsIGJ1dCBub3QgdGhlIG90aGVy
        IHdheSBhcm91bmQuIFRoaXMKICAgIG1lYW5zIHRoYXQgaWYgeW91IGNoYW5n
        ZSB0aGUgYHRvYCBzaWRlIGRpcmVjdGx5LCB0aGUgYGZyb21gIHNpZGUgbWF5
        IGhhdmUKICAgIGEgZGlmZmVyZW50IHZhbHVlLgoKICAgIEBtZXRob2Qgb25l
        V2F5CiAgICBAcmV0dXJuIHtFbWJlci5CaW5kaW5nfSBgdGhpc2AKICAqLwog
        IG9uZVdheTogZnVuY3Rpb24oKSB7CiAgICB0aGlzLl9vbmVXYXkgPSB0cnVl
        OwogICAgcmV0dXJuIHRoaXM7CiAgfSwKCiAgLyoqCiAgICBAbWV0aG9kIHRv
        U3RyaW5nCiAgICBAcmV0dXJuIHtTdHJpbmd9IHN0cmluZyByZXByZXNlbnRh
        dGlvbiBvZiBiaW5kaW5nCiAgKi8KICB0b1N0cmluZzogZnVuY3Rpb24oKSB7
        CiAgICB2YXIgb25lV2F5ID0gdGhpcy5fb25lV2F5ID8gJ1tvbmVXYXldJyA6
        ICcnOwogICAgcmV0dXJuICJFbWJlci5CaW5kaW5nPCIgKyBndWlkRm9yKHRo
        aXMpICsgIj4oIiArIHRoaXMuX2Zyb20gKyAiIC0+ICIgKyB0aGlzLl90byAr
        ICIpIiArIG9uZVdheTsKICB9LAoKICAvLyAuLi4uLi4uLi4uLi4uLi4uLi4u
        Li4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uCiAgLy8g
        Q09OTkVDVCBBTkQgU1lOQwogIC8vCgogIC8qKgogICAgQXR0ZW1wdHMgdG8g
        Y29ubmVjdCB0aGlzIGJpbmRpbmcgaW5zdGFuY2Ugc28gdGhhdCBpdCBjYW4g
        cmVjZWl2ZSBhbmQgcmVsYXkKICAgIGNoYW5nZXMuIFRoaXMgbWV0aG9kIHdp
        bGwgcmFpc2UgYW4gZXhjZXB0aW9uIGlmIHlvdSBoYXZlIG5vdCBzZXQgdGhl
        CiAgICBmcm9tL3RvIHByb3BlcnRpZXMgeWV0LgoKICAgIEBtZXRob2QgY29u
        bmVjdAogICAgQHBhcmFtIHtPYmplY3R9IG9iaiBUaGUgcm9vdCBvYmplY3Qg
        Zm9yIHRoaXMgYmluZGluZy4KICAgIEByZXR1cm4ge0VtYmVyLkJpbmRpbmd9
        IGB0aGlzYAogICovCiAgY29ubmVjdDogZnVuY3Rpb24ob2JqKSB7CiAgICBF
        bWJlci5hc3NlcnQoJ011c3QgcGFzcyBhIHZhbGlkIG9iamVjdCB0byBFbWJl
        ci5CaW5kaW5nLmNvbm5lY3QoKScsICEhb2JqKTsKCiAgICB2YXIgZnJvbVBh
        dGggPSB0aGlzLl9mcm9tLCB0b1BhdGggPSB0aGlzLl90bzsKICAgIEVtYmVy
        LnRyeVNldChvYmosIHRvUGF0aCwgZ2V0V2l0aEdsb2JhbHMob2JqLCBmcm9t
        UGF0aCkpOwoKICAgIC8vIGFkZCBhbiBvYnNlcnZlciBvbiB0aGUgb2JqZWN0
        IHRvIGJlIG5vdGlmaWVkIHdoZW4gdGhlIGJpbmRpbmcgc2hvdWxkIGJlIHVw
        ZGF0ZWQKICAgIEVtYmVyLmFkZE9ic2VydmVyKG9iaiwgZnJvbVBhdGgsIHRo
        aXMsIHRoaXMuZnJvbURpZENoYW5nZSk7CgogICAgLy8gaWYgdGhlIGJpbmRp
        bmcgaXMgYSB0d28td2F5IGJpbmRpbmcsIGFsc28gc2V0IHVwIGFuIG9ic2Vy
        dmVyIG9uIHRoZSB0YXJnZXQKICAgIGlmICghdGhpcy5fb25lV2F5KSB7IEVt
        YmVyLmFkZE9ic2VydmVyKG9iaiwgdG9QYXRoLCB0aGlzLCB0aGlzLnRvRGlk
        Q2hhbmdlKTsgfQoKICAgIHRoaXMuX3JlYWR5VG9TeW5jID0gdHJ1ZTsKCiAg
        ICByZXR1cm4gdGhpczsKICB9LAoKICAvKioKICAgIERpc2Nvbm5lY3RzIHRo
        ZSBiaW5kaW5nIGluc3RhbmNlLiBDaGFuZ2VzIHdpbGwgbm8gbG9uZ2VyIGJl
        IHJlbGF5ZWQuIFlvdQogICAgd2lsbCBub3QgdXN1YWxseSBuZWVkIHRvIGNh
        bGwgdGhpcyBtZXRob2QuCgogICAgQG1ldGhvZCBkaXNjb25uZWN0CiAgICBA
        cGFyYW0ge09iamVjdH0gb2JqIFRoZSByb290IG9iamVjdCB5b3UgcGFzc2Vk
        IHdoZW4gY29ubmVjdGluZyB0aGUgYmluZGluZy4KICAgIEByZXR1cm4ge0Vt
        YmVyLkJpbmRpbmd9IGB0aGlzYAogICovCiAgZGlzY29ubmVjdDogZnVuY3Rp
        b24ob2JqKSB7CiAgICBFbWJlci5hc3NlcnQoJ011c3QgcGFzcyBhIHZhbGlk
        IG9iamVjdCB0byBFbWJlci5CaW5kaW5nLmRpc2Nvbm5lY3QoKScsICEhb2Jq
        KTsKCiAgICB2YXIgdHdvV2F5ID0gIXRoaXMuX29uZVdheTsKCiAgICAvLyBy
        ZW1vdmUgYW4gb2JzZXJ2ZXIgb24gdGhlIG9iamVjdCBzbyB3ZSdyZSBubyBs
        b25nZXIgbm90aWZpZWQgb2YKICAgIC8vIGNoYW5nZXMgdGhhdCBzaG91bGQg
        dXBkYXRlIGJpbmRpbmdzLgogICAgRW1iZXIucmVtb3ZlT2JzZXJ2ZXIob2Jq
        LCB0aGlzLl9mcm9tLCB0aGlzLCB0aGlzLmZyb21EaWRDaGFuZ2UpOwoKICAg
        IC8vIGlmIHRoZSBiaW5kaW5nIGlzIHR3by13YXksIHJlbW92ZSB0aGUgb2Jz
        ZXJ2ZXIgZnJvbSB0aGUgdGFyZ2V0IGFzIHdlbGwKICAgIGlmICh0d29XYXkp
        IHsgRW1iZXIucmVtb3ZlT2JzZXJ2ZXIob2JqLCB0aGlzLl90bywgdGhpcywg
        dGhpcy50b0RpZENoYW5nZSk7IH0KCiAgICB0aGlzLl9yZWFkeVRvU3luYyA9
        IGZhbHNlOyAvLyBkaXNhYmxlIHNjaGVkdWxlZCBzeW5jcy4uLgogICAgcmV0
        dXJuIHRoaXM7CiAgfSwKCiAgLy8gLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4u
        Li4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLgogIC8vIFBSSVZB
        VEUKICAvLwoKICAvKiBjYWxsZWQgd2hlbiB0aGUgZnJvbSBzaWRlIGNoYW5n
        ZXMgKi8KICBmcm9tRGlkQ2hhbmdlOiBmdW5jdGlvbih0YXJnZXQpIHsKICAg
        IHRoaXMuX3NjaGVkdWxlU3luYyh0YXJnZXQsICdmd2QnKTsKICB9LAoKICAv
        KiBjYWxsZWQgd2hlbiB0aGUgdG8gc2lkZSBjaGFuZ2VzICovCiAgdG9EaWRD
        aGFuZ2U6IGZ1bmN0aW9uKHRhcmdldCkgewogICAgdGhpcy5fc2NoZWR1bGVT
        eW5jKHRhcmdldCwgJ2JhY2snKTsKICB9LAoKICBfc2NoZWR1bGVTeW5jOiBm
        dW5jdGlvbihvYmosIGRpcikgewogICAgdmFyIGRpcmVjdGlvbk1hcCA9IHRo
        aXMuX2RpcmVjdGlvbk1hcDsKICAgIHZhciBleGlzdGluZ0RpciA9IGRpcmVj
        dGlvbk1hcC5nZXQob2JqKTsKCiAgICAvLyBpZiB3ZSBoYXZlbid0IHNjaGVk
        dWxlZCB0aGUgYmluZGluZyB5ZXQsIHNjaGVkdWxlIGl0CiAgICBpZiAoIWV4
        aXN0aW5nRGlyKSB7CiAgICAgIEVtYmVyLnJ1bi5zY2hlZHVsZSgnc3luYycs
        IHRoaXMsIHRoaXMuX3N5bmMsIG9iaik7CiAgICAgIGRpcmVjdGlvbk1hcC5z
        ZXQob2JqLCBkaXIpOwogICAgfQoKICAgIC8vIElmIGJvdGggYSAnYmFjaycg
        YW5kICdmd2QnIHN5bmMgaGF2ZSBiZWVuIHNjaGVkdWxlZCBvbiB0aGUgc2Ft
        ZSBvYmplY3QsCiAgICAvLyBkZWZhdWx0IHRvIGEgJ2Z3ZCcgc3luYyBzbyB0
        aGF0IGl0IHJlbWFpbnMgZGV0ZXJtaW5pc3RpYy4KICAgIGlmIChleGlzdGlu
        Z0RpciA9PT0gJ2JhY2snICYmIGRpciA9PT0gJ2Z3ZCcpIHsKICAgICAgZGly
        ZWN0aW9uTWFwLnNldChvYmosICdmd2QnKTsKICAgIH0KICB9LAoKICBfc3lu
        YzogZnVuY3Rpb24ob2JqKSB7CiAgICB2YXIgbG9nID0gRW1iZXIuTE9HX0JJ
        TkRJTkdTOwoKICAgIC8vIGRvbid0IHN5bmNocm9uaXplIGRlc3Ryb3llZCBv
        YmplY3RzIG9yIGRpc2Nvbm5lY3RlZCBiaW5kaW5ncwogICAgaWYgKG9iai5p
        c0Rlc3Ryb3llZCB8fCAhdGhpcy5fcmVhZHlUb1N5bmMpIHsgcmV0dXJuOyB9
        CgogICAgLy8gZ2V0IHRoZSBkaXJlY3Rpb24gb2YgdGhlIGJpbmRpbmcgZm9y
        IHRoZSBvYmplY3Qgd2UgYXJlCiAgICAvLyBzeW5jaHJvbml6aW5nIGZyb20K
        ICAgIHZhciBkaXJlY3Rpb25NYXAgPSB0aGlzLl9kaXJlY3Rpb25NYXA7CiAg
        ICB2YXIgZGlyZWN0aW9uID0gZGlyZWN0aW9uTWFwLmdldChvYmopOwoKICAg
        IHZhciBmcm9tUGF0aCA9IHRoaXMuX2Zyb20sIHRvUGF0aCA9IHRoaXMuX3Rv
        OwoKICAgIGRpcmVjdGlvbk1hcC5yZW1vdmUob2JqKTsKCiAgICAvLyBpZiB3
        ZSdyZSBzeW5jaHJvbml6aW5nIGZyb20gdGhlIHJlbW90ZSBvYmplY3QuLi4K
        ICAgIGlmIChkaXJlY3Rpb24gPT09ICdmd2QnKSB7CiAgICAgIHZhciBmcm9t
        VmFsdWUgPSBnZXRXaXRoR2xvYmFscyhvYmosIHRoaXMuX2Zyb20pOwogICAg
        ICBpZiAobG9nKSB7CiAgICAgICAgRW1iZXIuTG9nZ2VyLmxvZygnICcsIHRo
        aXMudG9TdHJpbmcoKSwgJy0+JywgZnJvbVZhbHVlLCBvYmopOwogICAgICB9
        CiAgICAgIGlmICh0aGlzLl9vbmVXYXkpIHsKICAgICAgICBFbWJlci50cnlT
        ZXQob2JqLCB0b1BhdGgsIGZyb21WYWx1ZSk7CiAgICAgIH0gZWxzZSB7CiAg
        ICAgICAgRW1iZXIuX3N1c3BlbmRPYnNlcnZlcihvYmosIHRvUGF0aCwgdGhp
        cywgdGhpcy50b0RpZENoYW5nZSwgZnVuY3Rpb24gKCkgewogICAgICAgICAg
        RW1iZXIudHJ5U2V0KG9iaiwgdG9QYXRoLCBmcm9tVmFsdWUpOwogICAgICAg
        IH0pOwogICAgICB9CiAgICAvLyBpZiB3ZSdyZSBzeW5jaHJvbml6aW5nICp0
        byogdGhlIHJlbW90ZSBvYmplY3QKICAgIH0gZWxzZSBpZiAoZGlyZWN0aW9u
        ID09PSAnYmFjaycpIHsKICAgICAgdmFyIHRvVmFsdWUgPSBnZXQob2JqLCB0
        aGlzLl90byk7CiAgICAgIGlmIChsb2cpIHsKICAgICAgICBFbWJlci5Mb2dn
        ZXIubG9nKCcgJywgdGhpcy50b1N0cmluZygpLCAnPC0nLCB0b1ZhbHVlLCBv
        YmopOwogICAgICB9CiAgICAgIEVtYmVyLl9zdXNwZW5kT2JzZXJ2ZXIob2Jq
        LCBmcm9tUGF0aCwgdGhpcywgdGhpcy5mcm9tRGlkQ2hhbmdlLCBmdW5jdGlv
        biAoKSB7CiAgICAgICAgRW1iZXIudHJ5U2V0KEVtYmVyLmlzR2xvYmFsUGF0
        aChmcm9tUGF0aCkgPyBFbWJlci5sb29rdXAgOiBvYmosIGZyb21QYXRoLCB0
        b1ZhbHVlKTsKICAgICAgfSk7CiAgICB9CiAgfQoKfTsKCmZ1bmN0aW9uIG1p
        eGluUHJvcGVydGllcyh0bywgZnJvbSkgewogIGZvciAodmFyIGtleSBpbiBm
        cm9tKSB7CiAgICBpZiAoZnJvbS5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7CiAg
        ICAgIHRvW2tleV0gPSBmcm9tW2tleV07CiAgICB9CiAgfQp9CgptaXhpblBy
        b3BlcnRpZXMoQmluZGluZywgewoKICAvKgogICAgU2VlIGBFbWJlci5CaW5k
        aW5nLmZyb21gLgoKICAgIEBtZXRob2QgZnJvbQogICAgQHN0YXRpYwogICov
        CiAgZnJvbTogZnVuY3Rpb24oKSB7CiAgICB2YXIgQyA9IHRoaXMsIGJpbmRp
        bmcgPSBuZXcgQygpOwogICAgcmV0dXJuIGJpbmRpbmcuZnJvbS5hcHBseShi
        aW5kaW5nLCBhcmd1bWVudHMpOwogIH0sCgogIC8qCiAgICBTZWUgYEVtYmVy
        LkJpbmRpbmcudG9gLgoKICAgIEBtZXRob2QgdG8KICAgIEBzdGF0aWMKICAq
        LwogIHRvOiBmdW5jdGlvbigpIHsKICAgIHZhciBDID0gdGhpcywgYmluZGlu
        ZyA9IG5ldyBDKCk7CiAgICByZXR1cm4gYmluZGluZy50by5hcHBseShiaW5k
        aW5nLCBhcmd1bWVudHMpOwogIH0sCgogIC8qKgogICAgQ3JlYXRlcyBhIG5l
        dyBCaW5kaW5nIGluc3RhbmNlIGFuZCBtYWtlcyBpdCBhcHBseSBpbiBhIHNp
        bmdsZSBkaXJlY3Rpb24uCiAgICBBIG9uZS13YXkgYmluZGluZyB3aWxsIHJl
        bGF5IGNoYW5nZXMgb24gdGhlIGBmcm9tYCBzaWRlIG9iamVjdCAoc3VwcGxp
        ZWQKICAgIGFzIHRoZSBgZnJvbWAgYXJndW1lbnQpIHRoZSBgdG9gIHNpZGUs
        IGJ1dCBub3QgdGhlIG90aGVyIHdheSBhcm91bmQuCiAgICBUaGlzIG1lYW5z
        IHRoYXQgaWYgeW91IGNoYW5nZSB0aGUgInRvIiBzaWRlIGRpcmVjdGx5LCB0
        aGUgImZyb20iIHNpZGUgbWF5IGhhdmUKICAgIGEgZGlmZmVyZW50IHZhbHVl
        LgoKICAgIFNlZSBgQmluZGluZy5vbmVXYXlgLgoKICAgIEBtZXRob2Qgb25l
        V2F5CiAgICBAcGFyYW0ge1N0cmluZ30gZnJvbSBmcm9tIHBhdGguCiAgICBA
        cGFyYW0ge0Jvb2xlYW59IFtmbGFnXSAoT3B0aW9uYWwpIHBhc3Npbmcgbm90
        aGluZyBoZXJlIHdpbGwgbWFrZSB0aGUKICAgICAgYmluZGluZyBgb25lV2F5
        YC4gWW91IGNhbiBpbnN0ZWFkIHBhc3MgYGZhbHNlYCB0byBkaXNhYmxlIGBv
        bmVXYXlgLCBtYWtpbmcgdGhlCiAgICAgIGJpbmRpbmcgdHdvIHdheSBhZ2Fp
        bi4KICAgIEByZXR1cm4ge0VtYmVyLkJpbmRpbmd9IGB0aGlzYAogICovCiAg
        b25lV2F5OiBmdW5jdGlvbihmcm9tLCBmbGFnKSB7CiAgICB2YXIgQyA9IHRo
        aXMsIGJpbmRpbmcgPSBuZXcgQyhudWxsLCBmcm9tKTsKICAgIHJldHVybiBi
        aW5kaW5nLm9uZVdheShmbGFnKTsKICB9Cgp9KTsKCi8qKgogIEFuIGBFbWJl
        ci5CaW5kaW5nYCBjb25uZWN0cyB0aGUgcHJvcGVydGllcyBvZiB0d28gb2Jq
        ZWN0cyBzbyB0aGF0IHdoZW5ldmVyCiAgdGhlIHZhbHVlIG9mIG9uZSBwcm9w
        ZXJ0eSBjaGFuZ2VzLCB0aGUgb3RoZXIgcHJvcGVydHkgd2lsbCBiZSBjaGFu
        Z2VkIGFsc28uCgogICMjIEF1dG9tYXRpYyBDcmVhdGlvbiBvZiBCaW5kaW5n
        cyB3aXRoIGAvXipCaW5kaW5nL2AtbmFtZWQgUHJvcGVydGllcwoKICBZb3Ug
        ZG8gbm90IHVzdWFsbHkgY3JlYXRlIEJpbmRpbmcgb2JqZWN0cyBkaXJlY3Rs
        eSBidXQgaW5zdGVhZCBkZXNjcmliZQogIGJpbmRpbmdzIGluIHlvdXIgY2xh
        c3Mgb3Igb2JqZWN0IGRlZmluaXRpb24gdXNpbmcgYXV0b21hdGljIGJpbmRp
        bmcKICBkZXRlY3Rpb24uCgogIFByb3BlcnRpZXMgZW5kaW5nIGluIGEgYEJp
        bmRpbmdgIHN1ZmZpeCB3aWxsIGJlIGNvbnZlcnRlZCB0byBgRW1iZXIuQmlu
        ZGluZ2AKICBpbnN0YW5jZXMuIFRoZSB2YWx1ZSBvZiB0aGlzIHByb3BlcnR5
        IHNob3VsZCBiZSBhIHN0cmluZyByZXByZXNlbnRpbmcgYSBwYXRoCiAgdG8g
        YW5vdGhlciBvYmplY3Qgb3IgYSBjdXN0b20gYmluZGluZyBpbnN0YW5jZWQg
        Y3JlYXRlZCB1c2luZyBCaW5kaW5nIGhlbHBlcnMKICAoc2VlICJPbmUgV2F5
        IEJpbmRpbmdzIik6CgogIGBgYAogIHZhbHVlQmluZGluZzogIk15QXBwLnNv
        bWVDb250cm9sbGVyLnRpdGxlIgogIGBgYAoKICBUaGlzIHdpbGwgY3JlYXRl
        IGEgYmluZGluZyBmcm9tIGBNeUFwcC5zb21lQ29udHJvbGxlci50aXRsZWAg
        dG8gdGhlIGB2YWx1ZWAKICBwcm9wZXJ0eSBvZiB5b3VyIG9iamVjdCBpbnN0
        YW5jZSBhdXRvbWF0aWNhbGx5LiBOb3cgdGhlIHR3byB2YWx1ZXMgd2lsbCBi
        ZQogIGtlcHQgaW4gc3luYy4KCiAgIyMgT25lIFdheSBCaW5kaW5ncwoKICBP
        bmUgZXNwZWNpYWxseSB1c2VmdWwgYmluZGluZyBjdXN0b21pemF0aW9uIHlv
        dSBjYW4gdXNlIGlzIHRoZSBgb25lV2F5KClgCiAgaGVscGVyLiBUaGlzIGhl
        bHBlciB0ZWxscyBFbWJlciB0aGF0IHlvdSBhcmUgb25seSBpbnRlcmVzdGVk
        IGluCiAgcmVjZWl2aW5nIGNoYW5nZXMgb24gdGhlIG9iamVjdCB5b3UgYXJl
        IGJpbmRpbmcgZnJvbS4gRm9yIGV4YW1wbGUsIGlmIHlvdQogIGFyZSBiaW5k
        aW5nIHRvIGEgcHJlZmVyZW5jZSBhbmQgeW91IHdhbnQgdG8gYmUgbm90aWZp
        ZWQgaWYgdGhlIHByZWZlcmVuY2UKICBoYXMgY2hhbmdlZCwgYnV0IHlvdXIg
        b2JqZWN0IHdpbGwgbm90IGJlIGNoYW5naW5nIHRoZSBwcmVmZXJlbmNlIGl0
        c2VsZiwgeW91CiAgY291bGQgZG86CgogIGBgYAogIGJpZ1RpdGxlc0JpbmRp
        bmc6IEVtYmVyLkJpbmRpbmcub25lV2F5KCJNeUFwcC5wcmVmZXJlbmNlc0Nv
        bnRyb2xsZXIuYmlnVGl0bGVzIikKICBgYGAKCiAgVGhpcyB3YXkgaWYgdGhl
        IHZhbHVlIG9mIGBNeUFwcC5wcmVmZXJlbmNlc0NvbnRyb2xsZXIuYmlnVGl0
        bGVzYCBjaGFuZ2VzIHRoZQogIGBiaWdUaXRsZXNgIHByb3BlcnR5IG9mIHlv
        dXIgb2JqZWN0IHdpbGwgY2hhbmdlIGFsc28uIEhvd2V2ZXIsIGlmIHlvdQog
        IGNoYW5nZSB0aGUgdmFsdWUgb2YgeW91ciBgYmlnVGl0bGVzYCBwcm9wZXJ0
        eSwgaXQgd2lsbCBub3QgdXBkYXRlIHRoZQogIGBwcmVmZXJlbmNlc0NvbnRy
        b2xsZXJgLgoKICBPbmUgd2F5IGJpbmRpbmdzIGFyZSBhbG1vc3QgdHdpY2Ug
        YXMgZmFzdCB0byBzZXR1cCBhbmQgdHdpY2UgYXMgZmFzdCB0bwogIGV4ZWN1
        dGUgYmVjYXVzZSB0aGUgYmluZGluZyBvbmx5IGhhcyB0byB3b3JyeSBhYm91
        dCBjaGFuZ2VzIHRvIG9uZSBzaWRlLgoKICBZb3Ugc2hvdWxkIGNvbnNpZGVy
        IHVzaW5nIG9uZSB3YXkgYmluZGluZ3MgYW55dGltZSB5b3UgaGF2ZSBhbiBv
        YmplY3QgdGhhdAogIG1heSBiZSBjcmVhdGVkIGZyZXF1ZW50bHkgYW5kIHlv
        dSBkbyBub3QgaW50ZW5kIHRvIGNoYW5nZSBhIHByb3BlcnR5OyBvbmx5CiAg
        dG8gbW9uaXRvciBpdCBmb3IgY2hhbmdlcyAoc3VjaCBhcyBpbiB0aGUgZXhh
        bXBsZSBhYm92ZSkuCgogICMjIEFkZGluZyBCaW5kaW5ncyBNYW51YWxseQoK
        ICBBbGwgb2YgdGhlIGV4YW1wbGVzIGFib3ZlIHNob3cgeW91IGhvdyB0byBj
        b25maWd1cmUgYSBjdXN0b20gYmluZGluZywgYnV0IHRoZQogIHJlc3VsdCBv
        ZiB0aGVzZSBjdXN0b21pemF0aW9ucyB3aWxsIGJlIGEgYmluZGluZyB0ZW1w
        bGF0ZSwgbm90IGEgZnVsbHkgYWN0aXZlCiAgQmluZGluZyBpbnN0YW5jZS4g
        VGhlIGJpbmRpbmcgd2lsbCBhY3R1YWxseSBiZWNvbWUgYWN0aXZlIG9ubHkg
        d2hlbiB5b3UKICBpbnN0YW50aWF0ZSB0aGUgb2JqZWN0IHRoZSBiaW5kaW5n
        IGJlbG9uZ3MgdG8uIEl0IGlzIHVzZWZ1bCBob3dldmVyLCB0bwogIHVuZGVy
        c3RhbmQgd2hhdCBhY3R1YWxseSBoYXBwZW5zIHdoZW4gdGhlIGJpbmRpbmcg
        aXMgYWN0aXZhdGVkLgoKICBGb3IgYSBiaW5kaW5nIHRvIGZ1bmN0aW9uIGl0
        IG11c3QgaGF2ZSBhdCBsZWFzdCBhIGBmcm9tYCBwcm9wZXJ0eSBhbmQgYSBg
        dG9gCiAgcHJvcGVydHkuIFRoZSBgZnJvbWAgcHJvcGVydHkgcGF0aCBwb2lu
        dHMgdG8gdGhlIG9iamVjdC9rZXkgdGhhdCB5b3Ugd2FudCB0bwogIGJpbmQg
        ZnJvbSB3aGlsZSB0aGUgYHRvYCBwYXRoIHBvaW50cyB0byB0aGUgb2JqZWN0
        L2tleSB5b3Ugd2FudCB0byBiaW5kIHRvLgoKICBXaGVuIHlvdSBkZWZpbmUg
        YSBjdXN0b20gYmluZGluZywgeW91IGFyZSB1c3VhbGx5IGRlc2NyaWJpbmcg
        dGhlIHByb3BlcnR5CiAgeW91IHdhbnQgdG8gYmluZCBmcm9tIChzdWNoIGFz
        IGBNeUFwcC5zb21lQ29udHJvbGxlci52YWx1ZWAgaW4gdGhlIGV4YW1wbGVz
        CiAgYWJvdmUpLiBXaGVuIHlvdXIgb2JqZWN0IGlzIGNyZWF0ZWQsIGl0IHdp
        bGwgYXV0b21hdGljYWxseSBhc3NpZ24gdGhlIHZhbHVlCiAgeW91IHdhbnQg
        dG8gYmluZCBgdG9gIGJhc2VkIG9uIHRoZSBuYW1lIG9mIHlvdXIgYmluZGlu
        ZyBrZXkuIEluIHRoZQogIGV4YW1wbGVzIGFib3ZlLCBkdXJpbmcgaW5pdCwg
        RW1iZXIgb2JqZWN0cyB3aWxsIGVmZmVjdGl2ZWx5IGNhbGwKICBzb21ldGhp
        bmcgbGlrZSB0aGlzIG9uIHlvdXIgYmluZGluZzoKCiAgYGBgamF2YXNjcmlw
        dAogIGJpbmRpbmcgPSBFbWJlci5CaW5kaW5nLmZyb20odGhpcy52YWx1ZUJp
        bmRpbmcpLnRvKCJ2YWx1ZSIpOwogIGBgYAoKICBUaGlzIGNyZWF0ZXMgYSBu
        ZXcgYmluZGluZyBpbnN0YW5jZSBiYXNlZCBvbiB0aGUgdGVtcGxhdGUgeW91
        IHByb3ZpZGUsIGFuZAogIHNldHMgdGhlIHRvIHBhdGggdG8gdGhlIGB2YWx1
        ZWAgcHJvcGVydHkgb2YgdGhlIG5ldyBvYmplY3QuIE5vdyB0aGF0IHRoZQog
        IGJpbmRpbmcgaXMgZnVsbHkgY29uZmlndXJlZCB3aXRoIGEgYGZyb21gIGFu
        ZCBhIGB0b2AsIGl0IHNpbXBseSBuZWVkcyB0byBiZQogIGNvbm5lY3RlZCB0
        byBiZWNvbWUgYWN0aXZlLiBUaGlzIGlzIGRvbmUgdGhyb3VnaCB0aGUgYGNv
        bm5lY3QoKWAgbWV0aG9kOgoKICBgYGBqYXZhc2NyaXB0CiAgYmluZGluZy5j
        b25uZWN0KHRoaXMpOwogIGBgYAoKICBOb3RlIHRoYXQgd2hlbiB5b3UgY29u
        bmVjdCBhIGJpbmRpbmcgeW91IHBhc3MgdGhlIG9iamVjdCB5b3Ugd2FudCBp
        dCB0byBiZQogIGNvbm5lY3RlZCB0by4gVGhpcyBvYmplY3Qgd2lsbCBiZSB1
        c2VkIGFzIHRoZSByb290IGZvciBib3RoIHRoZSBmcm9tIGFuZAogIHRvIHNp
        ZGUgb2YgdGhlIGJpbmRpbmcgd2hlbiBpbnNwZWN0aW5nIHJlbGF0aXZlIHBh
        dGhzLiBUaGlzIGFsbG93cyB0aGUKICBiaW5kaW5nIHRvIGJlIGF1dG9tYXRp
        Y2FsbHkgaW5oZXJpdGVkIGJ5IHN1YmNsYXNzZWQgb2JqZWN0cyBhcyB3ZWxs
        LgoKICBOb3cgdGhhdCB0aGUgYmluZGluZyBpcyBjb25uZWN0ZWQsIGl0IHdp
        bGwgb2JzZXJ2ZSBib3RoIHRoZSBmcm9tIGFuZCB0byBzaWRlCiAgYW5kIHJl
        bGF5IGNoYW5nZXMuCgogIElmIHlvdSBldmVyIG5lZWRlZCB0byBkbyBzbyAo
        eW91IGFsbW9zdCBuZXZlciB3aWxsLCBidXQgaXQgaXMgdXNlZnVsIHRvCiAg
        dW5kZXJzdGFuZCB0aGlzIGFueXdheSksIHlvdSBjb3VsZCBtYW51YWxseSBj
        cmVhdGUgYW4gYWN0aXZlIGJpbmRpbmcgYnkKICB1c2luZyB0aGUgYEVtYmVy
        LmJpbmQoKWAgaGVscGVyIG1ldGhvZC4gKFRoaXMgaXMgdGhlIHNhbWUgbWV0
        aG9kIHVzZWQgYnkKICB0byBzZXR1cCB5b3VyIGJpbmRpbmdzIG9uIG9iamVj
        dHMpOgoKICBgYGBqYXZhc2NyaXB0CiAgRW1iZXIuYmluZChNeUFwcC5hbm90
        aGVyT2JqZWN0LCAidmFsdWUiLCAiTXlBcHAuc29tZUNvbnRyb2xsZXIudmFs
        dWUiKTsKICBgYGAKCiAgQm90aCBvZiB0aGVzZSBjb2RlIGZyYWdtZW50cyBo
        YXZlIHRoZSBzYW1lIGVmZmVjdCBhcyBkb2luZyB0aGUgbW9zdCBmcmllbmRs
        eQogIGZvcm0gb2YgYmluZGluZyBjcmVhdGlvbiBsaWtlIHNvOgoKICBgYGBq
        YXZhc2NyaXB0CiAgTXlBcHAuYW5vdGhlck9iamVjdCA9IEVtYmVyLk9iamVj
        dC5jcmVhdGUoewogICAgdmFsdWVCaW5kaW5nOiAiTXlBcHAuc29tZUNvbnRy
        b2xsZXIudmFsdWUiLAoKICAgIC8vIE9USEVSIENPREUgRk9SIFRISVMgT0JK
        RUNULi4uCiAgfSk7CiAgYGBgCgogIEVtYmVyJ3MgYnVpbHQgaW4gYmluZGlu
        ZyBjcmVhdGlvbiBtZXRob2QgbWFrZXMgaXQgZWFzeSB0byBhdXRvbWF0aWNh
        bGx5CiAgY3JlYXRlIGJpbmRpbmdzIGZvciB5b3UuIFlvdSBzaG91bGQgYWx3
        YXlzIHVzZSB0aGUgaGlnaGVzdC1sZXZlbCBBUElzCiAgYXZhaWxhYmxlLCBl
        dmVuIGlmIHlvdSB1bmRlcnN0YW5kIGhvdyBpdCB3b3JrcyB1bmRlcm5lYXRo
        LgoKICBAY2xhc3MgQmluZGluZwogIEBuYW1lc3BhY2UgRW1iZXIKICBAc2lu
        Y2UgRW1iZXIgMC45CiovCkVtYmVyLkJpbmRpbmcgPSBCaW5kaW5nOwoKCi8q
        KgogIEdsb2JhbCBoZWxwZXIgbWV0aG9kIHRvIGNyZWF0ZSBhIG5ldyBiaW5k
        aW5nLiBKdXN0IHBhc3MgdGhlIHJvb3Qgb2JqZWN0CiAgYWxvbmcgd2l0aCBh
        IGB0b2AgYW5kIGBmcm9tYCBwYXRoIHRvIGNyZWF0ZSBhbmQgY29ubmVjdCB0
        aGUgYmluZGluZy4KCiAgQG1ldGhvZCBiaW5kCiAgQGZvciBFbWJlcgogIEBw
        YXJhbSB7T2JqZWN0fSBvYmogVGhlIHJvb3Qgb2JqZWN0IG9mIHRoZSB0cmFu
        c2Zvcm0uCiAgQHBhcmFtIHtTdHJpbmd9IHRvIFRoZSBwYXRoIHRvIHRoZSAn
        dG8nIHNpZGUgb2YgdGhlIGJpbmRpbmcuCiAgICBNdXN0IGJlIHJlbGF0aXZl
        IHRvIG9iai4KICBAcGFyYW0ge1N0cmluZ30gZnJvbSBUaGUgcGF0aCB0byB0
        aGUgJ2Zyb20nIHNpZGUgb2YgdGhlIGJpbmRpbmcuCiAgICBNdXN0IGJlIHJl
        bGF0aXZlIHRvIG9iaiBvciBhIGdsb2JhbCBwYXRoLgogIEByZXR1cm4ge0Vt
        YmVyLkJpbmRpbmd9IGJpbmRpbmcgaW5zdGFuY2UKKi8KRW1iZXIuYmluZCA9
        IGZ1bmN0aW9uKG9iaiwgdG8sIGZyb20pIHsKICByZXR1cm4gbmV3IEVtYmVy
        LkJpbmRpbmcodG8sIGZyb20pLmNvbm5lY3Qob2JqKTsKfTsKCi8qKgogIEBt
        ZXRob2Qgb25lV2F5CiAgQGZvciBFbWJlcgogIEBwYXJhbSB7T2JqZWN0fSBv
        YmogVGhlIHJvb3Qgb2JqZWN0IG9mIHRoZSB0cmFuc2Zvcm0uCiAgQHBhcmFt
        IHtTdHJpbmd9IHRvIFRoZSBwYXRoIHRvIHRoZSAndG8nIHNpZGUgb2YgdGhl
        IGJpbmRpbmcuCiAgICBNdXN0IGJlIHJlbGF0aXZlIHRvIG9iai4KICBAcGFy
        YW0ge1N0cmluZ30gZnJvbSBUaGUgcGF0aCB0byB0aGUgJ2Zyb20nIHNpZGUg
        b2YgdGhlIGJpbmRpbmcuCiAgICBNdXN0IGJlIHJlbGF0aXZlIHRvIG9iaiBv
        ciBhIGdsb2JhbCBwYXRoLgogIEByZXR1cm4ge0VtYmVyLkJpbmRpbmd9IGJp
        bmRpbmcgaW5zdGFuY2UKKi8KRW1iZXIub25lV2F5ID0gZnVuY3Rpb24ob2Jq
        LCB0bywgZnJvbSkgewogIHJldHVybiBuZXcgRW1iZXIuQmluZGluZyh0bywg
        ZnJvbSkub25lV2F5KCkuY29ubmVjdChvYmopOwp9OwoKfSkoKTsKCgoKKGZ1
        bmN0aW9uKCkgewovKioKQG1vZHVsZSBlbWJlcgpAc3VibW9kdWxlIGVtYmVy
        LW1ldGFsCiovCgp2YXIgTWl4aW4sIFJFUVVJUkVELCBBbGlhcywKICAgIGFf
        bWFwID0gRW1iZXIuQXJyYXlQb2x5ZmlsbHMubWFwLAogICAgYV9pbmRleE9m
        ID0gRW1iZXIuQXJyYXlQb2x5ZmlsbHMuaW5kZXhPZiwKICAgIGFfZm9yRWFj
        aCA9IEVtYmVyLkFycmF5UG9seWZpbGxzLmZvckVhY2gsCiAgICBhX3NsaWNl
        ID0gW10uc2xpY2UsCiAgICBvX2NyZWF0ZSA9IEVtYmVyLmNyZWF0ZSwKICAg
        IGRlZmluZVByb3BlcnR5ID0gRW1iZXIuZGVmaW5lUHJvcGVydHksCiAgICBn
        dWlkRm9yID0gRW1iZXIuZ3VpZEZvciwKICAgIG1ldGFGb3IgPSBFbWJlci5t
        ZXRhLAogICAgTUVUQV9LRVkgPSBFbWJlci5NRVRBX0tFWTsKCnZhciBleHBh
        bmRQcm9wZXJ0aWVzID0gRW1iZXIuZXhwYW5kUHJvcGVydGllczsKCmZ1bmN0
        aW9uIG1peGluc01ldGEob2JqKSB7CiAgdmFyIG0gPSBtZXRhRm9yKG9iaiwg
        dHJ1ZSksIHJldCA9IG0ubWl4aW5zOwogIGlmICghcmV0KSB7CiAgICByZXQg
        PSBtLm1peGlucyA9IHt9OwogIH0gZWxzZSBpZiAoIW0uaGFzT3duUHJvcGVy
        dHkoJ21peGlucycpKSB7CiAgICByZXQgPSBtLm1peGlucyA9IG9fY3JlYXRl
        KHJldCk7CiAgfQogIHJldHVybiByZXQ7Cn0KCmZ1bmN0aW9uIGluaXRNaXhp
        bihtaXhpbiwgYXJncykgewogIGlmIChhcmdzICYmIGFyZ3MubGVuZ3RoID4g
        MCkgewogICAgbWl4aW4ubWl4aW5zID0gYV9tYXAuY2FsbChhcmdzLCBmdW5j
        dGlvbih4KSB7CiAgICAgIGlmICh4IGluc3RhbmNlb2YgTWl4aW4pIHsgcmV0
        dXJuIHg7IH0KCiAgICAgIC8vIE5vdGU6IE1hbnVhbGx5IHNldHVwIGEgcHJp
        bWl0aXZlIG1peGluIGhlcmUuIFRoaXMgaXMgdGhlIG9ubHkKICAgICAgLy8g
        d2F5IHRvIGFjdHVhbGx5IGdldCBhIHByaW1pdGl2ZSBtaXhpbi4gVGhpcyB3
        YXkgbm9ybWFsIGNyZWF0aW9uCiAgICAgIC8vIG9mIG1peGlucyB3aWxsIGdp
        dmUgeW91IGNvbWJpbmVkIG1peGlucy4uLgogICAgICB2YXIgbWl4aW4gPSBu
        ZXcgTWl4aW4oKTsKICAgICAgbWl4aW4ucHJvcGVydGllcyA9IHg7CiAgICAg
        IHJldHVybiBtaXhpbjsKICAgIH0pOwogIH0KICByZXR1cm4gbWl4aW47Cn0K
        CmZ1bmN0aW9uIGlzTWV0aG9kKG9iaikgewogIHJldHVybiAnZnVuY3Rpb24n
        ID09PSB0eXBlb2Ygb2JqICYmCiAgICAgICAgIG9iai5pc01ldGhvZCAhPT0g
        ZmFsc2UgJiYKICAgICAgICAgb2JqICE9PSBCb29sZWFuICYmIG9iaiAhPT0g
        T2JqZWN0ICYmIG9iaiAhPT0gTnVtYmVyICYmIG9iaiAhPT0gQXJyYXkgJiYg
        b2JqICE9PSBEYXRlICYmIG9iaiAhPT0gU3RyaW5nOwp9Cgp2YXIgQ09OVElO
        VUUgPSB7fTsKCmZ1bmN0aW9uIG1peGluUHJvcGVydGllcyhtaXhpbnNNZXRh
        LCBtaXhpbikgewogIHZhciBndWlkOwoKICBpZiAobWl4aW4gaW5zdGFuY2Vv
        ZiBNaXhpbikgewogICAgZ3VpZCA9IGd1aWRGb3IobWl4aW4pOwogICAgaWYg
        KG1peGluc01ldGFbZ3VpZF0pIHsgcmV0dXJuIENPTlRJTlVFOyB9CiAgICBt
        aXhpbnNNZXRhW2d1aWRdID0gbWl4aW47CiAgICByZXR1cm4gbWl4aW4ucHJv
        cGVydGllczsKICB9IGVsc2UgewogICAgcmV0dXJuIG1peGluOyAvLyBhcHBs
        eSBhbm9ueW1vdXMgbWl4aW4gcHJvcGVydGllcwogIH0KfQoKZnVuY3Rpb24g
        Y29uY2F0ZW5hdGVkTWl4aW5Qcm9wZXJ0aWVzKGNvbmNhdFByb3AsIHByb3Bz
        LCB2YWx1ZXMsIGJhc2UpIHsKICB2YXIgY29uY2F0czsKCiAgLy8gcmVzZXQg
        YmVmb3JlIGFkZGluZyBlYWNoIG5ldyBtaXhpbiB0byBwaWNrdXAgY29uY2F0
        cyBmcm9tIHByZXZpb3VzCiAgY29uY2F0cyA9IHZhbHVlc1tjb25jYXRQcm9w
        XSB8fCBiYXNlW2NvbmNhdFByb3BdOwogIGlmIChwcm9wc1tjb25jYXRQcm9w
        XSkgewogICAgY29uY2F0cyA9IGNvbmNhdHMgPyBjb25jYXRzLmNvbmNhdChw
        cm9wc1tjb25jYXRQcm9wXSkgOiBwcm9wc1tjb25jYXRQcm9wXTsKICB9Cgog
        IHJldHVybiBjb25jYXRzOwp9CgpmdW5jdGlvbiBnaXZlRGVzY3JpcHRvclN1
        cGVyKG1ldGEsIGtleSwgcHJvcGVydHksIHZhbHVlcywgZGVzY3MpIHsKICB2
        YXIgc3VwZXJQcm9wZXJ0eTsKCiAgLy8gQ29tcHV0ZWQgcHJvcGVydGllcyBv
        dmVycmlkZSBtZXRob2RzLCBhbmQgZG8gbm90IGNhbGwgc3VwZXIgdG8gdGhl
        bQogIGlmICh2YWx1ZXNba2V5XSA9PT0gdW5kZWZpbmVkKSB7CiAgICAvLyBG
        aW5kIHRoZSBvcmlnaW5hbCBkZXNjcmlwdG9yIGluIGEgcGFyZW50IG1peGlu
        CiAgICBzdXBlclByb3BlcnR5ID0gZGVzY3Nba2V5XTsKICB9CgogIC8vIElm
        IHdlIGRpZG4ndCBmaW5kIHRoZSBvcmlnaW5hbCBkZXNjcmlwdG9yIGluIGEg
        cGFyZW50IG1peGluLCBmaW5kCiAgLy8gaXQgb24gdGhlIG9yaWdpbmFsIG9i
        amVjdC4KICBzdXBlclByb3BlcnR5ID0gc3VwZXJQcm9wZXJ0eSB8fCBtZXRh
        LmRlc2NzW2tleV07CgogIGlmICghc3VwZXJQcm9wZXJ0eSB8fCAhKHN1cGVy
        UHJvcGVydHkgaW5zdGFuY2VvZiBFbWJlci5Db21wdXRlZFByb3BlcnR5KSkg
        ewogICAgcmV0dXJuIHByb3BlcnR5OwogIH0KCiAgLy8gU2luY2UgbXVsdGlw
        bGUgbWl4aW5zIG1heSBpbmhlcml0IGZyb20gdGhlIHNhbWUgcGFyZW50LCB3
        ZSBuZWVkCiAgLy8gdG8gY2xvbmUgdGhlIGNvbXB1dGVkIHByb3BlcnR5IHNv
        IHRoYXQgb3RoZXIgbWl4aW5zIGRvIG5vdCByZWNlaXZlCiAgLy8gdGhlIHdy
        YXBwZWQgdmVyc2lvbi4KICBwcm9wZXJ0eSA9IG9fY3JlYXRlKHByb3BlcnR5
        KTsKICBwcm9wZXJ0eS5mdW5jID0gRW1iZXIud3JhcChwcm9wZXJ0eS5mdW5j
        LCBzdXBlclByb3BlcnR5LmZ1bmMpOwoKICByZXR1cm4gcHJvcGVydHk7Cn0K
        CmZ1bmN0aW9uIGdpdmVNZXRob2RTdXBlcihvYmosIGtleSwgbWV0aG9kLCB2
        YWx1ZXMsIGRlc2NzKSB7CiAgdmFyIHN1cGVyTWV0aG9kOwoKICAvLyBNZXRo
        b2RzIG92ZXJ3cml0ZSBjb21wdXRlZCBwcm9wZXJ0aWVzLCBhbmQgZG8gbm90
        IGNhbGwgc3VwZXIgdG8gdGhlbS4KICBpZiAoZGVzY3Nba2V5XSA9PT0gdW5k
        ZWZpbmVkKSB7CiAgICAvLyBGaW5kIHRoZSBvcmlnaW5hbCBtZXRob2QgaW4g
        YSBwYXJlbnQgbWl4aW4KICAgIHN1cGVyTWV0aG9kID0gdmFsdWVzW2tleV07
        CiAgfQoKICAvLyBJZiB3ZSBkaWRuJ3QgZmluZCB0aGUgb3JpZ2luYWwgdmFs
        dWUgaW4gYSBwYXJlbnQgbWl4aW4sIGZpbmQgaXQgaW4KICAvLyB0aGUgb3Jp
        Z2luYWwgb2JqZWN0CiAgc3VwZXJNZXRob2QgPSBzdXBlck1ldGhvZCB8fCBv
        Ympba2V5XTsKCiAgLy8gT25seSB3cmFwIHRoZSBuZXcgbWV0aG9kIGlmIHRo
        ZSBvcmlnaW5hbCBtZXRob2Qgd2FzIGEgZnVuY3Rpb24KICBpZiAoJ2Z1bmN0
        aW9uJyAhPT0gdHlwZW9mIHN1cGVyTWV0aG9kKSB7CiAgICByZXR1cm4gbWV0
        aG9kOwogIH0KCiAgcmV0dXJuIEVtYmVyLndyYXAobWV0aG9kLCBzdXBlck1l
        dGhvZCk7Cn0KCmZ1bmN0aW9uIGFwcGx5Q29uY2F0ZW5hdGVkUHJvcGVydGll
        cyhvYmosIGtleSwgdmFsdWUsIHZhbHVlcykgewogIHZhciBiYXNlVmFsdWUg
        PSB2YWx1ZXNba2V5XSB8fCBvYmpba2V5XTsKCiAgaWYgKGJhc2VWYWx1ZSkg
        ewogICAgaWYgKCdmdW5jdGlvbicgPT09IHR5cGVvZiBiYXNlVmFsdWUuY29u
        Y2F0KSB7CiAgICAgIHJldHVybiBiYXNlVmFsdWUuY29uY2F0KHZhbHVlKTsK
        ICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiBFbWJlci5tYWtlQXJyYXkoYmFz
        ZVZhbHVlKS5jb25jYXQodmFsdWUpOwogICAgfQogIH0gZWxzZSB7CiAgICBy
        ZXR1cm4gRW1iZXIubWFrZUFycmF5KHZhbHVlKTsKICB9Cn0KCmZ1bmN0aW9u
        IGFwcGx5TWVyZ2VkUHJvcGVydGllcyhvYmosIGtleSwgdmFsdWUsIHZhbHVl
        cykgewogIHZhciBiYXNlVmFsdWUgPSB2YWx1ZXNba2V5XSB8fCBvYmpba2V5
        XTsKCiAgaWYgKCFiYXNlVmFsdWUpIHsgcmV0dXJuIHZhbHVlOyB9CgogIHZh
        ciBuZXdCYXNlID0gRW1iZXIubWVyZ2Uoe30sIGJhc2VWYWx1ZSk7CiAgZm9y
        ICh2YXIgcHJvcCBpbiB2YWx1ZSkgewogICAgaWYgKCF2YWx1ZS5oYXNPd25Q
        cm9wZXJ0eShwcm9wKSkgeyBjb250aW51ZTsgfQoKICAgIHZhciBwcm9wVmFs
        dWUgPSB2YWx1ZVtwcm9wXTsKICAgIGlmIChpc01ldGhvZChwcm9wVmFsdWUp
        KSB7CiAgICAgIC8vIFRPRE86IHN1cHBvcnQgZm9yIENvbXB1dGVkIFByb3Bl
        cnRpZXMsIGV0Yz8KICAgICAgbmV3QmFzZVtwcm9wXSA9IGdpdmVNZXRob2RT
        dXBlcihvYmosIHByb3AsIHByb3BWYWx1ZSwgYmFzZVZhbHVlLCB7fSk7CiAg
        ICB9IGVsc2UgewogICAgICBuZXdCYXNlW3Byb3BdID0gcHJvcFZhbHVlOwog
        ICAgfQogIH0KCiAgcmV0dXJuIG5ld0Jhc2U7Cn0KCmZ1bmN0aW9uIGFkZE5v
        cm1hbGl6ZWRQcm9wZXJ0eShiYXNlLCBrZXksIHZhbHVlLCBtZXRhLCBkZXNj
        cywgdmFsdWVzLCBjb25jYXRzLCBtZXJnaW5ncykgewogIGlmICh2YWx1ZSBp
        bnN0YW5jZW9mIEVtYmVyLkRlc2NyaXB0b3IpIHsKICAgIGlmICh2YWx1ZSA9
        PT0gUkVRVUlSRUQgJiYgZGVzY3Nba2V5XSkgeyByZXR1cm4gQ09OVElOVUU7
        IH0KCiAgICAvLyBXcmFwIGRlc2NyaXB0b3IgZnVuY3Rpb24gdG8gaW1wbGVt
        ZW50CiAgICAvLyBfc3VwZXIoKSBpZiBuZWVkZWQKICAgIGlmICh2YWx1ZS5m
        dW5jKSB7CiAgICAgIHZhbHVlID0gZ2l2ZURlc2NyaXB0b3JTdXBlcihtZXRh
        LCBrZXksIHZhbHVlLCB2YWx1ZXMsIGRlc2NzKTsKICAgIH0KCiAgICBkZXNj
        c1trZXldICA9IHZhbHVlOwogICAgdmFsdWVzW2tleV0gPSB1bmRlZmluZWQ7
        CiAgfSBlbHNlIHsKICAgIGlmICgoY29uY2F0cyAmJiBhX2luZGV4T2YuY2Fs
        bChjb25jYXRzLCBrZXkpID49IDApIHx8CiAgICAgICAgICAgICAgICBrZXkg
        PT09ICdjb25jYXRlbmF0ZWRQcm9wZXJ0aWVzJyB8fAogICAgICAgICAgICAg
        ICAga2V5ID09PSAnbWVyZ2VkUHJvcGVydGllcycpIHsKICAgICAgdmFsdWUg
        PSBhcHBseUNvbmNhdGVuYXRlZFByb3BlcnRpZXMoYmFzZSwga2V5LCB2YWx1
        ZSwgdmFsdWVzKTsKICAgIH0gZWxzZSBpZiAoKG1lcmdpbmdzICYmIGFfaW5k
        ZXhPZi5jYWxsKG1lcmdpbmdzLCBrZXkpID49IDApKSB7CiAgICAgIHZhbHVl
        ID0gYXBwbHlNZXJnZWRQcm9wZXJ0aWVzKGJhc2UsIGtleSwgdmFsdWUsIHZh
        bHVlcyk7CiAgICB9IGVsc2UgaWYgKGlzTWV0aG9kKHZhbHVlKSkgewogICAg
        ICB2YWx1ZSA9IGdpdmVNZXRob2RTdXBlcihiYXNlLCBrZXksIHZhbHVlLCB2
        YWx1ZXMsIGRlc2NzKTsKICAgIH0KCiAgICBkZXNjc1trZXldID0gdW5kZWZp
        bmVkOwogICAgdmFsdWVzW2tleV0gPSB2YWx1ZTsKICB9Cn0KCmZ1bmN0aW9u
        IG1lcmdlTWl4aW5zKG1peGlucywgbSwgZGVzY3MsIHZhbHVlcywgYmFzZSwg
        a2V5cykgewogIHZhciBtaXhpbiwgcHJvcHMsIGtleSwgY29uY2F0cywgbWVy
        Z2luZ3MsIG1ldGE7CgogIGZ1bmN0aW9uIHJlbW92ZUtleXMoa2V5TmFtZSkg
        ewogICAgZGVsZXRlIGRlc2NzW2tleU5hbWVdOwogICAgZGVsZXRlIHZhbHVl
        c1trZXlOYW1lXTsKICB9CgogIGZvcih2YXIgaT0wLCBsPW1peGlucy5sZW5n
        dGg7IGk8bDsgaSsrKSB7CiAgICBtaXhpbiA9IG1peGluc1tpXTsKICAgIEVt
        YmVyLmFzc2VydCgnRXhwZWN0ZWQgaGFzaCBvciBNaXhpbiBpbnN0YW5jZSwg
        Z290ICcgKyBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobWl4aW4p
        LAogICAgICAgICAgICAgICAgIHR5cGVvZiBtaXhpbiA9PT0gJ29iamVjdCcg
        JiYgbWl4aW4gIT09IG51bGwgJiYgT2JqZWN0LnByb3RvdHlwZS50b1N0cmlu
        Zy5jYWxsKG1peGluKSAhPT0gJ1tvYmplY3QgQXJyYXldJyk7CgogICAgcHJv
        cHMgPSBtaXhpblByb3BlcnRpZXMobSwgbWl4aW4pOwogICAgaWYgKHByb3Bz
        ID09PSBDT05USU5VRSkgeyBjb250aW51ZTsgfQoKICAgIGlmIChwcm9wcykg
        ewogICAgICBtZXRhID0gbWV0YUZvcihiYXNlKTsKICAgICAgaWYgKGJhc2Uu
        d2lsbE1lcmdlTWl4aW4pIHsgYmFzZS53aWxsTWVyZ2VNaXhpbihwcm9wcyk7
        IH0KICAgICAgY29uY2F0cyA9IGNvbmNhdGVuYXRlZE1peGluUHJvcGVydGll
        cygnY29uY2F0ZW5hdGVkUHJvcGVydGllcycsIHByb3BzLCB2YWx1ZXMsIGJh
        c2UpOwogICAgICBtZXJnaW5ncyA9IGNvbmNhdGVuYXRlZE1peGluUHJvcGVy
        dGllcygnbWVyZ2VkUHJvcGVydGllcycsIHByb3BzLCB2YWx1ZXMsIGJhc2Up
        OwoKICAgICAgZm9yIChrZXkgaW4gcHJvcHMpIHsKICAgICAgICBpZiAoIXBy
        b3BzLmhhc093blByb3BlcnR5KGtleSkpIHsgY29udGludWU7IH0KICAgICAg
        ICBrZXlzLnB1c2goa2V5KTsKICAgICAgICBhZGROb3JtYWxpemVkUHJvcGVy
        dHkoYmFzZSwga2V5LCBwcm9wc1trZXldLCBtZXRhLCBkZXNjcywgdmFsdWVz
        LCBjb25jYXRzLCBtZXJnaW5ncyk7CiAgICAgIH0KCiAgICAgIC8vIG1hbnVh
        bGx5IGNvcHkgdG9TdHJpbmcoKSBiZWNhdXNlIHNvbWUgSlMgZW5naW5lcyBk
        byBub3QgZW51bWVyYXRlIGl0CiAgICAgIGlmIChwcm9wcy5oYXNPd25Qcm9w
        ZXJ0eSgndG9TdHJpbmcnKSkgeyBiYXNlLnRvU3RyaW5nID0gcHJvcHMudG9T
        dHJpbmc7IH0KICAgIH0gZWxzZSBpZiAobWl4aW4ubWl4aW5zKSB7CiAgICAg
        IG1lcmdlTWl4aW5zKG1peGluLm1peGlucywgbSwgZGVzY3MsIHZhbHVlcywg
        YmFzZSwga2V5cyk7CiAgICAgIGlmIChtaXhpbi5fd2l0aG91dCkgeyBhX2Zv
        ckVhY2guY2FsbChtaXhpbi5fd2l0aG91dCwgcmVtb3ZlS2V5cyk7IH0KICAg
        IH0KICB9Cn0KCnZhciBJU19CSU5ESU5HID0gRW1iZXIuSVNfQklORElORyA9
        IC9eLitCaW5kaW5nJC87CgpmdW5jdGlvbiBkZXRlY3RCaW5kaW5nKG9iaiwg
        a2V5LCB2YWx1ZSwgbSkgewogIGlmIChJU19CSU5ESU5HLnRlc3Qoa2V5KSkg
        ewogICAgdmFyIGJpbmRpbmdzID0gbS5iaW5kaW5nczsKICAgIGlmICghYmlu
        ZGluZ3MpIHsKICAgICAgYmluZGluZ3MgPSBtLmJpbmRpbmdzID0ge307CiAg
        ICB9IGVsc2UgaWYgKCFtLmhhc093blByb3BlcnR5KCdiaW5kaW5ncycpKSB7
        CiAgICAgIGJpbmRpbmdzID0gbS5iaW5kaW5ncyA9IG9fY3JlYXRlKG0uYmlu
        ZGluZ3MpOwogICAgfQogICAgYmluZGluZ3Nba2V5XSA9IHZhbHVlOwogIH0K
        fQoKZnVuY3Rpb24gY29ubmVjdEJpbmRpbmdzKG9iaiwgbSkgewogIC8vIFRP
        RE8gTWl4aW4uYXBwbHkoaW5zdGFuY2UpIHNob3VsZCBkaXNjb25uZWN0IGJp
        bmRpbmcgaWYgZXhpc3RzCiAgdmFyIGJpbmRpbmdzID0gbS5iaW5kaW5ncywg
        a2V5LCBiaW5kaW5nLCB0bzsKICBpZiAoYmluZGluZ3MpIHsKICAgIGZvciAo
        a2V5IGluIGJpbmRpbmdzKSB7CiAgICAgIGJpbmRpbmcgPSBiaW5kaW5nc1tr
        ZXldOwogICAgICBpZiAoYmluZGluZykgewogICAgICAgIHRvID0ga2V5LnNs
        aWNlKDAsIC03KTsgLy8gc3RyaXAgQmluZGluZyBvZmYgZW5kCiAgICAgICAg
        aWYgKGJpbmRpbmcgaW5zdGFuY2VvZiBFbWJlci5CaW5kaW5nKSB7CiAgICAg
        ICAgICBiaW5kaW5nID0gYmluZGluZy5jb3B5KCk7IC8vIGNvcHkgcHJvdG90
        eXBlcycgaW5zdGFuY2UKICAgICAgICAgIGJpbmRpbmcudG8odG8pOwogICAg
        ICAgIH0gZWxzZSB7IC8vIGJpbmRpbmcgaXMgc3RyaW5nIHBhdGgKICAgICAg
        ICAgIGJpbmRpbmcgPSBuZXcgRW1iZXIuQmluZGluZyh0bywgYmluZGluZyk7
        CiAgICAgICAgfQogICAgICAgIGJpbmRpbmcuY29ubmVjdChvYmopOwogICAg
        ICAgIG9ialtrZXldID0gYmluZGluZzsKICAgICAgfQogICAgfQogICAgLy8g
        bWFyayBhcyBhcHBsaWVkCiAgICBtLmJpbmRpbmdzID0ge307CiAgfQp9Cgpm
        dW5jdGlvbiBmaW5pc2hQYXJ0aWFsKG9iaiwgbSkgewogIGNvbm5lY3RCaW5k
        aW5ncyhvYmosIG0gfHwgbWV0YUZvcihvYmopKTsKICByZXR1cm4gb2JqOwp9
        CgpmdW5jdGlvbiBmb2xsb3dBbGlhcyhvYmosIGRlc2MsIG0sIGRlc2NzLCB2
        YWx1ZXMpIHsKICB2YXIgYWx0S2V5ID0gZGVzYy5tZXRob2ROYW1lLCB2YWx1
        ZTsKICBpZiAoZGVzY3NbYWx0S2V5XSB8fCB2YWx1ZXNbYWx0S2V5XSkgewog
        ICAgdmFsdWUgPSB2YWx1ZXNbYWx0S2V5XTsKICAgIGRlc2MgID0gZGVzY3Nb
        YWx0S2V5XTsKICB9IGVsc2UgaWYgKG0uZGVzY3NbYWx0S2V5XSkgewogICAg
        ZGVzYyAgPSBtLmRlc2NzW2FsdEtleV07CiAgICB2YWx1ZSA9IHVuZGVmaW5l
        ZDsKICB9IGVsc2UgewogICAgZGVzYyA9IHVuZGVmaW5lZDsKICAgIHZhbHVl
        ID0gb2JqW2FsdEtleV07CiAgfQoKICByZXR1cm4geyBkZXNjOiBkZXNjLCB2
        YWx1ZTogdmFsdWUgfTsKfQoKZnVuY3Rpb24gdXBkYXRlT2JzZXJ2ZXJzQW5k
        TGlzdGVuZXJzKG9iaiwga2V5LCBvYnNlcnZlck9yTGlzdGVuZXIsIHBhdGhz
        S2V5LCB1cGRhdGVNZXRob2QpIHsKICB2YXIgcGF0aHMgPSBvYnNlcnZlck9y
        TGlzdGVuZXJbcGF0aHNLZXldOwoKICBpZiAocGF0aHMpIHsKICAgIGZvciAo
        dmFyIGk9MCwgbD1wYXRocy5sZW5ndGg7IGk8bDsgaSsrKSB7CiAgICAgIEVt
        YmVyW3VwZGF0ZU1ldGhvZF0ob2JqLCBwYXRoc1tpXSwgbnVsbCwga2V5KTsK
        ICAgIH0KICB9Cn0KCmZ1bmN0aW9uIHJlcGxhY2VPYnNlcnZlcnNBbmRMaXN0
        ZW5lcnMob2JqLCBrZXksIG9ic2VydmVyT3JMaXN0ZW5lcikgewogIHZhciBw
        cmV2ID0gb2JqW2tleV07CgogIGlmICgnZnVuY3Rpb24nID09PSB0eXBlb2Yg
        cHJldikgewogICAgdXBkYXRlT2JzZXJ2ZXJzQW5kTGlzdGVuZXJzKG9iaiwg
        a2V5LCBwcmV2LCAnX19lbWJlcl9vYnNlcnZlc0JlZm9yZV9fJywgJ3JlbW92
        ZUJlZm9yZU9ic2VydmVyJyk7CiAgICB1cGRhdGVPYnNlcnZlcnNBbmRMaXN0
        ZW5lcnMob2JqLCBrZXksIHByZXYsICdfX2VtYmVyX29ic2VydmVzX18nLCAn
        cmVtb3ZlT2JzZXJ2ZXInKTsKICAgIHVwZGF0ZU9ic2VydmVyc0FuZExpc3Rl
        bmVycyhvYmosIGtleSwgcHJldiwgJ19fZW1iZXJfbGlzdGVuc19fJywgJ3Jl
        bW92ZUxpc3RlbmVyJyk7CiAgfQoKICBpZiAoJ2Z1bmN0aW9uJyA9PT0gdHlw
        ZW9mIG9ic2VydmVyT3JMaXN0ZW5lcikgewogICAgdXBkYXRlT2JzZXJ2ZXJz
        QW5kTGlzdGVuZXJzKG9iaiwga2V5LCBvYnNlcnZlck9yTGlzdGVuZXIsICdf
        X2VtYmVyX29ic2VydmVzQmVmb3JlX18nLCAnYWRkQmVmb3JlT2JzZXJ2ZXIn
        KTsKICAgIHVwZGF0ZU9ic2VydmVyc0FuZExpc3RlbmVycyhvYmosIGtleSwg
        b2JzZXJ2ZXJPckxpc3RlbmVyLCAnX19lbWJlcl9vYnNlcnZlc19fJywgJ2Fk
        ZE9ic2VydmVyJyk7CiAgICB1cGRhdGVPYnNlcnZlcnNBbmRMaXN0ZW5lcnMo
        b2JqLCBrZXksIG9ic2VydmVyT3JMaXN0ZW5lciwgJ19fZW1iZXJfbGlzdGVu
        c19fJywgJ2FkZExpc3RlbmVyJyk7CiAgfQp9CgpmdW5jdGlvbiBhcHBseU1p
        eGluKG9iaiwgbWl4aW5zLCBwYXJ0aWFsKSB7CiAgdmFyIGRlc2NzID0ge30s
        IHZhbHVlcyA9IHt9LCBtID0gbWV0YUZvcihvYmopLAogICAgICBrZXksIHZh
        bHVlLCBkZXNjLCBrZXlzID0gW107CgogIC8vIEdvIHRocm91Z2ggYWxsIG1p
        eGlucyBhbmQgaGFzaGVzIHBhc3NlZCBpbiwgYW5kOgogIC8vCiAgLy8gKiBI
        YW5kbGUgY29uY2F0ZW5hdGVkIHByb3BlcnRpZXMKICAvLyAqIEhhbmRsZSBt
        ZXJnZWQgcHJvcGVydGllcwogIC8vICogU2V0IHVwIF9zdXBlciB3cmFwcGlu
        ZyBpZiBuZWNlc3NhcnkKICAvLyAqIFNldCB1cCBjb21wdXRlZCBwcm9wZXJ0
        eSBkZXNjcmlwdG9ycwogIC8vICogQ29weWluZyBgdG9TdHJpbmdgIGluIGJy
        b2tlbiBicm93c2VycwogIG1lcmdlTWl4aW5zKG1peGlucywgbWl4aW5zTWV0
        YShvYmopLCBkZXNjcywgdmFsdWVzLCBvYmosIGtleXMpOwoKICBmb3IodmFy
        IGkgPSAwLCBsID0ga2V5cy5sZW5ndGg7IGkgPCBsOyBpKyspIHsKICAgIGtl
        eSA9IGtleXNbaV07CiAgICBpZiAoa2V5ID09PSAnY29uc3RydWN0b3InIHx8
        ICF2YWx1ZXMuaGFzT3duUHJvcGVydHkoa2V5KSkgeyBjb250aW51ZTsgfQoK
        ICAgIGRlc2MgPSBkZXNjc1trZXldOwogICAgdmFsdWUgPSB2YWx1ZXNba2V5
        XTsKCiAgICBpZiAoZGVzYyA9PT0gUkVRVUlSRUQpIHsgY29udGludWU7IH0K
        CiAgICB3aGlsZSAoZGVzYyAmJiBkZXNjIGluc3RhbmNlb2YgQWxpYXMpIHsK
        ICAgICAgdmFyIGZvbGxvd2VkID0gZm9sbG93QWxpYXMob2JqLCBkZXNjLCBt
        LCBkZXNjcywgdmFsdWVzKTsKICAgICAgZGVzYyA9IGZvbGxvd2VkLmRlc2M7
        CiAgICAgIHZhbHVlID0gZm9sbG93ZWQudmFsdWU7CiAgICB9CgogICAgaWYg
        KGRlc2MgPT09IHVuZGVmaW5lZCAmJiB2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7
        IGNvbnRpbnVlOyB9CgogICAgcmVwbGFjZU9ic2VydmVyc0FuZExpc3RlbmVy
        cyhvYmosIGtleSwgdmFsdWUpOwogICAgZGV0ZWN0QmluZGluZyhvYmosIGtl
        eSwgdmFsdWUsIG0pOwogICAgZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIGRl
        c2MsIHZhbHVlLCBtKTsKICB9CgogIGlmICghcGFydGlhbCkgeyAvLyBkb24n
        dCBhcHBseSB0byBwcm90b3R5cGUKICAgIGZpbmlzaFBhcnRpYWwob2JqLCBt
        KTsKICB9CgogIHJldHVybiBvYmo7Cn0KCi8qKgogIEBtZXRob2QgbWl4aW4K
        ICBAZm9yIEVtYmVyCiAgQHBhcmFtIG9iagogIEBwYXJhbSBtaXhpbnMqCiAg
        QHJldHVybiBvYmoKKi8KRW1iZXIubWl4aW4gPSBmdW5jdGlvbihvYmopIHsK
        ICB2YXIgYXJncyA9IGFfc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpOwogIGFw
        cGx5TWl4aW4ob2JqLCBhcmdzLCBmYWxzZSk7CiAgcmV0dXJuIG9iajsKfTsK
        Ci8qKgogIFRoZSBgRW1iZXIuTWl4aW5gIGNsYXNzIGFsbG93cyB5b3UgdG8g
        Y3JlYXRlIG1peGlucywgd2hvc2UgcHJvcGVydGllcyBjYW4gYmUKICBhZGRl
        ZCB0byBvdGhlciBjbGFzc2VzLiBGb3IgaW5zdGFuY2UsCgogIGBgYGphdmFz
        Y3JpcHQKICBBcHAuRWRpdGFibGUgPSBFbWJlci5NaXhpbi5jcmVhdGUoewog
        ICAgZWRpdDogZnVuY3Rpb24oKSB7CiAgICAgIGNvbnNvbGUubG9nKCdzdGFy
        dGluZyB0byBlZGl0Jyk7CiAgICAgIHRoaXMuc2V0KCdpc0VkaXRpbmcnLCB0
        cnVlKTsKICAgIH0sCiAgICBpc0VkaXRpbmc6IGZhbHNlCiAgfSk7CgogIC8v
        IE1peCBtaXhpbnMgaW50byBjbGFzc2VzIGJ5IHBhc3NpbmcgdGhlbSBhcyB0
        aGUgZmlyc3QgYXJndW1lbnRzIHRvCiAgLy8gLmV4dGVuZC4KICBBcHAuQ29t
        bWVudFZpZXcgPSBFbWJlci5WaWV3LmV4dGVuZChBcHAuRWRpdGFibGUsIHsK
        ICAgIHRlbXBsYXRlOiBFbWJlci5IYW5kbGViYXJzLmNvbXBpbGUoJ3t7I2lm
        IHZpZXcuaXNFZGl0aW5nfX0uLi57e2Vsc2V9fS4uLnt7L2lmfX0nKQogIH0p
        OwoKICBjb21tZW50VmlldyA9IEFwcC5Db21tZW50Vmlldy5jcmVhdGUoKTsK
        ICBjb21tZW50Vmlldy5lZGl0KCk7IC8vIG91dHB1dHMgJ3N0YXJ0aW5nIHRv
        IGVkaXQnCiAgYGBgCgogIE5vdGUgdGhhdCBNaXhpbnMgYXJlIGNyZWF0ZWQg
        d2l0aCBgRW1iZXIuTWl4aW4uY3JlYXRlYCwgbm90CiAgYEVtYmVyLk1peGlu
        LmV4dGVuZGAuCgogIE5vdGUgdGhhdCBtaXhpbnMgZXh0ZW5kIGEgY29uc3Ry
        dWN0b3IncyBwcm90b3R5cGUgc28gYXJyYXlzIGFuZCBvYmplY3QgbGl0ZXJh
        bHMKICBkZWZpbmVkIGFzIHByb3BlcnRpZXMgd2lsbCBiZSBzaGFyZWQgYW1v
        bmdzdCBvYmplY3RzIHRoYXQgaW1wbGVtZW50IHRoZSBtaXhpbi4KICBJZiB5
        b3Ugd2FudCB0byBkZWZpbmUgYSBwcm9wZXJ0eSBpbiBhIG1peGluIHRoYXQg
        aXMgbm90IHNoYXJlZCwgeW91IGNhbiBkZWZpbmUKICBpdCBlaXRoZXIgYXMg
        YSBjb21wdXRlZCBwcm9wZXJ0eSBvciBoYXZlIGl0IGJlIGNyZWF0ZWQgb24g
        aW5pdGlhbGl6YXRpb24gb2YgdGhlIG9iamVjdC4KCiAgYGBgamF2YXNjcmlw
        dAogIC8vZmlsdGVycyBhcnJheSB3aWxsIGJlIHNoYXJlZCBhbW9uZ3N0IGFu
        eSBvYmplY3QgaW1wbGVtZW50aW5nIG1peGluCiAgQXBwLkZpbHRlcmFibGUg
        PSBFbWJlci5NaXhpbi5jcmVhdGUoewogICAgZmlsdGVyczogRW1iZXIuQSgp
        CiAgfSk7CgogIC8vZmlsdGVycyB3aWxsIGJlIGEgc2VwYXJhdGUgIGFycmF5
        IGZvciBldmVyeSBvYmplY3QgaW1wbGVtZW50aW5nIHRoZSBtaXhpbgogIEFw
        cC5GaWx0ZXJhYmxlID0gRW1iZXIuTWl4aW4uY3JlYXRlKHsKICAgIGZpbHRl
        cnM6IEVtYmVyLmNvbXB1dGVkKGZ1bmN0aW9uKCl7cmV0dXJuIEVtYmVyLkEo
        KTt9KQogIH0pOwoKICAvL2ZpbHRlcnMgd2lsbCBiZSBjcmVhdGVkIGFzIGEg
        c2VwYXJhdGUgYXJyYXkgZHVyaW5nIHRoZSBvYmplY3QncyBpbml0aWFsaXph
        dGlvbgogIEFwcC5GaWx0ZXJhYmxlID0gRW1iZXIuTWl4aW4uY3JlYXRlKHsK
        ICAgIGluaXQ6IGZ1bmN0aW9uKCkgewogICAgICB0aGlzLl9zdXBlcigpOwog
        ICAgICB0aGlzLnNldCgiZmlsdGVycyIsIEVtYmVyLkEoKSk7CiAgICB9CiAg
        fSk7CiAgYGBgCgogIEBjbGFzcyBNaXhpbgogIEBuYW1lc3BhY2UgRW1iZXIK
        Ki8KRW1iZXIuTWl4aW4gPSBmdW5jdGlvbigpIHsgcmV0dXJuIGluaXRNaXhp
        bih0aGlzLCBhcmd1bWVudHMpOyB9OwoKTWl4aW4gPSBFbWJlci5NaXhpbjsK
        Ck1peGluLnByb3RvdHlwZSA9IHsKICBwcm9wZXJ0aWVzOiBudWxsLAogIG1p
        eGluczogbnVsbCwKICBvd25lckNvbnN0cnVjdG9yOiBudWxsCn07CgpNaXhp
        bi5fYXBwbHkgPSBhcHBseU1peGluOwoKTWl4aW4uYXBwbHlQYXJ0aWFsID0g
        ZnVuY3Rpb24ob2JqKSB7CiAgdmFyIGFyZ3MgPSBhX3NsaWNlLmNhbGwoYXJn
        dW1lbnRzLCAxKTsKICByZXR1cm4gYXBwbHlNaXhpbihvYmosIGFyZ3MsIHRy
        dWUpOwp9OwoKTWl4aW4uZmluaXNoUGFydGlhbCA9IGZpbmlzaFBhcnRpYWw7
        CgpFbWJlci5hbnlVbnByb2Nlc3NlZE1peGlucyA9IGZhbHNlOwoKLyoqCiAg
        QG1ldGhvZCBjcmVhdGUKICBAc3RhdGljCiAgQHBhcmFtIGFyZ3VtZW50cyoK
        Ki8KTWl4aW4uY3JlYXRlID0gZnVuY3Rpb24oKSB7CiAgRW1iZXIuYW55VW5w
        cm9jZXNzZWRNaXhpbnMgPSB0cnVlOwogIHZhciBNID0gdGhpczsKICByZXR1
        cm4gaW5pdE1peGluKG5ldyBNKCksIGFyZ3VtZW50cyk7Cn07Cgp2YXIgTWl4
        aW5Qcm90b3R5cGUgPSBNaXhpbi5wcm90b3R5cGU7CgovKioKICBAbWV0aG9k
        IHJlb3BlbgogIEBwYXJhbSBhcmd1bWVudHMqCiovCk1peGluUHJvdG90eXBl
        LnJlb3BlbiA9IGZ1bmN0aW9uKCkgewogIHZhciBtaXhpbiwgdG1wOwoKICBp
        ZiAodGhpcy5wcm9wZXJ0aWVzKSB7CiAgICBtaXhpbiA9IE1peGluLmNyZWF0
        ZSgpOwogICAgbWl4aW4ucHJvcGVydGllcyA9IHRoaXMucHJvcGVydGllczsK
        ICAgIGRlbGV0ZSB0aGlzLnByb3BlcnRpZXM7CiAgICB0aGlzLm1peGlucyA9
        IFttaXhpbl07CiAgfSBlbHNlIGlmICghdGhpcy5taXhpbnMpIHsKICAgIHRo
        aXMubWl4aW5zID0gW107CiAgfQoKICB2YXIgbGVuID0gYXJndW1lbnRzLmxl
        bmd0aCwgbWl4aW5zID0gdGhpcy5taXhpbnMsIGlkeDsKCiAgZm9yKGlkeD0w
        OyBpZHggPCBsZW47IGlkeCsrKSB7CiAgICBtaXhpbiA9IGFyZ3VtZW50c1tp
        ZHhdOwogICAgRW1iZXIuYXNzZXJ0KCdFeHBlY3RlZCBoYXNoIG9yIE1peGlu
        IGluc3RhbmNlLCBnb3QgJyArIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcu
        Y2FsbChtaXhpbiksCiAgICAgICAgICAgICAgICAgdHlwZW9mIG1peGluID09
        PSAnb2JqZWN0JyAmJiBtaXhpbiAhPT0gbnVsbCAmJiBPYmplY3QucHJvdG90
        eXBlLnRvU3RyaW5nLmNhbGwobWl4aW4pICE9PSAnW29iamVjdCBBcnJheV0n
        KTsKCiAgICBpZiAobWl4aW4gaW5zdGFuY2VvZiBNaXhpbikgewogICAgICBt
        aXhpbnMucHVzaChtaXhpbik7CiAgICB9IGVsc2UgewogICAgICB0bXAgPSBN
        aXhpbi5jcmVhdGUoKTsKICAgICAgdG1wLnByb3BlcnRpZXMgPSBtaXhpbjsK
        ICAgICAgbWl4aW5zLnB1c2godG1wKTsKICAgIH0KICB9CgogIHJldHVybiB0
        aGlzOwp9OwoKLyoqCiAgQG1ldGhvZCBhcHBseQogIEBwYXJhbSBvYmoKICBA
        cmV0dXJuIGFwcGxpZWQgb2JqZWN0CiovCk1peGluUHJvdG90eXBlLmFwcGx5
        ID0gZnVuY3Rpb24ob2JqKSB7CiAgcmV0dXJuIGFwcGx5TWl4aW4ob2JqLCBb
        dGhpc10sIGZhbHNlKTsKfTsKCk1peGluUHJvdG90eXBlLmFwcGx5UGFydGlh
        bCA9IGZ1bmN0aW9uKG9iaikgewogIHJldHVybiBhcHBseU1peGluKG9iaiwg
        W3RoaXNdLCB0cnVlKTsKfTsKCmZ1bmN0aW9uIF9kZXRlY3QoY3VyTWl4aW4s
        IHRhcmdldE1peGluLCBzZWVuKSB7CiAgdmFyIGd1aWQgPSBndWlkRm9yKGN1
        ck1peGluKTsKCiAgaWYgKHNlZW5bZ3VpZF0pIHsgcmV0dXJuIGZhbHNlOyB9
        CiAgc2VlbltndWlkXSA9IHRydWU7CgogIGlmIChjdXJNaXhpbiA9PT0gdGFy
        Z2V0TWl4aW4pIHsgcmV0dXJuIHRydWU7IH0KICB2YXIgbWl4aW5zID0gY3Vy
        TWl4aW4ubWl4aW5zLCBsb2MgPSBtaXhpbnMgPyBtaXhpbnMubGVuZ3RoIDog
        MDsKICB3aGlsZSAoLS1sb2MgPj0gMCkgewogICAgaWYgKF9kZXRlY3QobWl4
        aW5zW2xvY10sIHRhcmdldE1peGluLCBzZWVuKSkgeyByZXR1cm4gdHJ1ZTsg
        fQogIH0KICByZXR1cm4gZmFsc2U7Cn0KCi8qKgogIEBtZXRob2QgZGV0ZWN0
        CiAgQHBhcmFtIG9iagogIEByZXR1cm4ge0Jvb2xlYW59CiovCk1peGluUHJv
        dG90eXBlLmRldGVjdCA9IGZ1bmN0aW9uKG9iaikgewogIGlmICghb2JqKSB7
        IHJldHVybiBmYWxzZTsgfQogIGlmIChvYmogaW5zdGFuY2VvZiBNaXhpbikg
        eyByZXR1cm4gX2RldGVjdChvYmosIHRoaXMsIHt9KTsgfQogIHZhciBtID0g
        b2JqW01FVEFfS0VZXSwKICAgICAgbWl4aW5zID0gbSAmJiBtLm1peGluczsK
        ICBpZiAobWl4aW5zKSB7CiAgICByZXR1cm4gISFtaXhpbnNbZ3VpZEZvcih0
        aGlzKV07CiAgfQogIHJldHVybiBmYWxzZTsKfTsKCk1peGluUHJvdG90eXBl
        LndpdGhvdXQgPSBmdW5jdGlvbigpIHsKICB2YXIgcmV0ID0gbmV3IE1peGlu
        KHRoaXMpOwogIHJldC5fd2l0aG91dCA9IGFfc2xpY2UuY2FsbChhcmd1bWVu
        dHMpOwogIHJldHVybiByZXQ7Cn07CgpmdW5jdGlvbiBfa2V5cyhyZXQsIG1p
        eGluLCBzZWVuKSB7CiAgaWYgKHNlZW5bZ3VpZEZvcihtaXhpbildKSB7IHJl
        dHVybjsgfQogIHNlZW5bZ3VpZEZvcihtaXhpbildID0gdHJ1ZTsKCiAgaWYg
        KG1peGluLnByb3BlcnRpZXMpIHsKICAgIHZhciBwcm9wcyA9IG1peGluLnBy
        b3BlcnRpZXM7CiAgICBmb3IgKHZhciBrZXkgaW4gcHJvcHMpIHsKICAgICAg
        aWYgKHByb3BzLmhhc093blByb3BlcnR5KGtleSkpIHsgcmV0W2tleV0gPSB0
        cnVlOyB9CiAgICB9CiAgfSBlbHNlIGlmIChtaXhpbi5taXhpbnMpIHsKICAg
        IGFfZm9yRWFjaC5jYWxsKG1peGluLm1peGlucywgZnVuY3Rpb24oeCkgeyBf
        a2V5cyhyZXQsIHgsIHNlZW4pOyB9KTsKICB9Cn0KCk1peGluUHJvdG90eXBl
        LmtleXMgPSBmdW5jdGlvbigpIHsKICB2YXIga2V5cyA9IHt9LCBzZWVuID0g
        e30sIHJldCA9IFtdOwogIF9rZXlzKGtleXMsIHRoaXMsIHNlZW4pOwogIGZv
        cih2YXIga2V5IGluIGtleXMpIHsKICAgIGlmIChrZXlzLmhhc093blByb3Bl
        cnR5KGtleSkpIHsgcmV0LnB1c2goa2V5KTsgfQogIH0KICByZXR1cm4gcmV0
        Owp9OwoKLy8gcmV0dXJucyB0aGUgbWl4aW5zIGN1cnJlbnRseSBhcHBsaWVk
        IHRvIHRoZSBzcGVjaWZpZWQgb2JqZWN0Ci8vIFRPRE86IE1ha2UgRW1iZXIu
        bWl4aW4KTWl4aW4ubWl4aW5zID0gZnVuY3Rpb24ob2JqKSB7CiAgdmFyIG0g
        PSBvYmpbTUVUQV9LRVldLAogICAgICBtaXhpbnMgPSBtICYmIG0ubWl4aW5z
        LCByZXQgPSBbXTsKCiAgaWYgKCFtaXhpbnMpIHsgcmV0dXJuIHJldDsgfQoK
        ICBmb3IgKHZhciBrZXkgaW4gbWl4aW5zKSB7CiAgICB2YXIgbWl4aW4gPSBt
        aXhpbnNba2V5XTsKCiAgICAvLyBza2lwIHByaW1pdGl2ZSBtaXhpbnMgc2lu
        Y2UgdGhlc2UgYXJlIGFsd2F5cyBhbm9ueW1vdXMKICAgIGlmICghbWl4aW4u
        cHJvcGVydGllcykgeyByZXQucHVzaChtaXhpbik7IH0KICB9CgogIHJldHVy
        biByZXQ7Cn07CgpSRVFVSVJFRCA9IG5ldyBFbWJlci5EZXNjcmlwdG9yKCk7
        ClJFUVVJUkVELnRvU3RyaW5nID0gZnVuY3Rpb24oKSB7IHJldHVybiAnKFJl
        cXVpcmVkIFByb3BlcnR5KSc7IH07CgovKioKICBEZW5vdGVzIGEgcmVxdWly
        ZWQgcHJvcGVydHkgZm9yIGEgbWl4aW4KCiAgQG1ldGhvZCByZXF1aXJlZAog
        IEBmb3IgRW1iZXIKKi8KRW1iZXIucmVxdWlyZWQgPSBmdW5jdGlvbigpIHsK
        ICByZXR1cm4gUkVRVUlSRUQ7Cn07CgpBbGlhcyA9IGZ1bmN0aW9uKG1ldGhv
        ZE5hbWUpIHsKICB0aGlzLm1ldGhvZE5hbWUgPSBtZXRob2ROYW1lOwp9OwpB
        bGlhcy5wcm90b3R5cGUgPSBuZXcgRW1iZXIuRGVzY3JpcHRvcigpOwoKLyoq
        CiAgTWFrZXMgYSBtZXRob2QgYXZhaWxhYmxlIHZpYSBhbiBhZGRpdGlvbmFs
        IG5hbWUuCgogIGBgYGphdmFzY3JpcHQKICBBcHAuUGVyc29uID0gRW1iZXIu
        T2JqZWN0LmV4dGVuZCh7CiAgICBuYW1lOiBmdW5jdGlvbigpIHsKICAgICAg
        cmV0dXJuICdUb21odWRhIEthdHpkYWxlJzsKICAgIH0sCiAgICBtb25pa2Vy
        OiBFbWJlci5hbGlhc01ldGhvZCgnbmFtZScpCiAgfSk7CgogIHZhciBnb29k
        R3V5ID0gQXBwLlBlcnNvbi5jcmVhdGUoKQogIGBgYAoKICBAbWV0aG9kIGFs
        aWFzTWV0aG9kCiAgQGZvciBFbWJlcgogIEBwYXJhbSB7U3RyaW5nfSBtZXRo
        b2ROYW1lIG5hbWUgb2YgdGhlIG1ldGhvZCB0byBhbGlhcwogIEByZXR1cm4g
        e0VtYmVyLkRlc2NyaXB0b3J9CiovCkVtYmVyLmFsaWFzTWV0aG9kID0gZnVu
        Y3Rpb24obWV0aG9kTmFtZSkgewogIHJldHVybiBuZXcgQWxpYXMobWV0aG9k
        TmFtZSk7Cn07CgovLyAuLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4u
        Li4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uCi8vIE9CU0VSVkVSIEhFTFBF
        UgovLwoKLyoqCiAgU3BlY2lmeSBhIG1ldGhvZCB0aGF0IG9ic2VydmVzIHBy
        b3BlcnR5IGNoYW5nZXMuCgogIGBgYGphdmFzY3JpcHQKICBFbWJlci5PYmpl
        Y3QuZXh0ZW5kKHsKICAgIHZhbHVlT2JzZXJ2ZXI6IEVtYmVyLm9ic2VydmVy
        KCd2YWx1ZScsIGZ1bmN0aW9uKCkgewogICAgICAvLyBFeGVjdXRlcyB3aGVu
        ZXZlciB0aGUgInZhbHVlIiBwcm9wZXJ0eSBjaGFuZ2VzCiAgICB9KQogIH0p
        OwogIGBgYAoKICBJbiB0aGUgZnV0dXJlIHRoaXMgbWV0aG9kIG1heSBiZWNv
        bWUgYXN5bmNocm9ub3VzLiBJZiB5b3Ugd2FudCB0byBlbnN1cmUKICBzeW5j
        aHJvbm91cyBiZWhhdmlvciwgdXNlIGBpbW1lZGlhdGVPYnNlcnZlcmAuCgog
        IEFsc28gYXZhaWxhYmxlIGFzIGBGdW5jdGlvbi5wcm90b3R5cGUub2JzZXJ2
        ZXNgIGlmIHByb3RvdHlwZSBleHRlbnNpb25zIGFyZQogIGVuYWJsZWQuCgog
        IEBtZXRob2Qgb2JzZXJ2ZXIKICBAZm9yIEVtYmVyCiAgQHBhcmFtIHtTdHJp
        bmd9IHByb3BlcnR5TmFtZXMqCiAgQHBhcmFtIHtGdW5jdGlvbn0gZnVuYwog
        IEByZXR1cm4gZnVuYwoqLwpFbWJlci5vYnNlcnZlciA9IGZ1bmN0aW9uKCkg
        ewogIHZhciBmdW5jICA9IGFfc2xpY2UuY2FsbChhcmd1bWVudHMsIC0xKVsw
        XTsKICB2YXIgcGF0aHM7CgogIHZhciBhZGRXYXRjaGVkUHJvcGVydHkgPSBm
        dW5jdGlvbiAocGF0aCkgeyBwYXRocy5wdXNoKHBhdGgpOyB9OwogIHZhciBf
        cGF0aHMgPSBhX3NsaWNlLmNhbGwoYXJndW1lbnRzLCAwLCAtMSk7CgogIGlm
        ICh0eXBlb2YgZnVuYyAhPT0gImZ1bmN0aW9uIikgewogICAgLy8gcmV2ZXJ0
        IHRvIG9sZCwgc29mdC1kZXByZWNhdGVkIGFyZ3VtZW50IG9yZGVyaW5nCgog
        ICAgZnVuYyAgPSBhcmd1bWVudHNbMF07CiAgICBfcGF0aHMgPSBhX3NsaWNl
        LmNhbGwoYXJndW1lbnRzLCAxKTsKICB9CgogIHBhdGhzID0gW107CgogIGZv
        ciAodmFyIGk9MDsgaTxfcGF0aHMubGVuZ3RoOyArK2kpIHsKICAgIGV4cGFu
        ZFByb3BlcnRpZXMoX3BhdGhzW2ldLCBhZGRXYXRjaGVkUHJvcGVydHkpOwog
        IH0KCiAgaWYgKHR5cGVvZiBmdW5jICE9PSAiZnVuY3Rpb24iKSB7CiAgICB0
        aHJvdyBuZXcgRW1iZXIuRXJyb3IoIkVtYmVyLm9ic2VydmVyIGNhbGxlZCB3
        aXRob3V0IGEgZnVuY3Rpb24iKTsKICB9CgogIGZ1bmMuX19lbWJlcl9vYnNl
        cnZlc19fID0gcGF0aHM7CiAgcmV0dXJuIGZ1bmM7Cn07CgovKioKICBTcGVj
        aWZ5IGEgbWV0aG9kIHRoYXQgb2JzZXJ2ZXMgcHJvcGVydHkgY2hhbmdlcy4K
        CiAgYGBgamF2YXNjcmlwdAogIEVtYmVyLk9iamVjdC5leHRlbmQoewogICAg
        dmFsdWVPYnNlcnZlcjogRW1iZXIuaW1tZWRpYXRlT2JzZXJ2ZXIoJ3ZhbHVl
        JywgZnVuY3Rpb24oKSB7CiAgICAgIC8vIEV4ZWN1dGVzIHdoZW5ldmVyIHRo
        ZSAidmFsdWUiIHByb3BlcnR5IGNoYW5nZXMKICAgIH0pCiAgfSk7CiAgYGBg
        CgogIEluIHRoZSBmdXR1cmUsIGBFbWJlci5vYnNlcnZlcmAgbWF5IGJlY29t
        ZSBhc3luY2hyb25vdXMuIEluIHRoaXMgZXZlbnQsCiAgYEVtYmVyLmltbWVk
        aWF0ZU9ic2VydmVyYCB3aWxsIG1haW50YWluIHRoZSBzeW5jaHJvbm91cyBi
        ZWhhdmlvci4KCiAgQWxzbyBhdmFpbGFibGUgYXMgYEZ1bmN0aW9uLnByb3Rv
        dHlwZS5vYnNlcnZlc0ltbWVkaWF0ZWx5YCBpZiBwcm90b3R5cGUgZXh0ZW5z
        aW9ucyBhcmUKICBlbmFibGVkLgoKICBAbWV0aG9kIGltbWVkaWF0ZU9ic2Vy
        dmVyCiAgQGZvciBFbWJlcgogIEBwYXJhbSB7U3RyaW5nfSBwcm9wZXJ0eU5h
        bWVzKgogIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMKICBAcmV0dXJuIGZ1bmMK
        Ki8KRW1iZXIuaW1tZWRpYXRlT2JzZXJ2ZXIgPSBmdW5jdGlvbigpIHsKICBm
        b3IgKHZhciBpPTAsIGw9YXJndW1lbnRzLmxlbmd0aDsgaTxsOyBpKyspIHsK
        ICAgIHZhciBhcmcgPSBhcmd1bWVudHNbaV07CiAgICBFbWJlci5hc3NlcnQo
        IkltbWVkaWF0ZSBvYnNlcnZlcnMgbXVzdCBvYnNlcnZlIGludGVybmFsIHBy
        b3BlcnRpZXMgb25seSwgbm90IHByb3BlcnRpZXMgb24gb3RoZXIgb2JqZWN0
        cy4iLCB0eXBlb2YgYXJnICE9PSAic3RyaW5nIiB8fCBhcmcuaW5kZXhPZign
        LicpID09PSAtMSk7CiAgfQoKICByZXR1cm4gRW1iZXIub2JzZXJ2ZXIuYXBw
        bHkodGhpcywgYXJndW1lbnRzKTsKfTsKCi8qKgogIFdoZW4gb2JzZXJ2ZXJz
        IGZpcmUsIHRoZXkgYXJlIGNhbGxlZCB3aXRoIHRoZSBhcmd1bWVudHMgYG9i
        amAsIGBrZXlOYW1lYC4KCiAgTm90ZSwgYEBlYWNoLnByb3BlcnR5YCBvYnNl
        cnZlciBpcyBjYWxsZWQgcGVyIGVhY2ggYWRkIG9yIHJlcGxhY2Ugb2YgYW4g
        ZWxlbWVudAogIGFuZCBpdCdzIG5vdCBjYWxsZWQgd2l0aCBhIHNwZWNpZmlj
        IGVudW1lcmF0aW9uIGl0ZW0uCgogIEEgYGJlZm9yZU9ic2VydmVyYCBmaXJl
        cyBiZWZvcmUgYSBwcm9wZXJ0eSBjaGFuZ2VzLgoKICBBIGBiZWZvcmVPYnNl
        cnZlcmAgaXMgYW4gYWx0ZXJuYXRpdmUgZm9ybSBvZiBgLm9ic2VydmVzQmVm
        b3JlKClgLgoKICBgYGBqYXZhc2NyaXB0CiAgQXBwLlBlcnNvblZpZXcgPSBF
        bWJlci5WaWV3LmV4dGVuZCh7CgogICAgZnJpZW5kczogW3sgbmFtZTogJ1Rv
        bScgfSwgeyBuYW1lOiAnU3RlZmFuJyB9LCB7IG5hbWU6ICdLcmlzJyB9XSwK
        CiAgICB2YWx1ZVdpbGxDaGFuZ2U6IEVtYmVyLmJlZm9yZU9ic2VydmVyKCdj
        b250ZW50LnZhbHVlJywgZnVuY3Rpb24ob2JqLCBrZXlOYW1lKSB7CiAgICAg
        IHRoaXMuY2hhbmdpbmdGcm9tID0gb2JqLmdldChrZXlOYW1lKTsKICAgIH0p
        LAoKICAgIHZhbHVlRGlkQ2hhbmdlOiBFbWJlci5vYnNlcnZlcignY29udGVu
        dC52YWx1ZScsIGZ1bmN0aW9uKG9iaiwga2V5TmFtZSkgewogICAgICAgIC8v
        IG9ubHkgcnVuIGlmIHVwZGF0aW5nIGEgdmFsdWUgYWxyZWFkeSBpbiB0aGUg
        RE9NCiAgICAgICAgaWYgKHRoaXMuZ2V0KCdzdGF0ZScpID09PSAnaW5ET00n
        KSB7CiAgICAgICAgICB2YXIgY29sb3IgPSBvYmouZ2V0KGtleU5hbWUpID4g
        dGhpcy5jaGFuZ2luZ0Zyb20gPyAnZ3JlZW4nIDogJ3JlZCc7CiAgICAgICAg
        ICAvLyBsb2dpYwogICAgICAgIH0KICAgIH0pLAoKICAgIGZyaWVuZHNEaWRD
        aGFuZ2U6IEVtYmVyLm9ic2VydmVyKCdmcmllbmRzLkBlYWNoLm5hbWUnLCBm
        dW5jdGlvbihvYmosIGtleU5hbWUpIHsKICAgICAgLy8gc29tZSBsb2dpYwog
        ICAgICAvLyBvYmouZ2V0KGtleU5hbWUpIHJldHVybnMgZnJpZW5kcyBhcnJh
        eQogICAgfSkKICB9KTsKICBgYGAKCiAgQWxzbyBhdmFpbGFibGUgYXMgYEZ1
        bmN0aW9uLnByb3RvdHlwZS5vYnNlcnZlc0JlZm9yZWAgaWYgcHJvdG90eXBl
        IGV4dGVuc2lvbnMgYXJlCiAgZW5hYmxlZC4KCiAgQG1ldGhvZCBiZWZvcmVP
        YnNlcnZlcgogIEBmb3IgRW1iZXIKICBAcGFyYW0ge1N0cmluZ30gcHJvcGVy
        dHlOYW1lcyoKICBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jCiAgQHJldHVybiBm
        dW5jCiovCkVtYmVyLmJlZm9yZU9ic2VydmVyID0gZnVuY3Rpb24oKSB7CiAg
        dmFyIGZ1bmMgID0gYV9zbGljZS5jYWxsKGFyZ3VtZW50cywgLTEpWzBdOwog
        IHZhciBwYXRoczsKCiAgdmFyIGFkZFdhdGNoZWRQcm9wZXJ0eSA9IGZ1bmN0
        aW9uKHBhdGgpIHsgcGF0aHMucHVzaChwYXRoKTsgfTsKCiAgdmFyIF9wYXRo
        cyA9IGFfc2xpY2UuY2FsbChhcmd1bWVudHMsIDAsIC0xKTsKCiAgaWYgKHR5
        cGVvZiBmdW5jICE9PSAiZnVuY3Rpb24iKSB7CiAgICAvLyByZXZlcnQgdG8g
        b2xkLCBzb2Z0LWRlcHJlY2F0ZWQgYXJndW1lbnQgb3JkZXJpbmcKCiAgICBm
        dW5jICA9IGFyZ3VtZW50c1swXTsKICAgIF9wYXRocyA9IGFfc2xpY2UuY2Fs
        bChhcmd1bWVudHMsIDEpOwogIH0KCiAgcGF0aHMgPSBbXTsKCiAgZm9yICh2
        YXIgaT0wOyBpPF9wYXRocy5sZW5ndGg7ICsraSkgewogICAgZXhwYW5kUHJv
        cGVydGllcyhfcGF0aHNbaV0sIGFkZFdhdGNoZWRQcm9wZXJ0eSk7CiAgfQoK
        ICBpZiAodHlwZW9mIGZ1bmMgIT09ICJmdW5jdGlvbiIpIHsKICAgIHRocm93
        IG5ldyBFbWJlci5FcnJvcigiRW1iZXIuYmVmb3JlT2JzZXJ2ZXIgY2FsbGVk
        IHdpdGhvdXQgYSBmdW5jdGlvbiIpOwogIH0KCiAgZnVuYy5fX2VtYmVyX29i
        c2VydmVzQmVmb3JlX18gPSBwYXRoczsKICByZXR1cm4gZnVuYzsKfTsKCn0p
        KCk7CgoKCihmdW5jdGlvbigpIHsKLy8gUHJvdmlkZXMgYSB3YXkgdG8gcmVn
        aXN0ZXIgbGlicmFyeSB2ZXJzaW9ucyB3aXRoIGVtYmVyLgp2YXIgZm9yRWFj
        aCA9IEVtYmVyLkVudW1lcmFibGVVdGlscy5mb3JFYWNoLAogICAgaW5kZXhP
        ZiA9IEVtYmVyLkVudW1lcmFibGVVdGlscy5pbmRleE9mOwoKRW1iZXIubGli
        cmFyaWVzID0gZnVuY3Rpb24oKSB7CiAgdmFyIGxpYnJhcmllcyAgICA9IFtd
        OwogIHZhciBjb3JlTGliSW5kZXggPSAwOwoKICB2YXIgZ2V0TGlicmFyeSA9
        IGZ1bmN0aW9uKG5hbWUpIHsKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGli
        cmFyaWVzLmxlbmd0aDsgaSsrKSB7CiAgICAgIGlmIChsaWJyYXJpZXNbaV0u
        bmFtZSA9PT0gbmFtZSkgewogICAgICAgIHJldHVybiBsaWJyYXJpZXNbaV07
        CiAgICAgIH0KICAgIH0KICB9OwoKICBsaWJyYXJpZXMucmVnaXN0ZXIgPSBm
        dW5jdGlvbihuYW1lLCB2ZXJzaW9uKSB7CiAgICBpZiAoIWdldExpYnJhcnko
        bmFtZSkpIHsKICAgICAgbGlicmFyaWVzLnB1c2goe25hbWU6IG5hbWUsIHZl
        cnNpb246IHZlcnNpb259KTsKICAgIH0KICB9OwoKICBsaWJyYXJpZXMucmVn
        aXN0ZXJDb3JlTGlicmFyeSA9IGZ1bmN0aW9uKG5hbWUsIHZlcnNpb24pIHsK
        ICAgIGlmICghZ2V0TGlicmFyeShuYW1lKSkgewogICAgICBsaWJyYXJpZXMu
        c3BsaWNlKGNvcmVMaWJJbmRleCsrLCAwLCB7bmFtZTogbmFtZSwgdmVyc2lv
        bjogdmVyc2lvbn0pOwogICAgfQogIH07CgogIGxpYnJhcmllcy5kZVJlZ2lz
        dGVyID0gZnVuY3Rpb24obmFtZSkgewogICAgdmFyIGxpYiA9IGdldExpYnJh
        cnkobmFtZSk7CiAgICBpZiAobGliKSBsaWJyYXJpZXMuc3BsaWNlKGluZGV4
        T2YobGlicmFyaWVzLCBsaWIpLCAxKTsKICB9OwoKICBsaWJyYXJpZXMuZWFj
        aCA9IGZ1bmN0aW9uIChjYWxsYmFjaykgewogICAgZm9yRWFjaChsaWJyYXJp
        ZXMsIGZ1bmN0aW9uKGxpYikgewogICAgICBjYWxsYmFjayhsaWIubmFtZSwg
        bGliLnZlcnNpb24pOwogICAgfSk7CiAgfTsKCiAgcmV0dXJuIGxpYnJhcmll
        czsKfSgpOwoKRW1iZXIubGlicmFyaWVzLnJlZ2lzdGVyQ29yZUxpYnJhcnko
        J0VtYmVyJywgRW1iZXIuVkVSU0lPTik7Cgp9KSgpOwoKCgooZnVuY3Rpb24o
        KSB7Ci8qKgpFbWJlciBNZXRhbAoKQG1vZHVsZSBlbWJlcgpAc3VibW9kdWxl
        IGVtYmVyLW1ldGFsCiovCgp9KSgpOwoKKGZ1bmN0aW9uKCkgewovKioKICBA
        Y2xhc3MgUlNWUAogIEBtb2R1bGUgUlNWUAogICovCmRlZmluZSgicnN2cC9h
        bGwiLCAKICBbIi4vcHJvbWlzZSIsImV4cG9ydHMiXSwKICBmdW5jdGlvbihf
        X2RlcGVuZGVuY3kxX18sIF9fZXhwb3J0c19fKSB7CiAgICAidXNlIHN0cmlj
        dCI7CiAgICB2YXIgUHJvbWlzZSA9IF9fZGVwZW5kZW5jeTFfX1siZGVmYXVs
        dCJdOwoKICAgIC8qKgogICAgICBUaGlzIGlzIGEgY29udmVuaWVudCBhbGlh
        cyBmb3IgYFJTVlAuUHJvbWlzZS5hbGxgLgoKICAgICAgQG1ldGhvZCBhbGwK
        ICAgICAgQGZvciBSU1ZQCiAgICAgIEBwYXJhbSB7QXJyYXl9IGFycmF5IEFy
        cmF5IG9mIHByb21pc2VzLgogICAgICBAcGFyYW0ge1N0cmluZ30gbGFiZWwg
        QW4gb3B0aW9uYWwgbGFiZWwuIFRoaXMgaXMgdXNlZnVsCiAgICAgIGZvciB0
        b29saW5nLgogICAgICBAc3RhdGljCiAgICAqLwogICAgX19leHBvcnRzX19b
        ImRlZmF1bHQiXSA9IGZ1bmN0aW9uIGFsbChhcnJheSwgbGFiZWwpIHsKICAg
        ICAgcmV0dXJuIFByb21pc2UuYWxsKGFycmF5LCBsYWJlbCk7CiAgICB9Owog
        IH0pOwpkZWZpbmUoInJzdnAvYWxsX3NldHRsZWQiLCAKICBbIi4vcHJvbWlz
        ZSIsIi4vdXRpbHMiLCJleHBvcnRzIl0sCiAgZnVuY3Rpb24oX19kZXBlbmRl
        bmN5MV9fLCBfX2RlcGVuZGVuY3kyX18sIF9fZXhwb3J0c19fKSB7CiAgICAi
        dXNlIHN0cmljdCI7CiAgICB2YXIgUHJvbWlzZSA9IF9fZGVwZW5kZW5jeTFf
        X1siZGVmYXVsdCJdOwogICAgdmFyIGlzQXJyYXkgPSBfX2RlcGVuZGVuY3ky
        X18uaXNBcnJheTsKICAgIHZhciBpc05vblRoZW5hYmxlID0gX19kZXBlbmRl
        bmN5Ml9fLmlzTm9uVGhlbmFibGU7CgogICAgLyoqCiAgICAgIGBSU1ZQLmFs
        bFNldHRsZWRgIGlzIHNpbWlsYXIgdG8gYFJTVlAuYWxsYCwgYnV0IGluc3Rl
        YWQgb2YgaW1wbGVtZW50aW5nCiAgICAgIGEgZmFpbC1mYXN0IG1ldGhvZCwg
        aXQgd2FpdHMgdW50aWwgYWxsIHRoZSBwcm9taXNlcyBoYXZlIHJldHVybmVk
        IGFuZAogICAgICBzaG93cyB5b3UgYWxsIHRoZSByZXN1bHRzLiBUaGlzIGlz
        IHVzZWZ1bCBpZiB5b3Ugd2FudCB0byBoYW5kbGUgbXVsdGlwbGUKICAgICAg
        cHJvbWlzZXMnIGZhaWx1cmUgc3RhdGVzIHRvZ2V0aGVyIGFzIGEgc2V0LgoK
        ICAgICAgUmV0dXJucyBhIHByb21pc2UgdGhhdCBpcyBmdWxmaWxsZWQgd2hl
        biBhbGwgdGhlIGdpdmVuIHByb21pc2VzIGhhdmUgYmVlbgogICAgICBzZXR0
        bGVkLiBUaGUgcmV0dXJuIHByb21pc2UgaXMgZnVsZmlsbGVkIHdpdGggYW4g
        YXJyYXkgb2YgdGhlIHN0YXRlcyBvZgogICAgICB0aGUgcHJvbWlzZXMgcGFz
        c2VkIGludG8gdGhlIGBwcm9taXNlc2AgYXJyYXkgYXJndW1lbnQuCgogICAg
        ICBFYWNoIHN0YXRlIG9iamVjdCB3aWxsIGVpdGhlciBpbmRpY2F0ZSBmdWxm
        aWxsbWVudCBvciByZWplY3Rpb24sIGFuZAogICAgICBwcm92aWRlIHRoZSBj
        b3JyZXNwb25kaW5nIHZhbHVlIG9yIHJlYXNvbi4gVGhlIHN0YXRlcyB3aWxs
        IHRha2Ugb25lIG9mCiAgICAgIHRoZSBmb2xsb3dpbmcgZm9ybWF0czoKCiAg
        ICAgIGBgYGphdmFzY3JpcHQKICAgICAgeyBzdGF0ZTogJ2Z1bGZpbGxlZCcs
        IHZhbHVlOiB2YWx1ZSB9CiAgICAgICAgb3IKICAgICAgeyBzdGF0ZTogJ3Jl
        amVjdGVkJywgcmVhc29uOiByZWFzb24gfQogICAgICBgYGAKCiAgICAgIEV4
        YW1wbGU6CgogICAgICBgYGBqYXZhc2NyaXB0CiAgICAgIHZhciBwcm9taXNl
        MSA9IFJTVlAuUHJvbWlzZS5yZXNvbHZlKDEpOwogICAgICB2YXIgcHJvbWlz
        ZTIgPSBSU1ZQLlByb21pc2UucmVqZWN0KG5ldyBFcnJvcignMicpKTsKICAg
        ICAgdmFyIHByb21pc2UzID0gUlNWUC5Qcm9taXNlLnJlamVjdChuZXcgRXJy
        b3IoJzMnKSk7CiAgICAgIHZhciBwcm9taXNlcyA9IFsgcHJvbWlzZTEsIHBy
        b21pc2UyLCBwcm9taXNlMyBdOwoKICAgICAgUlNWUC5hbGxTZXR0bGVkKHBy
        b21pc2VzKS50aGVuKGZ1bmN0aW9uKGFycmF5KXsKICAgICAgICAvLyBhcnJh
        eSA9PSBbCiAgICAgICAgLy8gICB7IHN0YXRlOiAnZnVsZmlsbGVkJywgdmFs
        dWU6IDEgfSwKICAgICAgICAvLyAgIHsgc3RhdGU6ICdyZWplY3RlZCcsIHJl
        YXNvbjogRXJyb3IgfSwKICAgICAgICAvLyAgIHsgc3RhdGU6ICdyZWplY3Rl
        ZCcsIHJlYXNvbjogRXJyb3IgfQogICAgICAgIC8vIF0KICAgICAgICAvLyBO
        b3RlIHRoYXQgZm9yIHRoZSBzZWNvbmQgaXRlbSwgcmVhc29uLm1lc3NhZ2Ug
        d2lsbCBiZSAiMiIsIGFuZCBmb3IgdGhlCiAgICAgICAgLy8gdGhpcmQgaXRl
        bSwgcmVhc29uLm1lc3NhZ2Ugd2lsbCBiZSAiMyIuCiAgICAgIH0sIGZ1bmN0
        aW9uKGVycm9yKSB7CiAgICAgICAgLy8gTm90IHJ1bi4gKFRoaXMgYmxvY2sg
        d291bGQgb25seSBiZSBjYWxsZWQgaWYgYWxsU2V0dGxlZCBoYWQgZmFpbGVk
        LAogICAgICAgIC8vIGZvciBpbnN0YW5jZSBpZiBwYXNzZWQgYW4gaW5jb3Jy
        ZWN0IGFyZ3VtZW50IHR5cGUuKQogICAgICB9KTsKICAgICAgYGBgCgogICAg
        ICBAbWV0aG9kIGFsbFNldHRsZWQKICAgICAgQGZvciBSU1ZQCiAgICAgIEBw
        YXJhbSB7QXJyYXl9IHByb21pc2VzCiAgICAgIEBwYXJhbSB7U3RyaW5nfSBs
        YWJlbCAtIG9wdGlvbmFsIHN0cmluZyB0aGF0IGRlc2NyaWJlcyB0aGUgcHJv
        bWlzZS4KICAgICAgVXNlZnVsIGZvciB0b29saW5nLgogICAgICBAcmV0dXJu
        IHtQcm9taXNlfSBwcm9taXNlIHRoYXQgaXMgZnVsZmlsbGVkIHdpdGggYW4g
        YXJyYXkgb2YgdGhlIHNldHRsZWQKICAgICAgc3RhdGVzIG9mIHRoZSBjb25z
        dGl0dWVudCBwcm9taXNlcy4KICAgICAgQHN0YXRpYwogICAgKi8KCiAgICBf
        X2V4cG9ydHNfX1siZGVmYXVsdCJdID0gZnVuY3Rpb24gYWxsU2V0dGxlZChl
        bnRyaWVzLCBsYWJlbCkgewogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVu
        Y3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgaWYgKCFpc0FycmF5
        KGVudHJpZXMpKSB7CiAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdZ
        b3UgbXVzdCBwYXNzIGFuIGFycmF5IHRvIGFsbFNldHRsZWQuJyk7CiAgICAg
        ICAgfQoKICAgICAgICB2YXIgcmVtYWluaW5nID0gZW50cmllcy5sZW5ndGg7
        CiAgICAgICAgdmFyIGVudHJ5OwoKICAgICAgICBpZiAocmVtYWluaW5nID09
        PSAwKSB7CiAgICAgICAgICByZXNvbHZlKFtdKTsKICAgICAgICAgIHJldHVy
        bjsKICAgICAgICB9CgogICAgICAgIHZhciByZXN1bHRzID0gbmV3IEFycmF5
        KHJlbWFpbmluZyk7CgogICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZFJlc29s
        dmVyKGluZGV4KSB7CiAgICAgICAgICByZXR1cm4gZnVuY3Rpb24odmFsdWUp
        IHsKICAgICAgICAgICAgcmVzb2x2ZUFsbChpbmRleCwgZnVsZmlsbGVkKHZh
        bHVlKSk7CiAgICAgICAgICB9OwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rp
        b24gcmVqZWN0ZWRSZXNvbHZlcihpbmRleCkgewogICAgICAgICAgcmV0dXJu
        IGZ1bmN0aW9uKHJlYXNvbikgewogICAgICAgICAgICByZXNvbHZlQWxsKGlu
        ZGV4LCByZWplY3RlZChyZWFzb24pKTsKICAgICAgICAgIH07CiAgICAgICAg
        fQoKICAgICAgICBmdW5jdGlvbiByZXNvbHZlQWxsKGluZGV4LCB2YWx1ZSkg
        ewogICAgICAgICAgcmVzdWx0c1tpbmRleF0gPSB2YWx1ZTsKICAgICAgICAg
        IGlmICgtLXJlbWFpbmluZyA9PT0gMCkgewogICAgICAgICAgICByZXNvbHZl
        KHJlc3VsdHMpOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgZm9y
        ICh2YXIgaW5kZXggPSAwOyBpbmRleCA8IGVudHJpZXMubGVuZ3RoOyBpbmRl
        eCsrKSB7CiAgICAgICAgICBlbnRyeSA9IGVudHJpZXNbaW5kZXhdOwoKICAg
        ICAgICAgIGlmIChpc05vblRoZW5hYmxlKGVudHJ5KSkgewogICAgICAgICAg
        ICByZXNvbHZlQWxsKGluZGV4LCBmdWxmaWxsZWQoZW50cnkpKTsKICAgICAg
        ICAgIH0gZWxzZSB7CiAgICAgICAgICAgIFByb21pc2UuY2FzdChlbnRyeSku
        dGhlbihmdWxmaWxsZWRSZXNvbHZlcihpbmRleCksIHJlamVjdGVkUmVzb2x2
        ZXIoaW5kZXgpKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIGxh
        YmVsKTsKICAgIH07CgogICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7
        CiAgICAgIHJldHVybiB7IHN0YXRlOiAnZnVsZmlsbGVkJywgdmFsdWU6IHZh
        bHVlIH07CiAgICB9CgogICAgZnVuY3Rpb24gcmVqZWN0ZWQocmVhc29uKSB7
        CiAgICAgIHJldHVybiB7IHN0YXRlOiAncmVqZWN0ZWQnLCByZWFzb246IHJl
        YXNvbiB9OwogICAgfQogIH0pOwpkZWZpbmUoInJzdnAvY29uZmlnIiwgCiAg
        WyIuL2V2ZW50cyIsImV4cG9ydHMiXSwKICBmdW5jdGlvbihfX2RlcGVuZGVu
        Y3kxX18sIF9fZXhwb3J0c19fKSB7CiAgICAidXNlIHN0cmljdCI7CiAgICB2
        YXIgRXZlbnRUYXJnZXQgPSBfX2RlcGVuZGVuY3kxX19bImRlZmF1bHQiXTsK
        CiAgICB2YXIgY29uZmlnID0gewogICAgICBpbnN0cnVtZW50OiBmYWxzZQog
        ICAgfTsKCiAgICBFdmVudFRhcmdldC5taXhpbihjb25maWcpOwoKICAgIGZ1
        bmN0aW9uIGNvbmZpZ3VyZShuYW1lLCB2YWx1ZSkgewogICAgICBpZiAobmFt
        ZSA9PT0gJ29uZXJyb3InKSB7CiAgICAgICAgLy8gaGFuZGxlIGZvciBsZWdh
        Y3kgdXNlcnMgdGhhdCBleHBlY3QgdGhlIGFjdHVhbAogICAgICAgIC8vIGVy
        cm9yIHRvIGJlIHBhc3NlZCB0byB0aGVpciBmdW5jdGlvbiBhZGRlZCB2aWEK
        ICAgICAgICAvLyBgUlNWUC5jb25maWd1cmUoJ29uZXJyb3InLCBzb21lRnVu
        Y3Rpb25IZXJlKTtgCiAgICAgICAgY29uZmlnLm9uKCdlcnJvcicsIHZhbHVl
        KTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGlmIChhcmd1bWVu
        dHMubGVuZ3RoID09PSAyKSB7CiAgICAgICAgY29uZmlnW25hbWVdID0gdmFs
        dWU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIGNvbmZpZ1tuYW1l
        XTsKICAgICAgfQogICAgfQoKICAgIF9fZXhwb3J0c19fLmNvbmZpZyA9IGNv
        bmZpZzsKICAgIF9fZXhwb3J0c19fLmNvbmZpZ3VyZSA9IGNvbmZpZ3VyZTsK
        ICB9KTsKZGVmaW5lKCJyc3ZwL2RlZmVyIiwgCiAgWyIuL3Byb21pc2UiLCJl
        eHBvcnRzIl0sCiAgZnVuY3Rpb24oX19kZXBlbmRlbmN5MV9fLCBfX2V4cG9y
        dHNfXykgewogICAgInVzZSBzdHJpY3QiOwogICAgdmFyIFByb21pc2UgPSBf
        X2RlcGVuZGVuY3kxX19bImRlZmF1bHQiXTsKCiAgICAvKioKICAgICAgYFJT
        VlAuZGVmZXJgIHJldHVybnMgYW4gb2JqZWN0IHNpbWlsYXIgdG8galF1ZXJ5
        J3MgYCQuRGVmZXJyZWRgLgogICAgICBgUlNWUC5kZWZlcmAgc2hvdWxkIGJl
        IHVzZWQgd2hlbiBwb3J0aW5nIG92ZXIgY29kZSByZWxpYW50IG9uIGAkLkRl
        ZmVycmVkYCdzCiAgICAgIGludGVyZmFjZS4gTmV3IGNvZGUgc2hvdWxkIHVz
        ZSB0aGUgYFJTVlAuUHJvbWlzZWAgY29uc3RydWN0b3IgaW5zdGVhZC4KCiAg
        ICAgIFRoZSBvYmplY3QgcmV0dXJuZWQgZnJvbSBgUlNWUC5kZWZlcmAgaXMg
        YSBwbGFpbiBvYmplY3Qgd2l0aCB0aHJlZSBwcm9wZXJ0aWVzOgoKICAgICAg
        KiBwcm9taXNlIC0gYW4gYFJTVlAuUHJvbWlzZWAuCiAgICAgICogcmVqZWN0
        IC0gYSBmdW5jdGlvbiB0aGF0IGNhdXNlcyB0aGUgYHByb21pc2VgIHByb3Bl
        cnR5IG9uIHRoaXMgb2JqZWN0IHRvCiAgICAgICAgYmVjb21lIHJlamVjdGVk
        CiAgICAgICogcmVzb2x2ZSAtIGEgZnVuY3Rpb24gdGhhdCBjYXVzZXMgdGhl
        IGBwcm9taXNlYCBwcm9wZXJ0eSBvbiB0aGlzIG9iamVjdCB0bwogICAgICAg
        IGJlY29tZSBmdWxmaWxsZWQuCgogICAgICBFeGFtcGxlOgoKICAgICAgIGBg
        YGphdmFzY3JpcHQKICAgICAgIHZhciBkZWZlcnJlZCA9IFJTVlAuZGVmZXIo
        KTsKCiAgICAgICBkZWZlcnJlZC5yZXNvbHZlKCJTdWNjZXNzISIpOwoKICAg
        ICAgIGRlZmVyZWQucHJvbWlzZS50aGVuKGZ1bmN0aW9uKHZhbHVlKXsKICAg
        ICAgICAgLy8gdmFsdWUgaGVyZSBpcyAiU3VjY2VzcyEiCiAgICAgICB9KTsK
        ICAgICAgIGBgYAoKICAgICAgQG1ldGhvZCBkZWZlcgogICAgICBAZm9yIFJT
        VlAKICAgICAgQHBhcmFtIHtTdHJpbmd9IGxhYmVsIG9wdGlvbmFsIHN0cmlu
        ZyBmb3IgbGFiZWxpbmcgdGhlIHByb21pc2UuCiAgICAgIFVzZWZ1bCBmb3Ig
        dG9vbGluZy4KICAgICAgQHJldHVybiB7T2JqZWN0fQogICAgICovCgogICAg
        X19leHBvcnRzX19bImRlZmF1bHQiXSA9IGZ1bmN0aW9uIGRlZmVyKGxhYmVs
        KSB7CiAgICAgIHZhciBkZWZlcnJlZCA9IHsgfTsKCiAgICAgIGRlZmVycmVk
        LnByb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWpl
        Y3QpIHsKICAgICAgICBkZWZlcnJlZC5yZXNvbHZlID0gcmVzb2x2ZTsKICAg
        ICAgICBkZWZlcnJlZC5yZWplY3QgPSByZWplY3Q7CiAgICAgIH0sIGxhYmVs
        KTsKCiAgICAgIHJldHVybiBkZWZlcnJlZDsKICAgIH07CiAgfSk7CmRlZmlu
        ZSgicnN2cC9ldmVudHMiLCAKICBbImV4cG9ydHMiXSwKICBmdW5jdGlvbihf
        X2V4cG9ydHNfXykgewogICAgInVzZSBzdHJpY3QiOwogICAgdmFyIGluZGV4
        T2YgPSBmdW5jdGlvbihjYWxsYmFja3MsIGNhbGxiYWNrKSB7CiAgICAgIGZv
        ciAodmFyIGk9MCwgbD1jYWxsYmFja3MubGVuZ3RoOyBpPGw7IGkrKykgewog
        ICAgICAgIGlmIChjYWxsYmFja3NbaV0gPT09IGNhbGxiYWNrKSB7IHJldHVy
        biBpOyB9CiAgICAgIH0KCiAgICAgIHJldHVybiAtMTsKICAgIH07CgogICAg
        dmFyIGNhbGxiYWNrc0ZvciA9IGZ1bmN0aW9uKG9iamVjdCkgewogICAgICB2
        YXIgY2FsbGJhY2tzID0gb2JqZWN0Ll9wcm9taXNlQ2FsbGJhY2tzOwoKICAg
        ICAgaWYgKCFjYWxsYmFja3MpIHsKICAgICAgICBjYWxsYmFja3MgPSBvYmpl
        Y3QuX3Byb21pc2VDYWxsYmFja3MgPSB7fTsKICAgICAgfQoKICAgICAgcmV0
        dXJuIGNhbGxiYWNrczsKICAgIH07CgogICAgLyoqCiAgICAgIEBjbGFzcyBS
        U1ZQLkV2ZW50VGFyZ2V0CiAgICAqLwogICAgX19leHBvcnRzX19bImRlZmF1
        bHQiXSA9IHsKCiAgICAgIC8qKgogICAgICAgIGBSU1ZQLkV2ZW50VGFyZ2V0
        Lm1peGluYCBleHRlbmRzIGFuIG9iamVjdCB3aXRoIEV2ZW50VGFyZ2V0IG1l
        dGhvZHMuIEZvcgogICAgICAgIEV4YW1wbGU6CgogICAgICAgIGBgYGphdmFz
        Y3JpcHQKICAgICAgICB2YXIgb2JqZWN0ID0ge307CgogICAgICAgIFJTVlAu
        RXZlbnRUYXJnZXQubWl4aW4ob2JqZWN0KTsKCiAgICAgICAgb2JqZWN0Lm9u
        KCJmaW5pc2hlZCIsIGZ1bmN0aW9uKGV2ZW50KSB7CiAgICAgICAgICAvLyBo
        YW5kbGUgZXZlbnQKICAgICAgICB9KTsKCiAgICAgICAgb2JqZWN0LnRyaWdn
        ZXIoImZpbmlzaGVkIiwgeyBkZXRhaWw6IHZhbHVlIH0pOwogICAgICAgIGBg
        YAoKICAgICAgICBgRXZlbnRUYXJnZXQubWl4aW5gIGFsc28gd29ya3Mgd2l0
        aCBwcm90b3R5cGVzOgoKICAgICAgICBgYGBqYXZhc2NyaXB0CiAgICAgICAg
        dmFyIFBlcnNvbiA9IGZ1bmN0aW9uKCkge307CiAgICAgICAgUlNWUC5FdmVu
        dFRhcmdldC5taXhpbihQZXJzb24ucHJvdG90eXBlKTsKCiAgICAgICAgdmFy
        IHllaHVkYSA9IG5ldyBQZXJzb24oKTsKICAgICAgICB2YXIgdG9tID0gbmV3
        IFBlcnNvbigpOwoKICAgICAgICB5ZWh1ZGEub24oInBva2UiLCBmdW5jdGlv
        bihldmVudCkgewogICAgICAgICAgY29uc29sZS5sb2coIlllaHVkYSBzYXlz
        IE9XIik7CiAgICAgICAgfSk7CgogICAgICAgIHRvbS5vbigicG9rZSIsIGZ1
        bmN0aW9uKGV2ZW50KSB7CiAgICAgICAgICBjb25zb2xlLmxvZygiVG9tIHNh
        eXMgT1ciKTsKICAgICAgICB9KTsKCiAgICAgICAgeWVodWRhLnRyaWdnZXIo
        InBva2UiKTsKICAgICAgICB0b20udHJpZ2dlcigicG9rZSIpOwogICAgICAg
        IGBgYAoKICAgICAgICBAbWV0aG9kIG1peGluCiAgICAgICAgQHBhcmFtIHtP
        YmplY3R9IG9iamVjdCBvYmplY3QgdG8gZXh0ZW5kIHdpdGggRXZlbnRUYXJn
        ZXQgbWV0aG9kcwogICAgICAgIEBwcml2YXRlCiAgICAgICovCiAgICAgIG1p
        eGluOiBmdW5jdGlvbihvYmplY3QpIHsKICAgICAgICBvYmplY3Qub24gPSB0
        aGlzLm9uOwogICAgICAgIG9iamVjdC5vZmYgPSB0aGlzLm9mZjsKICAgICAg
        ICBvYmplY3QudHJpZ2dlciA9IHRoaXMudHJpZ2dlcjsKICAgICAgICBvYmpl
        Y3QuX3Byb21pc2VDYWxsYmFja3MgPSB1bmRlZmluZWQ7CiAgICAgICAgcmV0
        dXJuIG9iamVjdDsKICAgICAgfSwKCiAgICAgIC8qKgogICAgICAgIFJlZ2lz
        dGVycyBhIGNhbGxiYWNrIHRvIGJlIGV4ZWN1dGVkIHdoZW4gYGV2ZW50TmFt
        ZWAgaXMgdHJpZ2dlcmVkCgogICAgICAgIGBgYGphdmFzY3JpcHQKICAgICAg
        ICBvYmplY3Qub24oJ2V2ZW50JywgZnVuY3Rpb24oZXZlbnRJbmZvKXsKICAg
        ICAgICAgIC8vIGhhbmRsZSB0aGUgZXZlbnQKICAgICAgICB9KTsKCiAgICAg
        ICAgb2JqZWN0LnRyaWdnZXIoJ2V2ZW50Jyk7CiAgICAgICAgYGBgCgogICAg
        ICAgIEBtZXRob2Qgb24KICAgICAgICBAcGFyYW0ge1N0cmluZ30gZXZlbnRO
        YW1lIG5hbWUgb2YgdGhlIGV2ZW50IHRvIGxpc3RlbiBmb3IKICAgICAgICBA
        cGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjayBmdW5jdGlvbiB0byBiZSBjYWxs
        ZWQgd2hlbiB0aGUgZXZlbnQgaXMgdHJpZ2dlcmVkLgogICAgICAgIEBwcml2
        YXRlCiAgICAgICovCiAgICAgIG9uOiBmdW5jdGlvbihldmVudE5hbWUsIGNh
        bGxiYWNrKSB7CiAgICAgICAgdmFyIGFsbENhbGxiYWNrcyA9IGNhbGxiYWNr
        c0Zvcih0aGlzKSwgY2FsbGJhY2tzOwoKICAgICAgICBjYWxsYmFja3MgPSBh
        bGxDYWxsYmFja3NbZXZlbnROYW1lXTsKCiAgICAgICAgaWYgKCFjYWxsYmFj
        a3MpIHsKICAgICAgICAgIGNhbGxiYWNrcyA9IGFsbENhbGxiYWNrc1tldmVu
        dE5hbWVdID0gW107CiAgICAgICAgfQoKICAgICAgICBpZiAoaW5kZXhPZihj
        YWxsYmFja3MsIGNhbGxiYWNrKSA9PT0gLTEpIHsKICAgICAgICAgIGNhbGxi
        YWNrcy5wdXNoKGNhbGxiYWNrKTsKICAgICAgICB9CiAgICAgIH0sCgogICAg
        ICAvKioKICAgICAgICBZb3UgY2FuIHVzZSBgb2ZmYCB0byBzdG9wIGZpcmlu
        ZyBhIHBhcnRpY3VsYXIgY2FsbGJhY2sgZm9yIGFuIGV2ZW50OgoKICAgICAg
        ICBgYGBqYXZhc2NyaXB0CiAgICAgICAgZnVuY3Rpb24gZG9TdHVmZigpIHsg
        Ly8gZG8gc3R1ZmYhIH0KICAgICAgICBvYmplY3Qub24oJ3N0dWZmJywgZG9T
        dHVmZik7CgogICAgICAgIG9iamVjdC50cmlnZ2VyKCdzdHVmZicpOyAvLyBk
        b1N0dWZmIHdpbGwgYmUgY2FsbGVkCgogICAgICAgIC8vIFVucmVnaXN0ZXIg
        T05MWSB0aGUgZG9TdHVmZiBjYWxsYmFjawogICAgICAgIG9iamVjdC5vZmYo
        J3N0dWZmJywgZG9TdHVmZik7CiAgICAgICAgb2JqZWN0LnRyaWdnZXIoJ3N0
        dWZmJyk7IC8vIGRvU3R1ZmYgd2lsbCBOT1QgYmUgY2FsbGVkCiAgICAgICAg
        YGBgCgogICAgICAgIElmIHlvdSBkb24ndCBwYXNzIGEgYGNhbGxiYWNrYCBh
        cmd1bWVudCB0byBgb2ZmYCwgQUxMIGNhbGxiYWNrcyBmb3IgdGhlCiAgICAg
        ICAgZXZlbnQgd2lsbCBub3QgYmUgZXhlY3V0ZWQgd2hlbiB0aGUgZXZlbnQg
        ZmlyZXMuIEZvciBleGFtcGxlOgoKICAgICAgICBgYGBqYXZhc2NyaXB0CiAg
        ICAgICAgdmFyIGNhbGxiYWNrMSA9IGZ1bmN0aW9uKCl7fTsKICAgICAgICB2
        YXIgY2FsbGJhY2syID0gZnVuY3Rpb24oKXt9OwoKICAgICAgICBvYmplY3Qu
        b24oJ3N0dWZmJywgY2FsbGJhY2sxKTsKICAgICAgICBvYmplY3Qub24oJ3N0
        dWZmJywgY2FsbGJhY2syKTsKCiAgICAgICAgb2JqZWN0LnRyaWdnZXIoJ3N0
        dWZmJyk7IC8vIGNhbGxiYWNrMSBhbmQgY2FsbGJhY2syIHdpbGwgYmUgZXhl
        Y3V0ZWQuCgogICAgICAgIG9iamVjdC5vZmYoJ3N0dWZmJyk7CiAgICAgICAg
        b2JqZWN0LnRyaWdnZXIoJ3N0dWZmJyk7IC8vIGNhbGxiYWNrMSBhbmQgY2Fs
        bGJhY2syIHdpbGwgbm90IGJlIGV4ZWN1dGVkIQogICAgICAgIGBgYAoKICAg
        ICAgICBAbWV0aG9kIG9mZgogICAgICAgIEBwYXJhbSB7U3RyaW5nfSBldmVu
        dE5hbWUgZXZlbnQgdG8gc3RvcCBsaXN0ZW5pbmcgdG8KICAgICAgICBAcGFy
        YW0ge0Z1bmN0aW9ufSBjYWxsYmFjayBvcHRpb25hbCBhcmd1bWVudC4gSWYg
        Z2l2ZW4sIG9ubHkgdGhlIGZ1bmN0aW9uCiAgICAgICAgZ2l2ZW4gd2lsbCBi
        ZSByZW1vdmVkIGZyb20gdGhlIGV2ZW50J3MgY2FsbGJhY2sgcXVldWUuIElm
        IG5vIGBjYWxsYmFja2AKICAgICAgICBhcmd1bWVudCBpcyBnaXZlbiwgYWxs
        IGNhbGxiYWNrcyB3aWxsIGJlIHJlbW92ZWQgZnJvbSB0aGUgZXZlbnQncyBj
        YWxsYmFjawogICAgICAgIHF1ZXVlLgogICAgICAgIEBwcml2YXRlCgogICAg
        ICAqLwogICAgICBvZmY6IGZ1bmN0aW9uKGV2ZW50TmFtZSwgY2FsbGJhY2sp
        IHsKICAgICAgICB2YXIgYWxsQ2FsbGJhY2tzID0gY2FsbGJhY2tzRm9yKHRo
        aXMpLCBjYWxsYmFja3MsIGluZGV4OwoKICAgICAgICBpZiAoIWNhbGxiYWNr
        KSB7CiAgICAgICAgICBhbGxDYWxsYmFja3NbZXZlbnROYW1lXSA9IFtdOwog
        ICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgY2FsbGJhY2tz
        ID0gYWxsQ2FsbGJhY2tzW2V2ZW50TmFtZV07CgogICAgICAgIGluZGV4ID0g
        aW5kZXhPZihjYWxsYmFja3MsIGNhbGxiYWNrKTsKCiAgICAgICAgaWYgKGlu
        ZGV4ICE9PSAtMSkgeyBjYWxsYmFja3Muc3BsaWNlKGluZGV4LCAxKTsgfQog
        ICAgICB9LAoKICAgICAgLyoqCiAgICAgICAgVXNlIGB0cmlnZ2VyYCB0byBm
        aXJlIGN1c3RvbSBldmVudHMuIEZvciBleGFtcGxlOgoKICAgICAgICBgYGBq
        YXZhc2NyaXB0CiAgICAgICAgb2JqZWN0Lm9uKCdmb28nLCBmdW5jdGlvbigp
        ewogICAgICAgICAgY29uc29sZS5sb2coJ2ZvbyBldmVudCBoYXBwZW5lZCEn
        KTsKICAgICAgICB9KTsKICAgICAgICBvYmplY3QudHJpZ2dlcignZm9vJyk7
        CiAgICAgICAgLy8gJ2ZvbyBldmVudCBoYXBwZW5lZCEnIGxvZ2dlZCB0byB0
        aGUgY29uc29sZQogICAgICAgIGBgYAoKICAgICAgICBZb3UgY2FuIGFsc28g
        cGFzcyBhIHZhbHVlIGFzIGEgc2Vjb25kIGFyZ3VtZW50IHRvIGB0cmlnZ2Vy
        YCB0aGF0IHdpbGwgYmUKICAgICAgICBwYXNzZWQgYXMgYW4gYXJndW1lbnQg
        dG8gYWxsIGV2ZW50IGxpc3RlbmVycyBmb3IgdGhlIGV2ZW50OgoKICAgICAg
        ICBgYGBqYXZhc2NyaXB0CiAgICAgICAgb2JqZWN0Lm9uKCdmb28nLCBmdW5j
        dGlvbih2YWx1ZSl7CiAgICAgICAgICBjb25zb2xlLmxvZyh2YWx1ZS5uYW1l
        KTsKICAgICAgICB9KTsKCiAgICAgICAgb2JqZWN0LnRyaWdnZXIoJ2Zvbycs
        IHsgbmFtZTogJ2JhcicgfSk7CiAgICAgICAgLy8gJ2JhcicgbG9nZ2VkIHRv
        IHRoZSBjb25zb2xlCiAgICAgICAgYGBgCgogICAgICAgIEBtZXRob2QgdHJp
        Z2dlcgogICAgICAgIEBwYXJhbSB7U3RyaW5nfSBldmVudE5hbWUgbmFtZSBv
        ZiB0aGUgZXZlbnQgdG8gYmUgdHJpZ2dlcmVkCiAgICAgICAgQHBhcmFtIHtB
        bnl9IG9wdGlvbnMgb3B0aW9uYWwgdmFsdWUgdG8gYmUgcGFzc2VkIHRvIGFu
        eSBldmVudCBoYW5kbGVycyBmb3IKICAgICAgICB0aGUgZ2l2ZW4gYGV2ZW50
        TmFtZWAKICAgICAgICBAcHJpdmF0ZQogICAgICAqLwogICAgICB0cmlnZ2Vy
        OiBmdW5jdGlvbihldmVudE5hbWUsIG9wdGlvbnMpIHsKICAgICAgICB2YXIg
        YWxsQ2FsbGJhY2tzID0gY2FsbGJhY2tzRm9yKHRoaXMpLAogICAgICAgICAg
        ICBjYWxsYmFja3MsIGNhbGxiYWNrVHVwbGUsIGNhbGxiYWNrLCBiaW5kaW5n
        OwoKICAgICAgICBpZiAoY2FsbGJhY2tzID0gYWxsQ2FsbGJhY2tzW2V2ZW50
        TmFtZV0pIHsKICAgICAgICAgIC8vIERvbid0IGNhY2hlIHRoZSBjYWxsYmFj
        a3MubGVuZ3RoIHNpbmNlIGl0IG1heSBncm93CiAgICAgICAgICBmb3IgKHZh
        ciBpPTA7IGk8Y2FsbGJhY2tzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAg
        IGNhbGxiYWNrID0gY2FsbGJhY2tzW2ldOwoKICAgICAgICAgICAgY2FsbGJh
        Y2sob3B0aW9ucyk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAg
        ICB9OwogIH0pOwpkZWZpbmUoInJzdnAvZmlsdGVyIiwgCiAgWyIuL2FsbCIs
        Ii4vbWFwIiwiLi91dGlscyIsImV4cG9ydHMiXSwKICBmdW5jdGlvbihfX2Rl
        cGVuZGVuY3kxX18sIF9fZGVwZW5kZW5jeTJfXywgX19kZXBlbmRlbmN5M19f
        LCBfX2V4cG9ydHNfXykgewogICAgInVzZSBzdHJpY3QiOwogICAgdmFyIGFs
        bCA9IF9fZGVwZW5kZW5jeTFfX1siZGVmYXVsdCJdOwogICAgdmFyIG1hcCA9
        IF9fZGVwZW5kZW5jeTJfX1siZGVmYXVsdCJdOwogICAgdmFyIGlzRnVuY3Rp
        b24gPSBfX2RlcGVuZGVuY3kzX18uaXNGdW5jdGlvbjsKICAgIHZhciBpc0Fy
        cmF5ID0gX19kZXBlbmRlbmN5M19fLmlzQXJyYXk7CgogICAgLyoqCiAgICAg
        YFJTVlAuZmlsdGVyYCBpcyBzaW1pbGFyIHRvIEphdmFTY3JpcHQncyBuYXRp
        dmUgYGZpbHRlcmAgbWV0aG9kLCBleGNlcHQgdGhhdCBpdAogICAgICB3YWl0
        cyBmb3IgYWxsIHByb21pc2VzIHRvIGJlY29tZSBmdWxmaWxsZWQgYmVmb3Jl
        IHJ1bm5pbmcgdGhlIGBmaWx0ZXJGbmAgb24KICAgICAgZWFjaCBpdGVtIGlu
        IGdpdmVuIHRvIGBwcm9taXNlc2AuIGBSU1ZQLmZpbHRlcmAgcmV0dXJucyBh
        IHByb21pc2UgdGhhdCB3aWxsCiAgICAgIGJlY29tZSBmdWxmaWxsZWQgd2l0
        aCB0aGUgcmVzdWx0IG9mIHJ1bm5pbmcgYGZpbHRlckZuYCBvbiB0aGUgdmFs
        dWVzIHRoZQogICAgICBwcm9taXNlcyBiZWNvbWUgZnVsZmlsbGVkIHdpdGgu
        CgogICAgICBGb3IgZXhhbXBsZToKCiAgICAgIGBgYGphdmFzY3JpcHQKCiAg
        ICAgIHZhciBwcm9taXNlMSA9IFJTVlAucmVzb2x2ZSgxKTsKICAgICAgdmFy
        IHByb21pc2UyID0gUlNWUC5yZXNvbHZlKDIpOwogICAgICB2YXIgcHJvbWlz
        ZTMgPSBSU1ZQLnJlc29sdmUoMyk7CgogICAgICB2YXIgZmlsdGVyRm4gPSBm
        dW5jdGlvbihpdGVtKXsKICAgICAgICByZXR1cm4gaXRlbSA+IDE7CiAgICAg
        IH07CgogICAgICBSU1ZQLmZpbHRlcihwcm9taXNlcywgZmlsdGVyRm4pLnRo
        ZW4oZnVuY3Rpb24ocmVzdWx0KXsKICAgICAgICAvLyByZXN1bHQgaXMgWyAy
        LCAzIF0KICAgICAgfSk7CiAgICAgIGBgYAoKICAgICAgSWYgYW55IG9mIHRo
        ZSBgcHJvbWlzZXNgIGdpdmVuIHRvIGBSU1ZQLmZpbHRlcmAgYXJlIHJlamVj
        dGVkLCB0aGUgZmlyc3QgcHJvbWlzZQogICAgICB0aGF0IGlzIHJlamVjdGVk
        IHdpbGwgYmUgZ2l2ZW4gYXMgYW4gYXJndW1lbnQgdG8gdGhlIHJldHVybmVk
        IHByb21pc2UncwogICAgICByZWplY3Rpb24gaGFuZGxlci4gRm9yIGV4YW1w
        bGU6CgogICAgICBgYGBqYXZhc2NyaXB0CiAgICAgIHZhciBwcm9taXNlMSA9
        IFJTVlAucmVzb2x2ZSgxKTsKICAgICAgdmFyIHByb21pc2UyID0gUlNWUC5y
        ZWplY3QobmV3IEVycm9yKCIyIikpOwogICAgICB2YXIgcHJvbWlzZTMgPSBS
        U1ZQLnJlamVjdChuZXcgRXJyb3IoIjMiKSk7CiAgICAgIHZhciBwcm9taXNl
        cyA9IFsgcHJvbWlzZTEsIHByb21pc2UyLCBwcm9taXNlMyBdOwoKICAgICAg
        dmFyIGZpbHRlckZuID0gZnVuY3Rpb24oaXRlbSl7CiAgICAgICAgcmV0dXJu
        IGl0ZW0gPiAxOwogICAgICB9OwoKICAgICAgUlNWUC5maWx0ZXIocHJvbWlz
        ZXMsIGZpbHRlckZuKS50aGVuKGZ1bmN0aW9uKGFycmF5KXsKICAgICAgICAv
        LyBDb2RlIGhlcmUgbmV2ZXIgcnVucyBiZWNhdXNlIHRoZXJlIGFyZSByZWpl
        Y3RlZCBwcm9taXNlcyEKICAgICAgfSwgZnVuY3Rpb24ocmVhc29uKSB7CiAg
        ICAgICAgLy8gcmVhc29uLm1lc3NhZ2UgPT09ICIyIgogICAgICB9KTsKICAg
        ICAgYGBgCgogICAgICBgUlNWUC5maWx0ZXJgIHdpbGwgYWxzbyB3YWl0IGZv
        ciBhbnkgcHJvbWlzZXMgcmV0dXJuZWQgZnJvbSBgZmlsdGVyRm5gLgogICAg
        ICBGb3IgaW5zdGFuY2UsIHlvdSBtYXkgd2FudCB0byBmZXRjaCBhIGxpc3Qg
        b2YgdXNlcnMgdGhlbiByZXR1cm4gYSBzdWJzZXQKICAgICAgb2YgdGhvc2Ug
        dXNlcnMgYmFzZWQgb24gc29tZSBhc3luY2hyb25vdXMgb3BlcmF0aW9uOgoK
        ICAgICAgYGBgamF2YXNjcmlwdAoKICAgICAgdmFyIGFsaWNlID0geyBuYW1l
        OiAnYWxpY2UnIH07CiAgICAgIHZhciBib2IgICA9IHsgbmFtZTogJ2JvYicg
        fTsKICAgICAgdmFyIHVzZXJzID0gWyBhbGljZSwgYm9iIF07CgogICAgICB2
        YXIgcHJvbWlzZXMgPSB1c2Vycy5tYXAoZnVuY3Rpb24odXNlcil7CiAgICAg
        ICAgcmV0dXJuIFJTVlAucmVzb2x2ZSh1c2VyKTsKICAgICAgfSk7CgogICAg
        ICB2YXIgZmlsdGVyRm4gPSBmdW5jdGlvbih1c2VyKXsKICAgICAgICAvLyBI
        ZXJlLCBBbGljZSBoYXMgcGVybWlzc2lvbnMgdG8gY3JlYXRlIGEgYmxvZyBw
        b3N0LCBidXQgQm9iIGRvZXMgbm90LgogICAgICAgIHJldHVybiBnZXRQcml2
        aWxlZ2VzRm9yVXNlcih1c2VyKS50aGVuKGZ1bmN0aW9uKHByaXZzKXsKICAg
        ICAgICAgIHJldHVybiBwcml2cy5jYW5fY3JlYXRlX2Jsb2dfcG9zdCA9PT0g
        dHJ1ZTsKICAgICAgICB9KTsKICAgICAgfTsKICAgICAgUlNWUC5maWx0ZXIo
        cHJvbWlzZXMsIGZpbHRlckZuKS50aGVuKGZ1bmN0aW9uKHVzZXJzKXsKICAg
        ICAgICAvLyB0cnVlLCBiZWNhdXNlIHRoZSBzZXJ2ZXIgdG9sZCB1cyBvbmx5
        IEFsaWNlIGNhbiBjcmVhdGUgYSBibG9nIHBvc3QuCiAgICAgICAgdXNlcnMu
        bGVuZ3RoID09PSAxOwogICAgICAgIC8vIGZhbHNlLCBiZWNhdXNlIEFsaWNl
        IGlzIHRoZSBvbmx5IHVzZXIgcHJlc2VudCBpbiBgdXNlcnNgCiAgICAgICAg
        dXNlcnNbMF0gPT09IGJvYjsKICAgICAgfSk7CiAgICAgIGBgYAoKICAgICAg
        QG1ldGhvZCBmaWx0ZXIKICAgICAgQGZvciBSU1ZQCiAgICAgIEBwYXJhbSB7
        QXJyYXl9IHByb21pc2VzCiAgICAgIEBwYXJhbSB7RnVuY3Rpb259IGZpbHRl
        ckZuIC0gZnVuY3Rpb24gdG8gYmUgY2FsbGVkIG9uIGVhY2ggcmVzb2x2ZWQg
        dmFsdWUgdG8KICAgICAgZmlsdGVyIHRoZSBmaW5hbCByZXN1bHRzLgogICAg
        ICBAcGFyYW0ge1N0cmluZ30gbGFiZWwgb3B0aW9uYWwgc3RyaW5nIGRlc2Ny
        aWJpbmcgdGhlIHByb21pc2UuIFVzZWZ1bCBmb3IKICAgICAgdG9vbGluZy4K
        ICAgICAgQHJldHVybiB7UHJvbWlzZX0KICAgICovCiAgICBmdW5jdGlvbiBm
        aWx0ZXIocHJvbWlzZXMsIGZpbHRlckZuLCBsYWJlbCkgewogICAgICByZXR1
        cm4gYWxsKHByb21pc2VzLCBsYWJlbCkudGhlbihmdW5jdGlvbih2YWx1ZXMp
        ewogICAgICAgIGlmICghaXNBcnJheShwcm9taXNlcykpIHsKICAgICAgICAg
        IHRocm93IG5ldyBUeXBlRXJyb3IoJ1lvdSBtdXN0IHBhc3MgYW4gYXJyYXkg
        dG8gZmlsdGVyLicpOwogICAgICAgIH0KCiAgICAgICAgaWYgKCFpc0Z1bmN0
        aW9uKGZpbHRlckZuKSl7CiAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9y
        KCJZb3UgbXVzdCBwYXNzIGEgZnVuY3Rpb24gdG8gZmlsdGVyJ3Mgc2Vjb25k
        IGFyZ3VtZW50LiIpOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIG1hcChw
        cm9taXNlcywgZmlsdGVyRm4sIGxhYmVsKS50aGVuKGZ1bmN0aW9uKGZpbHRl
        clJlc3VsdHMpewogICAgICAgICAgIHZhciBpLAogICAgICAgICAgICAgICB2
        YWx1ZXNMZW4gPSB2YWx1ZXMubGVuZ3RoLAogICAgICAgICAgICAgICBmaWx0
        ZXJlZCA9IFtdOwoKICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgdmFsdWVz
        TGVuOyBpKyspewogICAgICAgICAgICAgaWYoZmlsdGVyUmVzdWx0c1tpXSkg
        ZmlsdGVyZWQucHVzaCh2YWx1ZXNbaV0pOwogICAgICAgICAgIH0KICAgICAg
        ICAgICByZXR1cm4gZmlsdGVyZWQ7CiAgICAgICAgfSk7CiAgICAgIH0pOwog
        ICAgfQoKICAgIF9fZXhwb3J0c19fWyJkZWZhdWx0Il0gPSBmaWx0ZXI7CiAg
        fSk7CmRlZmluZSgicnN2cC9oYXNoIiwgCiAgWyIuL3Byb21pc2UiLCIuL3V0
        aWxzIiwiZXhwb3J0cyJdLAogIGZ1bmN0aW9uKF9fZGVwZW5kZW5jeTFfXywg
        X19kZXBlbmRlbmN5Ml9fLCBfX2V4cG9ydHNfXykgewogICAgInVzZSBzdHJp
        Y3QiOwogICAgdmFyIFByb21pc2UgPSBfX2RlcGVuZGVuY3kxX19bImRlZmF1
        bHQiXTsKICAgIHZhciBpc05vblRoZW5hYmxlID0gX19kZXBlbmRlbmN5Ml9f
        LmlzTm9uVGhlbmFibGU7CiAgICB2YXIga2V5c09mID0gX19kZXBlbmRlbmN5
        Ml9fLmtleXNPZjsKCiAgICAvKioKICAgICAgYFJTVlAuaGFzaGAgaXMgc2lt
        aWxhciB0byBgUlNWUC5hbGxgLCBidXQgdGFrZXMgYW4gb2JqZWN0IGluc3Rl
        YWQgb2YgYW4gYXJyYXkKICAgICAgZm9yIGl0cyBgcHJvbWlzZXNgIGFyZ3Vt
        ZW50LgoKICAgICAgUmV0dXJucyBhIHByb21pc2UgdGhhdCBpcyBmdWxmaWxs
        ZWQgd2hlbiBhbGwgdGhlIGdpdmVuIHByb21pc2VzIGhhdmUgYmVlbgogICAg
        ICBmdWxmaWxsZWQsIG9yIHJlamVjdGVkIGlmIGFueSBvZiB0aGVtIGJlY29t
        ZSByZWplY3RlZC4gVGhlIHJldHVybmVkIHByb21pc2UKICAgICAgaXMgZnVs
        ZmlsbGVkIHdpdGggYSBoYXNoIHRoYXQgaGFzIHRoZSBzYW1lIGtleSBuYW1l
        cyBhcyB0aGUgYHByb21pc2VzYCBvYmplY3QKICAgICAgYXJndW1lbnQuIElm
        IGFueSBvZiB0aGUgdmFsdWVzIGluIHRoZSBvYmplY3QgYXJlIG5vdCBwcm9t
        aXNlcywgdGhleSB3aWxsCiAgICAgIHNpbXBseSBiZSBjb3BpZWQgb3ZlciB0
        byB0aGUgZnVsZmlsbGVkIG9iamVjdC4KCiAgICAgIEV4YW1wbGU6CgogICAg
        ICBgYGBqYXZhc2NyaXB0CiAgICAgIHZhciBwcm9taXNlcyA9IHsKICAgICAg
        ICBteVByb21pc2U6IFJTVlAucmVzb2x2ZSgxKSwKICAgICAgICB5b3VyUHJv
        bWlzZTogUlNWUC5yZXNvbHZlKDIpLAogICAgICAgIHRoZWlyUHJvbWlzZTog
        UlNWUC5yZXNvbHZlKDMpLAogICAgICAgIG5vdEFQcm9taXNlOiA0CiAgICAg
        IH07CgogICAgICBSU1ZQLmhhc2gocHJvbWlzZXMpLnRoZW4oZnVuY3Rpb24o
        aGFzaCl7CiAgICAgICAgLy8gaGFzaCBoZXJlIGlzIGFuIG9iamVjdCB0aGF0
        IGxvb2tzIGxpa2U6CiAgICAgICAgLy8gewogICAgICAgIC8vICAgbXlQcm9t
        aXNlOiAxLAogICAgICAgIC8vICAgeW91clByb21pc2U6IDIsCiAgICAgICAg
        Ly8gICB0aGVpclByb21pc2U6IDMsCiAgICAgICAgLy8gICBub3RBUHJvbWlz
        ZTogNAogICAgICAgIC8vIH0KICAgICAgfSk7CiAgICAgIGBgYGAKCiAgICAg
        IElmIGFueSBvZiB0aGUgYHByb21pc2VzYCBnaXZlbiB0byBgUlNWUC5oYXNo
        YCBhcmUgcmVqZWN0ZWQsIHRoZSBmaXJzdCBwcm9taXNlCiAgICAgIHRoYXQg
        aXMgcmVqZWN0ZWQgd2lsbCBiZSBnaXZlbiBhcyB0aGUgcmVhc29uIHRvIHRo
        ZSByZWplY3Rpb24gaGFuZGxlci4KCiAgICAgIEV4YW1wbGU6CgogICAgICBg
        YGBqYXZhc2NyaXB0CiAgICAgIHZhciBwcm9taXNlcyA9IHsKICAgICAgICBt
        eVByb21pc2U6IFJTVlAucmVzb2x2ZSgxKSwKICAgICAgICByZWplY3RlZFBy
        b21pc2U6IFJTVlAucmVqZWN0KG5ldyBFcnJvcigicmVqZWN0ZWRQcm9taXNl
        IikpLAogICAgICAgIGFub3RoZXJSZWplY3RlZFByb21pc2U6IFJTVlAucmVq
        ZWN0KG5ldyBFcnJvcigiYW5vdGhlclJlamVjdGVkUHJvbWlzZSIpKSwKICAg
        ICAgfTsKCiAgICAgIFJTVlAuaGFzaChwcm9taXNlcykudGhlbihmdW5jdGlv
        bihoYXNoKXsKICAgICAgICAvLyBDb2RlIGhlcmUgbmV2ZXIgcnVucyBiZWNh
        dXNlIHRoZXJlIGFyZSByZWplY3RlZCBwcm9taXNlcyEKICAgICAgfSwgZnVu
        Y3Rpb24ocmVhc29uKSB7CiAgICAgICAgLy8gcmVhc29uLm1lc3NhZ2UgPT09
        ICJyZWplY3RlZFByb21pc2UiCiAgICAgIH0pOwogICAgICBgYGAKCiAgICAg
        IEFuIGltcG9ydGFudCBub3RlOiBgUlNWUC5oYXNoYCBpcyBpbnRlbmRlZCBm
        b3IgcGxhaW4gSmF2YVNjcmlwdCBvYmplY3RzIHRoYXQKICAgICAgYXJlIGp1
        c3QgYSBzZXQgb2Yga2V5cyBhbmQgdmFsdWVzLiBgUlNWUC5oYXNoYCB3aWxs
        IE5PVCBwcmVzZXJ2ZSBwcm90b3R5cGUKICAgICAgY2hhaW5zLgoKICAgICAg
        RXhhbXBsZToKCiAgICAgIGBgYGphdmFzY3JpcHQKICAgICAgZnVuY3Rpb24g
        TXlDb25zdHJ1Y3RvcigpewogICAgICAgIHRoaXMuZXhhbXBsZSA9IFJTVlAu
        cmVzb2x2ZSgiRXhhbXBsZSIpOwogICAgICB9CgogICAgICBNeUNvbnN0cnVj
        dG9yLnByb3RvdHlwZSA9IHsKICAgICAgICBwcm90b1Byb3BlcnR5OiBSU1ZQ
        LnJlc29sdmUoIlByb3RvIFByb3BlcnR5IikKICAgICAgfTsKCiAgICAgIHZh
        ciBteU9iamVjdCA9IG5ldyBNeUNvbnN0cnVjdG9yKCk7CgogICAgICBSU1ZQ
        Lmhhc2gobXlPYmplY3QpLnRoZW4oZnVuY3Rpb24oaGFzaCl7CiAgICAgICAg
        Ly8gcHJvdG9Qcm9wZXJ0eSB3aWxsIG5vdCBiZSBwcmVzZW50LCBpbnN0ZWFk
        IHlvdSB3aWxsIGp1c3QgaGF2ZSBhbgogICAgICAgIC8vIG9iamVjdCB0aGF0
        IGxvb2tzIGxpa2U6CiAgICAgICAgLy8gewogICAgICAgIC8vICAgZXhhbXBs
        ZTogIkV4YW1wbGUiCiAgICAgICAgLy8gfQogICAgICAgIC8vCiAgICAgICAg
        Ly8gaGFzaC5oYXNPd25Qcm9wZXJ0eSgncHJvdG9Qcm9wZXJ0eScpOyAvLyBm
        YWxzZQogICAgICAgIC8vICd1bmRlZmluZWQnID09PSB0eXBlb2YgaGFzaC5w
        cm90b1Byb3BlcnR5CiAgICAgIH0pOwogICAgICBgYGAKCiAgICAgIEBtZXRo
        b2QgaGFzaAogICAgICBAZm9yIFJTVlAKICAgICAgQHBhcmFtIHtPYmplY3R9
        IHByb21pc2VzCiAgICAgIEBwYXJhbSB7U3RyaW5nfSBsYWJlbCBvcHRpb25h
        bCBzdHJpbmcgdGhhdCBkZXNjcmliZXMgdGhlIHByb21pc2UuCiAgICAgIFVz
        ZWZ1bCBmb3IgdG9vbGluZy4KICAgICAgQHJldHVybiB7UHJvbWlzZX0gcHJv
        bWlzZSB0aGF0IGlzIGZ1bGZpbGxlZCB3aGVuIGFsbCBwcm9wZXJ0aWVzIG9m
        IGBwcm9taXNlc2AKICAgICAgaGF2ZSBiZWVuIGZ1bGZpbGxlZCwgb3IgcmVq
        ZWN0ZWQgaWYgYW55IG9mIHRoZW0gYmVjb21lIHJlamVjdGVkLgogICAgICBA
        c3RhdGljCiAgICAqLwogICAgX19leHBvcnRzX19bImRlZmF1bHQiXSA9IGZ1
        bmN0aW9uIGhhc2gob2JqZWN0LCBsYWJlbCkgewogICAgICByZXR1cm4gbmV3
        IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KXsKICAgICAgICB2
        YXIgcmVzdWx0cyA9IHt9OwogICAgICAgIHZhciBrZXlzID0ga2V5c09mKG9i
        amVjdCk7CiAgICAgICAgdmFyIHJlbWFpbmluZyA9IGtleXMubGVuZ3RoOwog
        ICAgICAgIHZhciBlbnRyeSwgcHJvcGVydHk7CgogICAgICAgIGlmIChyZW1h
        aW5pbmcgPT09IDApIHsKICAgICAgICAgIHJlc29sdmUocmVzdWx0cyk7CiAg
        ICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgIGZ1bmN0aW9uIGZ1
        bGZpbGxlZFRvKHByb3BlcnR5KSB7CiAgICAgICAgICByZXR1cm4gZnVuY3Rp
        b24odmFsdWUpIHsKICAgICAgICAgICAgcmVzdWx0c1twcm9wZXJ0eV0gPSB2
        YWx1ZTsKICAgICAgICAgICAgaWYgKC0tcmVtYWluaW5nID09PSAwKSB7CiAg
        ICAgICAgICAgICAgcmVzb2x2ZShyZXN1bHRzKTsKICAgICAgICAgICAgfQog
        ICAgICAgICAgfTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIG9uUmVq
        ZWN0aW9uKHJlYXNvbikgewogICAgICAgICAgcmVtYWluaW5nID0gMDsKICAg
        ICAgICAgIHJlamVjdChyZWFzb24pOwogICAgICAgIH0KCiAgICAgICAgZm9y
        ICh2YXIgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAg
        ICBwcm9wZXJ0eSA9IGtleXNbaV07CiAgICAgICAgICBlbnRyeSA9IG9iamVj
        dFtwcm9wZXJ0eV07CgogICAgICAgICAgaWYgKGlzTm9uVGhlbmFibGUoZW50
        cnkpKSB7CiAgICAgICAgICAgIHJlc3VsdHNbcHJvcGVydHldID0gZW50cnk7
        CiAgICAgICAgICAgIGlmICgtLXJlbWFpbmluZyA9PT0gMCkgewogICAgICAg
        ICAgICAgIHJlc29sdmUocmVzdWx0cyk7CiAgICAgICAgICAgIH0KICAgICAg
        ICAgIH0gZWxzZSB7CiAgICAgICAgICAgIFByb21pc2UuY2FzdChlbnRyeSku
        dGhlbihmdWxmaWxsZWRUbyhwcm9wZXJ0eSksIG9uUmVqZWN0aW9uKTsKICAg
        ICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pOwogICAgfTsKICB9KTsKZGVm
        aW5lKCJyc3ZwL2luc3RydW1lbnQiLCAKICBbIi4vY29uZmlnIiwiLi91dGls
        cyIsImV4cG9ydHMiXSwKICBmdW5jdGlvbihfX2RlcGVuZGVuY3kxX18sIF9f
        ZGVwZW5kZW5jeTJfXywgX19leHBvcnRzX18pIHsKICAgICJ1c2Ugc3RyaWN0
        IjsKICAgIHZhciBjb25maWcgPSBfX2RlcGVuZGVuY3kxX18uY29uZmlnOwog
        ICAgdmFyIG5vdyA9IF9fZGVwZW5kZW5jeTJfXy5ub3c7CgogICAgX19leHBv
        cnRzX19bImRlZmF1bHQiXSA9IGZ1bmN0aW9uIGluc3RydW1lbnQoZXZlbnRO
        YW1lLCBwcm9taXNlLCBjaGlsZCkgewogICAgICAvLyBpbnN0cnVtZW50YXRp
        b24gc2hvdWxkIG5vdCBkaXNydXB0IG5vcm1hbCB1c2FnZS4KICAgICAgdHJ5
        IHsKICAgICAgICBjb25maWcudHJpZ2dlcihldmVudE5hbWUsIHsKICAgICAg
        ICAgIGd1aWQ6IHByb21pc2UuX2d1aWRLZXkgKyBwcm9taXNlLl9pZCwKICAg
        ICAgICAgIGV2ZW50TmFtZTogZXZlbnROYW1lLAogICAgICAgICAgZGV0YWls
        OiBwcm9taXNlLl9kZXRhaWwsCiAgICAgICAgICBjaGlsZEd1aWQ6IGNoaWxk
        ICYmIHByb21pc2UuX2d1aWRLZXkgKyBjaGlsZC5faWQsCiAgICAgICAgICBs
        YWJlbDogcHJvbWlzZS5fbGFiZWwsCiAgICAgICAgICB0aW1lU3RhbXA6IG5v
        dygpLAogICAgICAgICAgc3RhY2s6IG5ldyBFcnJvcihwcm9taXNlLl9sYWJl
        bCkuc3RhY2sKICAgICAgICB9KTsKICAgICAgfSBjYXRjaChlcnJvcikgewog
        ICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXsKICAgICAgICAgIHRocm93
        IGVycm9yOwogICAgICAgIH0sIDApOwogICAgICB9CiAgICB9OwogIH0pOwpk
        ZWZpbmUoInJzdnAvbWFwIiwgCiAgWyIuL3Byb21pc2UiLCIuL2FsbCIsIi4v
        dXRpbHMiLCJleHBvcnRzIl0sCiAgZnVuY3Rpb24oX19kZXBlbmRlbmN5MV9f
        LCBfX2RlcGVuZGVuY3kyX18sIF9fZGVwZW5kZW5jeTNfXywgX19leHBvcnRz
        X18pIHsKICAgICJ1c2Ugc3RyaWN0IjsKICAgIHZhciBQcm9taXNlID0gX19k
        ZXBlbmRlbmN5MV9fWyJkZWZhdWx0Il07CiAgICB2YXIgYWxsID0gX19kZXBl
        bmRlbmN5Ml9fWyJkZWZhdWx0Il07CiAgICB2YXIgaXNBcnJheSA9IF9fZGVw
        ZW5kZW5jeTNfXy5pc0FycmF5OwogICAgdmFyIGlzRnVuY3Rpb24gPSBfX2Rl
        cGVuZGVuY3kzX18uaXNGdW5jdGlvbjsKCiAgICAvKioKICAgICBgUlNWUC5t
        YXBgIGlzIHNpbWlsYXIgdG8gSmF2YVNjcmlwdCdzIG5hdGl2ZSBgbWFwYCBt
        ZXRob2QsIGV4Y2VwdCB0aGF0IGl0CiAgICAgIHdhaXRzIGZvciBhbGwgcHJv
        bWlzZXMgdG8gYmVjb21lIGZ1bGZpbGxlZCBiZWZvcmUgcnVubmluZyB0aGUg
        YG1hcEZuYCBvbgogICAgICBlYWNoIGl0ZW0gaW4gZ2l2ZW4gdG8gYHByb21p
        c2VzYC4gYFJTVlAubWFwYCByZXR1cm5zIGEgcHJvbWlzZSB0aGF0IHdpbGwK
        ICAgICAgYmVjb21lIGZ1bGZpbGxlZCB3aXRoIHRoZSByZXN1bHQgb2YgcnVu
        bmluZyBgbWFwRm5gIG9uIHRoZSB2YWx1ZXMgdGhlIHByb21pc2VzCiAgICAg
        IGJlY29tZSBmdWxmaWxsZWQgd2l0aC4KCiAgICAgIEZvciBleGFtcGxlOgoK
        ICAgICAgYGBgamF2YXNjcmlwdAoKICAgICAgdmFyIHByb21pc2UxID0gUlNW
        UC5yZXNvbHZlKDEpOwogICAgICB2YXIgcHJvbWlzZTIgPSBSU1ZQLnJlc29s
        dmUoMik7CiAgICAgIHZhciBwcm9taXNlMyA9IFJTVlAucmVzb2x2ZSgzKTsK
        ICAgICAgdmFyIHByb21pc2VzID0gWyBwcm9taXNlMSwgcHJvbWlzZTIsIHBy
        b21pc2UzIF07CgogICAgICB2YXIgbWFwRm4gPSBmdW5jdGlvbihpdGVtKXsK
        ICAgICAgICByZXR1cm4gaXRlbSArIDE7CiAgICAgIH07CgogICAgICBSU1ZQ
        Lm1hcChwcm9taXNlcywgbWFwRm4pLnRoZW4oZnVuY3Rpb24ocmVzdWx0KXsK
        ICAgICAgICAvLyByZXN1bHQgaXMgWyAyLCAzLCA0IF0KICAgICAgfSk7CiAg
        ICAgIGBgYAoKICAgICAgSWYgYW55IG9mIHRoZSBgcHJvbWlzZXNgIGdpdmVu
        IHRvIGBSU1ZQLm1hcGAgYXJlIHJlamVjdGVkLCB0aGUgZmlyc3QgcHJvbWlz
        ZQogICAgICB0aGF0IGlzIHJlamVjdGVkIHdpbGwgYmUgZ2l2ZW4gYXMgYW4g
        YXJndW1lbnQgdG8gdGhlIHJldHVybmVkIHByb21pc2UncwogICAgICByZWpl
        Y3Rpb24gaGFuZGxlci4gRm9yIGV4YW1wbGU6CgogICAgICBgYGBqYXZhc2Ny
        aXB0CiAgICAgIHZhciBwcm9taXNlMSA9IFJTVlAucmVzb2x2ZSgxKTsKICAg
        ICAgdmFyIHByb21pc2UyID0gUlNWUC5yZWplY3QobmV3IEVycm9yKCIyIikp
        OwogICAgICB2YXIgcHJvbWlzZTMgPSBSU1ZQLnJlamVjdChuZXcgRXJyb3Io
        IjMiKSk7CiAgICAgIHZhciBwcm9taXNlcyA9IFsgcHJvbWlzZTEsIHByb21p
        c2UyLCBwcm9taXNlMyBdOwoKICAgICAgdmFyIG1hcEZuID0gZnVuY3Rpb24o
        aXRlbSl7CiAgICAgICAgcmV0dXJuIGl0ZW0gKyAxOwogICAgICB9OwoKICAg
        ICAgUlNWUC5tYXAocHJvbWlzZXMsIG1hcEZuKS50aGVuKGZ1bmN0aW9uKGFy
        cmF5KXsKICAgICAgICAvLyBDb2RlIGhlcmUgbmV2ZXIgcnVucyBiZWNhdXNl
        IHRoZXJlIGFyZSByZWplY3RlZCBwcm9taXNlcyEKICAgICAgfSwgZnVuY3Rp
        b24ocmVhc29uKSB7CiAgICAgICAgLy8gcmVhc29uLm1lc3NhZ2UgPT09ICIy
        IgogICAgICB9KTsKICAgICAgYGBgCgogICAgICBgUlNWUC5tYXBgIHdpbGwg
        YWxzbyB3YWl0IGlmIGEgcHJvbWlzZSBpcyByZXR1cm5lZCBmcm9tIGBtYXBG
        bmAuIEZvciBleGFtcGxlLAogICAgICBzYXkgeW91IHdhbnQgdG8gZ2V0IGFs
        bCBjb21tZW50cyBmcm9tIGEgc2V0IG9mIGJsb2cgcG9zdHMsIGJ1dCB5b3Ug
        bmVlZAogICAgICB0aGUgYmxvZyBwb3N0cyBmaXJzdCBiZWN1YXNlIHRoZXkg
        Y29udGFpbiBhIHVybCB0byB0aG9zZSBjb21tZW50cy4KCiAgICAgIGBgYGph
        dnNjcmlwdAoKICAgICAgdmFyIG1hcEZuID0gZnVuY3Rpb24oYmxvZ1Bvc3Qp
        ewogICAgICAgIC8vIGdldENvbW1lbnRzIGRvZXMgc29tZSBhamF4IGFuZCBy
        ZXR1cm5zIGFuIFJTVlAuUHJvbWlzZSB0aGF0IGlzIGZ1bGZpbGxlZAogICAg
        ICAgIC8vIHdpdGggc29tZSBjb21tZW50cyBkYXRhCiAgICAgICAgcmV0dXJu
        IGdldENvbW1lbnRzKGJsb2dQb3N0LmNvbW1lbnRzX3VybCk7CiAgICAgIH07
        CgogICAgICAvLyBnZXRCbG9nUG9zdHMgZG9lcyBzb21lIGFqYXggYW5kIHJl
        dHVybnMgYW4gUlNWUC5Qcm9taXNlIHRoYXQgaXMgZnVsZmlsbGVkCiAgICAg
        IC8vIHdpdGggc29tZSBibG9nIHBvc3QgZGF0YQogICAgICBSU1ZQLm1hcChn
        ZXRCbG9nUG9zdHMoKSwgbWFwRm4pLnRoZW4oZnVuY3Rpb24oY29tbWVudHMp
        ewogICAgICAgIC8vIGNvbW1lbnRzIGlzIHRoZSByZXN1bHQgb2YgYXNraW5n
        IHRoZSBzZXJ2ZXIgZm9yIHRoZSBjb21tZW50cwogICAgICAgIC8vIG9mIGFs
        bCBibG9nIHBvc3RzIHJldHVybmVkIGZyb20gZ2V0QmxvZ1Bvc3RzKCkKICAg
        ICAgfSk7CiAgICAgIGBgYAoKICAgICAgQG1ldGhvZCBtYXAKICAgICAgQGZv
        ciBSU1ZQCiAgICAgIEBwYXJhbSB7QXJyYXl9IHByb21pc2VzCiAgICAgIEBw
        YXJhbSB7RnVuY3Rpb259IG1hcEZuIGZ1bmN0aW9uIHRvIGJlIGNhbGxlZCBv
        biBlYWNoIGZ1bGZpbGxlZCBwcm9taXNlLgogICAgICBAcGFyYW0ge1N0cmlu
        Z30gbGFiZWwgb3B0aW9uYWwgc3RyaW5nIGZvciBsYWJlbGluZyB0aGUgcHJv
        bWlzZS4KICAgICAgVXNlZnVsIGZvciB0b29saW5nLgogICAgICBAcmV0dXJu
        IHtQcm9taXNlfSBwcm9taXNlIHRoYXQgaXMgZnVsZmlsbGVkIHdpdGggdGhl
        IHJlc3VsdCBvZiBjYWxsaW5nCiAgICAgIGBtYXBGbmAgb24gZWFjaCBmdWxm
        aWxsZWQgcHJvbWlzZSBvciB2YWx1ZSB3aGVuIHRoZXkgYmVjb21lIGZ1bGZp
        bGxlZC4KICAgICAgIFRoZSBwcm9taXNlIHdpbGwgYmUgcmVqZWN0ZWQgaWYg
        YW55IG9mIHRoZSBnaXZlbiBgcHJvbWlzZXNgIGJlY29tZSByZWplY3RlZC4K
        ICAgICAgQHN0YXRpYwogICAgKi8KICAgIF9fZXhwb3J0c19fWyJkZWZhdWx0
        Il0gPSBmdW5jdGlvbiBtYXAocHJvbWlzZXMsIG1hcEZuLCBsYWJlbCkgewog
        ICAgICByZXR1cm4gYWxsKHByb21pc2VzLCBsYWJlbCkudGhlbihmdW5jdGlv
        bihyZXN1bHRzKXsKICAgICAgICBpZiAoIWlzQXJyYXkocHJvbWlzZXMpKSB7
        CiAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdZb3UgbXVzdCBwYXNz
        IGFuIGFycmF5IHRvIG1hcC4nKTsKICAgICAgICB9CgogICAgICAgIGlmICgh
        aXNGdW5jdGlvbihtYXBGbikpewogICAgICAgICAgdGhyb3cgbmV3IFR5cGVF
        cnJvcigiWW91IG11c3QgcGFzcyBhIGZ1bmN0aW9uIHRvIG1hcCdzIHNlY29u
        ZCBhcmd1bWVudC4iKTsKICAgICAgICB9CgoKICAgICAgICB2YXIgcmVzdWx0
        TGVuID0gcmVzdWx0cy5sZW5ndGgsCiAgICAgICAgICAgIG1hcHBlZFJlc3Vs
        dHMgPSBbXSwKICAgICAgICAgICAgaTsKCiAgICAgICAgZm9yIChpID0gMDsg
        aSA8IHJlc3VsdExlbjsgaSsrKXsKICAgICAgICAgIG1hcHBlZFJlc3VsdHMu
        cHVzaChtYXBGbihyZXN1bHRzW2ldKSk7CiAgICAgICAgfQoKICAgICAgICBy
        ZXR1cm4gYWxsKG1hcHBlZFJlc3VsdHMsIGxhYmVsKTsKICAgICAgfSk7CiAg
        ICB9OwogIH0pOwpkZWZpbmUoInJzdnAvbm9kZSIsIAogIFsiLi9wcm9taXNl
        IiwiZXhwb3J0cyJdLAogIGZ1bmN0aW9uKF9fZGVwZW5kZW5jeTFfXywgX19l
        eHBvcnRzX18pIHsKICAgICJ1c2Ugc3RyaWN0IjsKICAgIHZhciBQcm9taXNl
        ID0gX19kZXBlbmRlbmN5MV9fWyJkZWZhdWx0Il07CgogICAgdmFyIHNsaWNl
        ID0gQXJyYXkucHJvdG90eXBlLnNsaWNlOwoKICAgIGZ1bmN0aW9uIG1ha2VO
        b2RlQ2FsbGJhY2tGb3IocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgIHJldHVy
        biBmdW5jdGlvbiAoZXJyb3IsIHZhbHVlKSB7CiAgICAgICAgaWYgKGVycm9y
        KSB7CiAgICAgICAgICByZWplY3QoZXJyb3IpOwogICAgICAgIH0gZWxzZSBp
        ZiAoYXJndW1lbnRzLmxlbmd0aCA+IDIpIHsKICAgICAgICAgIHJlc29sdmUo
        c2xpY2UuY2FsbChhcmd1bWVudHMsIDEpKTsKICAgICAgICB9IGVsc2Ugewog
        ICAgICAgICAgcmVzb2x2ZSh2YWx1ZSk7CiAgICAgICAgfQogICAgICB9Owog
        ICAgfQoKICAgIC8qKgogICAgICBgUlNWUC5kZW5vZGVpZnlgIHRha2VzIGEg
        Im5vZGUtc3R5bGUiIGZ1bmN0aW9uIGFuZCByZXR1cm5zIGEgZnVuY3Rpb24g
        dGhhdAogICAgICB3aWxsIHJldHVybiBhbiBgUlNWUC5Qcm9taXNlYC4gWW91
        IGNhbiB1c2UgYGRlbm9kZWlmeWAgaW4gTm9kZS5qcyBvciB0aGUKICAgICAg
        YnJvd3NlciB3aGVuIHlvdSdkIHByZWZlciB0byB1c2UgcHJvbWlzZXMgb3Zl
        ciB1c2luZyBjYWxsYmFja3MuIEZvciBleGFtcGxlLAogICAgICBgZGVub2Rl
        aWZ5YCB0cmFuc2Zvcm1zIHRoZSBmb2xsb3dpbmc6CgogICAgICBgYGBqYXZh
        c2NyaXB0CiAgICAgIHZhciBmcyA9IHJlcXVpcmUoJ2ZzJyk7CgogICAgICBm
        cy5yZWFkRmlsZSgnbXlmaWxlLnR4dCcsIGZ1bmN0aW9uKGVyciwgZGF0YSl7
        CiAgICAgICAgaWYgKGVycikgcmV0dXJuIGhhbmRsZUVycm9yKGVycik7CiAg
        ICAgICAgaGFuZGxlRGF0YShkYXRhKTsKICAgICAgfSk7CiAgICAgIGBgYAoK
        ICAgICAgaW50bzoKCiAgICAgIGBgYGphdmFzY3JpcHQKICAgICAgdmFyIGZz
        ID0gcmVxdWlyZSgnZnMnKTsKCiAgICAgIHZhciByZWFkRmlsZSA9IFJTVlAu
        ZGVub2RlaWZ5KGZzLnJlYWRGaWxlKTsKCiAgICAgIHJlYWRGaWxlKCdteWZp
        bGUudHh0JykudGhlbihoYW5kbGVEYXRhLCBoYW5kbGVFcnJvcik7CiAgICAg
        IGBgYAoKICAgICAgVXNpbmcgYGRlbm9kZWlmeWAgbWFrZXMgaXQgZWFzaWVy
        IHRvIGNvbXBvc2UgYXN5bmNocm9ub3VzIG9wZXJhdGlvbnMgaW5zdGVhZAog
        ICAgICBvZiB1c2luZyBjYWxsYmFja3MuIEZvciBleGFtcGxlLCBpbnN0ZWFk
        IG9mOgoKICAgICAgYGBgamF2YXNjcmlwdAogICAgICB2YXIgZnMgPSByZXF1
        aXJlKCdmcycpOwogICAgICB2YXIgbG9nID0gcmVxdWlyZSgnc29tZS1hc3lu
        Yy1sb2dnZXInKTsKCiAgICAgIGZzLnJlYWRGaWxlKCdteWZpbGUudHh0Jywg
        ZnVuY3Rpb24oZXJyLCBkYXRhKXsKICAgICAgICBpZiAoZXJyKSByZXR1cm4g
        aGFuZGxlRXJyb3IoZXJyKTsKICAgICAgICBmcy53cml0ZUZpbGUoJ215Zmls
        ZTIudHh0JywgZGF0YSwgZnVuY3Rpb24oZXJyKXsKICAgICAgICAgIGlmIChl
        cnIpIHRocm93IGVycjsKICAgICAgICAgIGxvZygnc3VjY2VzcycsIGZ1bmN0
        aW9uKGVycikgewogICAgICAgICAgICBpZiAoZXJyKSB0aHJvdyBlcnI7CiAg
        ICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICAgIGBgYAoK
        ICAgICAgWW91IGNhbiBjaGFpbiB0aGUgb3BlcmF0aW9ucyB0b2dldGhlciB1
        c2luZyBgdGhlbmAgZnJvbSB0aGUgcmV0dXJuZWQgcHJvbWlzZToKCiAgICAg
        IGBgYGphdmFzY3JpcHQKICAgICAgdmFyIGZzID0gcmVxdWlyZSgnZnMnKTsK
        ICAgICAgdmFyIGRlbm9kZWlmeSA9IFJTVlAuZGVub2RlaWZ5OwogICAgICB2
        YXIgcmVhZEZpbGUgPSBkZW5vZGVpZnkoZnMucmVhZEZpbGUpOwogICAgICB2
        YXIgd3JpdGVGaWxlID0gZGVub2RlaWZ5KGZzLndyaXRlRmlsZSk7CiAgICAg
        IHZhciBsb2cgPSBkZW5vZGVpZnkocmVxdWlyZSgnc29tZS1hc3luYy1sb2dn
        ZXInKSk7CgogICAgICByZWFkRmlsZSgnbXlmaWxlLnR4dCcpLnRoZW4oZnVu
        Y3Rpb24oZGF0YSl7CiAgICAgICAgcmV0dXJuIHdyaXRlRmlsZSgnbXlmaWxl
        Mi50eHQnLCBkYXRhKTsKICAgICAgfSkudGhlbihmdW5jdGlvbigpewogICAg
        ICAgIHJldHVybiBsb2coJ1NVQ0NFU1MnKTsKICAgICAgfSkudGhlbihmdW5j
        dGlvbigpewogICAgICAgIC8vIHN1Y2Nlc3MgaGFuZGxlcgogICAgICB9LCBm
        dW5jdGlvbihyZWFzb24pewogICAgICAgIC8vIHJlamVjdGlvbiBoYW5kbGVy
        CiAgICAgIH0pOwogICAgICBgYGAKCiAgICAgIEBtZXRob2QgZGVub2RlaWZ5
        CiAgICAgIEBmb3IgUlNWUAogICAgICBAcGFyYW0ge0Z1bmN0aW9ufSBub2Rl
        RnVuYyBhICJub2RlLXN0eWxlIiBmdW5jdGlvbiB0aGF0IHRha2VzIGEgY2Fs
        bGJhY2sgYXMKICAgICAgaXRzIGxhc3QgYXJndW1lbnQuIFRoZSBjYWxsYmFj
        ayBleHBlY3RzIGFuIGVycm9yIHRvIGJlIHBhc3NlZCBhcyBpdHMgZmlyc3QK
        ICAgICAgYXJndW1lbnQgKGlmIGFuIGVycm9yIG9jY3VycmVkLCBvdGhlcndp
        c2UgbnVsbCksIGFuZCB0aGUgdmFsdWUgZnJvbSB0aGUKICAgICAgb3BlcmF0
        aW9uIGFzIGl0cyBzZWNvbmQgYXJndW1lbnQgKCJmdW5jdGlvbihlcnIsIHZh
        bHVlKXsgfSIpLgogICAgICBAcGFyYW0ge0FueX0gYmluZGluZyBvcHRpb25h
        bCBhcmd1bWVudCBmb3IgYmluZGluZyB0aGUgInRoaXMiIHZhbHVlIHdoZW4K
        ICAgICAgY2FsbGluZyB0aGUgYG5vZGVGdW5jYCBmdW5jdGlvbi4KICAgICAg
        QHJldHVybiB7RnVuY3Rpb259IGEgZnVuY3Rpb24gdGhhdCB3cmFwcyBgbm9k
        ZUZ1bmNgIHRvIHJldHVybiBhbgogICAgICBgUlNWUC5Qcm9taXNlYAogICAg
        ICBAc3RhdGljCiAgICAqLwogICAgX19leHBvcnRzX19bImRlZmF1bHQiXSA9
        IGZ1bmN0aW9uIGRlbm9kZWlmeShub2RlRnVuYywgYmluZGluZykgewogICAg
        ICByZXR1cm4gZnVuY3Rpb24oKSAgewogICAgICAgIHZhciBub2RlQXJncyA9
        IHNsaWNlLmNhbGwoYXJndW1lbnRzKSwgcmVzb2x2ZSwgcmVqZWN0OwogICAg
        ICAgIHZhciB0aGlzQXJnID0gdGhpcyB8fCBiaW5kaW5nOwoKICAgICAgICBy
        ZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7
        CiAgICAgICAgICBQcm9taXNlLmFsbChub2RlQXJncykudGhlbihmdW5jdGlv
        bihub2RlQXJncykgewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAg
        IG5vZGVBcmdzLnB1c2gobWFrZU5vZGVDYWxsYmFja0ZvcihyZXNvbHZlLCBy
        ZWplY3QpKTsKICAgICAgICAgICAgICBub2RlRnVuYy5hcHBseSh0aGlzQXJn
        LCBub2RlQXJncyk7CiAgICAgICAgICAgIH0gY2F0Y2goZSkgewogICAgICAg
        ICAgICAgIHJlamVjdChlKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7
        CiAgICAgICAgfSk7CiAgICAgIH07CiAgICB9OwogIH0pOwpkZWZpbmUoInJz
        dnAvcHJvbWlzZSIsIAogIFsiLi9jb25maWciLCIuL2V2ZW50cyIsIi4vaW5z
        dHJ1bWVudCIsIi4vdXRpbHMiLCIuL3Byb21pc2UvY2FzdCIsIi4vcHJvbWlz
        ZS9hbGwiLCIuL3Byb21pc2UvcmFjZSIsIi4vcHJvbWlzZS9yZXNvbHZlIiwi
        Li9wcm9taXNlL3JlamVjdCIsImV4cG9ydHMiXSwKICBmdW5jdGlvbihfX2Rl
        cGVuZGVuY3kxX18sIF9fZGVwZW5kZW5jeTJfXywgX19kZXBlbmRlbmN5M19f
        LCBfX2RlcGVuZGVuY3k0X18sIF9fZGVwZW5kZW5jeTVfXywgX19kZXBlbmRl
        bmN5Nl9fLCBfX2RlcGVuZGVuY3k3X18sIF9fZGVwZW5kZW5jeThfXywgX19k
        ZXBlbmRlbmN5OV9fLCBfX2V4cG9ydHNfXykgewogICAgInVzZSBzdHJpY3Qi
        OwogICAgdmFyIGNvbmZpZyA9IF9fZGVwZW5kZW5jeTFfXy5jb25maWc7CiAg
        ICB2YXIgRXZlbnRUYXJnZXQgPSBfX2RlcGVuZGVuY3kyX19bImRlZmF1bHQi
        XTsKICAgIHZhciBpbnN0cnVtZW50ID0gX19kZXBlbmRlbmN5M19fWyJkZWZh
        dWx0Il07CiAgICB2YXIgb2JqZWN0T3JGdW5jdGlvbiA9IF9fZGVwZW5kZW5j
        eTRfXy5vYmplY3RPckZ1bmN0aW9uOwogICAgdmFyIGlzRnVuY3Rpb24gPSBf
        X2RlcGVuZGVuY3k0X18uaXNGdW5jdGlvbjsKICAgIHZhciBub3cgPSBfX2Rl
        cGVuZGVuY3k0X18ubm93OwogICAgdmFyIGNhc3QgPSBfX2RlcGVuZGVuY3k1
        X19bImRlZmF1bHQiXTsKICAgIHZhciBhbGwgPSBfX2RlcGVuZGVuY3k2X19b
        ImRlZmF1bHQiXTsKICAgIHZhciByYWNlID0gX19kZXBlbmRlbmN5N19fWyJk
        ZWZhdWx0Il07CiAgICB2YXIgUmVzb2x2ZSA9IF9fZGVwZW5kZW5jeThfX1si
        ZGVmYXVsdCJdOwogICAgdmFyIFJlamVjdCA9IF9fZGVwZW5kZW5jeTlfX1si
        ZGVmYXVsdCJdOwoKICAgIHZhciBndWlkS2V5ID0gJ3JzdnBfJyArIG5vdygp
        ICsgJy0nOwogICAgdmFyIGNvdW50ZXIgPSAwOwoKICAgIGZ1bmN0aW9uIG5v
        b3AoKSB7fQoKICAgIF9fZXhwb3J0c19fWyJkZWZhdWx0Il0gPSBQcm9taXNl
        OwoKCiAgICAvKioKICAgICAgUHJvbWlzZSBvYmplY3RzIHJlcHJlc2VudCB0
        aGUgZXZlbnR1YWwgcmVzdWx0IG9mIGFuIGFzeW5jaHJvbm91cyBvcGVyYXRp
        b24uIFRoZQogICAgICBwcmltYXJ5IHdheSBvZiBpbnRlcmFjdGluZyB3aXRo
        IGEgcHJvbWlzZSBpcyB0aHJvdWdoIGl0cyBgdGhlbmAgbWV0aG9kLCB3aGlj
        aAogICAgICByZWdpc3RlcnMgY2FsbGJhY2tzIHRvIHJlY2VpdmUgZWl0aGVy
        IGEgcHJvbWlzZeKAmXMgZXZlbnR1YWwgdmFsdWUgb3IgdGhlIHJlYXNvbgog
        ICAgICB3aHkgdGhlIHByb21pc2UgY2Fubm90IGJlIGZ1bGZpbGxlZC4KCiAg
        ICAgIFRlcm1pbm9sb2d5CiAgICAgIC0tLS0tLS0tLS0tCgogICAgICAtIGBw
        cm9taXNlYCBpcyBhbiBvYmplY3Qgb3IgZnVuY3Rpb24gd2l0aCBhIGB0aGVu
        YCBtZXRob2Qgd2hvc2UgYmVoYXZpb3IgY29uZm9ybXMgdG8gdGhpcyBzcGVj
        aWZpY2F0aW9uLgogICAgICAtIGB0aGVuYWJsZWAgaXMgYW4gb2JqZWN0IG9y
        IGZ1bmN0aW9uIHRoYXQgZGVmaW5lcyBhIGB0aGVuYCBtZXRob2QuCiAgICAg
        IC0gYHZhbHVlYCBpcyBhbnkgbGVnYWwgSmF2YVNjcmlwdCB2YWx1ZSAoaW5j
        bHVkaW5nIHVuZGVmaW5lZCwgYSB0aGVuYWJsZSwgb3IgYSBwcm9taXNlKS4K
        ICAgICAgLSBgZXhjZXB0aW9uYCBpcyBhIHZhbHVlIHRoYXQgaXMgdGhyb3du
        IHVzaW5nIHRoZSB0aHJvdyBzdGF0ZW1lbnQuCiAgICAgIC0gYHJlYXNvbmAg
        aXMgYSB2YWx1ZSB0aGF0IGluZGljYXRlcyB3aHkgYSBwcm9taXNlIHdhcyBy
        ZWplY3RlZC4KICAgICAgLSBgc2V0dGxlZGAgdGhlIGZpbmFsIHJlc3Rpbmcg
        c3RhdGUgb2YgYSBwcm9taXNlLCBmdWxmaWxsZWQgb3IgcmVqZWN0ZWQuCgog
        ICAgICBBIHByb21pc2UgY2FuIGJlIGluIG9uZSBvZiB0aHJlZSBzdGF0ZXM6
        IHBlbmRpbmcsIGZ1bGZpbGxlZCwgb3IgcmVqZWN0ZWQuCgogICAgICBQcm9t
        aXNlcyB0aGF0IGFyZSBmdWxmaWxsZWQgaGF2ZSBhIGZ1bGZpbGxtZW50IHZh
        bHVlIGFuZCBhcmUgaW4gdGhlIGZ1bGZpbGxlZAogICAgICBzdGF0ZS4gIFBy
        b21pc2VzIHRoYXQgYXJlIHJlamVjdGVkIGhhdmUgYSByZWplY3Rpb24gcmVh
        c29uIGFuZCBhcmUgaW4gdGhlCiAgICAgIHJlamVjdGVkIHN0YXRlLiAgQSBm
        dWxmaWxsbWVudCB2YWx1ZSBpcyBuZXZlciBhIHRoZW5hYmxlLiAgU2ltaWxh
        cmx5LCBhCiAgICAgIHJlamVjdGlvbiByZWFzb24gaXMgbmV2ZXIgYSB0aGVu
        YWJsZS4KCiAgICAgIFByb21pc2VzIGNhbiBhbHNvIGJlIHNhaWQgdG8gKnJl
        c29sdmUqIGEgdmFsdWUuICBJZiB0aGlzIHZhbHVlIGlzIGFsc28gYQogICAg
        ICBwcm9taXNlLCB0aGVuIHRoZSBvcmlnaW5hbCBwcm9taXNlJ3Mgc2V0dGxl
        ZCBzdGF0ZSB3aWxsIG1hdGNoIHRoZSB2YWx1ZSdzCiAgICAgIHNldHRsZWQg
        c3RhdGUuICBTbyBhIHByb21pc2UgdGhhdCAqcmVzb2x2ZXMqIGEgcHJvbWlz
        ZSB0aGF0IHJlamVjdHMgd2lsbAogICAgICBpdHNlbGYgcmVqZWN0LCBhbmQg
        YSBwcm9taXNlIHRoYXQgKnJlc29sdmVzKiBhIHByb21pc2UgdGhhdCBmdWxm
        aWxscyB3aWxsCiAgICAgIGl0c2VsZiBmdWxmaWxsLgoKCiAgICAgIEJhc2lj
        IFVzYWdlOgogICAgICAtLS0tLS0tLS0tLS0KCiAgICAgIGBgYGpzCiAgICAg
        IHZhciBwcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwg
        cmVqZWN0KSB7CiAgICAgICAgLy8gb24gc3VjY2VzcwogICAgICAgIHJlc29s
        dmUodmFsdWUpOwoKICAgICAgICAvLyBvbiBmYWlsdXJlCiAgICAgICAgcmVq
        ZWN0KHJlYXNvbik7CiAgICAgIH0pOwoKICAgICAgcHJvbWlzZS50aGVuKGZ1
        bmN0aW9uKHZhbHVlKSB7CiAgICAgICAgLy8gb24gZnVsZmlsbG1lbnQKICAg
        ICAgfSwgZnVuY3Rpb24ocmVhc29uKSB7CiAgICAgICAgLy8gb24gcmVqZWN0
        aW9uCiAgICAgIH0pOwogICAgICBgYGAKCiAgICAgIEFkdmFuY2VkIFVzYWdl
        OgogICAgICAtLS0tLS0tLS0tLS0tLS0KCiAgICAgIFByb21pc2VzIHNoaW5l
        IHdoZW4gYWJzdHJhY3RpbmcgYXdheSBhc3luY2hyb25vdXMgaW50ZXJhY3Rp
        b25zIHN1Y2ggYXMKICAgICAgYFhNTEh0dHBSZXF1ZXN0YHMuCgogICAgICBg
        YGBqcwogICAgICBmdW5jdGlvbiBnZXRKU09OKHVybCkgewogICAgICAgIHJl
        dHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3Qpewog
        ICAgICAgICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpOwoKICAg
        ICAgICAgIHhoci5vcGVuKCdHRVQnLCB1cmwpOwogICAgICAgICAgeGhyLm9u
        cmVhZHlzdGF0ZWNoYW5nZSA9IGhhbmRsZXI7CiAgICAgICAgICB4aHIucmVz
        cG9uc2VUeXBlID0gJ2pzb24nOwogICAgICAgICAgeGhyLnNldFJlcXVlc3RI
        ZWFkZXIoJ0FjY2VwdCcsICdhcHBsaWNhdGlvbi9qc29uJyk7CiAgICAgICAg
        ICB4aHIuc2VuZCgpOwoKICAgICAgICAgIGZ1bmN0aW9uIGhhbmRsZXIoKSB7
        CiAgICAgICAgICAgIGlmICh0aGlzLnJlYWR5U3RhdGUgPT09IHRoaXMuRE9O
        RSkgewogICAgICAgICAgICAgIGlmICh0aGlzLnN0YXR1cyA9PT0gMjAwKSB7
        CiAgICAgICAgICAgICAgICByZXNvbHZlKHRoaXMucmVzcG9uc2UpOwogICAg
        ICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICByZWplY3QobmV3
        IEVycm9yKCJnZXRKU09OOiBgIiArIHVybCArICJgIGZhaWxlZCB3aXRoIHN0
        YXR1czogWyIgKyB0aGlzLnN0YXR1cyArICJdIik7CiAgICAgICAgICAgICAg
        fQogICAgICAgICAgICB9CiAgICAgICAgICB9OwogICAgICAgIH0pOwogICAg
        ICB9CgogICAgICBnZXRKU09OKCcvcG9zdHMuanNvbicpLnRoZW4oZnVuY3Rp
        b24oanNvbikgewogICAgICAgIC8vIG9uIGZ1bGZpbGxtZW50CiAgICAgIH0s
        IGZ1bmN0aW9uKHJlYXNvbikgewogICAgICAgIC8vIG9uIHJlamVjdGlvbgog
        ICAgICB9KTsKICAgICAgYGBgCgogICAgICBVbmxpa2UgY2FsbGJhY2tzLCBw
        cm9taXNlcyBhcmUgZ3JlYXQgY29tcG9zYWJsZSBwcmltaXRpdmVzLgoKICAg
        ICAgYGBganMKICAgICAgUHJvbWlzZS5hbGwoWwogICAgICAgIGdldEpTT04o
        Jy9wb3N0cycpLAogICAgICAgIGdldEpTT04oJy9jb21tZW50cycpCiAgICAg
        IF0pLnRoZW4oZnVuY3Rpb24odmFsdWVzKXsKICAgICAgICB2YWx1ZXNbMF0g
        Ly8gPT4gcG9zdHNKU09OCiAgICAgICAgdmFsdWVzWzFdIC8vID0+IGNvbW1l
        bnRzSlNPTgoKICAgICAgICByZXR1cm4gdmFsdWVzOwogICAgICB9KTsKICAg
        ICAgYGBgCgogICAgICBAY2xhc3MgUlNWUC5Qcm9taXNlCiAgICAgIEBwYXJh
        bSB7ZnVuY3Rpb259CiAgICAgIEBwYXJhbSB7U3RyaW5nfSBsYWJlbCBvcHRp
        b25hbCBzdHJpbmcgZm9yIGxhYmVsaW5nIHRoZSBwcm9taXNlLgogICAgICBV
        c2VmdWwgZm9yIHRvb2xpbmcuCiAgICAgIEBjb25zdHJ1Y3RvcgogICAgKi8K
        ICAgIGZ1bmN0aW9uIFByb21pc2UocmVzb2x2ZXIsIGxhYmVsKSB7CiAgICAg
        IGlmICghaXNGdW5jdGlvbihyZXNvbHZlcikpIHsKICAgICAgICB0aHJvdyBu
        ZXcgVHlwZUVycm9yKCdZb3UgbXVzdCBwYXNzIGEgcmVzb2x2ZXIgZnVuY3Rp
        b24gYXMgdGhlIGZpcnN0IGFyZ3VtZW50IHRvIHRoZSBwcm9taXNlIGNvbnN0
        cnVjdG9yJyk7CiAgICAgIH0KCiAgICAgIGlmICghKHRoaXMgaW5zdGFuY2Vv
        ZiBQcm9taXNlKSkgewogICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoIkZh
        aWxlZCB0byBjb25zdHJ1Y3QgJ1Byb21pc2UnOiBQbGVhc2UgdXNlIHRoZSAn
        bmV3JyBvcGVyYXRvciwgdGhpcyBvYmplY3QgY29uc3RydWN0b3IgY2Fubm90
        IGJlIGNhbGxlZCBhcyBhIGZ1bmN0aW9uLiIpOwogICAgICB9CgogICAgICB0
        aGlzLl9pZCA9IGNvdW50ZXIrKzsKICAgICAgdGhpcy5fbGFiZWwgPSBsYWJl
        bDsKICAgICAgdGhpcy5fc3Vic2NyaWJlcnMgPSBbXTsKCiAgICAgIGlmIChj
        b25maWcuaW5zdHJ1bWVudCkgewogICAgICAgIGluc3RydW1lbnQoJ2NyZWF0
        ZWQnLCB0aGlzKTsKICAgICAgfQoKICAgICAgaWYgKG5vb3AgIT09IHJlc29s
        dmVyKSB7CiAgICAgICAgaW52b2tlUmVzb2x2ZXIocmVzb2x2ZXIsIHRoaXMp
        OwogICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gaW52b2tlUmVzb2x2ZXIo
        cmVzb2x2ZXIsIHByb21pc2UpIHsKICAgICAgZnVuY3Rpb24gcmVzb2x2ZVBy
        b21pc2UodmFsdWUpIHsKICAgICAgICByZXNvbHZlKHByb21pc2UsIHZhbHVl
        KTsKICAgICAgfQoKICAgICAgZnVuY3Rpb24gcmVqZWN0UHJvbWlzZShyZWFz
        b24pIHsKICAgICAgICByZWplY3QocHJvbWlzZSwgcmVhc29uKTsKICAgICAg
        fQoKICAgICAgdHJ5IHsKICAgICAgICByZXNvbHZlcihyZXNvbHZlUHJvbWlz
        ZSwgcmVqZWN0UHJvbWlzZSk7CiAgICAgIH0gY2F0Y2goZSkgewogICAgICAg
        IHJlamVjdFByb21pc2UoZSk7CiAgICAgIH0KICAgIH0KCiAgICBQcm9taXNl
        LmNhc3QgPSBjYXN0OwogICAgUHJvbWlzZS5hbGwgPSBhbGw7CiAgICBQcm9t
        aXNlLnJhY2UgPSByYWNlOwogICAgUHJvbWlzZS5yZXNvbHZlID0gUmVzb2x2
        ZTsKICAgIFByb21pc2UucmVqZWN0ID0gUmVqZWN0OwoKICAgIHZhciBQRU5E
        SU5HICAgPSB2b2lkIDA7CiAgICB2YXIgU0VBTEVEICAgID0gMDsKICAgIHZh
        ciBGVUxGSUxMRUQgPSAxOwogICAgdmFyIFJFSkVDVEVEICA9IDI7CgogICAg
        ZnVuY3Rpb24gc3Vic2NyaWJlKHBhcmVudCwgY2hpbGQsIG9uRnVsZmlsbG1l
        bnQsIG9uUmVqZWN0aW9uKSB7CiAgICAgIHZhciBzdWJzY3JpYmVycyA9IHBh
        cmVudC5fc3Vic2NyaWJlcnM7CiAgICAgIHZhciBsZW5ndGggPSBzdWJzY3Jp
        YmVycy5sZW5ndGg7CgogICAgICBzdWJzY3JpYmVyc1tsZW5ndGhdID0gY2hp
        bGQ7CiAgICAgIHN1YnNjcmliZXJzW2xlbmd0aCArIEZVTEZJTExFRF0gPSBv
        bkZ1bGZpbGxtZW50OwogICAgICBzdWJzY3JpYmVyc1tsZW5ndGggKyBSRUpF
        Q1RFRF0gID0gb25SZWplY3Rpb247CiAgICB9CgogICAgZnVuY3Rpb24gcHVi
        bGlzaChwcm9taXNlLCBzZXR0bGVkKSB7CiAgICAgIHZhciBjaGlsZCwgY2Fs
        bGJhY2ssIHN1YnNjcmliZXJzID0gcHJvbWlzZS5fc3Vic2NyaWJlcnMsIGRl
        dGFpbCA9IHByb21pc2UuX2RldGFpbDsKCiAgICAgIGlmIChjb25maWcuaW5z
        dHJ1bWVudCkgewogICAgICAgIGluc3RydW1lbnQoc2V0dGxlZCA9PT0gRlVM
        RklMTEVEID8gJ2Z1bGZpbGxlZCcgOiAncmVqZWN0ZWQnLCBwcm9taXNlKTsK
        ICAgICAgfQoKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdWJzY3JpYmVy
        cy5sZW5ndGg7IGkgKz0gMykgewogICAgICAgIGNoaWxkID0gc3Vic2NyaWJl
        cnNbaV07CiAgICAgICAgY2FsbGJhY2sgPSBzdWJzY3JpYmVyc1tpICsgc2V0
        dGxlZF07CgogICAgICAgIGludm9rZUNhbGxiYWNrKHNldHRsZWQsIGNoaWxk
        LCBjYWxsYmFjaywgZGV0YWlsKTsKICAgICAgfQoKICAgICAgcHJvbWlzZS5f
        c3Vic2NyaWJlcnMgPSBudWxsOwogICAgfQoKICAgIFByb21pc2UucHJvdG90
        eXBlID0gewogICAgICBjb25zdHJ1Y3RvcjogUHJvbWlzZSwKCiAgICAgIF9p
        ZDogdW5kZWZpbmVkLAogICAgICBfZ3VpZEtleTogZ3VpZEtleSwKICAgICAg
        X2xhYmVsOiB1bmRlZmluZWQsCgogICAgICBfc3RhdGU6IHVuZGVmaW5lZCwK
        ICAgICAgX2RldGFpbDogdW5kZWZpbmVkLAogICAgICBfc3Vic2NyaWJlcnM6
        IHVuZGVmaW5lZCwKCiAgICAgIF9vbmVycm9yOiBmdW5jdGlvbiAocmVhc29u
        KSB7CiAgICAgICAgY29uZmlnLnRyaWdnZXIoJ2Vycm9yJywgcmVhc29uKTsK
        ICAgICAgfSwKCiAgICAvKioKICAgICAgVGhlIHByaW1hcnkgd2F5IG9mIGlu
        dGVyYWN0aW5nIHdpdGggYSBwcm9taXNlIGlzIHRocm91Z2ggaXRzIGB0aGVu
        YCBtZXRob2QsCiAgICAgIHdoaWNoIHJlZ2lzdGVycyBjYWxsYmFja3MgdG8g
        cmVjZWl2ZSBlaXRoZXIgYSBwcm9taXNlJ3MgZXZlbnR1YWwgdmFsdWUgb3Ig
        dGhlCiAgICAgIHJlYXNvbiB3aHkgdGhlIHByb21pc2UgY2Fubm90IGJlIGZ1
        bGZpbGxlZC4KCiAgICAgIGBgYGpzCiAgICAgIGZpbmRVc2VyKCkudGhlbihm
        dW5jdGlvbih1c2VyKXsKICAgICAgICAvLyB1c2VyIGlzIGF2YWlsYWJsZQog
        ICAgICB9LCBmdW5jdGlvbihyZWFzb24pewogICAgICAgIC8vIHVzZXIgaXMg
        dW5hdmFpbGFibGUsIGFuZCB5b3UgYXJlIGdpdmVuIHRoZSByZWFzb24gd2h5
        CiAgICAgIH0pOwogICAgICBgYGAKCiAgICAgIENoYWluaW5nCiAgICAgIC0t
        LS0tLS0tCgogICAgICBUaGUgcmV0dXJuIHZhbHVlIG9mIGB0aGVuYCBpcyBp
        dHNlbGYgYSBwcm9taXNlLiAgVGhpcyBzZWNvbmQsICJkb3duc3RyZWFtIgog
        ICAgICBwcm9taXNlIGlzIHJlc29sdmVkIHdpdGggdGhlIHJldHVybiB2YWx1
        ZSBvZiB0aGUgZmlyc3QgcHJvbWlzZSdzIGZ1bGZpbGxtZW50CiAgICAgIG9y
        IHJlamVjdGlvbiBoYW5kbGVyLCBvciByZWplY3RlZCBpZiB0aGUgaGFuZGxl
        ciB0aHJvd3MgYW4gZXhjZXB0aW9uLgoKICAgICAgYGBganMKICAgICAgZmlu
        ZFVzZXIoKS50aGVuKGZ1bmN0aW9uICh1c2VyKSB7CiAgICAgICAgcmV0dXJu
        IHVzZXIubmFtZTsKICAgICAgfSwgZnVuY3Rpb24gKHJlYXNvbikgewogICAg
        ICAgIHJldHVybiAiZGVmYXVsdCBuYW1lIjsKICAgICAgfSkudGhlbihmdW5j
        dGlvbiAodXNlck5hbWUpIHsKICAgICAgICAvLyBJZiBgZmluZFVzZXJgIGZ1
        bGZpbGxlZCwgYHVzZXJOYW1lYCB3aWxsIGJlIHRoZSB1c2VyJ3MgbmFtZSwg
        b3RoZXJ3aXNlIGl0CiAgICAgICAgLy8gd2lsbCBiZSBgImRlZmF1bHQgbmFt
        ZSJgCiAgICAgIH0pOwoKICAgICAgZmluZFVzZXIoKS50aGVuKGZ1bmN0aW9u
        ICh1c2VyKSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJGb3VuZCB1c2Vy
        LCBidXQgc3RpbGwgdW5oYXBweSIpOwogICAgICB9LCBmdW5jdGlvbiAocmVh
        c29uKSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJgZmluZFVzZXJgIHJl
        amVjdGVkIGFuZCB3ZSdyZSB1bmhhcHB5Iik7CiAgICAgIH0pLnRoZW4oZnVu
        Y3Rpb24gKHZhbHVlKSB7CiAgICAgICAgLy8gbmV2ZXIgcmVhY2hlZAogICAg
        ICB9LCBmdW5jdGlvbiAocmVhc29uKSB7CiAgICAgICAgLy8gaWYgYGZpbmRV
        c2VyYCBmdWxmaWxsZWQsIGByZWFzb25gIHdpbGwgYmUgIkZvdW5kIHVzZXIs
        IGJ1dCBzdGlsbCB1bmhhcHB5Ii4KICAgICAgICAvLyBJZiBgZmluZFVzZXJg
        IHJlamVjdGVkLCBgcmVhc29uYCB3aWxsIGJlICJgZmluZFVzZXJgIHJlamVj
        dGVkIGFuZCB3ZSdyZSB1bmhhcHB5Ii4KICAgICAgfSk7CiAgICAgIGBgYAog
        ICAgICBJZiB0aGUgZG93bnN0cmVhbSBwcm9taXNlIGRvZXMgbm90IHNwZWNp
        ZnkgYSByZWplY3Rpb24gaGFuZGxlciwgcmVqZWN0aW9uIHJlYXNvbnMgd2ls
        bCBiZSBwcm9wYWdhdGVkIGZ1cnRoZXIgZG93bnN0cmVhbS4KCiAgICAgIGBg
        YGpzCiAgICAgIGZpbmRVc2VyKCkudGhlbihmdW5jdGlvbiAodXNlcikgewog
        ICAgICAgIHRocm93IG5ldyBQZWRhZ29naWNhbEV4Y2VwdGlvbigiVXBzdHJl
        YW0gZXJyb3IiKTsKICAgICAgfSkudGhlbihmdW5jdGlvbiAodmFsdWUpIHsK
        ICAgICAgICAvLyBuZXZlciByZWFjaGVkCiAgICAgIH0pLnRoZW4oZnVuY3Rp
        b24gKHZhbHVlKSB7CiAgICAgICAgLy8gbmV2ZXIgcmVhY2hlZAogICAgICB9
        LCBmdW5jdGlvbiAocmVhc29uKSB7CiAgICAgICAgLy8gVGhlIGBQZWRnYWdv
        Y2lhbEV4Y2VwdGlvbmAgaXMgcHJvcGFnYXRlZCBhbGwgdGhlIHdheSBkb3du
        IHRvIGhlcmUKICAgICAgfSk7CiAgICAgIGBgYAoKICAgICAgQXNzaW1pbGF0
        aW9uCiAgICAgIC0tLS0tLS0tLS0tLQoKICAgICAgU29tZXRpbWVzIHRoZSB2
        YWx1ZSB5b3Ugd2FudCB0byBwcm9wYWdhdGUgdG8gYSBkb3duc3RyZWFtIHBy
        b21pc2UgY2FuIG9ubHkgYmUKICAgICAgcmV0cmlldmVkIGFzeW5jaHJvbm91
        c2x5LiBUaGlzIGNhbiBiZSBhY2hpZXZlZCBieSByZXR1cm5pbmcgYSBwcm9t
        aXNlIGluIHRoZQogICAgICBmdWxmaWxsbWVudCBvciByZWplY3Rpb24gaGFu
        ZGxlci4gVGhlIGRvd25zdHJlYW0gcHJvbWlzZSB3aWxsIHRoZW4gYmUgcGVu
        ZGluZwogICAgICB1bnRpbCB0aGUgcmV0dXJuZWQgcHJvbWlzZSBpcyBzZXR0
        bGVkLiBUaGlzIGlzIGNhbGxlZCAqYXNzaW1pbGF0aW9uKi4KCiAgICAgIGBg
        YGpzCiAgICAgIGZpbmRVc2VyKCkudGhlbihmdW5jdGlvbiAodXNlcikgewog
        ICAgICAgIHJldHVybiBmaW5kQ29tbWVudHNCeUF1dGhvcih1c2VyKTsKICAg
        ICAgfSkudGhlbihmdW5jdGlvbiAoY29tbWVudHMpIHsKICAgICAgICAvLyBU
        aGUgdXNlcidzIGNvbW1lbnRzIGFyZSBub3cgYXZhaWxhYmxlCiAgICAgIH0p
        OwogICAgICBgYGAKCiAgICAgIElmIHRoZSBhc3NpbWxpYXRlZCBwcm9taXNl
        IHJlamVjdHMsIHRoZW4gdGhlIGRvd25zdHJlYW0gcHJvbWlzZSB3aWxsIGFs
        c28gcmVqZWN0LgoKICAgICAgYGBganMKICAgICAgZmluZFVzZXIoKS50aGVu
        KGZ1bmN0aW9uICh1c2VyKSB7CiAgICAgICAgcmV0dXJuIGZpbmRDb21tZW50
        c0J5QXV0aG9yKHVzZXIpOwogICAgICB9KS50aGVuKGZ1bmN0aW9uIChjb21t
        ZW50cykgewogICAgICAgIC8vIElmIGBmaW5kQ29tbWVudHNCeUF1dGhvcmAg
        ZnVsZmlsbHMsIHdlJ2xsIGhhdmUgdGhlIHZhbHVlIGhlcmUKICAgICAgfSwg
        ZnVuY3Rpb24gKHJlYXNvbikgewogICAgICAgIC8vIElmIGBmaW5kQ29tbWVu
        dHNCeUF1dGhvcmAgcmVqZWN0cywgd2UnbGwgaGF2ZSB0aGUgcmVhc29uIGhl
        cmUKICAgICAgfSk7CiAgICAgIGBgYAoKICAgICAgU2ltcGxlIEV4YW1wbGUK
        ICAgICAgLS0tLS0tLS0tLS0tLS0KCiAgICAgIFN5bmNocm9ub3VzIEV4YW1w
        bGUKCiAgICAgIGBgYGphdmFzY3JpcHQKICAgICAgdmFyIHJlc3VsdDsKCiAg
        ICAgIHRyeSB7CiAgICAgICAgcmVzdWx0ID0gZmluZFJlc3VsdCgpOwogICAg
        ICAgIC8vIHN1Y2Nlc3MKICAgICAgfSBjYXRjaChyZWFzb24pIHsKICAgICAg
        ICAvLyBmYWlsdXJlCiAgICAgIH0KICAgICAgYGBgCgogICAgICBFcnJiYWNr
        IEV4YW1wbGUKCiAgICAgIGBgYGpzCiAgICAgIGZpbmRSZXN1bHQoZnVuY3Rp
        b24ocmVzdWx0LCBlcnIpewogICAgICAgIGlmIChlcnIpIHsKICAgICAgICAg
        IC8vIGZhaWx1cmUKICAgICAgICB9IGVsc2UgewogICAgICAgICAgLy8gc3Vj
        Y2VzcwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIGBgYAoKICAgICAgUHJv
        bWlzZSBFeGFtcGxlOwoKICAgICAgYGBgamF2YXNjcmlwdAogICAgICBmaW5k
        UmVzdWx0KCkudGhlbihmdW5jdGlvbihyZXN1bHQpewogICAgICAgIC8vIHN1
        Y2Nlc3MKICAgICAgfSwgZnVuY3Rpb24ocmVhc29uKXsKICAgICAgICAvLyBm
        YWlsdXJlCiAgICAgIH0pOwogICAgICBgYGAKCiAgICAgIEFkdmFuY2VkIEV4
        YW1wbGUKICAgICAgLS0tLS0tLS0tLS0tLS0KCiAgICAgIFN5bmNocm9ub3Vz
        IEV4YW1wbGUKCiAgICAgIGBgYGphdmFzY3JpcHQKICAgICAgdmFyIGF1dGhv
        ciwgYm9va3M7CgogICAgICB0cnkgewogICAgICAgIGF1dGhvciA9IGZpbmRB
        dXRob3IoKTsKICAgICAgICBib29rcyAgPSBmaW5kQm9va3NCeUF1dGhvcihh
        dXRob3IpOwogICAgICAgIC8vIHN1Y2Nlc3MKICAgICAgfSBjYXRjaChyZWFz
        b24pIHsKICAgICAgICAvLyBmYWlsdXJlCiAgICAgIH0KICAgICAgYGBgCgog
        ICAgICBFcnJiYWNrIEV4YW1wbGUKCiAgICAgIGBgYGpzCgogICAgICBmdW5j
        dGlvbiBmb3VuZEJvb2tzKGJvb2tzKSB7CgogICAgICB9CgogICAgICBmdW5j
        dGlvbiBmYWlsdXJlKHJlYXNvbikgewoKICAgICAgfQoKICAgICAgZmluZEF1
        dGhvcihmdW5jdGlvbihhdXRob3IsIGVycil7CiAgICAgICAgaWYgKGVycikg
        ewogICAgICAgICAgZmFpbHVyZShlcnIpOwogICAgICAgICAgLy8gZmFpbHVy
        ZQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0cnkgewogICAgICAgICAg
        ICBmaW5kQm9vb2tzQnlBdXRob3IoYXV0aG9yLCBmdW5jdGlvbihib29rcywg
        ZXJyKSB7CiAgICAgICAgICAgICAgaWYgKGVycikgewogICAgICAgICAgICAg
        ICAgZmFpbHVyZShlcnIpOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAg
        ICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICBmb3VuZEJvb2tz
        KGJvb2tzKTsKICAgICAgICAgICAgICAgIH0gY2F0Y2gocmVhc29uKSB7CiAg
        ICAgICAgICAgICAgICAgIGZhaWx1cmUocmVhc29uKTsKICAgICAgICAgICAg
        ICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAg
        ICAgfSBjYXRjaChlcnJvcikgewogICAgICAgICAgICBmYWlsdXJlKGVycik7
        CiAgICAgICAgICB9CiAgICAgICAgICAvLyBzdWNjZXNzCiAgICAgICAgfQog
        ICAgICB9KTsKICAgICAgYGBgCgogICAgICBQcm9taXNlIEV4YW1wbGU7Cgog
        ICAgICBgYGBqYXZhc2NyaXB0CiAgICAgIGZpbmRBdXRob3IoKS4KICAgICAg
        ICB0aGVuKGZpbmRCb29rc0J5QXV0aG9yKS4KICAgICAgICB0aGVuKGZ1bmN0
        aW9uKGJvb2tzKXsKICAgICAgICAgIC8vIGZvdW5kIGJvb2tzCiAgICAgIH0p
        LmNhdGNoKGZ1bmN0aW9uKHJlYXNvbil7CiAgICAgICAgLy8gc29tZXRoaW5n
        IHdlbnQgd3JvbmcKICAgICAgfSk7CiAgICAgIGBgYAoKICAgICAgQG1ldGhv
        ZCB0aGVuCiAgICAgIEBwYXJhbSB7RnVuY3Rpb259IG9uRnVsZmlsbGVkCiAg
        ICAgIEBwYXJhbSB7RnVuY3Rpb259IG9uUmVqZWN0ZWQKICAgICAgQHBhcmFt
        IHtTdHJpbmd9IGxhYmVsIG9wdGlvbmFsIHN0cmluZyBmb3IgbGFiZWxpbmcg
        dGhlIHByb21pc2UuCiAgICAgIFVzZWZ1bCBmb3IgdG9vbGluZy4KICAgICAg
        QHJldHVybiB7UHJvbWlzZX0KICAgICovCiAgICAgIHRoZW46IGZ1bmN0aW9u
        KG9uRnVsZmlsbG1lbnQsIG9uUmVqZWN0aW9uLCBsYWJlbCkgewogICAgICAg
        IHZhciBwcm9taXNlID0gdGhpczsKICAgICAgICB0aGlzLl9vbmVycm9yID0g
        bnVsbDsKCiAgICAgICAgdmFyIHRoZW5Qcm9taXNlID0gbmV3IHRoaXMuY29u
        c3RydWN0b3Iobm9vcCwgbGFiZWwpOwoKICAgICAgICBpZiAodGhpcy5fc3Rh
        dGUpIHsKICAgICAgICAgIHZhciBjYWxsYmFja3MgPSBhcmd1bWVudHM7CiAg
        ICAgICAgICBjb25maWcuYXN5bmMoZnVuY3Rpb24gaW52b2tlUHJvbWlzZUNh
        bGxiYWNrKCkgewogICAgICAgICAgICBpbnZva2VDYWxsYmFjayhwcm9taXNl
        Ll9zdGF0ZSwgdGhlblByb21pc2UsIGNhbGxiYWNrc1twcm9taXNlLl9zdGF0
        ZSAtIDFdLCBwcm9taXNlLl9kZXRhaWwpOwogICAgICAgICAgfSk7CiAgICAg
        ICAgfSBlbHNlIHsKICAgICAgICAgIHN1YnNjcmliZSh0aGlzLCB0aGVuUHJv
        bWlzZSwgb25GdWxmaWxsbWVudCwgb25SZWplY3Rpb24pOwogICAgICAgIH0K
        CiAgICAgICAgaWYgKGNvbmZpZy5pbnN0cnVtZW50KSB7CiAgICAgICAgICBp
        bnN0cnVtZW50KCdjaGFpbmVkJywgcHJvbWlzZSwgdGhlblByb21pc2UpOwog
        ICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHRoZW5Qcm9taXNlOwogICAgICB9
        LAoKICAgIC8qKgogICAgICBgY2F0Y2hgIGlzIHNpbXBseSBzdWdhciBmb3Ig
        YHRoZW4odW5kZWZpbmVkLCBvblJlamVjdGlvbilgIHdoaWNoIG1ha2VzIGl0
        IHRoZSBzYW1lCiAgICAgIGFzIHRoZSBjYXRjaCBibG9jayBvZiBhIHRyeS9j
        YXRjaCBzdGF0ZW1lbnQuCgogICAgICBgYGBqcwogICAgICBmdW5jdGlvbiBm
        aW5kQXV0aG9yKCl7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJjb3VsZG4n
        dCBmaW5kIHRoYXQgYXV0aG9yIik7CiAgICAgIH0KCiAgICAgIC8vIHN5bmNo
        cm9ub3VzCiAgICAgIHRyeSB7CiAgICAgICAgZmluZEF1dGhvcigpOwogICAg
        ICB9IGNhdGNoKHJlYXNvbikgewogICAgICAgIC8vIHNvbWV0aGluZyB3ZW50
        IHdyb25nCiAgICAgIH0KCiAgICAgIC8vIGFzeW5jIHdpdGggcHJvbWlzZXMK
        ICAgICAgZmluZEF1dGhvcigpLmNhdGNoKGZ1bmN0aW9uKHJlYXNvbil7CiAg
        ICAgICAgLy8gc29tZXRoaW5nIHdlbnQgd3JvbmcKICAgICAgfSk7CiAgICAg
        IGBgYAoKICAgICAgQG1ldGhvZCBjYXRjaAogICAgICBAcGFyYW0ge0Z1bmN0
        aW9ufSBvblJlamVjdGlvbgogICAgICBAcGFyYW0ge1N0cmluZ30gbGFiZWwg
        b3B0aW9uYWwgc3RyaW5nIGZvciBsYWJlbGluZyB0aGUgcHJvbWlzZS4KICAg
        ICAgVXNlZnVsIGZvciB0b29saW5nLgogICAgICBAcmV0dXJuIHtQcm9taXNl
        fQogICAgKi8KICAgICAgJ2NhdGNoJzogZnVuY3Rpb24ob25SZWplY3Rpb24s
        IGxhYmVsKSB7CiAgICAgICAgcmV0dXJuIHRoaXMudGhlbihudWxsLCBvblJl
        amVjdGlvbiwgbGFiZWwpOwogICAgICB9LAoKICAgIC8qKgogICAgICBgZmlu
        YWxseWAgd2lsbCBiZSBpbnZva2VkIHJlZ2FyZGxlc3Mgb2YgdGhlIHByb21p
        c2UncyBmYXRlIGp1c3QgYXMgbmF0aXZlCiAgICAgIHRyeS9jYXRjaC9maW5h
        bGx5IGJlaGF2ZXMKCiAgICAgIFN5bmNocm9ub3VzIGV4YW1wbGU6CgogICAg
        ICBgYGBqcwogICAgICBmaW5kQXV0aG9yKCkgewogICAgICAgIGlmIChNYXRo
        LnJhbmRvbSgpID4gMC41KSB7CiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3Io
        KTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIG5ldyBBdXRob3IoKTsKICAg
        ICAgfQoKICAgICAgdHJ5IHsKICAgICAgICByZXR1cm4gZmluZEF1dGhvcigp
        OyAvLyBzdWNjZWVkIG9yIGZhaWwKICAgICAgfSBjYXRjaChlcnJvcikgewog
        ICAgICAgIHJldHVybiBmaW5kT3RoZXJBdXRoZXIoKTsKICAgICAgfSBmaW5h
        bGx5IHsKICAgICAgICAvLyBhbHdheXMgcnVucwogICAgICAgIC8vIGRvZXNu
        J3QgYWZmZWN0IHRoZSByZXR1cm4gdmFsdWUKICAgICAgfQogICAgICBgYGAK
        CiAgICAgIEFzeW5jaHJvbm91cyBleGFtcGxlOgoKICAgICAgYGBganMKICAg
        ICAgZmluZEF1dGhvcigpLmNhdGNoKGZ1bmN0aW9uKHJlYXNvbil7CiAgICAg
        ICAgcmV0dXJuIGZpbmRPdGhlckF1dGhlcigpOwogICAgICB9KS5maW5hbGx5
        KGZ1bmN0aW9uKCl7CiAgICAgICAgLy8gYXV0aG9yIHdhcyBlaXRoZXIgZm91
        bmQsIG9yIG5vdAogICAgICB9KTsKICAgICAgYGBgCgogICAgICBAbWV0aG9k
        IGZpbmFsbHkKICAgICAgQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2sKICAg
        ICAgQHBhcmFtIHtTdHJpbmd9IGxhYmVsIG9wdGlvbmFsIHN0cmluZyBmb3Ig
        bGFiZWxpbmcgdGhlIHByb21pc2UuCiAgICAgIFVzZWZ1bCBmb3IgdG9vbGlu
        Zy4KICAgICAgQHJldHVybiB7UHJvbWlzZX0KICAgICovCiAgICAgICdmaW5h
        bGx5JzogZnVuY3Rpb24oY2FsbGJhY2ssIGxhYmVsKSB7CiAgICAgICAgdmFy
        IGNvbnN0cnVjdG9yID0gdGhpcy5jb25zdHJ1Y3RvcjsKCiAgICAgICAgcmV0
        dXJuIHRoaXMudGhlbihmdW5jdGlvbih2YWx1ZSkgewogICAgICAgICAgcmV0
        dXJuIGNvbnN0cnVjdG9yLmNhc3QoY2FsbGJhY2soKSkudGhlbihmdW5jdGlv
        bigpewogICAgICAgICAgICByZXR1cm4gdmFsdWU7CiAgICAgICAgICB9KTsK
        ICAgICAgICB9LCBmdW5jdGlvbihyZWFzb24pIHsKICAgICAgICAgIHJldHVy
        biBjb25zdHJ1Y3Rvci5jYXN0KGNhbGxiYWNrKCkpLnRoZW4oZnVuY3Rpb24o
        KXsKICAgICAgICAgICAgdGhyb3cgcmVhc29uOwogICAgICAgICAgfSk7CiAg
        ICAgICAgfSwgbGFiZWwpOwogICAgICB9CiAgICB9OwoKICAgIGZ1bmN0aW9u
        IGludm9rZUNhbGxiYWNrKHNldHRsZWQsIHByb21pc2UsIGNhbGxiYWNrLCBk
        ZXRhaWwpIHsKICAgICAgdmFyIGhhc0NhbGxiYWNrID0gaXNGdW5jdGlvbihj
        YWxsYmFjayksCiAgICAgICAgICB2YWx1ZSwgZXJyb3IsIHN1Y2NlZWRlZCwg
        ZmFpbGVkOwoKICAgICAgaWYgKGhhc0NhbGxiYWNrKSB7CiAgICAgICAgdHJ5
        IHsKICAgICAgICAgIHZhbHVlID0gY2FsbGJhY2soZGV0YWlsKTsKICAgICAg
        ICAgIHN1Y2NlZWRlZCA9IHRydWU7CiAgICAgICAgfSBjYXRjaChlKSB7CiAg
        ICAgICAgICBmYWlsZWQgPSB0cnVlOwogICAgICAgICAgZXJyb3IgPSBlOwog
        ICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICB2YWx1ZSA9IGRldGFp
        bDsKICAgICAgICBzdWNjZWVkZWQgPSB0cnVlOwogICAgICB9CgogICAgICBp
        ZiAoaGFuZGxlVGhlbmFibGUocHJvbWlzZSwgdmFsdWUpKSB7CiAgICAgICAg
        cmV0dXJuOwogICAgICB9IGVsc2UgaWYgKGhhc0NhbGxiYWNrICYmIHN1Y2Nl
        ZWRlZCkgewogICAgICAgIHJlc29sdmUocHJvbWlzZSwgdmFsdWUpOwogICAg
        ICB9IGVsc2UgaWYgKGZhaWxlZCkgewogICAgICAgIHJlamVjdChwcm9taXNl
        LCBlcnJvcik7CiAgICAgIH0gZWxzZSBpZiAoc2V0dGxlZCA9PT0gRlVMRklM
        TEVEKSB7CiAgICAgICAgcmVzb2x2ZShwcm9taXNlLCB2YWx1ZSk7CiAgICAg
        IH0gZWxzZSBpZiAoc2V0dGxlZCA9PT0gUkVKRUNURUQpIHsKICAgICAgICBy
        ZWplY3QocHJvbWlzZSwgdmFsdWUpOwogICAgICB9CiAgICB9CgogICAgZnVu
        Y3Rpb24gaGFuZGxlVGhlbmFibGUocHJvbWlzZSwgdmFsdWUpIHsKICAgICAg
        dmFyIHRoZW4gPSBudWxsLAogICAgICByZXNvbHZlZDsKCiAgICAgIHRyeSB7
        CiAgICAgICAgaWYgKHByb21pc2UgPT09IHZhbHVlKSB7CiAgICAgICAgICB0
        aHJvdyBuZXcgVHlwZUVycm9yKCJBIHByb21pc2VzIGNhbGxiYWNrIGNhbm5v
        dCByZXR1cm4gdGhhdCBzYW1lIHByb21pc2UuIik7CiAgICAgICAgfQoKICAg
        ICAgICBpZiAob2JqZWN0T3JGdW5jdGlvbih2YWx1ZSkpIHsKICAgICAgICAg
        IHRoZW4gPSB2YWx1ZS50aGVuOwoKICAgICAgICAgIGlmIChpc0Z1bmN0aW9u
        KHRoZW4pKSB7CiAgICAgICAgICAgIHRoZW4uY2FsbCh2YWx1ZSwgZnVuY3Rp
        b24odmFsKSB7CiAgICAgICAgICAgICAgaWYgKHJlc29sdmVkKSB7IHJldHVy
        biB0cnVlOyB9CiAgICAgICAgICAgICAgcmVzb2x2ZWQgPSB0cnVlOwoKICAg
        ICAgICAgICAgICBpZiAodmFsdWUgIT09IHZhbCkgewogICAgICAgICAgICAg
        ICAgcmVzb2x2ZShwcm9taXNlLCB2YWwpOwogICAgICAgICAgICAgIH0gZWxz
        ZSB7CiAgICAgICAgICAgICAgICBmdWxmaWxsKHByb21pc2UsIHZhbCk7CiAg
        ICAgICAgICAgICAgfQogICAgICAgICAgICB9LCBmdW5jdGlvbih2YWwpIHsK
        ICAgICAgICAgICAgICBpZiAocmVzb2x2ZWQpIHsgcmV0dXJuIHRydWU7IH0K
        ICAgICAgICAgICAgICByZXNvbHZlZCA9IHRydWU7CgogICAgICAgICAgICAg
        IHJlamVjdChwcm9taXNlLCB2YWwpOwogICAgICAgICAgICB9LCAnZGVyaXZl
        ZCBmcm9tOiAnICsgKHByb21pc2UuX2xhYmVsIHx8ICcgdW5rbm93biBwcm9t
        aXNlJykpOwoKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICB9
        CiAgICAgICAgfQogICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIGlm
        IChyZXNvbHZlZCkgeyByZXR1cm4gdHJ1ZTsgfQogICAgICAgIHJlamVjdChw
        cm9taXNlLCBlcnJvcik7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0K
        CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KCiAgICBmdW5jdGlvbiByZXNv
        bHZlKHByb21pc2UsIHZhbHVlKSB7CiAgICAgIGlmIChwcm9taXNlID09PSB2
        YWx1ZSkgewogICAgICAgIGZ1bGZpbGwocHJvbWlzZSwgdmFsdWUpOwogICAg
        ICB9IGVsc2UgaWYgKCFoYW5kbGVUaGVuYWJsZShwcm9taXNlLCB2YWx1ZSkp
        IHsKICAgICAgICBmdWxmaWxsKHByb21pc2UsIHZhbHVlKTsKICAgICAgfQog
        ICAgfQoKICAgIGZ1bmN0aW9uIGZ1bGZpbGwocHJvbWlzZSwgdmFsdWUpIHsK
        ICAgICAgaWYgKHByb21pc2UuX3N0YXRlICE9PSBQRU5ESU5HKSB7IHJldHVy
        bjsgfQogICAgICBwcm9taXNlLl9zdGF0ZSA9IFNFQUxFRDsKICAgICAgcHJv
        bWlzZS5fZGV0YWlsID0gdmFsdWU7CgogICAgICBjb25maWcuYXN5bmMocHVi
        bGlzaEZ1bGZpbGxtZW50LCBwcm9taXNlKTsKICAgIH0KCiAgICBmdW5jdGlv
        biByZWplY3QocHJvbWlzZSwgcmVhc29uKSB7CiAgICAgIGlmIChwcm9taXNl
        Ll9zdGF0ZSAhPT0gUEVORElORykgeyByZXR1cm47IH0KICAgICAgcHJvbWlz
        ZS5fc3RhdGUgPSBTRUFMRUQ7CiAgICAgIHByb21pc2UuX2RldGFpbCA9IHJl
        YXNvbjsKCiAgICAgIGNvbmZpZy5hc3luYyhwdWJsaXNoUmVqZWN0aW9uLCBw
        cm9taXNlKTsKICAgIH0KCiAgICBmdW5jdGlvbiBwdWJsaXNoRnVsZmlsbG1l
        bnQocHJvbWlzZSkgewogICAgICBwdWJsaXNoKHByb21pc2UsIHByb21pc2Uu
        X3N0YXRlID0gRlVMRklMTEVEKTsKICAgIH0KCiAgICBmdW5jdGlvbiBwdWJs
        aXNoUmVqZWN0aW9uKHByb21pc2UpIHsKICAgICAgaWYgKHByb21pc2UuX29u
        ZXJyb3IpIHsKICAgICAgICBwcm9taXNlLl9vbmVycm9yKHByb21pc2UuX2Rl
        dGFpbCk7CiAgICAgIH0KCiAgICAgIHB1Ymxpc2gocHJvbWlzZSwgcHJvbWlz
        ZS5fc3RhdGUgPSBSRUpFQ1RFRCk7CiAgICB9CiAgfSk7CmRlZmluZSgicnN2
        cC9wcm9taXNlL2FsbCIsIAogIFsiLi4vdXRpbHMiLCJleHBvcnRzIl0sCiAg
        ZnVuY3Rpb24oX19kZXBlbmRlbmN5MV9fLCBfX2V4cG9ydHNfXykgewogICAg
        InVzZSBzdHJpY3QiOwogICAgdmFyIGlzQXJyYXkgPSBfX2RlcGVuZGVuY3kx
        X18uaXNBcnJheTsKICAgIHZhciBpc05vblRoZW5hYmxlID0gX19kZXBlbmRl
        bmN5MV9fLmlzTm9uVGhlbmFibGU7CgogICAgLyoqCiAgICAgIGBSU1ZQLlBy
        b21pc2UuYWxsYCBhY2NlcHRzIGFuIGFycmF5IG9mIHByb21pc2VzLCBhbmQg
        cmV0dXJucyBhIG5ldyBwcm9taXNlIHdoaWNoCiAgICAgIGlzIGZ1bGZpbGxl
        ZCB3aXRoIGFuIGFycmF5IG9mIGZ1bGZpbGxtZW50IHZhbHVlcyBmb3IgdGhl
        IHBhc3NlZCBwcm9taXNlcywgb3IKICAgICAgcmVqZWN0ZWQgd2l0aCB0aGUg
        cmVhc29uIG9mIHRoZSBmaXJzdCBwYXNzZWQgcHJvbWlzZSB0byBiZSByZWpl
        Y3RlZC4gSXQgY2FzdHMgYWxsCiAgICAgIGVsZW1lbnRzIG9mIHRoZSBwYXNz
        ZWQgaXRlcmFibGUgdG8gcHJvbWlzZXMgYXMgaXQgcnVucyB0aGlzIGFsZ29y
        aXRobS4KCiAgICAgIEV4YW1wbGU6CgogICAgICBgYGBqYXZhc2NyaXB0CiAg
        ICAgIHZhciBwcm9taXNlMSA9IFJTVlAucmVzb2x2ZSgxKTsKICAgICAgdmFy
        IHByb21pc2UyID0gUlNWUC5yZXNvbHZlKDIpOwogICAgICB2YXIgcHJvbWlz
        ZTMgPSBSU1ZQLnJlc29sdmUoMyk7CiAgICAgIHZhciBwcm9taXNlcyA9IFsg
        cHJvbWlzZTEsIHByb21pc2UyLCBwcm9taXNlMyBdOwoKICAgICAgUlNWUC5Q
        cm9taXNlLmFsbChwcm9taXNlcykudGhlbihmdW5jdGlvbihhcnJheSl7CiAg
        ICAgICAgLy8gVGhlIGFycmF5IGhlcmUgd291bGQgYmUgWyAxLCAyLCAzIF07
        CiAgICAgIH0pOwogICAgICBgYGAKCiAgICAgIElmIGFueSBvZiB0aGUgYHBy
        b21pc2VzYCBnaXZlbiB0byBgUlNWUC5hbGxgIGFyZSByZWplY3RlZCwgdGhl
        IGZpcnN0IHByb21pc2UKICAgICAgdGhhdCBpcyByZWplY3RlZCB3aWxsIGJl
        IGdpdmVuIGFzIGFuIGFyZ3VtZW50IHRvIHRoZSByZXR1cm5lZCBwcm9taXNl
        cydzCiAgICAgIHJlamVjdGlvbiBoYW5kbGVyLiBGb3IgZXhhbXBsZToKCiAg
        ICAgIEV4YW1wbGU6CgogICAgICBgYGBqYXZhc2NyaXB0CiAgICAgIHZhciBw
        cm9taXNlMSA9IFJTVlAucmVzb2x2ZSgxKTsKICAgICAgdmFyIHByb21pc2Uy
        ID0gUlNWUC5yZWplY3QobmV3IEVycm9yKCIyIikpOwogICAgICB2YXIgcHJv
        bWlzZTMgPSBSU1ZQLnJlamVjdChuZXcgRXJyb3IoIjMiKSk7CiAgICAgIHZh
        ciBwcm9taXNlcyA9IFsgcHJvbWlzZTEsIHByb21pc2UyLCBwcm9taXNlMyBd
        OwoKICAgICAgUlNWUC5Qcm9taXNlLmFsbChwcm9taXNlcykudGhlbihmdW5j
        dGlvbihhcnJheSl7CiAgICAgICAgLy8gQ29kZSBoZXJlIG5ldmVyIHJ1bnMg
        YmVjYXVzZSB0aGVyZSBhcmUgcmVqZWN0ZWQgcHJvbWlzZXMhCiAgICAgIH0s
        IGZ1bmN0aW9uKGVycm9yKSB7CiAgICAgICAgLy8gZXJyb3IubWVzc2FnZSA9
        PT0gIjIiCiAgICAgIH0pOwogICAgICBgYGAKCiAgICAgIEBtZXRob2QgYWxs
        CiAgICAgIEBmb3IgRW1iZXIuUlNWUC5Qcm9taXNlCiAgICAgIEBwYXJhbSB7
        QXJyYXl9IGVudHJpZXMgYXJyYXkgb2YgcHJvbWlzZXMKICAgICAgQHBhcmFt
        IHtTdHJpbmd9IGxhYmVsIG9wdGlvbmFsIHN0cmluZyBmb3IgbGFiZWxpbmcg
        dGhlIHByb21pc2UuCiAgICAgIFVzZWZ1bCBmb3IgdG9vbGluZy4KICAgICAg
        QHJldHVybiB7UHJvbWlzZX0gcHJvbWlzZSB0aGF0IGlzIGZ1bGZpbGxlZCB3
        aGVuIGFsbCBgcHJvbWlzZXNgIGhhdmUgYmVlbgogICAgICBmdWxmaWxsZWQs
        IG9yIHJlamVjdGVkIGlmIGFueSBvZiB0aGVtIGJlY29tZSByZWplY3RlZC4K
        ICAgICAgQHN0YXRpYwogICAgKi8KICAgIF9fZXhwb3J0c19fWyJkZWZhdWx0
        Il0gPSBmdW5jdGlvbiBhbGwoZW50cmllcywgbGFiZWwpIHsKCiAgICAgIC8q
        anNoaW50IHZhbGlkdGhpczp0cnVlICovCiAgICAgIHZhciBDb25zdHJ1Y3Rv
        ciA9IHRoaXM7CgogICAgICByZXR1cm4gbmV3IENvbnN0cnVjdG9yKGZ1bmN0
        aW9uKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgIGlmICghaXNBcnJheShl
        bnRyaWVzKSkgewogICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignWW91
        IG11c3QgcGFzcyBhbiBhcnJheSB0byBhbGwuJyk7CiAgICAgICAgfQoKICAg
        ICAgICB2YXIgcmVtYWluaW5nID0gZW50cmllcy5sZW5ndGg7CiAgICAgICAg
        dmFyIHJlc3VsdHMgPSBuZXcgQXJyYXkocmVtYWluaW5nKTsKICAgICAgICB2
        YXIgZW50cnksIHBlbmRpbmcgPSB0cnVlOwoKICAgICAgICBpZiAocmVtYWlu
        aW5nID09PSAwKSB7CiAgICAgICAgICByZXNvbHZlKHJlc3VsdHMpOwogICAg
        ICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gZnVs
        ZmlsbG1lbnRBdChpbmRleCkgewogICAgICAgICAgcmV0dXJuIGZ1bmN0aW9u
        KHZhbHVlKSB7CiAgICAgICAgICAgIHJlc3VsdHNbaW5kZXhdID0gdmFsdWU7
        CiAgICAgICAgICAgIGlmICgtLXJlbWFpbmluZyA9PT0gMCkgewogICAgICAg
        ICAgICAgIHJlc29sdmUocmVzdWx0cyk7CiAgICAgICAgICAgIH0KICAgICAg
        ICAgIH07CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBvblJlamVjdGlv
        bihyZWFzb24pIHsKICAgICAgICAgIHJlbWFpbmluZyA9IDA7CiAgICAgICAg
        ICByZWplY3QocmVhc29uKTsKICAgICAgICB9CgogICAgICAgIGZvciAodmFy
        IGluZGV4ID0gMDsgaW5kZXggPCBlbnRyaWVzLmxlbmd0aDsgaW5kZXgrKykg
        ewogICAgICAgICAgZW50cnkgPSBlbnRyaWVzW2luZGV4XTsKICAgICAgICAg
        IGlmIChpc05vblRoZW5hYmxlKGVudHJ5KSkgewogICAgICAgICAgICByZXN1
        bHRzW2luZGV4XSA9IGVudHJ5OwogICAgICAgICAgICBpZiAoLS1yZW1haW5p
        bmcgPT09IDApIHsKICAgICAgICAgICAgICByZXNvbHZlKHJlc3VsdHMpOwog
        ICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBD
        b25zdHJ1Y3Rvci5jYXN0KGVudHJ5KS50aGVuKGZ1bGZpbGxtZW50QXQoaW5k
        ZXgpLCBvblJlamVjdGlvbik7CiAgICAgICAgICB9CiAgICAgICAgfQogICAg
        ICB9LCBsYWJlbCk7CiAgICB9OwogIH0pOwpkZWZpbmUoInJzdnAvcHJvbWlz
        ZS9jYXN0IiwgCiAgWyJleHBvcnRzIl0sCiAgZnVuY3Rpb24oX19leHBvcnRz
        X18pIHsKICAgICJ1c2Ugc3RyaWN0IjsKICAgIC8qKgogICAgICBgUlNWUC5Q
        cm9taXNlLmNhc3RgIGNvZXJjZXMgaXRzIGFyZ3VtZW50IHRvIGEgcHJvbWlz
        ZSwgb3IgcmV0dXJucyB0aGUKICAgICAgYXJndW1lbnQgaWYgaXQgaXMgYWxy
        ZWFkeSBhIHByb21pc2Ugd2hpY2ggc2hhcmVzIGEgY29uc3RydWN0b3Igd2l0
        aCB0aGUgY2FzdGVyLgoKICAgICAgRXhhbXBsZToKCiAgICAgIGBgYGphdmFz
        Y3JpcHQKICAgICAgdmFyIHByb21pc2UgPSBSU1ZQLlByb21pc2UucmVzb2x2
        ZSgxKTsKICAgICAgdmFyIGNhc3RlZCA9IFJTVlAuUHJvbWlzZS5jYXN0KHBy
        b21pc2UpOwoKICAgICAgY29uc29sZS5sb2cocHJvbWlzZSA9PT0gY2FzdGVk
        KTsgLy8gdHJ1ZQogICAgICBgYGAKCiAgICAgIEluIHRoZSBjYXNlIG9mIGEg
        cHJvbWlzZSB3aG9zZSBjb25zdHJ1Y3RvciBkb2VzIG5vdCBtYXRjaCwgaXQg
        aXMgYXNzaW1pbGF0ZWQuCiAgICAgIFRoZSByZXN1bHRpbmcgcHJvbWlzZSB3
        aWxsIGZ1bGZpbGwgb3IgcmVqZWN0IGJhc2VkIG9uIHRoZSBvdXRjb21lIG9m
        IHRoZQogICAgICBwcm9taXNlIGJlaW5nIGNhc3RlZC4KCiAgICAgIEV4YW1w
        bGU6CgogICAgICBgYGBqYXZhc2NyaXB0CiAgICAgIHZhciB0aGVubmFibGUg
        PSAkLmdldEpTT04oJy9hcGkvZm9vJyk7CiAgICAgIHZhciBjYXN0ZWQgPSBS
        U1ZQLlByb21pc2UuY2FzdCh0aGVubmFibGUpOwoKICAgICAgY29uc29sZS5s
        b2codGhlbm5hYmxlID09PSBjYXN0ZWQpOyAvLyBmYWxzZQogICAgICBjb25z
        b2xlLmxvZyhjYXN0ZWQgaW5zdGFuY2VvZiBSU1ZQLlByb21pc2UpIC8vIHRy
        dWUKCiAgICAgIGNhc3RlZC50aGVuKGZ1bmN0aW9uKGRhdGEpIHsKICAgICAg
        ICAvLyBkYXRhIGlzIHRoZSB2YWx1ZSBnZXRKU09OIGZ1bGZpbGxzIHdpdGgK
        ICAgICAgfSk7CiAgICAgIGBgYAoKICAgICAgSW4gdGhlIGNhc2Ugb2YgYSBu
        b24tcHJvbWlzZSwgYSBwcm9taXNlIHdoaWNoIHdpbGwgZnVsZmlsbCB3aXRo
        IHRoYXQgdmFsdWUgaXMKICAgICAgcmV0dXJuZWQuCgogICAgICBFeGFtcGxl
        OgoKICAgICAgYGBgamF2YXNjcmlwdAogICAgICB2YXIgdmFsdWUgPSAxOyAv
        LyBjb3VsZCBiZSBhIG51bWJlciwgYm9vbGVhbiwgc3RyaW5nLCB1bmRlZmlu
        ZWQuLi4KICAgICAgdmFyIGNhc3RlZCA9IFJTVlAuUHJvbWlzZS5jYXN0KHZh
        bHVlKTsKCiAgICAgIGNvbnNvbGUubG9nKHZhbHVlID09PSBjYXN0ZWQpOyAv
        LyBmYWxzZQogICAgICBjb25zb2xlLmxvZyhjYXN0ZWQgaW5zdGFuY2VvZiBS
        U1ZQLlByb21pc2UpIC8vIHRydWUKCiAgICAgIGNhc3RlZC50aGVuKGZ1bmN0
        aW9uKHZhbCkgewogICAgICAgIHZhbCA9PT0gdmFsdWUgLy8gPT4gdHJ1ZQog
        ICAgICB9KTsKICAgICAgYGBgCgogICAgICBgUlNWUC5Qcm9taXNlLmNhc3Rg
        IGlzIHNpbWlsYXIgdG8gYFJTVlAuUHJvbWlzZS5yZXNvbHZlYCwgYnV0IGBS
        U1ZQLlByb21pc2UuY2FzdGAgZGlmZmVycyBpbiB0aGUKICAgICAgZm9sbG93
        aW5nIHdheXM6CgogICAgICAqIGBSU1ZQLlByb21pc2UuY2FzdGAgc2VydmVz
        IGFzIGEgbWVtb3J5LWVmZmljaWVudCB3YXkgb2YgZ2V0dGluZyBhIHByb21p
        c2UsIHdoZW4geW91CiAgICAgIGhhdmUgc29tZXRoaW5nIHRoYXQgY291bGQg
        ZWl0aGVyIGJlIGEgcHJvbWlzZSBvciBhIHZhbHVlLiBSU1ZQLnJlc29sdmUK
        ICAgICAgd2lsbCBoYXZlIHRoZSBzYW1lIGVmZmVjdCBidXQgd2lsbCBjcmVh
        dGUgYSBuZXcgcHJvbWlzZSB3cmFwcGVyIGlmIHRoZQogICAgICBhcmd1bWVu
        dCBpcyBhIHByb21pc2UuCiAgICAgICogYFJTVlAuUHJvbWlzZS5jYXN0YCBp
        cyBhIHdheSBvZiBjYXN0aW5nIGluY29taW5nIHRoZW5hYmxlcyBvciBwcm9t
        aXNlIHN1YmNsYXNzZXMgdG8KICAgICAgcHJvbWlzZXMgb2YgdGhlIGV4YWN0
        IGNsYXNzIHNwZWNpZmllZCwgc28gdGhhdCB0aGUgcmVzdWx0aW5nIG9iamVj
        dCdzIGB0aGVuYCBpcwogICAgICBlbnN1cmVkIHRvIGhhdmUgdGhlIGJlaGF2
        aW9yIG9mIHRoZSBjb25zdHJ1Y3RvciB5b3UgYXJlIGNhbGxpbmcgY2FzdCBv
        biAoaS5lLiwgUlNWUC5Qcm9taXNlKS4KCiAgICAgIEBtZXRob2QgY2FzdAog
        ICAgICBAcGFyYW0ge09iamVjdH0gb2JqZWN0IHRvIGJlIGNhc3RlZAogICAg
        ICBAcGFyYW0ge1N0cmluZ30gbGFiZWwgb3B0aW9uYWwgc3RyaW5nIGZvciBs
        YWJlbGluZyB0aGUgcHJvbWlzZS4KICAgICAgVXNlZnVsIGZvciB0b29saW5n
        LgogICAgICBAcmV0dXJuIHtQcm9taXNlfSBwcm9taXNlCiAgICAgIEBzdGF0
        aWMKICAgICovCgogICAgX19leHBvcnRzX19bImRlZmF1bHQiXSA9IGZ1bmN0
        aW9uIGNhc3Qob2JqZWN0LCBsYWJlbCkgewogICAgICAvKmpzaGludCB2YWxp
        ZHRoaXM6dHJ1ZSAqLwogICAgICB2YXIgQ29uc3RydWN0b3IgPSB0aGlzOwoK
        ICAgICAgaWYgKG9iamVjdCAmJiB0eXBlb2Ygb2JqZWN0ID09PSAnb2JqZWN0
        JyAmJiBvYmplY3QuY29uc3RydWN0b3IgPT09IENvbnN0cnVjdG9yKSB7CiAg
        ICAgICAgcmV0dXJuIG9iamVjdDsKICAgICAgfQoKICAgICAgcmV0dXJuIG5l
        dyBDb25zdHJ1Y3RvcihmdW5jdGlvbihyZXNvbHZlKSB7CiAgICAgICAgcmVz
        b2x2ZShvYmplY3QpOwogICAgICB9LCBsYWJlbCk7CiAgICB9OwogIH0pOwpk
        ZWZpbmUoInJzdnAvcHJvbWlzZS9yYWNlIiwgCiAgWyIuLi91dGlscyIsImV4
        cG9ydHMiXSwKICBmdW5jdGlvbihfX2RlcGVuZGVuY3kxX18sIF9fZXhwb3J0
        c19fKSB7CiAgICAidXNlIHN0cmljdCI7CiAgICAvKiBnbG9iYWwgdG9TdHJp
        bmcgKi8KCiAgICB2YXIgaXNBcnJheSA9IF9fZGVwZW5kZW5jeTFfXy5pc0Fy
        cmF5OwogICAgdmFyIGlzRnVuY3Rpb24gPSBfX2RlcGVuZGVuY3kxX18uaXNG
        dW5jdGlvbjsKICAgIHZhciBpc05vblRoZW5hYmxlID0gX19kZXBlbmRlbmN5
        MV9fLmlzTm9uVGhlbmFibGU7CgogICAgLyoqCiAgICAgIGBSU1ZQLlByb21p
        c2UucmFjZWAgcmV0dXJucyBhIG5ldyBwcm9taXNlIHdoaWNoIGlzIHNldHRs
        ZWQgaW4gdGhlIHNhbWUgd2F5IGFzIHRoZQogICAgICBmaXJzdCBwYXNzZWQg
        cHJvbWlzZSB0byBzZXR0bGUuCgogICAgICBFeGFtcGxlOgoKICAgICAgYGBg
        amF2YXNjcmlwdAogICAgICB2YXIgcHJvbWlzZTEgPSBuZXcgUlNWUC5Qcm9t
        aXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCl7CiAgICAgICAgc2V0VGlt
        ZW91dChmdW5jdGlvbigpewogICAgICAgICAgcmVzb2x2ZSgicHJvbWlzZSAx
        Iik7CiAgICAgICAgfSwgMjAwKTsKICAgICAgfSk7CgogICAgICB2YXIgcHJv
        bWlzZTIgPSBuZXcgUlNWUC5Qcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJl
        amVjdCl7CiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpewogICAgICAg
        ICAgcmVzb2x2ZSgicHJvbWlzZSAyIik7CiAgICAgICAgfSwgMTAwKTsKICAg
        ICAgfSk7CgogICAgICBSU1ZQLlByb21pc2UucmFjZShbcHJvbWlzZTEsIHBy
        b21pc2UyXSkudGhlbihmdW5jdGlvbihyZXN1bHQpewogICAgICAgIC8vIHJl
        c3VsdCA9PT0gInByb21pc2UgMiIgYmVjYXVzZSBpdCB3YXMgcmVzb2x2ZWQg
        YmVmb3JlIHByb21pc2UxCiAgICAgICAgLy8gd2FzIHJlc29sdmVkLgogICAg
        ICB9KTsKICAgICAgYGBgCgogICAgICBgUlNWUC5Qcm9taXNlLnJhY2VgIGlz
        IGRldGVybWluaXN0aWMgaW4gdGhhdCBvbmx5IHRoZSBzdGF0ZSBvZiB0aGUg
        Zmlyc3QKICAgICAgc2V0dGxlZCBwcm9taXNlIG1hdHRlcnMuIEZvciBleGFt
        cGxlLCBldmVuIGlmIG90aGVyIHByb21pc2VzIGdpdmVuIHRvIHRoZQogICAg
        ICBgcHJvbWlzZXNgIGFycmF5IGFyZ3VtZW50IGFyZSByZXNvbHZlZCwgYnV0
        IHRoZSBmaXJzdCBzZXR0bGVkIHByb21pc2UgaGFzCiAgICAgIGJlY29tZSBy
        ZWplY3RlZCBiZWZvcmUgdGhlIG90aGVyIHByb21pc2VzIGJlY2FtZSBmdWxm
        aWxsZWQsIHRoZSByZXR1cm5lZAogICAgICBwcm9taXNlIHdpbGwgYmVjb21l
        IHJlamVjdGVkOgoKICAgICAgYGBgamF2YXNjcmlwdAogICAgICB2YXIgcHJv
        bWlzZTEgPSBuZXcgUlNWUC5Qcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJl
        amVjdCl7CiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpewogICAgICAg
        ICAgcmVzb2x2ZSgicHJvbWlzZSAxIik7CiAgICAgICAgfSwgMjAwKTsKICAg
        ICAgfSk7CgogICAgICB2YXIgcHJvbWlzZTIgPSBuZXcgUlNWUC5Qcm9taXNl
        KGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCl7CiAgICAgICAgc2V0VGltZW91
        dChmdW5jdGlvbigpewogICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcigicHJv
        bWlzZSAyIikpOwogICAgICAgIH0sIDEwMCk7CiAgICAgIH0pOwoKICAgICAg
        UlNWUC5Qcm9taXNlLnJhY2UoW3Byb21pc2UxLCBwcm9taXNlMl0pLnRoZW4o
        ZnVuY3Rpb24ocmVzdWx0KXsKICAgICAgICAvLyBDb2RlIGhlcmUgbmV2ZXIg
        cnVucwogICAgICB9LCBmdW5jdGlvbihyZWFzb24pewogICAgICAgIC8vIHJl
        YXNvbi5tZXNzYWdlID09PSAicHJvbWlzZTIiIGJlY2F1c2UgcHJvbWlzZSAy
        IGJlY2FtZSByZWplY3RlZCBiZWZvcmUKICAgICAgICAvLyBwcm9taXNlIDEg
        YmVjYW1lIGZ1bGZpbGxlZAogICAgICB9KTsKICAgICAgYGBgCgogICAgICBB
        biBleGFtcGxlIHJlYWwtd29ybGQgdXNlIGNhc2UgaXMgaW1wbGVtZW50aW5n
        IHRpbWVvdXRzOgoKICAgICAgYGBgamF2YXNjcmlwdAogICAgICBSU1ZQLlBy
        b21pc2UucmFjZShbYWpheCgnZm9vLmpzb24nKSwgdGltZW91dCg1MDAwKV0p
        CiAgICAgIGBgYAoKICAgICAgQG1ldGhvZCByYWNlCiAgICAgIEBwYXJhbSB7
        QXJyYXl9IHByb21pc2VzIGFycmF5IG9mIHByb21pc2VzIHRvIG9ic2VydmUK
        ICAgICAgQHBhcmFtIHtTdHJpbmd9IGxhYmVsIG9wdGlvbmFsIHN0cmluZyBm
        b3IgZGVzY3JpYmluZyB0aGUgcHJvbWlzZSByZXR1cm5lZC4KICAgICAgVXNl
        ZnVsIGZvciB0b29saW5nLgogICAgICBAcmV0dXJuIHtQcm9taXNlfSBhIHBy
        b21pc2Ugd2hpY2ggc2V0dGxlcyBpbiB0aGUgc2FtZSB3YXkgYXMgdGhlIGZp
        cnN0IHBhc3NlZAogICAgICBwcm9taXNlIHRvIHNldHRsZS4KICAgICAgQHN0
        YXRpYwogICAgKi8KICAgIF9fZXhwb3J0c19fWyJkZWZhdWx0Il0gPSBmdW5j
        dGlvbiByYWNlKGVudHJpZXMsIGxhYmVsKSB7CiAgICAgIC8qanNoaW50IHZh
        bGlkdGhpczp0cnVlICovCiAgICAgIHZhciBDb25zdHJ1Y3RvciA9IHRoaXMs
        IGVudHJ5OwoKICAgICAgcmV0dXJuIG5ldyBDb25zdHJ1Y3RvcihmdW5jdGlv
        bihyZXNvbHZlLCByZWplY3QpIHsKICAgICAgICBpZiAoIWlzQXJyYXkoZW50
        cmllcykpIHsKICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1lvdSBt
        dXN0IHBhc3MgYW4gYXJyYXkgdG8gcmFjZS4nKTsKICAgICAgICB9CgogICAg
        ICAgIHZhciBwZW5kaW5nID0gdHJ1ZTsKCiAgICAgICAgZnVuY3Rpb24gb25G
        dWxmaWxsbWVudCh2YWx1ZSkgeyBpZiAocGVuZGluZykgeyBwZW5kaW5nID0g
        ZmFsc2U7IHJlc29sdmUodmFsdWUpOyB9IH0KICAgICAgICBmdW5jdGlvbiBv
        blJlamVjdGlvbihyZWFzb24pICB7IGlmIChwZW5kaW5nKSB7IHBlbmRpbmcg
        PSBmYWxzZTsgcmVqZWN0KHJlYXNvbik7IH0gfQoKICAgICAgICBmb3IgKHZh
        ciBpID0gMDsgaSA8IGVudHJpZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAg
        IGVudHJ5ID0gZW50cmllc1tpXTsKICAgICAgICAgIGlmIChpc05vblRoZW5h
        YmxlKGVudHJ5KSkgewogICAgICAgICAgICBwZW5kaW5nID0gZmFsc2U7CiAg
        ICAgICAgICAgIHJlc29sdmUoZW50cnkpOwogICAgICAgICAgICByZXR1cm47
        CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBDb25zdHJ1Y3Rvci5j
        YXN0KGVudHJ5KS50aGVuKG9uRnVsZmlsbG1lbnQsIG9uUmVqZWN0aW9uKTsK
        ICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIGxhYmVsKTsKICAgIH07
        CiAgfSk7CmRlZmluZSgicnN2cC9wcm9taXNlL3JlamVjdCIsIAogIFsiZXhw
        b3J0cyJdLAogIGZ1bmN0aW9uKF9fZXhwb3J0c19fKSB7CiAgICAidXNlIHN0
        cmljdCI7CiAgICAvKioKICAgICAgYFJTVlAuUHJvbWlzZS5yZWplY3RgIHJl
        dHVybnMgYSBwcm9taXNlIHJlamVjdGVkIHdpdGggdGhlIHBhc3NlZCBgcmVh
        c29uYC4KICAgICAgSXQgaXMgc2hvcnRoYW5kIGZvciB0aGUgZm9sbG93aW5n
        OgoKICAgICAgYGBgamF2YXNjcmlwdAogICAgICB2YXIgcHJvbWlzZSA9IG5l
        dyBSU1ZQLlByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KXsKICAg
        ICAgICByZWplY3QobmV3IEVycm9yKCdXSE9PUFMnKSk7CiAgICAgIH0pOwoK
        ICAgICAgcHJvbWlzZS50aGVuKGZ1bmN0aW9uKHZhbHVlKXsKICAgICAgICAv
        LyBDb2RlIGhlcmUgZG9lc24ndCBydW4gYmVjYXVzZSB0aGUgcHJvbWlzZSBp
        cyByZWplY3RlZCEKICAgICAgfSwgZnVuY3Rpb24ocmVhc29uKXsKICAgICAg
        ICAvLyByZWFzb24ubWVzc2FnZSA9PT0gJ1dIT09QUycKICAgICAgfSk7CiAg
        ICAgIGBgYAoKICAgICAgSW5zdGVhZCBvZiB3cml0aW5nIHRoZSBhYm92ZSwg
        eW91ciBjb2RlIG5vdyBzaW1wbHkgYmVjb21lcyB0aGUgZm9sbG93aW5nOgoK
        ICAgICAgYGBgamF2YXNjcmlwdAogICAgICB2YXIgcHJvbWlzZSA9IFJTVlAu
        UHJvbWlzZS5yZWplY3QobmV3IEVycm9yKCdXSE9PUFMnKSk7CgogICAgICBw
        cm9taXNlLnRoZW4oZnVuY3Rpb24odmFsdWUpewogICAgICAgIC8vIENvZGUg
        aGVyZSBkb2Vzbid0IHJ1biBiZWNhdXNlIHRoZSBwcm9taXNlIGlzIHJlamVj
        dGVkIQogICAgICB9LCBmdW5jdGlvbihyZWFzb24pewogICAgICAgIC8vIHJl
        YXNvbi5tZXNzYWdlID09PSAnV0hPT1BTJwogICAgICB9KTsKICAgICAgYGBg
        CgogICAgICBAbWV0aG9kIHJlamVjdAogICAgICBAcGFyYW0ge0FueX0gcmVh
        c29uIHZhbHVlIHRoYXQgdGhlIHJldHVybmVkIHByb21pc2Ugd2lsbCBiZSBy
        ZWplY3RlZCB3aXRoLgogICAgICBAcGFyYW0ge1N0cmluZ30gbGFiZWwgb3B0
        aW9uYWwgc3RyaW5nIGZvciBpZGVudGlmeWluZyB0aGUgcmV0dXJuZWQgcHJv
        bWlzZS4KICAgICAgVXNlZnVsIGZvciB0b29saW5nLgogICAgICBAcmV0dXJu
        IHtQcm9taXNlfSBhIHByb21pc2UgcmVqZWN0ZWQgd2l0aCB0aGUgZ2l2ZW4g
        YHJlYXNvbmAuCiAgICAgIEBzdGF0aWMKICAgICovCiAgICBfX2V4cG9ydHNf
        X1siZGVmYXVsdCJdID0gZnVuY3Rpb24gcmVqZWN0KHJlYXNvbiwgbGFiZWwp
        IHsKICAgICAgLypqc2hpbnQgdmFsaWR0aGlzOnRydWUgKi8KICAgICAgdmFy
        IENvbnN0cnVjdG9yID0gdGhpczsKCiAgICAgIHJldHVybiBuZXcgQ29uc3Ry
        dWN0b3IoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgIHJl
        amVjdChyZWFzb24pOwogICAgICB9LCBsYWJlbCk7CiAgICB9OwogIH0pOwpk
        ZWZpbmUoInJzdnAvcHJvbWlzZS9yZXNvbHZlIiwgCiAgWyJleHBvcnRzIl0s
        CiAgZnVuY3Rpb24oX19leHBvcnRzX18pIHsKICAgICJ1c2Ugc3RyaWN0IjsK
        ICAgIC8qKgogICAgICBgUlNWUC5Qcm9taXNlLnJlc29sdmVgIHJldHVybnMg
        YSBwcm9taXNlIHRoYXQgd2lsbCBiZWNvbWUgcmVzb2x2ZWQgd2l0aCB0aGUK
        ICAgICAgcGFzc2VkIGB2YWx1ZWAuIEl0IGlzIHNob3J0aGFuZCBmb3IgdGhl
        IGZvbGxvd2luZzoKCiAgICAgIGBgYGphdmFzY3JpcHQKICAgICAgdmFyIHBy
        b21pc2UgPSBuZXcgUlNWUC5Qcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJl
        amVjdCl7CiAgICAgICAgcmVzb2x2ZSgxKTsKICAgICAgfSk7CgogICAgICBw
        cm9taXNlLnRoZW4oZnVuY3Rpb24odmFsdWUpewogICAgICAgIC8vIHZhbHVl
        ID09PSAxCiAgICAgIH0pOwogICAgICBgYGAKCiAgICAgIEluc3RlYWQgb2Yg
        d3JpdGluZyB0aGUgYWJvdmUsIHlvdXIgY29kZSBub3cgc2ltcGx5IGJlY29t
        ZXMgdGhlIGZvbGxvd2luZzoKCiAgICAgIGBgYGphdmFzY3JpcHQKICAgICAg
        dmFyIHByb21pc2UgPSBSU1ZQLlByb21pc2UucmVzb2x2ZSgxKTsKCiAgICAg
        IHByb21pc2UudGhlbihmdW5jdGlvbih2YWx1ZSl7CiAgICAgICAgLy8gdmFs
        dWUgPT09IDEKICAgICAgfSk7CiAgICAgIGBgYAoKICAgICAgQG1ldGhvZCBy
        ZXNvbHZlCiAgICAgIEBwYXJhbSB7QW55fSB2YWx1ZSB2YWx1ZSB0aGF0IHRo
        ZSByZXR1cm5lZCBwcm9taXNlIHdpbGwgYmUgcmVzb2x2ZWQgd2l0aAogICAg
        ICBAcGFyYW0ge1N0cmluZ30gbGFiZWwgb3B0aW9uYWwgc3RyaW5nIGZvciBp
        ZGVudGlmeWluZyB0aGUgcmV0dXJuZWQgcHJvbWlzZS4KICAgICAgVXNlZnVs
        IGZvciB0b29saW5nLgogICAgICBAcmV0dXJuIHtQcm9taXNlfSBhIHByb21p
        c2UgdGhhdCB3aWxsIGJlY29tZSBmdWxmaWxsZWQgd2l0aCB0aGUgZ2l2ZW4K
        ICAgICAgYHZhbHVlYAogICAgICBAc3RhdGljCiAgICAqLwogICAgX19leHBv
        cnRzX19bImRlZmF1bHQiXSA9IGZ1bmN0aW9uIHJlc29sdmUodmFsdWUsIGxh
        YmVsKSB7CiAgICAgIC8qanNoaW50IHZhbGlkdGhpczp0cnVlICovCiAgICAg
        IHZhciBDb25zdHJ1Y3RvciA9IHRoaXM7CgogICAgICByZXR1cm4gbmV3IENv
        bnN0cnVjdG9yKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkgewogICAgICAg
        IHJlc29sdmUodmFsdWUpOwogICAgICB9LCBsYWJlbCk7CiAgICB9OwogIH0p
        OwpkZWZpbmUoInJzdnAvcmFjZSIsIAogIFsiLi9wcm9taXNlIiwiZXhwb3J0
        cyJdLAogIGZ1bmN0aW9uKF9fZGVwZW5kZW5jeTFfXywgX19leHBvcnRzX18p
        IHsKICAgICJ1c2Ugc3RyaWN0IjsKICAgIHZhciBQcm9taXNlID0gX19kZXBl
        bmRlbmN5MV9fWyJkZWZhdWx0Il07CgogICAgLyoqCiAgICAgIFRoaXMgaXMg
        YSBjb252ZW5pZW50IGFsaWFzIGZvciBgUlNWUC5Qcm9taXNlLnJhY2VgLgoK
        ICAgICAgQG1ldGhvZCByYWNlCiAgICAgIEBwYXJhbSB7QXJyYXl9IGFycmF5
        IEFycmF5IG9mIHByb21pc2VzLgogICAgICBAcGFyYW0ge1N0cmluZ30gbGFi
        ZWwgQW4gb3B0aW9uYWwgbGFiZWwuIFRoaXMgaXMgdXNlZnVsCiAgICAgIGZv
        ciB0b29saW5nLgogICAgICBAc3RhdGljCiAgICAqLwogICAgX19leHBvcnRz
        X19bImRlZmF1bHQiXSA9IGZ1bmN0aW9uIHJhY2UoYXJyYXksIGxhYmVsKSB7
        CiAgICAgIHJldHVybiBQcm9taXNlLnJhY2UoYXJyYXksIGxhYmVsKTsKICAg
        IH07CiAgfSk7CmRlZmluZSgicnN2cC9yZWplY3QiLCAKICBbIi4vcHJvbWlz
        ZSIsImV4cG9ydHMiXSwKICBmdW5jdGlvbihfX2RlcGVuZGVuY3kxX18sIF9f
        ZXhwb3J0c19fKSB7CiAgICAidXNlIHN0cmljdCI7CiAgICB2YXIgUHJvbWlz
        ZSA9IF9fZGVwZW5kZW5jeTFfX1siZGVmYXVsdCJdOwoKICAgIC8qKgogICAg
        ICBUaGlzIGlzIGEgY29udmVuaWVudCBhbGlhcyBmb3IgYFJTVlAuUHJvbWlz
        ZS5yZWplY3RgLgoKICAgICAgQG1ldGhvZCByZWplY3QKICAgICAgQGZvciBS
        U1ZQCiAgICAgIEBwYXJhbSB7QW55fSByZWFzb24gdmFsdWUgdGhhdCB0aGUg
        cmV0dXJuZWQgcHJvbWlzZSB3aWxsIGJlIHJlamVjdGVkIHdpdGguCiAgICAg
        IEBwYXJhbSB7U3RyaW5nfSBsYWJlbCBvcHRpb25hbCBzdHJpbmcgZm9yIGlk
        ZW50aWZ5aW5nIHRoZSByZXR1cm5lZCBwcm9taXNlLgogICAgICBVc2VmdWwg
        Zm9yIHRvb2xpbmcuCiAgICAgIEByZXR1cm4ge1Byb21pc2V9IGEgcHJvbWlz
        ZSByZWplY3RlZCB3aXRoIHRoZSBnaXZlbiBgcmVhc29uYC4KICAgICAgQHN0
        YXRpYwogICAgKi8KICAgIF9fZXhwb3J0c19fWyJkZWZhdWx0Il0gPSBmdW5j
        dGlvbiByZWplY3QocmVhc29uLCBsYWJlbCkgewogICAgICByZXR1cm4gUHJv
        bWlzZS5yZWplY3QocmVhc29uLCBsYWJlbCk7CiAgICB9OwogIH0pOwpkZWZp
        bmUoInJzdnAvcmVzb2x2ZSIsIAogIFsiLi9wcm9taXNlIiwiZXhwb3J0cyJd
        LAogIGZ1bmN0aW9uKF9fZGVwZW5kZW5jeTFfXywgX19leHBvcnRzX18pIHsK
        ICAgICJ1c2Ugc3RyaWN0IjsKICAgIHZhciBQcm9taXNlID0gX19kZXBlbmRl
        bmN5MV9fWyJkZWZhdWx0Il07CgogICAgLyoqCiAgICAgIFRoaXMgaXMgYSBj
        b252ZW5pZW50IGFsaWFzIGZvciBgUlNWUC5Qcm9taXNlLnJlc29sdmVgLgoK
        ICAgICAgQG1ldGhvZCByZXNvbHZlCiAgICAgIEBmb3IgUlNWUAogICAgICBA
        cGFyYW0ge0FueX0gdmFsdWUgdmFsdWUgdGhhdCB0aGUgcmV0dXJuZWQgcHJv
        bWlzZSB3aWxsIGJlIHJlc29sdmVkIHdpdGgKICAgICAgQHBhcmFtIHtTdHJp
        bmd9IGxhYmVsIG9wdGlvbmFsIHN0cmluZyBmb3IgaWRlbnRpZnlpbmcgdGhl
        IHJldHVybmVkIHByb21pc2UuCiAgICAgIFVzZWZ1bCBmb3IgdG9vbGluZy4K
        ICAgICAgQHJldHVybiB7UHJvbWlzZX0gYSBwcm9taXNlIHRoYXQgd2lsbCBi
        ZWNvbWUgZnVsZmlsbGVkIHdpdGggdGhlIGdpdmVuCiAgICAgIGB2YWx1ZWAK
        ICAgICAgQHN0YXRpYwogICAgKi8KICAgIF9fZXhwb3J0c19fWyJkZWZhdWx0
        Il0gPSBmdW5jdGlvbiByZXNvbHZlKHZhbHVlLCBsYWJlbCkgewogICAgICBy
        ZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHZhbHVlLCBsYWJlbCk7CiAgICB9Owog
        IH0pOwpkZWZpbmUoInJzdnAvcmV0aHJvdyIsIAogIFsiZXhwb3J0cyJdLAog
        IGZ1bmN0aW9uKF9fZXhwb3J0c19fKSB7CiAgICAidXNlIHN0cmljdCI7CiAg
        ICAvKioKICAgICAgYFJTVlAucmV0aHJvd2Agd2lsbCByZXRocm93IGFuIGVy
        cm9yIG9uIHRoZSBuZXh0IHR1cm4gb2YgdGhlIEphdmFTY3JpcHQgZXZlbnQK
        ICAgICAgbG9vcCBpbiBvcmRlciB0byBhaWQgZGVidWdnaW5nLgoKICAgICAg
        UHJvbWlzZXMgQSsgc3BlY2lmaWVzIHRoYXQgYW55IGV4Y2VwdGlvbnMgdGhh
        dCBvY2N1ciB3aXRoIGEgcHJvbWlzZSBtdXN0IGJlCiAgICAgIGNhdWdodCBi
        eSB0aGUgcHJvbWlzZXMgaW1wbGVtZW50YXRpb24gYW5kIGJ1YmJsZWQgdG8g
        dGhlIGxhc3QgaGFuZGxlci4gRm9yCiAgICAgIHRoaXMgcmVhc29uLCBpdCBp
        cyByZWNvbW1lbmRlZCB0aGF0IHlvdSBhbHdheXMgc3BlY2lmeSBhIHNlY29u
        ZCByZWplY3Rpb24KICAgICAgaGFuZGxlciBmdW5jdGlvbiB0byBgdGhlbmAu
        IEhvd2V2ZXIsIGBSU1ZQLnJldGhyb3dgIHdpbGwgdGhyb3cgdGhlIGV4Y2Vw
        dGlvbgogICAgICBvdXRzaWRlIG9mIHRoZSBwcm9taXNlLCBzbyBpdCBidWJi
        bGVzIHVwIHRvIHlvdXIgY29uc29sZSBpZiBpbiB0aGUgYnJvd3NlciwKICAg
        ICAgb3IgZG9tYWluL2NhdXNlIHVuY2F1Z2h0IGV4Y2VwdGlvbiBpbiBOb2Rl
        LiBgcmV0aHJvd2Agd2lsbCBhbHNvIHRocm93IHRoZQogICAgICBlcnJvciBh
        Z2FpbiBzbyB0aGUgZXJyb3IgY2FuIGJlIGhhbmRsZWQgYnkgdGhlIHByb21p
        c2UgcGVyIHRoZSBzcGVjLgoKICAgICAgYGBgamF2YXNjcmlwdAogICAgICBm
        dW5jdGlvbiB0aHJvd3MoKXsKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1do
        b29wcyEnKTsKICAgICAgfQoKICAgICAgdmFyIHByb21pc2UgPSBuZXcgUlNW
        UC5Qcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCl7CiAgICAgICAg
        dGhyb3dzKCk7CiAgICAgIH0pOwoKICAgICAgcHJvbWlzZS5jYXRjaChSU1ZQ
        LnJldGhyb3cpLnRoZW4oZnVuY3Rpb24oKXsKICAgICAgICAvLyBDb2RlIGhl
        cmUgZG9lc24ndCBydW4gYmVjYXVzZSB0aGUgcHJvbWlzZSBiZWNhbWUgcmVq
        ZWN0ZWQgZHVlIHRvIGFuCiAgICAgICAgLy8gZXJyb3IhCiAgICAgIH0sIGZ1
        bmN0aW9uIChlcnIpewogICAgICAgIC8vIGhhbmRsZSB0aGUgZXJyb3IgaGVy
        ZQogICAgICB9KTsKICAgICAgYGBgCgogICAgICBUaGUgJ1dob29wcycgZXJy
        b3Igd2lsbCBiZSB0aHJvd24gb24gdGhlIG5leHQgdHVybiBvZiB0aGUgZXZl
        bnQgbG9vcAogICAgICBhbmQgeW91IGNhbiB3YXRjaCBmb3IgaXQgaW4geW91
        ciBjb25zb2xlLiBZb3UgY2FuIGFsc28gaGFuZGxlIGl0IHVzaW5nIGEKICAg
        ICAgcmVqZWN0aW9uIGhhbmRsZXIgZ2l2ZW4gdG8gYC50aGVuYCBvciBgLmNh
        dGNoYCBvbiB0aGUgcmV0dXJuZWQgcHJvbWlzZS4KCiAgICAgIEBtZXRob2Qg
        cmV0aHJvdwogICAgICBAZm9yIFJTVlAKICAgICAgQHBhcmFtIHtFcnJvcn0g
        cmVhc29uIHJlYXNvbiB0aGUgcHJvbWlzZSBiZWNhbWUgcmVqZWN0ZWQuCiAg
        ICAgIEB0aHJvd3MgRXJyb3IKICAgICAgQHN0YXRpYwogICAgKi8KICAgIF9f
        ZXhwb3J0c19fWyJkZWZhdWx0Il0gPSBmdW5jdGlvbiByZXRocm93KHJlYXNv
        bikgewogICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgIHRo
        cm93IHJlYXNvbjsKICAgICAgfSk7CiAgICAgIHRocm93IHJlYXNvbjsKICAg
        IH07CiAgfSk7CmRlZmluZSgicnN2cC91dGlscyIsIAogIFsiZXhwb3J0cyJd
        LAogIGZ1bmN0aW9uKF9fZXhwb3J0c19fKSB7CiAgICAidXNlIHN0cmljdCI7
        CiAgICBmdW5jdGlvbiBvYmplY3RPckZ1bmN0aW9uKHgpIHsKICAgICAgcmV0
        dXJuIHR5cGVvZiB4ID09PSAiZnVuY3Rpb24iIHx8ICh0eXBlb2YgeCA9PT0g
        Im9iamVjdCIgJiYgeCAhPT0gbnVsbCk7CiAgICB9CgogICAgX19leHBvcnRz
        X18ub2JqZWN0T3JGdW5jdGlvbiA9IG9iamVjdE9yRnVuY3Rpb247ZnVuY3Rp
        b24gaXNGdW5jdGlvbih4KSB7CiAgICAgIHJldHVybiB0eXBlb2YgeCA9PT0g
        ImZ1bmN0aW9uIjsKICAgIH0KCiAgICBfX2V4cG9ydHNfXy5pc0Z1bmN0aW9u
        ID0gaXNGdW5jdGlvbjtmdW5jdGlvbiBpc05vblRoZW5hYmxlKHgpIHsKICAg
        ICAgcmV0dXJuICFvYmplY3RPckZ1bmN0aW9uKHgpOwogICAgfQoKICAgIF9f
        ZXhwb3J0c19fLmlzTm9uVGhlbmFibGUgPSBpc05vblRoZW5hYmxlO2Z1bmN0
        aW9uIGlzQXJyYXkoeCkgewogICAgICByZXR1cm4gT2JqZWN0LnByb3RvdHlw
        ZS50b1N0cmluZy5jYWxsKHgpID09PSAiW29iamVjdCBBcnJheV0iOwogICAg
        fQoKICAgIF9fZXhwb3J0c19fLmlzQXJyYXkgPSBpc0FycmF5Oy8vIERhdGUu
        bm93IGlzIG5vdCBhdmFpbGFibGUgaW4gYnJvd3NlcnMgPCBJRTkKICAgIC8v
        IGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2Vi
        L0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL0RhdGUvbm93
        I0NvbXBhdGliaWxpdHkKICAgIHZhciBub3cgPSBEYXRlLm5vdyB8fCBmdW5j
        dGlvbigpIHsgcmV0dXJuIG5ldyBEYXRlKCkuZ2V0VGltZSgpOyB9OwogICAg
        X19leHBvcnRzX18ubm93ID0gbm93OwogICAgdmFyIGtleXNPZiA9IE9iamVj
        dC5rZXlzIHx8IGZ1bmN0aW9uKG9iamVjdCkgewogICAgICB2YXIgcmVzdWx0
        ID0gW107CgogICAgICBmb3IgKHZhciBwcm9wIGluIG9iamVjdCkgewogICAg
        ICAgIHJlc3VsdC5wdXNoKHByb3ApOwogICAgICB9CgogICAgICByZXR1cm4g
        cmVzdWx0OwogICAgfTsKICAgIF9fZXhwb3J0c19fLmtleXNPZiA9IGtleXNP
        ZjsKICB9KTsKZGVmaW5lKCJyc3ZwIiwgCiAgWyIuL3JzdnAvcHJvbWlzZSIs
        Ii4vcnN2cC9ldmVudHMiLCIuL3JzdnAvbm9kZSIsIi4vcnN2cC9hbGwiLCIu
        L3JzdnAvYWxsX3NldHRsZWQiLCIuL3JzdnAvcmFjZSIsIi4vcnN2cC9oYXNo
        IiwiLi9yc3ZwL3JldGhyb3ciLCIuL3JzdnAvZGVmZXIiLCIuL3JzdnAvY29u
        ZmlnIiwiLi9yc3ZwL21hcCIsIi4vcnN2cC9yZXNvbHZlIiwiLi9yc3ZwL3Jl
        amVjdCIsIi4vcnN2cC9maWx0ZXIiLCJleHBvcnRzIl0sCiAgZnVuY3Rpb24o
        X19kZXBlbmRlbmN5MV9fLCBfX2RlcGVuZGVuY3kyX18sIF9fZGVwZW5kZW5j
        eTNfXywgX19kZXBlbmRlbmN5NF9fLCBfX2RlcGVuZGVuY3k1X18sIF9fZGVw
        ZW5kZW5jeTZfXywgX19kZXBlbmRlbmN5N19fLCBfX2RlcGVuZGVuY3k4X18s
        IF9fZGVwZW5kZW5jeTlfXywgX19kZXBlbmRlbmN5MTBfXywgX19kZXBlbmRl
        bmN5MTFfXywgX19kZXBlbmRlbmN5MTJfXywgX19kZXBlbmRlbmN5MTNfXywg
        X19kZXBlbmRlbmN5MTRfXywgX19leHBvcnRzX18pIHsKICAgICJ1c2Ugc3Ry
        aWN0IjsKICAgIHZhciBQcm9taXNlID0gX19kZXBlbmRlbmN5MV9fWyJkZWZh
        dWx0Il07CiAgICB2YXIgRXZlbnRUYXJnZXQgPSBfX2RlcGVuZGVuY3kyX19b
        ImRlZmF1bHQiXTsKICAgIHZhciBkZW5vZGVpZnkgPSBfX2RlcGVuZGVuY3kz
        X19bImRlZmF1bHQiXTsKICAgIHZhciBhbGwgPSBfX2RlcGVuZGVuY3k0X19b
        ImRlZmF1bHQiXTsKICAgIHZhciBhbGxTZXR0bGVkID0gX19kZXBlbmRlbmN5
        NV9fWyJkZWZhdWx0Il07CiAgICB2YXIgcmFjZSA9IF9fZGVwZW5kZW5jeTZf
        X1siZGVmYXVsdCJdOwogICAgdmFyIGhhc2ggPSBfX2RlcGVuZGVuY3k3X19b
        ImRlZmF1bHQiXTsKICAgIHZhciByZXRocm93ID0gX19kZXBlbmRlbmN5OF9f
        WyJkZWZhdWx0Il07CiAgICB2YXIgZGVmZXIgPSBfX2RlcGVuZGVuY3k5X19b
        ImRlZmF1bHQiXTsKICAgIHZhciBjb25maWcgPSBfX2RlcGVuZGVuY3kxMF9f
        LmNvbmZpZzsKICAgIHZhciBjb25maWd1cmUgPSBfX2RlcGVuZGVuY3kxMF9f
        LmNvbmZpZ3VyZTsKICAgIHZhciBtYXAgPSBfX2RlcGVuZGVuY3kxMV9fWyJk
        ZWZhdWx0Il07CiAgICB2YXIgcmVzb2x2ZSA9IF9fZGVwZW5kZW5jeTEyX19b
        ImRlZmF1bHQiXTsKICAgIHZhciByZWplY3QgPSBfX2RlcGVuZGVuY3kxM19f
        WyJkZWZhdWx0Il07CiAgICB2YXIgZmlsdGVyID0gX19kZXBlbmRlbmN5MTRf
        X1siZGVmYXVsdCJdOwoKICAgIGZ1bmN0aW9uIGFzeW5jKGNhbGxiYWNrLCBh
        cmcpIHsKICAgICAgY29uZmlnLmFzeW5jKGNhbGxiYWNrLCBhcmcpOwogICAg
        fQoKICAgIGZ1bmN0aW9uIG9uKCkgewogICAgICBjb25maWcub24uYXBwbHko
        Y29uZmlnLCBhcmd1bWVudHMpOwogICAgfQoKICAgIGZ1bmN0aW9uIG9mZigp
        IHsKICAgICAgY29uZmlnLm9mZi5hcHBseShjb25maWcsIGFyZ3VtZW50cyk7
        CiAgICB9CgogICAgLy8gU2V0IHVwIGluc3RydW1lbnRhdGlvbiB0aHJvdWdo
        IGB3aW5kb3cuX19QUk9NSVNFX0lOVFJVTUVOVEFUSU9OX19gCiAgICBpZiAo
        dHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIHdpbmRv
        dy5fX1BST01JU0VfSU5TVFJVTUVOVEFUSU9OX18gPT09ICdvYmplY3QnKSB7
        CiAgICAgIHZhciBjYWxsYmFja3MgPSB3aW5kb3cuX19QUk9NSVNFX0lOU1RS
        VU1FTlRBVElPTl9fOwogICAgICBjb25maWd1cmUoJ2luc3RydW1lbnQnLCB0
        cnVlKTsKICAgICAgZm9yICh2YXIgZXZlbnROYW1lIGluIGNhbGxiYWNrcykg
        ewogICAgICAgIGlmIChjYWxsYmFja3MuaGFzT3duUHJvcGVydHkoZXZlbnRO
        YW1lKSkgewogICAgICAgICAgb24oZXZlbnROYW1lLCBjYWxsYmFja3NbZXZl
        bnROYW1lXSk7CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgX19leHBv
        cnRzX18uUHJvbWlzZSA9IFByb21pc2U7CiAgICBfX2V4cG9ydHNfXy5FdmVu
        dFRhcmdldCA9IEV2ZW50VGFyZ2V0OwogICAgX19leHBvcnRzX18uYWxsID0g
        YWxsOwogICAgX19leHBvcnRzX18uYWxsU2V0dGxlZCA9IGFsbFNldHRsZWQ7
        CiAgICBfX2V4cG9ydHNfXy5yYWNlID0gcmFjZTsKICAgIF9fZXhwb3J0c19f
        Lmhhc2ggPSBoYXNoOwogICAgX19leHBvcnRzX18ucmV0aHJvdyA9IHJldGhy
        b3c7CiAgICBfX2V4cG9ydHNfXy5kZWZlciA9IGRlZmVyOwogICAgX19leHBv
        cnRzX18uZGVub2RlaWZ5ID0gZGVub2RlaWZ5OwogICAgX19leHBvcnRzX18u
        Y29uZmlndXJlID0gY29uZmlndXJlOwogICAgX19leHBvcnRzX18ub24gPSBv
        bjsKICAgIF9fZXhwb3J0c19fLm9mZiA9IG9mZjsKICAgIF9fZXhwb3J0c19f
        LnJlc29sdmUgPSByZXNvbHZlOwogICAgX19leHBvcnRzX18ucmVqZWN0ID0g
        cmVqZWN0OwogICAgX19leHBvcnRzX18uYXN5bmMgPSBhc3luYzsKICAgIF9f
        ZXhwb3J0c19fLm1hcCA9IG1hcDsKICAgIF9fZXhwb3J0c19fLmZpbHRlciA9
        IGZpbHRlcjsKICB9KTsKCn0pKCk7CgooZnVuY3Rpb24oKSB7Ci8qKgpQdWJs
        aWMgYXBpIGZvciB0aGUgY29udGFpbmVyIGlzIHN0aWxsIGluIGZsdXguClRo
        ZSBwdWJsaWMgYXBpLCBzcGVjaWZpZWQgb24gdGhlIGFwcGxpY2F0aW9uIG5h
        bWVzcGFjZSBzaG91bGQgYmUgY29uc2lkZXJlZCB0aGUgc3RhYmxlIGFwaS4K
        Ly8gQG1vZHVsZSBjb250YWluZXIKICBAcHJpdmF0ZQoqLwoKLyoKIEZsYWcg
        dG8gZW5hYmxlL2Rpc2FibGUgbW9kZWwgZmFjdG9yeSBpbmplY3Rpb25zIChk
        aXNhYmxlZCBieSBkZWZhdWx0KQogSWYgbW9kZWwgZmFjdG9yeSBpbmplY3Rp
        b25zIGFyZSBlbmFibGVkLCBtb2RlbHMgc2hvdWxkIG5vdCBiZQogYWNjZXNz
        ZWQgZ2xvYmFsbHkgKG9ubHkgdGhyb3VnaCBgY29udGFpbmVyLmxvb2t1cEZh
        Y3RvcnkoJ21vZGVsOm1vZGVsTmFtZScpKWApOwoqLwpFbWJlci5NT0RFTF9G
        QUNUT1JZX0lOSkVDVElPTlMgPSBmYWxzZSB8fCAhIUVtYmVyLkVOVi5NT0RF
        TF9GQUNUT1JZX0lOSkVDVElPTlM7CgpkZWZpbmUoImNvbnRhaW5lciIsCiAg
        W10sCiAgZnVuY3Rpb24oKSB7CiAgICAidXNlIHN0cmljdCI7CgogICAgLy8g
        QSBzYWZlIGFuZCBzaW1wbGUgaW5oZXJpdGluZyBvYmplY3QuCiAgICBmdW5j
        dGlvbiBJbmhlcml0aW5nRGljdChwYXJlbnQpIHsKICAgICAgdGhpcy5wYXJl
        bnQgPSBwYXJlbnQ7CiAgICAgIHRoaXMuZGljdCA9IHt9OwogICAgfQoKICAg
        IEluaGVyaXRpbmdEaWN0LnByb3RvdHlwZSA9IHsKCiAgICAgIC8qKgogICAg
        ICAgIEBwcm9wZXJ0eSBwYXJlbnQKICAgICAgICBAdHlwZSBJbmhlcml0aW5n
        RGljdAogICAgICAgIEBkZWZhdWx0IG51bGwKICAgICAgKi8KCiAgICAgIHBh
        cmVudDogbnVsbCwKCiAgICAgIC8qKgogICAgICAgIE9iamVjdCB1c2VkIHRv
        IHN0b3JlIHRoZSBjdXJyZW50IG5vZGVzIGRhdGEuCgogICAgICAgIEBwcm9w
        ZXJ0eSBkaWN0CiAgICAgICAgQHR5cGUgT2JqZWN0CiAgICAgICAgQGRlZmF1
        bHQgT2JqZWN0CiAgICAgICovCiAgICAgIGRpY3Q6IG51bGwsCgogICAgICAv
        KioKICAgICAgICBSZXRyaWV2ZSB0aGUgdmFsdWUgZ2l2ZW4gYSBrZXksIGlm
        IHRoZSB2YWx1ZSBpcyBwcmVzZW50IGF0IHRoZSBjdXJyZW50CiAgICAgICAg
        bGV2ZWwgdXNlIGl0LCBvdGhlcndpc2Ugd2FsayB1cCB0aGUgcGFyZW50IGhp
        ZXJhcmNoeSBhbmQgdHJ5IGFnYWluLiBJZgogICAgICAgIG5vIG1hdGNoaW5n
        IGtleSBpcyBmb3VuZCwgcmV0dXJuIHVuZGVmaW5lZC4KCiAgICAgICAgQG1l
        dGhvZCBnZXQKICAgICAgICBAcGFyYW0ge1N0cmluZ30ga2V5CiAgICAgICAg
        QHJldHVybiB7YW55fQogICAgICAqLwogICAgICBnZXQ6IGZ1bmN0aW9uKGtl
        eSkgewogICAgICAgIHZhciBkaWN0ID0gdGhpcy5kaWN0OwoKICAgICAgICBp
        ZiAoZGljdC5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7CiAgICAgICAgICByZXR1
        cm4gZGljdFtrZXldOwogICAgICAgIH0KCiAgICAgICAgaWYgKHRoaXMucGFy
        ZW50KSB7CiAgICAgICAgICByZXR1cm4gdGhpcy5wYXJlbnQuZ2V0KGtleSk7
        CiAgICAgICAgfQogICAgICB9LAoKICAgICAgLyoqCiAgICAgICAgU2V0IHRo
        ZSBnaXZlbiB2YWx1ZSBmb3IgdGhlIGdpdmVuIGtleSwgYXQgdGhlIGN1cnJl
        bnQgbGV2ZWwuCgogICAgICAgIEBtZXRob2Qgc2V0CiAgICAgICAgQHBhcmFt
        IHtTdHJpbmd9IGtleQogICAgICAgIEBwYXJhbSB7QW55fSB2YWx1ZQogICAg
        ICAqLwogICAgICBzZXQ6IGZ1bmN0aW9uKGtleSwgdmFsdWUpIHsKICAgICAg
        ICB0aGlzLmRpY3Rba2V5XSA9IHZhbHVlOwogICAgICB9LAoKICAgICAgLyoq
        CiAgICAgICAgRGVsZXRlIHRoZSBnaXZlbiBrZXkKCiAgICAgICAgQG1ldGhv
        ZCByZW1vdmUKICAgICAgICBAcGFyYW0ge1N0cmluZ30ga2V5CiAgICAgICov
        CiAgICAgIHJlbW92ZTogZnVuY3Rpb24oa2V5KSB7CiAgICAgICAgZGVsZXRl
        IHRoaXMuZGljdFtrZXldOwogICAgICB9LAoKICAgICAgLyoqCiAgICAgICAg
        Q2hlY2sgZm9yIHRoZSBleGlzdGVuY2Ugb2YgZ2l2ZW4gYSBrZXksIGlmIHRo
        ZSBrZXkgaXMgcHJlc2VudCBhdCB0aGUgY3VycmVudAogICAgICAgIGxldmVs
        IHJldHVybiB0cnVlLCBvdGhlcndpc2Ugd2FsayB1cCB0aGUgcGFyZW50IGhp
        ZXJhcmNoeSBhbmQgdHJ5IGFnYWluLiBJZgogICAgICAgIG5vIG1hdGNoaW5n
        IGtleSBpcyBmb3VuZCwgcmV0dXJuIGZhbHNlLgoKICAgICAgICBAbWV0aG9k
        IGhhcwogICAgICAgIEBwYXJhbSB7U3RyaW5nfSBrZXkKICAgICAgICBAcmV0
        dXJuIHtCb29sZWFufQogICAgICAqLwogICAgICBoYXM6IGZ1bmN0aW9uKGtl
        eSkgewogICAgICAgIHZhciBkaWN0ID0gdGhpcy5kaWN0OwoKICAgICAgICBp
        ZiAoZGljdC5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7CiAgICAgICAgICByZXR1
        cm4gdHJ1ZTsKICAgICAgICB9CgogICAgICAgIGlmICh0aGlzLnBhcmVudCkg
        ewogICAgICAgICAgcmV0dXJuIHRoaXMucGFyZW50LmhhcyhrZXkpOwogICAg
        ICAgIH0KCiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9LAoKICAgICAg
        LyoqCiAgICAgICAgSXRlcmF0ZSBhbmQgaW52b2tlIGEgY2FsbGJhY2sgZm9y
        IGVhY2ggbG9jYWwga2V5LXZhbHVlIHBhaXIuCgogICAgICAgIEBtZXRob2Qg
        ZWFjaExvY2FsCiAgICAgICAgQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2sK
        ICAgICAgICBAcGFyYW0ge09iamVjdH0gYmluZGluZwogICAgICAqLwogICAg
        ICBlYWNoTG9jYWw6IGZ1bmN0aW9uKGNhbGxiYWNrLCBiaW5kaW5nKSB7CiAg
        ICAgICAgdmFyIGRpY3QgPSB0aGlzLmRpY3Q7CgogICAgICAgIGZvciAodmFy
        IHByb3AgaW4gZGljdCkgewogICAgICAgICAgaWYgKGRpY3QuaGFzT3duUHJv
        cGVydHkocHJvcCkpIHsKICAgICAgICAgICAgY2FsbGJhY2suY2FsbChiaW5k
        aW5nLCBwcm9wLCBkaWN0W3Byb3BdKTsKICAgICAgICAgIH0KICAgICAgICB9
        CiAgICAgIH0KICAgIH07CgoKICAgIC8vIEEgbGlnaHR3ZWlnaHQgY29udGFp
        bmVyIHRoYXQgaGVscHMgdG8gYXNzZW1ibGUgYW5kIGRlY291cGxlIGNvbXBv
        bmVudHMuCiAgICAvLyBQdWJsaWMgYXBpIGZvciB0aGUgY29udGFpbmVyIGlz
        IHN0aWxsIGluIGZsdXguCiAgICAvLyBUaGUgcHVibGljIGFwaSwgc3BlY2lm
        aWVkIG9uIHRoZSBhcHBsaWNhdGlvbiBuYW1lc3BhY2Ugc2hvdWxkIGJlIGNv
        bnNpZGVyZWQgdGhlIHN0YWJsZSBhcGkuCiAgICBmdW5jdGlvbiBDb250YWlu
        ZXIocGFyZW50KSB7CiAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50OwogICAg
        ICB0aGlzLmNoaWxkcmVuID0gW107CgogICAgICB0aGlzLnJlc29sdmVyID0g
        cGFyZW50ICYmIHBhcmVudC5yZXNvbHZlciB8fCBmdW5jdGlvbigpIHt9OwoK
        ICAgICAgdGhpcy5yZWdpc3RyeSA9IG5ldyBJbmhlcml0aW5nRGljdChwYXJl
        bnQgJiYgcGFyZW50LnJlZ2lzdHJ5KTsKICAgICAgdGhpcy5jYWNoZSA9IG5l
        dyBJbmhlcml0aW5nRGljdChwYXJlbnQgJiYgcGFyZW50LmNhY2hlKTsKICAg
        ICAgdGhpcy5mYWN0b3J5Q2FjaGUgPSBuZXcgSW5oZXJpdGluZ0RpY3QocGFy
        ZW50ICYmIHBhcmVudC5mYWN0b3J5Q2FjaGUpOwogICAgICB0aGlzLnJlc29s
        dmVDYWNoZSA9IG5ldyBJbmhlcml0aW5nRGljdChwYXJlbnQgJiYgcGFyZW50
        LnJlc29sdmVDYWNoZSk7CiAgICAgIHRoaXMudHlwZUluamVjdGlvbnMgPSBu
        ZXcgSW5oZXJpdGluZ0RpY3QocGFyZW50ICYmIHBhcmVudC50eXBlSW5qZWN0
        aW9ucyk7CiAgICAgIHRoaXMuaW5qZWN0aW9ucyA9IHt9OwoKICAgICAgdGhp
        cy5mYWN0b3J5VHlwZUluamVjdGlvbnMgPSBuZXcgSW5oZXJpdGluZ0RpY3Qo
        cGFyZW50ICYmIHBhcmVudC5mYWN0b3J5VHlwZUluamVjdGlvbnMpOwogICAg
        ICB0aGlzLmZhY3RvcnlJbmplY3Rpb25zID0ge307CgogICAgICB0aGlzLl9v
        cHRpb25zID0gbmV3IEluaGVyaXRpbmdEaWN0KHBhcmVudCAmJiBwYXJlbnQu
        X29wdGlvbnMpOwogICAgICB0aGlzLl90eXBlT3B0aW9ucyA9IG5ldyBJbmhl
        cml0aW5nRGljdChwYXJlbnQgJiYgcGFyZW50Ll90eXBlT3B0aW9ucyk7CiAg
        ICB9CgogICAgQ29udGFpbmVyLnByb3RvdHlwZSA9IHsKCiAgICAgIC8qKgog
        ICAgICAgIEBwcm9wZXJ0eSBwYXJlbnQKICAgICAgICBAdHlwZSBDb250YWlu
        ZXIKICAgICAgICBAZGVmYXVsdCBudWxsCiAgICAgICovCiAgICAgIHBhcmVu
        dDogbnVsbCwKCiAgICAgIC8qKgogICAgICAgIEBwcm9wZXJ0eSBjaGlsZHJl
        bgogICAgICAgIEB0eXBlIEFycmF5CiAgICAgICAgQGRlZmF1bHQgW10KICAg
        ICAgKi8KICAgICAgY2hpbGRyZW46IG51bGwsCgogICAgICAvKioKICAgICAg
        ICBAcHJvcGVydHkgcmVzb2x2ZXIKICAgICAgICBAdHlwZSBmdW5jdGlvbgog
        ICAgICAqLwogICAgICByZXNvbHZlcjogbnVsbCwKCiAgICAgIC8qKgogICAg
        ICAgIEBwcm9wZXJ0eSByZWdpc3RyeQogICAgICAgIEB0eXBlIEluaGVyaXRp
        bmdEaWN0CiAgICAgICovCiAgICAgIHJlZ2lzdHJ5OiBudWxsLAoKICAgICAg
        LyoqCiAgICAgICAgQHByb3BlcnR5IGNhY2hlCiAgICAgICAgQHR5cGUgSW5o
        ZXJpdGluZ0RpY3QKICAgICAgKi8KICAgICAgY2FjaGU6IG51bGwsCgogICAg
        ICAvKioKICAgICAgICBAcHJvcGVydHkgdHlwZUluamVjdGlvbnMKICAgICAg
        ICBAdHlwZSBJbmhlcml0aW5nRGljdAogICAgICAqLwogICAgICB0eXBlSW5q
        ZWN0aW9uczogbnVsbCwKCiAgICAgIC8qKgogICAgICAgIEBwcm9wZXJ0eSBp
        bmplY3Rpb25zCiAgICAgICAgQHR5cGUgT2JqZWN0CiAgICAgICAgQGRlZmF1
        bHQge30KICAgICAgKi8KICAgICAgaW5qZWN0aW9uczogbnVsbCwKCiAgICAg
        IC8qKgogICAgICAgIEBwcml2YXRlCgogICAgICAgIEBwcm9wZXJ0eSBfb3B0
        aW9ucwogICAgICAgIEB0eXBlIEluaGVyaXRpbmdEaWN0CiAgICAgICAgQGRl
        ZmF1bHQgbnVsbAogICAgICAqLwogICAgICBfb3B0aW9uczogbnVsbCwKCiAg
        ICAgIC8qKgogICAgICAgIEBwcml2YXRlCgogICAgICAgIEBwcm9wZXJ0eSBf
        dHlwZU9wdGlvbnMKICAgICAgICBAdHlwZSBJbmhlcml0aW5nRGljdAogICAg
        ICAqLwogICAgICBfdHlwZU9wdGlvbnM6IG51bGwsCgogICAgICAvKioKICAg
        ICAgICBSZXR1cm5zIGEgbmV3IGNoaWxkIG9mIHRoZSBjdXJyZW50IGNvbnRh
        aW5lci4gVGhlc2UgY2hpbGRyZW4gYXJlIGNvbmZpZ3VyZWQKICAgICAgICB0
        byBjb3JyZWN0bHkgaW5oZXJpdCBmcm9tIHRoZSBjdXJyZW50IGNvbnRhaW5l
        ci4KCiAgICAgICAgQG1ldGhvZCBjaGlsZAogICAgICAgIEByZXR1cm4ge0Nv
        bnRhaW5lcn0KICAgICAgKi8KICAgICAgY2hpbGQ6IGZ1bmN0aW9uKCkgewog
        ICAgICAgIHZhciBjb250YWluZXIgPSBuZXcgQ29udGFpbmVyKHRoaXMpOwog
        ICAgICAgIHRoaXMuY2hpbGRyZW4ucHVzaChjb250YWluZXIpOwogICAgICAg
        IHJldHVybiBjb250YWluZXI7CiAgICAgIH0sCgogICAgICAvKioKICAgICAg
        ICBTZXRzIGEga2V5LXZhbHVlIHBhaXIgb24gdGhlIGN1cnJlbnQgY29udGFp
        bmVyLiBJZiBhIHBhcmVudCBjb250YWluZXIsCiAgICAgICAgaGFzIHRoZSBz
        YW1lIGtleSwgb25jZSBzZXQgb24gYSBjaGlsZCwgdGhlIHBhcmVudCBhbmQg
        Y2hpbGQgd2lsbCBkaXZlcmdlCiAgICAgICAgYXMgZXhwZWN0ZWQuCgogICAg
        ICAgIEBtZXRob2Qgc2V0CiAgICAgICAgQHBhcmFtIHtPYmplY3R9IG9iamVj
        dAogICAgICAgIEBwYXJhbSB7U3RyaW5nfSBrZXkKICAgICAgICBAcGFyYW0g
        e2FueX0gdmFsdWUKICAgICAgKi8KICAgICAgc2V0OiBmdW5jdGlvbihvYmpl
        Y3QsIGtleSwgdmFsdWUpIHsKICAgICAgICBvYmplY3Rba2V5XSA9IHZhbHVl
        OwogICAgICB9LAoKICAgICAgLyoqCiAgICAgICAgUmVnaXN0ZXJzIGEgZmFj
        dG9yeSBmb3IgbGF0ZXIgaW5qZWN0aW9uLgoKICAgICAgICBFeGFtcGxlOgoK
        ICAgICAgICBgYGBqYXZhc2NyaXB0CiAgICAgICAgdmFyIGNvbnRhaW5lciA9
        IG5ldyBDb250YWluZXIoKTsKCiAgICAgICAgY29udGFpbmVyLnJlZ2lzdGVy
        KCdtb2RlbDp1c2VyJywgUGVyc29uLCB7c2luZ2xldG9uOiBmYWxzZSB9KTsK
        ICAgICAgICBjb250YWluZXIucmVnaXN0ZXIoJ2ZydWl0OmZhdm9yaXRlJywg
        T3JhbmdlKTsKICAgICAgICBjb250YWluZXIucmVnaXN0ZXIoJ2NvbW11bmlj
        YXRpb246bWFpbicsIEVtYWlsLCB7c2luZ2xldG9uOiBmYWxzZX0pOwogICAg
        ICAgIGBgYAoKICAgICAgICBAbWV0aG9kIHJlZ2lzdGVyCiAgICAgICAgQHBh
        cmFtIHtTdHJpbmd9IGZ1bGxOYW1lCiAgICAgICAgQHBhcmFtIHtGdW5jdGlv
        bn0gZmFjdG9yeQogICAgICAgIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zCiAg
        ICAgICovCiAgICAgIHJlZ2lzdGVyOiBmdW5jdGlvbihmdWxsTmFtZSwgZmFj
        dG9yeSwgb3B0aW9ucykgewogICAgICAgIHZhbGlkYXRlRnVsbE5hbWUoZnVs
        bE5hbWUpOwoKICAgICAgICBpZiAoZmFjdG9yeSA9PT0gdW5kZWZpbmVkKSB7
        CiAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdBdHRlbXB0aW5nIHRv
        IHJlZ2lzdGVyIGFuIHVua25vd24gZmFjdG9yeTogYCcgKyBmdWxsTmFtZSAr
        ICdgJyk7CiAgICAgICAgfQoKICAgICAgICB2YXIgbm9ybWFsaXplZE5hbWUg
        PSB0aGlzLm5vcm1hbGl6ZShmdWxsTmFtZSk7CgogICAgICAgIGlmICh0aGlz
        LmNhY2hlLmhhcyhub3JtYWxpemVkTmFtZSkpIHsKICAgICAgICAgIHRocm93
        IG5ldyBFcnJvcignQ2Fubm90IHJlLXJlZ2lzdGVyOiBgJyArIGZ1bGxOYW1l
        ICsnYCwgYXMgaXQgaGFzIGFscmVhZHkgYmVlbiBsb29rZWQgdXAuJyk7CiAg
        ICAgICAgfQoKICAgICAgICB0aGlzLnJlZ2lzdHJ5LnNldChub3JtYWxpemVk
        TmFtZSwgZmFjdG9yeSk7CiAgICAgICAgdGhpcy5fb3B0aW9ucy5zZXQobm9y
        bWFsaXplZE5hbWUsIG9wdGlvbnMgfHwge30pOwogICAgICB9LAoKICAgICAg
        LyoqCiAgICAgICAgVW5yZWdpc3RlciBhIGZ1bGxOYW1lCgogICAgICAgIGBg
        YGphdmFzY3JpcHQKICAgICAgICB2YXIgY29udGFpbmVyID0gbmV3IENvbnRh
        aW5lcigpOwogICAgICAgIGNvbnRhaW5lci5yZWdpc3RlcignbW9kZWw6dXNl
        cicsIFVzZXIpOwoKICAgICAgICBjb250YWluZXIubG9va3VwKCdtb2RlbDp1
        c2VyJykgaW5zdGFuY2VvZiBVc2VyIC8vPT4gdHJ1ZQoKICAgICAgICBjb250
        YWluZXIudW5yZWdpc3RlcignbW9kZWw6dXNlcicpCiAgICAgICAgY29udGFp
        bmVyLmxvb2t1cCgnbW9kZWw6dXNlcicpID09PSB1bmRlZmluZWQgLy89PiB0
        cnVlCiAgICAgICAgYGBgCgogICAgICAgIEBtZXRob2QgdW5yZWdpc3Rlcgog
        ICAgICAgIEBwYXJhbSB7U3RyaW5nfSBmdWxsTmFtZQogICAgICAgKi8KICAg
        ICAgdW5yZWdpc3RlcjogZnVuY3Rpb24oZnVsbE5hbWUpIHsKICAgICAgICB2
        YWxpZGF0ZUZ1bGxOYW1lKGZ1bGxOYW1lKTsKCiAgICAgICAgdmFyIG5vcm1h
        bGl6ZWROYW1lID0gdGhpcy5ub3JtYWxpemUoZnVsbE5hbWUpOwoKICAgICAg
        ICB0aGlzLnJlZ2lzdHJ5LnJlbW92ZShub3JtYWxpemVkTmFtZSk7CiAgICAg
        ICAgdGhpcy5jYWNoZS5yZW1vdmUobm9ybWFsaXplZE5hbWUpOwogICAgICAg
        IHRoaXMuZmFjdG9yeUNhY2hlLnJlbW92ZShub3JtYWxpemVkTmFtZSk7CiAg
        ICAgICAgdGhpcy5yZXNvbHZlQ2FjaGUucmVtb3ZlKG5vcm1hbGl6ZWROYW1l
        KTsKICAgICAgICB0aGlzLl9vcHRpb25zLnJlbW92ZShub3JtYWxpemVkTmFt
        ZSk7CiAgICAgIH0sCgogICAgICAvKioKICAgICAgICBHaXZlbiBhIGZ1bGxO
        YW1lIHJldHVybiB0aGUgY29ycmVzcG9uZGluZyBmYWN0b3J5LgoKICAgICAg
        ICBCeSBkZWZhdWx0IGByZXNvbHZlYCB3aWxsIHJldHJpZXZlIHRoZSBmYWN0
        b3J5IGZyb20KICAgICAgICBpdHMgY29udGFpbmVyJ3MgcmVnaXN0cnkuCgog
        ICAgICAgIGBgYGphdmFzY3JpcHQKICAgICAgICB2YXIgY29udGFpbmVyID0g
        bmV3IENvbnRhaW5lcigpOwogICAgICAgIGNvbnRhaW5lci5yZWdpc3Rlcign
        YXBpOnR3aXR0ZXInLCBUd2l0dGVyKTsKCiAgICAgICAgY29udGFpbmVyLnJl
        c29sdmUoJ2FwaTp0d2l0dGVyJykgLy8gPT4gVHdpdHRlcgogICAgICAgIGBg
        YAoKICAgICAgICBPcHRpb25hbGx5IHRoZSBjb250YWluZXIgY2FuIGJlIHBy
        b3ZpZGVkIHdpdGggYSBjdXN0b20gcmVzb2x2ZXIuCiAgICAgICAgSWYgcHJv
        dmlkZWQsIGByZXNvbHZlYCB3aWxsIGZpcnN0IHByb3ZpZGUgdGhlIGN1c3Rv
        bSByZXNvbHZlcgogICAgICAgIHRoZSBvcHBlcnR1bml0eSB0byByZXNvbHZl
        IHRoZSBmdWxsTmFtZSwgb3RoZXJ3aXNlIGl0IHdpbGwgZmFsbGJhY2sKICAg
        ICAgICB0byB0aGUgcmVnaXN0cnkuCgogICAgICAgIGBgYGphdmFzY3JpcHQK
        ICAgICAgICB2YXIgY29udGFpbmVyID0gbmV3IENvbnRhaW5lcigpOwogICAg
        ICAgIGNvbnRhaW5lci5yZXNvbHZlciA9IGZ1bmN0aW9uKGZ1bGxOYW1lKSB7
        CiAgICAgICAgICAvLyBsb29rdXAgdmlhIHRoZSBtb2R1bGUgc3lzdGVtIG9m
        IGNob2ljZQogICAgICAgIH07CgogICAgICAgIC8vIHRoZSB0d2l0dGVyIGZh
        Y3RvcnkgaXMgYWRkZWQgdG8gdGhlIG1vZHVsZSBzeXN0ZW0KICAgICAgICBj
        b250YWluZXIucmVzb2x2ZSgnYXBpOnR3aXR0ZXInKSAvLyA9PiBUd2l0dGVy
        CiAgICAgICAgYGBgCgogICAgICAgIEBtZXRob2QgcmVzb2x2ZQogICAgICAg
        IEBwYXJhbSB7U3RyaW5nfSBmdWxsTmFtZQogICAgICAgIEByZXR1cm4ge0Z1
        bmN0aW9ufSBmdWxsTmFtZSdzIGZhY3RvcnkKICAgICAgKi8KICAgICAgcmVz
        b2x2ZTogZnVuY3Rpb24oZnVsbE5hbWUpIHsKICAgICAgICB2YWxpZGF0ZUZ1
        bGxOYW1lKGZ1bGxOYW1lKTsKCiAgICAgICAgdmFyIG5vcm1hbGl6ZWROYW1l
        ID0gdGhpcy5ub3JtYWxpemUoZnVsbE5hbWUpOwogICAgICAgIHZhciBjYWNo
        ZWQgPSB0aGlzLnJlc29sdmVDYWNoZS5nZXQobm9ybWFsaXplZE5hbWUpOwoK
        ICAgICAgICBpZiAoY2FjaGVkKSB7IHJldHVybiBjYWNoZWQ7IH0KCiAgICAg
        ICAgdmFyIHJlc29sdmVkID0gdGhpcy5yZXNvbHZlcihub3JtYWxpemVkTmFt
        ZSkgfHwgdGhpcy5yZWdpc3RyeS5nZXQobm9ybWFsaXplZE5hbWUpOwoKICAg
        ICAgICB0aGlzLnJlc29sdmVDYWNoZS5zZXQobm9ybWFsaXplZE5hbWUsIHJl
        c29sdmVkKTsKCiAgICAgICAgcmV0dXJuIHJlc29sdmVkOwogICAgICB9LAoK
        ICAgICAgLyoqCiAgICAgICAgQSBob29rIHRoYXQgY2FuIGJlIHVzZWQgdG8g
        ZGVzY3JpYmUgaG93IHRoZSByZXNvbHZlciB3aWxsCiAgICAgICAgYXR0ZW1w
        dCB0byBmaW5kIHRoZSBmYWN0b3J5LgoKICAgICAgICBGb3IgZXhhbXBsZSwg
        dGhlIGRlZmF1bHQgRW1iZXIgYC5kZXNjcmliZWAgcmV0dXJucyB0aGUgZnVs
        bAogICAgICAgIGNsYXNzIG5hbWUgKGluY2x1ZGluZyBuYW1lc3BhY2UpIHdo
        ZXJlIEVtYmVyJ3MgcmVzb2x2ZXIgZXhwZWN0cwogICAgICAgIHRvIGZpbmQg
        dGhlIGBmdWxsTmFtZWAuCgogICAgICAgIEBtZXRob2QgZGVzY3JpYmUKICAg
        ICAgICBAcGFyYW0ge1N0cmluZ30gZnVsbE5hbWUKICAgICAgICBAcmV0dXJu
        IHtzdHJpbmd9IGRlc2NyaWJlZCBmdWxsTmFtZQogICAgICAqLwogICAgICBk
        ZXNjcmliZTogZnVuY3Rpb24oZnVsbE5hbWUpIHsKICAgICAgICByZXR1cm4g
        ZnVsbE5hbWU7CiAgICAgIH0sCgogICAgICAvKioKICAgICAgICBBIGhvb2sg
        dG8gZW5hYmxlIGN1c3RvbSBmdWxsTmFtZSBub3JtYWxpemF0aW9uIGJlaGF2
        aW91cgoKICAgICAgICBAbWV0aG9kIG5vcm1hbGl6ZQogICAgICAgIEBwYXJh
        bSB7U3RyaW5nfSBmdWxsTmFtZQogICAgICAgIEByZXR1cm4ge3N0cmluZ30g
        bm9ybWFsaXplZCBmdWxsTmFtZQogICAgICAqLwogICAgICBub3JtYWxpemU6
        IGZ1bmN0aW9uKGZ1bGxOYW1lKSB7CiAgICAgICAgcmV0dXJuIGZ1bGxOYW1l
        OwogICAgICB9LAoKICAgICAgLyoqCiAgICAgICAgQG1ldGhvZCBtYWtlVG9T
        dHJpbmcKCiAgICAgICAgQHBhcmFtIHthbnl9IGZhY3RvcnkKICAgICAgICBA
        cGFyYW0ge3N0cmluZ30gZnVsbE5hbWUKICAgICAgICBAcmV0dXJuIHtmdW5j
        dGlvbn0gdG9TdHJpbmcgZnVuY3Rpb24KICAgICAgKi8KICAgICAgbWFrZVRv
        U3RyaW5nOiBmdW5jdGlvbihmYWN0b3J5LCBmdWxsTmFtZSkgewogICAgICAg
        IHJldHVybiBmYWN0b3J5LnRvU3RyaW5nKCk7CiAgICAgIH0sCgogICAgICAv
        KioKICAgICAgICBHaXZlbiBhIGZ1bGxOYW1lIHJldHVybiBhIGNvcnJlc3Bv
        bmRpbmcgaW5zdGFuY2UuCgogICAgICAgIFRoZSBkZWZhdWx0IGJlaGF2aW91
        ciBpcyBmb3IgbG9va3VwIHRvIHJldHVybiBhIHNpbmdsZXRvbiBpbnN0YW5j
        ZS4KICAgICAgICBUaGUgc2luZ2xldG9uIGlzIHNjb3BlZCB0byB0aGUgY29u
        dGFpbmVyLCBhbGxvd2luZyBtdWx0aXBsZSBjb250YWluZXJzCiAgICAgICAg
        dG8gYWxsIGhhdmUgdGhlaXIgb3duIGxvY2FsbHkgc2NvcGVkIHNpbmdsZXRv
        bnMuCgogICAgICAgIGBgYGphdmFzY3JpcHQKICAgICAgICB2YXIgY29udGFp
        bmVyID0gbmV3IENvbnRhaW5lcigpOwogICAgICAgIGNvbnRhaW5lci5yZWdp
        c3RlcignYXBpOnR3aXR0ZXInLCBUd2l0dGVyKTsKCiAgICAgICAgdmFyIHR3
        aXR0ZXIgPSBjb250YWluZXIubG9va3VwKCdhcGk6dHdpdHRlcicpOwoKICAg
        ICAgICB0d2l0dGVyIGluc3RhbmNlb2YgVHdpdHRlcjsgLy8gPT4gdHJ1ZQoK
        ICAgICAgICAvLyBieSBkZWZhdWx0IHRoZSBjb250YWluZXIgd2lsbCByZXR1
        cm4gc2luZ2xldG9ucwogICAgICAgIHZhciB0d2l0dGVyMiA9IGNvbnRhaW5l
        ci5sb29rdXAoJ2FwaTp0d2l0dGVyJyk7CiAgICAgICAgdHdpdHRlciBpbnN0
        YW5jZW9mIFR3aXR0ZXI7IC8vID0+IHRydWUKCiAgICAgICAgdHdpdHRlciA9
        PT0gdHdpdHRlcjI7IC8vPT4gdHJ1ZQogICAgICAgIGBgYAoKICAgICAgICBJ
        ZiBzaW5nbGV0b25zIGFyZSBub3Qgd2FudGVkIGFuIG9wdGlvbmFsIGZsYWcg
        Y2FuIGJlIHByb3ZpZGVkIGF0IGxvb2t1cC4KCiAgICAgICAgYGBgamF2YXNj
        cmlwdAogICAgICAgIHZhciBjb250YWluZXIgPSBuZXcgQ29udGFpbmVyKCk7
        CiAgICAgICAgY29udGFpbmVyLnJlZ2lzdGVyKCdhcGk6dHdpdHRlcicsIFR3
        aXR0ZXIpOwoKICAgICAgICB2YXIgdHdpdHRlciA9IGNvbnRhaW5lci5sb29r
        dXAoJ2FwaTp0d2l0dGVyJywgeyBzaW5nbGV0b246IGZhbHNlIH0pOwogICAg
        ICAgIHZhciB0d2l0dGVyMiA9IGNvbnRhaW5lci5sb29rdXAoJ2FwaTp0d2l0
        dGVyJywgeyBzaW5nbGV0b246IGZhbHNlIH0pOwoKICAgICAgICB0d2l0dGVy
        ID09PSB0d2l0dGVyMjsgLy89PiBmYWxzZQogICAgICAgIGBgYAoKICAgICAg
        ICBAbWV0aG9kIGxvb2t1cAogICAgICAgIEBwYXJhbSB7U3RyaW5nfSBmdWxs
        TmFtZQogICAgICAgIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zCiAgICAgICAg
        QHJldHVybiB7YW55fQogICAgICAqLwogICAgICBsb29rdXA6IGZ1bmN0aW9u
        KGZ1bGxOYW1lLCBvcHRpb25zKSB7CiAgICAgICAgdmFsaWRhdGVGdWxsTmFt
        ZShmdWxsTmFtZSk7CiAgICAgICAgcmV0dXJuIGxvb2t1cCh0aGlzLCB0aGlz
        Lm5vcm1hbGl6ZShmdWxsTmFtZSksIG9wdGlvbnMpOwogICAgICB9LAoKICAg
        ICAgLyoqCiAgICAgICAgR2l2ZW4gYSBmdWxsTmFtZSByZXR1cm4gdGhlIGNv
        cnJlc3BvbmRpbmcgZmFjdG9yeS4KCiAgICAgICAgQG1ldGhvZCBsb29rdXBG
        YWN0b3J5CiAgICAgICAgQHBhcmFtIHtTdHJpbmd9IGZ1bGxOYW1lCiAgICAg
        ICAgQHJldHVybiB7YW55fQogICAgICAqLwogICAgICBsb29rdXBGYWN0b3J5
        OiBmdW5jdGlvbihmdWxsTmFtZSkgewogICAgICAgIHZhbGlkYXRlRnVsbE5h
        bWUoZnVsbE5hbWUpOwogICAgICAgIHJldHVybiBmYWN0b3J5Rm9yKHRoaXMs
        IHRoaXMubm9ybWFsaXplKGZ1bGxOYW1lKSk7CiAgICAgIH0sCgogICAgICAv
        KioKICAgICAgICBHaXZlbiBhIGZ1bGxOYW1lIGNoZWNrIGlmIHRoZSBjb250
        YWluZXIgaXMgYXdhcmUgb2YgaXRzIGZhY3RvcnkKICAgICAgICBvciBzaW5n
        bGV0b24gaW5zdGFuY2UuCgogICAgICAgIEBtZXRob2QgaGFzCiAgICAgICAg
        QHBhcmFtIHtTdHJpbmd9IGZ1bGxOYW1lCiAgICAgICAgQHJldHVybiB7Qm9v
        bGVhbn0KICAgICAgKi8KICAgICAgaGFzOiBmdW5jdGlvbihmdWxsTmFtZSkg
        ewogICAgICAgIHZhbGlkYXRlRnVsbE5hbWUoZnVsbE5hbWUpOwogICAgICAg
        IHJldHVybiBoYXModGhpcywgdGhpcy5ub3JtYWxpemUoZnVsbE5hbWUpKTsK
        ICAgICAgfSwKCiAgICAgIC8qKgogICAgICAgIEFsbG93IHJlZ2lzdGVyaW5n
        IG9wdGlvbnMgZm9yIGFsbCBmYWN0b3JpZXMgb2YgYSB0eXBlLgoKICAgICAg
        ICBgYGBqYXZhc2NyaXB0CiAgICAgICAgdmFyIGNvbnRhaW5lciA9IG5ldyBD
        b250YWluZXIoKTsKCiAgICAgICAgLy8gaWYgYWxsIG9mIHR5cGUgYGNvbm5l
        Y3Rpb25gIG11c3Qgbm90IGJlIHNpbmdsZXRvbnMKICAgICAgICBjb250YWlu
        ZXIub3B0aW9uc0ZvclR5cGUoJ2Nvbm5lY3Rpb24nLCB7IHNpbmdsZXRvbjog
        ZmFsc2UgfSk7CgogICAgICAgIGNvbnRhaW5lci5yZWdpc3RlcignY29ubmVj
        dGlvbjp0d2l0dGVyJywgVHdpdHRlckNvbm5lY3Rpb24pOwogICAgICAgIGNv
        bnRhaW5lci5yZWdpc3RlcignY29ubmVjdGlvbjpmYWNlYm9vaycsIEZhY2Vi
        b29rQ29ubmVjdGlvbik7CgogICAgICAgIHZhciB0d2l0dGVyID0gY29udGFp
        bmVyLmxvb2t1cCgnY29ubmVjdGlvbjp0d2l0dGVyJyk7CiAgICAgICAgdmFy
        IHR3aXR0ZXIyID0gY29udGFpbmVyLmxvb2t1cCgnY29ubmVjdGlvbjp0d2l0
        dGVyJyk7CgogICAgICAgIHR3aXR0ZXIgPT09IHR3aXR0ZXIyOyAvLyA9PiBm
        YWxzZQoKICAgICAgICB2YXIgZmFjZWJvb2sgPSBjb250YWluZXIubG9va3Vw
        KCdjb25uZWN0aW9uOmZhY2Vib29rJyk7CiAgICAgICAgdmFyIGZhY2Vib29r
        MiA9IGNvbnRhaW5lci5sb29rdXAoJ2Nvbm5lY3Rpb246ZmFjZWJvb2snKTsK
        CiAgICAgICAgZmFjZWJvb2sgPT09IGZhY2Vib29rMjsgLy8gPT4gZmFsc2UK
        ICAgICAgICBgYGAKCiAgICAgICAgQG1ldGhvZCBvcHRpb25zRm9yVHlwZQog
        ICAgICAgIEBwYXJhbSB7U3RyaW5nfSB0eXBlCiAgICAgICAgQHBhcmFtIHtP
        YmplY3R9IG9wdGlvbnMKICAgICAgKi8KICAgICAgb3B0aW9uc0ZvclR5cGU6
        IGZ1bmN0aW9uKHR5cGUsIG9wdGlvbnMpIHsKICAgICAgICBpZiAodGhpcy5w
        YXJlbnQpIHsgaWxsZWdhbENoaWxkT3BlcmF0aW9uKCdvcHRpb25zRm9yVHlw
        ZScpOyB9CgogICAgICAgIHRoaXMuX3R5cGVPcHRpb25zLnNldCh0eXBlLCBv
        cHRpb25zKTsKICAgICAgfSwKCiAgICAgIC8qKgogICAgICAgIEBtZXRob2Qg
        b3B0aW9ucwogICAgICAgIEBwYXJhbSB7U3RyaW5nfSB0eXBlCiAgICAgICAg
        QHBhcmFtIHtPYmplY3R9IG9wdGlvbnMKICAgICAgKi8KICAgICAgb3B0aW9u
        czogZnVuY3Rpb24odHlwZSwgb3B0aW9ucykgewogICAgICAgIHRoaXMub3B0
        aW9uc0ZvclR5cGUodHlwZSwgb3B0aW9ucyk7CiAgICAgIH0sCgogICAgICAv
        KioKICAgICAgICBVc2VkIG9ubHkgdmlhIGBpbmplY3Rpb25gLgoKICAgICAg
        ICBQcm92aWRlcyBhIHNwZWNpYWxpemVkIGZvcm0gb2YgaW5qZWN0aW9uLCBz
        cGVjaWZpY2FsbHkgZW5hYmxpbmcKICAgICAgICBhbGwgb2JqZWN0cyBvZiBv
        bmUgdHlwZSB0byBiZSBpbmplY3RlZCB3aXRoIGEgcmVmZXJlbmNlIHRvIGFu
        b3RoZXIKICAgICAgICBvYmplY3QuCgogICAgICAgIEZvciBleGFtcGxlLCBw
        cm92aWRlZCBlYWNoIG9iamVjdCBvZiB0eXBlIGBjb250cm9sbGVyYCBuZWVk
        ZWQgYSBgcm91dGVyYC4KICAgICAgICBvbmUgd291bGQgZG8gdGhlIGZvbGxv
        d2luZzoKCiAgICAgICAgYGBgamF2YXNjcmlwdAogICAgICAgIHZhciBjb250
        YWluZXIgPSBuZXcgQ29udGFpbmVyKCk7CgogICAgICAgIGNvbnRhaW5lci5y
        ZWdpc3Rlcigncm91dGVyOm1haW4nLCBSb3V0ZXIpOwogICAgICAgIGNvbnRh
        aW5lci5yZWdpc3RlcignY29udHJvbGxlcjp1c2VyJywgVXNlckNvbnRyb2xs
        ZXIpOwogICAgICAgIGNvbnRhaW5lci5yZWdpc3RlcignY29udHJvbGxlcjpw
        b3N0JywgUG9zdENvbnRyb2xsZXIpOwoKICAgICAgICBjb250YWluZXIudHlw
        ZUluamVjdGlvbignY29udHJvbGxlcicsICdyb3V0ZXInLCAncm91dGVyOm1h
        aW4nKTsKCiAgICAgICAgdmFyIHVzZXIgPSBjb250YWluZXIubG9va3VwKCdj
        b250cm9sbGVyOnVzZXInKTsKICAgICAgICB2YXIgcG9zdCA9IGNvbnRhaW5l
        ci5sb29rdXAoJ2NvbnRyb2xsZXI6cG9zdCcpOwoKICAgICAgICB1c2VyLnJv
        dXRlciBpbnN0YW5jZW9mIFJvdXRlcjsgLy89PiB0cnVlCiAgICAgICAgcG9z
        dC5yb3V0ZXIgaW5zdGFuY2VvZiBSb3V0ZXI7IC8vPT4gdHJ1ZQoKICAgICAg
        ICAvLyBib3RoIGNvbnRyb2xsZXJzIHNoYXJlIHRoZSBzYW1lIHJvdXRlcgog
        ICAgICAgIHVzZXIucm91dGVyID09PSBwb3N0LnJvdXRlcjsgLy89PiB0cnVl
        CiAgICAgICAgYGBgCgogICAgICAgIEBwcml2YXRlCiAgICAgICAgQG1ldGhv
        ZCB0eXBlSW5qZWN0aW9uCiAgICAgICAgQHBhcmFtIHtTdHJpbmd9IHR5cGUK
        ICAgICAgICBAcGFyYW0ge1N0cmluZ30gcHJvcGVydHkKICAgICAgICBAcGFy
        YW0ge1N0cmluZ30gZnVsbE5hbWUKICAgICAgKi8KICAgICAgdHlwZUluamVj
        dGlvbjogZnVuY3Rpb24odHlwZSwgcHJvcGVydHksIGZ1bGxOYW1lKSB7CiAg
        ICAgICAgdmFsaWRhdGVGdWxsTmFtZShmdWxsTmFtZSk7CiAgICAgICAgaWYg
        KHRoaXMucGFyZW50KSB7IGlsbGVnYWxDaGlsZE9wZXJhdGlvbigndHlwZUlu
        amVjdGlvbicpOyB9CgogICAgICAgIGFkZFR5cGVJbmplY3Rpb24odGhpcy50
        eXBlSW5qZWN0aW9ucywgdHlwZSwgcHJvcGVydHksIGZ1bGxOYW1lKTsKICAg
        ICAgfSwKCiAgICAgIC8qKgogICAgICAgIERlZmluZXMgaW5qZWN0aW9uIHJ1
        bGVzLgoKICAgICAgICBUaGVzZSBydWxlcyBhcmUgdXNlZCB0byBpbmplY3Qg
        ZGVwZW5kZW5jaWVzIG9udG8gb2JqZWN0cyB3aGVuIHRoZXkKICAgICAgICBh
        cmUgaW5zdGFudGlhdGVkLgoKICAgICAgICBUd28gZm9ybXMgb2YgaW5qZWN0
        aW9ucyBhcmUgcG9zc2libGU6CgogICAgICAgICogSW5qZWN0aW5nIG9uZSBm
        dWxsTmFtZSBvbiBhbm90aGVyIGZ1bGxOYW1lCiAgICAgICAgKiBJbmplY3Rp
        bmcgb25lIGZ1bGxOYW1lIG9uIGEgdHlwZQoKICAgICAgICBFeGFtcGxlOgoK
        ICAgICAgICBgYGBqYXZhc2NyaXB0CiAgICAgICAgdmFyIGNvbnRhaW5lciA9
        IG5ldyBDb250YWluZXIoKTsKCiAgICAgICAgY29udGFpbmVyLnJlZ2lzdGVy
        KCdzb3VyY2U6bWFpbicsIFNvdXJjZSk7CiAgICAgICAgY29udGFpbmVyLnJl
        Z2lzdGVyKCdtb2RlbDp1c2VyJywgVXNlcik7CiAgICAgICAgY29udGFpbmVy
        LnJlZ2lzdGVyKCdtb2RlbDpwb3N0JywgUG9zdCk7CgogICAgICAgIC8vIGlu
        amVjdGluZyBvbmUgZnVsbE5hbWUgb24gYW5vdGhlciBmdWxsTmFtZQogICAg
        ICAgIC8vIGVnLiBlYWNoIHVzZXIgbW9kZWwgZ2V0cyBhIHBvc3QgbW9kZWwK
        ICAgICAgICBjb250YWluZXIuaW5qZWN0aW9uKCdtb2RlbDp1c2VyJywgJ3Bv
        c3QnLCAnbW9kZWw6cG9zdCcpOwoKICAgICAgICAvLyBpbmplY3Rpbmcgb25l
        IGZ1bGxOYW1lIG9uIGFub3RoZXIgdHlwZQogICAgICAgIGNvbnRhaW5lci5p
        bmplY3Rpb24oJ21vZGVsJywgJ3NvdXJjZScsICdzb3VyY2U6bWFpbicpOwoK
        ICAgICAgICB2YXIgdXNlciA9IGNvbnRhaW5lci5sb29rdXAoJ21vZGVsOnVz
        ZXInKTsKICAgICAgICB2YXIgcG9zdCA9IGNvbnRhaW5lci5sb29rdXAoJ21v
        ZGVsOnBvc3QnKTsKCiAgICAgICAgdXNlci5zb3VyY2UgaW5zdGFuY2VvZiBT
        b3VyY2U7IC8vPT4gdHJ1ZQogICAgICAgIHBvc3Quc291cmNlIGluc3RhbmNl
        b2YgU291cmNlOyAvLz0+IHRydWUKCiAgICAgICAgdXNlci5wb3N0IGluc3Rh
        bmNlb2YgUG9zdDsgLy89PiB0cnVlCgogICAgICAgIC8vIGFuZCBib3RoIG1v
        ZGVscyBzaGFyZSB0aGUgc2FtZSBzb3VyY2UKICAgICAgICB1c2VyLnNvdXJj
        ZSA9PT0gcG9zdC5zb3VyY2U7IC8vPT4gdHJ1ZQogICAgICAgIGBgYAoKICAg
        ICAgICBAbWV0aG9kIGluamVjdGlvbgogICAgICAgIEBwYXJhbSB7U3RyaW5n
        fSBmYWN0b3J5TmFtZQogICAgICAgIEBwYXJhbSB7U3RyaW5nfSBwcm9wZXJ0
        eQogICAgICAgIEBwYXJhbSB7U3RyaW5nfSBpbmplY3Rpb25OYW1lCiAgICAg
        ICovCiAgICAgIGluamVjdGlvbjogZnVuY3Rpb24oZnVsbE5hbWUsIHByb3Bl
        cnR5LCBpbmplY3Rpb25OYW1lKSB7CiAgICAgICAgaWYgKHRoaXMucGFyZW50
        KSB7IGlsbGVnYWxDaGlsZE9wZXJhdGlvbignaW5qZWN0aW9uJyk7IH0KCiAg
        ICAgICAgdmFsaWRhdGVGdWxsTmFtZShpbmplY3Rpb25OYW1lKTsKICAgICAg
        ICB2YXIgbm9ybWFsaXplZEluamVjdGlvbk5hbWUgPSB0aGlzLm5vcm1hbGl6
        ZShpbmplY3Rpb25OYW1lKTsKCiAgICAgICAgaWYgKGZ1bGxOYW1lLmluZGV4
        T2YoJzonKSA9PT0gLTEpIHsKICAgICAgICAgIHJldHVybiB0aGlzLnR5cGVJ
        bmplY3Rpb24oZnVsbE5hbWUsIHByb3BlcnR5LCBub3JtYWxpemVkSW5qZWN0
        aW9uTmFtZSk7CiAgICAgICAgfQoKICAgICAgICB2YWxpZGF0ZUZ1bGxOYW1l
        KGZ1bGxOYW1lKTsKICAgICAgICB2YXIgbm9ybWFsaXplZE5hbWUgPSB0aGlz
        Lm5vcm1hbGl6ZShmdWxsTmFtZSk7CgogICAgICAgIGFkZEluamVjdGlvbih0
        aGlzLmluamVjdGlvbnMsIG5vcm1hbGl6ZWROYW1lLCBwcm9wZXJ0eSwgbm9y
        bWFsaXplZEluamVjdGlvbk5hbWUpOwogICAgICB9LAoKCiAgICAgIC8qKgog
        ICAgICAgIFVzZWQgb25seSB2aWEgYGZhY3RvcnlJbmplY3Rpb25gLgoKICAg
        ICAgICBQcm92aWRlcyBhIHNwZWNpYWxpemVkIGZvcm0gb2YgaW5qZWN0aW9u
        LCBzcGVjaWZpY2FsbHkgZW5hYmxpbmcKICAgICAgICBhbGwgZmFjdG9yeSBv
        ZiBvbmUgdHlwZSB0byBiZSBpbmplY3RlZCB3aXRoIGEgcmVmZXJlbmNlIHRv
        IGFub3RoZXIKICAgICAgICBvYmplY3QuCgogICAgICAgIEZvciBleGFtcGxl
        LCBwcm92aWRlZCBlYWNoIGZhY3Rvcnkgb2YgdHlwZSBgbW9kZWxgIG5lZWRl
        ZCBhIGBzdG9yZWAuCiAgICAgICAgb25lIHdvdWxkIGRvIHRoZSBmb2xsb3dp
        bmc6CgogICAgICAgIGBgYGphdmFzY3JpcHQKICAgICAgICB2YXIgY29udGFp
        bmVyID0gbmV3IENvbnRhaW5lcigpOwoKICAgICAgICBjb250YWluZXIucmVn
        aXN0ZXIoJ3N0b3JlOm1haW4nLCBTb21lU3RvcmUpOwoKICAgICAgICBjb250
        YWluZXIuZmFjdG9yeVR5cGVJbmplY3Rpb24oJ21vZGVsJywgJ3N0b3JlJywg
        J3N0b3JlOm1haW4nKTsKCiAgICAgICAgdmFyIHN0b3JlID0gY29udGFpbmVy
        Lmxvb2t1cCgnc3RvcmU6bWFpbicpOwogICAgICAgIHZhciBVc2VyRmFjdG9y
        eSA9IGNvbnRhaW5lci5sb29rdXBGYWN0b3J5KCdtb2RlbDp1c2VyJyk7Cgog
        ICAgICAgIFVzZXJGYWN0b3J5LnN0b3JlIGluc3RhbmNlb2YgU29tZVN0b3Jl
        OyAvLz0+IHRydWUKICAgICAgICBgYGAKCiAgICAgICAgQHByaXZhdGUKICAg
        ICAgICBAbWV0aG9kIGZhY3RvcnlUeXBlSW5qZWN0aW9uCiAgICAgICAgQHBh
        cmFtIHtTdHJpbmd9IHR5cGUKICAgICAgICBAcGFyYW0ge1N0cmluZ30gcHJv
        cGVydHkKICAgICAgICBAcGFyYW0ge1N0cmluZ30gZnVsbE5hbWUKICAgICAg
        Ki8KICAgICAgZmFjdG9yeVR5cGVJbmplY3Rpb246IGZ1bmN0aW9uKHR5cGUs
        IHByb3BlcnR5LCBmdWxsTmFtZSkgewogICAgICAgIGlmICh0aGlzLnBhcmVu
        dCkgeyBpbGxlZ2FsQ2hpbGRPcGVyYXRpb24oJ2ZhY3RvcnlUeXBlSW5qZWN0
        aW9uJyk7IH0KCiAgICAgICAgYWRkVHlwZUluamVjdGlvbih0aGlzLmZhY3Rv
        cnlUeXBlSW5qZWN0aW9ucywgdHlwZSwgcHJvcGVydHksIHRoaXMubm9ybWFs
        aXplKGZ1bGxOYW1lKSk7CiAgICAgIH0sCgogICAgICAvKioKICAgICAgICBE
        ZWZpbmVzIGZhY3RvcnkgaW5qZWN0aW9uIHJ1bGVzLgoKICAgICAgICBTaW1p
        bGFyIHRvIHJlZ3VsYXIgaW5qZWN0aW9uIHJ1bGVzLCBidXQgYXJlIHJ1biBh
        Z2FpbnN0IGZhY3RvcmllcywgdmlhCiAgICAgICAgYENvbnRhaW5lciNsb29r
        dXBGYWN0b3J5YC4KCiAgICAgICAgVGhlc2UgcnVsZXMgYXJlIHVzZWQgdG8g
        aW5qZWN0IG9iamVjdHMgb250byBmYWN0b3JpZXMgd2hlbiB0aGV5CiAgICAg
        ICAgYXJlIGxvb2tlZCB1cC4KCiAgICAgICAgVHdvIGZvcm1zIG9mIGluamVj
        dGlvbnMgYXJlIHBvc3NpYmxlOgoKICAgICAgKiBJbmplY3Rpbmcgb25lIGZ1
        bGxOYW1lIG9uIGFub3RoZXIgZnVsbE5hbWUKICAgICAgKiBJbmplY3Rpbmcg
        b25lIGZ1bGxOYW1lIG9uIGEgdHlwZQoKICAgICAgICBFeGFtcGxlOgoKICAg
        ICAgICBgYGBqYXZhc2NyaXB0CiAgICAgICAgdmFyIGNvbnRhaW5lciA9IG5l
        dyBDb250YWluZXIoKTsKCiAgICAgICAgY29udGFpbmVyLnJlZ2lzdGVyKCdz
        dG9yZTptYWluJywgU3RvcmUpOwogICAgICAgIGNvbnRhaW5lci5yZWdpc3Rl
        cignc3RvcmU6c2Vjb25kYXJ5JywgT3RoZXJTdG9yZSk7CiAgICAgICAgY29u
        dGFpbmVyLnJlZ2lzdGVyKCdtb2RlbDp1c2VyJywgVXNlcik7CiAgICAgICAg
        Y29udGFpbmVyLnJlZ2lzdGVyKCdtb2RlbDpwb3N0JywgUG9zdCk7CgogICAg
        ICAgIC8vIGluamVjdGluZyBvbmUgZnVsbE5hbWUgb24gYW5vdGhlciB0eXBl
        CiAgICAgICAgY29udGFpbmVyLmZhY3RvcnlJbmplY3Rpb24oJ21vZGVsJywg
        J3N0b3JlJywgJ3N0b3JlOm1haW4nKTsKCiAgICAgICAgLy8gaW5qZWN0aW5n
        IG9uZSBmdWxsTmFtZSBvbiBhbm90aGVyIGZ1bGxOYW1lCiAgICAgICAgY29u
        dGFpbmVyLmZhY3RvcnlJbmplY3Rpb24oJ21vZGVsOnBvc3QnLCAnc2Vjb25k
        YXJ5U3RvcmUnLCAnc3RvcmU6c2Vjb25kYXJ5Jyk7CgogICAgICAgIHZhciBV
        c2VyRmFjdG9yeSA9IGNvbnRhaW5lci5sb29rdXBGYWN0b3J5KCdtb2RlbDp1
        c2VyJyk7CiAgICAgICAgdmFyIFBvc3RGYWN0b3J5ID0gY29udGFpbmVyLmxv
        b2t1cEZhY3RvcnkoJ21vZGVsOnBvc3QnKTsKICAgICAgICB2YXIgc3RvcmUg
        PSBjb250YWluZXIubG9va3VwKCdzdG9yZTptYWluJyk7CgogICAgICAgIFVz
        ZXJGYWN0b3J5LnN0b3JlIGluc3RhbmNlb2YgU3RvcmU7IC8vPT4gdHJ1ZQog
        ICAgICAgIFVzZXJGYWN0b3J5LnNlY29uZGFyeVN0b3JlIGluc3RhbmNlb2Yg
        T3RoZXJTdG9yZTsgLy89PiBmYWxzZQoKICAgICAgICBQb3N0RmFjdG9yeS5z
        dG9yZSBpbnN0YW5jZW9mIFN0b3JlOyAvLz0+IHRydWUKICAgICAgICBQb3N0
        RmFjdG9yeS5zZWNvbmRhcnlTdG9yZSBpbnN0YW5jZW9mIE90aGVyU3RvcmU7
        IC8vPT4gdHJ1ZQoKICAgICAgICAvLyBhbmQgYm90aCBtb2RlbHMgc2hhcmUg
        dGhlIHNhbWUgc291cmNlIGluc3RhbmNlCiAgICAgICAgVXNlckZhY3Rvcnku
        c3RvcmUgPT09IFBvc3RGYWN0b3J5LnN0b3JlOyAvLz0+IHRydWUKICAgICAg
        ICBgYGAKCiAgICAgICAgQG1ldGhvZCBmYWN0b3J5SW5qZWN0aW9uCiAgICAg
        ICAgQHBhcmFtIHtTdHJpbmd9IGZhY3RvcnlOYW1lCiAgICAgICAgQHBhcmFt
        IHtTdHJpbmd9IHByb3BlcnR5CiAgICAgICAgQHBhcmFtIHtTdHJpbmd9IGlu
        amVjdGlvbk5hbWUKICAgICAgKi8KICAgICAgZmFjdG9yeUluamVjdGlvbjog
        ZnVuY3Rpb24oZnVsbE5hbWUsIHByb3BlcnR5LCBpbmplY3Rpb25OYW1lKSB7
        CiAgICAgICAgaWYgKHRoaXMucGFyZW50KSB7IGlsbGVnYWxDaGlsZE9wZXJh
        dGlvbignaW5qZWN0aW9uJyk7IH0KCiAgICAgICAgdmFyIG5vcm1hbGl6ZWRO
        YW1lID0gdGhpcy5ub3JtYWxpemUoZnVsbE5hbWUpOwogICAgICAgIHZhciBu
        b3JtYWxpemVkSW5qZWN0aW9uTmFtZSA9IHRoaXMubm9ybWFsaXplKGluamVj
        dGlvbk5hbWUpOwoKICAgICAgICB2YWxpZGF0ZUZ1bGxOYW1lKGluamVjdGlv
        bk5hbWUpOwoKICAgICAgICBpZiAoZnVsbE5hbWUuaW5kZXhPZignOicpID09
        PSAtMSkgewogICAgICAgICAgcmV0dXJuIHRoaXMuZmFjdG9yeVR5cGVJbmpl
        Y3Rpb24obm9ybWFsaXplZE5hbWUsIHByb3BlcnR5LCBub3JtYWxpemVkSW5q
        ZWN0aW9uTmFtZSk7CiAgICAgICAgfQoKICAgICAgICB2YWxpZGF0ZUZ1bGxO
        YW1lKGZ1bGxOYW1lKTsKCiAgICAgICAgYWRkSW5qZWN0aW9uKHRoaXMuZmFj
        dG9yeUluamVjdGlvbnMsIG5vcm1hbGl6ZWROYW1lLCBwcm9wZXJ0eSwgbm9y
        bWFsaXplZEluamVjdGlvbk5hbWUpOwogICAgICB9LAoKICAgICAgLyoqCiAg
        ICAgICAgQSBkZXB0aCBmaXJzdCB0cmF2ZXJzYWwsIGRlc3Ryb3lpbmcgdGhl
        IGNvbnRhaW5lciwgaXRzIGRlc2NlbmRhbnQgY29udGFpbmVycyBhbmQgYWxs
        CiAgICAgICAgdGhlaXIgbWFuYWdlZCBvYmplY3RzLgoKICAgICAgICBAbWV0
        aG9kIGRlc3Ryb3kKICAgICAgKi8KICAgICAgZGVzdHJveTogZnVuY3Rpb24o
        KSB7CiAgICAgICAgZm9yICh2YXIgaT0wLCBsPXRoaXMuY2hpbGRyZW4ubGVu
        Z3RoOyBpPGw7IGkrKykgewogICAgICAgICAgdGhpcy5jaGlsZHJlbltpXS5k
        ZXN0cm95KCk7CiAgICAgICAgfQoKICAgICAgICB0aGlzLmNoaWxkcmVuID0g
        W107CgogICAgICAgIGVhY2hEZXN0cm95YWJsZSh0aGlzLCBmdW5jdGlvbihp
        dGVtKSB7CiAgICAgICAgICBpdGVtLmRlc3Ryb3koKTsKICAgICAgICB9KTsK
        CiAgICAgICAgdGhpcy5wYXJlbnQgPSB1bmRlZmluZWQ7CiAgICAgICAgdGhp
        cy5pc0Rlc3Ryb3llZCA9IHRydWU7CiAgICAgIH0sCgogICAgICAvKioKICAg
        ICAgICBAbWV0aG9kIHJlc2V0CiAgICAgICovCiAgICAgIHJlc2V0OiBmdW5j
        dGlvbigpIHsKICAgICAgICBmb3IgKHZhciBpPTAsIGw9dGhpcy5jaGlsZHJl
        bi5sZW5ndGg7IGk8bDsgaSsrKSB7CiAgICAgICAgICByZXNldENhY2hlKHRo
        aXMuY2hpbGRyZW5baV0pOwogICAgICAgIH0KICAgICAgICByZXNldENhY2hl
        KHRoaXMpOwogICAgICB9CiAgICB9OwoKICAgIGZ1bmN0aW9uIGhhcyhjb250
        YWluZXIsIGZ1bGxOYW1lKXsKICAgICAgaWYgKGNvbnRhaW5lci5jYWNoZS5o
        YXMoZnVsbE5hbWUpKSB7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0K
        CiAgICAgIHJldHVybiAhIWNvbnRhaW5lci5yZXNvbHZlKGZ1bGxOYW1lKTsK
        ICAgIH0KCiAgICBmdW5jdGlvbiBsb29rdXAoY29udGFpbmVyLCBmdWxsTmFt
        ZSwgb3B0aW9ucykgewogICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTsK
        CiAgICAgIGlmIChjb250YWluZXIuY2FjaGUuaGFzKGZ1bGxOYW1lKSAmJiBv
        cHRpb25zLnNpbmdsZXRvbiAhPT0gZmFsc2UpIHsKICAgICAgICByZXR1cm4g
        Y29udGFpbmVyLmNhY2hlLmdldChmdWxsTmFtZSk7CiAgICAgIH0KCiAgICAg
        IHZhciB2YWx1ZSA9IGluc3RhbnRpYXRlKGNvbnRhaW5lciwgZnVsbE5hbWUp
        OwoKICAgICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHsgcmV0dXJuOyB9
        CgogICAgICBpZiAoaXNTaW5nbGV0b24oY29udGFpbmVyLCBmdWxsTmFtZSkg
        JiYgb3B0aW9ucy5zaW5nbGV0b24gIT09IGZhbHNlKSB7CiAgICAgICAgY29u
        dGFpbmVyLmNhY2hlLnNldChmdWxsTmFtZSwgdmFsdWUpOwogICAgICB9Cgog
        ICAgICByZXR1cm4gdmFsdWU7CiAgICB9CgogICAgZnVuY3Rpb24gaWxsZWdh
        bENoaWxkT3BlcmF0aW9uKG9wZXJhdGlvbikgewogICAgICB0aHJvdyBuZXcg
        RXJyb3Iob3BlcmF0aW9uICsgIiBpcyBub3QgY3VycmVudGx5IHN1cHBvcnRl
        ZCBvbiBjaGlsZCBjb250YWluZXJzIik7CiAgICB9CgogICAgZnVuY3Rpb24g
        aXNTaW5nbGV0b24oY29udGFpbmVyLCBmdWxsTmFtZSkgewogICAgICB2YXIg
        c2luZ2xldG9uID0gb3B0aW9uKGNvbnRhaW5lciwgZnVsbE5hbWUsICdzaW5n
        bGV0b24nKTsKCiAgICAgIHJldHVybiBzaW5nbGV0b24gIT09IGZhbHNlOwog
        ICAgfQoKICAgIGZ1bmN0aW9uIGJ1aWxkSW5qZWN0aW9ucyhjb250YWluZXIs
        IGluamVjdGlvbnMpIHsKICAgICAgdmFyIGhhc2ggPSB7fTsKCiAgICAgIGlm
        ICghaW5qZWN0aW9ucykgeyByZXR1cm4gaGFzaDsgfQoKICAgICAgdmFyIGlu
        amVjdGlvbiwgaW5qZWN0YWJsZTsKCiAgICAgIGZvciAodmFyIGk9MCwgbD1p
        bmplY3Rpb25zLmxlbmd0aDsgaTxsOyBpKyspIHsKICAgICAgICBpbmplY3Rp
        b24gPSBpbmplY3Rpb25zW2ldOwogICAgICAgIGluamVjdGFibGUgPSBsb29r
        dXAoY29udGFpbmVyLCBpbmplY3Rpb24uZnVsbE5hbWUpOwoKICAgICAgICBp
        ZiAoaW5qZWN0YWJsZSAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICBoYXNo
        W2luamVjdGlvbi5wcm9wZXJ0eV0gPSBpbmplY3RhYmxlOwogICAgICAgIH0g
        ZWxzZSB7CiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0F0dGVtcHRpbmcg
        dG8gaW5qZWN0IGFuIHVua25vd24gaW5qZWN0aW9uOiBgJyArIGluamVjdGlv
        bi5mdWxsTmFtZSArICdgJyk7CiAgICAgICAgfQogICAgICB9CgogICAgICBy
        ZXR1cm4gaGFzaDsKICAgIH0KCiAgICBmdW5jdGlvbiBvcHRpb24oY29udGFp
        bmVyLCBmdWxsTmFtZSwgb3B0aW9uTmFtZSkgewogICAgICB2YXIgb3B0aW9u
        cyA9IGNvbnRhaW5lci5fb3B0aW9ucy5nZXQoZnVsbE5hbWUpOwoKICAgICAg
        aWYgKG9wdGlvbnMgJiYgb3B0aW9uc1tvcHRpb25OYW1lXSAhPT0gdW5kZWZp
        bmVkKSB7CiAgICAgICAgcmV0dXJuIG9wdGlvbnNbb3B0aW9uTmFtZV07CiAg
        ICAgIH0KCiAgICAgIHZhciB0eXBlID0gZnVsbE5hbWUuc3BsaXQoIjoiKVsw
        XTsKICAgICAgb3B0aW9ucyA9IGNvbnRhaW5lci5fdHlwZU9wdGlvbnMuZ2V0
        KHR5cGUpOwoKICAgICAgaWYgKG9wdGlvbnMpIHsKICAgICAgICByZXR1cm4g
        b3B0aW9uc1tvcHRpb25OYW1lXTsKICAgICAgfQogICAgfQoKICAgIGZ1bmN0
        aW9uIGZhY3RvcnlGb3IoY29udGFpbmVyLCBmdWxsTmFtZSkgewogICAgICB2
        YXIgbmFtZSA9IGZ1bGxOYW1lOwogICAgICB2YXIgZmFjdG9yeSA9IGNvbnRh
        aW5lci5yZXNvbHZlKG5hbWUpOwogICAgICB2YXIgaW5qZWN0ZWRGYWN0b3J5
        OwogICAgICB2YXIgY2FjaGUgPSBjb250YWluZXIuZmFjdG9yeUNhY2hlOwog
        ICAgICB2YXIgdHlwZSA9IGZ1bGxOYW1lLnNwbGl0KCI6IilbMF07CgogICAg
        ICBpZiAoZmFjdG9yeSA9PT0gdW5kZWZpbmVkKSB7IHJldHVybjsgfQoKICAg
        ICAgaWYgKGNhY2hlLmhhcyhmdWxsTmFtZSkpIHsKICAgICAgICByZXR1cm4g
        Y2FjaGUuZ2V0KGZ1bGxOYW1lKTsKICAgICAgfQoKICAgICAgaWYgKCFmYWN0
        b3J5IHx8IHR5cGVvZiBmYWN0b3J5LmV4dGVuZCAhPT0gJ2Z1bmN0aW9uJyB8
        fCAoIUVtYmVyLk1PREVMX0ZBQ1RPUllfSU5KRUNUSU9OUyAmJiB0eXBlID09
        PSAnbW9kZWwnKSkgewogICAgICAgIC8vIFRPRE86IHRoaW5rIGFib3V0IGEg
        J3NhZmUnIG1lcmdlIHN0eWxlIGV4dGVuc2lvbgogICAgICAgIC8vIGZvciBu
        b3cganVzdCBmYWxsYmFjayB0byBjcmVhdGUgdGltZSBpbmplY3Rpb24KICAg
        ICAgICByZXR1cm4gZmFjdG9yeTsKICAgICAgfSBlbHNlIHsKCiAgICAgICAg
        dmFyIGluamVjdGlvbnMgICAgICAgID0gaW5qZWN0aW9uc0Zvcihjb250YWlu
        ZXIsIGZ1bGxOYW1lKTsKICAgICAgICB2YXIgZmFjdG9yeUluamVjdGlvbnMg
        PSBmYWN0b3J5SW5qZWN0aW9uc0Zvcihjb250YWluZXIsIGZ1bGxOYW1lKTsK
        CiAgICAgICAgZmFjdG9yeUluamVjdGlvbnMuX3RvU3RyaW5nID0gY29udGFp
        bmVyLm1ha2VUb1N0cmluZyhmYWN0b3J5LCBmdWxsTmFtZSk7CgogICAgICAg
        IGluamVjdGVkRmFjdG9yeSA9IGZhY3RvcnkuZXh0ZW5kKGluamVjdGlvbnMp
        OwogICAgICAgIGluamVjdGVkRmFjdG9yeS5yZW9wZW5DbGFzcyhmYWN0b3J5
        SW5qZWN0aW9ucyk7CgogICAgICAgIGNhY2hlLnNldChmdWxsTmFtZSwgaW5q
        ZWN0ZWRGYWN0b3J5KTsKCiAgICAgICAgcmV0dXJuIGluamVjdGVkRmFjdG9y
        eTsKICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIGluamVjdGlvbnNGb3Io
        Y29udGFpbmVyICxmdWxsTmFtZSkgewogICAgICB2YXIgc3BsaXROYW1lID0g
        ZnVsbE5hbWUuc3BsaXQoIjoiKSwKICAgICAgICB0eXBlID0gc3BsaXROYW1l
        WzBdLAogICAgICAgIGluamVjdGlvbnMgPSBbXTsKCiAgICAgIGluamVjdGlv
        bnMgPSBpbmplY3Rpb25zLmNvbmNhdChjb250YWluZXIudHlwZUluamVjdGlv
        bnMuZ2V0KHR5cGUpIHx8IFtdKTsKICAgICAgaW5qZWN0aW9ucyA9IGluamVj
        dGlvbnMuY29uY2F0KGNvbnRhaW5lci5pbmplY3Rpb25zW2Z1bGxOYW1lXSB8
        fCBbXSk7CgogICAgICBpbmplY3Rpb25zID0gYnVpbGRJbmplY3Rpb25zKGNv
        bnRhaW5lciwgaW5qZWN0aW9ucyk7CiAgICAgIGluamVjdGlvbnMuX2RlYnVn
        Q29udGFpbmVyS2V5ID0gZnVsbE5hbWU7CiAgICAgIGluamVjdGlvbnMuY29u
        dGFpbmVyID0gY29udGFpbmVyOwoKICAgICAgcmV0dXJuIGluamVjdGlvbnM7
        CiAgICB9CgogICAgZnVuY3Rpb24gZmFjdG9yeUluamVjdGlvbnNGb3IoY29u
        dGFpbmVyLCBmdWxsTmFtZSkgewogICAgICB2YXIgc3BsaXROYW1lID0gZnVs
        bE5hbWUuc3BsaXQoIjoiKSwKICAgICAgICB0eXBlID0gc3BsaXROYW1lWzBd
        LAogICAgICAgIGZhY3RvcnlJbmplY3Rpb25zID0gW107CgogICAgICBmYWN0
        b3J5SW5qZWN0aW9ucyA9IGZhY3RvcnlJbmplY3Rpb25zLmNvbmNhdChjb250
        YWluZXIuZmFjdG9yeVR5cGVJbmplY3Rpb25zLmdldCh0eXBlKSB8fCBbXSk7
        CiAgICAgIGZhY3RvcnlJbmplY3Rpb25zID0gZmFjdG9yeUluamVjdGlvbnMu
        Y29uY2F0KGNvbnRhaW5lci5mYWN0b3J5SW5qZWN0aW9uc1tmdWxsTmFtZV0g
        fHwgW10pOwoKICAgICAgZmFjdG9yeUluamVjdGlvbnMgPSBidWlsZEluamVj
        dGlvbnMoY29udGFpbmVyLCBmYWN0b3J5SW5qZWN0aW9ucyk7CiAgICAgIGZh
        Y3RvcnlJbmplY3Rpb25zLl9kZWJ1Z0NvbnRhaW5lcktleSA9IGZ1bGxOYW1l
        OwoKICAgICAgcmV0dXJuIGZhY3RvcnlJbmplY3Rpb25zOwogICAgfQoKICAg
        IGZ1bmN0aW9uIGluc3RhbnRpYXRlKGNvbnRhaW5lciwgZnVsbE5hbWUpIHsK
        ICAgICAgdmFyIGZhY3RvcnkgPSBmYWN0b3J5Rm9yKGNvbnRhaW5lciwgZnVs
        bE5hbWUpOwoKICAgICAgaWYgKG9wdGlvbihjb250YWluZXIsIGZ1bGxOYW1l
        LCAnaW5zdGFudGlhdGUnKSA9PT0gZmFsc2UpIHsKICAgICAgICByZXR1cm4g
        ZmFjdG9yeTsKICAgICAgfQoKICAgICAgaWYgKGZhY3RvcnkpIHsKICAgICAg
        ICBpZiAodHlwZW9mIGZhY3RvcnkuZXh0ZW5kID09PSAnZnVuY3Rpb24nKSB7
        CiAgICAgICAgICAvLyBhc3N1bWUgdGhlIGZhY3Rvcnkgd2FzIGV4dGVuZGFi
        bGUgYW5kIGlzIGFscmVhZHkgaW5qZWN0ZWQKICAgICAgICAgIHJldHVybiBm
        YWN0b3J5LmNyZWF0ZSgpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAv
        LyBhc3N1bWUgdGhlIGZhY3Rvcnkgd2FzIGV4dGVuZGFibGUKICAgICAgICAg
        IC8vIHRvIGNyZWF0ZSB0aW1lIGluamVjdGlvbnMKICAgICAgICAgIC8vIFRP
        RE86IHN1cHBvcnQgbmV3J2luZyBmb3IgaW5zdGFudGlhdGlvbiBhbmQgbWVy
        Z2UgaW5qZWN0aW9ucyBmb3IgcHVyZSBKUyBGdW5jdGlvbnMKICAgICAgICAg
        IHJldHVybiBmYWN0b3J5LmNyZWF0ZShpbmplY3Rpb25zRm9yKGNvbnRhaW5l
        ciwgZnVsbE5hbWUpKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICBm
        dW5jdGlvbiBlYWNoRGVzdHJveWFibGUoY29udGFpbmVyLCBjYWxsYmFjaykg
        ewogICAgICBjb250YWluZXIuY2FjaGUuZWFjaExvY2FsKGZ1bmN0aW9uKGtl
        eSwgdmFsdWUpIHsKICAgICAgICBpZiAob3B0aW9uKGNvbnRhaW5lciwga2V5
        LCAnaW5zdGFudGlhdGUnKSA9PT0gZmFsc2UpIHsgcmV0dXJuOyB9CiAgICAg
        ICAgY2FsbGJhY2sodmFsdWUpOwogICAgICB9KTsKICAgIH0KCiAgICBmdW5j
        dGlvbiByZXNldENhY2hlKGNvbnRhaW5lcikgewogICAgICBjb250YWluZXIu
        Y2FjaGUuZWFjaExvY2FsKGZ1bmN0aW9uKGtleSwgdmFsdWUpIHsKICAgICAg
        ICBpZiAob3B0aW9uKGNvbnRhaW5lciwga2V5LCAnaW5zdGFudGlhdGUnKSA9
        PT0gZmFsc2UpIHsgcmV0dXJuOyB9CiAgICAgICAgdmFsdWUuZGVzdHJveSgp
        OwogICAgICB9KTsKICAgICAgY29udGFpbmVyLmNhY2hlLmRpY3QgPSB7fTsK
        ICAgIH0KCiAgICBmdW5jdGlvbiBhZGRUeXBlSW5qZWN0aW9uKHJ1bGVzLCB0
        eXBlLCBwcm9wZXJ0eSwgZnVsbE5hbWUpIHsKICAgICAgdmFyIGluamVjdGlv
        bnMgPSBydWxlcy5nZXQodHlwZSk7CgogICAgICBpZiAoIWluamVjdGlvbnMp
        IHsKICAgICAgICBpbmplY3Rpb25zID0gW107CiAgICAgICAgcnVsZXMuc2V0
        KHR5cGUsIGluamVjdGlvbnMpOwogICAgICB9CgogICAgICBpbmplY3Rpb25z
        LnB1c2goewogICAgICAgIHByb3BlcnR5OiBwcm9wZXJ0eSwKICAgICAgICBm
        dWxsTmFtZTogZnVsbE5hbWUKICAgICAgfSk7CiAgICB9CgogICAgdmFyIFZB
        TElEX0ZVTExfTkFNRV9SRUdFWFAgPSAvXlteOl0rLis6W146XSskLzsKICAg
        IGZ1bmN0aW9uIHZhbGlkYXRlRnVsbE5hbWUoZnVsbE5hbWUpIHsKICAgICAg
        aWYgKCFWQUxJRF9GVUxMX05BTUVfUkVHRVhQLnRlc3QoZnVsbE5hbWUpKSB7
        CiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignSW52YWxpZCBGdWxsbmFt
        ZSwgZXhwZWN0ZWQ6IGB0eXBlOm5hbWVgIGdvdDogJyArIGZ1bGxOYW1lKTsK
        ICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIGFkZEluamVjdGlvbihydWxl
        cywgZmFjdG9yeU5hbWUsIHByb3BlcnR5LCBpbmplY3Rpb25OYW1lKSB7CiAg
        ICAgIHZhciBpbmplY3Rpb25zID0gcnVsZXNbZmFjdG9yeU5hbWVdID0gcnVs
        ZXNbZmFjdG9yeU5hbWVdIHx8IFtdOwogICAgICBpbmplY3Rpb25zLnB1c2go
        eyBwcm9wZXJ0eTogcHJvcGVydHksIGZ1bGxOYW1lOiBpbmplY3Rpb25OYW1l
        IH0pOwogICAgfQoKICAgIHJldHVybiBDb250YWluZXI7Cn0pOwoKfSkoKTsK
        CihmdW5jdGlvbigpIHsKLypnbG9iYWxzIEVOViAqLwovKioKQG1vZHVsZSBl
        bWJlcgpAc3VibW9kdWxlIGVtYmVyLXJ1bnRpbWUKKi8KCnZhciBpbmRleE9m
        ID0gRW1iZXIuRW51bWVyYWJsZVV0aWxzLmluZGV4T2Y7CgovKioKIFRoaXMg
        d2lsbCBjb21wYXJlIHR3byBqYXZhc2NyaXB0IHZhbHVlcyBvZiBwb3NzaWJs
        eSBkaWZmZXJlbnQgdHlwZXMuCiBJdCB3aWxsIHRlbGwgeW91IHdoaWNoIG9u
        ZSBpcyBncmVhdGVyIHRoYW4gdGhlIG90aGVyIGJ5IHJldHVybmluZzoKCiAg
        LSAtMSBpZiB0aGUgZmlyc3QgaXMgc21hbGxlciB0aGFuIHRoZSBzZWNvbmQs
        CiAgLSAwIGlmIGJvdGggYXJlIGVxdWFsLAogIC0gMSBpZiB0aGUgZmlyc3Qg
        aXMgZ3JlYXRlciB0aGFuIHRoZSBzZWNvbmQuCgogVGhlIG9yZGVyIGlzIGNh
        bGN1bGF0ZWQgYmFzZWQgb24gYEVtYmVyLk9SREVSX0RFRklOSVRJT05gLCBp
        ZiB0eXBlcyBhcmUgZGlmZmVyZW50LgogSW4gY2FzZSB0aGV5IGhhdmUgdGhl
        IHNhbWUgdHlwZSBhbiBhcHByb3ByaWF0ZSBjb21wYXJpc29uIGZvciB0aGlz
        IHR5cGUgaXMgbWFkZS4KCiAgYGBgamF2YXNjcmlwdAogIEVtYmVyLmNvbXBh
        cmUoJ2hlbGxvJywgJ2hlbGxvJyk7ICAvLyAwCiAgRW1iZXIuY29tcGFyZSgn
        YWJjJywgJ2RmZycpOyAgICAgIC8vIC0xCiAgRW1iZXIuY29tcGFyZSgyLCAx
        KTsgICAgICAgICAgICAgIC8vIDEKICBgYGAKCiBAbWV0aG9kIGNvbXBhcmUK
        IEBmb3IgRW1iZXIKIEBwYXJhbSB7T2JqZWN0fSB2IEZpcnN0IHZhbHVlIHRv
        IGNvbXBhcmUKIEBwYXJhbSB7T2JqZWN0fSB3IFNlY29uZCB2YWx1ZSB0byBj
        b21wYXJlCiBAcmV0dXJuIHtOdW1iZXJ9IC0xIGlmIHYgPCB3LCAwIGlmIHYg
        PSB3IGFuZCAxIGlmIHYgPiB3LgoqLwpFbWJlci5jb21wYXJlID0gZnVuY3Rp
        b24gY29tcGFyZSh2LCB3KSB7CiAgaWYgKHYgPT09IHcpIHsgcmV0dXJuIDA7
        IH0KCiAgdmFyIHR5cGUxID0gRW1iZXIudHlwZU9mKHYpOwogIHZhciB0eXBl
        MiA9IEVtYmVyLnR5cGVPZih3KTsKCiAgdmFyIENvbXBhcmFibGUgPSBFbWJl
        ci5Db21wYXJhYmxlOwogIGlmIChDb21wYXJhYmxlKSB7CiAgICBpZiAodHlw
        ZTE9PT0naW5zdGFuY2UnICYmIENvbXBhcmFibGUuZGV0ZWN0KHYuY29uc3Ry
        dWN0b3IpKSB7CiAgICAgIHJldHVybiB2LmNvbnN0cnVjdG9yLmNvbXBhcmUo
        diwgdyk7CiAgICB9CgogICAgaWYgKHR5cGUyID09PSAnaW5zdGFuY2UnICYm
        IENvbXBhcmFibGUuZGV0ZWN0KHcuY29uc3RydWN0b3IpKSB7CiAgICAgIHJl
        dHVybiAxLXcuY29uc3RydWN0b3IuY29tcGFyZSh3LCB2KTsKICAgIH0KICB9
        CgogIC8vIElmIHdlIGhhdmVuJ3QgeWV0IGdlbmVyYXRlZCBhIHJldmVyc2Ut
        bWFwcGluZyBvZiBFbWJlci5PUkRFUl9ERUZJTklUSU9OLAogIC8vIGRvIHNv
        IG5vdy4KICB2YXIgbWFwcGluZyA9IEVtYmVyLk9SREVSX0RFRklOSVRJT05f
        TUFQUElORzsKICBpZiAoIW1hcHBpbmcpIHsKICAgIHZhciBvcmRlciA9IEVt
        YmVyLk9SREVSX0RFRklOSVRJT047CiAgICBtYXBwaW5nID0gRW1iZXIuT1JE
        RVJfREVGSU5JVElPTl9NQVBQSU5HID0ge307CiAgICB2YXIgaWR4LCBsZW47
        CiAgICBmb3IgKGlkeCA9IDAsIGxlbiA9IG9yZGVyLmxlbmd0aDsgaWR4IDwg
        bGVuOyAgKytpZHgpIHsKICAgICAgbWFwcGluZ1tvcmRlcltpZHhdXSA9IGlk
        eDsKICAgIH0KCiAgICAvLyBXZSBubyBsb25nZXIgbmVlZCBFbWJlci5PUkRF
        Ul9ERUZJTklUSU9OLgogICAgZGVsZXRlIEVtYmVyLk9SREVSX0RFRklOSVRJ
        T047CiAgfQoKICB2YXIgdHlwZTFJbmRleCA9IG1hcHBpbmdbdHlwZTFdOwog
        IHZhciB0eXBlMkluZGV4ID0gbWFwcGluZ1t0eXBlMl07CgogIGlmICh0eXBl
        MUluZGV4IDwgdHlwZTJJbmRleCkgeyByZXR1cm4gLTE7IH0KICBpZiAodHlw
        ZTFJbmRleCA+IHR5cGUySW5kZXgpIHsgcmV0dXJuIDE7IH0KCiAgLy8gdHlw
        ZXMgYXJlIGVxdWFsIC0gc28gd2UgaGF2ZSB0byBjaGVjayB2YWx1ZXMgbm93
        CiAgc3dpdGNoICh0eXBlMSkgewogICAgY2FzZSAnYm9vbGVhbic6CiAgICBj
        YXNlICdudW1iZXInOgogICAgICBpZiAodiA8IHcpIHsgcmV0dXJuIC0xOyB9
        CiAgICAgIGlmICh2ID4gdykgeyByZXR1cm4gMTsgfQogICAgICByZXR1cm4g
        MDsKCiAgICBjYXNlICdzdHJpbmcnOgogICAgICB2YXIgY29tcCA9IHYubG9j
        YWxlQ29tcGFyZSh3KTsKICAgICAgaWYgKGNvbXAgPCAwKSB7IHJldHVybiAt
        MTsgfQogICAgICBpZiAoY29tcCA+IDApIHsgcmV0dXJuIDE7IH0KICAgICAg
        cmV0dXJuIDA7CgogICAgY2FzZSAnYXJyYXknOgogICAgICB2YXIgdkxlbiA9
        IHYubGVuZ3RoOwogICAgICB2YXIgd0xlbiA9IHcubGVuZ3RoOwogICAgICB2
        YXIgbCA9IE1hdGgubWluKHZMZW4sIHdMZW4pOwogICAgICB2YXIgciA9IDA7
        CiAgICAgIHZhciBpID0gMDsKICAgICAgd2hpbGUgKHIgPT09IDAgJiYgaSA8
        IGwpIHsKICAgICAgICByID0gY29tcGFyZSh2W2ldLHdbaV0pOwogICAgICAg
        IGkrKzsKICAgICAgfQogICAgICBpZiAociAhPT0gMCkgeyByZXR1cm4gcjsg
        fQoKICAgICAgLy8gYWxsIGVsZW1lbnRzIGFyZSBlcXVhbCBub3cKICAgICAg
        Ly8gc2hvcnRlciBhcnJheSBzaG91bGQgYmUgb3JkZXJlZCBmaXJzdAogICAg
        ICBpZiAodkxlbiA8IHdMZW4pIHsgcmV0dXJuIC0xOyB9CiAgICAgIGlmICh2
        TGVuID4gd0xlbikgeyByZXR1cm4gMTsgfQogICAgICAvLyBhcnJheXMgYXJl
        IGVxdWFsIG5vdwogICAgICByZXR1cm4gMDsKCiAgICBjYXNlICdpbnN0YW5j
        ZSc6CiAgICAgIGlmIChFbWJlci5Db21wYXJhYmxlICYmIEVtYmVyLkNvbXBh
        cmFibGUuZGV0ZWN0KHYpKSB7CiAgICAgICAgcmV0dXJuIHYuY29tcGFyZSh2
        LCB3KTsKICAgICAgfQogICAgICByZXR1cm4gMDsKCiAgICBjYXNlICdkYXRl
        JzoKICAgICAgdmFyIHZOdW0gPSB2LmdldFRpbWUoKTsKICAgICAgdmFyIHdO
        dW0gPSB3LmdldFRpbWUoKTsKICAgICAgaWYgKHZOdW0gPCB3TnVtKSB7IHJl
        dHVybiAtMTsgfQogICAgICBpZiAodk51bSA+IHdOdW0pIHsgcmV0dXJuIDE7
        IH0KICAgICAgcmV0dXJuIDA7CgogICAgZGVmYXVsdDoKICAgICAgcmV0dXJu
        IDA7CiAgfQp9OwoKZnVuY3Rpb24gX2NvcHkob2JqLCBkZWVwLCBzZWVuLCBj
        b3BpZXMpIHsKICB2YXIgcmV0LCBsb2MsIGtleTsKCiAgLy8gcHJpbWl0aXZl
        IGRhdGEgdHlwZXMgYXJlIGltbXV0YWJsZSwganVzdCByZXR1cm4gdGhlbS4K
        ICBpZiAoJ29iamVjdCcgIT09IHR5cGVvZiBvYmogfHwgb2JqPT09bnVsbCkg
        cmV0dXJuIG9iajsKCiAgLy8gYXZvaWQgY3ljbGljYWwgbG9vcHMKICBpZiAo
        ZGVlcCAmJiAobG9jPWluZGV4T2Yoc2Vlbiwgb2JqKSk+PTApIHJldHVybiBj
        b3BpZXNbbG9jXTsKCiAgRW1iZXIuYXNzZXJ0KCdDYW5ub3QgY2xvbmUgYW4g
        RW1iZXIuT2JqZWN0IHRoYXQgZG9lcyBub3QgaW1wbGVtZW50IEVtYmVyLkNv
        cHlhYmxlJywgIShvYmogaW5zdGFuY2VvZiBFbWJlci5PYmplY3QpIHx8IChF
        bWJlci5Db3B5YWJsZSAmJiBFbWJlci5Db3B5YWJsZS5kZXRlY3Qob2JqKSkp
        OwoKICAvLyBJTVBPUlRBTlQ6IHRoaXMgc3BlY2lmaWMgdGVzdCB3aWxsIGRl
        dGVjdCBhIG5hdGl2ZSBhcnJheSBvbmx5LiBBbnkgb3RoZXIKICAvLyBvYmpl
        Y3Qgd2lsbCBuZWVkIHRvIGltcGxlbWVudCBDb3B5YWJsZS4KICBpZiAoRW1i
        ZXIudHlwZU9mKG9iaikgPT09ICdhcnJheScpIHsKICAgIHJldCA9IG9iai5z
        bGljZSgpOwogICAgaWYgKGRlZXApIHsKICAgICAgbG9jID0gcmV0Lmxlbmd0
        aDsKICAgICAgd2hpbGUoLS1sb2M+PTApIHJldFtsb2NdID0gX2NvcHkocmV0
        W2xvY10sIGRlZXAsIHNlZW4sIGNvcGllcyk7CiAgICB9CiAgfSBlbHNlIGlm
        IChFbWJlci5Db3B5YWJsZSAmJiBFbWJlci5Db3B5YWJsZS5kZXRlY3Qob2Jq
        KSkgewogICAgcmV0ID0gb2JqLmNvcHkoZGVlcCwgc2VlbiwgY29waWVzKTsK
        ICB9IGVsc2UgewogICAgcmV0ID0ge307CiAgICBmb3Ioa2V5IGluIG9iaikg
        ewogICAgICBpZiAoIW9iai5oYXNPd25Qcm9wZXJ0eShrZXkpKSBjb250aW51
        ZTsKCiAgICAgIC8vIFByZXZlbnRzIGJyb3dzZXJzIHRoYXQgZG9uJ3QgcmVz
        cGVjdCBub24tZW51bWVyYWJpbGl0eSBmcm9tCiAgICAgIC8vIGNvcHlpbmcg
        aW50ZXJuYWwgRW1iZXIgcHJvcGVydGllcwogICAgICBpZiAoa2V5LnN1YnN0
        cmluZygwLDIpID09PSAnX18nKSBjb250aW51ZTsKCiAgICAgIHJldFtrZXld
        ID0gZGVlcCA/IF9jb3B5KG9ialtrZXldLCBkZWVwLCBzZWVuLCBjb3BpZXMp
        IDogb2JqW2tleV07CiAgICB9CiAgfQoKICBpZiAoZGVlcCkgewogICAgc2Vl
        bi5wdXNoKG9iaik7CiAgICBjb3BpZXMucHVzaChyZXQpOwogIH0KCiAgcmV0
        dXJuIHJldDsKfQoKLyoqCiAgQ3JlYXRlcyBhIGNsb25lIG9mIHRoZSBwYXNz
        ZWQgb2JqZWN0LiBUaGlzIGZ1bmN0aW9uIGNhbiB0YWtlIGp1c3QgYWJvdXQK
        ICBhbnkgdHlwZSBvZiBvYmplY3QgYW5kIGNyZWF0ZSBhIGNsb25lIG9mIGl0
        LCBpbmNsdWRpbmcgcHJpbWl0aXZlIHZhbHVlcwogICh3aGljaCBhcmUgbm90
        IGFjdHVhbGx5IGNsb25lZCBiZWNhdXNlIHRoZXkgYXJlIGltbXV0YWJsZSku
        CgogIElmIHRoZSBwYXNzZWQgb2JqZWN0IGltcGxlbWVudHMgdGhlIGBjbG9u
        ZSgpYCBtZXRob2QsIHRoZW4gdGhpcyBmdW5jdGlvbgogIHdpbGwgc2ltcGx5
        IGNhbGwgdGhhdCBtZXRob2QgYW5kIHJldHVybiB0aGUgcmVzdWx0LgoKICBA
        bWV0aG9kIGNvcHkKICBAZm9yIEVtYmVyCiAgQHBhcmFtIHtPYmplY3R9IG9i
        aiBUaGUgb2JqZWN0IHRvIGNsb25lCiAgQHBhcmFtIHtCb29sZWFufSBkZWVw
        IElmIHRydWUsIGEgZGVlcCBjb3B5IG9mIHRoZSBvYmplY3QgaXMgbWFkZQog
        IEByZXR1cm4ge09iamVjdH0gVGhlIGNsb25lZCBvYmplY3QKKi8KRW1iZXIu
        Y29weSA9IGZ1bmN0aW9uKG9iaiwgZGVlcCkgewogIC8vIGZhc3QgcGF0aHMK
        ICBpZiAoJ29iamVjdCcgIT09IHR5cGVvZiBvYmogfHwgb2JqPT09bnVsbCkg
        cmV0dXJuIG9iajsgLy8gY2FuJ3QgY29weSBwcmltaXRpdmVzCiAgaWYgKEVt
        YmVyLkNvcHlhYmxlICYmIEVtYmVyLkNvcHlhYmxlLmRldGVjdChvYmopKSBy
        ZXR1cm4gb2JqLmNvcHkoZGVlcCk7CiAgcmV0dXJuIF9jb3B5KG9iaiwgZGVl
        cCwgZGVlcCA/IFtdIDogbnVsbCwgZGVlcCA/IFtdIDogbnVsbCk7Cn07Cgov
        KioKICBDb21wYXJlcyB0d28gb2JqZWN0cywgcmV0dXJuaW5nIHRydWUgaWYg
        dGhleSBhcmUgbG9naWNhbGx5IGVxdWFsLiBUaGlzIGlzCiAgYSBkZWVwZXIg
        Y29tcGFyaXNvbiB0aGFuIGEgc2ltcGxlIHRyaXBsZSBlcXVhbC4gRm9yIHNl
        dHMgaXQgd2lsbCBjb21wYXJlIHRoZQogIGludGVybmFsIG9iamVjdHMuIEZv
        ciBhbnkgb3RoZXIgb2JqZWN0IHRoYXQgaW1wbGVtZW50cyBgaXNFcXVhbCgp
        YCBpdCB3aWxsCiAgcmVzcGVjdCB0aGF0IG1ldGhvZC4KCiAgYGBgamF2YXNj
        cmlwdAogIEVtYmVyLmlzRXF1YWwoJ2hlbGxvJywgJ2hlbGxvJyk7ICAvLyB0
        cnVlCiAgRW1iZXIuaXNFcXVhbCgxLCAyKTsgICAgICAgICAgICAgIC8vIGZh
        bHNlCiAgRW1iZXIuaXNFcXVhbChbNCwyXSwgWzQsMl0pOyAgICAgIC8vIGZh
        bHNlCiAgYGBgCgogIEBtZXRob2QgaXNFcXVhbAogIEBmb3IgRW1iZXIKICBA
        cGFyYW0ge09iamVjdH0gYSBmaXJzdCBvYmplY3QgdG8gY29tcGFyZQogIEBw
        YXJhbSB7T2JqZWN0fSBiIHNlY29uZCBvYmplY3QgdG8gY29tcGFyZQogIEBy
        ZXR1cm4ge0Jvb2xlYW59CiovCkVtYmVyLmlzRXF1YWwgPSBmdW5jdGlvbihh
        LCBiKSB7CiAgaWYgKGEgJiYgJ2Z1bmN0aW9uJz09PXR5cGVvZiBhLmlzRXF1
        YWwpIHJldHVybiBhLmlzRXF1YWwoYik7CiAgcmV0dXJuIGEgPT09IGI7Cn07
        CgovLyBVc2VkIGJ5IEVtYmVyLmNvbXBhcmUKRW1iZXIuT1JERVJfREVGSU5J
        VElPTiA9IEVtYmVyLkVOVi5PUkRFUl9ERUZJTklUSU9OIHx8IFsKICAndW5k
        ZWZpbmVkJywKICAnbnVsbCcsCiAgJ2Jvb2xlYW4nLAogICdudW1iZXInLAog
        ICdzdHJpbmcnLAogICdhcnJheScsCiAgJ29iamVjdCcsCiAgJ2luc3RhbmNl
        JywKICAnZnVuY3Rpb24nLAogICdjbGFzcycsCiAgJ2RhdGUnCl07CgovKioK
        ICBSZXR1cm5zIGFsbCBvZiB0aGUga2V5cyBkZWZpbmVkIG9uIGFuIG9iamVj
        dCBvciBoYXNoLiBUaGlzIGlzIHVzZWZ1bAogIHdoZW4gaW5zcGVjdGluZyBv
        YmplY3RzIGZvciBkZWJ1Z2dpbmcuIE9uIGJyb3dzZXJzIHRoYXQgc3VwcG9y
        dCBpdCwgdGhpcwogIHVzZXMgdGhlIG5hdGl2ZSBgT2JqZWN0LmtleXNgIGlt
        cGxlbWVudGF0aW9uLgoKICBAbWV0aG9kIGtleXMKICBAZm9yIEVtYmVyCiAg
        QHBhcmFtIHtPYmplY3R9IG9iagogIEByZXR1cm4ge0FycmF5fSBBcnJheSBj
        b250YWluaW5nIGtleXMgb2Ygb2JqCiovCkVtYmVyLmtleXMgPSBPYmplY3Qu
        a2V5czsKCmlmICghRW1iZXIua2V5cyB8fCBFbWJlci5jcmVhdGUuaXNTaW11
        bGF0ZWQpIHsKICB2YXIgcHJvdG90eXBlUHJvcGVydGllcyA9IFsKICAgICdj
        b25zdHJ1Y3RvcicsCiAgICAnaGFzT3duUHJvcGVydHknLAogICAgJ2lzUHJv
        dG90eXBlT2YnLAogICAgJ3Byb3BlcnR5SXNFbnVtZXJhYmxlJywKICAgICd2
        YWx1ZU9mJywKICAgICd0b0xvY2FsZVN0cmluZycsCiAgICAndG9TdHJpbmcn
        CiAgXSwKICBwdXNoUHJvcGVydHlOYW1lID0gZnVuY3Rpb24ob2JqLCBhcnJh
        eSwga2V5KSB7CiAgICAvLyBQcmV2ZW50cyBicm93c2VycyB0aGF0IGRvbid0
        IHJlc3BlY3Qgbm9uLWVudW1lcmFiaWxpdHkgZnJvbQogICAgLy8gY29weWlu
        ZyBpbnRlcm5hbCBFbWJlciBwcm9wZXJ0aWVzCiAgICBpZiAoa2V5LnN1YnN0
        cmluZygwLDIpID09PSAnX18nKSByZXR1cm47CiAgICBpZiAoa2V5ID09PSAn
        X3N1cGVyJykgcmV0dXJuOwogICAgaWYgKGluZGV4T2YoYXJyYXksIGtleSkg
        Pj0gMCkgcmV0dXJuOwogICAgaWYgKCFvYmouaGFzT3duUHJvcGVydHkoa2V5
        KSkgcmV0dXJuOwoKICAgIGFycmF5LnB1c2goa2V5KTsKICB9OwoKICBFbWJl
        ci5rZXlzID0gZnVuY3Rpb24ob2JqKSB7CiAgICB2YXIgcmV0ID0gW10sIGtl
        eTsKICAgIGZvciAoa2V5IGluIG9iaikgewogICAgICBwdXNoUHJvcGVydHlO
        YW1lKG9iaiwgcmV0LCBrZXkpOwogICAgfQoKICAgIC8vIElFOCBkb2Vzbid0
        IGVudW1lcmF0ZSBwcm9wZXJ0eSB0aGF0IG5hbWVkIHRoZSBzYW1lIGFzIHBy
        b3RvdHlwZSBwcm9wZXJ0aWVzLgogICAgZm9yICh2YXIgaSA9IDAsIGwgPSBw
        cm90b3R5cGVQcm9wZXJ0aWVzLmxlbmd0aDsgaSA8IGw7IGkrKykgewogICAg
        ICBrZXkgPSBwcm90b3R5cGVQcm9wZXJ0aWVzW2ldOwoKICAgICAgcHVzaFBy
        b3BlcnR5TmFtZShvYmosIHJldCwga2V5KTsKICAgIH0KCiAgICByZXR1cm4g
        cmV0OwogIH07Cn0KCn0pKCk7CgoKCihmdW5jdGlvbigpIHsKLyoqCkBtb2R1
        bGUgZW1iZXIKQHN1Ym1vZHVsZSBlbWJlci1ydW50aW1lCiovCgp2YXIgU1RS
        SU5HX0RBU0hFUklaRV9SRUdFWFAgPSAoL1sgX10vZyk7CnZhciBTVFJJTkdf
        REFTSEVSSVpFX0NBQ0hFID0ge307CnZhciBTVFJJTkdfREVDQU1FTElaRV9S
        RUdFWFAgPSAoLyhbYS16XGRdKShbQS1aXSkvZyk7CnZhciBTVFJJTkdfQ0FN
        RUxJWkVfUkVHRVhQID0gKC8oXC18X3xcLnxccykrKC4pPy9nKTsKdmFyIFNU
        UklOR19VTkRFUlNDT1JFX1JFR0VYUF8xID0gKC8oW2EtelxkXSkoW0EtWl0r
        KS9nKTsKdmFyIFNUUklOR19VTkRFUlNDT1JFX1JFR0VYUF8yID0gKC9cLXxc
        cysvZyk7CnZhciBTVFJJTkdfUEFSQU1FVEVSSVpFX1JFR0VYUF8xID0gKC9b
        X3xcL3xcc10rL2cpOwp2YXIgU1RSSU5HX1BBUkFNRVRFUklaRV9SRUdFWFBf
        MiA9ICgvW15hLXowLTlcLV0rL2dpKTsKdmFyIFNUUklOR19QQVJBTUVURVJJ
        WkVfUkVHRVhQXzMgPSAoL1tcLV0rL2cpOwp2YXIgU1RSSU5HX1BBUkFNRVRF
        UklaRV9SRUdFWFBfNCA9ICgvXi0rfC0rJC9nKTsKCi8qKgogIERlZmluZXMg
        dGhlIGhhc2ggb2YgbG9jYWxpemVkIHN0cmluZ3MgZm9yIHRoZSBjdXJyZW50
        IGxhbmd1YWdlLiBVc2VkIGJ5CiAgdGhlIGBFbWJlci5TdHJpbmcubG9jKClg
        IGhlbHBlci4gVG8gbG9jYWxpemUsIGFkZCBzdHJpbmcgdmFsdWVzIHRvIHRo
        aXMKICBoYXNoLgoKICBAcHJvcGVydHkgU1RSSU5HUwogIEBmb3IgRW1iZXIK
        ICBAdHlwZSBIYXNoCiovCkVtYmVyLlNUUklOR1MgPSB7fTsKCi8qKgogIERl
        ZmluZXMgc3RyaW5nIGhlbHBlciBtZXRob2RzIGluY2x1ZGluZyBzdHJpbmcg
        Zm9ybWF0dGluZyBhbmQgbG9jYWxpemF0aW9uLgogIFVubGVzcyBgRW1iZXIu
        RVhURU5EX1BST1RPVFlQRVMuU3RyaW5nYCBpcyBgZmFsc2VgIHRoZXNlIG1l
        dGhvZHMgd2lsbCBhbHNvIGJlCiAgYWRkZWQgdG8gdGhlIGBTdHJpbmcucHJv
        dG90eXBlYCBhcyB3ZWxsLgoKICBAY2xhc3MgU3RyaW5nCiAgQG5hbWVzcGFj
        ZSBFbWJlcgogIEBzdGF0aWMKKi8KRW1iZXIuU3RyaW5nID0gewoKICAvKioK
        ICAgIEFwcGx5IGZvcm1hdHRpbmcgb3B0aW9ucyB0byB0aGUgc3RyaW5nLiBU
        aGlzIHdpbGwgbG9vayBmb3Igb2NjdXJyZW5jZXMKICAgIG9mICIlQCIgaW4g
        eW91ciBzdHJpbmcgYW5kIHN1YnN0aXR1dGUgdGhlbSB3aXRoIHRoZSBhcmd1
        bWVudHMgeW91IHBhc3MgaW50bwogICAgdGhpcyBtZXRob2QuIElmIHlvdSB3
        YW50IHRvIGNvbnRyb2wgdGhlIHNwZWNpZmljIG9yZGVyIG9mIHJlcGxhY2Vt
        ZW50LAogICAgeW91IGNhbiBhZGQgYSBudW1iZXIgYWZ0ZXIgdGhlIGtleSBh
        cyB3ZWxsIHRvIGluZGljYXRlIHdoaWNoIGFyZ3VtZW50CiAgICB5b3Ugd2Fu
        dCB0byBpbnNlcnQuCgogICAgT3JkZXJlZCBpbnNlcnRpb25zIGFyZSBtb3N0
        IHVzZWZ1bCB3aGVuIGJ1aWxkaW5nIGxvYyBzdHJpbmdzIHdoZXJlIHZhbHVl
        cwogICAgeW91IG5lZWQgdG8gaW5zZXJ0IG1heSBhcHBlYXIgaW4gZGlmZmVy
        ZW50IG9yZGVycy4KCiAgICBgYGBqYXZhc2NyaXB0CiAgICAiSGVsbG8gJUAg
        JUAiLmZtdCgnSm9obicsICdEb2UnKTsgICAgIC8vICJIZWxsbyBKb2huIERv
        ZSIKICAgICJIZWxsbyAlQDIsICVAMSIuZm10KCdKb2huJywgJ0RvZScpOyAg
        Ly8gIkhlbGxvIERvZSwgSm9obiIKICAgIGBgYAoKICAgIEBtZXRob2QgZm10
        CiAgICBAcGFyYW0ge1N0cmluZ30gc3RyIFRoZSBzdHJpbmcgdG8gZm9ybWF0
        CiAgICBAcGFyYW0ge0FycmF5fSBmb3JtYXRzIEFuIGFycmF5IG9mIHBhcmFt
        ZXRlcnMgdG8gaW50ZXJwb2xhdGUgaW50byBzdHJpbmcuCiAgICBAcmV0dXJu
        IHtTdHJpbmd9IGZvcm1hdHRlZCBzdHJpbmcKICAqLwogIGZtdDogZnVuY3Rp
        b24oc3RyLCBmb3JtYXRzKSB7CiAgICAvLyBmaXJzdCwgcmVwbGFjZSBhbnkg
        T1JERVJFRCByZXBsYWNlbWVudHMuCiAgICB2YXIgaWR4ICA9IDA7IC8vIHRo
        ZSBjdXJyZW50IGluZGV4IGZvciBub24tbnVtZXJpY2FsIHJlcGxhY2VtZW50
        cwogICAgcmV0dXJuIHN0ci5yZXBsYWNlKC8lQChbMC05XSspPy9nLCBmdW5j
        dGlvbihzLCBhcmdJbmRleCkgewogICAgICBhcmdJbmRleCA9IChhcmdJbmRl
        eCkgPyBwYXJzZUludChhcmdJbmRleCwgMTApIC0gMSA6IGlkeCsrOwogICAg
        ICBzID0gZm9ybWF0c1thcmdJbmRleF07CiAgICAgIHJldHVybiAocyA9PT0g
        bnVsbCkgPyAnKG51bGwpJyA6IChzID09PSB1bmRlZmluZWQpID8gJycgOiBF
        bWJlci5pbnNwZWN0KHMpOwogICAgfSkgOwogIH0sCgogIC8qKgogICAgRm9y
        bWF0cyB0aGUgcGFzc2VkIHN0cmluZywgYnV0IGZpcnN0IGxvb2tzIHVwIHRo
        ZSBzdHJpbmcgaW4gdGhlIGxvY2FsaXplZAogICAgc3RyaW5ncyBoYXNoLiBU
        aGlzIGlzIGEgY29udmVuaWVudCB3YXkgdG8gbG9jYWxpemUgdGV4dC4gU2Vl
        CiAgICBgRW1iZXIuU3RyaW5nLmZtdCgpYCBmb3IgbW9yZSBpbmZvcm1hdGlv
        biBvbiBmb3JtYXR0aW5nLgoKICAgIE5vdGUgdGhhdCBpdCBpcyB0cmFkaXRp
        b25hbCBidXQgbm90IHJlcXVpcmVkIHRvIHByZWZpeCBsb2NhbGl6ZWQgc3Ry
        aW5nCiAgICBrZXlzIHdpdGggYW4gdW5kZXJzY29yZSBvciBvdGhlciBjaGFy
        YWN0ZXIgc28geW91IGNhbiBlYXNpbHkgaWRlbnRpZnkKICAgIGxvY2FsaXpl
        ZCBzdHJpbmdzLgoKICAgIGBgYGphdmFzY3JpcHQKICAgIEVtYmVyLlNUUklO
        R1MgPSB7CiAgICAgICdfSGVsbG8gV29ybGQnOiAnQm9uam91ciBsZSBtb25k
        ZScsCiAgICAgICdfSGVsbG8gJUAgJUAnOiAnQm9uam91ciAlQCAlQCcKICAg
        IH07CgogICAgRW1iZXIuU3RyaW5nLmxvYygiX0hlbGxvIFdvcmxkIik7ICAv
        LyAnQm9uam91ciBsZSBtb25kZSc7CiAgICBFbWJlci5TdHJpbmcubG9jKCJf
        SGVsbG8gJUAgJUAiLCBbIkpvaG4iLCAiU21pdGgiXSk7ICAvLyAiQm9uam91
        ciBKb2huIFNtaXRoIjsKICAgIGBgYAoKICAgIEBtZXRob2QgbG9jCiAgICBA
        cGFyYW0ge1N0cmluZ30gc3RyIFRoZSBzdHJpbmcgdG8gZm9ybWF0CiAgICBA
        cGFyYW0ge0FycmF5fSBmb3JtYXRzIE9wdGlvbmFsIGFycmF5IG9mIHBhcmFt
        ZXRlcnMgdG8gaW50ZXJwb2xhdGUgaW50byBzdHJpbmcuCiAgICBAcmV0dXJu
        IHtTdHJpbmd9IGZvcm1hdHRlZCBzdHJpbmcKICAqLwogIGxvYzogZnVuY3Rp
        b24oc3RyLCBmb3JtYXRzKSB7CiAgICBzdHIgPSBFbWJlci5TVFJJTkdTW3N0
        cl0gfHwgc3RyOwogICAgcmV0dXJuIEVtYmVyLlN0cmluZy5mbXQoc3RyLCBm
        b3JtYXRzKSA7CiAgfSwKCiAgLyoqCiAgICBTcGxpdHMgYSBzdHJpbmcgaW50
        byBzZXBhcmF0ZSB1bml0cyBzZXBhcmF0ZWQgYnkgc3BhY2VzLCBlbGltaW5h
        dGluZyBhbnkKICAgIGVtcHR5IHN0cmluZ3MgaW4gdGhlIHByb2Nlc3MuIFRo
        aXMgaXMgYSBjb252ZW5pZW5jZSBtZXRob2QgZm9yIHNwbGl0IHRoYXQKICAg
        IGlzIG1vc3RseSB1c2VmdWwgd2hlbiBhcHBsaWVkIHRvIHRoZSBgU3RyaW5n
        LnByb3RvdHlwZWAuCgogICAgYGBgamF2YXNjcmlwdAogICAgRW1iZXIuU3Ry
        aW5nLncoImFscGhhIGJldGEgZ2FtbWEiKS5mb3JFYWNoKGZ1bmN0aW9uKGtl
        eSkgewogICAgICBjb25zb2xlLmxvZyhrZXkpOwogICAgfSk7CgogICAgLy8g
        PiBhbHBoYQogICAgLy8gPiBiZXRhCiAgICAvLyA+IGdhbW1hCiAgICBgYGAK
        CiAgICBAbWV0aG9kIHcKICAgIEBwYXJhbSB7U3RyaW5nfSBzdHIgVGhlIHN0
        cmluZyB0byBzcGxpdAogICAgQHJldHVybiB7U3RyaW5nfSBzcGxpdCBzdHJp
        bmcKICAqLwogIHc6IGZ1bmN0aW9uKHN0cikgeyByZXR1cm4gc3RyLnNwbGl0
        KC9ccysvKTsgfSwKCiAgLyoqCiAgICBDb252ZXJ0cyBhIGNhbWVsaXplZCBz
        dHJpbmcgaW50byBhbGwgbG93ZXIgY2FzZSBzZXBhcmF0ZWQgYnkgdW5kZXJz
        Y29yZXMuCgogICAgYGBgamF2YXNjcmlwdAogICAgJ2lubmVySFRNTCcuZGVj
        YW1lbGl6ZSgpOyAgICAgICAgICAgLy8gJ2lubmVyX2h0bWwnCiAgICAnYWN0
        aW9uX25hbWUnLmRlY2FtZWxpemUoKTsgICAgICAgIC8vICdhY3Rpb25fbmFt
        ZScKICAgICdjc3MtY2xhc3MtbmFtZScuZGVjYW1lbGl6ZSgpOyAgICAgLy8g
        J2Nzcy1jbGFzcy1uYW1lJwogICAgJ215IGZhdm9yaXRlIGl0ZW1zJy5kZWNh
        bWVsaXplKCk7ICAvLyAnbXkgZmF2b3JpdGUgaXRlbXMnCiAgICBgYGAKCiAg
        ICBAbWV0aG9kIGRlY2FtZWxpemUKICAgIEBwYXJhbSB7U3RyaW5nfSBzdHIg
        VGhlIHN0cmluZyB0byBkZWNhbWVsaXplLgogICAgQHJldHVybiB7U3RyaW5n
        fSB0aGUgZGVjYW1lbGl6ZWQgc3RyaW5nLgogICovCiAgZGVjYW1lbGl6ZTog
        ZnVuY3Rpb24oc3RyKSB7CiAgICByZXR1cm4gc3RyLnJlcGxhY2UoU1RSSU5H
        X0RFQ0FNRUxJWkVfUkVHRVhQLCAnJDFfJDInKS50b0xvd2VyQ2FzZSgpOwog
        IH0sCgogIC8qKgogICAgUmVwbGFjZXMgdW5kZXJzY29yZXMsIHNwYWNlcywg
        b3IgY2FtZWxDYXNlIHdpdGggZGFzaGVzLgoKICAgIGBgYGphdmFzY3JpcHQK
        ICAgICdpbm5lckhUTUwnLmRhc2hlcml6ZSgpOyAgICAgICAgICAvLyAnaW5u
        ZXItaHRtbCcKICAgICdhY3Rpb25fbmFtZScuZGFzaGVyaXplKCk7ICAgICAg
        ICAvLyAnYWN0aW9uLW5hbWUnCiAgICAnY3NzLWNsYXNzLW5hbWUnLmRhc2hl
        cml6ZSgpOyAgICAgLy8gJ2Nzcy1jbGFzcy1uYW1lJwogICAgJ215IGZhdm9y
        aXRlIGl0ZW1zJy5kYXNoZXJpemUoKTsgIC8vICdteS1mYXZvcml0ZS1pdGVt
        cycKICAgIGBgYAoKICAgIEBtZXRob2QgZGFzaGVyaXplCiAgICBAcGFyYW0g
        e1N0cmluZ30gc3RyIFRoZSBzdHJpbmcgdG8gZGFzaGVyaXplLgogICAgQHJl
        dHVybiB7U3RyaW5nfSB0aGUgZGFzaGVyaXplZCBzdHJpbmcuCiAgKi8KICBk
        YXNoZXJpemU6IGZ1bmN0aW9uKHN0cikgewogICAgdmFyIGNhY2hlID0gU1RS
        SU5HX0RBU0hFUklaRV9DQUNIRSwKICAgICAgICBoaXQgICA9IGNhY2hlLmhh
        c093blByb3BlcnR5KHN0ciksCiAgICAgICAgcmV0OwoKICAgIGlmIChoaXQp
        IHsKICAgICAgcmV0dXJuIGNhY2hlW3N0cl07CiAgICB9IGVsc2UgewogICAg
        ICByZXQgPSBFbWJlci5TdHJpbmcuZGVjYW1lbGl6ZShzdHIpLnJlcGxhY2Uo
        U1RSSU5HX0RBU0hFUklaRV9SRUdFWFAsJy0nKTsKICAgICAgY2FjaGVbc3Ry
        XSA9IHJldDsKICAgIH0KCiAgICByZXR1cm4gcmV0OwogIH0sCgogIC8qKgog
        ICAgUmV0dXJucyB0aGUgbG93ZXJDYW1lbENhc2UgZm9ybSBvZiBhIHN0cmlu
        Zy4KCiAgICBgYGBqYXZhc2NyaXB0CiAgICAnaW5uZXJIVE1MJy5jYW1lbGl6
        ZSgpOyAgICAgICAgICAvLyAnaW5uZXJIVE1MJwogICAgJ2FjdGlvbl9uYW1l
        Jy5jYW1lbGl6ZSgpOyAgICAgICAgLy8gJ2FjdGlvbk5hbWUnCiAgICAnY3Nz
        LWNsYXNzLW5hbWUnLmNhbWVsaXplKCk7ICAgICAvLyAnY3NzQ2xhc3NOYW1l
        JwogICAgJ215IGZhdm9yaXRlIGl0ZW1zJy5jYW1lbGl6ZSgpOyAgLy8gJ215
        RmF2b3JpdGVJdGVtcycKICAgICdNeSBGYXZvcml0ZSBJdGVtcycuY2FtZWxp
        emUoKTsgIC8vICdteUZhdm9yaXRlSXRlbXMnCiAgICBgYGAKCiAgICBAbWV0
        aG9kIGNhbWVsaXplCiAgICBAcGFyYW0ge1N0cmluZ30gc3RyIFRoZSBzdHJp
        bmcgdG8gY2FtZWxpemUuCiAgICBAcmV0dXJuIHtTdHJpbmd9IHRoZSBjYW1l
        bGl6ZWQgc3RyaW5nLgogICovCiAgY2FtZWxpemU6IGZ1bmN0aW9uKHN0cikg
        ewogICAgcmV0dXJuIHN0ci5yZXBsYWNlKFNUUklOR19DQU1FTElaRV9SRUdF
        WFAsIGZ1bmN0aW9uKG1hdGNoLCBzZXBhcmF0b3IsIGNocikgewogICAgICBy
        ZXR1cm4gY2hyID8gY2hyLnRvVXBwZXJDYXNlKCkgOiAnJzsKICAgIH0pLnJl
        cGxhY2UoL14oW0EtWl0pLywgZnVuY3Rpb24obWF0Y2gsIHNlcGFyYXRvciwg
        Y2hyKSB7CiAgICAgIHJldHVybiBtYXRjaC50b0xvd2VyQ2FzZSgpOwogICAg
        fSk7CiAgfSwKCiAgLyoqCiAgICBSZXR1cm5zIHRoZSBVcHBlckNhbWVsQ2Fz
        ZSBmb3JtIG9mIGEgc3RyaW5nLgoKICAgIGBgYGphdmFzY3JpcHQKICAgICdp
        bm5lckhUTUwnLmNsYXNzaWZ5KCk7ICAgICAgICAgIC8vICdJbm5lckhUTUwn
        CiAgICAnYWN0aW9uX25hbWUnLmNsYXNzaWZ5KCk7ICAgICAgICAvLyAnQWN0
        aW9uTmFtZScKICAgICdjc3MtY2xhc3MtbmFtZScuY2xhc3NpZnkoKTsgICAg
        IC8vICdDc3NDbGFzc05hbWUnCiAgICAnbXkgZmF2b3JpdGUgaXRlbXMnLmNs
        YXNzaWZ5KCk7ICAvLyAnTXlGYXZvcml0ZUl0ZW1zJwogICAgYGBgCgogICAg
        QG1ldGhvZCBjbGFzc2lmeQogICAgQHBhcmFtIHtTdHJpbmd9IHN0ciB0aGUg
        c3RyaW5nIHRvIGNsYXNzaWZ5CiAgICBAcmV0dXJuIHtTdHJpbmd9IHRoZSBj
        bGFzc2lmaWVkIHN0cmluZwogICovCiAgY2xhc3NpZnk6IGZ1bmN0aW9uKHN0
        cikgewogICAgdmFyIHBhcnRzID0gc3RyLnNwbGl0KCIuIiksCiAgICAgICAg
        b3V0ID0gW107CgogICAgZm9yICh2YXIgaT0wLCBsPXBhcnRzLmxlbmd0aDsg
        aTxsOyBpKyspIHsKICAgICAgdmFyIGNhbWVsaXplZCA9IEVtYmVyLlN0cmlu
        Zy5jYW1lbGl6ZShwYXJ0c1tpXSk7CiAgICAgIG91dC5wdXNoKGNhbWVsaXpl
        ZC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIGNhbWVsaXplZC5zdWJzdHIo
        MSkpOwogICAgfQoKICAgIHJldHVybiBvdXQuam9pbigiLiIpOwogIH0sCgog
        IC8qKgogICAgTW9yZSBnZW5lcmFsIHRoYW4gZGVjYW1lbGl6ZS4gUmV0dXJu
        cyB0aGUgbG93ZXJcX2Nhc2VcX2FuZFxfdW5kZXJzY29yZWQKICAgIGZvcm0g
        b2YgYSBzdHJpbmcuCgogICAgYGBgamF2YXNjcmlwdAogICAgJ2lubmVySFRN
        TCcudW5kZXJzY29yZSgpOyAgICAgICAgICAvLyAnaW5uZXJfaHRtbCcKICAg
        ICdhY3Rpb25fbmFtZScudW5kZXJzY29yZSgpOyAgICAgICAgLy8gJ2FjdGlv
        bl9uYW1lJwogICAgJ2Nzcy1jbGFzcy1uYW1lJy51bmRlcnNjb3JlKCk7ICAg
        ICAvLyAnY3NzX2NsYXNzX25hbWUnCiAgICAnbXkgZmF2b3JpdGUgaXRlbXMn
        LnVuZGVyc2NvcmUoKTsgIC8vICdteV9mYXZvcml0ZV9pdGVtcycKICAgIGBg
        YAoKICAgIEBtZXRob2QgdW5kZXJzY29yZQogICAgQHBhcmFtIHtTdHJpbmd9
        IHN0ciBUaGUgc3RyaW5nIHRvIHVuZGVyc2NvcmUuCiAgICBAcmV0dXJuIHtT
        dHJpbmd9IHRoZSB1bmRlcnNjb3JlZCBzdHJpbmcuCiAgKi8KICB1bmRlcnNj
        b3JlOiBmdW5jdGlvbihzdHIpIHsKICAgIHJldHVybiBzdHIucmVwbGFjZShT
        VFJJTkdfVU5ERVJTQ09SRV9SRUdFWFBfMSwgJyQxXyQyJykuCiAgICAgIHJl
        cGxhY2UoU1RSSU5HX1VOREVSU0NPUkVfUkVHRVhQXzIsICdfJykudG9Mb3dl
        ckNhc2UoKTsKICB9LAoKICAvKioKICAgIFJldHVybnMgdGhlIENhcGl0YWxp
        emVkIGZvcm0gb2YgYSBzdHJpbmcKCiAgICBgYGBqYXZhc2NyaXB0CiAgICAn
        aW5uZXJIVE1MJy5jYXBpdGFsaXplKCkgICAgICAgICAvLyAnSW5uZXJIVE1M
        JwogICAgJ2FjdGlvbl9uYW1lJy5jYXBpdGFsaXplKCkgICAgICAgLy8gJ0Fj
        dGlvbl9uYW1lJwogICAgJ2Nzcy1jbGFzcy1uYW1lJy5jYXBpdGFsaXplKCkg
        ICAgLy8gJ0Nzcy1jbGFzcy1uYW1lJwogICAgJ215IGZhdm9yaXRlIGl0ZW1z
        Jy5jYXBpdGFsaXplKCkgLy8gJ015IGZhdm9yaXRlIGl0ZW1zJwogICAgYGBg
        CgogICAgQG1ldGhvZCBjYXBpdGFsaXplCiAgICBAcGFyYW0ge1N0cmluZ30g
        c3RyIFRoZSBzdHJpbmcgdG8gY2FwaXRhbGl6ZS4KICAgIEByZXR1cm4ge1N0
        cmluZ30gVGhlIGNhcGl0YWxpemVkIHN0cmluZy4KICAqLwogIGNhcGl0YWxp
        emU6IGZ1bmN0aW9uKHN0cikgewogICAgcmV0dXJuIHN0ci5jaGFyQXQoMCku
        dG9VcHBlckNhc2UoKSArIHN0ci5zdWJzdHIoMSk7CiAgfQp9OwoKCgp9KSgp
        OwoKCgooZnVuY3Rpb24oKSB7Ci8qKgpAbW9kdWxlIGVtYmVyCkBzdWJtb2R1
        bGUgZW1iZXItcnVudGltZQoqLwoKCgp2YXIgZm10ID0gRW1iZXIuU3RyaW5n
        LmZtdCwKICAgIHcgICA9IEVtYmVyLlN0cmluZy53LAogICAgbG9jID0gRW1i
        ZXIuU3RyaW5nLmxvYywKICAgIGNhbWVsaXplID0gRW1iZXIuU3RyaW5nLmNh
        bWVsaXplLAogICAgZGVjYW1lbGl6ZSA9IEVtYmVyLlN0cmluZy5kZWNhbWVs
        aXplLAogICAgZGFzaGVyaXplID0gRW1iZXIuU3RyaW5nLmRhc2hlcml6ZSwK
        ICAgIHVuZGVyc2NvcmUgPSBFbWJlci5TdHJpbmcudW5kZXJzY29yZSwKICAg
        IGNhcGl0YWxpemUgPSBFbWJlci5TdHJpbmcuY2FwaXRhbGl6ZSwKICAgIGNs
        YXNzaWZ5ID0gRW1iZXIuU3RyaW5nLmNsYXNzaWZ5OwoKCmlmIChFbWJlci5F
        WFRFTkRfUFJPVE9UWVBFUyA9PT0gdHJ1ZSB8fCBFbWJlci5FWFRFTkRfUFJP
        VE9UWVBFUy5TdHJpbmcpIHsKCiAgLyoqCiAgICBTZWUgW0VtYmVyLlN0cmlu
        Zy5mbXRdKC9hcGkvY2xhc3Nlcy9FbWJlci5TdHJpbmcuaHRtbCNtZXRob2Rf
        Zm10KS4KCiAgICBAbWV0aG9kIGZtdAogICAgQGZvciBTdHJpbmcKICAqLwog
        IFN0cmluZy5wcm90b3R5cGUuZm10ID0gZnVuY3Rpb24oKSB7CiAgICByZXR1
        cm4gZm10KHRoaXMsIGFyZ3VtZW50cyk7CiAgfTsKCiAgLyoqCiAgICBTZWUg
        W0VtYmVyLlN0cmluZy53XSgvYXBpL2NsYXNzZXMvRW1iZXIuU3RyaW5nLmh0
        bWwjbWV0aG9kX3cpLgoKICAgIEBtZXRob2QgdwogICAgQGZvciBTdHJpbmcK
        ICAqLwogIFN0cmluZy5wcm90b3R5cGUudyA9IGZ1bmN0aW9uKCkgewogICAg
        cmV0dXJuIHcodGhpcyk7CiAgfTsKCiAgLyoqCiAgICBTZWUgW0VtYmVyLlN0
        cmluZy5sb2NdKC9hcGkvY2xhc3Nlcy9FbWJlci5TdHJpbmcuaHRtbCNtZXRo
        b2RfbG9jKS4KCiAgICBAbWV0aG9kIGxvYwogICAgQGZvciBTdHJpbmcKICAq
        LwogIFN0cmluZy5wcm90b3R5cGUubG9jID0gZnVuY3Rpb24oKSB7CiAgICBy
        ZXR1cm4gbG9jKHRoaXMsIGFyZ3VtZW50cyk7CiAgfTsKCiAgLyoqCiAgICBT
        ZWUgW0VtYmVyLlN0cmluZy5jYW1lbGl6ZV0oL2FwaS9jbGFzc2VzL0VtYmVy
        LlN0cmluZy5odG1sI21ldGhvZF9jYW1lbGl6ZSkuCgogICAgQG1ldGhvZCBj
        YW1lbGl6ZQogICAgQGZvciBTdHJpbmcKICAqLwogIFN0cmluZy5wcm90b3R5
        cGUuY2FtZWxpemUgPSBmdW5jdGlvbigpIHsKICAgIHJldHVybiBjYW1lbGl6
        ZSh0aGlzKTsKICB9OwoKICAvKioKICAgIFNlZSBbRW1iZXIuU3RyaW5nLmRl
        Y2FtZWxpemVdKC9hcGkvY2xhc3Nlcy9FbWJlci5TdHJpbmcuaHRtbCNtZXRo
        b2RfZGVjYW1lbGl6ZSkuCgogICAgQG1ldGhvZCBkZWNhbWVsaXplCiAgICBA
        Zm9yIFN0cmluZwogICovCiAgU3RyaW5nLnByb3RvdHlwZS5kZWNhbWVsaXpl
        ID0gZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gZGVjYW1lbGl6ZSh0aGlzKTsK
        ICB9OwoKICAvKioKICAgIFNlZSBbRW1iZXIuU3RyaW5nLmRhc2hlcml6ZV0o
        L2FwaS9jbGFzc2VzL0VtYmVyLlN0cmluZy5odG1sI21ldGhvZF9kYXNoZXJp
        emUpLgoKICAgIEBtZXRob2QgZGFzaGVyaXplCiAgICBAZm9yIFN0cmluZwog
        ICovCiAgU3RyaW5nLnByb3RvdHlwZS5kYXNoZXJpemUgPSBmdW5jdGlvbigp
        IHsKICAgIHJldHVybiBkYXNoZXJpemUodGhpcyk7CiAgfTsKCiAgLyoqCiAg
        ICBTZWUgW0VtYmVyLlN0cmluZy51bmRlcnNjb3JlXSgvYXBpL2NsYXNzZXMv
        RW1iZXIuU3RyaW5nLmh0bWwjbWV0aG9kX3VuZGVyc2NvcmUpLgoKICAgIEBt
        ZXRob2QgdW5kZXJzY29yZQogICAgQGZvciBTdHJpbmcKICAqLwogIFN0cmlu
        Zy5wcm90b3R5cGUudW5kZXJzY29yZSA9IGZ1bmN0aW9uKCkgewogICAgcmV0
        dXJuIHVuZGVyc2NvcmUodGhpcyk7CiAgfTsKCiAgLyoqCiAgICBTZWUgW0Vt
        YmVyLlN0cmluZy5jbGFzc2lmeV0oL2FwaS9jbGFzc2VzL0VtYmVyLlN0cmlu
        Zy5odG1sI21ldGhvZF9jbGFzc2lmeSkuCgogICAgQG1ldGhvZCBjbGFzc2lm
        eQogICAgQGZvciBTdHJpbmcKICAqLwogIFN0cmluZy5wcm90b3R5cGUuY2xh
        c3NpZnkgPSBmdW5jdGlvbigpIHsKICAgIHJldHVybiBjbGFzc2lmeSh0aGlz
        KTsKICB9OwoKICAvKioKICAgIFNlZSBbRW1iZXIuU3RyaW5nLmNhcGl0YWxp
        emVdKC9hcGkvY2xhc3Nlcy9FbWJlci5TdHJpbmcuaHRtbCNtZXRob2RfY2Fw
        aXRhbGl6ZSkuCgogICAgQG1ldGhvZCBjYXBpdGFsaXplCiAgICBAZm9yIFN0
        cmluZwogICovCiAgU3RyaW5nLnByb3RvdHlwZS5jYXBpdGFsaXplID0gZnVu
        Y3Rpb24oKSB7CiAgICByZXR1cm4gY2FwaXRhbGl6ZSh0aGlzKTsKICB9OwoK
        ICAKfQoKCn0pKCk7CgoKCihmdW5jdGlvbigpIHsKLyoqCkBtb2R1bGUgZW1i
        ZXIKQHN1Ym1vZHVsZSBlbWJlci1ydW50aW1lCiovCgp2YXIgZ2V0ID0gRW1i
        ZXIuZ2V0LAogICAgc2V0ID0gRW1iZXIuc2V0LAogICAgc2xpY2UgPSBBcnJh
        eS5wcm90b3R5cGUuc2xpY2UsCiAgICBnZXRQcm9wZXJ0aWVzID0gRW1iZXIu
        Z2V0UHJvcGVydGllczsKCi8qKgogICMjIE92ZXJ2aWV3CgogIFRoaXMgbWl4
        aW4gcHJvdmlkZXMgcHJvcGVydGllcyBhbmQgcHJvcGVydHkgb2JzZXJ2aW5n
        IGZ1bmN0aW9uYWxpdHksIGNvcmUKICBmZWF0dXJlcyBvZiB0aGUgRW1iZXIg
        b2JqZWN0IG1vZGVsLgoKICBQcm9wZXJ0aWVzIGFuZCBvYnNlcnZlcnMgYWxs
        b3cgb25lIG9iamVjdCB0byBvYnNlcnZlIGNoYW5nZXMgdG8gYQogIHByb3Bl
        cnR5IG9uIGFub3RoZXIgb2JqZWN0LiBUaGlzIGlzIG9uZSBvZiB0aGUgZnVu
        ZGFtZW50YWwgd2F5cyB0aGF0CiAgbW9kZWxzLCBjb250cm9sbGVycyBhbmQg
        dmlld3MgY29tbXVuaWNhdGUgd2l0aCBlYWNoIG90aGVyIGluIGFuIEVtYmVy
        CiAgYXBwbGljYXRpb24uCgogIEFueSBvYmplY3QgdGhhdCBoYXMgdGhpcyBt
        aXhpbiBhcHBsaWVkIGNhbiBiZSB1c2VkIGluIG9ic2VydmVyCiAgb3BlcmF0
        aW9ucy4gVGhhdCBpbmNsdWRlcyBgRW1iZXIuT2JqZWN0YCBhbmQgbW9zdCBv
        YmplY3RzIHlvdSB3aWxsCiAgaW50ZXJhY3Qgd2l0aCBhcyB5b3Ugd3JpdGUg
        eW91ciBFbWJlciBhcHBsaWNhdGlvbi4KCiAgTm90ZSB0aGF0IHlvdSB3aWxs
        IG5vdCBnZW5lcmFsbHkgYXBwbHkgdGhpcyBtaXhpbiB0byBjbGFzc2VzIHlv
        dXJzZWxmLAogIGJ1dCB5b3Ugd2lsbCB1c2UgdGhlIGZlYXR1cmVzIHByb3Zp
        ZGVkIGJ5IHRoaXMgbW9kdWxlIGZyZXF1ZW50bHksIHNvIGl0CiAgaXMgaW1w
        b3J0YW50IHRvIHVuZGVyc3RhbmQgaG93IHRvIHVzZSBpdC4KCiAgIyMgVXNp
        bmcgYGdldCgpYCBhbmQgYHNldCgpYAoKICBCZWNhdXNlIG9mIEVtYmVyJ3Mg
        c3VwcG9ydCBmb3IgYmluZGluZ3MgYW5kIG9ic2VydmVycywgeW91IHdpbGwg
        YWx3YXlzCiAgYWNjZXNzIHByb3BlcnRpZXMgdXNpbmcgdGhlIGdldCBtZXRo
        b2QsIGFuZCBzZXQgcHJvcGVydGllcyB1c2luZyB0aGUKICBzZXQgbWV0aG9k
        LiBUaGlzIGFsbG93cyB0aGUgb2JzZXJ2aW5nIG9iamVjdHMgdG8gYmUgbm90
        aWZpZWQgYW5kCiAgY29tcHV0ZWQgcHJvcGVydGllcyB0byBiZSBoYW5kbGVk
        IHByb3Blcmx5LgoKICBNb3JlIGRvY3VtZW50YXRpb24gYWJvdXQgYGdldGAg
        YW5kIGBzZXRgIGFyZSBiZWxvdy4KCiAgIyMgT2JzZXJ2aW5nIFByb3BlcnR5
        IENoYW5nZXMKCiAgWW91IHR5cGljYWxseSBvYnNlcnZlIHByb3BlcnR5IGNo
        YW5nZXMgc2ltcGx5IGJ5IGFkZGluZyB0aGUgYG9ic2VydmVzYAogIGNhbGwg
        dG8gdGhlIGVuZCBvZiB5b3VyIG1ldGhvZCBkZWNsYXJhdGlvbnMgaW4gY2xh
        c3NlcyB0aGF0IHlvdSB3cml0ZS4KICBGb3IgZXhhbXBsZToKCiAgYGBgamF2
        YXNjcmlwdAogIEVtYmVyLk9iamVjdC5leHRlbmQoewogICAgdmFsdWVPYnNl
        cnZlcjogZnVuY3Rpb24oKSB7CiAgICAgIC8vIEV4ZWN1dGVzIHdoZW5ldmVy
        IHRoZSAidmFsdWUiIHByb3BlcnR5IGNoYW5nZXMKICAgIH0ub2JzZXJ2ZXMo
        J3ZhbHVlJykKICB9KTsKICBgYGAKCiAgQWx0aG91Z2ggdGhpcyBpcyB0aGUg
        bW9zdCBjb21tb24gd2F5IHRvIGFkZCBhbiBvYnNlcnZlciwgdGhpcyBjYXBh
        YmlsaXR5CiAgaXMgYWN0dWFsbHkgYnVpbHQgaW50byB0aGUgYEVtYmVyLk9i
        amVjdGAgY2xhc3Mgb24gdG9wIG9mIHR3byBtZXRob2RzCiAgZGVmaW5lZCBp
        biB0aGlzIG1peGluOiBgYWRkT2JzZXJ2ZXJgIGFuZCBgcmVtb3ZlT2JzZXJ2
        ZXJgLiBZb3UgY2FuIHVzZQogIHRoZXNlIHR3byBtZXRob2RzIHRvIGFkZCBh
        bmQgcmVtb3ZlIG9ic2VydmVycyB5b3Vyc2VsZiBpZiB5b3UgbmVlZCB0bwog
        IGRvIHNvIGF0IHJ1bnRpbWUuCgogIFRvIGFkZCBhbiBvYnNlcnZlciBmb3Ig
        YSBwcm9wZXJ0eSwgY2FsbDoKCiAgYGBgamF2YXNjcmlwdAogIG9iamVjdC5h
        ZGRPYnNlcnZlcigncHJvcGVydHlLZXknLCB0YXJnZXRPYmplY3QsIHRhcmdl
        dEFjdGlvbikKICBgYGAKCiAgVGhpcyB3aWxsIGNhbGwgdGhlIGB0YXJnZXRB
        Y3Rpb25gIG1ldGhvZCBvbiB0aGUgYHRhcmdldE9iamVjdGAgd2hlbmV2ZXIK
        ICB0aGUgdmFsdWUgb2YgdGhlIGBwcm9wZXJ0eUtleWAgY2hhbmdlcy4KCiAg
        Tm90ZSB0aGF0IGlmIGBwcm9wZXJ0eUtleWAgaXMgYSBjb21wdXRlZCBwcm9w
        ZXJ0eSwgdGhlIG9ic2VydmVyIHdpbGwgYmUKICBjYWxsZWQgd2hlbiBhbnkg
        b2YgdGhlIHByb3BlcnR5IGRlcGVuZGVuY2llcyBhcmUgY2hhbmdlZCwgZXZl
        biBpZiB0aGUKICByZXN1bHRpbmcgdmFsdWUgb2YgdGhlIGNvbXB1dGVkIHBy
        b3BlcnR5IGlzIHVuY2hhbmdlZC4gVGhpcyBpcyBuZWNlc3NhcnkKICBiZWNh
        dXNlIGNvbXB1dGVkIHByb3BlcnRpZXMgYXJlIG5vdCBjb21wdXRlZCB1bnRp
        bCBgZ2V0YCBpcyBjYWxsZWQuCgogIEBjbGFzcyBPYnNlcnZhYmxlCiAgQG5h
        bWVzcGFjZSBFbWJlcgoqLwpFbWJlci5PYnNlcnZhYmxlID0gRW1iZXIuTWl4
        aW4uY3JlYXRlKHsKCiAgLyoqCiAgICBSZXRyaWV2ZXMgdGhlIHZhbHVlIG9m
        IGEgcHJvcGVydHkgZnJvbSB0aGUgb2JqZWN0LgoKICAgIFRoaXMgbWV0aG9k
        IGlzIHVzdWFsbHkgc2ltaWxhciB0byB1c2luZyBgb2JqZWN0W2tleU5hbWVd
        YCBvciBgb2JqZWN0LmtleU5hbWVgLAogICAgaG93ZXZlciBpdCBzdXBwb3J0
        cyBib3RoIGNvbXB1dGVkIHByb3BlcnRpZXMgYW5kIHRoZSB1bmtub3duUHJv
        cGVydHkKICAgIGhhbmRsZXIuCgogICAgQmVjYXVzZSBgZ2V0YCB1bmlmaWVz
        IHRoZSBzeW50YXggZm9yIGFjY2Vzc2luZyBhbGwgdGhlc2Uga2luZHMKICAg
        IG9mIHByb3BlcnRpZXMsIGl0IGNhbiBtYWtlIG1hbnkgcmVmYWN0b3Jpbmdz
        IGVhc2llciwgc3VjaCBhcyByZXBsYWNpbmcgYQogICAgc2ltcGxlIHByb3Bl
        cnR5IHdpdGggYSBjb21wdXRlZCBwcm9wZXJ0eSwgb3IgdmljZSB2ZXJzYS4K
        CiAgICAjIyMgQ29tcHV0ZWQgUHJvcGVydGllcwoKICAgIENvbXB1dGVkIHBy
        b3BlcnRpZXMgYXJlIG1ldGhvZHMgZGVmaW5lZCB3aXRoIHRoZSBgcHJvcGVy
        dHlgIG1vZGlmaWVyCiAgICBkZWNsYXJlZCBhdCB0aGUgZW5kLCBzdWNoIGFz
        OgoKICAgIGBgYGphdmFzY3JpcHQKICAgIGZ1bGxOYW1lOiBmdW5jdGlvbigp
        IHsKICAgICAgcmV0dXJuIHRoaXMuZ2V0KCdmaXJzdE5hbWUnKSArICcgJyAr
        IHRoaXMuZ2V0KCdsYXN0TmFtZScpOwogICAgfS5wcm9wZXJ0eSgnZmlyc3RO
        YW1lJywgJ2xhc3ROYW1lJykKICAgIGBgYAoKICAgIFdoZW4geW91IGNhbGwg
        YGdldGAgb24gYSBjb21wdXRlZCBwcm9wZXJ0eSwgdGhlIGZ1bmN0aW9uIHdp
        bGwgYmUKICAgIGNhbGxlZCBhbmQgdGhlIHJldHVybiB2YWx1ZSB3aWxsIGJl
        IHJldHVybmVkIGluc3RlYWQgb2YgdGhlIGZ1bmN0aW9uCiAgICBpdHNlbGYu
        CgogICAgIyMjIFVua25vd24gUHJvcGVydGllcwoKICAgIExpa2V3aXNlLCBp
        ZiB5b3UgdHJ5IHRvIGNhbGwgYGdldGAgb24gYSBwcm9wZXJ0eSB3aG9zZSB2
        YWx1ZSBpcwogICAgYHVuZGVmaW5lZGAsIHRoZSBgdW5rbm93blByb3BlcnR5
        KClgIG1ldGhvZCB3aWxsIGJlIGNhbGxlZCBvbiB0aGUgb2JqZWN0LgogICAg
        SWYgdGhpcyBtZXRob2QgcmV0dXJucyBhbnkgdmFsdWUgb3RoZXIgdGhhbiBg
        dW5kZWZpbmVkYCwgaXQgd2lsbCBiZSByZXR1cm5lZAogICAgaW5zdGVhZC4g
        VGhpcyBhbGxvd3MgeW91IHRvIGltcGxlbWVudCAidmlydHVhbCIgcHJvcGVy
        dGllcyB0aGF0IGFyZQogICAgbm90IGRlZmluZWQgdXBmcm9udC4KCiAgICBA
        bWV0aG9kIGdldAogICAgQHBhcmFtIHtTdHJpbmd9IGtleU5hbWUgVGhlIHBy
        b3BlcnR5IHRvIHJldHJpZXZlCiAgICBAcmV0dXJuIHtPYmplY3R9IFRoZSBw
        cm9wZXJ0eSB2YWx1ZSBvciB1bmRlZmluZWQuCiAgKi8KICBnZXQ6IGZ1bmN0
        aW9uKGtleU5hbWUpIHsKICAgIHJldHVybiBnZXQodGhpcywga2V5TmFtZSk7
        CiAgfSwKCiAgLyoqCiAgICBUbyBnZXQgbXVsdGlwbGUgcHJvcGVydGllcyBh
        dCBvbmNlLCBjYWxsIGBnZXRQcm9wZXJ0aWVzYAogICAgd2l0aCBhIGxpc3Qg
        b2Ygc3RyaW5ncyBvciBhbiBhcnJheToKCiAgICBgYGBqYXZhc2NyaXB0CiAg
        ICByZWNvcmQuZ2V0UHJvcGVydGllcygnZmlyc3ROYW1lJywgJ2xhc3ROYW1l
        JywgJ3ppcENvZGUnKTsgIC8vIHsgZmlyc3ROYW1lOiAnSm9obicsIGxhc3RO
        YW1lOiAnRG9lJywgemlwQ29kZTogJzEwMDExJyB9CiAgICBgYGAKCiAgICBp
        cyBlcXVpdmFsZW50IHRvOgoKICAgIGBgYGphdmFzY3JpcHQKICAgIHJlY29y
        ZC5nZXRQcm9wZXJ0aWVzKFsnZmlyc3ROYW1lJywgJ2xhc3ROYW1lJywgJ3pp
        cENvZGUnXSk7ICAvLyB7IGZpcnN0TmFtZTogJ0pvaG4nLCBsYXN0TmFtZTog
        J0RvZScsIHppcENvZGU6ICcxMDAxMScgfQogICAgYGBgCgogICAgQG1ldGhv
        ZCBnZXRQcm9wZXJ0aWVzCiAgICBAcGFyYW0ge1N0cmluZy4uLnxBcnJheX0g
        bGlzdCBvZiBrZXlzIHRvIGdldAogICAgQHJldHVybiB7SGFzaH0KICAqLwog
        IGdldFByb3BlcnRpZXM6IGZ1bmN0aW9uKCkgewogICAgcmV0dXJuIGdldFBy
        b3BlcnRpZXMuYXBwbHkobnVsbCwgW3RoaXNdLmNvbmNhdChzbGljZS5jYWxs
        KGFyZ3VtZW50cykpKTsKICB9LAoKICAvKioKICAgIFNldHMgdGhlIHByb3Zp
        ZGVkIGtleSBvciBwYXRoIHRvIHRoZSB2YWx1ZS4KCiAgICBUaGlzIG1ldGhv
        ZCBpcyBnZW5lcmFsbHkgdmVyeSBzaW1pbGFyIHRvIGNhbGxpbmcgYG9iamVj
        dFtrZXldID0gdmFsdWVgIG9yCiAgICBgb2JqZWN0LmtleSA9IHZhbHVlYCwg
        ZXhjZXB0IHRoYXQgaXQgcHJvdmlkZXMgc3VwcG9ydCBmb3IgY29tcHV0ZWQK
        ICAgIHByb3BlcnRpZXMsIHRoZSBgc2V0VW5rbm93blByb3BlcnR5KClgIG1l
        dGhvZCBhbmQgcHJvcGVydHkgb2JzZXJ2ZXJzLgoKICAgICMjIyBDb21wdXRl
        ZCBQcm9wZXJ0aWVzCgogICAgSWYgeW91IHRyeSB0byBzZXQgYSB2YWx1ZSBv
        biBhIGtleSB0aGF0IGhhcyBhIGNvbXB1dGVkIHByb3BlcnR5IGhhbmRsZXIK
        ICAgIGRlZmluZWQgKHNlZSB0aGUgYGdldCgpYCBtZXRob2QgZm9yIGFuIGV4
        YW1wbGUpLCB0aGVuIGBzZXQoKWAgd2lsbCBjYWxsCiAgICB0aGF0IG1ldGhv
        ZCwgcGFzc2luZyBib3RoIHRoZSB2YWx1ZSBhbmQga2V5IGluc3RlYWQgb2Yg
        c2ltcGx5IGNoYW5naW5nCiAgICB0aGUgdmFsdWUgaXRzZWxmLiBUaGlzIGlz
        IHVzZWZ1bCBmb3IgdGhvc2UgdGltZXMgd2hlbiB5b3UgbmVlZCB0bwogICAg
        aW1wbGVtZW50IGEgcHJvcGVydHkgdGhhdCBpcyBjb21wb3NlZCBvZiBvbmUg
        b3IgbW9yZSBtZW1iZXIKICAgIHByb3BlcnRpZXMuCgogICAgIyMjIFVua25v
        d24gUHJvcGVydGllcwoKICAgIElmIHlvdSB0cnkgdG8gc2V0IGEgdmFsdWUg
        b24gYSBrZXkgdGhhdCBpcyB1bmRlZmluZWQgaW4gdGhlIHRhcmdldAogICAg
        b2JqZWN0LCB0aGVuIHRoZSBgc2V0VW5rbm93blByb3BlcnR5KClgIGhhbmRs
        ZXIgd2lsbCBiZSBjYWxsZWQgaW5zdGVhZC4gVGhpcwogICAgZ2l2ZXMgeW91
        IGFuIG9wcG9ydHVuaXR5IHRvIGltcGxlbWVudCBjb21wbGV4ICJ2aXJ0dWFs
        IiBwcm9wZXJ0aWVzIHRoYXQKICAgIGFyZSBub3QgcHJlZGVmaW5lZCBvbiB0
        aGUgb2JqZWN0LiBJZiBgc2V0VW5rbm93blByb3BlcnR5KClgIHJldHVybnMK
        ICAgIHVuZGVmaW5lZCwgdGhlbiBgc2V0KClgIHdpbGwgc2ltcGx5IHNldCB0
        aGUgdmFsdWUgb24gdGhlIG9iamVjdC4KCiAgICAjIyMgUHJvcGVydHkgT2Jz
        ZXJ2ZXJzCgogICAgSW4gYWRkaXRpb24gdG8gY2hhbmdpbmcgdGhlIHByb3Bl
        cnR5LCBgc2V0KClgIHdpbGwgYWxzbyByZWdpc3RlciBhIHByb3BlcnR5CiAg
        ICBjaGFuZ2Ugd2l0aCB0aGUgb2JqZWN0LiBVbmxlc3MgeW91IGhhdmUgcGxh
        Y2VkIHRoaXMgY2FsbCBpbnNpZGUgb2YgYQogICAgYGJlZ2luUHJvcGVydHlD
        aGFuZ2VzKClgIGFuZCBgZW5kUHJvcGVydHlDaGFuZ2VzKCksYCBhbnkgImxv
        Y2FsIiBvYnNlcnZlcnMKICAgIChpLmUuIG9ic2VydmVyIG1ldGhvZHMgZGVj
        bGFyZWQgb24gdGhlIHNhbWUgb2JqZWN0KSwgd2lsbCBiZSBjYWxsZWQKICAg
        IGltbWVkaWF0ZWx5LiBBbnkgInJlbW90ZSIgb2JzZXJ2ZXJzIChpLmUuIG9i
        c2VydmVyIG1ldGhvZHMgZGVjbGFyZWQgb24KICAgIGFub3RoZXIgb2JqZWN0
        KSB3aWxsIGJlIHBsYWNlZCBpbiBhIHF1ZXVlIGFuZCBjYWxsZWQgYXQgYSBs
        YXRlciB0aW1lIGluIGEKICAgIGNvYWxlc2NlZCBtYW5uZXIuCgogICAgIyMj
        IENoYWluaW5nCgogICAgSW4gYWRkaXRpb24gdG8gcHJvcGVydHkgY2hhbmdl
        cywgYHNldCgpYCByZXR1cm5zIHRoZSB2YWx1ZSBvZiB0aGUgb2JqZWN0CiAg
        ICBpdHNlbGYgc28geW91IGNhbiBkbyBjaGFpbmluZyBsaWtlIHRoaXM6Cgog
        ICAgYGBgamF2YXNjcmlwdAogICAgcmVjb3JkLnNldCgnZmlyc3ROYW1lJywg
        J0NoYXJsZXMnKS5zZXQoJ2xhc3ROYW1lJywgJ0pvbGxleScpOwogICAgYGBg
        CgogICAgQG1ldGhvZCBzZXQKICAgIEBwYXJhbSB7U3RyaW5nfSBrZXlOYW1l
        IFRoZSBwcm9wZXJ0eSB0byBzZXQKICAgIEBwYXJhbSB7T2JqZWN0fSB2YWx1
        ZSBUaGUgdmFsdWUgdG8gc2V0IG9yIGBudWxsYC4KICAgIEByZXR1cm4ge0Vt
        YmVyLk9ic2VydmFibGV9CiAgKi8KICBzZXQ6IGZ1bmN0aW9uKGtleU5hbWUs
        IHZhbHVlKSB7CiAgICBzZXQodGhpcywga2V5TmFtZSwgdmFsdWUpOwogICAg
        cmV0dXJuIHRoaXM7CiAgfSwKCgogIC8qKgogICAgU2V0cyBhIGxpc3Qgb2Yg
        cHJvcGVydGllcyBhdCBvbmNlLiBUaGVzZSBwcm9wZXJ0aWVzIGFyZSBzZXQg
        aW5zaWRlCiAgICBhIHNpbmdsZSBgYmVnaW5Qcm9wZXJ0eUNoYW5nZXNgIGFu
        ZCBgZW5kUHJvcGVydHlDaGFuZ2VzYCBiYXRjaCwgc28KICAgIG9ic2VydmVy
        cyB3aWxsIGJlIGJ1ZmZlcmVkLgoKICAgIGBgYGphdmFzY3JpcHQKICAgIHJl
        Y29yZC5zZXRQcm9wZXJ0aWVzKHsgZmlyc3ROYW1lOiAnQ2hhcmxlcycsIGxh
        c3ROYW1lOiAnSm9sbGV5JyB9KTsKICAgIGBgYAoKICAgIEBtZXRob2Qgc2V0
        UHJvcGVydGllcwogICAgQHBhcmFtIHtIYXNofSBoYXNoIHRoZSBoYXNoIG9m
        IGtleXMgYW5kIHZhbHVlcyB0byBzZXQKICAgIEByZXR1cm4ge0VtYmVyLk9i
        c2VydmFibGV9CiAgKi8KICBzZXRQcm9wZXJ0aWVzOiBmdW5jdGlvbihoYXNo
        KSB7CiAgICByZXR1cm4gRW1iZXIuc2V0UHJvcGVydGllcyh0aGlzLCBoYXNo
        KTsKICB9LAoKICAvKioKICAgIEJlZ2lucyBhIGdyb3VwaW5nIG9mIHByb3Bl
        cnR5IGNoYW5nZXMuCgogICAgWW91IGNhbiB1c2UgdGhpcyBtZXRob2QgdG8g
        Z3JvdXAgcHJvcGVydHkgY2hhbmdlcyBzbyB0aGF0IG5vdGlmaWNhdGlvbnMK
        ICAgIHdpbGwgbm90IGJlIHNlbnQgdW50aWwgdGhlIGNoYW5nZXMgYXJlIGZp
        bmlzaGVkLiBJZiB5b3UgcGxhbiB0byBtYWtlIGEKICAgIGxhcmdlIG51bWJl
        ciBvZiBjaGFuZ2VzIHRvIGFuIG9iamVjdCBhdCBvbmUgdGltZSwgeW91IHNo
        b3VsZCBjYWxsIHRoaXMKICAgIG1ldGhvZCBhdCB0aGUgYmVnaW5uaW5nIG9m
        IHRoZSBjaGFuZ2VzIHRvIGJlZ2luIGRlZmVycmluZyBjaGFuZ2UKICAgIG5v
        dGlmaWNhdGlvbnMuIFdoZW4geW91IGFyZSBkb25lIG1ha2luZyBjaGFuZ2Vz
        LCBjYWxsCiAgICBgZW5kUHJvcGVydHlDaGFuZ2VzKClgIHRvIGRlbGl2ZXIg
        dGhlIGRlZmVycmVkIGNoYW5nZSBub3RpZmljYXRpb25zIGFuZCBlbmQKICAg
        IGRlZmVycmluZy4KCiAgICBAbWV0aG9kIGJlZ2luUHJvcGVydHlDaGFuZ2Vz
        CiAgICBAcmV0dXJuIHtFbWJlci5PYnNlcnZhYmxlfQogICovCiAgYmVnaW5Q
        cm9wZXJ0eUNoYW5nZXM6IGZ1bmN0aW9uKCkgewogICAgRW1iZXIuYmVnaW5Q
        cm9wZXJ0eUNoYW5nZXMoKTsKICAgIHJldHVybiB0aGlzOwogIH0sCgogIC8q
        KgogICAgRW5kcyBhIGdyb3VwaW5nIG9mIHByb3BlcnR5IGNoYW5nZXMuCgog
        ICAgWW91IGNhbiB1c2UgdGhpcyBtZXRob2QgdG8gZ3JvdXAgcHJvcGVydHkg
        Y2hhbmdlcyBzbyB0aGF0IG5vdGlmaWNhdGlvbnMKICAgIHdpbGwgbm90IGJl
        IHNlbnQgdW50aWwgdGhlIGNoYW5nZXMgYXJlIGZpbmlzaGVkLiBJZiB5b3Ug
        cGxhbiB0byBtYWtlIGEKICAgIGxhcmdlIG51bWJlciBvZiBjaGFuZ2VzIHRv
        IGFuIG9iamVjdCBhdCBvbmUgdGltZSwgeW91IHNob3VsZCBjYWxsCiAgICBg
        YmVnaW5Qcm9wZXJ0eUNoYW5nZXMoKWAgYXQgdGhlIGJlZ2lubmluZyBvZiB0
        aGUgY2hhbmdlcyB0byBkZWZlciBjaGFuZ2UKICAgIG5vdGlmaWNhdGlvbnMu
        IFdoZW4geW91IGFyZSBkb25lIG1ha2luZyBjaGFuZ2VzLCBjYWxsIHRoaXMg
        bWV0aG9kIHRvCiAgICBkZWxpdmVyIHRoZSBkZWZlcnJlZCBjaGFuZ2Ugbm90
        aWZpY2F0aW9ucyBhbmQgZW5kIGRlZmVycmluZy4KCiAgICBAbWV0aG9kIGVu
        ZFByb3BlcnR5Q2hhbmdlcwogICAgQHJldHVybiB7RW1iZXIuT2JzZXJ2YWJs
        ZX0KICAqLwogIGVuZFByb3BlcnR5Q2hhbmdlczogZnVuY3Rpb24oKSB7CiAg
        ICBFbWJlci5lbmRQcm9wZXJ0eUNoYW5nZXMoKTsKICAgIHJldHVybiB0aGlz
        OwogIH0sCgogIC8qKgogICAgTm90aWZ5IHRoZSBvYnNlcnZlciBzeXN0ZW0g
        dGhhdCBhIHByb3BlcnR5IGlzIGFib3V0IHRvIGNoYW5nZS4KCiAgICBTb21l
        dGltZXMgeW91IG5lZWQgdG8gY2hhbmdlIGEgdmFsdWUgZGlyZWN0bHkgb3Ig
        aW5kaXJlY3RseSB3aXRob3V0CiAgICBhY3R1YWxseSBjYWxsaW5nIGBnZXQo
        KWAgb3IgYHNldCgpYCBvbiBpdC4gSW4gdGhpcyBjYXNlLCB5b3UgY2FuIHVz
        ZSB0aGlzCiAgICBtZXRob2QgYW5kIGBwcm9wZXJ0eURpZENoYW5nZSgpYCBp
        bnN0ZWFkLiBDYWxsaW5nIHRoZXNlIHR3byBtZXRob2RzCiAgICB0b2dldGhl
        ciB3aWxsIG5vdGlmeSBhbGwgb2JzZXJ2ZXJzIHRoYXQgdGhlIHByb3BlcnR5
        IGhhcyBwb3RlbnRpYWxseQogICAgY2hhbmdlZCB2YWx1ZS4KCiAgICBOb3Rl
        IHRoYXQgeW91IG11c3QgYWx3YXlzIGNhbGwgYHByb3BlcnR5V2lsbENoYW5n
        ZWAgYW5kIGBwcm9wZXJ0eURpZENoYW5nZWAKICAgIGFzIGEgcGFpci4gSWYg
        eW91IGRvIG5vdCwgaXQgbWF5IGdldCB0aGUgcHJvcGVydHkgY2hhbmdlIGdy
        b3VwcyBvdXQgb2YKICAgIG9yZGVyIGFuZCBjYXVzZSBub3RpZmljYXRpb25z
        IHRvIGJlIGRlbGl2ZXJlZCBtb3JlIG9mdGVuIHRoYW4geW91IHdvdWxkCiAg
        ICBsaWtlLgoKICAgIEBtZXRob2QgcHJvcGVydHlXaWxsQ2hhbmdlCiAgICBA
        cGFyYW0ge1N0cmluZ30ga2V5TmFtZSBUaGUgcHJvcGVydHkga2V5IHRoYXQg
        aXMgYWJvdXQgdG8gY2hhbmdlLgogICAgQHJldHVybiB7RW1iZXIuT2JzZXJ2
        YWJsZX0KICAqLwogIHByb3BlcnR5V2lsbENoYW5nZTogZnVuY3Rpb24oa2V5
        TmFtZSkgewogICAgRW1iZXIucHJvcGVydHlXaWxsQ2hhbmdlKHRoaXMsIGtl
        eU5hbWUpOwogICAgcmV0dXJuIHRoaXM7CiAgfSwKCiAgLyoqCiAgICBOb3Rp
        ZnkgdGhlIG9ic2VydmVyIHN5c3RlbSB0aGF0IGEgcHJvcGVydHkgaGFzIGp1
        c3QgY2hhbmdlZC4KCiAgICBTb21ldGltZXMgeW91IG5lZWQgdG8gY2hhbmdl
        IGEgdmFsdWUgZGlyZWN0bHkgb3IgaW5kaXJlY3RseSB3aXRob3V0CiAgICBh
        Y3R1YWxseSBjYWxsaW5nIGBnZXQoKWAgb3IgYHNldCgpYCBvbiBpdC4gSW4g
        dGhpcyBjYXNlLCB5b3UgY2FuIHVzZSB0aGlzCiAgICBtZXRob2QgYW5kIGBw
        cm9wZXJ0eVdpbGxDaGFuZ2UoKWAgaW5zdGVhZC4gQ2FsbGluZyB0aGVzZSB0
        d28gbWV0aG9kcwogICAgdG9nZXRoZXIgd2lsbCBub3RpZnkgYWxsIG9ic2Vy
        dmVycyB0aGF0IHRoZSBwcm9wZXJ0eSBoYXMgcG90ZW50aWFsbHkKICAgIGNo
        YW5nZWQgdmFsdWUuCgogICAgTm90ZSB0aGF0IHlvdSBtdXN0IGFsd2F5cyBj
        YWxsIGBwcm9wZXJ0eVdpbGxDaGFuZ2VgIGFuZCBgcHJvcGVydHlEaWRDaGFu
        Z2VgCiAgICBhcyBhIHBhaXIuIElmIHlvdSBkbyBub3QsIGl0IG1heSBnZXQg
        dGhlIHByb3BlcnR5IGNoYW5nZSBncm91cHMgb3V0IG9mCiAgICBvcmRlciBh
        bmQgY2F1c2Ugbm90aWZpY2F0aW9ucyB0byBiZSBkZWxpdmVyZWQgbW9yZSBv
        ZnRlbiB0aGFuIHlvdSB3b3VsZAogICAgbGlrZS4KCiAgICBAbWV0aG9kIHBy
        b3BlcnR5RGlkQ2hhbmdlCiAgICBAcGFyYW0ge1N0cmluZ30ga2V5TmFtZSBU
        aGUgcHJvcGVydHkga2V5IHRoYXQgaGFzIGp1c3QgY2hhbmdlZC4KICAgIEBy
        ZXR1cm4ge0VtYmVyLk9ic2VydmFibGV9CiAgKi8KICBwcm9wZXJ0eURpZENo
        YW5nZTogZnVuY3Rpb24oa2V5TmFtZSkgewogICAgRW1iZXIucHJvcGVydHlE
        aWRDaGFuZ2UodGhpcywga2V5TmFtZSk7CiAgICByZXR1cm4gdGhpczsKICB9
        LAoKICAvKioKICAgIENvbnZlbmllbmNlIG1ldGhvZCB0byBjYWxsIGBwcm9w
        ZXJ0eVdpbGxDaGFuZ2VgIGFuZCBgcHJvcGVydHlEaWRDaGFuZ2VgIGluCiAg
        ICBzdWNjZXNzaW9uLgoKICAgIEBtZXRob2Qgbm90aWZ5UHJvcGVydHlDaGFu
        Z2UKICAgIEBwYXJhbSB7U3RyaW5nfSBrZXlOYW1lIFRoZSBwcm9wZXJ0eSBr
        ZXkgdG8gYmUgbm90aWZpZWQgYWJvdXQuCiAgICBAcmV0dXJuIHtFbWJlci5P
        YnNlcnZhYmxlfQogICovCiAgbm90aWZ5UHJvcGVydHlDaGFuZ2U6IGZ1bmN0
        aW9uKGtleU5hbWUpIHsKICAgIHRoaXMucHJvcGVydHlXaWxsQ2hhbmdlKGtl
        eU5hbWUpOwogICAgdGhpcy5wcm9wZXJ0eURpZENoYW5nZShrZXlOYW1lKTsK
        ICAgIHJldHVybiB0aGlzOwogIH0sCgogIGFkZEJlZm9yZU9ic2VydmVyOiBm
        dW5jdGlvbihrZXksIHRhcmdldCwgbWV0aG9kKSB7CiAgICBFbWJlci5hZGRC
        ZWZvcmVPYnNlcnZlcih0aGlzLCBrZXksIHRhcmdldCwgbWV0aG9kKTsKICB9
        LAoKICAvKioKICAgIEFkZHMgYW4gb2JzZXJ2ZXIgb24gYSBwcm9wZXJ0eS4K
        CiAgICBUaGlzIGlzIHRoZSBjb3JlIG1ldGhvZCB1c2VkIHRvIHJlZ2lzdGVy
        IGFuIG9ic2VydmVyIGZvciBhIHByb3BlcnR5LgoKICAgIE9uY2UgeW91IGNh
        bGwgdGhpcyBtZXRob2QsIGFueSB0aW1lIHRoZSBrZXkncyB2YWx1ZSBpcyBz
        ZXQsIHlvdXIgb2JzZXJ2ZXIKICAgIHdpbGwgYmUgbm90aWZpZWQuIE5vdGUg
        dGhhdCB0aGUgb2JzZXJ2ZXJzIGFyZSB0cmlnZ2VyZWQgYW55IHRpbWUgdGhl
        CiAgICB2YWx1ZSBpcyBzZXQsIHJlZ2FyZGxlc3Mgb2Ygd2hldGhlciBpdCBo
        YXMgYWN0dWFsbHkgY2hhbmdlZC4gWW91cgogICAgb2JzZXJ2ZXIgc2hvdWxk
        IGJlIHByZXBhcmVkIHRvIGhhbmRsZSB0aGF0LgoKICAgIFlvdSBjYW4gYWxz
        byBwYXNzIGFuIG9wdGlvbmFsIGNvbnRleHQgcGFyYW1ldGVyIHRvIHRoaXMg
        bWV0aG9kLiBUaGUKICAgIGNvbnRleHQgd2lsbCBiZSBwYXNzZWQgdG8geW91
        ciBvYnNlcnZlciBtZXRob2Qgd2hlbmV2ZXIgaXQgaXMgdHJpZ2dlcmVkLgog
        ICAgTm90ZSB0aGF0IGlmIHlvdSBhZGQgdGhlIHNhbWUgdGFyZ2V0L21ldGhv
        ZCBwYWlyIG9uIGEga2V5IG11bHRpcGxlIHRpbWVzCiAgICB3aXRoIGRpZmZl
        cmVudCBjb250ZXh0IHBhcmFtZXRlcnMsIHlvdXIgb2JzZXJ2ZXIgd2lsbCBv
        bmx5IGJlIGNhbGxlZCBvbmNlCiAgICB3aXRoIHRoZSBsYXN0IGNvbnRleHQg
        eW91IHBhc3NlZC4KCiAgICAjIyMgT2JzZXJ2ZXIgTWV0aG9kcwoKICAgIE9i
        c2VydmVyIG1ldGhvZHMgeW91IHBhc3Mgc2hvdWxkIGdlbmVyYWxseSBoYXZl
        IHRoZSBmb2xsb3dpbmcgc2lnbmF0dXJlIGlmCiAgICB5b3UgZG8gbm90IHBh
        c3MgYSBgY29udGV4dGAgcGFyYW1ldGVyOgoKICAgIGBgYGphdmFzY3JpcHQK
        ICAgIGZvb0RpZENoYW5nZTogZnVuY3Rpb24oc2VuZGVyLCBrZXksIHZhbHVl
        LCByZXYpIHsgfTsKICAgIGBgYAoKICAgIFRoZSBzZW5kZXIgaXMgdGhlIG9i
        amVjdCB0aGF0IGNoYW5nZWQuIFRoZSBrZXkgaXMgdGhlIHByb3BlcnR5IHRo
        YXQKICAgIGNoYW5nZXMuIFRoZSB2YWx1ZSBwcm9wZXJ0eSBpcyBjdXJyZW50
        bHkgcmVzZXJ2ZWQgYW5kIHVudXNlZC4gVGhlIHJldgogICAgaXMgdGhlIGxh
        c3QgcHJvcGVydHkgcmV2aXNpb24gb2YgdGhlIG9iamVjdCB3aGVuIGl0IGNo
        YW5nZWQsIHdoaWNoIHlvdSBjYW4KICAgIHVzZSB0byBkZXRlY3QgaWYgdGhl
        IGtleSB2YWx1ZSBoYXMgcmVhbGx5IGNoYW5nZWQgb3Igbm90LgoKICAgIElm
        IHlvdSBwYXNzIGEgYGNvbnRleHRgIHBhcmFtZXRlciwgdGhlIGNvbnRleHQg
        d2lsbCBiZSBwYXNzZWQgYmVmb3JlIHRoZQogICAgcmV2aXNpb24gbGlrZSBz
        bzoKCiAgICBgYGBqYXZhc2NyaXB0CiAgICBmb29EaWRDaGFuZ2U6IGZ1bmN0
        aW9uKHNlbmRlciwga2V5LCB2YWx1ZSwgY29udGV4dCwgcmV2KSB7IH07CiAg
        ICBgYGAKCiAgICBVc3VhbGx5IHlvdSB3aWxsIG5vdCBuZWVkIHRoZSB2YWx1
        ZSwgY29udGV4dCBvciByZXZpc2lvbiBwYXJhbWV0ZXJzIGF0CiAgICB0aGUg
        ZW5kLiBJbiB0aGlzIGNhc2UsIGl0IGlzIGNvbW1vbiB0byB3cml0ZSBvYnNl
        cnZlciBtZXRob2RzIHRoYXQgdGFrZQogICAgb25seSBhIHNlbmRlciBhbmQg
        a2V5IHZhbHVlIGFzIHBhcmFtZXRlcnMgb3IsIGlmIHlvdSBhcmVuJ3QgaW50
        ZXJlc3RlZCBpbgogICAgYW55IG9mIHRoZXNlIHZhbHVlcywgdG8gd3JpdGUg
        YW4gb2JzZXJ2ZXIgdGhhdCBoYXMgbm8gcGFyYW1ldGVycyBhdCBhbGwuCgog
        ICAgQG1ldGhvZCBhZGRPYnNlcnZlcgogICAgQHBhcmFtIHtTdHJpbmd9IGtl
        eSBUaGUga2V5IHRvIG9ic2VydmVyCiAgICBAcGFyYW0ge09iamVjdH0gdGFy
        Z2V0IFRoZSB0YXJnZXQgb2JqZWN0IHRvIGludm9rZQogICAgQHBhcmFtIHtT
        dHJpbmd8RnVuY3Rpb259IG1ldGhvZCBUaGUgbWV0aG9kIHRvIGludm9rZS4K
        ICAgIEByZXR1cm4ge0VtYmVyLk9iamVjdH0gc2VsZgogICovCiAgYWRkT2Jz
        ZXJ2ZXI6IGZ1bmN0aW9uKGtleSwgdGFyZ2V0LCBtZXRob2QpIHsKICAgIEVt
        YmVyLmFkZE9ic2VydmVyKHRoaXMsIGtleSwgdGFyZ2V0LCBtZXRob2QpOwog
        IH0sCgogIC8qKgogICAgUmVtb3ZlIGFuIG9ic2VydmVyIHlvdSBoYXZlIHBy
        ZXZpb3VzbHkgcmVnaXN0ZXJlZCBvbiB0aGlzIG9iamVjdC4gUGFzcwogICAg
        dGhlIHNhbWUga2V5LCB0YXJnZXQsIGFuZCBtZXRob2QgeW91IHBhc3NlZCB0
        byBgYWRkT2JzZXJ2ZXIoKWAgYW5kIHlvdXIKICAgIHRhcmdldCB3aWxsIG5v
        IGxvbmdlciByZWNlaXZlIG5vdGlmaWNhdGlvbnMuCgogICAgQG1ldGhvZCBy
        ZW1vdmVPYnNlcnZlcgogICAgQHBhcmFtIHtTdHJpbmd9IGtleSBUaGUga2V5
        IHRvIG9ic2VydmVyCiAgICBAcGFyYW0ge09iamVjdH0gdGFyZ2V0IFRoZSB0
        YXJnZXQgb2JqZWN0IHRvIGludm9rZQogICAgQHBhcmFtIHtTdHJpbmd8RnVu
        Y3Rpb259IG1ldGhvZCBUaGUgbWV0aG9kIHRvIGludm9rZS4KICAgIEByZXR1
        cm4ge0VtYmVyLk9ic2VydmFibGV9IHJlY2VpdmVyCiAgKi8KICByZW1vdmVP
        YnNlcnZlcjogZnVuY3Rpb24oa2V5LCB0YXJnZXQsIG1ldGhvZCkgewogICAg
        RW1iZXIucmVtb3ZlT2JzZXJ2ZXIodGhpcywga2V5LCB0YXJnZXQsIG1ldGhv
        ZCk7CiAgfSwKCiAgLyoqCiAgICBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgb2Jq
        ZWN0IGN1cnJlbnRseSBoYXMgb2JzZXJ2ZXJzIHJlZ2lzdGVyZWQgZm9yIGEK
        ICAgIHBhcnRpY3VsYXIga2V5LiBZb3UgY2FuIHVzZSB0aGlzIG1ldGhvZCB0
        byBwb3RlbnRpYWxseSBkZWZlciBwZXJmb3JtaW5nCiAgICBhbiBleHBlbnNp
        dmUgYWN0aW9uIHVudGlsIHNvbWVvbmUgYmVnaW5zIG9ic2VydmluZyBhIHBh
        cnRpY3VsYXIgcHJvcGVydHkKICAgIG9uIHRoZSBvYmplY3QuCgogICAgQG1l
        dGhvZCBoYXNPYnNlcnZlckZvcgogICAgQHBhcmFtIHtTdHJpbmd9IGtleSBL
        ZXkgdG8gY2hlY2sKICAgIEByZXR1cm4ge0Jvb2xlYW59CiAgKi8KICBoYXNP
        YnNlcnZlckZvcjogZnVuY3Rpb24oa2V5KSB7CiAgICByZXR1cm4gRW1iZXIu
        aGFzTGlzdGVuZXJzKHRoaXMsIGtleSsnOmNoYW5nZScpOwogIH0sCgogIC8q
        KgogICAgUmV0cmlldmVzIHRoZSB2YWx1ZSBvZiBhIHByb3BlcnR5LCBvciBh
        IGRlZmF1bHQgdmFsdWUgaW4gdGhlIGNhc2UgdGhhdCB0aGUKICAgIHByb3Bl
        cnR5IHJldHVybnMgYHVuZGVmaW5lZGAuCgogICAgYGBgamF2YXNjcmlwdAog
        ICAgcGVyc29uLmdldFdpdGhEZWZhdWx0KCdsYXN0TmFtZScsICdEb2UnKTsK
        ICAgIGBgYAoKICAgIEBtZXRob2QgZ2V0V2l0aERlZmF1bHQKICAgIEBwYXJh
        bSB7U3RyaW5nfSBrZXlOYW1lIFRoZSBuYW1lIG9mIHRoZSBwcm9wZXJ0eSB0
        byByZXRyaWV2ZQogICAgQHBhcmFtIHtPYmplY3R9IGRlZmF1bHRWYWx1ZSBU
        aGUgdmFsdWUgdG8gcmV0dXJuIGlmIHRoZSBwcm9wZXJ0eSB2YWx1ZSBpcyB1
        bmRlZmluZWQKICAgIEByZXR1cm4ge09iamVjdH0gVGhlIHByb3BlcnR5IHZh
        bHVlIG9yIHRoZSBkZWZhdWx0VmFsdWUuCiAgKi8KICBnZXRXaXRoRGVmYXVs
        dDogZnVuY3Rpb24oa2V5TmFtZSwgZGVmYXVsdFZhbHVlKSB7CiAgICByZXR1
        cm4gRW1iZXIuZ2V0V2l0aERlZmF1bHQodGhpcywga2V5TmFtZSwgZGVmYXVs
        dFZhbHVlKTsKICB9LAoKICAvKioKICAgIFNldCB0aGUgdmFsdWUgb2YgYSBw
        cm9wZXJ0eSB0byB0aGUgY3VycmVudCB2YWx1ZSBwbHVzIHNvbWUgYW1vdW50
        LgoKICAgIGBgYGphdmFzY3JpcHQKICAgIHBlcnNvbi5pbmNyZW1lbnRQcm9w
        ZXJ0eSgnYWdlJyk7CiAgICB0ZWFtLmluY3JlbWVudFByb3BlcnR5KCdzY29y
        ZScsIDIpOwogICAgYGBgCgogICAgQG1ldGhvZCBpbmNyZW1lbnRQcm9wZXJ0
        eQogICAgQHBhcmFtIHtTdHJpbmd9IGtleU5hbWUgVGhlIG5hbWUgb2YgdGhl
        IHByb3BlcnR5IHRvIGluY3JlbWVudAogICAgQHBhcmFtIHtOdW1iZXJ9IGlu
        Y3JlbWVudCBUaGUgYW1vdW50IHRvIGluY3JlbWVudCBieS4gRGVmYXVsdHMg
        dG8gMQogICAgQHJldHVybiB7TnVtYmVyfSBUaGUgbmV3IHByb3BlcnR5IHZh
        bHVlCiAgKi8KICBpbmNyZW1lbnRQcm9wZXJ0eTogZnVuY3Rpb24oa2V5TmFt
        ZSwgaW5jcmVtZW50KSB7CiAgICBpZiAoRW1iZXIuaXNOb25lKGluY3JlbWVu
        dCkpIHsgaW5jcmVtZW50ID0gMTsgfQogICAgRW1iZXIuYXNzZXJ0KCJNdXN0
        IHBhc3MgYSBudW1lcmljIHZhbHVlIHRvIGluY3JlbWVudFByb3BlcnR5Iiwg
        KCFpc05hTihwYXJzZUZsb2F0KGluY3JlbWVudCkpICYmIGlzRmluaXRlKGlu
        Y3JlbWVudCkpKTsKICAgIHNldCh0aGlzLCBrZXlOYW1lLCAoZ2V0KHRoaXMs
        IGtleU5hbWUpIHx8IDApICsgaW5jcmVtZW50KTsKICAgIHJldHVybiBnZXQo
        dGhpcywga2V5TmFtZSk7CiAgfSwKCiAgLyoqCiAgICBTZXQgdGhlIHZhbHVl
        IG9mIGEgcHJvcGVydHkgdG8gdGhlIGN1cnJlbnQgdmFsdWUgbWludXMgc29t
        ZSBhbW91bnQuCgogICAgYGBgamF2YXNjcmlwdAogICAgcGxheWVyLmRlY3Jl
        bWVudFByb3BlcnR5KCdsaXZlcycpOwogICAgb3JjLmRlY3JlbWVudFByb3Bl
        cnR5KCdoZWFsdGgnLCA1KTsKICAgIGBgYAoKICAgIEBtZXRob2QgZGVjcmVt
        ZW50UHJvcGVydHkKICAgIEBwYXJhbSB7U3RyaW5nfSBrZXlOYW1lIFRoZSBu
        YW1lIG9mIHRoZSBwcm9wZXJ0eSB0byBkZWNyZW1lbnQKICAgIEBwYXJhbSB7
        TnVtYmVyfSBkZWNyZW1lbnQgVGhlIGFtb3VudCB0byBkZWNyZW1lbnQgYnku
        IERlZmF1bHRzIHRvIDEKICAgIEByZXR1cm4ge051bWJlcn0gVGhlIG5ldyBw
        cm9wZXJ0eSB2YWx1ZQogICovCiAgZGVjcmVtZW50UHJvcGVydHk6IGZ1bmN0
        aW9uKGtleU5hbWUsIGRlY3JlbWVudCkgewogICAgaWYgKEVtYmVyLmlzTm9u
        ZShkZWNyZW1lbnQpKSB7IGRlY3JlbWVudCA9IDE7IH0KICAgIEVtYmVyLmFz
        c2VydCgiTXVzdCBwYXNzIGEgbnVtZXJpYyB2YWx1ZSB0byBkZWNyZW1lbnRQ
        cm9wZXJ0eSIsICghaXNOYU4ocGFyc2VGbG9hdChkZWNyZW1lbnQpKSAmJiBp
        c0Zpbml0ZShkZWNyZW1lbnQpKSk7CiAgICBzZXQodGhpcywga2V5TmFtZSwg
        KGdldCh0aGlzLCBrZXlOYW1lKSB8fCAwKSAtIGRlY3JlbWVudCk7CiAgICBy
        ZXR1cm4gZ2V0KHRoaXMsIGtleU5hbWUpOwogIH0sCgogIC8qKgogICAgU2V0
        IHRoZSB2YWx1ZSBvZiBhIGJvb2xlYW4gcHJvcGVydHkgdG8gdGhlIG9wcG9z
        aXRlIG9mIGl0J3MKICAgIGN1cnJlbnQgdmFsdWUuCgogICAgYGBgamF2YXNj
        cmlwdAogICAgc3RhcnNoaXAudG9nZ2xlUHJvcGVydHkoJ3dhcnBEcml2ZUVu
        Z2FnZWQnKTsKICAgIGBgYAoKICAgIEBtZXRob2QgdG9nZ2xlUHJvcGVydHkK
        ICAgIEBwYXJhbSB7U3RyaW5nfSBrZXlOYW1lIFRoZSBuYW1lIG9mIHRoZSBw
        cm9wZXJ0eSB0byB0b2dnbGUKICAgIEByZXR1cm4ge09iamVjdH0gVGhlIG5l
        dyBwcm9wZXJ0eSB2YWx1ZQogICovCiAgdG9nZ2xlUHJvcGVydHk6IGZ1bmN0
        aW9uKGtleU5hbWUpIHsKICAgIHNldCh0aGlzLCBrZXlOYW1lLCAhZ2V0KHRo
        aXMsIGtleU5hbWUpKTsKICAgIHJldHVybiBnZXQodGhpcywga2V5TmFtZSk7
        CiAgfSwKCiAgLyoqCiAgICBSZXR1cm5zIHRoZSBjYWNoZWQgdmFsdWUgb2Yg
        YSBjb21wdXRlZCBwcm9wZXJ0eSwgaWYgaXQgZXhpc3RzLgogICAgVGhpcyBh
        bGxvd3MgeW91IHRvIGluc3BlY3QgdGhlIHZhbHVlIG9mIGEgY29tcHV0ZWQg
        cHJvcGVydHkKICAgIHdpdGhvdXQgYWNjaWRlbnRhbGx5IGludm9raW5nIGl0
        IGlmIGl0IGlzIGludGVuZGVkIHRvIGJlCiAgICBnZW5lcmF0ZWQgbGF6aWx5
        LgoKICAgIEBtZXRob2QgY2FjaGVGb3IKICAgIEBwYXJhbSB7U3RyaW5nfSBr
        ZXlOYW1lCiAgICBAcmV0dXJuIHtPYmplY3R9IFRoZSBjYWNoZWQgdmFsdWUg
        b2YgdGhlIGNvbXB1dGVkIHByb3BlcnR5LCBpZiBhbnkKICAqLwogIGNhY2hl
        Rm9yOiBmdW5jdGlvbihrZXlOYW1lKSB7CiAgICByZXR1cm4gRW1iZXIuY2Fj
        aGVGb3IodGhpcywga2V5TmFtZSk7CiAgfSwKCiAgLy8gaW50ZW5kZWQgZm9y
        IGRlYnVnZ2luZyBwdXJwb3NlcwogIG9ic2VydmVyc0ZvcktleTogZnVuY3Rp
        b24oa2V5TmFtZSkgewogICAgcmV0dXJuIEVtYmVyLm9ic2VydmVyc0Zvcih0
        aGlzLCBrZXlOYW1lKTsKICB9Cn0pOwoKfSkoKTsKCgoKKGZ1bmN0aW9uKCkg
        ewovKioKICBAbW9kdWxlIGVtYmVyCiAgQHN1Ym1vZHVsZSBlbWJlci1ydW50
        aW1lCiovCgoKLy8gTk9URTogdGhpcyBvYmplY3Qgc2hvdWxkIG5ldmVyIGJl
        IGluY2x1ZGVkIGRpcmVjdGx5LiBJbnN0ZWFkIHVzZSBgRW1iZXIuT2JqZWN0
        YC4KLy8gV2Ugb25seSBkZWZpbmUgdGhpcyBzZXBhcmF0ZWx5IHNvIHRoYXQg
        YEVtYmVyLlNldGAgY2FuIGRlcGVuZCBvbiBpdC4KCgp2YXIgc2V0ID0gRW1i
        ZXIuc2V0LCBnZXQgPSBFbWJlci5nZXQsCiAgICBvX2NyZWF0ZSA9IEVtYmVy
        LmNyZWF0ZSwKICAgIG9fZGVmaW5lUHJvcGVydHkgPSBFbWJlci5wbGF0Zm9y
        bS5kZWZpbmVQcm9wZXJ0eSwKICAgIEdVSURfS0VZID0gRW1iZXIuR1VJRF9L
        RVksCiAgICBndWlkRm9yID0gRW1iZXIuZ3VpZEZvciwKICAgIGdlbmVyYXRl
        R3VpZCA9IEVtYmVyLmdlbmVyYXRlR3VpZCwKICAgIG1ldGEgPSBFbWJlci5t
        ZXRhLAogICAgTUVUQV9LRVkgPSBFbWJlci5NRVRBX0tFWSwKICAgIHJld2F0
        Y2ggPSBFbWJlci5yZXdhdGNoLAogICAgZmluaXNoQ2hhaW5zID0gRW1iZXIu
        ZmluaXNoQ2hhaW5zLAogICAgc2VuZEV2ZW50ID0gRW1iZXIuc2VuZEV2ZW50
        LAogICAgZGVzdHJveSA9IEVtYmVyLmRlc3Ryb3ksCiAgICBzY2hlZHVsZSA9
        IEVtYmVyLnJ1bi5zY2hlZHVsZSwKICAgIE1peGluID0gRW1iZXIuTWl4aW4s
        CiAgICBhcHBseU1peGluID0gTWl4aW4uX2FwcGx5LAogICAgZmluaXNoUGFy
        dGlhbCA9IE1peGluLmZpbmlzaFBhcnRpYWwsCiAgICByZW9wZW4gPSBNaXhp
        bi5wcm90b3R5cGUucmVvcGVuLAogICAgTUFOREFUT1JZX1NFVFRFUiA9IEVt
        YmVyLkVOVi5NQU5EQVRPUllfU0VUVEVSLAogICAgaW5kZXhPZiA9IEVtYmVy
        LkVudW1lcmFibGVVdGlscy5pbmRleE9mOwoKdmFyIHVuZGVmaW5lZERlc2Ny
        aXB0b3IgPSB7CiAgY29uZmlndXJhYmxlOiB0cnVlLAogIHdyaXRhYmxlOiB0
        cnVlLAogIGVudW1lcmFibGU6IGZhbHNlLAogIHZhbHVlOiB1bmRlZmluZWQK
        fTsKCmZ1bmN0aW9uIG1ha2VDdG9yKCkgewoKICAvLyBOb3RlOiBhdm9pZCBh
        Y2Nlc3NpbmcgYW55IHByb3BlcnRpZXMgb24gdGhlIG9iamVjdCBzaW5jZSBp
        dCBtYWtlcyB0aGUKICAvLyBtZXRob2QgYSBsb3QgZmFzdGVyLiBUaGlzIGlz
        IGdsdWUgY29kZSBzbyB3ZSB3YW50IGl0IHRvIGJlIGFzIGZhc3QgYXMKICAv
        LyBwb3NzaWJsZS4KCiAgdmFyIHdhc0FwcGxpZWQgPSBmYWxzZSwgaW5pdE1p
        eGlucywgaW5pdFByb3BlcnRpZXM7CgogIHZhciBDbGFzcyA9IGZ1bmN0aW9u
        KCkgewogICAgaWYgKCF3YXNBcHBsaWVkKSB7CiAgICAgIENsYXNzLnByb3Rv
        KCk7IC8vIHByZXBhcmUgcHJvdG90eXBlLi4uCiAgICB9CiAgICBvX2RlZmlu
        ZVByb3BlcnR5KHRoaXMsIEdVSURfS0VZLCB1bmRlZmluZWREZXNjcmlwdG9y
        KTsKICAgIG9fZGVmaW5lUHJvcGVydHkodGhpcywgJ19zdXBlcicsIHVuZGVm
        aW5lZERlc2NyaXB0b3IpOwogICAgdmFyIG0gPSBtZXRhKHRoaXMpLCBwcm90
        byA9IG0ucHJvdG87CiAgICBtLnByb3RvID0gdGhpczsKICAgIGlmIChpbml0
        TWl4aW5zKSB7CiAgICAgIC8vIGNhcHR1cmUgbG9jYWxseSBzbyB3ZSBjYW4g
        Y2xlYXIgdGhlIGNsb3NlZCBvdmVyIHZhcmlhYmxlCiAgICAgIHZhciBtaXhp
        bnMgPSBpbml0TWl4aW5zOwogICAgICBpbml0TWl4aW5zID0gbnVsbDsKICAg
        ICAgdGhpcy5yZW9wZW4uYXBwbHkodGhpcywgbWl4aW5zKTsKICAgIH0KICAg
        IGlmIChpbml0UHJvcGVydGllcykgewogICAgICAvLyBjYXB0dXJlIGxvY2Fs
        bHkgc28gd2UgY2FuIGNsZWFyIHRoZSBjbG9zZWQgb3ZlciB2YXJpYWJsZQog
        ICAgICB2YXIgcHJvcHMgPSBpbml0UHJvcGVydGllczsKICAgICAgaW5pdFBy
        b3BlcnRpZXMgPSBudWxsOwoKICAgICAgdmFyIGNvbmNhdGVuYXRlZFByb3Bl
        cnRpZXMgPSB0aGlzLmNvbmNhdGVuYXRlZFByb3BlcnRpZXM7CgogICAgICBm
        b3IgKHZhciBpID0gMCwgbCA9IHByb3BzLmxlbmd0aDsgaSA8IGw7IGkrKykg
        ewogICAgICAgIHZhciBwcm9wZXJ0aWVzID0gcHJvcHNbaV07CgogICAgICAg
        IEVtYmVyLmFzc2VydCgiRW1iZXIuT2JqZWN0LmNyZWF0ZSBubyBsb25nZXIg
        c3VwcG9ydHMgbWl4aW5nIGluIG90aGVyIGRlZmluaXRpb25zLCB1c2UgY3Jl
        YXRlV2l0aE1peGlucyBpbnN0ZWFkLiIsICEocHJvcGVydGllcyBpbnN0YW5j
        ZW9mIEVtYmVyLk1peGluKSk7CgogICAgICAgIGlmICh0eXBlb2YgcHJvcGVy
        dGllcyAhPT0gJ29iamVjdCcgJiYgcHJvcGVydGllcyAhPT0gdW5kZWZpbmVk
        KSB7CiAgICAgICAgICB0aHJvdyBuZXcgRW1iZXIuRXJyb3IoIkVtYmVyLk9i
        amVjdC5jcmVhdGUgb25seSBhY2NlcHRzIG9iamVjdHMuIik7CiAgICAgICAg
        fQoKICAgICAgICBpZiAoIXByb3BlcnRpZXMpIHsgY29udGludWU7IH0KCiAg
        ICAgICAgdmFyIGtleU5hbWVzID0gRW1iZXIua2V5cyhwcm9wZXJ0aWVzKTsK
        CiAgICAgICAgZm9yICh2YXIgaiA9IDAsIGxsID0ga2V5TmFtZXMubGVuZ3Ro
        OyBqIDwgbGw7IGorKykgewogICAgICAgICAgdmFyIGtleU5hbWUgPSBrZXlO
        YW1lc1tqXTsKICAgICAgICAgIGlmICghcHJvcGVydGllcy5oYXNPd25Qcm9w
        ZXJ0eShrZXlOYW1lKSkgeyBjb250aW51ZTsgfQoKICAgICAgICAgIHZhciB2
        YWx1ZSA9IHByb3BlcnRpZXNba2V5TmFtZV0sCiAgICAgICAgICAgICAgSVNf
        QklORElORyA9IEVtYmVyLklTX0JJTkRJTkc7CgogICAgICAgICAgaWYgKElT
        X0JJTkRJTkcudGVzdChrZXlOYW1lKSkgewogICAgICAgICAgICB2YXIgYmlu
        ZGluZ3MgPSBtLmJpbmRpbmdzOwogICAgICAgICAgICBpZiAoIWJpbmRpbmdz
        KSB7CiAgICAgICAgICAgICAgYmluZGluZ3MgPSBtLmJpbmRpbmdzID0ge307
        CiAgICAgICAgICAgIH0gZWxzZSBpZiAoIW0uaGFzT3duUHJvcGVydHkoJ2Jp
        bmRpbmdzJykpIHsKICAgICAgICAgICAgICBiaW5kaW5ncyA9IG0uYmluZGlu
        Z3MgPSBvX2NyZWF0ZShtLmJpbmRpbmdzKTsKICAgICAgICAgICAgfQogICAg
        ICAgICAgICBiaW5kaW5nc1trZXlOYW1lXSA9IHZhbHVlOwogICAgICAgICAg
        fQoKICAgICAgICAgIHZhciBkZXNjID0gbS5kZXNjc1trZXlOYW1lXTsKCiAg
        ICAgICAgICBFbWJlci5hc3NlcnQoIkVtYmVyLk9iamVjdC5jcmVhdGUgbm8g
        bG9uZ2VyIHN1cHBvcnRzIGRlZmluaW5nIGNvbXB1dGVkIHByb3BlcnRpZXMu
        IiwgISh2YWx1ZSBpbnN0YW5jZW9mIEVtYmVyLkNvbXB1dGVkUHJvcGVydHkp
        KTsKICAgICAgICAgIEVtYmVyLmFzc2VydCgiRW1iZXIuT2JqZWN0LmNyZWF0
        ZSBubyBsb25nZXIgc3VwcG9ydHMgZGVmaW5pbmcgbWV0aG9kcyB0aGF0IGNh
        bGwgX3N1cGVyLiIsICEodHlwZW9mIHZhbHVlID09PSAnZnVuY3Rpb24nICYm
        IHZhbHVlLnRvU3RyaW5nKCkuaW5kZXhPZignLl9zdXBlcicpICE9PSAtMSkp
        OwogICAgICAgICAgRW1iZXIuYXNzZXJ0KCJgYWN0aW9uc2AgbXVzdCBiZSBw
        cm92aWRlZCBhdCBleHRlbmQgdGltZSwgbm90IGF0IGNyZWF0ZSAiICsKICAg
        ICAgICAgICAgICAgICAgICAgICAidGltZSwgd2hlbiBFbWJlci5BY3Rpb25I
        YW5kbGVyIGlzIHVzZWQgKGkuZS4gdmlld3MsICIgKwogICAgICAgICAgICAg
        ICAgICAgICAgICJjb250cm9sbGVycyAmIHJvdXRlcykuIiwgISgoa2V5TmFt
        ZSA9PT0gJ2FjdGlvbnMnKSAmJiBFbWJlci5BY3Rpb25IYW5kbGVyLmRldGVj
        dCh0aGlzKSkpOwoKICAgICAgICAgIGlmIChjb25jYXRlbmF0ZWRQcm9wZXJ0
        aWVzICYmIGluZGV4T2YoY29uY2F0ZW5hdGVkUHJvcGVydGllcywga2V5TmFt
        ZSkgPj0gMCkgewogICAgICAgICAgICB2YXIgYmFzZVZhbHVlID0gdGhpc1tr
        ZXlOYW1lXTsKCiAgICAgICAgICAgIGlmIChiYXNlVmFsdWUpIHsKICAgICAg
        ICAgICAgICBpZiAoJ2Z1bmN0aW9uJyA9PT0gdHlwZW9mIGJhc2VWYWx1ZS5j
        b25jYXQpIHsKICAgICAgICAgICAgICAgIHZhbHVlID0gYmFzZVZhbHVlLmNv
        bmNhdCh2YWx1ZSk7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAg
        ICAgICAgIHZhbHVlID0gRW1iZXIubWFrZUFycmF5KGJhc2VWYWx1ZSkuY29u
        Y2F0KHZhbHVlKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gZWxz
        ZSB7CiAgICAgICAgICAgICAgdmFsdWUgPSBFbWJlci5tYWtlQXJyYXkodmFs
        dWUpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgaWYg
        KGRlc2MpIHsKICAgICAgICAgICAgZGVzYy5zZXQodGhpcywga2V5TmFtZSwg
        dmFsdWUpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgaWYgKHR5
        cGVvZiB0aGlzLnNldFVua25vd25Qcm9wZXJ0eSA9PT0gJ2Z1bmN0aW9uJyAm
        JiAhKGtleU5hbWUgaW4gdGhpcykpIHsKICAgICAgICAgICAgICB0aGlzLnNl
        dFVua25vd25Qcm9wZXJ0eShrZXlOYW1lLCB2YWx1ZSk7CiAgICAgICAgICAg
        IH0gZWxzZSBpZiAoTUFOREFUT1JZX1NFVFRFUikgewogICAgICAgICAgICAg
        IEVtYmVyLmRlZmluZVByb3BlcnR5KHRoaXMsIGtleU5hbWUsIG51bGwsIHZh
        bHVlKTsgLy8gc2V0dXAgbWFuZGF0b3J5IHNldHRlcgogICAgICAgICAgICB9
        IGVsc2UgewogICAgICAgICAgICAgIHRoaXNba2V5TmFtZV0gPSB2YWx1ZTsK
        ICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQog
        ICAgfQogICAgZmluaXNoUGFydGlhbCh0aGlzLCBtKTsKICAgIHRoaXMuaW5p
        dC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgbS5wcm90byA9IHByb3Rv
        OwogICAgZmluaXNoQ2hhaW5zKHRoaXMpOwogICAgc2VuZEV2ZW50KHRoaXMs
        ICJpbml0Iik7CiAgfTsKCiAgQ2xhc3MudG9TdHJpbmcgPSBNaXhpbi5wcm90
        b3R5cGUudG9TdHJpbmc7CiAgQ2xhc3Mud2lsbFJlb3BlbiA9IGZ1bmN0aW9u
        KCkgewogICAgaWYgKHdhc0FwcGxpZWQpIHsKICAgICAgQ2xhc3MuUHJvdG90
        eXBlTWl4aW4gPSBNaXhpbi5jcmVhdGUoQ2xhc3MuUHJvdG90eXBlTWl4aW4p
        OwogICAgfQoKICAgIHdhc0FwcGxpZWQgPSBmYWxzZTsKICB9OwogIENsYXNz
        Ll9pbml0TWl4aW5zID0gZnVuY3Rpb24oYXJncykgeyBpbml0TWl4aW5zID0g
        YXJnczsgfTsKICBDbGFzcy5faW5pdFByb3BlcnRpZXMgPSBmdW5jdGlvbihh
        cmdzKSB7IGluaXRQcm9wZXJ0aWVzID0gYXJnczsgfTsKCiAgQ2xhc3MucHJv
        dG8gPSBmdW5jdGlvbigpIHsKICAgIHZhciBzdXBlcmNsYXNzID0gQ2xhc3Mu
        c3VwZXJjbGFzczsKICAgIGlmIChzdXBlcmNsYXNzKSB7IHN1cGVyY2xhc3Mu
        cHJvdG8oKTsgfQoKICAgIGlmICghd2FzQXBwbGllZCkgewogICAgICB3YXNB
        cHBsaWVkID0gdHJ1ZTsKICAgICAgQ2xhc3MuUHJvdG90eXBlTWl4aW4uYXBw
        bHlQYXJ0aWFsKENsYXNzLnByb3RvdHlwZSk7CiAgICAgIHJld2F0Y2goQ2xh
        c3MucHJvdG90eXBlKTsKICAgIH0KCiAgICByZXR1cm4gdGhpcy5wcm90b3R5
        cGU7CiAgfTsKCiAgcmV0dXJuIENsYXNzOwoKfQoKLyoqCiAgQGNsYXNzIENv
        cmVPYmplY3QKICBAbmFtZXNwYWNlIEVtYmVyCiovCnZhciBDb3JlT2JqZWN0
        ID0gbWFrZUN0b3IoKTsKQ29yZU9iamVjdC50b1N0cmluZyA9IGZ1bmN0aW9u
        KCkgeyByZXR1cm4gIkVtYmVyLkNvcmVPYmplY3QiOyB9OwoKQ29yZU9iamVj
        dC5Qcm90b3R5cGVNaXhpbiA9IE1peGluLmNyZWF0ZSh7CiAgcmVvcGVuOiBm
        dW5jdGlvbigpIHsKICAgIGFwcGx5TWl4aW4odGhpcywgYXJndW1lbnRzLCB0
        cnVlKTsKICAgIHJldHVybiB0aGlzOwogIH0sCgogIC8qKgogICAgQW4gb3Zl
        cnJpZGFibGUgbWV0aG9kIGNhbGxlZCB3aGVuIG9iamVjdHMgYXJlIGluc3Rh
        bnRpYXRlZC4gQnkgZGVmYXVsdCwKICAgIGRvZXMgbm90aGluZyB1bmxlc3Mg
        aXQgaXMgb3ZlcnJpZGRlbiBkdXJpbmcgY2xhc3MgZGVmaW5pdGlvbi4KCiAg
        ICBFeGFtcGxlOgoKICAgIGBgYGphdmFzY3JpcHQKICAgIEFwcC5QZXJzb24g
        PSBFbWJlci5PYmplY3QuZXh0ZW5kKHsKICAgICAgaW5pdDogZnVuY3Rpb24o
        KSB7CiAgICAgICAgYWxlcnQoJ05hbWUgaXMgJyArIHRoaXMuZ2V0KCduYW1l
        JykpOwogICAgICB9CiAgICB9KTsKCiAgICB2YXIgc3RldmUgPSBBcHAuUGVy
        c29uLmNyZWF0ZSh7CiAgICAgIG5hbWU6ICJTdGV2ZSIKICAgIH0pOwoKICAg
        IC8vIGFsZXJ0cyAnTmFtZSBpcyBTdGV2ZScuCiAgICBgYGAKCiAgICBOT1RF
        OiBJZiB5b3UgZG8gb3ZlcnJpZGUgYGluaXRgIGZvciBhIGZyYW1ld29yayBj
        bGFzcyBsaWtlIGBFbWJlci5WaWV3YCBvcgogICAgYEVtYmVyLkFycmF5Q29u
        dHJvbGxlcmAsIGJlIHN1cmUgdG8gY2FsbCBgdGhpcy5fc3VwZXIoKWAgaW4g
        eW91cgogICAgYGluaXRgIGRlY2xhcmF0aW9uISBJZiB5b3UgZG9uJ3QsIEVt
        YmVyIG1heSBub3QgaGF2ZSBhbiBvcHBvcnR1bml0eSB0bwogICAgZG8gaW1w
        b3J0YW50IHNldHVwIHdvcmssIGFuZCB5b3UnbGwgc2VlIHN0cmFuZ2UgYmVo
        YXZpb3IgaW4geW91cgogICAgYXBwbGljYXRpb24uCgogICAgQG1ldGhvZCBp
        bml0CiAgKi8KICBpbml0OiBmdW5jdGlvbigpIHt9LAoKICAvKioKICAgIERl
        ZmluZXMgdGhlIHByb3BlcnRpZXMgdGhhdCB3aWxsIGJlIGNvbmNhdGVuYXRl
        ZCBmcm9tIHRoZSBzdXBlcmNsYXNzCiAgICAoaW5zdGVhZCBvZiBvdmVycmlk
        ZGVuKS4KCiAgICBCeSBkZWZhdWx0LCB3aGVuIHlvdSBleHRlbmQgYW4gRW1i
        ZXIgY2xhc3MgYSBwcm9wZXJ0eSBkZWZpbmVkIGluCiAgICB0aGUgc3ViY2xh
        c3Mgb3ZlcnJpZGVzIGEgcHJvcGVydHkgd2l0aCB0aGUgc2FtZSBuYW1lIHRo
        YXQgaXMgZGVmaW5lZAogICAgaW4gdGhlIHN1cGVyY2xhc3MuIEhvd2V2ZXIs
        IHRoZXJlIGFyZSBzb21lIGNhc2VzIHdoZXJlIGl0IGlzIHByZWZlcmFibGUK
        ICAgIHRvIGJ1aWxkIHVwIGEgcHJvcGVydHkncyB2YWx1ZSBieSBjb21iaW5p
        bmcgdGhlIHN1cGVyY2xhc3MnIHByb3BlcnR5CiAgICB2YWx1ZSB3aXRoIHRo
        ZSBzdWJjbGFzcycgdmFsdWUuIEFuIGV4YW1wbGUgb2YgdGhpcyBpbiB1c2Ug
        d2l0aGluIEVtYmVyCiAgICBpcyB0aGUgYGNsYXNzTmFtZXNgIHByb3BlcnR5
        IG9mIGBFbWJlci5WaWV3YC4KCiAgICBIZXJlIGlzIHNvbWUgc2FtcGxlIGNv
        ZGUgc2hvd2luZyB0aGUgZGlmZmVyZW5jZSBiZXR3ZWVuIGEgY29uY2F0ZW5h
        dGVkCiAgICBwcm9wZXJ0eSBhbmQgYSBub3JtYWwgb25lOgoKICAgIGBgYGph
        dmFzY3JpcHQKICAgIEFwcC5CYXJWaWV3ID0gRW1iZXIuVmlldy5leHRlbmQo
        ewogICAgICBzb21lTm9uQ29uY2F0ZW5hdGVkUHJvcGVydHk6IFsnYmFyJ10s
        CiAgICAgIGNsYXNzTmFtZXM6IFsnYmFyJ10KICAgIH0pOwoKICAgIEFwcC5G
        b29CYXJWaWV3ID0gQXBwLkJhclZpZXcuZXh0ZW5kKHsKICAgICAgc29tZU5v
        bkNvbmNhdGVuYXRlZFByb3BlcnR5OiBbJ2ZvbyddLAogICAgICBjbGFzc05h
        bWVzOiBbJ2ZvbyddLAogICAgfSk7CgogICAgdmFyIGZvb0JhclZpZXcgPSBB
        cHAuRm9vQmFyVmlldy5jcmVhdGUoKTsKICAgIGZvb0JhclZpZXcuZ2V0KCdz
        b21lTm9uQ29uY2F0ZW5hdGVkUHJvcGVydHknKTsgLy8gWydmb28nXQogICAg
        Zm9vQmFyVmlldy5nZXQoJ2NsYXNzTmFtZXMnKTsgLy8gWydlbWJlci12aWV3
        JywgJ2JhcicsICdmb28nXQogICAgYGBgCgogICAgVGhpcyBiZWhhdmlvciBl
        eHRlbmRzIHRvIG9iamVjdCBjcmVhdGlvbiBhcyB3ZWxsLiBDb250aW51aW5n
        IHRoZQogICAgYWJvdmUgZXhhbXBsZToKCiAgICBgYGBqYXZhc2NyaXB0CiAg
        ICB2YXIgdmlldyA9IEFwcC5Gb29CYXJWaWV3LmNyZWF0ZSh7CiAgICAgIHNv
        bWVOb25Db25jYXRlbmF0ZWRQcm9wZXJ0eTogWydiYXonXSwKICAgICAgY2xh
        c3NOYW1lczogWydiYXonXQogICAgfSkKICAgIHZpZXcuZ2V0KCdzb21lTm9u
        Q29uY2F0ZW5hdGVkUHJvcGVydHknKTsgLy8gWydiYXonXQogICAgdmlldy5n
        ZXQoJ2NsYXNzTmFtZXMnKTsgLy8gWydlbWJlci12aWV3JywgJ2JhcicsICdm
        b28nLCAnYmF6J10KICAgIGBgYAogICAgQWRkaW5nIGEgc2luZ2xlIHByb3Bl
        cnR5IHRoYXQgaXMgbm90IGFuIGFycmF5IHdpbGwganVzdCBhZGQgaXQgaW4g
        dGhlIGFycmF5OgoKICAgIGBgYGphdmFzY3JpcHQKICAgIHZhciB2aWV3ID0g
        QXBwLkZvb0JhclZpZXcuY3JlYXRlKHsKICAgICAgY2xhc3NOYW1lczogJ2Jh
        eicKICAgIH0pCiAgICB2aWV3LmdldCgnY2xhc3NOYW1lcycpOyAvLyBbJ2Vt
        YmVyLXZpZXcnLCAnYmFyJywgJ2ZvbycsICdiYXonXQogICAgYGBgCgogICAg
        VXNpbmcgdGhlIGBjb25jYXRlbmF0ZWRQcm9wZXJ0aWVzYCBwcm9wZXJ0eSwg
        d2UgY2FuIHRlbGwgdG8gRW1iZXIgdGhhdCBtaXgKICAgIHRoZSBjb250ZW50
        IG9mIHRoZSBwcm9wZXJ0aWVzLgoKICAgIEluIGBFbWJlci5WaWV3YCB0aGUg
        YGNsYXNzTmFtZUJpbmRpbmdzYCBhbmQgYGF0dHJpYnV0ZUJpbmRpbmdzYCBw
        cm9wZXJ0aWVzCiAgICBhcmUgYWxzbyBjb25jYXRlbmF0ZWQsIGluIGFkZGl0
        aW9uIHRvIGBjbGFzc05hbWVzYC4KCiAgICBUaGlzIGZlYXR1cmUgaXMgYXZh
        aWxhYmxlIGZvciB5b3UgdG8gdXNlIHRocm91Z2hvdXQgdGhlIEVtYmVyIG9i
        amVjdCBtb2RlbCwKICAgIGFsdGhvdWdoIHR5cGljYWwgYXBwIGRldmVsb3Bl
        cnMgYXJlIGxpa2VseSB0byB1c2UgaXQgaW5mcmVxdWVudGx5LiBTaW5jZQog
        ICAgaXQgY2hhbmdlcyBleHBlY3RhdGlvbnMgYWJvdXQgYmVoYXZpb3Igb2Yg
        cHJvcGVydGllcywgeW91IHNob3VsZCBwcm9wZXJseQogICAgZG9jdW1lbnQg
        aXRzIHVzYWdlIGluIGVhY2ggaW5kaXZpZHVhbCBjb25jYXRlbmF0ZWQgcHJv
        cGVydHkgKHRvIG5vdAogICAgbWlzbGVhZCB5b3VyIHVzZXJzIHRvIHRoaW5r
        IHRoZXkgY2FuIG92ZXJyaWRlIHRoZSBwcm9wZXJ0eSBpbiBhIHN1YmNsYXNz
        KS4KCiAgICBAcHJvcGVydHkgY29uY2F0ZW5hdGVkUHJvcGVydGllcwogICAg
        QHR5cGUgQXJyYXkKICAgIEBkZWZhdWx0IG51bGwKICAqLwogIGNvbmNhdGVu
        YXRlZFByb3BlcnRpZXM6IG51bGwsCgogIC8qKgogICAgRGVzdHJveWVkIG9i
        amVjdCBwcm9wZXJ0eSBmbGFnLgoKICAgIGlmIHRoaXMgcHJvcGVydHkgaXMg
        YHRydWVgIHRoZSBvYnNlcnZlcnMgYW5kIGJpbmRpbmdzIHdlcmUgYWxyZWFk
        eQogICAgcmVtb3ZlZCBieSB0aGUgZWZmZWN0IG9mIGNhbGxpbmcgdGhlIGBk
        ZXN0cm95KClgIG1ldGhvZC4KCiAgICBAcHJvcGVydHkgaXNEZXN0cm95ZWQK
        ICAgIEBkZWZhdWx0IGZhbHNlCiAgKi8KICBpc0Rlc3Ryb3llZDogZmFsc2Us
        CgogIC8qKgogICAgRGVzdHJ1Y3Rpb24gc2NoZWR1bGVkIGZsYWcuIFRoZSBg
        ZGVzdHJveSgpYCBtZXRob2QgaGFzIGJlZW4gY2FsbGVkLgoKICAgIFRoZSBv
        YmplY3Qgc3RheXMgaW50YWN0IHVudGlsIHRoZSBlbmQgb2YgdGhlIHJ1biBs
        b29wIGF0IHdoaWNoIHBvaW50CiAgICB0aGUgYGlzRGVzdHJveWVkYCBmbGFn
        IGlzIHNldC4KCiAgICBAcHJvcGVydHkgaXNEZXN0cm95aW5nCiAgICBAZGVm
        YXVsdCBmYWxzZQogICovCiAgaXNEZXN0cm95aW5nOiBmYWxzZSwKCiAgLyoq
        CiAgICBEZXN0cm95cyBhbiBvYmplY3QgYnkgc2V0dGluZyB0aGUgYGlzRGVz
        dHJveWVkYCBmbGFnIGFuZCByZW1vdmluZyBpdHMKICAgIG1ldGFkYXRhLCB3
        aGljaCBlZmZlY3RpdmVseSBkZXN0cm95cyBvYnNlcnZlcnMgYW5kIGJpbmRp
        bmdzLgoKICAgIElmIHlvdSB0cnkgdG8gc2V0IGEgcHJvcGVydHkgb24gYSBk
        ZXN0cm95ZWQgb2JqZWN0LCBhbiBleGNlcHRpb24gd2lsbCBiZQogICAgcmFp
        c2VkLgoKICAgIE5vdGUgdGhhdCBkZXN0cnVjdGlvbiBpcyBzY2hlZHVsZWQg
        Zm9yIHRoZSBlbmQgb2YgdGhlIHJ1biBsb29wIGFuZCBkb2VzIG5vdAogICAg
        aGFwcGVuIGltbWVkaWF0ZWx5LiAgSXQgd2lsbCBzZXQgYW4gaXNEZXN0cm95
        aW5nIGZsYWcgaW1tZWRpYXRlbHkuCgogICAgQG1ldGhvZCBkZXN0cm95CiAg
        ICBAcmV0dXJuIHtFbWJlci5PYmplY3R9IHJlY2VpdmVyCiAgKi8KICBkZXN0
        cm95OiBmdW5jdGlvbigpIHsKICAgIGlmICh0aGlzLmlzRGVzdHJveWluZykg
        eyByZXR1cm47IH0KICAgIHRoaXMuaXNEZXN0cm95aW5nID0gdHJ1ZTsKCiAg
        ICBzY2hlZHVsZSgnYWN0aW9ucycsIHRoaXMsIHRoaXMud2lsbERlc3Ryb3kp
        OwogICAgc2NoZWR1bGUoJ2Rlc3Ryb3knLCB0aGlzLCB0aGlzLl9zY2hlZHVs
        ZWREZXN0cm95KTsKICAgIHJldHVybiB0aGlzOwogIH0sCgogIC8qKgogICAg
        T3ZlcnJpZGUgdG8gaW1wbGVtZW50IHRlYXJkb3duLgoKICAgIEBtZXRob2Qg
        d2lsbERlc3Ryb3kKICAgKi8KICB3aWxsRGVzdHJveTogRW1iZXIuSywKCiAg
        LyoqCiAgICBJbnZva2VkIGJ5IHRoZSBydW4gbG9vcCB0byBhY3R1YWxseSBk
        ZXN0cm95IHRoZSBvYmplY3QuIFRoaXMgaXMKICAgIHNjaGVkdWxlZCBmb3Ig
        ZXhlY3V0aW9uIGJ5IHRoZSBgZGVzdHJveWAgbWV0aG9kLgoKICAgIEBwcml2
        YXRlCiAgICBAbWV0aG9kIF9zY2hlZHVsZWREZXN0cm95CiAgKi8KICBfc2No
        ZWR1bGVkRGVzdHJveTogZnVuY3Rpb24oKSB7CiAgICBpZiAodGhpcy5pc0Rl
        c3Ryb3llZCkgeyByZXR1cm47IH0KICAgIGRlc3Ryb3kodGhpcyk7CiAgICB0
        aGlzLmlzRGVzdHJveWVkID0gdHJ1ZTsKICB9LAoKICBiaW5kOiBmdW5jdGlv
        bih0bywgZnJvbSkgewogICAgaWYgKCEoZnJvbSBpbnN0YW5jZW9mIEVtYmVy
        LkJpbmRpbmcpKSB7IGZyb20gPSBFbWJlci5CaW5kaW5nLmZyb20oZnJvbSk7
        IH0KICAgIGZyb20udG8odG8pLmNvbm5lY3QodGhpcyk7CiAgICByZXR1cm4g
        ZnJvbTsKICB9LAoKICAvKioKICAgIFJldHVybnMgYSBzdHJpbmcgcmVwcmVz
        ZW50YXRpb24gd2hpY2ggYXR0ZW1wdHMgdG8gcHJvdmlkZSBtb3JlIGluZm9y
        bWF0aW9uCiAgICB0aGFuIEphdmFzY3JpcHQncyBgdG9TdHJpbmdgIHR5cGlj
        YWxseSBkb2VzLCBpbiBhIGdlbmVyaWMgd2F5IGZvciBhbGwgRW1iZXIKICAg
        IG9iamVjdHMuCgogICAgYGBgamF2YXNjcmlwdAogICAgQXBwLlBlcnNvbiA9
        IEVtLk9iamVjdC5leHRlbmQoKQogICAgcGVyc29uID0gQXBwLlBlcnNvbi5j
        cmVhdGUoKQogICAgcGVyc29uLnRvU3RyaW5nKCkgLy89PiAiPEFwcC5QZXJz
        b246ZW1iZXIxMDI0PiIKICAgIGBgYAoKICAgIElmIHRoZSBvYmplY3QncyBj
        bGFzcyBpcyBub3QgZGVmaW5lZCBvbiBhbiBFbWJlciBuYW1lc3BhY2UsIGl0
        IHdpbGwKICAgIGluZGljYXRlIGl0IGlzIGEgc3ViY2xhc3Mgb2YgdGhlIHJl
        Z2lzdGVyZWQgc3VwZXJjbGFzczoKCiAgIGBgYGphdmFzY3JpcHQKICAgIFN0
        dWRlbnQgPSBBcHAuUGVyc29uLmV4dGVuZCgpCiAgICBzdHVkZW50ID0gU3R1
        ZGVudC5jcmVhdGUoKQogICAgc3R1ZGVudC50b1N0cmluZygpIC8vPT4gIjwo
        c3ViY2xhc3Mgb2YgQXBwLlBlcnNvbik6ZW1iZXIxMDI1PiIKICAgIGBgYAoK
        ICAgIElmIHRoZSBtZXRob2QgYHRvU3RyaW5nRXh0ZW5zaW9uYCBpcyBkZWZp
        bmVkLCBpdHMgcmV0dXJuIHZhbHVlIHdpbGwgYmUKICAgIGluY2x1ZGVkIGlu
        IHRoZSBvdXRwdXQuCgogICAgYGBgamF2YXNjcmlwdAogICAgQXBwLlRlYWNo
        ZXIgPSBBcHAuUGVyc29uLmV4dGVuZCh7CiAgICAgIHRvU3RyaW5nRXh0ZW5z
        aW9uOiBmdW5jdGlvbigpIHsKICAgICAgICByZXR1cm4gdGhpcy5nZXQoJ2Z1
        bGxOYW1lJyk7CiAgICAgIH0KICAgIH0pOwogICAgdGVhY2hlciA9IEFwcC5U
        ZWFjaGVyLmNyZWF0ZSgpCiAgICB0ZWFjaGVyLnRvU3RyaW5nKCk7IC8vPT4g
        IjxBcHAuVGVhY2hlcjplbWJlcjEwMjY6VG9tIERhbGU+IgogICAgYGBgCgog
        ICAgQG1ldGhvZCB0b1N0cmluZwogICAgQHJldHVybiB7U3RyaW5nfSBzdHJp
        bmcgcmVwcmVzZW50YXRpb24KICAqLwogIHRvU3RyaW5nOiBmdW5jdGlvbiB0
        b1N0cmluZygpIHsKICAgIHZhciBoYXNUb1N0cmluZ0V4dGVuc2lvbiA9IHR5
        cGVvZiB0aGlzLnRvU3RyaW5nRXh0ZW5zaW9uID09PSAnZnVuY3Rpb24nLAog
        ICAgICAgIGV4dGVuc2lvbiA9IGhhc1RvU3RyaW5nRXh0ZW5zaW9uID8gIjoi
        ICsgdGhpcy50b1N0cmluZ0V4dGVuc2lvbigpIDogJyc7CiAgICB2YXIgcmV0
        ID0gJzwnK3RoaXMuY29uc3RydWN0b3IudG9TdHJpbmcoKSsnOicrZ3VpZEZv
        cih0aGlzKStleHRlbnNpb24rJz4nOwogICAgdGhpcy50b1N0cmluZyA9IG1h
        a2VUb1N0cmluZyhyZXQpOwogICAgcmV0dXJuIHJldDsKICB9Cn0pOwoKQ29y
        ZU9iamVjdC5Qcm90b3R5cGVNaXhpbi5vd25lckNvbnN0cnVjdG9yID0gQ29y
        ZU9iamVjdDsKCmZ1bmN0aW9uIG1ha2VUb1N0cmluZyhyZXQpIHsKICByZXR1
        cm4gZnVuY3Rpb24oKSB7IHJldHVybiByZXQ7IH07Cn0KCmlmIChFbWJlci5j
        b25maWcub3ZlcnJpZGVQcm90b3R5cGVNaXhpbikgewogIEVtYmVyLmNvbmZp
        Zy5vdmVycmlkZVByb3RvdHlwZU1peGluKENvcmVPYmplY3QuUHJvdG90eXBl
        TWl4aW4pOwp9CgpDb3JlT2JqZWN0Ll9fc3VwZXJfXyA9IG51bGw7Cgp2YXIg
        Q2xhc3NNaXhpbiA9IE1peGluLmNyZWF0ZSh7CgogIENsYXNzTWl4aW46IEVt
        YmVyLnJlcXVpcmVkKCksCgogIFByb3RvdHlwZU1peGluOiBFbWJlci5yZXF1
        aXJlZCgpLAoKICBpc0NsYXNzOiB0cnVlLAoKICBpc01ldGhvZDogZmFsc2Us
        CgogIC8qKgogICAgQ3JlYXRlcyBhIG5ldyBzdWJjbGFzcy4KCiAgICBgYGBq
        YXZhc2NyaXB0CiAgICBBcHAuUGVyc29uID0gRW1iZXIuT2JqZWN0LmV4dGVu
        ZCh7CiAgICAgIHNheTogZnVuY3Rpb24odGhpbmcpIHsKICAgICAgICBhbGVy
        dCh0aGluZyk7CiAgICAgICB9CiAgICB9KTsKICAgIGBgYAoKICAgIFRoaXMg
        ZGVmaW5lcyBhIG5ldyBzdWJjbGFzcyBvZiBFbWJlci5PYmplY3Q6IGBBcHAu
        UGVyc29uYC4gSXQgY29udGFpbnMgb25lIG1ldGhvZDogYHNheSgpYC4KCiAg
        ICBZb3UgY2FuIGFsc28gY3JlYXRlIGEgc3ViY2xhc3MgZnJvbSBhbnkgZXhp
        c3RpbmcgY2xhc3MgYnkgY2FsbGluZyBpdHMgYGV4dGVuZCgpYCAgbWV0aG9k
        LiBGb3IgZXhhbXBsZSwgeW91IG1pZ2h0IHdhbnQgdG8gY3JlYXRlIGEgc3Vi
        Y2xhc3Mgb2YgRW1iZXIncyBidWlsdC1pbiBgRW1iZXIuVmlld2AgY2xhc3M6
        CgogICAgYGBgamF2YXNjcmlwdAogICAgQXBwLlBlcnNvblZpZXcgPSBFbWJl
        ci5WaWV3LmV4dGVuZCh7CiAgICAgIHRhZ05hbWU6ICdsaScsCiAgICAgIGNs
        YXNzTmFtZUJpbmRpbmdzOiBbJ2lzQWRtaW5pc3RyYXRvciddCiAgICB9KTsK
        ICAgIGBgYAoKICAgIFdoZW4gZGVmaW5pbmcgYSBzdWJjbGFzcywgeW91IGNh
        biBvdmVycmlkZSBtZXRob2RzIGJ1dCBzdGlsbCBhY2Nlc3MgdGhlIGltcGxl
        bWVudGF0aW9uIG9mIHlvdXIgcGFyZW50IGNsYXNzIGJ5IGNhbGxpbmcgdGhl
        IHNwZWNpYWwgYF9zdXBlcigpYCBtZXRob2Q6CgogICAgYGBgamF2YXNjcmlw
        dAogICAgQXBwLlBlcnNvbiA9IEVtYmVyLk9iamVjdC5leHRlbmQoewogICAg
        ICBzYXk6IGZ1bmN0aW9uKHRoaW5nKSB7CiAgICAgICAgdmFyIG5hbWUgPSB0
        aGlzLmdldCgnbmFtZScpOwogICAgICAgIGFsZXJ0KG5hbWUgKyAnIHNheXM6
        ICcgKyB0aGluZyk7CiAgICAgIH0KICAgIH0pOwoKICAgIEFwcC5Tb2xkaWVy
        ID0gQXBwLlBlcnNvbi5leHRlbmQoewogICAgICBzYXk6IGZ1bmN0aW9uKHRo
        aW5nKSB7CiAgICAgICAgdGhpcy5fc3VwZXIodGhpbmcgKyAiLCBzaXIhIik7
        CiAgICAgIH0sCiAgICAgIG1hcmNoOiBmdW5jdGlvbihudW1iZXJPZkhvdXJz
        KSB7CiAgICAgICAgYWxlcnQodGhpcy5nZXQoJ25hbWUnKSArICcgbWFyY2hl
        cyBmb3IgJyArIG51bWJlck9mSG91cnMgKyAnIGhvdXJzLicpCiAgICAgIH0K
        ICAgIH0pOwoKICAgIHZhciB5ZWh1ZGEgPSBBcHAuU29sZGllci5jcmVhdGUo
        ewogICAgICBuYW1lOiAiWWVodWRhIEthdHoiCiAgICB9KTsKCiAgICB5ZWh1
        ZGEuc2F5KCJZZXMiKTsgIC8vIGFsZXJ0cyAiWWVodWRhIEthdHogc2F5czog
        WWVzLCBzaXIhIgogICAgYGBgCgogICAgVGhlIGBjcmVhdGUoKWAgb24gbGlu
        ZSAjMTcgY3JlYXRlcyBhbiAqaW5zdGFuY2UqIG9mIHRoZSBgQXBwLlNvbGRp
        ZXJgIGNsYXNzLiBUaGUgYGV4dGVuZCgpYCBvbiBsaW5lICM4IGNyZWF0ZXMg
        YSAqc3ViY2xhc3MqIG9mIGBBcHAuUGVyc29uYC4gQW55IGluc3RhbmNlIG9m
        IHRoZSBgQXBwLlBlcnNvbmAgY2xhc3Mgd2lsbCAqbm90KiBoYXZlIHRoZSBg
        bWFyY2goKWAgbWV0aG9kLgoKICAgIFlvdSBjYW4gYWxzbyBwYXNzIGBFbWJl
        ci5NaXhpbmAgY2xhc3NlcyB0byBhZGQgYWRkaXRpb25hbCBwcm9wZXJ0aWVz
        IHRvIHRoZSBzdWJjbGFzcy4KCiAgICBgYGBqYXZhc2NyaXB0CiAgICBBcHAu
        UGVyc29uID0gRW1iZXIuT2JqZWN0LmV4dGVuZCh7CiAgICAgIHNheTogZnVu
        Y3Rpb24odGhpbmcpIHsKICAgICAgICBhbGVydCh0aGlzLmdldCgnbmFtZScp
        ICsgJyBzYXlzOiAnICsgdGhpbmcpOwogICAgICB9CiAgICB9KTsKCiAgICBB
        cHAuU2luZ2luZ01peGluID0gRW1iZXIuTWl4aW4uY3JlYXRlKHsKICAgICAg
        c2luZzogZnVuY3Rpb24odGhpbmcpewogICAgICAgIGFsZXJ0KHRoaXMuZ2V0
        KCduYW1lJykgKyAnIHNpbmdzOiBsYSBsYSBsYSAnICsgdGhpbmcpOwogICAg
        ICB9CiAgICB9KTsKCiAgICBBcHAuQnJvYWR3YXlTdGFyID0gQXBwLlBlcnNv
        bi5leHRlbmQoQXBwLlNpbmdpbmdNaXhpbiwgewogICAgICBkYW5jZTogZnVu
        Y3Rpb24oKSB7CiAgICAgICAgYWxlcnQodGhpcy5nZXQoJ25hbWUnKSArICcg
        ZGFuY2VzOiB0YXAgdGFwIHRhcCB0YXAgJyk7CiAgICAgIH0KICAgIH0pOwog
        ICAgYGBgCgogICAgVGhlIGBBcHAuQnJvYWR3YXlTdGFyYCBjbGFzcyBjb250
        YWlucyB0aHJlZSBtZXRob2RzOiBgc2F5KClgLCBgc2luZygpYCwgYW5kIGBk
        YW5jZSgpYC4KCiAgICBAbWV0aG9kIGV4dGVuZAogICAgQHN0YXRpYwoKICAg
        IEBwYXJhbSB7RW1iZXIuTWl4aW59IFttaXhpbnNdKiBPbmUgb3IgbW9yZSBF
        bWJlci5NaXhpbiBjbGFzc2VzCiAgICBAcGFyYW0ge09iamVjdH0gW2FyZ3Vt
        ZW50c10qIE9iamVjdCBjb250YWluaW5nIHZhbHVlcyB0byB1c2Ugd2l0aGlu
        IHRoZSBuZXcgY2xhc3MKICAqLwogIGV4dGVuZDogZnVuY3Rpb24oKSB7CiAg
        ICB2YXIgQ2xhc3MgPSBtYWtlQ3RvcigpLCBwcm90bzsKICAgIENsYXNzLkNs
        YXNzTWl4aW4gPSBNaXhpbi5jcmVhdGUodGhpcy5DbGFzc01peGluKTsKICAg
        IENsYXNzLlByb3RvdHlwZU1peGluID0gTWl4aW4uY3JlYXRlKHRoaXMuUHJv
        dG90eXBlTWl4aW4pOwoKICAgIENsYXNzLkNsYXNzTWl4aW4ub3duZXJDb25z
        dHJ1Y3RvciA9IENsYXNzOwogICAgQ2xhc3MuUHJvdG90eXBlTWl4aW4ub3du
        ZXJDb25zdHJ1Y3RvciA9IENsYXNzOwoKICAgIHJlb3Blbi5hcHBseShDbGFz
        cy5Qcm90b3R5cGVNaXhpbiwgYXJndW1lbnRzKTsKCiAgICBDbGFzcy5zdXBl
        cmNsYXNzID0gdGhpczsKICAgIENsYXNzLl9fc3VwZXJfXyAgPSB0aGlzLnBy
        b3RvdHlwZTsKCiAgICBwcm90byA9IENsYXNzLnByb3RvdHlwZSA9IG9fY3Jl
        YXRlKHRoaXMucHJvdG90eXBlKTsKICAgIHByb3RvLmNvbnN0cnVjdG9yID0g
        Q2xhc3M7CiAgICBnZW5lcmF0ZUd1aWQocHJvdG8pOwogICAgbWV0YShwcm90
        bykucHJvdG8gPSBwcm90bzsgLy8gdGhpcyB3aWxsIGRpc2FibGUgb2JzZXJ2
        ZXJzIG9uIHByb3RvdHlwZQoKICAgIENsYXNzLkNsYXNzTWl4aW4uYXBwbHko
        Q2xhc3MpOwogICAgcmV0dXJuIENsYXNzOwogIH0sCgogIC8qKgogICAgRXF1
        aXZhbGVudCB0byBkb2luZyBgZXh0ZW5kKGFyZ3VtZW50cykuY3JlYXRlKClg
        LgogICAgSWYgcG9zc2libGUgdXNlIHRoZSBub3JtYWwgYGNyZWF0ZWAgbWV0
        aG9kIGluc3RlYWQuCgogICAgQG1ldGhvZCBjcmVhdGVXaXRoTWl4aW5zCiAg
        ICBAc3RhdGljCiAgICBAcGFyYW0gW2FyZ3VtZW50c10qCiAgKi8KICBjcmVh
        dGVXaXRoTWl4aW5zOiBmdW5jdGlvbigpIHsKICAgIHZhciBDID0gdGhpczsK
        ICAgIGlmIChhcmd1bWVudHMubGVuZ3RoPjApIHsgdGhpcy5faW5pdE1peGlu
        cyhhcmd1bWVudHMpOyB9CiAgICByZXR1cm4gbmV3IEMoKTsKICB9LAoKICAv
        KioKICAgIENyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgYSBjbGFzcy4gQWNjZXB0
        cyBlaXRoZXIgbm8gYXJndW1lbnRzLCBvciBhbiBvYmplY3QKICAgIGNvbnRh
        aW5pbmcgdmFsdWVzIHRvIGluaXRpYWxpemUgdGhlIG5ld2x5IGluc3RhbnRp
        YXRlZCBvYmplY3Qgd2l0aC4KCiAgICBgYGBqYXZhc2NyaXB0CiAgICBBcHAu
        UGVyc29uID0gRW1iZXIuT2JqZWN0LmV4dGVuZCh7CiAgICAgIGhlbGxvV29y
        bGQ6IGZ1bmN0aW9uKCkgewogICAgICAgIGFsZXJ0KCJIaSwgbXkgbmFtZSBp
        cyAiICsgdGhpcy5nZXQoJ25hbWUnKSk7CiAgICAgIH0KICAgIH0pOwoKICAg
        IHZhciB0b20gPSBBcHAuUGVyc29uLmNyZWF0ZSh7CiAgICAgIG5hbWU6ICdU
        b20gRGFsZScKICAgIH0pOwoKICAgIHRvbS5oZWxsb1dvcmxkKCk7IC8vIGFs
        ZXJ0cyAiSGksIG15IG5hbWUgaXMgVG9tIERhbGUiLgogICAgYGBgCgogICAg
        YGNyZWF0ZWAgd2lsbCBjYWxsIHRoZSBgaW5pdGAgZnVuY3Rpb24gaWYgZGVm
        aW5lZCBkdXJpbmcKICAgIGBFbWJlci5BbnlPYmplY3QuZXh0ZW5kYAoKICAg
        IElmIG5vIGFyZ3VtZW50cyBhcmUgcGFzc2VkIHRvIGBjcmVhdGVgLCBpdCB3
        aWxsIG5vdCBzZXQgdmFsdWVzIHRvIHRoZSBuZXcKICAgIGluc3RhbmNlIGR1
        cmluZyBpbml0aWFsaXphdGlvbjoKCiAgICBgYGBqYXZhc2NyaXB0CiAgICB2
        YXIgbm9OYW1lID0gQXBwLlBlcnNvbi5jcmVhdGUoKTsKICAgIG5vTmFtZS5o
        ZWxsb1dvcmxkKCk7IC8vIGFsZXJ0cyB1bmRlZmluZWQKICAgIGBgYAoKICAg
        IE5PVEU6IEZvciBwZXJmb3JtYW5jZSByZWFzb25zLCB5b3UgY2Fubm90IGRl
        Y2xhcmUgbWV0aG9kcyBvciBjb21wdXRlZAogICAgcHJvcGVydGllcyBkdXJp
        bmcgYGNyZWF0ZWAuIFlvdSBzaG91bGQgaW5zdGVhZCBkZWNsYXJlIG1ldGhv
        ZHMgYW5kIGNvbXB1dGVkCiAgICBwcm9wZXJ0aWVzIHdoZW4gdXNpbmcgYGV4
        dGVuZGAgb3IgdXNlIHRoZSBgY3JlYXRlV2l0aE1peGluc2Agc2hvcnRoYW5k
        LgoKICAgIEBtZXRob2QgY3JlYXRlCiAgICBAc3RhdGljCiAgICBAcGFyYW0g
        W2FyZ3VtZW50c10qCiAgKi8KICBjcmVhdGU6IGZ1bmN0aW9uKCkgewogICAg
        dmFyIEMgPSB0aGlzOwogICAgaWYgKGFyZ3VtZW50cy5sZW5ndGg+MCkgeyB0
        aGlzLl9pbml0UHJvcGVydGllcyhhcmd1bWVudHMpOyB9CiAgICByZXR1cm4g
        bmV3IEMoKTsKICB9LAoKICAvKioKICAgIEF1Z21lbnRzIGEgY29uc3RydWN0
        b3IncyBwcm90b3R5cGUgd2l0aCBhZGRpdGlvbmFsCiAgICBwcm9wZXJ0aWVz
        IGFuZCBmdW5jdGlvbnM6CgogICAgYGBgamF2YXNjcmlwdAogICAgTXlPYmpl
        Y3QgPSBFbWJlci5PYmplY3QuZXh0ZW5kKHsKICAgICAgbmFtZTogJ2FuIG9i
        amVjdCcKICAgIH0pOwoKICAgIG8gPSBNeU9iamVjdC5jcmVhdGUoKTsKICAg
        IG8uZ2V0KCduYW1lJyk7IC8vICdhbiBvYmplY3QnCgogICAgTXlPYmplY3Qu
        cmVvcGVuKHsKICAgICAgc2F5OiBmdW5jdGlvbihtc2cpewogICAgICAgIGNv
        bnNvbGUubG9nKG1zZyk7CiAgICAgIH0KICAgIH0pCgogICAgbzIgPSBNeU9i
        amVjdC5jcmVhdGUoKTsKICAgIG8yLnNheSgiaGVsbG8iKTsgLy8gbG9ncyAi
        aGVsbG8iCgogICAgby5zYXkoImdvb2RieWUiKTsgLy8gbG9ncyAiZ29vZGJ5
        ZSIKICAgIGBgYAoKICAgIFRvIGFkZCBmdW5jdGlvbnMgYW5kIHByb3BlcnRp
        ZXMgdG8gdGhlIGNvbnN0cnVjdG9yIGl0c2VsZiwKICAgIHNlZSBgcmVvcGVu
        Q2xhc3NgCgogICAgQG1ldGhvZCByZW9wZW4KICAqLwogIHJlb3BlbjogZnVu
        Y3Rpb24oKSB7CiAgICB0aGlzLndpbGxSZW9wZW4oKTsKICAgIHJlb3Blbi5h
        cHBseSh0aGlzLlByb3RvdHlwZU1peGluLCBhcmd1bWVudHMpOwogICAgcmV0
        dXJuIHRoaXM7CiAgfSwKCiAgLyoqCiAgICBBdWdtZW50cyBhIGNvbnN0cnVj
        dG9yJ3Mgb3duIHByb3BlcnRpZXMgYW5kIGZ1bmN0aW9uczoKCiAgICBgYGBq
        YXZhc2NyaXB0CiAgICBNeU9iamVjdCA9IEVtYmVyLk9iamVjdC5leHRlbmQo
        ewogICAgICBuYW1lOiAnYW4gb2JqZWN0JwogICAgfSk7CgogICAgTXlPYmpl
        Y3QucmVvcGVuQ2xhc3MoewogICAgICBjYW5CdWlsZDogZmFsc2UKICAgIH0p
        OwoKICAgIE15T2JqZWN0LmNhbkJ1aWxkOyAvLyBmYWxzZQogICAgbyA9IE15
        T2JqZWN0LmNyZWF0ZSgpOwogICAgYGBgCgogICAgSW4gb3RoZXIgd29yZHMs
        IHRoaXMgY3JlYXRlcyBzdGF0aWMgcHJvcGVydGllcyBhbmQgZnVuY3Rpb25z
        IGZvciB0aGUgY2xhc3MuIFRoZXNlIGFyZSBvbmx5IGF2YWlsYWJsZSBvbiB0
        aGUgY2xhc3MKICAgIGFuZCBub3Qgb24gYW55IGluc3RhbmNlIG9mIHRoYXQg
        Y2xhc3MuCgogICAgYGBgamF2YXNjcmlwdAogICAgQXBwLlBlcnNvbiA9IEVt
        YmVyLk9iamVjdC5leHRlbmQoewogICAgICBuYW1lIDogIiIsCiAgICAgIHNh
        eUhlbGxvIDogZnVuY3Rpb24oKXsKICAgICAgICBhbGVydCgiSGVsbG8uIE15
        IG5hbWUgaXMgIiArIHRoaXMuZ2V0KCduYW1lJykpOwogICAgICB9CiAgICB9
        KTsKCiAgICBBcHAuUGVyc29uLnJlb3BlbkNsYXNzKHsKICAgICAgc3BlY2ll
        cyA6ICJIb21vIHNhcGllbnMiLAogICAgICBjcmVhdGVQZXJzb246IGZ1bmN0
        aW9uKG5ld1BlcnNvbnNOYW1lKXsKICAgICAgICByZXR1cm4gQXBwLlBlcnNv
        bi5jcmVhdGUoewogICAgICAgICAgbmFtZTpuZXdQZXJzb25zTmFtZQogICAg
        ICAgIH0pOwogICAgICB9CiAgICB9KTsKCiAgICB2YXIgdG9tID0gQXBwLlBl
        cnNvbi5jcmVhdGUoewogICAgICBuYW1lIDogIlRvbSBEYWxlIgogICAgfSk7
        CiAgICB2YXIgeWVodWRhID0gQXBwLlBlcnNvbi5jcmVhdGVQZXJzb24oIlll
        aHVkYSBLYXR6Iik7CgogICAgdG9tLnNheUhlbGxvKCk7IC8vICJIZWxsby4g
        TXkgbmFtZSBpcyBUb20gRGFsZSIKICAgIHllaHVkYS5zYXlIZWxsbygpOyAv
        LyAiSGVsbG8uIE15IG5hbWUgaXMgWWVodWRhIEthdHoiCiAgICBhbGVydChB
        cHAuUGVyc29uLnNwZWNpZXMpOyAvLyAiSG9tbyBzYXBpZW5zIgogICAgYGBg
        CgogICAgTm90ZSB0aGF0IGBzcGVjaWVzYCBhbmQgYGNyZWF0ZVBlcnNvbmAg
        YXJlICpub3QqIHZhbGlkIG9uIHRoZSBgdG9tYCBhbmQgYHllaHVkYWAKICAg
        IHZhcmlhYmxlcy4gVGhleSBhcmUgb25seSB2YWxpZCBvbiBgQXBwLlBlcnNv
        bmAuCgogICAgVG8gYWRkIGZ1bmN0aW9ucyBhbmQgcHJvcGVydGllcyB0byBp
        bnN0YW5jZXMgb2YKICAgIGEgY29uc3RydWN0b3IgYnkgZXh0ZW5kaW5nIHRo
        ZSBjb25zdHJ1Y3RvcidzIHByb3RvdHlwZQogICAgc2VlIGByZW9wZW5gCgog
        ICAgQG1ldGhvZCByZW9wZW5DbGFzcwogICovCiAgcmVvcGVuQ2xhc3M6IGZ1
        bmN0aW9uKCkgewogICAgcmVvcGVuLmFwcGx5KHRoaXMuQ2xhc3NNaXhpbiwg
        YXJndW1lbnRzKTsKICAgIGFwcGx5TWl4aW4odGhpcywgYXJndW1lbnRzLCBm
        YWxzZSk7CiAgICByZXR1cm4gdGhpczsKICB9LAoKICBkZXRlY3Q6IGZ1bmN0
        aW9uKG9iaikgewogICAgaWYgKCdmdW5jdGlvbicgIT09IHR5cGVvZiBvYmop
        IHsgcmV0dXJuIGZhbHNlOyB9CiAgICB3aGlsZShvYmopIHsKICAgICAgaWYg
        KG9iaj09PXRoaXMpIHsgcmV0dXJuIHRydWU7IH0KICAgICAgb2JqID0gb2Jq
        LnN1cGVyY2xhc3M7CiAgICB9CiAgICByZXR1cm4gZmFsc2U7CiAgfSwKCiAg
        ZGV0ZWN0SW5zdGFuY2U6IGZ1bmN0aW9uKG9iaikgewogICAgcmV0dXJuIG9i
        aiBpbnN0YW5jZW9mIHRoaXM7CiAgfSwKCiAgLyoqCiAgICBJbiBzb21lIGNh
        c2VzLCB5b3UgbWF5IHdhbnQgdG8gYW5ub3RhdGUgY29tcHV0ZWQgcHJvcGVy
        dGllcyB3aXRoIGFkZGl0aW9uYWwKICAgIG1ldGFkYXRhIGFib3V0IGhvdyB0
        aGV5IGZ1bmN0aW9uIG9yIHdoYXQgdmFsdWVzIHRoZXkgb3BlcmF0ZSBvbi4g
        Rm9yCiAgICBleGFtcGxlLCBjb21wdXRlZCBwcm9wZXJ0eSBmdW5jdGlvbnMg
        bWF5IGNsb3NlIG92ZXIgdmFyaWFibGVzIHRoYXQgYXJlIHRoZW4KICAgIG5v
        IGxvbmdlciBhdmFpbGFibGUgZm9yIGludHJvc3BlY3Rpb24uCgogICAgWW91
        IGNhbiBwYXNzIGEgaGFzaCBvZiB0aGVzZSB2YWx1ZXMgdG8gYSBjb21wdXRl
        ZCBwcm9wZXJ0eSBsaWtlIHRoaXM6CgogICAgYGBgamF2YXNjcmlwdAogICAg
        cGVyc29uOiBmdW5jdGlvbigpIHsKICAgICAgdmFyIHBlcnNvbklkID0gdGhp
        cy5nZXQoJ3BlcnNvbklkJyk7CiAgICAgIHJldHVybiBBcHAuUGVyc29uLmNy
        ZWF0ZSh7IGlkOiBwZXJzb25JZCB9KTsKICAgIH0ucHJvcGVydHkoKS5tZXRh
        KHsgdHlwZTogQXBwLlBlcnNvbiB9KQogICAgYGBgCgogICAgT25jZSB5b3Un
        dmUgZG9uZSB0aGlzLCB5b3UgY2FuIHJldHJpZXZlIHRoZSB2YWx1ZXMgc2F2
        ZWQgdG8gdGhlIGNvbXB1dGVkCiAgICBwcm9wZXJ0eSBmcm9tIHlvdXIgY2xh
        c3MgbGlrZSB0aGlzOgoKICAgIGBgYGphdmFzY3JpcHQKICAgIE15Q2xhc3Mu
        bWV0YUZvclByb3BlcnR5KCdwZXJzb24nKTsKICAgIGBgYAoKICAgIFRoaXMg
        d2lsbCByZXR1cm4gdGhlIG9yaWdpbmFsIGhhc2ggdGhhdCB3YXMgcGFzc2Vk
        IHRvIGBtZXRhKClgLgoKICAgIEBtZXRob2QgbWV0YUZvclByb3BlcnR5CiAg
        ICBAcGFyYW0ga2V5IHtTdHJpbmd9IHByb3BlcnR5IG5hbWUKICAqLwogIG1l
        dGFGb3JQcm9wZXJ0eTogZnVuY3Rpb24oa2V5KSB7CiAgICB2YXIgbWV0YSA9
        IHRoaXMucHJvdG8oKVtNRVRBX0tFWV0sCiAgICAgICAgZGVzYyA9IG1ldGEg
        JiYgbWV0YS5kZXNjc1trZXldOwoKICAgIEVtYmVyLmFzc2VydCgibWV0YUZv
        clByb3BlcnR5KCkgY291bGQgbm90IGZpbmQgYSBjb21wdXRlZCBwcm9wZXJ0
        eSB3aXRoIGtleSAnIitrZXkrIicuIiwgISFkZXNjICYmIGRlc2MgaW5zdGFu
        Y2VvZiBFbWJlci5Db21wdXRlZFByb3BlcnR5KTsKICAgIHJldHVybiBkZXNj
        Ll9tZXRhIHx8IHt9OwogIH0sCgogIC8qKgogICAgSXRlcmF0ZSBvdmVyIGVh
        Y2ggY29tcHV0ZWQgcHJvcGVydHkgZm9yIHRoZSBjbGFzcywgcGFzc2luZyBp
        dHMgbmFtZQogICAgYW5kIGFueSBhc3NvY2lhdGVkIG1ldGFkYXRhIChzZWUg
        YG1ldGFGb3JQcm9wZXJ0eWApIHRvIHRoZSBjYWxsYmFjay4KCiAgICBAbWV0
        aG9kIGVhY2hDb21wdXRlZFByb3BlcnR5CiAgICBAcGFyYW0ge0Z1bmN0aW9u
        fSBjYWxsYmFjawogICAgQHBhcmFtIHtPYmplY3R9IGJpbmRpbmcKICAqLwog
        IGVhY2hDb21wdXRlZFByb3BlcnR5OiBmdW5jdGlvbihjYWxsYmFjaywgYmlu
        ZGluZykgewogICAgdmFyIHByb3RvID0gdGhpcy5wcm90bygpLAogICAgICAg
        IGRlc2NzID0gbWV0YShwcm90bykuZGVzY3MsCiAgICAgICAgZW1wdHkgPSB7
        fSwKICAgICAgICBwcm9wZXJ0eTsKCiAgICBmb3IgKHZhciBuYW1lIGluIGRl
        c2NzKSB7CiAgICAgIHByb3BlcnR5ID0gZGVzY3NbbmFtZV07CgogICAgICBp
        ZiAocHJvcGVydHkgaW5zdGFuY2VvZiBFbWJlci5Db21wdXRlZFByb3BlcnR5
        KSB7CiAgICAgICAgY2FsbGJhY2suY2FsbChiaW5kaW5nIHx8IHRoaXMsIG5h
        bWUsIHByb3BlcnR5Ll9tZXRhIHx8IGVtcHR5KTsKICAgICAgfQogICAgfQog
        IH0KCn0pOwoKQ2xhc3NNaXhpbi5vd25lckNvbnN0cnVjdG9yID0gQ29yZU9i
        amVjdDsKCmlmIChFbWJlci5jb25maWcub3ZlcnJpZGVDbGFzc01peGluKSB7
        CiAgRW1iZXIuY29uZmlnLm92ZXJyaWRlQ2xhc3NNaXhpbihDbGFzc01peGlu
        KTsKfQoKQ29yZU9iamVjdC5DbGFzc01peGluID0gQ2xhc3NNaXhpbjsKQ2xh
        c3NNaXhpbi5hcHBseShDb3JlT2JqZWN0KTsKCkVtYmVyLkNvcmVPYmplY3Qg
        PSBDb3JlT2JqZWN0OwoKfSkoKTsKCgoKKGZ1bmN0aW9uKCkgewovKioKQG1v
        ZHVsZSBlbWJlcgpAc3VibW9kdWxlIGVtYmVyLXJ1bnRpbWUKKi8KCi8qKgog
        IGBFbWJlci5PYmplY3RgIGlzIHRoZSBtYWluIGJhc2UgY2xhc3MgZm9yIGFs
        bCBFbWJlciBvYmplY3RzLiBJdCBpcyBhIHN1YmNsYXNzCiAgb2YgYEVtYmVy
        LkNvcmVPYmplY3RgIHdpdGggdGhlIGBFbWJlci5PYnNlcnZhYmxlYCBtaXhp
        biBhcHBsaWVkLiBGb3IgZGV0YWlscywKICBzZWUgdGhlIGRvY3VtZW50YXRp
        b24gZm9yIGVhY2ggb2YgdGhlc2UuCgogIEBjbGFzcyBPYmplY3QKICBAbmFt
        ZXNwYWNlIEVtYmVyCiAgQGV4dGVuZHMgRW1iZXIuQ29yZU9iamVjdAogIEB1
        c2VzIEVtYmVyLk9ic2VydmFibGUKKi8KRW1iZXIuT2JqZWN0ID0gRW1iZXIu
        Q29yZU9iamVjdC5leHRlbmQoRW1iZXIuT2JzZXJ2YWJsZSk7CkVtYmVyLk9i
        amVjdC50b1N0cmluZyA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gIkVtYmVyLk9i
        amVjdCI7IH07Cgp9KSgpOwoKCgooZnVuY3Rpb24oKSB7Ci8qKgpAbW9kdWxl
        IGVtYmVyCkBzdWJtb2R1bGUgZW1iZXItcnVudGltZQoqLwoKdmFyIGdldCA9
        IEVtYmVyLmdldCwgaW5kZXhPZiA9IEVtYmVyLkFycmF5UG9seWZpbGxzLmlu
        ZGV4T2Y7CgovKioKICBBIE5hbWVzcGFjZSBpcyBhbiBvYmplY3QgdXN1YWxs
        eSB1c2VkIHRvIGNvbnRhaW4gb3RoZXIgb2JqZWN0cyBvciBtZXRob2RzCiAg
        c3VjaCBhcyBhbiBhcHBsaWNhdGlvbiBvciBmcmFtZXdvcmsuIENyZWF0ZSBh
        IG5hbWVzcGFjZSBhbnl0aW1lIHlvdSB3YW50CiAgdG8gZGVmaW5lIG9uZSBv
        ZiB0aGVzZSBuZXcgY29udGFpbmVycy4KCiAgIyBFeGFtcGxlIFVzYWdlCgog
        IGBgYGphdmFzY3JpcHQKICBNeUZyYW1ld29yayA9IEVtYmVyLk5hbWVzcGFj
        ZS5jcmVhdGUoewogICAgVkVSU0lPTjogJzEuMC4wJwogIH0pOwogIGBgYAoK
        ICBAY2xhc3MgTmFtZXNwYWNlCiAgQG5hbWVzcGFjZSBFbWJlcgogIEBleHRl
        bmRzIEVtYmVyLk9iamVjdAoqLwp2YXIgTmFtZXNwYWNlID0gRW1iZXIuTmFt
        ZXNwYWNlID0gRW1iZXIuT2JqZWN0LmV4dGVuZCh7CiAgaXNOYW1lc3BhY2U6
        IHRydWUsCgogIGluaXQ6IGZ1bmN0aW9uKCkgewogICAgRW1iZXIuTmFtZXNw
        YWNlLk5BTUVTUEFDRVMucHVzaCh0aGlzKTsKICAgIEVtYmVyLk5hbWVzcGFj
        ZS5QUk9DRVNTRUQgPSBmYWxzZTsKICB9LAoKICB0b1N0cmluZzogZnVuY3Rp
        b24oKSB7CiAgICB2YXIgbmFtZSA9IGdldCh0aGlzLCAnbmFtZScpOwogICAg
        aWYgKG5hbWUpIHsgcmV0dXJuIG5hbWU7IH0KCiAgICBmaW5kTmFtZXNwYWNl
        cygpOwogICAgcmV0dXJuIHRoaXNbRW1iZXIuR1VJRF9LRVkrJ19uYW1lJ107
        CiAgfSwKCiAgbmFtZUNsYXNzZXM6IGZ1bmN0aW9uKCkgewogICAgcHJvY2Vz
        c05hbWVzcGFjZShbdGhpcy50b1N0cmluZygpXSwgdGhpcywge30pOwogIH0s
        CgogIGRlc3Ryb3k6IGZ1bmN0aW9uKCkgewogICAgdmFyIG5hbWVzcGFjZXMg
        PSBFbWJlci5OYW1lc3BhY2UuTkFNRVNQQUNFUzsKICAgIEVtYmVyLmxvb2t1
        cFt0aGlzLnRvU3RyaW5nKCldID0gdW5kZWZpbmVkOwogICAgbmFtZXNwYWNl
        cy5zcGxpY2UoaW5kZXhPZi5jYWxsKG5hbWVzcGFjZXMsIHRoaXMpLCAxKTsK
        ICAgIHRoaXMuX3N1cGVyKCk7CiAgfQp9KTsKCk5hbWVzcGFjZS5yZW9wZW5D
        bGFzcyh7CiAgTkFNRVNQQUNFUzogW0VtYmVyXSwKICBOQU1FU1BBQ0VTX0JZ
        X0lEOiB7fSwKICBQUk9DRVNTRUQ6IGZhbHNlLAogIHByb2Nlc3NBbGw6IHBy
        b2Nlc3NBbGxOYW1lc3BhY2VzLAogIGJ5TmFtZTogZnVuY3Rpb24obmFtZSkg
        ewogICAgaWYgKCFFbWJlci5CT09URUQpIHsKICAgICAgcHJvY2Vzc0FsbE5h
        bWVzcGFjZXMoKTsKICAgIH0KCiAgICByZXR1cm4gTkFNRVNQQUNFU19CWV9J
        RFtuYW1lXTsKICB9Cn0pOwoKdmFyIE5BTUVTUEFDRVNfQllfSUQgPSBOYW1l
        c3BhY2UuTkFNRVNQQUNFU19CWV9JRDsKCnZhciBoYXNPd25Qcm9wID0gKHt9
        KS5oYXNPd25Qcm9wZXJ0eSwKICAgIGd1aWRGb3IgPSBFbWJlci5ndWlkRm9y
        OwoKZnVuY3Rpb24gcHJvY2Vzc05hbWVzcGFjZShwYXRocywgcm9vdCwgc2Vl
        bikgewogIHZhciBpZHggPSBwYXRocy5sZW5ndGg7CgogIE5BTUVTUEFDRVNf
        QllfSURbcGF0aHMuam9pbignLicpXSA9IHJvb3Q7CgogIC8vIExvb3Agb3Zl
        ciBhbGwgb2YgdGhlIGtleXMgaW4gdGhlIG5hbWVzcGFjZSwgbG9va2luZyBm
        b3IgY2xhc3NlcwogIGZvcih2YXIga2V5IGluIHJvb3QpIHsKICAgIGlmICgh
        aGFzT3duUHJvcC5jYWxsKHJvb3QsIGtleSkpIHsgY29udGludWU7IH0KICAg
        IHZhciBvYmogPSByb290W2tleV07CgogICAgLy8gSWYgd2UgYXJlIHByb2Nl
        c3NpbmcgdGhlIGBFbWJlcmAgbmFtZXNwYWNlLCBmb3IgZXhhbXBsZSwgdGhl
        CiAgICAvLyBgcGF0aHNgIHdpbGwgc3RhcnQgd2l0aCBgWyJFbWJlciJdYC4g
        RXZlcnkgaXRlcmF0aW9uIHRocm91Z2gKICAgIC8vIHRoZSBsb29wIHdpbGwg
        dXBkYXRlIHRoZSAqKnNlY29uZCoqIGVsZW1lbnQgb2YgdGhpcyBsaXN0IHdp
        dGgKICAgIC8vIHRoZSBrZXksIHNvIHByb2Nlc3NpbmcgYEVtYmVyLlZpZXdg
        IHdpbGwgbWFrZSB0aGUgQXJyYXkKICAgIC8vIGBbJ0VtYmVyJywgJ1ZpZXcn
        XWAuCiAgICBwYXRoc1tpZHhdID0ga2V5OwoKICAgIC8vIElmIHdlIGhhdmUg
        Zm91bmQgYW4gdW5wcm9jZXNzZWQgY2xhc3MKICAgIGlmIChvYmogJiYgb2Jq
        LnRvU3RyaW5nID09PSBjbGFzc1RvU3RyaW5nKSB7CiAgICAgIC8vIFJlcGxh
        Y2UgdGhlIGNsYXNzJyBgdG9TdHJpbmdgIHdpdGggdGhlIGRvdC1zZXBhcmF0
        ZWQgcGF0aAogICAgICAvLyBhbmQgc2V0IGl0cyBgTkFNRV9LRVlgCiAgICAg
        IG9iai50b1N0cmluZyA9IG1ha2VUb1N0cmluZyhwYXRocy5qb2luKCcuJykp
        OwogICAgICBvYmpbTkFNRV9LRVldID0gcGF0aHMuam9pbignLicpOwoKICAg
        IC8vIFN1cHBvcnQgbmVzdGVkIG5hbWVzcGFjZXMKICAgIH0gZWxzZSBpZiAo
        b2JqICYmIG9iai5pc05hbWVzcGFjZSkgewogICAgICAvLyBTa2lwIGFsaWFz
        ZWQgbmFtZXNwYWNlcwogICAgICBpZiAoc2VlbltndWlkRm9yKG9iaildKSB7
        IGNvbnRpbnVlOyB9CiAgICAgIHNlZW5bZ3VpZEZvcihvYmopXSA9IHRydWU7
        CgogICAgICAvLyBQcm9jZXNzIHRoZSBjaGlsZCBuYW1lc3BhY2UKICAgICAg
        cHJvY2Vzc05hbWVzcGFjZShwYXRocywgb2JqLCBzZWVuKTsKICAgIH0KICB9
        CgogIHBhdGhzLmxlbmd0aCA9IGlkeDsgLy8gY3V0IG91dCBsYXN0IGl0ZW0K
        fQoKZnVuY3Rpb24gZmluZE5hbWVzcGFjZXMoKSB7CiAgdmFyIE5hbWVzcGFj
        ZSA9IEVtYmVyLk5hbWVzcGFjZSwgbG9va3VwID0gRW1iZXIubG9va3VwLCBv
        YmosIGlzTmFtZXNwYWNlOwoKICBpZiAoTmFtZXNwYWNlLlBST0NFU1NFRCkg
        eyByZXR1cm47IH0KCiAgZm9yICh2YXIgcHJvcCBpbiBsb29rdXApIHsKICAg
        IC8vIFRoZXNlIGRvbid0IHJhaXNlIGV4Y2VwdGlvbnMgYnV0IGNhbiBjYXVz
        ZSB3YXJuaW5ncwogICAgaWYgKHByb3AgPT09ICJwYXJlbnQiIHx8IHByb3Ag
        PT09ICJ0b3AiIHx8IHByb3AgPT09ICJmcmFtZUVsZW1lbnQiIHx8IHByb3Ag
        PT09ICJ3ZWJraXRTdG9yYWdlSW5mbyIpIHsgY29udGludWU7IH0KCiAgICAv
        LyAgZ2V0KHdpbmRvdy5nbG9iYWxTdG9yYWdlLCAnaXNOYW1lc3BhY2UnKSB3
        b3VsZCB0cnkgdG8gcmVhZCB0aGUgc3RvcmFnZSBmb3IgZG9tYWluIGlzTmFt
        ZXNwYWNlIGFuZCBjYXVzZSBleGNlcHRpb24gaW4gRmlyZWZveC4KICAgIC8v
        IGdsb2JhbFN0b3JhZ2UgaXMgYSBzdG9yYWdlIG9ic29sZXRlZCBieSB0aGUg
        V2hhdFdHIHN0b3JhZ2Ugc3BlY2lmaWNhdGlvbi4gU2VlIGh0dHBzOi8vZGV2
        ZWxvcGVyLm1vemlsbGEub3JnL2VuL0RPTS9TdG9yYWdlI2dsb2JhbFN0b3Jh
        Z2UKICAgIGlmIChwcm9wID09PSAiZ2xvYmFsU3RvcmFnZSIgJiYgbG9va3Vw
        LlN0b3JhZ2VMaXN0ICYmIGxvb2t1cC5nbG9iYWxTdG9yYWdlIGluc3RhbmNl
        b2YgbG9va3VwLlN0b3JhZ2VMaXN0KSB7IGNvbnRpbnVlOyB9CiAgICAvLyBV
        bmZvcnR1bmF0ZWx5LCBzb21lIHZlcnNpb25zIG9mIElFIGRvbid0IHN1cHBv
        cnQgd2luZG93Lmhhc093blByb3BlcnR5CiAgICBpZiAobG9va3VwLmhhc093
        blByb3BlcnR5ICYmICFsb29rdXAuaGFzT3duUHJvcGVydHkocHJvcCkpIHsg
        Y29udGludWU7IH0KCiAgICAvLyBBdCB0aW1lcyB3ZSBhcmUgbm90IGFsbG93
        ZWQgdG8gYWNjZXNzIGNlcnRhaW4gcHJvcGVydGllcyBmb3Igc2VjdXJpdHkg
        cmVhc29ucy4KICAgIC8vIFRoZXJlIGFyZSBhbHNvIHRpbWVzIHdoZXJlIGV2
        ZW4gaWYgd2UgY2FuIGFjY2VzcyB0aGVtLCB3ZSBhcmUgbm90IGFsbG93ZWQg
        dG8gYWNjZXNzIHRoZWlyIHByb3BlcnRpZXMuCiAgICB0cnkgewogICAgICBv
        YmogPSBFbWJlci5sb29rdXBbcHJvcF07CiAgICAgIGlzTmFtZXNwYWNlID0g
        b2JqICYmIG9iai5pc05hbWVzcGFjZTsKICAgIH0gY2F0Y2ggKGUpIHsKICAg
        ICAgY29udGludWU7CiAgICB9CgogICAgaWYgKGlzTmFtZXNwYWNlKSB7CiAg
        ICAgIEVtYmVyLmRlcHJlY2F0ZSgiTmFtZXNwYWNlcyBzaG91bGQgbm90IGJl
        Z2luIHdpdGggbG93ZXJjYXNlLiIsIC9eW0EtWl0vLnRlc3QocHJvcCkpOwog
        ICAgICBvYmpbTkFNRV9LRVldID0gcHJvcDsKICAgIH0KICB9Cn0KCnZhciBO
        QU1FX0tFWSA9IEVtYmVyLk5BTUVfS0VZID0gRW1iZXIuR1VJRF9LRVkgKyAn
        X25hbWUnOwoKZnVuY3Rpb24gc3VwZXJDbGFzc1N0cmluZyhtaXhpbikgewog
        IHZhciBzdXBlcmNsYXNzID0gbWl4aW4uc3VwZXJjbGFzczsKICBpZiAoc3Vw
        ZXJjbGFzcykgewogICAgaWYgKHN1cGVyY2xhc3NbTkFNRV9LRVldKSB7IHJl
        dHVybiBzdXBlcmNsYXNzW05BTUVfS0VZXTsgfQogICAgZWxzZSB7IHJldHVy
        biBzdXBlckNsYXNzU3RyaW5nKHN1cGVyY2xhc3MpOyB9CiAgfSBlbHNlIHsK
        ICAgIHJldHVybjsKICB9Cn0KCmZ1bmN0aW9uIGNsYXNzVG9TdHJpbmcoKSB7
        CiAgaWYgKCFFbWJlci5CT09URUQgJiYgIXRoaXNbTkFNRV9LRVldKSB7CiAg
        ICBwcm9jZXNzQWxsTmFtZXNwYWNlcygpOwogIH0KCiAgdmFyIHJldDsKCiAg
        aWYgKHRoaXNbTkFNRV9LRVldKSB7CiAgICByZXQgPSB0aGlzW05BTUVfS0VZ
        XTsKICB9IGVsc2UgaWYgKHRoaXMuX3RvU3RyaW5nKSB7CiAgICByZXQgPSB0
        aGlzLl90b1N0cmluZzsgCiAgfSBlbHNlIHsKICAgIHZhciBzdHIgPSBzdXBl
        ckNsYXNzU3RyaW5nKHRoaXMpOwogICAgaWYgKHN0cikgewogICAgICByZXQg
        PSAiKHN1YmNsYXNzIG9mICIgKyBzdHIgKyAiKSI7CiAgICB9IGVsc2Ugewog
        ICAgICByZXQgPSAiKHVua25vd24gbWl4aW4pIjsKICAgIH0KICAgIHRoaXMu
        dG9TdHJpbmcgPSBtYWtlVG9TdHJpbmcocmV0KTsKICB9CgogIHJldHVybiBy
        ZXQ7Cn0KCmZ1bmN0aW9uIHByb2Nlc3NBbGxOYW1lc3BhY2VzKCkgewogIHZh
        ciB1bnByb2Nlc3NlZE5hbWVzcGFjZXMgPSAhTmFtZXNwYWNlLlBST0NFU1NF
        RCwKICAgICAgdW5wcm9jZXNzZWRNaXhpbnMgPSBFbWJlci5hbnlVbnByb2Nl
        c3NlZE1peGluczsKCiAgaWYgKHVucHJvY2Vzc2VkTmFtZXNwYWNlcykgewog
        ICAgZmluZE5hbWVzcGFjZXMoKTsKICAgIE5hbWVzcGFjZS5QUk9DRVNTRUQg
        PSB0cnVlOwogIH0KCiAgaWYgKHVucHJvY2Vzc2VkTmFtZXNwYWNlcyB8fCB1
        bnByb2Nlc3NlZE1peGlucykgewogICAgdmFyIG5hbWVzcGFjZXMgPSBOYW1l
        c3BhY2UuTkFNRVNQQUNFUywgbmFtZXNwYWNlOwogICAgZm9yICh2YXIgaT0w
        LCBsPW5hbWVzcGFjZXMubGVuZ3RoOyBpPGw7IGkrKykgewogICAgICBuYW1l
        c3BhY2UgPSBuYW1lc3BhY2VzW2ldOwogICAgICBwcm9jZXNzTmFtZXNwYWNl
        KFtuYW1lc3BhY2UudG9TdHJpbmcoKV0sIG5hbWVzcGFjZSwge30pOwogICAg
        fQoKICAgIEVtYmVyLmFueVVucHJvY2Vzc2VkTWl4aW5zID0gZmFsc2U7CiAg
        fQp9CgpmdW5jdGlvbiBtYWtlVG9TdHJpbmcocmV0KSB7CiAgcmV0dXJuIGZ1
        bmN0aW9uKCkgeyByZXR1cm4gcmV0OyB9Owp9CgpFbWJlci5NaXhpbi5wcm90
        b3R5cGUudG9TdHJpbmcgPSBjbGFzc1RvU3RyaW5nOwoKfSkoKTsKCgoKKGZ1
        bmN0aW9uKCkgewovKioKQG1vZHVsZSBlbWJlcgpAc3VibW9kdWxlIGVtYmVy
        LXJ1bnRpbWUKKi8KCnZhciBnZXQgPSBFbWJlci5nZXQsCiAgICBzZXQgPSBF
        bWJlci5zZXQsCiAgICBmbXQgPSBFbWJlci5TdHJpbmcuZm10LAogICAgYWRk
        QmVmb3JlT2JzZXJ2ZXIgPSBFbWJlci5hZGRCZWZvcmVPYnNlcnZlciwKICAg
        IGFkZE9ic2VydmVyID0gRW1iZXIuYWRkT2JzZXJ2ZXIsCiAgICByZW1vdmVC
        ZWZvcmVPYnNlcnZlciA9IEVtYmVyLnJlbW92ZUJlZm9yZU9ic2VydmVyLAog
        ICAgcmVtb3ZlT2JzZXJ2ZXIgPSBFbWJlci5yZW1vdmVPYnNlcnZlciwKICAg
        IHByb3BlcnR5V2lsbENoYW5nZSA9IEVtYmVyLnByb3BlcnR5V2lsbENoYW5n
        ZSwKICAgIHByb3BlcnR5RGlkQ2hhbmdlID0gRW1iZXIucHJvcGVydHlEaWRD
        aGFuZ2UsCiAgICBtZXRhID0gRW1iZXIubWV0YSwKICAgIGRlZmluZVByb3Bl
        cnR5ID0gRW1iZXIuZGVmaW5lUHJvcGVydHk7CgpmdW5jdGlvbiBjb250ZW50
        UHJvcGVydHlXaWxsQ2hhbmdlKGNvbnRlbnQsIGNvbnRlbnRLZXkpIHsKICB2
        YXIga2V5ID0gY29udGVudEtleS5zbGljZSg4KTsgLy8gcmVtb3ZlICJjb250
        ZW50LiIKICBpZiAoa2V5IGluIHRoaXMpIHsgcmV0dXJuOyB9ICAvLyBpZiBz
        aGFkb3dlZCBpbiBwcm94eQogIHByb3BlcnR5V2lsbENoYW5nZSh0aGlzLCBr
        ZXkpOwp9CgpmdW5jdGlvbiBjb250ZW50UHJvcGVydHlEaWRDaGFuZ2UoY29u
        dGVudCwgY29udGVudEtleSkgewogIHZhciBrZXkgPSBjb250ZW50S2V5LnNs
        aWNlKDgpOyAvLyByZW1vdmUgImNvbnRlbnQuIgogIGlmIChrZXkgaW4gdGhp
        cykgeyByZXR1cm47IH0gLy8gaWYgc2hhZG93ZWQgaW4gcHJveHkKICBwcm9w
        ZXJ0eURpZENoYW5nZSh0aGlzLCBrZXkpOwp9CgovKioKICBgRW1iZXIuT2Jq
        ZWN0UHJveHlgIGZvcndhcmRzIGFsbCBwcm9wZXJ0aWVzIG5vdCBkZWZpbmVk
        IGJ5IHRoZSBwcm94eSBpdHNlbGYKICB0byBhIHByb3hpZWQgYGNvbnRlbnRg
        IG9iamVjdC4KCiAgYGBgamF2YXNjcmlwdAogIG9iamVjdCA9IEVtYmVyLk9i
        amVjdC5jcmVhdGUoewogICAgbmFtZTogJ0ZvbycKICB9KTsKCiAgcHJveHkg
        PSBFbWJlci5PYmplY3RQcm94eS5jcmVhdGUoewogICAgY29udGVudDogb2Jq
        ZWN0CiAgfSk7CgogIC8vIEFjY2VzcyBhbmQgY2hhbmdlIGV4aXN0aW5nIHBy
        b3BlcnRpZXMKICBwcm94eS5nZXQoJ25hbWUnKSAgICAgICAgICAvLyAnRm9v
        JwogIHByb3h5LnNldCgnbmFtZScsICdCYXInKTsKICBvYmplY3QuZ2V0KCdu
        YW1lJykgICAgICAgICAvLyAnQmFyJwoKICAvLyBDcmVhdGUgbmV3ICdkZXNj
        cmlwdGlvbicgcHJvcGVydHkgb24gYG9iamVjdGAKICBwcm94eS5zZXQoJ2Rl
        c2NyaXB0aW9uJywgJ0ZvbyBpcyBhIHdoaXpib28gYmF6Jyk7CiAgb2JqZWN0
        LmdldCgnZGVzY3JpcHRpb24nKSAgLy8gJ0ZvbyBpcyBhIHdoaXpib28gYmF6
        JwogIGBgYAoKICBXaGlsZSBgY29udGVudGAgaXMgdW5zZXQsIHNldHRpbmcg
        YSBwcm9wZXJ0eSB0byBiZSBkZWxlZ2F0ZWQgd2lsbCB0aHJvdyBhbgogIEVy
        cm9yLgoKICBgYGBqYXZhc2NyaXB0CiAgcHJveHkgPSBFbWJlci5PYmplY3RQ
        cm94eS5jcmVhdGUoewogICAgY29udGVudDogbnVsbCwKICAgIGZsYWc6IG51
        bGwKICB9KTsKICBwcm94eS5zZXQoJ2ZsYWcnLCB0cnVlKTsKICBwcm94eS5n
        ZXQoJ2ZsYWcnKTsgICAgICAgICAvLyB0cnVlCiAgcHJveHkuZ2V0KCdmb28n
        KTsgICAgICAgICAgLy8gdW5kZWZpbmVkCiAgcHJveHkuc2V0KCdmb28nLCAn
        ZGF0YScpOyAgLy8gdGhyb3dzIEVycm9yCiAgYGBgCgogIERlbGVnYXRlZCBw
        cm9wZXJ0aWVzIGNhbiBiZSBib3VuZCB0byBhbmQgd2lsbCBjaGFuZ2Ugd2hl
        biBjb250ZW50IGlzIHVwZGF0ZWQuCgogIENvbXB1dGVkIHByb3BlcnRpZXMg
        b24gdGhlIHByb3h5IGl0c2VsZiBjYW4gZGVwZW5kIG9uIGRlbGVnYXRlZCBw
        cm9wZXJ0aWVzLgoKICBgYGBqYXZhc2NyaXB0CiAgUHJveHlXaXRoQ29tcHV0
        ZWRQcm9wZXJ0eSA9IEVtYmVyLk9iamVjdFByb3h5LmV4dGVuZCh7CiAgICBm
        dWxsTmFtZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgZmlyc3ROYW1lID0g
        dGhpcy5nZXQoJ2ZpcnN0TmFtZScpLAogICAgICAgICAgbGFzdE5hbWUgPSB0
        aGlzLmdldCgnbGFzdE5hbWUnKTsKICAgICAgaWYgKGZpcnN0TmFtZSAmJiBs
        YXN0TmFtZSkgewogICAgICAgIHJldHVybiBmaXJzdE5hbWUgKyAnICcgKyBs
        YXN0TmFtZTsKICAgICAgfQogICAgICByZXR1cm4gZmlyc3ROYW1lIHx8IGxh
        c3ROYW1lOwogICAgfS5wcm9wZXJ0eSgnZmlyc3ROYW1lJywgJ2xhc3ROYW1l
        JykKICB9KTsKCiAgcHJveHkgPSBQcm94eVdpdGhDb21wdXRlZFByb3BlcnR5
        LmNyZWF0ZSgpOwoKICBwcm94eS5nZXQoJ2Z1bGxOYW1lJyk7ICAvLyB1bmRl
        ZmluZWQKICBwcm94eS5zZXQoJ2NvbnRlbnQnLCB7CiAgICBmaXJzdE5hbWU6
        ICdUb20nLCBsYXN0TmFtZTogJ0RhbGUnCiAgfSk7IC8vIHRyaWdnZXJzIHBy
        b3BlcnR5IGNoYW5nZSBmb3IgZnVsbE5hbWUgb24gcHJveHkKCiAgcHJveHku
        Z2V0KCdmdWxsTmFtZScpOyAgLy8gJ1RvbSBEYWxlJwogIGBgYAoKICBAY2xh
        c3MgT2JqZWN0UHJveHkKICBAbmFtZXNwYWNlIEVtYmVyCiAgQGV4dGVuZHMg
        RW1iZXIuT2JqZWN0CiovCkVtYmVyLk9iamVjdFByb3h5ID0gRW1iZXIuT2Jq
        ZWN0LmV4dGVuZCh7CiAgLyoqCiAgICBUaGUgb2JqZWN0IHdob3NlIHByb3Bl
        cnRpZXMgd2lsbCBiZSBmb3J3YXJkZWQuCgogICAgQHByb3BlcnR5IGNvbnRl
        bnQKICAgIEB0eXBlIEVtYmVyLk9iamVjdAogICAgQGRlZmF1bHQgbnVsbAog
        ICovCiAgY29udGVudDogbnVsbCwKICBfY29udGVudERpZENoYW5nZTogRW1i
        ZXIub2JzZXJ2ZXIoJ2NvbnRlbnQnLCBmdW5jdGlvbigpIHsKICAgIEVtYmVy
        LmFzc2VydCgiQ2FuJ3Qgc2V0IE9iamVjdFByb3h5J3MgY29udGVudCB0byBp
        dHNlbGYiLCB0aGlzLmdldCgnY29udGVudCcpICE9PSB0aGlzKTsKICB9KSwK
        CiAgaXNUcnV0aHk6IEVtYmVyLmNvbXB1dGVkLmJvb2woJ2NvbnRlbnQnKSwK
        CiAgX2RlYnVnQ29udGFpbmVyS2V5OiBudWxsLAoKICB3aWxsV2F0Y2hQcm9w
        ZXJ0eTogZnVuY3Rpb24gKGtleSkgewogICAgdmFyIGNvbnRlbnRLZXkgPSAn
        Y29udGVudC4nICsga2V5OwogICAgYWRkQmVmb3JlT2JzZXJ2ZXIodGhpcywg
        Y29udGVudEtleSwgbnVsbCwgY29udGVudFByb3BlcnR5V2lsbENoYW5nZSk7
        CiAgICBhZGRPYnNlcnZlcih0aGlzLCBjb250ZW50S2V5LCBudWxsLCBjb250
        ZW50UHJvcGVydHlEaWRDaGFuZ2UpOwogIH0sCgogIGRpZFVud2F0Y2hQcm9w
        ZXJ0eTogZnVuY3Rpb24gKGtleSkgewogICAgdmFyIGNvbnRlbnRLZXkgPSAn
        Y29udGVudC4nICsga2V5OwogICAgcmVtb3ZlQmVmb3JlT2JzZXJ2ZXIodGhp
        cywgY29udGVudEtleSwgbnVsbCwgY29udGVudFByb3BlcnR5V2lsbENoYW5n
        ZSk7CiAgICByZW1vdmVPYnNlcnZlcih0aGlzLCBjb250ZW50S2V5LCBudWxs
        LCBjb250ZW50UHJvcGVydHlEaWRDaGFuZ2UpOwogIH0sCgogIHVua25vd25Q
        cm9wZXJ0eTogZnVuY3Rpb24gKGtleSkgewogICAgdmFyIGNvbnRlbnQgPSBn
        ZXQodGhpcywgJ2NvbnRlbnQnKTsKICAgIGlmIChjb250ZW50KSB7CiAgICAg
        IHJldHVybiBnZXQoY29udGVudCwga2V5KTsKICAgIH0KICB9LAoKICBzZXRV
        bmtub3duUHJvcGVydHk6IGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7CiAgICB2
        YXIgbSA9IG1ldGEodGhpcyk7CiAgICBpZiAobS5wcm90byA9PT0gdGhpcykg
        ewogICAgICAvLyBpZiBtYXJrZWQgYXMgcHJvdG90eXBlIHRoZW4ganVzdCBk
        ZWZpbmVQcm9wZXJ0eQogICAgICAvLyByYXRoZXIgdGhhbiBkZWxlZ2F0ZQog
        ICAgICBkZWZpbmVQcm9wZXJ0eSh0aGlzLCBrZXksIG51bGwsIHZhbHVlKTsK
        ICAgICAgcmV0dXJuIHZhbHVlOwogICAgfQoKICAgIHZhciBjb250ZW50ID0g
        Z2V0KHRoaXMsICdjb250ZW50Jyk7CiAgICBFbWJlci5hc3NlcnQoZm10KCJD
        YW5ub3QgZGVsZWdhdGUgc2V0KCclQCcsICVAKSB0byB0aGUgJ2NvbnRlbnQn
        IHByb3BlcnR5IG9mIG9iamVjdCBwcm94eSAlQDogaXRzICdjb250ZW50JyBp
        cyB1bmRlZmluZWQuIiwgW2tleSwgdmFsdWUsIHRoaXNdKSwgY29udGVudCk7
        CiAgICByZXR1cm4gc2V0KGNvbnRlbnQsIGtleSwgdmFsdWUpOwogIH0KCn0p
        OwoKfSkoKTsKCgoKKGZ1bmN0aW9uKCkgewovKioKQG1vZHVsZSBlbWJlcgpA
        c3VibW9kdWxlIGVtYmVyLXJ1bnRpbWUKKi8KCi8vIC4uLi4uLi4uLi4uLi4u
        Li4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4K
        Ly8gSEVMUEVSUwovLwoKdmFyIGdldCA9IEVtYmVyLmdldCwgc2V0ID0gRW1i
        ZXIuc2V0Owp2YXIgYV9zbGljZSA9IEFycmF5LnByb3RvdHlwZS5zbGljZTsK
        dmFyIGFfaW5kZXhPZiA9IEVtYmVyLkVudW1lcmFibGVVdGlscy5pbmRleE9m
        OwoKdmFyIGNvbnRleHRzID0gW107CgpmdW5jdGlvbiBwb3BDdHgoKSB7CiAg
        cmV0dXJuIGNvbnRleHRzLmxlbmd0aD09PTAgPyB7fSA6IGNvbnRleHRzLnBv
        cCgpOwp9CgpmdW5jdGlvbiBwdXNoQ3R4KGN0eCkgewogIGNvbnRleHRzLnB1
        c2goY3R4KTsKICByZXR1cm4gbnVsbDsKfQoKZnVuY3Rpb24gaXRlcihrZXks
        IHZhbHVlKSB7CiAgdmFyIHZhbHVlUHJvdmlkZWQgPSBhcmd1bWVudHMubGVu
        Z3RoID09PSAyOwoKICBmdW5jdGlvbiBpKGl0ZW0pIHsKICAgIHZhciBjdXIg
        PSBnZXQoaXRlbSwga2V5KTsKICAgIHJldHVybiB2YWx1ZVByb3ZpZGVkID8g
        dmFsdWU9PT1jdXIgOiAhIWN1cjsKICB9CiAgcmV0dXJuIGkgOwp9CgovKioK
        ICBUaGlzIG1peGluIGRlZmluZXMgdGhlIGNvbW1vbiBpbnRlcmZhY2UgaW1w
        bGVtZW50ZWQgYnkgZW51bWVyYWJsZSBvYmplY3RzCiAgaW4gRW1iZXIuIE1v
        c3Qgb2YgdGhlc2UgbWV0aG9kcyBmb2xsb3cgdGhlIHN0YW5kYXJkIEFycmF5
        IGl0ZXJhdGlvbgogIEFQSSBkZWZpbmVkIHVwIHRvIEphdmFTY3JpcHQgMS44
        IChleGNsdWRpbmcgbGFuZ3VhZ2Utc3BlY2lmaWMgZmVhdHVyZXMgdGhhdAog
        IGNhbm5vdCBiZSBlbXVsYXRlZCBpbiBvbGRlciB2ZXJzaW9ucyBvZiBKYXZh
        U2NyaXB0KS4KCiAgVGhpcyBtaXhpbiBpcyBhcHBsaWVkIGF1dG9tYXRpY2Fs
        bHkgdG8gdGhlIEFycmF5IGNsYXNzIG9uIHBhZ2UgbG9hZCwgc28geW91CiAg
        Y2FuIHVzZSBhbnkgb2YgdGhlc2UgbWV0aG9kcyBvbiBzaW1wbGUgYXJyYXlz
        LiBJZiBBcnJheSBhbHJlYWR5IGltcGxlbWVudHMKICBvbmUgb2YgdGhlc2Ug
        bWV0aG9kcywgdGhlIG1peGluIHdpbGwgbm90IG92ZXJyaWRlIHRoZW0uCgog
        ICMjIFdyaXRpbmcgWW91ciBPd24gRW51bWVyYWJsZQoKICBUbyBtYWtlIHlv
        dXIgb3duIGN1c3RvbSBjbGFzcyBlbnVtZXJhYmxlLCB5b3UgbmVlZCB0d28g
        aXRlbXM6CgogIDEuIFlvdSBtdXN0IGhhdmUgYSBsZW5ndGggcHJvcGVydHku
        IFRoaXMgcHJvcGVydHkgc2hvdWxkIGNoYW5nZSB3aGVuZXZlcgogICAgIHRo
        ZSBudW1iZXIgb2YgaXRlbXMgaW4geW91ciBlbnVtZXJhYmxlIG9iamVjdCBj
        aGFuZ2VzLiBJZiB5b3UgdXNlIHRoaXMKICAgICB3aXRoIGFuIGBFbWJlci5P
        YmplY3RgIHN1YmNsYXNzLCB5b3Ugc2hvdWxkIGJlIHN1cmUgdG8gY2hhbmdl
        IHRoZSBsZW5ndGgKICAgICBwcm9wZXJ0eSB1c2luZyBgc2V0KCkuYAoKICAy
        LiBZb3UgbXVzdCBpbXBsZW1lbnQgYG5leHRPYmplY3QoKS5gIFNlZSBkb2N1
        bWVudGF0aW9uLgoKICBPbmNlIHlvdSBoYXZlIHRoZXNlIHR3byBtZXRob2Rz
        IGltcGxlbWVudGVkLCBhcHBseSB0aGUgYEVtYmVyLkVudW1lcmFibGVgIG1p
        eGluCiAgdG8geW91ciBjbGFzcyBhbmQgeW91IHdpbGwgYmUgYWJsZSB0byBl
        bnVtZXJhdGUgdGhlIGNvbnRlbnRzIG9mIHlvdXIgb2JqZWN0CiAgbGlrZSBh
        bnkgb3RoZXIgY29sbGVjdGlvbi4KCiAgIyMgVXNpbmcgRW1iZXIgRW51bWVy
        YXRpb24gd2l0aCBPdGhlciBMaWJyYXJpZXMKCiAgTWFueSBvdGhlciBsaWJy
        YXJpZXMgcHJvdmlkZSBzb21lIGtpbmQgb2YgaXRlcmF0b3Igb3IgZW51bWVy
        YXRpb24gbGlrZQogIGZhY2lsaXR5LiBUaGlzIGlzIG9mdGVuIHdoZXJlIHRo
        ZSBtb3N0IGNvbW1vbiBBUEkgY29uZmxpY3RzIG9jY3VyLgogIEVtYmVyJ3Mg
        QVBJIGlzIGRlc2lnbmVkIHRvIGJlIGFzIGZyaWVuZGx5IGFzIHBvc3NpYmxl
        IHdpdGggb3RoZXIKICBsaWJyYXJpZXMgYnkgaW1wbGVtZW50aW5nIG9ubHkg
        bWV0aG9kcyB0aGF0IG1vc3RseSBjb3JyZXNwb25kIHRvIHRoZQogIEphdmFT
        Y3JpcHQgMS44IEFQSS4KCiAgQGNsYXNzIEVudW1lcmFibGUKICBAbmFtZXNw
        YWNlIEVtYmVyCiAgQHNpbmNlIEVtYmVyIDAuOQoqLwpFbWJlci5FbnVtZXJh
        YmxlID0gRW1iZXIuTWl4aW4uY3JlYXRlKHsKCiAgLyoqCiAgICBJbXBsZW1l
        bnQgdGhpcyBtZXRob2QgdG8gbWFrZSB5b3VyIGNsYXNzIGVudW1lcmFibGUu
        CgogICAgVGhpcyBtZXRob2Qgd2lsbCBiZSBjYWxsIHJlcGVhdGVkbHkgZHVy
        aW5nIGVudW1lcmF0aW9uLiBUaGUgaW5kZXggdmFsdWUKICAgIHdpbGwgYWx3
        YXlzIGJlZ2luIHdpdGggMCBhbmQgaW5jcmVtZW50IG1vbm90b25pY2FsbHku
        IFlvdSBkb24ndCBoYXZlIHRvCiAgICByZWx5IG9uIHRoZSBpbmRleCB2YWx1
        ZSB0byBkZXRlcm1pbmUgd2hhdCBvYmplY3QgdG8gcmV0dXJuLCBidXQgeW91
        IHNob3VsZAogICAgYWx3YXlzIGNoZWNrIHRoZSB2YWx1ZSBhbmQgc3RhcnQg
        ZnJvbSB0aGUgYmVnaW5uaW5nIHdoZW4geW91IHNlZSB0aGUKICAgIHJlcXVl
        c3RlZCBpbmRleCBpcyAwLgoKICAgIFRoZSBgcHJldmlvdXNPYmplY3RgIGlz
        IHRoZSBvYmplY3QgdGhhdCB3YXMgcmV0dXJuZWQgZnJvbSB0aGUgbGFzdCBj
        YWxsCiAgICB0byBgbmV4dE9iamVjdGAgZm9yIHRoZSBjdXJyZW50IGl0ZXJh
        dGlvbi4gVGhpcyBpcyBhIHVzZWZ1bCB3YXkgdG8KICAgIG1hbmFnZSBpdGVy
        YXRpb24gaWYgeW91IGFyZSB0cmFjaW5nIGEgbGlua2VkIGxpc3QsIGZvciBl
        eGFtcGxlLgoKICAgIEZpbmFsbHkgdGhlIGNvbnRleHQgcGFyYW1ldGVyIHdp
        bGwgYWx3YXlzIGNvbnRhaW4gYSBoYXNoIHlvdSBjYW4gdXNlIGFzCiAgICBh
        ICJzY3JhdGNocGFkIiB0byBtYWludGFpbiBhbnkgb3RoZXIgc3RhdGUgeW91
        IG5lZWQgaW4gb3JkZXIgdG8gaXRlcmF0ZQogICAgcHJvcGVybHkuIFRoZSBj
        b250ZXh0IG9iamVjdCBpcyByZXVzZWQgYW5kIGlzIG5vdCByZXNldCBiZXR3
        ZWVuCiAgICBpdGVyYXRpb25zIHNvIG1ha2Ugc3VyZSB5b3Ugc2V0dXAgdGhl
        IGNvbnRleHQgd2l0aCBhIGZyZXNoIHN0YXRlIHdoZW5ldmVyCiAgICB0aGUg
        aW5kZXggcGFyYW1ldGVyIGlzIDAuCgogICAgR2VuZXJhbGx5IGl0ZXJhdG9y
        cyB3aWxsIGNvbnRpbnVlIHRvIGNhbGwgYG5leHRPYmplY3RgIHVudGlsIHRo
        ZSBpbmRleAogICAgcmVhY2hlcyB0aGUgeW91ciBjdXJyZW50IGxlbmd0aC0x
        LiBJZiB5b3UgcnVuIG91dCBvZiBkYXRhIGJlZm9yZSB0aGlzCiAgICB0aW1l
        IGZvciBzb21lIHJlYXNvbiwgeW91IHNob3VsZCBzaW1wbHkgcmV0dXJuIHVu
        ZGVmaW5lZC4KCiAgICBUaGUgZGVmYXVsdCBpbXBsZW1lbnRhdGlvbiBvZiB0
        aGlzIG1ldGhvZCBzaW1wbHkgbG9va3MgdXAgdGhlIGluZGV4LgogICAgVGhp
        cyB3b3JrcyBncmVhdCBvbiBhbnkgQXJyYXktbGlrZSBvYmplY3RzLgoKICAg
        IEBtZXRob2QgbmV4dE9iamVjdAogICAgQHBhcmFtIHtOdW1iZXJ9IGluZGV4
        IHRoZSBjdXJyZW50IGluZGV4IG9mIHRoZSBpdGVyYXRpb24KICAgIEBwYXJh
        bSB7T2JqZWN0fSBwcmV2aW91c09iamVjdCB0aGUgdmFsdWUgcmV0dXJuZWQg
        YnkgdGhlIGxhc3QgY2FsbCB0bwogICAgICBgbmV4dE9iamVjdGAuCiAgICBA
        cGFyYW0ge09iamVjdH0gY29udGV4dCBhIGNvbnRleHQgb2JqZWN0IHlvdSBj
        YW4gdXNlIHRvIG1haW50YWluIHN0YXRlLgogICAgQHJldHVybiB7T2JqZWN0
        fSB0aGUgbmV4dCBvYmplY3QgaW4gdGhlIGl0ZXJhdGlvbiBvciB1bmRlZmlu
        ZWQKICAqLwogIG5leHRPYmplY3Q6IEVtYmVyLnJlcXVpcmVkKEZ1bmN0aW9u
        KSwKCiAgLyoqCiAgICBIZWxwZXIgbWV0aG9kIHJldHVybnMgdGhlIGZpcnN0
        IG9iamVjdCBmcm9tIGEgY29sbGVjdGlvbi4gVGhpcyBpcyB1c3VhbGx5CiAg
        ICB1c2VkIGJ5IGJpbmRpbmdzIGFuZCBvdGhlciBwYXJ0cyBvZiB0aGUgZnJh
        bWV3b3JrIHRvIGV4dHJhY3QgYSBzaW5nbGUKICAgIG9iamVjdCBpZiB0aGUg
        ZW51bWVyYWJsZSBjb250YWlucyBvbmx5IG9uZSBpdGVtLgoKICAgIElmIHlv
        dSBvdmVycmlkZSB0aGlzIG1ldGhvZCwgeW91IHNob3VsZCBpbXBsZW1lbnQg
        aXQgc28gdGhhdCBpdCB3aWxsCiAgICBhbHdheXMgcmV0dXJuIHRoZSBzYW1l
        IHZhbHVlIGVhY2ggdGltZSBpdCBpcyBjYWxsZWQuIElmIHlvdXIgZW51bWVy
        YWJsZQogICAgY29udGFpbnMgb25seSBvbmUgb2JqZWN0LCB0aGlzIG1ldGhv
        ZCBzaG91bGQgYWx3YXlzIHJldHVybiB0aGF0IG9iamVjdC4KICAgIElmIHlv
        dXIgZW51bWVyYWJsZSBpcyBlbXB0eSwgdGhpcyBtZXRob2Qgc2hvdWxkIHJl
        dHVybiBgdW5kZWZpbmVkYC4KCiAgICBgYGBqYXZhc2NyaXB0CiAgICB2YXIg
        YXJyID0gWyJhIiwgImIiLCAiYyJdOwogICAgYXJyLmdldCgnZmlyc3RPYmpl
        Y3QnKTsgIC8vICJhIgoKICAgIHZhciBhcnIgPSBbXTsKICAgIGFyci5nZXQo
        J2ZpcnN0T2JqZWN0Jyk7ICAvLyB1bmRlZmluZWQKICAgIGBgYAoKICAgIEBw
        cm9wZXJ0eSBmaXJzdE9iamVjdAogICAgQHJldHVybiB7T2JqZWN0fSB0aGUg
        b2JqZWN0IG9yIHVuZGVmaW5lZAogICovCiAgZmlyc3RPYmplY3Q6IEVtYmVy
        LmNvbXB1dGVkKGZ1bmN0aW9uKCkgewogICAgaWYgKGdldCh0aGlzLCAnbGVu
        Z3RoJyk9PT0wKSByZXR1cm4gdW5kZWZpbmVkIDsKCiAgICAvLyBoYW5kbGUg
        Z2VuZXJpYyBlbnVtZXJhYmxlcwogICAgdmFyIGNvbnRleHQgPSBwb3BDdHgo
        KSwgcmV0OwogICAgcmV0ID0gdGhpcy5uZXh0T2JqZWN0KDAsIG51bGwsIGNv
        bnRleHQpOwogICAgcHVzaEN0eChjb250ZXh0KTsKICAgIHJldHVybiByZXQg
        OwogIH0pLnByb3BlcnR5KCdbXScpLAoKICAvKioKICAgIEhlbHBlciBtZXRo
        b2QgcmV0dXJucyB0aGUgbGFzdCBvYmplY3QgZnJvbSBhIGNvbGxlY3Rpb24u
        IElmIHlvdXIgZW51bWVyYWJsZQogICAgY29udGFpbnMgb25seSBvbmUgb2Jq
        ZWN0LCB0aGlzIG1ldGhvZCBzaG91bGQgYWx3YXlzIHJldHVybiB0aGF0IG9i
        amVjdC4KICAgIElmIHlvdXIgZW51bWVyYWJsZSBpcyBlbXB0eSwgdGhpcyBt
        ZXRob2Qgc2hvdWxkIHJldHVybiBgdW5kZWZpbmVkYC4KCiAgICBgYGBqYXZh
        c2NyaXB0CiAgICB2YXIgYXJyID0gWyJhIiwgImIiLCAiYyJdOwogICAgYXJy
        LmdldCgnbGFzdE9iamVjdCcpOyAgLy8gImMiCgogICAgdmFyIGFyciA9IFtd
        OwogICAgYXJyLmdldCgnbGFzdE9iamVjdCcpOyAgLy8gdW5kZWZpbmVkCiAg
        ICBgYGAKCiAgICBAcHJvcGVydHkgbGFzdE9iamVjdAogICAgQHJldHVybiB7
        T2JqZWN0fSB0aGUgbGFzdCBvYmplY3Qgb3IgdW5kZWZpbmVkCiAgKi8KICBs
        YXN0T2JqZWN0OiBFbWJlci5jb21wdXRlZChmdW5jdGlvbigpIHsKICAgIHZh
        ciBsZW4gPSBnZXQodGhpcywgJ2xlbmd0aCcpOwogICAgaWYgKGxlbj09PTAp
        IHJldHVybiB1bmRlZmluZWQgOwogICAgdmFyIGNvbnRleHQgPSBwb3BDdHgo
        KSwgaWR4PTAsIGN1ciwgbGFzdCA9IG51bGw7CiAgICBkbyB7CiAgICAgIGxh
        c3QgPSBjdXI7CiAgICAgIGN1ciA9IHRoaXMubmV4dE9iamVjdChpZHgrKywg
        bGFzdCwgY29udGV4dCk7CiAgICB9IHdoaWxlIChjdXIgIT09IHVuZGVmaW5l
        ZCk7CiAgICBwdXNoQ3R4KGNvbnRleHQpOwogICAgcmV0dXJuIGxhc3Q7CiAg
        fSkucHJvcGVydHkoJ1tdJyksCgogIC8qKgogICAgUmV0dXJucyBgdHJ1ZWAg
        aWYgdGhlIHBhc3NlZCBvYmplY3QgY2FuIGJlIGZvdW5kIGluIHRoZSByZWNl
        aXZlci4gVGhlCiAgICBkZWZhdWx0IHZlcnNpb24gd2lsbCBpdGVyYXRlIHRo
        cm91Z2ggdGhlIGVudW1lcmFibGUgdW50aWwgdGhlIG9iamVjdAogICAgaXMg
        Zm91bmQuIFlvdSBtYXkgd2FudCB0byBvdmVycmlkZSB0aGlzIHdpdGggYSBt
        b3JlIGVmZmljaWVudCB2ZXJzaW9uLgoKICAgIGBgYGphdmFzY3JpcHQKICAg
        IHZhciBhcnIgPSBbImEiLCAiYiIsICJjIl07CiAgICBhcnIuY29udGFpbnMo
        ImEiKTsgLy8gdHJ1ZQogICAgYXJyLmNvbnRhaW5zKCJ6Iik7IC8vIGZhbHNl
        CiAgICBgYGAKCiAgICBAbWV0aG9kIGNvbnRhaW5zCiAgICBAcGFyYW0ge09i
        amVjdH0gb2JqIFRoZSBvYmplY3QgdG8gc2VhcmNoIGZvci4KICAgIEByZXR1
        cm4ge0Jvb2xlYW59IGB0cnVlYCBpZiBvYmplY3QgaXMgZm91bmQgaW4gZW51
        bWVyYWJsZS4KICAqLwogIGNvbnRhaW5zOiBmdW5jdGlvbihvYmopIHsKICAg
        IHJldHVybiB0aGlzLmZpbmQoZnVuY3Rpb24oaXRlbSkgeyByZXR1cm4gaXRl
        bT09PW9iajsgfSkgIT09IHVuZGVmaW5lZDsKICB9LAoKICAvKioKICAgIEl0
        ZXJhdGVzIHRocm91Z2ggdGhlIGVudW1lcmFibGUsIGNhbGxpbmcgdGhlIHBh
        c3NlZCBmdW5jdGlvbiBvbiBlYWNoCiAgICBpdGVtLiBUaGlzIG1ldGhvZCBj
        b3JyZXNwb25kcyB0byB0aGUgYGZvckVhY2goKWAgbWV0aG9kIGRlZmluZWQg
        aW4KICAgIEphdmFTY3JpcHQgMS42LgoKICAgIFRoZSBjYWxsYmFjayBtZXRo
        b2QgeW91IHByb3ZpZGUgc2hvdWxkIGhhdmUgdGhlIGZvbGxvd2luZyBzaWdu
        YXR1cmUgKGFsbAogICAgcGFyYW1ldGVycyBhcmUgb3B0aW9uYWwpOgoKICAg
        IGBgYGphdmFzY3JpcHQKICAgIGZ1bmN0aW9uKGl0ZW0sIGluZGV4LCBlbnVt
        ZXJhYmxlKTsKICAgIGBgYAoKICAgIC0gYGl0ZW1gIGlzIHRoZSBjdXJyZW50
        IGl0ZW0gaW4gdGhlIGl0ZXJhdGlvbi4KICAgIC0gYGluZGV4YCBpcyB0aGUg
        Y3VycmVudCBpbmRleCBpbiB0aGUgaXRlcmF0aW9uLgogICAgLSBgZW51bWVy
        YWJsZWAgaXMgdGhlIGVudW1lcmFibGUgb2JqZWN0IGl0c2VsZi4KCiAgICBO
        b3RlIHRoYXQgaW4gYWRkaXRpb24gdG8gYSBjYWxsYmFjaywgeW91IGNhbiBh
        bHNvIHBhc3MgYW4gb3B0aW9uYWwgdGFyZ2V0CiAgICBvYmplY3QgdGhhdCB3
        aWxsIGJlIHNldCBhcyBgdGhpc2Agb24gdGhlIGNvbnRleHQuIFRoaXMgaXMg
        YSBnb29kIHdheQogICAgdG8gZ2l2ZSB5b3VyIGl0ZXJhdG9yIGZ1bmN0aW9u
        IGFjY2VzcyB0byB0aGUgY3VycmVudCBvYmplY3QuCgogICAgQG1ldGhvZCBm
        b3JFYWNoCiAgICBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjayBUaGUgY2Fs
        bGJhY2sgdG8gZXhlY3V0ZQogICAgQHBhcmFtIHtPYmplY3R9IFt0YXJnZXRd
        IFRoZSB0YXJnZXQgb2JqZWN0IHRvIHVzZQogICAgQHJldHVybiB7T2JqZWN0
        fSByZWNlaXZlcgogICovCiAgZm9yRWFjaDogZnVuY3Rpb24oY2FsbGJhY2ss
        IHRhcmdldCkgewogICAgaWYgKHR5cGVvZiBjYWxsYmFjayAhPT0gImZ1bmN0
        aW9uIikgdGhyb3cgbmV3IFR5cGVFcnJvcigpIDsKICAgIHZhciBsZW4gPSBn
        ZXQodGhpcywgJ2xlbmd0aCcpLCBsYXN0ID0gbnVsbCwgY29udGV4dCA9IHBv
        cEN0eCgpOwoKICAgIGlmICh0YXJnZXQgPT09IHVuZGVmaW5lZCkgdGFyZ2V0
        ID0gbnVsbDsKCiAgICBmb3IodmFyIGlkeD0wO2lkeDxsZW47aWR4KyspIHsK
        ICAgICAgdmFyIG5leHQgPSB0aGlzLm5leHRPYmplY3QoaWR4LCBsYXN0LCBj
        b250ZXh0KSA7CiAgICAgIGNhbGxiYWNrLmNhbGwodGFyZ2V0LCBuZXh0LCBp
        ZHgsIHRoaXMpOwogICAgICBsYXN0ID0gbmV4dCA7CiAgICB9CiAgICBsYXN0
        ID0gbnVsbCA7CiAgICBjb250ZXh0ID0gcHVzaEN0eChjb250ZXh0KTsKICAg
        IHJldHVybiB0aGlzIDsKICB9LAoKICAvKioKICAgIEFsaWFzIGZvciBgbWFw
        QnlgCgogICAgQG1ldGhvZCBnZXRFYWNoCiAgICBAcGFyYW0ge1N0cmluZ30g
        a2V5IG5hbWUgb2YgdGhlIHByb3BlcnR5CiAgICBAcmV0dXJuIHtBcnJheX0g
        VGhlIG1hcHBlZCBhcnJheS4KICAqLwogIGdldEVhY2g6IGZ1bmN0aW9uKGtl
        eSkgewogICAgcmV0dXJuIHRoaXMubWFwQnkoa2V5KTsKICB9LAoKICAvKioK
        ICAgIFNldHMgdGhlIHZhbHVlIG9uIHRoZSBuYW1lZCBwcm9wZXJ0eSBmb3Ig
        ZWFjaCBtZW1iZXIuIFRoaXMgaXMgbW9yZQogICAgZWZmaWNpZW50IHRoYW4g
        dXNpbmcgb3RoZXIgbWV0aG9kcyBkZWZpbmVkIG9uIHRoaXMgaGVscGVyLiBJ
        ZiB0aGUgb2JqZWN0CiAgICBpbXBsZW1lbnRzIEVtYmVyLk9ic2VydmFibGUs
        IHRoZSB2YWx1ZSB3aWxsIGJlIGNoYW5nZWQgdG8gYHNldCgpLGAgb3RoZXJ3
        aXNlCiAgICBpdCB3aWxsIGJlIHNldCBkaXJlY3RseS4gYG51bGxgIG9iamVj
        dHMgYXJlIHNraXBwZWQuCgogICAgQG1ldGhvZCBzZXRFYWNoCiAgICBAcGFy
        YW0ge1N0cmluZ30ga2V5IFRoZSBrZXkgdG8gc2V0CiAgICBAcGFyYW0ge09i
        amVjdH0gdmFsdWUgVGhlIG9iamVjdCB0byBzZXQKICAgIEByZXR1cm4ge09i
        amVjdH0gcmVjZWl2ZXIKICAqLwogIHNldEVhY2g6IGZ1bmN0aW9uKGtleSwg
        dmFsdWUpIHsKICAgIHJldHVybiB0aGlzLmZvckVhY2goZnVuY3Rpb24oaXRl
        bSkgewogICAgICBzZXQoaXRlbSwga2V5LCB2YWx1ZSk7CiAgICB9KTsKICB9
        LAoKICAvKioKICAgIE1hcHMgYWxsIG9mIHRoZSBpdGVtcyBpbiB0aGUgZW51
        bWVyYXRpb24gdG8gYW5vdGhlciB2YWx1ZSwgcmV0dXJuaW5nCiAgICBhIG5l
        dyBhcnJheS4gVGhpcyBtZXRob2QgY29ycmVzcG9uZHMgdG8gYG1hcCgpYCBk
        ZWZpbmVkIGluIEphdmFTY3JpcHQgMS42LgoKICAgIFRoZSBjYWxsYmFjayBt
        ZXRob2QgeW91IHByb3ZpZGUgc2hvdWxkIGhhdmUgdGhlIGZvbGxvd2luZyBz
        aWduYXR1cmUgKGFsbAogICAgcGFyYW1ldGVycyBhcmUgb3B0aW9uYWwpOgoK
        ICAgIGBgYGphdmFzY3JpcHQKICAgIGZ1bmN0aW9uKGl0ZW0sIGluZGV4LCBl
        bnVtZXJhYmxlKTsKICAgIGBgYAoKICAgIC0gYGl0ZW1gIGlzIHRoZSBjdXJy
        ZW50IGl0ZW0gaW4gdGhlIGl0ZXJhdGlvbi4KICAgIC0gYGluZGV4YCBpcyB0
        aGUgY3VycmVudCBpbmRleCBpbiB0aGUgaXRlcmF0aW9uLgogICAgLSBgZW51
        bWVyYWJsZWAgaXMgdGhlIGVudW1lcmFibGUgb2JqZWN0IGl0c2VsZi4KCiAg
        ICBJdCBzaG91bGQgcmV0dXJuIHRoZSBtYXBwZWQgdmFsdWUuCgogICAgTm90
        ZSB0aGF0IGluIGFkZGl0aW9uIHRvIGEgY2FsbGJhY2ssIHlvdSBjYW4gYWxz
        byBwYXNzIGFuIG9wdGlvbmFsIHRhcmdldAogICAgb2JqZWN0IHRoYXQgd2ls
        bCBiZSBzZXQgYXMgYHRoaXNgIG9uIHRoZSBjb250ZXh0LiBUaGlzIGlzIGEg
        Z29vZCB3YXkKICAgIHRvIGdpdmUgeW91ciBpdGVyYXRvciBmdW5jdGlvbiBh
        Y2Nlc3MgdG8gdGhlIGN1cnJlbnQgb2JqZWN0LgoKICAgIEBtZXRob2QgbWFw
        CiAgICBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjayBUaGUgY2FsbGJhY2sg
        dG8gZXhlY3V0ZQogICAgQHBhcmFtIHtPYmplY3R9IFt0YXJnZXRdIFRoZSB0
        YXJnZXQgb2JqZWN0IHRvIHVzZQogICAgQHJldHVybiB7QXJyYXl9IFRoZSBt
        YXBwZWQgYXJyYXkuCiAgKi8KICBtYXA6IGZ1bmN0aW9uKGNhbGxiYWNrLCB0
        YXJnZXQpIHsKICAgIHZhciByZXQgPSBFbWJlci5BKCk7CiAgICB0aGlzLmZv
        ckVhY2goZnVuY3Rpb24oeCwgaWR4LCBpKSB7CiAgICAgIHJldFtpZHhdID0g
        Y2FsbGJhY2suY2FsbCh0YXJnZXQsIHgsIGlkeCxpKTsKICAgIH0pOwogICAg
        cmV0dXJuIHJldCA7CiAgfSwKCiAgLyoqCiAgICBTaW1pbGFyIHRvIG1hcCwg
        dGhpcyBzcGVjaWFsaXplZCBmdW5jdGlvbiByZXR1cm5zIHRoZSB2YWx1ZSBv
        ZiB0aGUgbmFtZWQKICAgIHByb3BlcnR5IG9uIGFsbCBpdGVtcyBpbiB0aGUg
        ZW51bWVyYXRpb24uCgogICAgQG1ldGhvZCBtYXBCeQogICAgQHBhcmFtIHtT
        dHJpbmd9IGtleSBuYW1lIG9mIHRoZSBwcm9wZXJ0eQogICAgQHJldHVybiB7
        QXJyYXl9IFRoZSBtYXBwZWQgYXJyYXkuCiAgKi8KICBtYXBCeTogZnVuY3Rp
        b24oa2V5KSB7CiAgICByZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24obmV4dCkg
        ewogICAgICByZXR1cm4gZ2V0KG5leHQsIGtleSk7CiAgICB9KTsKICB9LAoK
        ICAvKioKICAgIFNpbWlsYXIgdG8gbWFwLCB0aGlzIHNwZWNpYWxpemVkIGZ1
        bmN0aW9uIHJldHVybnMgdGhlIHZhbHVlIG9mIHRoZSBuYW1lZAogICAgcHJv
        cGVydHkgb24gYWxsIGl0ZW1zIGluIHRoZSBlbnVtZXJhdGlvbi4KCiAgICBA
        bWV0aG9kIG1hcFByb3BlcnR5CiAgICBAcGFyYW0ge1N0cmluZ30ga2V5IG5h
        bWUgb2YgdGhlIHByb3BlcnR5CiAgICBAcmV0dXJuIHtBcnJheX0gVGhlIG1h
        cHBlZCBhcnJheS4KICAgIEBkZXByZWNhdGVkIFVzZSBgbWFwQnlgIGluc3Rl
        YWQKICAqLwoKICBtYXBQcm9wZXJ0eTogRW1iZXIuYWxpYXNNZXRob2QoJ21h
        cEJ5JyksCgogIC8qKgogICAgUmV0dXJucyBhbiBhcnJheSB3aXRoIGFsbCBv
        ZiB0aGUgaXRlbXMgaW4gdGhlIGVudW1lcmF0aW9uIHRoYXQgdGhlIHBhc3Nl
        ZAogICAgZnVuY3Rpb24gcmV0dXJucyB0cnVlIGZvci4gVGhpcyBtZXRob2Qg
        Y29ycmVzcG9uZHMgdG8gYGZpbHRlcigpYCBkZWZpbmVkIGluCiAgICBKYXZh
        U2NyaXB0IDEuNi4KCiAgICBUaGUgY2FsbGJhY2sgbWV0aG9kIHlvdSBwcm92
        aWRlIHNob3VsZCBoYXZlIHRoZSBmb2xsb3dpbmcgc2lnbmF0dXJlIChhbGwK
        ICAgIHBhcmFtZXRlcnMgYXJlIG9wdGlvbmFsKToKCiAgICBgYGBqYXZhc2Ny
        aXB0CiAgICBmdW5jdGlvbihpdGVtLCBpbmRleCwgZW51bWVyYWJsZSk7CiAg
        ICBgYGAKCiAgICAtIGBpdGVtYCBpcyB0aGUgY3VycmVudCBpdGVtIGluIHRo
        ZSBpdGVyYXRpb24uCiAgICAtIGBpbmRleGAgaXMgdGhlIGN1cnJlbnQgaW5k
        ZXggaW4gdGhlIGl0ZXJhdGlvbi4KICAgIC0gYGVudW1lcmFibGVgIGlzIHRo
        ZSBlbnVtZXJhYmxlIG9iamVjdCBpdHNlbGYuCgogICAgSXQgc2hvdWxkIHJl
        dHVybiB0aGUgYHRydWVgIHRvIGluY2x1ZGUgdGhlIGl0ZW0gaW4gdGhlIHJl
        c3VsdHMsIGBmYWxzZWAKICAgIG90aGVyd2lzZS4KCiAgICBOb3RlIHRoYXQg
        aW4gYWRkaXRpb24gdG8gYSBjYWxsYmFjaywgeW91IGNhbiBhbHNvIHBhc3Mg
        YW4gb3B0aW9uYWwgdGFyZ2V0CiAgICBvYmplY3QgdGhhdCB3aWxsIGJlIHNl
        dCBhcyBgdGhpc2Agb24gdGhlIGNvbnRleHQuIFRoaXMgaXMgYSBnb29kIHdh
        eQogICAgdG8gZ2l2ZSB5b3VyIGl0ZXJhdG9yIGZ1bmN0aW9uIGFjY2VzcyB0
        byB0aGUgY3VycmVudCBvYmplY3QuCgogICAgQG1ldGhvZCBmaWx0ZXIKICAg
        IEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrIFRoZSBjYWxsYmFjayB0byBl
        eGVjdXRlCiAgICBAcGFyYW0ge09iamVjdH0gW3RhcmdldF0gVGhlIHRhcmdl
        dCBvYmplY3QgdG8gdXNlCiAgICBAcmV0dXJuIHtBcnJheX0gQSBmaWx0ZXJl
        ZCBhcnJheS4KICAqLwogIGZpbHRlcjogZnVuY3Rpb24oY2FsbGJhY2ssIHRh
        cmdldCkgewogICAgdmFyIHJldCA9IEVtYmVyLkEoKTsKICAgIHRoaXMuZm9y
        RWFjaChmdW5jdGlvbih4LCBpZHgsIGkpIHsKICAgICAgaWYgKGNhbGxiYWNr
        LmNhbGwodGFyZ2V0LCB4LCBpZHgsIGkpKSByZXQucHVzaCh4KTsKICAgIH0p
        OwogICAgcmV0dXJuIHJldCA7CiAgfSwKCiAgLyoqCiAgICBSZXR1cm5zIGFu
        IGFycmF5IHdpdGggYWxsIG9mIHRoZSBpdGVtcyBpbiB0aGUgZW51bWVyYXRp
        b24gd2hlcmUgdGhlIHBhc3NlZAogICAgZnVuY3Rpb24gcmV0dXJucyBmYWxz
        ZSBmb3IuIFRoaXMgbWV0aG9kIGlzIHRoZSBpbnZlcnNlIG9mIGZpbHRlcigp
        LgoKICAgIFRoZSBjYWxsYmFjayBtZXRob2QgeW91IHByb3ZpZGUgc2hvdWxk
        IGhhdmUgdGhlIGZvbGxvd2luZyBzaWduYXR1cmUgKGFsbAogICAgcGFyYW1l
        dGVycyBhcmUgb3B0aW9uYWwpOgoKICAgIGBgYGphdmFzY3JpcHQKICAgIGZ1
        bmN0aW9uKGl0ZW0sIGluZGV4LCBlbnVtZXJhYmxlKTsKICAgIGBgYAoKICAg
        IC0gKml0ZW0qIGlzIHRoZSBjdXJyZW50IGl0ZW0gaW4gdGhlIGl0ZXJhdGlv
        bi4KICAgIC0gKmluZGV4KiBpcyB0aGUgY3VycmVudCBpbmRleCBpbiB0aGUg
        aXRlcmF0aW9uCiAgICAtICplbnVtZXJhYmxlKiBpcyB0aGUgZW51bWVyYWJs
        ZSBvYmplY3QgaXRzZWxmLgoKICAgIEl0IHNob3VsZCByZXR1cm4gdGhlIGEg
        ZmFsc2V5IHZhbHVlIHRvIGluY2x1ZGUgdGhlIGl0ZW0gaW4gdGhlIHJlc3Vs
        dHMuCgogICAgTm90ZSB0aGF0IGluIGFkZGl0aW9uIHRvIGEgY2FsbGJhY2ss
        IHlvdSBjYW4gYWxzbyBwYXNzIGFuIG9wdGlvbmFsIHRhcmdldAogICAgb2Jq
        ZWN0IHRoYXQgd2lsbCBiZSBzZXQgYXMgInRoaXMiIG9uIHRoZSBjb250ZXh0
        LiBUaGlzIGlzIGEgZ29vZCB3YXkKICAgIHRvIGdpdmUgeW91ciBpdGVyYXRv
        ciBmdW5jdGlvbiBhY2Nlc3MgdG8gdGhlIGN1cnJlbnQgb2JqZWN0LgoKICAg
        IEBtZXRob2QgcmVqZWN0CiAgICBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFj
        ayBUaGUgY2FsbGJhY2sgdG8gZXhlY3V0ZQogICAgQHBhcmFtIHtPYmplY3R9
        IFt0YXJnZXRdIFRoZSB0YXJnZXQgb2JqZWN0IHRvIHVzZQogICAgQHJldHVy
        biB7QXJyYXl9IEEgcmVqZWN0ZWQgYXJyYXkuCiAgICovCiAgcmVqZWN0OiBm
        dW5jdGlvbihjYWxsYmFjaywgdGFyZ2V0KSB7CiAgICByZXR1cm4gdGhpcy5m
        aWx0ZXIoZnVuY3Rpb24oKSB7CiAgICAgIHJldHVybiAhKGNhbGxiYWNrLmFw
        cGx5KHRhcmdldCwgYXJndW1lbnRzKSk7CiAgICB9KTsKICB9LAoKICAvKioK
        ICAgIFJldHVybnMgYW4gYXJyYXkgd2l0aCBqdXN0IHRoZSBpdGVtcyB3aXRo
        IHRoZSBtYXRjaGVkIHByb3BlcnR5LiBZb3UKICAgIGNhbiBwYXNzIGFuIG9w
        dGlvbmFsIHNlY29uZCBhcmd1bWVudCB3aXRoIHRoZSB0YXJnZXQgdmFsdWUu
        IE90aGVyd2lzZQogICAgdGhpcyB3aWxsIG1hdGNoIGFueSBwcm9wZXJ0eSB0
        aGF0IGV2YWx1YXRlcyB0byBgdHJ1ZWAuCgogICAgQG1ldGhvZCBmaWx0ZXJC
        eQogICAgQHBhcmFtIHtTdHJpbmd9IGtleSB0aGUgcHJvcGVydHkgdG8gdGVz
        dAogICAgQHBhcmFtIHtTdHJpbmd9IFt2YWx1ZV0gb3B0aW9uYWwgdmFsdWUg
        dG8gdGVzdCBhZ2FpbnN0LgogICAgQHJldHVybiB7QXJyYXl9IGZpbHRlcmVk
        IGFycmF5CiAgKi8KICBmaWx0ZXJCeTogZnVuY3Rpb24oa2V5LCB2YWx1ZSkg
        ewogICAgcmV0dXJuIHRoaXMuZmlsdGVyKGl0ZXIuYXBwbHkodGhpcywgYXJn
        dW1lbnRzKSk7CiAgfSwKCiAgLyoqCiAgICBSZXR1cm5zIGFuIGFycmF5IHdp
        dGgganVzdCB0aGUgaXRlbXMgd2l0aCB0aGUgbWF0Y2hlZCBwcm9wZXJ0eS4g
        WW91CiAgICBjYW4gcGFzcyBhbiBvcHRpb25hbCBzZWNvbmQgYXJndW1lbnQg
        d2l0aCB0aGUgdGFyZ2V0IHZhbHVlLiBPdGhlcndpc2UKICAgIHRoaXMgd2ls
        bCBtYXRjaCBhbnkgcHJvcGVydHkgdGhhdCBldmFsdWF0ZXMgdG8gYHRydWVg
        LgoKICAgIEBtZXRob2QgZmlsdGVyUHJvcGVydHkKICAgIEBwYXJhbSB7U3Ry
        aW5nfSBrZXkgdGhlIHByb3BlcnR5IHRvIHRlc3QKICAgIEBwYXJhbSB7U3Ry
        aW5nfSBbdmFsdWVdIG9wdGlvbmFsIHZhbHVlIHRvIHRlc3QgYWdhaW5zdC4K
        ICAgIEByZXR1cm4ge0FycmF5fSBmaWx0ZXJlZCBhcnJheQogICAgQGRlcHJl
        Y2F0ZWQgVXNlIGBmaWx0ZXJCeWAgaW5zdGVhZAogICovCiAgZmlsdGVyUHJv
        cGVydHk6IEVtYmVyLmFsaWFzTWV0aG9kKCdmaWx0ZXJCeScpLAoKICAvKioK
        ICAgIFJldHVybnMgYW4gYXJyYXkgd2l0aCB0aGUgaXRlbXMgdGhhdCBkbyBu
        b3QgaGF2ZSB0cnV0aHkgdmFsdWVzIGZvcgogICAga2V5LiAgWW91IGNhbiBw
        YXNzIGFuIG9wdGlvbmFsIHNlY29uZCBhcmd1bWVudCB3aXRoIHRoZSB0YXJn
        ZXQgdmFsdWUuICBPdGhlcndpc2UKICAgIHRoaXMgd2lsbCBtYXRjaCBhbnkg
        cHJvcGVydHkgdGhhdCBldmFsdWF0ZXMgdG8gZmFsc2UuCgogICAgQG1ldGhv
        ZCByZWplY3RCeQogICAgQHBhcmFtIHtTdHJpbmd9IGtleSB0aGUgcHJvcGVy
        dHkgdG8gdGVzdAogICAgQHBhcmFtIHtTdHJpbmd9IFt2YWx1ZV0gb3B0aW9u
        YWwgdmFsdWUgdG8gdGVzdCBhZ2FpbnN0LgogICAgQHJldHVybiB7QXJyYXl9
        IHJlamVjdGVkIGFycmF5CiAgKi8KICByZWplY3RCeTogZnVuY3Rpb24oa2V5
        LCB2YWx1ZSkgewogICAgdmFyIGV4YWN0VmFsdWUgPSBmdW5jdGlvbihpdGVt
        KSB7IHJldHVybiBnZXQoaXRlbSwga2V5KSA9PT0gdmFsdWU7IH0sCiAgICAg
        ICAgaGFzVmFsdWUgPSBmdW5jdGlvbihpdGVtKSB7IHJldHVybiAhIWdldChp
        dGVtLCBrZXkpOyB9LAogICAgICAgIHVzZSA9IChhcmd1bWVudHMubGVuZ3Ro
        ID09PSAyID8gZXhhY3RWYWx1ZSA6IGhhc1ZhbHVlKTsKCiAgICByZXR1cm4g
        dGhpcy5yZWplY3QodXNlKTsKICB9LAoKICAvKioKICAgIFJldHVybnMgYW4g
        YXJyYXkgd2l0aCB0aGUgaXRlbXMgdGhhdCBkbyBub3QgaGF2ZSB0cnV0aHkg
        dmFsdWVzIGZvcgogICAga2V5LiAgWW91IGNhbiBwYXNzIGFuIG9wdGlvbmFs
        IHNlY29uZCBhcmd1bWVudCB3aXRoIHRoZSB0YXJnZXQgdmFsdWUuICBPdGhl
        cndpc2UKICAgIHRoaXMgd2lsbCBtYXRjaCBhbnkgcHJvcGVydHkgdGhhdCBl
        dmFsdWF0ZXMgdG8gZmFsc2UuCgogICAgQG1ldGhvZCByZWplY3RQcm9wZXJ0
        eQogICAgQHBhcmFtIHtTdHJpbmd9IGtleSB0aGUgcHJvcGVydHkgdG8gdGVz
        dAogICAgQHBhcmFtIHtTdHJpbmd9IFt2YWx1ZV0gb3B0aW9uYWwgdmFsdWUg
        dG8gdGVzdCBhZ2FpbnN0LgogICAgQHJldHVybiB7QXJyYXl9IHJlamVjdGVk
        IGFycmF5CiAgICBAZGVwcmVjYXRlZCBVc2UgYHJlamVjdEJ5YCBpbnN0ZWFk
        CiAgKi8KICByZWplY3RQcm9wZXJ0eTogRW1iZXIuYWxpYXNNZXRob2QoJ3Jl
        amVjdEJ5JyksCgogIC8qKgogICAgUmV0dXJucyB0aGUgZmlyc3QgaXRlbSBp
        biB0aGUgYXJyYXkgZm9yIHdoaWNoIHRoZSBjYWxsYmFjayByZXR1cm5zIHRy
        dWUuCiAgICBUaGlzIG1ldGhvZCB3b3JrcyBzaW1pbGFyIHRvIHRoZSBgZmls
        dGVyKClgIG1ldGhvZCBkZWZpbmVkIGluIEphdmFTY3JpcHQgMS42CiAgICBl
        eGNlcHQgdGhhdCBpdCB3aWxsIHN0b3Agd29ya2luZyBvbiB0aGUgYXJyYXkg
        b25jZSBhIG1hdGNoIGlzIGZvdW5kLgoKICAgIFRoZSBjYWxsYmFjayBtZXRo
        b2QgeW91IHByb3ZpZGUgc2hvdWxkIGhhdmUgdGhlIGZvbGxvd2luZyBzaWdu
        YXR1cmUgKGFsbAogICAgcGFyYW1ldGVycyBhcmUgb3B0aW9uYWwpOgoKICAg
        IGBgYGphdmFzY3JpcHQKICAgIGZ1bmN0aW9uKGl0ZW0sIGluZGV4LCBlbnVt
        ZXJhYmxlKTsKICAgIGBgYAoKICAgIC0gYGl0ZW1gIGlzIHRoZSBjdXJyZW50
        IGl0ZW0gaW4gdGhlIGl0ZXJhdGlvbi4KICAgIC0gYGluZGV4YCBpcyB0aGUg
        Y3VycmVudCBpbmRleCBpbiB0aGUgaXRlcmF0aW9uLgogICAgLSBgZW51bWVy
        YWJsZWAgaXMgdGhlIGVudW1lcmFibGUgb2JqZWN0IGl0c2VsZi4KCiAgICBJ
        dCBzaG91bGQgcmV0dXJuIHRoZSBgdHJ1ZWAgdG8gaW5jbHVkZSB0aGUgaXRl
        bSBpbiB0aGUgcmVzdWx0cywgYGZhbHNlYAogICAgb3RoZXJ3aXNlLgoKICAg
        IE5vdGUgdGhhdCBpbiBhZGRpdGlvbiB0byBhIGNhbGxiYWNrLCB5b3UgY2Fu
        IGFsc28gcGFzcyBhbiBvcHRpb25hbCB0YXJnZXQKICAgIG9iamVjdCB0aGF0
        IHdpbGwgYmUgc2V0IGFzIGB0aGlzYCBvbiB0aGUgY29udGV4dC4gVGhpcyBp
        cyBhIGdvb2Qgd2F5CiAgICB0byBnaXZlIHlvdXIgaXRlcmF0b3IgZnVuY3Rp
        b24gYWNjZXNzIHRvIHRoZSBjdXJyZW50IG9iamVjdC4KCiAgICBAbWV0aG9k
        IGZpbmQKICAgIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrIFRoZSBjYWxs
        YmFjayB0byBleGVjdXRlCiAgICBAcGFyYW0ge09iamVjdH0gW3RhcmdldF0g
        VGhlIHRhcmdldCBvYmplY3QgdG8gdXNlCiAgICBAcmV0dXJuIHtPYmplY3R9
        IEZvdW5kIGl0ZW0gb3IgYHVuZGVmaW5lZGAuCiAgKi8KICBmaW5kOiBmdW5j
        dGlvbihjYWxsYmFjaywgdGFyZ2V0KSB7CiAgICB2YXIgbGVuID0gZ2V0KHRo
        aXMsICdsZW5ndGgnKSA7CiAgICBpZiAodGFyZ2V0ID09PSB1bmRlZmluZWQp
        IHRhcmdldCA9IG51bGw7CgogICAgdmFyIGxhc3QgPSBudWxsLCBuZXh0LCBm
        b3VuZCA9IGZhbHNlLCByZXQgOwogICAgdmFyIGNvbnRleHQgPSBwb3BDdHgo
        KTsKICAgIGZvcih2YXIgaWR4PTA7aWR4PGxlbiAmJiAhZm91bmQ7aWR4Kysp
        IHsKICAgICAgbmV4dCA9IHRoaXMubmV4dE9iamVjdChpZHgsIGxhc3QsIGNv
        bnRleHQpIDsKICAgICAgaWYgKGZvdW5kID0gY2FsbGJhY2suY2FsbCh0YXJn
        ZXQsIG5leHQsIGlkeCwgdGhpcykpIHJldCA9IG5leHQgOwogICAgICBsYXN0
        ID0gbmV4dCA7CiAgICB9CiAgICBuZXh0ID0gbGFzdCA9IG51bGwgOwogICAg
        Y29udGV4dCA9IHB1c2hDdHgoY29udGV4dCk7CiAgICByZXR1cm4gcmV0IDsK
        ICB9LAoKICAvKioKICAgIFJldHVybnMgdGhlIGZpcnN0IGl0ZW0gd2l0aCBh
        IHByb3BlcnR5IG1hdGNoaW5nIHRoZSBwYXNzZWQgdmFsdWUuIFlvdQogICAg
        Y2FuIHBhc3MgYW4gb3B0aW9uYWwgc2Vjb25kIGFyZ3VtZW50IHdpdGggdGhl
        IHRhcmdldCB2YWx1ZS4gT3RoZXJ3aXNlCiAgICB0aGlzIHdpbGwgbWF0Y2gg
        YW55IHByb3BlcnR5IHRoYXQgZXZhbHVhdGVzIHRvIGB0cnVlYC4KCiAgICBU
        aGlzIG1ldGhvZCB3b3JrcyBtdWNoIGxpa2UgdGhlIG1vcmUgZ2VuZXJpYyBg
        ZmluZCgpYCBtZXRob2QuCgogICAgQG1ldGhvZCBmaW5kQnkKICAgIEBwYXJh
        bSB7U3RyaW5nfSBrZXkgdGhlIHByb3BlcnR5IHRvIHRlc3QKICAgIEBwYXJh
        bSB7U3RyaW5nfSBbdmFsdWVdIG9wdGlvbmFsIHZhbHVlIHRvIHRlc3QgYWdh
        aW5zdC4KICAgIEByZXR1cm4ge09iamVjdH0gZm91bmQgaXRlbSBvciBgdW5k
        ZWZpbmVkYAogICovCiAgZmluZEJ5OiBmdW5jdGlvbihrZXksIHZhbHVlKSB7
        CiAgICByZXR1cm4gdGhpcy5maW5kKGl0ZXIuYXBwbHkodGhpcywgYXJndW1l
        bnRzKSk7CiAgfSwKCiAgLyoqCiAgICBSZXR1cm5zIHRoZSBmaXJzdCBpdGVt
        IHdpdGggYSBwcm9wZXJ0eSBtYXRjaGluZyB0aGUgcGFzc2VkIHZhbHVlLiBZ
        b3UKICAgIGNhbiBwYXNzIGFuIG9wdGlvbmFsIHNlY29uZCBhcmd1bWVudCB3
        aXRoIHRoZSB0YXJnZXQgdmFsdWUuIE90aGVyd2lzZQogICAgdGhpcyB3aWxs
        IG1hdGNoIGFueSBwcm9wZXJ0eSB0aGF0IGV2YWx1YXRlcyB0byBgdHJ1ZWAu
        CgogICAgVGhpcyBtZXRob2Qgd29ya3MgbXVjaCBsaWtlIHRoZSBtb3JlIGdl
        bmVyaWMgYGZpbmQoKWAgbWV0aG9kLgoKICAgIEBtZXRob2QgZmluZFByb3Bl
        cnR5CiAgICBAcGFyYW0ge1N0cmluZ30ga2V5IHRoZSBwcm9wZXJ0eSB0byB0
        ZXN0CiAgICBAcGFyYW0ge1N0cmluZ30gW3ZhbHVlXSBvcHRpb25hbCB2YWx1
        ZSB0byB0ZXN0IGFnYWluc3QuCiAgICBAcmV0dXJuIHtPYmplY3R9IGZvdW5k
        IGl0ZW0gb3IgYHVuZGVmaW5lZGAKICAgIEBkZXByZWNhdGVkIFVzZSBgZmlu
        ZEJ5YCBpbnN0ZWFkCiAgKi8KICBmaW5kUHJvcGVydHk6IEVtYmVyLmFsaWFz
        TWV0aG9kKCdmaW5kQnknKSwKCiAgLyoqCiAgICBSZXR1cm5zIGB0cnVlYCBp
        ZiB0aGUgcGFzc2VkIGZ1bmN0aW9uIHJldHVybnMgdHJ1ZSBmb3IgZXZlcnkg
        aXRlbSBpbiB0aGUKICAgIGVudW1lcmF0aW9uLiBUaGlzIGNvcnJlc3BvbmRz
        IHdpdGggdGhlIGBldmVyeSgpYCBtZXRob2QgaW4gSmF2YVNjcmlwdCAxLjYu
        CgogICAgVGhlIGNhbGxiYWNrIG1ldGhvZCB5b3UgcHJvdmlkZSBzaG91bGQg
        aGF2ZSB0aGUgZm9sbG93aW5nIHNpZ25hdHVyZSAoYWxsCiAgICBwYXJhbWV0
        ZXJzIGFyZSBvcHRpb25hbCk6CgogICAgYGBgamF2YXNjcmlwdAogICAgZnVu
        Y3Rpb24oaXRlbSwgaW5kZXgsIGVudW1lcmFibGUpOwogICAgYGBgCgogICAg
        LSBgaXRlbWAgaXMgdGhlIGN1cnJlbnQgaXRlbSBpbiB0aGUgaXRlcmF0aW9u
        LgogICAgLSBgaW5kZXhgIGlzIHRoZSBjdXJyZW50IGluZGV4IGluIHRoZSBp
        dGVyYXRpb24uCiAgICAtIGBlbnVtZXJhYmxlYCBpcyB0aGUgZW51bWVyYWJs
        ZSBvYmplY3QgaXRzZWxmLgoKICAgIEl0IHNob3VsZCByZXR1cm4gdGhlIGB0
        cnVlYCBvciBgZmFsc2VgLgoKICAgIE5vdGUgdGhhdCBpbiBhZGRpdGlvbiB0
        byBhIGNhbGxiYWNrLCB5b3UgY2FuIGFsc28gcGFzcyBhbiBvcHRpb25hbCB0
        YXJnZXQKICAgIG9iamVjdCB0aGF0IHdpbGwgYmUgc2V0IGFzIGB0aGlzYCBv
        biB0aGUgY29udGV4dC4gVGhpcyBpcyBhIGdvb2Qgd2F5CiAgICB0byBnaXZl
        IHlvdXIgaXRlcmF0b3IgZnVuY3Rpb24gYWNjZXNzIHRvIHRoZSBjdXJyZW50
        IG9iamVjdC4KCiAgICBFeGFtcGxlIFVzYWdlOgoKICAgIGBgYGphdmFzY3Jp
        cHQKICAgIGlmIChwZW9wbGUuZXZlcnkoaXNFbmdpbmVlcikpIHsgUGF5Y2hl
        Y2tzLmFkZEJpZ0JvbnVzKCk7IH0KICAgIGBgYAoKICAgIEBtZXRob2QgZXZl
        cnkKICAgIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrIFRoZSBjYWxsYmFj
        ayB0byBleGVjdXRlCiAgICBAcGFyYW0ge09iamVjdH0gW3RhcmdldF0gVGhl
        IHRhcmdldCBvYmplY3QgdG8gdXNlCiAgICBAcmV0dXJuIHtCb29sZWFufQog
        ICovCiAgZXZlcnk6IGZ1bmN0aW9uKGNhbGxiYWNrLCB0YXJnZXQpIHsKICAg
        IHJldHVybiAhdGhpcy5maW5kKGZ1bmN0aW9uKHgsIGlkeCwgaSkgewogICAg
        ICByZXR1cm4gIWNhbGxiYWNrLmNhbGwodGFyZ2V0LCB4LCBpZHgsIGkpOwog
        ICAgfSk7CiAgfSwKCiAgLyoqCiAgICBAbWV0aG9kIGV2ZXJ5QnkKICAgIEBw
        YXJhbSB7U3RyaW5nfSBrZXkgdGhlIHByb3BlcnR5IHRvIHRlc3QKICAgIEBw
        YXJhbSB7U3RyaW5nfSBbdmFsdWVdIG9wdGlvbmFsIHZhbHVlIHRvIHRlc3Qg
        YWdhaW5zdC4KICAgIEBkZXByZWNhdGVkIFVzZSBgaXNFdmVyeWAgaW5zdGVh
        ZAogICAgQHJldHVybiB7Qm9vbGVhbn0KICAqLwogIGV2ZXJ5Qnk6IEVtYmVy
        LmFsaWFzTWV0aG9kKCdpc0V2ZXJ5JyksCgogIC8qKgogICAgQG1ldGhvZCBl
        dmVyeVByb3BlcnR5CiAgICBAcGFyYW0ge1N0cmluZ30ga2V5IHRoZSBwcm9w
        ZXJ0eSB0byB0ZXN0CiAgICBAcGFyYW0ge1N0cmluZ30gW3ZhbHVlXSBvcHRp
        b25hbCB2YWx1ZSB0byB0ZXN0IGFnYWluc3QuCiAgICBAZGVwcmVjYXRlZCBV
        c2UgYGlzRXZlcnlgIGluc3RlYWQKICAgIEByZXR1cm4ge0Jvb2xlYW59CiAg
        Ki8KICBldmVyeVByb3BlcnR5OiBFbWJlci5hbGlhc01ldGhvZCgnaXNFdmVy
        eScpLAoKICAvKioKICAgIFJldHVybnMgYHRydWVgIGlmIHRoZSBwYXNzZWQg
        cHJvcGVydHkgcmVzb2x2ZXMgdG8gYHRydWVgIGZvciBhbGwgaXRlbXMgaW4K
        ICAgIHRoZSBlbnVtZXJhYmxlLiBUaGlzIG1ldGhvZCBpcyBvZnRlbiBzaW1w
        bGVyL2Zhc3RlciB0aGFuIHVzaW5nIGEgY2FsbGJhY2suCgogICAgQG1ldGhv
        ZCBpc0V2ZXJ5CiAgICBAcGFyYW0ge1N0cmluZ30ga2V5IHRoZSBwcm9wZXJ0
        eSB0byB0ZXN0CiAgICBAcGFyYW0ge1N0cmluZ30gW3ZhbHVlXSBvcHRpb25h
        bCB2YWx1ZSB0byB0ZXN0IGFnYWluc3QuCiAgICBAcmV0dXJuIHtCb29sZWFu
        fQogICovCiAgaXNFdmVyeTogZnVuY3Rpb24oa2V5LCB2YWx1ZSkgewogICAg
        cmV0dXJuIHRoaXMuZXZlcnkoaXRlci5hcHBseSh0aGlzLCBhcmd1bWVudHMp
        KTsKICB9LAoKICAvKioKICAgIFJldHVybnMgYHRydWVgIGlmIHRoZSBwYXNz
        ZWQgZnVuY3Rpb24gcmV0dXJucyB0cnVlIGZvciBhbnkgaXRlbSBpbiB0aGUK
        ICAgIGVudW1lcmF0aW9uLiBUaGlzIGNvcnJlc3BvbmRzIHdpdGggdGhlIGBz
        b21lKClgIG1ldGhvZCBpbiBKYXZhU2NyaXB0IDEuNi4KCiAgICBUaGUgY2Fs
        bGJhY2sgbWV0aG9kIHlvdSBwcm92aWRlIHNob3VsZCBoYXZlIHRoZSBmb2xs
        b3dpbmcgc2lnbmF0dXJlIChhbGwKICAgIHBhcmFtZXRlcnMgYXJlIG9wdGlv
        bmFsKToKCiAgICBgYGBqYXZhc2NyaXB0CiAgICBmdW5jdGlvbihpdGVtLCBp
        bmRleCwgZW51bWVyYWJsZSk7CiAgICBgYGAKCiAgICAtIGBpdGVtYCBpcyB0
        aGUgY3VycmVudCBpdGVtIGluIHRoZSBpdGVyYXRpb24uCiAgICAtIGBpbmRl
        eGAgaXMgdGhlIGN1cnJlbnQgaW5kZXggaW4gdGhlIGl0ZXJhdGlvbi4KICAg
        IC0gYGVudW1lcmFibGVgIGlzIHRoZSBlbnVtZXJhYmxlIG9iamVjdCBpdHNl
        bGYuCgogICAgSXQgc2hvdWxkIHJldHVybiB0aGUgYHRydWVgIHRvIGluY2x1
        ZGUgdGhlIGl0ZW0gaW4gdGhlIHJlc3VsdHMsIGBmYWxzZWAKICAgIG90aGVy
        d2lzZS4KCiAgICBOb3RlIHRoYXQgaW4gYWRkaXRpb24gdG8gYSBjYWxsYmFj
        aywgeW91IGNhbiBhbHNvIHBhc3MgYW4gb3B0aW9uYWwgdGFyZ2V0CiAgICBv
        YmplY3QgdGhhdCB3aWxsIGJlIHNldCBhcyBgdGhpc2Agb24gdGhlIGNvbnRl
        eHQuIFRoaXMgaXMgYSBnb29kIHdheQogICAgdG8gZ2l2ZSB5b3VyIGl0ZXJh
        dG9yIGZ1bmN0aW9uIGFjY2VzcyB0byB0aGUgY3VycmVudCBvYmplY3QuCgog
        ICAgVXNhZ2UgRXhhbXBsZToKCiAgICBgYGBqYXZhc2NyaXB0CiAgICBpZiAo
        cGVvcGxlLmFueShpc01hbmFnZXIpKSB7IFBheWNoZWNrcy5hZGRCaWdnZXJC
        b251cygpOyB9CiAgICBgYGAKCiAgICBAbWV0aG9kIGFueQogICAgQHBhcmFt
        IHtGdW5jdGlvbn0gY2FsbGJhY2sgVGhlIGNhbGxiYWNrIHRvIGV4ZWN1dGUK
        ICAgIEBwYXJhbSB7T2JqZWN0fSBbdGFyZ2V0XSBUaGUgdGFyZ2V0IG9iamVj
        dCB0byB1c2UKICAgIEByZXR1cm4ge0Jvb2xlYW59IGB0cnVlYCBpZiB0aGUg
        cGFzc2VkIGZ1bmN0aW9uIHJldHVybnMgYHRydWVgIGZvciBhbnkgaXRlbQog
        ICovCiAgYW55OiBmdW5jdGlvbihjYWxsYmFjaywgdGFyZ2V0KSB7CiAgICB2
        YXIgbGVuICAgICA9IGdldCh0aGlzLCAnbGVuZ3RoJyksCiAgICAgICAgY29u
        dGV4dCA9IHBvcEN0eCgpLAogICAgICAgIGZvdW5kICAgPSBmYWxzZSwKICAg
        ICAgICBsYXN0ICAgID0gbnVsbCwKICAgICAgICBuZXh0LCBpZHg7CgogICAg
        aWYgKHRhcmdldCA9PT0gdW5kZWZpbmVkKSB7IHRhcmdldCA9IG51bGw7IH0K
        CiAgICBmb3IgKGlkeCA9IDA7IGlkeCA8IGxlbiAmJiAhZm91bmQ7IGlkeCsr
        KSB7CiAgICAgIG5leHQgID0gdGhpcy5uZXh0T2JqZWN0KGlkeCwgbGFzdCwg
        Y29udGV4dCk7CiAgICAgIGZvdW5kID0gY2FsbGJhY2suY2FsbCh0YXJnZXQs
        IG5leHQsIGlkeCwgdGhpcyk7CiAgICAgIGxhc3QgID0gbmV4dDsKICAgIH0K
        CiAgICBuZXh0ID0gbGFzdCA9IG51bGw7CiAgICBjb250ZXh0ID0gcHVzaEN0
        eChjb250ZXh0KTsKICAgIHJldHVybiBmb3VuZDsKICB9LAoKICAvKioKICAg
        IFJldHVybnMgYHRydWVgIGlmIHRoZSBwYXNzZWQgZnVuY3Rpb24gcmV0dXJu
        cyB0cnVlIGZvciBhbnkgaXRlbSBpbiB0aGUKICAgIGVudW1lcmF0aW9uLiBU
        aGlzIGNvcnJlc3BvbmRzIHdpdGggdGhlIGBzb21lKClgIG1ldGhvZCBpbiBK
        YXZhU2NyaXB0IDEuNi4KCiAgICBUaGUgY2FsbGJhY2sgbWV0aG9kIHlvdSBw
        cm92aWRlIHNob3VsZCBoYXZlIHRoZSBmb2xsb3dpbmcgc2lnbmF0dXJlIChh
        bGwKICAgIHBhcmFtZXRlcnMgYXJlIG9wdGlvbmFsKToKCiAgICBgYGBqYXZh
        c2NyaXB0CiAgICBmdW5jdGlvbihpdGVtLCBpbmRleCwgZW51bWVyYWJsZSk7
        CiAgICBgYGAKCiAgICAtIGBpdGVtYCBpcyB0aGUgY3VycmVudCBpdGVtIGlu
        IHRoZSBpdGVyYXRpb24uCiAgICAtIGBpbmRleGAgaXMgdGhlIGN1cnJlbnQg
        aW5kZXggaW4gdGhlIGl0ZXJhdGlvbi4KICAgIC0gYGVudW1lcmFibGVgIGlz
        IHRoZSBlbnVtZXJhYmxlIG9iamVjdCBpdHNlbGYuCgogICAgSXQgc2hvdWxk
        IHJldHVybiB0aGUgYHRydWVgIHRvIGluY2x1ZGUgdGhlIGl0ZW0gaW4gdGhl
        IHJlc3VsdHMsIGBmYWxzZWAKICAgIG90aGVyd2lzZS4KCiAgICBOb3RlIHRo
        YXQgaW4gYWRkaXRpb24gdG8gYSBjYWxsYmFjaywgeW91IGNhbiBhbHNvIHBh
        c3MgYW4gb3B0aW9uYWwgdGFyZ2V0CiAgICBvYmplY3QgdGhhdCB3aWxsIGJl
        IHNldCBhcyBgdGhpc2Agb24gdGhlIGNvbnRleHQuIFRoaXMgaXMgYSBnb29k
        IHdheQogICAgdG8gZ2l2ZSB5b3VyIGl0ZXJhdG9yIGZ1bmN0aW9uIGFjY2Vz
        cyB0byB0aGUgY3VycmVudCBvYmplY3QuCgogICAgVXNhZ2UgRXhhbXBsZToK
        CiAgICBgYGBqYXZhc2NyaXB0CiAgICBpZiAocGVvcGxlLnNvbWUoaXNNYW5h
        Z2VyKSkgeyBQYXljaGVja3MuYWRkQmlnZ2VyQm9udXMoKTsgfQogICAgYGBg
        CgogICAgQG1ldGhvZCBzb21lCiAgICBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxs
        YmFjayBUaGUgY2FsbGJhY2sgdG8gZXhlY3V0ZQogICAgQHBhcmFtIHtPYmpl
        Y3R9IFt0YXJnZXRdIFRoZSB0YXJnZXQgb2JqZWN0IHRvIHVzZQogICAgQHJl
        dHVybiB7Qm9vbGVhbn0gYHRydWVgIGlmIHRoZSBwYXNzZWQgZnVuY3Rpb24g
        cmV0dXJucyBgdHJ1ZWAgZm9yIGFueSBpdGVtCiAgICBAZGVwcmVjYXRlZCBV
        c2UgYGFueWAgaW5zdGVhZAogICovCiAgc29tZTogRW1iZXIuYWxpYXNNZXRo
        b2QoJ2FueScpLAoKICAvKioKICAgIFJldHVybnMgYHRydWVgIGlmIHRoZSBw
        YXNzZWQgcHJvcGVydHkgcmVzb2x2ZXMgdG8gYHRydWVgIGZvciBhbnkgaXRl
        bSBpbgogICAgdGhlIGVudW1lcmFibGUuIFRoaXMgbWV0aG9kIGlzIG9mdGVu
        IHNpbXBsZXIvZmFzdGVyIHRoYW4gdXNpbmcgYSBjYWxsYmFjay4KCiAgICBA
        bWV0aG9kIGlzQW55CiAgICBAcGFyYW0ge1N0cmluZ30ga2V5IHRoZSBwcm9w
        ZXJ0eSB0byB0ZXN0CiAgICBAcGFyYW0ge1N0cmluZ30gW3ZhbHVlXSBvcHRp
        b25hbCB2YWx1ZSB0byB0ZXN0IGFnYWluc3QuCiAgICBAcmV0dXJuIHtCb29s
        ZWFufSBgdHJ1ZWAgaWYgdGhlIHBhc3NlZCBmdW5jdGlvbiByZXR1cm5zIGB0
        cnVlYCBmb3IgYW55IGl0ZW0KICAqLwogIGlzQW55OiBmdW5jdGlvbihrZXks
        IHZhbHVlKSB7CiAgICByZXR1cm4gdGhpcy5hbnkoaXRlci5hcHBseSh0aGlz
        LCBhcmd1bWVudHMpKTsKICB9LAoKICAvKioKICAgIEBtZXRob2QgYW55QnkK
        ICAgIEBwYXJhbSB7U3RyaW5nfSBrZXkgdGhlIHByb3BlcnR5IHRvIHRlc3QK
        ICAgIEBwYXJhbSB7U3RyaW5nfSBbdmFsdWVdIG9wdGlvbmFsIHZhbHVlIHRv
        IHRlc3QgYWdhaW5zdC4KICAgIEByZXR1cm4ge0Jvb2xlYW59IGB0cnVlYCBp
        ZiB0aGUgcGFzc2VkIGZ1bmN0aW9uIHJldHVybnMgYHRydWVgIGZvciBhbnkg
        aXRlbQogICAgQGRlcHJlY2F0ZWQgVXNlIGBpc0FueWAgaW5zdGVhZAogICov
        CiAgYW55Qnk6IEVtYmVyLmFsaWFzTWV0aG9kKCdpc0FueScpLAoKICAvKioK
        ICAgIEBtZXRob2Qgc29tZVByb3BlcnR5CiAgICBAcGFyYW0ge1N0cmluZ30g
        a2V5IHRoZSBwcm9wZXJ0eSB0byB0ZXN0CiAgICBAcGFyYW0ge1N0cmluZ30g
        W3ZhbHVlXSBvcHRpb25hbCB2YWx1ZSB0byB0ZXN0IGFnYWluc3QuCiAgICBA
        cmV0dXJuIHtCb29sZWFufSBgdHJ1ZWAgaWYgdGhlIHBhc3NlZCBmdW5jdGlv
        biByZXR1cm5zIGB0cnVlYCBmb3IgYW55IGl0ZW0KICAgIEBkZXByZWNhdGVk
        IFVzZSBgaXNBbnlgIGluc3RlYWQKICAqLwogIHNvbWVQcm9wZXJ0eTogRW1i
        ZXIuYWxpYXNNZXRob2QoJ2lzQW55JyksCgogIC8qKgogICAgVGhpcyB3aWxs
        IGNvbWJpbmUgdGhlIHZhbHVlcyBvZiB0aGUgZW51bWVyYXRvciBpbnRvIGEg
        c2luZ2xlIHZhbHVlLiBJdAogICAgaXMgYSB1c2VmdWwgd2F5IHRvIGNvbGxl
        Y3QgYSBzdW1tYXJ5IHZhbHVlIGZyb20gYW4gZW51bWVyYXRpb24uIFRoaXMK
        ICAgIGNvcnJlc3BvbmRzIHRvIHRoZSBgcmVkdWNlKClgIG1ldGhvZCBkZWZp
        bmVkIGluIEphdmFTY3JpcHQgMS44LgoKICAgIFRoZSBjYWxsYmFjayBtZXRo
        b2QgeW91IHByb3ZpZGUgc2hvdWxkIGhhdmUgdGhlIGZvbGxvd2luZyBzaWdu
        YXR1cmUgKGFsbAogICAgcGFyYW1ldGVycyBhcmUgb3B0aW9uYWwpOgoKICAg
        IGBgYGphdmFzY3JpcHQKICAgIGZ1bmN0aW9uKHByZXZpb3VzVmFsdWUsIGl0
        ZW0sIGluZGV4LCBlbnVtZXJhYmxlKTsKICAgIGBgYAoKICAgIC0gYHByZXZp
        b3VzVmFsdWVgIGlzIHRoZSB2YWx1ZSByZXR1cm5lZCBieSB0aGUgbGFzdCBj
        YWxsIHRvIHRoZSBpdGVyYXRvci4KICAgIC0gYGl0ZW1gIGlzIHRoZSBjdXJy
        ZW50IGl0ZW0gaW4gdGhlIGl0ZXJhdGlvbi4KICAgIC0gYGluZGV4YCBpcyB0
        aGUgY3VycmVudCBpbmRleCBpbiB0aGUgaXRlcmF0aW9uLgogICAgLSBgZW51
        bWVyYWJsZWAgaXMgdGhlIGVudW1lcmFibGUgb2JqZWN0IGl0c2VsZi4KCiAg
        ICBSZXR1cm4gdGhlIG5ldyBjdW11bGF0aXZlIHZhbHVlLgoKICAgIEluIGFk
        ZGl0aW9uIHRvIHRoZSBjYWxsYmFjayB5b3UgY2FuIGFsc28gcGFzcyBhbiBg
        aW5pdGlhbFZhbHVlYC4gQW4gZXJyb3IKICAgIHdpbGwgYmUgcmFpc2VkIGlm
        IHlvdSBkbyBub3QgcGFzcyBhbiBpbml0aWFsIHZhbHVlIGFuZCB0aGUgZW51
        bWVyYXRvciBpcwogICAgZW1wdHkuCgogICAgTm90ZSB0aGF0IHVubGlrZSB0
        aGUgb3RoZXIgbWV0aG9kcywgdGhpcyBtZXRob2QgZG9lcyBub3QgYWxsb3cg
        eW91IHRvCiAgICBwYXNzIGEgdGFyZ2V0IG9iamVjdCB0byBzZXQgYXMgdGhp
        cyBmb3IgdGhlIGNhbGxiYWNrLiBJdCdzIHBhcnQgb2YgdGhlCiAgICBzcGVj
        LiBTb3JyeS4KCiAgICBAbWV0aG9kIHJlZHVjZQogICAgQHBhcmFtIHtGdW5j
        dGlvbn0gY2FsbGJhY2sgVGhlIGNhbGxiYWNrIHRvIGV4ZWN1dGUKICAgIEBw
        YXJhbSB7T2JqZWN0fSBpbml0aWFsVmFsdWUgSW5pdGlhbCB2YWx1ZSBmb3Ig
        dGhlIHJlZHVjZQogICAgQHBhcmFtIHtTdHJpbmd9IHJlZHVjZXJQcm9wZXJ0
        eSBpbnRlcm5hbCB1c2Ugb25seS4KICAgIEByZXR1cm4ge09iamVjdH0gVGhl
        IHJlZHVjZWQgdmFsdWUuCiAgKi8KICByZWR1Y2U6IGZ1bmN0aW9uKGNhbGxi
        YWNrLCBpbml0aWFsVmFsdWUsIHJlZHVjZXJQcm9wZXJ0eSkgewogICAgaWYg
        KHR5cGVvZiBjYWxsYmFjayAhPT0gImZ1bmN0aW9uIikgeyB0aHJvdyBuZXcg
        VHlwZUVycm9yKCk7IH0KCiAgICB2YXIgcmV0ID0gaW5pdGlhbFZhbHVlOwoK
        ICAgIHRoaXMuZm9yRWFjaChmdW5jdGlvbihpdGVtLCBpKSB7CiAgICAgIHJl
        dCA9IGNhbGxiYWNrKHJldCwgaXRlbSwgaSwgdGhpcywgcmVkdWNlclByb3Bl
        cnR5KTsKICAgIH0sIHRoaXMpOwoKICAgIHJldHVybiByZXQ7CiAgfSwKCiAg
        LyoqCiAgICBJbnZva2VzIHRoZSBuYW1lZCBtZXRob2Qgb24gZXZlcnkgb2Jq
        ZWN0IGluIHRoZSByZWNlaXZlciB0aGF0CiAgICBpbXBsZW1lbnRzIGl0LiBU
        aGlzIG1ldGhvZCBjb3JyZXNwb25kcyB0byB0aGUgaW1wbGVtZW50YXRpb24g
        aW4KICAgIFByb3RvdHlwZSAxLjYuCgogICAgQG1ldGhvZCBpbnZva2UKICAg
        IEBwYXJhbSB7U3RyaW5nfSBtZXRob2ROYW1lIHRoZSBuYW1lIG9mIHRoZSBt
        ZXRob2QKICAgIEBwYXJhbSB7T2JqZWN0Li4ufSBhcmdzIG9wdGlvbmFsIGFy
        Z3VtZW50cyB0byBwYXNzIGFzIHdlbGwuCiAgICBAcmV0dXJuIHtBcnJheX0g
        cmV0dXJuIHZhbHVlcyBmcm9tIGNhbGxpbmcgaW52b2tlLgogICovCiAgaW52
        b2tlOiBmdW5jdGlvbihtZXRob2ROYW1lKSB7CiAgICB2YXIgYXJncywgcmV0
        ID0gRW1iZXIuQSgpOwogICAgaWYgKGFyZ3VtZW50cy5sZW5ndGg+MSkgYXJn
        cyA9IGFfc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpOwoKICAgIHRoaXMuZm9y
        RWFjaChmdW5jdGlvbih4LCBpZHgpIHsKICAgICAgdmFyIG1ldGhvZCA9IHgg
        JiYgeFttZXRob2ROYW1lXTsKICAgICAgaWYgKCdmdW5jdGlvbicgPT09IHR5
        cGVvZiBtZXRob2QpIHsKICAgICAgICByZXRbaWR4XSA9IGFyZ3MgPyBtZXRo
        b2QuYXBwbHkoeCwgYXJncykgOiB4W21ldGhvZE5hbWVdKCk7CiAgICAgIH0K
        ICAgIH0sIHRoaXMpOwoKICAgIHJldHVybiByZXQ7CiAgfSwKCiAgLyoqCiAg
        ICBTaW1wbHkgY29udmVydHMgdGhlIGVudW1lcmFibGUgaW50byBhIGdlbnVp
        bmUgYXJyYXkuIFRoZSBvcmRlciBpcyBub3QKICAgIGd1YXJhbnRlZWQuIENv
        cnJlc3BvbmRzIHRvIHRoZSBtZXRob2QgaW1wbGVtZW50ZWQgYnkgUHJvdG90
        eXBlLgoKICAgIEBtZXRob2QgdG9BcnJheQogICAgQHJldHVybiB7QXJyYXl9
        IHRoZSBlbnVtZXJhYmxlIGFzIGFuIGFycmF5LgogICovCiAgdG9BcnJheTog
        ZnVuY3Rpb24oKSB7CiAgICB2YXIgcmV0ID0gRW1iZXIuQSgpOwogICAgdGhp
        cy5mb3JFYWNoKGZ1bmN0aW9uKG8sIGlkeCkgeyByZXRbaWR4XSA9IG87IH0p
        OwogICAgcmV0dXJuIHJldCA7CiAgfSwKCiAgLyoqCiAgICBSZXR1cm5zIGEg
        Y29weSBvZiB0aGUgYXJyYXkgd2l0aCBhbGwgbnVsbCBhbmQgdW5kZWZpbmVk
        IGVsZW1lbnRzIHJlbW92ZWQuCgogICAgYGBgamF2YXNjcmlwdAogICAgdmFy
        IGFyciA9IFsiYSIsIG51bGwsICJjIiwgdW5kZWZpbmVkXTsKICAgIGFyci5j
        b21wYWN0KCk7ICAvLyBbImEiLCAiYyJdCiAgICBgYGAKCiAgICBAbWV0aG9k
        IGNvbXBhY3QKICAgIEByZXR1cm4ge0FycmF5fSB0aGUgYXJyYXkgd2l0aG91
        dCBudWxsIGFuZCB1bmRlZmluZWQgZWxlbWVudHMuCiAgKi8KICBjb21wYWN0
        OiBmdW5jdGlvbigpIHsKICAgIHJldHVybiB0aGlzLmZpbHRlcihmdW5jdGlv
        bih2YWx1ZSkgeyByZXR1cm4gdmFsdWUgIT0gbnVsbDsgfSk7CiAgfSwKCiAg
        LyoqCiAgICBSZXR1cm5zIGEgbmV3IGVudW1lcmFibGUgdGhhdCBleGNsdWRl
        cyB0aGUgcGFzc2VkIHZhbHVlLiBUaGUgZGVmYXVsdAogICAgaW1wbGVtZW50
        YXRpb24gcmV0dXJucyBhbiBhcnJheSByZWdhcmRsZXNzIG9mIHRoZSByZWNl
        aXZlciB0eXBlIHVubGVzcwogICAgdGhlIHJlY2VpdmVyIGRvZXMgbm90IGNv
        bnRhaW4gdGhlIHZhbHVlLgoKICAgIGBgYGphdmFzY3JpcHQKICAgIHZhciBh
        cnIgPSBbImEiLCAiYiIsICJhIiwgImMiXTsKICAgIGFyci53aXRob3V0KCJh
        Iik7ICAvLyBbImIiLCAiYyJdCiAgICBgYGAKCiAgICBAbWV0aG9kIHdpdGhv
        dXQKICAgIEBwYXJhbSB7T2JqZWN0fSB2YWx1ZQogICAgQHJldHVybiB7RW1i
        ZXIuRW51bWVyYWJsZX0KICAqLwogIHdpdGhvdXQ6IGZ1bmN0aW9uKHZhbHVl
        KSB7CiAgICBpZiAoIXRoaXMuY29udGFpbnModmFsdWUpKSByZXR1cm4gdGhp
        czsgLy8gbm90aGluZyB0byBkbwogICAgdmFyIHJldCA9IEVtYmVyLkEoKTsK
        ICAgIHRoaXMuZm9yRWFjaChmdW5jdGlvbihrKSB7CiAgICAgIGlmIChrICE9
        PSB2YWx1ZSkgcmV0W3JldC5sZW5ndGhdID0gazsKICAgIH0pIDsKICAgIHJl
        dHVybiByZXQgOwogIH0sCgogIC8qKgogICAgUmV0dXJucyBhIG5ldyBlbnVt
        ZXJhYmxlIHRoYXQgY29udGFpbnMgb25seSB1bmlxdWUgdmFsdWVzLiBUaGUg
        ZGVmYXVsdAogICAgaW1wbGVtZW50YXRpb24gcmV0dXJucyBhbiBhcnJheSBy
        ZWdhcmRsZXNzIG9mIHRoZSByZWNlaXZlciB0eXBlLgoKICAgIGBgYGphdmFz
        Y3JpcHQKICAgIHZhciBhcnIgPSBbImEiLCAiYSIsICJiIiwgImIiXTsKICAg
        IGFyci51bmlxKCk7ICAvLyBbImEiLCAiYiJdCiAgICBgYGAKCiAgICBAbWV0
        aG9kIHVuaXEKICAgIEByZXR1cm4ge0VtYmVyLkVudW1lcmFibGV9CiAgKi8K
        ICB1bmlxOiBmdW5jdGlvbigpIHsKICAgIHZhciByZXQgPSBFbWJlci5BKCk7
        CiAgICB0aGlzLmZvckVhY2goZnVuY3Rpb24oaykgewogICAgICBpZiAoYV9p
        bmRleE9mKHJldCwgayk8MCkgcmV0LnB1c2goayk7CiAgICB9KTsKICAgIHJl
        dHVybiByZXQ7CiAgfSwKCiAgLyoqCiAgICBUaGlzIHByb3BlcnR5IHdpbGwg
        dHJpZ2dlciBhbnl0aW1lIHRoZSBlbnVtZXJhYmxlJ3MgY29udGVudCBjaGFu
        Z2VzLgogICAgWW91IGNhbiBvYnNlcnZlIHRoaXMgcHJvcGVydHkgdG8gYmUg
        bm90aWZpZWQgb2YgY2hhbmdlcyB0byB0aGUgZW51bWVyYWJsZXMKICAgIGNv
        bnRlbnQuCgogICAgRm9yIHBsYWluIGVudW1lcmFibGVzLCB0aGlzIHByb3Bl
        cnR5IGlzIHJlYWQgb25seS4gYEVtYmVyLkFycmF5YCBvdmVycmlkZXMKICAg
        IHRoaXMgbWV0aG9kLgoKICAgIEBwcm9wZXJ0eSBbXQogICAgQHR5cGUgRW1i
        ZXIuQXJyYXkKICAgIEByZXR1cm4gdGhpcwogICovCiAgJ1tdJzogRW1iZXIu
        Y29tcHV0ZWQoZnVuY3Rpb24oa2V5LCB2YWx1ZSkgewogICAgcmV0dXJuIHRo
        aXM7CiAgfSksCgogIC8vIC4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4u
        Li4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4KICAvLyBFTlVNRVJBQkxF
        IE9CU0VSVkVSUwogIC8vCgogIC8qKgogICAgUmVnaXN0ZXJzIGFuIGVudW1l
        cmFibGUgb2JzZXJ2ZXIuIE11c3QgaW1wbGVtZW50IGBFbWJlci5FbnVtZXJh
        YmxlT2JzZXJ2ZXJgCiAgICBtaXhpbi4KCiAgICBAbWV0aG9kIGFkZEVudW1l
        cmFibGVPYnNlcnZlcgogICAgQHBhcmFtIHtPYmplY3R9IHRhcmdldAogICAg
        QHBhcmFtIHtIYXNofSBbb3B0c10KICAgIEByZXR1cm4gdGhpcwogICovCiAg
        YWRkRW51bWVyYWJsZU9ic2VydmVyOiBmdW5jdGlvbih0YXJnZXQsIG9wdHMp
        IHsKICAgIHZhciB3aWxsQ2hhbmdlID0gKG9wdHMgJiYgb3B0cy53aWxsQ2hh
        bmdlKSB8fCAnZW51bWVyYWJsZVdpbGxDaGFuZ2UnLAogICAgICAgIGRpZENo
        YW5nZSAgPSAob3B0cyAmJiBvcHRzLmRpZENoYW5nZSkgfHwgJ2VudW1lcmFi
        bGVEaWRDaGFuZ2UnOwoKICAgIHZhciBoYXNPYnNlcnZlcnMgPSBnZXQodGhp
        cywgJ2hhc0VudW1lcmFibGVPYnNlcnZlcnMnKTsKICAgIGlmICghaGFzT2Jz
        ZXJ2ZXJzKSBFbWJlci5wcm9wZXJ0eVdpbGxDaGFuZ2UodGhpcywgJ2hhc0Vu
        dW1lcmFibGVPYnNlcnZlcnMnKTsKICAgIEVtYmVyLmFkZExpc3RlbmVyKHRo
        aXMsICdAZW51bWVyYWJsZTpiZWZvcmUnLCB0YXJnZXQsIHdpbGxDaGFuZ2Up
        OwogICAgRW1iZXIuYWRkTGlzdGVuZXIodGhpcywgJ0BlbnVtZXJhYmxlOmNo
        YW5nZScsIHRhcmdldCwgZGlkQ2hhbmdlKTsKICAgIGlmICghaGFzT2JzZXJ2
        ZXJzKSBFbWJlci5wcm9wZXJ0eURpZENoYW5nZSh0aGlzLCAnaGFzRW51bWVy
        YWJsZU9ic2VydmVycycpOwogICAgcmV0dXJuIHRoaXM7CiAgfSwKCiAgLyoq
        CiAgICBSZW1vdmVzIGEgcmVnaXN0ZXJlZCBlbnVtZXJhYmxlIG9ic2VydmVy
        LgoKICAgIEBtZXRob2QgcmVtb3ZlRW51bWVyYWJsZU9ic2VydmVyCiAgICBA
        cGFyYW0ge09iamVjdH0gdGFyZ2V0CiAgICBAcGFyYW0ge0hhc2h9IFtvcHRz
        XQogICAgQHJldHVybiB0aGlzCiAgKi8KICByZW1vdmVFbnVtZXJhYmxlT2Jz
        ZXJ2ZXI6IGZ1bmN0aW9uKHRhcmdldCwgb3B0cykgewogICAgdmFyIHdpbGxD
        aGFuZ2UgPSAob3B0cyAmJiBvcHRzLndpbGxDaGFuZ2UpIHx8ICdlbnVtZXJh
        YmxlV2lsbENoYW5nZScsCiAgICAgICAgZGlkQ2hhbmdlICA9IChvcHRzICYm
        IG9wdHMuZGlkQ2hhbmdlKSB8fCAnZW51bWVyYWJsZURpZENoYW5nZSc7Cgog
        ICAgdmFyIGhhc09ic2VydmVycyA9IGdldCh0aGlzLCAnaGFzRW51bWVyYWJs
        ZU9ic2VydmVycycpOwogICAgaWYgKGhhc09ic2VydmVycykgRW1iZXIucHJv
        cGVydHlXaWxsQ2hhbmdlKHRoaXMsICdoYXNFbnVtZXJhYmxlT2JzZXJ2ZXJz
        Jyk7CiAgICBFbWJlci5yZW1vdmVMaXN0ZW5lcih0aGlzLCAnQGVudW1lcmFi
        bGU6YmVmb3JlJywgdGFyZ2V0LCB3aWxsQ2hhbmdlKTsKICAgIEVtYmVyLnJl
        bW92ZUxpc3RlbmVyKHRoaXMsICdAZW51bWVyYWJsZTpjaGFuZ2UnLCB0YXJn
        ZXQsIGRpZENoYW5nZSk7CiAgICBpZiAoaGFzT2JzZXJ2ZXJzKSBFbWJlci5w
        cm9wZXJ0eURpZENoYW5nZSh0aGlzLCAnaGFzRW51bWVyYWJsZU9ic2VydmVy
        cycpOwogICAgcmV0dXJuIHRoaXM7CiAgfSwKCiAgLyoqCiAgICBCZWNvbWVz
        IHRydWUgd2hlbmV2ZXIgdGhlIGFycmF5IGN1cnJlbnRseSBoYXMgb2JzZXJ2
        ZXJzIHdhdGNoaW5nIGNoYW5nZXMKICAgIG9uIHRoZSBhcnJheS4KCiAgICBA
        cHJvcGVydHkgaGFzRW51bWVyYWJsZU9ic2VydmVycwogICAgQHR5cGUgQm9v
        bGVhbgogICovCiAgaGFzRW51bWVyYWJsZU9ic2VydmVyczogRW1iZXIuY29t
        cHV0ZWQoZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gRW1iZXIuaGFzTGlzdGVu
        ZXJzKHRoaXMsICdAZW51bWVyYWJsZTpjaGFuZ2UnKSB8fCBFbWJlci5oYXNM
        aXN0ZW5lcnModGhpcywgJ0BlbnVtZXJhYmxlOmJlZm9yZScpOwogIH0pLAoK
        CiAgLyoqCiAgICBJbnZva2UgdGhpcyBtZXRob2QganVzdCBiZWZvcmUgdGhl
        IGNvbnRlbnRzIG9mIHlvdXIgZW51bWVyYWJsZSB3aWxsCiAgICBjaGFuZ2Uu
        IFlvdSBjYW4gZWl0aGVyIG9taXQgdGhlIHBhcmFtZXRlcnMgY29tcGxldGVs
        eSBvciBwYXNzIHRoZSBvYmplY3RzCiAgICB0byBiZSByZW1vdmVkIG9yIGFk
        ZGVkIGlmIGF2YWlsYWJsZSBvciBqdXN0IGEgY291bnQuCgogICAgQG1ldGhv
        ZCBlbnVtZXJhYmxlQ29udGVudFdpbGxDaGFuZ2UKICAgIEBwYXJhbSB7RW1i
        ZXIuRW51bWVyYWJsZXxOdW1iZXJ9IHJlbW92aW5nIEFuIGVudW1lcmFibGUg
        b2YgdGhlIG9iamVjdHMgdG8KICAgICAgYmUgcmVtb3ZlZCBvciB0aGUgbnVt
        YmVyIG9mIGl0ZW1zIHRvIGJlIHJlbW92ZWQuCiAgICBAcGFyYW0ge0VtYmVy
        LkVudW1lcmFibGV8TnVtYmVyfSBhZGRpbmcgQW4gZW51bWVyYWJsZSBvZiB0
        aGUgb2JqZWN0cyB0byBiZQogICAgICBhZGRlZCBvciB0aGUgbnVtYmVyIG9m
        IGl0ZW1zIHRvIGJlIGFkZGVkLgogICAgQGNoYWluYWJsZQogICovCiAgZW51
        bWVyYWJsZUNvbnRlbnRXaWxsQ2hhbmdlOiBmdW5jdGlvbihyZW1vdmluZywg
        YWRkaW5nKSB7CgogICAgdmFyIHJlbW92ZUNudCwgYWRkQ250LCBoYXNEZWx0
        YTsKCiAgICBpZiAoJ251bWJlcicgPT09IHR5cGVvZiByZW1vdmluZykgcmVt
        b3ZlQ250ID0gcmVtb3Zpbmc7CiAgICBlbHNlIGlmIChyZW1vdmluZykgcmVt
        b3ZlQ250ID0gZ2V0KHJlbW92aW5nLCAnbGVuZ3RoJyk7CiAgICBlbHNlIHJl
        bW92ZUNudCA9IHJlbW92aW5nID0gLTE7CgogICAgaWYgKCdudW1iZXInID09
        PSB0eXBlb2YgYWRkaW5nKSBhZGRDbnQgPSBhZGRpbmc7CiAgICBlbHNlIGlm
        IChhZGRpbmcpIGFkZENudCA9IGdldChhZGRpbmcsJ2xlbmd0aCcpOwogICAg
        ZWxzZSBhZGRDbnQgPSBhZGRpbmcgPSAtMTsKCiAgICBoYXNEZWx0YSA9IGFk
        ZENudDwwIHx8IHJlbW92ZUNudDwwIHx8IGFkZENudC1yZW1vdmVDbnQhPT0w
        OwoKICAgIGlmIChyZW1vdmluZyA9PT0gLTEpIHJlbW92aW5nID0gbnVsbDsK
        ICAgIGlmIChhZGRpbmcgICA9PT0gLTEpIGFkZGluZyAgID0gbnVsbDsKCiAg
        ICBFbWJlci5wcm9wZXJ0eVdpbGxDaGFuZ2UodGhpcywgJ1tdJyk7CiAgICBp
        ZiAoaGFzRGVsdGEpIEVtYmVyLnByb3BlcnR5V2lsbENoYW5nZSh0aGlzLCAn
        bGVuZ3RoJyk7CiAgICBFbWJlci5zZW5kRXZlbnQodGhpcywgJ0BlbnVtZXJh
        YmxlOmJlZm9yZScsIFt0aGlzLCByZW1vdmluZywgYWRkaW5nXSk7CgogICAg
        cmV0dXJuIHRoaXM7CiAgfSwKCiAgLyoqCiAgICBJbnZva2UgdGhpcyBtZXRo
        b2Qgd2hlbiB0aGUgY29udGVudHMgb2YgeW91ciBlbnVtZXJhYmxlIGhhcyBj
        aGFuZ2VkLgogICAgVGhpcyB3aWxsIG5vdGlmeSBhbnkgb2JzZXJ2ZXJzIHdh
        dGNoaW5nIGZvciBjb250ZW50IGNoYW5nZXMuIElmIHlvdXIgYXJlCiAgICBp
        bXBsZW1lbnRpbmcgYW4gb3JkZXJlZCBlbnVtZXJhYmxlIChzdWNoIGFzIGFu
        IGFycmF5KSwgYWxzbyBwYXNzIHRoZQogICAgc3RhcnQgYW5kIGVuZCB2YWx1
        ZXMgd2hlcmUgdGhlIGNvbnRlbnQgY2hhbmdlZCBzbyB0aGF0IGl0IGNhbiBi
        ZSB1c2VkIHRvCiAgICBub3RpZnkgcmFuZ2Ugb2JzZXJ2ZXJzLgoKICAgIEBt
        ZXRob2QgZW51bWVyYWJsZUNvbnRlbnREaWRDaGFuZ2UKICAgIEBwYXJhbSB7
        RW1iZXIuRW51bWVyYWJsZXxOdW1iZXJ9IHJlbW92aW5nIEFuIGVudW1lcmFi
        bGUgb2YgdGhlIG9iamVjdHMgdG8KICAgICAgYmUgcmVtb3ZlZCBvciB0aGUg
        bnVtYmVyIG9mIGl0ZW1zIHRvIGJlIHJlbW92ZWQuCiAgICBAcGFyYW0ge0Vt
        YmVyLkVudW1lcmFibGV8TnVtYmVyfSBhZGRpbmcgIEFuIGVudW1lcmFibGUg
        b2YgdGhlIG9iamVjdHMgdG8KICAgICAgYmUgYWRkZWQgb3IgdGhlIG51bWJl
        ciBvZiBpdGVtcyB0byBiZSBhZGRlZC4KICAgIEBjaGFpbmFibGUKICAqLwog
        IGVudW1lcmFibGVDb250ZW50RGlkQ2hhbmdlOiBmdW5jdGlvbihyZW1vdmlu
        ZywgYWRkaW5nKSB7CiAgICB2YXIgcmVtb3ZlQ250LCBhZGRDbnQsIGhhc0Rl
        bHRhOwoKICAgIGlmICgnbnVtYmVyJyA9PT0gdHlwZW9mIHJlbW92aW5nKSBy
        ZW1vdmVDbnQgPSByZW1vdmluZzsKICAgIGVsc2UgaWYgKHJlbW92aW5nKSBy
        ZW1vdmVDbnQgPSBnZXQocmVtb3ZpbmcsICdsZW5ndGgnKTsKICAgIGVsc2Ug
        cmVtb3ZlQ250ID0gcmVtb3ZpbmcgPSAtMTsKCiAgICBpZiAoJ251bWJlcicg
        PT09IHR5cGVvZiBhZGRpbmcpIGFkZENudCA9IGFkZGluZzsKICAgIGVsc2Ug
        aWYgKGFkZGluZykgYWRkQ250ID0gZ2V0KGFkZGluZywgJ2xlbmd0aCcpOwog
        ICAgZWxzZSBhZGRDbnQgPSBhZGRpbmcgPSAtMTsKCiAgICBoYXNEZWx0YSA9
        IGFkZENudDwwIHx8IHJlbW92ZUNudDwwIHx8IGFkZENudC1yZW1vdmVDbnQh
        PT0wOwoKICAgIGlmIChyZW1vdmluZyA9PT0gLTEpIHJlbW92aW5nID0gbnVs
        bDsKICAgIGlmIChhZGRpbmcgICA9PT0gLTEpIGFkZGluZyAgID0gbnVsbDsK
        CiAgICBFbWJlci5zZW5kRXZlbnQodGhpcywgJ0BlbnVtZXJhYmxlOmNoYW5n
        ZScsIFt0aGlzLCByZW1vdmluZywgYWRkaW5nXSk7CiAgICBpZiAoaGFzRGVs
        dGEpIEVtYmVyLnByb3BlcnR5RGlkQ2hhbmdlKHRoaXMsICdsZW5ndGgnKTsK
        ICAgIEVtYmVyLnByb3BlcnR5RGlkQ2hhbmdlKHRoaXMsICdbXScpOwoKICAg
        IHJldHVybiB0aGlzIDsKICB9LAoKICAvKioKICAgIENvbnZlcnRzIHRoZSBl
        bnVtZXJhYmxlIGludG8gYW4gYXJyYXkgYW5kIHNvcnRzIGJ5IHRoZSBrZXlz
        CiAgICBzcGVjaWZpZWQgaW4gdGhlIGFyZ3VtZW50LgoKICAgIFlvdSBtYXkg
        cHJvdmlkZSBtdWx0aXBsZSBhcmd1bWVudHMgdG8gc29ydCBieSBtdWx0aXBs
        ZSBwcm9wZXJ0aWVzLgoKICAgIEBtZXRob2Qgc29ydEJ5CiAgICBAcGFyYW0g
        e1N0cmluZ30gcHJvcGVydHkgbmFtZShzKSB0byBzb3J0IG9uCiAgICBAcmV0
        dXJuIHtBcnJheX0gVGhlIHNvcnRlZCBhcnJheS4KICAgICovCiAgc29ydEJ5
        OiBmdW5jdGlvbigpIHsKICAgIHZhciBzb3J0S2V5cyA9IGFyZ3VtZW50czsK
        ICAgIHJldHVybiB0aGlzLnRvQXJyYXkoKS5zb3J0KGZ1bmN0aW9uKGEsIGIp
        ewogICAgICBmb3IodmFyIGkgPSAwOyBpIDwgc29ydEtleXMubGVuZ3RoOyBp
        KyspIHsKICAgICAgICB2YXIga2V5ID0gc29ydEtleXNbaV0sCiAgICAgICAg
        cHJvcEEgPSBnZXQoYSwga2V5KSwKICAgICAgICBwcm9wQiA9IGdldChiLCBr
        ZXkpOwogICAgICAgIC8vIHJldHVybiAxIG9yIC0xIGVsc2UgY29udGludWUg
        dG8gdGhlIG5leHQgc29ydEtleQogICAgICAgIHZhciBjb21wYXJlVmFsdWUg
        PSBFbWJlci5jb21wYXJlKHByb3BBLCBwcm9wQik7CiAgICAgICAgaWYgKGNv
        bXBhcmVWYWx1ZSkgeyByZXR1cm4gY29tcGFyZVZhbHVlOyB9CiAgICAgIH0K
        ICAgICAgcmV0dXJuIDA7CiAgICB9KTsKICB9Cn0pOwoKfSkoKTsKCgoKKGZ1
        bmN0aW9uKCkgewovKioKQG1vZHVsZSBlbWJlcgpAc3VibW9kdWxlIGVtYmVy
        LXJ1bnRpbWUKKi8KCi8vIC4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4u
        Li4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4KLy8gSEVMUEVSUwovLwoK
        dmFyIGdldCA9IEVtYmVyLmdldCwgc2V0ID0gRW1iZXIuc2V0LCBpc05vbmUg
        PSBFbWJlci5pc05vbmUsIG1hcCA9IEVtYmVyLkVudW1lcmFibGVVdGlscy5t
        YXAsIGNhY2hlRm9yID0gRW1iZXIuY2FjaGVGb3I7CgovLyAuLi4uLi4uLi4u
        Li4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4u
        Li4uCi8vIEFSUkFZCi8vCi8qKgogIFRoaXMgbW9kdWxlIGltcGxlbWVudHMg
        T2JzZXJ2ZXItZnJpZW5kbHkgQXJyYXktbGlrZSBiZWhhdmlvci4gVGhpcyBt
        aXhpbiBpcwogIHBpY2tlZCB1cCBieSB0aGUgQXJyYXkgY2xhc3MgYXMgd2Vs
        bCBhcyBvdGhlciBjb250cm9sbGVycywgZXRjLiB0aGF0IHdhbnQgdG8KICBh
        cHBlYXIgdG8gYmUgYXJyYXlzLgoKICBVbmxpa2UgYEVtYmVyLkVudW1lcmFi
        bGUsYCB0aGlzIG1peGluIGRlZmluZXMgbWV0aG9kcyBzcGVjaWZpY2FsbHkg
        Zm9yCiAgY29sbGVjdGlvbnMgdGhhdCBwcm92aWRlIGluZGV4LW9yZGVyZWQg
        YWNjZXNzIHRvIHRoZWlyIGNvbnRlbnRzLiBXaGVuIHlvdQogIGFyZSBkZXNp
        Z25pbmcgY29kZSB0aGF0IG5lZWRzIHRvIGFjY2VwdCBhbnkga2luZCBvZiBB
        cnJheS1saWtlIG9iamVjdCwgeW91CiAgc2hvdWxkIHVzZSB0aGVzZSBtZXRo
        b2RzIGluc3RlYWQgb2YgQXJyYXkgcHJpbWl0aXZlcyBiZWNhdXNlIHRoZXNl
        IHdpbGwKICBwcm9wZXJseSBub3RpZnkgb2JzZXJ2ZXJzIG9mIGNoYW5nZXMg
        dG8gdGhlIGFycmF5LgoKICBBbHRob3VnaCB0aGVzZSBtZXRob2RzIGFyZSBl
        ZmZpY2llbnQsIHRoZXkgZG8gYWRkIGEgbGF5ZXIgb2YgaW5kaXJlY3Rpb24g
        dG8KICB5b3VyIGFwcGxpY2F0aW9uIHNvIGl0IGlzIGEgZ29vZCBpZGVhIHRv
        IHVzZSB0aGVtIG9ubHkgd2hlbiB5b3UgbmVlZCB0aGUKICBmbGV4aWJpbGl0
        eSBvZiB1c2luZyBib3RoIHRydWUgSmF2YVNjcmlwdCBhcnJheXMgYW5kICJ2
        aXJ0dWFsIiBhcnJheXMgc3VjaAogIGFzIGNvbnRyb2xsZXJzIGFuZCBjb2xs
        ZWN0aW9ucy4KCiAgWW91IGNhbiB1c2UgdGhlIG1ldGhvZHMgZGVmaW5lZCBp
        biB0aGlzIG1vZHVsZSB0byBhY2Nlc3MgYW5kIG1vZGlmeSBhcnJheQogIGNv
        bnRlbnRzIGluIGEgS1ZPLWZyaWVuZGx5IHdheS4gWW91IGNhbiBhbHNvIGJl
        IG5vdGlmaWVkIHdoZW5ldmVyIHRoZQogIG1lbWJlcnNoaXAgb2YgYW4gYXJy
        YXkgY2hhbmdlcyBieSBjaGFuZ2luZyB0aGUgc3ludGF4IG9mIHRoZSBwcm9w
        ZXJ0eSB0bwogIGAub2JzZXJ2ZXMoJypteVByb3BlcnR5LltdJylgLgoKICBU
        byBzdXBwb3J0IGBFbWJlci5BcnJheWAgaW4geW91ciBvd24gY2xhc3MsIHlv
        dSBtdXN0IG92ZXJyaWRlIHR3bwogIHByaW1pdGl2ZXMgdG8gdXNlIGl0OiBg
        cmVwbGFjZSgpYCBhbmQgYG9iamVjdEF0KClgLgoKICBOb3RlIHRoYXQgdGhl
        IEVtYmVyLkFycmF5IG1peGluIGFsc28gaW5jb3Jwb3JhdGVzIHRoZSBgRW1i
        ZXIuRW51bWVyYWJsZWAKICBtaXhpbi4gQWxsIGBFbWJlci5BcnJheWAtbGlr
        ZSBvYmplY3RzIGFyZSBhbHNvIGVudW1lcmFibGUuCgogIEBjbGFzcyBBcnJh
        eQogIEBuYW1lc3BhY2UgRW1iZXIKICBAdXNlcyBFbWJlci5FbnVtZXJhYmxl
        CiAgQHNpbmNlIEVtYmVyIDAuOS4wCiovCkVtYmVyLkFycmF5ID0gRW1iZXIu
        TWl4aW4uY3JlYXRlKEVtYmVyLkVudW1lcmFibGUsIHsKCiAgLyoqCiAgICBZ
        b3VyIGFycmF5IG11c3Qgc3VwcG9ydCB0aGUgYGxlbmd0aGAgcHJvcGVydHku
        IFlvdXIgcmVwbGFjZSBtZXRob2RzIHNob3VsZAogICAgc2V0IHRoaXMgcHJv
        cGVydHkgd2hlbmV2ZXIgaXQgY2hhbmdlcy4KCiAgICBAcHJvcGVydHkge051
        bWJlcn0gbGVuZ3RoCiAgKi8KICBsZW5ndGg6IEVtYmVyLnJlcXVpcmVkKCks
        CgogIC8qKgogICAgUmV0dXJucyB0aGUgb2JqZWN0IGF0IHRoZSBnaXZlbiBg
        aW5kZXhgLiBJZiB0aGUgZ2l2ZW4gYGluZGV4YCBpcyBuZWdhdGl2ZQogICAg
        b3IgaXMgZ3JlYXRlciBvciBlcXVhbCB0aGFuIHRoZSBhcnJheSBsZW5ndGgs
        IHJldHVybnMgYHVuZGVmaW5lZGAuCgogICAgVGhpcyBpcyBvbmUgb2YgdGhl
        IHByaW1pdGl2ZXMgeW91IG11c3QgaW1wbGVtZW50IHRvIHN1cHBvcnQgYEVt
        YmVyLkFycmF5YC4KICAgIElmIHlvdXIgb2JqZWN0IHN1cHBvcnRzIHJldHJp
        ZXZpbmcgdGhlIHZhbHVlIG9mIGFuIGFycmF5IGl0ZW0gdXNpbmcgYGdldCgp
        YAogICAgKGkuZS4gYG15QXJyYXkuZ2V0KDApYCksIHRoZW4geW91IGRvIG5v
        dCBuZWVkIHRvIGltcGxlbWVudCB0aGlzIG1ldGhvZAogICAgeW91cnNlbGYu
        CgogICAgYGBgamF2YXNjcmlwdAogICAgdmFyIGFyciA9IFsnYScsICdiJywg
        J2MnLCAnZCddOwogICAgYXJyLm9iamVjdEF0KDApOyAgIC8vICJhIgogICAg
        YXJyLm9iamVjdEF0KDMpOyAgIC8vICJkIgogICAgYXJyLm9iamVjdEF0KC0x
        KTsgIC8vIHVuZGVmaW5lZAogICAgYXJyLm9iamVjdEF0KDQpOyAgIC8vIHVu
        ZGVmaW5lZAogICAgYXJyLm9iamVjdEF0KDUpOyAgIC8vIHVuZGVmaW5lZAog
        ICAgYGBgCgogICAgQG1ldGhvZCBvYmplY3RBdAogICAgQHBhcmFtIHtOdW1i
        ZXJ9IGlkeCBUaGUgaW5kZXggb2YgdGhlIGl0ZW0gdG8gcmV0dXJuLgogICAg
        QHJldHVybiB7Kn0gaXRlbSBhdCBpbmRleCBvciB1bmRlZmluZWQKICAqLwog
        IG9iamVjdEF0OiBmdW5jdGlvbihpZHgpIHsKICAgIGlmICgoaWR4IDwgMCkg
        fHwgKGlkeD49Z2V0KHRoaXMsICdsZW5ndGgnKSkpIHJldHVybiB1bmRlZmlu
        ZWQgOwogICAgcmV0dXJuIGdldCh0aGlzLCBpZHgpOwogIH0sCgogIC8qKgog
        ICAgVGhpcyByZXR1cm5zIHRoZSBvYmplY3RzIGF0IHRoZSBzcGVjaWZpZWQg
        aW5kZXhlcywgdXNpbmcgYG9iamVjdEF0YC4KCiAgICBgYGBqYXZhc2NyaXB0
        CiAgICB2YXIgYXJyID3CoFsnYScsICdiJywgJ2MnLCAnZCddOwogICAgYXJy
        Lm9iamVjdHNBdChbMCwgMSwgMl0pOyAgLy8gWyJhIiwgImIiLCAiYyJdCiAg
        ICBhcnIub2JqZWN0c0F0KFsyLCAzLCA0XSk7ICAvLyBbImMiLCAiZCIsIHVu
        ZGVmaW5lZF0KICAgIGBgYAoKICAgIEBtZXRob2Qgb2JqZWN0c0F0CiAgICBA
        cGFyYW0ge0FycmF5fSBpbmRleGVzIEFuIGFycmF5IG9mIGluZGV4ZXMgb2Yg
        aXRlbXMgdG8gcmV0dXJuLgogICAgQHJldHVybiB7QXJyYXl9CiAgICovCiAg
        b2JqZWN0c0F0OiBmdW5jdGlvbihpbmRleGVzKSB7CiAgICB2YXIgc2VsZiA9
        IHRoaXM7CiAgICByZXR1cm4gbWFwKGluZGV4ZXMsIGZ1bmN0aW9uKGlkeCkg
        eyByZXR1cm4gc2VsZi5vYmplY3RBdChpZHgpOyB9KTsKICB9LAoKICAvLyBv
        dmVycmlkZXMgRW1iZXIuRW51bWVyYWJsZSB2ZXJzaW9uCiAgbmV4dE9iamVj
        dDogZnVuY3Rpb24oaWR4KSB7CiAgICByZXR1cm4gdGhpcy5vYmplY3RBdChp
        ZHgpOwogIH0sCgogIC8qKgogICAgVGhpcyBpcyB0aGUgaGFuZGxlciBmb3Ig
        dGhlIHNwZWNpYWwgYXJyYXkgY29udGVudCBwcm9wZXJ0eS4gSWYgeW91IGdl
        dAogICAgdGhpcyBwcm9wZXJ0eSwgaXQgd2lsbCByZXR1cm4gdGhpcy4gSWYg
        eW91IHNldCB0aGlzIHByb3BlcnR5IGl0IGEgbmV3CiAgICBhcnJheSwgaXQg
        d2lsbCByZXBsYWNlIHRoZSBjdXJyZW50IGNvbnRlbnQuCgogICAgVGhpcyBw
        cm9wZXJ0eSBvdmVycmlkZXMgdGhlIGRlZmF1bHQgcHJvcGVydHkgZGVmaW5l
        ZCBpbiBgRW1iZXIuRW51bWVyYWJsZWAuCgogICAgQHByb3BlcnR5IFtdCiAg
        ICBAcmV0dXJuIHRoaXMKICAqLwogICdbXSc6IEVtYmVyLmNvbXB1dGVkKGZ1
        bmN0aW9uKGtleSwgdmFsdWUpIHsKICAgIGlmICh2YWx1ZSAhPT0gdW5kZWZp
        bmVkKSB0aGlzLnJlcGxhY2UoMCwgZ2V0KHRoaXMsICdsZW5ndGgnKSwgdmFs
        dWUpIDsKICAgIHJldHVybiB0aGlzIDsKICB9KSwKCiAgZmlyc3RPYmplY3Q6
        IEVtYmVyLmNvbXB1dGVkKGZ1bmN0aW9uKCkgewogICAgcmV0dXJuIHRoaXMu
        b2JqZWN0QXQoMCk7CiAgfSksCgogIGxhc3RPYmplY3Q6IEVtYmVyLmNvbXB1
        dGVkKGZ1bmN0aW9uKCkgewogICAgcmV0dXJuIHRoaXMub2JqZWN0QXQoZ2V0
        KHRoaXMsICdsZW5ndGgnKS0xKTsKICB9KSwKCiAgLy8gb3B0aW1pemVkIHZl
        cnNpb24gZnJvbSBFbnVtZXJhYmxlCiAgY29udGFpbnM6IGZ1bmN0aW9uKG9i
        aikgewogICAgcmV0dXJuIHRoaXMuaW5kZXhPZihvYmopID49IDA7CiAgfSwK
        CiAgLy8gQWRkIGFueSBleHRyYSBtZXRob2RzIHRvIEVtYmVyLkFycmF5IHRo
        YXQgYXJlIG5hdGl2ZSB0byB0aGUgYnVpbHQtaW4gQXJyYXkuCiAgLyoqCiAg
        ICBSZXR1cm5zIGEgbmV3IGFycmF5IHRoYXQgaXMgYSBzbGljZSBvZiB0aGUg
        cmVjZWl2ZXIuIFRoaXMgaW1wbGVtZW50YXRpb24KICAgIHVzZXMgdGhlIG9i
        c2VydmFibGUgYXJyYXkgbWV0aG9kcyB0byByZXRyaWV2ZSB0aGUgb2JqZWN0
        cyBmb3IgdGhlIG5ldwogICAgc2xpY2UuCgogICAgYGBgamF2YXNjcmlwdAog
        ICAgdmFyIGFyciA9IFsncmVkJywgJ2dyZWVuJywgJ2JsdWUnXTsKICAgIGFy
        ci5zbGljZSgwKTsgICAgICAgLy8gWydyZWQnLCAnZ3JlZW4nLCAnYmx1ZSdd
        CiAgICBhcnIuc2xpY2UoMCwgMik7ICAgIC8vIFsncmVkJywgJ2dyZWVuJ10K
        ICAgIGFyci5zbGljZSgxLCAxMDApOyAgLy8gWydncmVlbicsICdibHVlJ10K
        ICAgIGBgYAoKICAgIEBtZXRob2Qgc2xpY2UKICAgIEBwYXJhbSB7SW50ZWdl
        cn0gYmVnaW5JbmRleCAoT3B0aW9uYWwpIGluZGV4IHRvIGJlZ2luIHNsaWNp
        bmcgZnJvbS4KICAgIEBwYXJhbSB7SW50ZWdlcn0gZW5kSW5kZXggKE9wdGlv
        bmFsKSBpbmRleCB0byBlbmQgdGhlIHNsaWNlIGF0IChidXQgbm90IGluY2x1
        ZGVkKS4KICAgIEByZXR1cm4ge0FycmF5fSBOZXcgYXJyYXkgd2l0aCBzcGVj
        aWZpZWQgc2xpY2UKICAqLwogIHNsaWNlOiBmdW5jdGlvbihiZWdpbkluZGV4
        LCBlbmRJbmRleCkgewogICAgdmFyIHJldCA9IEVtYmVyLkEoKTsKICAgIHZh
        ciBsZW5ndGggPSBnZXQodGhpcywgJ2xlbmd0aCcpIDsKICAgIGlmIChpc05v
        bmUoYmVnaW5JbmRleCkpIGJlZ2luSW5kZXggPSAwIDsKICAgIGlmIChpc05v
        bmUoZW5kSW5kZXgpIHx8IChlbmRJbmRleCA+IGxlbmd0aCkpIGVuZEluZGV4
        ID0gbGVuZ3RoIDsKCiAgICBpZiAoYmVnaW5JbmRleCA8IDApIGJlZ2luSW5k
        ZXggPSBsZW5ndGggKyBiZWdpbkluZGV4OwogICAgaWYgKGVuZEluZGV4IDwg
        MCkgZW5kSW5kZXggPSBsZW5ndGggKyBlbmRJbmRleDsKCiAgICB3aGlsZShi
        ZWdpbkluZGV4IDwgZW5kSW5kZXgpIHsKICAgICAgcmV0W3JldC5sZW5ndGhd
        ID0gdGhpcy5vYmplY3RBdChiZWdpbkluZGV4KyspIDsKICAgIH0KICAgIHJl
        dHVybiByZXQgOwogIH0sCgogIC8qKgogICAgUmV0dXJucyB0aGUgaW5kZXgg
        b2YgdGhlIGdpdmVuIG9iamVjdCdzIGZpcnN0IG9jY3VycmVuY2UuCiAgICBJ
        ZiBubyBgc3RhcnRBdGAgYXJndW1lbnQgaXMgZ2l2ZW4sIHRoZSBzdGFydGlu
        ZyBsb2NhdGlvbiB0bwogICAgc2VhcmNoIGlzIDAuIElmIGl0J3MgbmVnYXRp
        dmUsIHdpbGwgY291bnQgYmFja3dhcmQgZnJvbQogICAgdGhlIGVuZCBvZiB0
        aGUgYXJyYXkuIFJldHVybnMgLTEgaWYgbm8gbWF0Y2ggaXMgZm91bmQuCgog
        ICAgYGBgamF2YXNjcmlwdAogICAgdmFyIGFyciA9IFsiYSIsICJiIiwgImMi
        LCAiZCIsICJhIl07CiAgICBhcnIuaW5kZXhPZigiYSIpOyAgICAgICAvLyAg
        MAogICAgYXJyLmluZGV4T2YoInoiKTsgICAgICAgLy8gLTEKICAgIGFyci5p
        bmRleE9mKCJhIiwgMik7ICAgIC8vICA0CiAgICBhcnIuaW5kZXhPZigiYSIs
        IC0xKTsgICAvLyAgNAogICAgYXJyLmluZGV4T2YoImIiLCAzKTsgICAgLy8g
        LTEKICAgIGFyci5pbmRleE9mKCJhIiwgMTAwKTsgIC8vIC0xCiAgICBgYGAK
        CiAgICBAbWV0aG9kIGluZGV4T2YKICAgIEBwYXJhbSB7T2JqZWN0fSBvYmpl
        Y3QgdGhlIGl0ZW0gdG8gc2VhcmNoIGZvcgogICAgQHBhcmFtIHtOdW1iZXJ9
        IHN0YXJ0QXQgb3B0aW9uYWwgc3RhcnRpbmcgbG9jYXRpb24gdG8gc2VhcmNo
        LCBkZWZhdWx0IDAKICAgIEByZXR1cm4ge051bWJlcn0gaW5kZXggb3IgLTEg
        aWYgbm90IGZvdW5kCiAgKi8KICBpbmRleE9mOiBmdW5jdGlvbihvYmplY3Qs
        IHN0YXJ0QXQpIHsKICAgIHZhciBpZHgsIGxlbiA9IGdldCh0aGlzLCAnbGVu
        Z3RoJyk7CgogICAgaWYgKHN0YXJ0QXQgPT09IHVuZGVmaW5lZCkgc3RhcnRB
        dCA9IDA7CiAgICBpZiAoc3RhcnRBdCA8IDApIHN0YXJ0QXQgKz0gbGVuOwoK
        ICAgIGZvcihpZHg9c3RhcnRBdDtpZHg8bGVuO2lkeCsrKSB7CiAgICAgIGlm
        ICh0aGlzLm9iamVjdEF0KGlkeCkgPT09IG9iamVjdCkgcmV0dXJuIGlkeCA7
        CiAgICB9CiAgICByZXR1cm4gLTE7CiAgfSwKCiAgLyoqCiAgICBSZXR1cm5z
        IHRoZSBpbmRleCBvZiB0aGUgZ2l2ZW4gb2JqZWN0J3MgbGFzdCBvY2N1cnJl
        bmNlLgogICAgSWYgbm8gYHN0YXJ0QXRgIGFyZ3VtZW50IGlzIGdpdmVuLCB0
        aGUgc2VhcmNoIHN0YXJ0cyBmcm9tCiAgICB0aGUgbGFzdCBwb3NpdGlvbi4g
        SWYgaXQncyBuZWdhdGl2ZSwgd2lsbCBjb3VudCBiYWNrd2FyZAogICAgZnJv
        bSB0aGUgZW5kIG9mIHRoZSBhcnJheS4gUmV0dXJucyAtMSBpZiBubyBtYXRj
        aCBpcyBmb3VuZC4KCiAgICBgYGBqYXZhc2NyaXB0CiAgICB2YXIgYXJyID0g
        WyJhIiwgImIiLCAiYyIsICJkIiwgImEiXTsKICAgIGFyci5sYXN0SW5kZXhP
        ZigiYSIpOyAgICAgICAvLyAgNAogICAgYXJyLmxhc3RJbmRleE9mKCJ6Iik7
        ICAgICAgIC8vIC0xCiAgICBhcnIubGFzdEluZGV4T2YoImEiLCAyKTsgICAg
        Ly8gIDAKICAgIGFyci5sYXN0SW5kZXhPZigiYSIsIC0xKTsgICAvLyAgNAog
        ICAgYXJyLmxhc3RJbmRleE9mKCJiIiwgMyk7ICAgIC8vICAxCiAgICBhcnIu
        bGFzdEluZGV4T2YoImEiLCAxMDApOyAgLy8gIDQKICAgIGBgYAoKICAgIEBt
        ZXRob2QgbGFzdEluZGV4T2YKICAgIEBwYXJhbSB7T2JqZWN0fSBvYmplY3Qg
        dGhlIGl0ZW0gdG8gc2VhcmNoIGZvcgogICAgQHBhcmFtIHtOdW1iZXJ9IHN0
        YXJ0QXQgb3B0aW9uYWwgc3RhcnRpbmcgbG9jYXRpb24gdG8gc2VhcmNoLCBk
        ZWZhdWx0IDAKICAgIEByZXR1cm4ge051bWJlcn0gaW5kZXggb3IgLTEgaWYg
        bm90IGZvdW5kCiAgKi8KICBsYXN0SW5kZXhPZjogZnVuY3Rpb24ob2JqZWN0
        LCBzdGFydEF0KSB7CiAgICB2YXIgaWR4LCBsZW4gPSBnZXQodGhpcywgJ2xl
        bmd0aCcpOwoKICAgIGlmIChzdGFydEF0ID09PSB1bmRlZmluZWQgfHwgc3Rh
        cnRBdCA+PSBsZW4pIHN0YXJ0QXQgPSBsZW4tMTsKICAgIGlmIChzdGFydEF0
        IDwgMCkgc3RhcnRBdCArPSBsZW47CgogICAgZm9yKGlkeD1zdGFydEF0O2lk
        eD49MDtpZHgtLSkgewogICAgICBpZiAodGhpcy5vYmplY3RBdChpZHgpID09
        PSBvYmplY3QpIHJldHVybiBpZHggOwogICAgfQogICAgcmV0dXJuIC0xOwog
        IH0sCgogIC8vIC4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4u
        Li4uLi4uLi4uLi4uLi4uLi4uLi4uLi4KICAvLyBBUlJBWSBPQlNFUlZFUlMK
        ICAvLwoKICAvKioKICAgIEFkZHMgYW4gYXJyYXkgb2JzZXJ2ZXIgdG8gdGhl
        IHJlY2VpdmluZyBhcnJheS4gVGhlIGFycmF5IG9ic2VydmVyIG9iamVjdAog
        ICAgbm9ybWFsbHkgbXVzdCBpbXBsZW1lbnQgdHdvIG1ldGhvZHM6CgogICAg
        KiBgYXJyYXlXaWxsQ2hhbmdlKG9ic2VydmVkT2JqLCBzdGFydCwgcmVtb3Zl
        Q291bnQsIGFkZENvdW50KWAgLSBUaGlzIG1ldGhvZCB3aWxsIGJlCiAgICAg
        IGNhbGxlZCBqdXN0IGJlZm9yZSB0aGUgYXJyYXkgaXMgbW9kaWZpZWQuCiAg
        ICAqIGBhcnJheURpZENoYW5nZShvYnNlcnZlZE9iaiwgc3RhcnQsIHJlbW92
        ZUNvdW50LCBhZGRDb3VudClgIC0gVGhpcyBtZXRob2Qgd2lsbCBiZQogICAg
        ICBjYWxsZWQganVzdCBhZnRlciB0aGUgYXJyYXkgaXMgbW9kaWZpZWQuCgog
        ICAgQm90aCBjYWxsYmFja3Mgd2lsbCBiZSBwYXNzZWQgdGhlIG9ic2VydmVk
        IG9iamVjdCwgc3RhcnRpbmcgaW5kZXggb2YgdGhlCiAgICBjaGFuZ2UgYXMg
        d2VsbCBhIGEgY291bnQgb2YgdGhlIGl0ZW1zIHRvIGJlIHJlbW92ZWQgYW5k
        IGFkZGVkLiBZb3UgY2FuIHVzZQogICAgdGhlc2UgY2FsbGJhY2tzIHRvIG9w
        dGlvbmFsbHkgaW5zcGVjdCB0aGUgYXJyYXkgZHVyaW5nIHRoZSBjaGFuZ2Us
        IGNsZWFyCiAgICBjYWNoZXMsIG9yIGRvIGFueSBvdGhlciBib29ra2VlcGlu
        ZyBuZWNlc3NhcnkuCgogICAgSW4gYWRkaXRpb24gdG8gcGFzc2luZyBhIHRh
        cmdldCwgeW91IGNhbiBhbHNvIGluY2x1ZGUgYW4gb3B0aW9ucyBoYXNoCiAg
        ICB3aGljaCB5b3UgY2FuIHVzZSB0byBvdmVycmlkZSB0aGUgbWV0aG9kIG5h
        bWVzIHRoYXQgd2lsbCBiZSBpbnZva2VkIG9uIHRoZQogICAgdGFyZ2V0LgoK
        ICAgIEBtZXRob2QgYWRkQXJyYXlPYnNlcnZlcgogICAgQHBhcmFtIHtPYmpl
        Y3R9IHRhcmdldCBUaGUgb2JzZXJ2ZXIgb2JqZWN0LgogICAgQHBhcmFtIHtI
        YXNofSBvcHRzIE9wdGlvbmFsIGhhc2ggb2YgY29uZmlndXJhdGlvbiBvcHRp
        b25zIGluY2x1ZGluZwogICAgICBgd2lsbENoYW5nZWAgYW5kIGBkaWRDaGFu
        Z2VgIG9wdGlvbi4KICAgIEByZXR1cm4ge0VtYmVyLkFycmF5fSByZWNlaXZl
        cgogICovCiAgYWRkQXJyYXlPYnNlcnZlcjogZnVuY3Rpb24odGFyZ2V0LCBv
        cHRzKSB7CiAgICB2YXIgd2lsbENoYW5nZSA9IChvcHRzICYmIG9wdHMud2ls
        bENoYW5nZSkgfHwgJ2FycmF5V2lsbENoYW5nZScsCiAgICAgICAgZGlkQ2hh
        bmdlICA9IChvcHRzICYmIG9wdHMuZGlkQ2hhbmdlKSB8fCAnYXJyYXlEaWRD
        aGFuZ2UnOwoKICAgIHZhciBoYXNPYnNlcnZlcnMgPSBnZXQodGhpcywgJ2hh
        c0FycmF5T2JzZXJ2ZXJzJyk7CiAgICBpZiAoIWhhc09ic2VydmVycykgRW1i
        ZXIucHJvcGVydHlXaWxsQ2hhbmdlKHRoaXMsICdoYXNBcnJheU9ic2VydmVy
        cycpOwogICAgRW1iZXIuYWRkTGlzdGVuZXIodGhpcywgJ0BhcnJheTpiZWZv
        cmUnLCB0YXJnZXQsIHdpbGxDaGFuZ2UpOwogICAgRW1iZXIuYWRkTGlzdGVu
        ZXIodGhpcywgJ0BhcnJheTpjaGFuZ2UnLCB0YXJnZXQsIGRpZENoYW5nZSk7
        CiAgICBpZiAoIWhhc09ic2VydmVycykgRW1iZXIucHJvcGVydHlEaWRDaGFu
        Z2UodGhpcywgJ2hhc0FycmF5T2JzZXJ2ZXJzJyk7CiAgICByZXR1cm4gdGhp
        czsKICB9LAoKICAvKioKICAgIFJlbW92ZXMgYW4gYXJyYXkgb2JzZXJ2ZXIg
        ZnJvbSB0aGUgb2JqZWN0IGlmIHRoZSBvYnNlcnZlciBpcyBjdXJyZW50CiAg
        ICByZWdpc3RlcmVkLiBDYWxsaW5nIHRoaXMgbWV0aG9kIG11bHRpcGxlIHRp
        bWVzIHdpdGggdGhlIHNhbWUgb2JqZWN0IHdpbGwKICAgIGhhdmUgbm8gZWZm
        ZWN0LgoKICAgIEBtZXRob2QgcmVtb3ZlQXJyYXlPYnNlcnZlcgogICAgQHBh
        cmFtIHtPYmplY3R9IHRhcmdldCBUaGUgb2JqZWN0IG9ic2VydmluZyB0aGUg
        YXJyYXkuCiAgICBAcGFyYW0ge0hhc2h9IG9wdHMgT3B0aW9uYWwgaGFzaCBv
        ZiBjb25maWd1cmF0aW9uIG9wdGlvbnMgaW5jbHVkaW5nCiAgICAgIGB3aWxs
        Q2hhbmdlYCBhbmQgYGRpZENoYW5nZWAgb3B0aW9uLgogICAgQHJldHVybiB7
        RW1iZXIuQXJyYXl9IHJlY2VpdmVyCiAgKi8KICByZW1vdmVBcnJheU9ic2Vy
        dmVyOiBmdW5jdGlvbih0YXJnZXQsIG9wdHMpIHsKICAgIHZhciB3aWxsQ2hh
        bmdlID0gKG9wdHMgJiYgb3B0cy53aWxsQ2hhbmdlKSB8fCAnYXJyYXlXaWxs
        Q2hhbmdlJywKICAgICAgICBkaWRDaGFuZ2UgID0gKG9wdHMgJiYgb3B0cy5k
        aWRDaGFuZ2UpIHx8ICdhcnJheURpZENoYW5nZSc7CgogICAgdmFyIGhhc09i
        c2VydmVycyA9IGdldCh0aGlzLCAnaGFzQXJyYXlPYnNlcnZlcnMnKTsKICAg
        IGlmIChoYXNPYnNlcnZlcnMpIEVtYmVyLnByb3BlcnR5V2lsbENoYW5nZSh0
        aGlzLCAnaGFzQXJyYXlPYnNlcnZlcnMnKTsKICAgIEVtYmVyLnJlbW92ZUxp
        c3RlbmVyKHRoaXMsICdAYXJyYXk6YmVmb3JlJywgdGFyZ2V0LCB3aWxsQ2hh
        bmdlKTsKICAgIEVtYmVyLnJlbW92ZUxpc3RlbmVyKHRoaXMsICdAYXJyYXk6
        Y2hhbmdlJywgdGFyZ2V0LCBkaWRDaGFuZ2UpOwogICAgaWYgKGhhc09ic2Vy
        dmVycykgRW1iZXIucHJvcGVydHlEaWRDaGFuZ2UodGhpcywgJ2hhc0FycmF5
        T2JzZXJ2ZXJzJyk7CiAgICByZXR1cm4gdGhpczsKICB9LAoKICAvKioKICAg
        IEJlY29tZXMgdHJ1ZSB3aGVuZXZlciB0aGUgYXJyYXkgY3VycmVudGx5IGhh
        cyBvYnNlcnZlcnMgd2F0Y2hpbmcgY2hhbmdlcwogICAgb24gdGhlIGFycmF5
        LgoKICAgIEBwcm9wZXJ0eSB7Qm9vbGVhbn0gaGFzQXJyYXlPYnNlcnZlcnMK
        ICAqLwogIGhhc0FycmF5T2JzZXJ2ZXJzOiBFbWJlci5jb21wdXRlZChmdW5j
        dGlvbigpIHsKICAgIHJldHVybiBFbWJlci5oYXNMaXN0ZW5lcnModGhpcywg
        J0BhcnJheTpjaGFuZ2UnKSB8fCBFbWJlci5oYXNMaXN0ZW5lcnModGhpcywg
        J0BhcnJheTpiZWZvcmUnKTsKICB9KSwKCiAgLyoqCiAgICBJZiB5b3UgYXJl
        IGltcGxlbWVudGluZyBhbiBvYmplY3QgdGhhdCBzdXBwb3J0cyBgRW1iZXIu
        QXJyYXlgLCBjYWxsIHRoaXMKICAgIG1ldGhvZCBqdXN0IGJlZm9yZSB0aGUg
        YXJyYXkgY29udGVudCBjaGFuZ2VzIHRvIG5vdGlmeSBhbnkgb2JzZXJ2ZXJz
        IGFuZAogICAgaW52YWxpZGF0ZSBhbnkgcmVsYXRlZCBwcm9wZXJ0aWVzLiBQ
        YXNzIHRoZSBzdGFydGluZyBpbmRleCBvZiB0aGUgY2hhbmdlCiAgICBhcyB3
        ZWxsIGFzIGEgZGVsdGEgb2YgdGhlIGFtb3VudHMgdG8gY2hhbmdlLgoKICAg
        IEBtZXRob2QgYXJyYXlDb250ZW50V2lsbENoYW5nZQogICAgQHBhcmFtIHtO
        dW1iZXJ9IHN0YXJ0SWR4IFRoZSBzdGFydGluZyBpbmRleCBpbiB0aGUgYXJy
        YXkgdGhhdCB3aWxsIGNoYW5nZS4KICAgIEBwYXJhbSB7TnVtYmVyfSByZW1v
        dmVBbXQgVGhlIG51bWJlciBvZiBpdGVtcyB0aGF0IHdpbGwgYmUgcmVtb3Zl
        ZC4gSWYgeW91CiAgICAgIHBhc3MgYG51bGxgIGFzc3VtZXMgMAogICAgQHBh
        cmFtIHtOdW1iZXJ9IGFkZEFtdCBUaGUgbnVtYmVyIG9mIGl0ZW1zIHRoYXQg
        d2lsbCBiZSBhZGRlZC4gSWYgeW91CiAgICAgIHBhc3MgYG51bGxgIGFzc3Vt
        ZXMgMC4KICAgIEByZXR1cm4ge0VtYmVyLkFycmF5fSByZWNlaXZlcgogICov
        CiAgYXJyYXlDb250ZW50V2lsbENoYW5nZTogZnVuY3Rpb24oc3RhcnRJZHgs
        IHJlbW92ZUFtdCwgYWRkQW10KSB7CgogICAgLy8gaWYgbm8gYXJncyBhcmUg
        cGFzc2VkIGFzc3VtZSBldmVyeXRoaW5nIGNoYW5nZXMKICAgIGlmIChzdGFy
        dElkeD09PXVuZGVmaW5lZCkgewogICAgICBzdGFydElkeCA9IDA7CiAgICAg
        IHJlbW92ZUFtdCA9IGFkZEFtdCA9IC0xOwogICAgfSBlbHNlIHsKICAgICAg
        aWYgKHJlbW92ZUFtdCA9PT0gdW5kZWZpbmVkKSByZW1vdmVBbXQ9LTE7CiAg
        ICAgIGlmIChhZGRBbXQgICAgPT09IHVuZGVmaW5lZCkgYWRkQW10PS0xOwog
        ICAgfQoKICAgIC8vIE1ha2Ugc3VyZSB0aGUgQGVhY2ggcHJveHkgaXMgc2V0
        IHVwIGlmIGFueW9uZSBpcyBvYnNlcnZpbmcgQGVhY2gKICAgIGlmIChFbWJl
        ci5pc1dhdGNoaW5nKHRoaXMsICdAZWFjaCcpKSB7IGdldCh0aGlzLCAnQGVh
        Y2gnKTsgfQoKICAgIEVtYmVyLnNlbmRFdmVudCh0aGlzLCAnQGFycmF5OmJl
        Zm9yZScsIFt0aGlzLCBzdGFydElkeCwgcmVtb3ZlQW10LCBhZGRBbXRdKTsK
        CiAgICB2YXIgcmVtb3ZpbmcsIGxpbTsKICAgIGlmIChzdGFydElkeD49MCAm
        JiByZW1vdmVBbXQ+PTAgJiYgZ2V0KHRoaXMsICdoYXNFbnVtZXJhYmxlT2Jz
        ZXJ2ZXJzJykpIHsKICAgICAgcmVtb3ZpbmcgPSBbXTsKICAgICAgbGltID0g
        c3RhcnRJZHgrcmVtb3ZlQW10OwogICAgICBmb3IodmFyIGlkeD1zdGFydElk
        eDtpZHg8bGltO2lkeCsrKSByZW1vdmluZy5wdXNoKHRoaXMub2JqZWN0QXQo
        aWR4KSk7CiAgICB9IGVsc2UgewogICAgICByZW1vdmluZyA9IHJlbW92ZUFt
        dDsKICAgIH0KCiAgICB0aGlzLmVudW1lcmFibGVDb250ZW50V2lsbENoYW5n
        ZShyZW1vdmluZywgYWRkQW10KTsKCiAgICByZXR1cm4gdGhpczsKICB9LAoK
        ICAvKioKICAgIElmIHlvdSBhcmUgaW1wbGVtZW50aW5nIGFuIG9iamVjdCB0
        aGF0IHN1cHBvcnRzIGBFbWJlci5BcnJheWAsIGNhbGwgdGhpcwogICAgbWV0
        aG9kIGp1c3QgYWZ0ZXIgdGhlIGFycmF5IGNvbnRlbnQgY2hhbmdlcyB0byBu
        b3RpZnkgYW55IG9ic2VydmVycyBhbmQKICAgIGludmFsaWRhdGUgYW55IHJl
        bGF0ZWQgcHJvcGVydGllcy4gUGFzcyB0aGUgc3RhcnRpbmcgaW5kZXggb2Yg
        dGhlIGNoYW5nZQogICAgYXMgd2VsbCBhcyBhIGRlbHRhIG9mIHRoZSBhbW91
        bnRzIHRvIGNoYW5nZS4KCiAgICBAbWV0aG9kIGFycmF5Q29udGVudERpZENo
        YW5nZQogICAgQHBhcmFtIHtOdW1iZXJ9IHN0YXJ0SWR4IFRoZSBzdGFydGlu
        ZyBpbmRleCBpbiB0aGUgYXJyYXkgdGhhdCBkaWQgY2hhbmdlLgogICAgQHBh
        cmFtIHtOdW1iZXJ9IHJlbW92ZUFtdCBUaGUgbnVtYmVyIG9mIGl0ZW1zIHRo
        YXQgd2VyZSByZW1vdmVkLiBJZiB5b3UKICAgICAgcGFzcyBgbnVsbGAgYXNz
        dW1lcyAwCiAgICBAcGFyYW0ge051bWJlcn0gYWRkQW10IFRoZSBudW1iZXIg
        b2YgaXRlbXMgdGhhdCB3ZXJlIGFkZGVkLiBJZiB5b3UKICAgICAgcGFzcyBg
        bnVsbGAgYXNzdW1lcyAwLgogICAgQHJldHVybiB7RW1iZXIuQXJyYXl9IHJl
        Y2VpdmVyCiAgKi8KICBhcnJheUNvbnRlbnREaWRDaGFuZ2U6IGZ1bmN0aW9u
        KHN0YXJ0SWR4LCByZW1vdmVBbXQsIGFkZEFtdCkgewoKICAgIC8vIGlmIG5v
        IGFyZ3MgYXJlIHBhc3NlZCBhc3N1bWUgZXZlcnl0aGluZyBjaGFuZ2VzCiAg
        ICBpZiAoc3RhcnRJZHg9PT11bmRlZmluZWQpIHsKICAgICAgc3RhcnRJZHgg
        PSAwOwogICAgICByZW1vdmVBbXQgPSBhZGRBbXQgPSAtMTsKICAgIH0gZWxz
        ZSB7CiAgICAgIGlmIChyZW1vdmVBbXQgPT09IHVuZGVmaW5lZCkgcmVtb3Zl
        QW10PS0xOwogICAgICBpZiAoYWRkQW10ICAgID09PSB1bmRlZmluZWQpIGFk
        ZEFtdD0tMTsKICAgIH0KCiAgICB2YXIgYWRkaW5nLCBsaW07CiAgICBpZiAo
        c3RhcnRJZHg+PTAgJiYgYWRkQW10Pj0wICYmIGdldCh0aGlzLCAnaGFzRW51
        bWVyYWJsZU9ic2VydmVycycpKSB7CiAgICAgIGFkZGluZyA9IFtdOwogICAg
        ICBsaW0gPSBzdGFydElkeCthZGRBbXQ7CiAgICAgIGZvcih2YXIgaWR4PXN0
        YXJ0SWR4O2lkeDxsaW07aWR4KyspIGFkZGluZy5wdXNoKHRoaXMub2JqZWN0
        QXQoaWR4KSk7CiAgICB9IGVsc2UgewogICAgICBhZGRpbmcgPSBhZGRBbXQ7
        CiAgICB9CgogICAgdGhpcy5lbnVtZXJhYmxlQ29udGVudERpZENoYW5nZShy
        ZW1vdmVBbXQsIGFkZGluZyk7CiAgICBFbWJlci5zZW5kRXZlbnQodGhpcywg
        J0BhcnJheTpjaGFuZ2UnLCBbdGhpcywgc3RhcnRJZHgsIHJlbW92ZUFtdCwg
        YWRkQW10XSk7CgogICAgdmFyIGxlbmd0aCAgICAgID0gZ2V0KHRoaXMsICds
        ZW5ndGgnKSwKICAgICAgICBjYWNoZWRGaXJzdCA9IGNhY2hlRm9yKHRoaXMs
        ICdmaXJzdE9iamVjdCcpLAogICAgICAgIGNhY2hlZExhc3QgID0gY2FjaGVG
        b3IodGhpcywgJ2xhc3RPYmplY3QnKTsKICAgIGlmICh0aGlzLm9iamVjdEF0
        KDApICE9PSBjYWNoZWRGaXJzdCkgewogICAgICBFbWJlci5wcm9wZXJ0eVdp
        bGxDaGFuZ2UodGhpcywgJ2ZpcnN0T2JqZWN0Jyk7CiAgICAgIEVtYmVyLnBy
        b3BlcnR5RGlkQ2hhbmdlKHRoaXMsICdmaXJzdE9iamVjdCcpOwogICAgfQog
        ICAgaWYgKHRoaXMub2JqZWN0QXQobGVuZ3RoLTEpICE9PSBjYWNoZWRMYXN0
        KSB7CiAgICAgIEVtYmVyLnByb3BlcnR5V2lsbENoYW5nZSh0aGlzLCAnbGFz
        dE9iamVjdCcpOwogICAgICBFbWJlci5wcm9wZXJ0eURpZENoYW5nZSh0aGlz
        LCAnbGFzdE9iamVjdCcpOwogICAgfQoKICAgIHJldHVybiB0aGlzOwogIH0s
        CgogIC8vIC4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4u
        Li4uLi4uLi4uLi4uLi4uLi4uLi4KICAvLyBFTlVNRVJBVEVEIFBST1BFUlRJ
        RVMKICAvLwoKICAvKioKICAgIFJldHVybnMgYSBzcGVjaWFsIG9iamVjdCB0
        aGF0IGNhbiBiZSB1c2VkIHRvIG9ic2VydmUgaW5kaXZpZHVhbCBwcm9wZXJ0
        aWVzCiAgICBvbiB0aGUgYXJyYXkuIEp1c3QgZ2V0IGFuIGVxdWl2YWxlbnQg
        cHJvcGVydHkgb24gdGhpcyBvYmplY3QgYW5kIGl0IHdpbGwKICAgIHJldHVy
        biBhbiBlbnVtZXJhYmxlIHRoYXQgbWFwcyBhdXRvbWF0aWNhbGx5IHRvIHRo
        ZSBuYW1lZCBrZXkgb24gdGhlCiAgICBtZW1iZXIgb2JqZWN0cy4KCiAgICBJ
        ZiB5b3UgbWVyZWx5IHdhbnQgdG8gd2F0Y2ggZm9yIGFueSBpdGVtcyBiZWlu
        ZyBhZGRlZCBvciByZW1vdmVkIHRvIHRoZSBhcnJheSwKICAgIHVzZSB0aGUg
        YFtdYCBwcm9wZXJ0eSBpbnN0ZWFkIG9mIGBAZWFjaGAuCgogICAgQHByb3Bl
        cnR5IEBlYWNoCiAgKi8KICAnQGVhY2gnOiBFbWJlci5jb21wdXRlZChmdW5j
        dGlvbigpIHsKICAgIGlmICghdGhpcy5fX2VhY2gpIHRoaXMuX19lYWNoID0g
        bmV3IEVtYmVyLkVhY2hQcm94eSh0aGlzKTsKICAgIHJldHVybiB0aGlzLl9f
        ZWFjaDsKICB9KQoKfSkgOwoKfSkoKTsKCgoKKGZ1bmN0aW9uKCkgewp2YXIg
        ZV9nZXQgPSBFbWJlci5nZXQsCiAgICBzZXQgPSBFbWJlci5zZXQsCiAgICBn
        dWlkRm9yID0gRW1iZXIuZ3VpZEZvciwKICAgIG1ldGFGb3IgPSBFbWJlci5t
        ZXRhLAogICAgcHJvcGVydHlXaWxsQ2hhbmdlID0gRW1iZXIucHJvcGVydHlX
        aWxsQ2hhbmdlLAogICAgcHJvcGVydHlEaWRDaGFuZ2UgPSBFbWJlci5wcm9w
        ZXJ0eURpZENoYW5nZSwKICAgIGFkZEJlZm9yZU9ic2VydmVyID0gRW1iZXIu
        YWRkQmVmb3JlT2JzZXJ2ZXIsCiAgICByZW1vdmVCZWZvcmVPYnNlcnZlciA9
        IEVtYmVyLnJlbW92ZUJlZm9yZU9ic2VydmVyLAogICAgYWRkT2JzZXJ2ZXIg
        PSBFbWJlci5hZGRPYnNlcnZlciwKICAgIHJlbW92ZU9ic2VydmVyID0gRW1i
        ZXIucmVtb3ZlT2JzZXJ2ZXIsCiAgICBDb21wdXRlZFByb3BlcnR5ID0gRW1i
        ZXIuQ29tcHV0ZWRQcm9wZXJ0eSwKICAgIGFfc2xpY2UgPSBbXS5zbGljZSwK
        ICAgIG9fY3JlYXRlID0gRW1iZXIuY3JlYXRlLAogICAgZm9yRWFjaCA9IEVt
        YmVyLkVudW1lcmFibGVVdGlscy5mb3JFYWNoLAogICAgLy8gSGVyZSB3ZSBl
        eHBsaWNpdGx5IGRvbid0IGFsbG93IGBAZWFjaC5mb29gOyBpdCB3b3VsZCBy
        ZXF1aXJlIHNvbWUgc3BlY2lhbAogICAgLy8gdGVzdGluZywgYnV0IHRoZXJl
        J3Mgbm8gcGFydGljdWxhciByZWFzb24gd2h5IGl0IHNob3VsZCBiZSBkaXNh
        bGxvd2VkLgogICAgZWFjaFByb3BlcnR5UGF0dGVybiA9IC9eKC4qKVwuQGVh
        Y2hcLiguKikvLAogICAgZG91YmxlRWFjaFByb3BlcnR5UGF0dGVybiA9IC8o
        LipcLkBlYWNoKXsyLH0vLAogICAgYXJyYXlCcmFja2V0UGF0dGVybiA9IC9c
        LlxbXF0kLzsKCnZhciBleHBhbmRQcm9wZXJ0aWVzID0gRW1iZXIuZXhwYW5k
        UHJvcGVydGllczsKCmZ1bmN0aW9uIGdldChvYmosIGtleSkgewogIGlmIChr
        ZXkgPT09ICdAdGhpcycpIHsKICAgIHJldHVybiBvYmo7CiAgfQoKICByZXR1
        cm4gZV9nZXQob2JqLCBrZXkpOwp9CgovKgogIFRyYWNrcyBjaGFuZ2VzIHRv
        IGRlcGVuZGVudCBhcnJheXMsIGFzIHdlbGwgYXMgdG8gcHJvcGVydGllcyBv
        ZiBpdGVtcyBpbgogIGRlcGVuZGVudCBhcnJheXMuCgogIEBjbGFzcyBEZXBl
        bmRlbnRBcnJheXNPYnNlcnZlcgoqLwpmdW5jdGlvbiBEZXBlbmRlbnRBcnJh
        eXNPYnNlcnZlcihjYWxsYmFja3MsIGNwLCBpbnN0YW5jZU1ldGEsIGNvbnRl
        eHQsIHByb3BlcnR5TmFtZSwgc3VnYXJNZXRhKSB7CiAgLy8gdXNlciBzcGVj
        aWZpZWQgY2FsbGJhY2tzIGZvciBgYWRkZWRJdGVtYCBhbmQgYHJlbW92ZWRJ
        dGVtYAogIHRoaXMuY2FsbGJhY2tzID0gY2FsbGJhY2tzOwoKICAvLyB0aGUg
        Y29tcHV0ZWQgcHJvcGVydHk6IHJlbWVtYmVyIHRoZXNlIGFyZSBzaGFyZWQg
        YWNyb3NzIGluc3RhbmNlcwogIHRoaXMuY3AgPSBjcDsKCiAgLy8gdGhlIFJl
        ZHVjZUNvbXB1dGVkUHJvcGVydHlJbnN0YW5jZU1ldGEgdGhpcyBEZXBlbmRl
        bnRBcnJheXNPYnNlcnZlciBpcwogIC8vIGFzc29jaWF0ZWQgd2l0aAogIHRo
        aXMuaW5zdGFuY2VNZXRhID0gaW5zdGFuY2VNZXRhOwoKICAvLyBBIG1hcCBv
        ZiBhcnJheSBndWlkcyB0byBkZXBlbmRlbnRLZXlzLCBmb3IgdGhlIGdpdmVu
        IGNvbnRleHQuICBXZSB0cmFjawogIC8vIHRoaXMgYmVjYXVzZSB3ZSB3YW50
        IHRvIHNldCB1cCB0aGUgY29tcHV0ZWQgcHJvcGVydHkgcG90ZW50aWFsbHkg
        YmVmb3JlIHRoZQogIC8vIGRlcGVuZGVudCBhcnJheSBldmVuIGV4aXN0cywg
        YnV0IHdoZW4gdGhlIGFycmF5IG9ic2VydmVyIGZpcmVzLCB3ZSBsYWNrCiAg
        Ly8gZW5vdWdoIGNvbnRleHQgdG8ga25vdyB3aGF0IHRvIHVwZGF0ZTogd2Ug
        Y2FuIHJlY292ZXIgdGhhdCBjb250ZXh0IGJ5CiAgLy8gZ2V0dGluZyB0aGUg
        ZGVwZW5kZW50S2V5LgogIHRoaXMuZGVwZW5kZW50S2V5c0J5R3VpZCA9IHt9
        OwoKICAvLyBhIG1hcCBvZiBkZXBlbmRlbnQgYXJyYXkgZ3VpZHMgLT4gRW1i
        ZXIuVHJhY2tlZEFycmF5IGluc3RhbmNlcy4gIFdlIHVzZQogIC8vIHRoaXMg
        dG8gbGF6aWx5IHJlY29tcHV0ZSBpbmRleGVzIGZvciBpdGVtIHByb3BlcnR5
        IG9ic2VydmVycy4KICB0aGlzLnRyYWNrZWRBcnJheXNCeUd1aWQgPSB7fTsK
        CiAgLy8gV2Ugc3VzcGVuZCBvYnNlcnZlcnMgdG8gaWdub3JlIHJlcGxhY2Vt
        ZW50cyBmcm9tIGByZXNldGAgd2hlbiB0b3RhbGx5CiAgLy8gcmVjb21wdXRp
        bmcuICBVbmZvcnR1bmF0ZWx5IHdlIGNhbm5vdCBwcm9wZXJseSBzdXNwZW5k
        IHRoZSBvYnNlcnZlcnMKICAvLyBiZWNhdXNlIHdlIG9ubHkgaGF2ZSB0aGUg
        a2V5OyBpbnN0ZWFkIHdlIG1ha2UgdGhlIG9ic2VydmVycyBuby1vcHMKICB0
        aGlzLnN1c3BlbmRlZCA9IGZhbHNlOwoKICAvLyBUaGlzIGlzIHVzZWQgdG8g
        Y29hbGVzY2UgaXRlbSBjaGFuZ2VzIGZyb20gcHJvcGVydHkgb2JzZXJ2ZXJz
        LgogIHRoaXMuY2hhbmdlZEl0ZW1zID0ge307Cn0KCmZ1bmN0aW9uIEl0ZW1Q
        cm9wZXJ0eU9ic2VydmVyQ29udGV4dCAoZGVwZW5kZW50QXJyYXksIGluZGV4
        LCB0cmFja2VkQXJyYXkpIHsKICBFbWJlci5hc3NlcnQoIkludGVybmFsIGVy
        cm9yOiB0cmFja2VkQXJyYXkgaXMgbnVsbCBvciB1bmRlZmluZWQiLCB0cmFj
        a2VkQXJyYXkpOwoKICB0aGlzLmRlcGVuZGVudEFycmF5ID0gZGVwZW5kZW50
        QXJyYXk7CiAgdGhpcy5pbmRleCA9IGluZGV4OwogIHRoaXMuaXRlbSA9IGRl
        cGVuZGVudEFycmF5Lm9iamVjdEF0KGluZGV4KTsKICB0aGlzLnRyYWNrZWRB
        cnJheSA9IHRyYWNrZWRBcnJheTsKICB0aGlzLmJlZm9yZU9ic2VydmVyID0g
        bnVsbDsKICB0aGlzLm9ic2VydmVyID0gbnVsbDsKCiAgdGhpcy5kZXN0cm95
        ZWQgPSBmYWxzZTsKfQoKRGVwZW5kZW50QXJyYXlzT2JzZXJ2ZXIucHJvdG90
        eXBlID0gewogIHNldFZhbHVlOiBmdW5jdGlvbiAobmV3VmFsdWUpIHsKICAg
        IHRoaXMuaW5zdGFuY2VNZXRhLnNldFZhbHVlKG5ld1ZhbHVlLCB0cnVlKTsK
        ICB9LAogIGdldFZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gdGhp
        cy5pbnN0YW5jZU1ldGEuZ2V0VmFsdWUoKTsKICB9LAoKICBzZXR1cE9ic2Vy
        dmVyczogZnVuY3Rpb24gKGRlcGVuZGVudEFycmF5LCBkZXBlbmRlbnRLZXkp
        IHsKICAgIEVtYmVyLmFzc2VydCgiZGVwZW5kZW50IGFycmF5IG11c3QgYmUg
        YW4gYEVtYmVyLkFycmF5YCIsIEVtYmVyLkFycmF5LmRldGVjdChkZXBlbmRl
        bnRBcnJheSkpOwoKICAgIHRoaXMuZGVwZW5kZW50S2V5c0J5R3VpZFtndWlk
        Rm9yKGRlcGVuZGVudEFycmF5KV0gPSBkZXBlbmRlbnRLZXk7CgogICAgZGVw
        ZW5kZW50QXJyYXkuYWRkQXJyYXlPYnNlcnZlcih0aGlzLCB7CiAgICAgIHdp
        bGxDaGFuZ2U6ICdkZXBlbmRlbnRBcnJheVdpbGxDaGFuZ2UnLAogICAgICBk
        aWRDaGFuZ2U6ICdkZXBlbmRlbnRBcnJheURpZENoYW5nZScKICAgIH0pOwoK
        ICAgIGlmICh0aGlzLmNwLl9pdGVtUHJvcGVydHlLZXlzW2RlcGVuZGVudEtl
        eV0pIHsKICAgICAgdGhpcy5zZXR1cFByb3BlcnR5T2JzZXJ2ZXJzKGRlcGVu
        ZGVudEtleSwgdGhpcy5jcC5faXRlbVByb3BlcnR5S2V5c1tkZXBlbmRlbnRL
        ZXldKTsKICAgIH0KICB9LAoKICB0ZWFyZG93bk9ic2VydmVyczogZnVuY3Rp
        b24gKGRlcGVuZGVudEFycmF5LCBkZXBlbmRlbnRLZXkpIHsKICAgIHZhciBp
        dGVtUHJvcGVydHlLZXlzID0gdGhpcy5jcC5faXRlbVByb3BlcnR5S2V5c1tk
        ZXBlbmRlbnRLZXldIHx8IFtdOwoKICAgIGRlbGV0ZSB0aGlzLmRlcGVuZGVu
        dEtleXNCeUd1aWRbZ3VpZEZvcihkZXBlbmRlbnRBcnJheSldOwoKICAgIHRo
        aXMudGVhcmRvd25Qcm9wZXJ0eU9ic2VydmVycyhkZXBlbmRlbnRLZXksIGl0
        ZW1Qcm9wZXJ0eUtleXMpOwoKICAgIGRlcGVuZGVudEFycmF5LnJlbW92ZUFy
        cmF5T2JzZXJ2ZXIodGhpcywgewogICAgICB3aWxsQ2hhbmdlOiAnZGVwZW5k
        ZW50QXJyYXlXaWxsQ2hhbmdlJywKICAgICAgZGlkQ2hhbmdlOiAnZGVwZW5k
        ZW50QXJyYXlEaWRDaGFuZ2UnCiAgICB9KTsKICB9LAoKICBzdXNwZW5kQXJy
        YXlPYnNlcnZlcnM6IGZ1bmN0aW9uIChjYWxsYmFjaywgYmluZGluZykgewog
        ICAgdmFyIG9sZFN1c3BlbmRlZCA9IHRoaXMuc3VzcGVuZGVkOwogICAgdGhp
        cy5zdXNwZW5kZWQgPSB0cnVlOwogICAgY2FsbGJhY2suY2FsbChiaW5kaW5n
        KTsKICAgIHRoaXMuc3VzcGVuZGVkID0gb2xkU3VzcGVuZGVkOwogIH0sCgog
        IHNldHVwUHJvcGVydHlPYnNlcnZlcnM6IGZ1bmN0aW9uIChkZXBlbmRlbnRL
        ZXksIGl0ZW1Qcm9wZXJ0eUtleXMpIHsKICAgIHZhciBkZXBlbmRlbnRBcnJh
        eSA9IGdldCh0aGlzLmluc3RhbmNlTWV0YS5jb250ZXh0LCBkZXBlbmRlbnRL
        ZXkpLAogICAgICAgIGxlbmd0aCA9IGdldChkZXBlbmRlbnRBcnJheSwgJ2xl
        bmd0aCcpLAogICAgICAgIG9ic2VydmVyQ29udGV4dHMgPSBuZXcgQXJyYXko
        bGVuZ3RoKTsKCiAgICB0aGlzLnJlc2V0VHJhbnNmb3JtYXRpb25zKGRlcGVu
        ZGVudEtleSwgb2JzZXJ2ZXJDb250ZXh0cyk7CgogICAgZm9yRWFjaChkZXBl
        bmRlbnRBcnJheSwgZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7CiAgICAgIHZh
        ciBvYnNlcnZlckNvbnRleHQgPSB0aGlzLmNyZWF0ZVByb3BlcnR5T2JzZXJ2
        ZXJDb250ZXh0KGRlcGVuZGVudEFycmF5LCBpbmRleCwgdGhpcy50cmFja2Vk
        QXJyYXlzQnlHdWlkW2RlcGVuZGVudEtleV0pOwogICAgICBvYnNlcnZlckNv
        bnRleHRzW2luZGV4XSA9IG9ic2VydmVyQ29udGV4dDsKCiAgICAgIGZvckVh
        Y2goaXRlbVByb3BlcnR5S2V5cywgZnVuY3Rpb24gKHByb3BlcnR5S2V5KSB7
        CiAgICAgICAgYWRkQmVmb3JlT2JzZXJ2ZXIoaXRlbSwgcHJvcGVydHlLZXks
        IHRoaXMsIG9ic2VydmVyQ29udGV4dC5iZWZvcmVPYnNlcnZlcik7CiAgICAg
        ICAgYWRkT2JzZXJ2ZXIoaXRlbSwgcHJvcGVydHlLZXksIHRoaXMsIG9ic2Vy
        dmVyQ29udGV4dC5vYnNlcnZlcik7CiAgICAgIH0sIHRoaXMpOwogICAgfSwg
        dGhpcyk7CiAgfSwKCiAgdGVhcmRvd25Qcm9wZXJ0eU9ic2VydmVyczogZnVu
        Y3Rpb24gKGRlcGVuZGVudEtleSwgaXRlbVByb3BlcnR5S2V5cykgewogICAg
        dmFyIGRlcGVuZGVudEFycmF5T2JzZXJ2ZXIgPSB0aGlzLAogICAgICAgIHRy
        YWNrZWRBcnJheSA9IHRoaXMudHJhY2tlZEFycmF5c0J5R3VpZFtkZXBlbmRl
        bnRLZXldLAogICAgICAgIGJlZm9yZU9ic2VydmVyLAogICAgICAgIG9ic2Vy
        dmVyLAogICAgICAgIGl0ZW07CgogICAgaWYgKCF0cmFja2VkQXJyYXkpIHsg
        cmV0dXJuOyB9CgogICAgdHJhY2tlZEFycmF5LmFwcGx5KGZ1bmN0aW9uIChv
        YnNlcnZlckNvbnRleHRzLCBvZmZzZXQsIG9wZXJhdGlvbikgewogICAgICBp
        ZiAob3BlcmF0aW9uID09PSBFbWJlci5UcmFja2VkQXJyYXkuREVMRVRFKSB7
        IHJldHVybjsgfQoKICAgICAgZm9yRWFjaChvYnNlcnZlckNvbnRleHRzLCBm
        dW5jdGlvbiAob2JzZXJ2ZXJDb250ZXh0KSB7CiAgICAgICAgb2JzZXJ2ZXJD
        b250ZXh0LmRlc3Ryb3llZCA9IHRydWU7CiAgICAgICAgYmVmb3JlT2JzZXJ2
        ZXIgPSBvYnNlcnZlckNvbnRleHQuYmVmb3JlT2JzZXJ2ZXI7CiAgICAgICAg
        b2JzZXJ2ZXIgPSBvYnNlcnZlckNvbnRleHQub2JzZXJ2ZXI7CiAgICAgICAg
        aXRlbSA9IG9ic2VydmVyQ29udGV4dC5pdGVtOwoKICAgICAgICBmb3JFYWNo
        KGl0ZW1Qcm9wZXJ0eUtleXMsIGZ1bmN0aW9uIChwcm9wZXJ0eUtleSkgewog
        ICAgICAgICAgcmVtb3ZlQmVmb3JlT2JzZXJ2ZXIoaXRlbSwgcHJvcGVydHlL
        ZXksIGRlcGVuZGVudEFycmF5T2JzZXJ2ZXIsIGJlZm9yZU9ic2VydmVyKTsK
        ICAgICAgICAgIHJlbW92ZU9ic2VydmVyKGl0ZW0sIHByb3BlcnR5S2V5LCBk
        ZXBlbmRlbnRBcnJheU9ic2VydmVyLCBvYnNlcnZlcik7CiAgICAgICAgfSk7
        CiAgICAgIH0pOwogICAgfSk7CiAgfSwKCiAgY3JlYXRlUHJvcGVydHlPYnNl
        cnZlckNvbnRleHQ6IGZ1bmN0aW9uIChkZXBlbmRlbnRBcnJheSwgaW5kZXgs
        IHRyYWNrZWRBcnJheSkgewogICAgdmFyIG9ic2VydmVyQ29udGV4dCA9IG5l
        dyBJdGVtUHJvcGVydHlPYnNlcnZlckNvbnRleHQoZGVwZW5kZW50QXJyYXks
        IGluZGV4LCB0cmFja2VkQXJyYXkpOwoKICAgIHRoaXMuY3JlYXRlUHJvcGVy
        dHlPYnNlcnZlcihvYnNlcnZlckNvbnRleHQpOwoKICAgIHJldHVybiBvYnNl
        cnZlckNvbnRleHQ7CiAgfSwKCiAgY3JlYXRlUHJvcGVydHlPYnNlcnZlcjog
        ZnVuY3Rpb24gKG9ic2VydmVyQ29udGV4dCkgewogICAgdmFyIGRlcGVuZGVu
        dEFycmF5T2JzZXJ2ZXIgPSB0aGlzOwoKICAgIG9ic2VydmVyQ29udGV4dC5i
        ZWZvcmVPYnNlcnZlciA9IGZ1bmN0aW9uIChvYmosIGtleU5hbWUpIHsKICAg
        ICAgcmV0dXJuIGRlcGVuZGVudEFycmF5T2JzZXJ2ZXIuaXRlbVByb3BlcnR5
        V2lsbENoYW5nZShvYmosIGtleU5hbWUsIG9ic2VydmVyQ29udGV4dC5kZXBl
        bmRlbnRBcnJheSwgb2JzZXJ2ZXJDb250ZXh0KTsKICAgIH07CiAgICBvYnNl
        cnZlckNvbnRleHQub2JzZXJ2ZXIgPSBmdW5jdGlvbiAob2JqLCBrZXlOYW1l
        KSB7CiAgICAgIHJldHVybiBkZXBlbmRlbnRBcnJheU9ic2VydmVyLml0ZW1Q
        cm9wZXJ0eURpZENoYW5nZShvYmosIGtleU5hbWUsIG9ic2VydmVyQ29udGV4
        dC5kZXBlbmRlbnRBcnJheSwgb2JzZXJ2ZXJDb250ZXh0KTsKICAgIH07CiAg
        fSwKCiAgcmVzZXRUcmFuc2Zvcm1hdGlvbnM6IGZ1bmN0aW9uIChkZXBlbmRl
        bnRLZXksIG9ic2VydmVyQ29udGV4dHMpIHsKICAgIHRoaXMudHJhY2tlZEFy
        cmF5c0J5R3VpZFtkZXBlbmRlbnRLZXldID0gbmV3IEVtYmVyLlRyYWNrZWRB
        cnJheShvYnNlcnZlckNvbnRleHRzKTsKICB9LAoKICB0cmFja0FkZDogZnVu
        Y3Rpb24gKGRlcGVuZGVudEtleSwgaW5kZXgsIG5ld0l0ZW1zKSB7CiAgICB2
        YXIgdHJhY2tlZEFycmF5ID0gdGhpcy50cmFja2VkQXJyYXlzQnlHdWlkW2Rl
        cGVuZGVudEtleV07CiAgICBpZiAodHJhY2tlZEFycmF5KSB7CiAgICAgIHRy
        YWNrZWRBcnJheS5hZGRJdGVtcyhpbmRleCwgbmV3SXRlbXMpOwogICAgfQog
        IH0sCgogIHRyYWNrUmVtb3ZlOiBmdW5jdGlvbiAoZGVwZW5kZW50S2V5LCBp
        bmRleCwgcmVtb3ZlZENvdW50KSB7CiAgICB2YXIgdHJhY2tlZEFycmF5ID0g
        dGhpcy50cmFja2VkQXJyYXlzQnlHdWlkW2RlcGVuZGVudEtleV07CgogICAg
        aWYgKHRyYWNrZWRBcnJheSkgewogICAgICByZXR1cm4gdHJhY2tlZEFycmF5
        LnJlbW92ZUl0ZW1zKGluZGV4LCByZW1vdmVkQ291bnQpOwogICAgfQoKICAg
        IHJldHVybiBbXTsKICB9LAoKICB1cGRhdGVJbmRleGVzOiBmdW5jdGlvbiAo
        dHJhY2tlZEFycmF5LCBhcnJheSkgewogICAgdmFyIGxlbmd0aCA9IGdldChh
        cnJheSwgJ2xlbmd0aCcpOwogICAgLy8gT1BUSU1JWkU6IHdlIGNvdWxkIHN0
        b3AgdXBkYXRpbmcgb25jZSB3ZSBoaXQgdGhlIG9iamVjdCB3aG9zZSBvYnNl
        cnZlcgogICAgLy8gZmlyZWQ7IGllIHBhcnRpYWxseSBhcHBseSB0aGUgdHJh
        bnNmb3JtYXRpb25zCiAgICB0cmFja2VkQXJyYXkuYXBwbHkoZnVuY3Rpb24g
        KG9ic2VydmVyQ29udGV4dHMsIG9mZnNldCwgb3BlcmF0aW9uKSB7CiAgICAg
        IC8vIHdlIGRvbid0IGV2ZW4gaGF2ZSBvYnNlcnZlciBjb250ZXh0cyBmb3Ig
        cmVtb3ZlZCBpdGVtcywgZXZlbiBpZiB3ZSBkaWQsCiAgICAgIC8vIHRoZXkg
        bm8gbG9uZ2VyIGhhdmUgYW55IGluZGV4IGluIHRoZSBhcnJheQogICAgICBp
        ZiAob3BlcmF0aW9uID09PSBFbWJlci5UcmFja2VkQXJyYXkuREVMRVRFKSB7
        IHJldHVybjsgfQogICAgICBpZiAob3BlcmF0aW9uID09PSBFbWJlci5UcmFj
        a2VkQXJyYXkuUkVUQUlOICYmIG9ic2VydmVyQ29udGV4dHMubGVuZ3RoID09
        PSBsZW5ndGggJiYgb2Zmc2V0ID09PSAwKSB7CiAgICAgICAgLy8gSWYgd2Ug
        dXBkYXRlIG1hbnkgaXRlbXMgd2UgZG9uJ3Qgd2FudCB0byB3YWxrIHRoZSBh
        cnJheSBlYWNoIHRpbWU6IHdlCiAgICAgICAgLy8gb25seSBuZWVkIHRvIHVw
        ZGF0ZSB0aGUgaW5kZXhlcyBhdCBtb3N0IG9uY2UgcGVyIHJ1biBsb29wLgog
        ICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgZm9yRWFjaChvYnNlcnZl
        ckNvbnRleHRzLCBmdW5jdGlvbiAoY29udGV4dCwgaW5kZXgpIHsKICAgICAg
        ICBjb250ZXh0LmluZGV4ID0gaW5kZXggKyBvZmZzZXQ7CiAgICAgIH0pOwog
        ICAgfSk7CiAgfSwKCiAgZGVwZW5kZW50QXJyYXlXaWxsQ2hhbmdlOiBmdW5j
        dGlvbiAoZGVwZW5kZW50QXJyYXksIGluZGV4LCByZW1vdmVkQ291bnQsIGFk
        ZGVkQ291bnQpIHsKICAgIGlmICh0aGlzLnN1c3BlbmRlZCkgeyByZXR1cm47
        IH0KCiAgICB2YXIgcmVtb3ZlZEl0ZW0gPSB0aGlzLmNhbGxiYWNrcy5yZW1v
        dmVkSXRlbSwKICAgICAgICBjaGFuZ2VNZXRhLAogICAgICAgIGd1aWQgPSBn
        dWlkRm9yKGRlcGVuZGVudEFycmF5KSwKICAgICAgICBkZXBlbmRlbnRLZXkg
        PSB0aGlzLmRlcGVuZGVudEtleXNCeUd1aWRbZ3VpZF0sCiAgICAgICAgaXRl
        bVByb3BlcnR5S2V5cyA9IHRoaXMuY3AuX2l0ZW1Qcm9wZXJ0eUtleXNbZGVw
        ZW5kZW50S2V5XSB8fCBbXSwKICAgICAgICBsZW5ndGggPSBnZXQoZGVwZW5k
        ZW50QXJyYXksICdsZW5ndGgnKSwKICAgICAgICBub3JtYWxpemVkSW5kZXgg
        PSBub3JtYWxpemVJbmRleChpbmRleCwgbGVuZ3RoLCAwKSwKICAgICAgICBu
        b3JtYWxpemVkUmVtb3ZlQ291bnQgPSBub3JtYWxpemVSZW1vdmVDb3VudChu
        b3JtYWxpemVkSW5kZXgsIGxlbmd0aCwgcmVtb3ZlZENvdW50KSwKICAgICAg
        ICBpdGVtLAogICAgICAgIGl0ZW1JbmRleCwKICAgICAgICBzbGljZUluZGV4
        LAogICAgICAgIG9ic2VydmVyQ29udGV4dHM7CgogICAgb2JzZXJ2ZXJDb250
        ZXh0cyA9IHRoaXMudHJhY2tSZW1vdmUoZGVwZW5kZW50S2V5LCBub3JtYWxp
        emVkSW5kZXgsIG5vcm1hbGl6ZWRSZW1vdmVDb3VudCk7CgogICAgZnVuY3Rp
        b24gcmVtb3ZlT2JzZXJ2ZXJzKHByb3BlcnR5S2V5KSB7CiAgICAgIG9ic2Vy
        dmVyQ29udGV4dHNbc2xpY2VJbmRleF0uZGVzdHJveWVkID0gdHJ1ZTsKICAg
        ICAgcmVtb3ZlQmVmb3JlT2JzZXJ2ZXIoaXRlbSwgcHJvcGVydHlLZXksIHRo
        aXMsIG9ic2VydmVyQ29udGV4dHNbc2xpY2VJbmRleF0uYmVmb3JlT2JzZXJ2
        ZXIpOwogICAgICByZW1vdmVPYnNlcnZlcihpdGVtLCBwcm9wZXJ0eUtleSwg
        dGhpcywgb2JzZXJ2ZXJDb250ZXh0c1tzbGljZUluZGV4XS5vYnNlcnZlcik7
        CiAgICB9CgogICAgZm9yIChzbGljZUluZGV4ID0gbm9ybWFsaXplZFJlbW92
        ZUNvdW50IC0gMTsgc2xpY2VJbmRleCA+PSAwOyAtLXNsaWNlSW5kZXgpIHsK
        ICAgICAgaXRlbUluZGV4ID0gbm9ybWFsaXplZEluZGV4ICsgc2xpY2VJbmRl
        eDsKICAgICAgaWYgKGl0ZW1JbmRleCA+PSBsZW5ndGgpIHsgYnJlYWs7IH0K
        CiAgICAgIGl0ZW0gPSBkZXBlbmRlbnRBcnJheS5vYmplY3RBdChpdGVtSW5k
        ZXgpOwoKICAgICAgZm9yRWFjaChpdGVtUHJvcGVydHlLZXlzLCByZW1vdmVP
        YnNlcnZlcnMsIHRoaXMpOwoKICAgICAgY2hhbmdlTWV0YSA9IGNyZWF0ZUNo
        YW5nZU1ldGEoZGVwZW5kZW50QXJyYXksIGl0ZW0sIGl0ZW1JbmRleCwgdGhp
        cy5pbnN0YW5jZU1ldGEucHJvcGVydHlOYW1lLCB0aGlzLmNwKTsKICAgICAg
        dGhpcy5zZXRWYWx1ZSggcmVtb3ZlZEl0ZW0uY2FsbCgKICAgICAgICB0aGlz
        Lmluc3RhbmNlTWV0YS5jb250ZXh0LCB0aGlzLmdldFZhbHVlKCksIGl0ZW0s
        IGNoYW5nZU1ldGEsIHRoaXMuaW5zdGFuY2VNZXRhLnN1Z2FyTWV0YSkpOwog
        ICAgfQogIH0sCgogIGRlcGVuZGVudEFycmF5RGlkQ2hhbmdlOiBmdW5jdGlv
        biAoZGVwZW5kZW50QXJyYXksIGluZGV4LCByZW1vdmVkQ291bnQsIGFkZGVk
        Q291bnQpIHsKICAgIGlmICh0aGlzLnN1c3BlbmRlZCkgeyByZXR1cm47IH0K
        CiAgICB2YXIgYWRkZWRJdGVtID0gdGhpcy5jYWxsYmFja3MuYWRkZWRJdGVt
        LAogICAgICAgIGd1aWQgPSBndWlkRm9yKGRlcGVuZGVudEFycmF5KSwKICAg
        ICAgICBkZXBlbmRlbnRLZXkgPSB0aGlzLmRlcGVuZGVudEtleXNCeUd1aWRb
        Z3VpZF0sCiAgICAgICAgb2JzZXJ2ZXJDb250ZXh0cyA9IG5ldyBBcnJheShh
        ZGRlZENvdW50KSwKICAgICAgICBpdGVtUHJvcGVydHlLZXlzID0gdGhpcy5j
        cC5faXRlbVByb3BlcnR5S2V5c1tkZXBlbmRlbnRLZXldLAogICAgICAgIGxl
        bmd0aCA9IGdldChkZXBlbmRlbnRBcnJheSwgJ2xlbmd0aCcpLAogICAgICAg
        IG5vcm1hbGl6ZWRJbmRleCA9IG5vcm1hbGl6ZUluZGV4KGluZGV4LCBsZW5n
        dGgsIGFkZGVkQ291bnQpLAogICAgICAgIGNoYW5nZU1ldGEsCiAgICAgICAg
        b2JzZXJ2ZXJDb250ZXh0OwoKICAgIGZvckVhY2goZGVwZW5kZW50QXJyYXku
        c2xpY2Uobm9ybWFsaXplZEluZGV4LCBub3JtYWxpemVkSW5kZXggKyBhZGRl
        ZENvdW50KSwgZnVuY3Rpb24gKGl0ZW0sIHNsaWNlSW5kZXgpIHsKICAgICAg
        aWYgKGl0ZW1Qcm9wZXJ0eUtleXMpIHsKICAgICAgICBvYnNlcnZlckNvbnRl
        eHQgPQogICAgICAgICAgb2JzZXJ2ZXJDb250ZXh0c1tzbGljZUluZGV4XSA9
        CiAgICAgICAgICB0aGlzLmNyZWF0ZVByb3BlcnR5T2JzZXJ2ZXJDb250ZXh0
        KGRlcGVuZGVudEFycmF5LCBub3JtYWxpemVkSW5kZXggKyBzbGljZUluZGV4
        LCB0aGlzLnRyYWNrZWRBcnJheXNCeUd1aWRbZGVwZW5kZW50S2V5XSk7CiAg
        ICAgICAgZm9yRWFjaChpdGVtUHJvcGVydHlLZXlzLCBmdW5jdGlvbiAocHJv
        cGVydHlLZXkpIHsKICAgICAgICAgIGFkZEJlZm9yZU9ic2VydmVyKGl0ZW0s
        IHByb3BlcnR5S2V5LCB0aGlzLCBvYnNlcnZlckNvbnRleHQuYmVmb3JlT2Jz
        ZXJ2ZXIpOwogICAgICAgICAgYWRkT2JzZXJ2ZXIoaXRlbSwgcHJvcGVydHlL
        ZXksIHRoaXMsIG9ic2VydmVyQ29udGV4dC5vYnNlcnZlcik7CiAgICAgICAg
        fSwgdGhpcyk7CiAgICAgIH0KCiAgICAgIGNoYW5nZU1ldGEgPSBjcmVhdGVD
        aGFuZ2VNZXRhKGRlcGVuZGVudEFycmF5LCBpdGVtLCBub3JtYWxpemVkSW5k
        ZXggKyBzbGljZUluZGV4LCB0aGlzLmluc3RhbmNlTWV0YS5wcm9wZXJ0eU5h
        bWUsIHRoaXMuY3ApOwogICAgICB0aGlzLnNldFZhbHVlKCBhZGRlZEl0ZW0u
        Y2FsbCgKICAgICAgICB0aGlzLmluc3RhbmNlTWV0YS5jb250ZXh0LCB0aGlz
        LmdldFZhbHVlKCksIGl0ZW0sIGNoYW5nZU1ldGEsIHRoaXMuaW5zdGFuY2VN
        ZXRhLnN1Z2FyTWV0YSkpOwogICAgfSwgdGhpcyk7CgogICAgdGhpcy50cmFj
        a0FkZChkZXBlbmRlbnRLZXksIG5vcm1hbGl6ZWRJbmRleCwgb2JzZXJ2ZXJD
        b250ZXh0cyk7CiAgfSwKCiAgaXRlbVByb3BlcnR5V2lsbENoYW5nZTogZnVu
        Y3Rpb24gKG9iaiwga2V5TmFtZSwgYXJyYXksIG9ic2VydmVyQ29udGV4dCkg
        ewogICAgdmFyIGd1aWQgPSBndWlkRm9yKG9iaik7CgogICAgaWYgKCF0aGlz
        LmNoYW5nZWRJdGVtc1tndWlkXSkgewogICAgICB0aGlzLmNoYW5nZWRJdGVt
        c1tndWlkXSA9IHsKICAgICAgICBhcnJheTogICAgICAgICAgICBhcnJheSwK
        ICAgICAgICBvYnNlcnZlckNvbnRleHQ6ICBvYnNlcnZlckNvbnRleHQsCiAg
        ICAgICAgb2JqOiAgICAgICAgICAgICAgb2JqLAogICAgICAgIHByZXZpb3Vz
        VmFsdWVzOiAgIHt9CiAgICAgIH07CiAgICB9CgogICAgdGhpcy5jaGFuZ2Vk
        SXRlbXNbZ3VpZF0ucHJldmlvdXNWYWx1ZXNba2V5TmFtZV0gPSBnZXQob2Jq
        LCBrZXlOYW1lKTsKICB9LAoKICBpdGVtUHJvcGVydHlEaWRDaGFuZ2U6IGZ1
        bmN0aW9uKG9iaiwga2V5TmFtZSwgYXJyYXksIG9ic2VydmVyQ29udGV4dCkg
        ewogICAgdGhpcy5mbHVzaENoYW5nZXMoKTsKICB9LAoKICBmbHVzaENoYW5n
        ZXM6IGZ1bmN0aW9uKCkgewogICAgdmFyIGNoYW5nZWRJdGVtcyA9IHRoaXMu
        Y2hhbmdlZEl0ZW1zLCBrZXksIGMsIGNoYW5nZU1ldGE7CgogICAgZm9yIChr
        ZXkgaW4gY2hhbmdlZEl0ZW1zKSB7CiAgICAgIGMgPSBjaGFuZ2VkSXRlbXNb
        a2V5XTsKICAgICAgaWYgKGMub2JzZXJ2ZXJDb250ZXh0LmRlc3Ryb3llZCkg
        eyBjb250aW51ZTsgfQoKICAgICAgdGhpcy51cGRhdGVJbmRleGVzKGMub2Jz
        ZXJ2ZXJDb250ZXh0LnRyYWNrZWRBcnJheSwgYy5vYnNlcnZlckNvbnRleHQu
        ZGVwZW5kZW50QXJyYXkpOwoKICAgICAgY2hhbmdlTWV0YSA9IGNyZWF0ZUNo
        YW5nZU1ldGEoYy5hcnJheSwgYy5vYmosIGMub2JzZXJ2ZXJDb250ZXh0Lmlu
        ZGV4LCB0aGlzLmluc3RhbmNlTWV0YS5wcm9wZXJ0eU5hbWUsIHRoaXMuY3As
        IGMucHJldmlvdXNWYWx1ZXMpOwogICAgICB0aGlzLnNldFZhbHVlKAogICAg
        ICAgIHRoaXMuY2FsbGJhY2tzLnJlbW92ZWRJdGVtLmNhbGwodGhpcy5pbnN0
        YW5jZU1ldGEuY29udGV4dCwgdGhpcy5nZXRWYWx1ZSgpLCBjLm9iaiwgY2hh
        bmdlTWV0YSwgdGhpcy5pbnN0YW5jZU1ldGEuc3VnYXJNZXRhKSk7CiAgICAg
        IHRoaXMuc2V0VmFsdWUoCiAgICAgICAgdGhpcy5jYWxsYmFja3MuYWRkZWRJ
        dGVtLmNhbGwodGhpcy5pbnN0YW5jZU1ldGEuY29udGV4dCwgdGhpcy5nZXRW
        YWx1ZSgpLCBjLm9iaiwgY2hhbmdlTWV0YSwgdGhpcy5pbnN0YW5jZU1ldGEu
        c3VnYXJNZXRhKSk7CiAgICB9CiAgICB0aGlzLmNoYW5nZWRJdGVtcyA9IHt9
        OwogIH0KfTsKCmZ1bmN0aW9uIG5vcm1hbGl6ZUluZGV4KGluZGV4LCBsZW5n
        dGgsIG5ld0l0ZW1zT2Zmc2V0KSB7CiAgaWYgKGluZGV4IDwgMCkgewogICAg
        cmV0dXJuIE1hdGgubWF4KDAsIGxlbmd0aCArIGluZGV4KTsKICB9IGVsc2Ug
        aWYgKGluZGV4IDwgbGVuZ3RoKSB7CiAgICByZXR1cm4gaW5kZXg7CiAgfSBl
        bHNlIC8qIGluZGV4ID4gbGVuZ3RoICovIHsKICAgIHJldHVybiBNYXRoLm1p
        bihsZW5ndGggLSBuZXdJdGVtc09mZnNldCwgaW5kZXgpOwogIH0KfQoKZnVu
        Y3Rpb24gbm9ybWFsaXplUmVtb3ZlQ291bnQoaW5kZXgsIGxlbmd0aCwgcmVt
        b3ZlZENvdW50KSB7CiAgcmV0dXJuIE1hdGgubWluKHJlbW92ZWRDb3VudCwg
        bGVuZ3RoIC0gaW5kZXgpOwp9CgpmdW5jdGlvbiBjcmVhdGVDaGFuZ2VNZXRh
        KGRlcGVuZGVudEFycmF5LCBpdGVtLCBpbmRleCwgcHJvcGVydHlOYW1lLCBw
        cm9wZXJ0eSwgcHJldmlvdXNWYWx1ZXMpIHsKICB2YXIgbWV0YSA9IHsKICAg
        IGFycmF5Q2hhbmdlZDogZGVwZW5kZW50QXJyYXksCiAgICBpbmRleDogaW5k
        ZXgsCiAgICBpdGVtOiBpdGVtLAogICAgcHJvcGVydHlOYW1lOiBwcm9wZXJ0
        eU5hbWUsCiAgICBwcm9wZXJ0eTogcHJvcGVydHkKICB9OwoKICBpZiAocHJl
        dmlvdXNWYWx1ZXMpIHsKICAgIC8vIHByZXZpb3VzIHZhbHVlcyBvbmx5IGF2
        YWlsYWJsZSBmb3IgaXRlbSBwcm9wZXJ0eSBjaGFuZ2VzCiAgICBtZXRhLnBy
        ZXZpb3VzVmFsdWVzID0gcHJldmlvdXNWYWx1ZXM7CiAgfQoKICByZXR1cm4g
        bWV0YTsKfQoKZnVuY3Rpb24gYWRkSXRlbXMgKGRlcGVuZGVudEFycmF5LCBj
        YWxsYmFja3MsIGNwLCBwcm9wZXJ0eU5hbWUsIG1ldGEpIHsKICBmb3JFYWNo
        KGRlcGVuZGVudEFycmF5LCBmdW5jdGlvbiAoaXRlbSwgaW5kZXgpIHsKICAg
        IG1ldGEuc2V0VmFsdWUoIGNhbGxiYWNrcy5hZGRlZEl0ZW0uY2FsbCgKICAg
        ICAgdGhpcywgbWV0YS5nZXRWYWx1ZSgpLCBpdGVtLCBjcmVhdGVDaGFuZ2VN
        ZXRhKGRlcGVuZGVudEFycmF5LCBpdGVtLCBpbmRleCwgcHJvcGVydHlOYW1l
        LCBjcCksIG1ldGEuc3VnYXJNZXRhKSk7CiAgfSwgdGhpcyk7Cn0KCmZ1bmN0
        aW9uIHJlc2V0KGNwLCBwcm9wZXJ0eU5hbWUpIHsKICB2YXIgY2FsbGJhY2tz
        ID0gY3AuX2NhbGxiYWNrcygpLAogICAgICBtZXRhOwoKICBpZiAoY3AuX2hh
        c0luc3RhbmNlTWV0YSh0aGlzLCBwcm9wZXJ0eU5hbWUpKSB7CiAgICBtZXRh
        ID0gY3AuX2luc3RhbmNlTWV0YSh0aGlzLCBwcm9wZXJ0eU5hbWUpOwogICAg
        bWV0YS5zZXRWYWx1ZShjcC5yZXNldFZhbHVlKG1ldGEuZ2V0VmFsdWUoKSkp
        OwogIH0gZWxzZSB7CiAgICBtZXRhID0gY3AuX2luc3RhbmNlTWV0YSh0aGlz
        LCBwcm9wZXJ0eU5hbWUpOwogIH0KCiAgaWYgKGNwLm9wdGlvbnMuaW5pdGlh
        bGl6ZSkgewogICAgY3Aub3B0aW9ucy5pbml0aWFsaXplLmNhbGwodGhpcywg
        bWV0YS5nZXRWYWx1ZSgpLCB7IHByb3BlcnR5OiBjcCwgcHJvcGVydHlOYW1l
        OiBwcm9wZXJ0eU5hbWUgfSwgbWV0YS5zdWdhck1ldGEpOwogIH0KfQoKZnVu
        Y3Rpb24gcGFydGlhbGx5UmVjb21wdXRlRm9yKG9iaiwgZGVwZW5kZW50S2V5
        KSB7CiAgaWYgKGFycmF5QnJhY2tldFBhdHRlcm4udGVzdChkZXBlbmRlbnRL
        ZXkpKSB7CiAgICByZXR1cm4gZmFsc2U7CiAgfQoKICB2YXIgdmFsdWUgPSBn
        ZXQob2JqLCBkZXBlbmRlbnRLZXkpOwogIHJldHVybiBFbWJlci5BcnJheS5k
        ZXRlY3QodmFsdWUpOwp9CgpmdW5jdGlvbiBSZWR1Y2VDb21wdXRlZFByb3Bl
        cnR5SW5zdGFuY2VNZXRhKGNvbnRleHQsIHByb3BlcnR5TmFtZSwgaW5pdGlh
        bFZhbHVlKSB7CiAgdGhpcy5jb250ZXh0ID0gY29udGV4dDsKICB0aGlzLnBy
        b3BlcnR5TmFtZSA9IHByb3BlcnR5TmFtZTsKICB0aGlzLmNhY2hlID0gbWV0
        YUZvcihjb250ZXh0KS5jYWNoZTsKCiAgdGhpcy5kZXBlbmRlbnRBcnJheXMg
        PSB7fTsKICB0aGlzLnN1Z2FyTWV0YSA9IHt9OwoKICB0aGlzLmluaXRpYWxW
        YWx1ZSA9IGluaXRpYWxWYWx1ZTsKfQoKUmVkdWNlQ29tcHV0ZWRQcm9wZXJ0
        eUluc3RhbmNlTWV0YS5wcm90b3R5cGUgPSB7CiAgZ2V0VmFsdWU6IGZ1bmN0
        aW9uICgpIHsKICAgIGlmICh0aGlzLnByb3BlcnR5TmFtZSBpbiB0aGlzLmNh
        Y2hlKSB7CiAgICAgIHJldHVybiB0aGlzLmNhY2hlW3RoaXMucHJvcGVydHlO
        YW1lXTsKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiB0aGlzLmluaXRpYWxW
        YWx1ZTsKICAgIH0KICB9LAoKICBzZXRWYWx1ZTogZnVuY3Rpb24obmV3VmFs
        dWUsIHRyaWdnZXJPYnNlcnZlcnMpIHsKICAgIC8vIFRoaXMgbGV0cyBzdWdh
        cnMgZm9yY2UgYSByZWNvbXB1dGF0aW9uLCBoYW5keSBmb3IgdmVyeSBzaW1w
        bGUKICAgIC8vIGltcGxlbWVudGF0aW9ucyBvZiBlZyBtYXguCiAgICBpZiAo
        bmV3VmFsdWUgPT09IHRoaXMuY2FjaGVbdGhpcy5wcm9wZXJ0eU5hbWVdKSB7
        CiAgICAgIHJldHVybjsKICAgIH0KCiAgICBpZiAodHJpZ2dlck9ic2VydmVy
        cykgewogICAgICBwcm9wZXJ0eVdpbGxDaGFuZ2UodGhpcy5jb250ZXh0LCB0
        aGlzLnByb3BlcnR5TmFtZSk7CiAgICB9CgogICAgaWYgKG5ld1ZhbHVlID09
        PSB1bmRlZmluZWQpIHsKICAgICAgZGVsZXRlIHRoaXMuY2FjaGVbdGhpcy5w
        cm9wZXJ0eU5hbWVdOwogICAgfSBlbHNlIHsKICAgICAgdGhpcy5jYWNoZVt0
        aGlzLnByb3BlcnR5TmFtZV0gPSBuZXdWYWx1ZTsKICAgIH0KCiAgICBpZiAo
        dHJpZ2dlck9ic2VydmVycykgewogICAgICBwcm9wZXJ0eURpZENoYW5nZSh0
        aGlzLmNvbnRleHQsIHRoaXMucHJvcGVydHlOYW1lKTsKICAgIH0KICB9Cn07
        CgovKioKICBBIGNvbXB1dGVkIHByb3BlcnR5IHdob3NlIGRlcGVuZGVudCBr
        ZXlzIGFyZSBhcnJheXMgYW5kIHdoaWNoIGlzIHVwZGF0ZWQgd2l0aAogICJv
        bmUgYXQgYSB0aW1lIiBzZW1hbnRpY3MuCgogIEBjbGFzcyBSZWR1Y2VDb21w
        dXRlZFByb3BlcnR5CiAgQG5hbWVzcGFjZSBFbWJlcgogIEBleHRlbmRzIEVt
        YmVyLkNvbXB1dGVkUHJvcGVydHkKICBAY29uc3RydWN0b3IKKi8KZnVuY3Rp
        b24gUmVkdWNlQ29tcHV0ZWRQcm9wZXJ0eShvcHRpb25zKSB7CiAgdmFyIGNw
        ID0gdGhpczsKCiAgdGhpcy5vcHRpb25zID0gb3B0aW9uczsKICB0aGlzLl9p
        bnN0YW5jZU1ldGFzID0ge307CgogIHRoaXMuX2RlcGVuZGVudEtleXMgPSBu
        dWxsOwogIC8vIEEgbWFwIG9mIGRlcGVuZGVudEtleSAtPiBbaXRlbVByb3Bl
        cnR5LCAuLi5dIHRoYXQgdHJhY2tzIHdoYXQgcHJvcGVydGllcyBvZgogIC8v
        IGl0ZW1zIGluIHRoZSBhcnJheSB3ZSBtdXN0IHRyYWNrIHRvIHVwZGF0ZSB0
        aGlzIHByb3BlcnR5LgogIHRoaXMuX2l0ZW1Qcm9wZXJ0eUtleXMgPSB7fTsK
        ICB0aGlzLl9wcmV2aW91c0l0ZW1Qcm9wZXJ0eUtleXMgPSB7fTsKCiAgdGhp
        cy5yZWFkT25seSgpOwogIHRoaXMuY2FjaGVhYmxlKCk7CgogIHRoaXMucmVj
        b21wdXRlT25jZSA9IGZ1bmN0aW9uKHByb3BlcnR5TmFtZSkgewogICAgLy8g
        V2hhdCB3ZSByZWFsbHkgd2FudCB0byBkbyBpcyBjb2FsZXNjZSBieSA8Y3As
        IHByb3BlcnR5TmFtZT4uCiAgICAvLyBXZSBuZWVkIGEgZm9ybSBvZiBgc2No
        ZWR1bGVPbmNlYCB0aGF0IGFjY2VwdHMgYW4gYXJiaXRyYXJ5IHRva2VuIHRv
        CiAgICAvLyBjb2FsZXNjZSBieSwgaW4gYWRkaXRpb24gdG8gdGhlIHRhcmdl
        dCBhbmQgbWV0aG9kLgogICAgRW1iZXIucnVuLm9uY2UodGhpcywgcmVjb21w
        dXRlLCBwcm9wZXJ0eU5hbWUpOwogIH07CiAgdmFyIHJlY29tcHV0ZSA9IGZ1
        bmN0aW9uKHByb3BlcnR5TmFtZSkgewogICAgdmFyIGRlcGVuZGVudEtleXMg
        PSBjcC5fZGVwZW5kZW50S2V5cywKICAgICAgICBtZXRhID0gY3AuX2luc3Rh
        bmNlTWV0YSh0aGlzLCBwcm9wZXJ0eU5hbWUpLAogICAgICAgIGNhbGxiYWNr
        cyA9IGNwLl9jYWxsYmFja3MoKTsKCiAgICByZXNldC5jYWxsKHRoaXMsIGNw
        LCBwcm9wZXJ0eU5hbWUpOwoKICAgIG1ldGEuZGVwZW5kZW50QXJyYXlzT2Jz
        ZXJ2ZXIuc3VzcGVuZEFycmF5T2JzZXJ2ZXJzKGZ1bmN0aW9uICgpIHsKICAg
        ICAgZm9yRWFjaChjcC5fZGVwZW5kZW50S2V5cywgZnVuY3Rpb24gKGRlcGVu
        ZGVudEtleSkgewogICAgICAgIGlmICghcGFydGlhbGx5UmVjb21wdXRlRm9y
        KHRoaXMsIGRlcGVuZGVudEtleSkpIHsgcmV0dXJuOyB9CgogICAgICAgIHZh
        ciBkZXBlbmRlbnRBcnJheSA9IGdldCh0aGlzLCBkZXBlbmRlbnRLZXkpLAog
        ICAgICAgICAgICBwcmV2aW91c0RlcGVuZGVudEFycmF5ID0gbWV0YS5kZXBl
        bmRlbnRBcnJheXNbZGVwZW5kZW50S2V5XTsKCiAgICAgICAgaWYgKGRlcGVu
        ZGVudEFycmF5ID09PSBwcmV2aW91c0RlcGVuZGVudEFycmF5KSB7CiAgICAg
        ICAgICAvLyBUaGUgYXJyYXkgbWF5IGJlIHRoZSBzYW1lLCBidXQgb3VyIGl0
        ZW0gcHJvcGVydHkga2V5cyBtYXkgaGF2ZQogICAgICAgICAgLy8gY2hhbmdl
        ZCwgc28gd2Ugc2V0IHRoZW0gdXAgYWdhaW4uICBXZSBjYW4ndCBlYXNpbHkg
        dGVsbCBpZiB0aGV5J3ZlCiAgICAgICAgICAvLyBjaGFuZ2VkOiB0aGUgYXJy
        YXkgbWF5IGJlIHRoZSBzYW1lIG9iamVjdCwgYnV0IHdpdGggZGlmZmVyZW50
        CiAgICAgICAgICAvLyBjb250ZW50cy4KICAgICAgICAgIGlmIChjcC5fcHJl
        dmlvdXNJdGVtUHJvcGVydHlLZXlzW2RlcGVuZGVudEtleV0pIHsKICAgICAg
        ICAgICAgZGVsZXRlIGNwLl9wcmV2aW91c0l0ZW1Qcm9wZXJ0eUtleXNbZGVw
        ZW5kZW50S2V5XTsKICAgICAgICAgICAgbWV0YS5kZXBlbmRlbnRBcnJheXNP
        YnNlcnZlci5zZXR1cFByb3BlcnR5T2JzZXJ2ZXJzKGRlcGVuZGVudEtleSwg
        Y3AuX2l0ZW1Qcm9wZXJ0eUtleXNbZGVwZW5kZW50S2V5XSk7CiAgICAgICAg
        ICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIG1ldGEuZGVwZW5kZW50
        QXJyYXlzW2RlcGVuZGVudEtleV0gPSBkZXBlbmRlbnRBcnJheTsKCiAgICAg
        ICAgICBpZiAocHJldmlvdXNEZXBlbmRlbnRBcnJheSkgewogICAgICAgICAg
        ICBtZXRhLmRlcGVuZGVudEFycmF5c09ic2VydmVyLnRlYXJkb3duT2JzZXJ2
        ZXJzKHByZXZpb3VzRGVwZW5kZW50QXJyYXksIGRlcGVuZGVudEtleSk7CiAg
        ICAgICAgICB9CgogICAgICAgICAgaWYgKGRlcGVuZGVudEFycmF5KSB7CiAg
        ICAgICAgICAgIG1ldGEuZGVwZW5kZW50QXJyYXlzT2JzZXJ2ZXIuc2V0dXBP
        YnNlcnZlcnMoZGVwZW5kZW50QXJyYXksIGRlcGVuZGVudEtleSk7CiAgICAg
        ICAgICB9CiAgICAgICAgfQogICAgICB9LCB0aGlzKTsKICAgIH0sIHRoaXMp
        OwoKICAgIGZvckVhY2goY3AuX2RlcGVuZGVudEtleXMsIGZ1bmN0aW9uKGRl
        cGVuZGVudEtleSkgewogICAgICBpZiAoIXBhcnRpYWxseVJlY29tcHV0ZUZv
        cih0aGlzLCBkZXBlbmRlbnRLZXkpKSB7IHJldHVybjsgfQoKICAgICAgdmFy
        IGRlcGVuZGVudEFycmF5ID0gZ2V0KHRoaXMsIGRlcGVuZGVudEtleSk7CiAg
        ICAgIGlmIChkZXBlbmRlbnRBcnJheSkgewogICAgICAgIGFkZEl0ZW1zLmNh
        bGwodGhpcywgZGVwZW5kZW50QXJyYXksIGNhbGxiYWNrcywgY3AsIHByb3Bl
        cnR5TmFtZSwgbWV0YSk7CiAgICAgIH0KICAgIH0sIHRoaXMpOwogIH07CgoK
        ICB0aGlzLmZ1bmMgPSBmdW5jdGlvbiAocHJvcGVydHlOYW1lKSB7CiAgICBF
        bWJlci5hc3NlcnQoIkNvbXB1dGVkIHJlZHVjZSB2YWx1ZXMgcmVxdWlyZSBh
        dCBsZWFzdCBvbmUgZGVwZW5kZW50IGtleSIsIGNwLl9kZXBlbmRlbnRLZXlz
        KTsKCiAgICByZWNvbXB1dGUuY2FsbCh0aGlzLCBwcm9wZXJ0eU5hbWUpOwoK
        ICAgIHJldHVybiBjcC5faW5zdGFuY2VNZXRhKHRoaXMsIHByb3BlcnR5TmFt
        ZSkuZ2V0VmFsdWUoKTsKICB9Owp9CgpFbWJlci5SZWR1Y2VDb21wdXRlZFBy
        b3BlcnR5ID0gUmVkdWNlQ29tcHV0ZWRQcm9wZXJ0eTsKUmVkdWNlQ29tcHV0
        ZWRQcm9wZXJ0eS5wcm90b3R5cGUgPSBvX2NyZWF0ZShDb21wdXRlZFByb3Bl
        cnR5LnByb3RvdHlwZSk7CgpmdW5jdGlvbiBkZWZhdWx0Q2FsbGJhY2soY29t
        cHV0ZWRWYWx1ZSkgewogIHJldHVybiBjb21wdXRlZFZhbHVlOwp9CgpSZWR1
        Y2VDb21wdXRlZFByb3BlcnR5LnByb3RvdHlwZS5fY2FsbGJhY2tzID0gZnVu
        Y3Rpb24gKCkgewogIGlmICghdGhpcy5jYWxsYmFja3MpIHsKICAgIHZhciBv
        cHRpb25zID0gdGhpcy5vcHRpb25zOwogICAgdGhpcy5jYWxsYmFja3MgPSB7
        CiAgICAgIHJlbW92ZWRJdGVtOiBvcHRpb25zLnJlbW92ZWRJdGVtIHx8IGRl
        ZmF1bHRDYWxsYmFjaywKICAgICAgYWRkZWRJdGVtOiBvcHRpb25zLmFkZGVk
        SXRlbSB8fCBkZWZhdWx0Q2FsbGJhY2sKICAgIH07CiAgfQogIHJldHVybiB0
        aGlzLmNhbGxiYWNrczsKfTsKClJlZHVjZUNvbXB1dGVkUHJvcGVydHkucHJv
        dG90eXBlLl9oYXNJbnN0YW5jZU1ldGEgPSBmdW5jdGlvbiAoY29udGV4dCwg
        cHJvcGVydHlOYW1lKSB7CiAgdmFyIGd1aWQgPSBndWlkRm9yKGNvbnRleHQp
        LAogICAgICBrZXkgPSBndWlkICsgJzonICsgcHJvcGVydHlOYW1lOwoKICBy
        ZXR1cm4gISF0aGlzLl9pbnN0YW5jZU1ldGFzW2tleV07Cn07CgpSZWR1Y2VD
        b21wdXRlZFByb3BlcnR5LnByb3RvdHlwZS5faW5zdGFuY2VNZXRhID0gZnVu
        Y3Rpb24gKGNvbnRleHQsIHByb3BlcnR5TmFtZSkgewogIHZhciBndWlkID0g
        Z3VpZEZvcihjb250ZXh0KSwKICAgICAga2V5ID0gZ3VpZCArICc6JyArIHBy
        b3BlcnR5TmFtZSwKICAgICAgbWV0YSA9IHRoaXMuX2luc3RhbmNlTWV0YXNb
        a2V5XTsKCiAgaWYgKCFtZXRhKSB7CiAgICBtZXRhID0gdGhpcy5faW5zdGFu
        Y2VNZXRhc1trZXldID0gbmV3IFJlZHVjZUNvbXB1dGVkUHJvcGVydHlJbnN0
        YW5jZU1ldGEoY29udGV4dCwgcHJvcGVydHlOYW1lLCB0aGlzLmluaXRpYWxW
        YWx1ZSgpKTsKICAgIG1ldGEuZGVwZW5kZW50QXJyYXlzT2JzZXJ2ZXIgPSBu
        ZXcgRGVwZW5kZW50QXJyYXlzT2JzZXJ2ZXIodGhpcy5fY2FsbGJhY2tzKCks
        IHRoaXMsIG1ldGEsIGNvbnRleHQsIHByb3BlcnR5TmFtZSwgbWV0YS5zdWdh
        ck1ldGEpOwogIH0KCiAgcmV0dXJuIG1ldGE7Cn07CgpSZWR1Y2VDb21wdXRl
        ZFByb3BlcnR5LnByb3RvdHlwZS5pbml0aWFsVmFsdWUgPSBmdW5jdGlvbiAo
        KSB7CiAgaWYgKHR5cGVvZiB0aGlzLm9wdGlvbnMuaW5pdGlhbFZhbHVlID09
        PSAnZnVuY3Rpb24nKSB7CiAgICByZXR1cm4gdGhpcy5vcHRpb25zLmluaXRp
        YWxWYWx1ZSgpOwogIH0KICBlbHNlIHsKICAgIHJldHVybiB0aGlzLm9wdGlv
        bnMuaW5pdGlhbFZhbHVlOwogIH0KfTsKClJlZHVjZUNvbXB1dGVkUHJvcGVy
        dHkucHJvdG90eXBlLnJlc2V0VmFsdWUgPSBmdW5jdGlvbiAodmFsdWUpIHsK
        ICByZXR1cm4gdGhpcy5pbml0aWFsVmFsdWUoKTsKfTsKClJlZHVjZUNvbXB1
        dGVkUHJvcGVydHkucHJvdG90eXBlLml0ZW1Qcm9wZXJ0eUtleSA9IGZ1bmN0
        aW9uIChkZXBlbmRlbnRBcnJheUtleSwgaXRlbVByb3BlcnR5S2V5KSB7CiAg
        dGhpcy5faXRlbVByb3BlcnR5S2V5c1tkZXBlbmRlbnRBcnJheUtleV0gPSB0
        aGlzLl9pdGVtUHJvcGVydHlLZXlzW2RlcGVuZGVudEFycmF5S2V5XSB8fCBb
        XTsKICB0aGlzLl9pdGVtUHJvcGVydHlLZXlzW2RlcGVuZGVudEFycmF5S2V5
        XS5wdXNoKGl0ZW1Qcm9wZXJ0eUtleSk7Cn07CgpSZWR1Y2VDb21wdXRlZFBy
        b3BlcnR5LnByb3RvdHlwZS5jbGVhckl0ZW1Qcm9wZXJ0eUtleXMgPSBmdW5j
        dGlvbiAoZGVwZW5kZW50QXJyYXlLZXkpIHsKICBpZiAodGhpcy5faXRlbVBy
        b3BlcnR5S2V5c1tkZXBlbmRlbnRBcnJheUtleV0pIHsKICAgIHRoaXMuX3By
        ZXZpb3VzSXRlbVByb3BlcnR5S2V5c1tkZXBlbmRlbnRBcnJheUtleV0gPSB0
        aGlzLl9pdGVtUHJvcGVydHlLZXlzW2RlcGVuZGVudEFycmF5S2V5XTsKICAg
        IHRoaXMuX2l0ZW1Qcm9wZXJ0eUtleXNbZGVwZW5kZW50QXJyYXlLZXldID0g
        W107CiAgfQp9OwoKUmVkdWNlQ29tcHV0ZWRQcm9wZXJ0eS5wcm90b3R5cGUu
        cHJvcGVydHkgPSBmdW5jdGlvbiAoKSB7CiAgdmFyIGNwID0gdGhpcywKICAg
        ICAgYXJncyA9IGFfc2xpY2UuY2FsbChhcmd1bWVudHMpLAogICAgICBwcm9w
        ZXJ0eUFyZ3MgPSBuZXcgRW1iZXIuU2V0KCksCiAgICAgIG1hdGNoLAogICAg
        ICBkZXBlbmRlbnRBcnJheUtleSwKICAgICAgaXRlbVByb3BlcnR5S2V5OwoK
        ICBmb3JFYWNoKGFfc2xpY2UuY2FsbChhcmd1bWVudHMpLCBmdW5jdGlvbiAo
        ZGVwZW5kZW50S2V5KSB7CiAgICBpZiAoZG91YmxlRWFjaFByb3BlcnR5UGF0
        dGVybi50ZXN0KGRlcGVuZGVudEtleSkpIHsKICAgICAgdGhyb3cgbmV3IEVt
        YmVyLkVycm9yKCJOZXN0ZWQgQGVhY2ggcHJvcGVydGllcyBub3Qgc3VwcG9y
        dGVkOiAiICsgZGVwZW5kZW50S2V5KTsKICAgIH0gZWxzZSBpZiAobWF0Y2gg
        PSBlYWNoUHJvcGVydHlQYXR0ZXJuLmV4ZWMoZGVwZW5kZW50S2V5KSkgewog
        ICAgICBkZXBlbmRlbnRBcnJheUtleSA9IG1hdGNoWzFdOwoKICAgICAgdmFy
        IGl0ZW1Qcm9wZXJ0eUtleVBhdHRlcm4gPSBtYXRjaFsyXSwKICAgICAgICAg
        IGFkZEl0ZW1Qcm9wZXJ0eUtleSA9IGZ1bmN0aW9uIChpdGVtUHJvcGVydHlL
        ZXkpIHsKICAgICAgICAgICAgY3AuaXRlbVByb3BlcnR5S2V5KGRlcGVuZGVu
        dEFycmF5S2V5LCBpdGVtUHJvcGVydHlLZXkpOwogICAgICAgICAgfTsKCiAg
        ICAgIGV4cGFuZFByb3BlcnRpZXMoaXRlbVByb3BlcnR5S2V5UGF0dGVybiwg
        YWRkSXRlbVByb3BlcnR5S2V5KTsKICAgICAgcHJvcGVydHlBcmdzLmFkZChk
        ZXBlbmRlbnRBcnJheUtleSk7CiAgICB9IGVsc2UgewogICAgICBwcm9wZXJ0
        eUFyZ3MuYWRkKGRlcGVuZGVudEtleSk7CiAgICB9CiAgfSk7CgogIHJldHVy
        biBDb21wdXRlZFByb3BlcnR5LnByb3RvdHlwZS5wcm9wZXJ0eS5hcHBseSh0
        aGlzLCBwcm9wZXJ0eUFyZ3MudG9BcnJheSgpKTsKCn07CgovKioKICBDcmVh
        dGVzIGEgY29tcHV0ZWQgcHJvcGVydHkgd2hpY2ggb3BlcmF0ZXMgb24gZGVw
        ZW5kZW50IGFycmF5cyBhbmQKICBpcyB1cGRhdGVkIHdpdGggIm9uZSBhdCBh
        IHRpbWUiIHNlbWFudGljcy4gV2hlbiBpdGVtcyBhcmUgYWRkZWQgb3IKICBy
        ZW1vdmVkIGZyb20gdGhlIGRlcGVuZGVudCBhcnJheShzKSBhIHJlZHVjZSBj
        b21wdXRlZCBvbmx5IG9wZXJhdGVzCiAgb24gdGhlIGNoYW5nZSBpbnN0ZWFk
        IG9mIHJlLWV2YWx1YXRpbmcgdGhlIGVudGlyZSBhcnJheS4KCiAgSWYgdGhl
        cmUgYXJlIG1vcmUgdGhhbiBvbmUgYXJndW1lbnRzIHRoZSBmaXJzdCBhcmd1
        bWVudHMgYXJlCiAgY29uc2lkZXJlZCB0byBiZSBkZXBlbmRlbnQgcHJvcGVy
        dHkga2V5cy4gVGhlIGxhc3QgYXJndW1lbnQgaXMKICByZXF1aXJlZCB0byBi
        ZSBhbiBvcHRpb25zIG9iamVjdC4gVGhlIG9wdGlvbnMgb2JqZWN0IGNhbiBo
        YXZlIHRoZQogIGZvbGxvd2luZyBmb3VyIHByb3BlcnRpZXM6CgogIGBpbml0
        aWFsVmFsdWVgIC0gQSB2YWx1ZSBvciBmdW5jdGlvbiB0aGF0IHdpbGwgYmUg
        dXNlZCBhcyB0aGUgaW5pdGlhbAogIHZhbHVlIGZvciB0aGUgY29tcHV0ZWQu
        IElmIHRoaXMgcHJvcGVydHkgaXMgYSBmdW5jdGlvbiB0aGUgcmVzdWx0IG9m
        IGNhbGxpbmcKICB0aGUgZnVuY3Rpb24gd2lsbCBiZSB1c2VkIGFzIHRoZSBp
        bml0aWFsIHZhbHVlLiBUaGlzIHByb3BlcnR5IGlzIHJlcXVpcmVkLgoKICBg
        aW5pdGlhbGl6ZWAgLSBBbiBvcHRpb25hbCBpbml0aWFsaXplIGZ1bmN0aW9u
        LiBUeXBpY2FsbHkgdGhpcyB3aWxsIGJlIHVzZWQKICB0byBzZXQgdXAgc3Rh
        dGUgb24gdGhlIGluc3RhbmNlTWV0YSBvYmplY3QuCgogIGByZW1vdmVkSXRl
        bWAgLSBBIGZ1bmN0aW9uIHRoYXQgaXMgY2FsbGVkIGVhY2ggdGltZSBhbiBl
        bGVtZW50IGlzIHJlbW92ZWQKICBmcm9tIHRoZSBhcnJheS4KCiAgYGFkZGVk
        SXRlbWAgLSBBIGZ1bmN0aW9uIHRoYXQgaXMgY2FsbGVkIGVhY2ggdGltZSBh
        biBlbGVtZW50IGlzIGFkZGVkIHRvCiAgdGhlIGFycmF5LgoKCiAgVGhlIGBp
        bml0aWFsaXplYCBmdW5jdGlvbiBoYXMgdGhlIGZvbGxvd2luZyBzaWduYXR1
        cmU6CgogIGBgYGphdmFzY3JpcHQKICAgZnVuY3Rpb24gKGluaXRpYWxWYWx1
        ZSwgY2hhbmdlTWV0YSwgaW5zdGFuY2VNZXRhKQogIGBgYAoKICBgaW5pdGlh
        bFZhbHVlYCAtIFRoZSB2YWx1ZSBvZiB0aGUgYGluaXRpYWxWYWx1ZWAgcHJv
        cGVydHkgZnJvbSB0aGUKICBvcHRpb25zIG9iamVjdC4KCiAgYGNoYW5nZU1l
        dGFgIC0gQW4gb2JqZWN0IHdoaWNoIGNvbnRhaW5zIG1ldGEgaW5mb3JtYXRp
        b24gYWJvdXQgdGhlCiAgY29tcHV0ZWQuIEl0IGNvbnRhaW5zIHRoZSBmb2xs
        b3dpbmcgcHJvcGVydGllczoKCiAgICAgLSBgcHJvcGVydHlgIHRoZSBjb21w
        dXRlZCBwcm9wZXJ0eQogICAgIC0gYHByb3BlcnR5TmFtZWAgdGhlIG5hbWUg
        b2YgdGhlIHByb3BlcnR5IG9uIHRoZSBvYmplY3QKCiAgYGluc3RhbmNlTWV0
        YWAgLSBBbiBvYmplY3QgdGhhdCBjYW4gYmUgdXNlZCB0byBzdG9yZSBtZXRh
        CiAgaW5mb3JtYXRpb24gbmVlZGVkIGZvciBjYWxjdWxhdGluZyB5b3VyIGNv
        bXB1dGVkLiBGb3IgZXhhbXBsZSBhCiAgdW5pcXVlIGNvbXB1dGVkIG1pZ2h0
        IHVzZSB0aGlzIHRvIHN0b3JlIHRoZSBudW1iZXIgb2YgdGltZXMgYSBnaXZl
        bgogIGVsZW1lbnQgaXMgZm91bmQgaW4gdGhlIGRlcGVuZGVudCBhcnJheS4K
        CgogIFRoZSBgcmVtb3ZlZEl0ZW1gIGFuZCBgYWRkZWRJdGVtYCBmdW5jdGlv
        bnMgYm90aCBoYXZlIHRoZSBmb2xsb3dpbmcgc2lnbmF0dXJlOgoKICBgYGBq
        YXZhc2NyaXB0CiAgZnVuY3Rpb24gKGFjY3VtdWxhdGVkVmFsdWUsIGl0ZW0s
        IGNoYW5nZU1ldGEsIGluc3RhbmNlTWV0YSkKICBgYGAKCiAgYGFjY3VtdWxh
        dGVkVmFsdWVgIC0gVGhlIHZhbHVlIHJldHVybmVkIGZyb20gdGhlIGxhc3Qg
        dGltZQogIGByZW1vdmVkSXRlbWAgb3IgYGFkZGVkSXRlbWAgd2FzIGNhbGxl
        ZCBvciBgaW5pdGlhbFZhbHVlYC4KCiAgYGl0ZW1gIC0gdGhlIGVsZW1lbnQg
        YWRkZWQgb3IgcmVtb3ZlZCBmcm9tIHRoZSBhcnJheQoKICBgY2hhbmdlTWV0
        YWAgLSBBbiBvYmplY3Qgd2hpY2ggY29udGFpbnMgbWV0YSBpbmZvcm1hdGlv
        biBhYm91dCB0aGUKICBjaGFuZ2UuIEl0IGNvbnRhaW5zIHRoZSBmb2xsb3dp
        bmcgcHJvcGVydGllczoKCiAgICAtIGBwcm9wZXJ0eWAgdGhlIGNvbXB1dGVk
        IHByb3BlcnR5CiAgICAtIGBwcm9wZXJ0eU5hbWVgIHRoZSBuYW1lIG9mIHRo
        ZSBwcm9wZXJ0eSBvbiB0aGUgb2JqZWN0CiAgICAtIGBpbmRleGAgdGhlIGlu
        ZGV4IG9mIHRoZSBhZGRlZCBvciByZW1vdmVkIGl0ZW0KICAgIC0gYGl0ZW1g
        IHRoZSBhZGRlZCBvciByZW1vdmVkIGl0ZW06IHRoaXMgaXMgZXhhY3RseSB0
        aGUgc2FtZSBhcwogICAgICB0aGUgc2Vjb25kIGFyZwogICAgLSBgYXJyYXlD
        aGFuZ2VkYCB0aGUgYXJyYXkgdGhhdCB0cmlnZ2VyZWQgdGhlIGNoYW5nZS4g
        Q2FuIGJlCiAgICAgIHVzZWZ1bCB3aGVuIGRlcGVuZGluZyBvbiBtdWx0aXBs
        ZSBhcnJheXMuCgogIEZvciBwcm9wZXJ0eSBjaGFuZ2VzIHRyaWdnZXJlZCBv
        biBhbiBpdGVtIHByb3BlcnR5IGNoYW5nZSAod2hlbgogIGRlcEtleSBpcyBz
        b21ldGhpbmcgbGlrZSBgc29tZUFycmF5LkBlYWNoLnNvbWVQcm9wZXJ0eWAp
        LAogIGBjaGFuZ2VNZXRhYCB3aWxsIGFsc28gY29udGFpbiB0aGUgZm9sbG93
        aW5nIHByb3BlcnR5OgoKICAgIC0gYHByZXZpb3VzVmFsdWVzYCBhbiBvYmpl
        Y3Qgd2hvc2Uga2V5cyBhcmUgdGhlIHByb3BlcnRpZXMgdGhhdCBjaGFuZ2Vk
        IG9uCiAgICB0aGUgaXRlbSwgYW5kIHdob3NlIHZhbHVlcyBhcmUgdGhlIGl0
        ZW0ncyBwcmV2aW91cyB2YWx1ZXMuCgogIGBwcmV2aW91c1ZhbHVlc2AgaXMg
        aW1wb3J0YW50IEVtYmVyIGNvYWxlc2NlcyBpdGVtIHByb3BlcnR5IGNoYW5n
        ZXMgdmlhCiAgRW1iZXIucnVuLm9uY2UuIFRoaXMgbWVhbnMgdGhhdCBieSB0
        aGUgdGltZSByZW1vdmVkSXRlbSBnZXRzIGNhbGxlZCwgaXRlbSBoYXMKICB0
        aGUgbmV3IHZhbHVlcywgYnV0IHlvdSBtYXkgbmVlZCB0aGUgcHJldmlvdXMg
        dmFsdWUgKGVnIGZvciBzb3J0aW5nICYKICBmaWx0ZXJpbmcpLgoKICBgaW5z
        dGFuY2VNZXRhYCAtIEFuIG9iamVjdCB0aGF0IGNhbiBiZSB1c2VkIHRvIHN0
        b3JlIG1ldGEKICBpbmZvcm1hdGlvbiBuZWVkZWQgZm9yIGNhbGN1bGF0aW5n
        IHlvdXIgY29tcHV0ZWQuIEZvciBleGFtcGxlIGEKICB1bmlxdWUgY29tcHV0
        ZWQgbWlnaHQgdXNlIHRoaXMgdG8gc3RvcmUgdGhlIG51bWJlciBvZiB0aW1l
        cyBhIGdpdmVuCiAgZWxlbWVudCBpcyBmb3VuZCBpbiB0aGUgZGVwZW5kZW50
        IGFycmF5LgoKICBUaGUgYHJlbW92ZWRJdGVtYCBhbmQgYGFkZGVkSXRlbWAg
        ZnVuY3Rpb25zIHNob3VsZCByZXR1cm4gdGhlIGFjY3VtdWxhdGVkCiAgdmFs
        dWUuIEl0IGlzIGFjY2VwdGFibGUgdG8gbm90IHJldHVybiBhbnl0aGluZyAo
        aWUgcmV0dXJuIHVuZGVmaW5lZCkKICB0byBpbnZhbGlkYXRlIHRoZSBjb21w
        dXRhdGlvbi4gVGhpcyBpcyBnZW5lcmFsbHkgbm90IGEgZ29vZCBpZGVhIGZv
        cgogIGFycmF5Q29tcHV0ZWQgYnV0IGl0J3MgdXNlZCBpbiBlZyBtYXggYW5k
        IG1pbi4KCiAgTm90ZSB0aGF0IG9ic2VydmVycyB3aWxsIGJlIGZpcmVkIGlm
        IGVpdGhlciBvZiB0aGVzZSBmdW5jdGlvbnMgcmV0dXJuIGEgdmFsdWUKICB0
        aGF0IGRpZmZlcnMgZnJvbSB0aGUgYWNjdW11bGF0ZWQgdmFsdWUuICBXaGVu
        IHJldHVybmluZyBhbiBvYmplY3QgdGhhdAogIG11dGF0ZXMgaW4gcmVzcG9u
        c2UgdG8gYXJyYXkgY2hhbmdlcywgZm9yIGV4YW1wbGUgYW4gYXJyYXkgdGhh
        dCBtYXBzCiAgZXZlcnl0aGluZyBmcm9tIHNvbWUgb3RoZXIgYXJyYXkgKHNl
        ZSBgRW1iZXIuY29tcHV0ZWQubWFwYCksIGl0IGlzIHVzdWFsbHkKICBpbXBv
        cnRhbnQgdGhhdCB0aGUgKnNhbWUqIGFycmF5IGJlIHJldHVybmVkIHRvIGF2
        b2lkIGFjY2lkZW50YWxseSB0cmlnZ2VyaW5nIG9ic2VydmVycy4KCiAgRXhh
        bXBsZQoKICBgYGBqYXZhc2NyaXB0CiAgRW1iZXIuY29tcHV0ZWQubWF4ID0g
        ZnVuY3Rpb24gKGRlcGVuZGVudEtleSkgewogICAgcmV0dXJuIEVtYmVyLnJl
        ZHVjZUNvbXB1dGVkKGRlcGVuZGVudEtleSwgewogICAgICBpbml0aWFsVmFs
        dWU6IC1JbmZpbml0eSwKCiAgICAgIGFkZGVkSXRlbTogZnVuY3Rpb24gKGFj
        Y3VtdWxhdGVkVmFsdWUsIGl0ZW0sIGNoYW5nZU1ldGEsIGluc3RhbmNlTWV0
        YSkgewogICAgICAgIHJldHVybiBNYXRoLm1heChhY2N1bXVsYXRlZFZhbHVl
        LCBpdGVtKTsKICAgICAgfSwKCiAgICAgIHJlbW92ZWRJdGVtOiBmdW5jdGlv
        biAoYWNjdW11bGF0ZWRWYWx1ZSwgaXRlbSwgY2hhbmdlTWV0YSwgaW5zdGFu
        Y2VNZXRhKSB7CiAgICAgICAgaWYgKGl0ZW0gPCBhY2N1bXVsYXRlZFZhbHVl
        KSB7CiAgICAgICAgICByZXR1cm4gYWNjdW11bGF0ZWRWYWx1ZTsKICAgICAg
        ICB9CiAgICAgIH0KICAgIH0pOwogIH07CiAgYGBgCgogIERlcGVuZGVudCBr
        ZXlzIG1heSByZWZlciB0byBgQHRoaXNgIHRvIG9ic2VydmUgY2hhbmdlcyB0
        byB0aGUgb2JqZWN0IGl0c2VsZiwKICB3aGljaCBtdXN0IGJlIGFycmF5LWxp
        a2UsIHJhdGhlciB0aGFuIGEgcHJvcGVydHkgb2YgdGhlIG9iamVjdC4gIFRo
        aXMgaXMKICBtb3N0bHkgdXNlZnVsIGZvciBhcnJheSBwcm94aWVzLCB0byBl
        bnN1cmUgb2JqZWN0cyBhcmUgcmV0cmlldmVkIHZpYQogIGBvYmplY3RBdENv
        bnRlbnRgLiAgVGhpcyBpcyBob3cgeW91IGNvdWxkIHNvcnQgaXRlbXMgYnkg
        cHJvcGVydGllcyBkZWZpbmVkIG9uIGFuIGl0ZW0gY29udHJvbGxlci4KCiAg
        RXhhbXBsZQoKICBgYGBqYXZhc2NyaXB0CiAgQXBwLlBlb3BsZUNvbnRyb2xs
        ZXIgPSBFbWJlci5BcnJheUNvbnRyb2xsZXIuZXh0ZW5kKHsKICAgIGl0ZW1D
        b250cm9sbGVyOiAncGVyc29uJywKCiAgICBzb3J0ZWRQZW9wbGU6IEVtYmVy
        LmNvbXB1dGVkLnNvcnQoJ0B0aGlzLkBlYWNoLnJldmVyc2VkTmFtZScsIGZ1
        bmN0aW9uKHBlcnNvbkEsIHBlcnNvbkIpIHsKICAgICAgLy8gYHJldmVyc2Vk
        TmFtZWAgaXNuJ3QgZGVmaW5lZCBvbiBQZXJzb24sIGJ1dCB3ZSBoYXZlIGFj
        Y2VzcyB0byBpdCB2aWEKICAgICAgLy8gdGhlIGl0ZW0gY29udHJvbGxlciBB
        cHAuUGVyc29uQ29udHJvbGxlci4gIElmIHdlJ2QgdXNlZAogICAgICAvLyBg
        Y29udGVudC5AZWFjaC5yZXZlcnNlZE5hbWVgIGFib3ZlLCB3ZSB3b3VsZCBi
        ZSBnZXR0aW5nIHRoZSBvYmplY3RzCiAgICAgIC8vIGRpcmVjdGx5IGFuZCBu
        b3QgaGF2ZSBhY2Nlc3MgdG8gYHJldmVyc2VkTmFtZWAuCiAgICAgIC8vCiAg
        ICAgIHZhciByZXZlcnNlZE5hbWVBID0gZ2V0KHBlcnNvbkEsICdyZXZlcnNl
        ZE5hbWUnKSwKICAgICAgICAgIHJldmVyc2VkTmFtZUIgPSBnZXQocGVyc29u
        QiwgJ3JldmVyc2VkTmFtZScpOwoKICAgICAgcmV0dXJuIEVtYmVyLmNvbXBh
        cmUocmV2ZXJzZWROYW1lQSwgcmV2ZXJzZWROYW1lQik7CiAgICB9KQogIH0p
        OwoKICBBcHAuUGVyc29uQ29udHJvbGxlciA9IEVtYmVyLk9iamVjdENvbnRy
        b2xsZXIuZXh0ZW5kKHsKICAgIHJldmVyc2VkTmFtZTogZnVuY3Rpb24gKCkg
        ewogICAgICByZXR1cm4gcmV2ZXJzZShnZXQodGhpcywgJ25hbWUnKSk7CiAg
        ICB9LnByb3BlcnR5KCduYW1lJykKICB9KQogIGBgYAoKICBEZXBlbmRlbnQg
        a2V5cyB3aG9zZSB2YWx1ZXMgYXJlIG5vdCBhcnJheXMgYXJlIHRyZWF0ZWQg
        YXMgcmVndWxhcgogIGRlcGVuZGVuY2llczogd2hlbiB0aGV5IGNoYW5nZSwg
        dGhlIGNvbXB1dGVkIHByb3BlcnR5IGlzIGNvbXBsZXRlbHkKICByZWNhbGN1
        bGF0ZWQuICBJdCBpcyBzb21ldGltZXMgdXNlZnVsIHRvIGhhdmUgZGVwZW5k
        ZW50IGFycmF5cyB3aXRoIHNpbWlsYXIKICBzZW1hbnRpY3MuICBEZXBlbmRl
        bnQga2V5cyB3aGljaCBlbmQgaW4gYC5bXWAgZG8gbm90IHVzZSAib25lIGF0
        IGEgdGltZSIKICBzZW1hbnRpY3MuICBXaGVuIGFuIGl0ZW0gaXMgYWRkZWQg
        b3IgcmVtb3ZlZCBmcm9tIHN1Y2ggYSBkZXBlbmRlbmN5LCB0aGUKICBjb21w
        dXRlZCBwcm9wZXJ0eSBpcyBjb21wbGV0ZWx5IHJlY29tcHV0ZWQuCgogIEV4
        YW1wbGUKCiAgYGBgamF2YXNjcmlwdAogIEVtYmVyLk9iamVjdC5leHRlbmQo
        ewogICAgLy8gV2hlbiBgc3RyaW5nYCBpcyBjaGFuZ2VkLCBgY29tcHV0ZWRg
        IGlzIGNvbXBsZXRlbHkgcmVjb21wdXRlZC4KICAgIHN0cmluZzogJ2Egc3Ry
        aW5nJywKCiAgICAvLyBXaGVuIGFuIGl0ZW0gaXMgYWRkZWQgdG8gYGFycmF5
        YCwgYGFkZGVkSXRlbWAgaXMgY2FsbGVkLgogICAgYXJyYXk6IFtdLAoKICAg
        IC8vIFdoZW4gYW4gaXRlbSBpcyBhZGRlZCB0byBgYW5vdGhlckFycmF5YCwg
        YGNvbXB1dGVkYCBpcyBjb21wbGV0ZWx5CiAgICAvLyByZWNvbXB1dGVkLgog
        ICAgYW5vdGhlckFycmF5OiBbXSwKCiAgICBjb21wdXRlZDogRW1iZXIucmVk
        dWNlQ29tcHV0ZWQoJ3N0cmluZycsICdhcnJheScsICdhbm90aGVyQXJyYXku
        W10nLCB7CiAgICAgIGFkZGVkSXRlbTogYWRkZWRJdGVtQ2FsbGJhY2ssCiAg
        ICAgIHJlbW92ZWRJdGVtOiByZW1vdmVkSXRlbUNhbGxiYWNrCiAgICB9KQog
        IH0pOwogIGBgYAoKICBAbWV0aG9kIHJlZHVjZUNvbXB1dGVkCiAgQGZvciBF
        bWJlcgogIEBwYXJhbSB7U3RyaW5nfSBbZGVwZW5kZW50S2V5cypdCiAgQHBh
        cmFtIHtPYmplY3R9IG9wdGlvbnMKICBAcmV0dXJuIHtFbWJlci5Db21wdXRl
        ZFByb3BlcnR5fQoqLwpFbWJlci5yZWR1Y2VDb21wdXRlZCA9IGZ1bmN0aW9u
        IChvcHRpb25zKSB7CiAgdmFyIGFyZ3M7CgogIGlmIChhcmd1bWVudHMubGVu
        Z3RoID4gMSkgewogICAgYXJncyA9IGFfc2xpY2UuY2FsbChhcmd1bWVudHMs
        IDAsIC0xKTsKICAgIG9wdGlvbnMgPSBhX3NsaWNlLmNhbGwoYXJndW1lbnRz
        LCAtMSlbMF07CiAgfQoKICBpZiAodHlwZW9mIG9wdGlvbnMgIT09ICJvYmpl
        Y3QiKSB7CiAgICB0aHJvdyBuZXcgRW1iZXIuRXJyb3IoIlJlZHVjZSBDb21w
        dXRlZCBQcm9wZXJ0eSBkZWNsYXJlZCB3aXRob3V0IGFuIG9wdGlvbnMgaGFz
        aCIpOwogIH0KCiAgaWYgKCEoJ2luaXRpYWxWYWx1ZScgaW4gb3B0aW9ucykp
        IHsKICAgIHRocm93IG5ldyBFbWJlci5FcnJvcigiUmVkdWNlIENvbXB1dGVk
        IFByb3BlcnR5IGRlY2xhcmVkIHdpdGhvdXQgYW4gaW5pdGlhbCB2YWx1ZSIp
        OwogIH0KCiAgdmFyIGNwID0gbmV3IFJlZHVjZUNvbXB1dGVkUHJvcGVydHko
        b3B0aW9ucyk7CgogIGlmIChhcmdzKSB7CiAgICBjcC5wcm9wZXJ0eS5hcHBs
        eShjcCwgYXJncyk7CiAgfQoKICByZXR1cm4gY3A7Cn07Cgp9KSgpOwoKCgoo
        ZnVuY3Rpb24oKSB7CnZhciBSZWR1Y2VDb21wdXRlZFByb3BlcnR5ID0gRW1i
        ZXIuUmVkdWNlQ29tcHV0ZWRQcm9wZXJ0eSwKICAgIGFfc2xpY2UgPSBbXS5z
        bGljZSwKICAgIG9fY3JlYXRlID0gRW1iZXIuY3JlYXRlLAogICAgZm9yRWFj
        aCA9IEVtYmVyLkVudW1lcmFibGVVdGlscy5mb3JFYWNoOwoKZnVuY3Rpb24g
        QXJyYXlDb21wdXRlZFByb3BlcnR5KCkgewogIHZhciBjcCA9IHRoaXM7Cgog
        IFJlZHVjZUNvbXB1dGVkUHJvcGVydHkuYXBwbHkodGhpcywgYXJndW1lbnRz
        KTsKCiAgdGhpcy5mdW5jID0gKGZ1bmN0aW9uKHJlZHVjZUZ1bmMpIHsKICAg
        IHJldHVybiBmdW5jdGlvbiAocHJvcGVydHlOYW1lKSB7CiAgICAgIGlmICgh
        Y3AuX2hhc0luc3RhbmNlTWV0YSh0aGlzLCBwcm9wZXJ0eU5hbWUpKSB7CiAg
        ICAgICAgLy8gV2hlbiB3ZSByZWNvbXB1dGUgYW4gYXJyYXkgY29tcHV0ZWQg
        cHJvcGVydHksIHdlIG5lZWQgYWxyZWFkeQogICAgICAgIC8vIHJldHJpZXZl
        ZCBhcnJheXMgdG8gYmUgdXBkYXRlZDsgd2UgY2FuJ3Qgc2ltcGx5IGVtcHR5
        IHRoZSBjYWNoZSBhbmQKICAgICAgICAvLyBob3BlIHRoZSBhcnJheSBpcyBy
        ZS1yZXRyaWV2ZWQuCiAgICAgICAgZm9yRWFjaChjcC5fZGVwZW5kZW50S2V5
        cywgZnVuY3Rpb24oZGVwZW5kZW50S2V5KSB7CiAgICAgICAgICBFbWJlci5h
        ZGRPYnNlcnZlcih0aGlzLCBkZXBlbmRlbnRLZXksIGZ1bmN0aW9uKCkgewog
        ICAgICAgICAgICBjcC5yZWNvbXB1dGVPbmNlLmNhbGwodGhpcywgcHJvcGVy
        dHlOYW1lKTsKICAgICAgICAgIH0pOwogICAgICAgIH0sIHRoaXMpOwogICAg
        ICB9CgogICAgICByZXR1cm4gcmVkdWNlRnVuYy5hcHBseSh0aGlzLCBhcmd1
        bWVudHMpOwogICAgfTsKICB9KSh0aGlzLmZ1bmMpOwoKICByZXR1cm4gdGhp
        czsKfQpFbWJlci5BcnJheUNvbXB1dGVkUHJvcGVydHkgPSBBcnJheUNvbXB1
        dGVkUHJvcGVydHk7CkFycmF5Q29tcHV0ZWRQcm9wZXJ0eS5wcm90b3R5cGUg
        PSBvX2NyZWF0ZShSZWR1Y2VDb21wdXRlZFByb3BlcnR5LnByb3RvdHlwZSk7
        CkFycmF5Q29tcHV0ZWRQcm9wZXJ0eS5wcm90b3R5cGUuaW5pdGlhbFZhbHVl
        ID0gZnVuY3Rpb24gKCkgewogIHJldHVybiBFbWJlci5BKCk7Cn07CkFycmF5
        Q29tcHV0ZWRQcm9wZXJ0eS5wcm90b3R5cGUucmVzZXRWYWx1ZSA9IGZ1bmN0
        aW9uIChhcnJheSkgewogIGFycmF5LmNsZWFyKCk7CiAgcmV0dXJuIGFycmF5
        Owp9OwoKLy8gVGhpcyBpcyBhIHN0b3BnYXAgdG8ga2VlcCB0aGUgcmVmZXJl
        bmNlIGNvdW50cyBjb3JyZWN0IHdpdGggbGF6eSBDUHMuCkFycmF5Q29tcHV0
        ZWRQcm9wZXJ0eS5wcm90b3R5cGUuZGlkQ2hhbmdlID0gZnVuY3Rpb24gKG9i
        aiwga2V5TmFtZSkgewogIHJldHVybjsKfTsKCi8qKgogIENyZWF0ZXMgYSBj
        b21wdXRlZCBwcm9wZXJ0eSB3aGljaCBvcGVyYXRlcyBvbiBkZXBlbmRlbnQg
        YXJyYXlzIGFuZAogIGlzIHVwZGF0ZWQgd2l0aCAib25lIGF0IGEgdGltZSIg
        c2VtYW50aWNzLiBXaGVuIGl0ZW1zIGFyZSBhZGRlZCBvcgogIHJlbW92ZWQg
        ZnJvbSB0aGUgZGVwZW5kZW50IGFycmF5KHMpIGFuIGFycmF5IGNvbXB1dGVk
        IG9ubHkgb3BlcmF0ZXMKICBvbiB0aGUgY2hhbmdlIGluc3RlYWQgb2YgcmUt
        ZXZhbHVhdGluZyB0aGUgZW50aXJlIGFycmF5LiBUaGlzIHNob3VsZAogIHJl
        dHVybiBhbiBhcnJheSwgaWYgeW91J2QgbGlrZSB0byB1c2UgIm9uZSBhdCBh
        IHRpbWUiIHNlbWFudGljcyBhbmQKICBjb21wdXRlIHNvbWUgdmFsdWUgb3Ro
        ZXIgdGhlbiBhbiBhcnJheSBsb29rIGF0CiAgYEVtYmVyLnJlZHVjZUNvbXB1
        dGVkYC4KCiAgSWYgdGhlcmUgYXJlIG1vcmUgdGhhbiBvbmUgYXJndW1lbnRz
        IHRoZSBmaXJzdCBhcmd1bWVudHMgYXJlCiAgY29uc2lkZXJlZCB0byBiZSBk
        ZXBlbmRlbnQgcHJvcGVydHkga2V5cy4gVGhlIGxhc3QgYXJndW1lbnQgaXMK
        ICByZXF1aXJlZCB0byBiZSBhbiBvcHRpb25zIG9iamVjdC4gVGhlIG9wdGlv
        bnMgb2JqZWN0IGNhbiBoYXZlIHRoZQogIGZvbGxvd2luZyB0aHJlZSBwcm9w
        ZXJ0aWVzLgoKICBgaW5pdGlhbGl6ZWAgLSBBbiBvcHRpb25hbCBpbml0aWFs
        aXplIGZ1bmN0aW9uLiBUeXBpY2FsbHkgdGhpcyB3aWxsIGJlIHVzZWQKICB0
        byBzZXQgdXAgc3RhdGUgb24gdGhlIGluc3RhbmNlTWV0YSBvYmplY3QuCgog
        IGByZW1vdmVkSXRlbWAgLSBBIGZ1bmN0aW9uIHRoYXQgaXMgY2FsbGVkIGVh
        Y2ggdGltZSBhbiBlbGVtZW50IGlzCiAgcmVtb3ZlZCBmcm9tIHRoZSBhcnJh
        eS4KCiAgYGFkZGVkSXRlbWAgLSBBIGZ1bmN0aW9uIHRoYXQgaXMgY2FsbGVk
        IGVhY2ggdGltZSBhbiBlbGVtZW50IGlzCiAgYWRkZWQgdG8gdGhlIGFycmF5
        LgoKCiAgVGhlIGBpbml0aWFsaXplYCBmdW5jdGlvbiBoYXMgdGhlIGZvbGxv
        d2luZyBzaWduYXR1cmU6CgogIGBgYGphdmFzY3JpcHQKICAgZnVuY3Rpb24g
        KGFycmF5LCBjaGFuZ2VNZXRhLCBpbnN0YW5jZU1ldGEpCiAgYGBgCgogIGBh
        cnJheWAgLSBUaGUgaW5pdGlhbCB2YWx1ZSBvZiB0aGUgYXJyYXlDb21wdXRl
        ZCwgYW4gZW1wdHkgYXJyYXkuCgogIGBjaGFuZ2VNZXRhYCAtIEFuIG9iamVj
        dCB3aGljaCBjb250YWlucyBtZXRhIGluZm9ybWF0aW9uIGFib3V0IHRoZQog
        IGNvbXB1dGVkLiBJdCBjb250YWlucyB0aGUgZm9sbG93aW5nIHByb3BlcnRp
        ZXM6CgogICAgIC0gYHByb3BlcnR5YCB0aGUgY29tcHV0ZWQgcHJvcGVydHkK
        ICAgICAtIGBwcm9wZXJ0eU5hbWVgIHRoZSBuYW1lIG9mIHRoZSBwcm9wZXJ0
        eSBvbiB0aGUgb2JqZWN0CgogIGBpbnN0YW5jZU1ldGFgIC0gQW4gb2JqZWN0
        IHRoYXQgY2FuIGJlIHVzZWQgdG8gc3RvcmUgbWV0YQogIGluZm9ybWF0aW9u
        IG5lZWRlZCBmb3IgY2FsY3VsYXRpbmcgeW91ciBjb21wdXRlZC4gRm9yIGV4
        YW1wbGUgYQogIHVuaXF1ZSBjb21wdXRlZCBtaWdodCB1c2UgdGhpcyB0byBz
        dG9yZSB0aGUgbnVtYmVyIG9mIHRpbWVzIGEgZ2l2ZW4KICBlbGVtZW50IGlz
        IGZvdW5kIGluIHRoZSBkZXBlbmRlbnQgYXJyYXkuCgoKICBUaGUgYHJlbW92
        ZWRJdGVtYCBhbmQgYGFkZGVkSXRlbWAgZnVuY3Rpb25zIGJvdGggaGF2ZSB0
        aGUgZm9sbG93aW5nIHNpZ25hdHVyZToKCiAgYGBgamF2YXNjcmlwdAogIGZ1
        bmN0aW9uIChhY2N1bXVsYXRlZFZhbHVlLCBpdGVtLCBjaGFuZ2VNZXRhLCBp
        bnN0YW5jZU1ldGEpCiAgYGBgCgogIGBhY2N1bXVsYXRlZFZhbHVlYCAtIFRo
        ZSB2YWx1ZSByZXR1cm5lZCBmcm9tIHRoZSBsYXN0IHRpbWUKICBgcmVtb3Zl
        ZEl0ZW1gIG9yIGBhZGRlZEl0ZW1gIHdhcyBjYWxsZWQgb3IgYW4gZW1wdHkg
        YXJyYXkuCgogIGBpdGVtYCAtIHRoZSBlbGVtZW50IGFkZGVkIG9yIHJlbW92
        ZWQgZnJvbSB0aGUgYXJyYXkKCiAgYGNoYW5nZU1ldGFgIC0gQW4gb2JqZWN0
        IHdoaWNoIGNvbnRhaW5zIG1ldGEgaW5mb3JtYXRpb24gYWJvdXQgdGhlCiAg
        Y2hhbmdlLiBJdCBjb250YWlucyB0aGUgZm9sbG93aW5nIHByb3BlcnRpZXM6
        CgogICAgLSBgcHJvcGVydHlgIHRoZSBjb21wdXRlZCBwcm9wZXJ0eQogICAg
        LSBgcHJvcGVydHlOYW1lYCB0aGUgbmFtZSBvZiB0aGUgcHJvcGVydHkgb24g
        dGhlIG9iamVjdAogICAgLSBgaW5kZXhgIHRoZSBpbmRleCBvZiB0aGUgYWRk
        ZWQgb3IgcmVtb3ZlZCBpdGVtCiAgICAtIGBpdGVtYCB0aGUgYWRkZWQgb3Ig
        cmVtb3ZlZCBpdGVtOiB0aGlzIGlzIGV4YWN0bHkgdGhlIHNhbWUgYXMKICAg
        ICAgdGhlIHNlY29uZCBhcmcKICAgIC0gYGFycmF5Q2hhbmdlZGAgdGhlIGFy
        cmF5IHRoYXQgdHJpZ2dlcmVkIHRoZSBjaGFuZ2UuIENhbiBiZQogICAgICB1
        c2VmdWwgd2hlbiBkZXBlbmRpbmcgb24gbXVsdGlwbGUgYXJyYXlzLgoKICBG
        b3IgcHJvcGVydHkgY2hhbmdlcyB0cmlnZ2VyZWQgb24gYW4gaXRlbSBwcm9w
        ZXJ0eSBjaGFuZ2UgKHdoZW4KICBkZXBLZXkgaXMgc29tZXRoaW5nIGxpa2Ug
        YHNvbWVBcnJheS5AZWFjaC5zb21lUHJvcGVydHlgKSwKICBgY2hhbmdlTWV0
        YWAgd2lsbCBhbHNvIGNvbnRhaW4gdGhlIGZvbGxvd2luZyBwcm9wZXJ0eToK
        CiAgICAtIGBwcmV2aW91c1ZhbHVlc2AgYW4gb2JqZWN0IHdob3NlIGtleXMg
        YXJlIHRoZSBwcm9wZXJ0aWVzIHRoYXQgY2hhbmdlZCBvbgogICAgdGhlIGl0
        ZW0sIGFuZCB3aG9zZSB2YWx1ZXMgYXJlIHRoZSBpdGVtJ3MgcHJldmlvdXMg
        dmFsdWVzLgoKICBgcHJldmlvdXNWYWx1ZXNgIGlzIGltcG9ydGFudCBFbWJl
        ciBjb2FsZXNjZXMgaXRlbSBwcm9wZXJ0eSBjaGFuZ2VzIHZpYQogIEVtYmVy
        LnJ1bi5vbmNlLiBUaGlzIG1lYW5zIHRoYXQgYnkgdGhlIHRpbWUgcmVtb3Zl
        ZEl0ZW0gZ2V0cyBjYWxsZWQsIGl0ZW0gaGFzCiAgdGhlIG5ldyB2YWx1ZXMs
        IGJ1dCB5b3UgbWF5IG5lZWQgdGhlIHByZXZpb3VzIHZhbHVlIChlZyBmb3Ig
        c29ydGluZyAmCiAgZmlsdGVyaW5nKS4KCiAgYGluc3RhbmNlTWV0YWAgLSBB
        biBvYmplY3QgdGhhdCBjYW4gYmUgdXNlZCB0byBzdG9yZSBtZXRhCiAgaW5m
        b3JtYXRpb24gbmVlZGVkIGZvciBjYWxjdWxhdGluZyB5b3VyIGNvbXB1dGVk
        LiBGb3IgZXhhbXBsZSBhCiAgdW5pcXVlIGNvbXB1dGVkIG1pZ2h0IHVzZSB0
        aGlzIHRvIHN0b3JlIHRoZSBudW1iZXIgb2YgdGltZXMgYSBnaXZlbgogIGVs
        ZW1lbnQgaXMgZm91bmQgaW4gdGhlIGRlcGVuZGVudCBhcnJheS4KCiAgVGhl
        IGByZW1vdmVkSXRlbWAgYW5kIGBhZGRlZEl0ZW1gIGZ1bmN0aW9ucyBzaG91
        bGQgcmV0dXJuIHRoZSBhY2N1bXVsYXRlZAogIHZhbHVlLiBJdCBpcyBhY2Nl
        cHRhYmxlIHRvIG5vdCByZXR1cm4gYW55dGhpbmcgKGllIHJldHVybiB1bmRl
        ZmluZWQpCiAgdG8gaW52YWxpZGF0ZSB0aGUgY29tcHV0YXRpb24uIFRoaXMg
        aXMgZ2VuZXJhbGx5IG5vdCBhIGdvb2QgaWRlYSBmb3IKICBhcnJheUNvbXB1
        dGVkIGJ1dCBpdCdzIHVzZWQgaW4gZWcgbWF4IGFuZCBtaW4uCgogIEV4YW1w
        bGUKCiAgYGBgamF2YXNjcmlwdAogIEVtYmVyLmNvbXB1dGVkLm1hcCA9IGZ1
        bmN0aW9uKGRlcGVuZGVudEtleSwgY2FsbGJhY2spIHsKICAgIHZhciBvcHRp
        b25zID0gewogICAgICBhZGRlZEl0ZW06IGZ1bmN0aW9uKGFycmF5LCBpdGVt
        LCBjaGFuZ2VNZXRhLCBpbnN0YW5jZU1ldGEpIHsKICAgICAgICB2YXIgbWFw
        cGVkID0gY2FsbGJhY2soaXRlbSk7CiAgICAgICAgYXJyYXkuaW5zZXJ0QXQo
        Y2hhbmdlTWV0YS5pbmRleCwgbWFwcGVkKTsKICAgICAgICByZXR1cm4gYXJy
        YXk7CiAgICAgIH0sCiAgICAgIHJlbW92ZWRJdGVtOiBmdW5jdGlvbihhcnJh
        eSwgaXRlbSwgY2hhbmdlTWV0YSwgaW5zdGFuY2VNZXRhKSB7CiAgICAgICAg
        YXJyYXkucmVtb3ZlQXQoY2hhbmdlTWV0YS5pbmRleCwgMSk7CiAgICAgICAg
        cmV0dXJuIGFycmF5OwogICAgICB9CiAgICB9OwoKICAgIHJldHVybiBFbWJl
        ci5hcnJheUNvbXB1dGVkKGRlcGVuZGVudEtleSwgb3B0aW9ucyk7CiAgfTsK
        ICBgYGAKCiAgQG1ldGhvZCBhcnJheUNvbXB1dGVkCiAgQGZvciBFbWJlcgog
        IEBwYXJhbSB7U3RyaW5nfSBbZGVwZW5kZW50S2V5cypdCiAgQHBhcmFtIHtP
        YmplY3R9IG9wdGlvbnMKICBAcmV0dXJuIHtFbWJlci5Db21wdXRlZFByb3Bl
        cnR5fQoqLwpFbWJlci5hcnJheUNvbXB1dGVkID0gZnVuY3Rpb24gKG9wdGlv
        bnMpIHsKICB2YXIgYXJnczsKCiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAx
        KSB7CiAgICBhcmdzID0gYV9zbGljZS5jYWxsKGFyZ3VtZW50cywgMCwgLTEp
        OwogICAgb3B0aW9ucyA9IGFfc2xpY2UuY2FsbChhcmd1bWVudHMsIC0xKVsw
        XTsKICB9CgogIGlmICh0eXBlb2Ygb3B0aW9ucyAhPT0gIm9iamVjdCIpIHsK
        ICAgIHRocm93IG5ldyBFbWJlci5FcnJvcigiQXJyYXkgQ29tcHV0ZWQgUHJv
        cGVydHkgZGVjbGFyZWQgd2l0aG91dCBhbiBvcHRpb25zIGhhc2giKTsKICB9
        CgogIHZhciBjcCA9IG5ldyBBcnJheUNvbXB1dGVkUHJvcGVydHkob3B0aW9u
        cyk7CgogIGlmIChhcmdzKSB7CiAgICBjcC5wcm9wZXJ0eS5hcHBseShjcCwg
        YXJncyk7CiAgfQoKICByZXR1cm4gY3A7Cn07Cgp9KSgpOwoKCgooZnVuY3Rp
        b24oKSB7Ci8qKgpAbW9kdWxlIGVtYmVyCkBzdWJtb2R1bGUgZW1iZXItcnVu
        dGltZQoqLwoKdmFyIGdldCA9IEVtYmVyLmdldCwKICAgIHNldCA9IEVtYmVy
        LnNldCwKICAgIGd1aWRGb3IgPSBFbWJlci5ndWlkRm9yLAogICAgbWVyZ2Ug
        PSBFbWJlci5tZXJnZSwKICAgIGFfc2xpY2UgPSBbXS5zbGljZSwKICAgIGZv
        ckVhY2ggPSBFbWJlci5FbnVtZXJhYmxlVXRpbHMuZm9yRWFjaCwKICAgIG1h
        cCA9IEVtYmVyLkVudW1lcmFibGVVdGlscy5tYXAsCiAgICBTZWFyY2hQcm94
        eTsKCi8qKgogQSBjb21wdXRlZCBwcm9wZXJ0eSB0aGF0IHJldHVybnMgdGhl
        IHN1bSBvZiB0aGUgdmFsdWUKIGluIHRoZSBkZXBlbmRlbnQgYXJyYXkuCgog
        QG1ldGhvZCBjb21wdXRlZC5zdW0KIEBmb3IgRW1iZXIKIEBwYXJhbSB7U3Ry
        aW5nfSBkZXBlbmRlbnRLZXkKIEByZXR1cm4ge0VtYmVyLkNvbXB1dGVkUHJv
        cGVydHl9IGNvbXB1dGVzIHRoZSBzdW0gb2YgYWxsIHZhbHVlcyBpbiB0aGUg
        ZGVwZW5kZW50S2V5J3MgYXJyYXkKKi8KCkVtYmVyLmNvbXB1dGVkLnN1bSA9
        IGZ1bmN0aW9uKGRlcGVuZGVudEtleSl7CiAgcmV0dXJuIEVtYmVyLnJlZHVj
        ZUNvbXB1dGVkKGRlcGVuZGVudEtleSwgewogICAgaW5pdGlhbFZhbHVlOiAw
        LAoKICAgIGFkZGVkSXRlbTogZnVuY3Rpb24oYWNjdW11bGF0ZWRWYWx1ZSwg
        aXRlbSwgY2hhbmdlTWV0YSwgaW5zdGFuY2VNZXRhKXsKICAgICAgcmV0dXJu
        IGFjY3VtdWxhdGVkVmFsdWUgKyBpdGVtOwogICAgfSwKCiAgICByZW1vdmVk
        SXRlbTogZnVuY3Rpb24oYWNjdW11bGF0ZWRWYWx1ZSwgaXRlbSwgY2hhbmdl
        TWV0YSwgaW5zdGFuY2VNZXRhKXsKICAgICAgcmV0dXJuIGFjY3VtdWxhdGVk
        VmFsdWUgLSBpdGVtOwogICAgfQogIH0pOwp9OwoKLyoqCiAgQSBjb21wdXRl
        ZCBwcm9wZXJ0eSB0aGF0IGNhbGN1bGF0ZXMgdGhlIG1heGltdW0gdmFsdWUg
        aW4gdGhlCiAgZGVwZW5kZW50IGFycmF5LiBUaGlzIHdpbGwgcmV0dXJuIGAt
        SW5maW5pdHlgIHdoZW4gdGhlIGRlcGVuZGVudAogIGFycmF5IGlzIGVtcHR5
        LgoKICBgYGBqYXZhc2NyaXB0CiAgQXBwLlBlcnNvbiA9IEVtYmVyLk9iamVj
        dC5leHRlbmQoewogICAgY2hpbGRBZ2VzOiBFbWJlci5jb21wdXRlZC5tYXBC
        eSgnY2hpbGRyZW4nLCAnYWdlJyksCiAgICBtYXhDaGlsZEFnZTogRW1iZXIu
        Y29tcHV0ZWQubWF4KCdjaGlsZEFnZXMnKQogIH0pOwoKICB2YXIgbG9yZEJ5
        cm9uID0gQXBwLlBlcnNvbi5jcmVhdGUoe2NoaWxkcmVuOiBbXX0pOwogIGxv
        cmRCeXJvbi5nZXQoJ21heENoaWxkQWdlJyk7IC8vIC1JbmZpbml0eQogIGxv
        cmRCeXJvbi5nZXQoJ2NoaWxkcmVuJykucHVzaE9iamVjdCh7CiAgICBuYW1l
        OiAnQXVndXN0YSBBZGEgQnlyb24nLCBhZ2U6IDcKICB9KTsKICBsb3JkQnly
        b24uZ2V0KCdtYXhDaGlsZEFnZScpOyAvLyA3CiAgbG9yZEJ5cm9uLmdldCgn
        Y2hpbGRyZW4nKS5wdXNoT2JqZWN0cyhbewogICAgbmFtZTogJ0FsbGVncmEg
        Qnlyb24nLAogICAgYWdlOiA1CiAgfSwgewogICAgbmFtZTogJ0VsaXphYmV0
        aCBNZWRvcmEgTGVpZ2gnLAogICAgYWdlOiA4CiAgfV0pOwogIGxvcmRCeXJv
        bi5nZXQoJ21heENoaWxkQWdlJyk7IC8vIDgKICBgYGAKCiAgQG1ldGhvZCBj
        b21wdXRlZC5tYXgKICBAZm9yIEVtYmVyCiAgQHBhcmFtIHtTdHJpbmd9IGRl
        cGVuZGVudEtleQogIEByZXR1cm4ge0VtYmVyLkNvbXB1dGVkUHJvcGVydHl9
        IGNvbXB1dGVzIHRoZSBsYXJnZXN0IHZhbHVlIGluIHRoZSBkZXBlbmRlbnRL
        ZXkncyBhcnJheQoqLwpFbWJlci5jb21wdXRlZC5tYXggPSBmdW5jdGlvbiAo
        ZGVwZW5kZW50S2V5KSB7CiAgcmV0dXJuIEVtYmVyLnJlZHVjZUNvbXB1dGVk
        KGRlcGVuZGVudEtleSwgewogICAgaW5pdGlhbFZhbHVlOiAtSW5maW5pdHks
        CgogICAgYWRkZWRJdGVtOiBmdW5jdGlvbiAoYWNjdW11bGF0ZWRWYWx1ZSwg
        aXRlbSwgY2hhbmdlTWV0YSwgaW5zdGFuY2VNZXRhKSB7CiAgICAgIHJldHVy
        biBNYXRoLm1heChhY2N1bXVsYXRlZFZhbHVlLCBpdGVtKTsKICAgIH0sCgog
        ICAgcmVtb3ZlZEl0ZW06IGZ1bmN0aW9uIChhY2N1bXVsYXRlZFZhbHVlLCBp
        dGVtLCBjaGFuZ2VNZXRhLCBpbnN0YW5jZU1ldGEpIHsKICAgICAgaWYgKGl0
        ZW0gPCBhY2N1bXVsYXRlZFZhbHVlKSB7CiAgICAgICAgcmV0dXJuIGFjY3Vt
        dWxhdGVkVmFsdWU7CiAgICAgIH0KICAgIH0KICB9KTsKfTsKCi8qKgogIEEg
        Y29tcHV0ZWQgcHJvcGVydHkgdGhhdCBjYWxjdWxhdGVzIHRoZSBtaW5pbXVt
        IHZhbHVlIGluIHRoZQogIGRlcGVuZGVudCBhcnJheS4gVGhpcyB3aWxsIHJl
        dHVybiBgSW5maW5pdHlgIHdoZW4gdGhlIGRlcGVuZGVudAogIGFycmF5IGlz
        IGVtcHR5LgoKICBgYGBqYXZhc2NyaXB0CiAgQXBwLlBlcnNvbiA9IEVtYmVy
        Lk9iamVjdC5leHRlbmQoewogICAgY2hpbGRBZ2VzOiBFbWJlci5jb21wdXRl
        ZC5tYXBCeSgnY2hpbGRyZW4nLCAnYWdlJyksCiAgICBtaW5DaGlsZEFnZTog
        RW1iZXIuY29tcHV0ZWQubWluKCdjaGlsZEFnZXMnKQogIH0pOwoKICB2YXIg
        bG9yZEJ5cm9uID0gQXBwLlBlcnNvbi5jcmVhdGUoe2NoaWxkcmVuOiBbXX0p
        OwogIGxvcmRCeXJvbi5nZXQoJ21pbkNoaWxkQWdlJyk7IC8vIEluZmluaXR5
        CiAgbG9yZEJ5cm9uLmdldCgnY2hpbGRyZW4nKS5wdXNoT2JqZWN0KHsKICAg
        IG5hbWU6ICdBdWd1c3RhIEFkYSBCeXJvbicsIGFnZTogNwogIH0pOwogIGxv
        cmRCeXJvbi5nZXQoJ21pbkNoaWxkQWdlJyk7IC8vIDcKICBsb3JkQnlyb24u
        Z2V0KCdjaGlsZHJlbicpLnB1c2hPYmplY3RzKFt7CiAgICBuYW1lOiAnQWxs
        ZWdyYSBCeXJvbicsCiAgICBhZ2U6IDUKICB9LCB7CiAgICBuYW1lOiAnRWxp
        emFiZXRoIE1lZG9yYSBMZWlnaCcsCiAgICBhZ2U6IDgKICB9XSk7CiAgbG9y
        ZEJ5cm9uLmdldCgnbWluQ2hpbGRBZ2UnKTsgLy8gNQogIGBgYAoKICBAbWV0
        aG9kIGNvbXB1dGVkLm1pbgogIEBmb3IgRW1iZXIKICBAcGFyYW0ge1N0cmlu
        Z30gZGVwZW5kZW50S2V5CiAgQHJldHVybiB7RW1iZXIuQ29tcHV0ZWRQcm9w
        ZXJ0eX0gY29tcHV0ZXMgdGhlIHNtYWxsZXN0IHZhbHVlIGluIHRoZSBkZXBl
        bmRlbnRLZXkncyBhcnJheQoqLwpFbWJlci5jb21wdXRlZC5taW4gPSBmdW5j
        dGlvbiAoZGVwZW5kZW50S2V5KSB7CiAgcmV0dXJuIEVtYmVyLnJlZHVjZUNv
        bXB1dGVkKGRlcGVuZGVudEtleSwgewogICAgaW5pdGlhbFZhbHVlOiBJbmZp
        bml0eSwKCiAgICBhZGRlZEl0ZW06IGZ1bmN0aW9uIChhY2N1bXVsYXRlZFZh
        bHVlLCBpdGVtLCBjaGFuZ2VNZXRhLCBpbnN0YW5jZU1ldGEpIHsKICAgICAg
        cmV0dXJuIE1hdGgubWluKGFjY3VtdWxhdGVkVmFsdWUsIGl0ZW0pOwogICAg
        fSwKCiAgICByZW1vdmVkSXRlbTogZnVuY3Rpb24gKGFjY3VtdWxhdGVkVmFs
        dWUsIGl0ZW0sIGNoYW5nZU1ldGEsIGluc3RhbmNlTWV0YSkgewogICAgICBp
        ZiAoaXRlbSA+IGFjY3VtdWxhdGVkVmFsdWUpIHsKICAgICAgICByZXR1cm4g
        YWNjdW11bGF0ZWRWYWx1ZTsKICAgICAgfQogICAgfQogIH0pOwp9OwoKLyoq
        CiAgUmV0dXJucyBhbiBhcnJheSBtYXBwZWQgdmlhIHRoZSBjYWxsYmFjawoK
        ICBUaGUgY2FsbGJhY2sgbWV0aG9kIHlvdSBwcm92aWRlIHNob3VsZCBoYXZl
        IHRoZSBmb2xsb3dpbmcgc2lnbmF0dXJlLgogIGBpdGVtYCBpcyB0aGUgY3Vy
        cmVudCBpdGVtIGluIHRoZSBpdGVyYXRpb24uCgogIGBgYGphdmFzY3JpcHQK
        ICBmdW5jdGlvbihpdGVtKTsKICBgYGAKCiAgRXhhbXBsZQoKICBgYGBqYXZh
        c2NyaXB0CiAgQXBwLkhhbXN0ZXIgPSBFbWJlci5PYmplY3QuZXh0ZW5kKHsK
        ICAgIGV4Y2l0aW5nQ2hvcmVzOiBFbWJlci5jb21wdXRlZC5tYXAoJ2Nob3Jl
        cycsIGZ1bmN0aW9uKGNob3JlKSB7CiAgICAgIHJldHVybiBjaG9yZS50b1Vw
        cGVyQ2FzZSgpICsgJyEnOwogICAgfSkKICB9KTsKCiAgdmFyIGhhbXN0ZXIg
        PSBBcHAuSGFtc3Rlci5jcmVhdGUoewogICAgY2hvcmVzOiBbJ2NsZWFuJywg
        J3dyaXRlIG1vcmUgdW5pdCB0ZXN0cyddCiAgfSk7CiAgaGFtc3Rlci5nZXQo
        J2V4Y2l0aW5nQ2hvcmVzJyk7IC8vIFsnQ0xFQU4hJywgJ1dSSVRFIE1PUkUg
        VU5JVCBURVNUUyEnXQogIGBgYAoKICBAbWV0aG9kIGNvbXB1dGVkLm1hcAog
        IEBmb3IgRW1iZXIKICBAcGFyYW0ge1N0cmluZ30gZGVwZW5kZW50S2V5CiAg
        QHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2sKICBAcmV0dXJuIHtFbWJlci5D
        b21wdXRlZFByb3BlcnR5fSBhbiBhcnJheSBtYXBwZWQgdmlhIHRoZSBjYWxs
        YmFjawoqLwpFbWJlci5jb21wdXRlZC5tYXAgPSBmdW5jdGlvbihkZXBlbmRl
        bnRLZXksIGNhbGxiYWNrKSB7CiAgdmFyIG9wdGlvbnMgPSB7CiAgICBhZGRl
        ZEl0ZW06IGZ1bmN0aW9uKGFycmF5LCBpdGVtLCBjaGFuZ2VNZXRhLCBpbnN0
        YW5jZU1ldGEpIHsKICAgICAgdmFyIG1hcHBlZCA9IGNhbGxiYWNrLmNhbGwo
        dGhpcywgaXRlbSk7CiAgICAgIGFycmF5Lmluc2VydEF0KGNoYW5nZU1ldGEu
        aW5kZXgsIG1hcHBlZCk7CiAgICAgIHJldHVybiBhcnJheTsKICAgIH0sCiAg
        ICByZW1vdmVkSXRlbTogZnVuY3Rpb24oYXJyYXksIGl0ZW0sIGNoYW5nZU1l
        dGEsIGluc3RhbmNlTWV0YSkgewogICAgICBhcnJheS5yZW1vdmVBdChjaGFu
        Z2VNZXRhLmluZGV4LCAxKTsKICAgICAgcmV0dXJuIGFycmF5OwogICAgfQog
        IH07CgogIHJldHVybiBFbWJlci5hcnJheUNvbXB1dGVkKGRlcGVuZGVudEtl
        eSwgb3B0aW9ucyk7Cn07CgovKioKICBSZXR1cm5zIGFuIGFycmF5IG1hcHBl
        ZCB0byB0aGUgc3BlY2lmaWVkIGtleS4KCiAgYGBgamF2YXNjcmlwdAogIEFw
        cC5QZXJzb24gPSBFbWJlci5PYmplY3QuZXh0ZW5kKHsKICAgIGNoaWxkQWdl
        czogRW1iZXIuY29tcHV0ZWQubWFwQnkoJ2NoaWxkcmVuJywgJ2FnZScpCiAg
        fSk7CgogIHZhciBsb3JkQnlyb24gPSBBcHAuUGVyc29uLmNyZWF0ZSh7Y2hp
        bGRyZW46IFtdfSk7CiAgbG9yZEJ5cm9uLmdldCgnY2hpbGRBZ2VzJyk7IC8v
        IFtdCiAgbG9yZEJ5cm9uLmdldCgnY2hpbGRyZW4nKS5wdXNoT2JqZWN0KHtu
        YW1lOiAnQXVndXN0YSBBZGEgQnlyb24nLCBhZ2U6IDd9KTsKICBsb3JkQnly
        b24uZ2V0KCdjaGlsZEFnZXMnKTsgLy8gWzddCiAgbG9yZEJ5cm9uLmdldCgn
        Y2hpbGRyZW4nKS5wdXNoT2JqZWN0cyhbewogICAgbmFtZTogJ0FsbGVncmEg
        Qnlyb24nLAogICAgYWdlOiA1CiAgfSwgewogICAgbmFtZTogJ0VsaXphYmV0
        aCBNZWRvcmEgTGVpZ2gnLAogICAgYWdlOiA4CiAgfV0pOwogIGxvcmRCeXJv
        bi5nZXQoJ2NoaWxkQWdlcycpOyAvLyBbNywgNSwgOF0KICBgYGAKCiAgQG1l
        dGhvZCBjb21wdXRlZC5tYXBCeQogIEBmb3IgRW1iZXIKICBAcGFyYW0ge1N0
        cmluZ30gZGVwZW5kZW50S2V5CiAgQHBhcmFtIHtTdHJpbmd9IHByb3BlcnR5
        S2V5CiAgQHJldHVybiB7RW1iZXIuQ29tcHV0ZWRQcm9wZXJ0eX0gYW4gYXJy
        YXkgbWFwcGVkIHRvIHRoZSBzcGVjaWZpZWQga2V5CiovCkVtYmVyLmNvbXB1
        dGVkLm1hcEJ5ID0gZnVuY3Rpb24oZGVwZW5kZW50S2V5LCBwcm9wZXJ0eUtl
        eSkgewogIHZhciBjYWxsYmFjayA9IGZ1bmN0aW9uKGl0ZW0pIHsgcmV0dXJu
        IGdldChpdGVtLCBwcm9wZXJ0eUtleSk7IH07CiAgcmV0dXJuIEVtYmVyLmNv
        bXB1dGVkLm1hcChkZXBlbmRlbnRLZXkgKyAnLkBlYWNoLicgKyBwcm9wZXJ0
        eUtleSwgY2FsbGJhY2spOwp9OwoKLyoqCiAgQG1ldGhvZCBjb21wdXRlZC5t
        YXBQcm9wZXJ0eQogIEBmb3IgRW1iZXIKICBAZGVwcmVjYXRlZCBVc2UgYEVt
        YmVyLmNvbXB1dGVkLm1hcEJ5YCBpbnN0ZWFkCiAgQHBhcmFtIGRlcGVuZGVu
        dEtleQogIEBwYXJhbSBwcm9wZXJ0eUtleQoqLwpFbWJlci5jb21wdXRlZC5t
        YXBQcm9wZXJ0eSA9IEVtYmVyLmNvbXB1dGVkLm1hcEJ5OwoKLyoqCiAgRmls
        dGVycyB0aGUgYXJyYXkgYnkgdGhlIGNhbGxiYWNrLgoKICBUaGUgY2FsbGJh
        Y2sgbWV0aG9kIHlvdSBwcm92aWRlIHNob3VsZCBoYXZlIHRoZSBmb2xsb3dp
        bmcgc2lnbmF0dXJlLgogIGBpdGVtYCBpcyB0aGUgY3VycmVudCBpdGVtIGlu
        IHRoZSBpdGVyYXRpb24uCgogIGBgYGphdmFzY3JpcHQKICBmdW5jdGlvbihp
        dGVtKTsKICBgYGAKCiAgYGBgamF2YXNjcmlwdAogIEFwcC5IYW1zdGVyID0g
        RW1iZXIuT2JqZWN0LmV4dGVuZCh7CiAgICByZW1haW5pbmdDaG9yZXM6IEVt
        YmVyLmNvbXB1dGVkLmZpbHRlcignY2hvcmVzJywgZnVuY3Rpb24oY2hvcmUp
        IHsKICAgICAgcmV0dXJuICFjaG9yZS5kb25lOwogICAgfSkKICB9KTsKCiAg
        dmFyIGhhbXN0ZXIgPSBBcHAuSGFtc3Rlci5jcmVhdGUoe2Nob3JlczogWwog
        ICAge25hbWU6ICdjb29rJywgZG9uZTogdHJ1ZX0sCiAgICB7bmFtZTogJ2Ns
        ZWFuJywgZG9uZTogdHJ1ZX0sCiAgICB7bmFtZTogJ3dyaXRlIG1vcmUgdW5p
        dCB0ZXN0cycsIGRvbmU6IGZhbHNlfQogIF19KTsKICBoYW1zdGVyLmdldCgn
        cmVtYWluaW5nQ2hvcmVzJyk7IC8vIFt7bmFtZTogJ3dyaXRlIG1vcmUgdW5p
        dCB0ZXN0cycsIGRvbmU6IGZhbHNlfV0KICBgYGAKCiAgQG1ldGhvZCBjb21w
        dXRlZC5maWx0ZXIKICBAZm9yIEVtYmVyCiAgQHBhcmFtIHtTdHJpbmd9IGRl
        cGVuZGVudEtleQogIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrCiAgQHJl
        dHVybiB7RW1iZXIuQ29tcHV0ZWRQcm9wZXJ0eX0gdGhlIGZpbHRlcmVkIGFy
        cmF5CiovCkVtYmVyLmNvbXB1dGVkLmZpbHRlciA9IGZ1bmN0aW9uKGRlcGVu
        ZGVudEtleSwgY2FsbGJhY2spIHsKICB2YXIgb3B0aW9ucyA9IHsKICAgIGlu
        aXRpYWxpemU6IGZ1bmN0aW9uIChhcnJheSwgY2hhbmdlTWV0YSwgaW5zdGFu
        Y2VNZXRhKSB7CiAgICAgIGluc3RhbmNlTWV0YS5maWx0ZXJlZEFycmF5SW5k
        ZXhlcyA9IG5ldyBFbWJlci5TdWJBcnJheSgpOwogICAgfSwKCiAgICBhZGRl
        ZEl0ZW06IGZ1bmN0aW9uKGFycmF5LCBpdGVtLCBjaGFuZ2VNZXRhLCBpbnN0
        YW5jZU1ldGEpIHsKICAgICAgdmFyIG1hdGNoID0gISFjYWxsYmFjay5jYWxs
        KHRoaXMsIGl0ZW0pLAogICAgICAgICAgZmlsdGVySW5kZXggPSBpbnN0YW5j
        ZU1ldGEuZmlsdGVyZWRBcnJheUluZGV4ZXMuYWRkSXRlbShjaGFuZ2VNZXRh
        LmluZGV4LCBtYXRjaCk7CgogICAgICBpZiAobWF0Y2gpIHsKICAgICAgICBh
        cnJheS5pbnNlcnRBdChmaWx0ZXJJbmRleCwgaXRlbSk7CiAgICAgIH0KCiAg
        ICAgIHJldHVybiBhcnJheTsKICAgIH0sCgogICAgcmVtb3ZlZEl0ZW06IGZ1
        bmN0aW9uKGFycmF5LCBpdGVtLCBjaGFuZ2VNZXRhLCBpbnN0YW5jZU1ldGEp
        IHsKICAgICAgdmFyIGZpbHRlckluZGV4ID0gaW5zdGFuY2VNZXRhLmZpbHRl
        cmVkQXJyYXlJbmRleGVzLnJlbW92ZUl0ZW0oY2hhbmdlTWV0YS5pbmRleCk7
        CgogICAgICBpZiAoZmlsdGVySW5kZXggPiAtMSkgewogICAgICAgIGFycmF5
        LnJlbW92ZUF0KGZpbHRlckluZGV4KTsKICAgICAgfQoKICAgICAgcmV0dXJu
        IGFycmF5OwogICAgfQogIH07CgogIHJldHVybiBFbWJlci5hcnJheUNvbXB1
        dGVkKGRlcGVuZGVudEtleSwgb3B0aW9ucyk7Cn07CgovKioKICBGaWx0ZXJz
        IHRoZSBhcnJheSBieSB0aGUgcHJvcGVydHkgYW5kIHZhbHVlCgogIGBgYGph
        dmFzY3JpcHQKICBBcHAuSGFtc3RlciA9IEVtYmVyLk9iamVjdC5leHRlbmQo
        ewogICAgcmVtYWluaW5nQ2hvcmVzOiBFbWJlci5jb21wdXRlZC5maWx0ZXJC
        eSgnY2hvcmVzJywgJ2RvbmUnLCBmYWxzZSkKICB9KTsKCiAgdmFyIGhhbXN0
        ZXIgPSBBcHAuSGFtc3Rlci5jcmVhdGUoe2Nob3JlczogWwogICAge25hbWU6
        ICdjb29rJywgZG9uZTogdHJ1ZX0sCiAgICB7bmFtZTogJ2NsZWFuJywgZG9u
        ZTogdHJ1ZX0sCiAgICB7bmFtZTogJ3dyaXRlIG1vcmUgdW5pdCB0ZXN0cycs
        IGRvbmU6IGZhbHNlfQogIF19KTsKICBoYW1zdGVyLmdldCgncmVtYWluaW5n
        Q2hvcmVzJyk7IC8vIFt7bmFtZTogJ3dyaXRlIG1vcmUgdW5pdCB0ZXN0cycs
        IGRvbmU6IGZhbHNlfV0KICBgYGAKCiAgQG1ldGhvZCBjb21wdXRlZC5maWx0
        ZXJCeQogIEBmb3IgRW1iZXIKICBAcGFyYW0ge1N0cmluZ30gZGVwZW5kZW50
        S2V5CiAgQHBhcmFtIHtTdHJpbmd9IHByb3BlcnR5S2V5CiAgQHBhcmFtIHtT
        dHJpbmd9IHZhbHVlCiAgQHJldHVybiB7RW1iZXIuQ29tcHV0ZWRQcm9wZXJ0
        eX0gdGhlIGZpbHRlcmVkIGFycmF5CiovCkVtYmVyLmNvbXB1dGVkLmZpbHRl
        ckJ5ID0gZnVuY3Rpb24oZGVwZW5kZW50S2V5LCBwcm9wZXJ0eUtleSwgdmFs
        dWUpIHsKICB2YXIgY2FsbGJhY2s7CgogIGlmIChhcmd1bWVudHMubGVuZ3Ro
        ID09PSAyKSB7CiAgICBjYWxsYmFjayA9IGZ1bmN0aW9uKGl0ZW0pIHsKICAg
        ICAgcmV0dXJuIGdldChpdGVtLCBwcm9wZXJ0eUtleSk7CiAgICB9OwogIH0g
        ZWxzZSB7CiAgICBjYWxsYmFjayA9IGZ1bmN0aW9uKGl0ZW0pIHsKICAgICAg
        cmV0dXJuIGdldChpdGVtLCBwcm9wZXJ0eUtleSkgPT09IHZhbHVlOwogICAg
        fTsKICB9CgogIHJldHVybiBFbWJlci5jb21wdXRlZC5maWx0ZXIoZGVwZW5k
        ZW50S2V5ICsgJy5AZWFjaC4nICsgcHJvcGVydHlLZXksIGNhbGxiYWNrKTsK
        fTsKCi8qKgogIEBtZXRob2QgY29tcHV0ZWQuZmlsdGVyUHJvcGVydHkKICBA
        Zm9yIEVtYmVyCiAgQHBhcmFtIGRlcGVuZGVudEtleQogIEBwYXJhbSBwcm9w
        ZXJ0eUtleQogIEBwYXJhbSB2YWx1ZQogIEBkZXByZWNhdGVkIFVzZSBgRW1i
        ZXIuY29tcHV0ZWQuZmlsdGVyQnlgIGluc3RlYWQKKi8KRW1iZXIuY29tcHV0
        ZWQuZmlsdGVyUHJvcGVydHkgPSBFbWJlci5jb21wdXRlZC5maWx0ZXJCeTsK
        Ci8qKgogIEEgY29tcHV0ZWQgcHJvcGVydHkgd2hpY2ggcmV0dXJucyBhIG5l
        dyBhcnJheSB3aXRoIGFsbCB0aGUgdW5pcXVlCiAgZWxlbWVudHMgZnJvbSBv
        bmUgb3IgbW9yZSBkZXBlbmRlbnQgYXJyYXlzLgoKICBFeGFtcGxlCgogIGBg
        YGphdmFzY3JpcHQKICBBcHAuSGFtc3RlciA9IEVtYmVyLk9iamVjdC5leHRl
        bmQoewogICAgdW5pcXVlRnJ1aXRzOiBFbWJlci5jb21wdXRlZC51bmlxKCdm
        cnVpdHMnKQogIH0pOwoKICB2YXIgaGFtc3RlciA9IEFwcC5IYW1zdGVyLmNy
        ZWF0ZSh7ZnJ1aXRzOiBbCiAgICAnYmFuYW5hJywKICAgICdncmFwZScsCiAg
        ICAna2FsZScsCiAgICAnYmFuYW5hJwogIF19KTsKICBoYW1zdGVyLmdldCgn
        dW5pcXVlRnJ1aXRzJyk7IC8vIFsnYmFuYW5hJywgJ2dyYXBlJywgJ2thbGUn
        XQogIGBgYAoKICBAbWV0aG9kIGNvbXB1dGVkLnVuaXEKICBAZm9yIEVtYmVy
        CiAgQHBhcmFtIHtTdHJpbmd9IHByb3BlcnR5S2V5KgogIEByZXR1cm4ge0Vt
        YmVyLkNvbXB1dGVkUHJvcGVydHl9IGNvbXB1dGVzIGEgbmV3IGFycmF5IHdp
        dGggYWxsIHRoZQogIHVuaXF1ZSBlbGVtZW50cyBmcm9tIHRoZSBkZXBlbmRl
        bnQgYXJyYXkKKi8KRW1iZXIuY29tcHV0ZWQudW5pcSA9IGZ1bmN0aW9uKCkg
        ewogIHZhciBhcmdzID0gYV9zbGljZS5jYWxsKGFyZ3VtZW50cyk7CiAgYXJn
        cy5wdXNoKHsKICAgIGluaXRpYWxpemU6IGZ1bmN0aW9uKGFycmF5LCBjaGFu
        Z2VNZXRhLCBpbnN0YW5jZU1ldGEpIHsKICAgICAgaW5zdGFuY2VNZXRhLml0
        ZW1Db3VudHMgPSB7fTsKICAgIH0sCgogICAgYWRkZWRJdGVtOiBmdW5jdGlv
        bihhcnJheSwgaXRlbSwgY2hhbmdlTWV0YSwgaW5zdGFuY2VNZXRhKSB7CiAg
        ICAgIHZhciBndWlkID0gZ3VpZEZvcihpdGVtKTsKCiAgICAgIGlmICghaW5z
        dGFuY2VNZXRhLml0ZW1Db3VudHNbZ3VpZF0pIHsKICAgICAgICBpbnN0YW5j
        ZU1ldGEuaXRlbUNvdW50c1tndWlkXSA9IDE7CiAgICAgIH0gZWxzZSB7CiAg
        ICAgICAgKytpbnN0YW5jZU1ldGEuaXRlbUNvdW50c1tndWlkXTsKICAgICAg
        fQogICAgICBhcnJheS5hZGRPYmplY3QoaXRlbSk7CiAgICAgIHJldHVybiBh
        cnJheTsKICAgIH0sCiAgICByZW1vdmVkSXRlbTogZnVuY3Rpb24oYXJyYXks
        IGl0ZW0sIF8sIGluc3RhbmNlTWV0YSkgewogICAgICB2YXIgZ3VpZCA9IGd1
        aWRGb3IoaXRlbSksCiAgICAgICAgICBpdGVtQ291bnRzID0gaW5zdGFuY2VN
        ZXRhLml0ZW1Db3VudHM7CgogICAgICBpZiAoLS1pdGVtQ291bnRzW2d1aWRd
        ID09PSAwKSB7CiAgICAgICAgYXJyYXkucmVtb3ZlT2JqZWN0KGl0ZW0pOwog
        ICAgICB9CiAgICAgIHJldHVybiBhcnJheTsKICAgIH0KICB9KTsKICByZXR1
        cm4gRW1iZXIuYXJyYXlDb21wdXRlZC5hcHBseShudWxsLCBhcmdzKTsKfTsK
        Ci8qKgogIEFsaWFzIGZvciBbRW1iZXIuY29tcHV0ZWQudW5pcV0oL2FwaS8j
        bWV0aG9kX2NvbXB1dGVkX3VuaXEpLgoKICBAbWV0aG9kIGNvbXB1dGVkLnVu
        aW9uCiAgQGZvciBFbWJlcgogIEBwYXJhbSB7U3RyaW5nfSBwcm9wZXJ0eUtl
        eSoKICBAcmV0dXJuIHtFbWJlci5Db21wdXRlZFByb3BlcnR5fSBjb21wdXRl
        cyBhIG5ldyBhcnJheSB3aXRoIGFsbCB0aGUKICB1bmlxdWUgZWxlbWVudHMg
        ZnJvbSB0aGUgZGVwZW5kZW50IGFycmF5CiovCkVtYmVyLmNvbXB1dGVkLnVu
        aW9uID0gRW1iZXIuY29tcHV0ZWQudW5pcTsKCi8qKgogIEEgY29tcHV0ZWQg
        cHJvcGVydHkgd2hpY2ggcmV0dXJucyBhIG5ldyBhcnJheSB3aXRoIGFsbCB0
        aGUgZHVwbGljYXRlZAogIGVsZW1lbnRzIGZyb20gdHdvIG9yIG1vcmUgZGVw
        ZW5kZW50IGFycmF5cy4KCiAgRXhhbXBsZQoKICBgYGBqYXZhc2NyaXB0CiAg
        dmFyIG9iaiA9IEVtYmVyLk9iamVjdC5jcmVhdGVXaXRoTWl4aW5zKHsKICAg
        IGFkYUZyaWVuZHM6IFsnQ2hhcmxlcyBCYWJiYWdlJywgJ0pvaG4gSG9iaG91
        c2UnLCAnV2lsbGlhbSBLaW5nJywgJ01hcnkgU29tZXJ2aWxsZSddLAogICAg
        Y2hhcmxlc0ZyaWVuZHM6IFsnV2lsbGlhbSBLaW5nJywgJ01hcnkgU29tZXJ2
        aWxsZScsICdBZGEgTG92ZWxhY2UnLCAnR2VvcmdlIFBlYWNvY2snXSwKICAg
        IGZyaWVuZHNJbkNvbW1vbjogRW1iZXIuY29tcHV0ZWQuaW50ZXJzZWN0KCdh
        ZGFGcmllbmRzJywgJ2NoYXJsZXNGcmllbmRzJykKICB9KTsKCiAgb2JqLmdl
        dCgnZnJpZW5kc0luQ29tbW9uJyk7IC8vIFsnV2lsbGlhbSBLaW5nJywgJ01h
        cnkgU29tZXJ2aWxsZSddCiAgYGBgCgogIEBtZXRob2QgY29tcHV0ZWQuaW50
        ZXJzZWN0CiAgQGZvciBFbWJlcgogIEBwYXJhbSB7U3RyaW5nfSBwcm9wZXJ0
        eUtleSoKICBAcmV0dXJuIHtFbWJlci5Db21wdXRlZFByb3BlcnR5fSBjb21w
        dXRlcyBhIG5ldyBhcnJheSB3aXRoIGFsbCB0aGUKICBkdXBsaWNhdGVkIGVs
        ZW1lbnRzIGZyb20gdGhlIGRlcGVuZGVudCBhcnJheXMKKi8KRW1iZXIuY29t
        cHV0ZWQuaW50ZXJzZWN0ID0gZnVuY3Rpb24gKCkgewogIHZhciBnZXREZXBl
        bmRlbnRLZXlHdWlkcyA9IGZ1bmN0aW9uIChjaGFuZ2VNZXRhKSB7CiAgICBy
        ZXR1cm4gbWFwKGNoYW5nZU1ldGEucHJvcGVydHkuX2RlcGVuZGVudEtleXMs
        IGZ1bmN0aW9uIChkZXBlbmRlbnRLZXkpIHsKICAgICAgcmV0dXJuIGd1aWRG
        b3IoZGVwZW5kZW50S2V5KTsKICAgIH0pOwogIH07CgogIHZhciBhcmdzID0g
        YV9zbGljZS5jYWxsKGFyZ3VtZW50cyk7CiAgYXJncy5wdXNoKHsKICAgIGlu
        aXRpYWxpemU6IGZ1bmN0aW9uIChhcnJheSwgY2hhbmdlTWV0YSwgaW5zdGFu
        Y2VNZXRhKSB7CiAgICAgIGluc3RhbmNlTWV0YS5pdGVtQ291bnRzID0ge307
        CiAgICB9LAoKICAgIGFkZGVkSXRlbTogZnVuY3Rpb24oYXJyYXksIGl0ZW0s
        IGNoYW5nZU1ldGEsIGluc3RhbmNlTWV0YSkgewogICAgICB2YXIgaXRlbUd1
        aWQgPSBndWlkRm9yKGl0ZW0pLAogICAgICAgICAgZGVwZW5kZW50R3VpZHMg
        PSBnZXREZXBlbmRlbnRLZXlHdWlkcyhjaGFuZ2VNZXRhKSwKICAgICAgICAg
        IGRlcGVuZGVudEd1aWQgPSBndWlkRm9yKGNoYW5nZU1ldGEuYXJyYXlDaGFu
        Z2VkKSwKICAgICAgICAgIG51bWJlck9mRGVwZW5kZW50QXJyYXlzID0gY2hh
        bmdlTWV0YS5wcm9wZXJ0eS5fZGVwZW5kZW50S2V5cy5sZW5ndGgsCiAgICAg
        ICAgICBpdGVtQ291bnRzID0gaW5zdGFuY2VNZXRhLml0ZW1Db3VudHM7Cgog
        ICAgICBpZiAoIWl0ZW1Db3VudHNbaXRlbUd1aWRdKSB7IGl0ZW1Db3VudHNb
        aXRlbUd1aWRdID0ge307IH0KICAgICAgaWYgKGl0ZW1Db3VudHNbaXRlbUd1
        aWRdW2RlcGVuZGVudEd1aWRdID09PSB1bmRlZmluZWQpIHsgaXRlbUNvdW50
        c1tpdGVtR3VpZF1bZGVwZW5kZW50R3VpZF0gPSAwOyB9CgogICAgICBpZiAo
        KytpdGVtQ291bnRzW2l0ZW1HdWlkXVtkZXBlbmRlbnRHdWlkXSA9PT0gMSAm
        JgogICAgICAgICAgbnVtYmVyT2ZEZXBlbmRlbnRBcnJheXMgPT09IEVtYmVy
        LmtleXMoaXRlbUNvdW50c1tpdGVtR3VpZF0pLmxlbmd0aCkgewoKICAgICAg
        ICBhcnJheS5hZGRPYmplY3QoaXRlbSk7CiAgICAgIH0KICAgICAgcmV0dXJu
        IGFycmF5OwogICAgfSwKICAgIHJlbW92ZWRJdGVtOiBmdW5jdGlvbihhcnJh
        eSwgaXRlbSwgY2hhbmdlTWV0YSwgaW5zdGFuY2VNZXRhKSB7CiAgICAgIHZh
        ciBpdGVtR3VpZCA9IGd1aWRGb3IoaXRlbSksCiAgICAgICAgICBkZXBlbmRl
        bnRHdWlkcyA9IGdldERlcGVuZGVudEtleUd1aWRzKGNoYW5nZU1ldGEpLAog
        ICAgICAgICAgZGVwZW5kZW50R3VpZCA9IGd1aWRGb3IoY2hhbmdlTWV0YS5h
        cnJheUNoYW5nZWQpLAogICAgICAgICAgbnVtYmVyT2ZEZXBlbmRlbnRBcnJh
        eXMgPSBjaGFuZ2VNZXRhLnByb3BlcnR5Ll9kZXBlbmRlbnRLZXlzLmxlbmd0
        aCwKICAgICAgICAgIG51bWJlck9mQXJyYXlzSXRlbUFwcGVhcnNJbiwKICAg
        ICAgICAgIGl0ZW1Db3VudHMgPSBpbnN0YW5jZU1ldGEuaXRlbUNvdW50czsK
        CiAgICAgIGlmIChpdGVtQ291bnRzW2l0ZW1HdWlkXVtkZXBlbmRlbnRHdWlk
        XSA9PT0gdW5kZWZpbmVkKSB7IGl0ZW1Db3VudHNbaXRlbUd1aWRdW2RlcGVu
        ZGVudEd1aWRdID0gMDsgfQogICAgICBpZiAoLS1pdGVtQ291bnRzW2l0ZW1H
        dWlkXVtkZXBlbmRlbnRHdWlkXSA9PT0gMCkgewogICAgICAgIGRlbGV0ZSBp
        dGVtQ291bnRzW2l0ZW1HdWlkXVtkZXBlbmRlbnRHdWlkXTsKICAgICAgICBu
        dW1iZXJPZkFycmF5c0l0ZW1BcHBlYXJzSW4gPSBFbWJlci5rZXlzKGl0ZW1D
        b3VudHNbaXRlbUd1aWRdKS5sZW5ndGg7CgogICAgICAgIGlmIChudW1iZXJP
        ZkFycmF5c0l0ZW1BcHBlYXJzSW4gPT09IDApIHsKICAgICAgICAgIGRlbGV0
        ZSBpdGVtQ291bnRzW2l0ZW1HdWlkXTsKICAgICAgICB9CiAgICAgICAgYXJy
        YXkucmVtb3ZlT2JqZWN0KGl0ZW0pOwogICAgICB9CiAgICAgIHJldHVybiBh
        cnJheTsKICAgIH0KICB9KTsKICByZXR1cm4gRW1iZXIuYXJyYXlDb21wdXRl
        ZC5hcHBseShudWxsLCBhcmdzKTsKfTsKCi8qKgogIEEgY29tcHV0ZWQgcHJv
        cGVydHkgd2hpY2ggcmV0dXJucyBhIG5ldyBhcnJheSB3aXRoIGFsbCB0aGUK
        ICBwcm9wZXJ0aWVzIGZyb20gdGhlIGZpcnN0IGRlcGVuZGVudCBhcnJheSB0
        aGF0IGFyZSBub3QgaW4gdGhlIHNlY29uZAogIGRlcGVuZGVudCBhcnJheS4K
        CiAgRXhhbXBsZQoKICBgYGBqYXZhc2NyaXB0CiAgQXBwLkhhbXN0ZXIgPSBF
        bWJlci5PYmplY3QuZXh0ZW5kKHsKICAgIGxpa2VzOiBbJ2JhbmFuYScsICdn
        cmFwZScsICdrYWxlJ10sCiAgICB3YW50czogRW1iZXIuY29tcHV0ZWQuc2V0
        RGlmZignbGlrZXMnLCAnZnJ1aXRzJykKICB9KTsKCiAgdmFyIGhhbXN0ZXIg
        PSBBcHAuSGFtc3Rlci5jcmVhdGUoe2ZydWl0czogWwogICAgJ2dyYXBlJywK
        ICAgICdrYWxlJywKICBdfSk7CiAgaGFtc3Rlci5nZXQoJ3dhbnRzJyk7IC8v
        IFsnYmFuYW5hJ10KICBgYGAKCiAgQG1ldGhvZCBjb21wdXRlZC5zZXREaWZm
        CiAgQGZvciBFbWJlcgogIEBwYXJhbSB7U3RyaW5nfSBzZXRBUHJvcGVydHkK
        ICBAcGFyYW0ge1N0cmluZ30gc2V0QlByb3BlcnR5CiAgQHJldHVybiB7RW1i
        ZXIuQ29tcHV0ZWRQcm9wZXJ0eX0gY29tcHV0ZXMgYSBuZXcgYXJyYXkgd2l0
        aCBhbGwgdGhlCiAgaXRlbXMgZnJvbSB0aGUgZmlyc3QgZGVwZW5kZW50IGFy
        cmF5IHRoYXQgYXJlIG5vdCBpbiB0aGUgc2Vjb25kCiAgZGVwZW5kZW50IGFy
        cmF5CiovCkVtYmVyLmNvbXB1dGVkLnNldERpZmYgPSBmdW5jdGlvbiAoc2V0
        QVByb3BlcnR5LCBzZXRCUHJvcGVydHkpIHsKICBpZiAoYXJndW1lbnRzLmxl
        bmd0aCAhPT0gMikgewogICAgdGhyb3cgbmV3IEVtYmVyLkVycm9yKCJzZXRE
        aWZmIHJlcXVpcmVzIGV4YWN0bHkgdHdvIGRlcGVuZGVudCBhcnJheXMuIik7
        CiAgfQogIHJldHVybiBFbWJlci5hcnJheUNvbXB1dGVkKHNldEFQcm9wZXJ0
        eSwgc2V0QlByb3BlcnR5LCB7CiAgICBhZGRlZEl0ZW06IGZ1bmN0aW9uIChh
        cnJheSwgaXRlbSwgY2hhbmdlTWV0YSwgaW5zdGFuY2VNZXRhKSB7CiAgICAg
        IHZhciBzZXRBID0gZ2V0KHRoaXMsIHNldEFQcm9wZXJ0eSksCiAgICAgICAg
        ICBzZXRCID0gZ2V0KHRoaXMsIHNldEJQcm9wZXJ0eSk7CgogICAgICBpZiAo
        Y2hhbmdlTWV0YS5hcnJheUNoYW5nZWQgPT09IHNldEEpIHsKICAgICAgICBp
        ZiAoIXNldEIuY29udGFpbnMoaXRlbSkpIHsKICAgICAgICAgIGFycmF5LmFk
        ZE9iamVjdChpdGVtKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAg
        ICAgYXJyYXkucmVtb3ZlT2JqZWN0KGl0ZW0pOwogICAgICB9CiAgICAgIHJl
        dHVybiBhcnJheTsKICAgIH0sCgogICAgcmVtb3ZlZEl0ZW06IGZ1bmN0aW9u
        IChhcnJheSwgaXRlbSwgY2hhbmdlTWV0YSwgaW5zdGFuY2VNZXRhKSB7CiAg
        ICAgIHZhciBzZXRBID0gZ2V0KHRoaXMsIHNldEFQcm9wZXJ0eSksCiAgICAg
        ICAgICBzZXRCID0gZ2V0KHRoaXMsIHNldEJQcm9wZXJ0eSk7CgogICAgICBp
        ZiAoY2hhbmdlTWV0YS5hcnJheUNoYW5nZWQgPT09IHNldEIpIHsKICAgICAg
        ICBpZiAoc2V0QS5jb250YWlucyhpdGVtKSkgewogICAgICAgICAgYXJyYXku
        YWRkT2JqZWN0KGl0ZW0pOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAg
        ICAgICBhcnJheS5yZW1vdmVPYmplY3QoaXRlbSk7CiAgICAgIH0KICAgICAg
        cmV0dXJuIGFycmF5OwogICAgfQogIH0pOwp9OwoKZnVuY3Rpb24gYmluYXJ5
        U2VhcmNoKGFycmF5LCBpdGVtLCBsb3csIGhpZ2gpIHsKICB2YXIgbWlkLCBt
        aWRJdGVtLCByZXMsIGd1aWRNaWQsIGd1aWRJdGVtOwoKICBpZiAoYXJndW1l
        bnRzLmxlbmd0aCA8IDQpIHsgaGlnaCA9IGdldChhcnJheSwgJ2xlbmd0aCcp
        OyB9CiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPCAzKSB7IGxvdyA9IDA7IH0K
        CiAgaWYgKGxvdyA9PT0gaGlnaCkgewogICAgcmV0dXJuIGxvdzsKICB9Cgog
        IG1pZCA9IGxvdyArIE1hdGguZmxvb3IoKGhpZ2ggLSBsb3cpIC8gMik7CiAg
        bWlkSXRlbSA9IGFycmF5Lm9iamVjdEF0KG1pZCk7CgogIGd1aWRNaWQgPSBf
        Z3VpZEZvcihtaWRJdGVtKTsKICBndWlkSXRlbSA9IF9ndWlkRm9yKGl0ZW0p
        OwoKICBpZiAoZ3VpZE1pZCA9PT0gZ3VpZEl0ZW0pIHsKICAgIHJldHVybiBt
        aWQ7CiAgfQoKICByZXMgPSB0aGlzLm9yZGVyKG1pZEl0ZW0sIGl0ZW0pOwog
        IGlmIChyZXMgPT09IDApIHsKICAgIHJlcyA9IGd1aWRNaWQgPCBndWlkSXRl
        bSA/IC0xIDogMTsKICB9CgoKICBpZiAocmVzIDwgMCkgewogICAgcmV0dXJu
        IHRoaXMuYmluYXJ5U2VhcmNoKGFycmF5LCBpdGVtLCBtaWQrMSwgaGlnaCk7
        CiAgfSBlbHNlIGlmIChyZXMgPiAwKSB7CiAgICByZXR1cm4gdGhpcy5iaW5h
        cnlTZWFyY2goYXJyYXksIGl0ZW0sIGxvdywgbWlkKTsKICB9CgogIHJldHVy
        biBtaWQ7CgogIGZ1bmN0aW9uIF9ndWlkRm9yKGl0ZW0pIHsKICAgIGlmIChT
        ZWFyY2hQcm94eS5kZXRlY3RJbnN0YW5jZShpdGVtKSkgewogICAgICByZXR1
        cm4gZ3VpZEZvcihnZXQoaXRlbSwgJ2NvbnRlbnQnKSk7CiAgICB9CiAgICBy
        ZXR1cm4gZ3VpZEZvcihpdGVtKTsKICB9Cn0KCgpTZWFyY2hQcm94eSA9IEVt
        YmVyLk9iamVjdFByb3h5LmV4dGVuZCgpOwoKLyoqCiAgQSBjb21wdXRlZCBw
        cm9wZXJ0eSB3aGljaCByZXR1cm5zIGEgbmV3IGFycmF5IHdpdGggYWxsIHRo
        ZQogIHByb3BlcnRpZXMgZnJvbSB0aGUgZmlyc3QgZGVwZW5kZW50IGFycmF5
        IHNvcnRlZCBiYXNlZCBvbiBhIHByb3BlcnR5CiAgb3Igc29ydCBmdW5jdGlv
        bi4KCiAgVGhlIGNhbGxiYWNrIG1ldGhvZCB5b3UgcHJvdmlkZSBzaG91bGQg
        aGF2ZSB0aGUgZm9sbG93aW5nIHNpZ25hdHVyZToKCiAgYGBgamF2YXNjcmlw
        dAogIGZ1bmN0aW9uKGl0ZW1BLCBpdGVtQik7CiAgYGBgCgogIC0gYGl0ZW1B
        YCB0aGUgZmlyc3QgaXRlbSB0byBjb21wYXJlLgogIC0gYGl0ZW1CYCB0aGUg
        c2Vjb25kIGl0ZW0gdG8gY29tcGFyZS4KCiAgVGhpcyBmdW5jdGlvbiBzaG91
        bGQgcmV0dXJuIGAtMWAgd2hlbiBgaXRlbUFgIHNob3VsZCBjb21lIGJlZm9y
        ZQogIGBpdGVtQmAuIEl0IHNob3VsZCByZXR1cm4gYDFgIHdoZW4gYGl0ZW1B
        YCBzaG91bGQgY29tZSBhZnRlcgogIGBpdGVtQmAuIElmIHRoZSBgaXRlbUFg
        IGFuZCBgaXRlbUJgIGFyZSBlcXVhbCB0aGlzIGZ1bmN0aW9uIHNob3VsZCBy
        ZXR1cm4gYDBgLgoKICBFeGFtcGxlCgogIGBgYGphdmFzY3JpcHQKICB2YXIg
        VG9Eb0xpc3QgPSBFbWJlci5PYmplY3QuZXh0ZW5kKHsKICAgIHRvZG9zU29y
        dGluZzogWyduYW1lJ10sCiAgICBzb3J0ZWRUb2RvczogRW1iZXIuY29tcHV0
        ZWQuc29ydCgndG9kb3MnLCAndG9kb3NTb3J0aW5nJyksCiAgICBwcmlvcml0
        eVRvZG9zOiBFbWJlci5jb21wdXRlZC5zb3J0KCd0b2RvcycsIGZ1bmN0aW9u
        KGEsIGIpewogICAgICBpZiAoYS5wcmlvcml0eSA+IGIucHJpb3JpdHkpIHsK
        ICAgICAgICByZXR1cm4gMTsKICAgICAgfSBlbHNlIGlmIChhLnByaW9yaXR5
        IDwgYi5wcmlvcml0eSkgewogICAgICAgIHJldHVybiAtMTsKICAgICAgfQog
        ICAgICByZXR1cm4gMDsKICAgIH0pLAogIH0pOwogIHZhciB0b2RvTGlzdCA9
        IFRvRG9MaXN0LmNyZWF0ZSh7dG9kb3M6IFsKICAgIHtuYW1lOiAnVW5pdCBU
        ZXN0JywgcHJpb3JpdHk6IDJ9LAogICAge25hbWU6ICdEb2N1bWVudGF0aW9u
        JywgcHJpb3JpdHk6IDN9LAogICAge25hbWU6ICdSZWxlYXNlJywgcHJpb3Jp
        dHk6IDF9CiAgXX0pOwoKICB0b2RvTGlzdC5nZXQoJ3NvcnRlZFRvZG9zJyk7
        IC8vIFt7bmFtZTonRG9jdW1lbnRhdGlvbicsIHByaW9yaXR5OjN9LCB7bmFt
        ZTonUmVsZWFzZScsIHByaW9yaXR5OjF9LCB7bmFtZTonVW5pdCBUZXN0Jywg
        cHJpb3JpdHk6Mn1dCiAgdG9kb0xpc3QuZ2V0KCdwcmlvcml0eVRvZG9zJyk7
        IC8vIFt7bmFtZTonUmVsZWFzZScsIHByaW9yaXR5OjF9LCB7bmFtZTonVW5p
        dCBUZXN0JywgcHJpb3JpdHk6Mn0sIHtuYW1lOidEb2N1bWVudGF0aW9uJywg
        cHJpb3JpdHk6M31dCiAgYGBgCgogIEBtZXRob2QgY29tcHV0ZWQuc29ydAog
        IEBmb3IgRW1iZXIKICBAcGFyYW0ge1N0cmluZ30gZGVwZW5kZW50S2V5CiAg
        QHBhcmFtIHtTdHJpbmcgb3IgRnVuY3Rpb259IHNvcnREZWZpbml0aW9uIGEg
        ZGVwZW5kZW50IGtleSB0byBhbgogIGFycmF5IG9mIHNvcnQgcHJvcGVydGll
        cyBvciBhIGZ1bmN0aW9uIHRvIHVzZSB3aGVuIHNvcnRpbmcKICBAcmV0dXJu
        IHtFbWJlci5Db21wdXRlZFByb3BlcnR5fSBjb21wdXRlcyBhIG5ldyBzb3J0
        ZWQgYXJyYXkgYmFzZWQKICBvbiB0aGUgc29ydCBwcm9wZXJ0eSBhcnJheSBv
        ciBjYWxsYmFjayBmdW5jdGlvbgoqLwpFbWJlci5jb21wdXRlZC5zb3J0ID0g
        ZnVuY3Rpb24gKGl0ZW1zS2V5LCBzb3J0RGVmaW5pdGlvbikgewogIEVtYmVy
        LmFzc2VydCgiRW1iZXIuY29tcHV0ZWQuc29ydCByZXF1aXJlcyB0d28gYXJn
        dW1lbnRzOiBhbiBhcnJheSBrZXkgdG8gc29ydCBhbmQgZWl0aGVyIGEgc29y
        dCBwcm9wZXJ0aWVzIGtleSBvciBzb3J0IGZ1bmN0aW9uIiwgYXJndW1lbnRz
        Lmxlbmd0aCA9PT0gMik7CgogIHZhciBpbml0Rm4sIHNvcnRQcm9wZXJ0aWVz
        S2V5OwoKICBpZiAodHlwZW9mIHNvcnREZWZpbml0aW9uID09PSAnZnVuY3Rp
        b24nKSB7CiAgICBpbml0Rm4gPSBmdW5jdGlvbiAoYXJyYXksIGNoYW5nZU1l
        dGEsIGluc3RhbmNlTWV0YSkgewogICAgICBpbnN0YW5jZU1ldGEub3JkZXIg
        PSBzb3J0RGVmaW5pdGlvbjsKICAgICAgaW5zdGFuY2VNZXRhLmJpbmFyeVNl
        YXJjaCA9IGJpbmFyeVNlYXJjaDsKICAgIH07CiAgfSBlbHNlIHsKICAgIHNv
        cnRQcm9wZXJ0aWVzS2V5ID0gc29ydERlZmluaXRpb247CiAgICBpbml0Rm4g
        PSBmdW5jdGlvbiAoYXJyYXksIGNoYW5nZU1ldGEsIGluc3RhbmNlTWV0YSkg
        ewogICAgICBmdW5jdGlvbiBzZXR1cFNvcnRQcm9wZXJ0aWVzKCkgewogICAg
        ICAgIHZhciBzb3J0UHJvcGVydHlEZWZpbml0aW9ucyA9IGdldCh0aGlzLCBz
        b3J0UHJvcGVydGllc0tleSksCiAgICAgICAgICAgIHNvcnRQcm9wZXJ0eSwK
        ICAgICAgICAgICAgc29ydFByb3BlcnRpZXMgPSBpbnN0YW5jZU1ldGEuc29y
        dFByb3BlcnRpZXMgPSBbXSwKICAgICAgICAgICAgc29ydFByb3BlcnR5QXNj
        ZW5kaW5nID0gaW5zdGFuY2VNZXRhLnNvcnRQcm9wZXJ0eUFzY2VuZGluZyA9
        IHt9LAogICAgICAgICAgICBpZHgsCiAgICAgICAgICAgIGFzYzsKCiAgICAg
        ICAgRW1iZXIuYXNzZXJ0KCJDYW5ub3Qgc29ydDogJyIgKyBzb3J0UHJvcGVy
        dGllc0tleSArICInIGlzIG5vdCBhbiBhcnJheS4iLCBFbWJlci5pc0FycmF5
        KHNvcnRQcm9wZXJ0eURlZmluaXRpb25zKSk7CgogICAgICAgIGNoYW5nZU1l
        dGEucHJvcGVydHkuY2xlYXJJdGVtUHJvcGVydHlLZXlzKGl0ZW1zS2V5KTsK
        CiAgICAgICAgZm9yRWFjaChzb3J0UHJvcGVydHlEZWZpbml0aW9ucywgZnVu
        Y3Rpb24gKHNvcnRQcm9wZXJ0eURlZmluaXRpb24pIHsKICAgICAgICAgIGlm
        ICgoaWR4ID0gc29ydFByb3BlcnR5RGVmaW5pdGlvbi5pbmRleE9mKCc6Jykp
        ICE9PSAtMSkgewogICAgICAgICAgICBzb3J0UHJvcGVydHkgPSBzb3J0UHJv
        cGVydHlEZWZpbml0aW9uLnN1YnN0cmluZygwLCBpZHgpOwogICAgICAgICAg
        ICBhc2MgPSBzb3J0UHJvcGVydHlEZWZpbml0aW9uLnN1YnN0cmluZyhpZHgr
        MSkudG9Mb3dlckNhc2UoKSAhPT0gJ2Rlc2MnOwogICAgICAgICAgfSBlbHNl
        IHsKICAgICAgICAgICAgc29ydFByb3BlcnR5ID0gc29ydFByb3BlcnR5RGVm
        aW5pdGlvbjsKICAgICAgICAgICAgYXNjID0gdHJ1ZTsKICAgICAgICAgIH0K
        CiAgICAgICAgICBzb3J0UHJvcGVydGllcy5wdXNoKHNvcnRQcm9wZXJ0eSk7
        CiAgICAgICAgICBzb3J0UHJvcGVydHlBc2NlbmRpbmdbc29ydFByb3BlcnR5
        XSA9IGFzYzsKICAgICAgICAgIGNoYW5nZU1ldGEucHJvcGVydHkuaXRlbVBy
        b3BlcnR5S2V5KGl0ZW1zS2V5LCBzb3J0UHJvcGVydHkpOwogICAgICAgIH0p
        OwoKICAgICAgICBzb3J0UHJvcGVydHlEZWZpbml0aW9ucy5hZGRPYnNlcnZl
        cignQGVhY2gnLCB0aGlzLCB1cGRhdGVTb3J0UHJvcGVydGllc09uY2UpOwog
        ICAgICB9CgogICAgICBmdW5jdGlvbiB1cGRhdGVTb3J0UHJvcGVydGllc09u
        Y2UoKSB7CiAgICAgICAgRW1iZXIucnVuLm9uY2UodGhpcywgdXBkYXRlU29y
        dFByb3BlcnRpZXMsIGNoYW5nZU1ldGEucHJvcGVydHlOYW1lKTsKICAgICAg
        fQoKICAgICAgZnVuY3Rpb24gdXBkYXRlU29ydFByb3BlcnRpZXMocHJvcGVy
        dHlOYW1lKSB7CiAgICAgICAgc2V0dXBTb3J0UHJvcGVydGllcy5jYWxsKHRo
        aXMpOwogICAgICAgIGNoYW5nZU1ldGEucHJvcGVydHkucmVjb21wdXRlT25j
        ZS5jYWxsKHRoaXMsIHByb3BlcnR5TmFtZSk7CiAgICAgIH0KCiAgICAgIEVt
        YmVyLmFkZE9ic2VydmVyKHRoaXMsIHNvcnRQcm9wZXJ0aWVzS2V5LCB1cGRh
        dGVTb3J0UHJvcGVydGllc09uY2UpOwoKICAgICAgc2V0dXBTb3J0UHJvcGVy
        dGllcy5jYWxsKHRoaXMpOwoKCiAgICAgIGluc3RhbmNlTWV0YS5vcmRlciA9
        IGZ1bmN0aW9uIChpdGVtQSwgaXRlbUIpIHsKICAgICAgICB2YXIgc29ydFBy
        b3BlcnR5LCByZXN1bHQsIGFzYzsKICAgICAgICBmb3IgKHZhciBpID0gMDsg
        aSA8IHRoaXMuc29ydFByb3BlcnRpZXMubGVuZ3RoOyArK2kpIHsKICAgICAg
        ICAgIHNvcnRQcm9wZXJ0eSA9IHRoaXMuc29ydFByb3BlcnRpZXNbaV07CiAg
        ICAgICAgICByZXN1bHQgPSBFbWJlci5jb21wYXJlKGdldChpdGVtQSwgc29y
        dFByb3BlcnR5KSwgZ2V0KGl0ZW1CLCBzb3J0UHJvcGVydHkpKTsKCiAgICAg
        ICAgICBpZiAocmVzdWx0ICE9PSAwKSB7CiAgICAgICAgICAgIGFzYyA9IHRo
        aXMuc29ydFByb3BlcnR5QXNjZW5kaW5nW3NvcnRQcm9wZXJ0eV07CiAgICAg
        ICAgICAgIHJldHVybiBhc2MgPyByZXN1bHQgOiAoLTEgKiByZXN1bHQpOwog
        ICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIDA7CiAgICAg
        IH07CgogICAgICBpbnN0YW5jZU1ldGEuYmluYXJ5U2VhcmNoID0gYmluYXJ5
        U2VhcmNoOwogICAgfTsKICB9CgogIHJldHVybiBFbWJlci5hcnJheUNvbXB1
        dGVkKGl0ZW1zS2V5LCB7CiAgICBpbml0aWFsaXplOiBpbml0Rm4sCgogICAg
        YWRkZWRJdGVtOiBmdW5jdGlvbiAoYXJyYXksIGl0ZW0sIGNoYW5nZU1ldGEs
        IGluc3RhbmNlTWV0YSkgewogICAgICB2YXIgaW5kZXggPSBpbnN0YW5jZU1l
        dGEuYmluYXJ5U2VhcmNoKGFycmF5LCBpdGVtKTsKICAgICAgYXJyYXkuaW5z
        ZXJ0QXQoaW5kZXgsIGl0ZW0pOwogICAgICByZXR1cm4gYXJyYXk7CiAgICB9
        LAoKICAgIHJlbW92ZWRJdGVtOiBmdW5jdGlvbiAoYXJyYXksIGl0ZW0sIGNo
        YW5nZU1ldGEsIGluc3RhbmNlTWV0YSkgewogICAgICB2YXIgcHJveHlQcm9w
        ZXJ0aWVzLCBpbmRleCwgc2VhcmNoSXRlbTsKCiAgICAgIGlmIChjaGFuZ2VN
        ZXRhLnByZXZpb3VzVmFsdWVzKSB7CiAgICAgICAgcHJveHlQcm9wZXJ0aWVz
        ID0gbWVyZ2UoeyBjb250ZW50OiBpdGVtIH0sIGNoYW5nZU1ldGEucHJldmlv
        dXNWYWx1ZXMpOwoKICAgICAgICBzZWFyY2hJdGVtID0gU2VhcmNoUHJveHku
        Y3JlYXRlKHByb3h5UHJvcGVydGllcyk7CiAgICAgIH0gZWxzZSB7CiAgICAg
        ICAgc2VhcmNoSXRlbSA9IGl0ZW07CiAgICAgIH0KCiAgICAgIGluZGV4ID0g
        aW5zdGFuY2VNZXRhLmJpbmFyeVNlYXJjaChhcnJheSwgc2VhcmNoSXRlbSk7
        CiAgICAgIGFycmF5LnJlbW92ZUF0KGluZGV4KTsKICAgICAgcmV0dXJuIGFy
        cmF5OwogICAgfQogIH0pOwp9OwoKfSkoKTsKCgoKKGZ1bmN0aW9uKCkgewpF
        bWJlci5SU1ZQID0gcmVxdWlyZU1vZHVsZSgncnN2cCcpOwoKRW1iZXIuUlNW
        UC5vbmVycm9yRGVmYXVsdCA9IGZ1bmN0aW9uKGVycm9yKSB7CiAgaWYgKGVy
        cm9yIGluc3RhbmNlb2YgRXJyb3IpIHsKICAgIGlmIChFbWJlci50ZXN0aW5n
        KSB7CiAgICAgIGlmIChFbWJlci5UZXN0ICYmIEVtYmVyLlRlc3QuYWRhcHRl
        cikgewogICAgICAgIEVtYmVyLlRlc3QuYWRhcHRlci5leGNlcHRpb24oZXJy
        b3IpOwogICAgICB9IGVsc2UgewogICAgICAgIHRocm93IGVycm9yOwogICAg
        ICB9CiAgICB9IGVsc2UgewogICAgICBFbWJlci5Mb2dnZXIuZXJyb3IoZXJy
        b3Iuc3RhY2spOwogICAgICBFbWJlci5hc3NlcnQoZXJyb3IsIGZhbHNlKTsK
        ICAgIH0KICB9Cn07CgpFbWJlci5SU1ZQLm9uKCdlcnJvcicsIEVtYmVyLlJT
        VlAub25lcnJvckRlZmF1bHQpOwoKfSkoKTsKCgoKKGZ1bmN0aW9uKCkgewov
        KioKQG1vZHVsZSBlbWJlcgpAc3VibW9kdWxlIGVtYmVyLXJ1bnRpbWUKKi8K
        CnZhciBhX3NsaWNlID0gQXJyYXkucHJvdG90eXBlLnNsaWNlOwoKdmFyIGV4
        cGFuZFByb3BlcnRpZXMgPSBFbWJlci5leHBhbmRQcm9wZXJ0aWVzOwoKaWYg
        KEVtYmVyLkVYVEVORF9QUk9UT1RZUEVTID09PSB0cnVlIHx8IEVtYmVyLkVY
        VEVORF9QUk9UT1RZUEVTLkZ1bmN0aW9uKSB7CgogIC8qKgogICAgVGhlIGBw
        cm9wZXJ0eWAgZXh0ZW5zaW9uIG9mIEphdmFzY3JpcHQncyBGdW5jdGlvbiBw
        cm90b3R5cGUgaXMgYXZhaWxhYmxlCiAgICB3aGVuIGBFbWJlci5FWFRFTkRf
        UFJPVE9UWVBFU2Agb3IgYEVtYmVyLkVYVEVORF9QUk9UT1RZUEVTLkZ1bmN0
        aW9uYCBpcwogICAgYHRydWVgLCB3aGljaCBpcyB0aGUgZGVmYXVsdC4KCiAg
        ICBDb21wdXRlZCBwcm9wZXJ0aWVzIGFsbG93IHlvdSB0byB0cmVhdCBhIGZ1
        bmN0aW9uIGxpa2UgYSBwcm9wZXJ0eToKCiAgICBgYGBqYXZhc2NyaXB0CiAg
        ICBNeUFwcC5QcmVzaWRlbnQgPSBFbWJlci5PYmplY3QuZXh0ZW5kKHsKICAg
        ICAgZmlyc3ROYW1lOiAnJywKICAgICAgbGFzdE5hbWU6ICAnJywKCiAgICAg
        IGZ1bGxOYW1lOiBmdW5jdGlvbigpIHsKICAgICAgICByZXR1cm4gdGhpcy5n
        ZXQoJ2ZpcnN0TmFtZScpICsgJyAnICsgdGhpcy5nZXQoJ2xhc3ROYW1lJyk7
        CgogICAgICAgIC8vIENhbGwgdGhpcyBmbGFnIHRvIG1hcmsgdGhlIGZ1bmN0
        aW9uIGFzIGEgcHJvcGVydHkKICAgICAgfS5wcm9wZXJ0eSgpCiAgICB9KTsK
        CiAgICB2YXIgcHJlc2lkZW50ID0gTXlBcHAuUHJlc2lkZW50LmNyZWF0ZSh7
        CiAgICAgIGZpcnN0TmFtZTogIkJhcmFjayIsCiAgICAgIGxhc3ROYW1lOiAi
        T2JhbWEiCiAgICB9KTsKCiAgICBwcmVzaWRlbnQuZ2V0KCdmdWxsTmFtZScp
        OyAgICAvLyAiQmFyYWNrIE9iYW1hIgogICAgYGBgCgogICAgVHJlYXRpbmcg
        YSBmdW5jdGlvbiBsaWtlIGEgcHJvcGVydHkgaXMgdXNlZnVsIGJlY2F1c2Ug
        dGhleSBjYW4gd29yayB3aXRoCiAgICBiaW5kaW5ncywganVzdCBsaWtlIGFu
        eSBvdGhlciBwcm9wZXJ0eS4KCiAgICBNYW55IGNvbXB1dGVkIHByb3BlcnRp
        ZXMgaGF2ZSBkZXBlbmRlbmNpZXMgb24gb3RoZXIgcHJvcGVydGllcy4gRm9y
        CiAgICBleGFtcGxlLCBpbiB0aGUgYWJvdmUgZXhhbXBsZSwgdGhlIGBmdWxs
        TmFtZWAgcHJvcGVydHkgZGVwZW5kcyBvbgogICAgYGZpcnN0TmFtZWAgYW5k
        IGBsYXN0TmFtZWAgdG8gZGV0ZXJtaW5lIGl0cyB2YWx1ZS4gWW91IGNhbiB0
        ZWxsIEVtYmVyCiAgICBhYm91dCB0aGVzZSBkZXBlbmRlbmNpZXMgbGlrZSB0
        aGlzOgoKICAgIGBgYGphdmFzY3JpcHQKICAgIE15QXBwLlByZXNpZGVudCA9
        IEVtYmVyLk9iamVjdC5leHRlbmQoewogICAgICBmaXJzdE5hbWU6ICcnLAog
        ICAgICBsYXN0TmFtZTogICcnLAoKICAgICAgZnVsbE5hbWU6IGZ1bmN0aW9u
        KCkgewogICAgICAgIHJldHVybiB0aGlzLmdldCgnZmlyc3ROYW1lJykgKyAn
        ICcgKyB0aGlzLmdldCgnbGFzdE5hbWUnKTsKCiAgICAgICAgLy8gVGVsbCBF
        bWJlci5qcyB0aGF0IHRoaXMgY29tcHV0ZWQgcHJvcGVydHkgZGVwZW5kcyBv
        biBmaXJzdE5hbWUKICAgICAgICAvLyBhbmQgbGFzdE5hbWUKICAgICAgfS5w
        cm9wZXJ0eSgnZmlyc3ROYW1lJywgJ2xhc3ROYW1lJykKICAgIH0pOwogICAg
        YGBgCgogICAgTWFrZSBzdXJlIHlvdSBsaXN0IHRoZXNlIGRlcGVuZGVuY2ll
        cyBzbyBFbWJlciBrbm93cyB3aGVuIHRvIHVwZGF0ZQogICAgYmluZGluZ3Mg
        dGhhdCBjb25uZWN0IHRvIGEgY29tcHV0ZWQgcHJvcGVydHkuIENoYW5naW5n
        IGEgZGVwZW5kZW5jeQogICAgd2lsbCBub3QgaW1tZWRpYXRlbHkgdHJpZ2dl
        ciBhbiB1cGRhdGUgb2YgdGhlIGNvbXB1dGVkIHByb3BlcnR5LCBidXQKICAg
        IHdpbGwgaW5zdGVhZCBjbGVhciB0aGUgY2FjaGUgc28gdGhhdCBpdCBpcyB1
        cGRhdGVkIHdoZW4gdGhlIG5leHQgYGdldGAKICAgIGlzIGNhbGxlZCBvbiB0
        aGUgcHJvcGVydHkuCgogICAgU2VlIFtFbWJlci5Db21wdXRlZFByb3BlcnR5
        XSgvYXBpL2NsYXNzZXMvRW1iZXIuQ29tcHV0ZWRQcm9wZXJ0eS5odG1sKSwg
        W0VtYmVyLmNvbXB1dGVkXSgvYXBpLyNtZXRob2RfY29tcHV0ZWQpLgoKICAg
        IEBtZXRob2QgcHJvcGVydHkKICAgIEBmb3IgRnVuY3Rpb24KICAqLwogIEZ1
        bmN0aW9uLnByb3RvdHlwZS5wcm9wZXJ0eSA9IGZ1bmN0aW9uKCkgewogICAg
        dmFyIHJldCA9IEVtYmVyLmNvbXB1dGVkKHRoaXMpOwogICAgLy8gQ29tcHV0
        ZWRQcm9wZXJ0eS5wcm90b3R5cGUucHJvcGVydHkgZXhwYW5kcyBwcm9wZXJ0
        aWVzOyBubyBuZWVkIGZvciB1cyB0bwogICAgLy8gZG8gc28gaGVyZS4KICAg
        IHJldHVybiByZXQucHJvcGVydHkuYXBwbHkocmV0LCBhcmd1bWVudHMpOwog
        IH07CgogIC8qKgogICAgVGhlIGBvYnNlcnZlc2AgZXh0ZW5zaW9uIG9mIEph
        dmFzY3JpcHQncyBGdW5jdGlvbiBwcm90b3R5cGUgaXMgYXZhaWxhYmxlCiAg
        ICB3aGVuIGBFbWJlci5FWFRFTkRfUFJPVE9UWVBFU2Agb3IgYEVtYmVyLkVY
        VEVORF9QUk9UT1RZUEVTLkZ1bmN0aW9uYCBpcwogICAgdHJ1ZSwgd2hpY2gg
        aXMgdGhlIGRlZmF1bHQuCgogICAgWW91IGNhbiBvYnNlcnZlIHByb3BlcnR5
        IGNoYW5nZXMgc2ltcGx5IGJ5IGFkZGluZyB0aGUgYG9ic2VydmVzYAogICAg
        Y2FsbCB0byB0aGUgZW5kIG9mIHlvdXIgbWV0aG9kIGRlY2xhcmF0aW9ucyBp
        biBjbGFzc2VzIHRoYXQgeW91IHdyaXRlLgogICAgRm9yIGV4YW1wbGU6Cgog
        ICAgYGBgamF2YXNjcmlwdAogICAgRW1iZXIuT2JqZWN0LmV4dGVuZCh7CiAg
        ICAgIHZhbHVlT2JzZXJ2ZXI6IGZ1bmN0aW9uKCkgewogICAgICAgIC8vIEV4
        ZWN1dGVzIHdoZW5ldmVyIHRoZSAidmFsdWUiIHByb3BlcnR5IGNoYW5nZXMK
        ICAgICAgfS5vYnNlcnZlcygndmFsdWUnKQogICAgfSk7CiAgICBgYGAKCiAg
        ICBJbiB0aGUgZnV0dXJlIHRoaXMgbWV0aG9kIG1heSBiZWNvbWUgYXN5bmNo
        cm9ub3VzLiBJZiB5b3Ugd2FudCB0byBlbnN1cmUKICAgIHN5bmNocm9ub3Vz
        IGJlaGF2aW9yLCB1c2UgYG9ic2VydmVzSW1tZWRpYXRlbHlgLgoKICAgIFNl
        ZSBgRW1iZXIub2JzZXJ2ZXJgLgoKICAgIEBtZXRob2Qgb2JzZXJ2ZXMKICAg
        IEBmb3IgRnVuY3Rpb24KICAqLwogIEZ1bmN0aW9uLnByb3RvdHlwZS5vYnNl
        cnZlcyA9IGZ1bmN0aW9uKCkgewogICAgdmFyIGFkZFdhdGNoZWRQcm9wZXJ0
        eSA9IGZ1bmN0aW9uIChvYnMpIHsgd2F0Y2hlZC5wdXNoKG9icyk7IH07CiAg
        ICB2YXIgd2F0Y2hlZCA9IFtdOwoKICAgIGZvciAodmFyIGk9MDsgaTxhcmd1
        bWVudHMubGVuZ3RoOyArK2kpIHsKICAgICAgZXhwYW5kUHJvcGVydGllcyhh
        cmd1bWVudHNbaV0sIGFkZFdhdGNoZWRQcm9wZXJ0eSk7CiAgICB9CgogICAg
        dGhpcy5fX2VtYmVyX29ic2VydmVzX18gPSB3YXRjaGVkOwoKICAgIHJldHVy
        biB0aGlzOwogIH07CgogIC8qKgogICAgVGhlIGBvYnNlcnZlc0ltbWVkaWF0
        ZWx5YCBleHRlbnNpb24gb2YgSmF2YXNjcmlwdCdzIEZ1bmN0aW9uIHByb3Rv
        dHlwZSBpcwogICAgYXZhaWxhYmxlIHdoZW4gYEVtYmVyLkVYVEVORF9QUk9U
        T1RZUEVTYCBvcgogICAgYEVtYmVyLkVYVEVORF9QUk9UT1RZUEVTLkZ1bmN0
        aW9uYCBpcyB0cnVlLCB3aGljaCBpcyB0aGUgZGVmYXVsdC4KCiAgICBZb3Ug
        Y2FuIG9ic2VydmUgcHJvcGVydHkgY2hhbmdlcyBzaW1wbHkgYnkgYWRkaW5n
        IHRoZSBgb2JzZXJ2ZXNJbW1lZGlhdGVseWAKICAgIGNhbGwgdG8gdGhlIGVu
        ZCBvZiB5b3VyIG1ldGhvZCBkZWNsYXJhdGlvbnMgaW4gY2xhc3NlcyB0aGF0
        IHlvdSB3cml0ZS4KICAgIEZvciBleGFtcGxlOgoKICAgIGBgYGphdmFzY3Jp
        cHQKICAgIEVtYmVyLk9iamVjdC5leHRlbmQoewogICAgICB2YWx1ZU9ic2Vy
        dmVyOiBmdW5jdGlvbigpIHsKICAgICAgICAvLyBFeGVjdXRlcyBpbW1lZGlh
        dGVseSBhZnRlciB0aGUgInZhbHVlIiBwcm9wZXJ0eSBjaGFuZ2VzCiAgICAg
        IH0ub2JzZXJ2ZXNJbW1lZGlhdGVseSgndmFsdWUnKQogICAgfSk7CiAgICBg
        YGAKCiAgICBJbiB0aGUgZnV0dXJlLCBgb2JzZXJ2ZXNgIG1heSBiZWNvbWUg
        YXN5bmNocm9ub3VzLiBJbiB0aGlzIGV2ZW50LAogICAgYG9ic2VydmVzSW1t
        ZWRpYXRlbHlgIHdpbGwgbWFpbnRhaW4gdGhlIHN5bmNocm9ub3VzIGJlaGF2
        aW9yLgoKICAgIFNlZSBgRW1iZXIuaW1tZWRpYXRlT2JzZXJ2ZXJgLgoKICAg
        IEBtZXRob2Qgb2JzZXJ2ZXNJbW1lZGlhdGVseQogICAgQGZvciBGdW5jdGlv
        bgogICovCiAgRnVuY3Rpb24ucHJvdG90eXBlLm9ic2VydmVzSW1tZWRpYXRl
        bHkgPSBmdW5jdGlvbigpIHsKICAgIGZvciAodmFyIGk9MCwgbD1hcmd1bWVu
        dHMubGVuZ3RoOyBpPGw7IGkrKykgewogICAgICB2YXIgYXJnID0gYXJndW1l
        bnRzW2ldOwogICAgICBFbWJlci5hc3NlcnQoIkltbWVkaWF0ZSBvYnNlcnZl
        cnMgbXVzdCBvYnNlcnZlIGludGVybmFsIHByb3BlcnRpZXMgb25seSwgbm90
        IHByb3BlcnRpZXMgb24gb3RoZXIgb2JqZWN0cy4iLCBhcmcuaW5kZXhPZign
        LicpID09PSAtMSk7CiAgICB9CgogICAgLy8gb2JzZXJ2ZXMgaGFuZGxlcyBw
        cm9wZXJ0eSBleHBhbnNpb24KICAgIHJldHVybiB0aGlzLm9ic2VydmVzLmFw
        cGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgfTsKCiAgLyoqCiAgICBUaGUgYG9i
        c2VydmVzQmVmb3JlYCBleHRlbnNpb24gb2YgSmF2YXNjcmlwdCdzIEZ1bmN0
        aW9uIHByb3RvdHlwZSBpcwogICAgYXZhaWxhYmxlIHdoZW4gYEVtYmVyLkVY
        VEVORF9QUk9UT1RZUEVTYCBvcgogICAgYEVtYmVyLkVYVEVORF9QUk9UT1RZ
        UEVTLkZ1bmN0aW9uYCBpcyB0cnVlLCB3aGljaCBpcyB0aGUgZGVmYXVsdC4K
        CiAgICBZb3UgY2FuIGdldCBub3RpZmllZCB3aGVuIGEgcHJvcGVydHkgY2hh
        bmdlIGlzIGFib3V0IHRvIGhhcHBlbiBieQogICAgYnkgYWRkaW5nIHRoZSBg
        b2JzZXJ2ZXNCZWZvcmVgIGNhbGwgdG8gdGhlIGVuZCBvZiB5b3VyIG1ldGhv
        ZAogICAgZGVjbGFyYXRpb25zIGluIGNsYXNzZXMgdGhhdCB5b3Ugd3JpdGUu
        IEZvciBleGFtcGxlOgoKICAgIGBgYGphdmFzY3JpcHQKICAgIEVtYmVyLk9i
        amVjdC5leHRlbmQoewogICAgICB2YWx1ZU9ic2VydmVyOiBmdW5jdGlvbigp
        IHsKICAgICAgICAvLyBFeGVjdXRlcyB3aGVuZXZlciB0aGUgInZhbHVlIiBw
        cm9wZXJ0eSBpcyBhYm91dCB0byBjaGFuZ2UKICAgICAgfS5vYnNlcnZlc0Jl
        Zm9yZSgndmFsdWUnKQogICAgfSk7CiAgICBgYGAKCiAgICBTZWUgYEVtYmVy
        LmJlZm9yZU9ic2VydmVyYC4KCiAgICBAbWV0aG9kIG9ic2VydmVzQmVmb3Jl
        CiAgICBAZm9yIEZ1bmN0aW9uCiAgKi8KICBGdW5jdGlvbi5wcm90b3R5cGUu
        b2JzZXJ2ZXNCZWZvcmUgPSBmdW5jdGlvbigpIHsKICAgIHZhciBhZGRXYXRj
        aGVkUHJvcGVydHkgPSBmdW5jdGlvbiAob2JzKSB7IHdhdGNoZWQucHVzaChv
        YnMpOyB9OwogICAgdmFyIHdhdGNoZWQgPSBbXTsKCiAgICBmb3IgKHZhciBp
        PTA7IGk8YXJndW1lbnRzLmxlbmd0aDsgKytpKSB7CiAgICAgIGV4cGFuZFBy
        b3BlcnRpZXMoYXJndW1lbnRzW2ldLCBhZGRXYXRjaGVkUHJvcGVydHkpOwog
        ICAgfQoKICAgIHRoaXMuX19lbWJlcl9vYnNlcnZlc0JlZm9yZV9fID0gd2F0
        Y2hlZDsKCiAgICByZXR1cm4gdGhpczsKICB9OwoKICAvKioKICAgIFRoZSBg
        b25gIGV4dGVuc2lvbiBvZiBKYXZhc2NyaXB0J3MgRnVuY3Rpb24gcHJvdG90
        eXBlIGlzIGF2YWlsYWJsZQogICAgd2hlbiBgRW1iZXIuRVhURU5EX1BST1RP
        VFlQRVNgIG9yIGBFbWJlci5FWFRFTkRfUFJPVE9UWVBFUy5GdW5jdGlvbmAg
        aXMKICAgIHRydWUsIHdoaWNoIGlzIHRoZSBkZWZhdWx0LgoKICAgIFlvdSBj
        YW4gbGlzdGVuIGZvciBldmVudHMgc2ltcGx5IGJ5IGFkZGluZyB0aGUgYG9u
        YCBjYWxsIHRvIHRoZSBlbmQgb2YKICAgIHlvdXIgbWV0aG9kIGRlY2xhcmF0
        aW9ucyBpbiBjbGFzc2VzIG9yIG1peGlucyB0aGF0IHlvdSB3cml0ZS4gRm9y
        IGV4YW1wbGU6CgogICAgYGBgamF2YXNjcmlwdAogICAgRW1iZXIuTWl4aW4u
        Y3JlYXRlKHsKICAgICAgZG9Tb21ldGhpbmdXaXRoRWxlbWVudDogZnVuY3Rp
        b24oKSB7CiAgICAgICAgLy8gRXhlY3V0ZXMgd2hlbmV2ZXIgdGhlICJkaWRJ
        bnNlcnRFbGVtZW50IiBldmVudCBmaXJlcwogICAgICB9Lm9uKCdkaWRJbnNl
        cnRFbGVtZW50JykKICAgIH0pOwogICAgYGBgCgogICAgU2VlIGBFbWJlci5v
        bmAuCgogICAgQG1ldGhvZCBvbgogICAgQGZvciBGdW5jdGlvbgogICovCiAg
        RnVuY3Rpb24ucHJvdG90eXBlLm9uID0gZnVuY3Rpb24oKSB7CiAgICB2YXIg
        ZXZlbnRzID0gYV9zbGljZS5jYWxsKGFyZ3VtZW50cyk7CiAgICB0aGlzLl9f
        ZW1iZXJfbGlzdGVuc19fID0gZXZlbnRzOwogICAgcmV0dXJuIHRoaXM7CiAg
        fTsKfQoKCn0pKCk7CgoKCihmdW5jdGlvbigpIHsKCn0pKCk7CgoKCihmdW5j
        dGlvbigpIHsKLyoqCkBtb2R1bGUgZW1iZXIKQHN1Ym1vZHVsZSBlbWJlci1y
        dW50aW1lCiovCgoKLyoqCiAgSW1wbGVtZW50cyBzb21lIHN0YW5kYXJkIG1l
        dGhvZHMgZm9yIGNvbXBhcmluZyBvYmplY3RzLiBBZGQgdGhpcyBtaXhpbiB0
        bwogIGFueSBjbGFzcyB5b3UgY3JlYXRlIHRoYXQgY2FuIGNvbXBhcmUgaXRz
        IGluc3RhbmNlcy4KCiAgWW91IHNob3VsZCBpbXBsZW1lbnQgdGhlIGBjb21w
        YXJlKClgIG1ldGhvZC4KCiAgQGNsYXNzIENvbXBhcmFibGUKICBAbmFtZXNw
        YWNlIEVtYmVyCiAgQHNpbmNlIEVtYmVyIDAuOQoqLwpFbWJlci5Db21wYXJh
        YmxlID0gRW1iZXIuTWl4aW4uY3JlYXRlKHsKCiAgLyoqCiAgICBPdmVycmlk
        ZSB0byByZXR1cm4gdGhlIHJlc3VsdCBvZiB0aGUgY29tcGFyaXNvbiBvZiB0
        aGUgdHdvIHBhcmFtZXRlcnMuIFRoZQogICAgY29tcGFyZSBtZXRob2Qgc2hv
        dWxkIHJldHVybjoKCiAgICAtIGAtMWAgaWYgYGEgPCBiYAogICAgLSBgMGAg
        aWYgYGEgPT0gYmAKICAgIC0gYDFgIGlmIGBhID4gYmAKCiAgICBEZWZhdWx0
        IGltcGxlbWVudGF0aW9uIHJhaXNlcyBhbiBleGNlcHRpb24uCgogICAgQG1l
        dGhvZCBjb21wYXJlCiAgICBAcGFyYW0gYSB7T2JqZWN0fSB0aGUgZmlyc3Qg
        b2JqZWN0IHRvIGNvbXBhcmUKICAgIEBwYXJhbSBiIHtPYmplY3R9IHRoZSBz
        ZWNvbmQgb2JqZWN0IHRvIGNvbXBhcmUKICAgIEByZXR1cm4ge0ludGVnZXJ9
        IHRoZSByZXN1bHQgb2YgdGhlIGNvbXBhcmlzb24KICAqLwogIGNvbXBhcmU6
        IEVtYmVyLnJlcXVpcmVkKEZ1bmN0aW9uKQoKfSk7CgoKfSkoKTsKCgoKKGZ1
        bmN0aW9uKCkgewovKioKQG1vZHVsZSBlbWJlcgpAc3VibW9kdWxlIGVtYmVy
        LXJ1bnRpbWUKKi8KCgoKdmFyIGdldCA9IEVtYmVyLmdldCwgc2V0ID0gRW1i
        ZXIuc2V0OwoKLyoqCiAgSW1wbGVtZW50cyBzb21lIHN0YW5kYXJkIG1ldGhv
        ZHMgZm9yIGNvcHlpbmcgYW4gb2JqZWN0LiBBZGQgdGhpcyBtaXhpbiB0bwog
        IGFueSBvYmplY3QgeW91IGNyZWF0ZSB0aGF0IGNhbiBjcmVhdGUgYSBjb3B5
        IG9mIGl0c2VsZi4gVGhpcyBtaXhpbiBpcwogIGFkZGVkIGF1dG9tYXRpY2Fs
        bHkgdG8gdGhlIGJ1aWx0LWluIGFycmF5LgoKICBZb3Ugc2hvdWxkIGdlbmVy
        YWxseSBpbXBsZW1lbnQgdGhlIGBjb3B5KClgIG1ldGhvZCB0byByZXR1cm4g
        YSBjb3B5IG9mIHRoZQogIHJlY2VpdmVyLgoKICBOb3RlIHRoYXQgYGZyb3pl
        bkNvcHkoKWAgd2lsbCBvbmx5IHdvcmsgaWYgeW91IGFsc28gaW1wbGVtZW50
        CiAgYEVtYmVyLkZyZWV6YWJsZWAuCgogIEBjbGFzcyBDb3B5YWJsZQogIEBu
        YW1lc3BhY2UgRW1iZXIKICBAc2luY2UgRW1iZXIgMC45CiovCkVtYmVyLkNv
        cHlhYmxlID0gRW1iZXIuTWl4aW4uY3JlYXRlKHsKCiAgLyoqCiAgICBPdmVy
        cmlkZSB0byByZXR1cm4gYSBjb3B5IG9mIHRoZSByZWNlaXZlci4gRGVmYXVs
        dCBpbXBsZW1lbnRhdGlvbiByYWlzZXMKICAgIGFuIGV4Y2VwdGlvbi4KCiAg
        ICBAbWV0aG9kIGNvcHkKICAgIEBwYXJhbSB7Qm9vbGVhbn0gZGVlcCBpZiBg
        dHJ1ZWAsIGEgZGVlcCBjb3B5IG9mIHRoZSBvYmplY3Qgc2hvdWxkIGJlIG1h
        ZGUKICAgIEByZXR1cm4ge09iamVjdH0gY29weSBvZiByZWNlaXZlcgogICov
        CiAgY29weTogRW1iZXIucmVxdWlyZWQoRnVuY3Rpb24pLAoKICAvKioKICAg
        IElmIHRoZSBvYmplY3QgaW1wbGVtZW50cyBgRW1iZXIuRnJlZXphYmxlYCwg
        dGhlbiB0aGlzIHdpbGwgcmV0dXJuIGEgbmV3CiAgICBjb3B5IGlmIHRoZSBv
        YmplY3QgaXMgbm90IGZyb3plbiBhbmQgdGhlIHJlY2VpdmVyIGlmIHRoZSBv
        YmplY3QgaXMgZnJvemVuLgoKICAgIFJhaXNlcyBhbiBleGNlcHRpb24gaWYg
        eW91IHRyeSB0byBjYWxsIHRoaXMgbWV0aG9kIG9uIGEgb2JqZWN0IHRoYXQg
        ZG9lcwogICAgbm90IHN1cHBvcnQgZnJlZXppbmcuCgogICAgWW91IHNob3Vs
        ZCB1c2UgdGhpcyBtZXRob2Qgd2hlbmV2ZXIgeW91IHdhbnQgYSBjb3B5IG9m
        IGEgZnJlZXphYmxlIG9iamVjdAogICAgc2luY2UgYSBmcmVlemFibGUgb2Jq
        ZWN0IGNhbiBzaW1wbHkgcmV0dXJuIGl0c2VsZiB3aXRob3V0IGFjdHVhbGx5
        CiAgICBjb25zdW1pbmcgbW9yZSBtZW1vcnkuCgogICAgQG1ldGhvZCBmcm96
        ZW5Db3B5CiAgICBAcmV0dXJuIHtPYmplY3R9IGNvcHkgb2YgcmVjZWl2ZXIg
        b3IgcmVjZWl2ZXIKICAqLwogIGZyb3plbkNvcHk6IGZ1bmN0aW9uKCkgewog
        ICAgaWYgKEVtYmVyLkZyZWV6YWJsZSAmJiBFbWJlci5GcmVlemFibGUuZGV0
        ZWN0KHRoaXMpKSB7CiAgICAgIHJldHVybiBnZXQodGhpcywgJ2lzRnJvemVu
        JykgPyB0aGlzIDogdGhpcy5jb3B5KCkuZnJlZXplKCk7CiAgICB9IGVsc2Ug
        ewogICAgICB0aHJvdyBuZXcgRW1iZXIuRXJyb3IoRW1iZXIuU3RyaW5nLmZt
        dCgiJUAgZG9lcyBub3Qgc3VwcG9ydCBmcmVlemluZyIsIFt0aGlzXSkpOwog
        ICAgfQogIH0KfSk7Cgp9KSgpOwoKCgooZnVuY3Rpb24oKSB7Ci8qKgpAbW9k
        dWxlIGVtYmVyCkBzdWJtb2R1bGUgZW1iZXItcnVudGltZQoqLwoKCnZhciBn
        ZXQgPSBFbWJlci5nZXQsIHNldCA9IEVtYmVyLnNldDsKCi8qKgogIFRoZSBg
        RW1iZXIuRnJlZXphYmxlYCBtaXhpbiBpbXBsZW1lbnRzIHNvbWUgYmFzaWMg
        bWV0aG9kcyBmb3IgbWFya2luZyBhbgogIG9iamVjdCBhcyBmcm96ZW4uIE9u
        Y2UgYW4gb2JqZWN0IGlzIGZyb3plbiBpdCBzaG91bGQgYmUgcmVhZCBvbmx5
        LiBObyBjaGFuZ2VzCiAgbWF5IGJlIG1hZGUgdGhlIGludGVybmFsIHN0YXRl
        IG9mIHRoZSBvYmplY3QuCgogICMjIEVuZm9yY2VtZW50CgogIFRvIGZ1bGx5
        IHN1cHBvcnQgZnJlZXppbmcgaW4geW91ciBzdWJjbGFzcywgeW91IG11c3Qg
        aW5jbHVkZSB0aGlzIG1peGluIGFuZAogIG92ZXJyaWRlIGFueSBtZXRob2Qg
        dGhhdCBtaWdodCBhbHRlciBhbnkgcHJvcGVydHkgb24gdGhlIG9iamVjdCB0
        byBpbnN0ZWFkCiAgcmFpc2UgYW4gZXhjZXB0aW9uLiBZb3UgY2FuIGNoZWNr
        IHRoZSBzdGF0ZSBvZiBhbiBvYmplY3QgYnkgY2hlY2tpbmcgdGhlCiAgYGlz
        RnJvemVuYCBwcm9wZXJ0eS4KCiAgQWx0aG91Z2ggZnV0dXJlIHZlcnNpb25z
        IG9mIEphdmFTY3JpcHQgbWF5IHN1cHBvcnQgbGFuZ3VhZ2UtbGV2ZWwgZnJl
        ZXppbmcKICBvYmplY3Qgb2JqZWN0cywgdGhhdCBpcyBub3QgdGhlIGNhc2Ug
        dG9kYXkuIEV2ZW4gaWYgYW4gb2JqZWN0IGlzIGZyZWV6YWJsZSwKICBpdCBp
        cyBzdGlsbCB0ZWNobmljYWxseSBwb3NzaWJsZSB0byBtb2RpZnkgdGhlIG9i
        amVjdCwgZXZlbiB0aG91Z2ggaXQgY291bGQKICBicmVhayBvdGhlciBwYXJ0
        cyBvZiB5b3VyIGFwcGxpY2F0aW9uIHRoYXQgZG8gbm90IGV4cGVjdCBhIGZy
        b3plbiBvYmplY3QgdG8KICBjaGFuZ2UuIEl0IGlzLCB0aGVyZWZvcmUsIHZl
        cnkgaW1wb3J0YW50IHRoYXQgeW91IGFsd2F5cyByZXNwZWN0IHRoZQogIGBp
        c0Zyb3plbmAgcHJvcGVydHkgb24gYWxsIGZyZWV6YWJsZSBvYmplY3RzLgoK
        ICAjIyBFeGFtcGxlIFVzYWdlCgogIFRoZSBleGFtcGxlIGJlbG93IHNob3dz
        IGEgc2ltcGxlIG9iamVjdCB0aGF0IGltcGxlbWVudCB0aGUgYEVtYmVyLkZy
        ZWV6YWJsZWAKICBwcm90b2NvbC4KCiAgYGBgamF2YXNjcmlwdAogIENvbnRh
        Y3QgPSBFbWJlci5PYmplY3QuZXh0ZW5kKEVtYmVyLkZyZWV6YWJsZSwgewog
        ICAgZmlyc3ROYW1lOiBudWxsLAogICAgbGFzdE5hbWU6IG51bGwsCgogICAg
        Ly8gc3dhcHMgdGhlIG5hbWVzCiAgICBzd2FwTmFtZXM6IGZ1bmN0aW9uKCkg
        ewogICAgICBpZiAodGhpcy5nZXQoJ2lzRnJvemVuJykpIHRocm93IEVtYmVy
        LkZST1pFTl9FUlJPUjsKICAgICAgdmFyIHRtcCA9IHRoaXMuZ2V0KCdmaXJz
        dE5hbWUnKTsKICAgICAgdGhpcy5zZXQoJ2ZpcnN0TmFtZScsIHRoaXMuZ2V0
        KCdsYXN0TmFtZScpKTsKICAgICAgdGhpcy5zZXQoJ2xhc3ROYW1lJywgdG1w
        KTsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CgogIH0pOwoKICBjID0gQ29u
        dGFjdC5jcmVhdGUoeyBmaXJzdE5hbWU6ICJKb2huIiwgbGFzdE5hbWU6ICJE
        b2UiIH0pOwogIGMuc3dhcE5hbWVzKCk7ICAvLyByZXR1cm5zIGMKICBjLmZy
        ZWV6ZSgpOwogIGMuc3dhcE5hbWVzKCk7ICAvLyBFWENFUFRJT04KICBgYGAK
        CiAgIyMgQ29weWluZwoKICBVc3VhbGx5IHRoZSBgRW1iZXIuRnJlZXphYmxl
        YCBwcm90b2NvbCBpcyBpbXBsZW1lbnRlZCBpbiBjb29wZXJhdGlvbiB3aXRo
        IHRoZQogIGBFbWJlci5Db3B5YWJsZWAgcHJvdG9jb2wsIHdoaWNoIGRlZmlu
        ZXMgYSBgZnJvemVuQ29weSgpYCBtZXRob2QgdGhhdCB3aWxsCiAgcmV0dXJu
        IGEgZnJvemVuIG9iamVjdCwgaWYgdGhlIG9iamVjdCBpbXBsZW1lbnRzIHRo
        aXMgbWV0aG9kIGFzIHdlbGwuCgogIEBjbGFzcyBGcmVlemFibGUKICBAbmFt
        ZXNwYWNlIEVtYmVyCiAgQHNpbmNlIEVtYmVyIDAuOQoqLwpFbWJlci5GcmVl
        emFibGUgPSBFbWJlci5NaXhpbi5jcmVhdGUoewoKICAvKioKICAgIFNldCB0
        byBgdHJ1ZWAgd2hlbiB0aGUgb2JqZWN0IGlzIGZyb3plbi4gVXNlIHRoaXMg
        cHJvcGVydHkgdG8gZGV0ZWN0CiAgICB3aGV0aGVyIHlvdXIgb2JqZWN0IGlz
        IGZyb3plbiBvciBub3QuCgogICAgQHByb3BlcnR5IGlzRnJvemVuCiAgICBA
        dHlwZSBCb29sZWFuCiAgKi8KICBpc0Zyb3plbjogZmFsc2UsCgogIC8qKgog
        ICAgRnJlZXplcyB0aGUgb2JqZWN0LiBPbmNlIHRoaXMgbWV0aG9kIGhhcyBi
        ZWVuIGNhbGxlZCB0aGUgb2JqZWN0IHNob3VsZAogICAgbm8gbG9uZ2VyIGFs
        bG93IGFueSBwcm9wZXJ0aWVzIHRvIGJlIGVkaXRlZC4KCiAgICBAbWV0aG9k
        IGZyZWV6ZQogICAgQHJldHVybiB7T2JqZWN0fSByZWNlaXZlcgogICovCiAg
        ZnJlZXplOiBmdW5jdGlvbigpIHsKICAgIGlmIChnZXQodGhpcywgJ2lzRnJv
        emVuJykpIHJldHVybiB0aGlzOwogICAgc2V0KHRoaXMsICdpc0Zyb3plbics
        IHRydWUpOwogICAgcmV0dXJuIHRoaXM7CiAgfQoKfSk7CgpFbWJlci5GUk9a
        RU5fRVJST1IgPSAiRnJvemVuIG9iamVjdCBjYW5ub3QgYmUgbW9kaWZpZWQu
        IjsKCn0pKCk7CgoKCihmdW5jdGlvbigpIHsKLyoqCkBtb2R1bGUgZW1iZXIK
        QHN1Ym1vZHVsZSBlbWJlci1ydW50aW1lCiovCgp2YXIgZm9yRWFjaCA9IEVt
        YmVyLkVudW1lcmFibGVVdGlscy5mb3JFYWNoOwoKLyoqCiAgVGhpcyBtaXhp
        biBkZWZpbmVzIHRoZSBBUEkgZm9yIG1vZGlmeWluZyBnZW5lcmljIGVudW1l
        cmFibGVzLiBUaGVzZSBtZXRob2RzCiAgY2FuIGJlIGFwcGxpZWQgdG8gYW4g
        b2JqZWN0IHJlZ2FyZGxlc3Mgb2Ygd2hldGhlciBpdCBpcyBvcmRlcmVkIG9y
        CiAgdW5vcmRlcmVkLgoKICBOb3RlIHRoYXQgYW4gRW51bWVyYWJsZSBjYW4g
        Y2hhbmdlIGV2ZW4gaWYgaXQgZG9lcyBub3QgaW1wbGVtZW50IHRoaXMgbWl4
        aW4uCiAgRm9yIGV4YW1wbGUsIGEgTWFwcGVkRW51bWVyYWJsZSBjYW5ub3Qg
        YmUgZGlyZWN0bHkgbW9kaWZpZWQgYnV0IGlmIGl0cwogIHVuZGVybHlpbmcg
        ZW51bWVyYWJsZSBjaGFuZ2VzLCBpdCB3aWxsIGNoYW5nZSBhbHNvLgoKICAj
        IyBBZGRpbmcgT2JqZWN0cwoKICBUbyBhZGQgYW4gb2JqZWN0IHRvIGFuIGVu
        dW1lcmFibGUsIHVzZSB0aGUgYGFkZE9iamVjdCgpYCBtZXRob2QuIFRoaXMK
        ICBtZXRob2Qgd2lsbCBvbmx5IGFkZCB0aGUgb2JqZWN0IHRvIHRoZSBlbnVt
        ZXJhYmxlIGlmIHRoZSBvYmplY3QgaXMgbm90CiAgYWxyZWFkeSBwcmVzZW50
        IGFuZCBpcyBvZiBhIHR5cGUgc3VwcG9ydGVkIGJ5IHRoZSBlbnVtZXJhYmxl
        LgoKICBgYGBqYXZhc2NyaXB0CiAgc2V0LmFkZE9iamVjdChjb250YWN0KTsK
        ICBgYGAKCiAgIyMgUmVtb3ZpbmcgT2JqZWN0cwoKICBUbyByZW1vdmUgYW4g
        b2JqZWN0IGZyb20gYW4gZW51bWVyYWJsZSwgdXNlIHRoZSBgcmVtb3ZlT2Jq
        ZWN0KClgIG1ldGhvZC4gVGhpcwogIHdpbGwgb25seSByZW1vdmUgdGhlIG9i
        amVjdCBpZiBpdCBpcyBwcmVzZW50IGluIHRoZSBlbnVtZXJhYmxlLCBvdGhl
        cndpc2UKICB0aGlzIG1ldGhvZCBoYXMgbm8gZWZmZWN0LgoKICBgYGBqYXZh
        c2NyaXB0CiAgc2V0LnJlbW92ZU9iamVjdChjb250YWN0KTsKICBgYGAKCiAg
        IyMgSW1wbGVtZW50aW5nIEluIFlvdXIgT3duIENvZGUKCiAgSWYgeW91IGFy
        ZSBpbXBsZW1lbnRpbmcgYW4gb2JqZWN0IGFuZCB3YW50IHRvIHN1cHBvcnQg
        dGhpcyBBUEksIGp1c3QgaW5jbHVkZQogIHRoaXMgbWl4aW4gaW4geW91ciBj
        bGFzcyBhbmQgaW1wbGVtZW50IHRoZSByZXF1aXJlZCBtZXRob2RzLiBJbiB5
        b3VyIHVuaXQKICB0ZXN0cywgYmUgc3VyZSB0byBhcHBseSB0aGUgRW1iZXIu
        TXV0YWJsZUVudW1lcmFibGVUZXN0cyB0byB5b3VyIG9iamVjdC4KCiAgQGNs
        YXNzIE11dGFibGVFbnVtZXJhYmxlCiAgQG5hbWVzcGFjZSBFbWJlcgogIEB1
        c2VzIEVtYmVyLkVudW1lcmFibGUKKi8KRW1iZXIuTXV0YWJsZUVudW1lcmFi
        bGUgPSBFbWJlci5NaXhpbi5jcmVhdGUoRW1iZXIuRW51bWVyYWJsZSwgewoK
        ICAvKioKICAgIF9fUmVxdWlyZWQuX18gWW91IG11c3QgaW1wbGVtZW50IHRo
        aXMgbWV0aG9kIHRvIGFwcGx5IHRoaXMgbWl4aW4uCgogICAgQXR0ZW1wdHMg
        dG8gYWRkIHRoZSBwYXNzZWQgb2JqZWN0IHRvIHRoZSByZWNlaXZlciBpZiB0
        aGUgb2JqZWN0IGlzIG5vdAogICAgYWxyZWFkeSBwcmVzZW50IGluIHRoZSBj
        b2xsZWN0aW9uLiBJZiB0aGUgb2JqZWN0IGlzIHByZXNlbnQsIHRoaXMgbWV0
        aG9kCiAgICBoYXMgbm8gZWZmZWN0LgoKICAgIElmIHRoZSBwYXNzZWQgb2Jq
        ZWN0IGlzIG9mIGEgdHlwZSBub3Qgc3VwcG9ydGVkIGJ5IHRoZSByZWNlaXZl
        ciwKICAgIHRoZW4gdGhpcyBtZXRob2Qgc2hvdWxkIHJhaXNlIGFuIGV4Y2Vw
        dGlvbi4KCiAgICBAbWV0aG9kIGFkZE9iamVjdAogICAgQHBhcmFtIHtPYmpl
        Y3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIGFkZCB0byB0aGUgZW51bWVyYWJs
        ZS4KICAgIEByZXR1cm4ge09iamVjdH0gdGhlIHBhc3NlZCBvYmplY3QKICAq
        LwogIGFkZE9iamVjdDogRW1iZXIucmVxdWlyZWQoRnVuY3Rpb24pLAoKICAv
        KioKICAgIEFkZHMgZWFjaCBvYmplY3QgaW4gdGhlIHBhc3NlZCBlbnVtZXJh
        YmxlIHRvIHRoZSByZWNlaXZlci4KCiAgICBAbWV0aG9kIGFkZE9iamVjdHMK
        ICAgIEBwYXJhbSB7RW1iZXIuRW51bWVyYWJsZX0gb2JqZWN0cyB0aGUgb2Jq
        ZWN0cyB0byBhZGQuCiAgICBAcmV0dXJuIHtPYmplY3R9IHJlY2VpdmVyCiAg
        Ki8KICBhZGRPYmplY3RzOiBmdW5jdGlvbihvYmplY3RzKSB7CiAgICBFbWJl
        ci5iZWdpblByb3BlcnR5Q2hhbmdlcyh0aGlzKTsKICAgIGZvckVhY2gob2Jq
        ZWN0cywgZnVuY3Rpb24ob2JqKSB7IHRoaXMuYWRkT2JqZWN0KG9iaik7IH0s
        IHRoaXMpOwogICAgRW1iZXIuZW5kUHJvcGVydHlDaGFuZ2VzKHRoaXMpOwog
        ICAgcmV0dXJuIHRoaXM7CiAgfSwKCiAgLyoqCiAgICBfX1JlcXVpcmVkLl9f
        IFlvdSBtdXN0IGltcGxlbWVudCB0aGlzIG1ldGhvZCB0byBhcHBseSB0aGlz
        IG1peGluLgoKICAgIEF0dGVtcHRzIHRvIHJlbW92ZSB0aGUgcGFzc2VkIG9i
        amVjdCBmcm9tIHRoZSByZWNlaXZlciBjb2xsZWN0aW9uIGlmIHRoZQogICAg
        b2JqZWN0IGlzIHByZXNlbnQgaW4gdGhlIGNvbGxlY3Rpb24uIElmIHRoZSBv
        YmplY3QgaXMgbm90IHByZXNlbnQsCiAgICB0aGlzIG1ldGhvZCBoYXMgbm8g
        ZWZmZWN0LgoKICAgIElmIHRoZSBwYXNzZWQgb2JqZWN0IGlzIG9mIGEgdHlw
        ZSBub3Qgc3VwcG9ydGVkIGJ5IHRoZSByZWNlaXZlciwKICAgIHRoZW4gdGhp
        cyBtZXRob2Qgc2hvdWxkIHJhaXNlIGFuIGV4Y2VwdGlvbi4KCiAgICBAbWV0
        aG9kIHJlbW92ZU9iamVjdAogICAgQHBhcmFtIHtPYmplY3R9IG9iamVjdCBU
        aGUgb2JqZWN0IHRvIHJlbW92ZSBmcm9tIHRoZSBlbnVtZXJhYmxlLgogICAg
        QHJldHVybiB7T2JqZWN0fSB0aGUgcGFzc2VkIG9iamVjdAogICovCiAgcmVt
        b3ZlT2JqZWN0OiBFbWJlci5yZXF1aXJlZChGdW5jdGlvbiksCgoKICAvKioK
        ICAgIFJlbW92ZXMgZWFjaCBvYmplY3QgaW4gdGhlIHBhc3NlZCBlbnVtZXJh
        YmxlIGZyb20gdGhlIHJlY2VpdmVyLgoKICAgIEBtZXRob2QgcmVtb3ZlT2Jq
        ZWN0cwogICAgQHBhcmFtIHtFbWJlci5FbnVtZXJhYmxlfSBvYmplY3RzIHRo
        ZSBvYmplY3RzIHRvIHJlbW92ZQogICAgQHJldHVybiB7T2JqZWN0fSByZWNl
        aXZlcgogICovCiAgcmVtb3ZlT2JqZWN0czogZnVuY3Rpb24ob2JqZWN0cykg
        ewogICAgRW1iZXIuYmVnaW5Qcm9wZXJ0eUNoYW5nZXModGhpcyk7CiAgICBm
        b3JFYWNoKG9iamVjdHMsIGZ1bmN0aW9uKG9iaikgeyB0aGlzLnJlbW92ZU9i
        amVjdChvYmopOyB9LCB0aGlzKTsKICAgIEVtYmVyLmVuZFByb3BlcnR5Q2hh
        bmdlcyh0aGlzKTsKICAgIHJldHVybiB0aGlzOwogIH0KCn0pOwoKfSkoKTsK
        CgoKKGZ1bmN0aW9uKCkgewovKioKQG1vZHVsZSBlbWJlcgpAc3VibW9kdWxl
        IGVtYmVyLXJ1bnRpbWUKKi8KLy8gLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4u
        Li4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLgovLyBDT05TVEFO
        VFMKLy8KCnZhciBPVVRfT0ZfUkFOR0VfRVhDRVBUSU9OID0gIkluZGV4IG91
        dCBvZiByYW5nZSIgOwp2YXIgRU1QVFkgPSBbXTsKCi8vIC4uLi4uLi4uLi4u
        Li4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4u
        Li4KLy8gSEVMUEVSUwovLwoKdmFyIGdldCA9IEVtYmVyLmdldCwgc2V0ID0g
        RW1iZXIuc2V0OwoKLyoqCiAgVGhpcyBtaXhpbiBkZWZpbmVzIHRoZSBBUEkg
        Zm9yIG1vZGlmeWluZyBhcnJheS1saWtlIG9iamVjdHMuIFRoZXNlIG1ldGhv
        ZHMKICBjYW4gYmUgYXBwbGllZCBvbmx5IHRvIGEgY29sbGVjdGlvbiB0aGF0
        IGtlZXBzIGl0cyBpdGVtcyBpbiBhbiBvcmRlcmVkIHNldC4KCiAgTm90ZSB0
        aGF0IGFuIEFycmF5IGNhbiBjaGFuZ2UgZXZlbiBpZiBpdCBkb2VzIG5vdCBp
        bXBsZW1lbnQgdGhpcyBtaXhpbi4KICBGb3IgZXhhbXBsZSwgb25lIG1pZ2h0
        IGltcGxlbWVudCBhIFNwYXJzZUFycmF5IHRoYXQgY2Fubm90IGJlIGRpcmVj
        dGx5CiAgbW9kaWZpZWQsIGJ1dCBpZiBpdHMgdW5kZXJseWluZyBlbnVtZXJh
        YmxlIGNoYW5nZXMsIGl0IHdpbGwgY2hhbmdlIGFsc28uCgogIEBjbGFzcyBN
        dXRhYmxlQXJyYXkKICBAbmFtZXNwYWNlIEVtYmVyCiAgQHVzZXMgRW1iZXIu
        QXJyYXkKICBAdXNlcyBFbWJlci5NdXRhYmxlRW51bWVyYWJsZQoqLwpFbWJl
        ci5NdXRhYmxlQXJyYXkgPSBFbWJlci5NaXhpbi5jcmVhdGUoRW1iZXIuQXJy
        YXksIEVtYmVyLk11dGFibGVFbnVtZXJhYmxlLCB7CgogIC8qKgogICAgX19S
        ZXF1aXJlZC5fXyBZb3UgbXVzdCBpbXBsZW1lbnQgdGhpcyBtZXRob2QgdG8g
        YXBwbHkgdGhpcyBtaXhpbi4KCiAgICBUaGlzIGlzIG9uZSBvZiB0aGUgcHJp
        bWl0aXZlcyB5b3UgbXVzdCBpbXBsZW1lbnQgdG8gc3VwcG9ydCBgRW1iZXIu
        QXJyYXlgLgogICAgWW91IHNob3VsZCByZXBsYWNlIGFtdCBvYmplY3RzIHN0
        YXJ0ZWQgYXQgaWR4IHdpdGggdGhlIG9iamVjdHMgaW4gdGhlCiAgICBwYXNz
        ZWQgYXJyYXkuIFlvdSBzaG91bGQgYWxzbyBjYWxsIGB0aGlzLmVudW1lcmFi
        bGVDb250ZW50RGlkQ2hhbmdlKClgCgogICAgQG1ldGhvZCByZXBsYWNlCiAg
        ICBAcGFyYW0ge051bWJlcn0gaWR4IFN0YXJ0aW5nIGluZGV4IGluIHRoZSBh
        cnJheSB0byByZXBsYWNlLiBJZgogICAgICBpZHggPj0gbGVuZ3RoLCB0aGVu
        IGFwcGVuZCB0byB0aGUgZW5kIG9mIHRoZSBhcnJheS4KICAgIEBwYXJhbSB7
        TnVtYmVyfSBhbXQgTnVtYmVyIG9mIGVsZW1lbnRzIHRoYXQgc2hvdWxkIGJl
        IHJlbW92ZWQgZnJvbQogICAgICB0aGUgYXJyYXksIHN0YXJ0aW5nIGF0ICpp
        ZHgqLgogICAgQHBhcmFtIHtBcnJheX0gb2JqZWN0cyBBbiBhcnJheSBvZiB6
        ZXJvIG9yIG1vcmUgb2JqZWN0cyB0aGF0IHNob3VsZCBiZQogICAgICBpbnNl
        cnRlZCBpbnRvIHRoZSBhcnJheSBhdCAqaWR4KgogICovCiAgcmVwbGFjZTog
        RW1iZXIucmVxdWlyZWQoKSwKCiAgLyoqCiAgICBSZW1vdmUgYWxsIGVsZW1l
        bnRzIGZyb20gc2VsZi4gVGhpcyBpcyB1c2VmdWwgaWYgeW91CiAgICB3YW50
        IHRvIHJldXNlIGFuIGV4aXN0aW5nIGFycmF5IHdpdGhvdXQgaGF2aW5nIHRv
        IHJlY3JlYXRlIGl0LgoKICAgIGBgYGphdmFzY3JpcHQKICAgIHZhciBjb2xv
        cnMgPSBbInJlZCIsICJncmVlbiIsICJibHVlIl07CiAgICBjb2xvci5sZW5n
        dGgoKTsgICAvLyAgMwogICAgY29sb3JzLmNsZWFyKCk7ICAgLy8gIFtdCiAg
        ICBjb2xvcnMubGVuZ3RoKCk7ICAvLyAgMAogICAgYGBgCgogICAgQG1ldGhv
        ZCBjbGVhcgogICAgQHJldHVybiB7RW1iZXIuQXJyYXl9IEFuIGVtcHR5IEFy
        cmF5LgogICovCiAgY2xlYXI6IGZ1bmN0aW9uICgpIHsKICAgIHZhciBsZW4g
        PSBnZXQodGhpcywgJ2xlbmd0aCcpOwogICAgaWYgKGxlbiA9PT0gMCkgcmV0
        dXJuIHRoaXM7CiAgICB0aGlzLnJlcGxhY2UoMCwgbGVuLCBFTVBUWSk7CiAg
        ICByZXR1cm4gdGhpczsKICB9LAoKICAvKioKICAgIFRoaXMgd2lsbCB1c2Ug
        dGhlIHByaW1pdGl2ZSBgcmVwbGFjZSgpYCBtZXRob2QgdG8gaW5zZXJ0IGFu
        IG9iamVjdCBhdCB0aGUKICAgIHNwZWNpZmllZCBpbmRleC4KCiAgICBgYGBq
        YXZhc2NyaXB0CiAgICB2YXIgY29sb3JzID0gWyJyZWQiLCAiZ3JlZW4iLCAi
        Ymx1ZSJdOwogICAgY29sb3JzLmluc2VydEF0KDIsICJ5ZWxsb3ciKTsgIC8v
        IFsicmVkIiwgImdyZWVuIiwgInllbGxvdyIsICJibHVlIl0KICAgIGNvbG9y
        cy5pbnNlcnRBdCg1LCAib3JhbmdlIik7ICAvLyBFcnJvcjogSW5kZXggb3V0
        IG9mIHJhbmdlCiAgICBgYGAKCiAgICBAbWV0aG9kIGluc2VydEF0CiAgICBA
        cGFyYW0ge051bWJlcn0gaWR4IGluZGV4IG9mIGluc2VydCB0aGUgb2JqZWN0
        IGF0LgogICAgQHBhcmFtIHtPYmplY3R9IG9iamVjdCBvYmplY3QgdG8gaW5z
        ZXJ0CiAgICBAcmV0dXJuIHRoaXMKICAqLwogIGluc2VydEF0OiBmdW5jdGlv
        bihpZHgsIG9iamVjdCkgewogICAgaWYgKGlkeCA+IGdldCh0aGlzLCAnbGVu
        Z3RoJykpIHRocm93IG5ldyBFbWJlci5FcnJvcihPVVRfT0ZfUkFOR0VfRVhD
        RVBUSU9OKSA7CiAgICB0aGlzLnJlcGxhY2UoaWR4LCAwLCBbb2JqZWN0XSkg
        OwogICAgcmV0dXJuIHRoaXMgOwogIH0sCgogIC8qKgogICAgUmVtb3ZlIGFu
        IG9iamVjdCBhdCB0aGUgc3BlY2lmaWVkIGluZGV4IHVzaW5nIHRoZSBgcmVw
        bGFjZSgpYCBwcmltaXRpdmUKICAgIG1ldGhvZC4gWW91IGNhbiBwYXNzIGVp
        dGhlciBhIHNpbmdsZSBpbmRleCwgb3IgYSBzdGFydCBhbmQgYSBsZW5ndGgu
        CgogICAgSWYgeW91IHBhc3MgYSBzdGFydCBhbmQgbGVuZ3RoIHRoYXQgaXMg
        YmV5b25kIHRoZQogICAgbGVuZ3RoIHRoaXMgbWV0aG9kIHdpbGwgdGhyb3cg
        YW4gYE9VVF9PRl9SQU5HRV9FWENFUFRJT05gLgoKICAgIGBgYGphdmFzY3Jp
        cHQKICAgIHZhciBjb2xvcnMgPSBbInJlZCIsICJncmVlbiIsICJibHVlIiwg
        InllbGxvdyIsICJvcmFuZ2UiXTsKICAgIGNvbG9ycy5yZW1vdmVBdCgwKTsg
        ICAgIC8vIFsiZ3JlZW4iLCAiYmx1ZSIsICJ5ZWxsb3ciLCAib3JhbmdlIl0K
        ICAgIGNvbG9ycy5yZW1vdmVBdCgyLCAyKTsgIC8vIFsiZ3JlZW4iLCAiYmx1
        ZSJdCiAgICBjb2xvcnMucmVtb3ZlQXQoNCwgMik7ICAvLyBFcnJvcjogSW5k
        ZXggb3V0IG9mIHJhbmdlCiAgICBgYGAKCiAgICBAbWV0aG9kIHJlbW92ZUF0
        CiAgICBAcGFyYW0ge051bWJlcn0gc3RhcnQgaW5kZXgsIHN0YXJ0IG9mIHJh
        bmdlCiAgICBAcGFyYW0ge051bWJlcn0gbGVuIGxlbmd0aCBvZiBwYXNzaW5n
        IHJhbmdlCiAgICBAcmV0dXJuIHtPYmplY3R9IHJlY2VpdmVyCiAgKi8KICBy
        ZW1vdmVBdDogZnVuY3Rpb24oc3RhcnQsIGxlbikgewogICAgaWYgKCdudW1i
        ZXInID09PSB0eXBlb2Ygc3RhcnQpIHsKCiAgICAgIGlmICgoc3RhcnQgPCAw
        KSB8fCAoc3RhcnQgPj0gZ2V0KHRoaXMsICdsZW5ndGgnKSkpIHsKICAgICAg
        ICB0aHJvdyBuZXcgRW1iZXIuRXJyb3IoT1VUX09GX1JBTkdFX0VYQ0VQVElP
        Tik7CiAgICAgIH0KCiAgICAgIC8vIGZhc3QgY2FzZQogICAgICBpZiAobGVu
        ID09PSB1bmRlZmluZWQpIGxlbiA9IDE7CiAgICAgIHRoaXMucmVwbGFjZShz
        dGFydCwgbGVuLCBFTVBUWSk7CiAgICB9CgogICAgcmV0dXJuIHRoaXMgOwog
        IH0sCgogIC8qKgogICAgUHVzaCB0aGUgb2JqZWN0IG9udG8gdGhlIGVuZCBv
        ZiB0aGUgYXJyYXkuIFdvcmtzIGp1c3QgbGlrZSBgcHVzaCgpYCBidXQgaXQK
        ICAgIGlzIEtWTy1jb21wbGlhbnQuCgogICAgYGBgamF2YXNjcmlwdAogICAg
        dmFyIGNvbG9ycyA9IFsicmVkIiwgImdyZWVuIl07CiAgICBjb2xvcnMucHVz
        aE9iamVjdCgiYmxhY2siKTsgICAgIC8vIFsicmVkIiwgImdyZWVuIiwgImJs
        YWNrIl0KICAgIGNvbG9ycy5wdXNoT2JqZWN0KFsieWVsbG93Il0pOyAgLy8g
        WyJyZWQiLCAiZ3JlZW4iLCBbInllbGxvdyJdXQogICAgYGBgCgogICAgQG1l
        dGhvZCBwdXNoT2JqZWN0CiAgICBAcGFyYW0geyp9IG9iaiBvYmplY3QgdG8g
        cHVzaAogICAgQHJldHVybiBUaGUgc2FtZSBvYmogcGFzc2VkIGFzIHBhcmFt
        CiAgKi8KICBwdXNoT2JqZWN0OiBmdW5jdGlvbihvYmopIHsKICAgIHRoaXMu
        aW5zZXJ0QXQoZ2V0KHRoaXMsICdsZW5ndGgnKSwgb2JqKSA7CiAgICByZXR1
        cm4gb2JqOwogIH0sCgogIC8qKgogICAgQWRkIHRoZSBvYmplY3RzIGluIHRo
        ZSBwYXNzZWQgbnVtZXJhYmxlIHRvIHRoZSBlbmQgb2YgdGhlIGFycmF5LiBE
        ZWZlcnMKICAgIG5vdGlmeWluZyBvYnNlcnZlcnMgb2YgdGhlIGNoYW5nZSB1
        bnRpbCBhbGwgb2JqZWN0cyBhcmUgYWRkZWQuCgogICAgYGBgamF2YXNjcmlw
        dAogICAgdmFyIGNvbG9ycyA9IFsicmVkIl07CiAgICBjb2xvcnMucHVzaE9i
        amVjdHMoWyJ5ZWxsb3ciLCAib3JhbmdlIl0pOyAgLy8gWyJyZWQiLCAieWVs
        bG93IiwgIm9yYW5nZSJdCiAgICBgYGAKCiAgICBAbWV0aG9kIHB1c2hPYmpl
        Y3RzCiAgICBAcGFyYW0ge0VtYmVyLkVudW1lcmFibGV9IG9iamVjdHMgdGhl
        IG9iamVjdHMgdG8gYWRkCiAgICBAcmV0dXJuIHtFbWJlci5BcnJheX0gcmVj
        ZWl2ZXIKICAqLwogIHB1c2hPYmplY3RzOiBmdW5jdGlvbihvYmplY3RzKSB7
        CiAgICBpZiAoIShFbWJlci5FbnVtZXJhYmxlLmRldGVjdChvYmplY3RzKSB8
        fCBFbWJlci5pc0FycmF5KG9iamVjdHMpKSkgewogICAgICB0aHJvdyBuZXcg
        VHlwZUVycm9yKCJNdXN0IHBhc3MgRW1iZXIuRW51bWVyYWJsZSB0byBFbWJl
        ci5NdXRhYmxlQXJyYXkjcHVzaE9iamVjdHMiKTsKICAgIH0KICAgIHRoaXMu
        cmVwbGFjZShnZXQodGhpcywgJ2xlbmd0aCcpLCAwLCBvYmplY3RzKTsKICAg
        IHJldHVybiB0aGlzOwogIH0sCgogIC8qKgogICAgUG9wIG9iamVjdCBmcm9t
        IGFycmF5IG9yIG5pbCBpZiBub25lIGFyZSBsZWZ0LiBXb3JrcyBqdXN0IGxp
        a2UgYHBvcCgpYCBidXQKICAgIGl0IGlzIEtWTy1jb21wbGlhbnQuCgogICAg
        YGBgamF2YXNjcmlwdAogICAgdmFyIGNvbG9ycyA9IFsicmVkIiwgImdyZWVu
        IiwgImJsdWUiXTsKICAgIGNvbG9ycy5wb3BPYmplY3QoKTsgICAvLyAiYmx1
        ZSIKICAgIGNvbnNvbGUubG9nKGNvbG9ycyk7ICAvLyBbInJlZCIsICJncmVl
        biJdCiAgICBgYGAKCiAgICBAbWV0aG9kIHBvcE9iamVjdAogICAgQHJldHVy
        biBvYmplY3QKICAqLwogIHBvcE9iamVjdDogZnVuY3Rpb24oKSB7CiAgICB2
        YXIgbGVuID0gZ2V0KHRoaXMsICdsZW5ndGgnKSA7CiAgICBpZiAobGVuID09
        PSAwKSByZXR1cm4gbnVsbCA7CgogICAgdmFyIHJldCA9IHRoaXMub2JqZWN0
        QXQobGVuLTEpIDsKICAgIHRoaXMucmVtb3ZlQXQobGVuLTEsIDEpIDsKICAg
        IHJldHVybiByZXQgOwogIH0sCgogIC8qKgogICAgU2hpZnQgYW4gb2JqZWN0
        IGZyb20gc3RhcnQgb2YgYXJyYXkgb3IgbmlsIGlmIG5vbmUgYXJlIGxlZnQu
        IFdvcmtzIGp1c3QKICAgIGxpa2UgYHNoaWZ0KClgIGJ1dCBpdCBpcyBLVk8t
        Y29tcGxpYW50LgoKICAgIGBgYGphdmFzY3JpcHQKICAgIHZhciBjb2xvcnMg
        PSBbInJlZCIsICJncmVlbiIsICJibHVlIl07CiAgICBjb2xvcnMuc2hpZnRP
        YmplY3QoKTsgIC8vICJyZWQiCiAgICBjb25zb2xlLmxvZyhjb2xvcnMpOyAg
        IC8vIFsiZ3JlZW4iLCAiYmx1ZSJdCiAgICBgYGAKCiAgICBAbWV0aG9kIHNo
        aWZ0T2JqZWN0CiAgICBAcmV0dXJuIG9iamVjdAogICovCiAgc2hpZnRPYmpl
        Y3Q6IGZ1bmN0aW9uKCkgewogICAgaWYgKGdldCh0aGlzLCAnbGVuZ3RoJykg
        PT09IDApIHJldHVybiBudWxsIDsKICAgIHZhciByZXQgPSB0aGlzLm9iamVj
        dEF0KDApIDsKICAgIHRoaXMucmVtb3ZlQXQoMCkgOwogICAgcmV0dXJuIHJl
        dCA7CiAgfSwKCiAgLyoqCiAgICBVbnNoaWZ0IGFuIG9iamVjdCB0byBzdGFy
        dCBvZiBhcnJheS4gV29ya3MganVzdCBsaWtlIGB1bnNoaWZ0KClgIGJ1dCBp
        dCBpcwogICAgS1ZPLWNvbXBsaWFudC4KCiAgICBgYGBqYXZhc2NyaXB0CiAg
        ICB2YXIgY29sb3JzID0gWyJyZWQiXTsKICAgIGNvbG9ycy51bnNoaWZ0T2Jq
        ZWN0KCJ5ZWxsb3ciKTsgICAgLy8gWyJ5ZWxsb3ciLCAicmVkIl0KICAgIGNv
        bG9ycy51bnNoaWZ0T2JqZWN0KFsiYmxhY2siXSk7ICAgLy8gW1siYmxhY2si
        XSwgInllbGxvdyIsICJyZWQiXQogICAgYGBgCgogICAgQG1ldGhvZCB1bnNo
        aWZ0T2JqZWN0CiAgICBAcGFyYW0geyp9IG9iaiBvYmplY3QgdG8gdW5zaGlm
        dAogICAgQHJldHVybiBUaGUgc2FtZSBvYmogcGFzc2VkIGFzIHBhcmFtCiAg
        Ki8KICB1bnNoaWZ0T2JqZWN0OiBmdW5jdGlvbihvYmopIHsKICAgIHRoaXMu
        aW5zZXJ0QXQoMCwgb2JqKSA7CiAgICByZXR1cm4gb2JqIDsKICB9LAoKICAv
        KioKICAgIEFkZHMgdGhlIG5hbWVkIG9iamVjdHMgdG8gdGhlIGJlZ2lubmlu
        ZyBvZiB0aGUgYXJyYXkuIERlZmVycyBub3RpZnlpbmcKICAgIG9ic2VydmVy
        cyB1bnRpbCBhbGwgb2JqZWN0cyBoYXZlIGJlZW4gYWRkZWQuCgogICAgYGBg
        amF2YXNjcmlwdAogICAgdmFyIGNvbG9ycyA9IFsicmVkIl07CiAgICBjb2xv
        cnMudW5zaGlmdE9iamVjdHMoWyJibGFjayIsICJ3aGl0ZSJdKTsgICAvLyBb
        ImJsYWNrIiwgIndoaXRlIiwgInJlZCJdCiAgICBjb2xvcnMudW5zaGlmdE9i
        amVjdHMoInllbGxvdyIpOyAvLyBUeXBlIEVycm9yOiAndW5kZWZpbmVkJyBp
        cyBub3QgYSBmdW5jdGlvbgogICAgYGBgCgogICAgQG1ldGhvZCB1bnNoaWZ0
        T2JqZWN0cwogICAgQHBhcmFtIHtFbWJlci5FbnVtZXJhYmxlfSBvYmplY3Rz
        IHRoZSBvYmplY3RzIHRvIGFkZAogICAgQHJldHVybiB7RW1iZXIuQXJyYXl9
        IHJlY2VpdmVyCiAgKi8KICB1bnNoaWZ0T2JqZWN0czogZnVuY3Rpb24ob2Jq
        ZWN0cykgewogICAgdGhpcy5yZXBsYWNlKDAsIDAsIG9iamVjdHMpOwogICAg
        cmV0dXJuIHRoaXM7CiAgfSwKCiAgLyoqCiAgICBSZXZlcnNlIG9iamVjdHMg
        aW4gdGhlIGFycmF5LiBXb3JrcyBqdXN0IGxpa2UgYHJldmVyc2UoKWAgYnV0
        IGl0IGlzCiAgICBLVk8tY29tcGxpYW50LgoKICAgIEBtZXRob2QgcmV2ZXJz
        ZU9iamVjdHMKICAgIEByZXR1cm4ge0VtYmVyLkFycmF5fSByZWNlaXZlcgog
        ICAqLwogIHJldmVyc2VPYmplY3RzOiBmdW5jdGlvbigpIHsKICAgIHZhciBs
        ZW4gPSBnZXQodGhpcywgJ2xlbmd0aCcpOwogICAgaWYgKGxlbiA9PT0gMCkg
        cmV0dXJuIHRoaXM7CiAgICB2YXIgb2JqZWN0cyA9IHRoaXMudG9BcnJheSgp
        LnJldmVyc2UoKTsKICAgIHRoaXMucmVwbGFjZSgwLCBsZW4sIG9iamVjdHMp
        OwogICAgcmV0dXJuIHRoaXM7CiAgfSwKCiAgLyoqCiAgICBSZXBsYWNlIGFs
        bCB0aGUgdGhlIHJlY2VpdmVyJ3MgY29udGVudCB3aXRoIGNvbnRlbnQgb2Yg
        dGhlIGFyZ3VtZW50LgogICAgSWYgYXJndW1lbnQgaXMgYW4gZW1wdHkgYXJy
        YXkgcmVjZWl2ZXIgd2lsbCBiZSBjbGVhcmVkLgoKICAgIGBgYGphdmFzY3Jp
        cHQKICAgIHZhciBjb2xvcnMgPSBbInJlZCIsICJncmVlbiIsICJibHVlIl07
        CiAgICBjb2xvcnMuc2V0T2JqZWN0cyhbImJsYWNrIiwgIndoaXRlIl0pOyAg
        Ly8gWyJibGFjayIsICJ3aGl0ZSJdCiAgICBjb2xvcnMuc2V0T2JqZWN0cyhb
        XSk7ICAgICAgICAgICAgICAgICAgLy8gW10KICAgIGBgYAoKICAgIEBtZXRo
        b2Qgc2V0T2JqZWN0cwogICAgQHBhcmFtIHtFbWJlci5BcnJheX0gb2JqZWN0
        cyBhcnJheSB3aG9zZSBjb250ZW50IHdpbGwgYmUgdXNlZCBmb3IgcmVwbGFj
        aW5nCiAgICAgICAgdGhlIGNvbnRlbnQgb2YgdGhlIHJlY2VpdmVyCiAgICBA
        cmV0dXJuIHtFbWJlci5BcnJheX0gcmVjZWl2ZXIgd2l0aCB0aGUgbmV3IGNv
        bnRlbnQKICAgKi8KICBzZXRPYmplY3RzOiBmdW5jdGlvbihvYmplY3RzKSB7
        CiAgICBpZiAob2JqZWN0cy5sZW5ndGggPT09IDApIHJldHVybiB0aGlzLmNs
        ZWFyKCk7CgogICAgdmFyIGxlbiA9IGdldCh0aGlzLCAnbGVuZ3RoJyk7CiAg
        ICB0aGlzLnJlcGxhY2UoMCwgbGVuLCBvYmplY3RzKTsKICAgIHJldHVybiB0
        aGlzOwogIH0sCgogIC8vIC4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4u
        Li4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4KICAvLyBJTVBMRU1FTlQg
        RW1iZXIuTXV0YWJsZUVudW1lcmFibGUKICAvLwoKICByZW1vdmVPYmplY3Q6
        IGZ1bmN0aW9uKG9iaikgewogICAgdmFyIGxvYyA9IGdldCh0aGlzLCAnbGVu
        Z3RoJykgfHwgMDsKICAgIHdoaWxlKC0tbG9jID49IDApIHsKICAgICAgdmFy
        IGN1ck9iamVjdCA9IHRoaXMub2JqZWN0QXQobG9jKSA7CiAgICAgIGlmIChj
        dXJPYmplY3QgPT09IG9iaikgdGhpcy5yZW1vdmVBdChsb2MpIDsKICAgIH0K
        ICAgIHJldHVybiB0aGlzIDsKICB9LAoKICBhZGRPYmplY3Q6IGZ1bmN0aW9u
        KG9iaikgewogICAgaWYgKCF0aGlzLmNvbnRhaW5zKG9iaikpIHRoaXMucHVz
        aE9iamVjdChvYmopOwogICAgcmV0dXJuIHRoaXMgOwogIH0KCn0pOwoKfSko
        KTsKCgoKKGZ1bmN0aW9uKCkgewovKioKQG1vZHVsZSBlbWJlcgpAc3VibW9k
        dWxlIGVtYmVyLXJ1bnRpbWUKKi8KCnZhciBnZXQgPSBFbWJlci5nZXQsIHNl
        dCA9IEVtYmVyLnNldDsKCi8qKgpgRW1iZXIuVGFyZ2V0QWN0aW9uU3VwcG9y
        dGAgaXMgYSBtaXhpbiB0aGF0IGNhbiBiZSBpbmNsdWRlZCBpbiBhIGNsYXNz
        CnRvIGFkZCBhIGB0cmlnZ2VyQWN0aW9uYCBtZXRob2Qgd2l0aCBzZW1hbnRp
        Y3Mgc2ltaWxhciB0byB0aGUgSGFuZGxlYmFycwpge3thY3Rpb259fWAgaGVs
        cGVyLiBJbiBub3JtYWwgRW1iZXIgdXNhZ2UsIHRoZSBge3thY3Rpb259fWAg
        aGVscGVyIGlzCnVzdWFsbHkgdGhlIGJlc3QgY2hvaWNlLiBUaGlzIG1peGlu
        IGlzIG1vc3Qgb2Z0ZW4gdXNlZnVsIHdoZW4geW91IGFyZQpkb2luZyBtb3Jl
        IGNvbXBsZXggZXZlbnQgaGFuZGxpbmcgaW4gVmlldyBvYmplY3RzLgoKU2Vl
        IGFsc28gYEVtYmVyLlZpZXdUYXJnZXRBY3Rpb25TdXBwb3J0YCwgd2hpY2gg
        aGFzCnZpZXctYXdhcmUgZGVmYXVsdHMgZm9yIHRhcmdldCBhbmQgYWN0aW9u
        Q29udGV4dC4KCkBjbGFzcyBUYXJnZXRBY3Rpb25TdXBwb3J0CkBuYW1lc3Bh
        Y2UgRW1iZXIKQGV4dGVuZHMgRW1iZXIuTWl4aW4KKi8KRW1iZXIuVGFyZ2V0
        QWN0aW9uU3VwcG9ydCA9IEVtYmVyLk1peGluLmNyZWF0ZSh7CiAgdGFyZ2V0
        OiBudWxsLAogIGFjdGlvbjogbnVsbCwKICBhY3Rpb25Db250ZXh0OiBudWxs
        LAoKICB0YXJnZXRPYmplY3Q6IEVtYmVyLmNvbXB1dGVkKGZ1bmN0aW9uKCkg
        ewogICAgdmFyIHRhcmdldCA9IGdldCh0aGlzLCAndGFyZ2V0Jyk7CgogICAg
        aWYgKEVtYmVyLnR5cGVPZih0YXJnZXQpID09PSAic3RyaW5nIikgewogICAg
        ICB2YXIgdmFsdWUgPSBnZXQodGhpcywgdGFyZ2V0KTsKICAgICAgaWYgKHZh
        bHVlID09PSB1bmRlZmluZWQpIHsgdmFsdWUgPSBnZXQoRW1iZXIubG9va3Vw
        LCB0YXJnZXQpOyB9CiAgICAgIHJldHVybiB2YWx1ZTsKICAgIH0gZWxzZSB7
        CiAgICAgIHJldHVybiB0YXJnZXQ7CiAgICB9CiAgfSkucHJvcGVydHkoJ3Rh
        cmdldCcpLAoKICBhY3Rpb25Db250ZXh0T2JqZWN0OiBFbWJlci5jb21wdXRl
        ZChmdW5jdGlvbigpIHsKICAgIHZhciBhY3Rpb25Db250ZXh0ID0gZ2V0KHRo
        aXMsICdhY3Rpb25Db250ZXh0Jyk7CgogICAgaWYgKEVtYmVyLnR5cGVPZihh
        Y3Rpb25Db250ZXh0KSA9PT0gInN0cmluZyIpIHsKICAgICAgdmFyIHZhbHVl
        ID0gZ2V0KHRoaXMsIGFjdGlvbkNvbnRleHQpOwogICAgICBpZiAodmFsdWUg
        PT09IHVuZGVmaW5lZCkgeyB2YWx1ZSA9IGdldChFbWJlci5sb29rdXAsIGFj
        dGlvbkNvbnRleHQpOyB9CiAgICAgIHJldHVybiB2YWx1ZTsKICAgIH0gZWxz
        ZSB7CiAgICAgIHJldHVybiBhY3Rpb25Db250ZXh0OwogICAgfQogIH0pLnBy
        b3BlcnR5KCdhY3Rpb25Db250ZXh0JyksCgogIC8qKgogIFNlbmQgYW4gYGFj
        dGlvbmAgd2l0aCBhbiBgYWN0aW9uQ29udGV4dGAgdG8gYSBgdGFyZ2V0YC4g
        VGhlIGFjdGlvbiwgYWN0aW9uQ29udGV4dAogIGFuZCB0YXJnZXQgd2lsbCBi
        ZSByZXRyaWV2ZWQgZnJvbSBwcm9wZXJ0aWVzIG9mIHRoZSBvYmplY3QuIEZv
        ciBleGFtcGxlOgoKICBgYGBqYXZhc2NyaXB0CiAgQXBwLlNhdmVCdXR0b25W
        aWV3ID0gRW1iZXIuVmlldy5leHRlbmQoRW1iZXIuVGFyZ2V0QWN0aW9uU3Vw
        cG9ydCwgewogICAgdGFyZ2V0OiBFbWJlci5jb21wdXRlZC5hbGlhcygnY29u
        dHJvbGxlcicpLAogICAgYWN0aW9uOiAnc2F2ZScsCiAgICBhY3Rpb25Db250
        ZXh0OiBFbWJlci5jb21wdXRlZC5hbGlhcygnY29udGV4dCcpLAogICAgY2xp
        Y2s6IGZ1bmN0aW9uKCkgewogICAgICB0aGlzLnRyaWdnZXJBY3Rpb24oKTsg
        Ly8gU2VuZHMgdGhlIGBzYXZlYCBhY3Rpb24sIGFsb25nIHdpdGggdGhlIGN1
        cnJlbnQgY29udGV4dAogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g
        dG8gdGhlIGN1cnJlbnQgY29udHJvbGxlcgogICAgfQogIH0pOwogIGBgYAoK
        ICBUaGUgYHRhcmdldGAsIGBhY3Rpb25gLCBhbmQgYGFjdGlvbkNvbnRleHRg
        IGNhbiBiZSBwcm92aWRlZCBhcyBwcm9wZXJ0aWVzIG9mCiAgYW4gb3B0aW9u
        YWwgb2JqZWN0IGFyZ3VtZW50IHRvIGB0cmlnZ2VyQWN0aW9uYCBhcyB3ZWxs
        LgoKICBgYGBqYXZhc2NyaXB0CiAgQXBwLlNhdmVCdXR0b25WaWV3ID0gRW1i
        ZXIuVmlldy5leHRlbmQoRW1iZXIuVGFyZ2V0QWN0aW9uU3VwcG9ydCwgewog
        ICAgY2xpY2s6IGZ1bmN0aW9uKCkgewogICAgICB0aGlzLnRyaWdnZXJBY3Rp
        b24oewogICAgICAgIGFjdGlvbjogJ3NhdmUnLAogICAgICAgIHRhcmdldDog
        dGhpcy5nZXQoJ2NvbnRyb2xsZXInKSwKICAgICAgICBhY3Rpb25Db250ZXh0
        OiB0aGlzLmdldCgnY29udGV4dCcpLAogICAgICB9KTsgLy8gU2VuZHMgdGhl
        IGBzYXZlYCBhY3Rpb24sIGFsb25nIHdpdGggdGhlIGN1cnJlbnQgY29udGV4
        dAogICAgICAgICAgLy8gdG8gdGhlIGN1cnJlbnQgY29udHJvbGxlcgogICAg
        fQogIH0pOwogIGBgYAoKICBUaGUgYGFjdGlvbkNvbnRleHRgIGRlZmF1bHRz
        IHRvIHRoZSBvYmplY3QgeW91IG1peGluZyBgVGFyZ2V0QWN0aW9uU3VwcG9y
        dGAgaW50by4KICBCdXQgYHRhcmdldGAgYW5kIGBhY3Rpb25gIG11c3QgYmUg
        c3BlY2lmaWVkIGVpdGhlciBhcyBwcm9wZXJ0aWVzIG9yIHdpdGggdGhlIGFy
        Z3VtZW50CiAgdG8gYHRyaWdnZXJBY3Rpb25gLCBvciBhIGNvbWJpbmF0aW9u
        OgoKICBgYGBqYXZhc2NyaXB0CiAgQXBwLlNhdmVCdXR0b25WaWV3ID0gRW1i
        ZXIuVmlldy5leHRlbmQoRW1iZXIuVGFyZ2V0QWN0aW9uU3VwcG9ydCwgewog
        ICAgdGFyZ2V0OiBFbWJlci5jb21wdXRlZC5hbGlhcygnY29udHJvbGxlcicp
        LAogICAgY2xpY2s6IGZ1bmN0aW9uKCkgewogICAgICB0aGlzLnRyaWdnZXJB
        Y3Rpb24oewogICAgICAgIGFjdGlvbjogJ3NhdmUnCiAgICAgIH0pOyAvLyBT
        ZW5kcyB0aGUgYHNhdmVgIGFjdGlvbiwgYWxvbmcgd2l0aCBhIHJlZmVyZW5j
        ZSB0byBgdGhpc2AsCiAgICAgICAgICAvLyB0byB0aGUgY3VycmVudCBjb250
        cm9sbGVyCiAgICB9CiAgfSk7CiAgYGBgCgogIEBtZXRob2QgdHJpZ2dlckFj
        dGlvbgogIEBwYXJhbSBvcHRzIHtIYXNofSAob3B0aW9uYWwsIHdpdGggdGhl
        IG9wdGlvbmFsIGtleXMgYWN0aW9uLCB0YXJnZXQgYW5kL29yIGFjdGlvbkNv
        bnRleHQpCiAgQHJldHVybiB7Qm9vbGVhbn0gdHJ1ZSBpZiB0aGUgYWN0aW9u
        IHdhcyBzZW50IHN1Y2Nlc3NmdWxseSBhbmQgZGlkIG5vdCByZXR1cm4gZmFs
        c2UKICAqLwogIHRyaWdnZXJBY3Rpb246IGZ1bmN0aW9uKG9wdHMpIHsKICAg
        IG9wdHMgPSBvcHRzIHx8IHt9OwogICAgdmFyIGFjdGlvbiA9IG9wdHMuYWN0
        aW9uIHx8IGdldCh0aGlzLCAnYWN0aW9uJyksCiAgICAgICAgdGFyZ2V0ID0g
        b3B0cy50YXJnZXQgfHwgZ2V0KHRoaXMsICd0YXJnZXRPYmplY3QnKSwKICAg
        ICAgICBhY3Rpb25Db250ZXh0ID0gb3B0cy5hY3Rpb25Db250ZXh0OwoKICAg
        IGZ1bmN0aW9uIGFyZ3Mob3B0aW9ucywgYWN0aW9uTmFtZSkgewogICAgICB2
        YXIgcmV0ID0gW107CiAgICAgIGlmIChhY3Rpb25OYW1lKSB7IHJldC5wdXNo
        KGFjdGlvbk5hbWUpOyB9CgogICAgICByZXR1cm4gcmV0LmNvbmNhdChvcHRp
        b25zKTsKICAgIH0KCiAgICBpZiAodHlwZW9mIGFjdGlvbkNvbnRleHQgPT09
        ICd1bmRlZmluZWQnKSB7CiAgICAgIGFjdGlvbkNvbnRleHQgPSBnZXQodGhp
        cywgJ2FjdGlvbkNvbnRleHRPYmplY3QnKSB8fCB0aGlzOwogICAgfQoKICAg
        IGlmICh0YXJnZXQgJiYgYWN0aW9uKSB7CiAgICAgIHZhciByZXQ7CgogICAg
        ICBpZiAodGFyZ2V0LnNlbmQpIHsKICAgICAgICByZXQgPSB0YXJnZXQuc2Vu
        ZC5hcHBseSh0YXJnZXQsIGFyZ3MoYWN0aW9uQ29udGV4dCwgYWN0aW9uKSk7
        CiAgICAgIH0gZWxzZSB7CiAgICAgICAgRW1iZXIuYXNzZXJ0KCJUaGUgYWN0
        aW9uICciICsgYWN0aW9uICsgIicgZGlkIG5vdCBleGlzdCBvbiAiICsgdGFy
        Z2V0LCB0eXBlb2YgdGFyZ2V0W2FjdGlvbl0gPT09ICdmdW5jdGlvbicpOwog
        ICAgICAgIHJldCA9IHRhcmdldFthY3Rpb25dLmFwcGx5KHRhcmdldCwgYXJn
        cyhhY3Rpb25Db250ZXh0KSk7CiAgICAgIH0KCiAgICAgIGlmIChyZXQgIT09
        IGZhbHNlKSByZXQgPSB0cnVlOwoKICAgICAgcmV0dXJuIHJldDsKICAgIH0g
        ZWxzZSB7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICB9Cn0pOwoKfSko
        KTsKCgoKKGZ1bmN0aW9uKCkgewovKioKQG1vZHVsZSBlbWJlcgpAc3VibW9k
        dWxlIGVtYmVyLXJ1bnRpbWUKKi8KCi8qKgogIFRoaXMgbWl4aW4gYWxsb3dz
        IGZvciBFbWJlciBvYmplY3RzIHRvIHN1YnNjcmliZSB0byBhbmQgZW1pdCBl
        dmVudHMuCgogIGBgYGphdmFzY3JpcHQKICBBcHAuUGVyc29uID0gRW1iZXIu
        T2JqZWN0LmV4dGVuZChFbWJlci5FdmVudGVkLCB7CiAgICBncmVldDogZnVu
        Y3Rpb24oKSB7CiAgICAgIC8vIC4uLgogICAgICB0aGlzLnRyaWdnZXIoJ2dy
        ZWV0Jyk7CiAgICB9CiAgfSk7CgogIHZhciBwZXJzb24gPSBBcHAuUGVyc29u
        LmNyZWF0ZSgpOwoKICBwZXJzb24ub24oJ2dyZWV0JywgZnVuY3Rpb24oKSB7
        CiAgICBjb25zb2xlLmxvZygnT3VyIHBlcnNvbiBoYXMgZ3JlZXRlZCcpOwog
        IH0pOwoKICBwZXJzb24uZ3JlZXQoKTsKCiAgLy8gb3V0cHV0czogJ091ciBw
        ZXJzb24gaGFzIGdyZWV0ZWQnCiAgYGBgCgogIFlvdSBjYW4gYWxzbyBjaGFp
        biBtdWx0aXBsZSBldmVudCBzdWJzY3JpcHRpb25zOgoKICBgYGBqYXZhc2Ny
        aXB0CiAgcGVyc29uLm9uKCdncmVldCcsIGZ1bmN0aW9uKCkgewogICAgY29u
        c29sZS5sb2coJ091ciBwZXJzb24gaGFzIGdyZWV0ZWQnKTsKICB9KS5vbmUo
        J2dyZWV0JywgZnVuY3Rpb24oKSB7CiAgICBjb25zb2xlLmxvZygnT2ZmZXIg
        b25lLXRpbWUgc3BlY2lhbCcpOwogIH0pLm9mZignZXZlbnQnLCB0aGlzLCBm
        b3JnZXRUaGlzKTsKICBgYGAKCiAgQGNsYXNzIEV2ZW50ZWQKICBAbmFtZXNw
        YWNlIEVtYmVyCiAqLwpFbWJlci5FdmVudGVkID0gRW1iZXIuTWl4aW4uY3Jl
        YXRlKHsKCiAgLyoqCiAgIFN1YnNjcmliZXMgdG8gYSBuYW1lZCBldmVudCB3
        aXRoIGdpdmVuIGZ1bmN0aW9uLgoKICAgYGBgamF2YXNjcmlwdAogICBwZXJz
        b24ub24oJ2RpZExvYWQnLCBmdW5jdGlvbigpIHsKICAgICAvLyBmaXJlZCBv
        bmNlIHRoZSBwZXJzb24gaGFzIGxvYWRlZAogICB9KTsKICAgYGBgCgogICBB
        biBvcHRpb25hbCB0YXJnZXQgY2FuIGJlIHBhc3NlZCBpbiBhcyB0aGUgMm5k
        IGFyZ3VtZW50IHRoYXQgd2lsbAogICBiZSBzZXQgYXMgdGhlICJ0aGlzIiBm
        b3IgdGhlIGNhbGxiYWNrLiBUaGlzIGlzIGEgZ29vZCB3YXkgdG8gZ2l2ZSB5
        b3VyCiAgIGZ1bmN0aW9uIGFjY2VzcyB0byB0aGUgb2JqZWN0IHRyaWdnZXJp
        bmcgdGhlIGV2ZW50LiBXaGVuIHRoZSB0YXJnZXQKICAgcGFyYW1ldGVyIGlz
        IHVzZWQgdGhlIGNhbGxiYWNrIGJlY29tZXMgdGhlIHRoaXJkIGFyZ3VtZW50
        LgoKICAgQG1ldGhvZCBvbgogICBAcGFyYW0ge1N0cmluZ30gbmFtZSBUaGUg
        bmFtZSBvZiB0aGUgZXZlbnQKICAgQHBhcmFtIHtPYmplY3R9IFt0YXJnZXRd
        IFRoZSAidGhpcyIgYmluZGluZyBmb3IgdGhlIGNhbGxiYWNrCiAgIEBwYXJh
        bSB7RnVuY3Rpb259IG1ldGhvZCBUaGUgY2FsbGJhY2sgdG8gZXhlY3V0ZQog
        ICBAcmV0dXJuIHRoaXMKICAqLwogIG9uOiBmdW5jdGlvbihuYW1lLCB0YXJn
        ZXQsIG1ldGhvZCkgewogICAgRW1iZXIuYWRkTGlzdGVuZXIodGhpcywgbmFt
        ZSwgdGFyZ2V0LCBtZXRob2QpOwogICAgcmV0dXJuIHRoaXM7CiAgfSwKCiAg
        LyoqCiAgICBTdWJzY3JpYmVzIGEgZnVuY3Rpb24gdG8gYSBuYW1lZCBldmVu
        dCBhbmQgdGhlbiBjYW5jZWxzIHRoZSBzdWJzY3JpcHRpb24KICAgIGFmdGVy
        IHRoZSBmaXJzdCB0aW1lIHRoZSBldmVudCBpcyB0cmlnZ2VyZWQuIEl0IGlz
        IGdvb2QgdG8gdXNlIGBgb25lYGAgd2hlbgogICAgeW91IG9ubHkgY2FyZSBh
        Ym91dCB0aGUgZmlyc3QgdGltZSBhbiBldmVudCBoYXMgdGFrZW4gcGxhY2Uu
        CgogICAgVGhpcyBmdW5jdGlvbiB0YWtlcyBhbiBvcHRpb25hbCAybmQgYXJn
        dW1lbnQgdGhhdCB3aWxsIGJlY29tZSB0aGUgInRoaXMiCiAgICB2YWx1ZSBm
        b3IgdGhlIGNhbGxiYWNrLiBJZiB0aGlzIGFyZ3VtZW50IGlzIHBhc3NlZCB0
        aGVuIHRoZSAzcmQgYXJndW1lbnQKICAgIGJlY29tZXMgdGhlIGZ1bmN0aW9u
        LgoKICAgIEBtZXRob2Qgb25lCiAgICBAcGFyYW0ge1N0cmluZ30gbmFtZSBU
        aGUgbmFtZSBvZiB0aGUgZXZlbnQKICAgIEBwYXJhbSB7T2JqZWN0fSBbdGFy
        Z2V0XSBUaGUgInRoaXMiIGJpbmRpbmcgZm9yIHRoZSBjYWxsYmFjawogICAg
        QHBhcmFtIHtGdW5jdGlvbn0gbWV0aG9kIFRoZSBjYWxsYmFjayB0byBleGVj
        dXRlCiAgICBAcmV0dXJuIHRoaXMKICAqLwogIG9uZTogZnVuY3Rpb24obmFt
        ZSwgdGFyZ2V0LCBtZXRob2QpIHsKICAgIGlmICghbWV0aG9kKSB7CiAgICAg
        IG1ldGhvZCA9IHRhcmdldDsKICAgICAgdGFyZ2V0ID0gbnVsbDsKICAgIH0K
        CiAgICBFbWJlci5hZGRMaXN0ZW5lcih0aGlzLCBuYW1lLCB0YXJnZXQsIG1l
        dGhvZCwgdHJ1ZSk7CiAgICByZXR1cm4gdGhpczsKICB9LAoKICAvKioKICAg
        IFRyaWdnZXJzIGEgbmFtZWQgZXZlbnQgZm9yIHRoZSBvYmplY3QuIEFueSBh
        ZGRpdGlvbmFsIGFyZ3VtZW50cwogICAgd2lsbCBiZSBwYXNzZWQgYXMgcGFy
        YW1ldGVycyB0byB0aGUgZnVuY3Rpb25zIHRoYXQgYXJlIHN1YnNjcmliZWQg
        dG8gdGhlCiAgICBldmVudC4KCiAgICBgYGBqYXZhc2NyaXB0CiAgICBwZXJz
        b24ub24oJ2RpZEVhdCcsIGZ1bmN0aW9uKGZvb2QpIHsKICAgICAgY29uc29s
        ZS5sb2coJ3BlcnNvbiBhdGUgc29tZSAnICsgZm9vZCk7CiAgICB9KTsKCiAg
        ICBwZXJzb24udHJpZ2dlcignZGlkRWF0JywgJ2Jyb2Njb2xpJyk7CgogICAg
        Ly8gb3V0cHV0czogcGVyc29uIGF0ZSBzb21lIGJyb2Njb2xpCiAgICBgYGAK
        ICAgIEBtZXRob2QgdHJpZ2dlcgogICAgQHBhcmFtIHtTdHJpbmd9IG5hbWUg
        VGhlIG5hbWUgb2YgdGhlIGV2ZW50CiAgICBAcGFyYW0ge09iamVjdC4uLn0g
        YXJncyBPcHRpb25hbCBhcmd1bWVudHMgdG8gcGFzcyBvbgogICovCiAgdHJp
        Z2dlcjogZnVuY3Rpb24obmFtZSkgewogICAgdmFyIGFyZ3MgPSBbXSwgaSwg
        bDsKICAgIGZvciAoaSA9IDEsIGwgPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwg
        bDsgaSsrKSB7CiAgICAgIGFyZ3MucHVzaChhcmd1bWVudHNbaV0pOwogICAg
        fQogICAgRW1iZXIuc2VuZEV2ZW50KHRoaXMsIG5hbWUsIGFyZ3MpOwogIH0s
        CgogIC8qKgogICAgQ2FuY2VscyBzdWJzY3JpcHRpb24gZm9yIGdpdmVuIG5h
        bWUsIHRhcmdldCwgYW5kIG1ldGhvZC4KCiAgICBAbWV0aG9kIG9mZgogICAg
        QHBhcmFtIHtTdHJpbmd9IG5hbWUgVGhlIG5hbWUgb2YgdGhlIGV2ZW50CiAg
        ICBAcGFyYW0ge09iamVjdH0gdGFyZ2V0IFRoZSB0YXJnZXQgb2YgdGhlIHN1
        YnNjcmlwdGlvbgogICAgQHBhcmFtIHtGdW5jdGlvbn0gbWV0aG9kIFRoZSBm
        dW5jdGlvbiBvZiB0aGUgc3Vic2NyaXB0aW9uCiAgICBAcmV0dXJuIHRoaXMK
        ICAqLwogIG9mZjogZnVuY3Rpb24obmFtZSwgdGFyZ2V0LCBtZXRob2QpIHsK
        ICAgIEVtYmVyLnJlbW92ZUxpc3RlbmVyKHRoaXMsIG5hbWUsIHRhcmdldCwg
        bWV0aG9kKTsKICAgIHJldHVybiB0aGlzOwogIH0sCgogIC8qKgogICAgQ2hl
        Y2tzIHRvIHNlZSBpZiBvYmplY3QgaGFzIGFueSBzdWJzY3JpcHRpb25zIGZv
        ciBuYW1lZCBldmVudC4KCiAgICBAbWV0aG9kIGhhcwogICAgQHBhcmFtIHtT
        dHJpbmd9IG5hbWUgVGhlIG5hbWUgb2YgdGhlIGV2ZW50CiAgICBAcmV0dXJu
        IHtCb29sZWFufSBkb2VzIHRoZSBvYmplY3QgaGF2ZSBhIHN1YnNjcmlwdGlv
        biBmb3IgZXZlbnQKICAgKi8KICBoYXM6IGZ1bmN0aW9uKG5hbWUpIHsKICAg
        IHJldHVybiBFbWJlci5oYXNMaXN0ZW5lcnModGhpcywgbmFtZSk7CiAgfQp9
        KTsKCn0pKCk7CgoKCihmdW5jdGlvbigpIHsKdmFyIFJTVlAgPSByZXF1aXJl
        TW9kdWxlKCJyc3ZwIik7CgpSU1ZQLmNvbmZpZ3VyZSgnYXN5bmMnLCBmdW5j
        dGlvbihjYWxsYmFjaywgcHJvbWlzZSkgewogIEVtYmVyLnJ1bi5zY2hlZHVs
        ZSgnYWN0aW9ucycsIHByb21pc2UsIGNhbGxiYWNrLCBwcm9taXNlKTsKfSk7
        CgpSU1ZQLlByb21pc2UucHJvdG90eXBlLmZhaWwgPSBmdW5jdGlvbihjYWxs
        YmFjaywgbGFiZWwpewogIEVtYmVyLmRlcHJlY2F0ZSgnUlNWUC5Qcm9taXNl
        LmZhaWwgaGFzIGJlZW4gcmVuYW1lZCBhcyBSU1ZQLlByb21pc2UuY2F0Y2gn
        KTsKICByZXR1cm4gdGhpc1snY2F0Y2gnXShjYWxsYmFjaywgbGFiZWwpOwp9
        OwoKLyoqCkBtb2R1bGUgZW1iZXIKQHN1Ym1vZHVsZSBlbWJlci1ydW50aW1l
        CiovCgp2YXIgZ2V0ID0gRW1iZXIuZ2V0OwoKLyoqCiAgQGNsYXNzIERlZmVy
        cmVkCiAgQG5hbWVzcGFjZSBFbWJlcgogKi8KRW1iZXIuRGVmZXJyZWRNaXhp
        biA9IEVtYmVyLk1peGluLmNyZWF0ZSh7CiAgLyoqCiAgICBBZGQgaGFuZGxl
        cnMgdG8gYmUgY2FsbGVkIHdoZW4gdGhlIERlZmVycmVkIG9iamVjdCBpcyBy
        ZXNvbHZlZCBvciByZWplY3RlZC4KCiAgICBAbWV0aG9kIHRoZW4KICAgIEBw
        YXJhbSB7RnVuY3Rpb259IHJlc29sdmUgYSBjYWxsYmFjayBmdW5jdGlvbiB0
        byBiZSBjYWxsZWQgd2hlbiBkb25lCiAgICBAcGFyYW0ge0Z1bmN0aW9ufSBy
        ZWplY3QgIGEgY2FsbGJhY2sgZnVuY3Rpb24gdG8gYmUgY2FsbGVkIHdoZW4g
        ZmFpbGVkCiAgKi8KICB0aGVuOiBmdW5jdGlvbihyZXNvbHZlLCByZWplY3Qs
        IGxhYmVsKSB7CiAgICB2YXIgZGVmZXJyZWQsIHByb21pc2UsIGVudGl0eTsK
        CiAgICBlbnRpdHkgPSB0aGlzOwogICAgZGVmZXJyZWQgPSBnZXQodGhpcywg
        J19kZWZlcnJlZCcpOwogICAgcHJvbWlzZSA9IGRlZmVycmVkLnByb21pc2U7
        CgogICAgZnVuY3Rpb24gZnVsZmlsbG1lbnRIYW5kbGVyKGZ1bGZpbGxtZW50
        KSB7CiAgICAgIGlmIChmdWxmaWxsbWVudCA9PT0gcHJvbWlzZSkgewogICAg
        ICAgIHJldHVybiByZXNvbHZlKGVudGl0eSk7CiAgICAgIH0gZWxzZSB7CiAg
        ICAgICAgcmV0dXJuIHJlc29sdmUoZnVsZmlsbG1lbnQpOwogICAgICB9CiAg
        ICB9CgogICAgcmV0dXJuIHByb21pc2UudGhlbihyZXNvbHZlICYmIGZ1bGZp
        bGxtZW50SGFuZGxlciwgcmVqZWN0LCBsYWJlbCk7CiAgfSwKCiAgLyoqCiAg
        ICBSZXNvbHZlIGEgRGVmZXJyZWQgb2JqZWN0IGFuZCBjYWxsIGFueSBgZG9u
        ZUNhbGxiYWNrc2Agd2l0aCB0aGUgZ2l2ZW4gYXJncy4KCiAgICBAbWV0aG9k
        IHJlc29sdmUKICAqLwogIHJlc29sdmU6IGZ1bmN0aW9uKHZhbHVlKSB7CiAg
        ICB2YXIgZGVmZXJyZWQsIHByb21pc2U7CgogICAgZGVmZXJyZWQgPSBnZXQo
        dGhpcywgJ19kZWZlcnJlZCcpOwogICAgcHJvbWlzZSA9IGRlZmVycmVkLnBy
        b21pc2U7CgogICAgaWYgKHZhbHVlID09PSB0aGlzKSB7CiAgICAgIGRlZmVy
        cmVkLnJlc29sdmUocHJvbWlzZSk7CiAgICB9IGVsc2UgewogICAgICBkZWZl
        cnJlZC5yZXNvbHZlKHZhbHVlKTsKICAgIH0KICB9LAoKICAvKioKICAgIFJl
        amVjdCBhIERlZmVycmVkIG9iamVjdCBhbmQgY2FsbCBhbnkgYGZhaWxDYWxs
        YmFja3NgIHdpdGggdGhlIGdpdmVuIGFyZ3MuCgogICAgQG1ldGhvZCByZWpl
        Y3QKICAqLwogIHJlamVjdDogZnVuY3Rpb24odmFsdWUpIHsKICAgIGdldCh0
        aGlzLCAnX2RlZmVycmVkJykucmVqZWN0KHZhbHVlKTsKICB9LAoKICBfZGVm
        ZXJyZWQ6IEVtYmVyLmNvbXB1dGVkKGZ1bmN0aW9uKCkgewogICAgcmV0dXJu
        IFJTVlAuZGVmZXIoJ0VtYmVyOiBEZWZlcnJlZE1peGluIC0gJyArIHRoaXMp
        OwogIH0pCn0pOwoKCn0pKCk7CgoKCihmdW5jdGlvbigpIHsKLyoqCkBtb2R1
        bGUgZW1iZXIKQHN1Ym1vZHVsZSBlbWJlci1ydW50aW1lCiovCgp2YXIgZ2V0
        ID0gRW1iZXIuZ2V0LCB0eXBlT2YgPSBFbWJlci50eXBlT2Y7CgovKioKICBU
        aGUgYEVtYmVyLkFjdGlvbkhhbmRsZXJgIG1peGluIGltcGxlbWVudHMgc3Vw
        cG9ydCBmb3IgbW92aW5nIGFuIGBhY3Rpb25zYAogIHByb3BlcnR5IHRvIGFu
        IGBfYWN0aW9uc2AgcHJvcGVydHkgYXQgZXh0ZW5kIHRpbWUsIGFuZCBhZGRp
        bmcgYF9hY3Rpb25zYAogIHRvIHRoZSBvYmplY3QncyBtZXJnZWRQcm9wZXJ0
        aWVzIGxpc3QuCgogIGBFbWJlci5BY3Rpb25IYW5kbGVyYCBpcyB1c2VkIGlu
        dGVybmFsbHkgYnkgRW1iZXIgaW4gIGBFbWJlci5WaWV3YCwKICBgRW1iZXIu
        Q29udHJvbGxlcmAsIGFuZCBgRW1iZXIuUm91dGVgLgoKICBAY2xhc3MgQWN0
        aW9uSGFuZGxlcgogIEBuYW1lc3BhY2UgRW1iZXIKKi8KRW1iZXIuQWN0aW9u
        SGFuZGxlciA9IEVtYmVyLk1peGluLmNyZWF0ZSh7CiAgbWVyZ2VkUHJvcGVy
        dGllczogWydfYWN0aW9ucyddLAoKICAvKioKICAgIFRoZSBjb2xsZWN0aW9u
        IG9mIGZ1bmN0aW9ucywga2V5ZWQgYnkgbmFtZSwgYXZhaWxhYmxlIG9uIHRo
        aXMKICAgIGBBY3Rpb25IYW5kbGVyYCBhcyBhY3Rpb24gdGFyZ2V0cy4KCiAg
        ICBUaGVzZSBmdW5jdGlvbnMgd2lsbCBiZSBpbnZva2VkIHdoZW4gYSBtYXRj
        aGluZyBge3thY3Rpb259fWAgaXMgdHJpZ2dlcmVkCiAgICBmcm9tIHdpdGhp
        biBhIHRlbXBsYXRlIGFuZCB0aGUgYXBwbGljYXRpb24ncyBjdXJyZW50IHJv
        dXRlIGlzIHRoaXMgcm91dGUuCgogICAgQWN0aW9ucyBjYW4gYWxzbyBiZSBp
        bnZva2VkIGZyb20gb3RoZXIgcGFydHMgb2YgeW91ciBhcHBsaWNhdGlvbgog
        ICAgdmlhIGBBY3Rpb25IYW5kbGVyI3NlbmRgLgoKICAgIFRoZSBgYWN0aW9u
        c2AgaGFzaCB3aWxsIGluaGVyaXQgYWN0aW9uIGhhbmRsZXJzIGZyb20KICAg
        IHRoZSBgYWN0aW9uc2AgaGFzaCBkZWZpbmVkIG9uIGV4dGVuZGVkIHBhcmVu
        dCBjbGFzc2VzCiAgICBvciBtaXhpbnMgcmF0aGVyIHRoYW4ganVzdCByZXBs
        YWNlIHRoZSBlbnRpcmUgaGFzaCwgZS5nLjoKCiAgICBgYGBqcwogICAgQXBw
        LkNhbkRpc3BsYXlCYW5uZXIgPSBFbWJlci5NaXhpbi5jcmVhdGUoewogICAg
        ICBhY3Rpb25zOiB7CiAgICAgICAgZGlzcGxheUJhbm5lcjogZnVuY3Rpb24o
        bXNnKSB7CiAgICAgICAgICAvLyAuLi4KICAgICAgICB9CiAgICAgIH0KICAg
        IH0pOwoKICAgIEFwcC5XZWxjb21lUm91dGUgPSBFbWJlci5Sb3V0ZS5leHRl
        bmQoQXBwLkNhbkRpc3BsYXlCYW5uZXIsIHsKICAgICAgYWN0aW9uczogewog
        ICAgICAgIHBsYXlNdXNpYzogZnVuY3Rpb24oKSB7CiAgICAgICAgICAvLyAu
        Li4KICAgICAgICB9CiAgICAgIH0KICAgIH0pOwoKICAgIC8vIGBXZWxjb21l
        Um91dGVgLCB3aGVuIGFjdGl2ZSwgd2lsbCBiZSBhYmxlIHRvIHJlc3BvbmQK
        ICAgIC8vIHRvIGJvdGggYWN0aW9ucywgc2luY2UgdGhlIGFjdGlvbnMgaGFz
        aCBpcyBtZXJnZWQgcmF0aGVyCiAgICAvLyB0aGVuIHJlcGxhY2VkIHdoZW4g
        ZXh0ZW5kaW5nIG1peGlucyAvIHBhcmVudCBjbGFzc2VzLgogICAgdGhpcy5z
        ZW5kKCdkaXNwbGF5QmFubmVyJyk7CiAgICB0aGlzLnNlbmQoJ3BsYXlNdXNp
        YycpOwogICAgYGBgCgogICAgV2l0aGluIGEgQ29udHJvbGxlciwgUm91dGUs
        IFZpZXcgb3IgQ29tcG9uZW50J3MgYWN0aW9uIGhhbmRsZXIsCiAgICB0aGUg
        dmFsdWUgb2YgdGhlIGB0aGlzYCBjb250ZXh0IGlzIHRoZSBDb250cm9sbGVy
        LCBSb3V0ZSwgVmlldyBvcgogICAgQ29tcG9uZW50IG9iamVjdDoKCiAgICBg
        YGBqcwogICAgQXBwLlNvbmdSb3V0ZSA9IEVtYmVyLlJvdXRlLmV4dGVuZCh7
        CiAgICAgIGFjdGlvbnM6IHsKICAgICAgICBteUFjdGlvbjogZnVuY3Rpb24o
        KSB7CiAgICAgICAgICB0aGlzLmNvbnRyb2xsZXJGb3IoInNvbmciKTsKICAg
        ICAgICAgIHRoaXMudHJhbnNpdGlvblRvKCJvdGhlci5yb3V0ZSIpOwogICAg
        ICAgICAgLi4uCiAgICAgICAgfQogICAgICB9CiAgICB9KTsKICAgIGBgYAoK
        ICAgIEl0IGlzIGFsc28gcG9zc2libGUgdG8gY2FsbCBgdGhpcy5fc3VwZXIo
        KWAgZnJvbSB3aXRoaW4gYW4KICAgIGFjdGlvbiBoYW5kbGVyIGlmIGl0IG92
        ZXJyaWRlcyBhIGhhbmRsZXIgZGVmaW5lZCBvbiBhIHBhcmVudAogICAgY2xh
        c3Mgb3IgbWl4aW46CgogICAgVGFrZSBmb3IgZXhhbXBsZSB0aGUgZm9sbG93
        aW5nIHJvdXRlczoKCiAgICBgYGBqcwogICAgQXBwLkRlYnVnUm91dGUgPSBF
        bWJlci5NaXhpbi5jcmVhdGUoewogICAgICBhY3Rpb25zOiB7CiAgICAgICAg
        ZGVidWdSb3V0ZUluZm9ybWF0aW9uOiBmdW5jdGlvbigpIHsKICAgICAgICAg
        IGNvbnNvbGUuZGVidWcoInRyb2xvbG8iKTsKICAgICAgICB9CiAgICAgIH0K
        ICAgIH0pOwoKICAgIEFwcC5Bbm5veWluZ0RlYnVnUm91dGUgPSBFbWJlci5S
        b3V0ZS5leHRlbmQoQXBwLkRlYnVnUm91dGUsIHsKICAgICAgYWN0aW9uczog
        ewogICAgICAgIGRlYnVnUm91dGVJbmZvcm1hdGlvbjogZnVuY3Rpb24oKSB7
        CiAgICAgICAgICAvLyBhbHNvIGNhbGwgdGhlIGRlYnVnUm91dGVJbmZvcm1h
        dGlvbiBvZiBtaXhlZCBpbiBBcHAuRGVidWdSb3V0ZQogICAgICAgICAgdGhp
        cy5fc3VwZXIoKTsKCiAgICAgICAgICAvLyBzaG93IGFkZGl0aW9uYWwgYW5u
        b3lhbmNlCiAgICAgICAgICB3aW5kb3cuYWxlcnQoLi4uKTsKICAgICAgICB9
        CiAgICAgIH0KICAgIH0pOwogICAgYGBgCgogICAgIyMgQnViYmxpbmcKCiAg
        ICBCeSBkZWZhdWx0LCBhbiBhY3Rpb24gd2lsbCBzdG9wIGJ1YmJsaW5nIG9u
        Y2UgYSBoYW5kbGVyIGRlZmluZWQKICAgIG9uIHRoZSBgYWN0aW9uc2AgaGFz
        aCBoYW5kbGVzIGl0LiBUbyBjb250aW51ZSBidWJibGluZyB0aGUgYWN0aW9u
        LAogICAgeW91IG11c3QgcmV0dXJuIGB0cnVlYCBmcm9tIHRoZSBoYW5kbGVy
        OgoKICAgIGBgYGpzCiAgICBBcHAuUm91dGVyLm1hcChmdW5jdGlvbigpIHsK
        ICAgICAgdGhpcy5yZXNvdXJjZSgiYWxidW0iLCBmdW5jdGlvbigpIHsKICAg
        ICAgICB0aGlzLnJvdXRlKCJzb25nIik7CiAgICAgIH0pOwogICAgfSk7Cgog
        ICAgQXBwLkFsYnVtUm91dGUgPSBFbWJlci5Sb3V0ZS5leHRlbmQoewogICAg
        ICBhY3Rpb25zOiB7CiAgICAgICAgc3RhcnRQbGF5aW5nOiBmdW5jdGlvbigp
        IHsKICAgICAgICB9CiAgICAgIH0KICAgIH0pOwoKICAgIEFwcC5BbGJ1bVNv
        bmdSb3V0ZSA9IEVtYmVyLlJvdXRlLmV4dGVuZCh7CiAgICAgIGFjdGlvbnM6
        IHsKICAgICAgICBzdGFydFBsYXlpbmc6IGZ1bmN0aW9uKCkgewogICAgICAg
        ICAgLy8gLi4uCgogICAgICAgICAgaWYgKGFjdGlvblNob3VsZEFsc29CZVRy
        aWdnZXJlZE9uUGFyZW50Um91dGUpIHsKICAgICAgICAgICAgcmV0dXJuIHRy
        dWU7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9KTsKICAg
        IGBgYAoKICAgIEBwcm9wZXJ0eSBhY3Rpb25zCiAgICBAdHlwZSBIYXNoCiAg
        ICBAZGVmYXVsdCBudWxsCiAgKi8KCiAgLyoqCiAgICBNb3ZlcyBgYWN0aW9u
        c2AgdG8gYF9hY3Rpb25zYCBhdCBleHRlbmQgdGltZS4gTm90ZSB0aGF0IHRo
        aXMgY3VycmVudGx5CiAgICBtb2RpZmllcyB0aGUgbWl4aW4gdGhlbXNlbHZl
        cywgd2hpY2ggaXMgdGVjaG5pY2FsbHkgZHViaW91cyBidXQKICAgIGlzIHBy
        YWN0aWNhbGx5IG9mIGxpdHRsZSBjb25zZXF1ZW5jZS4gVGhpcyBtYXkgY2hh
        bmdlIGluIHRoZSBmdXR1cmUuCgogICAgQHByaXZhdGUKICAgIEBtZXRob2Qg
        d2lsbE1lcmdlTWl4aW4KICAqLwogIHdpbGxNZXJnZU1peGluOiBmdW5jdGlv
        bihwcm9wcykgewogICAgdmFyIGhhc2hOYW1lOwoKICAgIGlmICghcHJvcHMu
        X2FjdGlvbnMpIHsKICAgICAgRW1iZXIuYXNzZXJ0KCInYWN0aW9ucycgc2hv
        dWxkIG5vdCBiZSBhIGZ1bmN0aW9uIiwgdHlwZW9mKHByb3BzLmFjdGlvbnMp
        ICE9PSAnZnVuY3Rpb24nKTsKCiAgICAgIGlmICh0eXBlT2YocHJvcHMuYWN0
        aW9ucykgPT09ICdvYmplY3QnKSB7CiAgICAgICAgaGFzaE5hbWUgPSAnYWN0
        aW9ucyc7CiAgICAgIH0gZWxzZSBpZiAodHlwZU9mKHByb3BzLmV2ZW50cykg
        PT09ICdvYmplY3QnKSB7CiAgICAgICAgRW1iZXIuZGVwcmVjYXRlKCdBY3Rp
        b24gaGFuZGxlcnMgY29udGFpbmVkIGluIGFuIGBldmVudHNgIG9iamVjdCBh
        cmUgZGVwcmVjYXRlZCBpbiBmYXZvciBvZiBwdXR0aW5nIHRoZW0gaW4gYW4g
        YGFjdGlvbnNgIG9iamVjdCcsIGZhbHNlKTsKICAgICAgICBoYXNoTmFtZSA9
        ICdldmVudHMnOwogICAgICB9CgogICAgICBpZiAoaGFzaE5hbWUpIHsKICAg
        ICAgICBwcm9wcy5fYWN0aW9ucyA9IEVtYmVyLm1lcmdlKHByb3BzLl9hY3Rp
        b25zIHx8IHt9LCBwcm9wc1toYXNoTmFtZV0pOwogICAgICB9CgogICAgICBk
        ZWxldGUgcHJvcHNbaGFzaE5hbWVdOwogICAgfQogIH0sCgogIC8qKgogICAg
        VHJpZ2dlcnMgYSBuYW1lZCBhY3Rpb24gb24gdGhlIGBBY3Rpb25IYW5kbGVy
        YC4gQW55IHBhcmFtZXRlcnMKICAgIHN1cHBsaWVkIGFmdGVyIHRoZSBgYWN0
        aW9uTmFtZWAgc3RyaW5nIHdpbGwgYmUgcGFzc2VkIGFzIGFyZ3VtZW50cwog
        ICAgdG8gdGhlIGFjdGlvbiB0YXJnZXQgZnVuY3Rpb24uCgogICAgSWYgdGhl
        IGBBY3Rpb25IYW5kbGVyYCBoYXMgaXRzIGB0YXJnZXRgIHByb3BlcnR5IHNl
        dCwgYWN0aW9ucyBtYXkKICAgIGJ1YmJsZSB0byB0aGUgYHRhcmdldGAuIEJ1
        YmJsaW5nIGhhcHBlbnMgd2hlbiBhbiBgYWN0aW9uTmFtZWAgY2FuCiAgICBu
        b3QgYmUgZm91bmQgaW4gdGhlIGBBY3Rpb25IYW5kbGVyYCdzIGBhY3Rpb25z
        YCBoYXNoIG9yIGlmIHRoZQogICAgYWN0aW9uIHRhcmdldCBmdW5jdGlvbiBy
        ZXR1cm5zIGB0cnVlYC4KCiAgICBFeGFtcGxlCgogICAgYGBganMKICAgIEFw
        cC5XZWxjb21lUm91dGUgPSBFbWJlci5Sb3V0ZS5leHRlbmQoewogICAgICBh
        Y3Rpb25zOiB7CiAgICAgICAgcGxheVRoZW1lOiBmdW5jdGlvbigpIHsKICAg
        ICAgICAgICB0aGlzLnNlbmQoJ3BsYXlNdXNpYycsICd0aGVtZS5tcDMnKTsK
        ICAgICAgICB9LAogICAgICAgIHBsYXlNdXNpYzogZnVuY3Rpb24odHJhY2sp
        IHsKICAgICAgICAgIC8vIC4uLgogICAgICAgIH0KICAgICAgfQogICAgfSk7
        CiAgICBgYGAKCiAgICBAbWV0aG9kIHNlbmQKICAgIEBwYXJhbSB7U3RyaW5n
        fSBhY3Rpb25OYW1lIFRoZSBhY3Rpb24gdG8gdHJpZ2dlcgogICAgQHBhcmFt
        IHsqfSBjb250ZXh0IGEgY29udGV4dCB0byBzZW5kIHdpdGggdGhlIGFjdGlv
        bgogICovCiAgc2VuZDogZnVuY3Rpb24oYWN0aW9uTmFtZSkgewogICAgdmFy
        IGFyZ3MgPSBbXS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSksIHRhcmdldDsK
        CiAgICBpZiAodGhpcy5fYWN0aW9ucyAmJiB0aGlzLl9hY3Rpb25zW2FjdGlv
        bk5hbWVdKSB7CiAgICAgIGlmICh0aGlzLl9hY3Rpb25zW2FjdGlvbk5hbWVd
        LmFwcGx5KHRoaXMsIGFyZ3MpID09PSB0cnVlKSB7CiAgICAgICAgLy8gaGFu
        ZGxlciByZXR1cm5lZCB0cnVlLCBzbyB0aGlzIGFjdGlvbiB3aWxsIGJ1YmJs
        ZQogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAg
        fSBlbHNlIGlmICh0aGlzLmRlcHJlY2F0ZWRTZW5kICYmIHRoaXMuZGVwcmVj
        YXRlZFNlbmRIYW5kbGVzICYmIHRoaXMuZGVwcmVjYXRlZFNlbmRIYW5kbGVz
        KGFjdGlvbk5hbWUpKSB7CiAgICAgIGlmICh0aGlzLmRlcHJlY2F0ZWRTZW5k
        LmFwcGx5KHRoaXMsIFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzKSkgPT09IHRy
        dWUpIHsKICAgICAgICAvLyBoYW5kbGVyIHJldHVybiB0cnVlLCBzbyB0aGlz
        IGFjdGlvbiB3aWxsIGJ1YmJsZQogICAgICB9IGVsc2UgewogICAgICAgIHJl
        dHVybjsKICAgICAgfQogICAgfQoKICAgIGlmICh0YXJnZXQgPSBnZXQodGhp
        cywgJ3RhcmdldCcpKSB7CiAgICAgIEVtYmVyLmFzc2VydCgiVGhlIGB0YXJn
        ZXRgIGZvciAiICsgdGhpcyArICIgKCIgKyB0YXJnZXQgKyAiKSBkb2VzIG5v
        dCBoYXZlIGEgYHNlbmRgIG1ldGhvZCIsIHR5cGVvZiB0YXJnZXQuc2VuZCA9
        PT0gJ2Z1bmN0aW9uJyk7CiAgICAgIHRhcmdldC5zZW5kLmFwcGx5KHRhcmdl
        dCwgYXJndW1lbnRzKTsKICAgIH0KICB9Cgp9KTsKCn0pKCk7CgoKCihmdW5j
        dGlvbigpIHsKdmFyIHNldCA9IEVtYmVyLnNldCwgZ2V0ID0gRW1iZXIuZ2V0
        LAogICAgbm90ID0gRW1iZXIuY29tcHV0ZWQubm90LAogICAgb3IgPSBFbWJl
        ci5jb21wdXRlZC5vcjsKCi8qKgogIEBtb2R1bGUgZW1iZXIKICBAc3VibW9k
        dWxlIGVtYmVyLXJ1bnRpbWUKICovCgpmdW5jdGlvbiB0YXAocHJveHksIHBy
        b21pc2UpIHsKICByZXR1cm4gcHJvbWlzZS50aGVuKGZ1bmN0aW9uKHZhbHVl
        KSB7CiAgICBzZXQocHJveHksICdpc0Z1bGZpbGxlZCcsIHRydWUpOwogICAg
        c2V0KHByb3h5LCAnY29udGVudCcsIHZhbHVlKTsKICAgIHJldHVybiB2YWx1
        ZTsKICB9LCBmdW5jdGlvbihyZWFzb24pIHsKICAgIHNldChwcm94eSwgJ2lz
        UmVqZWN0ZWQnLCB0cnVlKTsKICAgIHNldChwcm94eSwgJ3JlYXNvbicsIHJl
        YXNvbik7CiAgICB0aHJvdyByZWFzb247CiAgfSwgIkVtYmVyOiBQcm9taXNl
        UHJveHkiKTsKfQoKLyoqCiAgQSBsb3cgbGV2ZWwgbWl4aW4gbWFraW5nIE9i
        amVjdFByb3h5LCBPYmplY3RDb250cm9sbGVyIG9yIEFycmF5Q29udHJvbGxl
        cidzIHByb21pc2UgYXdhcmUuCgogIGBgYGphdmFzY3JpcHQKICB2YXIgT2Jq
        ZWN0UHJvbWlzZUNvbnRyb2xsZXIgPSBFbWJlci5PYmplY3RDb250cm9sbGVy
        LmV4dGVuZChFbWJlci5Qcm9taXNlUHJveHlNaXhpbik7CgogIHZhciBjb250
        cm9sbGVyID0gT2JqZWN0UHJvbWlzZUNvbnRyb2xsZXIuY3JlYXRlKHsKICAg
        IHByb21pc2U6ICQuZ2V0SlNPTignL3NvbWUvcmVtb3RlL2RhdGEuanNvbicp
        CiAgfSk7CgogIGNvbnRyb2xsZXIudGhlbihmdW5jdGlvbihqc29uKXsKICAg
        ICAvLyB0aGUganNvbgogIH0sIGZ1bmN0aW9uKHJlYXNvbikgewogICAgIC8v
        IHRoZSByZWFzb24gd2h5IHlvdSBoYXZlIG5vIGpzb24KICB9KTsKICBgYGAK
        CiAgdGhlIGNvbnRyb2xsZXIgaGFzIGJpbmRhYmxlIGF0dHJpYnV0ZXMgd2hp
        Y2gKICB0cmFjayB0aGUgcHJvbWlzZXMgbGlmZSBjeWNsZQoKICBgYGBqYXZh
        c2NyaXB0CiAgY29udHJvbGxlci5nZXQoJ2lzUGVuZGluZycpICAgLy89PiB0
        cnVlCiAgY29udHJvbGxlci5nZXQoJ2lzU2V0dGxlZCcpICAvLz0+IGZhbHNl
        CiAgY29udHJvbGxlci5nZXQoJ2lzUmVqZWN0ZWQnKSAgLy89PiBmYWxzZQog
        IGNvbnRyb2xsZXIuZ2V0KCdpc0Z1bGZpbGxlZCcpIC8vPT4gZmFsc2UKICBg
        YGAKCiAgV2hlbiB0aGUgdGhlICQuZ2V0SlNPTiBjb21wbGV0ZXMsIGFuZCB0
        aGUgcHJvbWlzZSBpcyBmdWxmaWxsZWQKICB3aXRoIGpzb24sIHRoZSBsaWZl
        IGN5Y2xlIGF0dHJpYnV0ZXMgd2lsbCB1cGRhdGUgYWNjb3JkaW5nbHkuCgog
        IGBgYGphdmFzY3JpcHQKICBjb250cm9sbGVyLmdldCgnaXNQZW5kaW5nJykg
        ICAvLz0+IGZhbHNlCiAgY29udHJvbGxlci5nZXQoJ2lzU2V0dGxlZCcpICAg
        Ly89PiB0cnVlCiAgY29udHJvbGxlci5nZXQoJ2lzUmVqZWN0ZWQnKSAgLy89
        PiBmYWxzZQogIGNvbnRyb2xsZXIuZ2V0KCdpc0Z1bGZpbGxlZCcpIC8vPT4g
        dHJ1ZQogIGBgYAoKICBBcyB0aGUgY29udHJvbGxlciBpcyBhbiBPYmplY3RD
        b250cm9sbGVyLCBhbmQgdGhlIGpzb24gbm93IGl0cyBjb250ZW50LAogIGFs
        bCB0aGUganNvbiBwcm9wZXJ0aWVzIHdpbGwgYmUgYXZhaWxhYmxlIGRpcmVj
        dGx5IGZyb20gdGhlIGNvbnRyb2xsZXIuCgogIGBgYGphdmFzY3JpcHQKICAv
        LyBBc3N1bWluZyB0aGUgZm9sbG93aW5nIGpzb246CiAgewogICAgZmlyc3RO
        YW1lOiAnU3RlZmFuJywKICAgIGxhc3ROYW1lOiAnUGVubmVyJwogIH0KCiAg
        Ly8gYm90aCBwcm9wZXJ0aWVzIHdpbGwgYWNjZXNzaWJsZSBvbiB0aGUgY29u
        dHJvbGxlcgogIGNvbnRyb2xsZXIuZ2V0KCdmaXJzdE5hbWUnKSAvLz0+ICdT
        dGVmYW4nCiAgY29udHJvbGxlci5nZXQoJ2xhc3ROYW1lJykgIC8vPT4gJ1Bl
        bm5lcicKICBgYGAKCiAgSWYgdGhlIGNvbnRyb2xsZXIgaXMgYmFja2luZyBh
        IHRlbXBsYXRlLCB0aGUgYXR0cmlidXRlcyBhcmUKICBiaW5kYWJsZSBmcm9t
        IHdpdGhpbiB0aGF0IHRlbXBsYXRlCgogIGBgYGhhbmRsZWJhcnMKICB7eyNp
        ZiBpc1BlbmRpbmd9fQogICAgbG9hZGluZy4uLgogIHt7ZWxzZX19CiAgICBm
        aXJzdE5hbWU6IHt7Zmlyc3ROYW1lfX0KICAgIGxhc3ROYW1lOiB7e2xhc3RO
        YW1lfX0KICB7ey9pZn19CiAgYGBgCiAgQGNsYXNzIEVtYmVyLlByb21pc2VQ
        cm94eU1peGluCiovCkVtYmVyLlByb21pc2VQcm94eU1peGluID0gRW1iZXIu
        TWl4aW4uY3JlYXRlKHsKICAvKioKICAgIElmIHRoZSBwcm94aWVkIHByb21p
        c2UgaXMgcmVqZWN0ZWQgdGhpcyB3aWxsIGNvbnRhaW4gdGhlIHJlYXNvbgog
        ICAgcHJvdmlkZWQuCgogICAgQHByb3BlcnR5IHJlYXNvbgogICAgQGRlZmF1
        bHQgbnVsbAogICovCiAgcmVhc29uOiAgICBudWxsLAoKICAvKioKICAgIE9u
        Y2UgdGhlIHByb3hpZWQgcHJvbWlzZSBoYXMgc2V0dGxlZCB0aGlzIHdpbGwg
        YmVjb21lIGBmYWxzZWAuCgogICAgQHByb3BlcnR5IGlzUGVuZGluZwogICAg
        QGRlZmF1bHQgdHJ1ZQogICovCiAgaXNQZW5kaW5nOiAgbm90KCdpc1NldHRs
        ZWQnKS5yZWFkT25seSgpLAoKICAvKioKICAgIE9uY2UgdGhlIHByb3hpZWQg
        cHJvbWlzZSBoYXMgc2V0dGxlZCB0aGlzIHdpbGwgYmVjb21lIGB0cnVlYC4K
        CiAgICBAcHJvcGVydHkgaXNTZXR0bGVkCiAgICBAZGVmYXVsdCBmYWxzZQog
        ICovCiAgaXNTZXR0bGVkOiAgb3IoJ2lzUmVqZWN0ZWQnLCAnaXNGdWxmaWxs
        ZWQnKS5yZWFkT25seSgpLAoKICAvKioKICAgIFdpbGwgYmVjb21lIGB0cnVl
        YCBpZiB0aGUgcHJveGllZCBwcm9taXNlIGlzIHJlamVjdGVkLgoKICAgIEBw
        cm9wZXJ0eSBpc1JlamVjdGVkCiAgICBAZGVmYXVsdCBmYWxzZQogICovCiAg
        aXNSZWplY3RlZDogIGZhbHNlLAoKICAvKioKICAgIFdpbGwgYmVjb21lIGB0
        cnVlYCBpZiB0aGUgcHJveGllZCBwcm9taXNlIGlzIGZ1bGZpbGxlZC4KCiAg
        ICBAcHJvcGVydHkgaXNGdWxsZmlsbGVkCiAgICBAZGVmYXVsdCBmYWxzZQog
        ICovCiAgaXNGdWxmaWxsZWQ6IGZhbHNlLAoKICAvKioKICAgIFRoZSBwcm9t
        aXNlIHdob3NlIGZ1bGZpbGxtZW50IHZhbHVlIGlzIGJlaW5nIHByb3hpZWQg
        YnkgdGhpcyBvYmplY3QuCgogICAgVGhpcyBwcm9wZXJ0eSBtdXN0IGJlIHNw
        ZWNpZmllZCB1cG9uIGNyZWF0aW9uLCBhbmQgc2hvdWxkIG5vdCBiZQogICAg
        Y2hhbmdlZCBvbmNlIGNyZWF0ZWQuCgogICAgRXhhbXBsZToKCiAgICBgYGBq
        YXZhc2NyaXB0CiAgICBFbWJlci5PYmplY3RDb250cm9sbGVyLmV4dGVuZChF
        bWJlci5Qcm9taXNlUHJveHlNaXhpbikuY3JlYXRlKHsKICAgICAgcHJvbWlz
        ZTogPHRoZW5hYmxlPgogICAgfSk7CiAgICBgYGAKCiAgICBAcHJvcGVydHkg
        cHJvbWlzZQogICovCiAgcHJvbWlzZTogRW1iZXIuY29tcHV0ZWQoZnVuY3Rp
        b24oa2V5LCBwcm9taXNlKSB7CiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9
        PT0gMikgewogICAgICByZXR1cm4gdGFwKHRoaXMsIHByb21pc2UpOwogICAg
        fSBlbHNlIHsKICAgICAgdGhyb3cgbmV3IEVtYmVyLkVycm9yKCJQcm9taXNl
        UHJveHkncyBwcm9taXNlIG11c3QgYmUgc2V0Iik7CiAgICB9CiAgfSksCgog
        IC8qKgogICAgQW4gYWxpYXMgdG8gdGhlIHByb3hpZWQgcHJvbWlzZSdzIGB0
        aGVuYC4KCiAgICBTZWUgUlNWUC5Qcm9taXNlLnRoZW4uCgogICAgQG1ldGhv
        ZCB0aGVuCiAgICBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjawogICAgQHJl
        dHVybiB7UlNWUC5Qcm9taXNlfQogICovCiAgdGhlbjogcHJvbWlzZUFsaWFz
        KCd0aGVuJyksCgogIC8qKgogICAgQW4gYWxpYXMgdG8gdGhlIHByb3hpZWQg
        cHJvbWlzZSdzIGBjYXRjaGAuCgogICAgU2VlIFJTVlAuUHJvbWlzZS5jYXRj
        aC4KCiAgICBAbWV0aG9kIGNhdGNoCiAgICBAcGFyYW0ge0Z1bmN0aW9ufSBj
        YWxsYmFjawogICAgQHJldHVybiB7UlNWUC5Qcm9taXNlfQogICovCiAgJ2Nh
        dGNoJzogcHJvbWlzZUFsaWFzKCdjYXRjaCcpLAoKICAvKioKICAgIEFuIGFs
        aWFzIHRvIHRoZSBwcm94aWVkIHByb21pc2UncyBgZmluYWxseWAuCgogICAg
        U2VlIFJTVlAuUHJvbWlzZS5maW5hbGx5LgoKICAgIEBtZXRob2QgZmluYWxs
        eQogICAgQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2sKICAgIEByZXR1cm4g
        e1JTVlAuUHJvbWlzZX0KICAqLwogICdmaW5hbGx5JzogcHJvbWlzZUFsaWFz
        KCdmaW5hbGx5JykKCn0pOwoKZnVuY3Rpb24gcHJvbWlzZUFsaWFzKG5hbWUp
        IHsKICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgdmFyIHByb21pc2UgPSBn
        ZXQodGhpcywgJ3Byb21pc2UnKTsKICAgIHJldHVybiBwcm9taXNlW25hbWVd
        LmFwcGx5KHByb21pc2UsIGFyZ3VtZW50cyk7CiAgfTsKfQoKfSkoKTsKCgoK
        KGZ1bmN0aW9uKCkgewoKfSkoKTsKCgoKKGZ1bmN0aW9uKCkgewp2YXIgZ2V0
        ID0gRW1iZXIuZ2V0LAogICAgZm9yRWFjaCA9IEVtYmVyLkVudW1lcmFibGVV
        dGlscy5mb3JFYWNoLAogICAgUkVUQUlOID0gJ3InLAogICAgSU5TRVJUID0g
        J2knLAogICAgREVMRVRFID0gJ2QnOwoKLyoqCiAgQW4gYEVtYmVyLlRyYWNr
        ZWRBcnJheWAgdHJhY2tzIGFycmF5IG9wZXJhdGlvbnMuICBJdCdzIHVzZWZ1
        bCB3aGVuIHlvdSB3YW50IHRvCiAgbGF6aWx5IGNvbXB1dGUgdGhlIGluZGV4
        ZXMgb2YgaXRlbXMgaW4gYW4gYXJyYXkgYWZ0ZXIgdGhleSd2ZSBiZWVuIHNo
        aWZ0ZWQgYnkKICBzdWJzZXF1ZW50IG9wZXJhdGlvbnMuCgogIEBjbGFzcyBU
        cmFja2VkQXJyYXkKICBAbmFtZXNwYWNlIEVtYmVyCiAgQHBhcmFtIHthcnJh
        eX0gW2l0ZW1zPVtdXSBUaGUgYXJyYXkgdG8gYmUgdHJhY2tlZC4gIFRoaXMg
        aXMgdXNlZCBqdXN0IHRvIGdldAogIHRoZSBpbml0aWFsIGl0ZW1zIGZvciB0
        aGUgc3RhcnRpbmcgc3RhdGUgb2YgcmV0YWluOm4uCiovCkVtYmVyLlRyYWNr
        ZWRBcnJheSA9IGZ1bmN0aW9uIChpdGVtcykgewogIGlmIChhcmd1bWVudHMu
        bGVuZ3RoIDwgMSkgeyBpdGVtcyA9IFtdOyB9CgogIHZhciBsZW5ndGggPSBn
        ZXQoaXRlbXMsICdsZW5ndGgnKTsKCiAgaWYgKGxlbmd0aCkgewogICAgdGhp
        cy5fb3BlcmF0aW9ucyA9IFtuZXcgQXJyYXlPcGVyYXRpb24oUkVUQUlOLCBs
        ZW5ndGgsIGl0ZW1zKV07CiAgfSBlbHNlIHsKICAgIHRoaXMuX29wZXJhdGlv
        bnMgPSBbXTsKICB9Cn07CgpFbWJlci5UcmFja2VkQXJyYXkuUkVUQUlOID0g
        UkVUQUlOOwpFbWJlci5UcmFja2VkQXJyYXkuSU5TRVJUID0gSU5TRVJUOwpF
        bWJlci5UcmFja2VkQXJyYXkuREVMRVRFID0gREVMRVRFOwoKRW1iZXIuVHJh
        Y2tlZEFycmF5LnByb3RvdHlwZSA9IHsKCiAgLyoqCiAgICBUcmFjayB0aGF0
        IGBuZXdJdGVtc2Agd2VyZSBhZGRlZCB0byB0aGUgdHJhY2tlZCBhcnJheSBh
        dCBgaW5kZXhgLgoKICAgIEBtZXRob2QgYWRkSXRlbXMKICAgIEBwYXJhbSBp
        bmRleAogICAgQHBhcmFtIG5ld0l0ZW1zCiAgKi8KICBhZGRJdGVtczogZnVu
        Y3Rpb24gKGluZGV4LCBuZXdJdGVtcykgewogICAgdmFyIGNvdW50ID0gZ2V0
        KG5ld0l0ZW1zLCAnbGVuZ3RoJyk7CiAgICBpZiAoY291bnQgPCAxKSB7IHJl
        dHVybjsgfQoKICAgIHZhciBtYXRjaCA9IHRoaXMuX2ZpbmRBcnJheU9wZXJh
        dGlvbihpbmRleCksCiAgICAgICAgYXJyYXlPcGVyYXRpb24gPSBtYXRjaC5v
        cGVyYXRpb24sCiAgICAgICAgYXJyYXlPcGVyYXRpb25JbmRleCA9IG1hdGNo
        LmluZGV4LAogICAgICAgIGFycmF5T3BlcmF0aW9uUmFuZ2VTdGFydCA9IG1h
        dGNoLnJhbmdlU3RhcnQsCiAgICAgICAgY29tcG9zZUluZGV4LAogICAgICAg
        IHNwbGl0SW5kZXgsCiAgICAgICAgc3BsaXRJdGVtcywKICAgICAgICBzcGxp
        dEFycmF5T3BlcmF0aW9uLAogICAgICAgIG5ld0FycmF5T3BlcmF0aW9uOwoK
        ICAgIG5ld0FycmF5T3BlcmF0aW9uID0gbmV3IEFycmF5T3BlcmF0aW9uKElO
        U0VSVCwgY291bnQsIG5ld0l0ZW1zKTsKCiAgICBpZiAoYXJyYXlPcGVyYXRp
        b24pIHsKICAgICAgaWYgKCFtYXRjaC5zcGxpdCkgewogICAgICAgIC8vIGlu
        c2VydCBsZWZ0IG9mIGFycmF5T3BlcmF0aW9uCiAgICAgICAgdGhpcy5fb3Bl
        cmF0aW9ucy5zcGxpY2UoYXJyYXlPcGVyYXRpb25JbmRleCwgMCwgbmV3QXJy
        YXlPcGVyYXRpb24pOwogICAgICAgIGNvbXBvc2VJbmRleCA9IGFycmF5T3Bl
        cmF0aW9uSW5kZXg7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5fc3Bs
        aXQoYXJyYXlPcGVyYXRpb25JbmRleCwgaW5kZXggLSBhcnJheU9wZXJhdGlv
        blJhbmdlU3RhcnQsIG5ld0FycmF5T3BlcmF0aW9uKTsKICAgICAgICBjb21w
        b3NlSW5kZXggPSBhcnJheU9wZXJhdGlvbkluZGV4ICsgMTsKICAgICAgfQog
        ICAgfSBlbHNlIHsKICAgICAgLy8gaW5zZXJ0IGF0IGVuZAogICAgICB0aGlz
        Ll9vcGVyYXRpb25zLnB1c2gobmV3QXJyYXlPcGVyYXRpb24pOwogICAgICBj
        b21wb3NlSW5kZXggPSBhcnJheU9wZXJhdGlvbkluZGV4OwogICAgfQoKICAg
        IHRoaXMuX2NvbXBvc2VJbnNlcnQoY29tcG9zZUluZGV4KTsKICB9LAoKICAv
        KioKICAgIFRyYWNrIHRoYXQgYGNvdW50YCBpdGVtcyB3ZXJlIHJlbW92ZWQg
        YXQgYGluZGV4YC4KCiAgICBAbWV0aG9kIHJlbW92ZUl0ZW1zCiAgICBAcGFy
        YW0gaW5kZXgKICAgIEBwYXJhbSBjb3VudAogICovCiAgcmVtb3ZlSXRlbXM6
        IGZ1bmN0aW9uIChpbmRleCwgY291bnQpIHsKICAgIGlmIChjb3VudCA8IDEp
        IHsgcmV0dXJuOyB9CgogICAgdmFyIG1hdGNoID0gdGhpcy5fZmluZEFycmF5
        T3BlcmF0aW9uKGluZGV4KSwKICAgICAgICBhcnJheU9wZXJhdGlvbiA9IG1h
        dGNoLm9wZXJhdGlvbiwKICAgICAgICBhcnJheU9wZXJhdGlvbkluZGV4ID0g
        bWF0Y2guaW5kZXgsCiAgICAgICAgYXJyYXlPcGVyYXRpb25SYW5nZVN0YXJ0
        ID0gbWF0Y2gucmFuZ2VTdGFydCwKICAgICAgICBuZXdBcnJheU9wZXJhdGlv
        biwKICAgICAgICBjb21wb3NlSW5kZXg7CgogICAgbmV3QXJyYXlPcGVyYXRp
        b24gPSBuZXcgQXJyYXlPcGVyYXRpb24oREVMRVRFLCBjb3VudCk7CiAgICBp
        ZiAoIW1hdGNoLnNwbGl0KSB7CiAgICAgIC8vIGluc2VydCBsZWZ0IG9mIGFy
        cmF5T3BlcmF0aW9uCiAgICAgIHRoaXMuX29wZXJhdGlvbnMuc3BsaWNlKGFy
        cmF5T3BlcmF0aW9uSW5kZXgsIDAsIG5ld0FycmF5T3BlcmF0aW9uKTsKICAg
        ICAgY29tcG9zZUluZGV4ID0gYXJyYXlPcGVyYXRpb25JbmRleDsKICAgIH0g
        ZWxzZSB7CiAgICAgIHRoaXMuX3NwbGl0KGFycmF5T3BlcmF0aW9uSW5kZXgs
        IGluZGV4IC0gYXJyYXlPcGVyYXRpb25SYW5nZVN0YXJ0LCBuZXdBcnJheU9w
        ZXJhdGlvbik7CiAgICAgIGNvbXBvc2VJbmRleCA9IGFycmF5T3BlcmF0aW9u
        SW5kZXggKyAxOwogICAgfQoKICAgIHJldHVybiB0aGlzLl9jb21wb3NlRGVs
        ZXRlKGNvbXBvc2VJbmRleCk7CiAgfSwKCiAgLyoqCiAgICBBcHBseSBhbGwg
        b3BlcmF0aW9ucywgcmVkdWNpbmcgdGhlbSB0byByZXRhaW46biwgZm9yIGBu
        YCwgdGhlIG51bWJlciBvZgogICAgaXRlbXMgaW4gdGhlIGFycmF5LgoKICAg
        IGBjYWxsYmFja2Agd2lsbCBiZSBjYWxsZWQgZm9yIGVhY2ggb3BlcmF0aW9u
        IGFuZCB3aWxsIGJlIHBhc3NlZCB0aGUgZm9sbG93aW5nIGFyZ3VtZW50czoK
        CiAgICAqIHthcnJheX0gaXRlbXMgVGhlIGl0ZW1zIGZvciB0aGUgZ2l2ZW4g
        b3BlcmF0aW9uCiAgICAqIHtudW1iZXJ9IG9mZnNldCBUaGUgY29tcHV0ZWQg
        b2Zmc2V0IG9mIHRoZSBpdGVtcywgaWUgdGhlIGluZGV4IGluIHRoZQogICAg
        YXJyYXkgb2YgdGhlIGZpcnN0IGl0ZW0gZm9yIHRoaXMgb3BlcmF0aW9uLgog
        ICAgKiB7c3RyaW5nfSBvcGVyYXRpb24gVGhlIHR5cGUgb2YgdGhlIG9wZXJh
        dGlvbi4gIE9uZSBvZgogICAgYEVtYmVyLlRyYWNrZWRBcnJheS57UkVUQUlO
        LCBERUxFVEUsIElOU0VSVH1gCgogICAgQG1ldGhvZCBhcHBseQogICAgQHBh
        cmFtIHtmdW5jdGlvbn0gY2FsbGJhY2sKICAqLwogIGFwcGx5OiBmdW5jdGlv
        biAoY2FsbGJhY2spIHsKICAgIHZhciBpdGVtcyA9IFtdLAogICAgICAgIG9m
        ZnNldCA9IDA7CgogICAgZm9yRWFjaCh0aGlzLl9vcGVyYXRpb25zLCBmdW5j
        dGlvbiAoYXJyYXlPcGVyYXRpb24pIHsKICAgICAgY2FsbGJhY2soYXJyYXlP
        cGVyYXRpb24uaXRlbXMsIG9mZnNldCwgYXJyYXlPcGVyYXRpb24udHlwZSk7
        CgogICAgICBpZiAoYXJyYXlPcGVyYXRpb24udHlwZSAhPT0gREVMRVRFKSB7
        CiAgICAgICAgb2Zmc2V0ICs9IGFycmF5T3BlcmF0aW9uLmNvdW50OwogICAg
        ICAgIGl0ZW1zID0gaXRlbXMuY29uY2F0KGFycmF5T3BlcmF0aW9uLml0ZW1z
        KTsKICAgICAgfQogICAgfSk7CgogICAgdGhpcy5fb3BlcmF0aW9ucyA9IFtu
        ZXcgQXJyYXlPcGVyYXRpb24oUkVUQUlOLCBpdGVtcy5sZW5ndGgsIGl0ZW1z
        KV07CiAgfSwKCiAgLyoqCiAgICBSZXR1cm4gYW4gYEFycmF5T3BlcmF0aW9u
        TWF0Y2hgIGZvciB0aGUgb3BlcmF0aW9uIHRoYXQgY29udGFpbnMgdGhlIGl0
        ZW0gYXQgYGluZGV4YC4KCiAgICBAbWV0aG9kIF9maW5kQXJyYXlPcGVyYXRp
        b24KCiAgICBAcGFyYW0ge251bWJlcn0gaW5kZXggdGhlIGluZGV4IG9mIHRo
        ZSBpdGVtIHdob3NlIG9wZXJhdGlvbiBpbmZvcm1hdGlvbgogICAgc2hvdWxk
        IGJlIHJldHVybmVkLgogICAgQHByaXZhdGUKICAqLwogIF9maW5kQXJyYXlP
        cGVyYXRpb246IGZ1bmN0aW9uIChpbmRleCkgewogICAgdmFyIGFycmF5T3Bl
        cmF0aW9uSW5kZXgsCiAgICAgICAgbGVuLAogICAgICAgIHNwbGl0ID0gZmFs
        c2UsCiAgICAgICAgYXJyYXlPcGVyYXRpb24sCiAgICAgICAgYXJyYXlPcGVy
        YXRpb25SYW5nZVN0YXJ0LAogICAgICAgIGFycmF5T3BlcmF0aW9uUmFuZ2VF
        bmQ7CgogICAgLy8gT1BUSU1JWkU6IHdlIGNvdWxkIHNlYXJjaCB0aGVzZSBm
        YXN0ZXIgaWYgd2Uga2VwdCBhIGJhbGFuY2VkIHRyZWUuCiAgICAvLyBmaW5k
        IGxlZnRtb3N0IGFycmF5T3BlcmF0aW9uIHRvIHRoZSByaWdodCBvZiBgaW5k
        ZXhgCiAgICBmb3IgKGFycmF5T3BlcmF0aW9uSW5kZXggPSBhcnJheU9wZXJh
        dGlvblJhbmdlU3RhcnQgPSAwLCBsZW4gPSB0aGlzLl9vcGVyYXRpb25zLmxl
        bmd0aDsgYXJyYXlPcGVyYXRpb25JbmRleCA8IGxlbjsgKythcnJheU9wZXJh
        dGlvbkluZGV4KSB7CiAgICAgIGFycmF5T3BlcmF0aW9uID0gdGhpcy5fb3Bl
        cmF0aW9uc1thcnJheU9wZXJhdGlvbkluZGV4XTsKCiAgICAgIGlmIChhcnJh
        eU9wZXJhdGlvbi50eXBlID09PSBERUxFVEUpIHsgY29udGludWU7IH0KCiAg
        ICAgIGFycmF5T3BlcmF0aW9uUmFuZ2VFbmQgPSBhcnJheU9wZXJhdGlvblJh
        bmdlU3RhcnQgKyBhcnJheU9wZXJhdGlvbi5jb3VudCAtIDE7CgogICAgICBp
        ZiAoaW5kZXggPT09IGFycmF5T3BlcmF0aW9uUmFuZ2VTdGFydCkgewogICAg
        ICAgIGJyZWFrOwogICAgICB9IGVsc2UgaWYgKGluZGV4ID4gYXJyYXlPcGVy
        YXRpb25SYW5nZVN0YXJ0ICYmIGluZGV4IDw9IGFycmF5T3BlcmF0aW9uUmFu
        Z2VFbmQpIHsKICAgICAgICBzcGxpdCA9IHRydWU7CiAgICAgICAgYnJlYWs7
        CiAgICAgIH0gZWxzZSB7CiAgICAgICAgYXJyYXlPcGVyYXRpb25SYW5nZVN0
        YXJ0ID0gYXJyYXlPcGVyYXRpb25SYW5nZUVuZCArIDE7CiAgICAgIH0KICAg
        IH0KCiAgICByZXR1cm4gbmV3IEFycmF5T3BlcmF0aW9uTWF0Y2goYXJyYXlP
        cGVyYXRpb24sIGFycmF5T3BlcmF0aW9uSW5kZXgsIHNwbGl0LCBhcnJheU9w
        ZXJhdGlvblJhbmdlU3RhcnQpOwogIH0sCgogIF9zcGxpdDogZnVuY3Rpb24g
        KGFycmF5T3BlcmF0aW9uSW5kZXgsIHNwbGl0SW5kZXgsIG5ld0FycmF5T3Bl
        cmF0aW9uKSB7CiAgICB2YXIgYXJyYXlPcGVyYXRpb24gPSB0aGlzLl9vcGVy
        YXRpb25zW2FycmF5T3BlcmF0aW9uSW5kZXhdLAogICAgICAgIHNwbGl0SXRl
        bXMgPSBhcnJheU9wZXJhdGlvbi5pdGVtcy5zbGljZShzcGxpdEluZGV4KSwK
        ICAgICAgICBzcGxpdEFycmF5T3BlcmF0aW9uID0gbmV3IEFycmF5T3BlcmF0
        aW9uKGFycmF5T3BlcmF0aW9uLnR5cGUsIHNwbGl0SXRlbXMubGVuZ3RoLCBz
        cGxpdEl0ZW1zKTsKCiAgICAvLyB0cnVuY2F0ZSBMSFMKICAgIGFycmF5T3Bl
        cmF0aW9uLmNvdW50ID0gc3BsaXRJbmRleDsKICAgIGFycmF5T3BlcmF0aW9u
        Lml0ZW1zID0gYXJyYXlPcGVyYXRpb24uaXRlbXMuc2xpY2UoMCwgc3BsaXRJ
        bmRleCk7CgogICAgdGhpcy5fb3BlcmF0aW9ucy5zcGxpY2UoYXJyYXlPcGVy
        YXRpb25JbmRleCArIDEsIDAsIG5ld0FycmF5T3BlcmF0aW9uLCBzcGxpdEFy
        cmF5T3BlcmF0aW9uKTsKICB9LAoKICAvLyBzZWUgU3ViQXJyYXkgZm9yIGEg
        YmV0dGVyIGltcGxlbWVudGF0aW9uLgogIF9jb21wb3NlSW5zZXJ0OiBmdW5j
        dGlvbiAoaW5kZXgpIHsKICAgIHZhciBuZXdBcnJheU9wZXJhdGlvbiA9IHRo
        aXMuX29wZXJhdGlvbnNbaW5kZXhdLAogICAgICAgIGxlZnRBcnJheU9wZXJh
        dGlvbiA9IHRoaXMuX29wZXJhdGlvbnNbaW5kZXgtMV0sIC8vIG1heSBiZSB1
        bmRlZmluZWQKICAgICAgICByaWdodEFycmF5T3BlcmF0aW9uID0gdGhpcy5f
        b3BlcmF0aW9uc1tpbmRleCsxXSwgLy8gbWF5IGJlIHVuZGVmaW5lZAogICAg
        ICAgIGxlZnRPcCA9IGxlZnRBcnJheU9wZXJhdGlvbiAmJiBsZWZ0QXJyYXlP
        cGVyYXRpb24udHlwZSwKICAgICAgICByaWdodE9wID0gcmlnaHRBcnJheU9w
        ZXJhdGlvbiAmJiByaWdodEFycmF5T3BlcmF0aW9uLnR5cGU7CgogICAgaWYg
        KGxlZnRPcCA9PT0gSU5TRVJUKSB7CiAgICAgICAgLy8gbWVyZ2UgbGVmdAog
        ICAgICAgIGxlZnRBcnJheU9wZXJhdGlvbi5jb3VudCArPSBuZXdBcnJheU9w
        ZXJhdGlvbi5jb3VudDsKICAgICAgICBsZWZ0QXJyYXlPcGVyYXRpb24uaXRl
        bXMgPSBsZWZ0QXJyYXlPcGVyYXRpb24uaXRlbXMuY29uY2F0KG5ld0FycmF5
        T3BlcmF0aW9uLml0ZW1zKTsKCiAgICAgIGlmIChyaWdodE9wID09PSBJTlNF
        UlQpIHsKICAgICAgICAvLyBhbHNvIG1lcmdlIHJpZ2h0ICh3ZSBoYXZlIHNw
        bGl0IGFuIGluc2VydCB3aXRoIGFuIGluc2VydCkKICAgICAgICBsZWZ0QXJy
        YXlPcGVyYXRpb24uY291bnQgKz0gcmlnaHRBcnJheU9wZXJhdGlvbi5jb3Vu
        dDsKICAgICAgICBsZWZ0QXJyYXlPcGVyYXRpb24uaXRlbXMgPSBsZWZ0QXJy
        YXlPcGVyYXRpb24uaXRlbXMuY29uY2F0KHJpZ2h0QXJyYXlPcGVyYXRpb24u
        aXRlbXMpOwogICAgICAgIHRoaXMuX29wZXJhdGlvbnMuc3BsaWNlKGluZGV4
        LCAyKTsKICAgICAgfSBlbHNlIHsKICAgICAgICAvLyBvbmx5IG1lcmdlIGxl
        ZnQKICAgICAgICB0aGlzLl9vcGVyYXRpb25zLnNwbGljZShpbmRleCwgMSk7
        CiAgICAgIH0KICAgIH0gZWxzZSBpZiAocmlnaHRPcCA9PT0gSU5TRVJUKSB7
        CiAgICAgIC8vIG1lcmdlIHJpZ2h0CiAgICAgIG5ld0FycmF5T3BlcmF0aW9u
        LmNvdW50ICs9IHJpZ2h0QXJyYXlPcGVyYXRpb24uY291bnQ7CiAgICAgIG5l
        d0FycmF5T3BlcmF0aW9uLml0ZW1zID0gbmV3QXJyYXlPcGVyYXRpb24uaXRl
        bXMuY29uY2F0KHJpZ2h0QXJyYXlPcGVyYXRpb24uaXRlbXMpOwogICAgICB0
        aGlzLl9vcGVyYXRpb25zLnNwbGljZShpbmRleCArIDEsIDEpOwogICAgfQog
        IH0sCgogIF9jb21wb3NlRGVsZXRlOiBmdW5jdGlvbiAoaW5kZXgpIHsKICAg
        IHZhciBhcnJheU9wZXJhdGlvbiA9IHRoaXMuX29wZXJhdGlvbnNbaW5kZXhd
        LAogICAgICAgIGRlbGV0ZXNUb0dvID0gYXJyYXlPcGVyYXRpb24uY291bnQs
        CiAgICAgICAgbGVmdEFycmF5T3BlcmF0aW9uID0gdGhpcy5fb3BlcmF0aW9u
        c1tpbmRleC0xXSwgLy8gbWF5IGJlIHVuZGVmaW5lZAogICAgICAgIGxlZnRP
        cCA9IGxlZnRBcnJheU9wZXJhdGlvbiAmJiBsZWZ0QXJyYXlPcGVyYXRpb24u
        dHlwZSwKICAgICAgICBuZXh0QXJyYXlPcGVyYXRpb24sCiAgICAgICAgbmV4
        dE9wLAogICAgICAgIG5leHRDb3VudCwKICAgICAgICByZW1vdmVOZXdBbmRO
        ZXh0T3AgPSBmYWxzZSwKICAgICAgICByZW1vdmVkSXRlbXMgPSBbXTsKCiAg
        ICBpZiAobGVmdE9wID09PSBERUxFVEUpIHsKICAgICAgYXJyYXlPcGVyYXRp
        b24gPSBsZWZ0QXJyYXlPcGVyYXRpb247CiAgICAgIGluZGV4IC09IDE7CiAg
        ICB9CgogICAgZm9yICh2YXIgaSA9IGluZGV4ICsgMTsgZGVsZXRlc1RvR28g
        PiAwOyArK2kpIHsKICAgICAgbmV4dEFycmF5T3BlcmF0aW9uID0gdGhpcy5f
        b3BlcmF0aW9uc1tpXTsKICAgICAgbmV4dE9wID0gbmV4dEFycmF5T3BlcmF0
        aW9uLnR5cGU7CiAgICAgIG5leHRDb3VudCA9IG5leHRBcnJheU9wZXJhdGlv
        bi5jb3VudDsKCiAgICAgIGlmIChuZXh0T3AgPT09IERFTEVURSkgewogICAg
        ICAgIGFycmF5T3BlcmF0aW9uLmNvdW50ICs9IG5leHRDb3VudDsKICAgICAg
        ICBjb250aW51ZTsKICAgICAgfQoKICAgICAgaWYgKG5leHRDb3VudCA+IGRl
        bGV0ZXNUb0dvKSB7CiAgICAgICAgLy8gZDoyIHtyLGl9OjUgIHdlIHJlZHVj
        ZSB0aGUgcmV0YWluIG9yIGluc2VydCwgYnV0IGl0IHN0YXlzCiAgICAgICAg
        cmVtb3ZlZEl0ZW1zID0gcmVtb3ZlZEl0ZW1zLmNvbmNhdChuZXh0QXJyYXlP
        cGVyYXRpb24uaXRlbXMuc3BsaWNlKDAsIGRlbGV0ZXNUb0dvKSk7CiAgICAg
        ICAgbmV4dEFycmF5T3BlcmF0aW9uLmNvdW50IC09IGRlbGV0ZXNUb0dvOwoK
        ICAgICAgICAvLyBJbiB0aGUgY2FzZSB3aGVyZSB3ZSB0cnVuY2F0ZSB0aGUg
        bGFzdCBhcnJheU9wZXJhdGlvbiwgd2UgZG9uJ3QgbmVlZCB0bwogICAgICAg
        IC8vIHJlbW92ZSBpdDsgYWxzbyB0aGUgZGVsZXRlc1RvR28gcmVkdWN0aW9u
        IGlzIG5vdCB0aGUgZW50aXJldHkgb2YKICAgICAgICAvLyBuZXh0Q291bnQK
        ICAgICAgICBpIC09IDE7CiAgICAgICAgbmV4dENvdW50ID0gZGVsZXRlc1Rv
        R287CgogICAgICAgIGRlbGV0ZXNUb0dvID0gMDsKICAgICAgfSBlbHNlIHsK
        ICAgICAgICBpZiAobmV4dENvdW50ID09PSBkZWxldGVzVG9HbykgewogICAg
        ICAgICAgLy8gSGFuZGxlIGVkZ2UgY2FzZSBvZiBkOjIgaToyIGluIHdoaWNo
        IGNhc2UgYm90aCBvcGVyYXRpb25zIGdvIGF3YXkKICAgICAgICAgIC8vIGR1
        cmluZyBjb21wb3NpdGlvbi4KICAgICAgICAgIHJlbW92ZU5ld0FuZE5leHRP
        cCA9IHRydWU7CiAgICAgICAgfQogICAgICAgIHJlbW92ZWRJdGVtcyA9IHJl
        bW92ZWRJdGVtcy5jb25jYXQobmV4dEFycmF5T3BlcmF0aW9uLml0ZW1zKTsK
        ICAgICAgICBkZWxldGVzVG9HbyAtPSBuZXh0Q291bnQ7CiAgICAgIH0KCiAg
        ICAgIGlmIChuZXh0T3AgPT09IElOU0VSVCkgewogICAgICAgIC8vIGQ6MiBp
        OjMgd2lsbCByZXN1bHQgaW4gZGVsZXRlIGdvaW5nIGF3YXkKICAgICAgICBh
        cnJheU9wZXJhdGlvbi5jb3VudCAtPSBuZXh0Q291bnQ7CiAgICAgIH0KICAg
        IH0KCiAgICBpZiAoYXJyYXlPcGVyYXRpb24uY291bnQgPiAwKSB7CiAgICAg
        IC8vIGNvbXBvc2Ugb3VyIG5ldyBkZWxldGUgd2l0aCBwb3NzaWJseSBzZXZl
        cmFsIG9wZXJhdGlvbnMgdG8gdGhlIHJpZ2h0IG9mCiAgICAgIC8vIGRpc3Bh
        cmF0ZSB0eXBlcwogICAgICB0aGlzLl9vcGVyYXRpb25zLnNwbGljZShpbmRl
        eCsxLCBpLTEtaW5kZXgpOwogICAgfSBlbHNlIHsKICAgICAgLy8gVGhlIGRl
        bGV0ZSBvcGVyYXRpb24gY2FuIGdvIGF3YXk7IGl0IGhhcyBtZXJlbHkgcmVk
        dWNlZCBzb21lIG90aGVyCiAgICAgIC8vIG9wZXJhdGlvbiwgYXMgaW4gZDoz
        IGk6NDsgaXQgbWF5IGFsc28gaGF2ZSBlbGltaW5hdGVkIHRoYXQgb3BlcmF0
        aW9uLAogICAgICAvLyBhcyBpbiBkOjMgaTozLgogICAgICB0aGlzLl9vcGVy
        YXRpb25zLnNwbGljZShpbmRleCwgcmVtb3ZlTmV3QW5kTmV4dE9wID8gMiA6
        IDEpOwogICAgfQoKICAgIHJldHVybiByZW1vdmVkSXRlbXM7CiAgfSwKCiAg
        dG9TdHJpbmc6IGZ1bmN0aW9uICgpIHsKICAgIHZhciBzdHIgPSAiIjsKICAg
        IGZvckVhY2godGhpcy5fb3BlcmF0aW9ucywgZnVuY3Rpb24gKG9wZXJhdGlv
        bikgewogICAgICBzdHIgKz0gIiAiICsgb3BlcmF0aW9uLnR5cGUgKyAiOiIg
        KyBvcGVyYXRpb24uY291bnQ7CiAgICB9KTsKICAgIHJldHVybiBzdHIuc3Vi
        c3RyaW5nKDEpOwogIH0KfTsKCi8qKgogIEludGVybmFsIGRhdGEgc3RydWN0
        dXJlIHRvIHJlcHJlc2VudCBhbiBhcnJheSBvcGVyYXRpb24uCgogIEBtZXRo
        b2QgQXJyYXlPcGVyYXRpb24KICBAcHJpdmF0ZQogIEBwYXJhbSB7c3RyaW5n
        fSB0eXBlIFRoZSB0eXBlIG9mIHRoZSBvcGVyYXRpb24uICBPbmUgb2YKICBg
        RW1iZXIuVHJhY2tlZEFycmF5LntSRVRBSU4sIElOU0VSVCwgREVMRVRFfWAK
        ICBAcGFyYW0ge251bWJlcn0gY291bnQgVGhlIG51bWJlciBvZiBpdGVtcyBp
        biB0aGlzIG9wZXJhdGlvbi4KICBAcGFyYW0ge2FycmF5fSBpdGVtcyBUaGUg
        aXRlbXMgb2YgdGhlIG9wZXJhdGlvbiwgaWYgaW5jbHVkZWQuICBSRVRBSU4g
        YW5kCiAgSU5TRVJUIGluY2x1ZGUgdGhlaXIgaXRlbXMsIERFTEVURSBkb2Vz
        IG5vdC4KKi8KZnVuY3Rpb24gQXJyYXlPcGVyYXRpb24gKG9wZXJhdGlvbiwg
        Y291bnQsIGl0ZW1zKSB7CiAgdGhpcy50eXBlID0gb3BlcmF0aW9uOyAvLyBS
        RVRBSU4gfCBJTlNFUlQgfCBERUxFVEUKICB0aGlzLmNvdW50ID0gY291bnQ7
        CiAgdGhpcy5pdGVtcyA9IGl0ZW1zOwp9CgovKioKICBJbnRlcm5hbCBkYXRh
        IHN0cnVjdHVyZSB1c2VkIHRvIGluY2x1ZGUgaW5mb3JtYXRpb24gd2hlbiBs
        b29raW5nIHVwIG9wZXJhdGlvbnMKICBieSBpdGVtIGluZGV4LgoKICBAbWV0
        aG9kIEFycmF5T3BlcmF0aW9uTWF0Y2gKICBAcHJpdmF0ZQogIEBwYXJhbSB7
        QXJyYXlPcGVyYXRpb259IG9wZXJhdGlvbgogIEBwYXJhbSB7bnVtYmVyfSBp
        bmRleCBUaGUgaW5kZXggb2YgYG9wZXJhdGlvbmAgaW4gdGhlIGFycmF5IG9m
        IG9wZXJhdGlvbnMuCiAgQHBhcmFtIHtib29sZWFufSBzcGxpdCBXaGV0aGVy
        IG9yIG5vdCB0aGUgaXRlbSBpbmRleCBzZWFyY2hlZCBmb3Igd291bGQKICBy
        ZXF1aXJlIGEgc3BsaXQgZm9yIGEgbmV3IG9wZXJhdGlvbiB0eXBlLgogIEBw
        YXJhbSB7bnVtYmVyfSByYW5nZVN0YXJ0IFRoZSBpbmRleCBvZiB0aGUgZmly
        c3QgaXRlbSBpbiB0aGUgb3BlcmF0aW9uLAogIHdpdGggcmVzcGVjdCB0byB0
        aGUgdHJhY2tlZCBhcnJheS4gIFRoZSBpbmRleCBvZiB0aGUgbGFzdCBpdGVt
        IGNhbiBiZSBjb21wdXRlZAogIGZyb20gYHJhbmdlU3RhcnRgIGFuZCBgb3Bl
        cmF0aW9uLmNvdW50YC4KKi8KZnVuY3Rpb24gQXJyYXlPcGVyYXRpb25NYXRj
        aChvcGVyYXRpb24sIGluZGV4LCBzcGxpdCwgcmFuZ2VTdGFydCkgewogIHRo
        aXMub3BlcmF0aW9uID0gb3BlcmF0aW9uOwogIHRoaXMuaW5kZXggPSBpbmRl
        eDsKICB0aGlzLnNwbGl0ID0gc3BsaXQ7CiAgdGhpcy5yYW5nZVN0YXJ0ID0g
        cmFuZ2VTdGFydDsKfQoKfSkoKTsKCgoKKGZ1bmN0aW9uKCkgewp2YXIgZ2V0
        ID0gRW1iZXIuZ2V0LAogICAgZm9yRWFjaCA9IEVtYmVyLkVudW1lcmFibGVV
        dGlscy5mb3JFYWNoLAogICAgUkVUQUlOID0gJ3InLAogICAgRklMVEVSID0g
        J2YnOwoKZnVuY3Rpb24gT3BlcmF0aW9uICh0eXBlLCBjb3VudCkgewogIHRo
        aXMudHlwZSA9IHR5cGU7CiAgdGhpcy5jb3VudCA9IGNvdW50Owp9CgovKioK
        ICBBbiBgRW1iZXIuU3ViQXJyYXlgIHRyYWNrcyBhbiBhcnJheSBpbiBhIHdh
        eSBzaW1pbGFyIHRvLCBidXQgbW9yZSBzcGVjaWFsaXplZAogIHRoYW4sIGBF
        bWJlci5UcmFja2VkQXJyYXlgLiAgSXQgaXMgdXNlZnVsIGZvciBrZWVwaW5n
        IHRyYWNrIG9mIHRoZSBpbmRleGVzIG9mCiAgaXRlbXMgd2l0aGluIGEgZmls
        dGVyZWQgYXJyYXkuCgogIEBjbGFzcyBTdWJBcnJheQogIEBuYW1lc3BhY2Ug
        RW1iZXIKKi8KRW1iZXIuU3ViQXJyYXkgPSBmdW5jdGlvbiAobGVuZ3RoKSB7
        CiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPCAxKSB7IGxlbmd0aCA9IDA7IH0K
        CiAgaWYgKGxlbmd0aCA+IDApIHsKICAgIHRoaXMuX29wZXJhdGlvbnMgPSBb
        bmV3IE9wZXJhdGlvbihSRVRBSU4sIGxlbmd0aCldOwogIH0gZWxzZSB7CiAg
        ICB0aGlzLl9vcGVyYXRpb25zID0gW107CiAgfQp9OwoKRW1iZXIuU3ViQXJy
        YXkucHJvdG90eXBlID0gewogIC8qKgogICAgVHJhY2sgdGhhdCBhbiBpdGVt
        IHdhcyBhZGRlZCB0byB0aGUgdHJhY2tlZCBhcnJheS4KCiAgICBAbWV0aG9k
        IGFkZEl0ZW0KCiAgICBAcGFyYW0ge251bWJlcn0gaW5kZXggVGhlIGluZGV4
        IG9mIHRoZSBpdGVtIGluIHRoZSB0cmFja2VkIGFycmF5LgogICAgQHBhcmFt
        IHtib29sZWFufSBtYXRjaCBgdHJ1ZWAgaWZmIHRoZSBpdGVtIGlzIGluY2x1
        ZGVkIGluIHRoZSBzdWJhcnJheS4KCiAgICBAcmV0dXJuIHtudW1iZXJ9IFRo
        ZSBpbmRleCBvZiB0aGUgaXRlbSBpbiB0aGUgc3ViYXJyYXkuCiAgKi8KICBh
        ZGRJdGVtOiBmdW5jdGlvbihpbmRleCwgbWF0Y2gpIHsKICAgIHZhciByZXR1
        cm5WYWx1ZSA9IC0xLAogICAgICAgIGl0ZW1UeXBlID0gbWF0Y2ggPyBSRVRB
        SU4gOiBGSUxURVIsCiAgICAgICAgc2VsZiA9IHRoaXM7CgogICAgdGhpcy5f
        ZmluZE9wZXJhdGlvbihpbmRleCwgZnVuY3Rpb24ob3BlcmF0aW9uLCBvcGVy
        YXRpb25JbmRleCwgcmFuZ2VTdGFydCwgcmFuZ2VFbmQsIHNlZW5JblN1YkFy
        cmF5KSB7CiAgICAgIHZhciBuZXdPcGVyYXRpb24sIHNwbGl0T3BlcmF0aW9u
        OwoKICAgICAgaWYgKGl0ZW1UeXBlID09PSBvcGVyYXRpb24udHlwZSkgewog
        ICAgICAgICsrb3BlcmF0aW9uLmNvdW50OwogICAgICB9IGVsc2UgaWYgKGlu
        ZGV4ID09PSByYW5nZVN0YXJ0KSB7CiAgICAgICAgLy8gaW5zZXJ0IHRvIHRo
        ZSBsZWZ0IG9mIGBvcGVyYXRpb25gCiAgICAgICAgc2VsZi5fb3BlcmF0aW9u
        cy5zcGxpY2Uob3BlcmF0aW9uSW5kZXgsIDAsIG5ldyBPcGVyYXRpb24oaXRl
        bVR5cGUsIDEpKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBuZXdPcGVyYXRp
        b24gPSBuZXcgT3BlcmF0aW9uKGl0ZW1UeXBlLCAxKTsKICAgICAgICBzcGxp
        dE9wZXJhdGlvbiA9IG5ldyBPcGVyYXRpb24ob3BlcmF0aW9uLnR5cGUsIHJh
        bmdlRW5kIC0gaW5kZXggKyAxKTsKICAgICAgICBvcGVyYXRpb24uY291bnQg
        PSBpbmRleCAtIHJhbmdlU3RhcnQ7CgogICAgICAgIHNlbGYuX29wZXJhdGlv
        bnMuc3BsaWNlKG9wZXJhdGlvbkluZGV4ICsgMSwgMCwgbmV3T3BlcmF0aW9u
        LCBzcGxpdE9wZXJhdGlvbik7CiAgICAgIH0KCiAgICAgIGlmIChtYXRjaCkg
        ewogICAgICAgIGlmIChvcGVyYXRpb24udHlwZSA9PT0gUkVUQUlOKSB7CiAg
        ICAgICAgICByZXR1cm5WYWx1ZSA9IHNlZW5JblN1YkFycmF5ICsgKGluZGV4
        IC0gcmFuZ2VTdGFydCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJl
        dHVyblZhbHVlID0gc2VlbkluU3ViQXJyYXk7CiAgICAgICAgfQogICAgICB9
        CgogICAgICBzZWxmLl9jb21wb3NlQXQob3BlcmF0aW9uSW5kZXgpOwogICAg
        fSwgZnVuY3Rpb24oc2VlbkluU3ViQXJyYXkpIHsKICAgICAgc2VsZi5fb3Bl
        cmF0aW9ucy5wdXNoKG5ldyBPcGVyYXRpb24oaXRlbVR5cGUsIDEpKTsKCiAg
        ICAgIGlmIChtYXRjaCkgewogICAgICAgIHJldHVyblZhbHVlID0gc2Vlbklu
        U3ViQXJyYXk7CiAgICAgIH0KCiAgICAgIHNlbGYuX2NvbXBvc2VBdChzZWxm
        Ll9vcGVyYXRpb25zLmxlbmd0aC0xKTsKICAgIH0pOwoKICAgIHJldHVybiBy
        ZXR1cm5WYWx1ZTsKICB9LAoKICAvKioKICAgIFRyYWNrIHRoYXQgYW4gaXRl
        bSB3YXMgcmVtb3ZlZCBmcm9tIHRoZSB0cmFja2VkIGFycmF5LgoKICAgIEBt
        ZXRob2QgcmVtb3ZlSXRlbQoKICAgIEBwYXJhbSB7bnVtYmVyfSBpbmRleCBU
        aGUgaW5kZXggb2YgdGhlIGl0ZW0gaW4gdGhlIHRyYWNrZWQgYXJyYXkuCgog
        ICAgQHJldHVybiB7bnVtYmVyfSBUaGUgaW5kZXggb2YgdGhlIGl0ZW0gaW4g
        dGhlIHN1YmFycmF5LCBvciBgLTFgIGlmIHRoZSBpdGVtCiAgICB3YXMgbm90
        IGluIHRoZSBzdWJhcnJheS4KICAqLwogIHJlbW92ZUl0ZW06IGZ1bmN0aW9u
        KGluZGV4KSB7CiAgICB2YXIgcmV0dXJuVmFsdWUgPSAtMSwKICAgICAgICBz
        ZWxmID0gdGhpczsKCiAgICB0aGlzLl9maW5kT3BlcmF0aW9uKGluZGV4LCBm
        dW5jdGlvbiAob3BlcmF0aW9uLCBvcGVyYXRpb25JbmRleCwgcmFuZ2VTdGFy
        dCwgcmFuZ2VFbmQsIHNlZW5JblN1YkFycmF5KSB7CiAgICAgIGlmIChvcGVy
        YXRpb24udHlwZSA9PT0gUkVUQUlOKSB7CiAgICAgICAgcmV0dXJuVmFsdWUg
        PSBzZWVuSW5TdWJBcnJheSArIChpbmRleCAtIHJhbmdlU3RhcnQpOwogICAg
        ICB9CgogICAgICBpZiAob3BlcmF0aW9uLmNvdW50ID4gMSkgewogICAgICAg
        IC0tb3BlcmF0aW9uLmNvdW50OwogICAgICB9IGVsc2UgewogICAgICAgIHNl
        bGYuX29wZXJhdGlvbnMuc3BsaWNlKG9wZXJhdGlvbkluZGV4LCAxKTsKICAg
        ICAgICBzZWxmLl9jb21wb3NlQXQob3BlcmF0aW9uSW5kZXgpOwogICAgICB9
        CiAgICB9LCBmdW5jdGlvbigpIHsKICAgICAgdGhyb3cgbmV3IEVtYmVyLkVy
        cm9yKCJDYW4ndCByZW1vdmUgYW4gaXRlbSB0aGF0IGhhcyBuZXZlciBiZWVu
        IGFkZGVkLiIpOwogICAgfSk7CgogICAgcmV0dXJuIHJldHVyblZhbHVlOwog
        IH0sCgoKICBfZmluZE9wZXJhdGlvbjogZnVuY3Rpb24gKGluZGV4LCBmb3Vu
        ZENhbGxiYWNrLCBub3RGb3VuZENhbGxiYWNrKSB7CiAgICB2YXIgb3BlcmF0
        aW9uSW5kZXgsCiAgICAgICAgbGVuLAogICAgICAgIG9wZXJhdGlvbiwKICAg
        ICAgICByYW5nZVN0YXJ0LAogICAgICAgIHJhbmdlRW5kLAogICAgICAgIHNl
        ZW5JblN1YkFycmF5ID0gMDsKCiAgICAvLyBPUFRJTUlaRTogY2hhbmdlIHRv
        IGJhbGFuY2VkIHRyZWUKICAgIC8vIGZpbmQgbGVmdG1vc3Qgb3BlcmF0aW9u
        IHRvIHRoZSByaWdodCBvZiBgaW5kZXhgCiAgICBmb3IgKG9wZXJhdGlvbklu
        ZGV4ID0gcmFuZ2VTdGFydCA9IDAsIGxlbiA9IHRoaXMuX29wZXJhdGlvbnMu
        bGVuZ3RoOyBvcGVyYXRpb25JbmRleCA8IGxlbjsgcmFuZ2VTdGFydCA9IHJh
        bmdlRW5kICsgMSwgKytvcGVyYXRpb25JbmRleCkgewogICAgICBvcGVyYXRp
        b24gPSB0aGlzLl9vcGVyYXRpb25zW29wZXJhdGlvbkluZGV4XTsKICAgICAg
        cmFuZ2VFbmQgPSByYW5nZVN0YXJ0ICsgb3BlcmF0aW9uLmNvdW50IC0gMTsK
        CiAgICAgIGlmIChpbmRleCA+PSByYW5nZVN0YXJ0ICYmIGluZGV4IDw9IHJh
        bmdlRW5kKSB7CiAgICAgICAgZm91bmRDYWxsYmFjayhvcGVyYXRpb24sIG9w
        ZXJhdGlvbkluZGV4LCByYW5nZVN0YXJ0LCByYW5nZUVuZCwgc2VlbkluU3Vi
        QXJyYXkpOwogICAgICAgIHJldHVybjsKICAgICAgfSBlbHNlIGlmIChvcGVy
        YXRpb24udHlwZSA9PT0gUkVUQUlOKSB7CiAgICAgICAgc2VlbkluU3ViQXJy
        YXkgKz0gb3BlcmF0aW9uLmNvdW50OwogICAgICB9CiAgICB9CgogICAgbm90
        Rm91bmRDYWxsYmFjayhzZWVuSW5TdWJBcnJheSk7CiAgfSwKCiAgX2NvbXBv
        c2VBdDogZnVuY3Rpb24oaW5kZXgpIHsKICAgIHZhciBvcCA9IHRoaXMuX29w
        ZXJhdGlvbnNbaW5kZXhdLAogICAgICAgIG90aGVyT3A7CgogICAgaWYgKCFv
        cCkgewogICAgICAvLyBDb21wb3Npbmcgb3V0IG9mIGJvdW5kcyBpcyBhIG5v
        LW9wLCBhcyB3aGVuIHJlbW92aW5nIHRoZSBsYXN0IG9wZXJhdGlvbgogICAg
        ICAvLyBpbiB0aGUgbGlzdC4KICAgICAgcmV0dXJuOwogICAgfQoKICAgIGlm
        IChpbmRleCA+IDApIHsKICAgICAgb3RoZXJPcCA9IHRoaXMuX29wZXJhdGlv
        bnNbaW5kZXgtMV07CiAgICAgIGlmIChvdGhlck9wLnR5cGUgPT09IG9wLnR5
        cGUpIHsKICAgICAgICBvcC5jb3VudCArPSBvdGhlck9wLmNvdW50OwogICAg
        ICAgIHRoaXMuX29wZXJhdGlvbnMuc3BsaWNlKGluZGV4LTEsIDEpOwogICAg
        ICAgIC0taW5kZXg7CiAgICAgIH0KICAgIH0KCiAgICBpZiAoaW5kZXggPCB0
        aGlzLl9vcGVyYXRpb25zLmxlbmd0aC0xKSB7CiAgICAgIG90aGVyT3AgPSB0
        aGlzLl9vcGVyYXRpb25zW2luZGV4KzFdOwogICAgICBpZiAob3RoZXJPcC50
        eXBlID09PSBvcC50eXBlKSB7CiAgICAgICAgb3AuY291bnQgKz0gb3RoZXJP
        cC5jb3VudDsKICAgICAgICB0aGlzLl9vcGVyYXRpb25zLnNwbGljZShpbmRl
        eCsxLCAxKTsKICAgICAgfQogICAgfQogIH0sCgogIHRvU3RyaW5nOiBmdW5j
        dGlvbiAoKSB7CiAgICB2YXIgc3RyID0gIiI7CiAgICBmb3JFYWNoKHRoaXMu
        X29wZXJhdGlvbnMsIGZ1bmN0aW9uIChvcGVyYXRpb24pIHsKICAgICAgc3Ry
        ICs9ICIgIiArIG9wZXJhdGlvbi50eXBlICsgIjoiICsgb3BlcmF0aW9uLmNv
        dW50OwogICAgfSk7CiAgICByZXR1cm4gc3RyLnN1YnN0cmluZygxKTsKICB9
        Cn07Cgp9KSgpOwoKCgooZnVuY3Rpb24oKSB7CkVtYmVyLkNvbnRhaW5lciA9
        IHJlcXVpcmVNb2R1bGUoJ2NvbnRhaW5lcicpOwpFbWJlci5Db250YWluZXIu
        c2V0ID0gRW1iZXIuc2V0OwoKfSkoKTsKCgoKKGZ1bmN0aW9uKCkgewpFbWJl
        ci5BcHBsaWNhdGlvbiA9IEVtYmVyLk5hbWVzcGFjZS5leHRlbmQoKTsKCn0p
        KCk7CgoKCihmdW5jdGlvbigpIHsKLyoqCkBtb2R1bGUgZW1iZXIKQHN1Ym1v
        ZHVsZSBlbWJlci1ydW50aW1lCiovCgp2YXIgT1VUX09GX1JBTkdFX0VYQ0VQ
        VElPTiA9ICJJbmRleCBvdXQgb2YgcmFuZ2UiOwp2YXIgRU1QVFkgPSBbXTsK
        CnZhciBnZXQgPSBFbWJlci5nZXQsIHNldCA9IEVtYmVyLnNldDsKCi8qKgog
        IEFuIEFycmF5UHJveHkgd3JhcHMgYW55IG90aGVyIG9iamVjdCB0aGF0IGlt
        cGxlbWVudHMgYEVtYmVyLkFycmF5YCBhbmQvb3IKICBgRW1iZXIuTXV0YWJs
        ZUFycmF5LGAgZm9yd2FyZGluZyBhbGwgcmVxdWVzdHMuIFRoaXMgbWFrZXMg
        aXQgdmVyeSB1c2VmdWwgZm9yCiAgYSBudW1iZXIgb2YgYmluZGluZyB1c2Ug
        Y2FzZXMgb3Igb3RoZXIgY2FzZXMgd2hlcmUgYmVpbmcgYWJsZSB0byBzd2Fw
        CiAgb3V0IHRoZSB1bmRlcmx5aW5nIGFycmF5IGlzIHVzZWZ1bC4KCiAgQSBz
        aW1wbGUgZXhhbXBsZSBvZiB1c2FnZToKCiAgYGBgamF2YXNjcmlwdAogIHZh
        ciBwZXRzID0gWydkb2cnLCAnY2F0JywgJ2Zpc2gnXTsKICB2YXIgYXAgPSBF
        bWJlci5BcnJheVByb3h5LmNyZWF0ZSh7IGNvbnRlbnQ6IEVtYmVyLkEocGV0
        cykgfSk7CgogIGFwLmdldCgnZmlyc3RPYmplY3QnKTsgICAgICAgICAgICAg
        ICAgICAgICAgICAvLyAnZG9nJwogIGFwLnNldCgnY29udGVudCcsIFsnYW1v
        ZWJhJywgJ3BhcmFtZWNpdW0nXSk7CiAgYXAuZ2V0KCdmaXJzdE9iamVjdCcp
        OyAgICAgICAgICAgICAgICAgICAgICAgIC8vICdhbW9lYmEnCiAgYGBgCgog
        IFRoaXMgY2xhc3MgY2FuIGFsc28gYmUgdXNlZnVsIGFzIGEgbGF5ZXIgdG8g
        dHJhbnNmb3JtIHRoZSBjb250ZW50cyBvZgogIGFuIGFycmF5LCBhcyB0aGV5
        IGFyZSBhY2Nlc3NlZC4gVGhpcyBjYW4gYmUgZG9uZSBieSBvdmVycmlkaW5n
        CiAgYG9iamVjdEF0Q29udGVudGA6CgogIGBgYGphdmFzY3JpcHQKICB2YXIg
        cGV0cyA9IFsnZG9nJywgJ2NhdCcsICdmaXNoJ107CiAgdmFyIGFwID0gRW1i
        ZXIuQXJyYXlQcm94eS5jcmVhdGUoewogICAgICBjb250ZW50OiBFbWJlci5B
        KHBldHMpLAogICAgICBvYmplY3RBdENvbnRlbnQ6IGZ1bmN0aW9uKGlkeCkg
        ewogICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0KCdjb250ZW50Jykub2JqZWN0
        QXQoaWR4KS50b1VwcGVyQ2FzZSgpOwogICAgICB9CiAgfSk7CgogIGFwLmdl
        dCgnZmlyc3RPYmplY3QnKTsgLy8gLiAnRE9HJwogIGBgYAoKICBAY2xhc3Mg
        QXJyYXlQcm94eQogIEBuYW1lc3BhY2UgRW1iZXIKICBAZXh0ZW5kcyBFbWJl
        ci5PYmplY3QKICBAdXNlcyBFbWJlci5NdXRhYmxlQXJyYXkKKi8KRW1iZXIu
        QXJyYXlQcm94eSA9IEVtYmVyLk9iamVjdC5leHRlbmQoRW1iZXIuTXV0YWJs
        ZUFycmF5LCB7CgogIC8qKgogICAgVGhlIGNvbnRlbnQgYXJyYXkuIE11c3Qg
        YmUgYW4gb2JqZWN0IHRoYXQgaW1wbGVtZW50cyBgRW1iZXIuQXJyYXlgIGFu
        ZC9vcgogICAgYEVtYmVyLk11dGFibGVBcnJheS5gCgogICAgQHByb3BlcnR5
        IGNvbnRlbnQKICAgIEB0eXBlIEVtYmVyLkFycmF5CiAgKi8KICBjb250ZW50
        OiBudWxsLAoKICAvKioKICAgVGhlIGFycmF5IHRoYXQgdGhlIHByb3h5IHBy
        ZXRlbmRzIHRvIGJlLiBJbiB0aGUgZGVmYXVsdCBgQXJyYXlQcm94eWAKICAg
        aW1wbGVtZW50YXRpb24sIHRoaXMgYW5kIGBjb250ZW50YCBhcmUgdGhlIHNh
        bWUuIFN1YmNsYXNzZXMgb2YgYEFycmF5UHJveHlgCiAgIGNhbiBvdmVycmlk
        ZSB0aGlzIHByb3BlcnR5IHRvIHByb3ZpZGUgdGhpbmdzIGxpa2Ugc29ydGlu
        ZyBhbmQgZmlsdGVyaW5nLgoKICAgQHByb3BlcnR5IGFycmFuZ2VkQ29udGVu
        dAogICovCiAgYXJyYW5nZWRDb250ZW50OiBFbWJlci5jb21wdXRlZC5hbGlh
        cygnY29udGVudCcpLAoKICAvKioKICAgIFNob3VsZCBhY3R1YWxseSByZXRy
        aWV2ZSB0aGUgb2JqZWN0IGF0IHRoZSBzcGVjaWZpZWQgaW5kZXggZnJvbSB0
        aGUKICAgIGNvbnRlbnQuIFlvdSBjYW4gb3ZlcnJpZGUgdGhpcyBtZXRob2Qg
        aW4gc3ViY2xhc3NlcyB0byB0cmFuc2Zvcm0gdGhlCiAgICBjb250ZW50IGl0
        ZW0gdG8gc29tZXRoaW5nIG5ldy4KCiAgICBUaGlzIG1ldGhvZCB3aWxsIG9u
        bHkgYmUgY2FsbGVkIGlmIGNvbnRlbnQgaXMgbm9uLWBudWxsYC4KCiAgICBA
        bWV0aG9kIG9iamVjdEF0Q29udGVudAogICAgQHBhcmFtIHtOdW1iZXJ9IGlk
        eCBUaGUgaW5kZXggdG8gcmV0cmlldmUuCiAgICBAcmV0dXJuIHtPYmplY3R9
        IHRoZSB2YWx1ZSBvciB1bmRlZmluZWQgaWYgbm9uZSBmb3VuZAogICovCiAg
        b2JqZWN0QXRDb250ZW50OiBmdW5jdGlvbihpZHgpIHsKICAgIHJldHVybiBn
        ZXQodGhpcywgJ2FycmFuZ2VkQ29udGVudCcpLm9iamVjdEF0KGlkeCk7CiAg
        fSwKCiAgLyoqCiAgICBTaG91bGQgYWN0dWFsbHkgcmVwbGFjZSB0aGUgc3Bl
        Y2lmaWVkIG9iamVjdHMgb24gdGhlIGNvbnRlbnQgYXJyYXkuCiAgICBZb3Ug
        Y2FuIG92ZXJyaWRlIHRoaXMgbWV0aG9kIGluIHN1YmNsYXNzZXMgdG8gdHJh
        bnNmb3JtIHRoZSBjb250ZW50IGl0ZW0KICAgIGludG8gc29tZXRoaW5nIG5l
        dy4KCiAgICBUaGlzIG1ldGhvZCB3aWxsIG9ubHkgYmUgY2FsbGVkIGlmIGNv
        bnRlbnQgaXMgbm9uLWBudWxsYC4KCiAgICBAbWV0aG9kIHJlcGxhY2VDb250
        ZW50CiAgICBAcGFyYW0ge051bWJlcn0gaWR4IFRoZSBzdGFydGluZyBpbmRl
        eAogICAgQHBhcmFtIHtOdW1iZXJ9IGFtdCBUaGUgbnVtYmVyIG9mIGl0ZW1z
        IHRvIHJlbW92ZSBmcm9tIHRoZSBjb250ZW50LgogICAgQHBhcmFtIHtBcnJh
        eX0gb2JqZWN0cyBPcHRpb25hbCBhcnJheSBvZiBvYmplY3RzIHRvIGluc2Vy
        dCBvciBudWxsIGlmIG5vCiAgICAgIG9iamVjdHMuCiAgICBAcmV0dXJuIHt2
        b2lkfQogICovCiAgcmVwbGFjZUNvbnRlbnQ6IGZ1bmN0aW9uKGlkeCwgYW10
        LCBvYmplY3RzKSB7CiAgICBnZXQodGhpcywgJ2NvbnRlbnQnKS5yZXBsYWNl
        KGlkeCwgYW10LCBvYmplY3RzKTsKICB9LAoKICAvKioKICAgIEludm9rZWQg
        d2hlbiB0aGUgY29udGVudCBwcm9wZXJ0eSBpcyBhYm91dCB0byBjaGFuZ2Uu
        IE5vdGlmaWVzIG9ic2VydmVycyB0aGF0IHRoZQogICAgZW50aXJlIGFycmF5
        IGNvbnRlbnQgd2lsbCBjaGFuZ2UuCgogICAgQHByaXZhdGUKICAgIEBtZXRo
        b2QgX2NvbnRlbnRXaWxsQ2hhbmdlCiAgKi8KICBfY29udGVudFdpbGxDaGFu
        Z2U6IEVtYmVyLmJlZm9yZU9ic2VydmVyKCdjb250ZW50JywgZnVuY3Rpb24o
        KSB7CiAgICB0aGlzLl90ZWFyZG93bkNvbnRlbnQoKTsKICB9KSwKCiAgX3Rl
        YXJkb3duQ29udGVudDogZnVuY3Rpb24oKSB7CiAgICB2YXIgY29udGVudCA9
        IGdldCh0aGlzLCAnY29udGVudCcpOwoKICAgIGlmIChjb250ZW50KSB7CiAg
        ICAgIGNvbnRlbnQucmVtb3ZlQXJyYXlPYnNlcnZlcih0aGlzLCB7CiAgICAg
        ICAgd2lsbENoYW5nZTogJ2NvbnRlbnRBcnJheVdpbGxDaGFuZ2UnLAogICAg
        ICAgIGRpZENoYW5nZTogJ2NvbnRlbnRBcnJheURpZENoYW5nZScKICAgICAg
        fSk7CiAgICB9CiAgfSwKCiAgY29udGVudEFycmF5V2lsbENoYW5nZTogRW1i
        ZXIuSywKICBjb250ZW50QXJyYXlEaWRDaGFuZ2U6IEVtYmVyLkssCgogIC8q
        KgogICAgSW52b2tlZCB3aGVuIHRoZSBjb250ZW50IHByb3BlcnR5IGNoYW5n
        ZXMuIE5vdGlmaWVzIG9ic2VydmVycyB0aGF0IHRoZQogICAgZW50aXJlIGFy
        cmF5IGNvbnRlbnQgaGFzIGNoYW5nZWQuCgogICAgQHByaXZhdGUKICAgIEBt
        ZXRob2QgX2NvbnRlbnREaWRDaGFuZ2UKICAqLwogIF9jb250ZW50RGlkQ2hh
        bmdlOiBFbWJlci5vYnNlcnZlcignY29udGVudCcsIGZ1bmN0aW9uKCkgewog
        ICAgdmFyIGNvbnRlbnQgPSBnZXQodGhpcywgJ2NvbnRlbnQnKTsKCiAgICBF
        bWJlci5hc3NlcnQoIkNhbid0IHNldCBBcnJheVByb3h5J3MgY29udGVudCB0
        byBpdHNlbGYiLCBjb250ZW50ICE9PSB0aGlzKTsKCiAgICB0aGlzLl9zZXR1
        cENvbnRlbnQoKTsKICB9KSwKCiAgX3NldHVwQ29udGVudDogZnVuY3Rpb24o
        KSB7CiAgICB2YXIgY29udGVudCA9IGdldCh0aGlzLCAnY29udGVudCcpOwoK
        ICAgIGlmIChjb250ZW50KSB7CiAgICAgIGNvbnRlbnQuYWRkQXJyYXlPYnNl
        cnZlcih0aGlzLCB7CiAgICAgICAgd2lsbENoYW5nZTogJ2NvbnRlbnRBcnJh
        eVdpbGxDaGFuZ2UnLAogICAgICAgIGRpZENoYW5nZTogJ2NvbnRlbnRBcnJh
        eURpZENoYW5nZScKICAgICAgfSk7CiAgICB9CiAgfSwKCiAgX2FycmFuZ2Vk
        Q29udGVudFdpbGxDaGFuZ2U6IEVtYmVyLmJlZm9yZU9ic2VydmVyKCdhcnJh
        bmdlZENvbnRlbnQnLCBmdW5jdGlvbigpIHsKICAgIHZhciBhcnJhbmdlZENv
        bnRlbnQgPSBnZXQodGhpcywgJ2FycmFuZ2VkQ29udGVudCcpLAogICAgICAg
        IGxlbiA9IGFycmFuZ2VkQ29udGVudCA/IGdldChhcnJhbmdlZENvbnRlbnQs
        ICdsZW5ndGgnKSA6IDA7CgogICAgdGhpcy5hcnJhbmdlZENvbnRlbnRBcnJh
        eVdpbGxDaGFuZ2UodGhpcywgMCwgbGVuLCB1bmRlZmluZWQpOwogICAgdGhp
        cy5hcnJhbmdlZENvbnRlbnRXaWxsQ2hhbmdlKHRoaXMpOwoKICAgIHRoaXMu
        X3RlYXJkb3duQXJyYW5nZWRDb250ZW50KGFycmFuZ2VkQ29udGVudCk7CiAg
        fSksCgogIF9hcnJhbmdlZENvbnRlbnREaWRDaGFuZ2U6IEVtYmVyLm9ic2Vy
        dmVyKCdhcnJhbmdlZENvbnRlbnQnLCBmdW5jdGlvbigpIHsKICAgIHZhciBh
        cnJhbmdlZENvbnRlbnQgPSBnZXQodGhpcywgJ2FycmFuZ2VkQ29udGVudCcp
        LAogICAgICAgIGxlbiA9IGFycmFuZ2VkQ29udGVudCA/IGdldChhcnJhbmdl
        ZENvbnRlbnQsICdsZW5ndGgnKSA6IDA7CgogICAgRW1iZXIuYXNzZXJ0KCJD
        YW4ndCBzZXQgQXJyYXlQcm94eSdzIGNvbnRlbnQgdG8gaXRzZWxmIiwgYXJy
        YW5nZWRDb250ZW50ICE9PSB0aGlzKTsKCiAgICB0aGlzLl9zZXR1cEFycmFu
        Z2VkQ29udGVudCgpOwoKICAgIHRoaXMuYXJyYW5nZWRDb250ZW50RGlkQ2hh
        bmdlKHRoaXMpOwogICAgdGhpcy5hcnJhbmdlZENvbnRlbnRBcnJheURpZENo
        YW5nZSh0aGlzLCAwLCB1bmRlZmluZWQsIGxlbik7CiAgfSksCgogIF9zZXR1
        cEFycmFuZ2VkQ29udGVudDogZnVuY3Rpb24oKSB7CiAgICB2YXIgYXJyYW5n
        ZWRDb250ZW50ID0gZ2V0KHRoaXMsICdhcnJhbmdlZENvbnRlbnQnKTsKCiAg
        ICBpZiAoYXJyYW5nZWRDb250ZW50KSB7CiAgICAgIGFycmFuZ2VkQ29udGVu
        dC5hZGRBcnJheU9ic2VydmVyKHRoaXMsIHsKICAgICAgICB3aWxsQ2hhbmdl
        OiAnYXJyYW5nZWRDb250ZW50QXJyYXlXaWxsQ2hhbmdlJywKICAgICAgICBk
        aWRDaGFuZ2U6ICdhcnJhbmdlZENvbnRlbnRBcnJheURpZENoYW5nZScKICAg
        ICAgfSk7CiAgICB9CiAgfSwKCiAgX3RlYXJkb3duQXJyYW5nZWRDb250ZW50
        OiBmdW5jdGlvbigpIHsKICAgIHZhciBhcnJhbmdlZENvbnRlbnQgPSBnZXQo
        dGhpcywgJ2FycmFuZ2VkQ29udGVudCcpOwoKICAgIGlmIChhcnJhbmdlZENv
        bnRlbnQpIHsKICAgICAgYXJyYW5nZWRDb250ZW50LnJlbW92ZUFycmF5T2Jz
        ZXJ2ZXIodGhpcywgewogICAgICAgIHdpbGxDaGFuZ2U6ICdhcnJhbmdlZENv
        bnRlbnRBcnJheVdpbGxDaGFuZ2UnLAogICAgICAgIGRpZENoYW5nZTogJ2Fy
        cmFuZ2VkQ29udGVudEFycmF5RGlkQ2hhbmdlJwogICAgICB9KTsKICAgIH0K
        ICB9LAoKICBhcnJhbmdlZENvbnRlbnRXaWxsQ2hhbmdlOiBFbWJlci5LLAog
        IGFycmFuZ2VkQ29udGVudERpZENoYW5nZTogRW1iZXIuSywKCiAgb2JqZWN0
        QXQ6IGZ1bmN0aW9uKGlkeCkgewogICAgcmV0dXJuIGdldCh0aGlzLCAnY29u
        dGVudCcpICYmIHRoaXMub2JqZWN0QXRDb250ZW50KGlkeCk7CiAgfSwKCiAg
        bGVuZ3RoOiBFbWJlci5jb21wdXRlZChmdW5jdGlvbigpIHsKICAgIHZhciBh
        cnJhbmdlZENvbnRlbnQgPSBnZXQodGhpcywgJ2FycmFuZ2VkQ29udGVudCcp
        OwogICAgcmV0dXJuIGFycmFuZ2VkQ29udGVudCA/IGdldChhcnJhbmdlZENv
        bnRlbnQsICdsZW5ndGgnKSA6IDA7CiAgICAvLyBObyBkZXBlbmRlbmNpZXMg
        c2luY2UgRW51bWVyYWJsZSBub3RpZmllcyBsZW5ndGggb2YgY2hhbmdlCiAg
        fSksCgogIF9yZXBsYWNlOiBmdW5jdGlvbihpZHgsIGFtdCwgb2JqZWN0cykg
        ewogICAgdmFyIGNvbnRlbnQgPSBnZXQodGhpcywgJ2NvbnRlbnQnKTsKICAg
        IEVtYmVyLmFzc2VydCgnVGhlIGNvbnRlbnQgcHJvcGVydHkgb2YgJysgdGhp
        cy5jb25zdHJ1Y3RvciArICcgc2hvdWxkIGJlIHNldCBiZWZvcmUgbW9kaWZ5
        aW5nIGl0JywgY29udGVudCk7CiAgICBpZiAoY29udGVudCkgdGhpcy5yZXBs
        YWNlQ29udGVudChpZHgsIGFtdCwgb2JqZWN0cyk7CiAgICByZXR1cm4gdGhp
        czsKICB9LAoKICByZXBsYWNlOiBmdW5jdGlvbigpIHsKICAgIGlmIChnZXQo
        dGhpcywgJ2FycmFuZ2VkQ29udGVudCcpID09PSBnZXQodGhpcywgJ2NvbnRl
        bnQnKSkgewogICAgICB0aGlzLl9yZXBsYWNlLmFwcGx5KHRoaXMsIGFyZ3Vt
        ZW50cyk7CiAgICB9IGVsc2UgewogICAgICB0aHJvdyBuZXcgRW1iZXIuRXJy
        b3IoIlVzaW5nIHJlcGxhY2Ugb24gYW4gYXJyYW5nZWQgQXJyYXlQcm94eSBp
        cyBub3QgYWxsb3dlZC4iKTsKICAgIH0KICB9LAoKICBfaW5zZXJ0QXQ6IGZ1
        bmN0aW9uKGlkeCwgb2JqZWN0KSB7CiAgICBpZiAoaWR4ID4gZ2V0KHRoaXMs
        ICdjb250ZW50Lmxlbmd0aCcpKSB0aHJvdyBuZXcgRW1iZXIuRXJyb3IoT1VU
        X09GX1JBTkdFX0VYQ0VQVElPTik7CiAgICB0aGlzLl9yZXBsYWNlKGlkeCwg
        MCwgW29iamVjdF0pOwogICAgcmV0dXJuIHRoaXM7CiAgfSwKCiAgaW5zZXJ0
        QXQ6IGZ1bmN0aW9uKGlkeCwgb2JqZWN0KSB7CiAgICBpZiAoZ2V0KHRoaXMs
        ICdhcnJhbmdlZENvbnRlbnQnKSA9PT0gZ2V0KHRoaXMsICdjb250ZW50Jykp
        IHsKICAgICAgcmV0dXJuIHRoaXMuX2luc2VydEF0KGlkeCwgb2JqZWN0KTsK
        ICAgIH0gZWxzZSB7CiAgICAgIHRocm93IG5ldyBFbWJlci5FcnJvcigiVXNp
        bmcgaW5zZXJ0QXQgb24gYW4gYXJyYW5nZWQgQXJyYXlQcm94eSBpcyBub3Qg
        YWxsb3dlZC4iKTsKICAgIH0KICB9LAoKICByZW1vdmVBdDogZnVuY3Rpb24o
        c3RhcnQsIGxlbikgewogICAgaWYgKCdudW1iZXInID09PSB0eXBlb2Ygc3Rh
        cnQpIHsKICAgICAgdmFyIGNvbnRlbnQgPSBnZXQodGhpcywgJ2NvbnRlbnQn
        KSwKICAgICAgICAgIGFycmFuZ2VkQ29udGVudCA9IGdldCh0aGlzLCAnYXJy
        YW5nZWRDb250ZW50JyksCiAgICAgICAgICBpbmRpY2VzID0gW10sIGk7Cgog
        ICAgICBpZiAoKHN0YXJ0IDwgMCkgfHwgKHN0YXJ0ID49IGdldCh0aGlzLCAn
        bGVuZ3RoJykpKSB7CiAgICAgICAgdGhyb3cgbmV3IEVtYmVyLkVycm9yKE9V
        VF9PRl9SQU5HRV9FWENFUFRJT04pOwogICAgICB9CgogICAgICBpZiAobGVu
        ID09PSB1bmRlZmluZWQpIGxlbiA9IDE7CgogICAgICAvLyBHZXQgYSBsaXN0
        IG9mIGluZGljZXMgaW4gb3JpZ2luYWwgY29udGVudCB0byByZW1vdmUKICAg
        ICAgZm9yIChpPXN0YXJ0OyBpPHN0YXJ0K2xlbjsgaSsrKSB7CiAgICAgICAg
        Ly8gVXNlIGFycmFuZ2VkQ29udGVudCBoZXJlIHNvIHdlIGF2b2lkIGNvbmZ1
        c2lvbiB3aXRoIG9iamVjdHMgdHJhbnNmb3JtZWQgYnkgb2JqZWN0QXRDb250
        ZW50CiAgICAgICAgaW5kaWNlcy5wdXNoKGNvbnRlbnQuaW5kZXhPZihhcnJh
        bmdlZENvbnRlbnQub2JqZWN0QXQoaSkpKTsKICAgICAgfQoKICAgICAgLy8g
        UmVwbGFjZSBpbiByZXZlcnNlIG9yZGVyIHNpbmNlIGluZGljZXMgd2lsbCBj
        aGFuZ2UKICAgICAgaW5kaWNlcy5zb3J0KGZ1bmN0aW9uKGEsYikgeyByZXR1
        cm4gYiAtIGE7IH0pOwoKICAgICAgRW1iZXIuYmVnaW5Qcm9wZXJ0eUNoYW5n
        ZXMoKTsKICAgICAgZm9yIChpPTA7IGk8aW5kaWNlcy5sZW5ndGg7IGkrKykg
        ewogICAgICAgIHRoaXMuX3JlcGxhY2UoaW5kaWNlc1tpXSwgMSwgRU1QVFkp
        OwogICAgICB9CiAgICAgIEVtYmVyLmVuZFByb3BlcnR5Q2hhbmdlcygpOwog
        ICAgfQoKICAgIHJldHVybiB0aGlzIDsKICB9LAoKICBwdXNoT2JqZWN0OiBm
        dW5jdGlvbihvYmopIHsKICAgIHRoaXMuX2luc2VydEF0KGdldCh0aGlzLCAn
        Y29udGVudC5sZW5ndGgnKSwgb2JqKSA7CiAgICByZXR1cm4gb2JqIDsKICB9
        LAoKICBwdXNoT2JqZWN0czogZnVuY3Rpb24ob2JqZWN0cykgewogICAgaWYg
        KCEoRW1iZXIuRW51bWVyYWJsZS5kZXRlY3Qob2JqZWN0cykgfHwgRW1iZXIu
        aXNBcnJheShvYmplY3RzKSkpIHsKICAgICAgdGhyb3cgbmV3IFR5cGVFcnJv
        cigiTXVzdCBwYXNzIEVtYmVyLkVudW1lcmFibGUgdG8gRW1iZXIuTXV0YWJs
        ZUFycmF5I3B1c2hPYmplY3RzIik7CiAgICB9CiAgICB0aGlzLl9yZXBsYWNl
        KGdldCh0aGlzLCAnbGVuZ3RoJyksIDAsIG9iamVjdHMpOwogICAgcmV0dXJu
        IHRoaXM7CiAgfSwKCiAgc2V0T2JqZWN0czogZnVuY3Rpb24ob2JqZWN0cykg
        ewogICAgaWYgKG9iamVjdHMubGVuZ3RoID09PSAwKSByZXR1cm4gdGhpcy5j
        bGVhcigpOwoKICAgIHZhciBsZW4gPSBnZXQodGhpcywgJ2xlbmd0aCcpOwog
        ICAgdGhpcy5fcmVwbGFjZSgwLCBsZW4sIG9iamVjdHMpOwogICAgcmV0dXJu
        IHRoaXM7CiAgfSwKCiAgdW5zaGlmdE9iamVjdDogZnVuY3Rpb24ob2JqKSB7
        CiAgICB0aGlzLl9pbnNlcnRBdCgwLCBvYmopIDsKICAgIHJldHVybiBvYmog
        OwogIH0sCgogIHVuc2hpZnRPYmplY3RzOiBmdW5jdGlvbihvYmplY3RzKSB7
        CiAgICB0aGlzLl9yZXBsYWNlKDAsIDAsIG9iamVjdHMpOwogICAgcmV0dXJu
        IHRoaXM7CiAgfSwKCiAgc2xpY2U6IGZ1bmN0aW9uKCkgewogICAgdmFyIGFy
        ciA9IHRoaXMudG9BcnJheSgpOwogICAgcmV0dXJuIGFyci5zbGljZS5hcHBs
        eShhcnIsIGFyZ3VtZW50cyk7CiAgfSwKCiAgYXJyYW5nZWRDb250ZW50QXJy
        YXlXaWxsQ2hhbmdlOiBmdW5jdGlvbihpdGVtLCBpZHgsIHJlbW92ZWRDbnQs
        IGFkZGVkQ250KSB7CiAgICB0aGlzLmFycmF5Q29udGVudFdpbGxDaGFuZ2Uo
        aWR4LCByZW1vdmVkQ250LCBhZGRlZENudCk7CiAgfSwKCiAgYXJyYW5nZWRD
        b250ZW50QXJyYXlEaWRDaGFuZ2U6IGZ1bmN0aW9uKGl0ZW0sIGlkeCwgcmVt
        b3ZlZENudCwgYWRkZWRDbnQpIHsKICAgIHRoaXMuYXJyYXlDb250ZW50RGlk
        Q2hhbmdlKGlkeCwgcmVtb3ZlZENudCwgYWRkZWRDbnQpOwogIH0sCgogIGlu
        aXQ6IGZ1bmN0aW9uKCkgewogICAgdGhpcy5fc3VwZXIoKTsKICAgIHRoaXMu
        X3NldHVwQ29udGVudCgpOwogICAgdGhpcy5fc2V0dXBBcnJhbmdlZENvbnRl
        bnQoKTsKICB9LAoKICB3aWxsRGVzdHJveTogZnVuY3Rpb24oKSB7CiAgICB0
        aGlzLl90ZWFyZG93bkFycmFuZ2VkQ29udGVudCgpOwogICAgdGhpcy5fdGVh
        cmRvd25Db250ZW50KCk7CiAgfQp9KTsKCn0pKCk7CgoKCihmdW5jdGlvbigp
        IHsKLyoqCkBtb2R1bGUgZW1iZXIKQHN1Ym1vZHVsZSBlbWJlci1ydW50aW1l
        CiovCgoKdmFyIHNldCA9IEVtYmVyLnNldCwgZ2V0ID0gRW1iZXIuZ2V0LCBn
        dWlkRm9yID0gRW1iZXIuZ3VpZEZvcjsKdmFyIGZvckVhY2ggPSBFbWJlci5F
        bnVtZXJhYmxlVXRpbHMuZm9yRWFjaCwKICAgIGluZGV4T2YgPSBFbWJlci5B
        cnJheVBvbHlmaWxscy5pbmRleE9mOwoKdmFyIEVhY2hBcnJheSA9IEVtYmVy
        Lk9iamVjdC5leHRlbmQoRW1iZXIuQXJyYXksIHsKCiAgaW5pdDogZnVuY3Rp
        b24oY29udGVudCwga2V5TmFtZSwgb3duZXIpIHsKICAgIHRoaXMuX3N1cGVy
        KCk7CiAgICB0aGlzLl9rZXlOYW1lID0ga2V5TmFtZTsKICAgIHRoaXMuX293
        bmVyICAgPSBvd25lcjsKICAgIHRoaXMuX2NvbnRlbnQgPSBjb250ZW50Owog
        IH0sCgogIG9iamVjdEF0OiBmdW5jdGlvbihpZHgpIHsKICAgIHZhciBpdGVt
        ID0gdGhpcy5fY29udGVudC5vYmplY3RBdChpZHgpOwogICAgcmV0dXJuIGl0
        ZW0gJiYgZ2V0KGl0ZW0sIHRoaXMuX2tleU5hbWUpOwogIH0sCgogIGxlbmd0
        aDogRW1iZXIuY29tcHV0ZWQoZnVuY3Rpb24oKSB7CiAgICB2YXIgY29udGVu
        dCA9IHRoaXMuX2NvbnRlbnQ7CiAgICByZXR1cm4gY29udGVudCA/IGdldChj
        b250ZW50LCAnbGVuZ3RoJykgOiAwOwogIH0pCgp9KTsKCnZhciBJU19PQlNF
        UlZFUiA9IC9eLis6KGJlZm9yZXxjaGFuZ2UpJC87CgpmdW5jdGlvbiBhZGRP
        YnNlcnZlckZvckNvbnRlbnRLZXkoY29udGVudCwga2V5TmFtZSwgcHJveHks
        IGlkeCwgbG9jKSB7CiAgdmFyIG9iamVjdHMgPSBwcm94eS5fb2JqZWN0cywg
        Z3VpZDsKICBpZiAoIW9iamVjdHMpIG9iamVjdHMgPSBwcm94eS5fb2JqZWN0
        cyA9IHt9OwoKICB3aGlsZSgtLWxvYz49aWR4KSB7CiAgICB2YXIgaXRlbSA9
        IGNvbnRlbnQub2JqZWN0QXQobG9jKTsKICAgIGlmIChpdGVtKSB7CiAgICAg
        IEVtYmVyLmFzc2VydCgnV2hlbiB1c2luZyBAZWFjaCB0byBvYnNlcnZlIHRo
        ZSBhcnJheSAnICsgY29udGVudCArICcsIHRoZSBhcnJheSBtdXN0IHJldHVy
        biBhbiBvYmplY3QnLCBFbWJlci50eXBlT2YoaXRlbSkgPT09ICdpbnN0YW5j
        ZScgfHwgRW1iZXIudHlwZU9mKGl0ZW0pID09PSAnb2JqZWN0Jyk7CiAgICAg
        IEVtYmVyLmFkZEJlZm9yZU9ic2VydmVyKGl0ZW0sIGtleU5hbWUsIHByb3h5
        LCAnY29udGVudEtleVdpbGxDaGFuZ2UnKTsKICAgICAgRW1iZXIuYWRkT2Jz
        ZXJ2ZXIoaXRlbSwga2V5TmFtZSwgcHJveHksICdjb250ZW50S2V5RGlkQ2hh
        bmdlJyk7CgogICAgICAvLyBrZWVwIHRyYWNrIG9mIHRoZSBpbmRleCBlYWNo
        IGl0ZW0gd2FzIGZvdW5kIGF0IHNvIHdlIGNhbiBtYXAKICAgICAgLy8gaXQg
        YmFjayB3aGVuIHRoZSBvYmogY2hhbmdlcy4KICAgICAgZ3VpZCA9IGd1aWRG
        b3IoaXRlbSk7CiAgICAgIGlmICghb2JqZWN0c1tndWlkXSkgb2JqZWN0c1tn
        dWlkXSA9IFtdOwogICAgICBvYmplY3RzW2d1aWRdLnB1c2gobG9jKTsKICAg
        IH0KICB9Cn0KCmZ1bmN0aW9uIHJlbW92ZU9ic2VydmVyRm9yQ29udGVudEtl
        eShjb250ZW50LCBrZXlOYW1lLCBwcm94eSwgaWR4LCBsb2MpIHsKICB2YXIg
        b2JqZWN0cyA9IHByb3h5Ll9vYmplY3RzOwogIGlmICghb2JqZWN0cykgb2Jq
        ZWN0cyA9IHByb3h5Ll9vYmplY3RzID0ge307CiAgdmFyIGluZGljaWVzLCBn
        dWlkOwoKICB3aGlsZSgtLWxvYz49aWR4KSB7CiAgICB2YXIgaXRlbSA9IGNv
        bnRlbnQub2JqZWN0QXQobG9jKTsKICAgIGlmIChpdGVtKSB7CiAgICAgIEVt
        YmVyLnJlbW92ZUJlZm9yZU9ic2VydmVyKGl0ZW0sIGtleU5hbWUsIHByb3h5
        LCAnY29udGVudEtleVdpbGxDaGFuZ2UnKTsKICAgICAgRW1iZXIucmVtb3Zl
        T2JzZXJ2ZXIoaXRlbSwga2V5TmFtZSwgcHJveHksICdjb250ZW50S2V5RGlk
        Q2hhbmdlJyk7CgogICAgICBndWlkID0gZ3VpZEZvcihpdGVtKTsKICAgICAg
        aW5kaWNpZXMgPSBvYmplY3RzW2d1aWRdOwogICAgICBpbmRpY2llc1tpbmRl
        eE9mLmNhbGwoaW5kaWNpZXMsIGxvYyldID0gbnVsbDsKICAgIH0KICB9Cn0K
        Ci8qKgogIFRoaXMgaXMgdGhlIG9iamVjdCBpbnN0YW5jZSByZXR1cm5lZCB3
        aGVuIHlvdSBnZXQgdGhlIGBAZWFjaGAgcHJvcGVydHkgb24gYW4KICBhcnJh
        eS4gSXQgdXNlcyB0aGUgdW5rbm93blByb3BlcnR5IGhhbmRsZXIgdG8gYXV0
        b21hdGljYWxseSBjcmVhdGUKICBFYWNoQXJyYXkgaW5zdGFuY2VzIGZvciBw
        cm9wZXJ0eSBuYW1lcy4KCiAgQHByaXZhdGUKICBAY2xhc3MgRWFjaFByb3h5
        CiAgQG5hbWVzcGFjZSBFbWJlcgogIEBleHRlbmRzIEVtYmVyLk9iamVjdAoq
        LwpFbWJlci5FYWNoUHJveHkgPSBFbWJlci5PYmplY3QuZXh0ZW5kKHsKCiAg
        aW5pdDogZnVuY3Rpb24oY29udGVudCkgewogICAgdGhpcy5fc3VwZXIoKTsK
        ICAgIHRoaXMuX2NvbnRlbnQgPSBjb250ZW50OwogICAgY29udGVudC5hZGRB
        cnJheU9ic2VydmVyKHRoaXMpOwoKICAgIC8vIGluIGNhc2Ugc29tZW9uZSBp
        cyBhbHJlYWR5IG9ic2VydmluZyBzb21lIGtleXMgbWFrZSBzdXJlIHRoZXkg
        YXJlCiAgICAvLyBhZGRlZAogICAgZm9yRWFjaChFbWJlci53YXRjaGVkRXZl
        bnRzKHRoaXMpLCBmdW5jdGlvbihldmVudE5hbWUpIHsKICAgICAgdGhpcy5k
        aWRBZGRMaXN0ZW5lcihldmVudE5hbWUpOwogICAgfSwgdGhpcyk7CiAgfSwK
        CiAgLyoqCiAgICBZb3UgY2FuIGRpcmVjdGx5IGFjY2VzcyBtYXBwZWQgcHJv
        cGVydGllcyBieSBzaW1wbHkgcmVxdWVzdGluZyB0aGVtLgogICAgVGhlIGB1
        bmtub3duUHJvcGVydHlgIGhhbmRsZXIgd2lsbCBnZW5lcmF0ZSBhbiBFYWNo
        QXJyYXkgb2YgZWFjaCBpdGVtLgoKICAgIEBtZXRob2QgdW5rbm93blByb3Bl
        cnR5CiAgICBAcGFyYW0ga2V5TmFtZSB7U3RyaW5nfQogICAgQHBhcmFtIHZh
        bHVlIHsqfQogICovCiAgdW5rbm93blByb3BlcnR5OiBmdW5jdGlvbihrZXlO
        YW1lLCB2YWx1ZSkgewogICAgdmFyIHJldDsKICAgIHJldCA9IG5ldyBFYWNo
        QXJyYXkodGhpcy5fY29udGVudCwga2V5TmFtZSwgdGhpcyk7CiAgICBFbWJl
        ci5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBrZXlOYW1lLCBudWxsLCByZXQpOwog
        ICAgdGhpcy5iZWdpbk9ic2VydmluZ0NvbnRlbnRLZXkoa2V5TmFtZSk7CiAg
        ICByZXR1cm4gcmV0OwogIH0sCgogIC8vIC4uLi4uLi4uLi4uLi4uLi4uLi4u
        Li4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4KICAvLyBB
        UlJBWSBDSEFOR0VTCiAgLy8gSW52b2tlcyB3aGVuZXZlciB0aGUgY29udGVu
        dCBhcnJheSBpdHNlbGYgY2hhbmdlcy4KCiAgYXJyYXlXaWxsQ2hhbmdlOiBm
        dW5jdGlvbihjb250ZW50LCBpZHgsIHJlbW92ZWRDbnQsIGFkZGVkQ250KSB7
        CiAgICB2YXIga2V5cyA9IHRoaXMuX2tleXMsIGtleSwgbGltOwoKICAgIGxp
        bSA9IHJlbW92ZWRDbnQ+MCA/IGlkeCtyZW1vdmVkQ250IDogLTE7CiAgICBF
        bWJlci5iZWdpblByb3BlcnR5Q2hhbmdlcyh0aGlzKTsKCiAgICBmb3Ioa2V5
        IGluIGtleXMpIHsKICAgICAgaWYgKCFrZXlzLmhhc093blByb3BlcnR5KGtl
        eSkpIHsgY29udGludWU7IH0KCiAgICAgIGlmIChsaW0+MCkgeyByZW1vdmVP
        YnNlcnZlckZvckNvbnRlbnRLZXkoY29udGVudCwga2V5LCB0aGlzLCBpZHgs
        IGxpbSk7IH0KCiAgICAgIEVtYmVyLnByb3BlcnR5V2lsbENoYW5nZSh0aGlz
        LCBrZXkpOwogICAgfQoKICAgIEVtYmVyLnByb3BlcnR5V2lsbENoYW5nZSh0
        aGlzLl9jb250ZW50LCAnQGVhY2gnKTsKICAgIEVtYmVyLmVuZFByb3BlcnR5
        Q2hhbmdlcyh0aGlzKTsKICB9LAoKICBhcnJheURpZENoYW5nZTogZnVuY3Rp
        b24oY29udGVudCwgaWR4LCByZW1vdmVkQ250LCBhZGRlZENudCkgewogICAg
        dmFyIGtleXMgPSB0aGlzLl9rZXlzLCBsaW07CgogICAgbGltID0gYWRkZWRD
        bnQ+MCA/IGlkeCthZGRlZENudCA6IC0xOwogICAgRW1iZXIuY2hhbmdlUHJv
        cGVydGllcyhmdW5jdGlvbigpIHsKICAgICAgZm9yKHZhciBrZXkgaW4ga2V5
        cykgewogICAgICAgIGlmICgha2V5cy5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7
        IGNvbnRpbnVlOyB9CgogICAgICAgIGlmIChsaW0+MCkgeyBhZGRPYnNlcnZl
        ckZvckNvbnRlbnRLZXkoY29udGVudCwga2V5LCB0aGlzLCBpZHgsIGxpbSk7
        IH0KCiAgICAgICAgRW1iZXIucHJvcGVydHlEaWRDaGFuZ2UodGhpcywga2V5
        KTsKICAgICAgfQoKICAgICAgRW1iZXIucHJvcGVydHlEaWRDaGFuZ2UodGhp
        cy5fY29udGVudCwgJ0BlYWNoJyk7CiAgICB9LCB0aGlzKTsKICB9LAoKICAv
        LyAuLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4u
        Li4uLi4uLi4uLi4uLi4uCiAgLy8gTElTVEVOIEZPUiBORVcgT0JTRVJWRVJT
        IEFORCBPVEhFUiBFVkVOVCBMSVNURU5FUlMKICAvLyBTdGFydCBtb25pdG9y
        aW5nIGtleXMgYmFzZWQgb24gd2hvIGlzIGxpc3RlbmluZy4uLgoKICBkaWRB
        ZGRMaXN0ZW5lcjogZnVuY3Rpb24oZXZlbnROYW1lKSB7CiAgICBpZiAoSVNf
        T0JTRVJWRVIudGVzdChldmVudE5hbWUpKSB7CiAgICAgIHRoaXMuYmVnaW5P
        YnNlcnZpbmdDb250ZW50S2V5KGV2ZW50TmFtZS5zbGljZSgwLCAtNykpOwog
        ICAgfQogIH0sCgogIGRpZFJlbW92ZUxpc3RlbmVyOiBmdW5jdGlvbihldmVu
        dE5hbWUpIHsKICAgIGlmIChJU19PQlNFUlZFUi50ZXN0KGV2ZW50TmFtZSkp
        IHsKICAgICAgdGhpcy5zdG9wT2JzZXJ2aW5nQ29udGVudEtleShldmVudE5h
        bWUuc2xpY2UoMCwgLTcpKTsKICAgIH0KICB9LAoKICAvLyAuLi4uLi4uLi4u
        Li4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4u
        Li4uCiAgLy8gQ09OVEVOVCBLRVkgT0JTRVJWSU5HCiAgLy8gQWN0dWFsIHdh
        dGNoIGtleXMgb24gdGhlIHNvdXJjZSBjb250ZW50LgoKICBiZWdpbk9ic2Vy
        dmluZ0NvbnRlbnRLZXk6IGZ1bmN0aW9uKGtleU5hbWUpIHsKICAgIHZhciBr
        ZXlzID0gdGhpcy5fa2V5czsKICAgIGlmICgha2V5cykga2V5cyA9IHRoaXMu
        X2tleXMgPSB7fTsKICAgIGlmICgha2V5c1trZXlOYW1lXSkgewogICAgICBr
        ZXlzW2tleU5hbWVdID0gMTsKICAgICAgdmFyIGNvbnRlbnQgPSB0aGlzLl9j
        b250ZW50LAogICAgICAgICAgbGVuID0gZ2V0KGNvbnRlbnQsICdsZW5ndGgn
        KTsKICAgICAgYWRkT2JzZXJ2ZXJGb3JDb250ZW50S2V5KGNvbnRlbnQsIGtl
        eU5hbWUsIHRoaXMsIDAsIGxlbik7CiAgICB9IGVsc2UgewogICAgICBrZXlz
        W2tleU5hbWVdKys7CiAgICB9CiAgfSwKCiAgc3RvcE9ic2VydmluZ0NvbnRl
        bnRLZXk6IGZ1bmN0aW9uKGtleU5hbWUpIHsKICAgIHZhciBrZXlzID0gdGhp
        cy5fa2V5czsKICAgIGlmIChrZXlzICYmIChrZXlzW2tleU5hbWVdPjApICYm
        ICgtLWtleXNba2V5TmFtZV08PTApKSB7CiAgICAgIHZhciBjb250ZW50ID0g
        dGhpcy5fY29udGVudCwKICAgICAgICAgIGxlbiAgICAgPSBnZXQoY29udGVu
        dCwgJ2xlbmd0aCcpOwogICAgICByZW1vdmVPYnNlcnZlckZvckNvbnRlbnRL
        ZXkoY29udGVudCwga2V5TmFtZSwgdGhpcywgMCwgbGVuKTsKICAgIH0KICB9
        LAoKICBjb250ZW50S2V5V2lsbENoYW5nZTogZnVuY3Rpb24ob2JqLCBrZXlO
        YW1lKSB7CiAgICBFbWJlci5wcm9wZXJ0eVdpbGxDaGFuZ2UodGhpcywga2V5
        TmFtZSk7CiAgfSwKCiAgY29udGVudEtleURpZENoYW5nZTogZnVuY3Rpb24o
        b2JqLCBrZXlOYW1lKSB7CiAgICBFbWJlci5wcm9wZXJ0eURpZENoYW5nZSh0
        aGlzLCBrZXlOYW1lKTsKICB9Cgp9KTsKCgoKfSkoKTsKCgoKKGZ1bmN0aW9u
        KCkgewovKioKQG1vZHVsZSBlbWJlcgpAc3VibW9kdWxlIGVtYmVyLXJ1bnRp
        bWUKKi8KCgp2YXIgZ2V0ID0gRW1iZXIuZ2V0LCBzZXQgPSBFbWJlci5zZXQs
        IHJlcGxhY2UgPSBFbWJlci5FbnVtZXJhYmxlVXRpbHMuX3JlcGxhY2U7Cgov
        LyBBZGQgRW1iZXIuQXJyYXkgdG8gQXJyYXkucHJvdG90eXBlLiBSZW1vdmUg
        bWV0aG9kcyB3aXRoIG5hdGl2ZQovLyBpbXBsZW1lbnRhdGlvbnMgYW5kIHN1
        cHBseSBzb21lIG1vcmUgb3B0aW1pemVkIHZlcnNpb25zIG9mIGdlbmVyaWMg
        bWV0aG9kcwovLyBiZWNhdXNlIHRoZXkgYXJlIHNvIGNvbW1vbi4KdmFyIE5h
        dGl2ZUFycmF5ID0gRW1iZXIuTWl4aW4uY3JlYXRlKEVtYmVyLk11dGFibGVB
        cnJheSwgRW1iZXIuT2JzZXJ2YWJsZSwgRW1iZXIuQ29weWFibGUsIHsKCiAg
        Ly8gYmVjYXVzZSBsZW5ndGggaXMgYSBidWlsdC1pbiBwcm9wZXJ0eSB3ZSBu
        ZWVkIHRvIGtub3cgdG8ganVzdCBnZXQgdGhlCiAgLy8gb3JpZ2luYWwgcHJv
        cGVydHkuCiAgZ2V0OiBmdW5jdGlvbihrZXkpIHsKICAgIGlmIChrZXk9PT0n
        bGVuZ3RoJykgcmV0dXJuIHRoaXMubGVuZ3RoOwogICAgZWxzZSBpZiAoJ251
        bWJlcicgPT09IHR5cGVvZiBrZXkpIHJldHVybiB0aGlzW2tleV07CiAgICBl
        bHNlIHJldHVybiB0aGlzLl9zdXBlcihrZXkpOwogIH0sCgogIG9iamVjdEF0
        OiBmdW5jdGlvbihpZHgpIHsKICAgIHJldHVybiB0aGlzW2lkeF07CiAgfSwK
        CiAgLy8gcHJpbWl0aXZlIGZvciBhcnJheSBzdXBwb3J0LgogIHJlcGxhY2U6
        IGZ1bmN0aW9uKGlkeCwgYW10LCBvYmplY3RzKSB7CgogICAgaWYgKHRoaXMu
        aXNGcm96ZW4pIHRocm93IEVtYmVyLkZST1pFTl9FUlJPUjsKCiAgICAvLyBp
        ZiB3ZSByZXBsYWNlZCBleGFjdGx5IHRoZSBzYW1lIG51bWJlciBvZiBpdGVt
        cywgdGhlbiBwYXNzIG9ubHkgdGhlCiAgICAvLyByZXBsYWNlZCByYW5nZS4g
        T3RoZXJ3aXNlLCBwYXNzIHRoZSBmdWxsIHJlbWFpbmluZyBhcnJheSBsZW5n
        dGgKICAgIC8vIHNpbmNlIGV2ZXJ5dGhpbmcgaGFzIHNoaWZ0ZWQKICAgIHZh
        ciBsZW4gPSBvYmplY3RzID8gZ2V0KG9iamVjdHMsICdsZW5ndGgnKSA6IDA7
        CiAgICB0aGlzLmFycmF5Q29udGVudFdpbGxDaGFuZ2UoaWR4LCBhbXQsIGxl
        bik7CgogICAgaWYgKGxlbiA9PT0gMCkgewogICAgICB0aGlzLnNwbGljZShp
        ZHgsIGFtdCk7CiAgICB9IGVsc2UgewogICAgICByZXBsYWNlKHRoaXMsIGlk
        eCwgYW10LCBvYmplY3RzKTsKICAgIH0KCiAgICB0aGlzLmFycmF5Q29udGVu
        dERpZENoYW5nZShpZHgsIGFtdCwgbGVuKTsKICAgIHJldHVybiB0aGlzOwog
        IH0sCgogIC8vIElmIHlvdSBhc2sgZm9yIGFuIHVua25vd24gcHJvcGVydHks
        IHRoZW4gdHJ5IHRvIGNvbGxlY3QgdGhlIHZhbHVlCiAgLy8gZnJvbSBtZW1i
        ZXIgaXRlbXMuCiAgdW5rbm93blByb3BlcnR5OiBmdW5jdGlvbihrZXksIHZh
        bHVlKSB7CiAgICB2YXIgcmV0Oy8vID0gdGhpcy5yZWR1Y2VkUHJvcGVydHko
        a2V5LCB2YWx1ZSkgOwogICAgaWYgKCh2YWx1ZSAhPT0gdW5kZWZpbmVkKSAm
        JiByZXQgPT09IHVuZGVmaW5lZCkgewogICAgICByZXQgPSB0aGlzW2tleV0g
        PSB2YWx1ZTsKICAgIH0KICAgIHJldHVybiByZXQgOwogIH0sCgogIC8vIElm
        IGJyb3dzZXIgZGlkIG5vdCBpbXBsZW1lbnQgaW5kZXhPZiBuYXRpdmVseSwg
        dGhlbiBvdmVycmlkZSB3aXRoCiAgLy8gc3BlY2lhbGl6ZWQgdmVyc2lvbgog
        IGluZGV4T2Y6IGZ1bmN0aW9uKG9iamVjdCwgc3RhcnRBdCkgewogICAgdmFy
        IGlkeCwgbGVuID0gdGhpcy5sZW5ndGg7CgogICAgaWYgKHN0YXJ0QXQgPT09
        IHVuZGVmaW5lZCkgc3RhcnRBdCA9IDA7CiAgICBlbHNlIHN0YXJ0QXQgPSAo
        c3RhcnRBdCA8IDApID8gTWF0aC5jZWlsKHN0YXJ0QXQpIDogTWF0aC5mbG9v
        cihzdGFydEF0KTsKICAgIGlmIChzdGFydEF0IDwgMCkgc3RhcnRBdCArPSBs
        ZW47CgogICAgZm9yKGlkeD1zdGFydEF0O2lkeDxsZW47aWR4KyspIHsKICAg
        ICAgaWYgKHRoaXNbaWR4XSA9PT0gb2JqZWN0KSByZXR1cm4gaWR4IDsKICAg
        IH0KICAgIHJldHVybiAtMTsKICB9LAoKICBsYXN0SW5kZXhPZjogZnVuY3Rp
        b24ob2JqZWN0LCBzdGFydEF0KSB7CiAgICB2YXIgaWR4LCBsZW4gPSB0aGlz
        Lmxlbmd0aDsKCiAgICBpZiAoc3RhcnRBdCA9PT0gdW5kZWZpbmVkKSBzdGFy
        dEF0ID0gbGVuLTE7CiAgICBlbHNlIHN0YXJ0QXQgPSAoc3RhcnRBdCA8IDAp
        ID8gTWF0aC5jZWlsKHN0YXJ0QXQpIDogTWF0aC5mbG9vcihzdGFydEF0KTsK
        ICAgIGlmIChzdGFydEF0IDwgMCkgc3RhcnRBdCArPSBsZW47CgogICAgZm9y
        KGlkeD1zdGFydEF0O2lkeD49MDtpZHgtLSkgewogICAgICBpZiAodGhpc1tp
        ZHhdID09PSBvYmplY3QpIHJldHVybiBpZHggOwogICAgfQogICAgcmV0dXJu
        IC0xOwogIH0sCgogIGNvcHk6IGZ1bmN0aW9uKGRlZXApIHsKICAgIGlmIChk
        ZWVwKSB7CiAgICAgIHJldHVybiB0aGlzLm1hcChmdW5jdGlvbihpdGVtKSB7
        IHJldHVybiBFbWJlci5jb3B5KGl0ZW0sIHRydWUpOyB9KTsKICAgIH0KCiAg
        ICByZXR1cm4gdGhpcy5zbGljZSgpOwogIH0KfSk7CgovLyBSZW1vdmUgYW55
        IG1ldGhvZHMgaW1wbGVtZW50ZWQgbmF0aXZlbHkgc28gd2UgZG9uJ3Qgb3Zl
        cnJpZGUgdGhlbQp2YXIgaWdub3JlID0gWydsZW5ndGgnXTsKRW1iZXIuRW51
        bWVyYWJsZVV0aWxzLmZvckVhY2goTmF0aXZlQXJyYXkua2V5cygpLCBmdW5j
        dGlvbihtZXRob2ROYW1lKSB7CiAgaWYgKEFycmF5LnByb3RvdHlwZVttZXRo
        b2ROYW1lXSkgaWdub3JlLnB1c2gobWV0aG9kTmFtZSk7Cn0pOwoKaWYgKGln
        bm9yZS5sZW5ndGg+MCkgewogIE5hdGl2ZUFycmF5ID0gTmF0aXZlQXJyYXku
        d2l0aG91dC5hcHBseShOYXRpdmVBcnJheSwgaWdub3JlKTsKfQoKLyoqCiAg
        VGhlIE5hdGl2ZUFycmF5IG1peGluIGNvbnRhaW5zIHRoZSBwcm9wZXJ0aWVz
        IG5lZWRlZCB0byB0byBtYWtlIHRoZSBuYXRpdmUKICBBcnJheSBzdXBwb3J0
        IEVtYmVyLk11dGFibGVBcnJheSBhbmQgYWxsIG9mIGl0cyBkZXBlbmRlbnQg
        QVBJcy4gVW5sZXNzIHlvdQogIGhhdmUgYEVtYmVyLkVYVEVORF9QUk9UT1RZ
        UEVTYCBvciBgRW1iZXIuRVhURU5EX1BST1RPVFlQRVMuQXJyYXlgIHNldCB0
        bwogIGZhbHNlLCB0aGlzIHdpbGwgYmUgYXBwbGllZCBhdXRvbWF0aWNhbGx5
        LiBPdGhlcndpc2UgeW91IGNhbiBhcHBseSB0aGUgbWl4aW4KICBhdCBhbnl0
        aW1lIGJ5IGNhbGxpbmcgYEVtYmVyLk5hdGl2ZUFycmF5LmFjdGl2YXRlYC4K
        CiAgQGNsYXNzIE5hdGl2ZUFycmF5CiAgQG5hbWVzcGFjZSBFbWJlcgogIEB1
        c2VzIEVtYmVyLk11dGFibGVBcnJheQogIEB1c2VzIEVtYmVyLk9ic2VydmFi
        bGUKICBAdXNlcyBFbWJlci5Db3B5YWJsZQoqLwpFbWJlci5OYXRpdmVBcnJh
        eSA9IE5hdGl2ZUFycmF5OwoKLyoqCiAgQ3JlYXRlcyBhbiBgRW1iZXIuTmF0
        aXZlQXJyYXlgIGZyb20gYW4gQXJyYXkgbGlrZSBvYmplY3QuCiAgRG9lcyBu
        b3QgbW9kaWZ5IHRoZSBvcmlnaW5hbCBvYmplY3QuIEVtYmVyLkEgaXMgbm90
        IG5lZWRlZCBpZgogIGBFbWJlci5FWFRFTkRfUFJPVE9UWVBFU2AgaXMgYHRy
        dWVgICh0aGUgZGVmYXVsdCB2YWx1ZSkuIEhvd2V2ZXIsCiAgaXQgaXMgcmVj
        b21tZW5kZWQgdGhhdCB5b3UgdXNlIEVtYmVyLkEgd2hlbiBjcmVhdGluZyBh
        ZGRvbnMgZm9yCiAgZW1iZXIgb3Igd2hlbiB5b3UgY2FuIG5vdCBndWFyYW50
        ZWUgdGhhdCBgRW1iZXIuRVhURU5EX1BST1RPVFlQRVNgCiAgd2lsbCBiZSBg
        dHJ1ZWAuCgogIEV4YW1wbGUKCiAgYGBganMKICB2YXIgUGFnaW5hdGlvbiA9
        IEVtYmVyLkNvbGxlY3Rpb25WaWV3LmV4dGVuZCh7CiAgICB0YWdOYW1lOiAn
        dWwnLAogICAgY2xhc3NOYW1lczogWydwYWdpbmF0aW9uJ10sCiAgICBpbml0
        OiBmdW5jdGlvbigpIHsKICAgICAgdGhpcy5fc3VwZXIoKTsKICAgICAgaWYg
        KCF0aGlzLmdldCgnY29udGVudCcpKSB7CiAgICAgICAgdGhpcy5zZXQoJ2Nv
        bnRlbnQnLCBFbWJlci5BKFtdKSk7CiAgICAgIH0KICAgIH0KICB9KTsKICBg
        YGAKCiAgQG1ldGhvZCBBCiAgQGZvciBFbWJlcgogIEByZXR1cm4ge0VtYmVy
        Lk5hdGl2ZUFycmF5fQoqLwpFbWJlci5BID0gZnVuY3Rpb24oYXJyKSB7CiAg
        aWYgKGFyciA9PT0gdW5kZWZpbmVkKSB7IGFyciA9IFtdOyB9CiAgcmV0dXJu
        IEVtYmVyLkFycmF5LmRldGVjdChhcnIpID8gYXJyIDogRW1iZXIuTmF0aXZl
        QXJyYXkuYXBwbHkoYXJyKTsKfTsKCi8qKgogIEFjdGl2YXRlcyB0aGUgbWl4
        aW4gb24gdGhlIEFycmF5LnByb3RvdHlwZSBpZiBub3QgYWxyZWFkeSBhcHBs
        aWVkLiBDYWxsaW5nCiAgdGhpcyBtZXRob2QgbW9yZSB0aGFuIG9uY2UgaXMg
        c2FmZS4gVGhpcyB3aWxsIGJlIGNhbGxlZCB3aGVuIGVtYmVyIGlzIGxvYWRl
        ZAogIHVubGVzcyB5b3UgaGF2ZSBgRW1iZXIuRVhURU5EX1BST1RPVFlQRVNg
        IG9yIGBFbWJlci5FWFRFTkRfUFJPVE9UWVBFUy5BcnJheWAKICBzZXQgdG8g
        YGZhbHNlYC4KCiAgRXhhbXBsZQoKICBgYGBqcwogIGlmIChFbWJlci5FWFRF
        TkRfUFJPVE9UWVBFUyA9PT0gdHJ1ZSB8fCBFbWJlci5FWFRFTkRfUFJPVE9U
        WVBFUy5BcnJheSkgewogICAgRW1iZXIuTmF0aXZlQXJyYXkuYWN0aXZhdGUo
        KTsKICB9CiAgYGBgCgogIEBtZXRob2QgYWN0aXZhdGUKICBAZm9yIEVtYmVy
        Lk5hdGl2ZUFycmF5CiAgQHN0YXRpYwogIEByZXR1cm4ge3ZvaWR9CiovCkVt
        YmVyLk5hdGl2ZUFycmF5LmFjdGl2YXRlID0gZnVuY3Rpb24oKSB7CiAgTmF0
        aXZlQXJyYXkuYXBwbHkoQXJyYXkucHJvdG90eXBlKTsKCiAgRW1iZXIuQSA9
        IGZ1bmN0aW9uKGFycikgeyByZXR1cm4gYXJyIHx8IFtdOyB9Owp9OwoKaWYg
        KEVtYmVyLkVYVEVORF9QUk9UT1RZUEVTID09PSB0cnVlIHx8IEVtYmVyLkVY
        VEVORF9QUk9UT1RZUEVTLkFycmF5KSB7CiAgRW1iZXIuTmF0aXZlQXJyYXku
        YWN0aXZhdGUoKTsKfQoKCn0pKCk7CgoKCihmdW5jdGlvbigpIHsKLyoqCkBt
        b2R1bGUgZW1iZXIKQHN1Ym1vZHVsZSBlbWJlci1ydW50aW1lCiovCgp2YXIg
        Z2V0ID0gRW1iZXIuZ2V0LCBzZXQgPSBFbWJlci5zZXQsIGd1aWRGb3IgPSBF
        bWJlci5ndWlkRm9yLCBpc05vbmUgPSBFbWJlci5pc05vbmUsIGZtdCA9IEVt
        YmVyLlN0cmluZy5mbXQ7CgovKioKICBBbiB1bm9yZGVyZWQgY29sbGVjdGlv
        biBvZiBvYmplY3RzLgoKICBBIFNldCB3b3JrcyBhIGJpdCBsaWtlIGFuIGFy
        cmF5IGV4Y2VwdCB0aGF0IGl0cyBpdGVtcyBhcmUgbm90IG9yZGVyZWQuIFlv
        dQogIGNhbiBjcmVhdGUgYSBzZXQgdG8gZWZmaWNpZW50bHkgdGVzdCBmb3Ig
        bWVtYmVyc2hpcCBmb3IgYW4gb2JqZWN0LiBZb3UgY2FuCiAgYWxzbyBpdGVy
        YXRlIHRocm91Z2ggYSBzZXQganVzdCBsaWtlIGFuIGFycmF5LCBldmVuIGFj
        Y2Vzc2luZyBvYmplY3RzIGJ5CiAgaW5kZXgsIGhvd2V2ZXIgdGhlcmUgaXMg
        bm8gZ3VhcmFudGVlIGFzIHRvIHRoZWlyIG9yZGVyLgoKICBBbGwgU2V0cyBh
        cmUgb2JzZXJ2YWJsZSB2aWEgdGhlIEVudW1lcmFibGUgT2JzZXJ2ZXIgQVBJ
        IC0gd2hpY2ggd29ya3MKICBvbiBhbnkgZW51bWVyYWJsZSBvYmplY3QgaW5j
        bHVkaW5nIGJvdGggU2V0cyBhbmQgQXJyYXlzLgoKICAjIyBDcmVhdGluZyBh
        IFNldAoKICBZb3UgY2FuIGNyZWF0ZSBhIHNldCBsaWtlIHlvdSB3b3VsZCBt
        b3N0IG9iamVjdHMgdXNpbmcKICBgbmV3IEVtYmVyLlNldCgpYC4gTW9zdCBu
        ZXcgc2V0cyB5b3UgY3JlYXRlIHdpbGwgYmUgZW1wdHksIGJ1dCB5b3UgY2Fu
        CiAgYWxzbyBpbml0aWFsaXplIHRoZSBzZXQgd2l0aCBzb21lIGNvbnRlbnQg
        YnkgcGFzc2luZyBhbiBhcnJheSBvciBvdGhlcgogIGVudW1lcmFibGUgb2Yg
        b2JqZWN0cyB0byB0aGUgY29uc3RydWN0b3IuCgogIEZpbmFsbHksIHlvdSBj
        YW4gcGFzcyBpbiBhbiBleGlzdGluZyBzZXQgYW5kIHRoZSBzZXQgd2lsbCBi
        ZSBjb3BpZWQuIFlvdQogIGNhbiBhbHNvIGNyZWF0ZSBhIGNvcHkgb2YgYSBz
        ZXQgYnkgY2FsbGluZyBgRW1iZXIuU2V0I2NvcHkoKWAuCgogIGBgYGphdmFz
        Y3JpcHQKICAvLyBjcmVhdGVzIGEgbmV3IGVtcHR5IHNldAogIHZhciBmb3Vu
        ZE5hbWVzID0gbmV3IEVtYmVyLlNldCgpOwoKICAvLyBjcmVhdGVzIGEgc2V0
        IHdpdGggZm91ciBuYW1lcyBpbiBpdC4KICB2YXIgbmFtZXMgPSBuZXcgRW1i
        ZXIuU2V0KFsiQ2hhcmxlcyIsICJUb20iLCAiSnVhbiIsICJBbGV4Il0pOyAv
        LyA6UAoKICAvLyBjcmVhdGVzIGEgY29weSBvZiB0aGUgbmFtZXMgc2V0Lgog
        IHZhciBuYW1lc0NvcHkgPSBuZXcgRW1iZXIuU2V0KG5hbWVzKTsKCiAgLy8g
        c2FtZSBhcyBhYm92ZS4KICB2YXIgYW5vdGhlck5hbWVzQ29weSA9IG5hbWVz
        LmNvcHkoKTsKICBgYGAKCiAgIyMgQWRkaW5nL1JlbW92aW5nIE9iamVjdHMK
        CiAgWW91IGdlbmVyYWxseSBhZGQgb3IgcmVtb3ZlIG9iamVjdHMgZnJvbSBh
        IHNldCB1c2luZyBgYWRkKClgIG9yCiAgYHJlbW92ZSgpYC4gWW91IGNhbiBh
        ZGQgYW55IHR5cGUgb2Ygb2JqZWN0IGluY2x1ZGluZyBwcmltaXRpdmVzIHN1
        Y2ggYXMKICBudW1iZXJzLCBzdHJpbmdzLCBhbmQgYm9vbGVhbnMuCgogIFVu
        bGlrZSBhcnJheXMsIG9iamVjdHMgY2FuIG9ubHkgZXhpc3Qgb25lIHRpbWUg
        aW4gYSBzZXQuIElmIHlvdSBjYWxsIGBhZGQoKWAKICBvbiBhIHNldCB3aXRo
        IHRoZSBzYW1lIG9iamVjdCBtdWx0aXBsZSB0aW1lcywgdGhlIG9iamVjdCB3
        aWxsIG9ubHkgYmUgYWRkZWQKICBvbmNlLiBMaWtld2lzZSwgY2FsbGluZyBg
        cmVtb3ZlKClgIHdpdGggdGhlIHNhbWUgb2JqZWN0IG11bHRpcGxlIHRpbWVz
        IHdpbGwKICByZW1vdmUgdGhlIG9iamVjdCB0aGUgZmlyc3QgdGltZSBhbmQg
        aGF2ZSBubyBlZmZlY3Qgb24gZnV0dXJlIGNhbGxzIHVudGlsCiAgeW91IGFk
        ZCB0aGUgb2JqZWN0IHRvIHRoZSBzZXQgYWdhaW4uCgogIE5PVEU6IFlvdSBj
        YW5ub3QgYWRkL3JlbW92ZSBgbnVsbGAgb3IgYHVuZGVmaW5lZGAgdG8gYSBz
        ZXQuIEFueSBhdHRlbXB0IHRvIGRvCiAgc28gd2lsbCBiZSBpZ25vcmVkLgoK
        ICBJbiBhZGRpdGlvbiB0byBhZGQvcmVtb3ZlIHlvdSBjYW4gYWxzbyBjYWxs
        IGBwdXNoKClgL2Bwb3AoKWAuIFB1c2ggYmVoYXZlcwogIGp1c3QgbGlrZSBg
        YWRkKClgIGJ1dCBgcG9wKClgLCB1bmxpa2UgYHJlbW92ZSgpYCB3aWxsIHBp
        Y2sgYW4gYXJiaXRyYXJ5CiAgb2JqZWN0LCByZW1vdmUgaXQgYW5kIHJldHVy
        biBpdC4gVGhpcyBpcyBhIGdvb2Qgd2F5IHRvIHVzZSBhIHNldCBhcyBhIGpv
        YgogIHF1ZXVlIHdoZW4geW91IGRvbid0IGNhcmUgd2hpY2ggb3JkZXIgdGhl
        IGpvYnMgYXJlIGV4ZWN1dGVkIGluLgoKICAjIyBUZXN0aW5nIGZvciBhbiBP
        YmplY3QKCiAgVG8gdGVzdCBmb3IgYW4gb2JqZWN0J3MgcHJlc2VuY2UgaW4g
        YSBzZXQgeW91IHNpbXBseSBjYWxsCiAgYEVtYmVyLlNldCNjb250YWlucygp
        YC4KCiAgIyMgT2JzZXJ2aW5nIGNoYW5nZXMKCiAgV2hlbiB1c2luZyBgRW1i
        ZXIuU2V0YCwgeW91IGNhbiBvYnNlcnZlIHRoZSBgIltdImAgcHJvcGVydHkg
        dG8gYmUKICBhbGVydGVkIHdoZW5ldmVyIHRoZSBjb250ZW50IGNoYW5nZXMu
        IFlvdSBjYW4gYWxzbyBhZGQgYW4gZW51bWVyYWJsZQogIG9ic2VydmVyIHRv
        IHRoZSBzZXQgdG8gYmUgbm90aWZpZWQgb2Ygc3BlY2lmaWMgb2JqZWN0cyB0
        aGF0IGFyZSBhZGRlZCBhbmQKICByZW1vdmVkIGZyb20gdGhlIHNldC4gU2Vl
        IFtFbWJlci5FbnVtZXJhYmxlXSgvYXBpL2NsYXNzZXMvRW1iZXIuRW51bWVy
        YWJsZS5odG1sKQogIGZvciBtb3JlIGluZm9ybWF0aW9uIG9uIGVudW1lcmFi
        bGVzLgoKICBUaGlzIGlzIG9mdGVuIHVuaGVscGZ1bC4gSWYgeW91IGFyZSBm
        aWx0ZXJpbmcgc2V0cyBvZiBvYmplY3RzLCBmb3IgaW5zdGFuY2UsCiAgaXQg
        aXMgdmVyeSBpbmVmZmljaWVudCB0byByZS1maWx0ZXIgYWxsIG9mIHRoZSBp
        dGVtcyBlYWNoIHRpbWUgdGhlIHNldAogIGNoYW5nZXMuIEl0IHdvdWxkIGJl
        IGJldHRlciBpZiB5b3UgY291bGQganVzdCBhZGp1c3QgdGhlIGZpbHRlcmVk
        IHNldCBiYXNlZAogIG9uIHdoYXQgd2FzIGNoYW5nZWQgb24gdGhlIG9yaWdp
        bmFsIHNldC4gVGhlIHNhbWUgaXNzdWUgYXBwbGllcyB0byBtZXJnaW5nCiAg
        c2V0cywgYXMgd2VsbC4KCiAgIyMgT3RoZXIgTWV0aG9kcwoKICBgRW1iZXIu
        U2V0YCBwcmltYXJ5IGltcGxlbWVudHMgb3RoZXIgbWl4aW4gQVBJcy4gRm9y
        IGEgY29tcGxldGUgcmVmZXJlbmNlCiAgb24gdGhlIG1ldGhvZHMgeW91IHdp
        bGwgdXNlIHdpdGggYEVtYmVyLlNldGAsIHBsZWFzZSBjb25zdWx0IHRoZXNl
        IG1peGlucy4KICBUaGUgbW9zdCB1c2VmdWwgb25lcyB3aWxsIGJlIGBFbWJl
        ci5FbnVtZXJhYmxlYCBhbmQKICBgRW1iZXIuTXV0YWJsZUVudW1lcmFibGVg
        IHdoaWNoIGltcGxlbWVudCBtb3N0IG9mIHRoZSBjb21tb24gaXRlcmF0b3IK
        ICBtZXRob2RzIHlvdSBhcmUgdXNlZCB0byBvbiBBcnJheS4KCiAgTm90ZSB0
        aGF0IHlvdSBjYW4gYWxzbyB1c2UgdGhlIGBFbWJlci5Db3B5YWJsZWAgYW5k
        IGBFbWJlci5GcmVlemFibGVgCiAgQVBJcyBvbiBgRW1iZXIuU2V0YCBhcyB3
        ZWxsLiBPbmNlIGEgc2V0IGlzIGZyb3plbiBpdCBjYW4gbm8gbG9uZ2VyIGJl
        CiAgbW9kaWZpZWQuIFRoZSBiZW5lZml0IG9mIHRoaXMgaXMgdGhhdCB3aGVu
        IHlvdSBjYWxsIGBmcm96ZW5Db3B5KClgIG9uIGl0LAogIEVtYmVyIHdpbGwg
        YXZvaWQgbWFraW5nIGNvcGllcyBvZiB0aGUgc2V0LiBUaGlzIGFsbG93cyB5
        b3UgdG8gd3JpdGUKICBjb2RlIHRoYXQgY2FuIGtub3cgd2l0aCBjZXJ0YWlu
        dHkgd2hlbiB0aGUgdW5kZXJseWluZyBzZXQgZGF0YSB3aWxsIG9yCiAgd2ls
        bCBub3QgYmUgbW9kaWZpZWQuCgogIEBjbGFzcyBTZXQKICBAbmFtZXNwYWNl
        IEVtYmVyCiAgQGV4dGVuZHMgRW1iZXIuQ29yZU9iamVjdAogIEB1c2VzIEVt
        YmVyLk11dGFibGVFbnVtZXJhYmxlCiAgQHVzZXMgRW1iZXIuQ29weWFibGUK
        ICBAdXNlcyBFbWJlci5GcmVlemFibGUKICBAc2luY2UgRW1iZXIgMC45Ciov
        CkVtYmVyLlNldCA9IEVtYmVyLkNvcmVPYmplY3QuZXh0ZW5kKEVtYmVyLk11
        dGFibGVFbnVtZXJhYmxlLCBFbWJlci5Db3B5YWJsZSwgRW1iZXIuRnJlZXph
        YmxlLAogIHsKCiAgLy8gLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4u
        Li4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLgogIC8vIElNUExFTUVOVCBF
        TlVNRVJBQkxFIEFQSVMKICAvLwoKICAvKioKICAgIFRoaXMgcHJvcGVydHkg
        d2lsbCBjaGFuZ2UgYXMgdGhlIG51bWJlciBvZiBvYmplY3RzIGluIHRoZSBz
        ZXQgY2hhbmdlcy4KCiAgICBAcHJvcGVydHkgbGVuZ3RoCiAgICBAdHlwZSBu
        dW1iZXIKICAgIEBkZWZhdWx0IDAKICAqLwogIGxlbmd0aDogMCwKCiAgLyoq
        CiAgICBDbGVhcnMgdGhlIHNldC4gVGhpcyBpcyB1c2VmdWwgaWYgeW91IHdh
        bnQgdG8gcmV1c2UgYW4gZXhpc3Rpbmcgc2V0CiAgICB3aXRob3V0IGhhdmlu
        ZyB0byByZWNyZWF0ZSBpdC4KCiAgICBgYGBqYXZhc2NyaXB0CiAgICB2YXIg
        Y29sb3JzID0gbmV3IEVtYmVyLlNldChbInJlZCIsICJncmVlbiIsICJibHVl
        Il0pOwogICAgY29sb3JzLmxlbmd0aDsgIC8vIDMKICAgIGNvbG9ycy5jbGVh
        cigpOwogICAgY29sb3JzLmxlbmd0aDsgIC8vIDAKICAgIGBgYAoKICAgIEBt
        ZXRob2QgY2xlYXIKICAgIEByZXR1cm4ge0VtYmVyLlNldH0gQW4gZW1wdHkg
        U2V0CiAgKi8KICBjbGVhcjogZnVuY3Rpb24oKSB7CiAgICBpZiAodGhpcy5p
        c0Zyb3plbikgeyB0aHJvdyBuZXcgRW1iZXIuRXJyb3IoRW1iZXIuRlJPWkVO
        X0VSUk9SKTsgfQoKICAgIHZhciBsZW4gPSBnZXQodGhpcywgJ2xlbmd0aCcp
        OwogICAgaWYgKGxlbiA9PT0gMCkgeyByZXR1cm4gdGhpczsgfQoKICAgIHZh
        ciBndWlkOwoKICAgIHRoaXMuZW51bWVyYWJsZUNvbnRlbnRXaWxsQ2hhbmdl
        KGxlbiwgMCk7CiAgICBFbWJlci5wcm9wZXJ0eVdpbGxDaGFuZ2UodGhpcywg
        J2ZpcnN0T2JqZWN0Jyk7CiAgICBFbWJlci5wcm9wZXJ0eVdpbGxDaGFuZ2Uo
        dGhpcywgJ2xhc3RPYmplY3QnKTsKCiAgICBmb3IgKHZhciBpPTA7IGkgPCBs
        ZW47IGkrKykgewogICAgICBndWlkID0gZ3VpZEZvcih0aGlzW2ldKTsKICAg
        ICAgZGVsZXRlIHRoaXNbZ3VpZF07CiAgICAgIGRlbGV0ZSB0aGlzW2ldOwog
        ICAgfQoKICAgIHNldCh0aGlzLCAnbGVuZ3RoJywgMCk7CgogICAgRW1iZXIu
        cHJvcGVydHlEaWRDaGFuZ2UodGhpcywgJ2ZpcnN0T2JqZWN0Jyk7CiAgICBF
        bWJlci5wcm9wZXJ0eURpZENoYW5nZSh0aGlzLCAnbGFzdE9iamVjdCcpOwog
        ICAgdGhpcy5lbnVtZXJhYmxlQ29udGVudERpZENoYW5nZShsZW4sIDApOwoK
        ICAgIHJldHVybiB0aGlzOwogIH0sCgogIC8qKgogICAgUmV0dXJucyB0cnVl
        IGlmIHRoZSBwYXNzZWQgb2JqZWN0IGlzIGFsc28gYW4gZW51bWVyYWJsZSB0
        aGF0IGNvbnRhaW5zIHRoZQogICAgc2FtZSBvYmplY3RzIGFzIHRoZSByZWNl
        aXZlci4KCiAgICBgYGBqYXZhc2NyaXB0CiAgICB2YXIgY29sb3JzID0gWyJy
        ZWQiLCAiZ3JlZW4iLCAiYmx1ZSJdLAogICAgICAgIHNhbWVfY29sb3JzID0g
        bmV3IEVtYmVyLlNldChjb2xvcnMpOwoKICAgIHNhbWVfY29sb3JzLmlzRXF1
        YWwoY29sb3JzKTsgICAgICAgICAgICAgICAvLyB0cnVlCiAgICBzYW1lX2Nv
        bG9ycy5pc0VxdWFsKFsicHVycGxlIiwgImJyb3duIl0pOyAgLy8gZmFsc2UK
        ICAgIGBgYAoKICAgIEBtZXRob2QgaXNFcXVhbAogICAgQHBhcmFtIHtFbWJl
        ci5TZXR9IG9iaiB0aGUgb3RoZXIgb2JqZWN0LgogICAgQHJldHVybiB7Qm9v
        bGVhbn0KICAqLwogIGlzRXF1YWw6IGZ1bmN0aW9uKG9iaikgewogICAgLy8g
        ZmFpbCBmYXN0CiAgICBpZiAoIUVtYmVyLkVudW1lcmFibGUuZGV0ZWN0KG9i
        aikpIHJldHVybiBmYWxzZTsKCiAgICB2YXIgbG9jID0gZ2V0KHRoaXMsICds
        ZW5ndGgnKTsKICAgIGlmIChnZXQob2JqLCAnbGVuZ3RoJykgIT09IGxvYykg
        cmV0dXJuIGZhbHNlOwoKICAgIHdoaWxlKC0tbG9jID49IDApIHsKICAgICAg
        aWYgKCFvYmouY29udGFpbnModGhpc1tsb2NdKSkgcmV0dXJuIGZhbHNlOwog
        ICAgfQoKICAgIHJldHVybiB0cnVlOwogIH0sCgogIC8qKgogICAgQWRkcyBh
        biBvYmplY3QgdG8gdGhlIHNldC4gT25seSBub24tYG51bGxgIG9iamVjdHMg
        Y2FuIGJlIGFkZGVkIHRvIGEgc2V0CiAgICBhbmQgdGhvc2UgY2FuIG9ubHkg
        YmUgYWRkZWQgb25jZS4gSWYgdGhlIG9iamVjdCBpcyBhbHJlYWR5IGluIHRo
        ZSBzZXQgb3IKICAgIHRoZSBwYXNzZWQgdmFsdWUgaXMgbnVsbCB0aGlzIG1l
        dGhvZCB3aWxsIGhhdmUgbm8gZWZmZWN0LgoKICAgIFRoaXMgaXMgYW4gYWxp
        YXMgZm9yIGBFbWJlci5NdXRhYmxlRW51bWVyYWJsZS5hZGRPYmplY3QoKWAu
        CgogICAgYGBgamF2YXNjcmlwdAogICAgdmFyIGNvbG9ycyA9IG5ldyBFbWJl
        ci5TZXQoKTsKICAgIGNvbG9ycy5hZGQoImJsdWUiKTsgICAgIC8vIFsiYmx1
        ZSJdCiAgICBjb2xvcnMuYWRkKCJibHVlIik7ICAgICAvLyBbImJsdWUiXQog
        ICAgY29sb3JzLmFkZCgicmVkIik7ICAgICAgLy8gWyJibHVlIiwgInJlZCJd
        CiAgICBjb2xvcnMuYWRkKG51bGwpOyAgICAgICAvLyBbImJsdWUiLCAicmVk
        Il0KICAgIGNvbG9ycy5hZGQodW5kZWZpbmVkKTsgIC8vIFsiYmx1ZSIsICJy
        ZWQiXQogICAgYGBgCgogICAgQG1ldGhvZCBhZGQKICAgIEBwYXJhbSB7T2Jq
        ZWN0fSBvYmogVGhlIG9iamVjdCB0byBhZGQuCiAgICBAcmV0dXJuIHtFbWJl
        ci5TZXR9IFRoZSBzZXQgaXRzZWxmLgogICovCiAgYWRkOiBFbWJlci5hbGlh
        c01ldGhvZCgnYWRkT2JqZWN0JyksCgogIC8qKgogICAgUmVtb3ZlcyB0aGUg
        b2JqZWN0IGZyb20gdGhlIHNldCBpZiBpdCBpcyBmb3VuZC4gSWYgeW91IHBh
        c3MgYSBgbnVsbGAgdmFsdWUKICAgIG9yIGFuIG9iamVjdCB0aGF0IGlzIGFs
        cmVhZHkgbm90IGluIHRoZSBzZXQsIHRoaXMgbWV0aG9kIHdpbGwgaGF2ZSBu
        bwogICAgZWZmZWN0LiBUaGlzIGlzIGFuIGFsaWFzIGZvciBgRW1iZXIuTXV0
        YWJsZUVudW1lcmFibGUucmVtb3ZlT2JqZWN0KClgLgoKICAgIGBgYGphdmFz
        Y3JpcHQKICAgIHZhciBjb2xvcnMgPSBuZXcgRW1iZXIuU2V0KFsicmVkIiwg
        ImdyZWVuIiwgImJsdWUiXSk7CiAgICBjb2xvcnMucmVtb3ZlKCJyZWQiKTsg
        ICAgIC8vIFsiYmx1ZSIsICJncmVlbiJdCiAgICBjb2xvcnMucmVtb3ZlKCJw
        dXJwbGUiKTsgIC8vIFsiYmx1ZSIsICJncmVlbiJdCiAgICBjb2xvcnMucmVt
        b3ZlKG51bGwpOyAgICAgIC8vIFsiYmx1ZSIsICJncmVlbiJdCiAgICBgYGAK
        CiAgICBAbWV0aG9kIHJlbW92ZQogICAgQHBhcmFtIHtPYmplY3R9IG9iaiBU
        aGUgb2JqZWN0IHRvIHJlbW92ZQogICAgQHJldHVybiB7RW1iZXIuU2V0fSBU
        aGUgc2V0IGl0c2VsZi4KICAqLwogIHJlbW92ZTogRW1iZXIuYWxpYXNNZXRo
        b2QoJ3JlbW92ZU9iamVjdCcpLAoKICAvKioKICAgIFJlbW92ZXMgdGhlIGxh
        c3QgZWxlbWVudCBmcm9tIHRoZSBzZXQgYW5kIHJldHVybnMgaXQsIG9yIGBu
        dWxsYCBpZiBpdCdzIGVtcHR5LgoKICAgIGBgYGphdmFzY3JpcHQKICAgIHZh
        ciBjb2xvcnMgPSBuZXcgRW1iZXIuU2V0KFsiZ3JlZW4iLCAiYmx1ZSJdKTsK
        ICAgIGNvbG9ycy5wb3AoKTsgIC8vICJibHVlIgogICAgY29sb3JzLnBvcCgp
        OyAgLy8gImdyZWVuIgogICAgY29sb3JzLnBvcCgpOyAgLy8gbnVsbAogICAg
        YGBgCgogICAgQG1ldGhvZCBwb3AKICAgIEByZXR1cm4ge09iamVjdH0gVGhl
        IHJlbW92ZWQgb2JqZWN0IGZyb20gdGhlIHNldCBvciBudWxsLgogICovCiAg
        cG9wOiBmdW5jdGlvbigpIHsKICAgIGlmIChnZXQodGhpcywgJ2lzRnJvemVu
        JykpIHRocm93IG5ldyBFbWJlci5FcnJvcihFbWJlci5GUk9aRU5fRVJST1Ip
        OwogICAgdmFyIG9iaiA9IHRoaXMubGVuZ3RoID4gMCA/IHRoaXNbdGhpcy5s
        ZW5ndGgtMV0gOiBudWxsOwogICAgdGhpcy5yZW1vdmUob2JqKTsKICAgIHJl
        dHVybiBvYmo7CiAgfSwKCiAgLyoqCiAgICBJbnNlcnRzIHRoZSBnaXZlbiBv
        YmplY3Qgb24gdG8gdGhlIGVuZCBvZiB0aGUgc2V0LiBJdCByZXR1cm5zCiAg
        ICB0aGUgc2V0IGl0c2VsZi4KCiAgICBUaGlzIGlzIGFuIGFsaWFzIGZvciBg
        RW1iZXIuTXV0YWJsZUVudW1lcmFibGUuYWRkT2JqZWN0KClgLgoKICAgIGBg
        YGphdmFzY3JpcHQKICAgIHZhciBjb2xvcnMgPSBuZXcgRW1iZXIuU2V0KCk7
        CiAgICBjb2xvcnMucHVzaCgicmVkIik7ICAgLy8gWyJyZWQiXQogICAgY29s
        b3JzLnB1c2goImdyZWVuIik7IC8vIFsicmVkIiwgImdyZWVuIl0KICAgIGNv
        bG9ycy5wdXNoKCJibHVlIik7ICAvLyBbInJlZCIsICJncmVlbiIsICJibHVl
        Il0KICAgIGBgYAoKICAgIEBtZXRob2QgcHVzaAogICAgQHJldHVybiB7RW1i
        ZXIuU2V0fSBUaGUgc2V0IGl0c2VsZi4KICAqLwogIHB1c2g6IEVtYmVyLmFs
        aWFzTWV0aG9kKCdhZGRPYmplY3QnKSwKCiAgLyoqCiAgICBSZW1vdmVzIHRo
        ZSBsYXN0IGVsZW1lbnQgZnJvbSB0aGUgc2V0IGFuZCByZXR1cm5zIGl0LCBv
        ciBgbnVsbGAgaWYgaXQncyBlbXB0eS4KCiAgICBUaGlzIGlzIGFuIGFsaWFz
        IGZvciBgRW1iZXIuU2V0LnBvcCgpYC4KCiAgICBgYGBqYXZhc2NyaXB0CiAg
        ICB2YXIgY29sb3JzID0gbmV3IEVtYmVyLlNldChbImdyZWVuIiwgImJsdWUi
        XSk7CiAgICBjb2xvcnMuc2hpZnQoKTsgIC8vICJibHVlIgogICAgY29sb3Jz
        LnNoaWZ0KCk7ICAvLyAiZ3JlZW4iCiAgICBjb2xvcnMuc2hpZnQoKTsgIC8v
        IG51bGwKICAgIGBgYAoKICAgIEBtZXRob2Qgc2hpZnQKICAgIEByZXR1cm4g
        e09iamVjdH0gVGhlIHJlbW92ZWQgb2JqZWN0IGZyb20gdGhlIHNldCBvciBu
        dWxsLgogICovCiAgc2hpZnQ6IEVtYmVyLmFsaWFzTWV0aG9kKCdwb3AnKSwK
        CiAgLyoqCiAgICBJbnNlcnRzIHRoZSBnaXZlbiBvYmplY3Qgb24gdG8gdGhl
        IGVuZCBvZiB0aGUgc2V0LiBJdCByZXR1cm5zCiAgICB0aGUgc2V0IGl0c2Vs
        Zi4KCiAgICBUaGlzIGlzIGFuIGFsaWFzIG9mIGBFbWJlci5TZXQucHVzaCgp
        YAoKICAgIGBgYGphdmFzY3JpcHQKICAgIHZhciBjb2xvcnMgPSBuZXcgRW1i
        ZXIuU2V0KCk7CiAgICBjb2xvcnMudW5zaGlmdCgicmVkIik7ICAgIC8vIFsi
        cmVkIl0KICAgIGNvbG9ycy51bnNoaWZ0KCJncmVlbiIpOyAgLy8gWyJyZWQi
        LCAiZ3JlZW4iXQogICAgY29sb3JzLnVuc2hpZnQoImJsdWUiKTsgICAvLyBb
        InJlZCIsICJncmVlbiIsICJibHVlIl0KICAgIGBgYAoKICAgIEBtZXRob2Qg
        dW5zaGlmdAogICAgQHJldHVybiB7RW1iZXIuU2V0fSBUaGUgc2V0IGl0c2Vs
        Zi4KICAqLwogIHVuc2hpZnQ6IEVtYmVyLmFsaWFzTWV0aG9kKCdwdXNoJyks
        CgogIC8qKgogICAgQWRkcyBlYWNoIG9iamVjdCBpbiB0aGUgcGFzc2VkIGVu
        dW1lcmFibGUgdG8gdGhlIHNldC4KCiAgICBUaGlzIGlzIGFuIGFsaWFzIG9m
        IGBFbWJlci5NdXRhYmxlRW51bWVyYWJsZS5hZGRPYmplY3RzKClgCgogICAg
        YGBgamF2YXNjcmlwdAogICAgdmFyIGNvbG9ycyA9IG5ldyBFbWJlci5TZXQo
        KTsKICAgIGNvbG9ycy5hZGRFYWNoKFsicmVkIiwgImdyZWVuIiwgImJsdWUi
        XSk7ICAvLyBbInJlZCIsICJncmVlbiIsICJibHVlIl0KICAgIGBgYAoKICAg
        IEBtZXRob2QgYWRkRWFjaAogICAgQHBhcmFtIHtFbWJlci5FbnVtZXJhYmxl
        fSBvYmplY3RzIHRoZSBvYmplY3RzIHRvIGFkZC4KICAgIEByZXR1cm4ge0Vt
        YmVyLlNldH0gVGhlIHNldCBpdHNlbGYuCiAgKi8KICBhZGRFYWNoOiBFbWJl
        ci5hbGlhc01ldGhvZCgnYWRkT2JqZWN0cycpLAoKICAvKioKICAgIFJlbW92
        ZXMgZWFjaCBvYmplY3QgaW4gdGhlIHBhc3NlZCBlbnVtZXJhYmxlIHRvIHRo
        ZSBzZXQuCgogICAgVGhpcyBpcyBhbiBhbGlhcyBvZiBgRW1iZXIuTXV0YWJs
        ZUVudW1lcmFibGUucmVtb3ZlT2JqZWN0cygpYAoKICAgIGBgYGphdmFzY3Jp
        cHQKICAgIHZhciBjb2xvcnMgPSBuZXcgRW1iZXIuU2V0KFsicmVkIiwgImdy
        ZWVuIiwgImJsdWUiXSk7CiAgICBjb2xvcnMucmVtb3ZlRWFjaChbInJlZCIs
        ICJibHVlIl0pOyAgLy8gIFsiZ3JlZW4iXQogICAgYGBgCgogICAgQG1ldGhv
        ZCByZW1vdmVFYWNoCiAgICBAcGFyYW0ge0VtYmVyLkVudW1lcmFibGV9IG9i
        amVjdHMgdGhlIG9iamVjdHMgdG8gcmVtb3ZlLgogICAgQHJldHVybiB7RW1i
        ZXIuU2V0fSBUaGUgc2V0IGl0c2VsZi4KICAqLwogIHJlbW92ZUVhY2g6IEVt
        YmVyLmFsaWFzTWV0aG9kKCdyZW1vdmVPYmplY3RzJyksCgogIC8vIC4uLi4u
        Li4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4u
        Li4uLi4uLi4KICAvLyBQUklWQVRFIEVOVU1FUkFCTEUgU1VQUE9SVAogIC8v
        CgogIGluaXQ6IGZ1bmN0aW9uKGl0ZW1zKSB7CiAgICB0aGlzLl9zdXBlcigp
        OwogICAgaWYgKGl0ZW1zKSB0aGlzLmFkZE9iamVjdHMoaXRlbXMpOwogIH0s
        CgogIC8vIGltcGxlbWVudCBFbWJlci5FbnVtZXJhYmxlCiAgbmV4dE9iamVj
        dDogZnVuY3Rpb24oaWR4KSB7CiAgICByZXR1cm4gdGhpc1tpZHhdOwogIH0s
        CgogIC8vIG1vcmUgb3B0aW1pemVkIHZlcnNpb24KICBmaXJzdE9iamVjdDog
        RW1iZXIuY29tcHV0ZWQoZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gdGhpcy5s
        ZW5ndGggPiAwID8gdGhpc1swXSA6IHVuZGVmaW5lZDsKICB9KSwKCiAgLy8g
        bW9yZSBvcHRpbWl6ZWQgdmVyc2lvbgogIGxhc3RPYmplY3Q6IEVtYmVyLmNv
        bXB1dGVkKGZ1bmN0aW9uKCkgewogICAgcmV0dXJuIHRoaXMubGVuZ3RoID4g
        MCA/IHRoaXNbdGhpcy5sZW5ndGgtMV0gOiB1bmRlZmluZWQ7CiAgfSksCgog
        IC8vIGltcGxlbWVudHMgRW1iZXIuTXV0YWJsZUVudW1lcmFibGUKICBhZGRP
        YmplY3Q6IGZ1bmN0aW9uKG9iaikgewogICAgaWYgKGdldCh0aGlzLCAnaXNG
        cm96ZW4nKSkgdGhyb3cgbmV3IEVtYmVyLkVycm9yKEVtYmVyLkZST1pFTl9F
        UlJPUik7CiAgICBpZiAoaXNOb25lKG9iaikpIHJldHVybiB0aGlzOyAvLyBu
        b3RoaW5nIHRvIGRvCgogICAgdmFyIGd1aWQgPSBndWlkRm9yKG9iaiksCiAg
        ICAgICAgaWR4ICA9IHRoaXNbZ3VpZF0sCiAgICAgICAgbGVuICA9IGdldCh0
        aGlzLCAnbGVuZ3RoJyksCiAgICAgICAgYWRkZWQgOwoKICAgIGlmIChpZHg+
        PTAgJiYgaWR4PGxlbiAmJiAodGhpc1tpZHhdID09PSBvYmopKSByZXR1cm4g
        dGhpczsgLy8gYWRkZWQKCiAgICBhZGRlZCA9IFtvYmpdOwoKICAgIHRoaXMu
        ZW51bWVyYWJsZUNvbnRlbnRXaWxsQ2hhbmdlKG51bGwsIGFkZGVkKTsKICAg
        IEVtYmVyLnByb3BlcnR5V2lsbENoYW5nZSh0aGlzLCAnbGFzdE9iamVjdCcp
        OwoKICAgIGxlbiA9IGdldCh0aGlzLCAnbGVuZ3RoJyk7CiAgICB0aGlzW2d1
        aWRdID0gbGVuOwogICAgdGhpc1tsZW5dID0gb2JqOwogICAgc2V0KHRoaXMs
        ICdsZW5ndGgnLCBsZW4rMSk7CgogICAgRW1iZXIucHJvcGVydHlEaWRDaGFu
        Z2UodGhpcywgJ2xhc3RPYmplY3QnKTsKICAgIHRoaXMuZW51bWVyYWJsZUNv
        bnRlbnREaWRDaGFuZ2UobnVsbCwgYWRkZWQpOwoKICAgIHJldHVybiB0aGlz
        OwogIH0sCgogIC8vIGltcGxlbWVudHMgRW1iZXIuTXV0YWJsZUVudW1lcmFi
        bGUKICByZW1vdmVPYmplY3Q6IGZ1bmN0aW9uKG9iaikgewogICAgaWYgKGdl
        dCh0aGlzLCAnaXNGcm96ZW4nKSkgdGhyb3cgbmV3IEVtYmVyLkVycm9yKEVt
        YmVyLkZST1pFTl9FUlJPUik7CiAgICBpZiAoaXNOb25lKG9iaikpIHJldHVy
        biB0aGlzOyAvLyBub3RoaW5nIHRvIGRvCgogICAgdmFyIGd1aWQgPSBndWlk
        Rm9yKG9iaiksCiAgICAgICAgaWR4ICA9IHRoaXNbZ3VpZF0sCiAgICAgICAg
        bGVuID0gZ2V0KHRoaXMsICdsZW5ndGgnKSwKICAgICAgICBpc0ZpcnN0ID0g
        aWR4ID09PSAwLAogICAgICAgIGlzTGFzdCA9IGlkeCA9PT0gbGVuLTEsCiAg
        ICAgICAgbGFzdCwgcmVtb3ZlZDsKCgogICAgaWYgKGlkeD49MCAmJiBpZHg8
        bGVuICYmICh0aGlzW2lkeF0gPT09IG9iaikpIHsKICAgICAgcmVtb3ZlZCA9
        IFtvYmpdOwoKICAgICAgdGhpcy5lbnVtZXJhYmxlQ29udGVudFdpbGxDaGFu
        Z2UocmVtb3ZlZCwgbnVsbCk7CiAgICAgIGlmIChpc0ZpcnN0KSB7IEVtYmVy
        LnByb3BlcnR5V2lsbENoYW5nZSh0aGlzLCAnZmlyc3RPYmplY3QnKTsgfQog
        ICAgICBpZiAoaXNMYXN0KSAgeyBFbWJlci5wcm9wZXJ0eVdpbGxDaGFuZ2Uo
        dGhpcywgJ2xhc3RPYmplY3QnKTsgfQoKICAgICAgLy8gc3dhcCBpdGVtcyAt
        IGJhc2ljYWxseSBtb3ZlIHRoZSBpdGVtIHRvIHRoZSBlbmQgc28gaXQgY2Fu
        IGJlIHJlbW92ZWQKICAgICAgaWYgKGlkeCA8IGxlbi0xKSB7CiAgICAgICAg
        bGFzdCA9IHRoaXNbbGVuLTFdOwogICAgICAgIHRoaXNbaWR4XSA9IGxhc3Q7
        CiAgICAgICAgdGhpc1tndWlkRm9yKGxhc3QpXSA9IGlkeDsKICAgICAgfQoK
        ICAgICAgZGVsZXRlIHRoaXNbZ3VpZF07CiAgICAgIGRlbGV0ZSB0aGlzW2xl
        bi0xXTsKICAgICAgc2V0KHRoaXMsICdsZW5ndGgnLCBsZW4tMSk7CgogICAg
        ICBpZiAoaXNGaXJzdCkgeyBFbWJlci5wcm9wZXJ0eURpZENoYW5nZSh0aGlz
        LCAnZmlyc3RPYmplY3QnKTsgfQogICAgICBpZiAoaXNMYXN0KSAgeyBFbWJl
        ci5wcm9wZXJ0eURpZENoYW5nZSh0aGlzLCAnbGFzdE9iamVjdCcpOyB9CiAg
        ICAgIHRoaXMuZW51bWVyYWJsZUNvbnRlbnREaWRDaGFuZ2UocmVtb3ZlZCwg
        bnVsbCk7CiAgICB9CgogICAgcmV0dXJuIHRoaXM7CiAgfSwKCiAgLy8gb3B0
        aW1pemVkIHZlcnNpb24KICBjb250YWluczogZnVuY3Rpb24ob2JqKSB7CiAg
        ICByZXR1cm4gdGhpc1tndWlkRm9yKG9iaildPj0wOwogIH0sCgogIGNvcHk6
        IGZ1bmN0aW9uKCkgewogICAgdmFyIEMgPSB0aGlzLmNvbnN0cnVjdG9yLCBy
        ZXQgPSBuZXcgQygpLCBsb2MgPSBnZXQodGhpcywgJ2xlbmd0aCcpOwogICAg
        c2V0KHJldCwgJ2xlbmd0aCcsIGxvYyk7CiAgICB3aGlsZSgtLWxvYz49MCkg
        ewogICAgICByZXRbbG9jXSA9IHRoaXNbbG9jXTsKICAgICAgcmV0W2d1aWRG
        b3IodGhpc1tsb2NdKV0gPSBsb2M7CiAgICB9CiAgICByZXR1cm4gcmV0Owog
        IH0sCgogIHRvU3RyaW5nOiBmdW5jdGlvbigpIHsKICAgIHZhciBsZW4gPSB0
        aGlzLmxlbmd0aCwgaWR4LCBhcnJheSA9IFtdOwogICAgZm9yKGlkeCA9IDA7
        IGlkeCA8IGxlbjsgaWR4KyspIHsKICAgICAgYXJyYXlbaWR4XSA9IHRoaXNb
        aWR4XTsKICAgIH0KICAgIHJldHVybiBmbXQoIkVtYmVyLlNldDwlQD4iLCBb
        YXJyYXkuam9pbignLCcpXSk7CiAgfQoKfSk7Cgp9KSgpOwoKCgooZnVuY3Rp
        b24oKSB7CnZhciBEZWZlcnJlZE1peGluID0gRW1iZXIuRGVmZXJyZWRNaXhp
        biwgLy8gbWl4aW5zL2RlZmVycmVkCiAgICBnZXQgPSBFbWJlci5nZXQ7Cgp2
        YXIgRGVmZXJyZWQgPSBFbWJlci5PYmplY3QuZXh0ZW5kKERlZmVycmVkTWl4
        aW4pOwoKRGVmZXJyZWQucmVvcGVuQ2xhc3MoewogIHByb21pc2U6IGZ1bmN0
        aW9uKGNhbGxiYWNrLCBiaW5kaW5nKSB7CiAgICB2YXIgZGVmZXJyZWQgPSBE
        ZWZlcnJlZC5jcmVhdGUoKTsKICAgIGNhbGxiYWNrLmNhbGwoYmluZGluZywg
        ZGVmZXJyZWQpOwogICAgcmV0dXJuIGRlZmVycmVkOwogIH0KfSk7CgpFbWJl
        ci5EZWZlcnJlZCA9IERlZmVycmVkOwoKfSkoKTsKCgoKKGZ1bmN0aW9uKCkg
        ewp2YXIgZm9yRWFjaCA9IEVtYmVyLkFycmF5UG9seWZpbGxzLmZvckVhY2g7
        CgovKioKICBAbW9kdWxlIGVtYmVyCiAgQHN1Ym1vZHVsZSBlbWJlci1ydW50
        aW1lCiovCgp2YXIgbG9hZEhvb2tzID0gRW1iZXIuRU5WLkVNQkVSX0xPQURf
        SE9PS1MgfHwge307CnZhciBsb2FkZWQgPSB7fTsKCi8qKgogIERldGVjdHMg
        d2hlbiBhIHNwZWNpZmljIHBhY2thZ2Ugb2YgRW1iZXIgKGUuZy4gJ0VtYmVy
        LkhhbmRsZWJhcnMnKQogIGhhcyBmdWxseSBsb2FkZWQgYW5kIGlzIGF2YWls
        YWJsZSBmb3IgZXh0ZW5zaW9uLgoKICBUaGUgcHJvdmlkZWQgYGNhbGxiYWNr
        YCB3aWxsIGJlIGNhbGxlZCB3aXRoIHRoZSBgbmFtZWAgcGFzc2VkCiAgcmVz
        b2x2ZWQgZnJvbSBhIHN0cmluZyBpbnRvIHRoZSBvYmplY3Q6CgogIGBgYCBq
        YXZhc2NyaXB0CiAgRW1iZXIub25Mb2FkKCdFbWJlci5IYW5kbGViYXJzJyBm
        dW5jdGlvbihoYmFycyl7CiAgICBoYmFycy5yZWdpc3RlckhlbHBlciguLi4p
        OwogIH0pOwogIGBgYAoKICBAbWV0aG9kIG9uTG9hZAogIEBmb3IgRW1iZXIK
        ICBAcGFyYW0gbmFtZSB7U3RyaW5nfSBuYW1lIG9mIGhvb2sKICBAcGFyYW0g
        Y2FsbGJhY2sge0Z1bmN0aW9ufSBjYWxsYmFjayB0byBiZSBjYWxsZWQKKi8K
        RW1iZXIub25Mb2FkID0gZnVuY3Rpb24obmFtZSwgY2FsbGJhY2spIHsKICB2
        YXIgb2JqZWN0OwoKICBsb2FkSG9va3NbbmFtZV0gPSBsb2FkSG9va3NbbmFt
        ZV0gfHwgRW1iZXIuQSgpOwogIGxvYWRIb29rc1tuYW1lXS5wdXNoT2JqZWN0
        KGNhbGxiYWNrKTsKCiAgaWYgKG9iamVjdCA9IGxvYWRlZFtuYW1lXSkgewog
        ICAgY2FsbGJhY2sob2JqZWN0KTsKICB9Cn07CgovKioKICBDYWxsZWQgd2hl
        biBhbiBFbWJlci5qcyBwYWNrYWdlIChlLmcgRW1iZXIuSGFuZGxlYmFycykg
        aGFzIGZpbmlzaGVkCiAgbG9hZGluZy4gVHJpZ2dlcnMgYW55IGNhbGxiYWNr
        cyByZWdpc3RlcmVkIGZvciB0aGlzIGV2ZW50LgoKICBAbWV0aG9kIHJ1bkxv
        YWRIb29rcwogIEBmb3IgRW1iZXIKICBAcGFyYW0gbmFtZSB7U3RyaW5nfSBu
        YW1lIG9mIGhvb2sKICBAcGFyYW0gb2JqZWN0IHtPYmplY3R9IG9iamVjdCB0
        byBwYXNzIHRvIGNhbGxiYWNrcwoqLwpFbWJlci5ydW5Mb2FkSG9va3MgPSBm
        dW5jdGlvbihuYW1lLCBvYmplY3QpIHsKICBsb2FkZWRbbmFtZV0gPSBvYmpl
        Y3Q7CgogIGlmIChsb2FkSG9va3NbbmFtZV0pIHsKICAgIGZvckVhY2guY2Fs
        bChsb2FkSG9va3NbbmFtZV0sIGZ1bmN0aW9uKGNhbGxiYWNrKSB7CiAgICAg
        IGNhbGxiYWNrKG9iamVjdCk7CiAgICB9KTsKICB9Cn07Cgp9KSgpOwoKCgoo
        ZnVuY3Rpb24oKSB7Cgp9KSgpOwoKCgooZnVuY3Rpb24oKSB7CnZhciBnZXQg
        PSBFbWJlci5nZXQ7CgovKioKQG1vZHVsZSBlbWJlcgpAc3VibW9kdWxlIGVt
        YmVyLXJ1bnRpbWUKKi8KCi8qKgogIGBFbWJlci5Db250cm9sbGVyTWl4aW5g
        IHByb3ZpZGVzIGEgc3RhbmRhcmQgaW50ZXJmYWNlIGZvciBhbGwgY2xhc3Nl
        cyB0aGF0CiAgY29tcG9zZSBFbWJlcidzIGNvbnRyb2xsZXIgbGF5ZXI6IGBF
        bWJlci5Db250cm9sbGVyYCwKICBgRW1iZXIuQXJyYXlDb250cm9sbGVyYCwg
        YW5kIGBFbWJlci5PYmplY3RDb250cm9sbGVyYC4KCiAgQGNsYXNzIENvbnRy
        b2xsZXJNaXhpbgogIEBuYW1lc3BhY2UgRW1iZXIKICBAdXNlcyBFbWJlci5B
        Y3Rpb25IYW5kbGVyCiovCkVtYmVyLkNvbnRyb2xsZXJNaXhpbiA9IEVtYmVy
        Lk1peGluLmNyZWF0ZShFbWJlci5BY3Rpb25IYW5kbGVyLCB7CiAgLyogZHVj
        a3R5cGUgYXMgYSBjb250cm9sbGVyICovCiAgaXNDb250cm9sbGVyOiB0cnVl
        LAoKICAvKioKICAgIFRoZSBvYmplY3QgdG8gd2hpY2ggYWN0aW9ucyBmcm9t
        IHRoZSB2aWV3IHNob3VsZCBiZSBzZW50LgoKICAgIEZvciBleGFtcGxlLCB3
        aGVuIGEgSGFuZGxlYmFycyB0ZW1wbGF0ZSB1c2VzIHRoZSBge3thY3Rpb259
        fWAgaGVscGVyLAogICAgaXQgd2lsbCBhdHRlbXB0IHRvIHNlbmQgdGhlIGFj
        dGlvbiB0byB0aGUgdmlldydzIGNvbnRyb2xsZXIncyBgdGFyZ2V0YC4KCiAg
        ICBCeSBkZWZhdWx0LCBhIGNvbnRyb2xsZXIncyBgdGFyZ2V0YCBpcyBzZXQg
        dG8gdGhlIHJvdXRlciBhZnRlciBpdCBpcwogICAgaW5zdGFudGlhdGVkIGJ5
        IGBFbWJlci5BcHBsaWNhdGlvbiNpbml0aWFsaXplYC4KCiAgICBAcHJvcGVy
        dHkgdGFyZ2V0CiAgICBAZGVmYXVsdCBudWxsCiAgKi8KICB0YXJnZXQ6IG51
        bGwsCgogIGNvbnRhaW5lcjogbnVsbCwKCiAgcGFyZW50Q29udHJvbGxlcjog
        bnVsbCwKCiAgc3RvcmU6IG51bGwsCgogIG1vZGVsOiBFbWJlci5jb21wdXRl
        ZC5hbGlhcygnY29udGVudCcpLAoKICBkZXByZWNhdGVkU2VuZEhhbmRsZXM6
        IGZ1bmN0aW9uKGFjdGlvbk5hbWUpIHsKICAgIHJldHVybiAhIXRoaXNbYWN0
        aW9uTmFtZV07CiAgfSwKCiAgZGVwcmVjYXRlZFNlbmQ6IGZ1bmN0aW9uKGFj
        dGlvbk5hbWUpIHsKICAgIHZhciBhcmdzID0gW10uc2xpY2UuY2FsbChhcmd1
        bWVudHMsIDEpOwogICAgRW1iZXIuYXNzZXJ0KCcnICsgdGhpcyArICIgaGFz
        IHRoZSBhY3Rpb24gIiArIGFjdGlvbk5hbWUgKyAiIGJ1dCBpdCBpcyBub3Qg
        YSBmdW5jdGlvbiIsIHR5cGVvZiB0aGlzW2FjdGlvbk5hbWVdID09PSAnZnVu
        Y3Rpb24nKTsKICAgIEVtYmVyLmRlcHJlY2F0ZSgnQWN0aW9uIGhhbmRsZXJz
        IGltcGxlbWVudGVkIGRpcmVjdGx5IG9uIGNvbnRyb2xsZXJzIGFyZSBkZXBy
        ZWNhdGVkIGluIGZhdm9yIG9mIGFjdGlvbiBoYW5kbGVycyBvbiBhbiBgYWN0
        aW9uc2Agb2JqZWN0ICggYWN0aW9uOiBgJyArIGFjdGlvbk5hbWUgKyAnYCBv
        biAnICsgdGhpcyArICcpJywgZmFsc2UpOwogICAgdGhpc1thY3Rpb25OYW1l
        XS5hcHBseSh0aGlzLCBhcmdzKTsKICAgIHJldHVybjsKICB9Cn0pOwoKLyoq
        CiAgQGNsYXNzIENvbnRyb2xsZXIKICBAbmFtZXNwYWNlIEVtYmVyCiAgQGV4
        dGVuZHMgRW1iZXIuT2JqZWN0CiAgQHVzZXMgRW1iZXIuQ29udHJvbGxlck1p
        eGluCiovCkVtYmVyLkNvbnRyb2xsZXIgPSBFbWJlci5PYmplY3QuZXh0ZW5k
        KEVtYmVyLkNvbnRyb2xsZXJNaXhpbik7Cgp9KSgpOwoKCgooZnVuY3Rpb24o
        KSB7Ci8qKgpAbW9kdWxlIGVtYmVyCkBzdWJtb2R1bGUgZW1iZXItcnVudGlt
        ZQoqLwoKdmFyIGdldCA9IEVtYmVyLmdldCwgc2V0ID0gRW1iZXIuc2V0LCBm
        b3JFYWNoID0gRW1iZXIuRW51bWVyYWJsZVV0aWxzLmZvckVhY2g7CgovKioK
        ICBgRW1iZXIuU29ydGFibGVNaXhpbmAgcHJvdmlkZXMgYSBzdGFuZGFyZCBp
        bnRlcmZhY2UgZm9yIGFycmF5IHByb3hpZXMKICB0byBzcGVjaWZ5IGEgc29y
        dCBvcmRlciBhbmQgbWFpbnRhaW4gdGhpcyBzb3J0aW5nIHdoZW4gb2JqZWN0
        cyBhcmUgYWRkZWQsCiAgcmVtb3ZlZCwgb3IgdXBkYXRlZCB3aXRob3V0IGNo
        YW5naW5nIHRoZSBpbXBsaWNpdCBvcmRlciBvZiB0aGVpciB1bmRlcmx5aW5n
        CiAgY29udGVudCBhcnJheToKCiAgYGBgamF2YXNjcmlwdAogIHNvbmdzID0g
        WwogICAge3RyYWNrTnVtYmVyOiA0LCB0aXRsZTogJ09iLUxhLURpLCBPYi1M
        YS1EYSd9LAogICAge3RyYWNrTnVtYmVyOiAyLCB0aXRsZTogJ0JhY2sgaW4g
        dGhlIFUuUy5TLlIuJ30sCiAgICB7dHJhY2tOdW1iZXI6IDMsIHRpdGxlOiAn
        R2xhc3MgT25pb24nfSwKICBdOwoKICBzb25nc0NvbnRyb2xsZXIgPSBFbWJl
        ci5BcnJheUNvbnRyb2xsZXIuY3JlYXRlKHsKICAgIGNvbnRlbnQ6IHNvbmdz
        LAogICAgc29ydFByb3BlcnRpZXM6IFsndHJhY2tOdW1iZXInXSwKICAgIHNv
        cnRBc2NlbmRpbmc6IHRydWUKICB9KTsKCiAgc29uZ3NDb250cm9sbGVyLmdl
        dCgnZmlyc3RPYmplY3QnKTsgIC8vIHt0cmFja051bWJlcjogMiwgdGl0bGU6
        ICdCYWNrIGluIHRoZSBVLlMuUy5SLid9CgogIHNvbmdzQ29udHJvbGxlci5h
        ZGRPYmplY3Qoe3RyYWNrTnVtYmVyOiAxLCB0aXRsZTogJ0RlYXIgUHJ1ZGVu
        Y2UnfSk7CiAgc29uZ3NDb250cm9sbGVyLmdldCgnZmlyc3RPYmplY3QnKTsg
        IC8vIHt0cmFja051bWJlcjogMSwgdGl0bGU6ICdEZWFyIFBydWRlbmNlJ30K
        ICBgYGAKCiAgSWYgeW91IGFkZCBvciByZW1vdmUgdGhlIHByb3BlcnRpZXMg
        dG8gc29ydCBieSBvciBjaGFuZ2UgdGhlIHNvcnQgZGlyZWN0aW9uIHRoZSBj
        b250ZW50CiAgc29ydCBvcmRlciB3aWxsIGJlIGF1dG9tYXRpY2FsbHkgdXBk
        YXRlZC4KCiAgYGBgamF2YXNjcmlwdAogIHNvbmdzQ29udHJvbGxlci5zZXQo
        J3NvcnRQcm9wZXJ0aWVzJywgWyd0aXRsZSddKTsKICBzb25nc0NvbnRyb2xs
        ZXIuZ2V0KCdmaXJzdE9iamVjdCcpOyAvLyB7dHJhY2tOdW1iZXI6IDIsIHRp
        dGxlOiAnQmFjayBpbiB0aGUgVS5TLlMuUi4nfQoKICBzb25nc0NvbnRyb2xs
        ZXIudG9nZ2xlUHJvcGVydHkoJ3NvcnRBc2NlbmRpbmcnKTsKICBzb25nc0Nv
        bnRyb2xsZXIuZ2V0KCdmaXJzdE9iamVjdCcpOyAvLyB7dHJhY2tOdW1iZXI6
        IDQsIHRpdGxlOiAnT2ItTGEtRGksIE9iLUxhLURhJ30KICBgYGAKCiAgU29y
        dGFibGVNaXhpbiB3b3JrcyBieSBzb3J0aW5nIHRoZSBhcnJhbmdlZENvbnRl
        bnQgYXJyYXksIHdoaWNoIGlzIHRoZSBhcnJheSB0aGF0CiAgYXJyYXlQcm94
        eSBkaXNwbGF5cy4gRHVlIHRvIHRoZSBmYWN0IHRoYXQgdGhlIHVuZGVybHlp
        bmcgJ2NvbnRlbnQnIGFycmF5IGlzIG5vdCBjaGFuZ2VkLCB0aGF0CiAgYXJy
        YXkgd2lsbCBub3QgZGlzcGxheSB0aGUgc29ydGVkIGxpc3Q6CgogICBgYGBq
        YXZhc2NyaXB0CiAgc29uZ3NDb250cm9sbGVyLmdldCgnY29udGVudCcpLmdl
        dCgnZmlyc3RPYmplY3QnKTsgLy8gUmV0dXJucyB0aGUgdW5zb3J0ZWQgb3Jp
        Z2luYWwgY29udGVudAogIHNvbmdzQ29udHJvbGxlci5nZXQoJ2ZpcnN0T2Jq
        ZWN0Jyk7IC8vIFJldHVybnMgdGhlIHNvcnRlZCBjb250ZW50LgogIGBgYCAK
        ICAKICBBbHRob3VnaCB0aGUgc29ydGVkIGNvbnRlbnQgY2FuIGFsc28gYmUg
        YWNjZXNzZWQgdGhyb3VnaCB0aGUgYXJyYW5nZWRDb250ZW50IHByb3BlcnR5
        LAogIGl0IGlzIHByZWZlcmFibGUgdG8gdXNlIHRoZSBwcm94aWVkIGNsYXNz
        IGFuZCBub3QgdGhlIGFycmFuZ2VkQ29udGVudCBhcnJheSBkaXJlY3RseS4K
        CiAgQGNsYXNzIFNvcnRhYmxlTWl4aW4KICBAbmFtZXNwYWNlIEVtYmVyCiAg
        QHVzZXMgRW1iZXIuTXV0YWJsZUVudW1lcmFibGUKKi8KRW1iZXIuU29ydGFi
        bGVNaXhpbiA9IEVtYmVyLk1peGluLmNyZWF0ZShFbWJlci5NdXRhYmxlRW51
        bWVyYWJsZSwgewoKICAvKioKICAgIFNwZWNpZmllcyB3aGljaCBwcm9wZXJ0
        aWVzIGRpY3RhdGUgdGhlIGFycmFuZ2VkQ29udGVudCdzIHNvcnQgb3JkZXIu
        CgogICAgV2hlbiBzcGVjaWZ5aW5nIG11bHRpcGxlIHByb3BlcnRpZXMgdGhl
        IHNvcnRpbmcgd2lsbCB1c2UgcHJvcGVydGllcwogICAgZnJvbSB0aGUgYHNv
        cnRQcm9wZXJ0aWVzYCBhcnJheSBwcmlvcml0aXplZCBmcm9tIGZpcnN0IHRv
        IGxhc3QuCgogICAgQHByb3BlcnR5IHtBcnJheX0gc29ydFByb3BlcnRpZXMK
        ICAqLwogIHNvcnRQcm9wZXJ0aWVzOiBudWxsLAoKICAvKioKICAgIFNwZWNp
        ZmllcyB0aGUgYXJyYW5nZWRDb250ZW50J3Mgc29ydCBkaXJlY3Rpb24KCiAg
        ICBAcHJvcGVydHkge0Jvb2xlYW59IHNvcnRBc2NlbmRpbmcKICAqLwogIHNv
        cnRBc2NlbmRpbmc6IHRydWUsCgogIC8qKgogICAgVGhlIGZ1bmN0aW9uIHVz
        ZWQgdG8gY29tcGFyZSB0d28gdmFsdWVzLiBZb3UgY2FuIG92ZXJyaWRlIHRo
        aXMgaWYgeW91CiAgICB3YW50IHRvIGRvIGN1c3RvbSBjb21wYXJpc29ucy4g
        RnVuY3Rpb25zIG11c3QgYmUgb2YgdGhlIHR5cGUgZXhwZWN0ZWQgYnkKICAg
        IEFycmF5I3NvcnQsIGkuZS4KICAgICAgcmV0dXJuIDAgaWYgdGhlIHR3byBw
        YXJhbWV0ZXJzIGFyZSBlcXVhbCwKICAgICAgcmV0dXJuIGEgbmVnYXRpdmUg
        dmFsdWUgaWYgdGhlIGZpcnN0IHBhcmFtZXRlciBpcyBzbWFsbGVyIHRoYW4g
        dGhlIHNlY29uZCBvcgogICAgICByZXR1cm4gYSBwb3NpdGl2ZSB2YWx1ZSBv
        dGhlcndpc2U6CgogICAgYGBgamF2YXNjcmlwdAogICAgZnVuY3Rpb24oeCx5
        KSB7IC8vIFRoZXNlIGFyZSBhc3N1bWVkIHRvIGJlIGludGVnZXJzCiAgICAg
        IGlmICh4ID09PSB5KQogICAgICAgIHJldHVybiAwOwogICAgICByZXR1cm4g
        eCA8IHkgPyAtMSA6IDE7CiAgICB9CiAgICBgYGAKCiAgICBAcHJvcGVydHkg
        c29ydEZ1bmN0aW9uCiAgICBAdHlwZSB7RnVuY3Rpb259CiAgICBAZGVmYXVs
        dCBFbWJlci5jb21wYXJlCiAgKi8KICBzb3J0RnVuY3Rpb246IEVtYmVyLmNv
        bXBhcmUsCgogIG9yZGVyQnk6IGZ1bmN0aW9uKGl0ZW0xLCBpdGVtMikgewog
        ICAgdmFyIHJlc3VsdCA9IDAsCiAgICAgICAgc29ydFByb3BlcnRpZXMgPSBn
        ZXQodGhpcywgJ3NvcnRQcm9wZXJ0aWVzJyksCiAgICAgICAgc29ydEFzY2Vu
        ZGluZyA9IGdldCh0aGlzLCAnc29ydEFzY2VuZGluZycpLAogICAgICAgIHNv
        cnRGdW5jdGlvbiA9IGdldCh0aGlzLCAnc29ydEZ1bmN0aW9uJyk7CgogICAg
        RW1iZXIuYXNzZXJ0KCJ5b3UgbmVlZCB0byBkZWZpbmUgYHNvcnRQcm9wZXJ0
        aWVzYCIsICEhc29ydFByb3BlcnRpZXMpOwoKICAgIGZvckVhY2goc29ydFBy
        b3BlcnRpZXMsIGZ1bmN0aW9uKHByb3BlcnR5TmFtZSkgewogICAgICBpZiAo
        cmVzdWx0ID09PSAwKSB7CiAgICAgICAgcmVzdWx0ID0gc29ydEZ1bmN0aW9u
        KGdldChpdGVtMSwgcHJvcGVydHlOYW1lKSwgZ2V0KGl0ZW0yLCBwcm9wZXJ0
        eU5hbWUpKTsKICAgICAgICBpZiAoKHJlc3VsdCAhPT0gMCkgJiYgIXNvcnRB
        c2NlbmRpbmcpIHsKICAgICAgICAgIHJlc3VsdCA9ICgtMSkgKiByZXN1bHQ7
        CiAgICAgICAgfQogICAgICB9CiAgICB9KTsKCiAgICByZXR1cm4gcmVzdWx0
        OwogIH0sCgogIGRlc3Ryb3k6IGZ1bmN0aW9uKCkgewogICAgdmFyIGNvbnRl
        bnQgPSBnZXQodGhpcywgJ2NvbnRlbnQnKSwKICAgICAgICBzb3J0UHJvcGVy
        dGllcyA9IGdldCh0aGlzLCAnc29ydFByb3BlcnRpZXMnKTsKCiAgICBpZiAo
        Y29udGVudCAmJiBzb3J0UHJvcGVydGllcykgewogICAgICBmb3JFYWNoKGNv
        bnRlbnQsIGZ1bmN0aW9uKGl0ZW0pIHsKICAgICAgICBmb3JFYWNoKHNvcnRQ
        cm9wZXJ0aWVzLCBmdW5jdGlvbihzb3J0UHJvcGVydHkpIHsKICAgICAgICAg
        IEVtYmVyLnJlbW92ZU9ic2VydmVyKGl0ZW0sIHNvcnRQcm9wZXJ0eSwgdGhp
        cywgJ2NvbnRlbnRJdGVtU29ydFByb3BlcnR5RGlkQ2hhbmdlJyk7CiAgICAg
        ICAgfSwgdGhpcyk7CiAgICAgIH0sIHRoaXMpOwogICAgfQoKICAgIHJldHVy
        biB0aGlzLl9zdXBlcigpOwogIH0sCgogIGlzU29ydGVkOiBFbWJlci5jb21w
        dXRlZC5ib29sKCdzb3J0UHJvcGVydGllcycpLAoKICAvKioKICAgIE92ZXJy
        aWRlcyB0aGUgZGVmYXVsdCBhcnJhbmdlZENvbnRlbnQgZnJvbSBhcnJheVBy
        b3h5IGluIG9yZGVyIHRvIHNvcnQgYnkgc29ydEZ1bmN0aW9uLgogICAgQWxz
        byBzZXRzIHVwIG9ic2VydmVycyBmb3IgZWFjaCBzb3J0UHJvcGVydHkgb24g
        ZWFjaCBpdGVtIGluIHRoZSBjb250ZW50IEFycmF5LgogICAgCiAgICBAcHJv
        cGVydHkgYXJyYW5nZWRDb250ZW50CiAgKi8KCiAgYXJyYW5nZWRDb250ZW50
        OiBFbWJlci5jb21wdXRlZCgnY29udGVudCcsICdzb3J0UHJvcGVydGllcy5A
        ZWFjaCcsIGZ1bmN0aW9uKGtleSwgdmFsdWUpIHsKICAgIHZhciBjb250ZW50
        ID0gZ2V0KHRoaXMsICdjb250ZW50JyksCiAgICAgICAgaXNTb3J0ZWQgPSBn
        ZXQodGhpcywgJ2lzU29ydGVkJyksCiAgICAgICAgc29ydFByb3BlcnRpZXMg
        PSBnZXQodGhpcywgJ3NvcnRQcm9wZXJ0aWVzJyksCiAgICAgICAgc2VsZiA9
        IHRoaXM7CgogICAgaWYgKGNvbnRlbnQgJiYgaXNTb3J0ZWQpIHsKICAgICAg
        Y29udGVudCA9IGNvbnRlbnQuc2xpY2UoKTsKICAgICAgY29udGVudC5zb3J0
        KGZ1bmN0aW9uKGl0ZW0xLCBpdGVtMikgewogICAgICAgIHJldHVybiBzZWxm
        Lm9yZGVyQnkoaXRlbTEsIGl0ZW0yKTsKICAgICAgfSk7CiAgICAgIGZvckVh
        Y2goY29udGVudCwgZnVuY3Rpb24oaXRlbSkgewogICAgICAgIGZvckVhY2go
        c29ydFByb3BlcnRpZXMsIGZ1bmN0aW9uKHNvcnRQcm9wZXJ0eSkgewogICAg
        ICAgICAgRW1iZXIuYWRkT2JzZXJ2ZXIoaXRlbSwgc29ydFByb3BlcnR5LCB0
        aGlzLCAnY29udGVudEl0ZW1Tb3J0UHJvcGVydHlEaWRDaGFuZ2UnKTsKICAg
        ICAgICB9LCB0aGlzKTsKICAgICAgfSwgdGhpcyk7CiAgICAgIHJldHVybiBF
        bWJlci5BKGNvbnRlbnQpOwogICAgfQoKICAgIHJldHVybiBjb250ZW50Owog
        IH0pLAoKICBfY29udGVudFdpbGxDaGFuZ2U6IEVtYmVyLmJlZm9yZU9ic2Vy
        dmVyKCdjb250ZW50JywgZnVuY3Rpb24oKSB7CiAgICB2YXIgY29udGVudCA9
        IGdldCh0aGlzLCAnY29udGVudCcpLAogICAgICAgIHNvcnRQcm9wZXJ0aWVz
        ID0gZ2V0KHRoaXMsICdzb3J0UHJvcGVydGllcycpOwoKICAgIGlmIChjb250
        ZW50ICYmIHNvcnRQcm9wZXJ0aWVzKSB7CiAgICAgIGZvckVhY2goY29udGVu
        dCwgZnVuY3Rpb24oaXRlbSkgewogICAgICAgIGZvckVhY2goc29ydFByb3Bl
        cnRpZXMsIGZ1bmN0aW9uKHNvcnRQcm9wZXJ0eSkgewogICAgICAgICAgRW1i
        ZXIucmVtb3ZlT2JzZXJ2ZXIoaXRlbSwgc29ydFByb3BlcnR5LCB0aGlzLCAn
        Y29udGVudEl0ZW1Tb3J0UHJvcGVydHlEaWRDaGFuZ2UnKTsKICAgICAgICB9
        LCB0aGlzKTsKICAgICAgfSwgdGhpcyk7CiAgICB9CgogICAgdGhpcy5fc3Vw
        ZXIoKTsKICB9KSwKCiAgc29ydEFzY2VuZGluZ1dpbGxDaGFuZ2U6IEVtYmVy
        LmJlZm9yZU9ic2VydmVyKCdzb3J0QXNjZW5kaW5nJywgZnVuY3Rpb24oKSB7
        CiAgICB0aGlzLl9sYXN0U29ydEFzY2VuZGluZyA9IGdldCh0aGlzLCAnc29y
        dEFzY2VuZGluZycpOwogIH0pLAoKICBzb3J0QXNjZW5kaW5nRGlkQ2hhbmdl
        OiBFbWJlci5vYnNlcnZlcignc29ydEFzY2VuZGluZycsIGZ1bmN0aW9uKCkg
        ewogICAgaWYgKGdldCh0aGlzLCAnc29ydEFzY2VuZGluZycpICE9PSB0aGlz
        Ll9sYXN0U29ydEFzY2VuZGluZykgewogICAgICB2YXIgYXJyYW5nZWRDb250
        ZW50ID0gZ2V0KHRoaXMsICdhcnJhbmdlZENvbnRlbnQnKTsKICAgICAgYXJy
        YW5nZWRDb250ZW50LnJldmVyc2VPYmplY3RzKCk7CiAgICB9CiAgfSksCgog
        IGNvbnRlbnRBcnJheVdpbGxDaGFuZ2U6IGZ1bmN0aW9uKGFycmF5LCBpZHgs
        IHJlbW92ZWRDb3VudCwgYWRkZWRDb3VudCkgewogICAgdmFyIGlzU29ydGVk
        ID0gZ2V0KHRoaXMsICdpc1NvcnRlZCcpOwoKICAgIGlmIChpc1NvcnRlZCkg
        ewogICAgICB2YXIgYXJyYW5nZWRDb250ZW50ID0gZ2V0KHRoaXMsICdhcnJh
        bmdlZENvbnRlbnQnKTsKICAgICAgdmFyIHJlbW92ZWRPYmplY3RzID0gYXJy
        YXkuc2xpY2UoaWR4LCBpZHgrcmVtb3ZlZENvdW50KTsKICAgICAgdmFyIHNv
        cnRQcm9wZXJ0aWVzID0gZ2V0KHRoaXMsICdzb3J0UHJvcGVydGllcycpOwoK
        ICAgICAgZm9yRWFjaChyZW1vdmVkT2JqZWN0cywgZnVuY3Rpb24oaXRlbSkg
        ewogICAgICAgIGFycmFuZ2VkQ29udGVudC5yZW1vdmVPYmplY3QoaXRlbSk7
        CgogICAgICAgIGZvckVhY2goc29ydFByb3BlcnRpZXMsIGZ1bmN0aW9uKHNv
        cnRQcm9wZXJ0eSkgewogICAgICAgICAgRW1iZXIucmVtb3ZlT2JzZXJ2ZXIo
        aXRlbSwgc29ydFByb3BlcnR5LCB0aGlzLCAnY29udGVudEl0ZW1Tb3J0UHJv
        cGVydHlEaWRDaGFuZ2UnKTsKICAgICAgICB9LCB0aGlzKTsKICAgICAgfSwg
        dGhpcyk7CiAgICB9CgogICAgcmV0dXJuIHRoaXMuX3N1cGVyKGFycmF5LCBp
        ZHgsIHJlbW92ZWRDb3VudCwgYWRkZWRDb3VudCk7CiAgfSwKCiAgY29udGVu
        dEFycmF5RGlkQ2hhbmdlOiBmdW5jdGlvbihhcnJheSwgaWR4LCByZW1vdmVk
        Q291bnQsIGFkZGVkQ291bnQpIHsKICAgIHZhciBpc1NvcnRlZCA9IGdldCh0
        aGlzLCAnaXNTb3J0ZWQnKSwKICAgICAgICBzb3J0UHJvcGVydGllcyA9IGdl
        dCh0aGlzLCAnc29ydFByb3BlcnRpZXMnKTsKCiAgICBpZiAoaXNTb3J0ZWQp
        IHsKICAgICAgdmFyIGFkZGVkT2JqZWN0cyA9IGFycmF5LnNsaWNlKGlkeCwg
        aWR4K2FkZGVkQ291bnQpOwoKICAgICAgZm9yRWFjaChhZGRlZE9iamVjdHMs
        IGZ1bmN0aW9uKGl0ZW0pIHsKICAgICAgICB0aGlzLmluc2VydEl0ZW1Tb3J0
        ZWQoaXRlbSk7CgogICAgICAgIGZvckVhY2goc29ydFByb3BlcnRpZXMsIGZ1
        bmN0aW9uKHNvcnRQcm9wZXJ0eSkgewogICAgICAgICAgRW1iZXIuYWRkT2Jz
        ZXJ2ZXIoaXRlbSwgc29ydFByb3BlcnR5LCB0aGlzLCAnY29udGVudEl0ZW1T
        b3J0UHJvcGVydHlEaWRDaGFuZ2UnKTsKICAgICAgICB9LCB0aGlzKTsKICAg
        ICAgfSwgdGhpcyk7CiAgICB9CgogICAgcmV0dXJuIHRoaXMuX3N1cGVyKGFy
        cmF5LCBpZHgsIHJlbW92ZWRDb3VudCwgYWRkZWRDb3VudCk7CiAgfSwKCiAg
        aW5zZXJ0SXRlbVNvcnRlZDogZnVuY3Rpb24oaXRlbSkgewogICAgdmFyIGFy
        cmFuZ2VkQ29udGVudCA9IGdldCh0aGlzLCAnYXJyYW5nZWRDb250ZW50Jyk7
        CiAgICB2YXIgbGVuZ3RoID0gZ2V0KGFycmFuZ2VkQ29udGVudCwgJ2xlbmd0
        aCcpOwoKICAgIHZhciBpZHggPSB0aGlzLl9iaW5hcnlTZWFyY2goaXRlbSwg
        MCwgbGVuZ3RoKTsKICAgIGFycmFuZ2VkQ29udGVudC5pbnNlcnRBdChpZHgs
        IGl0ZW0pOwogIH0sCgogIGNvbnRlbnRJdGVtU29ydFByb3BlcnR5RGlkQ2hh
        bmdlOiBmdW5jdGlvbihpdGVtKSB7CiAgICB2YXIgYXJyYW5nZWRDb250ZW50
        ID0gZ2V0KHRoaXMsICdhcnJhbmdlZENvbnRlbnQnKSwKICAgICAgICBvbGRJ
        bmRleCA9IGFycmFuZ2VkQ29udGVudC5pbmRleE9mKGl0ZW0pLAogICAgICAg
        IGxlZnRJdGVtID0gYXJyYW5nZWRDb250ZW50Lm9iamVjdEF0KG9sZEluZGV4
        IC0gMSksCiAgICAgICAgcmlnaHRJdGVtID0gYXJyYW5nZWRDb250ZW50Lm9i
        amVjdEF0KG9sZEluZGV4ICsgMSksCiAgICAgICAgbGVmdFJlc3VsdCA9IGxl
        ZnRJdGVtICYmIHRoaXMub3JkZXJCeShpdGVtLCBsZWZ0SXRlbSksCiAgICAg
        ICAgcmlnaHRSZXN1bHQgPSByaWdodEl0ZW0gJiYgdGhpcy5vcmRlckJ5KGl0
        ZW0sIHJpZ2h0SXRlbSk7CgogICAgaWYgKGxlZnRSZXN1bHQgPCAwIHx8IHJp
        Z2h0UmVzdWx0ID4gMCkgewogICAgICBhcnJhbmdlZENvbnRlbnQucmVtb3Zl
        T2JqZWN0KGl0ZW0pOwogICAgICB0aGlzLmluc2VydEl0ZW1Tb3J0ZWQoaXRl
        bSk7CiAgICB9CiAgfSwKCiAgX2JpbmFyeVNlYXJjaDogZnVuY3Rpb24oaXRl
        bSwgbG93LCBoaWdoKSB7CiAgICB2YXIgbWlkLCBtaWRJdGVtLCByZXMsIGFy
        cmFuZ2VkQ29udGVudDsKCiAgICBpZiAobG93ID09PSBoaWdoKSB7CiAgICAg
        IHJldHVybiBsb3c7CiAgICB9CgogICAgYXJyYW5nZWRDb250ZW50ID0gZ2V0
        KHRoaXMsICdhcnJhbmdlZENvbnRlbnQnKTsKCiAgICBtaWQgPSBsb3cgKyBN
        YXRoLmZsb29yKChoaWdoIC0gbG93KSAvIDIpOwogICAgbWlkSXRlbSA9IGFy
        cmFuZ2VkQ29udGVudC5vYmplY3RBdChtaWQpOwoKICAgIHJlcyA9IHRoaXMu
        b3JkZXJCeShtaWRJdGVtLCBpdGVtKTsKCiAgICBpZiAocmVzIDwgMCkgewog
        ICAgICByZXR1cm4gdGhpcy5fYmluYXJ5U2VhcmNoKGl0ZW0sIG1pZCsxLCBo
        aWdoKTsKICAgIH0gZWxzZSBpZiAocmVzID4gMCkgewogICAgICByZXR1cm4g
        dGhpcy5fYmluYXJ5U2VhcmNoKGl0ZW0sIGxvdywgbWlkKTsKICAgIH0KCiAg
        ICByZXR1cm4gbWlkOwogIH0KfSk7Cgp9KSgpOwoKCgooZnVuY3Rpb24oKSB7
        Ci8qKgpAbW9kdWxlIGVtYmVyCkBzdWJtb2R1bGUgZW1iZXItcnVudGltZQoq
        LwoKdmFyIGdldCA9IEVtYmVyLmdldCwgc2V0ID0gRW1iZXIuc2V0LCBmb3JF
        YWNoID0gRW1iZXIuRW51bWVyYWJsZVV0aWxzLmZvckVhY2gsCiAgICByZXBs
        YWNlID0gRW1iZXIuRW51bWVyYWJsZVV0aWxzLnJlcGxhY2U7CgovKioKICBg
        RW1iZXIuQXJyYXlDb250cm9sbGVyYCBwcm92aWRlcyBhIHdheSBmb3IgeW91
        IHRvIHB1Ymxpc2ggYSBjb2xsZWN0aW9uIG9mCiAgb2JqZWN0cyBzbyB0aGF0
        IHlvdSBjYW4gZWFzaWx5IGJpbmQgdG8gdGhlIGNvbGxlY3Rpb24gZnJvbSBh
        IEhhbmRsZWJhcnMKICBgI2VhY2hgIGhlbHBlciwgYW4gYEVtYmVyLkNvbGxl
        Y3Rpb25WaWV3YCwgb3Igb3RoZXIgY29udHJvbGxlcnMuCgogIFRoZSBhZHZh
        bnRhZ2Ugb2YgdXNpbmcgYW4gYEFycmF5Q29udHJvbGxlcmAgaXMgdGhhdCB5
        b3Ugb25seSBoYXZlIHRvIHNldCB1cAogIHlvdXIgdmlldyBiaW5kaW5ncyBv
        bmNlOyB0byBjaGFuZ2Ugd2hhdCdzIGRpc3BsYXllZCwgc2ltcGx5IHN3YXAg
        b3V0IHRoZQogIGBjb250ZW50YCBwcm9wZXJ0eSBvbiB0aGUgY29udHJvbGxl
        ci4KCiAgRm9yIGV4YW1wbGUsIGltYWdpbmUgeW91IHdhbnRlZCB0byBkaXNw
        bGF5IGEgbGlzdCBvZiBpdGVtcyBmZXRjaGVkIHZpYSBhbiBYSFIKICByZXF1
        ZXN0LiBDcmVhdGUgYW4gYEVtYmVyLkFycmF5Q29udHJvbGxlcmAgYW5kIHNl
        dCBpdHMgYGNvbnRlbnRgIHByb3BlcnR5OgoKICBgYGBqYXZhc2NyaXB0CiAg
        TXlBcHAubGlzdENvbnRyb2xsZXIgPSBFbWJlci5BcnJheUNvbnRyb2xsZXIu
        Y3JlYXRlKCk7CgogICQuZ2V0KCdwZW9wbGUuanNvbicsIGZ1bmN0aW9uKGRh
        dGEpIHsKICAgIE15QXBwLmxpc3RDb250cm9sbGVyLnNldCgnY29udGVudCcs
        IGRhdGEpOwogIH0pOwogIGBgYAoKICBUaGVuLCBjcmVhdGUgYSB2aWV3IHRo
        YXQgYmluZHMgdG8geW91ciBuZXcgY29udHJvbGxlcjoKCiAgYGBgaGFuZGxl
        YmFycwogIHt7I2VhY2ggTXlBcHAubGlzdENvbnRyb2xsZXJ9fQogICAge3tm
        aXJzdE5hbWV9fSB7e2xhc3ROYW1lfX0KICB7ey9lYWNofX0KICBgYGAKCiAg
        QWx0aG91Z2ggeW91IGFyZSBiaW5kaW5nIHRvIHRoZSBjb250cm9sbGVyLCB0
        aGUgYmVoYXZpb3Igb2YgdGhpcyBjb250cm9sbGVyCiAgaXMgdG8gcGFzcyB0
        aHJvdWdoIGFueSBtZXRob2RzIG9yIHByb3BlcnRpZXMgdG8gdGhlIHVuZGVy
        bHlpbmcgYXJyYXkuIFRoaXMKICBjYXBhYmlsaXR5IGNvbWVzIGZyb20gYEVt
        YmVyLkFycmF5UHJveHlgLCB3aGljaCB0aGlzIGNsYXNzIGluaGVyaXRzIGZy
        b20uCgogIFNvbWV0aW1lcyB5b3Ugd2FudCB0byBkaXNwbGF5IGNvbXB1dGVk
        IHByb3BlcnRpZXMgd2l0aGluIHRoZSBib2R5IG9mIGFuCiAgYCNlYWNoYCBo
        ZWxwZXIgdGhhdCBkZXBlbmQgb24gdGhlIHVuZGVybHlpbmcgaXRlbXMgaW4g
        YGNvbnRlbnRgLCBidXQgYXJlIG5vdAogIHByZXNlbnQgb24gdGhvc2UgaXRl
        bXMuICAgVG8gZG8gdGhpcywgc2V0IGBpdGVtQ29udHJvbGxlcmAgdG8gdGhl
        IG5hbWUgb2YgYQogIGNvbnRyb2xsZXIgKHByb2JhYmx5IGFuIGBPYmplY3RD
        b250cm9sbGVyYCkgdGhhdCB3aWxsIHdyYXAgZWFjaCBpbmRpdmlkdWFsIGl0
        ZW0uCgogIEZvciBleGFtcGxlOgoKICBgYGBoYW5kbGViYXJzCiAgICB7eyNl
        YWNoIHBvc3QgaW4gY29udHJvbGxlcn19CiAgICAgIDxsaT57e3RpdGxlfX0g
        KHt7dGl0bGVMZW5ndGh9fSBjaGFyYWN0ZXJzKTwvbGk+CiAgICB7ey9lYWNo
        fX0KICBgYGAKCiAgYGBgamF2YXNjcmlwdAogIEFwcC5Qb3N0c0NvbnRyb2xs
        ZXIgPSBFbWJlci5BcnJheUNvbnRyb2xsZXIuZXh0ZW5kKHsKICAgIGl0ZW1D
        b250cm9sbGVyOiAncG9zdCcKICB9KTsKCiAgQXBwLlBvc3RDb250cm9sbGVy
        ID0gRW1iZXIuT2JqZWN0Q29udHJvbGxlci5leHRlbmQoewogICAgLy8gdGhl
        IGB0aXRsZWAgcHJvcGVydHkgd2lsbCBiZSBwcm94aWVkIHRvIHRoZSB1bmRl
        cmx5aW5nIHBvc3QuCgogICAgdGl0bGVMZW5ndGg6IGZ1bmN0aW9uKCkgewog
        ICAgICByZXR1cm4gdGhpcy5nZXQoJ3RpdGxlJykubGVuZ3RoOwogICAgfS5w
        cm9wZXJ0eSgndGl0bGUnKQogIH0pOwogIGBgYAoKICBJbiBzb21lIGNhc2Vz
        IGl0IGlzIGhlbHBmdWwgdG8gcmV0dXJuIGEgZGlmZmVyZW50IGBpdGVtQ29u
        dHJvbGxlcmAgZGVwZW5kaW5nCiAgb24gdGhlIHBhcnRpY3VsYXIgaXRlbS4g
        IFN1YmNsYXNzZXMgY2FuIGRvIHRoaXMgYnkgb3ZlcnJpZGluZwogIGBsb29r
        dXBJdGVtQ29udHJvbGxlcmAuCgogIEZvciBleGFtcGxlOgoKICBgYGBqYXZh
        c2NyaXB0CiAgQXBwLk15QXJyYXlDb250cm9sbGVyID0gRW1iZXIuQXJyYXlD
        b250cm9sbGVyLmV4dGVuZCh7CiAgICBsb29rdXBJdGVtQ29udHJvbGxlcjog
        ZnVuY3Rpb24oIG9iamVjdCApIHsKICAgICAgaWYgKG9iamVjdC5nZXQoJ2lz
        U3BlY2lhbCcpKSB7CiAgICAgICAgcmV0dXJuICJzcGVjaWFsIjsgLy8gdXNl
        IEFwcC5TcGVjaWFsQ29udHJvbGxlcgogICAgICB9IGVsc2UgewogICAgICAg
        IHJldHVybiAicmVndWxhciI7IC8vIHVzZSBBcHAuUmVndWxhckNvbnRyb2xs
        ZXIKICAgICAgfQogICAgfQogIH0pOwogIGBgYAoKICBUaGUgaXRlbUNvbnRy
        b2xsZXIgaW5zdGFuY2VzIHdpbGwgaGF2ZSBhIGBwYXJlbnRDb250cm9sbGVy
        YCBwcm9wZXJ0eSBzZXQgdG8KICB0aGUgYEFycmF5Q29udHJvbGxlcmAgaW5z
        dGFuY2UuCgogIEBjbGFzcyBBcnJheUNvbnRyb2xsZXIKICBAbmFtZXNwYWNl
        IEVtYmVyCiAgQGV4dGVuZHMgRW1iZXIuQXJyYXlQcm94eQogIEB1c2VzIEVt
        YmVyLlNvcnRhYmxlTWl4aW4KICBAdXNlcyBFbWJlci5Db250cm9sbGVyTWl4
        aW4KKi8KCkVtYmVyLkFycmF5Q29udHJvbGxlciA9IEVtYmVyLkFycmF5UHJv
        eHkuZXh0ZW5kKEVtYmVyLkNvbnRyb2xsZXJNaXhpbiwKICBFbWJlci5Tb3J0
        YWJsZU1peGluLCB7CgogIC8qKgogICAgVGhlIGNvbnRyb2xsZXIgdXNlZCB0
        byB3cmFwIGl0ZW1zLCBpZiBhbnkuCgogICAgQHByb3BlcnR5IGl0ZW1Db250
        cm9sbGVyCiAgICBAdHlwZSBTdHJpbmcKICAgIEBkZWZhdWx0IG51bGwKICAq
        LwogIGl0ZW1Db250cm9sbGVyOiBudWxsLAoKICAvKioKICAgIFJldHVybiB0
        aGUgbmFtZSBvZiB0aGUgY29udHJvbGxlciB0byB3cmFwIGl0ZW1zLCBvciBg
        bnVsbGAgaWYgaXRlbXMgc2hvdWxkCiAgICBiZSByZXR1cm5lZCBkaXJlY3Rs
        eS4gIFRoZSBkZWZhdWx0IGltcGxlbWVudGF0aW9uIHNpbXBseSByZXR1cm5z
        IHRoZQogICAgYGl0ZW1Db250cm9sbGVyYCBwcm9wZXJ0eSwgYnV0IHN1YmNs
        YXNzZXMgY2FuIG92ZXJyaWRlIHRoaXMgbWV0aG9kIHRvIHJldHVybgogICAg
        ZGlmZmVyZW50IGNvbnRyb2xsZXJzIGZvciBkaWZmZXJlbnQgb2JqZWN0cy4K
        CiAgICBGb3IgZXhhbXBsZToKCiAgICBgYGBqYXZhc2NyaXB0CiAgICBBcHAu
        TXlBcnJheUNvbnRyb2xsZXIgPSBFbWJlci5BcnJheUNvbnRyb2xsZXIuZXh0
        ZW5kKHsKICAgICAgbG9va3VwSXRlbUNvbnRyb2xsZXI6IGZ1bmN0aW9uKCBv
        YmplY3QgKSB7CiAgICAgICAgaWYgKG9iamVjdC5nZXQoJ2lzU3BlY2lhbCcp
        KSB7CiAgICAgICAgICByZXR1cm4gInNwZWNpYWwiOyAvLyB1c2UgQXBwLlNw
        ZWNpYWxDb250cm9sbGVyCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJl
        dHVybiAicmVndWxhciI7IC8vIHVzZSBBcHAuUmVndWxhckNvbnRyb2xsZXIK
        ICAgICAgICB9CiAgICAgIH0KICAgIH0pOwogICAgYGBgCgogICAgQG1ldGhv
        ZCBsb29rdXBJdGVtQ29udHJvbGxlcgogICAgQHBhcmFtIHtPYmplY3R9IG9i
        amVjdAogICAgQHJldHVybiB7U3RyaW5nfQogICovCiAgbG9va3VwSXRlbUNv
        bnRyb2xsZXI6IGZ1bmN0aW9uKG9iamVjdCkgewogICAgcmV0dXJuIGdldCh0
        aGlzLCAnaXRlbUNvbnRyb2xsZXInKTsKICB9LAoKICBvYmplY3RBdENvbnRl
        bnQ6IGZ1bmN0aW9uKGlkeCkgewogICAgdmFyIGxlbmd0aCA9IGdldCh0aGlz
        LCAnbGVuZ3RoJyksCiAgICAgICAgYXJyYW5nZWRDb250ZW50ID0gZ2V0KHRo
        aXMsJ2FycmFuZ2VkQ29udGVudCcpLAogICAgICAgIG9iamVjdCA9IGFycmFu
        Z2VkQ29udGVudCAmJiBhcnJhbmdlZENvbnRlbnQub2JqZWN0QXQoaWR4KTsK
        CiAgICBpZiAoaWR4ID49IDAgJiYgaWR4IDwgbGVuZ3RoKSB7CiAgICAgIHZh
        ciBjb250cm9sbGVyQ2xhc3MgPSB0aGlzLmxvb2t1cEl0ZW1Db250cm9sbGVy
        KG9iamVjdCk7CiAgICAgIGlmIChjb250cm9sbGVyQ2xhc3MpIHsKICAgICAg
        ICByZXR1cm4gdGhpcy5jb250cm9sbGVyQXQoaWR4LCBvYmplY3QsIGNvbnRy
        b2xsZXJDbGFzcyk7CiAgICAgIH0KICAgIH0KCiAgICAvLyBXaGVuIGBjb250
        cm9sbGVyQ2xhc3NgIGlzIGZhbHN5LCB3ZSBoYXZlIG5vdCBvcHRlZCBpbiB0
        byB1c2luZyBpdGVtCiAgICAvLyBjb250cm9sbGVycywgc28gcmV0dXJuIHRo
        ZSBvYmplY3QgZGlyZWN0bHkuCgogICAgLy8gV2hlbiB0aGUgaW5kZXggaXMg
        b3V0IG9mIHJhbmdlLCB3ZSB3YW50IHRvIHJldHVybiB0aGUgIm91dCBvZiBy
        YW5nZSIKICAgIC8vIHZhbHVlLCB3aGF0ZXZlciB0aGF0IG1pZ2h0IGJlLiAg
        UmF0aGVyIHRoYW4gbWFrZSBhc3N1bXB0aW9ucwogICAgLy8gKGUuZy4gZ3Vl
        c3NpbmcgYG51bGxgIG9yIGB1bmRlZmluZWRgKSB3ZSBkZWZlciB0aGlzIHRv
        IGBhcnJhbmdlZENvbnRlbnRgLgogICAgcmV0dXJuIG9iamVjdDsKICB9LAoK
        ICBhcnJhbmdlZENvbnRlbnREaWRDaGFuZ2U6IGZ1bmN0aW9uKCkgewogICAg
        dGhpcy5fc3VwZXIoKTsKICAgIHRoaXMuX3Jlc2V0U3ViQ29udHJvbGxlcnMo
        KTsKICB9LAoKICBhcnJheUNvbnRlbnREaWRDaGFuZ2U6IGZ1bmN0aW9uKGlk
        eCwgcmVtb3ZlZENudCwgYWRkZWRDbnQpIHsKICAgIHZhciBzdWJDb250cm9s
        bGVycyA9IGdldCh0aGlzLCAnX3N1YkNvbnRyb2xsZXJzJyksCiAgICAgICAg
        c3ViQ29udHJvbGxlcnNUb1JlbW92ZSA9IHN1YkNvbnRyb2xsZXJzLnNsaWNl
        KGlkeCwgaWR4K3JlbW92ZWRDbnQpOwoKICAgIGZvckVhY2goc3ViQ29udHJv
        bGxlcnNUb1JlbW92ZSwgZnVuY3Rpb24oc3ViQ29udHJvbGxlcikgewogICAg
        ICBpZiAoc3ViQ29udHJvbGxlcikgeyBzdWJDb250cm9sbGVyLmRlc3Ryb3ko
        KTsgfQogICAgfSk7CgogICAgcmVwbGFjZShzdWJDb250cm9sbGVycywgaWR4
        LCByZW1vdmVkQ250LCBuZXcgQXJyYXkoYWRkZWRDbnQpKTsKCiAgICAvLyBU
        aGUgc2hhZG93IGFycmF5IG9mIHN1YmNvbnRyb2xsZXJzIG11c3QgYmUgdXBk
        YXRlZCBiZWZvcmUgd2UgdHJpZ2dlcgogICAgLy8gb2JzZXJ2ZXJzLCBvdGhl
        cndpc2Ugb2JzZXJ2ZXJzIHdpbGwgZ2V0IHRoZSB3cm9uZyBzdWJjb250YWlu
        ZXIgd2hlbgogICAgLy8gY2FsbGluZyBgb2JqZWN0QXRgCiAgICB0aGlzLl9z
        dXBlcihpZHgsIHJlbW92ZWRDbnQsIGFkZGVkQ250KTsKICB9LAoKICBpbml0
        OiBmdW5jdGlvbigpIHsKICAgIHRoaXMuX3N1cGVyKCk7CgogICAgdGhpcy5z
        ZXQoJ19zdWJDb250cm9sbGVycycsIEVtYmVyLkEoKSk7CiAgfSwKCiAgY29u
        dGVudDogRW1iZXIuY29tcHV0ZWQoZnVuY3Rpb24gKCkgewogICAgcmV0dXJu
        IEVtYmVyLkEoKTsKICB9KSwKCiAgLyoqCiAgICogRmxhZyB0byBtYXJrIGFz
        IGJlaW5nICJ2aXJ0dWFsIi4gVXNlZCB0byBrZWVwIHRoaXMgaW5zdGFuY2UK
        ICAgKiBmcm9tIHBhcnRpY2lwYXRpbmcgaW4gdGhlIHBhcmVudENvbnRyb2xs
        ZXIgaGllcmFyY2h5LgogICAqCiAgICogQHByaXZhdGUKICAgKiBAdHlwZSBC
        b29sZWFuCiAgICovCiAgX2lzVmlydHVhbDogZmFsc2UsCgogIGNvbnRyb2xs
        ZXJBdDogZnVuY3Rpb24oaWR4LCBvYmplY3QsIGNvbnRyb2xsZXJDbGFzcykg
        ewogICAgdmFyIGNvbnRhaW5lciA9IGdldCh0aGlzLCAnY29udGFpbmVyJyks
        CiAgICAgICAgc3ViQ29udHJvbGxlcnMgPSBnZXQodGhpcywgJ19zdWJDb250
        cm9sbGVycycpLAogICAgICAgIHN1YkNvbnRyb2xsZXIgPSBzdWJDb250cm9s
        bGVyc1tpZHhdLAogICAgICAgIGZhY3RvcnksIGZ1bGxOYW1lOwoKICAgIGlm
        IChzdWJDb250cm9sbGVyKSB7IHJldHVybiBzdWJDb250cm9sbGVyOyB9Cgog
        ICAgZnVsbE5hbWUgPSAiY29udHJvbGxlcjoiICsgY29udHJvbGxlckNsYXNz
        OwoKICAgIGlmICghY29udGFpbmVyLmhhcyhmdWxsTmFtZSkpIHsKICAgICAg
        dGhyb3cgbmV3IEVtYmVyLkVycm9yKCdDb3VsZCBub3QgcmVzb2x2ZSBpdGVt
        Q29udHJvbGxlcjogIicgKyBjb250cm9sbGVyQ2xhc3MgKyAnIicpOwogICAg
        fQogICAgdmFyIHBhcmVudENvbnRyb2xsZXI7CiAgICBpZiAodGhpcy5faXNW
        aXJ0dWFsKSB7CiAgICAgIHBhcmVudENvbnRyb2xsZXIgPSBnZXQodGhpcywg
        J3BhcmVudENvbnRyb2xsZXInKTsKICAgIH0KICAgIHBhcmVudENvbnRyb2xs
        ZXIgPSBwYXJlbnRDb250cm9sbGVyIHx8IHRoaXM7CiAgICBzdWJDb250cm9s
        bGVyID0gY29udGFpbmVyLmxvb2t1cEZhY3RvcnkoZnVsbE5hbWUpLmNyZWF0
        ZSh7CiAgICAgIHRhcmdldDogdGhpcywKICAgICAgcGFyZW50Q29udHJvbGxl
        cjogcGFyZW50Q29udHJvbGxlciwKICAgICAgY29udGVudDogb2JqZWN0CiAg
        ICB9KTsKCiAgICBzdWJDb250cm9sbGVyc1tpZHhdID0gc3ViQ29udHJvbGxl
        cjsKCiAgICByZXR1cm4gc3ViQ29udHJvbGxlcjsKICB9LAoKICBfc3ViQ29u
        dHJvbGxlcnM6IG51bGwsCgogIF9yZXNldFN1YkNvbnRyb2xsZXJzOiBmdW5j
        dGlvbigpIHsKICAgIHZhciBzdWJDb250cm9sbGVycyA9IGdldCh0aGlzLCAn
        X3N1YkNvbnRyb2xsZXJzJyk7CiAgICBpZiAoc3ViQ29udHJvbGxlcnMpIHsK
        ICAgICAgZm9yRWFjaChzdWJDb250cm9sbGVycywgZnVuY3Rpb24oc3ViQ29u
        dHJvbGxlcikgewogICAgICAgIGlmIChzdWJDb250cm9sbGVyKSB7IHN1YkNv
        bnRyb2xsZXIuZGVzdHJveSgpOyB9CiAgICAgIH0pOwogICAgfQoKICAgIHRo
        aXMuc2V0KCdfc3ViQ29udHJvbGxlcnMnLCBFbWJlci5BKCkpOwogIH0KfSk7
        Cgp9KSgpOwoKCgooZnVuY3Rpb24oKSB7Ci8qKgpAbW9kdWxlIGVtYmVyCkBz
        dWJtb2R1bGUgZW1iZXItcnVudGltZQoqLwoKLyoqCiAgYEVtYmVyLk9iamVj
        dENvbnRyb2xsZXJgIGlzIHBhcnQgb2YgRW1iZXIncyBDb250cm9sbGVyIGxh
        eWVyLiBJdCBpcyBpbnRlbmRlZAogIHRvIHdyYXAgYSBzaW5nbGUgb2JqZWN0
        LCBwcm94eWluZyB1bmhhbmRsZWQgYXR0ZW1wdHMgdG8gYGdldGAgYW5kIGBz
        ZXRgIHRvIHRoZSB1bmRlcmx5aW5nCiAgY29udGVudCBvYmplY3QsIGFuZCB0
        byBmb3J3YXJkIHVuaGFuZGxlZCBhY3Rpb24gYXR0ZW1wdHMgdG8gaXRzIGB0
        YXJnZXRgLgoKICBgRW1iZXIuT2JqZWN0Q29udHJvbGxlcmAgZGVyaXZlcyB0
        aGlzIGZ1bmN0aW9uYWxpdHkgZnJvbSBpdHMgc3VwZXJjbGFzcwogIGBFbWJl
        ci5PYmplY3RQcm94eWAgYW5kIHRoZSBgRW1iZXIuQ29udHJvbGxlck1peGlu
        YCBtaXhpbi4KCiAgQGNsYXNzIE9iamVjdENvbnRyb2xsZXIKICBAbmFtZXNw
        YWNlIEVtYmVyCiAgQGV4dGVuZHMgRW1iZXIuT2JqZWN0UHJveHkKICBAdXNl
        cyBFbWJlci5Db250cm9sbGVyTWl4aW4KKiovCkVtYmVyLk9iamVjdENvbnRy
        b2xsZXIgPSBFbWJlci5PYmplY3RQcm94eS5leHRlbmQoRW1iZXIuQ29udHJv
        bGxlck1peGluKTsKCn0pKCk7CgoKCihmdW5jdGlvbigpIHsKCn0pKCk7CgoK
        CihmdW5jdGlvbigpIHsKLyoqCkVtYmVyIFJ1bnRpbWUKCkBtb2R1bGUgZW1i
        ZXIKQHN1Ym1vZHVsZSBlbWJlci1ydW50aW1lCkByZXF1aXJlcyBlbWJlci1t
        ZXRhbAoqLwoKfSkoKTsKCihmdW5jdGlvbigpIHsKLyoqCkBtb2R1bGUgZW1i
        ZXIKQHN1Ym1vZHVsZSBlbWJlci12aWV3cwoqLwoKdmFyIGpRdWVyeSA9ICh0
        aGlzICYmIHRoaXMualF1ZXJ5KSB8fCAoRW1iZXIuaW1wb3J0cyAmJiBFbWJl
        ci5pbXBvcnRzLmpRdWVyeSk7CmlmICghalF1ZXJ5ICYmIHR5cGVvZiByZXF1
        aXJlID09PSAnZnVuY3Rpb24nKSB7CiAgalF1ZXJ5ID0gcmVxdWlyZSgnanF1
        ZXJ5Jyk7Cn0KCkVtYmVyLmFzc2VydCgiRW1iZXIgVmlld3MgcmVxdWlyZSBq
        UXVlcnkgYmV0d2VlbiAxLjcgYW5kIDIuMSIsIGpRdWVyeSAmJiAoalF1ZXJ5
        KCkuanF1ZXJ5Lm1hdGNoKC9eKCgxXC4oN3w4fDl8MTB8MTEpKXwoMlwuKDB8
        MSkpKShcLlxkKyk/KHByZXxyY1xkPyk/LykgfHwgRW1iZXIuRU5WLkZPUkNF
        X0pRVUVSWSkpOwoKLyoqCiAgQWxpYXMgZm9yIGpRdWVyeQoKICBAbWV0aG9k
        ICQKICBAZm9yIEVtYmVyCiovCkVtYmVyLiQgPSBqUXVlcnk7Cgp9KSgpOwoK
        CgooZnVuY3Rpb24oKSB7Ci8qKgpAbW9kdWxlIGVtYmVyCkBzdWJtb2R1bGUg
        ZW1iZXItdmlld3MKKi8KaWYgKEVtYmVyLiQpIHsKICAvLyBodHRwOi8vd3d3
        LndoYXR3Zy5vcmcvc3BlY3Mvd2ViLWFwcHMvY3VycmVudC13b3JrL211bHRp
        cGFnZS9kbmQuaHRtbCNkbmRldmVudHMKICB2YXIgZHJhZ0V2ZW50cyA9IEVt
        YmVyLlN0cmluZy53KCdkcmFnc3RhcnQgZHJhZyBkcmFnZW50ZXIgZHJhZ2xl
        YXZlIGRyYWdvdmVyIGRyb3AgZHJhZ2VuZCcpOwoKICAvLyBDb3BpZXMgdGhl
        IGBkYXRhVHJhbnNmZXJgIHByb3BlcnR5IGZyb20gYSBicm93c2VyIGV2ZW50
        IG9iamVjdCBvbnRvIHRoZQogIC8vIGpRdWVyeSBldmVudCBvYmplY3QgZm9y
        IHRoZSBzcGVjaWZpZWQgZXZlbnRzCiAgRW1iZXIuRW51bWVyYWJsZVV0aWxz
        LmZvckVhY2goZHJhZ0V2ZW50cywgZnVuY3Rpb24oZXZlbnROYW1lKSB7CiAg
        ICBFbWJlci4kLmV2ZW50LmZpeEhvb2tzW2V2ZW50TmFtZV0gPSB7IHByb3Bz
        OiBbJ2RhdGFUcmFuc2ZlciddIH07CiAgfSk7Cn0KCn0pKCk7CgoKCihmdW5j
        dGlvbigpIHsKLyoqCkBtb2R1bGUgZW1iZXIKQHN1Ym1vZHVsZSBlbWJlci12
        aWV3cwoqLwoKLyogQkVHSU4gTUVUQU1PUlBIIEhFTFBFUlMgKi8KCi8vIElu
        dGVybmV0IEV4cGxvcmVyIHByaW9yIHRvIDkgZG9lcyBub3QgYWxsb3cgc2V0
        dGluZyBpbm5lckhUTUwgaWYgdGhlIGZpcnN0IGVsZW1lbnQKLy8gaXMgYSAi
        emVyby1zY29wZSIgZWxlbWVudC4gVGhpcyBwcm9ibGVtIGNhbiBiZSB3b3Jr
        ZWQgYXJvdW5kIGJ5IG1ha2luZwovLyB0aGUgZmlyc3Qgbm9kZSBhbiBpbnZp
        c2libGUgdGV4dCBub2RlLiBXZSwgbGlrZSBNb2Rlcm5penIsIHVzZSAmc2h5
        OwoKdmFyIG5lZWRzU2h5ID0gdHlwZW9mIGRvY3VtZW50ICE9PSAndW5kZWZp
        bmVkJyAmJiAoZnVuY3Rpb24oKSB7CiAgdmFyIHRlc3RFbCA9IGRvY3VtZW50
        LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogIHRlc3RFbC5pbm5lckhUTUwgPSAi
        PGRpdj48L2Rpdj4iOwogIHRlc3RFbC5maXJzdENoaWxkLmlubmVySFRNTCA9
        ICI8c2NyaXB0Pjwvc2NyaXB0PiI7CiAgcmV0dXJuIHRlc3RFbC5maXJzdENo
        aWxkLmlubmVySFRNTCA9PT0gJyc7Cn0pKCk7CgovLyBJRSA4IChhbmQgbGlr
        ZWx5IGVhcmxpZXIpIGxpa2VzIHRvIG1vdmUgd2hpdGVzcGFjZSBwcmVjZWVk
        aW5nCi8vIGEgc2NyaXB0IHRhZyB0byBhcHBlYXIgYWZ0ZXIgaXQuIFRoaXMg
        bWVhbnMgdGhhdCB3ZSBjYW4KLy8gYWNjaWRlbnRhbGx5IHJlbW92ZSB3aGl0
        ZXNwYWNlIHdoZW4gdXBkYXRpbmcgYSBtb3JwaC4KdmFyIG1vdmVzV2hpdGVz
        cGFjZSA9IHR5cGVvZiBkb2N1bWVudCAhPT0gJ3VuZGVmaW5lZCcgJiYgKGZ1
        bmN0aW9uKCkgewogIHZhciB0ZXN0RWwgPSBkb2N1bWVudC5jcmVhdGVFbGVt
        ZW50KCdkaXYnKTsKICB0ZXN0RWwuaW5uZXJIVE1MID0gIlRlc3Q6IDxzY3Jp
        cHQgdHlwZT0ndGV4dC94LXBsYWNlaG9sZGVyJz48L3NjcmlwdD5WYWx1ZSI7
        CiAgcmV0dXJuIHRlc3RFbC5jaGlsZE5vZGVzWzBdLm5vZGVWYWx1ZSA9PT0g
        J1Rlc3Q6JyAmJgogICAgICAgICAgdGVzdEVsLmNoaWxkTm9kZXNbMl0ubm9k
        ZVZhbHVlID09PSAnIFZhbHVlJzsKfSkoKTsKCi8vIFVzZSB0aGlzIHRvIGZp
        bmQgY2hpbGRyZW4gYnkgSUQgaW5zdGVhZCBvZiB1c2luZyBqUXVlcnkKdmFy
        IGZpbmRDaGlsZEJ5SWQgPSBmdW5jdGlvbihlbGVtZW50LCBpZCkgewogIGlm
        IChlbGVtZW50LmdldEF0dHJpYnV0ZSgnaWQnKSA9PT0gaWQpIHsgcmV0dXJu
        IGVsZW1lbnQ7IH0KCiAgdmFyIGxlbiA9IGVsZW1lbnQuY2hpbGROb2Rlcy5s
        ZW5ndGgsIGlkeCwgbm9kZSwgZm91bmQ7CiAgZm9yIChpZHg9MDsgaWR4PGxl
        bjsgaWR4KyspIHsKICAgIG5vZGUgPSBlbGVtZW50LmNoaWxkTm9kZXNbaWR4
        XTsKICAgIGZvdW5kID0gbm9kZS5ub2RlVHlwZSA9PT0gMSAmJiBmaW5kQ2hp
        bGRCeUlkKG5vZGUsIGlkKTsKICAgIGlmIChmb3VuZCkgeyByZXR1cm4gZm91
        bmQ7IH0KICB9Cn07Cgp2YXIgc2V0SW5uZXJIVE1MV2l0aG91dEZpeCA9IGZ1
        bmN0aW9uKGVsZW1lbnQsIGh0bWwpIHsKICBpZiAobmVlZHNTaHkpIHsKICAg
        IGh0bWwgPSAnJnNoeTsnICsgaHRtbDsKICB9CgogIHZhciBtYXRjaGVzID0g
        W107CiAgaWYgKG1vdmVzV2hpdGVzcGFjZSkgewogICAgLy8gUmlnaHQgbm93
        IHdlIG9ubHkgY2hlY2sgZm9yIHNjcmlwdCB0YWdzIHdpdGggaWRzIHdpdGgg
        dGhlCiAgICAvLyBnb2FsIG9mIHRhcmdldGluZyBtb3JwaHMuCiAgICBodG1s
        ID0gaHRtbC5yZXBsYWNlKC8oXHMrKSg8c2NyaXB0IGlkPScoW14nXSspJykv
        ZywgZnVuY3Rpb24obWF0Y2gsIHNwYWNlcywgdGFnLCBpZCkgewogICAgICBt
        YXRjaGVzLnB1c2goW2lkLCBzcGFjZXNdKTsKICAgICAgcmV0dXJuIHRhZzsK
        ICAgIH0pOwogIH0KCiAgZWxlbWVudC5pbm5lckhUTUwgPSBodG1sOwoKICAv
        LyBJZiB3ZSBoYXZlIHRvIGRvIGFueSB3aGl0ZXNwYWNlIGFkanVzdG1lbnRz
        IGRvIHRoZW0gbm93CiAgaWYgKG1hdGNoZXMubGVuZ3RoID4gMCkgewogICAg
        dmFyIGxlbiA9IG1hdGNoZXMubGVuZ3RoLCBpZHg7CiAgICBmb3IgKGlkeD0w
        OyBpZHg8bGVuOyBpZHgrKykgewogICAgICB2YXIgc2NyaXB0ID0gZmluZENo
        aWxkQnlJZChlbGVtZW50LCBtYXRjaGVzW2lkeF1bMF0pLAogICAgICAgICAg
        bm9kZSA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKG1hdGNoZXNbaWR4XVsx
        XSk7CiAgICAgIHNjcmlwdC5wYXJlbnROb2RlLmluc2VydEJlZm9yZShub2Rl
        LCBzY3JpcHQpOwogICAgfQogIH0KCiAgaWYgKG5lZWRzU2h5KSB7CiAgICB2
        YXIgc2h5RWxlbWVudCA9IGVsZW1lbnQuZmlyc3RDaGlsZDsKICAgIHdoaWxl
        IChzaHlFbGVtZW50Lm5vZGVUeXBlID09PSAxICYmICFzaHlFbGVtZW50Lm5v
        ZGVOYW1lKSB7CiAgICAgIHNoeUVsZW1lbnQgPSBzaHlFbGVtZW50LmZpcnN0
        Q2hpbGQ7CiAgICB9CiAgICBpZiAoc2h5RWxlbWVudC5ub2RlVHlwZSA9PT0g
        MyAmJiBzaHlFbGVtZW50Lm5vZGVWYWx1ZS5jaGFyQXQoMCkgPT09ICJcdTAw
        QUQiKSB7CiAgICAgIHNoeUVsZW1lbnQubm9kZVZhbHVlID0gc2h5RWxlbWVu
        dC5ub2RlVmFsdWUuc2xpY2UoMSk7CiAgICB9CiAgfQp9OwoKLyogRU5EIE1F
        VEFNT1JQSCBIRUxQRVJTICovCgoKdmFyIGlubmVySFRNTFRhZ3MgPSB7fTsK
        dmFyIGNhblNldElubmVySFRNTCA9IGZ1bmN0aW9uKHRhZ05hbWUpIHsKICBp
        ZiAoaW5uZXJIVE1MVGFnc1t0YWdOYW1lXSAhPT0gdW5kZWZpbmVkKSB7CiAg
        ICByZXR1cm4gaW5uZXJIVE1MVGFnc1t0YWdOYW1lXTsKICB9CgogIHZhciBj
        YW5TZXQgPSB0cnVlOwoKICAvLyBJRSA4IGFuZCBlYXJsaWVyIGRvbid0IGFs
        bG93IHVzIHRvIGRvIGlubmVySFRNTCBvbiBzZWxlY3QKICBpZiAodGFnTmFt
        ZS50b0xvd2VyQ2FzZSgpID09PSAnc2VsZWN0JykgewogICAgdmFyIGVsID0g
        ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2VsZWN0Jyk7CiAgICBzZXRJbm5l
        ckhUTUxXaXRob3V0Rml4KGVsLCAnPG9wdGlvbiB2YWx1ZT0idGVzdCI+VGVz
        dDwvb3B0aW9uPicpOwogICAgY2FuU2V0ID0gZWwub3B0aW9ucy5sZW5ndGgg
        PT09IDE7CiAgfQoKICBpbm5lckhUTUxUYWdzW3RhZ05hbWVdID0gY2FuU2V0
        OwoKICByZXR1cm4gY2FuU2V0Owp9OwoKdmFyIHNldElubmVySFRNTCA9IGZ1
        bmN0aW9uKGVsZW1lbnQsIGh0bWwpIHsKICB2YXIgdGFnTmFtZSA9IGVsZW1l
        bnQudGFnTmFtZTsKCiAgaWYgKGNhblNldElubmVySFRNTCh0YWdOYW1lKSkg
        ewogICAgc2V0SW5uZXJIVE1MV2l0aG91dEZpeChlbGVtZW50LCBodG1sKTsK
        ICB9IGVsc2UgewogICAgLy8gRmlyZWZveCB2ZXJzaW9ucyA8IDExIGRvIG5v
        dCBoYXZlIHN1cHBvcnQgZm9yIGVsZW1lbnQub3V0ZXJIVE1MLgogICAgdmFy
        IG91dGVySFRNTCA9IGVsZW1lbnQub3V0ZXJIVE1MIHx8IG5ldyBYTUxTZXJp
        YWxpemVyKCkuc2VyaWFsaXplVG9TdHJpbmcoZWxlbWVudCk7CiAgICBFbWJl
        ci5hc3NlcnQoIkNhbid0IHNldCBpbm5lckhUTUwgb24gIitlbGVtZW50LnRh
        Z05hbWUrIiBpbiB0aGlzIGJyb3dzZXIiLCBvdXRlckhUTUwpOwoKICAgIHZh
        ciBzdGFydFRhZyA9IG91dGVySFRNTC5tYXRjaChuZXcgUmVnRXhwKCI8Iit0
        YWdOYW1lKyIoW14+XSopPiIsICdpJykpWzBdLAogICAgICAgIGVuZFRhZyA9
        ICc8LycrdGFnTmFtZSsnPic7CgogICAgdmFyIHdyYXBwZXIgPSBkb2N1bWVu
        dC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgIHNldElubmVySFRNTFdpdGhv
        dXRGaXgod3JhcHBlciwgc3RhcnRUYWcgKyBodG1sICsgZW5kVGFnKTsKICAg
        IGVsZW1lbnQgPSB3cmFwcGVyLmZpcnN0Q2hpbGQ7CiAgICB3aGlsZSAoZWxl
        bWVudC50YWdOYW1lICE9PSB0YWdOYW1lKSB7CiAgICAgIGVsZW1lbnQgPSBl
        bGVtZW50Lm5leHRTaWJsaW5nOwogICAgfQogIH0KCiAgcmV0dXJuIGVsZW1l
        bnQ7Cn07CgpmdW5jdGlvbiBpc1NpbXBsZUNsaWNrKGV2ZW50KSB7CiAgdmFy
        IG1vZGlmaWVyID0gZXZlbnQuc2hpZnRLZXkgfHwgZXZlbnQubWV0YUtleSB8
        fCBldmVudC5hbHRLZXkgfHwgZXZlbnQuY3RybEtleSwKICAgICAgc2Vjb25k
        YXJ5Q2xpY2sgPSBldmVudC53aGljaCA+IDE7IC8vIElFOSBtYXkgcmV0dXJu
        IHVuZGVmaW5lZAoKICByZXR1cm4gIW1vZGlmaWVyICYmICFzZWNvbmRhcnlD
        bGljazsKfQoKRW1iZXIuVmlld1V0aWxzID0gewogIHNldElubmVySFRNTDog
        c2V0SW5uZXJIVE1MLAogIGlzU2ltcGxlQ2xpY2s6IGlzU2ltcGxlQ2xpY2sK
        fTsKCn0pKCk7CgoKCihmdW5jdGlvbigpIHsKLyoqCkBtb2R1bGUgZW1iZXIK
        QHN1Ym1vZHVsZSBlbWJlci12aWV3cwoqLwoKdmFyIGdldCA9IEVtYmVyLmdl
        dCwgc2V0ID0gRW1iZXIuc2V0OwoKdmFyIENsYXNzU2V0ID0gZnVuY3Rpb24o
        KSB7CiAgdGhpcy5zZWVuID0ge307CiAgdGhpcy5saXN0ID0gW107Cn07CgpD
        bGFzc1NldC5wcm90b3R5cGUgPSB7CiAgYWRkOiBmdW5jdGlvbihzdHJpbmcp
        IHsKICAgIGlmIChzdHJpbmcgaW4gdGhpcy5zZWVuKSB7IHJldHVybjsgfQog
        ICAgdGhpcy5zZWVuW3N0cmluZ10gPSB0cnVlOwoKICAgIHRoaXMubGlzdC5w
        dXNoKHN0cmluZyk7CiAgfSwKCiAgdG9ET006IGZ1bmN0aW9uKCkgewogICAg
        cmV0dXJuIHRoaXMubGlzdC5qb2luKCIgIik7CiAgfQp9OwoKdmFyIEJBRF9U
        QUdfTkFNRV9URVNUX1JFR0VYUCA9IC9bXmEtekEtWjAtOVwtXS87CnZhciBC
        QURfVEFHX05BTUVfUkVQTEFDRV9SRUdFWFAgPSAvW15hLXpBLVowLTlcLV0v
        ZzsKCmZ1bmN0aW9uIHN0cmlwVGFnTmFtZSh0YWdOYW1lKSB7CiAgaWYgKCF0
        YWdOYW1lKSB7CiAgICByZXR1cm4gdGFnTmFtZTsKICB9CgogIGlmICghQkFE
        X1RBR19OQU1FX1RFU1RfUkVHRVhQLnRlc3QodGFnTmFtZSkpIHsKICAgIHJl
        dHVybiB0YWdOYW1lOwogIH0KCiAgcmV0dXJuIHRhZ05hbWUucmVwbGFjZShC
        QURfVEFHX05BTUVfUkVQTEFDRV9SRUdFWFAsICcnKTsKfQoKdmFyIEJBRF9D
        SEFSU19SRUdFWFAgPSAvJig/IVx3KzspfFs8PiInYF0vZzsKdmFyIFBPU1NJ
        QkxFX0NIQVJTX1JFR0VYUCA9IC9bJjw+IidgXS87CgpmdW5jdGlvbiBlc2Nh
        cGVBdHRyaWJ1dGUodmFsdWUpIHsKICAvLyBTdG9sZW4gc2hhbWVsZXNzbHkg
        ZnJvbSBIYW5kbGViYXJzCgogIHZhciBlc2NhcGUgPSB7CiAgICAiPCI6ICIm
        bHQ7IiwKICAgICI+IjogIiZndDsiLAogICAgJyInOiAiJnF1b3Q7IiwKICAg
        ICInIjogIiYjeDI3OyIsCiAgICAiYCI6ICImI3g2MDsiCiAgfTsKCiAgdmFy
        IGVzY2FwZUNoYXIgPSBmdW5jdGlvbihjaHIpIHsKICAgIHJldHVybiBlc2Nh
        cGVbY2hyXSB8fCAiJmFtcDsiOwogIH07CgogIHZhciBzdHJpbmcgPSB2YWx1
        ZS50b1N0cmluZygpOwoKICBpZighUE9TU0lCTEVfQ0hBUlNfUkVHRVhQLnRl
        c3Qoc3RyaW5nKSkgeyByZXR1cm4gc3RyaW5nOyB9CiAgcmV0dXJuIHN0cmlu
        Zy5yZXBsYWNlKEJBRF9DSEFSU19SRUdFWFAsIGVzY2FwZUNoYXIpOwp9Cgov
        LyBJRSA2LzcgaGF2ZSBidWdzIGFyb3VuZCBzZXR0aW5nIG5hbWVzIG9uIGlu
        cHV0cyBkdXJpbmcgY3JlYXRpb24uCi8vIEZyb20gaHR0cDovL21zZG4ubWlj
        cm9zb2Z0LmNvbS9lbi11cy9saWJyYXJ5L2llL21zNTM2Mzg5KHY9dnMuODUp
        LmFzcHg6Ci8vICJUbyBpbmNsdWRlIHRoZSBOQU1FIGF0dHJpYnV0ZSBhdCBy
        dW4gdGltZSBvbiBvYmplY3RzIGNyZWF0ZWQgd2l0aCB0aGUgY3JlYXRlRWxl
        bWVudCBtZXRob2QsIHVzZSB0aGUgZVRhZy4iCnZhciBjYW5TZXROYW1lT25J
        bnB1dHMgPSAoZnVuY3Rpb24oKSB7CiAgdmFyIGRpdiA9IGRvY3VtZW50LmNy
        ZWF0ZUVsZW1lbnQoJ2RpdicpLAogICAgICBlbCA9IGRvY3VtZW50LmNyZWF0
        ZUVsZW1lbnQoJ2lucHV0Jyk7CgogIGVsLnNldEF0dHJpYnV0ZSgnbmFtZScs
        ICdmb28nKTsKICBkaXYuYXBwZW5kQ2hpbGQoZWwpOwoKICByZXR1cm4gISFk
        aXYuaW5uZXJIVE1MLm1hdGNoKCdmb28nKTsKfSkoKTsKCi8qKgogIGBFbWJl
        ci5SZW5kZXJCdWZmZXJgIGdhdGhlcnMgaW5mb3JtYXRpb24gcmVnYXJkaW5n
        IHRoZSBhIHZpZXcgYW5kIGdlbmVyYXRlcyB0aGUKICBmaW5hbCByZXByZXNl
        bnRhdGlvbi4gYEVtYmVyLlJlbmRlckJ1ZmZlcmAgd2lsbCBnZW5lcmF0ZSBI
        VE1MIHdoaWNoIGNhbiBiZSBwdXNoZWQKICB0byB0aGUgRE9NLgoKICAgYGBg
        amF2YXNjcmlwdAogICB2YXIgYnVmZmVyID0gRW1iZXIuUmVuZGVyQnVmZmVy
        KCdkaXYnKTsKICBgYGAKCiAgQGNsYXNzIFJlbmRlckJ1ZmZlcgogIEBuYW1l
        c3BhY2UgRW1iZXIKICBAY29uc3RydWN0b3IKICBAcGFyYW0ge1N0cmluZ30g
        dGFnTmFtZSB0YWcgbmFtZSAoc3VjaCBhcyAnZGl2JyBvciAncCcpIHVzZWQg
        Zm9yIHRoZSBidWZmZXIKKi8KRW1iZXIuUmVuZGVyQnVmZmVyID0gZnVuY3Rp
        b24odGFnTmFtZSkgewogIHJldHVybiBuZXcgRW1iZXIuX1JlbmRlckJ1ZmZl
        cih0YWdOYW1lKTsKfTsKCkVtYmVyLl9SZW5kZXJCdWZmZXIgPSBmdW5jdGlv
        bih0YWdOYW1lKSB7CiAgdGhpcy50YWdOYW1lcyA9IFt0YWdOYW1lIHx8IG51
        bGxdOwogIHRoaXMuYnVmZmVyID0gIiI7Cn07CgpFbWJlci5fUmVuZGVyQnVm
        ZmVyLnByb3RvdHlwZSA9IHsKCiAgLy8gVGhlIHJvb3QgdmlldydzIGVsZW1l
        bnQKICBfZWxlbWVudDogbnVsbCwKCiAgX2hhc0VsZW1lbnQ6IHRydWUsCgog
        IC8qKgogICAgQW4gaW50ZXJuYWwgc2V0IHVzZWQgdG8gZGUtZHVwZSBjbGFz
        cyBuYW1lcyB3aGVuIGBhZGRDbGFzcygpYCBpcwogICAgdXNlZC4gQWZ0ZXIg
        ZWFjaCBjYWxsIHRvIGBhZGRDbGFzcygpYCwgdGhlIGBjbGFzc2VzYCBwcm9w
        ZXJ0eQogICAgd2lsbCBiZSB1cGRhdGVkLgoKICAgIEBwcml2YXRlCiAgICBA
        cHJvcGVydHkgZWxlbWVudENsYXNzZXMKICAgIEB0eXBlIEFycmF5CiAgICBA
        ZGVmYXVsdCBbXQogICovCiAgZWxlbWVudENsYXNzZXM6IG51bGwsCgogIC8q
        KgogICAgQXJyYXkgb2YgY2xhc3MgbmFtZXMgd2hpY2ggd2lsbCBiZSBhcHBs
        aWVkIGluIHRoZSBjbGFzcyBhdHRyaWJ1dGUuCgogICAgWW91IGNhbiB1c2Ug
        YHNldENsYXNzZXMoKWAgdG8gc2V0IHRoaXMgcHJvcGVydHkgZGlyZWN0bHku
        IElmIHlvdQogICAgdXNlIGBhZGRDbGFzcygpYCwgaXQgd2lsbCBiZSBtYWlu
        dGFpbmVkIGZvciB5b3UuCgogICAgQHByb3BlcnR5IGNsYXNzZXMKICAgIEB0
        eXBlIEFycmF5CiAgICBAZGVmYXVsdCBbXQogICovCiAgY2xhc3NlczogbnVs
        bCwKCiAgLyoqCiAgICBUaGUgaWQgaW4gb2YgdGhlIGVsZW1lbnQsIHRvIGJl
        IGFwcGxpZWQgaW4gdGhlIGlkIGF0dHJpYnV0ZS4KCiAgICBZb3Ugc2hvdWxk
        IG5vdCBzZXQgdGhpcyBwcm9wZXJ0eSB5b3Vyc2VsZiwgcmF0aGVyLCB5b3Ug
        c2hvdWxkIHVzZQogICAgdGhlIGBpZCgpYCBtZXRob2Qgb2YgYEVtYmVyLlJl
        bmRlckJ1ZmZlcmAuCgogICAgQHByb3BlcnR5IGVsZW1lbnRJZAogICAgQHR5
        cGUgU3RyaW5nCiAgICBAZGVmYXVsdCBudWxsCiAgKi8KICBlbGVtZW50SWQ6
        IG51bGwsCgogIC8qKgogICAgQSBoYXNoIGtleWVkIG9uIHRoZSBuYW1lIG9m
        IHRoZSBhdHRyaWJ1dGUgYW5kIHdob3NlIHZhbHVlIHdpbGwgYmUKICAgIGFw
        cGxpZWQgdG8gdGhhdCBhdHRyaWJ1dGUuIEZvciBleGFtcGxlLCBpZiB5b3Ug
        d2FudGVkIHRvIGFwcGx5IGEKICAgIGBkYXRhLXZpZXc9IkZvby5iYXIiYCBw
        cm9wZXJ0eSB0byBhbiBlbGVtZW50LCB5b3Ugd291bGQgc2V0IHRoZQogICAg
        ZWxlbWVudEF0dHJpYnV0ZXMgaGFzaCB0byBgeydkYXRhLXZpZXcnOidGb28u
        YmFyJ31gLgoKICAgIFlvdSBzaG91bGQgbm90IG1haW50YWluIHRoaXMgaGFz
        aCB5b3Vyc2VsZiwgcmF0aGVyLCB5b3Ugc2hvdWxkIHVzZQogICAgdGhlIGBh
        dHRyKClgIG1ldGhvZCBvZiBgRW1iZXIuUmVuZGVyQnVmZmVyYC4KCiAgICBA
        cHJvcGVydHkgZWxlbWVudEF0dHJpYnV0ZXMKICAgIEB0eXBlIEhhc2gKICAg
        IEBkZWZhdWx0IHt9CiAgKi8KICBlbGVtZW50QXR0cmlidXRlczogbnVsbCwK
        CiAgLyoqCiAgICBBIGhhc2gga2V5ZWQgb24gdGhlIG5hbWUgb2YgdGhlIHBy
        b3BlcnRpZXMgYW5kIHdob3NlIHZhbHVlIHdpbGwgYmUKICAgIGFwcGxpZWQg
        dG8gdGhhdCBwcm9wZXJ0eS4gRm9yIGV4YW1wbGUsIGlmIHlvdSB3YW50ZWQg
        dG8gYXBwbHkgYQogICAgYGNoZWNrZWQ9dHJ1ZWAgcHJvcGVydHkgdG8gYW4g
        ZWxlbWVudCwgeW91IHdvdWxkIHNldCB0aGUKICAgIGVsZW1lbnRQcm9wZXJ0
        aWVzIGhhc2ggdG8gYHsnY2hlY2tlZCc6dHJ1ZX1gLgoKICAgIFlvdSBzaG91
        bGQgbm90IG1haW50YWluIHRoaXMgaGFzaCB5b3Vyc2VsZiwgcmF0aGVyLCB5
        b3Ugc2hvdWxkIHVzZQogICAgdGhlIGBwcm9wKClgIG1ldGhvZCBvZiBgRW1i
        ZXIuUmVuZGVyQnVmZmVyYC4KCiAgICBAcHJvcGVydHkgZWxlbWVudFByb3Bl
        cnRpZXMKICAgIEB0eXBlIEhhc2gKICAgIEBkZWZhdWx0IHt9CiAgKi8KICBl
        bGVtZW50UHJvcGVydGllczogbnVsbCwKCiAgLyoqCiAgICBUaGUgdGFnbmFt
        ZSBvZiB0aGUgZWxlbWVudCBhbiBpbnN0YW5jZSBvZiBgRW1iZXIuUmVuZGVy
        QnVmZmVyYCByZXByZXNlbnRzLgoKICAgIFVzdWFsbHksIHRoaXMgZ2V0cyBz
        ZXQgYXMgdGhlIGZpcnN0IHBhcmFtZXRlciB0byBgRW1iZXIuUmVuZGVyQnVm
        ZmVyYC4gRm9yCiAgICBleGFtcGxlLCBpZiB5b3Ugd2FudGVkIHRvIGNyZWF0
        ZSBhIGBwYCB0YWcsIHRoZW4geW91IHdvdWxkIGNhbGwKCiAgICBgYGBqYXZh
        c2NyaXB0CiAgICBFbWJlci5SZW5kZXJCdWZmZXIoJ3AnKQogICAgYGBgCgog
        ICAgQHByb3BlcnR5IGVsZW1lbnRUYWcKICAgIEB0eXBlIFN0cmluZwogICAg
        QGRlZmF1bHQgbnVsbAogICovCiAgZWxlbWVudFRhZzogbnVsbCwKCiAgLyoq
        CiAgICBBIGhhc2gga2V5ZWQgb24gdGhlIG5hbWUgb2YgdGhlIHN0eWxlIGF0
        dHJpYnV0ZSBhbmQgd2hvc2UgdmFsdWUgd2lsbAogICAgYmUgYXBwbGllZCB0
        byB0aGF0IGF0dHJpYnV0ZS4gRm9yIGV4YW1wbGUsIGlmIHlvdSB3YW50ZWQg
        dG8gYXBwbHkgYQogICAgYGJhY2tncm91bmQtY29sb3I6YmxhY2s7YCBzdHls
        ZSB0byBhbiBlbGVtZW50LCB5b3Ugd291bGQgc2V0IHRoZQogICAgZWxlbWVu
        dFN0eWxlIGhhc2ggdG8gYHsnYmFja2dyb3VuZC1jb2xvcic6J2JsYWNrJ31g
        LgoKICAgIFlvdSBzaG91bGQgbm90IG1haW50YWluIHRoaXMgaGFzaCB5b3Vy
        c2VsZiwgcmF0aGVyLCB5b3Ugc2hvdWxkIHVzZQogICAgdGhlIGBzdHlsZSgp
        YCBtZXRob2Qgb2YgYEVtYmVyLlJlbmRlckJ1ZmZlcmAuCgogICAgQHByb3Bl
        cnR5IGVsZW1lbnRTdHlsZQogICAgQHR5cGUgSGFzaAogICAgQGRlZmF1bHQg
        e30KICAqLwogIGVsZW1lbnRTdHlsZTogbnVsbCwKCiAgLyoqCiAgICBOZXN0
        ZWQgYFJlbmRlckJ1ZmZlcnNgIHdpbGwgc2V0IHRoaXMgdG8gdGhlaXIgcGFy
        ZW50IGBSZW5kZXJCdWZmZXJgCiAgICBpbnN0YW5jZS4KCiAgICBAcHJvcGVy
        dHkgcGFyZW50QnVmZmVyCiAgICBAdHlwZSBFbWJlci5fUmVuZGVyQnVmZmVy
        CiAgKi8KICBwYXJlbnRCdWZmZXI6IG51bGwsCgogIC8qKgogICAgQWRkcyBh
        IHN0cmluZyBvZiBIVE1MIHRvIHRoZSBgUmVuZGVyQnVmZmVyYC4KCiAgICBA
        bWV0aG9kIHB1c2gKICAgIEBwYXJhbSB7U3RyaW5nfSBzdHJpbmcgSFRNTCB0
        byBwdXNoIGludG8gdGhlIGJ1ZmZlcgogICAgQGNoYWluYWJsZQogICovCiAg
        cHVzaDogZnVuY3Rpb24oc3RyaW5nKSB7CiAgICB0aGlzLmJ1ZmZlciArPSBz
        dHJpbmc7CiAgICByZXR1cm4gdGhpczsKICB9LAoKICAvKioKICAgIEFkZHMg
        YSBjbGFzcyB0byB0aGUgYnVmZmVyLCB3aGljaCB3aWxsIGJlIHJlbmRlcmVk
        IHRvIHRoZSBjbGFzcyBhdHRyaWJ1dGUuCgogICAgQG1ldGhvZCBhZGRDbGFz
        cwogICAgQHBhcmFtIHtTdHJpbmd9IGNsYXNzTmFtZSBDbGFzcyBuYW1lIHRv
        IGFkZCB0byB0aGUgYnVmZmVyCiAgICBAY2hhaW5hYmxlCiAgKi8KICBhZGRD
        bGFzczogZnVuY3Rpb24oY2xhc3NOYW1lKSB7CiAgICAvLyBsYXppbHkgY3Jl
        YXRlIGVsZW1lbnRDbGFzc2VzCiAgICB0aGlzLmVsZW1lbnRDbGFzc2VzID0g
        KHRoaXMuZWxlbWVudENsYXNzZXMgfHwgbmV3IENsYXNzU2V0KCkpOwogICAg
        dGhpcy5lbGVtZW50Q2xhc3Nlcy5hZGQoY2xhc3NOYW1lKTsKICAgIHRoaXMu
        Y2xhc3NlcyA9IHRoaXMuZWxlbWVudENsYXNzZXMubGlzdDsKCiAgICByZXR1
        cm4gdGhpczsKICB9LAoKICBzZXRDbGFzc2VzOiBmdW5jdGlvbihjbGFzc05h
        bWVzKSB7CiAgICB0aGlzLmVsZW1lbnRDbGFzc2VzID0gbnVsbDsKICAgIHZh
        ciBsZW4gPSBjbGFzc05hbWVzLmxlbmd0aCwgaTsKICAgIGZvciAoaSA9IDA7
        IGkgPCBsZW47IGkrKykgewogICAgICB0aGlzLmFkZENsYXNzKGNsYXNzTmFt
        ZXNbaV0pOwogICAgfQogIH0sCgogIC8qKgogICAgU2V0cyB0aGUgZWxlbWVu
        dElEIHRvIGJlIHVzZWQgZm9yIHRoZSBlbGVtZW50LgoKICAgIEBtZXRob2Qg
        aWQKICAgIEBwYXJhbSB7U3RyaW5nfSBpZAogICAgQGNoYWluYWJsZQogICov
        CiAgaWQ6IGZ1bmN0aW9uKGlkKSB7CiAgICB0aGlzLmVsZW1lbnRJZCA9IGlk
        OwogICAgcmV0dXJuIHRoaXM7CiAgfSwKCiAgLy8gZHVjayB0eXBlIGF0dHJp
        YnV0ZSBmdW5jdGlvbmFsaXR5IGxpa2UgalF1ZXJ5IHNvIGEgcmVuZGVyIGJ1
        ZmZlcgogIC8vIGNhbiBiZSB1c2VkIGxpa2UgYSBqUXVlcnkgb2JqZWN0IGlu
        IGF0dHJpYnV0ZSBiaW5kaW5nIHNjZW5hcmlvcy4KCiAgLyoqCiAgICBBZGRz
        IGFuIGF0dHJpYnV0ZSB3aGljaCB3aWxsIGJlIHJlbmRlcmVkIHRvIHRoZSBl
        bGVtZW50LgoKICAgIEBtZXRob2QgYXR0cgogICAgQHBhcmFtIHtTdHJpbmd9
        IG5hbWUgVGhlIG5hbWUgb2YgdGhlIGF0dHJpYnV0ZQogICAgQHBhcmFtIHtT
        dHJpbmd9IHZhbHVlIFRoZSB2YWx1ZSB0byBhZGQgdG8gdGhlIGF0dHJpYnV0
        ZQogICAgQGNoYWluYWJsZQogICAgQHJldHVybiB7RW1iZXIuUmVuZGVyQnVm
        ZmVyfFN0cmluZ30gdGhpcyBvciB0aGUgY3VycmVudCBhdHRyaWJ1dGUgdmFs
        dWUKICAqLwogIGF0dHI6IGZ1bmN0aW9uKG5hbWUsIHZhbHVlKSB7CiAgICB2
        YXIgYXR0cmlidXRlcyA9IHRoaXMuZWxlbWVudEF0dHJpYnV0ZXMgPSAodGhp
        cy5lbGVtZW50QXR0cmlidXRlcyB8fCB7fSk7CgogICAgaWYgKGFyZ3VtZW50
        cy5sZW5ndGggPT09IDEpIHsKICAgICAgcmV0dXJuIGF0dHJpYnV0ZXNbbmFt
        ZV07CiAgICB9IGVsc2UgewogICAgICBhdHRyaWJ1dGVzW25hbWVdID0gdmFs
        dWU7CiAgICB9CgogICAgcmV0dXJuIHRoaXM7CiAgfSwKCiAgLyoqCiAgICBS
        ZW1vdmUgYW4gYXR0cmlidXRlIGZyb20gdGhlIGxpc3Qgb2YgYXR0cmlidXRl
        cyB0byByZW5kZXIuCgogICAgQG1ldGhvZCByZW1vdmVBdHRyCiAgICBAcGFy
        YW0ge1N0cmluZ30gbmFtZSBUaGUgbmFtZSBvZiB0aGUgYXR0cmlidXRlCiAg
        ICBAY2hhaW5hYmxlCiAgKi8KICByZW1vdmVBdHRyOiBmdW5jdGlvbihuYW1l
        KSB7CiAgICB2YXIgYXR0cmlidXRlcyA9IHRoaXMuZWxlbWVudEF0dHJpYnV0
        ZXM7CiAgICBpZiAoYXR0cmlidXRlcykgeyBkZWxldGUgYXR0cmlidXRlc1tu
        YW1lXTsgfQoKICAgIHJldHVybiB0aGlzOwogIH0sCgogIC8qKgogICAgQWRk
        cyBhIHByb3BlcnR5IHdoaWNoIHdpbGwgYmUgcmVuZGVyZWQgdG8gdGhlIGVs
        ZW1lbnQuCgogICAgQG1ldGhvZCBwcm9wCiAgICBAcGFyYW0ge1N0cmluZ30g
        bmFtZSBUaGUgbmFtZSBvZiB0aGUgcHJvcGVydHkKICAgIEBwYXJhbSB7U3Ry
        aW5nfSB2YWx1ZSBUaGUgdmFsdWUgdG8gYWRkIHRvIHRoZSBwcm9wZXJ0eQog
        ICAgQGNoYWluYWJsZQogICAgQHJldHVybiB7RW1iZXIuUmVuZGVyQnVmZmVy
        fFN0cmluZ30gdGhpcyBvciB0aGUgY3VycmVudCBwcm9wZXJ0eSB2YWx1ZQog
        ICovCiAgcHJvcDogZnVuY3Rpb24obmFtZSwgdmFsdWUpIHsKICAgIHZhciBw
        cm9wZXJ0aWVzID0gdGhpcy5lbGVtZW50UHJvcGVydGllcyA9ICh0aGlzLmVs
        ZW1lbnRQcm9wZXJ0aWVzIHx8IHt9KTsKCiAgICBpZiAoYXJndW1lbnRzLmxl
        bmd0aCA9PT0gMSkgewogICAgICByZXR1cm4gcHJvcGVydGllc1tuYW1lXTsK
        ICAgIH0gZWxzZSB7CiAgICAgIHByb3BlcnRpZXNbbmFtZV0gPSB2YWx1ZTsK
        ICAgIH0KCiAgICByZXR1cm4gdGhpczsKICB9LAoKICAvKioKICAgIFJlbW92
        ZSBhbiBwcm9wZXJ0eSBmcm9tIHRoZSBsaXN0IG9mIHByb3BlcnRpZXMgdG8g
        cmVuZGVyLgoKICAgIEBtZXRob2QgcmVtb3ZlUHJvcAogICAgQHBhcmFtIHtT
        dHJpbmd9IG5hbWUgVGhlIG5hbWUgb2YgdGhlIHByb3BlcnR5CiAgICBAY2hh
        aW5hYmxlCiAgKi8KICByZW1vdmVQcm9wOiBmdW5jdGlvbihuYW1lKSB7CiAg
        ICB2YXIgcHJvcGVydGllcyA9IHRoaXMuZWxlbWVudFByb3BlcnRpZXM7CiAg
        ICBpZiAocHJvcGVydGllcykgeyBkZWxldGUgcHJvcGVydGllc1tuYW1lXTsg
        fQoKICAgIHJldHVybiB0aGlzOwogIH0sCgogIC8qKgogICAgQWRkcyBhIHN0
        eWxlIHRvIHRoZSBzdHlsZSBhdHRyaWJ1dGUgd2hpY2ggd2lsbCBiZSByZW5k
        ZXJlZCB0byB0aGUgZWxlbWVudC4KCiAgICBAbWV0aG9kIHN0eWxlCiAgICBA
        cGFyYW0ge1N0cmluZ30gbmFtZSBOYW1lIG9mIHRoZSBzdHlsZQogICAgQHBh
        cmFtIHtTdHJpbmd9IHZhbHVlCiAgICBAY2hhaW5hYmxlCiAgKi8KICBzdHls
        ZTogZnVuY3Rpb24obmFtZSwgdmFsdWUpIHsKICAgIHRoaXMuZWxlbWVudFN0
        eWxlID0gKHRoaXMuZWxlbWVudFN0eWxlIHx8IHt9KTsKCiAgICB0aGlzLmVs
        ZW1lbnRTdHlsZVtuYW1lXSA9IHZhbHVlOwogICAgcmV0dXJuIHRoaXM7CiAg
        fSwKCiAgYmVnaW46IGZ1bmN0aW9uKHRhZ05hbWUpIHsKICAgIHRoaXMudGFn
        TmFtZXMucHVzaCh0YWdOYW1lIHx8IG51bGwpOwogICAgcmV0dXJuIHRoaXM7
        CiAgfSwKCiAgcHVzaE9wZW5pbmdUYWc6IGZ1bmN0aW9uKCkgewogICAgdmFy
        IHRhZ05hbWUgPSB0aGlzLmN1cnJlbnRUYWdOYW1lKCk7CiAgICBpZiAoIXRh
        Z05hbWUpIHsgcmV0dXJuOyB9CgogICAgaWYgKHRoaXMuX2hhc0VsZW1lbnQg
        JiYgIXRoaXMuX2VsZW1lbnQgJiYgdGhpcy5idWZmZXIubGVuZ3RoID09PSAw
        KSB7CiAgICAgIHRoaXMuX2VsZW1lbnQgPSB0aGlzLmdlbmVyYXRlRWxlbWVu
        dCgpOwogICAgICByZXR1cm47CiAgICB9CgogICAgdmFyIGJ1ZmZlciA9IHRo
        aXMuYnVmZmVyLAogICAgICAgIGlkID0gdGhpcy5lbGVtZW50SWQsCiAgICAg
        ICAgY2xhc3NlcyA9IHRoaXMuY2xhc3NlcywKICAgICAgICBhdHRycyA9IHRo
        aXMuZWxlbWVudEF0dHJpYnV0ZXMsCiAgICAgICAgcHJvcHMgPSB0aGlzLmVs
        ZW1lbnRQcm9wZXJ0aWVzLAogICAgICAgIHN0eWxlID0gdGhpcy5lbGVtZW50
        U3R5bGUsCiAgICAgICAgYXR0ciwgcHJvcDsKCiAgICBidWZmZXIgKz0gJzwn
        ICsgc3RyaXBUYWdOYW1lKHRhZ05hbWUpOwoKICAgIGlmIChpZCkgewogICAg
        ICBidWZmZXIgKz0gJyBpZD0iJyArIGVzY2FwZUF0dHJpYnV0ZShpZCkgKyAn
        Iic7CiAgICAgIHRoaXMuZWxlbWVudElkID0gbnVsbDsKICAgIH0KICAgIGlm
        IChjbGFzc2VzKSB7CiAgICAgIGJ1ZmZlciArPSAnIGNsYXNzPSInICsgZXNj
        YXBlQXR0cmlidXRlKGNsYXNzZXMuam9pbignICcpKSArICciJzsKICAgICAg
        dGhpcy5jbGFzc2VzID0gbnVsbDsKICAgICAgdGhpcy5lbGVtZW50Q2xhc3Nl
        cyA9IG51bGw7CiAgICB9CgogICAgaWYgKHN0eWxlKSB7CiAgICAgIGJ1ZmZl
        ciArPSAnIHN0eWxlPSInOwoKICAgICAgZm9yIChwcm9wIGluIHN0eWxlKSB7
        CiAgICAgICAgaWYgKHN0eWxlLmhhc093blByb3BlcnR5KHByb3ApKSB7CiAg
        ICAgICAgICBidWZmZXIgKz0gcHJvcCArICc6JyArIGVzY2FwZUF0dHJpYnV0
        ZShzdHlsZVtwcm9wXSkgKyAnOyc7CiAgICAgICAgfQogICAgICB9CgogICAg
        ICBidWZmZXIgKz0gJyInOwoKICAgICAgdGhpcy5lbGVtZW50U3R5bGUgPSBu
        dWxsOwogICAgfQoKICAgIGlmIChhdHRycykgewogICAgICBmb3IgKGF0dHIg
        aW4gYXR0cnMpIHsKICAgICAgICBpZiAoYXR0cnMuaGFzT3duUHJvcGVydHko
        YXR0cikpIHsKICAgICAgICAgIGJ1ZmZlciArPSAnICcgKyBhdHRyICsgJz0i
        JyArIGVzY2FwZUF0dHJpYnV0ZShhdHRyc1thdHRyXSkgKyAnIic7CiAgICAg
        ICAgfQogICAgICB9CgogICAgICB0aGlzLmVsZW1lbnRBdHRyaWJ1dGVzID0g
        bnVsbDsKICAgIH0KCiAgICBpZiAocHJvcHMpIHsKICAgICAgZm9yIChwcm9w
        IGluIHByb3BzKSB7CiAgICAgICAgaWYgKHByb3BzLmhhc093blByb3BlcnR5
        KHByb3ApKSB7CiAgICAgICAgICB2YXIgdmFsdWUgPSBwcm9wc1twcm9wXTsK
        ICAgICAgICAgIGlmICh2YWx1ZSB8fCB0eXBlb2YodmFsdWUpID09PSAnbnVt
        YmVyJykgewogICAgICAgICAgICBpZiAodmFsdWUgPT09IHRydWUpIHsKICAg
        ICAgICAgICAgICBidWZmZXIgKz0gJyAnICsgcHJvcCArICc9IicgKyBwcm9w
        ICsgJyInOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIGJ1
        ZmZlciArPSAnICcgKyBwcm9wICsgJz0iJyArIGVzY2FwZUF0dHJpYnV0ZShw
        cm9wc1twcm9wXSkgKyAnIic7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0K
        ICAgICAgICB9CiAgICAgIH0KCiAgICAgIHRoaXMuZWxlbWVudFByb3BlcnRp
        ZXMgPSBudWxsOwogICAgfQoKICAgIGJ1ZmZlciArPSAnPic7CiAgICB0aGlz
        LmJ1ZmZlciA9IGJ1ZmZlcjsKICB9LAoKICBwdXNoQ2xvc2luZ1RhZzogZnVu
        Y3Rpb24oKSB7CiAgICB2YXIgdGFnTmFtZSA9IHRoaXMudGFnTmFtZXMucG9w
        KCk7CiAgICBpZiAodGFnTmFtZSkgeyB0aGlzLmJ1ZmZlciArPSAnPC8nICsg
        c3RyaXBUYWdOYW1lKHRhZ05hbWUpICsgJz4nOyB9CiAgfSwKCiAgY3VycmVu
        dFRhZ05hbWU6IGZ1bmN0aW9uKCkgewogICAgcmV0dXJuIHRoaXMudGFnTmFt
        ZXNbdGhpcy50YWdOYW1lcy5sZW5ndGgtMV07CiAgfSwKCiAgZ2VuZXJhdGVF
        bGVtZW50OiBmdW5jdGlvbigpIHsKICAgIHZhciB0YWdOYW1lID0gdGhpcy50
        YWdOYW1lcy5wb3AoKSwgLy8gcG9wIHNpbmNlIHdlIGRvbid0IG5lZWQgdG8g
        Y2xvc2UKICAgICAgICBpZCA9IHRoaXMuZWxlbWVudElkLAogICAgICAgIGNs
        YXNzZXMgPSB0aGlzLmNsYXNzZXMsCiAgICAgICAgYXR0cnMgPSB0aGlzLmVs
        ZW1lbnRBdHRyaWJ1dGVzLAogICAgICAgIHByb3BzID0gdGhpcy5lbGVtZW50
        UHJvcGVydGllcywKICAgICAgICBzdHlsZSA9IHRoaXMuZWxlbWVudFN0eWxl
        LAogICAgICAgIHN0eWxlQnVmZmVyID0gJycsIGF0dHIsIHByb3AsIHRhZ1N0
        cmluZzsKCiAgICBpZiAoYXR0cnMgJiYgYXR0cnMubmFtZSAmJiAhY2FuU2V0
        TmFtZU9uSW5wdXRzKSB7CiAgICAgIC8vIElFIGFsbG93cyBwYXNzaW5nIGEg
        dGFnIHRvIGNyZWF0ZUVsZW1lbnQuIFNlZSBub3RlIG9uIGBjYW5TZXROYW1l
        T25JbnB1dHNgIGFib3ZlIGFzIHdlbGwuCiAgICAgIHRhZ1N0cmluZyA9ICc8
        JytzdHJpcFRhZ05hbWUodGFnTmFtZSkrJyBuYW1lPSInK2VzY2FwZUF0dHJp
        YnV0ZShhdHRycy5uYW1lKSsnIj4nOwogICAgfSBlbHNlIHsKICAgICAgdGFn
        U3RyaW5nID0gdGFnTmFtZTsKICAgIH0KCiAgICB2YXIgZWxlbWVudCA9IGRv
        Y3VtZW50LmNyZWF0ZUVsZW1lbnQodGFnU3RyaW5nKSwKICAgICAgICAkZWxl
        bWVudCA9IEVtYmVyLiQoZWxlbWVudCk7CgogICAgaWYgKGlkKSB7CiAgICAg
        ICRlbGVtZW50LmF0dHIoJ2lkJywgaWQpOwogICAgICB0aGlzLmVsZW1lbnRJ
        ZCA9IG51bGw7CiAgICB9CiAgICBpZiAoY2xhc3NlcykgewogICAgICAkZWxl
        bWVudC5hdHRyKCdjbGFzcycsIGNsYXNzZXMuam9pbignICcpKTsKICAgICAg
        dGhpcy5jbGFzc2VzID0gbnVsbDsKICAgICAgdGhpcy5lbGVtZW50Q2xhc3Nl
        cyA9IG51bGw7CiAgICB9CgogICAgaWYgKHN0eWxlKSB7CiAgICAgIGZvciAo
        cHJvcCBpbiBzdHlsZSkgewogICAgICAgIGlmIChzdHlsZS5oYXNPd25Qcm9w
        ZXJ0eShwcm9wKSkgewogICAgICAgICAgc3R5bGVCdWZmZXIgKz0gKHByb3Ag
        KyAnOicgKyBzdHlsZVtwcm9wXSArICc7Jyk7CiAgICAgICAgfQogICAgICB9
        CgogICAgICAkZWxlbWVudC5hdHRyKCdzdHlsZScsIHN0eWxlQnVmZmVyKTsK
        CiAgICAgIHRoaXMuZWxlbWVudFN0eWxlID0gbnVsbDsKICAgIH0KCiAgICBp
        ZiAoYXR0cnMpIHsKICAgICAgZm9yIChhdHRyIGluIGF0dHJzKSB7CiAgICAg
        ICAgaWYgKGF0dHJzLmhhc093blByb3BlcnR5KGF0dHIpKSB7CiAgICAgICAg
        ICAkZWxlbWVudC5hdHRyKGF0dHIsIGF0dHJzW2F0dHJdKTsKICAgICAgICB9
        CiAgICAgIH0KCiAgICAgIHRoaXMuZWxlbWVudEF0dHJpYnV0ZXMgPSBudWxs
        OwogICAgfQoKICAgIGlmIChwcm9wcykgewogICAgICBmb3IgKHByb3AgaW4g
        cHJvcHMpIHsKICAgICAgICBpZiAocHJvcHMuaGFzT3duUHJvcGVydHkocHJv
        cCkpIHsKICAgICAgICAgICRlbGVtZW50LnByb3AocHJvcCwgcHJvcHNbcHJv
        cF0pOwogICAgICAgIH0KICAgICAgfQoKICAgICAgdGhpcy5lbGVtZW50UHJv
        cGVydGllcyA9IG51bGw7CiAgICB9CgogICAgcmV0dXJuIGVsZW1lbnQ7CiAg
        fSwKCiAgLyoqCiAgICBAbWV0aG9kIGVsZW1lbnQKICAgIEByZXR1cm4ge0RP
        TUVsZW1lbnR9IFRoZSBlbGVtZW50IGNvcnJlc3BvbmRpbmcgdG8gdGhlIGdl
        bmVyYXRlZCBIVE1MCiAgICAgIG9mIHRoaXMgYnVmZmVyCiAgKi8KICBlbGVt
        ZW50OiBmdW5jdGlvbigpIHsKICAgIHZhciBodG1sID0gdGhpcy5pbm5lclN0
        cmluZygpOwoKICAgIGlmIChodG1sKSB7CiAgICAgIHRoaXMuX2VsZW1lbnQg
        PSBFbWJlci5WaWV3VXRpbHMuc2V0SW5uZXJIVE1MKHRoaXMuX2VsZW1lbnQs
        IGh0bWwpOwogICAgfQoKICAgIHJldHVybiB0aGlzLl9lbGVtZW50OwogIH0s
        CgogIC8qKgogICAgR2VuZXJhdGVzIHRoZSBIVE1MIGNvbnRlbnQgZm9yIHRo
        aXMgYnVmZmVyLgoKICAgIEBtZXRob2Qgc3RyaW5nCiAgICBAcmV0dXJuIHtT
        dHJpbmd9IFRoZSBnZW5lcmF0ZWQgSFRNTAogICovCiAgc3RyaW5nOiBmdW5j
        dGlvbigpIHsKICAgIGlmICh0aGlzLl9oYXNFbGVtZW50ICYmIHRoaXMuX2Vs
        ZW1lbnQpIHsKICAgICAgLy8gRmlyZWZveCB2ZXJzaW9ucyA8IDExIGRvIG5v
        dCBoYXZlIHN1cHBvcnQgZm9yIGVsZW1lbnQub3V0ZXJIVE1MLgogICAgICB2
        YXIgdGhpc0VsZW1lbnQgPSB0aGlzLmVsZW1lbnQoKSwgb3V0ZXJIVE1MID0g
        dGhpc0VsZW1lbnQub3V0ZXJIVE1MOwogICAgICBpZiAodHlwZW9mIG91dGVy
        SFRNTCA9PT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgICByZXR1cm4gRW1iZXIu
        JCgnPGRpdi8+JykuYXBwZW5kKHRoaXNFbGVtZW50KS5odG1sKCk7CiAgICAg
        IH0KICAgICAgcmV0dXJuIG91dGVySFRNTDsKICAgIH0gZWxzZSB7CiAgICAg
        IHJldHVybiB0aGlzLmlubmVyU3RyaW5nKCk7CiAgICB9CiAgfSwKCiAgaW5u
        ZXJTdHJpbmc6IGZ1bmN0aW9uKCkgewogICAgcmV0dXJuIHRoaXMuYnVmZmVy
        OwogIH0KfTsKCn0pKCk7CgoKCihmdW5jdGlvbigpIHsKLyoqCkBtb2R1bGUg
        ZW1iZXIKQHN1Ym1vZHVsZSBlbWJlci12aWV3cwoqLwoKdmFyIGdldCA9IEVt
        YmVyLmdldCwgc2V0ID0gRW1iZXIuc2V0LCBmbXQgPSBFbWJlci5TdHJpbmcu
        Zm10OwoKLyoqCiAgYEVtYmVyLkV2ZW50RGlzcGF0Y2hlcmAgaGFuZGxlcyBk
        ZWxlZ2F0aW5nIGJyb3dzZXIgZXZlbnRzIHRvIHRoZWlyCiAgY29ycmVzcG9u
        ZGluZyBgRW1iZXIuVmlld3MuYCBGb3IgZXhhbXBsZSwgd2hlbiB5b3UgY2xp
        Y2sgb24gYSB2aWV3LAogIGBFbWJlci5FdmVudERpc3BhdGNoZXJgIGVuc3Vy
        ZXMgdGhhdCB0aGF0IHZpZXcncyBgbW91c2VEb3duYCBtZXRob2QgZ2V0cwog
        IGNhbGxlZC4KCiAgQGNsYXNzIEV2ZW50RGlzcGF0Y2hlcgogIEBuYW1lc3Bh
        Y2UgRW1iZXIKICBAcHJpdmF0ZQogIEBleHRlbmRzIEVtYmVyLk9iamVjdAoq
        LwpFbWJlci5FdmVudERpc3BhdGNoZXIgPSBFbWJlci5PYmplY3QuZXh0ZW5k
        KHsKCiAgLyoqCiAgICBUaGUgc2V0IG9mIGV2ZW50cyBuYW1lcyAoYW5kIGFz
        c29jaWF0ZWQgaGFuZGxlciBmdW5jdGlvbiBuYW1lcykgdG8gYmUgc2V0dXAK
        ICAgIGFuZCBkaXNwYXRjaGVkIGJ5IHRoZSBgRXZlbnREaXNwYXRjaGVyYC4g
        Q3VzdG9tIGV2ZW50cyBjYW4gYWRkZWQgdG8gdGhpcyBsaXN0IGF0IHNldHVw
        CiAgICB0aW1lLCBnZW5lcmFsbHkgdmlhIHRoZSBgRW1iZXIuQXBwbGljYXRp
        b24uY3VzdG9tRXZlbnRzYCBoYXNoLiBPbmx5IG92ZXJyaWRlIHRoaXMKICAg
        IGRlZmF1bHQgc2V0IHRvIHByZXZlbnQgdGhlIEV2ZW50RGlzcGF0Y2hlciBm
        cm9tIGxpc3RlbmluZyBvbiBzb21lIGV2ZW50cyBhbGwgdG9nZXRoZXIuCgog
        ICAgVGhpcyBzZXQgd2lsbCBiZSBtb2RpZmllZCBieSBgc2V0dXBgIHRvIGFs
        c28gaW5jbHVkZSBhbnkgZXZlbnRzIGFkZGVkIGF0IHRoYXQgdGltZS4KCiAg
        ICBAcHJvcGVydHkgZXZlbnRzCiAgICBAdHlwZSBPYmplY3QKICAqLwogIGV2
        ZW50czogewogICAgdG91Y2hzdGFydCAgOiAndG91Y2hTdGFydCcsCiAgICB0
        b3VjaG1vdmUgICA6ICd0b3VjaE1vdmUnLAogICAgdG91Y2hlbmQgICAgOiAn
        dG91Y2hFbmQnLAogICAgdG91Y2hjYW5jZWwgOiAndG91Y2hDYW5jZWwnLAog
        ICAga2V5ZG93biAgICAgOiAna2V5RG93bicsCiAgICBrZXl1cCAgICAgICA6
        ICdrZXlVcCcsCiAgICBrZXlwcmVzcyAgICA6ICdrZXlQcmVzcycsCiAgICBt
        b3VzZWRvd24gICA6ICdtb3VzZURvd24nLAogICAgbW91c2V1cCAgICAgOiAn
        bW91c2VVcCcsCiAgICBjb250ZXh0bWVudSA6ICdjb250ZXh0TWVudScsCiAg
        ICBjbGljayAgICAgICA6ICdjbGljaycsCiAgICBkYmxjbGljayAgICA6ICdk
        b3VibGVDbGljaycsCiAgICBtb3VzZW1vdmUgICA6ICdtb3VzZU1vdmUnLAog
        ICAgZm9jdXNpbiAgICAgOiAnZm9jdXNJbicsCiAgICBmb2N1c291dCAgICA6
        ICdmb2N1c091dCcsCiAgICBtb3VzZWVudGVyICA6ICdtb3VzZUVudGVyJywK
        ICAgIG1vdXNlbGVhdmUgIDogJ21vdXNlTGVhdmUnLAogICAgc3VibWl0ICAg
        ICAgOiAnc3VibWl0JywKICAgIGlucHV0ICAgICAgIDogJ2lucHV0JywKICAg
        IGNoYW5nZSAgICAgIDogJ2NoYW5nZScsCiAgICBkcmFnc3RhcnQgICA6ICdk
        cmFnU3RhcnQnLAogICAgZHJhZyAgICAgICAgOiAnZHJhZycsCiAgICBkcmFn
        ZW50ZXIgICA6ICdkcmFnRW50ZXInLAogICAgZHJhZ2xlYXZlICAgOiAnZHJh
        Z0xlYXZlJywKICAgIGRyYWdvdmVyICAgIDogJ2RyYWdPdmVyJywKICAgIGRy
        b3AgICAgICAgIDogJ2Ryb3AnLAogICAgZHJhZ2VuZCAgICAgOiAnZHJhZ0Vu
        ZCcKICB9LAoKICAvKioKICAgIFRoZSByb290IERPTSBlbGVtZW50IHRvIHdo
        aWNoIGV2ZW50IGxpc3RlbmVycyBzaG91bGQgYmUgYXR0YWNoZWQuIEV2ZW50
        CiAgICBsaXN0ZW5lcnMgd2lsbCBiZSBhdHRhY2hlZCB0byB0aGUgZG9jdW1l
        bnQgdW5sZXNzIHRoaXMgaXMgb3ZlcnJpZGRlbi4KCiAgICBDYW4gYmUgc3Bl
        Y2lmaWVkIGFzIGEgRE9NRWxlbWVudCBvciBhIHNlbGVjdG9yIHN0cmluZy4K
        CiAgICBUaGUgZGVmYXVsdCBib2R5IGlzIGEgc3RyaW5nIHNpbmNlIHRoaXMg
        bWF5IGJlIGV2YWx1YXRlZCBiZWZvcmUgZG9jdW1lbnQuYm9keQogICAgZXhp
        c3RzIGluIHRoZSBET00uCgogICAgQHByaXZhdGUKICAgIEBwcm9wZXJ0eSBy
        b290RWxlbWVudAogICAgQHR5cGUgRE9NRWxlbWVudAogICAgQGRlZmF1bHQg
        J2JvZHknCiAgKi8KICByb290RWxlbWVudDogJ2JvZHknLAoKICAvKioKICAg
        IFNldHMgdXAgZXZlbnQgbGlzdGVuZXJzIGZvciBzdGFuZGFyZCBicm93c2Vy
        IGV2ZW50cy4KCiAgICBUaGlzIHdpbGwgYmUgY2FsbGVkIGFmdGVyIHRoZSBi
        cm93c2VyIHNlbmRzIGEgYERPTUNvbnRlbnRSZWFkeWAgZXZlbnQuIEJ5CiAg
        ICBkZWZhdWx0LCBpdCB3aWxsIHNldCB1cCBhbGwgb2YgdGhlIGxpc3RlbmVy
        cyBvbiB0aGUgZG9jdW1lbnQgYm9keS4gSWYgeW91CiAgICB3b3VsZCBsaWtl
        IHRvIHJlZ2lzdGVyIHRoZSBsaXN0ZW5lcnMgb24gYSBkaWZmZXJlbnQgZWxl
        bWVudCwgc2V0IHRoZSBldmVudAogICAgZGlzcGF0Y2hlcidzIGByb290YCBw
        cm9wZXJ0eS4KCiAgICBAcHJpdmF0ZQogICAgQG1ldGhvZCBzZXR1cAogICAg
        QHBhcmFtIGFkZGVkRXZlbnRzIHtIYXNofQogICovCiAgc2V0dXA6IGZ1bmN0
        aW9uKGFkZGVkRXZlbnRzLCByb290RWxlbWVudCkgewogICAgdmFyIGV2ZW50
        LCBldmVudHMgPSBnZXQodGhpcywgJ2V2ZW50cycpOwoKICAgIEVtYmVyLiQu
        ZXh0ZW5kKGV2ZW50cywgYWRkZWRFdmVudHMgfHwge30pOwoKCiAgICBpZiAo
        IUVtYmVyLmlzTm9uZShyb290RWxlbWVudCkpIHsKICAgICAgc2V0KHRoaXMs
        ICdyb290RWxlbWVudCcsIHJvb3RFbGVtZW50KTsKICAgIH0KCiAgICByb290
        RWxlbWVudCA9IEVtYmVyLiQoZ2V0KHRoaXMsICdyb290RWxlbWVudCcpKTsK
        CiAgICBFbWJlci5hc3NlcnQoZm10KCdZb3UgY2Fubm90IHVzZSB0aGUgc2Ft
        ZSByb290IGVsZW1lbnQgKCVAKSBtdWx0aXBsZSB0aW1lcyBpbiBhbiBFbWJl
        ci5BcHBsaWNhdGlvbicsIFtyb290RWxlbWVudC5zZWxlY3RvciB8fCByb290
        RWxlbWVudFswXS50YWdOYW1lXSksICFyb290RWxlbWVudC5pcygnLmVtYmVy
        LWFwcGxpY2F0aW9uJykpOwogICAgRW1iZXIuYXNzZXJ0KCdZb3UgY2Fubm90
        IG1ha2UgYSBuZXcgRW1iZXIuQXBwbGljYXRpb24gdXNpbmcgYSByb290IGVs
        ZW1lbnQgdGhhdCBpcyBhIGRlc2NlbmRlbnQgb2YgYW4gZXhpc3RpbmcgRW1i
        ZXIuQXBwbGljYXRpb24nLCAhcm9vdEVsZW1lbnQuY2xvc2VzdCgnLmVtYmVy
        LWFwcGxpY2F0aW9uJykubGVuZ3RoKTsKICAgIEVtYmVyLmFzc2VydCgnWW91
        IGNhbm5vdCBtYWtlIGEgbmV3IEVtYmVyLkFwcGxpY2F0aW9uIHVzaW5nIGEg
        cm9vdCBlbGVtZW50IHRoYXQgaXMgYW4gYW5jZXN0b3Igb2YgYW4gZXhpc3Rp
        bmcgRW1iZXIuQXBwbGljYXRpb24nLCAhcm9vdEVsZW1lbnQuZmluZCgnLmVt
        YmVyLWFwcGxpY2F0aW9uJykubGVuZ3RoKTsKCiAgICByb290RWxlbWVudC5h
        ZGRDbGFzcygnZW1iZXItYXBwbGljYXRpb24nKTsKCiAgICBFbWJlci5hc3Nl
        cnQoJ1VuYWJsZSB0byBhZGQgImVtYmVyLWFwcGxpY2F0aW9uIiBjbGFzcyB0
        byByb290RWxlbWVudC4gTWFrZSBzdXJlIHlvdSBzZXQgcm9vdEVsZW1lbnQg
        dG8gdGhlIGJvZHkgb3IgYW4gZWxlbWVudCBpbiB0aGUgYm9keS4nLCByb290
        RWxlbWVudC5pcygnLmVtYmVyLWFwcGxpY2F0aW9uJykpOwoKICAgIGZvciAo
        ZXZlbnQgaW4gZXZlbnRzKSB7CiAgICAgIGlmIChldmVudHMuaGFzT3duUHJv
        cGVydHkoZXZlbnQpKSB7CiAgICAgICAgdGhpcy5zZXR1cEhhbmRsZXIocm9v
        dEVsZW1lbnQsIGV2ZW50LCBldmVudHNbZXZlbnRdKTsKICAgICAgfQogICAg
        fQogIH0sCgogIC8qKgogICAgUmVnaXN0ZXJzIGFuIGV2ZW50IGxpc3RlbmVy
        IG9uIHRoZSBkb2N1bWVudC4gSWYgdGhlIGdpdmVuIGV2ZW50IGlzCiAgICB0
        cmlnZ2VyZWQsIHRoZSBwcm92aWRlZCBldmVudCBoYW5kbGVyIHdpbGwgYmUg
        dHJpZ2dlcmVkIG9uIHRoZSB0YXJnZXQgdmlldy4KCiAgICBJZiB0aGUgdGFy
        Z2V0IHZpZXcgZG9lcyBub3QgaW1wbGVtZW50IHRoZSBldmVudCBoYW5kbGVy
        LCBvciBpZiB0aGUgaGFuZGxlcgogICAgcmV0dXJucyBgZmFsc2VgLCB0aGUg
        cGFyZW50IHZpZXcgd2lsbCBiZSBjYWxsZWQuIFRoZSBldmVudCB3aWxsIGNv
        bnRpbnVlIHRvCiAgICBidWJibGUgdG8gZWFjaCBzdWNjZXNzaXZlIHBhcmVu
        dCB2aWV3IHVudGlsIGl0IHJlYWNoZXMgdGhlIHRvcC4KCiAgICBGb3IgZXhh
        bXBsZSwgdG8gaGF2ZSB0aGUgYG1vdXNlRG93bmAgbWV0aG9kIGNhbGxlZCBv
        biB0aGUgdGFyZ2V0IHZpZXcgd2hlbgogICAgYSBgbW91c2Vkb3duYCBldmVu
        dCBpcyByZWNlaXZlZCBmcm9tIHRoZSBicm93c2VyLCBkbyB0aGUgZm9sbG93
        aW5nOgoKICAgIGBgYGphdmFzY3JpcHQKICAgIHNldHVwSGFuZGxlcignbW91
        c2Vkb3duJywgJ21vdXNlRG93bicpOwogICAgYGBgCgogICAgQHByaXZhdGUK
        ICAgIEBtZXRob2Qgc2V0dXBIYW5kbGVyCiAgICBAcGFyYW0ge0VsZW1lbnR9
        IHJvb3RFbGVtZW50CiAgICBAcGFyYW0ge1N0cmluZ30gZXZlbnQgdGhlIGJy
        b3dzZXItb3JpZ2luYXRlZCBldmVudCB0byBsaXN0ZW4gdG8KICAgIEBwYXJh
        bSB7U3RyaW5nfSBldmVudE5hbWUgdGhlIG5hbWUgb2YgdGhlIG1ldGhvZCB0
        byBjYWxsIG9uIHRoZSB2aWV3CiAgKi8KICBzZXR1cEhhbmRsZXI6IGZ1bmN0
        aW9uKHJvb3RFbGVtZW50LCBldmVudCwgZXZlbnROYW1lKSB7CiAgICB2YXIg
        c2VsZiA9IHRoaXM7CgogICAgcm9vdEVsZW1lbnQub24oZXZlbnQgKyAnLmVt
        YmVyJywgJy5lbWJlci12aWV3JywgZnVuY3Rpb24oZXZ0LCB0cmlnZ2VyaW5n
        TWFuYWdlcikgewogICAgICByZXR1cm4gRW1iZXIuaGFuZGxlRXJyb3JzKGZ1
        bmN0aW9uIGhhbmRsZVZpZXdFdmVudCgpIHsKICAgICAgICB2YXIgdmlldyA9
        IEVtYmVyLlZpZXcudmlld3NbdGhpcy5pZF0sCiAgICAgICAgICAgIHJlc3Vs
        dCA9IHRydWUsIG1hbmFnZXIgPSBudWxsOwoKICAgICAgICBtYW5hZ2VyID0g
        c2VsZi5fZmluZE5lYXJlc3RFdmVudE1hbmFnZXIodmlldyxldmVudE5hbWUp
        OwoKICAgICAgICBpZiAobWFuYWdlciAmJiBtYW5hZ2VyICE9PSB0cmlnZ2Vy
        aW5nTWFuYWdlcikgewogICAgICAgICAgcmVzdWx0ID0gc2VsZi5fZGlzcGF0
        Y2hFdmVudChtYW5hZ2VyLCBldnQsIGV2ZW50TmFtZSwgdmlldyk7CiAgICAg
        ICAgfSBlbHNlIGlmICh2aWV3KSB7CiAgICAgICAgICByZXN1bHQgPSBzZWxm
        Ll9idWJibGVFdmVudCh2aWV3LGV2dCxldmVudE5hbWUpOwogICAgICAgIH0g
        ZWxzZSB7CiAgICAgICAgICBldnQuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAg
        ICAgfQoKICAgICAgICByZXR1cm4gcmVzdWx0OwogICAgICB9LCB0aGlzKTsK
        ICAgIH0pOwoKICAgIHJvb3RFbGVtZW50Lm9uKGV2ZW50ICsgJy5lbWJlcics
        ICdbZGF0YS1lbWJlci1hY3Rpb25dJywgZnVuY3Rpb24oZXZ0KSB7CiAgICAg
        IHJldHVybiBFbWJlci5oYW5kbGVFcnJvcnMoZnVuY3Rpb24gaGFuZGxlQWN0
        aW9uRXZlbnQoKSB7CiAgICAgICAgdmFyIGFjdGlvbklkID0gRW1iZXIuJChl
        dnQuY3VycmVudFRhcmdldCkuYXR0cignZGF0YS1lbWJlci1hY3Rpb24nKSwK
        ICAgICAgICAgICAgYWN0aW9uICAgPSBFbWJlci5IYW5kbGViYXJzLkFjdGlv
        bkhlbHBlci5yZWdpc3RlcmVkQWN0aW9uc1thY3Rpb25JZF07CgogICAgICAg
        IC8vIFdlIGhhdmUgdG8gY2hlY2sgZm9yIGFjdGlvbiBoZXJlIHNpbmNlIGlu
        IHNvbWUgY2FzZXMsIGpRdWVyeSB3aWxsIHRyaWdnZXIKICAgICAgICAvLyBh
        biBldmVudCBvbiBgcmVtb3ZlQ2hpbGRgIChpLmUuIGZvY3Vzb3V0KSBhZnRl
        ciB3ZSd2ZSBhbHJlYWR5IHRvcm4gZG93biB0aGUKICAgICAgICAvLyBhY3Rp
        b24gaGFuZGxlcnMgZm9yIHRoZSB2aWV3LgogICAgICAgIGlmIChhY3Rpb24g
        JiYgYWN0aW9uLmV2ZW50TmFtZSA9PT0gZXZlbnROYW1lKSB7CiAgICAgICAg
        ICByZXR1cm4gYWN0aW9uLmhhbmRsZXIoZXZ0KTsKICAgICAgICB9CiAgICAg
        IH0sIHRoaXMpOwogICAgfSk7CiAgfSwKCiAgX2ZpbmROZWFyZXN0RXZlbnRN
        YW5hZ2VyOiBmdW5jdGlvbih2aWV3LCBldmVudE5hbWUpIHsKICAgIHZhciBt
        YW5hZ2VyID0gbnVsbDsKCiAgICB3aGlsZSAodmlldykgewogICAgICBtYW5h
        Z2VyID0gZ2V0KHZpZXcsICdldmVudE1hbmFnZXInKTsKICAgICAgaWYgKG1h
        bmFnZXIgJiYgbWFuYWdlcltldmVudE5hbWVdKSB7IGJyZWFrOyB9CgogICAg
        ICB2aWV3ID0gZ2V0KHZpZXcsICdwYXJlbnRWaWV3Jyk7CiAgICB9CgogICAg
        cmV0dXJuIG1hbmFnZXI7CiAgfSwKCiAgX2Rpc3BhdGNoRXZlbnQ6IGZ1bmN0
        aW9uKG9iamVjdCwgZXZ0LCBldmVudE5hbWUsIHZpZXcpIHsKICAgIHZhciBy
        ZXN1bHQgPSB0cnVlOwoKICAgIHZhciBoYW5kbGVyID0gb2JqZWN0W2V2ZW50
        TmFtZV07CiAgICBpZiAoRW1iZXIudHlwZU9mKGhhbmRsZXIpID09PSAnZnVu
        Y3Rpb24nKSB7CiAgICAgIHJlc3VsdCA9IEVtYmVyLnJ1bihmdW5jdGlvbigp
        IHsKICAgICAgICByZXR1cm4gaGFuZGxlci5jYWxsKG9iamVjdCwgZXZ0LCB2
        aWV3KTsKICAgICAgfSk7CiAgICAgIC8vIERvIG5vdCBwcmV2ZW50RGVmYXVs
        dCBpbiBldmVudE1hbmFnZXJzLgogICAgICBldnQuc3RvcFByb3BhZ2F0aW9u
        KCk7CiAgICB9CiAgICBlbHNlIHsKICAgICAgcmVzdWx0ID0gdGhpcy5fYnVi
        YmxlRXZlbnQodmlldywgZXZ0LCBldmVudE5hbWUpOwogICAgfQoKICAgIHJl
        dHVybiByZXN1bHQ7CiAgfSwKCiAgX2J1YmJsZUV2ZW50OiBmdW5jdGlvbih2
        aWV3LCBldnQsIGV2ZW50TmFtZSkgewogICAgcmV0dXJuIEVtYmVyLnJ1bihm
        dW5jdGlvbiBidWJibGVFdmVudCgpIHsKICAgICAgcmV0dXJuIHZpZXcuaGFu
        ZGxlRXZlbnQoZXZlbnROYW1lLCBldnQpOwogICAgfSk7CiAgfSwKCiAgZGVz
        dHJveTogZnVuY3Rpb24oKSB7CiAgICB2YXIgcm9vdEVsZW1lbnQgPSBnZXQo
        dGhpcywgJ3Jvb3RFbGVtZW50Jyk7CiAgICBFbWJlci4kKHJvb3RFbGVtZW50
        KS5vZmYoJy5lbWJlcicsICcqKicpLnJlbW92ZUNsYXNzKCdlbWJlci1hcHBs
        aWNhdGlvbicpOwogICAgcmV0dXJuIHRoaXMuX3N1cGVyKCk7CiAgfQp9KTsK
        Cn0pKCk7CgoKCihmdW5jdGlvbigpIHsKLyoqCkBtb2R1bGUgZW1iZXIKQHN1
        Ym1vZHVsZSBlbWJlci12aWV3cwoqLwoKLy8gQWRkIGEgbmV3IG5hbWVkIHF1
        ZXVlIGZvciByZW5kZXJpbmcgdmlld3MgdGhhdCBoYXBwZW5zCi8vIGFmdGVy
        IGJpbmRpbmdzIGhhdmUgc3luY2VkLCBhbmQgYSBxdWV1ZSBmb3Igc2NoZWR1
        bGluZyBhY3Rpb25zCi8vIHRoYXQgdGhhdCBzaG91bGQgb2NjdXIgYWZ0ZXIg
        dmlldyByZW5kZXJpbmcuCnZhciBxdWV1ZXMgPSBFbWJlci5ydW4ucXVldWVz
        LAogICAgaW5kZXhPZiA9IEVtYmVyLkFycmF5UG9seWZpbGxzLmluZGV4T2Y7
        CnF1ZXVlcy5zcGxpY2UoaW5kZXhPZi5jYWxsKHF1ZXVlcywgJ2FjdGlvbnMn
        KSsxLCAwLCAncmVuZGVyJywgJ2FmdGVyUmVuZGVyJyk7Cgp9KSgpOwoKCgoo
        ZnVuY3Rpb24oKSB7Ci8qKgpAbW9kdWxlIGVtYmVyCkBzdWJtb2R1bGUgZW1i
        ZXItdmlld3MKKi8KCnZhciBnZXQgPSBFbWJlci5nZXQsIHNldCA9IEVtYmVy
        LnNldDsKCi8vIE9yaWdpbmFsIGNsYXNzIGRlY2xhcmF0aW9uIGFuZCBkb2N1
        bWVudGF0aW9uIGluIHJ1bnRpbWUvbGliL2NvbnRyb2xsZXJzL2NvbnRyb2xs
        ZXIuanMKLy8gTk9URTogSXQgbWF5IGJlIHBvc3NpYmxlIHdpdGggWVVJRG9j
        IHRvIGNvbWJpbmUgZG9jcyBpbiB0d28gbG9jYXRpb25zCgovKioKQWRkaXRp
        b25hbCBtZXRob2RzIGZvciB0aGUgQ29udHJvbGxlck1peGluCgpAY2xhc3Mg
        Q29udHJvbGxlck1peGluCkBuYW1lc3BhY2UgRW1iZXIKKi8KRW1iZXIuQ29u
        dHJvbGxlck1peGluLnJlb3Blbih7CiAgdGFyZ2V0OiBudWxsLAogIG5hbWVz
        cGFjZTogbnVsbCwKICB2aWV3OiBudWxsLAogIGNvbnRhaW5lcjogbnVsbCwK
        ICBfY2hpbGRDb250YWluZXJzOiBudWxsLAoKICBpbml0OiBmdW5jdGlvbigp
        IHsKICAgIHRoaXMuX3N1cGVyKCk7CiAgICBzZXQodGhpcywgJ19jaGlsZENv
        bnRhaW5lcnMnLCB7fSk7CiAgfSwKCiAgX21vZGVsRGlkQ2hhbmdlOiBFbWJl
        ci5vYnNlcnZlcignbW9kZWwnLCBmdW5jdGlvbigpIHsKICAgIHZhciBjb250
        YWluZXJzID0gZ2V0KHRoaXMsICdfY2hpbGRDb250YWluZXJzJyk7CgogICAg
        Zm9yICh2YXIgcHJvcCBpbiBjb250YWluZXJzKSB7CiAgICAgIGlmICghY29u
        dGFpbmVycy5oYXNPd25Qcm9wZXJ0eShwcm9wKSkgeyBjb250aW51ZTsgfQog
        ICAgICBjb250YWluZXJzW3Byb3BdLmRlc3Ryb3koKTsKICAgIH0KCiAgICBz
        ZXQodGhpcywgJ19jaGlsZENvbnRhaW5lcnMnLCB7fSk7CiAgfSkKfSk7Cgp9
        KSgpOwoKCgooZnVuY3Rpb24oKSB7Cgp9KSgpOwoKCgooZnVuY3Rpb24oKSB7
        CnZhciBzdGF0ZXMgPSB7fTsKCi8qKgpAbW9kdWxlIGVtYmVyCkBzdWJtb2R1
        bGUgZW1iZXItdmlld3MKKi8KCnZhciBnZXQgPSBFbWJlci5nZXQsIHNldCA9
        IEVtYmVyLnNldDsKdmFyIGd1aWRGb3IgPSBFbWJlci5ndWlkRm9yOwp2YXIg
        YV9mb3JFYWNoID0gRW1iZXIuRW51bWVyYWJsZVV0aWxzLmZvckVhY2g7CnZh
        ciBhX2FkZE9iamVjdCA9IEVtYmVyLkVudW1lcmFibGVVdGlscy5hZGRPYmpl
        Y3Q7CnZhciBtZXRhID0gRW1iZXIubWV0YTsKCnZhciBjaGlsZFZpZXdzUHJv
        cGVydHkgPSBFbWJlci5jb21wdXRlZChmdW5jdGlvbigpIHsKICB2YXIgY2hp
        bGRWaWV3cyA9IHRoaXMuX2NoaWxkVmlld3MsIHJldCA9IEVtYmVyLkEoKSwg
        dmlldyA9IHRoaXM7CgogIGFfZm9yRWFjaChjaGlsZFZpZXdzLCBmdW5jdGlv
        bih2aWV3KSB7CiAgICB2YXIgY3VycmVudENoaWxkVmlld3M7CiAgICBpZiAo
        dmlldy5pc1ZpcnR1YWwpIHsKICAgICAgaWYgKGN1cnJlbnRDaGlsZFZpZXdz
        ID0gZ2V0KHZpZXcsICdjaGlsZFZpZXdzJykpIHsKICAgICAgICByZXQucHVz
        aE9iamVjdHMoY3VycmVudENoaWxkVmlld3MpOwogICAgICB9CiAgICB9IGVs
        c2UgewogICAgICByZXQucHVzaCh2aWV3KTsKICAgIH0KICB9KTsKCiAgcmV0
        LnJlcGxhY2UgPSBmdW5jdGlvbiAoaWR4LCByZW1vdmVkQ291bnQsIGFkZGVk
        Vmlld3MpIHsKICAgIGlmICh2aWV3IGluc3RhbmNlb2YgRW1iZXIuQ29udGFp
        bmVyVmlldykgewogICAgICBFbWJlci5kZXByZWNhdGUoIk1hbmlwdWxhdGlu
        ZyBhbiBFbWJlci5Db250YWluZXJWaWV3IHRocm91Z2ggaXRzIGNoaWxkVmll
        d3MgcHJvcGVydHkgaXMgZGVwcmVjYXRlZC4gUGxlYXNlIHVzZSB0aGUgQ29u
        dGFpbmVyVmlldyBpbnN0YW5jZSBpdHNlbGYgYXMgYW4gRW1iZXIuTXV0YWJs
        ZUFycmF5LiIpOwogICAgICByZXR1cm4gdmlldy5yZXBsYWNlKGlkeCwgcmVt
        b3ZlZENvdW50LCBhZGRlZFZpZXdzKTsKICAgIH0KICAgIHRocm93IG5ldyBF
        bWJlci5FcnJvcigiY2hpbGRWaWV3cyBpcyBpbW11dGFibGUiKTsKICB9OwoK
        ICByZXR1cm4gcmV0Owp9KTsKCkVtYmVyLndhcm4oIlRoZSBWSUVXX1BSRVNF
        UlZFU19DT05URVhUIGZsYWcgaGFzIGJlZW4gcmVtb3ZlZCBhbmQgdGhlIGZ1
        bmN0aW9uYWxpdHkgY2FuIG5vIGxvbmdlciBiZSBkaXNhYmxlZC4iLCBFbWJl
        ci5FTlYuVklFV19QUkVTRVJWRVNfQ09OVEVYVCAhPT0gZmFsc2UpOwoKLyoq
        CiAgR2xvYmFsIGhhc2ggb2Ygc2hhcmVkIHRlbXBsYXRlcy4gVGhpcyB3aWxs
        IGF1dG9tYXRpY2FsbHkgYmUgcG9wdWxhdGVkCiAgYnkgdGhlIGJ1aWxkIHRv
        b2xzIHNvIHRoYXQgeW91IGNhbiBzdG9yZSB5b3VyIEhhbmRsZWJhcnMgdGVt
        cGxhdGVzIGluCiAgc2VwYXJhdGUgZmlsZXMgdGhhdCBnZXQgbG9hZGVkIGlu
        dG8gSmF2YVNjcmlwdCBhdCBidWlsZHRpbWUuCgogIEBwcm9wZXJ0eSBURU1Q
        TEFURVMKICBAZm9yIEVtYmVyCiAgQHR5cGUgSGFzaAoqLwpFbWJlci5URU1Q
        TEFURVMgPSB7fTsKCi8qKgogIGBFbWJlci5Db3JlVmlld2AgaXMgYW4gYWJz
        dHJhY3QgY2xhc3MgdGhhdCBleGlzdHMgdG8gZ2l2ZSB2aWV3LWxpa2UgYmVo
        YXZpb3IKICB0byBib3RoIEVtYmVyJ3MgbWFpbiB2aWV3IGNsYXNzIGBFbWJl
        ci5WaWV3YCBhbmQgb3RoZXIgY2xhc3NlcyBsaWtlCiAgYEVtYmVyLl9TaW1w
        bGVNZXRhbW9ycGhWaWV3YCB0aGF0IGRvbid0IG5lZWQgdGhlIGZ1bGx5IGZ1
        bmN0aW9uYWx0aXkgb2YKICBgRW1iZXIuVmlld2AuCgogIFVubGVzcyB5b3Ug
        aGF2ZSBzcGVjaWZpYyBuZWVkcyBmb3IgYENvcmVWaWV3YCwgeW91IHdpbGwg
        dXNlIGBFbWJlci5WaWV3YAogIGluIHlvdXIgYXBwbGljYXRpb25zLgoKICBA
        Y2xhc3MgQ29yZVZpZXcKICBAbmFtZXNwYWNlIEVtYmVyCiAgQGV4dGVuZHMg
        RW1iZXIuT2JqZWN0CiAgQHVzZXMgRW1iZXIuRXZlbnRlZAogIEB1c2VzIEVt
        YmVyLkFjdGlvbkhhbmRsZXIKKi8KCkVtYmVyLkNvcmVWaWV3ID0gRW1iZXIu
        T2JqZWN0LmV4dGVuZChFbWJlci5FdmVudGVkLCBFbWJlci5BY3Rpb25IYW5k
        bGVyLCB7CiAgaXNWaWV3OiB0cnVlLAoKICBzdGF0ZXM6IHN0YXRlcywKCiAg
        aW5pdDogZnVuY3Rpb24oKSB7CiAgICB0aGlzLl9zdXBlcigpOwogICAgdGhp
        cy50cmFuc2l0aW9uVG8oJ3ByZVJlbmRlcicpOwogIH0sCgogIC8qKgogICAg
        SWYgdGhlIHZpZXcgaXMgY3VycmVudGx5IGluc2VydGVkIGludG8gdGhlIERP
        TSBvZiBhIHBhcmVudCB2aWV3LCB0aGlzCiAgICBwcm9wZXJ0eSB3aWxsIHBv
        aW50IHRvIHRoZSBwYXJlbnQgb2YgdGhlIHZpZXcuCgogICAgQHByb3BlcnR5
        IHBhcmVudFZpZXcKICAgIEB0eXBlIEVtYmVyLlZpZXcKICAgIEBkZWZhdWx0
        IG51bGwKICAqLwogIHBhcmVudFZpZXc6IEVtYmVyLmNvbXB1dGVkKGZ1bmN0
        aW9uKCkgewogICAgdmFyIHBhcmVudCA9IHRoaXMuX3BhcmVudFZpZXc7Cgog
        ICAgaWYgKHBhcmVudCAmJiBwYXJlbnQuaXNWaXJ0dWFsKSB7CiAgICAgIHJl
        dHVybiBnZXQocGFyZW50LCAncGFyZW50VmlldycpOwogICAgfSBlbHNlIHsK
        ICAgICAgcmV0dXJuIHBhcmVudDsKICAgIH0KICB9KS5wcm9wZXJ0eSgnX3Bh
        cmVudFZpZXcnKSwKCiAgc3RhdGU6IG51bGwsCgogIF9wYXJlbnRWaWV3OiBu
        dWxsLAoKICAvLyByZXR1cm4gdGhlIGN1cnJlbnQgdmlldywgbm90IGluY2x1
        ZGluZyB2aXJ0dWFsIHZpZXdzCiAgY29uY3JldGVWaWV3OiBFbWJlci5jb21w
        dXRlZChmdW5jdGlvbigpIHsKICAgIGlmICghdGhpcy5pc1ZpcnR1YWwpIHsg
        cmV0dXJuIHRoaXM7IH0KICAgIGVsc2UgeyByZXR1cm4gZ2V0KHRoaXMsICdw
        YXJlbnRWaWV3Jyk7IH0KICB9KS5wcm9wZXJ0eSgncGFyZW50VmlldycpLAoK
        ICBpbnN0cnVtZW50TmFtZTogJ2NvcmVfdmlldycsCgogIGluc3RydW1lbnRE
        ZXRhaWxzOiBmdW5jdGlvbihoYXNoKSB7CiAgICBoYXNoLm9iamVjdCA9IHRo
        aXMudG9TdHJpbmcoKTsKICB9LAoKICAvKioKICAgIEludm9rZWQgYnkgdGhl
        IHZpZXcgc3lzdGVtIHdoZW4gdGhpcyB2aWV3IG5lZWRzIHRvIHByb2R1Y2Ug
        YW4gSFRNTAogICAgcmVwcmVzZW50YXRpb24uIFRoaXMgbWV0aG9kIHdpbGwg
        Y3JlYXRlIGEgbmV3IHJlbmRlciBidWZmZXIsIGlmIG5lZWRlZCwKICAgIHRo
        ZW4gYXBwbHkgYW55IGRlZmF1bHQgYXR0cmlidXRlcywgc3VjaCBhcyBjbGFz
        cyBuYW1lcyBhbmQgdmlzaWJpbGl0eS4KICAgIEZpbmFsbHksIHRoZSBgcmVu
        ZGVyKClgIG1ldGhvZCBpcyBpbnZva2VkLCB3aGljaCBpcyByZXNwb25zaWJs
        ZSBmb3IKICAgIGRvaW5nIHRoZSBidWxrIG9mIHRoZSByZW5kZXJpbmcuCgog
        ICAgWW91IHNob3VsZCBub3QgbmVlZCB0byBvdmVycmlkZSB0aGlzIG1ldGhv
        ZDsgaW5zdGVhZCwgaW1wbGVtZW50IHRoZQogICAgYHRlbXBsYXRlYCBwcm9w
        ZXJ0eSwgb3IgaWYgeW91IG5lZWQgbW9yZSBjb250cm9sLCBvdmVycmlkZSB0
        aGUgYHJlbmRlcmAKICAgIG1ldGhvZC4KCiAgICBAbWV0aG9kIHJlbmRlclRv
        QnVmZmVyCiAgICBAcGFyYW0ge0VtYmVyLlJlbmRlckJ1ZmZlcn0gYnVmZmVy
        IHRoZSByZW5kZXIgYnVmZmVyLiBJZiBubyBidWZmZXIgaXMKICAgICAgcGFz
        c2VkLCBhIGRlZmF1bHQgYnVmZmVyLCB1c2luZyB0aGUgY3VycmVudCB2aWV3
        J3MgYHRhZ05hbWVgLCB3aWxsCiAgICAgIGJlIHVzZWQuCiAgICBAcHJpdmF0
        ZQogICovCiAgcmVuZGVyVG9CdWZmZXI6IGZ1bmN0aW9uKHBhcmVudEJ1ZmZl
        ciwgYnVmZmVyT3BlcmF0aW9uKSB7CiAgICB2YXIgbmFtZSA9ICdyZW5kZXIu
        JyArIHRoaXMuaW5zdHJ1bWVudE5hbWUsCiAgICAgICAgZGV0YWlscyA9IHt9
        OwoKICAgIHRoaXMuaW5zdHJ1bWVudERldGFpbHMoZGV0YWlscyk7CgogICAg
        cmV0dXJuIEVtYmVyLmluc3RydW1lbnQobmFtZSwgZGV0YWlscywgZnVuY3Rp
        b24gaW5zdHJ1bWVudFJlbmRlclRvQnVmZmVyKCkgewogICAgICByZXR1cm4g
        dGhpcy5fcmVuZGVyVG9CdWZmZXIocGFyZW50QnVmZmVyLCBidWZmZXJPcGVy
        YXRpb24pOwogICAgfSwgdGhpcyk7CiAgfSwKCiAgX3JlbmRlclRvQnVmZmVy
        OiBmdW5jdGlvbihwYXJlbnRCdWZmZXIsIGJ1ZmZlck9wZXJhdGlvbikgewog
        ICAgLy8gSWYgdGhpcyBpcyB0aGUgdG9wLW1vc3Qgdmlldywgc3RhcnQgYSBu
        ZXcgYnVmZmVyLiBPdGhlcndpc2UsCiAgICAvLyBjcmVhdGUgYSBuZXcgYnVm
        ZmVyIHJlbGF0aXZlIHRvIHRoZSBvcmlnaW5hbCB1c2luZyB0aGUKICAgIC8v
        IHByb3ZpZGVkIGJ1ZmZlciBvcGVyYXRpb24gKGZvciBleGFtcGxlLCBgaW5z
        ZXJ0QWZ0ZXJgIHdpbGwKICAgIC8vIGluc2VydCBhIG5ldyBidWZmZXIgYWZ0
        ZXIgdGhlICJwYXJlbnQgYnVmZmVyIikuCiAgICB2YXIgdGFnTmFtZSA9IHRo
        aXMudGFnTmFtZTsKCiAgICBpZiAodGFnTmFtZSA9PT0gbnVsbCB8fCB0YWdO
        YW1lID09PSB1bmRlZmluZWQpIHsKICAgICAgdGFnTmFtZSA9ICdkaXYnOwog
        ICAgfQoKICAgIHZhciBidWZmZXIgPSB0aGlzLmJ1ZmZlciA9IHBhcmVudEJ1
        ZmZlciAmJiBwYXJlbnRCdWZmZXIuYmVnaW4odGFnTmFtZSkgfHwgRW1iZXIu
        UmVuZGVyQnVmZmVyKHRhZ05hbWUpOwogICAgdGhpcy50cmFuc2l0aW9uVG8o
        J2luQnVmZmVyJywgZmFsc2UpOwoKICAgIHRoaXMuYmVmb3JlUmVuZGVyKGJ1
        ZmZlcik7CiAgICB0aGlzLnJlbmRlcihidWZmZXIpOwogICAgdGhpcy5hZnRl
        clJlbmRlcihidWZmZXIpOwoKICAgIHJldHVybiBidWZmZXI7CiAgfSwKCiAg
        LyoqCiAgICBPdmVycmlkZSB0aGUgZGVmYXVsdCBldmVudCBmaXJpbmcgZnJv
        bSBgRW1iZXIuRXZlbnRlZGAgdG8KICAgIGFsc28gY2FsbCBtZXRob2RzIHdp
        dGggdGhlIGdpdmVuIG5hbWUuCgogICAgQG1ldGhvZCB0cmlnZ2VyCiAgICBA
        cGFyYW0gbmFtZSB7U3RyaW5nfQogICAgQHByaXZhdGUKICAqLwogIHRyaWdn
        ZXI6IGZ1bmN0aW9uKG5hbWUpIHsKICAgIHRoaXMuX3N1cGVyLmFwcGx5KHRo
        aXMsIGFyZ3VtZW50cyk7CiAgICB2YXIgbWV0aG9kID0gdGhpc1tuYW1lXTsK
        ICAgIGlmIChtZXRob2QpIHsKICAgICAgdmFyIGFyZ3MgPSBbXSwgaSwgbDsK
        ICAgICAgZm9yIChpID0gMSwgbCA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBs
        OyBpKyspIHsKICAgICAgICBhcmdzLnB1c2goYXJndW1lbnRzW2ldKTsKICAg
        ICAgfQogICAgICByZXR1cm4gbWV0aG9kLmFwcGx5KHRoaXMsIGFyZ3MpOwog
        ICAgfQogIH0sCgogIGRlcHJlY2F0ZWRTZW5kSGFuZGxlczogZnVuY3Rpb24o
        YWN0aW9uTmFtZSkgewogICAgcmV0dXJuICEhdGhpc1thY3Rpb25OYW1lXTsK
        ICB9LAoKICBkZXByZWNhdGVkU2VuZDogZnVuY3Rpb24oYWN0aW9uTmFtZSkg
        ewogICAgdmFyIGFyZ3MgPSBbXS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSk7
        CiAgICBFbWJlci5hc3NlcnQoJycgKyB0aGlzICsgIiBoYXMgdGhlIGFjdGlv
        biAiICsgYWN0aW9uTmFtZSArICIgYnV0IGl0IGlzIG5vdCBhIGZ1bmN0aW9u
        IiwgdHlwZW9mIHRoaXNbYWN0aW9uTmFtZV0gPT09ICdmdW5jdGlvbicpOwog
        ICAgRW1iZXIuZGVwcmVjYXRlKCdBY3Rpb24gaGFuZGxlcnMgaW1wbGVtZW50
        ZWQgZGlyZWN0bHkgb24gdmlld3MgYXJlIGRlcHJlY2F0ZWQgaW4gZmF2b3Ig
        b2YgYWN0aW9uIGhhbmRsZXJzIG9uIGFuIGBhY3Rpb25zYCBvYmplY3QgKCBh
        Y3Rpb246IGAnICsgYWN0aW9uTmFtZSArICdgIG9uICcgKyB0aGlzICsgJykn
        LCBmYWxzZSk7CiAgICB0aGlzW2FjdGlvbk5hbWVdLmFwcGx5KHRoaXMsIGFy
        Z3MpOwogICAgcmV0dXJuOwogIH0sCgogIGhhczogZnVuY3Rpb24obmFtZSkg
        ewogICAgcmV0dXJuIEVtYmVyLnR5cGVPZih0aGlzW25hbWVdKSA9PT0gJ2Z1
        bmN0aW9uJyB8fCB0aGlzLl9zdXBlcihuYW1lKTsKICB9LAoKICBkZXN0cm95
        OiBmdW5jdGlvbigpIHsKICAgIHZhciBwYXJlbnQgPSB0aGlzLl9wYXJlbnRW
        aWV3OwoKICAgIGlmICghdGhpcy5fc3VwZXIoKSkgeyByZXR1cm47IH0KCiAg
        ICAvLyBkZXN0cm95IHRoZSBlbGVtZW50IC0tIHRoaXMgd2lsbCBhdm9pZCBl
        YWNoIGNoaWxkIHZpZXcgZGVzdHJveWluZwogICAgLy8gdGhlIGVsZW1lbnQg
        b3ZlciBhbmQgb3ZlciBhZ2Fpbi4uLgogICAgaWYgKCF0aGlzLnJlbW92ZWRG
        cm9tRE9NKSB7IHRoaXMuZGVzdHJveUVsZW1lbnQoKTsgfQoKICAgIC8vIHJl
        bW92ZSBmcm9tIHBhcmVudCBpZiBmb3VuZC4gRG9uJ3QgY2FsbCByZW1vdmVG
        cm9tUGFyZW50LAogICAgLy8gYXMgcmVtb3ZlRnJvbVBhcmVudCB3aWxsIHRy
        eSB0byByZW1vdmUgdGhlIGVsZW1lbnQgZnJvbQogICAgLy8gdGhlIERPTSBh
        Z2Fpbi4KICAgIGlmIChwYXJlbnQpIHsgcGFyZW50LnJlbW92ZUNoaWxkKHRo
        aXMpOyB9CgogICAgdGhpcy50cmFuc2l0aW9uVG8oJ2Rlc3Ryb3lpbmcnLCBm
        YWxzZSk7CgogICAgcmV0dXJuIHRoaXM7CiAgfSwKCiAgY2xlYXJSZW5kZXJl
        ZENoaWxkcmVuOiBFbWJlci5LLAogIHRyaWdnZXJSZWN1cnNpdmVseTogRW1i
        ZXIuSywKICBpbnZva2VSZWN1cnNpdmVseTogRW1iZXIuSywKICB0cmFuc2l0
        aW9uVG86IEVtYmVyLkssCiAgZGVzdHJveUVsZW1lbnQ6IEVtYmVyLksKfSk7
        Cgp2YXIgVmlld0NvbGxlY3Rpb24gPSBFbWJlci5fVmlld0NvbGxlY3Rpb24g
        PSBmdW5jdGlvbihpbml0aWFsVmlld3MpIHsKICB2YXIgdmlld3MgPSB0aGlz
        LnZpZXdzID0gaW5pdGlhbFZpZXdzIHx8IFtdOwogIHRoaXMubGVuZ3RoID0g
        dmlld3MubGVuZ3RoOwp9OwoKVmlld0NvbGxlY3Rpb24ucHJvdG90eXBlID0g
        ewogIGxlbmd0aDogMCwKCiAgdHJpZ2dlcjogZnVuY3Rpb24oZXZlbnROYW1l
        KSB7CiAgICB2YXIgdmlld3MgPSB0aGlzLnZpZXdzLCB2aWV3OwogICAgZm9y
        ICh2YXIgaSA9IDAsIGwgPSB2aWV3cy5sZW5ndGg7IGkgPCBsOyBpKyspIHsK
        ICAgICAgdmlldyA9IHZpZXdzW2ldOwogICAgICBpZiAodmlldy50cmlnZ2Vy
        KSB7IHZpZXcudHJpZ2dlcihldmVudE5hbWUpOyB9CiAgICB9CiAgfSwKCiAg
        dHJpZ2dlclJlY3Vyc2l2ZWx5OiBmdW5jdGlvbihldmVudE5hbWUpIHsKICAg
        IHZhciB2aWV3cyA9IHRoaXMudmlld3M7CiAgICBmb3IgKHZhciBpID0gMCwg
        bCA9IHZpZXdzLmxlbmd0aDsgaSA8IGw7IGkrKykgewogICAgICB2aWV3c1tp
        XS50cmlnZ2VyUmVjdXJzaXZlbHkoZXZlbnROYW1lKTsKICAgIH0KICB9LAoK
        ICBpbnZva2VSZWN1cnNpdmVseTogZnVuY3Rpb24oZm4pIHsKICAgIHZhciB2
        aWV3cyA9IHRoaXMudmlld3MsIHZpZXc7CgogICAgZm9yICh2YXIgaSA9IDAs
        IGwgPSB2aWV3cy5sZW5ndGg7IGkgPCBsOyBpKyspIHsKICAgICAgdmlldyA9
        IHZpZXdzW2ldOwogICAgICBmbih2aWV3KTsKICAgIH0KICB9LAoKICB0cmFu
        c2l0aW9uVG86IGZ1bmN0aW9uKHN0YXRlLCBjaGlsZHJlbikgewogICAgdmFy
        IHZpZXdzID0gdGhpcy52aWV3czsKICAgIGZvciAodmFyIGkgPSAwLCBsID0g
        dmlld3MubGVuZ3RoOyBpIDwgbDsgaSsrKSB7CiAgICAgIHZpZXdzW2ldLnRy
        YW5zaXRpb25UbyhzdGF0ZSwgY2hpbGRyZW4pOwogICAgfQogIH0sCgogIHB1
        c2g6IGZ1bmN0aW9uKCkgewogICAgdGhpcy5sZW5ndGggKz0gYXJndW1lbnRz
        Lmxlbmd0aDsKICAgIHZhciB2aWV3cyA9IHRoaXMudmlld3M7CiAgICByZXR1
        cm4gdmlld3MucHVzaC5hcHBseSh2aWV3cywgYXJndW1lbnRzKTsKICB9LAoK
        ICBvYmplY3RBdDogZnVuY3Rpb24oaWR4KSB7CiAgICByZXR1cm4gdGhpcy52
        aWV3c1tpZHhdOwogIH0sCgogIGZvckVhY2g6IGZ1bmN0aW9uKGNhbGxiYWNr
        KSB7CiAgICB2YXIgdmlld3MgPSB0aGlzLnZpZXdzOwogICAgcmV0dXJuIGFf
        Zm9yRWFjaCh2aWV3cywgY2FsbGJhY2spOwogIH0sCgogIGNsZWFyOiBmdW5j
        dGlvbigpIHsKICAgIHRoaXMubGVuZ3RoID0gMDsKICAgIHRoaXMudmlld3Mu
        bGVuZ3RoID0gMDsKICB9Cn07Cgp2YXIgRU1QVFlfQVJSQVkgPSBbXTsKCi8q
        KgogIGBFbWJlci5WaWV3YCBpcyB0aGUgY2xhc3MgaW4gRW1iZXIgcmVzcG9u
        c2libGUgZm9yIGVuY2Fwc3VsYXRpbmcgdGVtcGxhdGVzIG9mCiAgSFRNTCBj
        b250ZW50LCBjb21iaW5pbmcgdGVtcGxhdGVzIHdpdGggZGF0YSB0byByZW5k
        ZXIgYXMgc2VjdGlvbnMgb2YgYSBwYWdlJ3MKICBET00sIGFuZCByZWdpc3Rl
        cmluZyBhbmQgcmVzcG9uZGluZyB0byB1c2VyLWluaXRpYXRlZCBldmVudHMu
        CgogICMjIEhUTUwgVGFnCgogIFRoZSBkZWZhdWx0IEhUTUwgdGFnIG5hbWUg
        dXNlZCBmb3IgYSB2aWV3J3MgRE9NIHJlcHJlc2VudGF0aW9uIGlzIGBkaXZg
        LiBUaGlzCiAgY2FuIGJlIGN1c3RvbWl6ZWQgYnkgc2V0dGluZyB0aGUgYHRh
        Z05hbWVgIHByb3BlcnR5LiBUaGUgZm9sbG93aW5nIHZpZXcKICBjbGFzczoK
        CiAgYGBgamF2YXNjcmlwdAogIFBhcmFncmFwaFZpZXcgPSBFbWJlci5WaWV3
        LmV4dGVuZCh7CiAgICB0YWdOYW1lOiAnZW0nCiAgfSk7CiAgYGBgCgogIFdv
        dWxkIHJlc3VsdCBpbiBpbnN0YW5jZXMgd2l0aCB0aGUgZm9sbG93aW5nIEhU
        TUw6CgogIGBgYGh0bWwKICA8ZW0gaWQ9ImVtYmVyMSIgY2xhc3M9ImVtYmVy
        LXZpZXciPjwvZW0+CiAgYGBgCgogICMjIEhUTUwgYGNsYXNzYCBBdHRyaWJ1
        dGUKCiAgVGhlIEhUTUwgYGNsYXNzYCBhdHRyaWJ1dGUgb2YgYSB2aWV3J3Mg
        dGFnIGNhbiBiZSBzZXQgYnkgcHJvdmlkaW5nIGEKICBgY2xhc3NOYW1lc2Ag
        cHJvcGVydHkgdGhhdCBpcyBzZXQgdG8gYW4gYXJyYXkgb2Ygc3RyaW5nczoK
        CiAgYGBgamF2YXNjcmlwdAogIE15VmlldyA9IEVtYmVyLlZpZXcuZXh0ZW5k
        KHsKICAgIGNsYXNzTmFtZXM6IFsnbXktY2xhc3MnLCAnbXktb3RoZXItY2xh
        c3MnXQogIH0pOwogIGBgYAoKICBXaWxsIHJlc3VsdCBpbiB2aWV3IGluc3Rh
        bmNlcyB3aXRoIGFuIEhUTUwgcmVwcmVzZW50YXRpb24gb2Y6CgogIGBgYGh0
        bWwKICA8ZGl2IGlkPSJlbWJlcjEiIGNsYXNzPSJlbWJlci12aWV3IG15LWNs
        YXNzIG15LW90aGVyLWNsYXNzIj48L2Rpdj4KICBgYGAKCiAgYGNsYXNzYCBh
        dHRyaWJ1dGUgdmFsdWVzIGNhbiBhbHNvIGJlIHNldCBieSBwcm92aWRpbmcg
        YSBgY2xhc3NOYW1lQmluZGluZ3NgCiAgcHJvcGVydHkgc2V0IHRvIGFuIGFy
        cmF5IG9mIHByb3BlcnRpZXMgbmFtZXMgZm9yIHRoZSB2aWV3LiBUaGUgcmV0
        dXJuIHZhbHVlCiAgb2YgdGhlc2UgcHJvcGVydGllcyB3aWxsIGJlIGFkZGVk
        IGFzIHBhcnQgb2YgdGhlIHZhbHVlIGZvciB0aGUgdmlldydzIGBjbGFzc2AK
        ICBhdHRyaWJ1dGUuIFRoZXNlIHByb3BlcnRpZXMgY2FuIGJlIGNvbXB1dGVk
        IHByb3BlcnRpZXM6CgogIGBgYGphdmFzY3JpcHQKICBNeVZpZXcgPSBFbWJl
        ci5WaWV3LmV4dGVuZCh7CiAgICBjbGFzc05hbWVCaW5kaW5nczogWydwcm9w
        ZXJ0eUEnLCAncHJvcGVydHlCJ10sCiAgICBwcm9wZXJ0eUE6ICdmcm9tLWEn
        LAogICAgcHJvcGVydHlCOiBmdW5jdGlvbigpIHsKICAgICAgaWYgKHNvbWVM
        b2dpYykgeyByZXR1cm4gJ2Zyb20tYic7IH0KICAgIH0ucHJvcGVydHkoKQog
        IH0pOwogIGBgYAoKICBXaWxsIHJlc3VsdCBpbiB2aWV3IGluc3RhbmNlcyB3
        aXRoIGFuIEhUTUwgcmVwcmVzZW50YXRpb24gb2Y6CgogIGBgYGh0bWwKICA8
        ZGl2IGlkPSJlbWJlcjEiIGNsYXNzPSJlbWJlci12aWV3IGZyb20tYSBmcm9t
        LWIiPjwvZGl2PgogIGBgYAoKICBJZiB0aGUgdmFsdWUgb2YgYSBjbGFzcyBu
        YW1lIGJpbmRpbmcgcmV0dXJucyBhIGJvb2xlYW4gdGhlIHByb3BlcnR5IG5h
        bWUKICBpdHNlbGYgd2lsbCBiZSB1c2VkIGFzIHRoZSBjbGFzcyBuYW1lIGlm
        IHRoZSBwcm9wZXJ0eSBpcyB0cnVlLiBUaGUgY2xhc3MgbmFtZQogIHdpbGwg
        bm90IGJlIGFkZGVkIGlmIHRoZSB2YWx1ZSBpcyBgZmFsc2VgIG9yIGB1bmRl
        ZmluZWRgLgoKICBgYGBqYXZhc2NyaXB0CiAgTXlWaWV3ID0gRW1iZXIuVmll
        dy5leHRlbmQoewogICAgY2xhc3NOYW1lQmluZGluZ3M6IFsnaG92ZXJlZCdd
        LAogICAgaG92ZXJlZDogdHJ1ZQogIH0pOwogIGBgYAoKICBXaWxsIHJlc3Vs
        dCBpbiB2aWV3IGluc3RhbmNlcyB3aXRoIGFuIEhUTUwgcmVwcmVzZW50YXRp
        b24gb2Y6CgogIGBgYGh0bWwKICA8ZGl2IGlkPSJlbWJlcjEiIGNsYXNzPSJl
        bWJlci12aWV3IGhvdmVyZWQiPjwvZGl2PgogIGBgYAoKICBXaGVuIHVzaW5n
        IGJvb2xlYW4gY2xhc3MgbmFtZSBiaW5kaW5ncyB5b3UgY2FuIHN1cHBseSBh
        IHN0cmluZyB2YWx1ZSBvdGhlcgogIHRoYW4gdGhlIHByb3BlcnR5IG5hbWUg
        Zm9yIHVzZSBhcyB0aGUgYGNsYXNzYCBIVE1MIGF0dHJpYnV0ZSBieSBhcHBl
        bmRpbmcgdGhlCiAgcHJlZmVycmVkIHZhbHVlIGFmdGVyIGEgIjoiIGNoYXJh
        Y3RlciB3aGVuIGRlZmluaW5nIHRoZSBiaW5kaW5nOgoKICBgYGBqYXZhc2Ny
        aXB0CiAgTXlWaWV3ID0gRW1iZXIuVmlldy5leHRlbmQoewogICAgY2xhc3NO
        YW1lQmluZGluZ3M6IFsnYXdlc29tZTpzby12ZXJ5LWNvb2wnXSwKICAgIGF3
        ZXNvbWU6IHRydWUKICB9KTsKICBgYGAKCiAgV2lsbCByZXN1bHQgaW4gdmll
        dyBpbnN0YW5jZXMgd2l0aCBhbiBIVE1MIHJlcHJlc2VudGF0aW9uIG9mOgoK
        ICBgYGBodG1sCiAgPGRpdiBpZD0iZW1iZXIxIiBjbGFzcz0iZW1iZXItdmll
        dyBzby12ZXJ5LWNvb2wiPjwvZGl2PgogIGBgYAoKICBCb29sZWFuIHZhbHVl
        IGNsYXNzIG5hbWUgYmluZGluZ3Mgd2hvc2UgcHJvcGVydHkgbmFtZXMgYXJl
        IGluIGEKICBjYW1lbENhc2Utc3R5bGUgZm9ybWF0IHdpbGwgYmUgY29udmVy
        dGVkIHRvIGEgZGFzaGVyaXplZCBmb3JtYXQ6CgogIGBgYGphdmFzY3JpcHQK
        ICBNeVZpZXcgPSBFbWJlci5WaWV3LmV4dGVuZCh7CiAgICBjbGFzc05hbWVC
        aW5kaW5nczogWydpc1VyZ2VudCddLAogICAgaXNVcmdlbnQ6IHRydWUKICB9
        KTsKICBgYGAKCiAgV2lsbCByZXN1bHQgaW4gdmlldyBpbnN0YW5jZXMgd2l0
        aCBhbiBIVE1MIHJlcHJlc2VudGF0aW9uIG9mOgoKICBgYGBodG1sCiAgPGRp
        diBpZD0iZW1iZXIxIiBjbGFzcz0iZW1iZXItdmlldyBpcy11cmdlbnQiPjwv
        ZGl2PgogIGBgYAoKICBDbGFzcyBuYW1lIGJpbmRpbmdzIGNhbiBhbHNvIHJl
        ZmVyIHRvIG9iamVjdCB2YWx1ZXMgdGhhdCBhcmUgZm91bmQgYnkKICB0cmF2
        ZXJzaW5nIGEgcGF0aCByZWxhdGl2ZSB0byB0aGUgdmlldyBpdHNlbGY6Cgog
        IGBgYGphdmFzY3JpcHQKICBNeVZpZXcgPSBFbWJlci5WaWV3LmV4dGVuZCh7
        CiAgICBjbGFzc05hbWVCaW5kaW5nczogWydtZXNzYWdlcy5lbXB0eSddCiAg
        ICBtZXNzYWdlczogRW1iZXIuT2JqZWN0LmNyZWF0ZSh7CiAgICAgIGVtcHR5
        OiB0cnVlCiAgICB9KQogIH0pOwogIGBgYAoKICBXaWxsIHJlc3VsdCBpbiB2
        aWV3IGluc3RhbmNlcyB3aXRoIGFuIEhUTUwgcmVwcmVzZW50YXRpb24gb2Y6
        CgogIGBgYGh0bWwKICA8ZGl2IGlkPSJlbWJlcjEiIGNsYXNzPSJlbWJlci12
        aWV3IGVtcHR5Ij48L2Rpdj4KICBgYGAKCiAgSWYgeW91IHdhbnQgdG8gYWRk
        IGEgY2xhc3MgbmFtZSBmb3IgYSBwcm9wZXJ0eSB3aGljaCBldmFsdWF0ZXMg
        dG8gdHJ1ZSBhbmQKICBhbmQgYSBkaWZmZXJlbnQgY2xhc3MgbmFtZSBpZiBp
        dCBldmFsdWF0ZXMgdG8gZmFsc2UsIHlvdSBjYW4gcGFzcyBhIGJpbmRpbmcK
        ICBsaWtlIHRoaXM6CgogIGBgYGphdmFzY3JpcHQKICAvLyBBcHBsaWVzICdl
        bmFibGVkJyBjbGFzcyB3aGVuIGlzRW5hYmxlZCBpcyB0cnVlIGFuZCAnZGlz
        YWJsZWQnIHdoZW4gaXNFbmFibGVkIGlzIGZhbHNlCiAgRW1iZXIuVmlldy5l
        eHRlbmQoewogICAgY2xhc3NOYW1lQmluZGluZ3M6IFsnaXNFbmFibGVkOmVu
        YWJsZWQ6ZGlzYWJsZWQnXQogICAgaXNFbmFibGVkOiB0cnVlCiAgfSk7CiAg
        YGBgCgogIFdpbGwgcmVzdWx0IGluIHZpZXcgaW5zdGFuY2VzIHdpdGggYW4g
        SFRNTCByZXByZXNlbnRhdGlvbiBvZjoKCiAgYGBgaHRtbAogIDxkaXYgaWQ9
        ImVtYmVyMSIgY2xhc3M9ImVtYmVyLXZpZXcgZW5hYmxlZCI+PC9kaXY+CiAg
        YGBgCgogIFdoZW4gaXNFbmFibGVkIGlzIGBmYWxzZWAsIHRoZSByZXN1bHRp
        bmcgSFRNTCByZXByZW5zZW50YXRpb24gbG9va3MgbGlrZQogIHRoaXM6Cgog
        IGBgYGh0bWwKICA8ZGl2IGlkPSJlbWJlcjEiIGNsYXNzPSJlbWJlci12aWV3
        IGRpc2FibGVkIj48L2Rpdj4KICBgYGAKCiAgVGhpcyBzeW50YXggb2ZmZXJz
        IHRoZSBjb252ZW5pZW5jZSB0byBhZGQgYSBjbGFzcyBpZiBhIHByb3BlcnR5
        IGlzIGBmYWxzZWA6CgogIGBgYGphdmFzY3JpcHQKICAvLyBBcHBsaWVzIG5v
        IGNsYXNzIHdoZW4gaXNFbmFibGVkIGlzIHRydWUgYW5kIGNsYXNzICdkaXNh
        YmxlZCcgd2hlbiBpc0VuYWJsZWQgaXMgZmFsc2UKICBFbWJlci5WaWV3LmV4
        dGVuZCh7CiAgICBjbGFzc05hbWVCaW5kaW5nczogWydpc0VuYWJsZWQ6OmRp
        c2FibGVkJ10KICAgIGlzRW5hYmxlZDogdHJ1ZQogIH0pOwogIGBgYAoKICBX
        aWxsIHJlc3VsdCBpbiB2aWV3IGluc3RhbmNlcyB3aXRoIGFuIEhUTUwgcmVw
        cmVzZW50YXRpb24gb2Y6CgogIGBgYGh0bWwKICA8ZGl2IGlkPSJlbWJlcjEi
        IGNsYXNzPSJlbWJlci12aWV3Ij48L2Rpdj4KICBgYGAKCiAgV2hlbiB0aGUg
        YGlzRW5hYmxlZGAgcHJvcGVydHkgb24gdGhlIHZpZXcgaXMgc2V0IHRvIGBm
        YWxzZWAsIGl0IHdpbGwgcmVzdWx0CiAgaW4gdmlldyBpbnN0YW5jZXMgd2l0
        aCBhbiBIVE1MIHJlcHJlc2VudGF0aW9uIG9mOgoKICBgYGBodG1sCiAgPGRp
        diBpZD0iZW1iZXIxIiBjbGFzcz0iZW1iZXItdmlldyBkaXNhYmxlZCI+PC9k
        aXY+CiAgYGBgCgogIFVwZGF0ZXMgdG8gdGhlIHRoZSB2YWx1ZSBvZiBhIGNs
        YXNzIG5hbWUgYmluZGluZyB3aWxsIHJlc3VsdCBpbiBhdXRvbWF0aWMKICB1
        cGRhdGUgb2YgdGhlICBIVE1MIGBjbGFzc2AgYXR0cmlidXRlIGluIHRoZSB2
        aWV3J3MgcmVuZGVyZWQgSFRNTAogIHJlcHJlc2VudGF0aW9uLiBJZiB0aGUg
        dmFsdWUgYmVjb21lcyBgZmFsc2VgIG9yIGB1bmRlZmluZWRgIHRoZSBjbGFz
        cyBuYW1lCiAgd2lsbCBiZSByZW1vdmVkLgoKICBCb3RoIGBjbGFzc05hbWVz
        YCBhbmQgYGNsYXNzTmFtZUJpbmRpbmdzYCBhcmUgY29uY2F0ZW5hdGVkIHBy
        b3BlcnRpZXMuIFNlZQogIFtFbWJlci5PYmplY3RdKC9hcGkvY2xhc3Nlcy9F
        bWJlci5PYmplY3QuaHRtbCkgZG9jdW1lbnRhdGlvbiBmb3IgbW9yZQogIGlu
        Zm9ybWF0aW9uIGFib3V0IGNvbmNhdGVuYXRlZCBwcm9wZXJ0aWVzLgoKICAj
        IyBIVE1MIEF0dHJpYnV0ZXMKCiAgVGhlIEhUTUwgYXR0cmlidXRlIHNlY3Rp
        b24gb2YgYSB2aWV3J3MgdGFnIGNhbiBiZSBzZXQgYnkgcHJvdmlkaW5nIGFu
        CiAgYGF0dHJpYnV0ZUJpbmRpbmdzYCBwcm9wZXJ0eSBzZXQgdG8gYW4gYXJy
        YXkgb2YgcHJvcGVydHkgbmFtZXMgb24gdGhlIHZpZXcuCiAgVGhlIHJldHVy
        biB2YWx1ZSBvZiB0aGVzZSBwcm9wZXJ0aWVzIHdpbGwgYmUgdXNlZCBhcyB0
        aGUgdmFsdWUgb2YgdGhlIHZpZXcncwogIEhUTUwgYXNzb2NpYXRlZCBhdHRy
        aWJ1dGU6CgogIGBgYGphdmFzY3JpcHQKICBBbmNob3JWaWV3ID0gRW1iZXIu
        Vmlldy5leHRlbmQoewogICAgdGFnTmFtZTogJ2EnLAogICAgYXR0cmlidXRl
        QmluZGluZ3M6IFsnaHJlZiddLAogICAgaHJlZjogJ2h0dHA6Ly9nb29nbGUu
        Y29tJwogIH0pOwogIGBgYAoKICBXaWxsIHJlc3VsdCBpbiB2aWV3IGluc3Rh
        bmNlcyB3aXRoIGFuIEhUTUwgcmVwcmVzZW50YXRpb24gb2Y6CgogIGBgYGh0
        bWwKICA8YSBpZD0iZW1iZXIxIiBjbGFzcz0iZW1iZXItdmlldyIgaHJlZj0i
        aHR0cDovL2dvb2dsZS5jb20iPjwvYT4KICBgYGAKCiAgSWYgdGhlIHJldHVy
        biB2YWx1ZSBvZiBhbiBgYXR0cmlidXRlQmluZGluZ3NgIG1vbml0b3JlZCBw
        cm9wZXJ0eSBpcyBhIGJvb2xlYW4KICB0aGUgcHJvcGVydHkgd2lsbCBmb2xs
        b3cgSFRNTCdzIHBhdHRlcm4gb2YgcmVwZWF0aW5nIHRoZSBhdHRyaWJ1dGUn
        cyBuYW1lIGFzCiAgaXRzIHZhbHVlOgoKICBgYGBqYXZhc2NyaXB0CiAgTXlU
        ZXh0SW5wdXQgPSBFbWJlci5WaWV3LmV4dGVuZCh7CiAgICB0YWdOYW1lOiAn
        aW5wdXQnLAogICAgYXR0cmlidXRlQmluZGluZ3M6IFsnZGlzYWJsZWQnXSwK
        ICAgIGRpc2FibGVkOiB0cnVlCiAgfSk7CiAgYGBgCgogIFdpbGwgcmVzdWx0
        IGluIHZpZXcgaW5zdGFuY2VzIHdpdGggYW4gSFRNTCByZXByZXNlbnRhdGlv
        biBvZjoKCiAgYGBgaHRtbAogIDxpbnB1dCBpZD0iZW1iZXIxIiBjbGFzcz0i
        ZW1iZXItdmlldyIgZGlzYWJsZWQ9ImRpc2FibGVkIiAvPgogIGBgYAoKICBg
        YXR0cmlidXRlQmluZGluZ3NgIGNhbiByZWZlciB0byBjb21wdXRlZCBwcm9w
        ZXJ0aWVzOgoKICBgYGBqYXZhc2NyaXB0CiAgTXlUZXh0SW5wdXQgPSBFbWJl
        ci5WaWV3LmV4dGVuZCh7CiAgICB0YWdOYW1lOiAnaW5wdXQnLAogICAgYXR0
        cmlidXRlQmluZGluZ3M6IFsnZGlzYWJsZWQnXSwKICAgIGRpc2FibGVkOiBm
        dW5jdGlvbigpIHsKICAgICAgaWYgKHNvbWVMb2dpYykgewogICAgICAgIHJl
        dHVybiB0cnVlOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBmYWxz
        ZTsKICAgICAgfQogICAgfS5wcm9wZXJ0eSgpCiAgfSk7CiAgYGBgCgogIFVw
        ZGF0ZXMgdG8gdGhlIHRoZSBwcm9wZXJ0eSBvZiBhbiBhdHRyaWJ1dGUgYmlu
        ZGluZyB3aWxsIHJlc3VsdCBpbiBhdXRvbWF0aWMKICB1cGRhdGUgb2YgdGhl
        ICBIVE1MIGF0dHJpYnV0ZSBpbiB0aGUgdmlldydzIHJlbmRlcmVkIEhUTUwg
        cmVwcmVzZW50YXRpb24uCgogIGBhdHRyaWJ1dGVCaW5kaW5nc2AgaXMgYSBj
        b25jYXRlbmF0ZWQgcHJvcGVydHkuIFNlZSBbRW1iZXIuT2JqZWN0XSgvYXBp
        L2NsYXNzZXMvRW1iZXIuT2JqZWN0Lmh0bWwpCiAgZG9jdW1lbnRhdGlvbiBm
        b3IgbW9yZSBpbmZvcm1hdGlvbiBhYm91dCBjb25jYXRlbmF0ZWQgcHJvcGVy
        dGllcy4KCiAgIyMgVGVtcGxhdGVzCgogIFRoZSBIVE1MIGNvbnRlbnRzIG9m
        IGEgdmlldydzIHJlbmRlcmVkIHJlcHJlc2VudGF0aW9uIGFyZSBkZXRlcm1p
        bmVkIGJ5IGl0cwogIHRlbXBsYXRlLiBUZW1wbGF0ZXMgY2FuIGJlIGFueSBm
        dW5jdGlvbiB0aGF0IGFjY2VwdHMgYW4gb3B0aW9uYWwgY29udGV4dAogIHBh
        cmFtZXRlciBhbmQgcmV0dXJucyBhIHN0cmluZyBvZiBIVE1MIHRoYXQgd2ls
        bCBiZSBpbnNlcnRlZCB3aXRoaW4gdGhlCiAgdmlldydzIHRhZy4gTW9zdCB0
        eXBpY2FsbHkgaW4gRW1iZXIgdGhpcyBmdW5jdGlvbiB3aWxsIGJlIGEgY29t
        cGlsZWQKICBgRW1iZXIuSGFuZGxlYmFyc2AgdGVtcGxhdGUuCgogIGBgYGph
        dmFzY3JpcHQKICBBVmlldyA9IEVtYmVyLlZpZXcuZXh0ZW5kKHsKICAgIHRl
        bXBsYXRlOiBFbWJlci5IYW5kbGViYXJzLmNvbXBpbGUoJ0kgYW0gdGhlIHRl
        bXBsYXRlJykKICB9KTsKICBgYGAKCiAgV2lsbCByZXN1bHQgaW4gdmlldyBp
        bnN0YW5jZXMgd2l0aCBhbiBIVE1MIHJlcHJlc2VudGF0aW9uIG9mOgoKICBg
        YGBodG1sCiAgPGRpdiBpZD0iZW1iZXIxIiBjbGFzcz0iZW1iZXItdmlldyI+
        SSBhbSB0aGUgdGVtcGxhdGU8L2Rpdj4KICBgYGAKCiAgV2l0aGluIGFuIEVt
        YmVyIGFwcGxpY2F0aW9uIGlzIG1vcmUgY29tbW9uIHRvIGRlZmluZSBhIEhh
        bmRsZWJhcnMgdGVtcGxhdGVzIGFzCiAgcGFydCBvZiBhIHBhZ2U6CgogIGBg
        YGh0bWwKICA8c2NyaXB0IHR5cGU9J3RleHQveC1oYW5kbGViYXJzJyBkYXRh
        LXRlbXBsYXRlLW5hbWU9J3NvbWUtdGVtcGxhdGUnPgogICAgSGVsbG8KICA8
        L3NjcmlwdD4KICBgYGAKCiAgQW5kIGFzc29jaWF0ZSBpdCBieSBuYW1lIHVz
        aW5nIGEgdmlldydzIGB0ZW1wbGF0ZU5hbWVgIHByb3BlcnR5OgoKICBgYGBq
        YXZhc2NyaXB0CiAgQVZpZXcgPSBFbWJlci5WaWV3LmV4dGVuZCh7CiAgICB0
        ZW1wbGF0ZU5hbWU6ICdzb21lLXRlbXBsYXRlJwogIH0pOwogIGBgYAoKICBJ
        ZiB5b3UgaGF2ZSBuZXN0ZWQgcmVzb3VyY2VzLCB5b3VyIEhhbmRsZWJhcnMg
        dGVtcGxhdGUgd2lsbCBsb29rIGxpa2UgdGhpczoKCiAgYGBgaHRtbAogIDxz
        Y3JpcHQgdHlwZT0ndGV4dC94LWhhbmRsZWJhcnMnIGRhdGEtdGVtcGxhdGUt
        bmFtZT0ncG9zdHMvbmV3Jz4KICAgIDxoMT5OZXcgUG9zdDwvaDE+CiAgPC9z
        Y3JpcHQ+CiAgYGBgCgogIEFuZCBgdGVtcGxhdGVOYW1lYCBwcm9wZXJ0eToK
        CiAgYGBgamF2YXNjcmlwdAogIEFWaWV3ID0gRW1iZXIuVmlldy5leHRlbmQo
        ewogICAgdGVtcGxhdGVOYW1lOiAncG9zdHMvbmV3JwogIH0pOwogIGBgYAoK
        ICBVc2luZyBhIHZhbHVlIGZvciBgdGVtcGxhdGVOYW1lYCB0aGF0IGRvZXMg
        bm90IGhhdmUgYSBIYW5kbGViYXJzIHRlbXBsYXRlCiAgd2l0aCBhIG1hdGNo
        aW5nIGBkYXRhLXRlbXBsYXRlLW5hbWVgIGF0dHJpYnV0ZSB3aWxsIHRocm93
        IGFuIGVycm9yLgoKICBGb3Igdmlld3MgY2xhc3NlcyB0aGF0IG1heSBoYXZl
        IGEgdGVtcGxhdGUgbGF0ZXIgZGVmaW5lZCAoZS5nLiBhcyB0aGUgYmxvY2sK
        ICBwb3J0aW9uIG9mIGEgYHt7dmlld319YCBIYW5kbGViYXJzIGhlbHBlciBj
        YWxsIGluIGFub3RoZXIgdGVtcGxhdGUgb3IgaW4KICBhIHN1YmNsYXNzKSwg
        eW91IGNhbiBwcm92aWRlIGEgYGRlZmF1bHRUZW1wbGF0ZWAgcHJvcGVydHkg
        c2V0IHRvIGNvbXBpbGVkCiAgdGVtcGxhdGUgZnVuY3Rpb24uIElmIGEgdGVt
        cGxhdGUgaXMgbm90IGxhdGVyIHByb3ZpZGVkIGZvciB0aGUgdmlldyBpbnN0
        YW5jZQogIHRoZSBgZGVmYXVsdFRlbXBsYXRlYCB2YWx1ZSB3aWxsIGJlIHVz
        ZWQ6CgogIGBgYGphdmFzY3JpcHQKICBBVmlldyA9IEVtYmVyLlZpZXcuZXh0
        ZW5kKHsKICAgIGRlZmF1bHRUZW1wbGF0ZTogRW1iZXIuSGFuZGxlYmFycy5j
        b21waWxlKCdJIHdhcyB0aGUgZGVmYXVsdCcpLAogICAgdGVtcGxhdGU6IG51
        bGwsCiAgICB0ZW1wbGF0ZU5hbWU6IG51bGwKICB9KTsKICBgYGAKCiAgV2ls
        bCByZXN1bHQgaW4gaW5zdGFuY2VzIHdpdGggYW4gSFRNTCByZXByZXNlbnRh
        dGlvbiBvZjoKCiAgYGBgaHRtbAogIDxkaXYgaWQ9ImVtYmVyMSIgY2xhc3M9
        ImVtYmVyLXZpZXciPkkgd2FzIHRoZSBkZWZhdWx0PC9kaXY+CiAgYGBgCgog
        IElmIGEgYHRlbXBsYXRlYCBvciBgdGVtcGxhdGVOYW1lYCBpcyBwcm92aWRl
        ZCBpdCB3aWxsIHRha2UgcHJlY2VkZW5jZSBvdmVyCiAgYGRlZmF1bHRUZW1w
        bGF0ZWA6CgogIGBgYGphdmFzY3JpcHQKICBBVmlldyA9IEVtYmVyLlZpZXcu
        ZXh0ZW5kKHsKICAgIGRlZmF1bHRUZW1wbGF0ZTogRW1iZXIuSGFuZGxlYmFy
        cy5jb21waWxlKCdJIHdhcyB0aGUgZGVmYXVsdCcpCiAgfSk7CgogIGFWaWV3
        ID0gQVZpZXcuY3JlYXRlKHsKICAgIHRlbXBsYXRlOiBFbWJlci5IYW5kbGVi
        YXJzLmNvbXBpbGUoJ0kgd2FzIHRoZSB0ZW1wbGF0ZSwgbm90IGRlZmF1bHQn
        KQogIH0pOwogIGBgYAoKICBXaWxsIHJlc3VsdCBpbiB0aGUgZm9sbG93aW5n
        IEhUTUwgcmVwcmVzZW50YXRpb24gd2hlbiByZW5kZXJlZDoKCiAgYGBgaHRt
        bAogIDxkaXYgaWQ9ImVtYmVyMSIgY2xhc3M9ImVtYmVyLXZpZXciPkkgd2Fz
        IHRoZSB0ZW1wbGF0ZSwgbm90IGRlZmF1bHQ8L2Rpdj4KICBgYGAKCiAgIyMg
        VmlldyBDb250ZXh0CgogIFRoZSBkZWZhdWx0IGNvbnRleHQgb2YgdGhlIGNv
        bXBpbGVkIHRlbXBsYXRlIGlzIHRoZSB2aWV3J3MgY29udHJvbGxlcjoKCiAg
        YGBgamF2YXNjcmlwdAogIEFWaWV3ID0gRW1iZXIuVmlldy5leHRlbmQoewog
        ICAgdGVtcGxhdGU6IEVtYmVyLkhhbmRsZWJhcnMuY29tcGlsZSgnSGVsbG8g
        e3tleGNpdGVkR3JlZXRpbmd9fScpCiAgfSk7CgogIGFDb250cm9sbGVyID0g
        RW1iZXIuT2JqZWN0LmNyZWF0ZSh7CiAgICBmaXJzdE5hbWU6ICdCYXJyeScs
        CiAgICBleGNpdGVkR3JlZXRpbmc6IGZ1bmN0aW9uKCkgewogICAgICByZXR1
        cm4gdGhpcy5nZXQoImNvbnRlbnQuZmlyc3ROYW1lIikgKyAiISEhIgogICAg
        fS5wcm9wZXJ0eSgpCiAgfSk7CgogIGFWaWV3ID0gQVZpZXcuY3JlYXRlKHsK
        ICAgIGNvbnRyb2xsZXI6IGFDb250cm9sbGVyLAogIH0pOwogIGBgYAoKICBX
        aWxsIHJlc3VsdCBpbiBhbiBIVE1MIHJlcHJlc2VudGF0aW9uIG9mOgoKICBg
        YGBodG1sCiAgPGRpdiBpZD0iZW1iZXIxIiBjbGFzcz0iZW1iZXItdmlldyI+
        SGVsbG8gQmFycnkhISE8L2Rpdj4KICBgYGAKCiAgQSBjb250ZXh0IGNhbiBh
        bHNvIGJlIGV4cGxpY2l0bHkgc3VwcGxpZWQgdGhyb3VnaCB0aGUgdmlldydz
        IGBjb250ZXh0YAogIHByb3BlcnR5LiBJZiB0aGUgdmlldyBoYXMgbmVpdGhl
        ciBgY29udGV4dGAgbm9yIGBjb250cm9sbGVyYCBwcm9wZXJ0aWVzLCB0aGUK
        ICBgcGFyZW50Vmlld2AncyBjb250ZXh0IHdpbGwgYmUgdXNlZC4KCiAgIyMg
        TGF5b3V0cwoKICBWaWV3cyBjYW4gaGF2ZSBhIHNlY29uZGFyeSB0ZW1wbGF0
        ZSB0aGF0IHdyYXBzIHRoZWlyIG1haW4gdGVtcGxhdGUuIExpa2UKICBwcmlt
        YXJ5IHRlbXBsYXRlcywgbGF5b3V0cyBjYW4gYmUgYW55IGZ1bmN0aW9uIHRo
        YXQgIGFjY2VwdHMgYW4gb3B0aW9uYWwKICBjb250ZXh0IHBhcmFtZXRlciBh
        bmQgcmV0dXJucyBhIHN0cmluZyBvZiBIVE1MIHRoYXQgd2lsbCBiZSBpbnNl
        cnRlZCBpbnNpZGUKICB2aWV3J3MgdGFnLiBWaWV3cyB3aG9zZSBIVE1MIGVs
        ZW1lbnQgaXMgc2VsZiBjbG9zaW5nIChlLmcuIGA8aW5wdXQgLz5gKQogIGNh
        bm5vdCBoYXZlIGEgbGF5b3V0IGFuZCB0aGlzIHByb3BlcnR5IHdpbGwgYmUg
        aWdub3JlZC4KCiAgTW9zdCB0eXBpY2FsbHkgaW4gRW1iZXIgYSBsYXlvdXQg
        d2lsbCBiZSBhIGNvbXBpbGVkIGBFbWJlci5IYW5kbGViYXJzYAogIHRlbXBs
        YXRlLgoKICBBIHZpZXcncyBsYXlvdXQgY2FuIGJlIHNldCBkaXJlY3RseSB3
        aXRoIHRoZSBgbGF5b3V0YCBwcm9wZXJ0eSBvciByZWZlcmVuY2UKICBhbiBl
        eGlzdGluZyBIYW5kbGViYXJzIHRlbXBsYXRlIGJ5IG5hbWUgd2l0aCB0aGUg
        YGxheW91dE5hbWVgIHByb3BlcnR5LgoKICBBIHRlbXBsYXRlIHVzZWQgYXMg
        YSBsYXlvdXQgbXVzdCBjb250YWluIGEgc2luZ2xlIHVzZSBvZiB0aGUgSGFu
        ZGxlYmFycwogIGB7e3lpZWxkfX1gIGhlbHBlci4gVGhlIEhUTUwgY29udGVu
        dHMgb2YgYSB2aWV3J3MgcmVuZGVyZWQgYHRlbXBsYXRlYCB3aWxsIGJlCiAg
        aW5zZXJ0ZWQgYXQgdGhpcyBsb2NhdGlvbjoKCiAgYGBgamF2YXNjcmlwdAog
        IEFWaWV3V2l0aExheW91dCA9IEVtYmVyLlZpZXcuZXh0ZW5kKHsKICAgIGxh
        eW91dDogRW1iZXIuSGFuZGxlYmFycy5jb21waWxlKCI8ZGl2IGNsYXNzPSdt
        eS1kZWNvcmF0aXZlLWNsYXNzJz57e3lpZWxkfX08L2Rpdj4iKQogICAgdGVt
        cGxhdGU6IEVtYmVyLkhhbmRsZWJhcnMuY29tcGlsZSgiSSBnb3Qgd3JhcHBl
        ZCIpLAogIH0pOwogIGBgYAoKICBXaWxsIHJlc3VsdCBpbiB2aWV3IGluc3Rh
        bmNlcyB3aXRoIGFuIEhUTUwgcmVwcmVzZW50YXRpb24gb2Y6CgogIGBgYGh0
        bWwKICA8ZGl2IGlkPSJlbWJlcjEiIGNsYXNzPSJlbWJlci12aWV3Ij4KICAg
        IDxkaXYgY2xhc3M9Im15LWRlY29yYXRpdmUtY2xhc3MiPgogICAgICBJIGdv
        dCB3cmFwcGVkCiAgICA8L2Rpdj4KICA8L2Rpdj4KICBgYGAKCiAgU2VlIFtF
        bWJlci5IYW5kbGViYXJzLmhlbHBlcnMueWllbGRdKC9hcGkvY2xhc3Nlcy9F
        bWJlci5IYW5kbGViYXJzLmhlbHBlcnMuaHRtbCNtZXRob2RfeWllbGQpCiAg
        Zm9yIG1vcmUgaW5mb3JtYXRpb24uCgogICMjIFJlc3BvbmRpbmcgdG8gQnJv
        d3NlciBFdmVudHMKCiAgVmlld3MgY2FuIHJlc3BvbmQgdG8gdXNlci1pbml0
        aWF0ZWQgZXZlbnRzIGluIG9uZSBvZiB0aHJlZSB3YXlzOiBtZXRob2QKICBp
        bXBsZW1lbnRhdGlvbiwgdGhyb3VnaCBhbiBldmVudCBtYW5hZ2VyLCBhbmQg
        dGhyb3VnaCBge3thY3Rpb259fWAgaGVscGVyIHVzZQogIGluIHRoZWlyIHRl
        bXBsYXRlIG9yIGxheW91dC4KCiAgIyMjIE1ldGhvZCBJbXBsZW1lbnRhdGlv
        bgoKICBWaWV3cyBjYW4gcmVzcG9uZCB0byB1c2VyLWluaXRpYXRlZCBldmVu
        dHMgYnkgaW1wbGVtZW50aW5nIGEgbWV0aG9kIHRoYXQKICBtYXRjaGVzIHRo
        ZSBldmVudCBuYW1lLiBBIGBqUXVlcnkuRXZlbnRgIG9iamVjdCB3aWxsIGJl
        IHBhc3NlZCBhcyB0aGUKICBhcmd1bWVudCB0byB0aGlzIG1ldGhvZC4KCiAg
        YGBgamF2YXNjcmlwdAogIEFWaWV3ID0gRW1iZXIuVmlldy5leHRlbmQoewog
        ICAgY2xpY2s6IGZ1bmN0aW9uKGV2ZW50KSB7CiAgICAgIC8vIHdpbGwgYmUg
        Y2FsbGVkIHdoZW4gd2hlbiBhbiBpbnN0YW5jZSdzCiAgICAgIC8vIHJlbmRl
        cmVkIGVsZW1lbnQgaXMgY2xpY2tlZAogICAgfQogIH0pOwogIGBgYAoKICAj
        IyMgRXZlbnQgTWFuYWdlcnMKCiAgVmlld3MgY2FuIGRlZmluZSBhbiBvYmpl
        Y3QgYXMgdGhlaXIgYGV2ZW50TWFuYWdlcmAgcHJvcGVydHkuIFRoaXMgb2Jq
        ZWN0IGNhbgogIHRoZW4gaW1wbGVtZW50IG1ldGhvZHMgdGhhdCBtYXRjaCB0
        aGUgZGVzaXJlZCBldmVudCBuYW1lcy4gTWF0Y2hpbmcgZXZlbnRzCiAgdGhh
        dCBvY2N1ciBvbiB0aGUgdmlldydzIHJlbmRlcmVkIEhUTUwgb3IgdGhlIHJl
        bmRlcmVkIEhUTUwgb2YgYW55IG9mIGl0cyBET00KICBkZXNjZW5kYW50cyB3
        aWxsIHRyaWdnZXIgdGhpcyBtZXRob2QuIEEgYGpRdWVyeS5FdmVudGAgb2Jq
        ZWN0IHdpbGwgYmUgcGFzc2VkCiAgYXMgdGhlIGZpcnN0IGFyZ3VtZW50IHRv
        IHRoZSBtZXRob2QgYW5kIGFuICBgRW1iZXIuVmlld2Agb2JqZWN0IGFzIHRo
        ZQogIHNlY29uZC4gVGhlIGBFbWJlci5WaWV3YCB3aWxsIGJlIHRoZSB2aWV3
        IHdob3NlIHJlbmRlcmVkIEhUTUwgd2FzIGludGVyYWN0ZWQKICB3aXRoLiBU
        aGlzIG1heSBiZSB0aGUgdmlldyB3aXRoIHRoZSBgZXZlbnRNYW5hZ2VyYCBw
        cm9wZXJ0eSBvciBvbmUgb2YgaXRzCiAgZGVzY2VuZGVudCB2aWV3cy4KCiAg
        YGBgamF2YXNjcmlwdAogIEFWaWV3ID0gRW1iZXIuVmlldy5leHRlbmQoewog
        ICAgZXZlbnRNYW5hZ2VyOiBFbWJlci5PYmplY3QuY3JlYXRlKHsKICAgICAg
        ZG91YmxlQ2xpY2s6IGZ1bmN0aW9uKGV2ZW50LCB2aWV3KSB7CiAgICAgICAg
        Ly8gd2lsbCBiZSBjYWxsZWQgd2hlbiB3aGVuIGFuIGluc3RhbmNlJ3MKICAg
        ICAgICAvLyByZW5kZXJlZCBlbGVtZW50IG9yIGFueSByZW5kZXJpbmcKICAg
        ICAgICAvLyBvZiB0aGlzIHZpZXdzJ3MgZGVzY2VuZGVudAogICAgICAgIC8v
        IGVsZW1lbnRzIGlzIGNsaWNrZWQKICAgICAgfQogICAgfSkKICB9KTsKICBg
        YGAKCiAgQW4gZXZlbnQgZGVmaW5lZCBmb3IgYW4gZXZlbnQgbWFuYWdlciB0
        YWtlcyBwcmVjZWRlbmNlIG92ZXIgZXZlbnRzIG9mIHRoZQogIHNhbWUgbmFt
        ZSBoYW5kbGVkIHRocm91Z2ggbWV0aG9kcyBvbiB0aGUgdmlldy4KCiAgYGBg
        amF2YXNjcmlwdAogIEFWaWV3ID0gRW1iZXIuVmlldy5leHRlbmQoewogICAg
        bW91c2VFbnRlcjogZnVuY3Rpb24oZXZlbnQpIHsKICAgICAgLy8gd2lsbCBu
        ZXZlciB0cmlnZ2VyLgogICAgfSwKICAgIGV2ZW50TWFuYWdlcjogRW1iZXIu
        T2JqZWN0LmNyZWF0ZSh7CiAgICAgIG1vdXNlRW50ZXI6IGZ1bmN0aW9uKGV2
        ZW50LCB2aWV3KSB7CiAgICAgICAgLy8gdGFrZXMgcHJlY2VkZW5jZSBvdmVy
        IEFWaWV3I21vdXNlRW50ZXIKICAgICAgfQogICAgfSkKICB9KTsKICBgYGAK
        CiAgU2ltaWxhcmx5IGEgdmlldydzIGV2ZW50IG1hbmFnZXIgd2lsbCB0YWtl
        IHByZWNlZGVuY2UgZm9yIGV2ZW50cyBvZiBhbnkgdmlld3MKICByZW5kZXJl
        ZCBhcyBhIGRlc2NlbmRlbnQuIEEgbWV0aG9kIG5hbWUgdGhhdCBtYXRjaGVz
        IGFuIGV2ZW50IG5hbWUgd2lsbCBub3QKICBiZSBjYWxsZWQgaWYgdGhlIHZp
        ZXcgaW5zdGFuY2Ugd2FzIHJlbmRlcmVkIGluc2lkZSB0aGUgSFRNTCByZXBy
        ZXNlbnRhdGlvbiBvZgogIGEgdmlldyB0aGF0IGhhcyBhbiBgZXZlbnRNYW5h
        Z2VyYCBwcm9wZXJ0eSBkZWZpbmVkIHRoYXQgaGFuZGxlcyBldmVudHMgb2Yg
        dGhlCiAgbmFtZS4gRXZlbnRzIG5vdCBoYW5kbGVkIGJ5IHRoZSBldmVudCBt
        YW5hZ2VyIHdpbGwgc3RpbGwgdHJpZ2dlciBtZXRob2QgY2FsbHMKICBvbiB0
        aGUgZGVzY2VuZGVudC4KCiAgYGBgamF2YXNjcmlwdAogIE91dGVyVmlldyA9
        IEVtYmVyLlZpZXcuZXh0ZW5kKHsKICAgIHRlbXBsYXRlOiBFbWJlci5IYW5k
        bGViYXJzLmNvbXBpbGUoIm91dGVyIHt7I3ZpZXcgSW5uZXJWaWV3fX1pbm5l
        cnt7L3ZpZXd9fSBvdXRlciIpLAogICAgZXZlbnRNYW5hZ2VyOiBFbWJlci5P
        YmplY3QuY3JlYXRlKHsKICAgICAgbW91c2VFbnRlcjogZnVuY3Rpb24oZXZl
        bnQsIHZpZXcpIHsKICAgICAgICAvLyB2aWV3IG1pZ2h0IGJlIGluc3RhbmNl
        IG9mIGVpdGhlcgogICAgICAgIC8vIE91dGVyVmlldyBvciBJbm5lclZpZXcg
        ZGVwZW5kaW5nIG9uCiAgICAgICAgLy8gd2hlcmUgb24gdGhlIHBhZ2UgdGhl
        IHVzZXIgaW50ZXJhY3Rpb24gb2NjdXJlZAogICAgICB9CiAgICB9KQogIH0p
        OwoKICBJbm5lclZpZXcgPSBFbWJlci5WaWV3LmV4dGVuZCh7CiAgICBjbGlj
        azogZnVuY3Rpb24oZXZlbnQpIHsKICAgICAgLy8gd2lsbCBiZSBjYWxsZWQg
        aWYgcmVuZGVyZWQgaW5zaWRlCiAgICAgIC8vIGFuIE91dGVyVmlldyBiZWNh
        dXNlIE91dGVyVmlldydzCiAgICAgIC8vIGV2ZW50TWFuYWdlciBkb2Vzbid0
        IGhhbmRsZSBjbGljayBldmVudHMKICAgIH0sCiAgICBtb3VzZUVudGVyOiBm
        dW5jdGlvbihldmVudCkgewogICAgICAvLyB3aWxsIG5ldmVyIGJlIGNhbGxl
        ZCBpZiByZW5kZXJlZCBpbnNpZGUKICAgICAgLy8gYW4gT3V0ZXJWaWV3Lgog
        ICAgfQogIH0pOwogIGBgYAoKICAjIyMgSGFuZGxlYmFycyBge3thY3Rpb259
        fWAgSGVscGVyCgogIFNlZSBbSGFuZGxlYmFycy5oZWxwZXJzLmFjdGlvbl0o
        L2FwaS9jbGFzc2VzL0VtYmVyLkhhbmRsZWJhcnMuaGVscGVycy5odG1sI21l
        dGhvZF9hY3Rpb24pLgoKICAjIyMgRXZlbnQgTmFtZXMKCiAgQWxsIG9mIHRo
        ZSBldmVudCBoYW5kbGluZyBhcHByb2FjaGVzIGRlc2NyaWJlZCBhYm92ZSBy
        ZXNwb25kIHRvIHRoZSBzYW1lIHNldAogIG9mIGV2ZW50cy4gVGhlIG5hbWVz
        IG9mIHRoZSBidWlsdC1pbiBldmVudHMgYXJlIGxpc3RlZCBiZWxvdy4gKFRo
        ZSBoYXNoIG9mCiAgYnVpbHQtaW4gZXZlbnRzIGV4aXN0cyBpbiBgRW1iZXIu
        RXZlbnREaXNwYXRjaGVyYC4pIEFkZGl0aW9uYWwsIGN1c3RvbSBldmVudHMK
        ICBjYW4gYmUgcmVnaXN0ZXJlZCBieSB1c2luZyBgRW1iZXIuQXBwbGljYXRp
        b24uY3VzdG9tRXZlbnRzYC4KCiAgVG91Y2ggZXZlbnRzOgoKICAqIGB0b3Vj
        aFN0YXJ0YAogICogYHRvdWNoTW92ZWAKICAqIGB0b3VjaEVuZGAKICAqIGB0
        b3VjaENhbmNlbGAKCiAgS2V5Ym9hcmQgZXZlbnRzCgogICogYGtleURvd25g
        CiAgKiBga2V5VXBgCiAgKiBga2V5UHJlc3NgCgogIE1vdXNlIGV2ZW50cwoK
        ICAqIGBtb3VzZURvd25gCiAgKiBgbW91c2VVcGAKICAqIGBjb250ZXh0TWVu
        dWAKICAqIGBjbGlja2AKICAqIGBkb3VibGVDbGlja2AKICAqIGBtb3VzZU1v
        dmVgCiAgKiBgZm9jdXNJbmAKICAqIGBmb2N1c091dGAKICAqIGBtb3VzZUVu
        dGVyYAogICogYG1vdXNlTGVhdmVgCgogIEZvcm0gZXZlbnRzOgoKICAqIGBz
        dWJtaXRgCiAgKiBgY2hhbmdlYAogICogYGZvY3VzSW5gCiAgKiBgZm9jdXNP
        dXRgCiAgKiBgaW5wdXRgCgogIEhUTUw1IGRyYWcgYW5kIGRyb3AgZXZlbnRz
        OgoKICAqIGBkcmFnU3RhcnRgCiAgKiBgZHJhZ2AKICAqIGBkcmFnRW50ZXJg
        CiAgKiBgZHJhZ0xlYXZlYAogICogYGRyb3BgCiAgKiBgZHJhZ0VuZGAKCiAg
        IyMgSGFuZGxlYmFycyBge3t2aWV3fX1gIEhlbHBlcgoKICBPdGhlciBgRW1i
        ZXIuVmlld2AgaW5zdGFuY2VzIGNhbiBiZSBpbmNsdWRlZCBhcyBwYXJ0IG9m
        IGEgdmlldydzIHRlbXBsYXRlIGJ5CiAgdXNpbmcgdGhlIGB7e3ZpZXd9fWAg
        SGFuZGxlYmFycyBoZWxwZXIuIFNlZSBbRW1iZXIuSGFuZGxlYmFycy5oZWxw
        ZXJzLnZpZXddKC9hcGkvY2xhc3Nlcy9FbWJlci5IYW5kbGViYXJzLmhlbHBl
        cnMuaHRtbCNtZXRob2RfdmlldykKICBmb3IgYWRkaXRpb25hbCBpbmZvcm1h
        dGlvbi4KCiAgQGNsYXNzIFZpZXcKICBAbmFtZXNwYWNlIEVtYmVyCiAgQGV4
        dGVuZHMgRW1iZXIuQ29yZVZpZXcKKi8KRW1iZXIuVmlldyA9IEVtYmVyLkNv
        cmVWaWV3LmV4dGVuZCh7CgogIGNvbmNhdGVuYXRlZFByb3BlcnRpZXM6IFsn
        Y2xhc3NOYW1lcycsICdjbGFzc05hbWVCaW5kaW5ncycsICdhdHRyaWJ1dGVC
        aW5kaW5ncyddLAoKICAvKioKICAgIEBwcm9wZXJ0eSBpc1ZpZXcKICAgIEB0
        eXBlIEJvb2xlYW4KICAgIEBkZWZhdWx0IHRydWUKICAgIEBzdGF0aWMKICAq
        LwogIGlzVmlldzogdHJ1ZSwKCiAgLy8gLi4uLi4uLi4uLi4uLi4uLi4uLi4u
        Li4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLgogIC8vIFRF
        TVBMQVRFIFNVUFBPUlQKICAvLwoKICAvKioKICAgIFRoZSBuYW1lIG9mIHRo
        ZSB0ZW1wbGF0ZSB0byBsb29rdXAgaWYgbm8gdGVtcGxhdGUgaXMgcHJvdmlk
        ZWQuCgogICAgQnkgZGVmYXVsdCBgRW1iZXIuVmlld2Agd2lsbCBsb29rdXAg
        YSB0ZW1wbGF0ZSB3aXRoIHRoaXMgbmFtZSBpbgogICAgYEVtYmVyLlRFTVBM
        QVRFU2AgKGEgc2hhcmVkIGdsb2JhbCBvYmplY3QpLgoKICAgIEBwcm9wZXJ0
        eSB0ZW1wbGF0ZU5hbWUKICAgIEB0eXBlIFN0cmluZwogICAgQGRlZmF1bHQg
        bnVsbAogICovCiAgdGVtcGxhdGVOYW1lOiBudWxsLAoKICAvKioKICAgIFRo
        ZSBuYW1lIG9mIHRoZSBsYXlvdXQgdG8gbG9va3VwIGlmIG5vIGxheW91dCBp
        cyBwcm92aWRlZC4KCiAgICBCeSBkZWZhdWx0IGBFbWJlci5WaWV3YCB3aWxs
        IGxvb2t1cCBhIHRlbXBsYXRlIHdpdGggdGhpcyBuYW1lIGluCiAgICBgRW1i
        ZXIuVEVNUExBVEVTYCAoYSBzaGFyZWQgZ2xvYmFsIG9iamVjdCkuCgogICAg
        QHByb3BlcnR5IGxheW91dE5hbWUKICAgIEB0eXBlIFN0cmluZwogICAgQGRl
        ZmF1bHQgbnVsbAogICovCiAgbGF5b3V0TmFtZTogbnVsbCwKCiAgLyoqCiAg
        ICBUaGUgdGVtcGxhdGUgdXNlZCB0byByZW5kZXIgdGhlIHZpZXcuIFRoaXMg
        c2hvdWxkIGJlIGEgZnVuY3Rpb24gdGhhdAogICAgYWNjZXB0cyBhbiBvcHRp
        b25hbCBjb250ZXh0IHBhcmFtZXRlciBhbmQgcmV0dXJucyBhIHN0cmluZyBv
        ZiBIVE1MIHRoYXQKICAgIHdpbGwgYmUgaW5zZXJ0ZWQgaW50byB0aGUgRE9N
        IHJlbGF0aXZlIHRvIGl0cyBwYXJlbnQgdmlldy4KCiAgICBJbiBnZW5lcmFs
        LCB5b3Ugc2hvdWxkIHNldCB0aGUgYHRlbXBsYXRlTmFtZWAgcHJvcGVydHkg
        aW5zdGVhZCBvZiBzZXR0aW5nCiAgICB0aGUgdGVtcGxhdGUgeW91cnNlbGYu
        CgogICAgQHByb3BlcnR5IHRlbXBsYXRlCiAgICBAdHlwZSBGdW5jdGlvbgog
        ICovCiAgdGVtcGxhdGU6IEVtYmVyLmNvbXB1dGVkKGZ1bmN0aW9uKGtleSwg
        dmFsdWUpIHsKICAgIGlmICh2YWx1ZSAhPT0gdW5kZWZpbmVkKSB7IHJldHVy
        biB2YWx1ZTsgfQoKICAgIHZhciB0ZW1wbGF0ZU5hbWUgPSBnZXQodGhpcywg
        J3RlbXBsYXRlTmFtZScpLAogICAgICAgIHRlbXBsYXRlID0gdGhpcy50ZW1w
        bGF0ZUZvck5hbWUodGVtcGxhdGVOYW1lLCAndGVtcGxhdGUnKTsKCiAgICBF
        bWJlci5hc3NlcnQoIllvdSBzcGVjaWZpZWQgdGhlIHRlbXBsYXRlTmFtZSAi
        ICsgdGVtcGxhdGVOYW1lICsgIiBmb3IgIiArIHRoaXMgKyAiLCBidXQgaXQg
        ZGlkIG5vdCBleGlzdC4iLCAhdGVtcGxhdGVOYW1lIHx8IHRlbXBsYXRlKTsK
        CiAgICByZXR1cm4gdGVtcGxhdGUgfHwgZ2V0KHRoaXMsICdkZWZhdWx0VGVt
        cGxhdGUnKTsKICB9KS5wcm9wZXJ0eSgndGVtcGxhdGVOYW1lJyksCgogIC8q
        KgogICAgVGhlIGNvbnRyb2xsZXIgbWFuYWdpbmcgdGhpcyB2aWV3LiBJZiB0
        aGlzIHByb3BlcnR5IGlzIHNldCwgaXQgd2lsbCBiZQogICAgbWFkZSBhdmFp
        bGFibGUgZm9yIHVzZSBieSB0aGUgdGVtcGxhdGUuCgogICAgQHByb3BlcnR5
        IGNvbnRyb2xsZXIKICAgIEB0eXBlIE9iamVjdAogICovCiAgY29udHJvbGxl
        cjogRW1iZXIuY29tcHV0ZWQoZnVuY3Rpb24oa2V5KSB7CiAgICB2YXIgcGFy
        ZW50VmlldyA9IGdldCh0aGlzLCAnX3BhcmVudFZpZXcnKTsKICAgIHJldHVy
        biBwYXJlbnRWaWV3ID8gZ2V0KHBhcmVudFZpZXcsICdjb250cm9sbGVyJykg
        OiBudWxsOwogIH0pLnByb3BlcnR5KCdfcGFyZW50VmlldycpLAoKICAvKioK
        ICAgIEEgdmlldyBtYXkgY29udGFpbiBhIGxheW91dC4gQSBsYXlvdXQgaXMg
        YSByZWd1bGFyIHRlbXBsYXRlIGJ1dAogICAgc3VwZXJzZWRlcyB0aGUgYHRl
        bXBsYXRlYCBwcm9wZXJ0eSBkdXJpbmcgcmVuZGVyaW5nLiBJdCBpcyB0aGUK
        ICAgIHJlc3BvbnNpYmlsaXR5IG9mIHRoZSBsYXlvdXQgdGVtcGxhdGUgdG8g
        cmV0cmlldmUgdGhlIGB0ZW1wbGF0ZWAKICAgIHByb3BlcnR5IGZyb20gdGhl
        IHZpZXcgKG9yIGFsdGVybmF0aXZlbHksIGNhbGwgYEhhbmRsZWJhcnMuaGVs
        cGVycy55aWVsZGAsCiAgICBge3t5aWVsZH19YCkgdG8gcmVuZGVyIGl0IGlu
        IHRoZSBjb3JyZWN0IGxvY2F0aW9uLgoKICAgIFRoaXMgaXMgdXNlZnVsIGZv
        ciBhIHZpZXcgdGhhdCBoYXMgYSBzaGFyZWQgd3JhcHBlciwgYnV0IHdoaWNo
        IGRlbGVnYXRlcwogICAgdGhlIHJlbmRlcmluZyBvZiB0aGUgY29udGVudHMg
        b2YgdGhlIHdyYXBwZXIgdG8gdGhlIGB0ZW1wbGF0ZWAgcHJvcGVydHkKICAg
        IG9uIGEgc3ViY2xhc3MuCgogICAgQHByb3BlcnR5IGxheW91dAogICAgQHR5
        cGUgRnVuY3Rpb24KICAqLwogIGxheW91dDogRW1iZXIuY29tcHV0ZWQoZnVu
        Y3Rpb24oa2V5KSB7CiAgICB2YXIgbGF5b3V0TmFtZSA9IGdldCh0aGlzLCAn
        bGF5b3V0TmFtZScpLAogICAgICAgIGxheW91dCA9IHRoaXMudGVtcGxhdGVG
        b3JOYW1lKGxheW91dE5hbWUsICdsYXlvdXQnKTsKCiAgICBFbWJlci5hc3Nl
        cnQoIllvdSBzcGVjaWZpZWQgdGhlIGxheW91dE5hbWUgIiArIGxheW91dE5h
        bWUgKyAiIGZvciAiICsgdGhpcyArICIsIGJ1dCBpdCBkaWQgbm90IGV4aXN0
        LiIsICFsYXlvdXROYW1lIHx8IGxheW91dCk7CgogICAgcmV0dXJuIGxheW91
        dCB8fCBnZXQodGhpcywgJ2RlZmF1bHRMYXlvdXQnKTsKICB9KS5wcm9wZXJ0
        eSgnbGF5b3V0TmFtZScpLAoKICBfeWllbGQ6IGZ1bmN0aW9uKGNvbnRleHQs
        IG9wdGlvbnMpIHsKICAgIHZhciB0ZW1wbGF0ZSA9IGdldCh0aGlzLCAndGVt
        cGxhdGUnKTsKICAgIGlmICh0ZW1wbGF0ZSkgeyB0ZW1wbGF0ZShjb250ZXh0
        LCBvcHRpb25zKTsgfQogIH0sCgogIHRlbXBsYXRlRm9yTmFtZTogZnVuY3Rp
        b24obmFtZSwgdHlwZSkgewogICAgaWYgKCFuYW1lKSB7IHJldHVybjsgfQog
        ICAgRW1iZXIuYXNzZXJ0KCJ0ZW1wbGF0ZU5hbWVzIGFyZSBub3QgYWxsb3dl
        ZCB0byBjb250YWluIHBlcmlvZHM6ICIrbmFtZSwgbmFtZS5pbmRleE9mKCcu
        JykgPT09IC0xKTsKCiAgICAvLyB0aGUgZGVmYXVsdENvbnRhaW5lciBpcyBk
        ZXByZWNhdGVkCiAgICB2YXIgY29udGFpbmVyID0gdGhpcy5jb250YWluZXIg
        fHwgKEVtYmVyLkNvbnRhaW5lciAmJiBFbWJlci5Db250YWluZXIuZGVmYXVs
        dENvbnRhaW5lcik7CiAgICByZXR1cm4gY29udGFpbmVyICYmIGNvbnRhaW5l
        ci5sb29rdXAoJ3RlbXBsYXRlOicgKyBuYW1lKTsKICB9LAoKICAvKioKICAg
        IFRoZSBvYmplY3QgZnJvbSB3aGljaCB0ZW1wbGF0ZXMgc2hvdWxkIGFjY2Vz
        cyBwcm9wZXJ0aWVzLgoKICAgIFRoaXMgb2JqZWN0IHdpbGwgYmUgcGFzc2Vk
        IHRvIHRoZSB0ZW1wbGF0ZSBmdW5jdGlvbiBlYWNoIHRpbWUgdGhlIHJlbmRl
        cgogICAgbWV0aG9kIGlzIGNhbGxlZCwgYnV0IGl0IGlzIHVwIHRvIHRoZSBp
        bmRpdmlkdWFsIGZ1bmN0aW9uIHRvIGRlY2lkZSB3aGF0CiAgICB0byBkbyB3
        aXRoIGl0LgoKICAgIEJ5IGRlZmF1bHQsIHRoaXMgd2lsbCBiZSB0aGUgdmll
        dydzIGNvbnRyb2xsZXIuCgogICAgQHByb3BlcnR5IGNvbnRleHQKICAgIEB0
        eXBlIE9iamVjdAogICovCiAgY29udGV4dDogRW1iZXIuY29tcHV0ZWQoZnVu
        Y3Rpb24oa2V5LCB2YWx1ZSkgewogICAgaWYgKGFyZ3VtZW50cy5sZW5ndGgg
        PT09IDIpIHsKICAgICAgc2V0KHRoaXMsICdfY29udGV4dCcsIHZhbHVlKTsK
        ICAgICAgcmV0dXJuIHZhbHVlOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJu
        IGdldCh0aGlzLCAnX2NvbnRleHQnKTsKICAgIH0KICB9KS52b2xhdGlsZSgp
        LAoKICAvKioKICAgIFByaXZhdGUgY29weSBvZiB0aGUgdmlldydzIHRlbXBs
        YXRlIGNvbnRleHQuIFRoaXMgY2FuIGJlIHNldCBkaXJlY3RseQogICAgYnkg
        SGFuZGxlYmFycyB3aXRob3V0IHRyaWdnZXJpbmcgdGhlIG9ic2VydmVyIHRo
        YXQgY2F1c2VzIHRoZSB2aWV3CiAgICB0byBiZSByZS1yZW5kZXJlZC4KCiAg
        ICBUaGUgY29udGV4dCBvZiBhIHZpZXcgaXMgbG9va2VkIHVwIGFzIGZvbGxv
        d3M6CgogICAgMS4gU3VwcGxpZWQgY29udGV4dCAodXN1YWxseSBieSBIYW5k
        bGViYXJzKQogICAgMi4gU3BlY2lmaWVkIGNvbnRyb2xsZXIKICAgIDMuIGBw
        YXJlbnRWaWV3YCdzIGNvbnRleHQgKGZvciBhIGNoaWxkIG9mIGEgQ29udGFp
        bmVyVmlldykKCiAgICBUaGUgY29kZSBpbiBIYW5kbGViYXJzIHRoYXQgb3Zl
        cnJpZGVzIHRoZSBgX2NvbnRleHRgIHByb3BlcnR5IGZpcnN0CiAgICBjaGVj
        a3MgdG8gc2VlIHdoZXRoZXIgdGhlIHZpZXcgaGFzIGEgc3BlY2lmaWVkIGNv
        bnRyb2xsZXIuIFRoaXMgaXMKICAgIHNvbWV0aGluZyBvZiBhIGhhY2sgYW5k
        IHNob3VsZCBiZSByZXZpc2l0ZWQuCgogICAgQHByb3BlcnR5IF9jb250ZXh0
        CiAgICBAcHJpdmF0ZQogICovCiAgX2NvbnRleHQ6IEVtYmVyLmNvbXB1dGVk
        KGZ1bmN0aW9uKGtleSkgewogICAgdmFyIHBhcmVudFZpZXcsIGNvbnRyb2xs
        ZXI7CgogICAgaWYgKGNvbnRyb2xsZXIgPSBnZXQodGhpcywgJ2NvbnRyb2xs
        ZXInKSkgewogICAgICByZXR1cm4gY29udHJvbGxlcjsKICAgIH0KCiAgICBw
        YXJlbnRWaWV3ID0gdGhpcy5fcGFyZW50VmlldzsKICAgIGlmIChwYXJlbnRW
        aWV3KSB7CiAgICAgIHJldHVybiBnZXQocGFyZW50VmlldywgJ19jb250ZXh0
        Jyk7CiAgICB9CgogICAgcmV0dXJuIG51bGw7CiAgfSksCgogIC8qKgogICAg
        SWYgYSB2YWx1ZSB0aGF0IGFmZmVjdHMgdGVtcGxhdGUgcmVuZGVyaW5nIGNo
        YW5nZXMsIHRoZSB2aWV3IHNob3VsZCBiZQogICAgcmUtcmVuZGVyZWQgdG8g
        cmVmbGVjdCB0aGUgbmV3IHZhbHVlLgoKICAgIEBtZXRob2QgX2NvbnRleHRE
        aWRDaGFuZ2UKICAgIEBwcml2YXRlCiAgKi8KICBfY29udGV4dERpZENoYW5n
        ZTogRW1iZXIub2JzZXJ2ZXIoJ2NvbnRleHQnLCBmdW5jdGlvbigpIHsKICAg
        IHRoaXMucmVyZW5kZXIoKTsKICB9KSwKCiAgLyoqCiAgICBJZiBgZmFsc2Vg
        LCB0aGUgdmlldyB3aWxsIGFwcGVhciBoaWRkZW4gaW4gRE9NLgoKICAgIEBw
        cm9wZXJ0eSBpc1Zpc2libGUKICAgIEB0eXBlIEJvb2xlYW4KICAgIEBkZWZh
        dWx0IG51bGwKICAqLwogIGlzVmlzaWJsZTogdHJ1ZSwKCiAgLyoqCiAgICBB
        cnJheSBvZiBjaGlsZCB2aWV3cy4gWW91IHNob3VsZCBuZXZlciBlZGl0IHRo
        aXMgYXJyYXkgZGlyZWN0bHkuCiAgICBJbnN0ZWFkLCB1c2UgYGFwcGVuZENo
        aWxkYCBhbmQgYHJlbW92ZUZyb21QYXJlbnRgLgoKICAgIEBwcm9wZXJ0eSBj
        aGlsZFZpZXdzCiAgICBAdHlwZSBBcnJheQogICAgQGRlZmF1bHQgW10KICAg
        IEBwcml2YXRlCiAgKi8KICBjaGlsZFZpZXdzOiBjaGlsZFZpZXdzUHJvcGVy
        dHksCgogIF9jaGlsZFZpZXdzOiBFTVBUWV9BUlJBWSwKCiAgLy8gV2hlbiBp
        dCdzIGEgdmlydHVhbCB2aWV3LCB3ZSBuZWVkIHRvIG5vdGlmeSB0aGUgcGFy
        ZW50IHRoYXQgdGhlaXIKICAvLyBjaGlsZFZpZXdzIHdpbGwgY2hhbmdlLgog
        IF9jaGlsZFZpZXdzV2lsbENoYW5nZTogRW1iZXIuYmVmb3JlT2JzZXJ2ZXIo
        J2NoaWxkVmlld3MnLCBmdW5jdGlvbigpIHsKICAgIGlmICh0aGlzLmlzVmly
        dHVhbCkgewogICAgICB2YXIgcGFyZW50VmlldyA9IGdldCh0aGlzLCAncGFy
        ZW50VmlldycpOwogICAgICBpZiAocGFyZW50VmlldykgeyBFbWJlci5wcm9w
        ZXJ0eVdpbGxDaGFuZ2UocGFyZW50VmlldywgJ2NoaWxkVmlld3MnKTsgfQog
        ICAgfQogIH0pLAoKICAvLyBXaGVuIGl0J3MgYSB2aXJ0dWFsIHZpZXcsIHdl
        IG5lZWQgdG8gbm90aWZ5IHRoZSBwYXJlbnQgdGhhdCB0aGVpcgogIC8vIGNo
        aWxkVmlld3MgZGlkIGNoYW5nZS4KICBfY2hpbGRWaWV3c0RpZENoYW5nZTog
        RW1iZXIub2JzZXJ2ZXIoJ2NoaWxkVmlld3MnLCBmdW5jdGlvbigpIHsKICAg
        IGlmICh0aGlzLmlzVmlydHVhbCkgewogICAgICB2YXIgcGFyZW50VmlldyA9
        IGdldCh0aGlzLCAncGFyZW50VmlldycpOwogICAgICBpZiAocGFyZW50Vmll
        dykgeyBFbWJlci5wcm9wZXJ0eURpZENoYW5nZShwYXJlbnRWaWV3LCAnY2hp
        bGRWaWV3cycpOyB9CiAgICB9CiAgfSksCgogIC8qKgogICAgUmV0dXJuIHRo
        ZSBuZWFyZXN0IGFuY2VzdG9yIHRoYXQgaXMgYW4gaW5zdGFuY2Ugb2YgdGhl
        IHByb3ZpZGVkCiAgICBjbGFzcy4KCiAgICBAcHJvcGVydHkgbmVhcmVzdElu
        c3RhbmNlT2YKICAgIEBwYXJhbSB7Q2xhc3N9IGtsYXNzIFN1YmNsYXNzIG9m
        IEVtYmVyLlZpZXcgKG9yIEVtYmVyLlZpZXcgaXRzZWxmKQogICAgQHJldHVy
        biBFbWJlci5WaWV3CiAgICBAZGVwcmVjYXRlZAogICovCiAgbmVhcmVzdElu
        c3RhbmNlT2Y6IGZ1bmN0aW9uKGtsYXNzKSB7CiAgICBFbWJlci5kZXByZWNh
        dGUoIm5lYXJlc3RJbnN0YW5jZU9mIGlzIGRlcHJlY2F0ZWQgYW5kIHdpbGwg
        YmUgcmVtb3ZlZCBmcm9tIGZ1dHVyZSByZWxlYXNlcy4gVXNlIG5lYXJlc3RP
        ZlR5cGUuIik7CiAgICB2YXIgdmlldyA9IGdldCh0aGlzLCAncGFyZW50Vmll
        dycpOwoKICAgIHdoaWxlICh2aWV3KSB7CiAgICAgIGlmICh2aWV3IGluc3Rh
        bmNlb2Yga2xhc3MpIHsgcmV0dXJuIHZpZXc7IH0KICAgICAgdmlldyA9IGdl
        dCh2aWV3LCAncGFyZW50VmlldycpOwogICAgfQogIH0sCgogIC8qKgogICAg
        UmV0dXJuIHRoZSBuZWFyZXN0IGFuY2VzdG9yIHRoYXQgaXMgYW4gaW5zdGFu
        Y2Ugb2YgdGhlIHByb3ZpZGVkCiAgICBjbGFzcyBvciBtaXhpbi4KCiAgICBA
        cHJvcGVydHkgbmVhcmVzdE9mVHlwZQogICAgQHBhcmFtIHtDbGFzcyxNaXhp
        bn0ga2xhc3MgU3ViY2xhc3Mgb2YgRW1iZXIuVmlldyAob3IgRW1iZXIuVmll
        dyBpdHNlbGYpLAogICAgICAgICAgIG9yIGFuIGluc3RhbmNlIG9mIEVtYmVy
        Lk1peGluLgogICAgQHJldHVybiBFbWJlci5WaWV3CiAgKi8KICBuZWFyZXN0
        T2ZUeXBlOiBmdW5jdGlvbihrbGFzcykgewogICAgdmFyIHZpZXcgPSBnZXQo
        dGhpcywgJ3BhcmVudFZpZXcnKSwKICAgICAgICBpc09mVHlwZSA9IGtsYXNz
        IGluc3RhbmNlb2YgRW1iZXIuTWl4aW4gPwogICAgICAgICAgICAgICAgICAg
        ZnVuY3Rpb24odmlldykgeyByZXR1cm4ga2xhc3MuZGV0ZWN0KHZpZXcpOyB9
        IDoKICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKHZpZXcpIHsgcmV0dXJu
        IGtsYXNzLmRldGVjdCh2aWV3LmNvbnN0cnVjdG9yKTsgfTsKCiAgICB3aGls
        ZSAodmlldykgewogICAgICBpZiAoaXNPZlR5cGUodmlldykpIHsgcmV0dXJu
        IHZpZXc7IH0KICAgICAgdmlldyA9IGdldCh2aWV3LCAncGFyZW50Vmlldycp
        OwogICAgfQogIH0sCgogIC8qKgogICAgUmV0dXJuIHRoZSBuZWFyZXN0IGFu
        Y2VzdG9yIHRoYXQgaGFzIGEgZ2l2ZW4gcHJvcGVydHkuCgogICAgQGZ1bmN0
        aW9uIG5lYXJlc3RXaXRoUHJvcGVydHkKICAgIEBwYXJhbSB7U3RyaW5nfSBw
        cm9wZXJ0eSBBIHByb3BlcnR5IG5hbWUKICAgIEByZXR1cm4gRW1iZXIuVmll
        dwogICovCiAgbmVhcmVzdFdpdGhQcm9wZXJ0eTogZnVuY3Rpb24ocHJvcGVy
        dHkpIHsKICAgIHZhciB2aWV3ID0gZ2V0KHRoaXMsICdwYXJlbnRWaWV3Jyk7
        CgogICAgd2hpbGUgKHZpZXcpIHsKICAgICAgaWYgKHByb3BlcnR5IGluIHZp
        ZXcpIHsgcmV0dXJuIHZpZXc7IH0KICAgICAgdmlldyA9IGdldCh2aWV3LCAn
        cGFyZW50VmlldycpOwogICAgfQogIH0sCgogIC8qKgogICAgUmV0dXJuIHRo
        ZSBuZWFyZXN0IGFuY2VzdG9yIHdob3NlIHBhcmVudCBpcyBhbiBpbnN0YW5j
        ZSBvZgogICAgYGtsYXNzYC4KCiAgICBAbWV0aG9kIG5lYXJlc3RDaGlsZE9m
        CiAgICBAcGFyYW0ge0NsYXNzfSBrbGFzcyBTdWJjbGFzcyBvZiBFbWJlci5W
        aWV3IChvciBFbWJlci5WaWV3IGl0c2VsZikKICAgIEByZXR1cm4gRW1iZXIu
        VmlldwogICovCiAgbmVhcmVzdENoaWxkT2Y6IGZ1bmN0aW9uKGtsYXNzKSB7
        CiAgICB2YXIgdmlldyA9IGdldCh0aGlzLCAncGFyZW50VmlldycpOwoKICAg
        IHdoaWxlICh2aWV3KSB7CiAgICAgIGlmIChnZXQodmlldywgJ3BhcmVudFZp
        ZXcnKSBpbnN0YW5jZW9mIGtsYXNzKSB7IHJldHVybiB2aWV3OyB9CiAgICAg
        IHZpZXcgPSBnZXQodmlldywgJ3BhcmVudFZpZXcnKTsKICAgIH0KICB9LAoK
        ICAvKioKICAgIFdoZW4gdGhlIHBhcmVudCB2aWV3IGNoYW5nZXMsIHJlY3Vy
        c2l2ZWx5IGludmFsaWRhdGUgYGNvbnRyb2xsZXJgCgogICAgQG1ldGhvZCBf
        cGFyZW50Vmlld0RpZENoYW5nZQogICAgQHByaXZhdGUKICAqLwogIF9wYXJl
        bnRWaWV3RGlkQ2hhbmdlOiBFbWJlci5vYnNlcnZlcignX3BhcmVudFZpZXcn
        LCBmdW5jdGlvbigpIHsKICAgIGlmICh0aGlzLmlzRGVzdHJveWluZykgeyBy
        ZXR1cm47IH0KCiAgICB0aGlzLnRyaWdnZXIoJ3BhcmVudFZpZXdEaWRDaGFu
        Z2UnKTsKCiAgICBpZiAoZ2V0KHRoaXMsICdwYXJlbnRWaWV3LmNvbnRyb2xs
        ZXInKSAmJiAhZ2V0KHRoaXMsICdjb250cm9sbGVyJykpIHsKICAgICAgdGhp
        cy5ub3RpZnlQcm9wZXJ0eUNoYW5nZSgnY29udHJvbGxlcicpOwogICAgfQog
        IH0pLAoKICBfY29udHJvbGxlckRpZENoYW5nZTogRW1iZXIub2JzZXJ2ZXIo
        J2NvbnRyb2xsZXInLCBmdW5jdGlvbigpIHsKICAgIGlmICh0aGlzLmlzRGVz
        dHJveWluZykgeyByZXR1cm47IH0KCiAgICB0aGlzLnJlcmVuZGVyKCk7Cgog
        ICAgdGhpcy5mb3JFYWNoQ2hpbGRWaWV3KGZ1bmN0aW9uKHZpZXcpIHsKICAg
        ICAgdmlldy5wcm9wZXJ0eURpZENoYW5nZSgnY29udHJvbGxlcicpOwogICAg
        fSk7CiAgfSksCgogIGNsb25lS2V5d29yZHM6IGZ1bmN0aW9uKCkgewogICAg
        dmFyIHRlbXBsYXRlRGF0YSA9IGdldCh0aGlzLCAndGVtcGxhdGVEYXRhJyk7
        CgogICAgdmFyIGtleXdvcmRzID0gdGVtcGxhdGVEYXRhID8gRW1iZXIuY29w
        eSh0ZW1wbGF0ZURhdGEua2V5d29yZHMpIDoge307CiAgICBzZXQoa2V5d29y
        ZHMsICd2aWV3JywgZ2V0KHRoaXMsICdjb25jcmV0ZVZpZXcnKSk7CiAgICBz
        ZXQoa2V5d29yZHMsICdfdmlldycsIHRoaXMpOwogICAgc2V0KGtleXdvcmRz
        LCAnY29udHJvbGxlcicsIGdldCh0aGlzLCAnY29udHJvbGxlcicpKTsKCiAg
        ICByZXR1cm4ga2V5d29yZHM7CiAgfSwKCiAgLyoqCiAgICBDYWxsZWQgb24g
        eW91ciB2aWV3IHdoZW4gaXQgc2hvdWxkIHB1c2ggc3RyaW5ncyBvZiBIVE1M
        IGludG8gYQogICAgYEVtYmVyLlJlbmRlckJ1ZmZlcmAuIE1vc3QgdXNlcnMg
        d2lsbCB3YW50IHRvIG92ZXJyaWRlIHRoZSBgdGVtcGxhdGVgCiAgICBvciBg
        dGVtcGxhdGVOYW1lYCBwcm9wZXJ0aWVzIGluc3RlYWQgb2YgdGhpcyBtZXRo
        b2QuCgogICAgQnkgZGVmYXVsdCwgYEVtYmVyLlZpZXdgIHdpbGwgbG9vayBm
        b3IgYSBmdW5jdGlvbiBpbiB0aGUgYHRlbXBsYXRlYAogICAgcHJvcGVydHkg
        YW5kIGludm9rZSBpdCB3aXRoIHRoZSB2YWx1ZSBvZiBgY29udGV4dGAuIFRo
        ZSB2YWx1ZSBvZgogICAgYGNvbnRleHRgIHdpbGwgYmUgdGhlIHZpZXcncyBj
        b250cm9sbGVyIHVubGVzcyB5b3Ugb3ZlcnJpZGUgaXQuCgogICAgQG1ldGhv
        ZCByZW5kZXIKICAgIEBwYXJhbSB7RW1iZXIuUmVuZGVyQnVmZmVyfSBidWZm
        ZXIgVGhlIHJlbmRlciBidWZmZXIKICAqLwogIHJlbmRlcjogZnVuY3Rpb24o
        YnVmZmVyKSB7CiAgICAvLyBJZiB0aGlzIHZpZXcgaGFzIGEgbGF5b3V0LCBp
        dCBpcyB0aGUgcmVzcG9uc2liaWxpdHkgb2YgdGhlCiAgICAvLyB0aGUgbGF5
        b3V0IHRvIHJlbmRlciB0aGUgdmlldydzIHRlbXBsYXRlLiBPdGhlcndpc2Us
        IHJlbmRlciB0aGUgdGVtcGxhdGUKICAgIC8vIGRpcmVjdGx5LgogICAgdmFy
        IHRlbXBsYXRlID0gZ2V0KHRoaXMsICdsYXlvdXQnKSB8fCBnZXQodGhpcywg
        J3RlbXBsYXRlJyk7CgogICAgaWYgKHRlbXBsYXRlKSB7CiAgICAgIHZhciBj
        b250ZXh0ID0gZ2V0KHRoaXMsICdjb250ZXh0Jyk7CiAgICAgIHZhciBrZXl3
        b3JkcyA9IHRoaXMuY2xvbmVLZXl3b3JkcygpOwogICAgICB2YXIgb3V0cHV0
        OwoKICAgICAgdmFyIGRhdGEgPSB7CiAgICAgICAgdmlldzogdGhpcywKICAg
        ICAgICBidWZmZXI6IGJ1ZmZlciwKICAgICAgICBpc1JlbmRlckRhdGE6IHRy
        dWUsCiAgICAgICAga2V5d29yZHM6IGtleXdvcmRzLAogICAgICAgIGluc2lk
        ZUdyb3VwOiBnZXQodGhpcywgJ3RlbXBsYXRlRGF0YS5pbnNpZGVHcm91cCcp
        CiAgICAgIH07CgogICAgICAvLyBJbnZva2UgdGhlIHRlbXBsYXRlIHdpdGgg
        dGhlIHByb3ZpZGVkIHRlbXBsYXRlIGNvbnRleHQsIHdoaWNoCiAgICAgIC8v
        IGlzIHRoZSB2aWV3J3MgY29udHJvbGxlciBieSBkZWZhdWx0LiBBIGhhc2gg
        b2YgZGF0YSBpcyBhbHNvIHBhc3NlZCB0aGF0IHByb3ZpZGVzCiAgICAgIC8v
        IHRoZSB0ZW1wbGF0ZSB3aXRoIGFjY2VzcyB0byB0aGUgdmlldyBhbmQgcmVu
        ZGVyIGJ1ZmZlci4KCiAgICAgIEVtYmVyLmFzc2VydCgndGVtcGxhdGUgbXVz
        dCBiZSBhIGZ1bmN0aW9uLiBEaWQgeW91IG1lYW4gdG8gY2FsbCBFbWJlci5I
        YW5kbGViYXJzLmNvbXBpbGUoIi4uLiIpIG9yIHNwZWNpZnkgdGVtcGxhdGVO
        YW1lIGluc3RlYWQ/JywgdHlwZW9mIHRlbXBsYXRlID09PSAnZnVuY3Rpb24n
        KTsKICAgICAgLy8gVGhlIHRlbXBsYXRlIHNob3VsZCB3cml0ZSBkaXJlY3Rs
        eSB0byB0aGUgcmVuZGVyIGJ1ZmZlciBpbnN0ZWFkCiAgICAgIC8vIG9mIHJl
        dHVybmluZyBhIHN0cmluZy4KICAgICAgb3V0cHV0ID0gdGVtcGxhdGUoY29u
        dGV4dCwgeyBkYXRhOiBkYXRhIH0pOwoKICAgICAgLy8gSWYgdGhlIHRlbXBs
        YXRlIHJldHVybmVkIGEgc3RyaW5nIGluc3RlYWQgb2Ygd3JpdGluZyB0byB0
        aGUgYnVmZmVyLAogICAgICAvLyBwdXNoIHRoZSBzdHJpbmcgb250byB0aGUg
        YnVmZmVyLgogICAgICBpZiAob3V0cHV0ICE9PSB1bmRlZmluZWQpIHsgYnVm
        ZmVyLnB1c2gob3V0cHV0KTsgfQogICAgfQogIH0sCgogIC8qKgogICAgUmVu
        ZGVycyB0aGUgdmlldyBhZ2Fpbi4gVGhpcyB3aWxsIHdvcmsgcmVnYXJkbGVz
        cyBvZiB3aGV0aGVyIHRoZQogICAgdmlldyBpcyBhbHJlYWR5IGluIHRoZSBE
        T00gb3Igbm90LiBJZiB0aGUgdmlldyBpcyBpbiB0aGUgRE9NLCB0aGUKICAg
        IHJlbmRlcmluZyBwcm9jZXNzIHdpbGwgYmUgZGVmZXJyZWQgdG8gZ2l2ZSBi
        aW5kaW5ncyBhIGNoYW5jZQogICAgdG8gc3luY2hyb25pemUuCgogICAgSWYg
        Y2hpbGRyZW4gd2VyZSBhZGRlZCBkdXJpbmcgdGhlIHJlbmRlcmluZyBwcm9j
        ZXNzIHVzaW5nIGBhcHBlbmRDaGlsZGAsCiAgICBgcmVyZW5kZXJgIHdpbGwg
        cmVtb3ZlIHRoZW0sIGJlY2F1c2UgdGhleSB3aWxsIGJlIGFkZGVkIGFnYWlu
        CiAgICBpZiBuZWVkZWQgYnkgdGhlIG5leHQgYHJlbmRlcmAuCgogICAgSW4g
        Z2VuZXJhbCwgaWYgdGhlIGRpc3BsYXkgb2YgeW91ciB2aWV3IGNoYW5nZXMs
        IHlvdSBzaG91bGQgbW9kaWZ5CiAgICB0aGUgRE9NIGVsZW1lbnQgZGlyZWN0
        bHkgaW5zdGVhZCBvZiBtYW51YWxseSBjYWxsaW5nIGByZXJlbmRlcmAsIHdo
        aWNoIGNhbgogICAgYmUgc2xvdy4KCiAgICBAbWV0aG9kIHJlcmVuZGVyCiAg
        Ki8KICByZXJlbmRlcjogZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gdGhpcy5j
        dXJyZW50U3RhdGUucmVyZW5kZXIodGhpcyk7CiAgfSwKCiAgY2xlYXJSZW5k
        ZXJlZENoaWxkcmVuOiBmdW5jdGlvbigpIHsKICAgIHZhciBsZW5ndGhCZWZv
        cmUgPSB0aGlzLmxlbmd0aEJlZm9yZVJlbmRlciwKICAgICAgICBsZW5ndGhB
        ZnRlciAgPSB0aGlzLmxlbmd0aEFmdGVyUmVuZGVyOwoKICAgIC8vIElmIHRo
        ZXJlIHdlcmUgY2hpbGQgdmlld3MgY3JlYXRlZCBkdXJpbmcgdGhlIGxhc3Qg
        Y2FsbCB0byByZW5kZXIoKSwKICAgIC8vIHJlbW92ZSB0aGVtIHVuZGVyIHRo
        ZSBhc3N1bXB0aW9uIHRoYXQgdGhleSB3aWxsIGJlIHJlLWNyZWF0ZWQgd2hl
        bgogICAgLy8gd2UgcmUtcmVuZGVyLgoKICAgIC8vIFZJRVctVE9ETzogVW5p
        dCB0ZXN0IHRoaXMgcGF0aC4KICAgIHZhciBjaGlsZFZpZXdzID0gdGhpcy5f
        Y2hpbGRWaWV3czsKICAgIGZvciAodmFyIGk9bGVuZ3RoQWZ0ZXItMTsgaT49
        bGVuZ3RoQmVmb3JlOyBpLS0pIHsKICAgICAgaWYgKGNoaWxkVmlld3NbaV0p
        IHsgY2hpbGRWaWV3c1tpXS5kZXN0cm95KCk7IH0KICAgIH0KICB9LAoKICAv
        KioKICAgIEl0ZXJhdGVzIG92ZXIgdGhlIHZpZXcncyBgY2xhc3NOYW1lQmlu
        ZGluZ3NgIGFycmF5LCBpbnNlcnRzIHRoZSB2YWx1ZQogICAgb2YgdGhlIHNw
        ZWNpZmllZCBwcm9wZXJ0eSBpbnRvIHRoZSBgY2xhc3NOYW1lc2AgYXJyYXks
        IHRoZW4gY3JlYXRlcyBhbgogICAgb2JzZXJ2ZXIgdG8gdXBkYXRlIHRoZSB2
        aWV3J3MgZWxlbWVudCBpZiB0aGUgYm91bmQgcHJvcGVydHkgZXZlciBjaGFu
        Z2VzCiAgICBpbiB0aGUgZnV0dXJlLgoKICAgIEBtZXRob2QgX2FwcGx5Q2xh
        c3NOYW1lQmluZGluZ3MKICAgIEBwcml2YXRlCiAgKi8KICBfYXBwbHlDbGFz
        c05hbWVCaW5kaW5nczogZnVuY3Rpb24oY2xhc3NCaW5kaW5ncykgewogICAg
        dmFyIGNsYXNzTmFtZXMgPSB0aGlzLmNsYXNzTmFtZXMsCiAgICBlbGVtLCBu
        ZXdDbGFzcywgZGFzaGVyaXplZENsYXNzOwoKICAgIC8vIExvb3AgdGhyb3Vn
        aCBhbGwgb2YgdGhlIGNvbmZpZ3VyZWQgYmluZGluZ3MuIFRoZXNlIHdpbGwg
        YmUgZWl0aGVyCiAgICAvLyBwcm9wZXJ0eSBuYW1lcyAoJ2lzVXJnZW50Jykg
        b3IgcHJvcGVydHkgcGF0aHMgcmVsYXRpdmUgdG8gdGhlIHZpZXcKICAgIC8v
        ICgnY29udGVudC5pc1VyZ2VudCcpCiAgICBhX2ZvckVhY2goY2xhc3NCaW5k
        aW5ncywgZnVuY3Rpb24oYmluZGluZykgewoKICAgICAgRW1iZXIuYXNzZXJ0
        KCJjbGFzc05hbWVCaW5kaW5ncyBtdXN0IG5vdCBoYXZlIHNwYWNlcyBpbiB0
        aGVtLiBNdWx0aXBsZSBjbGFzcyBuYW1lIGJpbmRpbmdzIGNhbiBiZSBwcm92
        aWRlZCBhcyBlbGVtZW50cyBvZiBhbiBhcnJheSwgZS5nLiBbJ2ZvbycsICc6
        YmFyJ10iLCBiaW5kaW5nLmluZGV4T2YoJyAnKSA9PT0gLTEpOwoKICAgICAg
        Ly8gVmFyaWFibGUgaW4gd2hpY2ggdGhlIG9sZCBjbGFzcyB2YWx1ZSBpcyBz
        YXZlZC4gVGhlIG9ic2VydmVyIGZ1bmN0aW9uCiAgICAgIC8vIGNsb3NlcyBv
        dmVyIHRoaXMgdmFyaWFibGUsIHNvIGl0IGtub3dzIHdoaWNoIHN0cmluZyB0
        byByZW1vdmUgd2hlbgogICAgICAvLyB0aGUgcHJvcGVydHkgY2hhbmdlcy4K
        ICAgICAgdmFyIG9sZENsYXNzOwogICAgICAvLyBFeHRyYWN0IGp1c3QgdGhl
        IHByb3BlcnR5IG5hbWUgZnJvbSBiaW5kaW5ncyBsaWtlICdmb286YmFyJwog
        ICAgICB2YXIgcGFyc2VkUGF0aCA9IEVtYmVyLlZpZXcuX3BhcnNlUHJvcGVy
        dHlQYXRoKGJpbmRpbmcpOwoKICAgICAgLy8gU2V0IHVwIGFuIG9ic2VydmVy
        IG9uIHRoZSBjb250ZXh0LiBJZiB0aGUgcHJvcGVydHkgY2hhbmdlcywgdG9n
        Z2xlIHRoZQogICAgICAvLyBjbGFzcyBuYW1lLgogICAgICB2YXIgb2JzZXJ2
        ZXIgPSBmdW5jdGlvbigpIHsKICAgICAgICAvLyBHZXQgdGhlIGN1cnJlbnQg
        dmFsdWUgb2YgdGhlIHByb3BlcnR5CiAgICAgICAgbmV3Q2xhc3MgPSB0aGlz
        Ll9jbGFzc1N0cmluZ0ZvclByb3BlcnR5KGJpbmRpbmcpOwogICAgICAgIGVs
        ZW0gPSB0aGlzLiQoKTsKCiAgICAgICAgLy8gSWYgd2UgaGFkIHByZXZpb3Vz
        bHkgYWRkZWQgYSBjbGFzcyB0byB0aGUgZWxlbWVudCwgcmVtb3ZlIGl0Lgog
        ICAgICAgIGlmIChvbGRDbGFzcykgewogICAgICAgICAgZWxlbS5yZW1vdmVD
        bGFzcyhvbGRDbGFzcyk7CiAgICAgICAgICAvLyBBbHNvIHJlbW92ZSBmcm9t
        IGNsYXNzTmFtZXMgc28gdGhhdCBpZiB0aGUgdmlldyBnZXRzIHJlcmVuZGVy
        ZWQsCiAgICAgICAgICAvLyB0aGUgY2xhc3MgZG9lc24ndCBnZXQgYWRkZWQg
        YmFjayB0byB0aGUgRE9NLgogICAgICAgICAgY2xhc3NOYW1lcy5yZW1vdmVP
        YmplY3Qob2xkQ2xhc3MpOwogICAgICAgIH0KCiAgICAgICAgLy8gSWYgbmVj
        ZXNzYXJ5LCBhZGQgYSBuZXcgY2xhc3MuIE1ha2Ugc3VyZSB3ZSBrZWVwIHRy
        YWNrIG9mIGl0IHNvCiAgICAgICAgLy8gaXQgY2FuIGJlIHJlbW92ZWQgaW4g
        dGhlIGZ1dHVyZS4KICAgICAgICBpZiAobmV3Q2xhc3MpIHsKICAgICAgICAg
        IGVsZW0uYWRkQ2xhc3MobmV3Q2xhc3MpOwogICAgICAgICAgb2xkQ2xhc3Mg
        PSBuZXdDbGFzczsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgb2xkQ2xh
        c3MgPSBudWxsOwogICAgICAgIH0KICAgICAgfTsKCiAgICAgIC8vIEdldCB0
        aGUgY2xhc3MgbmFtZSBmb3IgdGhlIHByb3BlcnR5IGF0IGl0cyBjdXJyZW50
        IHZhbHVlCiAgICAgIGRhc2hlcml6ZWRDbGFzcyA9IHRoaXMuX2NsYXNzU3Ry
        aW5nRm9yUHJvcGVydHkoYmluZGluZyk7CgogICAgICBpZiAoZGFzaGVyaXpl
        ZENsYXNzKSB7CiAgICAgICAgLy8gRW5zdXJlIHRoYXQgaXQgZ2V0cyBpbnRv
        IHRoZSBjbGFzc05hbWVzIGFycmF5CiAgICAgICAgLy8gc28gaXQgaXMgZGlz
        cGxheWVkIHdoZW4gd2UgcmVuZGVyLgogICAgICAgIGFfYWRkT2JqZWN0KGNs
        YXNzTmFtZXMsIGRhc2hlcml6ZWRDbGFzcyk7CgogICAgICAgIC8vIFNhdmUg
        YSByZWZlcmVuY2UgdG8gdGhlIGNsYXNzIG5hbWUgc28gd2UgY2FuIHJlbW92
        ZSBpdAogICAgICAgIC8vIGlmIHRoZSBvYnNlcnZlciBmaXJlcy4gUmVtZW1i
        ZXIgdGhhdCB0aGlzIHZhcmlhYmxlIGhhcwogICAgICAgIC8vIGJlZW4gY2xv
        c2VkIG92ZXIgYnkgdGhlIG9ic2VydmVyLgogICAgICAgIG9sZENsYXNzID0g
        ZGFzaGVyaXplZENsYXNzOwogICAgICB9CgogICAgICB0aGlzLnJlZ2lzdGVy
        T2JzZXJ2ZXIodGhpcywgcGFyc2VkUGF0aC5wYXRoLCBvYnNlcnZlcik7CiAg
        ICAgIC8vIFJlbW92ZSBjbGFzc05hbWUgc28gd2hlbiB0aGUgdmlldyBpcyBy
        ZXJlbmRlcmVkLAogICAgICAvLyB0aGUgY2xhc3NOYW1lIGlzIGFkZGVkIGJh
        c2VkIG9uIGJpbmRpbmcgcmVldmFsdWF0aW9uCiAgICAgIHRoaXMub25lKCd3
        aWxsQ2xlYXJSZW5kZXInLCBmdW5jdGlvbigpIHsKICAgICAgICBpZiAob2xk
        Q2xhc3MpIHsKICAgICAgICAgIGNsYXNzTmFtZXMucmVtb3ZlT2JqZWN0KG9s
        ZENsYXNzKTsKICAgICAgICAgIG9sZENsYXNzID0gbnVsbDsKICAgICAgICB9
        CiAgICAgIH0pOwoKICAgIH0sIHRoaXMpOwogIH0sCgogIC8qKgogICAgSXRl
        cmF0ZXMgdGhyb3VnaCB0aGUgdmlldydzIGF0dHJpYnV0ZSBiaW5kaW5ncywg
        c2V0cyB1cCBvYnNlcnZlcnMgZm9yIGVhY2gsCiAgICB0aGVuIGFwcGxpZXMg
        dGhlIGN1cnJlbnQgdmFsdWUgb2YgdGhlIGF0dHJpYnV0ZXMgdG8gdGhlIHBh
        c3NlZCByZW5kZXIgYnVmZmVyLgoKICAgIEBtZXRob2QgX2FwcGx5QXR0cmli
        dXRlQmluZGluZ3MKICAgIEBwYXJhbSB7RW1iZXIuUmVuZGVyQnVmZmVyfSBi
        dWZmZXIKICAgIEBwcml2YXRlCiAgKi8KICBfYXBwbHlBdHRyaWJ1dGVCaW5k
        aW5nczogZnVuY3Rpb24oYnVmZmVyLCBhdHRyaWJ1dGVCaW5kaW5ncykgewog
        ICAgdmFyIGF0dHJpYnV0ZVZhbHVlLCBlbGVtOwoKICAgIGFfZm9yRWFjaChh
        dHRyaWJ1dGVCaW5kaW5ncywgZnVuY3Rpb24oYmluZGluZykgewogICAgICB2
        YXIgc3BsaXQgPSBiaW5kaW5nLnNwbGl0KCc6JyksCiAgICAgICAgICBwcm9w
        ZXJ0eSA9IHNwbGl0WzBdLAogICAgICAgICAgYXR0cmlidXRlTmFtZSA9IHNw
        bGl0WzFdIHx8IHByb3BlcnR5OwoKICAgICAgLy8gQ3JlYXRlIGFuIG9ic2Vy
        dmVyIHRvIGFkZC9yZW1vdmUvY2hhbmdlIHRoZSBhdHRyaWJ1dGUgaWYgdGhl
        CiAgICAgIC8vIEphdmFTY3JpcHQgcHJvcGVydHkgY2hhbmdlcy4KICAgICAg
        dmFyIG9ic2VydmVyID0gZnVuY3Rpb24oKSB7CiAgICAgICAgZWxlbSA9IHRo
        aXMuJCgpOwoKICAgICAgICBhdHRyaWJ1dGVWYWx1ZSA9IGdldCh0aGlzLCBw
        cm9wZXJ0eSk7CgogICAgICAgIEVtYmVyLlZpZXcuYXBwbHlBdHRyaWJ1dGVC
        aW5kaW5ncyhlbGVtLCBhdHRyaWJ1dGVOYW1lLCBhdHRyaWJ1dGVWYWx1ZSk7
        CiAgICAgIH07CgogICAgICB0aGlzLnJlZ2lzdGVyT2JzZXJ2ZXIodGhpcywg
        cHJvcGVydHksIG9ic2VydmVyKTsKCiAgICAgIC8vIERldGVybWluZSB0aGUg
        Y3VycmVudCB2YWx1ZSBhbmQgYWRkIGl0IHRvIHRoZSByZW5kZXIgYnVmZmVy
        CiAgICAgIC8vIGlmIG5lY2Vzc2FyeS4KICAgICAgYXR0cmlidXRlVmFsdWUg
        PSBnZXQodGhpcywgcHJvcGVydHkpOwogICAgICBFbWJlci5WaWV3LmFwcGx5
        QXR0cmlidXRlQmluZGluZ3MoYnVmZmVyLCBhdHRyaWJ1dGVOYW1lLCBhdHRy
        aWJ1dGVWYWx1ZSk7CiAgICB9LCB0aGlzKTsKICB9LAoKICAvKioKICAgIEdp
        dmVuIGEgcHJvcGVydHkgbmFtZSwgcmV0dXJucyBhIGRhc2hlcml6ZWQgdmVy
        c2lvbiBvZiB0aGF0CiAgICBwcm9wZXJ0eSBuYW1lIGlmIHRoZSBwcm9wZXJ0
        eSBldmFsdWF0ZXMgdG8gYSBub24tZmFsc3kgdmFsdWUuCgogICAgRm9yIGV4
        YW1wbGUsIGlmIHRoZSB2aWV3IGhhcyBwcm9wZXJ0eSBgaXNVcmdlbnRgIHRo
        YXQgZXZhbHVhdGVzIHRvIHRydWUsCiAgICBwYXNzaW5nIGBpc1VyZ2VudGAg
        dG8gdGhpcyBtZXRob2Qgd2lsbCByZXR1cm4gYCJpcy11cmdlbnQiYC4KCiAg
        ICBAbWV0aG9kIF9jbGFzc1N0cmluZ0ZvclByb3BlcnR5CiAgICBAcGFyYW0g
        cHJvcGVydHkKICAgIEBwcml2YXRlCiAgKi8KICBfY2xhc3NTdHJpbmdGb3JQ
        cm9wZXJ0eTogZnVuY3Rpb24ocHJvcGVydHkpIHsKICAgIHZhciBwYXJzZWRQ
        YXRoID0gRW1iZXIuVmlldy5fcGFyc2VQcm9wZXJ0eVBhdGgocHJvcGVydHkp
        OwogICAgdmFyIHBhdGggPSBwYXJzZWRQYXRoLnBhdGg7CgogICAgdmFyIHZh
        bCA9IGdldCh0aGlzLCBwYXRoKTsKICAgIGlmICh2YWwgPT09IHVuZGVmaW5l
        ZCAmJiBFbWJlci5pc0dsb2JhbFBhdGgocGF0aCkpIHsKICAgICAgdmFsID0g
        Z2V0KEVtYmVyLmxvb2t1cCwgcGF0aCk7CiAgICB9CgogICAgcmV0dXJuIEVt
        YmVyLlZpZXcuX2NsYXNzU3RyaW5nRm9yVmFsdWUocGF0aCwgdmFsLCBwYXJz
        ZWRQYXRoLmNsYXNzTmFtZSwgcGFyc2VkUGF0aC5mYWxzeUNsYXNzTmFtZSk7
        CiAgfSwKCiAgLy8gLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4u
        Li4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLgogIC8vIEVMRU1FTlQgU1VQUE9S
        VAogIC8vCgogIC8qKgogICAgUmV0dXJucyB0aGUgY3VycmVudCBET00gZWxl
        bWVudCBmb3IgdGhlIHZpZXcuCgogICAgQHByb3BlcnR5IGVsZW1lbnQKICAg
        IEB0eXBlIERPTUVsZW1lbnQKICAqLwogIGVsZW1lbnQ6IEVtYmVyLmNvbXB1
        dGVkKGZ1bmN0aW9uKGtleSwgdmFsdWUpIHsKICAgIGlmICh2YWx1ZSAhPT0g
        dW5kZWZpbmVkKSB7CiAgICAgIHJldHVybiB0aGlzLmN1cnJlbnRTdGF0ZS5z
        ZXRFbGVtZW50KHRoaXMsIHZhbHVlKTsKICAgIH0gZWxzZSB7CiAgICAgIHJl
        dHVybiB0aGlzLmN1cnJlbnRTdGF0ZS5nZXRFbGVtZW50KHRoaXMpOwogICAg
        fQogIH0pLnByb3BlcnR5KCdfcGFyZW50VmlldycpLAoKICAvKioKICAgIFJl
        dHVybnMgYSBqUXVlcnkgb2JqZWN0IGZvciB0aGlzIHZpZXcncyBlbGVtZW50
        LiBJZiB5b3UgcGFzcyBpbiBhIHNlbGVjdG9yCiAgICBzdHJpbmcsIHRoaXMg
        bWV0aG9kIHdpbGwgcmV0dXJuIGEgalF1ZXJ5IG9iamVjdCwgdXNpbmcgdGhl
        IGN1cnJlbnQgZWxlbWVudAogICAgYXMgaXRzIGJ1ZmZlci4KCiAgICBGb3Ig
        ZXhhbXBsZSwgY2FsbGluZyBgdmlldy4kKCdsaScpYCB3aWxsIHJldHVybiBh
        IGpRdWVyeSBvYmplY3QgY29udGFpbmluZwogICAgYWxsIG9mIHRoZSBgbGlg
        IGVsZW1lbnRzIGluc2lkZSB0aGUgRE9NIGVsZW1lbnQgb2YgdGhpcyB2aWV3
        LgoKICAgIEBtZXRob2QgJAogICAgQHBhcmFtIHtTdHJpbmd9IFtzZWxlY3Rv
        cl0gYSBqUXVlcnktY29tcGF0aWJsZSBzZWxlY3RvciBzdHJpbmcKICAgIEBy
        ZXR1cm4ge2pRdWVyeX0gdGhlIGpRdWVyeSBvYmplY3QgZm9yIHRoZSBET00g
        bm9kZQogICovCiAgJDogZnVuY3Rpb24oc2VsKSB7CiAgICByZXR1cm4gdGhp
        cy5jdXJyZW50U3RhdGUuJCh0aGlzLCBzZWwpOwogIH0sCgogIG11dGF0ZUNo
        aWxkVmlld3M6IGZ1bmN0aW9uKGNhbGxiYWNrKSB7CiAgICB2YXIgY2hpbGRW
        aWV3cyA9IHRoaXMuX2NoaWxkVmlld3MsCiAgICAgICAgaWR4ID0gY2hpbGRW
        aWV3cy5sZW5ndGgsCiAgICAgICAgdmlldzsKCiAgICB3aGlsZSgtLWlkeCA+
        PSAwKSB7CiAgICAgIHZpZXcgPSBjaGlsZFZpZXdzW2lkeF07CiAgICAgIGNh
        bGxiYWNrKHRoaXMsIHZpZXcsIGlkeCk7CiAgICB9CgogICAgcmV0dXJuIHRo
        aXM7CiAgfSwKCiAgZm9yRWFjaENoaWxkVmlldzogZnVuY3Rpb24oY2FsbGJh
        Y2spIHsKICAgIHZhciBjaGlsZFZpZXdzID0gdGhpcy5fY2hpbGRWaWV3czsK
        CiAgICBpZiAoIWNoaWxkVmlld3MpIHsgcmV0dXJuIHRoaXM7IH0KCiAgICB2
        YXIgbGVuID0gY2hpbGRWaWV3cy5sZW5ndGgsCiAgICAgICAgdmlldywgaWR4
        OwoKICAgIGZvciAoaWR4ID0gMDsgaWR4IDwgbGVuOyBpZHgrKykgewogICAg
        ICB2aWV3ID0gY2hpbGRWaWV3c1tpZHhdOwogICAgICBjYWxsYmFjayh2aWV3
        KTsKICAgIH0KCiAgICByZXR1cm4gdGhpczsKICB9LAoKICAvKioKICAgIEFw
        cGVuZHMgdGhlIHZpZXcncyBlbGVtZW50IHRvIHRoZSBzcGVjaWZpZWQgcGFy
        ZW50IGVsZW1lbnQuCgogICAgSWYgdGhlIHZpZXcgZG9lcyBub3QgaGF2ZSBh
        biBIVE1MIHJlcHJlc2VudGF0aW9uIHlldCwgYGNyZWF0ZUVsZW1lbnQoKWAK
        ICAgIHdpbGwgYmUgY2FsbGVkIGF1dG9tYXRpY2FsbHkuCgogICAgTm90ZSB0
        aGF0IHRoaXMgbWV0aG9kIGp1c3Qgc2NoZWR1bGVzIHRoZSB2aWV3IHRvIGJl
        IGFwcGVuZGVkOyB0aGUgRE9NCiAgICBlbGVtZW50IHdpbGwgbm90IGJlIGFw
        cGVuZGVkIHRvIHRoZSBnaXZlbiBlbGVtZW50IHVudGlsIGFsbCBiaW5kaW5n
        cyBoYXZlCiAgICBmaW5pc2hlZCBzeW5jaHJvbml6aW5nLgoKICAgIFRoaXMg
        aXMgbm90IHR5cGljYWxseSBhIGZ1bmN0aW9uIHRoYXQgeW91IHdpbGwgbmVl
        ZCB0byBjYWxsIGRpcmVjdGx5IHdoZW4KICAgIGJ1aWxkaW5nIHlvdXIgYXBw
        bGljYXRpb24uIFlvdSBtaWdodCBjb25zaWRlciB1c2luZyBgRW1iZXIuQ29u
        dGFpbmVyVmlld2AKICAgIGluc3RlYWQuIElmIHlvdSBkbyBuZWVkIHRvIHVz
        ZSBgYXBwZW5kVG9gLCBiZSBzdXJlIHRoYXQgdGhlIHRhcmdldCBlbGVtZW50
        CiAgICB5b3UgYXJlIHByb3ZpZGluZyBpcyBhc3NvY2lhdGVkIHdpdGggYW4g
        YEVtYmVyLkFwcGxpY2F0aW9uYCBhbmQgZG9lcyBub3QKICAgIGhhdmUgYW4g
        YW5jZXN0b3IgZWxlbWVudCB0aGF0IGlzIGFzc29jaWF0ZWQgd2l0aCBhbiBF
        bWJlciB2aWV3LgoKICAgIEBtZXRob2QgYXBwZW5kVG8KICAgIEBwYXJhbSB7
        U3RyaW5nfERPTUVsZW1lbnR8alF1ZXJ5fSBBIHNlbGVjdG9yLCBlbGVtZW50
        LCBIVE1MIHN0cmluZywgb3IgalF1ZXJ5IG9iamVjdAogICAgQHJldHVybiB7
        RW1iZXIuVmlld30gcmVjZWl2ZXIKICAqLwogIGFwcGVuZFRvOiBmdW5jdGlv
        bih0YXJnZXQpIHsKICAgIC8vIFNjaGVkdWxlIHRoZSBET00gZWxlbWVudCB0
        byBiZSBjcmVhdGVkIGFuZCBhcHBlbmRlZCB0byB0aGUgZ2l2ZW4KICAgIC8v
        IGVsZW1lbnQgYWZ0ZXIgYmluZGluZ3MgaGF2ZSBzeW5jaHJvbml6ZWQuCiAg
        ICB0aGlzLl9pbnNlcnRFbGVtZW50TGF0ZXIoZnVuY3Rpb24oKSB7CiAgICAg
        IEVtYmVyLmFzc2VydCgiWW91IHRyaWVkIHRvIGFwcGVuZCB0byAoIiArIHRh
        cmdldCArICIpIGJ1dCB0aGF0IGlzbid0IGluIHRoZSBET00iLCBFbWJlci4k
        KHRhcmdldCkubGVuZ3RoID4gMCk7CiAgICAgIEVtYmVyLmFzc2VydCgiWW91
        IGNhbm5vdCBhcHBlbmQgdG8gYW4gZXhpc3RpbmcgRW1iZXIuVmlldy4gQ29u
        c2lkZXIgdXNpbmcgRW1iZXIuQ29udGFpbmVyVmlldyBpbnN0ZWFkLiIsICFF
        bWJlci4kKHRhcmdldCkuaXMoJy5lbWJlci12aWV3JykgJiYgIUVtYmVyLiQo
        dGFyZ2V0KS5wYXJlbnRzKCkuaXMoJy5lbWJlci12aWV3JykpOwogICAgICB0
        aGlzLiQoKS5hcHBlbmRUbyh0YXJnZXQpOwogICAgfSk7CgogICAgcmV0dXJu
        IHRoaXM7CiAgfSwKCiAgLyoqCiAgICBSZXBsYWNlcyB0aGUgY29udGVudCBv
        ZiB0aGUgc3BlY2lmaWVkIHBhcmVudCBlbGVtZW50IHdpdGggdGhpcyB2aWV3
        J3MKICAgIGVsZW1lbnQuIElmIHRoZSB2aWV3IGRvZXMgbm90IGhhdmUgYW4g
        SFRNTCByZXByZXNlbnRhdGlvbiB5ZXQsCiAgICBgY3JlYXRlRWxlbWVudCgp
        YCB3aWxsIGJlIGNhbGxlZCBhdXRvbWF0aWNhbGx5LgoKICAgIE5vdGUgdGhh
        dCB0aGlzIG1ldGhvZCBqdXN0IHNjaGVkdWxlcyB0aGUgdmlldyB0byBiZSBh
        cHBlbmRlZDsgdGhlIERPTQogICAgZWxlbWVudCB3aWxsIG5vdCBiZSBhcHBl
        bmRlZCB0byB0aGUgZ2l2ZW4gZWxlbWVudCB1bnRpbCBhbGwgYmluZGluZ3Mg
        aGF2ZQogICAgZmluaXNoZWQgc3luY2hyb25pemluZwoKICAgIEBtZXRob2Qg
        cmVwbGFjZUluCiAgICBAcGFyYW0ge1N0cmluZ3xET01FbGVtZW50fGpRdWVy
        eX0gdGFyZ2V0IEEgc2VsZWN0b3IsIGVsZW1lbnQsIEhUTUwgc3RyaW5nLCBv
        ciBqUXVlcnkgb2JqZWN0CiAgICBAcmV0dXJuIHtFbWJlci5WaWV3fSByZWNl
        aXZlZAogICovCiAgcmVwbGFjZUluOiBmdW5jdGlvbih0YXJnZXQpIHsKICAg
        IEVtYmVyLmFzc2VydCgiWW91IHRyaWVkIHRvIHJlcGxhY2UgaW4gKCIgKyB0
        YXJnZXQgKyAiKSBidXQgdGhhdCBpc24ndCBpbiB0aGUgRE9NIiwgRW1iZXIu
        JCh0YXJnZXQpLmxlbmd0aCA+IDApOwogICAgRW1iZXIuYXNzZXJ0KCJZb3Ug
        Y2Fubm90IHJlcGxhY2UgYW4gZXhpc3RpbmcgRW1iZXIuVmlldy4gQ29uc2lk
        ZXIgdXNpbmcgRW1iZXIuQ29udGFpbmVyVmlldyBpbnN0ZWFkLiIsICFFbWJl
        ci4kKHRhcmdldCkuaXMoJy5lbWJlci12aWV3JykgJiYgIUVtYmVyLiQodGFy
        Z2V0KS5wYXJlbnRzKCkuaXMoJy5lbWJlci12aWV3JykpOwoKICAgIHRoaXMu
        X2luc2VydEVsZW1lbnRMYXRlcihmdW5jdGlvbigpIHsKICAgICAgRW1iZXIu
        JCh0YXJnZXQpLmVtcHR5KCk7CiAgICAgIHRoaXMuJCgpLmFwcGVuZFRvKHRh
        cmdldCk7CiAgICB9KTsKCiAgICByZXR1cm4gdGhpczsKICB9LAoKICAvKioK
        ICAgIFNjaGVkdWxlcyBhIERPTSBvcGVyYXRpb24gdG8gb2NjdXIgZHVyaW5n
        IHRoZSBuZXh0IHJlbmRlciBwaGFzZS4gVGhpcwogICAgZW5zdXJlcyB0aGF0
        IGFsbCBiaW5kaW5ncyBoYXZlIGZpbmlzaGVkIHN5bmNocm9uaXppbmcgYmVm
        b3JlIHRoZSB2aWV3IGlzCiAgICByZW5kZXJlZC4KCiAgICBUbyB1c2UsIHBh
        c3MgYSBmdW5jdGlvbiB0aGF0IHBlcmZvcm1zIGEgRE9NIG9wZXJhdGlvbi4K
        CiAgICBCZWZvcmUgeW91ciBmdW5jdGlvbiBpcyBjYWxsZWQsIHRoaXMgdmll
        dyBhbmQgYWxsIGNoaWxkIHZpZXdzIHdpbGwgcmVjZWl2ZQogICAgdGhlIGB3
        aWxsSW5zZXJ0RWxlbWVudGAgZXZlbnQuIEFmdGVyIHlvdXIgZnVuY3Rpb24g
        aXMgaW52b2tlZCwgdGhpcyB2aWV3CiAgICBhbmQgYWxsIG9mIGl0cyBjaGls
        ZCB2aWV3cyB3aWxsIHJlY2VpdmUgdGhlIGBkaWRJbnNlcnRFbGVtZW50YCBl
        dmVudC4KCiAgICBgYGBqYXZhc2NyaXB0CiAgICB2aWV3Ll9pbnNlcnRFbGVt
        ZW50TGF0ZXIoZnVuY3Rpb24oKSB7CiAgICAgIHRoaXMuY3JlYXRlRWxlbWVu
        dCgpOwogICAgICB0aGlzLiQoKS5hcHBlbmRUbygnYm9keScpOwogICAgfSk7
        CiAgICBgYGAKCiAgICBAbWV0aG9kIF9pbnNlcnRFbGVtZW50TGF0ZXIKICAg
        IEBwYXJhbSB7RnVuY3Rpb259IGZuIHRoZSBmdW5jdGlvbiB0aGF0IGluc2Vy
        dHMgdGhlIGVsZW1lbnQgaW50byB0aGUgRE9NCiAgICBAcHJpdmF0ZQogICov
        CiAgX2luc2VydEVsZW1lbnRMYXRlcjogZnVuY3Rpb24oZm4pIHsKICAgIHRo
        aXMuX3NjaGVkdWxlZEluc2VydCA9IEVtYmVyLnJ1bi5zY2hlZHVsZU9uY2Uo
        J3JlbmRlcicsIHRoaXMsICdfaW5zZXJ0RWxlbWVudCcsIGZuKTsKICB9LAoK
        ICBfaW5zZXJ0RWxlbWVudDogZnVuY3Rpb24gKGZuKSB7CiAgICB0aGlzLl9z
        Y2hlZHVsZWRJbnNlcnQgPSBudWxsOwogICAgdGhpcy5jdXJyZW50U3RhdGUu
        aW5zZXJ0RWxlbWVudCh0aGlzLCBmbik7CiAgfSwKCiAgLyoqCiAgICBBcHBl
        bmRzIHRoZSB2aWV3J3MgZWxlbWVudCB0byB0aGUgZG9jdW1lbnQgYm9keS4g
        SWYgdGhlIHZpZXcgZG9lcwogICAgbm90IGhhdmUgYW4gSFRNTCByZXByZXNl
        bnRhdGlvbiB5ZXQsIGBjcmVhdGVFbGVtZW50KClgIHdpbGwgYmUgY2FsbGVk
        CiAgICBhdXRvbWF0aWNhbGx5LgoKICAgIElmIHlvdXIgYXBwbGljYXRpb24g
        dXNlcyB0aGUgYHJvb3RFbGVtZW50YCBwcm9wZXJ0eSwgeW91IG11c3QgYXBw
        ZW5kCiAgICB0aGUgdmlldyB3aXRoaW4gdGhhdCBlbGVtZW50LiBSZW5kZXJp
        bmcgdmlld3Mgb3V0c2lkZSBvZiB0aGUgYHJvb3RFbGVtZW50YAogICAgaXMg
        bm90IHN1cHBvcnRlZC4KCiAgICBOb3RlIHRoYXQgdGhpcyBtZXRob2QganVz
        dCBzY2hlZHVsZXMgdGhlIHZpZXcgdG8gYmUgYXBwZW5kZWQ7IHRoZSBET00K
        ICAgIGVsZW1lbnQgd2lsbCBub3QgYmUgYXBwZW5kZWQgdG8gdGhlIGRvY3Vt
        ZW50IGJvZHkgdW50aWwgYWxsIGJpbmRpbmdzIGhhdmUKICAgIGZpbmlzaGVk
        IHN5bmNocm9uaXppbmcuCgogICAgQG1ldGhvZCBhcHBlbmQKICAgIEByZXR1
        cm4ge0VtYmVyLlZpZXd9IHJlY2VpdmVyCiAgKi8KICBhcHBlbmQ6IGZ1bmN0
        aW9uKCkgewogICAgcmV0dXJuIHRoaXMuYXBwZW5kVG8oZG9jdW1lbnQuYm9k
        eSk7CiAgfSwKCiAgLyoqCiAgICBSZW1vdmVzIHRoZSB2aWV3J3MgZWxlbWVu
        dCBmcm9tIHRoZSBlbGVtZW50IHRvIHdoaWNoIGl0IGlzIGF0dGFjaGVkLgoK
        ICAgIEBtZXRob2QgcmVtb3ZlCiAgICBAcmV0dXJuIHtFbWJlci5WaWV3fSBy
        ZWNlaXZlcgogICovCiAgcmVtb3ZlOiBmdW5jdGlvbigpIHsKICAgIC8vIFdo
        YXQgd2Ugc2hvdWxkIHJlYWxseSBkbyBoZXJlIGlzIHdhaXQgdW50aWwgdGhl
        IGVuZCBvZiB0aGUgcnVuIGxvb3AKICAgIC8vIHRvIGRldGVybWluZSBpZiB0
        aGUgZWxlbWVudCBoYXMgYmVlbiByZS1hcHBlbmRlZCB0byBhIGRpZmZlcmVu
        dAogICAgLy8gZWxlbWVudC4KICAgIC8vIEluIHRoZSBpbnRlcmltLCB3ZSB3
        aWxsIGp1c3QgcmUtcmVuZGVyIGlmIHRoYXQgaGFwcGVucy4gSXQgaXMgbW9y
        ZQogICAgLy8gaW1wb3J0YW50IHRoYW4gZWxlbWVudHMgZ2V0IGdhcmJhZ2Ug
        Y29sbGVjdGVkLgogICAgaWYgKCF0aGlzLnJlbW92ZWRGcm9tRE9NKSB7IHRo
        aXMuZGVzdHJveUVsZW1lbnQoKTsgfQogICAgdGhpcy5pbnZva2VSZWN1cnNp
        dmVseShmdW5jdGlvbih2aWV3KSB7CiAgICAgIGlmICh2aWV3LmNsZWFyUmVu
        ZGVyZWRDaGlsZHJlbikgeyB2aWV3LmNsZWFyUmVuZGVyZWRDaGlsZHJlbigp
        OyB9CiAgICB9KTsKICB9LAoKICBlbGVtZW50SWQ6IG51bGwsCgogIC8qKgog
        ICAgQXR0ZW1wdHMgdG8gZGlzY292ZXIgdGhlIGVsZW1lbnQgaW4gdGhlIHBh
        cmVudCBlbGVtZW50LiBUaGUgZGVmYXVsdAogICAgaW1wbGVtZW50YXRpb24g
        bG9va3MgZm9yIGFuIGVsZW1lbnQgd2l0aCBhbiBJRCBvZiBgZWxlbWVudElk
        YCAob3IgdGhlCiAgICB2aWV3J3MgZ3VpZCBpZiBgZWxlbWVudElkYCBpcyBu
        dWxsKS4gWW91IGNhbiBvdmVycmlkZSB0aGlzIG1ldGhvZCB0bwogICAgcHJv
        dmlkZSB5b3VyIG93biBmb3JtIG9mIGxvb2t1cC4gRm9yIGV4YW1wbGUsIGlm
        IHlvdSB3YW50IHRvIGRpc2NvdmVyIHlvdXIKICAgIGVsZW1lbnQgdXNpbmcg
        YSBDU1MgY2xhc3MgbmFtZSBpbnN0ZWFkIG9mIGFuIElELgoKICAgIEBtZXRo
        b2QgZmluZEVsZW1lbnRJblBhcmVudEVsZW1lbnQKICAgIEBwYXJhbSB7RE9N
        RWxlbWVudH0gcGFyZW50RWxlbWVudCBUaGUgcGFyZW50J3MgRE9NIGVsZW1l
        bnQKICAgIEByZXR1cm4ge0RPTUVsZW1lbnR9IFRoZSBkaXNjb3ZlcmVkIGVs
        ZW1lbnQKICAqLwogIGZpbmRFbGVtZW50SW5QYXJlbnRFbGVtZW50OiBmdW5j
        dGlvbihwYXJlbnRFbGVtKSB7CiAgICB2YXIgaWQgPSAiIyIgKyB0aGlzLmVs
        ZW1lbnRJZDsKICAgIHJldHVybiBFbWJlci4kKGlkKVswXSB8fCBFbWJlci4k
        KGlkLCBwYXJlbnRFbGVtKVswXTsKICB9LAoKICAvKioKICAgIENyZWF0ZXMg
        YSBET00gcmVwcmVzZW50YXRpb24gb2YgdGhlIHZpZXcgYW5kIGFsbCBvZiBp
        dHMKICAgIGNoaWxkIHZpZXdzIGJ5IHJlY3Vyc2l2ZWx5IGNhbGxpbmcgdGhl
        IGByZW5kZXIoKWAgbWV0aG9kLgoKICAgIEFmdGVyIHRoZSBlbGVtZW50IGhh
        cyBiZWVuIGNyZWF0ZWQsIGBkaWRJbnNlcnRFbGVtZW50YCB3aWxsCiAgICBi
        ZSBjYWxsZWQgb24gdGhpcyB2aWV3IGFuZCBhbGwgb2YgaXRzIGNoaWxkIHZp
        ZXdzLgoKICAgIEBtZXRob2QgY3JlYXRlRWxlbWVudAogICAgQHJldHVybiB7
        RW1iZXIuVmlld30gcmVjZWl2ZXIKICAqLwogIGNyZWF0ZUVsZW1lbnQ6IGZ1
        bmN0aW9uKCkgewogICAgaWYgKGdldCh0aGlzLCAnZWxlbWVudCcpKSB7IHJl
        dHVybiB0aGlzOyB9CgogICAgdmFyIGJ1ZmZlciA9IHRoaXMucmVuZGVyVG9C
        dWZmZXIoKTsKICAgIHNldCh0aGlzLCAnZWxlbWVudCcsIGJ1ZmZlci5lbGVt
        ZW50KCkpOwoKICAgIHJldHVybiB0aGlzOwogIH0sCgogIC8qKgogICAgQ2Fs
        bGVkIHdoZW4gYSB2aWV3IGlzIGdvaW5nIHRvIGluc2VydCBhbiBlbGVtZW50
        IGludG8gdGhlIERPTS4KCiAgICBAZXZlbnQgd2lsbEluc2VydEVsZW1lbnQK
        ICAqLwogIHdpbGxJbnNlcnRFbGVtZW50OiBFbWJlci5LLAoKICAvKioKICAg
        IENhbGxlZCB3aGVuIHRoZSBlbGVtZW50IG9mIHRoZSB2aWV3IGhhcyBiZWVu
        IGluc2VydGVkIGludG8gdGhlIERPTQogICAgb3IgYWZ0ZXIgdGhlIHZpZXcg
        d2FzIHJlLXJlbmRlcmVkLiBPdmVycmlkZSB0aGlzIGZ1bmN0aW9uIHRvIGRv
        IGFueQogICAgc2V0IHVwIHRoYXQgcmVxdWlyZXMgYW4gZWxlbWVudCBpbiB0
        aGUgZG9jdW1lbnQgYm9keS4KCiAgICBAZXZlbnQgZGlkSW5zZXJ0RWxlbWVu
        dAogICovCiAgZGlkSW5zZXJ0RWxlbWVudDogRW1iZXIuSywKCiAgLyoqCiAg
        ICBDYWxsZWQgd2hlbiB0aGUgdmlldyBpcyBhYm91dCB0byByZXJlbmRlciwg
        YnV0IGJlZm9yZSBhbnl0aGluZyBoYXMKICAgIGJlZW4gdG9ybiBkb3duLiBU
        aGlzIGlzIGEgZ29vZCBvcHBvcnR1bml0eSB0byB0ZWFyIGRvd24gYW55IG1h
        bnVhbAogICAgb2JzZXJ2ZXJzIHlvdSBoYXZlIGluc3RhbGxlZCBiYXNlZCBv
        biB0aGUgRE9NIHN0YXRlCgogICAgQGV2ZW50IHdpbGxDbGVhclJlbmRlcgog
        ICovCiAgd2lsbENsZWFyUmVuZGVyOiBFbWJlci5LLAoKICAvKioKICAgIFJ1
        biB0aGlzIGNhbGxiYWNrIG9uIHRoZSBjdXJyZW50IHZpZXcgKHVubGVzcyBp
        bmNsdWRlU2VsZiBpcyBmYWxzZSkgYW5kIHJlY3Vyc2l2ZWx5IG9uIGNoaWxk
        IHZpZXdzLgoKICAgIEBtZXRob2QgaW52b2tlUmVjdXJzaXZlbHkKICAgIEBw
        YXJhbSBmbiB7RnVuY3Rpb259CiAgICBAcGFyYW0gaW5jbHVkZVNlbGYge0Jv
        b2xlYW59IEluY2x1ZGVzIGl0c2VsZiBpZiB0cnVlLgogICAgQHByaXZhdGUK
        ICAqLwogIGludm9rZVJlY3Vyc2l2ZWx5OiBmdW5jdGlvbihmbiwgaW5jbHVk
        ZVNlbGYpIHsKICAgIHZhciBjaGlsZFZpZXdzID0gKGluY2x1ZGVTZWxmID09
        PSBmYWxzZSkgPyB0aGlzLl9jaGlsZFZpZXdzIDogW3RoaXNdOwogICAgdmFy
        IGN1cnJlbnRWaWV3cywgdmlldywgY3VycmVudENoaWxkVmlld3M7CgogICAg
        d2hpbGUgKGNoaWxkVmlld3MubGVuZ3RoKSB7CiAgICAgIGN1cnJlbnRWaWV3
        cyA9IGNoaWxkVmlld3Muc2xpY2UoKTsKICAgICAgY2hpbGRWaWV3cyA9IFtd
        OwoKICAgICAgZm9yICh2YXIgaT0wLCBsPWN1cnJlbnRWaWV3cy5sZW5ndGg7
        IGk8bDsgaSsrKSB7CiAgICAgICAgdmlldyA9IGN1cnJlbnRWaWV3c1tpXTsK
        ICAgICAgICBjdXJyZW50Q2hpbGRWaWV3cyA9IHZpZXcuX2NoaWxkVmlld3Mg
        PyB2aWV3Ll9jaGlsZFZpZXdzLnNsaWNlKDApIDogbnVsbDsKICAgICAgICBm
        bih2aWV3KTsKICAgICAgICBpZiAoY3VycmVudENoaWxkVmlld3MpIHsKICAg
        ICAgICAgIGNoaWxkVmlld3MucHVzaC5hcHBseShjaGlsZFZpZXdzLCBjdXJy
        ZW50Q2hpbGRWaWV3cyk7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfSwK
        CiAgdHJpZ2dlclJlY3Vyc2l2ZWx5OiBmdW5jdGlvbihldmVudE5hbWUpIHsK
        ICAgIHZhciBjaGlsZFZpZXdzID0gW3RoaXNdLCBjdXJyZW50Vmlld3MsIHZp
        ZXcsIGN1cnJlbnRDaGlsZFZpZXdzOwoKICAgIHdoaWxlIChjaGlsZFZpZXdz
        Lmxlbmd0aCkgewogICAgICBjdXJyZW50Vmlld3MgPSBjaGlsZFZpZXdzLnNs
        aWNlKCk7CiAgICAgIGNoaWxkVmlld3MgPSBbXTsKCiAgICAgIGZvciAodmFy
        IGk9MCwgbD1jdXJyZW50Vmlld3MubGVuZ3RoOyBpPGw7IGkrKykgewogICAg
        ICAgIHZpZXcgPSBjdXJyZW50Vmlld3NbaV07CiAgICAgICAgY3VycmVudENo
        aWxkVmlld3MgPSB2aWV3Ll9jaGlsZFZpZXdzID8gdmlldy5fY2hpbGRWaWV3
        cy5zbGljZSgwKSA6IG51bGw7CiAgICAgICAgaWYgKHZpZXcudHJpZ2dlcikg
        eyB2aWV3LnRyaWdnZXIoZXZlbnROYW1lKTsgfQogICAgICAgIGlmIChjdXJy
        ZW50Q2hpbGRWaWV3cykgewogICAgICAgICAgY2hpbGRWaWV3cy5wdXNoLmFw
        cGx5KGNoaWxkVmlld3MsIGN1cnJlbnRDaGlsZFZpZXdzKTsKICAgICAgICB9
        CgogICAgICB9CiAgICB9CiAgfSwKCiAgdmlld0hpZXJhcmNoeUNvbGxlY3Rp
        b246IGZ1bmN0aW9uKCkgewogICAgdmFyIGN1cnJlbnRWaWV3LCB2aWV3Q29s
        bGVjdGlvbiA9IG5ldyBWaWV3Q29sbGVjdGlvbihbdGhpc10pOwoKICAgIGZv
        ciAodmFyIGkgPSAwOyBpIDwgdmlld0NvbGxlY3Rpb24ubGVuZ3RoOyBpKysp
        IHsKICAgICAgY3VycmVudFZpZXcgPSB2aWV3Q29sbGVjdGlvbi5vYmplY3RB
        dChpKTsKICAgICAgaWYgKGN1cnJlbnRWaWV3Ll9jaGlsZFZpZXdzKSB7CiAg
        ICAgICAgdmlld0NvbGxlY3Rpb24ucHVzaC5hcHBseSh2aWV3Q29sbGVjdGlv
        biwgY3VycmVudFZpZXcuX2NoaWxkVmlld3MpOwogICAgICB9CiAgICB9Cgog
        ICAgcmV0dXJuIHZpZXdDb2xsZWN0aW9uOwogIH0sCgogIC8qKgogICAgRGVz
        dHJveXMgYW55IGV4aXN0aW5nIGVsZW1lbnQgYWxvbmcgd2l0aCB0aGUgZWxl
        bWVudCBmb3IgYW55IGNoaWxkIHZpZXdzCiAgICBhcyB3ZWxsLiBJZiB0aGUg
        dmlldyBkb2VzIG5vdCBjdXJyZW50bHkgaGF2ZSBhIGVsZW1lbnQsIHRoZW4g
        dGhpcyBtZXRob2QKICAgIHdpbGwgZG8gbm90aGluZy4KCiAgICBJZiB5b3Ug
        aW1wbGVtZW50IGB3aWxsRGVzdHJveUVsZW1lbnQoKWAgb24geW91ciB2aWV3
        LCB0aGVuIHRoaXMgbWV0aG9kIHdpbGwKICAgIGJlIGludm9rZWQgb24geW91
        ciB2aWV3IGJlZm9yZSB5b3VyIGVsZW1lbnQgaXMgZGVzdHJveWVkIHRvIGdp
        dmUgeW91IGEKICAgIGNoYW5jZSB0byBjbGVhbiB1cCBhbnkgZXZlbnQgaGFu
        ZGxlcnMsIGV0Yy4KCiAgICBJZiB5b3Ugd3JpdGUgYSBgd2lsbERlc3Ryb3lF
        bGVtZW50KClgIGhhbmRsZXIsIHlvdSBjYW4gYXNzdW1lIHRoYXQgeW91cgog
        ICAgYGRpZEluc2VydEVsZW1lbnQoKWAgaGFuZGxlciB3YXMgY2FsbGVkIGVh
        cmxpZXIgZm9yIHRoZSBzYW1lIGVsZW1lbnQuCgogICAgWW91IHNob3VsZCBu
        b3QgY2FsbCBvciBvdmVycmlkZSB0aGlzIG1ldGhvZCB5b3Vyc2VsZiwgYnV0
        IHlvdSBtYXkKICAgIHdhbnQgdG8gaW1wbGVtZW50IHRoZSBhYm92ZSBjYWxs
        YmFja3MuCgogICAgQG1ldGhvZCBkZXN0cm95RWxlbWVudAogICAgQHJldHVy
        biB7RW1iZXIuVmlld30gcmVjZWl2ZXIKICAqLwogIGRlc3Ryb3lFbGVtZW50
        OiBmdW5jdGlvbigpIHsKICAgIHJldHVybiB0aGlzLmN1cnJlbnRTdGF0ZS5k
        ZXN0cm95RWxlbWVudCh0aGlzKTsKICB9LAoKICAvKioKICAgIENhbGxlZCB3
        aGVuIHRoZSBlbGVtZW50IG9mIHRoZSB2aWV3IGlzIGdvaW5nIHRvIGJlIGRl
        c3Ryb3llZC4gT3ZlcnJpZGUKICAgIHRoaXMgZnVuY3Rpb24gdG8gZG8gYW55
        IHRlYXJkb3duIHRoYXQgcmVxdWlyZXMgYW4gZWxlbWVudCwgbGlrZSByZW1v
        dmluZwogICAgZXZlbnQgbGlzdGVuZXJzLgoKICAgIEBldmVudCB3aWxsRGVz
        dHJveUVsZW1lbnQKICAqLwogIHdpbGxEZXN0cm95RWxlbWVudDogRW1iZXIu
        SywKCiAgLyoqCiAgICBUcmlnZ2VycyB0aGUgYHdpbGxEZXN0cm95RWxlbWVu
        dGAgZXZlbnQgKHdoaWNoIGludm9rZXMgdGhlCiAgICBgd2lsbERlc3Ryb3lF
        bGVtZW50KClgIG1ldGhvZCBpZiBpdCBleGlzdHMpIG9uIHRoaXMgdmlldyBh
        bmQgYWxsIGNoaWxkCiAgICB2aWV3cy4KCiAgICBCZWZvcmUgdHJpZ2dlcmlu
        ZyBgd2lsbERlc3Ryb3lFbGVtZW50YCwgaXQgZmlyc3QgdHJpZ2dlcnMgdGhl
        CiAgICBgd2lsbENsZWFyUmVuZGVyYCBldmVudCByZWN1cnNpdmVseS4KCiAg
        ICBAbWV0aG9kIF9ub3RpZnlXaWxsRGVzdHJveUVsZW1lbnQKICAgIEBwcml2
        YXRlCiAgKi8KICBfbm90aWZ5V2lsbERlc3Ryb3lFbGVtZW50OiBmdW5jdGlv
        bigpIHsKICAgIHZhciB2aWV3Q29sbGVjdGlvbiA9IHRoaXMudmlld0hpZXJh
        cmNoeUNvbGxlY3Rpb24oKTsKICAgIHZpZXdDb2xsZWN0aW9uLnRyaWdnZXIo
        J3dpbGxDbGVhclJlbmRlcicpOwogICAgdmlld0NvbGxlY3Rpb24udHJpZ2dl
        cignd2lsbERlc3Ryb3lFbGVtZW50Jyk7CiAgICByZXR1cm4gdmlld0NvbGxl
        Y3Rpb247CiAgfSwKCiAgLyoqCiAgICBJZiB0aGlzIHZpZXcncyBlbGVtZW50
        IGNoYW5nZXMsIHdlIG5lZWQgdG8gaW52YWxpZGF0ZSB0aGUgY2FjaGVzIG9m
        IG91cgogICAgY2hpbGQgdmlld3Mgc28gdGhhdCB3ZSBkbyBub3QgcmV0YWlu
        IHJlZmVyZW5jZXMgdG8gRE9NIGVsZW1lbnRzIHRoYXQgYXJlCiAgICBubyBs
        b25nZXIgbmVlZGVkLgoKICAgIEBtZXRob2QgX2VsZW1lbnREaWRDaGFuZ2UK
        ICAgIEBwcml2YXRlCiAgKi8KICBfZWxlbWVudERpZENoYW5nZTogRW1iZXIu
        b2JzZXJ2ZXIoJ2VsZW1lbnQnLCBmdW5jdGlvbigpIHsKICAgIHRoaXMuZm9y
        RWFjaENoaWxkVmlldyhmdW5jdGlvbih2aWV3KSB7CiAgICAgIGRlbGV0ZSBt
        ZXRhKHZpZXcpLmNhY2hlLmVsZW1lbnQ7CiAgICB9KTsKICB9KSwKCiAgLyoq
        CiAgICBDYWxsZWQgd2hlbiB0aGUgcGFyZW50VmlldyBwcm9wZXJ0eSBoYXMg
        Y2hhbmdlZC4KCiAgICBAZXZlbnQgcGFyZW50Vmlld0RpZENoYW5nZQogICov
        CiAgcGFyZW50Vmlld0RpZENoYW5nZTogRW1iZXIuSywKCiAgaW5zdHJ1bWVu
        dE5hbWU6ICd2aWV3JywKCiAgaW5zdHJ1bWVudERldGFpbHM6IGZ1bmN0aW9u
        KGhhc2gpIHsKICAgIGhhc2gudGVtcGxhdGUgPSBnZXQodGhpcywgJ3RlbXBs
        YXRlTmFtZScpOwogICAgdGhpcy5fc3VwZXIoaGFzaCk7CiAgfSwKCiAgX3Jl
        bmRlclRvQnVmZmVyOiBmdW5jdGlvbihwYXJlbnRCdWZmZXIsIGJ1ZmZlck9w
        ZXJhdGlvbikgewogICAgdGhpcy5sZW5ndGhCZWZvcmVSZW5kZXIgPSB0aGlz
        Ll9jaGlsZFZpZXdzLmxlbmd0aDsKICAgIHZhciBidWZmZXIgPSB0aGlzLl9z
        dXBlcihwYXJlbnRCdWZmZXIsIGJ1ZmZlck9wZXJhdGlvbik7CiAgICB0aGlz
        Lmxlbmd0aEFmdGVyUmVuZGVyID0gdGhpcy5fY2hpbGRWaWV3cy5sZW5ndGg7
        CgogICAgcmV0dXJuIGJ1ZmZlcjsKICB9LAoKICByZW5kZXJUb0J1ZmZlcklm
        TmVlZGVkOiBmdW5jdGlvbiAoYnVmZmVyKSB7CiAgICByZXR1cm4gdGhpcy5j
        dXJyZW50U3RhdGUucmVuZGVyVG9CdWZmZXJJZk5lZWRlZCh0aGlzLCBidWZm
        ZXIpOwogIH0sCgogIGJlZm9yZVJlbmRlcjogZnVuY3Rpb24oYnVmZmVyKSB7
        CiAgICB0aGlzLmFwcGx5QXR0cmlidXRlc1RvQnVmZmVyKGJ1ZmZlcik7CiAg
        ICBidWZmZXIucHVzaE9wZW5pbmdUYWcoKTsKICB9LAoKICBhZnRlclJlbmRl
        cjogZnVuY3Rpb24oYnVmZmVyKSB7CiAgICBidWZmZXIucHVzaENsb3NpbmdU
        YWcoKTsKICB9LAoKICBhcHBseUF0dHJpYnV0ZXNUb0J1ZmZlcjogZnVuY3Rp
        b24oYnVmZmVyKSB7CiAgICAvLyBDcmVhdGVzIG9ic2VydmVycyBmb3IgYWxs
        IHJlZ2lzdGVyZWQgY2xhc3MgbmFtZSBhbmQgYXR0cmlidXRlIGJpbmRpbmdz
        LAogICAgLy8gdGhlbiBhZGRzIHRoZW0gdG8gdGhlIGVsZW1lbnQuCiAgICB2
        YXIgY2xhc3NOYW1lQmluZGluZ3MgPSBnZXQodGhpcywgJ2NsYXNzTmFtZUJp
        bmRpbmdzJyk7CiAgICBpZiAoY2xhc3NOYW1lQmluZGluZ3MubGVuZ3RoKSB7
        CiAgICAgIHRoaXMuX2FwcGx5Q2xhc3NOYW1lQmluZGluZ3MoY2xhc3NOYW1l
        QmluZGluZ3MpOwogICAgfQoKICAgIC8vIFBhc3MgdGhlIHJlbmRlciBidWZm
        ZXIgc28gdGhlIG1ldGhvZCBjYW4gYXBwbHkgYXR0cmlidXRlcyBkaXJlY3Rs
        eS4KICAgIC8vIFRoaXMgaXNuJ3QgbmVlZGVkIGZvciBjbGFzcyBuYW1lIGJp
        bmRpbmdzIGJlY2F1c2UgdGhleSB1c2UgdGhlCiAgICAvLyBleGlzdGluZyBj
        bGFzc05hbWVzIGluZnJhc3RydWN0dXJlLgogICAgdmFyIGF0dHJpYnV0ZUJp
        bmRpbmdzID0gZ2V0KHRoaXMsICdhdHRyaWJ1dGVCaW5kaW5ncycpOwogICAg
        aWYgKGF0dHJpYnV0ZUJpbmRpbmdzLmxlbmd0aCkgewogICAgICB0aGlzLl9h
        cHBseUF0dHJpYnV0ZUJpbmRpbmdzKGJ1ZmZlciwgYXR0cmlidXRlQmluZGlu
        Z3MpOwogICAgfQoKICAgIGJ1ZmZlci5zZXRDbGFzc2VzKHRoaXMuY2xhc3NO
        YW1lcyk7CiAgICBidWZmZXIuaWQodGhpcy5lbGVtZW50SWQpOwoKICAgIHZh
        ciByb2xlID0gZ2V0KHRoaXMsICdhcmlhUm9sZScpOwogICAgaWYgKHJvbGUp
        IHsKICAgICAgYnVmZmVyLmF0dHIoJ3JvbGUnLCByb2xlKTsKICAgIH0KCiAg
        ICBpZiAoZ2V0KHRoaXMsICdpc1Zpc2libGUnKSA9PT0gZmFsc2UpIHsKICAg
        ICAgYnVmZmVyLnN0eWxlKCdkaXNwbGF5JywgJ25vbmUnKTsKICAgIH0KICB9
        LAoKICAvLyAuLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4u
        Li4uLi4uLi4uLi4uLi4uLi4uLi4uCiAgLy8gU1RBTkRBUkQgUkVOREVSIFBS
        T1BFUlRJRVMKICAvLwoKICAvKioKICAgIFRhZyBuYW1lIGZvciB0aGUgdmll
        dydzIG91dGVyIGVsZW1lbnQuIFRoZSB0YWcgbmFtZSBpcyBvbmx5IHVzZWQg
        d2hlbiBhbgogICAgZWxlbWVudCBpcyBmaXJzdCBjcmVhdGVkLiBJZiB5b3Ug
        Y2hhbmdlIHRoZSBgdGFnTmFtZWAgZm9yIGFuIGVsZW1lbnQsIHlvdQogICAg
        bXVzdCBkZXN0cm95IGFuZCByZWNyZWF0ZSB0aGUgdmlldyBlbGVtZW50LgoK
        ICAgIEJ5IGRlZmF1bHQsIHRoZSByZW5kZXIgYnVmZmVyIHdpbGwgdXNlIGEg
        YDxkaXY+YCB0YWcgZm9yIHZpZXdzLgoKICAgIEBwcm9wZXJ0eSB0YWdOYW1l
        CiAgICBAdHlwZSBTdHJpbmcKICAgIEBkZWZhdWx0IG51bGwKICAqLwoKICAv
        LyBXZSBsZWF2ZSB0aGlzIG51bGwgYnkgZGVmYXVsdCBzbyB3ZSBjYW4gdGVs
        bCB0aGUgZGlmZmVyZW5jZSBiZXR3ZWVuCiAgLy8gdGhlIGRlZmF1bHQgY2Fz
        ZSBhbmQgYSB1c2VyLXNwZWNpZmllZCB0YWcuCiAgdGFnTmFtZTogbnVsbCwK
        CiAgLyoqCiAgICBUaGUgV0FJLUFSSUEgcm9sZSBvZiB0aGUgY29udHJvbCBy
        ZXByZXNlbnRlZCBieSB0aGlzIHZpZXcuIEZvciBleGFtcGxlLCBhCiAgICBi
        dXR0b24gbWF5IGhhdmUgYSByb2xlIG9mIHR5cGUgJ2J1dHRvbicsIG9yIGEg
        cGFuZSBtYXkgaGF2ZSBhIHJvbGUgb2YKICAgIHR5cGUgJ2FsZXJ0ZGlhbG9n
        Jy4gVGhpcyBwcm9wZXJ0eSBpcyB1c2VkIGJ5IGFzc2lzdGl2ZSBzb2Z0d2Fy
        ZSB0byBoZWxwCiAgICB2aXN1YWxseSBjaGFsbGVuZ2VkIHVzZXJzIG5hdmln
        YXRlIHJpY2ggd2ViIGFwcGxpY2F0aW9ucy4KCiAgICBUaGUgZnVsbCBsaXN0
        IG9mIHZhbGlkIFdBSS1BUklBIHJvbGVzIGlzIGF2YWlsYWJsZSBhdDoKICAg
        IFtodHRwOi8vd3d3LnczLm9yZy9UUi93YWktYXJpYS9yb2xlcyNyb2xlc19j
        YXRlZ29yaXphdGlvbl0oaHR0cDovL3d3dy53My5vcmcvVFIvd2FpLWFyaWEv
        cm9sZXMjcm9sZXNfY2F0ZWdvcml6YXRpb24pCgogICAgQHByb3BlcnR5IGFy
        aWFSb2xlCiAgICBAdHlwZSBTdHJpbmcKICAgIEBkZWZhdWx0IG51bGwKICAq
        LwogIGFyaWFSb2xlOiBudWxsLAoKICAvKioKICAgIFN0YW5kYXJkIENTUyBj
        bGFzcyBuYW1lcyB0byBhcHBseSB0byB0aGUgdmlldydzIG91dGVyIGVsZW1l
        bnQuIFRoaXMKICAgIHByb3BlcnR5IGF1dG9tYXRpY2FsbHkgaW5oZXJpdHMg
        YW55IGNsYXNzIG5hbWVzIGRlZmluZWQgYnkgdGhlIHZpZXcncwogICAgc3Vw
        ZXJjbGFzc2VzIGFzIHdlbGwuCgogICAgQHByb3BlcnR5IGNsYXNzTmFtZXMK
        ICAgIEB0eXBlIEFycmF5CiAgICBAZGVmYXVsdCBbJ2VtYmVyLXZpZXcnXQog
        ICovCiAgY2xhc3NOYW1lczogWydlbWJlci12aWV3J10sCgogIC8qKgogICAg
        QSBsaXN0IG9mIHByb3BlcnRpZXMgb2YgdGhlIHZpZXcgdG8gYXBwbHkgYXMg
        Y2xhc3MgbmFtZXMuIElmIHRoZSBwcm9wZXJ0eQogICAgaXMgYSBzdHJpbmcg
        dmFsdWUsIHRoZSB2YWx1ZSBvZiB0aGF0IHN0cmluZyB3aWxsIGJlIGFwcGxp
        ZWQgYXMgYSBjbGFzcwogICAgbmFtZS4KCiAgICBgYGBqYXZhc2NyaXB0CiAg
        ICAvLyBBcHBsaWVzIHRoZSAnaGlnaCcgY2xhc3MgdG8gdGhlIHZpZXcgZWxl
        bWVudAogICAgRW1iZXIuVmlldy5leHRlbmQoewogICAgICBjbGFzc05hbWVC
        aW5kaW5nczogWydwcmlvcml0eSddCiAgICAgIHByaW9yaXR5OiAnaGlnaCcK
        ICAgIH0pOwogICAgYGBgCgogICAgSWYgdGhlIHZhbHVlIG9mIHRoZSBwcm9w
        ZXJ0eSBpcyBhIEJvb2xlYW4sIHRoZSBuYW1lIG9mIHRoYXQgcHJvcGVydHkg
        aXMKICAgIGFkZGVkIGFzIGEgZGFzaGVyaXplZCBjbGFzcyBuYW1lLgoKICAg
        IGBgYGphdmFzY3JpcHQKICAgIC8vIEFwcGxpZXMgdGhlICdpcy11cmdlbnQn
        IGNsYXNzIHRvIHRoZSB2aWV3IGVsZW1lbnQKICAgIEVtYmVyLlZpZXcuZXh0
        ZW5kKHsKICAgICAgY2xhc3NOYW1lQmluZGluZ3M6IFsnaXNVcmdlbnQnXQog
        ICAgICBpc1VyZ2VudDogdHJ1ZQogICAgfSk7CiAgICBgYGAKCiAgICBJZiB5
        b3Ugd291bGQgcHJlZmVyIHRvIHVzZSBhIGN1c3RvbSB2YWx1ZSBpbnN0ZWFk
        IG9mIHRoZSBkYXNoZXJpemVkCiAgICBwcm9wZXJ0eSBuYW1lLCB5b3UgY2Fu
        IHBhc3MgYSBiaW5kaW5nIGxpa2UgdGhpczoKCiAgICBgYGBqYXZhc2NyaXB0
        CiAgICAvLyBBcHBsaWVzIHRoZSAndXJnZW50JyBjbGFzcyB0byB0aGUgdmll
        dyBlbGVtZW50CiAgICBFbWJlci5WaWV3LmV4dGVuZCh7CiAgICAgIGNsYXNz
        TmFtZUJpbmRpbmdzOiBbJ2lzVXJnZW50OnVyZ2VudCddCiAgICAgIGlzVXJn
        ZW50OiB0cnVlCiAgICB9KTsKICAgIGBgYAoKICAgIFRoaXMgbGlzdCBvZiBw
        cm9wZXJ0aWVzIGlzIGluaGVyaXRlZCBmcm9tIHRoZSB2aWV3J3Mgc3VwZXJj
        bGFzc2VzIGFzIHdlbGwuCgogICAgQHByb3BlcnR5IGNsYXNzTmFtZUJpbmRp
        bmdzCiAgICBAdHlwZSBBcnJheQogICAgQGRlZmF1bHQgW10KICAqLwogIGNs
        YXNzTmFtZUJpbmRpbmdzOiBFTVBUWV9BUlJBWSwKCiAgLyoqCiAgICBBIGxp
        c3Qgb2YgcHJvcGVydGllcyBvZiB0aGUgdmlldyB0byBhcHBseSBhcyBhdHRy
        aWJ1dGVzLiBJZiB0aGUgcHJvcGVydHkgaXMKICAgIGEgc3RyaW5nIHZhbHVl
        LCB0aGUgdmFsdWUgb2YgdGhhdCBzdHJpbmcgd2lsbCBiZSBhcHBsaWVkIGFz
        IHRoZSBhdHRyaWJ1dGUuCgogICAgYGBgamF2YXNjcmlwdAogICAgLy8gQXBw
        bGllcyB0aGUgdHlwZSBhdHRyaWJ1dGUgdG8gdGhlIGVsZW1lbnQKICAgIC8v
        IHdpdGggdGhlIHZhbHVlICJidXR0b24iLCBsaWtlIDxkaXYgdHlwZT0iYnV0
        dG9uIj4KICAgIEVtYmVyLlZpZXcuZXh0ZW5kKHsKICAgICAgYXR0cmlidXRl
        QmluZGluZ3M6IFsndHlwZSddLAogICAgICB0eXBlOiAnYnV0dG9uJwogICAg
        fSk7CiAgICBgYGAKCiAgICBJZiB0aGUgdmFsdWUgb2YgdGhlIHByb3BlcnR5
        IGlzIGEgQm9vbGVhbiwgdGhlIG5hbWUgb2YgdGhhdCBwcm9wZXJ0eSBpcwog
        ICAgYWRkZWQgYXMgYW4gYXR0cmlidXRlLgoKICAgIGBgYGphdmFzY3JpcHQK
        ICAgIC8vIFJlbmRlcnMgc29tZXRoaW5nIGxpa2UgPGRpdiBlbmFibGVkPSJl
        bmFibGVkIj4KICAgIEVtYmVyLlZpZXcuZXh0ZW5kKHsKICAgICAgYXR0cmli
        dXRlQmluZGluZ3M6IFsnZW5hYmxlZCddLAogICAgICBlbmFibGVkOiB0cnVl
        CiAgICB9KTsKICAgIGBgYAoKICAgIEBwcm9wZXJ0eSBhdHRyaWJ1dGVCaW5k
        aW5ncwogICovCiAgYXR0cmlidXRlQmluZGluZ3M6IEVNUFRZX0FSUkFZLAoK
        ICAvLyAuLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4u
        Li4uLi4uLi4uLi4uLi4uCiAgLy8gQ09SRSBESVNQTEFZIE1FVEhPRFMKICAv
        LwoKICAvKioKICAgIFNldHVwIGEgdmlldywgYnV0IGRvIG5vdCBmaW5pc2gg
        d2FraW5nIGl0IHVwLgoKICAgICogY29uZmlndXJlIGBjaGlsZFZpZXdzYAog
        ICAgKiByZWdpc3RlciB0aGUgdmlldyB3aXRoIHRoZSBnbG9iYWwgdmlld3Mg
        aGFzaCwgd2hpY2ggaXMgdXNlZCBmb3IgZXZlbnQKICAgICAgZGlzcGF0Y2gK
        CiAgICBAbWV0aG9kIGluaXQKICAgIEBwcml2YXRlCiAgKi8KICBpbml0OiBm
        dW5jdGlvbigpIHsKICAgIHRoaXMuZWxlbWVudElkID0gdGhpcy5lbGVtZW50
        SWQgfHwgZ3VpZEZvcih0aGlzKTsKCiAgICB0aGlzLl9zdXBlcigpOwoKICAg
        IC8vIHNldHVwIGNoaWxkIHZpZXdzLiBiZSBzdXJlIHRvIGNsb25lIHRoZSBj
        aGlsZCB2aWV3cyBhcnJheSBmaXJzdAogICAgdGhpcy5fY2hpbGRWaWV3cyA9
        IHRoaXMuX2NoaWxkVmlld3Muc2xpY2UoKTsKCiAgICBFbWJlci5hc3NlcnQo
        Ik9ubHkgYXJyYXlzIGFyZSBhbGxvd2VkIGZvciAnY2xhc3NOYW1lQmluZGlu
        Z3MnIiwgRW1iZXIudHlwZU9mKHRoaXMuY2xhc3NOYW1lQmluZGluZ3MpID09
        PSAnYXJyYXknKTsKICAgIHRoaXMuY2xhc3NOYW1lQmluZGluZ3MgPSBFbWJl
        ci5BKHRoaXMuY2xhc3NOYW1lQmluZGluZ3Muc2xpY2UoKSk7CgogICAgRW1i
        ZXIuYXNzZXJ0KCJPbmx5IGFycmF5cyBhcmUgYWxsb3dlZCBmb3IgJ2NsYXNz
        TmFtZXMnIiwgRW1iZXIudHlwZU9mKHRoaXMuY2xhc3NOYW1lcykgPT09ICdh
        cnJheScpOwogICAgdGhpcy5jbGFzc05hbWVzID0gRW1iZXIuQSh0aGlzLmNs
        YXNzTmFtZXMuc2xpY2UoKSk7CiAgfSwKCiAgYXBwZW5kQ2hpbGQ6IGZ1bmN0
        aW9uKHZpZXcsIG9wdGlvbnMpIHsKICAgIHJldHVybiB0aGlzLmN1cnJlbnRT
        dGF0ZS5hcHBlbmRDaGlsZCh0aGlzLCB2aWV3LCBvcHRpb25zKTsKICB9LAoK
        ICAvKioKICAgIFJlbW92ZXMgdGhlIGNoaWxkIHZpZXcgZnJvbSB0aGUgcGFy
        ZW50IHZpZXcuCgogICAgQG1ldGhvZCByZW1vdmVDaGlsZAogICAgQHBhcmFt
        IHtFbWJlci5WaWV3fSB2aWV3CiAgICBAcmV0dXJuIHtFbWJlci5WaWV3fSBy
        ZWNlaXZlcgogICovCiAgcmVtb3ZlQ2hpbGQ6IGZ1bmN0aW9uKHZpZXcpIHsK
        ICAgIC8vIElmIHdlJ3JlIGRlc3Ryb3lpbmcsIHRoZSBlbnRpcmUgc3VidHJl
        ZSB3aWxsIGJlCiAgICAvLyBmcmVlZCwgYW5kIHRoZSBET00gd2lsbCBiZSBo
        YW5kbGVkIHNlcGFyYXRlbHksCiAgICAvLyBzbyBubyBuZWVkIHRvIG1lc3Mg
        d2l0aCBjaGlsZFZpZXdzLgogICAgaWYgKHRoaXMuaXNEZXN0cm95aW5nKSB7
        IHJldHVybjsgfQoKICAgIC8vIHVwZGF0ZSBwYXJlbnQgbm9kZQogICAgc2V0
        KHZpZXcsICdfcGFyZW50VmlldycsIG51bGwpOwoKICAgIC8vIHJlbW92ZSB2
        aWV3IGZyb20gY2hpbGRWaWV3cyBhcnJheS4KICAgIHZhciBjaGlsZFZpZXdz
        ID0gdGhpcy5fY2hpbGRWaWV3czsKCiAgICBFbWJlci5FbnVtZXJhYmxlVXRp
        bHMucmVtb3ZlT2JqZWN0KGNoaWxkVmlld3MsIHZpZXcpOwoKICAgIHRoaXMu
        cHJvcGVydHlEaWRDaGFuZ2UoJ2NoaWxkVmlld3MnKTsgLy8gSFVIPyEgd2hh
        dCBoYXBwZW5lZCB0byB3aWxsIGNoYW5nZT8KCiAgICByZXR1cm4gdGhpczsK
        ICB9LAoKICAvKioKICAgIFJlbW92ZXMgYWxsIGNoaWxkcmVuIGZyb20gdGhl
        IGBwYXJlbnRWaWV3YC4KCiAgICBAbWV0aG9kIHJlbW92ZUFsbENoaWxkcmVu
        CiAgICBAcmV0dXJuIHtFbWJlci5WaWV3fSByZWNlaXZlcgogICovCiAgcmVt
        b3ZlQWxsQ2hpbGRyZW46IGZ1bmN0aW9uKCkgewogICAgcmV0dXJuIHRoaXMu
        bXV0YXRlQ2hpbGRWaWV3cyhmdW5jdGlvbihwYXJlbnRWaWV3LCB2aWV3KSB7
        CiAgICAgIHBhcmVudFZpZXcucmVtb3ZlQ2hpbGQodmlldyk7CiAgICB9KTsK
        ICB9LAoKICBkZXN0cm95QWxsQ2hpbGRyZW46IGZ1bmN0aW9uKCkgewogICAg
        cmV0dXJuIHRoaXMubXV0YXRlQ2hpbGRWaWV3cyhmdW5jdGlvbihwYXJlbnRW
        aWV3LCB2aWV3KSB7CiAgICAgIHZpZXcuZGVzdHJveSgpOwogICAgfSk7CiAg
        fSwKCiAgLyoqCiAgICBSZW1vdmVzIHRoZSB2aWV3IGZyb20gaXRzIGBwYXJl
        bnRWaWV3YCwgaWYgb25lIGlzIGZvdW5kLiBPdGhlcndpc2UKICAgIGRvZXMg
        bm90aGluZy4KCiAgICBAbWV0aG9kIHJlbW92ZUZyb21QYXJlbnQKICAgIEBy
        ZXR1cm4ge0VtYmVyLlZpZXd9IHJlY2VpdmVyCiAgKi8KICByZW1vdmVGcm9t
        UGFyZW50OiBmdW5jdGlvbigpIHsKICAgIHZhciBwYXJlbnQgPSB0aGlzLl9w
        YXJlbnRWaWV3OwoKICAgIC8vIFJlbW92ZSBET00gZWxlbWVudCBmcm9tIHBh
        cmVudAogICAgdGhpcy5yZW1vdmUoKTsKCiAgICBpZiAocGFyZW50KSB7IHBh
        cmVudC5yZW1vdmVDaGlsZCh0aGlzKTsgfQogICAgcmV0dXJuIHRoaXM7CiAg
        fSwKCiAgLyoqCiAgICBZb3UgbXVzdCBjYWxsIGBkZXN0cm95YCBvbiBhIHZp
        ZXcgdG8gZGVzdHJveSB0aGUgdmlldyAoYW5kIGFsbCBvZiBpdHMKICAgIGNo
        aWxkIHZpZXdzKS4gVGhpcyB3aWxsIHJlbW92ZSB0aGUgdmlldyBmcm9tIGFu
        eSBwYXJlbnQgbm9kZSwgdGhlbiBtYWtlCiAgICBzdXJlIHRoYXQgdGhlIERP
        TSBlbGVtZW50IG1hbmFnZWQgYnkgdGhlIHZpZXcgY2FuIGJlIHJlbGVhc2Vk
        IGJ5IHRoZQogICAgbWVtb3J5IG1hbmFnZXIuCgogICAgQG1ldGhvZCBkZXN0
        cm95CiAgKi8KICBkZXN0cm95OiBmdW5jdGlvbigpIHsKICAgIHZhciBjaGls
        ZFZpZXdzID0gdGhpcy5fY2hpbGRWaWV3cywKICAgICAgICAvLyBnZXQgcGFy
        ZW50VmlldyBiZWZvcmUgY2FsbGluZyBzdXBlciBiZWNhdXNlIGl0J2xsIGJl
        IGRlc3Ryb3llZAogICAgICAgIG5vblZpcnR1YWxQYXJlbnRWaWV3ID0gZ2V0
        KHRoaXMsICdwYXJlbnRWaWV3JyksCiAgICAgICAgdmlld05hbWUgPSB0aGlz
        LnZpZXdOYW1lLAogICAgICAgIGNoaWxkTGVuLCBpOwoKICAgIGlmICghdGhp
        cy5fc3VwZXIoKSkgeyByZXR1cm47IH0KCiAgICBjaGlsZExlbiA9IGNoaWxk
        Vmlld3MubGVuZ3RoOwogICAgZm9yIChpPWNoaWxkTGVuLTE7IGk+PTA7IGkt
        LSkgewogICAgICBjaGlsZFZpZXdzW2ldLnJlbW92ZWRGcm9tRE9NID0gdHJ1
        ZTsKICAgIH0KCiAgICAvLyByZW1vdmUgZnJvbSBub24tdmlydHVhbCBwYXJl
        bnQgdmlldyBpZiB2aWV3TmFtZSB3YXMgc3BlY2lmaWVkCiAgICBpZiAodmll
        d05hbWUgJiYgbm9uVmlydHVhbFBhcmVudFZpZXcpIHsKICAgICAgbm9uVmly
        dHVhbFBhcmVudFZpZXcuc2V0KHZpZXdOYW1lLCBudWxsKTsKICAgIH0KCiAg
        ICBjaGlsZExlbiA9IGNoaWxkVmlld3MubGVuZ3RoOwogICAgZm9yIChpPWNo
        aWxkTGVuLTE7IGk+PTA7IGktLSkgewogICAgICBjaGlsZFZpZXdzW2ldLmRl
        c3Ryb3koKTsKICAgIH0KCiAgICByZXR1cm4gdGhpczsKICB9LAoKICAvKioK
        ICAgIEluc3RhbnRpYXRlcyBhIHZpZXcgdG8gYmUgYWRkZWQgdG8gdGhlIGNo
        aWxkVmlld3MgYXJyYXkgZHVyaW5nIHZpZXcKICAgIGluaXRpYWxpemF0aW9u
        LiBZb3UgZ2VuZXJhbGx5IHdpbGwgbm90IGNhbGwgdGhpcyBtZXRob2QgZGly
        ZWN0bHkgdW5sZXNzCiAgICB5b3UgYXJlIG92ZXJyaWRpbmcgYGNyZWF0ZUNo
        aWxkVmlld3MoKWAuIE5vdGUgdGhhdCB0aGlzIG1ldGhvZCB3aWxsCiAgICBh
        dXRvbWF0aWNhbGx5IGNvbmZpZ3VyZSB0aGUgY29ycmVjdCBzZXR0aW5ncyBv
        biB0aGUgbmV3IHZpZXcgaW5zdGFuY2UgdG8KICAgIGFjdCBhcyBhIGNoaWxk
        IG9mIHRoZSBwYXJlbnQuCgogICAgQG1ldGhvZCBjcmVhdGVDaGlsZFZpZXcK
        ICAgIEBwYXJhbSB7Q2xhc3N8U3RyaW5nfSB2aWV3Q2xhc3MKICAgIEBwYXJh
        bSB7SGFzaH0gW2F0dHJzXSBBdHRyaWJ1dGVzIHRvIGFkZAogICAgQHJldHVy
        biB7RW1iZXIuVmlld30gbmV3IGluc3RhbmNlCiAgKi8KICBjcmVhdGVDaGls
        ZFZpZXc6IGZ1bmN0aW9uKHZpZXcsIGF0dHJzKSB7CiAgICBpZiAoIXZpZXcp
        IHsKICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigiY3JlYXRlQ2hpbGRWaWV3
        cyBmaXJzdCBhcmd1bWVudCBtdXN0IGV4aXN0Iik7CiAgICB9CgogICAgaWYg
        KHZpZXcuaXNWaWV3ICYmIHZpZXcuX3BhcmVudFZpZXcgPT09IHRoaXMgJiYg
        dmlldy5jb250YWluZXIgPT09IHRoaXMuY29udGFpbmVyKSB7CiAgICAgIHJl
        dHVybiB2aWV3OwogICAgfQoKICAgIGF0dHJzID0gYXR0cnMgfHwge307CiAg
        ICBhdHRycy5fcGFyZW50VmlldyA9IHRoaXM7CgogICAgaWYgKEVtYmVyLkNv
        cmVWaWV3LmRldGVjdCh2aWV3KSkgewogICAgICBhdHRycy50ZW1wbGF0ZURh
        dGEgPSBhdHRycy50ZW1wbGF0ZURhdGEgfHwgZ2V0KHRoaXMsICd0ZW1wbGF0
        ZURhdGEnKTsKCiAgICAgIGF0dHJzLmNvbnRhaW5lciA9IHRoaXMuY29udGFp
        bmVyOwogICAgICB2aWV3ID0gdmlldy5jcmVhdGUoYXR0cnMpOwoKICAgICAg
        Ly8gZG9uJ3Qgc2V0IHRoZSBwcm9wZXJ0eSBvbiBhIHZpcnR1YWwgdmlldywg
        YXMgdGhleSBhcmUgaW52aXNpYmxlIHRvCiAgICAgIC8vIGNvbnN1bWVycyBv
        ZiB0aGUgdmlldyBBUEkKICAgICAgaWYgKHZpZXcudmlld05hbWUpIHsKICAg
        ICAgICBzZXQoZ2V0KHRoaXMsICdjb25jcmV0ZVZpZXcnKSwgdmlldy52aWV3
        TmFtZSwgdmlldyk7CiAgICAgIH0KICAgIH0gZWxzZSBpZiAoJ3N0cmluZycg
        PT09IHR5cGVvZiB2aWV3KSB7CiAgICAgIHZhciBmdWxsTmFtZSA9ICd2aWV3
        OicgKyB2aWV3OwogICAgICB2YXIgVmlldyA9IHRoaXMuY29udGFpbmVyLmxv
        b2t1cEZhY3RvcnkoZnVsbE5hbWUpOwoKICAgICAgRW1iZXIuYXNzZXJ0KCJD
        b3VsZCBub3QgZmluZCB2aWV3OiAnIiArIGZ1bGxOYW1lICsgIiciLCAhIVZp
        ZXcpOwoKICAgICAgYXR0cnMudGVtcGxhdGVEYXRhID0gZ2V0KHRoaXMsICd0
        ZW1wbGF0ZURhdGEnKTsKICAgICAgdmlldyA9IFZpZXcuY3JlYXRlKGF0dHJz
        KTsKICAgIH0gZWxzZSB7CiAgICAgIEVtYmVyLmFzc2VydCgnWW91IG11c3Qg
        cGFzcyBpbnN0YW5jZSBvciBzdWJjbGFzcyBvZiBWaWV3Jywgdmlldy5pc1Zp
        ZXcpOwogICAgICBhdHRycy5jb250YWluZXIgPSB0aGlzLmNvbnRhaW5lcjsK
        CiAgICAgIGlmICghZ2V0KHZpZXcsICd0ZW1wbGF0ZURhdGEnKSkgewogICAg
        ICAgIGF0dHJzLnRlbXBsYXRlRGF0YSA9IGdldCh0aGlzLCAndGVtcGxhdGVE
        YXRhJyk7CiAgICAgIH0KCiAgICAgIEVtYmVyLnNldFByb3BlcnRpZXModmll
        dywgYXR0cnMpOwoKICAgIH0KCiAgICByZXR1cm4gdmlldzsKICB9LAoKICBi
        ZWNhbWVWaXNpYmxlOiBFbWJlci5LLAogIGJlY2FtZUhpZGRlbjogRW1iZXIu
        SywKCiAgLyoqCiAgICBXaGVuIHRoZSB2aWV3J3MgYGlzVmlzaWJsZWAgcHJv
        cGVydHkgY2hhbmdlcywgdG9nZ2xlIHRoZSB2aXNpYmlsaXR5CiAgICBlbGVt
        ZW50IG9mIHRoZSBhY3R1YWwgRE9NIGVsZW1lbnQuCgogICAgQG1ldGhvZCBf
        aXNWaXNpYmxlRGlkQ2hhbmdlCiAgICBAcHJpdmF0ZQogICovCiAgX2lzVmlz
        aWJsZURpZENoYW5nZTogRW1iZXIub2JzZXJ2ZXIoJ2lzVmlzaWJsZScsIGZ1
        bmN0aW9uKCkgewogICAgdmFyICRlbCA9IHRoaXMuJCgpOwogICAgaWYgKCEk
        ZWwpIHsgcmV0dXJuOyB9CgogICAgdmFyIGlzVmlzaWJsZSA9IGdldCh0aGlz
        LCAnaXNWaXNpYmxlJyk7CgogICAgJGVsLnRvZ2dsZShpc1Zpc2libGUpOwoK
        ICAgIGlmICh0aGlzLl9pc0FuY2VzdG9ySGlkZGVuKCkpIHsgcmV0dXJuOyB9
        CgogICAgaWYgKGlzVmlzaWJsZSkgewogICAgICB0aGlzLl9ub3RpZnlCZWNh
        bWVWaXNpYmxlKCk7CiAgICB9IGVsc2UgewogICAgICB0aGlzLl9ub3RpZnlC
        ZWNhbWVIaWRkZW4oKTsKICAgIH0KICB9KSwKCiAgX25vdGlmeUJlY2FtZVZp
        c2libGU6IGZ1bmN0aW9uKCkgewogICAgdGhpcy50cmlnZ2VyKCdiZWNhbWVW
        aXNpYmxlJyk7CgogICAgdGhpcy5mb3JFYWNoQ2hpbGRWaWV3KGZ1bmN0aW9u
        KHZpZXcpIHsKICAgICAgdmFyIGlzVmlzaWJsZSA9IGdldCh2aWV3LCAnaXNW
        aXNpYmxlJyk7CgogICAgICBpZiAoaXNWaXNpYmxlIHx8IGlzVmlzaWJsZSA9
        PT0gbnVsbCkgewogICAgICAgIHZpZXcuX25vdGlmeUJlY2FtZVZpc2libGUo
        KTsKICAgICAgfQogICAgfSk7CiAgfSwKCiAgX25vdGlmeUJlY2FtZUhpZGRl
        bjogZnVuY3Rpb24oKSB7CiAgICB0aGlzLnRyaWdnZXIoJ2JlY2FtZUhpZGRl
        bicpOwogICAgdGhpcy5mb3JFYWNoQ2hpbGRWaWV3KGZ1bmN0aW9uKHZpZXcp
        IHsKICAgICAgdmFyIGlzVmlzaWJsZSA9IGdldCh2aWV3LCAnaXNWaXNpYmxl
        Jyk7CgogICAgICBpZiAoaXNWaXNpYmxlIHx8IGlzVmlzaWJsZSA9PT0gbnVs
        bCkgewogICAgICAgIHZpZXcuX25vdGlmeUJlY2FtZUhpZGRlbigpOwogICAg
        ICB9CiAgICB9KTsKICB9LAoKICBfaXNBbmNlc3RvckhpZGRlbjogZnVuY3Rp
        b24oKSB7CiAgICB2YXIgcGFyZW50ID0gZ2V0KHRoaXMsICdwYXJlbnRWaWV3
        Jyk7CgogICAgd2hpbGUgKHBhcmVudCkgewogICAgICBpZiAoZ2V0KHBhcmVu
        dCwgJ2lzVmlzaWJsZScpID09PSBmYWxzZSkgeyByZXR1cm4gdHJ1ZTsgfQoK
        ICAgICAgcGFyZW50ID0gZ2V0KHBhcmVudCwgJ3BhcmVudFZpZXcnKTsKICAg
        IH0KCiAgICByZXR1cm4gZmFsc2U7CiAgfSwKCiAgY2xlYXJCdWZmZXI6IGZ1
        bmN0aW9uKCkgewogICAgdGhpcy5pbnZva2VSZWN1cnNpdmVseShmdW5jdGlv
        bih2aWV3KSB7CiAgICAgIHZpZXcuYnVmZmVyID0gbnVsbDsKICAgIH0pOwog
        IH0sCgogIHRyYW5zaXRpb25UbzogZnVuY3Rpb24oc3RhdGUsIGNoaWxkcmVu
        KSB7CiAgICB2YXIgcHJpb3JTdGF0ZSA9IHRoaXMuY3VycmVudFN0YXRlLAog
        ICAgICAgIGN1cnJlbnRTdGF0ZSA9IHRoaXMuY3VycmVudFN0YXRlID0gdGhp
        cy5zdGF0ZXNbc3RhdGVdOwogICAgdGhpcy5zdGF0ZSA9IHN0YXRlOwoKICAg
        IGlmIChwcmlvclN0YXRlICYmIHByaW9yU3RhdGUuZXhpdCkgeyBwcmlvclN0
        YXRlLmV4aXQodGhpcyk7IH0KICAgIGlmIChjdXJyZW50U3RhdGUuZW50ZXIp
        IHsgY3VycmVudFN0YXRlLmVudGVyKHRoaXMpOyB9CiAgICBpZiAoc3RhdGUg
        PT09ICdpbkRPTScpIHsgZGVsZXRlIEVtYmVyLm1ldGEodGhpcykuY2FjaGUu
        ZWxlbWVudDsgfQoKICAgIGlmIChjaGlsZHJlbiAhPT0gZmFsc2UpIHsKICAg
        ICAgdGhpcy5mb3JFYWNoQ2hpbGRWaWV3KGZ1bmN0aW9uKHZpZXcpIHsKICAg
        ICAgICB2aWV3LnRyYW5zaXRpb25UbyhzdGF0ZSk7CiAgICAgIH0pOwogICAg
        fQogIH0sCgogIC8vIC4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4u
        Li4uLi4uLi4uLi4uLi4uLi4uLi4uLi4KICAvLyBFVkVOVCBIQU5ETElORwog
        IC8vCgogIC8qKgogICAgSGFuZGxlIGV2ZW50cyBmcm9tIGBFbWJlci5FdmVu
        dERpc3BhdGNoZXJgCgogICAgQG1ldGhvZCBoYW5kbGVFdmVudAogICAgQHBh
        cmFtIGV2ZW50TmFtZSB7U3RyaW5nfQogICAgQHBhcmFtIGV2dCB7RXZlbnR9
        CiAgICBAcHJpdmF0ZQogICovCiAgaGFuZGxlRXZlbnQ6IGZ1bmN0aW9uKGV2
        ZW50TmFtZSwgZXZ0KSB7CiAgICByZXR1cm4gdGhpcy5jdXJyZW50U3RhdGUu
        aGFuZGxlRXZlbnQodGhpcywgZXZlbnROYW1lLCBldnQpOwogIH0sCgogIHJl
        Z2lzdGVyT2JzZXJ2ZXI6IGZ1bmN0aW9uKHJvb3QsIHBhdGgsIHRhcmdldCwg
        b2JzZXJ2ZXIpIHsKICAgIGlmICghb2JzZXJ2ZXIgJiYgJ2Z1bmN0aW9uJyA9
        PT0gdHlwZW9mIHRhcmdldCkgewogICAgICBvYnNlcnZlciA9IHRhcmdldDsK
        ICAgICAgdGFyZ2V0ID0gbnVsbDsKICAgIH0KCiAgICBpZiAoIXJvb3QgfHwg
        dHlwZW9mIHJvb3QgIT09ICdvYmplY3QnKSB7CiAgICAgIHJldHVybjsKICAg
        IH0KCiAgICB2YXIgdmlldyA9IHRoaXMsCiAgICAgICAgc3RhdGVDaGVja2Vk
        T2JzZXJ2ZXIgPSBmdW5jdGlvbigpIHsKICAgICAgICAgIHZpZXcuY3VycmVu
        dFN0YXRlLmludm9rZU9ic2VydmVyKHRoaXMsIG9ic2VydmVyKTsKICAgICAg
        ICB9LAogICAgICAgIHNjaGVkdWxlZE9ic2VydmVyID0gZnVuY3Rpb24oKSB7
        CiAgICAgICAgICBFbWJlci5ydW4uc2NoZWR1bGVPbmNlKCdyZW5kZXInLCB0
        aGlzLCBzdGF0ZUNoZWNrZWRPYnNlcnZlcik7CiAgICAgICAgfTsKCiAgICBF
        bWJlci5hZGRPYnNlcnZlcihyb290LCBwYXRoLCB0YXJnZXQsIHNjaGVkdWxl
        ZE9ic2VydmVyKTsKCiAgICB0aGlzLm9uZSgnd2lsbENsZWFyUmVuZGVyJywg
        ZnVuY3Rpb24oKSB7CiAgICAgIEVtYmVyLnJlbW92ZU9ic2VydmVyKHJvb3Qs
        IHBhdGgsIHRhcmdldCwgc2NoZWR1bGVkT2JzZXJ2ZXIpOwogICAgfSk7CiAg
        fQoKfSk7CgovKgogIERlc2NyaWJlIGhvdyB0aGUgc3BlY2lmaWVkIGFjdGlv
        bnMgc2hvdWxkIGJlaGF2ZSBpbiB0aGUgdmFyaW91cwogIHN0YXRlcyB0aGF0
        IGEgdmlldyBjYW4gZXhpc3QgaW4uIFBvc3NpYmxlIHN0YXRlczoKCiAgKiBw
        cmVSZW5kZXI6IHdoZW4gYSB2aWV3IGlzIGZpcnN0IGluc3RhbnRpYXRlZCwg
        YW5kIGFmdGVyIGl0cwogICAgZWxlbWVudCB3YXMgZGVzdHJveWVkLCBpdCBp
        cyBpbiB0aGUgcHJlUmVuZGVyIHN0YXRlCiAgKiBpbkJ1ZmZlcjogb25jZSBh
        IHZpZXcgaGFzIGJlZW4gcmVuZGVyZWQsIGJ1dCBiZWZvcmUgaXQgaGFzCiAg
        ICBiZWVuIGluc2VydGVkIGludG8gdGhlIERPTSwgaXQgaXMgaW4gdGhlIGlu
        QnVmZmVyIHN0YXRlCiAgKiBoYXNFbGVtZW50OiB0aGUgRE9NIHJlcHJlc2Vu
        dGF0aW9uIG9mIHRoZSB2aWV3IGlzIGNyZWF0ZWQsCiAgICBhbmQgaXMgcmVh
        ZHkgdG8gYmUgaW5zZXJ0ZWQKICAqIGluRE9NOiBvbmNlIGEgdmlldyBoYXMg
        YmVlbiBpbnNlcnRlZCBpbnRvIHRoZSBET00gaXQgaXMgaW4KICAgIHRoZSBp
        bkRPTSBzdGF0ZS4gQSB2aWV3IHNwZW5kcyB0aGUgdmFzdCBtYWpvcml0eSBv
        ZiBpdHMKICAgIGV4aXN0ZW5jZSBpbiB0aGlzIHN0YXRlLgogICogZGVzdHJv
        eWVkOiBvbmNlIGEgdmlldyBoYXMgYmVlbiBkZXN0cm95ZWQgKHVzaW5nIHRo
        ZSBkZXN0cm95CiAgICBtZXRob2QpLCBpdCBpcyBpbiB0aGlzIHN0YXRlLiBO
        byBmdXJ0aGVyIGFjdGlvbnMgY2FuIGJlIGludm9rZWQKICAgIG9uIGEgZGVz
        dHJveWVkIHZpZXcuCiovCgogIC8vIGluIHRoZSBkZXN0cm95ZWQgc3RhdGUs
        IGV2ZXJ5dGhpbmcgaXMgaWxsZWdhbAoKICAvLyBiZWZvcmUgcmVuZGVyaW5n
        IGhhcyBiZWd1biwgYWxsIGxlZ2FsIG1hbmlwdWxhdGlvbnMgYXJlIG5vb3Bz
        LgoKICAvLyBpbnNpZGUgdGhlIGJ1ZmZlciwgbGVnYWwgbWFuaXB1bGF0aW9u
        cyBhcmUgZG9uZSBvbiB0aGUgYnVmZmVyCgogIC8vIG9uY2UgdGhlIHZpZXcg
        aGFzIGJlZW4gaW5zZXJ0ZWQgaW50byB0aGUgRE9NLCBsZWdhbCBtYW5pcHVs
        YXRpb25zCiAgLy8gYXJlIGRvbmUgb24gdGhlIERPTSBlbGVtZW50LgoKZnVu
        Y3Rpb24gbm90aWZ5TXV0YXRpb25MaXN0ZW5lcnMoKSB7CiAgRW1iZXIucnVu
        Lm9uY2UoRW1iZXIuVmlldywgJ25vdGlmeU11dGF0aW9uTGlzdGVuZXJzJyk7
        Cn0KCnZhciBET01NYW5hZ2VyID0gewogIHByZXBlbmQ6IGZ1bmN0aW9uKHZp
        ZXcsIGh0bWwpIHsKICAgIHZpZXcuJCgpLnByZXBlbmQoaHRtbCk7CiAgICBu
        b3RpZnlNdXRhdGlvbkxpc3RlbmVycygpOwogIH0sCgogIGFmdGVyOiBmdW5j
        dGlvbih2aWV3LCBodG1sKSB7CiAgICB2aWV3LiQoKS5hZnRlcihodG1sKTsK
        ICAgIG5vdGlmeU11dGF0aW9uTGlzdGVuZXJzKCk7CiAgfSwKCiAgaHRtbDog
        ZnVuY3Rpb24odmlldywgaHRtbCkgewogICAgdmlldy4kKCkuaHRtbChodG1s
        KTsKICAgIG5vdGlmeU11dGF0aW9uTGlzdGVuZXJzKCk7CiAgfSwKCiAgcmVw
        bGFjZTogZnVuY3Rpb24odmlldykgewogICAgdmFyIGVsZW1lbnQgPSBnZXQo
        dmlldywgJ2VsZW1lbnQnKTsKCiAgICBzZXQodmlldywgJ2VsZW1lbnQnLCBu
        dWxsKTsKCiAgICB2aWV3Ll9pbnNlcnRFbGVtZW50TGF0ZXIoZnVuY3Rpb24o
        KSB7CiAgICAgIEVtYmVyLiQoZWxlbWVudCkucmVwbGFjZVdpdGgoZ2V0KHZp
        ZXcsICdlbGVtZW50JykpOwogICAgICBub3RpZnlNdXRhdGlvbkxpc3RlbmVy
        cygpOwogICAgfSk7CiAgfSwKCiAgcmVtb3ZlOiBmdW5jdGlvbih2aWV3KSB7
        CiAgICB2aWV3LiQoKS5yZW1vdmUoKTsKICAgIG5vdGlmeU11dGF0aW9uTGlz
        dGVuZXJzKCk7CiAgfSwKCiAgZW1wdHk6IGZ1bmN0aW9uKHZpZXcpIHsKICAg
        IHZpZXcuJCgpLmVtcHR5KCk7CiAgICBub3RpZnlNdXRhdGlvbkxpc3RlbmVy
        cygpOwogIH0KfTsKCkVtYmVyLlZpZXcucmVvcGVuKHsKICBkb21NYW5hZ2Vy
        OiBET01NYW5hZ2VyCn0pOwoKRW1iZXIuVmlldy5yZW9wZW5DbGFzcyh7Cgog
        IC8qKgogICAgUGFyc2UgYSBwYXRoIGFuZCByZXR1cm4gYW4gb2JqZWN0IHdo
        aWNoIGhvbGRzIHRoZSBwYXJzZWQgcHJvcGVydGllcy4KCiAgICBGb3IgZXhh
        bXBsZSBhIHBhdGggbGlrZSAiY29udGVudC5pc0VuYWJsZWQ6ZW5hYmxlZDpk
        aXNhYmxlZCIgd2lsbCByZXR1cm4gdGhlCiAgICBmb2xsb3dpbmcgb2JqZWN0
        OgoKICAgIGBgYGphdmFzY3JpcHQKICAgIHsKICAgICAgcGF0aDogImNvbnRl
        bnQuaXNFbmFibGVkIiwKICAgICAgY2xhc3NOYW1lOiAiZW5hYmxlZCIsCiAg
        ICAgIGZhbHN5Q2xhc3NOYW1lOiAiZGlzYWJsZWQiLAogICAgICBjbGFzc05h
        bWVzOiAiOmVuYWJsZWQ6ZGlzYWJsZWQiCiAgICB9CiAgICBgYGAKCiAgICBA
        bWV0aG9kIF9wYXJzZVByb3BlcnR5UGF0aAogICAgQHN0YXRpYwogICAgQHBy
        aXZhdGUKICAqLwogIF9wYXJzZVByb3BlcnR5UGF0aDogZnVuY3Rpb24ocGF0
        aCkgewogICAgdmFyIHNwbGl0ID0gcGF0aC5zcGxpdCgnOicpLAogICAgICAg
        IHByb3BlcnR5UGF0aCA9IHNwbGl0WzBdLAogICAgICAgIGNsYXNzTmFtZXMg
        PSAiIiwKICAgICAgICBjbGFzc05hbWUsCiAgICAgICAgZmFsc3lDbGFzc05h
        bWU7CgogICAgLy8gY2hlY2sgaWYgdGhlIHByb3BlcnR5IGlzIGRlZmluZWQg
        YXMgcHJvcDpjbGFzcyBvciBwcm9wOnRydWVDbGFzczpmYWxzZUNsYXNzCiAg
        ICBpZiAoc3BsaXQubGVuZ3RoID4gMSkgewogICAgICBjbGFzc05hbWUgPSBz
        cGxpdFsxXTsKICAgICAgaWYgKHNwbGl0Lmxlbmd0aCA9PT0gMykgeyBmYWxz
        eUNsYXNzTmFtZSA9IHNwbGl0WzJdOyB9CgogICAgICBjbGFzc05hbWVzID0g
        JzonICsgY2xhc3NOYW1lOwogICAgICBpZiAoZmFsc3lDbGFzc05hbWUpIHsg
        Y2xhc3NOYW1lcyArPSAiOiIgKyBmYWxzeUNsYXNzTmFtZTsgfQogICAgfQoK
        ICAgIHJldHVybiB7CiAgICAgIHBhdGg6IHByb3BlcnR5UGF0aCwKICAgICAg
        Y2xhc3NOYW1lczogY2xhc3NOYW1lcywKICAgICAgY2xhc3NOYW1lOiAoY2xh
        c3NOYW1lID09PSAnJykgPyB1bmRlZmluZWQgOiBjbGFzc05hbWUsCiAgICAg
        IGZhbHN5Q2xhc3NOYW1lOiBmYWxzeUNsYXNzTmFtZQogICAgfTsKICB9LAoK
        ICAvKioKICAgIEdldCB0aGUgY2xhc3MgbmFtZSBmb3IgYSBnaXZlbiB2YWx1
        ZSwgYmFzZWQgb24gdGhlIHBhdGgsIG9wdGlvbmFsCiAgICBgY2xhc3NOYW1l
        YCBhbmQgb3B0aW9uYWwgYGZhbHN5Q2xhc3NOYW1lYC4KCiAgICAtIGlmIGEg
        YGNsYXNzTmFtZWAgb3IgYGZhbHN5Q2xhc3NOYW1lYCBoYXMgYmVlbiBzcGVj
        aWZpZWQ6CiAgICAgIC0gaWYgdGhlIHZhbHVlIGlzIHRydXRoeSBhbmQgYGNs
        YXNzTmFtZWAgaGFzIGJlZW4gc3BlY2lmaWVkLAogICAgICAgIGBjbGFzc05h
        bWVgIGlzIHJldHVybmVkCiAgICAgIC0gaWYgdGhlIHZhbHVlIGlzIGZhbHN5
        IGFuZCBgZmFsc3lDbGFzc05hbWVgIGhhcyBiZWVuIHNwZWNpZmllZCwKICAg
        ICAgICBgZmFsc3lDbGFzc05hbWVgIGlzIHJldHVybmVkCiAgICAgIC0gb3Ro
        ZXJ3aXNlIGBudWxsYCBpcyByZXR1cm5lZAogICAgLSBpZiB0aGUgdmFsdWUg
        aXMgYHRydWVgLCB0aGUgZGFzaGVyaXplZCBsYXN0IHBhcnQgb2YgdGhlIHN1
        cHBsaWVkIHBhdGgKICAgICAgaXMgcmV0dXJuZWQKICAgIC0gaWYgdGhlIHZh
        bHVlIGlzIG5vdCBgZmFsc2VgLCBgdW5kZWZpbmVkYCBvciBgbnVsbGAsIHRo
        ZSBgdmFsdWVgCiAgICAgIGlzIHJldHVybmVkCiAgICAtIGlmIG5vbmUgb2Yg
        dGhlIGFib3ZlIHJ1bGVzIGFwcGx5LCBgbnVsbGAgaXMgcmV0dXJuZWQKCiAg
        ICBAbWV0aG9kIF9jbGFzc1N0cmluZ0ZvclZhbHVlCiAgICBAcGFyYW0gcGF0
        aAogICAgQHBhcmFtIHZhbAogICAgQHBhcmFtIGNsYXNzTmFtZQogICAgQHBh
        cmFtIGZhbHN5Q2xhc3NOYW1lCiAgICBAc3RhdGljCiAgICBAcHJpdmF0ZQog
        ICovCiAgX2NsYXNzU3RyaW5nRm9yVmFsdWU6IGZ1bmN0aW9uKHBhdGgsIHZh
        bCwgY2xhc3NOYW1lLCBmYWxzeUNsYXNzTmFtZSkgewogICAgLy8gV2hlbiB1
        c2luZyB0aGUgY29sb24gc3ludGF4LCBldmFsdWF0ZSB0aGUgdHJ1dGhpbmVz
        cyBvciBmYWxzaW5lc3MKICAgIC8vIG9mIHRoZSB2YWx1ZSB0byBkZXRlcm1p
        bmUgd2hpY2ggY2xhc3NOYW1lIHRvIHJldHVybgogICAgaWYgKGNsYXNzTmFt
        ZSB8fCBmYWxzeUNsYXNzTmFtZSkgewogICAgICBpZiAoY2xhc3NOYW1lICYm
        ICEhdmFsKSB7CiAgICAgICAgcmV0dXJuIGNsYXNzTmFtZTsKCiAgICAgIH0g
        ZWxzZSBpZiAoZmFsc3lDbGFzc05hbWUgJiYgIXZhbCkgewogICAgICAgIHJl
        dHVybiBmYWxzeUNsYXNzTmFtZTsKCiAgICAgIH0gZWxzZSB7CiAgICAgICAg
        cmV0dXJuIG51bGw7CiAgICAgIH0KCiAgICAvLyBJZiB2YWx1ZSBpcyBhIEJv
        b2xlYW4gYW5kIHRydWUsIHJldHVybiB0aGUgZGFzaGVyaXplZCBwcm9wZXJ0
        eQogICAgLy8gbmFtZS4KICAgIH0gZWxzZSBpZiAodmFsID09PSB0cnVlKSB7
        CiAgICAgIC8vIE5vcm1hbGl6ZSBwcm9wZXJ0eSBwYXRoIHRvIGJlIHN1aXRh
        YmxlIGZvciB1c2UKICAgICAgLy8gYXMgYSBjbGFzcyBuYW1lLiBGb3IgZXhh
        cGxlLCBjb250ZW50LmZvby5iYXJCYXoKICAgICAgLy8gYmVjb21lcyBiYXIt
        YmF6LgogICAgICB2YXIgcGFydHMgPSBwYXRoLnNwbGl0KCcuJyk7CiAgICAg
        IHJldHVybiBFbWJlci5TdHJpbmcuZGFzaGVyaXplKHBhcnRzW3BhcnRzLmxl
        bmd0aC0xXSk7CgogICAgLy8gSWYgdGhlIHZhbHVlIGlzIG5vdCBmYWxzZSwg
        dW5kZWZpbmVkLCBvciBudWxsLCByZXR1cm4gdGhlIGN1cnJlbnQKICAgIC8v
        IHZhbHVlIG9mIHRoZSBwcm9wZXJ0eS4KICAgIH0gZWxzZSBpZiAodmFsICE9
        PSBmYWxzZSAmJiB2YWwgIT0gbnVsbCkgewogICAgICByZXR1cm4gdmFsOwoK
        ICAgIC8vIE5vdGhpbmcgdG8gZGlzcGxheS4gUmV0dXJuIG51bGwgc28gdGhh
        dCB0aGUgb2xkIGNsYXNzIGlzIHJlbW92ZWQKICAgIC8vIGJ1dCBubyBuZXcg
        Y2xhc3MgaXMgYWRkZWQuCiAgICB9IGVsc2UgewogICAgICByZXR1cm4gbnVs
        bDsKICAgIH0KICB9Cn0pOwoKdmFyIG11dGF0aW9uID0gRW1iZXIuT2JqZWN0
        LmV4dGVuZChFbWJlci5FdmVudGVkKS5jcmVhdGUoKTsKCkVtYmVyLlZpZXcu
        YWRkTXV0YXRpb25MaXN0ZW5lciA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7CiAg
        bXV0YXRpb24ub24oJ2NoYW5nZScsIGNhbGxiYWNrKTsKfTsKCkVtYmVyLlZp
        ZXcucmVtb3ZlTXV0YXRpb25MaXN0ZW5lciA9IGZ1bmN0aW9uKGNhbGxiYWNr
        KSB7CiAgbXV0YXRpb24ub2ZmKCdjaGFuZ2UnLCBjYWxsYmFjayk7Cn07CgpF
        bWJlci5WaWV3Lm5vdGlmeU11dGF0aW9uTGlzdGVuZXJzID0gZnVuY3Rpb24o
        KSB7CiAgbXV0YXRpb24udHJpZ2dlcignY2hhbmdlJyk7Cn07CgovKioKICBH
        bG9iYWwgdmlld3MgaGFzaAoKICBAcHJvcGVydHkgdmlld3MKICBAc3RhdGlj
        CiAgQHR5cGUgSGFzaAoqLwpFbWJlci5WaWV3LnZpZXdzID0ge307CgovLyBJ
        ZiBzb21lb25lIG92ZXJyaWRlcyB0aGUgY2hpbGQgdmlld3MgY29tcHV0ZWQg
        cHJvcGVydHkgd2hlbgovLyBkZWZpbmluZyB0aGVpciBjbGFzcywgd2Ugd2Fu
        dCB0byBiZSBhYmxlIHRvIHByb2Nlc3MgdGhlIHVzZXIncwovLyBzdXBwbGll
        ZCBjaGlsZFZpZXdzIGFuZCB0aGVuIHJlc3RvcmUgdGhlIG9yaWdpbmFsIGNv
        bXB1dGVkIHByb3BlcnR5Ci8vIGF0IHZpZXcgaW5pdGlhbGl6YXRpb24gdGlt
        ZS4gVGhpcyBoYXBwZW5zIGluIEVtYmVyLkNvbnRhaW5lclZpZXcncyBpbml0
        Ci8vIG1ldGhvZC4KRW1iZXIuVmlldy5jaGlsZFZpZXdzUHJvcGVydHkgPSBj
        aGlsZFZpZXdzUHJvcGVydHk7CgpFbWJlci5WaWV3LmFwcGx5QXR0cmlidXRl
        QmluZGluZ3MgPSBmdW5jdGlvbihlbGVtLCBuYW1lLCB2YWx1ZSkgewogIHZh
        ciB0eXBlID0gRW1iZXIudHlwZU9mKHZhbHVlKTsKCiAgLy8gaWYgdGhpcyBj
        aGFuZ2VzLCBhbHNvIGNoYW5nZSB0aGUgbG9naWMgaW4gZW1iZXItaGFuZGxl
        YmFycy9saWIvaGVscGVycy9iaW5kaW5nLmpzCiAgaWYgKG5hbWUgIT09ICd2
        YWx1ZScgJiYgKHR5cGUgPT09ICdzdHJpbmcnIHx8ICh0eXBlID09PSAnbnVt
        YmVyJyAmJiAhaXNOYU4odmFsdWUpKSkpIHsKICAgIGlmICh2YWx1ZSAhPT0g
        ZWxlbS5hdHRyKG5hbWUpKSB7CiAgICAgIGVsZW0uYXR0cihuYW1lLCB2YWx1
        ZSk7CiAgICB9CiAgfSBlbHNlIGlmIChuYW1lID09PSAndmFsdWUnIHx8IHR5
        cGUgPT09ICdib29sZWFuJykgewogICAgaWYgKEVtYmVyLmlzTm9uZSh2YWx1
        ZSkgfHwgdmFsdWUgPT09IGZhbHNlKSB7CiAgICAgIC8vIGBudWxsYCwgYHVu
        ZGVmaW5lZGAgb3IgYGZhbHNlYCBzaG91bGQgcmVtb3ZlIGF0dHJpYnV0ZQog
        ICAgICBlbGVtLnJlbW92ZUF0dHIobmFtZSk7CiAgICAgIGVsZW0ucHJvcChu
        YW1lLCAnJyk7CiAgICB9IGVsc2UgaWYgKHZhbHVlICE9PSBlbGVtLnByb3Ao
        bmFtZSkpIHsKICAgICAgLy8gdmFsdWUgc2hvdWxkIGFsd2F5cyBiZSBwcm9w
        ZXJ0aWVzCiAgICAgIGVsZW0ucHJvcChuYW1lLCB2YWx1ZSk7CiAgICB9CiAg
        fSBlbHNlIGlmICghdmFsdWUpIHsKICAgIGVsZW0ucmVtb3ZlQXR0cihuYW1l
        KTsKICB9Cn07CgpFbWJlci5WaWV3LnN0YXRlcyA9IHN0YXRlczsKCn0pKCk7
        CgoKCihmdW5jdGlvbigpIHsKLyoqCkBtb2R1bGUgZW1iZXIKQHN1Ym1vZHVs
        ZSBlbWJlci12aWV3cwoqLwoKdmFyIGdldCA9IEVtYmVyLmdldCwgc2V0ID0g
        RW1iZXIuc2V0OwoKRW1iZXIuVmlldy5zdGF0ZXMuX2RlZmF1bHQgPSB7CiAg
        Ly8gYXBwZW5kQ2hpbGQgaXMgb25seSBsZWdhbCB3aGlsZSByZW5kZXJpbmcg
        dGhlIGJ1ZmZlci4KICBhcHBlbmRDaGlsZDogZnVuY3Rpb24oKSB7CiAgICB0
        aHJvdyAiWW91IGNhbid0IHVzZSBhcHBlbmRDaGlsZCBvdXRzaWRlIG9mIHRo
        ZSByZW5kZXJpbmcgcHJvY2VzcyI7CiAgfSwKCiAgJDogZnVuY3Rpb24oKSB7
        CiAgICByZXR1cm4gdW5kZWZpbmVkOwogIH0sCgogIGdldEVsZW1lbnQ6IGZ1
        bmN0aW9uKCkgewogICAgcmV0dXJuIG51bGw7CiAgfSwKCiAgLy8gSGFuZGxl
        IGV2ZW50cyBmcm9tIGBFbWJlci5FdmVudERpc3BhdGNoZXJgCiAgaGFuZGxl
        RXZlbnQ6IGZ1bmN0aW9uKCkgewogICAgcmV0dXJuIHRydWU7IC8vIGNvbnRp
        bnVlIGV2ZW50IHByb3BhZ2F0aW9uCiAgfSwKCiAgZGVzdHJveUVsZW1lbnQ6
        IGZ1bmN0aW9uKHZpZXcpIHsKICAgIHNldCh2aWV3LCAnZWxlbWVudCcsIG51
        bGwpOwogICAgaWYgKHZpZXcuX3NjaGVkdWxlZEluc2VydCkgewogICAgICBF
        bWJlci5ydW4uY2FuY2VsKHZpZXcuX3NjaGVkdWxlZEluc2VydCk7CiAgICAg
        IHZpZXcuX3NjaGVkdWxlZEluc2VydCA9IG51bGw7CiAgICB9CiAgICByZXR1
        cm4gdmlldzsKICB9LAoKICByZW5kZXJUb0J1ZmZlcklmTmVlZGVkOiBmdW5j
        dGlvbiAoKSB7CiAgICByZXR1cm4gZmFsc2U7CiAgfSwKCiAgcmVyZW5kZXI6
        IEVtYmVyLkssCiAgaW52b2tlT2JzZXJ2ZXI6IEVtYmVyLksKfTsKCn0pKCk7
        CgoKCihmdW5jdGlvbigpIHsKLyoqCkBtb2R1bGUgZW1iZXIKQHN1Ym1vZHVs
        ZSBlbWJlci12aWV3cwoqLwoKdmFyIHByZVJlbmRlciA9IEVtYmVyLlZpZXcu
        c3RhdGVzLnByZVJlbmRlciA9IEVtYmVyLmNyZWF0ZShFbWJlci5WaWV3LnN0
        YXRlcy5fZGVmYXVsdCk7CgpFbWJlci5tZXJnZShwcmVSZW5kZXIsIHsKICAv
        LyBhIHZpZXcgbGVhdmVzIHRoZSBwcmVSZW5kZXIgc3RhdGUgb25jZSBpdHMg
        ZWxlbWVudCBoYXMgYmVlbgogIC8vIGNyZWF0ZWQgKGNyZWF0ZUVsZW1lbnQp
        LgogIGluc2VydEVsZW1lbnQ6IGZ1bmN0aW9uKHZpZXcsIGZuKSB7CiAgICB2
        aWV3LmNyZWF0ZUVsZW1lbnQoKTsKICAgIHZhciB2aWV3Q29sbGVjdGlvbiA9
        IHZpZXcudmlld0hpZXJhcmNoeUNvbGxlY3Rpb24oKTsKCiAgICB2aWV3Q29s
        bGVjdGlvbi50cmlnZ2VyKCd3aWxsSW5zZXJ0RWxlbWVudCcpOwoKICAgIGZu
        LmNhbGwodmlldyk7CgogICAgLy8gV2UgdHJhbnNpdGlvbiB0byBgaW5ET01g
        IGlmIHRoZSBlbGVtZW50IGV4aXN0cyBpbiB0aGUgRE9NCiAgICB2YXIgZWxl
        bWVudCA9IHZpZXcuZ2V0KCdlbGVtZW50Jyk7CiAgICB3aGlsZSAoZWxlbWVu
        dCA9IGVsZW1lbnQucGFyZW50Tm9kZSkgewogICAgICBpZiAoZWxlbWVudCA9
        PT0gZG9jdW1lbnQpIHsKICAgICAgICB2aWV3Q29sbGVjdGlvbi50cmFuc2l0
        aW9uVG8oJ2luRE9NJywgZmFsc2UpOwogICAgICAgIHZpZXdDb2xsZWN0aW9u
        LnRyaWdnZXIoJ2RpZEluc2VydEVsZW1lbnQnKTsKICAgICAgfQogICAgfQoK
        ICB9LAoKICByZW5kZXJUb0J1ZmZlcklmTmVlZGVkOiBmdW5jdGlvbih2aWV3
        LCBidWZmZXIpIHsKICAgIHZpZXcucmVuZGVyVG9CdWZmZXIoYnVmZmVyKTsK
        ICAgIHJldHVybiB0cnVlOwogIH0sCgogIGVtcHR5OiBFbWJlci5LLAoKICBz
        ZXRFbGVtZW50OiBmdW5jdGlvbih2aWV3LCB2YWx1ZSkgewogICAgaWYgKHZh
        bHVlICE9PSBudWxsKSB7CiAgICAgIHZpZXcudHJhbnNpdGlvblRvKCdoYXNF
        bGVtZW50Jyk7CiAgICB9CiAgICByZXR1cm4gdmFsdWU7CiAgfQp9KTsKCn0p
        KCk7CgoKCihmdW5jdGlvbigpIHsKLyoqCkBtb2R1bGUgZW1iZXIKQHN1Ym1v
        ZHVsZSBlbWJlci12aWV3cwoqLwoKdmFyIGdldCA9IEVtYmVyLmdldCwgc2V0
        ID0gRW1iZXIuc2V0OwoKdmFyIGluQnVmZmVyID0gRW1iZXIuVmlldy5zdGF0
        ZXMuaW5CdWZmZXIgPSBFbWJlci5jcmVhdGUoRW1iZXIuVmlldy5zdGF0ZXMu
        X2RlZmF1bHQpOwoKRW1iZXIubWVyZ2UoaW5CdWZmZXIsIHsKICAkOiBmdW5j
        dGlvbih2aWV3LCBzZWwpIHsKICAgIC8vIGlmIHdlIGRvbid0IGhhdmUgYW4g
        ZWxlbWVudCB5ZXQsIHNvbWVvbmUgY2FsbGluZyB0aGlzLiQoKSBpcwogICAg
        Ly8gdHJ5aW5nIHRvIHVwZGF0ZSBhbiBlbGVtZW50IHRoYXQgaXNuJ3QgaW4g
        dGhlIERPTS4gSW5zdGVhZCwKICAgIC8vIHJlcmVuZGVyIHRoZSB2aWV3IHRv
        IGFsbG93IHRoZSByZW5kZXIgbWV0aG9kIHRvIHJlZmxlY3QgdGhlCiAgICAv
        LyBjaGFuZ2VzLgogICAgdmlldy5yZXJlbmRlcigpOwogICAgcmV0dXJuIEVt
        YmVyLiQoKTsKICB9LAoKICAvLyB3aGVuIGEgdmlldyBpcyByZW5kZXJlZCBp
        biBhIGJ1ZmZlciwgcmVyZW5kZXJpbmcgaXQgc2ltcGx5CiAgLy8gcmVwbGFj
        ZXMgdGhlIGV4aXN0aW5nIGJ1ZmZlciB3aXRoIGEgbmV3IG9uZQogIHJlcmVu
        ZGVyOiBmdW5jdGlvbih2aWV3KSB7CiAgICB0aHJvdyBuZXcgRW1iZXIuRXJy
        b3IoIlNvbWV0aGluZyB5b3UgZGlkIGNhdXNlZCBhIHZpZXcgdG8gcmUtcmVu
        ZGVyIGFmdGVyIGl0IHJlbmRlcmVkIGJ1dCBiZWZvcmUgaXQgd2FzIGluc2Vy
        dGVkIGludG8gdGhlIERPTS4iKTsKICB9LAoKICAvLyB3aGVuIGEgdmlldyBp
        cyByZW5kZXJlZCBpbiBhIGJ1ZmZlciwgYXBwZW5kaW5nIGEgY2hpbGQKICAv
        LyB2aWV3IHdpbGwgcmVuZGVyIHRoYXQgdmlldyBhbmQgYXBwZW5kIHRoZSBy
        ZXN1bHRpbmcKICAvLyBidWZmZXIgaW50byBpdHMgYnVmZmVyLgogIGFwcGVu
        ZENoaWxkOiBmdW5jdGlvbih2aWV3LCBjaGlsZFZpZXcsIG9wdGlvbnMpIHsK
        ICAgIHZhciBidWZmZXIgPSB2aWV3LmJ1ZmZlciwgX2NoaWxkVmlld3MgPSB2
        aWV3Ll9jaGlsZFZpZXdzOwoKICAgIGNoaWxkVmlldyA9IHZpZXcuY3JlYXRl
        Q2hpbGRWaWV3KGNoaWxkVmlldywgb3B0aW9ucyk7CiAgICBpZiAoIV9jaGls
        ZFZpZXdzLmxlbmd0aCkgeyBfY2hpbGRWaWV3cyA9IHZpZXcuX2NoaWxkVmll
        d3MgPSBfY2hpbGRWaWV3cy5zbGljZSgpOyB9CiAgICBfY2hpbGRWaWV3cy5w
        dXNoKGNoaWxkVmlldyk7CgogICAgY2hpbGRWaWV3LnJlbmRlclRvQnVmZmVy
        KGJ1ZmZlcik7CgogICAgdmlldy5wcm9wZXJ0eURpZENoYW5nZSgnY2hpbGRW
        aWV3cycpOwoKICAgIHJldHVybiBjaGlsZFZpZXc7CiAgfSwKCiAgLy8gd2hl
        biBhIHZpZXcgaXMgcmVuZGVyZWQgaW4gYSBidWZmZXIsIGRlc3Ryb3lpbmcg
        dGhlCiAgLy8gZWxlbWVudCB3aWxsIHNpbXBseSBkZXN0cm95IHRoZSBidWZm
        ZXIgYW5kIHB1dCB0aGUKICAvLyBzdGF0ZSBiYWNrIGludG8gdGhlIHByZVJl
        bmRlciBzdGF0ZS4KICBkZXN0cm95RWxlbWVudDogZnVuY3Rpb24odmlldykg
        ewogICAgdmlldy5jbGVhckJ1ZmZlcigpOwogICAgdmFyIHZpZXdDb2xsZWN0
        aW9uID0gdmlldy5fbm90aWZ5V2lsbERlc3Ryb3lFbGVtZW50KCk7CiAgICB2
        aWV3Q29sbGVjdGlvbi50cmFuc2l0aW9uVG8oJ3ByZVJlbmRlcicsIGZhbHNl
        KTsKCiAgICByZXR1cm4gdmlldzsKICB9LAoKICBlbXB0eTogZnVuY3Rpb24o
        KSB7CiAgICBFbWJlci5hc3NlcnQoIkVtcHR5aW5nIGEgdmlldyBpbiB0aGUg
        aW5CdWZmZXIgc3RhdGUgaXMgbm90IGFsbG93ZWQgYW5kICIgKwogICAgICAg
        ICAgICAgICAgICJzaG91bGQgbm90IGhhcHBlbiB1bmRlciBub3JtYWwgY2ly
        Y3Vtc3RhbmNlcy4gTW9zdCBsaWtlbHkgIiArCiAgICAgICAgICAgICAgICAg
        InRoZXJlIGlzIGEgYnVnIGluIHlvdXIgYXBwbGljYXRpb24uIFRoaXMgbWF5
        IGJlIGR1ZSB0byAiICsKICAgICAgICAgICAgICAgICAiZXhjZXNzaXZlIHBy
        b3BlcnR5IGNoYW5nZSBub3RpZmljYXRpb25zLiIpOwogIH0sCgogIHJlbmRl
        clRvQnVmZmVySWZOZWVkZWQ6IGZ1bmN0aW9uICh2aWV3LCBidWZmZXIpIHsK
        ICAgIHJldHVybiBmYWxzZTsKICB9LAoKICAvLyBJdCBzaG91bGQgYmUgaW1w
        b3NzaWJsZSBmb3IgYSByZW5kZXJlZCB2aWV3IHRvIGJlIHNjaGVkdWxlZCBm
        b3IKICAvLyBpbnNlcnRpb24uCiAgaW5zZXJ0RWxlbWVudDogZnVuY3Rpb24o
        KSB7CiAgICB0aHJvdyAiWW91IGNhbid0IGluc2VydCBhbiBlbGVtZW50IHRo
        YXQgaGFzIGFscmVhZHkgYmVlbiByZW5kZXJlZCI7CiAgfSwKCiAgc2V0RWxl
        bWVudDogZnVuY3Rpb24odmlldywgdmFsdWUpIHsKICAgIGlmICh2YWx1ZSA9
        PT0gbnVsbCkgewogICAgICB2aWV3LnRyYW5zaXRpb25UbygncHJlUmVuZGVy
        Jyk7CiAgICB9IGVsc2UgewogICAgICB2aWV3LmNsZWFyQnVmZmVyKCk7CiAg
        ICAgIHZpZXcudHJhbnNpdGlvblRvKCdoYXNFbGVtZW50Jyk7CiAgICB9Cgog
        ICAgcmV0dXJuIHZhbHVlOwogIH0sCgogIGludm9rZU9ic2VydmVyOiBmdW5j
        dGlvbih0YXJnZXQsIG9ic2VydmVyKSB7CiAgICBvYnNlcnZlci5jYWxsKHRh
        cmdldCk7CiAgfQp9KTsKCgp9KSgpOwoKCgooZnVuY3Rpb24oKSB7Ci8qKgpA
        bW9kdWxlIGVtYmVyCkBzdWJtb2R1bGUgZW1iZXItdmlld3MKKi8KCnZhciBn
        ZXQgPSBFbWJlci5nZXQsIHNldCA9IEVtYmVyLnNldDsKCnZhciBoYXNFbGVt
        ZW50ID0gRW1iZXIuVmlldy5zdGF0ZXMuaGFzRWxlbWVudCA9IEVtYmVyLmNy
        ZWF0ZShFbWJlci5WaWV3LnN0YXRlcy5fZGVmYXVsdCk7CgpFbWJlci5tZXJn
        ZShoYXNFbGVtZW50LCB7CiAgJDogZnVuY3Rpb24odmlldywgc2VsKSB7CiAg
        ICB2YXIgZWxlbSA9IGdldCh2aWV3LCAnZWxlbWVudCcpOwogICAgcmV0dXJu
        IHNlbCA/IEVtYmVyLiQoc2VsLCBlbGVtKSA6IEVtYmVyLiQoZWxlbSk7CiAg
        fSwKCiAgZ2V0RWxlbWVudDogZnVuY3Rpb24odmlldykgewogICAgdmFyIHBh
        cmVudCA9IGdldCh2aWV3LCAncGFyZW50VmlldycpOwogICAgaWYgKHBhcmVu
        dCkgeyBwYXJlbnQgPSBnZXQocGFyZW50LCAnZWxlbWVudCcpOyB9CiAgICBp
        ZiAocGFyZW50KSB7IHJldHVybiB2aWV3LmZpbmRFbGVtZW50SW5QYXJlbnRF
        bGVtZW50KHBhcmVudCk7IH0KICAgIHJldHVybiBFbWJlci4kKCIjIiArIGdl
        dCh2aWV3LCAnZWxlbWVudElkJykpWzBdOwogIH0sCgogIHNldEVsZW1lbnQ6
        IGZ1bmN0aW9uKHZpZXcsIHZhbHVlKSB7CiAgICBpZiAodmFsdWUgPT09IG51
        bGwpIHsKICAgICAgdmlldy50cmFuc2l0aW9uVG8oJ3ByZVJlbmRlcicpOwog
        ICAgfSBlbHNlIHsKICAgICAgdGhyb3cgIllvdSBjYW5ub3Qgc2V0IGFuIGVs
        ZW1lbnQgdG8gYSBub24tbnVsbCB2YWx1ZSB3aGVuIHRoZSBlbGVtZW50IGlz
        IGFscmVhZHkgaW4gdGhlIERPTS4iOwogICAgfQoKICAgIHJldHVybiB2YWx1
        ZTsKICB9LAoKICAvLyBvbmNlIHRoZSB2aWV3IGhhcyBiZWVuIGluc2VydGVk
        IGludG8gdGhlIERPTSwgcmVyZW5kZXJpbmcgaXMKICAvLyBkZWZlcnJlZCB0
        byBhbGxvdyBiaW5kaW5ncyB0byBzeW5jaHJvbml6ZS4KICByZXJlbmRlcjog
        ZnVuY3Rpb24odmlldykgewogICAgdmlldy50cmlnZ2VyUmVjdXJzaXZlbHko
        J3dpbGxDbGVhclJlbmRlcicpOwoKICAgIHZpZXcuY2xlYXJSZW5kZXJlZENo
        aWxkcmVuKCk7CgogICAgdmlldy5kb21NYW5hZ2VyLnJlcGxhY2Uodmlldyk7
        CiAgICByZXR1cm4gdmlldzsKICB9LAoKICAvLyBvbmNlIHRoZSB2aWV3IGlz
        IGFscmVhZHkgaW4gdGhlIERPTSwgZGVzdHJveWluZyBpdCByZW1vdmVzIGl0
        CiAgLy8gZnJvbSB0aGUgRE9NLCBudWtlcyBpdHMgZWxlbWVudCwgYW5kIHB1
        dHMgaXQgYmFjayBpbnRvIHRoZQogIC8vIHByZVJlbmRlciBzdGF0ZSBpZiBp
        bkRPTS4KCiAgZGVzdHJveUVsZW1lbnQ6IGZ1bmN0aW9uKHZpZXcpIHsKICAg
        IHZpZXcuX25vdGlmeVdpbGxEZXN0cm95RWxlbWVudCgpOwogICAgdmlldy5k
        b21NYW5hZ2VyLnJlbW92ZSh2aWV3KTsKICAgIHNldCh2aWV3LCAnZWxlbWVu
        dCcsIG51bGwpOwogICAgaWYgKHZpZXcuX3NjaGVkdWxlZEluc2VydCkgewog
        ICAgICBFbWJlci5ydW4uY2FuY2VsKHZpZXcuX3NjaGVkdWxlZEluc2VydCk7
        CiAgICAgIHZpZXcuX3NjaGVkdWxlZEluc2VydCA9IG51bGw7CiAgICB9CiAg
        ICByZXR1cm4gdmlldzsKICB9LAoKICBlbXB0eTogZnVuY3Rpb24odmlldykg
        ewogICAgdmFyIF9jaGlsZFZpZXdzID0gdmlldy5fY2hpbGRWaWV3cywgbGVu
        LCBpZHg7CiAgICBpZiAoX2NoaWxkVmlld3MpIHsKICAgICAgbGVuID0gX2No
        aWxkVmlld3MubGVuZ3RoOwogICAgICBmb3IgKGlkeCA9IDA7IGlkeCA8IGxl
        bjsgaWR4KyspIHsKICAgICAgICBfY2hpbGRWaWV3c1tpZHhdLl9ub3RpZnlX
        aWxsRGVzdHJveUVsZW1lbnQoKTsKICAgICAgfQogICAgfQogICAgdmlldy5k
        b21NYW5hZ2VyLmVtcHR5KHZpZXcpOwogIH0sCgogIC8vIEhhbmRsZSBldmVu
        dHMgZnJvbSBgRW1iZXIuRXZlbnREaXNwYXRjaGVyYAogIGhhbmRsZUV2ZW50
        OiBmdW5jdGlvbih2aWV3LCBldmVudE5hbWUsIGV2dCkgewogICAgaWYgKHZp
        ZXcuaGFzKGV2ZW50TmFtZSkpIHsKICAgICAgLy8gSGFuZGxlciBzaG91bGQg
        YmUgYWJsZSB0byByZS1kaXNwYXRjaCBldmVudHMsIHNvIHdlIGRvbid0CiAg
        ICAgIC8vIHByZXZlbnREZWZhdWx0IG9yIHN0b3BQcm9wYWdhdGlvbi4KICAg
        ICAgcmV0dXJuIHZpZXcudHJpZ2dlcihldmVudE5hbWUsIGV2dCk7CiAgICB9
        IGVsc2UgewogICAgICByZXR1cm4gdHJ1ZTsgLy8gY29udGludWUgZXZlbnQg
        cHJvcGFnYXRpb24KICAgIH0KICB9LAoKICBpbnZva2VPYnNlcnZlcjogZnVu
        Y3Rpb24odGFyZ2V0LCBvYnNlcnZlcikgewogICAgb2JzZXJ2ZXIuY2FsbCh0
        YXJnZXQpOwogIH0KfSk7Cn0pKCk7CgoKCihmdW5jdGlvbigpIHsKLyoqCkBt
        b2R1bGUgZW1iZXIKQHN1Ym1vZHVsZSBlbWJlci12aWV3cwoqLwoKdmFyIGhh
        c0VsZW1lbnQgPSBFbWJlci5WaWV3LnN0YXRlcy5oYXNFbGVtZW50Owp2YXIg
        aW5ET00gPSBFbWJlci5WaWV3LnN0YXRlcy5pbkRPTSA9IEVtYmVyLmNyZWF0
        ZShoYXNFbGVtZW50KTsKCkVtYmVyLm1lcmdlKGluRE9NLCB7CiAgZW50ZXI6
        IGZ1bmN0aW9uKHZpZXcpIHsKICAgIC8vIFJlZ2lzdGVyIHRoZSB2aWV3IGZv
        ciBldmVudCBoYW5kbGluZy4gVGhpcyBoYXNoIGlzIHVzZWQgYnkKICAgIC8v
        IEVtYmVyLkV2ZW50RGlzcGF0Y2hlciB0byBkaXNwYXRjaCBpbmNvbWluZyBl
        dmVudHMuCiAgICBpZiAoIXZpZXcuaXNWaXJ0dWFsKSB7CiAgICAgIEVtYmVy
        LmFzc2VydCgiQXR0ZW1wdGVkIHRvIHJlZ2lzdGVyIGEgdmlldyB3aXRoIGFu
        IGlkIGFscmVhZHkgaW4gdXNlOiAiK3ZpZXcuZWxlbWVudElkLCAhRW1iZXIu
        Vmlldy52aWV3c1t2aWV3LmVsZW1lbnRJZF0pOwogICAgICBFbWJlci5WaWV3
        LnZpZXdzW3ZpZXcuZWxlbWVudElkXSA9IHZpZXc7CiAgICB9CgogICAgdmll
        dy5hZGRCZWZvcmVPYnNlcnZlcignZWxlbWVudElkJywgZnVuY3Rpb24oKSB7
        CiAgICAgIHRocm93IG5ldyBFbWJlci5FcnJvcigiQ2hhbmdpbmcgYSB2aWV3
        J3MgZWxlbWVudElkIGFmdGVyIGNyZWF0aW9uIGlzIG5vdCBhbGxvd2VkIik7
        CiAgICB9KTsKICB9LAoKICBleGl0OiBmdW5jdGlvbih2aWV3KSB7CiAgICBp
        ZiAoIXRoaXMuaXNWaXJ0dWFsKSBkZWxldGUgRW1iZXIuVmlldy52aWV3c1t2
        aWV3LmVsZW1lbnRJZF07CiAgfSwKCiAgaW5zZXJ0RWxlbWVudDogZnVuY3Rp
        b24odmlldywgZm4pIHsKICAgIHRocm93ICJZb3UgY2FuJ3QgaW5zZXJ0IGFu
        IGVsZW1lbnQgaW50byB0aGUgRE9NIHRoYXQgaGFzIGFscmVhZHkgYmVlbiBp
        bnNlcnRlZCI7CiAgfQp9KTsKCn0pKCk7CgoKCihmdW5jdGlvbigpIHsKLyoq
        CkBtb2R1bGUgZW1iZXIKQHN1Ym1vZHVsZSBlbWJlci12aWV3cwoqLwoKdmFy
        IGRlc3Ryb3lpbmdFcnJvciA9ICJZb3UgY2FuJ3QgY2FsbCAlQCBvbiBhIHZp
        ZXcgYmVpbmcgZGVzdHJveWVkIiwgZm10ID0gRW1iZXIuU3RyaW5nLmZtdDsK
        CnZhciBkZXN0cm95aW5nID0gRW1iZXIuVmlldy5zdGF0ZXMuZGVzdHJveWlu
        ZyA9IEVtYmVyLmNyZWF0ZShFbWJlci5WaWV3LnN0YXRlcy5fZGVmYXVsdCk7
        CgpFbWJlci5tZXJnZShkZXN0cm95aW5nLCB7CiAgYXBwZW5kQ2hpbGQ6IGZ1
        bmN0aW9uKCkgewogICAgdGhyb3cgZm10KGRlc3Ryb3lpbmdFcnJvciwgWydh
        cHBlbmRDaGlsZCddKTsKICB9LAogIHJlcmVuZGVyOiBmdW5jdGlvbigpIHsK
        ICAgIHRocm93IGZtdChkZXN0cm95aW5nRXJyb3IsIFsncmVyZW5kZXInXSk7
        CiAgfSwKICBkZXN0cm95RWxlbWVudDogZnVuY3Rpb24oKSB7CiAgICB0aHJv
        dyBmbXQoZGVzdHJveWluZ0Vycm9yLCBbJ2Rlc3Ryb3lFbGVtZW50J10pOwog
        IH0sCiAgZW1wdHk6IGZ1bmN0aW9uKCkgewogICAgdGhyb3cgZm10KGRlc3Ry
        b3lpbmdFcnJvciwgWydlbXB0eSddKTsKICB9LAoKICBzZXRFbGVtZW50OiBm
        dW5jdGlvbigpIHsKICAgIHRocm93IGZtdChkZXN0cm95aW5nRXJyb3IsIFsi
        c2V0KCdlbGVtZW50JywgLi4uKSJdKTsKICB9LAoKICByZW5kZXJUb0J1ZmZl
        cklmTmVlZGVkOiBmdW5jdGlvbigpIHsKICAgIHJldHVybiBmYWxzZTsKICB9
        LAoKICAvLyBTaW5jZSBlbGVtZW50IGluc2VydGlvbiBpcyBzY2hlZHVsZWQs
        IGRvbid0IGRvIGFueXRoaW5nIGlmCiAgLy8gdGhlIHZpZXcgaGFzIGJlZW4g
        ZGVzdHJveWVkIGJldHdlZW4gc2NoZWR1bGluZyBhbmQgZXhlY3V0aW9uCiAg
        aW5zZXJ0RWxlbWVudDogRW1iZXIuSwp9KTsKCgp9KSgpOwoKCgooZnVuY3Rp
        b24oKSB7CkVtYmVyLlZpZXcuY2xvbmVTdGF0ZXMgPSBmdW5jdGlvbihmcm9t
        KSB7CiAgdmFyIGludG8gPSB7fTsKCiAgaW50by5fZGVmYXVsdCA9IHt9Owog
        IGludG8ucHJlUmVuZGVyID0gRW1iZXIuY3JlYXRlKGludG8uX2RlZmF1bHQp
        OwogIGludG8uZGVzdHJveWluZyA9IEVtYmVyLmNyZWF0ZShpbnRvLl9kZWZh
        dWx0KTsKICBpbnRvLmluQnVmZmVyID0gRW1iZXIuY3JlYXRlKGludG8uX2Rl
        ZmF1bHQpOwogIGludG8uaGFzRWxlbWVudCA9IEVtYmVyLmNyZWF0ZShpbnRv
        Ll9kZWZhdWx0KTsKICBpbnRvLmluRE9NID0gRW1iZXIuY3JlYXRlKGludG8u
        aGFzRWxlbWVudCk7CgogIGZvciAodmFyIHN0YXRlTmFtZSBpbiBmcm9tKSB7
        CiAgICBpZiAoIWZyb20uaGFzT3duUHJvcGVydHkoc3RhdGVOYW1lKSkgeyBj
        b250aW51ZTsgfQogICAgRW1iZXIubWVyZ2UoaW50b1tzdGF0ZU5hbWVdLCBm
        cm9tW3N0YXRlTmFtZV0pOwogIH0KCiAgcmV0dXJuIGludG87Cn07Cgp9KSgp
        OwoKCgooZnVuY3Rpb24oKSB7CnZhciBzdGF0ZXMgPSBFbWJlci5WaWV3LmNs
        b25lU3RhdGVzKEVtYmVyLlZpZXcuc3RhdGVzKTsKCi8qKgpAbW9kdWxlIGVt
        YmVyCkBzdWJtb2R1bGUgZW1iZXItdmlld3MKKi8KCnZhciBnZXQgPSBFbWJl
        ci5nZXQsIHNldCA9IEVtYmVyLnNldDsKdmFyIGZvckVhY2ggPSBFbWJlci5F
        bnVtZXJhYmxlVXRpbHMuZm9yRWFjaDsKdmFyIFZpZXdDb2xsZWN0aW9uID0g
        RW1iZXIuX1ZpZXdDb2xsZWN0aW9uOwoKLyoqCiAgQSBgQ29udGFpbmVyVmll
        d2AgaXMgYW4gYEVtYmVyLlZpZXdgIHN1YmNsYXNzIHRoYXQgaW1wbGVtZW50
        cyBgRW1iZXIuTXV0YWJsZUFycmF5YAogIGFsbG93aW5nIHByb2dyYW1tYXRp
        YyBtYW5hZ2VtZW50IG9mIGl0cyBjaGlsZCB2aWV3cy4KCiAgIyMgU2V0dGlu
        ZyBJbml0aWFsIENoaWxkIFZpZXdzCgogIFRoZSBpbml0aWFsIGFycmF5IG9m
        IGNoaWxkIHZpZXdzIGNhbiBiZSBzZXQgaW4gb25lIG9mIHR3byB3YXlzLiBZ
        b3UgY2FuCiAgcHJvdmlkZSBhIGBjaGlsZFZpZXdzYCBwcm9wZXJ0eSBhdCBj
        cmVhdGlvbiB0aW1lIHRoYXQgY29udGFpbnMgaW5zdGFuY2Ugb2YKICBgRW1i
        ZXIuVmlld2A6CgogIGBgYGphdmFzY3JpcHQKICBhQ29udGFpbmVyID0gRW1i
        ZXIuQ29udGFpbmVyVmlldy5jcmVhdGUoewogICAgY2hpbGRWaWV3czogW0Vt
        YmVyLlZpZXcuY3JlYXRlKCksIEVtYmVyLlZpZXcuY3JlYXRlKCldCiAgfSk7
        CiAgYGBgCgogIFlvdSBjYW4gYWxzbyBwcm92aWRlIGEgbGlzdCBvZiBwcm9w
        ZXJ0eSBuYW1lcyB3aG9zZSB2YWx1ZXMgYXJlIGluc3RhbmNlcyBvZgogIGBF
        bWJlci5WaWV3YDoKCiAgYGBgamF2YXNjcmlwdAogIGFDb250YWluZXIgPSBF
        bWJlci5Db250YWluZXJWaWV3LmNyZWF0ZSh7CiAgICBjaGlsZFZpZXdzOiBb
        J2FWaWV3JywgJ2JWaWV3JywgJ2NWaWV3J10sCiAgICBhVmlldzogRW1iZXIu
        Vmlldy5jcmVhdGUoKSwKICAgIGJWaWV3OiBFbWJlci5WaWV3LmNyZWF0ZSgp
        LAogICAgY1ZpZXc6IEVtYmVyLlZpZXcuY3JlYXRlKCkKICB9KTsKICBgYGAK
        CiAgVGhlIHR3byBzdHJhdGVnaWVzIGNhbiBiZSBjb21iaW5lZDoKCiAgYGBg
        amF2YXNjcmlwdAogIGFDb250YWluZXIgPSBFbWJlci5Db250YWluZXJWaWV3
        LmNyZWF0ZSh7CiAgICBjaGlsZFZpZXdzOiBbJ2FWaWV3JywgRW1iZXIuVmll
        dy5jcmVhdGUoKV0sCiAgICBhVmlldzogRW1iZXIuVmlldy5jcmVhdGUoKQog
        IH0pOwogIGBgYAoKICBFYWNoIGNoaWxkIHZpZXcncyByZW5kZXJpbmcgd2ls
        bCBiZSBpbnNlcnRlZCBpbnRvIHRoZSBjb250YWluZXIncyByZW5kZXJlZAog
        IEhUTUwgaW4gdGhlIHNhbWUgb3JkZXIgYXMgaXRzIHBvc2l0aW9uIGluIHRo
        ZSBgY2hpbGRWaWV3c2AgcHJvcGVydHkuCgogICMjIEFkZGluZyBhbmQgUmVt
        b3ZpbmcgQ2hpbGQgVmlld3MKCiAgVGhlIGNvbnRhaW5lciB2aWV3IGltcGxl
        bWVudHMgYEVtYmVyLk11dGFibGVBcnJheWAgYWxsb3dpbmcgcHJvZ3JhbW1h
        dGljIG1hbmFnZW1lbnQgb2YgaXRzIGNoaWxkIHZpZXdzLgoKICBUbyByZW1v
        dmUgYSB2aWV3LCBwYXNzIHRoYXQgdmlldyBpbnRvIGEgYHJlbW92ZU9iamVj
        dGAgY2FsbCBvbiB0aGUgY29udGFpbmVyIHZpZXcuCgogIEdpdmVuIGFuIGVt
        cHR5IGA8Ym9keT5gIHRoZSBmb2xsb3dpbmcgY29kZQoKICBgYGBqYXZhc2Ny
        aXB0CiAgYUNvbnRhaW5lciA9IEVtYmVyLkNvbnRhaW5lclZpZXcuY3JlYXRl
        KHsKICAgIGNsYXNzTmFtZXM6IFsndGhlLWNvbnRhaW5lciddLAogICAgY2hp
        bGRWaWV3czogWydhVmlldycsICdiVmlldyddLAogICAgYVZpZXc6IEVtYmVy
        LlZpZXcuY3JlYXRlKHsKICAgICAgdGVtcGxhdGU6IEVtYmVyLkhhbmRsZWJh
        cnMuY29tcGlsZSgiQSIpCiAgICB9KSwKICAgIGJWaWV3OiBFbWJlci5WaWV3
        LmNyZWF0ZSh7CiAgICAgIHRlbXBsYXRlOiBFbWJlci5IYW5kbGViYXJzLmNv
        bXBpbGUoIkIiKQogICAgfSkKICB9KTsKCiAgYUNvbnRhaW5lci5hcHBlbmRU
        bygnYm9keScpOwogIGBgYAoKICBSZXN1bHRzIGluIHRoZSBIVE1MCgogIGBg
        YGh0bWwKICA8ZGl2IGNsYXNzPSJlbWJlci12aWV3IHRoZS1jb250YWluZXIi
        PgogICAgPGRpdiBjbGFzcz0iZW1iZXItdmlldyI+QTwvZGl2PgogICAgPGRp
        diBjbGFzcz0iZW1iZXItdmlldyI+QjwvZGl2PgogIDwvZGl2PgogIGBgYAoK
        ICBSZW1vdmluZyBhIHZpZXcKCiAgYGBgamF2YXNjcmlwdAogIGFDb250YWlu
        ZXIudG9BcnJheSgpOyAgLy8gW2FDb250YWluZXIuYVZpZXcsIGFDb250YWlu
        ZXIuYlZpZXddCiAgYUNvbnRhaW5lci5yZW1vdmVPYmplY3QoYUNvbnRhaW5l
        ci5nZXQoJ2JWaWV3JykpOwogIGFDb250YWluZXIudG9BcnJheSgpOyAgLy8g
        W2FDb250YWluZXIuYVZpZXddCiAgYGBgCgogIFdpbGwgcmVzdWx0IGluIHRo
        ZSBmb2xsb3dpbmcgSFRNTAoKICBgYGBodG1sCiAgPGRpdiBjbGFzcz0iZW1i
        ZXItdmlldyB0aGUtY29udGFpbmVyIj4KICAgIDxkaXYgY2xhc3M9ImVtYmVy
        LXZpZXciPkE8L2Rpdj4KICA8L2Rpdj4KICBgYGAKCiAgU2ltaWxhcmx5LCBh
        ZGRpbmcgYSBjaGlsZCB2aWV3IGlzIGFjY29tcGxpc2hlZCBieSBhZGRpbmcg
        YEVtYmVyLlZpZXdgIGluc3RhbmNlcyB0byB0aGUKICBjb250YWluZXIgdmll
        dy4KCiAgR2l2ZW4gYW4gZW1wdHkgYDxib2R5PmAgdGhlIGZvbGxvd2luZyBj
        b2RlCgogIGBgYGphdmFzY3JpcHQKICBhQ29udGFpbmVyID0gRW1iZXIuQ29u
        dGFpbmVyVmlldy5jcmVhdGUoewogICAgY2xhc3NOYW1lczogWyd0aGUtY29u
        dGFpbmVyJ10sCiAgICBjaGlsZFZpZXdzOiBbJ2FWaWV3JywgJ2JWaWV3J10s
        CiAgICBhVmlldzogRW1iZXIuVmlldy5jcmVhdGUoewogICAgICB0ZW1wbGF0
        ZTogRW1iZXIuSGFuZGxlYmFycy5jb21waWxlKCJBIikKICAgIH0pLAogICAg
        YlZpZXc6IEVtYmVyLlZpZXcuY3JlYXRlKHsKICAgICAgdGVtcGxhdGU6IEVt
        YmVyLkhhbmRsZWJhcnMuY29tcGlsZSgiQiIpCiAgICB9KQogIH0pOwoKICBh
        Q29udGFpbmVyLmFwcGVuZFRvKCdib2R5Jyk7CiAgYGBgCgogIFJlc3VsdHMg
        aW4gdGhlIEhUTUwKCiAgYGBgaHRtbAogIDxkaXYgY2xhc3M9ImVtYmVyLXZp
        ZXcgdGhlLWNvbnRhaW5lciI+CiAgICA8ZGl2IGNsYXNzPSJlbWJlci12aWV3
        Ij5BPC9kaXY+CiAgICA8ZGl2IGNsYXNzPSJlbWJlci12aWV3Ij5CPC9kaXY+
        CiAgPC9kaXY+CiAgYGBgCgogIEFkZGluZyBhIHZpZXcKCiAgYGBgamF2YXNj
        cmlwdAogIEFub3RoZXJWaWV3Q2xhc3MgPSBFbWJlci5WaWV3LmV4dGVuZCh7
        CiAgICB0ZW1wbGF0ZTogRW1iZXIuSGFuZGxlYmFycy5jb21waWxlKCJBbm90
        aGVyIHZpZXciKQogIH0pOwoKICBhQ29udGFpbmVyLnRvQXJyYXkoKTsgIC8v
        IFthQ29udGFpbmVyLmFWaWV3LCBhQ29udGFpbmVyLmJWaWV3XQogIGFDb250
        YWluZXIucHVzaE9iamVjdChBbm90aGVyVmlld0NsYXNzLmNyZWF0ZSgpKTsK
        ICBhQ29udGFpbmVyLnRvQXJyYXkoKTsgLy8gW2FDb250YWluZXIuYVZpZXcs
        IGFDb250YWluZXIuYlZpZXcsIDxBbm90aGVyVmlld0NsYXNzIGluc3RhbmNl
        Pl0KICBgYGAKCiAgV2lsbCByZXN1bHQgaW4gdGhlIGZvbGxvd2luZyBIVE1M
        CgogIGBgYGh0bWwKICA8ZGl2IGNsYXNzPSJlbWJlci12aWV3IHRoZS1jb250
        YWluZXIiPgogICAgPGRpdiBjbGFzcz0iZW1iZXItdmlldyI+QTwvZGl2Pgog
        ICAgPGRpdiBjbGFzcz0iZW1iZXItdmlldyI+QjwvZGl2PgogICAgPGRpdiBj
        bGFzcz0iZW1iZXItdmlldyI+QW5vdGhlciB2aWV3PC9kaXY+CiAgPC9kaXY+
        CiAgYGBgCgogICMjIFRlbXBsYXRlcyBhbmQgTGF5b3V0CgogIEEgYHRlbXBs
        YXRlYCwgYHRlbXBsYXRlTmFtZWAsIGBkZWZhdWx0VGVtcGxhdGVgLCBgbGF5
        b3V0YCwgYGxheW91dE5hbWVgIG9yCiAgYGRlZmF1bHRMYXlvdXRgIHByb3Bl
        cnR5IG9uIGEgY29udGFpbmVyIHZpZXcgd2lsbCBub3QgcmVzdWx0IGluIHRo
        ZSB0ZW1wbGF0ZQogIG9yIGxheW91dCBiZWluZyByZW5kZXJlZC4gVGhlIEhU
        TUwgY29udGVudHMgb2YgYSBgRW1iZXIuQ29udGFpbmVyVmlld2AncyBET00K
        ICByZXByZXNlbnRhdGlvbiB3aWxsIG9ubHkgYmUgdGhlIHJlbmRlcmVkIEhU
        TUwgb2YgaXRzIGNoaWxkIHZpZXdzLgoKICBAY2xhc3MgQ29udGFpbmVyVmll
        dwogIEBuYW1lc3BhY2UgRW1iZXIKICBAZXh0ZW5kcyBFbWJlci5WaWV3Ciov
        CkVtYmVyLkNvbnRhaW5lclZpZXcgPSBFbWJlci5WaWV3LmV4dGVuZChFbWJl
        ci5NdXRhYmxlQXJyYXksIHsKICBzdGF0ZXM6IHN0YXRlcywKCiAgaW5pdDog
        ZnVuY3Rpb24oKSB7CiAgICB0aGlzLl9zdXBlcigpOwoKICAgIHZhciBjaGls
        ZFZpZXdzID0gZ2V0KHRoaXMsICdjaGlsZFZpZXdzJyk7CgogICAgLy8gcmVk
        ZWZpbmUgdmlldydzIGNoaWxkVmlld3MgcHJvcGVydHkgdGhhdCB3YXMgb2Js
        aXRlcmF0ZWQKICAgIEVtYmVyLmRlZmluZVByb3BlcnR5KHRoaXMsICdjaGls
        ZFZpZXdzJywgRW1iZXIuVmlldy5jaGlsZFZpZXdzUHJvcGVydHkpOwoKICAg
        IHZhciBfY2hpbGRWaWV3cyA9IHRoaXMuX2NoaWxkVmlld3M7CgogICAgZm9y
        RWFjaChjaGlsZFZpZXdzLCBmdW5jdGlvbih2aWV3TmFtZSwgaWR4KSB7CiAg
        ICAgIHZhciB2aWV3OwoKICAgICAgaWYgKCdzdHJpbmcnID09PSB0eXBlb2Yg
        dmlld05hbWUpIHsKICAgICAgICB2aWV3ID0gZ2V0KHRoaXMsIHZpZXdOYW1l
        KTsKICAgICAgICB2aWV3ID0gdGhpcy5jcmVhdGVDaGlsZFZpZXcodmlldyk7
        CiAgICAgICAgc2V0KHRoaXMsIHZpZXdOYW1lLCB2aWV3KTsKICAgICAgfSBl
        bHNlIHsKICAgICAgICB2aWV3ID0gdGhpcy5jcmVhdGVDaGlsZFZpZXcodmll
        d05hbWUpOwogICAgICB9CgogICAgICBfY2hpbGRWaWV3c1tpZHhdID0gdmll
        dzsKICAgIH0sIHRoaXMpOwoKICAgIHZhciBjdXJyZW50VmlldyA9IGdldCh0
        aGlzLCAnY3VycmVudFZpZXcnKTsKICAgIGlmIChjdXJyZW50Vmlldykgewog
        ICAgICBpZiAoIV9jaGlsZFZpZXdzLmxlbmd0aCkgeyBfY2hpbGRWaWV3cyA9
        IHRoaXMuX2NoaWxkVmlld3MgPSB0aGlzLl9jaGlsZFZpZXdzLnNsaWNlKCk7
        IH0KICAgICAgX2NoaWxkVmlld3MucHVzaCh0aGlzLmNyZWF0ZUNoaWxkVmll
        dyhjdXJyZW50VmlldykpOwogICAgfQogIH0sCgogIHJlcGxhY2U6IGZ1bmN0
        aW9uKGlkeCwgcmVtb3ZlZENvdW50LCBhZGRlZFZpZXdzKSB7CiAgICB2YXIg
        YWRkZWRDb3VudCA9IGFkZGVkVmlld3MgPyBnZXQoYWRkZWRWaWV3cywgJ2xl
        bmd0aCcpIDogMDsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIEVtYmVyLmFz
        c2VydCgiWW91IGNhbid0IGFkZCBhIGNoaWxkIHRvIGEgY29udGFpbmVyIHRo
        YXQgaXMgYWxyZWFkeSBhIGNoaWxkIG9mIGFub3RoZXIgdmlldyIsIEVtYmVy
        LkEoYWRkZWRWaWV3cykuZXZlcnkoZnVuY3Rpb24oaXRlbSkgeyByZXR1cm4g
        IWdldChpdGVtLCAnX3BhcmVudFZpZXcnKSB8fCBnZXQoaXRlbSwgJ19wYXJl
        bnRWaWV3JykgPT09IHNlbGY7IH0pKTsKCiAgICB0aGlzLmFycmF5Q29udGVu
        dFdpbGxDaGFuZ2UoaWR4LCByZW1vdmVkQ291bnQsIGFkZGVkQ291bnQpOwog
        ICAgdGhpcy5jaGlsZFZpZXdzV2lsbENoYW5nZSh0aGlzLl9jaGlsZFZpZXdz
        LCBpZHgsIHJlbW92ZWRDb3VudCk7CgogICAgaWYgKGFkZGVkQ291bnQgPT09
        IDApIHsKICAgICAgdGhpcy5fY2hpbGRWaWV3cy5zcGxpY2UoaWR4LCByZW1v
        dmVkQ291bnQpIDsKICAgIH0gZWxzZSB7CiAgICAgIHZhciBhcmdzID0gW2lk
        eCwgcmVtb3ZlZENvdW50XS5jb25jYXQoYWRkZWRWaWV3cyk7CiAgICAgIGlm
        IChhZGRlZFZpZXdzLmxlbmd0aCAmJiAhdGhpcy5fY2hpbGRWaWV3cy5sZW5n
        dGgpIHsgdGhpcy5fY2hpbGRWaWV3cyA9IHRoaXMuX2NoaWxkVmlld3Muc2xp
        Y2UoKTsgfQogICAgICB0aGlzLl9jaGlsZFZpZXdzLnNwbGljZS5hcHBseSh0
        aGlzLl9jaGlsZFZpZXdzLCBhcmdzKTsKICAgIH0KCiAgICB0aGlzLmFycmF5
        Q29udGVudERpZENoYW5nZShpZHgsIHJlbW92ZWRDb3VudCwgYWRkZWRDb3Vu
        dCk7CiAgICB0aGlzLmNoaWxkVmlld3NEaWRDaGFuZ2UodGhpcy5fY2hpbGRW
        aWV3cywgaWR4LCByZW1vdmVkQ291bnQsIGFkZGVkQ291bnQpOwoKICAgIHJl
        dHVybiB0aGlzOwogIH0sCgogIG9iamVjdEF0OiBmdW5jdGlvbihpZHgpIHsK
        ICAgIHJldHVybiB0aGlzLl9jaGlsZFZpZXdzW2lkeF07CiAgfSwKCiAgbGVu
        Z3RoOiBFbWJlci5jb21wdXRlZChmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4g
        dGhpcy5fY2hpbGRWaWV3cy5sZW5ndGg7CiAgfSkudm9sYXRpbGUoKSwKCiAg
        LyoqCiAgICBJbnN0cnVjdHMgZWFjaCBjaGlsZCB2aWV3IHRvIHJlbmRlciB0
        byB0aGUgcGFzc2VkIHJlbmRlciBidWZmZXIuCgogICAgQHByaXZhdGUKICAg
        IEBtZXRob2QgcmVuZGVyCiAgICBAcGFyYW0ge0VtYmVyLlJlbmRlckJ1ZmZl
        cn0gYnVmZmVyIHRoZSBidWZmZXIgdG8gcmVuZGVyIHRvCiAgKi8KICByZW5k
        ZXI6IGZ1bmN0aW9uKGJ1ZmZlcikgewogICAgdGhpcy5mb3JFYWNoQ2hpbGRW
        aWV3KGZ1bmN0aW9uKHZpZXcpIHsKICAgICAgdmlldy5yZW5kZXJUb0J1ZmZl
        cihidWZmZXIpOwogICAgfSk7CiAgfSwKCiAgaW5zdHJ1bWVudE5hbWU6ICdj
        b250YWluZXInLAoKICAvKioKICAgIFdoZW4gYSBjaGlsZCB2aWV3IGlzIHJl
        bW92ZWQsIGRlc3Ryb3kgaXRzIGVsZW1lbnQgc28gdGhhdAogICAgaXQgaXMg
        cmVtb3ZlZCBmcm9tIHRoZSBET00uCgogICAgVGhlIGFycmF5IG9ic2VydmVy
        IHRoYXQgdHJpZ2dlcnMgdGhpcyBhY3Rpb24gaXMgc2V0IHVwIGluIHRoZQog
        ICAgYHJlbmRlclRvQnVmZmVyYCBtZXRob2QuCgogICAgQHByaXZhdGUKICAg
        IEBtZXRob2QgY2hpbGRWaWV3c1dpbGxDaGFuZ2UKICAgIEBwYXJhbSB7RW1i
        ZXIuQXJyYXl9IHZpZXdzIHRoZSBjaGlsZCB2aWV3cyBhcnJheSBiZWZvcmUg
        bXV0YXRpb24KICAgIEBwYXJhbSB7TnVtYmVyfSBzdGFydCB0aGUgc3RhcnQg
        cG9zaXRpb24gb2YgdGhlIG11dGF0aW9uCiAgICBAcGFyYW0ge051bWJlcn0g
        cmVtb3ZlZCB0aGUgbnVtYmVyIG9mIGNoaWxkIHZpZXdzIHJlbW92ZWQKICAq
        Ki8KICBjaGlsZFZpZXdzV2lsbENoYW5nZTogZnVuY3Rpb24odmlld3MsIHN0
        YXJ0LCByZW1vdmVkKSB7CiAgICB0aGlzLnByb3BlcnR5V2lsbENoYW5nZSgn
        Y2hpbGRWaWV3cycpOwoKICAgIGlmIChyZW1vdmVkID4gMCkgewogICAgICB2
        YXIgY2hhbmdlZFZpZXdzID0gdmlld3Muc2xpY2Uoc3RhcnQsIHN0YXJ0K3Jl
        bW92ZWQpOwogICAgICAvLyB0cmFuc2l0aW9uIHRvIHByZVJlbmRlciBiZWZv
        cmUgY2xlYXJpbmcgcGFyZW50VmlldwogICAgICB0aGlzLmN1cnJlbnRTdGF0
        ZS5jaGlsZFZpZXdzV2lsbENoYW5nZSh0aGlzLCB2aWV3cywgc3RhcnQsIHJl
        bW92ZWQpOwogICAgICB0aGlzLmluaXRpYWxpemVWaWV3cyhjaGFuZ2VkVmll
        d3MsIG51bGwsIG51bGwpOwogICAgfQogIH0sCgogIHJlbW92ZUNoaWxkOiBm
        dW5jdGlvbihjaGlsZCkgewogICAgdGhpcy5yZW1vdmVPYmplY3QoY2hpbGQp
        OwogICAgcmV0dXJuIHRoaXM7CiAgfSwKCiAgLyoqCiAgICBXaGVuIGEgY2hp
        bGQgdmlldyBpcyBhZGRlZCwgbWFrZSBzdXJlIHRoZSBET00gZ2V0cyB1cGRh
        dGVkIGFwcHJvcHJpYXRlbHkuCgogICAgSWYgdGhlIHZpZXcgaGFzIGFscmVh
        ZHkgcmVuZGVyZWQgYW4gZWxlbWVudCwgd2UgdGVsbCB0aGUgY2hpbGQgdmll
        dyB0bwogICAgY3JlYXRlIGFuIGVsZW1lbnQgYW5kIGluc2VydCBpdCBpbnRv
        IHRoZSBET00uIElmIHRoZSBlbmNsb3NpbmcgY29udGFpbmVyCiAgICB2aWV3
        IGhhcyBhbHJlYWR5IHdyaXR0ZW4gdG8gYSBidWZmZXIsIGJ1dCBub3QgeWV0
        IGNvbnZlcnRlZCB0aGF0IGJ1ZmZlcgogICAgaW50byBhbiBlbGVtZW50LCB3
        ZSBpbnNlcnQgdGhlIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGUgY2hp
        bGQgaW50byB0aGUKICAgIGFwcHJvcHJpYXRlIHBsYWNlIGluIHRoZSBidWZm
        ZXIuCgogICAgQHByaXZhdGUKICAgIEBtZXRob2QgY2hpbGRWaWV3c0RpZENo
        YW5nZQogICAgQHBhcmFtIHtFbWJlci5BcnJheX0gdmlld3MgdGhlIGFycmF5
        IG9mIGNoaWxkIHZpZXdzIGFmdGUgdGhlIG11dGF0aW9uIGhhcyBvY2N1cnJl
        ZAogICAgQHBhcmFtIHtOdW1iZXJ9IHN0YXJ0IHRoZSBzdGFydCBwb3NpdGlv
        biBvZiB0aGUgbXV0YXRpb24KICAgIEBwYXJhbSB7TnVtYmVyfSByZW1vdmVk
        IHRoZSBudW1iZXIgb2YgY2hpbGQgdmlld3MgcmVtb3ZlZAogICAgQHBhcmFt
        IHtOdW1iZXJ9IHRoZSBudW1iZXIgb2YgY2hpbGQgdmlld3MgYWRkZWQKICAq
        LwogIGNoaWxkVmlld3NEaWRDaGFuZ2U6IGZ1bmN0aW9uKHZpZXdzLCBzdGFy
        dCwgcmVtb3ZlZCwgYWRkZWQpIHsKICAgIGlmIChhZGRlZCA+IDApIHsKICAg
        ICAgdmFyIGNoYW5nZWRWaWV3cyA9IHZpZXdzLnNsaWNlKHN0YXJ0LCBzdGFy
        dCthZGRlZCk7CiAgICAgIHRoaXMuaW5pdGlhbGl6ZVZpZXdzKGNoYW5nZWRW
        aWV3cywgdGhpcywgZ2V0KHRoaXMsICd0ZW1wbGF0ZURhdGEnKSk7CiAgICAg
        IHRoaXMuY3VycmVudFN0YXRlLmNoaWxkVmlld3NEaWRDaGFuZ2UodGhpcywg
        dmlld3MsIHN0YXJ0LCBhZGRlZCk7CiAgICB9CiAgICB0aGlzLnByb3BlcnR5
        RGlkQ2hhbmdlKCdjaGlsZFZpZXdzJyk7CiAgfSwKCiAgaW5pdGlhbGl6ZVZp
        ZXdzOiBmdW5jdGlvbih2aWV3cywgcGFyZW50VmlldywgdGVtcGxhdGVEYXRh
        KSB7CiAgICBmb3JFYWNoKHZpZXdzLCBmdW5jdGlvbih2aWV3KSB7CiAgICAg
        IHNldCh2aWV3LCAnX3BhcmVudFZpZXcnLCBwYXJlbnRWaWV3KTsKCiAgICAg
        IGlmICghdmlldy5jb250YWluZXIgJiYgcGFyZW50VmlldykgewogICAgICAg
        IHNldCh2aWV3LCAnY29udGFpbmVyJywgcGFyZW50Vmlldy5jb250YWluZXIp
        OwogICAgICB9CgogICAgICBpZiAoIWdldCh2aWV3LCAndGVtcGxhdGVEYXRh
        JykpIHsKICAgICAgICBzZXQodmlldywgJ3RlbXBsYXRlRGF0YScsIHRlbXBs
        YXRlRGF0YSk7CiAgICAgIH0KICAgIH0pOwogIH0sCgogIGN1cnJlbnRWaWV3
        OiBudWxsLAoKICBfY3VycmVudFZpZXdXaWxsQ2hhbmdlOiBFbWJlci5iZWZv
        cmVPYnNlcnZlcignY3VycmVudFZpZXcnLCBmdW5jdGlvbigpIHsKICAgIHZh
        ciBjdXJyZW50VmlldyA9IGdldCh0aGlzLCAnY3VycmVudFZpZXcnKTsKICAg
        IGlmIChjdXJyZW50VmlldykgewogICAgICBjdXJyZW50Vmlldy5kZXN0cm95
        KCk7CiAgICB9CiAgfSksCgogIF9jdXJyZW50Vmlld0RpZENoYW5nZTogRW1i
        ZXIub2JzZXJ2ZXIoJ2N1cnJlbnRWaWV3JywgZnVuY3Rpb24oKSB7CiAgICB2
        YXIgY3VycmVudFZpZXcgPSBnZXQodGhpcywgJ2N1cnJlbnRWaWV3Jyk7CiAg
        ICBpZiAoY3VycmVudFZpZXcpIHsKICAgICAgRW1iZXIuYXNzZXJ0KCJZb3Ug
        dHJpZWQgdG8gc2V0IGEgY3VycmVudCB2aWV3IHRoYXQgYWxyZWFkeSBoYXMg
        YSBwYXJlbnQuIE1ha2Ugc3VyZSB5b3UgZG9uJ3QgaGF2ZSBtdWx0aXBsZSBv
        dXRsZXRzIGluIHRoZSBzYW1lIHZpZXcuIiwgIWdldChjdXJyZW50Vmlldywg
        J19wYXJlbnRWaWV3JykpOwogICAgICB0aGlzLnB1c2hPYmplY3QoY3VycmVu
        dFZpZXcpOwogICAgfQogIH0pLAoKICBfZW5zdXJlQ2hpbGRyZW5BcmVJbkRP
        TTogZnVuY3Rpb24gKCkgewogICAgdGhpcy5jdXJyZW50U3RhdGUuZW5zdXJl
        Q2hpbGRyZW5BcmVJbkRPTSh0aGlzKTsKICB9Cn0pOwoKRW1iZXIubWVyZ2Uo
        c3RhdGVzLl9kZWZhdWx0LCB7CiAgY2hpbGRWaWV3c1dpbGxDaGFuZ2U6IEVt
        YmVyLkssCiAgY2hpbGRWaWV3c0RpZENoYW5nZTogRW1iZXIuSywKICBlbnN1
        cmVDaGlsZHJlbkFyZUluRE9NOiBFbWJlci5LCn0pOwoKRW1iZXIubWVyZ2Uo
        c3RhdGVzLmluQnVmZmVyLCB7CiAgY2hpbGRWaWV3c0RpZENoYW5nZTogZnVu
        Y3Rpb24ocGFyZW50Vmlldywgdmlld3MsIHN0YXJ0LCBhZGRlZCkgewogICAg
        dGhyb3cgbmV3IEVtYmVyLkVycm9yKCdZb3UgY2Fubm90IG1vZGlmeSBjaGls
        ZCB2aWV3cyB3aGlsZSBpbiB0aGUgaW5CdWZmZXIgc3RhdGUnKTsKICB9Cn0p
        OwoKRW1iZXIubWVyZ2Uoc3RhdGVzLmhhc0VsZW1lbnQsIHsKICBjaGlsZFZp
        ZXdzV2lsbENoYW5nZTogZnVuY3Rpb24odmlldywgdmlld3MsIHN0YXJ0LCBy
        ZW1vdmVkKSB7CiAgICBmb3IgKHZhciBpPXN0YXJ0OyBpPHN0YXJ0K3JlbW92
        ZWQ7IGkrKykgewogICAgICB2aWV3c1tpXS5yZW1vdmUoKTsKICAgIH0KICB9
        LAoKICBjaGlsZFZpZXdzRGlkQ2hhbmdlOiBmdW5jdGlvbih2aWV3LCB2aWV3
        cywgc3RhcnQsIGFkZGVkKSB7CiAgICBFbWJlci5ydW4uc2NoZWR1bGVPbmNl
        KCdyZW5kZXInLCB2aWV3LCAnX2Vuc3VyZUNoaWxkcmVuQXJlSW5ET00nKTsK
        ICB9LAoKICBlbnN1cmVDaGlsZHJlbkFyZUluRE9NOiBmdW5jdGlvbih2aWV3
        KSB7CiAgICB2YXIgY2hpbGRWaWV3cyA9IHZpZXcuX2NoaWxkVmlld3MsIGks
        IGxlbiwgY2hpbGRWaWV3LCBwcmV2aW91cywgYnVmZmVyLCB2aWV3Q29sbGVj
        dGlvbiA9IG5ldyBWaWV3Q29sbGVjdGlvbigpOwoKICAgIGZvciAoaSA9IDAs
        IGxlbiA9IGNoaWxkVmlld3MubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHsKICAg
        ICAgY2hpbGRWaWV3ID0gY2hpbGRWaWV3c1tpXTsKCiAgICAgIGlmICghYnVm
        ZmVyKSB7IGJ1ZmZlciA9IEVtYmVyLlJlbmRlckJ1ZmZlcigpOyBidWZmZXIu
        X2hhc0VsZW1lbnQgPSBmYWxzZTsgfQoKICAgICAgaWYgKGNoaWxkVmlldy5y
        ZW5kZXJUb0J1ZmZlcklmTmVlZGVkKGJ1ZmZlcikpIHsKICAgICAgICB2aWV3
        Q29sbGVjdGlvbi5wdXNoKGNoaWxkVmlldyk7CiAgICAgIH0gZWxzZSBpZiAo
        dmlld0NvbGxlY3Rpb24ubGVuZ3RoKSB7CiAgICAgICAgaW5zZXJ0Vmlld0Nv
        bGxlY3Rpb24odmlldywgdmlld0NvbGxlY3Rpb24sIHByZXZpb3VzLCBidWZm
        ZXIpOwogICAgICAgIGJ1ZmZlciA9IG51bGw7CiAgICAgICAgcHJldmlvdXMg
        PSBjaGlsZFZpZXc7CiAgICAgICAgdmlld0NvbGxlY3Rpb24uY2xlYXIoKTsK
        ICAgICAgfSBlbHNlIHsKICAgICAgICBwcmV2aW91cyA9IGNoaWxkVmlldzsK
        ICAgICAgfQogICAgfQoKICAgIGlmICh2aWV3Q29sbGVjdGlvbi5sZW5ndGgp
        IHsKICAgICAgaW5zZXJ0Vmlld0NvbGxlY3Rpb24odmlldywgdmlld0NvbGxl
        Y3Rpb24sIHByZXZpb3VzLCBidWZmZXIpOwogICAgfQogIH0KfSk7CgpmdW5j
        dGlvbiBpbnNlcnRWaWV3Q29sbGVjdGlvbih2aWV3LCB2aWV3Q29sbGVjdGlv
        biwgcHJldmlvdXMsIGJ1ZmZlcikgewogIHZpZXdDb2xsZWN0aW9uLnRyaWdn
        ZXJSZWN1cnNpdmVseSgnd2lsbEluc2VydEVsZW1lbnQnKTsKCiAgaWYgKHBy
        ZXZpb3VzKSB7CiAgICBwcmV2aW91cy5kb21NYW5hZ2VyLmFmdGVyKHByZXZp
        b3VzLCBidWZmZXIuc3RyaW5nKCkpOwogIH0gZWxzZSB7CiAgICB2aWV3LmRv
        bU1hbmFnZXIucHJlcGVuZCh2aWV3LCBidWZmZXIuc3RyaW5nKCkpOwogIH0K
        CiAgdmlld0NvbGxlY3Rpb24uZm9yRWFjaChmdW5jdGlvbih2KSB7CiAgICB2
        LnRyYW5zaXRpb25UbygnaW5ET00nKTsKICAgIHYucHJvcGVydHlEaWRDaGFu
        Z2UoJ2VsZW1lbnQnKTsKICAgIHYudHJpZ2dlclJlY3Vyc2l2ZWx5KCdkaWRJ
        bnNlcnRFbGVtZW50Jyk7CiAgfSk7Cn0KCgp9KSgpOwoKCgooZnVuY3Rpb24o
        KSB7Ci8qKgpAbW9kdWxlIGVtYmVyCkBzdWJtb2R1bGUgZW1iZXItdmlld3MK
        Ki8KCnZhciBnZXQgPSBFbWJlci5nZXQsIHNldCA9IEVtYmVyLnNldCwgZm10
        ID0gRW1iZXIuU3RyaW5nLmZtdDsKCi8qKgogIGBFbWJlci5Db2xsZWN0aW9u
        Vmlld2AgaXMgYW4gYEVtYmVyLlZpZXdgIGRlc2NlbmRlbnQgcmVzcG9uc2li
        bGUgZm9yIG1hbmFnaW5nCiAgYSBjb2xsZWN0aW9uIChhbiBhcnJheSBvciBh
        cnJheS1saWtlIG9iamVjdCkgYnkgbWFpbnRhaW5pbmcgYSBjaGlsZCB2aWV3
        IG9iamVjdAogIGFuZCBhc3NvY2lhdGVkIERPTSByZXByZXNlbnRhdGlvbiBm
        b3IgZWFjaCBpdGVtIGluIHRoZSBhcnJheSBhbmQgZW5zdXJpbmcKICB0aGF0
        IGNoaWxkIHZpZXdzIGFuZCB0aGVpciBhc3NvY2lhdGVkIHJlbmRlcmVkIEhU
        TUwgYXJlIHVwZGF0ZWQgd2hlbiBpdGVtcyBpbgogIHRoZSBhcnJheSBhcmUg
        YWRkZWQsIHJlbW92ZWQsIG9yIHJlcGxhY2VkLgoKICAjIyBTZXR0aW5nIGNv
        bnRlbnQKCiAgVGhlIG1hbmFnZWQgY29sbGVjdGlvbiBvZiBvYmplY3RzIGlz
        IHJlZmVyZW5jZWQgYXMgdGhlIGBFbWJlci5Db2xsZWN0aW9uVmlld2AKICBp
        bnN0YW5jZSdzIGBjb250ZW50YCBwcm9wZXJ0eS4KCiAgYGBgamF2YXNjcmlw
        dAogIHNvbWVJdGVtc1ZpZXcgPSBFbWJlci5Db2xsZWN0aW9uVmlldy5jcmVh
        dGUoewogICAgY29udGVudDogWydBJywgJ0InLCdDJ10KICB9KQogIGBgYAoK
        ICBUaGUgdmlldyBmb3IgZWFjaCBpdGVtIGluIHRoZSBjb2xsZWN0aW9uIHdp
        bGwgaGF2ZSBpdHMgYGNvbnRlbnRgIHByb3BlcnR5IHNldAogIHRvIHRoZSBp
        dGVtLgoKICAjIyBTcGVjaWZ5aW5nIGl0ZW1WaWV3Q2xhc3MKCiAgQnkgZGVm
        YXVsdCB0aGUgdmlldyBjbGFzcyBmb3IgZWFjaCBpdGVtIGluIHRoZSBtYW5h
        Z2VkIGNvbGxlY3Rpb24gd2lsbCBiZSBhbgogIGluc3RhbmNlIG9mIGBFbWJl
        ci5WaWV3YC4gWW91IGNhbiBzdXBwbHkgYSBkaWZmZXJlbnQgY2xhc3MgYnkg
        c2V0dGluZyB0aGUKICBgQ29sbGVjdGlvblZpZXdgJ3MgYGl0ZW1WaWV3Q2xh
        c3NgIHByb3BlcnR5LgoKICBHaXZlbiBhbiBlbXB0eSBgPGJvZHk+YCBhbmQg
        dGhlIGZvbGxvd2luZyBjb2RlOgoKICBgYGBqYXZhc2NyaXB0CiAgc29tZUl0
        ZW1zVmlldyA9IEVtYmVyLkNvbGxlY3Rpb25WaWV3LmNyZWF0ZSh7CiAgICBj
        bGFzc05hbWVzOiBbJ2EtY29sbGVjdGlvbiddLAogICAgY29udGVudDogWydB
        JywnQicsJ0MnXSwKICAgIGl0ZW1WaWV3Q2xhc3M6IEVtYmVyLlZpZXcuZXh0
        ZW5kKHsKICAgICAgdGVtcGxhdGU6IEVtYmVyLkhhbmRsZWJhcnMuY29tcGls
        ZSgidGhlIGxldHRlcjoge3t2aWV3LmNvbnRlbnR9fSIpCiAgICB9KQogIH0p
        OwoKICBzb21lSXRlbXNWaWV3LmFwcGVuZFRvKCdib2R5Jyk7CiAgYGBgCgog
        IFdpbGwgcmVzdWx0IGluIHRoZSBmb2xsb3dpbmcgSFRNTCBzdHJ1Y3R1cmUK
        CiAgYGBgaHRtbAogIDxkaXYgY2xhc3M9ImVtYmVyLXZpZXcgYS1jb2xsZWN0
        aW9uIj4KICAgIDxkaXYgY2xhc3M9ImVtYmVyLXZpZXciPnRoZSBsZXR0ZXI6
        IEE8L2Rpdj4KICAgIDxkaXYgY2xhc3M9ImVtYmVyLXZpZXciPnRoZSBsZXR0
        ZXI6IEI8L2Rpdj4KICAgIDxkaXYgY2xhc3M9ImVtYmVyLXZpZXciPnRoZSBs
        ZXR0ZXI6IEM8L2Rpdj4KICA8L2Rpdj4KICBgYGAKCiAgIyMgQXV0b21hdGlj
        IG1hdGNoaW5nIG9mIHBhcmVudC9jaGlsZCB0YWdOYW1lcwoKICBTZXR0aW5n
        IHRoZSBgdGFnTmFtZWAgcHJvcGVydHkgb2YgYSBgQ29sbGVjdGlvblZpZXdg
        IHRvIGFueSBvZgogICJ1bCIsICJvbCIsICJ0YWJsZSIsICJ0aGVhZCIsICJ0
        Ym9keSIsICJ0Zm9vdCIsICJ0ciIsIG9yICJzZWxlY3QiIHdpbGwgcmVzdWx0
        CiAgaW4gdGhlIGl0ZW0gdmlld3MgcmVjZWl2aW5nIGFuIGFwcHJvcHJpYXRl
        bHkgbWF0Y2hlZCBgdGFnTmFtZWAgcHJvcGVydHkuCgogIEdpdmVuIGFuIGVt
        cHR5IGA8Ym9keT5gIGFuZCB0aGUgZm9sbG93aW5nIGNvZGU6CgogIGBgYGph
        dmFzY3JpcHQKICBhblVub3JkZXJlZExpc3RWaWV3ID0gRW1iZXIuQ29sbGVj
        dGlvblZpZXcuY3JlYXRlKHsKICAgIHRhZ05hbWU6ICd1bCcsCiAgICBjb250
        ZW50OiBbJ0EnLCdCJywnQyddLAogICAgaXRlbVZpZXdDbGFzczogRW1iZXIu
        Vmlldy5leHRlbmQoewogICAgICB0ZW1wbGF0ZTogRW1iZXIuSGFuZGxlYmFy
        cy5jb21waWxlKCJ0aGUgbGV0dGVyOiB7e3ZpZXcuY29udGVudH19IikKICAg
        IH0pCiAgfSk7CgogIGFuVW5vcmRlcmVkTGlzdFZpZXcuYXBwZW5kVG8oJ2Jv
        ZHknKTsKICBgYGAKCiAgV2lsbCByZXN1bHQgaW4gdGhlIGZvbGxvd2luZyBI
        VE1MIHN0cnVjdHVyZQoKICBgYGBodG1sCiAgPHVsIGNsYXNzPSJlbWJlci12
        aWV3IGEtY29sbGVjdGlvbiI+CiAgICA8bGkgY2xhc3M9ImVtYmVyLXZpZXci
        PnRoZSBsZXR0ZXI6IEE8L2xpPgogICAgPGxpIGNsYXNzPSJlbWJlci12aWV3
        Ij50aGUgbGV0dGVyOiBCPC9saT4KICAgIDxsaSBjbGFzcz0iZW1iZXItdmll
        dyI+dGhlIGxldHRlcjogQzwvbGk+CiAgPC91bD4KICBgYGAKCiAgQWRkaXRp
        b25hbCBgdGFnTmFtZWAgcGFpcnMgY2FuIGJlIHByb3ZpZGVkIGJ5IGFkZGlu
        ZyB0bwogIGBFbWJlci5Db2xsZWN0aW9uVmlldy5DT05UQUlORVJfTUFQIGAK
        CiAgYGBgamF2YXNjcmlwdAogIEVtYmVyLkNvbGxlY3Rpb25WaWV3LkNPTlRB
        SU5FUl9NQVBbJ2FydGljbGUnXSA9ICdzZWN0aW9uJwogIGBgYAoKICAjIyBQ
        cm9ncmFtbWF0aWMgY3JlYXRpb24gb2YgY2hpbGQgdmlld3MKCiAgRm9yIGNh
        c2VzIHdoZXJlIGFkZGl0aW9uYWwgY3VzdG9taXphdGlvbiBiZXlvbmQgdGhl
        IHVzZSBvZiBhIHNpbmdsZQogIGBpdGVtVmlld0NsYXNzYCBvciBgdGFnTmFt
        ZWAgbWF0Y2hpbmcgaXMgcmVxdWlyZWQgQ29sbGVjdGlvblZpZXcncwogIGBj
        cmVhdGVDaGlsZFZpZXdgIG1ldGhvZCBjYW4gYmUgb3ZlcmlkZGVuOgoKICBg
        YGBqYXZhc2NyaXB0CiAgQ3VzdG9tQ29sbGVjdGlvblZpZXcgPSBFbWJlci5D
        b2xsZWN0aW9uVmlldy5leHRlbmQoewogICAgY3JlYXRlQ2hpbGRWaWV3OiBm
        dW5jdGlvbih2aWV3Q2xhc3MsIGF0dHJzKSB7CiAgICAgIGlmIChhdHRycy5j
        b250ZW50LmtpbmQgPT0gJ2FsYnVtJykgewogICAgICAgIHZpZXdDbGFzcyA9
        IEFwcC5BbGJ1bVZpZXc7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdmlld0Ns
        YXNzID0gQXBwLlNvbmdWaWV3OwogICAgICB9CiAgICAgIHJldHVybiB0aGlz
        Ll9zdXBlcih2aWV3Q2xhc3MsIGF0dHJzKTsKICAgIH0KICB9KTsKICBgYGAK
        CiAgIyMgRW1wdHkgVmlldwoKICBZb3UgY2FuIHByb3ZpZGUgYW4gYEVtYmVy
        LlZpZXdgIHN1YmNsYXNzIHRvIHRoZSBgRW1iZXIuQ29sbGVjdGlvblZpZXdg
        CiAgaW5zdGFuY2UgYXMgaXRzIGBlbXB0eVZpZXdgIHByb3BlcnR5LiBJZiB0
        aGUgYGNvbnRlbnRgIHByb3BlcnR5IG9mIGEKICBgQ29sbGVjdGlvblZpZXdg
        IGlzIHNldCB0byBgbnVsbGAgb3IgYW4gZW1wdHkgYXJyYXksIGFuIGluc3Rh
        bmNlIG9mIHRoaXMgdmlldwogIHdpbGwgYmUgdGhlIGBDb2xsZWN0aW9uVmll
        d2BzIG9ubHkgY2hpbGQuCgogIGBgYGphdmFzY3JpcHQKICBhTGlzdFdpdGhO
        b3RoaW5nID0gRW1iZXIuQ29sbGVjdGlvblZpZXcuY3JlYXRlKHsKICAgIGNs
        YXNzTmFtZXM6IFsnbm90aGluZyddCiAgICBjb250ZW50OiBudWxsLAogICAg
        ZW1wdHlWaWV3OiBFbWJlci5WaWV3LmV4dGVuZCh7CiAgICAgIHRlbXBsYXRl
        OiBFbWJlci5IYW5kbGViYXJzLmNvbXBpbGUoIlRoZSBjb2xsZWN0aW9uIGlz
        IGVtcHR5IikKICAgIH0pCiAgfSk7CgogIGFMaXN0V2l0aE5vdGhpbmcuYXBw
        ZW5kVG8oJ2JvZHknKTsKICBgYGAKCiAgV2lsbCByZXN1bHQgaW4gdGhlIGZv
        bGxvd2luZyBIVE1MIHN0cnVjdHVyZQoKICBgYGBodG1sCiAgPGRpdiBjbGFz
        cz0iZW1iZXItdmlldyBub3RoaW5nIj4KICAgIDxkaXYgY2xhc3M9ImVtYmVy
        LXZpZXciPgogICAgICBUaGUgY29sbGVjdGlvbiBpcyBlbXB0eQogICAgPC9k
        aXY+CiAgPC9kaXY+CiAgYGBgCgogICMjIEFkZGluZyBhbmQgUmVtb3Zpbmcg
        aXRlbXMKCiAgVGhlIGBjaGlsZFZpZXdzYCBwcm9wZXJ0eSBvZiBhIGBDb2xs
        ZWN0aW9uVmlld2Agc2hvdWxkIG5vdCBiZSBkaXJlY3RseQogIG1hbmlwdWxh
        dGVkLiBJbnN0ZWFkLCBhZGQsIHJlbW92ZSwgcmVwbGFjZSBpdGVtcyBmcm9t
        IGl0cyBgY29udGVudGAgcHJvcGVydHkuCiAgVGhpcyB3aWxsIHRyaWdnZXIg
        YXBwcm9wcmlhdGUgY2hhbmdlcyB0byBpdHMgcmVuZGVyZWQgSFRNTC4KCgog
        IEBjbGFzcyBDb2xsZWN0aW9uVmlldwogIEBuYW1lc3BhY2UgRW1iZXIKICBA
        ZXh0ZW5kcyBFbWJlci5Db250YWluZXJWaWV3CiAgQHNpbmNlIEVtYmVyIDAu
        OQoqLwpFbWJlci5Db2xsZWN0aW9uVmlldyA9IEVtYmVyLkNvbnRhaW5lclZp
        ZXcuZXh0ZW5kKHsKCiAgLyoqCiAgICBBIGxpc3Qgb2YgaXRlbXMgdG8gYmUg
        ZGlzcGxheWVkIGJ5IHRoZSBgRW1iZXIuQ29sbGVjdGlvblZpZXdgLgoKICAg
        IEBwcm9wZXJ0eSBjb250ZW50CiAgICBAdHlwZSBFbWJlci5BcnJheQogICAg
        QGRlZmF1bHQgbnVsbAogICovCiAgY29udGVudDogbnVsbCwKCiAgLyoqCiAg
        ICBUaGlzIHByb3ZpZGVzIG1ldGFkYXRhIGFib3V0IHdoYXQga2luZCBvZiBl
        bXB0eSB2aWV3IGNsYXNzIHRoaXMKICAgIGNvbGxlY3Rpb24gd291bGQgbGlr
        ZSBpZiBpdCBpcyBiZWluZyBpbnN0YW50aWF0ZWQgZnJvbSBhbm90aGVyCiAg
        ICBzeXN0ZW0gKGxpa2UgSGFuZGxlYmFycykKCiAgICBAcHJpdmF0ZQogICAg
        QHByb3BlcnR5IGVtcHR5Vmlld0NsYXNzCiAgKi8KICBlbXB0eVZpZXdDbGFz
        czogRW1iZXIuVmlldywKCiAgLyoqCiAgICBBbiBvcHRpb25hbCB2aWV3IHRv
        IGRpc3BsYXkgaWYgY29udGVudCBpcyBzZXQgdG8gYW4gZW1wdHkgYXJyYXku
        CgogICAgQHByb3BlcnR5IGVtcHR5VmlldwogICAgQHR5cGUgRW1iZXIuVmll
        dwogICAgQGRlZmF1bHQgbnVsbAogICovCiAgZW1wdHlWaWV3OiBudWxsLAoK
        ICAvKioKICAgIEBwcm9wZXJ0eSBpdGVtVmlld0NsYXNzCiAgICBAdHlwZSBF
        bWJlci5WaWV3CiAgICBAZGVmYXVsdCBFbWJlci5WaWV3CiAgKi8KICBpdGVt
        Vmlld0NsYXNzOiBFbWJlci5WaWV3LAoKICAvKioKICAgIFNldHVwIGEgQ29s
        bGVjdGlvblZpZXcKCiAgICBAbWV0aG9kIGluaXQKICAqLwogIGluaXQ6IGZ1
        bmN0aW9uKCkgewogICAgdmFyIHJldCA9IHRoaXMuX3N1cGVyKCk7CiAgICB0
        aGlzLl9jb250ZW50RGlkQ2hhbmdlKCk7CiAgICByZXR1cm4gcmV0OwogIH0s
        CgogIC8qKgogICAgSW52b2tlZCB3aGVuIHRoZSBjb250ZW50IHByb3BlcnR5
        IGlzIGFib3V0IHRvIGNoYW5nZS4gTm90aWZpZXMgb2JzZXJ2ZXJzIHRoYXQg
        dGhlCiAgICBlbnRpcmUgYXJyYXkgY29udGVudCB3aWxsIGNoYW5nZS4KCiAg
        ICBAcHJpdmF0ZQogICAgQG1ldGhvZCBfY29udGVudFdpbGxDaGFuZ2UKICAq
        LwogIF9jb250ZW50V2lsbENoYW5nZTogRW1iZXIuYmVmb3JlT2JzZXJ2ZXIo
        J2NvbnRlbnQnLCBmdW5jdGlvbigpIHsKICAgIHZhciBjb250ZW50ID0gdGhp
        cy5nZXQoJ2NvbnRlbnQnKTsKCiAgICBpZiAoY29udGVudCkgeyBjb250ZW50
        LnJlbW92ZUFycmF5T2JzZXJ2ZXIodGhpcyk7IH0KICAgIHZhciBsZW4gPSBj
        b250ZW50ID8gZ2V0KGNvbnRlbnQsICdsZW5ndGgnKSA6IDA7CiAgICB0aGlz
        LmFycmF5V2lsbENoYW5nZShjb250ZW50LCAwLCBsZW4pOwogIH0pLAoKICAv
        KioKICAgIENoZWNrIHRvIG1ha2Ugc3VyZSB0aGF0IHRoZSBjb250ZW50IGhh
        cyBjaGFuZ2VkLCBhbmQgaWYgc28sCiAgICB1cGRhdGUgdGhlIGNoaWxkcmVu
        IGRpcmVjdGx5LiBUaGlzIGlzIGFsd2F5cyBzY2hlZHVsZWQKICAgIGFzeW5j
        aHJvbm91c2x5LCB0byBhbGxvdyB0aGUgZWxlbWVudCB0byBiZSBjcmVhdGVk
        IGJlZm9yZQogICAgYmluZGluZ3MgaGF2ZSBzeW5jaHJvbml6ZWQgYW5kIHZp
        Y2UgdmVyc2EuCgogICAgQHByaXZhdGUKICAgIEBtZXRob2QgX2NvbnRlbnRE
        aWRDaGFuZ2UKICAqLwogIF9jb250ZW50RGlkQ2hhbmdlOiBFbWJlci5vYnNl
        cnZlcignY29udGVudCcsIGZ1bmN0aW9uKCkgewogICAgdmFyIGNvbnRlbnQg
        PSBnZXQodGhpcywgJ2NvbnRlbnQnKTsKCiAgICBpZiAoY29udGVudCkgewog
        ICAgICB0aGlzLl9hc3NlcnRBcnJheUxpa2UoY29udGVudCk7CiAgICAgIGNv
        bnRlbnQuYWRkQXJyYXlPYnNlcnZlcih0aGlzKTsKICAgIH0KCiAgICB2YXIg
        bGVuID0gY29udGVudCA/IGdldChjb250ZW50LCAnbGVuZ3RoJykgOiAwOwog
        ICAgdGhpcy5hcnJheURpZENoYW5nZShjb250ZW50LCAwLCBudWxsLCBsZW4p
        OwogIH0pLAoKICAvKioKICAgIEVuc3VyZSB0aGF0IHRoZSBjb250ZW50IGlt
        cGxlbWVudHMgRW1iZXIuQXJyYXkKCiAgICBAcHJpdmF0ZQogICAgQG1ldGhv
        ZCBfYXNzZXJ0QXJyYXlMaWtlCiAgKi8KICBfYXNzZXJ0QXJyYXlMaWtlOiBm
        dW5jdGlvbihjb250ZW50KSB7CiAgICBFbWJlci5hc3NlcnQoZm10KCJhbiBF
        bWJlci5Db2xsZWN0aW9uVmlldydzIGNvbnRlbnQgbXVzdCBpbXBsZW1lbnQg
        RW1iZXIuQXJyYXkuIFlvdSBwYXNzZWQgJUAiLCBbY29udGVudF0pLCBFbWJl
        ci5BcnJheS5kZXRlY3QoY29udGVudCkpOwogIH0sCgogIC8qKgogICAgUmVt
        b3ZlcyB0aGUgY29udGVudCBhbmQgY29udGVudCBvYnNlcnZlcnMuCgogICAg
        QG1ldGhvZCBkZXN0cm95CiAgKi8KICBkZXN0cm95OiBmdW5jdGlvbigpIHsK
        ICAgIGlmICghdGhpcy5fc3VwZXIoKSkgeyByZXR1cm47IH0KCiAgICB2YXIg
        Y29udGVudCA9IGdldCh0aGlzLCAnY29udGVudCcpOwogICAgaWYgKGNvbnRl
        bnQpIHsgY29udGVudC5yZW1vdmVBcnJheU9ic2VydmVyKHRoaXMpOyB9Cgog
        ICAgaWYgKHRoaXMuX2NyZWF0ZWRFbXB0eVZpZXcpIHsKICAgICAgdGhpcy5f
        Y3JlYXRlZEVtcHR5Vmlldy5kZXN0cm95KCk7CiAgICB9CgogICAgcmV0dXJu
        IHRoaXM7CiAgfSwKCiAgLyoqCiAgICBDYWxsZWQgd2hlbiBhIG11dGF0aW9u
        IHRvIHRoZSB1bmRlcmx5aW5nIGNvbnRlbnQgYXJyYXkgd2lsbCBvY2N1ci4K
        CiAgICBUaGlzIG1ldGhvZCB3aWxsIHJlbW92ZSBhbnkgdmlld3MgdGhhdCBh
        cmUgbm8gbG9uZ2VyIGluIHRoZSB1bmRlcmx5aW5nCiAgICBjb250ZW50IGFy
        cmF5LgoKICAgIEludm9rZXMgd2hlbmV2ZXIgdGhlIGNvbnRlbnQgYXJyYXkg
        aXRzZWxmIHdpbGwgY2hhbmdlLgoKICAgIEBtZXRob2QgYXJyYXlXaWxsQ2hh
        bmdlCiAgICBAcGFyYW0ge0FycmF5fSBjb250ZW50IHRoZSBtYW5hZ2VkIGNv
        bGxlY3Rpb24gb2Ygb2JqZWN0cwogICAgQHBhcmFtIHtOdW1iZXJ9IHN0YXJ0
        IHRoZSBpbmRleCBhdCB3aGljaCB0aGUgY2hhbmdlcyB3aWxsIG9jY3Vycgog
        ICAgQHBhcmFtIHtOdW1iZXJ9IHJlbW92ZWQgbnVtYmVyIG9mIG9iamVjdCB0
        byBiZSByZW1vdmVkIGZyb20gY29udGVudAogICovCiAgYXJyYXlXaWxsQ2hh
        bmdlOiBmdW5jdGlvbihjb250ZW50LCBzdGFydCwgcmVtb3ZlZENvdW50KSB7
        CiAgICAvLyBJZiB0aGUgY29udGVudHMgd2VyZSBlbXB0eSBiZWZvcmUgYW5k
        IHRoaXMgdGVtcGxhdGUgY29sbGVjdGlvbiBoYXMgYW4KICAgIC8vIGVtcHR5
        IHZpZXcgcmVtb3ZlIGl0IG5vdy4KICAgIHZhciBlbXB0eVZpZXcgPSBnZXQo
        dGhpcywgJ2VtcHR5VmlldycpOwogICAgaWYgKGVtcHR5VmlldyAmJiBlbXB0
        eVZpZXcgaW5zdGFuY2VvZiBFbWJlci5WaWV3KSB7CiAgICAgIGVtcHR5Vmll
        dy5yZW1vdmVGcm9tUGFyZW50KCk7CiAgICB9CgogICAgLy8gTG9vcCB0aHJv
        dWdoIGNoaWxkIHZpZXdzIHRoYXQgY29ycmVzcG9uZCB3aXRoIHRoZSByZW1v
        dmVkIGl0ZW1zLgogICAgLy8gTm90ZSB0aGF0IHdlIGxvb3AgZnJvbSB0aGUg
        ZW5kIG9mIHRoZSBhcnJheSB0byB0aGUgYmVnaW5uaW5nIGJlY2F1c2UKICAg
        IC8vIHdlIGFyZSBtdXRhdGluZyBpdCBhcyB3ZSBnby4KICAgIHZhciBjaGls
        ZFZpZXdzID0gdGhpcy5fY2hpbGRWaWV3cywgY2hpbGRWaWV3LCBpZHgsIGxl
        bjsKCiAgICBsZW4gPSB0aGlzLl9jaGlsZFZpZXdzLmxlbmd0aDsKCiAgICB2
        YXIgcmVtb3ZpbmdBbGwgPSByZW1vdmVkQ291bnQgPT09IGxlbjsKCiAgICBp
        ZiAocmVtb3ZpbmdBbGwpIHsKICAgICAgdGhpcy5jdXJyZW50U3RhdGUuZW1w
        dHkodGhpcyk7CiAgICAgIHRoaXMuaW52b2tlUmVjdXJzaXZlbHkoZnVuY3Rp
        b24odmlldykgewogICAgICAgIHZpZXcucmVtb3ZlZEZyb21ET00gPSB0cnVl
        OwogICAgICB9LCBmYWxzZSk7CiAgICB9CgogICAgZm9yIChpZHggPSBzdGFy
        dCArIHJlbW92ZWRDb3VudCAtIDE7IGlkeCA+PSBzdGFydDsgaWR4LS0pIHsK
        ICAgICAgY2hpbGRWaWV3ID0gY2hpbGRWaWV3c1tpZHhdOwogICAgICBjaGls
        ZFZpZXcuZGVzdHJveSgpOwogICAgfQogIH0sCgogIC8qKgogICAgQ2FsbGVk
        IHdoZW4gYSBtdXRhdGlvbiB0byB0aGUgdW5kZXJseWluZyBjb250ZW50IGFy
        cmF5IG9jY3Vycy4KCiAgICBUaGlzIG1ldGhvZCB3aWxsIHJlcGxheSB0aGF0
        IG11dGF0aW9uIGFnYWluc3QgdGhlIHZpZXdzIHRoYXQgY29tcG9zZSB0aGUK
        ICAgIGBFbWJlci5Db2xsZWN0aW9uVmlld2AsIGVuc3VyaW5nIHRoYXQgdGhl
        IHZpZXcgcmVmbGVjdHMgdGhlIG1vZGVsLgoKICAgIFRoaXMgYXJyYXkgb2Jz
        ZXJ2ZXIgaXMgYWRkZWQgaW4gYGNvbnRlbnREaWRDaGFuZ2VgLgoKICAgIEBt
        ZXRob2QgYXJyYXlEaWRDaGFuZ2UKICAgIEBwYXJhbSB7QXJyYXl9IGNvbnRl
        bnQgdGhlIG1hbmFnZWQgY29sbGVjdGlvbiBvZiBvYmplY3RzCiAgICBAcGFy
        YW0ge051bWJlcn0gc3RhcnQgdGhlIGluZGV4IGF0IHdoaWNoIHRoZSBjaGFu
        Z2VzIG9jY3VycmVkCiAgICBAcGFyYW0ge051bWJlcn0gcmVtb3ZlZCBudW1i
        ZXIgb2Ygb2JqZWN0IHJlbW92ZWQgZnJvbSBjb250ZW50CiAgICBAcGFyYW0g
        e051bWJlcn0gYWRkZWQgbnVtYmVyIG9mIG9iamVjdCBhZGRlZCB0byBjb250
        ZW50CiAgKi8KICBhcnJheURpZENoYW5nZTogZnVuY3Rpb24oY29udGVudCwg
        c3RhcnQsIHJlbW92ZWQsIGFkZGVkKSB7CiAgICB2YXIgYWRkZWRWaWV3cyA9
        IFtdLCB2aWV3LCBpdGVtLCBpZHgsIGxlbiwgaXRlbVZpZXdDbGFzcywKICAg
        ICAgZW1wdHlWaWV3OwoKICAgIGxlbiA9IGNvbnRlbnQgPyBnZXQoY29udGVu
        dCwgJ2xlbmd0aCcpIDogMDsKCiAgICBpZiAobGVuKSB7CiAgICAgIGl0ZW1W
        aWV3Q2xhc3MgPSBnZXQodGhpcywgJ2l0ZW1WaWV3Q2xhc3MnKTsKCiAgICAg
        IGlmICgnc3RyaW5nJyA9PT0gdHlwZW9mIGl0ZW1WaWV3Q2xhc3MpIHsKICAg
        ICAgICBpdGVtVmlld0NsYXNzID0gZ2V0KGl0ZW1WaWV3Q2xhc3MpIHx8IGl0
        ZW1WaWV3Q2xhc3M7CiAgICAgIH0KCiAgICAgIEVtYmVyLmFzc2VydChmbXQo
        Iml0ZW1WaWV3Q2xhc3MgbXVzdCBiZSBhIHN1YmNsYXNzIG9mIEVtYmVyLlZp
        ZXcsIG5vdCAlQCIsIFtpdGVtVmlld0NsYXNzXSksICdzdHJpbmcnID09PSB0
        eXBlb2YgaXRlbVZpZXdDbGFzcyB8fCBFbWJlci5WaWV3LmRldGVjdChpdGVt
        Vmlld0NsYXNzKSk7CgogICAgICBmb3IgKGlkeCA9IHN0YXJ0OyBpZHggPCBz
        dGFydCthZGRlZDsgaWR4KyspIHsKICAgICAgICBpdGVtID0gY29udGVudC5v
        YmplY3RBdChpZHgpOwoKICAgICAgICB2aWV3ID0gdGhpcy5jcmVhdGVDaGls
        ZFZpZXcoaXRlbVZpZXdDbGFzcywgewogICAgICAgICAgY29udGVudDogaXRl
        bSwKICAgICAgICAgIGNvbnRlbnRJbmRleDogaWR4CiAgICAgICAgfSk7Cgog
        ICAgICAgIGFkZGVkVmlld3MucHVzaCh2aWV3KTsKICAgICAgfQogICAgfSBl
        bHNlIHsKICAgICAgZW1wdHlWaWV3ID0gZ2V0KHRoaXMsICdlbXB0eVZpZXcn
        KTsKCiAgICAgIGlmICghZW1wdHlWaWV3KSB7IHJldHVybjsgfQoKICAgICAg
        aWYgKCdzdHJpbmcnID09PSB0eXBlb2YgZW1wdHlWaWV3KSB7CiAgICAgICAg
        ZW1wdHlWaWV3ID0gZ2V0KGVtcHR5VmlldykgfHwgZW1wdHlWaWV3OwogICAg
        ICB9CgogICAgICBlbXB0eVZpZXcgPSB0aGlzLmNyZWF0ZUNoaWxkVmlldyhl
        bXB0eVZpZXcpOwogICAgICBhZGRlZFZpZXdzLnB1c2goZW1wdHlWaWV3KTsK
        ICAgICAgc2V0KHRoaXMsICdlbXB0eVZpZXcnLCBlbXB0eVZpZXcpOwoKICAg
        ICAgaWYgKEVtYmVyLkNvcmVWaWV3LmRldGVjdChlbXB0eVZpZXcpKSB7CiAg
        ICAgICAgdGhpcy5fY3JlYXRlZEVtcHR5VmlldyA9IGVtcHR5VmlldzsKICAg
        ICAgfQogICAgfQoKICAgIHRoaXMucmVwbGFjZShzdGFydCwgMCwgYWRkZWRW
        aWV3cyk7CiAgfSwKCiAgLyoqCiAgICBJbnN0YW50aWF0ZXMgYSB2aWV3IHRv
        IGJlIGFkZGVkIHRvIHRoZSBjaGlsZFZpZXdzIGFycmF5IGR1cmluZyB2aWV3
        CiAgICBpbml0aWFsaXphdGlvbi4gWW91IGdlbmVyYWxseSB3aWxsIG5vdCBj
        YWxsIHRoaXMgbWV0aG9kIGRpcmVjdGx5IHVubGVzcwogICAgeW91IGFyZSBv
        dmVycmlkaW5nIGBjcmVhdGVDaGlsZFZpZXdzKClgLiBOb3RlIHRoYXQgdGhp
        cyBtZXRob2Qgd2lsbAogICAgYXV0b21hdGljYWxseSBjb25maWd1cmUgdGhl
        IGNvcnJlY3Qgc2V0dGluZ3Mgb24gdGhlIG5ldyB2aWV3IGluc3RhbmNlIHRv
        CiAgICBhY3QgYXMgYSBjaGlsZCBvZiB0aGUgcGFyZW50LgoKICAgIFRoZSB0
        YWcgbmFtZSBmb3IgdGhlIHZpZXcgd2lsbCBiZSBzZXQgdG8gdGhlIHRhZ05h
        bWUgb2YgdGhlIHZpZXdDbGFzcwogICAgcGFzc2VkIGluLgoKICAgIEBtZXRo
        b2QgY3JlYXRlQ2hpbGRWaWV3CiAgICBAcGFyYW0ge0NsYXNzfSB2aWV3Q2xh
        c3MKICAgIEBwYXJhbSB7SGFzaH0gW2F0dHJzXSBBdHRyaWJ1dGVzIHRvIGFk
        ZAogICAgQHJldHVybiB7RW1iZXIuVmlld30gbmV3IGluc3RhbmNlCiAgKi8K
        ICBjcmVhdGVDaGlsZFZpZXc6IGZ1bmN0aW9uKHZpZXcsIGF0dHJzKSB7CiAg
        ICB2aWV3ID0gdGhpcy5fc3VwZXIodmlldywgYXR0cnMpOwoKICAgIHZhciBp
        dGVtVGFnTmFtZSA9IGdldCh2aWV3LCAndGFnTmFtZScpOwoKICAgIGlmIChp
        dGVtVGFnTmFtZSA9PT0gbnVsbCB8fCBpdGVtVGFnTmFtZSA9PT0gdW5kZWZp
        bmVkKSB7CiAgICAgIGl0ZW1UYWdOYW1lID0gRW1iZXIuQ29sbGVjdGlvblZp
        ZXcuQ09OVEFJTkVSX01BUFtnZXQodGhpcywgJ3RhZ05hbWUnKV07CiAgICAg
        IHNldCh2aWV3LCAndGFnTmFtZScsIGl0ZW1UYWdOYW1lKTsKICAgIH0KCiAg
        ICByZXR1cm4gdmlldzsKICB9Cn0pOwoKLyoqCiAgQSBtYXAgb2YgcGFyZW50
        IHRhZ3MgdG8gdGhlaXIgZGVmYXVsdCBjaGlsZCB0YWdzLiBZb3UgY2FuIGFk
        ZAogIGFkZGl0aW9uYWwgcGFyZW50IHRhZ3MgaWYgeW91IHdhbnQgY29sbGVj
        dGlvbiB2aWV3cyB0aGF0IHVzZQogIGEgcGFydGljdWxhciBwYXJlbnQgdGFn
        IHRvIGRlZmF1bHQgdG8gYSBjaGlsZCB0YWcuCgogIEBwcm9wZXJ0eSBDT05U
        QUlORVJfTUFQCiAgQHR5cGUgSGFzaAogIEBzdGF0aWMKICBAZmluYWwKKi8K
        RW1iZXIuQ29sbGVjdGlvblZpZXcuQ09OVEFJTkVSX01BUCA9IHsKICB1bDog
        J2xpJywKICBvbDogJ2xpJywKICB0YWJsZTogJ3RyJywKICB0aGVhZDogJ3Ry
        JywKICB0Ym9keTogJ3RyJywKICB0Zm9vdDogJ3RyJywKICB0cjogJ3RkJywK
        ICBzZWxlY3Q6ICdvcHRpb24nCn07Cgp9KSgpOwoKCgooZnVuY3Rpb24oKSB7
        Ci8qKgogIFRoZSBDb21wb25lbnRUZW1wbGF0ZURlcHJlY2F0aW9uIG1peGlu
        IGlzIHVzZWQgdG8gcHJvdmlkZSBhIHVzZWZ1bAogIGRlcHJlY2F0aW9uIHdh
        cm5pbmcgd2hlbiB1c2luZyBlaXRoZXIgYHRlbXBsYXRlYCBvciBgdGVtcGxh
        dGVOYW1lYCB3aXRoCiAgYSBjb21wb25lbnQuIFRoZSBgdGVtcGxhdGVgIGFu
        ZCBgdGVtcGxhdGVOYW1lYCBwcm9wZXJ0aWVzIHNwZWNpZmllZCBhdAogIGV4
        dGVuZCB0aW1lIGFyZSBtb3ZlZCB0byBgbGF5b3V0YCBhbmQgYGxheW91dE5h
        bWVgIHJlc3BlY3RpdmVseS4KCiAgYEVtYmVyLkNvbXBvbmVudFRlbXBsYXRl
        RGVwcmVjYXRpb25gIGlzIHVzZWQgaW50ZXJuYWxseSBieSBFbWJlciBpbgog
        IGBFbWJlci5Db21wb25lbnRgLgoKICBAY2xhc3MgQ29tcG9uZW50VGVtcGxh
        dGVEZXByZWNhdGlvbgogIEBuYW1lc3BhY2UgRW1iZXIKKi8KRW1iZXIuQ29t
        cG9uZW50VGVtcGxhdGVEZXByZWNhdGlvbiA9IEVtYmVyLk1peGluLmNyZWF0
        ZSh7CiAgLyoqCiAgICBAcHJpdmF0ZQoKICAgIE1vdmVzIGB0ZW1wbGF0ZU5h
        bWVgIHRvIGBsYXlvdXROYW1lYCBhbmQgYHRlbXBsYXRlYCB0byBgbGF5b3V0
        YCBhdCBleHRlbmQKICAgIHRpbWUgaWYgYSBsYXlvdXQgaXMgbm90IGFsc28g
        c3BlY2lmaWVkLgoKICAgIE5vdGUgdGhhdCB0aGlzIGN1cnJlbnRseSBtb2Rp
        ZmllcyB0aGUgbWl4aW4gdGhlbXNlbHZlcywgd2hpY2ggaXMgdGVjaG5pY2Fs
        bHkKICAgIGR1YmlvdXMgYnV0IGlzIHByYWN0aWNhbGx5IG9mIGxpdHRsZSBj
        b25zZXF1ZW5jZS4gVGhpcyBtYXkgY2hhbmdlIGluIHRoZQogICAgZnV0dXJl
        LgoKICAgIEBtZXRob2Qgd2lsbE1lcmdlTWl4aW4KICAqLwogIHdpbGxNZXJn
        ZU1peGluOiBmdW5jdGlvbihwcm9wcykgewogICAgLy8gbXVzdCBjYWxsIF9z
        dXBlciBoZXJlIHRvIGVuc3VyZSB0aGF0IHRoZSBBY3Rpb25IYW5kbGVyCiAg
        ICAvLyBtaXhpbiBpcyBzZXR1cCBwcm9wZXJseSAobW92ZXMgYWN0aW9ucyAt
        PiBfYWN0aW9ucykKICAgIC8vCiAgICAvLyBDYWxsaW5nIHN1cGVyIGlzIG9u
        bHkgT0sgaGVyZSBzaW5jZSB3ZSBLTk9XIHRoYXQKICAgIC8vIHRoZXJlIGlz
        IGFub3RoZXIgTWl4aW4gbG9hZGVkIGZpcnN0LgogICAgdGhpcy5fc3VwZXIu
        YXBwbHkodGhpcywgYXJndW1lbnRzKTsKCiAgICB2YXIgZGVwcmVjYXRlZFBy
        b3BlcnR5LCByZXBsYWNlbWVudFByb3BlcnR5LAogICAgICAgIGxheW91dFNw
        ZWNpZmllZCA9IChwcm9wcy5sYXlvdXROYW1lIHx8IHByb3BzLmxheW91dCk7
        CgogICAgaWYgKHByb3BzLnRlbXBsYXRlTmFtZSAmJiAhbGF5b3V0U3BlY2lm
        aWVkKSB7CiAgICAgIGRlcHJlY2F0ZWRQcm9wZXJ0eSA9ICd0ZW1wbGF0ZU5h
        bWUnOwogICAgICByZXBsYWNlbWVudFByb3BlcnR5ID0gJ2xheW91dE5hbWUn
        OwoKICAgICAgcHJvcHMubGF5b3V0TmFtZSA9IHByb3BzLnRlbXBsYXRlTmFt
        ZTsKICAgICAgZGVsZXRlIHByb3BzWyd0ZW1wbGF0ZU5hbWUnXTsKICAgIH0K
        CiAgICBpZiAocHJvcHMudGVtcGxhdGUgJiYgIWxheW91dFNwZWNpZmllZCkg
        ewogICAgICBkZXByZWNhdGVkUHJvcGVydHkgPSAndGVtcGxhdGUnOwogICAg
        ICByZXBsYWNlbWVudFByb3BlcnR5ID0gJ2xheW91dCc7CgogICAgICBwcm9w
        cy5sYXlvdXQgPSBwcm9wcy50ZW1wbGF0ZTsKICAgICAgZGVsZXRlIHByb3Bz
        Wyd0ZW1wbGF0ZSddOwogICAgfQoKICAgIGlmIChkZXByZWNhdGVkUHJvcGVy
        dHkpIHsKICAgICAgRW1iZXIuZGVwcmVjYXRlKCdEbyBub3Qgc3BlY2lmeSAn
        ICsgZGVwcmVjYXRlZFByb3BlcnR5ICsgJyBvbiBhIENvbXBvbmVudCwgdXNl
        ICcgKyByZXBsYWNlbWVudFByb3BlcnR5ICsgJyBpbnN0ZWFkLicsIGZhbHNl
        KTsKICAgIH0KICB9Cn0pOwoKCn0pKCk7CgoKCihmdW5jdGlvbigpIHsKdmFy
        IGdldCA9IEVtYmVyLmdldCwgc2V0ID0gRW1iZXIuc2V0LCBpc05vbmUgPSBF
        bWJlci5pc05vbmUsCiAgICBhX3NsaWNlID0gQXJyYXkucHJvdG90eXBlLnNs
        aWNlOwoKCi8qKgpAbW9kdWxlIGVtYmVyCkBzdWJtb2R1bGUgZW1iZXItdmll
        d3MKKi8KCi8qKgogIEFuIGBFbWJlci5Db21wb25lbnRgIGlzIGEgdmlldyB0
        aGF0IGlzIGNvbXBsZXRlbHkKICBpc29sYXRlZC4gUHJvcGVydHkgYWNjZXNz
        IGluIGl0cyB0ZW1wbGF0ZXMgZ28KICB0byB0aGUgdmlldyBvYmplY3QgYW5k
        IGFjdGlvbnMgYXJlIHRhcmdldGVkIGF0CiAgdGhlIHZpZXcgb2JqZWN0LiBU
        aGVyZSBpcyBubyBhY2Nlc3MgdG8gdGhlCiAgc3Vycm91bmRpbmcgY29udGV4
        dCBvciBvdXRlciBjb250cm9sbGVyOyBhbGwKICBjb250ZXh0dWFsIGluZm9y
        bWF0aW9uIG11c3QgYmUgcGFzc2VkIGluLgoKICBUaGUgZWFzaWVzdCB3YXkg
        dG8gY3JlYXRlIGFuIGBFbWJlci5Db21wb25lbnRgIGlzIHZpYQogIGEgdGVt
        cGxhdGUuIElmIHlvdSBuYW1lIGEgdGVtcGxhdGUKICBgY29tcG9uZW50cy9t
        eS1mb29gLCB5b3Ugd2lsbCBiZSBhYmxlIHRvIHVzZQogIGB7e215LWZvb319
        YCBpbiBvdGhlciB0ZW1wbGF0ZXMsIHdoaWNoIHdpbGwgbWFrZQogIGFuIGlu
        c3RhbmNlIG9mIHRoZSBpc29sYXRlZCBjb21wb25lbnQuCgogIGBgYGhhbmRs
        ZWJhcnMKICB7e2FwcC1wcm9maWxlIHBlcnNvbj1jdXJyZW50VXNlcn19CiAg
        YGBgCgogIGBgYGhhbmRsZWJhcnMKICA8IS0tIGFwcC1wcm9maWxlIHRlbXBs
        YXRlIC0tPgogIDxoMT57e3BlcnNvbi50aXRsZX19PC9oMT4KICA8aW1nIHt7
        YmluZC1hdHRyIHNyYz1wZXJzb24uYXZhdGFyfX0+CiAgPHAgY2xhc3M9J3Np
        Z25hdHVyZSc+e3twZXJzb24uc2lnbmF0dXJlfX08L3A+CiAgYGBgCgogIFlv
        dSBjYW4gdXNlIGB5aWVsZGAgaW5zaWRlIGEgdGVtcGxhdGUgdG8KICBpbmNs
        dWRlIHRoZSAqKmNvbnRlbnRzKiogb2YgYW55IGJsb2NrIGF0dGFjaGVkIHRv
        CiAgdGhlIGNvbXBvbmVudC4gVGhlIGJsb2NrIHdpbGwgYmUgZXhlY3V0ZWQg
        aW4gdGhlCiAgY29udGV4dCBvZiB0aGUgc3Vycm91bmRpbmcgY29udGV4dCBv
        ciBvdXRlciBjb250cm9sbGVyOgoKICBgYGBoYW5kbGViYXJzCiAge3sjYXBw
        LXByb2ZpbGUgcGVyc29uPWN1cnJlbnRVc2VyfX0KICAgIDxwPkFkbWluIG1v
        ZGU8L3A+CiAgICB7eyEgRXhlY3V0ZWQgaW4gdGhlIGNvbnRyb2xsZXIncyBj
        b250ZXh0LiB9fQogIHt7L2FwcC1wcm9maWxlfX0KICBgYGAKCiAgYGBgaGFu
        ZGxlYmFycwogIDwhLS0gYXBwLXByb2ZpbGUgdGVtcGxhdGUgLS0+CiAgPGgx
        Pnt7cGVyc29uLnRpdGxlfX08L2gxPgogIHt7ISBFeGVjdXRlZCBpbiB0aGUg
        Y29tcG9uZW50cyBjb250ZXh0LiB9fQogIHt7eWllbGR9fSB7eyEgYmxvY2sg
        Y29udGVudHMgfX0KICBgYGAKCiAgSWYgeW91IHdhbnQgdG8gY3VzdG9taXpl
        IHRoZSBjb21wb25lbnQsIGluIG9yZGVyIHRvCiAgaGFuZGxlIGV2ZW50cyBv
        ciBhY3Rpb25zLCB5b3UgaW1wbGVtZW50IGEgc3ViY2xhc3MKICBvZiBgRW1i
        ZXIuQ29tcG9uZW50YCBuYW1lZCBhZnRlciB0aGUgbmFtZSBvZiB0aGUKICBj
        b21wb25lbnQuIE5vdGUgdGhhdCBgQ29tcG9uZW50YCBuZWVkcyB0byBiZSBh
        cHBlbmRlZCB0byB0aGUgbmFtZSBvZgogIHlvdXIgc3ViY2xhc3MgbGlrZSBg
        QXBwUHJvZmlsZUNvbXBvbmVudGAuCgogIEZvciBleGFtcGxlLCB5b3UgY291
        bGQgaW1wbGVtZW50IHRoZSBhY3Rpb24KICBgaGVsbG9gIGZvciB0aGUgYGFw
        cC1wcm9maWxlYCBjb21wb25lbnQ6CgogIGBgYGphdmFzY3JpcHQKICBBcHAu
        QXBwUHJvZmlsZUNvbXBvbmVudCA9IEVtYmVyLkNvbXBvbmVudC5leHRlbmQo
        ewogICAgYWN0aW9uczogewogICAgICBoZWxsbzogZnVuY3Rpb24obmFtZSkg
        ewogICAgICAgIGNvbnNvbGUubG9nKCJIZWxsbyIsIG5hbWUpOwogICAgICB9
        CiAgICB9CiAgfSk7CiAgYGBgCgogIEFuZCB0aGVuIHVzZSBpdCBpbiB0aGUg
        Y29tcG9uZW50J3MgdGVtcGxhdGU6CgogIGBgYGhhbmRsZWJhcnMKICA8IS0t
        IGFwcC1wcm9maWxlIHRlbXBsYXRlIC0tPgoKICA8aDE+e3twZXJzb24udGl0
        bGV9fTwvaDE+CiAge3t5aWVsZH19IDwhLS0gYmxvY2sgY29udGVudHMgLS0+
        CgogIDxidXR0b24ge3thY3Rpb24gJ2hlbGxvJyBwZXJzb24ubmFtZX19Pgog
        ICAgU2F5IEhlbGxvIHRvIHt7cGVyc29uLm5hbWV9fQogIDwvYnV0dG9uPgog
        IGBgYAoKICBDb21wb25lbnRzIG11c3QgaGF2ZSBhIGAtYCBpbiB0aGVpciBu
        YW1lIHRvIGF2b2lkCiAgY29uZmxpY3RzIHdpdGggYnVpbHQtaW4gY29udHJv
        bHMgdGhhdCB3cmFwIEhUTUwKICBlbGVtZW50cy4gVGhpcyBpcyBjb25zaXN0
        ZW50IHdpdGggdGhlIHNhbWUKICByZXF1aXJlbWVudCBpbiB3ZWIgY29tcG9u
        ZW50cy4KCiAgQGNsYXNzIENvbXBvbmVudAogIEBuYW1lc3BhY2UgRW1iZXIK
        ICBAZXh0ZW5kcyBFbWJlci5WaWV3CiovCkVtYmVyLkNvbXBvbmVudCA9IEVt
        YmVyLlZpZXcuZXh0ZW5kKEVtYmVyLlRhcmdldEFjdGlvblN1cHBvcnQsIEVt
        YmVyLkNvbXBvbmVudFRlbXBsYXRlRGVwcmVjYXRpb24sIHsKICBpbml0OiBm
        dW5jdGlvbigpIHsKICAgIHRoaXMuX3N1cGVyKCk7CiAgICBzZXQodGhpcywg
        J2NvbnRleHQnLCB0aGlzKTsKICAgIHNldCh0aGlzLCAnY29udHJvbGxlcics
        IHRoaXMpOwogIH0sCgogIGRlZmF1bHRMYXlvdXQ6IGZ1bmN0aW9uKGNvbnRl
        eHQsIG9wdGlvbnMpewogICAgRW1iZXIuSGFuZGxlYmFycy5oZWxwZXJzWyd5
        aWVsZCddLmNhbGwoY29udGV4dCwgb3B0aW9ucyk7CiAgfSwKCiAgLyoqCiAg
        QSBjb21wb25lbnRzIHRlbXBsYXRlIHByb3BlcnR5IGlzIHNldCBieSBwYXNz
        aW5nIGEgYmxvY2sKICBkdXJpbmcgaXRzIGludm9jYXRpb24uIEl0IGlzIGV4
        ZWN1dGVkIHdpdGhpbiB0aGUgcGFyZW50IGNvbnRleHQuCgogIEV4YW1wbGU6
        CgogIGBgYGhhbmRsZWJhcnMKICB7eyNteS1jb21wb25lbnR9fQogICAgLy8g
        c29tZXRoaW5nIHRoYXQgaXMgcnVuIGluIHRoZSBjb250ZXh0CiAgICAvLyBv
        ZiB0aGUgcGFyZW50IGNvbnRleHQKICB7ey9teS1jb21wb25lbnR9fQogIGBg
        YAoKICBTcGVjaWZ5aW5nIGEgdGVtcGxhdGUgZGlyZWN0bHkgdG8gYSBjb21w
        b25lbnQgaXMgZGVwcmVjYXRlZCB3aXRob3V0CiAgYWxzbyBzcGVjaWZ5aW5n
        IHRoZSBsYXlvdXQgcHJvcGVydHkuCgogIEBkZXByZWNhdGVkCiAgQHByb3Bl
        cnR5IHRlbXBsYXRlCiAgKi8KICB0ZW1wbGF0ZTogRW1iZXIuY29tcHV0ZWQo
        ZnVuY3Rpb24oa2V5LCB2YWx1ZSkgewogICAgaWYgKHZhbHVlICE9PSB1bmRl
        ZmluZWQpIHsgcmV0dXJuIHZhbHVlOyB9CgogICAgdmFyIHRlbXBsYXRlTmFt
        ZSA9IGdldCh0aGlzLCAndGVtcGxhdGVOYW1lJyksCiAgICAgICAgdGVtcGxh
        dGUgPSB0aGlzLnRlbXBsYXRlRm9yTmFtZSh0ZW1wbGF0ZU5hbWUsICd0ZW1w
        bGF0ZScpOwoKICAgIEVtYmVyLmFzc2VydCgiWW91IHNwZWNpZmllZCB0aGUg
        dGVtcGxhdGVOYW1lICIgKyB0ZW1wbGF0ZU5hbWUgKyAiIGZvciAiICsgdGhp
        cyArICIsIGJ1dCBpdCBkaWQgbm90IGV4aXN0LiIsICF0ZW1wbGF0ZU5hbWUg
        fHwgdGVtcGxhdGUpOwoKICAgIHJldHVybiB0ZW1wbGF0ZSB8fCBnZXQodGhp
        cywgJ2RlZmF1bHRUZW1wbGF0ZScpOwogIH0pLnByb3BlcnR5KCd0ZW1wbGF0
        ZU5hbWUnKSwKCiAgLyoqCiAgU3BlY2lmeWluZyBhIGNvbXBvbmVudHMgYHRl
        bXBsYXRlTmFtZWAgaXMgZGVwcmVjYXRlZCB3aXRob3V0IGFsc28KICBwcm92
        aWRpbmcgdGhlIGBsYXlvdXRgIG9yIGBsYXlvdXROYW1lYCBwcm9wZXJ0aWVz
        LgoKICBAZGVwcmVjYXRlZAogIEBwcm9wZXJ0eSB0ZW1wbGF0ZU5hbWUKICAq
        LwogIHRlbXBsYXRlTmFtZTogbnVsbCwKCiAgLy8gZHVyaW5nIHJlbmRlciwg
        aXNvbGF0ZSBrZXl3b3JkcwogIGNsb25lS2V5d29yZHM6IGZ1bmN0aW9uKCkg
        ewogICAgcmV0dXJuIHsKICAgICAgdmlldzogdGhpcywKICAgICAgY29udHJv
        bGxlcjogdGhpcwogICAgfTsKICB9LAoKICBfeWllbGQ6IGZ1bmN0aW9uKGNv
        bnRleHQsIG9wdGlvbnMpIHsKICAgIHZhciB2aWV3ID0gb3B0aW9ucy5kYXRh
        LnZpZXcsCiAgICAgICAgcGFyZW50VmlldyA9IHRoaXMuX3BhcmVudFZpZXcs
        CiAgICAgICAgdGVtcGxhdGUgPSBnZXQodGhpcywgJ3RlbXBsYXRlJyk7Cgog
        ICAgaWYgKHRlbXBsYXRlKSB7CiAgICAgIEVtYmVyLmFzc2VydCgiQSBDb21w
        b25lbnQgbXVzdCBoYXZlIGEgcGFyZW50IHZpZXcgaW4gb3JkZXIgdG8geWll
        bGQuIiwgcGFyZW50Vmlldyk7CgogICAgICB2aWV3LmFwcGVuZENoaWxkKEVt
        YmVyLlZpZXcsIHsKICAgICAgICBpc1ZpcnR1YWw6IHRydWUsCiAgICAgICAg
        dGFnTmFtZTogJycsCiAgICAgICAgX2NvbnRleHRWaWV3OiBwYXJlbnRWaWV3
        LAogICAgICAgIHRlbXBsYXRlOiB0ZW1wbGF0ZSwKICAgICAgICBjb250ZXh0
        OiBnZXQocGFyZW50VmlldywgJ2NvbnRleHQnKSwKICAgICAgICBjb250cm9s
        bGVyOiBnZXQocGFyZW50VmlldywgJ2NvbnRyb2xsZXInKSwKICAgICAgICB0
        ZW1wbGF0ZURhdGE6IHsga2V5d29yZHM6IHBhcmVudFZpZXcuY2xvbmVLZXl3
        b3JkcygpIH0KICAgICAgfSk7CiAgICB9CiAgfSwKCiAgLyoqCiAgICBJZiB0
        aGUgY29tcG9uZW50IGlzIGN1cnJlbnRseSBpbnNlcnRlZCBpbnRvIHRoZSBE
        T00gb2YgYSBwYXJlbnQgdmlldywgdGhpcwogICAgcHJvcGVydHkgd2lsbCBw
        b2ludCB0byB0aGUgY29udHJvbGxlciBvZiB0aGUgcGFyZW50IHZpZXcuCgog
        ICAgQHByb3BlcnR5IHRhcmdldE9iamVjdAogICAgQHR5cGUgRW1iZXIuQ29u
        dHJvbGxlcgogICAgQGRlZmF1bHQgbnVsbAogICovCiAgdGFyZ2V0T2JqZWN0
        OiBFbWJlci5jb21wdXRlZChmdW5jdGlvbihrZXkpIHsKICAgIHZhciBwYXJl
        bnRWaWV3ID0gZ2V0KHRoaXMsICdfcGFyZW50VmlldycpOwogICAgcmV0dXJu
        IHBhcmVudFZpZXcgPyBnZXQocGFyZW50VmlldywgJ2NvbnRyb2xsZXInKSA6
        IG51bGw7CiAgfSkucHJvcGVydHkoJ19wYXJlbnRWaWV3JyksCgogIC8qKgog
        ICAgVHJpZ2dlcnMgYSBuYW1lZCBhY3Rpb24gb24gdGhlIGNvbnRyb2xsZXIg
        Y29udGV4dCB3aGVyZSB0aGUgY29tcG9uZW50IGlzIHVzZWQgaWYKICAgIHRo
        aXMgY29udHJvbGxlciBoYXMgcmVnaXN0ZXJlZCBmb3Igbm90aWZpY2F0aW9u
        cyBvZiB0aGUgYWN0aW9uLgoKICAgIEZvciBleGFtcGxlIGEgY29tcG9uZW50
        IGZvciBwbGF5aW5nIG9yIHBhdXNpbmcgbXVzaWMgbWF5IHRyYW5zbGF0ZSBj
        bGljayBldmVudHMKICAgIGludG8gYWN0aW9uIG5vdGlmaWNhdGlvbnMgb2Yg
        InBsYXkiIG9yICJzdG9wIiBkZXBlbmRpbmcgb24gc29tZSBpbnRlcm5hbCBz
        dGF0ZQogICAgb2YgdGhlIGNvbXBvbmVudDoKCgogICAgYGBgamF2YXNjcmlw
        dAogICAgQXBwLlBsYXlCdXR0b25Db21wb25lbnQgPSBFbWJlci5Db21wb25l
        bnQuZXh0ZW5kKHsKICAgICAgY2xpY2s6IGZ1bmN0aW9uKCl7CiAgICAgICAg
        aWYgKHRoaXMuZ2V0KCdpc1BsYXlpbmcnKSkgewogICAgICAgICAgdGhpcy5z
        ZW5kQWN0aW9uKCdwbGF5Jyk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAg
        IHRoaXMuc2VuZEFjdGlvbignc3RvcCcpOwogICAgICAgIH0KICAgICAgfQog
        ICAgfSk7CiAgICBgYGAKCiAgICBXaGVuIHVzZWQgaW5zaWRlIGEgdGVtcGxh
        dGUgdGhlc2UgY29tcG9uZW50IGFjdGlvbnMgYXJlIGNvbmZpZ3VyZWQgdG8K
        ICAgIHRyaWdnZXIgYWN0aW9ucyBpbiB0aGUgb3V0ZXIgYXBwbGljYXRpb24g
        Y29udGV4dDoKCiAgICBgYGBoYW5kbGViYXJzCiAgICB7eyEgYXBwbGljYXRp
        b24uaGJzIH19CiAgICB7e3BsYXktYnV0dG9uIHBsYXk9Im11c2ljU3RhcnRl
        ZCIgc3RvcD0ibXVzaWNTdG9wcGVkIn19CiAgICBgYGAKCiAgICBXaGVuIHRo
        ZSBjb21wb25lbnQgcmVjZWl2ZXMgYSBicm93c2VyIGBjbGlja2AgZXZlbnQg
        aXQgdHJhbnNsYXRlIHRoaXMKICAgIGludGVyYWN0aW9uIGludG8gYXBwbGlj
        YXRpb24tc3BlY2lmaWMgc2VtYW50aWNzICgicGxheSIgb3IgInN0b3AiKSBh
        bmQKICAgIHRyaWdnZXJzIHRoZSBzcGVjaWZpZWQgYWN0aW9uIG5hbWUgb24g
        dGhlIGNvbnRyb2xsZXIgZm9yIHRoZSB0ZW1wbGF0ZQogICAgd2hlcmUgdGhl
        IGNvbXBvbmVudCBpcyB1c2VkOiAKCgogICAgYGBgamF2YXNjcmlwdAogICAg
        QXBwLkFwcGxpY2F0aW9uQ29udHJvbGxlciA9IEVtYmVyLkNvbnRyb2xsZXIu
        ZXh0ZW5kKHsKICAgICAgYWN0aW9uczogewogICAgICAgIG11c2ljU3RhcnRl
        ZDogZnVuY3Rpb24oKXsKICAgICAgICAgIC8vIGNhbGxlZCB3aGVuIHRoZSBw
        bGF5IGJ1dHRvbiBpcyBjbGlja2VkCiAgICAgICAgICAvLyBhbmQgdGhlIG11
        c2ljIHN0YXJ0ZWQgcGxheWluZwogICAgICAgIH0sCiAgICAgICAgbXVzaWNT
        dG9wcGVkOiBmdW5jdGlvbigpewogICAgICAgICAgLy8gY2FsbGVkIHdoZW4g
        dGhlIHBsYXkgYnV0dG9uIGlzIGNsaWNrZWQKICAgICAgICAgIC8vIGFuZCB0
        aGUgbXVzaWMgc3RvcHBlZCBwbGF5aW5nCiAgICAgICAgfQogICAgICB9CiAg
        ICB9KTsKICAgIGBgYAoKICAgIElmIG5vIGFjdGlvbiBuYW1lIGlzIHBhc3Nl
        ZCB0byBgc2VuZEFjdGlvbmAgYSBkZWZhdWx0IG5hbWUgb2YgImFjdGlvbiIK
        ICAgIGlzIGFzc3VtZWQuCgogICAgYGBgamF2YXNjcmlwdAogICAgQXBwLk5l
        eHRCdXR0b25Db21wb25lbnQgPSBFbWJlci5Db21wb25lbnQuZXh0ZW5kKHsK
        ICAgICAgY2xpY2s6IGZ1bmN0aW9uKCl7CiAgICAgICAgdGhpcy5zZW5kQWN0
        aW9uKCk7CiAgICAgIH0KICAgIH0pOwogICAgYGBgCgogICAgYGBgaGFuZGxl
        YmFycwogICAge3shIGFwcGxpY2F0aW9uLmhicyB9fQogICAge3tuZXh0LWJ1
        dHRvbiBhY3Rpb249InBsYXlOZXh0U29uZ0luQWxidW0ifX0KICAgIGBgYAoK
        ICAgIGBgYGphdmFzY3JpcHQKICAgIEFwcC5BcHBsaWNhdGlvbkNvbnRyb2xs
        ZXIgPSBFbWJlci5Db250cm9sbGVyLmV4dGVuZCh7CiAgICAgIGFjdGlvbnM6
        IHsKICAgICAgICBwbGF5TmV4dFNvbmdJbkFsYnVtOiBmdW5jdGlvbigpewog
        ICAgICAgICAgLi4uCiAgICAgICAgfQogICAgICB9CiAgICB9KTsKICAgIGBg
        YAoKICAgIEBtZXRob2Qgc2VuZEFjdGlvbgogICAgQHBhcmFtIFthY3Rpb25d
        IHtTdHJpbmd9IHRoZSBhY3Rpb24gdG8gdHJpZ2dlcgogICAgQHBhcmFtIFtj
        b250ZXh0XSB7Kn0gYSBjb250ZXh0IHRvIHNlbmQgd2l0aCB0aGUgYWN0aW9u
        CiAgKi8KICBzZW5kQWN0aW9uOiBmdW5jdGlvbihhY3Rpb24pIHsKICAgIHZh
        ciBhY3Rpb25OYW1lLAogICAgICAgIGNvbnRleHRzID0gYV9zbGljZS5jYWxs
        KGFyZ3VtZW50cywgMSk7CgogICAgLy8gU2VuZCB0aGUgZGVmYXVsdCBhY3Rp
        b24KICAgIGlmIChhY3Rpb24gPT09IHVuZGVmaW5lZCkgewogICAgICBhY3Rp
        b25OYW1lID0gZ2V0KHRoaXMsICdhY3Rpb24nKTsKICAgICAgRW1iZXIuYXNz
        ZXJ0KCJUaGUgZGVmYXVsdCBhY3Rpb24gd2FzIHRyaWdnZXJlZCBvbiB0aGUg
        Y29tcG9uZW50ICIgKyB0aGlzLnRvU3RyaW5nKCkgKwogICAgICAgICAgICAg
        ICAgICAgIiwgYnV0IHRoZSBhY3Rpb24gbmFtZSAoIiArIGFjdGlvbk5hbWUg
        KyAiKSB3YXMgbm90IGEgc3RyaW5nLiIsCiAgICAgICAgICAgICAgICAgICBp
        c05vbmUoYWN0aW9uTmFtZSkgfHwgdHlwZW9mIGFjdGlvbk5hbWUgPT09ICdz
        dHJpbmcnKTsKICAgIH0gZWxzZSB7CiAgICAgIGFjdGlvbk5hbWUgPSBnZXQo
        dGhpcywgYWN0aW9uKTsKICAgICAgRW1iZXIuYXNzZXJ0KCJUaGUgIiArIGFj
        dGlvbiArICIgYWN0aW9uIHdhcyB0cmlnZ2VyZWQgb24gdGhlIGNvbXBvbmVu
        dCAiICsKICAgICAgICAgICAgICAgICAgIHRoaXMudG9TdHJpbmcoKSArICIs
        IGJ1dCB0aGUgYWN0aW9uIG5hbWUgKCIgKyBhY3Rpb25OYW1lICsKICAgICAg
        ICAgICAgICAgICAgICIpIHdhcyBub3QgYSBzdHJpbmcuIiwKICAgICAgICAg
        ICAgICAgICAgIGlzTm9uZShhY3Rpb25OYW1lKSB8fCB0eXBlb2YgYWN0aW9u
        TmFtZSA9PT0gJ3N0cmluZycpOwogICAgfQoKICAgIC8vIElmIG5vIGFjdGlv
        biBuYW1lIGZvciB0aGF0IGFjdGlvbiBjb3VsZCBiZSBmb3VuZCwganVzdCBh
        Ym9ydC4KICAgIGlmIChhY3Rpb25OYW1lID09PSB1bmRlZmluZWQpIHsgcmV0
        dXJuOyB9CgogICAgdGhpcy50cmlnZ2VyQWN0aW9uKHsKICAgICAgYWN0aW9u
        OiBhY3Rpb25OYW1lLAogICAgICBhY3Rpb25Db250ZXh0OiBjb250ZXh0cwog
        ICAgfSk7CiAgfQp9KTsKCn0pKCk7CgoKCihmdW5jdGlvbigpIHsKCn0pKCk7
        CgoKCihmdW5jdGlvbigpIHsKLyoqCmBFbWJlci5WaWV3VGFyZ2V0QWN0aW9u
        U3VwcG9ydGAgaXMgYSBtaXhpbiB0aGF0IGNhbiBiZSBpbmNsdWRlZCBpbiBh
        CnZpZXcgY2xhc3MgdG8gYWRkIGEgYHRyaWdnZXJBY3Rpb25gIG1ldGhvZCB3
        aXRoIHNlbWFudGljcyBzaW1pbGFyIHRvCnRoZSBIYW5kbGViYXJzIGB7e2Fj
        dGlvbn19YCBoZWxwZXIuIEl0IHByb3ZpZGVzIGludGVsbGlnZW50IGRlZmF1
        bHRzCmZvciB0aGUgYWN0aW9uJ3MgdGFyZ2V0OiB0aGUgdmlldydzIGNvbnRy
        b2xsZXI7IGFuZCB0aGUgY29udGV4dCB0aGF0IGlzCnNlbnQgd2l0aCB0aGUg
        YWN0aW9uOiB0aGUgdmlldydzIGNvbnRleHQuCgpOb3RlOiBJbiBub3JtYWwg
        RW1iZXIgdXNhZ2UsIHRoZSBge3thY3Rpb259fWAgaGVscGVyIGlzIHVzdWFs
        bHkgdGhlIGJlc3QKY2hvaWNlLiBUaGlzIG1peGluIGlzIG1vc3Qgb2Z0ZW4g
        dXNlZnVsIHdoZW4geW91IGFyZSBkb2luZyBtb3JlIGNvbXBsZXgKZXZlbnQg
        aGFuZGxpbmcgaW4gY3VzdG9tIFZpZXcgc3ViY2xhc3Nlcy4KCkZvciBleGFt
        cGxlOgoKYGBgamF2YXNjcmlwdApBcHAuU2F2ZUJ1dHRvblZpZXcgPSBFbWJl
        ci5WaWV3LmV4dGVuZChFbWJlci5WaWV3VGFyZ2V0QWN0aW9uU3VwcG9ydCwg
        ewogIGFjdGlvbjogJ3NhdmUnLAogIGNsaWNrOiBmdW5jdGlvbigpIHsKICAg
        IHRoaXMudHJpZ2dlckFjdGlvbigpOyAvLyBTZW5kcyB0aGUgYHNhdmVgIGFj
        dGlvbiwgYWxvbmcgd2l0aCB0aGUgY3VycmVudCBjb250ZXh0CiAgICAgICAg
        ICAgICAgICAgICAgICAgICAgLy8gdG8gdGhlIGN1cnJlbnQgY29udHJvbGxl
        cgogIH0KfSk7CmBgYAoKVGhlIGBhY3Rpb25gIGNhbiBiZSBwcm92aWRlZCBh
        cyBwcm9wZXJ0aWVzIG9mIGFuIG9wdGlvbmFsIG9iamVjdCBhcmd1bWVudAp0
        byBgdHJpZ2dlckFjdGlvbmAgYXMgd2VsbC4KCmBgYGphdmFzY3JpcHQKQXBw
        LlNhdmVCdXR0b25WaWV3ID0gRW1iZXIuVmlldy5leHRlbmQoRW1iZXIuVmll
        d1RhcmdldEFjdGlvblN1cHBvcnQsIHsKICBjbGljazogZnVuY3Rpb24oKSB7
        CiAgICB0aGlzLnRyaWdnZXJBY3Rpb24oewogICAgICBhY3Rpb246ICdzYXZl
        JwogICAgfSk7IC8vIFNlbmRzIHRoZSBgc2F2ZWAgYWN0aW9uLCBhbG9uZyB3
        aXRoIHRoZSBjdXJyZW50IGNvbnRleHQKICAgICAgICAvLyB0byB0aGUgY3Vy
        cmVudCBjb250cm9sbGVyCiAgfQp9KTsKYGBgCgpAY2xhc3MgVmlld1Rhcmdl
        dEFjdGlvblN1cHBvcnQKQG5hbWVzcGFjZSBFbWJlcgpAZXh0ZW5kcyBFbWJl
        ci5UYXJnZXRBY3Rpb25TdXBwb3J0CiovCkVtYmVyLlZpZXdUYXJnZXRBY3Rp
        b25TdXBwb3J0ID0gRW1iZXIuTWl4aW4uY3JlYXRlKEVtYmVyLlRhcmdldEFj
        dGlvblN1cHBvcnQsIHsKICAvKioKICBAcHJvcGVydHkgdGFyZ2V0CiAgKi8K
        ICB0YXJnZXQ6IEVtYmVyLmNvbXB1dGVkLmFsaWFzKCdjb250cm9sbGVyJyks
        CiAgLyoqCiAgQHByb3BlcnR5IGFjdGlvbkNvbnRleHQKICAqLwogIGFjdGlv
        bkNvbnRleHQ6IEVtYmVyLmNvbXB1dGVkLmFsaWFzKCdjb250ZXh0JykKfSk7
        Cgp9KSgpOwoKCgooZnVuY3Rpb24oKSB7Cgp9KSgpOwoKCgooZnVuY3Rpb24o
        KSB7Ci8qKgpFbWJlciBWaWV3cwoKQG1vZHVsZSBlbWJlcgpAc3VibW9kdWxl
        IGVtYmVyLXZpZXdzCkByZXF1aXJlcyBlbWJlci1ydW50aW1lCkBtYWluIGVt
        YmVyLXZpZXdzCiovCgp9KSgpOwoKKGZ1bmN0aW9uKCkgewpkZWZpbmUoIm1l
        dGFtb3JwaCIsCiAgW10sCiAgZnVuY3Rpb24oKSB7CiAgICAidXNlIHN0cmlj
        dCI7CiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
        PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogICAg
        Ly8gUHJvamVjdDogICBtZXRhbW9ycGgKICAgIC8vIENvcHlyaWdodDogwqky
        MDE0IFRpbGRlLCBJbmMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuCiAgICAvLyA9
        PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
        PT09PT09PT09PT09PT09PT09PT09PT09PT09PQoKICAgIHZhciBLID0gZnVu
        Y3Rpb24oKSB7fSwKICAgICAgICBndWlkID0gMCwKICAgICAgICBkaXNhYmxl
        UmFuZ2UgPSAoZnVuY3Rpb24oKXsKICAgICAgICAgIGlmICgndW5kZWZpbmVk
        JyAhPT0gdHlwZW9mIE1ldGFtb3JwaEVOVikgewogICAgICAgICAgICByZXR1
        cm4gTWV0YW1vcnBoRU5WLkRJU0FCTEVfUkFOR0VfQVBJOwogICAgICAgICAg
        fSBlbHNlIGlmICgndW5kZWZpbmVkJyAhPT0gRU5WKSB7CiAgICAgICAgICAg
        IHJldHVybiBFTlYuRElTQUJMRV9SQU5HRV9BUEk7CiAgICAgICAgICB9IGVs
        c2UgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICB9CiAg
        ICAgICAgfSkoKSwKCiAgICAgICAgLy8gRmVhdHVyZS1kZXRlY3QgdGhlIFcz
        QyByYW5nZSBBUEksIHRoZSBleHRlbmRlZCBjaGVjayBpcyBmb3IgSUU5IHdo
        aWNoIG9ubHkgcGFydGlhbGx5IHN1cHBvcnRzIHJhbmdlcwogICAgICAgIHN1
        cHBvcnRzUmFuZ2UgPSAoIWRpc2FibGVSYW5nZSkgJiYgdHlwZW9mIGRvY3Vt
        ZW50ICE9PSAndW5kZWZpbmVkJyAmJiAoJ2NyZWF0ZVJhbmdlJyBpbiBkb2N1
        bWVudCkgJiYgKHR5cGVvZiBSYW5nZSAhPT0gJ3VuZGVmaW5lZCcpICYmIFJh
        bmdlLnByb3RvdHlwZS5jcmVhdGVDb250ZXh0dWFsRnJhZ21lbnQsCgogICAg
        ICAgIC8vIEludGVybmV0IEV4cGxvcmVyIHByaW9yIHRvIDkgZG9lcyBub3Qg
        YWxsb3cgc2V0dGluZyBpbm5lckhUTUwgaWYgdGhlIGZpcnN0IGVsZW1lbnQK
        ICAgICAgICAvLyBpcyBhICJ6ZXJvLXNjb3BlIiBlbGVtZW50LiBUaGlzIHBy
        b2JsZW0gY2FuIGJlIHdvcmtlZCBhcm91bmQgYnkgbWFraW5nCiAgICAgICAg
        Ly8gdGhlIGZpcnN0IG5vZGUgYW4gaW52aXNpYmxlIHRleHQgbm9kZS4gV2Us
        IGxpa2UgTW9kZXJuaXpyLCB1c2UgJnNoeTsKICAgICAgICBuZWVkc1NoeSA9
        IHR5cGVvZiBkb2N1bWVudCAhPT0gJ3VuZGVmaW5lZCcgJiYgKGZ1bmN0aW9u
        KCkgewogICAgICAgICAgdmFyIHRlc3RFbCA9IGRvY3VtZW50LmNyZWF0ZUVs
        ZW1lbnQoJ2RpdicpOwogICAgICAgICAgdGVzdEVsLmlubmVySFRNTCA9ICI8
        ZGl2PjwvZGl2PiI7CiAgICAgICAgICB0ZXN0RWwuZmlyc3RDaGlsZC5pbm5l
        ckhUTUwgPSAiPHNjcmlwdD48L3NjcmlwdD4iOwogICAgICAgICAgcmV0dXJu
        IHRlc3RFbC5maXJzdENoaWxkLmlubmVySFRNTCA9PT0gJyc7CiAgICAgICAg
        fSkoKSwKCgogICAgICAgIC8vIElFIDggKGFuZCBsaWtlbHkgZWFybGllcikg
        bGlrZXMgdG8gbW92ZSB3aGl0ZXNwYWNlIHByZWNlZWRpbmcKICAgICAgICAv
        LyBhIHNjcmlwdCB0YWcgdG8gYXBwZWFyIGFmdGVyIGl0LiBUaGlzIG1lYW5z
        IHRoYXQgd2UgY2FuCiAgICAgICAgLy8gYWNjaWRlbnRhbGx5IHJlbW92ZSB3
        aGl0ZXNwYWNlIHdoZW4gdXBkYXRpbmcgYSBtb3JwaC4KICAgICAgICBtb3Zl
        c1doaXRlc3BhY2UgPSBkb2N1bWVudCAmJiAoZnVuY3Rpb24oKSB7CiAgICAg
        ICAgICB2YXIgdGVzdEVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2
        Jyk7CiAgICAgICAgICB0ZXN0RWwuaW5uZXJIVE1MID0gIlRlc3Q6IDxzY3Jp
        cHQgdHlwZT0ndGV4dC94LXBsYWNlaG9sZGVyJz48L3NjcmlwdD5WYWx1ZSI7
        CiAgICAgICAgICByZXR1cm4gdGVzdEVsLmNoaWxkTm9kZXNbMF0ubm9kZVZh
        bHVlID09PSAnVGVzdDonICYmCiAgICAgICAgICAgICAgICAgIHRlc3RFbC5j
        aGlsZE5vZGVzWzJdLm5vZGVWYWx1ZSA9PT0gJyBWYWx1ZSc7CiAgICAgICAg
        fSkoKTsKCiAgICAvLyBDb25zdHJ1Y3RvciB0aGF0IHN1cHBvcnRzIGVpdGhl
        ciBNZXRhbW9ycGgoJ2ZvbycpIG9yIG5ldwogICAgLy8gTWV0YW1vcnBoKCdm
        b28nKTsKICAgIC8vCiAgICAvLyBUYWtlcyBhIHN0cmluZyBvZiBIVE1MIGFz
        IHRoZSBhcmd1bWVudC4KCiAgICB2YXIgTWV0YW1vcnBoID0gZnVuY3Rpb24o
        aHRtbCkgewogICAgICB2YXIgc2VsZjsKCiAgICAgIGlmICh0aGlzIGluc3Rh
        bmNlb2YgTWV0YW1vcnBoKSB7CiAgICAgICAgc2VsZiA9IHRoaXM7CiAgICAg
        IH0gZWxzZSB7CiAgICAgICAgc2VsZiA9IG5ldyBLKCk7CiAgICAgIH0KCiAg
        ICAgIHNlbGYuaW5uZXJIVE1MID0gaHRtbDsKICAgICAgdmFyIG15R3VpZCA9
        ICdtZXRhbW9ycGgtJysoZ3VpZCsrKTsKICAgICAgc2VsZi5zdGFydCA9IG15
        R3VpZCArICctc3RhcnQnOwogICAgICBzZWxmLmVuZCA9IG15R3VpZCArICct
        ZW5kJzsKCiAgICAgIHJldHVybiBzZWxmOwogICAgfTsKCiAgICBLLnByb3Rv
        dHlwZSA9IE1ldGFtb3JwaC5wcm90b3R5cGU7CgogICAgdmFyIHJhbmdlRm9y
        LCBodG1sRnVuYywgcmVtb3ZlRnVuYywgb3V0ZXJIVE1MRnVuYywgYXBwZW5k
        VG9GdW5jLCBhZnRlckZ1bmMsIHByZXBlbmRGdW5jLCBzdGFydFRhZ0Z1bmMs
        IGVuZFRhZ0Z1bmM7CgogICAgb3V0ZXJIVE1MRnVuYyA9IGZ1bmN0aW9uKCkg
        ewogICAgICByZXR1cm4gdGhpcy5zdGFydFRhZygpICsgdGhpcy5pbm5lckhU
        TUwgKyB0aGlzLmVuZFRhZygpOwogICAgfTsKCiAgICBzdGFydFRhZ0Z1bmMg
        PSBmdW5jdGlvbigpIHsKICAgICAgLyoKICAgICAgICogV2UgcmVwbGFjZSBj
        aGV2cm9uIGJ5IGl0cyBoZXggY29kZSBpbiBvcmRlciB0byBwcmV2ZW50IGVz
        Y2FwaW5nIHByb2JsZW1zLgogICAgICAgKiBDaGVjayB0aGlzIHRocmVhZCBm
        b3IgbW9yZSBleHBsYWluYXRpb246CiAgICAgICAqIGh0dHA6Ly9zdGFja292
        ZXJmbG93LmNvbS9xdWVzdGlvbnMvODIzMTA0OC93aHktdXNlLXgzYy1pbnN0
        ZWFkLW9mLXdoZW4tZ2VuZXJhdGluZy1odG1sLWZyb20tamF2YXNjcmlwdAog
        ICAgICAgKi8KICAgICAgcmV0dXJuICI8c2NyaXB0IGlkPSciICsgdGhpcy5z
        dGFydCArICInIHR5cGU9J3RleHQveC1wbGFjZWhvbGRlcic+XHgzQy9zY3Jp
        cHQ+IjsKICAgIH07CgogICAgZW5kVGFnRnVuYyA9IGZ1bmN0aW9uKCkgewog
        ICAgICAvKgogICAgICAgKiBXZSByZXBsYWNlIGNoZXZyb24gYnkgaXRzIGhl
        eCBjb2RlIGluIG9yZGVyIHRvIHByZXZlbnQgZXNjYXBpbmcgcHJvYmxlbXMu
        CiAgICAgICAqIENoZWNrIHRoaXMgdGhyZWFkIGZvciBtb3JlIGV4cGxhaW5h
        dGlvbjoKICAgICAgICogaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0
        aW9ucy84MjMxMDQ4L3doeS11c2UteDNjLWluc3RlYWQtb2Ytd2hlbi1nZW5l
        cmF0aW5nLWh0bWwtZnJvbS1qYXZhc2NyaXB0CiAgICAgICAqLwogICAgICBy
        ZXR1cm4gIjxzY3JpcHQgaWQ9JyIgKyB0aGlzLmVuZCArICInIHR5cGU9J3Rl
        eHQveC1wbGFjZWhvbGRlcic+XHgzQy9zY3JpcHQ+IjsKICAgIH07CgogICAg
        Ly8gSWYgd2UgaGF2ZSB0aGUgVzNDIHJhbmdlIEFQSSwgdGhpcyBwcm9jZXNz
        IGlzIHJlbGF0aXZlbHkgc3RyYWlnaHQgZm9yd2FyZC4KICAgIGlmIChzdXBw
        b3J0c1JhbmdlKSB7CgogICAgICAvLyBHZXQgYSByYW5nZSBmb3IgdGhlIGN1
        cnJlbnQgbW9ycGguIE9wdGlvbmFsbHkgaW5jbHVkZSB0aGUgc3RhcnRpbmcg
        YW5kCiAgICAgIC8vIGVuZGluZyBwbGFjZWhvbGRlcnMuCiAgICAgIHJhbmdl
        Rm9yID0gZnVuY3Rpb24obW9ycGgsIG91dGVyVG9vKSB7CiAgICAgICAgdmFy
        IHJhbmdlID0gZG9jdW1lbnQuY3JlYXRlUmFuZ2UoKTsKICAgICAgICB2YXIg
        YmVmb3JlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQobW9ycGguc3RhcnQp
        OwogICAgICAgIHZhciBhZnRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlk
        KG1vcnBoLmVuZCk7CgogICAgICAgIGlmIChvdXRlclRvbykgewogICAgICAg
        ICAgcmFuZ2Uuc2V0U3RhcnRCZWZvcmUoYmVmb3JlKTsKICAgICAgICAgIHJh
        bmdlLnNldEVuZEFmdGVyKGFmdGVyKTsKICAgICAgICB9IGVsc2UgewogICAg
        ICAgICAgcmFuZ2Uuc2V0U3RhcnRBZnRlcihiZWZvcmUpOwogICAgICAgICAg
        cmFuZ2Uuc2V0RW5kQmVmb3JlKGFmdGVyKTsKICAgICAgICB9CgogICAgICAg
        IHJldHVybiByYW5nZTsKICAgICAgfTsKCiAgICAgIGh0bWxGdW5jID0gZnVu
        Y3Rpb24oaHRtbCwgb3V0ZXJUb28pIHsKICAgICAgICAvLyBnZXQgYSByYW5n
        ZSBmb3IgdGhlIGN1cnJlbnQgbWV0YW1vcnBoIG9iamVjdAogICAgICAgIHZh
        ciByYW5nZSA9IHJhbmdlRm9yKHRoaXMsIG91dGVyVG9vKTsKCiAgICAgICAg
        Ly8gZGVsZXRlIHRoZSBjb250ZW50cyBvZiB0aGUgcmFuZ2UsIHdoaWNoIHdp
        bGwgYmUgdGhlCiAgICAgICAgLy8gbm9kZXMgYmV0d2VlbiB0aGUgc3RhcnRp
        bmcgYW5kIGVuZGluZyBwbGFjZWhvbGRlci4KICAgICAgICByYW5nZS5kZWxl
        dGVDb250ZW50cygpOwoKICAgICAgICAvLyBjcmVhdGUgYSBuZXcgZG9jdW1l
        bnQgZnJhZ21lbnQgZm9yIHRoZSBIVE1MCiAgICAgICAgdmFyIGZyYWdtZW50
        ID0gcmFuZ2UuY3JlYXRlQ29udGV4dHVhbEZyYWdtZW50KGh0bWwpOwoKICAg
        ICAgICAvLyBpbnNlcnQgdGhlIGZyYWdtZW50IGludG8gdGhlIHJhbmdlCiAg
        ICAgICAgcmFuZ2UuaW5zZXJ0Tm9kZShmcmFnbWVudCk7CiAgICAgIH07Cgog
        ICAgICAvKioKICAgICAgKiBAcHVibGljCiAgICAgICoKICAgICAgKiBSZW1v
        dmUgdGhpcyBvYmplY3QgKGluY2x1ZGluZyBzdGFydGluZyBhbmQgZW5kaW5n
        CiAgICAgICogcGxhY2Vob2xkZXJzKS4KICAgICAgKgogICAgICAqIEBtZXRo
        b2QgcmVtb3ZlCiAgICAgICovCiAgICAgIHJlbW92ZUZ1bmMgPSBmdW5jdGlv
        bigpIHsKICAgICAgICAvLyBnZXQgYSByYW5nZSBmb3IgdGhlIGN1cnJlbnQg
        bWV0YW1vcnBoIG9iamVjdCBpbmNsdWRpbmcKICAgICAgICAvLyB0aGUgc3Rh
        cnRpbmcgYW5kIGVuZGluZyBwbGFjZWhvbGRlcnMuCiAgICAgICAgdmFyIHJh
        bmdlID0gcmFuZ2VGb3IodGhpcywgdHJ1ZSk7CgogICAgICAgIC8vIGRlbGV0
        ZSB0aGUgZW50aXJlIHJhbmdlLgogICAgICAgIHJhbmdlLmRlbGV0ZUNvbnRl
        bnRzKCk7CiAgICAgIH07CgogICAgICBhcHBlbmRUb0Z1bmMgPSBmdW5jdGlv
        bihub2RlKSB7CiAgICAgICAgdmFyIHJhbmdlID0gZG9jdW1lbnQuY3JlYXRl
        UmFuZ2UoKTsKICAgICAgICByYW5nZS5zZXRTdGFydChub2RlKTsKICAgICAg
        ICByYW5nZS5jb2xsYXBzZShmYWxzZSk7CiAgICAgICAgdmFyIGZyYWcgPSBy
        YW5nZS5jcmVhdGVDb250ZXh0dWFsRnJhZ21lbnQodGhpcy5vdXRlckhUTUwo
        KSk7CiAgICAgICAgbm9kZS5hcHBlbmRDaGlsZChmcmFnKTsKICAgICAgfTsK
        CiAgICAgIGFmdGVyRnVuYyA9IGZ1bmN0aW9uKGh0bWwpIHsKICAgICAgICB2
        YXIgcmFuZ2UgPSBkb2N1bWVudC5jcmVhdGVSYW5nZSgpOwogICAgICAgIHZh
        ciBhZnRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuZW5kKTsK
        CiAgICAgICAgcmFuZ2Uuc2V0U3RhcnRBZnRlcihhZnRlcik7CiAgICAgICAg
        cmFuZ2Uuc2V0RW5kQWZ0ZXIoYWZ0ZXIpOwoKICAgICAgICB2YXIgZnJhZ21l
        bnQgPSByYW5nZS5jcmVhdGVDb250ZXh0dWFsRnJhZ21lbnQoaHRtbCk7CiAg
        ICAgICAgcmFuZ2UuaW5zZXJ0Tm9kZShmcmFnbWVudCk7CiAgICAgIH07Cgog
        ICAgICBwcmVwZW5kRnVuYyA9IGZ1bmN0aW9uKGh0bWwpIHsKICAgICAgICB2
        YXIgcmFuZ2UgPSBkb2N1bWVudC5jcmVhdGVSYW5nZSgpOwogICAgICAgIHZh
        ciBzdGFydCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuc3RhcnQp
        OwoKICAgICAgICByYW5nZS5zZXRTdGFydEFmdGVyKHN0YXJ0KTsKICAgICAg
        ICByYW5nZS5zZXRFbmRBZnRlcihzdGFydCk7CgogICAgICAgIHZhciBmcmFn
        bWVudCA9IHJhbmdlLmNyZWF0ZUNvbnRleHR1YWxGcmFnbWVudChodG1sKTsK
        ICAgICAgICByYW5nZS5pbnNlcnROb2RlKGZyYWdtZW50KTsKICAgICAgfTsK
        CiAgICB9IGVsc2UgewogICAgICAvKgogICAgICAgKiBUaGlzIGNvZGUgaXMg
        bW9zdGx5IHRha2VuIGZyb20galF1ZXJ5LCB3aXRoIG9uZSBleGNlcHRpb24u
        IEluIGpRdWVyeSdzIGNhc2UsIHdlCiAgICAgICAqIGhhdmUgc29tZSBIVE1M
        IGFuZCB3ZSBuZWVkIHRvIGZpZ3VyZSBvdXQgaG93IHRvIGNvbnZlcnQgaXQg
        aW50byBzb21lIG5vZGVzLgogICAgICAgKgogICAgICAgKiBJbiB0aGlzIGNh
        c2UsIGpRdWVyeSBuZWVkcyB0byBzY2FuIHRoZSBIVE1MIGxvb2tpbmcgZm9y
        IGFuIG9wZW5pbmcgdGFnIGFuZCB1c2UKICAgICAgICogdGhhdCBhcyB0aGUg
        a2V5IGZvciB0aGUgd3JhcCBtYXAuIEluIG91ciBjYXNlLCB3ZSBrbm93IHRo
        ZSBwYXJlbnQgbm9kZSwgYW5kCiAgICAgICAqIGNhbiB1c2UgaXRzIHR5cGUg
        YXMgdGhlIGtleSBmb3IgdGhlIHdyYXAgbWFwLgogICAgICAgKiovCiAgICAg
        IHZhciB3cmFwTWFwID0gewogICAgICAgIHNlbGVjdDogWyAxLCAiPHNlbGVj
        dCBtdWx0aXBsZT0nbXVsdGlwbGUnPiIsICI8L3NlbGVjdD4iIF0sCiAgICAg
        ICAgZmllbGRzZXQ6IFsgMSwgIjxmaWVsZHNldD4iLCAiPC9maWVsZHNldD4i
        IF0sCiAgICAgICAgdGFibGU6IFsgMSwgIjx0YWJsZT4iLCAiPC90YWJsZT4i
        IF0sCiAgICAgICAgdGJvZHk6IFsgMiwgIjx0YWJsZT48dGJvZHk+IiwgIjwv
        dGJvZHk+PC90YWJsZT4iIF0sCiAgICAgICAgdHI6IFsgMywgIjx0YWJsZT48
        dGJvZHk+PHRyPiIsICI8L3RyPjwvdGJvZHk+PC90YWJsZT4iIF0sCiAgICAg
        ICAgY29sZ3JvdXA6IFsgMiwgIjx0YWJsZT48dGJvZHk+PC90Ym9keT48Y29s
        Z3JvdXA+IiwgIjwvY29sZ3JvdXA+PC90YWJsZT4iIF0sCiAgICAgICAgbWFw
        OiBbIDEsICI8bWFwPiIsICI8L21hcD4iIF0sCiAgICAgICAgX2RlZmF1bHQ6
        IFsgMCwgIiIsICIiIF0KICAgICAgfTsKCiAgICAgIHZhciBmaW5kQ2hpbGRC
        eUlkID0gZnVuY3Rpb24oZWxlbWVudCwgaWQpIHsKICAgICAgICBpZiAoZWxl
        bWVudC5nZXRBdHRyaWJ1dGUoJ2lkJykgPT09IGlkKSB7IHJldHVybiBlbGVt
        ZW50OyB9CgogICAgICAgIHZhciBsZW4gPSBlbGVtZW50LmNoaWxkTm9kZXMu
        bGVuZ3RoLCBpZHgsIG5vZGUsIGZvdW5kOwogICAgICAgIGZvciAoaWR4PTA7
        IGlkeDxsZW47IGlkeCsrKSB7CiAgICAgICAgICBub2RlID0gZWxlbWVudC5j
        aGlsZE5vZGVzW2lkeF07CiAgICAgICAgICBmb3VuZCA9IG5vZGUubm9kZVR5
        cGUgPT09IDEgJiYgZmluZENoaWxkQnlJZChub2RlLCBpZCk7CiAgICAgICAg
        ICBpZiAoZm91bmQpIHsgcmV0dXJuIGZvdW5kOyB9CiAgICAgICAgfQogICAg
        ICB9OwoKICAgICAgdmFyIHNldElubmVySFRNTCA9IGZ1bmN0aW9uKGVsZW1l
        bnQsIGh0bWwpIHsKICAgICAgICB2YXIgbWF0Y2hlcyA9IFtdOwogICAgICAg
        IGlmIChtb3Zlc1doaXRlc3BhY2UpIHsKICAgICAgICAgIC8vIFJpZ2h0IG5v
        dyB3ZSBvbmx5IGNoZWNrIGZvciBzY3JpcHQgdGFncyB3aXRoIGlkcyB3aXRo
        IHRoZQogICAgICAgICAgLy8gZ29hbCBvZiB0YXJnZXRpbmcgbW9ycGhzLgog
        ICAgICAgICAgaHRtbCA9IGh0bWwucmVwbGFjZSgvKFxzKykoPHNjcmlwdCBp
        ZD0nKFteJ10rKScpL2csIGZ1bmN0aW9uKG1hdGNoLCBzcGFjZXMsIHRhZywg
        aWQpIHsKICAgICAgICAgICAgbWF0Y2hlcy5wdXNoKFtpZCwgc3BhY2VzXSk7
        CiAgICAgICAgICAgIHJldHVybiB0YWc7CiAgICAgICAgICB9KTsKICAgICAg
        ICB9CgogICAgICAgIGVsZW1lbnQuaW5uZXJIVE1MID0gaHRtbDsKCiAgICAg
        ICAgLy8gSWYgd2UgaGF2ZSB0byBkbyBhbnkgd2hpdGVzcGFjZSBhZGp1c3Rt
        ZW50cyBkbyB0aGVtIG5vdwogICAgICAgIGlmIChtYXRjaGVzLmxlbmd0aCA+
        IDApIHsKICAgICAgICAgIHZhciBsZW4gPSBtYXRjaGVzLmxlbmd0aCwgaWR4
        OwogICAgICAgICAgZm9yIChpZHg9MDsgaWR4PGxlbjsgaWR4KyspIHsKICAg
        ICAgICAgICAgdmFyIHNjcmlwdCA9IGZpbmRDaGlsZEJ5SWQoZWxlbWVudCwg
        bWF0Y2hlc1tpZHhdWzBdKSwKICAgICAgICAgICAgICAgIG5vZGUgPSBkb2N1
        bWVudC5jcmVhdGVUZXh0Tm9kZShtYXRjaGVzW2lkeF1bMV0pOwogICAgICAg
        ICAgICBzY3JpcHQucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUobm9kZSwgc2Ny
        aXB0KTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH07CgogICAgICAv
        KgogICAgICAgKiBHaXZlbiBhIHBhcmVudCBub2RlIGFuZCBzb21lIEhUTUws
        IGdlbmVyYXRlIGEgc2V0IG9mIG5vZGVzLiBSZXR1cm4gdGhlIGZpcnN0CiAg
        ICAgICAqIG5vZGUsIHdoaWNoIHdpbGwgYWxsb3cgdXMgdG8gdHJhdmVyc2Ug
        dGhlIHJlc3QgdXNpbmcgbmV4dFNpYmxpbmcuCiAgICAgICAqCiAgICAgICAq
        IFdlIG5lZWQgdG8gZG8gdGhpcyBiZWNhdXNlIGlubmVySFRNTCBpbiBJRSBk
        b2VzIG5vdCByZWFsbHkgcGFyc2UgdGhlIG5vZGVzLgogICAgICAgKi8KICAg
        ICAgdmFyIGZpcnN0Tm9kZUZvciA9IGZ1bmN0aW9uKHBhcmVudE5vZGUsIGh0
        bWwpIHsKICAgICAgICB2YXIgYXJyID0gd3JhcE1hcFtwYXJlbnROb2RlLnRh
        Z05hbWUudG9Mb3dlckNhc2UoKV0gfHwgd3JhcE1hcC5fZGVmYXVsdDsKICAg
        ICAgICB2YXIgZGVwdGggPSBhcnJbMF0sIHN0YXJ0ID0gYXJyWzFdLCBlbmQg
        PSBhcnJbMl07CgogICAgICAgIGlmIChuZWVkc1NoeSkgeyBodG1sID0gJyZz
        aHk7JytodG1sOyB9CgogICAgICAgIHZhciBlbGVtZW50ID0gZG9jdW1lbnQu
        Y3JlYXRlRWxlbWVudCgnZGl2Jyk7CgogICAgICAgIHNldElubmVySFRNTChl
        bGVtZW50LCBzdGFydCArIGh0bWwgKyBlbmQpOwoKICAgICAgICBmb3IgKHZh
        ciBpPTA7IGk8PWRlcHRoOyBpKyspIHsKICAgICAgICAgIGVsZW1lbnQgPSBl
        bGVtZW50LmZpcnN0Q2hpbGQ7CiAgICAgICAgfQoKICAgICAgICAvLyBMb29r
        IGZvciAmc2h5OyB0byByZW1vdmUgaXQuCiAgICAgICAgaWYgKG5lZWRzU2h5
        KSB7CiAgICAgICAgICB2YXIgc2h5RWxlbWVudCA9IGVsZW1lbnQ7CgogICAg
        ICAgICAgLy8gU29tZXRpbWVzIHdlIGdldCBuYW1lbGVzcyBlbGVtZW50cyB3
        aXRoIHRoZSBzaHkgaW5zaWRlCiAgICAgICAgICB3aGlsZSAoc2h5RWxlbWVu
        dC5ub2RlVHlwZSA9PT0gMSAmJiAhc2h5RWxlbWVudC5ub2RlTmFtZSkgewog
        ICAgICAgICAgICBzaHlFbGVtZW50ID0gc2h5RWxlbWVudC5maXJzdENoaWxk
        OwogICAgICAgICAgfQoKICAgICAgICAgIC8vIEF0IHRoaXMgcG9pbnQgaXQn
        cyB0aGUgYWN0dWFsIHVuaWNvZGUgY2hhcmFjdGVyLgogICAgICAgICAgaWYg
        KHNoeUVsZW1lbnQubm9kZVR5cGUgPT09IDMgJiYgc2h5RWxlbWVudC5ub2Rl
        VmFsdWUuY2hhckF0KDApID09PSAiXHUwMEFEIikgewogICAgICAgICAgICBz
        aHlFbGVtZW50Lm5vZGVWYWx1ZSA9IHNoeUVsZW1lbnQubm9kZVZhbHVlLnNs
        aWNlKDEpOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgcmV0dXJu
        IGVsZW1lbnQ7CiAgICAgIH07CgogICAgICAvKgogICAgICAgKiBJbiBzb21l
        IGNhc2VzLCBJbnRlcm5ldCBFeHBsb3JlciBjYW4gY3JlYXRlIGFuIGFub255
        bW91cyBub2RlIGluCiAgICAgICAqIHRoZSBoaWVyYXJjaHkgd2l0aCBubyB0
        YWdOYW1lLiBZb3UgY2FuIGNyZWF0ZSB0aGlzIHNjZW5hcmlvIHZpYToKICAg
        ICAgICoKICAgICAgICogICAgIGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1l
        bnQoImRpdiIpOwogICAgICAgKiAgICAgZGl2LmlubmVySFRNTCA9ICI8dGFi
        bGU+JnNoeTxzY3JpcHQ+PC9zY3JpcHQ+PHRyPjx0ZD5oaTwvdGQ+PC90cj48
        L3RhYmxlPiI7CiAgICAgICAqICAgICBkaXYuZmlyc3RDaGlsZC5maXJzdENo
        aWxkLnRhZ05hbWUgLy89PiAiIgogICAgICAgKgogICAgICAgKiBJZiBvdXIg
        c2NyaXB0IG1hcmtlcnMgYXJlIGluc2lkZSBzdWNoIGEgbm9kZSwgd2UgbmVl
        ZCB0byBmaW5kIHRoYXQKICAgICAgICogbm9kZSBhbmQgdXNlICppdCogYXMg
        dGhlIG1hcmtlci4KICAgICAgICovCiAgICAgIHZhciByZWFsTm9kZSA9IGZ1
        bmN0aW9uKHN0YXJ0KSB7CiAgICAgICAgd2hpbGUgKHN0YXJ0LnBhcmVudE5v
        ZGUudGFnTmFtZSA9PT0gIiIpIHsKICAgICAgICAgIHN0YXJ0ID0gc3RhcnQu
        cGFyZW50Tm9kZTsKICAgICAgICB9CgogICAgICAgIHJldHVybiBzdGFydDsK
        ICAgICAgfTsKCiAgICAgIC8qCiAgICAgICAqIFdoZW4gYXV0b21hdGljYWxs
        eSBhZGRpbmcgYSB0Ym9keSwgSW50ZXJuZXQgRXhwbG9yZXIgaW5zZXJ0cyB0
        aGUKICAgICAgICogdGJvZHkgaW1tZWRpYXRlbHkgYmVmb3JlIHRoZSBmaXJz
        dCA8dHI+LiBPdGhlciBicm93c2VycyBjcmVhdGUgaXQKICAgICAgICogYmVm
        b3JlIHRoZSBmaXJzdCBub2RlLCBubyBtYXR0ZXIgd2hhdC4KICAgICAgICoK
        ICAgICAgICogVGhpcyBtZWFucyB0aGUgdGhlIGZvbGxvd2luZyBjb2RlOgog
        ICAgICAgKgogICAgICAgKiAgICAgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxl
        bWVudCgiZGl2Iik7CiAgICAgICAqICAgICBkaXYuaW5uZXJIVE1MID0gIjx0
        YWJsZT48c2NyaXB0IGlkPSdmaXJzdCc+PC9zY3JpcHQ+PHRyPjx0ZD5oaTwv
        dGQ+PC90cj48c2NyaXB0IGlkPSdsYXN0Jz48L3NjcmlwdD48L3RhYmxlPgog
        ICAgICAgKgogICAgICAgKiBHZW5lcmF0ZXMgdGhlIGZvbGxvd2luZyBET00g
        aW4gSUU6CiAgICAgICAqCiAgICAgICAqICAgICArIGRpdgogICAgICAgKiAg
        ICAgICArIHRhYmxlCiAgICAgICAqICAgICAgICAgLSBzY3JpcHQgaWQ9J2Zp
        cnN0JwogICAgICAgKiAgICAgICAgICsgdGJvZHkKICAgICAgICogICAgICAg
        ICAgICsgdHIKICAgICAgICogICAgICAgICAgICAgKyB0ZAogICAgICAgKiAg
        ICAgICAgICAgICAgIC0gImhpIgogICAgICAgKiAgICAgICAgICAgLSBzY3Jp
        cHQgaWQ9J2xhc3QnCiAgICAgICAqCiAgICAgICAqIFdoaWNoIG1lYW5zIHRo
        YXQgdGhlIHR3byBzY3JpcHQgdGFncywgZXZlbiB0aG91Z2ggdGhleSB3ZXJl
        CiAgICAgICAqIGluc2VydGVkIGF0IHRoZSBzYW1lIHBvaW50IGluIHRoZSBo
        aWVyYXJjaHkgaW4gdGhlIG9yaWdpbmFsCiAgICAgICAqIEhUTUwsIG5vdyBo
        YXZlIGRpZmZlcmVudCBwYXJlbnRzLgogICAgICAgKgogICAgICAgKiBUaGlz
        IGNvZGUgcmVwYXJlbnRzIHRoZSBmaXJzdCBzY3JpcHQgdGFnIGJ5IG1ha2lu
        ZyBpdCB0aGUgdGJvZHkncwogICAgICAgKiBmaXJzdCBjaGlsZC4KICAgICAg
        ICoKICAgICAgICovCiAgICAgIHZhciBmaXhQYXJlbnRhZ2UgPSBmdW5jdGlv
        bihzdGFydCwgZW5kKSB7CiAgICAgICAgaWYgKHN0YXJ0LnBhcmVudE5vZGUg
        IT09IGVuZC5wYXJlbnROb2RlKSB7CiAgICAgICAgICBlbmQucGFyZW50Tm9k
        ZS5pbnNlcnRCZWZvcmUoc3RhcnQsIGVuZC5wYXJlbnROb2RlLmZpcnN0Q2hp
        bGQpOwogICAgICAgIH0KICAgICAgfTsKCiAgICAgIGh0bWxGdW5jID0gZnVu
        Y3Rpb24oaHRtbCwgb3V0ZXJUb28pIHsKICAgICAgICAvLyBnZXQgdGhlIHJl
        YWwgc3RhcnRpbmcgbm9kZS4gc2VlIHJlYWxOb2RlIGZvciBkZXRhaWxzLgog
        ICAgICAgIHZhciBzdGFydCA9IHJlYWxOb2RlKGRvY3VtZW50LmdldEVsZW1l
        bnRCeUlkKHRoaXMuc3RhcnQpKTsKICAgICAgICB2YXIgZW5kID0gZG9jdW1l
        bnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5lbmQpOwogICAgICAgIHZhciBwYXJl
        bnROb2RlID0gZW5kLnBhcmVudE5vZGU7CiAgICAgICAgdmFyIG5vZGUsIG5l
        eHRTaWJsaW5nLCBsYXN0OwoKICAgICAgICAvLyBtYWtlIHN1cmUgdGhhdCB0
        aGUgc3RhcnQgYW5kIGVuZCBub2RlcyBzaGFyZSB0aGUgc2FtZQogICAgICAg
        IC8vIHBhcmVudC4gSWYgbm90LCBmaXggaXQuCiAgICAgICAgZml4UGFyZW50
        YWdlKHN0YXJ0LCBlbmQpOwoKICAgICAgICAvLyByZW1vdmUgYWxsIG9mIHRo
        ZSBub2RlcyBhZnRlciB0aGUgc3RhcnRpbmcgcGxhY2Vob2xkZXIgYW5kCiAg
        ICAgICAgLy8gYmVmb3JlIHRoZSBlbmRpbmcgcGxhY2Vob2xkZXIuCiAgICAg
        ICAgbm9kZSA9IHN0YXJ0Lm5leHRTaWJsaW5nOwogICAgICAgIHdoaWxlIChu
        b2RlKSB7CiAgICAgICAgICBuZXh0U2libGluZyA9IG5vZGUubmV4dFNpYmxp
        bmc7CiAgICAgICAgICBsYXN0ID0gbm9kZSA9PT0gZW5kOwoKICAgICAgICAg
        IC8vIGlmIHRoaXMgaXMgdGhlIGxhc3Qgbm9kZSwgYW5kIHdlIHdhbnQgdG8g
        cmVtb3ZlIGl0IGFzIHdlbGwsCiAgICAgICAgICAvLyBzZXQgdGhlIGBlbmRg
        IG5vZGUgdG8gdGhlIG5leHQgc2libGluZy4gVGhpcyBpcyBiZWNhdXNlCiAg
        ICAgICAgICAvLyBmb3IgdGhlIHJlc3Qgb2YgdGhlIGZ1bmN0aW9uLCB3ZSBp
        bnNlcnQgdGhlIG5ldyBub2RlcwogICAgICAgICAgLy8gYmVmb3JlIHRoZSBl
        bmQgKG5vdGUgdGhhdCBpbnNlcnRCZWZvcmUobm9kZSwgbnVsbCkgaXMKICAg
        ICAgICAgIC8vIHRoZSBzYW1lIGFzIGFwcGVuZENoaWxkKG5vZGUpKS4KICAg
        ICAgICAgIC8vCiAgICAgICAgICAvLyBpZiB3ZSBkbyBub3Qgd2FudCB0byBy
        ZW1vdmUgaXQsIGp1c3QgYnJlYWsuCiAgICAgICAgICBpZiAobGFzdCkgewog
        ICAgICAgICAgICBpZiAob3V0ZXJUb28pIHsgZW5kID0gbm9kZS5uZXh0U2li
        bGluZzsgfSBlbHNlIHsgYnJlYWs7IH0KICAgICAgICAgIH0KCiAgICAgICAg
        ICBub2RlLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQobm9kZSk7CgogICAgICAg
        ICAgLy8gaWYgdGhpcyBpcyB0aGUgbGFzdCBub2RlIGFuZCB3ZSBkaWRuJ3Qg
        YnJlYWsgYmVmb3JlCiAgICAgICAgICAvLyAoYmVjYXVzZSB3ZSB3YW50ZWQg
        dG8gcmVtb3ZlIHRoZSBvdXRlciBub2RlcyksIGJyZWFrCiAgICAgICAgICAv
        LyBub3cuCiAgICAgICAgICBpZiAobGFzdCkgeyBicmVhazsgfQoKICAgICAg
        ICAgIG5vZGUgPSBuZXh0U2libGluZzsKICAgICAgICB9CgogICAgICAgIC8v
        IGdldCB0aGUgZmlyc3Qgbm9kZSBmb3IgdGhlIEhUTUwgc3RyaW5nLCBldmVu
        IGluIGNhc2VzIGxpa2UKICAgICAgICAvLyB0YWJsZXMgYW5kIGxpc3RzIHdo
        ZXJlIGEgc2ltcGxlIGlubmVySFRNTCBvbiBhIGRpdiB3b3VsZAogICAgICAg
        IC8vIHN3YWxsb3cgc29tZSBvZiB0aGUgY29udGVudC4KICAgICAgICBub2Rl
        ID0gZmlyc3ROb2RlRm9yKHN0YXJ0LnBhcmVudE5vZGUsIGh0bWwpOwoKICAg
        ICAgICBpZiAob3V0ZXJUb28pIHsKICAgICAgICAgIHN0YXJ0LnBhcmVudE5v
        ZGUucmVtb3ZlQ2hpbGQoc3RhcnQpOwogICAgICAgIH0KCiAgICAgICAgLy8g
        Y29weSB0aGUgbm9kZXMgZm9yIHRoZSBIVE1MIGJldHdlZW4gdGhlIHN0YXJ0
        aW5nIGFuZCBlbmRpbmcKICAgICAgICAvLyBwbGFjZWhvbGRlci4KICAgICAg
        ICB3aGlsZSAobm9kZSkgewogICAgICAgICAgbmV4dFNpYmxpbmcgPSBub2Rl
        Lm5leHRTaWJsaW5nOwogICAgICAgICAgcGFyZW50Tm9kZS5pbnNlcnRCZWZv
        cmUobm9kZSwgZW5kKTsKICAgICAgICAgIG5vZGUgPSBuZXh0U2libGluZzsK
        ICAgICAgICB9CiAgICAgIH07CgogICAgICAvLyByZW1vdmUgdGhlIG5vZGVz
        IGluIHRoZSBET00gcmVwcmVzZW50aW5nIHRoaXMgbWV0YW1vcnBoLgogICAg
        ICAvLwogICAgICAvLyB0aGlzIGluY2x1ZGVzIHRoZSBzdGFydGluZyBhbmQg
        ZW5kaW5nIHBsYWNlaG9sZGVycy4KICAgICAgcmVtb3ZlRnVuYyA9IGZ1bmN0
        aW9uKCkgewogICAgICAgIHZhciBzdGFydCA9IHJlYWxOb2RlKGRvY3VtZW50
        LmdldEVsZW1lbnRCeUlkKHRoaXMuc3RhcnQpKTsKICAgICAgICB2YXIgZW5k
        ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5lbmQpOwoKICAgICAg
        ICB0aGlzLmh0bWwoJycpOwogICAgICAgIHN0YXJ0LnBhcmVudE5vZGUucmVt
        b3ZlQ2hpbGQoc3RhcnQpOwogICAgICAgIGVuZC5wYXJlbnROb2RlLnJlbW92
        ZUNoaWxkKGVuZCk7CiAgICAgIH07CgogICAgICBhcHBlbmRUb0Z1bmMgPSBm
        dW5jdGlvbihwYXJlbnROb2RlKSB7CiAgICAgICAgdmFyIG5vZGUgPSBmaXJz
        dE5vZGVGb3IocGFyZW50Tm9kZSwgdGhpcy5vdXRlckhUTUwoKSk7CiAgICAg
        ICAgdmFyIG5leHRTaWJsaW5nOwoKICAgICAgICB3aGlsZSAobm9kZSkgewog
        ICAgICAgICAgbmV4dFNpYmxpbmcgPSBub2RlLm5leHRTaWJsaW5nOwogICAg
        ICAgICAgcGFyZW50Tm9kZS5hcHBlbmRDaGlsZChub2RlKTsKICAgICAgICAg
        IG5vZGUgPSBuZXh0U2libGluZzsKICAgICAgICB9CiAgICAgIH07CgogICAg
        ICBhZnRlckZ1bmMgPSBmdW5jdGlvbihodG1sKSB7CiAgICAgICAgLy8gZ2V0
        IHRoZSByZWFsIHN0YXJ0aW5nIG5vZGUuIHNlZSByZWFsTm9kZSBmb3IgZGV0
        YWlscy4KICAgICAgICB2YXIgZW5kID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5
        SWQodGhpcy5lbmQpOwogICAgICAgIHZhciBpbnNlcnRCZWZvcmUgPSBlbmQu
        bmV4dFNpYmxpbmc7CiAgICAgICAgdmFyIHBhcmVudE5vZGUgPSBlbmQucGFy
        ZW50Tm9kZTsKICAgICAgICB2YXIgbmV4dFNpYmxpbmc7CiAgICAgICAgdmFy
        IG5vZGU7CgogICAgICAgIC8vIGdldCB0aGUgZmlyc3Qgbm9kZSBmb3IgdGhl
        IEhUTUwgc3RyaW5nLCBldmVuIGluIGNhc2VzIGxpa2UKICAgICAgICAvLyB0
        YWJsZXMgYW5kIGxpc3RzIHdoZXJlIGEgc2ltcGxlIGlubmVySFRNTCBvbiBh
        IGRpdiB3b3VsZAogICAgICAgIC8vIHN3YWxsb3cgc29tZSBvZiB0aGUgY29u
        dGVudC4KICAgICAgICBub2RlID0gZmlyc3ROb2RlRm9yKHBhcmVudE5vZGUs
        IGh0bWwpOwoKICAgICAgICAvLyBjb3B5IHRoZSBub2RlcyBmb3IgdGhlIEhU
        TUwgYmV0d2VlbiB0aGUgc3RhcnRpbmcgYW5kIGVuZGluZwogICAgICAgIC8v
        IHBsYWNlaG9sZGVyLgogICAgICAgIHdoaWxlIChub2RlKSB7CiAgICAgICAg
        ICBuZXh0U2libGluZyA9IG5vZGUubmV4dFNpYmxpbmc7CiAgICAgICAgICBw
        YXJlbnROb2RlLmluc2VydEJlZm9yZShub2RlLCBpbnNlcnRCZWZvcmUpOwog
        ICAgICAgICAgbm9kZSA9IG5leHRTaWJsaW5nOwogICAgICAgIH0KICAgICAg
        fTsKCiAgICAgIHByZXBlbmRGdW5jID0gZnVuY3Rpb24oaHRtbCkgewogICAg
        ICAgIHZhciBzdGFydCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMu
        c3RhcnQpOwogICAgICAgIHZhciBwYXJlbnROb2RlID0gc3RhcnQucGFyZW50
        Tm9kZTsKICAgICAgICB2YXIgbmV4dFNpYmxpbmc7CiAgICAgICAgdmFyIG5v
        ZGU7CgogICAgICAgIG5vZGUgPSBmaXJzdE5vZGVGb3IocGFyZW50Tm9kZSwg
        aHRtbCk7CiAgICAgICAgdmFyIGluc2VydEJlZm9yZSA9IHN0YXJ0Lm5leHRT
        aWJsaW5nOwoKICAgICAgICB3aGlsZSAobm9kZSkgewogICAgICAgICAgbmV4
        dFNpYmxpbmcgPSBub2RlLm5leHRTaWJsaW5nOwogICAgICAgICAgcGFyZW50
        Tm9kZS5pbnNlcnRCZWZvcmUobm9kZSwgaW5zZXJ0QmVmb3JlKTsKICAgICAg
        ICAgIG5vZGUgPSBuZXh0U2libGluZzsKICAgICAgICB9CiAgICAgIH07CiAg
        ICB9CgogICAgTWV0YW1vcnBoLnByb3RvdHlwZS5odG1sID0gZnVuY3Rpb24o
        aHRtbCkgewogICAgICB0aGlzLmNoZWNrUmVtb3ZlZCgpOwogICAgICBpZiAo
        aHRtbCA9PT0gdW5kZWZpbmVkKSB7IHJldHVybiB0aGlzLmlubmVySFRNTDsg
        fQoKICAgICAgaHRtbEZ1bmMuY2FsbCh0aGlzLCBodG1sKTsKCiAgICAgIHRo
        aXMuaW5uZXJIVE1MID0gaHRtbDsKICAgIH07CgogICAgTWV0YW1vcnBoLnBy
        b3RvdHlwZS5yZXBsYWNlV2l0aCA9IGZ1bmN0aW9uKGh0bWwpIHsKICAgICAg
        dGhpcy5jaGVja1JlbW92ZWQoKTsKICAgICAgaHRtbEZ1bmMuY2FsbCh0aGlz
        LCBodG1sLCB0cnVlKTsKICAgIH07CgogICAgTWV0YW1vcnBoLnByb3RvdHlw
        ZS5yZW1vdmUgPSByZW1vdmVGdW5jOwogICAgTWV0YW1vcnBoLnByb3RvdHlw
        ZS5vdXRlckhUTUwgPSBvdXRlckhUTUxGdW5jOwogICAgTWV0YW1vcnBoLnBy
        b3RvdHlwZS5hcHBlbmRUbyA9IGFwcGVuZFRvRnVuYzsKICAgIE1ldGFtb3Jw
        aC5wcm90b3R5cGUuYWZ0ZXIgPSBhZnRlckZ1bmM7CiAgICBNZXRhbW9ycGgu
        cHJvdG90eXBlLnByZXBlbmQgPSBwcmVwZW5kRnVuYzsKICAgIE1ldGFtb3Jw
        aC5wcm90b3R5cGUuc3RhcnRUYWcgPSBzdGFydFRhZ0Z1bmM7CiAgICBNZXRh
        bW9ycGgucHJvdG90eXBlLmVuZFRhZyA9IGVuZFRhZ0Z1bmM7CgogICAgTWV0
        YW1vcnBoLnByb3RvdHlwZS5pc1JlbW92ZWQgPSBmdW5jdGlvbigpIHsKICAg
        ICAgdmFyIGJlZm9yZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMu
        c3RhcnQpOwogICAgICB2YXIgYWZ0ZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50
        QnlJZCh0aGlzLmVuZCk7CgogICAgICByZXR1cm4gIWJlZm9yZSB8fCAhYWZ0
        ZXI7CiAgICB9OwoKICAgIE1ldGFtb3JwaC5wcm90b3R5cGUuY2hlY2tSZW1v
        dmVkID0gZnVuY3Rpb24oKSB7CiAgICAgIGlmICh0aGlzLmlzUmVtb3ZlZCgp
        KSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJDYW5ub3QgcGVyZm9ybSBv
        cGVyYXRpb25zIG9uIGEgTWV0YW1vcnBoIHRoYXQgaXMgbm90IGluIHRoZSBE
        T00uIik7CiAgICAgIH0KICAgIH07CgogICAgcmV0dXJuIE1ldGFtb3JwaDsK
        ICB9KTsKCn0pKCk7CgooZnVuY3Rpb24oKSB7Ci8qKgpAbW9kdWxlIGVtYmVy
        CkBzdWJtb2R1bGUgZW1iZXItaGFuZGxlYmFycy1jb21waWxlcgoqLwoKLy8g
        RWxpbWluYXRlIGRlcGVuZGVuY3kgb24gYW55IEVtYmVyIHRvIHNpbXBsaWZ5
        IHByZWNvbXBpbGF0aW9uIHdvcmtmbG93CnZhciBvYmplY3RDcmVhdGUgPSBP
        YmplY3QuY3JlYXRlIHx8IGZ1bmN0aW9uKHBhcmVudCkgewogIGZ1bmN0aW9u
        IEYoKSB7fQogIEYucHJvdG90eXBlID0gcGFyZW50OwogIHJldHVybiBuZXcg
        RigpOwp9OwoKdmFyIEhhbmRsZWJhcnMgPSAoRW1iZXIuaW1wb3J0cyAmJiBF
        bWJlci5pbXBvcnRzLkhhbmRsZWJhcnMpIHx8ICh0aGlzICYmIHRoaXMuSGFu
        ZGxlYmFycyk7CmlmICghSGFuZGxlYmFycyAmJiB0eXBlb2YgcmVxdWlyZSA9
        PT0gJ2Z1bmN0aW9uJykgewogIEhhbmRsZWJhcnMgPSByZXF1aXJlKCdoYW5k
        bGViYXJzJyk7Cn0KCkVtYmVyLmFzc2VydCgiRW1iZXIgSGFuZGxlYmFycyBy
        ZXF1aXJlcyBIYW5kbGViYXJzIHZlcnNpb24gMS4wIG9yIDEuMS4gSW5jbHVk
        ZSAiICsKICAgICAgICAgICAgICJhIFNDUklQVCB0YWcgaW4gdGhlIEhUTUwg
        SEVBRCBsaW5raW5nIHRvIHRoZSBIYW5kbGViYXJzIGZpbGUgIiArCiAgICAg
        ICAgICAgICAiYmVmb3JlIHlvdSBsaW5rIHRvIEVtYmVyLiIsIEhhbmRsZWJh
        cnMpOwoKRW1iZXIuYXNzZXJ0KCJFbWJlciBIYW5kbGViYXJzIHJlcXVpcmVz
        IEhhbmRsZWJhcnMgdmVyc2lvbiAxLjAgb3IgMS4xLCAiICsKICAgICAgICAg
        ICAgICJDT01QSUxFUl9SRVZJU0lPTiBleHBlY3RlZDogNCwgZ290OiAiICsg
        IEhhbmRsZWJhcnMuQ09NUElMRVJfUkVWSVNJT04gKwogICAgICAgICAgICAg
        IiAtIFBsZWFzZSBub3RlOiBCdWlsZHMgb2YgbWFzdGVyIG1heSBoYXZlIG90
        aGVyIENPTVBJTEVSX1JFVklTSU9OIHZhbHVlcy4iLAogICAgICAgICAgICAg
        SGFuZGxlYmFycy5DT01QSUxFUl9SRVZJU0lPTiA9PT0gNCk7CgovKioKICBQ
        cmVwYXJlcyB0aGUgSGFuZGxlYmFycyB0ZW1wbGF0aW5nIGxpYnJhcnkgZm9y
        IHVzZSBpbnNpZGUgRW1iZXIncyB2aWV3CiAgc3lzdGVtLgoKICBUaGUgYEVt
        YmVyLkhhbmRsZWJhcnNgIG9iamVjdCBpcyB0aGUgc3RhbmRhcmQgSGFuZGxl
        YmFycyBsaWJyYXJ5LCBleHRlbmRlZCB0bwogIHVzZSBFbWJlcidzIGBnZXQo
        KWAgbWV0aG9kIGluc3RlYWQgb2YgZGlyZWN0IHByb3BlcnR5IGFjY2Vzcywg
        d2hpY2ggYWxsb3dzCiAgY29tcHV0ZWQgcHJvcGVydGllcyB0byBiZSB1c2Vk
        IGluc2lkZSB0ZW1wbGF0ZXMuCgogIFRvIGNyZWF0ZSBhbiBgRW1iZXIuSGFu
        ZGxlYmFyc2AgdGVtcGxhdGUsIGNhbGwgYEVtYmVyLkhhbmRsZWJhcnMuY29t
        cGlsZSgpYC4KICBUaGlzIHdpbGwgcmV0dXJuIGEgZnVuY3Rpb24gdGhhdCBj
        YW4gYmUgdXNlZCBieSBgRW1iZXIuVmlld2AgZm9yIHJlbmRlcmluZy4KCiAg
        QGNsYXNzIEhhbmRsZWJhcnMKICBAbmFtZXNwYWNlIEVtYmVyCiovCkVtYmVy
        LkhhbmRsZWJhcnMgPSBvYmplY3RDcmVhdGUoSGFuZGxlYmFycyk7CgovKioK
        ICBSZWdpc3RlciBhIGJvdW5kIGhlbHBlciBvciBjdXN0b20gdmlldyBoZWxw
        ZXIuCgogICMjIFNpbXBsZSBib3VuZCBoZWxwZXIgZXhhbXBsZQoKICBgYGBq
        YXZhc2NyaXB0CiAgRW1iZXIuSGFuZGxlYmFycy5oZWxwZXIoJ2NhcGl0YWxp
        emUnLCBmdW5jdGlvbih2YWx1ZSkgewogICAgcmV0dXJuIHZhbHVlLnRvVXBw
        ZXJDYXNlKCk7CiAgfSk7CiAgYGBgCgogIFRoZSBhYm92ZSBib3VuZCBoZWxw
        ZXIgY2FuIGJlIHVzZWQgaW5zaWRlIG9mIHRlbXBsYXRlcyBhcyBmb2xsb3dz
        OgoKICBgYGBoYW5kbGViYXJzCiAge3tjYXBpdGFsaXplIG5hbWV9fQogIGBg
        YAoKICBJbiB0aGlzIGNhc2UsIHdoZW4gdGhlIGBuYW1lYCBwcm9wZXJ0eSBv
        ZiB0aGUgdGVtcGxhdGUncyBjb250ZXh0IGNoYW5nZXMsCiAgdGhlIHJlbmRl
        cmVkIHZhbHVlIG9mIHRoZSBoZWxwZXIgd2lsbCB1cGRhdGUgdG8gcmVmbGVj
        dCB0aGlzIGNoYW5nZS4KCiAgRm9yIG1vcmUgZXhhbXBsZXMgb2YgYm91bmQg
        aGVscGVycywgc2VlIGRvY3VtZW50YXRpb24gZm9yCiAgYEVtYmVyLkhhbmRs
        ZWJhcnMucmVnaXN0ZXJCb3VuZEhlbHBlcmAuCgogICMjIEN1c3RvbSB2aWV3
        IGhlbHBlciBleGFtcGxlCgogIEFzc3VtaW5nIGEgdmlldyBzdWJjbGFzcyBu
        YW1lZCBgQXBwLkNhbGVuZGFyVmlld2Agd2VyZSBkZWZpbmVkLCBhIGhlbHBl
        cgogIGZvciByZW5kZXJpbmcgaW5zdGFuY2VzIG9mIHRoaXMgdmlldyBjb3Vs
        ZCBiZSByZWdpc3RlcmVkIGFzIGZvbGxvd3M6CgogIGBgYGphdmFzY3JpcHQK
        ICBFbWJlci5IYW5kbGViYXJzLmhlbHBlcignY2FsZW5kYXInLCBBcHAuQ2Fs
        ZW5kYXJWaWV3KToKICBgYGAKCiAgVGhlIGFib3ZlIGJvdW5kIGhlbHBlciBj
        YW4gYmUgdXNlZCBpbnNpZGUgb2YgdGVtcGxhdGVzIGFzIGZvbGxvd3M6Cgog
        IGBgYGhhbmRsZWJhcnMKICB7e2NhbGVuZGFyfX0KICBgYGAKCiAgV2hpY2gg
        aXMgZnVuY3Rpb25hbGx5IGVxdWl2YWxlbnQgdG86CgogIGBgYGhhbmRsZWJh
        cnMKICB7e3ZpZXcgQXBwLkNhbGVuZGFyVmlld319CiAgYGBgCgogIE9wdGlv
        bnMgaW4gdGhlIGhlbHBlciB3aWxsIGJlIHBhc3NlZCB0byB0aGUgdmlldyBp
        biBleGFjdGx5IHRoZSBzYW1lCiAgbWFubmVyIGFzIHdpdGggdGhlIGB2aWV3
        YCBoZWxwZXIuCgogIEBtZXRob2QgaGVscGVyCiAgQGZvciBFbWJlci5IYW5k
        bGViYXJzCiAgQHBhcmFtIHtTdHJpbmd9IG5hbWUKICBAcGFyYW0ge0Z1bmN0
        aW9ufEVtYmVyLlZpZXd9IGZ1bmN0aW9uIG9yIHZpZXcgY2xhc3MgY29uc3Ry
        dWN0b3IKICBAcGFyYW0ge1N0cmluZ30gZGVwZW5kZW50S2V5cyoKKi8KRW1i
        ZXIuSGFuZGxlYmFycy5oZWxwZXIgPSBmdW5jdGlvbihuYW1lLCB2YWx1ZSkg
        ewogIEVtYmVyLmFzc2VydCgiWW91IHRyaWVkIHRvIHJlZ2lzdGVyIGEgY29t
        cG9uZW50IG5hbWVkICciICsgbmFtZSArICInLCBidXQgY29tcG9uZW50IG5h
        bWVzIG11c3QgaW5jbHVkZSBhICctJyIsICFFbWJlci5Db21wb25lbnQuZGV0
        ZWN0KHZhbHVlKSB8fCBuYW1lLm1hdGNoKC8tLykpOwoKICBpZiAoRW1iZXIu
        Vmlldy5kZXRlY3QodmFsdWUpKSB7CiAgICBFbWJlci5IYW5kbGViYXJzLnJl
        Z2lzdGVySGVscGVyKG5hbWUsIEVtYmVyLkhhbmRsZWJhcnMubWFrZVZpZXdI
        ZWxwZXIodmFsdWUpKTsKICB9IGVsc2UgewogICAgRW1iZXIuSGFuZGxlYmFy
        cy5yZWdpc3RlckJvdW5kSGVscGVyLmFwcGx5KG51bGwsIGFyZ3VtZW50cyk7
        CiAgfQp9OwoKLyoqCiAgUmV0dXJucyBhIGhlbHBlciBmdW5jdGlvbiB0aGF0
        IHJlbmRlcnMgdGhlIHByb3ZpZGVkIFZpZXdDbGFzcy4KCiAgVXNlZCBpbnRl
        cm5hbGx5IGJ5IEVtYmVyLkhhbmRsZWJhcnMuaGVscGVyIGFuZCBvdGhlciBt
        ZXRob2RzCiAgaW52b2x2aW5nIGhlbHBlci9jb21wb25lbnQgcmVnaXN0cmF0
        aW9uLgoKICBAcHJpdmF0ZQogIEBtZXRob2QgaGVscGVyCiAgQGZvciBFbWJl
        ci5IYW5kbGViYXJzCiAgQHBhcmFtIHtGdW5jdGlvbn0gVmlld0NsYXNzIHZp
        ZXcgY2xhc3MgY29uc3RydWN0b3IKKi8KRW1iZXIuSGFuZGxlYmFycy5tYWtl
        Vmlld0hlbHBlciA9IGZ1bmN0aW9uKFZpZXdDbGFzcykgewogIHJldHVybiBm
        dW5jdGlvbihvcHRpb25zKSB7CiAgICBFbWJlci5hc3NlcnQoIllvdSBjYW4g
        b25seSBwYXNzIGF0dHJpYnV0ZXMgKHN1Y2ggYXMgbmFtZT12YWx1ZSkgbm90
        IGJhcmUgdmFsdWVzIHRvIGEgaGVscGVyIGZvciBhIFZpZXcgZm91bmQgaW4g
        JyIgKyBWaWV3Q2xhc3MudG9TdHJpbmcoKSArICInIiwgYXJndW1lbnRzLmxl
        bmd0aCA8IDIpOwogICAgcmV0dXJuIEVtYmVyLkhhbmRsZWJhcnMuaGVscGVy
        cy52aWV3LmNhbGwodGhpcywgVmlld0NsYXNzLCBvcHRpb25zKTsKICB9Owp9
        OwoKLyoqCkBjbGFzcyBoZWxwZXJzCkBuYW1lc3BhY2UgRW1iZXIuSGFuZGxl
        YmFycwoqLwpFbWJlci5IYW5kbGViYXJzLmhlbHBlcnMgPSBvYmplY3RDcmVh
        dGUoSGFuZGxlYmFycy5oZWxwZXJzKTsKCi8qKgogIE92ZXJyaWRlIHRoZSB0
        aGUgb3Bjb2RlIGNvbXBpbGVyIGFuZCBKYXZhU2NyaXB0IGNvbXBpbGVyIGZv
        ciBIYW5kbGViYXJzLgoKICBAY2xhc3MgQ29tcGlsZXIKICBAbmFtZXNwYWNl
        IEVtYmVyLkhhbmRsZWJhcnMKICBAcHJpdmF0ZQogIEBjb25zdHJ1Y3Rvcgoq
        LwpFbWJlci5IYW5kbGViYXJzLkNvbXBpbGVyID0gZnVuY3Rpb24oKSB7fTsK
        Ci8vIEhhbmRsZWJhcnMuQ29tcGlsZXIgZG9lc24ndCBleGlzdCBpbiBydW50
        aW1lLW9ubHkKaWYgKEhhbmRsZWJhcnMuQ29tcGlsZXIpIHsKICBFbWJlci5I
        YW5kbGViYXJzLkNvbXBpbGVyLnByb3RvdHlwZSA9IG9iamVjdENyZWF0ZShI
        YW5kbGViYXJzLkNvbXBpbGVyLnByb3RvdHlwZSk7Cn0KCkVtYmVyLkhhbmRs
        ZWJhcnMuQ29tcGlsZXIucHJvdG90eXBlLmNvbXBpbGVyID0gRW1iZXIuSGFu
        ZGxlYmFycy5Db21waWxlcjsKCi8qKgogIEBjbGFzcyBKYXZhU2NyaXB0Q29t
        cGlsZXIKICBAbmFtZXNwYWNlIEVtYmVyLkhhbmRsZWJhcnMKICBAcHJpdmF0
        ZQogIEBjb25zdHJ1Y3RvcgoqLwpFbWJlci5IYW5kbGViYXJzLkphdmFTY3Jp
        cHRDb21waWxlciA9IGZ1bmN0aW9uKCkge307CgovLyBIYW5kbGViYXJzLkph
        dmFTY3JpcHRDb21waWxlciBkb2Vzbid0IGV4aXN0IGluIHJ1bnRpbWUtb25s
        eQppZiAoSGFuZGxlYmFycy5KYXZhU2NyaXB0Q29tcGlsZXIpIHsKICBFbWJl
        ci5IYW5kbGViYXJzLkphdmFTY3JpcHRDb21waWxlci5wcm90b3R5cGUgPSBv
        YmplY3RDcmVhdGUoSGFuZGxlYmFycy5KYXZhU2NyaXB0Q29tcGlsZXIucHJv
        dG90eXBlKTsKICBFbWJlci5IYW5kbGViYXJzLkphdmFTY3JpcHRDb21waWxl
        ci5wcm90b3R5cGUuY29tcGlsZXIgPSBFbWJlci5IYW5kbGViYXJzLkphdmFT
        Y3JpcHRDb21waWxlcjsKfQoKCkVtYmVyLkhhbmRsZWJhcnMuSmF2YVNjcmlw
        dENvbXBpbGVyLnByb3RvdHlwZS5uYW1lc3BhY2UgPSAiRW1iZXIuSGFuZGxl
        YmFycyI7CgpFbWJlci5IYW5kbGViYXJzLkphdmFTY3JpcHRDb21waWxlci5w
        cm90b3R5cGUuaW5pdGlhbGl6ZUJ1ZmZlciA9IGZ1bmN0aW9uKCkgewogIHJl
        dHVybiAiJyciOwp9OwoKLyoqCiAgT3ZlcnJpZGUgdGhlIGRlZmF1bHQgYnVm
        ZmVyIGZvciBFbWJlciBIYW5kbGViYXJzLiBCeSBkZWZhdWx0LCBIYW5kbGVi
        YXJzCiAgY3JlYXRlcyBhbiBlbXB0eSBTdHJpbmcgYXQgdGhlIGJlZ2lubmlu
        ZyBvZiBlYWNoIGludm9jYXRpb24gYW5kIGFwcGVuZHMgdG8KICBpdC4gRW1i
        ZXIncyBIYW5kbGViYXJzIG92ZXJyaWRlcyB0aGlzIHRvIGFwcGVuZCB0byBh
        IHNpbmdsZSBzaGFyZWQgYnVmZmVyLgoKICBAcHJpdmF0ZQogIEBtZXRob2Qg
        YXBwZW5kVG9CdWZmZXIKICBAcGFyYW0gc3RyaW5nIHtTdHJpbmd9CiovCkVt
        YmVyLkhhbmRsZWJhcnMuSmF2YVNjcmlwdENvbXBpbGVyLnByb3RvdHlwZS5h
        cHBlbmRUb0J1ZmZlciA9IGZ1bmN0aW9uKHN0cmluZykgewogIHJldHVybiAi
        ZGF0YS5idWZmZXIucHVzaCgiK3N0cmluZysiKTsiOwp9OwoKLy8gSGFja3Mg
        YWhlYWQ6Ci8vIEhhbmRsZWJhcnMgcHJlc2VudGx5IGhhcyBhIGJ1ZyB3aGVy
        ZSB0aGUgYGJsb2NrSGVscGVyTWlzc2luZ2AgaG9vawovLyBkb2Vzbid0IGdl
        dCBwYXNzZWQgdGhlIG5hbWUgb2YgdGhlIG1pc3NpbmcgaGVscGVyIG5hbWUs
        IGJ1dCByYXRoZXIKLy8gZ2V0cyBwYXNzZWQgdGhlIHZhbHVlIG9mIHRoYXQg
        bWlzc2luZyBoZWxwZXIgZXZhbHVhdGVkIG9uIHRoZSBjdXJyZW50Ci8vIGNv
        bnRleHQsIHdoaWNoIGlzIG1vc3QgbGlrZWx5IGB1bmRlZmluZWRgIGFuZCB0
        b3RhbGx5IHVzZWxlc3MuCi8vCi8vIFNvIHdlIGFsdGVyIHRoZSBjb21waWxl
        ZCB0ZW1wbGF0ZSBmdW5jdGlvbiB0byBwYXNzIHRoZSBuYW1lIG9mIHRoZSBo
        ZWxwZXIKLy8gaW5zdGVhZCwgYXMgZXhwZWN0ZWQuCi8vCi8vIFRoaXMgY2Fu
        IGdvIGF3YXkgb25jZSB0aGUgZm9sbG93aW5nIGlzIGNsb3NlZDoKLy8gaHR0
        cHM6Ly9naXRodWIuY29tL3d5Y2F0cy9oYW5kbGViYXJzLmpzL2lzc3Vlcy82
        MzQKCnZhciBET1RfTE9PS1VQX1JFR0VYID0gL2hlbHBlcnNcLiguKj8pXCkv
        LAogICAgQlJBQ0tFVF9TVFJJTkdfTE9PS1VQX1JFR0VYID0gL2hlbHBlcnNc
        WycoLio/KScvLAogICAgSU5WT0NBVElPTl9TUExJVFRJTkdfUkVHRVggPSAv
        KC4qYmxvY2tIZWxwZXJNaXNzaW5nXC5jYWxsXCguKikoc3RhY2tbMC05XSsp
        KCwuKikvOwoKRW1iZXIuSGFuZGxlYmFycy5KYXZhU2NyaXB0Q29tcGlsZXIu
        c3RyaW5naWZ5TGFzdEJsb2NrSGVscGVyTWlzc2luZ0ludm9jYXRpb24gPSBm
        dW5jdGlvbihzb3VyY2UpIHsKICB2YXIgaGVscGVySW52b2NhdGlvbiA9IHNv
        dXJjZVtzb3VyY2UubGVuZ3RoIC0gMV0sCiAgICAgIGhlbHBlck5hbWUgPSAo
        RE9UX0xPT0tVUF9SRUdFWC5leGVjKGhlbHBlckludm9jYXRpb24pIHx8IEJS
        QUNLRVRfU1RSSU5HX0xPT0tVUF9SRUdFWC5leGVjKGhlbHBlckludm9jYXRp
        b24pKVsxXSwKICAgICAgbWF0Y2hlcyA9IElOVk9DQVRJT05fU1BMSVRUSU5H
        X1JFR0VYLmV4ZWMoaGVscGVySW52b2NhdGlvbik7CgogIHNvdXJjZVtzb3Vy
        Y2UubGVuZ3RoIC0gMV0gPSBtYXRjaGVzWzFdICsgIiciICsgaGVscGVyTmFt
        ZSArICInIiArIG1hdGNoZXNbM107Cn0KdmFyIHN0cmluZ2lmeUJsb2NrSGVs
        cGVyTWlzc2luZyA9IEVtYmVyLkhhbmRsZWJhcnMuSmF2YVNjcmlwdENvbXBp
        bGVyLnN0cmluZ2lmeUxhc3RCbG9ja0hlbHBlck1pc3NpbmdJbnZvY2F0aW9u
        OwoKdmFyIG9yaWdpbmFsQmxvY2tWYWx1ZSA9IEVtYmVyLkhhbmRsZWJhcnMu
        SmF2YVNjcmlwdENvbXBpbGVyLnByb3RvdHlwZS5ibG9ja1ZhbHVlOwpFbWJl
        ci5IYW5kbGViYXJzLkphdmFTY3JpcHRDb21waWxlci5wcm90b3R5cGUuYmxv
        Y2tWYWx1ZSA9IGZ1bmN0aW9uKCkgewogIG9yaWdpbmFsQmxvY2tWYWx1ZS5h
        cHBseSh0aGlzLCBhcmd1bWVudHMpOwogIHN0cmluZ2lmeUJsb2NrSGVscGVy
        TWlzc2luZyh0aGlzLnNvdXJjZSk7Cn07Cgp2YXIgb3JpZ2luYWxBbWJpZ3Vv
        dXNCbG9ja1ZhbHVlID0gRW1iZXIuSGFuZGxlYmFycy5KYXZhU2NyaXB0Q29t
        cGlsZXIucHJvdG90eXBlLmFtYmlndW91c0Jsb2NrVmFsdWU7CkVtYmVyLkhh
        bmRsZWJhcnMuSmF2YVNjcmlwdENvbXBpbGVyLnByb3RvdHlwZS5hbWJpZ3Vv
        dXNCbG9ja1ZhbHVlID0gZnVuY3Rpb24oKSB7CiAgb3JpZ2luYWxBbWJpZ3Vv
        dXNCbG9ja1ZhbHVlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgc3RyaW5n
        aWZ5QmxvY2tIZWxwZXJNaXNzaW5nKHRoaXMuc291cmNlKTsKfTsKCnZhciBw
        cmVmaXggPSAiZW1iZXIiICsgKCtuZXcgRGF0ZSgpKSwgaW5jciA9IDE7Cgov
        KioKICBSZXdyaXRlIHNpbXBsZSBtdXN0YWNoZXMgZnJvbSBge3tmb299fWAg
        dG8gYHt7YmluZCAiZm9vIn19YC4gVGhpcyBtZWFucyB0aGF0CiAgYWxsIHNp
        bXBsZSBtdXN0YWNoZXMgaW4gRW1iZXIncyBIYW5kbGViYXJzIHdpbGwgYWxz
        byBzZXQgdXAgYW4gb2JzZXJ2ZXIgdG8KICBrZWVwIHRoZSBET00gdXAgdG8g
        ZGF0ZSB3aGVuIHRoZSB1bmRlcmx5aW5nIHByb3BlcnR5IGNoYW5nZXMuCgog
        IEBwcml2YXRlCiAgQG1ldGhvZCBtdXN0YWNoZQogIEBmb3IgRW1iZXIuSGFu
        ZGxlYmFycy5Db21waWxlcgogIEBwYXJhbSBtdXN0YWNoZQoqLwpFbWJlci5I
        YW5kbGViYXJzLkNvbXBpbGVyLnByb3RvdHlwZS5tdXN0YWNoZSA9IGZ1bmN0
        aW9uKG11c3RhY2hlKSB7CiAgaWYgKG11c3RhY2hlLmlzSGVscGVyICYmIG11
        c3RhY2hlLmlkLnN0cmluZyA9PT0gJ2NvbnRyb2wnKSB7CiAgICBtdXN0YWNo
        ZS5oYXNoID0gbXVzdGFjaGUuaGFzaCB8fCBuZXcgSGFuZGxlYmFycy5BU1Qu
        SGFzaE5vZGUoW10pOwogICAgbXVzdGFjaGUuaGFzaC5wYWlycy5wdXNoKFsi
        Y29udHJvbElEIiwgbmV3IEhhbmRsZWJhcnMuQVNULlN0cmluZ05vZGUocHJl
        Zml4ICsgaW5jcisrKV0pOwogIH0gZWxzZSBpZiAobXVzdGFjaGUucGFyYW1z
        Lmxlbmd0aCB8fCBtdXN0YWNoZS5oYXNoKSB7CiAgICAvLyBubyBjaGFuZ2Vz
        IHJlcXVpcmVkCiAgfSBlbHNlIHsKICAgIHZhciBpZCA9IG5ldyBIYW5kbGVi
        YXJzLkFTVC5JZE5vZGUoW3sgcGFydDogJ190cmlhZ2VNdXN0YWNoZScgfV0p
        OwoKICAgIC8vIFVwZGF0ZSB0aGUgbXVzdGFjaGUgbm9kZSB0byBpbmNsdWRl
        IGEgaGFzaCB2YWx1ZSBpbmRpY2F0aW5nIHdoZXRoZXIgdGhlIG9yaWdpbmFs
        IG5vZGUKICAgIC8vIHdhcyBlc2NhcGVkLiBUaGlzIHdpbGwgYWxsb3cgdXMg
        dG8gcHJvcGVybHkgZXNjYXBlIHZhbHVlcyB3aGVuIHRoZSB1bmRlcmx5aW5n
        IHZhbHVlCiAgICAvLyBjaGFuZ2VzIGFuZCB3ZSBuZWVkIHRvIHJlLXJlbmRl
        ciB0aGUgdmFsdWUuCiAgICBpZiAoIW11c3RhY2hlLmVzY2FwZWQpIHsKICAg
        ICAgbXVzdGFjaGUuaGFzaCA9IG11c3RhY2hlLmhhc2ggfHwgbmV3IEhhbmRs
        ZWJhcnMuQVNULkhhc2hOb2RlKFtdKTsKICAgICAgbXVzdGFjaGUuaGFzaC5w
        YWlycy5wdXNoKFsidW5lc2NhcGVkIiwgbmV3IEhhbmRsZWJhcnMuQVNULlN0
        cmluZ05vZGUoInRydWUiKV0pOwogICAgfQogICAgbXVzdGFjaGUgPSBuZXcg
        SGFuZGxlYmFycy5BU1QuTXVzdGFjaGVOb2RlKFtpZF0uY29uY2F0KFttdXN0
        YWNoZS5pZF0pLCBtdXN0YWNoZS5oYXNoLCAhbXVzdGFjaGUuZXNjYXBlZCk7
        CiAgfQoKICByZXR1cm4gSGFuZGxlYmFycy5Db21waWxlci5wcm90b3R5cGUu
        bXVzdGFjaGUuY2FsbCh0aGlzLCBtdXN0YWNoZSk7Cn07CgovKioKICBVc2Vk
        IGZvciBwcmVjb21waWxhdGlvbiBvZiBFbWJlciBIYW5kbGViYXJzIHRlbXBs
        YXRlcy4gVGhpcyB3aWxsIG5vdCBiZSB1c2VkCiAgZHVyaW5nIG5vcm1hbCBh
        cHAgZXhlY3V0aW9uLgoKICBAbWV0aG9kIHByZWNvbXBpbGUKICBAZm9yIEVt
        YmVyLkhhbmRsZWJhcnMKICBAc3RhdGljCiAgQHBhcmFtIHtTdHJpbmd9IHN0
        cmluZyBUaGUgdGVtcGxhdGUgdG8gcHJlY29tcGlsZQoqLwpFbWJlci5IYW5k
        bGViYXJzLnByZWNvbXBpbGUgPSBmdW5jdGlvbihzdHJpbmcpIHsKICB2YXIg
        YXN0ID0gSGFuZGxlYmFycy5wYXJzZShzdHJpbmcpOwoKICB2YXIgb3B0aW9u
        cyA9IHsKICAgIGtub3duSGVscGVyczogewogICAgICBhY3Rpb246IHRydWUs
        CiAgICAgIHVuYm91bmQ6IHRydWUsCiAgICAgICdiaW5kLWF0dHInOiB0cnVl
        LAogICAgICB0ZW1wbGF0ZTogdHJ1ZSwKICAgICAgdmlldzogdHJ1ZSwKICAg
        ICAgX3RyaWFnZU11c3RhY2hlOiB0cnVlCiAgICB9LAogICAgZGF0YTogdHJ1
        ZSwKICAgIHN0cmluZ1BhcmFtczogdHJ1ZQogIH07CgogIHZhciBlbnZpcm9u
        bWVudCA9IG5ldyBFbWJlci5IYW5kbGViYXJzLkNvbXBpbGVyKCkuY29tcGls
        ZShhc3QsIG9wdGlvbnMpOwogIHJldHVybiBuZXcgRW1iZXIuSGFuZGxlYmFy
        cy5KYXZhU2NyaXB0Q29tcGlsZXIoKS5jb21waWxlKGVudmlyb25tZW50LCBv
        cHRpb25zLCB1bmRlZmluZWQsIHRydWUpOwp9OwoKLy8gV2UgZG9uJ3Qgc3Vw
        cG9ydCB0aGlzIGZvciBIYW5kbGViYXJzIHJ1bnRpbWUtb25seQppZiAoSGFu
        ZGxlYmFycy5jb21waWxlKSB7CiAgLyoqCiAgICBUaGUgZW50cnkgcG9pbnQg
        Zm9yIEVtYmVyIEhhbmRsZWJhcnMuIFRoaXMgcmVwbGFjZXMgdGhlIGRlZmF1
        bHQKICAgIGBIYW5kbGViYXJzLmNvbXBpbGVgIGFuZCB0dXJucyBvbiB0ZW1w
        bGF0ZS1sb2NhbCBkYXRhIGFuZCBTdHJpbmcKICAgIHBhcmFtZXRlcnMuCgog
        ICAgQG1ldGhvZCBjb21waWxlCiAgICBAZm9yIEVtYmVyLkhhbmRsZWJhcnMK
        ICAgIEBzdGF0aWMKICAgIEBwYXJhbSB7U3RyaW5nfSBzdHJpbmcgVGhlIHRl
        bXBsYXRlIHRvIGNvbXBpbGUKICAgIEByZXR1cm4ge0Z1bmN0aW9ufQogICov
        CiAgRW1iZXIuSGFuZGxlYmFycy5jb21waWxlID0gZnVuY3Rpb24oc3RyaW5n
        KSB7CiAgICB2YXIgYXN0ID0gSGFuZGxlYmFycy5wYXJzZShzdHJpbmcpOwog
        ICAgdmFyIG9wdGlvbnMgPSB7IGRhdGE6IHRydWUsIHN0cmluZ1BhcmFtczog
        dHJ1ZSB9OwogICAgdmFyIGVudmlyb25tZW50ID0gbmV3IEVtYmVyLkhhbmRs
        ZWJhcnMuQ29tcGlsZXIoKS5jb21waWxlKGFzdCwgb3B0aW9ucyk7CiAgICB2
        YXIgdGVtcGxhdGVTcGVjID0gbmV3IEVtYmVyLkhhbmRsZWJhcnMuSmF2YVNj
        cmlwdENvbXBpbGVyKCkuY29tcGlsZShlbnZpcm9ubWVudCwgb3B0aW9ucywg
        dW5kZWZpbmVkLCB0cnVlKTsKCiAgICB2YXIgdGVtcGxhdGUgPSBFbWJlci5I
        YW5kbGViYXJzLnRlbXBsYXRlKHRlbXBsYXRlU3BlYyk7CiAgICB0ZW1wbGF0
        ZS5pc01ldGhvZCA9IGZhbHNlOyAvL01ha2Ugc3VyZSB3ZSBkb24ndCB3cmFw
        IHRlbXBsYXRlcyB3aXRoIC5fc3VwZXIKCiAgICByZXR1cm4gdGVtcGxhdGU7
        CiAgfTsKfQoKCn0pKCk7CgooZnVuY3Rpb24oKSB7CnZhciBzbGljZSA9IEFy
        cmF5LnByb3RvdHlwZS5zbGljZSwKICAgIG9yaWdpbmFsVGVtcGxhdGUgPSBF
        bWJlci5IYW5kbGViYXJzLnRlbXBsYXRlOwoKLyoqCiAgSWYgYSBwYXRoIHN0
        YXJ0cyB3aXRoIGEgcmVzZXJ2ZWQga2V5d29yZCwgcmV0dXJucyB0aGUgcm9v
        dAogIHRoYXQgc2hvdWxkIGJlIHVzZWQuCgogIEBwcml2YXRlCiAgQG1ldGhv
        ZCBub3JtYWxpemVQYXRoCiAgQGZvciBFbWJlcgogIEBwYXJhbSByb290IHtP
        YmplY3R9CiAgQHBhcmFtIHBhdGgge1N0cmluZ30KICBAcGFyYW0gZGF0YSB7
        SGFzaH0KKi8KdmFyIG5vcm1hbGl6ZVBhdGggPSBFbWJlci5IYW5kbGViYXJz
        Lm5vcm1hbGl6ZVBhdGggPSBmdW5jdGlvbihyb290LCBwYXRoLCBkYXRhKSB7
        CiAgdmFyIGtleXdvcmRzID0gKGRhdGEgJiYgZGF0YS5rZXl3b3JkcykgfHwg
        e30sCiAgICAgIGtleXdvcmQsIGlzS2V5d29yZDsKCiAgLy8gR2V0IHRoZSBm
        aXJzdCBzZWdtZW50IG9mIHRoZSBwYXRoLiBGb3IgZXhhbXBsZSwgaWYgdGhl
        CiAgLy8gcGF0aCBpcyAiZm9vLmJhci5iYXoiLCByZXR1cm5zICJmb28iLgog
        IGtleXdvcmQgPSBwYXRoLnNwbGl0KCcuJywgMSlbMF07CgogIC8vIFRlc3Qg
        dG8gc2VlIGlmIHRoZSBmaXJzdCBwYXRoIGlzIGEga2V5d29yZCB0aGF0IGhh
        cyBiZWVuCiAgLy8gcGFzc2VkIGFsb25nIGluIHRoZSB2aWV3J3MgZGF0YSBo
        YXNoLiBJZiBzbywgd2Ugd2lsbCB0cmVhdAogIC8vIHRoYXQgb2JqZWN0IGFz
        IHRoZSBuZXcgcm9vdC4KICBpZiAoa2V5d29yZHMuaGFzT3duUHJvcGVydHko
        a2V5d29yZCkpIHsKICAgIC8vIExvb2sgdXAgdGhlIHZhbHVlIGluIHRoZSB0
        ZW1wbGF0ZSdzIGRhdGEgaGFzaC4KICAgIHJvb3QgPSBrZXl3b3Jkc1trZXl3
        b3JkXTsKICAgIGlzS2V5d29yZCA9IHRydWU7CgogICAgLy8gSGFuZGxlIGNh
        c2VzIHdoZXJlIHRoZSBlbnRpcmUgcGF0aCBpcyB0aGUgcmVzZXJ2ZWQKICAg
        IC8vIHdvcmQuIEluIHRoYXQgY2FzZSwgcmV0dXJuIHRoZSBvYmplY3QgaXRz
        ZWxmLgogICAgaWYgKHBhdGggPT09IGtleXdvcmQpIHsKICAgICAgcGF0aCA9
        ICcnOwogICAgfSBlbHNlIHsKICAgICAgLy8gU3RyaXAgdGhlIGtleXdvcmQg
        ZnJvbSB0aGUgcGF0aCBhbmQgbG9vayB1cAogICAgICAvLyB0aGUgcmVtYWlu
        ZGVyIGZyb20gdGhlIG5ld2x5IGZvdW5kIHJvb3QuCiAgICAgIHBhdGggPSBw
        YXRoLnN1YnN0cihrZXl3b3JkLmxlbmd0aCsxKTsKICAgIH0KICB9CgogIHJl
        dHVybiB7IHJvb3Q6IHJvb3QsIHBhdGg6IHBhdGgsIGlzS2V5d29yZDogaXNL
        ZXl3b3JkIH07Cn07CgoKLyoqCiAgTG9va3VwIGJvdGggb24gcm9vdCBhbmQg
        b24gd2luZG93LiBJZiB0aGUgcGF0aCBzdGFydHMgd2l0aAogIGEga2V5d29y
        ZCwgdGhlIGNvcnJlc3BvbmRpbmcgb2JqZWN0IHdpbGwgYmUgbG9va2VkIHVw
        IGluIHRoZQogIHRlbXBsYXRlJ3MgZGF0YSBoYXNoIGFuZCB1c2VkIHRvIHJl
        c29sdmUgdGhlIHBhdGguCgogIEBtZXRob2QgZ2V0CiAgQGZvciBFbWJlci5I
        YW5kbGViYXJzCiAgQHBhcmFtIHtPYmplY3R9IHJvb3QgVGhlIG9iamVjdCB0
        byBsb29rIHVwIHRoZSBwcm9wZXJ0eSBvbgogIEBwYXJhbSB7U3RyaW5nfSBw
        YXRoIFRoZSBwYXRoIHRvIGJlIGxvb2tlZHVwCiAgQHBhcmFtIHtPYmplY3R9
        IG9wdGlvbnMgVGhlIHRlbXBsYXRlJ3Mgb3B0aW9uIGhhc2gKKi8KdmFyIGhh
        bmRsZWJhcnNHZXQgPSBFbWJlci5IYW5kbGViYXJzLmdldCA9IGZ1bmN0aW9u
        KHJvb3QsIHBhdGgsIG9wdGlvbnMpIHsKICB2YXIgZGF0YSA9IG9wdGlvbnMg
        JiYgb3B0aW9ucy5kYXRhLAogICAgICBub3JtYWxpemVkUGF0aCA9IG5vcm1h
        bGl6ZVBhdGgocm9vdCwgcGF0aCwgZGF0YSksCiAgICAgIHZhbHVlOwoKICAK
        ICAgIHJvb3QgPSBub3JtYWxpemVkUGF0aC5yb290OwogICAgcGF0aCA9IG5v
        cm1hbGl6ZWRQYXRoLnBhdGg7CgogICAgdmFsdWUgPSBFbWJlci5nZXQocm9v
        dCwgcGF0aCk7CgogICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQgJiYgcm9v
        dCAhPT0gRW1iZXIubG9va3VwICYmIEVtYmVyLmlzR2xvYmFsUGF0aChwYXRo
        KSkgewogICAgICB2YWx1ZSA9IEVtYmVyLmdldChFbWJlci5sb29rdXAsIHBh
        dGgpOwogICAgfQogIAoKICByZXR1cm4gdmFsdWU7Cn07CgovKioKICBUaGlz
        IG1ldGhvZCB1c2VzIGBFbWJlci5IYW5kbGViYXJzLmdldGAgdG8gbG9va3Vw
        IGEgdmFsdWUsIHRoZW4gZW5zdXJlcwogIHRoYXQgdGhlIHZhbHVlIGlzIGVz
        Y2FwZWQgcHJvcGVybHkuCgogIElmIGB1bmVzY2FwZWRgIGlzIGEgdHJ1dGh5
        IHZhbHVlIHRoZW4gdGhlIGVzY2FwaW5nIHdpbGwgbm90IGJlIHBlcmZvcm1l
        ZC4KCiAgQG1ldGhvZCBnZXRFc2NhcGVkCiAgQGZvciBFbWJlci5IYW5kbGVi
        YXJzCiAgQHBhcmFtIHtPYmplY3R9IHJvb3QgVGhlIG9iamVjdCB0byBsb29r
        IHVwIHRoZSBwcm9wZXJ0eSBvbgogIEBwYXJhbSB7U3RyaW5nfSBwYXRoIFRo
        ZSBwYXRoIHRvIGJlIGxvb2tlZHVwCiAgQHBhcmFtIHtPYmplY3R9IG9wdGlv
        bnMgVGhlIHRlbXBsYXRlJ3Mgb3B0aW9uIGhhc2gKKi8KRW1iZXIuSGFuZGxl
        YmFycy5nZXRFc2NhcGVkID0gZnVuY3Rpb24ocm9vdCwgcGF0aCwgb3B0aW9u
        cykgewogIHZhciByZXN1bHQgPSBoYW5kbGViYXJzR2V0KHJvb3QsIHBhdGgs
        IG9wdGlvbnMpOwoKICBpZiAocmVzdWx0ID09PSBudWxsIHx8IHJlc3VsdCA9
        PT0gdW5kZWZpbmVkKSB7CiAgICByZXN1bHQgPSAiIjsKICB9IGVsc2UgaWYg
        KCEocmVzdWx0IGluc3RhbmNlb2YgSGFuZGxlYmFycy5TYWZlU3RyaW5nKSkg
        ewogICAgcmVzdWx0ID0gU3RyaW5nKHJlc3VsdCk7CiAgfQogIGlmICghb3B0
        aW9ucy5oYXNoLnVuZXNjYXBlZCl7CiAgICByZXN1bHQgPSBIYW5kbGViYXJz
        LlV0aWxzLmVzY2FwZUV4cHJlc3Npb24ocmVzdWx0KTsKICB9CgogIHJldHVy
        biByZXN1bHQ7Cn07CgpFbWJlci5IYW5kbGViYXJzLnJlc29sdmVQYXJhbXMg
        PSBmdW5jdGlvbihjb250ZXh0LCBwYXJhbXMsIG9wdGlvbnMpIHsKICB2YXIg
        cmVzb2x2ZWRQYXJhbXMgPSBbXSwgdHlwZXMgPSBvcHRpb25zLnR5cGVzLCBw
        YXJhbSwgdHlwZTsKCiAgZm9yICh2YXIgaT0wLCBsPXBhcmFtcy5sZW5ndGg7
        IGk8bDsgaSsrKSB7CiAgICBwYXJhbSA9IHBhcmFtc1tpXTsKICAgIHR5cGUg
        PSB0eXBlc1tpXTsKCiAgICBpZiAodHlwZSA9PT0gJ0lEJykgewogICAgICBy
        ZXNvbHZlZFBhcmFtcy5wdXNoKGhhbmRsZWJhcnNHZXQoY29udGV4dCwgcGFy
        YW0sIG9wdGlvbnMpKTsKICAgIH0gZWxzZSB7CiAgICAgIHJlc29sdmVkUGFy
        YW1zLnB1c2gocGFyYW0pOwogICAgfQogIH0KCiAgcmV0dXJuIHJlc29sdmVk
        UGFyYW1zOwp9OwoKRW1iZXIuSGFuZGxlYmFycy5yZXNvbHZlSGFzaCA9IGZ1
        bmN0aW9uKGNvbnRleHQsIGhhc2gsIG9wdGlvbnMpIHsKICB2YXIgcmVzb2x2
        ZWRIYXNoID0ge30sIHR5cGVzID0gb3B0aW9ucy5oYXNoVHlwZXMsIHR5cGU7
        CgogIGZvciAodmFyIGtleSBpbiBoYXNoKSB7CiAgICBpZiAoIWhhc2guaGFz
        T3duUHJvcGVydHkoa2V5KSkgeyBjb250aW51ZTsgfQoKICAgIHR5cGUgPSB0
        eXBlc1trZXldOwoKICAgIGlmICh0eXBlID09PSAnSUQnKSB7CiAgICAgIHJl
        c29sdmVkSGFzaFtrZXldID0gaGFuZGxlYmFyc0dldChjb250ZXh0LCBoYXNo
        W2tleV0sIG9wdGlvbnMpOwogICAgfSBlbHNlIHsKICAgICAgcmVzb2x2ZWRI
        YXNoW2tleV0gPSBoYXNoW2tleV07CiAgICB9CiAgfQoKICByZXR1cm4gcmVz
        b2x2ZWRIYXNoOwp9OwoKLyoqCiAgUmVnaXN0ZXJzIGEgaGVscGVyIGluIEhh
        bmRsZWJhcnMgdGhhdCB3aWxsIGJlIGNhbGxlZCBpZiBubyBwcm9wZXJ0eSB3
        aXRoIHRoZQogIGdpdmVuIG5hbWUgY2FuIGJlIGZvdW5kIG9uIHRoZSBjdXJy
        ZW50IGNvbnRleHQgb2JqZWN0LCBhbmQgbm8gaGVscGVyIHdpdGgKICB0aGF0
        IG5hbWUgaXMgcmVnaXN0ZXJlZC4KCiAgVGhpcyB0aHJvd3MgYW4gZXhjZXB0
        aW9uIHdpdGggYSBtb3JlIGhlbHBmdWwgZXJyb3IgbWVzc2FnZSBzbyB0aGUg
        dXNlciBjYW4KICB0cmFjayBkb3duIHdoZXJlIHRoZSBwcm9ibGVtIGlzIGhh
        cHBlbmluZy4KCiAgQHByaXZhdGUKICBAbWV0aG9kIGhlbHBlck1pc3NpbmcK
        ICBAZm9yIEVtYmVyLkhhbmRsZWJhcnMuaGVscGVycwogIEBwYXJhbSB7U3Ry
        aW5nfSBwYXRoCiAgQHBhcmFtIHtIYXNofSBvcHRpb25zCiovCkVtYmVyLkhh
        bmRsZWJhcnMucmVnaXN0ZXJIZWxwZXIoJ2hlbHBlck1pc3NpbmcnLCBmdW5j
        dGlvbihwYXRoKSB7CiAgdmFyIGVycm9yLCB2aWV3ID0gIiI7CgogIHZhciBv
        cHRpb25zID0gYXJndW1lbnRzW2FyZ3VtZW50cy5sZW5ndGggLSAxXTsKCiAg
        dmFyIGhlbHBlciA9IEVtYmVyLkhhbmRsZWJhcnMucmVzb2x2ZUhlbHBlcihv
        cHRpb25zLmRhdGEudmlldy5jb250YWluZXIsIHBhdGgpOwoKICBpZiAoaGVs
        cGVyKSB7CiAgICByZXR1cm4gaGVscGVyLmFwcGx5KHRoaXMsIHNsaWNlLmNh
        bGwoYXJndW1lbnRzLCAxKSk7CiAgfQoKICBlcnJvciA9ICIlQCBIYW5kbGVi
        YXJzIGVycm9yOiBDb3VsZCBub3QgZmluZCBwcm9wZXJ0eSAnJUAnIG9uIG9i
        amVjdCAlQC4iOwogIGlmIChvcHRpb25zLmRhdGEpIHsKICAgIHZpZXcgPSBv
        cHRpb25zLmRhdGEudmlldzsKICB9CiAgdGhyb3cgbmV3IEVtYmVyLkVycm9y
        KEVtYmVyLlN0cmluZy5mbXQoZXJyb3IsIFt2aWV3LCBwYXRoLCB0aGlzXSkp
        Owp9KTsKCi8qKgogIFJlZ2lzdGVycyBhIGhlbHBlciBpbiBIYW5kbGViYXJz
        IHRoYXQgd2lsbCBiZSBjYWxsZWQgaWYgbm8gcHJvcGVydHkgd2l0aCB0aGUK
        ICBnaXZlbiBuYW1lIGNhbiBiZSBmb3VuZCBvbiB0aGUgY3VycmVudCBjb250
        ZXh0IG9iamVjdCwgYW5kIG5vIGhlbHBlciB3aXRoCiAgdGhhdCBuYW1lIGlz
        IHJlZ2lzdGVyZWQuCgogIFRoaXMgdGhyb3dzIGFuIGV4Y2VwdGlvbiB3aXRo
        IGEgbW9yZSBoZWxwZnVsIGVycm9yIG1lc3NhZ2Ugc28gdGhlIHVzZXIgY2Fu
        CiAgdHJhY2sgZG93biB3aGVyZSB0aGUgcHJvYmxlbSBpcyBoYXBwZW5pbmcu
        CgogIEBwcml2YXRlCiAgQG1ldGhvZCBoZWxwZXJNaXNzaW5nCiAgQGZvciBF
        bWJlci5IYW5kbGViYXJzLmhlbHBlcnMKICBAcGFyYW0ge1N0cmluZ30gcGF0
        aAogIEBwYXJhbSB7SGFzaH0gb3B0aW9ucwoqLwpFbWJlci5IYW5kbGViYXJz
        LnJlZ2lzdGVySGVscGVyKCdibG9ja0hlbHBlck1pc3NpbmcnLCBmdW5jdGlv
        bihwYXRoKSB7CgogIHZhciBvcHRpb25zID0gYXJndW1lbnRzW2FyZ3VtZW50
        cy5sZW5ndGggLSAxXTsKCiAgRW1iZXIuYXNzZXJ0KCJgYmxvY2tIZWxwZXJN
        aXNzaW5nYCB3YXMgaW52b2tlZCB3aXRob3V0IGEgaGVscGVyIG5hbWUsIHdo
        aWNoICIgKwogICAgICAgICAgICAgICAiaXMgbW9zdCBsaWtlbHkgZHVlIHRv
        IGEgbWlzbWF0Y2ggYmV0d2VlbiB0aGUgdmVyc2lvbiBvZiAiICsKICAgICAg
        ICAgICAgICAgIkVtYmVyLmpzIHlvdSdyZSBydW5uaW5nIG5vdyBhbmQgdGhl
        IG9uZSB1c2VkIHRvIHByZWNvbXBpbGUgeW91ciAiICsKICAgICAgICAgICAg
        ICAgInRlbXBsYXRlcy4gUGxlYXNlIG1ha2Ugc3VyZSB0aGUgdmVyc2lvbiBv
        ZiAiICsKICAgICAgICAgICAgICAgImBlbWJlci1oYW5kbGViYXJzLWNvbXBp
        bGVyYCB5b3UncmUgdXNpbmcgaXMgdXAgdG8gZGF0ZS4iLCBwYXRoKTsKCiAg
        dmFyIGhlbHBlciA9IEVtYmVyLkhhbmRsZWJhcnMucmVzb2x2ZUhlbHBlcihv
        cHRpb25zLmRhdGEudmlldy5jb250YWluZXIsIHBhdGgpOwoKICBpZiAoaGVs
        cGVyKSB7CiAgICByZXR1cm4gaGVscGVyLmFwcGx5KHRoaXMsIHNsaWNlLmNh
        bGwoYXJndW1lbnRzLCAxKSk7CiAgfSBlbHNlIHsKICAgIHJldHVybiBIYW5k
        bGViYXJzLmhlbHBlcnMuaGVscGVyTWlzc2luZy5jYWxsKHRoaXMsIHBhdGgp
        OwogIH0KCiAgcmV0dXJuIEhhbmRsZWJhcnMuaGVscGVycy5ibG9ja0hlbHBl
        ck1pc3NpbmcuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfSk7CgovKioKICBS
        ZWdpc3RlciBhIGJvdW5kIGhhbmRsZWJhcnMgaGVscGVyLiBCb3VuZCBoZWxw
        ZXJzIGJlaGF2ZSBzaW1pbGFybHkgdG8gcmVndWxhcgogIGhhbmRsZWJhcnMg
        aGVscGVycywgd2l0aCB0aGUgYWRkZWQgYWJpbGl0eSB0byByZS1yZW5kZXIg
        d2hlbiB0aGUgdW5kZXJseWluZyBkYXRhCiAgY2hhbmdlcy4KCiAgIyMgU2lt
        cGxlIGV4YW1wbGUKCiAgYGBgamF2YXNjcmlwdAogIEVtYmVyLkhhbmRsZWJh
        cnMucmVnaXN0ZXJCb3VuZEhlbHBlcignY2FwaXRhbGl6ZScsIGZ1bmN0aW9u
        KHZhbHVlKSB7CiAgICByZXR1cm4gdmFsdWUudG9VcHBlckNhc2UoKTsKICB9
        KTsKICBgYGAKCiAgVGhlIGFib3ZlIGJvdW5kIGhlbHBlciBjYW4gYmUgdXNl
        ZCBpbnNpZGUgb2YgdGVtcGxhdGVzIGFzIGZvbGxvd3M6CgogIGBgYGhhbmRs
        ZWJhcnMKICB7e2NhcGl0YWxpemUgbmFtZX19CiAgYGBgCgogIEluIHRoaXMg
        Y2FzZSwgd2hlbiB0aGUgYG5hbWVgIHByb3BlcnR5IG9mIHRoZSB0ZW1wbGF0
        ZSdzIGNvbnRleHQgY2hhbmdlcywKICB0aGUgcmVuZGVyZWQgdmFsdWUgb2Yg
        dGhlIGhlbHBlciB3aWxsIHVwZGF0ZSB0byByZWZsZWN0IHRoaXMgY2hhbmdl
        LgoKICAjIyBFeGFtcGxlIHdpdGggb3B0aW9ucwoKICBMaWtlIG5vcm1hbCBo
        YW5kbGViYXJzIGhlbHBlcnMsIGJvdW5kIGhlbHBlcnMgaGF2ZSBhY2Nlc3Mg
        dG8gdGhlIG9wdGlvbnMKICBwYXNzZWQgaW50byB0aGUgaGVscGVyIGNhbGwu
        CgogIGBgYGphdmFzY3JpcHQKICBFbWJlci5IYW5kbGViYXJzLnJlZ2lzdGVy
        Qm91bmRIZWxwZXIoJ3JlcGVhdCcsIGZ1bmN0aW9uKHZhbHVlLCBvcHRpb25z
        KSB7CiAgICB2YXIgY291bnQgPSBvcHRpb25zLmhhc2guY291bnQ7CiAgICB2
        YXIgYSA9IFtdOwogICAgd2hpbGUoYS5sZW5ndGggPCBjb3VudCkgewogICAg
        ICAgIGEucHVzaCh2YWx1ZSk7CiAgICB9CiAgICByZXR1cm4gYS5qb2luKCcn
        KTsKICB9KTsKICBgYGAKCiAgVGhpcyBoZWxwZXIgY291bGQgYmUgdXNlZCBp
        biBhIHRlbXBsYXRlIGFzIGZvbGxvd3M6CgogIGBgYGhhbmRsZWJhcnMKICB7
        e3JlcGVhdCB0ZXh0IGNvdW50PTN9fQogIGBgYAoKICAjIyBFeGFtcGxlIHdp
        dGggYm91bmQgb3B0aW9ucwoKICBCb3VuZCBoYXNoIG9wdGlvbnMgYXJlIGFs
        c28gc3VwcG9ydGVkLiBFeGFtcGxlOgoKICBgYGBoYW5kbGViYXJzCiAge3ty
        ZXBlYXQgdGV4dCBjb3VudEJpbmRpbmc9Im51bVJlcGVhdHMifX0KICBgYGAK
        CiAgSW4gdGhpcyBleGFtcGxlLCBjb3VudCB3aWxsIGJlIGJvdW5kIHRvIHRo
        ZSB2YWx1ZSBvZgogIHRoZSBgbnVtUmVwZWF0c2AgcHJvcGVydHkgb24gdGhl
        IGNvbnRleHQuIElmIHRoYXQgcHJvcGVydHkKICBjaGFuZ2VzLCB0aGUgaGVs
        cGVyIHdpbGwgYmUgcmUtcmVuZGVyZWQuCgogICMjIEV4YW1wbGUgd2l0aCBl
        eHRyYSBkZXBlbmRlbmNpZXMKCiAgVGhlIGBFbWJlci5IYW5kbGViYXJzLnJl
        Z2lzdGVyQm91bmRIZWxwZXJgIG1ldGhvZCB0YWtlcyBhIHZhcmlhYmxlIGxl
        bmd0aAogIHRoaXJkIHBhcmFtZXRlciB3aGljaCBpbmRpY2F0ZXMgZXh0cmEg
        ZGVwZW5kZW5jaWVzIG9uIHRoZSBwYXNzZWQgaW4gdmFsdWUuCiAgVGhpcyBh
        bGxvd3MgdGhlIGhhbmRsZWJhcnMgaGVscGVyIHRvIHVwZGF0ZSB3aGVuIHRo
        ZXNlIGRlcGVuZGVuY2llcyBjaGFuZ2UuCgogIGBgYGphdmFzY3JpcHQKICBF
        bWJlci5IYW5kbGViYXJzLnJlZ2lzdGVyQm91bmRIZWxwZXIoJ2NhcGl0YWxp
        emVOYW1lJywgZnVuY3Rpb24odmFsdWUpIHsKICAgIHJldHVybiB2YWx1ZS5n
        ZXQoJ25hbWUnKS50b1VwcGVyQ2FzZSgpOwogIH0sICduYW1lJyk7CiAgYGBg
        CgogICMjIEV4YW1wbGUgd2l0aCBtdWx0aXBsZSBib3VuZCBwcm9wZXJ0aWVz
        CgogIGBFbWJlci5IYW5kbGViYXJzLnJlZ2lzdGVyQm91bmRIZWxwZXJgIHN1
        cHBvcnRzIGJpbmRpbmcgdG8KICBtdWx0aXBsZSBwcm9wZXJ0aWVzLCBlLmcu
        OgoKICBgYGBqYXZhc2NyaXB0CiAgRW1iZXIuSGFuZGxlYmFycy5yZWdpc3Rl
        ckJvdW5kSGVscGVyKCdjb25jYXRlbmF0ZScsIGZ1bmN0aW9uKCkgewogICAg
        dmFyIHZhbHVlcyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3Vt
        ZW50cywgMCwgLTEpOwogICAgcmV0dXJuIHZhbHVlcy5qb2luKCd8fCcpOwog
        IH0pOwogIGBgYAoKICBXaGljaCBhbGxvd3MgZm9yIHRlbXBsYXRlIHN5bnRh
        eCBzdWNoIGFzIGB7e2NvbmNhdGVuYXRlIHByb3AxIHByb3AyfX1gIG9yCiAg
        YHt7Y29uY2F0ZW5hdGUgcHJvcDEgcHJvcDIgcHJvcDN9fWAuIElmIGFueSBv
        ZiB0aGUgcHJvcGVydGllcyBjaGFuZ2UsCiAgdGhlIGhlbHByIHdpbGwgcmUt
        cmVuZGVyLiAgTm90ZSB0aGF0IGRlcGVuZGVuY3kga2V5cyBjYW5ub3QgYmUK
        ICB1c2luZyBpbiBjb25qdW5jdGlvbiB3aXRoIG11bHRpLXByb3BlcnR5IGhl
        bHBlcnMsIHNpbmNlIGl0IGlzIGFtYmlndW91cwogIHdoaWNoIHByb3BlcnR5
        IHRoZSBkZXBlbmRlbnQga2V5cyB3b3VsZCBiZWxvbmcgdG8uCgogICMjIFVz
        ZSB3aXRoIHVuYm91bmQgaGVscGVyCgogIFRoZSBge3t1bmJvdW5kfX1gIGhl
        bHBlciBjYW4gYmUgdXNlZCB3aXRoIGJvdW5kIGhlbHBlciBpbnZvY2F0aW9u
        cwogIHRvIHJlbmRlciB0aGVtIGluIHRoZWlyIHVuYm91bmQgZm9ybSwgZS5n
        LgoKICBgYGBoYW5kbGViYXJzCiAge3t1bmJvdW5kIGNhcGl0YWxpemUgbmFt
        ZX19CiAgYGBgCgogIEluIHRoaXMgZXhhbXBsZSwgaWYgdGhlIG5hbWUgcHJv
        cGVydHkgY2hhbmdlcywgdGhlIGhlbHBlcgogIHdpbGwgbm90IHJlLXJlbmRl
        ci4KCiAgIyMgVXNlIHdpdGggYmxvY2tzIG5vdCBzdXBwb3J0ZWQKCiAgQm91
        bmQgaGVscGVycyBkbyBub3Qgc3VwcG9ydCB1c2Ugd2l0aCBIYW5kbGViYXJz
        IGJsb2NrcyBvcgogIHRoZSBhZGRpdGlvbiBvZiBjaGlsZCB2aWV3cyBvZiBh
        bnkga2luZC4KCiAgQG1ldGhvZCByZWdpc3RlckJvdW5kSGVscGVyCiAgQGZv
        ciBFbWJlci5IYW5kbGViYXJzCiAgQHBhcmFtIHtTdHJpbmd9IG5hbWUKICBA
        cGFyYW0ge0Z1bmN0aW9ufSBmdW5jdGlvbgogIEBwYXJhbSB7U3RyaW5nfSBk
        ZXBlbmRlbnRLZXlzKgoqLwpFbWJlci5IYW5kbGViYXJzLnJlZ2lzdGVyQm91
        bmRIZWxwZXIgPSBmdW5jdGlvbihuYW1lLCBmbikgewogIHZhciBib3VuZEhl
        bHBlckFyZ3MgPSBzbGljZS5jYWxsKGFyZ3VtZW50cywgMSksCiAgICAgIGJv
        dW5kRm4gPSBFbWJlci5IYW5kbGViYXJzLm1ha2VCb3VuZEhlbHBlci5hcHBs
        eSh0aGlzLCBib3VuZEhlbHBlckFyZ3MpOwogIEVtYmVyLkhhbmRsZWJhcnMu
        cmVnaXN0ZXJIZWxwZXIobmFtZSwgYm91bmRGbik7Cn07CgovKioKICBBICht
        b3N0bHkpIHByaXZhdGUgaGVscGVyIGZ1bmN0aW9uIHRvIGByZWdpc3RlckJv
        dW5kSGVscGVyYC4gVGFrZXMgdGhlCiAgcHJvdmlkZWQgSGFuZGxlYmFycyBo
        ZWxwZXIgZnVuY3Rpb24gZm4gYW5kIHJldHVybnMgaXQgaW4gd3JhcHBlZAog
        IGJvdW5kIGhlbHBlciBmb3JtLgoKICBUaGUgbWFpbiB1c2UgY2FzZSBmb3Ig
        dXNpbmcgdGhpcyBvdXRzaWRlIG9mIGByZWdpc3RlckJvdW5kSGVscGVyYAog
        IGlzIGZvciByZWdpc3RlcmluZyBoZWxwZXJzIG9uIHRoZSBjb250YWluZXI6
        CgogIGBgYGpzCiAgdmFyIGJvdW5kSGVscGVyRm4gPSBFbWJlci5IYW5kbGVi
        YXJzLm1ha2VCb3VuZEhlbHBlcihmdW5jdGlvbih3b3JkKSB7CiAgICByZXR1
        cm4gd29yZC50b1VwcGVyQ2FzZSgpOwogIH0pOwoKICBjb250YWluZXIucmVn
        aXN0ZXIoJ2hlbHBlcjpteS1ib3VuZC1oZWxwZXInLCBib3VuZEhlbHBlckZu
        KTsKICBgYGAKCiAgSW4gdGhlIGFib3ZlIGV4YW1wbGUsIGlmIHRoZSBoZWxw
        ZXIgZnVuY3Rpb24gaGFkbid0IGJlZW4gd3JhcHBlZCBpbgogIGBtYWtlQm91
        bmRIZWxwZXJgLCB0aGUgcmVnaXN0ZXJlZCBoZWxwZXIgd291bGQgYmUgdW5i
        b3VuZC4KCiAgQHByaXZhdGUKICBAbWV0aG9kIG1ha2VCb3VuZEhlbHBlcgog
        IEBmb3IgRW1iZXIuSGFuZGxlYmFycwogIEBwYXJhbSB7RnVuY3Rpb259IGZ1
        bmN0aW9uCiAgQHBhcmFtIHtTdHJpbmd9IGRlcGVuZGVudEtleXMqCiovCkVt
        YmVyLkhhbmRsZWJhcnMubWFrZUJvdW5kSGVscGVyID0gZnVuY3Rpb24oZm4p
        IHsKICB2YXIgZGVwZW5kZW50S2V5cyA9IHNsaWNlLmNhbGwoYXJndW1lbnRz
        LCAxKTsKCiAgZnVuY3Rpb24gaGVscGVyKCkgewogICAgdmFyIHByb3BlcnRp
        ZXMgPSBzbGljZS5jYWxsKGFyZ3VtZW50cywgMCwgLTEpLAogICAgICBudW1Q
        cm9wZXJ0aWVzID0gcHJvcGVydGllcy5sZW5ndGgsCiAgICAgIG9wdGlvbnMg
        PSBhcmd1bWVudHNbYXJndW1lbnRzLmxlbmd0aCAtIDFdLAogICAgICBub3Jt
        YWxpemVkUHJvcGVydGllcyA9IFtdLAogICAgICBkYXRhID0gb3B0aW9ucy5k
        YXRhLAogICAgICB0eXBlcyA9IGRhdGEuaXNVbmJvdW5kID8gc2xpY2UuY2Fs
        bChvcHRpb25zLnR5cGVzLCAxKSA6IG9wdGlvbnMudHlwZXMsCiAgICAgIGhh
        c2ggPSBvcHRpb25zLmhhc2gsCiAgICAgIHZpZXcgPSBkYXRhLnZpZXcsCiAg
        ICAgIGNvbnRleHRzID0gb3B0aW9ucy5jb250ZXh0cywKICAgICAgY3VycmVu
        dENvbnRleHQgPSAoY29udGV4dHMgJiYgY29udGV4dHMubGVuZ3RoKSA/IGNv
        bnRleHRzWzBdIDogdGhpcywKICAgICAgcHJlZml4UGF0aEZvckRlcGVuZGVu
        dEtleXMgPSAnJywKICAgICAgbG9jLCBsZW4sIGhhc2hPcHRpb24sCiAgICAg
        IGJvdW5kT3B0aW9uLCBwcm9wZXJ0eSwKICAgICAgbm9ybWFsaXplZFZhbHVl
        ID0gRW1iZXIuX1NpbXBsZUhhbmRsZWJhcnNWaWV3LnByb3RvdHlwZS5ub3Jt
        YWxpemVkVmFsdWU7CgogICAgRW1iZXIuYXNzZXJ0KCJyZWdpc3RlckJvdW5k
        SGVscGVyLWdlbmVyYXRlZCBoZWxwZXJzIGRvIG5vdCBzdXBwb3J0IHVzZSB3
        aXRoIEhhbmRsZWJhcnMgYmxvY2tzLiIsICFvcHRpb25zLmZuKTsKCiAgICAv
        LyBEZXRlY3QgYm91bmQgb3B0aW9ucyAoZS5nLiBjb3VudEJpbmRpbmc9Im90
        aGVyQ291bnQiKQogICAgdmFyIGJvdW5kT3B0aW9ucyA9IGhhc2guYm91bmRP
        cHRpb25zID0ge307CiAgICBmb3IgKGhhc2hPcHRpb24gaW4gaGFzaCkgewog
        ICAgICBpZiAoRW1iZXIuSVNfQklORElORy50ZXN0KGhhc2hPcHRpb24pKSB7
        CiAgICAgICAgLy8gTG9wIG9mZiAnQmluZGluZycgc3VmZml4LgogICAgICAg
        IGJvdW5kT3B0aW9uc1toYXNoT3B0aW9uLnNsaWNlKDAsIC03KV0gPSBoYXNo
        W2hhc2hPcHRpb25dOwogICAgICB9CiAgICB9CgogICAgLy8gRXhwb3NlIHBy
        b3BlcnR5IG5hbWVzIG9uIGRhdGEucHJvcGVydGllcyBvYmplY3QuCiAgICB2
        YXIgd2F0Y2hlZFByb3BlcnRpZXMgPSBbXTsKICAgIGRhdGEucHJvcGVydGll
        cyA9IFtdOwogICAgZm9yIChsb2MgPSAwOyBsb2MgPCBudW1Qcm9wZXJ0aWVz
        OyArK2xvYykgewogICAgICBkYXRhLnByb3BlcnRpZXMucHVzaChwcm9wZXJ0
        aWVzW2xvY10pOwogICAgICBpZiAodHlwZXNbbG9jXSA9PT0gJ0lEJykgewog
        ICAgICAgIHZhciBub3JtYWxpemVkUHJvcCA9IG5vcm1hbGl6ZVBhdGgoY3Vy
        cmVudENvbnRleHQsIHByb3BlcnRpZXNbbG9jXSwgZGF0YSk7CiAgICAgICAg
        bm9ybWFsaXplZFByb3BlcnRpZXMucHVzaChub3JtYWxpemVkUHJvcCk7CiAg
        ICAgICAgd2F0Y2hlZFByb3BlcnRpZXMucHVzaChub3JtYWxpemVkUHJvcCk7
        CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaWYoZGF0YS5pc1VuYm91bmQpIHsK
        ICAgICAgICAgIG5vcm1hbGl6ZWRQcm9wZXJ0aWVzLnB1c2goe3BhdGg6IHBy
        b3BlcnRpZXNbbG9jXX0pOwogICAgICAgIH1lbHNlIHsKICAgICAgICAgIG5v
        cm1hbGl6ZWRQcm9wZXJ0aWVzLnB1c2gobnVsbCk7CiAgICAgICAgfQogICAg
        ICB9CiAgICB9CgogICAgLy8gSGFuZGxlIGNhc2Ugd2hlbiBoZWxwZXIgaW52
        b2NhdGlvbiBpcyBwcmVjZWRlZCBieSBgdW5ib3VuZGAsIGUuZy4KICAgIC8v
        IHt7dW5ib3VuZCBteUhlbHBlciBmb299fQogICAgaWYgKGRhdGEuaXNVbmJv
        dW5kKSB7CiAgICAgIHJldHVybiBldmFsdWF0ZVVuYm91bmRIZWxwZXIodGhp
        cywgZm4sIG5vcm1hbGl6ZWRQcm9wZXJ0aWVzLCBvcHRpb25zKTsKICAgIH0K
        CiAgICB2YXIgYmluZFZpZXcgPSBuZXcgRW1iZXIuX1NpbXBsZUhhbmRsZWJh
        cnNWaWV3KG51bGwsIG51bGwsICFvcHRpb25zLmhhc2gudW5lc2NhcGVkLCBv
        cHRpb25zLmRhdGEpOwoKICAgIC8vIE92ZXJyaWRlIFNpbXBsZUhhbmRsZWJh
        cnNWaWV3J3MgbWV0aG9kIGZvciBnZW5lcmF0aW5nIHRoZSB2aWV3J3MgY29u
        dGVudC4KICAgIGJpbmRWaWV3Lm5vcm1hbGl6ZWRWYWx1ZSA9IGZ1bmN0aW9u
        KCkgewogICAgICB2YXIgYXJncyA9IFtdLCBib3VuZE9wdGlvbjsKCiAgICAg
        IC8vIENvcHkgb3ZlciBib3VuZCBoYXNoIG9wdGlvbnMuCiAgICAgIGZvciAo
        Ym91bmRPcHRpb24gaW4gYm91bmRPcHRpb25zKSB7CiAgICAgICAgaWYgKCFi
        b3VuZE9wdGlvbnMuaGFzT3duUHJvcGVydHkoYm91bmRPcHRpb24pKSB7IGNv
        bnRpbnVlOyB9CiAgICAgICAgcHJvcGVydHkgPSBub3JtYWxpemVQYXRoKGN1
        cnJlbnRDb250ZXh0LCBib3VuZE9wdGlvbnNbYm91bmRPcHRpb25dLCBkYXRh
        KTsKICAgICAgICBiaW5kVmlldy5wYXRoID0gcHJvcGVydHkucGF0aDsKICAg
        ICAgICBiaW5kVmlldy5wYXRoUm9vdCA9IHByb3BlcnR5LnJvb3Q7CiAgICAg
        ICAgaGFzaFtib3VuZE9wdGlvbl0gPSBub3JtYWxpemVkVmFsdWUuY2FsbChi
        aW5kVmlldyk7CiAgICAgIH0KCiAgICAgIGZvciAobG9jID0gMDsgbG9jIDwg
        bnVtUHJvcGVydGllczsgKytsb2MpIHsKICAgICAgICBwcm9wZXJ0eSA9IG5v
        cm1hbGl6ZWRQcm9wZXJ0aWVzW2xvY107CiAgICAgICAgaWYgKHByb3BlcnR5
        KSB7CiAgICAgICAgICBiaW5kVmlldy5wYXRoID0gcHJvcGVydHkucGF0aDsK
        ICAgICAgICAgIGJpbmRWaWV3LnBhdGhSb290ID0gcHJvcGVydHkucm9vdDsK
        ICAgICAgICAgIGFyZ3MucHVzaChub3JtYWxpemVkVmFsdWUuY2FsbChiaW5k
        VmlldykpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBhcmdzLnB1c2go
        cHJvcGVydGllc1tsb2NdKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgYXJn
        cy5wdXNoKG9wdGlvbnMpOwoKICAgICAgLy8gUnVuIHRoZSBzdXBwbGllZCBo
        ZWxwZXIgZnVuY3Rpb24uCiAgICAgIHJldHVybiBmbi5hcHBseShjdXJyZW50
        Q29udGV4dCwgYXJncyk7CiAgICB9OwoKICAgIHZpZXcuYXBwZW5kQ2hpbGQo
        YmluZFZpZXcpOwoKICAgIC8vIEFzc2VtYmxlIGxpc3Qgb2Ygd2F0Y2hlZCBw
        cm9wZXJ0aWVzIHRoYXQnbGwgcmUtcmVuZGVyIHRoaXMgaGVscGVyLgogICAg
        Zm9yIChib3VuZE9wdGlvbiBpbiBib3VuZE9wdGlvbnMpIHsKICAgICAgaWYg
        KGJvdW5kT3B0aW9ucy5oYXNPd25Qcm9wZXJ0eShib3VuZE9wdGlvbikpIHsK
        ICAgICAgICB3YXRjaGVkUHJvcGVydGllcy5wdXNoKG5vcm1hbGl6ZVBhdGgo
        Y3VycmVudENvbnRleHQsIGJvdW5kT3B0aW9uc1tib3VuZE9wdGlvbl0sIGRh
        dGEpKTsKICAgICAgfQogICAgfQoKICAgIC8vIE9ic2VydmUgZWFjaCBwcm9w
        ZXJ0eS4KICAgIGZvciAobG9jID0gMCwgbGVuID0gd2F0Y2hlZFByb3BlcnRp
        ZXMubGVuZ3RoOyBsb2MgPCBsZW47ICsrbG9jKSB7CiAgICAgIHByb3BlcnR5
        ID0gd2F0Y2hlZFByb3BlcnRpZXNbbG9jXTsKICAgICAgdmlldy5yZWdpc3Rl
        ck9ic2VydmVyKHByb3BlcnR5LnJvb3QsIHByb3BlcnR5LnBhdGgsIGJpbmRW
        aWV3LCBiaW5kVmlldy5yZXJlbmRlcik7CiAgICB9CgogICAgaWYgKHR5cGVz
        WzBdICE9PSAnSUQnIHx8IG5vcm1hbGl6ZWRQcm9wZXJ0aWVzLmxlbmd0aCA9
        PT0gMCkgewogICAgICByZXR1cm47CiAgICB9CgogICAgLy8gQWRkIGRlcGVu
        ZGVudCBrZXkgb2JzZXJ2ZXJzIHRvIHRoZSBmaXJzdCBwYXJhbQogICAgdmFy
        IG5vcm1hbGl6ZWQgPSBub3JtYWxpemVkUHJvcGVydGllc1swXSwKICAgICAg
        ICBwYXRoUm9vdCA9IG5vcm1hbGl6ZWQucm9vdCwKICAgICAgICBwYXRoID0g
        bm9ybWFsaXplZC5wYXRoOwoKICAgIGlmKCFFbWJlci5pc0VtcHR5KHBhdGgp
        KSB7CiAgICAgIHByZWZpeFBhdGhGb3JEZXBlbmRlbnRLZXlzID0gcGF0aCAr
        ICcuJzsKICAgIH0KICAgIGZvciAodmFyIGk9MCwgbD1kZXBlbmRlbnRLZXlz
        Lmxlbmd0aDsgaTxsOyBpKyspIHsKICAgICAgdmlldy5yZWdpc3Rlck9ic2Vy
        dmVyKHBhdGhSb290LCBwcmVmaXhQYXRoRm9yRGVwZW5kZW50S2V5cyArIGRl
        cGVuZGVudEtleXNbaV0sIGJpbmRWaWV3LCBiaW5kVmlldy5yZXJlbmRlcik7
        CiAgICB9CiAgfQoKICBoZWxwZXIuX3Jhd0Z1bmN0aW9uID0gZm47CiAgcmV0
        dXJuIGhlbHBlcjsKfTsKCi8qKgogIFJlbmRlcnMgdGhlIHVuYm91bmQgZm9y
        bSBvZiBhbiBvdGhlcndpc2UgYm91bmQgaGVscGVyIGZ1bmN0aW9uLgoKICBA
        cHJpdmF0ZQogIEBtZXRob2QgZXZhbHVhdGVVbmJvdW5kSGVscGVyCiAgQHBh
        cmFtIHtGdW5jdGlvbn0gZm4KICBAcGFyYW0ge09iamVjdH0gY29udGV4dAog
        IEBwYXJhbSB7QXJyYXl9IG5vcm1hbGl6ZWRQcm9wZXJ0aWVzCiAgQHBhcmFt
        IHtTdHJpbmd9IG9wdGlvbnMKKi8KZnVuY3Rpb24gZXZhbHVhdGVVbmJvdW5k
        SGVscGVyKGNvbnRleHQsIGZuLCBub3JtYWxpemVkUHJvcGVydGllcywgb3B0
        aW9ucykgewogIHZhciBhcmdzID0gW10sCiAgIGhhc2ggPSBvcHRpb25zLmhh
        c2gsCiAgIGJvdW5kT3B0aW9ucyA9IGhhc2guYm91bmRPcHRpb25zLAogICB0
        eXBlcyA9IHNsaWNlLmNhbGwob3B0aW9ucy50eXBlcywgMSksCiAgIGxvYywK
        ICAgbGVuLAogICBwcm9wZXJ0eSwKICAgcHJvcGVydHlUeXBlLAogICBib3Vu
        ZE9wdGlvbjsKCiAgZm9yIChib3VuZE9wdGlvbiBpbiBib3VuZE9wdGlvbnMp
        IHsKICAgIGlmICghYm91bmRPcHRpb25zLmhhc093blByb3BlcnR5KGJvdW5k
        T3B0aW9uKSkgeyBjb250aW51ZTsgfQogICAgaGFzaFtib3VuZE9wdGlvbl0g
        PSBFbWJlci5IYW5kbGViYXJzLmdldChjb250ZXh0LCBib3VuZE9wdGlvbnNb
        Ym91bmRPcHRpb25dLCBvcHRpb25zKTsKICB9CgogIGZvcihsb2MgPSAwLCBs
        ZW4gPSBub3JtYWxpemVkUHJvcGVydGllcy5sZW5ndGg7IGxvYyA8IGxlbjsg
        Kytsb2MpIHsKICAgIHByb3BlcnR5ID0gbm9ybWFsaXplZFByb3BlcnRpZXNb
        bG9jXTsKICAgIHByb3BlcnR5VHlwZSA9IHR5cGVzW2xvY107CiAgICBpZihw
        cm9wZXJ0eVR5cGUgPT09ICJJRCIpIHsKICAgICAgYXJncy5wdXNoKEVtYmVy
        LkhhbmRsZWJhcnMuZ2V0KHByb3BlcnR5LnJvb3QsIHByb3BlcnR5LnBhdGgs
        IG9wdGlvbnMpKTsKICAgIH0gZWxzZSB7CiAgICAgIGFyZ3MucHVzaChwcm9w
        ZXJ0eS5wYXRoKTsKICAgIH0KICB9CiAgYXJncy5wdXNoKG9wdGlvbnMpOwog
        IHJldHVybiBmbi5hcHBseShjb250ZXh0LCBhcmdzKTsKfQoKLyoqCiAgT3Zl
        cnJpZGVzIEhhbmRsZWJhcnMudGVtcGxhdGUgc28gdGhhdCB3ZSBjYW4gZGlz
        dGluZ3Vpc2gKICB1c2VyLWNyZWF0ZWQsIHRvcC1sZXZlbCB0ZW1wbGF0ZXMg
        ZnJvbSBpbm5lciBjb250ZXh0cy4KCiAgQHByaXZhdGUKICBAbWV0aG9kIHRl
        bXBsYXRlCiAgQGZvciBFbWJlci5IYW5kbGViYXJzCiAgQHBhcmFtIHtTdHJp
        bmd9IHNwZWMKKi8KRW1iZXIuSGFuZGxlYmFycy50ZW1wbGF0ZSA9IGZ1bmN0
        aW9uKHNwZWMpIHsKICB2YXIgdCA9IG9yaWdpbmFsVGVtcGxhdGUoc3BlYyk7
        CiAgdC5pc1RvcCA9IHRydWU7CiAgcmV0dXJuIHQ7Cn07Cgp9KSgpOwoKCgoo
        ZnVuY3Rpb24oKSB7Ci8qKgogIE1hcmsgYSBzdHJpbmcgYXMgc2FmZSBmb3Ig
        dW5lc2NhcGVkIG91dHB1dCB3aXRoIEhhbmRsZWJhcnMuIElmIHlvdQogIHJl
        dHVybiBIVE1MIGZyb20gYSBIYW5kbGViYXJzIGhlbHBlciwgdXNlIHRoaXMg
        ZnVuY3Rpb24gdG8KICBlbnN1cmUgSGFuZGxlYmFycyBkb2VzIG5vdCBlc2Nh
        cGUgdGhlIEhUTUwuCgogIGBgYGphdmFzY3JpcHQKICBFbWJlci5TdHJpbmcu
        aHRtbFNhZmUoJzxkaXY+c29tZVN0cmluZzwvZGl2PicpCiAgYGBgCgogIEBt
        ZXRob2QgaHRtbFNhZmUKICBAZm9yIEVtYmVyLlN0cmluZwogIEBzdGF0aWMK
        ICBAcmV0dXJuIHtIYW5kbGViYXJzLlNhZmVTdHJpbmd9IGEgc3RyaW5nIHRo
        YXQgd2lsbCBub3QgYmUgaHRtbCBlc2NhcGVkIGJ5IEhhbmRsZWJhcnMKKi8K
        RW1iZXIuU3RyaW5nLmh0bWxTYWZlID0gZnVuY3Rpb24oc3RyKSB7CiAgcmV0
        dXJuIG5ldyBIYW5kbGViYXJzLlNhZmVTdHJpbmcoc3RyKTsKfTsKCnZhciBo
        dG1sU2FmZSA9IEVtYmVyLlN0cmluZy5odG1sU2FmZTsKCmlmIChFbWJlci5F
        WFRFTkRfUFJPVE9UWVBFUyA9PT0gdHJ1ZSB8fCBFbWJlci5FWFRFTkRfUFJP
        VE9UWVBFUy5TdHJpbmcpIHsKCiAgLyoqCiAgICBNYXJrIGEgc3RyaW5nIGFz
        IGJlaW5nIHNhZmUgZm9yIHVuZXNjYXBlZCBvdXRwdXQgd2l0aCBIYW5kbGVi
        YXJzLgoKICAgIGBgYGphdmFzY3JpcHQKICAgICc8ZGl2PnNvbWVTdHJpbmc8
        L2Rpdj4nLmh0bWxTYWZlKCkKICAgIGBgYAoKICAgIFNlZSBbRW1iZXIuU3Ry
        aW5nLmh0bWxTYWZlXSgvYXBpL2NsYXNzZXMvRW1iZXIuU3RyaW5nLmh0bWwj
        bWV0aG9kX2h0bWxTYWZlKS4KCiAgICBAbWV0aG9kIGh0bWxTYWZlCiAgICBA
        Zm9yIFN0cmluZwogICAgQHJldHVybiB7SGFuZGxlYmFycy5TYWZlU3RyaW5n
        fSBhIHN0cmluZyB0aGF0IHdpbGwgbm90IGJlIGh0bWwgZXNjYXBlZCBieSBI
        YW5kbGViYXJzCiAgKi8KICBTdHJpbmcucHJvdG90eXBlLmh0bWxTYWZlID0g
        ZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gaHRtbFNhZmUodGhpcyk7CiAgfTsK
        fQoKfSkoKTsKCgoKKGZ1bmN0aW9uKCkgewpFbWJlci5IYW5kbGViYXJzLnJl
        c29sdmVQYXRocyA9IGZ1bmN0aW9uKG9wdGlvbnMpIHsKICB2YXIgcmV0ID0g
        W10sCiAgICAgIGNvbnRleHRzID0gb3B0aW9ucy5jb250ZXh0cywKICAgICAg
        cm9vdHMgPSBvcHRpb25zLnJvb3RzLAogICAgICBkYXRhID0gb3B0aW9ucy5k
        YXRhOwoKICBmb3IgKHZhciBpPTAsIGw9Y29udGV4dHMubGVuZ3RoOyBpPGw7
        IGkrKykgewogICAgcmV0LnB1c2goIEVtYmVyLkhhbmRsZWJhcnMuZ2V0KHJv
        b3RzW2ldLCBjb250ZXh0c1tpXSwgeyBkYXRhOiBkYXRhIH0pICk7CiAgfQoK
        ICByZXR1cm4gcmV0Owp9OwoKfSkoKTsKCgoKKGZ1bmN0aW9uKCkgewovKmpz
        aGludCBuZXdjYXA6ZmFsc2UqLwovKioKQG1vZHVsZSBlbWJlcgpAc3VibW9k
        dWxlIGVtYmVyLWhhbmRsZWJhcnMKKi8KCnZhciBzZXQgPSBFbWJlci5zZXQs
        IGdldCA9IEVtYmVyLmdldDsKdmFyIE1ldGFtb3JwaCA9IHJlcXVpcmVNb2R1
        bGUoJ21ldGFtb3JwaCcpOwoKZnVuY3Rpb24gbm90aWZ5TXV0YXRpb25MaXN0
        ZW5lcnMoKSB7CiAgRW1iZXIucnVuLm9uY2UoRW1iZXIuVmlldywgJ25vdGlm
        eU11dGF0aW9uTGlzdGVuZXJzJyk7Cn0KCi8vIERPTU1hbmFnZXIgc2hvdWxk
        IGp1c3QgYWJzdHJhY3QgZG9tIG1hbmlwdWxhdGlvbiBiZXR3ZWVuIGpxdWVy
        eSBhbmQgbWV0YW1vcnBoCnZhciBET01NYW5hZ2VyID0gewogIHJlbW92ZTog
        ZnVuY3Rpb24odmlldykgewogICAgdmlldy5tb3JwaC5yZW1vdmUoKTsKICAg
        IG5vdGlmeU11dGF0aW9uTGlzdGVuZXJzKCk7CiAgfSwKCiAgcHJlcGVuZDog
        ZnVuY3Rpb24odmlldywgaHRtbCkgewogICAgdmlldy5tb3JwaC5wcmVwZW5k
        KGh0bWwpOwogICAgbm90aWZ5TXV0YXRpb25MaXN0ZW5lcnMoKTsKICB9LAoK
        ICBhZnRlcjogZnVuY3Rpb24odmlldywgaHRtbCkgewogICAgdmlldy5tb3Jw
        aC5hZnRlcihodG1sKTsKICAgIG5vdGlmeU11dGF0aW9uTGlzdGVuZXJzKCk7
        CiAgfSwKCiAgaHRtbDogZnVuY3Rpb24odmlldywgaHRtbCkgewogICAgdmll
        dy5tb3JwaC5odG1sKGh0bWwpOwogICAgbm90aWZ5TXV0YXRpb25MaXN0ZW5l
        cnMoKTsKICB9LAoKICAvLyBUaGlzIGlzIG1lc3NlZCB1cC4KICByZXBsYWNl
        OiBmdW5jdGlvbih2aWV3KSB7CiAgICB2YXIgbW9ycGggPSB2aWV3Lm1vcnBo
        OwoKICAgIHZpZXcudHJhbnNpdGlvblRvKCdwcmVSZW5kZXInKTsKCiAgICBF
        bWJlci5ydW4uc2NoZWR1bGUoJ3JlbmRlcicsIHRoaXMsIGZ1bmN0aW9uIHJl
        bmRlck1ldGFtb3JwaFZpZXcoKSB7CiAgICAgIGlmICh2aWV3LmlzRGVzdHJv
        eWluZykgeyByZXR1cm47IH0KCiAgICAgIHZpZXcuY2xlYXJSZW5kZXJlZENo
        aWxkcmVuKCk7CiAgICAgIHZhciBidWZmZXIgPSB2aWV3LnJlbmRlclRvQnVm
        ZmVyKCk7CgogICAgICB2aWV3Lmludm9rZVJlY3Vyc2l2ZWx5KGZ1bmN0aW9u
        KHZpZXcpIHsKICAgICAgICB2aWV3LnByb3BlcnR5V2lsbENoYW5nZSgnZWxl
        bWVudCcpOwogICAgICB9KTsKICAgICAgdmlldy50cmlnZ2VyUmVjdXJzaXZl
        bHkoJ3dpbGxJbnNlcnRFbGVtZW50Jyk7CgogICAgICBtb3JwaC5yZXBsYWNl
        V2l0aChidWZmZXIuc3RyaW5nKCkpOwogICAgICB2aWV3LnRyYW5zaXRpb25U
        bygnaW5ET00nKTsKCiAgICAgIHZpZXcuaW52b2tlUmVjdXJzaXZlbHkoZnVu
        Y3Rpb24odmlldykgewogICAgICAgIHZpZXcucHJvcGVydHlEaWRDaGFuZ2Uo
        J2VsZW1lbnQnKTsKICAgICAgfSk7CiAgICAgIHZpZXcudHJpZ2dlclJlY3Vy
        c2l2ZWx5KCdkaWRJbnNlcnRFbGVtZW50Jyk7CgogICAgICBub3RpZnlNdXRh
        dGlvbkxpc3RlbmVycygpOwogICAgfSk7CiAgfSwKCiAgZW1wdHk6IGZ1bmN0
        aW9uKHZpZXcpIHsKICAgIHZpZXcubW9ycGguaHRtbCgiIik7CiAgICBub3Rp
        ZnlNdXRhdGlvbkxpc3RlbmVycygpOwogIH0KfTsKCi8vIFRoZSBgbW9ycGhg
        IGFuZCBgb3V0ZXJIVE1MYCBwcm9wZXJ0aWVzIGFyZSBpbnRlcm5hbCBvbmx5
        Ci8vIGFuZCBub3Qgb2JzZXJ2YWJsZS4KCi8qKgogIEBjbGFzcyBfTWV0YW1v
        cnBoCiAgQG5hbWVzcGFjZSBFbWJlcgogIEBwcml2YXRlCiovCkVtYmVyLl9N
        ZXRhbW9ycGggPSBFbWJlci5NaXhpbi5jcmVhdGUoewogIGlzVmlydHVhbDog
        dHJ1ZSwKICB0YWdOYW1lOiAnJywKCiAgaW5zdHJ1bWVudE5hbWU6ICdtZXRh
        bW9ycGgnLAoKICBpbml0OiBmdW5jdGlvbigpIHsKICAgIHRoaXMuX3N1cGVy
        KCk7CiAgICB0aGlzLm1vcnBoID0gTWV0YW1vcnBoKCk7CiAgICBFbWJlci5k
        ZXByZWNhdGUoJ1N1cHBseWluZyBhIHRhZ05hbWUgdG8gTWV0YW1vcnBoIHZp
        ZXdzIGlzIHVucmVsaWFibGUgYW5kIGlzIGRlcHJlY2F0ZWQuIFlvdSBtYXkg
        YmUgc2V0dGluZyB0aGUgdGFnTmFtZSBvbiBhIEhhbmRsZWJhcnMgaGVscGVy
        IHRoYXQgY3JlYXRlcyBhIE1ldGFtb3JwaC4nLCAhdGhpcy50YWdOYW1lKTsK
        ICB9LAoKICBiZWZvcmVSZW5kZXI6IGZ1bmN0aW9uKGJ1ZmZlcikgewogICAg
        YnVmZmVyLnB1c2godGhpcy5tb3JwaC5zdGFydFRhZygpKTsKICAgIGJ1ZmZl
        ci5wdXNoT3BlbmluZ1RhZygpOwogIH0sCgogIGFmdGVyUmVuZGVyOiBmdW5j
        dGlvbihidWZmZXIpIHsKICAgIGJ1ZmZlci5wdXNoQ2xvc2luZ1RhZygpOwog
        ICAgYnVmZmVyLnB1c2godGhpcy5tb3JwaC5lbmRUYWcoKSk7CiAgfSwKCiAg
        Y3JlYXRlRWxlbWVudDogZnVuY3Rpb24oKSB7CiAgICB2YXIgYnVmZmVyID0g
        dGhpcy5yZW5kZXJUb0J1ZmZlcigpOwogICAgdGhpcy5vdXRlckhUTUwgPSBi
        dWZmZXIuc3RyaW5nKCk7CiAgICB0aGlzLmNsZWFyQnVmZmVyKCk7CiAgfSwK
        CiAgZG9tTWFuYWdlcjogRE9NTWFuYWdlcgp9KTsKCi8qKgogIEBjbGFzcyBf
        TWV0YW1vcnBoVmlldwogIEBuYW1lc3BhY2UgRW1iZXIKICBAZXh0ZW5kcyBF
        bWJlci5WaWV3CiAgQHVzZXMgRW1iZXIuX01ldGFtb3JwaAogIEBwcml2YXRl
        CiovCkVtYmVyLl9NZXRhbW9ycGhWaWV3ID0gRW1iZXIuVmlldy5leHRlbmQo
        RW1iZXIuX01ldGFtb3JwaCk7CgovKioKICBAY2xhc3MgX1NpbXBsZU1ldGFt
        b3JwaFZpZXcKICBAbmFtZXNwYWNlIEVtYmVyCiAgQGV4dGVuZHMgRW1iZXIu
        Q29yZVZpZXcKICBAdXNlcyBFbWJlci5fTWV0YW1vcnBoCiAgQHByaXZhdGUK
        Ki8KRW1iZXIuX1NpbXBsZU1ldGFtb3JwaFZpZXcgPSBFbWJlci5Db3JlVmll
        dy5leHRlbmQoRW1iZXIuX01ldGFtb3JwaCk7CgoKfSkoKTsKCgoKKGZ1bmN0
        aW9uKCkgewovKmdsb2JhbHMgSGFuZGxlYmFycyAqLwovKmpzaGludCBuZXdj
        YXA6ZmFsc2UqLwovKioKQG1vZHVsZSBlbWJlcgpAc3VibW9kdWxlIGVtYmVy
        LWhhbmRsZWJhcnMKKi8KCnZhciBnZXQgPSBFbWJlci5nZXQsIHNldCA9IEVt
        YmVyLnNldCwgaGFuZGxlYmFyc0dldCA9IEVtYmVyLkhhbmRsZWJhcnMuZ2V0
        Owp2YXIgTWV0YW1vcnBoID0gcmVxdWlyZU1vZHVsZSgnbWV0YW1vcnBoJyk7
        CmZ1bmN0aW9uIFNpbXBsZUhhbmRsZWJhcnNWaWV3KHBhdGgsIHBhdGhSb290
        LCBpc0VzY2FwZWQsIHRlbXBsYXRlRGF0YSkgewogIHRoaXMucGF0aCA9IHBh
        dGg7CiAgdGhpcy5wYXRoUm9vdCA9IHBhdGhSb290OwogIHRoaXMuaXNFc2Nh
        cGVkID0gaXNFc2NhcGVkOwogIHRoaXMudGVtcGxhdGVEYXRhID0gdGVtcGxh
        dGVEYXRhOwoKICB0aGlzLm1vcnBoID0gTWV0YW1vcnBoKCk7CiAgdGhpcy5z
        dGF0ZSA9ICdwcmVSZW5kZXInOwogIHRoaXMudXBkYXRlSWQgPSBudWxsOwog
        IHRoaXMuX3BhcmVudFZpZXcgPSBudWxsOwogIHRoaXMuYnVmZmVyID0gbnVs
        bDsKfQoKRW1iZXIuX1NpbXBsZUhhbmRsZWJhcnNWaWV3ID0gU2ltcGxlSGFu
        ZGxlYmFyc1ZpZXc7CgpTaW1wbGVIYW5kbGViYXJzVmlldy5wcm90b3R5cGUg
        PSB7CiAgaXNWaXJ0dWFsOiB0cnVlLAogIGlzVmlldzogdHJ1ZSwKCiAgZGVz
        dHJveTogZnVuY3Rpb24gKCkgewogICAgaWYgKHRoaXMudXBkYXRlSWQpIHsK
        ICAgICAgRW1iZXIucnVuLmNhbmNlbCh0aGlzLnVwZGF0ZUlkKTsKICAgICAg
        dGhpcy51cGRhdGVJZCA9IG51bGw7CiAgICB9CiAgICBpZiAodGhpcy5fcGFy
        ZW50VmlldykgewogICAgICB0aGlzLl9wYXJlbnRWaWV3LnJlbW92ZUNoaWxk
        KHRoaXMpOwogICAgfQogICAgdGhpcy5tb3JwaCA9IG51bGw7CiAgICB0aGlz
        LnN0YXRlID0gJ2Rlc3Ryb3llZCc7CiAgfSwKCiAgcHJvcGVydHlXaWxsQ2hh
        bmdlOiBFbWJlci5LLAoKICBwcm9wZXJ0eURpZENoYW5nZTogRW1iZXIuSywK
        CiAgbm9ybWFsaXplZFZhbHVlOiBmdW5jdGlvbigpIHsKICAgIHZhciBwYXRo
        ID0gdGhpcy5wYXRoLAogICAgICAgIHBhdGhSb290ID0gdGhpcy5wYXRoUm9v
        dCwKICAgICAgICByZXN1bHQsIHRlbXBsYXRlRGF0YTsKCiAgICAvLyBVc2Ug
        dGhlIHBhdGhSb290IGFzIHRoZSByZXN1bHQgaWYgbm8gcGF0aCBpcyBwcm92
        aWRlZC4gVGhpcwogICAgLy8gaGFwcGVucyBpZiB0aGUgcGF0aCBpcyBgdGhp
        c2AsIHdoaWNoIGdldHMgbm9ybWFsaXplZCBpbnRvCiAgICAvLyBhIGBwYXRo
        Um9vdGAgb2YgdGhlIGN1cnJlbnQgSGFuZGxlYmFycyBjb250ZXh0IGFuZCBh
        IHBhdGgKICAgIC8vIG9mIGAnJ2AuCiAgICBpZiAocGF0aCA9PT0gJycpIHsK
        ICAgICAgcmVzdWx0ID0gcGF0aFJvb3Q7CiAgICB9IGVsc2UgewogICAgICB0
        ZW1wbGF0ZURhdGEgPSB0aGlzLnRlbXBsYXRlRGF0YTsKICAgICAgcmVzdWx0
        ID0gaGFuZGxlYmFyc0dldChwYXRoUm9vdCwgcGF0aCwgeyBkYXRhOiB0ZW1w
        bGF0ZURhdGEgfSk7CiAgICB9CgogICAgcmV0dXJuIHJlc3VsdDsKICB9LAoK
        ICByZW5kZXJUb0J1ZmZlcjogZnVuY3Rpb24oYnVmZmVyKSB7CiAgICB2YXIg
        c3RyaW5nID0gJyc7CgogICAgc3RyaW5nICs9IHRoaXMubW9ycGguc3RhcnRU
        YWcoKTsKICAgIHN0cmluZyArPSB0aGlzLnJlbmRlcigpOwogICAgc3RyaW5n
        ICs9IHRoaXMubW9ycGguZW5kVGFnKCk7CgogICAgYnVmZmVyLnB1c2goc3Ry
        aW5nKTsKICB9LAoKICByZW5kZXI6IGZ1bmN0aW9uKCkgewogICAgLy8gSWYg
        bm90IGludm9rZWQgdmlhIGEgdHJpcGxlLW11c3RhY2hlICh7e3tmb299fX0p
        LCBlc2NhcGUKICAgIC8vIHRoZSBjb250ZW50IG9mIHRoZSB0ZW1wbGF0ZS4K
        ICAgIHZhciBlc2NhcGUgPSB0aGlzLmlzRXNjYXBlZDsKICAgIHZhciByZXN1
        bHQgPSB0aGlzLm5vcm1hbGl6ZWRWYWx1ZSgpOwoKICAgIGlmIChyZXN1bHQg
        PT09IG51bGwgfHwgcmVzdWx0ID09PSB1bmRlZmluZWQpIHsKICAgICAgcmVz
        dWx0ID0gIiI7CiAgICB9IGVsc2UgaWYgKCEocmVzdWx0IGluc3RhbmNlb2Yg
        SGFuZGxlYmFycy5TYWZlU3RyaW5nKSkgewogICAgICByZXN1bHQgPSBTdHJp
        bmcocmVzdWx0KTsKICAgIH0KCiAgICBpZiAoZXNjYXBlKSB7IHJlc3VsdCA9
        IEhhbmRsZWJhcnMuVXRpbHMuZXNjYXBlRXhwcmVzc2lvbihyZXN1bHQpOyB9
        CiAgICByZXR1cm4gcmVzdWx0OwogIH0sCgogIHJlcmVuZGVyOiBmdW5jdGlv
        bigpIHsKICAgIHN3aXRjaCh0aGlzLnN0YXRlKSB7CiAgICAgIGNhc2UgJ3By
        ZVJlbmRlcic6CiAgICAgIGNhc2UgJ2Rlc3Ryb3llZCc6CiAgICAgICAgYnJl
        YWs7CiAgICAgIGNhc2UgJ2luQnVmZmVyJzoKICAgICAgICB0aHJvdyBuZXcg
        RW1iZXIuRXJyb3IoIlNvbWV0aGluZyB5b3UgZGlkIHRyaWVkIHRvIHJlcGxh
        Y2UgYW4ge3tleHByZXNzaW9ufX0gYmVmb3JlIGl0IHdhcyBpbnNlcnRlZCBp
        bnRvIHRoZSBET00uIik7CiAgICAgIGNhc2UgJ2hhc0VsZW1lbnQnOgogICAg
        ICBjYXNlICdpbkRPTSc6CiAgICAgICAgdGhpcy51cGRhdGVJZCA9IEVtYmVy
        LnJ1bi5zY2hlZHVsZU9uY2UoJ3JlbmRlcicsIHRoaXMsICd1cGRhdGUnKTsK
        ICAgICAgICBicmVhazsKICAgIH0KCiAgICByZXR1cm4gdGhpczsKICB9LAoK
        ICB1cGRhdGU6IGZ1bmN0aW9uICgpIHsKICAgIHRoaXMudXBkYXRlSWQgPSBu
        dWxsOwogICAgdGhpcy5tb3JwaC5odG1sKHRoaXMucmVuZGVyKCkpOwogIH0s
        CgogIHRyYW5zaXRpb25UbzogZnVuY3Rpb24oc3RhdGUpIHsKICAgIHRoaXMu
        c3RhdGUgPSBzdGF0ZTsKICB9Cn07Cgp2YXIgc3RhdGVzID0gRW1iZXIuVmll
        dy5jbG9uZVN0YXRlcyhFbWJlci5WaWV3LnN0YXRlcyksIG1lcmdlID0gRW1i
        ZXIubWVyZ2U7CgptZXJnZShzdGF0ZXMuX2RlZmF1bHQsIHsKICByZXJlbmRl
        cklmTmVlZGVkOiBFbWJlci5LCn0pOwoKbWVyZ2Uoc3RhdGVzLmluRE9NLCB7
        CiAgcmVyZW5kZXJJZk5lZWRlZDogZnVuY3Rpb24odmlldykgewogICAgaWYg
        KHZpZXcubm9ybWFsaXplZFZhbHVlKCkgIT09IHZpZXcuX2xhc3ROb3JtYWxp
        emVkVmFsdWUpIHsKICAgICAgdmlldy5yZXJlbmRlcigpOwogICAgfQogIH0K
        fSk7CgovKioKICBgRW1iZXIuX0hhbmRsZWJhcnNCb3VuZFZpZXdgIGlzIGEg
        cHJpdmF0ZSB2aWV3IGNyZWF0ZWQgYnkgdGhlIEhhbmRsZWJhcnMKICBge3ti
        aW5kfX1gIGhlbHBlcnMgdGhhdCBpcyB1c2VkIHRvIGtlZXAgdHJhY2sgb2Yg
        Ym91bmQgcHJvcGVydGllcy4KCiAgRXZlcnkgdGltZSBhIHByb3BlcnR5IGlz
        IGJvdW5kIHVzaW5nIGEgYHt7bXVzdGFjaGV9fWAsIGFuIGFub255bW91cyBz
        dWJjbGFzcwogIG9mIGBFbWJlci5fSGFuZGxlYmFyc0JvdW5kVmlld2AgaXMg
        Y3JlYXRlZCB3aXRoIHRoZSBhcHByb3ByaWF0ZSBzdWItdGVtcGxhdGUKICBh
        bmQgY29udGV4dCBzZXQgdXAuIFdoZW4gdGhlIGFzc29jaWF0ZWQgcHJvcGVy
        dHkgY2hhbmdlcywganVzdCB0aGUgdGVtcGxhdGUKICBmb3IgdGhpcyB2aWV3
        IHdpbGwgcmUtcmVuZGVyLgoKICBAY2xhc3MgX0hhbmRsZWJhcnNCb3VuZFZp
        ZXcKICBAbmFtZXNwYWNlIEVtYmVyCiAgQGV4dGVuZHMgRW1iZXIuX01ldGFt
        b3JwaFZpZXcKICBAcHJpdmF0ZQoqLwpFbWJlci5fSGFuZGxlYmFyc0JvdW5k
        VmlldyA9IEVtYmVyLl9NZXRhbW9ycGhWaWV3LmV4dGVuZCh7CiAgaW5zdHJ1
        bWVudE5hbWU6ICdib3VuZEhhbmRsZWJhcnMnLAogIHN0YXRlczogc3RhdGVz
        LAoKICAvKioKICAgIFRoZSBmdW5jdGlvbiB1c2VkIHRvIGRldGVybWluZSBp
        ZiB0aGUgYGRpc3BsYXlUZW1wbGF0ZWAgb3IKICAgIGBpbnZlcnNlVGVtcGxh
        dGVgIHNob3VsZCBiZSByZW5kZXJlZC4gVGhpcyBzaG91bGQgYmUgYSBmdW5j
        dGlvbiB0aGF0IHRha2VzCiAgICBhIHZhbHVlIGFuZCByZXR1cm5zIGEgQm9v
        bGVhbi4KCiAgICBAcHJvcGVydHkgc2hvdWxkRGlzcGxheUZ1bmMKICAgIEB0
        eXBlIEZ1bmN0aW9uCiAgICBAZGVmYXVsdCBudWxsCiAgKi8KICBzaG91bGRE
        aXNwbGF5RnVuYzogbnVsbCwKCiAgLyoqCiAgICBXaGV0aGVyIHRoZSB0ZW1w
        bGF0ZSByZW5kZXJlZCBieSB0aGlzIHZpZXcgZ2V0cyBwYXNzZWQgdGhlIGNv
        bnRleHQgb2JqZWN0CiAgICBvZiBpdHMgcGFyZW50IHRlbXBsYXRlLCBvciBn
        ZXRzIHBhc3NlZCB0aGUgdmFsdWUgb2YgcmV0cmlldmluZyBgcGF0aGAKICAg
        IGZyb20gdGhlIGBwYXRoUm9vdGAuCgogICAgRm9yIGV4YW1wbGUsIHRoaXMg
        aXMgdHJ1ZSB3aGVuIHVzaW5nIHRoZSBge3sjaWZ9fWAgaGVscGVyLCBiZWNh
        dXNlIHRoZQogICAgdGVtcGxhdGUgaW5zaWRlIHRoZSBoZWxwZXIgc2hvdWxk
        IGxvb2sgdXAgcHJvcGVydGllcyByZWxhdGl2ZSB0byB0aGUgc2FtZQogICAg
        b2JqZWN0IGFzIG91dHNpZGUgdGhlIGJsb2NrLiBUaGlzIHdvdWxkIGJlIGBm
        YWxzZWAgd2hlbiB1c2VkIHdpdGggYHt7I3dpdGgKICAgIGZvb319YCBiZWNh
        dXNlIHRoZSB0ZW1wbGF0ZSBzaG91bGQgcmVjZWl2ZSB0aGUgb2JqZWN0IGZv
        dW5kIGJ5IGV2YWx1YXRpbmcKICAgIGBmb29gLgoKICAgIEBwcm9wZXJ0eSBw
        cmVzZXJ2ZUNvbnRleHQKICAgIEB0eXBlIEJvb2xlYW4KICAgIEBkZWZhdWx0
        IGZhbHNlCiAgKi8KICBwcmVzZXJ2ZUNvbnRleHQ6IGZhbHNlLAoKICAvKioK
        ICAgIElmIGBwcmVzZXJ2ZUNvbnRleHRgIGlzIHRydWUsIHRoaXMgaXMgdGhl
        IG9iamVjdCB0aGF0IHdpbGwgYmUgdXNlZAogICAgdG8gcmVuZGVyIHRoZSB0
        ZW1wbGF0ZS4KCiAgICBAcHJvcGVydHkgcHJldmlvdXNDb250ZXh0CiAgICBA
        dHlwZSBPYmplY3QKICAqLwogIHByZXZpb3VzQ29udGV4dDogbnVsbCwKCiAg
        LyoqCiAgICBUaGUgdGVtcGxhdGUgdG8gcmVuZGVyIHdoZW4gYHNob3VsZERp
        c3BsYXlGdW5jYCBldmFsdWF0ZXMgdG8gYHRydWVgLgoKICAgIEBwcm9wZXJ0
        eSBkaXNwbGF5VGVtcGxhdGUKICAgIEB0eXBlIEZ1bmN0aW9uCiAgICBAZGVm
        YXVsdCBudWxsCiAgKi8KICBkaXNwbGF5VGVtcGxhdGU6IG51bGwsCgogIC8q
        KgogICAgVGhlIHRlbXBsYXRlIHRvIHJlbmRlciB3aGVuIGBzaG91bGREaXNw
        bGF5RnVuY2AgZXZhbHVhdGVzIHRvIGBmYWxzZWAuCgogICAgQHByb3BlcnR5
        IGludmVyc2VUZW1wbGF0ZQogICAgQHR5cGUgRnVuY3Rpb24KICAgIEBkZWZh
        dWx0IG51bGwKICAqLwogIGludmVyc2VUZW1wbGF0ZTogbnVsbCwKCgogIC8q
        KgogICAgVGhlIHBhdGggdG8gbG9vayB1cCBvbiBgcGF0aFJvb3RgIHRoYXQg
        aXMgcGFzc2VkIHRvCiAgICBgc2hvdWxkRGlzcGxheUZ1bmNgIHRvIGRldGVy
        bWluZSB3aGljaCB0ZW1wbGF0ZSB0byByZW5kZXIuCgogICAgSW4gYWRkaXRp
        b24sIGlmIGBwcmVzZXJ2ZUNvbnRleHRgIGlzIGBmYWxzZSxgIHRoZSBvYmpl
        Y3QgYXQgdGhpcyBwYXRoIHdpbGwKICAgIGJlIHBhc3NlZCB0byB0aGUgdGVt
        cGxhdGUgd2hlbiByZW5kZXJpbmcuCgogICAgQHByb3BlcnR5IHBhdGgKICAg
        IEB0eXBlIFN0cmluZwogICAgQGRlZmF1bHQgbnVsbAogICovCiAgcGF0aDog
        bnVsbCwKCiAgLyoqCiAgICBUaGUgb2JqZWN0IGZyb20gd2hpY2ggdGhlIGBw
        YXRoYCB3aWxsIGJlIGxvb2tlZCB1cC4gU29tZXRpbWVzIHRoaXMgaXMgdGhl
        CiAgICBzYW1lIGFzIHRoZSBgcHJldmlvdXNDb250ZXh0YCwgYnV0IGluIGNh
        c2VzIHdoZXJlIHRoaXMgdmlldyBoYXMgYmVlbgogICAgZ2VuZXJhdGVkIGZv
        ciBwYXRocyB0aGF0IHN0YXJ0IHdpdGggYSBrZXl3b3JkIHN1Y2ggYXMgYHZp
        ZXdgIG9yCiAgICBgY29udHJvbGxlcmAsIHRoZSBwYXRoIHJvb3Qgd2lsbCBi
        ZSB0aGF0IHJlc29sdmVkIG9iamVjdC4KCiAgICBAcHJvcGVydHkgcGF0aFJv
        b3QKICAgIEB0eXBlIE9iamVjdAogICovCiAgcGF0aFJvb3Q6IG51bGwsCgog
        IG5vcm1hbGl6ZWRWYWx1ZTogZnVuY3Rpb24oKSB7CiAgICB2YXIgcGF0aCA9
        IGdldCh0aGlzLCAncGF0aCcpLAogICAgICAgIHBhdGhSb290ICA9IGdldCh0
        aGlzLCAncGF0aFJvb3QnKSwKICAgICAgICB2YWx1ZU5vcm1hbGl6ZXIgPSBn
        ZXQodGhpcywgJ3ZhbHVlTm9ybWFsaXplckZ1bmMnKSwKICAgICAgICByZXN1
        bHQsIHRlbXBsYXRlRGF0YTsKCiAgICAvLyBVc2UgdGhlIHBhdGhSb290IGFz
        IHRoZSByZXN1bHQgaWYgbm8gcGF0aCBpcyBwcm92aWRlZC4gVGhpcwogICAg
        Ly8gaGFwcGVucyBpZiB0aGUgcGF0aCBpcyBgdGhpc2AsIHdoaWNoIGdldHMg
        bm9ybWFsaXplZCBpbnRvCiAgICAvLyBhIGBwYXRoUm9vdGAgb2YgdGhlIGN1
        cnJlbnQgSGFuZGxlYmFycyBjb250ZXh0IGFuZCBhIHBhdGgKICAgIC8vIG9m
        IGAnJ2AuCiAgICBpZiAocGF0aCA9PT0gJycpIHsKICAgICAgcmVzdWx0ID0g
        cGF0aFJvb3Q7CiAgICB9IGVsc2UgewogICAgICB0ZW1wbGF0ZURhdGEgPSBn
        ZXQodGhpcywgJ3RlbXBsYXRlRGF0YScpOwogICAgICByZXN1bHQgPSBoYW5k
        bGViYXJzR2V0KHBhdGhSb290LCBwYXRoLCB7IGRhdGE6IHRlbXBsYXRlRGF0
        YSB9KTsKICAgIH0KCiAgICByZXR1cm4gdmFsdWVOb3JtYWxpemVyID8gdmFs
        dWVOb3JtYWxpemVyKHJlc3VsdCkgOiByZXN1bHQ7CiAgfSwKCiAgcmVyZW5k
        ZXJJZk5lZWRlZDogZnVuY3Rpb24oKSB7CiAgICB0aGlzLmN1cnJlbnRTdGF0
        ZS5yZXJlbmRlcklmTmVlZGVkKHRoaXMpOwogIH0sCgogIC8qKgogICAgRGV0
        ZXJtaW5lcyB3aGljaCB0ZW1wbGF0ZSB0byBpbnZva2UsIHNldHMgdXAgdGhl
        IGNvcnJlY3Qgc3RhdGUgYmFzZWQgb24KICAgIHRoYXQgbG9naWMsIHRoZW4g
        aW52b2tlcyB0aGUgZGVmYXVsdCBgRW1iZXIuVmlld2AgYHJlbmRlcmAgaW1w
        bGVtZW50YXRpb24uCgogICAgVGhpcyBtZXRob2Qgd2lsbCBmaXJzdCBsb29r
        IHVwIHRoZSBgcGF0aGAga2V5IG9uIGBwYXRoUm9vdGAsCiAgICB0aGVuIHBh
        c3MgdGhhdCB2YWx1ZSB0byB0aGUgYHNob3VsZERpc3BsYXlGdW5jYCBmdW5j
        dGlvbi4gSWYgdGhhdCByZXR1cm5zCiAgICBgdHJ1ZSxgIHRoZSBgZGlzcGxh
        eVRlbXBsYXRlYCBmdW5jdGlvbiB3aWxsIGJlIHJlbmRlcmVkIHRvIERPTS4g
        T3RoZXJ3aXNlLAogICAgYGludmVyc2VUZW1wbGF0ZWAsIGlmIHNwZWNpZmll
        ZCwgd2lsbCBiZSByZW5kZXJlZC4KCiAgICBGb3IgZXhhbXBsZSwgaWYgdGhp
        cyBgRW1iZXIuX0hhbmRsZWJhcnNCb3VuZFZpZXdgIHJlcHJlc2VudGVkIHRo
        ZSBge3sjd2l0aAogICAgZm9vfX1gIGhlbHBlciwgaXQgd291bGQgbG9vayB1
        cCB0aGUgYGZvb2AgcHJvcGVydHkgb2YgaXRzIGNvbnRleHQsIGFuZAogICAg
        YHNob3VsZERpc3BsYXlGdW5jYCB3b3VsZCBhbHdheXMgcmV0dXJuIHRydWUu
        IFRoZSBvYmplY3QgZm91bmQgYnkgbG9va2luZwogICAgdXAgYGZvb2Agd291
        bGQgYmUgcGFzc2VkIHRvIGBkaXNwbGF5VGVtcGxhdGVgLgoKICAgIEBtZXRo
        b2QgcmVuZGVyCiAgICBAcGFyYW0ge0VtYmVyLlJlbmRlckJ1ZmZlcn0gYnVm
        ZmVyCiAgKi8KICByZW5kZXI6IGZ1bmN0aW9uKGJ1ZmZlcikgewogICAgLy8g
        SWYgbm90IGludm9rZWQgdmlhIGEgdHJpcGxlLW11c3RhY2hlICh7e3tmb299
        fX0pLCBlc2NhcGUKICAgIC8vIHRoZSBjb250ZW50IG9mIHRoZSB0ZW1wbGF0
        ZS4KICAgIHZhciBlc2NhcGUgPSBnZXQodGhpcywgJ2lzRXNjYXBlZCcpOwoK
        ICAgIHZhciBzaG91bGREaXNwbGF5ID0gZ2V0KHRoaXMsICdzaG91bGREaXNw
        bGF5RnVuYycpLAogICAgICAgIHByZXNlcnZlQ29udGV4dCA9IGdldCh0aGlz
        LCAncHJlc2VydmVDb250ZXh0JyksCiAgICAgICAgY29udGV4dCA9IGdldCh0
        aGlzLCAncHJldmlvdXNDb250ZXh0Jyk7CgogICAgdmFyIF9jb250ZXh0Q29u
        dHJvbGxlciA9IGdldCh0aGlzLCAnX2NvbnRleHRDb250cm9sbGVyJyk7Cgog
        ICAgdmFyIGludmVyc2VUZW1wbGF0ZSA9IGdldCh0aGlzLCAnaW52ZXJzZVRl
        bXBsYXRlJyksCiAgICAgICAgZGlzcGxheVRlbXBsYXRlID0gZ2V0KHRoaXMs
        ICdkaXNwbGF5VGVtcGxhdGUnKTsKCiAgICB2YXIgcmVzdWx0ID0gdGhpcy5u
        b3JtYWxpemVkVmFsdWUoKTsKICAgIHRoaXMuX2xhc3ROb3JtYWxpemVkVmFs
        dWUgPSByZXN1bHQ7CgogICAgLy8gRmlyc3QsIHRlc3QgdGhlIGNvbmRpdGlv
        bmFsIHRvIHNlZSBpZiB3ZSBzaG91bGQKICAgIC8vIHJlbmRlciB0aGUgdGVt
        cGxhdGUgb3Igbm90LgogICAgaWYgKHNob3VsZERpc3BsYXkocmVzdWx0KSkg
        ewogICAgICBzZXQodGhpcywgJ3RlbXBsYXRlJywgZGlzcGxheVRlbXBsYXRl
        KTsKCiAgICAgIC8vIElmIHdlIGFyZSBwcmVzZXJ2aW5nIHRoZSBjb250ZXh0
        IChmb3IgZXhhbXBsZSwgaWYgdGhpcwogICAgICAvLyBpcyBhbiAjaWYgYmxv
        Y2ssIGNhbGwgdGhlIHRlbXBsYXRlIHdpdGggdGhlIHNhbWUgb2JqZWN0Lgog
        ICAgICBpZiAocHJlc2VydmVDb250ZXh0KSB7CiAgICAgICAgc2V0KHRoaXMs
        ICdfY29udGV4dCcsIGNvbnRleHQpOwogICAgICB9IGVsc2UgewogICAgICAv
        LyBPdGhlcndpc2UsIGRldGVybWluZSBpZiB0aGlzIGlzIGEgYmxvY2sgYmlu
        ZCBvciBub3QuCiAgICAgIC8vIElmIHNvLCBwYXNzIHRoZSBzcGVjaWZpZWQg
        b2JqZWN0IHRvIHRoZSB0ZW1wbGF0ZQogICAgICAgIGlmIChkaXNwbGF5VGVt
        cGxhdGUpIHsKICAgICAgICAgIGlmIChfY29udGV4dENvbnRyb2xsZXIpIHsK
        ICAgICAgICAgICAgc2V0KF9jb250ZXh0Q29udHJvbGxlciwgJ2NvbnRlbnQn
        LCByZXN1bHQpOwogICAgICAgICAgICByZXN1bHQgPSBfY29udGV4dENvbnRy
        b2xsZXI7CiAgICAgICAgICB9CiAgICAgICAgICBzZXQodGhpcywgJ19jb250
        ZXh0JywgcmVzdWx0KTsKICAgICAgICB9IGVsc2UgewogICAgICAgIC8vIFRo
        aXMgaXMgbm90IGEgYmluZCBibG9jaywganVzdCBwdXNoIHRoZSByZXN1bHQg
        b2YgdGhlCiAgICAgICAgLy8gZXhwcmVzc2lvbiB0byB0aGUgcmVuZGVyIGNv
        bnRleHQgYW5kIHJldHVybi4KICAgICAgICAgIGlmIChyZXN1bHQgPT09IG51
        bGwgfHwgcmVzdWx0ID09PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgcmVz
        dWx0ID0gIiI7CiAgICAgICAgICB9IGVsc2UgaWYgKCEocmVzdWx0IGluc3Rh
        bmNlb2YgSGFuZGxlYmFycy5TYWZlU3RyaW5nKSkgewogICAgICAgICAgICBy
        ZXN1bHQgPSBTdHJpbmcocmVzdWx0KTsKICAgICAgICAgIH0KCiAgICAgICAg
        ICBpZiAoZXNjYXBlKSB7IHJlc3VsdCA9IEhhbmRsZWJhcnMuVXRpbHMuZXNj
        YXBlRXhwcmVzc2lvbihyZXN1bHQpOyB9CiAgICAgICAgICBidWZmZXIucHVz
        aChyZXN1bHQpOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAg
        fQogICAgfSBlbHNlIGlmIChpbnZlcnNlVGVtcGxhdGUpIHsKICAgICAgc2V0
        KHRoaXMsICd0ZW1wbGF0ZScsIGludmVyc2VUZW1wbGF0ZSk7CgogICAgICBp
        ZiAocHJlc2VydmVDb250ZXh0KSB7CiAgICAgICAgc2V0KHRoaXMsICdfY29u
        dGV4dCcsIGNvbnRleHQpOwogICAgICB9IGVsc2UgewogICAgICAgIHNldCh0
        aGlzLCAnX2NvbnRleHQnLCByZXN1bHQpOwogICAgICB9CiAgICB9IGVsc2Ug
        ewogICAgICBzZXQodGhpcywgJ3RlbXBsYXRlJywgZnVuY3Rpb24oKSB7IHJl
        dHVybiAnJzsgfSk7CiAgICB9CgogICAgcmV0dXJuIHRoaXMuX3N1cGVyKGJ1
        ZmZlcik7CiAgfQp9KTsKCn0pKCk7CgoKCihmdW5jdGlvbigpIHsKLyoqCkBt
        b2R1bGUgZW1iZXIKQHN1Ym1vZHVsZSBlbWJlci1oYW5kbGViYXJzCiovCgp2
        YXIgZ2V0ID0gRW1iZXIuZ2V0LCBzZXQgPSBFbWJlci5zZXQsIGZtdCA9IEVt
        YmVyLlN0cmluZy5mbXQ7CnZhciBoYW5kbGViYXJzR2V0ID0gRW1iZXIuSGFu
        ZGxlYmFycy5nZXQsIG5vcm1hbGl6ZVBhdGggPSBFbWJlci5IYW5kbGViYXJz
        Lm5vcm1hbGl6ZVBhdGg7CnZhciBoYW5kbGViYXJzR2V0RXNjYXBlZCA9IEVt
        YmVyLkhhbmRsZWJhcnMuZ2V0RXNjYXBlZDsKdmFyIGZvckVhY2ggPSBFbWJl
        ci5BcnJheVBvbHlmaWxscy5mb3JFYWNoOwp2YXIgb19jcmVhdGUgPSBFbWJl
        ci5jcmVhdGU7Cgp2YXIgRW1iZXJIYW5kbGViYXJzID0gRW1iZXIuSGFuZGxl
        YmFycywgaGVscGVycyA9IEVtYmVySGFuZGxlYmFycy5oZWxwZXJzOwoKZnVu
        Y3Rpb24gZXhpc3RzKHZhbHVlKSB7CiAgcmV0dXJuICFFbWJlci5pc05vbmUo
        dmFsdWUpOwp9CgovLyBCaW5kcyBhIHByb3BlcnR5IGludG8gdGhlIERPTS4g
        VGhpcyB3aWxsIGNyZWF0ZSBhIGhvb2sgaW4gRE9NIHRoYXQgdGhlCi8vIEtW
        TyBzeXN0ZW0gd2lsbCBsb29rIGZvciBhbmQgdXBkYXRlIGlmIHRoZSBwcm9w
        ZXJ0eSBjaGFuZ2VzLgpmdW5jdGlvbiBiaW5kKHByb3BlcnR5LCBvcHRpb25z
        LCBwcmVzZXJ2ZUNvbnRleHQsIHNob3VsZERpc3BsYXksIHZhbHVlTm9ybWFs
        aXplciwgY2hpbGRQcm9wZXJ0aWVzKSB7CiAgdmFyIGRhdGEgPSBvcHRpb25z
        LmRhdGEsCiAgICAgIGZuID0gb3B0aW9ucy5mbiwKICAgICAgaW52ZXJzZSA9
        IG9wdGlvbnMuaW52ZXJzZSwKICAgICAgdmlldyA9IGRhdGEudmlldywKICAg
        ICAgY3VycmVudENvbnRleHQgPSB0aGlzLAogICAgICBub3JtYWxpemVkLCBv
        YnNlcnZlciwgaTsKCiAgbm9ybWFsaXplZCA9IG5vcm1hbGl6ZVBhdGgoY3Vy
        cmVudENvbnRleHQsIHByb3BlcnR5LCBkYXRhKTsKCiAgLy8gU2V0IHVwIG9i
        c2VydmVycyBmb3Igb2JzZXJ2YWJsZSBvYmplY3RzCiAgaWYgKCdvYmplY3Qn
        ID09PSB0eXBlb2YgdGhpcykgewogICAgaWYgKGRhdGEuaW5zaWRlR3JvdXAp
        IHsKICAgICAgb2JzZXJ2ZXIgPSBmdW5jdGlvbigpIHsKICAgICAgICBFbWJl
        ci5ydW4ub25jZSh2aWV3LCAncmVyZW5kZXInKTsKICAgICAgfTsKCiAgICAg
        IHZhciB0ZW1wbGF0ZSwgY29udGV4dCwgcmVzdWx0ID0gaGFuZGxlYmFyc0dl
        dChjdXJyZW50Q29udGV4dCwgcHJvcGVydHksIG9wdGlvbnMpOwoKICAgICAg
        cmVzdWx0ID0gdmFsdWVOb3JtYWxpemVyID8gdmFsdWVOb3JtYWxpemVyKHJl
        c3VsdCkgOiByZXN1bHQ7CgogICAgICBjb250ZXh0ID0gcHJlc2VydmVDb250
        ZXh0ID8gY3VycmVudENvbnRleHQgOiByZXN1bHQ7CiAgICAgIGlmIChzaG91
        bGREaXNwbGF5KHJlc3VsdCkpIHsKICAgICAgICB0ZW1wbGF0ZSA9IGZuOwog
        ICAgICB9IGVsc2UgaWYgKGludmVyc2UpIHsKICAgICAgICB0ZW1wbGF0ZSA9
        IGludmVyc2U7CiAgICAgIH0KCiAgICAgIHRlbXBsYXRlKGNvbnRleHQsIHsg
        ZGF0YTogb3B0aW9ucy5kYXRhIH0pOwogICAgfSBlbHNlIHsKICAgICAgLy8g
        Q3JlYXRlIHRoZSB2aWV3IHRoYXQgd2lsbCB3cmFwIHRoZSBvdXRwdXQgb2Yg
        dGhpcyB0ZW1wbGF0ZS9wcm9wZXJ0eQogICAgICAvLyBhbmQgYWRkIGl0IHRv
        IHRoZSBuZWFyZXN0IHZpZXcncyBjaGlsZFZpZXdzIGFycmF5LgogICAgICAv
        LyBTZWUgdGhlIGRvY3VtZW50YXRpb24gb2YgRW1iZXIuX0hhbmRsZWJhcnNC
        b3VuZFZpZXcgZm9yIG1vcmUuCiAgICAgIHZhciBiaW5kVmlldyA9IHZpZXcu
        Y3JlYXRlQ2hpbGRWaWV3KEVtYmVyLl9IYW5kbGViYXJzQm91bmRWaWV3LCB7
        CiAgICAgICAgcHJlc2VydmVDb250ZXh0OiBwcmVzZXJ2ZUNvbnRleHQsCiAg
        ICAgICAgc2hvdWxkRGlzcGxheUZ1bmM6IHNob3VsZERpc3BsYXksCiAgICAg
        ICAgdmFsdWVOb3JtYWxpemVyRnVuYzogdmFsdWVOb3JtYWxpemVyLAogICAg
        ICAgIGRpc3BsYXlUZW1wbGF0ZTogZm4sCiAgICAgICAgaW52ZXJzZVRlbXBs
        YXRlOiBpbnZlcnNlLAogICAgICAgIHBhdGg6IHByb3BlcnR5LAogICAgICAg
        IHBhdGhSb290OiBjdXJyZW50Q29udGV4dCwKICAgICAgICBwcmV2aW91c0Nv
        bnRleHQ6IGN1cnJlbnRDb250ZXh0LAogICAgICAgIGlzRXNjYXBlZDogIW9w
        dGlvbnMuaGFzaC51bmVzY2FwZWQsCiAgICAgICAgdGVtcGxhdGVEYXRhOiBv
        cHRpb25zLmRhdGEKICAgICAgfSk7CgogICAgICBpZiAob3B0aW9ucy5oYXNo
        LmNvbnRyb2xsZXIpIHsKICAgICAgICBiaW5kVmlldy5zZXQoJ19jb250ZXh0
        Q29udHJvbGxlcicsIHRoaXMuY29udGFpbmVyLmxvb2t1cEZhY3RvcnkoJ2Nv
        bnRyb2xsZXI6JytvcHRpb25zLmhhc2guY29udHJvbGxlcikuY3JlYXRlKHsK
        ICAgICAgICAgIGNvbnRhaW5lcjogY3VycmVudENvbnRleHQuY29udGFpbmVy
        LAogICAgICAgICAgcGFyZW50Q29udHJvbGxlcjogY3VycmVudENvbnRleHQs
        CiAgICAgICAgICB0YXJnZXQ6IGN1cnJlbnRDb250ZXh0CiAgICAgICAgfSkp
        OwogICAgICB9CgogICAgICB2aWV3LmFwcGVuZENoaWxkKGJpbmRWaWV3KTsK
        CiAgICAgIG9ic2VydmVyID0gZnVuY3Rpb24oKSB7CiAgICAgICAgRW1iZXIu
        cnVuLnNjaGVkdWxlT25jZSgncmVuZGVyJywgYmluZFZpZXcsICdyZXJlbmRl
        cklmTmVlZGVkJyk7CiAgICAgIH07CiAgICB9CgogICAgLy8gT2JzZXJ2ZXMg
        dGhlIGdpdmVuIHByb3BlcnR5IG9uIHRoZSBjb250ZXh0IGFuZAogICAgLy8g
        dGVsbHMgdGhlIEVtYmVyLl9IYW5kbGViYXJzQm91bmRWaWV3IHRvIHJlLXJl
        bmRlci4gSWYgcHJvcGVydHkKICAgIC8vIGlzIGFuIGVtcHR5IHN0cmluZywg
        d2UgYXJlIHByaW50aW5nIHRoZSBjdXJyZW50IGNvbnRleHQKICAgIC8vIG9i
        amVjdCAoe3t0aGlzfX0pIHNvIHVwZGF0aW5nIGl0IGlzIG5vdCBvdXIgcmVz
        cG9uc2liaWxpdHkuCiAgICBpZiAobm9ybWFsaXplZC5wYXRoICE9PSAnJykg
        ewogICAgICB2aWV3LnJlZ2lzdGVyT2JzZXJ2ZXIobm9ybWFsaXplZC5yb290
        LCBub3JtYWxpemVkLnBhdGgsIG9ic2VydmVyKTsKICAgICAgaWYgKGNoaWxk
        UHJvcGVydGllcykgewogICAgICAgIGZvciAoaT0wOyBpPGNoaWxkUHJvcGVy
        dGllcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgdmlldy5yZWdpc3Rlck9i
        c2VydmVyKG5vcm1hbGl6ZWQucm9vdCwgbm9ybWFsaXplZC5wYXRoKycuJytj
        aGlsZFByb3BlcnRpZXNbaV0sIG9ic2VydmVyKTsKICAgICAgICB9CiAgICAg
        IH0KICAgIH0KICB9IGVsc2UgewogICAgLy8gVGhlIG9iamVjdCBpcyBub3Qg
        b2JzZXJ2YWJsZSwgc28ganVzdCByZW5kZXIgaXQgb3V0IGFuZAogICAgLy8g
        YmUgZG9uZSB3aXRoIGl0LgogICAgZGF0YS5idWZmZXIucHVzaChoYW5kbGVi
        YXJzR2V0RXNjYXBlZChjdXJyZW50Q29udGV4dCwgcHJvcGVydHksIG9wdGlv
        bnMpKTsKICB9Cn0KCkVtYmVySGFuZGxlYmFycy5iaW5kID0gYmluZDsKCmZ1
        bmN0aW9uIHNpbXBsZUJpbmQoY3VycmVudENvbnRleHQsIHByb3BlcnR5LCBv
        cHRpb25zKSB7CiAgdmFyIGRhdGEgPSBvcHRpb25zLmRhdGEsCiAgICAgIHZp
        ZXcgPSBkYXRhLnZpZXcsCiAgICAgIG5vcm1hbGl6ZWQsIG9ic2VydmVyLCBw
        YXRoUm9vdCwgb3V0cHV0OwoKICBub3JtYWxpemVkID0gbm9ybWFsaXplUGF0
        aChjdXJyZW50Q29udGV4dCwgcHJvcGVydHksIGRhdGEpOwogIHBhdGhSb290
        ID0gbm9ybWFsaXplZC5yb290OwoKICAvLyBTZXQgdXAgb2JzZXJ2ZXJzIGZv
        ciBvYnNlcnZhYmxlIG9iamVjdHMKICBpZiAocGF0aFJvb3QgJiYgKCdvYmpl
        Y3QnID09PSB0eXBlb2YgcGF0aFJvb3QpKSB7CiAgICBpZiAoZGF0YS5pbnNp
        ZGVHcm91cCkgewogICAgICBvYnNlcnZlciA9IGZ1bmN0aW9uKCkgewogICAg
        ICAgIEVtYmVyLnJ1bi5vbmNlKHZpZXcsICdyZXJlbmRlcicpOwogICAgICB9
        OwoKICAgICAgb3V0cHV0ID0gaGFuZGxlYmFyc0dldEVzY2FwZWQoY3VycmVu
        dENvbnRleHQsIHByb3BlcnR5LCBvcHRpb25zKTsKCiAgICAgIGRhdGEuYnVm
        ZmVyLnB1c2gob3V0cHV0KTsKICAgIH0gZWxzZSB7CiAgICAgIHZhciBiaW5k
        VmlldyA9IG5ldyBFbWJlci5fU2ltcGxlSGFuZGxlYmFyc1ZpZXcoCiAgICAg
        ICAgcHJvcGVydHksIGN1cnJlbnRDb250ZXh0LCAhb3B0aW9ucy5oYXNoLnVu
        ZXNjYXBlZCwgb3B0aW9ucy5kYXRhCiAgICAgICk7CgogICAgICBiaW5kVmll
        dy5fcGFyZW50VmlldyA9IHZpZXc7CiAgICAgIHZpZXcuYXBwZW5kQ2hpbGQo
        YmluZFZpZXcpOwoKICAgICAgb2JzZXJ2ZXIgPSBmdW5jdGlvbigpIHsKICAg
        ICAgICBFbWJlci5ydW4uc2NoZWR1bGVPbmNlKCdyZW5kZXInLCBiaW5kVmll
        dywgJ3JlcmVuZGVyJyk7CiAgICAgIH07CiAgICB9CgogICAgLy8gT2JzZXJ2
        ZXMgdGhlIGdpdmVuIHByb3BlcnR5IG9uIHRoZSBjb250ZXh0IGFuZAogICAg
        Ly8gdGVsbHMgdGhlIEVtYmVyLl9IYW5kbGViYXJzQm91bmRWaWV3IHRvIHJl
        LXJlbmRlci4gSWYgcHJvcGVydHkKICAgIC8vIGlzIGFuIGVtcHR5IHN0cmlu
        Zywgd2UgYXJlIHByaW50aW5nIHRoZSBjdXJyZW50IGNvbnRleHQKICAgIC8v
        IG9iamVjdCAoe3t0aGlzfX0pIHNvIHVwZGF0aW5nIGl0IGlzIG5vdCBvdXIg
        cmVzcG9uc2liaWxpdHkuCiAgICBpZiAobm9ybWFsaXplZC5wYXRoICE9PSAn
        JykgewogICAgICB2aWV3LnJlZ2lzdGVyT2JzZXJ2ZXIobm9ybWFsaXplZC5y
        b290LCBub3JtYWxpemVkLnBhdGgsIG9ic2VydmVyKTsKICAgIH0KICB9IGVs
        c2UgewogICAgLy8gVGhlIG9iamVjdCBpcyBub3Qgb2JzZXJ2YWJsZSwgc28g
        anVzdCByZW5kZXIgaXQgb3V0IGFuZAogICAgLy8gYmUgZG9uZSB3aXRoIGl0
        LgogICAgb3V0cHV0ID0gaGFuZGxlYmFyc0dldEVzY2FwZWQoY3VycmVudENv
        bnRleHQsIHByb3BlcnR5LCBvcHRpb25zKTsKICAgIGRhdGEuYnVmZmVyLnB1
        c2gob3V0cHV0KTsKICB9Cn0KCmZ1bmN0aW9uIHNob3VsZERpc3BsYXlJZkhl
        bHBlckNvbnRlbnQocmVzdWx0KSB7CiAgdmFyIHRydXRoeSA9IHJlc3VsdCAm
        JiBnZXQocmVzdWx0LCAnaXNUcnV0aHknKTsKICBpZiAodHlwZW9mIHRydXRo
        eSA9PT0gJ2Jvb2xlYW4nKSB7IHJldHVybiB0cnV0aHk7IH0KCiAgaWYgKEVt
        YmVyLmlzQXJyYXkocmVzdWx0KSkgewogICAgcmV0dXJuIGdldChyZXN1bHQs
        ICdsZW5ndGgnKSAhPT0gMDsKICB9IGVsc2UgewogICAgcmV0dXJuICEhcmVz
        dWx0OwogIH0KfQoKLyoqCiAgJ190cmlhZ2VNdXN0YWNoZScgaXMgdXNlZCBp
        bnRlcm5hbGx5IHNlbGVjdCBiZXR3ZWVuIGEgYmluZGluZywgaGVscGVyLCBv
        ciBjb21wb25lbnQgZm9yCiAgdGhlIGdpdmVuIGNvbnRleHQuIFVudGlsIHRo
        aXMgcG9pbnQsIGl0IHdvdWxkIGJlIGhhcmQgdG8gZGV0ZXJtaW5lIGlmIHRo
        ZQogIG11c3RhY2hlIGlzIGEgcHJvcGVydHkgcmVmZXJlbmNlIG9yIGEgcmVn
        dWxhciBoZWxwZXIgcmVmZXJlbmNlLiBUaGlzIHRyaWFnZQogIGhlbHBlciBy
        ZXNvbHZlcyB0aGF0LgoKICBUaGlzIHdvdWxkIG5vdCBiZSB0eXBpY2FsbHkg
        aW52b2tlZCBieSBkaXJlY3RseS4KCiAgQHByaXZhdGUKICBAbWV0aG9kIF90
        cmlhZ2VNdXN0YWNoZQogIEBmb3IgRW1iZXIuSGFuZGxlYmFycy5oZWxwZXJz
        CiAgQHBhcmFtIHtTdHJpbmd9IHByb3BlcnR5IFByb3BlcnR5L2hlbHBlcklE
        IHRvIHRyaWFnZQogIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIGhhc2ggb2Yg
        dGVtcGxhdGUvcmVuZGVyaW5nIG9wdGlvbnMKICBAcmV0dXJuIHtTdHJpbmd9
        IEhUTUwgc3RyaW5nCiovCkVtYmVySGFuZGxlYmFycy5yZWdpc3RlckhlbHBl
        cignX3RyaWFnZU11c3RhY2hlJywgZnVuY3Rpb24ocHJvcGVydHksIG9wdGlv
        bnMpIHsKICBFbWJlci5hc3NlcnQoIllvdSBjYW5ub3QgcGFzcyBtb3JlIHRo
        YW4gb25lIGFyZ3VtZW50IHRvIHRoZSBfdHJpYWdlTXVzdGFjaGUgaGVscGVy
        IiwgYXJndW1lbnRzLmxlbmd0aCA8PSAyKTsKCiAgaWYgKGhlbHBlcnNbcHJv
        cGVydHldKSB7CiAgICByZXR1cm4gaGVscGVyc1twcm9wZXJ0eV0uY2FsbCh0
        aGlzLCBvcHRpb25zKTsKICB9CgogIHZhciBoZWxwZXIgPSBFbWJlci5IYW5k
        bGViYXJzLnJlc29sdmVIZWxwZXIob3B0aW9ucy5kYXRhLnZpZXcuY29udGFp
        bmVyLCBwcm9wZXJ0eSk7CiAgaWYgKGhlbHBlcikgewogICAgcmV0dXJuIGhl
        bHBlci5jYWxsKHRoaXMsIG9wdGlvbnMpOwogIH0KCiAgcmV0dXJuIGhlbHBl
        cnMuYmluZC5jYWxsKHRoaXMsIHByb3BlcnR5LCBvcHRpb25zKTsKfSk7CgpF
        bWJlci5IYW5kbGViYXJzLnJlc29sdmVIZWxwZXIgPSBmdW5jdGlvbihjb250
        YWluZXIsIG5hbWUpIHsKCiAgaWYgKCFjb250YWluZXIgfHwgbmFtZS5pbmRl
        eE9mKCctJykgPT09IC0xKSB7CiAgICByZXR1cm47CiAgfQoKICB2YXIgaGVs
        cGVyID0gY29udGFpbmVyLmxvb2t1cCgnaGVscGVyOicgKyBuYW1lKTsKICBp
        ZiAoIWhlbHBlcikgewogICAgdmFyIGNvbXBvbmVudExvb2t1cCA9IGNvbnRh
        aW5lci5sb29rdXAoJ2NvbXBvbmVudC1sb29rdXA6bWFpbicpOwogICAgRW1i
        ZXIuYXNzZXJ0KCJDb3VsZCBub3QgZmluZCAnY29tcG9uZW50LWxvb2t1cDpt
        YWluJyBvbiB0aGUgcHJvdmlkZWQgY29udGFpbmVyLCB3aGljaCBpcyBuZWNl
        c3NhcnkgZm9yIHBlcmZvcm1pbmcgY29tcG9uZW50IGxvb2t1cHMiLCBjb21w
        b25lbnRMb29rdXApOwoKICAgIHZhciBDb21wb25lbnQgPSBjb21wb25lbnRM
        b29rdXAubG9va3VwRmFjdG9yeShuYW1lLCBjb250YWluZXIpOwogICAgaWYg
        KENvbXBvbmVudCkgewogICAgICBoZWxwZXIgPSBFbWJlckhhbmRsZWJhcnMu
        bWFrZVZpZXdIZWxwZXIoQ29tcG9uZW50KTsKICAgICAgY29udGFpbmVyLnJl
        Z2lzdGVyKCdoZWxwZXI6JyArIG5hbWUsIGhlbHBlcik7CiAgICB9CiAgfQog
        IHJldHVybiBoZWxwZXI7Cn07CgovKioKICBgYmluZGAgY2FuIGJlIHVzZWQg
        dG8gZGlzcGxheSBhIHZhbHVlLCB0aGVuIHVwZGF0ZSB0aGF0IHZhbHVlIGlm
        IGl0CiAgY2hhbmdlcy4gRm9yIGV4YW1wbGUsIGlmIHlvdSB3YW50ZWQgdG8g
        cHJpbnQgdGhlIGB0aXRsZWAgcHJvcGVydHkgb2YKICBgY29udGVudGA6Cgog
        IGBgYGhhbmRsZWJhcnMKICB7e2JpbmQgImNvbnRlbnQudGl0bGUifX0KICBg
        YGAKCiAgVGhpcyB3aWxsIHJldHVybiB0aGUgYHRpdGxlYCBwcm9wZXJ0eSBh
        cyBhIHN0cmluZywgdGhlbiBjcmVhdGUgYSBuZXcgb2JzZXJ2ZXIKICBhdCB0
        aGUgc3BlY2lmaWVkIHBhdGguIElmIGl0IGNoYW5nZXMsIGl0IHdpbGwgdXBk
        YXRlIHRoZSB2YWx1ZSBpbiBET00uIE5vdGUKICB0aGF0IGlmIHlvdSBuZWVk
        IHRvIHN1cHBvcnQgSUU3IGFuZCBJRTggeW91IG11c3QgbW9kaWZ5IHRoZSBt
        b2RlbCBvYmplY3RzCiAgcHJvcGVydGllcyB1c2luZyBgRW1iZXIuZ2V0KClg
        IGFuZCBgRW1iZXIuc2V0KClgIGZvciB0aGlzIHRvIHdvcmsgYXMgaXQKICBy
        ZWxpZXMgb24gRW1iZXIncyBLVk8gc3lzdGVtLiBGb3IgYWxsIG90aGVyIGJy
        b3dzZXJzIHRoaXMgd2lsbCBiZSBoYW5kbGVkIGZvcgogIHlvdSBhdXRvbWF0
        aWNhbGx5LgoKICBAcHJpdmF0ZQogIEBtZXRob2QgYmluZAogIEBmb3IgRW1i
        ZXIuSGFuZGxlYmFycy5oZWxwZXJzCiAgQHBhcmFtIHtTdHJpbmd9IHByb3Bl
        cnR5IFByb3BlcnR5IHRvIGJpbmQKICBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBD
        b250ZXh0IHRvIHByb3ZpZGUgZm9yIHJlbmRlcmluZwogIEByZXR1cm4ge1N0
        cmluZ30gSFRNTCBzdHJpbmcKKi8KRW1iZXJIYW5kbGViYXJzLnJlZ2lzdGVy
        SGVscGVyKCdiaW5kJywgZnVuY3Rpb24gYmluZEhlbHBlcihwcm9wZXJ0eSwg
        b3B0aW9ucykgewogIEVtYmVyLmFzc2VydCgiWW91IGNhbm5vdCBwYXNzIG1v
        cmUgdGhhbiBvbmUgYXJndW1lbnQgdG8gdGhlIGJpbmQgaGVscGVyIiwgYXJn
        dW1lbnRzLmxlbmd0aCA8PSAyKTsKCiAgdmFyIGNvbnRleHQgPSAob3B0aW9u
        cy5jb250ZXh0cyAmJiBvcHRpb25zLmNvbnRleHRzLmxlbmd0aCkgPyBvcHRp
        b25zLmNvbnRleHRzWzBdIDogdGhpczsKCiAgaWYgKCFvcHRpb25zLmZuKSB7
        CiAgICByZXR1cm4gc2ltcGxlQmluZChjb250ZXh0LCBwcm9wZXJ0eSwgb3B0
        aW9ucyk7CiAgfQoKICByZXR1cm4gYmluZC5jYWxsKGNvbnRleHQsIHByb3Bl
        cnR5LCBvcHRpb25zLCBmYWxzZSwgZXhpc3RzKTsKfSk7CgovKioKICBVc2Ug
        dGhlIGBib3VuZElmYCBoZWxwZXIgdG8gY3JlYXRlIGEgY29uZGl0aW9uYWwg
        dGhhdCByZS1ldmFsdWF0ZXMKICB3aGVuZXZlciB0aGUgdHJ1dGhpbmVzcyBv
        ZiB0aGUgYm91bmQgdmFsdWUgY2hhbmdlcy4KCiAgYGBgaGFuZGxlYmFycwog
        IHt7I2JvdW5kSWYgImNvbnRlbnQuc2hvdWxkRGlzcGxheVRpdGxlIn19CiAg
        ICB7e2NvbnRlbnQudGl0bGV9fQogIHt7L2JvdW5kSWZ9fQogIGBgYAoKICBA
        cHJpdmF0ZQogIEBtZXRob2QgYm91bmRJZgogIEBmb3IgRW1iZXIuSGFuZGxl
        YmFycy5oZWxwZXJzCiAgQHBhcmFtIHtTdHJpbmd9IHByb3BlcnR5IFByb3Bl
        cnR5IHRvIGJpbmQKICBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBDb250ZXh0IHRv
        IHByb3ZpZGUgZm9yIHJlbmRlcmluZwogIEByZXR1cm4ge1N0cmluZ30gSFRN
        TCBzdHJpbmcKKi8KRW1iZXJIYW5kbGViYXJzLnJlZ2lzdGVySGVscGVyKCdi
        b3VuZElmJywgZnVuY3Rpb24gYm91bmRJZkhlbHBlcihwcm9wZXJ0eSwgZm4p
        IHsKICB2YXIgY29udGV4dCA9IChmbi5jb250ZXh0cyAmJiBmbi5jb250ZXh0
        cy5sZW5ndGgpID8gZm4uY29udGV4dHNbMF0gOiB0aGlzOwoKICByZXR1cm4g
        YmluZC5jYWxsKGNvbnRleHQsIHByb3BlcnR5LCBmbiwgdHJ1ZSwgc2hvdWxk
        RGlzcGxheUlmSGVscGVyQ29udGVudCwgc2hvdWxkRGlzcGxheUlmSGVscGVy
        Q29udGVudCwgWydpc1RydXRoeScsICdsZW5ndGgnXSk7Cn0pOwoKCi8qKgog
        IEBwcml2YXRlCgogIFVzZSB0aGUgYHVuYm91bmRJZmAgaGVscGVyIHRvIGNy
        ZWF0ZSBhIGNvbmRpdGlvbmFsIHRoYXQgZXZhbHVhdGVzIG9uY2UuCgogIGBg
        YGhhbmRsZWJhcnMKICB7eyN1bmJvdW5kSWYgImNvbnRlbnQuc2hvdWxkRGlz
        cGxheVRpdGxlIn19CiAgICB7e2NvbnRlbnQudGl0bGV9fQogIHt7L3VuYm91
        bmRJZn19CiAgYGBgCgogIEBtZXRob2QgdW5ib3VuZElmCiAgQGZvciBFbWJl
        ci5IYW5kbGViYXJzLmhlbHBlcnMKICBAcGFyYW0ge1N0cmluZ30gcHJvcGVy
        dHkgUHJvcGVydHkgdG8gYmluZAogIEBwYXJhbSB7RnVuY3Rpb259IGZuIENv
        bnRleHQgdG8gcHJvdmlkZSBmb3IgcmVuZGVyaW5nCiAgQHJldHVybiB7U3Ry
        aW5nfSBIVE1MIHN0cmluZwoqLwpFbWJlckhhbmRsZWJhcnMucmVnaXN0ZXJI
        ZWxwZXIoJ3VuYm91bmRJZicsIGZ1bmN0aW9uIHVuYm91bmRJZkhlbHBlcihw
        cm9wZXJ0eSwgZm4pIHsKICB2YXIgY29udGV4dCA9IChmbi5jb250ZXh0cyAm
        JiBmbi5jb250ZXh0cy5sZW5ndGgpID8gZm4uY29udGV4dHNbMF0gOiB0aGlz
        LAogICAgICBkYXRhID0gZm4uZGF0YSwKICAgICAgdGVtcGxhdGUgPSBmbi5m
        biwKICAgICAgaW52ZXJzZSA9IGZuLmludmVyc2UsCiAgICAgIG5vcm1hbGl6
        ZWQsIHByb3BlcnR5VmFsdWUsIHJlc3VsdDsKCiAgbm9ybWFsaXplZCA9IG5v
        cm1hbGl6ZVBhdGgoY29udGV4dCwgcHJvcGVydHksIGRhdGEpOwogIHByb3Bl
        cnR5VmFsdWUgPSBoYW5kbGViYXJzR2V0KGNvbnRleHQsIHByb3BlcnR5LCBm
        bik7CgogIGlmICghc2hvdWxkRGlzcGxheUlmSGVscGVyQ29udGVudChwcm9w
        ZXJ0eVZhbHVlKSkgewogICAgdGVtcGxhdGUgPSBpbnZlcnNlOwogIH0KCiAg
        dGVtcGxhdGUoY29udGV4dCwgeyBkYXRhOiBkYXRhIH0pOwp9KTsKCi8qKgog
        IFVzZSB0aGUgYHt7d2l0aH19YCBoZWxwZXIgd2hlbiB5b3Ugd2FudCB0byBz
        Y29wZSBjb250ZXh0LiBUYWtlIHRoZSBmb2xsb3dpbmcgY29kZSBhcyBhbiBl
        eGFtcGxlOgoKICBgYGBoYW5kbGViYXJzCiAgPGg1Pnt7dXNlci5uYW1lfX08
        L2g1PgoKICA8ZGl2IGNsYXNzPSJyb2xlIj4KICAgIDxoNj57e3VzZXIucm9s
        ZS5sYWJlbH19PC9oNj4KICAgIDxzcGFuIGNsYXNzPSJyb2xlLWlkIj57e3Vz
        ZXIucm9sZS5pZH19PC9zcGFuPgoKICAgIDxwIGNsYXNzPSJyb2xlLWRlc2Mi
        Pnt7dXNlci5yb2xlLmRlc2NyaXB0aW9ufX08L3A+CiAgPC9kaXY+CiAgYGBg
        CgogIGB7e3dpdGh9fWAgY2FuIGJlIG91ciBiZXN0IGZyaWVuZCBpbiB0aGVz
        ZSBjYXNlcywgCiAgaW5zdGVhZCBvZiB3cml0aW5nIGB1c2VyLnJvbGUuKmAg
        b3ZlciBhbmQgb3Zlciwgd2UgdXNlIGB7eyN3aXRoIHVzZXIucm9sZX19YC4K
        ICBOb3cgdGhlIGNvbnRleHQgd2l0aGluIHRoZSBge3sjd2l0aH19IC4uIHt7
        L3dpdGh9fWAgYmxvY2sgaXMgYHVzZXIucm9sZWAgc28geW91IGNhbiBkbyB0
        aGUgZm9sbG93aW5nOgoKICBgYGBoYW5kbGViYXJzCiAgPGg1Pnt7dXNlci5u
        YW1lfX08L2g1PgoKICA8ZGl2IGNsYXNzPSJyb2xlIj4KICAgIHt7I3dpdGgg
        dXNlci5yb2xlfX0KICAgICAgPGg2Pnt7bGFiZWx9fTwvaDY+CiAgICAgIDxz
        cGFuIGNsYXNzPSJyb2xlLWlkIj57e2lkfX08L3NwYW4+CgogICAgICA8cCBj
        bGFzcz0icm9sZS1kZXNjIj57e2Rlc2NyaXB0aW9ufX08L3A+CiAgICB7ey93
        aXRofX0KICA8L2Rpdj4KICBgYGAKCiAgIyMjIGBhc2Agb3BlcmF0b3IKCiAg
        VGhpcyBvcGVyYXRvciBhbGlhc2VzIHRoZSBzY29wZSB0byBhIG5ldyBuYW1l
        LiBJdCdzIGhlbHBmdWwgZm9yIHNlbWFudGljIGNsYXJpdHkgYW5kIHRvIHJl
        dGFpbiAKICBkZWZhdWx0IHNjb3BlIG9yIHRvIHJlZmVyZW5jZSBmcm9tIGFu
        b3RoZXIgYHt7d2l0aH19YCBibG9jay4KCiAgYGBgaGFuZGxlYmFycwogIC8v
        IHBvc3RzIG1pZ2h0IG5vdCBiZQogIHt7I3dpdGggdXNlci5wb3N0cyBhcyBi
        bG9nUG9zdHN9fQogICAgPGRpdiBjbGFzcz0ibm90aWNlIj4KICAgICAgVGhl
        cmUgYXJlIHt7YmxvZ1Bvc3RzLmxlbmd0aH19IGJsb2cgcG9zdHMgd3JpdHRl
        biBieSB7e3VzZXIubmFtZX19LgogICAgPC9kaXY+CgogICAge3sjZWFjaCBw
        b3N0IGluIGJsb2dQb3N0c319CiAgICAgIDxsaT57e3Bvc3QudGl0bGV9fTwv
        bGk+CiAgICB7ey9lYWNofX0KICB7ey93aXRofX0KICBgYGAKCiAgV2l0aG91
        dCB0aGUgYGFzYCBvcGVyYXRvciwgaXQgd291bGQgYmUgaW1wb3NzaWJsZSB0
        byByZWZlcmVuY2UgYHVzZXIubmFtZWAgaW4gdGhlIGV4YW1wbGUgYWJvdmUu
        CgogICMjIyBgY29udHJvbGxlcmAgb3B0aW9uCgogIEFkZGluZyBgY29udHJv
        bGxlcj0nc29tZXRoaW5nJ2AgaW5zdHJ1Y3RzIHRoZSBge3t3aXRofX1gIGhl
        bHBlciB0byBjcmVhdGUgYW5kIHVzZSBhbiBpbnN0YW5jZSBvZgogIHRoZSBz
        cGVjaWZpZWQgY29udHJvbGxlciB3aXRoIHRoZSBuZXcgY29udGV4dCBhcyBp
        dHMgY29udGVudC4KCiAgVGhpcyBpcyB2ZXJ5IHNpbWlsYXIgdG8gdXNpbmcg
        YW4gYGl0ZW1Db250cm9sbGVyYCBvcHRpb24gd2l0aCB0aGUgYHt7ZWFjaH19
        YCBoZWxwZXIuCgogIGBgYGhhbmRsZWJhcnMKICB7eyN3aXRoIHVzZXJzLnBv
        c3RzIGNvbnRyb2xsZXI9J3VzZXJCbG9nUG9zdHMnfX0KICAgIHt7IS0gVGhl
        IGN1cnJlbnQgY29udGV4dCBpcyB3cmFwcGVkIGluIG91ciBjb250cm9sbGVy
        IGluc3RhbmNlIH19CiAge3svd2l0aH19CiAgYGBgCgogIEluIHRoZSBhYm92
        ZSBleGFtcGxlLCB0aGUgdGVtcGxhdGUgcHJvdmlkZWQgdG8gdGhlIGB7e3dp
        dGh9fWAgYmxvY2sgaXMgbm93IHdyYXBwZWQgaW4gdGhlCiAgYHVzZXJCbG9n
        UG9zdGAgY29udHJvbGxlciwgd2hpY2ggcHJvdmlkZXMgYSB2ZXJ5IGVsZWdh
        bnQgd2F5IHRvIGRlY29yYXRlIHRoZSBjb250ZXh0IHdpdGggY3VzdG9tCiAg
        ZnVuY3Rpb25zL3Byb3BlcnRpZXMuCgogIEBtZXRob2Qgd2l0aAogIEBmb3Ig
        RW1iZXIuSGFuZGxlYmFycy5oZWxwZXJzCiAgQHBhcmFtIHtGdW5jdGlvbn0g
        Y29udGV4dAogIEBwYXJhbSB7SGFzaH0gb3B0aW9ucwogIEByZXR1cm4ge1N0
        cmluZ30gSFRNTCBzdHJpbmcKKi8KRW1iZXJIYW5kbGViYXJzLnJlZ2lzdGVy
        SGVscGVyKCd3aXRoJywgZnVuY3Rpb24gd2l0aEhlbHBlcihjb250ZXh0LCBv
        cHRpb25zKSB7CiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDQpIHsKICAg
        IHZhciBrZXl3b3JkTmFtZSwgcGF0aCwgcm9vdFBhdGgsIG5vcm1hbGl6ZWQs
        IGNvbnRleHRQYXRoOwoKICAgIEVtYmVyLmFzc2VydCgiSWYgeW91IHBhc3Mg
        bW9yZSB0aGFuIG9uZSBhcmd1bWVudCB0byB0aGUgd2l0aCBoZWxwZXIsIGl0
        IG11c3QgYmUgaW4gdGhlIGZvcm0gI3dpdGggZm9vIGFzIGJhciIsIGFyZ3Vt
        ZW50c1sxXSA9PT0gImFzIik7CiAgICBvcHRpb25zID0gYXJndW1lbnRzWzNd
        OwogICAga2V5d29yZE5hbWUgPSBhcmd1bWVudHNbMl07CiAgICBwYXRoID0g
        YXJndW1lbnRzWzBdOwoKICAgIEVtYmVyLmFzc2VydCgiWW91IG11c3QgcGFz
        cyBhIGJsb2NrIHRvIHRoZSB3aXRoIGhlbHBlciIsIG9wdGlvbnMuZm4gJiYg
        b3B0aW9ucy5mbiAhPT0gSGFuZGxlYmFycy5WTS5ub29wKTsKCiAgICB2YXIg
        bG9jYWxpemVkT3B0aW9ucyA9IG9fY3JlYXRlKG9wdGlvbnMpOwogICAgbG9j
        YWxpemVkT3B0aW9ucy5kYXRhID0gb19jcmVhdGUob3B0aW9ucy5kYXRhKTsK
        ICAgIGxvY2FsaXplZE9wdGlvbnMuZGF0YS5rZXl3b3JkcyA9IG9fY3JlYXRl
        KG9wdGlvbnMuZGF0YS5rZXl3b3JkcyB8fCB7fSk7CgogICAgaWYgKEVtYmVy
        LmlzR2xvYmFsUGF0aChwYXRoKSkgewogICAgICBjb250ZXh0UGF0aCA9IHBh
        dGg7CiAgICB9IGVsc2UgewogICAgICBub3JtYWxpemVkID0gbm9ybWFsaXpl
        UGF0aCh0aGlzLCBwYXRoLCBvcHRpb25zLmRhdGEpOwogICAgICBwYXRoID0g
        bm9ybWFsaXplZC5wYXRoOwogICAgICByb290UGF0aCA9IG5vcm1hbGl6ZWQu
        cm9vdDsKCiAgICAgIC8vIFRoaXMgaXMgYSB3b3JrYXJvdW5kIGZvciB0aGUg
        ZmFjdCB0aGF0IHlvdSBjYW5ub3QgYmluZCBzZXBhcmF0ZSBvYmplY3RzCiAg
        ICAgIC8vIHRvZ2V0aGVyLiBXaGVuIHdlIGltcGxlbWVudCB0aGF0IGZ1bmN0
        aW9uYWxpdHksIHdlIHNob3VsZCB1c2UgaXQgaGVyZS4KICAgICAgdmFyIGNv
        bnRleHRLZXkgPSBFbWJlci4kLmV4cGFuZG8gKyBFbWJlci5ndWlkRm9yKHJv
        b3RQYXRoKTsKICAgICAgbG9jYWxpemVkT3B0aW9ucy5kYXRhLmtleXdvcmRz
        W2NvbnRleHRLZXldID0gcm9vdFBhdGg7CiAgICAgIC8vIGlmIHRoZSBwYXRo
        IGlzICcnICgidGhpcyIpLCBqdXN0IGJpbmQgZGlyZWN0bHkgdG8gdGhlIGN1
        cnJlbnQgY29udGV4dAogICAgICBjb250ZXh0UGF0aCA9IHBhdGggPyBjb250
        ZXh0S2V5ICsgJy4nICsgcGF0aCA6IGNvbnRleHRLZXk7CiAgICB9CgogICAg
        RW1iZXIuYmluZChsb2NhbGl6ZWRPcHRpb25zLmRhdGEua2V5d29yZHMsIGtl
        eXdvcmROYW1lLCBjb250ZXh0UGF0aCk7CgogICAgcmV0dXJuIGJpbmQuY2Fs
        bCh0aGlzLCBwYXRoLCBsb2NhbGl6ZWRPcHRpb25zLCB0cnVlLCBleGlzdHMp
        OwogIH0gZWxzZSB7CiAgICBFbWJlci5hc3NlcnQoIllvdSBtdXN0IHBhc3Mg
        ZXhhY3RseSBvbmUgYXJndW1lbnQgdG8gdGhlIHdpdGggaGVscGVyIiwgYXJn
        dW1lbnRzLmxlbmd0aCA9PT0gMik7CiAgICBFbWJlci5hc3NlcnQoIllvdSBt
        dXN0IHBhc3MgYSBibG9jayB0byB0aGUgd2l0aCBoZWxwZXIiLCBvcHRpb25z
        LmZuICYmIG9wdGlvbnMuZm4gIT09IEhhbmRsZWJhcnMuVk0ubm9vcCk7CiAg
        ICByZXR1cm4gaGVscGVycy5iaW5kLmNhbGwob3B0aW9ucy5jb250ZXh0c1sw
        XSwgY29udGV4dCwgb3B0aW9ucyk7CiAgfQp9KTsKCgovKioKICBTZWUgW2Jv
        dW5kSWZdKC9hcGkvY2xhc3Nlcy9FbWJlci5IYW5kbGViYXJzLmhlbHBlcnMu
        aHRtbCNtZXRob2RfYm91bmRJZikKICBhbmQgW3VuYm91bmRJZl0oL2FwaS9j
        bGFzc2VzL0VtYmVyLkhhbmRsZWJhcnMuaGVscGVycy5odG1sI21ldGhvZF91
        bmJvdW5kSWYpCgogIEBtZXRob2QgaWYKICBAZm9yIEVtYmVyLkhhbmRsZWJh
        cnMuaGVscGVycwogIEBwYXJhbSB7RnVuY3Rpb259IGNvbnRleHQKICBAcGFy
        YW0ge0hhc2h9IG9wdGlvbnMKICBAcmV0dXJuIHtTdHJpbmd9IEhUTUwgc3Ry
        aW5nCiovCkVtYmVySGFuZGxlYmFycy5yZWdpc3RlckhlbHBlcignaWYnLCBm
        dW5jdGlvbiBpZkhlbHBlcihjb250ZXh0LCBvcHRpb25zKSB7CiAgRW1iZXIu
        YXNzZXJ0KCJZb3UgbXVzdCBwYXNzIGV4YWN0bHkgb25lIGFyZ3VtZW50IHRv
        IHRoZSBpZiBoZWxwZXIiLCBhcmd1bWVudHMubGVuZ3RoID09PSAyKTsKICBF
        bWJlci5hc3NlcnQoIllvdSBtdXN0IHBhc3MgYSBibG9jayB0byB0aGUgaWYg
        aGVscGVyIiwgb3B0aW9ucy5mbiAmJiBvcHRpb25zLmZuICE9PSBIYW5kbGVi
        YXJzLlZNLm5vb3ApOwogIGlmIChvcHRpb25zLmRhdGEuaXNVbmJvdW5kKSB7
        CiAgICByZXR1cm4gaGVscGVycy51bmJvdW5kSWYuY2FsbChvcHRpb25zLmNv
        bnRleHRzWzBdLCBjb250ZXh0LCBvcHRpb25zKTsKICB9IGVsc2UgewogICAg
        cmV0dXJuIGhlbHBlcnMuYm91bmRJZi5jYWxsKG9wdGlvbnMuY29udGV4dHNb
        MF0sIGNvbnRleHQsIG9wdGlvbnMpOwogIH0KfSk7CgovKioKICBAbWV0aG9k
        IHVubGVzcwogIEBmb3IgRW1iZXIuSGFuZGxlYmFycy5oZWxwZXJzCiAgQHBh
        cmFtIHtGdW5jdGlvbn0gY29udGV4dAogIEBwYXJhbSB7SGFzaH0gb3B0aW9u
        cwogIEByZXR1cm4ge1N0cmluZ30gSFRNTCBzdHJpbmcKKi8KRW1iZXJIYW5k
        bGViYXJzLnJlZ2lzdGVySGVscGVyKCd1bmxlc3MnLCBmdW5jdGlvbiB1bmxl
        c3NIZWxwZXIoY29udGV4dCwgb3B0aW9ucykgewogIEVtYmVyLmFzc2VydCgi
        WW91IG11c3QgcGFzcyBleGFjdGx5IG9uZSBhcmd1bWVudCB0byB0aGUgdW5s
        ZXNzIGhlbHBlciIsIGFyZ3VtZW50cy5sZW5ndGggPT09IDIpOwogIEVtYmVy
        LmFzc2VydCgiWW91IG11c3QgcGFzcyBhIGJsb2NrIHRvIHRoZSB1bmxlc3Mg
        aGVscGVyIiwgb3B0aW9ucy5mbiAmJiBvcHRpb25zLmZuICE9PSBIYW5kbGVi
        YXJzLlZNLm5vb3ApOwoKICB2YXIgZm4gPSBvcHRpb25zLmZuLCBpbnZlcnNl
        ID0gb3B0aW9ucy5pbnZlcnNlOwoKICBvcHRpb25zLmZuID0gaW52ZXJzZTsK
        ICBvcHRpb25zLmludmVyc2UgPSBmbjsKCiAgaWYgKG9wdGlvbnMuZGF0YS5p
        c1VuYm91bmQpIHsKICAgIHJldHVybiBoZWxwZXJzLnVuYm91bmRJZi5jYWxs
        KG9wdGlvbnMuY29udGV4dHNbMF0sIGNvbnRleHQsIG9wdGlvbnMpOwogIH0g
        ZWxzZSB7CiAgICByZXR1cm4gaGVscGVycy5ib3VuZElmLmNhbGwob3B0aW9u
        cy5jb250ZXh0c1swXSwgY29udGV4dCwgb3B0aW9ucyk7CiAgfQp9KTsKCi8q
        KgogIGBiaW5kLWF0dHJgIGFsbG93cyB5b3UgdG8gY3JlYXRlIGEgYmluZGlu
        ZyBiZXR3ZWVuIERPTSBlbGVtZW50IGF0dHJpYnV0ZXMgYW5kCiAgRW1iZXIg
        b2JqZWN0cy4gRm9yIGV4YW1wbGU6CgogIGBgYGhhbmRsZWJhcnMKICA8aW1n
        IHt7YmluZC1hdHRyIHNyYz0iaW1hZ2VVcmwiIGFsdD0iaW1hZ2VUaXRsZSJ9
        fT4KICBgYGAKCiAgVGhlIGFib3ZlIGhhbmRsZWJhcnMgdGVtcGxhdGUgd2ls
        bCBmaWxsIHRoZSBgPGltZz5gJ3MgYHNyY2AgYXR0cmlidXRlIHdpbGwKICB0
        aGUgdmFsdWUgb2YgdGhlIHByb3BlcnR5IHJlZmVyZW5jZWQgd2l0aCBgImlt
        YWdlVXJsImAgYW5kIGl0cyBgYWx0YAogIGF0dHJpYnV0ZSB3aXRoIHRoZSB2
        YWx1ZSBvZiB0aGUgcHJvcGVydHkgcmVmZXJlbmNlZCB3aXRoIGAiaW1hZ2VU
        aXRsZSJgLgoKICBJZiB0aGUgcmVuZGVyaW5nIGNvbnRleHQgb2YgdGhpcyB0
        ZW1wbGF0ZSBpcyB0aGUgZm9sbG93aW5nIG9iamVjdDoKCiAgYGBgamF2YXNj
        cmlwdAogIHsKICAgIGltYWdlVXJsOiAnaHR0cDovL2xvbGNhdHMuaW5mby9o
        YXotYS1mdW5ueScsCiAgICBpbWFnZVRpdGxlOiAnQSBodW1vcm91cyBpbWFn
        ZSBvZiBhIGNhdCcKICB9CiAgYGBgCgogIFRoZSByZXN1bHRpbmcgSFRNTCBv
        dXRwdXQgd2lsbCBiZToKCiAgYGBgaHRtbAogIDxpbWcgc3JjPSJodHRwOi8v
        bG9sY2F0cy5pbmZvL2hhei1hLWZ1bm55IiBhbHQ9IkEgaHVtb3JvdXMgaW1h
        Z2Ugb2YgYSBjYXQiPgogIGBgYAoKICBgYmluZC1hdHRyYCBjYW5ub3QgcmVk
        ZWNsYXJlIGV4aXN0aW5nIERPTSBlbGVtZW50IGF0dHJpYnV0ZXMuIFRoZSB1
        c2Ugb2YgYHNyY2AKICBpbiB0aGUgZm9sbG93aW5nIGBiaW5kLWF0dHJgIGV4
        YW1wbGUgd2lsbCBiZSBpZ25vcmVkIGFuZCB0aGUgaGFyZCBjb2RlZCB2YWx1
        ZQogIG9mIGBzcmM9Ii9mYWlsd2hhbGUuZ2lmImAgd2lsbCB0YWtlIHByZWNl
        ZGVuY2U6CgogIGBgYGhhbmRsZWJhcnMKICA8aW1nIHNyYz0iL2ZhaWx3aGFs
        ZS5naWYiIHt7YmluZC1hdHRyIHNyYz0iaW1hZ2VVcmwiIGFsdD0iaW1hZ2VU
        aXRsZSJ9fT4KICBgYGAKCiAgIyMjIGBiaW5kLWF0dHJgIGFuZCB0aGUgYGNs
        YXNzYCBhdHRyaWJ1dGUKCiAgYGJpbmQtYXR0cmAgc3VwcG9ydHMgYSBzcGVj
        aWFsIHN5bnRheCBmb3IgaGFuZGxpbmcgYSBudW1iZXIgb2YgY2FzZXMgdW5p
        cXVlCiAgdG8gdGhlIGBjbGFzc2AgRE9NIGVsZW1lbnQgYXR0cmlidXRlLiBU
        aGUgYGNsYXNzYCBhdHRyaWJ1dGUgY29tYmluZXMKICBtdWx0aXBsZSBkaXNj
        cmV0ZSB2YWx1ZXMgaW50byBhIHNpbmdsZSBhdHRyaWJ1dGUgYXMgYSBzcGFj
        ZS1kZWxpbWl0ZWQKICBsaXN0IG9mIHN0cmluZ3MuIEVhY2ggc3RyaW5nIGNh
        biBiZToKCiAgKiBhIHN0cmluZyByZXR1cm4gdmFsdWUgb2YgYW4gb2JqZWN0
        J3MgcHJvcGVydHkuCiAgKiBhIGJvb2xlYW4gcmV0dXJuIHZhbHVlIG9mIGFu
        IG9iamVjdCdzIHByb3BlcnR5CiAgKiBhIGhhcmQtY29kZWQgdmFsdWUKCiAg
        QSBzdHJpbmcgcmV0dXJuIHZhbHVlIHdvcmtzIGlkZW50aWNhbGx5IHRvIG90
        aGVyIHVzZXMgb2YgYGJpbmQtYXR0cmAuIFRoZQogIHJldHVybiB2YWx1ZSBv
        ZiB0aGUgcHJvcGVydHkgd2lsbCBiZWNvbWUgdGhlIHZhbHVlIG9mIHRoZSBh
        dHRyaWJ1dGUuIEZvcgogIGV4YW1wbGUsIHRoZSBmb2xsb3dpbmcgdmlldyBh
        bmQgdGVtcGxhdGU6CgogIGBgYGphdmFzY3JpcHQKICAgIEFWaWV3ID0gRW1i
        ZXIuVmlldy5leHRlbmQoewogICAgICBzb21lUHJvcGVydHk6IGZ1bmN0aW9u
        KCkgewogICAgICAgIHJldHVybiAiYVZhbHVlIjsKICAgICAgfS5wcm9wZXJ0
        eSgpCiAgICB9KQogIGBgYAoKICBgYGBoYW5kbGViYXJzCiAgPGltZyB7e2Jp
        bmQtYXR0ciBjbGFzcz0idmlldy5zb21lUHJvcGVydHl9fT4KICBgYGAKCiAg
        UmVzdWx0IGluIHRoZSBmb2xsb3dpbmcgcmVuZGVyZWQgb3V0cHV0OgoKICBg
        YGBodG1sCiAgPGltZyBjbGFzcz0iYVZhbHVlIj4KICBgYGAKCiAgQSBib29s
        ZWFuIHJldHVybiB2YWx1ZSB3aWxsIGluc2VydCBhIHNwZWNpZmllZCBjbGFz
        cyBuYW1lIGlmIHRoZSBwcm9wZXJ0eQogIHJldHVybnMgYHRydWVgIGFuZCBy
        ZW1vdmUgdGhlIGNsYXNzIG5hbWUgaWYgdGhlIHByb3BlcnR5IHJldHVybnMg
        YGZhbHNlYC4KCiAgQSBjbGFzcyBuYW1lIGlzIHByb3ZpZGVkIHZpYSB0aGUg
        c3ludGF4CiAgYHNvbWVQcm9wZXJ0eU5hbWU6Y2xhc3MtbmFtZS1pZi10cnVl
        YC4KCiAgYGBgamF2YXNjcmlwdAogIEFWaWV3ID0gRW1iZXIuVmlldy5leHRl
        bmQoewogICAgc29tZUJvb2w6IHRydWUKICB9KQogIGBgYAoKICBgYGBoYW5k
        bGViYXJzCiAgPGltZyB7e2JpbmQtYXR0ciBjbGFzcz0idmlldy5zb21lQm9v
        bDpjbGFzcy1uYW1lLWlmLXRydWUifX0+CiAgYGBgCgogIFJlc3VsdCBpbiB0
        aGUgZm9sbG93aW5nIHJlbmRlcmVkIG91dHB1dDoKCiAgYGBgaHRtbAogIDxp
        bWcgY2xhc3M9ImNsYXNzLW5hbWUtaWYtdHJ1ZSI+CiAgYGBgCgogIEFuIGFk
        ZGl0aW9uYWwgc2VjdGlvbiBvZiB0aGUgYmluZGluZyBjYW4gYmUgcHJvdmlk
        ZWQgaWYgeW91IHdhbnQgdG8KICByZXBsYWNlIHRoZSBleGlzdGluZyBjbGFz
        cyBpbnN0ZWFkIG9mIHJlbW92aW5nIGl0IHdoZW4gdGhlIGJvb2xlYW4KICB2
        YWx1ZSBjaGFuZ2VzOgoKICBgYGBoYW5kbGViYXJzCiAgPGltZyB7e2JpbmQt
        YXR0ciBjbGFzcz0idmlldy5zb21lQm9vbDpjbGFzcy1uYW1lLWlmLXRydWU6
        Y2xhc3MtbmFtZS1pZi1mYWxzZSJ9fT4KICBgYGAKCiAgQSBoYXJkLWNvZGVk
        IHZhbHVlIGNhbiBiZSB1c2VkIGJ5IHByZXBlbmRpbmcgYDpgIHRvIHRoZSBk
        ZXNpcmVkCiAgY2xhc3MgbmFtZTogYDpjbGFzcy1uYW1lLXRvLWFsd2F5cy1h
        cHBseWAuCgogIGBgYGhhbmRsZWJhcnMKICA8aW1nIHt7YmluZC1hdHRyIGNs
        YXNzPSI6Y2xhc3MtbmFtZS10by1hbHdheXMtYXBwbHkifX0+CiAgYGBgCgog
        IFJlc3VsdHMgaW4gdGhlIGZvbGxvd2luZyByZW5kZXJlZCBvdXRwdXQ6Cgog
        IGBgYGh0bWwKICA8aW1nIGNsYXNzPSJjbGFzcy1uYW1lLXRvLWFsd2F5cy1h
        cHBseSI+CiAgYGBgCgogIEFsbCB0aHJlZSBzdHJhdGVnaWVzIC0gc3RyaW5n
        IHJldHVybiB2YWx1ZSwgYm9vbGVhbiByZXR1cm4gdmFsdWUsIGFuZAogIGhh
        cmQtY29kZWQgdmFsdWUg4oCTIGNhbiBiZSBjb21iaW5lZCBpbiBhIHNpbmds
        ZSBkZWNsYXJhdGlvbjoKCiAgYGBgaGFuZGxlYmFycwogIDxpbWcge3tiaW5k
        LWF0dHIgY2xhc3M9IjpjbGFzcy1uYW1lLXRvLWFsd2F5cy1hcHBseSB2aWV3
        LnNvbWVCb29sOmNsYXNzLW5hbWUtaWYtdHJ1ZSB2aWV3LnNvbWVQcm9wZXJ0
        eSJ9fT4KICBgYGAKCiAgQG1ldGhvZCBiaW5kLWF0dHIKICBAZm9yIEVtYmVy
        LkhhbmRsZWJhcnMuaGVscGVycwogIEBwYXJhbSB7SGFzaH0gb3B0aW9ucwog
        IEByZXR1cm4ge1N0cmluZ30gSFRNTCBzdHJpbmcKKi8KRW1iZXJIYW5kbGVi
        YXJzLnJlZ2lzdGVySGVscGVyKCdiaW5kLWF0dHInLCBmdW5jdGlvbiBiaW5k
        QXR0ckhlbHBlcihvcHRpb25zKSB7CgogIHZhciBhdHRycyA9IG9wdGlvbnMu
        aGFzaDsKCiAgRW1iZXIuYXNzZXJ0KCJZb3UgbXVzdCBzcGVjaWZ5IGF0IGxl
        YXN0IG9uZSBoYXNoIGFyZ3VtZW50IHRvIGJpbmQtYXR0ciIsICEhRW1iZXIu
        a2V5cyhhdHRycykubGVuZ3RoKTsKCiAgdmFyIHZpZXcgPSBvcHRpb25zLmRh
        dGEudmlldzsKICB2YXIgcmV0ID0gW107CiAgdmFyIGN0eCA9IHRoaXM7Cgog
        IC8vIEdlbmVyYXRlIGEgdW5pcXVlIGlkIGZvciB0aGlzIGVsZW1lbnQuIFRo
        aXMgd2lsbCBiZSBhZGRlZCBhcyBhCiAgLy8gZGF0YSBhdHRyaWJ1dGUgdG8g
        dGhlIGVsZW1lbnQgc28gaXQgY2FuIGJlIGxvb2tlZCB1cCB3aGVuCiAgLy8g
        dGhlIGJvdW5kIHByb3BlcnR5IGNoYW5nZXMuCiAgdmFyIGRhdGFJZCA9ICsr
        RW1iZXIudXVpZDsKCiAgLy8gSGFuZGxlIGNsYXNzZXMgZGlmZmVyZW50bHks
        IGFzIHdlIGNhbiBiaW5kIG11bHRpcGxlIGNsYXNzZXMKICB2YXIgY2xhc3NC
        aW5kaW5ncyA9IGF0dHJzWydjbGFzcyddOwogIGlmIChjbGFzc0JpbmRpbmdz
        ICE9IG51bGwpIHsKICAgIHZhciBjbGFzc1Jlc3VsdHMgPSBFbWJlckhhbmRs
        ZWJhcnMuYmluZENsYXNzZXModGhpcywgY2xhc3NCaW5kaW5ncywgdmlldywg
        ZGF0YUlkLCBvcHRpb25zKTsKCiAgICByZXQucHVzaCgnY2xhc3M9IicgKyBI
        YW5kbGViYXJzLlV0aWxzLmVzY2FwZUV4cHJlc3Npb24oY2xhc3NSZXN1bHRz
        LmpvaW4oJyAnKSkgKyAnIicpOwogICAgZGVsZXRlIGF0dHJzWydjbGFzcydd
        OwogIH0KCiAgdmFyIGF0dHJLZXlzID0gRW1iZXIua2V5cyhhdHRycyk7Cgog
        IC8vIEZvciBlYWNoIGF0dHJpYnV0ZSBwYXNzZWQsIGNyZWF0ZSBhbiBvYnNl
        cnZlciBhbmQgZW1pdCB0aGUKICAvLyBjdXJyZW50IHZhbHVlIG9mIHRoZSBw
        cm9wZXJ0eSBhcyBhbiBhdHRyaWJ1dGUuCiAgZm9yRWFjaC5jYWxsKGF0dHJL
        ZXlzLCBmdW5jdGlvbihhdHRyKSB7CiAgICB2YXIgcGF0aCA9IGF0dHJzW2F0
        dHJdLAogICAgICAgIG5vcm1hbGl6ZWQ7CgogICAgRW1iZXIuYXNzZXJ0KGZt
        dCgiWW91IG11c3QgcHJvdmlkZSBhbiBleHByZXNzaW9uIGFzIHRoZSB2YWx1
        ZSBvZiBib3VuZCBhdHRyaWJ1dGUuIFlvdSBzcGVjaWZpZWQ6ICVAPSVAIiwg
        W2F0dHIsIHBhdGhdKSwgdHlwZW9mIHBhdGggPT09ICdzdHJpbmcnKTsKCiAg
        ICBub3JtYWxpemVkID0gbm9ybWFsaXplUGF0aChjdHgsIHBhdGgsIG9wdGlv
        bnMuZGF0YSk7CgogICAgdmFyIHZhbHVlID0gKHBhdGggPT09ICd0aGlzJykg
        PyBub3JtYWxpemVkLnJvb3QgOiBoYW5kbGViYXJzR2V0KGN0eCwgcGF0aCwg
        b3B0aW9ucyksCiAgICAgICAgdHlwZSA9IEVtYmVyLnR5cGVPZih2YWx1ZSk7
        CgogICAgRW1iZXIuYXNzZXJ0KGZtdCgiQXR0cmlidXRlcyBtdXN0IGJlIG51
        bWJlcnMsIHN0cmluZ3Mgb3IgYm9vbGVhbnMsIG5vdCAlQCIsIFt2YWx1ZV0p
        LCB2YWx1ZSA9PT0gbnVsbCB8fCB2YWx1ZSA9PT0gdW5kZWZpbmVkIHx8IHR5
        cGUgPT09ICdudW1iZXInIHx8IHR5cGUgPT09ICdzdHJpbmcnIHx8IHR5cGUg
        PT09ICdib29sZWFuJyk7CgogICAgdmFyIG9ic2VydmVyLCBpbnZva2VyOwoK
        ICAgIG9ic2VydmVyID0gZnVuY3Rpb24gb2JzZXJ2ZXIoKSB7CiAgICAgIHZh
        ciByZXN1bHQgPSBoYW5kbGViYXJzR2V0KGN0eCwgcGF0aCwgb3B0aW9ucyk7
        CgogICAgICBFbWJlci5hc3NlcnQoZm10KCJBdHRyaWJ1dGVzIG11c3QgYmUg
        bnVtYmVycywgc3RyaW5ncyBvciBib29sZWFucywgbm90ICVAIiwgW3Jlc3Vs
        dF0pLAogICAgICAgICAgICAgICAgICAgcmVzdWx0ID09PSBudWxsIHx8IHJl
        c3VsdCA9PT0gdW5kZWZpbmVkIHx8IHR5cGVvZiByZXN1bHQgPT09ICdudW1i
        ZXInIHx8CiAgICAgICAgICAgICAgICAgICAgIHR5cGVvZiByZXN1bHQgPT09
        ICdzdHJpbmcnIHx8IHR5cGVvZiByZXN1bHQgPT09ICdib29sZWFuJyk7Cgog
        ICAgICB2YXIgZWxlbSA9IHZpZXcuJCgiW2RhdGEtYmluZGF0dHItIiArIGRh
        dGFJZCArICI9JyIgKyBkYXRhSWQgKyAiJ10iKTsKCiAgICAgIC8vIElmIHdl
        IGFyZW4ndCBhYmxlIHRvIGZpbmQgdGhlIGVsZW1lbnQsIGl0IG1lYW5zIHRo
        ZSBlbGVtZW50CiAgICAgIC8vIHRvIHdoaWNoIHdlIHdlcmUgYm91bmQgaGFz
        IGJlZW4gcmVtb3ZlZCBmcm9tIHRoZSB2aWV3LgogICAgICAvLyBJbiB0aGF0
        IGNhc2UsIHdlIGNhbiBhc3N1bWUgdGhlIHRlbXBsYXRlIGhhcyBiZWVuIHJl
        LXJlbmRlcmVkCiAgICAgIC8vIGFuZCB3ZSBuZWVkIHRvIGNsZWFuIHVwIHRo
        ZSBvYnNlcnZlci4KICAgICAgaWYgKCFlbGVtIHx8IGVsZW0ubGVuZ3RoID09
        PSAwKSB7CiAgICAgICAgRW1iZXIucmVtb3ZlT2JzZXJ2ZXIobm9ybWFsaXpl
        ZC5yb290LCBub3JtYWxpemVkLnBhdGgsIGludm9rZXIpOwogICAgICAgIHJl
        dHVybjsKICAgICAgfQoKICAgICAgRW1iZXIuVmlldy5hcHBseUF0dHJpYnV0
        ZUJpbmRpbmdzKGVsZW0sIGF0dHIsIHJlc3VsdCk7CiAgICB9OwoKICAgIC8v
        IEFkZCBhbiBvYnNlcnZlciB0byB0aGUgdmlldyBmb3Igd2hlbiB0aGUgcHJv
        cGVydHkgY2hhbmdlcy4KICAgIC8vIFdoZW4gdGhlIG9ic2VydmVyIGZpcmVz
        LCBmaW5kIHRoZSBlbGVtZW50IHVzaW5nIHRoZQogICAgLy8gdW5pcXVlIGRh
        dGEgaWQgYW5kIHVwZGF0ZSB0aGUgYXR0cmlidXRlIHRvIHRoZSBuZXcgdmFs
        dWUuCiAgICAvLyBOb3RlOiBkb24ndCBhZGQgb2JzZXJ2ZXIgd2hlbiBwYXRo
        IGlzICd0aGlzJyBvciBwYXRoCiAgICAvLyBpcyB3aG9sZSBrZXl3b3JkIGUu
        Zy4ge3sjZWFjaCB4IGluIGxpc3R9fSAuLi4ge3tiaW5kLWF0dHIgYXR0cj0i
        eCJ9fQogICAgaWYgKHBhdGggIT09ICd0aGlzJyAmJiAhKG5vcm1hbGl6ZWQu
        aXNLZXl3b3JkICYmIG5vcm1hbGl6ZWQucGF0aCA9PT0gJycgKSkgewogICAg
        ICB2aWV3LnJlZ2lzdGVyT2JzZXJ2ZXIobm9ybWFsaXplZC5yb290LCBub3Jt
        YWxpemVkLnBhdGgsIG9ic2VydmVyKTsKICAgIH0KCiAgICAvLyBpZiB0aGlz
        IGNoYW5nZXMsIGFsc28gY2hhbmdlIHRoZSBsb2dpYyBpbiBlbWJlci12aWV3
        cy9saWIvdmlld3Mvdmlldy5qcwogICAgaWYgKCh0eXBlID09PSAnc3RyaW5n
        JyB8fCAodHlwZSA9PT0gJ251bWJlcicgJiYgIWlzTmFOKHZhbHVlKSkpKSB7
        CiAgICAgIHJldC5wdXNoKGF0dHIgKyAnPSInICsgSGFuZGxlYmFycy5VdGls
        cy5lc2NhcGVFeHByZXNzaW9uKHZhbHVlKSArICciJyk7CiAgICB9IGVsc2Ug
        aWYgKHZhbHVlICYmIHR5cGUgPT09ICdib29sZWFuJykgewogICAgICAvLyBU
        aGUgZGV2ZWxvcGVyIGNvbnRyb2xzIHRoZSBhdHRyIG5hbWUsIHNvIGl0IHNo
        b3VsZCBhbHdheXMgYmUgc2FmZQogICAgICByZXQucHVzaChhdHRyICsgJz0i
        JyArIGF0dHIgKyAnIicpOwogICAgfQogIH0sIHRoaXMpOwoKICAvLyBBZGQg
        dGhlIHVuaXF1ZSBpZGVudGlmaWVyCiAgLy8gTk9URTogV2UgdXNlIGFsbCBs
        b3dlci1jYXNlIHNpbmNlIEZpcmVmb3ggaGFzIHByb2JsZW1zIHdpdGggbWl4
        ZWQgY2FzZSBpbiBTVkcKICByZXQucHVzaCgnZGF0YS1iaW5kYXR0ci0nICsg
        ZGF0YUlkICsgJz0iJyArIGRhdGFJZCArICciJyk7CiAgcmV0dXJuIG5ldyBF
        bWJlckhhbmRsZWJhcnMuU2FmZVN0cmluZyhyZXQuam9pbignICcpKTsKfSk7
        CgovKioKICBTZWUgYGJpbmQtYXR0cmAKCiAgQG1ldGhvZCBiaW5kQXR0cgog
        IEBmb3IgRW1iZXIuSGFuZGxlYmFycy5oZWxwZXJzCiAgQGRlcHJlY2F0ZWQK
        ICBAcGFyYW0ge0Z1bmN0aW9ufSBjb250ZXh0CiAgQHBhcmFtIHtIYXNofSBv
        cHRpb25zCiAgQHJldHVybiB7U3RyaW5nfSBIVE1MIHN0cmluZwoqLwpFbWJl
        ckhhbmRsZWJhcnMucmVnaXN0ZXJIZWxwZXIoJ2JpbmRBdHRyJywgZnVuY3Rp
        b24gYmluZEF0dHJIZWxwZXIoKSB7CiAgRW1iZXIud2FybigiVGhlICdiaW5k
        QXR0cicgdmlldyBoZWxwZXIgaXMgZGVwcmVjYXRlZCBpbiBmYXZvciBvZiAn
        YmluZC1hdHRyJyIpOwogIHJldHVybiBFbWJlckhhbmRsZWJhcnMuaGVscGVy
        c1snYmluZC1hdHRyJ10uYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfSk7Cgov
        KioKICBIZWxwZXIgdGhhdCwgZ2l2ZW4gYSBzcGFjZS1zZXBhcmF0ZWQgc3Ry
        aW5nIG9mIHByb3BlcnR5IHBhdGhzIGFuZCBhIGNvbnRleHQsCiAgcmV0dXJu
        cyBhbiBhcnJheSBvZiBjbGFzcyBuYW1lcy4gQ2FsbGluZyB0aGlzIG1ldGhv
        ZCBhbHNvIGhhcyB0aGUgc2lkZQogIGVmZmVjdCBvZiBzZXR0aW5nIHVwIG9i
        c2VydmVycyBhdCB0aG9zZSBwcm9wZXJ0eSBwYXRocywgc3VjaCB0aGF0IGlm
        IHRoZXkKICBjaGFuZ2UsIHRoZSBjb3JyZWN0IGNsYXNzIG5hbWUgd2lsbCBi
        ZSByZWFwcGxpZWQgdG8gdGhlIERPTSBlbGVtZW50LgoKICBGb3IgZXhhbXBs
        ZSwgaWYgeW91IHBhc3MgdGhlIHN0cmluZyAiZm9vQmFyIiwgaXQgd2lsbCBm
        aXJzdCBsb29rIHVwIHRoZQogICJmb29CYXIiIHZhbHVlIG9mIHRoZSBjb250
        ZXh0LiBJZiB0aGF0IHZhbHVlIGlzIHRydWUsIGl0IHdpbGwgYWRkIHRoZQog
        ICJmb28tYmFyIiBjbGFzcyB0byB0aGUgY3VycmVudCBlbGVtZW50IChpLmUu
        LCB0aGUgZGFzaGVyaXplZCBmb3JtIG9mCiAgImZvb0JhciIpLiBJZiB0aGUg
        dmFsdWUgaXMgYSBzdHJpbmcsIGl0IHdpbGwgYWRkIHRoYXQgc3RyaW5nIGFz
        IHRoZSBjbGFzcy4KICBPdGhlcndpc2UsIGl0IHdpbGwgbm90IGFkZCBhbnkg
        bmV3IGNsYXNzIG5hbWUuCgogIEBwcml2YXRlCiAgQG1ldGhvZCBiaW5kQ2xh
        c3NlcwogIEBmb3IgRW1iZXIuSGFuZGxlYmFycwogIEBwYXJhbSB7RW1iZXIu
        T2JqZWN0fSBjb250ZXh0IFRoZSBjb250ZXh0IGZyb20gd2hpY2ggdG8gbG9v
        a3VwIHByb3BlcnRpZXMKICBAcGFyYW0ge1N0cmluZ30gY2xhc3NCaW5kaW5n
        cyBBIHN0cmluZywgc3BhY2Utc2VwYXJhdGVkLCBvZiBjbGFzcyBiaW5kaW5n
        cwogICAgdG8gdXNlCiAgQHBhcmFtIHtFbWJlci5WaWV3fSB2aWV3IFRoZSB2
        aWV3IGluIHdoaWNoIG9ic2VydmVycyBzaG91bGQgbG9vayBmb3IgdGhlCiAg
        ICBlbGVtZW50IHRvIHVwZGF0ZQogIEBwYXJhbSB7U3J0aW5nfSBiaW5kQXR0
        cklkIE9wdGlvbmFsIGJpbmRBdHRyIGlkIHVzZWQgdG8gbG9va3VwIGVsZW1l
        bnRzCiAgQHJldHVybiB7QXJyYXl9IEFuIGFycmF5IG9mIGNsYXNzIG5hbWVz
        IHRvIGFkZAoqLwpFbWJlckhhbmRsZWJhcnMuYmluZENsYXNzZXMgPSBmdW5j
        dGlvbihjb250ZXh0LCBjbGFzc0JpbmRpbmdzLCB2aWV3LCBiaW5kQXR0cklk
        LCBvcHRpb25zKSB7CiAgdmFyIHJldCA9IFtdLCBuZXdDbGFzcywgdmFsdWUs
        IGVsZW07CgogIC8vIEhlbHBlciBtZXRob2QgdG8gcmV0cmlldmUgdGhlIHBy
        b3BlcnR5IGZyb20gdGhlIGNvbnRleHQgYW5kCiAgLy8gZGV0ZXJtaW5lIHdo
        aWNoIGNsYXNzIHN0cmluZyB0byByZXR1cm4sIGJhc2VkIG9uIHdoZXRoZXIg
        aXQgaXMKICAvLyBhIEJvb2xlYW4gb3Igbm90LgogIHZhciBjbGFzc1N0cmlu
        Z0ZvclBhdGggPSBmdW5jdGlvbihyb290LCBwYXJzZWRQYXRoLCBvcHRpb25z
        KSB7CiAgICB2YXIgdmFsLAogICAgICAgIHBhdGggPSBwYXJzZWRQYXRoLnBh
        dGg7CgogICAgaWYgKHBhdGggPT09ICd0aGlzJykgewogICAgICB2YWwgPSBy
        b290OwogICAgfSBlbHNlIGlmIChwYXRoID09PSAnJykgewogICAgICB2YWwg
        PSB0cnVlOwogICAgfSBlbHNlIHsKICAgICAgdmFsID0gaGFuZGxlYmFyc0dl
        dChyb290LCBwYXRoLCBvcHRpb25zKTsKICAgIH0KCiAgICByZXR1cm4gRW1i
        ZXIuVmlldy5fY2xhc3NTdHJpbmdGb3JWYWx1ZShwYXRoLCB2YWwsIHBhcnNl
        ZFBhdGguY2xhc3NOYW1lLCBwYXJzZWRQYXRoLmZhbHN5Q2xhc3NOYW1lKTsK
        ICB9OwoKICAvLyBGb3IgZWFjaCBwcm9wZXJ0eSBwYXNzZWQsIGxvb3AgdGhy
        b3VnaCBhbmQgc2V0dXAKICAvLyBhbiBvYnNlcnZlci4KICBmb3JFYWNoLmNh
        bGwoY2xhc3NCaW5kaW5ncy5zcGxpdCgnICcpLCBmdW5jdGlvbihiaW5kaW5n
        KSB7CgogICAgLy8gVmFyaWFibGUgaW4gd2hpY2ggdGhlIG9sZCBjbGFzcyB2
        YWx1ZSBpcyBzYXZlZC4gVGhlIG9ic2VydmVyIGZ1bmN0aW9uCiAgICAvLyBj
        bG9zZXMgb3ZlciB0aGlzIHZhcmlhYmxlLCBzbyBpdCBrbm93cyB3aGljaCBz
        dHJpbmcgdG8gcmVtb3ZlIHdoZW4KICAgIC8vIHRoZSBwcm9wZXJ0eSBjaGFu
        Z2VzLgogICAgdmFyIG9sZENsYXNzOwoKICAgIHZhciBvYnNlcnZlciwgaW52
        b2tlcjsKCiAgICB2YXIgcGFyc2VkUGF0aCA9IEVtYmVyLlZpZXcuX3BhcnNl
        UHJvcGVydHlQYXRoKGJpbmRpbmcpLAogICAgICAgIHBhdGggPSBwYXJzZWRQ
        YXRoLnBhdGgsCiAgICAgICAgcGF0aFJvb3QgPSBjb250ZXh0LAogICAgICAg
        IG5vcm1hbGl6ZWQ7CgogICAgaWYgKHBhdGggIT09ICcnICYmIHBhdGggIT09
        ICd0aGlzJykgewogICAgICBub3JtYWxpemVkID0gbm9ybWFsaXplUGF0aChj
        b250ZXh0LCBwYXRoLCBvcHRpb25zLmRhdGEpOwoKICAgICAgcGF0aFJvb3Qg
        PSBub3JtYWxpemVkLnJvb3Q7CiAgICAgIHBhdGggPSBub3JtYWxpemVkLnBh
        dGg7CiAgICB9CgogICAgLy8gU2V0IHVwIGFuIG9ic2VydmVyIG9uIHRoZSBj
        b250ZXh0LiBJZiB0aGUgcHJvcGVydHkgY2hhbmdlcywgdG9nZ2xlIHRoZQog
        ICAgLy8gY2xhc3MgbmFtZS4KICAgIG9ic2VydmVyID0gZnVuY3Rpb24oKSB7
        CiAgICAgIC8vIEdldCB0aGUgY3VycmVudCB2YWx1ZSBvZiB0aGUgcHJvcGVy
        dHkKICAgICAgbmV3Q2xhc3MgPSBjbGFzc1N0cmluZ0ZvclBhdGgoY29udGV4
        dCwgcGFyc2VkUGF0aCwgb3B0aW9ucyk7CiAgICAgIGVsZW0gPSBiaW5kQXR0
        cklkID8gdmlldy4kKCJbZGF0YS1iaW5kYXR0ci0iICsgYmluZEF0dHJJZCAr
        ICI9JyIgKyBiaW5kQXR0cklkICsgIiddIikgOiB2aWV3LiQoKTsKCiAgICAg
        IC8vIElmIHdlIGNhbid0IGZpbmQgdGhlIGVsZW1lbnQgYW55bW9yZSwgYSBw
        YXJlbnQgdGVtcGxhdGUgaGFzIGJlZW4KICAgICAgLy8gcmUtcmVuZGVyZWQg
        YW5kIHdlJ3ZlIGJlZW4gbnVrZWQuIFJlbW92ZSB0aGUgb2JzZXJ2ZXIuCiAg
        ICAgIGlmICghZWxlbSB8fCBlbGVtLmxlbmd0aCA9PT0gMCkgewogICAgICAg
        IEVtYmVyLnJlbW92ZU9ic2VydmVyKHBhdGhSb290LCBwYXRoLCBpbnZva2Vy
        KTsKICAgICAgfSBlbHNlIHsKICAgICAgICAvLyBJZiB3ZSBoYWQgcHJldmlv
        dXNseSBhZGRlZCBhIGNsYXNzIHRvIHRoZSBlbGVtZW50LCByZW1vdmUgaXQu
        CiAgICAgICAgaWYgKG9sZENsYXNzKSB7CiAgICAgICAgICBlbGVtLnJlbW92
        ZUNsYXNzKG9sZENsYXNzKTsKICAgICAgICB9CgogICAgICAgIC8vIElmIG5l
        Y2Vzc2FyeSwgYWRkIGEgbmV3IGNsYXNzLiBNYWtlIHN1cmUgd2Uga2VlcCB0
        cmFjayBvZiBpdCBzbwogICAgICAgIC8vIGl0IGNhbiBiZSByZW1vdmVkIGlu
        IHRoZSBmdXR1cmUuCiAgICAgICAgaWYgKG5ld0NsYXNzKSB7CiAgICAgICAg
        ICBlbGVtLmFkZENsYXNzKG5ld0NsYXNzKTsKICAgICAgICAgIG9sZENsYXNz
        ID0gbmV3Q2xhc3M7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIG9sZENs
        YXNzID0gbnVsbDsKICAgICAgICB9CiAgICAgIH0KICAgIH07CgogICAgaWYg
        KHBhdGggIT09ICcnICYmIHBhdGggIT09ICd0aGlzJykgewogICAgICB2aWV3
        LnJlZ2lzdGVyT2JzZXJ2ZXIocGF0aFJvb3QsIHBhdGgsIG9ic2VydmVyKTsK
        ICAgIH0KCiAgICAvLyBXZSd2ZSBhbHJlYWR5IHNldHVwIHRoZSBvYnNlcnZl
        cjsgbm93IHdlIGp1c3QgbmVlZCB0byBmaWd1cmUgb3V0IHRoZQogICAgLy8g
        Y29ycmVjdCBiZWhhdmlvciByaWdodCBub3cgb24gdGhlIGZpcnN0IHBhc3Mg
        dGhyb3VnaC4KICAgIHZhbHVlID0gY2xhc3NTdHJpbmdGb3JQYXRoKGNvbnRl
        eHQsIHBhcnNlZFBhdGgsIG9wdGlvbnMpOwoKICAgIGlmICh2YWx1ZSkgewog
        ICAgICByZXQucHVzaCh2YWx1ZSk7CgogICAgICAvLyBNYWtlIHN1cmUgd2Ug
        c2F2ZSB0aGUgY3VycmVudCB2YWx1ZSBzbyB0aGF0IGl0IGNhbiBiZSByZW1v
        dmVkIGlmIHRoZQogICAgICAvLyBvYnNlcnZlciBmaXJlcy4KICAgICAgb2xk
        Q2xhc3MgPSB2YWx1ZTsKICAgIH0KICB9KTsKCiAgcmV0dXJuIHJldDsKfTsK
        Cgp9KSgpOwoKCgooZnVuY3Rpb24oKSB7Ci8qZ2xvYmFscyBIYW5kbGViYXJz
        ICovCgovLyBUT0RPOiBEb24ndCByZXF1aXJlIHRoZSBlbnRpcmUgbW9kdWxl
        Ci8qKgpAbW9kdWxlIGVtYmVyCkBzdWJtb2R1bGUgZW1iZXItaGFuZGxlYmFy
        cwoqLwoKdmFyIGdldCA9IEVtYmVyLmdldCwgc2V0ID0gRW1iZXIuc2V0Owp2
        YXIgRW1iZXJIYW5kbGViYXJzID0gRW1iZXIuSGFuZGxlYmFyczsKdmFyIExP
        V0VSQ0FTRV9BX1ogPSAvXlthLXpdLzsKdmFyIFZJRVdfUFJFRklYID0gL152
        aWV3XC4vOwoKZnVuY3Rpb24gbWFrZUJpbmRpbmdzKHRoaXNDb250ZXh0LCBv
        cHRpb25zKSB7CiAgdmFyIGhhc2ggPSBvcHRpb25zLmhhc2gsCiAgICAgIGhh
        c2hUeXBlID0gb3B0aW9ucy5oYXNoVHlwZXM7CgogIGZvciAodmFyIHByb3Ag
        aW4gaGFzaCkgewogICAgaWYgKGhhc2hUeXBlW3Byb3BdID09PSAnSUQnKSB7
        CgogICAgICB2YXIgdmFsdWUgPSBoYXNoW3Byb3BdOwoKICAgICAgaWYgKEVt
        YmVyLklTX0JJTkRJTkcudGVzdChwcm9wKSkgewogICAgICAgIEVtYmVyLndh
        cm4oIllvdSdyZSBhdHRlbXB0aW5nIHRvIHJlbmRlciBhIHZpZXcgYnkgcGFz
        c2luZyAiICsgcHJvcCArICI9IiArIHZhbHVlICsgIiB0byBhIHZpZXcgaGVs
        cGVyLCBidXQgdGhpcyBzeW50YXggaXMgYW1iaWd1b3VzLiBZb3Ugc2hvdWxk
        IGVpdGhlciBzdXJyb3VuZCAiICsgdmFsdWUgKyAiIGluIHF1b3RlcyBvciBy
        ZW1vdmUgYEJpbmRpbmdgIGZyb20gIiArIHByb3AgKyAiLiIpOwogICAgICB9
        IGVsc2UgewogICAgICAgIGhhc2hbcHJvcCArICdCaW5kaW5nJ10gPSB2YWx1
        ZTsKICAgICAgICBoYXNoVHlwZVtwcm9wICsgJ0JpbmRpbmcnXSA9ICdTVFJJ
        TkcnOwogICAgICAgIGRlbGV0ZSBoYXNoW3Byb3BdOwogICAgICAgIGRlbGV0
        ZSBoYXNoVHlwZVtwcm9wXTsKICAgICAgfQogICAgfQogIH0KCiAgaWYgKGhh
        c2guaGFzT3duUHJvcGVydHkoJ2lkQmluZGluZycpKSB7CiAgICAvLyBpZCBj
        YW4ndCBiZSBib3VuZCwgc28ganVzdCBwZXJmb3JtIG9uZS10aW1lIGxvb2t1
        cC4KICAgIGhhc2guaWQgPSBFbWJlckhhbmRsZWJhcnMuZ2V0KHRoaXNDb250
        ZXh0LCBoYXNoLmlkQmluZGluZywgb3B0aW9ucyk7CiAgICBoYXNoVHlwZS5p
        ZCA9ICdTVFJJTkcnOwogICAgZGVsZXRlIGhhc2guaWRCaW5kaW5nOwogICAg
        ZGVsZXRlIGhhc2hUeXBlLmlkQmluZGluZzsKICB9Cn0KCkVtYmVySGFuZGxl
        YmFycy5WaWV3SGVscGVyID0gRW1iZXIuT2JqZWN0LmNyZWF0ZSh7CgogIHBy
        b3BlcnRpZXNGcm9tSFRNTE9wdGlvbnM6IGZ1bmN0aW9uKG9wdGlvbnMpIHsK
        ICAgIHZhciBoYXNoID0gb3B0aW9ucy5oYXNoLCBkYXRhID0gb3B0aW9ucy5k
        YXRhOwogICAgdmFyIGV4dGVuc2lvbnMgPSB7fSwKICAgICAgICBjbGFzc2Vz
        ID0gaGFzaFsnY2xhc3MnXSwKICAgICAgICBkdXAgPSBmYWxzZTsKCiAgICBp
        ZiAoaGFzaC5pZCkgewogICAgICBleHRlbnNpb25zLmVsZW1lbnRJZCA9IGhh
        c2guaWQ7CiAgICAgIGR1cCA9IHRydWU7CiAgICB9CgogICAgaWYgKGhhc2gu
        dGFnKSB7CiAgICAgIGV4dGVuc2lvbnMudGFnTmFtZSA9IGhhc2gudGFnOwog
        ICAgICBkdXAgPSB0cnVlOwogICAgfQoKICAgIGlmIChjbGFzc2VzKSB7CiAg
        ICAgIGNsYXNzZXMgPSBjbGFzc2VzLnNwbGl0KCcgJyk7CiAgICAgIGV4dGVu
        c2lvbnMuY2xhc3NOYW1lcyA9IGNsYXNzZXM7CiAgICAgIGR1cCA9IHRydWU7
        CiAgICB9CgogICAgaWYgKGhhc2guY2xhc3NCaW5kaW5nKSB7CiAgICAgIGV4
        dGVuc2lvbnMuY2xhc3NOYW1lQmluZGluZ3MgPSBoYXNoLmNsYXNzQmluZGlu
        Zy5zcGxpdCgnICcpOwogICAgICBkdXAgPSB0cnVlOwogICAgfQoKICAgIGlm
        IChoYXNoLmNsYXNzTmFtZUJpbmRpbmdzKSB7CiAgICAgIGlmIChleHRlbnNp
        b25zLmNsYXNzTmFtZUJpbmRpbmdzID09PSB1bmRlZmluZWQpIGV4dGVuc2lv
        bnMuY2xhc3NOYW1lQmluZGluZ3MgPSBbXTsKICAgICAgZXh0ZW5zaW9ucy5j
        bGFzc05hbWVCaW5kaW5ncyA9IGV4dGVuc2lvbnMuY2xhc3NOYW1lQmluZGlu
        Z3MuY29uY2F0KGhhc2guY2xhc3NOYW1lQmluZGluZ3Muc3BsaXQoJyAnKSk7
        CiAgICAgIGR1cCA9IHRydWU7CiAgICB9CgogICAgaWYgKGhhc2guYXR0cmli
        dXRlQmluZGluZ3MpIHsKICAgICAgRW1iZXIuYXNzZXJ0KCJTZXR0aW5nICdh
        dHRyaWJ1dGVCaW5kaW5ncycgdmlhIEhhbmRsZWJhcnMgaXMgbm90IGFsbG93
        ZWQuIFBsZWFzZSBzdWJjbGFzcyBFbWJlci5WaWV3IGFuZCBzZXQgaXQgdGhl
        cmUgaW5zdGVhZC4iKTsKICAgICAgZXh0ZW5zaW9ucy5hdHRyaWJ1dGVCaW5k
        aW5ncyA9IG51bGw7CiAgICAgIGR1cCA9IHRydWU7CiAgICB9CgogICAgaWYg
        KGR1cCkgewogICAgICBoYXNoID0gRW1iZXIuJC5leHRlbmQoe30sIGhhc2gp
        OwogICAgICBkZWxldGUgaGFzaC5pZDsKICAgICAgZGVsZXRlIGhhc2gudGFn
        OwogICAgICBkZWxldGUgaGFzaFsnY2xhc3MnXTsKICAgICAgZGVsZXRlIGhh
        c2guY2xhc3NCaW5kaW5nOwogICAgfQoKICAgIC8vIFNldCB0aGUgcHJvcGVy
        IGNvbnRleHQgZm9yIGFsbCBiaW5kaW5ncyBwYXNzZWQgdG8gdGhlIGhlbHBl
        ci4gVGhpcyBhcHBsaWVzIHRvIHJlZ3VsYXIgYXR0cmlidXRlIGJpbmRpbmdz
        CiAgICAvLyBhcyB3ZWxsIGFzIGNsYXNzIG5hbWUgYmluZGluZ3MuIElmIHRo
        ZSBiaW5kaW5ncyBhcmUgbG9jYWwsIG1ha2UgdGhlbSByZWxhdGl2ZSB0byB0
        aGUgY3VycmVudCBjb250ZXh0CiAgICAvLyBpbnN0ZWFkIG9mIHRoZSB2aWV3
        LgogICAgdmFyIHBhdGg7CgogICAgLy8gRXZhbHVhdGUgdGhlIGNvbnRleHQg
        b2YgcmVndWxhciBhdHRyaWJ1dGUgYmluZGluZ3M6CiAgICBmb3IgKHZhciBw
        cm9wIGluIGhhc2gpIHsKICAgICAgaWYgKCFoYXNoLmhhc093blByb3BlcnR5
        KHByb3ApKSB7IGNvbnRpbnVlOyB9CgogICAgICAvLyBUZXN0IGlmIHRoZSBw
        cm9wZXJ0eSBlbmRzIGluICJCaW5kaW5nIgogICAgICBpZiAoRW1iZXIuSVNf
        QklORElORy50ZXN0KHByb3ApICYmIHR5cGVvZiBoYXNoW3Byb3BdID09PSAn
        c3RyaW5nJykgewogICAgICAgIHBhdGggPSB0aGlzLmNvbnRleHR1YWxpemVC
        aW5kaW5nUGF0aChoYXNoW3Byb3BdLCBkYXRhKTsKICAgICAgICBpZiAocGF0
        aCkgeyBoYXNoW3Byb3BdID0gcGF0aDsgfQogICAgICB9CiAgICB9CgogICAg
        Ly8gRXZhbHVhdGUgdGhlIGNvbnRleHQgb2YgY2xhc3MgbmFtZSBiaW5kaW5n
        czoKICAgIGlmIChleHRlbnNpb25zLmNsYXNzTmFtZUJpbmRpbmdzKSB7CiAg
        ICAgIGZvciAodmFyIGIgaW4gZXh0ZW5zaW9ucy5jbGFzc05hbWVCaW5kaW5n
        cykgewogICAgICAgIHZhciBmdWxsID0gZXh0ZW5zaW9ucy5jbGFzc05hbWVC
        aW5kaW5nc1tiXTsKICAgICAgICBpZiAodHlwZW9mIGZ1bGwgPT09ICdzdHJp
        bmcnKSB7CiAgICAgICAgICAvLyBDb250ZXh0dWFsaXplIHRoZSBwYXRoIG9m
        IGNsYXNzTmFtZUJpbmRpbmcgc28gdGhpczoKICAgICAgICAgIC8vCiAgICAg
        ICAgICAvLyAgICAgY2xhc3NOYW1lQmluZGluZz0iaXNHcmVlbjpncmVlbiIK
        ICAgICAgICAgIC8vCiAgICAgICAgICAvLyBpcyBjb252ZXJ0ZWQgdG8gdGhp
        czoKICAgICAgICAgIC8vCiAgICAgICAgICAvLyAgICAgY2xhc3NOYW1lQmlu
        ZGluZz0iX3BhcmVudFZpZXcuY29udGV4dC5pc0dyZWVuOmdyZWVuIgogICAg
        ICAgICAgdmFyIHBhcnNlZFBhdGggPSBFbWJlci5WaWV3Ll9wYXJzZVByb3Bl
        cnR5UGF0aChmdWxsKTsKICAgICAgICAgIHBhdGggPSB0aGlzLmNvbnRleHR1
        YWxpemVCaW5kaW5nUGF0aChwYXJzZWRQYXRoLnBhdGgsIGRhdGEpOwogICAg
        ICAgICAgaWYgKHBhdGgpIHsgZXh0ZW5zaW9ucy5jbGFzc05hbWVCaW5kaW5n
        c1tiXSA9IHBhdGggKyBwYXJzZWRQYXRoLmNsYXNzTmFtZXM7IH0KICAgICAg
        ICB9CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gRW1iZXIuJC5leHRlbmQo
        aGFzaCwgZXh0ZW5zaW9ucyk7CiAgfSwKCiAgLy8gVHJhbnNmb3JtIGJpbmRp
        bmdzIGZyb20gdGhlIGN1cnJlbnQgY29udGV4dCB0byBhIGNvbnRleHQgdGhh
        dCBjYW4gYmUgZXZhbHVhdGVkIHdpdGhpbiB0aGUgdmlldy4KICAvLyBSZXR1
        cm5zIG51bGwgaWYgdGhlIHBhdGggc2hvdWxkbid0IGJlIGNoYW5nZWQuCiAg
        Ly8KICAvLyBUT0RPOiBjb25zaWRlciB0aGUgYWRkaXRpb24gb2YgYSBwcmVm
        aXggdGhhdCB3b3VsZCBhbGxvdyB0aGlzIG1ldGhvZCB0byByZXR1cm4gYHBh
        dGhgLgogIGNvbnRleHR1YWxpemVCaW5kaW5nUGF0aDogZnVuY3Rpb24ocGF0
        aCwgZGF0YSkgewogICAgdmFyIG5vcm1hbGl6ZWQgPSBFbWJlci5IYW5kbGVi
        YXJzLm5vcm1hbGl6ZVBhdGgobnVsbCwgcGF0aCwgZGF0YSk7CiAgICBpZiAo
        bm9ybWFsaXplZC5pc0tleXdvcmQpIHsKICAgICAgcmV0dXJuICd0ZW1wbGF0
        ZURhdGEua2V5d29yZHMuJyArIHBhdGg7CiAgICB9IGVsc2UgaWYgKEVtYmVy
        LmlzR2xvYmFsUGF0aChwYXRoKSkgewogICAgICByZXR1cm4gbnVsbDsKICAg
        IH0gZWxzZSBpZiAocGF0aCA9PT0gJ3RoaXMnIHx8IHBhdGggPT09ICcnKSB7
        CiAgICAgIHJldHVybiAnX3BhcmVudFZpZXcuY29udGV4dCc7CiAgICB9IGVs
        c2UgewogICAgICByZXR1cm4gJ19wYXJlbnRWaWV3LmNvbnRleHQuJyArIHBh
        dGg7CiAgICB9CiAgfSwKCiAgaGVscGVyOiBmdW5jdGlvbih0aGlzQ29udGV4
        dCwgcGF0aCwgb3B0aW9ucykgewogICAgdmFyIGRhdGEgPSBvcHRpb25zLmRh
        dGEsCiAgICAgICAgZm4gPSBvcHRpb25zLmZuLAogICAgICAgIG5ld1ZpZXc7
        CgogICAgbWFrZUJpbmRpbmdzKHRoaXNDb250ZXh0LCBvcHRpb25zKTsKCiAg
        ICBpZiAoJ3N0cmluZycgPT09IHR5cGVvZiBwYXRoKSB7CgogICAgICAvLyBU
        T0RPOiB0aGlzIGlzIGEgbGFtZSBjb25kaXRpb25hbCwgdGhpcyBzaG91bGQg
        bGlrZWx5IGNoYW5nZQogICAgICAvLyBidXQgc29tZXRoaW5nIGFsb25nIHRo
        ZXNlIGxpbmVzIHdpbGwgbGlrZWx5IG5lZWQgdG8gYmUgYWRkZWQKICAgICAg
        Ly8gYXMgZGVwcmVjYXRpb24gd2FybmluZ3MKICAgICAgLy8KICAgICAgaWYg
        KG9wdGlvbnMudHlwZXNbMF0gPT09ICdTVFJJTkcnICYmIExPV0VSQ0FTRV9B
        X1oudGVzdChwYXRoKSAmJiAhVklFV19QUkVGSVgudGVzdChwYXRoKSkgewog
        ICAgICAgIEVtYmVyLmFzc2VydCgiVmlldyByZXF1aXJlcyBhIGNvbnRhaW5l
        ciIsICEhZGF0YS52aWV3LmNvbnRhaW5lcik7CiAgICAgICAgbmV3VmlldyA9
        IGRhdGEudmlldy5jb250YWluZXIubG9va3VwRmFjdG9yeSgndmlldzonICsg
        cGF0aCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgbmV3VmlldyA9IEVtYmVy
        SGFuZGxlYmFycy5nZXQodGhpc0NvbnRleHQsIHBhdGgsIG9wdGlvbnMpOwog
        ICAgICB9CgogICAgICBFbWJlci5hc3NlcnQoIlVuYWJsZSB0byBmaW5kIHZp
        ZXcgYXQgcGF0aCAnIiArIHBhdGggKyAiJyIsICEhbmV3Vmlldyk7CiAgICB9
        IGVsc2UgewogICAgICBuZXdWaWV3ID0gcGF0aDsKICAgIH0KCiAgICBFbWJl
        ci5hc3NlcnQoRW1iZXIuU3RyaW5nLmZtdCgnWW91IG11c3QgcGFzcyBhIHZp
        ZXcgdG8gdGhlICN2aWV3IGhlbHBlciwgbm90ICVAICglQCknLCBbcGF0aCwg
        bmV3Vmlld10pLCBFbWJlci5WaWV3LmRldGVjdChuZXdWaWV3KSB8fCBFbWJl
        ci5WaWV3LmRldGVjdEluc3RhbmNlKG5ld1ZpZXcpKTsKCiAgICB2YXIgdmll
        d09wdGlvbnMgPSB0aGlzLnByb3BlcnRpZXNGcm9tSFRNTE9wdGlvbnMob3B0
        aW9ucywgdGhpc0NvbnRleHQpOwogICAgdmFyIGN1cnJlbnRWaWV3ID0gZGF0
        YS52aWV3OwogICAgdmlld09wdGlvbnMudGVtcGxhdGVEYXRhID0gZGF0YTsK
        ICAgIHZhciBuZXdWaWV3UHJvdG8gPSBuZXdWaWV3LnByb3RvID8gbmV3Vmll
        dy5wcm90bygpIDogbmV3VmlldzsKCiAgICBpZiAoZm4pIHsKICAgICAgRW1i
        ZXIuYXNzZXJ0KCJZb3UgY2Fubm90IHByb3ZpZGUgYSB0ZW1wbGF0ZSBibG9j
        ayBpZiB5b3UgYWxzbyBzcGVjaWZpZWQgYSB0ZW1wbGF0ZU5hbWUiLCAhZ2V0
        KHZpZXdPcHRpb25zLCAndGVtcGxhdGVOYW1lJykgJiYgIWdldChuZXdWaWV3
        UHJvdG8sICd0ZW1wbGF0ZU5hbWUnKSk7CiAgICAgIHZpZXdPcHRpb25zLnRl
        bXBsYXRlID0gZm47CiAgICB9CgogICAgLy8gV2Ugb25seSB3YW50IHRvIG92
        ZXJyaWRlIHRoZSBgX2NvbnRleHRgIGNvbXB1dGVkIHByb3BlcnR5IGlmIHRo
        ZXJlIGlzCiAgICAvLyBubyBzcGVjaWZpZWQgY29udHJvbGxlci4gU2VlIFZp
        ZXcjX2NvbnRleHQgZm9yIG1vcmUgaW5mb3JtYXRpb24uCiAgICBpZiAoIW5l
        d1ZpZXdQcm90by5jb250cm9sbGVyICYmICFuZXdWaWV3UHJvdG8uY29udHJv
        bGxlckJpbmRpbmcgJiYgIXZpZXdPcHRpb25zLmNvbnRyb2xsZXIgJiYgIXZp
        ZXdPcHRpb25zLmNvbnRyb2xsZXJCaW5kaW5nKSB7CiAgICAgIHZpZXdPcHRp
        b25zLl9jb250ZXh0ID0gdGhpc0NvbnRleHQ7CiAgICB9CgogICAgY3VycmVu
        dFZpZXcuYXBwZW5kQ2hpbGQobmV3Vmlldywgdmlld09wdGlvbnMpOwogIH0K
        fSk7CgovKioKICBge3t2aWV3fX1gIGluc2VydHMgYSBuZXcgaW5zdGFuY2Ug
        b2YgYEVtYmVyLlZpZXdgIGludG8gYSB0ZW1wbGF0ZSBwYXNzaW5nIGl0cwog
        IG9wdGlvbnMgdG8gdGhlIGBFbWJlci5WaWV3YCdzIGBjcmVhdGVgIG1ldGhv
        ZCBhbmQgdXNpbmcgdGhlIHN1cHBsaWVkIGJsb2NrIGFzCiAgdGhlIHZpZXcn
        cyBvd24gdGVtcGxhdGUuCgogIEFuIGVtcHR5IGA8Ym9keT5gIGFuZCB0aGUg
        Zm9sbG93aW5nIHRlbXBsYXRlOgoKICBgYGBoYW5kbGViYXJzCiAgQSBzcGFu
        OgogIHt7I3ZpZXcgdGFnTmFtZT0ic3BhbiJ9fQogICAgaGVsbG8uCiAge3sv
        dmlld319CiAgYGBgCgogIFdpbGwgcmVzdWx0IGluIEhUTUwgc3RydWN0dXJl
        OgoKICBgYGBodG1sCiAgPGJvZHk+CiAgICA8IS0tIE5vdGU6IHRoZSBoYW5k
        bGViYXJzIHRlbXBsYXRlIHNjcmlwdAogICAgICAgICBhbHNvIHJlc3VsdHMg
        aW4gYSByZW5kZXJlZCBFbWJlci5WaWV3CiAgICAgICAgIHdoaWNoIGlzIHRo
        ZSBvdXRlciA8ZGl2PiBoZXJlIC0tPgoKICAgIDxkaXYgY2xhc3M9ImVtYmVy
        LXZpZXciPgogICAgICBBIHNwYW46CiAgICAgIDxzcGFuIGlkPSJlbWJlcjEi
        IGNsYXNzPSJlbWJlci12aWV3Ij4KICAgICAgICBIZWxsby4KICAgICAgPC9z
        cGFuPgogICAgPC9kaXY+CiAgPC9ib2R5PgogIGBgYAoKICAjIyMgYHBhcmVu
        dFZpZXdgIHNldHRpbmcKCiAgVGhlIGBwYXJlbnRWaWV3YCBwcm9wZXJ0eSBv
        ZiB0aGUgbmV3IGBFbWJlci5WaWV3YCBpbnN0YW5jZSBjcmVhdGVkIHRocm91
        Z2gKICBge3t2aWV3fX1gIHdpbGwgYmUgc2V0IHRvIHRoZSBgRW1iZXIuVmll
        d2AgaW5zdGFuY2Ugb2YgdGhlIHRlbXBsYXRlIHdoZXJlCiAgYHt7dmlld319
        YCB3YXMgY2FsbGVkLgoKICBgYGBqYXZhc2NyaXB0CiAgYVZpZXcgPSBFbWJl
        ci5WaWV3LmNyZWF0ZSh7CiAgICB0ZW1wbGF0ZTogRW1iZXIuSGFuZGxlYmFy
        cy5jb21waWxlKCJ7eyN2aWV3fX0gbXkgcGFyZW50OiB7e3BhcmVudFZpZXcu
        ZWxlbWVudElkfX0ge3svdmlld319IikKICB9KTsKCiAgYVZpZXcuYXBwZW5k
        VG8oJ2JvZHknKTsKICBgYGAKCiAgV2lsbCByZXN1bHQgaW4gSFRNTCBzdHJ1
        Y3R1cmU6CgogIGBgYGh0bWwKICA8ZGl2IGlkPSJlbWJlcjEiIGNsYXNzPSJl
        bWJlci12aWV3Ij4KICAgIDxkaXYgaWQ9ImVtYmVyMiIgY2xhc3M9ImVtYmVy
        LXZpZXciPgogICAgICBteSBwYXJlbnQ6IGVtYmVyMQogICAgPC9kaXY+CiAg
        PC9kaXY+CiAgYGBgCgogICMjIyBTZXR0aW5nIENTUyBpZCBhbmQgY2xhc3Mg
        YXR0cmlidXRlcwoKICBUaGUgSFRNTCBgaWRgIGF0dHJpYnV0ZSBjYW4gYmUg
        c2V0IG9uIHRoZSBge3t2aWV3fX1gJ3MgcmVzdWx0aW5nIGVsZW1lbnQgd2l0
        aAogIHRoZSBgaWRgIG9wdGlvbi4gVGhpcyBvcHRpb24gd2lsbCBfbm90XyBi
        ZSBwYXNzZWQgdG8gYEVtYmVyLlZpZXcuY3JlYXRlYC4KCiAgYGBgaGFuZGxl
        YmFycwogIHt7I3ZpZXcgdGFnTmFtZT0ic3BhbiIgaWQ9ImEtY3VzdG9tLWlk
        In19CiAgICBoZWxsby4KICB7ey92aWV3fX0KICBgYGAKCiAgUmVzdWx0cyBp
        biB0aGUgZm9sbG93aW5nIEhUTUwgc3RydWN0dXJlOgoKICBgYGBodG1sCiAg
        PGRpdiBjbGFzcz0iZW1iZXItdmlldyI+CiAgICA8c3BhbiBpZD0iYS1jdXN0
        b20taWQiIGNsYXNzPSJlbWJlci12aWV3Ij4KICAgICAgaGVsbG8uCiAgICA8
        L3NwYW4+CiAgPC9kaXY+CiAgYGBgCgogIFRoZSBIVE1MIGBjbGFzc2AgYXR0
        cmlidXRlIGNhbiBiZSBzZXQgb24gdGhlIGB7e3ZpZXd9fWAncyByZXN1bHRp
        bmcgZWxlbWVudAogIHdpdGggdGhlIGBjbGFzc2Agb3IgYGNsYXNzTmFtZUJp
        bmRpbmdzYCBvcHRpb25zLiBUaGUgYGNsYXNzYCBvcHRpb24gd2lsbAogIGRp
        cmVjdGx5IHNldCB0aGUgQ1NTIGBjbGFzc2AgYXR0cmlidXRlIGFuZCB3aWxs
        IG5vdCBiZSBwYXNzZWQgdG8KICBgRW1iZXIuVmlldy5jcmVhdGVgLiBgY2xh
        c3NOYW1lQmluZGluZ3NgIHdpbGwgYmUgcGFzc2VkIHRvIGBjcmVhdGVgIGFu
        ZCB1c2UKICBgRW1iZXIuVmlld2AncyBjbGFzcyBuYW1lIGJpbmRpbmcgZnVu
        Y3Rpb25hbGl0eToKCiAgYGBgaGFuZGxlYmFycwogIHt7I3ZpZXcgdGFnTmFt
        ZT0ic3BhbiIgY2xhc3M9ImEtY3VzdG9tLWNsYXNzIn19CiAgICBoZWxsby4K
        ICB7ey92aWV3fX0KICBgYGAKCiAgUmVzdWx0cyBpbiB0aGUgZm9sbG93aW5n
        IEhUTUwgc3RydWN0dXJlOgoKICBgYGBodG1sCiAgPGRpdiBjbGFzcz0iZW1i
        ZXItdmlldyI+CiAgICA8c3BhbiBpZD0iZW1iZXIyIiBjbGFzcz0iZW1iZXIt
        dmlldyBhLWN1c3RvbS1jbGFzcyI+CiAgICAgIGhlbGxvLgogICAgPC9zcGFu
        PgogIDwvZGl2PgogIGBgYAoKICAjIyMgU3VwcGx5aW5nIGEgZGlmZmVyZW50
        IHZpZXcgY2xhc3MKCiAgYHt7dmlld319YCBjYW4gdGFrZSBhbiBvcHRpb25h
        bCBmaXJzdCBhcmd1bWVudCBiZWZvcmUgaXRzIHN1cHBsaWVkIG9wdGlvbnMg
        dG8KICBzcGVjaWZ5IGEgcGF0aCB0byBhIGN1c3RvbSB2aWV3IGNsYXNzLgoK
        ICBgYGBoYW5kbGViYXJzCiAge3sjdmlldyAiTXlBcHAuQ3VzdG9tVmlldyJ9
        fQogICAgaGVsbG8uCiAge3svdmlld319CiAgYGBgCgogIFRoZSBmaXJzdCBh
        cmd1bWVudCBjYW4gYWxzbyBiZSBhIHJlbGF0aXZlIHBhdGggYWNjZXNzaWJs
        ZSBmcm9tIHRoZSBjdXJyZW50CiAgY29udGV4dC4KCiAgYGBgamF2YXNjcmlw
        dAogIE15QXBwID0gRW1iZXIuQXBwbGljYXRpb24uY3JlYXRlKHt9KTsKICBN
        eUFwcC5PdXRlclZpZXcgPSBFbWJlci5WaWV3LmV4dGVuZCh7CiAgICBpbm5l
        clZpZXdDbGFzczogRW1iZXIuVmlldy5leHRlbmQoewogICAgICBjbGFzc05h
        bWVzOiBbJ2EtY3VzdG9tLXZpZXctY2xhc3MtYXMtcHJvcGVydHknXQogICAg
        fSksCiAgICB0ZW1wbGF0ZTogRW1iZXIuSGFuZGxlYmFycy5jb21waWxlKCd7
        eyN2aWV3ICJ2aWV3LmlubmVyVmlld0NsYXNzIn19IGhpIHt7L3ZpZXd9fScp
        CiAgfSk7CgogIE15QXBwLk91dGVyVmlldy5jcmVhdGUoKS5hcHBlbmRUbygn
        Ym9keScpOwogIGBgYAoKICBXaWxsIHJlc3VsdCBpbiB0aGUgZm9sbG93aW5n
        IEhUTUw6CgogIGBgYGh0bWwKICA8ZGl2IGlkPSJlbWJlcjEiIGNsYXNzPSJl
        bWJlci12aWV3Ij4KICAgIDxkaXYgaWQ9ImVtYmVyMiIgY2xhc3M9ImVtYmVy
        LXZpZXcgYS1jdXN0b20tdmlldy1jbGFzcy1hcy1wcm9wZXJ0eSI+CiAgICAg
        IGhpCiAgICA8L2Rpdj4KICA8L2Rpdj4KICBgYGAKCiAgIyMjIEJsb2NrbGVz
        cyB1c2UKCiAgSWYgeW91IHN1cHBseSBhIGN1c3RvbSBgRW1iZXIuVmlld2Ag
        c3ViY2xhc3MgdGhhdCBzcGVjaWZpZXMgaXRzIG93biB0ZW1wbGF0ZQogIG9y
        IHByb3ZpZGUgYSBgdGVtcGxhdGVOYW1lYCBvcHRpb24gdG8gYHt7dmlld319
        YCBpdCBjYW4gYmUgdXNlZCB3aXRob3V0CiAgc3VwcGx5aW5nIGEgYmxvY2su
        IEF0dGVtcHRzIHRvIHVzZSBib3RoIGEgYHRlbXBsYXRlTmFtZWAgb3B0aW9u
        IGFuZCBzdXBwbHkgYQogIGJsb2NrIHdpbGwgdGhyb3cgYW4gZXJyb3IuCgog
        IGBgYGhhbmRsZWJhcnMKICB7e3ZpZXcgIk15QXBwLlZpZXdXaXRoQVRlbXBs
        YXRlRGVmaW5lZCJ9fQogIGBgYAoKICAjIyMgYHZpZXdOYW1lYCBwcm9wZXJ0
        eQoKICBZb3UgY2FuIHN1cHBseSBhIGB2aWV3TmFtZWAgb3B0aW9uIHRvIGB7
        e3ZpZXd9fWAuIFRoZSBgRW1iZXIuVmlld2AgaW5zdGFuY2UKICB3aWxsIGJl
        IHJlZmVyZW5jZWQgYXMgYSBwcm9wZXJ0eSBvZiBpdHMgcGFyZW50IHZpZXcg
        YnkgdGhpcyBuYW1lLgoKICBgYGBqYXZhc2NyaXB0CiAgYVZpZXcgPSBFbWJl
        ci5WaWV3LmNyZWF0ZSh7CiAgICB0ZW1wbGF0ZTogRW1iZXIuSGFuZGxlYmFy
        cy5jb21waWxlKCd7eyN2aWV3IHZpZXdOYW1lPSJhQ2hpbGRCeU5hbWUifX0g
        aGkge3svdmlld319JykKICB9KTsKCiAgYVZpZXcuYXBwZW5kVG8oJ2JvZHkn
        KTsKICBhVmlldy5nZXQoJ2FDaGlsZEJ5TmFtZScpIC8vIHRoZSBpbnN0YW5j
        ZSBvZiBFbWJlci5WaWV3IGNyZWF0ZWQgYnkge3t2aWV3fX0gaGVscGVyCiAg
        YGBgCgogIEBtZXRob2QgdmlldwogIEBmb3IgRW1iZXIuSGFuZGxlYmFycy5o
        ZWxwZXJzCiAgQHBhcmFtIHtTdHJpbmd9IHBhdGgKICBAcGFyYW0ge0hhc2h9
        IG9wdGlvbnMKICBAcmV0dXJuIHtTdHJpbmd9IEhUTUwgc3RyaW5nCiovCkVt
        YmVySGFuZGxlYmFycy5yZWdpc3RlckhlbHBlcigndmlldycsIGZ1bmN0aW9u
        IHZpZXdIZWxwZXIocGF0aCwgb3B0aW9ucykgewogIEVtYmVyLmFzc2VydCgi
        VGhlIHZpZXcgaGVscGVyIG9ubHkgdGFrZXMgYSBzaW5nbGUgYXJndW1lbnQi
        LCBhcmd1bWVudHMubGVuZ3RoIDw9IDIpOwoKICAvLyBJZiBubyBwYXRoIGlz
        IHByb3ZpZGVkLCB0cmVhdCBwYXRoIHBhcmFtIGFzIG9wdGlvbnMuCiAgaWYg
        KHBhdGggJiYgcGF0aC5kYXRhICYmIHBhdGguZGF0YS5pc1JlbmRlckRhdGEp
        IHsKICAgIG9wdGlvbnMgPSBwYXRoOwogICAgcGF0aCA9ICJFbWJlci5WaWV3
        IjsKICB9CgogIHJldHVybiBFbWJlckhhbmRsZWJhcnMuVmlld0hlbHBlci5o
        ZWxwZXIodGhpcywgcGF0aCwgb3B0aW9ucyk7Cn0pOwoKCn0pKCk7CgoKCihm
        dW5jdGlvbigpIHsKLy8gVE9ETzogRG9uJ3QgcmVxdWlyZSBhbGwgb2YgdGhp
        cyBtb2R1bGUKLyoqCkBtb2R1bGUgZW1iZXIKQHN1Ym1vZHVsZSBlbWJlci1o
        YW5kbGViYXJzCiovCgp2YXIgZ2V0ID0gRW1iZXIuZ2V0LCBoYW5kbGViYXJz
        R2V0ID0gRW1iZXIuSGFuZGxlYmFycy5nZXQsIGZtdCA9IEVtYmVyLlN0cmlu
        Zy5mbXQ7CgovKioKICBge3tjb2xsZWN0aW9ufX1gIGlzIGEgYEVtYmVyLkhh
        bmRsZWJhcnNgIGhlbHBlciBmb3IgYWRkaW5nIGluc3RhbmNlcyBvZgogIGBF
        bWJlci5Db2xsZWN0aW9uVmlld2AgdG8gYSB0ZW1wbGF0ZS4gU2VlIFtFbWJl
        ci5Db2xsZWN0aW9uVmlld10oL2FwaS9jbGFzc2VzL0VtYmVyLkNvbGxlY3Rp
        b25WaWV3Lmh0bWwpCiAgIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9uIG9u
        IGhvdyBhIGBDb2xsZWN0aW9uVmlld2AgZnVuY3Rpb25zLgoKICBge3tjb2xs
        ZWN0aW9ufX1gJ3MgcHJpbWFyeSB1c2UgaXMgYXMgYSBibG9jayBoZWxwZXIg
        d2l0aCBhIGBjb250ZW50QmluZGluZ2AKICBvcHRpb24gcG9pbnRpbmcgdG93
        YXJkcyBhbiBgRW1iZXIuQXJyYXlgLWNvbXBhdGlibGUgb2JqZWN0LiBBbiBg
        RW1iZXIuVmlld2AKICBpbnN0YW5jZSB3aWxsIGJlIGNyZWF0ZWQgZm9yIGVh
        Y2ggaXRlbSBpbiBpdHMgYGNvbnRlbnRgIHByb3BlcnR5LiBFYWNoIHZpZXcK
        ICB3aWxsIGhhdmUgaXRzIG93biBgY29udGVudGAgcHJvcGVydHkgc2V0IHRv
        IHRoZSBhcHByb3ByaWF0ZSBpdGVtIGluIHRoZQogIGNvbGxlY3Rpb24uCgog
        IFRoZSBwcm92aWRlZCBibG9jayB3aWxsIGJlIGFwcGxpZWQgYXMgdGhlIHRl
        bXBsYXRlIGZvciBlYWNoIGl0ZW0ncyB2aWV3LgoKICBHaXZlbiBhbiBlbXB0
        eSBgPGJvZHk+YCB0aGUgZm9sbG93aW5nIHRlbXBsYXRlOgoKICBgYGBoYW5k
        bGViYXJzCiAge3sjY29sbGVjdGlvbiBjb250ZW50QmluZGluZz0iQXBwLml0
        ZW1zIn19CiAgICBIaSB7e3ZpZXcuY29udGVudC5uYW1lfX0KICB7ey9jb2xs
        ZWN0aW9ufX0KICBgYGAKCiAgQW5kIHRoZSBmb2xsb3dpbmcgYXBwbGljYXRp
        b24gY29kZQoKICBgYGBqYXZhc2NyaXB0CiAgQXBwID0gRW1iZXIuQXBwbGlj
        YXRpb24uY3JlYXRlKCkKICBBcHAuaXRlbXMgPSBbCiAgICBFbWJlci5PYmpl
        Y3QuY3JlYXRlKHtuYW1lOiAnRGF2ZSd9KSwKICAgIEVtYmVyLk9iamVjdC5j
        cmVhdGUoe25hbWU6ICdNYXJ5J30pLAogICAgRW1iZXIuT2JqZWN0LmNyZWF0
        ZSh7bmFtZTogJ1NhcmEnfSkKICBdCiAgYGBgCgogIFdpbGwgcmVzdWx0IGlu
        IHRoZSBIVE1MIHN0cnVjdHVyZSBiZWxvdwoKICBgYGBodG1sCiAgPGRpdiBj
        bGFzcz0iZW1iZXItdmlldyI+CiAgICA8ZGl2IGNsYXNzPSJlbWJlci12aWV3
        Ij5IaSBEYXZlPC9kaXY+CiAgICA8ZGl2IGNsYXNzPSJlbWJlci12aWV3Ij5I
        aSBNYXJ5PC9kaXY+CiAgICA8ZGl2IGNsYXNzPSJlbWJlci12aWV3Ij5IaSBT
        YXJhPC9kaXY+CiAgPC9kaXY+CiAgYGBgCgogICMjIyBCbG9ja2xlc3MgdXNl
        IGluIGEgY29sbGVjdGlvbgoKICBJZiB5b3UgcHJvdmlkZSBhbiBgaXRlbVZp
        ZXdDbGFzc2Agb3B0aW9uIHRoYXQgaGFzIGl0cyBvd24gYHRlbXBsYXRlYCB5
        b3UgY2FuCiAgb21pdCB0aGUgYmxvY2suCgogIFRoZSBmb2xsb3dpbmcgdGVt
        cGxhdGU6CgogIGBgYGhhbmRsZWJhcnMKICB7e2NvbGxlY3Rpb24gY29udGVu
        dEJpbmRpbmc9IkFwcC5pdGVtcyIgaXRlbVZpZXdDbGFzcz0iQXBwLkFuSXRl
        bVZpZXcifX0KICBgYGAKCiAgQW5kIGFwcGxpY2F0aW9uIGNvZGUKCiAgYGBg
        amF2YXNjcmlwdAogIEFwcCA9IEVtYmVyLkFwcGxpY2F0aW9uLmNyZWF0ZSgp
        OwogIEFwcC5pdGVtcyA9IFsKICAgIEVtYmVyLk9iamVjdC5jcmVhdGUoe25h
        bWU6ICdEYXZlJ30pLAogICAgRW1iZXIuT2JqZWN0LmNyZWF0ZSh7bmFtZTog
        J01hcnknfSksCiAgICBFbWJlci5PYmplY3QuY3JlYXRlKHtuYW1lOiAnU2Fy
        YSd9KQogIF07CgogIEFwcC5Bbkl0ZW1WaWV3ID0gRW1iZXIuVmlldy5leHRl
        bmQoewogICAgdGVtcGxhdGU6IEVtYmVyLkhhbmRsZWJhcnMuY29tcGlsZSgi
        R3JlZXRpbmdzIHt7dmlldy5jb250ZW50Lm5hbWV9fSIpCiAgfSk7CiAgYGBg
        CgogIFdpbGwgcmVzdWx0IGluIHRoZSBIVE1MIHN0cnVjdHVyZSBiZWxvdwoK
        ICBgYGBodG1sCiAgPGRpdiBjbGFzcz0iZW1iZXItdmlldyI+CiAgICA8ZGl2
        IGNsYXNzPSJlbWJlci12aWV3Ij5HcmVldGluZ3MgRGF2ZTwvZGl2PgogICAg
        PGRpdiBjbGFzcz0iZW1iZXItdmlldyI+R3JlZXRpbmdzIE1hcnk8L2Rpdj4K
        ICAgIDxkaXYgY2xhc3M9ImVtYmVyLXZpZXciPkdyZWV0aW5ncyBTYXJhPC9k
        aXY+CiAgPC9kaXY+CiAgYGBgCgogICMjIyBTcGVjaWZ5aW5nIGEgQ29sbGVj
        dGlvblZpZXcgc3ViY2xhc3MKCiAgQnkgZGVmYXVsdCB0aGUgYHt7Y29sbGVj
        dGlvbn19YCBoZWxwZXIgd2lsbCBjcmVhdGUgYW4gaW5zdGFuY2Ugb2YKICBg
        RW1iZXIuQ29sbGVjdGlvblZpZXdgLiBZb3UgY2FuIHN1cHBseSBhIGBFbWJl
        ci5Db2xsZWN0aW9uVmlld2Agc3ViY2xhc3MgdG8KICB0aGUgaGVscGVyIGJ5
        IHBhc3NpbmcgaXQgYXMgdGhlIGZpcnN0IGFyZ3VtZW50OgoKICBgYGBoYW5k
        bGViYXJzCiAge3sjY29sbGVjdGlvbiBBcHAuTXlDdXN0b21Db2xsZWN0aW9u
        Q2xhc3MgY29udGVudEJpbmRpbmc9IkFwcC5pdGVtcyJ9fQogICAgSGkge3t2
        aWV3LmNvbnRlbnQubmFtZX19CiAge3svY29sbGVjdGlvbn19CiAgYGBgCgog
        ICMjIyBGb3J3YXJkZWQgYGl0ZW0uKmAtbmFtZWQgT3B0aW9ucwoKICBBcyB3
        aXRoIHRoZSBge3t2aWV3fX1gLCBoZWxwZXIgb3B0aW9ucyBwYXNzZWQgdG8g
        dGhlIGB7e2NvbGxlY3Rpb259fWAgd2lsbCBiZQogIHNldCBvbiB0aGUgcmVz
        dWx0aW5nIGBFbWJlci5Db2xsZWN0aW9uVmlld2AgYXMgcHJvcGVydGllcy4g
        QWRkaXRpb25hbGx5LAogIG9wdGlvbnMgcHJlZml4ZWQgd2l0aCBgaXRlbWAg
        d2lsbCBiZSBhcHBsaWVkIHRvIHRoZSB2aWV3cyByZW5kZXJlZCBmb3IgZWFj
        aAogIGl0ZW0gKG5vdGUgdGhlIGNhbWVsY2FzaW5nKToKCiAgYGBgaGFuZGxl
        YmFycwogIHt7I2NvbGxlY3Rpb24gY29udGVudEJpbmRpbmc9IkFwcC5pdGVt
        cyIKICAgICAgICAgICAgICAgIGl0ZW1UYWdOYW1lPSJwIgogICAgICAgICAg
        ICAgICAgaXRlbUNsYXNzTmFtZXM9ImdyZWV0aW5nIn19CiAgICBIb3dkeSB7
        e3ZpZXcuY29udGVudC5uYW1lfX0KICB7ey9jb2xsZWN0aW9ufX0KICBgYGAK
        CiAgV2lsbCByZXN1bHQgaW4gdGhlIGZvbGxvd2luZyBIVE1MIHN0cnVjdHVy
        ZToKCiAgYGBgaHRtbAogIDxkaXYgY2xhc3M9ImVtYmVyLXZpZXciPgogICAg
        PHAgY2xhc3M9ImVtYmVyLXZpZXcgZ3JlZXRpbmciPkhvd2R5IERhdmU8L3A+
        CiAgICA8cCBjbGFzcz0iZW1iZXItdmlldyBncmVldGluZyI+SG93ZHkgTWFy
        eTwvcD4KICAgIDxwIGNsYXNzPSJlbWJlci12aWV3IGdyZWV0aW5nIj5Ib3dk
        eSBTYXJhPC9wPgogIDwvZGl2PgogIGBgYAoKICBAbWV0aG9kIGNvbGxlY3Rp
        b24KICBAZm9yIEVtYmVyLkhhbmRsZWJhcnMuaGVscGVycwogIEBwYXJhbSB7
        U3RyaW5nfSBwYXRoCiAgQHBhcmFtIHtIYXNofSBvcHRpb25zCiAgQHJldHVy
        biB7U3RyaW5nfSBIVE1MIHN0cmluZwogIEBkZXByZWNhdGVkIFVzZSBge3tl
        YWNofX1gIGhlbHBlciBpbnN0ZWFkLgoqLwpFbWJlci5IYW5kbGViYXJzLnJl
        Z2lzdGVySGVscGVyKCdjb2xsZWN0aW9uJywgZnVuY3Rpb24gY29sbGVjdGlv
        bkhlbHBlcihwYXRoLCBvcHRpb25zKSB7CiAgRW1iZXIuZGVwcmVjYXRlKCJV
        c2luZyB0aGUge3tjb2xsZWN0aW9ufX0gaGVscGVyIHdpdGhvdXQgc3BlY2lm
        eWluZyBhIGNsYXNzIGhhcyBiZWVuIGRlcHJlY2F0ZWQgYXMgdGhlIHt7ZWFj
        aH19IGhlbHBlciBub3cgc3VwcG9ydHMgdGhlIHNhbWUgZnVuY3Rpb25hbGl0
        eS4iLCBwYXRoICE9PSAnY29sbGVjdGlvbicpOwoKICAvLyBJZiBubyBwYXRo
        IGlzIHByb3ZpZGVkLCB0cmVhdCBwYXRoIHBhcmFtIGFzIG9wdGlvbnMuCiAg
        aWYgKHBhdGggJiYgcGF0aC5kYXRhICYmIHBhdGguZGF0YS5pc1JlbmRlckRh
        dGEpIHsKICAgIG9wdGlvbnMgPSBwYXRoOwogICAgcGF0aCA9IHVuZGVmaW5l
        ZDsKICAgIEVtYmVyLmFzc2VydCgiWW91IGNhbm5vdCBwYXNzIG1vcmUgdGhh
        biBvbmUgYXJndW1lbnQgdG8gdGhlIGNvbGxlY3Rpb24gaGVscGVyIiwgYXJn
        dW1lbnRzLmxlbmd0aCA9PT0gMSk7CiAgfSBlbHNlIHsKICAgIEVtYmVyLmFz
        c2VydCgiWW91IGNhbm5vdCBwYXNzIG1vcmUgdGhhbiBvbmUgYXJndW1lbnQg
        dG8gdGhlIGNvbGxlY3Rpb24gaGVscGVyIiwgYXJndW1lbnRzLmxlbmd0aCA9
        PT0gMik7CiAgfQoKICB2YXIgZm4gPSBvcHRpb25zLmZuOwogIHZhciBkYXRh
        ID0gb3B0aW9ucy5kYXRhOwogIHZhciBpbnZlcnNlID0gb3B0aW9ucy5pbnZl
        cnNlOwogIHZhciB2aWV3ID0gb3B0aW9ucy5kYXRhLnZpZXc7CgoKICB2YXIg
        Y29udHJvbGxlciwgY29udGFpbmVyOwogIC8vIElmIHBhc3NlZCBhIHBhdGgg
        c3RyaW5nLCBjb252ZXJ0IHRoYXQgaW50byBhbiBvYmplY3QuCiAgLy8gT3Ro
        ZXJ3aXNlLCBqdXN0IGRlZmF1bHQgdG8gdGhlIHN0YW5kYXJkIGNsYXNzLgog
        IHZhciBjb2xsZWN0aW9uQ2xhc3M7CiAgaWYgKHBhdGgpIHsKICAgIGNvbnRy
        b2xsZXIgPSBkYXRhLmtleXdvcmRzLmNvbnRyb2xsZXI7CiAgICBjb250YWlu
        ZXIgPSBjb250cm9sbGVyICYmIGNvbnRyb2xsZXIuY29udGFpbmVyOwogICAg
        Y29sbGVjdGlvbkNsYXNzID0gaGFuZGxlYmFyc0dldCh0aGlzLCBwYXRoLCBv
        cHRpb25zKSB8fCBjb250YWluZXIubG9va3VwRmFjdG9yeSgndmlldzonICsg
        cGF0aCk7IAogICAgRW1iZXIuYXNzZXJ0KGZtdCgiJUAgI2NvbGxlY3Rpb246
        IENvdWxkIG5vdCBmaW5kIGNvbGxlY3Rpb24gY2xhc3MgJUAiLCBbZGF0YS52
        aWV3LCBwYXRoXSksICEhY29sbGVjdGlvbkNsYXNzKTsKICB9CiAgZWxzZSB7
        CiAgICBjb2xsZWN0aW9uQ2xhc3MgPSBFbWJlci5Db2xsZWN0aW9uVmlldzsK
        ICB9CgogIHZhciBoYXNoID0gb3B0aW9ucy5oYXNoLCBpdGVtSGFzaCA9IHt9
        LCBtYXRjaDsKCiAgLy8gRXh0cmFjdCBpdGVtIHZpZXcgY2xhc3MgaWYgcHJv
        dmlkZWQgZWxzZSBkZWZhdWx0IHRvIHRoZSBzdGFuZGFyZCBjbGFzcwogIHZh
        ciBjb2xsZWN0aW9uUHJvdG90eXBlID0gY29sbGVjdGlvbkNsYXNzLnByb3Rv
        KCksCiAgICAgIGl0ZW1WaWV3Q2xhc3M7CgogIGlmIChoYXNoLml0ZW1WaWV3
        KSB7CiAgICBjb250cm9sbGVyID0gZGF0YS5rZXl3b3Jkcy5jb250cm9sbGVy
        OwogICAgRW1iZXIuYXNzZXJ0KCdZb3Ugc3BlY2lmaWVkIGFuIGl0ZW1WaWV3
        LCBidXQgdGhlIGN1cnJlbnQgY29udGV4dCBoYXMgbm8gJyArCiAgICAgICAg
        ICAgICAgICAgJ2NvbnRhaW5lciB0byBsb29rIHRoZSBpdGVtVmlldyB1cCBp
        bi4gVGhpcyBwcm9iYWJseSBtZWFucyAnICsKICAgICAgICAgICAgICAgICAn
        dGhhdCB5b3UgY3JlYXRlZCBhIHZpZXcgbWFudWFsbHksIGluc3RlYWQgb2Yg
        dGhyb3VnaCB0aGUgJyArCiAgICAgICAgICAgICAgICAgJ2NvbnRhaW5lci4g
        SW5zdGVhZCwgdXNlIGNvbnRhaW5lci5sb29rdXAoInZpZXc6dmlld05hbWUi
        KSwgJyArCiAgICAgICAgICAgICAgICAgJ3doaWNoIHdpbGwgcHJvcGVybHkg
        aW5zdGFudGlhdGUgeW91ciB2aWV3LicsCiAgICAgICAgICAgICAgICAgY29u
        dHJvbGxlciAmJiBjb250cm9sbGVyLmNvbnRhaW5lcik7CiAgICBjb250YWlu
        ZXIgPSBjb250cm9sbGVyLmNvbnRhaW5lcjsKICAgIGl0ZW1WaWV3Q2xhc3Mg
        PSBjb250YWluZXIubG9va3VwRmFjdG9yeSgndmlldzonICsgaGFzaC5pdGVt
        Vmlldyk7CiAgICBFbWJlci5hc3NlcnQoJ1lvdSBzcGVjaWZpZWQgdGhlIGl0
        ZW1WaWV3ICcgKyBoYXNoLml0ZW1WaWV3ICsgIiwgYnV0IGl0IHdhcyAiICsK
        ICAgICAgICAgICAgICAgICAibm90IGZvdW5kIGF0ICIgKyBjb250YWluZXIu
        ZGVzY3JpYmUoInZpZXc6IiArIGhhc2guaXRlbVZpZXcpICsKICAgICAgICAg
        ICAgICAgICAiIChhbmQgaXQgd2FzIG5vdCByZWdpc3RlcmVkIGluIHRoZSBj
        b250YWluZXIpIiwgISFpdGVtVmlld0NsYXNzKTsKICB9IGVsc2UgaWYgKGhh
        c2guaXRlbVZpZXdDbGFzcykgewogICAgaXRlbVZpZXdDbGFzcyA9IGhhbmRs
        ZWJhcnNHZXQoY29sbGVjdGlvblByb3RvdHlwZSwgaGFzaC5pdGVtVmlld0Ns
        YXNzLCBvcHRpb25zKTsKICB9IGVsc2UgewogICAgaXRlbVZpZXdDbGFzcyA9
        IGNvbGxlY3Rpb25Qcm90b3R5cGUuaXRlbVZpZXdDbGFzczsKICB9CgogIEVt
        YmVyLmFzc2VydChmbXQoIiVAICNjb2xsZWN0aW9uOiBDb3VsZCBub3QgZmlu
        ZCBpdGVtVmlld0NsYXNzICVAIiwgW2RhdGEudmlldywgaXRlbVZpZXdDbGFz
        c10pLCAhIWl0ZW1WaWV3Q2xhc3MpOwoKICBkZWxldGUgaGFzaC5pdGVtVmll
        d0NsYXNzOwogIGRlbGV0ZSBoYXNoLml0ZW1WaWV3OwoKICAvLyBHbyB0aHJv
        dWdoIG9wdGlvbnMgcGFzc2VkIHRvIHRoZSB7e2NvbGxlY3Rpb259fSBoZWxw
        ZXIgYW5kIGV4dHJhY3Qgb3B0aW9ucwogIC8vIHRoYXQgY29uZmlndXJlIGl0
        ZW0gdmlld3MgaW5zdGVhZCBvZiB0aGUgY29sbGVjdGlvbiBpdHNlbGYuCiAg
        Zm9yICh2YXIgcHJvcCBpbiBoYXNoKSB7CiAgICBpZiAoaGFzaC5oYXNPd25Q
        cm9wZXJ0eShwcm9wKSkgewogICAgICBtYXRjaCA9IHByb3AubWF0Y2goL15p
        dGVtKC4pKC4qKSQvKTsKCiAgICAgIGlmIChtYXRjaCAmJiBwcm9wICE9PSAn
        aXRlbUNvbnRyb2xsZXInKSB7CiAgICAgICAgLy8gQ29udmVydCBpdGVtU2hv
        dWxkRm9vIC0+IHNob3VsZEZvbwogICAgICAgIGl0ZW1IYXNoW21hdGNoWzFd
        LnRvTG93ZXJDYXNlKCkgKyBtYXRjaFsyXV0gPSBoYXNoW3Byb3BdOwogICAg
        ICAgIC8vIERlbGV0ZSBmcm9tIGhhc2ggYXMgdGhpcyB3aWxsIGVuZCB1cCBn
        ZXR0aW5nIHBhc3NlZCB0byB0aGUKICAgICAgICAvLyB7e3ZpZXd9fSBoZWxw
        ZXIgbWV0aG9kLgogICAgICAgIGRlbGV0ZSBoYXNoW3Byb3BdOwogICAgICB9
        CiAgICB9CiAgfQoKICBpZiAoZm4pIHsKICAgIGl0ZW1IYXNoLnRlbXBsYXRl
        ID0gZm47CiAgICBkZWxldGUgb3B0aW9ucy5mbjsKICB9CgogIHZhciBlbXB0
        eVZpZXdDbGFzczsKICBpZiAoaW52ZXJzZSAmJiBpbnZlcnNlICE9PSBFbWJl
        ci5IYW5kbGViYXJzLlZNLm5vb3ApIHsKICAgIGVtcHR5Vmlld0NsYXNzID0g
        Z2V0KGNvbGxlY3Rpb25Qcm90b3R5cGUsICdlbXB0eVZpZXdDbGFzcycpOwog
        ICAgZW1wdHlWaWV3Q2xhc3MgPSBlbXB0eVZpZXdDbGFzcy5leHRlbmQoewog
        ICAgICAgICAgdGVtcGxhdGU6IGludmVyc2UsCiAgICAgICAgICB0YWdOYW1l
        OiBpdGVtSGFzaC50YWdOYW1lCiAgICB9KTsKICB9IGVsc2UgaWYgKGhhc2gu
        ZW1wdHlWaWV3Q2xhc3MpIHsKICAgIGVtcHR5Vmlld0NsYXNzID0gaGFuZGxl
        YmFyc0dldCh0aGlzLCBoYXNoLmVtcHR5Vmlld0NsYXNzLCBvcHRpb25zKTsK
        ICB9CiAgaWYgKGVtcHR5Vmlld0NsYXNzKSB7IGhhc2guZW1wdHlWaWV3ID0g
        ZW1wdHlWaWV3Q2xhc3M7IH0KCiAgaWYgKCFoYXNoLmtleXdvcmQpIHsKICAg
        IGl0ZW1IYXNoLl9jb250ZXh0ID0gRW1iZXIuY29tcHV0ZWQuYWxpYXMoJ2Nv
        bnRlbnQnKTsKICB9CgogIHZhciB2aWV3T3B0aW9ucyA9IEVtYmVyLkhhbmRs
        ZWJhcnMuVmlld0hlbHBlci5wcm9wZXJ0aWVzRnJvbUhUTUxPcHRpb25zKHsg
        ZGF0YTogZGF0YSwgaGFzaDogaXRlbUhhc2ggfSwgdGhpcyk7CiAgaGFzaC5p
        dGVtVmlld0NsYXNzID0gaXRlbVZpZXdDbGFzcy5leHRlbmQodmlld09wdGlv
        bnMpOwoKICByZXR1cm4gRW1iZXIuSGFuZGxlYmFycy5oZWxwZXJzLnZpZXcu
        Y2FsbCh0aGlzLCBjb2xsZWN0aW9uQ2xhc3MsIG9wdGlvbnMpOwp9KTsKCgp9
        KSgpOwoKCgooZnVuY3Rpb24oKSB7Ci8qZ2xvYmFscyBIYW5kbGViYXJzICov
        Ci8qKgpAbW9kdWxlIGVtYmVyCkBzdWJtb2R1bGUgZW1iZXItaGFuZGxlYmFy
        cwoqLwoKdmFyIGhhbmRsZWJhcnNHZXQgPSBFbWJlci5IYW5kbGViYXJzLmdl
        dDsKCi8qKgogIGB1bmJvdW5kYCBhbGxvd3MgeW91IHRvIG91dHB1dCBhIHBy
        b3BlcnR5IHdpdGhvdXQgYmluZGluZy4gKkltcG9ydGFudDoqIFRoZQogIG91
        dHB1dCB3aWxsIG5vdCBiZSB1cGRhdGVkIGlmIHRoZSBwcm9wZXJ0eSBjaGFu
        Z2VzLiBVc2Ugd2l0aCBjYXV0aW9uLgoKICBgYGBoYW5kbGViYXJzCiAgPGRp
        dj57e3VuYm91bmQgc29tZVByb3BlcnR5VGhhdERvZXNudENoYW5nZX19PC9k
        aXY+CiAgYGBgCgogIGB1bmJvdW5kYCBjYW4gYWxzbyBiZSB1c2VkIGluIGNv
        bmp1bmN0aW9uIHdpdGggYSBib3VuZCBoZWxwZXIgdG8KICByZW5kZXIgaXQg
        aW4gaXRzIHVuYm91bmQgZm9ybToKCiAgYGBgaGFuZGxlYmFycwogIDxkaXY+
        e3t1bmJvdW5kIGhlbHBlck5hbWUgc29tZVByb3BlcnR5VGhhdERvZXNudENo
        YW5nZX19PC9kaXY+CiAgYGBgCgogIEBtZXRob2QgdW5ib3VuZAogIEBmb3Ig
        RW1iZXIuSGFuZGxlYmFycy5oZWxwZXJzCiAgQHBhcmFtIHtTdHJpbmd9IHBy
        b3BlcnR5CiAgQHJldHVybiB7U3RyaW5nfSBIVE1MIHN0cmluZwoqLwpFbWJl
        ci5IYW5kbGViYXJzLnJlZ2lzdGVySGVscGVyKCd1bmJvdW5kJywgZnVuY3Rp
        b24gdW5ib3VuZEhlbHBlcihwcm9wZXJ0eSwgZm4pIHsKICB2YXIgb3B0aW9u
        cyA9IGFyZ3VtZW50c1thcmd1bWVudHMubGVuZ3RoIC0gMV0sIGhlbHBlciwg
        Y29udGV4dCwgb3V0OwoKICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDIpIHsK
        ICAgIC8vIFVuYm91bmQgaGVscGVyIGNhbGwuCiAgICBvcHRpb25zLmRhdGEu
        aXNVbmJvdW5kID0gdHJ1ZTsKICAgIGhlbHBlciA9IEVtYmVyLkhhbmRsZWJh
        cnMuaGVscGVyc1thcmd1bWVudHNbMF1dIHx8IEVtYmVyLkhhbmRsZWJhcnMu
        aGVscGVycy5oZWxwZXJNaXNzaW5nOwogICAgb3V0ID0gaGVscGVyLmFwcGx5
        KHRoaXMsIEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywg
        MSkpOwogICAgZGVsZXRlIG9wdGlvbnMuZGF0YS5pc1VuYm91bmQ7CiAgICBy
        ZXR1cm4gb3V0OwogIH0KCiAgY29udGV4dCA9IChmbi5jb250ZXh0cyAmJiBm
        bi5jb250ZXh0cy5sZW5ndGgpID8gZm4uY29udGV4dHNbMF0gOiB0aGlzOwog
        IHJldHVybiBoYW5kbGViYXJzR2V0KGNvbnRleHQsIHByb3BlcnR5LCBmbik7
        Cn0pOwoKfSkoKTsKCgoKKGZ1bmN0aW9uKCkgewovKmpzaGludCBkZWJ1Zzp0
        cnVlKi8KLyoqCkBtb2R1bGUgZW1iZXIKQHN1Ym1vZHVsZSBlbWJlci1oYW5k
        bGViYXJzCiovCgp2YXIgZ2V0ID0gRW1iZXIuZ2V0LCBoYW5kbGViYXJzR2V0
        ID0gRW1iZXIuSGFuZGxlYmFycy5nZXQsIG5vcm1hbGl6ZVBhdGggPSBFbWJl
        ci5IYW5kbGViYXJzLm5vcm1hbGl6ZVBhdGg7CgovKioKICBgbG9nYCBhbGxv
        d3MgeW91IHRvIG91dHB1dCB0aGUgdmFsdWUgb2YgYSB2YXJpYWJsZSBpbiB0
        aGUgY3VycmVudCByZW5kZXJpbmcKICBjb250ZXh0LgoKICBgYGBoYW5kbGVi
        YXJzCiAge3tsb2cgbXlWYXJpYWJsZX19CiAgYGBgCgogIEBtZXRob2QgbG9n
        CiAgQGZvciBFbWJlci5IYW5kbGViYXJzLmhlbHBlcnMKICBAcGFyYW0ge1N0
        cmluZ30gcHJvcGVydHkKKi8KRW1iZXIuSGFuZGxlYmFycy5yZWdpc3Rlckhl
        bHBlcignbG9nJywgZnVuY3Rpb24gbG9nSGVscGVyKHByb3BlcnR5LCBvcHRp
        b25zKSB7CiAgdmFyIGNvbnRleHQgPSAob3B0aW9ucy5jb250ZXh0cyAmJiBv
        cHRpb25zLmNvbnRleHRzLmxlbmd0aCkgPyBvcHRpb25zLmNvbnRleHRzWzBd
        IDogdGhpcywKICAgICAgbm9ybWFsaXplZCA9IG5vcm1hbGl6ZVBhdGgoY29u
        dGV4dCwgcHJvcGVydHksIG9wdGlvbnMuZGF0YSksCiAgICAgIHBhdGhSb290
        ID0gbm9ybWFsaXplZC5yb290LAogICAgICBwYXRoID0gbm9ybWFsaXplZC5w
        YXRoLAogICAgICB2YWx1ZSA9IChwYXRoID09PSAndGhpcycpID8gcGF0aFJv
        b3QgOiBoYW5kbGViYXJzR2V0KHBhdGhSb290LCBwYXRoLCBvcHRpb25zKTsK
        ICBFbWJlci5Mb2dnZXIubG9nKHZhbHVlKTsKfSk7CgovKioKICBFeGVjdXRl
        IHRoZSBgZGVidWdnZXJgIHN0YXRlbWVudCBpbiB0aGUgY3VycmVudCBjb250
        ZXh0LgoKICBgYGBoYW5kbGViYXJzCiAge3tkZWJ1Z2dlcn19CiAgYGBgCgog
        IEJlZm9yZSBpbnZva2luZyB0aGUgYGRlYnVnZ2VyYCBzdGF0ZW1lbnQsIHRo
        ZXJlCiAgYXJlIGEgZmV3IGhlbHBmdWwgdmFyaWFibGVzIGRlZmluZWQgaW4g
        dGhlCiAgYm9keSBvZiB0aGlzIGhlbHBlciB0aGF0IHlvdSBjYW4gaW5zcGVj
        dCB3aGlsZQogIGRlYnVnZ2luZyB0aGF0IGRlc2NyaWJlIGhvdyBhbmQgd2hl
        cmUgdGhpcwogIGhlbHBlciB3YXMgaW52b2tlZDoKCiAgLSB0ZW1wbGF0ZUNv
        bnRleHQ6IHRoaXMgaXMgbW9zdCBsaWtlbHkgYSBjb250cm9sbGVyCiAgICBm
        cm9tIHdoaWNoIHRoaXMgdGVtcGxhdGUgbG9va3MgdXAgLyBkaXNwbGF5cyBw
        cm9wZXJ0aWVzCiAgLSB0eXBlT2ZUZW1wbGF0ZUNvbnRleHQ6IGEgc3RyaW5n
        IGRlc2NyaXB0aW9uIG9mCiAgICB3aGF0IHRoZSB0ZW1wbGF0ZUNvbnRleHQg
        aXMKCiAgRm9yIGV4YW1wbGUsIGlmIHlvdSdyZSB3b25kZXJpbmcgd2h5IGEg
        dmFsdWUgYHt7Zm9vfX1gCiAgaXNuJ3QgcmVuZGVyaW5nIGFzIGV4cGVjdGVk
        IHdpdGhpbiBhIHRlbXBsYXRlLCB5b3UKICBjb3VsZCBwbGFjZSBhIGB7e2Rl
        YnVnZ2VyfX1gIHN0YXRlbWVudCwgYW5kIHdoZW4KICB0aGUgYGRlYnVnZ2Vy
        O2AgYnJlYWtwb2ludCBpcyBoaXQsIHlvdSBjYW4gaW5zcGVjdAogIGB0ZW1w
        bGF0ZUNvbnRleHRgLCBkZXRlcm1pbmUgaWYgaXQncyB0aGUgb2JqZWN0IHlv
        dQogIGV4cGVjdCwgYW5kL29yIGV2YWx1YXRlIGV4cHJlc3Npb25zIGluIHRo
        ZSBjb25zb2xlCiAgdG8gcGVyZm9ybSBwcm9wZXJ0eSBsb29rdXBzIG9uIHRo
        ZSBgdGVtcGxhdGVDb250ZXh0YDoKCiAgYGBgCiAgICA+IHRlbXBsYXRlQ29u
        dGV4dC5nZXQoJ2ZvbycpIC8vIC0+ICI8dmFsdWUgb2Yge3tmb299fT4iCiAg
        YGBgCgogIEBtZXRob2QgZGVidWdnZXIKICBAZm9yIEVtYmVyLkhhbmRsZWJh
        cnMuaGVscGVycwogIEBwYXJhbSB7U3RyaW5nfSBwcm9wZXJ0eQoqLwpFbWJl
        ci5IYW5kbGViYXJzLnJlZ2lzdGVySGVscGVyKCdkZWJ1Z2dlcicsIGZ1bmN0
        aW9uIGRlYnVnZ2VySGVscGVyKG9wdGlvbnMpIHsKCiAgLy8gVGhlc2UgYXJl
        IGhlbHBmdWwgdmFsdWVzIHlvdSBjYW4gaW5zcGVjdCB3aGlsZSBkZWJ1Z2dp
        bmcuCiAgdmFyIHRlbXBsYXRlQ29udGV4dCA9IHRoaXM7CiAgdmFyIHR5cGVP
        ZlRlbXBsYXRlQ29udGV4dCA9IEVtYmVyLmluc3BlY3QodGVtcGxhdGVDb250
        ZXh0KTsKCiAgZGVidWdnZXI7Cn0pOwoKCgp9KSgpOwoKCgooZnVuY3Rpb24o
        KSB7Ci8qKgpAbW9kdWxlIGVtYmVyCkBzdWJtb2R1bGUgZW1iZXItaGFuZGxl
        YmFycwoqLwoKdmFyIGdldCA9IEVtYmVyLmdldCwgc2V0ID0gRW1iZXIuc2V0
        Owp2YXIgZm10ID0gRW1iZXIuU3RyaW5nLmZtdDsKCkVtYmVyLkhhbmRsZWJh
        cnMuRWFjaFZpZXcgPSBFbWJlci5Db2xsZWN0aW9uVmlldy5leHRlbmQoRW1i
        ZXIuX01ldGFtb3JwaCwgewogIGluaXQ6IGZ1bmN0aW9uKCkgewogICAgdmFy
        IGl0ZW1Db250cm9sbGVyID0gZ2V0KHRoaXMsICdpdGVtQ29udHJvbGxlcicp
        OwogICAgdmFyIGJpbmRpbmc7CgogICAgaWYgKGl0ZW1Db250cm9sbGVyKSB7
        CiAgICAgIHZhciBjb250cm9sbGVyID0gZ2V0KHRoaXMsICdjb250cm9sbGVy
        LmNvbnRhaW5lcicpLmxvb2t1cEZhY3RvcnkoJ2NvbnRyb2xsZXI6YXJyYXkn
        KS5jcmVhdGUoewogICAgICAgIF9pc1ZpcnR1YWw6IHRydWUsCiAgICAgICAg
        cGFyZW50Q29udHJvbGxlcjogZ2V0KHRoaXMsICdjb250cm9sbGVyJyksCiAg
        ICAgICAgaXRlbUNvbnRyb2xsZXI6IGl0ZW1Db250cm9sbGVyLAogICAgICAg
        IHRhcmdldDogZ2V0KHRoaXMsICdjb250cm9sbGVyJyksCiAgICAgICAgX2Vh
        Y2hWaWV3OiB0aGlzCiAgICAgIH0pOwoKICAgICAgdGhpcy5kaXNhYmxlQ29u
        dGVudE9ic2VydmVycyhmdW5jdGlvbigpIHsKICAgICAgICBzZXQodGhpcywg
        J2NvbnRlbnQnLCBjb250cm9sbGVyKTsKICAgICAgICBiaW5kaW5nID0gbmV3
        IEVtYmVyLkJpbmRpbmcoJ2NvbnRlbnQnLCAnX2VhY2hWaWV3LmRhdGFTb3Vy
        Y2UnKS5vbmVXYXkoKTsKICAgICAgICBiaW5kaW5nLmNvbm5lY3QoY29udHJv
        bGxlcik7CiAgICAgIH0pOwoKICAgICAgc2V0KHRoaXMsICdfYXJyYXlDb250
        cm9sbGVyJywgY29udHJvbGxlcik7CiAgICB9IGVsc2UgewogICAgICB0aGlz
        LmRpc2FibGVDb250ZW50T2JzZXJ2ZXJzKGZ1bmN0aW9uKCkgewogICAgICAg
        IGJpbmRpbmcgPSBuZXcgRW1iZXIuQmluZGluZygnY29udGVudCcsICdkYXRh
        U291cmNlJykub25lV2F5KCk7CiAgICAgICAgYmluZGluZy5jb25uZWN0KHRo
        aXMpOwogICAgICB9KTsKICAgIH0KCiAgICByZXR1cm4gdGhpcy5fc3VwZXIo
        KTsKICB9LAoKICBfYXNzZXJ0QXJyYXlMaWtlOiBmdW5jdGlvbihjb250ZW50
        KSB7CiAgICBFbWJlci5hc3NlcnQoZm10KCJUaGUgdmFsdWUgdGhhdCAjZWFj
        aCBsb29wcyBvdmVyIG11c3QgYmUgYW4gQXJyYXkuIFlvdSAiICsKICAgICAg
        ICAgICAgICAgICAgICAgInBhc3NlZCAlQCwgYnV0IGl0IHNob3VsZCBoYXZl
        IGJlZW4gYW4gQXJyYXlDb250cm9sbGVyIiwKICAgICAgICAgICAgICAgICAg
        ICAgW2NvbnRlbnQuY29uc3RydWN0b3JdKSwKICAgICAgICAgICAgICAgICAg
        ICAgIUVtYmVyLkNvbnRyb2xsZXJNaXhpbi5kZXRlY3QoY29udGVudCkgfHwK
        ICAgICAgICAgICAgICAgICAgICAgICAoY29udGVudCAmJiBjb250ZW50Lmlz
        R2VuZXJhdGVkKSB8fAogICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQg
        aW5zdGFuY2VvZiBFbWJlci5BcnJheUNvbnRyb2xsZXIpOwogICAgRW1iZXIu
        YXNzZXJ0KGZtdCgiVGhlIHZhbHVlIHRoYXQgI2VhY2ggbG9vcHMgb3ZlciBt
        dXN0IGJlIGFuIEFycmF5LiBZb3UgcGFzc2VkICVAIiwgWyhFbWJlci5Db250
        cm9sbGVyTWl4aW4uZGV0ZWN0KGNvbnRlbnQpICYmIGNvbnRlbnQuZ2V0KCdt
        b2RlbCcpICE9PSB1bmRlZmluZWQpID8gZm10KCInJUAnICh3cmFwcGVkIGlu
        ICVAKSIsIFtjb250ZW50LmdldCgnbW9kZWwnKSwgY29udGVudF0pIDogY29u
        dGVudF0pLCBFbWJlci5BcnJheS5kZXRlY3QoY29udGVudCkpOwogIH0sCgog
        IGRpc2FibGVDb250ZW50T2JzZXJ2ZXJzOiBmdW5jdGlvbihjYWxsYmFjaykg
        ewogICAgRW1iZXIucmVtb3ZlQmVmb3JlT2JzZXJ2ZXIodGhpcywgJ2NvbnRl
        bnQnLCBudWxsLCAnX2NvbnRlbnRXaWxsQ2hhbmdlJyk7CiAgICBFbWJlci5y
        ZW1vdmVPYnNlcnZlcih0aGlzLCAnY29udGVudCcsIG51bGwsICdfY29udGVu
        dERpZENoYW5nZScpOwoKICAgIGNhbGxiYWNrLmNhbGwodGhpcyk7CgogICAg
        RW1iZXIuYWRkQmVmb3JlT2JzZXJ2ZXIodGhpcywgJ2NvbnRlbnQnLCBudWxs
        LCAnX2NvbnRlbnRXaWxsQ2hhbmdlJyk7CiAgICBFbWJlci5hZGRPYnNlcnZl
        cih0aGlzLCAnY29udGVudCcsIG51bGwsICdfY29udGVudERpZENoYW5nZScp
        OwogIH0sCgogIGl0ZW1WaWV3Q2xhc3M6IEVtYmVyLl9NZXRhbW9ycGhWaWV3
        LAogIGVtcHR5Vmlld0NsYXNzOiBFbWJlci5fTWV0YW1vcnBoVmlldywKCiAg
        Y3JlYXRlQ2hpbGRWaWV3OiBmdW5jdGlvbih2aWV3LCBhdHRycykgewogICAg
        dmlldyA9IHRoaXMuX3N1cGVyKHZpZXcsIGF0dHJzKTsKCiAgICAvLyBBdCB0
        aGUgbW9tZW50LCBpZiBhIGNvbnRhaW5lciB2aWV3IHN1YmNsYXNzIHdhbnRz
        CiAgICAvLyB0byBpbnNlcnQga2V5d29yZHMsIGl0IGlzIHJlc3BvbnNpYmxl
        IGZvciBjbG9uaW5nCiAgICAvLyB0aGUga2V5d29yZHMgaGFzaC4gVGhpcyB3
        aWxsIGJlIGZpeGVkIG1vbWVudGFyaWx5LgogICAgdmFyIGtleXdvcmQgPSBn
        ZXQodGhpcywgJ2tleXdvcmQnKTsKICAgIHZhciBjb250ZW50ID0gZ2V0KHZp
        ZXcsICdjb250ZW50Jyk7CgogICAgaWYgKGtleXdvcmQpIHsKICAgICAgdmFy
        IGRhdGEgPSBnZXQodmlldywgJ3RlbXBsYXRlRGF0YScpOwoKICAgICAgZGF0
        YSA9IEVtYmVyLmNvcHkoZGF0YSk7CiAgICAgIGRhdGEua2V5d29yZHMgPSB2
        aWV3LmNsb25lS2V5d29yZHMoKTsKICAgICAgc2V0KHZpZXcsICd0ZW1wbGF0
        ZURhdGEnLCBkYXRhKTsKCiAgICAgIC8vIEluIHRoaXMgY2FzZSwgd2UgZG8g
        bm90IGJpbmQsIGJlY2F1c2UgdGhlIGBjb250ZW50YCBvZgogICAgICAvLyBh
        ICNlYWNoIGl0ZW0gY2Fubm90IGNoYW5nZS4KICAgICAgZGF0YS5rZXl3b3Jk
        c1trZXl3b3JkXSA9IGNvbnRlbnQ7CiAgICB9CgogICAgLy8gSWYge3sjZWFj
        aH19IGlzIGxvb3Bpbmcgb3ZlciBhbiBhcnJheSBvZiBjb250cm9sbGVycywK
        ICAgIC8vIHBvaW50IGVhY2ggY2hpbGQgdmlldyBhdCB0aGVpciByZXNwZWN0
        aXZlIGNvbnRyb2xsZXIuCiAgICBpZiAoY29udGVudCAmJiBnZXQoY29udGVu
        dCwgJ2lzQ29udHJvbGxlcicpKSB7CiAgICAgIHNldCh2aWV3LCAnY29udHJv
        bGxlcicsIGNvbnRlbnQpOwogICAgfQoKICAgIHJldHVybiB2aWV3OwogIH0s
        CgogIGRlc3Ryb3k6IGZ1bmN0aW9uKCkgewogICAgaWYgKCF0aGlzLl9zdXBl
        cigpKSB7IHJldHVybjsgfQoKICAgIHZhciBhcnJheUNvbnRyb2xsZXIgPSBn
        ZXQodGhpcywgJ19hcnJheUNvbnRyb2xsZXInKTsKCiAgICBpZiAoYXJyYXlD
        b250cm9sbGVyKSB7CiAgICAgIGFycmF5Q29udHJvbGxlci5kZXN0cm95KCk7
        CiAgICB9CgogICAgcmV0dXJuIHRoaXM7CiAgfQp9KTsKCnZhciBHcm91cGVk
        RWFjaCA9IEVtYmVyLkhhbmRsZWJhcnMuR3JvdXBlZEVhY2ggPSBmdW5jdGlv
        bihjb250ZXh0LCBwYXRoLCBvcHRpb25zKSB7CiAgdmFyIHNlbGYgPSB0aGlz
        LAogICAgICBub3JtYWxpemVkID0gRW1iZXIuSGFuZGxlYmFycy5ub3JtYWxp
        emVQYXRoKGNvbnRleHQsIHBhdGgsIG9wdGlvbnMuZGF0YSk7CgogIHRoaXMu
        Y29udGV4dCA9IGNvbnRleHQ7CiAgdGhpcy5wYXRoID0gcGF0aDsKICB0aGlz
        Lm9wdGlvbnMgPSBvcHRpb25zOwogIHRoaXMudGVtcGxhdGUgPSBvcHRpb25z
        LmZuOwogIHRoaXMuY29udGFpbmluZ1ZpZXcgPSBvcHRpb25zLmRhdGEudmll
        dzsKICB0aGlzLm5vcm1hbGl6ZWRSb290ID0gbm9ybWFsaXplZC5yb290Owog
        IHRoaXMubm9ybWFsaXplZFBhdGggPSBub3JtYWxpemVkLnBhdGg7CiAgdGhp
        cy5jb250ZW50ID0gdGhpcy5sb29rdXBDb250ZW50KCk7CgogIHRoaXMuYWRk
        Q29udGVudE9ic2VydmVycygpOwogIHRoaXMuYWRkQXJyYXlPYnNlcnZlcnMo
        KTsKCiAgdGhpcy5jb250YWluaW5nVmlldy5vbignd2lsbENsZWFyUmVuZGVy
        JywgZnVuY3Rpb24oKSB7CiAgICBzZWxmLmRlc3Ryb3koKTsKICB9KTsKfTsK
        Ckdyb3VwZWRFYWNoLnByb3RvdHlwZSA9IHsKICBjb250ZW50V2lsbENoYW5n
        ZTogZnVuY3Rpb24oKSB7CiAgICB0aGlzLnJlbW92ZUFycmF5T2JzZXJ2ZXJz
        KCk7CiAgfSwKCiAgY29udGVudERpZENoYW5nZTogZnVuY3Rpb24oKSB7CiAg
        ICB0aGlzLmNvbnRlbnQgPSB0aGlzLmxvb2t1cENvbnRlbnQoKTsKICAgIHRo
        aXMuYWRkQXJyYXlPYnNlcnZlcnMoKTsKICAgIHRoaXMucmVyZW5kZXJDb250
        YWluaW5nVmlldygpOwogIH0sCgogIGNvbnRlbnRBcnJheVdpbGxDaGFuZ2U6
        IEVtYmVyLkssCgogIGNvbnRlbnRBcnJheURpZENoYW5nZTogZnVuY3Rpb24o
        KSB7CiAgICB0aGlzLnJlcmVuZGVyQ29udGFpbmluZ1ZpZXcoKTsKICB9LAoK
        ICBsb29rdXBDb250ZW50OiBmdW5jdGlvbigpIHsKICAgIHJldHVybiBFbWJl
        ci5IYW5kbGViYXJzLmdldCh0aGlzLm5vcm1hbGl6ZWRSb290LCB0aGlzLm5v
        cm1hbGl6ZWRQYXRoLCB0aGlzLm9wdGlvbnMpOwogIH0sCgogIGFkZEFycmF5
        T2JzZXJ2ZXJzOiBmdW5jdGlvbigpIHsKICAgIGlmICghdGhpcy5jb250ZW50
        KSB7IHJldHVybjsgfQoKICAgIHRoaXMuY29udGVudC5hZGRBcnJheU9ic2Vy
        dmVyKHRoaXMsIHsKICAgICAgd2lsbENoYW5nZTogJ2NvbnRlbnRBcnJheVdp
        bGxDaGFuZ2UnLAogICAgICBkaWRDaGFuZ2U6ICdjb250ZW50QXJyYXlEaWRD
        aGFuZ2UnCiAgICB9KTsKICB9LAoKICByZW1vdmVBcnJheU9ic2VydmVyczog
        ZnVuY3Rpb24oKSB7CiAgICBpZiAoIXRoaXMuY29udGVudCkgeyByZXR1cm47
        IH0KCiAgICB0aGlzLmNvbnRlbnQucmVtb3ZlQXJyYXlPYnNlcnZlcih0aGlz
        LCB7CiAgICAgIHdpbGxDaGFuZ2U6ICdjb250ZW50QXJyYXlXaWxsQ2hhbmdl
        JywKICAgICAgZGlkQ2hhbmdlOiAnY29udGVudEFycmF5RGlkQ2hhbmdlJwog
        ICAgfSk7CiAgfSwKCiAgYWRkQ29udGVudE9ic2VydmVyczogZnVuY3Rpb24o
        KSB7CiAgICBFbWJlci5hZGRCZWZvcmVPYnNlcnZlcih0aGlzLm5vcm1hbGl6
        ZWRSb290LCB0aGlzLm5vcm1hbGl6ZWRQYXRoLCB0aGlzLCB0aGlzLmNvbnRl
        bnRXaWxsQ2hhbmdlKTsKICAgIEVtYmVyLmFkZE9ic2VydmVyKHRoaXMubm9y
        bWFsaXplZFJvb3QsIHRoaXMubm9ybWFsaXplZFBhdGgsIHRoaXMsIHRoaXMu
        Y29udGVudERpZENoYW5nZSk7CiAgfSwKCiAgcmVtb3ZlQ29udGVudE9ic2Vy
        dmVyczogZnVuY3Rpb24oKSB7CiAgICBFbWJlci5yZW1vdmVCZWZvcmVPYnNl
        cnZlcih0aGlzLm5vcm1hbGl6ZWRSb290LCB0aGlzLm5vcm1hbGl6ZWRQYXRo
        LCB0aGlzLmNvbnRlbnRXaWxsQ2hhbmdlKTsKICAgIEVtYmVyLnJlbW92ZU9i
        c2VydmVyKHRoaXMubm9ybWFsaXplZFJvb3QsIHRoaXMubm9ybWFsaXplZFBh
        dGgsIHRoaXMuY29udGVudERpZENoYW5nZSk7CiAgfSwKCiAgcmVuZGVyOiBm
        dW5jdGlvbigpIHsKICAgIGlmICghdGhpcy5jb250ZW50KSB7IHJldHVybjsg
        fQoKICAgIHZhciBjb250ZW50ID0gdGhpcy5jb250ZW50LAogICAgICAgIGNv
        bnRlbnRMZW5ndGggPSBnZXQoY29udGVudCwgJ2xlbmd0aCcpLAogICAgICAg
        IGRhdGEgPSB0aGlzLm9wdGlvbnMuZGF0YSwKICAgICAgICB0ZW1wbGF0ZSA9
        IHRoaXMudGVtcGxhdGU7CgogICAgZGF0YS5pbnNpZGVFYWNoID0gdHJ1ZTsK
        ICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY29udGVudExlbmd0aDsgaSsrKSB7
        CiAgICAgIHRlbXBsYXRlKGNvbnRlbnQub2JqZWN0QXQoaSksIHsgZGF0YTog
        ZGF0YSB9KTsKICAgIH0KICB9LAoKICByZXJlbmRlckNvbnRhaW5pbmdWaWV3
        OiBmdW5jdGlvbigpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIEVtYmVy
        LnJ1bi5zY2hlZHVsZU9uY2UoJ3JlbmRlcicsIHRoaXMsIGZ1bmN0aW9uKCkg
        ewogICAgICAvLyBJdCdzIHBvc3NpYmxlIGl0J3MgYmVlbiBkZXN0cm95ZWQg
        YWZ0ZXIgd2UgZW5xdWV1ZWQgYSByZS1yZW5kZXIgY2FsbC4KICAgICAgaWYg
        KCFzZWxmLmRlc3Ryb3llZCkgewogICAgICAgIHNlbGYuY29udGFpbmluZ1Zp
        ZXcucmVyZW5kZXIoKTsKICAgICAgfQogICAgfSk7CiAgfSwKCiAgZGVzdHJv
        eTogZnVuY3Rpb24oKSB7CiAgICB0aGlzLnJlbW92ZUNvbnRlbnRPYnNlcnZl
        cnMoKTsKICAgIGlmICh0aGlzLmNvbnRlbnQpIHsKICAgICAgdGhpcy5yZW1v
        dmVBcnJheU9ic2VydmVycygpOwogICAgfQogICAgdGhpcy5kZXN0cm95ZWQg
        PSB0cnVlOwogIH0KfTsKCi8qKgogIFRoZSBge3sjZWFjaH19YCBoZWxwZXIg
        bG9vcHMgb3ZlciBlbGVtZW50cyBpbiBhIGNvbGxlY3Rpb24sIHJlbmRlcmlu
        ZyBpdHMKICBibG9jayBvbmNlIGZvciBlYWNoIGl0ZW0uIEl0IGlzIGFuIGV4
        dGVuc2lvbiBvZiB0aGUgYmFzZSBIYW5kbGViYXJzIGB7eyNlYWNofX1gCiAg
        aGVscGVyOgoKICBgYGBqYXZhc2NyaXB0CiAgRGV2ZWxvcGVycyA9IFt7bmFt
        ZTogJ1llaHVkYSd9LHtuYW1lOiAnVG9tJ30sIHtuYW1lOiAnUGF1bCd9XTsK
        ICBgYGAKCiAgYGBgaGFuZGxlYmFycwogIHt7I2VhY2ggRGV2ZWxvcGVyc319
        CiAgICB7e25hbWV9fQogIHt7L2VhY2h9fQogIGBgYAoKICBge3tlYWNofX1g
        IHN1cHBvcnRzIGFuIGFsdGVybmF0aXZlIHN5bnRheCB3aXRoIGVsZW1lbnQg
        bmFtaW5nOgoKICBgYGBoYW5kbGViYXJzCiAge3sjZWFjaCBwZXJzb24gaW4g
        RGV2ZWxvcGVyc319CiAgICB7e3BlcnNvbi5uYW1lfX0KICB7ey9lYWNofX0K
        ICBgYGAKCiAgV2hlbiBsb29waW5nIG92ZXIgb2JqZWN0cyB0aGF0IGRvIG5v
        dCBoYXZlIHByb3BlcnRpZXMsIGB7e3RoaXN9fWAgY2FuIGJlIHVzZWQKICB0
        byByZW5kZXIgdGhlIG9iamVjdDoKCiAgYGBgamF2YXNjcmlwdAogIERldmVs
        b3Blck5hbWVzID0gWydZZWh1ZGEnLCAnVG9tJywgJ1BhdWwnXQogIGBgYAoK
        ICBgYGBoYW5kbGViYXJzCiAge3sjZWFjaCBEZXZlbG9wZXJOYW1lc319CiAg
        ICB7e3RoaXN9fQogIHt7L2VhY2h9fQogIGBgYAogICMjIyB7e2Vsc2V9fSBj
        b25kaXRpb24KICBge3sjZWFjaH19YCBjYW4gaGF2ZSBhIG1hdGNoaW5nIGB7
        e2Vsc2V9fWAuIFRoZSBjb250ZW50cyBvZiB0aGlzIGJsb2NrIHdpbGwgcmVu
        ZGVyCiAgaWYgdGhlIGNvbGxlY3Rpb24gaXMgZW1wdHkuCgogIGBgYAogIHt7
        I2VhY2ggcGVyc29uIGluIERldmVsb3BlcnN9fQogICAge3twZXJzb24ubmFt
        ZX19CiAge3tlbHNlfX0KICAgIDxwPlNvcnJ5LCBub2JvZHkgaXMgYXZhaWxh
        YmxlIGZvciB0aGlzIHRhc2suPC9wPgogIHt7L2VhY2h9fQogIGBgYAogICMj
        IyBTcGVjaWZ5aW5nIGEgVmlldyBjbGFzcyBmb3IgaXRlbXMKICBJZiB5b3Ug
        cHJvdmlkZSBhbiBgaXRlbVZpZXdDbGFzc2Agb3B0aW9uIHRoYXQgcmVmZXJl
        bmNlcyBhIHZpZXcgY2xhc3MKICB3aXRoIGl0cyBvd24gYHRlbXBsYXRlYCB5
        b3UgY2FuIG9taXQgdGhlIGJsb2NrLgoKICBUaGUgZm9sbG93aW5nIHRlbXBs
        YXRlOgoKICBgYGBoYW5kbGViYXJzCiAge3sjdmlldyBBcHAuTXlWaWV3IH19
        CiAgICB7e2VhY2ggdmlldy5pdGVtcyBpdGVtVmlld0NsYXNzPSJBcHAuQW5J
        dGVtVmlldyJ9fQogIHt7L3ZpZXd9fQogIGBgYAoKICBBbmQgYXBwbGljYXRp
        b24gY29kZQoKICBgYGBqYXZhc2NyaXB0CiAgQXBwID0gRW1iZXIuQXBwbGlj
        YXRpb24uY3JlYXRlKHsKICAgIE15VmlldzogRW1iZXIuVmlldy5leHRlbmQo
        ewogICAgICBpdGVtczogWwogICAgICAgIEVtYmVyLk9iamVjdC5jcmVhdGUo
        e25hbWU6ICdEYXZlJ30pLAogICAgICAgIEVtYmVyLk9iamVjdC5jcmVhdGUo
        e25hbWU6ICdNYXJ5J30pLAogICAgICAgIEVtYmVyLk9iamVjdC5jcmVhdGUo
        e25hbWU6ICdTYXJhJ30pCiAgICAgIF0KICAgIH0pCiAgfSk7CgogIEFwcC5B
        bkl0ZW1WaWV3ID0gRW1iZXIuVmlldy5leHRlbmQoewogICAgdGVtcGxhdGU6
        IEVtYmVyLkhhbmRsZWJhcnMuY29tcGlsZSgiR3JlZXRpbmdzIHt7bmFtZX19
        IikKICB9KTsKICBgYGAKCiAgV2lsbCByZXN1bHQgaW4gdGhlIEhUTUwgc3Ry
        dWN0dXJlIGJlbG93CgogIGBgYGh0bWwKICA8ZGl2IGNsYXNzPSJlbWJlci12
        aWV3Ij4KICAgIDxkaXYgY2xhc3M9ImVtYmVyLXZpZXciPkdyZWV0aW5ncyBE
        YXZlPC9kaXY+CiAgICA8ZGl2IGNsYXNzPSJlbWJlci12aWV3Ij5HcmVldGlu
        Z3MgTWFyeTwvZGl2PgogICAgPGRpdiBjbGFzcz0iZW1iZXItdmlldyI+R3Jl
        ZXRpbmdzIFNhcmE8L2Rpdj4KICA8L2Rpdj4KICBgYGAKCiAgSWYgYW4gYGl0
        ZW1WaWV3Q2xhc3NgIGlzIGRlZmluZWQgb24gdGhlIGhlbHBlciwgYW5kIHRo
        ZXJlZm9yZSB0aGUgaGVscGVyIGlzIG5vdAogIGJlaW5nIHVzZWQgYXMgYSBi
        bG9jaywgYW4gYGVtcHR5Vmlld0NsYXNzYCBjYW4gYWxzbyBiZSBwcm92aWRl
        ZCBvcHRpb25hbGx5LgogIFRoZSBgZW1wdHlWaWV3Q2xhc3NgIHdpbGwgbWF0
        Y2ggdGhlIGJlaGF2aW9yIG9mIHRoZSBge3tlbHNlfX1gIGNvbmRpdGlvbgog
        IGRlc2NyaWJlZCBhYm92ZS4gVGhhdCBpcywgdGhlIGBlbXB0eVZpZXdDbGFz
        c2Agd2lsbCByZW5kZXIgaWYgdGhlIGNvbGxlY3Rpb24KICBpcyBlbXB0eS4K
        CiAgIyMjIFJlcHJlc2VudGluZyBlYWNoIGl0ZW0gd2l0aCBhIENvbnRyb2xs
        ZXIuCiAgQnkgZGVmYXVsdCB0aGUgY29udHJvbGxlciBsb29rdXAgd2l0aGlu
        IGFuIGB7eyNlYWNofX1gIGJsb2NrIHdpbGwgYmUKICB0aGUgY29udHJvbGxl
        ciBvZiB0aGUgdGVtcGxhdGUgd2hlcmUgdGhlIGB7eyNlYWNofX1gIHdhcyB1
        c2VkLiBJZiBlYWNoCiAgaXRlbSBuZWVkcyB0byBiZSBwcmVzZW50ZWQgYnkg
        YSBjdXN0b20gY29udHJvbGxlciB5b3UgY2FuIHByb3ZpZGUgYQogIGBpdGVt
        Q29udHJvbGxlcmAgb3B0aW9uIHdoaWNoIHJlZmVyZW5jZXMgYSBjb250cm9s
        bGVyIGJ5IGxvb2t1cCBuYW1lLgogIEVhY2ggaXRlbSBpbiB0aGUgbG9vcCB3
        aWxsIGJlIHdyYXBwZWQgaW4gYW4gaW5zdGFuY2Ugb2YgdGhpcyBjb250cm9s
        bGVyCiAgYW5kIHRoZSBpdGVtIGl0c2VsZiB3aWxsIGJlIHNldCB0byB0aGUg
        YGNvbnRlbnRgIHByb3BlcnR5IG9mIHRoYXQgY29udHJvbGxlci4KCiAgVGhp
        cyBpcyB1c2VmdWwgaW4gY2FzZXMgd2hlcmUgcHJvcGVydGllcyBvZiBtb2Rl
        bCBvYmplY3RzIG5lZWQgdHJhbnNmb3JtYXRpb24KICBvciBzeW50aGVzaXMg
        Zm9yIGRpc3BsYXk6CgogIGBgYGphdmFzY3JpcHQKICBBcHAuRGV2ZWxvcGVy
        Q29udHJvbGxlciA9IEVtYmVyLk9iamVjdENvbnRyb2xsZXIuZXh0ZW5kKHsK
        ICAgIGlzQXZhaWxhYmxlRm9ySGlyZTogZnVuY3Rpb24oKSB7CiAgICAgIHJl
        dHVybiAhdGhpcy5nZXQoJ2NvbnRlbnQuaXNFbXBsb3llZCcpICYmIHRoaXMu
        Z2V0KCdjb250ZW50LmlzU2Vla2luZ1dvcmsnKTsKICAgIH0ucHJvcGVydHko
        J2lzRW1wbG95ZWQnLCAnaXNTZWVraW5nV29yaycpCiAgfSkKICBgYGAKCiAg
        YGBgaGFuZGxlYmFycwogIHt7I2VhY2ggcGVyc29uIGluIGRldmVsb3BlcnMg
        aXRlbUNvbnRyb2xsZXI9ImRldmVsb3BlciJ9fQogICAge3twZXJzb24ubmFt
        ZX19IHt7I2lmIHBlcnNvbi5pc0F2YWlsYWJsZUZvckhpcmV9fUhpcmUgbWUh
        e3svaWZ9fQogIHt7L2VhY2h9fQogIGBgYAoKICBFYWNoIGl0ZW1Db250cm9s
        bGVyIHdpbGwgcmVjZWl2ZSBhIHJlZmVyZW5jZSB0byB0aGUgY3VycmVudCBj
        b250cm9sbGVyIGFzCiAgYSBgcGFyZW50Q29udHJvbGxlcmAgcHJvcGVydHku
        CgogICMjIyAoRXhwZXJpbWVudGFsKSBHcm91cGVkIEVhY2gKCiAgV2hlbiB1
        c2VkIGluIGNvbmp1bmN0aW9uIHdpdGggdGhlIGV4cGVyaW1lbnRhbCBbZ3Jv
        dXAgaGVscGVyXShodHRwczovL2dpdGh1Yi5jb20vZW1iZXJqcy9ncm91cC1o
        ZWxwZXIpLAogIHlvdSBjYW4gaW5mb3JtIEhhbmRsZWJhcnMgdG8gcmUtcmVu
        ZGVyIGFuIGVudGlyZSBncm91cCBvZiBpdGVtcyBpbnN0ZWFkIG9mCiAgcmUt
        cmVuZGVyaW5nIHRoZW0gb25lIGF0IGEgdGltZSAoaW4gdGhlIGV2ZW50IHRo
        YXQgdGhleSBhcmUgY2hhbmdlZCBlbiBtYXNzZQogIG9yIGFuIGl0ZW0gaXMg
        YWRkZWQvcmVtb3ZlZCkuCgogIGBgYGhhbmRsZWJhcnMKICB7eyNncm91cH19
        CiAgICB7eyNlYWNoIHBlb3BsZX19CiAgICAgIHt7Zmlyc3ROYW1lfX0ge3ts
        YXN0TmFtZX19CiAgICB7ey9lYWNofX0KICB7ey9ncm91cH19CiAgYGBgCgog
        IFRoaXMgY2FuIGJlIGZhc3RlciB0aGFuIHRoZSBub3JtYWwgd2F5IHRoYXQg
        SGFuZGxlYmFycyByZS1yZW5kZXJzIGl0ZW1zCiAgaW4gc29tZSBjYXNlcy4K
        CiAgSWYgZm9yIHNvbWUgcmVhc29uIHlvdSBoYXZlIGEgZ3JvdXAgd2l0aCBt
        b3JlIHRoYW4gb25lIGAjZWFjaGAsIHlvdSBjYW4gbWFrZQogIG9uZSBvZiB0
        aGUgY29sbGVjdGlvbnMgYmUgdXBkYXRlZCBpbiBub3JtYWwgKG5vbi1ncm91
        cGVkKSBmYXNoaW9uIGJ5IHNldHRpbmcKICB0aGUgb3B0aW9uIGBncm91cGVk
        Um93cz10cnVlYCAoY291bnRlci1pbnR1aXRpdmUsIEkga25vdykuCgogIEZv
        ciBleGFtcGxlLAoKICBgYGBoYW5kbGViYXJzCiAge3tkZWFsZXJzaGlwTmFt
        ZX19CgogIHt7I2dyb3VwfX0KICAgIHt7I2VhY2ggZGVhbGVyc319CiAgICAg
        IHt7Zmlyc3ROYW1lfX0ge3tsYXN0TmFtZX19CiAgICB7ey9lYWNofX0KCiAg
        ICB7eyNlYWNoIGNhciBpbiBjYXJzIGdyb3VwZWRSb3dzPXRydWV9fQogICAg
        ICB7e2Nhci5tYWtlfX0ge3tjYXIubW9kZWx9fSB7e2Nhci5jb2xvcn19CiAg
        ICB7ey9lYWNofX0KICB7ey9ncm91cH19CiAgYGBgCiAgQW55IGNoYW5nZSB0
        byBgZGVhbGVyc2hpcE5hbWVgIG9yIHRoZSBgZGVhbGVyc2AgY29sbGVjdGlv
        biB3aWxsIGNhdXNlIHRoZQogIGVudGlyZSBncm91cCB0byBiZSByZS1yZW5k
        ZXJlZC4gSG93ZXZlciwgY2hhbmdlcyB0byB0aGUgYGNhcnNgIGNvbGxlY3Rp
        b24KICB3aWxsIGJlIHJlLXJlbmRlcmVkIGluZGl2aWR1YWxseSAoYXMgbm9y
        bWFsKS4KCiAgTm90ZSB0aGF0IGBncm91cGAgYmVoYXZpb3IgaXMgYWxzbyBk
        aXNhYmxlZCBieSBzcGVjaWZ5aW5nIGFuIGBpdGVtVmlld0NsYXNzYC4KCiAg
        QG1ldGhvZCBlYWNoCiAgQGZvciBFbWJlci5IYW5kbGViYXJzLmhlbHBlcnMK
        ICBAcGFyYW0gW25hbWVdIHtTdHJpbmd9IG5hbWUgZm9yIGl0ZW0gKHVzZWQg
        d2l0aCBgaW5gKQogIEBwYXJhbSBbcGF0aF0ge1N0cmluZ30gcGF0aAogIEBw
        YXJhbSBbb3B0aW9uc10ge09iamVjdH0gSGFuZGxlYmFycyBrZXkvdmFsdWUg
        cGFpcnMgb2Ygb3B0aW9ucwogIEBwYXJhbSBbb3B0aW9ucy5pdGVtVmlld0Ns
        YXNzXSB7U3RyaW5nfSBhIHBhdGggdG8gYSB2aWV3IGNsYXNzIHVzZWQgZm9y
        IGVhY2ggaXRlbQogIEBwYXJhbSBbb3B0aW9ucy5pdGVtQ29udHJvbGxlcl0g
        e1N0cmluZ30gbmFtZSBvZiBhIGNvbnRyb2xsZXIgdG8gYmUgY3JlYXRlZCBm
        b3IgZWFjaCBpdGVtCiAgQHBhcmFtIFtvcHRpb25zLmdyb3VwZWRSb3dzXSB7
        Ym9vbGVhbn0gZW5hYmxlIG5vcm1hbCBpdGVtLWJ5LWl0ZW0gcmVuZGVyaW5n
        IHdoZW4gaW5zaWRlIGEgYCNncm91cGAgaGVscGVyCiovCkVtYmVyLkhhbmRs
        ZWJhcnMucmVnaXN0ZXJIZWxwZXIoJ2VhY2gnLCBmdW5jdGlvbiBlYWNoSGVs
        cGVyKHBhdGgsIG9wdGlvbnMpIHsKICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9
        PT0gNCkgewogICAgRW1iZXIuYXNzZXJ0KCJJZiB5b3UgcGFzcyBtb3JlIHRo
        YW4gb25lIGFyZ3VtZW50IHRvIHRoZSBlYWNoIGhlbHBlciwgaXQgbXVzdCBi
        ZSBpbiB0aGUgZm9ybSAjZWFjaCBmb28gaW4gYmFyIiwgYXJndW1lbnRzWzFd
        ID09PSAiaW4iKTsKCiAgICB2YXIga2V5d29yZE5hbWUgPSBhcmd1bWVudHNb
        MF07CgogICAgb3B0aW9ucyA9IGFyZ3VtZW50c1szXTsKICAgIHBhdGggPSBh
        cmd1bWVudHNbMl07CiAgICBpZiAocGF0aCA9PT0gJycpIHsgcGF0aCA9ICJ0
        aGlzIjsgfQoKICAgIG9wdGlvbnMuaGFzaC5rZXl3b3JkID0ga2V5d29yZE5h
        bWU7CiAgfQoKICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMSkgewogICAg
        b3B0aW9ucyA9IHBhdGg7CiAgICBwYXRoID0gJ3RoaXMnOwogIH0KCiAgb3B0
        aW9ucy5oYXNoLmRhdGFTb3VyY2VCaW5kaW5nID0gcGF0aDsKICAvLyBTZXQg
        dXAgZW1wdHlWaWV3IGFzIGEgbWV0YW1vcnBoIHdpdGggbm8gdGFnCiAgLy9v
        cHRpb25zLmhhc2guZW1wdHlWaWV3Q2xhc3MgPSBFbWJlci5fTWV0YW1vcnBo
        VmlldzsKCiAgaWYgKG9wdGlvbnMuZGF0YS5pbnNpZGVHcm91cCAmJiAhb3B0
        aW9ucy5oYXNoLmdyb3VwZWRSb3dzICYmICFvcHRpb25zLmhhc2guaXRlbVZp
        ZXdDbGFzcykgewogICAgbmV3IEVtYmVyLkhhbmRsZWJhcnMuR3JvdXBlZEVh
        Y2godGhpcywgcGF0aCwgb3B0aW9ucykucmVuZGVyKCk7CiAgfSBlbHNlIHsK
        ICAgIHJldHVybiBFbWJlci5IYW5kbGViYXJzLmhlbHBlcnMuY29sbGVjdGlv
        bi5jYWxsKHRoaXMsICdFbWJlci5IYW5kbGViYXJzLkVhY2hWaWV3Jywgb3B0
        aW9ucyk7CiAgfQp9KTsKCn0pKCk7CgoKCihmdW5jdGlvbigpIHsKLyoqCkBt
        b2R1bGUgZW1iZXIKQHN1Ym1vZHVsZSBlbWJlci1oYW5kbGViYXJzCiovCgov
        KioKICBgdGVtcGxhdGVgIGFsbG93cyB5b3UgdG8gcmVuZGVyIGEgdGVtcGxh
        dGUgZnJvbSBpbnNpZGUgYW5vdGhlciB0ZW1wbGF0ZS4KICBUaGlzIGFsbG93
        cyB5b3UgdG8gcmUtdXNlIHRoZSBzYW1lIHRlbXBsYXRlIGluIG11bHRpcGxl
        IHBsYWNlcy4gRm9yIGV4YW1wbGU6CgogIGBgYGh0bWwKICA8c2NyaXB0IHR5
        cGU9InRleHQveC1oYW5kbGViYXJzIiBkYXRhLXRlbXBsYXRlLW5hbWU9Imxv
        Z2dlZF9pbl91c2VyIj4KICAgIHt7I3dpdGggbG9nZ2VkSW5Vc2VyfX0KICAg
        ICAgTGFzdCBMb2dpbjoge3tsYXN0TG9naW59fQogICAgICBVc2VyIEluZm86
        IHt7dGVtcGxhdGUgInVzZXJfaW5mbyJ9fQogICAge3svd2l0aH19CiAgPC9z
        Y3JpcHQ+CiAgYGBgCgogIGBgYGh0bWwKICA8c2NyaXB0IHR5cGU9InRleHQv
        eC1oYW5kbGViYXJzIiBkYXRhLXRlbXBsYXRlLW5hbWU9InVzZXJfaW5mbyI+
        CiAgICBOYW1lOiA8ZW0+e3tuYW1lfX08L2VtPgogICAgS2FybWE6IDxlbT57
        e2thcm1hfX08L2VtPgogIDwvc2NyaXB0PgogIGBgYAoKICBgYGBoYW5kbGVi
        YXJzCiAge3sjaWYgaXNVc2VyfX0KICAgIHt7dGVtcGxhdGUgInVzZXJfaW5m
        byJ9fQogIHt7ZWxzZX19CiAgICB7e3RlbXBsYXRlICJ1bmxvZ2dlZF91c2Vy
        X2luZm8ifX0KICB7ey9pZn19CiAgYGBgCgogIFRoaXMgaGVscGVyIGxvb2tz
        IGZvciB0ZW1wbGF0ZXMgaW4gdGhlIGdsb2JhbCBgRW1iZXIuVEVNUExBVEVT
        YCBoYXNoLiBJZiB5b3UKICBhZGQgYDxzY3JpcHQ+YCB0YWdzIHRvIHlvdXIg
        cGFnZSB3aXRoIHRoZSBgZGF0YS10ZW1wbGF0ZS1uYW1lYCBhdHRyaWJ1dGUg
        c2V0LAogIHRoZXkgd2lsbCBiZSBjb21waWxlZCBhbmQgcGxhY2VkIGluIHRo
        aXMgaGFzaCBhdXRvbWF0aWNhbGx5LgoKICBZb3UgY2FuIGFsc28gbWFudWFs
        bHkgcmVnaXN0ZXIgdGVtcGxhdGVzIGJ5IGFkZGluZyB0aGVtIHRvIHRoZSBo
        YXNoOgoKICBgYGBqYXZhc2NyaXB0CiAgRW1iZXIuVEVNUExBVEVTWyJteV9j
        b29sX3RlbXBsYXRlIl0gPSBFbWJlci5IYW5kbGViYXJzLmNvbXBpbGUoJzxi
        Pnt7dXNlcn19PC9iPicpOwogIGBgYAoKICBAZGVwcmVjYXRlZAogIEBtZXRo
        b2QgdGVtcGxhdGUKICBAZm9yIEVtYmVyLkhhbmRsZWJhcnMuaGVscGVycwog
        IEBwYXJhbSB7U3RyaW5nfSB0ZW1wbGF0ZU5hbWUgdGhlIHRlbXBsYXRlIHRv
        IHJlbmRlcgoqLwoKRW1iZXIuSGFuZGxlYmFycy5yZWdpc3RlckhlbHBlcign
        dGVtcGxhdGUnLCBmdW5jdGlvbihuYW1lLCBvcHRpb25zKSB7CiAgRW1iZXIu
        ZGVwcmVjYXRlKCJUaGUgYHRlbXBsYXRlYCBoZWxwZXIgaGFzIGJlZW4gZGVw
        cmVjYXRlZCBpbiBmYXZvciBvZiB0aGUgYHBhcnRpYWxgIGhlbHBlci4gUGxl
        YXNlIHVzZSBgcGFydGlhbGAgaW5zdGVhZCwgd2hpY2ggd2lsbCB3b3JrIHRo
        ZSBzYW1lIHdheS4iKTsKICByZXR1cm4gRW1iZXIuSGFuZGxlYmFycy5oZWxw
        ZXJzLnBhcnRpYWwuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfSk7Cgp9KSgp
        OwoKCgooZnVuY3Rpb24oKSB7Ci8qKgpAbW9kdWxlIGVtYmVyCkBzdWJtb2R1
        bGUgZW1iZXItaGFuZGxlYmFycwoqLwoKLyoqCiAgVGhlIGBwYXJ0aWFsYCBo
        ZWxwZXIgcmVuZGVycyBhbm90aGVyIHRlbXBsYXRlIHdpdGhvdXQKICBjaGFu
        Z2luZyB0aGUgdGVtcGxhdGUgY29udGV4dDoKCiAgYGBgaGFuZGxlYmFycwog
        IHt7Zm9vfX0KICB7e3BhcnRpYWwgIm5hdiJ9fQogIGBgYAoKICBUaGUgYWJv
        dmUgZXhhbXBsZSB0ZW1wbGF0ZSB3aWxsIHJlbmRlciBhIHRlbXBsYXRlIG5h
        bWVkCiAgIl9uYXYiLCB3aGljaCBoYXMgdGhlIHNhbWUgY29udGV4dCBhcyB0
        aGUgcGFyZW50IHRlbXBsYXRlCiAgaXQncyByZW5kZXJlZCBpbnRvLCBzbyBp
        ZiB0aGUgIl9uYXYiIHRlbXBsYXRlIGFsc28gcmVmZXJlbmNlZAogIGB7e2Zv
        b319YCwgaXQgd291bGQgcHJpbnQgdGhlIHNhbWUgdGhpbmcgYXMgdGhlIGB7
        e2Zvb319YAogIGluIHRoZSBhYm92ZSBleGFtcGxlLgoKICBJZiBhICJfbmF2
        IiB0ZW1wbGF0ZSBpc24ndCBmb3VuZCwgdGhlIGBwYXJ0aWFsYCBoZWxwZXIg
        d2lsbAogIGZhbGwgYmFjayB0byBhIHRlbXBsYXRlIG5hbWVkICJuYXYiLgoK
        ICAjIyBCb3VuZCB0ZW1wbGF0ZSBuYW1lcwoKICBUaGUgcGFyYW1ldGVyIHN1
        cHBsaWVkIHRvIGBwYXJ0aWFsYCBjYW4gYWxzbyBiZSBhIHBhdGgKICB0byBh
        IHByb3BlcnR5IGNvbnRhaW5pbmcgYSB0ZW1wbGF0ZSBuYW1lLCBlLmcuOgoK
        ICBgYGBoYW5kbGViYXJzCiAge3twYXJ0aWFsIHNvbWVUZW1wbGF0ZU5hbWV9
        fQogIGBgYAoKICBUaGUgYWJvdmUgZXhhbXBsZSB3aWxsIGxvb2sgdXAgdGhl
        IHZhbHVlIG9mIGBzb21lVGVtcGxhdGVOYW1lYAogIG9uIHRoZSB0ZW1wbGF0
        ZSBjb250ZXh0IChlLmcuIGEgY29udHJvbGxlcikgYW5kIHVzZSB0aGF0CiAg
        dmFsdWUgYXMgdGhlIG5hbWUgb2YgdGhlIHRlbXBsYXRlIHRvIHJlbmRlci4g
        SWYgdGhlIHJlc29sdmVkCiAgdmFsdWUgaXMgZmFsc3ksIG5vdGhpbmcgd2ls
        bCBiZSByZW5kZXJlZC4gSWYgYHNvbWVUZW1wbGF0ZU5hbWVgCiAgY2hhbmdl
        cywgdGhlIHBhcnRpYWwgd2lsbCBiZSByZS1yZW5kZXJlZCB1c2luZyB0aGUg
        bmV3IHRlbXBsYXRlCiAgbmFtZS4KCiAgIyMgU2V0dGluZyB0aGUgcGFydGlh
        bCdzIGNvbnRleHQgd2l0aCBgd2l0aGAKCiAgVGhlIGBwYXJ0aWFsYCBoZWxw
        ZXIgY2FuIGJlIHVzZWQgaW4gY29uanVuY3Rpb24gd2l0aCB0aGUgYHdpdGhg
        CiAgaGVscGVyIHRvIHNldCBhIGNvbnRleHQgdGhhdCB3aWxsIGJlIHVzZWQg
        YnkgdGhlIHBhcnRpYWw6CgogIGBgYGhhbmRsZWJhcnMKICB7eyN3aXRoIGN1
        cnJlbnRVc2VyfX0KICAgIHt7cGFydGlhbCAidXNlcl9pbmZvIn19CiAge3sv
        d2l0aH19CiAgYGBgCgogIEBtZXRob2QgcGFydGlhbAogIEBmb3IgRW1iZXIu
        SGFuZGxlYmFycy5oZWxwZXJzCiAgQHBhcmFtIHtTdHJpbmd9IHBhcnRpYWxO
        YW1lIHRoZSBuYW1lIG9mIHRoZSB0ZW1wbGF0ZSB0byByZW5kZXIgbWludXMg
        dGhlIGxlYWRpbmcgdW5kZXJzY29yZQoqLwoKRW1iZXIuSGFuZGxlYmFycy5y
        ZWdpc3RlckhlbHBlcigncGFydGlhbCcsIGZ1bmN0aW9uIHBhcnRpYWxIZWxw
        ZXIobmFtZSwgb3B0aW9ucykgewoKICB2YXIgY29udGV4dCA9IChvcHRpb25z
        LmNvbnRleHRzICYmIG9wdGlvbnMuY29udGV4dHMubGVuZ3RoKSA/IG9wdGlv
        bnMuY29udGV4dHNbMF0gOiB0aGlzOwoKICBpZiAob3B0aW9ucy50eXBlc1sw
        XSA9PT0gIklEIikgewogICAgLy8gSGVscGVyIHdhcyBwYXNzZWQgYSBwcm9w
        ZXJ0eSBwYXRoOyB3ZSBuZWVkIHRvCiAgICAvLyBjcmVhdGUgYSBiaW5kaW5n
        IHRoYXQgd2lsbCByZS1yZW5kZXIgd2hlbmV2ZXIKICAgIC8vIHRoaXMgcHJv
        cGVydHkgY2hhbmdlcy4KICAgIG9wdGlvbnMuZm4gPSBmdW5jdGlvbihjb250
        ZXh0LCBmbk9wdGlvbnMpIHsKICAgICAgdmFyIHBhcnRpYWxOYW1lID0gRW1i
        ZXIuSGFuZGxlYmFycy5nZXQoY29udGV4dCwgbmFtZSwgZm5PcHRpb25zKTsK
        ICAgICAgcmVuZGVyUGFydGlhbChjb250ZXh0LCBwYXJ0aWFsTmFtZSwgZm5P
        cHRpb25zKTsKICAgIH07CgogICAgcmV0dXJuIEVtYmVyLkhhbmRsZWJhcnMu
        YmluZC5jYWxsKGNvbnRleHQsIG5hbWUsIG9wdGlvbnMsIHRydWUsIGV4aXN0
        cyk7CiAgfSBlbHNlIHsKICAgIC8vIFJlbmRlciB0aGUgcGFydGlhbCByaWdo
        dCBpbnRvIHBhcmVudCB0ZW1wbGF0ZS4KICAgIHJlbmRlclBhcnRpYWwoY29u
        dGV4dCwgbmFtZSwgb3B0aW9ucyk7CiAgfQp9KTsKCmZ1bmN0aW9uIGV4aXN0
        cyh2YWx1ZSkgewogIHJldHVybiAhRW1iZXIuaXNOb25lKHZhbHVlKTsKfQoK
        ZnVuY3Rpb24gcmVuZGVyUGFydGlhbChjb250ZXh0LCBuYW1lLCBvcHRpb25z
        KSB7CiAgdmFyIG5hbWVQYXJ0cyA9IG5hbWUuc3BsaXQoIi8iKSwKICAgICAg
        bGFzdFBhcnQgPSBuYW1lUGFydHNbbmFtZVBhcnRzLmxlbmd0aCAtIDFdOwoK
        ICBuYW1lUGFydHNbbmFtZVBhcnRzLmxlbmd0aCAtIDFdID0gIl8iICsgbGFz
        dFBhcnQ7CgogIHZhciB2aWV3ID0gb3B0aW9ucy5kYXRhLnZpZXcsCiAgICAg
        IHVuZGVyc2NvcmVkTmFtZSA9IG5hbWVQYXJ0cy5qb2luKCIvIiksCiAgICAg
        IHRlbXBsYXRlID0gdmlldy50ZW1wbGF0ZUZvck5hbWUodW5kZXJzY29yZWRO
        YW1lKSwKICAgICAgZGVwcmVjYXRlZFRlbXBsYXRlID0gIXRlbXBsYXRlICYm
        IHZpZXcudGVtcGxhdGVGb3JOYW1lKG5hbWUpOwoKICBFbWJlci5hc3NlcnQo
        IlVuYWJsZSB0byBmaW5kIHBhcnRpYWwgd2l0aCBuYW1lICciK25hbWUrIicu
        IiwgdGVtcGxhdGUgfHwgZGVwcmVjYXRlZFRlbXBsYXRlKTsKCiAgdGVtcGxh
        dGUgPSB0ZW1wbGF0ZSB8fCBkZXByZWNhdGVkVGVtcGxhdGU7CgogIHRlbXBs
        YXRlKGNvbnRleHQsIHsgZGF0YTogb3B0aW9ucy5kYXRhIH0pOwp9Cgp9KSgp
        OwoKCgooZnVuY3Rpb24oKSB7Ci8qKgpAbW9kdWxlIGVtYmVyCkBzdWJtb2R1
        bGUgZW1iZXItaGFuZGxlYmFycwoqLwoKdmFyIGdldCA9IEVtYmVyLmdldCwg
        c2V0ID0gRW1iZXIuc2V0OwoKLyoqCiAgYHt7eWllbGR9fWAgZGVub3RlcyBh
        biBhcmVhIG9mIGEgdGVtcGxhdGUgdGhhdCB3aWxsIGJlIHJlbmRlcmVkIGlu
        c2lkZQogIG9mIGFub3RoZXIgdGVtcGxhdGUuIEl0IGhhcyB0d28gbWFpbiB1
        c2VzOgoKICAjIyMgVXNlIHdpdGggYGxheW91dGAKICBXaGVuIHVzZWQgaW4g
        YSBIYW5kbGViYXJzIHRlbXBsYXRlIHRoYXQgaXMgYXNzaWduZWQgdG8gYW4g
        YEVtYmVyLlZpZXdgCiAgaW5zdGFuY2UncyBgbGF5b3V0YCBwcm9wZXJ0eSBF
        bWJlciB3aWxsIHJlbmRlciB0aGUgbGF5b3V0IHRlbXBsYXRlIGZpcnN0LAog
        IGluc2VydGluZyB0aGUgdmlldydzIG93biByZW5kZXJlZCBvdXRwdXQgYXQg
        dGhlIGB7e3lpZWxkfX1gIGxvY2F0aW9uLgoKICBBbiBlbXB0eSBgPGJvZHk+
        YCBhbmQgdGhlIGZvbGxvd2luZyBhcHBsaWNhdGlvbiBjb2RlOgoKICBgYGBq
        YXZhc2NyaXB0CiAgQVZpZXcgPSBFbWJlci5WaWV3LmV4dGVuZCh7CiAgICBj
        bGFzc05hbWVzOiBbJ2Etdmlldy13aXRoLWxheW91dCddLAogICAgbGF5b3V0
        OiBFbWJlci5IYW5kbGViYXJzLmNvbXBpbGUoJzxkaXYgY2xhc3M9IndyYXBw
        ZXIiPnt7eWllbGR9fTwvZGl2PicpLAogICAgdGVtcGxhdGU6IEVtYmVyLkhh
        bmRsZWJhcnMuY29tcGlsZSgnPHNwYW4+SSBhbSB3cmFwcGVkPC9zcGFuPicp
        CiAgfSk7CgogIGFWaWV3ID0gQVZpZXcuY3JlYXRlKCk7CiAgYVZpZXcuYXBw
        ZW5kVG8oJ2JvZHknKTsKICBgYGAKCiAgV2lsbCByZXN1bHQgaW4gdGhlIGZv
        bGxvd2luZyBIVE1MIG91dHB1dDoKCiAgYGBgaHRtbAogIDxib2R5PgogICAg
        PGRpdiBjbGFzcz0nZW1iZXItdmlldyBhLXZpZXctd2l0aC1sYXlvdXQnPgog
        ICAgICA8ZGl2IGNsYXNzPSJ3cmFwcGVyIj4KICAgICAgICA8c3Bhbj5JIGFt
        IHdyYXBwZWQ8L3NwYW4+CiAgICAgIDwvZGl2PgogICAgPC9kaXY+CiAgPC9i
        b2R5PgogIGBgYAoKICBUaGUgYHlpZWxkYCBoZWxwZXIgY2Fubm90IGJlIHVz
        ZWQgb3V0c2lkZSBvZiBhIHRlbXBsYXRlIGFzc2lnbmVkIHRvIGFuCiAgYEVt
        YmVyLlZpZXdgJ3MgYGxheW91dGAgcHJvcGVydHkgYW5kIHdpbGwgdGhyb3cg
        YW4gZXJyb3IgaWYgYXR0ZW1wdGVkLgoKICBgYGBqYXZhc2NyaXB0CiAgQlZp
        ZXcgPSBFbWJlci5WaWV3LmV4dGVuZCh7CiAgICBjbGFzc05hbWVzOiBbJ2Et
        dmlldy13aXRoLWxheW91dCddLAogICAgdGVtcGxhdGU6IEVtYmVyLkhhbmRs
        ZWJhcnMuY29tcGlsZSgne3t5aWVsZH19JykKICB9KTsKCiAgYlZpZXcgPSBC
        Vmlldy5jcmVhdGUoKTsKICBiVmlldy5hcHBlbmRUbygnYm9keScpOwoKICAv
        LyB0aHJvd3MKICAvLyBVbmNhdWdodCBFcnJvcjogYXNzZXJ0aW9uIGZhaWxl
        ZDoKICAvLyBZb3UgY2FsbGVkIHlpZWxkIGluIGEgdGVtcGxhdGUgdGhhdCB3
        YXMgbm90IGEgbGF5b3V0CiAgYGBgCgogICMjIyBVc2Ugd2l0aCBFbWJlci5D
        b21wb25lbnQKICBXaGVuIGRlc2lnbmluZyBjb21wb25lbnRzIGB7e3lpZWxk
        fX1gIGlzIHVzZWQgdG8gZGVub3RlIHdoZXJlLCBpbnNpZGUgdGhlIGNvbXBv
        bmVudCdzCiAgdGVtcGxhdGUsIGFuIG9wdGlvbmFsIGJsb2NrIHBhc3NlZCB0
        byB0aGUgY29tcG9uZW50IHNob3VsZCByZW5kZXI6CgogIGBgYGhhbmRsZWJh
        cnMKICA8IS0tIGFwcGxpY2F0aW9uLmhicyAtLT4KICB7eyNsYWJlbGVkLXRl
        eHRmaWVsZCB2YWx1ZT1zb21lUHJvcGVydHl9fQogICAgRmlyc3QgbmFtZToK
        ICB7ey9sYWJlbGVkLXRleHRmaWVsZH19CiAgYGBgCgogIGBgYGhhbmRsZWJh
        cnMKICA8IS0tIGNvbXBvbmVudHMvbGFiZWxlZC10ZXh0ZmllbGQuaGJzIC0t
        PgogIDxsYWJlbD4KICAgIHt7eWllbGR9fSB7e2lucHV0IHZhbHVlPXZhbHVl
        fX0KICA8L2xhYmVsPgogIGBgYAoKICBSZXN1bHQ6CgogIGBgYGh0bWwKICA8
        bGFiZWw+CiAgICBGaXJzdCBuYW1lOiA8aW5wdXQgdHlwZT0idGV4dCIgLz4K
        ICA8bGFiZWw+CiAgYGBgCgogIEBtZXRob2QgeWllbGQKICBAZm9yIEVtYmVy
        LkhhbmRsZWJhcnMuaGVscGVycwogIEBwYXJhbSB7SGFzaH0gb3B0aW9ucwog
        IEByZXR1cm4ge1N0cmluZ30gSFRNTCBzdHJpbmcKKi8KRW1iZXIuSGFuZGxl
        YmFycy5yZWdpc3RlckhlbHBlcigneWllbGQnLCBmdW5jdGlvbiB5aWVsZEhl
        bHBlcihvcHRpb25zKSB7CiAgdmFyIHZpZXcgPSBvcHRpb25zLmRhdGEudmll
        dzsKCiAgd2hpbGUgKHZpZXcgJiYgIWdldCh2aWV3LCAnbGF5b3V0JykpIHsK
        ICAgIGlmICh2aWV3Ll9jb250ZXh0VmlldykgewogICAgICB2aWV3ID0gdmll
        dy5fY29udGV4dFZpZXc7CiAgICB9IGVsc2UgewogICAgICB2aWV3ID0gZ2V0
        KHZpZXcsICdwYXJlbnRWaWV3Jyk7CiAgICB9CiAgfQoKICBFbWJlci5hc3Nl
        cnQoIllvdSBjYWxsZWQgeWllbGQgaW4gYSB0ZW1wbGF0ZSB0aGF0IHdhcyBu
        b3QgYSBsYXlvdXQiLCAhIXZpZXcpOwoKICB2aWV3Ll95aWVsZCh0aGlzLCBv
        cHRpb25zKTsKfSk7Cgp9KSgpOwoKCgooZnVuY3Rpb24oKSB7Ci8qKgpAbW9k
        dWxlIGVtYmVyCkBzdWJtb2R1bGUgZW1iZXItaGFuZGxlYmFycwoqLwoKLyoq
        CiAgYGxvY2AgbG9va3MgdXAgdGhlIHN0cmluZyBpbiB0aGUgbG9jYWxpemVk
        IHN0cmluZ3MgaGFzaC4KICBUaGlzIGlzIGEgY29udmVuaWVudCB3YXkgdG8g
        bG9jYWxpemUgdGV4dC4gRm9yIGV4YW1wbGU6CgogIGBgYGh0bWwKICA8c2Ny
        aXB0IHR5cGU9InRleHQveC1oYW5kbGViYXJzIiBkYXRhLXRlbXBsYXRlLW5h
        bWU9ImhvbWUiPgogICAge3tsb2MgIndlbGNvbWUifX0KICA8L3NjcmlwdD4K
        ICBgYGAKCiAgVGFrZSBub3RlIHRoYXQgYCJ3ZWxjb21lImAgaXMgYSBzdHJp
        bmcgYW5kIG5vdCBhbiBvYmplY3QKICByZWZlcmVuY2UuCgogIEBtZXRob2Qg
        bG9jCiAgQGZvciBFbWJlci5IYW5kbGViYXJzLmhlbHBlcnMKICBAcGFyYW0g
        e1N0cmluZ30gc3RyIFRoZSBzdHJpbmcgdG8gZm9ybWF0CiovCgpFbWJlci5I
        YW5kbGViYXJzLnJlZ2lzdGVySGVscGVyKCdsb2MnLCBmdW5jdGlvbiBsb2NI
        ZWxwZXIoc3RyKSB7CiAgcmV0dXJuIEVtYmVyLlN0cmluZy5sb2Moc3RyKTsK
        fSk7Cgp9KSgpOwoKCgooZnVuY3Rpb24oKSB7Cgp9KSgpOwoKCgooZnVuY3Rp
        b24oKSB7Cgp9KSgpOwoKCgooZnVuY3Rpb24oKSB7Ci8qKgpAbW9kdWxlIGVt
        YmVyCkBzdWJtb2R1bGUgZW1iZXItaGFuZGxlYmFycwoqLwoKdmFyIHNldCA9
        IEVtYmVyLnNldCwgZ2V0ID0gRW1iZXIuZ2V0OwoKLyoqCiAgVGhlIGludGVy
        bmFsIGNsYXNzIHVzZWQgdG8gY3JlYXRlIHRleHQgaW5wdXRzIHdoZW4gdGhl
        IGB7e2lucHV0fX1gCiAgaGVscGVyIGlzIHVzZWQgd2l0aCBgdHlwZWAgb2Yg
        YGNoZWNrYm94YC4KCiAgU2VlIFtoYW5kbGViYXJzLmhlbHBlcnMuaW5wdXRd
        KC9hcGkvY2xhc3Nlcy9FbWJlci5IYW5kbGViYXJzLmhlbHBlcnMuaHRtbCNt
        ZXRob2RfaW5wdXQpICBmb3IgdXNhZ2UgZGV0YWlscy4KCiAgIyMgRGlyZWN0
        IG1hbmlwdWxhdGlvbiBvZiBgY2hlY2tlZGAKCiAgVGhlIGBjaGVja2VkYCBh
        dHRyaWJ1dGUgb2YgYW4gYEVtYmVyLkNoZWNrYm94YCBvYmplY3Qgc2hvdWxk
        IGFsd2F5cyBiZSBzZXQKICB0aHJvdWdoIHRoZSBFbWJlciBvYmplY3Qgb3Ig
        YnkgaW50ZXJhY3Rpbmcgd2l0aCBpdHMgcmVuZGVyZWQgZWxlbWVudAogIHJl
        cHJlc2VudGF0aW9uIHZpYSB0aGUgbW91c2UsIGtleWJvYXJkLCBvciB0b3Vj
        aC4gVXBkYXRpbmcgdGhlIHZhbHVlIG9mIHRoZQogIGNoZWNrYm94IHZpYSBq
        UXVlcnkgd2lsbCByZXN1bHQgaW4gdGhlIGNoZWNrZWQgdmFsdWUgb2YgdGhl
        IG9iamVjdCBhbmQgaXRzCiAgZWxlbWVudCBsb3Npbmcgc3luY2hyb25pemF0
        aW9uLgoKICAjIyBMYXlvdXQgYW5kIExheW91dE5hbWUgcHJvcGVydGllcwoK
        ICBCZWNhdXNlIEhUTUwgYGlucHV0YCBlbGVtZW50cyBhcmUgc2VsZiBjbG9z
        aW5nIGBsYXlvdXRgIGFuZCBgbGF5b3V0TmFtZWAKICBwcm9wZXJ0aWVzIHdp
        bGwgbm90IGJlIGFwcGxpZWQuIFNlZSBbRW1iZXIuVmlld10oL2FwaS9jbGFz
        c2VzL0VtYmVyLlZpZXcuaHRtbCkncwogIGxheW91dCBzZWN0aW9uIGZvciBt
        b3JlIGluZm9ybWF0aW9uLgoKICBAY2xhc3MgQ2hlY2tib3gKICBAbmFtZXNw
        YWNlIEVtYmVyCiAgQGV4dGVuZHMgRW1iZXIuVmlldwoqLwpFbWJlci5DaGVj
        a2JveCA9IEVtYmVyLlZpZXcuZXh0ZW5kKHsKICBjbGFzc05hbWVzOiBbJ2Vt
        YmVyLWNoZWNrYm94J10sCgogIHRhZ05hbWU6ICdpbnB1dCcsCgogIGF0dHJp
        YnV0ZUJpbmRpbmdzOiBbJ3R5cGUnLCAnY2hlY2tlZCcsICdpbmRldGVybWlu
        YXRlJywgJ2Rpc2FibGVkJywgJ3RhYmluZGV4JywgJ25hbWUnXSwKCiAgdHlw
        ZTogImNoZWNrYm94IiwKICBjaGVja2VkOiBmYWxzZSwKICBkaXNhYmxlZDog
        ZmFsc2UsCiAgaW5kZXRlcm1pbmF0ZTogZmFsc2UsCgogIGluaXQ6IGZ1bmN0
        aW9uKCkgewogICAgdGhpcy5fc3VwZXIoKTsKICAgIHRoaXMub24oImNoYW5n
        ZSIsIHRoaXMsIHRoaXMuX3VwZGF0ZUVsZW1lbnRWYWx1ZSk7CiAgfSwKCiAg
        ZGlkSW5zZXJ0RWxlbWVudDogZnVuY3Rpb24oKSB7CiAgICB0aGlzLl9zdXBl
        cigpOwogICAgdGhpcy5nZXQoJ2VsZW1lbnQnKS5pbmRldGVybWluYXRlID0g
        ISF0aGlzLmdldCgnaW5kZXRlcm1pbmF0ZScpOwogIH0sCgogIF91cGRhdGVF
        bGVtZW50VmFsdWU6IGZ1bmN0aW9uKCkgewogICAgc2V0KHRoaXMsICdjaGVj
        a2VkJywgdGhpcy4kKCkucHJvcCgnY2hlY2tlZCcpKTsKICB9Cn0pOwoKfSko
        KTsKCgoKKGZ1bmN0aW9uKCkgewovKioKQG1vZHVsZSBlbWJlcgpAc3VibW9k
        dWxlIGVtYmVyLWhhbmRsZWJhcnMKKi8KCnZhciBnZXQgPSBFbWJlci5nZXQs
        IHNldCA9IEVtYmVyLnNldDsKCi8qKgogIFNoYXJlZCBtaXhpbiB1c2VkIGJ5
        IGBFbWJlci5UZXh0RmllbGRgIGFuZCBgRW1iZXIuVGV4dEFyZWFgLgoKICBA
        Y2xhc3MgVGV4dFN1cHBvcnQKICBAbmFtZXNwYWNlIEVtYmVyCiAgQHByaXZh
        dGUKKi8KRW1iZXIuVGV4dFN1cHBvcnQgPSBFbWJlci5NaXhpbi5jcmVhdGUo
        ewogIHZhbHVlOiAiIiwKCiAgYXR0cmlidXRlQmluZGluZ3M6IFsncGxhY2Vo
        b2xkZXInLCAnZGlzYWJsZWQnLCAnbWF4bGVuZ3RoJywgJ3RhYmluZGV4Jywg
        J3JlYWRvbmx5J10sCiAgcGxhY2Vob2xkZXI6IG51bGwsCiAgZGlzYWJsZWQ6
        IGZhbHNlLAogIG1heGxlbmd0aDogbnVsbCwKCiAgaW5pdDogZnVuY3Rpb24o
        KSB7CiAgICB0aGlzLl9zdXBlcigpOwogICAgdGhpcy5vbigiZm9jdXNPdXQi
        LCB0aGlzLCB0aGlzLl9lbGVtZW50VmFsdWVEaWRDaGFuZ2UpOwogICAgdGhp
        cy5vbigiY2hhbmdlIiwgdGhpcywgdGhpcy5fZWxlbWVudFZhbHVlRGlkQ2hh
        bmdlKTsKICAgIHRoaXMub24oInBhc3RlIiwgdGhpcywgdGhpcy5fZWxlbWVu
        dFZhbHVlRGlkQ2hhbmdlKTsKICAgIHRoaXMub24oImN1dCIsIHRoaXMsIHRo
        aXMuX2VsZW1lbnRWYWx1ZURpZENoYW5nZSk7CiAgICB0aGlzLm9uKCJpbnB1
        dCIsIHRoaXMsIHRoaXMuX2VsZW1lbnRWYWx1ZURpZENoYW5nZSk7CiAgICB0
        aGlzLm9uKCJrZXlVcCIsIHRoaXMsIHRoaXMuaW50ZXJwcmV0S2V5RXZlbnRz
        KTsKICB9LAoKICAvKioKICAgIFRoZSBhY3Rpb24gdG8gYmUgc2VudCB3aGVu
        IHRoZSB1c2VyIHByZXNzZXMgdGhlIHJldHVybiBrZXkuCgogICAgVGhpcyBp
        cyBzaW1pbGFyIHRvIHRoZSBge3thY3Rpb259fWAgaGVscGVyLCBidXQgaXMg
        ZmlyZWQgd2hlbgogICAgdGhlIHVzZXIgcHJlc3NlcyB0aGUgcmV0dXJuIGtl
        eSB3aGVuIGVkaXRpbmcgYSB0ZXh0IGZpZWxkLCBhbmQgc2VuZHMKICAgIHRo
        ZSB2YWx1ZSBvZiB0aGUgZmllbGQgYXMgdGhlIGNvbnRleHQuCgogICAgQHBy
        b3BlcnR5IGFjdGlvbgogICAgQHR5cGUgU3RyaW5nCiAgICBAZGVmYXVsdCBu
        dWxsCiAgKi8KICBhY3Rpb246IG51bGwsCgogIC8qKgogICAgVGhlIGV2ZW50
        IHRoYXQgc2hvdWxkIHNlbmQgdGhlIGFjdGlvbi4KCiAgICBPcHRpb25zIGFy
        ZToKCiAgICAqIGBlbnRlcmA6IHRoZSB1c2VyIHByZXNzZWQgZW50ZXIKICAg
        ICogYGtleVByZXNzYDogdGhlIHVzZXIgcHJlc3NlZCBhIGtleQoKICAgIEBw
        cm9wZXJ0eSBvbkV2ZW50CiAgICBAdHlwZSBTdHJpbmcKICAgIEBkZWZhdWx0
        IGVudGVyCiAgKi8KICBvbkV2ZW50OiAnZW50ZXInLAoKICAvKioKICAgIFdo
        ZXRoZXIgdGhleSBga2V5VXBgIGV2ZW50IHRoYXQgdHJpZ2dlcnMgYW4gYGFj
        dGlvbmAgdG8gYmUgc2VudCBjb250aW51ZXMKICAgIHByb3BhZ2F0aW5nIHRv
        IG90aGVyIHZpZXdzLgoKICAgIEJ5IGRlZmF1bHQsIHdoZW4gdGhlIHVzZXIg
        cHJlc3NlcyB0aGUgcmV0dXJuIGtleSBvbiB0aGVpciBrZXlib2FyZCBhbmQK
        ICAgIHRoZSB0ZXh0IGZpZWxkIGhhcyBhbiBgYWN0aW9uYCBzZXQsIHRoZSBh
        Y3Rpb24gd2lsbCBiZSBzZW50IHRvIHRoZSB2aWV3J3MKICAgIGNvbnRyb2xs
        ZXIgYW5kIHRoZSBrZXkgZXZlbnQgd2lsbCBzdG9wIHByb3BhZ2F0aW5nLgoK
        ICAgIElmIHlvdSB3b3VsZCBsaWtlIHBhcmVudCB2aWV3cyB0byByZWNlaXZl
        IHRoZSBga2V5VXBgIGV2ZW50IGV2ZW4gYWZ0ZXIgYW4KICAgIGFjdGlvbiBo
        YXMgYmVlbiBkaXNwYXRjaGVkLCBzZXQgYGJ1YmJsZXNgIHRvIHRydWUuCgog
        ICAgQHByb3BlcnR5IGJ1YmJsZXMKICAgIEB0eXBlIEJvb2xlYW4KICAgIEBk
        ZWZhdWx0IGZhbHNlCiAgKi8KICBidWJibGVzOiBmYWxzZSwKCiAgaW50ZXJw
        cmV0S2V5RXZlbnRzOiBmdW5jdGlvbihldmVudCkgewogICAgdmFyIG1hcCA9
        IEVtYmVyLlRleHRTdXBwb3J0LktFWV9FVkVOVFM7CiAgICB2YXIgbWV0aG9k
        ID0gbWFwW2V2ZW50LmtleUNvZGVdOwoKICAgIHRoaXMuX2VsZW1lbnRWYWx1
        ZURpZENoYW5nZSgpOwogICAgaWYgKG1ldGhvZCkgeyByZXR1cm4gdGhpc1tt
        ZXRob2RdKGV2ZW50KTsgfQogIH0sCgogIF9lbGVtZW50VmFsdWVEaWRDaGFu
        Z2U6IGZ1bmN0aW9uKCkgewogICAgc2V0KHRoaXMsICd2YWx1ZScsIHRoaXMu
        JCgpLnZhbCgpKTsKICB9LAoKICAvKioKICAgIFRoZSBhY3Rpb24gdG8gYmUg
        c2VudCB3aGVuIHRoZSB1c2VyIGluc2VydHMgYSBuZXcgbGluZS4KCiAgICBD
        YWxsZWQgYnkgdGhlIGBFbWJlci5UZXh0U3VwcG9ydGAgbWl4aW4gb24ga2V5
        VXAgaWYga2V5Y29kZSBtYXRjaGVzIDEzLgogICAgVXNlcyBzZW5kQWN0aW9u
        IHRvIHNlbmQgdGhlIGBlbnRlcmAgYWN0aW9uIHRvIHRoZSBjb250cm9sbGVy
        LgoKICAgIEBtZXRob2QgaW5zZXJ0TmV3bGluZQogICAgQHBhcmFtIHtFdmVu
        dH0gZXZlbnQKICAqLwogIGluc2VydE5ld2xpbmU6IGZ1bmN0aW9uKGV2ZW50
        KSB7CiAgICBzZW5kQWN0aW9uKCdlbnRlcicsIHRoaXMsIGV2ZW50KTsKICAg
        IHNlbmRBY3Rpb24oJ2luc2VydC1uZXdsaW5lJywgdGhpcywgZXZlbnQpOwog
        IH0sCgogIC8qKgogICAgQ2FsbGVkIHdoZW4gdGhlIHVzZXIgaGl0cyBlc2Nh
        cGUuCgogICAgQ2FsbGVkIGJ5IHRoZSBgRW1iZXIuVGV4dFN1cHBvcnRgIG1p
        eGluIG9uIGtleVVwIGlmIGtleWNvZGUgbWF0Y2hlcyAyNy4KICAgIFVzZXMg
        c2VuZEFjdGlvbiB0byBzZW5kIHRoZSBgZXNjYXBlLXByZXNzYCBhY3Rpb24g
        dG8gdGhlIGNvbnRyb2xsZXIuCgogICAgQG1ldGhvZCBjYW5jZWwKICAgIEBw
        YXJhbSB7RXZlbnR9IGV2ZW50CiAgKi8KICBjYW5jZWw6IGZ1bmN0aW9uKGV2
        ZW50KSB7CiAgICBzZW5kQWN0aW9uKCdlc2NhcGUtcHJlc3MnLCB0aGlzLCBl
        dmVudCk7CiAgfSwKCiAgLyoqCiAgICBDYWxsZWQgd2hlbiB0aGUgdGV4dCBh
        cmVhIGlzIGZvY3VzZWQuCgogICAgQG1ldGhvZCBmb2N1c0luCiAgICBAcGFy
        YW0ge0V2ZW50fSBldmVudAogICovCiAgZm9jdXNJbjogZnVuY3Rpb24oZXZl
        bnQpIHsKICAgIHNlbmRBY3Rpb24oJ2ZvY3VzLWluJywgdGhpcywgZXZlbnQp
        OwogIH0sCgogIC8qKgogICAgQ2FsbGVkIHdoZW4gdGhlIHRleHQgYXJlYSBp
        cyBibHVycmVkLgoKICAgIEBtZXRob2QgZm9jdXNPdXQKICAgIEBwYXJhbSB7
        RXZlbnR9IGV2ZW50CiAgKi8KICBmb2N1c091dDogZnVuY3Rpb24oZXZlbnQp
        IHsKICAgIHNlbmRBY3Rpb24oJ2ZvY3VzLW91dCcsIHRoaXMsIGV2ZW50KTsK
        ICB9LAoKICAvKioKICAgIFRoZSBhY3Rpb24gdG8gYmUgc2VudCB3aGVuIHRo
        ZSB1c2VyIHByZXNzZXMgYSBrZXkuIEVuYWJsZWQgYnkgc2V0dGluZwogICAg
        dGhlIGBvbkV2ZW50YCBwcm9wZXJ0eSB0byBga2V5UHJlc3NgLgoKICAgIFVz
        ZXMgc2VuZEFjdGlvbiB0byBzZW5kIHRoZSBga2V5UHJlc3NgIGFjdGlvbiB0
        byB0aGUgY29udHJvbGxlci4KCiAgICBAbWV0aG9kIGtleVByZXNzCiAgICBA
        cGFyYW0ge0V2ZW50fSBldmVudAogICovCiAga2V5UHJlc3M6IGZ1bmN0aW9u
        KGV2ZW50KSB7CiAgICBzZW5kQWN0aW9uKCdrZXktcHJlc3MnLCB0aGlzLCBl
        dmVudCk7CiAgfQoKfSk7CgpFbWJlci5UZXh0U3VwcG9ydC5LRVlfRVZFTlRT
        ID0gewogIDEzOiAnaW5zZXJ0TmV3bGluZScsCiAgMjc6ICdjYW5jZWwnCn07
        CgovLyBJbiBwcmluY2lwbGUsIHRoaXMgc2hvdWxkbid0IGJlIG5lY2Vzc2Fy
        eSwgYnV0IHRoZSBsZWdhY3kKLy8gc2VjdGlvbkFjdGlvbiBzZW1hbnRpY3Mg
        Zm9yIFRleHRGaWVsZCBhcmUgZGlmZmVyZW50IGZyb20KLy8gdGhlIGNvbXBv
        bmVudCBzZW1hbnRpY3Mgc28gdGhpcyBtZXRob2Qgbm9ybWFsaXplcyB0aGVt
        LgpmdW5jdGlvbiBzZW5kQWN0aW9uKGV2ZW50TmFtZSwgdmlldywgZXZlbnQp
        IHsKICB2YXIgYWN0aW9uID0gZ2V0KHZpZXcsIGV2ZW50TmFtZSksCiAgICAg
        IG9uID0gZ2V0KHZpZXcsICdvbkV2ZW50JyksCiAgICAgIHZhbHVlID0gZ2V0
        KHZpZXcsICd2YWx1ZScpOwoKICAvLyBiYWNrLWNvbXBhdCBzdXBwb3J0IGZv
        ciBrZXlQcmVzcyBhcyBhbiBldmVudCBuYW1lIGV2ZW4gdGhvdWdoCiAgLy8g
        aXQncyBhbHNvIGEgbWV0aG9kIG5hbWUgdGhhdCBjb25zdW1lcyB0aGUgZXZl
        bnQgKGFuZCB0aGVyZWZvcmUKICAvLyBpbmNvbXBhdGlibGUgd2l0aCBzZW5k
        QWN0aW9uIHNlbWFudGljcykuCiAgaWYgKG9uID09PSBldmVudE5hbWUgfHwg
        KG9uID09PSAna2V5UHJlc3MnICYmIGV2ZW50TmFtZSA9PT0gJ2tleS1wcmVz
        cycpKSB7CiAgICB2aWV3LnNlbmRBY3Rpb24oJ2FjdGlvbicsIHZhbHVlKTsK
        ICB9CgogIHZpZXcuc2VuZEFjdGlvbihldmVudE5hbWUsIHZhbHVlKTsKCiAg
        aWYgKGFjdGlvbiB8fCBvbiA9PT0gZXZlbnROYW1lKSB7CiAgICBpZighZ2V0
        KHZpZXcsICdidWJibGVzJykpIHsKICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0
        aW9uKCk7CiAgICB9CiAgfQp9Cgp9KSgpOwoKCgooZnVuY3Rpb24oKSB7Ci8q
        KgpAbW9kdWxlIGVtYmVyCkBzdWJtb2R1bGUgZW1iZXItaGFuZGxlYmFycwoq
        LwoKdmFyIGdldCA9IEVtYmVyLmdldCwgc2V0ID0gRW1iZXIuc2V0OwoKLyoq
        CgogIFRoZSBpbnRlcm5hbCBjbGFzcyB1c2VkIHRvIGNyZWF0ZSB0ZXh0IGlu
        cHV0cyB3aGVuIHRoZSBge3tpbnB1dH19YAogIGhlbHBlciBpcyB1c2VkIHdp
        dGggYHR5cGVgIG9mIGB0ZXh0YC4KCiAgU2VlIFtIYW5kbGViYXJzLmhlbHBl
        cnMuaW5wdXRdKC9hcGkvY2xhc3Nlcy9FbWJlci5IYW5kbGViYXJzLmhlbHBl
        cnMuaHRtbCNtZXRob2RfaW5wdXQpICBmb3IgdXNhZ2UgZGV0YWlscy4KCiAg
        IyMgTGF5b3V0IGFuZCBMYXlvdXROYW1lIHByb3BlcnRpZXMKCiAgQmVjYXVz
        ZSBIVE1MIGBpbnB1dGAgZWxlbWVudHMgYXJlIHNlbGYgY2xvc2luZyBgbGF5
        b3V0YCBhbmQgYGxheW91dE5hbWVgCiAgcHJvcGVydGllcyB3aWxsIG5vdCBi
        ZSBhcHBsaWVkLiBTZWUgW0VtYmVyLlZpZXddKC9hcGkvY2xhc3Nlcy9FbWJl
        ci5WaWV3Lmh0bWwpJ3MKICBsYXlvdXQgc2VjdGlvbiBmb3IgbW9yZSBpbmZv
        cm1hdGlvbi4KCiAgQGNsYXNzIFRleHRGaWVsZAogIEBuYW1lc3BhY2UgRW1i
        ZXIKICBAZXh0ZW5kcyBFbWJlci5Db21wb25lbnQKICBAdXNlcyBFbWJlci5U
        ZXh0U3VwcG9ydAoqLwpFbWJlci5UZXh0RmllbGQgPSBFbWJlci5Db21wb25l
        bnQuZXh0ZW5kKEVtYmVyLlRleHRTdXBwb3J0LCB7CgogIGNsYXNzTmFtZXM6
        IFsnZW1iZXItdGV4dC1maWVsZCddLAogIHRhZ05hbWU6ICJpbnB1dCIsCiAg
        YXR0cmlidXRlQmluZGluZ3M6IFsndHlwZScsICd2YWx1ZScsICdzaXplJywg
        J3BhdHRlcm4nLCAnbmFtZScsICdtaW4nLCAnbWF4J10sCgogIC8qKgogICAg
        VGhlIGB2YWx1ZWAgYXR0cmlidXRlIG9mIHRoZSBpbnB1dCBlbGVtZW50LiBB
        cyB0aGUgdXNlciBpbnB1dHMgdGV4dCwgdGhpcwogICAgcHJvcGVydHkgaXMg
        dXBkYXRlZCBsaXZlLgoKICAgIEBwcm9wZXJ0eSB2YWx1ZQogICAgQHR5cGUg
        U3RyaW5nCiAgICBAZGVmYXVsdCAiIgogICovCiAgdmFsdWU6ICIiLAoKICAv
        KioKICAgIFRoZSBgdHlwZWAgYXR0cmlidXRlIG9mIHRoZSBpbnB1dCBlbGVt
        ZW50LgoKICAgIEBwcm9wZXJ0eSB0eXBlCiAgICBAdHlwZSBTdHJpbmcKICAg
        IEBkZWZhdWx0ICJ0ZXh0IgogICovCiAgdHlwZTogInRleHQiLAoKICAvKioK
        ICAgIFRoZSBgc2l6ZWAgb2YgdGhlIHRleHQgZmllbGQgaW4gY2hhcmFjdGVy
        cy4KCiAgICBAcHJvcGVydHkgc2l6ZQogICAgQHR5cGUgU3RyaW5nCiAgICBA
        ZGVmYXVsdCBudWxsCiAgKi8KICBzaXplOiBudWxsLAoKICAvKioKICAgIFRo
        ZSBgcGF0dGVybmAgYXR0cmlidXRlIG9mIGlucHV0IGVsZW1lbnQuCgogICAg
        QHByb3BlcnR5IHBhdHRlcm4KICAgIEB0eXBlIFN0cmluZwogICAgQGRlZmF1
        bHQgbnVsbAogICovCiAgcGF0dGVybjogbnVsbCwKCiAgLyoqCiAgICBUaGUg
        YG1pbmAgYXR0cmlidXRlIG9mIGlucHV0IGVsZW1lbnQgdXNlZCB3aXRoIGB0
        eXBlPSJudW1iZXIiYCBvciBgdHlwZT0icmFuZ2UiYC4KCiAgICBAcHJvcGVy
        dHkgbWluIAogICAgQHR5cGUgU3RyaW5nCiAgICBAZGVmYXVsdCBudWxsCiAg
        Ki8KICBtaW46IG51bGwsCgogIC8qKgogICAgVGhlIGBtYXhgIGF0dHJpYnV0
        ZSBvZiBpbnB1dCBlbGVtZW50IHVzZWQgd2l0aCBgdHlwZT0ibnVtYmVyImAg
        b3IgYHR5cGU9InJhbmdlImAuCgogICAgQHByb3BlcnR5IG1heCAKICAgIEB0
        eXBlIFN0cmluZwogICAgQGRlZmF1bHQgbnVsbAogICovCiAgbWF4OiBudWxs
        Cn0pOwoKfSkoKTsKCgoKKGZ1bmN0aW9uKCkgewovKioKQG1vZHVsZSBlbWJl
        cgpAc3VibW9kdWxlIGVtYmVyLWhhbmRsZWJhcnMKKi8KCnZhciBnZXQgPSBF
        bWJlci5nZXQsIHNldCA9IEVtYmVyLnNldDsKCi8qKgogIFRoZSBpbnRlcm5h
        bCBjbGFzcyB1c2VkIHRvIGNyZWF0ZSB0ZXh0YXJlYSBlbGVtZW50IHdoZW4g
        dGhlIGB7e3RleHRhcmVhfX1gCiAgaGVscGVyIGlzIHVzZWQuCgogIFNlZSBb
        aGFuZGxlYmFycy5oZWxwZXJzLnRleHRhcmVhXSgvYXBpL2NsYXNzZXMvRW1i
        ZXIuSGFuZGxlYmFycy5oZWxwZXJzLmh0bWwjbWV0aG9kX3RleHRhcmVhKSAg
        Zm9yIHVzYWdlIGRldGFpbHMuCgogICMjIExheW91dCBhbmQgTGF5b3V0TmFt
        ZSBwcm9wZXJ0aWVzCgogIEJlY2F1c2UgSFRNTCBgdGV4dGFyZWFgIGVsZW1l
        bnRzIGRvIG5vdCBjb250YWluIGlubmVyIEhUTUwgdGhlIGBsYXlvdXRgIGFu
        ZAogIGBsYXlvdXROYW1lYCBwcm9wZXJ0aWVzIHdpbGwgbm90IGJlIGFwcGxp
        ZWQuIFNlZSBbRW1iZXIuVmlld10oL2FwaS9jbGFzc2VzL0VtYmVyLlZpZXcu
        aHRtbCkncwogIGxheW91dCBzZWN0aW9uIGZvciBtb3JlIGluZm9ybWF0aW9u
        LgoKICBAY2xhc3MgVGV4dEFyZWEKICBAbmFtZXNwYWNlIEVtYmVyCiAgQGV4
        dGVuZHMgRW1iZXIuQ29tcG9uZW50CiAgQHVzZXMgRW1iZXIuVGV4dFN1cHBv
        cnQKKi8KRW1iZXIuVGV4dEFyZWEgPSBFbWJlci5Db21wb25lbnQuZXh0ZW5k
        KEVtYmVyLlRleHRTdXBwb3J0LCB7CiAgY2xhc3NOYW1lczogWydlbWJlci10
        ZXh0LWFyZWEnXSwKCiAgdGFnTmFtZTogInRleHRhcmVhIiwKICBhdHRyaWJ1
        dGVCaW5kaW5nczogWydyb3dzJywgJ2NvbHMnLCAnbmFtZSddLAogIHJvd3M6
        IG51bGwsCiAgY29sczogbnVsbCwKCiAgX3VwZGF0ZUVsZW1lbnRWYWx1ZTog
        RW1iZXIub2JzZXJ2ZXIoJ3ZhbHVlJywgZnVuY3Rpb24oKSB7CiAgICAvLyBX
        ZSBkbyB0aGlzIGNoZWNrIHNvIGN1cnNvciBwb3NpdGlvbiBkb2Vzbid0IGdl
        dCBhZmZlY3RlZCBpbiBJRQogICAgdmFyIHZhbHVlID0gZ2V0KHRoaXMsICd2
        YWx1ZScpLAogICAgICAgICRlbCA9IHRoaXMuJCgpOwogICAgaWYgKCRlbCAm
        JiB2YWx1ZSAhPT0gJGVsLnZhbCgpKSB7CiAgICAgICRlbC52YWwodmFsdWUp
        OwogICAgfQogIH0pLAoKICBpbml0OiBmdW5jdGlvbigpIHsKICAgIHRoaXMu
        X3N1cGVyKCk7CiAgICB0aGlzLm9uKCJkaWRJbnNlcnRFbGVtZW50IiwgdGhp
        cywgdGhpcy5fdXBkYXRlRWxlbWVudFZhbHVlKTsKICB9Cgp9KTsKCn0pKCk7
        CgoKCihmdW5jdGlvbigpIHsKLypqc2hpbnQgZXFlcWVxOmZhbHNlICovCgov
        KioKQG1vZHVsZSBlbWJlcgpAc3VibW9kdWxlIGVtYmVyLWhhbmRsZWJhcnMK
        Ki8KCnZhciBzZXQgPSBFbWJlci5zZXQsCiAgICBnZXQgPSBFbWJlci5nZXQs
        CiAgICBpbmRleE9mID0gRW1iZXIuRW51bWVyYWJsZVV0aWxzLmluZGV4T2Ys
        CiAgICBpbmRleGVzT2YgPSBFbWJlci5FbnVtZXJhYmxlVXRpbHMuaW5kZXhl
        c09mLAogICAgZm9yRWFjaCA9IEVtYmVyLkVudW1lcmFibGVVdGlscy5mb3JF
        YWNoLAogICAgcmVwbGFjZSA9IEVtYmVyLkVudW1lcmFibGVVdGlscy5yZXBs
        YWNlLAogICAgaXNBcnJheSA9IEVtYmVyLmlzQXJyYXksCiAgICBwcmVjb21w
        aWxlVGVtcGxhdGUgPSBFbWJlci5IYW5kbGViYXJzLmNvbXBpbGU7CgpFbWJl
        ci5TZWxlY3RPcHRpb24gPSBFbWJlci5WaWV3LmV4dGVuZCh7CiAgdGFnTmFt
        ZTogJ29wdGlvbicsCiAgYXR0cmlidXRlQmluZGluZ3M6IFsndmFsdWUnLCAn
        c2VsZWN0ZWQnXSwKCiAgZGVmYXVsdFRlbXBsYXRlOiBmdW5jdGlvbihjb250
        ZXh0LCBvcHRpb25zKSB7CiAgICBvcHRpb25zID0geyBkYXRhOiBvcHRpb25z
        LmRhdGEsIGhhc2g6IHt9IH07CiAgICBFbWJlci5IYW5kbGViYXJzLmhlbHBl
        cnMuYmluZC5jYWxsKGNvbnRleHQsICJ2aWV3LmxhYmVsIiwgb3B0aW9ucyk7
        CiAgfSwKCiAgaW5pdDogZnVuY3Rpb24oKSB7CiAgICB0aGlzLmxhYmVsUGF0
        aERpZENoYW5nZSgpOwogICAgdGhpcy52YWx1ZVBhdGhEaWRDaGFuZ2UoKTsK
        CiAgICB0aGlzLl9zdXBlcigpOwogIH0sCgogIHNlbGVjdGVkOiBFbWJlci5j
        b21wdXRlZChmdW5jdGlvbigpIHsKICAgIHZhciBjb250ZW50ID0gZ2V0KHRo
        aXMsICdjb250ZW50JyksCiAgICAgICAgc2VsZWN0aW9uID0gZ2V0KHRoaXMs
        ICdwYXJlbnRWaWV3LnNlbGVjdGlvbicpOwogICAgaWYgKGdldCh0aGlzLCAn
        cGFyZW50Vmlldy5tdWx0aXBsZScpKSB7CiAgICAgIHJldHVybiBzZWxlY3Rp
        b24gJiYgaW5kZXhPZihzZWxlY3Rpb24sIGNvbnRlbnQudmFsdWVPZigpKSA+
        IC0xOwogICAgfSBlbHNlIHsKICAgICAgLy8gUHJpbWl0aXZlcyBnZXQgcGFz
        c2VkIHRocm91Z2ggYmluZGluZ3MgYXMgb2JqZWN0cy4uLiBzaW5jZQogICAg
        ICAvLyBgbmV3IE51bWJlcig0KSAhPT0gNGAsIHdlIHVzZSBgPT1gIGJlbG93
        CiAgICAgIHJldHVybiBjb250ZW50ID09IHNlbGVjdGlvbjsKICAgIH0KICB9
        KS5wcm9wZXJ0eSgnY29udGVudCcsICdwYXJlbnRWaWV3LnNlbGVjdGlvbicp
        LAoKICBsYWJlbFBhdGhEaWRDaGFuZ2U6IEVtYmVyLm9ic2VydmVyKCdwYXJl
        bnRWaWV3Lm9wdGlvbkxhYmVsUGF0aCcsIGZ1bmN0aW9uKCkgewogICAgdmFy
        IGxhYmVsUGF0aCA9IGdldCh0aGlzLCAncGFyZW50Vmlldy5vcHRpb25MYWJl
        bFBhdGgnKTsKCiAgICBpZiAoIWxhYmVsUGF0aCkgeyByZXR1cm47IH0KCiAg
        ICBFbWJlci5kZWZpbmVQcm9wZXJ0eSh0aGlzLCAnbGFiZWwnLCBFbWJlci5j
        b21wdXRlZChmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIGdldCh0aGlzLCBs
        YWJlbFBhdGgpOwogICAgfSkucHJvcGVydHkobGFiZWxQYXRoKSk7CiAgfSks
        CgogIHZhbHVlUGF0aERpZENoYW5nZTogRW1iZXIub2JzZXJ2ZXIoJ3BhcmVu
        dFZpZXcub3B0aW9uVmFsdWVQYXRoJywgZnVuY3Rpb24oKSB7CiAgICB2YXIg
        dmFsdWVQYXRoID0gZ2V0KHRoaXMsICdwYXJlbnRWaWV3Lm9wdGlvblZhbHVl
        UGF0aCcpOwoKICAgIGlmICghdmFsdWVQYXRoKSB7IHJldHVybjsgfQoKICAg
        IEVtYmVyLmRlZmluZVByb3BlcnR5KHRoaXMsICd2YWx1ZScsIEVtYmVyLmNv
        bXB1dGVkKGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gZ2V0KHRoaXMsIHZh
        bHVlUGF0aCk7CiAgICB9KS5wcm9wZXJ0eSh2YWx1ZVBhdGgpKTsKICB9KQp9
        KTsKCkVtYmVyLlNlbGVjdE9wdGdyb3VwID0gRW1iZXIuQ29sbGVjdGlvblZp
        ZXcuZXh0ZW5kKHsKICB0YWdOYW1lOiAnb3B0Z3JvdXAnLAogIGF0dHJpYnV0
        ZUJpbmRpbmdzOiBbJ2xhYmVsJ10sCgogIHNlbGVjdGlvbkJpbmRpbmc6ICdw
        YXJlbnRWaWV3LnNlbGVjdGlvbicsCiAgbXVsdGlwbGVCaW5kaW5nOiAncGFy
        ZW50Vmlldy5tdWx0aXBsZScsCiAgb3B0aW9uTGFiZWxQYXRoQmluZGluZzog
        J3BhcmVudFZpZXcub3B0aW9uTGFiZWxQYXRoJywKICBvcHRpb25WYWx1ZVBh
        dGhCaW5kaW5nOiAncGFyZW50Vmlldy5vcHRpb25WYWx1ZVBhdGgnLAoKICBp
        dGVtVmlld0NsYXNzQmluZGluZzogJ3BhcmVudFZpZXcub3B0aW9uVmlldycK
        fSk7CgovKioKICBUaGUgYEVtYmVyLlNlbGVjdGAgdmlldyBjbGFzcyByZW5k
        ZXJzIGEKICBbc2VsZWN0XShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9y
        Zy9lbi9IVE1ML0VsZW1lbnQvc2VsZWN0KSBIVE1MIGVsZW1lbnQsCiAgYWxs
        b3dpbmcgdGhlIHVzZXIgdG8gY2hvb3NlIGZyb20gYSBsaXN0IG9mIG9wdGlv
        bnMuCgogIFRoZSB0ZXh0IGFuZCBgdmFsdWVgIHByb3BlcnR5IG9mIGVhY2gg
        YDxvcHRpb24+YCBlbGVtZW50IHdpdGhpbiB0aGUKICBgPHNlbGVjdD5gIGVs
        ZW1lbnQgYXJlIHBvcHVsYXRlZCBmcm9tIHRoZSBvYmplY3RzIGluIHRoZSBg
        RWxlbWVudC5TZWxlY3RgJ3MKICBgY29udGVudGAgcHJvcGVydHkuIFRoZSB1
        bmRlcmx5aW5nIGRhdGEgb2JqZWN0IG9mIHRoZSBzZWxlY3RlZCBgPG9wdGlv
        bj5gIGlzCiAgc3RvcmVkIGluIHRoZSBgRWxlbWVudC5TZWxlY3RgJ3MgYHZh
        bHVlYCBwcm9wZXJ0eS4KCiAgIyMgVGhlIENvbnRlbnQgUHJvcGVydHkgKGFy
        cmF5IG9mIHN0cmluZ3MpCgogIFRoZSBzaW1wbGVzdCB2ZXJzaW9uIG9mIGFu
        IGBFbWJlci5TZWxlY3RgIHRha2VzIGFuIGFycmF5IG9mIHN0cmluZ3MgYXMg
        aXRzCiAgYGNvbnRlbnRgIHByb3BlcnR5LiBUaGUgc3RyaW5nIHdpbGwgYmUg
        dXNlZCBhcyBib3RoIHRoZSBgdmFsdWVgIHByb3BlcnR5IGFuZAogIHRoZSBp
        bm5lciB0ZXh0IG9mIGVhY2ggYDxvcHRpb24+YCBlbGVtZW50IGluc2lkZSB0
        aGUgcmVuZGVyZWQgYDxzZWxlY3Q+YC4KCiAgRXhhbXBsZToKCiAgYGBgamF2
        YXNjcmlwdAogIEFwcC5BcHBsaWNhdGlvbkNvbnRyb2xsZXIgPSBFbWJlci5D
        b250cm9sbGVyLmV4dGVuZCh7CiAgICBuYW1lczogWyJZZWh1ZGEiLCAiVG9t
        Il0KICB9KTsKICBgYGAKCiAgYGBgaGFuZGxlYmFycwogIHt7dmlldyBFbWJl
        ci5TZWxlY3QgY29udGVudD1uYW1lc319CiAgYGBgCgogIFdvdWxkIHJlc3Vs
        dCBpbiB0aGUgZm9sbG93aW5nIEhUTUw6CgogIGBgYGh0bWwKICA8c2VsZWN0
        IGNsYXNzPSJlbWJlci1zZWxlY3QiPgogICAgPG9wdGlvbiB2YWx1ZT0iWWVo
        dWRhIj5ZZWh1ZGE8L29wdGlvbj4KICAgIDxvcHRpb24gdmFsdWU9IlRvbSI+
        VG9tPC9vcHRpb24+CiAgPC9zZWxlY3Q+CiAgYGBgCgogIFlvdSBjYW4gY29u
        dHJvbCB3aGljaCBgPG9wdGlvbj5gIGlzIHNlbGVjdGVkIHRocm91Z2ggdGhl
        IGBFbWJlci5TZWxlY3RgJ3MKICBgdmFsdWVgIHByb3BlcnR5OgoKICBgYGBq
        YXZhc2NyaXB0CiAgQXBwLkFwcGxpY2F0aW9uQ29udHJvbGxlciA9IEVtYmVy
        LkNvbnRyb2xsZXIuZXh0ZW5kKHsKICAgIHNlbGVjdGVkTmFtZTogJ1RvbScs
        CiAgICBuYW1lczogWyJZZWh1ZGEiLCAiVG9tIl0KICB9KTsKICBgYGAKCiAg
        YGBgaGFuZGxlYmFycwogIHt7dmlldyBFbWJlci5TZWxlY3QKICAgICAgICAg
        Y29udGVudD1uYW1lcwogICAgICAgICB2YWx1ZT1zZWxlY3RlZE5hbWUKICB9
        fQogIGBgYAoKICBXb3VsZCByZXN1bHQgaW4gdGhlIGZvbGxvd2luZyBIVE1M
        IHdpdGggdGhlIGA8b3B0aW9uPmAgZm9yICdUb20nIHNlbGVjdGVkOgoKICBg
        YGBodG1sCiAgPHNlbGVjdCBjbGFzcz0iZW1iZXItc2VsZWN0Ij4KICAgIDxv
        cHRpb24gdmFsdWU9IlllaHVkYSI+WWVodWRhPC9vcHRpb24+CiAgICA8b3B0
        aW9uIHZhbHVlPSJUb20iIHNlbGVjdGVkPSJzZWxlY3RlZCI+VG9tPC9vcHRp
        b24+CiAgPC9zZWxlY3Q+CiAgYGBgCgogIEEgdXNlciBpbnRlcmFjdGluZyB3
        aXRoIHRoZSByZW5kZXJlZCBgPHNlbGVjdD5gIHRvIGNob29zZSAiWWVodWRh
        IiB3b3VsZAogIHVwZGF0ZSB0aGUgdmFsdWUgb2YgYHNlbGVjdGVkTmFtZWAg
        dG8gIlllaHVkYSIuCgogICMjIFRoZSBDb250ZW50IFByb3BlcnR5IChhcnJh
        eSBvZiBPYmplY3RzKQoKICBBbiBgRW1iZXIuU2VsZWN0YCBjYW4gYWxzbyB0
        YWtlIGFuIGFycmF5IG9mIEphdmFTY3JpcHQgb3IgRW1iZXIgb2JqZWN0cyBh
        cwogIGl0cyBgY29udGVudGAgcHJvcGVydHkuCgogIFdoZW4gdXNpbmcgb2Jq
        ZWN0cyB5b3UgbmVlZCB0byB0ZWxsIHRoZSBgRW1iZXIuU2VsZWN0YCB3aGlj
        aCBwcm9wZXJ0eSBzaG91bGQKICBiZSBhY2Nlc3NlZCBvbiBlYWNoIG9iamVj
        dCB0byBzdXBwbHkgdGhlIGB2YWx1ZWAgYXR0cmlidXRlIG9mIHRoZSBgPG9w
        dGlvbj5gCiAgYW5kIHdoaWNoIHByb3BlcnR5IHNob3VsZCBiZSB1c2VkIHRv
        IHN1cHBseSB0aGUgZWxlbWVudCB0ZXh0LgoKICBUaGUgYG9wdGlvblZhbHVl
        UGF0aGAgb3B0aW9uIGlzIHVzZWQgdG8gc3BlY2lmeSB0aGUgcGF0aCBvbiBl
        YWNoIG9iamVjdCB0bwogIHRoZSBkZXNpcmVkIHByb3BlcnR5IGZvciB0aGUg
        YHZhbHVlYCBhdHRyaWJ1dGUuIFRoZSBgb3B0aW9uTGFiZWxQYXRoYAogIHNw
        ZWNpZmllcyB0aGUgcGF0aCBvbiBlYWNoIG9iamVjdCB0byB0aGUgZGVzaXJl
        ZCBwcm9wZXJ0eSBmb3IgdGhlCiAgZWxlbWVudCdzIHRleHQuIEJvdGggcGF0
        aHMgbXVzdCByZWZlcmVuY2UgZWFjaCBvYmplY3QgaXRzZWxmIGFzIGBjb250
        ZW50YDoKCiAgYGBgamF2YXNjcmlwdAogIEFwcC5BcHBsaWNhdGlvbkNvbnRy
        b2xsZXIgPSBFbWJlci5Db250cm9sbGVyLmV4dGVuZCh7CiAgICBwcm9ncmFt
        bWVyczogWwogICAgICB7Zmlyc3ROYW1lOiAiWWVodWRhIiwgaWQ6IDF9LAog
        ICAgICB7Zmlyc3ROYW1lOiAiVG9tIiwgICAgaWQ6IDJ9CiAgICBdCiAgfSk7
        CiAgYGBgCgogIGBgYGhhbmRsZWJhcnMKICB7e3ZpZXcgRW1iZXIuU2VsZWN0
        CiAgICAgICAgIGNvbnRlbnQ9cHJvZ3JhbW1lcnMKICAgICAgICAgb3B0aW9u
        VmFsdWVQYXRoPSJjb250ZW50LmlkIgogICAgICAgICBvcHRpb25MYWJlbFBh
        dGg9ImNvbnRlbnQuZmlyc3ROYW1lIn19CiAgYGBgCgogIFdvdWxkIHJlc3Vs
        dCBpbiB0aGUgZm9sbG93aW5nIEhUTUw6CgogIGBgYGh0bWwKICA8c2VsZWN0
        IGNsYXNzPSJlbWJlci1zZWxlY3QiPgogICAgPG9wdGlvbiB2YWx1ZT0iMSI+
        WWVodWRhPC9vcHRpb24+CiAgICA8b3B0aW9uIHZhbHVlPSIyIj5Ub208L29w
        dGlvbj4KICA8L3NlbGVjdD4KICBgYGAKCiAgVGhlIGB2YWx1ZWAgYXR0cmli
        dXRlIG9mIHRoZSBzZWxlY3RlZCBgPG9wdGlvbj5gIHdpdGhpbiBhbiBgRW1i
        ZXIuU2VsZWN0YAogIGNhbiBiZSBib3VuZCB0byBhIHByb3BlcnR5IG9uIGFu
        b3RoZXIgb2JqZWN0OgoKICBgYGBqYXZhc2NyaXB0CiAgQXBwLkFwcGxpY2F0
        aW9uQ29udHJvbGxlciA9IEVtYmVyLkNvbnRyb2xsZXIuZXh0ZW5kKHsKICAg
        IHByb2dyYW1tZXJzOiBbCiAgICAgIHtmaXJzdE5hbWU6ICJZZWh1ZGEiLCBp
        ZDogMX0sCiAgICAgIHtmaXJzdE5hbWU6ICJUb20iLCAgICBpZDogMn0KICAg
        IF0sCiAgICBjdXJyZW50UHJvZ3JhbW1lcjogewogICAgICBpZDogMgogICAg
        fQogIH0pOwogIGBgYAoKICBgYGBoYW5kbGViYXJzCiAge3t2aWV3IEVtYmVy
        LlNlbGVjdAogICAgICAgICBjb250ZW50PXByb2dyYW1tZXJzCiAgICAgICAg
        IG9wdGlvblZhbHVlUGF0aD0iY29udGVudC5pZCIKICAgICAgICAgb3B0aW9u
        TGFiZWxQYXRoPSJjb250ZW50LmZpcnN0TmFtZSIKICAgICAgICAgdmFsdWU9
        Y3VycmVudFByb2dyYW1tZXIuaWR9fQogIGBgYAoKICBXb3VsZCByZXN1bHQg
        aW4gdGhlIGZvbGxvd2luZyBIVE1MIHdpdGggYSBzZWxlY3RlZCBvcHRpb246
        CgogIGBgYGh0bWwKICA8c2VsZWN0IGNsYXNzPSJlbWJlci1zZWxlY3QiPgog
        ICAgPG9wdGlvbiB2YWx1ZT0iMSI+WWVodWRhPC9vcHRpb24+CiAgICA8b3B0
        aW9uIHZhbHVlPSIyIiBzZWxlY3RlZD0ic2VsZWN0ZWQiPlRvbTwvb3B0aW9u
        PgogIDwvc2VsZWN0PgogIGBgYAoKICBJbnRlcmFjdGluZyB3aXRoIHRoZSBy
        ZW5kZXJlZCBlbGVtZW50IGJ5IHNlbGVjdGluZyB0aGUgZmlyc3Qgb3B0aW9u
        CiAgKCdZZWh1ZGEnKSB3aWxsIHVwZGF0ZSB0aGUgYGlkYCBvZiBgY3VycmVu
        dFByb2dyYW1tZXJgCiAgdG8gbWF0Y2ggdGhlIGB2YWx1ZWAgcHJvcGVydHkg
        b2YgdGhlIG5ld2x5IHNlbGVjdGVkIGA8b3B0aW9uPmAuCgogIEFsdGVybmF0
        aXZlbHksIHlvdSBjYW4gY29udHJvbCBzZWxlY3Rpb24gdGhyb3VnaCB0aGUg
        dW5kZXJseWluZyBvYmplY3RzCiAgdXNlZCB0byByZW5kZXIgZWFjaCBvYmpl
        Y3QgYnkgYmluZGluZyB0aGUgYHNlbGVjdGlvbmAgb3B0aW9uLiBXaGVuIHRo
        ZSBzZWxlY3RlZAogIGA8b3B0aW9uPmAgaXMgY2hhbmdlZCwgdGhlIHByb3Bl
        cnR5IHBhdGggcHJvdmlkZWQgdG8gYHNlbGVjdGlvbmAKICB3aWxsIGJlIHVw
        ZGF0ZWQgdG8gbWF0Y2ggdGhlIGNvbnRlbnQgb2JqZWN0IG9mIHRoZSByZW5k
        ZXJlZCBgPG9wdGlvbj5gCiAgZWxlbWVudDoKCiAgYGBgamF2YXNjcmlwdAog
        IEFwcC5BcHBsaWNhdGlvbkNvbnRyb2xsZXIgPSBFbWJlci5Db250cm9sbGVy
        LmV4dGVuZCh7CiAgICBzZWxlY3RlZFBlcnNvbjogbnVsbCwKICAgIHByb2dy
        YW1tZXJzOiBbCiAgICAgIHtmaXJzdE5hbWU6ICJZZWh1ZGEiLCBpZDogMX0s
        CiAgICAgIHtmaXJzdE5hbWU6ICJUb20iLCAgICBpZDogMn0KICAgIF0KICB9
        KTsKICBgYGAKCiAgYGBgaGFuZGxlYmFycwogIHt7dmlldyBFbWJlci5TZWxl
        Y3QKICAgICAgICAgY29udGVudD1wcm9ncmFtbWVycwogICAgICAgICBvcHRp
        b25WYWx1ZVBhdGg9ImNvbnRlbnQuaWQiCiAgICAgICAgIG9wdGlvbkxhYmVs
        UGF0aD0iY29udGVudC5maXJzdE5hbWUiCiAgICAgICAgIHNlbGVjdGlvbj1z
        ZWxlY3RlZFBlcnNvbn19CiAgYGBgCgogIFdvdWxkIHJlc3VsdCBpbiB0aGUg
        Zm9sbG93aW5nIEhUTUwgd2l0aCBhIHNlbGVjdGVkIG9wdGlvbjoKCiAgYGBg
        aHRtbAogIDxzZWxlY3QgY2xhc3M9ImVtYmVyLXNlbGVjdCI+CiAgICA8b3B0
        aW9uIHZhbHVlPSIxIj5ZZWh1ZGE8L29wdGlvbj4KICAgIDxvcHRpb24gdmFs
        dWU9IjIiIHNlbGVjdGVkPSJzZWxlY3RlZCI+VG9tPC9vcHRpb24+CiAgPC9z
        ZWxlY3Q+CiAgYGBgCgogIEludGVyYWN0aW5nIHdpdGggdGhlIHJlbmRlcmVk
        IGVsZW1lbnQgYnkgc2VsZWN0aW5nIHRoZSBmaXJzdCBvcHRpb24KICAoJ1ll
        aHVkYScpIHdpbGwgdXBkYXRlIHRoZSBgc2VsZWN0ZWRQZXJzb25gIHRvIG1h
        dGNoIHRoZSBvYmplY3Qgb2YKICB0aGUgbmV3bHkgc2VsZWN0ZWQgYDxvcHRp
        b24+YC4gSW4gdGhpcyBjYXNlIGl0IGlzIHRoZSBmaXJzdCBvYmplY3QKICBp
        biB0aGUgYHByb2dyYW1tZXJzYAoKICAjIyBTdXBwbHlpbmcgYSBQcm9tcHQK
        CiAgQSBgbnVsbGAgdmFsdWUgZm9yIHRoZSBgRW1iZXIuU2VsZWN0YCdzIGB2
        YWx1ZWAgb3IgYHNlbGVjdGlvbmAgcHJvcGVydHkKICByZXN1bHRzIGluIHRo
        ZXJlIGJlaW5nIG5vIGA8b3B0aW9uPmAgd2l0aCBhIGBzZWxlY3RlZGAgYXR0
        cmlidXRlOgoKICBgYGBqYXZhc2NyaXB0CiAgQXBwLkFwcGxpY2F0aW9uQ29u
        dHJvbGxlciA9IEVtYmVyLkNvbnRyb2xsZXIuZXh0ZW5kKHsKICAgIHNlbGVj
        dGVkUHJvZ3JhbW1lcjogbnVsbCwKICAgIHByb2dyYW1tZXJzOiBbCiAgICAg
        ICJZZWh1ZGEiLAogICAgICAiVG9tIgogICAgXQogIH0pOwogIGBgYAoKICBg
        YGAgaGFuZGxlYmFycwogIHt7dmlldyBFbWJlci5TZWxlY3QKICAgICAgICAg
        Y29udGVudD1wcm9ncmFtbWVycwogICAgICAgICB2YWx1ZT1zZWxlY3RlZFBy
        b2dyYW1tZXIKICB9fQogIGBgYAoKICBXb3VsZCByZXN1bHQgaW4gdGhlIGZv
        bGxvd2luZyBIVE1MOgoKICBgYGBodG1sCiAgPHNlbGVjdCBjbGFzcz0iZW1i
        ZXItc2VsZWN0Ij4KICAgIDxvcHRpb24gdmFsdWU9IlllaHVkYSI+WWVodWRh
        PC9vcHRpb24+CiAgICA8b3B0aW9uIHZhbHVlPSJUb20iPlRvbTwvb3B0aW9u
        PgogIDwvc2VsZWN0PgogIGBgYAoKICBBbHRob3VnaCBgc2VsZWN0ZWRQcm9n
        cmFtbWVyYCBpcyBgbnVsbGAgYW5kIG5vIGA8b3B0aW9uPmAKICBoYXMgYSBg
        c2VsZWN0ZWRgIGF0dHJpYnV0ZSB0aGUgcmVuZGVyZWQgSFRNTCB3aWxsIGRp
        c3BsYXkgdGhlCiAgZmlyc3QgaXRlbSBhcyB0aG91Z2ggaXQgd2VyZSBzZWxl
        Y3RlZC4gWW91IGNhbiBzdXBwbHkgYSBzdHJpbmcKICB2YWx1ZSBmb3IgdGhl
        IGBFbWJlci5TZWxlY3RgIHRvIGRpc3BsYXkgd2hlbiB0aGVyZSBpcyBubyBz
        ZWxlY3Rpb24KICB3aXRoIHRoZSBgcHJvbXB0YCBvcHRpb246CgogIGBgYGph
        dmFzY3JpcHQKICBBcHAuQXBwbGljYXRpb25Db250cm9sbGVyID0gRW1iZXIu
        Q29udHJvbGxlci5leHRlbmQoewogICAgc2VsZWN0ZWRQcm9ncmFtbWVyOiBu
        dWxsLAogICAgcHJvZ3JhbW1lcnM6IFsKICAgICAgIlllaHVkYSIsCiAgICAg
        ICJUb20iCiAgICBdCiAgfSk7CiAgYGBgCgogIGBgYGhhbmRsZWJhcnMKICB7
        e3ZpZXcgRW1iZXIuU2VsZWN0CiAgICAgICAgIGNvbnRlbnQ9cHJvZ3JhbW1l
        cnMKICAgICAgICAgdmFsdWU9c2VsZWN0ZWRQcm9ncmFtbWVyCiAgICAgICAg
        IHByb21wdD0iUGxlYXNlIHNlbGVjdCBhIG5hbWUiCiAgfX0KICBgYGAKCiAg
        V291bGQgcmVzdWx0IGluIHRoZSBmb2xsb3dpbmcgSFRNTDoKCiAgYGBgaHRt
        bAogIDxzZWxlY3QgY2xhc3M9ImVtYmVyLXNlbGVjdCI+CiAgICA8b3B0aW9u
        PlBsZWFzZSBzZWxlY3QgYSBuYW1lPC9vcHRpb24+CiAgICA8b3B0aW9uIHZh
        bHVlPSJZZWh1ZGEiPlllaHVkYTwvb3B0aW9uPgogICAgPG9wdGlvbiB2YWx1
        ZT0iVG9tIj5Ub208L29wdGlvbj4KICA8L3NlbGVjdD4KICBgYGAKCiAgQGNs
        YXNzIFNlbGVjdAogIEBuYW1lc3BhY2UgRW1iZXIKICBAZXh0ZW5kcyBFbWJl
        ci5WaWV3CiovCkVtYmVyLlNlbGVjdCA9IEVtYmVyLlZpZXcuZXh0ZW5kKHsK
        ICB0YWdOYW1lOiAnc2VsZWN0JywKICBjbGFzc05hbWVzOiBbJ2VtYmVyLXNl
        bGVjdCddLAogIGRlZmF1bHRUZW1wbGF0ZTogRW1iZXIuSGFuZGxlYmFycy50
        ZW1wbGF0ZShmdW5jdGlvbiBhbm9ueW1vdXMoSGFuZGxlYmFycyxkZXB0aDAs
        aGVscGVycyxwYXJ0aWFscyxkYXRhKSB7CnRoaXMuY29tcGlsZXJJbmZvID0g
        WzQsJz49IDEuMC4wJ107CmhlbHBlcnMgPSB0aGlzLm1lcmdlKGhlbHBlcnMs
        IEVtYmVyLkhhbmRsZWJhcnMuaGVscGVycyk7IGRhdGEgPSBkYXRhIHx8IHt9
        OwogIHZhciBidWZmZXIgPSAnJywgc3RhY2sxLCBlc2NhcGVFeHByZXNzaW9u
        PXRoaXMuZXNjYXBlRXhwcmVzc2lvbiwgc2VsZj10aGlzOwoKZnVuY3Rpb24g
        cHJvZ3JhbTEoZGVwdGgwLGRhdGEpIHsKICAKICB2YXIgYnVmZmVyID0gJycs
        IHN0YWNrMTsKICBkYXRhLmJ1ZmZlci5wdXNoKCI8b3B0aW9uIHZhbHVlPVwi
        XCI+Iik7CiAgc3RhY2sxID0gaGVscGVycy5fdHJpYWdlTXVzdGFjaGUuY2Fs
        bChkZXB0aDAsICJ2aWV3LnByb21wdCIsIHtoYXNoOnt9LGhhc2hUeXBlczp7
        fSxoYXNoQ29udGV4dHM6e30sY29udGV4dHM6W2RlcHRoMF0sdHlwZXM6WyJJ
        RCJdLGRhdGE6ZGF0YX0pOwogIGlmKHN0YWNrMSB8fCBzdGFjazEgPT09IDAp
        IHsgZGF0YS5idWZmZXIucHVzaChzdGFjazEpOyB9CiAgZGF0YS5idWZmZXIu
        cHVzaCgiPC9vcHRpb24+Iik7CiAgcmV0dXJuIGJ1ZmZlcjsKICB9CgpmdW5j
        dGlvbiBwcm9ncmFtMyhkZXB0aDAsZGF0YSkgewogIAogIHZhciBzdGFjazE7
        CiAgc3RhY2sxID0gaGVscGVycy5lYWNoLmNhbGwoZGVwdGgwLCAidmlldy5n
        cm91cGVkQ29udGVudCIsIHtoYXNoOnt9LGhhc2hUeXBlczp7fSxoYXNoQ29u
        dGV4dHM6e30saW52ZXJzZTpzZWxmLm5vb3AsZm46c2VsZi5wcm9ncmFtKDQs
        IHByb2dyYW00LCBkYXRhKSxjb250ZXh0czpbZGVwdGgwXSx0eXBlczpbIklE
        Il0sZGF0YTpkYXRhfSk7CiAgaWYoc3RhY2sxIHx8IHN0YWNrMSA9PT0gMCkg
        eyBkYXRhLmJ1ZmZlci5wdXNoKHN0YWNrMSk7IH0KICBlbHNlIHsgZGF0YS5i
        dWZmZXIucHVzaCgnJyk7IH0KICB9CmZ1bmN0aW9uIHByb2dyYW00KGRlcHRo
        MCxkYXRhKSB7CiAgCiAgCiAgZGF0YS5idWZmZXIucHVzaChlc2NhcGVFeHBy
        ZXNzaW9uKGhlbHBlcnMudmlldy5jYWxsKGRlcHRoMCwgInZpZXcuZ3JvdXBW
        aWV3Iiwge2hhc2g6ewogICAgJ2NvbnRlbnQnOiAoImNvbnRlbnQiKSwKICAg
        ICdsYWJlbCc6ICgibGFiZWwiKQogIH0saGFzaFR5cGVzOnsnY29udGVudCc6
        ICJJRCIsJ2xhYmVsJzogIklEIn0saGFzaENvbnRleHRzOnsnY29udGVudCc6
        IGRlcHRoMCwnbGFiZWwnOiBkZXB0aDB9LGNvbnRleHRzOltkZXB0aDBdLHR5
        cGVzOlsiSUQiXSxkYXRhOmRhdGF9KSkpOwogIH0KCmZ1bmN0aW9uIHByb2dy
        YW02KGRlcHRoMCxkYXRhKSB7CiAgCiAgdmFyIHN0YWNrMTsKICBzdGFjazEg
        PSBoZWxwZXJzLmVhY2guY2FsbChkZXB0aDAsICJ2aWV3LmNvbnRlbnQiLCB7
        aGFzaDp7fSxoYXNoVHlwZXM6e30saGFzaENvbnRleHRzOnt9LGludmVyc2U6
        c2VsZi5ub29wLGZuOnNlbGYucHJvZ3JhbSg3LCBwcm9ncmFtNywgZGF0YSks
        Y29udGV4dHM6W2RlcHRoMF0sdHlwZXM6WyJJRCJdLGRhdGE6ZGF0YX0pOwog
        IGlmKHN0YWNrMSB8fCBzdGFjazEgPT09IDApIHsgZGF0YS5idWZmZXIucHVz
        aChzdGFjazEpOyB9CiAgZWxzZSB7IGRhdGEuYnVmZmVyLnB1c2goJycpOyB9
        CiAgfQpmdW5jdGlvbiBwcm9ncmFtNyhkZXB0aDAsZGF0YSkgewogIAogIAog
        IGRhdGEuYnVmZmVyLnB1c2goZXNjYXBlRXhwcmVzc2lvbihoZWxwZXJzLnZp
        ZXcuY2FsbChkZXB0aDAsICJ2aWV3Lm9wdGlvblZpZXciLCB7aGFzaDp7CiAg
        ICAnY29udGVudCc6ICgiIikKICB9LGhhc2hUeXBlczp7J2NvbnRlbnQnOiAi
        SUQifSxoYXNoQ29udGV4dHM6eydjb250ZW50JzogZGVwdGgwfSxjb250ZXh0
        czpbZGVwdGgwXSx0eXBlczpbIklEIl0sZGF0YTpkYXRhfSkpKTsKICB9Cgog
        IHN0YWNrMSA9IGhlbHBlcnNbJ2lmJ10uY2FsbChkZXB0aDAsICJ2aWV3LnBy
        b21wdCIsIHtoYXNoOnt9LGhhc2hUeXBlczp7fSxoYXNoQ29udGV4dHM6e30s
        aW52ZXJzZTpzZWxmLm5vb3AsZm46c2VsZi5wcm9ncmFtKDEsIHByb2dyYW0x
        LCBkYXRhKSxjb250ZXh0czpbZGVwdGgwXSx0eXBlczpbIklEIl0sZGF0YTpk
        YXRhfSk7CiAgaWYoc3RhY2sxIHx8IHN0YWNrMSA9PT0gMCkgeyBkYXRhLmJ1
        ZmZlci5wdXNoKHN0YWNrMSk7IH0KICBzdGFjazEgPSBoZWxwZXJzWydpZidd
        LmNhbGwoZGVwdGgwLCAidmlldy5vcHRpb25Hcm91cFBhdGgiLCB7aGFzaDp7
        fSxoYXNoVHlwZXM6e30saGFzaENvbnRleHRzOnt9LGludmVyc2U6c2VsZi5w
        cm9ncmFtKDYsIHByb2dyYW02LCBkYXRhKSxmbjpzZWxmLnByb2dyYW0oMywg
        cHJvZ3JhbTMsIGRhdGEpLGNvbnRleHRzOltkZXB0aDBdLHR5cGVzOlsiSUQi
        XSxkYXRhOmRhdGF9KTsKICBpZihzdGFjazEgfHwgc3RhY2sxID09PSAwKSB7
        IGRhdGEuYnVmZmVyLnB1c2goc3RhY2sxKTsgfQogIHJldHVybiBidWZmZXI7
        CiAgCn0pLAogIGF0dHJpYnV0ZUJpbmRpbmdzOiBbJ211bHRpcGxlJywgJ2Rp
        c2FibGVkJywgJ3RhYmluZGV4JywgJ25hbWUnXSwKCiAgLyoqCiAgICBUaGUg
        YG11bHRpcGxlYCBhdHRyaWJ1dGUgb2YgdGhlIHNlbGVjdCBlbGVtZW50LiBJ
        bmRpY2F0ZXMgd2hldGhlciBtdWx0aXBsZQogICAgb3B0aW9ucyBjYW4gYmUg
        c2VsZWN0ZWQuCgogICAgQHByb3BlcnR5IG11bHRpcGxlCiAgICBAdHlwZSBC
        b29sZWFuCiAgICBAZGVmYXVsdCBmYWxzZQogICovCiAgbXVsdGlwbGU6IGZh
        bHNlLAoKICAvKioKICAgIFRoZSBgZGlzYWJsZWRgIGF0dHJpYnV0ZSBvZiB0
        aGUgc2VsZWN0IGVsZW1lbnQuIEluZGljYXRlcyB3aGV0aGVyCiAgICB0aGUg
        ZWxlbWVudCBpcyBkaXNhYmxlZCBmcm9tIGludGVyYWN0aW9ucy4KCiAgICBA
        cHJvcGVydHkgZGlzYWJsZWQKICAgIEB0eXBlIEJvb2xlYW4KICAgIEBkZWZh
        dWx0IGZhbHNlCiAgKi8KICBkaXNhYmxlZDogZmFsc2UsCgogIC8qKgogICAg
        VGhlIGxpc3Qgb2Ygb3B0aW9ucy4KCiAgICBJZiBgb3B0aW9uTGFiZWxQYXRo
        YCBhbmQgYG9wdGlvblZhbHVlUGF0aGAgYXJlIG5vdCBvdmVycmlkZGVuLCB0
        aGlzIHNob3VsZAogICAgYmUgYSBsaXN0IG9mIHN0cmluZ3MsIHdoaWNoIHdp
        bGwgc2VydmUgc2ltdWx0YW5lb3VzbHkgYXMgbGFiZWxzIGFuZCB2YWx1ZXMu
        CgogICAgT3RoZXJ3aXNlLCB0aGlzIHNob3VsZCBiZSBhIGxpc3Qgb2Ygb2Jq
        ZWN0cy4gRm9yIGluc3RhbmNlOgoKICAgIGBgYGphdmFzY3JpcHQKICAgIEVt
        YmVyLlNlbGVjdC5jcmVhdGUoewogICAgICBjb250ZW50OiBFbWJlci5BKFsK
        ICAgICAgICAgIHsgaWQ6IDEsIGZpcnN0TmFtZTogJ1llaHVkYScgfSwKICAg
        ICAgICAgIHsgaWQ6IDIsIGZpcnN0TmFtZTogJ1RvbScgfQogICAgICAgIF0p
        LAogICAgICBvcHRpb25MYWJlbFBhdGg6ICdjb250ZW50LmZpcnN0TmFtZScs
        CiAgICAgIG9wdGlvblZhbHVlUGF0aDogJ2NvbnRlbnQuaWQnCiAgICB9KTsK
        ICAgIGBgYAoKICAgIEBwcm9wZXJ0eSBjb250ZW50CiAgICBAdHlwZSBBcnJh
        eQogICAgQGRlZmF1bHQgbnVsbAogICovCiAgY29udGVudDogbnVsbCwKCiAg
        LyoqCiAgICBXaGVuIGBtdWx0aXBsZWAgaXMgYGZhbHNlYCwgdGhlIGVsZW1l
        bnQgb2YgYGNvbnRlbnRgIHRoYXQgaXMgY3VycmVudGx5CiAgICBzZWxlY3Rl
        ZCwgaWYgYW55LgoKICAgIFdoZW4gYG11bHRpcGxlYCBpcyBgdHJ1ZWAsIGFu
        IGFycmF5IG9mIHN1Y2ggZWxlbWVudHMuCgogICAgQHByb3BlcnR5IHNlbGVj
        dGlvbgogICAgQHR5cGUgT2JqZWN0IG9yIEFycmF5CiAgICBAZGVmYXVsdCBu
        dWxsCiAgKi8KICBzZWxlY3Rpb246IG51bGwsCgogIC8qKgogICAgSW4gc2lu
        Z2xlIHNlbGVjdGlvbiBtb2RlICh3aGVuIGBtdWx0aXBsZWAgaXMgYGZhbHNl
        YCksIHZhbHVlIGNhbiBiZSB1c2VkIHRvCiAgICBnZXQgdGhlIGN1cnJlbnQg
        c2VsZWN0aW9uJ3MgdmFsdWUgb3Igc2V0IHRoZSBzZWxlY3Rpb24gYnkgaXQn
        cyB2YWx1ZS4KCiAgICBJdCBpcyBub3QgY3VycmVudGx5IHN1cHBvcnRlZCBp
        biBtdWx0aXBsZSBzZWxlY3Rpb24gbW9kZS4KCiAgICBAcHJvcGVydHkgdmFs
        dWUKICAgIEB0eXBlIFN0cmluZwogICAgQGRlZmF1bHQgbnVsbAogICovCiAg
        dmFsdWU6IEVtYmVyLmNvbXB1dGVkKGZ1bmN0aW9uKGtleSwgdmFsdWUpIHsK
        ICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAyKSB7IHJldHVybiB2YWx1
        ZTsgfQogICAgdmFyIHZhbHVlUGF0aCA9IGdldCh0aGlzLCAnb3B0aW9uVmFs
        dWVQYXRoJykucmVwbGFjZSgvXmNvbnRlbnRcLj8vLCAnJyk7CiAgICByZXR1
        cm4gdmFsdWVQYXRoID8gZ2V0KHRoaXMsICdzZWxlY3Rpb24uJyArIHZhbHVl
        UGF0aCkgOiBnZXQodGhpcywgJ3NlbGVjdGlvbicpOwogIH0pLnByb3BlcnR5
        KCdzZWxlY3Rpb24nKSwKCiAgLyoqCiAgICBJZiBnaXZlbiwgYSB0b3AtbW9z
        dCBkdW1teSBvcHRpb24gd2lsbCBiZSByZW5kZXJlZCB0byBzZXJ2ZSBhcyBh
        IHVzZXIKICAgIHByb21wdC4KCiAgICBAcHJvcGVydHkgcHJvbXB0CiAgICBA
        dHlwZSBTdHJpbmcKICAgIEBkZWZhdWx0IG51bGwKICAqLwogIHByb21wdDog
        bnVsbCwKCiAgLyoqCiAgICBUaGUgcGF0aCBvZiB0aGUgb3B0aW9uIGxhYmVs
        cy4gU2VlIFtjb250ZW50XSgvYXBpL2NsYXNzZXMvRW1iZXIuU2VsZWN0Lmh0
        bWwjcHJvcGVydHlfY29udGVudCkuCgogICAgQHByb3BlcnR5IG9wdGlvbkxh
        YmVsUGF0aAogICAgQHR5cGUgU3RyaW5nCiAgICBAZGVmYXVsdCAnY29udGVu
        dCcKICAqLwogIG9wdGlvbkxhYmVsUGF0aDogJ2NvbnRlbnQnLAoKICAvKioK
        ICAgIFRoZSBwYXRoIG9mIHRoZSBvcHRpb24gdmFsdWVzLiBTZWUgW2NvbnRl
        bnRdKC9hcGkvY2xhc3Nlcy9FbWJlci5TZWxlY3QuaHRtbCNwcm9wZXJ0eV9j
        b250ZW50KS4KCiAgICBAcHJvcGVydHkgb3B0aW9uVmFsdWVQYXRoCiAgICBA
        dHlwZSBTdHJpbmcKICAgIEBkZWZhdWx0ICdjb250ZW50JwogICovCiAgb3B0
        aW9uVmFsdWVQYXRoOiAnY29udGVudCcsCgogIC8qKgogICAgVGhlIHBhdGgg
        b2YgdGhlIG9wdGlvbiBncm91cC4KICAgIFdoZW4gdGhpcyBwcm9wZXJ0eSBp
        cyB1c2VkLCBgY29udGVudGAgc2hvdWxkIGJlIHNvcnRlZCBieSBgb3B0aW9u
        R3JvdXBQYXRoYC4KCiAgICBAcHJvcGVydHkgb3B0aW9uR3JvdXBQYXRoCiAg
        ICBAdHlwZSBTdHJpbmcKICAgIEBkZWZhdWx0IG51bGwKICAqLwogIG9wdGlv
        bkdyb3VwUGF0aDogbnVsbCwKCiAgLyoqCiAgICBUaGUgdmlldyBjbGFzcyBm
        b3Igb3B0Z3JvdXAuCgogICAgQHByb3BlcnR5IGdyb3VwVmlldwogICAgQHR5
        cGUgRW1iZXIuVmlldwogICAgQGRlZmF1bHQgRW1iZXIuU2VsZWN0T3B0Z3Jv
        dXAKICAqLwogIGdyb3VwVmlldzogRW1iZXIuU2VsZWN0T3B0Z3JvdXAsCgog
        IGdyb3VwZWRDb250ZW50OiBFbWJlci5jb21wdXRlZChmdW5jdGlvbigpIHsK
        ICAgIHZhciBncm91cFBhdGggPSBnZXQodGhpcywgJ29wdGlvbkdyb3VwUGF0
        aCcpOwogICAgdmFyIGdyb3VwZWRDb250ZW50ID0gRW1iZXIuQSgpOwogICAg
        dmFyIGNvbnRlbnQgPSBnZXQodGhpcywgJ2NvbnRlbnQnKSB8fCBbXTsKCiAg
        ICBmb3JFYWNoKGNvbnRlbnQsIGZ1bmN0aW9uKGl0ZW0pIHsKICAgICAgdmFy
        IGxhYmVsID0gZ2V0KGl0ZW0sIGdyb3VwUGF0aCk7CgogICAgICBpZiAoZ2V0
        KGdyb3VwZWRDb250ZW50LCAnbGFzdE9iamVjdC5sYWJlbCcpICE9PSBsYWJl
        bCkgewogICAgICAgIGdyb3VwZWRDb250ZW50LnB1c2hPYmplY3QoewogICAg
        ICAgICAgbGFiZWw6IGxhYmVsLAogICAgICAgICAgY29udGVudDogRW1iZXIu
        QSgpCiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIGdldChncm91cGVkQ29u
        dGVudCwgJ2xhc3RPYmplY3QuY29udGVudCcpLnB1c2goaXRlbSk7CiAgICB9
        KTsKCiAgICByZXR1cm4gZ3JvdXBlZENvbnRlbnQ7CiAgfSkucHJvcGVydHko
        J29wdGlvbkdyb3VwUGF0aCcsICdjb250ZW50LkBlYWNoJyksCgogIC8qKgog
        ICAgVGhlIHZpZXcgY2xhc3MgZm9yIG9wdGlvbi4KCiAgICBAcHJvcGVydHkg
        b3B0aW9uVmlldwogICAgQHR5cGUgRW1iZXIuVmlldwogICAgQGRlZmF1bHQg
        RW1iZXIuU2VsZWN0T3B0aW9uCiAgKi8KICBvcHRpb25WaWV3OiBFbWJlci5T
        ZWxlY3RPcHRpb24sCgogIF9jaGFuZ2U6IGZ1bmN0aW9uKCkgewogICAgaWYg
        KGdldCh0aGlzLCAnbXVsdGlwbGUnKSkgewogICAgICB0aGlzLl9jaGFuZ2VN
        dWx0aXBsZSgpOwogICAgfSBlbHNlIHsKICAgICAgdGhpcy5fY2hhbmdlU2lu
        Z2xlKCk7CiAgICB9CiAgfSwKCiAgc2VsZWN0aW9uRGlkQ2hhbmdlOiBFbWJl
        ci5vYnNlcnZlcignc2VsZWN0aW9uLkBlYWNoJywgZnVuY3Rpb24oKSB7CiAg
        ICB2YXIgc2VsZWN0aW9uID0gZ2V0KHRoaXMsICdzZWxlY3Rpb24nKTsKICAg
        IGlmIChnZXQodGhpcywgJ211bHRpcGxlJykpIHsKICAgICAgaWYgKCFpc0Fy
        cmF5KHNlbGVjdGlvbikpIHsKICAgICAgICBzZXQodGhpcywgJ3NlbGVjdGlv
        bicsIEVtYmVyLkEoW3NlbGVjdGlvbl0pKTsKICAgICAgICByZXR1cm47CiAg
        ICAgIH0KICAgICAgdGhpcy5fc2VsZWN0aW9uRGlkQ2hhbmdlTXVsdGlwbGUo
        KTsKICAgIH0gZWxzZSB7CiAgICAgIHRoaXMuX3NlbGVjdGlvbkRpZENoYW5n
        ZVNpbmdsZSgpOwogICAgfQogIH0pLAoKICB2YWx1ZURpZENoYW5nZTogRW1i
        ZXIub2JzZXJ2ZXIoJ3ZhbHVlJywgZnVuY3Rpb24oKSB7CiAgICB2YXIgY29u
        dGVudCA9IGdldCh0aGlzLCAnY29udGVudCcpLAogICAgICAgIHZhbHVlID0g
        Z2V0KHRoaXMsICd2YWx1ZScpLAogICAgICAgIHZhbHVlUGF0aCA9IGdldCh0
        aGlzLCAnb3B0aW9uVmFsdWVQYXRoJykucmVwbGFjZSgvXmNvbnRlbnRcLj8v
        LCAnJyksCiAgICAgICAgc2VsZWN0ZWRWYWx1ZSA9ICh2YWx1ZVBhdGggPyBn
        ZXQodGhpcywgJ3NlbGVjdGlvbi4nICsgdmFsdWVQYXRoKSA6IGdldCh0aGlz
        LCAnc2VsZWN0aW9uJykpLAogICAgICAgIHNlbGVjdGlvbjsKCiAgICBpZiAo
        dmFsdWUgIT09IHNlbGVjdGVkVmFsdWUpIHsKICAgICAgc2VsZWN0aW9uID0g
        Y29udGVudCA/IGNvbnRlbnQuZmluZChmdW5jdGlvbihvYmopIHsKICAgICAg
        ICByZXR1cm4gdmFsdWUgPT09ICh2YWx1ZVBhdGggPyBnZXQob2JqLCB2YWx1
        ZVBhdGgpIDogb2JqKTsKICAgICAgfSkgOiBudWxsOwoKICAgICAgdGhpcy5z
        ZXQoJ3NlbGVjdGlvbicsIHNlbGVjdGlvbik7CiAgICB9CiAgfSksCgoKICBf
        dHJpZ2dlckNoYW5nZTogZnVuY3Rpb24oKSB7CiAgICB2YXIgc2VsZWN0aW9u
        ID0gZ2V0KHRoaXMsICdzZWxlY3Rpb24nKTsKICAgIHZhciB2YWx1ZSA9IGdl
        dCh0aGlzLCAndmFsdWUnKTsKCiAgICBpZiAoIUVtYmVyLmlzTm9uZShzZWxl
        Y3Rpb24pKSB7IHRoaXMuc2VsZWN0aW9uRGlkQ2hhbmdlKCk7IH0KICAgIGlm
        ICghRW1iZXIuaXNOb25lKHZhbHVlKSkgeyB0aGlzLnZhbHVlRGlkQ2hhbmdl
        KCk7IH0KCiAgICB0aGlzLl9jaGFuZ2UoKTsKICB9LAoKICBfY2hhbmdlU2lu
        Z2xlOiBmdW5jdGlvbigpIHsKICAgIHZhciBzZWxlY3RlZEluZGV4ID0gdGhp
        cy4kKClbMF0uc2VsZWN0ZWRJbmRleCwKICAgICAgICBjb250ZW50ID0gZ2V0
        KHRoaXMsICdjb250ZW50JyksCiAgICAgICAgcHJvbXB0ID0gZ2V0KHRoaXMs
        ICdwcm9tcHQnKTsKCiAgICBpZiAoIWNvbnRlbnQgfHwgIWdldChjb250ZW50
        LCAnbGVuZ3RoJykpIHsgcmV0dXJuOyB9CiAgICBpZiAocHJvbXB0ICYmIHNl
        bGVjdGVkSW5kZXggPT09IDApIHsgc2V0KHRoaXMsICdzZWxlY3Rpb24nLCBu
        dWxsKTsgcmV0dXJuOyB9CgogICAgaWYgKHByb21wdCkgeyBzZWxlY3RlZElu
        ZGV4IC09IDE7IH0KICAgIHNldCh0aGlzLCAnc2VsZWN0aW9uJywgY29udGVu
        dC5vYmplY3RBdChzZWxlY3RlZEluZGV4KSk7CiAgfSwKCgogIF9jaGFuZ2VN
        dWx0aXBsZTogZnVuY3Rpb24oKSB7CiAgICB2YXIgb3B0aW9ucyA9IHRoaXMu
        JCgnb3B0aW9uOnNlbGVjdGVkJyksCiAgICAgICAgcHJvbXB0ID0gZ2V0KHRo
        aXMsICdwcm9tcHQnKSwKICAgICAgICBvZmZzZXQgPSBwcm9tcHQgPyAxIDog
        MCwKICAgICAgICBjb250ZW50ID0gZ2V0KHRoaXMsICdjb250ZW50JyksCiAg
        ICAgICAgc2VsZWN0aW9uID0gZ2V0KHRoaXMsICdzZWxlY3Rpb24nKTsKCiAg
        ICBpZiAoIWNvbnRlbnQpIHsgcmV0dXJuOyB9CiAgICBpZiAob3B0aW9ucykg
        ewogICAgICB2YXIgc2VsZWN0ZWRJbmRleGVzID0gb3B0aW9ucy5tYXAoZnVu
        Y3Rpb24oKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuaW5kZXggLSBvZmZzZXQ7
        CiAgICAgIH0pLnRvQXJyYXkoKTsKICAgICAgdmFyIG5ld1NlbGVjdGlvbiA9
        IGNvbnRlbnQub2JqZWN0c0F0KHNlbGVjdGVkSW5kZXhlcyk7CgogICAgICBp
        ZiAoaXNBcnJheShzZWxlY3Rpb24pKSB7CiAgICAgICAgcmVwbGFjZShzZWxl
        Y3Rpb24sIDAsIGdldChzZWxlY3Rpb24sICdsZW5ndGgnKSwgbmV3U2VsZWN0
        aW9uKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBzZXQodGhpcywgJ3NlbGVj
        dGlvbicsIG5ld1NlbGVjdGlvbik7CiAgICAgIH0KICAgIH0KICB9LAoKICBf
        c2VsZWN0aW9uRGlkQ2hhbmdlU2luZ2xlOiBmdW5jdGlvbigpIHsKICAgIHZh
        ciBlbCA9IHRoaXMuZ2V0KCdlbGVtZW50Jyk7CiAgICBpZiAoIWVsKSB7IHJl
        dHVybjsgfQoKICAgIHZhciBjb250ZW50ID0gZ2V0KHRoaXMsICdjb250ZW50
        JyksCiAgICAgICAgc2VsZWN0aW9uID0gZ2V0KHRoaXMsICdzZWxlY3Rpb24n
        KSwKICAgICAgICBzZWxlY3Rpb25JbmRleCA9IGNvbnRlbnQgPyBpbmRleE9m
        KGNvbnRlbnQsIHNlbGVjdGlvbikgOiAtMSwKICAgICAgICBwcm9tcHQgPSBn
        ZXQodGhpcywgJ3Byb21wdCcpOwoKICAgIGlmIChwcm9tcHQpIHsgc2VsZWN0
        aW9uSW5kZXggKz0gMTsgfQogICAgaWYgKGVsKSB7IGVsLnNlbGVjdGVkSW5k
        ZXggPSBzZWxlY3Rpb25JbmRleDsgfQogIH0sCgogIF9zZWxlY3Rpb25EaWRD
        aGFuZ2VNdWx0aXBsZTogZnVuY3Rpb24oKSB7CiAgICB2YXIgY29udGVudCA9
        IGdldCh0aGlzLCAnY29udGVudCcpLAogICAgICAgIHNlbGVjdGlvbiA9IGdl
        dCh0aGlzLCAnc2VsZWN0aW9uJyksCiAgICAgICAgc2VsZWN0ZWRJbmRleGVz
        ID0gY29udGVudCA/IGluZGV4ZXNPZihjb250ZW50LCBzZWxlY3Rpb24pIDog
        Wy0xXSwKICAgICAgICBwcm9tcHQgPSBnZXQodGhpcywgJ3Byb21wdCcpLAog
        ICAgICAgIG9mZnNldCA9IHByb21wdCA/IDEgOiAwLAogICAgICAgIG9wdGlv
        bnMgPSB0aGlzLiQoJ29wdGlvbicpLAogICAgICAgIGFkanVzdGVkOwoKICAg
        IGlmIChvcHRpb25zKSB7CiAgICAgIG9wdGlvbnMuZWFjaChmdW5jdGlvbigp
        IHsKICAgICAgICBhZGp1c3RlZCA9IHRoaXMuaW5kZXggPiAtMSA/IHRoaXMu
        aW5kZXggLSBvZmZzZXQgOiAtMTsKICAgICAgICB0aGlzLnNlbGVjdGVkID0g
        aW5kZXhPZihzZWxlY3RlZEluZGV4ZXMsIGFkanVzdGVkKSA+IC0xOwogICAg
        ICB9KTsKICAgIH0KICB9LAoKICBpbml0OiBmdW5jdGlvbigpIHsKICAgIHRo
        aXMuX3N1cGVyKCk7CiAgICB0aGlzLm9uKCJkaWRJbnNlcnRFbGVtZW50Iiwg
        dGhpcywgdGhpcy5fdHJpZ2dlckNoYW5nZSk7CiAgICB0aGlzLm9uKCJjaGFu
        Z2UiLCB0aGlzLCB0aGlzLl9jaGFuZ2UpOwogIH0KfSk7Cgp9KSgpOwoKCgoo
        ZnVuY3Rpb24oKSB7Ci8qKgpAbW9kdWxlIGVtYmVyCkBzdWJtb2R1bGUgZW1i
        ZXItaGFuZGxlYmFycy1jb21waWxlcgoqLwoKLyoqCgogIFRoZSBge3tpbnB1
        dH19YCBoZWxwZXIgaW5zZXJ0cyBhbiBIVE1MIGA8aW5wdXQ+YCB0YWcgaW50
        byB0aGUgdGVtcGxhdGUsCiAgd2l0aCBhIGB0eXBlYCB2YWx1ZSBvZiBlaXRo
        ZXIgYHRleHRgIG9yIGBjaGVja2JveGAuIElmIG5vIGB0eXBlYCBpcyBwcm92
        aWRlZCwKICBgdGV4dGAgd2lsbCBiZSB0aGUgZGVmYXVsdCB2YWx1ZSBhcHBs
        aWVkLiBUaGUgYXR0cmlidXRlcyBvZiBge3tpbnB1dH19YAogIG1hdGNoIHRo
        b3NlIG9mIHRoZSBuYXRpdmUgSFRNTCB0YWcgYXMgY2xvc2VseSBhcyBwb3Nz
        aWJsZSBmb3IgdGhlc2UgdHdvIHR5cGVzLgoKICAjIyBVc2UgYXMgdGV4dCBm
        aWVsZAogIEFuIGB7e2lucHV0fX1gIHdpdGggbm8gYHR5cGVgIG9yIGEgYHR5
        cGVgIG9mIGB0ZXh0YCB3aWxsIHJlbmRlciBhbiBIVE1MIHRleHQgaW5wdXQu
        CiAgVGhlIGZvbGxvd2luZyBIVE1MIGF0dHJpYnV0ZXMgY2FuIGJlIHNldCB2
        aWEgdGhlIGhlbHBlcjoKCiogYHZhbHVlYAoqIGBzaXplYAoqIGBuYW1lYAoq
        IGBwYXR0ZXJuYAoqIGBwbGFjZWhvbGRlcmAKKiBgZGlzYWJsZWRgCiogYG1h
        eGxlbmd0aGAKKiBgdGFiaW5kZXhgCgoKICBXaGVuIHNldCB0byBhIHF1b3Rl
        ZCBzdHJpbmcsIHRoZXNlIHZhbHVlcyB3aWxsIGJlIGRpcmVjdGx5IGFwcGxp
        ZWQgdG8gdGhlIEhUTUwKICBlbGVtZW50LiBXaGVuIGxlZnQgdW5xdW90ZWQs
        IHRoZXNlIHZhbHVlcyB3aWxsIGJlIGJvdW5kIHRvIGEgcHJvcGVydHkgb24g
        dGhlCiAgdGVtcGxhdGUncyBjdXJyZW50IHJlbmRlcmluZyBjb250ZXh0ICht
        b3N0IHR5cGljYWxseSBhIGNvbnRyb2xsZXIgaW5zdGFuY2UpLgoKICAjIyBV
        bmJvdW5kOgoKICBgYGBoYW5kbGViYXJzCiAge3tpbnB1dCB2YWx1ZT0iaHR0
        cDovL3d3dy5mYWNlYm9vay5jb20ifX0KICBgYGAKCgogIGBgYGh0bWwKICA8
        aW5wdXQgdHlwZT0idGV4dCIgdmFsdWU9Imh0dHA6Ly93d3cuZmFjZWJvb2su
        Y29tIi8+CiAgYGBgCgogICMjIEJvdW5kOgoKICBgYGBqYXZhc2NyaXB0CiAg
        QXBwLkFwcGxpY2F0aW9uQ29udHJvbGxlciA9IEVtYmVyLkNvbnRyb2xsZXIu
        ZXh0ZW5kKHsKICAgIGZpcnN0TmFtZTogIlN0YW5sZXkiLAogICAgZW50cnlO
        b3RBbGxvd2VkOiB0cnVlCiAgfSk7CiAgYGBgCgoKICBgYGBoYW5kbGViYXJz
        CiAge3tpbnB1dCB0eXBlPSJ0ZXh0IiB2YWx1ZT1maXJzdE5hbWUgZGlzYWJs
        ZWQ9ZW50cnlOb3RBbGxvd2VkIHNpemU9IjUwIn19CiAgYGBgCgoKICBgYGBo
        dG1sCiAgPGlucHV0IHR5cGU9InRleHQiIHZhbHVlPSJTdGFubGV5IiBkaXNh
        YmxlZD0iZGlzYWJsZWQiIHNpemU9IjUwIi8+CiAgYGBgCgogICMjIEV4dGVu
        c2lvbgoKICBJbnRlcm5hbGx5LCBge3tpbnB1dCB0eXBlPSJ0ZXh0In19YCBj
        cmVhdGVzIGFuIGluc3RhbmNlIG9mIGBFbWJlci5UZXh0RmllbGRgLCBwYXNz
        aW5nCiAgYXJndW1lbnRzIGZyb20gdGhlIGhlbHBlciB0byBgRW1iZXIuVGV4
        dEZpZWxkYCdzIGBjcmVhdGVgIG1ldGhvZC4gWW91IGNhbiBleHRlbmQgdGhl
        CiAgY2FwYWJsaWx0aWVzIG9mIHRleHQgaW5wdXRzIGluIHlvdXIgYXBwbGlj
        YXRpb25zIGJ5IHJlb3BlbmluZyB0aGlzIGNsYXNzLiBGb3IgZXhhbXBsZSwK
        ICBpZiB5b3UgYXJlIGRlcGxveWluZyB0byBicm93c2VycyB3aGVyZSB0aGUg
        YHJlcXVpcmVkYCBhdHRyaWJ1dGUgaXMgdXNlZCwgeW91CiAgY2FuIGFkZCB0
        aGlzIHRvIHRoZSBgVGV4dEZpZWxkYCdzIGBhdHRyaWJ1dGVCaW5kaW5nc2Ag
        cHJvcGVydHk6CgoKICBgYGBqYXZhc2NyaXB0CiAgRW1iZXIuVGV4dEZpZWxk
        LnJlb3Blbih7CiAgICBhdHRyaWJ1dGVCaW5kaW5nczogWydyZXF1aXJlZCdd
        CiAgfSk7CiAgYGBgCgogIEtlZXAgaW4gbWluZCB3aGVuIHdyaXRpbmcgYEVt
        YmVyLlRleHRGaWVsZGAgc3ViY2xhc3NlcyB0aGF0IGBFbWJlci5UZXh0Rmll
        bGRgCiAgaXRzZWxmIGV4dGVuZHMgYEVtYmVyLkNvbXBvbmVudGAsIG1lYW5p
        bmcgdGhhdCBpdCBkb2VzIE5PVCBpbmhlcml0CiAgdGhlIGBjb250cm9sbGVy
        YCBvZiB0aGUgcGFyZW50IHZpZXcuCgogIFNlZSBtb3JlIGFib3V0IFtFbWJl
        ciBjb21wb25lbnRzXShhcGkvY2xhc3Nlcy9FbWJlci5Db21wb25lbnQuaHRt
        bCkKCgogICMjIFVzZSBhcyBjaGVja2JveAoKICBBbiBge3tpbnB1dH19YCB3
        aXRoIGEgYHR5cGVgIG9mIGBjaGVja2JveGAgd2lsbCByZW5kZXIgYW4gSFRN
        TCBjaGVja2JveCBpbnB1dC4KICBUaGUgZm9sbG93aW5nIEhUTUwgYXR0cmli
        dXRlcyBjYW4gYmUgc2V0IHZpYSB0aGUgaGVscGVyOgoKKiBgY2hlY2tlZGAK
        KiBgZGlzYWJsZWRgCiogYHRhYmluZGV4YAoqIGBpbmRldGVybWluYXRlYAoq
        IGBuYW1lYAoKCiAgV2hlbiBzZXQgdG8gYSBxdW90ZWQgc3RyaW5nLCB0aGVz
        ZSB2YWx1ZXMgd2lsbCBiZSBkaXJlY3RseSBhcHBsaWVkIHRvIHRoZSBIVE1M
        CiAgZWxlbWVudC4gV2hlbiBsZWZ0IHVucXVvdGVkLCB0aGVzZSB2YWx1ZXMg
        d2lsbCBiZSBib3VuZCB0byBhIHByb3BlcnR5IG9uIHRoZQogIHRlbXBsYXRl
        J3MgY3VycmVudCByZW5kZXJpbmcgY29udGV4dCAobW9zdCB0eXBpY2FsbHkg
        YSBjb250cm9sbGVyIGluc3RhbmNlKS4KCiAgIyMgVW5ib3VuZDoKCiAgYGBg
        aGFuZGxlYmFycwogIHt7aW5wdXQgdHlwZT0iY2hlY2tib3giIG5hbWU9Imlz
        QWRtaW4ifX0KICBgYGAKCiAgYGBgaHRtbAogIDxpbnB1dCB0eXBlPSJjaGVj
        a2JveCIgbmFtZT0iaXNBZG1pbiIgLz4KICBgYGAKCiAgIyMgQm91bmQ6Cgog
        IGBgYGphdmFzY3JpcHQKICBBcHAuQXBwbGljYXRpb25Db250cm9sbGVyID0g
        RW1iZXIuQ29udHJvbGxlci5leHRlbmQoewogICAgaXNBZG1pbjogdHJ1ZQog
        IH0pOwogIGBgYAoKCiAgYGBgaGFuZGxlYmFycwogIHt7aW5wdXQgdHlwZT0i
        Y2hlY2tib3giIGNoZWNrZWQ9aXNBZG1pbiB9fQogIGBgYAoKCiAgYGBgaHRt
        bAogIDxpbnB1dCB0eXBlPSJjaGVja2JveCIgY2hlY2tlZD0iY2hlY2tlZCIg
        Lz4KICBgYGAKCiAgIyMgRXh0ZW5zaW9uCgogIEludGVybmFsbHksIGB7e2lu
        cHV0IHR5cGU9ImNoZWNrYm94In19YCBjcmVhdGVzIGFuIGluc3RhbmNlIG9m
        IGBFbWJlci5DaGVja2JveGAsIHBhc3NpbmcKICBhcmd1bWVudHMgZnJvbSB0
        aGUgaGVscGVyIHRvIGBFbWJlci5DaGVja2JveGAncyBgY3JlYXRlYCBtZXRo
        b2QuIFlvdSBjYW4gZXh0ZW5kIHRoZQogIGNhcGFibGlsdGllcyBvZiBjaGVj
        a2JveCBpbnB1dHMgaW4geW91ciBhcHBsaWNhdGlvbnMgYnkgcmVvcGVuaW5n
        IHRoaXMgY2xhc3MuIEZvciBleGFtcGxlLAogIGlmIHlvdSB3YW50ZWQgdG8g
        YWRkIGEgY3NzIGNsYXNzIHRvIGFsbCBjaGVja2JveGVzIGluIHlvdXIgYXBw
        bGljYXRpb246CgoKICBgYGBqYXZhc2NyaXB0CiAgRW1iZXIuQ2hlY2tib3gu
        cmVvcGVuKHsKICAgIGNsYXNzTmFtZXM6IFsnbXktYXBwLWNoZWNrYm94J10K
        ICB9KTsKICBgYGAKCgogIEBtZXRob2QgaW5wdXQKICBAZm9yIEVtYmVyLkhh
        bmRsZWJhcnMuaGVscGVycwogIEBwYXJhbSB7SGFzaH0gb3B0aW9ucwoqLwpF
        bWJlci5IYW5kbGViYXJzLnJlZ2lzdGVySGVscGVyKCdpbnB1dCcsIGZ1bmN0
        aW9uKG9wdGlvbnMpIHsKICBFbWJlci5hc3NlcnQoJ1lvdSBjYW4gb25seSBw
        YXNzIGF0dHJpYnV0ZXMgdG8gdGhlIGBpbnB1dGAgaGVscGVyLCBub3QgYXJn
        dW1lbnRzJywgYXJndW1lbnRzLmxlbmd0aCA8IDIpOwoKICB2YXIgaGFzaCA9
        IG9wdGlvbnMuaGFzaCwKICAgICAgdHlwZXMgPSBvcHRpb25zLmhhc2hUeXBl
        cywKICAgICAgaW5wdXRUeXBlID0gaGFzaC50eXBlLAogICAgICBvbkV2ZW50
        ID0gaGFzaC5vbjsKCiAgZGVsZXRlIGhhc2gudHlwZTsKICBkZWxldGUgaGFz
        aC5vbjsKCiAgaWYgKGlucHV0VHlwZSA9PT0gJ2NoZWNrYm94JykgewogICAg
        RW1iZXIuYXNzZXJ0KCJ7e2lucHV0IHR5cGU9J2NoZWNrYm94J319IGRvZXMg
        bm90IHN1cHBvcnQgc2V0dGluZyBgdmFsdWU9c29tZUJvb2xlYW5WYWx1ZWA7
        IHlvdSBtdXN0IHVzZSBgY2hlY2tlZD1zb21lQm9vbGVhblZhbHVlYCBpbnN0
        ZWFkLiIsIG9wdGlvbnMuaGFzaFR5cGVzLnZhbHVlICE9PSAnSUQnKTsKICAg
        IHJldHVybiBFbWJlci5IYW5kbGViYXJzLmhlbHBlcnMudmlldy5jYWxsKHRo
        aXMsIEVtYmVyLkNoZWNrYm94LCBvcHRpb25zKTsKICB9IGVsc2UgewogICAg
        aWYgKGlucHV0VHlwZSkgeyBoYXNoLnR5cGUgPSBpbnB1dFR5cGU7IH0KICAg
        IGhhc2gub25FdmVudCA9IG9uRXZlbnQgfHwgJ2VudGVyJzsKICAgIHJldHVy
        biBFbWJlci5IYW5kbGViYXJzLmhlbHBlcnMudmlldy5jYWxsKHRoaXMsIEVt
        YmVyLlRleHRGaWVsZCwgb3B0aW9ucyk7CiAgfQp9KTsKCi8qKgogIGB7e3Rl
        eHRhcmVhfX1gIGluc2VydHMgYSBuZXcgaW5zdGFuY2Ugb2YgYDx0ZXh0YXJl
        YT5gIHRhZyBpbnRvIHRoZSB0ZW1wbGF0ZS4KICBUaGUgYXR0cmlidXRlcyBv
        ZiBge3t0ZXh0YXJlYX19YCBtYXRjaCB0aG9zZSBvZiB0aGUgbmF0aXZlIEhU
        TUwgdGFncyBhcwogIGNsb3NlbHkgYXMgcG9zc2libGUuCgogIFRoZSBmb2xs
        b3dpbmcgSFRNTCBhdHRyaWJ1dGVzIGNhbiBiZSBzZXQ6CgogICAgKiBgdmFs
        dWVgCiAgICAqIGBuYW1lYAogICAgKiBgcm93c2AKICAgICogYGNvbHNgCiAg
        ICAqIGBwbGFjZWhvbGRlcmAKICAgICogYGRpc2FibGVkYAogICAgKiBgbWF4
        bGVuZ3RoYAogICAgKiBgdGFiaW5kZXhgCgogIFdoZW4gc2V0IHRvIGEgcXVv
        dGVkIHN0cmluZywgdGhlc2UgdmFsdWUgd2lsbCBiZSBkaXJlY3RseSBhcHBs
        aWVkIHRvIHRoZSBIVE1MCiAgZWxlbWVudC4gV2hlbiBsZWZ0IHVucXVvdGVk
        LCB0aGVzZSB2YWx1ZXMgd2lsbCBiZSBib3VuZCB0byBhIHByb3BlcnR5IG9u
        IHRoZQogIHRlbXBsYXRlJ3MgY3VycmVudCByZW5kZXJpbmcgY29udGV4dCAo
        bW9zdCB0eXBpY2FsbHkgYSBjb250cm9sbGVyIGluc3RhbmNlKS4KCiAgVW5i
        b3VuZDoKCiAgYGBgaGFuZGxlYmFycwogIHt7dGV4dGFyZWEgdmFsdWU9Ikxv
        dHMgb2Ygc3RhdGljIHRleHQgdGhhdCBJU04nVCBib3VuZCJ9fQogIGBgYAoK
        ICBXb3VsZCByZXN1bHQgaW4gdGhlIGZvbGxvd2luZyBIVE1MOgoKICBgYGBo
        dG1sCiAgPHRleHRhcmVhIGNsYXNzPSJlbWJlci10ZXh0LWFyZWEiPgogICAg
        TG90cyBvZiBzdGF0aWMgdGV4dCB0aGF0IElTTidUIGJvdW5kCiAgPC90ZXh0
        YXJlYT4KICBgYGAKCiAgQm91bmQ6CgogIEluIHRoZSBmb2xsb3dpbmcgZXhh
        bXBsZSwgdGhlIGB3cml0dGVuV29yZHNgIHByb3BlcnR5IG9uIGBBcHAuQXBw
        bGljYXRpb25Db250cm9sbGVyYAogIHdpbGwgYmUgdXBkYXRlZCBsaXZlIGFz
        IHRoZSB1c2VyIHR5cGVzICdMb3RzIG9mIHRleHQgdGhhdCBJUyBib3VuZCcg
        aW50bwogIHRoZSB0ZXh0IGFyZWEgb2YgdGhlaXIgYnJvd3NlcidzIHdpbmRv
        dy4KCiAgYGBgamF2YXNjcmlwdAogIEFwcC5BcHBsaWNhdGlvbkNvbnRyb2xs
        ZXIgPSBFbWJlci5Db250cm9sbGVyLmV4dGVuZCh7CiAgICB3cml0dGVuV29y
        ZHM6ICJMb3RzIG9mIHRleHQgdGhhdCBJUyBib3VuZCIKICB9KTsKICBgYGAK
        CiAgYGBgaGFuZGxlYmFycwogIHt7dGV4dGFyZWEgdmFsdWU9d3JpdHRlbldv
        cmRzfX0KICBgYGAKCiAgIFdvdWxkIHJlc3VsdCBpbiB0aGUgZm9sbG93aW5n
        IEhUTUw6CgogIGBgYGh0bWwKICA8dGV4dGFyZWEgY2xhc3M9ImVtYmVyLXRl
        eHQtYXJlYSI+CiAgICBMb3RzIG9mIHRleHQgdGhhdCBJUyBib3VuZAogIDwv
        dGV4dGFyZWE+CiAgYGBgCgogIElmIHlvdSB3YW50ZWQgYSBvbmUgd2F5IGJp
        bmRpbmcgYmV0d2VlbiB0aGUgdGV4dCBhcmVhIGFuZCBhIGRpdiB0YWcKICBz
        b21ld2hlcmUgZWxzZSBvbiB5b3VyIHNjcmVlbiwgeW91IGNvdWxkIHVzZSBg
        RW1iZXIuY29tcHV0ZWQub25lV2F5YDoKCiAgYGBgamF2YXNjcmlwdAogIEFw
        cC5BcHBsaWNhdGlvbkNvbnRyb2xsZXIgPSBFbWJlci5Db250cm9sbGVyLmV4
        dGVuZCh7CiAgICB3cml0dGVuV29yZHM6ICJMb3RzIG9mIHRleHQgdGhhdCBJ
        UyBib3VuZCIsCiAgICBvdXRwdXRXcml0dGVuV29yZHM6IEVtYmVyLmNvbXB1
        dGVkLm9uZVdheSgid3JpdHRlbldvcmRzIikKICB9KTsKICBgYGAKCiAgYGBg
        aGFuZGxlYmFycwogIHt7dGV4dGFyZWEgdmFsdWU9d3JpdHRlbldvcmRzfX0K
        CiAgPGRpdj4KICAgIHt7b3V0cHV0V3JpdHRlbldvcmRzfX0KICA8L2Rpdj4K
        ICBgYGAKCiAgV291bGQgcmVzdWx0IGluIHRoZSBmb2xsb3dpbmcgSFRNTDoK
        CiAgYGBgaHRtbAogIDx0ZXh0YXJlYSBjbGFzcz0iZW1iZXItdGV4dC1hcmVh
        Ij4KICAgIExvdHMgb2YgdGV4dCB0aGF0IElTIGJvdW5kCiAgPC90ZXh0YXJl
        YT4KCiAgPC0tIHRoZSBmb2xsb3dpbmcgZGl2IHdpbGwgYmUgdXBkYXRlZCBp
        biByZWFsIHRpbWUgYXMgeW91IHR5cGUgLS0+CgogIDxkaXY+CiAgICBMb3Rz
        IG9mIHRleHQgdGhhdCBJUyBib3VuZAogIDwvZGl2PgogIGBgYAoKICBGaW5h
        bGx5LCB0aGlzIGV4YW1wbGUgcmVhbGx5IHNob3dzIHRoZSBwb3dlciBhbmQg
        ZWFzZSBvZiBFbWJlciB3aGVuIHR3bwogIHByb3BlcnRpZXMgYXJlIGJvdW5k
        IHRvIGVhY2hvdGhlciB2aWEgYEVtYmVyLmNvbXB1dGVkLmFsaWFzYC4gVHlw
        ZSBpbnRvCiAgZWl0aGVyIHRleHQgYXJlYSBib3ggYW5kIHRoZXknbGwgYm90
        aCBzdGF5IGluIHN5bmMuIE5vdGUgdGhhdAogIGBFbWJlci5jb21wdXRlZC5h
        bGlhc2AgY29zdHMgbW9yZSBpbiB0ZXJtcyBvZiBwZXJmb3JtYW5jZSwgc28g
        b25seSB1c2UgaXQgd2hlbgogIHlvdXIgcmVhbGx5IGJpbmRpbmcgaW4gYm90
        aCBkaXJlY3Rpb25zOgoKICBgYGBqYXZhc2NyaXB0CiAgQXBwLkFwcGxpY2F0
        aW9uQ29udHJvbGxlciA9IEVtYmVyLkNvbnRyb2xsZXIuZXh0ZW5kKHsKICAg
        IHdyaXR0ZW5Xb3JkczogIkxvdHMgb2YgdGV4dCB0aGF0IElTIGJvdW5kIiwK
        ICAgIHR3b1dheVdyaXR0ZW5Xb3JkczogRW1iZXIuY29tcHV0ZWQuYWxpYXMo
        IndyaXR0ZW5Xb3JkcyIpCiAgfSk7CiAgYGBgCgogIGBgYGhhbmRsZWJhcnMK
        ICB7e3RleHRhcmVhIHZhbHVlPXdyaXR0ZW5Xb3Jkc319CiAge3t0ZXh0YXJl
        YSB2YWx1ZT10d29XYXlXcml0dGVuV29yZHN9fQogIGBgYAoKICBgYGBodG1s
        CiAgPHRleHRhcmVhIGlkPSJlbWJlcjEiIGNsYXNzPSJlbWJlci10ZXh0LWFy
        ZWEiPgogICAgTG90cyBvZiB0ZXh0IHRoYXQgSVMgYm91bmQKICA8L3RleHRh
        cmVhPgoKICA8LS0gYm90aCB1cGRhdGVkIGluIHJlYWwgdGltZSAtLT4KCiAg
        PHRleHRhcmVhIGlkPSJlbWJlcjIiIGNsYXNzPSJlbWJlci10ZXh0LWFyZWEi
        PgogICAgTG90cyBvZiB0ZXh0IHRoYXQgSVMgYm91bmQKICA8L3RleHRhcmVh
        PgogIGBgYAoKICAjIyBFeHRlbnNpb24KCiAgSW50ZXJuYWxseSwgYHt7dGV4
        dGFyZWF9fWAgY3JlYXRlcyBhbiBpbnN0YW5jZSBvZiBgRW1iZXIuVGV4dEFy
        ZWFgLCBwYXNzaW5nCiAgYXJndW1lbnRzIGZyb20gdGhlIGhlbHBlciB0byBg
        RW1iZXIuVGV4dEFyZWFgJ3MgYGNyZWF0ZWAgbWV0aG9kLiBZb3UgY2FuCiAg
        ZXh0ZW5kIHRoZSBjYXBhYmlsaXRpZXMgb2YgdGV4dCBhcmVhcyBpbiB5b3Vy
        IGFwcGxpY2F0aW9uIGJ5IHJlb3BlbmluZyB0aGlzCiAgY2xhc3MuIEZvciBl
        eGFtcGxlLCBpZiB5b3UgYXJlIGRlcGxveWluZyB0byBicm93c2VycyB3aGVy
        ZSB0aGUgYHJlcXVpcmVkYAogIGF0dHJpYnV0ZSBpcyB1c2VkLCB5b3UgY2Fu
        IGdsb2JhbGx5IGFkZCBzdXBwb3J0IGZvciB0aGUgYHJlcXVpcmVkYCBhdHRy
        aWJ1dGUKICBvbiBhbGwgYHt7dGV4dGFyZWF9fWBzJyBpbiB5b3VyIGFwcCBi
        eSByZW9wZW5pbmcgYEVtYmVyLlRleHRBcmVhYCBvcgogIGBFbWJlci5UZXh0
        U3VwcG9ydGAgYW5kIGFkZGluZyBpdCB0byB0aGUgYGF0dHJpYnV0ZUJpbmRp
        bmdzYCBjb25jYXRlbmF0ZWQKICBwcm9wZXJ0eToKCiAgYGBgamF2YXNjcmlw
        dAogIEVtYmVyLlRleHRBcmVhLnJlb3Blbih7CiAgICBhdHRyaWJ1dGVCaW5k
        aW5nczogWydyZXF1aXJlZCddCiAgfSk7CiAgYGBgCgogIEtlZXAgaW4gbWlu
        ZCB3aGVuIHdyaXRpbmcgYEVtYmVyLlRleHRBcmVhYCBzdWJjbGFzc2VzIHRo
        YXQgYEVtYmVyLlRleHRBcmVhYAogIGl0c2VsZiBleHRlbmRzIGBFbWJlci5D
        b21wb25lbnRgLCBtZWFuaW5nIHRoYXQgaXQgZG9lcyBOT1QgaW5oZXJpdAog
        IHRoZSBgY29udHJvbGxlcmAgb2YgdGhlIHBhcmVudCB2aWV3LgoKICBTZWUg
        bW9yZSBhYm91dCBbRW1iZXIgY29tcG9uZW50c10oYXBpL2NsYXNzZXMvRW1i
        ZXIuQ29tcG9uZW50Lmh0bWwpCgogIEBtZXRob2QgdGV4dGFyZWEKICBAZm9y
        IEVtYmVyLkhhbmRsZWJhcnMuaGVscGVycwogIEBwYXJhbSB7SGFzaH0gb3B0
        aW9ucwoqLwpFbWJlci5IYW5kbGViYXJzLnJlZ2lzdGVySGVscGVyKCd0ZXh0
        YXJlYScsIGZ1bmN0aW9uKG9wdGlvbnMpIHsKICBFbWJlci5hc3NlcnQoJ1lv
        dSBjYW4gb25seSBwYXNzIGF0dHJpYnV0ZXMgdG8gdGhlIGB0ZXh0YXJlYWAg
        aGVscGVyLCBub3QgYXJndW1lbnRzJywgYXJndW1lbnRzLmxlbmd0aCA8IDIp
        OwoKICB2YXIgaGFzaCA9IG9wdGlvbnMuaGFzaCwKICAgICAgdHlwZXMgPSBv
        cHRpb25zLmhhc2hUeXBlczsKCiAgcmV0dXJuIEVtYmVyLkhhbmRsZWJhcnMu
        aGVscGVycy52aWV3LmNhbGwodGhpcywgRW1iZXIuVGV4dEFyZWEsIG9wdGlv
        bnMpOwp9KTsKCn0pKCk7CgoKCihmdW5jdGlvbigpIHsKRW1iZXIuQ29tcG9u
        ZW50TG9va3VwID0gRW1iZXIuT2JqZWN0LmV4dGVuZCh7CiAgbG9va3VwRmFj
        dG9yeTogZnVuY3Rpb24obmFtZSwgY29udGFpbmVyKSB7CgogICAgY29udGFp
        bmVyID0gY29udGFpbmVyIHx8IHRoaXMuY29udGFpbmVyOwoKICAgIHZhciBm
        dWxsTmFtZSA9ICdjb21wb25lbnQ6JyArIG5hbWUsCiAgICAgICAgdGVtcGxh
        dGVGdWxsTmFtZSA9ICd0ZW1wbGF0ZTpjb21wb25lbnRzLycgKyBuYW1lLAog
        ICAgICAgIHRlbXBsYXRlUmVnaXN0ZXJlZCA9IGNvbnRhaW5lciAmJiBjb250
        YWluZXIuaGFzKHRlbXBsYXRlRnVsbE5hbWUpOwoKICAgIGlmICh0ZW1wbGF0
        ZVJlZ2lzdGVyZWQpIHsKICAgICAgY29udGFpbmVyLmluamVjdGlvbihmdWxs
        TmFtZSwgJ2xheW91dCcsIHRlbXBsYXRlRnVsbE5hbWUpOwogICAgfQoKICAg
        IHZhciBDb21wb25lbnQgPSBjb250YWluZXIubG9va3VwRmFjdG9yeShmdWxs
        TmFtZSk7CgogICAgLy8gT25seSB0cmVhdCBhcyBhIGNvbXBvbmVudCBpZiBl
        aXRoZXIgdGhlIGNvbXBvbmVudAogICAgLy8gb3IgYSB0ZW1wbGF0ZSBoYXMg
        YmVlbiByZWdpc3RlcmVkLgogICAgaWYgKHRlbXBsYXRlUmVnaXN0ZXJlZCB8
        fCBDb21wb25lbnQpIHsKICAgICAgaWYgKCFDb21wb25lbnQpIHsKICAgICAg
        ICBjb250YWluZXIucmVnaXN0ZXIoZnVsbE5hbWUsIEVtYmVyLkNvbXBvbmVu
        dCk7CiAgICAgICAgQ29tcG9uZW50ID0gY29udGFpbmVyLmxvb2t1cEZhY3Rv
        cnkoZnVsbE5hbWUpOwogICAgICB9CiAgICAgIHJldHVybiBDb21wb25lbnQ7
        CiAgICB9CiAgfQp9KTsKCn0pKCk7CgoKCihmdW5jdGlvbigpIHsKLypnbG9i
        YWxzIEhhbmRsZWJhcnMgKi8KLyoqCkBtb2R1bGUgZW1iZXIKQHN1Ym1vZHVs
        ZSBlbWJlci1oYW5kbGViYXJzCiovCgovKioKICBGaW5kIHRlbXBsYXRlcyBz
        dG9yZWQgaW4gdGhlIGhlYWQgdGFnIGFzIHNjcmlwdCB0YWdzIGFuZCBtYWtl
        IHRoZW0gYXZhaWxhYmxlCiAgdG8gYEVtYmVyLkNvcmVWaWV3YCBpbiB0aGUg
        Z2xvYmFsIGBFbWJlci5URU1QTEFURVNgIG9iamVjdC4gVGhpcyB3aWxsIGJl
        IHJ1bgogIGFzIGFzIGpRdWVyeSBET00tcmVhZHkgY2FsbGJhY2suCgogIFNj
        cmlwdCB0YWdzIHdpdGggYHRleHQveC1oYW5kbGViYXJzYCB3aWxsIGJlIGNv
        bXBpbGVkCiAgd2l0aCBFbWJlcidzIEhhbmRsZWJhcnMgYW5kIGFyZSBzdWl0
        YWJsZSBmb3IgdXNlIGFzIGEgdmlldydzIHRlbXBsYXRlLgogIFRob3NlIHdp
        dGggdHlwZSBgdGV4dC94LXJhdy1oYW5kbGViYXJzYCB3aWxsIGJlIGNvbXBp
        bGVkIHdpdGggcmVndWxhcgogIEhhbmRsZWJhcnMgYW5kIGFyZSBzdWl0YWJs
        ZSBmb3IgdXNlIGluIHZpZXdzJyBjb21wdXRlZCBwcm9wZXJ0aWVzLgoKICBA
        cHJpdmF0ZQogIEBtZXRob2QgYm9vdHN0cmFwCiAgQGZvciBFbWJlci5IYW5k
        bGViYXJzCiAgQHN0YXRpYwogIEBwYXJhbSBjdHgKKi8KRW1iZXIuSGFuZGxl
        YmFycy5ib290c3RyYXAgPSBmdW5jdGlvbihjdHgpIHsKICB2YXIgc2VsZWN0
        b3JzID0gJ3NjcmlwdFt0eXBlPSJ0ZXh0L3gtaGFuZGxlYmFycyJdLCBzY3Jp
        cHRbdHlwZT0idGV4dC94LXJhdy1oYW5kbGViYXJzIl0nOwoKICBFbWJlci4k
        KHNlbGVjdG9ycywgY3R4KQogICAgLmVhY2goZnVuY3Rpb24oKSB7CiAgICAv
        LyBHZXQgYSByZWZlcmVuY2UgdG8gdGhlIHNjcmlwdCB0YWcKICAgIHZhciBz
        Y3JpcHQgPSBFbWJlci4kKHRoaXMpOwoKICAgIHZhciBjb21waWxlID0gKHNj
        cmlwdC5hdHRyKCd0eXBlJykgPT09ICd0ZXh0L3gtcmF3LWhhbmRsZWJhcnMn
        KSA/CiAgICAgICAgICAgICAgICAgIEVtYmVyLiQucHJveHkoSGFuZGxlYmFy
        cy5jb21waWxlLCBIYW5kbGViYXJzKSA6CiAgICAgICAgICAgICAgICAgIEVt
        YmVyLiQucHJveHkoRW1iZXIuSGFuZGxlYmFycy5jb21waWxlLCBFbWJlci5I
        YW5kbGViYXJzKSwKICAgICAgLy8gR2V0IHRoZSBuYW1lIG9mIHRoZSBzY3Jp
        cHQsIHVzZWQgYnkgRW1iZXIuVmlldydzIHRlbXBsYXRlTmFtZSBwcm9wZXJ0
        eS4KICAgICAgLy8gRmlyc3QgbG9vayBmb3IgZGF0YS10ZW1wbGF0ZS1uYW1l
        IGF0dHJpYnV0ZSwgdGhlbiBmYWxsIGJhY2sgdG8gaXRzCiAgICAgIC8vIGlk
        IGlmIG5vIG5hbWUgaXMgZm91bmQuCiAgICAgIHRlbXBsYXRlTmFtZSA9IHNj
        cmlwdC5hdHRyKCdkYXRhLXRlbXBsYXRlLW5hbWUnKSB8fCBzY3JpcHQuYXR0
        cignaWQnKSB8fCAnYXBwbGljYXRpb24nLAogICAgICB0ZW1wbGF0ZSA9IGNv
        bXBpbGUoc2NyaXB0Lmh0bWwoKSk7CgogICAgLy8gQ2hlY2sgaWYgdGVtcGxh
        dGUgb2Ygc2FtZSBuYW1lIGFscmVhZHkgZXhpc3RzCiAgICBpZiAoRW1iZXIu
        VEVNUExBVEVTW3RlbXBsYXRlTmFtZV0gIT09IHVuZGVmaW5lZCkgewogICAg
        ICB0aHJvdyBuZXcgRW1iZXIuRXJyb3IoJ1RlbXBsYXRlIG5hbWVkICInICsg
        dGVtcGxhdGVOYW1lICArICciIGFscmVhZHkgZXhpc3RzLicpOwogICAgfQoK
        ICAgIC8vIEZvciB0ZW1wbGF0ZXMgd2hpY2ggaGF2ZSBhIG5hbWUsIHdlIHNh
        dmUgdGhlbSBhbmQgdGhlbiByZW1vdmUgdGhlbSBmcm9tIHRoZSBET00KICAg
        IEVtYmVyLlRFTVBMQVRFU1t0ZW1wbGF0ZU5hbWVdID0gdGVtcGxhdGU7Cgog
        ICAgLy8gUmVtb3ZlIHNjcmlwdCB0YWcgZnJvbSBET00KICAgIHNjcmlwdC5y
        ZW1vdmUoKTsKICB9KTsKfTsKCmZ1bmN0aW9uIGJvb3RzdHJhcCgpIHsKICBF
        bWJlci5IYW5kbGViYXJzLmJvb3RzdHJhcCggRW1iZXIuJChkb2N1bWVudCkg
        KTsKfQoKZnVuY3Rpb24gcmVnaXN0ZXJDb21wb25lbnRMb29rdXAoY29udGFp
        bmVyKSB7CiAgY29udGFpbmVyLnJlZ2lzdGVyKCdjb21wb25lbnQtbG9va3Vw
        Om1haW4nLCBFbWJlci5Db21wb25lbnRMb29rdXApOwp9CgovKgogIFdlIHRp
        ZSB0aGlzIHRvIGFwcGxpY2F0aW9uLmxvYWQgdG8gZW5zdXJlIHRoYXQgd2Un
        dmUgYXQgbGVhc3QKICBhdHRlbXB0ZWQgdG8gYm9vdHN0cmFwIGF0IHRoZSBw
        b2ludCB0aGF0IHRoZSBhcHBsaWNhdGlvbiBpcyBsb2FkZWQuCgogIFdlIGFs
        c28gdGllIHRoaXMgdG8gZG9jdW1lbnQgcmVhZHkgc2luY2Ugd2UncmUgZ3Vh
        cmFudGVlZCB0aGF0IGFsbAogIHRoZSBpbmxpbmUgdGVtcGxhdGVzIGFyZSBw
        cmVzZW50IGF0IHRoaXMgcG9pbnQuCgogIFRoZXJlJ3Mgbm8gaGFybSB0byBy
        dW5uaW5nIHRoaXMgdHdpY2UsIHNpbmNlIHdlIHJlbW92ZSB0aGUgdGVtcGxh
        dGVzCiAgZnJvbSB0aGUgRE9NIGFmdGVyIHByb2Nlc3NpbmcuCiovCgpFbWJl
        ci5vbkxvYWQoJ0VtYmVyLkFwcGxpY2F0aW9uJywgZnVuY3Rpb24oQXBwbGlj
        YXRpb24pIHsKICBBcHBsaWNhdGlvbi5pbml0aWFsaXplcih7CiAgICBuYW1l
        OiAnZG9tVGVtcGxhdGVzJywKICAgIGluaXRpYWxpemU6IGJvb3RzdHJhcAog
        IH0pOwoKICBBcHBsaWNhdGlvbi5pbml0aWFsaXplcih7CiAgICBuYW1lOiAn
        cmVnaXN0ZXJDb21wb25lbnRMb29rdXAnLAogICAgYWZ0ZXI6ICdkb21UZW1w
        bGF0ZXMnLAogICAgaW5pdGlhbGl6ZTogcmVnaXN0ZXJDb21wb25lbnRMb29r
        dXAKICB9KTsKfSk7Cgp9KSgpOwoKCgooZnVuY3Rpb24oKSB7Ci8qKgpFbWJl
        ciBIYW5kbGViYXJzCgpAbW9kdWxlIGVtYmVyCkBzdWJtb2R1bGUgZW1iZXIt
        aGFuZGxlYmFycwpAcmVxdWlyZXMgZW1iZXItdmlld3MKKi8KCkVtYmVyLnJ1
        bkxvYWRIb29rcygnRW1iZXIuSGFuZGxlYmFycycsIEVtYmVyLkhhbmRsZWJh
        cnMpOwoKfSkoKTsKCihmdW5jdGlvbigpIHsKZGVmaW5lKCJyb3V0ZS1yZWNv
        Z25pemVyIiwgCiAgWyJleHBvcnRzIl0sCiAgZnVuY3Rpb24oX19leHBvcnRz
        X18pIHsKICAgICJ1c2Ugc3RyaWN0IjsKICAgIHZhciBzcGVjaWFscyA9IFsK
        ICAgICAgJy8nLCAnLicsICcqJywgJysnLCAnPycsICd8JywKICAgICAgJygn
        LCAnKScsICdbJywgJ10nLCAneycsICd9JywgJ1xcJwogICAgXTsKCiAgICB2
        YXIgZXNjYXBlUmVnZXggPSBuZXcgUmVnRXhwKCcoXFwnICsgc3BlY2lhbHMu
        am9pbignfFxcJykgKyAnKScsICdnJyk7CgogICAgLy8gQSBTZWdtZW50IHJl
        cHJlc2VudHMgYSBzZWdtZW50IGluIHRoZSBvcmlnaW5hbCByb3V0ZSBkZXNj
        cmlwdGlvbi4KICAgIC8vIEVhY2ggU2VnbWVudCB0eXBlIHByb3ZpZGVzIGFu
        IGBlYWNoQ2hhcmAgYW5kIGByZWdleGAgbWV0aG9kLgogICAgLy8KICAgIC8v
        IFRoZSBgZWFjaENoYXJgIG1ldGhvZCBpbnZva2VzIHRoZSBjYWxsYmFjayB3
        aXRoIG9uZSBvciBtb3JlIGNoYXJhY3RlcgogICAgLy8gc3BlY2lmaWNhdGlv
        bnMuIEEgY2hhcmFjdGVyIHNwZWNpZmljYXRpb24gY29uc3VtZXMgb25lIG9y
        IG1vcmUgaW5wdXQKICAgIC8vIGNoYXJhY3RlcnMuCiAgICAvLwogICAgLy8g
        VGhlIGByZWdleGAgbWV0aG9kIHJldHVybnMgYSByZWdleCBmcmFnbWVudCBm
        b3IgdGhlIHNlZ21lbnQuIElmIHRoZQogICAgLy8gc2VnbWVudCBpcyBhIGR5
        bmFtaWMgb2Ygc3RhciBzZWdtZW50LCB0aGUgcmVnZXggZnJhZ21lbnQgYWxz
        byBpbmNsdWRlcwogICAgLy8gYSBjYXB0dXJlLgogICAgLy8KICAgIC8vIEEg
        Y2hhcmFjdGVyIHNwZWNpZmljYXRpb24gY29udGFpbnM6CiAgICAvLwogICAg
        Ly8gKiBgdmFsaWRDaGFyc2A6IGEgU3RyaW5nIHdpdGggYSBsaXN0IG9mIGFs
        bCB2YWxpZCBjaGFyYWN0ZXJzLCBvcgogICAgLy8gKiBgaW52YWxpZENoYXJz
        YDogYSBTdHJpbmcgd2l0aCBhIGxpc3Qgb2YgYWxsIGludmFsaWQgY2hhcmFj
        dGVycwogICAgLy8gKiBgcmVwZWF0YDogdHJ1ZSBpZiB0aGUgY2hhcmFjdGVy
        IHNwZWNpZmljYXRpb24gY2FuIHJlcGVhdAoKICAgIGZ1bmN0aW9uIFN0YXRp
        Y1NlZ21lbnQoc3RyaW5nKSB7IHRoaXMuc3RyaW5nID0gc3RyaW5nOyB9CiAg
        ICBTdGF0aWNTZWdtZW50LnByb3RvdHlwZSA9IHsKICAgICAgZWFjaENoYXI6
        IGZ1bmN0aW9uKGNhbGxiYWNrKSB7CiAgICAgICAgdmFyIHN0cmluZyA9IHRo
        aXMuc3RyaW5nLCBjaDsKCiAgICAgICAgZm9yICh2YXIgaT0wLCBsPXN0cmlu
        Zy5sZW5ndGg7IGk8bDsgaSsrKSB7CiAgICAgICAgICBjaCA9IHN0cmluZy5j
        aGFyQXQoaSk7CiAgICAgICAgICBjYWxsYmFjayh7IHZhbGlkQ2hhcnM6IGNo
        IH0pOwogICAgICAgIH0KICAgICAgfSwKCiAgICAgIHJlZ2V4OiBmdW5jdGlv
        bigpIHsKICAgICAgICByZXR1cm4gdGhpcy5zdHJpbmcucmVwbGFjZShlc2Nh
        cGVSZWdleCwgJ1xcJDEnKTsKICAgICAgfSwKCiAgICAgIGdlbmVyYXRlOiBm
        dW5jdGlvbigpIHsKICAgICAgICByZXR1cm4gdGhpcy5zdHJpbmc7CiAgICAg
        IH0KICAgIH07CgogICAgZnVuY3Rpb24gRHluYW1pY1NlZ21lbnQobmFtZSkg
        eyB0aGlzLm5hbWUgPSBuYW1lOyB9CiAgICBEeW5hbWljU2VnbWVudC5wcm90
        b3R5cGUgPSB7CiAgICAgIGVhY2hDaGFyOiBmdW5jdGlvbihjYWxsYmFjaykg
        ewogICAgICAgIGNhbGxiYWNrKHsgaW52YWxpZENoYXJzOiAiLyIsIHJlcGVh
        dDogdHJ1ZSB9KTsKICAgICAgfSwKCiAgICAgIHJlZ2V4OiBmdW5jdGlvbigp
        IHsKICAgICAgICByZXR1cm4gIihbXi9dKykiOwogICAgICB9LAoKICAgICAg
        Z2VuZXJhdGU6IGZ1bmN0aW9uKHBhcmFtcykgewogICAgICAgIHJldHVybiBw
        YXJhbXNbdGhpcy5uYW1lXTsKICAgICAgfQogICAgfTsKCiAgICBmdW5jdGlv
        biBTdGFyU2VnbWVudChuYW1lKSB7IHRoaXMubmFtZSA9IG5hbWU7IH0KICAg
        IFN0YXJTZWdtZW50LnByb3RvdHlwZSA9IHsKICAgICAgZWFjaENoYXI6IGZ1
        bmN0aW9uKGNhbGxiYWNrKSB7CiAgICAgICAgY2FsbGJhY2soeyBpbnZhbGlk
        Q2hhcnM6ICIiLCByZXBlYXQ6IHRydWUgfSk7CiAgICAgIH0sCgogICAgICBy
        ZWdleDogZnVuY3Rpb24oKSB7CiAgICAgICAgcmV0dXJuICIoLispIjsKICAg
        ICAgfSwKCiAgICAgIGdlbmVyYXRlOiBmdW5jdGlvbihwYXJhbXMpIHsKICAg
        ICAgICByZXR1cm4gcGFyYW1zW3RoaXMubmFtZV07CiAgICAgIH0KICAgIH07
        CgogICAgZnVuY3Rpb24gRXBzaWxvblNlZ21lbnQoKSB7fQogICAgRXBzaWxv
        blNlZ21lbnQucHJvdG90eXBlID0gewogICAgICBlYWNoQ2hhcjogZnVuY3Rp
        b24oKSB7fSwKICAgICAgcmVnZXg6IGZ1bmN0aW9uKCkgeyByZXR1cm4gIiI7
        IH0sCiAgICAgIGdlbmVyYXRlOiBmdW5jdGlvbigpIHsgcmV0dXJuICIiOyB9
        CiAgICB9OwoKICAgIGZ1bmN0aW9uIHBhcnNlKHJvdXRlLCBuYW1lcywgdHlw
        ZXMpIHsKICAgICAgLy8gbm9ybWFsaXplIHJvdXRlIGFzIG5vdCBzdGFydGlu
        ZyB3aXRoIGEgIi8iLiBSZWNvZ25pdGlvbiB3aWxsCiAgICAgIC8vIGFsc28g
        bm9ybWFsaXplLgogICAgICBpZiAocm91dGUuY2hhckF0KDApID09PSAiLyIp
        IHsgcm91dGUgPSByb3V0ZS5zdWJzdHIoMSk7IH0KCiAgICAgIHZhciBzZWdt
        ZW50cyA9IHJvdXRlLnNwbGl0KCIvIiksIHJlc3VsdHMgPSBbXTsKCiAgICAg
        IGZvciAodmFyIGk9MCwgbD1zZWdtZW50cy5sZW5ndGg7IGk8bDsgaSsrKSB7
        CiAgICAgICAgdmFyIHNlZ21lbnQgPSBzZWdtZW50c1tpXSwgbWF0Y2g7Cgog
        ICAgICAgIGlmIChtYXRjaCA9IHNlZ21lbnQubWF0Y2goL146KFteXC9dKykk
        LykpIHsKICAgICAgICAgIHJlc3VsdHMucHVzaChuZXcgRHluYW1pY1NlZ21l
        bnQobWF0Y2hbMV0pKTsKICAgICAgICAgIG5hbWVzLnB1c2gobWF0Y2hbMV0p
        OwogICAgICAgICAgdHlwZXMuZHluYW1pY3MrKzsKICAgICAgICB9IGVsc2Ug
        aWYgKG1hdGNoID0gc2VnbWVudC5tYXRjaCgvXlwqKFteXC9dKykkLykpIHsK
        ICAgICAgICAgIHJlc3VsdHMucHVzaChuZXcgU3RhclNlZ21lbnQobWF0Y2hb
        MV0pKTsKICAgICAgICAgIG5hbWVzLnB1c2gobWF0Y2hbMV0pOwogICAgICAg
        ICAgdHlwZXMuc3RhcnMrKzsKICAgICAgICB9IGVsc2UgaWYoc2VnbWVudCA9
        PT0gIiIpIHsKICAgICAgICAgIHJlc3VsdHMucHVzaChuZXcgRXBzaWxvblNl
        Z21lbnQoKSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJlc3VsdHMu
        cHVzaChuZXcgU3RhdGljU2VnbWVudChzZWdtZW50KSk7CiAgICAgICAgICB0
        eXBlcy5zdGF0aWNzKys7CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1
        cm4gcmVzdWx0czsKICAgIH0KCiAgICAvLyBBIFN0YXRlIGhhcyBhIGNoYXJh
        Y3RlciBzcGVjaWZpY2F0aW9uIGFuZCAoYGNoYXJTcGVjYCkgYW5kIGEgbGlz
        dCBvZiBwb3NzaWJsZQogICAgLy8gc3Vic2VxdWVudCBzdGF0ZXMgKGBuZXh0
        U3RhdGVzYCkuCiAgICAvLwogICAgLy8gSWYgYSBTdGF0ZSBpcyBhbiBhY2Nl
        cHRpbmcgc3RhdGUsIGl0IHdpbGwgYWxzbyBoYXZlIHNldmVyYWwgYWRkaXRp
        b25hbAogICAgLy8gcHJvcGVydGllczoKICAgIC8vCiAgICAvLyAqIGByZWdl
        eGA6IEEgcmVndWxhciBleHByZXNzaW9uIHRoYXQgaXMgdXNlZCB0byBleHRy
        YWN0IHBhcmFtZXRlcnMgZnJvbSBwYXRocwogICAgLy8gICB0aGF0IHJlYWNo
        ZWQgdGhpcyBhY2NlcHRpbmcgc3RhdGUuCiAgICAvLyAqIGBoYW5kbGVyc2A6
        IEluZm9ybWF0aW9uIG9uIGhvdyB0byBjb252ZXJ0IHRoZSBsaXN0IG9mIGNh
        cHR1cmVzIGludG8gY2FsbHMKICAgIC8vICAgdG8gcmVnaXN0ZXJlZCBoYW5k
        bGVycyB3aXRoIHRoZSBzcGVjaWZpZWQgcGFyYW1ldGVycwogICAgLy8gKiBg
        dHlwZXNgOiBIb3cgbWFueSBzdGF0aWMsIGR5bmFtaWMgb3Igc3RhciBzZWdt
        ZW50cyBpbiB0aGlzIHJvdXRlLiBVc2VkIHRvCiAgICAvLyAgIGRlY2lkZSB3
        aGljaCByb3V0ZSB0byB1c2UgaWYgbXVsdGlwbGUgcmVnaXN0ZXJlZCByb3V0
        ZXMgbWF0Y2ggYSBwYXRoLgogICAgLy8KICAgIC8vIEN1cnJlbnRseSwgU3Rh
        dGUgaXMgaW1wbGVtZW50ZWQgbmFpdmVseSBieSBsb29waW5nIG92ZXIgYG5l
        eHRTdGF0ZXNgIGFuZAogICAgLy8gY29tcGFyaW5nIGEgY2hhcmFjdGVyIHNw
        ZWNpZmljYXRpb24gYWdhaW5zdCBhIGNoYXJhY3Rlci4gQSBtb3JlIGVmZmlj
        aWVudAogICAgLy8gaW1wbGVtZW50YXRpb24gd291bGQgdXNlIGEgaGFzaCBv
        ZiBrZXlzIHBvaW50aW5nIGF0IG9uZSBvciBtb3JlIG5leHQgc3RhdGVzLgoK
        ICAgIGZ1bmN0aW9uIFN0YXRlKGNoYXJTcGVjKSB7CiAgICAgIHRoaXMuY2hh
        clNwZWMgPSBjaGFyU3BlYzsKICAgICAgdGhpcy5uZXh0U3RhdGVzID0gW107
        CiAgICB9CgogICAgU3RhdGUucHJvdG90eXBlID0gewogICAgICBnZXQ6IGZ1
        bmN0aW9uKGNoYXJTcGVjKSB7CiAgICAgICAgdmFyIG5leHRTdGF0ZXMgPSB0
        aGlzLm5leHRTdGF0ZXM7CgogICAgICAgIGZvciAodmFyIGk9MCwgbD1uZXh0
        U3RhdGVzLmxlbmd0aDsgaTxsOyBpKyspIHsKICAgICAgICAgIHZhciBjaGls
        ZCA9IG5leHRTdGF0ZXNbaV07CgogICAgICAgICAgdmFyIGlzRXF1YWwgPSBj
        aGlsZC5jaGFyU3BlYy52YWxpZENoYXJzID09PSBjaGFyU3BlYy52YWxpZENo
        YXJzOwogICAgICAgICAgaXNFcXVhbCA9IGlzRXF1YWwgJiYgY2hpbGQuY2hh
        clNwZWMuaW52YWxpZENoYXJzID09PSBjaGFyU3BlYy5pbnZhbGlkQ2hhcnM7
        CgogICAgICAgICAgaWYgKGlzRXF1YWwpIHsgcmV0dXJuIGNoaWxkOyB9CiAg
        ICAgICAgfQogICAgICB9LAoKICAgICAgcHV0OiBmdW5jdGlvbihjaGFyU3Bl
        YykgewogICAgICAgIHZhciBzdGF0ZTsKCiAgICAgICAgLy8gSWYgdGhlIGNo
        YXJhY3RlciBzcGVjaWZpY2F0aW9uIGFscmVhZHkgZXhpc3RzIGluIGEgY2hp
        bGQgb2YgdGhlIGN1cnJlbnQKICAgICAgICAvLyBzdGF0ZSwganVzdCByZXR1
        cm4gdGhhdCBzdGF0ZS4KICAgICAgICBpZiAoc3RhdGUgPSB0aGlzLmdldChj
        aGFyU3BlYykpIHsgcmV0dXJuIHN0YXRlOyB9CgogICAgICAgIC8vIE1ha2Ug
        YSBuZXcgc3RhdGUgZm9yIHRoZSBjaGFyYWN0ZXIgc3BlYwogICAgICAgIHN0
        YXRlID0gbmV3IFN0YXRlKGNoYXJTcGVjKTsKCiAgICAgICAgLy8gSW5zZXJ0
        IHRoZSBuZXcgc3RhdGUgYXMgYSBjaGlsZCBvZiB0aGUgY3VycmVudCBzdGF0
        ZQogICAgICAgIHRoaXMubmV4dFN0YXRlcy5wdXNoKHN0YXRlKTsKCiAgICAg
        ICAgLy8gSWYgdGhpcyBjaGFyYWN0ZXIgc3BlY2lmaWNhdGlvbiByZXBlYXRz
        LCBpbnNlcnQgdGhlIG5ldyBzdGF0ZSBhcyBhIGNoaWxkCiAgICAgICAgLy8g
        b2YgaXRzZWxmLiBOb3RlIHRoYXQgdGhpcyB3aWxsIG5vdCB0cmlnZ2VyIGFu
        IGluZmluaXRlIGxvb3AgYmVjYXVzZSBlYWNoCiAgICAgICAgLy8gdHJhbnNp
        dGlvbiBkdXJpbmcgcmVjb2duaXRpb24gY29uc3VtZXMgYSBjaGFyYWN0ZXIu
        CiAgICAgICAgaWYgKGNoYXJTcGVjLnJlcGVhdCkgewogICAgICAgICAgc3Rh
        dGUubmV4dFN0YXRlcy5wdXNoKHN0YXRlKTsKICAgICAgICB9CgogICAgICAg
        IC8vIFJldHVybiB0aGUgbmV3IHN0YXRlCiAgICAgICAgcmV0dXJuIHN0YXRl
        OwogICAgICB9LAoKICAgICAgLy8gRmluZCBhIGxpc3Qgb2YgY2hpbGQgc3Rh
        dGVzIG1hdGNoaW5nIHRoZSBuZXh0IGNoYXJhY3RlcgogICAgICBtYXRjaDog
        ZnVuY3Rpb24oY2gpIHsKICAgICAgICAvLyBERUJVRyAiUHJvY2Vzc2luZyBg
        IiArIGNoICsgImA6IgogICAgICAgIHZhciBuZXh0U3RhdGVzID0gdGhpcy5u
        ZXh0U3RhdGVzLAogICAgICAgICAgICBjaGlsZCwgY2hhclNwZWMsIGNoYXJz
        OwoKICAgICAgICAvLyBERUJVRyAiICAiICsgZGVidWdTdGF0ZSh0aGlzKQog
        ICAgICAgIHZhciByZXR1cm5lZCA9IFtdOwoKICAgICAgICBmb3IgKHZhciBp
        PTAsIGw9bmV4dFN0YXRlcy5sZW5ndGg7IGk8bDsgaSsrKSB7CiAgICAgICAg
        ICBjaGlsZCA9IG5leHRTdGF0ZXNbaV07CgogICAgICAgICAgY2hhclNwZWMg
        PSBjaGlsZC5jaGFyU3BlYzsKCiAgICAgICAgICBpZiAodHlwZW9mIChjaGFy
        cyA9IGNoYXJTcGVjLnZhbGlkQ2hhcnMpICE9PSAndW5kZWZpbmVkJykgewog
        ICAgICAgICAgICBpZiAoY2hhcnMuaW5kZXhPZihjaCkgIT09IC0xKSB7IHJl
        dHVybmVkLnB1c2goY2hpbGQpOyB9CiAgICAgICAgICB9IGVsc2UgaWYgKHR5
        cGVvZiAoY2hhcnMgPSBjaGFyU3BlYy5pbnZhbGlkQ2hhcnMpICE9PSAndW5k
        ZWZpbmVkJykgewogICAgICAgICAgICBpZiAoY2hhcnMuaW5kZXhPZihjaCkg
        PT09IC0xKSB7IHJldHVybmVkLnB1c2goY2hpbGQpOyB9CiAgICAgICAgICB9
        CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gcmV0dXJuZWQ7CiAgICAgIH0K
        CiAgICAgIC8qKiBJRiBERUJVRwogICAgICAsIGRlYnVnOiBmdW5jdGlvbigp
        IHsKICAgICAgICB2YXIgY2hhclNwZWMgPSB0aGlzLmNoYXJTcGVjLAogICAg
        ICAgICAgICBkZWJ1ZyA9ICJbIiwKICAgICAgICAgICAgY2hhcnMgPSBjaGFy
        U3BlYy52YWxpZENoYXJzIHx8IGNoYXJTcGVjLmludmFsaWRDaGFyczsKCiAg
        ICAgICAgaWYgKGNoYXJTcGVjLmludmFsaWRDaGFycykgeyBkZWJ1ZyArPSAi
        XiI7IH0KICAgICAgICBkZWJ1ZyArPSBjaGFyczsKICAgICAgICBkZWJ1ZyAr
        PSAiXSI7CgogICAgICAgIGlmIChjaGFyU3BlYy5yZXBlYXQpIHsgZGVidWcg
        Kz0gIisiOyB9CgogICAgICAgIHJldHVybiBkZWJ1ZzsKICAgICAgfQogICAg
        ICBFTkQgSUYgKiovCiAgICB9OwoKICAgIC8qKiBJRiBERUJVRwogICAgZnVu
        Y3Rpb24gZGVidWcobG9nKSB7CiAgICAgIGNvbnNvbGUubG9nKGxvZyk7CiAg
        ICB9CgogICAgZnVuY3Rpb24gZGVidWdTdGF0ZShzdGF0ZSkgewogICAgICBy
        ZXR1cm4gc3RhdGUubmV4dFN0YXRlcy5tYXAoZnVuY3Rpb24obikgewogICAg
        ICAgIGlmIChuLm5leHRTdGF0ZXMubGVuZ3RoID09PSAwKSB7IHJldHVybiAi
        KCAiICsgbi5kZWJ1ZygpICsgIiBbYWNjZXB0aW5nXSApIjsgfQogICAgICAg
        IHJldHVybiAiKCAiICsgbi5kZWJ1ZygpICsgIiA8dGhlbj4gIiArIG4ubmV4
        dFN0YXRlcy5tYXAoZnVuY3Rpb24ocykgeyByZXR1cm4gcy5kZWJ1ZygpIH0p
        LmpvaW4oIiBvciAiKSArICIgKSI7CiAgICAgIH0pLmpvaW4oIiwgIikKICAg
        IH0KICAgIEVORCBJRiAqKi8KCiAgICAvLyBUaGlzIGlzIGEgc29tZXdoYXQg
        bmFpdmUgc3RyYXRlZ3ksIGJ1dCBzaG91bGQgd29yayBpbiBhIGxvdCBvZiBj
        YXNlcwogICAgLy8gQSBiZXR0ZXIgc3RyYXRlZ3kgd291bGQgcHJvcGVybHkg
        cmVzb2x2ZSAvcG9zdHMvOmlkL25ldyBhbmQgL3Bvc3RzL2VkaXQvOmlkCiAg
        ICBmdW5jdGlvbiBzb3J0U29sdXRpb25zKHN0YXRlcykgewogICAgICByZXR1
        cm4gc3RhdGVzLnNvcnQoZnVuY3Rpb24oYSwgYikgewogICAgICAgIGlmIChh
        LnR5cGVzLnN0YXJzICE9PSBiLnR5cGVzLnN0YXJzKSB7IHJldHVybiBhLnR5
        cGVzLnN0YXJzIC0gYi50eXBlcy5zdGFyczsgfQogICAgICAgIGlmIChhLnR5
        cGVzLmR5bmFtaWNzICE9PSBiLnR5cGVzLmR5bmFtaWNzKSB7IHJldHVybiBh
        LnR5cGVzLmR5bmFtaWNzIC0gYi50eXBlcy5keW5hbWljczsgfQogICAgICAg
        IGlmIChhLnR5cGVzLnN0YXRpY3MgIT09IGIudHlwZXMuc3RhdGljcykgeyBy
        ZXR1cm4gYi50eXBlcy5zdGF0aWNzIC0gYS50eXBlcy5zdGF0aWNzOyB9Cgog
        ICAgICAgIHJldHVybiAwOwogICAgICB9KTsKICAgIH0KCiAgICBmdW5jdGlv
        biByZWNvZ25pemVDaGFyKHN0YXRlcywgY2gpIHsKICAgICAgdmFyIG5leHRT
        dGF0ZXMgPSBbXTsKCiAgICAgIGZvciAodmFyIGk9MCwgbD1zdGF0ZXMubGVu
        Z3RoOyBpPGw7IGkrKykgewogICAgICAgIHZhciBzdGF0ZSA9IHN0YXRlc1tp
        XTsKCiAgICAgICAgbmV4dFN0YXRlcyA9IG5leHRTdGF0ZXMuY29uY2F0KHN0
        YXRlLm1hdGNoKGNoKSk7CiAgICAgIH0KCiAgICAgIHJldHVybiBuZXh0U3Rh
        dGVzOwogICAgfQoKICAgIHZhciBvQ3JlYXRlID0gT2JqZWN0LmNyZWF0ZSB8
        fCBmdW5jdGlvbihwcm90bykgewogICAgICBmdW5jdGlvbiBGKCkge30KICAg
        ICAgRi5wcm90b3R5cGUgPSBwcm90bzsKICAgICAgcmV0dXJuIG5ldyBGKCk7
        CiAgICB9OwoKICAgIGZ1bmN0aW9uIFJlY29nbml6ZVJlc3VsdHMocXVlcnlQ
        YXJhbXMpIHsKICAgICAgdGhpcy5xdWVyeVBhcmFtcyA9IHF1ZXJ5UGFyYW1z
        IHx8IHt9OwogICAgfQogICAgUmVjb2duaXplUmVzdWx0cy5wcm90b3R5cGUg
        PSBvQ3JlYXRlKHsKICAgICAgc3BsaWNlOiBBcnJheS5wcm90b3R5cGUuc3Bs
        aWNlLAogICAgICBzbGljZTogIEFycmF5LnByb3RvdHlwZS5zbGljZSwKICAg
        ICAgcHVzaDogICBBcnJheS5wcm90b3R5cGUucHVzaCwKICAgICAgbGVuZ3Ro
        OiAwLAogICAgICBxdWVyeVBhcmFtczogbnVsbAogICAgfSk7CgogICAgZnVu
        Y3Rpb24gZmluZEhhbmRsZXIoc3RhdGUsIHBhdGgsIHF1ZXJ5UGFyYW1zKSB7
        CiAgICAgIHZhciBoYW5kbGVycyA9IHN0YXRlLmhhbmRsZXJzLCByZWdleCA9
        IHN0YXRlLnJlZ2V4OwogICAgICB2YXIgY2FwdHVyZXMgPSBwYXRoLm1hdGNo
        KHJlZ2V4KSwgY3VycmVudENhcHR1cmUgPSAxOwogICAgICB2YXIgcmVzdWx0
        ID0gbmV3IFJlY29nbml6ZVJlc3VsdHMocXVlcnlQYXJhbXMpOwoKICAgICAg
        Zm9yICh2YXIgaT0wLCBsPWhhbmRsZXJzLmxlbmd0aDsgaTxsOyBpKyspIHsK
        ICAgICAgICB2YXIgaGFuZGxlciA9IGhhbmRsZXJzW2ldLCBuYW1lcyA9IGhh
        bmRsZXIubmFtZXMsIHBhcmFtcyA9IHt9OwoKICAgICAgICBmb3IgKHZhciBq
        PTAsIG09bmFtZXMubGVuZ3RoOyBqPG07IGorKykgewogICAgICAgICAgcGFy
        YW1zW25hbWVzW2pdXSA9IGNhcHR1cmVzW2N1cnJlbnRDYXB0dXJlKytdOwog
        ICAgICAgIH0KCiAgICAgICAgcmVzdWx0LnB1c2goeyBoYW5kbGVyOiBoYW5k
        bGVyLmhhbmRsZXIsIHBhcmFtczogcGFyYW1zLCBpc0R5bmFtaWM6ICEhbmFt
        ZXMubGVuZ3RoIH0pOwogICAgICB9CgogICAgICByZXR1cm4gcmVzdWx0Owog
        ICAgfQoKICAgIGZ1bmN0aW9uIGFkZFNlZ21lbnQoY3VycmVudFN0YXRlLCBz
        ZWdtZW50KSB7CiAgICAgIHNlZ21lbnQuZWFjaENoYXIoZnVuY3Rpb24oY2gp
        IHsKICAgICAgICB2YXIgc3RhdGU7CgogICAgICAgIGN1cnJlbnRTdGF0ZSA9
        IGN1cnJlbnRTdGF0ZS5wdXQoY2gpOwogICAgICB9KTsKCiAgICAgIHJldHVy
        biBjdXJyZW50U3RhdGU7CiAgICB9CgogICAgLy8gVGhlIG1haW4gaW50ZXJm
        YWNlCgogICAgdmFyIFJvdXRlUmVjb2duaXplciA9IGZ1bmN0aW9uKCkgewog
        ICAgICB0aGlzLnJvb3RTdGF0ZSA9IG5ldyBTdGF0ZSgpOwogICAgICB0aGlz
        Lm5hbWVzID0ge307CiAgICB9OwoKCiAgICBSb3V0ZVJlY29nbml6ZXIucHJv
        dG90eXBlID0gewogICAgICBhZGQ6IGZ1bmN0aW9uKHJvdXRlcywgb3B0aW9u
        cykgewogICAgICAgIHZhciBjdXJyZW50U3RhdGUgPSB0aGlzLnJvb3RTdGF0
        ZSwgcmVnZXggPSAiXiIsCiAgICAgICAgICAgIHR5cGVzID0geyBzdGF0aWNz
        OiAwLCBkeW5hbWljczogMCwgc3RhcnM6IDAgfSwKICAgICAgICAgICAgaGFu
        ZGxlcnMgPSBbXSwgYWxsU2VnbWVudHMgPSBbXSwgbmFtZTsKCiAgICAgICAg
        dmFyIGlzRW1wdHkgPSB0cnVlOwoKICAgICAgICBmb3IgKHZhciBpPTAsIGw9
        cm91dGVzLmxlbmd0aDsgaTxsOyBpKyspIHsKICAgICAgICAgIHZhciByb3V0
        ZSA9IHJvdXRlc1tpXSwgbmFtZXMgPSBbXTsKCiAgICAgICAgICB2YXIgc2Vn
        bWVudHMgPSBwYXJzZShyb3V0ZS5wYXRoLCBuYW1lcywgdHlwZXMpOwoKICAg
        ICAgICAgIGFsbFNlZ21lbnRzID0gYWxsU2VnbWVudHMuY29uY2F0KHNlZ21l
        bnRzKTsKCiAgICAgICAgICBmb3IgKHZhciBqPTAsIG09c2VnbWVudHMubGVu
        Z3RoOyBqPG07IGorKykgewogICAgICAgICAgICB2YXIgc2VnbWVudCA9IHNl
        Z21lbnRzW2pdOwoKICAgICAgICAgICAgaWYgKHNlZ21lbnQgaW5zdGFuY2Vv
        ZiBFcHNpbG9uU2VnbWVudCkgeyBjb250aW51ZTsgfQoKICAgICAgICAgICAg
        aXNFbXB0eSA9IGZhbHNlOwoKICAgICAgICAgICAgLy8gQWRkIGEgIi8iIGZv
        ciB0aGUgbmV3IHNlZ21lbnQKICAgICAgICAgICAgY3VycmVudFN0YXRlID0g
        Y3VycmVudFN0YXRlLnB1dCh7IHZhbGlkQ2hhcnM6ICIvIiB9KTsKICAgICAg
        ICAgICAgcmVnZXggKz0gIi8iOwoKICAgICAgICAgICAgLy8gQWRkIGEgcmVw
        cmVzZW50YXRpb24gb2YgdGhlIHNlZ21lbnQgdG8gdGhlIE5GQSBhbmQgcmVn
        ZXgKICAgICAgICAgICAgY3VycmVudFN0YXRlID0gYWRkU2VnbWVudChjdXJy
        ZW50U3RhdGUsIHNlZ21lbnQpOwogICAgICAgICAgICByZWdleCArPSBzZWdt
        ZW50LnJlZ2V4KCk7CiAgICAgICAgICB9CgogICAgICAgICAgdmFyIGhhbmRs
        ZXIgPSB7IGhhbmRsZXI6IHJvdXRlLmhhbmRsZXIsIG5hbWVzOiBuYW1lcyB9
        OwogICAgICAgICAgaGFuZGxlcnMucHVzaChoYW5kbGVyKTsKICAgICAgICB9
        CgogICAgICAgIGlmIChpc0VtcHR5KSB7CiAgICAgICAgICBjdXJyZW50U3Rh
        dGUgPSBjdXJyZW50U3RhdGUucHV0KHsgdmFsaWRDaGFyczogIi8iIH0pOwog
        ICAgICAgICAgcmVnZXggKz0gIi8iOwogICAgICAgIH0KCiAgICAgICAgY3Vy
        cmVudFN0YXRlLmhhbmRsZXJzID0gaGFuZGxlcnM7CiAgICAgICAgY3VycmVu
        dFN0YXRlLnJlZ2V4ID0gbmV3IFJlZ0V4cChyZWdleCArICIkIik7CiAgICAg
        ICAgY3VycmVudFN0YXRlLnR5cGVzID0gdHlwZXM7CgogICAgICAgIGlmIChu
        YW1lID0gb3B0aW9ucyAmJiBvcHRpb25zLmFzKSB7CiAgICAgICAgICB0aGlz
        Lm5hbWVzW25hbWVdID0gewogICAgICAgICAgICBzZWdtZW50czogYWxsU2Vn
        bWVudHMsCiAgICAgICAgICAgIGhhbmRsZXJzOiBoYW5kbGVycwogICAgICAg
        ICAgfTsKICAgICAgICB9CiAgICAgIH0sCgogICAgICBoYW5kbGVyc0Zvcjog
        ZnVuY3Rpb24obmFtZSkgewogICAgICAgIHZhciByb3V0ZSA9IHRoaXMubmFt
        ZXNbbmFtZV0sIHJlc3VsdCA9IFtdOwogICAgICAgIGlmICghcm91dGUpIHsg
        dGhyb3cgbmV3IEVycm9yKCJUaGVyZSBpcyBubyByb3V0ZSBuYW1lZCAiICsg
        bmFtZSk7IH0KCiAgICAgICAgZm9yICh2YXIgaT0wLCBsPXJvdXRlLmhhbmRs
        ZXJzLmxlbmd0aDsgaTxsOyBpKyspIHsKICAgICAgICAgIHJlc3VsdC5wdXNo
        KHJvdXRlLmhhbmRsZXJzW2ldKTsKICAgICAgICB9CgogICAgICAgIHJldHVy
        biByZXN1bHQ7CiAgICAgIH0sCgogICAgICBoYXNSb3V0ZTogZnVuY3Rpb24o
        bmFtZSkgewogICAgICAgIHJldHVybiAhIXRoaXMubmFtZXNbbmFtZV07CiAg
        ICAgIH0sCgogICAgICBnZW5lcmF0ZTogZnVuY3Rpb24obmFtZSwgcGFyYW1z
        KSB7CiAgICAgICAgdmFyIHJvdXRlID0gdGhpcy5uYW1lc1tuYW1lXSwgb3V0
        cHV0ID0gIiI7CiAgICAgICAgaWYgKCFyb3V0ZSkgeyB0aHJvdyBuZXcgRXJy
        b3IoIlRoZXJlIGlzIG5vIHJvdXRlIG5hbWVkICIgKyBuYW1lKTsgfQoKICAg
        ICAgICB2YXIgc2VnbWVudHMgPSByb3V0ZS5zZWdtZW50czsKCiAgICAgICAg
        Zm9yICh2YXIgaT0wLCBsPXNlZ21lbnRzLmxlbmd0aDsgaTxsOyBpKyspIHsK
        ICAgICAgICAgIHZhciBzZWdtZW50ID0gc2VnbWVudHNbaV07CgogICAgICAg
        ICAgaWYgKHNlZ21lbnQgaW5zdGFuY2VvZiBFcHNpbG9uU2VnbWVudCkgeyBj
        b250aW51ZTsgfQoKICAgICAgICAgIG91dHB1dCArPSAiLyI7CiAgICAgICAg
        ICBvdXRwdXQgKz0gc2VnbWVudC5nZW5lcmF0ZShwYXJhbXMpOwogICAgICAg
        IH0KCiAgICAgICAgaWYgKG91dHB1dC5jaGFyQXQoMCkgIT09ICcvJykgeyBv
        dXRwdXQgPSAnLycgKyBvdXRwdXQ7IH0KCiAgICAgICAgaWYgKHBhcmFtcyAm
        JiBwYXJhbXMucXVlcnlQYXJhbXMpIHsKICAgICAgICAgIG91dHB1dCArPSB0
        aGlzLmdlbmVyYXRlUXVlcnlTdHJpbmcocGFyYW1zLnF1ZXJ5UGFyYW1zLCBy
        b3V0ZS5oYW5kbGVycyk7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gb3V0
        cHV0OwogICAgICB9LAoKICAgICAgZ2VuZXJhdGVRdWVyeVN0cmluZzogZnVu
        Y3Rpb24ocGFyYW1zLCBoYW5kbGVycykgewogICAgICAgIHZhciBwYWlycyA9
        IFtdOwogICAgICAgIGZvcih2YXIga2V5IGluIHBhcmFtcykgewogICAgICAg
        ICAgaWYgKHBhcmFtcy5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7CiAgICAgICAg
        ICAgIHZhciB2YWx1ZSA9IHBhcmFtc1trZXldOwogICAgICAgICAgICBpZiAo
        dmFsdWUgPT09IGZhbHNlIHx8IHZhbHVlID09IG51bGwpIHsKICAgICAgICAg
        ICAgICBjb250aW51ZTsKICAgICAgICAgICAgfQogICAgICAgICAgICB2YXIg
        cGFpciA9IGtleTsKICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodmFs
        dWUpKSB7CiAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSB2YWx1
        ZS5sZW5ndGg7IGkgPCBsOyBpKyspIHsKICAgICAgICAgICAgICAgIHZhciBh
        cnJheVBhaXIgPSBrZXkgKyAnW10nICsgJz0nICsgZW5jb2RlVVJJQ29tcG9u
        ZW50KHZhbHVlW2ldKTsKICAgICAgICAgICAgICAgIHBhaXJzLnB1c2goYXJy
        YXlQYWlyKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAg
        ICAgICAgZWxzZSBpZiAodmFsdWUgIT09IHRydWUpIHsKICAgICAgICAgICAg
        ICBwYWlyICs9ICI9IiArIGVuY29kZVVSSUNvbXBvbmVudCh2YWx1ZSk7CiAg
        ICAgICAgICAgICAgcGFpcnMucHVzaChwYWlyKTsKICAgICAgICAgICAgfSBl
        bHNlIHsKICAgICAgICAgICAgICBwYWlycy5wdXNoKHBhaXIpOwogICAgICAg
        ICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBpZiAocGFp
        cnMubGVuZ3RoID09PSAwKSB7IHJldHVybiAnJzsgfQoKICAgICAgICByZXR1
        cm4gIj8iICsgcGFpcnMuam9pbigiJiIpOwogICAgICB9LAoKICAgICAgcGFy
        c2VRdWVyeVN0cmluZzogZnVuY3Rpb24ocXVlcnlTdHJpbmcpIHsKICAgICAg
        ICB2YXIgcGFpcnMgPSBxdWVyeVN0cmluZy5zcGxpdCgiJiIpLCBxdWVyeVBh
        cmFtcyA9IHt9OwogICAgICAgIGZvcih2YXIgaT0wOyBpIDwgcGFpcnMubGVu
        Z3RoOyBpKyspIHsKICAgICAgICAgIHZhciBwYWlyICAgICAgPSBwYWlyc1tp
        XS5zcGxpdCgnPScpLAogICAgICAgICAgICAgIGtleSAgICAgICA9IGRlY29k
        ZVVSSUNvbXBvbmVudChwYWlyWzBdKSwKICAgICAgICAgICAgICBrZXlMZW5n
        dGggPSBrZXkubGVuZ3RoLAogICAgICAgICAgICAgIGlzQXJyYXkgPSBmYWxz
        ZSwKICAgICAgICAgICAgICB2YWx1ZTsKICAgICAgICAgIGlmIChwYWlyLmxl
        bmd0aCA9PT0gMSkgewogICAgICAgICAgICB2YWx1ZSA9IHRydWU7CiAgICAg
        ICAgICB9IGVsc2UgewogICAgICAgICAgICAvL0hhbmRsZSBhcnJheXMKICAg
        ICAgICAgICAgaWYgKGtleUxlbmd0aCA+IDIgJiYga2V5LnNsaWNlKGtleUxl
        bmd0aCAtMikgPT09ICdbXScpIHsKICAgICAgICAgICAgICBpc0FycmF5ID0g
        dHJ1ZTsKICAgICAgICAgICAgICBrZXkgPSBrZXkuc2xpY2UoMCwga2V5TGVu
        Z3RoIC0gMik7CiAgICAgICAgICAgICAgaWYoIXF1ZXJ5UGFyYW1zW2tleV0p
        IHsKICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1zW2tleV0gPSBbXTsKICAg
        ICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdmFsdWUg
        PSBwYWlyWzFdID8gZGVjb2RlVVJJQ29tcG9uZW50KHBhaXJbMV0pIDogJyc7
        CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoaXNBcnJheSkgewogICAgICAg
        ICAgICBxdWVyeVBhcmFtc1trZXldLnB1c2godmFsdWUpOwogICAgICAgICAg
        fSBlbHNlIHsKICAgICAgICAgICAgcXVlcnlQYXJhbXNba2V5XSA9IHZhbHVl
        OwogICAgICAgICAgfQogICAgICAgICAgCiAgICAgICAgfQogICAgICAgIHJl
        dHVybiBxdWVyeVBhcmFtczsKICAgICAgfSwKCiAgICAgIHJlY29nbml6ZTog
        ZnVuY3Rpb24ocGF0aCkgewogICAgICAgIHZhciBzdGF0ZXMgPSBbIHRoaXMu
        cm9vdFN0YXRlIF0sCiAgICAgICAgICAgIHBhdGhMZW4sIGksIGwsIHF1ZXJ5
        U3RhcnQsIHF1ZXJ5UGFyYW1zID0ge30sIAogICAgICAgICAgICBpc1NsYXNo
        RHJvcHBlZCA9IGZhbHNlOwoKICAgICAgICBxdWVyeVN0YXJ0ID0gcGF0aC5p
        bmRleE9mKCc/Jyk7CiAgICAgICAgaWYgKHF1ZXJ5U3RhcnQgIT09IC0xKSB7
        CiAgICAgICAgICB2YXIgcXVlcnlTdHJpbmcgPSBwYXRoLnN1YnN0cihxdWVy
        eVN0YXJ0ICsgMSwgcGF0aC5sZW5ndGgpOwogICAgICAgICAgcGF0aCA9IHBh
        dGguc3Vic3RyKDAsIHF1ZXJ5U3RhcnQpOwogICAgICAgICAgcXVlcnlQYXJh
        bXMgPSB0aGlzLnBhcnNlUXVlcnlTdHJpbmcocXVlcnlTdHJpbmcpOwogICAg
        ICAgIH0KCiAgICAgICAgLy8gREVCVUcgR1JPVVAgcGF0aAoKICAgICAgICBp
        ZiAocGF0aC5jaGFyQXQoMCkgIT09ICIvIikgeyBwYXRoID0gIi8iICsgcGF0
        aDsgfQoKICAgICAgICBwYXRoTGVuID0gcGF0aC5sZW5ndGg7CiAgICAgICAg
        aWYgKHBhdGhMZW4gPiAxICYmIHBhdGguY2hhckF0KHBhdGhMZW4gLSAxKSA9
        PT0gIi8iKSB7CiAgICAgICAgICBwYXRoID0gcGF0aC5zdWJzdHIoMCwgcGF0
        aExlbiAtIDEpOwogICAgICAgICAgaXNTbGFzaERyb3BwZWQgPSB0cnVlOwog
        ICAgICAgIH0KCiAgICAgICAgZm9yIChpPTAsIGw9cGF0aC5sZW5ndGg7IGk8
        bDsgaSsrKSB7CiAgICAgICAgICBzdGF0ZXMgPSByZWNvZ25pemVDaGFyKHN0
        YXRlcywgcGF0aC5jaGFyQXQoaSkpOwogICAgICAgICAgaWYgKCFzdGF0ZXMu
        bGVuZ3RoKSB7IGJyZWFrOyB9CiAgICAgICAgfQoKICAgICAgICAvLyBFTkQg
        REVCVUcgR1JPVVAKCiAgICAgICAgdmFyIHNvbHV0aW9ucyA9IFtdOwogICAg
        ICAgIGZvciAoaT0wLCBsPXN0YXRlcy5sZW5ndGg7IGk8bDsgaSsrKSB7CiAg
        ICAgICAgICBpZiAoc3RhdGVzW2ldLmhhbmRsZXJzKSB7IHNvbHV0aW9ucy5w
        dXNoKHN0YXRlc1tpXSk7IH0KICAgICAgICB9CgogICAgICAgIHN0YXRlcyA9
        IHNvcnRTb2x1dGlvbnMoc29sdXRpb25zKTsKCiAgICAgICAgdmFyIHN0YXRl
        ID0gc29sdXRpb25zWzBdOwoKICAgICAgICBpZiAoc3RhdGUgJiYgc3RhdGUu
        aGFuZGxlcnMpIHsKICAgICAgICAgIC8vIGlmIGEgdHJhaWxpbmcgc2xhc2gg
        d2FzIGRyb3BwZWQgYW5kIGEgc3RhciBzZWdtZW50IGlzIHRoZSBsYXN0IHNl
        Z21lbnQgCiAgICAgICAgICAvLyBzcGVjaWZpZWQsIHB1dCB0aGUgdHJhaWxp
        bmcgc2xhc2ggYmFjawogICAgICAgICAgaWYgKGlzU2xhc2hEcm9wcGVkICYm
        IHN0YXRlLnJlZ2V4LnNvdXJjZS5zbGljZSgtNSkgPT09ICIoLispJCIpIHsK
        ICAgICAgICAgICAgcGF0aCA9IHBhdGggKyAiLyI7CiAgICAgICAgICB9CiAg
        ICAgICAgICByZXR1cm4gZmluZEhhbmRsZXIoc3RhdGUsIHBhdGgsIHF1ZXJ5
        UGFyYW1zKTsKICAgICAgICB9CiAgICAgIH0KICAgIH07CgogICAgX19leHBv
        cnRzX19bImRlZmF1bHQiXSA9IFJvdXRlUmVjb2duaXplcjsKCiAgICBmdW5j
        dGlvbiBUYXJnZXQocGF0aCwgbWF0Y2hlciwgZGVsZWdhdGUpIHsKICAgICAg
        dGhpcy5wYXRoID0gcGF0aDsKICAgICAgdGhpcy5tYXRjaGVyID0gbWF0Y2hl
        cjsKICAgICAgdGhpcy5kZWxlZ2F0ZSA9IGRlbGVnYXRlOwogICAgfQoKICAg
        IFRhcmdldC5wcm90b3R5cGUgPSB7CiAgICAgIHRvOiBmdW5jdGlvbih0YXJn
        ZXQsIGNhbGxiYWNrKSB7CiAgICAgICAgdmFyIGRlbGVnYXRlID0gdGhpcy5k
        ZWxlZ2F0ZTsKCiAgICAgICAgaWYgKGRlbGVnYXRlICYmIGRlbGVnYXRlLndp
        bGxBZGRSb3V0ZSkgewogICAgICAgICAgdGFyZ2V0ID0gZGVsZWdhdGUud2ls
        bEFkZFJvdXRlKHRoaXMubWF0Y2hlci50YXJnZXQsIHRhcmdldCk7CiAgICAg
        ICAgfQoKICAgICAgICB0aGlzLm1hdGNoZXIuYWRkKHRoaXMucGF0aCwgdGFy
        Z2V0KTsKCiAgICAgICAgaWYgKGNhbGxiYWNrKSB7CiAgICAgICAgICBpZiAo
        Y2FsbGJhY2subGVuZ3RoID09PSAwKSB7IHRocm93IG5ldyBFcnJvcigiWW91
        IG11c3QgaGF2ZSBhbiBhcmd1bWVudCBpbiB0aGUgZnVuY3Rpb24gcGFzc2Vk
        IHRvIGB0b2AiKTsgfQogICAgICAgICAgdGhpcy5tYXRjaGVyLmFkZENoaWxk
        KHRoaXMucGF0aCwgdGFyZ2V0LCBjYWxsYmFjaywgdGhpcy5kZWxlZ2F0ZSk7
        CiAgICAgICAgfQogICAgICAgIHJldHVybiB0aGlzOwogICAgICB9CiAgICB9
        OwoKICAgIGZ1bmN0aW9uIE1hdGNoZXIodGFyZ2V0KSB7CiAgICAgIHRoaXMu
        cm91dGVzID0ge307CiAgICAgIHRoaXMuY2hpbGRyZW4gPSB7fTsKICAgICAg
        dGhpcy50YXJnZXQgPSB0YXJnZXQ7CiAgICB9CgogICAgTWF0Y2hlci5wcm90
        b3R5cGUgPSB7CiAgICAgIGFkZDogZnVuY3Rpb24ocGF0aCwgaGFuZGxlcikg
        ewogICAgICAgIHRoaXMucm91dGVzW3BhdGhdID0gaGFuZGxlcjsKICAgICAg
        fSwKCiAgICAgIGFkZENoaWxkOiBmdW5jdGlvbihwYXRoLCB0YXJnZXQsIGNh
        bGxiYWNrLCBkZWxlZ2F0ZSkgewogICAgICAgIHZhciBtYXRjaGVyID0gbmV3
        IE1hdGNoZXIodGFyZ2V0KTsKICAgICAgICB0aGlzLmNoaWxkcmVuW3BhdGhd
        ID0gbWF0Y2hlcjsKCiAgICAgICAgdmFyIG1hdGNoID0gZ2VuZXJhdGVNYXRj
        aChwYXRoLCBtYXRjaGVyLCBkZWxlZ2F0ZSk7CgogICAgICAgIGlmIChkZWxl
        Z2F0ZSAmJiBkZWxlZ2F0ZS5jb250ZXh0RW50ZXJlZCkgewogICAgICAgICAg
        ZGVsZWdhdGUuY29udGV4dEVudGVyZWQodGFyZ2V0LCBtYXRjaCk7CiAgICAg
        ICAgfQoKICAgICAgICBjYWxsYmFjayhtYXRjaCk7CiAgICAgIH0KICAgIH07
        CgogICAgZnVuY3Rpb24gZ2VuZXJhdGVNYXRjaChzdGFydGluZ1BhdGgsIG1h
        dGNoZXIsIGRlbGVnYXRlKSB7CiAgICAgIHJldHVybiBmdW5jdGlvbihwYXRo
        LCBuZXN0ZWRDYWxsYmFjaykgewogICAgICAgIHZhciBmdWxsUGF0aCA9IHN0
        YXJ0aW5nUGF0aCArIHBhdGg7CgogICAgICAgIGlmIChuZXN0ZWRDYWxsYmFj
        aykgewogICAgICAgICAgbmVzdGVkQ2FsbGJhY2soZ2VuZXJhdGVNYXRjaChm
        dWxsUGF0aCwgbWF0Y2hlciwgZGVsZWdhdGUpKTsKICAgICAgICB9IGVsc2Ug
        ewogICAgICAgICAgcmV0dXJuIG5ldyBUYXJnZXQoc3RhcnRpbmdQYXRoICsg
        cGF0aCwgbWF0Y2hlciwgZGVsZWdhdGUpOwogICAgICAgIH0KICAgICAgfTsK
        ICAgIH0KCiAgICBmdW5jdGlvbiBhZGRSb3V0ZShyb3V0ZUFycmF5LCBwYXRo
        LCBoYW5kbGVyKSB7CiAgICAgIHZhciBsZW4gPSAwOwogICAgICBmb3IgKHZh
        ciBpPTAsIGw9cm91dGVBcnJheS5sZW5ndGg7IGk8bDsgaSsrKSB7CiAgICAg
        ICAgbGVuICs9IHJvdXRlQXJyYXlbaV0ucGF0aC5sZW5ndGg7CiAgICAgIH0K
        CiAgICAgIHBhdGggPSBwYXRoLnN1YnN0cihsZW4pOwogICAgICB2YXIgcm91
        dGUgPSB7IHBhdGg6IHBhdGgsIGhhbmRsZXI6IGhhbmRsZXIgfTsKICAgICAg
        cm91dGVBcnJheS5wdXNoKHJvdXRlKTsKICAgIH0KCiAgICBmdW5jdGlvbiBl
        YWNoUm91dGUoYmFzZVJvdXRlLCBtYXRjaGVyLCBjYWxsYmFjaywgYmluZGlu
        ZykgewogICAgICB2YXIgcm91dGVzID0gbWF0Y2hlci5yb3V0ZXM7CgogICAg
        ICBmb3IgKHZhciBwYXRoIGluIHJvdXRlcykgewogICAgICAgIGlmIChyb3V0
        ZXMuaGFzT3duUHJvcGVydHkocGF0aCkpIHsKICAgICAgICAgIHZhciByb3V0
        ZUFycmF5ID0gYmFzZVJvdXRlLnNsaWNlKCk7CiAgICAgICAgICBhZGRSb3V0
        ZShyb3V0ZUFycmF5LCBwYXRoLCByb3V0ZXNbcGF0aF0pOwoKICAgICAgICAg
        IGlmIChtYXRjaGVyLmNoaWxkcmVuW3BhdGhdKSB7CiAgICAgICAgICAgIGVh
        Y2hSb3V0ZShyb3V0ZUFycmF5LCBtYXRjaGVyLmNoaWxkcmVuW3BhdGhdLCBj
        YWxsYmFjaywgYmluZGluZyk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAg
        ICAgICBjYWxsYmFjay5jYWxsKGJpbmRpbmcsIHJvdXRlQXJyYXkpOwogICAg
        ICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIFJvdXRlUmVj
        b2duaXplci5wcm90b3R5cGUubWFwID0gZnVuY3Rpb24oY2FsbGJhY2ssIGFk
        ZFJvdXRlQ2FsbGJhY2spIHsKICAgICAgdmFyIG1hdGNoZXIgPSBuZXcgTWF0
        Y2hlcigpOwoKICAgICAgY2FsbGJhY2soZ2VuZXJhdGVNYXRjaCgiIiwgbWF0
        Y2hlciwgdGhpcy5kZWxlZ2F0ZSkpOwoKICAgICAgZWFjaFJvdXRlKFtdLCBt
        YXRjaGVyLCBmdW5jdGlvbihyb3V0ZSkgewogICAgICAgIGlmIChhZGRSb3V0
        ZUNhbGxiYWNrKSB7IGFkZFJvdXRlQ2FsbGJhY2sodGhpcywgcm91dGUpOyB9
        CiAgICAgICAgZWxzZSB7IHRoaXMuYWRkKHJvdXRlKTsgfQogICAgICB9LCB0
        aGlzKTsKICAgIH07CiAgfSk7Cgp9KSgpOwoKCgooZnVuY3Rpb24oKSB7CmRl
        ZmluZSgicm91dGVyL2hhbmRsZXItaW5mbyIsIAogIFsiLi91dGlscyIsInJz
        dnAiLCJleHBvcnRzIl0sCiAgZnVuY3Rpb24oX19kZXBlbmRlbmN5MV9fLCBf
        X2RlcGVuZGVuY3kyX18sIF9fZXhwb3J0c19fKSB7CiAgICAidXNlIHN0cmlj
        dCI7CiAgICB2YXIgYmluZCA9IF9fZGVwZW5kZW5jeTFfXy5iaW5kOwogICAg
        dmFyIG1lcmdlID0gX19kZXBlbmRlbmN5MV9fLm1lcmdlOwogICAgdmFyIG9D
        cmVhdGUgPSBfX2RlcGVuZGVuY3kxX18ub0NyZWF0ZTsKICAgIHZhciBzZXJp
        YWxpemUgPSBfX2RlcGVuZGVuY3kxX18uc2VyaWFsaXplOwogICAgdmFyIHJl
        c29sdmUgPSBfX2RlcGVuZGVuY3kyX18ucmVzb2x2ZTsKCiAgICBmdW5jdGlv
        biBIYW5kbGVySW5mbyhwcm9wcykgewogICAgICBpZiAocHJvcHMpIHsKICAg
        ICAgICBtZXJnZSh0aGlzLCBwcm9wcyk7CiAgICAgIH0KICAgIH0KCiAgICBI
        YW5kbGVySW5mby5wcm90b3R5cGUgPSB7CiAgICAgIG5hbWU6IG51bGwsCiAg
        ICAgIGhhbmRsZXI6IG51bGwsCiAgICAgIHBhcmFtczogbnVsbCwKICAgICAg
        Y29udGV4dDogbnVsbCwKCiAgICAgIGxvZzogZnVuY3Rpb24ocGF5bG9hZCwg
        bWVzc2FnZSkgewogICAgICAgIGlmIChwYXlsb2FkLmxvZykgewogICAgICAg
        ICAgcGF5bG9hZC5sb2codGhpcy5uYW1lICsgJzogJyArIG1lc3NhZ2UpOwog
        ICAgICAgIH0KICAgICAgfSwKCiAgICAgIHJlc29sdmU6IGZ1bmN0aW9uKGFz
        eW5jLCBzaG91bGRDb250aW51ZSwgcGF5bG9hZCkgewogICAgICAgIHZhciBj
        aGVja0ZvckFib3J0ICA9IGJpbmQodGhpcy5jaGVja0ZvckFib3J0LCAgICAg
        IHRoaXMsIHNob3VsZENvbnRpbnVlKSwKICAgICAgICAgICAgYmVmb3JlTW9k
        ZWwgICAgPSBiaW5kKHRoaXMucnVuQmVmb3JlTW9kZWxIb29rLCB0aGlzLCBh
        c3luYywgcGF5bG9hZCksCiAgICAgICAgICAgIG1vZGVsICAgICAgICAgID0g
        YmluZCh0aGlzLmdldE1vZGVsLCAgICAgICAgICAgdGhpcywgYXN5bmMsIHBh
        eWxvYWQpLAogICAgICAgICAgICBhZnRlck1vZGVsICAgICA9IGJpbmQodGhp
        cy5ydW5BZnRlck1vZGVsSG9vaywgIHRoaXMsIGFzeW5jLCBwYXlsb2FkKSwK
        ICAgICAgICAgICAgYmVjb21lUmVzb2x2ZWQgPSBiaW5kKHRoaXMuYmVjb21l
        UmVzb2x2ZWQsICAgICB0aGlzLCBwYXlsb2FkKTsKCiAgICAgICAgcmV0dXJu
        IHJlc29sdmUoKS50aGVuKGNoZWNrRm9yQWJvcnQpCiAgICAgICAgICAgICAg
        ICAgICAgICAgICAgICAgLnRoZW4oYmVmb3JlTW9kZWwpCiAgICAgICAgICAg
        ICAgICAgICAgICAgICAgICAgLnRoZW4oY2hlY2tGb3JBYm9ydCkKICAgICAg
        ICAgICAgICAgICAgICAgICAgICAgICAudGhlbihtb2RlbCkKICAgICAgICAg
        ICAgICAgICAgICAgICAgICAgICAudGhlbihjaGVja0ZvckFib3J0KQogICAg
        ICAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGFmdGVyTW9kZWwpCiAg
        ICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oY2hlY2tGb3JBYm9y
        dCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbihiZWNvbWVS
        ZXNvbHZlZCk7CiAgICAgIH0sCgogICAgICBydW5CZWZvcmVNb2RlbEhvb2s6
        IGZ1bmN0aW9uKGFzeW5jLCBwYXlsb2FkKSB7CiAgICAgICAgaWYgKHBheWxv
        YWQudHJpZ2dlcikgewogICAgICAgICAgcGF5bG9hZC50cmlnZ2VyKHRydWUs
        ICd3aWxsUmVzb2x2ZU1vZGVsJywgcGF5bG9hZCwgdGhpcy5oYW5kbGVyKTsK
        ICAgICAgICB9CiAgICAgICAgcmV0dXJuIHRoaXMucnVuU2hhcmVkTW9kZWxI
        b29rKGFzeW5jLCBwYXlsb2FkLCAnYmVmb3JlTW9kZWwnLCBbXSk7CiAgICAg
        IH0sCgogICAgICBydW5BZnRlck1vZGVsSG9vazogZnVuY3Rpb24oYXN5bmMs
        IHBheWxvYWQsIHJlc29sdmVkTW9kZWwpIHsKICAgICAgICAvLyBTdGFzaCB0
        aGUgcmVzb2x2ZWQgbW9kZWwgb24gdGhlIHBheWxvYWQuCiAgICAgICAgLy8g
        VGhpcyBtYWtlcyBpdCBwb3NzaWJsZSBmb3IgdXNlcnMgdG8gc3dhcCBvdXQK
        ICAgICAgICAvLyB0aGUgcmVzb2x2ZWQgbW9kZWwgaW4gYWZ0ZXJNb2RlbC4K
        ICAgICAgICB2YXIgbmFtZSA9IHRoaXMubmFtZTsKICAgICAgICB0aGlzLnN0
        YXNoUmVzb2x2ZWRNb2RlbChwYXlsb2FkLCByZXNvbHZlZE1vZGVsKTsKCiAg
        ICAgICAgcmV0dXJuIHRoaXMucnVuU2hhcmVkTW9kZWxIb29rKGFzeW5jLCBw
        YXlsb2FkLCAnYWZ0ZXJNb2RlbCcsIFtyZXNvbHZlZE1vZGVsXSkKICAgICAg
        ICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKCkgewogICAgICAgICAgICAg
        ICAgICAgICAvLyBJZ25vcmUgdGhlIGZ1bGZpbGxlZCB2YWx1ZSByZXR1cm5l
        ZCBmcm9tIGFmdGVyTW9kZWwuCiAgICAgICAgICAgICAgICAgICAgIC8vIFJl
        dHVybiB0aGUgdmFsdWUgc3Rhc2hlZCBpbiByZXNvbHZlZE1vZGVscywgd2hp
        Y2gKICAgICAgICAgICAgICAgICAgICAgLy8gbWlnaHQgaGF2ZSBiZWVuIHN3
        YXBwZWQgb3V0IGluIGFmdGVyTW9kZWwuCiAgICAgICAgICAgICAgICAgICAg
        IHJldHVybiBwYXlsb2FkLnJlc29sdmVkTW9kZWxzW25hbWVdOwogICAgICAg
        ICAgICAgICAgICAgfSk7CiAgICAgIH0sCgogICAgICBydW5TaGFyZWRNb2Rl
        bEhvb2s6IGZ1bmN0aW9uKGFzeW5jLCBwYXlsb2FkLCBob29rTmFtZSwgYXJn
        cykgewogICAgICAgIHRoaXMubG9nKHBheWxvYWQsICJjYWxsaW5nICIgKyBo
        b29rTmFtZSArICIgaG9vayIpOwoKICAgICAgICBpZiAodGhpcy5xdWVyeVBh
        cmFtcykgewogICAgICAgICAgYXJncy5wdXNoKHRoaXMucXVlcnlQYXJhbXMp
        OwogICAgICAgIH0KICAgICAgICBhcmdzLnB1c2gocGF5bG9hZCk7CgogICAg
        ICAgIHZhciBoYW5kbGVyID0gdGhpcy5oYW5kbGVyOwogICAgICAgIHJldHVy
        biBhc3luYyhmdW5jdGlvbigpIHsKICAgICAgICAgIHJldHVybiBoYW5kbGVy
        W2hvb2tOYW1lXSAmJiBoYW5kbGVyW2hvb2tOYW1lXS5hcHBseShoYW5kbGVy
        LCBhcmdzKTsKICAgICAgICB9KTsKICAgICAgfSwKCiAgICAgIGdldE1vZGVs
        OiBmdW5jdGlvbihwYXlsb2FkKSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9y
        KCJUaGlzIHNob3VsZCBiZSBvdmVycmlkZGVuIGJ5IGEgc3ViY2xhc3Mgb2Yg
        SGFuZGxlckluZm8iKTsKICAgICAgfSwKCiAgICAgIGNoZWNrRm9yQWJvcnQ6
        IGZ1bmN0aW9uKHNob3VsZENvbnRpbnVlLCBwcm9taXNlVmFsdWUpIHsKICAg
        ICAgICByZXR1cm4gcmVzb2x2ZShzaG91bGRDb250aW51ZSgpKS50aGVuKGZ1
        bmN0aW9uKCkgewogICAgICAgICAgLy8gV2UgZG9uJ3QgY2FyZSBhYm91dCBz
        aG91bGRDb250aW51ZSdzIHJlc29sdmUgdmFsdWU7CiAgICAgICAgICAvLyBw
        YXNzIGFsb25nIHRoZSBvcmlnaW5hbCB2YWx1ZSBwYXNzZWQgdG8gdGhpcyBm
        bi4KICAgICAgICAgIHJldHVybiBwcm9taXNlVmFsdWU7CiAgICAgICAgfSk7
        CiAgICAgIH0sCgogICAgICBzdGFzaFJlc29sdmVkTW9kZWw6IGZ1bmN0aW9u
        KHBheWxvYWQsIHJlc29sdmVkTW9kZWwpIHsKICAgICAgICBwYXlsb2FkLnJl
        c29sdmVkTW9kZWxzID0gcGF5bG9hZC5yZXNvbHZlZE1vZGVscyB8fCB7fTsK
        ICAgICAgICBwYXlsb2FkLnJlc29sdmVkTW9kZWxzW3RoaXMubmFtZV0gPSBy
        ZXNvbHZlZE1vZGVsOwogICAgICB9LAoKICAgICAgYmVjb21lUmVzb2x2ZWQ6
        IGZ1bmN0aW9uKHBheWxvYWQsIHJlc29sdmVkQ29udGV4dCkgewogICAgICAg
        IHZhciBwYXJhbXMgPSB0aGlzLnBhcmFtcyB8fCBzZXJpYWxpemUodGhpcy5o
        YW5kbGVyLCByZXNvbHZlZENvbnRleHQsIHRoaXMubmFtZXMpOwoKICAgICAg
        ICBpZiAocGF5bG9hZCkgewogICAgICAgICAgdGhpcy5zdGFzaFJlc29sdmVk
        TW9kZWwocGF5bG9hZCwgcmVzb2x2ZWRDb250ZXh0KTsKICAgICAgICAgIHBh
        eWxvYWQucGFyYW1zID0gcGF5bG9hZC5wYXJhbXMgfHwge307CiAgICAgICAg
        ICBwYXlsb2FkLnBhcmFtc1t0aGlzLm5hbWVdID0gcGFyYW1zOwogICAgICAg
        IH0KCiAgICAgICAgcmV0dXJuIG5ldyBSZXNvbHZlZEhhbmRsZXJJbmZvKHsK
        ICAgICAgICAgIGNvbnRleHQ6IHJlc29sdmVkQ29udGV4dCwKICAgICAgICAg
        IG5hbWU6IHRoaXMubmFtZSwKICAgICAgICAgIGhhbmRsZXI6IHRoaXMuaGFu
        ZGxlciwKICAgICAgICAgIHBhcmFtczogcGFyYW1zCiAgICAgICAgfSk7CiAg
        ICAgIH0sCgogICAgICBzaG91bGRTdXBlcmNlZGU6IGZ1bmN0aW9uKG90aGVy
        KSB7CiAgICAgICAgLy8gUHJlZmVyIHRoaXMgbmV3ZXIgaGFuZGxlckluZm8g
        b3ZlciBgb3RoZXJgIGlmOgogICAgICAgIC8vIDEpIFRoZSBvdGhlciBvbmUg
        ZG9lc24ndCBleGlzdAogICAgICAgIC8vIDIpIFRoZSBuYW1lcyBkb24ndCBt
        YXRjaAogICAgICAgIC8vIDMpIFRoaXMgaGFuZGxlciBoYXMgYSBjb250ZXh0
        IHRoYXQgZG9lc24ndCBtYXRjaAogICAgICAgIC8vICAgIHRoZSBvdGhlciBv
        bmUgKG9yIHRoZSBvdGhlciBvbmUgZG9lc24ndCBoYXZlIG9uZSkuCiAgICAg
        ICAgLy8gNCkgVGhpcyBoYW5kbGVyIGhhcyBwYXJhbWV0ZXJzIHRoYXQgZG9u
        J3QgbWF0Y2ggdGhlIG90aGVyLgogICAgICAgIGlmICghb3RoZXIpIHsgcmV0
        dXJuIHRydWU7IH0KCiAgICAgICAgdmFyIGNvbnRleHRzTWF0Y2ggPSAob3Ro
        ZXIuY29udGV4dCA9PT0gdGhpcy5jb250ZXh0KTsKICAgICAgICByZXR1cm4g
        b3RoZXIubmFtZSAhPT0gdGhpcy5uYW1lIHx8CiAgICAgICAgICAgICAgICh0
        aGlzLmhhc093blByb3BlcnR5KCdjb250ZXh0JykgJiYgIWNvbnRleHRzTWF0
        Y2gpIHx8CiAgICAgICAgICAgICAgICh0aGlzLmhhc093blByb3BlcnR5KCdw
        YXJhbXMnKSAmJiAhcGFyYW1zTWF0Y2godGhpcy5wYXJhbXMsIG90aGVyLnBh
        cmFtcykpOwogICAgICB9CiAgICB9OwoKICAgIGZ1bmN0aW9uIFJlc29sdmVk
        SGFuZGxlckluZm8ocHJvcHMpIHsKICAgICAgSGFuZGxlckluZm8uY2FsbCh0
        aGlzLCBwcm9wcyk7CiAgICB9CgogICAgUmVzb2x2ZWRIYW5kbGVySW5mby5w
        cm90b3R5cGUgPSBvQ3JlYXRlKEhhbmRsZXJJbmZvLnByb3RvdHlwZSk7CiAg
        ICBSZXNvbHZlZEhhbmRsZXJJbmZvLnByb3RvdHlwZS5yZXNvbHZlID0gZnVu
        Y3Rpb24oYXN5bmMsIHNob3VsZENvbnRpbnVlLCBwYXlsb2FkKSB7CiAgICAg
        IC8vIEEgUmVzb2x2ZWRIYW5kbGVySW5mbyBqdXN0IHJlc29sdmVkIHdpdGgg
        aXRzZWxmLgogICAgICBpZiAocGF5bG9hZCAmJiBwYXlsb2FkLnJlc29sdmVk
        TW9kZWxzKSB7CiAgICAgICAgcGF5bG9hZC5yZXNvbHZlZE1vZGVsc1t0aGlz
        Lm5hbWVdID0gdGhpcy5jb250ZXh0OwogICAgICB9CiAgICAgIHJldHVybiBy
        ZXNvbHZlKHRoaXMpOwogICAgfTsKCiAgICAvLyBUaGVzZSBhcmUgZ2VuZXJh
        dGVkIGJ5IFVSTCB0cmFuc2l0aW9ucyBhbmQKICAgIC8vIG5hbWVkIHRyYW5z
        aXRpb25zIGZvciBub24tZHluYW1pYyByb3V0ZSBzZWdtZW50cy4KICAgIGZ1
        bmN0aW9uIFVucmVzb2x2ZWRIYW5kbGVySW5mb0J5UGFyYW0ocHJvcHMpIHsK
        ICAgICAgSGFuZGxlckluZm8uY2FsbCh0aGlzLCBwcm9wcyk7CiAgICAgIHRo
        aXMucGFyYW1zID0gdGhpcy5wYXJhbXMgfHwge307CiAgICB9CgogICAgVW5y
        ZXNvbHZlZEhhbmRsZXJJbmZvQnlQYXJhbS5wcm90b3R5cGUgPSBvQ3JlYXRl
        KEhhbmRsZXJJbmZvLnByb3RvdHlwZSk7CiAgICBVbnJlc29sdmVkSGFuZGxl
        ckluZm9CeVBhcmFtLnByb3RvdHlwZS5nZXRNb2RlbCA9IGZ1bmN0aW9uKGFz
        eW5jLCBwYXlsb2FkKSB7CiAgICAgIHZhciBmdWxsUGFyYW1zID0gdGhpcy5w
        YXJhbXM7CiAgICAgIGlmIChwYXlsb2FkICYmIHBheWxvYWQucXVlcnlQYXJh
        bXMpIHsKICAgICAgICBmdWxsUGFyYW1zID0ge307CiAgICAgICAgbWVyZ2Uo
        ZnVsbFBhcmFtcywgdGhpcy5wYXJhbXMpOwogICAgICAgIGZ1bGxQYXJhbXMu
        cXVlcnlQYXJhbXMgPSBwYXlsb2FkLnF1ZXJ5UGFyYW1zOwogICAgICB9Cgog
        ICAgICB2YXIgaG9va05hbWUgPSB0eXBlb2YgdGhpcy5oYW5kbGVyLmRlc2Vy
        aWFsaXplID09PSAnZnVuY3Rpb24nID8KICAgICAgICAgICAgICAgICAgICAg
        J2Rlc2VyaWFsaXplJyA6ICdtb2RlbCc7CgogICAgICByZXR1cm4gdGhpcy5y
        dW5TaGFyZWRNb2RlbEhvb2soYXN5bmMsIHBheWxvYWQsIGhvb2tOYW1lLCBb
        ZnVsbFBhcmFtc10pOwogICAgfTsKCgogICAgLy8gVGhlc2UgYXJlIGdlbmVy
        YXRlZCBvbmx5IGZvciBuYW1lZCB0cmFuc2l0aW9ucwogICAgLy8gd2l0aCBk
        eW5hbWljIHJvdXRlIHNlZ21lbnRzLgogICAgZnVuY3Rpb24gVW5yZXNvbHZl
        ZEhhbmRsZXJJbmZvQnlPYmplY3QocHJvcHMpIHsKICAgICAgSGFuZGxlcklu
        Zm8uY2FsbCh0aGlzLCBwcm9wcyk7CiAgICB9CgogICAgVW5yZXNvbHZlZEhh
        bmRsZXJJbmZvQnlPYmplY3QucHJvdG90eXBlID0gb0NyZWF0ZShIYW5kbGVy
        SW5mby5wcm90b3R5cGUpOwogICAgVW5yZXNvbHZlZEhhbmRsZXJJbmZvQnlP
        YmplY3QucHJvdG90eXBlLmdldE1vZGVsID0gZnVuY3Rpb24oYXN5bmMsIHBh
        eWxvYWQpIHsKICAgICAgdGhpcy5sb2cocGF5bG9hZCwgdGhpcy5uYW1lICsg
        IjogcmVzb2x2aW5nIHByb3ZpZGVkIG1vZGVsIik7CiAgICAgIHJldHVybiBy
        ZXNvbHZlKHRoaXMuY29udGV4dCk7CiAgICB9OwoKICAgIGZ1bmN0aW9uIHBh
        cmFtc01hdGNoKGEsIGIpIHsKICAgICAgaWYgKCghYSkgXiAoIWIpKSB7CiAg
        ICAgICAgLy8gT25seSBvbmUgaXMgbnVsbC4KICAgICAgICByZXR1cm4gZmFs
        c2U7CiAgICAgIH0KCiAgICAgIGlmICghYSkgewogICAgICAgIC8vIEJvdGgg
        bXVzdCBiZSBudWxsLgogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9Cgog
        ICAgICAvLyBOb3RlOiB0aGlzIGFzc3VtZXMgdGhhdCBib3RoIHBhcmFtcyBo
        YXZlIHRoZSBzYW1lCiAgICAgIC8vIG51bWJlciBvZiBrZXlzLCBidXQgc2lu
        Y2Ugd2UncmUgY29tcGFyaW5nIHRoZQogICAgICAvLyBzYW1lIGhhbmRsZXJz
        LCB0aGV5IHNob3VsZC4KICAgICAgZm9yICh2YXIgayBpbiBhKSB7CiAgICAg
        ICAgaWYgKGEuaGFzT3duUHJvcGVydHkoaykgJiYgYVtrXSAhPT0gYltrXSkg
        ewogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgfQog
        ICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBfX2V4cG9ydHNfXy5IYW5k
        bGVySW5mbyA9IEhhbmRsZXJJbmZvOwogICAgX19leHBvcnRzX18uUmVzb2x2
        ZWRIYW5kbGVySW5mbyA9IFJlc29sdmVkSGFuZGxlckluZm87CiAgICBfX2V4
        cG9ydHNfXy5VbnJlc29sdmVkSGFuZGxlckluZm9CeVBhcmFtID0gVW5yZXNv
        bHZlZEhhbmRsZXJJbmZvQnlQYXJhbTsKICAgIF9fZXhwb3J0c19fLlVucmVz
        b2x2ZWRIYW5kbGVySW5mb0J5T2JqZWN0ID0gVW5yZXNvbHZlZEhhbmRsZXJJ
        bmZvQnlPYmplY3Q7CiAgfSk7CmRlZmluZSgicm91dGVyL3JvdXRlciIsIAog
        IFsicm91dGUtcmVjb2duaXplciIsInJzdnAiLCIuL3V0aWxzIiwiLi90cmFu
        c2l0aW9uLXN0YXRlIiwiLi90cmFuc2l0aW9uIiwiLi90cmFuc2l0aW9uLWlu
        dGVudC9uYW1lZC10cmFuc2l0aW9uLWludGVudCIsIi4vdHJhbnNpdGlvbi1p
        bnRlbnQvdXJsLXRyYW5zaXRpb24taW50ZW50IiwiZXhwb3J0cyJdLAogIGZ1
        bmN0aW9uKF9fZGVwZW5kZW5jeTFfXywgX19kZXBlbmRlbmN5Ml9fLCBfX2Rl
        cGVuZGVuY3kzX18sIF9fZGVwZW5kZW5jeTRfXywgX19kZXBlbmRlbmN5NV9f
        LCBfX2RlcGVuZGVuY3k2X18sIF9fZGVwZW5kZW5jeTdfXywgX19leHBvcnRz
        X18pIHsKICAgICJ1c2Ugc3RyaWN0IjsKICAgIHZhciBSb3V0ZVJlY29nbml6
        ZXIgPSBfX2RlcGVuZGVuY3kxX19bImRlZmF1bHQiXTsKICAgIHZhciByZXNv
        bHZlID0gX19kZXBlbmRlbmN5Ml9fLnJlc29sdmU7CiAgICB2YXIgcmVqZWN0
        ID0gX19kZXBlbmRlbmN5Ml9fLnJlamVjdDsKICAgIHZhciBhc3luYyA9IF9f
        ZGVwZW5kZW5jeTJfXy5hc3luYzsKICAgIHZhciBQcm9taXNlID0gX19kZXBl
        bmRlbmN5Ml9fLlByb21pc2U7CiAgICB2YXIgdHJpZ2dlciA9IF9fZGVwZW5k
        ZW5jeTNfXy50cmlnZ2VyOwogICAgdmFyIGxvZyA9IF9fZGVwZW5kZW5jeTNf
        Xy5sb2c7CiAgICB2YXIgc2xpY2UgPSBfX2RlcGVuZGVuY3kzX18uc2xpY2U7
        CiAgICB2YXIgZm9yRWFjaCA9IF9fZGVwZW5kZW5jeTNfXy5mb3JFYWNoOwog
        ICAgdmFyIG1lcmdlID0gX19kZXBlbmRlbmN5M19fLm1lcmdlOwogICAgdmFy
        IHNlcmlhbGl6ZSA9IF9fZGVwZW5kZW5jeTNfXy5zZXJpYWxpemU7CiAgICB2
        YXIgZXh0cmFjdFF1ZXJ5UGFyYW1zID0gX19kZXBlbmRlbmN5M19fLmV4dHJh
        Y3RRdWVyeVBhcmFtczsKICAgIHZhciBnZXRDaGFuZ2VsaXN0ID0gX19kZXBl
        bmRlbmN5M19fLmdldENoYW5nZWxpc3Q7CiAgICB2YXIgVHJhbnNpdGlvblN0
        YXRlID0gX19kZXBlbmRlbmN5NF9fLlRyYW5zaXRpb25TdGF0ZTsKICAgIHZh
        ciBsb2dBYm9ydCA9IF9fZGVwZW5kZW5jeTVfXy5sb2dBYm9ydDsKICAgIHZh
        ciBUcmFuc2l0aW9uID0gX19kZXBlbmRlbmN5NV9fLlRyYW5zaXRpb247CiAg
        ICB2YXIgVHJhbnNpdGlvbkFib3J0ZWQgPSBfX2RlcGVuZGVuY3k1X18uVHJh
        bnNpdGlvbkFib3J0ZWQ7CiAgICB2YXIgTmFtZWRUcmFuc2l0aW9uSW50ZW50
        ID0gX19kZXBlbmRlbmN5Nl9fLk5hbWVkVHJhbnNpdGlvbkludGVudDsKICAg
        IHZhciBVUkxUcmFuc2l0aW9uSW50ZW50ID0gX19kZXBlbmRlbmN5N19fLlVS
        TFRyYW5zaXRpb25JbnRlbnQ7CgogICAgdmFyIHBvcCA9IEFycmF5LnByb3Rv
        dHlwZS5wb3A7CgogICAgZnVuY3Rpb24gUm91dGVyKCkgewogICAgICB0aGlz
        LnJlY29nbml6ZXIgPSBuZXcgUm91dGVSZWNvZ25pemVyKCk7CiAgICAgIHRo
        aXMucmVzZXQoKTsKICAgIH0KCiAgICBSb3V0ZXIucHJvdG90eXBlID0gewoK
        ICAgICAgLyoqCiAgICAgICAgVGhlIG1haW4gZW50cnkgcG9pbnQgaW50byB0
        aGUgcm91dGVyLiBUaGUgQVBJIGlzIGVzc2VudGlhbGx5CiAgICAgICAgdGhl
        IHNhbWUgYXMgdGhlIGBtYXBgIG1ldGhvZCBpbiBgcm91dGUtcmVjb2duaXpl
        cmAuCgogICAgICAgIFRoaXMgbWV0aG9kIGV4dHJhY3RzIHRoZSBTdHJpbmcg
        aGFuZGxlciBhdCB0aGUgbGFzdCBgLnRvKClgCiAgICAgICAgY2FsbCBhbmQg
        dXNlcyBpdCBhcyB0aGUgbmFtZSBvZiB0aGUgd2hvbGUgcm91dGUuCgogICAg
        ICAgIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrCiAgICAgICovCiAgICAg
        IG1hcDogZnVuY3Rpb24oY2FsbGJhY2spIHsKICAgICAgICB0aGlzLnJlY29n
        bml6ZXIuZGVsZWdhdGUgPSB0aGlzLmRlbGVnYXRlOwoKICAgICAgICB0aGlz
        LnJlY29nbml6ZXIubWFwKGNhbGxiYWNrLCBmdW5jdGlvbihyZWNvZ25pemVy
        LCByb3V0ZSkgewogICAgICAgICAgdmFyIGxhc3RIYW5kbGVyID0gcm91dGVb
        cm91dGUubGVuZ3RoIC0gMV0uaGFuZGxlcjsKICAgICAgICAgIHZhciBhcmdz
        ID0gW3JvdXRlLCB7IGFzOiBsYXN0SGFuZGxlciB9XTsKICAgICAgICAgIHJl
        Y29nbml6ZXIuYWRkLmFwcGx5KHJlY29nbml6ZXIsIGFyZ3MpOwogICAgICAg
        IH0pOwogICAgICB9LAoKICAgICAgaGFzUm91dGU6IGZ1bmN0aW9uKHJvdXRl
        KSB7CiAgICAgICAgcmV0dXJuIHRoaXMucmVjb2duaXplci5oYXNSb3V0ZShy
        b3V0ZSk7CiAgICAgIH0sCgogICAgICAvLyBOT1RFOiB0aGlzIGRvZXNuJ3Qg
        cmVhbGx5IGJlbG9uZyBoZXJlLCBidXQgaGVyZQogICAgICAvLyBpdCBzaGFs
        bCByZW1haW4gdW50aWwgb3VyIEVTNiB0cmFuc3BpbGVyIGNhbgogICAgICAv
        LyBoYW5kbGUgY3ljbGljYWwgZGVwcy4KICAgICAgdHJhbnNpdGlvbkJ5SW50
        ZW50OiBmdW5jdGlvbihpbnRlbnQsIGlzSW50ZXJtZWRpYXRlKSB7CgogICAg
        ICAgIHZhciB3YXNUcmFuc2l0aW9uaW5nID0gISF0aGlzLmFjdGl2ZVRyYW5z
        aXRpb247CiAgICAgICAgdmFyIG9sZFN0YXRlID0gd2FzVHJhbnNpdGlvbmlu
        ZyA/IHRoaXMuYWN0aXZlVHJhbnNpdGlvbi5zdGF0ZSA6IHRoaXMuc3RhdGU7
        CiAgICAgICAgdmFyIG5ld1RyYW5zaXRpb247CiAgICAgICAgdmFyIHJvdXRl
        ciA9IHRoaXM7CgogICAgICAgIHRyeSB7CiAgICAgICAgICB2YXIgbmV3U3Rh
        dGUgPSBpbnRlbnQuYXBwbHlUb1N0YXRlKG9sZFN0YXRlLCB0aGlzLnJlY29n
        bml6ZXIsIHRoaXMuZ2V0SGFuZGxlciwgaXNJbnRlcm1lZGlhdGUpOwoKICAg
        ICAgICAgIGlmIChoYW5kbGVySW5mb3NFcXVhbChuZXdTdGF0ZS5oYW5kbGVy
        SW5mb3MsIG9sZFN0YXRlLmhhbmRsZXJJbmZvcykpIHsKCiAgICAgICAgICAg
        IC8vIFRoaXMgaXMgYSBuby1vcCB0cmFuc2l0aW9uLiBTZWUgaWYgcXVlcnkg
        cGFyYW1zIGNoYW5nZWQuCiAgICAgICAgICAgIHZhciBxdWVyeVBhcmFtQ2hh
        bmdlbGlzdCA9IGdldENoYW5nZWxpc3Qob2xkU3RhdGUucXVlcnlQYXJhbXMs
        IG5ld1N0YXRlLnF1ZXJ5UGFyYW1zKTsKICAgICAgICAgICAgaWYgKHF1ZXJ5
        UGFyYW1DaGFuZ2VsaXN0KSB7CgogICAgICAgICAgICAgIC8vIFRoaXMgaXMg
        YSBsaXR0bGUgaGFja3kgYnV0IHdlIG5lZWQgc29tZSB3YXkgb2Ygc3Rvcmlu
        ZwogICAgICAgICAgICAgIC8vIGNoYW5nZWQgcXVlcnkgcGFyYW1zIGdpdmVu
        IHRoYXQgbm8gYWN0aXZlVHJhbnNpdGlvbgogICAgICAgICAgICAgIC8vIGlz
        IGd1YXJhbnRlZWQgdG8gaGF2ZSBvY2N1cnJlZC4KICAgICAgICAgICAgICB0
        aGlzLl9jaGFuZ2VkUXVlcnlQYXJhbXMgPSBxdWVyeVBhcmFtQ2hhbmdlbGlz
        dC5jaGFuZ2VkOwogICAgICAgICAgICAgIHRyaWdnZXIodGhpcywgbmV3U3Rh
        dGUuaGFuZGxlckluZm9zLCB0cnVlLCBbJ3F1ZXJ5UGFyYW1zRGlkQ2hhbmdl
        JywgcXVlcnlQYXJhbUNoYW5nZWxpc3QuY2hhbmdlZCwgcXVlcnlQYXJhbUNo
        YW5nZWxpc3QuYWxsLCBxdWVyeVBhcmFtQ2hhbmdlbGlzdC5yZW1vdmVkXSk7
        CiAgICAgICAgICAgICAgdGhpcy5fY2hhbmdlZFF1ZXJ5UGFyYW1zID0gbnVs
        bDsKCiAgICAgICAgICAgICAgaWYgKCF3YXNUcmFuc2l0aW9uaW5nICYmIHRo
        aXMuYWN0aXZlVHJhbnNpdGlvbikgewogICAgICAgICAgICAgICAgLy8gT25l
        IG9mIHRoZSBoYW5kbGVycyBpbiBxdWVyeVBhcmFtc0RpZENoYW5nZQogICAg
        ICAgICAgICAgICAgLy8gY2F1c2VkIGEgdHJhbnNpdGlvbi4gSnVzdCByZXR1
        cm4gdGhhdCB0cmFuc2l0aW9uLgogICAgICAgICAgICAgICAgcmV0dXJuIHRo
        aXMuYWN0aXZlVHJhbnNpdGlvbjsKICAgICAgICAgICAgICB9IGVsc2Ugewog
        ICAgICAgICAgICAgICAgLy8gUnVubmluZyBxdWVyeVBhcmFtc0RpZENoYW5n
        ZSBkaWRuJ3QgY2hhbmdlIGFueXRoaW5nLgogICAgICAgICAgICAgICAgLy8g
        SnVzdCB1cGRhdGUgcXVlcnkgcGFyYW1zIGFuZCBiZSBvbiBvdXIgd2F5Lgog
        ICAgICAgICAgICAgICAgb2xkU3RhdGUucXVlcnlQYXJhbXMgPSBmaW5hbGl6
        ZVF1ZXJ5UGFyYW1DaGFuZ2UodGhpcywgbmV3U3RhdGUuaGFuZGxlckluZm9z
        LCBuZXdTdGF0ZS5xdWVyeVBhcmFtcyk7CgogICAgICAgICAgICAgICAgLy8g
        V2UgaGF2ZSB0byByZXR1cm4gYSBub29wIHRyYW5zaXRpb24gdGhhdCB3aWxs
        CiAgICAgICAgICAgICAgICAvLyBwZXJmb3JtIGEgVVJMIHVwZGF0ZSBhdCB0
        aGUgZW5kLiBUaGlzIGdpdmVzCiAgICAgICAgICAgICAgICAvLyB0aGUgdXNl
        ciB0aGUgYWJpbGl0eSB0byBzZXQgdGhlIHVybCB1cGRhdGUKICAgICAgICAg
        ICAgICAgIC8vIG1ldGhvZCAoZGVmYXVsdCBpcyByZXBsYWNlU3RhdGUpLgog
        ICAgICAgICAgICAgICAgbmV3VHJhbnNpdGlvbiA9IG5ldyBUcmFuc2l0aW9u
        KHRoaXMpOwogICAgICAgICAgICAgICAgbmV3VHJhbnNpdGlvbi51cmxNZXRo
        b2QgPSAncmVwbGFjZSc7CiAgICAgICAgICAgICAgICBuZXdUcmFuc2l0aW9u
        LnByb21pc2UgPSBuZXdUcmFuc2l0aW9uLnByb21pc2UudGhlbihmdW5jdGlv
        bihyZXN1bHQpIHsKICAgICAgICAgICAgICAgICAgdXBkYXRlVVJMKG5ld1Ry
        YW5zaXRpb24sIG9sZFN0YXRlLCB0cnVlKTsKICAgICAgICAgICAgICAgICAg
        aWYgKHJvdXRlci5kaWRUcmFuc2l0aW9uKSB7CiAgICAgICAgICAgICAgICAg
        ICAgcm91dGVyLmRpZFRyYW5zaXRpb24ocm91dGVyLmN1cnJlbnRIYW5kbGVy
        SW5mb3MpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAg
        IHJldHVybiByZXN1bHQ7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAg
        ICAgICAgIHJldHVybiBuZXdUcmFuc2l0aW9uOwogICAgICAgICAgICAgIH0K
        ICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8gTm8tb3AuIE5vIG5lZWQg
        dG8gY3JlYXRlIGEgbmV3IHRyYW5zaXRpb24uCiAgICAgICAgICAgIHJldHVy
        biBuZXcgVHJhbnNpdGlvbih0aGlzKTsKICAgICAgICAgIH0KCiAgICAgICAg
        ICBpZiAoaXNJbnRlcm1lZGlhdGUpIHsKICAgICAgICAgICAgc2V0dXBDb250
        ZXh0cyh0aGlzLCBuZXdTdGF0ZSk7CiAgICAgICAgICAgIHJldHVybjsKICAg
        ICAgICAgIH0KCiAgICAgICAgICAvLyBDcmVhdGUgYSBuZXcgdHJhbnNpdGlv
        biB0byB0aGUgZGVzdGluYXRpb24gcm91dGUuCiAgICAgICAgICBuZXdUcmFu
        c2l0aW9uID0gbmV3IFRyYW5zaXRpb24odGhpcywgaW50ZW50LCBuZXdTdGF0
        ZSk7CgogICAgICAgICAgLy8gQWJvcnQgYW5kIHVzdXJwIGFueSBwcmV2aW91
        c2x5IGFjdGl2ZSB0cmFuc2l0aW9uLgogICAgICAgICAgaWYgKHRoaXMuYWN0
        aXZlVHJhbnNpdGlvbikgewogICAgICAgICAgICB0aGlzLmFjdGl2ZVRyYW5z
        aXRpb24uYWJvcnQoKTsKICAgICAgICAgIH0KICAgICAgICAgIHRoaXMuYWN0
        aXZlVHJhbnNpdGlvbiA9IG5ld1RyYW5zaXRpb247CgogICAgICAgICAgLy8g
        VHJhbnNpdGlvbiBwcm9taXNlcyBieSBkZWZhdWx0IHJlc29sdmUgd2l0aCBy
        ZXNvbHZlZCBzdGF0ZS4KICAgICAgICAgIC8vIEZvciBvdXIgcHVycG9zZXMs
        IHN3YXAgb3V0IHRoZSBwcm9taXNlIHRvIHJlc29sdmUKICAgICAgICAgIC8v
        IGFmdGVyIHRoZSB0cmFuc2l0aW9uIGhhcyBiZWVuIGZpbmFsaXplZC4KICAg
        ICAgICAgIG5ld1RyYW5zaXRpb24ucHJvbWlzZSA9IG5ld1RyYW5zaXRpb24u
        cHJvbWlzZS50aGVuKGZ1bmN0aW9uKHJlc3VsdCkgewogICAgICAgICAgICBy
        ZXR1cm4gcm91dGVyLmFzeW5jKGZ1bmN0aW9uKCkgewogICAgICAgICAgICAg
        IHJldHVybiBmaW5hbGl6ZVRyYW5zaXRpb24obmV3VHJhbnNpdGlvbiwgcmVz
        dWx0LnN0YXRlKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9KTsKCiAg
        ICAgICAgICBpZiAoIXdhc1RyYW5zaXRpb25pbmcpIHsKICAgICAgICAgICAg
        dHJpZ2dlcih0aGlzLCB0aGlzLnN0YXRlLmhhbmRsZXJJbmZvcywgdHJ1ZSwg
        Wyd3aWxsVHJhbnNpdGlvbicsIG5ld1RyYW5zaXRpb25dKTsKICAgICAgICAg
        IH0KCiAgICAgICAgICByZXR1cm4gbmV3VHJhbnNpdGlvbjsKICAgICAgICB9
        IGNhdGNoKGUpIHsKICAgICAgICAgIHJldHVybiBuZXcgVHJhbnNpdGlvbih0
        aGlzLCBpbnRlbnQsIG51bGwsIGUpOwogICAgICAgIH0KICAgICAgfSwKCiAg
        ICAgIC8qKgogICAgICAgIENsZWFycyB0aGUgY3VycmVudCBhbmQgdGFyZ2V0
        IHJvdXRlIGhhbmRsZXJzIGFuZCB0cmlnZ2VycyBleGl0CiAgICAgICAgb24g
        ZWFjaCBvZiB0aGVtIHN0YXJ0aW5nIGF0IHRoZSBsZWFmIGFuZCB0cmF2ZXJz
        aW5nIHVwIHRocm91Z2gKICAgICAgICBpdHMgYW5jZXN0b3JzLgogICAgICAq
        LwogICAgICByZXNldDogZnVuY3Rpb24oKSB7CiAgICAgICAgaWYgKHRoaXMu
        c3RhdGUpIHsKICAgICAgICAgIGZvckVhY2godGhpcy5zdGF0ZS5oYW5kbGVy
        SW5mb3MsIGZ1bmN0aW9uKGhhbmRsZXJJbmZvKSB7CiAgICAgICAgICAgIHZh
        ciBoYW5kbGVyID0gaGFuZGxlckluZm8uaGFuZGxlcjsKICAgICAgICAgICAg
        aWYgKGhhbmRsZXIuZXhpdCkgewogICAgICAgICAgICAgIGhhbmRsZXIuZXhp
        dCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9Cgog
        ICAgICAgIHRoaXMuc3RhdGUgPSBuZXcgVHJhbnNpdGlvblN0YXRlKCk7CiAg
        ICAgICAgdGhpcy5jdXJyZW50SGFuZGxlckluZm9zID0gbnVsbDsKICAgICAg
        fSwKCiAgICAgIGFjdGl2ZVRyYW5zaXRpb246IG51bGwsCgogICAgICAvKioK
        ICAgICAgICB2YXIgaGFuZGxlciA9IGhhbmRsZXJJbmZvLmhhbmRsZXI7CiAg
        ICAgICAgVGhlIGVudHJ5IHBvaW50IGZvciBoYW5kbGluZyBhIGNoYW5nZSB0
        byB0aGUgVVJMICh1c3VhbGx5CiAgICAgICAgdmlhIHRoZSBiYWNrIGFuZCBm
        b3J3YXJkIGJ1dHRvbikuCgogICAgICAgIFJldHVybnMgYW4gQXJyYXkgb2Yg
        aGFuZGxlcnMgYW5kIHRoZSBwYXJhbWV0ZXJzIGFzc29jaWF0ZWQKICAgICAg
        ICB3aXRoIHRob3NlIHBhcmFtZXRlcnMuCgogICAgICAgIEBwYXJhbSB7U3Ry
        aW5nfSB1cmwgYSBVUkwgdG8gcHJvY2VzcwoKICAgICAgICBAcmV0dXJuIHtB
        cnJheX0gYW4gQXJyYXkgb2YgYFtoYW5kbGVyLCBwYXJhbWV0ZXJdYCB0dXBs
        ZXMKICAgICAgKi8KICAgICAgaGFuZGxlVVJMOiBmdW5jdGlvbih1cmwpIHsK
        ICAgICAgICAvLyBQZXJmb3JtIGEgVVJMLWJhc2VkIHRyYW5zaXRpb24sIGJ1
        dCBkb24ndCBjaGFuZ2UKICAgICAgICAvLyB0aGUgVVJMIGFmdGVyd2FyZCwg
        c2luY2UgaXQgYWxyZWFkeSBoYXBwZW5lZC4KICAgICAgICB2YXIgYXJncyA9
        IHNsaWNlLmNhbGwoYXJndW1lbnRzKTsKICAgICAgICBpZiAodXJsLmNoYXJB
        dCgwKSAhPT0gJy8nKSB7IGFyZ3NbMF0gPSAnLycgKyB1cmw7IH0KCiAgICAg
        ICAgcmV0dXJuIGRvVHJhbnNpdGlvbih0aGlzLCBhcmdzKS5tZXRob2QoJ3Jl
        cGxhY2VRdWVyeScpOwogICAgICB9LAoKICAgICAgLyoqCiAgICAgICAgSG9v
        ayBwb2ludCBmb3IgdXBkYXRpbmcgdGhlIFVSTC4KCiAgICAgICAgQHBhcmFt
        IHtTdHJpbmd9IHVybCBhIFVSTCB0byB1cGRhdGUgdG8KICAgICAgKi8KICAg
        ICAgdXBkYXRlVVJMOiBmdW5jdGlvbigpIHsKICAgICAgICB0aHJvdyBuZXcg
        RXJyb3IoInVwZGF0ZVVSTCBpcyBub3QgaW1wbGVtZW50ZWQiKTsKICAgICAg
        fSwKCiAgICAgIC8qKgogICAgICAgIEhvb2sgcG9pbnQgZm9yIHJlcGxhY2lu
        ZyB0aGUgY3VycmVudCBVUkwsIGkuZS4gd2l0aCByZXBsYWNlU3RhdGUKCiAg
        ICAgICAgQnkgZGVmYXVsdCB0aGlzIGJlaGF2ZXMgdGhlIHNhbWUgYXMgYHVw
        ZGF0ZVVSTGAKCiAgICAgICAgQHBhcmFtIHtTdHJpbmd9IHVybCBhIFVSTCB0
        byB1cGRhdGUgdG8KICAgICAgKi8KICAgICAgcmVwbGFjZVVSTDogZnVuY3Rp
        b24odXJsKSB7CiAgICAgICAgdGhpcy51cGRhdGVVUkwodXJsKTsKICAgICAg
        fSwKCiAgICAgIC8qKgogICAgICAgIFRyYW5zaXRpb24gaW50byB0aGUgc3Bl
        Y2lmaWVkIG5hbWVkIHJvdXRlLgoKICAgICAgICBJZiBuZWNlc3NhcnksIHRy
        aWdnZXIgdGhlIGV4aXQgY2FsbGJhY2sgb24gYW55IGhhbmRsZXJzCiAgICAg
        ICAgdGhhdCBhcmUgbm8gbG9uZ2VyIHJlcHJlc2VudGVkIGJ5IHRoZSB0YXJn
        ZXQgcm91dGUuCgogICAgICAgIEBwYXJhbSB7U3RyaW5nfSBuYW1lIHRoZSBu
        YW1lIG9mIHRoZSByb3V0ZQogICAgICAqLwogICAgICB0cmFuc2l0aW9uVG86
        IGZ1bmN0aW9uKG5hbWUpIHsKICAgICAgICByZXR1cm4gZG9UcmFuc2l0aW9u
        KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0sCgogICAgICBpbnRlcm1lZGlh
        dGVUcmFuc2l0aW9uVG86IGZ1bmN0aW9uKG5hbWUpIHsKICAgICAgICBkb1Ry
        YW5zaXRpb24odGhpcywgYXJndW1lbnRzLCB0cnVlKTsKICAgICAgfSwKCiAg
        ICAgIHJlZnJlc2g6IGZ1bmN0aW9uKHBpdm90SGFuZGxlcikgewoKCiAgICAg
        ICAgdmFyIHN0YXRlID0gdGhpcy5hY3RpdmVUcmFuc2l0aW9uID8gdGhpcy5h
        Y3RpdmVUcmFuc2l0aW9uLnN0YXRlIDogdGhpcy5zdGF0ZTsKICAgICAgICB2
        YXIgaGFuZGxlckluZm9zID0gc3RhdGUuaGFuZGxlckluZm9zOwogICAgICAg
        IHZhciBwYXJhbXMgPSB7fTsKICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVu
        ID0gaGFuZGxlckluZm9zLmxlbmd0aDsgaSA8IGxlbjsgKytpKSB7CiAgICAg
        ICAgICB2YXIgaGFuZGxlckluZm8gPSBoYW5kbGVySW5mb3NbaV07CiAgICAg
        ICAgICBwYXJhbXNbaGFuZGxlckluZm8ubmFtZV0gPSBoYW5kbGVySW5mby5w
        YXJhbXMgfHwge307CiAgICAgICAgfQoKICAgICAgICBsb2codGhpcywgIlN0
        YXJ0aW5nIGEgcmVmcmVzaCB0cmFuc2l0aW9uIik7CiAgICAgICAgdmFyIGlu
        dGVudCA9IG5ldyBOYW1lZFRyYW5zaXRpb25JbnRlbnQoewogICAgICAgICAg
        bmFtZTogaGFuZGxlckluZm9zW2hhbmRsZXJJbmZvcy5sZW5ndGggLSAxXS5u
        YW1lLAogICAgICAgICAgcGl2b3RIYW5kbGVyOiBwaXZvdEhhbmRsZXIgfHwg
        aGFuZGxlckluZm9zWzBdLmhhbmRsZXIsCiAgICAgICAgICBjb250ZXh0czog
        W10sIC8vIFRPRE8gY29sbGVjdCBjb250ZXh0cy4uLj8KICAgICAgICAgIHF1
        ZXJ5UGFyYW1zOiB0aGlzLl9jaGFuZ2VkUXVlcnlQYXJhbXMgfHwgc3RhdGUu
        cXVlcnlQYXJhbXMgfHwge30KICAgICAgICB9KTsKCiAgICAgICAgcmV0dXJu
        IHRoaXMudHJhbnNpdGlvbkJ5SW50ZW50KGludGVudCwgZmFsc2UpOwogICAg
        ICB9LAoKICAgICAgLyoqCiAgICAgICAgSWRlbnRpY2FsIHRvIGB0cmFuc2l0
        aW9uVG9gIGV4Y2VwdCB0aGF0IHRoZSBjdXJyZW50IFVSTCB3aWxsIGJlIHJl
        cGxhY2VkCiAgICAgICAgaWYgcG9zc2libGUuCgogICAgICAgIFRoaXMgbWV0
        aG9kIGlzIGludGVuZGVkIHByaW1hcmlseSBmb3IgdXNlIHdpdGggYHJlcGxh
        Y2VTdGF0ZWAuCgogICAgICAgIEBwYXJhbSB7U3RyaW5nfSBuYW1lIHRoZSBu
        YW1lIG9mIHRoZSByb3V0ZQogICAgICAqLwogICAgICByZXBsYWNlV2l0aDog
        ZnVuY3Rpb24obmFtZSkgewogICAgICAgIHJldHVybiBkb1RyYW5zaXRpb24o
        dGhpcywgYXJndW1lbnRzKS5tZXRob2QoJ3JlcGxhY2UnKTsKICAgICAgfSwK
        CiAgICAgIC8qKgogICAgICAgIFRha2UgYSBuYW1lZCByb3V0ZSBhbmQgY29u
        dGV4dCBvYmplY3RzIGFuZCBnZW5lcmF0ZSBhCiAgICAgICAgVVJMLgoKICAg
        ICAgICBAcGFyYW0ge1N0cmluZ30gbmFtZSB0aGUgbmFtZSBvZiB0aGUgcm91
        dGUgdG8gZ2VuZXJhdGUKICAgICAgICAgIGEgVVJMIGZvcgogICAgICAgIEBw
        YXJhbSB7Li4uT2JqZWN0fSBvYmplY3RzIGEgbGlzdCBvZiBvYmplY3RzIHRv
        IHNlcmlhbGl6ZQoKICAgICAgICBAcmV0dXJuIHtTdHJpbmd9IGEgVVJMCiAg
        ICAgICovCiAgICAgIGdlbmVyYXRlOiBmdW5jdGlvbihoYW5kbGVyTmFtZSkg
        ewoKICAgICAgICB2YXIgcGFydGl0aW9uZWRBcmdzID0gZXh0cmFjdFF1ZXJ5
        UGFyYW1zKHNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKSksCiAgICAgICAgICBz
        dXBwbGllZFBhcmFtcyA9IHBhcnRpdGlvbmVkQXJnc1swXSwKICAgICAgICAg
        IHF1ZXJ5UGFyYW1zID0gcGFydGl0aW9uZWRBcmdzWzFdOwoKICAgICAgICAv
        LyBDb25zdHJ1Y3QgYSBUcmFuc2l0aW9uSW50ZW50IHdpdGggdGhlIHByb3Zp
        ZGVkIHBhcmFtcwogICAgICAgIC8vIGFuZCBhcHBseSBpdCB0byB0aGUgcHJl
        c2VudCBzdGF0ZSBvZiB0aGUgcm91dGVyLgogICAgICAgIHZhciBpbnRlbnQg
        PSBuZXcgTmFtZWRUcmFuc2l0aW9uSW50ZW50KHsgbmFtZTogaGFuZGxlck5h
        bWUsIGNvbnRleHRzOiBzdXBwbGllZFBhcmFtcyB9KTsKICAgICAgICB2YXIg
        c3RhdGUgPSBpbnRlbnQuYXBwbHlUb1N0YXRlKHRoaXMuc3RhdGUsIHRoaXMu
        cmVjb2duaXplciwgdGhpcy5nZXRIYW5kbGVyKTsKICAgICAgICB2YXIgcGFy
        YW1zID0ge307CgogICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBzdGF0
        ZS5oYW5kbGVySW5mb3MubGVuZ3RoOyBpIDwgbGVuOyArK2kpIHsKICAgICAg
        ICAgIHZhciBoYW5kbGVySW5mbyA9IHN0YXRlLmhhbmRsZXJJbmZvc1tpXTsK
        ICAgICAgICAgIHZhciBoYW5kbGVyUGFyYW1zID0gaGFuZGxlckluZm8ucGFy
        YW1zIHx8CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlcmlhbGl6
        ZShoYW5kbGVySW5mby5oYW5kbGVyLCBoYW5kbGVySW5mby5jb250ZXh0LCBo
        YW5kbGVySW5mby5uYW1lcyk7CiAgICAgICAgICBtZXJnZShwYXJhbXMsIGhh
        bmRsZXJQYXJhbXMpOwogICAgICAgIH0KICAgICAgICBwYXJhbXMucXVlcnlQ
        YXJhbXMgPSBxdWVyeVBhcmFtczsKCiAgICAgICAgcmV0dXJuIHRoaXMucmVj
        b2duaXplci5nZW5lcmF0ZShoYW5kbGVyTmFtZSwgcGFyYW1zKTsKICAgICAg
        fSwKCiAgICAgIGlzQWN0aXZlOiBmdW5jdGlvbihoYW5kbGVyTmFtZSkgewoK
        ICAgICAgICB2YXIgcGFydGl0aW9uZWRBcmdzICAgPSBleHRyYWN0UXVlcnlQ
        YXJhbXMoc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpKSwKICAgICAgICAgICAg
        Y29udGV4dHMgICAgICAgICAgPSBwYXJ0aXRpb25lZEFyZ3NbMF0sCiAgICAg
        ICAgICAgIHF1ZXJ5UGFyYW1zICAgICAgID0gcGFydGl0aW9uZWRBcmdzWzFd
        LAogICAgICAgICAgICBhY3RpdmVRdWVyeVBhcmFtcyAgPSB0aGlzLnN0YXRl
        LnF1ZXJ5UGFyYW1zOwoKICAgICAgICB2YXIgdGFyZ2V0SGFuZGxlckluZm9z
        ID0gdGhpcy5zdGF0ZS5oYW5kbGVySW5mb3MsCiAgICAgICAgICAgIGZvdW5k
        ID0gZmFsc2UsIG5hbWVzLCBvYmplY3QsIGhhbmRsZXJJbmZvLCBoYW5kbGVy
        T2JqLCBpLCBsZW47CgogICAgICAgIGlmICghdGFyZ2V0SGFuZGxlckluZm9z
        Lmxlbmd0aCkgeyByZXR1cm4gZmFsc2U7IH0KCiAgICAgICAgdmFyIHRhcmdl
        dEhhbmRsZXIgPSB0YXJnZXRIYW5kbGVySW5mb3NbdGFyZ2V0SGFuZGxlcklu
        Zm9zLmxlbmd0aCAtIDFdLm5hbWU7CiAgICAgICAgdmFyIHJlY29nSGFuZGxl
        cnMgPSB0aGlzLnJlY29nbml6ZXIuaGFuZGxlcnNGb3IodGFyZ2V0SGFuZGxl
        cik7CgogICAgICAgIHZhciBpbmRleCA9IDA7CiAgICAgICAgZm9yIChsZW4g
        PSByZWNvZ0hhbmRsZXJzLmxlbmd0aDsgaW5kZXggPCBsZW47ICsraW5kZXgp
        IHsKICAgICAgICAgIGhhbmRsZXJJbmZvID0gdGFyZ2V0SGFuZGxlckluZm9z
        W2luZGV4XTsKICAgICAgICAgIGlmIChoYW5kbGVySW5mby5uYW1lID09PSBo
        YW5kbGVyTmFtZSkgeyBicmVhazsgfQogICAgICAgIH0KCiAgICAgICAgaWYg
        KGluZGV4ID09PSByZWNvZ0hhbmRsZXJzLmxlbmd0aCkgewogICAgICAgICAg
        Ly8gVGhlIHByb3ZpZGVkIHJvdXRlIG5hbWUgaXNuJ3QgZXZlbiBpbiB0aGUg
        cm91dGUgaGllcmFyY2h5LgogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAg
        ICAgIH0KCiAgICAgICAgdmFyIHN0YXRlID0gbmV3IFRyYW5zaXRpb25TdGF0
        ZSgpOwogICAgICAgIHN0YXRlLmhhbmRsZXJJbmZvcyA9IHRhcmdldEhhbmRs
        ZXJJbmZvcy5zbGljZSgwLCBpbmRleCArIDEpOwogICAgICAgIHJlY29nSGFu
        ZGxlcnMgPSByZWNvZ0hhbmRsZXJzLnNsaWNlKDAsIGluZGV4ICsgMSk7Cgog
        ICAgICAgIHZhciBpbnRlbnQgPSBuZXcgTmFtZWRUcmFuc2l0aW9uSW50ZW50
        KHsKICAgICAgICAgIG5hbWU6IHRhcmdldEhhbmRsZXIsCiAgICAgICAgICBj
        b250ZXh0czogY29udGV4dHMKICAgICAgICB9KTsKCiAgICAgICAgdmFyIG5l
        d1N0YXRlID0gaW50ZW50LmFwcGx5VG9IYW5kbGVycyhzdGF0ZSwgcmVjb2dI
        YW5kbGVycywgdGhpcy5nZXRIYW5kbGVyLCB0YXJnZXRIYW5kbGVyLCB0cnVl
        LCB0cnVlKTsKCiAgICAgICAgcmV0dXJuIGhhbmRsZXJJbmZvc0VxdWFsKG5l
        d1N0YXRlLmhhbmRsZXJJbmZvcywgc3RhdGUuaGFuZGxlckluZm9zKSAmJiAK
        ICAgICAgICAgICAgICAgIWdldENoYW5nZWxpc3QoYWN0aXZlUXVlcnlQYXJh
        bXMsIHF1ZXJ5UGFyYW1zKTsKICAgICAgfSwKCiAgICAgIHRyaWdnZXI6IGZ1
        bmN0aW9uKG5hbWUpIHsKICAgICAgICB2YXIgYXJncyA9IHNsaWNlLmNhbGwo
        YXJndW1lbnRzKTsKICAgICAgICB0cmlnZ2VyKHRoaXMsIHRoaXMuY3VycmVu
        dEhhbmRsZXJJbmZvcywgZmFsc2UsIGFyZ3MpOwogICAgICB9LAoKICAgICAg
        LyoqCiAgICAgICAgQHByaXZhdGUKCiAgICAgICAgUGx1Z2dhYmxlIGhvb2sg
        Zm9yIHBvc3NpYmx5IHJ1bm5pbmcgcm91dGUgaG9va3MKICAgICAgICBpbiBh
        IHRyeS1jYXRjaCBlc2NhcGluZyBtYW5uZXIuCgogICAgICAgIEBwYXJhbSB7
        RnVuY3Rpb259IGNhbGxiYWNrIHRoZSBjYWxsYmFjayB0aGF0IHdpbGwKICAg
        ICAgICAgICAgICAgICAgICAgICAgICBiZSBhc3luY2hyb25vdXNseSBjYWxs
        ZWQKCiAgICAgICAgQHJldHVybiB7UHJvbWlzZX0gYSBwcm9taXNlIHRoYXQg
        ZnVsZmlsbHMgd2l0aCB0aGUKICAgICAgICAgICAgICAgICAgICAgICAgICB2
        YWx1ZSByZXR1cm5lZCBmcm9tIHRoZSBjYWxsYmFjawogICAgICAgKi8KICAg
        ICAgYXN5bmM6IGZ1bmN0aW9uKGNhbGxiYWNrKSB7CiAgICAgICAgcmV0dXJu
        IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUpIHsKICAgICAgICAgIHJl
        c29sdmUoY2FsbGJhY2soKSk7CiAgICAgICAgfSk7CiAgICAgIH0sCgogICAg
        ICAvKioKICAgICAgICBIb29rIHBvaW50IGZvciBsb2dnaW5nIHRyYW5zaXRp
        b24gc3RhdHVzIHVwZGF0ZXMuCgogICAgICAgIEBwYXJhbSB7U3RyaW5nfSBt
        ZXNzYWdlIFRoZSBtZXNzYWdlIHRvIGxvZy4KICAgICAgKi8KICAgICAgbG9n
        OiBudWxsCiAgICB9OwoKICAgIC8qKgogICAgICBAcHJpdmF0ZQoKICAgICAg
        VGFrZXMgYW4gQXJyYXkgb2YgYEhhbmRsZXJJbmZvYHMsIGZpZ3VyZXMgb3V0
        IHdoaWNoIG9uZXMgYXJlCiAgICAgIGV4aXRpbmcsIGVudGVyaW5nLCBvciBj
        aGFuZ2luZyBjb250ZXh0cywgYW5kIGNhbGxzIHRoZQogICAgICBwcm9wZXIg
        aGFuZGxlciBob29rcy4KCiAgICAgIEZvciBleGFtcGxlLCBjb25zaWRlciB0
        aGUgZm9sbG93aW5nIHRyZWUgb2YgaGFuZGxlcnMuIEVhY2ggaGFuZGxlciBp
        cwogICAgICBmb2xsb3dlZCBieSB0aGUgVVJMIHNlZ21lbnQgaXQgaGFuZGxl
        cy4KCiAgICAgIGBgYAogICAgICB8fmluZGV4ICgiLyIpCiAgICAgIHwgfH5w
        b3N0cyAoIi9wb3N0cyIpCiAgICAgIHwgfCB8LXNob3dQb3N0ICgiLzppZCIp
        CiAgICAgIHwgfCB8LW5ld1Bvc3QgKCIvbmV3IikKICAgICAgfCB8IHwtZWRp
        dFBvc3QgKCIvZWRpdCIpCiAgICAgIHwgfH5hYm91dCAoIi9hYm91dC86aWQi
        KQogICAgICBgYGAKCiAgICAgIENvbnNpZGVyIHRoZSBmb2xsb3dpbmcgdHJh
        bnNpdGlvbnM6CgogICAgICAxLiBBIFVSTCB0cmFuc2l0aW9uIHRvIGAvcG9z
        dHMvMWAuCiAgICAgICAgIDEuIFRyaWdnZXJzIHRoZSBgKm1vZGVsYCBjYWxs
        YmFja3Mgb24gdGhlCiAgICAgICAgICAgIGBpbmRleGAsIGBwb3N0c2AsIGFu
        ZCBgc2hvd1Bvc3RgIGhhbmRsZXJzCiAgICAgICAgIDIuIFRyaWdnZXJzIHRo
        ZSBgZW50ZXJgIGNhbGxiYWNrIG9uIHRoZSBzYW1lCiAgICAgICAgIDMuIFRy
        aWdnZXJzIHRoZSBgc2V0dXBgIGNhbGxiYWNrIG9uIHRoZSBzYW1lCiAgICAg
        IDIuIEEgZGlyZWN0IHRyYW5zaXRpb24gdG8gYG5ld1Bvc3RgCiAgICAgICAg
        IDEuIFRyaWdnZXJzIHRoZSBgZXhpdGAgY2FsbGJhY2sgb24gYHNob3dQb3N0
        YAogICAgICAgICAyLiBUcmlnZ2VycyB0aGUgYGVudGVyYCBjYWxsYmFjayBv
        biBgbmV3UG9zdGAKICAgICAgICAgMy4gVHJpZ2dlcnMgdGhlIGBzZXR1cGAg
        Y2FsbGJhY2sgb24gYG5ld1Bvc3RgCiAgICAgIDMuIEEgZGlyZWN0IHRyYW5z
        aXRpb24gdG8gYGFib3V0YCB3aXRoIGEgc3BlY2lmaWVkCiAgICAgICAgIGNv
        bnRleHQgb2JqZWN0CiAgICAgICAgIDEuIFRyaWdnZXJzIHRoZSBgZXhpdGAg
        Y2FsbGJhY2sgb24gYG5ld1Bvc3RgCiAgICAgICAgICAgIGFuZCBgcG9zdHNg
        CiAgICAgICAgIDIuIFRyaWdnZXJzIHRoZSBgc2VyaWFsaXplYCBjYWxsYmFj
        ayBvbiBgYWJvdXRgCiAgICAgICAgIDMuIFRyaWdnZXJzIHRoZSBgZW50ZXJg
        IGNhbGxiYWNrIG9uIGBhYm91dGAKICAgICAgICAgNC4gVHJpZ2dlcnMgdGhl
        IGBzZXR1cGAgY2FsbGJhY2sgb24gYGFib3V0YAoKICAgICAgQHBhcmFtIHtS
        b3V0ZXJ9IHRyYW5zaXRpb24KICAgICAgQHBhcmFtIHtUcmFuc2l0aW9uU3Rh
        dGV9IG5ld1N0YXRlCiAgICAqLwogICAgZnVuY3Rpb24gc2V0dXBDb250ZXh0
        cyhyb3V0ZXIsIG5ld1N0YXRlLCB0cmFuc2l0aW9uKSB7CiAgICAgIHZhciBw
        YXJ0aXRpb24gPSBwYXJ0aXRpb25IYW5kbGVycyhyb3V0ZXIuc3RhdGUsIG5l
        d1N0YXRlKTsKCiAgICAgIGZvckVhY2gocGFydGl0aW9uLmV4aXRlZCwgZnVu
        Y3Rpb24oaGFuZGxlckluZm8pIHsKICAgICAgICB2YXIgaGFuZGxlciA9IGhh
        bmRsZXJJbmZvLmhhbmRsZXI7CiAgICAgICAgZGVsZXRlIGhhbmRsZXIuY29u
        dGV4dDsKICAgICAgICBpZiAoaGFuZGxlci5leGl0KSB7IGhhbmRsZXIuZXhp
        dCgpOyB9CiAgICAgIH0pOwoKICAgICAgdmFyIG9sZFN0YXRlID0gcm91dGVy
        Lm9sZFN0YXRlID0gcm91dGVyLnN0YXRlOwogICAgICByb3V0ZXIuc3RhdGUg
        PSBuZXdTdGF0ZTsKICAgICAgdmFyIGN1cnJlbnRIYW5kbGVySW5mb3MgPSBy
        b3V0ZXIuY3VycmVudEhhbmRsZXJJbmZvcyA9IHBhcnRpdGlvbi51bmNoYW5n
        ZWQuc2xpY2UoKTsKCiAgICAgIHRyeSB7CiAgICAgICAgZm9yRWFjaChwYXJ0
        aXRpb24udXBkYXRlZENvbnRleHQsIGZ1bmN0aW9uKGhhbmRsZXJJbmZvKSB7
        CiAgICAgICAgICByZXR1cm4gaGFuZGxlckVudGVyZWRPclVwZGF0ZWQoY3Vy
        cmVudEhhbmRsZXJJbmZvcywgaGFuZGxlckluZm8sIGZhbHNlLCB0cmFuc2l0
        aW9uKTsKICAgICAgICB9KTsKCiAgICAgICAgZm9yRWFjaChwYXJ0aXRpb24u
        ZW50ZXJlZCwgZnVuY3Rpb24oaGFuZGxlckluZm8pIHsKICAgICAgICAgIHJl
        dHVybiBoYW5kbGVyRW50ZXJlZE9yVXBkYXRlZChjdXJyZW50SGFuZGxlcklu
        Zm9zLCBoYW5kbGVySW5mbywgdHJ1ZSwgdHJhbnNpdGlvbik7CiAgICAgICAg
        fSk7CiAgICAgIH0gY2F0Y2goZSkgewogICAgICAgIHJvdXRlci5zdGF0ZSA9
        IG9sZFN0YXRlOwogICAgICAgIHJvdXRlci5jdXJyZW50SGFuZGxlckluZm9z
        ID0gb2xkU3RhdGUuaGFuZGxlckluZm9zOwogICAgICAgIHRocm93IGU7CiAg
        ICAgIH0KCiAgICAgIHJvdXRlci5zdGF0ZS5xdWVyeVBhcmFtcyA9IGZpbmFs
        aXplUXVlcnlQYXJhbUNoYW5nZShyb3V0ZXIsIGN1cnJlbnRIYW5kbGVySW5m
        b3MsIG5ld1N0YXRlLnF1ZXJ5UGFyYW1zKTsKICAgIH0KCgogICAgLyoqCiAg
        ICAgIEBwcml2YXRlCgogICAgICBIZWxwZXIgbWV0aG9kIHVzZWQgYnkgc2V0
        dXBDb250ZXh0cy4gSGFuZGxlcyBlcnJvcnMgb3IgcmVkaXJlY3RzCiAgICAg
        IHRoYXQgbWF5IGhhcHBlbiBpbiBlbnRlci9zZXR1cC4KICAgICovCiAgICBm
        dW5jdGlvbiBoYW5kbGVyRW50ZXJlZE9yVXBkYXRlZChjdXJyZW50SGFuZGxl
        ckluZm9zLCBoYW5kbGVySW5mbywgZW50ZXIsIHRyYW5zaXRpb24pIHsKCiAg
        ICAgIHZhciBoYW5kbGVyID0gaGFuZGxlckluZm8uaGFuZGxlciwKICAgICAg
        ICAgIGNvbnRleHQgPSBoYW5kbGVySW5mby5jb250ZXh0OwoKICAgICAgaWYg
        KGVudGVyICYmIGhhbmRsZXIuZW50ZXIpIHsgaGFuZGxlci5lbnRlcih0cmFu
        c2l0aW9uKTsgfQogICAgICBpZiAodHJhbnNpdGlvbiAmJiB0cmFuc2l0aW9u
        LmlzQWJvcnRlZCkgewogICAgICAgIHRocm93IG5ldyBUcmFuc2l0aW9uQWJv
        cnRlZCgpOwogICAgICB9CgogICAgICBoYW5kbGVyLmNvbnRleHQgPSBjb250
        ZXh0OwogICAgICBpZiAoaGFuZGxlci5jb250ZXh0RGlkQ2hhbmdlKSB7IGhh
        bmRsZXIuY29udGV4dERpZENoYW5nZSgpOyB9CgogICAgICBpZiAoaGFuZGxl
        ci5zZXR1cCkgeyBoYW5kbGVyLnNldHVwKGNvbnRleHQsIHRyYW5zaXRpb24p
        OyB9CiAgICAgIGlmICh0cmFuc2l0aW9uICYmIHRyYW5zaXRpb24uaXNBYm9y
        dGVkKSB7CiAgICAgICAgdGhyb3cgbmV3IFRyYW5zaXRpb25BYm9ydGVkKCk7
        CiAgICAgIH0KCiAgICAgIGN1cnJlbnRIYW5kbGVySW5mb3MucHVzaChoYW5k
        bGVySW5mbyk7CgogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCgogICAgLyoq
        CiAgICAgIEBwcml2YXRlCgogICAgICBUaGlzIGZ1bmN0aW9uIGlzIGNhbGxl
        ZCB3aGVuIHRyYW5zaXRpb25pbmcgZnJvbSBvbmUgVVJMIHRvCiAgICAgIGFu
        b3RoZXIgdG8gZGV0ZXJtaW5lIHdoaWNoIGhhbmRsZXJzIGFyZSBubyBsb25n
        ZXIgYWN0aXZlLAogICAgICB3aGljaCBoYW5kbGVycyBhcmUgbmV3bHkgYWN0
        aXZlLCBhbmQgd2hpY2ggaGFuZGxlcnMgcmVtYWluCiAgICAgIGFjdGl2ZSBi
        dXQgaGF2ZSB0aGVpciBjb250ZXh0IGNoYW5nZWQuCgogICAgICBUYWtlIGEg
        bGlzdCBvZiBvbGQgaGFuZGxlcnMgYW5kIG5ldyBoYW5kbGVycyBhbmQgcGFy
        dGl0aW9uCiAgICAgIHRoZW0gaW50byBmb3VyIGJ1Y2tldHM6CgogICAgICAq
        IHVuY2hhbmdlZDogdGhlIGhhbmRsZXIgd2FzIGFjdGl2ZSBpbiBib3RoIHRo
        ZSBvbGQgYW5kCiAgICAgICAgbmV3IFVSTCwgYW5kIGl0cyBjb250ZXh0IHJl
        bWFpbnMgdGhlIHNhbWUKICAgICAgKiB1cGRhdGVkIGNvbnRleHQ6IHRoZSBo
        YW5kbGVyIHdhcyBhY3RpdmUgaW4gYm90aCB0aGUKICAgICAgICBvbGQgYW5k
        IG5ldyBVUkwsIGJ1dCBpdHMgY29udGV4dCBjaGFuZ2VkLiBUaGUgaGFuZGxl
        cidzCiAgICAgICAgYHNldHVwYCBtZXRob2QsIGlmIGFueSwgd2lsbCBiZSBj
        YWxsZWQgd2l0aCB0aGUgbmV3CiAgICAgICAgY29udGV4dC4KICAgICAgKiBl
        eGl0ZWQ6IHRoZSBoYW5kbGVyIHdhcyBhY3RpdmUgaW4gdGhlIG9sZCBVUkws
        IGJ1dCBpcwogICAgICAgIG5vIGxvbmdlciBhY3RpdmUuCiAgICAgICogZW50
        ZXJlZDogdGhlIGhhbmRsZXIgd2FzIG5vdCBhY3RpdmUgaW4gdGhlIG9sZCBV
        UkwsIGJ1dAogICAgICAgIGlzIG5vdyBhY3RpdmUuCgogICAgICBUaGUgUGFy
        dGl0aW9uZWRIYW5kbGVycyBzdHJ1Y3R1cmUgaGFzIGZvdXIgZmllbGRzOgoK
        ICAgICAgKiBgdXBkYXRlZENvbnRleHRgOiBhIGxpc3Qgb2YgYEhhbmRsZXJJ
        bmZvYCBvYmplY3RzIHRoYXQKICAgICAgICByZXByZXNlbnQgaGFuZGxlcnMg
        dGhhdCByZW1haW4gYWN0aXZlIGJ1dCBoYXZlIGEgY2hhbmdlZAogICAgICAg
        IGNvbnRleHQKICAgICAgKiBgZW50ZXJlZGA6IGEgbGlzdCBvZiBgSGFuZGxl
        ckluZm9gIG9iamVjdHMgdGhhdCByZXByZXNlbnQKICAgICAgICBoYW5kbGVy
        cyB0aGF0IGFyZSBuZXdseSBhY3RpdmUKICAgICAgKiBgZXhpdGVkYDogYSBs
        aXN0IG9mIGBIYW5kbGVySW5mb2Agb2JqZWN0cyB0aGF0IGFyZSBubwogICAg
        ICAgIGxvbmdlciBhY3RpdmUuCiAgICAgICogYHVuY2hhbmdlZGA6IGEgbGlz
        dCBvZiBgSGFuZGVySW5mb2Agb2JqZWN0cyB0aGF0IHJlbWFpbiBhY3RpdmUu
        CgogICAgICBAcGFyYW0ge0FycmF5W0hhbmRsZXJJbmZvXX0gb2xkSGFuZGxl
        cnMgYSBsaXN0IG9mIHRoZSBoYW5kbGVyCiAgICAgICAgaW5mb3JtYXRpb24g
        Zm9yIHRoZSBwcmV2aW91cyBVUkwgKG9yIGBbXWAgaWYgdGhpcyBpcyB0aGUK
        ICAgICAgICBmaXJzdCBoYW5kbGVkIHRyYW5zaXRpb24pCiAgICAgIEBwYXJh
        bSB7QXJyYXlbSGFuZGxlckluZm9dfSBuZXdIYW5kbGVycyBhIGxpc3Qgb2Yg
        dGhlIGhhbmRsZXIKICAgICAgICBpbmZvcm1hdGlvbiBmb3IgdGhlIG5ldyBV
        UkwKCiAgICAgIEByZXR1cm4ge1BhcnRpdGlvbn0KICAgICovCiAgICBmdW5j
        dGlvbiBwYXJ0aXRpb25IYW5kbGVycyhvbGRTdGF0ZSwgbmV3U3RhdGUpIHsK
        ICAgICAgdmFyIG9sZEhhbmRsZXJzID0gb2xkU3RhdGUuaGFuZGxlckluZm9z
        OwogICAgICB2YXIgbmV3SGFuZGxlcnMgPSBuZXdTdGF0ZS5oYW5kbGVySW5m
        b3M7CgogICAgICB2YXIgaGFuZGxlcnMgPSB7CiAgICAgICAgICAgIHVwZGF0
        ZWRDb250ZXh0OiBbXSwKICAgICAgICAgICAgZXhpdGVkOiBbXSwKICAgICAg
        ICAgICAgZW50ZXJlZDogW10sCiAgICAgICAgICAgIHVuY2hhbmdlZDogW10K
        ICAgICAgICAgIH07CgogICAgICB2YXIgaGFuZGxlckNoYW5nZWQsIGNvbnRl
        eHRDaGFuZ2VkLCBxdWVyeVBhcmFtc0NoYW5nZWQsIGksIGw7CgogICAgICBm
        b3IgKGk9MCwgbD1uZXdIYW5kbGVycy5sZW5ndGg7IGk8bDsgaSsrKSB7CiAg
        ICAgICAgdmFyIG9sZEhhbmRsZXIgPSBvbGRIYW5kbGVyc1tpXSwgbmV3SGFu
        ZGxlciA9IG5ld0hhbmRsZXJzW2ldOwoKICAgICAgICBpZiAoIW9sZEhhbmRs
        ZXIgfHwgb2xkSGFuZGxlci5oYW5kbGVyICE9PSBuZXdIYW5kbGVyLmhhbmRs
        ZXIpIHsKICAgICAgICAgIGhhbmRsZXJDaGFuZ2VkID0gdHJ1ZTsKICAgICAg
        ICB9CgogICAgICAgIGlmIChoYW5kbGVyQ2hhbmdlZCkgewogICAgICAgICAg
        aGFuZGxlcnMuZW50ZXJlZC5wdXNoKG5ld0hhbmRsZXIpOwogICAgICAgICAg
        aWYgKG9sZEhhbmRsZXIpIHsgaGFuZGxlcnMuZXhpdGVkLnVuc2hpZnQob2xk
        SGFuZGxlcik7IH0KICAgICAgICB9IGVsc2UgaWYgKGNvbnRleHRDaGFuZ2Vk
        IHx8IG9sZEhhbmRsZXIuY29udGV4dCAhPT0gbmV3SGFuZGxlci5jb250ZXh0
        IHx8IHF1ZXJ5UGFyYW1zQ2hhbmdlZCkgewogICAgICAgICAgY29udGV4dENo
        YW5nZWQgPSB0cnVlOwogICAgICAgICAgaGFuZGxlcnMudXBkYXRlZENvbnRl
        eHQucHVzaChuZXdIYW5kbGVyKTsKICAgICAgICB9IGVsc2UgewogICAgICAg
        ICAgaGFuZGxlcnMudW5jaGFuZ2VkLnB1c2gob2xkSGFuZGxlcik7CiAgICAg
        ICAgfQogICAgICB9CgogICAgICBmb3IgKGk9bmV3SGFuZGxlcnMubGVuZ3Ro
        LCBsPW9sZEhhbmRsZXJzLmxlbmd0aDsgaTxsOyBpKyspIHsKICAgICAgICBo
        YW5kbGVycy5leGl0ZWQudW5zaGlmdChvbGRIYW5kbGVyc1tpXSk7CiAgICAg
        IH0KCiAgICAgIHJldHVybiBoYW5kbGVyczsKICAgIH0KCiAgICBmdW5jdGlv
        biB1cGRhdGVVUkwodHJhbnNpdGlvbiwgc3RhdGUsIGlucHV0VXJsKSB7CiAg
        ICAgIHZhciB1cmxNZXRob2QgPSB0cmFuc2l0aW9uLnVybE1ldGhvZDsKCiAg
        ICAgIGlmICghdXJsTWV0aG9kKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9
        CgogICAgICB2YXIgcm91dGVyID0gdHJhbnNpdGlvbi5yb3V0ZXIsCiAgICAg
        ICAgICBoYW5kbGVySW5mb3MgPSBzdGF0ZS5oYW5kbGVySW5mb3MsCiAgICAg
        ICAgICBoYW5kbGVyTmFtZSA9IGhhbmRsZXJJbmZvc1toYW5kbGVySW5mb3Mu
        bGVuZ3RoIC0gMV0ubmFtZSwKICAgICAgICAgIHBhcmFtcyA9IHt9OwoKICAg
        ICAgZm9yICh2YXIgaSA9IGhhbmRsZXJJbmZvcy5sZW5ndGggLSAxOyBpID49
        IDA7IC0taSkgewogICAgICAgIHZhciBoYW5kbGVySW5mbyA9IGhhbmRsZXJJ
        bmZvc1tpXTsKICAgICAgICBtZXJnZShwYXJhbXMsIGhhbmRsZXJJbmZvLnBh
        cmFtcyk7CiAgICAgICAgaWYgKGhhbmRsZXJJbmZvLmhhbmRsZXIuaW5hY2Nl
        c3NpYmxlQnlVUkwpIHsKICAgICAgICAgIHVybE1ldGhvZCA9IG51bGw7CiAg
        ICAgICAgfQogICAgICB9CgogICAgICBpZiAodXJsTWV0aG9kKSB7CiAgICAg
        ICAgcGFyYW1zLnF1ZXJ5UGFyYW1zID0gc3RhdGUucXVlcnlQYXJhbXM7CiAg
        ICAgICAgdmFyIHVybCA9IHJvdXRlci5yZWNvZ25pemVyLmdlbmVyYXRlKGhh
        bmRsZXJOYW1lLCBwYXJhbXMpOwoKICAgICAgICBpZiAodXJsTWV0aG9kID09
        PSAncmVwbGFjZVF1ZXJ5JykgewogICAgICAgICAgaWYgKHVybCAhPT0gaW5w
        dXRVcmwpIHsKICAgICAgICAgICAgcm91dGVyLnJlcGxhY2VVUkwodXJsKTsK
        ICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgaWYgKHVybE1ldGhvZCA9PT0g
        J3JlcGxhY2UnKSB7CiAgICAgICAgICByb3V0ZXIucmVwbGFjZVVSTCh1cmwp
        OwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByb3V0ZXIudXBkYXRlVVJM
        KHVybCk7CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgLyoqCiAgICAg
        IEBwcml2YXRlCgogICAgICBVcGRhdGVzIHRoZSBVUkwgKGlmIG5lY2Vzc2Fy
        eSkgYW5kIGNhbGxzIGBzZXR1cENvbnRleHRzYAogICAgICB0byB1cGRhdGUg
        dGhlIHJvdXRlcidzIGFycmF5IG9mIGBjdXJyZW50SGFuZGxlckluZm9zYC4K
        ICAgICAqLwogICAgZnVuY3Rpb24gZmluYWxpemVUcmFuc2l0aW9uKHRyYW5z
        aXRpb24sIG5ld1N0YXRlKSB7CgogICAgICB0cnkgewogICAgICAgIGxvZyh0
        cmFuc2l0aW9uLnJvdXRlciwgdHJhbnNpdGlvbi5zZXF1ZW5jZSwgIlJlc29s
        dmVkIGFsbCBtb2RlbHMgb24gZGVzdGluYXRpb24gcm91dGU7IGZpbmFsaXpp
        bmcgdHJhbnNpdGlvbi4iKTsKCiAgICAgICAgdmFyIHJvdXRlciA9IHRyYW5z
        aXRpb24ucm91dGVyLAogICAgICAgICAgICBoYW5kbGVySW5mb3MgPSBuZXdT
        dGF0ZS5oYW5kbGVySW5mb3MsCiAgICAgICAgICAgIHNlcSA9IHRyYW5zaXRp
        b24uc2VxdWVuY2U7CgogICAgICAgIC8vIFJ1biBhbGwgdGhlIG5lY2Vzc2Fy
        eSBlbnRlci9zZXR1cC9leGl0IGhvb2tzCiAgICAgICAgc2V0dXBDb250ZXh0
        cyhyb3V0ZXIsIG5ld1N0YXRlLCB0cmFuc2l0aW9uKTsKCiAgICAgICAgLy8g
        Q2hlY2sgaWYgYSByZWRpcmVjdCBvY2N1cnJlZCBpbiBlbnRlci9zZXR1cAog
        ICAgICAgIGlmICh0cmFuc2l0aW9uLmlzQWJvcnRlZCkgewogICAgICAgICAg
        Ly8gVE9ETzogY2xlYW5lciB3YXk/IGRpc3Rpbmd1aXNoIGIvdyB0YXJnZXRI
        YW5kbGVySW5mb3M/CiAgICAgICAgICByb3V0ZXIuc3RhdGUuaGFuZGxlcklu
        Zm9zID0gcm91dGVyLmN1cnJlbnRIYW5kbGVySW5mb3M7CiAgICAgICAgICBy
        ZXR1cm4gcmVqZWN0KGxvZ0Fib3J0KHRyYW5zaXRpb24pKTsKICAgICAgICB9
        CgogICAgICAgIHVwZGF0ZVVSTCh0cmFuc2l0aW9uLCBuZXdTdGF0ZSwgdHJh
        bnNpdGlvbi5pbnRlbnQudXJsKTsKCiAgICAgICAgdHJhbnNpdGlvbi5pc0Fj
        dGl2ZSA9IGZhbHNlOwogICAgICAgIHJvdXRlci5hY3RpdmVUcmFuc2l0aW9u
        ID0gbnVsbDsKCiAgICAgICAgdHJpZ2dlcihyb3V0ZXIsIHJvdXRlci5jdXJy
        ZW50SGFuZGxlckluZm9zLCB0cnVlLCBbJ2RpZFRyYW5zaXRpb24nXSk7Cgog
        ICAgICAgIGlmIChyb3V0ZXIuZGlkVHJhbnNpdGlvbikgewogICAgICAgICAg
        cm91dGVyLmRpZFRyYW5zaXRpb24ocm91dGVyLmN1cnJlbnRIYW5kbGVySW5m
        b3MpOwogICAgICAgIH0KCiAgICAgICAgbG9nKHJvdXRlciwgdHJhbnNpdGlv
        bi5zZXF1ZW5jZSwgIlRSQU5TSVRJT04gQ09NUExFVEUuIik7CgogICAgICAg
        IC8vIFJlc29sdmUgd2l0aCB0aGUgZmluYWwgaGFuZGxlci4KICAgICAgICBy
        ZXR1cm4gaGFuZGxlckluZm9zW2hhbmRsZXJJbmZvcy5sZW5ndGggLSAxXS5o
        YW5kbGVyOwogICAgICB9IGNhdGNoKGUpIHsKICAgICAgICBpZiAoIShlIGlu
        c3RhbmNlb2YgVHJhbnNpdGlvbkFib3J0ZWQpKSB7CiAgICAgICAgICAvL3Zh
        ciBlcnJvbmVvdXNIYW5kbGVyID0gaGFuZGxlckluZm9zLnBvcCgpOwogICAg
        ICAgICAgdmFyIGluZm9zID0gdHJhbnNpdGlvbi5zdGF0ZS5oYW5kbGVySW5m
        b3M7CiAgICAgICAgICB0cmFuc2l0aW9uLnRyaWdnZXIodHJ1ZSwgJ2Vycm9y
        JywgZSwgdHJhbnNpdGlvbiwgaW5mb3NbaW5mb3MubGVuZ3RoLTFdKTsKICAg
        ICAgICAgIHRyYW5zaXRpb24uYWJvcnQoKTsKICAgICAgICB9CgogICAgICAg
        IHRocm93IGU7CiAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAgQHByaXZh
        dGUKCiAgICAgIEJlZ2lucyBhbmQgcmV0dXJucyBhIFRyYW5zaXRpb24gYmFz
        ZWQgb24gdGhlIHByb3ZpZGVkCiAgICAgIGFyZ3VtZW50cy4gQWNjZXB0cyBh
        cmd1bWVudHMgaW4gdGhlIGZvcm0gb2YgYm90aCBVUkwKICAgICAgdHJhbnNp
        dGlvbnMgYW5kIG5hbWVkIHRyYW5zaXRpb25zLgoKICAgICAgQHBhcmFtIHtS
        b3V0ZXJ9IHJvdXRlcgogICAgICBAcGFyYW0ge0FycmF5W09iamVjdF19IGFy
        Z3MgYXJndW1lbnRzIHBhc3NlZCB0byB0cmFuc2l0aW9uVG8sCiAgICAgICAg
        cmVwbGFjZVdpdGgsIG9yIGhhbmRsZVVSTAogICAgKi8KICAgIGZ1bmN0aW9u
        IGRvVHJhbnNpdGlvbihyb3V0ZXIsIGFyZ3MsIGlzSW50ZXJtZWRpYXRlKSB7
        CiAgICAgIC8vIE5vcm1hbGl6ZSBibGFuayB0cmFuc2l0aW9ucyB0byByb290
        IFVSTCB0cmFuc2l0aW9ucy4KICAgICAgdmFyIG5hbWUgPSBhcmdzWzBdIHx8
        ICcvJzsKCiAgICAgIHZhciBsYXN0QXJnID0gYXJnc1thcmdzLmxlbmd0aC0x
        XTsKICAgICAgdmFyIHF1ZXJ5UGFyYW1zID0ge307CiAgICAgIGlmIChsYXN0
        QXJnICYmIGxhc3RBcmcuaGFzT3duUHJvcGVydHkoJ3F1ZXJ5UGFyYW1zJykp
        IHsKICAgICAgICBxdWVyeVBhcmFtcyA9IHBvcC5jYWxsKGFyZ3MpLnF1ZXJ5
        UGFyYW1zOwogICAgICB9CgogICAgICB2YXIgaW50ZW50OwogICAgICBpZiAo
        YXJncy5sZW5ndGggPT09IDApIHsKCiAgICAgICAgbG9nKHJvdXRlciwgIlVw
        ZGF0aW5nIHF1ZXJ5IHBhcmFtcyIpOwoKICAgICAgICAvLyBBIHF1ZXJ5IHBh
        cmFtIHVwZGF0ZSBpcyByZWFsbHkganVzdCBhIHRyYW5zaXRpb24KICAgICAg
        ICAvLyBpbnRvIHRoZSByb3V0ZSB5b3UncmUgYWxyZWFkeSBvbi4KICAgICAg
        ICB2YXIgaGFuZGxlckluZm9zID0gcm91dGVyLnN0YXRlLmhhbmRsZXJJbmZv
        czsKICAgICAgICBpbnRlbnQgPSBuZXcgTmFtZWRUcmFuc2l0aW9uSW50ZW50
        KHsKICAgICAgICAgIG5hbWU6IGhhbmRsZXJJbmZvc1toYW5kbGVySW5mb3Mu
        bGVuZ3RoIC0gMV0ubmFtZSwKICAgICAgICAgIGNvbnRleHRzOiBbXSwKICAg
        ICAgICAgIHF1ZXJ5UGFyYW1zOiBxdWVyeVBhcmFtcwogICAgICAgIH0pOwoK
        ICAgICAgfSBlbHNlIGlmIChuYW1lLmNoYXJBdCgwKSA9PT0gJy8nKSB7Cgog
        ICAgICAgIGxvZyhyb3V0ZXIsICJBdHRlbXB0aW5nIFVSTCB0cmFuc2l0aW9u
        IHRvICIgKyBuYW1lKTsKICAgICAgICBpbnRlbnQgPSBuZXcgVVJMVHJhbnNp
        dGlvbkludGVudCh7IHVybDogbmFtZSB9KTsKCiAgICAgIH0gZWxzZSB7Cgog
        ICAgICAgIGxvZyhyb3V0ZXIsICJBdHRlbXB0aW5nIHRyYW5zaXRpb24gdG8g
        IiArIG5hbWUpOwogICAgICAgIGludGVudCA9IG5ldyBOYW1lZFRyYW5zaXRp
        b25JbnRlbnQoewogICAgICAgICAgbmFtZTogYXJnc1swXSwKICAgICAgICAg
        IGNvbnRleHRzOiBzbGljZS5jYWxsKGFyZ3MsIDEpLAogICAgICAgICAgcXVl
        cnlQYXJhbXM6IHF1ZXJ5UGFyYW1zCiAgICAgICAgfSk7CiAgICAgIH0KCiAg
        ICAgIHJldHVybiByb3V0ZXIudHJhbnNpdGlvbkJ5SW50ZW50KGludGVudCwg
        aXNJbnRlcm1lZGlhdGUpOwogICAgfQoKICAgIGZ1bmN0aW9uIGhhbmRsZXJJ
        bmZvc0VxdWFsKGhhbmRsZXJJbmZvcywgb3RoZXJIYW5kbGVySW5mb3MpIHsK
        ICAgICAgaWYgKGhhbmRsZXJJbmZvcy5sZW5ndGggIT09IG90aGVySGFuZGxl
        ckluZm9zLmxlbmd0aCkgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAg
        fQoKICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGhhbmRsZXJJbmZvcy5s
        ZW5ndGg7IGkgPCBsZW47ICsraSkgewogICAgICAgIGlmIChoYW5kbGVySW5m
        b3NbaV0gIT09IG90aGVySGFuZGxlckluZm9zW2ldKSB7CiAgICAgICAgICBy
        ZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiB0
        cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIGZpbmFsaXplUXVlcnlQYXJhbUNo
        YW5nZShyb3V0ZXIsIHJlc29sdmVkSGFuZGxlcnMsIG5ld1F1ZXJ5UGFyYW1z
        KSB7CiAgICAgIC8vIFdlIGZpcmUgYSBmaW5hbGl6ZVF1ZXJ5UGFyYW1DaGFu
        Z2UgZXZlbnQgd2hpY2gKICAgICAgLy8gZ2l2ZXMgdGhlIG5ldyByb3V0ZSBo
        aWVyYXJjaHkgYSBjaGFuY2UgdG8gdGVsbAogICAgICAvLyB1cyB3aGljaCBx
        dWVyeSBwYXJhbXMgaXQncyBjb25zdW1pbmcgYW5kIHdoYXQKICAgICAgLy8g
        dGhlaXIgZmluYWwgdmFsdWVzIGFyZS4gSWYgYSBxdWVyeSBwYXJhbSBpcwog
        ICAgICAvLyBubyBsb25nZXIgY29uc3VtZWQgaW4gdGhlIGZpbmFsIHJvdXRl
        IGhpZXJhcmNoeSwKICAgICAgLy8gaXRzIHNlcmlhbGl6ZWQgc2VnbWVudCB3
        aWxsIGJlIHJlbW92ZWQKICAgICAgLy8gZnJvbSB0aGUgVVJMLgogICAgICB2
        YXIgZmluYWxRdWVyeVBhcmFtc0FycmF5ID0gW107CiAgICAgIHRyaWdnZXIo
        cm91dGVyLCByZXNvbHZlZEhhbmRsZXJzLCB0cnVlLCBbJ2ZpbmFsaXplUXVl
        cnlQYXJhbUNoYW5nZScsIG5ld1F1ZXJ5UGFyYW1zLCBmaW5hbFF1ZXJ5UGFy
        YW1zQXJyYXldKTsKCiAgICAgIHZhciBmaW5hbFF1ZXJ5UGFyYW1zID0ge307
        CiAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBmaW5hbFF1ZXJ5UGFyYW1z
        QXJyYXkubGVuZ3RoOyBpIDwgbGVuOyArK2kpIHsKICAgICAgICB2YXIgcXAg
        PSBmaW5hbFF1ZXJ5UGFyYW1zQXJyYXlbaV07CiAgICAgICAgZmluYWxRdWVy
        eVBhcmFtc1txcC5rZXldID0gcXAudmFsdWU7CiAgICAgIH0KICAgICAgcmV0
        dXJuIGZpbmFsUXVlcnlQYXJhbXM7CiAgICB9CgogICAgX19leHBvcnRzX18u
        Um91dGVyID0gUm91dGVyOwogIH0pOwpkZWZpbmUoInJvdXRlci90cmFuc2l0
        aW9uLWludGVudCIsIAogIFsiLi91dGlscyIsImV4cG9ydHMiXSwKICBmdW5j
        dGlvbihfX2RlcGVuZGVuY3kxX18sIF9fZXhwb3J0c19fKSB7CiAgICAidXNl
        IHN0cmljdCI7CiAgICB2YXIgbWVyZ2UgPSBfX2RlcGVuZGVuY3kxX18ubWVy
        Z2U7CgogICAgZnVuY3Rpb24gVHJhbnNpdGlvbkludGVudChwcm9wcykgewog
        ICAgICBpZiAocHJvcHMpIHsKICAgICAgICBtZXJnZSh0aGlzLCBwcm9wcyk7
        CiAgICAgIH0KICAgICAgdGhpcy5kYXRhID0gdGhpcy5kYXRhIHx8IHt9Owog
        ICAgfQoKICAgIFRyYW5zaXRpb25JbnRlbnQucHJvdG90eXBlLmFwcGx5VG9T
        dGF0ZSA9IGZ1bmN0aW9uKG9sZFN0YXRlKSB7CiAgICAgIC8vIERlZmF1bHQg
        VHJhbnNpdGlvbkludGVudCBpcyBhIG5vLW9wLgogICAgICByZXR1cm4gb2xk
        U3RhdGU7CiAgICB9OwoKICAgIF9fZXhwb3J0c19fLlRyYW5zaXRpb25JbnRl
        bnQgPSBUcmFuc2l0aW9uSW50ZW50OwogIH0pOwpkZWZpbmUoInJvdXRlci90
        cmFuc2l0aW9uLWludGVudC9uYW1lZC10cmFuc2l0aW9uLWludGVudCIsIAog
        IFsiLi4vdHJhbnNpdGlvbi1pbnRlbnQiLCIuLi90cmFuc2l0aW9uLXN0YXRl
        IiwiLi4vaGFuZGxlci1pbmZvIiwiLi4vdXRpbHMiLCJleHBvcnRzIl0sCiAg
        ZnVuY3Rpb24oX19kZXBlbmRlbmN5MV9fLCBfX2RlcGVuZGVuY3kyX18sIF9f
        ZGVwZW5kZW5jeTNfXywgX19kZXBlbmRlbmN5NF9fLCBfX2V4cG9ydHNfXykg
        ewogICAgInVzZSBzdHJpY3QiOwogICAgdmFyIFRyYW5zaXRpb25JbnRlbnQg
        PSBfX2RlcGVuZGVuY3kxX18uVHJhbnNpdGlvbkludGVudDsKICAgIHZhciBU
        cmFuc2l0aW9uU3RhdGUgPSBfX2RlcGVuZGVuY3kyX18uVHJhbnNpdGlvblN0
        YXRlOwogICAgdmFyIFVucmVzb2x2ZWRIYW5kbGVySW5mb0J5UGFyYW0gPSBf
        X2RlcGVuZGVuY3kzX18uVW5yZXNvbHZlZEhhbmRsZXJJbmZvQnlQYXJhbTsK
        ICAgIHZhciBVbnJlc29sdmVkSGFuZGxlckluZm9CeU9iamVjdCA9IF9fZGVw
        ZW5kZW5jeTNfXy5VbnJlc29sdmVkSGFuZGxlckluZm9CeU9iamVjdDsKICAg
        IHZhciBpc1BhcmFtID0gX19kZXBlbmRlbmN5NF9fLmlzUGFyYW07CiAgICB2
        YXIgZm9yRWFjaCA9IF9fZGVwZW5kZW5jeTRfXy5mb3JFYWNoOwogICAgdmFy
        IGV4dHJhY3RRdWVyeVBhcmFtcyA9IF9fZGVwZW5kZW5jeTRfXy5leHRyYWN0
        UXVlcnlQYXJhbXM7CiAgICB2YXIgb0NyZWF0ZSA9IF9fZGVwZW5kZW5jeTRf
        Xy5vQ3JlYXRlOwogICAgdmFyIG1lcmdlID0gX19kZXBlbmRlbmN5NF9fLm1l
        cmdlOwoKICAgIGZ1bmN0aW9uIE5hbWVkVHJhbnNpdGlvbkludGVudChwcm9w
        cykgewogICAgICBUcmFuc2l0aW9uSW50ZW50LmNhbGwodGhpcywgcHJvcHMp
        OwogICAgfQoKICAgIE5hbWVkVHJhbnNpdGlvbkludGVudC5wcm90b3R5cGUg
        PSBvQ3JlYXRlKFRyYW5zaXRpb25JbnRlbnQucHJvdG90eXBlKTsKICAgIE5h
        bWVkVHJhbnNpdGlvbkludGVudC5wcm90b3R5cGUuYXBwbHlUb1N0YXRlID0g
        ZnVuY3Rpb24ob2xkU3RhdGUsIHJlY29nbml6ZXIsIGdldEhhbmRsZXIsIGlz
        SW50ZXJtZWRpYXRlKSB7CgogICAgICB2YXIgcGFydGl0aW9uZWRBcmdzICAg
        ICA9IGV4dHJhY3RRdWVyeVBhcmFtcyhbdGhpcy5uYW1lXS5jb25jYXQodGhp
        cy5jb250ZXh0cykpLAogICAgICAgIHB1cmVBcmdzICAgICAgICAgICAgICA9
        IHBhcnRpdGlvbmVkQXJnc1swXSwKICAgICAgICBxdWVyeVBhcmFtcyAgICAg
        ICAgICAgPSBwYXJ0aXRpb25lZEFyZ3NbMV0sCiAgICAgICAgaGFuZGxlcnMg
        ICAgICAgICAgICAgID0gcmVjb2duaXplci5oYW5kbGVyc0ZvcihwdXJlQXJn
        c1swXSk7CgogICAgICB2YXIgdGFyZ2V0Um91dGVOYW1lID0gaGFuZGxlcnNb
        aGFuZGxlcnMubGVuZ3RoLTFdLmhhbmRsZXI7CgogICAgICByZXR1cm4gdGhp
        cy5hcHBseVRvSGFuZGxlcnMob2xkU3RhdGUsIGhhbmRsZXJzLCBnZXRIYW5k
        bGVyLCB0YXJnZXRSb3V0ZU5hbWUsIGlzSW50ZXJtZWRpYXRlKTsKICAgIH07
        CgogICAgTmFtZWRUcmFuc2l0aW9uSW50ZW50LnByb3RvdHlwZS5hcHBseVRv
        SGFuZGxlcnMgPSBmdW5jdGlvbihvbGRTdGF0ZSwgaGFuZGxlcnMsIGdldEhh
        bmRsZXIsIHRhcmdldFJvdXRlTmFtZSwgaXNJbnRlcm1lZGlhdGUsIGNoZWNr
        aW5nSWZBY3RpdmUpIHsKCiAgICAgIHZhciBpOwogICAgICB2YXIgbmV3U3Rh
        dGUgPSBuZXcgVHJhbnNpdGlvblN0YXRlKCk7CiAgICAgIHZhciBvYmplY3Rz
        ID0gdGhpcy5jb250ZXh0cy5zbGljZSgwKTsKCiAgICAgIHZhciBpbnZhbGlk
        YXRlSW5kZXggPSBoYW5kbGVycy5sZW5ndGg7CiAgICAgIHZhciBub25EeW5h
        bWljSW5kZXhlcyA9IFtdOwoKICAgICAgLy8gUGl2b3QgaGFuZGxlcnMgYXJl
        IHByb3ZpZGVkIGZvciByZWZyZXNoIHRyYW5zaXRpb25zCiAgICAgIGlmICh0
        aGlzLnBpdm90SGFuZGxlcikgewogICAgICAgIGZvciAoaSA9IDA7IGkgPCBo
        YW5kbGVycy5sZW5ndGg7ICsraSkgewogICAgICAgICAgaWYgKGdldEhhbmRs
        ZXIoaGFuZGxlcnNbaV0uaGFuZGxlcikgPT09IHRoaXMucGl2b3RIYW5kbGVy
        KSB7CiAgICAgICAgICAgIGludmFsaWRhdGVJbmRleCA9IGk7CiAgICAgICAg
        ICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQoKICAg
        ICAgdmFyIHBpdm90SGFuZGxlckZvdW5kID0gIXRoaXMucGl2b3RIYW5kbGVy
        OwoKICAgICAgZm9yIChpID0gaGFuZGxlcnMubGVuZ3RoIC0gMTsgaSA+PSAw
        OyAtLWkpIHsKICAgICAgICB2YXIgcmVzdWx0ID0gaGFuZGxlcnNbaV07CiAg
        ICAgICAgdmFyIG5hbWUgPSByZXN1bHQuaGFuZGxlcjsKICAgICAgICB2YXIg
        aGFuZGxlciA9IGdldEhhbmRsZXIobmFtZSk7CgogICAgICAgIHZhciBvbGRI
        YW5kbGVySW5mbyA9IG9sZFN0YXRlLmhhbmRsZXJJbmZvc1tpXTsKICAgICAg
        ICB2YXIgbmV3SGFuZGxlckluZm8gPSBudWxsOwoKICAgICAgICBpZiAocmVz
        dWx0Lm5hbWVzLmxlbmd0aCA+IDApIHsKICAgICAgICAgIGlmIChpID49IGlu
        dmFsaWRhdGVJbmRleCkgewogICAgICAgICAgICBuZXdIYW5kbGVySW5mbyA9
        IHRoaXMuY3JlYXRlUGFyYW1IYW5kbGVySW5mbyhuYW1lLCBoYW5kbGVyLCBy
        ZXN1bHQubmFtZXMsIG9iamVjdHMsIG9sZEhhbmRsZXJJbmZvKTsKICAgICAg
        ICAgIH0gZWxzZSB7CiAgICAgICAgICAgIG5ld0hhbmRsZXJJbmZvID0gdGhp
        cy5nZXRIYW5kbGVySW5mb0ZvckR5bmFtaWNTZWdtZW50KG5hbWUsIGhhbmRs
        ZXIsIHJlc3VsdC5uYW1lcywgb2JqZWN0cywgb2xkSGFuZGxlckluZm8sIHRh
        cmdldFJvdXRlTmFtZSk7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsK
        ICAgICAgICAgIC8vIFRoaXMgcm91dGUgaGFzIG5vIGR5bmFtaWMgc2VnbWVu
        dC4KICAgICAgICAgIC8vIFRoZXJlZm9yZSB0cmVhdCBhcyBhIHBhcmFtLWJh
        c2VkIGhhbmRsZXJJbmZvCiAgICAgICAgICAvLyB3aXRoIGVtcHR5IHBhcmFt
        cy4gVGhpcyB3aWxsIGNhdXNlIHRoZSBgbW9kZWxgCiAgICAgICAgICAvLyBo
        b29rIHRvIGJlIGNhbGxlZCB3aXRoIGVtcHR5IHBhcmFtcywgd2hpY2ggaXMg
        ZGVzaXJhYmxlLgogICAgICAgICAgbmV3SGFuZGxlckluZm8gPSB0aGlzLmNy
        ZWF0ZVBhcmFtSGFuZGxlckluZm8obmFtZSwgaGFuZGxlciwgcmVzdWx0Lm5h
        bWVzLCBvYmplY3RzLCBvbGRIYW5kbGVySW5mbyk7CiAgICAgICAgICBub25E
        eW5hbWljSW5kZXhlcy51bnNoaWZ0KGkpOwogICAgICAgIH0KCiAgICAgICAg
        aWYgKGNoZWNraW5nSWZBY3RpdmUpIHsKICAgICAgICAgIC8vIElmIHdlJ3Jl
        IHBlcmZvcm1pbmcgYW4gaXNBY3RpdmUgY2hlY2ssIHdlIHdhbnQgdG8KICAg
        ICAgICAgIC8vIHNlcmlhbGl6ZSBVUkwgcGFyYW1zIHdpdGggdGhlIHByb3Zp
        ZGVkIGNvbnRleHQsIGJ1dAogICAgICAgICAgLy8gaWdub3JlIG1pc21hdGNo
        ZXMgYmV0d2VlbiBvbGQgYW5kIG5ldyBjb250ZXh0LgogICAgICAgICAgbmV3
        SGFuZGxlckluZm8gPSBuZXdIYW5kbGVySW5mby5iZWNvbWVSZXNvbHZlZChu
        dWxsLCBuZXdIYW5kbGVySW5mby5jb250ZXh0KTsKICAgICAgICAgIHZhciBv
        bGRDb250ZXh0ID0gb2xkSGFuZGxlckluZm8gJiYgb2xkSGFuZGxlckluZm8u
        Y29udGV4dDsKICAgICAgICAgIGlmIChyZXN1bHQubmFtZXMubGVuZ3RoID4g
        MCAmJiBuZXdIYW5kbGVySW5mby5jb250ZXh0ID09PSBvbGRDb250ZXh0KSB7
        CiAgICAgICAgICAgIC8vIElmIGNvbnRleHRzIG1hdGNoIGluIGlzQWN0aXZl
        IHRlc3QsIGFzc3VtZSBwYXJhbXMgYWxzbyBtYXRjaC4KICAgICAgICAgICAg
        Ly8gVGhpcyBhbGxvd3MgZm9yIGZsZXhpYmlsaXR5IGluIG5vdCByZXF1aXJp
        bmcgdGhhdCBldmVyeSBsYXN0CiAgICAgICAgICAgIC8vIGhhbmRsZXIgcHJv
        dmlkZSBhIGBzZXJpYWxpemVgIG1ldGhvZAogICAgICAgICAgICBuZXdIYW5k
        bGVySW5mby5wYXJhbXMgPSBvbGRIYW5kbGVySW5mbyAmJiBvbGRIYW5kbGVy
        SW5mby5wYXJhbXM7CiAgICAgICAgICB9CiAgICAgICAgICBuZXdIYW5kbGVy
        SW5mby5jb250ZXh0ID0gb2xkQ29udGV4dDsKICAgICAgICB9CgogICAgICAg
        IHZhciBoYW5kbGVyVG9Vc2UgPSBvbGRIYW5kbGVySW5mbzsKICAgICAgICBp
        ZiAoaSA+PSBpbnZhbGlkYXRlSW5kZXggfHwgbmV3SGFuZGxlckluZm8uc2hv
        dWxkU3VwZXJjZWRlKG9sZEhhbmRsZXJJbmZvKSkgewogICAgICAgICAgaW52
        YWxpZGF0ZUluZGV4ID0gTWF0aC5taW4oaSwgaW52YWxpZGF0ZUluZGV4KTsK
        ICAgICAgICAgIGhhbmRsZXJUb1VzZSA9IG5ld0hhbmRsZXJJbmZvOwogICAg
        ICAgIH0KCiAgICAgICAgaWYgKGlzSW50ZXJtZWRpYXRlICYmICFjaGVja2lu
        Z0lmQWN0aXZlKSB7CiAgICAgICAgICBoYW5kbGVyVG9Vc2UgPSBoYW5kbGVy
        VG9Vc2UuYmVjb21lUmVzb2x2ZWQobnVsbCwgaGFuZGxlclRvVXNlLmNvbnRl
        eHQpOwogICAgICAgIH0KCiAgICAgICAgbmV3U3RhdGUuaGFuZGxlckluZm9z
        LnVuc2hpZnQoaGFuZGxlclRvVXNlKTsKICAgICAgfQoKICAgICAgaWYgKG9i
        amVjdHMubGVuZ3RoID4gMCkgewogICAgICAgIHRocm93IG5ldyBFcnJvcigi
        TW9yZSBjb250ZXh0IG9iamVjdHMgd2VyZSBwYXNzZWQgdGhhbiB0aGVyZSBh
        cmUgZHluYW1pYyBzZWdtZW50cyBmb3IgdGhlIHJvdXRlOiAiICsgdGFyZ2V0
        Um91dGVOYW1lKTsKICAgICAgfQoKICAgICAgaWYgKCFpc0ludGVybWVkaWF0
        ZSkgewogICAgICAgIHRoaXMuaW52YWxpZGF0ZU5vbkR5bmFtaWNIYW5kbGVy
        cyhuZXdTdGF0ZS5oYW5kbGVySW5mb3MsIG5vbkR5bmFtaWNJbmRleGVzLCBp
        bnZhbGlkYXRlSW5kZXgpOwogICAgICB9CgogICAgICBtZXJnZShuZXdTdGF0
        ZS5xdWVyeVBhcmFtcywgb2xkU3RhdGUucXVlcnlQYXJhbXMpOwogICAgICBt
        ZXJnZShuZXdTdGF0ZS5xdWVyeVBhcmFtcywgdGhpcy5xdWVyeVBhcmFtcyB8
        fCB7fSk7CgogICAgICByZXR1cm4gbmV3U3RhdGU7CiAgICB9OwoKICAgIE5h
        bWVkVHJhbnNpdGlvbkludGVudC5wcm90b3R5cGUuaW52YWxpZGF0ZU5vbkR5
        bmFtaWNIYW5kbGVycyA9IGZ1bmN0aW9uKGhhbmRsZXJJbmZvcywgaW5kZXhl
        cywgaW52YWxpZGF0ZUluZGV4KSB7CiAgICAgIGZvckVhY2goaW5kZXhlcywg
        ZnVuY3Rpb24oaSkgewogICAgICAgIGlmIChpID49IGludmFsaWRhdGVJbmRl
        eCkgewogICAgICAgICAgdmFyIGhhbmRsZXJJbmZvID0gaGFuZGxlckluZm9z
        W2ldOwogICAgICAgICAgaGFuZGxlckluZm9zW2ldID0gbmV3IFVucmVzb2x2
        ZWRIYW5kbGVySW5mb0J5UGFyYW0oewogICAgICAgICAgICBuYW1lOiBoYW5k
        bGVySW5mby5uYW1lLAogICAgICAgICAgICBoYW5kbGVyOiBoYW5kbGVySW5m
        by5oYW5kbGVyLAogICAgICAgICAgICBwYXJhbXM6IHt9CiAgICAgICAgICB9
        KTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfTsKCiAgICBOYW1lZFRyYW5z
        aXRpb25JbnRlbnQucHJvdG90eXBlLmdldEhhbmRsZXJJbmZvRm9yRHluYW1p
        Y1NlZ21lbnQgPSBmdW5jdGlvbihuYW1lLCBoYW5kbGVyLCBuYW1lcywgb2Jq
        ZWN0cywgb2xkSGFuZGxlckluZm8sIHRhcmdldFJvdXRlTmFtZSkgewoKICAg
        ICAgdmFyIG51bU5hbWVzID0gbmFtZXMubGVuZ3RoOwogICAgICB2YXIgb2Jq
        ZWN0VG9Vc2U7CiAgICAgIGlmIChvYmplY3RzLmxlbmd0aCA+IDApIHsKCiAg
        ICAgICAgLy8gVXNlIHRoZSBvYmplY3RzIHByb3ZpZGVkIGZvciB0aGlzIHRy
        YW5zaXRpb24uCiAgICAgICAgb2JqZWN0VG9Vc2UgPSBvYmplY3RzW29iamVj
        dHMubGVuZ3RoIC0gMV07CiAgICAgICAgaWYgKGlzUGFyYW0ob2JqZWN0VG9V
        c2UpKSB7CiAgICAgICAgICByZXR1cm4gdGhpcy5jcmVhdGVQYXJhbUhhbmRs
        ZXJJbmZvKG5hbWUsIGhhbmRsZXIsIG5hbWVzLCBvYmplY3RzLCBvbGRIYW5k
        bGVySW5mbyk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIG9iamVjdHMu
        cG9wKCk7CiAgICAgICAgfQogICAgICB9IGVsc2UgaWYgKG9sZEhhbmRsZXJJ
        bmZvICYmIG9sZEhhbmRsZXJJbmZvLm5hbWUgPT09IG5hbWUpIHsKICAgICAg
        ICAvLyBSZXVzZSB0aGUgbWF0Y2hpbmcgb2xkSGFuZGxlckluZm8KICAgICAg
        ICByZXR1cm4gb2xkSGFuZGxlckluZm87CiAgICAgIH0gZWxzZSB7CiAgICAg
        ICAgLy8gSWRlYWxseSB3ZSBzaG91bGQgdGhyb3cgdGhpcyBlcnJvciB0byBw
        cm92aWRlIG1heGltYWwKICAgICAgICAvLyBpbmZvcm1hdGlvbiB0byB0aGUg
        dXNlciB0aGF0IG5vdCBlbm91Z2ggY29udGV4dCBvYmplY3RzCiAgICAgICAg
        Ly8gd2VyZSBwcm92aWRlZCwgYnV0IHRoaXMgcHJvdmVzIHRvbyBjdW1iZXJz
        b21lIGluIEVtYmVyCiAgICAgICAgLy8gaW4gY2FzZXMgd2hlcmUgaW5uZXIg
        dGVtcGxhdGUgaGVscGVycyBhcmUgZXZhbHVhdGVkCiAgICAgICAgLy8gYmVm
        b3JlIHBhcmVudCBoZWxwZXJzIHVuLXJlbmRlciwgaW4gd2hpY2ggY2FzZXMg
        dGhpcwogICAgICAgIC8vIGVycm9yIHNvbWV3aGF0IHByZW1hdHVyZWx5IGZp
        cmVzLgogICAgICAgIC8vdGhyb3cgbmV3IEVycm9yKCJOb3QgZW5vdWdoIGNv
        bnRleHQgb2JqZWN0cyB3ZXJlIHByb3ZpZGVkIHRvIGNvbXBsZXRlIGEgdHJh
        bnNpdGlvbiB0byAiICsgdGFyZ2V0Um91dGVOYW1lICsgIi4gU3BlY2lmaWNh
        bGx5LCB0aGUgIiArIG5hbWUgKyAiIHJvdXRlIG5lZWRzIGFuIG9iamVjdCB0
        aGF0IGNhbiBiZSBzZXJpYWxpemVkIGludG8gaXRzIGR5bmFtaWMgVVJMIHNl
        Z21lbnRzIFsiICsgbmFtZXMuam9pbignLCAnKSArICJdIik7CiAgICAgICAg
        cmV0dXJuIG9sZEhhbmRsZXJJbmZvOwogICAgICB9CgogICAgICByZXR1cm4g
        bmV3IFVucmVzb2x2ZWRIYW5kbGVySW5mb0J5T2JqZWN0KHsKICAgICAgICBu
        YW1lOiBuYW1lLAogICAgICAgIGhhbmRsZXI6IGhhbmRsZXIsCiAgICAgICAg
        Y29udGV4dDogb2JqZWN0VG9Vc2UsCiAgICAgICAgbmFtZXM6IG5hbWVzCiAg
        ICAgIH0pOwogICAgfTsKCiAgICBOYW1lZFRyYW5zaXRpb25JbnRlbnQucHJv
        dG90eXBlLmNyZWF0ZVBhcmFtSGFuZGxlckluZm8gPSBmdW5jdGlvbihuYW1l
        LCBoYW5kbGVyLCBuYW1lcywgb2JqZWN0cywgb2xkSGFuZGxlckluZm8pIHsK
        ICAgICAgdmFyIHBhcmFtcyA9IHt9OwoKICAgICAgLy8gU29hayB1cCBhbGwg
        dGhlIHByb3ZpZGVkIHN0cmluZy9udW1iZXJzCiAgICAgIHZhciBudW1OYW1l
        cyA9IG5hbWVzLmxlbmd0aDsKICAgICAgd2hpbGUgKG51bU5hbWVzLS0pIHsK
        CiAgICAgICAgLy8gT25seSB1c2Ugb2xkIHBhcmFtcyBpZiB0aGUgbmFtZXMg
        bWF0Y2ggd2l0aCB0aGUgbmV3IGhhbmRsZXIKICAgICAgICB2YXIgb2xkUGFy
        YW1zID0gKG9sZEhhbmRsZXJJbmZvICYmIG5hbWUgPT09IG9sZEhhbmRsZXJJ
        bmZvLm5hbWUgJiYgb2xkSGFuZGxlckluZm8ucGFyYW1zKSB8fCB7fTsKCiAg
        ICAgICAgdmFyIHBlZWsgPSBvYmplY3RzW29iamVjdHMubGVuZ3RoIC0gMV07
        CiAgICAgICAgdmFyIHBhcmFtTmFtZSA9IG5hbWVzW251bU5hbWVzXTsKICAg
        ICAgICBpZiAoaXNQYXJhbShwZWVrKSkgewogICAgICAgICAgcGFyYW1zW3Bh
        cmFtTmFtZV0gPSAiIiArIG9iamVjdHMucG9wKCk7CiAgICAgICAgfSBlbHNl
        IHsKICAgICAgICAgIC8vIElmIHdlJ3JlIGhlcmUsIHRoaXMgbWVhbnMgb25s
        eSBzb21lIG9mIHRoZSBwYXJhbXMKICAgICAgICAgIC8vIHdlcmUgc3RyaW5n
        L251bWJlciBwYXJhbXMsIHNvIHRyeSBhbmQgdXNlIGEgcGFyYW0KICAgICAg
        ICAgIC8vIHZhbHVlIGZyb20gYSBwcmV2aW91cyBoYW5kbGVyLgogICAgICAg
        ICAgaWYgKG9sZFBhcmFtcy5oYXNPd25Qcm9wZXJ0eShwYXJhbU5hbWUpKSB7
        CiAgICAgICAgICAgIHBhcmFtc1twYXJhbU5hbWVdID0gb2xkUGFyYW1zW3Bh
        cmFtTmFtZV07CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aHJv
        dyBuZXcgRXJyb3IoIllvdSBkaWRuJ3QgcHJvdmlkZSBlbm91Z2ggc3RyaW5n
        L251bWVyaWMgcGFyYW1ldGVycyB0byBzYXRpc2Z5IGFsbCBvZiB0aGUgZHlu
        YW1pYyBzZWdtZW50cyBmb3Igcm91dGUgIiArIG5hbWUpOwogICAgICAgICAg
        fQogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIG5ldyBVbnJlc29s
        dmVkSGFuZGxlckluZm9CeVBhcmFtKHsKICAgICAgICBuYW1lOiBuYW1lLAog
        ICAgICAgIGhhbmRsZXI6IGhhbmRsZXIsCiAgICAgICAgcGFyYW1zOiBwYXJh
        bXMKICAgICAgfSk7CiAgICB9OwoKICAgIF9fZXhwb3J0c19fLk5hbWVkVHJh
        bnNpdGlvbkludGVudCA9IE5hbWVkVHJhbnNpdGlvbkludGVudDsKICB9KTsK
        ZGVmaW5lKCJyb3V0ZXIvdHJhbnNpdGlvbi1pbnRlbnQvdXJsLXRyYW5zaXRp
        b24taW50ZW50IiwgCiAgWyIuLi90cmFuc2l0aW9uLWludGVudCIsIi4uL3Ry
        YW5zaXRpb24tc3RhdGUiLCIuLi9oYW5kbGVyLWluZm8iLCIuLi91dGlscyIs
        ImV4cG9ydHMiXSwKICBmdW5jdGlvbihfX2RlcGVuZGVuY3kxX18sIF9fZGVw
        ZW5kZW5jeTJfXywgX19kZXBlbmRlbmN5M19fLCBfX2RlcGVuZGVuY3k0X18s
        IF9fZXhwb3J0c19fKSB7CiAgICAidXNlIHN0cmljdCI7CiAgICB2YXIgVHJh
        bnNpdGlvbkludGVudCA9IF9fZGVwZW5kZW5jeTFfXy5UcmFuc2l0aW9uSW50
        ZW50OwogICAgdmFyIFRyYW5zaXRpb25TdGF0ZSA9IF9fZGVwZW5kZW5jeTJf
        Xy5UcmFuc2l0aW9uU3RhdGU7CiAgICB2YXIgVW5yZXNvbHZlZEhhbmRsZXJJ
        bmZvQnlQYXJhbSA9IF9fZGVwZW5kZW5jeTNfXy5VbnJlc29sdmVkSGFuZGxl
        ckluZm9CeVBhcmFtOwogICAgdmFyIG9DcmVhdGUgPSBfX2RlcGVuZGVuY3k0
        X18ub0NyZWF0ZTsKICAgIHZhciBtZXJnZSA9IF9fZGVwZW5kZW5jeTRfXy5t
        ZXJnZTsKCiAgICBmdW5jdGlvbiBVUkxUcmFuc2l0aW9uSW50ZW50KHByb3Bz
        KSB7CiAgICAgIFRyYW5zaXRpb25JbnRlbnQuY2FsbCh0aGlzLCBwcm9wcyk7
        CiAgICB9CgogICAgVVJMVHJhbnNpdGlvbkludGVudC5wcm90b3R5cGUgPSBv
        Q3JlYXRlKFRyYW5zaXRpb25JbnRlbnQucHJvdG90eXBlKTsKICAgIFVSTFRy
        YW5zaXRpb25JbnRlbnQucHJvdG90eXBlLmFwcGx5VG9TdGF0ZSA9IGZ1bmN0
        aW9uKG9sZFN0YXRlLCByZWNvZ25pemVyLCBnZXRIYW5kbGVyKSB7CiAgICAg
        IHZhciBuZXdTdGF0ZSA9IG5ldyBUcmFuc2l0aW9uU3RhdGUoKTsKCiAgICAg
        IHZhciByZXN1bHRzID0gcmVjb2duaXplci5yZWNvZ25pemUodGhpcy51cmwp
        LAogICAgICAgICAgcXVlcnlQYXJhbXMgPSB7fSwKICAgICAgICAgIGksIGxl
        bjsKCiAgICAgIGlmICghcmVzdWx0cykgewogICAgICAgIHRocm93IG5ldyBV
        bnJlY29nbml6ZWRVUkxFcnJvcih0aGlzLnVybCk7CiAgICAgIH0KCiAgICAg
        IHZhciBzdGF0ZXNEaWZmZXIgPSBmYWxzZTsKCiAgICAgIGZvciAoaSA9IDAs
        IGxlbiA9IHJlc3VsdHMubGVuZ3RoOyBpIDwgbGVuOyArK2kpIHsKICAgICAg
        ICB2YXIgcmVzdWx0ID0gcmVzdWx0c1tpXTsKICAgICAgICB2YXIgbmFtZSA9
        IHJlc3VsdC5oYW5kbGVyOwogICAgICAgIHZhciBoYW5kbGVyID0gZ2V0SGFu
        ZGxlcihuYW1lKTsKCiAgICAgICAgaWYgKGhhbmRsZXIuaW5hY2Nlc3NpYmxl
        QnlVUkwpIHsKICAgICAgICAgIHRocm93IG5ldyBVbnJlY29nbml6ZWRVUkxF
        cnJvcih0aGlzLnVybCk7CiAgICAgICAgfQoKICAgICAgICB2YXIgbmV3SGFu
        ZGxlckluZm8gPSBuZXcgVW5yZXNvbHZlZEhhbmRsZXJJbmZvQnlQYXJhbSh7
        CiAgICAgICAgICBuYW1lOiBuYW1lLAogICAgICAgICAgaGFuZGxlcjogaGFu
        ZGxlciwKICAgICAgICAgIHBhcmFtczogcmVzdWx0LnBhcmFtcwogICAgICAg
        IH0pOwoKICAgICAgICB2YXIgb2xkSGFuZGxlckluZm8gPSBvbGRTdGF0ZS5o
        YW5kbGVySW5mb3NbaV07CiAgICAgICAgaWYgKHN0YXRlc0RpZmZlciB8fCBu
        ZXdIYW5kbGVySW5mby5zaG91bGRTdXBlcmNlZGUob2xkSGFuZGxlckluZm8p
        KSB7CiAgICAgICAgICBzdGF0ZXNEaWZmZXIgPSB0cnVlOwogICAgICAgICAg
        bmV3U3RhdGUuaGFuZGxlckluZm9zW2ldID0gbmV3SGFuZGxlckluZm87CiAg
        ICAgICAgfSBlbHNlIHsKICAgICAgICAgIG5ld1N0YXRlLmhhbmRsZXJJbmZv
        c1tpXSA9IG9sZEhhbmRsZXJJbmZvOwogICAgICAgIH0KICAgICAgfQoKICAg
        ICAgbWVyZ2UobmV3U3RhdGUucXVlcnlQYXJhbXMsIHJlc3VsdHMucXVlcnlQ
        YXJhbXMpOwoKICAgICAgcmV0dXJuIG5ld1N0YXRlOwogICAgfTsKCiAgICAv
        KioKICAgICAgUHJvbWlzZSByZWplY3QgcmVhc29ucyBwYXNzZWQgdG8gcHJv
        bWlzZSByZWplY3Rpb24KICAgICAgaGFuZGxlcnMgZm9yIGZhaWxlZCB0cmFu
        c2l0aW9ucy4KICAgICAqLwogICAgZnVuY3Rpb24gVW5yZWNvZ25pemVkVVJM
        RXJyb3IobWVzc2FnZSkgewogICAgICB0aGlzLm1lc3NhZ2UgPSAobWVzc2Fn
        ZSB8fCAiVW5yZWNvZ25pemVkVVJMRXJyb3IiKTsKICAgICAgdGhpcy5uYW1l
        ID0gIlVucmVjb2duaXplZFVSTEVycm9yIjsKICAgIH0KCiAgICBfX2V4cG9y
        dHNfXy5VUkxUcmFuc2l0aW9uSW50ZW50ID0gVVJMVHJhbnNpdGlvbkludGVu
        dDsKICB9KTsKZGVmaW5lKCJyb3V0ZXIvdHJhbnNpdGlvbi1zdGF0ZSIsIAog
        IFsiLi9oYW5kbGVyLWluZm8iLCIuL3V0aWxzIiwicnN2cCIsImV4cG9ydHMi
        XSwKICBmdW5jdGlvbihfX2RlcGVuZGVuY3kxX18sIF9fZGVwZW5kZW5jeTJf
        XywgX19kZXBlbmRlbmN5M19fLCBfX2V4cG9ydHNfXykgewogICAgInVzZSBz
        dHJpY3QiOwogICAgdmFyIFJlc29sdmVkSGFuZGxlckluZm8gPSBfX2RlcGVu
        ZGVuY3kxX18uUmVzb2x2ZWRIYW5kbGVySW5mbzsKICAgIHZhciBmb3JFYWNo
        ID0gX19kZXBlbmRlbmN5Ml9fLmZvckVhY2g7CiAgICB2YXIgcmVzb2x2ZSA9
        IF9fZGVwZW5kZW5jeTNfXy5yZXNvbHZlOwoKICAgIGZ1bmN0aW9uIFRyYW5z
        aXRpb25TdGF0ZShvdGhlcikgewogICAgICB0aGlzLmhhbmRsZXJJbmZvcyA9
        IFtdOwogICAgICB0aGlzLnF1ZXJ5UGFyYW1zID0ge307CiAgICAgIHRoaXMu
        cGFyYW1zID0ge307CiAgICB9CgogICAgVHJhbnNpdGlvblN0YXRlLnByb3Rv
        dHlwZSA9IHsKICAgICAgaGFuZGxlckluZm9zOiBudWxsLAogICAgICBxdWVy
        eVBhcmFtczogbnVsbCwKICAgICAgcGFyYW1zOiBudWxsLAoKICAgICAgcmVz
        b2x2ZTogZnVuY3Rpb24oYXN5bmMsIHNob3VsZENvbnRpbnVlLCBwYXlsb2Fk
        KSB7CgogICAgICAgIC8vIEZpcnN0LCBjYWxjdWxhdGUgcGFyYW1zIGZvciB0
        aGlzIHN0YXRlLiBUaGlzIGlzIHVzZWZ1bAogICAgICAgIC8vIGluZm9ybWF0
        aW9uIHRvIHByb3ZpZGUgdG8gdGhlIHZhcmlvdXMgcm91dGUgaG9va3MuCiAg
        ICAgICAgdmFyIHBhcmFtcyA9IHRoaXMucGFyYW1zOwogICAgICAgIGZvckVh
        Y2godGhpcy5oYW5kbGVySW5mb3MsIGZ1bmN0aW9uKGhhbmRsZXJJbmZvKSB7
        CiAgICAgICAgICBwYXJhbXNbaGFuZGxlckluZm8ubmFtZV0gPSBoYW5kbGVy
        SW5mby5wYXJhbXMgfHwge307CiAgICAgICAgfSk7CgogICAgICAgIHBheWxv
        YWQgPSBwYXlsb2FkIHx8IHt9OwogICAgICAgIHBheWxvYWQucmVzb2x2ZUlu
        ZGV4ID0gMDsKCiAgICAgICAgdmFyIGN1cnJlbnRTdGF0ZSA9IHRoaXM7CiAg
        ICAgICAgdmFyIHdhc0Fib3J0ZWQgPSBmYWxzZTsKCiAgICAgICAgLy8gVGhl
        IHByZWx1ZGUgUlNWUC5yZXNvbHZlKCkgYXN5bmNzIHVzIGludG8gdGhlIHBy
        b21pc2UgbGFuZC4KICAgICAgICByZXR1cm4gcmVzb2x2ZSgpLnRoZW4ocmVz
        b2x2ZU9uZUhhbmRsZXJJbmZvKVsnY2F0Y2gnXShoYW5kbGVFcnJvcik7Cgog
        ICAgICAgIGZ1bmN0aW9uIGlubmVyU2hvdWxkQ29udGludWUoKSB7CiAgICAg
        ICAgICByZXR1cm4gcmVzb2x2ZShzaG91bGRDb250aW51ZSgpKVsnY2F0Y2gn
        XShmdW5jdGlvbihyZWFzb24pIHsKICAgICAgICAgICAgLy8gV2UgZGlzdGlu
        Z3Vpc2ggYmV0d2VlbiBlcnJvcnMgdGhhdCBvY2N1cnJlZAogICAgICAgICAg
        ICAvLyBkdXJpbmcgcmVzb2x1dGlvbiAoZS5nLiBiZWZvcmVNb2RlbC9tb2Rl
        bC9hZnRlck1vZGVsKSwKICAgICAgICAgICAgLy8gYW5kIGFib3J0cyBkdWUg
        dG8gYSByZWplY3RpbmcgcHJvbWlzZSBmcm9tIHNob3VsZENvbnRpbnVlKCku
        CiAgICAgICAgICAgIHdhc0Fib3J0ZWQgPSB0cnVlOwogICAgICAgICAgICB0
        aHJvdyByZWFzb247CiAgICAgICAgICB9KTsKICAgICAgICB9CgogICAgICAg
        IGZ1bmN0aW9uIGhhbmRsZUVycm9yKGVycm9yKSB7CiAgICAgICAgICAvLyBU
        aGlzIGlzIHRoZSBvbmx5IHBvc3NpYmxlCiAgICAgICAgICAvLyByZWplY3Qg
        dmFsdWUgb2YgVHJhbnNpdGlvblN0YXRlI3Jlc29sdmUKICAgICAgICAgIHRo
        cm93IHsKICAgICAgICAgICAgZXJyb3I6IGVycm9yLAogICAgICAgICAgICBo
        YW5kbGVyV2l0aEVycm9yOiBjdXJyZW50U3RhdGUuaGFuZGxlckluZm9zW3Bh
        eWxvYWQucmVzb2x2ZUluZGV4XS5oYW5kbGVyLAogICAgICAgICAgICB3YXNB
        Ym9ydGVkOiB3YXNBYm9ydGVkLAogICAgICAgICAgICBzdGF0ZTogY3VycmVu
        dFN0YXRlCiAgICAgICAgICB9OwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rp
        b24gcHJvY2VlZChyZXNvbHZlZEhhbmRsZXJJbmZvKSB7CiAgICAgICAgICAv
        LyBTd2FwIHRoZSBwcmV2aW91c2x5IHVucmVzb2x2ZWQgaGFuZGxlckluZm8g
        d2l0aAogICAgICAgICAgLy8gdGhlIHJlc29sdmVkIGhhbmRsZXJJbmZvCiAg
        ICAgICAgICBjdXJyZW50U3RhdGUuaGFuZGxlckluZm9zW3BheWxvYWQucmVz
        b2x2ZUluZGV4KytdID0gcmVzb2x2ZWRIYW5kbGVySW5mbzsKCiAgICAgICAg
        ICAvLyBDYWxsIHRoZSByZWRpcmVjdCBob29rLiBUaGUgcmVhc29uIHdlIGNh
        bGwgaXQgaGVyZQogICAgICAgICAgLy8gdnMuIGFmdGVyTW9kZWwgaXMgc28g
        dGhhdCByZWRpcmVjdHMgaW50byBjaGlsZAogICAgICAgICAgLy8gcm91dGVz
        IGRvbid0IHJlLXJ1biB0aGUgbW9kZWwgaG9va3MgZm9yIHRoaXMKICAgICAg
        ICAgIC8vIGFscmVhZHktcmVzb2x2ZWQgcm91dGUuCiAgICAgICAgICB2YXIg
        aGFuZGxlciA9IHJlc29sdmVkSGFuZGxlckluZm8uaGFuZGxlcjsKICAgICAg
        ICAgIGlmIChoYW5kbGVyICYmIGhhbmRsZXIucmVkaXJlY3QpIHsKICAgICAg
        ICAgICAgaGFuZGxlci5yZWRpcmVjdChyZXNvbHZlZEhhbmRsZXJJbmZvLmNv
        bnRleHQsIHBheWxvYWQpOwogICAgICAgICAgfQoKICAgICAgICAgIC8vIFBy
        b2NlZWQgYWZ0ZXIgZW5zdXJpbmcgdGhhdCB0aGUgcmVkaXJlY3QgaG9vawog
        ICAgICAgICAgLy8gZGlkbid0IGFib3J0IHRoaXMgdHJhbnNpdGlvbiBieSB0
        cmFuc2l0aW9uaW5nIGVsc2V3aGVyZS4KICAgICAgICAgIHJldHVybiBpbm5l
        clNob3VsZENvbnRpbnVlKCkudGhlbihyZXNvbHZlT25lSGFuZGxlckluZm8p
        OwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gcmVzb2x2ZU9uZUhhbmRs
        ZXJJbmZvKCkgewogICAgICAgICAgaWYgKHBheWxvYWQucmVzb2x2ZUluZGV4
        ID09PSBjdXJyZW50U3RhdGUuaGFuZGxlckluZm9zLmxlbmd0aCkgewogICAg
        ICAgICAgICAvLyBUaGlzIGlzIGlzIHRoZSBvbmx5IHBvc3NpYmxlCiAgICAg
        ICAgICAgIC8vIGZ1bGZpbGwgdmFsdWUgb2YgVHJhbnNpdGlvblN0YXRlI3Jl
        c29sdmUKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICBlcnJv
        cjogbnVsbCwKICAgICAgICAgICAgICBzdGF0ZTogY3VycmVudFN0YXRlCiAg
        ICAgICAgICAgIH07CiAgICAgICAgICB9CgogICAgICAgICAgdmFyIGhhbmRs
        ZXJJbmZvID0gY3VycmVudFN0YXRlLmhhbmRsZXJJbmZvc1twYXlsb2FkLnJl
        c29sdmVJbmRleF07CgogICAgICAgICAgcmV0dXJuIGhhbmRsZXJJbmZvLnJl
        c29sdmUoYXN5bmMsIGlubmVyU2hvdWxkQ29udGludWUsIHBheWxvYWQpCiAg
        ICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbihwcm9jZWVkKTsKICAg
        ICAgICB9CiAgICAgIH0KICAgIH07CgogICAgX19leHBvcnRzX18uVHJhbnNp
        dGlvblN0YXRlID0gVHJhbnNpdGlvblN0YXRlOwogIH0pOwpkZWZpbmUoInJv
        dXRlci90cmFuc2l0aW9uIiwgCiAgWyJyc3ZwIiwiLi9oYW5kbGVyLWluZm8i
        LCIuL3V0aWxzIiwiZXhwb3J0cyJdLAogIGZ1bmN0aW9uKF9fZGVwZW5kZW5j
        eTFfXywgX19kZXBlbmRlbmN5Ml9fLCBfX2RlcGVuZGVuY3kzX18sIF9fZXhw
        b3J0c19fKSB7CiAgICAidXNlIHN0cmljdCI7CiAgICB2YXIgcmVqZWN0ID0g
        X19kZXBlbmRlbmN5MV9fLnJlamVjdDsKICAgIHZhciByZXNvbHZlID0gX19k
        ZXBlbmRlbmN5MV9fLnJlc29sdmU7CiAgICB2YXIgUmVzb2x2ZWRIYW5kbGVy
        SW5mbyA9IF9fZGVwZW5kZW5jeTJfXy5SZXNvbHZlZEhhbmRsZXJJbmZvOwog
        ICAgdmFyIHRyaWdnZXIgPSBfX2RlcGVuZGVuY3kzX18udHJpZ2dlcjsKICAg
        IHZhciBzbGljZSA9IF9fZGVwZW5kZW5jeTNfXy5zbGljZTsKICAgIHZhciBs
        b2cgPSBfX2RlcGVuZGVuY3kzX18ubG9nOwoKICAgIC8qKgogICAgICBAcHJp
        dmF0ZQoKICAgICAgQSBUcmFuc2l0aW9uIGlzIGEgdGhlbm5hYmxlIChhIHBy
        b21pc2UtbGlrZSBvYmplY3QpIHRoYXQgcmVwcmVzZW50cwogICAgICBhbiBh
        dHRlbXB0IHRvIHRyYW5zaXRpb24gdG8gYW5vdGhlciByb3V0ZS4gSXQgY2Fu
        IGJlIGFib3J0ZWQsIGVpdGhlcgogICAgICBleHBsaWNpdGx5IHZpYSBgYWJv
        cnRgIG9yIGJ5IGF0dGVtcHRpbmcgYW5vdGhlciB0cmFuc2l0aW9uIHdoaWxl
        IGEKICAgICAgcHJldmlvdXMgb25lIGlzIHN0aWxsIHVuZGVyd2F5LiBBbiBh
        Ym9ydGVkIHRyYW5zaXRpb24gY2FuIGFsc28KICAgICAgYmUgYHJldHJ5KClg
        ZCBsYXRlci4KICAgICAqLwogICAgZnVuY3Rpb24gVHJhbnNpdGlvbihyb3V0
        ZXIsIGludGVudCwgc3RhdGUsIGVycm9yKSB7CiAgICAgIHZhciB0cmFuc2l0
        aW9uID0gdGhpczsKICAgICAgdGhpcy5zdGF0ZSA9IHN0YXRlIHx8IHJvdXRl
        ci5zdGF0ZTsKICAgICAgdGhpcy5pbnRlbnQgPSBpbnRlbnQ7CiAgICAgIHRo
        aXMucm91dGVyID0gcm91dGVyOwogICAgICB0aGlzLmRhdGEgPSB0aGlzLmlu
        dGVudCAmJiB0aGlzLmludGVudC5kYXRhIHx8IHt9OwogICAgICB0aGlzLnJl
        c29sdmVkTW9kZWxzID0ge307CiAgICAgIHRoaXMucXVlcnlQYXJhbXMgPSB7
        fTsKCiAgICAgIGlmIChlcnJvcikgewogICAgICAgIHRoaXMucHJvbWlzZSA9
        IHJlamVjdChlcnJvcik7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAg
        ICBpZiAoc3RhdGUpIHsKICAgICAgICB0aGlzLnBhcmFtcyA9IHN0YXRlLnBh
        cmFtczsKICAgICAgICB0aGlzLnF1ZXJ5UGFyYW1zID0gc3RhdGUucXVlcnlQ
        YXJhbXM7CgogICAgICAgIHZhciBsZW4gPSBzdGF0ZS5oYW5kbGVySW5mb3Mu
        bGVuZ3RoOwogICAgICAgIGlmIChsZW4pIHsKICAgICAgICAgIHRoaXMudGFy
        Z2V0TmFtZSA9IHN0YXRlLmhhbmRsZXJJbmZvc1tzdGF0ZS5oYW5kbGVySW5m
        b3MubGVuZ3RoLTFdLm5hbWU7CiAgICAgICAgfQoKICAgICAgICBmb3IgKHZh
        ciBpID0gMDsgaSA8IGxlbjsgKytpKSB7CiAgICAgICAgICB2YXIgaGFuZGxl
        ckluZm8gPSBzdGF0ZS5oYW5kbGVySW5mb3NbaV07CiAgICAgICAgICBpZiAo
        IShoYW5kbGVySW5mbyBpbnN0YW5jZW9mIFJlc29sdmVkSGFuZGxlckluZm8p
        KSB7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgICAg
        dGhpcy5waXZvdEhhbmRsZXIgPSBoYW5kbGVySW5mby5oYW5kbGVyOwogICAg
        ICAgIH0KCiAgICAgICAgdGhpcy5zZXF1ZW5jZSA9IFRyYW5zaXRpb24uY3Vy
        cmVudFNlcXVlbmNlKys7CiAgICAgICAgdGhpcy5wcm9taXNlID0gc3RhdGUu
        cmVzb2x2ZShyb3V0ZXIuYXN5bmMsIGNoZWNrRm9yQWJvcnQsIHRoaXMpWydj
        YXRjaCddKGZ1bmN0aW9uKHJlc3VsdCkgewogICAgICAgICAgaWYgKHJlc3Vs
        dC53YXNBYm9ydGVkKSB7CiAgICAgICAgICAgIHRocm93IGxvZ0Fib3J0KHRy
        YW5zaXRpb24pOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdHJh
        bnNpdGlvbi50cmlnZ2VyKCdlcnJvcicsIHJlc3VsdC5lcnJvciwgdHJhbnNp
        dGlvbiwgcmVzdWx0LmhhbmRsZXJXaXRoRXJyb3IpOwogICAgICAgICAgICB0
        cmFuc2l0aW9uLmFib3J0KCk7CiAgICAgICAgICAgIHRocm93IHJlc3VsdC5l
        cnJvcjsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsK
        ICAgICAgICB0aGlzLnByb21pc2UgPSByZXNvbHZlKHRoaXMuc3RhdGUpOwog
        ICAgICAgIHRoaXMucGFyYW1zID0ge307CiAgICAgIH0KCiAgICAgIGZ1bmN0
        aW9uIGNoZWNrRm9yQWJvcnQoKSB7CiAgICAgICAgaWYgKHRyYW5zaXRpb24u
        aXNBYm9ydGVkKSB7CiAgICAgICAgICByZXR1cm4gcmVqZWN0KCk7CiAgICAg
        ICAgfQogICAgICB9CiAgICB9CgogICAgVHJhbnNpdGlvbi5jdXJyZW50U2Vx
        dWVuY2UgPSAwOwoKICAgIFRyYW5zaXRpb24ucHJvdG90eXBlID0gewogICAg
        ICB0YXJnZXROYW1lOiBudWxsLAogICAgICB1cmxNZXRob2Q6ICd1cGRhdGUn
        LAogICAgICBpbnRlbnQ6IG51bGwsCiAgICAgIHBhcmFtczogbnVsbCwKICAg
        ICAgcGl2b3RIYW5kbGVyOiBudWxsLAogICAgICByZXNvbHZlSW5kZXg6IDAs
        CiAgICAgIGhhbmRsZXJJbmZvczogbnVsbCwKICAgICAgcmVzb2x2ZWRNb2Rl
        bHM6IG51bGwsCiAgICAgIGlzQWN0aXZlOiB0cnVlLAogICAgICBzdGF0ZTog
        bnVsbCwKCiAgICAgIC8qKgogICAgICAgIEBwdWJsaWMKCiAgICAgICAgVGhl
        IFRyYW5zaXRpb24ncyBpbnRlcm5hbCBwcm9taXNlLiBDYWxsaW5nIGAudGhl
        bmAgb24gdGhpcyBwcm9wZXJ0eQogICAgICAgIGlzIHRoYXQgc2FtZSBhcyBj
        YWxsaW5nIGAudGhlbmAgb24gdGhlIFRyYW5zaXRpb24gb2JqZWN0IGl0c2Vs
        ZiwgYnV0CiAgICAgICAgdGhpcyBwcm9wZXJ0eSBpcyBleHBvc2VkIGZvciB3
        aGVuIHlvdSB3YW50IHRvIHBhc3MgYXJvdW5kIGEKICAgICAgICBUcmFuc2l0
        aW9uJ3MgcHJvbWlzZSwgYnV0IG5vdCB0aGUgVHJhbnNpdGlvbiBvYmplY3Qg
        aXRzZWxmLCBzaW5jZQogICAgICAgIFRyYW5zaXRpb24gb2JqZWN0IGNhbiBi
        ZSBleHRlcm5hbGx5IGBhYm9ydGBlZCwgd2hpbGUgdGhlIHByb21pc2UKICAg
        ICAgICBjYW5ub3QuCiAgICAgICAqLwogICAgICBwcm9taXNlOiBudWxsLAoK
        ICAgICAgLyoqCiAgICAgICAgQHB1YmxpYwoKICAgICAgICBDdXN0b20gc3Rh
        dGUgY2FuIGJlIHN0b3JlZCBvbiBhIFRyYW5zaXRpb24ncyBgZGF0YWAgb2Jq
        ZWN0LgogICAgICAgIFRoaXMgY2FuIGJlIHVzZWZ1bCBmb3IgZGVjb3JhdGlu
        ZyBhIFRyYW5zaXRpb24gd2l0aGluIGFuIGVhcmxpZXIKICAgICAgICBob29r
        IGFuZCBzaGFyZWQgd2l0aCBhIGxhdGVyIGhvb2suIFByb3BlcnRpZXMgc2V0
        IG9uIGBkYXRhYCB3aWxsCiAgICAgICAgYmUgY29waWVkIHRvIG5ldyB0cmFu
        c2l0aW9ucyBnZW5lcmF0ZWQgYnkgY2FsbGluZyBgcmV0cnlgIG9uIHRoaXMK
        ICAgICAgICB0cmFuc2l0aW9uLgogICAgICAgKi8KICAgICAgZGF0YTogbnVs
        bCwKCiAgICAgIC8qKgogICAgICAgIEBwdWJsaWMKCiAgICAgICAgQSBzdGFu
        ZGFyZCBwcm9taXNlIGhvb2sgdGhhdCByZXNvbHZlcyBpZiB0aGUgdHJhbnNp
        dGlvbgogICAgICAgIHN1Y2NlZWRzIGFuZCByZWplY3RzIGlmIGl0IGZhaWxz
        L3JlZGlyZWN0cy9hYm9ydHMuCgogICAgICAgIEZvcndhcmRzIHRvIHRoZSBp
        bnRlcm5hbCBgcHJvbWlzZWAgcHJvcGVydHkgd2hpY2ggeW91IGNhbgogICAg
        ICAgIHVzZSBpbiBzaXR1YXRpb25zIHdoZXJlIHlvdSB3YW50IHRvIHBhc3Mg
        YXJvdW5kIGEgdGhlbm5hYmxlLAogICAgICAgIGJ1dCBub3QgdGhlIFRyYW5z
        aXRpb24gaXRzZWxmLgoKICAgICAgICBAcGFyYW0ge0Z1bmN0aW9ufSBzdWNj
        ZXNzCiAgICAgICAgQHBhcmFtIHtGdW5jdGlvbn0gZmFpbHVyZQogICAgICAg
        Ki8KICAgICAgdGhlbjogZnVuY3Rpb24oc3VjY2VzcywgZmFpbHVyZSkgewog
        ICAgICAgIHJldHVybiB0aGlzLnByb21pc2UudGhlbihzdWNjZXNzLCBmYWls
        dXJlKTsKICAgICAgfSwKCiAgICAgIC8qKgogICAgICAgIEBwdWJsaWMKCiAg
        ICAgICAgQWJvcnRzIHRoZSBUcmFuc2l0aW9uLiBOb3RlIHlvdSBjYW4gYWxz
        byBpbXBsaWNpdGx5IGFib3J0IGEgdHJhbnNpdGlvbgogICAgICAgIGJ5IGlu
        aXRpYXRpbmcgYW5vdGhlciB0cmFuc2l0aW9uIHdoaWxlIGEgcHJldmlvdXMg
        b25lIGlzIHVuZGVyd2F5LgogICAgICAgKi8KICAgICAgYWJvcnQ6IGZ1bmN0
        aW9uKCkgewogICAgICAgIGlmICh0aGlzLmlzQWJvcnRlZCkgeyByZXR1cm4g
        dGhpczsgfQogICAgICAgIGxvZyh0aGlzLnJvdXRlciwgdGhpcy5zZXF1ZW5j
        ZSwgdGhpcy50YXJnZXROYW1lICsgIjogdHJhbnNpdGlvbiB3YXMgYWJvcnRl
        ZCIpOwogICAgICAgIHRoaXMuaXNBYm9ydGVkID0gdHJ1ZTsKICAgICAgICB0
        aGlzLmlzQWN0aXZlID0gZmFsc2U7CiAgICAgICAgdGhpcy5yb3V0ZXIuYWN0
        aXZlVHJhbnNpdGlvbiA9IG51bGw7CiAgICAgICAgcmV0dXJuIHRoaXM7CiAg
        ICAgIH0sCgogICAgICAvKioKICAgICAgICBAcHVibGljCgogICAgICAgIFJl
        dHJpZXMgYSBwcmV2aW91c2x5LWFib3J0ZWQgdHJhbnNpdGlvbiAobWFraW5n
        IHN1cmUgdG8gYWJvcnQgdGhlCiAgICAgICAgdHJhbnNpdGlvbiBpZiBpdCdz
        IHN0aWxsIGFjdGl2ZSkuIFJldHVybnMgYSBuZXcgdHJhbnNpdGlvbiB0aGF0
        CiAgICAgICAgcmVwcmVzZW50cyB0aGUgbmV3IGF0dGVtcHQgdG8gdHJhbnNp
        dGlvbi4KICAgICAgICovCiAgICAgIHJldHJ5OiBmdW5jdGlvbigpIHsKICAg
        ICAgICAvLyBUT0RPOiBhZGQgdGVzdHMgZm9yIG1lcmdlZCBzdGF0ZSByZXRy
        eSgpcwogICAgICAgIHRoaXMuYWJvcnQoKTsKICAgICAgICByZXR1cm4gdGhp
        cy5yb3V0ZXIudHJhbnNpdGlvbkJ5SW50ZW50KHRoaXMuaW50ZW50LCBmYWxz
        ZSk7CiAgICAgIH0sCgogICAgICAvKioKICAgICAgICBAcHVibGljCgogICAg
        ICAgIFNldHMgdGhlIFVSTC1jaGFuZ2luZyBtZXRob2QgdG8gYmUgZW1wbG95
        ZWQgYXQgdGhlIGVuZCBvZiBhCiAgICAgICAgc3VjY2Vzc2Z1bCB0cmFuc2l0
        aW9uLiBCeSBkZWZhdWx0LCBhIG5ldyBUcmFuc2l0aW9uIHdpbGwganVzdAog
        ICAgICAgIHVzZSBgdXBkYXRlVVJMYCwgYnV0IHBhc3NpbmcgJ3JlcGxhY2Un
        IHRvIHRoaXMgbWV0aG9kIHdpbGwKICAgICAgICBjYXVzZSB0aGUgVVJMIHRv
        IHVwZGF0ZSB1c2luZyAncmVwbGFjZVdpdGgnIGluc3RlYWQuIE9taXR0aW5n
        CiAgICAgICAgYSBwYXJhbWV0ZXIgd2lsbCBkaXNhYmxlIHRoZSBVUkwgY2hh
        bmdlLCBhbGxvd2luZyBmb3IgdHJhbnNpdGlvbnMKICAgICAgICB0aGF0IGRv
        bid0IHVwZGF0ZSB0aGUgVVJMIGF0IGNvbXBsZXRpb24gKHRoaXMgaXMgYWxz
        byB1c2VkIGZvcgogICAgICAgIGhhbmRsZVVSTCwgc2luY2UgdGhlIFVSTCBo
        YXMgYWxyZWFkeSBjaGFuZ2VkIGJlZm9yZSB0aGUKICAgICAgICB0cmFuc2l0
        aW9uIHRvb2sgcGxhY2UpLgoKICAgICAgICBAcGFyYW0ge1N0cmluZ30gbWV0
        aG9kIHRoZSB0eXBlIG9mIFVSTC1jaGFuZ2luZyBtZXRob2QgdG8gdXNlCiAg
        ICAgICAgICBhdCB0aGUgZW5kIG9mIGEgdHJhbnNpdGlvbi4gQWNjZXB0ZWQg
        dmFsdWVzIGFyZSAncmVwbGFjZScsCiAgICAgICAgICBmYWxzeSB2YWx1ZXMs
        IG9yIGFueSBvdGhlciBub24tZmFsc3kgdmFsdWUgKHdoaWNoIGlzCiAgICAg
        ICAgICBpbnRlcnByZXRlZCBhcyBhbiB1cGRhdGVVUkwgdHJhbnNpdGlvbiku
        CgogICAgICAgIEByZXR1cm4ge1RyYW5zaXRpb259IHRoaXMgdHJhbnNpdGlv
        bgogICAgICAgKi8KICAgICAgbWV0aG9kOiBmdW5jdGlvbihtZXRob2QpIHsK
        ICAgICAgICB0aGlzLnVybE1ldGhvZCA9IG1ldGhvZDsKICAgICAgICByZXR1
        cm4gdGhpczsKICAgICAgfSwKCiAgICAgIC8qKgogICAgICAgIEBwdWJsaWMK
        CiAgICAgICAgRmlyZXMgYW4gZXZlbnQgb24gdGhlIGN1cnJlbnQgbGlzdCBv
        ZiByZXNvbHZlZC9yZXNvbHZpbmcKICAgICAgICBoYW5kbGVycyB3aXRoaW4g
        dGhpcyB0cmFuc2l0aW9uLiBVc2VmdWwgZm9yIGZpcmluZyBldmVudHMKICAg
        ICAgICBvbiByb3V0ZSBoaWVyYXJjaGllcyB0aGF0IGhhdmVuJ3QgZnVsbHkg
        YmVlbiBlbnRlcmVkIHlldC4KCiAgICAgICAgTm90ZTogVGhpcyBtZXRob2Qg
        aXMgYWxzbyBhbGlhc2VkIGFzIGBzZW5kYAoKICAgICAgICBAcGFyYW0ge0Jv
        b2xlYW59IGlnbm9yZUZhaWx1cmUgdGhlIG5hbWUgb2YgdGhlIGV2ZW50IHRv
        IGZpcmUKICAgICAgICBAcGFyYW0ge1N0cmluZ30gbmFtZSB0aGUgbmFtZSBv
        ZiB0aGUgZXZlbnQgdG8gZmlyZQogICAgICAgKi8KICAgICAgdHJpZ2dlcjog
        ZnVuY3Rpb24gKGlnbm9yZUZhaWx1cmUpIHsKICAgICAgICB2YXIgYXJncyA9
        IHNsaWNlLmNhbGwoYXJndW1lbnRzKTsKICAgICAgICBpZiAodHlwZW9mIGln
        bm9yZUZhaWx1cmUgPT09ICdib29sZWFuJykgewogICAgICAgICAgYXJncy5z
        aGlmdCgpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAvLyBUaHJvdyBl
        cnJvcnMgb24gdW5oYW5kbGVkIHRyaWdnZXIgZXZlbnRzIGJ5IGRlZmF1bHQK
        ICAgICAgICAgIGlnbm9yZUZhaWx1cmUgPSBmYWxzZTsKICAgICAgICB9CiAg
        ICAgICAgdHJpZ2dlcih0aGlzLnJvdXRlciwgdGhpcy5zdGF0ZS5oYW5kbGVy
        SW5mb3Muc2xpY2UoMCwgdGhpcy5yZXNvbHZlSW5kZXggKyAxKSwgaWdub3Jl
        RmFpbHVyZSwgYXJncyk7CiAgICAgIH0sCgogICAgICAvKioKICAgICAgICBA
        cHVibGljCgogICAgICAgIFRyYW5zaXRpb25zIGFyZSBhYm9ydGVkIGFuZCB0
        aGVpciBwcm9taXNlcyByZWplY3RlZAogICAgICAgIHdoZW4gcmVkaXJlY3Rz
        IG9jY3VyOyB0aGlzIG1ldGhvZCByZXR1cm5zIGEgcHJvbWlzZQogICAgICAg
        IHRoYXQgd2lsbCBmb2xsb3cgYW55IHJlZGlyZWN0cyB0aGF0IG9jY3VyIGFu
        ZCBmdWxmaWxsCiAgICAgICAgd2l0aCB0aGUgdmFsdWUgZnVsZmlsbGVkIGJ5
        IGFueSByZWRpcmVjdGluZyB0cmFuc2l0aW9ucwogICAgICAgIHRoYXQgb2Nj
        dXIuCgogICAgICAgIEByZXR1cm4ge1Byb21pc2V9IGEgcHJvbWlzZSB0aGF0
        IGZ1bGZpbGxzIHdpdGggdGhlIHNhbWUKICAgICAgICAgIHZhbHVlIHRoYXQg
        dGhlIGZpbmFsIHJlZGlyZWN0aW5nIHRyYW5zaXRpb24gZnVsZmlsbHMgd2l0
        aAogICAgICAgKi8KICAgICAgZm9sbG93UmVkaXJlY3RzOiBmdW5jdGlvbigp
        IHsKICAgICAgICB2YXIgcm91dGVyID0gdGhpcy5yb3V0ZXI7CiAgICAgICAg
        cmV0dXJuIHRoaXMucHJvbWlzZVsnY2F0Y2gnXShmdW5jdGlvbihyZWFzb24p
        IHsKICAgICAgICAgIGlmIChyb3V0ZXIuYWN0aXZlVHJhbnNpdGlvbikgewog
        ICAgICAgICAgICByZXR1cm4gcm91dGVyLmFjdGl2ZVRyYW5zaXRpb24uZm9s
        bG93UmVkaXJlY3RzKCk7CiAgICAgICAgICB9CiAgICAgICAgICB0aHJvdyBy
        ZWFzb247CiAgICAgICAgfSk7CiAgICAgIH0sCgogICAgICB0b1N0cmluZzog
        ZnVuY3Rpb24oKSB7CiAgICAgICAgcmV0dXJuICJUcmFuc2l0aW9uIChzZXF1
        ZW5jZSAiICsgdGhpcy5zZXF1ZW5jZSArICIpIjsKICAgICAgfSwKCiAgICAg
        IC8qKgogICAgICAgIEBwcml2YXRlCiAgICAgICAqLwogICAgICBsb2c6IGZ1
        bmN0aW9uKG1lc3NhZ2UpIHsKICAgICAgICBsb2codGhpcy5yb3V0ZXIsIHRo
        aXMuc2VxdWVuY2UsIG1lc3NhZ2UpOwogICAgICB9CiAgICB9OwoKICAgIC8v
        IEFsaWFzICd0cmlnZ2VyJyBhcyAnc2VuZCcKICAgIFRyYW5zaXRpb24ucHJv
        dG90eXBlLnNlbmQgPSBUcmFuc2l0aW9uLnByb3RvdHlwZS50cmlnZ2VyOwoK
        ICAgIC8qKgogICAgICBAcHJpdmF0ZQoKICAgICAgTG9ncyBhbmQgcmV0dXJu
        cyBhIFRyYW5zaXRpb25BYm9ydGVkIGVycm9yLgogICAgICovCiAgICBmdW5j
        dGlvbiBsb2dBYm9ydCh0cmFuc2l0aW9uKSB7CiAgICAgIGxvZyh0cmFuc2l0
        aW9uLnJvdXRlciwgdHJhbnNpdGlvbi5zZXF1ZW5jZSwgImRldGVjdGVkIGFi
        b3J0LiIpOwogICAgICByZXR1cm4gbmV3IFRyYW5zaXRpb25BYm9ydGVkKCk7
        CiAgICB9CgogICAgZnVuY3Rpb24gVHJhbnNpdGlvbkFib3J0ZWQobWVzc2Fn
        ZSkgewogICAgICB0aGlzLm1lc3NhZ2UgPSAobWVzc2FnZSB8fCAiVHJhbnNp
        dGlvbkFib3J0ZWQiKTsKICAgICAgdGhpcy5uYW1lID0gIlRyYW5zaXRpb25B
        Ym9ydGVkIjsKICAgIH0KCiAgICBfX2V4cG9ydHNfXy5UcmFuc2l0aW9uID0g
        VHJhbnNpdGlvbjsKICAgIF9fZXhwb3J0c19fLmxvZ0Fib3J0ID0gbG9nQWJv
        cnQ7CiAgICBfX2V4cG9ydHNfXy5UcmFuc2l0aW9uQWJvcnRlZCA9IFRyYW5z
        aXRpb25BYm9ydGVkOwogIH0pOwpkZWZpbmUoInJvdXRlci91dGlscyIsIAog
        IFsiZXhwb3J0cyJdLAogIGZ1bmN0aW9uKF9fZXhwb3J0c19fKSB7CiAgICAi
        dXNlIHN0cmljdCI7CiAgICB2YXIgc2xpY2UgPSBBcnJheS5wcm90b3R5cGUu
        c2xpY2U7CgogICAgZnVuY3Rpb24gbWVyZ2UoaGFzaCwgb3RoZXIpIHsKICAg
        ICAgZm9yICh2YXIgcHJvcCBpbiBvdGhlcikgewogICAgICAgIGlmIChvdGhl
        ci5oYXNPd25Qcm9wZXJ0eShwcm9wKSkgeyBoYXNoW3Byb3BdID0gb3RoZXJb
        cHJvcF07IH0KICAgICAgfQogICAgfQoKICAgIHZhciBvQ3JlYXRlID0gT2Jq
        ZWN0LmNyZWF0ZSB8fCBmdW5jdGlvbihwcm90bykgewogICAgICBmdW5jdGlv
        biBGKCkge30KICAgICAgRi5wcm90b3R5cGUgPSBwcm90bzsKICAgICAgcmV0
        dXJuIG5ldyBGKCk7CiAgICB9OwoKICAgIC8qKgogICAgICBAcHJpdmF0ZQoK
        ICAgICAgRXh0cmFjdHMgcXVlcnkgcGFyYW1zIGZyb20gdGhlIGVuZCBvZiBh
        biBhcnJheQogICAgKiovCiAgICBmdW5jdGlvbiBleHRyYWN0UXVlcnlQYXJh
        bXMoYXJyYXkpIHsKICAgICAgdmFyIGxlbiA9IChhcnJheSAmJiBhcnJheS5s
        ZW5ndGgpLCBoZWFkLCBxdWVyeVBhcmFtczsKCiAgICAgIGlmKGxlbiAmJiBs
        ZW4gPiAwICYmIGFycmF5W2xlbiAtIDFdICYmIGFycmF5W2xlbiAtIDFdLmhh
        c093blByb3BlcnR5KCdxdWVyeVBhcmFtcycpKSB7CiAgICAgICAgcXVlcnlQ
        YXJhbXMgPSBhcnJheVtsZW4gLSAxXS5xdWVyeVBhcmFtczsKICAgICAgICBo
        ZWFkID0gc2xpY2UuY2FsbChhcnJheSwgMCwgbGVuIC0gMSk7CiAgICAgICAg
        cmV0dXJuIFtoZWFkLCBxdWVyeVBhcmFtc107CiAgICAgIH0gZWxzZSB7CiAg
        ICAgICAgcmV0dXJuIFthcnJheSwgbnVsbF07CiAgICAgIH0KICAgIH0KCiAg
        ICAvKioKICAgICAgQHByaXZhdGUKICAgICAqLwogICAgZnVuY3Rpb24gbG9n
        KHJvdXRlciwgc2VxdWVuY2UsIG1zZykgewogICAgICBpZiAoIXJvdXRlci5s
        b2cpIHsgcmV0dXJuOyB9CgogICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9
        PT0gMykgewogICAgICAgIHJvdXRlci5sb2coIlRyYW5zaXRpb24gIyIgKyBz
        ZXF1ZW5jZSArICI6ICIgKyBtc2cpOwogICAgICB9IGVsc2UgewogICAgICAg
        IG1zZyA9IHNlcXVlbmNlOwogICAgICAgIHJvdXRlci5sb2cobXNnKTsKICAg
        ICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIGJpbmQoZm4sIGNvbnRleHQpIHsK
        ICAgICAgdmFyIGJvdW5kQXJncyA9IGFyZ3VtZW50czsKICAgICAgcmV0dXJu
        IGZ1bmN0aW9uKHZhbHVlKSB7CiAgICAgICAgdmFyIGFyZ3MgPSBzbGljZS5j
        YWxsKGJvdW5kQXJncywgMik7CiAgICAgICAgYXJncy5wdXNoKHZhbHVlKTsK
        ICAgICAgICByZXR1cm4gZm4uYXBwbHkoY29udGV4dCwgYXJncyk7CiAgICAg
        IH07CiAgICB9CgogICAgZnVuY3Rpb24gaXNQYXJhbShvYmplY3QpIHsKICAg
        ICAgcmV0dXJuICh0eXBlb2Ygb2JqZWN0ID09PSAic3RyaW5nIiB8fCBvYmpl
        Y3QgaW5zdGFuY2VvZiBTdHJpbmcgfHwgdHlwZW9mIG9iamVjdCA9PT0gIm51
        bWJlciIgfHwgb2JqZWN0IGluc3RhbmNlb2YgTnVtYmVyKTsKICAgIH0KCgog
        ICAgZnVuY3Rpb24gZm9yRWFjaChhcnJheSwgY2FsbGJhY2spIHsKICAgICAg
        Zm9yICh2YXIgaT0wLCBsPWFycmF5Lmxlbmd0aDsgaTxsICYmIGZhbHNlICE9
        PSBjYWxsYmFjayhhcnJheVtpXSk7IGkrKykgeyB9CiAgICB9CgogICAgLyoq
        CiAgICAgIEBwcml2YXRlCgogICAgICBTZXJpYWxpemVzIGEgaGFuZGxlciB1
        c2luZyBpdHMgY3VzdG9tIGBzZXJpYWxpemVgIG1ldGhvZCBvcgogICAgICBi
        eSBhIGRlZmF1bHQgdGhhdCBsb29rcyB1cCB0aGUgZXhwZWN0ZWQgcHJvcGVy
        dHkgbmFtZSBmcm9tCiAgICAgIHRoZSBkeW5hbWljIHNlZ21lbnQuCgogICAg
        ICBAcGFyYW0ge09iamVjdH0gaGFuZGxlciBhIHJvdXRlciBoYW5kbGVyCiAg
        ICAgIEBwYXJhbSB7T2JqZWN0fSBtb2RlbCB0aGUgbW9kZWwgdG8gYmUgc2Vy
        aWFsaXplZCBmb3IgdGhpcyBoYW5kbGVyCiAgICAgIEBwYXJhbSB7QXJyYXlb
        T2JqZWN0XX0gbmFtZXMgdGhlIG5hbWVzIGFycmF5IGF0dGFjaGVkIHRvIGFu
        CiAgICAgICAgaGFuZGxlciBvYmplY3QgcmV0dXJuZWQgZnJvbSByb3V0ZXIu
        cmVjb2duaXplci5oYW5kbGVyc0ZvcigpCiAgICAqLwogICAgZnVuY3Rpb24g
        c2VyaWFsaXplKGhhbmRsZXIsIG1vZGVsLCBuYW1lcykgewogICAgICB2YXIg
        b2JqZWN0ID0ge307CiAgICAgIGlmIChpc1BhcmFtKG1vZGVsKSkgewogICAg
        ICAgIG9iamVjdFtuYW1lc1swXV0gPSBtb2RlbDsKICAgICAgICByZXR1cm4g
        b2JqZWN0OwogICAgICB9CgogICAgICAvLyBVc2UgY3VzdG9tIHNlcmlhbGl6
        ZSBpZiBpdCBleGlzdHMuCiAgICAgIGlmIChoYW5kbGVyLnNlcmlhbGl6ZSkg
        ewogICAgICAgIHJldHVybiBoYW5kbGVyLnNlcmlhbGl6ZShtb2RlbCwgbmFt
        ZXMpOwogICAgICB9CgogICAgICBpZiAobmFtZXMubGVuZ3RoICE9PSAxKSB7
        IHJldHVybjsgfQoKICAgICAgdmFyIG5hbWUgPSBuYW1lc1swXTsKCiAgICAg
        IGlmICgvX2lkJC8udGVzdChuYW1lKSkgewogICAgICAgIG9iamVjdFtuYW1l
        XSA9IG1vZGVsLmlkOwogICAgICB9IGVsc2UgewogICAgICAgIG9iamVjdFtu
        YW1lXSA9IG1vZGVsOwogICAgICB9CiAgICAgIHJldHVybiBvYmplY3Q7CiAg
        ICB9CgogICAgZnVuY3Rpb24gdHJpZ2dlcihyb3V0ZXIsIGhhbmRsZXJJbmZv
        cywgaWdub3JlRmFpbHVyZSwgYXJncykgewogICAgICBpZiAocm91dGVyLnRy
        aWdnZXJFdmVudCkgewogICAgICAgIHJvdXRlci50cmlnZ2VyRXZlbnQoaGFu
        ZGxlckluZm9zLCBpZ25vcmVGYWlsdXJlLCBhcmdzKTsKICAgICAgICByZXR1
        cm47CiAgICAgIH0KCiAgICAgIHZhciBuYW1lID0gYXJncy5zaGlmdCgpOwoK
        ICAgICAgaWYgKCFoYW5kbGVySW5mb3MpIHsKICAgICAgICBpZiAoaWdub3Jl
        RmFpbHVyZSkgeyByZXR1cm47IH0KICAgICAgICB0aHJvdyBuZXcgRXJyb3Io
        IkNvdWxkIG5vdCB0cmlnZ2VyIGV2ZW50ICciICsgbmFtZSArICInLiBUaGVy
        ZSBhcmUgbm8gYWN0aXZlIGhhbmRsZXJzIik7CiAgICAgIH0KCiAgICAgIHZh
        ciBldmVudFdhc0hhbmRsZWQgPSBmYWxzZTsKCiAgICAgIGZvciAodmFyIGk9
        aGFuZGxlckluZm9zLmxlbmd0aC0xOyBpPj0wOyBpLS0pIHsKICAgICAgICB2
        YXIgaGFuZGxlckluZm8gPSBoYW5kbGVySW5mb3NbaV0sCiAgICAgICAgICAg
        IGhhbmRsZXIgPSBoYW5kbGVySW5mby5oYW5kbGVyOwoKICAgICAgICBpZiAo
        aGFuZGxlci5ldmVudHMgJiYgaGFuZGxlci5ldmVudHNbbmFtZV0pIHsKICAg
        ICAgICAgIGlmIChoYW5kbGVyLmV2ZW50c1tuYW1lXS5hcHBseShoYW5kbGVy
        LCBhcmdzKSA9PT0gdHJ1ZSkgewogICAgICAgICAgICBldmVudFdhc0hhbmRs
        ZWQgPSB0cnVlOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmV0
        dXJuOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQoKICAgICAgaWYg
        KCFldmVudFdhc0hhbmRsZWQgJiYgIWlnbm9yZUZhaWx1cmUpIHsKICAgICAg
        ICB0aHJvdyBuZXcgRXJyb3IoIk5vdGhpbmcgaGFuZGxlZCB0aGUgZXZlbnQg
        JyIgKyBuYW1lICsgIicuIik7CiAgICAgIH0KICAgIH0KCgogICAgZnVuY3Rp
        b24gZ2V0Q2hhbmdlbGlzdChvbGRPYmplY3QsIG5ld09iamVjdCkgewogICAg
        ICB2YXIga2V5OwogICAgICB2YXIgcmVzdWx0cyA9IHsKICAgICAgICBhbGw6
        IHt9LAogICAgICAgIGNoYW5nZWQ6IHt9LAogICAgICAgIHJlbW92ZWQ6IHt9
        CiAgICAgIH07CgogICAgICBtZXJnZShyZXN1bHRzLmFsbCwgbmV3T2JqZWN0
        KTsKCiAgICAgIHZhciBkaWRDaGFuZ2UgPSBmYWxzZTsKCiAgICAgIC8vIENh
        bGN1bGF0ZSByZW1vdmFscwogICAgICBmb3IgKGtleSBpbiBvbGRPYmplY3Qp
        IHsKICAgICAgICBpZiAob2xkT2JqZWN0Lmhhc093blByb3BlcnR5KGtleSkp
        IHsKICAgICAgICAgIGlmICghbmV3T2JqZWN0Lmhhc093blByb3BlcnR5KGtl
        eSkpIHsKICAgICAgICAgICAgZGlkQ2hhbmdlID0gdHJ1ZTsKICAgICAgICAg
        ICAgcmVzdWx0cy5yZW1vdmVkW2tleV0gPSBvbGRPYmplY3Rba2V5XTsKICAg
        ICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KCiAgICAgIC8vIENhbGN1bGF0
        ZSBjaGFuZ2VzCiAgICAgIGZvciAoa2V5IGluIG5ld09iamVjdCkgewogICAg
        ICAgIGlmIChuZXdPYmplY3QuaGFzT3duUHJvcGVydHkoa2V5KSkgewogICAg
        ICAgICAgaWYgKG9sZE9iamVjdFtrZXldICE9PSBuZXdPYmplY3Rba2V5XSkg
        ewogICAgICAgICAgICByZXN1bHRzLmNoYW5nZWRba2V5XSA9IG5ld09iamVj
        dFtrZXldOwogICAgICAgICAgICBkaWRDaGFuZ2UgPSB0cnVlOwogICAgICAg
        ICAgfQogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIGRpZENoYW5n
        ZSAmJiByZXN1bHRzOwogICAgfQoKICAgIF9fZXhwb3J0c19fLnRyaWdnZXIg
        PSB0cmlnZ2VyOwogICAgX19leHBvcnRzX18ubG9nID0gbG9nOwogICAgX19l
        eHBvcnRzX18ub0NyZWF0ZSA9IG9DcmVhdGU7CiAgICBfX2V4cG9ydHNfXy5t
        ZXJnZSA9IG1lcmdlOwogICAgX19leHBvcnRzX18uZXh0cmFjdFF1ZXJ5UGFy
        YW1zID0gZXh0cmFjdFF1ZXJ5UGFyYW1zOwogICAgX19leHBvcnRzX18uYmlu
        ZCA9IGJpbmQ7CiAgICBfX2V4cG9ydHNfXy5pc1BhcmFtID0gaXNQYXJhbTsK
        ICAgIF9fZXhwb3J0c19fLmZvckVhY2ggPSBmb3JFYWNoOwogICAgX19leHBv
        cnRzX18uc2xpY2UgPSBzbGljZTsKICAgIF9fZXhwb3J0c19fLnNlcmlhbGl6
        ZSA9IHNlcmlhbGl6ZTsKICAgIF9fZXhwb3J0c19fLmdldENoYW5nZWxpc3Qg
        PSBnZXRDaGFuZ2VsaXN0OwogIH0pOwpkZWZpbmUoInJvdXRlciIsIAogIFsi
        Li9yb3V0ZXIvcm91dGVyIiwiZXhwb3J0cyJdLAogIGZ1bmN0aW9uKF9fZGVw
        ZW5kZW5jeTFfXywgX19leHBvcnRzX18pIHsKICAgICJ1c2Ugc3RyaWN0IjsK
        ICAgIHZhciBSb3V0ZXIgPSBfX2RlcGVuZGVuY3kxX18uUm91dGVyOwoKICAg
        IF9fZXhwb3J0c19fLlJvdXRlciA9IFJvdXRlcjsKICB9KTsKfSkoKTsKCgoK
        KGZ1bmN0aW9uKCkgewovKioKQG1vZHVsZSBlbWJlcgpAc3VibW9kdWxlIGVt
        YmVyLXJvdXRpbmcKKi8KCmZ1bmN0aW9uIERTTChuYW1lKSB7CiAgdGhpcy5w
        YXJlbnQgPSBuYW1lOwogIHRoaXMubWF0Y2hlcyA9IFtdOwp9CgpEU0wucHJv
        dG90eXBlID0gewogIHJlc291cmNlOiBmdW5jdGlvbihuYW1lLCBvcHRpb25z
        LCBjYWxsYmFjaykgewogICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDIg
        JiYgdHlwZW9mIG9wdGlvbnMgPT09ICdmdW5jdGlvbicpIHsKICAgICAgY2Fs
        bGJhY2sgPSBvcHRpb25zOwogICAgICBvcHRpb25zID0ge307CiAgICB9Cgog
        ICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDEpIHsKICAgICAgb3B0aW9u
        cyA9IHt9OwogICAgfQoKICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5wYXRoICE9
        PSAnc3RyaW5nJykgewogICAgICBvcHRpb25zLnBhdGggPSAiLyIgKyBuYW1l
        OwogICAgfQoKICAgIGlmIChjYWxsYmFjaykgewogICAgICB2YXIgZHNsID0g
        bmV3IERTTChuYW1lKTsKICAgICAgcm91dGUoZHNsLCAnbG9hZGluZycpOwog
        ICAgICByb3V0ZShkc2wsICdlcnJvcicsIHsgcGF0aDogIi9fdW51c2VkX2R1
        bW15X2Vycm9yX3BhdGhfcm91dGVfIiArIG5hbWUgKyAiLzplcnJvciIgfSk7
        CiAgICAgIGNhbGxiYWNrLmNhbGwoZHNsKTsKICAgICAgdGhpcy5wdXNoKG9w
        dGlvbnMucGF0aCwgbmFtZSwgZHNsLmdlbmVyYXRlKCksIG9wdGlvbnMucXVl
        cnlQYXJhbXMpOwogICAgfSBlbHNlIHsKICAgICAgdGhpcy5wdXNoKG9wdGlv
        bnMucGF0aCwgbmFtZSwgbnVsbCwgb3B0aW9ucy5xdWVyeVBhcmFtcyk7CiAg
        ICB9CgoKICAgICAgfSwKCiAgcHVzaDogZnVuY3Rpb24odXJsLCBuYW1lLCBj
        YWxsYmFjaywgcXVlcnlQYXJhbXMpIHsKICAgIHZhciBwYXJ0cyA9IG5hbWUu
        c3BsaXQoJy4nKTsKICAgIGlmICh1cmwgPT09ICIiIHx8IHVybCA9PT0gIi8i
        IHx8IHBhcnRzW3BhcnRzLmxlbmd0aC0xXSA9PT0gImluZGV4IikgeyB0aGlz
        LmV4cGxpY2l0SW5kZXggPSB0cnVlOyB9CgogICAgdGhpcy5tYXRjaGVzLnB1
        c2goW3VybCwgbmFtZSwgY2FsbGJhY2ssIHF1ZXJ5UGFyYW1zXSk7CiAgfSwK
        CiAgcm91dGU6IGZ1bmN0aW9uKG5hbWUsIG9wdGlvbnMpIHsKICAgIHJvdXRl
        KHRoaXMsIG5hbWUsIG9wdGlvbnMpOwogICAgICB9LAoKICBnZW5lcmF0ZTog
        ZnVuY3Rpb24oKSB7CiAgICB2YXIgZHNsTWF0Y2hlcyA9IHRoaXMubWF0Y2hl
        czsKCiAgICBpZiAoIXRoaXMuZXhwbGljaXRJbmRleCkgewogICAgICB0aGlz
        LnJvdXRlKCJpbmRleCIsIHsgcGF0aDogIi8iIH0pOwogICAgfQoKICAgIHJl
        dHVybiBmdW5jdGlvbihtYXRjaCkgewogICAgICBmb3IgKHZhciBpPTAsIGw9
        ZHNsTWF0Y2hlcy5sZW5ndGg7IGk8bDsgaSsrKSB7CiAgICAgICAgdmFyIGRz
        bE1hdGNoID0gZHNsTWF0Y2hlc1tpXTsKICAgICAgICB2YXIgbWF0Y2hPYmog
        PSBtYXRjaChkc2xNYXRjaFswXSkudG8oZHNsTWF0Y2hbMV0sIGRzbE1hdGNo
        WzJdKTsKICAgICAgfQogICAgfTsKICB9Cn07CgpmdW5jdGlvbiByb3V0ZShk
        c2wsIG5hbWUsIG9wdGlvbnMpIHsKICBFbWJlci5hc3NlcnQoIllvdSBtdXN0
        IHVzZSBgdGhpcy5yZXNvdXJjZWAgdG8gbmVzdCIsIHR5cGVvZiBvcHRpb25z
        ICE9PSAnZnVuY3Rpb24nKTsKCiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307
        CgogIGlmICh0eXBlb2Ygb3B0aW9ucy5wYXRoICE9PSAnc3RyaW5nJykgewog
        ICAgb3B0aW9ucy5wYXRoID0gIi8iICsgbmFtZTsKICB9CgogIGlmIChkc2wu
        cGFyZW50ICYmIGRzbC5wYXJlbnQgIT09ICdhcHBsaWNhdGlvbicpIHsKICAg
        IG5hbWUgPSBkc2wucGFyZW50ICsgIi4iICsgbmFtZTsKICB9CgogIGRzbC5w
        dXNoKG9wdGlvbnMucGF0aCwgbmFtZSwgbnVsbCwgb3B0aW9ucy5xdWVyeVBh
        cmFtcyk7Cn0KCkRTTC5tYXAgPSBmdW5jdGlvbihjYWxsYmFjaykgewogIHZh
        ciBkc2wgPSBuZXcgRFNMKCk7CiAgY2FsbGJhY2suY2FsbChkc2wpOwogIHJl
        dHVybiBkc2w7Cn07CgpFbWJlci5Sb3V0ZXJEU0wgPSBEU0w7Cgp9KSgpOwoK
        CgooZnVuY3Rpb24oKSB7CnZhciBnZXQgPSBFbWJlci5nZXQ7CgovKioKQG1v
        ZHVsZSBlbWJlcgpAc3VibW9kdWxlIGVtYmVyLXJvdXRpbmcKKi8KCi8qKgoK
        ICBGaW5kcyBhIGNvbnRyb2xsZXIgaW5zdGFuY2UuCgogIEBmb3IgRW1iZXIK
        ICBAbWV0aG9kIGNvbnRyb2xsZXJGb3IKICBAcHJpdmF0ZQoqLwpFbWJlci5j
        b250cm9sbGVyRm9yID0gZnVuY3Rpb24oY29udGFpbmVyLCBjb250cm9sbGVy
        TmFtZSwgbG9va3VwT3B0aW9ucykgewogIHJldHVybiBjb250YWluZXIubG9v
        a3VwKCdjb250cm9sbGVyOicgKyBjb250cm9sbGVyTmFtZSwgbG9va3VwT3B0
        aW9ucyk7Cn07CgovKioKICBHZW5lcmF0ZXMgYSBjb250cm9sbGVyIGZhY3Rv
        cnkKCiAgVGhlIHR5cGUgb2YgdGhlIGdlbmVyYXRlZCBjb250cm9sbGVyIGZh
        Y3RvcnkgaXMgZGVyaXZlZAogIGZyb20gdGhlIGNvbnRleHQuIElmIHRoZSBj
        b250ZXh0IGlzIGFuIGFycmF5IGFuIGFycmF5IGNvbnRyb2xsZXIKICBpcyBn
        ZW5lcmF0ZWQsIGlmIGFuIG9iamVjdCwgYW4gb2JqZWN0IGNvbnRyb2xsZXIg
        b3RoZXJ3aXNlLCBhIGJhc2ljCiAgY29udHJvbGxlciBpcyBnZW5lcmF0ZWQu
        CgogIFlvdSBjYW4gY3VzdG9taXplIHlvdXIgZ2VuZXJhdGVkIGNvbnRyb2xs
        ZXJzIGJ5IGRlZmluaW5nCiAgYEFwcC5PYmplY3RDb250cm9sbGVyYCBvciBg
        QXBwLkFycmF5Q29udHJvbGxlcmAuCgogIEBmb3IgRW1iZXIKICBAbWV0aG9k
        IGdlbmVyYXRlQ29udHJvbGxlckZhY3RvcnkKICBAcHJpdmF0ZQoqLwpFbWJl
        ci5nZW5lcmF0ZUNvbnRyb2xsZXJGYWN0b3J5ID0gZnVuY3Rpb24oY29udGFp
        bmVyLCBjb250cm9sbGVyTmFtZSwgY29udGV4dCkgewogIHZhciBGYWN0b3J5
        LCBmdWxsTmFtZSwgaW5zdGFuY2UsIG5hbWUsIGZhY3RvcnlOYW1lLCBjb250
        cm9sbGVyVHlwZTsKCiAgaWYgKGNvbnRleHQgJiYgRW1iZXIuaXNBcnJheShj
        b250ZXh0KSkgewogICAgY29udHJvbGxlclR5cGUgPSAnYXJyYXknOwogIH0g
        ZWxzZSBpZiAoY29udGV4dCkgewogICAgY29udHJvbGxlclR5cGUgPSAnb2Jq
        ZWN0JzsKICB9IGVsc2UgewogICAgY29udHJvbGxlclR5cGUgPSAnYmFzaWMn
        OwogIH0KCiAgZmFjdG9yeU5hbWUgPSAnY29udHJvbGxlcjonICsgY29udHJv
        bGxlclR5cGU7CgogIEZhY3RvcnkgPSBjb250YWluZXIubG9va3VwRmFjdG9y
        eShmYWN0b3J5TmFtZSkuZXh0ZW5kKHsKICAgIGlzR2VuZXJhdGVkOiB0cnVl
        LAogICAgdG9TdHJpbmc6IGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gIihn
        ZW5lcmF0ZWQgIiArIGNvbnRyb2xsZXJOYW1lICsgIiBjb250cm9sbGVyKSI7
        CiAgICB9CiAgfSk7CgogIGZ1bGxOYW1lID0gJ2NvbnRyb2xsZXI6JyArIGNv
        bnRyb2xsZXJOYW1lOwoKICBjb250YWluZXIucmVnaXN0ZXIoZnVsbE5hbWUs
        ICBGYWN0b3J5KTsKCiAgcmV0dXJuIEZhY3Rvcnk7Cn07CgovKioKICBHZW5l
        cmF0ZXMgYW5kIGluc3RhbnRpYXRlcyBhIGNvbnRyb2xsZXIuCgogIFRoZSB0
        eXBlIG9mIHRoZSBnZW5lcmF0ZWQgY29udHJvbGxlciBmYWN0b3J5IGlzIGRl
        cml2ZWQKICBmcm9tIHRoZSBjb250ZXh0LiBJZiB0aGUgY29udGV4dCBpcyBh
        biBhcnJheSBhbiBhcnJheSBjb250cm9sbGVyCiAgaXMgZ2VuZXJhdGVkLCBp
        ZiBhbiBvYmplY3QsIGFuIG9iamVjdCBjb250cm9sbGVyIG90aGVyd2lzZSwg
        YSBiYXNpYwogIGNvbnRyb2xsZXIgaXMgZ2VuZXJhdGVkLgoKICBAZm9yIEVt
        YmVyCiAgQG1ldGhvZCBnZW5lcmF0ZUNvbnRyb2xsZXIKICBAcHJpdmF0ZQoq
        LwpFbWJlci5nZW5lcmF0ZUNvbnRyb2xsZXIgPSBmdW5jdGlvbihjb250YWlu
        ZXIsIGNvbnRyb2xsZXJOYW1lLCBjb250ZXh0KSB7CiAgRW1iZXIuZ2VuZXJh
        dGVDb250cm9sbGVyRmFjdG9yeShjb250YWluZXIsIGNvbnRyb2xsZXJOYW1l
        LCBjb250ZXh0KTsKICB2YXIgZnVsbE5hbWUgPSAnY29udHJvbGxlcjonICsg
        Y29udHJvbGxlck5hbWU7CiAgdmFyIGluc3RhbmNlID0gY29udGFpbmVyLmxv
        b2t1cChmdWxsTmFtZSk7CgogIGlmIChnZXQoaW5zdGFuY2UsICduYW1lc3Bh
        Y2UuTE9HX0FDVElWRV9HRU5FUkFUSU9OJykpIHsKICAgIEVtYmVyLkxvZ2dl
        ci5pbmZvKCJnZW5lcmF0ZWQgLT4gIiArIGZ1bGxOYW1lLCB7IGZ1bGxOYW1l
        OiBmdWxsTmFtZSB9KTsKICB9CgogIHJldHVybiBpbnN0YW5jZTsKfTsKCn0p
        KCk7CgoKCihmdW5jdGlvbigpIHsKLyoqCkBtb2R1bGUgZW1iZXIKQHN1Ym1v
        ZHVsZSBlbWJlci1yb3V0aW5nCiovCgp2YXIgcm91dGVySnNNb2R1bGUgPSBy
        ZXF1aXJlTW9kdWxlKCJyb3V0ZXIiKTsKdmFyIFJvdXRlciA9IHJvdXRlckpz
        TW9kdWxlLlJvdXRlcjsKdmFyIFRyYW5zaXRpb24gPSByb3V0ZXJKc01vZHVs
        ZS5UcmFuc2l0aW9uOwp2YXIgZ2V0ID0gRW1iZXIuZ2V0LCBzZXQgPSBFbWJl
        ci5zZXQsIGZtdCA9IEVtYmVyLlN0cmluZy5mbXQ7CnZhciBkZWZpbmVQcm9w
        ZXJ0eSA9IEVtYmVyLmRlZmluZVByb3BlcnR5Owp2YXIgc2xpY2UgPSBBcnJh
        eS5wcm90b3R5cGUuc2xpY2U7CnZhciBmb3JFYWNoID0gRW1iZXIuRW51bWVy
        YWJsZVV0aWxzLmZvckVhY2g7Cgp2YXIgRGVmYXVsdFZpZXcgPSBFbWJlci5f
        TWV0YW1vcnBoVmlldzsKLyoqCiAgVGhlIGBFbWJlci5Sb3V0ZXJgIGNsYXNz
        IG1hbmFnZXMgdGhlIGFwcGxpY2F0aW9uIHN0YXRlIGFuZCBVUkxzLiBSZWZl
        ciB0bwogIHRoZSBbcm91dGluZyBndWlkZV0oaHR0cDovL2VtYmVyanMuY29t
        L2d1aWRlcy9yb3V0aW5nLykgZm9yIGRvY3VtZW50YXRpb24uCgogIEBjbGFz
        cyBSb3V0ZXIKICBAbmFtZXNwYWNlIEVtYmVyCiAgQGV4dGVuZHMgRW1iZXIu
        T2JqZWN0CiovCkVtYmVyLlJvdXRlciA9IEVtYmVyLk9iamVjdC5leHRlbmQo
        RW1iZXIuRXZlbnRlZCwgewogIC8qKgogICAgVGhlIGBsb2NhdGlvbmAgcHJv
        cGVydHkgZGV0ZXJtaW5lcyB0aGUgdHlwZSBvZiBVUkwncyB0aGF0IHlvdXIK
        ICAgIGFwcGxpY2F0aW9uIHdpbGwgdXNlLgoKICAgIFRoZSBmb2xsb3dpbmcg
        bG9jYXRpb24gdHlwZXMgYXJlIGN1cnJlbnRseSBhdmFpbGFibGU6CgogICAg
        KiBgaGFzaGAKICAgICogYGhpc3RvcnlgCiAgICAqIGBub25lYAoKICAgIEBw
        cm9wZXJ0eSBsb2NhdGlvbgogICAgQGRlZmF1bHQgJ2hhc2gnCiAgICBAc2Vl
        IHtFbWJlci5Mb2NhdGlvbn0KICAqLwogIGxvY2F0aW9uOiAnaGFzaCcsCgog
        IGluaXQ6IGZ1bmN0aW9uKCkgewogICAgdGhpcy5yb3V0ZXIgPSB0aGlzLmNv
        bnN0cnVjdG9yLnJvdXRlciB8fCB0aGlzLmNvbnN0cnVjdG9yLm1hcChFbWJl
        ci5LKTsKICAgIHRoaXMuX2FjdGl2ZVZpZXdzID0ge307CiAgICB0aGlzLl9z
        ZXR1cExvY2F0aW9uKCk7CgogICAgaWYgKGdldCh0aGlzLCAnbmFtZXNwYWNl
        LkxPR19UUkFOU0lUSU9OU19JTlRFUk5BTCcpKSB7CiAgICAgIHRoaXMucm91
        dGVyLmxvZyA9IEVtYmVyLkxvZ2dlci5kZWJ1ZzsKICAgIH0KICB9LAoKICAv
        KioKICAgIFJlcHJlc2VudHMgdGhlIGN1cnJlbnQgVVJMLgoKICAgIEBtZXRo
        b2QgdXJsCiAgICBAcmV0dXJucyB7U3RyaW5nfSBUaGUgY3VycmVudCBVUkwu
        CiAgKi8KICB1cmw6IEVtYmVyLmNvbXB1dGVkKGZ1bmN0aW9uKCkgewogICAg
        cmV0dXJuIGdldCh0aGlzLCAnbG9jYXRpb24nKS5nZXRVUkwoKTsKICB9KSwK
        CiAgLyoqCiAgICBJbml0aWFsaXplcyB0aGUgY3VycmVudCByb3V0ZXIgaW5z
        dGFuY2UgYW5kIHNldHMgdXAgdGhlIGNoYW5nZSBoYW5kbGluZwogICAgZXZl
        bnQgbGlzdGVuZXJzIHVzZWQgYnkgdGhlIGluc3RhbmNlcyBgbG9jYXRpb25g
        IGltcGxlbWVudGF0aW9uLgoKICAgIEEgcHJvcGVydHkgbmFtZWQgYGluaXRp
        YWxVUkxgIHdpbGwgYmUgdXNlZCB0byBkZXRlcm1pbmUgdGhlIGluaXRpYWwg
        VVJMLgogICAgSWYgbm8gdmFsdWUgaXMgZm91bmQgYC9gIHdpbGwgYmUgdXNl
        ZC4KCiAgICBAbWV0aG9kIHN0YXJ0Um91dGluZwogICAgQHByaXZhdGUKICAq
        LwogIHN0YXJ0Um91dGluZzogZnVuY3Rpb24oKSB7CiAgICB0aGlzLnJvdXRl
        ciA9IHRoaXMucm91dGVyIHx8IHRoaXMuY29uc3RydWN0b3IubWFwKEVtYmVy
        LkspOwoKICAgIHZhciByb3V0ZXIgPSB0aGlzLnJvdXRlciwKICAgICAgICBs
        b2NhdGlvbiA9IGdldCh0aGlzLCAnbG9jYXRpb24nKSwKICAgICAgICBjb250
        YWluZXIgPSB0aGlzLmNvbnRhaW5lciwKICAgICAgICBzZWxmID0gdGhpcywK
        ICAgICAgICBpbml0aWFsVVJMID0gZ2V0KHRoaXMsICdpbml0aWFsVVJMJyk7
        CgogICAgdGhpcy5fc2V0dXBSb3V0ZXIocm91dGVyLCBsb2NhdGlvbik7Cgog
        ICAgY29udGFpbmVyLnJlZ2lzdGVyKCd2aWV3OmRlZmF1bHQnLCBEZWZhdWx0
        Vmlldyk7CiAgICBjb250YWluZXIucmVnaXN0ZXIoJ3ZpZXc6dG9wbGV2ZWwn
        LCBFbWJlci5WaWV3LmV4dGVuZCgpKTsKCiAgICBsb2NhdGlvbi5vblVwZGF0
        ZVVSTChmdW5jdGlvbih1cmwpIHsKICAgICAgc2VsZi5oYW5kbGVVUkwodXJs
        KTsKICAgIH0pOwoKICAgIGlmICh0eXBlb2YgaW5pdGlhbFVSTCA9PT0gInVu
        ZGVmaW5lZCIpIHsKICAgICAgaW5pdGlhbFVSTCA9IGxvY2F0aW9uLmdldFVS
        TCgpOwogICAgfQoKICAgIHRoaXMuaGFuZGxlVVJMKGluaXRpYWxVUkwpOwog
        IH0sCgogIC8qKgogICAgSGFuZGxlcyB1cGRhdGluZyB0aGUgcGF0aHMgYW5k
        IG5vdGlmeWluZyBhbnkgbGlzdGVuZXJzIG9mIHRoZSBVUkwKICAgIGNoYW5n
        ZS4KCiAgICBUcmlnZ2VycyB0aGUgcm91dGVyIGxldmVsIGBkaWRUcmFuc2l0
        aW9uYCBob29rLgoKICAgIEBtZXRob2QgZGlkVHJhbnNpdGlvbgogICAgQHBy
        aXZhdGUKICAqLwogIGRpZFRyYW5zaXRpb246IGZ1bmN0aW9uKGluZm9zKSB7
        CiAgICB1cGRhdGVQYXRocyh0aGlzKTsKCiAgICB0aGlzLl9jYW5jZWxMb2Fk
        aW5nRXZlbnQoKTsKCiAgICB0aGlzLm5vdGlmeVByb3BlcnR5Q2hhbmdlKCd1
        cmwnKTsKCiAgICAvLyBQdXQgdGhpcyBpbiB0aGUgcnVubG9vcCBzbyB1cmwg
        d2lsbCBiZSBhY2N1cmF0ZS4gU2VlbXMKICAgIC8vIGxlc3Mgc3VycHJpc2lu
        ZyB0aGFuIGRpZFRyYW5zaXRpb24gYmVpbmcgb3V0IG9mIHN5bmMuCiAgICBF
        bWJlci5ydW4ub25jZSh0aGlzLCB0aGlzLnRyaWdnZXIsICdkaWRUcmFuc2l0
        aW9uJyk7CgogICAgaWYgKGdldCh0aGlzLCAnbmFtZXNwYWNlJykuTE9HX1RS
        QU5TSVRJT05TKSB7CiAgICAgIEVtYmVyLkxvZ2dlci5sb2coIlRyYW5zaXRp
        b25lZCBpbnRvICciICsgRW1iZXIuUm91dGVyLl9yb3V0ZVBhdGgoaW5mb3Mp
        ICsgIiciKTsKICAgIH0KICB9LAoKICBoYW5kbGVVUkw6IGZ1bmN0aW9uKHVy
        bCkgewogICAgcmV0dXJuIHRoaXMuX2RvVHJhbnNpdGlvbignaGFuZGxlVVJM
        JywgW3VybF0pOwogIH0sCgogIHRyYW5zaXRpb25UbzogZnVuY3Rpb24oKSB7
        CiAgICByZXR1cm4gdGhpcy5fZG9UcmFuc2l0aW9uKCd0cmFuc2l0aW9uVG8n
        LCBhcmd1bWVudHMpOwogIH0sCgogIGludGVybWVkaWF0ZVRyYW5zaXRpb25U
        bzogZnVuY3Rpb24oKSB7CiAgICB0aGlzLnJvdXRlci5pbnRlcm1lZGlhdGVU
        cmFuc2l0aW9uVG8uYXBwbHkodGhpcy5yb3V0ZXIsIGFyZ3VtZW50cyk7Cgog
        ICAgdXBkYXRlUGF0aHModGhpcyk7CgogICAgdmFyIGluZm9zID0gdGhpcy5y
        b3V0ZXIuY3VycmVudEhhbmRsZXJJbmZvczsKICAgIGlmIChnZXQodGhpcywg
        J25hbWVzcGFjZScpLkxPR19UUkFOU0lUSU9OUykgewogICAgICBFbWJlci5M
        b2dnZXIubG9nKCJJbnRlcm1lZGlhdGUtdHJhbnNpdGlvbmVkIGludG8gJyIg
        KyBFbWJlci5Sb3V0ZXIuX3JvdXRlUGF0aChpbmZvcykgKyAiJyIpOwogICAg
        fQogIH0sCgogIHJlcGxhY2VXaXRoOiBmdW5jdGlvbigpIHsKICAgIHJldHVy
        biB0aGlzLl9kb1RyYW5zaXRpb24oJ3JlcGxhY2VXaXRoJywgYXJndW1lbnRz
        KTsKICB9LAoKICBnZW5lcmF0ZTogZnVuY3Rpb24oKSB7CiAgICB2YXIgdXJs
        ID0gdGhpcy5yb3V0ZXIuZ2VuZXJhdGUuYXBwbHkodGhpcy5yb3V0ZXIsIGFy
        Z3VtZW50cyk7CiAgICByZXR1cm4gdGhpcy5sb2NhdGlvbi5mb3JtYXRVUkwo
        dXJsKTsKICB9LAoKICAvKioKICAgIERldGVybWluZXMgaWYgdGhlIHN1cHBs
        aWVkIHJvdXRlIGlzIGN1cnJlbnRseSBhY3RpdmUuCgogICAgQG1ldGhvZCBp
        c0FjdGl2ZQogICAgQHBhcmFtIHJvdXRlTmFtZQogICAgQHJldHVybnMge0Jv
        b2xlYW59CiAgICBAcHJpdmF0ZQogICovCiAgaXNBY3RpdmU6IGZ1bmN0aW9u
        KHJvdXRlTmFtZSkgewogICAgdmFyIHJvdXRlciA9IHRoaXMucm91dGVyOwog
        ICAgcmV0dXJuIHJvdXRlci5pc0FjdGl2ZS5hcHBseShyb3V0ZXIsIGFyZ3Vt
        ZW50cyk7CiAgfSwKCiAgc2VuZDogZnVuY3Rpb24obmFtZSwgY29udGV4dCkg
        ewogICAgdGhpcy5yb3V0ZXIudHJpZ2dlci5hcHBseSh0aGlzLnJvdXRlciwg
        YXJndW1lbnRzKTsKICB9LAoKICAvKioKICAgIERvZXMgdGhpcyByb3V0ZXIg
        aW5zdGFuY2UgaGF2ZSB0aGUgZ2l2ZW4gcm91dGUuCgogICAgQG1ldGhvZCBo
        YXNSb3V0ZQogICAgQHJldHVybnMge0Jvb2xlYW59CiAgICBAcHJpdmF0ZQog
        ICovCiAgaGFzUm91dGU6IGZ1bmN0aW9uKHJvdXRlKSB7CiAgICByZXR1cm4g
        dGhpcy5yb3V0ZXIuaGFzUm91dGUocm91dGUpOwogIH0sCgogIC8qKgogICAg
        UmVzZXRzIHRoZSBzdGF0ZSBvZiB0aGUgcm91dGVyIGJ5IGNsZWFyaW5nIHRo
        ZSBjdXJyZW50IHJvdXRlCiAgICBoYW5kbGVycyBhbmQgZGVhY3RpdmF0aW5n
        IHRoZW0uCgogICAgQHByaXZhdGUKICAgIEBtZXRob2QgcmVzZXQKICAgKi8K
        ICByZXNldDogZnVuY3Rpb24oKSB7CiAgICB0aGlzLnJvdXRlci5yZXNldCgp
        OwogIH0sCgogIF9sb29rdXBBY3RpdmVWaWV3OiBmdW5jdGlvbih0ZW1wbGF0
        ZU5hbWUpIHsKICAgIHZhciBhY3RpdmUgPSB0aGlzLl9hY3RpdmVWaWV3c1t0
        ZW1wbGF0ZU5hbWVdOwogICAgcmV0dXJuIGFjdGl2ZSAmJiBhY3RpdmVbMF07
        CiAgfSwKCiAgX2Nvbm5lY3RBY3RpdmVWaWV3OiBmdW5jdGlvbih0ZW1wbGF0
        ZU5hbWUsIHZpZXcpIHsKICAgIHZhciBleGlzdGluZyA9IHRoaXMuX2FjdGl2
        ZVZpZXdzW3RlbXBsYXRlTmFtZV07CgogICAgaWYgKGV4aXN0aW5nKSB7CiAg
        ICAgIGV4aXN0aW5nWzBdLm9mZignd2lsbERlc3Ryb3lFbGVtZW50JywgdGhp
        cywgZXhpc3RpbmdbMV0pOwogICAgfQoKICAgIHZhciBkaXNjb25uZWN0ID0g
        ZnVuY3Rpb24oKSB7CiAgICAgIGRlbGV0ZSB0aGlzLl9hY3RpdmVWaWV3c1t0
        ZW1wbGF0ZU5hbWVdOwogICAgfTsKCiAgICB0aGlzLl9hY3RpdmVWaWV3c1t0
        ZW1wbGF0ZU5hbWVdID0gW3ZpZXcsIGRpc2Nvbm5lY3RdOwogICAgdmlldy5v
        bmUoJ3dpbGxEZXN0cm95RWxlbWVudCcsIHRoaXMsIGRpc2Nvbm5lY3QpOwog
        IH0sCgogIF9zZXR1cExvY2F0aW9uOiBmdW5jdGlvbigpIHsKICAgIHZhciBs
        b2NhdGlvbiA9IGdldCh0aGlzLCAnbG9jYXRpb24nKSwKICAgICAgICByb290
        VVJMID0gZ2V0KHRoaXMsICdyb290VVJMJyk7CgogICAgaWYgKCdzdHJpbmcn
        ID09PSB0eXBlb2YgbG9jYXRpb24gJiYgdGhpcy5jb250YWluZXIpIHsKICAg
        ICAgdmFyIHJlc29sdmVkTG9jYXRpb24gPSB0aGlzLmNvbnRhaW5lci5sb29r
        dXAoJ2xvY2F0aW9uOicgKyBsb2NhdGlvbik7CgogICAgICBpZiAoJ3VuZGVm
        aW5lZCcgIT09IHR5cGVvZiByZXNvbHZlZExvY2F0aW9uKSB7CiAgICAgICAg
        bG9jYXRpb24gPSBzZXQodGhpcywgJ2xvY2F0aW9uJywgcmVzb2x2ZWRMb2Nh
        dGlvbik7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8gQWxsb3cgZm9yIGRl
        cHJlY2F0ZWQgcmVnaXN0cmF0aW9uIG9mIGN1c3RvbSBsb2NhdGlvbiBBUEkn
        cwogICAgICAgIHZhciBvcHRpb25zID0ge2ltcGxlbWVudGF0aW9uOiBsb2Nh
        dGlvbn07CgogICAgICAgIGxvY2F0aW9uID0gc2V0KHRoaXMsICdsb2NhdGlv
        bicsIEVtYmVyLkxvY2F0aW9uLmNyZWF0ZShvcHRpb25zKSk7CiAgICAgIH0K
        ICAgIH0KCiAgICBpZiAodHlwZW9mIHJvb3RVUkwgPT09ICdzdHJpbmcnKSB7
        CiAgICAgIGxvY2F0aW9uLnJvb3RVUkwgPSByb290VVJMOwogICAgfQoKICAg
        IC8vIGVuc3VyZSB0aGF0IGluaXRTdGF0ZSBpcyBjYWxsZWQgQUZURVIgdGhl
        IHJvb3RVUkwgaXMgc2V0IG9uCiAgICAvLyB0aGUgbG9jYXRpb24gaW5zdGFu
        Y2UKICAgIGlmICh0eXBlb2YgbG9jYXRpb24uaW5pdFN0YXRlID09PSAnZnVu
        Y3Rpb24nKSB7IGxvY2F0aW9uLmluaXRTdGF0ZSgpOyB9CiAgfSwKCiAgX2dl
        dEhhbmRsZXJGdW5jdGlvbjogZnVuY3Rpb24oKSB7CiAgICB2YXIgc2VlbiA9
        IHt9LCBjb250YWluZXIgPSB0aGlzLmNvbnRhaW5lciwKICAgICAgICBEZWZh
        dWx0Um91dGUgPSBjb250YWluZXIubG9va3VwRmFjdG9yeSgncm91dGU6YmFz
        aWMnKSwKICAgICAgICBzZWxmID0gdGhpczsKCiAgICByZXR1cm4gZnVuY3Rp
        b24obmFtZSkgewogICAgICB2YXIgcm91dGVOYW1lID0gJ3JvdXRlOicgKyBu
        YW1lLAogICAgICAgICAgaGFuZGxlciA9IGNvbnRhaW5lci5sb29rdXAocm91
        dGVOYW1lKTsKCiAgICAgIGlmIChzZWVuW25hbWVdKSB7IHJldHVybiBoYW5k
        bGVyOyB9CgogICAgICBzZWVuW25hbWVdID0gdHJ1ZTsKCiAgICAgIGlmICgh
        aGFuZGxlcikgewogICAgICAgIGNvbnRhaW5lci5yZWdpc3Rlcihyb3V0ZU5h
        bWUsIERlZmF1bHRSb3V0ZS5leHRlbmQoKSk7CiAgICAgICAgaGFuZGxlciA9
        IGNvbnRhaW5lci5sb29rdXAocm91dGVOYW1lKTsKCiAgICAgICAgaWYgKGdl
        dChzZWxmLCAnbmFtZXNwYWNlLkxPR19BQ1RJVkVfR0VORVJBVElPTicpKSB7
        CiAgICAgICAgICBFbWJlci5Mb2dnZXIuaW5mbygiZ2VuZXJhdGVkIC0+ICIg
        KyByb3V0ZU5hbWUsIHsgZnVsbE5hbWU6IHJvdXRlTmFtZSB9KTsKICAgICAg
        ICB9CiAgICAgIH0KCiAgICAgIGhhbmRsZXIucm91dGVOYW1lID0gbmFtZTsK
        ICAgICAgcmV0dXJuIGhhbmRsZXI7CiAgICB9OwogIH0sCgogIF9zZXR1cFJv
        dXRlcjogZnVuY3Rpb24ocm91dGVyLCBsb2NhdGlvbikgewogICAgdmFyIGxh
        c3RVUkwsIGVtYmVyUm91dGVyID0gdGhpczsKCiAgICByb3V0ZXIuZ2V0SGFu
        ZGxlciA9IHRoaXMuX2dldEhhbmRsZXJGdW5jdGlvbigpOwoKICAgIHZhciBk
        b1VwZGF0ZVVSTCA9IGZ1bmN0aW9uKCkgewogICAgICBsb2NhdGlvbi5zZXRV
        UkwobGFzdFVSTCk7CiAgICB9OwoKICAgIHJvdXRlci51cGRhdGVVUkwgPSBm
        dW5jdGlvbihwYXRoKSB7CiAgICAgIGxhc3RVUkwgPSBwYXRoOwogICAgICBF
        bWJlci5ydW4ub25jZShkb1VwZGF0ZVVSTCk7CiAgICB9OwoKICAgIGlmIChs
        b2NhdGlvbi5yZXBsYWNlVVJMKSB7CiAgICAgIHZhciBkb1JlcGxhY2VVUkwg
        PSBmdW5jdGlvbigpIHsKICAgICAgICBsb2NhdGlvbi5yZXBsYWNlVVJMKGxh
        c3RVUkwpOwogICAgICB9OwoKICAgICAgcm91dGVyLnJlcGxhY2VVUkwgPSBm
        dW5jdGlvbihwYXRoKSB7CiAgICAgICAgbGFzdFVSTCA9IHBhdGg7CiAgICAg
        ICAgRW1iZXIucnVuLm9uY2UoZG9SZXBsYWNlVVJMKTsKICAgICAgfTsKICAg
        IH0KCiAgICByb3V0ZXIuZGlkVHJhbnNpdGlvbiA9IGZ1bmN0aW9uKGluZm9z
        KSB7CiAgICAgIGVtYmVyUm91dGVyLmRpZFRyYW5zaXRpb24oaW5mb3MpOwog
        ICAgfTsKICB9LAoKICBfZG9UcmFuc2l0aW9uOiBmdW5jdGlvbihtZXRob2Qs
        IGFyZ3MpIHsKICAgIC8vIE5vcm1hbGl6ZSBibGFuayByb3V0ZSB0byByb290
        IFVSTC4KICAgIGFyZ3MgPSBzbGljZS5jYWxsKGFyZ3MpOwogICAgYXJnc1sw
        XSA9IGFyZ3NbMF0gfHwgJy8nOwoKICAgIHZhciBwYXNzZWROYW1lID0gYXJn
        c1swXSwgbmFtZSwgc2VsZiA9IHRoaXMsCiAgICAgIGlzUXVlcnlQYXJhbXNP
        bmx5ID0gZmFsc2UsIHF1ZXJ5UGFyYW1zOwoKICAgIAogICAgaWYgKCFpc1F1
        ZXJ5UGFyYW1zT25seSAmJiBwYXNzZWROYW1lLmNoYXJBdCgwKSAhPT0gJy8n
        KSB7CiAgICAgIGlmICghdGhpcy5yb3V0ZXIuaGFzUm91dGUocGFzc2VkTmFt
        ZSkpIHsKICAgICAgICBuYW1lID0gYXJnc1swXSA9IHBhc3NlZE5hbWUgKyAn
        LmluZGV4JzsKICAgICAgfSBlbHNlIHsKICAgICAgICBuYW1lID0gcGFzc2Vk
        TmFtZTsKICAgICAgfQoKICAgICAgRW1iZXIuYXNzZXJ0KCJUaGUgcm91dGUg
        IiArIHBhc3NlZE5hbWUgKyAiIHdhcyBub3QgZm91bmQiLCB0aGlzLnJvdXRl
        ci5oYXNSb3V0ZShuYW1lKSk7CiAgICB9CgogICAgaWYgKHF1ZXJ5UGFyYW1z
        KSB7CiAgICAgIC8vIHJvdXRlci5qcyBleHBlY3RzIHF1ZXJ5UGFyYW1zIHRv
        IGJlIHBhc3NlZCBpbiBpbgogICAgICAvLyB0aGVpciBmaW5hbCBzZXJpYWxp
        emVkIGZvcm0sIHNvIHdlIG5lZWQgdG8gdHJhbnNsYXRlLgoKICAgICAgaWYg
        KCFuYW1lKSB7CiAgICAgICAgLy8gTmVlZCB0byBkZXRlcm1pbmUgZGVzdGlu
        YXRpb24gcm91dGUgbmFtZS4KICAgICAgICB2YXIgaGFuZGxlckluZm9zID0g
        dGhpcy5yb3V0ZXIuYWN0aXZlVHJhbnNpdGlvbiA/CiAgICAgICAgICAgICAg
        ICAgICAgICAgICAgIHRoaXMucm91dGVyLmFjdGl2ZVRyYW5zaXRpb24uc3Rh
        dGUuaGFuZGxlckluZm9zIDoKICAgICAgICAgICAgICAgICAgICAgICAgICAg
        dGhpcy5yb3V0ZXIuc3RhdGUuaGFuZGxlckluZm9zOwogICAgICAgIG5hbWUg
        PSBoYW5kbGVySW5mb3NbaGFuZGxlckluZm9zLmxlbmd0aCAtIDFdLm5hbWU7
        CiAgICAgICAgYXJncy51bnNoaWZ0KG5hbWUpOwogICAgICB9CgogICAgICB2
        YXIgcXBNYXBwaW5ncyA9IHRoaXMuX3F1ZXJ5UGFyYW1OYW1lc0ZvcihuYW1l
        KTsKICAgICAgRW1iZXIuUm91dGVyLl90cmFuc2xhdGVRdWVyeVBhcmFtcyhx
        dWVyeVBhcmFtcywgcXBNYXBwaW5ncy50cmFuc2xhdGlvbnMsIG5hbWUpOwog
        ICAgICBmb3IgKHZhciBrZXkgaW4gcXVlcnlQYXJhbXMpIHsKICAgICAgICBp
        ZiAoa2V5IGluIHFwTWFwcGluZ3MucXVlcnlQYXJhbXMpIHsKICAgICAgICAg
        IHZhciB2YWx1ZSA9IHF1ZXJ5UGFyYW1zW2tleV07CiAgICAgICAgICBkZWxl
        dGUgcXVlcnlQYXJhbXNba2V5XTsKICAgICAgICAgIHF1ZXJ5UGFyYW1zW3Fw
        TWFwcGluZ3MucXVlcnlQYXJhbXNba2V5XV0gPSB2YWx1ZTsKICAgICAgICB9
        CiAgICAgIH0KICAgIH0KCiAgICB2YXIgdHJhbnNpdGlvblByb21pc2UgPSB0
        aGlzLnJvdXRlclttZXRob2RdLmFwcGx5KHRoaXMucm91dGVyLCBhcmdzKTsK
        CiAgICB0cmFuc2l0aW9uUHJvbWlzZS50aGVuKG51bGwsIGZ1bmN0aW9uKGVy
        cm9yKSB7CiAgICAgIGlmIChlcnJvci5uYW1lID09PSAiVW5yZWNvZ25pemVk
        VVJMRXJyb3IiKSB7CiAgICAgICAgRW1iZXIuYXNzZXJ0KCJUaGUgVVJMICci
        ICsgZXJyb3IubWVzc2FnZSArICInIGRpZCBub3QgbWF0Y2ggYW55IHJvdXRl
        cyBpbiB5b3VyIGFwcGxpY2F0aW9uIik7CiAgICAgIH0KICAgIH0sICdFbWJl
        cjogQ2hlY2sgZm9yIFJvdXRlciB1bnJlY29nbml6ZWQgVVJMIGVycm9yJyk7
        CgogICAgLy8gV2Ugd2FudCB0byByZXR1cm4gdGhlIGNvbmZpZ3VyYWJsZSBw
        cm9taXNlIG9iamVjdAogICAgLy8gc28gdGhhdCBjYWxsZXJzIG9mIHRoaXMg
        ZnVuY3Rpb24gY2FuIHVzZSBgLm1ldGhvZCgpYCBvbiBpdCwKICAgIC8vIHdo
        aWNoIG9idmlvdXNseSBkb2Vzbid0IGV4aXN0IGZvciBub3JtYWwgUlNWUCBw
        cm9taXNlcy4KICAgIHJldHVybiB0cmFuc2l0aW9uUHJvbWlzZTsKICB9LAoK
        ICBfc2NoZWR1bGVMb2FkaW5nRXZlbnQ6IGZ1bmN0aW9uKHRyYW5zaXRpb24s
        IG9yaWdpblJvdXRlKSB7CiAgICB0aGlzLl9jYW5jZWxMb2FkaW5nRXZlbnQo
        KTsKICAgIHRoaXMuX2xvYWRpbmdTdGF0ZVRpbWVyID0gRW1iZXIucnVuLnNj
        aGVkdWxlT25jZSgncm91dGVyVHJhbnNpdGlvbnMnLCB0aGlzLCAnX2ZpcmVM
        b2FkaW5nRXZlbnQnLCB0cmFuc2l0aW9uLCBvcmlnaW5Sb3V0ZSk7CiAgfSwK
        CiAgX2ZpcmVMb2FkaW5nRXZlbnQ6IGZ1bmN0aW9uKHRyYW5zaXRpb24sIG9y
        aWdpblJvdXRlKSB7CiAgICBpZiAoIXRoaXMucm91dGVyLmFjdGl2ZVRyYW5z
        aXRpb24pIHsKICAgICAgLy8gRG9uJ3QgZmlyZSBhbiBldmVudCBpZiB3ZSd2
        ZSBzaW5jZSBtb3ZlZCBvbiBmcm9tCiAgICAgIC8vIHRoZSB0cmFuc2l0aW9u
        IHRoYXQgcHV0IHVzIGluIGEgbG9hZGluZyBzdGF0ZS4KICAgICAgcmV0dXJu
        OwogICAgfQoKICAgIHRyYW5zaXRpb24udHJpZ2dlcih0cnVlLCAnbG9hZGlu
        ZycsIHRyYW5zaXRpb24sIG9yaWdpblJvdXRlKTsKICB9LAoKICBfY2FuY2Vs
        TG9hZGluZ0V2ZW50OiBmdW5jdGlvbiAoKSB7CiAgICBpZiAodGhpcy5fbG9h
        ZGluZ1N0YXRlVGltZXIpIHsKICAgICAgRW1iZXIucnVuLmNhbmNlbCh0aGlz
        Ll9sb2FkaW5nU3RhdGVUaW1lcik7CiAgICB9CiAgICB0aGlzLl9sb2FkaW5n
        U3RhdGVUaW1lciA9IG51bGw7CiAgfSwKCiAgX3F1ZXJ5UGFyYW1OYW1lc0Zv
        cjogZnVuY3Rpb24ocm91dGVOYW1lKSB7CgogICAgLy8gVE9ETzogYWRkIGNh
        Y2hpbmcKCiAgICByb3V0ZU5hbWUgPSB0aGlzLnJvdXRlci5oYXNSb3V0ZShy
        b3V0ZU5hbWUpID8gcm91dGVOYW1lIDogcm91dGVOYW1lICsgJy5pbmRleCc7
        CgogICAgdmFyIGhhbmRsZXJJbmZvcyA9IHRoaXMucm91dGVyLnJlY29nbml6
        ZXIuaGFuZGxlcnNGb3Iocm91dGVOYW1lKTsKICAgIHZhciByZXN1bHQgPSB7
        IHF1ZXJ5UGFyYW1zOiBFbWJlci5jcmVhdGUobnVsbCksIHRyYW5zbGF0aW9u
        czogRW1iZXIuY3JlYXRlKG51bGwpIH07CiAgICB2YXIgcm91dGVyanMgPSB0
        aGlzLnJvdXRlcjsKICAgIGZvckVhY2goaGFuZGxlckluZm9zLCBmdW5jdGlv
        bihyZWNvZ0hhbmRsZXIpIHsKICAgICAgdmFyIHJvdXRlID0gcm91dGVyanMu
        Z2V0SGFuZGxlcihyZWNvZ0hhbmRsZXIuaGFuZGxlcik7CiAgICAgIGdldFF1
        ZXJ5UGFyYW1zRm9yUm91dGUocm91dGUsIHJlc3VsdCk7CiAgICB9KTsKCiAg
        ICByZXR1cm4gcmVzdWx0OwogIH0sCgogIF9xdWVyeVBhcmFtTmFtZXNGb3JT
        aW5nbGU6IGZ1bmN0aW9uKHJvdXRlTmFtZSkgewoKICAgIC8vIFRPRE86IGFk
        ZCBjYWNoaW5nCgogICAgdmFyIHJlc3VsdCA9IHsgcXVlcnlQYXJhbXM6IEVt
        YmVyLmNyZWF0ZShudWxsKSwgdHJhbnNsYXRpb25zOiBFbWJlci5jcmVhdGUo
        bnVsbCkgfTsKICAgIHZhciByb3V0ZSA9IHRoaXMucm91dGVyLmdldEhhbmRs
        ZXIocm91dGVOYW1lKTsKCiAgICBnZXRRdWVyeVBhcmFtc0ZvclJvdXRlKHJv
        dXRlLCByZXN1bHQpOwoKICAgIHJldHVybiByZXN1bHQ7CiAgfSwKCiAgLyoq
        CiAgICBAcHJpdmF0ZQoKICAgIFV0aWxpdHkgZnVuY3Rpb24gZm9yIGZldGNo
        aW5nIGFsbCB0aGUgY3VycmVudCBxdWVyeSBwYXJhbXMKICAgIHZhbHVlcyBm
        cm9tIGEgY29udHJvbGxlci4KICAgKi8KICBfcXVlcnlQYXJhbU92ZXJyaWRl
        czogZnVuY3Rpb24ocmVzdWx0cywgcXVlcnlQYXJhbXMsIGNhbGxiYWNrKSB7
        CiAgICBmb3IgKHZhciBuYW1lIGluIHF1ZXJ5UGFyYW1zKSB7CiAgICAgIHZh
        ciBwYXJ0cyA9IG5hbWUuc3BsaXQoJzonKTsKICAgICAgdmFyIGNvbnRyb2xs
        ZXIgPSB0aGlzLmNvbnRhaW5lci5sb29rdXAoJ2NvbnRyb2xsZXI6JyArIHBh
        cnRzWzBdKTsKICAgICAgRW1iZXIuYXNzZXJ0KGZtdCgiQ291bGQgbm90IGxv
        b2t1cCBjb250cm9sbGVyICclQCcgd2hpbGUgc2V0dGluZyB1cCBxdWVyeSBw
        YXJhbXMiLCBbY29udHJvbGxlcl0pLCBjb250cm9sbGVyKTsKCiAgICAgIC8v
        IE5vdyBhc3NpZ24gdGhlIGZpbmFsIFVSTC1zZXJpYWxpemVkIGtleS12YWx1
        ZSBwYWlyLAogICAgICAvLyBlLmcuICJmb29bcHJvcE5hbWVdIjogInZhbHVl
        IgogICAgICByZXN1bHRzW3F1ZXJ5UGFyYW1zW25hbWVdXSA9IGdldChjb250
        cm9sbGVyLCBwYXJ0c1sxXSk7CgogICAgICBpZiAoY2FsbGJhY2spIHsKICAg
        ICAgICAvLyBHaXZlIGNhbGxiYWNrIGEgY2hhbmNlIHRvIG92ZXJyaWRlLgog
        ICAgICAgIGNhbGxiYWNrKG5hbWUsIHF1ZXJ5UGFyYW1zW25hbWVdLCBuYW1l
        KTsKICAgICAgfQogICAgfQogIH0KfSk7CgovKioKICBAcHJpdmF0ZQogKi8K
        ZnVuY3Rpb24gZ2V0UXVlcnlQYXJhbXNGb3JSb3V0ZShyb3V0ZSwgcmVzdWx0
        KSB7CiAgdmFyIGNvbnRyb2xsZXJOYW1lID0gcm91dGUuY29udHJvbGxlck5h
        bWUgfHwgcm91dGUucm91dGVOYW1lLAogICAgICBjb250cm9sbGVyID0gcm91
        dGUuY29udHJvbGxlckZvcihjb250cm9sbGVyTmFtZSwgdHJ1ZSk7CgogIGlm
        IChjb250cm9sbGVyICYmIGNvbnRyb2xsZXIucXVlcnlQYXJhbXMpIHsKICAg
        IGZvckVhY2goY29udHJvbGxlci5xdWVyeVBhcmFtcywgZnVuY3Rpb24ocHJv
        cE5hbWUpIHsKCiAgICAgIHZhciBwYXJ0cyA9IHByb3BOYW1lLnNwbGl0KCc6
        Jyk7CgogICAgICB2YXIgdXJsS2V5TmFtZTsKICAgICAgaWYgKHBhcnRzLmxl
        bmd0aCA+IDEpIHsKICAgICAgICB1cmxLZXlOYW1lID0gcGFydHNbMV07CiAg
        ICAgIH0gZWxzZSB7CiAgICAgICAgLy8gVE9ETzogdXNlIF9xdWVyeVBhcmFt
        U2NvcGUgaGVyZT8KICAgICAgICBpZiAoY29udHJvbGxlck5hbWUgIT09ICdh
        cHBsaWNhdGlvbicpIHsKICAgICAgICAgIHVybEtleU5hbWUgPSBjb250cm9s
        bGVyTmFtZSArICdbJyArIHByb3BOYW1lICsgJ10nOwogICAgICAgIH0gZWxz
        ZSB7CiAgICAgICAgICB1cmxLZXlOYW1lID0gcHJvcE5hbWU7CiAgICAgICAg
        fQogICAgICB9CgogICAgICB2YXIgY29udHJvbGxlckZ1bGxuYW1lID0gY29u
        dHJvbGxlck5hbWUgKyAnOicgKyBwcm9wTmFtZTsKCiAgICAgIHJlc3VsdC5x
        dWVyeVBhcmFtc1tjb250cm9sbGVyRnVsbG5hbWVdID0gdXJsS2V5TmFtZTsK
        ICAgICAgcmVzdWx0LnRyYW5zbGF0aW9uc1twYXJ0c1swXV0gPSBjb250cm9s
        bGVyRnVsbG5hbWU7CiAgICB9KTsKICB9Cn0KCi8qKgogIEhlbHBlciBmdW5j
        dGlvbiBmb3IgaXRlcmF0aW5nIHJvb3Qtd2FyZCwgc3RhcnRpbmcKICBmcm9t
        IChidXQgbm90IGluY2x1ZGluZykgdGhlIHByb3ZpZGVkIGBvcmlnaW5Sb3V0
        ZWAuCgogIFJldHVybnMgdHJ1ZSBpZiB0aGUgbGFzdCBjYWxsYmFjayBmaXJl
        ZCByZXF1ZXN0ZWQKICB0byBidWJibGUgdXB3YXJkLgoKICBAcHJpdmF0ZQog
        Ki8KZnVuY3Rpb24gZm9yRWFjaFJvdXRlQWJvdmUob3JpZ2luUm91dGUsIHRy
        YW5zaXRpb24sIGNhbGxiYWNrKSB7CiAgdmFyIGhhbmRsZXJJbmZvcyA9IHRy
        YW5zaXRpb24uc3RhdGUuaGFuZGxlckluZm9zLAogICAgICBvcmlnaW5Sb3V0
        ZUZvdW5kID0gZmFsc2U7CgogIGZvciAodmFyIGkgPSBoYW5kbGVySW5mb3Mu
        bGVuZ3RoIC0gMTsgaSA+PSAwOyAtLWkpIHsKICAgIHZhciBoYW5kbGVySW5m
        byA9IGhhbmRsZXJJbmZvc1tpXSwKICAgICAgICByb3V0ZSA9IGhhbmRsZXJJ
        bmZvLmhhbmRsZXI7CgogICAgaWYgKCFvcmlnaW5Sb3V0ZUZvdW5kKSB7CiAg
        ICAgIGlmIChvcmlnaW5Sb3V0ZSA9PT0gcm91dGUpIHsKICAgICAgICBvcmln
        aW5Sb3V0ZUZvdW5kID0gdHJ1ZTsKICAgICAgfQogICAgICBjb250aW51ZTsK
        ICAgIH0KCiAgICBpZiAoY2FsbGJhY2socm91dGUsIGhhbmRsZXJJbmZvc1tp
        ICsgMV0uaGFuZGxlcikgIT09IHRydWUpIHsKICAgICAgcmV0dXJuIGZhbHNl
        OwogICAgfQogIH0KICByZXR1cm4gdHJ1ZTsKfQoKLy8gVGhlc2UgZ2V0IGlu
        dm9rZWQgd2hlbiBhbiBhY3Rpb24gYnViYmxlcyBhYm92ZSBBcHBsaWNhdGlv
        blJvdXRlCi8vIGFuZCBhcmUgbm90IG1lYW50IHRvIGJlIG92ZXJyaWRhYmxl
        Lgp2YXIgZGVmYXVsdEFjdGlvbkhhbmRsZXJzID0gewoKICB3aWxsUmVzb2x2
        ZU1vZGVsOiBmdW5jdGlvbih0cmFuc2l0aW9uLCBvcmlnaW5Sb3V0ZSkgewog
        ICAgb3JpZ2luUm91dGUucm91dGVyLl9zY2hlZHVsZUxvYWRpbmdFdmVudCh0
        cmFuc2l0aW9uLCBvcmlnaW5Sb3V0ZSk7CiAgfSwKCiAgZXJyb3I6IGZ1bmN0
        aW9uKGVycm9yLCB0cmFuc2l0aW9uLCBvcmlnaW5Sb3V0ZSkgewogICAgLy8g
        QXR0ZW1wdCB0byBmaW5kIGFuIGFwcHJvcHJpYXRlIGVycm9yIHN1YnN0YXRl
        IHRvIGVudGVyLgogICAgdmFyIHJvdXRlciA9IG9yaWdpblJvdXRlLnJvdXRl
        cjsKCiAgICB2YXIgdHJ5VG9wTGV2ZWwgPSBmb3JFYWNoUm91dGVBYm92ZShv
        cmlnaW5Sb3V0ZSwgdHJhbnNpdGlvbiwgZnVuY3Rpb24ocm91dGUsIGNoaWxk
        Um91dGUpIHsKICAgICAgdmFyIGNoaWxkRXJyb3JSb3V0ZU5hbWUgPSBmaW5k
        Q2hpbGRSb3V0ZU5hbWUocm91dGUsIGNoaWxkUm91dGUsICdlcnJvcicpOwog
        ICAgICBpZiAoY2hpbGRFcnJvclJvdXRlTmFtZSkgewogICAgICAgIHJvdXRl
        ci5pbnRlcm1lZGlhdGVUcmFuc2l0aW9uVG8oY2hpbGRFcnJvclJvdXRlTmFt
        ZSwgZXJyb3IpOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICByZXR1
        cm4gdHJ1ZTsKICAgIH0pOwoKICAgIGlmICh0cnlUb3BMZXZlbCkgewogICAg
        ICAvLyBDaGVjayBmb3IgdG9wLWxldmVsIGVycm9yIHN0YXRlIHRvIGVudGVy
        LgogICAgICBpZiAocm91dGVIYXNCZWVuRGVmaW5lZChvcmlnaW5Sb3V0ZS5y
        b3V0ZXIsICdhcHBsaWNhdGlvbl9lcnJvcicpKSB7CiAgICAgICAgcm91dGVy
        LmludGVybWVkaWF0ZVRyYW5zaXRpb25UbygnYXBwbGljYXRpb25fZXJyb3In
        LCBlcnJvcik7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICB9IGVsc2Ug
        ewogICAgICAvLyBEb24ndCBmaXJlIGFuIGFzc2VydGlvbiBpZiB3ZSBmb3Vu
        ZCBhbiBlcnJvciBzdWJzdGF0ZS4KICAgICAgcmV0dXJuOwogICAgfQoKICAg
        IEVtYmVyLkxvZ2dlci5lcnJvcignRXJyb3Igd2hpbGUgbG9hZGluZyByb3V0
        ZTogJyArIGVycm9yLnN0YWNrKTsKICB9LAoKICBsb2FkaW5nOiBmdW5jdGlv
        bih0cmFuc2l0aW9uLCBvcmlnaW5Sb3V0ZSkgewogICAgLy8gQXR0ZW1wdCB0
        byBmaW5kIGFuIGFwcHJvcHJpYXRlIGxvYWRpbmcgc3Vic3RhdGUgdG8gZW50
        ZXIuCiAgICB2YXIgcm91dGVyID0gb3JpZ2luUm91dGUucm91dGVyOwoKICAg
        IHZhciB0cnlUb3BMZXZlbCA9IGZvckVhY2hSb3V0ZUFib3ZlKG9yaWdpblJv
        dXRlLCB0cmFuc2l0aW9uLCBmdW5jdGlvbihyb3V0ZSwgY2hpbGRSb3V0ZSkg
        ewogICAgICB2YXIgY2hpbGRMb2FkaW5nUm91dGVOYW1lID0gZmluZENoaWxk
        Um91dGVOYW1lKHJvdXRlLCBjaGlsZFJvdXRlLCAnbG9hZGluZycpOwoKICAg
        ICAgaWYgKGNoaWxkTG9hZGluZ1JvdXRlTmFtZSkgewogICAgICAgIHJvdXRl
        ci5pbnRlcm1lZGlhdGVUcmFuc2l0aW9uVG8oY2hpbGRMb2FkaW5nUm91dGVO
        YW1lKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIC8vIERvbid0
        IGJ1YmJsZSBhYm92ZSBwaXZvdCByb3V0ZS4KICAgICAgaWYgKHRyYW5zaXRp
        b24ucGl2b3RIYW5kbGVyICE9PSByb3V0ZSkgewogICAgICAgIHJldHVybiB0
        cnVlOwogICAgICB9CiAgICB9KTsKCiAgICBpZiAodHJ5VG9wTGV2ZWwpIHsK
        ICAgICAgLy8gQ2hlY2sgZm9yIHRvcC1sZXZlbCBsb2FkaW5nIHN0YXRlIHRv
        IGVudGVyLgogICAgICBpZiAocm91dGVIYXNCZWVuRGVmaW5lZChvcmlnaW5S
        b3V0ZS5yb3V0ZXIsICdhcHBsaWNhdGlvbl9sb2FkaW5nJykpIHsKICAgICAg
        ICByb3V0ZXIuaW50ZXJtZWRpYXRlVHJhbnNpdGlvblRvKCdhcHBsaWNhdGlv
        bl9sb2FkaW5nJyk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICB9CiAg
        fQp9OwoKZnVuY3Rpb24gZmluZENoaWxkUm91dGVOYW1lKHBhcmVudFJvdXRl
        LCBvcmlnaW5hdGluZ0NoaWxkUm91dGUsIG5hbWUpIHsKICB2YXIgcm91dGVy
        ID0gcGFyZW50Um91dGUucm91dGVyLAogICAgICBjaGlsZE5hbWUsCiAgICAg
        IHRhcmdldENoaWxkUm91dGVOYW1lID0gb3JpZ2luYXRpbmdDaGlsZFJvdXRl
        LnJvdXRlTmFtZS5zcGxpdCgnLicpLnBvcCgpLAogICAgICBuYW1lc3BhY2Ug
        PSBwYXJlbnRSb3V0ZS5yb3V0ZU5hbWUgPT09ICdhcHBsaWNhdGlvbicgPyAn
        JyA6IHBhcmVudFJvdXRlLnJvdXRlTmFtZSArICcuJzsKCiAgCiAgLy8gU2Vj
        b25kLCB0cnkgZ2VuZXJhbCBsb2FkaW5nIHN0YXRlLCBlLmcuICdsb2FkaW5n
        JwogIGNoaWxkTmFtZSA9IG5hbWVzcGFjZSArIG5hbWU7CiAgaWYgKHJvdXRl
        SGFzQmVlbkRlZmluZWQocm91dGVyLCBjaGlsZE5hbWUpKSB7CiAgICByZXR1
        cm4gY2hpbGROYW1lOwogIH0KfQoKZnVuY3Rpb24gcm91dGVIYXNCZWVuRGVm
        aW5lZChyb3V0ZXIsIG5hbWUpIHsKICB2YXIgY29udGFpbmVyID0gcm91dGVy
        LmNvbnRhaW5lcjsKICByZXR1cm4gcm91dGVyLmhhc1JvdXRlKG5hbWUpICYm
        CiAgICAgICAgIChjb250YWluZXIuaGFzKCd0ZW1wbGF0ZTonICsgbmFtZSkg
        fHwgY29udGFpbmVyLmhhcygncm91dGU6JyArIG5hbWUpKTsKfQoKZnVuY3Rp
        b24gdHJpZ2dlckV2ZW50KGhhbmRsZXJJbmZvcywgaWdub3JlRmFpbHVyZSwg
        YXJncykgewogIHZhciBuYW1lID0gYXJncy5zaGlmdCgpOwoKICBpZiAoIWhh
        bmRsZXJJbmZvcykgewogICAgaWYgKGlnbm9yZUZhaWx1cmUpIHsgcmV0dXJu
        OyB9CiAgICB0aHJvdyBuZXcgRW1iZXIuRXJyb3IoIkNhbid0IHRyaWdnZXIg
        YWN0aW9uICciICsgbmFtZSArICInIGJlY2F1c2UgeW91ciBhcHAgaGFzbid0
        IGZpbmlzaGVkIHRyYW5zaXRpb25pbmcgaW50byBpdHMgZmlyc3Qgcm91dGUu
        IFRvIHRyaWdnZXIgYW4gYWN0aW9uIG9uIGRlc3RpbmF0aW9uIHJvdXRlcyBk
        dXJpbmcgYSB0cmFuc2l0aW9uLCB5b3UgY2FuIGNhbGwgYC5zZW5kKClgIG9u
        IHRoZSBgVHJhbnNpdGlvbmAgb2JqZWN0IHBhc3NlZCB0byB0aGUgYG1vZGVs
        L2JlZm9yZU1vZGVsL2FmdGVyTW9kZWxgIGhvb2tzLiIpOwogIH0KCiAgdmFy
        IGV2ZW50V2FzSGFuZGxlZCA9IGZhbHNlOwoKICBmb3IgKHZhciBpID0gaGFu
        ZGxlckluZm9zLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7CiAgICB2YXIg
        aGFuZGxlckluZm8gPSBoYW5kbGVySW5mb3NbaV0sCiAgICAgICAgaGFuZGxl
        ciA9IGhhbmRsZXJJbmZvLmhhbmRsZXI7CgogICAgaWYgKGhhbmRsZXIuX2Fj
        dGlvbnMgJiYgaGFuZGxlci5fYWN0aW9uc1tuYW1lXSkgewogICAgICBpZiAo
        aGFuZGxlci5fYWN0aW9uc1tuYW1lXS5hcHBseShoYW5kbGVyLCBhcmdzKSA9
        PT0gdHJ1ZSkgewogICAgICAgIGV2ZW50V2FzSGFuZGxlZCA9IHRydWU7CiAg
        ICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICB9CiAg
        fQoKICBpZiAoZGVmYXVsdEFjdGlvbkhhbmRsZXJzW25hbWVdKSB7CiAgICBk
        ZWZhdWx0QWN0aW9uSGFuZGxlcnNbbmFtZV0uYXBwbHkobnVsbCwgYXJncyk7
        CiAgICByZXR1cm47CiAgfQoKICBpZiAoIWV2ZW50V2FzSGFuZGxlZCAmJiAh
        aWdub3JlRmFpbHVyZSkgewogICAgdGhyb3cgbmV3IEVtYmVyLkVycm9yKCJO
        b3RoaW5nIGhhbmRsZWQgdGhlIGFjdGlvbiAnIiArIG5hbWUgKyAiJy4gSWYg
        eW91IGRpZCBoYW5kbGUgdGhlIGFjdGlvbiwgdGhpcyBlcnJvciBjYW4gYmUg
        Y2F1c2VkIGJ5IHJldHVybmluZyB0cnVlIGZyb20gYW4gYWN0aW9uIGhhbmRs
        ZXIgaW4gYSBjb250cm9sbGVyLCBjYXVzaW5nIHRoZSBhY3Rpb24gdG8gYnVi
        YmxlLiIpOwogIH0KfQoKZnVuY3Rpb24gdXBkYXRlUGF0aHMocm91dGVyKSB7
        CiAgdmFyIGFwcENvbnRyb2xsZXIgPSByb3V0ZXIuY29udGFpbmVyLmxvb2t1
        cCgnY29udHJvbGxlcjphcHBsaWNhdGlvbicpOwoKICBpZiAoIWFwcENvbnRy
        b2xsZXIpIHsKICAgIC8vIGFwcENvbnRyb2xsZXIgbWlnaHQgbm90IGV4aXN0
        IHdoZW4gdG9wLWxldmVsIGxvYWRpbmcvZXJyb3IKICAgIC8vIHN1YnN0YXRl
        cyBoYXZlIGJlZW4gZW50ZXJlZCBzaW5jZSBBcHBsaWNhdGlvblJvdXRlIGhh
        c24ndAogICAgLy8gYWN0dWFsbHkgYmVlbiBlbnRlcmVkIGF0IHRoYXQgcG9p
        bnQuCiAgICByZXR1cm47CiAgfQoKICB2YXIgaW5mb3MgPSByb3V0ZXIucm91
        dGVyLmN1cnJlbnRIYW5kbGVySW5mb3MsCiAgICAgIHBhdGggPSBFbWJlci5S
        b3V0ZXIuX3JvdXRlUGF0aChpbmZvcyk7CgogIGlmICghKCdjdXJyZW50UGF0
        aCcgaW4gYXBwQ29udHJvbGxlcikpIHsKICAgIGRlZmluZVByb3BlcnR5KGFw
        cENvbnRyb2xsZXIsICdjdXJyZW50UGF0aCcpOwogIH0KCiAgc2V0KGFwcENv
        bnRyb2xsZXIsICdjdXJyZW50UGF0aCcsIHBhdGgpOwoKICBpZiAoISgnY3Vy
        cmVudFJvdXRlTmFtZScgaW4gYXBwQ29udHJvbGxlcikpIHsKICAgIGRlZmlu
        ZVByb3BlcnR5KGFwcENvbnRyb2xsZXIsICdjdXJyZW50Um91dGVOYW1lJyk7
        CiAgfQoKICBzZXQoYXBwQ29udHJvbGxlciwgJ2N1cnJlbnRSb3V0ZU5hbWUn
        LCBpbmZvc1tpbmZvcy5sZW5ndGggLSAxXS5uYW1lKTsKfQoKRW1iZXIuUm91
        dGVyLnJlb3BlbkNsYXNzKHsKICByb3V0ZXI6IG51bGwsCiAgbWFwOiBmdW5j
        dGlvbihjYWxsYmFjaykgewogICAgdmFyIHJvdXRlciA9IHRoaXMucm91dGVy
        OwogICAgaWYgKCFyb3V0ZXIpIHsKICAgICAgcm91dGVyID0gbmV3IFJvdXRl
        cigpOwogICAgICByb3V0ZXIuY2FsbGJhY2tzID0gW107CiAgICAgIHJvdXRl
        ci50cmlnZ2VyRXZlbnQgPSB0cmlnZ2VyRXZlbnQ7CiAgICAgIHRoaXMucmVv
        cGVuQ2xhc3MoeyByb3V0ZXI6IHJvdXRlciB9KTsKICAgIH0KCiAgICB2YXIg
        ZHNsID0gRW1iZXIuUm91dGVyRFNMLm1hcChmdW5jdGlvbigpIHsKICAgICAg
        dGhpcy5yZXNvdXJjZSgnYXBwbGljYXRpb24nLCB7IHBhdGg6ICIvIiB9LCBm
        dW5jdGlvbigpIHsKICAgICAgICBmb3IgKHZhciBpPTA7IGkgPCByb3V0ZXIu
        Y2FsbGJhY2tzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICByb3V0ZXIuY2Fs
        bGJhY2tzW2ldLmNhbGwodGhpcyk7CiAgICAgICAgfQogICAgICAgIGNhbGxi
        YWNrLmNhbGwodGhpcyk7CiAgICAgIH0pOwogICAgfSk7CgogICAgcm91dGVy
        LmNhbGxiYWNrcy5wdXNoKGNhbGxiYWNrKTsKICAgIHJvdXRlci5tYXAoZHNs
        LmdlbmVyYXRlKCkpOwogICAgcmV0dXJuIHJvdXRlcjsKICB9LAoKICBfcm91
        dGVQYXRoOiBmdW5jdGlvbihoYW5kbGVySW5mb3MpIHsKICAgIHZhciBwYXRo
        ID0gW107CgogICAgLy8gV2UgaGF2ZSB0byBoYW5kbGUgY29hbGVzY2luZyBy
        ZXNvdXJjZSBuYW1lcyB0aGF0CiAgICAvLyBhcmUgcHJlZml4ZWQgd2l0aCB0
        aGVpciBwYXJlbnQncyBuYW1lcywgZS5nLgogICAgLy8gWydmb28nLCAnZm9v
        LmJhci5iYXonXSA9PiAnZm9vLmJhci5iYXonLCBub3QgJ2Zvby5mb28uYmFy
        LmJheicKCiAgICBmdW5jdGlvbiBpbnRlcnNlY3Rpb25NYXRjaGVzKGExLCBh
        MikgewogICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gYTEubGVuZ3RoOyBp
        IDwgbGVuOyArK2kpIHsKICAgICAgICBpZiAoYTFbaV0gIT09IGEyW2ldKSB7
        CiAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgICB9CiAg
        ICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZvciAodmFyIGk9MSwgbD1o
        YW5kbGVySW5mb3MubGVuZ3RoOyBpPGw7IGkrKykgewogICAgICB2YXIgbmFt
        ZSA9IGhhbmRsZXJJbmZvc1tpXS5uYW1lLAogICAgICAgICAgbmFtZVBhcnRz
        ID0gbmFtZS5zcGxpdCgiLiIpLAogICAgICAgICAgb2xkTmFtZVBhcnRzID0g
        c2xpY2UuY2FsbChwYXRoKTsKCiAgICAgIHdoaWxlIChvbGROYW1lUGFydHMu
        bGVuZ3RoKSB7CiAgICAgICAgaWYgKGludGVyc2VjdGlvbk1hdGNoZXMob2xk
        TmFtZVBhcnRzLCBuYW1lUGFydHMpKSB7CiAgICAgICAgICBicmVhazsKICAg
        ICAgICB9CiAgICAgICAgb2xkTmFtZVBhcnRzLnNoaWZ0KCk7CiAgICAgIH0K
        CiAgICAgIHBhdGgucHVzaC5hcHBseShwYXRoLCBuYW1lUGFydHMuc2xpY2Uo
        b2xkTmFtZVBhcnRzLmxlbmd0aCkpOwogICAgfQoKICAgIHJldHVybiBwYXRo
        LmpvaW4oIi4iKTsKICB9LAoKICBfdHJhbnNsYXRlUXVlcnlQYXJhbXM6IGZ1
        bmN0aW9uKHF1ZXJ5UGFyYW1zLCB0cmFuc2xhdGlvbnMsIHJvdXRlTmFtZSkg
        ewogICAgZm9yICh2YXIgbmFtZSBpbiBxdWVyeVBhcmFtcykgewogICAgICBp
        ZiAoIXF1ZXJ5UGFyYW1zLmhhc093blByb3BlcnR5KG5hbWUpKSB7IGNvbnRp
        bnVlOyB9CgogICAgICBpZiAobmFtZSBpbiB0cmFuc2xhdGlvbnMpIHsKICAg
        ICAgICBxdWVyeVBhcmFtc1t0cmFuc2xhdGlvbnNbbmFtZV1dID0gcXVlcnlQ
        YXJhbXNbbmFtZV07CiAgICAgICAgZGVsZXRlIHF1ZXJ5UGFyYW1zW25hbWVd
        OwogICAgICB9IGVsc2UgewogICAgICAgIEVtYmVyLmFzc2VydChmbXQoIllv
        dSBzdXBwbGllZCBhbiB1bmtub3duIHF1ZXJ5IHBhcmFtIGNvbnRyb2xsZXIg
        cHJvcGVydHkgJyVAJyBmb3Igcm91dGUgJyVAJy4gT25seSB0aGUgZm9sbG93
        aW5nIHF1ZXJ5IHBhcmFtIHByb3BlcnRpZXMgY2FuIGJlIHNldCBmb3IgdGhp
        cyByb3V0ZTogJUAiLCBbbmFtZSwgcm91dGVOYW1lLCBFbWJlci5rZXlzKHRy
        YW5zbGF0aW9ucyldKSwgbmFtZSBpbiBxdWVyeVBhcmFtcyk7CiAgICAgIH0K
        ICAgIH0KICB9Cn0pOwoKCgp9KSgpOwoKCgooZnVuY3Rpb24oKSB7Ci8qKgpA
        bW9kdWxlIGVtYmVyCkBzdWJtb2R1bGUgZW1iZXItcm91dGluZwoqLwoKdmFy
        IGdldCA9IEVtYmVyLmdldCwgc2V0ID0gRW1iZXIuc2V0LAogICAgZ2V0UHJv
        cGVydGllcyA9IEVtYmVyLmdldFByb3BlcnRpZXMsCiAgICBjbGFzc2lmeSA9
        IEVtYmVyLlN0cmluZy5jbGFzc2lmeSwKICAgIGZtdCA9IEVtYmVyLlN0cmlu
        Zy5mbXQsCiAgICBhX2ZvckVhY2ggPSBFbWJlci5FbnVtZXJhYmxlVXRpbHMu
        Zm9yRWFjaCwKICAgIGFfcmVwbGFjZSA9IEVtYmVyLkVudW1lcmFibGVVdGls
        cy5yZXBsYWNlOwoKCi8qKgogIFRoZSBgRW1iZXIuUm91dGVgIGNsYXNzIGlz
        IHVzZWQgdG8gZGVmaW5lIGluZGl2aWR1YWwgcm91dGVzLiBSZWZlciB0bwog
        IHRoZSBbcm91dGluZyBndWlkZV0oaHR0cDovL2VtYmVyanMuY29tL2d1aWRl
        cy9yb3V0aW5nLykgZm9yIGRvY3VtZW50YXRpb24uCgogIEBjbGFzcyBSb3V0
        ZQogIEBuYW1lc3BhY2UgRW1iZXIKICBAZXh0ZW5kcyBFbWJlci5PYmplY3QK
        ICBAdXNlcyBFbWJlci5BY3Rpb25IYW5kbGVyCiovCkVtYmVyLlJvdXRlID0g
        RW1iZXIuT2JqZWN0LmV4dGVuZChFbWJlci5BY3Rpb25IYW5kbGVyLCB7Cgog
        IC8qKgogICAgQHByaXZhdGUKCiAgICBAbWV0aG9kIGV4aXQKICAqLwogIGV4
        aXQ6IGZ1bmN0aW9uKCkgewogICAgICAgIHRoaXMuZGVhY3RpdmF0ZSgpOwog
        ICAgdGhpcy50ZWFyZG93blZpZXdzKCk7CiAgfSwKCiAgLyoqCiAgICBAcHJp
        dmF0ZQoKICAgIEBtZXRob2QgZW50ZXIKICAqLwogIGVudGVyOiBmdW5jdGlv
        bigpIHsKICAgIHRoaXMuYWN0aXZhdGUoKTsKICB9LAoKICAvKioKICAgIFRo
        ZSBuYW1lIG9mIHRoZSB2aWV3IHRvIHVzZSBieSBkZWZhdWx0IHdoZW4gcmVu
        ZGVyaW5nIHRoaXMgcm91dGVzIHRlbXBsYXRlLgoKICAgIFdoZW4gcmVuZGVy
        aW5nIGEgdGVtcGxhdGUsIHRoZSByb3V0ZSB3aWxsLCBieSBkZWZhdWx0LCBk
        ZXRlcm1pbmUgdGhlCiAgICB0ZW1wbGF0ZSBhbmQgdmlldyB0byB1c2UgZnJv
        bSB0aGUgbmFtZSBvZiB0aGUgcm91dGUgaXRzZWxmLiBJZiB5b3UgbmVlZCB0
        bwogICAgZGVmaW5lIGEgc3BlY2lmaWMgdmlldywgc2V0IHRoaXMgcHJvcGVy
        dHkuCgogICAgVGhpcyBpcyB1c2VmdWwgd2hlbiBtdWx0aXBsZSByb3V0ZXMg
        d291bGQgYmVuZWZpdCBmcm9tIHVzaW5nIHRoZSBzYW1lIHZpZXcKICAgIGJl
        Y2F1c2UgaXQgZG9lc24ndCByZXF1aXJlIGEgY3VzdG9tIGByZW5kZXJUZW1w
        bGF0ZWAgbWV0aG9kLiBGb3IgZXhhbXBsZSwKICAgIHRoZSBmb2xsb3dpbmcg
        cm91dGVzIHdpbGwgYWxsIHJlbmRlciB1c2luZyB0aGUgYEFwcC5Qb3N0c0xp
        c3RWaWV3YCB2aWV3OgoKICAgIGBgYGpzCiAgICB2YXIgUG9zdHNMaXN0ID0g
        RW1iZXIuUm91dGUuZXh0ZW5kKHsKICAgICAgdmlld05hbWU6ICdwb3N0c0xp
        c3QnLAogICAgfSk7CgogICAgQXBwLlBvc3RzSW5kZXhSb3V0ZSA9IFBvc3Rz
        TGlzdC5leHRlbmQoKTsKICAgIEFwcC5Qb3N0c0FyY2hpdmVkUm91dGUgPSBQ
        b3N0c0xpc3QuZXh0ZW5kKCk7CiAgICBgYGAKCiAgICBAcHJvcGVydHkgdmll
        d05hbWUKICAgIEB0eXBlIFN0cmluZwogICAgQGRlZmF1bHQgbnVsbAogICov
        CiAgdmlld05hbWU6IG51bGwsCgogIC8qKgogICAgVGhlIG5hbWUgb2YgdGhl
        IHRlbXBsYXRlIHRvIHVzZSBieSBkZWZhdWx0IHdoZW4gcmVuZGVyaW5nIHRo
        aXMgcm91dGVzCiAgICB0ZW1wbGF0ZS4KCiAgICBUaGlzIGlzIHNpbWlsYXIg
        d2l0aCBgdmlld05hbWVgLCBidXQgaXMgdXNlZnVsIHdoZW4geW91IGp1c3Qg
        d2FudCBhIGN1c3RvbQogICAgdGVtcGxhdGUgd2l0aG91dCBhIHZpZXcuCgog
        ICAgYGBganMKICAgIHZhciBQb3N0c0xpc3QgPSBFbWJlci5Sb3V0ZS5leHRl
        bmQoewogICAgICB0ZW1wbGF0ZU5hbWU6ICdwb3N0cy9saXN0JwogICAgfSk7
        CgogICAgQXBwLlBvc3RzSW5kZXhSb3V0ZSA9IFBvc3RzTGlzdC5leHRlbmQo
        KTsKICAgIEFwcC5Qb3N0c0FyY2hpdmVkUm91dGUgPSBQb3N0c0xpc3QuZXh0
        ZW5kKCk7CiAgICBgYGAKCiAgICBAcHJvcGVydHkgdGVtcGxhdGVOYW1lCiAg
        ICBAdHlwZSBTdHJpbmcKICAgIEBkZWZhdWx0IG51bGwKICAqLwogIHRlbXBs
        YXRlTmFtZTogbnVsbCwKCiAgLyoqCiAgICBUaGUgbmFtZSBvZiB0aGUgY29u
        dHJvbGxlciB0byBhc3NvY2lhdGUgd2l0aCB0aGlzIHJvdXRlLgoKICAgIEJ5
        IGRlZmF1bHQsIEVtYmVyIHdpbGwgbG9va3VwIGEgcm91dGUncyBjb250cm9s
        bGVyIHRoYXQgbWF0Y2hlcyB0aGUgbmFtZQogICAgb2YgdGhlIHJvdXRlIChp
        LmUuIGBBcHAuUG9zdENvbnRyb2xsZXJgIGZvciBgQXBwLlBvc3RSb3V0ZWAp
        LiBIb3dldmVyLAogICAgaWYgeW91IHdvdWxkIGxpa2UgdG8gZGVmaW5lIGEg
        c3BlY2lmaWMgY29udHJvbGxlciB0byB1c2UsIHlvdSBjYW4gZG8gc28KICAg
        IHVzaW5nIHRoaXMgcHJvcGVydHkuCgogICAgVGhpcyBpcyB1c2VmdWwgaW4g
        bWFueSB3YXlzLCBhcyB0aGUgY29udHJvbGxlciBzcGVjaWZpZWQgd2lsbCBi
        ZToKCiAgICAqIHBhc3NlZCB0byB0aGUgYHNldHVwQ29udHJvbGxlcmAgbWV0
        aG9kLgogICAgKiB1c2VkIGFzIHRoZSBjb250cm9sbGVyIGZvciB0aGUgdmll
        dyBiZWluZyByZW5kZXJlZCBieSB0aGUgcm91dGUuCiAgICAqIHJldHVybmVk
        IGZyb20gYSBjYWxsIHRvIGBjb250cm9sbGVyRm9yYCBmb3IgdGhlIHJvdXRl
        LgoKICAgIEBwcm9wZXJ0eSBjb250cm9sbGVyTmFtZQogICAgQHR5cGUgU3Ry
        aW5nCiAgICBAZGVmYXVsdCBudWxsCiAgKi8KICBjb250cm9sbGVyTmFtZTog
        bnVsbCwKCiAgLyoqCiAgICBUaGUgY29sbGVjdGlvbiBvZiBmdW5jdGlvbnMs
        IGtleWVkIGJ5IG5hbWUsIGF2YWlsYWJsZSBvbiB0aGlzIHJvdXRlIGFzCiAg
        ICBhY3Rpb24gdGFyZ2V0cy4KCiAgICBUaGVzZSBmdW5jdGlvbnMgd2lsbCBi
        ZSBpbnZva2VkIHdoZW4gYSBtYXRjaGluZyBge3thY3Rpb259fWAgaXMgdHJp
        Z2dlcmVkCiAgICBmcm9tIHdpdGhpbiBhIHRlbXBsYXRlIGFuZCB0aGUgYXBw
        bGljYXRpb24ncyBjdXJyZW50IHJvdXRlIGlzIHRoaXMgcm91dGUuCgogICAg
        QWN0aW9ucyBjYW4gYWxzbyBiZSBpbnZva2VkIGZyb20gb3RoZXIgcGFydHMg
        b2YgeW91ciBhcHBsaWNhdGlvbiB2aWEgYFJvdXRlI3NlbmRgCiAgICBvciBg
        Q29udHJvbGxlciNzZW5kYC4KCiAgICBUaGUgYGFjdGlvbnNgIGhhc2ggd2ls
        bCBpbmhlcml0IGFjdGlvbiBoYW5kbGVycyBmcm9tCiAgICB0aGUgYGFjdGlv
        bnNgIGhhc2ggZGVmaW5lZCBvbiBleHRlbmRlZCBSb3V0ZSBwYXJlbnQgY2xh
        c3NlcwogICAgb3IgbWl4aW5zIHJhdGhlciB0aGFuIGp1c3QgcmVwbGFjZSB0
        aGUgZW50aXJlIGhhc2gsIGUuZy46CgogICAgYGBganMKICAgIEFwcC5DYW5E
        aXNwbGF5QmFubmVyID0gRW1iZXIuTWl4aW4uY3JlYXRlKHsKICAgICAgYWN0
        aW9uczogewogICAgICAgIGRpc3BsYXlCYW5uZXI6IGZ1bmN0aW9uKG1zZykg
        ewogICAgICAgICAgLy8gLi4uCiAgICAgICAgfQogICAgICB9CiAgICB9KTsK
        CiAgICBBcHAuV2VsY29tZVJvdXRlID0gRW1iZXIuUm91dGUuZXh0ZW5kKEFw
        cC5DYW5EaXNwbGF5QmFubmVyLCB7CiAgICAgIGFjdGlvbnM6IHsKICAgICAg
        ICBwbGF5TXVzaWM6IGZ1bmN0aW9uKCkgewogICAgICAgICAgLy8gLi4uCiAg
        ICAgICAgfQogICAgICB9CiAgICB9KTsKCiAgICAvLyBgV2VsY29tZVJvdXRl
        YCwgd2hlbiBhY3RpdmUsIHdpbGwgYmUgYWJsZSB0byByZXNwb25kCiAgICAv
        LyB0byBib3RoIGFjdGlvbnMsIHNpbmNlIHRoZSBhY3Rpb25zIGhhc2ggaXMg
        bWVyZ2VkIHJhdGhlcgogICAgLy8gdGhlbiByZXBsYWNlZCB3aGVuIGV4dGVu
        ZGluZyBtaXhpbnMgLyBwYXJlbnQgY2xhc3Nlcy4KICAgIHRoaXMuc2VuZCgn
        ZGlzcGxheUJhbm5lcicpOwogICAgdGhpcy5zZW5kKCdwbGF5TXVzaWMnKTsK
        ICAgIGBgYAoKICAgIFdpdGhpbiBhIHJvdXRlJ3MgYWN0aW9uIGhhbmRsZXIs
        IHRoZSB2YWx1ZSBvZiB0aGUgYHRoaXNgIGNvbnRleHQKICAgIGlzIHRoZSBS
        b3V0ZSBvYmplY3Q6CgogICAgYGBganMKICAgIEFwcC5Tb25nUm91dGUgPSBF
        bWJlci5Sb3V0ZS5leHRlbmQoewogICAgICBhY3Rpb25zOiB7CiAgICAgICAg
        bXlBY3Rpb246IGZ1bmN0aW9uKCkgewogICAgICAgICAgdGhpcy5jb250cm9s
        bGVyRm9yKCJzb25nIik7CiAgICAgICAgICB0aGlzLnRyYW5zaXRpb25Ubygi
        b3RoZXIucm91dGUiKTsKICAgICAgICAgIC4uLgogICAgICAgIH0KICAgICAg
        fQogICAgfSk7CiAgICBgYGAKCiAgICBJdCBpcyBhbHNvIHBvc3NpYmxlIHRv
        IGNhbGwgYHRoaXMuX3N1cGVyKClgIGZyb20gd2l0aGluIGFuCiAgICBhY3Rp
        b24gaGFuZGxlciBpZiBpdCBvdmVycmlkZXMgYSBoYW5kbGVyIGRlZmluZWQg
        b24gYSBwYXJlbnQKICAgIGNsYXNzIG9yIG1peGluOgoKICAgIFRha2UgZm9y
        IGV4YW1wbGUgdGhlIGZvbGxvd2luZyByb3V0ZXM6CgogICAgYGBganMKICAg
        IEFwcC5EZWJ1Z1JvdXRlID0gRW1iZXIuTWl4aW4uY3JlYXRlKHsKICAgICAg
        YWN0aW9uczogewogICAgICAgIGRlYnVnUm91dGVJbmZvcm1hdGlvbjogZnVu
        Y3Rpb24oKSB7CiAgICAgICAgICBjb25zb2xlLmRlYnVnKCJ0cm9sb2xvIik7
        CiAgICAgICAgfQogICAgICB9CiAgICB9KTsKCiAgICBBcHAuQW5ub3lpbmdE
        ZWJ1Z1JvdXRlID0gRW1iZXIuUm91dGUuZXh0ZW5kKEFwcC5EZWJ1Z1JvdXRl
        LCB7CiAgICAgIGFjdGlvbnM6IHsKICAgICAgICBkZWJ1Z1JvdXRlSW5mb3Jt
        YXRpb246IGZ1bmN0aW9uKCkgewogICAgICAgICAgLy8gYWxzbyBjYWxsIHRo
        ZSBkZWJ1Z1JvdXRlSW5mb3JtYXRpb24gb2YgbWl4ZWQgaW4gQXBwLkRlYnVn
        Um91dGUKICAgICAgICAgIHRoaXMuX3N1cGVyKCk7CgogICAgICAgICAgLy8g
        c2hvdyBhZGRpdGlvbmFsIGFubm95YW5jZQogICAgICAgICAgd2luZG93LmFs
        ZXJ0KC4uLik7CiAgICAgICAgfQogICAgICB9CiAgICB9KTsKICAgIGBgYAoK
        ICAgICMjIEJ1YmJsaW5nCgogICAgQnkgZGVmYXVsdCwgYW4gYWN0aW9uIHdp
        bGwgc3RvcCBidWJibGluZyBvbmNlIGEgaGFuZGxlciBkZWZpbmVkCiAgICBv
        biB0aGUgYGFjdGlvbnNgIGhhc2ggaGFuZGxlcyBpdC4gVG8gY29udGludWUg
        YnViYmxpbmcgdGhlIGFjdGlvbiwKICAgIHlvdSBtdXN0IHJldHVybiBgdHJ1
        ZWAgZnJvbSB0aGUgaGFuZGxlcjoKCiAgICBgYGBqcwogICAgQXBwLlJvdXRl
        ci5tYXAoZnVuY3Rpb24oKSB7CiAgICAgIHRoaXMucmVzb3VyY2UoImFsYnVt
        IiwgZnVuY3Rpb24oKSB7CiAgICAgICAgdGhpcy5yb3V0ZSgic29uZyIpOwog
        ICAgICB9KTsKICAgIH0pOwoKICAgIEFwcC5BbGJ1bVJvdXRlID0gRW1iZXIu
        Um91dGUuZXh0ZW5kKHsKICAgICAgYWN0aW9uczogewogICAgICAgIHN0YXJ0
        UGxheWluZzogZnVuY3Rpb24oKSB7CiAgICAgICAgfQogICAgICB9CiAgICB9
        KTsKCiAgICBBcHAuQWxidW1Tb25nUm91dGUgPSBFbWJlci5Sb3V0ZS5leHRl
        bmQoewogICAgICBhY3Rpb25zOiB7CiAgICAgICAgc3RhcnRQbGF5aW5nOiBm
        dW5jdGlvbigpIHsKICAgICAgICAgIC8vIC4uLgoKICAgICAgICAgIGlmIChh
        Y3Rpb25TaG91bGRBbHNvQmVUcmlnZ2VyZWRPblBhcmVudFJvdXRlKSB7CiAg
        ICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgfQogICAgICAgIH0K
        ICAgICAgfQogICAgfSk7CiAgICBgYGAKCiAgICAjIyBCdWlsdC1pbiBhY3Rp
        b25zCgogICAgVGhlcmUgYXJlIGEgZmV3IGJ1aWx0LWluIGFjdGlvbnMgcGVy
        dGFpbmluZyB0byB0cmFuc2l0aW9ucyB0aGF0IHlvdQogICAgY2FuIHVzZSB0
        byBjdXN0b21pemUgdHJhbnNpdGlvbiBiZWhhdmlvcjogYHdpbGxUcmFuc2l0
        aW9uYCBhbmQKICAgIGBlcnJvcmAuCgogICAgIyMjIGB3aWxsVHJhbnNpdGlv
        bmAKCiAgICBUaGUgYHdpbGxUcmFuc2l0aW9uYCBhY3Rpb24gaXMgZmlyZWQg
        YXQgdGhlIGJlZ2lubmluZyBvZiBhbnkKICAgIGF0dGVtcHRlZCB0cmFuc2l0
        aW9uIHdpdGggYSBgVHJhbnNpdGlvbmAgb2JqZWN0IGFzIHRoZSBzb2xlCiAg
        ICBhcmd1bWVudC4gVGhpcyBhY3Rpb24gY2FuIGJlIHVzZWQgZm9yIGFib3J0
        aW5nLCByZWRpcmVjdGluZywKICAgIG9yIGRlY29yYXRpbmcgdGhlIHRyYW5z
        aXRpb24gZnJvbSB0aGUgY3VycmVudGx5IGFjdGl2ZSByb3V0ZXMuCgogICAg
        QSBnb29kIGV4YW1wbGUgaXMgcHJldmVudGluZyBuYXZpZ2F0aW9uIHdoZW4g
        YSBmb3JtIGlzCiAgICBoYWxmLWZpbGxlZCBvdXQ6CgogICAgYGBganMKICAg
        IEFwcC5Db250YWN0Rm9ybVJvdXRlID0gRW1iZXIuUm91dGUuZXh0ZW5kKHsK
        ICAgICAgYWN0aW9uczogewogICAgICAgIHdpbGxUcmFuc2l0aW9uOiBmdW5j
        dGlvbih0cmFuc2l0aW9uKSB7CiAgICAgICAgICBpZiAodGhpcy5jb250cm9s
        bGVyLmdldCgndXNlckhhc0VudGVyZWREYXRhJykpIHsKICAgICAgICAgICAg
        dGhpcy5jb250cm9sbGVyLmRpc3BsYXlOYXZpZ2F0aW9uQ29uZmlybSgpOwog
        ICAgICAgICAgICB0cmFuc2l0aW9uLmFib3J0KCk7CiAgICAgICAgICB9CiAg
        ICAgICAgfQogICAgICB9CiAgICB9KTsKICAgIGBgYAoKICAgIFlvdSBjYW4g
        YWxzbyByZWRpcmVjdCBlbHNld2hlcmUgYnkgY2FsbGluZwogICAgYHRoaXMu
        dHJhbnNpdGlvblRvKCdlbHNld2hlcmUnKWAgZnJvbSB3aXRoaW4gYHdpbGxU
        cmFuc2l0aW9uYC4KICAgIE5vdGUgdGhhdCBgd2lsbFRyYW5zaXRpb25gIHdp
        bGwgbm90IGJlIGZpcmVkIGZvciB0aGUKICAgIHJlZGlyZWN0aW5nIGB0cmFu
        c2l0aW9uVG9gLCBzaW5jZSBgd2lsbFRyYW5zaXRpb25gIGRvZXNuJ3QKICAg
        IGZpcmUgd2hlbiB0aGVyZSBpcyBhbHJlYWR5IGEgdHJhbnNpdGlvbiB1bmRl
        cndheS4gSWYgeW91IHdhbnQKICAgIHN1YnNlcXVlbnQgYHdpbGxUcmFuc2l0
        aW9uYCBhY3Rpb25zIHRvIGZpcmUgZm9yIHRoZSByZWRpcmVjdGluZwogICAg
        dHJhbnNpdGlvbiwgeW91IG11c3QgZmlyc3QgZXhwbGljaXRseSBjYWxsCiAg
        ICBgdHJhbnNpdGlvbi5hYm9ydCgpYC4KCiAgICAjIyMgYGVycm9yYAoKICAg
        IFdoZW4gYXR0ZW1wdGluZyB0byB0cmFuc2l0aW9uIGludG8gYSByb3V0ZSwg
        YW55IG9mIHRoZSBob29rcwogICAgbWF5IHJldHVybiBhIHByb21pc2UgdGhh
        dCByZWplY3RzLCBhdCB3aGljaCBwb2ludCBhbiBgZXJyb3JgCiAgICBhY3Rp
        b24gd2lsbCBiZSBmaXJlZCBvbiB0aGUgcGFydGlhbGx5LWVudGVyZWQgcm91
        dGVzLCBhbGxvd2luZwogICAgZm9yIHBlci1yb3V0ZSBlcnJvciBoYW5kbGlu
        ZyBsb2dpYywgb3Igc2hhcmVkIGVycm9yIGhhbmRsaW5nCiAgICBsb2dpYyBk
        ZWZpbmVkIG9uIGEgcGFyZW50IHJvdXRlLgoKICAgIEhlcmUgaXMgYW4gZXhh
        bXBsZSBvZiBhbiBlcnJvciBoYW5kbGVyIHRoYXQgd2lsbCBiZSBpbnZva2Vk
        CiAgICBmb3IgcmVqZWN0ZWQgcHJvbWlzZXMgZnJvbSB0aGUgdmFyaW91cyBo
        b29rcyBvbiB0aGUgcm91dGUsCiAgICBhcyB3ZWxsIGFzIGFueSB1bmhhbmRs
        ZWQgZXJyb3JzIGZyb20gY2hpbGQgcm91dGVzOgoKICAgIGBgYGpzCiAgICBB
        cHAuQWRtaW5Sb3V0ZSA9IEVtYmVyLlJvdXRlLmV4dGVuZCh7CiAgICAgIGJl
        Zm9yZU1vZGVsOiBmdW5jdGlvbigpIHsKICAgICAgICByZXR1cm4gRW1iZXIu
        UlNWUC5yZWplY3QoImJhZCB0aGluZ3MhIik7CiAgICAgIH0sCgogICAgICBh
        Y3Rpb25zOiB7CiAgICAgICAgZXJyb3I6IGZ1bmN0aW9uKGVycm9yLCB0cmFu
        c2l0aW9uKSB7CiAgICAgICAgICAvLyBBc3N1bWluZyB3ZSBnb3QgaGVyZSBk
        dWUgdG8gdGhlIGVycm9yIGluIGBiZWZvcmVNb2RlbGAsCiAgICAgICAgICAv
        LyB3ZSBjYW4gZXhwZWN0IHRoYXQgZXJyb3IgPT09ICJiYWQgdGhpbmdzISIs
        CiAgICAgICAgICAvLyBidXQgYSBwcm9taXNlIG1vZGVsIHJlamVjdGluZyB3
        b3VsZCBhbHNvCiAgICAgICAgICAvLyBjYWxsIHRoaXMgaG9vaywgYXMgd291
        bGQgYW55IGVycm9ycyBlbmNvdW50ZXJlZAogICAgICAgICAgLy8gaW4gYGFm
        dGVyTW9kZWxgLgoKICAgICAgICAgIC8vIFRoZSBgZXJyb3JgIGhvb2sgaXMg
        YWxzbyBwcm92aWRlZCB0aGUgZmFpbGVkCiAgICAgICAgICAvLyBgdHJhbnNp
        dGlvbmAsIHdoaWNoIGNhbiBiZSBzdG9yZWQgYW5kIGxhdGVyCiAgICAgICAg
        ICAvLyBgLnJldHJ5KClgZCBpZiBkZXNpcmVkLgoKICAgICAgICAgIHRoaXMu
        dHJhbnNpdGlvblRvKCdsb2dpbicpOwogICAgICAgIH0KICAgICAgfQogICAg
        fSk7CiAgICBgYGAKCiAgICBgZXJyb3JgIGFjdGlvbnMgdGhhdCBidWJibGUg
        dXAgYWxsIHRoZSB3YXkgdG8gYEFwcGxpY2F0aW9uUm91dGVgCiAgICB3aWxs
        IGZpcmUgYSBkZWZhdWx0IGVycm9yIGhhbmRsZXIgdGhhdCBsb2dzIHRoZSBl
        cnJvci4gWW91IGNhbgogICAgc3BlY2lmeSB5b3VyIG93biBnbG9iYWwgZGVm
        YXVsdCBlcnJvciBoYW5kbGVyIGJ5IG92ZXJyaWRpbmcgdGhlCiAgICBgZXJy
        b3JgIGhhbmRsZXIgb24gYEFwcGxpY2F0aW9uUm91dGVgOgoKICAgIGBgYGpz
        CiAgICBBcHAuQXBwbGljYXRpb25Sb3V0ZSA9IEVtYmVyLlJvdXRlLmV4dGVu
        ZCh7CiAgICAgIGFjdGlvbnM6IHsKICAgICAgICBlcnJvcjogZnVuY3Rpb24o
        ZXJyb3IsIHRyYW5zaXRpb24pIHsKICAgICAgICAgIHRoaXMuY29udHJvbGxl
        ckZvcignYmFubmVyJykuZGlzcGxheUVycm9yKGVycm9yLm1lc3NhZ2UpOwog
        ICAgICAgIH0KICAgICAgfQogICAgfSk7CiAgICBgYGAKCiAgICBAcHJvcGVy
        dHkgYWN0aW9ucwogICAgQHR5cGUgSGFzaAogICAgQGRlZmF1bHQgbnVsbAog
        ICovCiAgX2FjdGlvbnM6IHsKICAgIGZpbmFsaXplUXVlcnlQYXJhbUNoYW5n
        ZTogZnVuY3Rpb24ocGFyYW1zLCBmaW5hbFBhcmFtcykgewogICAgICAgICAg
        fQogIH0sCgogIC8qKgogICAgQGRlcHJlY2F0ZWQKCiAgICBQbGVhc2UgdXNl
        IGBhY3Rpb25zYCBpbnN0ZWFkLgogICAgQG1ldGhvZCBldmVudHMKICAqLwog
        IGV2ZW50czogbnVsbCwKCiAgbWVyZ2VkUHJvcGVydGllczogWydldmVudHMn
        XSwKCiAgLyoqCiAgICBUaGlzIGhvb2sgaXMgZXhlY3V0ZWQgd2hlbiB0aGUg
        cm91dGVyIGNvbXBsZXRlbHkgZXhpdHMgdGhpcyByb3V0ZS4gSXQgaXMKICAg
        IG5vdCBleGVjdXRlZCB3aGVuIHRoZSBtb2RlbCBmb3IgdGhlIHJvdXRlIGNo
        YW5nZXMuCgogICAgQG1ldGhvZCBkZWFjdGl2YXRlCiAgKi8KICBkZWFjdGl2
        YXRlOiBFbWJlci5LLAoKICAvKioKICAgIFRoaXMgaG9vayBpcyBleGVjdXRl
        ZCB3aGVuIHRoZSByb3V0ZXIgZW50ZXJzIHRoZSByb3V0ZS4gSXQgaXMgbm90
        IGV4ZWN1dGVkCiAgICB3aGVuIHRoZSBtb2RlbCBmb3IgdGhlIHJvdXRlIGNo
        YW5nZXMuCgogICAgQG1ldGhvZCBhY3RpdmF0ZQogICovCiAgYWN0aXZhdGU6
        IEVtYmVyLkssCgogIC8qKgogICAgVHJhbnNpdGlvbiBpbnRvIGFub3RoZXIg
        cm91dGUuIE9wdGlvbmFsbHkgc3VwcGx5IG1vZGVsKHMpIGZvciB0aGUKICAg
        IHJvdXRlIGluIHF1ZXN0aW9uLiBJZiBtdWx0aXBsZSBtb2RlbHMgYXJlIHN1
        cHBsaWVkIHRoZXkgd2lsbCBiZSBhcHBsaWVkCiAgICBsYXN0IHRvIGZpcnN0
        IHJlY3Vyc2l2ZWx5IHVwIHRoZSByZXNvdXJjZSB0cmVlIChzZWUgTXVsdGlw
        bGUgTW9kZWxzIEV4YW1wbGUKICAgIGJlbG93KS4gVGhlIG1vZGVsKHMpIHdp
        bGwgYmUgc2VyaWFsaXplZCBpbnRvIHRoZSBVUkwgdXNpbmcgdGhlIGFwcHJv
        cHJpYXRlCiAgICByb3V0ZSdzIGBzZXJpYWxpemVgIGhvb2suIFNlZSBhbHNv
        ICdyZXBsYWNlV2l0aCcuCgogICAgU2ltcGxlIFRyYW5zaXRpb24gRXhhbXBs
        ZQoKICAgIGBgYGphdmFzY3JpcHQKICAgIEFwcC5Sb3V0ZXIubWFwKGZ1bmN0
        aW9uKCkgewogICAgICB0aGlzLnJvdXRlKCJpbmRleCIpOwogICAgICB0aGlz
        LnJvdXRlKCJzZWNyZXQiKTsKICAgICAgdGhpcy5yb3V0ZSgiZm91ck9oRm91
        ciIsIHsgcGF0aDogIio6In0pOwogICAgfSk7CgogICAgQXBwLkluZGV4Um91
        dGUgPSBFbWJlci5Sb3V0ZS5leHRlbmQoewogICAgICBhY3Rpb25zOiB7CiAg
        ICAgICAgbW92ZVRvU2VjcmV0OiBmdW5jdGlvbihjb250ZXh0KXsKICAgICAg
        ICAgIGlmIChhdXRob3JpemVkKCkpewogICAgICAgICAgICB0aGlzLnRyYW5z
        aXRpb25Ubygnc2VjcmV0JywgY29udGV4dCk7CiAgICAgICAgICB9CiAgICAg
        ICAgICAgIHRoaXMudHJhbnNpdGlvblRvKCdmb3VyT2hGb3VyJyk7CiAgICAg
        ICAgfQogICAgICB9CiAgICB9KTsKICAgIGBgYAoKICAgVHJhbnNpdGlvbiB0
        byBhIG5lc3RlZCByb3V0ZQoKICAgYGBgamF2YXNjcmlwdAogICBBcHAuUm91
        dGVyLm1hcChmdW5jdGlvbigpIHsKICAgICB0aGlzLnJlc291cmNlKCdhcnRp
        Y2xlcycsIHsgcGF0aDogJy9hcnRpY2xlcycgfSwgZnVuY3Rpb24oKSB7CiAg
        ICAgICB0aGlzLnJvdXRlKCduZXcnKTsKICAgICB9KTsKICAgfSk7CgogICBB
        cHAuSW5kZXhSb3V0ZSA9IEVtYmVyLlJvdXRlLmV4dGVuZCh7CiAgICAgYWN0
        aW9uczogewogICAgICAgdHJhbnNpdGlvblRvTmV3QXJ0aWNsZTogZnVuY3Rp
        b24oKSB7CiAgICAgICAgIHRoaXMudHJhbnNpdGlvblRvKCdhcnRpY2xlcy5u
        ZXcnKTsKICAgICAgIH0KICAgICB9CiAgIH0pOwogICBgYGAKCiAgICBNdWx0
        aXBsZSBNb2RlbHMgRXhhbXBsZQoKICAgIGBgYGphdmFzY3JpcHQKICAgIEFw
        cC5Sb3V0ZXIubWFwKGZ1bmN0aW9uKCkgewogICAgICB0aGlzLnJvdXRlKCJp
        bmRleCIpOwogICAgICB0aGlzLnJlc291cmNlKCdicmVha2Zhc3QnLCB7cGF0
        aDonOmJyZWFrZmFzdElkJ30sIGZ1bmN0aW9uKCl7CiAgICAgICAgdGhpcy5y
        ZXNvdXJjZSgnY2VyZWFsJywge3BhdGg6ICc6Y2VyZWFsSWQnfSk7CiAgICAg
        IH0pOwogICAgfSk7CgogICAgQXBwLkluZGV4Um91dGUgPSBFbWJlci5Sb3V0
        ZS5leHRlbmQoewogICAgICBhY3Rpb25zOiB7CiAgICAgICAgbW92ZVRvQ2hv
        Y29sYXRlQ2VyZWFsOiBmdW5jdGlvbigpewogICAgICAgICAgdmFyIGNlcmVh
        bCA9IHsgY2VyZWFsSWQ6ICJDaG9jb2xhdGVZdW1taW5lc3MifSwKICAgICAg
        ICAgICAgICBicmVha2Zhc3QgPSB7YnJlYWtmYXN0SWQ6ICJDZXJlYWxBbmRN
        aWxrIn07CgogICAgICAgICAgdGhpcy50cmFuc2l0aW9uVG8oJ2NlcmVhbCcs
        IGJyZWFrZmFzdCwgY2VyZWFsKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0p
        OwoKICAgIEBtZXRob2QgdHJhbnNpdGlvblRvCiAgICBAcGFyYW0ge1N0cmlu
        Z30gbmFtZSB0aGUgbmFtZSBvZiB0aGUgcm91dGUKICAgIEBwYXJhbSB7Li4u
        T2JqZWN0fSBtb2RlbHMgdGhlIG1vZGVsKHMpIHRvIGJlIHVzZWQgd2hpbGUg
        dHJhbnNpdGlvbmluZwogICAgdG8gdGhlIHJvdXRlLgogICAgQHJldHVybiB7
        VHJhbnNpdGlvbn0gdGhlIHRyYW5zaXRpb24gb2JqZWN0IGFzc29jaWF0ZWQg
        d2l0aCB0aGlzCiAgICAgIGF0dGVtcHRlZCB0cmFuc2l0aW9uCiAgKi8KICB0
        cmFuc2l0aW9uVG86IGZ1bmN0aW9uKG5hbWUsIGNvbnRleHQpIHsKICAgIHZh
        ciByb3V0ZXIgPSB0aGlzLnJvdXRlcjsKICAgIHJldHVybiByb3V0ZXIudHJh
        bnNpdGlvblRvLmFwcGx5KHJvdXRlciwgYXJndW1lbnRzKTsKICB9LAoKICAv
        KioKICAgIFBlcmZvcm0gYSBzeW5jaHJvbm91cyB0cmFuc2l0aW9uIGludG8g
        YW5vdGhlciByb3V0ZSB3aXRob3V0IGF0dGVtcHRpbmcKICAgIHRvIHJlc29s
        dmUgcHJvbWlzZXMsIHVwZGF0ZSB0aGUgVVJMLCBvciBhYm9ydCBhbnkgY3Vy
        cmVudGx5IGFjdGl2ZQogICAgYXN5bmNocm9ub3VzIHRyYW5zaXRpb25zIChp
        LmUuIHJlZ3VsYXIgdHJhbnNpdGlvbnMgY2F1c2VkIGJ5CiAgICBgdHJhbnNp
        dGlvblRvYCBvciBVUkwgY2hhbmdlcykuCgogICAgVGhpcyBtZXRob2QgaXMg
        aGFuZHkgZm9yIHBlcmZvcm1pbmcgaW50ZXJtZWRpYXRlIHRyYW5zaXRpb25z
        IG9uIHRoZQogICAgd2F5IHRvIGEgZmluYWwgZGVzdGluYXRpb24gcm91dGUs
        IGFuZCBpcyBjYWxsZWQgaW50ZXJuYWxseSBieSB0aGUKICAgIGRlZmF1bHQg
        aW1wbGVtZW50YXRpb25zIG9mIHRoZSBgZXJyb3JgIGFuZCBgbG9hZGluZ2Ag
        aGFuZGxlcnMuCgogICAgQG1ldGhvZCBpbnRlcm1lZGlhdGVUcmFuc2l0aW9u
        VG8KICAgIEBwYXJhbSB7U3RyaW5nfSBuYW1lIHRoZSBuYW1lIG9mIHRoZSBy
        b3V0ZQogICAgQHBhcmFtIHsuLi5PYmplY3R9IG1vZGVscyB0aGUgbW9kZWwo
        cykgdG8gYmUgdXNlZCB3aGlsZSB0cmFuc2l0aW9uaW5nCiAgICB0byB0aGUg
        cm91dGUuCiAgICovCiAgaW50ZXJtZWRpYXRlVHJhbnNpdGlvblRvOiBmdW5j
        dGlvbigpIHsKICAgIHZhciByb3V0ZXIgPSB0aGlzLnJvdXRlcjsKICAgIHJv
        dXRlci5pbnRlcm1lZGlhdGVUcmFuc2l0aW9uVG8uYXBwbHkocm91dGVyLCBh
        cmd1bWVudHMpOwogIH0sCgogIC8qKgogICAgUmVmcmVzaCB0aGUgbW9kZWwg
        b24gdGhpcyByb3V0ZSBhbmQgYW55IGNoaWxkIHJvdXRlcywgZmlyaW5nIHRo
        ZQogICAgYGJlZm9yZU1vZGVsYCwgYG1vZGVsYCwgYW5kIGBhZnRlck1vZGVs
        YCBob29rcyBpbiBhIHNpbWlsYXIgZmFzaGlvbgogICAgdG8gaG93IHJvdXRl
        cyBhcmUgZW50ZXJlZCB3aGVuIHRyYW5zaXRpb25pbmcgaW4gZnJvbSBvdGhl
        ciByb3V0ZS4KICAgIFRoZSBjdXJyZW50IHJvdXRlIHBhcmFtcyAoZS5nLiBg
        YXJ0aWNsZV9pZGApIHdpbGwgYmUgcGFzc2VkIGluCiAgICB0byB0aGUgcmVz
        cGVjdGl2ZSBtb2RlbCBob29rcywgYW5kIGlmIGEgZGlmZmVyZW50IG1vZGVs
        IGlzIHJldHVybmVkLAogICAgYHNldHVwQ29udHJvbGxlcmAgYW5kIGFzc29j
        aWF0ZWQgcm91dGUgaG9va3Mgd2lsbCByZS1maXJlIGFzIHdlbGwuCgogICAg
        QW4gZXhhbXBsZSB1c2FnZSBvZiB0aGlzIG1ldGhvZCBpcyByZS1xdWVyeWlu
        ZyB0aGUgc2VydmVyIGZvciB0aGUKICAgIGxhdGVzdCBpbmZvcm1hdGlvbiB1
        c2luZyB0aGUgc2FtZSBwYXJhbWV0ZXJzIGFzIHdoZW4gdGhlIHJvdXRlCiAg
        ICB3YXMgZmlyc3QgZW50ZXJlZC4KCiAgICBOb3RlIHRoYXQgdGhpcyB3aWxs
        IGNhdXNlIGBtb2RlbGAgaG9va3MgdG8gZmlyZSBldmVuIG9uIHJvdXRlcwog
        ICAgdGhhdCB3ZXJlIHByb3ZpZGVkIGEgbW9kZWwgb2JqZWN0IHdoZW4gdGhl
        IHJvdXRlIHdhcyBpbml0aWFsbHkKICAgIGVudGVyZWQuCgogICAgQG1ldGhv
        ZCByZWZyZXNoCiAgICBAcmV0dXJuIHtUcmFuc2l0aW9ufSB0aGUgdHJhbnNp
        dGlvbiBvYmplY3QgYXNzb2NpYXRlZCB3aXRoIHRoaXMKICAgICAgYXR0ZW1w
        dGVkIHRyYW5zaXRpb24KICAgKi8KICByZWZyZXNoOiBmdW5jdGlvbigpIHsK
        ICAgIHJldHVybiB0aGlzLnJvdXRlci5yb3V0ZXIucmVmcmVzaCh0aGlzKS5t
        ZXRob2QoJ3JlcGxhY2UnKTsKICB9LAoKICAvKioKICAgIFRyYW5zaXRpb24g
        aW50byBhbm90aGVyIHJvdXRlIHdoaWxlIHJlcGxhY2luZyB0aGUgY3VycmVu
        dCBVUkwsIGlmIHBvc3NpYmxlLgogICAgVGhpcyB3aWxsIHJlcGxhY2UgdGhl
        IGN1cnJlbnQgaGlzdG9yeSBlbnRyeSBpbnN0ZWFkIG9mIGFkZGluZyBhIG5l
        dyBvbmUuCiAgICBCZXNpZGUgdGhhdCwgaXQgaXMgaWRlbnRpY2FsIHRvIGB0
        cmFuc2l0aW9uVG9gIGluIGFsbCBvdGhlciByZXNwZWN0cy4gU2VlCiAgICAn
        dHJhbnNpdGlvblRvJyBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvbiByZWdh
        cmRpbmcgbXVsdGlwbGUgbW9kZWxzLgoKICAgIEV4YW1wbGUKCiAgICBgYGBq
        YXZhc2NyaXB0CiAgICBBcHAuUm91dGVyLm1hcChmdW5jdGlvbigpIHsKICAg
        ICAgdGhpcy5yb3V0ZSgiaW5kZXgiKTsKICAgICAgdGhpcy5yb3V0ZSgic2Vj
        cmV0Iik7CiAgICB9KTsKCiAgICBBcHAuU2VjcmV0Um91dGUgPSBFbWJlci5S
        b3V0ZS5leHRlbmQoewogICAgICBhZnRlck1vZGVsOiBmdW5jdGlvbigpIHsK
        ICAgICAgICBpZiAoIWF1dGhvcml6ZWQoKSl7CiAgICAgICAgICB0aGlzLnJl
        cGxhY2VXaXRoKCdpbmRleCcpOwogICAgICAgIH0KICAgICAgfQogICAgfSk7
        CiAgICBgYGAKCiAgICBAbWV0aG9kIHJlcGxhY2VXaXRoCiAgICBAcGFyYW0g
        e1N0cmluZ30gbmFtZSB0aGUgbmFtZSBvZiB0aGUgcm91dGUKICAgIEBwYXJh
        bSB7Li4uT2JqZWN0fSBtb2RlbHMgdGhlIG1vZGVsKHMpIHRvIGJlIHVzZWQg
        d2hpbGUgdHJhbnNpdGlvbmluZwogICAgdG8gdGhlIHJvdXRlLgogICAgQHJl
        dHVybiB7VHJhbnNpdGlvbn0gdGhlIHRyYW5zaXRpb24gb2JqZWN0IGFzc29j
        aWF0ZWQgd2l0aCB0aGlzCiAgICAgIGF0dGVtcHRlZCB0cmFuc2l0aW9uCiAg
        Ki8KICByZXBsYWNlV2l0aDogZnVuY3Rpb24oKSB7CiAgICB2YXIgcm91dGVy
        ID0gdGhpcy5yb3V0ZXI7CiAgICByZXR1cm4gcm91dGVyLnJlcGxhY2VXaXRo
        LmFwcGx5KHJvdXRlciwgYXJndW1lbnRzKTsKICB9LAoKICAvKioKICAgIFNl
        bmRzIGFuIGFjdGlvbiB0byB0aGUgcm91dGVyLCB3aGljaCB3aWxsIGRlbGVn
        YXRlIGl0IHRvIHRoZSBjdXJyZW50bHkKICAgIGFjdGl2ZSByb3V0ZSBoaWVy
        YXJjaHkgcGVyIHRoZSBidWJibGluZyBydWxlcyBleHBsYWluZWQgdW5kZXIg
        YGFjdGlvbnNgLgoKICAgIEV4YW1wbGUKCiAgICBgYGBqYXZhc2NyaXB0CiAg
        ICBBcHAuUm91dGVyLm1hcChmdW5jdGlvbigpIHsKICAgICAgdGhpcy5yb3V0
        ZSgiaW5kZXgiKTsKICAgIH0pOwoKICAgIEFwcC5BcHBsaWNhdGlvblJvdXRl
        ID0gRW1iZXIuUm91dGUuZXh0ZW5kKHsKICAgICAgYWN0aW9uczogewogICAg
        ICAgIHRyYWNrOiBmdW5jdGlvbihhcmcpIHsKICAgICAgICAgIGNvbnNvbGUu
        bG9nKGFyZywgJ3dhcyBjbGlja2VkJyk7CiAgICAgICAgfQogICAgICB9CiAg
        ICB9KTsKCiAgICBBcHAuSW5kZXhSb3V0ZSA9IEVtYmVyLlJvdXRlLmV4dGVu
        ZCh7CiAgICAgIGFjdGlvbnM6IHsKICAgICAgICB0cmFja0lmRGVidWc6IGZ1
        bmN0aW9uKGFyZykgewogICAgICAgICAgaWYgKGRlYnVnKSB7CiAgICAgICAg
        ICAgIHRoaXMuc2VuZCgndHJhY2snLCBhcmcpOwogICAgICAgICAgfQogICAg
        ICAgIH0KICAgICAgfQogICAgfSk7CiAgICBgYGAKCiAgICBAbWV0aG9kIHNl
        bmQKICAgIEBwYXJhbSB7U3RyaW5nfSBuYW1lIHRoZSBuYW1lIG9mIHRoZSBh
        Y3Rpb24gdG8gdHJpZ2dlcgogICAgQHBhcmFtIHsuLi4qfSBhcmdzCiAgKi8K
        ICBzZW5kOiBmdW5jdGlvbigpIHsKICAgIHJldHVybiB0aGlzLnJvdXRlci5z
        ZW5kLmFwcGx5KHRoaXMucm91dGVyLCBhcmd1bWVudHMpOwogIH0sCgogIC8q
        KgogICAgVGhpcyBob29rIGlzIHRoZSBlbnRyeSBwb2ludCBmb3Igcm91dGVy
        LmpzCgogICAgQHByaXZhdGUKICAgIEBtZXRob2Qgc2V0dXAKICAqLwogIHNl
        dHVwOiBmdW5jdGlvbihjb250ZXh0LCB0cmFuc2l0aW9uKSB7CiAgICB2YXIg
        Y29udHJvbGxlck5hbWUgPSB0aGlzLmNvbnRyb2xsZXJOYW1lIHx8IHRoaXMu
        cm91dGVOYW1lLAogICAgICAgIGNvbnRyb2xsZXIgPSB0aGlzLmNvbnRyb2xs
        ZXJGb3IoY29udHJvbGxlck5hbWUsIHRydWUpOwogICAgaWYgKCFjb250cm9s
        bGVyKSB7CiAgICAgIGNvbnRyb2xsZXIgPSAgdGhpcy5nZW5lcmF0ZUNvbnRy
        b2xsZXIoY29udHJvbGxlck5hbWUsIGNvbnRleHQpOwogICAgfQoKICAgIC8v
        IEFzc2lnbiB0aGUgcm91dGUncyBjb250cm9sbGVyIHNvIHRoYXQgaXQgY2Fu
        IG1vcmUgZWFzaWx5IGJlCiAgICAvLyByZWZlcmVuY2VkIGluIGFjdGlvbiBo
        YW5kbGVycwogICAgdGhpcy5jb250cm9sbGVyID0gY29udHJvbGxlcjsKCiAg
        ICAKICAgIGlmICh0aGlzLnNldHVwQ29udHJvbGxlcnMpIHsKICAgICAgRW1i
        ZXIuZGVwcmVjYXRlKCJFbWJlci5Sb3V0ZS5zZXR1cENvbnRyb2xsZXJzIGlz
        IGRlcHJlY2F0ZWQuIFBsZWFzZSB1c2UgRW1iZXIuUm91dGUuc2V0dXBDb250
        cm9sbGVyKGNvbnRyb2xsZXIsIG1vZGVsKSBpbnN0ZWFkLiIpOwogICAgICB0
        aGlzLnNldHVwQ29udHJvbGxlcnMoY29udHJvbGxlciwgY29udGV4dCk7CiAg
        ICB9IGVsc2UgewoKICAgICAgCiAgICAgICAgdGhpcy5zZXR1cENvbnRyb2xs
        ZXIoY29udHJvbGxlciwgY29udGV4dCk7CiAgICAgIAogICAgfQoKICAgIGlm
        ICh0aGlzLnJlbmRlclRlbXBsYXRlcykgewogICAgICBFbWJlci5kZXByZWNh
        dGUoIkVtYmVyLlJvdXRlLnJlbmRlclRlbXBsYXRlcyBpcyBkZXByZWNhdGVk
        LiBQbGVhc2UgdXNlIEVtYmVyLlJvdXRlLnJlbmRlclRlbXBsYXRlKGNvbnRy
        b2xsZXIsIG1vZGVsKSBpbnN0ZWFkLiIpOwogICAgICB0aGlzLnJlbmRlclRl
        bXBsYXRlcyhjb250ZXh0KTsKICAgIH0gZWxzZSB7CiAgICAgIHRoaXMucmVu
        ZGVyVGVtcGxhdGUoY29udHJvbGxlciwgY29udGV4dCk7CiAgICB9CiAgfSwK
        CiAgLyoqCiAgICBUaGlzIGhvb2sgaXMgdGhlIGZpcnN0IG9mIHRoZSByb3V0
        ZSBlbnRyeSB2YWxpZGF0aW9uIGhvb2tzCiAgICBjYWxsZWQgd2hlbiBhbiBh
        dHRlbXB0IGlzIG1hZGUgdG8gdHJhbnNpdGlvbiBpbnRvIGEgcm91dGUKICAg
        IG9yIG9uZSBvZiBpdHMgY2hpbGRyZW4uIEl0IGlzIGNhbGxlZCBiZWZvcmUg
        YG1vZGVsYCBhbmQKICAgIGBhZnRlck1vZGVsYCwgYW5kIGlzIGFwcHJvcHJp
        YXRlIGZvciBjYXNlcyB3aGVuOgoKICAgIDEpIEEgZGVjaXNpb24gY2FuIGJl
        IG1hZGUgdG8gcmVkaXJlY3QgZWxzZXdoZXJlIHdpdGhvdXQKICAgICAgIG5l
        ZWRpbmcgdG8gcmVzb2x2ZSB0aGUgbW9kZWwgZmlyc3QuCiAgICAyKSBBbnkg
        YXN5bmMgb3BlcmF0aW9ucyBuZWVkIHRvIG9jY3VyIGZpcnN0IGJlZm9yZSB0
        aGUKICAgICAgIG1vZGVsIGlzIGF0dGVtcHRlZCB0byBiZSByZXNvbHZlZC4K
        CiAgICBUaGlzIGhvb2sgaXMgcHJvdmlkZWQgdGhlIGN1cnJlbnQgYHRyYW5z
        aXRpb25gIGF0dGVtcHQKICAgIGFzIGEgcGFyYW1ldGVyLCB3aGljaCBjYW4g
        YmUgdXNlZCB0byBgLmFib3J0KClgIHRoZSB0cmFuc2l0aW9uLAogICAgc2F2
        ZSBpdCBmb3IgYSBsYXRlciBgLnJldHJ5KClgLCBvciByZXRyaWV2ZSB2YWx1
        ZXMgc2V0CiAgICBvbiBpdCBmcm9tIGEgcHJldmlvdXMgaG9vay4gWW91IGNh
        biBhbHNvIGp1c3QgY2FsbAogICAgYHRoaXMudHJhbnNpdGlvblRvYCB0byBh
        bm90aGVyIHJvdXRlIHRvIGltcGxpY2l0bHkKICAgIGFib3J0IHRoZSBgdHJh
        bnNpdGlvbmAuCgogICAgWW91IGNhbiByZXR1cm4gYSBwcm9taXNlIGZyb20g
        dGhpcyBob29rIHRvIHBhdXNlIHRoZQogICAgdHJhbnNpdGlvbiB1bnRpbCB0
        aGUgcHJvbWlzZSByZXNvbHZlcyAob3IgcmVqZWN0cykuIFRoaXMgY291bGQK
        ICAgIGJlIHVzZWZ1bCwgZm9yIGluc3RhbmNlLCBmb3IgcmV0cmlldmluZyBh
        c3luYyBjb2RlIGZyb20KICAgIHRoZSBzZXJ2ZXIgdGhhdCBpcyByZXF1aXJl
        ZCB0byBlbnRlciBhIHJvdXRlLgoKICAgIGBgYGpzCiAgICBBcHAuUG9zdFJv
        dXRlID0gRW1iZXIuUm91dGUuZXh0ZW5kKHsKICAgICAgYmVmb3JlTW9kZWw6
        IGZ1bmN0aW9uKHRyYW5zaXRpb24pIHsKICAgICAgICBpZiAoIUFwcC5Qb3N0
        KSB7CiAgICAgICAgICByZXR1cm4gRW1iZXIuJC5nZXRTY3JpcHQoJy9tb2Rl
        bHMvcG9zdC5qcycpOwogICAgICAgIH0KICAgICAgfQogICAgfSk7CiAgICBg
        YGAKCiAgICBJZiBgQXBwLlBvc3RgIGRvZXNuJ3QgZXhpc3QgaW4gdGhlIGFi
        b3ZlIGV4YW1wbGUsCiAgICBgYmVmb3JlTW9kZWxgIHdpbGwgdXNlIGpRdWVy
        eSdzIGBnZXRTY3JpcHRgLCB3aGljaAogICAgcmV0dXJucyBhIHByb21pc2Ug
        dGhhdCByZXNvbHZlcyBhZnRlciB0aGUgc2VydmVyIGhhcwogICAgc3VjY2Vz
        c2Z1bGx5IHJldHJpZXZlZCBhbmQgZXhlY3V0ZWQgdGhlIGNvZGUgZnJvbSB0
        aGUKICAgIHNlcnZlci4gTm90ZSB0aGF0IGlmIGFuIGVycm9yIHdlcmUgdG8g
        b2NjdXIsIGl0IHdvdWxkCiAgICBiZSBwYXNzZWQgdG8gdGhlIGBlcnJvcmAg
        aG9vayBvbiBgRW1iZXIuUm91dGVgLCBidXQKICAgIGl0J3MgYWxzbyBwb3Nz
        aWJsZSB0byBoYW5kbGUgZXJyb3JzIHNwZWNpZmljIHRvCiAgICBgYmVmb3Jl
        TW9kZWxgIHJpZ2h0IGZyb20gd2l0aGluIHRoZSBob29rICh0byBkaXN0aW5n
        dWlzaAogICAgZnJvbSB0aGUgc2hhcmVkIGVycm9yIGhhbmRsaW5nIGJlaGF2
        aW9yIG9mIHRoZSBgZXJyb3JgCiAgICBob29rKToKCiAgICBgYGBqcwogICAg
        QXBwLlBvc3RSb3V0ZSA9IEVtYmVyLlJvdXRlLmV4dGVuZCh7CiAgICAgIGJl
        Zm9yZU1vZGVsOiBmdW5jdGlvbih0cmFuc2l0aW9uKSB7CiAgICAgICAgaWYg
        KCFBcHAuUG9zdCkgewogICAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwogICAg
        ICAgICAgcmV0dXJuIEVtYmVyLiQuZ2V0U2NyaXB0KCdwb3N0LmpzJykudGhl
        bihudWxsLCBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgIHNlbGYudHJhbnNp
        dGlvblRvKCdoZWxwJyk7CgogICAgICAgICAgICAvLyBOb3RlIHRoYXQgdGhl
        IGFib3ZlIHRyYW5zaXRpb25UbyB3aWxsIGltcGxpY2l0bHkKICAgICAgICAg
        ICAgLy8gaGFsdCB0aGUgdHJhbnNpdGlvbi4gSWYgeW91IHdlcmUgdG8gcmV0
        dXJuCiAgICAgICAgICAgIC8vIG5vdGhpbmcgZnJvbSB0aGlzIHByb21pc2Ug
        cmVqZWN0IGhhbmRsZXIsCiAgICAgICAgICAgIC8vIGFjY29yZGluZyB0byBw
        cm9taXNlIHNlbWFudGljcywgdGhhdCB3b3VsZAogICAgICAgICAgICAvLyBj
        b252ZXJ0IHRoZSByZWplY3QgaW50byBhIHJlc29sdmUgYW5kIHRoZQogICAg
        ICAgICAgICAvLyB0cmFuc2l0aW9uIHdvdWxkIGNvbnRpbnVlLiBUbyBwcm9w
        YWdhdGUgdGhlCiAgICAgICAgICAgIC8vIGVycm9yIHNvIHRoYXQgaXQnZCBi
        ZSBoYW5kbGVkIGJ5IHRoZSBgZXJyb3JgCiAgICAgICAgICAgIC8vIGhvb2ss
        IHlvdSB3b3VsZCBoYXZlIHRvIGVpdGhlcgogICAgICAgICAgICByZXR1cm4g
        RW1iZXIuUlNWUC5yZWplY3QoZSk7CiAgICAgICAgICB9KTsKICAgICAgICB9
        CiAgICAgIH0KICAgIH0pOwogICAgYGBgCgogICAgQG1ldGhvZCBiZWZvcmVN
        b2RlbAogICAgQHBhcmFtIHtUcmFuc2l0aW9ufSB0cmFuc2l0aW9uCiAgICBA
        cGFyYW0ge09iamVjdH0gcXVlcnlQYXJhbXMgdGhlIGFjdGl2ZSBxdWVyeSBw
        YXJhbXMgZm9yIHRoaXMgcm91dGUKICAgIEByZXR1cm4ge1Byb21pc2V9IGlm
        IHRoZSB2YWx1ZSByZXR1cm5lZCBmcm9tIHRoaXMgaG9vayBpcwogICAgICBh
        IHByb21pc2UsIHRoZSB0cmFuc2l0aW9uIHdpbGwgcGF1c2UgdW50aWwgdGhl
        IHRyYW5zaXRpb24KICAgICAgcmVzb2x2ZXMuIE90aGVyd2lzZSwgbm9uLXBy
        b21pc2UgcmV0dXJuIHZhbHVlcyBhcmUgbm90CiAgICAgIHV0aWxpemVkIGlu
        IGFueSB3YXkuCiAgKi8KICBiZWZvcmVNb2RlbDogRW1iZXIuSywKCiAgLyoq
        CiAgICBUaGlzIGhvb2sgaXMgY2FsbGVkIGFmdGVyIHRoaXMgcm91dGUncyBt
        b2RlbCBoYXMgcmVzb2x2ZWQuCiAgICBJdCBmb2xsb3dzIGlkZW50aWNhbCBh
        c3luYy9wcm9taXNlIHNlbWFudGljcyB0byBgYmVmb3JlTW9kZWxgCiAgICBi
        dXQgaXMgcHJvdmlkZWQgdGhlIHJvdXRlJ3MgcmVzb2x2ZWQgbW9kZWwgaW4g
        YWRkaXRpb24gdG8KICAgIHRoZSBgdHJhbnNpdGlvbmAsIGFuZCBpcyB0aGVy
        ZWZvcmUgc3VpdGVkIHRvIHBlcmZvcm1pbmcKICAgIGxvZ2ljIHRoYXQgY2Fu
        IG9ubHkgdGFrZSBwbGFjZSBhZnRlciB0aGUgbW9kZWwgaGFzIGFscmVhZHkK
        ICAgIHJlc29sdmVkLgoKICAgIGBgYGpzCiAgICBBcHAuUG9zdHNSb3V0ZSA9
        IEVtYmVyLlJvdXRlLmV4dGVuZCh7CiAgICAgIGFmdGVyTW9kZWw6IGZ1bmN0
        aW9uKHBvc3RzLCB0cmFuc2l0aW9uKSB7CiAgICAgICAgaWYgKHBvc3RzLmxl
        bmd0aCA9PT0gMSkgewogICAgICAgICAgdGhpcy50cmFuc2l0aW9uVG8oJ3Bv
        c3Quc2hvdycsIHBvc3RzWzBdKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0p
        OwogICAgYGBgCgogICAgUmVmZXIgdG8gZG9jdW1lbnRhdGlvbiBmb3IgYGJl
        Zm9yZU1vZGVsYCBmb3IgYSBkZXNjcmlwdGlvbgogICAgb2YgdHJhbnNpdGlv
        bi1wYXVzaW5nIHNlbWFudGljcyB3aGVuIGEgcHJvbWlzZSBpcyByZXR1cm5l
        ZAogICAgZnJvbSB0aGlzIGhvb2suCgogICAgQG1ldGhvZCBhZnRlck1vZGVs
        CiAgICBAcGFyYW0ge09iamVjdH0gcmVzb2x2ZWRNb2RlbCB0aGUgdmFsdWUg
        cmV0dXJuZWQgZnJvbSBgbW9kZWxgLAogICAgICBvciBpdHMgcmVzb2x2ZWQg
        dmFsdWUgaWYgaXQgd2FzIGEgcHJvbWlzZQogICAgQHBhcmFtIHtUcmFuc2l0
        aW9ufSB0cmFuc2l0aW9uCiAgICBAcGFyYW0ge09iamVjdH0gcXVlcnlQYXJh
        bXMgdGhlIGFjdGl2ZSBxdWVyeSBwYXJhbXMgZm9yIHRoaXMgaGFuZGxlcgog
        ICAgQHJldHVybiB7UHJvbWlzZX0gaWYgdGhlIHZhbHVlIHJldHVybmVkIGZy
        b20gdGhpcyBob29rIGlzCiAgICAgIGEgcHJvbWlzZSwgdGhlIHRyYW5zaXRp
        b24gd2lsbCBwYXVzZSB1bnRpbCB0aGUgdHJhbnNpdGlvbgogICAgICByZXNv
        bHZlcy4gT3RoZXJ3aXNlLCBub24tcHJvbWlzZSByZXR1cm4gdmFsdWVzIGFy
        ZSBub3QKICAgICAgdXRpbGl6ZWQgaW4gYW55IHdheS4KICAgKi8KICBhZnRl
        ck1vZGVsOiBFbWJlci5LLAoKICAvKioKICAgIEEgaG9vayB5b3UgY2FuIGlt
        cGxlbWVudCB0byBvcHRpb25hbGx5IHJlZGlyZWN0IHRvIGFub3RoZXIgcm91
        dGUuCgogICAgSWYgeW91IGNhbGwgYHRoaXMudHJhbnNpdGlvblRvYCBmcm9t
        IGluc2lkZSBvZiB0aGlzIGhvb2ssIHRoaXMgcm91dGUKICAgIHdpbGwgbm90
        IGJlIGVudGVyZWQgaW4gZmF2b3Igb2YgdGhlIG90aGVyIGhvb2suCgogICAg
        YHJlZGlyZWN0YCBhbmQgYGFmdGVyTW9kZWxgIGJlaGF2ZSB2ZXJ5IHNpbWls
        YXJseSBhbmQgYXJlCiAgICBjYWxsZWQgYWxtb3N0IGF0IHRoZSBzYW1lIHRp
        bWUsIGJ1dCB0aGV5IGhhdmUgYW4gaW1wb3J0YW50CiAgICBkaXN0aW5jdGlv
        biBpbiB0aGUgY2FzZSB0aGF0LCBmcm9tIG9uZSBvZiB0aGVzZSBob29rcywg
        YQogICAgcmVkaXJlY3QgaW50byBhIGNoaWxkIHJvdXRlIG9mIHRoaXMgcm91
        dGUgb2NjdXJzOiByZWRpcmVjdHMKICAgIGZyb20gYGFmdGVyTW9kZWxgIGVz
        c2VudGlhbGx5IGludmFsaWRhdGUgdGhlIGN1cnJlbnQgYXR0ZW1wdAogICAg
        dG8gZW50ZXIgdGhpcyByb3V0ZSwgYW5kIHdpbGwgcmVzdWx0IGluIHRoaXMg
        cm91dGUncyBgYmVmb3JlTW9kZWxgLAogICAgYG1vZGVsYCwgYW5kIGBhZnRl
        ck1vZGVsYCBob29rcyBiZWluZyBmaXJlZCBhZ2FpbiB3aXRoaW4KICAgIHRo
        ZSBuZXcsIHJlZGlyZWN0aW5nIHRyYW5zaXRpb24uIFJlZGlyZWN0cyB0aGF0
        IG9jY3VyIHdpdGhpbgogICAgdGhlIGByZWRpcmVjdGAgaG9vaywgb24gdGhl
        IG90aGVyIGhhbmQsIHdpbGwgX25vdF8gY2F1c2UKICAgIHRoZXNlIGhvb2tz
        IHRvIGJlIGZpcmVkIGFnYWluIHRoZSBzZWNvbmQgdGltZSBhcm91bmQ7IGlu
        CiAgICBvdGhlciB3b3JkcywgYnkgdGhlIHRpbWUgdGhlIGByZWRpcmVjdGAg
        aG9vayBoYXMgYmVlbiBjYWxsZWQsCiAgICBib3RoIHRoZSByZXNvbHZlZCBt
        b2RlbCBhbmQgYXR0ZW1wdGVkIGVudHJ5IGludG8gdGhpcyByb3V0ZQogICAg
        YXJlIGNvbnNpZGVyZWQgdG8gYmUgZnVsbHkgdmFsaWRhdGVkLgoKICAgIEBt
        ZXRob2QgcmVkaXJlY3QKICAgIEBwYXJhbSB7T2JqZWN0fSBtb2RlbCB0aGUg
        bW9kZWwgZm9yIHRoaXMgcm91dGUKICAqLwogIHJlZGlyZWN0OiBFbWJlci5L
        LAoKICAvKioKICAgIENhbGxlZCB3aGVuIHRoZSBjb250ZXh0IGlzIGNoYW5n
        ZWQgYnkgcm91dGVyLmpzLgoKICAgIEBwcml2YXRlCiAgICBAbWV0aG9kIGNv
        bnRleHREaWRDaGFuZ2UKICAqLwogIGNvbnRleHREaWRDaGFuZ2U6IGZ1bmN0
        aW9uKCkgewogICAgdGhpcy5jdXJyZW50TW9kZWwgPSB0aGlzLmNvbnRleHQ7
        CiAgfSwKCiAgLyoqCiAgICBBIGhvb2sgeW91IGNhbiBpbXBsZW1lbnQgdG8g
        Y29udmVydCB0aGUgVVJMIGludG8gdGhlIG1vZGVsIGZvcgogICAgdGhpcyBy
        b3V0ZS4KCiAgICBgYGBqcwogICAgQXBwLlJvdXRlci5tYXAoZnVuY3Rpb24o
        KSB7CiAgICAgIHRoaXMucmVzb3VyY2UoJ3Bvc3QnLCB7cGF0aDogJy9wb3N0
        cy86cG9zdF9pZCd9KTsKICAgIH0pOwogICAgYGBgCgogICAgVGhlIG1vZGVs
        IGZvciB0aGUgYHBvc3RgIHJvdXRlIGlzIGBBcHAuUG9zdC5maW5kKHBhcmFt
        cy5wb3N0X2lkKWAuCgogICAgQnkgZGVmYXVsdCwgaWYgeW91ciByb3V0ZSBo
        YXMgYSBkeW5hbWljIHNlZ21lbnQgZW5kaW5nIGluIGBfaWRgOgoKICAgICog
        VGhlIG1vZGVsIGNsYXNzIGlzIGRldGVybWluZWQgZnJvbSB0aGUgc2VnbWVu
        dCAoYHBvc3RfaWRgJ3MKICAgICAgY2xhc3MgaXMgYEFwcC5Qb3N0YCkKICAg
        ICogVGhlIGZpbmQgbWV0aG9kIGlzIGNhbGxlZCBvbiB0aGUgbW9kZWwgY2xh
        c3Mgd2l0aCB0aGUgdmFsdWUgb2YKICAgICAgdGhlIGR5bmFtaWMgc2VnbWVu
        dC4KCiAgICBOb3RlIHRoYXQgZm9yIHJvdXRlcyB3aXRoIGR5bmFtaWMgc2Vn
        bWVudHMsIHRoaXMgaG9vayBpcyBvbmx5CiAgICBleGVjdXRlZCB3aGVuIGVu
        dGVyZWQgdmlhIHRoZSBVUkwuIElmIHRoZSByb3V0ZSBpcyBlbnRlcmVkCiAg
        ICB0aHJvdWdoIGEgdHJhbnNpdGlvbiAoZS5nLiB3aGVuIHVzaW5nIHRoZSBg
        bGluay10b2AgSGFuZGxlYmFycwogICAgaGVscGVyKSwgdGhlbiBhIG1vZGVs
        IGNvbnRleHQgaXMgYWxyZWFkeSBwcm92aWRlZCBhbmQgdGhpcyBob29rCiAg
        ICBpcyBub3QgY2FsbGVkLiBSb3V0ZXMgd2l0aG91dCBkeW5hbWljIHNlZ21l
        bnRzIHdpbGwgYWx3YXlzCiAgICBleGVjdXRlIHRoZSBtb2RlbCBob29rLgoK
        ICAgIFRoaXMgaG9vayBmb2xsb3dzIHRoZSBhc3luY2hyb25vdXMvcHJvbWlz
        ZSBzZW1hbnRpY3MKICAgIGRlc2NyaWJlZCBpbiB0aGUgZG9jdW1lbnRhdGlv
        biBmb3IgYGJlZm9yZU1vZGVsYC4gSW4gcGFydGljdWxhciwKICAgIGlmIGEg
        cHJvbWlzZSByZXR1cm5lZCBmcm9tIGBtb2RlbGAgZmFpbHMsIHRoZSBlcnJv
        ciB3aWxsIGJlCiAgICBoYW5kbGVkIGJ5IHRoZSBgZXJyb3JgIGhvb2sgb24g
        YEVtYmVyLlJvdXRlYC4KCiAgICBFeGFtcGxlCgogICAgYGBganMKICAgIEFw
        cC5Qb3N0Um91dGUgPSBFbWJlci5Sb3V0ZS5leHRlbmQoewogICAgICBtb2Rl
        bDogZnVuY3Rpb24ocGFyYW1zKSB7CiAgICAgICAgcmV0dXJuIEFwcC5Qb3N0
        LmZpbmQocGFyYW1zLnBvc3RfaWQpOwogICAgICB9CiAgICB9KTsKICAgIGBg
        YAoKICAgIEBtZXRob2QgbW9kZWwKICAgIEBwYXJhbSB7T2JqZWN0fSBwYXJh
        bXMgdGhlIHBhcmFtZXRlcnMgZXh0cmFjdGVkIGZyb20gdGhlIFVSTAogICAg
        QHBhcmFtIHtUcmFuc2l0aW9ufSB0cmFuc2l0aW9uCiAgICBAcGFyYW0ge09i
        amVjdH0gcXVlcnlQYXJhbXMgdGhlIHF1ZXJ5IHBhcmFtcyBmb3IgdGhpcyBy
        b3V0ZQogICAgQHJldHVybiB7T2JqZWN0fFByb21pc2V9IHRoZSBtb2RlbCBm
        b3IgdGhpcyByb3V0ZS4gSWYKICAgICAgYSBwcm9taXNlIGlzIHJldHVybmVk
        LCB0aGUgdHJhbnNpdGlvbiB3aWxsIHBhdXNlIHVudGlsCiAgICAgIHRoZSBw
        cm9taXNlIHJlc29sdmVzLCBhbmQgdGhlIHJlc29sdmVkIHZhbHVlIG9mIHRo
        ZSBwcm9taXNlCiAgICAgIHdpbGwgYmUgdXNlZCBhcyB0aGUgbW9kZWwgZm9y
        IHRoaXMgcm91dGUuCiAgKi8KICBtb2RlbDogZnVuY3Rpb24ocGFyYW1zLCB0
        cmFuc2l0aW9uKSB7CiAgICB2YXIgbWF0Y2gsIG5hbWUsIHNhd1BhcmFtcywg
        dmFsdWU7CgogICAgZm9yICh2YXIgcHJvcCBpbiBwYXJhbXMpIHsKICAgICAg
        aWYgKHByb3AgPT09ICdxdWVyeVBhcmFtcycpIHsgY29udGludWU7IH0KCiAg
        ICAgIGlmIChtYXRjaCA9IHByb3AubWF0Y2goL14oLiopX2lkJC8pKSB7CiAg
        ICAgICAgbmFtZSA9IG1hdGNoWzFdOwogICAgICAgIHZhbHVlID0gcGFyYW1z
        W3Byb3BdOwogICAgICB9CiAgICAgIHNhd1BhcmFtcyA9IHRydWU7CiAgICB9
        CgogICAgaWYgKCFuYW1lICYmIHNhd1BhcmFtcykgeyByZXR1cm4gcGFyYW1z
        OyB9CiAgICBlbHNlIGlmICghbmFtZSkgeyByZXR1cm47IH0KCiAgICByZXR1
        cm4gdGhpcy5maW5kTW9kZWwobmFtZSwgdmFsdWUpOwogIH0sCgogIC8qKgog
        ICAgQHByaXZhdGUKCiAgICBSb3V0ZXIuanMgaG9vay4KICAgKi8KICBkZXNl
        cmlhbGl6ZTogZnVuY3Rpb24ocGFyYW1zLCB0cmFuc2l0aW9uKSB7CiAgICAK
        ICAgICAgcmV0dXJuIHRoaXMubW9kZWwocGFyYW1zLCB0cmFuc2l0aW9uKTsK
        ICAgIAogIH0sCgogIC8qKgoKICAgIEBtZXRob2QgZmluZE1vZGVsCiAgICBA
        cGFyYW0ge1N0cmluZ30gdHlwZSB0aGUgbW9kZWwgdHlwZQogICAgQHBhcmFt
        IHtPYmplY3R9IHZhbHVlIHRoZSB2YWx1ZSBwYXNzZWQgdG8gZmluZAogICov
        CiAgZmluZE1vZGVsOiBmdW5jdGlvbigpewogICAgdmFyIHN0b3JlID0gZ2V0
        KHRoaXMsICdzdG9yZScpOwogICAgcmV0dXJuIHN0b3JlLmZpbmQuYXBwbHko
        c3RvcmUsIGFyZ3VtZW50cyk7CiAgfSwKCiAgLyoqCiAgICBTdG9yZSBwcm9w
        ZXJ0eSBwcm92aWRlcyBhIGhvb2sgZm9yIGRhdGEgcGVyc2lzdGVuY2UgbGli
        cmFyaWVzIHRvIGluamVjdCB0aGVtc2VsdmVzLgoKICAgIEJ5IGRlZmF1bHQs
        IHRoaXMgc3RvcmUgcHJvcGVydHkgcHJvdmlkZXMgdGhlIGV4YWN0IHNhbWUg
        ZnVuY3Rpb25hbGl0eSBwcmV2aW91c2x5CiAgICBpbiB0aGUgbW9kZWwgaG9v
        ay4KCiAgICBDdXJyZW50bHksIHRoZSByZXF1aXJlZCBpbnRlcmZhY2UgaXM6
        CgogICAgYHN0b3JlLmZpbmQobW9kZWxOYW1lLCBmaW5kQXJndW1lbnRzKWAK
        CiAgICBAbWV0aG9kIHN0b3JlCiAgICBAcGFyYW0ge09iamVjdH0gc3RvcmUK
        ICAqLwogIHN0b3JlOiBFbWJlci5jb21wdXRlZChmdW5jdGlvbigpewogICAg
        dmFyIGNvbnRhaW5lciA9IHRoaXMuY29udGFpbmVyOwogICAgdmFyIHJvdXRl
        TmFtZSA9IHRoaXMucm91dGVOYW1lOwogICAgdmFyIG5hbWVzcGFjZSA9IGdl
        dCh0aGlzLCAncm91dGVyLm5hbWVzcGFjZScpOwoKICAgIHJldHVybiB7CiAg
        ICAgIGZpbmQ6IGZ1bmN0aW9uKG5hbWUsIHZhbHVlKSB7CiAgICAgICAgdmFy
        IG1vZGVsQ2xhc3MgPSBjb250YWluZXIubG9va3VwRmFjdG9yeSgnbW9kZWw6
        JyArIG5hbWUpOwoKICAgICAgICBFbWJlci5hc3NlcnQoIllvdSB1c2VkIHRo
        ZSBkeW5hbWljIHNlZ21lbnQgIiArIG5hbWUgKyAiX2lkIGluIHlvdXIgcm91
        dGUgIiArCiAgICAgICAgICAgICAgICAgICAgIHJvdXRlTmFtZSArICIsIGJ1
        dCAiICsgbmFtZXNwYWNlICsgIi4iICsgY2xhc3NpZnkobmFtZSkgKwogICAg
        ICAgICAgICAgICAgICAgICAiIGRpZCBub3QgZXhpc3QgYW5kIHlvdSBkaWQg
        bm90IG92ZXJyaWRlIHlvdXIgcm91dGUncyBgbW9kZWxgICIgKwogICAgICAg
        ICAgICAgICAgICAgICAiaG9vay4iLCBtb2RlbENsYXNzKTsKCiAgICAgICAg
        aWYgKCFtb2RlbENsYXNzKSB7IHJldHVybjsgfQoKICAgICAgICByZXR1cm4g
        bW9kZWxDbGFzcy5maW5kKHZhbHVlKTsKICAgICAgfQogICAgfTsKICB9KSwK
        CiAgLyoqCiAgICBBIGhvb2sgeW91IGNhbiBpbXBsZW1lbnQgdG8gY29udmVy
        dCB0aGUgcm91dGUncyBtb2RlbCBpbnRvIHBhcmFtZXRlcnMKICAgIGZvciB0
        aGUgVVJMLgoKICAgIGBgYGpzCiAgICBBcHAuUm91dGVyLm1hcChmdW5jdGlv
        bigpIHsKICAgICAgdGhpcy5yZXNvdXJjZSgncG9zdCcsIHtwYXRoOiAnL3Bv
        c3RzLzpwb3N0X2lkJ30pOwogICAgfSk7CgogICAgQXBwLlBvc3RSb3V0ZSA9
        IEVtYmVyLlJvdXRlLmV4dGVuZCh7CiAgICAgIG1vZGVsOiBmdW5jdGlvbihw
        YXJhbXMpIHsKICAgICAgICAvLyB0aGUgc2VydmVyIHJldHVybnMgYHsgaWQ6
        IDEyIH1gCiAgICAgICAgcmV0dXJuIGpRdWVyeS5nZXRKU09OKCIvcG9zdHMv
        IiArIHBhcmFtcy5wb3N0X2lkKTsKICAgICAgfSwKCiAgICAgIHNlcmlhbGl6
        ZTogZnVuY3Rpb24obW9kZWwpIHsKICAgICAgICAvLyB0aGlzIHdpbGwgbWFr
        ZSB0aGUgVVJMIGAvcG9zdHMvMTJgCiAgICAgICAgcmV0dXJuIHsgcG9zdF9p
        ZDogbW9kZWwuaWQgfTsKICAgICAgfQogICAgfSk7CiAgICBgYGAKCiAgICBU
        aGUgZGVmYXVsdCBgc2VyaWFsaXplYCBtZXRob2Qgd2lsbCBpbnNlcnQgdGhl
        IG1vZGVsJ3MgYGlkYCBpbnRvIHRoZQogICAgcm91dGUncyBkeW5hbWljIHNl
        Z21lbnQgKGluIHRoaXMgY2FzZSwgYDpwb3N0X2lkYCkgaWYgdGhlIHNlZ21l
        bnQgY29udGFpbnMgJ19pZCcuCiAgICBJZiB0aGUgcm91dGUgaGFzIG11bHRp
        cGxlIGR5bmFtaWMgc2VnbWVudHMgb3IgZG9lcyBub3QgY29udGFpbiAnX2lk
        JywgYHNlcmlhbGl6ZWAKICAgIHdpbGwgcmV0dXJuIGBFbWJlci5nZXRQcm9w
        ZXJ0aWVzKG1vZGVsLCBwYXJhbXMpYAoKICAgIFRoaXMgbWV0aG9kIGlzIGNh
        bGxlZCB3aGVuIGB0cmFuc2l0aW9uVG9gIGlzIGNhbGxlZCB3aXRoIGEgY29u
        dGV4dAogICAgaW4gb3JkZXIgdG8gcG9wdWxhdGUgdGhlIFVSTC4KCiAgICBA
        bWV0aG9kIHNlcmlhbGl6ZQogICAgQHBhcmFtIHtPYmplY3R9IG1vZGVsIHRo
        ZSByb3V0ZSdzIG1vZGVsCiAgICBAcGFyYW0ge0FycmF5fSBwYXJhbXMgYW4g
        QXJyYXkgb2YgcGFyYW1ldGVyIG5hbWVzIGZvciB0aGUgY3VycmVudAogICAg
        ICByb3V0ZSAoaW4gdGhlIGV4YW1wbGUsIGBbJ3Bvc3RfaWQnXWAuCiAgICBA
        cmV0dXJuIHtPYmplY3R9IHRoZSBzZXJpYWxpemVkIHBhcmFtZXRlcnMKICAq
        LwogIHNlcmlhbGl6ZTogZnVuY3Rpb24obW9kZWwsIHBhcmFtcykgewogICAg
        aWYgKHBhcmFtcy5sZW5ndGggPCAxKSB7IHJldHVybjsgfQogICAgaWYgKCFt
        b2RlbCkgeyByZXR1cm47IH0KCiAgICB2YXIgbmFtZSA9IHBhcmFtc1swXSwg
        b2JqZWN0ID0ge307CgogICAgaWYgKC9faWQkLy50ZXN0KG5hbWUpICYmIHBh
        cmFtcy5sZW5ndGggPT09IDEpIHsKICAgICAgb2JqZWN0W25hbWVdID0gZ2V0
        KG1vZGVsLCAiaWQiKTsKICAgIH0gZWxzZSB7CiAgICAgIG9iamVjdCA9IGdl
        dFByb3BlcnRpZXMobW9kZWwsIHBhcmFtcyk7CiAgICB9CgogICAgcmV0dXJu
        IG9iamVjdDsKICB9LAoKICAvKioKICAgIEEgaG9vayB5b3UgY2FuIHVzZSB0
        byBzZXR1cCB0aGUgY29udHJvbGxlciBmb3IgdGhlIGN1cnJlbnQgcm91dGUu
        CgogICAgVGhpcyBtZXRob2QgaXMgY2FsbGVkIHdpdGggdGhlIGNvbnRyb2xs
        ZXIgZm9yIHRoZSBjdXJyZW50IHJvdXRlIGFuZCB0aGUKICAgIG1vZGVsIHN1
        cHBsaWVkIGJ5IHRoZSBgbW9kZWxgIGhvb2suCgogICAgQnkgZGVmYXVsdCwg
        dGhlIGBzZXR1cENvbnRyb2xsZXJgIGhvb2sgc2V0cyB0aGUgYGNvbnRlbnRg
        IHByb3BlcnR5IG9mCiAgICB0aGUgY29udHJvbGxlciB0byB0aGUgYG1vZGVs
        YC4KCiAgICBUaGlzIG1lYW5zIHRoYXQgeW91ciB0ZW1wbGF0ZSB3aWxsIGdl
        dCBhIHByb3h5IGZvciB0aGUgbW9kZWwgYXMgaXRzCiAgICBjb250ZXh0LCBh
        bmQgeW91IGNhbiBhY3QgYXMgdGhvdWdoIHRoZSBtb2RlbCBpdHNlbGYgd2Fz
        IHRoZSBjb250ZXh0LgoKICAgIFRoZSBwcm92aWRlZCBjb250cm9sbGVyIHdp
        bGwgYmUgb25lIHJlc29sdmVkIGJhc2VkIG9uIHRoZSBuYW1lCiAgICBvZiB0
        aGlzIHJvdXRlLgoKICAgIElmIG5vIGV4cGxpY2l0IGNvbnRyb2xsZXIgaXMg
        ZGVmaW5lZCwgRW1iZXIgd2lsbCBhdXRvbWF0aWNhbGx5IGNyZWF0ZQogICAg
        YW4gYXBwcm9wcmlhdGUgY29udHJvbGxlciBmb3IgdGhlIG1vZGVsLgoKICAg
        ICogaWYgdGhlIG1vZGVsIGlzIGFuIGBFbWJlci5BcnJheWAgKGluY2x1ZGlu
        ZyByZWNvcmQgYXJyYXlzIGZyb20gRW1iZXIKICAgICAgRGF0YSksIHRoZSBj
        b250cm9sbGVyIGlzIGFuIGBFbWJlci5BcnJheUNvbnRyb2xsZXJgLgogICAg
        KiBvdGhlcndpc2UsIHRoZSBjb250cm9sbGVyIGlzIGFuIGBFbWJlci5PYmpl
        Y3RDb250cm9sbGVyYC4KCiAgICBBcyBhbiBleGFtcGxlLCBjb25zaWRlciB0
        aGUgcm91dGVyOgoKICAgIGBgYGpzCiAgICBBcHAuUm91dGVyLm1hcChmdW5j
        dGlvbigpIHsKICAgICAgdGhpcy5yZXNvdXJjZSgncG9zdCcsIHtwYXRoOiAn
        L3Bvc3RzLzpwb3N0X2lkJ30pOwogICAgfSk7CiAgICBgYGAKCiAgICBGb3Ig
        dGhlIGBwb3N0YCByb3V0ZSwgYSBjb250cm9sbGVyIG5hbWVkIGBBcHAuUG9z
        dENvbnRyb2xsZXJgIHdvdWxkCiAgICBiZSB1c2VkIGlmIGl0IGlzIGRlZmlu
        ZWQuIElmIGl0IGlzIG5vdCBkZWZpbmVkLCBhbiBgRW1iZXIuT2JqZWN0Q29u
        dHJvbGxlcmAKICAgIGluc3RhbmNlIHdvdWxkIGJlIHVzZWQuCgogICAgRXhh
        bXBsZQoKICAgIGBgYGpzCiAgICBBcHAuUG9zdFJvdXRlID0gRW1iZXIuUm91
        dGUuZXh0ZW5kKHsKICAgICAgc2V0dXBDb250cm9sbGVyOiBmdW5jdGlvbihj
        b250cm9sbGVyLCBtb2RlbCkgewogICAgICAgIGNvbnRyb2xsZXIuc2V0KCdt
        b2RlbCcsIG1vZGVsKTsKICAgICAgfQogICAgfSk7CiAgICBgYGAKCiAgICBA
        bWV0aG9kIHNldHVwQ29udHJvbGxlcgogICAgQHBhcmFtIHtDb250cm9sbGVy
        fSBjb250cm9sbGVyIGluc3RhbmNlCiAgICBAcGFyYW0ge09iamVjdH0gbW9k
        ZWwKICAqLwogIHNldHVwQ29udHJvbGxlcjogZnVuY3Rpb24oY29udHJvbGxl
        ciwgY29udGV4dCwgdHJhbnNpdGlvbikgewogICAgaWYgKGNvbnRyb2xsZXIg
        JiYgKGNvbnRleHQgIT09IHVuZGVmaW5lZCkpIHsKICAgICAgc2V0KGNvbnRy
        b2xsZXIsICdtb2RlbCcsIGNvbnRleHQpOwogICAgfQogIH0sCgogIC8qKgog
        ICAgUmV0dXJucyB0aGUgY29udHJvbGxlciBmb3IgYSBwYXJ0aWN1bGFyIHJv
        dXRlIG9yIG5hbWUuCgogICAgVGhlIGNvbnRyb2xsZXIgaW5zdGFuY2UgbXVz
        dCBhbHJlYWR5IGhhdmUgYmVlbiBjcmVhdGVkLCBlaXRoZXIgdGhyb3VnaCBl
        bnRlcmluZyB0aGUKICAgIGFzc29jaWF0ZWQgcm91dGUgb3IgdXNpbmcgYGdl
        bmVyYXRlQ29udHJvbGxlcmAuCgogICAgYGBganMKICAgIEFwcC5Qb3N0Um91
        dGUgPSBFbWJlci5Sb3V0ZS5leHRlbmQoewogICAgICBzZXR1cENvbnRyb2xs
        ZXI6IGZ1bmN0aW9uKGNvbnRyb2xsZXIsIHBvc3QpIHsKICAgICAgICB0aGlz
        Ll9zdXBlcihjb250cm9sbGVyLCBwb3N0KTsKICAgICAgICB0aGlzLmNvbnRy
        b2xsZXJGb3IoJ3Bvc3RzJykuc2V0KCdjdXJyZW50UG9zdCcsIHBvc3QpOwog
        ICAgICB9CiAgICB9KTsKICAgIGBgYAoKICAgIEBtZXRob2QgY29udHJvbGxl
        ckZvcgogICAgQHBhcmFtIHtTdHJpbmd9IG5hbWUgdGhlIG5hbWUgb2YgdGhl
        IHJvdXRlIG9yIGNvbnRyb2xsZXIKICAgIEByZXR1cm4ge0VtYmVyLkNvbnRy
        b2xsZXJ9CiAgKi8KICBjb250cm9sbGVyRm9yOiBmdW5jdGlvbihuYW1lLCBf
        c2tpcEFzc2VydCkgewogICAgdmFyIGNvbnRhaW5lciA9IHRoaXMuY29udGFp
        bmVyLAogICAgICAgIHJvdXRlID0gY29udGFpbmVyLmxvb2t1cCgncm91dGU6
        JytuYW1lKSwKICAgICAgICBjb250cm9sbGVyOwoKICAgIGlmIChyb3V0ZSAm
        JiByb3V0ZS5jb250cm9sbGVyTmFtZSkgewogICAgICBuYW1lID0gcm91dGUu
        Y29udHJvbGxlck5hbWU7CiAgICB9CgogICAgY29udHJvbGxlciA9IGNvbnRh
        aW5lci5sb29rdXAoJ2NvbnRyb2xsZXI6JyArIG5hbWUpOwoKICAgIC8vIE5P
        VEU6IFdlJ3JlIHNwZWNpZmljYWxseSBjaGVja2luZyB0aGF0IHNraXBBc3Nl
        cnQgaXMgdHJ1ZSwgYmVjYXVzZSBhY2NvcmRpbmcKICAgIC8vICAgdG8gdGhl
        IG9sZCBBUEkgdGhlIHNlY29uZCBwYXJhbWV0ZXIgd2FzIG1vZGVsLiBXZSBk
        byBub3Qgd2FudCBwZW9wbGUgd2hvCiAgICAvLyAgIHBhc3NlZCBhIG1vZGVs
        IHRvIHNraXAgdGhlIGFzc2VydGlvbi4KICAgIEVtYmVyLmFzc2VydCgiVGhl
        IGNvbnRyb2xsZXIgbmFtZWQgJyIrbmFtZSsiJyBjb3VsZCBub3QgYmUgZm91
        bmQuIE1ha2Ugc3VyZSAiICsKICAgICAgICAgICAgICAgICAidGhhdCB0aGlz
        IHJvdXRlIGV4aXN0cyBhbmQgaGFzIGFscmVhZHkgYmVlbiBlbnRlcmVkIGF0
        IGxlYXN0ICIgKwogICAgICAgICAgICAgICAgICJvbmNlLiBJZiB5b3UgYXJl
        IGFjY2Vzc2luZyBhIGNvbnRyb2xsZXIgbm90IGFzc29jaWF0ZWQgd2l0aCBh
        ICIgKwogICAgICAgICAgICAgICAgICJyb3V0ZSwgbWFrZSBzdXJlIHRoZSBj
        b250cm9sbGVyIGNsYXNzIGlzIGV4cGxpY2l0bHkgZGVmaW5lZC4iLAogICAg
        ICAgICAgICAgICAgIGNvbnRyb2xsZXIgfHwgX3NraXBBc3NlcnQgPT09IHRy
        dWUpOwoKICAgIHJldHVybiBjb250cm9sbGVyOwogIH0sCgogIC8qKgogICAg
        R2VuZXJhdGVzIGEgY29udHJvbGxlciBmb3IgYSByb3V0ZS4KCiAgICBJZiB0
        aGUgb3B0aW9uYWwgbW9kZWwgaXMgcGFzc2VkIHRoZW4gdGhlIGNvbnRyb2xs
        ZXIgdHlwZSBpcyBkZXRlcm1pbmVkIGF1dG9tYXRpY2FsbHksCiAgICBlLmcu
        LCBhbiBBcnJheUNvbnRyb2xsZXIgZm9yIGFycmF5cy4KCiAgICBFeGFtcGxl
        CgogICAgYGBganMKICAgIEFwcC5Qb3N0Um91dGUgPSBFbWJlci5Sb3V0ZS5l
        eHRlbmQoewogICAgICBzZXR1cENvbnRyb2xsZXI6IGZ1bmN0aW9uKGNvbnRy
        b2xsZXIsIHBvc3QpIHsKICAgICAgICB0aGlzLl9zdXBlcihjb250cm9sbGVy
        LCBwb3N0KTsKICAgICAgICB0aGlzLmdlbmVyYXRlQ29udHJvbGxlcigncG9z
        dHMnLCBwb3N0KTsKICAgICAgfQogICAgfSk7CiAgICBgYGAKCiAgICBAbWV0
        aG9kIGdlbmVyYXRlQ29udHJvbGxlcgogICAgQHBhcmFtIHtTdHJpbmd9IG5h
        bWUgdGhlIG5hbWUgb2YgdGhlIGNvbnRyb2xsZXIKICAgIEBwYXJhbSB7T2Jq
        ZWN0fSBtb2RlbCB0aGUgbW9kZWwgdG8gaW5mZXIgdGhlIHR5cGUgb2YgdGhl
        IGNvbnRyb2xsZXIgKG9wdGlvbmFsKQogICovCiAgZ2VuZXJhdGVDb250cm9s
        bGVyOiBmdW5jdGlvbihuYW1lLCBtb2RlbCkgewogICAgdmFyIGNvbnRhaW5l
        ciA9IHRoaXMuY29udGFpbmVyOwoKICAgIG1vZGVsID0gbW9kZWwgfHwgdGhp
        cy5tb2RlbEZvcihuYW1lKTsKCiAgICByZXR1cm4gRW1iZXIuZ2VuZXJhdGVD
        b250cm9sbGVyKGNvbnRhaW5lciwgbmFtZSwgbW9kZWwpOwogIH0sCgogIC8q
        KgogICAgUmV0dXJucyB0aGUgbW9kZWwgb2YgYSBwYXJlbnQgKG9yIGFueSBh
        bmNlc3Rvcikgcm91dGUKICAgIGluIGEgcm91dGUgaGllcmFyY2h5LiAgRHVy
        aW5nIGEgdHJhbnNpdGlvbiwgYWxsIHJvdXRlcwogICAgbXVzdCByZXNvbHZl
        IGEgbW9kZWwgb2JqZWN0LCBhbmQgaWYgYSByb3V0ZQogICAgbmVlZHMgYWNj
        ZXNzIHRvIGEgcGFyZW50IHJvdXRlJ3MgbW9kZWwgaW4gb3JkZXIgdG8KICAg
        IHJlc29sdmUgYSBtb2RlbCAob3IganVzdCByZXVzZSB0aGUgbW9kZWwgZnJv
        bSBhIHBhcmVudCksCiAgICBpdCBjYW4gY2FsbCBgdGhpcy5tb2RlbEZvcih0
        aGVOYW1lT2ZQYXJlbnRSb3V0ZSlgIHRvCiAgICByZXRyaWV2ZSBpdC4KCiAg
        ICBFeGFtcGxlCgogICAgYGBganMKICAgIEFwcC5Sb3V0ZXIubWFwKGZ1bmN0
        aW9uKCkgewogICAgICAgIHRoaXMucmVzb3VyY2UoJ3Bvc3QnLCB7IHBhdGg6
        ICcvcG9zdC86cG9zdF9pZCcgfSwgZnVuY3Rpb24oKSB7CiAgICAgICAgICAg
        IHRoaXMucmVzb3VyY2UoJ2NvbW1lbnRzJyk7CiAgICAgICAgfSk7CiAgICB9
        KTsKCiAgICBBcHAuQ29tbWVudHNSb3V0ZSA9IEVtYmVyLlJvdXRlLmV4dGVu
        ZCh7CiAgICAgICAgYWZ0ZXJNb2RlbDogZnVuY3Rpb24oKSB7CiAgICAgICAg
        ICAgIHRoaXMuc2V0KCdwb3N0JywgdGhpcy5tb2RlbEZvcigncG9zdCcpKTsK
        ICAgICAgICB9CiAgICB9KTsKICAgIGBgYAoKICAgIEBtZXRob2QgbW9kZWxG
        b3IKICAgIEBwYXJhbSB7U3RyaW5nfSBuYW1lIHRoZSBuYW1lIG9mIHRoZSBy
        b3V0ZQogICAgQHJldHVybiB7T2JqZWN0fSB0aGUgbW9kZWwgb2JqZWN0CiAg
        Ki8KICBtb2RlbEZvcjogZnVuY3Rpb24obmFtZSkgewoKICAgIHZhciByb3V0
        ZSA9IHRoaXMuY29udGFpbmVyLmxvb2t1cCgncm91dGU6JyArIG5hbWUpLAog
        ICAgICAgIHRyYW5zaXRpb24gPSB0aGlzLnJvdXRlci5yb3V0ZXIuYWN0aXZl
        VHJhbnNpdGlvbjsKCiAgICAvLyBJZiB3ZSBhcmUgbWlkLXRyYW5zaXRpb24s
        IHdlIHdhbnQgdG8gdHJ5IGFuZCBsb29rIHVwCiAgICAvLyByZXNvbHZlZCBw
        YXJlbnQgY29udGV4dHMgb24gdGhlIGN1cnJlbnQgdHJhbnNpdGlvbkV2ZW50
        LgogICAgaWYgKHRyYW5zaXRpb24pIHsKICAgICAgdmFyIG1vZGVsTG9va3Vw
        TmFtZSA9IChyb3V0ZSAmJiByb3V0ZS5yb3V0ZU5hbWUpIHx8IG5hbWU7CiAg
        ICAgIGlmICh0cmFuc2l0aW9uLnJlc29sdmVkTW9kZWxzLmhhc093blByb3Bl
        cnR5KG1vZGVsTG9va3VwTmFtZSkpIHsKICAgICAgICByZXR1cm4gdHJhbnNp
        dGlvbi5yZXNvbHZlZE1vZGVsc1ttb2RlbExvb2t1cE5hbWVdOwogICAgICB9
        CiAgICB9CgogICAgcmV0dXJuIHJvdXRlICYmIHJvdXRlLmN1cnJlbnRNb2Rl
        bDsKICB9LAoKICAvKioKICAgIEEgaG9vayB5b3UgY2FuIHVzZSB0byByZW5k
        ZXIgdGhlIHRlbXBsYXRlIGZvciB0aGUgY3VycmVudCByb3V0ZS4KCiAgICBU
        aGlzIG1ldGhvZCBpcyBjYWxsZWQgd2l0aCB0aGUgY29udHJvbGxlciBmb3Ig
        dGhlIGN1cnJlbnQgcm91dGUgYW5kIHRoZQogICAgbW9kZWwgc3VwcGxpZWQg
        YnkgdGhlIGBtb2RlbGAgaG9vay4gQnkgZGVmYXVsdCwgaXQgcmVuZGVycyB0
        aGUgcm91dGUncwogICAgdGVtcGxhdGUsIGNvbmZpZ3VyZWQgd2l0aCB0aGUg
        Y29udHJvbGxlciBmb3IgdGhlIHJvdXRlLgoKICAgIFRoaXMgbWV0aG9kIGNh
        biBiZSBvdmVycmlkZGVuIHRvIHNldCB1cCBhbmQgcmVuZGVyIGFkZGl0aW9u
        YWwgb3IKICAgIGFsdGVybmF0aXZlIHRlbXBsYXRlcy4KCiAgICBgYGBqcwog
        ICAgQXBwLlBvc3RzUm91dGUgPSBFbWJlci5Sb3V0ZS5leHRlbmQoewogICAg
        ICByZW5kZXJUZW1wbGF0ZTogZnVuY3Rpb24oY29udHJvbGxlciwgbW9kZWwp
        IHsKICAgICAgICB2YXIgZmF2Q29udHJvbGxlciA9IHRoaXMuY29udHJvbGxl
        ckZvcignZmF2b3JpdGVQb3N0Jyk7CgogICAgICAgIC8vIFJlbmRlciB0aGUg
        YGZhdm9yaXRlUG9zdGAgdGVtcGxhdGUgaW50bwogICAgICAgIC8vIHRoZSBv
        dXRsZXQgYHBvc3RzYCwgYW5kIGRpc3BsYXkgdGhlIGBmYXZvcml0ZVBvc3Rg
        CiAgICAgICAgLy8gY29udHJvbGxlci4KICAgICAgICB0aGlzLnJlbmRlcign
        ZmF2b3JpdGVQb3N0JywgewogICAgICAgICAgb3V0bGV0OiAncG9zdHMnLAog
        ICAgICAgICAgY29udHJvbGxlcjogZmF2Q29udHJvbGxlcgogICAgICAgIH0p
        OwogICAgICB9CiAgICB9KTsKICAgIGBgYAoKICAgIEBtZXRob2QgcmVuZGVy
        VGVtcGxhdGUKICAgIEBwYXJhbSB7T2JqZWN0fSBjb250cm9sbGVyIHRoZSBy
        b3V0ZSdzIGNvbnRyb2xsZXIKICAgIEBwYXJhbSB7T2JqZWN0fSBtb2RlbCB0
        aGUgcm91dGUncyBtb2RlbAogICovCiAgcmVuZGVyVGVtcGxhdGU6IGZ1bmN0
        aW9uKGNvbnRyb2xsZXIsIG1vZGVsKSB7CiAgICB0aGlzLnJlbmRlcigpOwog
        IH0sCgogIC8qKgogICAgUmVuZGVycyBhIHRlbXBsYXRlIGludG8gYW4gb3V0
        bGV0LgoKICAgIFRoaXMgbWV0aG9kIGhhcyBhIG51bWJlciBvZiBkZWZhdWx0
        cywgYmFzZWQgb24gdGhlIG5hbWUgb2YgdGhlCiAgICByb3V0ZSBzcGVjaWZp
        ZWQgaW4gdGhlIHJvdXRlci4KCiAgICBGb3IgZXhhbXBsZToKCiAgICBgYGBq
        cwogICAgQXBwLlJvdXRlci5tYXAoZnVuY3Rpb24oKSB7CiAgICAgIHRoaXMu
        cm91dGUoJ2luZGV4Jyk7CiAgICAgIHRoaXMucmVzb3VyY2UoJ3Bvc3QnLCB7
        cGF0aDogJy9wb3N0cy86cG9zdF9pZCd9KTsKICAgIH0pOwoKICAgIEFwcC5Q
        b3N0Um91dGUgPSBBcHAuUm91dGUuZXh0ZW5kKHsKICAgICAgcmVuZGVyVGVt
        cGxhdGU6IGZ1bmN0aW9uKCkgewogICAgICAgIHRoaXMucmVuZGVyKCk7CiAg
        ICAgIH0KICAgIH0pOwogICAgYGBgCgogICAgVGhlIG5hbWUgb2YgdGhlIGBQ
        b3N0Um91dGVgLCBhcyBkZWZpbmVkIGJ5IHRoZSByb3V0ZXIsIGlzIGBwb3N0
        YC4KCiAgICBCeSBkZWZhdWx0LCByZW5kZXIgd2lsbDoKCiAgICAqIHJlbmRl
        ciB0aGUgYHBvc3RgIHRlbXBsYXRlCiAgICAqIHdpdGggdGhlIGBwb3N0YCB2
        aWV3IChgUG9zdFZpZXdgKSBmb3IgZXZlbnQgaGFuZGxpbmcsIGlmIG9uZSBl
        eGlzdHMKICAgICogYW5kIHRoZSBgcG9zdGAgY29udHJvbGxlciAoYFBvc3RD
        b250cm9sbGVyYCksIGlmIG9uZSBleGlzdHMKICAgICogaW50byB0aGUgYG1h
        aW5gIG91dGxldCBvZiB0aGUgYGFwcGxpY2F0aW9uYCB0ZW1wbGF0ZQoKICAg
        IFlvdSBjYW4gb3ZlcnJpZGUgdGhpcyBiZWhhdmlvcjoKCiAgICBgYGBqcwog
        ICAgQXBwLlBvc3RSb3V0ZSA9IEFwcC5Sb3V0ZS5leHRlbmQoewogICAgICBy
        ZW5kZXJUZW1wbGF0ZTogZnVuY3Rpb24oKSB7CiAgICAgICAgdGhpcy5yZW5k
        ZXIoJ215UG9zdCcsIHsgICAvLyB0aGUgdGVtcGxhdGUgdG8gcmVuZGVyCiAg
        ICAgICAgICBpbnRvOiAnaW5kZXgnLCAgICAgICAgICAvLyB0aGUgdGVtcGxh
        dGUgdG8gcmVuZGVyIGludG8KICAgICAgICAgIG91dGxldDogJ2RldGFpbCcs
        ICAgICAgIC8vIHRoZSBuYW1lIG9mIHRoZSBvdXRsZXQgaW4gdGhhdCB0ZW1w
        bGF0ZQogICAgICAgICAgY29udHJvbGxlcjogJ2Jsb2dQb3N0JyAgLy8gdGhl
        IGNvbnRyb2xsZXIgdG8gdXNlIGZvciB0aGUgdGVtcGxhdGUKICAgICAgICB9
        KTsKICAgICAgfQogICAgfSk7CiAgICBgYGAKCiAgICBSZW1lbWJlciB0aGF0
        IHRoZSBjb250cm9sbGVyJ3MgYGNvbnRlbnRgIHdpbGwgYmUgdGhlIHJvdXRl
        J3MgbW9kZWwuIEluCiAgICB0aGlzIGNhc2UsIHRoZSBkZWZhdWx0IG1vZGVs
        IHdpbGwgYmUgYEFwcC5Qb3N0LmZpbmQocGFyYW1zLnBvc3RfaWQpYC4KCiAg
        ICBAbWV0aG9kIHJlbmRlcgogICAgQHBhcmFtIHtTdHJpbmd9IG5hbWUgdGhl
        IG5hbWUgb2YgdGhlIHRlbXBsYXRlIHRvIHJlbmRlcgogICAgQHBhcmFtIHtP
        YmplY3R9IG9wdGlvbnMgdGhlIG9wdGlvbnMKICAqLwogIHJlbmRlcjogZnVu
        Y3Rpb24obmFtZSwgb3B0aW9ucykgewogICAgRW1iZXIuYXNzZXJ0KCJUaGUg
        bmFtZSBpbiB0aGUgZ2l2ZW4gYXJndW1lbnRzIGlzIHVuZGVmaW5lZCIsIGFy
        Z3VtZW50cy5sZW5ndGggPiAwID8gIUVtYmVyLmlzTm9uZShhcmd1bWVudHNb
        MF0pIDogdHJ1ZSk7CgogICAgdmFyIG5hbWVQYXNzZWQgPSAhIW5hbWU7Cgog
        ICAgaWYgKHR5cGVvZiBuYW1lID09PSAnb2JqZWN0JyAmJiAhb3B0aW9ucykg
        ewogICAgICBvcHRpb25zID0gbmFtZTsKICAgICAgbmFtZSA9IHRoaXMucm91
        dGVOYW1lOwogICAgfQoKICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9OwoK
        ICAgIHZhciB0ZW1wbGF0ZU5hbWU7CgogICAgaWYgKG5hbWUpIHsKICAgICAg
        bmFtZSA9IG5hbWUucmVwbGFjZSgvXC8vZywgJy4nKTsKICAgICAgdGVtcGxh
        dGVOYW1lID0gbmFtZTsKICAgIH0gZWxzZSB7CiAgICAgIG5hbWUgPSB0aGlz
        LnJvdXRlTmFtZTsKICAgICAgdGVtcGxhdGVOYW1lID0gdGhpcy50ZW1wbGF0
        ZU5hbWUgfHwgbmFtZTsKICAgIH0KCiAgICB2YXIgdmlld05hbWUgPSBvcHRp
        b25zLnZpZXcgfHwgdGhpcy52aWV3TmFtZSB8fCBuYW1lOwoKICAgIHZhciBj
        b250YWluZXIgPSB0aGlzLmNvbnRhaW5lciwKICAgICAgICB2aWV3ID0gY29u
        dGFpbmVyLmxvb2t1cCgndmlldzonICsgdmlld05hbWUpLAogICAgICAgIHRl
        bXBsYXRlID0gdmlldyA/IHZpZXcuZ2V0KCd0ZW1wbGF0ZScpIDogbnVsbDsK
        CiAgICBpZiAoIXRlbXBsYXRlKSB7CiAgICAgIHRlbXBsYXRlID0gY29udGFp
        bmVyLmxvb2t1cCgndGVtcGxhdGU6JyArIHRlbXBsYXRlTmFtZSk7CiAgICB9
        CgogICAgaWYgKCF2aWV3ICYmICF0ZW1wbGF0ZSkgewogICAgICBFbWJlci5h
        c3NlcnQoIkNvdWxkIG5vdCBmaW5kIFwiIiArIG5hbWUgKyAiXCIgdGVtcGxh
        dGUgb3Igdmlldy4iLCAhbmFtZVBhc3NlZCk7CiAgICAgIGlmIChnZXQodGhp
        cy5yb3V0ZXIsICduYW1lc3BhY2UuTE9HX1ZJRVdfTE9PS1VQUycpKSB7CiAg
        ICAgICAgRW1iZXIuTG9nZ2VyLmluZm8oIkNvdWxkIG5vdCBmaW5kIFwiIiAr
        IG5hbWUgKyAiXCIgdGVtcGxhdGUgb3Igdmlldy4gTm90aGluZyB3aWxsIGJl
        IHJlbmRlcmVkIiwgeyBmdWxsTmFtZTogJ3RlbXBsYXRlOicgKyBuYW1lIH0p
        OwogICAgICB9CiAgICAgIHJldHVybjsKICAgIH0KCiAgICBvcHRpb25zID0g
        bm9ybWFsaXplT3B0aW9ucyh0aGlzLCBuYW1lLCB0ZW1wbGF0ZSwgb3B0aW9u
        cyk7CiAgICB2aWV3ID0gc2V0dXBWaWV3KHZpZXcsIGNvbnRhaW5lciwgb3B0
        aW9ucyk7CgogICAgaWYgKG9wdGlvbnMub3V0bGV0ID09PSAnbWFpbicpIHsg
        dGhpcy5sYXN0UmVuZGVyZWRUZW1wbGF0ZSA9IG5hbWU7IH0KCiAgICBhcHBl
        bmRWaWV3KHRoaXMsIHZpZXcsIG9wdGlvbnMpOwogIH0sCgogIC8qKgogICAg
        RGlzY29ubmVjdHMgYSB2aWV3IHRoYXQgaGFzIGJlZW4gcmVuZGVyZWQgaW50
        byBhbiBvdXRsZXQuCgogICAgWW91IG1heSBwYXNzIGFueSBvciBhbGwgb2Yg
        dGhlIGZvbGxvd2luZyBvcHRpb25zIHRvIGBkaXNjb25uZWN0T3V0bGV0YDoK
        CiAgICAqIGBvdXRsZXRgOiB0aGUgbmFtZSBvZiB0aGUgb3V0bGV0IHRvIGNs
        ZWFyIChkZWZhdWx0OiAnbWFpbicpCiAgICAqIGBwYXJlbnRWaWV3YDogdGhl
        IG5hbWUgb2YgdGhlIHZpZXcgY29udGFpbmluZyB0aGUgb3V0bGV0IHRvIGNs
        ZWFyCiAgICAgICAoZGVmYXVsdDogdGhlIHZpZXcgcmVuZGVyZWQgYnkgdGhl
        IHBhcmVudCByb3V0ZSkKCiAgICBFeGFtcGxlOgoKICAgIGBgYGpzCiAgICBB
        cHAuQXBwbGljYXRpb25Sb3V0ZSA9IEFwcC5Sb3V0ZS5leHRlbmQoewogICAg
        ICBhY3Rpb25zOiB7CiAgICAgICAgc2hvd01vZGFsOiBmdW5jdGlvbihldnQp
        IHsKICAgICAgICAgIHRoaXMucmVuZGVyKGV2dC5tb2RhbE5hbWUsIHsKICAg
        ICAgICAgICAgb3V0bGV0OiAnbW9kYWwnLAogICAgICAgICAgICBpbnRvOiAn
        YXBwbGljYXRpb24nCiAgICAgICAgICB9KTsKICAgICAgICB9LAogICAgICAg
        IGhpZGVNb2RhbDogZnVuY3Rpb24oZXZ0KSB7CiAgICAgICAgICB0aGlzLmRp
        c2Nvbm5lY3RPdXRsZXQoewogICAgICAgICAgICBvdXRsZXQ6ICdtb2RhbCcs
        CiAgICAgICAgICAgIHBhcmVudFZpZXc6ICdhcHBsaWNhdGlvbicKICAgICAg
        ICAgIH0pOwogICAgICAgIH0KICAgICAgfQogICAgfSk7CiAgICBgYGAKCiAg
        ICBAbWV0aG9kIGRpc2Nvbm5lY3RPdXRsZXQKICAgIEBwYXJhbSB7T2JqZWN0
        fSBvcHRpb25zIHRoZSBvcHRpb25zCiAgKi8KICBkaXNjb25uZWN0T3V0bGV0
        OiBmdW5jdGlvbihvcHRpb25zKSB7CiAgICBvcHRpb25zID0gb3B0aW9ucyB8
        fCB7fTsKICAgIG9wdGlvbnMucGFyZW50VmlldyA9IG9wdGlvbnMucGFyZW50
        VmlldyA/IG9wdGlvbnMucGFyZW50Vmlldy5yZXBsYWNlKC9cLy9nLCAnLicp
        IDogcGFyZW50VGVtcGxhdGUodGhpcyk7CiAgICBvcHRpb25zLm91dGxldCA9
        IG9wdGlvbnMub3V0bGV0IHx8ICdtYWluJzsKCiAgICB2YXIgcGFyZW50Vmll
        dyA9IHRoaXMucm91dGVyLl9sb29rdXBBY3RpdmVWaWV3KG9wdGlvbnMucGFy
        ZW50Vmlldyk7CiAgICBpZiAocGFyZW50VmlldykgeyBwYXJlbnRWaWV3LmRp
        c2Nvbm5lY3RPdXRsZXQob3B0aW9ucy5vdXRsZXQpOyB9CiAgfSwKCiAgd2ls
        bERlc3Ryb3k6IGZ1bmN0aW9uKCkgewogICAgdGhpcy50ZWFyZG93blZpZXdz
        KCk7CiAgfSwKCiAgLyoqCiAgICBAcHJpdmF0ZQoKICAgIEBtZXRob2QgdGVh
        cmRvd25WaWV3cwogICovCiAgdGVhcmRvd25WaWV3czogZnVuY3Rpb24oKSB7
        CiAgICAvLyBUZWFyIGRvd24gdGhlIHRvcCBsZXZlbCB2aWV3CiAgICBpZiAo
        dGhpcy50ZWFyZG93blRvcExldmVsVmlldykgeyB0aGlzLnRlYXJkb3duVG9w
        TGV2ZWxWaWV3KCk7IH0KCiAgICAvLyBUZWFyIGRvd24gYW55IG91dGxldHMg
        cmVuZGVyZWQgd2l0aCAnaW50bycKICAgIHZhciB0ZWFyZG93bk91dGxldFZp
        ZXdzID0gdGhpcy50ZWFyZG93bk91dGxldFZpZXdzIHx8IFtdOwogICAgYV9m
        b3JFYWNoKHRlYXJkb3duT3V0bGV0Vmlld3MsIGZ1bmN0aW9uKHRlYXJkb3du
        T3V0bGV0VmlldykgewogICAgICB0ZWFyZG93bk91dGxldFZpZXcoKTsKICAg
        IH0pOwoKICAgIGRlbGV0ZSB0aGlzLnRlYXJkb3duVG9wTGV2ZWxWaWV3Owog
        ICAgZGVsZXRlIHRoaXMudGVhcmRvd25PdXRsZXRWaWV3czsKICAgIGRlbGV0
        ZSB0aGlzLmxhc3RSZW5kZXJlZFRlbXBsYXRlOwogIH0KfSk7CgoKCmZ1bmN0
        aW9uIHBhcmVudFJvdXRlKHJvdXRlKSB7CiAgdmFyIGhhbmRsZXJJbmZvcyA9
        IHJvdXRlLnJvdXRlci5yb3V0ZXIuc3RhdGUuaGFuZGxlckluZm9zOwoKICBp
        ZiAoIWhhbmRsZXJJbmZvcykgeyByZXR1cm47IH0KCiAgdmFyIHBhcmVudCwg
        Y3VycmVudDsKCiAgZm9yICh2YXIgaT0wLCBsPWhhbmRsZXJJbmZvcy5sZW5n
        dGg7IGk8bDsgaSsrKSB7CiAgICBjdXJyZW50ID0gaGFuZGxlckluZm9zW2ld
        LmhhbmRsZXI7CiAgICBpZiAoY3VycmVudCA9PT0gcm91dGUpIHsgcmV0dXJu
        IHBhcmVudDsgfQogICAgcGFyZW50ID0gY3VycmVudDsKICB9Cn0KCmZ1bmN0
        aW9uIHBhcmVudFRlbXBsYXRlKHJvdXRlKSB7CiAgdmFyIHBhcmVudCA9IHBh
        cmVudFJvdXRlKHJvdXRlKSwgdGVtcGxhdGU7CgogIGlmICghcGFyZW50KSB7
        IHJldHVybjsgfQoKICBpZiAodGVtcGxhdGUgPSBwYXJlbnQubGFzdFJlbmRl
        cmVkVGVtcGxhdGUpIHsKICAgIHJldHVybiB0ZW1wbGF0ZTsKICB9IGVsc2Ug
        ewogICAgcmV0dXJuIHBhcmVudFRlbXBsYXRlKHBhcmVudCk7CiAgfQp9Cgpm
        dW5jdGlvbiBub3JtYWxpemVPcHRpb25zKHJvdXRlLCBuYW1lLCB0ZW1wbGF0
        ZSwgb3B0aW9ucykgewogIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9OwogIG9w
        dGlvbnMuaW50byA9IG9wdGlvbnMuaW50byA/IG9wdGlvbnMuaW50by5yZXBs
        YWNlKC9cLy9nLCAnLicpIDogcGFyZW50VGVtcGxhdGUocm91dGUpOwogIG9w
        dGlvbnMub3V0bGV0ID0gb3B0aW9ucy5vdXRsZXQgfHwgJ21haW4nOwogIG9w
        dGlvbnMubmFtZSA9IG5hbWU7CiAgb3B0aW9ucy50ZW1wbGF0ZSA9IHRlbXBs
        YXRlOwogIG9wdGlvbnMuTE9HX1ZJRVdfTE9PS1VQUyA9IGdldChyb3V0ZS5y
        b3V0ZXIsICduYW1lc3BhY2UuTE9HX1ZJRVdfTE9PS1VQUycpOwoKICBFbWJl
        ci5hc3NlcnQoIkFuIG91dGxldCAoIitvcHRpb25zLm91dGxldCsiKSB3YXMg
        c3BlY2lmaWVkIGJ1dCB3YXMgbm90IGZvdW5kLiIsIG9wdGlvbnMub3V0bGV0
        ID09PSAnbWFpbicgfHwgb3B0aW9ucy5pbnRvKTsKCiAgdmFyIGNvbnRyb2xs
        ZXIgPSBvcHRpb25zLmNvbnRyb2xsZXIsIG5hbWVkQ29udHJvbGxlcjsKCiAg
        aWYgKG9wdGlvbnMuY29udHJvbGxlcikgewogICAgY29udHJvbGxlciA9IG9w
        dGlvbnMuY29udHJvbGxlcjsKICB9IGVsc2UgaWYgKG5hbWVkQ29udHJvbGxl
        ciA9IHJvdXRlLmNvbnRhaW5lci5sb29rdXAoJ2NvbnRyb2xsZXI6JyArIG5h
        bWUpKSB7CiAgICBjb250cm9sbGVyID0gbmFtZWRDb250cm9sbGVyOwogIH0g
        ZWxzZSB7CiAgICBjb250cm9sbGVyID0gcm91dGUuY29udHJvbGxlck5hbWUg
        fHwgcm91dGUucm91dGVOYW1lOwogIH0KCiAgaWYgKHR5cGVvZiBjb250cm9s
        bGVyID09PSAnc3RyaW5nJykgewogICAgdmFyIGNvbnRyb2xsZXJOYW1lID0g
        Y29udHJvbGxlcjsKICAgIGNvbnRyb2xsZXIgPSByb3V0ZS5jb250YWluZXIu
        bG9va3VwKCdjb250cm9sbGVyOicgKyBjb250cm9sbGVyTmFtZSk7CiAgICBp
        ZiAoIWNvbnRyb2xsZXIpIHsKICAgICAgdGhyb3cgbmV3IEVtYmVyLkVycm9y
        KCJZb3UgcGFzc2VkIGBjb250cm9sbGVyOiAnIiArIGNvbnRyb2xsZXJOYW1l
        ICsgIidgIGludG8gdGhlIGByZW5kZXJgIG1ldGhvZCwgYnV0IG5vIHN1Y2gg
        Y29udHJvbGxlciBjb3VsZCBiZSBmb3VuZC4iKTsKICAgIH0KICB9CgogIG9w
        dGlvbnMuY29udHJvbGxlciA9IGNvbnRyb2xsZXI7CgogIHJldHVybiBvcHRp
        b25zOwp9CgpmdW5jdGlvbiBzZXR1cFZpZXcodmlldywgY29udGFpbmVyLCBv
        cHRpb25zKSB7CiAgaWYgKHZpZXcpIHsKICAgIGlmIChvcHRpb25zLkxPR19W
        SUVXX0xPT0tVUFMpIHsKICAgICAgRW1iZXIuTG9nZ2VyLmluZm8oIlJlbmRl
        cmluZyAiICsgb3B0aW9ucy5uYW1lICsgIiB3aXRoICIgKyB2aWV3LCB7IGZ1
        bGxOYW1lOiAndmlldzonICsgb3B0aW9ucy5uYW1lIH0pOwogICAgfQogIH0g
        ZWxzZSB7CiAgICB2YXIgZGVmYXVsdFZpZXcgPSBvcHRpb25zLmludG8gPyAn
        dmlldzpkZWZhdWx0JyA6ICd2aWV3OnRvcGxldmVsJzsKICAgIHZpZXcgPSBj
        b250YWluZXIubG9va3VwKGRlZmF1bHRWaWV3KTsKICAgIGlmIChvcHRpb25z
        LkxPR19WSUVXX0xPT0tVUFMpIHsKICAgICAgRW1iZXIuTG9nZ2VyLmluZm8o
        IlJlbmRlcmluZyAiICsgb3B0aW9ucy5uYW1lICsgIiB3aXRoIGRlZmF1bHQg
        dmlldyAiICsgdmlldywgeyBmdWxsTmFtZTogJ3ZpZXc6JyArIG9wdGlvbnMu
        bmFtZSB9KTsKICAgIH0KICB9CgogIGlmICghZ2V0KHZpZXcsICd0ZW1wbGF0
        ZU5hbWUnKSkgewogICAgc2V0KHZpZXcsICd0ZW1wbGF0ZScsIG9wdGlvbnMu
        dGVtcGxhdGUpOwoKICAgIHNldCh2aWV3LCAnX2RlYnVnVGVtcGxhdGVOYW1l
        Jywgb3B0aW9ucy5uYW1lKTsKICB9CgogIHNldCh2aWV3LCAncmVuZGVyZWRO
        YW1lJywgb3B0aW9ucy5uYW1lKTsKICBzZXQodmlldywgJ2NvbnRyb2xsZXIn
        LCBvcHRpb25zLmNvbnRyb2xsZXIpOwoKICByZXR1cm4gdmlldzsKfQoKZnVu
        Y3Rpb24gYXBwZW5kVmlldyhyb3V0ZSwgdmlldywgb3B0aW9ucykgewogIGlm
        IChvcHRpb25zLmludG8pIHsKICAgIHZhciBwYXJlbnRWaWV3ID0gcm91dGUu
        cm91dGVyLl9sb29rdXBBY3RpdmVWaWV3KG9wdGlvbnMuaW50byk7CiAgICB2
        YXIgdGVhcmRvd25PdXRsZXRWaWV3ID0gZ2VuZXJhdGVPdXRsZXRUZWFyZG93
        bihwYXJlbnRWaWV3LCBvcHRpb25zLm91dGxldCk7CiAgICBpZiAoIXJvdXRl
        LnRlYXJkb3duT3V0bGV0Vmlld3MpIHsgcm91dGUudGVhcmRvd25PdXRsZXRW
        aWV3cyA9IFtdOyB9CiAgICBhX3JlcGxhY2Uocm91dGUudGVhcmRvd25PdXRs
        ZXRWaWV3cywgMCwgMCwgW3RlYXJkb3duT3V0bGV0Vmlld10pOwogICAgcGFy
        ZW50Vmlldy5jb25uZWN0T3V0bGV0KG9wdGlvbnMub3V0bGV0LCB2aWV3KTsK
        ICB9IGVsc2UgewogICAgdmFyIHJvb3RFbGVtZW50ID0gZ2V0KHJvdXRlLCAn
        cm91dGVyLm5hbWVzcGFjZS5yb290RWxlbWVudCcpOwogICAgLy8gdGVhciBk
        b3duIHZpZXcgaWYgb25lIGlzIGFscmVhZHkgcmVuZGVyZWQKICAgIGlmIChy
        b3V0ZS50ZWFyZG93blRvcExldmVsVmlldykgewogICAgICByb3V0ZS50ZWFy
        ZG93blRvcExldmVsVmlldygpOwogICAgfQogICAgcm91dGUucm91dGVyLl9j
        b25uZWN0QWN0aXZlVmlldyhvcHRpb25zLm5hbWUsIHZpZXcpOwogICAgcm91
        dGUudGVhcmRvd25Ub3BMZXZlbFZpZXcgPSBnZW5lcmF0ZVRvcExldmVsVGVh
        cmRvd24odmlldyk7CiAgICB2aWV3LmFwcGVuZFRvKHJvb3RFbGVtZW50KTsK
        ICB9Cn0KCmZ1bmN0aW9uIGdlbmVyYXRlVG9wTGV2ZWxUZWFyZG93bih2aWV3
        KSB7CiAgcmV0dXJuIGZ1bmN0aW9uKCkgeyB2aWV3LmRlc3Ryb3koKTsgfTsK
        fQoKZnVuY3Rpb24gZ2VuZXJhdGVPdXRsZXRUZWFyZG93bihwYXJlbnRWaWV3
        LCBvdXRsZXQpIHsKICByZXR1cm4gZnVuY3Rpb24oKSB7IHBhcmVudFZpZXcu
        ZGlzY29ubmVjdE91dGxldChvdXRsZXQpOyB9Owp9Cgp9KSgpOwoKCgooZnVu
        Y3Rpb24oKSB7Cgp9KSgpOwoKCgooZnVuY3Rpb24oKSB7CkVtYmVyLm9uTG9h
        ZCgnRW1iZXIuSGFuZGxlYmFycycsIGZ1bmN0aW9uKCkgewogIHZhciBoYW5k
        bGViYXJzUmVzb2x2ZSA9IEVtYmVyLkhhbmRsZWJhcnMucmVzb2x2ZVBhcmFt
        cywKICAgICAgbWFwID0gRW1iZXIuQXJyYXlQb2x5ZmlsbHMubWFwLAogICAg
        ICBnZXQgPSBFbWJlci5nZXQsCiAgICAgIGhhbmRsZWJhcnNHZXQgPSBFbWJl
        ci5IYW5kbGViYXJzLmdldDsKCiAgZnVuY3Rpb24gcmVzb2x2ZVBhcmFtcyhj
        b250ZXh0LCBwYXJhbXMsIG9wdGlvbnMpIHsKICAgIHJldHVybiBtYXAuY2Fs
        bChyZXNvbHZlUGF0aHMoY29udGV4dCwgcGFyYW1zLCBvcHRpb25zKSwgZnVu
        Y3Rpb24ocGF0aCwgaSkgewogICAgICBpZiAobnVsbCA9PT0gcGF0aCkgewog
        ICAgICAgIC8vIFBhcmFtIHdhcyBzdHJpbmcvbnVtYmVyLCBub3QgYSBwYXRo
        LCBzbyBqdXN0IHJldHVybiByYXcgc3RyaW5nL251bWJlci4KICAgICAgICBy
        ZXR1cm4gcGFyYW1zW2ldOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVy
        biBoYW5kbGViYXJzR2V0KGNvbnRleHQsIHBhdGgsIG9wdGlvbnMpOwogICAg
        ICB9CiAgICB9KTsKICB9CgogIGZ1bmN0aW9uIHJlc29sdmVQYXRocyhjb250
        ZXh0LCBwYXJhbXMsIG9wdGlvbnMpIHsKICAgIHZhciByZXNvbHZlZCA9IGhh
        bmRsZWJhcnNSZXNvbHZlKGNvbnRleHQsIHBhcmFtcywgb3B0aW9ucyksCiAg
        ICAgICAgdHlwZXMgPSBvcHRpb25zLnR5cGVzOwoKICAgIHJldHVybiBtYXAu
        Y2FsbChyZXNvbHZlZCwgZnVuY3Rpb24ob2JqZWN0LCBpKSB7CiAgICAgIGlm
        ICh0eXBlc1tpXSA9PT0gJ0lEJykgewogICAgICAgIHJldHVybiB1bndyYXAo
        b2JqZWN0LCBwYXJhbXNbaV0pOwogICAgICB9IGVsc2UgewogICAgICAgIHJl
        dHVybiBudWxsOwogICAgICB9CiAgICB9KTsKCiAgICBmdW5jdGlvbiB1bndy
        YXAob2JqZWN0LCBwYXRoKSB7CiAgICAgIGlmIChwYXRoID09PSAnY29udHJv
        bGxlcicpIHsgcmV0dXJuIHBhdGg7IH0KCiAgICAgIGlmIChFbWJlci5Db250
        cm9sbGVyTWl4aW4uZGV0ZWN0KG9iamVjdCkpIHsKICAgICAgICByZXR1cm4g
        dW53cmFwKGdldChvYmplY3QsICdtb2RlbCcpLCBwYXRoID8gcGF0aCArICcu
        bW9kZWwnIDogJ21vZGVsJyk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0
        dXJuIHBhdGg7CiAgICAgIH0KICAgIH0KICB9CgogIEVtYmVyLlJvdXRlci5y
        ZXNvbHZlUGFyYW1zID0gcmVzb2x2ZVBhcmFtczsKICBFbWJlci5Sb3V0ZXIu
        cmVzb2x2ZVBhdGhzID0gcmVzb2x2ZVBhdGhzOwp9KTsKCn0pKCk7CgoKCihm
        dW5jdGlvbigpIHsKLyoqCkBtb2R1bGUgZW1iZXIKQHN1Ym1vZHVsZSBlbWJl
        ci1yb3V0aW5nCiovCgp2YXIgZ2V0ID0gRW1iZXIuZ2V0LCBzZXQgPSBFbWJl
        ci5zZXQsIGZtdCA9IEVtYmVyLlN0cmluZy5mbXQ7Cgp2YXIgc2xpY2UgPSBB
        cnJheS5wcm90b3R5cGUuc2xpY2U7CkVtYmVyLm9uTG9hZCgnRW1iZXIuSGFu
        ZGxlYmFycycsIGZ1bmN0aW9uKEhhbmRsZWJhcnMpIHsKCiAgdmFyIFF1ZXJ5
        UGFyYW1zID0gRW1iZXIuT2JqZWN0LmV4dGVuZCh7CiAgICB2YWx1ZXM6IG51
        bGwKICB9KTsKCiAgdmFyIHJlc29sdmVQYXJhbXMgPSBFbWJlci5Sb3V0ZXIu
        cmVzb2x2ZVBhcmFtcywKICAgICAgdHJhbnNsYXRlUXVlcnlQYXJhbXMgPSBF
        bWJlci5Sb3V0ZXIuX3RyYW5zbGF0ZVF1ZXJ5UGFyYW1zLAogICAgICByZXNv
        bHZlUGF0aHMgID0gRW1iZXIuUm91dGVyLnJlc29sdmVQYXRocywKICAgICAg
        aXNTaW1wbGVDbGljayA9IEVtYmVyLlZpZXdVdGlscy5pc1NpbXBsZUNsaWNr
        OwoKICBmdW5jdGlvbiBmdWxsUm91dGVOYW1lKHJvdXRlciwgbmFtZSkgewog
        ICAgdmFyIG5hbWVXaXRoSW5kZXg7CiAgICBpZiAoIXJvdXRlci5oYXNSb3V0
        ZShuYW1lKSkgewogICAgICBuYW1lV2l0aEluZGV4ID0gbmFtZSArICcuaW5k
        ZXgnOwogICAgICBFbWJlci5hc3NlcnQoZm10KCJUaGUgYXR0ZW1wdCB0byBs
        aW5rLXRvIHJvdXRlICclQCcgZmFpbGVkIChhbHNvIHRyaWVkICclQCcpLiAi
        ICsKICAgICAgICAgICAgICAgICAgICAgICAiVGhlIHJvdXRlciBkaWQgbm90
        IGZpbmQgJyVAJyBpbiBpdHMgcG9zc2libGUgcm91dGVzOiAnJUAnIiwKICAg
        ICAgICAgICAgICAgICAgICAgICBbbmFtZSwgbmFtZVdpdGhJbmRleCwgbmFt
        ZSwgRW1iZXIua2V5cyhyb3V0ZXIucm91dGVyLnJlY29nbml6ZXIubmFtZXMp
        LmpvaW4oIicsICciKV0pLAogICAgICAgICAgICAgICAgICAgICAgIHJvdXRl
        ci5oYXNSb3V0ZShuYW1lV2l0aEluZGV4KSk7CiAgICAgIG5hbWUgPSBuYW1l
        V2l0aEluZGV4OwogICAgfQoKICAgIHJldHVybiBuYW1lOwogIH0KCiAgZnVu
        Y3Rpb24gZ2V0UmVzb2x2ZWRQYXRocyhvcHRpb25zKSB7CgogICAgdmFyIHR5
        cGVzID0gb3B0aW9ucy5vcHRpb25zLnR5cGVzLAogICAgICAgIGRhdGEgPSBv
        cHRpb25zLm9wdGlvbnMuZGF0YTsKCiAgICByZXR1cm4gcmVzb2x2ZVBhdGhz
        KG9wdGlvbnMuY29udGV4dCwgb3B0aW9ucy5wYXJhbXMsIHsgdHlwZXM6IHR5
        cGVzLCBkYXRhOiBkYXRhIH0pOwogIH0KCiAgLyoqCiAgICBgRW1iZXIuTGlu
        a1ZpZXdgIHJlbmRlcnMgYW4gZWxlbWVudCB3aG9zZSBgY2xpY2tgIGV2ZW50
        IHRyaWdnZXJzIGEKICAgIHRyYW5zaXRpb24gb2YgdGhlIGFwcGxpY2F0aW9u
        J3MgaW5zdGFuY2Ugb2YgYEVtYmVyLlJvdXRlcmAgdG8KICAgIGEgc3VwcGxp
        ZWQgcm91dGUgYnkgbmFtZS4KCiAgICBJbnN0YW5jZXMgb2YgYExpbmtWaWV3
        YCB3aWxsIG1vc3QgbGlrZWx5IGJlIGNyZWF0ZWQgdGhyb3VnaAogICAgdGhl
        IGBsaW5rLXRvYCBIYW5kbGViYXJzIGhlbHBlciwgYnV0IHByb3BlcnRpZXMg
        b2YgdGhpcyBjbGFzcwogICAgY2FuIGJlIG92ZXJyaWRkZW4gdG8gY3VzdG9t
        aXplIGFwcGxpY2F0aW9uLXdpZGUgYmVoYXZpb3IuCgogICAgQGNsYXNzIExp
        bmtWaWV3CiAgICBAbmFtZXNwYWNlIEVtYmVyCiAgICBAZXh0ZW5kcyBFbWJl
        ci5WaWV3CiAgICBAc2VlIHtIYW5kbGViYXJzLmhlbHBlcnMubGluay10b30K
        ICAqKi8KICB2YXIgTGlua1ZpZXcgPSBFbWJlci5MaW5rVmlldyA9IEVtYmVy
        LlZpZXcuZXh0ZW5kKHsKICAgIHRhZ05hbWU6ICdhJywKICAgIGN1cnJlbnRX
        aGVuOiBudWxsLAoKICAgIC8qKgogICAgICBTZXRzIHRoZSBgdGl0bGVgIGF0
        dHJpYnV0ZSBvZiB0aGUgYExpbmtWaWV3YCdzIEhUTUwgZWxlbWVudC4KCiAg
        ICAgIEBwcm9wZXJ0eSB0aXRsZQogICAgICBAZGVmYXVsdCBudWxsCiAgICAq
        Ki8KICAgIHRpdGxlOiBudWxsLAoKICAgIC8qKgogICAgICBTZXRzIHRoZSBg
        cmVsYCBhdHRyaWJ1dGUgb2YgdGhlIGBMaW5rVmlld2AncyBIVE1MIGVsZW1l
        bnQuCgogICAgICBAcHJvcGVydHkgcmVsCiAgICAgIEBkZWZhdWx0IG51bGwK
        ICAgICoqLwogICAgcmVsOiBudWxsLAoKICAgIC8qKgogICAgICBUaGUgQ1NT
        IGNsYXNzIHRvIGFwcGx5IHRvIGBMaW5rVmlld2AncyBlbGVtZW50IHdoZW4g
        aXRzIGBhY3RpdmVgCiAgICAgIHByb3BlcnR5IGlzIGB0cnVlYC4KCiAgICAg
        IEBwcm9wZXJ0eSBhY3RpdmVDbGFzcwogICAgICBAdHlwZSBTdHJpbmcKICAg
        ICAgQGRlZmF1bHQgYWN0aXZlCiAgICAqKi8KICAgIGFjdGl2ZUNsYXNzOiAn
        YWN0aXZlJywKCiAgICAvKioKICAgICAgVGhlIENTUyBjbGFzcyB0byBhcHBs
        eSB0byBgTGlua1ZpZXdgJ3MgZWxlbWVudCB3aGVuIGl0cyBgbG9hZGluZ2AK
        ICAgICAgcHJvcGVydHkgaXMgYHRydWVgLgoKICAgICAgQHByb3BlcnR5IGxv
        YWRpbmdDbGFzcwogICAgICBAdHlwZSBTdHJpbmcKICAgICAgQGRlZmF1bHQg
        bG9hZGluZwogICAgKiovCiAgICBsb2FkaW5nQ2xhc3M6ICdsb2FkaW5nJywK
        CiAgICAvKioKICAgICAgVGhlIENTUyBjbGFzcyB0byBhcHBseSB0byBhIGBM
        aW5rVmlld2AncyBlbGVtZW50IHdoZW4gaXRzIGBkaXNhYmxlZGAKICAgICAg
        cHJvcGVydHkgaXMgYHRydWVgLgoKICAgICAgQHByb3BlcnR5IGRpc2FibGVk
        Q2xhc3MKICAgICAgQHR5cGUgU3RyaW5nCiAgICAgIEBkZWZhdWx0IGRpc2Fi
        bGVkCiAgICAqKi8KICAgIGRpc2FibGVkQ2xhc3M6ICdkaXNhYmxlZCcsCiAg
        ICBfaXNEaXNhYmxlZDogZmFsc2UsCgogICAgLyoqCiAgICAgIERldGVybWlu
        ZXMgd2hldGhlciB0aGUgYExpbmtWaWV3YCB3aWxsIHRyaWdnZXIgcm91dGlu
        ZyB2aWEKICAgICAgdGhlIGByZXBsYWNlV2l0aGAgcm91dGluZyBzdHJhdGVn
        eS4KCiAgICAgIEBwcm9wZXJ0eSByZXBsYWNlCiAgICAgIEB0eXBlIEJvb2xl
        YW4KICAgICAgQGRlZmF1bHQgZmFsc2UKICAgICoqLwogICAgcmVwbGFjZTog
        ZmFsc2UsCgogICAgLyoqCiAgICAgIEJ5IGRlZmF1bHQgdGhlIGB7e2xpbmst
        dG99fWAgaGVscGVyIHdpbGwgYmluZCB0byB0aGUgYGhyZWZgIGFuZAogICAg
        ICBgdGl0bGVgIGF0dHJpYnV0ZXMuIEl0J3MgZGlzY291cmFnZSB0aGF0IHlv
        dSBvdmVycmlkZSB0aGVzZSBkZWZhdWx0cywKICAgICAgaG93ZXZlciB5b3Ug
        Y2FuIHB1c2ggb250byB0aGUgYXJyYXkgaWYgbmVlZGVkLgoKICAgICAgQHBy
        b3BlcnR5IGF0dHJpYnV0ZUJpbmRpbmdzCiAgICAgIEB0eXBlIEFycmF5IHwg
        U3RyaW5nCiAgICAgIEBkZWZhdWx0IFsnaHJlZicsICd0aXRsZScsICdyZWwn
        XQogICAgICoqLwogICAgYXR0cmlidXRlQmluZGluZ3M6IFsnaHJlZicsICd0
        aXRsZScsICdyZWwnXSwKCiAgICAvKioKICAgICAgQnkgZGVmYXVsdCB0aGUg
        YHt7bGluay10b319YCBoZWxwZXIgd2lsbCBiaW5kIHRvIHRoZSBgYWN0aXZl
        YCwgYGxvYWRpbmdgLCBhbmQKICAgICAgYGRpc2FibGVkYCBjbGFzc2VzLiBJ
        dCBpcyBkaXNjb3VyYWdlZCB0byBvdmVycmlkZSB0aGVzZSBkaXJlY3RseS4K
        CiAgICAgIEBwcm9wZXJ0eSBjbGFzc05hbWVCaW5kaW5ncwogICAgICBAdHlw
        ZSBBcnJheQogICAgICBAZGVmYXVsdCBbJ2FjdGl2ZScsICdsb2FkaW5nJywg
        J2Rpc2FibGVkJ10KICAgICAqKi8KICAgIGNsYXNzTmFtZUJpbmRpbmdzOiBb
        J2FjdGl2ZScsICdsb2FkaW5nJywgJ2Rpc2FibGVkJ10sCgogICAgLyoqCiAg
        ICAgIEJ5IGRlZmF1bHQgdGhlIGB7e2xpbmstdG99fWAgaGVscGVyIHJlc3Bv
        bmRzIHRvIHRoZSBgY2xpY2tgIGV2ZW50LiBZb3UKICAgICAgY2FuIG92ZXJy
        aWRlIHRoaXMgZ2xvYmFsbHkgYnkgc2V0dGluZyB0aGlzIHByb3BlcnR5IHRv
        IHlvdXIgY3VzdG9tCiAgICAgIGV2ZW50IG5hbWUuCgogICAgICBUaGlzIGlz
        IHBhcnRpY3VsYXJseSB1c2VmdWwgb24gbW9iaWxlIHdoZW4gb25lIHdhbnRz
        IHRvIGF2b2lkIHRoZSAzMDBtcwogICAgICBjbGljayBkZWxheSB1c2luZyBz
        b21lIHNvcnQgb2YgY3VzdG9tIGB0YXBgIGV2ZW50LgoKICAgICAgQHByb3Bl
        cnR5IGV2ZW50TmFtZQogICAgICBAdHlwZSBTdHJpbmcKICAgICAgQGRlZmF1
        bHQgY2xpY2sKICAgICovCiAgICBldmVudE5hbWU6ICdjbGljaycsCgogICAg
        Ly8gdGhpcyBpcyBkb2MnZWQgaGVyZSBzbyBpdCBzaG93cyB1cCBpbiB0aGUg
        ZXZlbnRzCiAgICAvLyBzZWN0aW9uIG9mIHRoZSBBUEkgZG9jdW1lbnRhdGlv
        biwgd2hpY2ggaXMgd2hlcmUKICAgIC8vIHBlb3BsZSB3aWxsIGxpa2VseSBn
        byBsb29raW5nIGZvciBpdC4KICAgIC8qKgogICAgICBUcmlnZ2VycyB0aGUg
        YExpbmtWaWV3YCdzIHJvdXRpbmcgYmVoYXZpb3IuIElmCiAgICAgIGBldmVu
        dE5hbWVgIGlzIGNoYW5nZWQgdG8gYSB2YWx1ZSBvdGhlciB0aGFuIGBjbGlj
        a2AKICAgICAgdGhlIHJvdXRpbmcgYmVoYXZpb3Igd2lsbCB0cmlnZ2VyIG9u
        IHRoYXQgY3VzdG9tIGV2ZW50CiAgICAgIGluc3RlYWQuCgogICAgICBAZXZl
        bnQgY2xpY2sKICAgICoqLwoKICAgIC8qKgogICAgICBBbiBvdmVycmlkYWJs
        ZSBtZXRob2QgY2FsbGVkIHdoZW4gTGlua1ZpZXcgb2JqZWN0cyBhcmUgaW5z
        dGFudGlhdGVkLgoKICAgICAgRXhhbXBsZToKCiAgICAgIGBgYGphdmFzY3Jp
        cHQKICAgICAgQXBwLk15TGlua1ZpZXcgPSBFbWJlci5MaW5rVmlldy5leHRl
        bmQoewogICAgICAgIGluaXQ6IGZ1bmN0aW9uKCkgewogICAgICAgICAgdGhp
        cy5fc3VwZXIoKTsKICAgICAgICAgIEVtYmVyLkxvZ2dlci5sb2coJ0V2ZW50
        IGlzICcgKyB0aGlzLmdldCgnZXZlbnROYW1lJykpOwogICAgICAgIH0KICAg
        ICAgfSk7CiAgICAgIGBgYAoKICAgICAgTk9URTogSWYgeW91IGRvIG92ZXJy
        aWRlIGBpbml0YCBmb3IgYSBmcmFtZXdvcmsgY2xhc3MgbGlrZSBgRW1iZXIu
        Vmlld2Agb3IKICAgICAgYEVtYmVyLkFycmF5Q29udHJvbGxlcmAsIGJlIHN1
        cmUgdG8gY2FsbCBgdGhpcy5fc3VwZXIoKWAgaW4geW91cgogICAgICBgaW5p
        dGAgZGVjbGFyYXRpb24hIElmIHlvdSBkb24ndCwgRW1iZXIgbWF5IG5vdCBo
        YXZlIGFuIG9wcG9ydHVuaXR5IHRvCiAgICAgIGRvIGltcG9ydGFudCBzZXR1
        cCB3b3JrLCBhbmQgeW91J2xsIHNlZSBzdHJhbmdlIGJlaGF2aW9yIGluIHlv
        dXIKICAgICAgYXBwbGljYXRpb24uCgogICAgICBAbWV0aG9kIGluaXQKICAg
        ICovCiAgICBpbml0OiBmdW5jdGlvbigpIHsKICAgICAgdGhpcy5fc3VwZXIu
        YXBwbHkodGhpcywgYXJndW1lbnRzKTsKCiAgICAgIC8vIE1hcCBkZXNpcmVk
        IGV2ZW50IG5hbWUgdG8gaW52b2tlIGZ1bmN0aW9uCiAgICAgIHZhciBldmVu
        dE5hbWUgPSBnZXQodGhpcywgJ2V2ZW50TmFtZScpLCBpOwogICAgICB0aGlz
        Lm9uKGV2ZW50TmFtZSwgdGhpcywgdGhpcy5faW52b2tlKTsKICAgIH0sCgog
        ICAgLyoqCiAgICAgIFRoaXMgbWV0aG9kIGlzIGludm9rZWQgYnkgb2JzZXJ2
        ZXJzIGluc3RhbGxlZCBkdXJpbmcgYGluaXRgIHRoYXQgZmlyZQogICAgICB3
        aGVuZXZlciB0aGUgcGFyYW1zIGNoYW5nZQoKICAgICAgQHByaXZhdGUKICAg
        ICAgQG1ldGhvZCBfcGFyYW1zQ2hhbmdlZAogICAgICovCiAgICBfcGFyYW1z
        Q2hhbmdlZDogZnVuY3Rpb24oKSB7CiAgICAgIHRoaXMubm90aWZ5UHJvcGVy
        dHlDaGFuZ2UoJ3Jlc29sdmVkUGFyYW1zJyk7CiAgICB9LAoKICAgIC8qKgog
        ICAgIFRoaXMgaXMgY2FsbGVkIHRvIHNldHVwIG9ic2VydmVycyB0aGF0IHdp
        bGwgdHJpZ2dlciBhIHJlcmVuZGVyLgoKICAgICBAcHJpdmF0ZQogICAgIEBt
        ZXRob2QgX3NldHVwUGF0aE9ic2VydmVycwogICAgKiovCiAgICBfc2V0dXBQ
        YXRoT2JzZXJ2ZXJzOiBmdW5jdGlvbigpewogICAgICB2YXIgaGVscGVyUGFy
        YW1ldGVycyA9IHRoaXMucGFyYW1ldGVycywKICAgICAgICAgIGxpbmtUZXh0
        UGF0aCAgICAgPSBoZWxwZXJQYXJhbWV0ZXJzLm9wdGlvbnMubGlua1RleHRQ
        YXRoLAogICAgICAgICAgcGF0aHMgPSBnZXRSZXNvbHZlZFBhdGhzKGhlbHBl
        clBhcmFtZXRlcnMpLAogICAgICAgICAgbGVuZ3RoID0gcGF0aHMubGVuZ3Ro
        LAogICAgICAgICAgcGF0aCwgaSwgbm9ybWFsaXplZFBhdGg7CgogICAgICBp
        ZiAobGlua1RleHRQYXRoKSB7CiAgICAgICAgbm9ybWFsaXplZFBhdGggPSBF
        bWJlci5IYW5kbGViYXJzLm5vcm1hbGl6ZVBhdGgoaGVscGVyUGFyYW1ldGVy
        cy5jb250ZXh0LCBsaW5rVGV4dFBhdGgsIGhlbHBlclBhcmFtZXRlcnMub3B0
        aW9ucy5kYXRhKTsKICAgICAgICB0aGlzLnJlZ2lzdGVyT2JzZXJ2ZXIobm9y
        bWFsaXplZFBhdGgucm9vdCwgbm9ybWFsaXplZFBhdGgucGF0aCwgdGhpcywg
        dGhpcy5yZXJlbmRlcik7CiAgICAgIH0KCiAgICAgIGZvcihpPTA7IGkgPCBs
        ZW5ndGg7IGkrKykgewogICAgICAgIHBhdGggPSBwYXRoc1tpXTsKICAgICAg
        ICBpZiAobnVsbCA9PT0gcGF0aCkgewogICAgICAgICAgLy8gQSBsaXRlcmFs
        IHZhbHVlIHdhcyBwcm92aWRlZCwgbm90IGEgcGF0aCwgc28gbm90aGluZyB0
        byBvYnNlcnZlLgogICAgICAgICAgY29udGludWU7CiAgICAgICAgfQoKICAg
        ICAgICBub3JtYWxpemVkUGF0aCA9IEVtYmVyLkhhbmRsZWJhcnMubm9ybWFs
        aXplUGF0aChoZWxwZXJQYXJhbWV0ZXJzLmNvbnRleHQsIHBhdGgsIGhlbHBl
        clBhcmFtZXRlcnMub3B0aW9ucy5kYXRhKTsKICAgICAgICB0aGlzLnJlZ2lz
        dGVyT2JzZXJ2ZXIobm9ybWFsaXplZFBhdGgucm9vdCwgbm9ybWFsaXplZFBh
        dGgucGF0aCwgdGhpcywgdGhpcy5fcGFyYW1zQ2hhbmdlZCk7CiAgICAgIH0K
        CiAgICAgIHZhciBxdWVyeVBhcmFtc09iamVjdCA9IHRoaXMucXVlcnlQYXJh
        bXNPYmplY3Q7CiAgICAgIGlmIChxdWVyeVBhcmFtc09iamVjdCkgewogICAg
        ICAgIHZhciB2YWx1ZXMgPSBxdWVyeVBhcmFtc09iamVjdC52YWx1ZXM7Cgog
        ICAgICAgIC8vIEluc3RhbGwgb2JzZXJ2ZXJzIGZvciBhbGwgb2YgdGhlIGhh
        c2ggb3B0aW9ucwogICAgICAgIC8vIHByb3ZpZGVkIGluIHRoZSAocXVlcnkt
        cGFyYW1zKSBzdWJleHByZXNzaW9uLgogICAgICAgIGZvciAodmFyIGsgaW4g
        dmFsdWVzKSB7CiAgICAgICAgICBpZiAoIXZhbHVlcy5oYXNPd25Qcm9wZXJ0
        eShrKSkgeyBjb250aW51ZTsgfQoKICAgICAgICAgIGlmIChxdWVyeVBhcmFt
        c09iamVjdC50eXBlc1trXSA9PT0gJ0lEJykgewogICAgICAgICAgICBub3Jt
        YWxpemVkUGF0aCA9IEVtYmVyLkhhbmRsZWJhcnMubm9ybWFsaXplUGF0aCho
        ZWxwZXJQYXJhbWV0ZXJzLmNvbnRleHQsIHZhbHVlc1trXSwgaGVscGVyUGFy
        YW1ldGVycy5vcHRpb25zLmRhdGEpOwogICAgICAgICAgICB0aGlzLnJlZ2lz
        dGVyT2JzZXJ2ZXIobm9ybWFsaXplZFBhdGgucm9vdCwgbm9ybWFsaXplZFBh
        dGgucGF0aCwgdGhpcywgdGhpcy5fcGFyYW1zQ2hhbmdlZCk7CiAgICAgICAg
        ICB9CiAgICAgICAgfQogICAgICB9CiAgICB9LAoKICAgIGFmdGVyUmVuZGVy
        OiBmdW5jdGlvbigpewogICAgICB0aGlzLl9zdXBlci5hcHBseSh0aGlzLCBh
        cmd1bWVudHMpOwogICAgICB0aGlzLl9zZXR1cFBhdGhPYnNlcnZlcnMoKTsK
        ICAgIH0sCgogICAgLyoqCiAgICAgIEV2ZW4gdGhvdWdoIHRoaXMgaXNuJ3Qg
        YSB2aXJ0dWFsIHZpZXcsIHdlIHdhbnQgdG8gdHJlYXQgaXQgYXMgaWYgaXQg
        aXMKICAgICAgc28gdGhhdCB5b3UgY2FuIGFjY2VzcyB0aGUgcGFyZW50IHdp
        dGgge3t2aWV3LnByb3B9fQoKICAgICAgQHByaXZhdGUKICAgICAgQG1ldGhv
        ZCBjb25jcmV0ZVZpZXcKICAgICoqLwogICAgY29uY3JldGVWaWV3OiBFbWJl
        ci5jb21wdXRlZChmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIGdldCh0aGlz
        LCAncGFyZW50VmlldycpOwogICAgfSkucHJvcGVydHkoJ3BhcmVudFZpZXcn
        KSwKCiAgICAvKioKCiAgICAgIEFjY2Vzc2VkIGFzIGEgY2xhc3NuYW1lIGJp
        bmRpbmcgdG8gYXBwbHkgdGhlIGBMaW5rVmlld2AncyBgZGlzYWJsZWRDbGFz
        c2AKICAgICAgQ1NTIGBjbGFzc2AgdG8gdGhlIGVsZW1lbnQgd2hlbiB0aGUg
        bGluayBpcyBkaXNhYmxlZC4KCiAgICAgIFdoZW4gYHRydWVgIGludGVyYWN0
        aW9ucyB3aXRoIHRoZSBlbGVtZW50IHdpbGwgbm90IHRyaWdnZXIgcm91dGUg
        Y2hhbmdlcy4KICAgICAgQHByb3BlcnR5IGRpc2FibGVkCiAgICAqLwogICAg
        ZGlzYWJsZWQ6IEVtYmVyLmNvbXB1dGVkKGZ1bmN0aW9uIGNvbXB1dGVMaW5r
        Vmlld0Rpc2FibGVkKGtleSwgdmFsdWUpIHsKICAgICAgaWYgKHZhbHVlICE9
        PSB1bmRlZmluZWQpIHsgdGhpcy5zZXQoJ19pc0Rpc2FibGVkJywgdmFsdWUp
        OyB9CgogICAgICByZXR1cm4gdmFsdWUgPyBnZXQodGhpcywgJ2Rpc2FibGVk
        Q2xhc3MnKSA6IGZhbHNlOwogICAgfSksCgogICAgLyoqCiAgICAgIEFjY2Vz
        c2VkIGFzIGEgY2xhc3NuYW1lIGJpbmRpbmcgdG8gYXBwbHkgdGhlIGBMaW5r
        Vmlld2AncyBgYWN0aXZlQ2xhc3NgCiAgICAgIENTUyBgY2xhc3NgIHRvIHRo
        ZSBlbGVtZW50IHdoZW4gdGhlIGxpbmsgaXMgYWN0aXZlLgoKICAgICAgQSBg
        TGlua1ZpZXdgIGlzIGNvbnNpZGVyZWQgYWN0aXZlIHdoZW4gaXRzIGBjdXJy
        ZW50V2hlbmAgcHJvcGVydHkgaXMgYHRydWVgCiAgICAgIG9yIHRoZSBhcHBs
        aWNhdGlvbidzIGN1cnJlbnQgcm91dGUgaXMgdGhlIHJvdXRlIHRoZSBgTGlu
        a1ZpZXdgIHdvdWxkIHRyaWdnZXIKICAgICAgdHJhbnNpdGlvbnMgaW50by4K
        CiAgICAgIEBwcm9wZXJ0eSBhY3RpdmUKICAgICoqLwogICAgYWN0aXZlOiBF
        bWJlci5jb21wdXRlZChmdW5jdGlvbiBjb21wdXRlTGlua1ZpZXdBY3RpdmUo
        KSB7CiAgICAgIGlmIChnZXQodGhpcywgJ2xvYWRpbmcnKSkgeyByZXR1cm4g
        ZmFsc2U7IH0KCiAgICAgIHZhciByb3V0ZXIgPSBnZXQodGhpcywgJ3JvdXRl
        cicpLAogICAgICAgICAgcm91dGVBcmdzID0gZ2V0KHRoaXMsICdyb3V0ZUFy
        Z3MnKSwKICAgICAgICAgIGNvbnRleHRzID0gcm91dGVBcmdzLnNsaWNlKDEp
        LAogICAgICAgICAgcmVzb2x2ZWRQYXJhbXMgPSBnZXQodGhpcywgJ3Jlc29s
        dmVkUGFyYW1zJyksCiAgICAgICAgICBjdXJyZW50V2hlbiA9IHRoaXMuY3Vy
        cmVudFdoZW4gfHwgcmVzb2x2ZWRQYXJhbXNbMF0sCiAgICAgICAgICBjdXJy
        ZW50V2l0aEluZGV4ID0gY3VycmVudFdoZW4gKyAnLmluZGV4JywKICAgICAg
        ICAgIGlzQWN0aXZlID0gcm91dGVyLmlzQWN0aXZlLmFwcGx5KHJvdXRlciwg
        W2N1cnJlbnRXaGVuXS5jb25jYXQoY29udGV4dHMpKSB8fAogICAgICAgICAg
        ICAgICAgICAgICByb3V0ZXIuaXNBY3RpdmUuYXBwbHkocm91dGVyLCBbY3Vy
        cmVudFdpdGhJbmRleF0uY29uY2F0KGNvbnRleHRzKSk7CgogICAgICBpZiAo
        aXNBY3RpdmUpIHsgcmV0dXJuIGdldCh0aGlzLCAnYWN0aXZlQ2xhc3MnKTsg
        fQogICAgfSkucHJvcGVydHkoJ3Jlc29sdmVkUGFyYW1zJywgJ3JvdXRlQXJn
        cycpLAoKICAgIC8qKgogICAgICBBY2Nlc3NlZCBhcyBhIGNsYXNzbmFtZSBi
        aW5kaW5nIHRvIGFwcGx5IHRoZSBgTGlua1ZpZXdgJ3MgYGxvYWRpbmdDbGFz
        c2AKICAgICAgQ1NTIGBjbGFzc2AgdG8gdGhlIGVsZW1lbnQgd2hlbiB0aGUg
        bGluayBpcyBsb2FkaW5nLgoKICAgICAgQSBgTGlua1ZpZXdgIGlzIGNvbnNp
        ZGVyZWQgbG9hZGluZyB3aGVuIGl0IGhhcyBhdCBsZWFzdCBvbmUKICAgICAg
        cGFyYW1ldGVyIHdob3NlIHZhbHVlIGlzIGN1cnJlbnRseSBudWxsIG9yIHVu
        ZGVmaW5lZC4gRHVyaW5nCiAgICAgIHRoaXMgdGltZSwgY2xpY2tpbmcgdGhl
        IGxpbmsgd2lsbCBwZXJmb3JtIG5vIHRyYW5zaXRpb24gYW5kCiAgICAgIGVt
        aXQgYSB3YXJuaW5nIHRoYXQgdGhlIGxpbmsgaXMgc3RpbGwgaW4gYSBsb2Fk
        aW5nIHN0YXRlLgoKICAgICAgQHByb3BlcnR5IGxvYWRpbmcKICAgICoqLwog
        ICAgbG9hZGluZzogRW1iZXIuY29tcHV0ZWQoZnVuY3Rpb24gY29tcHV0ZUxp
        bmtWaWV3TG9hZGluZygpIHsKICAgICAgaWYgKCFnZXQodGhpcywgJ3JvdXRl
        QXJncycpKSB7IHJldHVybiBnZXQodGhpcywgJ2xvYWRpbmdDbGFzcycpOyB9
        CiAgICB9KS5wcm9wZXJ0eSgncm91dGVBcmdzJyksCgogICAgLyoqCiAgICAg
        IFJldHVybnMgdGhlIGFwcGxpY2F0aW9uJ3MgbWFpbiByb3V0ZXIgZnJvbSB0
        aGUgY29udGFpbmVyLgoKICAgICAgQHByaXZhdGUKICAgICAgQHByb3BlcnR5
        IHJvdXRlcgogICAgKiovCiAgICByb3V0ZXI6IEVtYmVyLmNvbXB1dGVkKGZ1
        bmN0aW9uKCkgewogICAgICByZXR1cm4gZ2V0KHRoaXMsICdjb250cm9sbGVy
        JykuY29udGFpbmVyLmxvb2t1cCgncm91dGVyOm1haW4nKTsKICAgIH0pLAoK
        ICAgIC8qKgogICAgICBFdmVudCBoYW5kbGVyIHRoYXQgaW52b2tlcyB0aGUg
        bGluaywgYWN0aXZhdGluZyB0aGUgYXNzb2NpYXRlZCByb3V0ZS4KCiAgICAg
        IEBwcml2YXRlCiAgICAgIEBtZXRob2QgX2ludm9rZQogICAgICBAcGFyYW0g
        e0V2ZW50fSBldmVudAogICAgKi8KICAgIF9pbnZva2U6IGZ1bmN0aW9uKGV2
        ZW50KSB7CiAgICAgIGlmICghaXNTaW1wbGVDbGljayhldmVudCkpIHsgcmV0
        dXJuIHRydWU7IH0KCiAgICAgIGlmICh0aGlzLnByZXZlbnREZWZhdWx0ICE9
        PSBmYWxzZSkgeyBldmVudC5wcmV2ZW50RGVmYXVsdCgpOyB9CiAgICAgIGlm
        ICh0aGlzLmJ1YmJsZXMgPT09IGZhbHNlKSB7IGV2ZW50LnN0b3BQcm9wYWdh
        dGlvbigpOyB9CgogICAgICBpZiAoZ2V0KHRoaXMsICdfaXNEaXNhYmxlZCcp
        KSB7IHJldHVybiBmYWxzZTsgfQoKICAgICAgaWYgKGdldCh0aGlzLCAnbG9h
        ZGluZycpKSB7CiAgICAgICAgRW1iZXIuTG9nZ2VyLndhcm4oIlRoaXMgbGlu
        ay10byBpcyBpbiBhbiBpbmFjdGl2ZSBsb2FkaW5nIHN0YXRlIGJlY2F1c2Ug
        YXQgbGVhc3Qgb25lIG9mIGl0cyBwYXJhbWV0ZXJzIHByZXNlbnRseSBoYXMg
        YSBudWxsL3VuZGVmaW5lZCB2YWx1ZSwgb3IgdGhlIHByb3ZpZGVkIHJvdXRl
        IG5hbWUgaXMgaW52YWxpZC4iKTsKICAgICAgICByZXR1cm4gZmFsc2U7CiAg
        ICAgIH0KCiAgICAgIHZhciByb3V0ZXIgPSBnZXQodGhpcywgJ3JvdXRlcicp
        LAogICAgICAgICAgcm91dGVBcmdzID0gZ2V0KHRoaXMsICdyb3V0ZUFyZ3Mn
        KTsKCiAgICAgIGlmIChnZXQodGhpcywgJ3JlcGxhY2UnKSkgewogICAgICAg
        IHJvdXRlci5yZXBsYWNlV2l0aC5hcHBseShyb3V0ZXIsIHJvdXRlQXJncyk7
        CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcm91dGVyLnRyYW5zaXRpb25Uby5h
        cHBseShyb3V0ZXIsIHJvdXRlQXJncyk7CiAgICAgIH0KICAgIH0sCgogICAg
        LyoqCiAgICAgIENvbXB1dGVkIHByb3BlcnR5IHRoYXQgcmV0dXJucyBhbiBh
        cnJheSBvZiB0aGUKICAgICAgcmVzb2x2ZWQgcGFyYW1ldGVycyBwYXNzZWQg
        dG8gdGhlIGBsaW5rLXRvYCBoZWxwZXIsCiAgICAgIGUuZy46CgogICAgICBg
        YGBoYnMKICAgICAge3tsaW5rLXRvIGEgYiAnMTIzJyBjfX0KICAgICAgYGBg
        CgogICAgICB3aWxsIGdlbmVyYXRlIGEgYHJlc29sdmVkUGFyYW1zYCBvZjoK
        CiAgICAgIGBgYGpzCiAgICAgIFthT2JqZWN0LCBiT2JqZWN0LCAnMTIzJywg
        Y09iamVjdF0KICAgICAgYGBgCgogICAgICBAcHJpdmF0ZQogICAgICBAcHJv
        cGVydHkKICAgICAgQHJldHVybiB7QXJyYXl9CiAgICAgKi8KICAgIHJlc29s
        dmVkUGFyYW1zOiBFbWJlci5jb21wdXRlZChmdW5jdGlvbigpIHsKICAgICAg
        dmFyIHBhcmFtZXRlcnMgPSB0aGlzLnBhcmFtZXRlcnMsCiAgICAgICAgICBv
        cHRpb25zID0gcGFyYW1ldGVycy5vcHRpb25zLAogICAgICAgICAgdHlwZXMg
        PSBvcHRpb25zLnR5cGVzLAogICAgICAgICAgZGF0YSA9IG9wdGlvbnMuZGF0
        YTsKCiAgICAgIGlmIChwYXJhbWV0ZXJzLnBhcmFtcy5sZW5ndGggPT09IDAp
        IHsKICAgICAgICB2YXIgYXBwQ29udHJvbGxlciA9IHRoaXMuY29udGFpbmVy
        Lmxvb2t1cCgnY29udHJvbGxlcjphcHBsaWNhdGlvbicpOwogICAgICAgIHJl
        dHVybiBbZ2V0KGFwcENvbnRyb2xsZXIsICdjdXJyZW50Um91dGVOYW1lJyld
        OwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiByZXNvbHZlUGFyYW1z
        KHBhcmFtZXRlcnMuY29udGV4dCwgcGFyYW1ldGVycy5wYXJhbXMsIHsgdHlw
        ZXM6IHR5cGVzLCBkYXRhOiBkYXRhIH0pOwogICAgICB9CgogICAgICAvLyBP
        cmlnaW5hbCBpbXBsZW1lbnRhdGlvbiBpZiBxdWVyeSBwYXJhbXMgbm90IGVu
        YWJsZWQKICAgICAgcmV0dXJuIHJlc29sdmVQYXJhbXMocGFyYW1ldGVycy5j
        b250ZXh0LCBwYXJhbWV0ZXJzLnBhcmFtcywgeyB0eXBlczogdHlwZXMsIGRh
        dGE6IGRhdGEgfSk7CiAgICB9KS5wcm9wZXJ0eSgncm91dGVyLnVybCcpLAoK
        ICAgIC8qKgogICAgICBDb21wdXRlZCBwcm9wZXJ0eSB0aGF0IHJldHVybnMg
        dGhlIGN1cnJlbnQgcm91dGUgbmFtZSBhbmQKICAgICAgYW55IGR5bmFtaWMg
        c2VnbWVudHMuCgogICAgICBAcHJpdmF0ZQogICAgICBAcHJvcGVydHkKICAg
        ICAgQHJldHVybiB7QXJyYXl9IEFuIGFycmF5IHdpdGggdGhlIHJvdXRlIG5h
        bWUgYW5kIGFueSBkeW5hbWljIHNlZ21lbnRzCiAgICAgKi8KICAgIHJvdXRl
        QXJnczogRW1iZXIuY29tcHV0ZWQoZnVuY3Rpb24gY29tcHV0ZUxpbmtWaWV3
        Um91dGVBcmdzKCkgewogICAgICB2YXIgcmVzb2x2ZWRQYXJhbXMgPSBnZXQo
        dGhpcywgJ3Jlc29sdmVkUGFyYW1zJykuc2xpY2UoMCksCiAgICAgICAgICBy
        b3V0ZXIgPSBnZXQodGhpcywgJ3JvdXRlcicpLAogICAgICAgICAgbmFtZWRS
        b3V0ZSA9IHJlc29sdmVkUGFyYW1zWzBdOwoKICAgICAgaWYgKCFuYW1lZFJv
        dXRlKSB7IHJldHVybjsgfQoKICAgICAgbmFtZWRSb3V0ZSA9IGZ1bGxSb3V0
        ZU5hbWUocm91dGVyLCBuYW1lZFJvdXRlKTsKICAgICAgcmVzb2x2ZWRQYXJh
        bXNbMF0gPSBuYW1lZFJvdXRlOwoKICAgICAgZm9yICh2YXIgaSA9IDEsIGxl
        biA9IHJlc29sdmVkUGFyYW1zLmxlbmd0aDsgaSA8IGxlbjsgKytpKSB7CiAg
        ICAgICAgdmFyIHBhcmFtID0gcmVzb2x2ZWRQYXJhbXNbaV07CiAgICAgICAg
        aWYgKHBhcmFtID09PSBudWxsIHx8IHR5cGVvZiBwYXJhbSA9PT0gJ3VuZGVm
        aW5lZCcpIHsKICAgICAgICAgIC8vIElmIGNvbnRleHRzIGFyZW4ndCBwcmVz
        ZW50LCBjb25zaWRlciB0aGUgbGlua1ZpZXcgdW5sb2FkZWQuCiAgICAgICAg
        ICByZXR1cm47CiAgICAgICAgfQogICAgICB9CgogICAgICAKICAgICAgcmV0
        dXJuIHJlc29sdmVkUGFyYW1zOwogICAgfSkucHJvcGVydHkoJ3Jlc29sdmVk
        UGFyYW1zJywgJ3F1ZXJ5UGFyYW1zJyksCgogICAgcXVlcnlQYXJhbXNPYmpl
        Y3Q6IG51bGwsCiAgICBxdWVyeVBhcmFtczogRW1iZXIuY29tcHV0ZWQoZnVu
        Y3Rpb24gY29tcHV0ZUxpbmtWaWV3UXVlcnlQYXJhbXMoKSB7CgogICAgICB2
        YXIgcXVlcnlQYXJhbXNPYmplY3QgPSBnZXQodGhpcywgJ3F1ZXJ5UGFyYW1z
        T2JqZWN0JyksCiAgICAgICAgICBzdXBwbGllZFBhcmFtcyA9IHt9OwoKICAg
        ICAgaWYgKHF1ZXJ5UGFyYW1zT2JqZWN0KSB7CiAgICAgICAgRW1iZXIubWVy
        Z2Uoc3VwcGxpZWRQYXJhbXMsIHF1ZXJ5UGFyYW1zT2JqZWN0LnZhbHVlcyk7
        CiAgICAgIH0KCiAgICAgIHZhciByZXNvbHZlZFBhcmFtcyA9IGdldCh0aGlz
        LCAncmVzb2x2ZWRQYXJhbXMnKSwKICAgICAgICAgIHJvdXRlciA9IGdldCh0
        aGlzLCAncm91dGVyJyksCiAgICAgICAgICByb3V0ZU5hbWUgPSByZXNvbHZl
        ZFBhcmFtc1swXSwKICAgICAgICAgIHBhcmFtc0ZvclJvdXRlID0gcm91dGVy
        Ll9xdWVyeVBhcmFtTmFtZXNGb3Iocm91dGVOYW1lKSwKICAgICAgICAgIHF1
        ZXJ5UGFyYW1zID0gcGFyYW1zRm9yUm91dGUucXVlcnlQYXJhbXMsCiAgICAg
        ICAgICB0cmFuc2xhdGlvbnMgPSBwYXJhbXNGb3JSb3V0ZS50cmFuc2xhdGlv
        bnMsCiAgICAgICAgICBwYXJhbXNGb3JSZWNvZ25pemVyID0ge307CgogICAg
        ICAvLyBOb3JtYWxpemUgc3VwcGxpZWQgcGFyYW1zIGludG8gdGhlaXIgbG9u
        Zy1mb3JtIG5hbWUKICAgICAgLy8gZS5nLiAnZm9vJyAtPiAnY29udHJvbGxl
        cm5hbWU6Zm9vJwogICAgICB0cmFuc2xhdGVRdWVyeVBhcmFtcyhzdXBwbGll
        ZFBhcmFtcywgdHJhbnNsYXRpb25zLCByb3V0ZU5hbWUpOwoKICAgICAgdmFy
        IGhlbHBlclBhcmFtZXRlcnMgPSB0aGlzLnBhcmFtZXRlcnM7CiAgICAgIHJv
        dXRlci5fcXVlcnlQYXJhbU92ZXJyaWRlcyhwYXJhbXNGb3JSZWNvZ25pemVy
        LCBxdWVyeVBhcmFtcywgZnVuY3Rpb24obmFtZSwgcmVzdWx0c05hbWUpIHsK
        ICAgICAgICBpZiAoIShuYW1lIGluIHN1cHBsaWVkUGFyYW1zKSkgeyByZXR1
        cm47IH0KCiAgICAgICAgdmFyIHBhcnRzID0gbmFtZS5zcGxpdCgnOicpOwoK
        ICAgICAgICB2YXIgdHlwZSA9IHF1ZXJ5UGFyYW1zT2JqZWN0LnR5cGVzW3Bh
        cnRzWzFdXTsKCiAgICAgICAgdmFyIHZhbHVlOwogICAgICAgIGlmICh0eXBl
        ID09PSAnSUQnKSB7CiAgICAgICAgICB2YXIgbm9ybWFsaXplZFBhdGggPSBF
        bWJlci5IYW5kbGViYXJzLm5vcm1hbGl6ZVBhdGgoaGVscGVyUGFyYW1ldGVy
        cy5jb250ZXh0LCBzdXBwbGllZFBhcmFtc1tuYW1lXSwgaGVscGVyUGFyYW1l
        dGVycy5vcHRpb25zLmRhdGEpOwogICAgICAgICAgdmFsdWUgPSBFbWJlci5I
        YW5kbGViYXJzLmdldChub3JtYWxpemVkUGF0aC5yb290LCBub3JtYWxpemVk
        UGF0aC5wYXRoLCBoZWxwZXJQYXJhbWV0ZXJzLm9wdGlvbnMpOwogICAgICAg
        IH0gZWxzZSB7CiAgICAgICAgICB2YWx1ZSA9IHN1cHBsaWVkUGFyYW1zW25h
        bWVdOwogICAgICAgIH0KCiAgICAgICAgZGVsZXRlIHN1cHBsaWVkUGFyYW1z
        W25hbWVdOwoKICAgICAgICBwYXJhbXNGb3JSZWNvZ25pemVyW3Jlc3VsdHNO
        YW1lXSA9IHZhbHVlOwogICAgICB9KTsKCiAgICAgIHJldHVybiBwYXJhbXNG
        b3JSZWNvZ25pemVyOwogICAgfSkucHJvcGVydHkoJ3Jlc29sdmVkUGFyYW1z
        LltdJyksCgogICAgLyoqCiAgICAgIFNldHMgdGhlIGVsZW1lbnQncyBgaHJl
        ZmAgYXR0cmlidXRlIHRvIHRoZSB1cmwgZm9yCiAgICAgIHRoZSBgTGlua1Zp
        ZXdgJ3MgdGFyZ2V0ZWQgcm91dGUuCgogICAgICBJZiB0aGUgYExpbmtWaWV3
        YCdzIGB0YWdOYW1lYCBpcyBjaGFuZ2VkIHRvIGEgdmFsdWUgb3RoZXIKICAg
        ICAgdGhhbiBgYWAsIHRoaXMgcHJvcGVydHkgd2lsbCBiZSBpZ25vcmVkLgoK
        ICAgICAgQHByb3BlcnR5IGhyZWYKICAgICoqLwogICAgaHJlZjogRW1iZXIu
        Y29tcHV0ZWQoZnVuY3Rpb24gY29tcHV0ZUxpbmtWaWV3SHJlZigpIHsKICAg
        ICAgaWYgKGdldCh0aGlzLCAndGFnTmFtZScpICE9PSAnYScpIHsgcmV0dXJu
        OyB9CgogICAgICB2YXIgcm91dGVyID0gZ2V0KHRoaXMsICdyb3V0ZXInKSwK
        ICAgICAgICAgIHJvdXRlQXJncyA9IGdldCh0aGlzLCAncm91dGVBcmdzJyk7
        CgogICAgICByZXR1cm4gcm91dGVBcmdzID8gcm91dGVyLmdlbmVyYXRlLmFw
        cGx5KHJvdXRlciwgcm91dGVBcmdzKSA6IGdldCh0aGlzLCAnbG9hZGluZ0hy
        ZWYnKTsKICAgIH0pLnByb3BlcnR5KCdyb3V0ZUFyZ3MnKSwKCiAgICAvKioK
        ICAgICAgVGhlIGRlZmF1bHQgaHJlZiB2YWx1ZSB0byB1c2Ugd2hpbGUgYSBs
        aW5rLXRvIGlzIGxvYWRpbmcuCiAgICAgIE9ubHkgYXBwbGllcyB3aGVuIHRh
        Z05hbWUgaXMgJ2EnCgogICAgICBAcHJvcGVydHkgbG9hZGluZ0hyZWYKICAg
        ICAgQHR5cGUgU3RyaW5nCiAgICAgIEBkZWZhdWx0ICMKICAgICovCiAgICBs
        b2FkaW5nSHJlZjogJyMnCiAgfSk7CgogIExpbmtWaWV3LnRvU3RyaW5nID0g
        ZnVuY3Rpb24oKSB7IHJldHVybiAiTGlua1ZpZXciOyB9OwoKICAvKioKICAg
        IFRoZSBge3tsaW5rLXRvfX1gIGhlbHBlciByZW5kZXJzIGEgbGluayB0byB0
        aGUgc3VwcGxpZWQKICAgIGByb3V0ZU5hbWVgIHBhc3NpbmcgYW4gb3B0aW9u
        YWxseSBzdXBwbGllZCBtb2RlbCB0byB0aGUKICAgIHJvdXRlIGFzIGl0cyBg
        bW9kZWxgIGNvbnRleHQgb2YgdGhlIHJvdXRlLiBUaGUgYmxvY2sKICAgIGZv
        ciBge3tsaW5rLXRvfX1gIGJlY29tZXMgdGhlIGlubmVySFRNTCBvZiB0aGUg
        cmVuZGVyZWQKICAgIGVsZW1lbnQ6CgogICAgYGBgaGFuZGxlYmFycwogICAg
        e3sjbGluay10byAncGhvdG9HYWxsZXJ5J319CiAgICAgIEdyZWF0IEhhbXN0
        ZXIgUGhvdG9zCiAgICB7ey9saW5rLXRvfX0KICAgIGBgYAoKICAgIGBgYGh0
        bWwKICAgIDxhIGhyZWY9Ii9oYW1zdGVyLXBob3RvcyI+CiAgICAgIEdyZWF0
        IEhhbXN0ZXIgUGhvdG9zCiAgICA8L2E+CiAgICBgYGAKCiAgICAjIyMgU3Vw
        cGx5aW5nIGEgdGFnTmFtZQogICAgQnkgZGVmYXVsdCBge3tsaW5rLXRvfX1g
        IHJlbmRlcnMgYW4gYDxhPmAgZWxlbWVudC4gVGhpcyBjYW4KICAgIGJlIG92
        ZXJyaWRkZW4gZm9yIGEgc2luZ2xlIHVzZSBvZiBge3tsaW5rLXRvfX1gIGJ5
        IHN1cHBseWluZwogICAgYSBgdGFnTmFtZWAgb3B0aW9uOgoKICAgIGBgYGhh
        bmRsZWJhcnMKICAgIHt7I2xpbmstdG8gJ3Bob3RvR2FsbGVyeScgdGFnTmFt
        ZT0ibGkifX0KICAgICAgR3JlYXQgSGFtc3RlciBQaG90b3MKICAgIHt7L2xp
        bmstdG99fQogICAgYGBgCgogICAgYGBgaHRtbAogICAgPGxpPgogICAgICBH
        cmVhdCBIYW1zdGVyIFBob3RvcwogICAgPC9saT4KICAgIGBgYAoKICAgIFRv
        IG92ZXJyaWRlIHRoaXMgb3B0aW9uIGZvciB5b3VyIGVudGlyZSBhcHBsaWNh
        dGlvbiwgc2VlCiAgICAiT3ZlcnJpZGluZyBBcHBsaWNhdGlvbi13aWRlIERl
        ZmF1bHRzIi4KCiAgICAjIyMgRGlzYWJsaW5nIHRoZSBgbGluay10b2AgaGVs
        cGVyCiAgICBCeSBkZWZhdWx0IGB7e2xpbmstdG99fWAgaXMgZW5hYmxlZC4K
        ICAgIGFueSBwYXNzZWQgdmFsdWUgdG8gYGRpc2FibGVkYCBoZWxwZXIgcHJv
        cGVydHkgd2lsbCBkaXNhYmxlIHRoZSBgbGluay10b2AgaGVscGVyLgoKICAg
        IHN0YXRpYyB1c2U6IHRoZSBgZGlzYWJsZWRgIG9wdGlvbjoKCiAgICBgYGBo
        YW5kbGViYXJzCiAgICB7eyNsaW5rLXRvICdwaG90b0dhbGxlcnknIGRpc2Fi
        bGVkPXRydWV9fQogICAgICBHcmVhdCBIYW1zdGVyIFBob3RvcwogICAge3sv
        bGluay10b319CiAgICBgYGAKCiAgICBkeW5hbWljIHVzZTogdGhlIGBkaXNh
        YmxlZFdoZW5gIG9wdGlvbjoKCiAgICBgYGBoYW5kbGViYXJzCiAgICB7eyNs
        aW5rLXRvICdwaG90b0dhbGxlcnknIGRpc2FibGVkV2hlbj1jb250cm9sbGVy
        LnNvbWVQcm9wZXJ0eX19CiAgICAgIEdyZWF0IEhhbXN0ZXIgUGhvdG9zCiAg
        ICB7ey9saW5rLXRvfX0KICAgIGBgYAoKICAgIGFueSBwYXNzZWQgdmFsdWUg
        dG8gYGRpc2FibGVkYCB3aWxsIGRpc2FibGUgaXQgZXhjZXB0IGB1bmRlZmlu
        ZWRgLgogICAgdG8gZW5zdXJlIHRoYXQgb25seSBgdHJ1ZWAgZGlzYWJsZSB0
        aGUgYGxpbmstdG9gIGhlbHBlciB5b3UgY2FuCiAgICBvdmVycmlkZSB0aGUg
        Z2xvYmFsIGJlaGF2aW91ciBvZiBgRW1iZXIuTGlua1ZpZXdgLgoKICAgIGBg
        YGphdmFzY3JpcHQKICAgIEVtYmVyLkxpbmtWaWV3LnJlb3Blbih7CiAgICAg
        IGRpc2FibGVkOiBFbWJlci5jb21wdXRlZChmdW5jdGlvbihrZXksIHZhbHVl
        KSB7CiAgICAgICAgaWYgKHZhbHVlICE9PSB1bmRlZmluZWQpIHsKICAgICAg
        ICAgIHRoaXMuc2V0KCdfaXNEaXNhYmxlZCcsIHZhbHVlID09PSB0cnVlKTsK
        ICAgICAgICB9CiAgICAgICAgcmV0dXJuIHZhbHVlID09PSB0cnVlID8gZ2V0
        KHRoaXMsICdkaXNhYmxlZENsYXNzJykgOiBmYWxzZTsKICAgICAgfSkKICAg
        IH0pOwogICAgYGBgCgogICAgc2VlICJPdmVycmlkaW5nIEFwcGxpY2F0aW9u
        LXdpZGUgRGVmYXVsdHMiIGZvciBtb3JlLgoKICAgICMjIyBIYW5kbGluZyBg
        aHJlZmAKICAgIGB7e2xpbmstdG99fWAgd2lsbCB1c2UgeW91ciBhcHBsaWNh
        dGlvbidzIFJvdXRlciB0bwogICAgZmlsbCB0aGUgZWxlbWVudCdzIGBocmVm
        YCBwcm9wZXJ0eSB3aXRoIGEgdXJsIHRoYXQKICAgIG1hdGNoZXMgdGhlIHBh
        dGggdG8gdGhlIHN1cHBsaWVkIGByb3V0ZU5hbWVgIGZvciB5b3VyCiAgICBy
        b3V0ZXJzJ3MgY29uZmlndXJlZCBgTG9jYXRpb25gIHNjaGVtZSwgd2hpY2gg
        ZGVmYXVsdHMKICAgIHRvIEVtYmVyLkhhc2hMb2NhdGlvbi4KCiAgICAjIyMg
        SGFuZGxpbmcgY3VycmVudCByb3V0ZQogICAgYHt7bGluay10b319YCB3aWxs
        IGFwcGx5IGEgQ1NTIGNsYXNzIG5hbWUgb2YgJ2FjdGl2ZScKICAgIHdoZW4g
        dGhlIGFwcGxpY2F0aW9uJ3MgY3VycmVudCByb3V0ZSBtYXRjaGVzCiAgICB0
        aGUgc3VwcGxpZWQgcm91dGVOYW1lLiBGb3IgZXhhbXBsZSwgaWYgdGhlIGFw
        cGxpY2F0aW9uJ3MKICAgIGN1cnJlbnQgcm91dGUgaXMgJ3Bob3RvR2FsbGVy
        eS5yZWNlbnQnIHRoZSBmb2xsb3dpbmcKICAgIHVzZSBvZiBge3tsaW5rLXRv
        fX1gOgoKICAgIGBgYGhhbmRsZWJhcnMKICAgIHt7I2xpbmstdG8gJ3Bob3Rv
        R2FsbGVyeS5yZWNlbnQnfX0KICAgICAgR3JlYXQgSGFtc3RlciBQaG90b3Mg
        ZnJvbSB0aGUgbGFzdCB3ZWVrCiAgICB7ey9saW5rLXRvfX0KICAgIGBgYAoK
        ICAgIHdpbGwgcmVzdWx0IGluCgogICAgYGBgaHRtbAogICAgPGEgaHJlZj0i
        L2hhbXN0ZXItcGhvdG9zL3RoaXMtd2VlayIgY2xhc3M9ImFjdGl2ZSI+CiAg
        ICAgIEdyZWF0IEhhbXN0ZXIgUGhvdG9zCiAgICA8L2E+CiAgICBgYGAKCiAg
        ICBUaGUgQ1NTIGNsYXNzIG5hbWUgdXNlZCBmb3IgYWN0aXZlIGNsYXNzZXMg
        Y2FuIGJlIGN1c3RvbWl6ZWQKICAgIGZvciBhIHNpbmdsZSB1c2Ugb2YgYHt7
        bGluay10b319YCBieSBwYXNzaW5nIGFuIGBhY3RpdmVDbGFzc2AKICAgIG9w
        dGlvbjoKCiAgICBgYGBoYW5kbGViYXJzCiAgICB7eyNsaW5rLXRvICdwaG90
        b0dhbGxlcnkucmVjZW50JyBhY3RpdmVDbGFzcz0iY3VycmVudC11cmwifX0K
        ICAgICAgR3JlYXQgSGFtc3RlciBQaG90b3MgZnJvbSB0aGUgbGFzdCB3ZWVr
        CiAgICB7ey9saW5rLXRvfX0KICAgIGBgYAoKICAgIGBgYGh0bWwKICAgIDxh
        IGhyZWY9Ii9oYW1zdGVyLXBob3Rvcy90aGlzLXdlZWsiIGNsYXNzPSJjdXJy
        ZW50LXVybCI+CiAgICAgIEdyZWF0IEhhbXN0ZXIgUGhvdG9zCiAgICA8L2E+
        CiAgICBgYGAKCiAgICBUbyBvdmVycmlkZSB0aGlzIG9wdGlvbiBmb3IgeW91
        ciBlbnRpcmUgYXBwbGljYXRpb24sIHNlZQogICAgIk92ZXJyaWRpbmcgQXBw
        bGljYXRpb24td2lkZSBEZWZhdWx0cyIuCgogICAgIyMjIFN1cHBseWluZyBh
        IG1vZGVsCiAgICBBbiBvcHRpb25hbCBtb2RlbCBhcmd1bWVudCBjYW4gYmUg
        dXNlZCBmb3Igcm91dGVzIHdob3NlCiAgICBwYXRocyBjb250YWluIGR5bmFt
        aWMgc2VnbWVudHMuIFRoaXMgYXJndW1lbnQgd2lsbCBiZWNvbWUKICAgIHRo
        ZSBtb2RlbCBjb250ZXh0IG9mIHRoZSBsaW5rZWQgcm91dGU6CgogICAgYGBg
        amF2YXNjcmlwdAogICAgQXBwLlJvdXRlci5tYXAoZnVuY3Rpb24oKSB7CiAg
        ICAgIHRoaXMucmVzb3VyY2UoInBob3RvR2FsbGVyeSIsIHtwYXRoOiAiaGFt
        c3Rlci1waG90b3MvOnBob3RvX2lkIn0pOwogICAgfSk7CiAgICBgYGAKCiAg
        ICBgYGBoYW5kbGViYXJzCiAgICB7eyNsaW5rLXRvICdwaG90b0dhbGxlcnkn
        IGFQaG90b319CiAgICAgIHt7YVBob3RvLnRpdGxlfX0KICAgIHt7L2xpbmst
        dG99fQogICAgYGBgCgogICAgYGBgaHRtbAogICAgPGEgaHJlZj0iL2hhbXN0
        ZXItcGhvdG9zLzQyIj4KICAgICAgVG9tc3RlcgogICAgPC9hPgogICAgYGBg
        CgogICAgIyMjIFN1cHBseWluZyBtdWx0aXBsZSBtb2RlbHMKICAgIEZvciBk
        ZWVwLWxpbmtpbmcgdG8gcm91dGUgcGF0aHMgdGhhdCBjb250YWluIG11bHRp
        cGxlCiAgICBkeW5hbWljIHNlZ21lbnRzLCBtdWx0aXBsZSBtb2RlbCBhcmd1
        bWVudHMgY2FuIGJlIHVzZWQuCiAgICBBcyB0aGUgcm91dGVyIHRyYW5zaXRp
        b25zIHRocm91Z2ggdGhlIHJvdXRlIHBhdGgsIGVhY2gKICAgIHN1cHBsaWVk
        IG1vZGVsIGFyZ3VtZW50IHdpbGwgYmVjb21lIHRoZSBjb250ZXh0IGZvciB0
        aGUKICAgIHJvdXRlIHdpdGggdGhlIGR5bmFtaWMgc2VnbWVudHM6CgogICAg
        YGBgamF2YXNjcmlwdAogICAgQXBwLlJvdXRlci5tYXAoZnVuY3Rpb24oKSB7
        CiAgICAgIHRoaXMucmVzb3VyY2UoInBob3RvR2FsbGVyeSIsIHtwYXRoOiAi
        aGFtc3Rlci1waG90b3MvOnBob3RvX2lkIn0sIGZ1bmN0aW9uKCkgewogICAg
        ICAgIHRoaXMucm91dGUoImNvbW1lbnQiLCB7cGF0aDogImNvbW1lbnRzLzpj
        b21tZW50X2lkIn0pOwogICAgICB9KTsKICAgIH0pOwogICAgYGBgCiAgICBU
        aGlzIGFyZ3VtZW50IHdpbGwgYmVjb21lIHRoZSBtb2RlbCBjb250ZXh0IG9m
        IHRoZSBsaW5rZWQgcm91dGU6CgogICAgYGBgaGFuZGxlYmFycwogICAge3sj
        bGluay10byAncGhvdG9HYWxsZXJ5LmNvbW1lbnQnIGFQaG90byBjb21tZW50
        fX0KICAgICAge3tjb21tZW50LmJvZHl9fQogICAge3svbGluay10b319CiAg
        ICBgYGAKCiAgICBgYGBodG1sCiAgICA8YSBocmVmPSIvaGFtc3Rlci1waG90
        b3MvNDIvY29tbWVudC83MTgiPgogICAgICBBKysrIHdvdWxkIHNudWdnbGUg
        YWdhaW4uCiAgICA8L2E+CiAgICBgYGAKCiAgICAjIyMgU3VwcGx5aW5nIGFu
        IGV4cGxpY2l0IGR5bmFtaWMgc2VnbWVudCB2YWx1ZQogICAgSWYgeW91IGRv
        bid0IGhhdmUgYSBtb2RlbCBvYmplY3QgYXZhaWxhYmxlIHRvIHBhc3MgdG8g
        YHt7bGluay10b319YCwKICAgIGFuIG9wdGlvbmFsIHN0cmluZyBvciBpbnRl
        Z2VyIGFyZ3VtZW50IGNhbiBiZSBwYXNzZWQgZm9yIHJvdXRlcyB3aG9zZQog
        ICAgcGF0aHMgY29udGFpbiBkeW5hbWljIHNlZ21lbnRzLiBUaGlzIGFyZ3Vt
        ZW50IHdpbGwgYmVjb21lIHRoZSB2YWx1ZQogICAgb2YgdGhlIGR5bmFtaWMg
        c2VnbWVudDoKCiAgICBgYGBqYXZhc2NyaXB0CiAgICBBcHAuUm91dGVyLm1h
        cChmdW5jdGlvbigpIHsKICAgICAgdGhpcy5yZXNvdXJjZSgicGhvdG9HYWxs
        ZXJ5Iiwge3BhdGg6ICJoYW1zdGVyLXBob3Rvcy86cGhvdG9faWQifSk7CiAg
        ICB9KTsKICAgIGBgYAoKICAgIGBgYGhhbmRsZWJhcnMKICAgIHt7I2xpbmst
        dG8gJ3Bob3RvR2FsbGVyeScgYVBob3RvSWR9fQogICAgICB7e2FQaG90by50
        aXRsZX19CiAgICB7ey9saW5rLXRvfX0KICAgIGBgYAoKICAgIGBgYGh0bWwK
        ICAgIDxhIGhyZWY9Ii9oYW1zdGVyLXBob3Rvcy80MiI+CiAgICAgIFRvbXN0
        ZXIKICAgIDwvYT4KICAgIGBgYAoKICAgIFdoZW4gdHJhbnNpdGlvbmluZyBp
        bnRvIHRoZSBsaW5rZWQgcm91dGUsIHRoZSBgbW9kZWxgIGhvb2sgd2lsbAog
        ICAgYmUgdHJpZ2dlcmVkIHdpdGggcGFyYW1ldGVycyBpbmNsdWRpbmcgdGhp
        cyBwYXNzZWQgaWRlbnRpZmllci4KCiAgICAjIyMgQWxsb3dpbmcgRGVmYXVs
        dCBBY3Rpb24KCiAgIEJ5IGRlZmF1bHQgdGhlIGB7e2xpbmstdG99fWAgaGVs
        cGVyIHByZXZlbnRzIHRoZSBkZWZhdWx0IGJyb3dzZXIgYWN0aW9uCiAgIGJ5
        IGNhbGxpbmcgYHByZXZlbnREZWZhdWx0KClgIGFzIHRoaXMgc29ydCBvZiBh
        Y3Rpb24gYnViYmxpbmcgaXMgbm9ybWFsbHkKICAgaGFuZGxlZCBpbnRlcm5h
        bGx5IGFuZCB3ZSBkbyBub3Qgd2FudCB0byB0YWtlIHRoZSBicm93c2VyIHRv
        IGEgbmV3IFVSTCAoZm9yCiAgIGV4YW1wbGUpLgoKICAgSWYgeW91IG5lZWQg
        dG8gb3ZlcnJpZGUgdGhpcyBiZWhhdmlvciBzcGVjaWZ5IGBwcmV2ZW50RGVm
        YXVsdD1mYWxzZWAgaW4KICAgeW91ciB0ZW1wbGF0ZToKCiAgICBgYGBoYW5k
        bGViYXJzCiAgICB7eyNsaW5rLXRvICdwaG90b0dhbGxlcnknIGFQaG90b0lk
        IHByZXZlbnREZWZhdWx0PWZhbHNlfX0KICAgICAge3thUGhvdG9JZC50aXRs
        ZX19CiAgICB7ey9saW5rLXRvfX0KICAgIGBgYAoKICAgICMjIyBPdmVycmlk
        aW5nIGF0dHJpYnV0ZXMKICAgIFlvdSBjYW4gb3ZlcnJpZGUgYW55IGdpdmVu
        IHByb3BlcnR5IG9mIHRoZSBFbWJlci5MaW5rVmlldwogICAgdGhhdCBpcyBn
        ZW5lcmF0ZWQgYnkgdGhlIGB7e2xpbmstdG99fWAgaGVscGVyIGJ5IHBhc3Np
        bmcKICAgIGtleS92YWx1ZSBwYWlycywgbGlrZSBzbzoKCiAgICBgYGBoYW5k
        bGViYXJzCiAgICB7eyNsaW5rLXRvICBhUGhvdG8gdGFnTmFtZT0nbGknIHRp
        dGxlPSdGb2xsb3dpbmcgdGhpcyBsaW5rIHdpbGwgY2hhbmdlIHlvdXIgbGlm
        ZScgY2xhc3NOYW1lcz0ncGljIHN3ZWV0J319CiAgICAgIFVoLW1hemluZyEK
        ICAgIHt7L2xpbmstdG99fQogICAgYGBgCgogICAgU2VlIFtFbWJlci5MaW5r
        Vmlld10oL2FwaS9jbGFzc2VzL0VtYmVyLkxpbmtWaWV3Lmh0bWwpIGZvciBh
        CiAgICBjb21wbGV0ZSBsaXN0IG9mIG92ZXJyaWRlYWJsZSBwcm9wZXJ0aWVz
        LiBCZSBzdXJlIHRvIGFsc28KICAgIGNoZWNrIG91dCBpbmhlcml0ZWQgcHJv
        cGVydGllcyBvZiBgTGlua1ZpZXdgLgoKICAgICMjIyBPdmVycmlkaW5nIEFw
        cGxpY2F0aW9uLXdpZGUgRGVmYXVsdHMKICAgIGBge3tsaW5rLXRvfX1gYCBj
        cmVhdGVzIGFuIGluc3RhbmNlIG9mIEVtYmVyLkxpbmtWaWV3CiAgICBmb3Ig
        cmVuZGVyaW5nLiBUbyBvdmVycmlkZSBvcHRpb25zIGZvciB5b3VyIGVudGly
        ZQogICAgYXBwbGljYXRpb24sIHJlb3BlbiBFbWJlci5MaW5rVmlldyBhbmQg
        c3VwcGx5IHRoZQogICAgZGVzaXJlZCB2YWx1ZXM6CgogICAgYGBgIGphdmFz
        Y3JpcHQKICAgIEVtYmVyLkxpbmtWaWV3LnJlb3Blbih7CiAgICAgIGFjdGl2
        ZUNsYXNzOiAiaXMtYWN0aXZlIiwKICAgICAgdGFnTmFtZTogJ2xpJwogICAg
        fSkKICAgIGBgYAoKICAgIEl0IGlzIGFsc28gcG9zc2libGUgdG8gb3ZlcnJp
        ZGUgdGhlIGRlZmF1bHQgZXZlbnQgaW4KICAgIHRoaXMgbWFubmVyOgoKICAg
        IGBgYCBqYXZhc2NyaXB0CiAgICBFbWJlci5MaW5rVmlldy5yZW9wZW4oewog
        ICAgICBldmVudE5hbWU6ICdjdXN0b21FdmVudE5hbWUnCiAgICB9KTsKICAg
        IGBgYAoKICAgIEBtZXRob2QgbGluay10bwogICAgQGZvciBFbWJlci5IYW5k
        bGViYXJzLmhlbHBlcnMKICAgIEBwYXJhbSB7U3RyaW5nfSByb3V0ZU5hbWUK
        ICAgIEBwYXJhbSB7T2JqZWN0fSBbY29udGV4dF0qCiAgICBAcGFyYW0gW29w
        dGlvbnNdIHtPYmplY3R9IEhhbmRsZWJhcnMga2V5L3ZhbHVlIHBhaXJzIG9m
        IG9wdGlvbnMsIHlvdSBjYW4gb3ZlcnJpZGUgYW55IHByb3BlcnR5IG9mIEVt
        YmVyLkxpbmtWaWV3CiAgICBAcmV0dXJuIHtTdHJpbmd9IEhUTUwgc3RyaW5n
        CiAgICBAc2VlIHtFbWJlci5MaW5rVmlld30KICAqLwogIEVtYmVyLkhhbmRs
        ZWJhcnMucmVnaXN0ZXJIZWxwZXIoJ2xpbmstdG8nLCBmdW5jdGlvbiBsaW5r
        VG9IZWxwZXIobmFtZSkgewogICAgdmFyIG9wdGlvbnMgPSBzbGljZS5jYWxs
        KGFyZ3VtZW50cywgLTEpWzBdLAogICAgICAgIHBhcmFtcyA9IHNsaWNlLmNh
        bGwoYXJndW1lbnRzLCAwLCAtMSksCiAgICAgICAgaGFzaCA9IG9wdGlvbnMu
        aGFzaDsKCiAgICBpZiAocGFyYW1zW3BhcmFtcy5sZW5ndGggLSAxXSBpbnN0
        YW5jZW9mIFF1ZXJ5UGFyYW1zKSB7CiAgICAgIGhhc2gucXVlcnlQYXJhbXNP
        YmplY3QgPSBwYXJhbXMucG9wKCk7CiAgICB9CgogICAgaGFzaC5kaXNhYmxl
        ZEJpbmRpbmcgPSBoYXNoLmRpc2FibGVkV2hlbjsKCiAgICBpZiAoIW9wdGlv
        bnMuZm4pIHsKICAgICAgdmFyIGxpbmtUaXRsZSA9IHBhcmFtcy5zaGlmdCgp
        OwogICAgICB2YXIgbGlua1R5cGUgPSBvcHRpb25zLnR5cGVzLnNoaWZ0KCk7
        CiAgICAgIHZhciBjb250ZXh0ID0gdGhpczsKICAgICAgaWYgKGxpbmtUeXBl
        ID09PSAnSUQnKSB7CiAgICAgICAgb3B0aW9ucy5saW5rVGV4dFBhdGggPSBs
        aW5rVGl0bGU7CiAgICAgICAgb3B0aW9ucy5mbiA9IGZ1bmN0aW9uKCkgewog
        ICAgICAgICAgcmV0dXJuIEVtYmVyLkhhbmRsZWJhcnMuZ2V0RXNjYXBlZChj
        b250ZXh0LCBsaW5rVGl0bGUsIG9wdGlvbnMpOwogICAgICAgIH07CiAgICAg
        IH0gZWxzZSB7CiAgICAgICAgb3B0aW9ucy5mbiA9IGZ1bmN0aW9uKCkgewog
        ICAgICAgICAgcmV0dXJuIGxpbmtUaXRsZTsKICAgICAgICB9OwogICAgICB9
        CiAgICB9CgogICAgaGFzaC5wYXJhbWV0ZXJzID0gewogICAgICBjb250ZXh0
        OiB0aGlzLAogICAgICBvcHRpb25zOiBvcHRpb25zLAogICAgICBwYXJhbXM6
        IHBhcmFtcwogICAgfTsKCiAgICByZXR1cm4gRW1iZXIuSGFuZGxlYmFycy5o
        ZWxwZXJzLnZpZXcuY2FsbCh0aGlzLCBMaW5rVmlldywgb3B0aW9ucyk7CiAg
        fSk7CgoKICAKICAvKioKICAgIFNlZSBbbGluay10b10oL2FwaS9jbGFzc2Vz
        L0VtYmVyLkhhbmRsZWJhcnMuaGVscGVycy5odG1sI21ldGhvZF9saW5rLXRv
        KQoKICAgIEBtZXRob2QgbGlua1RvCiAgICBAZm9yIEVtYmVyLkhhbmRsZWJh
        cnMuaGVscGVycwogICAgQGRlcHJlY2F0ZWQKICAgIEBwYXJhbSB7U3RyaW5n
        fSByb3V0ZU5hbWUKICAgIEBwYXJhbSB7T2JqZWN0fSBbY29udGV4dF0qCiAg
        ICBAcmV0dXJuIHtTdHJpbmd9IEhUTUwgc3RyaW5nCiAgKi8KICBFbWJlci5I
        YW5kbGViYXJzLnJlZ2lzdGVySGVscGVyKCdsaW5rVG8nLCBmdW5jdGlvbiBs
        aW5rVG9IZWxwZXIoKSB7CiAgICBFbWJlci53YXJuKCJUaGUgJ2xpbmtUbycg
        dmlldyBoZWxwZXIgaXMgZGVwcmVjYXRlZCBpbiBmYXZvciBvZiAnbGluay10
        byciKTsKICAgIHJldHVybiBFbWJlci5IYW5kbGViYXJzLmhlbHBlcnNbJ2xp
        bmstdG8nXS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogIH0pOwp9KTsKCgoK
        fSkoKTsKCgoKKGZ1bmN0aW9uKCkgewovKioKQG1vZHVsZSBlbWJlcgpAc3Vi
        bW9kdWxlIGVtYmVyLXJvdXRpbmcKKi8KCnZhciBnZXQgPSBFbWJlci5nZXQs
        IHNldCA9IEVtYmVyLnNldDsKRW1iZXIub25Mb2FkKCdFbWJlci5IYW5kbGVi
        YXJzJywgZnVuY3Rpb24oSGFuZGxlYmFycykgewogIC8qKgogIEBtb2R1bGUg
        ZW1iZXIKICBAc3VibW9kdWxlIGVtYmVyLXJvdXRpbmcKICAqLwoKICBIYW5k
        bGViYXJzLk91dGxldFZpZXcgPSBFbWJlci5Db250YWluZXJWaWV3LmV4dGVu
        ZChFbWJlci5fTWV0YW1vcnBoKTsKCiAgLyoqCiAgICBUaGUgYG91dGxldGAg
        aGVscGVyIGlzIGEgcGxhY2Vob2xkZXIgdGhhdCB0aGUgcm91dGVyIHdpbGwg
        ZmlsbCBpbiB3aXRoCiAgICB0aGUgYXBwcm9wcmlhdGUgdGVtcGxhdGUgYmFz
        ZWQgb24gdGhlIGN1cnJlbnQgc3RhdGUgb2YgdGhlIGFwcGxpY2F0aW9uLgoK
        ICAgIGBgYCBoYW5kbGViYXJzCiAgICB7e291dGxldH19CiAgICBgYGAKCiAg
        ICBCeSBkZWZhdWx0LCBhIHRlbXBsYXRlIGJhc2VkIG9uIEVtYmVyJ3MgbmFt
        aW5nIGNvbnZlbnRpb25zIHdpbGwgYmUgcmVuZGVyZWQKICAgIGludG8gdGhl
        IGBvdXRsZXRgIChlLmcuIGBBcHAuUG9zdHNSb3V0ZWAgd2lsbCByZW5kZXIg
        dGhlIGBwb3N0c2AgdGVtcGxhdGUpLgoKICAgIFlvdSBjYW4gcmVuZGVyIGEg
        ZGlmZmVyZW50IHRlbXBsYXRlIGJ5IHVzaW5nIHRoZSBgcmVuZGVyKClgIG1l
        dGhvZCBpbiB0aGUKICAgIHJvdXRlJ3MgYHJlbmRlclRlbXBsYXRlYCBob29r
        LiBUaGUgZm9sbG93aW5nIHdpbGwgcmVuZGVyIHRoZSBgZmF2b3JpdGVQb3N0
        YAogICAgdGVtcGxhdGUgaW50byB0aGUgYG91dGxldGAuCgogICAgYGBgIGph
        dmFzY3JpcHQKICAgIEFwcC5Qb3N0c1JvdXRlID0gRW1iZXIuUm91dGUuZXh0
        ZW5kKHsKICAgICAgcmVuZGVyVGVtcGxhdGU6IGZ1bmN0aW9uKCkgewogICAg
        ICAgIHRoaXMucmVuZGVyKCdmYXZvcml0ZVBvc3QnKTsKICAgICAgfQogICAg
        fSk7CiAgICBgYGAKCiAgICBZb3UgY2FuIGNyZWF0ZSBjdXN0b20gbmFtZWQg
        b3V0bGV0cyBmb3IgbW9yZSBjb250cm9sLgoKICAgIGBgYCBoYW5kbGViYXJz
        CiAgICB7e291dGxldCAnZmF2b3JpdGVQb3N0J319CiAgICB7e291dGxldCAn
        cG9zdHMnfX0KICAgIGBgYAoKICAgIFRoZW4geW91IGNhbiBkZWZpbmUgd2hh
        dCB0ZW1wbGF0ZSBpcyByZW5kZXJlZCBpbnRvIGVhY2ggb3V0bGV0IGluIHlv
        dXIKICAgIHJvdXRlLgoKCiAgICBgYGAgamF2YXNjcmlwdAogICAgQXBwLlBv
        c3RzUm91dGUgPSBFbWJlci5Sb3V0ZS5leHRlbmQoewogICAgICByZW5kZXJU
        ZW1wbGF0ZTogZnVuY3Rpb24oKSB7CiAgICAgICAgdGhpcy5yZW5kZXIoJ2Zh
        dm9yaXRlUG9zdCcsIHsgb3V0bGV0OiAnZmF2b3JpdGVQb3N0JyB9KTsKICAg
        ICAgICB0aGlzLnJlbmRlcigncG9zdHMnLCB7IG91dGxldDogJ3Bvc3RzJyB9
        KTsKICAgICAgfQogICAgfSk7CiAgICBgYGAKCiAgICBZb3UgY2FuIHNwZWNp
        ZnkgdGhlIHZpZXcgdGhhdCB0aGUgb3V0bGV0IHVzZXMgdG8gY29udGFpbiBh
        bmQgbWFuYWdlIHRoZQogICAgdGVtcGxhdGVzIHJlbmRlcmVkIGludG8gaXQu
        CgogICAgYGBgIGhhbmRsZWJhcnMKICAgIHt7b3V0bGV0IHZpZXc9J3NlY3Rp
        b25Db250YWluZXInfX0KICAgIGBgYAoKICAgIGBgYCBqYXZhc2NyaXB0CiAg
        ICBBcHAuU2VjdGlvbkNvbnRhaW5lciA9IEVtYmVyLkNvbnRhaW5lclZpZXcu
        ZXh0ZW5kKHsKICAgICAgdGFnTmFtZTogJ3NlY3Rpb24nLAogICAgICBjbGFz
        c05hbWVzOiBbJ3NwZWNpYWwnXQogICAgfSk7CiAgICBgYGAKCiAgICBAbWV0
        aG9kIG91dGxldAogICAgQGZvciBFbWJlci5IYW5kbGViYXJzLmhlbHBlcnMK
        ICAgIEBwYXJhbSB7U3RyaW5nfSBwcm9wZXJ0eSB0aGUgcHJvcGVydHkgb24g
        dGhlIGNvbnRyb2xsZXIKICAgICAgdGhhdCBob2xkcyB0aGUgdmlldyBmb3Ig
        dGhpcyBvdXRsZXQKICAgIEByZXR1cm4ge1N0cmluZ30gSFRNTCBzdHJpbmcK
        ICAqLwogIEhhbmRsZWJhcnMucmVnaXN0ZXJIZWxwZXIoJ291dGxldCcsIGZ1
        bmN0aW9uIG91dGxldEhlbHBlcihwcm9wZXJ0eSwgb3B0aW9ucykgewogICAK
        ICAgIHZhciBvdXRsZXRTb3VyY2UsCiAgICAgICAgY29udGFpbmVyLAogICAg
        ICAgIHZpZXdOYW1lLAogICAgICAgIHZpZXdDbGFzcywKICAgICAgICB2aWV3
        RnVsbE5hbWU7CgogICAgaWYgKHByb3BlcnR5ICYmIHByb3BlcnR5LmRhdGEg
        JiYgcHJvcGVydHkuZGF0YS5pc1JlbmRlckRhdGEpIHsKICAgICAgb3B0aW9u
        cyA9IHByb3BlcnR5OwogICAgICBwcm9wZXJ0eSA9ICdtYWluJzsKICAgIH0K
        CiAgICBjb250YWluZXIgPSBvcHRpb25zLmRhdGEudmlldy5jb250YWluZXI7
        CgogICAgb3V0bGV0U291cmNlID0gb3B0aW9ucy5kYXRhLnZpZXc7CiAgICB3
        aGlsZSAoIW91dGxldFNvdXJjZS5nZXQoJ3RlbXBsYXRlLmlzVG9wJykpIHsK
        ICAgICAgb3V0bGV0U291cmNlID0gb3V0bGV0U291cmNlLmdldCgnX3BhcmVu
        dFZpZXcnKTsKICAgIH0KCiAgICAvLyBwcm92aWRlIGNvbnRyb2xsZXIgb3Zl
        cnJpZGUKICAgIHZpZXdOYW1lID0gb3B0aW9ucy5oYXNoLnZpZXc7CgogICAg
        aWYgKHZpZXdOYW1lKSB7CiAgICAgIHZpZXdGdWxsTmFtZSA9ICd2aWV3Oicg
        KyB2aWV3TmFtZTsKICAgICAgRW1iZXIuYXNzZXJ0KCJVc2luZyBhIHF1b3Rl
        bGVzcyB2aWV3IHBhcmFtZXRlciB3aXRoIHt7b3V0bGV0fX0gaXMgbm90IHN1
        cHBvcnRlZC4gUGxlYXNlIHVwZGF0ZSB0byBxdW90ZWQgdXNhZ2UgJ3t7b3V0
        bGV0IFwiIiArIHZpZXdOYW1lICsgIlwifX0uIiwgb3B0aW9ucy5oYXNoVHlw
        ZXMudmlldyAhPT0gJ0lEJyk7CiAgICAgIEVtYmVyLmFzc2VydCgiVGhlIHZp
        ZXcgbmFtZSB5b3Ugc3VwcGxpZWQgJyIgKyB2aWV3TmFtZSArICInIGRpZCBu
        b3QgcmVzb2x2ZSB0byBhIHZpZXcuIiwgY29udGFpbmVyLmhhcyh2aWV3RnVs
        bE5hbWUpKTsKICAgIH0KCiAgICB2aWV3Q2xhc3MgPSB2aWV3TmFtZSA/IGNv
        bnRhaW5lci5sb29rdXBGYWN0b3J5KHZpZXdGdWxsTmFtZSkgOiBvcHRpb25z
        Lmhhc2gudmlld0NsYXNzIHx8IEhhbmRsZWJhcnMuT3V0bGV0VmlldzsKCiAg
        ICBvcHRpb25zLmRhdGEudmlldy5zZXQoJ291dGxldFNvdXJjZScsIG91dGxl
        dFNvdXJjZSk7CiAgICBvcHRpb25zLmhhc2guY3VycmVudFZpZXdCaW5kaW5n
        ID0gJ192aWV3Lm91dGxldFNvdXJjZS5fb3V0bGV0cy4nICsgcHJvcGVydHk7
        CgogICAgcmV0dXJuIEhhbmRsZWJhcnMuaGVscGVycy52aWV3LmNhbGwodGhp
        cywgdmlld0NsYXNzLCBvcHRpb25zKTsKICB9KTsKfSk7Cgp9KSgpOwoKCgoo
        ZnVuY3Rpb24oKSB7Ci8qKgpAbW9kdWxlIGVtYmVyCkBzdWJtb2R1bGUgZW1i
        ZXItcm91dGluZwoqLwoKdmFyIGdldCA9IEVtYmVyLmdldCwgc2V0ID0gRW1i
        ZXIuc2V0OwpFbWJlci5vbkxvYWQoJ0VtYmVyLkhhbmRsZWJhcnMnLCBmdW5j
        dGlvbihIYW5kbGViYXJzKSB7CgogIC8qKgogICAgQ2FsbGluZyBgYHt7cmVu
        ZGVyfX1gYCBmcm9tIHdpdGhpbiBhIHRlbXBsYXRlIHdpbGwgaW5zZXJ0IGFu
        b3RoZXIKICAgIHRlbXBsYXRlIHRoYXQgbWF0Y2hlcyB0aGUgcHJvdmlkZWQg
        bmFtZS4gVGhlIGluc2VydGVkIHRlbXBsYXRlIHdpbGwKICAgIGFjY2VzcyBp
        dHMgcHJvcGVydGllcyBvbiBpdHMgb3duIGNvbnRyb2xsZXIgKHJhdGhlciB0
        aGFuIHRoZSBjb250cm9sbGVyCiAgICBvZiB0aGUgcGFyZW50IHRlbXBsYXRl
        KS4KCiAgICBJZiBhIHZpZXcgY2xhc3Mgd2l0aCB0aGUgc2FtZSBuYW1lIGV4
        aXN0cywgdGhlIHZpZXcgY2xhc3MgYWxzbyB3aWxsIGJlIHVzZWQuCgogICAg
        Tm90ZTogQSBnaXZlbiBjb250cm9sbGVyIG1heSBvbmx5IGJlIHVzZWQgKm9u
        Y2UqIGluIHlvdXIgYXBwIGluIHRoaXMgbWFubmVyLgogICAgQSBzaW5nbGV0
        b24gaW5zdGFuY2Ugb2YgdGhlIGNvbnRyb2xsZXIgd2lsbCBiZSBjcmVhdGVk
        IGZvciB5b3UuCgogICAgRXhhbXBsZToKCiAgICBgYGBqYXZhc2NyaXB0CiAg
        ICBBcHAuTmF2aWdhdGlvbkNvbnRyb2xsZXIgPSBFbWJlci5Db250cm9sbGVy
        LmV4dGVuZCh7CiAgICAgIHdobzogIndvcmxkIgogICAgfSk7CiAgICBgYGAK
        CiAgICBgYGBoYW5kbGViYXJzCiAgICA8IS0tIG5hdmlnYXRpb24uaGJzIC0t
        PgogICAgSGVsbG8sIHt7d2hvfX0uCiAgICBgYGAKCiAgICBgYGBoYW5kZWxi
        YXJzCiAgICA8IS0tIGFwcGxpY2F0aW9uLmhicyAtLT4KICAgIDxoMT5NeSBn
        cmVhdCBhcHA8L2gxPgogICAge3tyZW5kZXIgIm5hdmlnYXRpb24ifX0KICAg
        IGBgYAoKICAgIGBgYGh0bWwKICAgIDxoMT5NeSBncmVhdCBhcHA8L2gxPgog
        ICAgPGRpdiBjbGFzcz0nZW1iZXItdmlldyc+CiAgICAgIEhlbGxvLCB3b3Js
        ZC4KICAgIDwvZGl2PgogICAgYGBgCgogICAgT3B0aW9uYWxseSB5b3UgbWF5
        IHByb3ZpZGUgYSBzZWNvbmQgYXJndW1lbnQ6IGEgcHJvcGVydHkgcGF0aAog
        ICAgdGhhdCB3aWxsIGJlIGJvdW5kIHRvIHRoZSBgbW9kZWxgIHByb3BlcnR5
        IG9mIHRoZSBjb250cm9sbGVyLgoKICAgIElmIGEgYG1vZGVsYCBwcm9wZXJ0
        eSBwYXRoIGlzIHNwZWNpZmllZCwgdGhlbiBhIG5ldyBpbnN0YW5jZSBvZiB0
        aGUKICAgIGNvbnRyb2xsZXIgd2lsbCBiZSBjcmVhdGVkIGFuZCBge3tyZW5k
        ZXJ9fWAgY2FuIGJlIHVzZWQgbXVsdGlwbGUgdGltZXMKICAgIHdpdGggdGhl
        IHNhbWUgbmFtZS4KCiAgIEZvciBleGFtcGxlIGlmIHlvdSBoYWQgdGhpcyBg
        YXV0aG9yYCB0ZW1wbGF0ZS4KCiAgIGBgYGhhbmRsZWJhcnMKPGRpdiBjbGFz
        cz0iYXV0aG9yIj4KICBXcml0dGVuIGJ5IHt7Zmlyc3ROYW1lfX0ge3tsYXN0
        TmFtZX19LgogIFRvdGFsIFBvc3RzOiB7e3Bvc3RDb3VudH19CjwvZGl2Pgog
        IGBgYAoKICBZb3UgY291bGQgcmVuZGVyIGl0IGluc2lkZSB0aGUgYHBvc3Rg
        IHRlbXBsYXRlIHVzaW5nIHRoZSBgcmVuZGVyYCBoZWxwZXIuCgogIGBgYGhh
        bmRsZWJhcnMKPGRpdiBjbGFzcz0icG9zdCI+CiAgPGgxPnt7dGl0bGV9fTwv
        aDE+CiAgPGRpdj57e2JvZHl9fTwvZGl2PgogIHt7cmVuZGVyICJhdXRob3Ii
        IGF1dGhvcn19CjwvZGl2PgogICBgYGAKCiAgICBAbWV0aG9kIHJlbmRlcgog
        ICAgQGZvciBFbWJlci5IYW5kbGViYXJzLmhlbHBlcnMKICAgIEBwYXJhbSB7
        U3RyaW5nfSBuYW1lCiAgICBAcGFyYW0ge09iamVjdD99IGNvbnRleHRTdHJp
        bmcKICAgIEBwYXJhbSB7SGFzaH0gb3B0aW9ucwogICAgQHJldHVybiB7U3Ry
        aW5nfSBIVE1MIHN0cmluZwogICovCiAgRW1iZXIuSGFuZGxlYmFycy5yZWdp
        c3RlckhlbHBlcigncmVuZGVyJywgZnVuY3Rpb24gcmVuZGVySGVscGVyKG5h
        bWUsIGNvbnRleHRTdHJpbmcsIG9wdGlvbnMpIHsKICAgIHZhciBsZW5ndGgg
        PSBhcmd1bWVudHMubGVuZ3RoOwoKICAgIHZhciBjb250ZXh0UHJvdmlkZWQg
        PSBsZW5ndGggPT09IDMsCiAgICAgICAgY29udGFpbmVyLCByb3V0ZXIsIGNv
        bnRyb2xsZXIsIHZpZXcsIGNvbnRleHQsIGxvb2t1cE9wdGlvbnM7CgogICAg
        Y29udGFpbmVyID0gKG9wdGlvbnMgfHwgY29udGV4dFN0cmluZykuZGF0YS5r
        ZXl3b3Jkcy5jb250cm9sbGVyLmNvbnRhaW5lcjsKICAgIHJvdXRlciA9IGNv
        bnRhaW5lci5sb29rdXAoJ3JvdXRlcjptYWluJyk7CgogICAgaWYgKGxlbmd0
        aCA9PT0gMikgewogICAgICAvLyB1c2UgdGhlIHNpbmdsZXRvbiBjb250cm9s
        bGVyCiAgICAgIG9wdGlvbnMgPSBjb250ZXh0U3RyaW5nOwogICAgICBjb250
        ZXh0U3RyaW5nID0gdW5kZWZpbmVkOwogICAgICBFbWJlci5hc3NlcnQoIllv
        dSBjYW4gb25seSB1c2UgdGhlIHt7cmVuZGVyfX0gaGVscGVyIG9uY2Ugd2l0
        aG91dCBhIG1vZGVsIG9iamVjdCBhcyBpdHMgc2Vjb25kIGFyZ3VtZW50LCBh
        cyBpbiB7e3JlbmRlciBcInBvc3RcIiBwb3N0fX0uIiwgIXJvdXRlciB8fCAh
        cm91dGVyLl9sb29rdXBBY3RpdmVWaWV3KG5hbWUpKTsKICAgIH0gZWxzZSBp
        ZiAobGVuZ3RoID09PSAzKSB7CiAgICAgIC8vIGNyZWF0ZSBhIG5ldyBjb250
        cm9sbGVyCiAgICAgIGNvbnRleHQgPSBFbWJlci5IYW5kbGViYXJzLmdldChv
        cHRpb25zLmNvbnRleHRzWzFdLCBjb250ZXh0U3RyaW5nLCBvcHRpb25zKTsK
        ICAgIH0gZWxzZSB7CiAgICAgIHRocm93IEVtYmVyLkVycm9yKCJZb3UgbXVz
        dCBwYXNzIGEgdGVtcGxhdGVOYW1lIHRvIHJlbmRlciIpOwogICAgfQoKICAg
        IEVtYmVyLmRlcHJlY2F0ZSgiVXNpbmcgYSBxdW90ZWxlc3MgcGFyYW1ldGVy
        IHdpdGgge3tyZW5kZXJ9fSBpcyBkZXByZWNhdGVkLiBQbGVhc2UgdXBkYXRl
        IHRvIHF1b3RlZCB1c2FnZSAne3tyZW5kZXIgXCIiICsgbmFtZSArICJcIn19
        LiIsIG9wdGlvbnMudHlwZXNbMF0gIT09ICdJRCcpOwoKICAgIC8vICMgbGVn
        YWN5IG5hbWVzcGFjZQogICAgbmFtZSA9IG5hbWUucmVwbGFjZSgvXC8vZywg
        Jy4nKTsKICAgIC8vIFwgbGVnYWN5IHNsYXNoIGFzIG5hbWVzcGFjZSBzdXBw
        b3J0CgoKICAgIHZpZXcgPSBjb250YWluZXIubG9va3VwKCd2aWV3OicgKyBu
        YW1lKSB8fCBjb250YWluZXIubG9va3VwKCd2aWV3OmRlZmF1bHQnKTsKCiAg
        ICAvLyBwcm92aWRlIGNvbnRyb2xsZXIgb3ZlcnJpZGUKICAgIHZhciBjb250
        cm9sbGVyTmFtZSA9IG9wdGlvbnMuaGFzaC5jb250cm9sbGVyIHx8IG5hbWU7
        CiAgICB2YXIgY29udHJvbGxlckZ1bGxOYW1lID0gJ2NvbnRyb2xsZXI6JyAr
        IGNvbnRyb2xsZXJOYW1lOwoKICAgIGlmIChvcHRpb25zLmhhc2guY29udHJv
        bGxlcikgewogICAgICBFbWJlci5hc3NlcnQoIlRoZSBjb250cm9sbGVyIG5h
        bWUgeW91IHN1cHBsaWVkICciICsgY29udHJvbGxlck5hbWUgKyAiJyBkaWQg
        bm90IHJlc29sdmUgdG8gYSBjb250cm9sbGVyLiIsIGNvbnRhaW5lci5oYXMo
        Y29udHJvbGxlckZ1bGxOYW1lKSk7CiAgICB9CgogICAgdmFyIHBhcmVudENv
        bnRyb2xsZXIgPSBvcHRpb25zLmRhdGEua2V5d29yZHMuY29udHJvbGxlcjsK
        CiAgICAvLyBjaG9vc2UgbmFtZQogICAgaWYgKGxlbmd0aCA+IDIpIHsKICAg
        ICAgdmFyIGZhY3RvcnkgPSBjb250YWluZXIubG9va3VwRmFjdG9yeShjb250
        cm9sbGVyRnVsbE5hbWUpIHx8CiAgICAgICAgICAgICAgICAgICAgRW1iZXIu
        Z2VuZXJhdGVDb250cm9sbGVyRmFjdG9yeShjb250YWluZXIsIGNvbnRyb2xs
        ZXJOYW1lLCBjb250ZXh0KTsKCiAgICAgIGNvbnRyb2xsZXIgPSBmYWN0b3J5
        LmNyZWF0ZSh7CiAgICAgICAgbW9kZWw6IGNvbnRleHQsCiAgICAgICAgcGFy
        ZW50Q29udHJvbGxlcjogcGFyZW50Q29udHJvbGxlciwKICAgICAgICB0YXJn
        ZXQ6IHBhcmVudENvbnRyb2xsZXIKICAgICAgfSk7CgogICAgfSBlbHNlIHsK
        ICAgICAgY29udHJvbGxlciA9IGNvbnRhaW5lci5sb29rdXAoY29udHJvbGxl
        ckZ1bGxOYW1lKSB8fAogICAgICAgICAgICAgICAgICAgRW1iZXIuZ2VuZXJh
        dGVDb250cm9sbGVyKGNvbnRhaW5lciwgY29udHJvbGxlck5hbWUpOwoKICAg
        ICAgY29udHJvbGxlci5zZXRQcm9wZXJ0aWVzKHsKICAgICAgICB0YXJnZXQ6
        IHBhcmVudENvbnRyb2xsZXIsCiAgICAgICAgcGFyZW50Q29udHJvbGxlcjog
        cGFyZW50Q29udHJvbGxlcgogICAgICB9KTsKICAgIH0KCiAgICB2YXIgcm9v
        dCA9IG9wdGlvbnMuY29udGV4dHNbMV07CgogICAgaWYgKHJvb3QpIHsKICAg
        ICAgdmlldy5yZWdpc3Rlck9ic2VydmVyKHJvb3QsIGNvbnRleHRTdHJpbmcs
        IGZ1bmN0aW9uKCkgewogICAgICAgIGNvbnRyb2xsZXIuc2V0KCdtb2RlbCcs
        IEVtYmVyLkhhbmRsZWJhcnMuZ2V0KHJvb3QsIGNvbnRleHRTdHJpbmcsIG9w
        dGlvbnMpKTsKICAgICAgfSk7CiAgICB9CgogICAgb3B0aW9ucy5oYXNoLnZp
        ZXdOYW1lID0gRW1iZXIuU3RyaW5nLmNhbWVsaXplKG5hbWUpOwoKICAgIHZh
        ciB0ZW1wbGF0ZU5hbWUgPSAndGVtcGxhdGU6JyArIG5hbWU7CiAgICBFbWJl
        ci5hc3NlcnQoIllvdSB1c2VkIGB7e3JlbmRlciAnIiArIG5hbWUgKyAiJ319
        YCwgYnV0ICciICsgbmFtZSArICInIGNhbiBub3QgYmUgZm91bmQgYXMgZWl0
        aGVyIGEgdGVtcGxhdGUgb3IgYSB2aWV3LiIsIGNvbnRhaW5lci5oYXMoInZp
        ZXc6IiArIG5hbWUpIHx8IGNvbnRhaW5lci5oYXModGVtcGxhdGVOYW1lKSB8
        fCBvcHRpb25zLmZuKTsKICAgIG9wdGlvbnMuaGFzaC50ZW1wbGF0ZSA9IGNv
        bnRhaW5lci5sb29rdXAodGVtcGxhdGVOYW1lKTsKCiAgICBvcHRpb25zLmhh
        c2guY29udHJvbGxlciA9IGNvbnRyb2xsZXI7CgogICAgaWYgKHJvdXRlciAm
        JiAhY29udGV4dCkgewogICAgICByb3V0ZXIuX2Nvbm5lY3RBY3RpdmVWaWV3
        KG5hbWUsIHZpZXcpOwogICAgfQoKICAgIEVtYmVyLkhhbmRsZWJhcnMuaGVs
        cGVycy52aWV3LmNhbGwodGhpcywgdmlldywgb3B0aW9ucyk7CiAgfSk7Cn0p
        OwoKfSkoKTsKCgoKKGZ1bmN0aW9uKCkgewovKioKQG1vZHVsZSBlbWJlcgpA
        c3VibW9kdWxlIGVtYmVyLXJvdXRpbmcKKi8KRW1iZXIub25Mb2FkKCdFbWJl
        ci5IYW5kbGViYXJzJywgZnVuY3Rpb24oSGFuZGxlYmFycykgewoKICB2YXIg
        cmVzb2x2ZVBhcmFtcyA9IEVtYmVyLlJvdXRlci5yZXNvbHZlUGFyYW1zLAog
        ICAgICBpc1NpbXBsZUNsaWNrID0gRW1iZXIuVmlld1V0aWxzLmlzU2ltcGxl
        Q2xpY2s7CgogIHZhciBFbWJlckhhbmRsZWJhcnMgPSBFbWJlci5IYW5kbGVi
        YXJzLAogICAgICBoYW5kbGViYXJzR2V0ID0gRW1iZXJIYW5kbGViYXJzLmdl
        dCwKICAgICAgU2FmZVN0cmluZyA9IEVtYmVySGFuZGxlYmFycy5TYWZlU3Ry
        aW5nLAogICAgICBmb3JFYWNoID0gRW1iZXIuQXJyYXlQb2x5ZmlsbHMuZm9y
        RWFjaCwKICAgICAgZ2V0ID0gRW1iZXIuZ2V0LAogICAgICBhX3NsaWNlID0g
        QXJyYXkucHJvdG90eXBlLnNsaWNlOwoKICBmdW5jdGlvbiBhcmdzKG9wdGlv
        bnMsIGFjdGlvbk5hbWUpIHsKICAgIHZhciByZXQgPSBbXTsKICAgIGlmIChh
        Y3Rpb25OYW1lKSB7IHJldC5wdXNoKGFjdGlvbk5hbWUpOyB9CgogICAgdmFy
        IHR5cGVzID0gb3B0aW9ucy5vcHRpb25zLnR5cGVzLnNsaWNlKDEpLAogICAg
        ICAgIGRhdGEgPSBvcHRpb25zLm9wdGlvbnMuZGF0YTsKCiAgICByZXR1cm4g
        cmV0LmNvbmNhdChyZXNvbHZlUGFyYW1zKG9wdGlvbnMuY29udGV4dCwgb3B0
        aW9ucy5wYXJhbXMsIHsgdHlwZXM6IHR5cGVzLCBkYXRhOiBkYXRhIH0pKTsK
        ICB9CgogIHZhciBBY3Rpb25IZWxwZXIgPSBFbWJlckhhbmRsZWJhcnMuQWN0
        aW9uSGVscGVyID0gewogICAgcmVnaXN0ZXJlZEFjdGlvbnM6IHt9CiAgfTsK
        CiAgdmFyIGtleXMgPSBbImFsdCIsICJzaGlmdCIsICJtZXRhIiwgImN0cmwi
        XTsKCiAgdmFyIFBPSU5URVJfRVZFTlRfVFlQRV9SRUdFWCA9IC9eY2xpY2t8
        bW91c2V8dG91Y2gvOwoKICB2YXIgaXNBbGxvd2VkRXZlbnQgPSBmdW5jdGlv
        bihldmVudCwgYWxsb3dlZEtleXMpIHsKICAgIGlmICh0eXBlb2YgYWxsb3dl
        ZEtleXMgPT09ICJ1bmRlZmluZWQiKSB7CiAgICAgIGlmIChQT0lOVEVSX0VW
        RU5UX1RZUEVfUkVHRVgudGVzdChldmVudC50eXBlKSkgewogICAgICAgIHJl
        dHVybiBpc1NpbXBsZUNsaWNrKGV2ZW50KTsKICAgICAgfSBlbHNlIHsKICAg
        ICAgICBhbGxvd2VkS2V5cyA9ICcnOwogICAgICB9CiAgICB9CgogICAgaWYg
        KGFsbG93ZWRLZXlzLmluZGV4T2YoImFueSIpID49IDApIHsKICAgICAgcmV0
        dXJuIHRydWU7CiAgICB9CgogICAgdmFyIGFsbG93ZWQgPSB0cnVlOwoKICAg
        IGZvckVhY2guY2FsbChrZXlzLCBmdW5jdGlvbihrZXkpIHsKICAgICAgaWYg
        KGV2ZW50W2tleSArICJLZXkiXSAmJiBhbGxvd2VkS2V5cy5pbmRleE9mKGtl
        eSkgPT09IC0xKSB7CiAgICAgICAgYWxsb3dlZCA9IGZhbHNlOwogICAgICB9
        CiAgICB9KTsKCiAgICByZXR1cm4gYWxsb3dlZDsKICB9OwoKICBBY3Rpb25I
        ZWxwZXIucmVnaXN0ZXJBY3Rpb24gPSBmdW5jdGlvbihhY3Rpb25OYW1lLCBv
        cHRpb25zLCBhbGxvd2VkS2V5cykgewogICAgdmFyIGFjdGlvbklkID0gKCsr
        RW1iZXIudXVpZCkudG9TdHJpbmcoKTsKCiAgICBBY3Rpb25IZWxwZXIucmVn
        aXN0ZXJlZEFjdGlvbnNbYWN0aW9uSWRdID0gewogICAgICBldmVudE5hbWU6
        IG9wdGlvbnMuZXZlbnROYW1lLAogICAgICBoYW5kbGVyOiBmdW5jdGlvbiBo
        YW5kbGVSZWdpc3RlcmVkQWN0aW9uKGV2ZW50KSB7CiAgICAgICAgaWYgKCFp
        c0FsbG93ZWRFdmVudChldmVudCwgYWxsb3dlZEtleXMpKSB7IHJldHVybiB0
        cnVlOyB9CgogICAgICAgIGlmIChvcHRpb25zLnByZXZlbnREZWZhdWx0ICE9
        PSBmYWxzZSkgewogICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsK
        ICAgICAgICB9CgogICAgICAgIGlmIChvcHRpb25zLmJ1YmJsZXMgPT09IGZh
        bHNlKSB7CiAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTsKICAg
        ICAgICB9CgogICAgICAgIHZhciB0YXJnZXQgPSBvcHRpb25zLnRhcmdldDsK
        CiAgICAgICAgaWYgKHRhcmdldC50YXJnZXQpIHsKICAgICAgICAgIHRhcmdl
        dCA9IGhhbmRsZWJhcnNHZXQodGFyZ2V0LnJvb3QsIHRhcmdldC50YXJnZXQs
        IHRhcmdldC5vcHRpb25zKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAg
        dGFyZ2V0ID0gdGFyZ2V0LnJvb3Q7CiAgICAgICAgfQoKICAgICAgICBpZiAo
        b3B0aW9ucy5ib3VuZFByb3BlcnR5KSB7CiAgICAgICAgICBFbWJlci5kZXBy
        ZWNhdGUoIlVzaW5nIGEgcXVvdGVsZXNzIHBhcmFtZXRlciB3aXRoIHt7YWN0
        aW9ufX0gaXMgZGVwcmVjYXRlZC4gUGxlYXNlIHVwZGF0ZSB0byBxdW90ZWQg
        dXNhZ2UgJ3t7YWN0aW9uIFwiIiArIGFjdGlvbk5hbWUgKyAiXCJ9fS4iLCBm
        YWxzZSk7CiAgICAgICAgfQoKICAgICAgICBFbWJlci5ydW4oZnVuY3Rpb24g
        cnVuUmVnaXN0ZXJlZEFjdGlvbigpIHsKICAgICAgICAgIGlmICh0YXJnZXQu
        c2VuZCkgewogICAgICAgICAgICB0YXJnZXQuc2VuZC5hcHBseSh0YXJnZXQs
        IGFyZ3Mob3B0aW9ucy5wYXJhbWV0ZXJzLCBhY3Rpb25OYW1lKSk7CiAgICAg
        ICAgICB9IGVsc2UgewogICAgICAgICAgICBFbWJlci5hc3NlcnQoIlRoZSBh
        Y3Rpb24gJyIgKyBhY3Rpb25OYW1lICsgIicgZGlkIG5vdCBleGlzdCBvbiAi
        ICsgdGFyZ2V0LCB0eXBlb2YgdGFyZ2V0W2FjdGlvbk5hbWVdID09PSAnZnVu
        Y3Rpb24nKTsKICAgICAgICAgICAgdGFyZ2V0W2FjdGlvbk5hbWVdLmFwcGx5
        KHRhcmdldCwgYXJncyhvcHRpb25zLnBhcmFtZXRlcnMpKTsKICAgICAgICAg
        IH0KICAgICAgICB9KTsKICAgICAgfQogICAgfTsKCiAgICBvcHRpb25zLnZp
        ZXcub24oJ3dpbGxDbGVhclJlbmRlcicsIGZ1bmN0aW9uKCkgewogICAgICBk
        ZWxldGUgQWN0aW9uSGVscGVyLnJlZ2lzdGVyZWRBY3Rpb25zW2FjdGlvbklk
        XTsKICAgIH0pOwoKICAgIHJldHVybiBhY3Rpb25JZDsKICB9OwoKICAvKioK
        ICAgIFRoZSBge3thY3Rpb259fWAgaGVscGVyIHJlZ2lzdGVycyBhbiBIVE1M
        IGVsZW1lbnQgd2l0aGluIGEgdGVtcGxhdGUgZm9yIERPTQogICAgZXZlbnQg
        aGFuZGxpbmcgYW5kIGZvcndhcmRzIHRoYXQgaW50ZXJhY3Rpb24gdG8gdGhl
        IHRlbXBsYXRlcydzIGNvbnRyb2xsZXIKICAgIG9yIHN1cHBsaWVkIGB0YXJn
        ZXRgIG9wdGlvbiAoc2VlICdTcGVjaWZ5aW5nIGEgVGFyZ2V0JykuCgogICAg
        SWYgdGhlIGNvbnRyb2xsZXIgZG9lcyBub3QgaW1wbGVtZW50IHRoZSBldmVu
        dCwgdGhlIGV2ZW50IGlzIHNlbnQKICAgIHRvIHRoZSBjdXJyZW50IHJvdXRl
        LCBhbmQgaXQgYnViYmxlcyB1cCB0aGUgcm91dGUgaGllcmFyY2h5IGZyb20g
        dGhlcmUuCgogICAgVXNlciBpbnRlcmFjdGlvbiB3aXRoIHRoYXQgZWxlbWVu
        dCB3aWxsIGludm9rZSB0aGUgc3VwcGxpZWQgYWN0aW9uIG5hbWUgb24KICAg
        IHRoZSBhcHByb3ByaWF0ZSB0YXJnZXQuCgogICAgR2l2ZW4gdGhlIGZvbGxv
        d2luZyBhcHBsaWNhdGlvbiBIYW5kbGViYXJzIHRlbXBsYXRlIG9uIHRoZSBw
        YWdlCgogICAgYGBgaGFuZGxlYmFycwogICAgPGRpdiB7e2FjdGlvbiAnYW5B
        Y3Rpb25OYW1lJ319PgogICAgICBjbGljayBtZQogICAgPC9kaXY+CiAgICBg
        YGAKCiAgICBBbmQgYXBwbGljYXRpb24gY29kZQoKICAgIGBgYGphdmFzY3Jp
        cHQKICAgIEFwcC5BcHBsaWNhdGlvbkNvbnRyb2xsZXIgPSBFbWJlci5Db250
        cm9sbGVyLmV4dGVuZCh7CiAgICAgIGFjdGlvbnM6IHsKICAgICAgICBhbkFj
        dGlvbk5hbWU6IGZ1bmN0aW9uKCkgewogICAgICAgIH0KICAgICAgfQogICAg
        fSk7CiAgICBgYGAKCiAgICBXaWxsIHJlc3VsdCBpbiB0aGUgZm9sbG93aW5n
        IHJlbmRlcmVkIEhUTUwKCiAgICBgYGBodG1sCiAgICA8ZGl2IGNsYXNzPSJl
        bWJlci12aWV3Ij4KICAgICAgPGRpdiBkYXRhLWVtYmVyLWFjdGlvbj0iMSI+
        CiAgICAgICAgY2xpY2sgbWUKICAgICAgPC9kaXY+CiAgICA8L2Rpdj4KICAg
        IGBgYAoKICAgIENsaWNraW5nICJjbGljayBtZSIgd2lsbCB0cmlnZ2VyIHRo
        ZSBgYW5BY3Rpb25OYW1lYCBhY3Rpb24gb2YgdGhlCiAgICBgQXBwLkFwcGxp
        Y2F0aW9uQ29udHJvbGxlcmAuIEluIHRoaXMgY2FzZSwgbm8gYWRkaXRpb25h
        bCBwYXJhbWV0ZXJzIHdpbGwgYmUgcGFzc2VkLgoKICAgIElmIHlvdSBwcm92
        aWRlIGFkZGl0aW9uYWwgcGFyYW1ldGVycyB0byB0aGUgaGVscGVyOgoKICAg
        IGBgYGhhbmRsZWJhcnMKICAgIDxidXR0b24ge3thY3Rpb24gJ2VkaXQnIHBv
        c3R9fT5FZGl0PC9idXR0b24+CiAgICBgYGAKCiAgICBUaG9zZSBwYXJhbWV0
        ZXJzIHdpbGwgYmUgcGFzc2VkIGFsb25nIGFzIGFyZ3VtZW50cyB0byB0aGUg
        SmF2YVNjcmlwdAogICAgZnVuY3Rpb24gaW1wbGVtZW50aW5nIHRoZSBhY3Rp
        b24uCgogICAgIyMjIEV2ZW50IFByb3BhZ2F0aW9uCgogICAgRXZlbnRzIHRy
        aWdnZXJlZCB0aHJvdWdoIHRoZSBhY3Rpb24gaGVscGVyIHdpbGwgYXV0b21h
        dGljYWxseSBoYXZlCiAgICBgLnByZXZlbnREZWZhdWx0KClgIGNhbGxlZCBv
        biB0aGVtLiBZb3UgZG8gbm90IG5lZWQgdG8gZG8gc28gaW4geW91ciBldmVu
        dAogICAgaGFuZGxlcnMuIElmIHlvdSBuZWVkIHRvIGFsbG93IGV2ZW50IHBy
        b3BhZ2F0aW9uICh0byBoYW5kbGUgZmlsZSBpbnB1dHMgZm9yCiAgICBleGFt
        cGxlKSB5b3UgY2FuIHN1cHBseSB0aGUgYHByZXZlbnREZWZhdWx0PWZhbHNl
        YCBvcHRpb24gdG8gdGhlIGB7e2FjdGlvbn19YCBoZWxwZXI6CgogICAgYGBg
        aGFuZGxlYmFycwogICAgPGRpdiB7e2FjdGlvbiAic2F5SGVsbG8iIHByZXZl
        bnREZWZhdWx0PWZhbHNlfX0+CiAgICAgIDxpbnB1dCB0eXBlPSJmaWxlIiAv
        PgogICAgICA8aW5wdXQgdHlwZT0iY2hlY2tib3giIC8+CiAgICA8L2Rpdj4K
        ICAgIGBgYAoKICAgIFRvIGRpc2FibGUgYnViYmxpbmcsIHBhc3MgYGJ1YmJs
        ZXM9ZmFsc2VgIHRvIHRoZSBoZWxwZXI6CgogICAgYGBgaGFuZGxlYmFycwog
        ICAgPGJ1dHRvbiB7e2FjdGlvbiAnZWRpdCcgcG9zdCBidWJibGVzPWZhbHNl
        fX0+RWRpdDwvYnV0dG9uPgogICAgYGBgCgogICAgSWYgeW91IG5lZWQgdGhl
        IGRlZmF1bHQgaGFuZGxlciB0byB0cmlnZ2VyIHlvdSBzaG91bGQgZWl0aGVy
        IHJlZ2lzdGVyIHlvdXIKICAgIG93biBldmVudCBoYW5kbGVyLCBvciB1c2Ug
        ZXZlbnQgbWV0aG9kcyBvbiB5b3VyIHZpZXcgY2xhc3MuIFNlZSBbRW1iZXIu
        Vmlld10oL2FwaS9jbGFzc2VzL0VtYmVyLlZpZXcuaHRtbCkKICAgICdSZXNw
        b25kaW5nIHRvIEJyb3dzZXIgRXZlbnRzJyBmb3IgbW9yZSBpbmZvcm1hdGlv
        bi4KCiAgICAjIyMgU3BlY2lmeWluZyBET00gZXZlbnQgdHlwZQoKICAgIEJ5
        IGRlZmF1bHQgdGhlIGB7e2FjdGlvbn19YCBoZWxwZXIgcmVnaXN0ZXJzIGZv
        ciBET00gYGNsaWNrYCBldmVudHMuIFlvdSBjYW4KICAgIHN1cHBseSBhbiBg
        b25gIG9wdGlvbiB0byB0aGUgaGVscGVyIHRvIHNwZWNpZnkgYSBkaWZmZXJl
        bnQgRE9NIGV2ZW50IG5hbWU6CgogICAgYGBgaGFuZGxlYmFycwogICAgPGRp
        diB7e2FjdGlvbiAiYW5BY3Rpb25OYW1lIiBvbj0iZG91YmxlQ2xpY2sifX0+
        CiAgICAgIGNsaWNrIG1lCiAgICA8L2Rpdj4KICAgIGBgYAoKICAgIFNlZSBg
        RW1iZXIuVmlld2AgJ1Jlc3BvbmRpbmcgdG8gQnJvd3NlciBFdmVudHMnIGZv
        ciBhIGxpc3Qgb2YKICAgIGFjY2VwdGFibGUgRE9NIGV2ZW50IG5hbWVzLgoK
        ICAgIE5PVEU6IEJlY2F1c2UgYHt7YWN0aW9ufX1gIGRlcGVuZHMgb24gRW1i
        ZXIncyBldmVudCBkaXNwYXRjaCBzeXN0ZW0gaXQgd2lsbAogICAgb25seSBm
        dW5jdGlvbiBpZiBhbiBgRW1iZXIuRXZlbnREaXNwYXRjaGVyYCBpbnN0YW5j
        ZSBpcyBhdmFpbGFibGUuIEFuCiAgICBgRW1iZXIuRXZlbnREaXNwYXRjaGVy
        YCBpbnN0YW5jZSB3aWxsIGJlIGNyZWF0ZWQgd2hlbiBhIG5ldyBgRW1iZXIu
        QXBwbGljYXRpb25gCiAgICBpcyBjcmVhdGVkLiBIYXZpbmcgYW4gaW5zdGFu
        Y2Ugb2YgYEVtYmVyLkFwcGxpY2F0aW9uYCB3aWxsIHNhdGlzZnkgdGhpcwog
        ICAgcmVxdWlyZW1lbnQuCgogICAgIyMjIFNwZWNpZnlpbmcgd2hpdGVsaXN0
        ZWQgbW9kaWZpZXIga2V5cwoKICAgIEJ5IGRlZmF1bHQgdGhlIGB7e2FjdGlv
        bn19YCBoZWxwZXIgd2lsbCBpZ25vcmUgY2xpY2sgZXZlbnQgd2l0aCBwcmVz
        c2VkIG1vZGlmaWVyCiAgICBrZXlzLiBZb3UgY2FuIHN1cHBseSBhbiBgYWxs
        b3dlZEtleXNgIG9wdGlvbiB0byBzcGVjaWZ5IHdoaWNoIGtleXMgc2hvdWxk
        IG5vdCBiZSBpZ25vcmVkLgoKICAgIGBgYGhhbmRsZWJhcnMKICAgIDxkaXYg
        e3thY3Rpb24gImFuQWN0aW9uTmFtZSIgYWxsb3dlZEtleXM9ImFsdCJ9fT4K
        ICAgICAgY2xpY2sgbWUKICAgIDwvZGl2PgogICAgYGBgCgogICAgVGhpcyB3
        YXkgdGhlIGB7e2FjdGlvbn19YCB3aWxsIGZpcmUgd2hlbiBjbGlja2luZyB3
        aXRoIHRoZSBhbHQga2V5IHByZXNzZWQgZG93bi4KCiAgICBBbHRlcm5hdGl2
        ZWx5LCBzdXBwbHkgImFueSIgdG8gdGhlIGBhbGxvd2VkS2V5c2Agb3B0aW9u
        IHRvIGFjY2VwdCBhbnkgY29tYmluYXRpb24gb2YgbW9kaWZpZXIga2V5cy4K
        CiAgICBgYGBoYW5kbGViYXJzCiAgICA8ZGl2IHt7YWN0aW9uICJhbkFjdGlv
        bk5hbWUiIGFsbG93ZWRLZXlzPSJhbnkifX0+CiAgICAgIGNsaWNrIG1lIHdp
        dGggYW55IGtleSBwcmVzc2VkCiAgICA8L2Rpdj4KICAgIGBgYAoKICAgICMj
        IyBTcGVjaWZ5aW5nIGEgVGFyZ2V0CgogICAgVGhlcmUgYXJlIHNldmVyYWwg
        cG9zc2libGUgdGFyZ2V0IG9iamVjdHMgZm9yIGB7e2FjdGlvbn19YCBoZWxw
        ZXJzOgoKICAgIEluIGEgdHlwaWNhbCBFbWJlciBhcHBsaWNhdGlvbiwgd2hl
        cmUgdmlld3MgYXJlIG1hbmFnZWQgdGhyb3VnaCB1c2Ugb2YgdGhlCiAgICBg
        e3tvdXRsZXR9fWAgaGVscGVyLCBhY3Rpb25zIHdpbGwgYnViYmxlIHRvIHRo
        ZSBjdXJyZW50IGNvbnRyb2xsZXIsIHRoZW4KICAgIHRvIHRoZSBjdXJyZW50
        IHJvdXRlLCBhbmQgdGhlbiB1cCB0aGUgcm91dGUgaGllcmFyY2h5LgoKICAg
        IEFsdGVybmF0aXZlbHksIGEgYHRhcmdldGAgb3B0aW9uIGNhbiBiZSBwcm92
        aWRlZCB0byB0aGUgaGVscGVyIHRvIGNoYW5nZQogICAgd2hpY2ggb2JqZWN0
        IHdpbGwgcmVjZWl2ZSB0aGUgbWV0aG9kIGNhbGwuIFRoaXMgb3B0aW9uIG11
        c3QgYmUgYSBwYXRoCiAgICB0byBhbiBvYmplY3QsIGFjY2Vzc2libGUgaW4g
        dGhlIGN1cnJlbnQgY29udGV4dDoKCiAgICBgYGBoYW5kbGViYXJzCiAgICB7
        eyEgdGhlIGFwcGxpY2F0aW9uIHRlbXBsYXRlIH19CiAgICA8ZGl2IHt7YWN0
        aW9uICJhbkFjdGlvbk5hbWUiIHRhcmdldD12aWV3fX0+CiAgICAgIGNsaWNr
        IG1lCiAgICA8L2Rpdj4KICAgIGBgYAoKICAgIGBgYGphdmFzY3JpcHQKICAg
        IEFwcC5BcHBsaWNhdGlvblZpZXcgPSBFbWJlci5WaWV3LmV4dGVuZCh7CiAg
        ICAgIGFjdGlvbnM6IHsKICAgICAgICBhbkFjdGlvbk5hbWU6IGZ1bmN0aW9u
        KCl7fQogICAgICB9CiAgICB9KTsKCiAgICBgYGAKCiAgICAjIyMgQWRkaXRp
        b25hbCBQYXJhbWV0ZXJzCgogICAgWW91IG1heSBzcGVjaWZ5IGFkZGl0aW9u
        YWwgcGFyYW1ldGVycyB0byB0aGUgYHt7YWN0aW9ufX1gIGhlbHBlci4gVGhl
        c2UKICAgIHBhcmFtZXRlcnMgYXJlIHBhc3NlZCBhbG9uZyBhcyB0aGUgYXJn
        dW1lbnRzIHRvIHRoZSBKYXZhU2NyaXB0IGZ1bmN0aW9uCiAgICBpbXBsZW1l
        bnRpbmcgdGhlIGFjdGlvbi4KCiAgICBgYGBoYW5kbGViYXJzCiAgICB7eyNl
        YWNoIHBlcnNvbiBpbiBwZW9wbGV9fQogICAgICA8ZGl2IHt7YWN0aW9uICJl
        ZGl0IiBwZXJzb259fT4KICAgICAgICBjbGljayBtZQogICAgICA8L2Rpdj4K
        ICAgIHt7L2VhY2h9fQogICAgYGBgCgogICAgQ2xpY2tpbmcgImNsaWNrIG1l
        IiB3aWxsIHRyaWdnZXIgdGhlIGBlZGl0YCBtZXRob2Qgb24gdGhlIGN1cnJl
        bnQgY29udHJvbGxlcgogICAgd2l0aCB0aGUgdmFsdWUgb2YgYHBlcnNvbmAg
        YXMgYSBwYXJhbWV0ZXIuCgogICAgQG1ldGhvZCBhY3Rpb24KICAgIEBmb3Ig
        RW1iZXIuSGFuZGxlYmFycy5oZWxwZXJzCiAgICBAcGFyYW0ge1N0cmluZ30g
        YWN0aW9uTmFtZQogICAgQHBhcmFtIHtPYmplY3R9IFtjb250ZXh0XSoKICAg
        IEBwYXJhbSB7SGFzaH0gb3B0aW9ucwogICovCiAgRW1iZXJIYW5kbGViYXJz
        LnJlZ2lzdGVySGVscGVyKCdhY3Rpb24nLCBmdW5jdGlvbiBhY3Rpb25IZWxw
        ZXIoYWN0aW9uTmFtZSkgewogICAgdmFyIG9wdGlvbnMgPSBhcmd1bWVudHNb
        YXJndW1lbnRzLmxlbmd0aCAtIDFdLAogICAgICAgIGNvbnRleHRzID0gYV9z
        bGljZS5jYWxsKGFyZ3VtZW50cywgMSwgLTEpOwoKICAgIHZhciBoYXNoID0g
        b3B0aW9ucy5oYXNoLAogICAgICAgIGNvbnRyb2xsZXI7CgogICAgLy8gY3Jl
        YXRlIGEgaGFzaCB0byBwYXNzIGFsb25nIHRvIHJlZ2lzdGVyQWN0aW9uCiAg
        ICB2YXIgYWN0aW9uID0gewogICAgICBldmVudE5hbWU6IGhhc2gub24gfHwg
        ImNsaWNrIgogICAgfTsKCiAgICBhY3Rpb24ucGFyYW1ldGVycyA9IHsKICAg
        ICAgY29udGV4dDogdGhpcywKICAgICAgb3B0aW9uczogb3B0aW9ucywKICAg
        ICAgcGFyYW1zOiBjb250ZXh0cwogICAgfTsKCiAgICBhY3Rpb24udmlldyA9
        IG9wdGlvbnMuZGF0YS52aWV3OwoKICAgIHZhciByb290LCB0YXJnZXQ7Cgog
        ICAgaWYgKGhhc2gudGFyZ2V0KSB7CiAgICAgIHJvb3QgPSB0aGlzOwogICAg
        ICB0YXJnZXQgPSBoYXNoLnRhcmdldDsKICAgIH0gZWxzZSBpZiAoY29udHJv
        bGxlciA9IG9wdGlvbnMuZGF0YS5rZXl3b3Jkcy5jb250cm9sbGVyKSB7CiAg
        ICAgIHJvb3QgPSBjb250cm9sbGVyOwogICAgfQoKICAgIGFjdGlvbi50YXJn
        ZXQgPSB7IHJvb3Q6IHJvb3QsIHRhcmdldDogdGFyZ2V0LCBvcHRpb25zOiBv
        cHRpb25zIH07CiAgICBhY3Rpb24uYnViYmxlcyA9IGhhc2guYnViYmxlczsK
        ICAgIGFjdGlvbi5wcmV2ZW50RGVmYXVsdCA9IGhhc2gucHJldmVudERlZmF1
        bHQ7CiAgICBhY3Rpb24uYm91bmRQcm9wZXJ0eSA9ICBvcHRpb25zLnR5cGVz
        WzBdID09PSAiSUQiOwoKICAgIHZhciBhY3Rpb25JZCA9IEFjdGlvbkhlbHBl
        ci5yZWdpc3RlckFjdGlvbihhY3Rpb25OYW1lLCBhY3Rpb24sIGhhc2guYWxs
        b3dlZEtleXMpOwogICAgcmV0dXJuIG5ldyBTYWZlU3RyaW5nKCdkYXRhLWVt
        YmVyLWFjdGlvbj0iJyArIGFjdGlvbklkICsgJyInKTsKICB9KTsKCn0pOwoK
        fSkoKTsKCgoKKGZ1bmN0aW9uKCkgewoKfSkoKTsKCgoKKGZ1bmN0aW9uKCkg
        ewovKioKQG1vZHVsZSBlbWJlcgpAc3VibW9kdWxlIGVtYmVyLXJvdXRpbmcK
        Ki8KCnZhciBnZXQgPSBFbWJlci5nZXQsIHNldCA9IEVtYmVyLnNldCwKICAg
        IG1hcCA9IEVtYmVyLkVudW1lcmFibGVVdGlscy5tYXA7Cgp2YXIgcXVldWVk
        UXVlcnlQYXJhbUNoYW5nZXMgPSB7fTsKCkVtYmVyLkNvbnRyb2xsZXJNaXhp
        bi5yZW9wZW4oewogIC8qKgogICAgVHJhbnNpdGlvbiB0aGUgYXBwbGljYXRp
        b24gaW50byBhbm90aGVyIHJvdXRlLiBUaGUgcm91dGUgbWF5CiAgICBiZSBl
        aXRoZXIgYSBzaW5nbGUgcm91dGUgb3Igcm91dGUgcGF0aDoKCiAgICBgYGBq
        YXZhc2NyaXB0CiAgICBhQ29udHJvbGxlci50cmFuc2l0aW9uVG9Sb3V0ZSgn
        YmxvZ1Bvc3RzJyk7CiAgICBhQ29udHJvbGxlci50cmFuc2l0aW9uVG9Sb3V0
        ZSgnYmxvZ1Bvc3RzLnJlY2VudEVudHJpZXMnKTsKICAgIGBgYAoKICAgIE9w
        dGlvbmFsbHkgc3VwcGx5IGEgbW9kZWwgZm9yIHRoZSByb3V0ZSBpbiBxdWVz
        dGlvbi4gVGhlIG1vZGVsCiAgICB3aWxsIGJlIHNlcmlhbGl6ZWQgaW50byB0
        aGUgVVJMIHVzaW5nIHRoZSBgc2VyaWFsaXplYCBob29rIG9mCiAgICB0aGUg
        cm91dGU6CgogICAgYGBgamF2YXNjcmlwdAogICAgYUNvbnRyb2xsZXIudHJh
        bnNpdGlvblRvUm91dGUoJ2Jsb2dQb3N0JywgYVBvc3QpOwogICAgYGBgCgog
        ICAgTXVsdGlwbGUgbW9kZWxzIHdpbGwgYmUgYXBwbGllZCBsYXN0IHRvIGZp
        cnN0IHJlY3Vyc2l2ZWx5IHVwIHRoZQogICAgcmVzb3VyY2UgdHJlZS4KCiAg
        ICBgYGBqYXZhc2NyaXB0CiAgICB0aGlzLnJlc291cmNlKCdibG9nUG9zdCcs
        IHtwYXRoOic6YmxvZ1Bvc3RJZCd9LCBmdW5jdGlvbigpewogICAgICB0aGlz
        LnJlc291cmNlKCdibG9nQ29tbWVudCcsIHtwYXRoOiAnOmJsb2dDb21tZW50
        SWQnfSk7CiAgICB9KTsKCiAgICBhQ29udHJvbGxlci50cmFuc2l0aW9uVG9S
        b3V0ZSgnYmxvZ0NvbW1lbnQnLCBhUG9zdCwgYUNvbW1lbnQpOwogICAgYGBg
        CgogICAgU2VlIGFsc28gJ3JlcGxhY2VSb3V0ZScuCgogICAgQHBhcmFtIHtT
        dHJpbmd9IG5hbWUgdGhlIG5hbWUgb2YgdGhlIHJvdXRlCiAgICBAcGFyYW0g
        ey4uLk9iamVjdH0gbW9kZWxzIHRoZSBtb2RlbChzKSB0byBiZSB1c2VkIHdo
        aWxlIHRyYW5zaXRpb25pbmcKICAgIHRvIHRoZSByb3V0ZS4KICAgIEBmb3Ig
        RW1iZXIuQ29udHJvbGxlck1peGluCiAgICBAbWV0aG9kIHRyYW5zaXRpb25U
        b1JvdXRlCiAgKi8KICB0cmFuc2l0aW9uVG9Sb3V0ZTogZnVuY3Rpb24oKSB7
        CiAgICAvLyB0YXJnZXQgbWF5IGJlIGVpdGhlciBhbm90aGVyIGNvbnRyb2xs
        ZXIgb3IgYSByb3V0ZXIKICAgIHZhciB0YXJnZXQgPSBnZXQodGhpcywgJ3Rh
        cmdldCcpLAogICAgICAgIG1ldGhvZCA9IHRhcmdldC50cmFuc2l0aW9uVG9S
        b3V0ZSB8fCB0YXJnZXQudHJhbnNpdGlvblRvOwogICAgcmV0dXJuIG1ldGhv
        ZC5hcHBseSh0YXJnZXQsIGFyZ3VtZW50cyk7CiAgfSwKCiAgLyoqCiAgICBA
        ZGVwcmVjYXRlZAogICAgQGZvciBFbWJlci5Db250cm9sbGVyTWl4aW4KICAg
        IEBtZXRob2QgdHJhbnNpdGlvblRvCiAgKi8KICB0cmFuc2l0aW9uVG86IGZ1
        bmN0aW9uKCkgewogICAgRW1iZXIuZGVwcmVjYXRlKCJ0cmFuc2l0aW9uVG8g
        aXMgZGVwcmVjYXRlZC4gUGxlYXNlIHVzZSB0cmFuc2l0aW9uVG9Sb3V0ZS4i
        KTsKICAgIHJldHVybiB0aGlzLnRyYW5zaXRpb25Ub1JvdXRlLmFwcGx5KHRo
        aXMsIGFyZ3VtZW50cyk7CiAgfSwKCiAgLyoqCiAgICBUcmFuc2l0aW9uIGlu
        dG8gYW5vdGhlciByb3V0ZSB3aGlsZSByZXBsYWNpbmcgdGhlIGN1cnJlbnQg
        VVJMLCBpZiBwb3NzaWJsZS4KICAgIFRoaXMgd2lsbCByZXBsYWNlIHRoZSBj
        dXJyZW50IGhpc3RvcnkgZW50cnkgaW5zdGVhZCBvZiBhZGRpbmcgYSBuZXcg
        b25lLgogICAgQmVzaWRlIHRoYXQsIGl0IGlzIGlkZW50aWNhbCB0byBgdHJh
        bnNpdGlvblRvUm91dGVgIGluIGFsbCBvdGhlciByZXNwZWN0cy4KCiAgICBg
        YGBqYXZhc2NyaXB0CiAgICBhQ29udHJvbGxlci5yZXBsYWNlUm91dGUoJ2Js
        b2dQb3N0cycpOwogICAgYUNvbnRyb2xsZXIucmVwbGFjZVJvdXRlKCdibG9n
        UG9zdHMucmVjZW50RW50cmllcycpOwogICAgYGBgCgogICAgT3B0aW9uYWxs
        eSBzdXBwbHkgYSBtb2RlbCBmb3IgdGhlIHJvdXRlIGluIHF1ZXN0aW9uLiBU
        aGUgbW9kZWwKICAgIHdpbGwgYmUgc2VyaWFsaXplZCBpbnRvIHRoZSBVUkwg
        dXNpbmcgdGhlIGBzZXJpYWxpemVgIGhvb2sgb2YKICAgIHRoZSByb3V0ZToK
        CiAgICBgYGBqYXZhc2NyaXB0CiAgICBhQ29udHJvbGxlci5yZXBsYWNlUm91
        dGUoJ2Jsb2dQb3N0JywgYVBvc3QpOwogICAgYGBgCgogICAgTXVsdGlwbGUg
        bW9kZWxzIHdpbGwgYmUgYXBwbGllZCBsYXN0IHRvIGZpcnN0IHJlY3Vyc2l2
        ZWx5IHVwIHRoZQogICAgcmVzb3VyY2UgdHJlZS4KCiAgICBgYGBqYXZhc2Ny
        aXB0CiAgICB0aGlzLnJlc291cmNlKCdibG9nUG9zdCcsIHtwYXRoOic6Ymxv
        Z1Bvc3RJZCd9LCBmdW5jdGlvbigpewogICAgICB0aGlzLnJlc291cmNlKCdi
        bG9nQ29tbWVudCcsIHtwYXRoOiAnOmJsb2dDb21tZW50SWQnfSk7CiAgICB9
        KTsKCiAgICBhQ29udHJvbGxlci5yZXBsYWNlUm91dGUoJ2Jsb2dDb21tZW50
        JywgYVBvc3QsIGFDb21tZW50KTsKICAgIGBgYAoKICAgIEBwYXJhbSB7U3Ry
        aW5nfSBuYW1lIHRoZSBuYW1lIG9mIHRoZSByb3V0ZQogICAgQHBhcmFtIHsu
        Li5PYmplY3R9IG1vZGVscyB0aGUgbW9kZWwocykgdG8gYmUgdXNlZCB3aGls
        ZSB0cmFuc2l0aW9uaW5nCiAgICB0byB0aGUgcm91dGUuCiAgICBAZm9yIEVt
        YmVyLkNvbnRyb2xsZXJNaXhpbgogICAgQG1ldGhvZCByZXBsYWNlUm91dGUK
        ICAqLwogIHJlcGxhY2VSb3V0ZTogZnVuY3Rpb24oKSB7CiAgICAvLyB0YXJn
        ZXQgbWF5IGJlIGVpdGhlciBhbm90aGVyIGNvbnRyb2xsZXIgb3IgYSByb3V0
        ZXIKICAgIHZhciB0YXJnZXQgPSBnZXQodGhpcywgJ3RhcmdldCcpLAogICAg
        ICAgIG1ldGhvZCA9IHRhcmdldC5yZXBsYWNlUm91dGUgfHwgdGFyZ2V0LnJl
        cGxhY2VXaXRoOwogICAgcmV0dXJuIG1ldGhvZC5hcHBseSh0YXJnZXQsIGFy
        Z3VtZW50cyk7CiAgfSwKCiAgLyoqCiAgICBAZGVwcmVjYXRlZAogICAgQGZv
        ciBFbWJlci5Db250cm9sbGVyTWl4aW4KICAgIEBtZXRob2QgcmVwbGFjZVdp
        dGgKICAqLwogIHJlcGxhY2VXaXRoOiBmdW5jdGlvbigpIHsKICAgIEVtYmVy
        LmRlcHJlY2F0ZSgicmVwbGFjZVdpdGggaXMgZGVwcmVjYXRlZC4gUGxlYXNl
        IHVzZSByZXBsYWNlUm91dGUuIik7CiAgICByZXR1cm4gdGhpcy5yZXBsYWNl
        Um91dGUuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICB9Cn0pOwoKCn0pKCk7
        CgoKCihmdW5jdGlvbigpIHsKLyoqCkBtb2R1bGUgZW1iZXIKQHN1Ym1vZHVs
        ZSBlbWJlci1yb3V0aW5nCiovCgp2YXIgZ2V0ID0gRW1iZXIuZ2V0LCBzZXQg
        PSBFbWJlci5zZXQ7CgpFbWJlci5WaWV3LnJlb3Blbih7CgogIC8qKgogICAg
        U2V0cyB0aGUgcHJpdmF0ZSBgX291dGxldHNgIG9iamVjdCBvbiB0aGUgdmll
        dy4KCiAgICBAbWV0aG9kIGluaXQKICAgKi8KICBpbml0OiBmdW5jdGlvbigp
        IHsKICAgIHNldCh0aGlzLCAnX291dGxldHMnLCB7fSk7CiAgICB0aGlzLl9z
        dXBlcigpOwogIH0sCgogIC8qKgogICAgTWFudWFsbHkgZmlsbCBhbnkgb2Yg
        YSB2aWV3J3MgYHt7b3V0bGV0fX1gIGFyZWFzIHdpdGggdGhlCiAgICBzdXBw
        bGllZCB2aWV3LgoKICAgIEV4YW1wbGUKCiAgICBgYGBqYXZhc2NyaXB0CiAg
        ICB2YXIgTXlWaWV3ID0gRW1iZXIuVmlldy5leHRlbmQoewogICAgICB0ZW1w
        bGF0ZTogRW1iZXIuSGFuZGxlYmFycy5jb21waWxlKCdDaGlsZCB2aWV3OiB7
        e291dGxldCAibWFpbiJ9fSAnKQogICAgfSk7CiAgICB2YXIgbXlWaWV3ID0g
        TXlWaWV3LmNyZWF0ZSgpOwogICAgbXlWaWV3LmFwcGVuZFRvKCdib2R5Jyk7
        CiAgICAvLyBUaGUgaHRtbCBmb3IgbXlWaWV3IG5vdyBsb29rcyBsaWtlOgog
        ICAgLy8gPGRpdiBpZD0iZW1iZXIyMjgiIGNsYXNzPSJlbWJlci12aWV3Ij5D
        aGlsZCB2aWV3OiA8L2Rpdj4KCiAgICB2YXIgRm9vVmlldyA9IEVtYmVyLlZp
        ZXcuZXh0ZW5kKHsKICAgICAgdGVtcGxhdGU6IEVtYmVyLkhhbmRsZWJhcnMu
        Y29tcGlsZSgnPGgxPkZvbzwvaDE+ICcpCiAgICB9KTsKICAgIHZhciBmb29W
        aWV3ID0gRm9vVmlldy5jcmVhdGUoKTsKICAgIG15Vmlldy5jb25uZWN0T3V0
        bGV0KCdtYWluJywgZm9vVmlldyk7CiAgICAvLyBUaGUgaHRtbCBmb3IgbXlW
        aWV3IG5vdyBsb29rcyBsaWtlOgogICAgLy8gPGRpdiBpZD0iZW1iZXIyMjgi
        IGNsYXNzPSJlbWJlci12aWV3Ij5DaGlsZCB2aWV3OgogICAgLy8gICA8ZGl2
        IGlkPSJlbWJlcjIzNCIgY2xhc3M9ImVtYmVyLXZpZXciPjxoMT5Gb288L2gx
        PiA8L2Rpdj4KICAgIC8vIDwvZGl2PgogICAgYGBgCiAgICBAbWV0aG9kIGNv
        bm5lY3RPdXRsZXQKICAgIEBwYXJhbSAge1N0cmluZ30gb3V0bGV0TmFtZSBB
        IHVuaXF1ZSBuYW1lIGZvciB0aGUgb3V0bGV0CiAgICBAcGFyYW0gIHtPYmpl
        Y3R9IHZpZXcgICAgICAgQW4gRW1iZXIuVmlldwogICAqLwogIGNvbm5lY3RP
        dXRsZXQ6IGZ1bmN0aW9uKG91dGxldE5hbWUsIHZpZXcpIHsKICAgIGlmICh0
        aGlzLl9wZW5kaW5nRGlzY29ubmVjdGlvbnMpIHsKICAgICAgZGVsZXRlIHRo
        aXMuX3BlbmRpbmdEaXNjb25uZWN0aW9uc1tvdXRsZXROYW1lXTsKICAgIH0K
        CiAgICBpZiAodGhpcy5faGFzRXF1aXZhbGVudFZpZXcob3V0bGV0TmFtZSwg
        dmlldykpIHsKICAgICAgdmlldy5kZXN0cm95KCk7CiAgICAgIHJldHVybjsK
        ICAgIH0KCiAgICB2YXIgb3V0bGV0cyA9IGdldCh0aGlzLCAnX291dGxldHMn
        KSwKICAgICAgICBjb250YWluZXIgPSBnZXQodGhpcywgJ2NvbnRhaW5lcicp
        LAogICAgICAgIHJvdXRlciA9IGNvbnRhaW5lciAmJiBjb250YWluZXIubG9v
        a3VwKCdyb3V0ZXI6bWFpbicpLAogICAgICAgIHJlbmRlcmVkTmFtZSA9IGdl
        dCh2aWV3LCAncmVuZGVyZWROYW1lJyk7CgogICAgc2V0KG91dGxldHMsIG91
        dGxldE5hbWUsIHZpZXcpOwoKICAgIGlmIChyb3V0ZXIgJiYgcmVuZGVyZWRO
        YW1lKSB7CiAgICAgIHJvdXRlci5fY29ubmVjdEFjdGl2ZVZpZXcocmVuZGVy
        ZWROYW1lLCB2aWV3KTsKICAgIH0KICB9LAoKICAvKioKICAgIERldGVybWlu
        ZXMgaWYgdGhlIHZpZXcgaGFzIGFscmVhZHkgYmVlbiBjcmVhdGVkIGJ5IGNo
        ZWNraW5nIGlmCiAgICB0aGUgdmlldyBoYXMgdGhlIHNhbWUgY29uc3RydWN0
        b3IsIHRlbXBsYXRlLCBhbmQgY29udGV4dCBhcyB0aGUKICAgIHZpZXcgaW4g
        dGhlIGBfb3V0bGV0c2Agb2JqZWN0LgoKICAgIEBwcml2YXRlCiAgICBAbWV0
        aG9kIF9oYXNFcXVpdmFsZW50VmlldwogICAgQHBhcmFtICB7U3RyaW5nfSBv
        dXRsZXROYW1lIFRoZSBuYW1lIG9mIHRoZSBvdXRsZXQgd2UgYXJlIGNoZWNr
        aW5nCiAgICBAcGFyYW0gIHtPYmplY3R9IHZpZXcgICAgICAgQW4gRW1iZXIu
        VmlldwogICAgQHJldHVybiB7Qm9vbGVhbn0KICAgKi8KICBfaGFzRXF1aXZh
        bGVudFZpZXc6IGZ1bmN0aW9uKG91dGxldE5hbWUsIHZpZXcpIHsKICAgIHZh
        ciBleGlzdGluZ1ZpZXcgPSBnZXQodGhpcywgJ19vdXRsZXRzLicrb3V0bGV0
        TmFtZSk7CiAgICByZXR1cm4gZXhpc3RpbmdWaWV3ICYmCiAgICAgIGV4aXN0
        aW5nVmlldy5jb25zdHJ1Y3RvciA9PT0gdmlldy5jb25zdHJ1Y3RvciAmJgog
        ICAgICBleGlzdGluZ1ZpZXcuZ2V0KCd0ZW1wbGF0ZScpID09PSB2aWV3Lmdl
        dCgndGVtcGxhdGUnKSAmJgogICAgICBleGlzdGluZ1ZpZXcuZ2V0KCdjb250
        ZXh0JykgPT09IHZpZXcuZ2V0KCdjb250ZXh0Jyk7CiAgfSwKCiAgLyoqCiAg
        ICBSZW1vdmVzIGFuIG91dGxldCBmcm9tIHRoZSB2aWV3LgoKICAgIEV4YW1w
        bGUKCiAgICBgYGBqYXZhc2NyaXB0CiAgICB2YXIgTXlWaWV3ID0gRW1iZXIu
        Vmlldy5leHRlbmQoewogICAgICB0ZW1wbGF0ZTogRW1iZXIuSGFuZGxlYmFy
        cy5jb21waWxlKCdDaGlsZCB2aWV3OiB7e291dGxldCAibWFpbiJ9fSAnKQog
        ICAgfSk7CiAgICB2YXIgbXlWaWV3ID0gTXlWaWV3LmNyZWF0ZSgpOwogICAg
        bXlWaWV3LmFwcGVuZFRvKCdib2R5Jyk7CiAgICAvLyBteVZpZXcncyBodG1s
        OgogICAgLy8gPGRpdiBpZD0iZW1iZXIyMjgiIGNsYXNzPSJlbWJlci12aWV3
        Ij5DaGlsZCB2aWV3OiA8L2Rpdj4KCiAgICB2YXIgRm9vVmlldyA9IEVtYmVy
        LlZpZXcuZXh0ZW5kKHsKICAgICAgdGVtcGxhdGU6IEVtYmVyLkhhbmRsZWJh
        cnMuY29tcGlsZSgnPGgxPkZvbzwvaDE+ICcpCiAgICB9KTsKICAgIHZhciBm
        b29WaWV3ID0gRm9vVmlldy5jcmVhdGUoKTsKICAgIG15Vmlldy5jb25uZWN0
        T3V0bGV0KCdtYWluJywgZm9vVmlldyk7CiAgICAvLyBteVZpZXcncyBodG1s
        OgogICAgLy8gPGRpdiBpZD0iZW1iZXIyMjgiIGNsYXNzPSJlbWJlci12aWV3
        Ij5DaGlsZCB2aWV3OgogICAgLy8gICA8ZGl2IGlkPSJlbWJlcjIzNCIgY2xh
        c3M9ImVtYmVyLXZpZXciPjxoMT5Gb288L2gxPiA8L2Rpdj4KICAgIC8vIDwv
        ZGl2PgoKICAgIG15Vmlldy5kaXNjb25uZWN0T3V0bGV0KCdtYWluJyk7CiAg
        ICAvLyBteVZpZXcncyBodG1sOgogICAgLy8gPGRpdiBpZD0iZW1iZXIyMjgi
        IGNsYXNzPSJlbWJlci12aWV3Ij5DaGlsZCB2aWV3OiA8L2Rpdj4KICAgIGBg
        YAoKICAgIEBtZXRob2QgZGlzY29ubmVjdE91dGxldAogICAgQHBhcmFtICB7
        U3RyaW5nfSBvdXRsZXROYW1lIFRoZSBuYW1lIG9mIHRoZSBvdXRsZXQgdG8g
        YmUgcmVtb3ZlZAogICAqLwogIGRpc2Nvbm5lY3RPdXRsZXQ6IGZ1bmN0aW9u
        KG91dGxldE5hbWUpIHsKICAgIGlmICghdGhpcy5fcGVuZGluZ0Rpc2Nvbm5l
        Y3Rpb25zKSB7CiAgICAgIHRoaXMuX3BlbmRpbmdEaXNjb25uZWN0aW9ucyA9
        IHt9OwogICAgfQogICAgdGhpcy5fcGVuZGluZ0Rpc2Nvbm5lY3Rpb25zW291
        dGxldE5hbWVdID0gdHJ1ZTsKICAgIEVtYmVyLnJ1bi5vbmNlKHRoaXMsICdf
        ZmluaXNoRGlzY29ubmVjdGlvbnMnKTsKICB9LAoKICAvKioKICAgIEdldHMg
        YW4gb3V0bGV0IHRoYXQgaXMgcGVuZGluZyBkaXNjb25uZWN0aW9uIGFuZCB0
        aGVuCiAgICBudWxsaWZ5cyB0aGUgb2JqZWN0IG9uIHRoZSBgX291dGxldGAg
        b2JqZWN0LgoKICAgIEBwcml2YXRlCiAgICBAbWV0aG9kIF9maW5pc2hEaXNj
        b25uZWN0aW9ucwogICAqLwogIF9maW5pc2hEaXNjb25uZWN0aW9uczogZnVu
        Y3Rpb24oKSB7CiAgICBpZiAodGhpcy5pc0Rlc3Ryb3llZCkgcmV0dXJuOyAv
        LyBfb3V0bGV0cyB3aWxsIGJlIGdvbmUgYW55d2F5CiAgICB2YXIgb3V0bGV0
        cyA9IGdldCh0aGlzLCAnX291dGxldHMnKTsKICAgIHZhciBwZW5kaW5nRGlz
        Y29ubmVjdGlvbnMgPSB0aGlzLl9wZW5kaW5nRGlzY29ubmVjdGlvbnM7CiAg
        ICB0aGlzLl9wZW5kaW5nRGlzY29ubmVjdGlvbnMgPSBudWxsOwoKICAgIGZv
        ciAodmFyIG91dGxldE5hbWUgaW4gcGVuZGluZ0Rpc2Nvbm5lY3Rpb25zKSB7
        CiAgICAgIHNldChvdXRsZXRzLCBvdXRsZXROYW1lLCBudWxsKTsKICAgIH0K
        ICB9Cn0pOwoKfSkoKTsKCgoKKGZ1bmN0aW9uKCkgewovKioKQG1vZHVsZSBl
        bWJlcgpAc3VibW9kdWxlIGVtYmVyLXZpZXdzCiovCgovLyBBZGQgYSBuZXcg
        bmFtZWQgcXVldWUgYWZ0ZXIgdGhlICdhY3Rpb25zJyBxdWV1ZSAod2hlcmUg
        UlNWUCBwcm9taXNlcwovLyByZXNvbHZlKSwgd2hpY2ggaXMgdXNlZCBpbiBy
        b3V0ZXIgdHJhbnNpdGlvbnMgdG8gcHJldmVudCB1bm5lY2Vzc2FyeQovLyBs
        b2FkaW5nIHN0YXRlIGVudHJ5IGlmIGFsbCBjb250ZXh0IHByb21pc2VzIHJl
        c29sdmUgb24gdGhlIAovLyAnYWN0aW9ucycgcXVldWUgZmlyc3QuCgp2YXIg
        cXVldWVzID0gRW1iZXIucnVuLnF1ZXVlcywKICAgIGluZGV4T2YgPSBFbWJl
        ci5BcnJheVBvbHlmaWxscy5pbmRleE9mOwpxdWV1ZXMuc3BsaWNlKGluZGV4
        T2YuY2FsbChxdWV1ZXMsICdhY3Rpb25zJykgKyAxLCAwLCAncm91dGVyVHJh
        bnNpdGlvbnMnKTsKCn0pKCk7CgoKCihmdW5jdGlvbigpIHsKLyoqCkBtb2R1
        bGUgZW1iZXIKQHN1Ym1vZHVsZSBlbWJlci1yb3V0aW5nCiovCgp2YXIgZ2V0
        ID0gRW1iZXIuZ2V0LCBzZXQgPSBFbWJlci5zZXQ7CgovKioKICBFbWJlci5M
        b2NhdGlvbiByZXR1cm5zIGFuIGluc3RhbmNlIG9mIHRoZSBjb3JyZWN0IGlt
        cGxlbWVudGF0aW9uIG9mCiAgdGhlIGBsb2NhdGlvbmAgQVBJLgoKICAjIyBJ
        bXBsZW1lbnRhdGlvbnMKCiAgWW91IGNhbiBwYXNzIGFuIGltcGxlbWVudGF0
        aW9uIG5hbWUgKGBoYXNoYCwgYGhpc3RvcnlgLCBgbm9uZWApIHRvIGZvcmNl
        IGEKICBwYXJ0aWN1bGFyIGltcGxlbWVudGF0aW9uIHRvIGJlIHVzZWQgaW4g
        eW91ciBhcHBsaWNhdGlvbi4KCiAgIyMjIEhhc2hMb2NhdGlvbgoKICBVc2lu
        ZyBgSGFzaExvY2F0aW9uYCByZXN1bHRzIGluIFVSTHMgd2l0aCBhIGAjYCAo
        aGFzaCBzaWduKSBzZXBhcmF0aW5nIHRoZQogIHNlcnZlciBzaWRlIFVSTCBw
        b3J0aW9uIG9mIHRoZSBVUkwgZnJvbSB0aGUgcG9ydGlvbiB0aGF0IGlzIHVz
        ZWQgYnkgRW1iZXIuCiAgVGhpcyByZWxpZXMgdXBvbiB0aGUgYGhhc2hjaGFu
        Z2VgIGV2ZW50IGV4aXN0aW5nIGluIHRoZSBicm93c2VyLgoKICBFeGFtcGxl
        OgoKICBgYGBqYXZhc2NyaXB0CiAgQXBwLlJvdXRlci5tYXAoZnVuY3Rpb24o
        KSB7CiAgICB0aGlzLnJlc291cmNlKCdwb3N0cycsIGZ1bmN0aW9uKCkgewog
        ICAgICB0aGlzLnJvdXRlKCduZXcnKTsKICAgIH0pOwogIH0pOwoKICBBcHAu
        Um91dGVyLnJlb3Blbih7CiAgICBsb2NhdGlvbjogJ2hhc2gnCiAgfSk7CiAg
        YGBgCgogIFRoaXMgd2lsbCByZXN1bHQgaW4gYSBwb3N0cy5uZXcgdXJsIG9m
        IGAvIy9wb3N0cy9uZXdgLgoKICAjIyMgSGlzdG9yeUxvY2F0aW9uCgogIFVz
        aW5nIGBIaXN0b3J5TG9jYXRpb25gIHJlc3VsdHMgaW4gVVJMcyB0aGF0IGFy
        ZSBpbmRpc3Rpbmd1aXNoYWJsZSBmcm9tIGEKICBzdGFuZGFyZCBVUkwuIFRo
        aXMgcmVsaWVzIHVwb24gdGhlIGJyb3dzZXIncyBgaGlzdG9yeWAgQVBJLgoK
        ICBFeGFtcGxlOgoKICBgYGBqYXZhc2NyaXB0CiAgQXBwLlJvdXRlci5tYXAo
        ZnVuY3Rpb24oKSB7CiAgICB0aGlzLnJlc291cmNlKCdwb3N0cycsIGZ1bmN0
        aW9uKCkgewogICAgICB0aGlzLnJvdXRlKCduZXcnKTsKICAgIH0pOwogIH0p
        OwoKICBBcHAuUm91dGVyLnJlb3Blbih7CiAgICBsb2NhdGlvbjogJ2hpc3Rv
        cnknCiAgfSk7CiAgYGBgCgogIFRoaXMgd2lsbCByZXN1bHQgaW4gYSBwb3N0
        cy5uZXcgdXJsIG9mIGAvcG9zdHMvbmV3YC4KCiAgIyMjIE5vbmVMb2NhdGlv
        bgoKICBVc2luZyBgTm9uZUxvY2F0aW9uYCBjYXVzZXMgRW1iZXIgdG8gbm90
        IHN0b3JlIHRoZSBhcHBsaWNhdGlvbnMgVVJMIHN0YXRlCiAgaW4gdGhlIGFj
        dHVhbCBVUkwuIFRoaXMgaXMgZ2VuZXJhbGx5IHVzZWQgZm9yIHRlc3Rpbmcg
        cHVycG9zZXMsIGFuZCBpcyBvbmUKICBvZiB0aGUgY2hhbmdlcyBtYWRlIHdo
        ZW4gY2FsbGluZyBgQXBwLnNldHVwRm9yVGVzdGluZygpYC4KCiAgIyMgTG9j
        YXRpb24gQVBJCgogIEVhY2ggbG9jYXRpb24gaW1wbGVtZW50YXRpb24gbXVz
        dCBwcm92aWRlIHRoZSBmb2xsb3dpbmcgbWV0aG9kczoKCiAgKiBpbXBsZW1l
        bnRhdGlvbjogcmV0dXJucyB0aGUgc3RyaW5nIG5hbWUgdXNlZCB0byByZWZl
        cmVuY2UgdGhlIGltcGxlbWVudGF0aW9uLgogICogZ2V0VVJMOiByZXR1cm5z
        IHRoZSBjdXJyZW50IFVSTC4KICAqIHNldFVSTChwYXRoKTogc2V0cyB0aGUg
        Y3VycmVudCBVUkwuCiAgKiByZXBsYWNlVVJMKHBhdGgpOiByZXBsYWNlIHRo
        ZSBjdXJyZW50IFVSTCAob3B0aW9uYWwpLgogICogb25VcGRhdGVVUkwoY2Fs
        bGJhY2spOiB0cmlnZ2VycyB0aGUgY2FsbGJhY2sgd2hlbiB0aGUgVVJMIGNo
        YW5nZXMuCiAgKiBmb3JtYXRVUkwodXJsKTogZm9ybWF0cyBgdXJsYCB0byBi
        ZSBwbGFjZWQgaW50byBgaHJlZmAgYXR0cmlidXRlLgoKICBDYWxsaW5nIHNl
        dFVSTCBvciByZXBsYWNlVVJMIHdpbGwgbm90IHRyaWdnZXIgb25VcGRhdGVV
        UkwgY2FsbGJhY2tzLgoKICBAY2xhc3MgTG9jYXRpb24KICBAbmFtZXNwYWNl
        IEVtYmVyCiAgQHN0YXRpYwoqLwpFbWJlci5Mb2NhdGlvbiA9IHsKICAvKioK
        ICAgVGhpcyBpcyBkZXByZWNhdGVkIGluIGZhdm9yIG9mIHVzaW5nIHRoZSBj
        b250YWluZXIgdG8gbG9va3VwIHRoZSBsb2NhdGlvbgogICBpbXBsZW1lbnRh
        dGlvbiBhcyBkZXNpcmVkLgoKICAgRm9yIGV4YW1wbGU6CgogICBgYGBqYXZh
        c2NyaXB0CiAgIC8vIEdpdmVuIGEgbG9jYXRpb24gcmVnaXN0ZXJlZCBhcyBm
        b2xsb3dzOgogICBjb250YWluZXIucmVnaXN0ZXIoJ2xvY2F0aW9uOmhpc3Rv
        cnktdGVzdCcsIEhpc3RvcnlUZXN0TG9jYXRpb24pOwoKICAgLy8gWW91IGNv
        dWxkIGNyZWF0ZSBhIG5ldyBpbnN0YW5jZSB2aWE6CiAgIGNvbnRhaW5lci5s
        b29rdXAoJ2xvY2F0aW9uOmhpc3RvcnktdGVzdCcpOwogICBgYGAKCiAgICBA
        bWV0aG9kIGNyZWF0ZQogICAgQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMKICAg
        IEByZXR1cm4ge09iamVjdH0gYW4gaW5zdGFuY2Ugb2YgYW4gaW1wbGVtZW50
        YXRpb24gb2YgdGhlIGBsb2NhdGlvbmAgQVBJCiAgICBAZGVwcmVjYXRlZCBV
        c2UgdGhlIGNvbnRhaW5lciB0byBsb29rdXAgdGhlIGxvY2F0aW9uIGltcGxl
        bWVudGF0aW9uIHRoYXQgeW91CiAgICBuZWVkLgogICovCiAgY3JlYXRlOiBm
        dW5jdGlvbihvcHRpb25zKSB7CiAgICB2YXIgaW1wbGVtZW50YXRpb24gPSBv
        cHRpb25zICYmIG9wdGlvbnMuaW1wbGVtZW50YXRpb247CiAgICBFbWJlci5h
        c3NlcnQoIkVtYmVyLkxvY2F0aW9uLmNyZWF0ZTogeW91IG11c3Qgc3BlY2lm
        eSBhICdpbXBsZW1lbnRhdGlvbicgb3B0aW9uIiwgISFpbXBsZW1lbnRhdGlv
        bik7CgogICAgdmFyIGltcGxlbWVudGF0aW9uQ2xhc3MgPSB0aGlzLmltcGxl
        bWVudGF0aW9uc1tpbXBsZW1lbnRhdGlvbl07CiAgICBFbWJlci5hc3NlcnQo
        IkVtYmVyLkxvY2F0aW9uLmNyZWF0ZTogIiArIGltcGxlbWVudGF0aW9uICsg
        IiBpcyBub3QgYSB2YWxpZCBpbXBsZW1lbnRhdGlvbiIsICEhaW1wbGVtZW50
        YXRpb25DbGFzcyk7CgogICAgcmV0dXJuIGltcGxlbWVudGF0aW9uQ2xhc3Mu
        Y3JlYXRlLmFwcGx5KGltcGxlbWVudGF0aW9uQ2xhc3MsIGFyZ3VtZW50cyk7
        CiAgfSwKCiAgLyoqCiAgIFRoaXMgaXMgZGVwcmVjYXRlZCBpbiBmYXZvciBv
        ZiB1c2luZyB0aGUgY29udGFpbmVyIHRvIHJlZ2lzdGVyIHRoZQogICBsb2Nh
        dGlvbiBpbXBsZW1lbnRhdGlvbiBhcyBkZXNpcmVkLgoKICAgRXhhbXBsZToK
        CiAgIGBgYGphdmFzY3JpcHQKICAgQXBwbGljYXRpb24uaW5pdGlhbGl6ZXIo
        ewogICAgbmFtZTogImhpc3RvcnktdGVzdC1sb2NhdGlvbiIsCgogICAgaW5p
        dGlhbGl6ZTogZnVuY3Rpb24oY29udGFpbmVyLCBhcHBsaWNhdGlvbikgewog
        ICAgICBhcHBsaWNhdGlvbi5yZWdpc3RlcignbG9jYXRpb246aGlzdG9yeS10
        ZXN0JywgSGlzdG9yeVRlc3RMb2NhdGlvbik7CiAgICB9CiAgIH0pOwogICBg
        YGAKCiAgIEBtZXRob2QgcmVnaXN0ZXJJbXBsZW1lbnRhdGlvbgogICBAcGFy
        YW0ge1N0cmluZ30gbmFtZQogICBAcGFyYW0ge09iamVjdH0gaW1wbGVtZW50
        YXRpb24gb2YgdGhlIGBsb2NhdGlvbmAgQVBJCiAgIEBkZXByZWNhdGVkIFJl
        Z2lzdGVyIHlvdXIgY3VzdG9tIGxvY2F0aW9uIGltcGxlbWVudGF0aW9uIHdp
        dGggdGhlCiAgIGNvbnRhaW5lciBkaXJlY3RseS4KICAqLwogIHJlZ2lzdGVy
        SW1wbGVtZW50YXRpb246IGZ1bmN0aW9uKG5hbWUsIGltcGxlbWVudGF0aW9u
        KSB7CiAgICBFbWJlci5kZXByZWNhdGUoJ1VzaW5nIHRoZSBFbWJlci5Mb2Nh
        dGlvbi5yZWdpc3RlckltcGxlbWVudGF0aW9uIGlzIG5vIGxvbmdlciBzdXBw
        b3J0ZWQuIFJlZ2lzdGVyIHlvdXIgY3VzdG9tIGxvY2F0aW9uIGltcGxlbWVu
        dGF0aW9uIHdpdGggdGhlIGNvbnRhaW5lciBpbnN0ZWFkLicsIGZhbHNlKTsK
        CiAgICB0aGlzLmltcGxlbWVudGF0aW9uc1tuYW1lXSA9IGltcGxlbWVudGF0
        aW9uOwogIH0sCgogIGltcGxlbWVudGF0aW9uczoge30sCgogIC8qKgogICAg
        UmV0dXJucyB0aGUgY3VycmVudCBgbG9jYXRpb24uaGFzaGAgYnkgcGFyc2lu
        ZyBsb2NhdGlvbi5ocmVmIHNpbmNlIGJyb3dzZXJzCiAgICBpbmNvbnNpc3Rl
        bnRseSBVUkwtZGVjb2RlIGBsb2NhdGlvbi5oYXNoYC4KICAKICAgIGh0dHBz
        Oi8vYnVnemlsbGEubW96aWxsYS5vcmcvc2hvd19idWcuY2dpP2lkPTQ4MzMw
        NAoKICAgIEBwcml2YXRlCiAgICBAbWV0aG9kIGdldEhhc2gKICAqLwogIGdl
        dEhhc2g6IGZ1bmN0aW9uICgpIHsKICAgIHZhciBocmVmID0gd2luZG93Lmxv
        Y2F0aW9uLmhyZWYsCiAgICAgICAgaGFzaEluZGV4ID0gaHJlZi5pbmRleE9m
        KCcjJyk7CgogICAgaWYgKGhhc2hJbmRleCA9PT0gLTEpIHsKICAgICAgcmV0
        dXJuICcnOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIGhyZWYuc3Vic3Ry
        KGhhc2hJbmRleCk7CiAgICB9CiAgfQp9OwoKfSkoKTsKCgoKKGZ1bmN0aW9u
        KCkgewovKioKQG1vZHVsZSBlbWJlcgpAc3VibW9kdWxlIGVtYmVyLXJvdXRp
        bmcKKi8KCnZhciBnZXQgPSBFbWJlci5nZXQsIHNldCA9IEVtYmVyLnNldDsK
        Ci8qKgogIEVtYmVyLk5vbmVMb2NhdGlvbiBkb2VzIG5vdCBpbnRlcmFjdCB3
        aXRoIHRoZSBicm93c2VyLiBJdCBpcyB1c2VmdWwgZm9yCiAgdGVzdGluZywg
        b3Igd2hlbiB5b3UgbmVlZCB0byBtYW5hZ2Ugc3RhdGUgd2l0aCB5b3VyIFJv
        dXRlciwgYnV0IHRlbXBvcmFyaWx5CiAgZG9uJ3Qgd2FudCBpdCB0byBtdWNr
        IHdpdGggdGhlIFVSTCAoZm9yIGV4YW1wbGUgd2hlbiB5b3UgZW1iZWQgeW91
        cgogIGFwcGxpY2F0aW9uIGluIGEgbGFyZ2VyIHBhZ2UpLgoKICBAY2xhc3Mg
        Tm9uZUxvY2F0aW9uCiAgQG5hbWVzcGFjZSBFbWJlcgogIEBleHRlbmRzIEVt
        YmVyLk9iamVjdAoqLwpFbWJlci5Ob25lTG9jYXRpb24gPSBFbWJlci5PYmpl
        Y3QuZXh0ZW5kKHsKICBpbXBsZW1lbnRhdGlvbjogJ25vbmUnLAogIHBhdGg6
        ICcnLAoKICAvKioKICAgIFJldHVybnMgdGhlIGN1cnJlbnQgcGF0aC4KCiAg
        ICBAcHJpdmF0ZQogICAgQG1ldGhvZCBnZXRVUkwKICAgIEByZXR1cm4ge1N0
        cmluZ30gcGF0aAogICovCiAgZ2V0VVJMOiBmdW5jdGlvbigpIHsKICAgIHJl
        dHVybiBnZXQodGhpcywgJ3BhdGgnKTsKICB9LAoKICAvKioKICAgIFNldCB0
        aGUgcGF0aCBhbmQgcmVtZW1iZXJzIHdoYXQgd2FzIHNldC4gVXNpbmcgdGhp
        cyBtZXRob2QKICAgIHRvIGNoYW5nZSB0aGUgcGF0aCB3aWxsIG5vdCBpbnZv
        a2UgdGhlIGB1cGRhdGVVUkxgIGNhbGxiYWNrLgoKICAgIEBwcml2YXRlCiAg
        ICBAbWV0aG9kIHNldFVSTAogICAgQHBhcmFtIHBhdGgge1N0cmluZ30KICAq
        LwogIHNldFVSTDogZnVuY3Rpb24ocGF0aCkgewogICAgc2V0KHRoaXMsICdw
        YXRoJywgcGF0aCk7CiAgfSwKCiAgLyoqCiAgICBSZWdpc3RlciBhIGNhbGxi
        YWNrIHRvIGJlIGludm9rZWQgd2hlbiB0aGUgcGF0aCBjaGFuZ2VzLiBUaGVz
        ZQogICAgY2FsbGJhY2tzIHdpbGwgZXhlY3V0ZSB3aGVuIHRoZSB1c2VyIHBy
        ZXNzZXMgdGhlIGJhY2sgb3IgZm9yd2FyZAogICAgYnV0dG9uLCBidXQgbm90
        IGFmdGVyIGBzZXRVUkxgIGlzIGludm9rZWQuCgogICAgQHByaXZhdGUKICAg
        IEBtZXRob2Qgb25VcGRhdGVVUkwKICAgIEBwYXJhbSBjYWxsYmFjayB7RnVu
        Y3Rpb259CiAgKi8KICBvblVwZGF0ZVVSTDogZnVuY3Rpb24oY2FsbGJhY2sp
        IHsKICAgIHRoaXMudXBkYXRlQ2FsbGJhY2sgPSBjYWxsYmFjazsKICB9LAoK
        ICAvKioKICAgIFNldHMgdGhlIHBhdGggYW5kIGNhbGxzIHRoZSBgdXBkYXRl
        VVJMYCBjYWxsYmFjay4KCiAgICBAcHJpdmF0ZQogICAgQG1ldGhvZCBoYW5k
        bGVVUkwKICAgIEBwYXJhbSBjYWxsYmFjayB7RnVuY3Rpb259CiAgKi8KICBo
        YW5kbGVVUkw6IGZ1bmN0aW9uKHVybCkgewogICAgc2V0KHRoaXMsICdwYXRo
        JywgdXJsKTsKICAgIHRoaXMudXBkYXRlQ2FsbGJhY2sodXJsKTsKICB9LAoK
        ICAvKioKICAgIEdpdmVuIGEgVVJMLCBmb3JtYXRzIGl0IHRvIGJlIHBsYWNl
        ZCBpbnRvIHRoZSBwYWdlIGFzIHBhcnQKICAgIG9mIGFuIGVsZW1lbnQncyBg
        aHJlZmAgYXR0cmlidXRlLgoKICAgIFRoaXMgaXMgdXNlZCwgZm9yIGV4YW1w
        bGUsIHdoZW4gdXNpbmcgdGhlIHt7YWN0aW9ufX0gaGVscGVyCiAgICB0byBn
        ZW5lcmF0ZSBhIFVSTCBiYXNlZCBvbiBhbiBldmVudC4KCiAgICBAcHJpdmF0
        ZQogICAgQG1ldGhvZCBmb3JtYXRVUkwKICAgIEBwYXJhbSB1cmwge1N0cmlu
        Z30KICAgIEByZXR1cm4ge1N0cmluZ30gdXJsCiAgKi8KICBmb3JtYXRVUkw6
        IGZ1bmN0aW9uKHVybCkgewogICAgLy8gVGhlIHJldHVybiB2YWx1ZSBpcyBu
        b3Qgb3Zlcmx5IG1lYW5pbmdmdWwsIGJ1dCB3ZSBkbyBub3Qgd2FudCB0byB0
        aHJvdwogICAgLy8gZXJyb3JzIHdoZW4gdGVzdCBjb2RlIHJlbmRlcnMgdGVt
        cGxhdGVzIGNvbnRhaW5pbmcge3thY3Rpb24gaHJlZj10cnVlfX0KICAgIC8v
        IGhlbHBlcnMuCiAgICByZXR1cm4gdXJsOwogIH0KfSk7Cgp9KSgpOwoKCgoo
        ZnVuY3Rpb24oKSB7Ci8qKgpAbW9kdWxlIGVtYmVyCkBzdWJtb2R1bGUgZW1i
        ZXItcm91dGluZwoqLwoKdmFyIGdldCA9IEVtYmVyLmdldCwgc2V0ID0gRW1i
        ZXIuc2V0LAogICAgZ2V0SGFzaCA9IEVtYmVyLkxvY2F0aW9uLmdldEhhc2g7
        CgovKioKICBgRW1iZXIuSGFzaExvY2F0aW9uYCBpbXBsZW1lbnRzIHRoZSBs
        b2NhdGlvbiBBUEkgdXNpbmcgdGhlIGJyb3dzZXIncwogIGhhc2guIEF0IHBy
        ZXNlbnQsIGl0IHJlbGllcyBvbiBhIGBoYXNoY2hhbmdlYCBldmVudCBleGlz
        dGluZyBpbiB0aGUKICBicm93c2VyLgoKICBAY2xhc3MgSGFzaExvY2F0aW9u
        CiAgQG5hbWVzcGFjZSBFbWJlcgogIEBleHRlbmRzIEVtYmVyLk9iamVjdAoq
        LwpFbWJlci5IYXNoTG9jYXRpb24gPSBFbWJlci5PYmplY3QuZXh0ZW5kKHsK
        ICBpbXBsZW1lbnRhdGlvbjogJ2hhc2gnLAoKICBpbml0OiBmdW5jdGlvbigp
        IHsKICAgIHNldCh0aGlzLCAnbG9jYXRpb24nLCBnZXQodGhpcywgJ2xvY2F0
        aW9uJykgfHwgd2luZG93LmxvY2F0aW9uKTsKICB9LAoKICAvKioKICAgIFJl
        dHVybnMgdGhlIGN1cnJlbnQgYGxvY2F0aW9uLmhhc2hgLCBtaW51cyB0aGUg
        JyMnIGF0IHRoZSBmcm9udC4KCiAgICBAcHJpdmF0ZQogICAgQG1ldGhvZCBn
        ZXRVUkwKICAqLwogIGdldFVSTDogZnVuY3Rpb24oKSB7CiAgICByZXR1cm4g
        Z2V0SGFzaCgpLnN1YnN0cigxKTsKICB9LAoKICAvKioKICAgIFNldCB0aGUg
        YGxvY2F0aW9uLmhhc2hgIGFuZCByZW1lbWJlcnMgd2hhdCB3YXMgc2V0LiBU
        aGlzIHByZXZlbnRzCiAgICBgb25VcGRhdGVVUkxgIGNhbGxiYWNrcyBmcm9t
        IHRyaWdnZXJpbmcgd2hlbiB0aGUgaGFzaCB3YXMgc2V0IGJ5CiAgICBgSGFz
        aExvY2F0aW9uYC4KCiAgICBAcHJpdmF0ZQogICAgQG1ldGhvZCBzZXRVUkwK
        ICAgIEBwYXJhbSBwYXRoIHtTdHJpbmd9CiAgKi8KICBzZXRVUkw6IGZ1bmN0
        aW9uKHBhdGgpIHsKICAgIGdldCh0aGlzLCAnbG9jYXRpb24nKS5oYXNoID0g
        cGF0aDsKICAgIHNldCh0aGlzLCAnbGFzdFNldFVSTCcsIHBhdGgpOwogIH0s
        CgogIC8qKgogICAgVXNlcyBsb2NhdGlvbi5yZXBsYWNlIHRvIHVwZGF0ZSB0
        aGUgdXJsIHdpdGhvdXQgYSBwYWdlIHJlbG9hZAogICAgb3IgaGlzdG9yeSBt
        b2RpZmljYXRpb24uCgogICAgQHByaXZhdGUKICAgIEBtZXRob2QgcmVwbGFj
        ZVVSTAogICAgQHBhcmFtIHBhdGgge1N0cmluZ30KICAqLwogIHJlcGxhY2VV
        Ukw6IGZ1bmN0aW9uKHBhdGgpIHsKICAgIGdldCh0aGlzLCAnbG9jYXRpb24n
        KS5yZXBsYWNlKCcjJyArIHBhdGgpOwogICAgc2V0KHRoaXMsICdsYXN0U2V0
        VVJMJywgcGF0aCk7CiAgfSwKCiAgLyoqCiAgICBSZWdpc3RlciBhIGNhbGxi
        YWNrIHRvIGJlIGludm9rZWQgd2hlbiB0aGUgaGFzaCBjaGFuZ2VzLiBUaGVz
        ZQogICAgY2FsbGJhY2tzIHdpbGwgZXhlY3V0ZSB3aGVuIHRoZSB1c2VyIHBy
        ZXNzZXMgdGhlIGJhY2sgb3IgZm9yd2FyZAogICAgYnV0dG9uLCBidXQgbm90
        IGFmdGVyIGBzZXRVUkxgIGlzIGludm9rZWQuCgogICAgQHByaXZhdGUKICAg
        IEBtZXRob2Qgb25VcGRhdGVVUkwKICAgIEBwYXJhbSBjYWxsYmFjayB7RnVu
        Y3Rpb259CiAgKi8KICBvblVwZGF0ZVVSTDogZnVuY3Rpb24oY2FsbGJhY2sp
        IHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHZhciBndWlkID0gRW1iZXIu
        Z3VpZEZvcih0aGlzKTsKCiAgICBFbWJlci4kKHdpbmRvdykub24oJ2hhc2hj
        aGFuZ2UuZW1iZXItbG9jYXRpb24tJytndWlkLCBmdW5jdGlvbigpIHsKICAg
        ICAgRW1iZXIucnVuKGZ1bmN0aW9uKCkgewogICAgICAgIHZhciBwYXRoID0g
        c2VsZi5nZXRVUkwoKTsKICAgICAgICBpZiAoZ2V0KHNlbGYsICdsYXN0U2V0
        VVJMJykgPT09IHBhdGgpIHsgcmV0dXJuOyB9CgogICAgICAgIHNldChzZWxm
        LCAnbGFzdFNldFVSTCcsIG51bGwpOwoKICAgICAgICBjYWxsYmFjayhwYXRo
        KTsKICAgICAgfSk7CiAgICB9KTsKICB9LAoKICAvKioKICAgIEdpdmVuIGEg
        VVJMLCBmb3JtYXRzIGl0IHRvIGJlIHBsYWNlZCBpbnRvIHRoZSBwYWdlIGFz
        IHBhcnQKICAgIG9mIGFuIGVsZW1lbnQncyBgaHJlZmAgYXR0cmlidXRlLgoK
        ICAgIFRoaXMgaXMgdXNlZCwgZm9yIGV4YW1wbGUsIHdoZW4gdXNpbmcgdGhl
        IHt7YWN0aW9ufX0gaGVscGVyCiAgICB0byBnZW5lcmF0ZSBhIFVSTCBiYXNl
        ZCBvbiBhbiBldmVudC4KCiAgICBAcHJpdmF0ZQogICAgQG1ldGhvZCBmb3Jt
        YXRVUkwKICAgIEBwYXJhbSB1cmwge1N0cmluZ30KICAqLwogIGZvcm1hdFVS
        TDogZnVuY3Rpb24odXJsKSB7CiAgICByZXR1cm4gJyMnK3VybDsKICB9LAoK
        ICAvKioKICAgIENsZWFucyB1cCB0aGUgSGFzaExvY2F0aW9uIGV2ZW50IGxp
        c3RlbmVyLgoKICAgIEBwcml2YXRlCiAgICBAbWV0aG9kIHdpbGxEZXN0cm95
        CiAgKi8KICB3aWxsRGVzdHJveTogZnVuY3Rpb24oKSB7CiAgICB2YXIgZ3Vp
        ZCA9IEVtYmVyLmd1aWRGb3IodGhpcyk7CgogICAgRW1iZXIuJCh3aW5kb3cp
        Lm9mZignaGFzaGNoYW5nZS5lbWJlci1sb2NhdGlvbi0nK2d1aWQpOwogIH0K
        fSk7Cgp9KSgpOwoKCgooZnVuY3Rpb24oKSB7Ci8qKgpAbW9kdWxlIGVtYmVy
        CkBzdWJtb2R1bGUgZW1iZXItcm91dGluZwoqLwoKdmFyIGdldCA9IEVtYmVy
        LmdldCwgc2V0ID0gRW1iZXIuc2V0Owp2YXIgcG9wc3RhdGVGaXJlZCA9IGZh
        bHNlOwp2YXIgc3VwcG9ydHNIaXN0b3J5U3RhdGUgPSB3aW5kb3cuaGlzdG9y
        eSAmJiAnc3RhdGUnIGluIHdpbmRvdy5oaXN0b3J5OwoKLyoqCiAgRW1iZXIu
        SGlzdG9yeUxvY2F0aW9uIGltcGxlbWVudHMgdGhlIGxvY2F0aW9uIEFQSSB1
        c2luZyB0aGUgYnJvd3NlcidzCiAgaGlzdG9yeS5wdXNoU3RhdGUgQVBJLgoK
        ICBAY2xhc3MgSGlzdG9yeUxvY2F0aW9uCiAgQG5hbWVzcGFjZSBFbWJlcgog
        IEBleHRlbmRzIEVtYmVyLk9iamVjdAoqLwpFbWJlci5IaXN0b3J5TG9jYXRp
        b24gPSBFbWJlci5PYmplY3QuZXh0ZW5kKHsKICBpbXBsZW1lbnRhdGlvbjog
        J2hpc3RvcnknLAoKICBpbml0OiBmdW5jdGlvbigpIHsKICAgIHNldCh0aGlz
        LCAnbG9jYXRpb24nLCBnZXQodGhpcywgJ2xvY2F0aW9uJykgfHwgd2luZG93
        LmxvY2F0aW9uKTsKICAgIHNldCh0aGlzLCAnYmFzZVVSTCcsIEVtYmVyLiQo
        J2Jhc2UnKS5hdHRyKCdocmVmJykgfHwgJycpOwogIH0sCgogIC8qKgogICAg
        VXNlZCB0byBzZXQgc3RhdGUgb24gZmlyc3QgY2FsbCB0byBzZXRVUkwKCiAg
        ICBAcHJpdmF0ZQogICAgQG1ldGhvZCBpbml0U3RhdGUKICAqLwogIGluaXRT
        dGF0ZTogZnVuY3Rpb24oKSB7CiAgICBzZXQodGhpcywgJ2hpc3RvcnknLCBn
        ZXQodGhpcywgJ2hpc3RvcnknKSB8fCB3aW5kb3cuaGlzdG9yeSk7CiAgICB0
        aGlzLnJlcGxhY2VTdGF0ZSh0aGlzLmZvcm1hdFVSTCh0aGlzLmdldFVSTCgp
        KSk7CiAgfSwKCiAgLyoqCiAgICBXaWxsIGJlIHByZS1wZW5kZWQgdG8gcGF0
        aCB1cG9uIHN0YXRlIGNoYW5nZQoKICAgIEBwcm9wZXJ0eSByb290VVJMCiAg
        ICBAZGVmYXVsdCAnLycKICAqLwogIHJvb3RVUkw6ICcvJywKCiAgLyoqCiAg
        ICBSZXR1cm5zIHRoZSBjdXJyZW50IGBsb2NhdGlvbi5wYXRobmFtZWAgd2l0
        aG91dCBgcm9vdFVSTGAuCgogICAgQHByaXZhdGUKICAgIEBtZXRob2QgZ2V0
        VVJMCiAgICBAcmV0dXJuIHVybCB7U3RyaW5nfQogICovCiAgZ2V0VVJMOiBm
        dW5jdGlvbigpIHsKICAgIHZhciByb290VVJMID0gZ2V0KHRoaXMsICdyb290
        VVJMJyksCiAgICAgICAgbG9jYXRpb24gPSBnZXQodGhpcywgJ2xvY2F0aW9u
        JyksCiAgICAgICAgcGF0aCA9IGxvY2F0aW9uLnBhdGhuYW1lLAogICAgICAg
        IGJhc2VVUkwgPSBnZXQodGhpcywgJ2Jhc2VVUkwnKTsKCiAgICByb290VVJM
        ID0gcm9vdFVSTC5yZXBsYWNlKC9cLyQvLCAnJyk7CiAgICBiYXNlVVJMID0g
        YmFzZVVSTC5yZXBsYWNlKC9cLyQvLCAnJyk7CiAgICB2YXIgdXJsID0gcGF0
        aC5yZXBsYWNlKGJhc2VVUkwsICcnKS5yZXBsYWNlKHJvb3RVUkwsICcnKTsK
        CiAgICAKICAgIHJldHVybiB1cmw7CiAgfSwKCiAgLyoqCiAgICBVc2VzIGBo
        aXN0b3J5LnB1c2hTdGF0ZWAgdG8gdXBkYXRlIHRoZSB1cmwgd2l0aG91dCBh
        IHBhZ2UgcmVsb2FkLgoKICAgIEBwcml2YXRlCiAgICBAbWV0aG9kIHNldFVS
        TAogICAgQHBhcmFtIHBhdGgge1N0cmluZ30KICAqLwogIHNldFVSTDogZnVu
        Y3Rpb24ocGF0aCkgewogICAgdmFyIHN0YXRlID0gdGhpcy5nZXRTdGF0ZSgp
        OwogICAgcGF0aCA9IHRoaXMuZm9ybWF0VVJMKHBhdGgpOwoKICAgIGlmIChz
        dGF0ZSAmJiBzdGF0ZS5wYXRoICE9PSBwYXRoKSB7CiAgICAgIHRoaXMucHVz
        aFN0YXRlKHBhdGgpOwogICAgfQogIH0sCgogIC8qKgogICAgVXNlcyBgaGlz
        dG9yeS5yZXBsYWNlU3RhdGVgIHRvIHVwZGF0ZSB0aGUgdXJsIHdpdGhvdXQg
        YSBwYWdlIHJlbG9hZAogICAgb3IgaGlzdG9yeSBtb2RpZmljYXRpb24uCgog
        ICAgQHByaXZhdGUKICAgIEBtZXRob2QgcmVwbGFjZVVSTAogICAgQHBhcmFt
        IHBhdGgge1N0cmluZ30KICAqLwogIHJlcGxhY2VVUkw6IGZ1bmN0aW9uKHBh
        dGgpIHsKICAgIHZhciBzdGF0ZSA9IHRoaXMuZ2V0U3RhdGUoKTsKICAgIHBh
        dGggPSB0aGlzLmZvcm1hdFVSTChwYXRoKTsKCiAgICBpZiAoc3RhdGUgJiYg
        c3RhdGUucGF0aCAhPT0gcGF0aCkgewogICAgICB0aGlzLnJlcGxhY2VTdGF0
        ZShwYXRoKTsKICAgIH0KICB9LAoKICAvKioKICAgR2V0IHRoZSBjdXJyZW50
        IGBoaXN0b3J5LnN0YXRlYAogICBQb2x5ZmlsbCBjaGVja3MgZm9yIG5hdGl2
        ZSBicm93c2VyIHN1cHBvcnQgYW5kIGZhbGxzIGJhY2sgdG8gcmV0cmlldmlu
        ZwogICBmcm9tIGEgcHJpdmF0ZSBfaGlzdG9yeVN0YXRlIHZhcmlhYmxlCgog
        ICBAcHJpdmF0ZQogICBAbWV0aG9kIGdldFN0YXRlCiAgIEByZXR1cm4gc3Rh
        dGUge09iamVjdH0KICAqLwogIGdldFN0YXRlOiBmdW5jdGlvbigpIHsKICAg
        IHJldHVybiBzdXBwb3J0c0hpc3RvcnlTdGF0ZSA/IGdldCh0aGlzLCAnaGlz
        dG9yeScpLnN0YXRlIDogdGhpcy5faGlzdG9yeVN0YXRlOwogIH0sCgogIC8q
        KgogICBQdXNoZXMgYSBuZXcgc3RhdGUuCgogICBAcHJpdmF0ZQogICBAbWV0
        aG9kIHB1c2hTdGF0ZQogICBAcGFyYW0gcGF0aCB7U3RyaW5nfQogICovCiAg
        cHVzaFN0YXRlOiBmdW5jdGlvbihwYXRoKSB7CiAgICB2YXIgc3RhdGUgPSB7
        IHBhdGg6IHBhdGggfTsKCiAgICBnZXQodGhpcywgJ2hpc3RvcnknKS5wdXNo
        U3RhdGUoc3RhdGUsIG51bGwsIHBhdGgpOwoKICAgIC8vIHN0b3JlIHN0YXRl
        IGlmIGJyb3dzZXIgZG9lc24ndCBzdXBwb3J0IGBoaXN0b3J5LnN0YXRlYAog
        ICAgaWYgKCFzdXBwb3J0c0hpc3RvcnlTdGF0ZSkgewogICAgICB0aGlzLl9o
        aXN0b3J5U3RhdGUgPSBzdGF0ZTsKICAgIH0KCiAgICAvLyB1c2VkIGZvciB3
        ZWJraXQgd29ya2Fyb3VuZAogICAgdGhpcy5fcHJldmlvdXNVUkwgPSB0aGlz
        LmdldFVSTCgpOwogIH0sCgogIC8qKgogICBSZXBsYWNlcyB0aGUgY3VycmVu
        dCBzdGF0ZS4KCiAgIEBwcml2YXRlCiAgIEBtZXRob2QgcmVwbGFjZVN0YXRl
        CiAgIEBwYXJhbSBwYXRoIHtTdHJpbmd9CiAgKi8KICByZXBsYWNlU3RhdGU6
        IGZ1bmN0aW9uKHBhdGgpIHsKICAgIHZhciBzdGF0ZSA9IHsgcGF0aDogcGF0
        aCB9OwoKICAgIGdldCh0aGlzLCAnaGlzdG9yeScpLnJlcGxhY2VTdGF0ZShz
        dGF0ZSwgbnVsbCwgcGF0aCk7CgogICAgLy8gc3RvcmUgc3RhdGUgaWYgYnJv
        d3NlciBkb2Vzbid0IHN1cHBvcnQgYGhpc3Rvcnkuc3RhdGVgCiAgICBpZiAo
        IXN1cHBvcnRzSGlzdG9yeVN0YXRlKSB7CiAgICAgIHRoaXMuX2hpc3RvcnlT
        dGF0ZSA9IHN0YXRlOwogICAgfQoKICAgIC8vIHVzZWQgZm9yIHdlYmtpdCB3
        b3JrYXJvdW5kCiAgICB0aGlzLl9wcmV2aW91c1VSTCA9IHRoaXMuZ2V0VVJM
        KCk7CiAgfSwKCiAgLyoqCiAgICBSZWdpc3RlciBhIGNhbGxiYWNrIHRvIGJl
        IGludm9rZWQgd2hlbmV2ZXIgdGhlIGJyb3dzZXIKICAgIGhpc3RvcnkgY2hh
        bmdlcywgaW5jbHVkaW5nIHVzaW5nIGZvcndhcmQgYW5kIGJhY2sgYnV0dG9u
        cy4KCiAgICBAcHJpdmF0ZQogICAgQG1ldGhvZCBvblVwZGF0ZVVSTAogICAg
        QHBhcmFtIGNhbGxiYWNrIHtGdW5jdGlvbn0KICAqLwogIG9uVXBkYXRlVVJM
        OiBmdW5jdGlvbihjYWxsYmFjaykgewogICAgdmFyIGd1aWQgPSBFbWJlci5n
        dWlkRm9yKHRoaXMpLAogICAgICAgIHNlbGYgPSB0aGlzOwoKICAgIEVtYmVy
        LiQod2luZG93KS5vbigncG9wc3RhdGUuZW1iZXItbG9jYXRpb24tJytndWlk
        LCBmdW5jdGlvbihlKSB7CiAgICAgIC8vIElnbm9yZSBpbml0aWFsIHBhZ2Ug
        bG9hZCBwb3BzdGF0ZSBldmVudCBpbiBDaHJvbWUKICAgICAgaWYgKCFwb3Bz
        dGF0ZUZpcmVkKSB7CiAgICAgICAgcG9wc3RhdGVGaXJlZCA9IHRydWU7CiAg
        ICAgICAgaWYgKHNlbGYuZ2V0VVJMKCkgPT09IHNlbGYuX3ByZXZpb3VzVVJM
        KSB7IHJldHVybjsgfQogICAgICB9CiAgICAgIGNhbGxiYWNrKHNlbGYuZ2V0
        VVJMKCkpOwogICAgfSk7CiAgfSwKCiAgLyoqCiAgICBVc2VkIHdoZW4gdXNp
        bmcgYHt7YWN0aW9ufX1gIGhlbHBlci4gIFRoZSB1cmwgaXMgYWx3YXlzIGFw
        cGVuZGVkIHRvIHRoZSByb290VVJMLgoKICAgIEBwcml2YXRlCiAgICBAbWV0
        aG9kIGZvcm1hdFVSTAogICAgQHBhcmFtIHVybCB7U3RyaW5nfQogICAgQHJl
        dHVybiBmb3JtYXR0ZWQgdXJsIHtTdHJpbmd9CiAgKi8KICBmb3JtYXRVUkw6
        IGZ1bmN0aW9uKHVybCkgewogICAgdmFyIHJvb3RVUkwgPSBnZXQodGhpcywg
        J3Jvb3RVUkwnKSwKICAgICAgICBiYXNlVVJMID0gZ2V0KHRoaXMsICdiYXNl
        VVJMJyk7CgogICAgaWYgKHVybCAhPT0gJycpIHsKICAgICAgcm9vdFVSTCA9
        IHJvb3RVUkwucmVwbGFjZSgvXC8kLywgJycpOwogICAgICBiYXNlVVJMID0g
        YmFzZVVSTC5yZXBsYWNlKC9cLyQvLCAnJyk7CiAgICB9IGVsc2UgaWYoYmFz
        ZVVSTC5tYXRjaCgvXlwvLykgJiYgcm9vdFVSTC5tYXRjaCgvXlwvLykpIHsK
        ICAgICAgYmFzZVVSTCA9IGJhc2VVUkwucmVwbGFjZSgvXC8kLywgJycpOwog
        ICAgfQoKICAgIHJldHVybiBiYXNlVVJMICsgcm9vdFVSTCArIHVybDsKICB9
        LAoKICAvKioKICAgIENsZWFucyB1cCB0aGUgSGlzdG9yeUxvY2F0aW9uIGV2
        ZW50IGxpc3RlbmVyLgoKICAgIEBwcml2YXRlCiAgICBAbWV0aG9kIHdpbGxE
        ZXN0cm95CiAgKi8KICB3aWxsRGVzdHJveTogZnVuY3Rpb24oKSB7CiAgICB2
        YXIgZ3VpZCA9IEVtYmVyLmd1aWRGb3IodGhpcyk7CgogICAgRW1iZXIuJCh3
        aW5kb3cpLm9mZigncG9wc3RhdGUuZW1iZXItbG9jYXRpb24tJytndWlkKTsK
        ICB9Cn0pOwoKfSkoKTsKCgoKKGZ1bmN0aW9uKCkgewoKfSkoKTsKCgoKKGZ1
        bmN0aW9uKCkgewovKioKRW1iZXIgUm91dGluZwoKQG1vZHVsZSBlbWJlcgpA
        c3VibW9kdWxlIGVtYmVyLXJvdXRpbmcKQHJlcXVpcmVzIGVtYmVyLXZpZXdz
        CiovCgp9KSgpOwoKKGZ1bmN0aW9uKCkgewpmdW5jdGlvbiB2aXNpdCh2ZXJ0
        ZXgsIGZuLCB2aXNpdGVkLCBwYXRoKSB7CiAgdmFyIG5hbWUgPSB2ZXJ0ZXgu
        bmFtZSwKICAgIHZlcnRpY2VzID0gdmVydGV4LmluY29taW5nLAogICAgbmFt
        ZXMgPSB2ZXJ0ZXguaW5jb21pbmdOYW1lcywKICAgIGxlbiA9IG5hbWVzLmxl
        bmd0aCwKICAgIGk7CiAgaWYgKCF2aXNpdGVkKSB7CiAgICB2aXNpdGVkID0g
        e307CiAgfQogIGlmICghcGF0aCkgewogICAgcGF0aCA9IFtdOwogIH0KICBp
        ZiAodmlzaXRlZC5oYXNPd25Qcm9wZXJ0eShuYW1lKSkgewogICAgcmV0dXJu
        OwogIH0KICBwYXRoLnB1c2gobmFtZSk7CiAgdmlzaXRlZFtuYW1lXSA9IHRy
        dWU7CiAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSsrKSB7CiAgICB2aXNpdCh2
        ZXJ0aWNlc1tuYW1lc1tpXV0sIGZuLCB2aXNpdGVkLCBwYXRoKTsKICB9CiAg
        Zm4odmVydGV4LCBwYXRoKTsKICBwYXRoLnBvcCgpOwp9CgpmdW5jdGlvbiBE
        QUcoKSB7CiAgdGhpcy5uYW1lcyA9IFtdOwogIHRoaXMudmVydGljZXMgPSB7
        fTsKfQoKREFHLnByb3RvdHlwZS5hZGQgPSBmdW5jdGlvbihuYW1lKSB7CiAg
        aWYgKCFuYW1lKSB7IHJldHVybjsgfQogIGlmICh0aGlzLnZlcnRpY2VzLmhh
        c093blByb3BlcnR5KG5hbWUpKSB7CiAgICByZXR1cm4gdGhpcy52ZXJ0aWNl
        c1tuYW1lXTsKICB9CiAgdmFyIHZlcnRleCA9IHsKICAgIG5hbWU6IG5hbWUs
        IGluY29taW5nOiB7fSwgaW5jb21pbmdOYW1lczogW10sIGhhc091dGdvaW5n
        OiBmYWxzZSwgdmFsdWU6IG51bGwKICB9OwogIHRoaXMudmVydGljZXNbbmFt
        ZV0gPSB2ZXJ0ZXg7CiAgdGhpcy5uYW1lcy5wdXNoKG5hbWUpOwogIHJldHVy
        biB2ZXJ0ZXg7Cn07CgpEQUcucHJvdG90eXBlLm1hcCA9IGZ1bmN0aW9uKG5h
        bWUsIHZhbHVlKSB7CiAgdGhpcy5hZGQobmFtZSkudmFsdWUgPSB2YWx1ZTsK
        fTsKCkRBRy5wcm90b3R5cGUuYWRkRWRnZSA9IGZ1bmN0aW9uKGZyb21OYW1l
        LCB0b05hbWUpIHsKICBpZiAoIWZyb21OYW1lIHx8ICF0b05hbWUgfHwgZnJv
        bU5hbWUgPT09IHRvTmFtZSkgewogICAgcmV0dXJuOwogIH0KICB2YXIgZnJv
        bSA9IHRoaXMuYWRkKGZyb21OYW1lKSwgdG8gPSB0aGlzLmFkZCh0b05hbWUp
        OwogIGlmICh0by5pbmNvbWluZy5oYXNPd25Qcm9wZXJ0eShmcm9tTmFtZSkp
        IHsKICAgIHJldHVybjsKICB9CiAgZnVuY3Rpb24gY2hlY2tDeWNsZSh2ZXJ0
        ZXgsIHBhdGgpIHsKICAgIGlmICh2ZXJ0ZXgubmFtZSA9PT0gdG9OYW1lKSB7
        CiAgICAgIHRocm93IG5ldyBFbWJlci5FcnJvcigiY3ljbGUgZGV0ZWN0ZWQ6
        ICIgKyB0b05hbWUgKyAiIDwtICIgKyBwYXRoLmpvaW4oIiA8LSAiKSk7CiAg
        ICB9CiAgfQogIHZpc2l0KGZyb20sIGNoZWNrQ3ljbGUpOwogIGZyb20uaGFz
        T3V0Z29pbmcgPSB0cnVlOwogIHRvLmluY29taW5nW2Zyb21OYW1lXSA9IGZy
        b207CiAgdG8uaW5jb21pbmdOYW1lcy5wdXNoKGZyb21OYW1lKTsKfTsKCkRB
        Ry5wcm90b3R5cGUudG9wc29ydCA9IGZ1bmN0aW9uKGZuKSB7CiAgdmFyIHZp
        c2l0ZWQgPSB7fSwKICAgIHZlcnRpY2VzID0gdGhpcy52ZXJ0aWNlcywKICAg
        IG5hbWVzID0gdGhpcy5uYW1lcywKICAgIGxlbiA9IG5hbWVzLmxlbmd0aCwK
        ICAgIGksIHZlcnRleDsKICBmb3IgKGkgPSAwOyBpIDwgbGVuOyBpKyspIHsK
        ICAgIHZlcnRleCA9IHZlcnRpY2VzW25hbWVzW2ldXTsKICAgIGlmICghdmVy
        dGV4Lmhhc091dGdvaW5nKSB7CiAgICAgIHZpc2l0KHZlcnRleCwgZm4sIHZp
        c2l0ZWQpOwogICAgfQogIH0KfTsKCkRBRy5wcm90b3R5cGUuYWRkRWRnZXMg
        PSBmdW5jdGlvbihuYW1lLCB2YWx1ZSwgYmVmb3JlLCBhZnRlcikgewogIHZh
        ciBpOwogIHRoaXMubWFwKG5hbWUsIHZhbHVlKTsKICBpZiAoYmVmb3JlKSB7
        CiAgICBpZiAodHlwZW9mIGJlZm9yZSA9PT0gJ3N0cmluZycpIHsKICAgICAg
        dGhpcy5hZGRFZGdlKG5hbWUsIGJlZm9yZSk7CiAgICB9IGVsc2UgewogICAg
        ICBmb3IgKGkgPSAwOyBpIDwgYmVmb3JlLmxlbmd0aDsgaSsrKSB7CiAgICAg
        ICAgdGhpcy5hZGRFZGdlKG5hbWUsIGJlZm9yZVtpXSk7CiAgICAgIH0KICAg
        IH0KICB9CiAgaWYgKGFmdGVyKSB7CiAgICBpZiAodHlwZW9mIGFmdGVyID09
        PSAnc3RyaW5nJykgewogICAgICB0aGlzLmFkZEVkZ2UoYWZ0ZXIsIG5hbWUp
        OwogICAgfSBlbHNlIHsKICAgICAgZm9yIChpID0gMDsgaSA8IGFmdGVyLmxl
        bmd0aDsgaSsrKSB7CiAgICAgICAgdGhpcy5hZGRFZGdlKGFmdGVyW2ldLCBu
        YW1lKTsKICAgICAgfQogICAgfQogIH0KfTsKCkVtYmVyLkRBRyA9IERBRzsK
        Cn0pKCk7CgoKCihmdW5jdGlvbigpIHsKLyoqCkBtb2R1bGUgZW1iZXIKQHN1
        Ym1vZHVsZSBlbWJlci1hcHBsaWNhdGlvbgoqLwoKdmFyIGdldCA9IEVtYmVy
        LmdldCwKICAgIGNsYXNzaWZ5ID0gRW1iZXIuU3RyaW5nLmNsYXNzaWZ5LAog
        ICAgY2FwaXRhbGl6ZSA9IEVtYmVyLlN0cmluZy5jYXBpdGFsaXplLAogICAg
        ZGVjYW1lbGl6ZSA9IEVtYmVyLlN0cmluZy5kZWNhbWVsaXplOwoKLyoqCiAg
        VGhlIERlZmF1bHRSZXNvbHZlciBkZWZpbmVzIHRoZSBkZWZhdWx0IGxvb2t1
        cCBydWxlcyB0byByZXNvbHZlCiAgY29udGFpbmVyIGxvb2t1cHMgYmVmb3Jl
        IGNvbnN1bHRpbmcgdGhlIGNvbnRhaW5lciBmb3IgcmVnaXN0ZXJlZAogIGl0
        ZW1zOgoKKiB0ZW1wbGF0ZXMgYXJlIGxvb2tlZCB1cCBvbiBgRW1iZXIuVEVN
        UExBVEVTYAoqIG90aGVyIG5hbWVzIGFyZSBsb29rZWQgdXAgb24gdGhlIGFw
        cGxpY2F0aW9uIGFmdGVyIGNvbnZlcnRpbmcKICB0aGUgbmFtZS4gRm9yIGV4
        YW1wbGUsIGBjb250cm9sbGVyOnBvc3RgIGxvb2tzIHVwCiAgYEFwcC5Qb3N0
        Q29udHJvbGxlcmAgYnkgZGVmYXVsdC4KKiB0aGVyZSBhcmUgc29tZSBudWFu
        Y2VzIChzZWUgZXhhbXBsZXMgYmVsb3cpCgogICMjIyBIb3cgUmVzb2x2aW5n
        IFdvcmtzCgogIFRoZSBjb250YWluZXIgY2FsbHMgdGhpcyBvYmplY3QncyBg
        cmVzb2x2ZWAgbWV0aG9kIHdpdGggdGhlCiAgYGZ1bGxOYW1lYCBhcmd1bWVu
        dC4KCiAgSXQgZmlyc3QgcGFyc2VzIHRoZSBmdWxsTmFtZSBpbnRvIGFuIG9i
        amVjdCB1c2luZyBgcGFyc2VOYW1lYC4KCiAgVGhlbiBpdCBjaGVja3MgZm9y
        IHRoZSBwcmVzZW5jZSBvZiBhIHR5cGUtc3BlY2lmaWMgaW5zdGFuY2UKICBt
        ZXRob2Qgb2YgdGhlIGZvcm0gYHJlc29sdmVbVHlwZV1gIGFuZCBjYWxscyBp
        dCBpZiBpdCBleGlzdHMuCiAgRm9yIGV4YW1wbGUgaWYgaXQgd2FzIHJlc29s
        dmluZyAndGVtcGxhdGU6cG9zdCcsIGl0IHdvdWxkIGNhbGwKICB0aGUgYHJl
        c29sdmVUZW1wbGF0ZWAgbWV0aG9kLgoKICBJdHMgbGFzdCByZXNvcnQgaXMg
        dG8gY2FsbCB0aGUgYHJlc29sdmVPdGhlcmAgbWV0aG9kLgoKICBUaGUgbWV0
        aG9kcyBvZiB0aGlzIG9iamVjdCBhcmUgZGVzaWduZWQgdG8gYmUgZWFzeSB0
        byBvdmVycmlkZQogIGluIGEgc3ViY2xhc3MuIEZvciBleGFtcGxlLCB5b3Ug
        Y291bGQgZW5oYW5jZSBob3cgYSB0ZW1wbGF0ZQogIGlzIHJlc29sdmVkIGxp
        a2Ugc286CgogIGBgYGphdmFzY3JpcHQKICBBcHAgPSBFbWJlci5BcHBsaWNh
        dGlvbi5jcmVhdGUoewogICAgUmVzb2x2ZXI6IEVtYmVyLkRlZmF1bHRSZXNv
        bHZlci5leHRlbmQoewogICAgICByZXNvbHZlVGVtcGxhdGU6IGZ1bmN0aW9u
        KHBhcnNlZE5hbWUpIHsKICAgICAgICB2YXIgcmVzb2x2ZWRUZW1wbGF0ZSA9
        IHRoaXMuX3N1cGVyKHBhcnNlZE5hbWUpOwogICAgICAgIGlmIChyZXNvbHZl
        ZFRlbXBsYXRlKSB7IHJldHVybiByZXNvbHZlZFRlbXBsYXRlOyB9CiAgICAg
        ICAgcmV0dXJuIEVtYmVyLlRFTVBMQVRFU1snbm90X2ZvdW5kJ107CiAgICAg
        IH0KICAgIH0pCiAgfSk7CiAgYGBgCgogIFNvbWUgZXhhbXBsZXMgb2YgaG93
        IG5hbWVzIGFyZSByZXNvbHZlZDoKCiAgYGBgCiAgJ3RlbXBsYXRlOnBvc3Qn
        IC8vPT4gRW1iZXIuVEVNUExBVEVTWydwb3N0J10KICAndGVtcGxhdGU6cG9z
        dHMvYnlsaW5lJyAvLz0+IEVtYmVyLlRFTVBMQVRFU1sncG9zdHMvYnlsaW5l
        J10KICAndGVtcGxhdGU6cG9zdHMuYnlsaW5lJyAvLz0+IEVtYmVyLlRFTVBM
        QVRFU1sncG9zdHMvYnlsaW5lJ10KICAndGVtcGxhdGU6YmxvZ1Bvc3QnIC8v
        PT4gRW1iZXIuVEVNUExBVEVTWydibG9nUG9zdCddCiAgICAgICAgICAgICAg
        ICAgICAgICAvLyAgIE9SCiAgICAgICAgICAgICAgICAgICAgICAvLyAgIEVt
        YmVyLlRFTVBMQVRFU1snYmxvZ19wb3N0J10KICAnY29udHJvbGxlcjpwb3N0
        JyAvLz0+IEFwcC5Qb3N0Q29udHJvbGxlcgogICdjb250cm9sbGVyOnBvc3Rz
        LmluZGV4JyAvLz0+IEFwcC5Qb3N0c0luZGV4Q29udHJvbGxlcgogICdjb250
        cm9sbGVyOmJsb2cvcG9zdCcgLy89PiBCbG9nLlBvc3RDb250cm9sbGVyCiAg
        J2NvbnRyb2xsZXI6YmFzaWMnIC8vPT4gRW1iZXIuQ29udHJvbGxlcgogICdy
        b3V0ZTpwb3N0JyAvLz0+IEFwcC5Qb3N0Um91dGUKICAncm91dGU6cG9zdHMu
        aW5kZXgnIC8vPT4gQXBwLlBvc3RzSW5kZXhSb3V0ZQogICdyb3V0ZTpibG9n
        L3Bvc3QnIC8vPT4gQmxvZy5Qb3N0Um91dGUKICAncm91dGU6YmFzaWMnIC8v
        PT4gRW1iZXIuUm91dGUKICAndmlldzpwb3N0JyAvLz0+IEFwcC5Qb3N0Vmll
        dwogICd2aWV3OnBvc3RzLmluZGV4JyAvLz0+IEFwcC5Qb3N0c0luZGV4Vmll
        dwogICd2aWV3OmJsb2cvcG9zdCcgLy89PiBCbG9nLlBvc3RWaWV3CiAgJ3Zp
        ZXc6YmFzaWMnIC8vPT4gRW1iZXIuVmlldwogICdmb286cG9zdCcgLy89PiBB
        cHAuUG9zdEZvbwogICdtb2RlbDpwb3N0JyAvLz0+IEFwcC5Qb3N0CiAgYGBg
        CgogIEBjbGFzcyBEZWZhdWx0UmVzb2x2ZXIKICBAbmFtZXNwYWNlIEVtYmVy
        CiAgQGV4dGVuZHMgRW1iZXIuT2JqZWN0CiovCkVtYmVyLkRlZmF1bHRSZXNv
        bHZlciA9IEVtYmVyLk9iamVjdC5leHRlbmQoewogIC8qKgogICAgVGhpcyB3
        aWxsIGJlIHNldCB0byB0aGUgQXBwbGljYXRpb24gaW5zdGFuY2Ugd2hlbiBp
        dCBpcwogICAgY3JlYXRlZC4KCiAgICBAcHJvcGVydHkgbmFtZXNwYWNlCiAg
        Ki8KICBuYW1lc3BhY2U6IG51bGwsCgogIG5vcm1hbGl6ZTogZnVuY3Rpb24o
        ZnVsbE5hbWUpIHsKICAgIHZhciBzcGxpdCA9IGZ1bGxOYW1lLnNwbGl0KCc6
        JywgMiksCiAgICAgICAgdHlwZSA9IHNwbGl0WzBdLAogICAgICAgIG5hbWUg
        PSBzcGxpdFsxXTsKCiAgICBFbWJlci5hc3NlcnQoIlRyaWVkIHRvIG5vcm1h
        bGl6ZSBhIGNvbnRhaW5lciBuYW1lIHdpdGhvdXQgYSBjb2xvbiAoOikgaW4g
        IiArCiAgICAgICAgICAgICAgICAgIml0LiBZb3UgcHJvYmFibHkgdHJpZWQg
        dG8gbG9va3VwIGEgbmFtZSB0aGF0IGRpZCBub3QgY29udGFpbiAiICsKICAg
        ICAgICAgICAgICAgICAiYSB0eXBlLCBhIGNvbG9uLCBhbmQgYSBuYW1lLiBB
        IHByb3BlciBsb29rdXAgbmFtZSB3b3VsZCBiZSAiICsKICAgICAgICAgICAg
        ICAgICAiYHZpZXc6cG9zdGAuIiwgc3BsaXQubGVuZ3RoID09PSAyKTsKCiAg
        ICBpZiAodHlwZSAhPT0gJ3RlbXBsYXRlJykgewogICAgICB2YXIgcmVzdWx0
        ID0gbmFtZTsKCiAgICAgIGlmIChyZXN1bHQuaW5kZXhPZignLicpID4gLTEp
        IHsKICAgICAgICByZXN1bHQgPSByZXN1bHQucmVwbGFjZSgvXC4oLikvZywg
        ZnVuY3Rpb24obSkgeyByZXR1cm4gbS5jaGFyQXQoMSkudG9VcHBlckNhc2Uo
        KTsgfSk7CiAgICAgIH0KCiAgICAgIGlmIChuYW1lLmluZGV4T2YoJ18nKSA+
        IC0xKSB7CiAgICAgICAgcmVzdWx0ID0gcmVzdWx0LnJlcGxhY2UoL18oLikv
        ZywgZnVuY3Rpb24obSkgeyByZXR1cm4gbS5jaGFyQXQoMSkudG9VcHBlckNh
        c2UoKTsgfSk7CiAgICAgIH0KCiAgICAgIHJldHVybiB0eXBlICsgJzonICsg
        cmVzdWx0OwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIGZ1bGxOYW1lOwog
        ICAgfQogIH0sCgoKICAvKioKICAgIFRoaXMgbWV0aG9kIGlzIGNhbGxlZCB2
        aWEgdGhlIGNvbnRhaW5lcidzIHJlc29sdmVyIG1ldGhvZC4KICAgIEl0IHBh
        cnNlcyB0aGUgcHJvdmlkZWQgYGZ1bGxOYW1lYCBhbmQgdGhlbiBsb29rcyB1
        cCBhbmQKICAgIHJldHVybnMgdGhlIGFwcHJvcHJpYXRlIHRlbXBsYXRlIG9y
        IGNsYXNzLgoKICAgIEBtZXRob2QgcmVzb2x2ZQogICAgQHBhcmFtIHtTdHJp
        bmd9IGZ1bGxOYW1lIHRoZSBsb29rdXAgc3RyaW5nCiAgICBAcmV0dXJuIHtP
        YmplY3R9IHRoZSByZXNvbHZlZCBmYWN0b3J5CiAgKi8KICByZXNvbHZlOiBm
        dW5jdGlvbihmdWxsTmFtZSkgewogICAgdmFyIHBhcnNlZE5hbWUgPSB0aGlz
        LnBhcnNlTmFtZShmdWxsTmFtZSksCiAgICAgICAgdHlwZVNwZWNpZmljUmVz
        b2x2ZU1ldGhvZCA9IHRoaXNbcGFyc2VkTmFtZS5yZXNvbHZlTWV0aG9kTmFt
        ZV07CgogICAgaWYgKCFwYXJzZWROYW1lLm5hbWUgfHwgIXBhcnNlZE5hbWUu
        dHlwZSkgewogICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGZ1
        bGxOYW1lOiBgIiArIGZ1bGxOYW1lICsgImAsIG11c3QgYmUgb2YgdGhlIGZv
        cm0gYHR5cGU6bmFtZWAgIik7CiAgICB9CgogICAgaWYgKHR5cGVTcGVjaWZp
        Y1Jlc29sdmVNZXRob2QpIHsKICAgICAgdmFyIHJlc29sdmVkID0gdHlwZVNw
        ZWNpZmljUmVzb2x2ZU1ldGhvZC5jYWxsKHRoaXMsIHBhcnNlZE5hbWUpOwog
        ICAgICBpZiAocmVzb2x2ZWQpIHsgcmV0dXJuIHJlc29sdmVkOyB9CiAgICB9
        CiAgICByZXR1cm4gdGhpcy5yZXNvbHZlT3RoZXIocGFyc2VkTmFtZSk7CiAg
        fSwKICAvKioKICAgIENvbnZlcnQgdGhlIHN0cmluZyBuYW1lIG9mIHRoZSBm
        b3JtICJ0eXBlOm5hbWUiIHRvCiAgICBhIEphdmFzY3JpcHQgb2JqZWN0IHdp
        dGggdGhlIHBhcnNlZCBhc3BlY3RzIG9mIHRoZSBuYW1lCiAgICBicm9rZW4g
        b3V0LgoKICAgIEBwcm90ZWN0ZWQKICAgIEBwYXJhbSB7U3RyaW5nfSBmdWxs
        TmFtZSB0aGUgbG9va3VwIHN0cmluZwogICAgQG1ldGhvZCBwYXJzZU5hbWUK
        ICAqLwogIHBhcnNlTmFtZTogZnVuY3Rpb24oZnVsbE5hbWUpIHsKICAgIHZh
        ciBuYW1lUGFydHMgPSBmdWxsTmFtZS5zcGxpdCgiOiIpLAogICAgICAgIHR5
        cGUgPSBuYW1lUGFydHNbMF0sIGZ1bGxOYW1lV2l0aG91dFR5cGUgPSBuYW1l
        UGFydHNbMV0sCiAgICAgICAgbmFtZSA9IGZ1bGxOYW1lV2l0aG91dFR5cGUs
        CiAgICAgICAgbmFtZXNwYWNlID0gZ2V0KHRoaXMsICduYW1lc3BhY2UnKSwK
        ICAgICAgICByb290ID0gbmFtZXNwYWNlOwoKICAgIGlmICh0eXBlICE9PSAn
        dGVtcGxhdGUnICYmIG5hbWUuaW5kZXhPZignLycpICE9PSAtMSkgewogICAg
        ICB2YXIgcGFydHMgPSBuYW1lLnNwbGl0KCcvJyk7CiAgICAgIG5hbWUgPSBw
        YXJ0c1twYXJ0cy5sZW5ndGggLSAxXTsKICAgICAgdmFyIG5hbWVzcGFjZU5h
        bWUgPSBjYXBpdGFsaXplKHBhcnRzLnNsaWNlKDAsIC0xKS5qb2luKCcuJykp
        OwogICAgICByb290ID0gRW1iZXIuTmFtZXNwYWNlLmJ5TmFtZShuYW1lc3Bh
        Y2VOYW1lKTsKCiAgICAgIEVtYmVyLmFzc2VydCgnWW91IGFyZSBsb29raW5n
        IGZvciBhICcgKyBuYW1lICsgJyAnICsgdHlwZSArICcgaW4gdGhlICcgKyBu
        YW1lc3BhY2VOYW1lICsgJyBuYW1lc3BhY2UsIGJ1dCB0aGUgbmFtZXNwYWNl
        IGNvdWxkIG5vdCBiZSBmb3VuZCcsIHJvb3QpOwogICAgfQoKICAgIHJldHVy
        biB7CiAgICAgIGZ1bGxOYW1lOiBmdWxsTmFtZSwKICAgICAgdHlwZTogdHlw
        ZSwKICAgICAgZnVsbE5hbWVXaXRob3V0VHlwZTogZnVsbE5hbWVXaXRob3V0
        VHlwZSwKICAgICAgbmFtZTogbmFtZSwKICAgICAgcm9vdDogcm9vdCwKICAg
        ICAgcmVzb2x2ZU1ldGhvZE5hbWU6ICJyZXNvbHZlIiArIGNsYXNzaWZ5KHR5
        cGUpCiAgICB9OwogIH0sCiAgLyoqCiAgICBMb29rIHVwIHRoZSB0ZW1wbGF0
        ZSBpbiBFbWJlci5URU1QTEFURVMKCiAgICBAcHJvdGVjdGVkCiAgICBAcGFy
        YW0ge09iamVjdH0gcGFyc2VkTmFtZSBhIHBhcnNlTmFtZSBvYmplY3Qgd2l0
        aCB0aGUgcGFyc2VkCiAgICAgIGZ1bGxOYW1lIGxvb2t1cCBzdHJpbmcKICAg
        IEBtZXRob2QgcmVzb2x2ZVRlbXBsYXRlCiAgKi8KICByZXNvbHZlVGVtcGxh
        dGU6IGZ1bmN0aW9uKHBhcnNlZE5hbWUpIHsKICAgIHZhciB0ZW1wbGF0ZU5h
        bWUgPSBwYXJzZWROYW1lLmZ1bGxOYW1lV2l0aG91dFR5cGUucmVwbGFjZSgv
        XC4vZywgJy8nKTsKCiAgICBpZiAoRW1iZXIuVEVNUExBVEVTW3RlbXBsYXRl
        TmFtZV0pIHsKICAgICAgcmV0dXJuIEVtYmVyLlRFTVBMQVRFU1t0ZW1wbGF0
        ZU5hbWVdOwogICAgfQoKICAgIHRlbXBsYXRlTmFtZSA9IGRlY2FtZWxpemUo
        dGVtcGxhdGVOYW1lKTsKICAgIGlmIChFbWJlci5URU1QTEFURVNbdGVtcGxh
        dGVOYW1lXSkgewogICAgICByZXR1cm4gRW1iZXIuVEVNUExBVEVTW3RlbXBs
        YXRlTmFtZV07CiAgICB9CiAgfSwKICAvKioKICAgIEdpdmVuIGEgcGFyc2VO
        YW1lIG9iamVjdCAob3V0cHV0IGZyb20gYHBhcnNlTmFtZWApLCBhcHBseQog
        ICAgdGhlIGNvbnZlbnRpb25zIGV4cGVjdGVkIGJ5IGBFbWJlci5Sb3V0ZXJg
        CgogICAgQHByb3RlY3RlZAogICAgQHBhcmFtIHtPYmplY3R9IHBhcnNlZE5h
        bWUgYSBwYXJzZU5hbWUgb2JqZWN0IHdpdGggdGhlIHBhcnNlZAogICAgICBm
        dWxsTmFtZSBsb29rdXAgc3RyaW5nCiAgICBAbWV0aG9kIHVzZVJvdXRlck5h
        bWluZwogICovCiAgdXNlUm91dGVyTmFtaW5nOiBmdW5jdGlvbihwYXJzZWRO
        YW1lKSB7CiAgICBwYXJzZWROYW1lLm5hbWUgPSBwYXJzZWROYW1lLm5hbWUu
        cmVwbGFjZSgvXC4vZywgJ18nKTsKICAgIGlmIChwYXJzZWROYW1lLm5hbWUg
        PT09ICdiYXNpYycpIHsKICAgICAgcGFyc2VkTmFtZS5uYW1lID0gJyc7CiAg
        ICB9CiAgfSwKICAvKioKICAgIExvb2t1cCB0aGUgY29udHJvbGxlciB1c2lu
        ZyBgcmVzb2x2ZU90aGVyYAoKICAgIEBwcm90ZWN0ZWQKICAgIEBwYXJhbSB7
        T2JqZWN0fSBwYXJzZWROYW1lIGEgcGFyc2VOYW1lIG9iamVjdCB3aXRoIHRo
        ZSBwYXJzZWQKICAgICAgZnVsbE5hbWUgbG9va3VwIHN0cmluZwogICAgQG1l
        dGhvZCByZXNvbHZlQ29udHJvbGxlcgogICovCiAgcmVzb2x2ZUNvbnRyb2xs
        ZXI6IGZ1bmN0aW9uKHBhcnNlZE5hbWUpIHsKICAgIHRoaXMudXNlUm91dGVy
        TmFtaW5nKHBhcnNlZE5hbWUpOwogICAgcmV0dXJuIHRoaXMucmVzb2x2ZU90
        aGVyKHBhcnNlZE5hbWUpOwogIH0sCiAgLyoqCiAgICBMb29rdXAgdGhlIHJv
        dXRlIHVzaW5nIGByZXNvbHZlT3RoZXJgCgogICAgQHByb3RlY3RlZAogICAg
        QHBhcmFtIHtPYmplY3R9IHBhcnNlZE5hbWUgYSBwYXJzZU5hbWUgb2JqZWN0
        IHdpdGggdGhlIHBhcnNlZAogICAgICBmdWxsTmFtZSBsb29rdXAgc3RyaW5n
        CiAgICBAbWV0aG9kIHJlc29sdmVSb3V0ZQogICovCiAgcmVzb2x2ZVJvdXRl
        OiBmdW5jdGlvbihwYXJzZWROYW1lKSB7CiAgICB0aGlzLnVzZVJvdXRlck5h
        bWluZyhwYXJzZWROYW1lKTsKICAgIHJldHVybiB0aGlzLnJlc29sdmVPdGhl
        cihwYXJzZWROYW1lKTsKICB9LAogIC8qKgogICAgTG9va3VwIHRoZSB2aWV3
        IHVzaW5nIGByZXNvbHZlT3RoZXJgCgogICAgQHByb3RlY3RlZAogICAgQHBh
        cmFtIHtPYmplY3R9IHBhcnNlZE5hbWUgYSBwYXJzZU5hbWUgb2JqZWN0IHdp
        dGggdGhlIHBhcnNlZAogICAgICBmdWxsTmFtZSBsb29rdXAgc3RyaW5nCiAg
        ICBAbWV0aG9kIHJlc29sdmVWaWV3CiAgKi8KICByZXNvbHZlVmlldzogZnVu
        Y3Rpb24ocGFyc2VkTmFtZSkgewogICAgdGhpcy51c2VSb3V0ZXJOYW1pbmco
        cGFyc2VkTmFtZSk7CiAgICByZXR1cm4gdGhpcy5yZXNvbHZlT3RoZXIocGFy
        c2VkTmFtZSk7CiAgfSwKCiAgcmVzb2x2ZUhlbHBlcjogZnVuY3Rpb24ocGFy
        c2VkTmFtZSkgewogICAgcmV0dXJuIHRoaXMucmVzb2x2ZU90aGVyKHBhcnNl
        ZE5hbWUpIHx8IEVtYmVyLkhhbmRsZWJhcnMuaGVscGVyc1twYXJzZWROYW1l
        LmZ1bGxOYW1lV2l0aG91dFR5cGVdOwogIH0sCgogIC8qKgogICAgTG9va3Vw
        IHRoZSBtb2RlbCBvbiB0aGUgQXBwbGljYXRpb24gbmFtZXNwYWNlCgogICAg
        QHByb3RlY3RlZAogICAgQHBhcmFtIHtPYmplY3R9IHBhcnNlZE5hbWUgYSBw
        YXJzZU5hbWUgb2JqZWN0IHdpdGggdGhlIHBhcnNlZAogICAgICBmdWxsTmFt
        ZSBsb29rdXAgc3RyaW5nCiAgICBAbWV0aG9kIHJlc29sdmVNb2RlbAogICov
        CiAgcmVzb2x2ZU1vZGVsOiBmdW5jdGlvbihwYXJzZWROYW1lKSB7CiAgICB2
        YXIgY2xhc3NOYW1lID0gY2xhc3NpZnkocGFyc2VkTmFtZS5uYW1lKSwKICAg
        ICAgICBmYWN0b3J5ID0gZ2V0KHBhcnNlZE5hbWUucm9vdCwgY2xhc3NOYW1l
        KTsKCiAgICAgaWYgKGZhY3RvcnkpIHsgcmV0dXJuIGZhY3Rvcnk7IH0KICB9
        LAogIC8qKgogICAgTG9vayB1cCB0aGUgc3BlY2lmaWVkIG9iamVjdCAoZnJv
        bSBwYXJzZWROYW1lKSBvbiB0aGUgYXBwcm9wcmlhdGUKICAgIG5hbWVzcGFj
        ZSAodXN1YWxseSBvbiB0aGUgQXBwbGljYXRpb24pCgogICAgQHByb3RlY3Rl
        ZAogICAgQHBhcmFtIHtPYmplY3R9IHBhcnNlZE5hbWUgYSBwYXJzZU5hbWUg
        b2JqZWN0IHdpdGggdGhlIHBhcnNlZAogICAgICBmdWxsTmFtZSBsb29rdXAg
        c3RyaW5nCiAgICBAbWV0aG9kIHJlc29sdmVPdGhlcgogICovCiAgcmVzb2x2
        ZU90aGVyOiBmdW5jdGlvbihwYXJzZWROYW1lKSB7CiAgICB2YXIgY2xhc3NO
        YW1lID0gY2xhc3NpZnkocGFyc2VkTmFtZS5uYW1lKSArIGNsYXNzaWZ5KHBh
        cnNlZE5hbWUudHlwZSksCiAgICAgICAgZmFjdG9yeSA9IGdldChwYXJzZWRO
        YW1lLnJvb3QsIGNsYXNzTmFtZSk7CiAgICBpZiAoZmFjdG9yeSkgeyByZXR1
        cm4gZmFjdG9yeTsgfQogIH0sCgogIC8qKgogICAgUmV0dXJucyBhIGh1bWFu
        LXJlYWRhYmxlIGRlc2NyaXB0aW9uIGZvciBhIGZ1bGxOYW1lLiBVc2VkIGJ5
        IHRoZQogICAgQXBwbGljYXRpb24gbmFtZXNwYWNlIGluIGFzc2VydGlvbnMg
        dG8gZGVzY3JpYmUgdGhlCiAgICBwcmVjaXNlIG5hbWUgb2YgdGhlIGNsYXNz
        IHRoYXQgRW1iZXIgaXMgbG9va2luZyBmb3IsIHJhdGhlciB0aGFuCiAgICBj
        b250YWluZXIga2V5cy4KCiAgICBAcHJvdGVjdGVkCiAgICBAcGFyYW0ge1N0
        cmluZ30gZnVsbE5hbWUgdGhlIGxvb2t1cCBzdHJpbmcKICAgIEBtZXRob2Qg
        bG9va3VwRGVzY3JpcHRpb24KICAqLwogIGxvb2t1cERlc2NyaXB0aW9uOiBm
        dW5jdGlvbihmdWxsTmFtZSkgewogICAgdmFyIHBhcnNlZE5hbWUgPSB0aGlz
        LnBhcnNlTmFtZShmdWxsTmFtZSk7CgogICAgaWYgKHBhcnNlZE5hbWUudHlw
        ZSA9PT0gJ3RlbXBsYXRlJykgewogICAgICByZXR1cm4gInRlbXBsYXRlIGF0
        ICIgKyBwYXJzZWROYW1lLmZ1bGxOYW1lV2l0aG91dFR5cGUucmVwbGFjZSgv
        XC4vZywgJy8nKTsKICAgIH0KCiAgICB2YXIgZGVzY3JpcHRpb24gPSBwYXJz
        ZWROYW1lLnJvb3QgKyAiLiIgKyBjbGFzc2lmeShwYXJzZWROYW1lLm5hbWUp
        OwogICAgaWYgKHBhcnNlZE5hbWUudHlwZSAhPT0gJ21vZGVsJykgeyBkZXNj
        cmlwdGlvbiArPSBjbGFzc2lmeShwYXJzZWROYW1lLnR5cGUpOyB9CgogICAg
        cmV0dXJuIGRlc2NyaXB0aW9uOwogIH0sCgogIG1ha2VUb1N0cmluZzogZnVu
        Y3Rpb24oZmFjdG9yeSwgZnVsbE5hbWUpIHsKICAgIHJldHVybiBmYWN0b3J5
        LnRvU3RyaW5nKCk7CiAgfQp9KTsKCn0pKCk7CgoKCihmdW5jdGlvbigpIHsK
        LyoqCkBtb2R1bGUgZW1iZXIKQHN1Ym1vZHVsZSBlbWJlci1hcHBsaWNhdGlv
        bgoqLwoKdmFyIGdldCA9IEVtYmVyLmdldCwgc2V0ID0gRW1iZXIuc2V0OwoK
        ZnVuY3Rpb24gRGVwcmVjYXRlZENvbnRhaW5lcihjb250YWluZXIpIHsKICB0
        aGlzLl9jb250YWluZXIgPSBjb250YWluZXI7Cn0KCkRlcHJlY2F0ZWRDb250
        YWluZXIuZGVwcmVjYXRlID0gZnVuY3Rpb24obWV0aG9kKSB7CiAgcmV0dXJu
        IGZ1bmN0aW9uKCkgewogICAgdmFyIGNvbnRhaW5lciA9IHRoaXMuX2NvbnRh
        aW5lcjsKCiAgICBFbWJlci5kZXByZWNhdGUoJ1VzaW5nIHRoZSBkZWZhdWx0
        Q29udGFpbmVyIGlzIG5vIGxvbmdlciBzdXBwb3J0ZWQuIFtkZWZhdWx0Q29u
        dGFpbmVyIycgKyBtZXRob2QgKyAnXSBzZWU6IGh0dHA6Ly9naXQuaW8vRUtQ
        cG5BJywgZmFsc2UpOwogICAgcmV0dXJuIGNvbnRhaW5lclttZXRob2RdLmFw
        cGx5KGNvbnRhaW5lciwgYXJndW1lbnRzKTsKICB9Owp9OwoKRGVwcmVjYXRl
        ZENvbnRhaW5lci5wcm90b3R5cGUgPSB7CiAgX2NvbnRhaW5lcjogbnVsbCwK
        ICBsb29rdXA6IERlcHJlY2F0ZWRDb250YWluZXIuZGVwcmVjYXRlKCdsb29r
        dXAnKSwKICByZXNvbHZlOiBEZXByZWNhdGVkQ29udGFpbmVyLmRlcHJlY2F0
        ZSgncmVzb2x2ZScpLAogIHJlZ2lzdGVyOiBEZXByZWNhdGVkQ29udGFpbmVy
        LmRlcHJlY2F0ZSgncmVnaXN0ZXInKQp9OwoKLyoqCiAgQW4gaW5zdGFuY2Ug
        b2YgYEVtYmVyLkFwcGxpY2F0aW9uYCBpcyB0aGUgc3RhcnRpbmcgcG9pbnQg
        Zm9yIGV2ZXJ5IEVtYmVyCiAgYXBwbGljYXRpb24uIEl0IGhlbHBzIHRvIGlu
        c3RhbnRpYXRlLCBpbml0aWFsaXplIGFuZCBjb29yZGluYXRlIHRoZSBtYW55
        CiAgb2JqZWN0cyB0aGF0IG1ha2UgdXAgeW91ciBhcHAuCgogIEVhY2ggRW1i
        ZXIgYXBwIGhhcyBvbmUgYW5kIG9ubHkgb25lIGBFbWJlci5BcHBsaWNhdGlv
        bmAgb2JqZWN0LiBJbiBmYWN0LCB0aGUKICB2ZXJ5IGZpcnN0IHRoaW5nIHlv
        dSBzaG91bGQgZG8gaW4geW91ciBhcHBsaWNhdGlvbiBpcyBjcmVhdGUgdGhl
        IGluc3RhbmNlOgoKICBgYGBqYXZhc2NyaXB0CiAgd2luZG93LkFwcCA9IEVt
        YmVyLkFwcGxpY2F0aW9uLmNyZWF0ZSgpOwogIGBgYAoKICBUeXBpY2FsbHks
        IHRoZSBhcHBsaWNhdGlvbiBvYmplY3QgaXMgdGhlIG9ubHkgZ2xvYmFsIHZh
        cmlhYmxlLiBBbGwgb3RoZXIKICBjbGFzc2VzIGluIHlvdXIgYXBwIHNob3Vs
        ZCBiZSBwcm9wZXJ0aWVzIG9uIHRoZSBgRW1iZXIuQXBwbGljYXRpb25gIGlu
        c3RhbmNlLAogIHdoaWNoIGhpZ2hsaWdodHMgaXRzIGZpcnN0IHJvbGU6IGEg
        Z2xvYmFsIG5hbWVzcGFjZS4KCiAgRm9yIGV4YW1wbGUsIGlmIHlvdSBkZWZp
        bmUgYSB2aWV3IGNsYXNzLCBpdCBtaWdodCBsb29rIGxpa2UgdGhpczoKCiAg
        YGBgamF2YXNjcmlwdAogIEFwcC5NeVZpZXcgPSBFbWJlci5WaWV3LmV4dGVu
        ZCgpOwogIGBgYAoKICBCeSBkZWZhdWx0LCBjYWxsaW5nIGBFbWJlci5BcHBs
        aWNhdGlvbi5jcmVhdGUoKWAgd2lsbCBhdXRvbWF0aWNhbGx5IGluaXRpYWxp
        emUKICB5b3VyIGFwcGxpY2F0aW9uIGJ5IGNhbGxpbmcgdGhlIGBFbWJlci5B
        cHBsaWNhdGlvbi5pbml0aWFsaXplKClgIG1ldGhvZC4gSWYKICB5b3UgbmVl
        ZCB0byBkZWxheSBpbml0aWFsaXphdGlvbiwgeW91IGNhbiBjYWxsIHlvdXIg
        YXBwJ3MgYGRlZmVyUmVhZGluZXNzKClgCiAgbWV0aG9kLiBXaGVuIHlvdSBh
        cmUgcmVhZHkgZm9yIHlvdXIgYXBwIHRvIGJlIGluaXRpYWxpemVkLCBjYWxs
        IGl0cwogIGBhZHZhbmNlUmVhZGluZXNzKClgIG1ldGhvZC4KCiAgWW91IGNh
        biBkZWZpbmUgYSBgcmVhZHlgIG1ldGhvZCBvbiB0aGUgYEVtYmVyLkFwcGxp
        Y2F0aW9uYCBpbnN0YW5jZSwgd2hpY2gKICB3aWxsIGJlIHJ1biBieSBFbWJl
        ciB3aGVuIHRoZSBhcHBsaWNhdGlvbiBpcyBpbml0aWFsaXplZC4KCiAgQmVj
        YXVzZSBgRW1iZXIuQXBwbGljYXRpb25gIGluaGVyaXRzIGZyb20gYEVtYmVy
        Lk5hbWVzcGFjZWAsIGFueSBjbGFzc2VzCiAgeW91IGNyZWF0ZSB3aWxsIGhh
        dmUgdXNlZnVsIHN0cmluZyByZXByZXNlbnRhdGlvbnMgd2hlbiBjYWxsaW5n
        IGB0b1N0cmluZygpYC4KICBTZWUgdGhlIGBFbWJlci5OYW1lc3BhY2VgIGRv
        Y3VtZW50YXRpb24gZm9yIG1vcmUgaW5mb3JtYXRpb24uCgogIFdoaWxlIHlv
        dSBjYW4gdGhpbmsgb2YgeW91ciBgRW1iZXIuQXBwbGljYXRpb25gIGFzIGEg
        Y29udGFpbmVyIHRoYXQgaG9sZHMgdGhlCiAgb3RoZXIgY2xhc3NlcyBpbiB5
        b3VyIGFwcGxpY2F0aW9uLCB0aGVyZSBhcmUgc2V2ZXJhbCBvdGhlciByZXNw
        b25zaWJpbGl0aWVzCiAgZ29pbmcgb24gdW5kZXItdGhlLWhvb2QgdGhhdCB5
        b3UgbWF5IHdhbnQgdG8gdW5kZXJzdGFuZC4KCiAgIyMjIEV2ZW50IERlbGVn
        YXRpb24KCiAgRW1iZXIgdXNlcyBhIHRlY2huaXF1ZSBjYWxsZWQgX2V2ZW50
        IGRlbGVnYXRpb25fLiBUaGlzIGFsbG93cyB0aGUgZnJhbWV3b3JrCiAgdG8g
        c2V0IHVwIGEgZ2xvYmFsLCBzaGFyZWQgZXZlbnQgbGlzdGVuZXIgaW5zdGVh
        ZCBvZiByZXF1aXJpbmcgZWFjaCB2aWV3IHRvCiAgZG8gaXQgbWFudWFsbHku
        IEZvciBleGFtcGxlLCBpbnN0ZWFkIG9mIGVhY2ggdmlldyByZWdpc3Rlcmlu
        ZyBpdHMgb3duCiAgYG1vdXNlZG93bmAgbGlzdGVuZXIgb24gaXRzIGFzc29j
        aWF0ZWQgZWxlbWVudCwgRW1iZXIgc2V0cyB1cCBhIGBtb3VzZWRvd25gCiAg
        bGlzdGVuZXIgb24gdGhlIGBib2R5YC4KCiAgSWYgYSBgbW91c2Vkb3duYCBl
        dmVudCBvY2N1cnMsIEVtYmVyIHdpbGwgbG9vayBhdCB0aGUgdGFyZ2V0IG9m
        IHRoZSBldmVudCBhbmQKICBzdGFydCB3YWxraW5nIHVwIHRoZSBET00gbm9k
        ZSB0cmVlLCBmaW5kaW5nIGNvcnJlc3BvbmRpbmcgdmlld3MgYW5kIGludm9r
        aW5nCiAgdGhlaXIgYG1vdXNlRG93bmAgbWV0aG9kIGFzIGl0IGdvZXMuCgog
        IGBFbWJlci5BcHBsaWNhdGlvbmAgaGFzIGEgbnVtYmVyIG9mIGRlZmF1bHQg
        ZXZlbnRzIHRoYXQgaXQgbGlzdGVucyBmb3IsIGFzCiAgd2VsbCBhcyBhIG1h
        cHBpbmcgZnJvbSBsb3dlcmNhc2UgZXZlbnRzIHRvIGNhbWVsLWNhc2VkIHZp
        ZXcgbWV0aG9kIG5hbWVzLiBGb3IKICBleGFtcGxlLCB0aGUgYGtleXByZXNz
        YCBldmVudCBjYXVzZXMgdGhlIGBrZXlQcmVzc2AgbWV0aG9kIG9uIHRoZSB2
        aWV3IHRvIGJlCiAgY2FsbGVkLCB0aGUgYGRibGNsaWNrYCBldmVudCBjYXVz
        ZXMgYGRvdWJsZUNsaWNrYCB0byBiZSBjYWxsZWQsIGFuZCBzbyBvbi4KCiAg
        SWYgdGhlcmUgaXMgYSBidWJibGluZyBicm93c2VyIGV2ZW50IHRoYXQgRW1i
        ZXIgZG9lcyBub3QgbGlzdGVuIGZvciBieQogIGRlZmF1bHQsIHlvdSBjYW4g
        c3BlY2lmeSBjdXN0b20gZXZlbnRzIGFuZCB0aGVpciBjb3JyZXNwb25kaW5n
        IHZpZXcgbWV0aG9kCiAgbmFtZXMgYnkgc2V0dGluZyB0aGUgYXBwbGljYXRp
        b24ncyBgY3VzdG9tRXZlbnRzYCBwcm9wZXJ0eToKCiAgYGBgamF2YXNjcmlw
        dAogIEFwcCA9IEVtYmVyLkFwcGxpY2F0aW9uLmNyZWF0ZSh7CiAgICBjdXN0
        b21FdmVudHM6IHsKICAgICAgLy8gYWRkIHN1cHBvcnQgZm9yIHRoZSBwYXN0
        ZSBldmVudAogICAgICBwYXN0ZTogInBhc3RlIgogICAgfQogIH0pOwogIGBg
        YAoKICBCeSBkZWZhdWx0LCB0aGUgYXBwbGljYXRpb24gc2V0cyB1cCB0aGVz
        ZSBldmVudCBsaXN0ZW5lcnMgb24gdGhlIGRvY3VtZW50CiAgYm9keS4gSG93
        ZXZlciwgaW4gY2FzZXMgd2hlcmUgeW91IGFyZSBlbWJlZGRpbmcgYW4gRW1i
        ZXIgYXBwbGljYXRpb24gaW5zaWRlCiAgYW4gZXhpc3RpbmcgcGFnZSwgeW91
        IG1heSB3YW50IGl0IHRvIHNldCB1cCB0aGUgbGlzdGVuZXJzIG9uIGFuIGVs
        ZW1lbnQKICBpbnNpZGUgdGhlIGJvZHkuCgogIEZvciBleGFtcGxlLCBpZiBv
        bmx5IGV2ZW50cyBpbnNpZGUgYSBET00gZWxlbWVudCB3aXRoIHRoZSBJRCBv
        ZiBgZW1iZXItYXBwYAogIHNob3VsZCBiZSBkZWxlZ2F0ZWQsIHNldCB5b3Vy
        IGFwcGxpY2F0aW9uJ3MgYHJvb3RFbGVtZW50YCBwcm9wZXJ0eToKCiAgYGBg
        amF2YXNjcmlwdAogIHdpbmRvdy5BcHAgPSBFbWJlci5BcHBsaWNhdGlvbi5j
        cmVhdGUoewogICAgcm9vdEVsZW1lbnQ6ICcjZW1iZXItYXBwJwogIH0pOwog
        IGBgYAoKICBUaGUgYHJvb3RFbGVtZW50YCBjYW4gYmUgZWl0aGVyIGEgRE9N
        IGVsZW1lbnQgb3IgYSBqUXVlcnktY29tcGF0aWJsZSBzZWxlY3RvcgogIHN0
        cmluZy4gTm90ZSB0aGF0ICp2aWV3cyBhcHBlbmRlZCB0byB0aGUgRE9NIG91
        dHNpZGUgdGhlIHJvb3QgZWxlbWVudCB3aWxsCiAgbm90IHJlY2VpdmUgZXZl
        bnRzLiogSWYgeW91IHNwZWNpZnkgYSBjdXN0b20gcm9vdCBlbGVtZW50LCBt
        YWtlIHN1cmUgeW91IG9ubHkKICBhcHBlbmQgdmlld3MgaW5zaWRlIGl0IQoK
        ICBUbyBsZWFybiBtb3JlIGFib3V0IHRoZSBhZHZhbnRhZ2VzIG9mIGV2ZW50
        IGRlbGVnYXRpb24gYW5kIHRoZSBFbWJlciB2aWV3CiAgbGF5ZXIsIGFuZCBh
        IGxpc3Qgb2YgdGhlIGV2ZW50IGxpc3RlbmVycyB0aGF0IGFyZSBzZXR1cCBi
        eSBkZWZhdWx0LCB2aXNpdCB0aGUKICBbRW1iZXIgVmlldyBMYXllciBndWlk
        ZV0oaHR0cDovL2VtYmVyanMuY29tL2d1aWRlcy91bmRlcnN0YW5kaW5nLWVt
        YmVyL3RoZS12aWV3LWxheWVyLyN0b2NfZXZlbnQtZGVsZWdhdGlvbikuCgog
        ICMjIyBJbml0aWFsaXplcnMKCiAgTGlicmFyaWVzIG9uIHRvcCBvZiBFbWJl
        ciBjYW4gcmVnaXN0ZXIgYWRkaXRpb25hbCBpbml0aWFsaXplcnMsIGxpa2Ug
        c286CgogIGBgYGphdmFzY3JpcHQKICBFbWJlci5BcHBsaWNhdGlvbi5pbml0
        aWFsaXplcih7CiAgICBuYW1lOiAic3RvcmUiLAoKICAgIGluaXRpYWxpemU6
        IGZ1bmN0aW9uKGNvbnRhaW5lciwgYXBwbGljYXRpb24pIHsKICAgICAgY29u
        dGFpbmVyLnJlZ2lzdGVyKCdzdG9yZTptYWluJywgYXBwbGljYXRpb24uU3Rv
        cmUpOwogICAgfQogIH0pOwogIGBgYAoKICAjIyMgUm91dGluZwoKICBJbiBh
        ZGRpdGlvbiB0byBjcmVhdGluZyB5b3VyIGFwcGxpY2F0aW9uJ3Mgcm91dGVy
        LCBgRW1iZXIuQXBwbGljYXRpb25gIGlzCiAgYWxzbyByZXNwb25zaWJsZSBm
        b3IgdGVsbGluZyB0aGUgcm91dGVyIHdoZW4gdG8gc3RhcnQgcm91dGluZy4g
        VHJhbnNpdGlvbnMKICBiZXR3ZWVuIHJvdXRlcyBjYW4gYmUgbG9nZ2VkIHdp
        dGggdGhlIGBMT0dfVFJBTlNJVElPTlNgIGZsYWcsIGFuZCBtb3JlCiAgZGV0
        YWlsZWQgaW50cmEtdHJhbnNpdGlvbiBsb2dnaW5nIGNhbiBiZSBsb2dnZWQg
        d2l0aAogIHRoZSBgTE9HX1RSQU5TSVRJT05TX0lOVEVSTkFMYCBmbGFnOgoK
        ICBgYGBqYXZhc2NyaXB0CiAgd2luZG93LkFwcCA9IEVtYmVyLkFwcGxpY2F0
        aW9uLmNyZWF0ZSh7CiAgICBMT0dfVFJBTlNJVElPTlM6IHRydWUsIC8vIGJh
        c2ljIGxvZ2dpbmcgb2Ygc3VjY2Vzc2Z1bCB0cmFuc2l0aW9ucwogICAgTE9H
        X1RSQU5TSVRJT05TX0lOVEVSTkFMOiB0cnVlIC8vIGRldGFpbGVkIGxvZ2dp
        bmcgb2YgYWxsIHJvdXRpbmcgc3RlcHMKICB9KTsKICBgYGAKCiAgQnkgZGVm
        YXVsdCwgdGhlIHJvdXRlciB3aWxsIGJlZ2luIHRyeWluZyB0byB0cmFuc2xh
        dGUgdGhlIGN1cnJlbnQgVVJMIGludG8KICBhcHBsaWNhdGlvbiBzdGF0ZSBv
        bmNlIHRoZSBicm93c2VyIGVtaXRzIHRoZSBgRE9NQ29udGVudFJlYWR5YCBl
        dmVudC4gSWYgeW91CiAgbmVlZCB0byBkZWZlciByb3V0aW5nLCB5b3UgY2Fu
        IGNhbGwgdGhlIGFwcGxpY2F0aW9uJ3MgYGRlZmVyUmVhZGluZXNzKClgCiAg
        bWV0aG9kLiBPbmNlIHJvdXRpbmcgY2FuIGJlZ2luLCBjYWxsIHRoZSBgYWR2
        YW5jZVJlYWRpbmVzcygpYCBtZXRob2QuCgogIElmIHRoZXJlIGlzIGFueSBz
        ZXR1cCByZXF1aXJlZCBiZWZvcmUgcm91dGluZyBiZWdpbnMsIHlvdSBjYW4g
        aW1wbGVtZW50IGEKICBgcmVhZHkoKWAgbWV0aG9kIG9uIHlvdXIgYXBwIHRo
        YXQgd2lsbCBiZSBpbnZva2VkIGltbWVkaWF0ZWx5IGJlZm9yZSByb3V0aW5n
        CiAgYmVnaW5zLgogIGBgYAoKICBAY2xhc3MgQXBwbGljYXRpb24KICBAbmFt
        ZXNwYWNlIEVtYmVyCiAgQGV4dGVuZHMgRW1iZXIuTmFtZXNwYWNlCiovCgp2
        YXIgQXBwbGljYXRpb24gPSBFbWJlci5BcHBsaWNhdGlvbiA9IEVtYmVyLk5h
        bWVzcGFjZS5leHRlbmQoRW1iZXIuRGVmZXJyZWRNaXhpbiwgewoKICAvKioK
        ICAgIFRoZSByb290IERPTSBlbGVtZW50IG9mIHRoZSBBcHBsaWNhdGlvbi4g
        VGhpcyBjYW4gYmUgc3BlY2lmaWVkIGFzIGFuCiAgICBlbGVtZW50IG9yIGEK
        ICAgIFtqUXVlcnktY29tcGF0aWJsZSBzZWxlY3RvciBzdHJpbmddKGh0dHA6
        Ly9hcGkuanF1ZXJ5LmNvbS9jYXRlZ29yeS9zZWxlY3RvcnMvKS4KCiAgICBU
        aGlzIGlzIHRoZSBlbGVtZW50IHRoYXQgd2lsbCBiZSBwYXNzZWQgdG8gdGhl
        IEFwcGxpY2F0aW9uJ3MsCiAgICBgZXZlbnREaXNwYXRjaGVyYCwgd2hpY2gg
        c2V0cyB1cCB0aGUgbGlzdGVuZXJzIGZvciBldmVudCBkZWxlZ2F0aW9uLiBF
        dmVyeQogICAgdmlldyBpbiB5b3VyIGFwcGxpY2F0aW9uIHNob3VsZCBiZSBh
        IGNoaWxkIG9mIHRoZSBlbGVtZW50IHlvdSBzcGVjaWZ5IGhlcmUuCgogICAg
        QHByb3BlcnR5IHJvb3RFbGVtZW50CiAgICBAdHlwZSBET01FbGVtZW50CiAg
        ICBAZGVmYXVsdCAnYm9keScKICAqLwogIHJvb3RFbGVtZW50OiAnYm9keScs
        CgogIC8qKgogICAgVGhlIGBFbWJlci5FdmVudERpc3BhdGNoZXJgIHJlc3Bv
        bnNpYmxlIGZvciBkZWxlZ2F0aW5nIGV2ZW50cyB0byB0aGlzCiAgICBhcHBs
        aWNhdGlvbidzIHZpZXdzLgoKICAgIFRoZSBldmVudCBkaXNwYXRjaGVyIGlz
        IGNyZWF0ZWQgYnkgdGhlIGFwcGxpY2F0aW9uIGF0IGluaXRpYWxpemF0aW9u
        IHRpbWUKICAgIGFuZCBzZXRzIHVwIGV2ZW50IGxpc3RlbmVycyBvbiB0aGUg
        RE9NIGVsZW1lbnQgZGVzY3JpYmVkIGJ5IHRoZQogICAgYXBwbGljYXRpb24n
        cyBgcm9vdEVsZW1lbnRgIHByb3BlcnR5LgoKICAgIFNlZSB0aGUgZG9jdW1l
        bnRhdGlvbiBmb3IgYEVtYmVyLkV2ZW50RGlzcGF0Y2hlcmAgZm9yIG1vcmUg
        aW5mb3JtYXRpb24uCgogICAgQHByb3BlcnR5IGV2ZW50RGlzcGF0Y2hlcgog
        ICAgQHR5cGUgRW1iZXIuRXZlbnREaXNwYXRjaGVyCiAgICBAZGVmYXVsdCBu
        dWxsCiAgKi8KICBldmVudERpc3BhdGNoZXI6IG51bGwsCgogIC8qKgogICAg
        VGhlIERPTSBldmVudHMgZm9yIHdoaWNoIHRoZSBldmVudCBkaXNwYXRjaGVy
        IHNob3VsZCBsaXN0ZW4uCgogICAgQnkgZGVmYXVsdCwgdGhlIGFwcGxpY2F0
        aW9uJ3MgYEVtYmVyLkV2ZW50RGlzcGF0Y2hlcmAgbGlzdGVucwogICAgZm9y
        IGEgc2V0IG9mIHN0YW5kYXJkIERPTSBldmVudHMsIHN1Y2ggYXMgYG1vdXNl
        ZG93bmAgYW5kCiAgICBga2V5dXBgLCBhbmQgZGVsZWdhdGVzIHRoZW0gdG8g
        eW91ciBhcHBsaWNhdGlvbidzIGBFbWJlci5WaWV3YAogICAgaW5zdGFuY2Vz
        LgoKICAgIElmIHlvdSB3b3VsZCBsaWtlIGFkZGl0aW9uYWwgYnViYmxpbmcg
        ZXZlbnRzIHRvIGJlIGRlbGVnYXRlZCB0byB5b3VyCiAgICB2aWV3cywgc2V0
        IHlvdXIgYEVtYmVyLkFwcGxpY2F0aW9uYCdzIGBjdXN0b21FdmVudHNgIHBy
        b3BlcnR5CiAgICB0byBhIGhhc2ggY29udGFpbmluZyB0aGUgRE9NIGV2ZW50
        IG5hbWUgYXMgdGhlIGtleSBhbmQgdGhlCiAgICBjb3JyZXNwb25kaW5nIHZp
        ZXcgbWV0aG9kIG5hbWUgYXMgdGhlIHZhbHVlLiBGb3IgZXhhbXBsZToKCiAg
        ICBgYGBqYXZhc2NyaXB0CiAgICBBcHAgPSBFbWJlci5BcHBsaWNhdGlvbi5j
        cmVhdGUoewogICAgICBjdXN0b21FdmVudHM6IHsKICAgICAgICAvLyBhZGQg
        c3VwcG9ydCBmb3IgdGhlIHBhc3RlIGV2ZW50CiAgICAgICAgcGFzdGU6ICJw
        YXN0ZSIKICAgICAgfQogICAgfSk7CiAgICBgYGAKCiAgICBAcHJvcGVydHkg
        Y3VzdG9tRXZlbnRzCiAgICBAdHlwZSBPYmplY3QKICAgIEBkZWZhdWx0IG51
        bGwKICAqLwogIGN1c3RvbUV2ZW50czogbnVsbCwKCiAgLy8gU3RhcnQgb2Zm
        IHRoZSBudW1iZXIgb2YgZGVmZXJyYWxzIGF0IDEuIFRoaXMgd2lsbCBiZQog
        IC8vIGRlY3JlbWVudGVkIGJ5IHRoZSBBcHBsaWNhdGlvbidzIG93biBgaW5p
        dGlhbGl6ZWAgbWV0aG9kLgogIF9yZWFkaW5lc3NEZWZlcnJhbHM6IDEsCgog
        IGluaXQ6IGZ1bmN0aW9uKCkgewogICAgaWYgKCF0aGlzLiQpIHsgdGhpcy4k
        ID0gRW1iZXIuJDsgfQogICAgdGhpcy5fX2NvbnRhaW5lcl9fID0gdGhpcy5i
        dWlsZENvbnRhaW5lcigpOwoKICAgIHRoaXMuUm91dGVyID0gdGhpcy5kZWZh
        dWx0Um91dGVyKCk7CgogICAgdGhpcy5fc3VwZXIoKTsKCiAgICB0aGlzLnNj
        aGVkdWxlSW5pdGlhbGl6ZSgpOwoKICAgIEVtYmVyLmxpYnJhcmllcy5yZWdp
        c3RlckNvcmVMaWJyYXJ5KCdIYW5kbGViYXJzJywgRW1iZXIuSGFuZGxlYmFy
        cy5WRVJTSU9OKTsKICAgIEVtYmVyLmxpYnJhcmllcy5yZWdpc3RlckNvcmVM
        aWJyYXJ5KCdqUXVlcnknLCBFbWJlci4kKCkuanF1ZXJ5KTsKCiAgICBpZiAo
        IEVtYmVyLkxPR19WRVJTSU9OICkgewogICAgICBFbWJlci5MT0dfVkVSU0lP
        TiA9IGZhbHNlOyAvLyB3ZSBvbmx5IG5lZWQgdG8gc2VlIHRoaXMgb25jZSBw
        ZXIgQXBwbGljYXRpb24jaW5pdAogICAgICB2YXIgbWF4TmFtZUxlbmd0aCA9
        IE1hdGgubWF4LmFwcGx5KHRoaXMsIEVtYmVyLkEoRW1iZXIubGlicmFyaWVz
        KS5tYXBCeSgibmFtZS5sZW5ndGgiKSk7CgogICAgICBFbWJlci5kZWJ1Zygn
        LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLScpOwogICAgICBFbWJl
        ci5saWJyYXJpZXMuZWFjaChmdW5jdGlvbihuYW1lLCB2ZXJzaW9uKSB7CiAg
        ICAgICAgdmFyIHNwYWNlcyA9IG5ldyBBcnJheShtYXhOYW1lTGVuZ3RoIC0g
        bmFtZS5sZW5ndGggKyAxKS5qb2luKCIgIik7CiAgICAgICAgRW1iZXIuZGVi
        dWcoW25hbWUsIHNwYWNlcywgJyA6ICcsIHZlcnNpb25dLmpvaW4oIiIpKTsK
        ICAgICAgfSk7CiAgICAgIEVtYmVyLmRlYnVnKCctLS0tLS0tLS0tLS0tLS0t
        LS0tLS0tLS0tLS0tLS0tJyk7CiAgICB9CiAgfSwKCiAgLyoqCiAgICBCdWls
        ZCB0aGUgY29udGFpbmVyIGZvciB0aGUgY3VycmVudCBhcHBsaWNhdGlvbi4K
        CiAgICBBbHNvIHJlZ2lzdGVyIGEgZGVmYXVsdCBhcHBsaWNhdGlvbiB2aWV3
        IGluIGNhc2UgdGhlIGFwcGxpY2F0aW9uCiAgICBpdHNlbGYgZG9lcyBub3Qu
        CgogICAgQHByaXZhdGUKICAgIEBtZXRob2QgYnVpbGRDb250YWluZXIKICAg
        IEByZXR1cm4ge0VtYmVyLkNvbnRhaW5lcn0gdGhlIGNvbmZpZ3VyZWQgY29u
        dGFpbmVyCiAgKi8KICBidWlsZENvbnRhaW5lcjogZnVuY3Rpb24oKSB7CiAg
        ICB2YXIgY29udGFpbmVyID0gdGhpcy5fX2NvbnRhaW5lcl9fID0gQXBwbGlj
        YXRpb24uYnVpbGRDb250YWluZXIodGhpcyk7CgogICAgcmV0dXJuIGNvbnRh
        aW5lcjsKICB9LAoKICAvKioKICAgIElmIHRoZSBhcHBsaWNhdGlvbiBoYXMg
        bm90IG9wdGVkIG91dCBvZiByb3V0aW5nIGFuZCBoYXMgbm90IGV4cGxpY2l0
        bHkKICAgIGRlZmluZWQgYSByb3V0ZXIsIHN1cHBseSBhIGRlZmF1bHQgcm91
        dGVyIGZvciB0aGUgYXBwbGljYXRpb24gYXV0aG9yCiAgICB0byBjb25maWd1
        cmUuCgogICAgVGhpcyBhbGxvd3MgYXBwbGljYXRpb24gZGV2ZWxvcGVycyB0
        byBkbzoKCiAgICBgYGBqYXZhc2NyaXB0CiAgICB2YXIgQXBwID0gRW1iZXIu
        QXBwbGljYXRpb24uY3JlYXRlKCk7CgogICAgQXBwLlJvdXRlci5tYXAoZnVu
        Y3Rpb24oKSB7CiAgICAgIHRoaXMucmVzb3VyY2UoJ3Bvc3RzJyk7CiAgICB9
        KTsKICAgIGBgYAoKICAgIEBwcml2YXRlCiAgICBAbWV0aG9kIGRlZmF1bHRS
        b3V0ZXIKICAgIEByZXR1cm4ge0VtYmVyLlJvdXRlcn0gdGhlIGRlZmF1bHQg
        cm91dGVyCiAgKi8KCiAgZGVmYXVsdFJvdXRlcjogZnVuY3Rpb24oKSB7CiAg
        ICBpZiAodGhpcy5Sb3V0ZXIgPT09IGZhbHNlKSB7IHJldHVybjsgfQogICAg
        dmFyIGNvbnRhaW5lciA9IHRoaXMuX19jb250YWluZXJfXzsKCiAgICBpZiAo
        dGhpcy5Sb3V0ZXIpIHsKICAgICAgY29udGFpbmVyLnVucmVnaXN0ZXIoJ3Jv
        dXRlcjptYWluJyk7CiAgICAgIGNvbnRhaW5lci5yZWdpc3Rlcigncm91dGVy
        Om1haW4nLCB0aGlzLlJvdXRlcik7CiAgICB9CgogICAgcmV0dXJuIGNvbnRh
        aW5lci5sb29rdXBGYWN0b3J5KCdyb3V0ZXI6bWFpbicpOwogIH0sCgogIC8q
        KgogICAgQXV0b21hdGljYWxseSBpbml0aWFsaXplIHRoZSBhcHBsaWNhdGlv
        biBvbmNlIHRoZSBET00gaGFzCiAgICBiZWNvbWUgcmVhZHkuCgogICAgVGhl
        IGluaXRpYWxpemF0aW9uIGl0c2VsZiBpcyBzY2hlZHVsZWQgb24gdGhlIGFj
        dGlvbnMgcXVldWUKICAgIHdoaWNoIGVuc3VyZXMgdGhhdCBhcHBsaWNhdGlv
        biBsb2FkaW5nIGZpbmlzaGVzIGJlZm9yZQogICAgYm9vdGluZy4KCiAgICBJ
        ZiB5b3UgYXJlIGFzeW5jaHJvbm91c2x5IGxvYWRpbmcgY29kZSwgeW91IHNo
        b3VsZCBjYWxsCiAgICBgZGVmZXJSZWFkaW5lc3MoKWAgdG8gZGVmZXIgYm9v
        dGluZywgYW5kIHRoZW4gY2FsbAogICAgYGFkdmFuY2VSZWFkaW5lc3MoKWAg
        b25jZSBhbGwgb2YgeW91ciBjb2RlIGhhcyBmaW5pc2hlZAogICAgbG9hZGlu
        Zy4KCiAgICBAcHJpdmF0ZQogICAgQG1ldGhvZCBzY2hlZHVsZUluaXRpYWxp
        emUKICAqLwogIHNjaGVkdWxlSW5pdGlhbGl6ZTogZnVuY3Rpb24oKSB7CiAg
        ICB2YXIgc2VsZiA9IHRoaXM7CgogICAgaWYgKCF0aGlzLiQgfHwgdGhpcy4k
        LmlzUmVhZHkpIHsKICAgICAgRW1iZXIucnVuLnNjaGVkdWxlKCdhY3Rpb25z
        Jywgc2VsZiwgJ19pbml0aWFsaXplJyk7CiAgICB9IGVsc2UgewogICAgICB0
        aGlzLiQoKS5yZWFkeShmdW5jdGlvbiBydW5Jbml0aWFsaXplKCkgewogICAg
        ICAgIEVtYmVyLnJ1bihzZWxmLCAnX2luaXRpYWxpemUnKTsKICAgICAgfSk7
        CiAgICB9CiAgfSwKCiAgLyoqCiAgICBVc2UgdGhpcyB0byBkZWZlciByZWFk
        aW5lc3MgdW50aWwgc29tZSBjb25kaXRpb24gaXMgdHJ1ZS4KCiAgICBFeGFt
        cGxlOgoKICAgIGBgYGphdmFzY3JpcHQKICAgIEFwcCA9IEVtYmVyLkFwcGxp
        Y2F0aW9uLmNyZWF0ZSgpOwogICAgQXBwLmRlZmVyUmVhZGluZXNzKCk7Cgog
        ICAgalF1ZXJ5LmdldEpTT04oIi9hdXRoLXRva2VuIiwgZnVuY3Rpb24odG9r
        ZW4pIHsKICAgICAgQXBwLnRva2VuID0gdG9rZW47CiAgICAgIEFwcC5hZHZh
        bmNlUmVhZGluZXNzKCk7CiAgICB9KTsKICAgIGBgYAoKICAgIFRoaXMgYWxs
        b3dzIHlvdSB0byBwZXJmb3JtIGFzeW5jaHJvbm91cyBzZXR1cCBsb2dpYyBh
        bmQgZGVmZXIKICAgIGJvb3RpbmcgeW91ciBhcHBsaWNhdGlvbiB1bnRpbCB0
        aGUgc2V0dXAgaGFzIGZpbmlzaGVkLgoKICAgIEhvd2V2ZXIsIGlmIHRoZSBz
        ZXR1cCByZXF1aXJlcyBhIGxvYWRpbmcgVUksIGl0IG1pZ2h0IGJlIGJldHRl
        cgogICAgdG8gdXNlIHRoZSByb3V0ZXIgZm9yIHRoaXMgcHVycG9zZS4KCiAg
        ICBAbWV0aG9kIGRlZmVyUmVhZGluZXNzCiAgKi8KICBkZWZlclJlYWRpbmVz
        czogZnVuY3Rpb24oKSB7CiAgICBFbWJlci5hc3NlcnQoIllvdSBtdXN0IGNh
        bGwgZGVmZXJSZWFkaW5lc3Mgb24gYW4gaW5zdGFuY2Ugb2YgRW1iZXIuQXBw
        bGljYXRpb24iLCB0aGlzIGluc3RhbmNlb2YgRW1iZXIuQXBwbGljYXRpb24p
        OwogICAgRW1iZXIuYXNzZXJ0KCJZb3UgY2Fubm90IGRlZmVyIHJlYWRpbmVz
        cyBzaW5jZSB0aGUgYHJlYWR5KClgIGhvb2sgaGFzIGFscmVhZHkgYmVlbiBj
        YWxsZWQuIiwgdGhpcy5fcmVhZGluZXNzRGVmZXJyYWxzID4gMCk7CiAgICB0
        aGlzLl9yZWFkaW5lc3NEZWZlcnJhbHMrKzsKICB9LAoKICAvKioKICAgIENh
        bGwgYGFkdmFuY2VSZWFkaW5lc3NgIGFmdGVyIGFueSBhc3luY2hyb25vdXMg
        c2V0dXAgbG9naWMgaGFzIGNvbXBsZXRlZC4KICAgIEVhY2ggY2FsbCB0byBg
        ZGVmZXJSZWFkaW5lc3NgIG11c3QgYmUgbWF0Y2hlZCBieSBhIGNhbGwgdG8g
        YGFkdmFuY2VSZWFkaW5lc3NgCiAgICBvciB0aGUgYXBwbGljYXRpb24gd2ls
        bCBuZXZlciBiZWNvbWUgcmVhZHkgYW5kIHJvdXRpbmcgd2lsbCBub3QgYmVn
        aW4uCgogICAgQG1ldGhvZCBhZHZhbmNlUmVhZGluZXNzCiAgICBAc2VlIHtF
        bWJlci5BcHBsaWNhdGlvbiNkZWZlclJlYWRpbmVzc30KICAqLwogIGFkdmFu
        Y2VSZWFkaW5lc3M6IGZ1bmN0aW9uKCkgewogICAgRW1iZXIuYXNzZXJ0KCJZ
        b3UgbXVzdCBjYWxsIGFkdmFuY2VSZWFkaW5lc3Mgb24gYW4gaW5zdGFuY2Ug
        b2YgRW1iZXIuQXBwbGljYXRpb24iLCB0aGlzIGluc3RhbmNlb2YgRW1iZXIu
        QXBwbGljYXRpb24pOwogICAgdGhpcy5fcmVhZGluZXNzRGVmZXJyYWxzLS07
        CgogICAgaWYgKHRoaXMuX3JlYWRpbmVzc0RlZmVycmFscyA9PT0gMCkgewog
        ICAgICBFbWJlci5ydW4ub25jZSh0aGlzLCB0aGlzLmRpZEJlY29tZVJlYWR5
        KTsKICAgIH0KICB9LAoKICAvKioKICAgIHJlZ2lzdGVycyBhIGZhY3Rvcnkg
        Zm9yIGxhdGVyIGluamVjdGlvbgoKICAgIEV4YW1wbGU6CgogICAgYGBgamF2
        YXNjcmlwdAogICAgQXBwID0gRW1iZXIuQXBwbGljYXRpb24uY3JlYXRlKCk7
        CgogICAgQXBwLlBlcnNvbiAgPSBFbWJlci5PYmplY3QuZXh0ZW5kKHt9KTsK
        ICAgIEFwcC5PcmFuZ2UgID0gRW1iZXIuT2JqZWN0LmV4dGVuZCh7fSk7CiAg
        ICBBcHAuRW1haWwgICA9IEVtYmVyLk9iamVjdC5leHRlbmQoe30pOwogICAg
        QXBwLnNlc3Npb24gPSBFbWJlci5PYmplY3QuY3JlYXRlKHt9KTsKCiAgICBB
        cHAucmVnaXN0ZXIoJ21vZGVsOnVzZXInLCBBcHAuUGVyc29uLCB7c2luZ2xl
        dG9uOiBmYWxzZSB9KTsKICAgIEFwcC5yZWdpc3RlcignZnJ1aXQ6ZmF2b3Jp
        dGUnLCBBcHAuT3JhbmdlKTsKICAgIEFwcC5yZWdpc3RlcignY29tbXVuaWNh
        dGlvbjptYWluJywgQXBwLkVtYWlsLCB7c2luZ2xldG9uOiBmYWxzZX0pOwog
        ICAgQXBwLnJlZ2lzdGVyKCdzZXNzaW9uJywgQXBwLnNlc3Npb24sIHtpbnN0
        YW50aWF0ZTogZmFsc2V9KTsKICAgIGBgYAoKICAgIEBtZXRob2QgcmVnaXN0
        ZXIKICAgIEBwYXJhbSAgZnVsbE5hbWUge1N0cmluZ30gdHlwZTpuYW1lIChl
        LmcuLCAnbW9kZWw6dXNlcicpCiAgICBAcGFyYW0gIGZhY3Rvcnkge0Z1bmN0
        aW9ufSAoZS5nLiwgQXBwLlBlcnNvbikKICAgIEBwYXJhbSAgb3B0aW9ucyB7
        U3RyaW5nfSAob3B0aW9uYWwpCiAgKiovCiAgcmVnaXN0ZXI6IGZ1bmN0aW9u
        KCkgewogICAgdmFyIGNvbnRhaW5lciA9IHRoaXMuX19jb250YWluZXJfXzsK
        ICAgIGNvbnRhaW5lci5yZWdpc3Rlci5hcHBseShjb250YWluZXIsIGFyZ3Vt
        ZW50cyk7CiAgfSwKICAvKioKICAgIGRlZmluZXMgYW4gaW5qZWN0aW9uIG9y
        IHR5cGVJbmplY3Rpb24KCiAgICBFeGFtcGxlOgoKICAgIGBgYGphdmFzY3Jp
        cHQKICAgIEFwcC5pbmplY3QoPGZ1bGxfbmFtZSBvciB0eXBlPiwgPHByb3Bl
        cnR5IG5hbWU+LCA8ZnVsbF9uYW1lPikKICAgIEFwcC5pbmplY3QoJ2NvbnRy
        b2xsZXI6YXBwbGljYXRpb24nLCAnZW1haWwnLCAnbW9kZWw6ZW1haWwnKQog
        ICAgQXBwLmluamVjdCgnY29udHJvbGxlcicsICdzb3VyY2UnLCAnc291cmNl
        Om1haW4nKQogICAgYGBgCiAgICBQbGVhc2Ugbm90ZSB0aGF0IGluamVjdGlv
        bnMgb24gbW9kZWxzIGFyZSBjdXJyZW50bHkgZGlzYWJsZWQuIAogICAgVGhp
        cyB3YXMgZG9uZSBiZWNhdXNlIGVtYmVyLWRhdGEgd2FzIG5vdCByZWFkeSBm
        b3IgZnVsbHkgYSBjb250YWluZXIgYXdhcmUgZWNvc3lzdGVtLgogICAgCiAg
        ICBZb3UgY2FuIGVuYWJsZSBpbmplY3Rpb25zIG9uIG1vZGVscyBieSBzZXR0
        aW5nIGBFbWJlci5NT0RFTF9GQUNUT1JZX0lOSkVDVElPTlNgIGZsYWcgdG8g
        YHRydWVgCiAgICBJZiBtb2RlbCBmYWN0b3J5IGluamVjdGlvbnMgYXJlIGVu
        YWJsZWQsIG1vZGVscyBzaG91bGQgbm90IGJlCiAgICBhY2Nlc3NlZCBnbG9i
        YWxseSAob25seSB0aHJvdWdoIGBjb250YWluZXIubG9va3VwRmFjdG9yeSgn
        bW9kZWw6bW9kZWxOYW1lJykpYCk7CgogICAgQG1ldGhvZCBpbmplY3QKICAg
        IEBwYXJhbSAgZmFjdG9yeU5hbWVPclR5cGUge1N0cmluZ30KICAgIEBwYXJh
        bSAgcHJvcGVydHkge1N0cmluZ30KICAgIEBwYXJhbSAgaW5qZWN0aW9uTmFt
        ZSB7U3RyaW5nfQogICoqLwogIGluamVjdDogZnVuY3Rpb24oKSB7CiAgICB2
        YXIgY29udGFpbmVyID0gdGhpcy5fX2NvbnRhaW5lcl9fOwogICAgY29udGFp
        bmVyLmluamVjdGlvbi5hcHBseShjb250YWluZXIsIGFyZ3VtZW50cyk7CiAg
        fSwKCiAgLyoqCiAgICBDYWxsaW5nIGluaXRpYWxpemUgbWFudWFsbHkgaXMg
        bm90IHN1cHBvcnRlZC4KCiAgICBQbGVhc2Ugc2VlIEVtYmVyLkFwcGxpY2F0
        aW9uI2FkdmFuY2VSZWFkaW5lc3MgYW5kCiAgICBFbWJlci5BcHBsaWNhdGlv
        biNkZWZlclJlYWRpbmVzcy4KCiAgICBAcHJpdmF0ZQogICAgQGRlcHJlY2F0
        ZWQKICAgIEBtZXRob2QgaW5pdGlhbGl6ZQogICAqKi8KICBpbml0aWFsaXpl
        OiBmdW5jdGlvbigpIHsKICAgIEVtYmVyLmRlcHJlY2F0ZSgnQ2FsbGluZyBp
        bml0aWFsaXplIG1hbnVhbGx5IGlzIG5vdCBzdXBwb3J0ZWQuIFBsZWFzZSBz
        ZWUgRW1iZXIuQXBwbGljYXRpb24jYWR2YW5jZVJlYWRpbmVzcyBhbmQgRW1i
        ZXIuQXBwbGljYXRpb24jZGVmZXJSZWFkaW5lc3MnKTsKICB9LAogIC8qKgog
        ICAgSW5pdGlhbGl6ZSB0aGUgYXBwbGljYXRpb24uIFRoaXMgaGFwcGVucyBh
        dXRvbWF0aWNhbGx5LgoKICAgIFJ1biBhbnkgaW5pdGlhbGl6ZXJzIGFuZCBy
        dW4gdGhlIGFwcGxpY2F0aW9uIGxvYWQgaG9vay4gVGhlc2UgaG9va3MgbWF5
        CiAgICBjaG9vc2UgdG8gZGVmZXIgcmVhZGluZXNzLiBGb3IgZXhhbXBsZSwg
        YW4gYXV0aGVudGljYXRpb24gaG9vayBtaWdodCB3YW50CiAgICB0byBkZWZl
        ciByZWFkaW5lc3MgdW50aWwgdGhlIGF1dGggdG9rZW4gaGFzIGJlZW4gcmV0
        cmlldmVkLgoKICAgIEBwcml2YXRlCiAgICBAbWV0aG9kIF9pbml0aWFsaXpl
        CiAgKi8KICBfaW5pdGlhbGl6ZTogZnVuY3Rpb24oKSB7CiAgICBpZiAodGhp
        cy5pc0Rlc3Ryb3llZCkgeyByZXR1cm47IH0KCiAgICAvLyBBdCB0aGlzIHBv
        aW50LCB0aGUgQXBwLlJvdXRlciBtdXN0IGFscmVhZHkgYmUgYXNzaWduZWQK
        ICAgIGlmICh0aGlzLlJvdXRlcikgewogICAgICB2YXIgY29udGFpbmVyID0g
        dGhpcy5fX2NvbnRhaW5lcl9fOwogICAgICBjb250YWluZXIudW5yZWdpc3Rl
        cigncm91dGVyOm1haW4nKTsKICAgICAgY29udGFpbmVyLnJlZ2lzdGVyKCdy
        b3V0ZXI6bWFpbicsIHRoaXMuUm91dGVyKTsKICAgIH0KCiAgICB0aGlzLnJ1
        bkluaXRpYWxpemVycygpOwogICAgRW1iZXIucnVuTG9hZEhvb2tzKCdhcHBs
        aWNhdGlvbicsIHRoaXMpOwoKICAgIC8vIEF0IHRoaXMgcG9pbnQsIGFueSBp
        bml0aWFsaXplcnMgb3IgbG9hZCBob29rcyB0aGF0IHdvdWxkIGhhdmUgd2Fu
        dGVkCiAgICAvLyB0byBkZWZlciByZWFkaW5lc3MgaGF2ZSBmaXJlZC4gSW4g
        Z2VuZXJhbCwgYWR2YW5jaW5nIHJlYWRpbmVzcyBoZXJlCiAgICAvLyB3aWxs
        IHByb2NlZWQgdG8gZGlkQmVjb21lUmVhZHkuCiAgICB0aGlzLmFkdmFuY2VS
        ZWFkaW5lc3MoKTsKCiAgICByZXR1cm4gdGhpczsKICB9LAoKICAvKioKICAg
        IFJlc2V0IHRoZSBhcHBsaWNhdGlvbi4gVGhpcyBpcyB0eXBpY2FsbHkgdXNl
        ZCBvbmx5IGluIHRlc3RzLiBJdCBjbGVhbnMgdXAKICAgIHRoZSBhcHBsaWNh
        dGlvbiBpbiB0aGUgZm9sbG93aW5nIG9yZGVyOgoKICAgIDEuIERlYWN0aXZh
        dGUgZXhpc3Rpbmcgcm91dGVzCiAgICAyLiBEZXN0cm95IGFsbCBvYmplY3Rz
        IGluIHRoZSBjb250YWluZXIKICAgIDMuIENyZWF0ZSBhIG5ldyBhcHBsaWNh
        dGlvbiBjb250YWluZXIKICAgIDQuIFJlLXJvdXRlIHRvIHRoZSBleGlzdGlu
        ZyB1cmwKCiAgICBUeXBpY2FsIEV4YW1wbGU6CgogICAgYGBgamF2YXNjcmlw
        dAoKICAgIHZhciBBcHA7CgogICAgRW1iZXIucnVuKGZ1bmN0aW9uKCkgewog
        ICAgICBBcHAgPSBFbWJlci5BcHBsaWNhdGlvbi5jcmVhdGUoKTsKICAgIH0p
        OwoKICAgIG1vZHVsZSgiYWNjZXB0YW5jZSB0ZXN0IiwgewogICAgICBzZXR1
        cDogZnVuY3Rpb24oKSB7CiAgICAgICAgQXBwLnJlc2V0KCk7CiAgICAgIH0K
        ICAgIH0pOwoKICAgIHRlc3QoImZpcnN0IHRlc3QiLCBmdW5jdGlvbigpIHsK
        ICAgICAgLy8gQXBwIGlzIGZyZXNobHkgcmVzZXQKICAgIH0pOwoKICAgIHRl
        c3QoImZpcnN0IHRlc3QiLCBmdW5jdGlvbigpIHsKICAgICAgLy8gQXBwIGlz
        IGFnYWluIGZyZXNobHkgcmVzZXQKICAgIH0pOwogICAgYGBgCgogICAgQWR2
        YW5jZWQgRXhhbXBsZToKCiAgICBPY2Nhc2lvbmFsbHkgeW91IG1heSB3YW50
        IHRvIHByZXZlbnQgdGhlIGFwcCBmcm9tIGluaXRpYWxpemluZyBkdXJpbmcK
        ICAgIHNldHVwLiBUaGlzIGNvdWxkIGVuYWJsZSBleHRyYSBjb25maWd1cmF0
        aW9uLCBvciBlbmFibGUgYXNzZXJ0aW5nIHByaW9yCiAgICB0byB0aGUgYXBw
        IGJlY29taW5nIHJlYWR5LgoKICAgIGBgYGphdmFzY3JpcHQKCiAgICB2YXIg
        QXBwOwoKICAgIEVtYmVyLnJ1bihmdW5jdGlvbigpIHsKICAgICAgQXBwID0g
        RW1iZXIuQXBwbGljYXRpb24uY3JlYXRlKCk7CiAgICB9KTsKCiAgICBtb2R1
        bGUoImFjY2VwdGFuY2UgdGVzdCIsIHsKICAgICAgc2V0dXA6IGZ1bmN0aW9u
        KCkgewogICAgICAgIEVtYmVyLnJ1bihmdW5jdGlvbigpIHsKICAgICAgICAg
        IEFwcC5yZXNldCgpOwogICAgICAgICAgQXBwLmRlZmVyUmVhZGluZXNzKCk7
        CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0pOwoKICAgIHRlc3QoImZpcnN0
        IHRlc3QiLCBmdW5jdGlvbigpIHsKICAgICAgb2sodHJ1ZSwgJ3NvbWV0aGlu
        ZyBiZWZvcmUgYXBwIGlzIGluaXRpYWxpemVkJyk7CgogICAgICBFbWJlci5y
        dW4oZnVuY3Rpb24oKSB7CiAgICAgICAgQXBwLmFkdmFuY2VSZWFkaW5lc3Mo
        KTsKICAgICAgfSk7CiAgICAgIG9rKHRydWUsICdzb21ldGhpbmcgYWZ0ZXIg
        YXBwIGlzIGluaXRpYWxpemVkJyk7CiAgICB9KTsKICAgIGBgYAoKICAgIEBt
        ZXRob2QgcmVzZXQKICAqKi8KICByZXNldDogZnVuY3Rpb24oKSB7CiAgICB0
        aGlzLl9yZWFkaW5lc3NEZWZlcnJhbHMgPSAxOwoKICAgIGZ1bmN0aW9uIGhh
        bmRsZVJlc2V0KCkgewogICAgICB2YXIgcm91dGVyID0gdGhpcy5fX2NvbnRh
        aW5lcl9fLmxvb2t1cCgncm91dGVyOm1haW4nKTsKICAgICAgcm91dGVyLnJl
        c2V0KCk7CgogICAgICBFbWJlci5ydW4odGhpcy5fX2NvbnRhaW5lcl9fLCAn
        ZGVzdHJveScpOwoKICAgICAgdGhpcy5idWlsZENvbnRhaW5lcigpOwoKICAg
        ICAgRW1iZXIucnVuLnNjaGVkdWxlKCdhY3Rpb25zJywgdGhpcywgZnVuY3Rp
        b24oKSB7CiAgICAgICAgdGhpcy5faW5pdGlhbGl6ZSgpOwogICAgICB9KTsK
        ICAgIH0KCiAgICBFbWJlci5ydW4uam9pbih0aGlzLCBoYW5kbGVSZXNldCk7
        CiAgfSwKCiAgLyoqCiAgICBAcHJpdmF0ZQogICAgQG1ldGhvZCBydW5Jbml0
        aWFsaXplcnMKICAqLwogIHJ1bkluaXRpYWxpemVyczogZnVuY3Rpb24oKSB7
        CiAgICB2YXIgaW5pdGlhbGl6ZXJzID0gZ2V0KHRoaXMuY29uc3RydWN0b3Is
        ICdpbml0aWFsaXplcnMnKSwKICAgICAgICBjb250YWluZXIgPSB0aGlzLl9f
        Y29udGFpbmVyX18sCiAgICAgICAgZ3JhcGggPSBuZXcgRW1iZXIuREFHKCks
        CiAgICAgICAgbmFtZXNwYWNlID0gdGhpcywKICAgICAgICBuYW1lLCBpbml0
        aWFsaXplcjsKCiAgICBmb3IgKG5hbWUgaW4gaW5pdGlhbGl6ZXJzKSB7CiAg
        ICAgIGluaXRpYWxpemVyID0gaW5pdGlhbGl6ZXJzW25hbWVdOwogICAgICBn
        cmFwaC5hZGRFZGdlcyhpbml0aWFsaXplci5uYW1lLCBpbml0aWFsaXplci5p
        bml0aWFsaXplLCBpbml0aWFsaXplci5iZWZvcmUsIGluaXRpYWxpemVyLmFm
        dGVyKTsKICAgIH0KCiAgICBncmFwaC50b3Bzb3J0KGZ1bmN0aW9uICh2ZXJ0
        ZXgpIHsKICAgICAgdmFyIGluaXRpYWxpemVyID0gdmVydGV4LnZhbHVlOwog
        ICAgICBFbWJlci5hc3NlcnQoIk5vIGFwcGxpY2F0aW9uIGluaXRpYWxpemVy
        IG5hbWVkICciK3ZlcnRleC5uYW1lKyInIiwgaW5pdGlhbGl6ZXIpOwogICAg
        ICBpbml0aWFsaXplcihjb250YWluZXIsIG5hbWVzcGFjZSk7CiAgICB9KTsK
        ICB9LAoKICAvKioKICAgIEBwcml2YXRlCiAgICBAbWV0aG9kIGRpZEJlY29t
        ZVJlYWR5CiAgKi8KICBkaWRCZWNvbWVSZWFkeTogZnVuY3Rpb24oKSB7CiAg
        ICB0aGlzLnNldHVwRXZlbnREaXNwYXRjaGVyKCk7CiAgICB0aGlzLnJlYWR5
        KCk7IC8vIHVzZXIgaG9vawogICAgdGhpcy5zdGFydFJvdXRpbmcoKTsKCiAg
        ICBpZiAoIUVtYmVyLnRlc3RpbmcpIHsKICAgICAgLy8gRWFnZXJseSBuYW1l
        IGFsbCBjbGFzc2VzIHRoYXQgYXJlIGFscmVhZHkgbG9hZGVkCiAgICAgIEVt
        YmVyLk5hbWVzcGFjZS5wcm9jZXNzQWxsKCk7CiAgICAgIEVtYmVyLkJPT1RF
        RCA9IHRydWU7CiAgICB9CgogICAgdGhpcy5yZXNvbHZlKHRoaXMpOwogIH0s
        CgogIC8qKgogICAgU2V0dXAgdXAgdGhlIGV2ZW50IGRpc3BhdGNoZXIgdG8g
        cmVjZWl2ZSBldmVudHMgb24gdGhlCiAgICBhcHBsaWNhdGlvbidzIGByb290
        RWxlbWVudGAgd2l0aCBhbnkgcmVnaXN0ZXJlZAogICAgYGN1c3RvbUV2ZW50
        c2AuCgogICAgQHByaXZhdGUKICAgIEBtZXRob2Qgc2V0dXBFdmVudERpc3Bh
        dGNoZXIKICAqLwogIHNldHVwRXZlbnREaXNwYXRjaGVyOiBmdW5jdGlvbigp
        IHsKICAgIHZhciBjdXN0b21FdmVudHMgPSBnZXQodGhpcywgJ2N1c3RvbUV2
        ZW50cycpLAogICAgICAgIHJvb3RFbGVtZW50ID0gZ2V0KHRoaXMsICdyb290
        RWxlbWVudCcpLAogICAgICAgIGRpc3BhdGNoZXIgPSB0aGlzLl9fY29udGFp
        bmVyX18ubG9va3VwKCdldmVudF9kaXNwYXRjaGVyOm1haW4nKTsKCiAgICBz
        ZXQodGhpcywgJ2V2ZW50RGlzcGF0Y2hlcicsIGRpc3BhdGNoZXIpOwogICAg
        ZGlzcGF0Y2hlci5zZXR1cChjdXN0b21FdmVudHMsIHJvb3RFbGVtZW50KTsK
        ICB9LAoKICAvKioKICAgIHRyaWdnZXIgYSBuZXcgY2FsbCB0byBgcm91dGVg
        IHdoZW5ldmVyIHRoZSBVUkwgY2hhbmdlcy4KICAgIElmIHRoZSBhcHBsaWNh
        dGlvbiBoYXMgYSByb3V0ZXIsIHVzZSBpdCB0byByb3V0ZSB0byB0aGUgY3Vy
        cmVudCBVUkwsIGFuZAoKICAgIEBwcml2YXRlCiAgICBAbWV0aG9kIHN0YXJ0
        Um91dGluZwogICAgQHByb3BlcnR5IHJvdXRlciB7RW1iZXIuUm91dGVyfQog
        ICovCiAgc3RhcnRSb3V0aW5nOiBmdW5jdGlvbigpIHsKICAgIHZhciByb3V0
        ZXIgPSB0aGlzLl9fY29udGFpbmVyX18ubG9va3VwKCdyb3V0ZXI6bWFpbicp
        OwogICAgaWYgKCFyb3V0ZXIpIHsgcmV0dXJuOyB9CgogICAgcm91dGVyLnN0
        YXJ0Um91dGluZygpOwogIH0sCgogIGhhbmRsZVVSTDogZnVuY3Rpb24odXJs
        KSB7CiAgICB2YXIgcm91dGVyID0gdGhpcy5fX2NvbnRhaW5lcl9fLmxvb2t1
        cCgncm91dGVyOm1haW4nKTsKCiAgICByb3V0ZXIuaGFuZGxlVVJMKHVybCk7
        CiAgfSwKCiAgLyoqCiAgICBDYWxsZWQgd2hlbiB0aGUgQXBwbGljYXRpb24g
        aGFzIGJlY29tZSByZWFkeS4KICAgIFRoZSBjYWxsIHdpbGwgYmUgZGVsYXll
        ZCB1bnRpbCB0aGUgRE9NIGhhcyBiZWNvbWUgcmVhZHkuCgogICAgQGV2ZW50
        IHJlYWR5CiAgKi8KICByZWFkeTogRW1iZXIuSywKCiAgLyoqCiAgICBAZGVw
        cmVjYXRlZCBVc2UgJ1Jlc29sdmVyJyBpbnN0ZWFkCiAgICBTZXQgdGhpcyB0
        byBwcm92aWRlIGFuIGFsdGVybmF0ZSBjbGFzcyB0byBgRW1iZXIuRGVmYXVs
        dFJlc29sdmVyYAoKCiAgICBAcHJvcGVydHkgcmVzb2x2ZXIKICAqLwogIHJl
        c29sdmVyOiBudWxsLAoKICAvKioKICAgIFNldCB0aGlzIHRvIHByb3ZpZGUg
        YW4gYWx0ZXJuYXRlIGNsYXNzIHRvIGBFbWJlci5EZWZhdWx0UmVzb2x2ZXJg
        CgogICAgQHByb3BlcnR5IHJlc29sdmVyCiAgKi8KICBSZXNvbHZlcjogbnVs
        bCwKCiAgd2lsbERlc3Ryb3k6IGZ1bmN0aW9uKCkgewogICAgRW1iZXIuQk9P
        VEVEID0gZmFsc2U7CiAgICAvLyBFbnN1cmUgZGVhY3RpdmF0aW9uIG9mIHJv
        dXRlcyBiZWZvcmUgb2JqZWN0cyBhcmUgZGVzdHJveWVkCiAgICB0aGlzLl9f
        Y29udGFpbmVyX18ubG9va3VwKCdyb3V0ZXI6bWFpbicpLnJlc2V0KCk7Cgog
        ICAgdGhpcy5fX2NvbnRhaW5lcl9fLmRlc3Ryb3koKTsKICB9LAoKICBpbml0
        aWFsaXplcjogZnVuY3Rpb24ob3B0aW9ucykgewogICAgdGhpcy5jb25zdHJ1
        Y3Rvci5pbml0aWFsaXplcihvcHRpb25zKTsKICB9Cn0pOwoKRW1iZXIuQXBw
        bGljYXRpb24ucmVvcGVuQ2xhc3MoewogIGluaXRpYWxpemVyczoge30sCiAg
        aW5pdGlhbGl6ZXI6IGZ1bmN0aW9uKGluaXRpYWxpemVyKSB7CiAgICAvLyBJ
        ZiB0aGlzIGlzIHRoZSBmaXJzdCBpbml0aWFsaXplciBiZWluZyBhZGRlZCB0
        byBhIHN1YmNsYXNzLCB3ZSBhcmUgZ29pbmcgdG8gcmVvcGVuIHRoZSBjbGFz
        cwogICAgLy8gdG8gbWFrZSBzdXJlIHdlIGhhdmUgYSBuZXcgYGluaXRpYWxp
        emVyc2Agb2JqZWN0LCB3aGljaCBleHRlbmRzIGZyb20gdGhlIHBhcmVudCBj
        bGFzcycgdXNpbmcKICAgIC8vIHByb3RvdHlwYWwgaW5oZXJpdGFuY2UuIFdp
        dGhvdXQgdGhpcywgYXR0ZW1wdGluZyB0byBhZGQgaW5pdGlhbGl6ZXJzIHRv
        IHRoZSBzdWJjbGFzcyB3b3VsZAogICAgLy8gcG9sbHV0ZSB0aGUgcGFyZW50
        IGNsYXNzIGFzIHdlbGwgYXMgb3RoZXIgc3ViY2xhc3Nlcy4KICAgIGlmICh0
        aGlzLnN1cGVyY2xhc3MuaW5pdGlhbGl6ZXJzICE9PSB1bmRlZmluZWQgJiYg
        dGhpcy5zdXBlcmNsYXNzLmluaXRpYWxpemVycyA9PT0gdGhpcy5pbml0aWFs
        aXplcnMpIHsKICAgICAgdGhpcy5yZW9wZW5DbGFzcyh7CiAgICAgICAgaW5p
        dGlhbGl6ZXJzOiBFbWJlci5jcmVhdGUodGhpcy5pbml0aWFsaXplcnMpCiAg
        ICAgIH0pOwogICAgfQoKICAgIEVtYmVyLmFzc2VydCgiVGhlIGluaXRpYWxp
        emVyICciICsgaW5pdGlhbGl6ZXIubmFtZSArICInIGhhcyBhbHJlYWR5IGJl
        ZW4gcmVnaXN0ZXJlZCIsICF0aGlzLmluaXRpYWxpemVyc1tpbml0aWFsaXpl
        ci5uYW1lXSk7CiAgICBFbWJlci5hc3NlcnQoIkFuIGluaXRpYWxpemVyIGNh
        bm5vdCBiZSByZWdpc3RlcmVkIHdpdGggYm90aCBhIGJlZm9yZSBhbmQgYW4g
        YWZ0ZXIiLCAhKGluaXRpYWxpemVyLmJlZm9yZSAmJiBpbml0aWFsaXplci5h
        ZnRlcikpOwogICAgRW1iZXIuYXNzZXJ0KCJBbiBpbml0aWFsaXplciBjYW5u
        b3QgYmUgcmVnaXN0ZXJlZCB3aXRob3V0IGFuIGluaXRpYWxpemUgZnVuY3Rp
        b24iLCBFbWJlci5jYW5JbnZva2UoaW5pdGlhbGl6ZXIsICdpbml0aWFsaXpl
        JykpOwoKICAgIHRoaXMuaW5pdGlhbGl6ZXJzW2luaXRpYWxpemVyLm5hbWVd
        ID0gaW5pdGlhbGl6ZXI7CiAgfSwKCiAgLyoqCiAgICBUaGlzIGNyZWF0ZXMg
        YSBjb250YWluZXIgd2l0aCB0aGUgZGVmYXVsdCBFbWJlciBuYW1pbmcgY29u
        dmVudGlvbnMuCgogICAgSXQgYWxzbyBjb25maWd1cmVzIHRoZSBjb250YWlu
        ZXI6CgogICAgKiByZWdpc3RlcmVkIHZpZXdzIGFyZSBjcmVhdGVkIGV2ZXJ5
        IHRpbWUgdGhleSBhcmUgbG9va2VkIHVwICh0aGV5IGFyZQogICAgICBub3Qg
        c2luZ2xldG9ucykKICAgICogcmVnaXN0ZXJlZCB0ZW1wbGF0ZXMgYXJlIG5v
        dCBmYWN0b3JpZXM7IHRoZSByZWdpc3RlcmVkIHZhbHVlIGlzCiAgICAgIHJl
        dHVybmVkIGRpcmVjdGx5LgogICAgKiB0aGUgcm91dGVyIHJlY2VpdmVzIHRo
        ZSBhcHBsaWNhdGlvbiBhcyBpdHMgYG5hbWVzcGFjZWAgcHJvcGVydHkKICAg
        ICogYWxsIGNvbnRyb2xsZXJzIHJlY2VpdmUgdGhlIHJvdXRlciBhcyB0aGVp
        ciBgdGFyZ2V0YCBhbmQgYGNvbnRyb2xsZXJzYAogICAgICBwcm9wZXJ0aWVz
        CiAgICAqIGFsbCBjb250cm9sbGVycyByZWNlaXZlIHRoZSBhcHBsaWNhdGlv
        biBhcyB0aGVpciBgbmFtZXNwYWNlYCBwcm9wZXJ0eQogICAgKiB0aGUgYXBw
        bGljYXRpb24gdmlldyByZWNlaXZlcyB0aGUgYXBwbGljYXRpb24gY29udHJv
        bGxlciBhcyBpdHMKICAgICAgYGNvbnRyb2xsZXJgIHByb3BlcnR5CiAgICAq
        IHRoZSBhcHBsaWNhdGlvbiB2aWV3IHJlY2VpdmVzIHRoZSBhcHBsaWNhdGlv
        biB0ZW1wbGF0ZSBhcyBpdHMKICAgICAgYGRlZmF1bHRUZW1wbGF0ZWAgcHJv
        cGVydHkKCiAgICBAcHJpdmF0ZQogICAgQG1ldGhvZCBidWlsZENvbnRhaW5l
        cgogICAgQHN0YXRpYwogICAgQHBhcmFtIHtFbWJlci5BcHBsaWNhdGlvbn0g
        bmFtZXNwYWNlIHRoZSBhcHBsaWNhdGlvbiB0byBidWlsZCB0aGUKICAgICAg
        Y29udGFpbmVyIGZvci4KICAgIEByZXR1cm4ge0VtYmVyLkNvbnRhaW5lcn0g
        dGhlIGJ1aWx0IGNvbnRhaW5lcgogICovCiAgYnVpbGRDb250YWluZXI6IGZ1
        bmN0aW9uKG5hbWVzcGFjZSkgewogICAgdmFyIGNvbnRhaW5lciA9IG5ldyBF
        bWJlci5Db250YWluZXIoKTsKCiAgICBFbWJlci5Db250YWluZXIuZGVmYXVs
        dENvbnRhaW5lciA9IG5ldyBEZXByZWNhdGVkQ29udGFpbmVyKGNvbnRhaW5l
        cik7CgogICAgY29udGFpbmVyLnNldCA9IEVtYmVyLnNldDsKICAgIGNvbnRh
        aW5lci5yZXNvbHZlciAgPSByZXNvbHZlckZvcihuYW1lc3BhY2UpOwogICAg
        Y29udGFpbmVyLm5vcm1hbGl6ZSA9IGNvbnRhaW5lci5yZXNvbHZlci5ub3Jt
        YWxpemU7CiAgICBjb250YWluZXIuZGVzY3JpYmUgID0gY29udGFpbmVyLnJl
        c29sdmVyLmRlc2NyaWJlOwogICAgY29udGFpbmVyLm1ha2VUb1N0cmluZyA9
        IGNvbnRhaW5lci5yZXNvbHZlci5tYWtlVG9TdHJpbmc7CgogICAgY29udGFp
        bmVyLm9wdGlvbnNGb3JUeXBlKCdjb21wb25lbnQnLCB7IHNpbmdsZXRvbjog
        ZmFsc2UgfSk7CiAgICBjb250YWluZXIub3B0aW9uc0ZvclR5cGUoJ3ZpZXcn
        LCB7IHNpbmdsZXRvbjogZmFsc2UgfSk7CiAgICBjb250YWluZXIub3B0aW9u
        c0ZvclR5cGUoJ3RlbXBsYXRlJywgeyBpbnN0YW50aWF0ZTogZmFsc2UgfSk7
        CiAgICBjb250YWluZXIub3B0aW9uc0ZvclR5cGUoJ2hlbHBlcicsIHsgaW5z
        dGFudGlhdGU6IGZhbHNlIH0pOwoKICAgIGNvbnRhaW5lci5yZWdpc3Rlcign
        YXBwbGljYXRpb246bWFpbicsIG5hbWVzcGFjZSwgeyBpbnN0YW50aWF0ZTog
        ZmFsc2UgfSk7CgogICAgY29udGFpbmVyLnJlZ2lzdGVyKCdjb250cm9sbGVy
        OmJhc2ljJywgRW1iZXIuQ29udHJvbGxlciwgeyBpbnN0YW50aWF0ZTogZmFs
        c2UgfSk7CiAgICBjb250YWluZXIucmVnaXN0ZXIoJ2NvbnRyb2xsZXI6b2Jq
        ZWN0JywgRW1iZXIuT2JqZWN0Q29udHJvbGxlciwgeyBpbnN0YW50aWF0ZTog
        ZmFsc2UgfSk7CiAgICBjb250YWluZXIucmVnaXN0ZXIoJ2NvbnRyb2xsZXI6
        YXJyYXknLCBFbWJlci5BcnJheUNvbnRyb2xsZXIsIHsgaW5zdGFudGlhdGU6
        IGZhbHNlIH0pOwogICAgY29udGFpbmVyLnJlZ2lzdGVyKCdyb3V0ZTpiYXNp
        YycsIEVtYmVyLlJvdXRlLCB7IGluc3RhbnRpYXRlOiBmYWxzZSB9KTsKICAg
        IGNvbnRhaW5lci5yZWdpc3RlcignZXZlbnRfZGlzcGF0Y2hlcjptYWluJywg
        RW1iZXIuRXZlbnREaXNwYXRjaGVyKTsKCiAgICBjb250YWluZXIucmVnaXN0
        ZXIoJ3JvdXRlcjptYWluJywgIEVtYmVyLlJvdXRlcik7CiAgICBjb250YWlu
        ZXIuaW5qZWN0aW9uKCdyb3V0ZXI6bWFpbicsICduYW1lc3BhY2UnLCAnYXBw
        bGljYXRpb246bWFpbicpOwoKICAgIGNvbnRhaW5lci5yZWdpc3RlcignbG9j
        YXRpb246aGFzaCcsIEVtYmVyLkhhc2hMb2NhdGlvbik7CiAgICBjb250YWlu
        ZXIucmVnaXN0ZXIoJ2xvY2F0aW9uOmhpc3RvcnknLCBFbWJlci5IaXN0b3J5
        TG9jYXRpb24pOwogICAgY29udGFpbmVyLnJlZ2lzdGVyKCdsb2NhdGlvbjpu
        b25lJywgRW1iZXIuTm9uZUxvY2F0aW9uKTsKCiAgICBjb250YWluZXIuaW5q
        ZWN0aW9uKCdjb250cm9sbGVyJywgJ3RhcmdldCcsICdyb3V0ZXI6bWFpbicp
        OwogICAgY29udGFpbmVyLmluamVjdGlvbignY29udHJvbGxlcicsICduYW1l
        c3BhY2UnLCAnYXBwbGljYXRpb246bWFpbicpOwoKICAgIGNvbnRhaW5lci5p
        bmplY3Rpb24oJ3JvdXRlJywgJ3JvdXRlcicsICdyb3V0ZXI6bWFpbicpOwoK
        ICAgIHJldHVybiBjb250YWluZXI7CiAgfQp9KTsKCi8qKgogIFRoaXMgZnVu
        Y3Rpb24gZGVmaW5lcyB0aGUgZGVmYXVsdCBsb29rdXAgcnVsZXMgZm9yIGNv
        bnRhaW5lciBsb29rdXBzOgoKICAqIHRlbXBsYXRlcyBhcmUgbG9va2VkIHVw
        IG9uIGBFbWJlci5URU1QTEFURVNgCiAgKiBvdGhlciBuYW1lcyBhcmUgbG9v
        a2VkIHVwIG9uIHRoZSBhcHBsaWNhdGlvbiBhZnRlciBjbGFzc2lmeWluZyB0
        aGUgbmFtZS4KICAgIEZvciBleGFtcGxlLCBgY29udHJvbGxlcjpwb3N0YCBs
        b29rcyB1cCBgQXBwLlBvc3RDb250cm9sbGVyYCBieSBkZWZhdWx0LgogICog
        aWYgdGhlIGRlZmF1bHQgbG9va3VwIGZhaWxzLCBsb29rIGZvciByZWdpc3Rl
        cmVkIGNsYXNzZXMgb24gdGhlIGNvbnRhaW5lcgoKICBUaGlzIGFsbG93cyB0
        aGUgYXBwbGljYXRpb24gdG8gcmVnaXN0ZXIgZGVmYXVsdCBpbmplY3Rpb25z
        IGluIHRoZSBjb250YWluZXIKICB0aGF0IGNvdWxkIGJlIG92ZXJyaWRkZW4g
        YnkgdGhlIG5vcm1hbCBuYW1pbmcgY29udmVudGlvbi4KCiAgQHByaXZhdGUK
        ICBAbWV0aG9kIHJlc29sdmVyRm9yCiAgQHBhcmFtIHtFbWJlci5OYW1lc3Bh
        Y2V9IG5hbWVzcGFjZSB0aGUgbmFtZXNwYWNlIHRvIGxvb2sgZm9yIGNsYXNz
        ZXMKICBAcmV0dXJuIHsqfSB0aGUgcmVzb2x2ZWQgdmFsdWUgZm9yIGEgZ2l2
        ZW4gbG9va3VwCiovCmZ1bmN0aW9uIHJlc29sdmVyRm9yKG5hbWVzcGFjZSkg
        ewogIGlmIChuYW1lc3BhY2UuZ2V0KCdyZXNvbHZlcicpKSB7CiAgICBFbWJl
        ci5kZXByZWNhdGUoJ0FwcGxpY2F0aW9uLnJlc29sdmVyIGlzIGRlcHJlY2F0
        ZWQgaW4gZmF2b3Igb2YgQXBwbGljYXRpb24uUmVzb2x2ZXInLCBmYWxzZSk7
        CiAgfQoKICB2YXIgUmVzb2x2ZXJDbGFzcyA9IG5hbWVzcGFjZS5nZXQoJ3Jl
        c29sdmVyJykgfHwgbmFtZXNwYWNlLmdldCgnUmVzb2x2ZXInKSB8fCBFbWJl
        ci5EZWZhdWx0UmVzb2x2ZXI7CiAgdmFyIHJlc29sdmVyID0gUmVzb2x2ZXJD
        bGFzcy5jcmVhdGUoewogICAgbmFtZXNwYWNlOiBuYW1lc3BhY2UKICB9KTsK
        CiAgZnVuY3Rpb24gcmVzb2x2ZShmdWxsTmFtZSkgewogICAgcmV0dXJuIHJl
        c29sdmVyLnJlc29sdmUoZnVsbE5hbWUpOwogIH0KCiAgcmVzb2x2ZS5kZXNj
        cmliZSA9IGZ1bmN0aW9uKGZ1bGxOYW1lKSB7CiAgICByZXR1cm4gcmVzb2x2
        ZXIubG9va3VwRGVzY3JpcHRpb24oZnVsbE5hbWUpOwogIH07CgogIHJlc29s
        dmUubWFrZVRvU3RyaW5nID0gZnVuY3Rpb24oZmFjdG9yeSwgZnVsbE5hbWUp
        IHsKICAgIHJldHVybiByZXNvbHZlci5tYWtlVG9TdHJpbmcoZmFjdG9yeSwg
        ZnVsbE5hbWUpOwogIH07CgogIHJlc29sdmUubm9ybWFsaXplID0gZnVuY3Rp
        b24oZnVsbE5hbWUpIHsKICAgIGlmIChyZXNvbHZlci5ub3JtYWxpemUpIHsK
        ICAgICAgcmV0dXJuIHJlc29sdmVyLm5vcm1hbGl6ZShmdWxsTmFtZSk7CiAg
        ICB9IGVsc2UgewogICAgICBFbWJlci5kZXByZWNhdGUoJ1RoZSBSZXNvbHZl
        ciBzaG91bGQgbm93IHByb3ZpZGUgYSBcJ25vcm1hbGl6ZVwnIGZ1bmN0aW9u
        JywgZmFsc2UpOwogICAgICByZXR1cm4gZnVsbE5hbWU7CiAgICB9CiAgfTsK
        CiAgcmV0dXJuIHJlc29sdmU7Cn0KCkVtYmVyLnJ1bkxvYWRIb29rcygnRW1i
        ZXIuQXBwbGljYXRpb24nLCBFbWJlci5BcHBsaWNhdGlvbik7Cgp9KSgpOwoK
        CgooZnVuY3Rpb24oKSB7Cgp9KSgpOwoKCgooZnVuY3Rpb24oKSB7Ci8qKgpA
        bW9kdWxlIGVtYmVyCkBzdWJtb2R1bGUgZW1iZXItYXBwbGljYXRpb24KKi8K
        CnZhciBnZXQgPSBFbWJlci5nZXQsIHNldCA9IEVtYmVyLnNldDsKCmZ1bmN0
        aW9uIHZlcmlmeU5lZWRzRGVwZW5kZW5jaWVzKGNvbnRyb2xsZXIsIGNvbnRh
        aW5lciwgbmVlZHMpIHsKICB2YXIgZGVwZW5kZW5jeSwgaSwgbCwgbWlzc2lu
        ZyA9IFtdOwoKICBmb3IgKGk9MCwgbD1uZWVkcy5sZW5ndGg7IGk8bDsgaSsr
        KSB7CiAgICBkZXBlbmRlbmN5ID0gbmVlZHNbaV07CgogICAgRW1iZXIuYXNz
        ZXJ0KEVtYmVyLmluc3BlY3QoY29udHJvbGxlcikgKyAiI25lZWRzIG11c3Qg
        bm90IHNwZWNpZnkgZGVwZW5kZW5jaWVzIHdpdGggcGVyaW9kcyBpbiB0aGVp
        ciBuYW1lcyAoIiArIGRlcGVuZGVuY3kgKyAiKSIsIGRlcGVuZGVuY3kuaW5k
        ZXhPZignLicpID09PSAtMSk7CgogICAgaWYgKGRlcGVuZGVuY3kuaW5kZXhP
        ZignOicpID09PSAtMSkgewogICAgICBkZXBlbmRlbmN5ID0gImNvbnRyb2xs
        ZXI6IiArIGRlcGVuZGVuY3k7CiAgICB9CgogICAgLy8gU3RydWN0dXJlIGFz
        c2VydCB0byBzdGlsbCBkbyB2ZXJpZmljYXRpb24gYnV0IG5vdCBzdHJpbmcg
        Y29uY2F0IGluIHByb2R1Y3Rpb24KICAgIGlmICghY29udGFpbmVyLmhhcyhk
        ZXBlbmRlbmN5KSkgewogICAgICBtaXNzaW5nLnB1c2goZGVwZW5kZW5jeSk7
        CiAgICB9CiAgfQogIGlmIChtaXNzaW5nLmxlbmd0aCkgewogICAgdGhyb3cg
        bmV3IEVtYmVyLkVycm9yKEVtYmVyLmluc3BlY3QoY29udHJvbGxlcikgKyAi
        IG5lZWRzIFsgIiArIG1pc3Npbmcuam9pbignLCAnKSArICIgXSBidXQgIiAr
        IChtaXNzaW5nLmxlbmd0aCA+IDEgPyAndGhleScgOiAnaXQnKSArICIgY291
        bGQgbm90IGJlIGZvdW5kIik7CiAgfQp9Cgp2YXIgZGVmYXVsdENvbnRyb2xs
        ZXJzQ29tcHV0ZWRQcm9wZXJ0eSA9IEVtYmVyLmNvbXB1dGVkKGZ1bmN0aW9u
        KCkgewogIHZhciBjb250cm9sbGVyID0gdGhpczsKCiAgcmV0dXJuIHsKICAg
        IG5lZWRzOiBnZXQoY29udHJvbGxlciwgJ25lZWRzJyksCiAgICBjb250YWlu
        ZXI6IGdldChjb250cm9sbGVyLCAnY29udGFpbmVyJyksCiAgICB1bmtub3du
        UHJvcGVydHk6IGZ1bmN0aW9uKGNvbnRyb2xsZXJOYW1lKSB7CiAgICAgIHZh
        ciBuZWVkcyA9IHRoaXMubmVlZHMsCiAgICAgICAgZGVwZW5kZW5jeSwgaSwg
        bDsKICAgICAgZm9yIChpPTAsIGw9bmVlZHMubGVuZ3RoOyBpPGw7IGkrKykg
        ewogICAgICAgIGRlcGVuZGVuY3kgPSBuZWVkc1tpXTsKICAgICAgICBpZiAo
        ZGVwZW5kZW5jeSA9PT0gY29udHJvbGxlck5hbWUpIHsKICAgICAgICAgIHJl
        dHVybiB0aGlzLmNvbnRhaW5lci5sb29rdXAoJ2NvbnRyb2xsZXI6JyArIGNv
        bnRyb2xsZXJOYW1lKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHZhciBl
        cnJvck1lc3NhZ2UgPSBFbWJlci5pbnNwZWN0KGNvbnRyb2xsZXIpICsgJyNu
        ZWVkcyBkb2VzIG5vdCBpbmNsdWRlIGAnICsgY29udHJvbGxlck5hbWUgKyAn
        YC4gVG8gYWNjZXNzIHRoZSAnICsgY29udHJvbGxlck5hbWUgKyAnIGNvbnRy
        b2xsZXIgZnJvbSAnICsgRW1iZXIuaW5zcGVjdChjb250cm9sbGVyKSArICcs
        ICcgKyBFbWJlci5pbnNwZWN0KGNvbnRyb2xsZXIpICsgJyBzaG91bGQgaGF2
        ZSBhIGBuZWVkc2AgcHJvcGVydHkgdGhhdCBpcyBhbiBhcnJheSBvZiB0aGUg
        Y29udHJvbGxlcnMgaXQgaGFzIGFjY2VzcyB0by4nOwogICAgICB0aHJvdyBu
        ZXcgUmVmZXJlbmNlRXJyb3IoZXJyb3JNZXNzYWdlKTsKICAgIH0sCiAgICBz
        ZXRVbmtub3duUHJvcGVydHk6IGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7CiAg
        ICAgIHRocm93IG5ldyBFcnJvcigiWW91IGNhbm5vdCBvdmVyd3JpdGUgdGhl
        IHZhbHVlIG9mIGBjb250cm9sbGVycy4iICsga2V5ICsgImAgb2YgIiArIEVt
        YmVyLmluc3BlY3QoY29udHJvbGxlcikpOwogICAgfQogIH07Cn0pOwoKLyoq
        CiAgQGNsYXNzIENvbnRyb2xsZXJNaXhpbgogIEBuYW1lc3BhY2UgRW1iZXIK
        Ki8KRW1iZXIuQ29udHJvbGxlck1peGluLnJlb3Blbih7CiAgY29uY2F0ZW5h
        dGVkUHJvcGVydGllczogWyduZWVkcyddLAoKICAvKioKICAgIEFuIGFycmF5
        IG9mIG90aGVyIGNvbnRyb2xsZXIgb2JqZWN0cyBhdmFpbGFibGUgaW5zaWRl
        CiAgICBpbnN0YW5jZXMgb2YgdGhpcyBjb250cm9sbGVyIHZpYSB0aGUgYGNv
        bnRyb2xsZXJzYAogICAgcHJvcGVydHk6CgogICAgRm9yIGV4YW1wbGUsIHdo
        ZW4geW91IGRlZmluZSBhIGNvbnRyb2xsZXI6CgogICAgYGBgamF2YXNjcmlw
        dAogICAgQXBwLkNvbW1lbnRzQ29udHJvbGxlciA9IEVtYmVyLkFycmF5Q29u
        dHJvbGxlci5leHRlbmQoewogICAgICBuZWVkczogWydwb3N0J10KICAgIH0p
        OwogICAgYGBgCgogICAgVGhlIGFwcGxpY2F0aW9uJ3Mgc2luZ2xlIGluc3Rh
        bmNlIG9mIHRoZXNlIG90aGVyCiAgICBjb250cm9sbGVycyBhcmUgYWNjZXNz
        aWJsZSBieSBuYW1lIHRocm91Z2ggdGhlCiAgICBgY29udHJvbGxlcnNgIHBy
        b3BlcnR5OgoKICAgIGBgYGphdmFzY3JpcHQKICAgIHRoaXMuZ2V0KCdjb250
        cm9sbGVycy5wb3N0Jyk7IC8vIGluc3RhbmNlIG9mIEFwcC5Qb3N0Q29udHJv
        bGxlcgogICAgYGBgCgogICAgR2l2ZW4gdGhhdCB5b3UgaGF2ZSBhIG5lc3Rl
        ZCBjb250cm9sbGVyIChuZXN0ZWQgcmVzb3VyY2UpOgoKICAgIGBgYGphdmFz
        Y3JpcHQKICAgIEFwcC5Db21tZW50c05ld0NvbnRyb2xsZXIgPSBFbWJlci5P
        YmplY3RDb250cm9sbGVyLmV4dGVuZCh7CiAgICB9KTsKICAgIGBgYAoKICAg
        IFdoZW4geW91IGRlZmluZSBhIGNvbnRyb2xsZXIgdGhhdCByZXF1aXJlcyBh
        Y2Nlc3MgdG8gYSBuZXN0ZWQgb25lOgoKICAgIGBgYGphdmFzY3JpcHQKICAg
        IEFwcC5JbmRleENvbnRyb2xsZXIgPSBFbWJlci5PYmplY3RDb250cm9sbGVy
        LmV4dGVuZCh7CiAgICAgIG5lZWRzOiBbJ2NvbW1lbnRzTmV3J10KICAgIH0p
        OwogICAgYGBgCgogICAgWW91IHdpbGwgYmUgYWJsZSB0byBnZXQgYWNjZXNz
        IHRvIGl0OgoKICAgIGBgYGphdmFzY3JpcHQKICAgIHRoaXMuZ2V0KCdjb250
        cm9sbGVycy5jb21tZW50c05ldycpOyAvLyBpbnN0YW5jZSBvZiBBcHAuQ29t
        bWVudHNOZXdDb250cm9sbGVyCiAgICBgYGAKCiAgICBUaGlzIGlzIG9ubHkg
        YXZhaWxhYmxlIGZvciBzaW5nbGV0b24gY29udHJvbGxlcnMuCgogICAgQHBy
        b3BlcnR5IHtBcnJheX0gbmVlZHMKICAgIEBkZWZhdWx0IFtdCiAgKi8KICBu
        ZWVkczogW10sCgogIGluaXQ6IGZ1bmN0aW9uKCkgewogICAgdmFyIG5lZWRz
        ID0gZ2V0KHRoaXMsICduZWVkcycpLAogICAgbGVuZ3RoID0gZ2V0KG5lZWRz
        LCAnbGVuZ3RoJyk7CgogICAgaWYgKGxlbmd0aCA+IDApIHsKICAgICAgRW1i
        ZXIuYXNzZXJ0KCcgYCcgKyBFbWJlci5pbnNwZWN0KHRoaXMpICsgJyBzcGVj
        aWZpZXMgYG5lZWRzYCwgYnV0IGRvZXMgJyArCiAgICAgICAgICAgICAgICAg
        ICAibm90IGhhdmUgYSBjb250YWluZXIuIFBsZWFzZSBlbnN1cmUgdGhpcyBj
        b250cm9sbGVyIHdhcyAiICsKICAgICAgICAgICAgICAgICAgICJpbnN0YW50
        aWF0ZWQgd2l0aCBhIGNvbnRhaW5lci4iLAogICAgICAgICAgICAgICAgICAg
        dGhpcy5jb250YWluZXIgfHwgRW1iZXIubWV0YSh0aGlzLCBmYWxzZSkuZGVz
        Y3MuY29udHJvbGxlcnMgIT09IGRlZmF1bHRDb250cm9sbGVyc0NvbXB1dGVk
        UHJvcGVydHkpOwoKICAgICAgaWYgKHRoaXMuY29udGFpbmVyKSB7CiAgICAg
        ICAgdmVyaWZ5TmVlZHNEZXBlbmRlbmNpZXModGhpcywgdGhpcy5jb250YWlu
        ZXIsIG5lZWRzKTsKICAgICAgfQoKICAgICAgLy8gaWYgbmVlZHMgdGhlbiBp
        bml0aWFsaXplIGNvbnRyb2xsZXJzIHByb3h5CiAgICAgIGdldCh0aGlzLCAn
        Y29udHJvbGxlcnMnKTsKICAgIH0KCiAgICB0aGlzLl9zdXBlci5hcHBseSh0
        aGlzLCBhcmd1bWVudHMpOwogIH0sCgogIC8qKgogICAgQG1ldGhvZCBjb250
        cm9sbGVyRm9yCiAgICBAc2VlIHtFbWJlci5Sb3V0ZSNjb250cm9sbGVyRm9y
        fQogICAgQGRlcHJlY2F0ZWQgVXNlIGBuZWVkc2AgaW5zdGVhZAogICovCiAg
        Y29udHJvbGxlckZvcjogZnVuY3Rpb24oY29udHJvbGxlck5hbWUpIHsKICAg
        IEVtYmVyLmRlcHJlY2F0ZSgiQ29udHJvbGxlciNjb250cm9sbGVyRm9yIGlz
        IGRlcHJlY2F0ZWQsIHBsZWFzZSB1c2UgQ29udHJvbGxlciNuZWVkcyBpbnN0
        ZWFkIik7CiAgICByZXR1cm4gRW1iZXIuY29udHJvbGxlckZvcihnZXQodGhp
        cywgJ2NvbnRhaW5lcicpLCBjb250cm9sbGVyTmFtZSk7CiAgfSwKCiAgLyoq
        CiAgICBTdG9yZXMgdGhlIGluc3RhbmNlcyBvZiBvdGhlciBjb250cm9sbGVy
        cyBhdmFpbGFibGUgZnJvbSB3aXRoaW4KICAgIHRoaXMgY29udHJvbGxlci4g
        QW55IGNvbnRyb2xsZXIgbGlzdGVkIGJ5IG5hbWUgaW4gdGhlIGBuZWVkc2AK
        ICAgIHByb3BlcnR5IHdpbGwgYmUgYWNjZXNzaWJsZSBieSBuYW1lIHRocm91
        Z2ggdGhpcyBwcm9wZXJ0eS4KCiAgICBgYGBqYXZhc2NyaXB0CiAgICBBcHAu
        Q29tbWVudHNDb250cm9sbGVyID0gRW1iZXIuQXJyYXlDb250cm9sbGVyLmV4
        dGVuZCh7CiAgICAgIG5lZWRzOiBbJ3Bvc3QnXSwKICAgICAgcG9zdFRpdGxl
        OiBmdW5jdGlvbigpewogICAgICAgIHZhciBjdXJyZW50UG9zdCA9IHRoaXMu
        Z2V0KCdjb250cm9sbGVycy5wb3N0Jyk7IC8vIGluc3RhbmNlIG9mIEFwcC5Q
        b3N0Q29udHJvbGxlcgogICAgICAgIHJldHVybiBjdXJyZW50UG9zdC5nZXQo
        J3RpdGxlJyk7CiAgICAgIH0ucHJvcGVydHkoJ2NvbnRyb2xsZXJzLnBvc3Qu
        dGl0bGUnKQogICAgfSk7CiAgICBgYGAKCiAgICBAc2VlIHtFbWJlci5Db250
        cm9sbGVyTWl4aW4jbmVlZHN9CiAgICBAcHJvcGVydHkge09iamVjdH0gY29u
        dHJvbGxlcnMKICAgIEBkZWZhdWx0IG51bGwKICAqLwogIGNvbnRyb2xsZXJz
        OiBkZWZhdWx0Q29udHJvbGxlcnNDb21wdXRlZFByb3BlcnR5Cn0pOwoKfSko
        KTsKCgoKKGZ1bmN0aW9uKCkgewoKfSkoKTsKCgoKKGZ1bmN0aW9uKCkgewov
        KioKRW1iZXIgQXBwbGljYXRpb24KCkBtb2R1bGUgZW1iZXIKQHN1Ym1vZHVs
        ZSBlbWJlci1hcHBsaWNhdGlvbgpAcmVxdWlyZXMgZW1iZXItdmlld3MsIGVt
        YmVyLXJvdXRpbmcKKi8KCn0pKCk7CgooZnVuY3Rpb24oKSB7Ci8qKgpAbW9k
        dWxlIGVtYmVyCkBzdWJtb2R1bGUgZW1iZXItZXh0ZW5zaW9uLXN1cHBvcnQK
        Ki8KLyoqCiAgVGhlIGBEYXRhQWRhcHRlcmAgaGVscHMgYSBkYXRhIHBlcnNp
        c3RlbmNlIGxpYnJhcnkKICBpbnRlcmZhY2Ugd2l0aCB0b29scyB0aGF0IGRl
        YnVnIEVtYmVyIHN1Y2gKICBhcyB0aGUgW0VtYmVyIEV4dGVuc2lvbl0oaHR0
        cHM6Ly9naXRodWIuY29tL3RpbGRlaW8vZW1iZXItZXh0ZW5zaW9uKQogIGZv
        ciBDaHJvbWUgYW5kIEZpcmVmb3guCgogIFRoaXMgY2xhc3Mgd2lsbCBiZSBl
        eHRlbmRlZCBieSBhIHBlcnNpc3RlbmNlIGxpYnJhcnkKICB3aGljaCB3aWxs
        IG92ZXJyaWRlIHNvbWUgb2YgdGhlIG1ldGhvZHMgd2l0aAogIGxpYnJhcnkt
        c3BlY2lmaWMgY29kZS4KCiAgVGhlIG1ldGhvZHMgbGlrZWx5IHRvIGJlIG92
        ZXJyaWRkZW4gYXJlOgoKICAqIGBnZXRGaWx0ZXJzYAogICogYGRldGVjdGAK
        ICAqIGBjb2x1bW5zRm9yVHlwZWAKICAqIGBnZXRSZWNvcmRzYAogICogYGdl
        dFJlY29yZENvbHVtblZhbHVlc2AKICAqIGBnZXRSZWNvcmRLZXl3b3Jkc2AK
        ICAqIGBnZXRSZWNvcmRGaWx0ZXJWYWx1ZXNgCiAgKiBgZ2V0UmVjb3JkQ29s
        b3JgCiAgKiBgb2JzZXJ2ZVJlY29yZGAKCiAgVGhlIGFkYXB0ZXIgd2lsbCBu
        ZWVkIHRvIGJlIHJlZ2lzdGVyZWQKICBpbiB0aGUgYXBwbGljYXRpb24ncyBj
        b250YWluZXIgYXMgYGRhdGFBZGFwdGVyOm1haW5gCgogIEV4YW1wbGU6Cgog
        IGBgYGphdmFzY3JpcHQKICBBcHBsaWNhdGlvbi5pbml0aWFsaXplcih7CiAg
        ICBuYW1lOiAiZGF0YUFkYXB0ZXIiLAoKICAgIGluaXRpYWxpemU6IGZ1bmN0
        aW9uKGNvbnRhaW5lciwgYXBwbGljYXRpb24pIHsKICAgICAgYXBwbGljYXRp
        b24ucmVnaXN0ZXIoJ2RhdGFBZGFwdGVyOm1haW4nLCBEUy5EYXRhQWRhcHRl
        cik7CiAgICB9CiAgfSk7CiAgYGBgCgogIEBjbGFzcyBEYXRhQWRhcHRlcgog
        IEBuYW1lc3BhY2UgRW1iZXIKICBAZXh0ZW5kcyBFbWJlci5PYmplY3QKKi8K
        RW1iZXIuRGF0YUFkYXB0ZXIgPSBFbWJlci5PYmplY3QuZXh0ZW5kKHsKICBp
        bml0OiBmdW5jdGlvbigpIHsKICAgIHRoaXMuX3N1cGVyKCk7CiAgICB0aGlz
        LnJlbGVhc2VNZXRob2RzID0gRW1iZXIuQSgpOwogIH0sCgogIC8qKgogICAg
        VGhlIGNvbnRhaW5lciBvZiB0aGUgYXBwbGljYXRpb24gYmVpbmcgZGVidWdn
        ZWQuCiAgICBUaGlzIHByb3BlcnR5IHdpbGwgYmUgaW5qZWN0ZWQKICAgIG9u
        IGNyZWF0aW9uLgoKICAgIEBwcm9wZXJ0eSBjb250YWluZXIKICAgIEBkZWZh
        dWx0IG51bGwKICAqLwogIGNvbnRhaW5lcjogbnVsbCwKCiAgLyoqCiAgICBO
        dW1iZXIgb2YgYXR0cmlidXRlcyB0byBzZW5kCiAgICBhcyBjb2x1bW5zLiAo
        RW5vdWdoIHRvIG1ha2UgdGhlIHJlY29yZAogICAgaWRlbnRpZmlhYmxlKS4K
        CiAgICBAcHJpdmF0ZQogICAgQHByb3BlcnR5IGF0dHJpYnV0ZUxpbWl0CiAg
        ICBAZGVmYXVsdCAzCiAgKi8KICBhdHRyaWJ1dGVMaW1pdDogMywKCiAgLyoq
        CiAgICBTdG9yZXMgYWxsIG1ldGhvZHMgdGhhdCBjbGVhciBvYnNlcnZlcnMu
        CiAgICBUaGVzZSBtZXRob2RzIHdpbGwgYmUgY2FsbGVkIG9uIGRlc3RydWN0
        aW9uLgoKICAgIEBwcml2YXRlCiAgICBAcHJvcGVydHkgcmVsZWFzZU1ldGhv
        ZHMKICAqLwogIHJlbGVhc2VNZXRob2RzOiBFbWJlci5BKCksCgogIC8qKgog
        ICAgU3BlY2lmaWVzIGhvdyByZWNvcmRzIGNhbiBiZSBmaWx0ZXJlZC4KICAg
        IFJlY29yZHMgcmV0dXJuZWQgd2lsbCBuZWVkIHRvIGhhdmUgYSBgZmlsdGVy
        VmFsdWVzYAogICAgcHJvcGVydHkgd2l0aCBhIGtleSBmb3IgZXZlcnkgbmFt
        ZSBpbiB0aGUgcmV0dXJuZWQgYXJyYXkuCgogICAgQHB1YmxpYwogICAgQG1l
        dGhvZCBnZXRGaWx0ZXJzCiAgICBAcmV0dXJuIHtBcnJheX0gTGlzdCBvZiBv
        YmplY3RzIGRlZmluaW5nIGZpbHRlcnMuCiAgICAgVGhlIG9iamVjdCBzaG91
        bGQgaGF2ZSBhIGBuYW1lYCBhbmQgYGRlc2NgIHByb3BlcnR5LgogICovCiAg
        Z2V0RmlsdGVyczogZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gRW1iZXIuQSgp
        OwogIH0sCgogIC8qKgogICAgRmV0Y2ggdGhlIG1vZGVsIHR5cGVzIGFuZCBv
        YnNlcnZlIHRoZW0gZm9yIGNoYW5nZXMuCgogICAgQHB1YmxpYwogICAgQG1l
        dGhvZCB3YXRjaE1vZGVsVHlwZXMKCiAgICBAcGFyYW0ge0Z1bmN0aW9ufSB0
        eXBlc0FkZGVkIENhbGxiYWNrIHRvIGNhbGwgdG8gYWRkIHR5cGVzLgogICAg
        VGFrZXMgYW4gYXJyYXkgb2Ygb2JqZWN0cyBjb250YWluaW5nIHdyYXBwZWQg
        dHlwZXMgKHJldHVybmVkIGZyb20gYHdyYXBNb2RlbFR5cGVgKS4KCiAgICBA
        cGFyYW0ge0Z1bmN0aW9ufSB0eXBlc1VwZGF0ZWQgQ2FsbGJhY2sgdG8gY2Fs
        bCB3aGVuIGEgdHlwZSBoYXMgY2hhbmdlZC4KICAgIFRha2VzIGFuIGFycmF5
        IG9mIG9iamVjdHMgY29udGFpbmluZyB3cmFwcGVkIHR5cGVzLgoKICAgIEBy
        ZXR1cm4ge0Z1bmN0aW9ufSBNZXRob2QgdG8gY2FsbCB0byByZW1vdmUgYWxs
        IG9ic2VydmVycwogICovCiAgd2F0Y2hNb2RlbFR5cGVzOiBmdW5jdGlvbih0
        eXBlc0FkZGVkLCB0eXBlc1VwZGF0ZWQpIHsKICAgIHZhciBtb2RlbFR5cGVz
        ID0gdGhpcy5nZXRNb2RlbFR5cGVzKCksCiAgICAgICAgc2VsZiA9IHRoaXMs
        IHR5cGVzVG9TZW5kLCByZWxlYXNlTWV0aG9kcyA9IEVtYmVyLkEoKTsKCiAg
        ICB0eXBlc1RvU2VuZCA9IG1vZGVsVHlwZXMubWFwKGZ1bmN0aW9uKHR5cGUp
        IHsKICAgICAgdmFyIHdyYXBwZWQgPSBzZWxmLndyYXBNb2RlbFR5cGUodHlw
        ZSk7CiAgICAgIHJlbGVhc2VNZXRob2RzLnB1c2goc2VsZi5vYnNlcnZlTW9k
        ZWxUeXBlKHR5cGUsIHR5cGVzVXBkYXRlZCkpOwogICAgICByZXR1cm4gd3Jh
        cHBlZDsKICAgIH0pOwoKICAgIHR5cGVzQWRkZWQodHlwZXNUb1NlbmQpOwoK
        ICAgIHZhciByZWxlYXNlID0gZnVuY3Rpb24oKSB7CiAgICAgIHJlbGVhc2VN
        ZXRob2RzLmZvckVhY2goZnVuY3Rpb24oZm4pIHsgZm4oKTsgfSk7CiAgICAg
        IHNlbGYucmVsZWFzZU1ldGhvZHMucmVtb3ZlT2JqZWN0KHJlbGVhc2UpOwog
        ICAgfTsKICAgIHRoaXMucmVsZWFzZU1ldGhvZHMucHVzaE9iamVjdChyZWxl
        YXNlKTsKICAgIHJldHVybiByZWxlYXNlOwogIH0sCgogIC8qKgogICAgRmV0
        Y2ggdGhlIHJlY29yZHMgb2YgYSBnaXZlbiB0eXBlIGFuZCBvYnNlcnZlIHRo
        ZW0gZm9yIGNoYW5nZXMuCgogICAgQHB1YmxpYwogICAgQG1ldGhvZCB3YXRj
        aFJlY29yZHMKCiAgICBAcGFyYW0ge0Z1bmN0aW9ufSByZWNvcmRzQWRkZWQg
        Q2FsbGJhY2sgdG8gY2FsbCB0byBhZGQgcmVjb3Jkcy4KICAgIFRha2VzIGFu
        IGFycmF5IG9mIG9iamVjdHMgY29udGFpbmluZyB3cmFwcGVkIHJlY29yZHMu
        CiAgICBUaGUgb2JqZWN0IHNob3VsZCBoYXZlIHRoZSBmb2xsb3dpbmcgcHJv
        cGVydGllczoKICAgICAgY29sdW1uVmFsdWVzOiB7T2JqZWN0fSBrZXkgYW5k
        IHZhbHVlIG9mIGEgdGFibGUgY2VsbAogICAgICBvYmplY3Q6IHtPYmplY3R9
        IHRoZSBhY3R1YWwgcmVjb3JkIG9iamVjdAoKICAgIEBwYXJhbSB7RnVuY3Rp
        b259IHJlY29yZHNVcGRhdGVkIENhbGxiYWNrIHRvIGNhbGwgd2hlbiBhIHJl
        Y29yZCBoYXMgY2hhbmdlZC4KICAgIFRha2VzIGFuIGFycmF5IG9mIG9iamVj
        dHMgY29udGFpbmluZyB3cmFwcGVkIHJlY29yZHMuCgogICAgQHBhcmFtIHtG
        dW5jdGlvbn0gcmVjb3Jkc1JlbW92ZWQgQ2FsbGJhY2sgdG8gY2FsbCB3aGVu
        IGEgcmVjb3JkIGhhcyByZW1vdmVkLgogICAgVGFrZXMgdGhlIGZvbGxvd2lu
        ZyBwYXJhbWV0ZXJzOgogICAgICBpbmRleDogdGhlIGFycmF5IGluZGV4IHdo
        ZXJlIHRoZSByZWNvcmRzIHdlcmUgcmVtb3ZlZAogICAgICBjb3VudDogdGhl
        IG51bWJlciBvZiByZWNvcmRzIHJlbW92ZWQKCiAgICBAcmV0dXJuIHtGdW5j
        dGlvbn0gTWV0aG9kIHRvIGNhbGwgdG8gcmVtb3ZlIGFsbCBvYnNlcnZlcnMK
        ICAqLwogIHdhdGNoUmVjb3JkczogZnVuY3Rpb24odHlwZSwgcmVjb3Jkc0Fk
        ZGVkLCByZWNvcmRzVXBkYXRlZCwgcmVjb3Jkc1JlbW92ZWQpIHsKICAgIHZh
        ciBzZWxmID0gdGhpcywgcmVsZWFzZU1ldGhvZHMgPSBFbWJlci5BKCksIHJl
        Y29yZHMgPSB0aGlzLmdldFJlY29yZHModHlwZSksIHJlbGVhc2U7CgogICAg
        dmFyIHJlY29yZFVwZGF0ZWQgPSBmdW5jdGlvbih1cGRhdGVkUmVjb3JkKSB7
        CiAgICAgIHJlY29yZHNVcGRhdGVkKFt1cGRhdGVkUmVjb3JkXSk7CiAgICB9
        OwoKICAgIHZhciByZWNvcmRzVG9TZW5kID0gcmVjb3Jkcy5tYXAoZnVuY3Rp
        b24ocmVjb3JkKSB7CiAgICAgIHJlbGVhc2VNZXRob2RzLnB1c2goc2VsZi5v
        YnNlcnZlUmVjb3JkKHJlY29yZCwgcmVjb3JkVXBkYXRlZCkpOwogICAgICBy
        ZXR1cm4gc2VsZi53cmFwUmVjb3JkKHJlY29yZCk7CiAgICB9KTsKCgogICAg
        dmFyIGNvbnRlbnREaWRDaGFuZ2UgPSBmdW5jdGlvbihhcnJheSwgaWR4LCBy
        ZW1vdmVkQ291bnQsIGFkZGVkQ291bnQpIHsKICAgICAgZm9yICh2YXIgaSA9
        IGlkeDsgaSA8IGlkeCArIGFkZGVkQ291bnQ7IGkrKykgewogICAgICAgIHZh
        ciByZWNvcmQgPSBhcnJheS5vYmplY3RBdChpKTsKICAgICAgICB2YXIgd3Jh
        cHBlZCA9IHNlbGYud3JhcFJlY29yZChyZWNvcmQpOwogICAgICAgIHJlbGVh
        c2VNZXRob2RzLnB1c2goc2VsZi5vYnNlcnZlUmVjb3JkKHJlY29yZCwgcmVj
        b3JkVXBkYXRlZCkpOwogICAgICAgIHJlY29yZHNBZGRlZChbd3JhcHBlZF0p
        OwogICAgICB9CgogICAgICBpZiAocmVtb3ZlZENvdW50KSB7CiAgICAgICAg
        cmVjb3Jkc1JlbW92ZWQoaWR4LCByZW1vdmVkQ291bnQpOwogICAgICB9CiAg
        ICB9OwoKICAgIHZhciBvYnNlcnZlciA9IHsgZGlkQ2hhbmdlOiBjb250ZW50
        RGlkQ2hhbmdlLCB3aWxsQ2hhbmdlOiBFbWJlci5LIH07CiAgICByZWNvcmRz
        LmFkZEFycmF5T2JzZXJ2ZXIoc2VsZiwgb2JzZXJ2ZXIpOwoKICAgIHJlbGVh
        c2UgPSBmdW5jdGlvbigpIHsKICAgICAgcmVsZWFzZU1ldGhvZHMuZm9yRWFj
        aChmdW5jdGlvbihmbikgeyBmbigpOyB9KTsKICAgICAgcmVjb3Jkcy5yZW1v
        dmVBcnJheU9ic2VydmVyKHNlbGYsIG9ic2VydmVyKTsKICAgICAgc2VsZi5y
        ZWxlYXNlTWV0aG9kcy5yZW1vdmVPYmplY3QocmVsZWFzZSk7CiAgICB9OwoK
        ICAgIHJlY29yZHNBZGRlZChyZWNvcmRzVG9TZW5kKTsKCiAgICB0aGlzLnJl
        bGVhc2VNZXRob2RzLnB1c2hPYmplY3QocmVsZWFzZSk7CiAgICByZXR1cm4g
        cmVsZWFzZTsKICB9LAoKICAvKioKICAgIENsZWFyIGFsbCBvYnNlcnZlcnMg
        YmVmb3JlIGRlc3RydWN0aW9uCiAgICBAcHJpdmF0ZQogICovCiAgd2lsbERl
        c3Ryb3k6IGZ1bmN0aW9uKCkgewogICAgdGhpcy5fc3VwZXIoKTsKICAgIHRo
        aXMucmVsZWFzZU1ldGhvZHMuZm9yRWFjaChmdW5jdGlvbihmbikgewogICAg
        ICBmbigpOwogICAgfSk7CiAgfSwKCiAgLyoqCiAgICBEZXRlY3Qgd2hldGhl
        ciBhIGNsYXNzIGlzIGEgbW9kZWwuCgogICAgVGVzdCB0aGF0IGFnYWluc3Qg
        dGhlIG1vZGVsIGNsYXNzCiAgICBvZiB5b3VyIHBlcnNpc3RlbmNlIGxpYnJh
        cnkKCiAgICBAcHJpdmF0ZQogICAgQG1ldGhvZCBkZXRlY3QKICAgIEBwYXJh
        bSB7Q2xhc3N9IGtsYXNzIFRoZSBjbGFzcyB0byB0ZXN0CiAgICBAcmV0dXJu
        IGJvb2xlYW4gV2hldGhlciB0aGUgY2xhc3MgaXMgYSBtb2RlbCBjbGFzcyBv
        ciBub3QKICAqLwogIGRldGVjdDogZnVuY3Rpb24oa2xhc3MpIHsKICAgIHJl
        dHVybiBmYWxzZTsKICB9LAoKICAvKioKICAgIEdldCB0aGUgY29sdW1ucyBm
        b3IgYSBnaXZlbiBtb2RlbCB0eXBlLgoKICAgIEBwcml2YXRlCiAgICBAbWV0
        aG9kIGNvbHVtbnNGb3JUeXBlCiAgICBAcGFyYW0ge0NsYXNzfSB0eXBlIFRo
        ZSBtb2RlbCB0eXBlCiAgICBAcmV0dXJuIHtBcnJheX0gQW4gYXJyYXkgb2Yg
        Y29sdW1ucyBvZiB0aGUgZm9sbG93aW5nIGZvcm1hdDoKICAgICBuYW1lOiB7
        U3RyaW5nfSBuYW1lIG9mIHRoZSBjb2x1bW4KICAgICBkZXNjOiB7U3RyaW5n
        fSBIdW1hbml6ZWQgZGVzY3JpcHRpb24gKHdoYXQgd291bGQgc2hvdyBpbiBh
        IHRhYmxlIGNvbHVtbiBuYW1lKQogICovCiAgY29sdW1uc0ZvclR5cGU6IGZ1
        bmN0aW9uKHR5cGUpIHsKICAgIHJldHVybiBFbWJlci5BKCk7CiAgfSwKCiAg
        LyoqCiAgICBBZGRzIG9ic2VydmVycyB0byBhIG1vZGVsIHR5cGUgY2xhc3Mu
        CgogICAgQHByaXZhdGUKICAgIEBtZXRob2Qgb2JzZXJ2ZU1vZGVsVHlwZQog
        ICAgQHBhcmFtIHtDbGFzc30gdHlwZSBUaGUgbW9kZWwgdHlwZSBjbGFzcwog
        ICAgQHBhcmFtIHtGdW5jdGlvbn0gdHlwZXNVcGRhdGVkIENhbGxlZCB3aGVu
        IGEgdHlwZSBpcyBtb2RpZmllZC4KICAgIEByZXR1cm4ge0Z1bmN0aW9ufSBU
        aGUgZnVuY3Rpb24gdG8gY2FsbCB0byByZW1vdmUgb2JzZXJ2ZXJzCiAgKi8K
        CiAgb2JzZXJ2ZU1vZGVsVHlwZTogZnVuY3Rpb24odHlwZSwgdHlwZXNVcGRh
        dGVkKSB7CiAgICB2YXIgc2VsZiA9IHRoaXMsIHJlY29yZHMgPSB0aGlzLmdl
        dFJlY29yZHModHlwZSk7CgogICAgdmFyIG9uQ2hhbmdlID0gZnVuY3Rpb24o
        KSB7CiAgICAgIHR5cGVzVXBkYXRlZChbc2VsZi53cmFwTW9kZWxUeXBlKHR5
        cGUpXSk7CiAgICB9OwogICAgdmFyIG9ic2VydmVyID0gewogICAgICBkaWRD
        aGFuZ2U6IGZ1bmN0aW9uKCkgewogICAgICAgIEVtYmVyLnJ1bi5zY2hlZHVs
        ZU9uY2UoJ2FjdGlvbnMnLCB0aGlzLCBvbkNoYW5nZSk7CiAgICAgIH0sCiAg
        ICAgIHdpbGxDaGFuZ2U6IEVtYmVyLksKICAgIH07CgogICAgcmVjb3Jkcy5h
        ZGRBcnJheU9ic2VydmVyKHRoaXMsIG9ic2VydmVyKTsKCiAgICB2YXIgcmVs
        ZWFzZSA9IGZ1bmN0aW9uKCkgewogICAgICByZWNvcmRzLnJlbW92ZUFycmF5
        T2JzZXJ2ZXIoc2VsZiwgb2JzZXJ2ZXIpOwogICAgfTsKCiAgICByZXR1cm4g
        cmVsZWFzZTsKICB9LAoKCiAgLyoqCiAgICBXcmFwcyBhIGdpdmVuIG1vZGVs
        IHR5cGUgYW5kIG9ic2VydmVzIGNoYW5nZXMgdG8gaXQuCgogICAgQHByaXZh
        dGUKICAgIEBtZXRob2Qgd3JhcE1vZGVsVHlwZQogICAgQHBhcmFtIHtDbGFz
        c30gdHlwZSBBIG1vZGVsIGNsYXNzCiAgICBAcGFyYW0ge0Z1bmN0aW9ufSB0
        eXBlc1VwZGF0ZWQgY2FsbGJhY2sgdG8gY2FsbCB3aGVuIHRoZSB0eXBlIGNo
        YW5nZXMKICAgIEByZXR1cm4ge09iamVjdH0gY29udGFpbnMgdGhlIHdyYXBw
        ZWQgdHlwZSBhbmQgdGhlIGZ1bmN0aW9uIHRvIHJlbW92ZSBvYnNlcnZlcnMK
        ICAgIEZvcm1hdDoKICAgICAgdHlwZToge09iamVjdH0gdGhlIHdyYXBwZWQg
        dHlwZQogICAgICAgIFRoZSB3cmFwcGVkIHR5cGUgaGFzIHRoZSBmb2xsb3dp
        bmcgZm9ybWF0OgogICAgICAgICAgbmFtZToge1N0cmluZ30gbmFtZSBvZiB0
        aGUgdHlwZQogICAgICAgICAgY291bnQ6IHtJbnRlZ2VyfSBudW1iZXIgb2Yg
        cmVjb3JkcyBhdmFpbGFibGUKICAgICAgICAgIGNvbHVtbnM6IHtDb2x1bW5z
        fSBhcnJheSBvZiBjb2x1bW5zIHRvIGRlc2NyaWJlIHRoZSByZWNvcmQKICAg
        ICAgICAgIG9iamVjdDoge0NsYXNzfSB0aGUgYWN0dWFsIE1vZGVsIHR5cGUg
        Y2xhc3MKICAgICAgcmVsZWFzZToge0Z1bmN0aW9ufSBUaGUgZnVuY3Rpb24g
        dG8gcmVtb3ZlIG9ic2VydmVycwogICovCiAgd3JhcE1vZGVsVHlwZTogZnVu
        Y3Rpb24odHlwZSwgdHlwZXNVcGRhdGVkKSB7CiAgICB2YXIgcmVsZWFzZSwg
        cmVjb3JkcyA9IHRoaXMuZ2V0UmVjb3Jkcyh0eXBlKSwKICAgICAgICB0eXBl
        VG9TZW5kLCBzZWxmID0gdGhpczsKCiAgICB0eXBlVG9TZW5kID0gewogICAg
        ICBuYW1lOiB0eXBlLnRvU3RyaW5nKCksCiAgICAgIGNvdW50OiBFbWJlci5n
        ZXQocmVjb3JkcywgJ2xlbmd0aCcpLAogICAgICBjb2x1bW5zOiB0aGlzLmNv
        bHVtbnNGb3JUeXBlKHR5cGUpLAogICAgICBvYmplY3Q6IHR5cGUKICAgIH07
        CgoKICAgIHJldHVybiB0eXBlVG9TZW5kOwogIH0sCgoKICAvKioKICAgIEZl
        dGNoZXMgYWxsIG1vZGVscyBkZWZpbmVkIGluIHRoZSBhcHBsaWNhdGlvbi4K
        CiAgICBAcHJpdmF0ZQogICAgQG1ldGhvZCBnZXRNb2RlbFR5cGVzCiAgICBA
        cmV0dXJuIHtBcnJheX0gQXJyYXkgb2YgbW9kZWwgdHlwZXMKICAqLwoKIC8v
        IFRPRE86IFVzZSB0aGUgcmVzb2x2ZXIgaW5zdGVhZCBvZiBsb29waW5nIG92
        ZXIgbmFtZXNwYWNlcy4KICBnZXRNb2RlbFR5cGVzOiBmdW5jdGlvbigpIHsK
        ICAgIHZhciBuYW1lc3BhY2VzID0gRW1iZXIuQShFbWJlci5OYW1lc3BhY2Uu
        TkFNRVNQQUNFUyksIHR5cGVzID0gRW1iZXIuQSgpLCBzZWxmID0gdGhpczsK
        CiAgICBuYW1lc3BhY2VzLmZvckVhY2goZnVuY3Rpb24obmFtZXNwYWNlKSB7
        CiAgICAgIGZvciAodmFyIGtleSBpbiBuYW1lc3BhY2UpIHsKICAgICAgICBp
        ZiAoIW5hbWVzcGFjZS5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7IGNvbnRpbnVl
        OyB9CiAgICAgICAgdmFyIGtsYXNzID0gbmFtZXNwYWNlW2tleV07CiAgICAg
        ICAgaWYgKHNlbGYuZGV0ZWN0KGtsYXNzKSkgewogICAgICAgICAgdHlwZXMu
        cHVzaChrbGFzcyk7CiAgICAgICAgfQogICAgICB9CiAgICB9KTsKICAgIHJl
        dHVybiB0eXBlczsKICB9LAoKICAvKioKICAgIEZldGNoZXMgYWxsIGxvYWRl
        ZCByZWNvcmRzIGZvciBhIGdpdmVuIHR5cGUuCgogICAgQHByaXZhdGUKICAg
        IEBtZXRob2QgZ2V0UmVjb3JkcwogICAgQHJldHVybiB7QXJyYXl9IEFuIGFy
        cmF5IG9mIHJlY29yZHMuCiAgICAgVGhpcyBhcnJheSB3aWxsIGJlIG9ic2Vy
        dmVkIGZvciBjaGFuZ2VzLAogICAgIHNvIGl0IHNob3VsZCB1cGRhdGUgd2hl
        biBuZXcgcmVjb3JkcyBhcmUgYWRkZWQvcmVtb3ZlZC4KICAqLwogIGdldFJl
        Y29yZHM6IGZ1bmN0aW9uKHR5cGUpIHsKICAgIHJldHVybiBFbWJlci5BKCk7
        CiAgfSwKCiAgLyoqCiAgICBXcmFwcyBhIHJlY29yZCBhbmQgb2JzZXJ2ZXJz
        IGNoYW5nZXMgdG8gaXQuCgogICAgQHByaXZhdGUKICAgIEBtZXRob2Qgd3Jh
        cFJlY29yZAogICAgQHBhcmFtIHtPYmplY3R9IHJlY29yZCBUaGUgcmVjb3Jk
        IGluc3RhbmNlLgogICAgQHJldHVybiB7T2JqZWN0fSBUaGUgd3JhcHBlZCBy
        ZWNvcmQuIEZvcm1hdDoKICAgIGNvbHVtblZhbHVlczoge0FycmF5fQogICAg
        c2VhcmNoS2V5d29yZHM6IHtBcnJheX0KICAqLwogIHdyYXBSZWNvcmQ6IGZ1
        bmN0aW9uKHJlY29yZCkgewogICAgdmFyIHJlY29yZFRvU2VuZCA9IHsgb2Jq
        ZWN0OiByZWNvcmQgfSwgY29sdW1uVmFsdWVzID0ge30sIHNlbGYgPSB0aGlz
        OwoKICAgIHJlY29yZFRvU2VuZC5jb2x1bW5WYWx1ZXMgPSB0aGlzLmdldFJl
        Y29yZENvbHVtblZhbHVlcyhyZWNvcmQpOwogICAgcmVjb3JkVG9TZW5kLnNl
        YXJjaEtleXdvcmRzID0gdGhpcy5nZXRSZWNvcmRLZXl3b3JkcyhyZWNvcmQp
        OwogICAgcmVjb3JkVG9TZW5kLmZpbHRlclZhbHVlcyA9IHRoaXMuZ2V0UmVj
        b3JkRmlsdGVyVmFsdWVzKHJlY29yZCk7CiAgICByZWNvcmRUb1NlbmQuY29s
        b3IgPSB0aGlzLmdldFJlY29yZENvbG9yKHJlY29yZCk7CgogICAgcmV0dXJu
        IHJlY29yZFRvU2VuZDsKICB9LAoKICAvKioKICAgIEdldHMgdGhlIHZhbHVl
        cyBmb3IgZWFjaCBjb2x1bW4uCgogICAgQHByaXZhdGUKICAgIEBtZXRob2Qg
        Z2V0UmVjb3JkQ29sdW1uVmFsdWVzCiAgICBAcmV0dXJuIHtPYmplY3R9IEtl
        eXMgc2hvdWxkIG1hdGNoIGNvbHVtbiBuYW1lcyBkZWZpbmVkCiAgICBieSB0
        aGUgbW9kZWwgdHlwZS4KICAqLwogIGdldFJlY29yZENvbHVtblZhbHVlczog
        ZnVuY3Rpb24ocmVjb3JkKSB7CiAgICByZXR1cm4ge307CiAgfSwKCiAgLyoq
        CiAgICBSZXR1cm5zIGtleXdvcmRzIHRvIG1hdGNoIHdoZW4gc2VhcmNoaW5n
        IHJlY29yZHMuCgogICAgQHByaXZhdGUKICAgIEBtZXRob2QgZ2V0UmVjb3Jk
        S2V5d29yZHMKICAgIEByZXR1cm4ge0FycmF5fSBSZWxldmFudCBrZXl3b3Jk
        cyBmb3Igc2VhcmNoLgogICovCiAgZ2V0UmVjb3JkS2V5d29yZHM6IGZ1bmN0
        aW9uKHJlY29yZCkgewogICAgcmV0dXJuIEVtYmVyLkEoKTsKICB9LAoKICAv
        KioKICAgIFJldHVybnMgdGhlIHZhbHVlcyBvZiBmaWx0ZXJzIGRlZmluZWQg
        YnkgYGdldEZpbHRlcnNgLgoKICAgIEBwcml2YXRlCiAgICBAbWV0aG9kIGdl
        dFJlY29yZEZpbHRlclZhbHVlcwogICAgQHBhcmFtIHtPYmplY3R9IHJlY29y
        ZCBUaGUgcmVjb3JkIGluc3RhbmNlCiAgICBAcmV0dXJuIHtPYmplY3R9IFRo
        ZSBmaWx0ZXIgdmFsdWVzCiAgKi8KICBnZXRSZWNvcmRGaWx0ZXJWYWx1ZXM6
        IGZ1bmN0aW9uKHJlY29yZCkgewogICAgcmV0dXJuIHt9OwogIH0sCgogIC8q
        KgogICAgRWFjaCByZWNvcmQgY2FuIGhhdmUgYSBjb2xvciB0aGF0IHJlcHJl
        c2VudHMgaXRzIHN0YXRlLgoKICAgIEBwcml2YXRlCiAgICBAbWV0aG9kIGdl
        dFJlY29yZENvbG9yCiAgICBAcGFyYW0ge09iamVjdH0gcmVjb3JkIFRoZSBy
        ZWNvcmQgaW5zdGFuY2UKICAgIEByZXR1cm4ge1N0cmluZ30gVGhlIHJlY29y
        ZCdzIGNvbG9yCiAgICAgIFBvc3NpYmxlIG9wdGlvbnM6IGJsYWNrLCByZWQs
        IGJsdWUsIGdyZWVuCiAgKi8KICBnZXRSZWNvcmRDb2xvcjogZnVuY3Rpb24o
        cmVjb3JkKSB7CiAgICByZXR1cm4gbnVsbDsKICB9LAoKICAvKioKICAgIE9i
        c2VydmVzIGFsbCByZWxldmFudCBwcm9wZXJ0aWVzIGFuZCByZS1zZW5kcyB0
        aGUgd3JhcHBlZCByZWNvcmQKICAgIHdoZW4gYSBjaGFuZ2Ugb2NjdXJzLgoK
        ICAgIEBwcml2YXRlCiAgICBAbWV0aG9kIG9ic2VydmVyUmVjb3JkCiAgICBA
        cGFyYW0ge09iamVjdH0gcmVjb3JkIFRoZSByZWNvcmQgaW5zdGFuY2UKICAg
        IEBwYXJhbSB7RnVuY3Rpb259IHJlY29yZFVwZGF0ZWQgVGhlIGNhbGxiYWNr
        IHRvIGNhbGwgd2hlbiBhIHJlY29yZCBpcyB1cGRhdGVkLgogICAgQHJldHVy
        biB7RnVuY3Rpb259IFRoZSBmdW5jdGlvbiB0byBjYWxsIHRvIHJlbW92ZSBh
        bGwgb2JzZXJ2ZXJzLgogICovCiAgb2JzZXJ2ZVJlY29yZDogZnVuY3Rpb24o
        cmVjb3JkLCByZWNvcmRVcGRhdGVkKSB7CiAgICByZXR1cm4gZnVuY3Rpb24o
        KXt9OwogIH0KCn0pOwoKCn0pKCk7CgoKCihmdW5jdGlvbigpIHsKLyoqCkVt
        YmVyIEV4dGVuc2lvbiBTdXBwb3J0CgpAbW9kdWxlIGVtYmVyCkBzdWJtb2R1
        bGUgZW1iZXItZXh0ZW5zaW9uLXN1cHBvcnQKQHJlcXVpcmVzIGVtYmVyLWFw
        cGxpY2F0aW9uCiovCgp9KSgpOwoKKGZ1bmN0aW9uKCkgewovKioKICBAbW9k
        dWxlIGVtYmVyCiAgQHN1Ym1vZHVsZSBlbWJlci10ZXN0aW5nCiAqLwp2YXIg
        c2xpY2UgPSBbXS5zbGljZSwKICAgIGhlbHBlcnMgPSB7fSwKICAgIGluamVj
        dEhlbHBlcnNDYWxsYmFja3MgPSBbXTsKCi8qKgogIFRoaXMgaXMgYSBjb250
        YWluZXIgZm9yIGFuIGFzc29ydG1lbnQgb2YgdGVzdGluZyByZWxhdGVkIGZ1
        bmN0aW9uYWxpdHk6CgogICogQ2hvb3NlIHlvdXIgZGVmYXVsdCB0ZXN0IGFk
        YXB0ZXIgKGZvciB5b3VyIGZyYW1ld29yayBvZiBjaG9pY2UpLgogICogUmVn
        aXN0ZXIvVW5yZWdpc3RlciBhZGRpdGlvbmFsIHRlc3QgaGVscGVycy4KICAq
        IFNldHVwIGNhbGxiYWNrcyB0byBiZSBmaXJlZCB3aGVuIHRoZSB0ZXN0IGhl
        bHBlcnMgYXJlIGluamVjdGVkIGludG8KICAgIHlvdXIgYXBwbGljYXRpb24u
        CgogIEBjbGFzcyBUZXN0CiAgQG5hbWVzcGFjZSBFbWJlcgoqLwpFbWJlci5U
        ZXN0ID0gewoKICAvKioKICAgIGByZWdpc3RlckhlbHBlcmAgaXMgdXNlZCB0
        byByZWdpc3RlciBhIHRlc3QgaGVscGVyIHRoYXQgd2lsbCBiZSBpbmplY3Rl
        ZAogICAgd2hlbiBgQXBwLmluamVjdFRlc3RIZWxwZXJzYCBpcyBjYWxsZWQu
        CgogICAgVGhlIGhlbHBlciBtZXRob2Qgd2lsbCBhbHdheXMgYmUgY2FsbGVk
        IHdpdGggdGhlIGN1cnJlbnQgQXBwbGljYXRpb24gYXMKICAgIHRoZSBmaXJz
        dCBwYXJhbWV0ZXIuCgogICAgRm9yIGV4YW1wbGU6CgogICAgYGBgamF2YXNj
        cmlwdAogICAgRW1iZXIuVGVzdC5yZWdpc3RlckhlbHBlcignYm9vdCcsIGZ1
        bmN0aW9uKGFwcCkgewogICAgICBFbWJlci5ydW4oYXBwLCBhcHAuYWR2YW5j
        ZVJlYWRpbmVzcyk7CiAgICB9KTsKICAgIGBgYAoKICAgIFRoaXMgaGVscGVy
        IGNhbiBsYXRlciBiZSBjYWxsZWQgd2l0aG91dCBhcmd1bWVudHMgYmVjYXVz
        ZSBpdCB3aWxsIGJlCiAgICBjYWxsZWQgd2l0aCBgYXBwYCBhcyB0aGUgZmly
        c3QgcGFyYW1ldGVyLgoKICAgIGBgYGphdmFzY3JpcHQKICAgIEFwcCA9IEVt
        YmVyLkFwcGxpY2F0aW9uLmNyZWF0ZSgpOwogICAgQXBwLmluamVjdFRlc3RI
        ZWxwZXJzKCk7CiAgICBib290KCk7CiAgICBgYGAKCiAgICBAcHVibGljCiAg
        ICBAbWV0aG9kIHJlZ2lzdGVySGVscGVyCiAgICBAcGFyYW0ge1N0cmluZ30g
        bmFtZSBUaGUgbmFtZSBvZiB0aGUgaGVscGVyIG1ldGhvZCB0byBhZGQuCiAg
        ICBAcGFyYW0ge0Z1bmN0aW9ufSBoZWxwZXJNZXRob2QKICAgIEBwYXJhbSBv
        cHRpb25zIHtPYmplY3R9CiAgKi8KICByZWdpc3RlckhlbHBlcjogZnVuY3Rp
        b24obmFtZSwgaGVscGVyTWV0aG9kKSB7CiAgICBoZWxwZXJzW25hbWVdID0g
        ewogICAgICBtZXRob2Q6IGhlbHBlck1ldGhvZCwKICAgICAgbWV0YTogeyB3
        YWl0OiBmYWxzZSB9CiAgICB9OwogIH0sCgogIC8qKgogICAgYHJlZ2lzdGVy
        QXN5bmNIZWxwZXJgIGlzIHVzZWQgdG8gcmVnaXN0ZXIgYW4gYXN5bmMgdGVz
        dCBoZWxwZXIgdGhhdCB3aWxsIGJlIGluamVjdGVkCiAgICB3aGVuIGBBcHAu
        aW5qZWN0VGVzdEhlbHBlcnNgIGlzIGNhbGxlZC4KCiAgICBUaGUgaGVscGVy
        IG1ldGhvZCB3aWxsIGFsd2F5cyBiZSBjYWxsZWQgd2l0aCB0aGUgY3VycmVu
        dCBBcHBsaWNhdGlvbiBhcwogICAgdGhlIGZpcnN0IHBhcmFtZXRlci4KCiAg
        ICBGb3IgZXhhbXBsZToKCiAgICBgYGBqYXZhc2NyaXB0CiAgICBFbWJlci5U
        ZXN0LnJlZ2lzdGVyQXN5bmNIZWxwZXIoJ2Jvb3QnLCBmdW5jdGlvbihhcHAp
        IHsKICAgICAgRW1iZXIucnVuKGFwcCwgYXBwLmFkdmFuY2VSZWFkaW5lc3Mp
        OwogICAgfSk7CiAgICBgYGAKCiAgICBUaGUgYWR2YW50YWdlIG9mIGFuIGFz
        eW5jIGhlbHBlciBpcyB0aGF0IGl0IHdpbGwgbm90IHJ1bgogICAgdW50aWwg
        dGhlIGxhc3QgYXN5bmMgaGVscGVyIGhhcyBjb21wbGV0ZWQuICBBbGwgYXN5
        bmMgaGVscGVycwogICAgYWZ0ZXIgaXQgd2lsbCB3YWl0IGZvciBpdCBjb21w
        bGV0ZSBiZWZvcmUgcnVubmluZy4KCgogICAgRm9yIGV4YW1wbGU6CgogICAg
        YGBgamF2YXNjcmlwdAogICAgRW1iZXIuVGVzdC5yZWdpc3RlckFzeW5jSGVs
        cGVyKCdkZWxldGVQb3N0JywgZnVuY3Rpb24oYXBwLCBwb3N0SWQpIHsKICAg
        ICAgY2xpY2soJy5kZWxldGUtJyArIHBvc3RJZCk7CiAgICB9KTsKCiAgICAv
        LyAuLi4gaW4geW91ciB0ZXN0CiAgICB2aXNpdCgnL3Bvc3QvMicpOwogICAg
        ZGVsZXRlUG9zdCgyKTsKICAgIHZpc2l0KCcvcG9zdC8zJyk7CiAgICBkZWxl
        dGVQb3N0KDMpOwogICAgYGBgCgogICAgQHB1YmxpYwogICAgQG1ldGhvZCBy
        ZWdpc3RlckFzeW5jSGVscGVyCiAgICBAcGFyYW0ge1N0cmluZ30gbmFtZSBU
        aGUgbmFtZSBvZiB0aGUgaGVscGVyIG1ldGhvZCB0byBhZGQuCiAgICBAcGFy
        YW0ge0Z1bmN0aW9ufSBoZWxwZXJNZXRob2QKICAqLwogIHJlZ2lzdGVyQXN5
        bmNIZWxwZXI6IGZ1bmN0aW9uKG5hbWUsIGhlbHBlck1ldGhvZCkgewogICAg
        aGVscGVyc1tuYW1lXSA9IHsKICAgICAgbWV0aG9kOiBoZWxwZXJNZXRob2Qs
        CiAgICAgIG1ldGE6IHsgd2FpdDogdHJ1ZSB9CiAgICB9OwogIH0sCgogIC8q
        KgogICAgUmVtb3ZlIGEgcHJldmlvdXNseSBhZGRlZCBoZWxwZXIgbWV0aG9k
        LgoKICAgIEV4YW1wbGU6CgogICAgYGBgamF2YXNjcmlwdAogICAgRW1iZXIu
        VGVzdC51bnJlZ2lzdGVySGVscGVyKCd3YWl0Jyk7CiAgICBgYGAKCiAgICBA
        cHVibGljCiAgICBAbWV0aG9kIHVucmVnaXN0ZXJIZWxwZXIKICAgIEBwYXJh
        bSB7U3RyaW5nfSBuYW1lIFRoZSBoZWxwZXIgdG8gcmVtb3ZlLgogICovCiAg
        dW5yZWdpc3RlckhlbHBlcjogZnVuY3Rpb24obmFtZSkgewogICAgZGVsZXRl
        IGhlbHBlcnNbbmFtZV07CiAgICBkZWxldGUgRW1iZXIuVGVzdC5Qcm9taXNl
        LnByb3RvdHlwZVtuYW1lXTsKICB9LAoKICAvKioKICAgIFVzZWQgdG8gcmVn
        aXN0ZXIgY2FsbGJhY2tzIHRvIGJlIGZpcmVkIHdoZW5ldmVyIGBBcHAuaW5q
        ZWN0VGVzdEhlbHBlcnNgCiAgICBpcyBjYWxsZWQuCgogICAgVGhlIGNhbGxi
        YWNrIHdpbGwgcmVjZWl2ZSB0aGUgY3VycmVudCBhcHBsaWNhdGlvbiBhcyBh
        biBhcmd1bWVudC4KCiAgICBFeGFtcGxlOgoKICAgIGBgYGphdmFzY3JpcHQK
        ICAgIEVtYmVyLlRlc3Qub25JbmplY3RIZWxwZXJzKGZ1bmN0aW9uKCkgewog
        ICAgICBFbWJlci4kKGRvY3VtZW50KS5hamF4U3RhcnQoZnVuY3Rpb24oKSB7
        CiAgICAgICAgVGVzdC5wZW5kaW5nQWpheFJlcXVlc3RzKys7CiAgICAgIH0p
        OwoKICAgICAgRW1iZXIuJChkb2N1bWVudCkuYWpheFN0b3AoZnVuY3Rpb24o
        KSB7CiAgICAgICAgVGVzdC5wZW5kaW5nQWpheFJlcXVlc3RzLS07CiAgICAg
        IH0pOwogICAgfSk7CiAgICBgYGAKCiAgICBAcHVibGljCiAgICBAbWV0aG9k
        IG9uSW5qZWN0SGVscGVycwogICAgQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJh
        Y2sgVGhlIGZ1bmN0aW9uIHRvIGJlIGNhbGxlZC4KICAqLwogIG9uSW5qZWN0
        SGVscGVyczogZnVuY3Rpb24oY2FsbGJhY2spIHsKICAgIGluamVjdEhlbHBl
        cnNDYWxsYmFja3MucHVzaChjYWxsYmFjayk7CiAgfSwKCiAgLyoqCiAgICBU
        aGlzIHJldHVybnMgYSB0aGVuYWJsZSB0YWlsb3JlZCBmb3IgdGVzdGluZy4g
        IEl0IGNhdGNoZXMgZmFpbGVkCiAgICBgb25TdWNjZXNzYCBjYWxsYmFja3Mg
        YW5kIGludm9rZXMgdGhlIGBFbWJlci5UZXN0LmFkYXB0ZXIuZXhjZXB0aW9u
        YAogICAgY2FsbGJhY2sgaW4gdGhlIGxhc3QgY2hhaW5lZCB0aGVuLgoKICAg
        IFRoaXMgbWV0aG9kIHNob3VsZCBiZSByZXR1cm5lZCBieSBhc3luYyBoZWxw
        ZXJzIHN1Y2ggYXMgYHdhaXRgLgoKICAgIEBwdWJsaWMKICAgIEBtZXRob2Qg
        cHJvbWlzZQogICAgQHBhcmFtIHtGdW5jdGlvbn0gcmVzb2x2ZXIgVGhlIGZ1
        bmN0aW9uIHVzZWQgdG8gcmVzb2x2ZSB0aGUgcHJvbWlzZS4KICAqLwogIHBy
        b21pc2U6IGZ1bmN0aW9uKHJlc29sdmVyKSB7CiAgICByZXR1cm4gbmV3IEVt
        YmVyLlRlc3QuUHJvbWlzZShyZXNvbHZlcik7CiAgfSwKCiAgLyoqCiAgIFVz
        ZWQgdG8gYWxsb3cgZW1iZXItdGVzdGluZyB0byBjb21tdW5pY2F0ZSB3aXRo
        IGEgc3BlY2lmaWMgdGVzdGluZwogICBmcmFtZXdvcmsuCgogICBZb3UgY2Fu
        IG1hbnVhbGx5IHNldCBpdCBiZWZvcmUgY2FsbGluZyBgQXBwLnNldHVwRm9y
        VGVzdGluZygpYC4KCiAgIEV4YW1wbGU6CgogICBgYGBqYXZhc2NyaXB0CiAg
        IEVtYmVyLlRlc3QuYWRhcHRlciA9IE15Q3VzdG9tQWRhcHRlci5jcmVhdGUo
        KQogICBgYGAKCiAgIElmIHlvdSBkbyBub3Qgc2V0IGl0LCBlbWJlci10ZXN0
        aW5nIHdpbGwgZGVmYXVsdCB0byBgRW1iZXIuVGVzdC5RVW5pdEFkYXB0ZXJg
        LgoKICAgQHB1YmxpYwogICBAcHJvcGVydHkgYWRhcHRlcgogICBAdHlwZSB7
        Q2xhc3N9IFRoZSBhZGFwdGVyIHRvIGJlIHVzZWQuCiAgIEBkZWZhdWx0IEVt
        YmVyLlRlc3QuUVVuaXRBZGFwdGVyCiAgKi8KICBhZGFwdGVyOiBudWxsLAoK
        ICAvKioKICAgIFJlcGxhY2VtZW50IGZvciBgRW1iZXIuUlNWUC5yZXNvbHZl
        YAogICAgVGhlIG9ubHkgZGlmZmVyZW5jZSBpcyB0aGlzIHVzZXMKICAgIGFu
        ZCBpbnN0YW5jZSBvZiBgRW1iZXIuVGVzdC5Qcm9taXNlYAoKICAgIEBwdWJs
        aWMKICAgIEBtZXRob2QgcmVzb2x2ZQogICAgQHBhcmFtIHtNaXhlZH0gVGhl
        IHZhbHVlIHRvIHJlc29sdmUKICAqLwogIHJlc29sdmU6IGZ1bmN0aW9uKHZh
        bCkgewogICAgcmV0dXJuIEVtYmVyLlRlc3QucHJvbWlzZShmdW5jdGlvbihy
        ZXNvbHZlKSB7CiAgICAgIHJldHVybiByZXNvbHZlKHZhbCk7CiAgICB9KTsK
        ICB9LAoKICAvKioKICAgICBUaGlzIGFsbG93cyBlbWJlci10ZXN0aW5nIHRv
        IHBsYXkgbmljZWx5IHdpdGggb3RoZXIgYXN5bmNocm9ub3VzCiAgICAgZXZl
        bnRzLCBzdWNoIGFzIGFuIGFwcGxpY2F0aW9uIHRoYXQgaXMgd2FpdGluZyBm
        b3IgYSBDU1MzCiAgICAgdHJhbnNpdGlvbiBvciBhbiBJbmRleERCIHRyYW5z
        YWN0aW9uLgoKICAgICBGb3IgZXhhbXBsZToKCiAgICAgYGBgamF2YXNjcmlw
        dAogICAgIEVtYmVyLlRlc3QucmVnaXN0ZXJXYWl0ZXIoZnVuY3Rpb24oKSB7
        CiAgICAgICByZXR1cm4gbXlQZW5kaW5nVHJhbnNhY3Rpb25zKCkgPT0gMDsK
        ICAgICB9KTsKICAgICBgYGAKICAgICBUaGUgYGNvbnRleHRgIGFyZ3VtZW50
        IGFsbG93cyB5b3UgdG8gb3B0aW9uYWxseSBzcGVjaWZ5IHRoZSBgdGhpc2AK
        ICAgICB3aXRoIHdoaWNoIHlvdXIgY2FsbGJhY2sgd2lsbCBiZSBpbnZva2Vk
        LgoKICAgICBGb3IgZXhhbXBsZToKCiAgICAgYGBgamF2YXNjcmlwdAogICAg
        IEVtYmVyLlRlc3QucmVnaXN0ZXJXYWl0ZXIoTXlEQiwgTXlEQi5oYXNQZW5k
        aW5nVHJhbnNhY3Rpb25zKTsKICAgICBgYGAKCiAgICAgQHB1YmxpYwogICAg
        IEBtZXRob2QgcmVnaXN0ZXJXYWl0ZXIKICAgICBAcGFyYW0ge09iamVjdH0g
        Y29udGV4dCAob3B0aW9uYWwpCiAgICAgQHBhcmFtIHtGdW5jdGlvbn0gY2Fs
        bGJhY2sKICAqLwogIHJlZ2lzdGVyV2FpdGVyOiBmdW5jdGlvbihjb250ZXh0
        LCBjYWxsYmFjaykgewogICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDEp
        IHsKICAgICAgY2FsbGJhY2sgPSBjb250ZXh0OwogICAgICBjb250ZXh0ID0g
        bnVsbDsKICAgIH0KICAgIGlmICghdGhpcy53YWl0ZXJzKSB7CiAgICAgIHRo
        aXMud2FpdGVycyA9IEVtYmVyLkEoKTsKICAgIH0KICAgIHRoaXMud2FpdGVy
        cy5wdXNoKFtjb250ZXh0LCBjYWxsYmFja10pOwogIH0sCiAgLyoqCiAgICAg
        YHVucmVnaXN0ZXJXYWl0ZXJgIGlzIHVzZWQgdG8gdW5yZWdpc3RlciBhIGNh
        bGxiYWNrIHRoYXQgd2FzCiAgICAgcmVnaXN0ZXJlZCB3aXRoIGByZWdpc3Rl
        cldhaXRlcmAuCgogICAgIEBwdWJsaWMKICAgICBAbWV0aG9kIHVucmVnaXN0
        ZXJXYWl0ZXIKICAgICBAcGFyYW0ge09iamVjdH0gY29udGV4dCAob3B0aW9u
        YWwpCiAgICAgQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2sKICAqLwogIHVu
        cmVnaXN0ZXJXYWl0ZXI6IGZ1bmN0aW9uKGNvbnRleHQsIGNhbGxiYWNrKSB7
        CiAgICB2YXIgcGFpcjsKICAgIGlmICghdGhpcy53YWl0ZXJzKSB7IHJldHVy
        bjsgfQogICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDEpIHsKICAgICAg
        Y2FsbGJhY2sgPSBjb250ZXh0OwogICAgICBjb250ZXh0ID0gbnVsbDsKICAg
        IH0KICAgIHBhaXIgPSBbY29udGV4dCwgY2FsbGJhY2tdOwogICAgdGhpcy53
        YWl0ZXJzID0gRW1iZXIuQSh0aGlzLndhaXRlcnMuZmlsdGVyKGZ1bmN0aW9u
        KGVsdCkgewogICAgICByZXR1cm4gRW1iZXIuY29tcGFyZShlbHQsIHBhaXIp
        IT09MDsKICAgIH0pKTsKICB9Cn07CgpmdW5jdGlvbiBoZWxwZXIoYXBwLCBu
        YW1lKSB7CiAgdmFyIGZuID0gaGVscGVyc1tuYW1lXS5tZXRob2QsCiAgICAg
        IG1ldGEgPSBoZWxwZXJzW25hbWVdLm1ldGE7CgogIHJldHVybiBmdW5jdGlv
        bigpIHsKICAgIHZhciBhcmdzID0gc2xpY2UuY2FsbChhcmd1bWVudHMpLAog
        ICAgICAgIGxhc3RQcm9taXNlID0gRW1iZXIuVGVzdC5sYXN0UHJvbWlzZTsK
        CiAgICBhcmdzLnVuc2hpZnQoYXBwKTsKCiAgICAvLyBzb21lIGhlbHBlcnMg
        YXJlIG5vdCBhc3luYyBhbmQKICAgIC8vIG5lZWQgdG8gcmV0dXJuIGEgdmFs
        dWUgaW1tZWRpYXRlbHkuCiAgICAvLyBleGFtcGxlOiBgZmluZGAKICAgIGlm
        ICghbWV0YS53YWl0KSB7CiAgICAgIHJldHVybiBmbi5hcHBseShhcHAsIGFy
        Z3MpOwogICAgfQoKICAgIGlmICghbGFzdFByb21pc2UpIHsKICAgICAgLy8g
        SXQncyB0aGUgZmlyc3QgYXN5bmMgaGVscGVyIGluIGN1cnJlbnQgY29udGV4
        dAogICAgICBsYXN0UHJvbWlzZSA9IGZuLmFwcGx5KGFwcCwgYXJncyk7CiAg
        ICB9IGVsc2UgewogICAgICAvLyB3YWl0IGZvciBsYXN0IGhlbHBlcidzIHBy
        b21pc2UgdG8gcmVzb2x2ZQogICAgICAvLyBhbmQgdGhlbiBleGVjdXRlCiAg
        ICAgIHJ1bihmdW5jdGlvbigpIHsKICAgICAgICBsYXN0UHJvbWlzZSA9IEVt
        YmVyLlRlc3QucmVzb2x2ZShsYXN0UHJvbWlzZSkudGhlbihmdW5jdGlvbigp
        IHsKICAgICAgICAgIHJldHVybiBmbi5hcHBseShhcHAsIGFyZ3MpOwogICAg
        ICAgIH0pOwogICAgICB9KTsKICAgIH0KCiAgICByZXR1cm4gbGFzdFByb21p
        c2U7CiAgfTsKfQoKZnVuY3Rpb24gcnVuKGZuKSB7CiAgaWYgKCFFbWJlci5y
        dW4uY3VycmVudFJ1bkxvb3ApIHsKICAgIEVtYmVyLnJ1bihmbik7CiAgfSBl
        bHNlIHsKICAgIGZuKCk7CiAgfQp9CgpFbWJlci5BcHBsaWNhdGlvbi5yZW9w
        ZW4oewogIC8qKgogICBUaGlzIHByb3BlcnR5IGNvbnRhaW5zIHRoZSB0ZXN0
        aW5nIGhlbHBlcnMgZm9yIHRoZSBjdXJyZW50IGFwcGxpY2F0aW9uLiBUaGVz
        ZQogICBhcmUgY3JlYXRlZCBvbmNlIHlvdSBjYWxsIGBpbmplY3RUZXN0SGVs
        cGVyc2Agb24geW91ciBgRW1iZXIuQXBwbGljYXRpb25gCiAgIGluc3RhbmNl
        LiBUaGUgaW5jbHVkZWQgaGVscGVycyBhcmUgYWxzbyBhdmFpbGFibGUgb24g
        dGhlIGB3aW5kb3dgIG9iamVjdCBieQogICBkZWZhdWx0LCBidXQgY2FuIGJl
        IHVzZWQgZnJvbSB0aGlzIG9iamVjdCBvbiB0aGUgaW5kaXZpZHVhbCBhcHBs
        aWNhdGlvbiBhbHNvLgoKICAgIEBwcm9wZXJ0eSB0ZXN0SGVscGVycwogICAg
        QHR5cGUge09iamVjdH0KICAgIEBkZWZhdWx0IHt9CiAgKi8KICB0ZXN0SGVs
        cGVyczoge30sCgogIC8qKgogICBUaGlzIHByb3BlcnR5IHdpbGwgY29udGFp
        biB0aGUgb3JpZ2luYWwgbWV0aG9kcyB0aGF0IHdlcmUgcmVnaXN0ZXJlZAog
        ICBvbiB0aGUgYGhlbHBlckNvbnRhaW5lcmAgYmVmb3JlIGBpbmplY3RUZXN0
        SGVscGVyc2AgaXMgY2FsbGVkLgoKICAgV2hlbiBgcmVtb3ZlVGVzdEhlbHBl
        cnNgIGlzIGNhbGxlZCwgdGhlc2UgbWV0aG9kcyBhcmUgcmVzdG9yZWQgdG8g
        dGhlCiAgIGBoZWxwZXJDb250YWluZXJgLgoKICAgIEBwcm9wZXJ0eSBvcmln
        aW5hbE1ldGhvZHMKICAgIEB0eXBlIHtPYmplY3R9CiAgICBAZGVmYXVsdCB7
        fQogICAgQHByaXZhdGUKICAqLwogIG9yaWdpbmFsTWV0aG9kczoge30sCgoK
        ICAvKioKICBUaGlzIHByb3BlcnR5IGluZGljYXRlcyB3aGV0aGVyIG9yIG5v
        dCB0aGlzIGFwcGxpY2F0aW9uIGlzIGN1cnJlbnRseSBpbgogIHRlc3Rpbmcg
        bW9kZS4gVGhpcyBpcyBzZXQgd2hlbiBgc2V0dXBGb3JUZXN0aW5nYCBpcyBj
        YWxsZWQgb24gdGhlIGN1cnJlbnQKICBhcHBsaWNhdGlvbi4KCiAgQHByb3Bl
        cnR5IHRlc3RpbmcKICBAdHlwZSB7Qm9vbGVhbn0KICBAZGVmYXVsdCBmYWxz
        ZQogICovCiAgdGVzdGluZzogZmFsc2UsCgogIC8qKgogICBUaGlzIGhvb2sg
        ZGVmZXJzIHRoZSByZWFkaW5lc3Mgb2YgdGhlIGFwcGxpY2F0aW9uLCBzbyB0
        aGF0IHlvdSBjYW4gc3RhcnQKICAgdGhlIGFwcCB3aGVuIHlvdXIgdGVzdHMg
        YXJlIHJlYWR5IHRvIHJ1bi4gSXQgYWxzbyBzZXRzIHRoZSByb3V0ZXIncwog
        ICBsb2NhdGlvbiB0byAnbm9uZScsIHNvIHRoYXQgdGhlIHdpbmRvdydzIGxv
        Y2F0aW9uIHdpbGwgbm90IGJlIG1vZGlmaWVkCiAgIChwcmV2ZW50aW5nIGJv
        dGggYWNjaWRlbnRhbCBsZWFraW5nIG9mIHN0YXRlIGJldHdlZW4gdGVzdHMg
        YW5kIGludGVyZmVyZW5jZQogICB3aXRoIHlvdXIgdGVzdGluZyBmcmFtZXdv
        cmspLgoKICAgRXhhbXBsZToKCiAgYGBgCiAgQXBwLnNldHVwRm9yVGVzdGlu
        ZygpOwogIGBgYAoKICAgIEBtZXRob2Qgc2V0dXBGb3JUZXN0aW5nCiAgKi8K
        ICBzZXR1cEZvclRlc3Rpbmc6IGZ1bmN0aW9uKCkgewogICAgRW1iZXIudGVz
        dGluZyA9IHRydWU7CgogICAgdGhpcy50ZXN0aW5nID0gdHJ1ZTsKCiAgICB0
        aGlzLlJvdXRlci5yZW9wZW4oewogICAgICBsb2NhdGlvbjogJ25vbmUnCiAg
        ICB9KTsKCiAgICAvLyBpZiBhZGFwdGVyIGlzIG5vdCBtYW51YWxseSBzZXQg
        ZGVmYXVsdCB0byBRVW5pdAogICAgaWYgKCFFbWJlci5UZXN0LmFkYXB0ZXIp
        IHsKICAgICAgIEVtYmVyLlRlc3QuYWRhcHRlciA9IEVtYmVyLlRlc3QuUVVu
        aXRBZGFwdGVyLmNyZWF0ZSgpOwogICAgfQoKICAgICAgfSwKCiAgLyoqCiAg
        ICBUaGlzIHdpbGwgYmUgdXNlZCBhcyB0aGUgY29udGFpbmVyIHRvIGluamVj
        dCB0aGUgdGVzdCBoZWxwZXJzIGludG8uIEJ5CiAgICBkZWZhdWx0IHRoZSBo
        ZWxwZXJzIGFyZSBpbmplY3RlZCBpbnRvIGB3aW5kb3dgLgoKICAgIEBwcm9w
        ZXJ0eSBoZWxwZXJDb250YWluZXIKICAgQHR5cGUge09iamVjdH0gVGhlIG9i
        amVjdCB0byBiZSB1c2VkIGZvciB0ZXN0IGhlbHBlcnMuCiAgIEBkZWZhdWx0
        IHdpbmRvdwogICovCiAgaGVscGVyQ29udGFpbmVyOiB3aW5kb3csCgogIC8q
        KgogICAgVGhpcyBpbmplY3RzIHRoZSB0ZXN0IGhlbHBlcnMgaW50byB0aGUg
        YGhlbHBlckNvbnRhaW5lcmAgb2JqZWN0LiBJZiBhbiBvYmplY3QgaXMgcHJv
        dmlkZWQKICAgIGl0IHdpbGwgYmUgdXNlZCBhcyB0aGUgaGVscGVyQ29udGFp
        bmVyLiBJZiBgaGVscGVyQ29udGFpbmVyYCBpcyBub3Qgc2V0IGl0IHdpbGwg
        ZGVmYXVsdAogICAgdG8gYHdpbmRvd2AuIElmIGEgZnVuY3Rpb24gb2YgdGhl
        IHNhbWUgbmFtZSBoYXMgYWxyZWFkeSBiZWVuIGRlZmluZWQgaXQgd2lsbCBi
        ZSBjYWNoZWQKICAgIChzbyB0aGF0IGl0IGNhbiBiZSByZXNldCBpZiB0aGUg
        aGVscGVyIGlzIHJlbW92ZWQgd2l0aCBgdW5yZWdpc3RlckhlbHBlcmAgb3IK
        ICAgIGByZW1vdmVUZXN0SGVscGVyc2ApLgoKICAgQW55IGNhbGxiYWNrcyBy
        ZWdpc3RlcmVkIHdpdGggYG9uSW5qZWN0SGVscGVyc2Agd2lsbCBiZSBjYWxs
        ZWQgb25jZSB0aGUKICAgaGVscGVycyBoYXZlIGJlZW4gaW5qZWN0ZWQuCgog
        IEV4YW1wbGU6CiAgYGBgCiAgQXBwLmluamVjdFRlc3RIZWxwZXJzKCk7CiAg
        YGBgCgogICAgQG1ldGhvZCBpbmplY3RUZXN0SGVscGVycwogICovCiAgaW5q
        ZWN0VGVzdEhlbHBlcnM6IGZ1bmN0aW9uKGhlbHBlckNvbnRhaW5lcikgewog
        ICAgaWYgKGhlbHBlckNvbnRhaW5lcikgeyB0aGlzLmhlbHBlckNvbnRhaW5l
        ciA9IGhlbHBlckNvbnRhaW5lcjsgfQoKICAgIHRoaXMudGVzdEhlbHBlcnMg
        PSB7fTsKICAgIGZvciAodmFyIG5hbWUgaW4gaGVscGVycykgewogICAgICB0
        aGlzLm9yaWdpbmFsTWV0aG9kc1tuYW1lXSA9IHRoaXMuaGVscGVyQ29udGFp
        bmVyW25hbWVdOwogICAgICB0aGlzLnRlc3RIZWxwZXJzW25hbWVdID0gdGhp
        cy5oZWxwZXJDb250YWluZXJbbmFtZV0gPSBoZWxwZXIodGhpcywgbmFtZSk7
        CiAgICAgIHByb3RvV3JhcChFbWJlci5UZXN0LlByb21pc2UucHJvdG90eXBl
        LCBuYW1lLCBoZWxwZXIodGhpcywgbmFtZSksIGhlbHBlcnNbbmFtZV0ubWV0
        YS53YWl0KTsKICAgIH0KCiAgICBmb3IodmFyIGkgPSAwLCBsID0gaW5qZWN0
        SGVscGVyc0NhbGxiYWNrcy5sZW5ndGg7IGkgPCBsOyBpKyspIHsKICAgICAg
        aW5qZWN0SGVscGVyc0NhbGxiYWNrc1tpXSh0aGlzKTsKICAgIH0KICB9LAoK
        ICAvKioKICAgIFRoaXMgcmVtb3ZlcyBhbGwgaGVscGVycyB0aGF0IGhhdmUg
        YmVlbiByZWdpc3RlcmVkLCBhbmQgcmVzZXRzIGFuZCBmdW5jdGlvbnMKICAg
        IHRoYXQgd2VyZSBvdmVycmlkZGVuIGJ5IHRoZSBoZWxwZXJzLgoKICAgIEV4
        YW1wbGU6CgogICAgYGBgamF2YXNjcmlwdAogICAgQXBwLnJlbW92ZVRlc3RI
        ZWxwZXJzKCk7CiAgICBgYGAKCiAgICBAcHVibGljCiAgICBAbWV0aG9kIHJl
        bW92ZVRlc3RIZWxwZXJzCiAgKi8KICByZW1vdmVUZXN0SGVscGVyczogZnVu
        Y3Rpb24oKSB7CiAgICBmb3IgKHZhciBuYW1lIGluIGhlbHBlcnMpIHsKICAg
        ICAgdGhpcy5oZWxwZXJDb250YWluZXJbbmFtZV0gPSB0aGlzLm9yaWdpbmFs
        TWV0aG9kc1tuYW1lXTsKICAgICAgZGVsZXRlIHRoaXMudGVzdEhlbHBlcnNb
        bmFtZV07CiAgICAgIGRlbGV0ZSB0aGlzLm9yaWdpbmFsTWV0aG9kc1tuYW1l
        XTsKICAgIH0KICB9Cn0pOwoKLy8gVGhpcyBtZXRob2QgaXMgbm8gbG9uZ2Vy
        IG5lZWRlZAovLyBCdXQgc3RpbGwgaGVyZSBmb3IgYmFja3dhcmRzIGNvbXBh
        dGliaWxpdHkKLy8gb2YgaGVscGVyIGNoYWluaW5nCmZ1bmN0aW9uIHByb3Rv
        V3JhcChwcm90bywgbmFtZSwgY2FsbGJhY2ssIGlzQXN5bmMpIHsKICBwcm90
        b1tuYW1lXSA9IGZ1bmN0aW9uKCkgewogICAgdmFyIGFyZ3MgPSBhcmd1bWVu
        dHM7CiAgICBpZiAoaXNBc3luYykgewogICAgICByZXR1cm4gY2FsbGJhY2su
        YXBwbHkodGhpcywgYXJncyk7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4g
        dGhpcy50aGVuKGZ1bmN0aW9uKCkgewogICAgICAgIHJldHVybiBjYWxsYmFj
        ay5hcHBseSh0aGlzLCBhcmdzKTsKICAgICAgfSk7CiAgICB9CiAgfTsKfQoK
        RW1iZXIuVGVzdC5Qcm9taXNlID0gZnVuY3Rpb24oKSB7CiAgRW1iZXIuUlNW
        UC5Qcm9taXNlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgRW1iZXIuVGVz
        dC5sYXN0UHJvbWlzZSA9IHRoaXM7Cn07CgpFbWJlci5UZXN0LlByb21pc2Uu
        cHJvdG90eXBlID0gRW1iZXIuY3JlYXRlKEVtYmVyLlJTVlAuUHJvbWlzZS5w
        cm90b3R5cGUpOwpFbWJlci5UZXN0LlByb21pc2UucHJvdG90eXBlLmNvbnN0
        cnVjdG9yID0gRW1iZXIuVGVzdC5Qcm9taXNlOwoKLy8gUGF0Y2ggYHRoZW5g
        IHRvIGlzb2xhdGUgYXN5bmMgbWV0aG9kcwovLyBzcGVjaWZpY2FsbHkgYEVt
        YmVyLlRlc3QubGFzdFByb21pc2VgCnZhciBvcmlnaW5hbFRoZW4gPSBFbWJl
        ci5SU1ZQLlByb21pc2UucHJvdG90eXBlLnRoZW47CkVtYmVyLlRlc3QuUHJv
        bWlzZS5wcm90b3R5cGUudGhlbiA9IGZ1bmN0aW9uKG9uU3VjY2Vzcywgb25G
        YWlsdXJlKSB7CiAgcmV0dXJuIG9yaWdpbmFsVGhlbi5jYWxsKHRoaXMsIGZ1
        bmN0aW9uKHZhbCkgewogICAgcmV0dXJuIGlzb2xhdGUob25TdWNjZXNzLCB2
        YWwpOwogIH0sIG9uRmFpbHVyZSk7Cn07CgovLyBUaGlzIG1ldGhvZCBpc29s
        YXRlcyBuZXN0ZWQgYXN5bmMgbWV0aG9kcwovLyBzbyB0aGF0IHRoZXkgZG9u
        J3QgY29uZmxpY3Qgd2l0aCBvdGhlciBsYXN0IHByb21pc2VzLgovLwovLyAx
        LiBTZXQgYEVtYmVyLlRlc3QubGFzdFByb21pc2VgIHRvIG51bGwKLy8gMi4g
        SW52b2tlIG1ldGhvZAovLyAzLiBSZXR1cm4gdGhlIGxhc3QgcHJvbWlzZSBj
        cmVhdGVkIGR1cmluZyBtZXRob2QKLy8gNC4gUmVzdG9yZSBgRW1iZXIuVGVz
        dC5sYXN0UHJvbWlzZWAgdG8gb3JpZ2luYWwgdmFsdWUKZnVuY3Rpb24gaXNv
        bGF0ZShmbiwgdmFsKSB7CiAgdmFyIHZhbHVlLCBsYXN0UHJvbWlzZTsKCiAg
        Ly8gUmVzZXQgbGFzdFByb21pc2UgZm9yIG5lc3RlZCBoZWxwZXJzCiAgRW1i
        ZXIuVGVzdC5sYXN0UHJvbWlzZSA9IG51bGw7CgogIHZhbHVlID0gZm4odmFs
        KTsKCiAgbGFzdFByb21pc2UgPSBFbWJlci5UZXN0Lmxhc3RQcm9taXNlOwoK
        ICAvLyBJZiB0aGUgbWV0aG9kIHJldHVybmVkIGEgcHJvbWlzZQogIC8vIHJl
        dHVybiB0aGF0IHByb21pc2UuIElmIG5vdCwKICAvLyByZXR1cm4gdGhlIGxh
        c3QgYXN5bmMgaGVscGVyJ3MgcHJvbWlzZQogIGlmICgodmFsdWUgJiYgKHZh
        bHVlIGluc3RhbmNlb2YgRW1iZXIuVGVzdC5Qcm9taXNlKSkgfHwgIWxhc3RQ
        cm9taXNlKSB7CiAgICByZXR1cm4gdmFsdWU7CiAgfSBlbHNlIHsKICAgIHJ1
        bihmdW5jdGlvbigpIHsKICAgICAgbGFzdFByb21pc2UgPSBFbWJlci5UZXN0
        LnJlc29sdmUobGFzdFByb21pc2UpLnRoZW4oZnVuY3Rpb24oKSB7CiAgICAg
        ICAgcmV0dXJuIHZhbHVlOwogICAgICB9KTsKICAgIH0pOwogICAgcmV0dXJu
        IGxhc3RQcm9taXNlOwogIH0KfQoKfSkoKTsKCgoKKGZ1bmN0aW9uKCkgewpF
        bWJlci5vbkxvYWQoJ0VtYmVyLkFwcGxpY2F0aW9uJywgZnVuY3Rpb24oQXBw
        bGljYXRpb24pIHsKICBBcHBsaWNhdGlvbi5pbml0aWFsaXplcih7CiAgICBu
        YW1lOiAnZGVmZXJSZWFkaW5lc3MgaW4gYHRlc3RpbmdgIG1vZGUnLAoKICAg
        IGluaXRpYWxpemU6IGZ1bmN0aW9uKGNvbnRhaW5lciwgYXBwbGljYXRpb24p
        ewogICAgICBpZiAoYXBwbGljYXRpb24udGVzdGluZykgewogICAgICAgIGFw
        cGxpY2F0aW9uLmRlZmVyUmVhZGluZXNzKCk7CiAgICAgIH0KICAgIH0KICB9
        KTsKCiAgfSk7Cgp9KSgpOwoKCgooZnVuY3Rpb24oKSB7Ci8qKgogIEBtb2R1
        bGUgZW1iZXIKICBAc3VibW9kdWxlIGVtYmVyLXRlc3RpbmcKICovCgp2YXIg
        JCA9IEVtYmVyLiQ7CgovKioKICBUaGlzIG1ldGhvZCBjcmVhdGVzIGEgY2hl
        Y2tib3ggYW5kIHRyaWdnZXJzIHRoZSBjbGljayBldmVudCB0byBmaXJlIHRo
        ZQogIHBhc3NlZCBpbiBoYW5kbGVyLiBJdCBpcyB1c2VkIHRvIGNvcnJlY3Qg
        Zm9yIGEgYnVnIGluIG9sZGVyIHZlcnNpb25zCiAgb2YgalF1ZXJ5IChlLmcg
        MS44LjMpLgoKICBAcHJpdmF0ZQogIEBtZXRob2QgdGVzdENoZWNrYm94Q2xp
        Y2sKKi8KZnVuY3Rpb24gdGVzdENoZWNrYm94Q2xpY2soaGFuZGxlcikgewog
        ICQoJzxpbnB1dCB0eXBlPSJjaGVja2JveCI+JykKICAgIC5jc3MoeyBwb3Np
        dGlvbjogJ2Fic29sdXRlJywgbGVmdDogJy0xMDAwcHgnLCB0b3A6ICctMTAw
        MHB4JyB9KQogICAgLmFwcGVuZFRvKCdib2R5JykKICAgIC5vbignY2xpY2sn
        LCBoYW5kbGVyKQogICAgLnRyaWdnZXIoJ2NsaWNrJykKICAgIC5yZW1vdmUo
        KTsKfQoKJChmdW5jdGlvbigpIHsKICAvKgogICAgRGV0ZXJtaW5lIHdoZXRo
        ZXIgYSBjaGVja2JveCBjaGVja2VkIHVzaW5nIGpRdWVyeSdzICJjbGljayIg
        bWV0aG9kIHdpbGwgaGF2ZQogICAgdGhlIGNvcnJlY3QgdmFsdWUgZm9yIGl0
        cyBjaGVja2VkIHByb3BlcnR5LgoKICAgIElmIHdlIGRldGVybWluZSB0aGF0
        IHRoZSBjdXJyZW50IGpRdWVyeSB2ZXJzaW9uIGV4aGliaXRzIHRoaXMgYmVo
        YXZpb3IsCiAgICBwYXRjaCBpdCB0byB3b3JrIGNvcnJlY3RseSBhcyBpbiB0
        aGUgY29tbWl0IGZvciB0aGUgYWN0dWFsIGZpeDoKICAgIGh0dHBzOi8vZ2l0
        aHViLmNvbS9qcXVlcnkvanF1ZXJ5L2NvbW1pdC8xZmIyZjkyLgogICovCiAg
        dGVzdENoZWNrYm94Q2xpY2soZnVuY3Rpb24oKSB7CiAgICBpZiAoIXRoaXMu
        Y2hlY2tlZCAmJiAhJC5ldmVudC5zcGVjaWFsLmNsaWNrKSB7CiAgICAgICQu
        ZXZlbnQuc3BlY2lhbC5jbGljayA9IHsKICAgICAgICAvLyBGb3IgY2hlY2ti
        b3gsIGZpcmUgbmF0aXZlIGV2ZW50IHNvIGNoZWNrZWQgc3RhdGUgd2lsbCBi
        ZSByaWdodAogICAgICAgIHRyaWdnZXI6IGZ1bmN0aW9uKCkgewogICAgICAg
        ICAgaWYgKCQubm9kZU5hbWUoIHRoaXMsICJpbnB1dCIgKSAmJiB0aGlzLnR5
        cGUgPT09ICJjaGVja2JveCIgJiYgdGhpcy5jbGljaykgewogICAgICAgICAg
        ICB0aGlzLmNsaWNrKCk7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAg
        ICAgICAgIH0KICAgICAgICB9CiAgICAgIH07CiAgICB9CiAgfSk7CgogIC8v
        IFRyeSBhZ2FpbiB0byB2ZXJpZnkgdGhhdCB0aGUgcGF0Y2ggdG9vayBlZmZl
        Y3Qgb3IgYmxvdyB1cC4KICB0ZXN0Q2hlY2tib3hDbGljayhmdW5jdGlvbigp
        IHsKICAgIEVtYmVyLndhcm4oImNsaWNrZWQgY2hlY2tib3hlcyBzaG91bGQg
        YmUgY2hlY2tlZCEgdGhlIGpRdWVyeSBwYXRjaCBkaWRuJ3Qgd29yayIsIHRo
        aXMuY2hlY2tlZCk7CiAgfSk7Cn0pOwoKfSkoKTsKCgoKKGZ1bmN0aW9uKCkg
        ewovKioKIEBtb2R1bGUgZW1iZXIKIEBzdWJtb2R1bGUgZW1iZXItdGVzdGlu
        ZwoqLwoKdmFyIFRlc3QgPSBFbWJlci5UZXN0OwoKLyoqCiAgVGhlIHByaW1h
        cnkgcHVycG9zZSBvZiB0aGlzIGNsYXNzIGlzIHRvIGNyZWF0ZSBob29rcyB0
        aGF0IGNhbiBiZSBpbXBsZW1lbnRlZAogIGJ5IGFuIGFkYXB0ZXIgZm9yIHZh
        cmlvdXMgdGVzdCBmcmFtZXdvcmtzLgoKICBAY2xhc3MgQWRhcHRlcgogIEBu
        YW1lc3BhY2UgRW1iZXIuVGVzdAoqLwpUZXN0LkFkYXB0ZXIgPSBFbWJlci5P
        YmplY3QuZXh0ZW5kKHsKICAvKioKICAgIFRoaXMgY2FsbGJhY2sgd2lsbCBi
        ZSBjYWxsZWQgd2hlbmV2ZXIgYW4gYXN5bmMgb3BlcmF0aW9uIGlzIGFib3V0
        IHRvIHN0YXJ0LgoKICAgIE92ZXJyaWRlIHRoaXMgdG8gY2FsbCB5b3VyIGZy
        YW1ld29yaydzIG1ldGhvZHMgdGhhdCBoYW5kbGUgYXN5bmMKICAgIG9wZXJh
        dGlvbnMuCgogICAgQHB1YmxpYwogICAgQG1ldGhvZCBhc3luY1N0YXJ0CiAg
        Ki8KICBhc3luY1N0YXJ0OiBFbWJlci5LLAoKICAvKioKICAgIFRoaXMgY2Fs
        bGJhY2sgd2lsbCBiZSBjYWxsZWQgd2hlbmV2ZXIgYW4gYXN5bmMgb3BlcmF0
        aW9uIGhhcyBjb21wbGV0ZWQuCgogICAgQHB1YmxpYwogICAgQG1ldGhvZCBh
        c3luY0VuZAogICovCiAgYXN5bmNFbmQ6IEVtYmVyLkssCgogIC8qKgogICAg
        T3ZlcnJpZGUgdGhpcyBtZXRob2Qgd2l0aCB5b3VyIHRlc3RpbmcgZnJhbWV3
        b3JrJ3MgZmFsc2UgYXNzZXJ0aW9uLgogICAgVGhpcyBmdW5jdGlvbiBpcyBj
        YWxsZWQgd2hlbmV2ZXIgYW4gZXhjZXB0aW9uIG9jY3VycyBjYXVzaW5nIHRo
        ZSB0ZXN0aW5nCiAgICBwcm9taXNlIHRvIGZhaWwuCgogICAgUVVuaXQgZXhh
        bXBsZToKCiAgICBgYGBqYXZhc2NyaXB0CiAgICAgIGV4Y2VwdGlvbjogZnVu
        Y3Rpb24oZXJyb3IpIHsKICAgICAgICBvayhmYWxzZSwgZXJyb3IpOwogICAg
        ICB9OwogICAgYGBgCgogICAgQHB1YmxpYwogICAgQG1ldGhvZCBleGNlcHRp
        b24KICAgIEBwYXJhbSB7U3RyaW5nfSBlcnJvciBUaGUgZXhjZXB0aW9uIHRv
        IGJlIHJhaXNlZC4KICAqLwogIGV4Y2VwdGlvbjogZnVuY3Rpb24oZXJyb3Ip
        IHsKICAgIHRocm93IGVycm9yOwogIH0KfSk7CgovKioKICBUaGlzIGNsYXNz
        IGltcGxlbWVudHMgdGhlIG1ldGhvZHMgZGVmaW5lZCBieSBFbWJlci5UZXN0
        LkFkYXB0ZXIgZm9yIHRoZQogIFFVbml0IHRlc3RpbmcgZnJhbWV3b3JrLgoK
        ICBAY2xhc3MgUVVuaXRBZGFwdGVyCiAgQG5hbWVzcGFjZSBFbWJlci5UZXN0
        CiAgQGV4dGVuZHMgRW1iZXIuVGVzdC5BZGFwdGVyCiovClRlc3QuUVVuaXRB
        ZGFwdGVyID0gVGVzdC5BZGFwdGVyLmV4dGVuZCh7CiAgYXN5bmNTdGFydDog
        ZnVuY3Rpb24oKSB7CiAgICBzdG9wKCk7CiAgfSwKICBhc3luY0VuZDogZnVu
        Y3Rpb24oKSB7CiAgICBzdGFydCgpOwogIH0sCiAgZXhjZXB0aW9uOiBmdW5j
        dGlvbihlcnJvcikgewogICAgb2soZmFsc2UsIEVtYmVyLmluc3BlY3QoZXJy
        b3IpKTsKICB9Cn0pOwoKfSkoKTsKCgoKKGZ1bmN0aW9uKCkgewovKioKKiBA
        bW9kdWxlIGVtYmVyCiogQHN1Ym1vZHVsZSBlbWJlci10ZXN0aW5nCiovCgp2
        YXIgZ2V0ID0gRW1iZXIuZ2V0LAogICAgVGVzdCA9IEVtYmVyLlRlc3QsCiAg
        ICBoZWxwZXIgPSBUZXN0LnJlZ2lzdGVySGVscGVyLAogICAgYXN5bmNIZWxw
        ZXIgPSBUZXN0LnJlZ2lzdGVyQXN5bmNIZWxwZXIsCiAgICBjb3VudEFzeW5j
        ID0gMDsKClRlc3QucGVuZGluZ0FqYXhSZXF1ZXN0cyA9IDA7CgpUZXN0Lm9u
        SW5qZWN0SGVscGVycyhmdW5jdGlvbigpIHsKICBFbWJlci4kKGRvY3VtZW50
        KS5hamF4U3RhcnQoZnVuY3Rpb24oKSB7CiAgICBUZXN0LnBlbmRpbmdBamF4
        UmVxdWVzdHMrKzsKICB9KTsKCiAgRW1iZXIuJChkb2N1bWVudCkuYWpheFN0
        b3AoZnVuY3Rpb24oKSB7CiAgICBFbWJlci5hc3NlcnQoIkFuIGFqYXhTdG9w
        IGV2ZW50IHdoaWNoIHdvdWxkIGNhdXNlIHRoZSBudW1iZXIgb2YgcGVuZGlu
        ZyBBSkFYICIgKwogICAgICAgICAgICAgICAgICJyZXF1ZXN0cyB0byBiZSBu
        ZWdhdGl2ZSBoYXMgYmVlbiB0cmlnZ2VyZWQuIFRoaXMgaXMgbW9zdCBsaWtl
        bHkgIiArCiAgICAgICAgICAgICAgICAgImNhdXNlZCBieSBBSkFYIGV2ZW50
        cyB0aGF0IHdlcmUgc3RhcnRlZCBiZWZvcmUgY2FsbGluZyAiICsKICAgICAg
        ICAgICAgICAgICAiYGluamVjdFRlc3RIZWxwZXJzKClgLiIsIFRlc3QucGVu
        ZGluZ0FqYXhSZXF1ZXN0cyAhPT0gMCk7CiAgICBUZXN0LnBlbmRpbmdBamF4
        UmVxdWVzdHMtLTsKICB9KTsKfSk7CgpmdW5jdGlvbiBjdXJyZW50Um91dGVO
        YW1lKGFwcCl7CiAgdmFyIGFwcENvbnRyb2xsZXIgPSBhcHAuX19jb250YWlu
        ZXJfXy5sb29rdXAoJ2NvbnRyb2xsZXI6YXBwbGljYXRpb24nKTsKCiAgcmV0
        dXJuIGdldChhcHBDb250cm9sbGVyLCAnY3VycmVudFJvdXRlTmFtZScpOwp9
        CgpmdW5jdGlvbiBjdXJyZW50UGF0aChhcHApewogIHZhciBhcHBDb250cm9s
        bGVyID0gYXBwLl9fY29udGFpbmVyX18ubG9va3VwKCdjb250cm9sbGVyOmFw
        cGxpY2F0aW9uJyk7CgogIHJldHVybiBnZXQoYXBwQ29udHJvbGxlciwgJ2N1
        cnJlbnRQYXRoJyk7Cn0KCmZ1bmN0aW9uIGN1cnJlbnRVUkwoYXBwKXsKICB2
        YXIgcm91dGVyID0gYXBwLl9fY29udGFpbmVyX18ubG9va3VwKCdyb3V0ZXI6
        bWFpbicpOwoKICByZXR1cm4gZ2V0KHJvdXRlciwgJ2xvY2F0aW9uJykuZ2V0
        VVJMKCk7Cn0KCmZ1bmN0aW9uIHZpc2l0KGFwcCwgdXJsKSB7CiAgdmFyIHJv
        dXRlciA9IGFwcC5fX2NvbnRhaW5lcl9fLmxvb2t1cCgncm91dGVyOm1haW4n
        KTsKICByb3V0ZXIubG9jYXRpb24uc2V0VVJMKHVybCk7CgogIGlmIChhcHAu
        X3JlYWRpbmVzc0RlZmVycmFscyA+IDApIHsKICAgIHJvdXRlclsnaW5pdGlh
        bFVSTCddID0gdXJsOwogICAgRW1iZXIucnVuKGFwcCwgJ2FkdmFuY2VSZWFk
        aW5lc3MnKTsKICAgIGRlbGV0ZSByb3V0ZXJbJ2luaXRpYWxVUkwnXTsKICB9
        IGVsc2UgewogICAgRW1iZXIucnVuKGFwcCwgYXBwLmhhbmRsZVVSTCwgdXJs
        KTsKICB9CgogIHJldHVybiB3YWl0KGFwcCk7Cn0KCmZ1bmN0aW9uIGNsaWNr
        KGFwcCwgc2VsZWN0b3IsIGNvbnRleHQpIHsKICB2YXIgJGVsID0gZmluZFdp
        dGhBc3NlcnQoYXBwLCBzZWxlY3RvciwgY29udGV4dCk7CiAgRW1iZXIucnVu
        KCRlbCwgJ21vdXNlZG93bicpOwoKICBpZiAoJGVsLmlzKCc6aW5wdXQnKSkg
        ewogICAgdmFyIHR5cGUgPSAkZWwucHJvcCgndHlwZScpOwogICAgaWYgKHR5
        cGUgIT09ICdjaGVja2JveCcgJiYgdHlwZSAhPT0gJ3JhZGlvJyAmJiB0eXBl
        ICE9PSAnaGlkZGVuJykgewogICAgICBFbWJlci5ydW4oJGVsLCBmdW5jdGlv
        bigpewogICAgICAgIC8vIEZpcmVmb3ggZG9lcyBub3QgdHJpZ2dlciB0aGUg
        YGZvY3VzaW5gIGV2ZW50IGlmIHRoZSB3aW5kb3cKICAgICAgICAvLyBkb2Vz
        IG5vdCBoYXZlIGZvY3VzLiBJZiB0aGUgZG9jdW1lbnQgZG9lc24ndCBoYXZl
        IGZvY3VzIGp1c3QKICAgICAgICAvLyB1c2UgdHJpZ2dlcignZm9jdXNpbicp
        IGluc3RlYWQuCiAgICAgICAgaWYgKCFkb2N1bWVudC5oYXNGb2N1cyB8fCBk
        b2N1bWVudC5oYXNGb2N1cygpKSB7CiAgICAgICAgICB0aGlzLmZvY3VzKCk7
        CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMudHJpZ2dlcignZm9j
        dXNpbicpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgfQoKICBFbWJl
        ci5ydW4oJGVsLCAnbW91c2V1cCcpOwogIEVtYmVyLnJ1bigkZWwsICdjbGlj
        aycpOwoKICByZXR1cm4gd2FpdChhcHApOwp9CgpmdW5jdGlvbiB0cmlnZ2Vy
        RXZlbnQoYXBwLCBzZWxlY3RvciwgY29udGV4dCwgZXZlbnQpewogIGlmICh0
        eXBlb2YgbWV0aG9kID09PSAndW5kZWZpbmVkJykgewogICAgZXZlbnQgPSBj
        b250ZXh0OwogICAgY29udGV4dCA9IG51bGw7CiAgfQoKICB2YXIgJGVsID0g
        ZmluZFdpdGhBc3NlcnQoYXBwLCBzZWxlY3RvciwgY29udGV4dCk7CgogIEVt
        YmVyLnJ1bigkZWwsICd0cmlnZ2VyJywgZXZlbnQpOwoKICByZXR1cm4gd2Fp
        dChhcHApOwp9CgpmdW5jdGlvbiBrZXlFdmVudChhcHAsIHNlbGVjdG9yLCBj
        b250ZXh0LCB0eXBlLCBrZXlDb2RlKSB7CiAgdmFyICRlbDsKICBpZiAodHlw
        ZW9mIGtleUNvZGUgPT09ICd1bmRlZmluZWQnKSB7CiAgICBrZXlDb2RlID0g
        dHlwZTsKICAgIHR5cGUgPSBjb250ZXh0OwogICAgY29udGV4dCA9IG51bGw7
        CiAgfQogICRlbCA9IGZpbmRXaXRoQXNzZXJ0KGFwcCwgc2VsZWN0b3IsIGNv
        bnRleHQpOwogIHZhciBldmVudCA9IEVtYmVyLiQuRXZlbnQodHlwZSwgeyBr
        ZXlDb2RlOiBrZXlDb2RlIH0pOwogIEVtYmVyLnJ1bigkZWwsICd0cmlnZ2Vy
        JywgZXZlbnQpOwogIHJldHVybiB3YWl0KGFwcCk7Cn0KCmZ1bmN0aW9uIGZp
        bGxJbihhcHAsIHNlbGVjdG9yLCBjb250ZXh0LCB0ZXh0KSB7CiAgdmFyICRl
        bDsKICBpZiAodHlwZW9mIHRleHQgPT09ICd1bmRlZmluZWQnKSB7CiAgICB0
        ZXh0ID0gY29udGV4dDsKICAgIGNvbnRleHQgPSBudWxsOwogIH0KICAkZWwg
        PSBmaW5kV2l0aEFzc2VydChhcHAsIHNlbGVjdG9yLCBjb250ZXh0KTsKICBF
        bWJlci5ydW4oZnVuY3Rpb24oKSB7CiAgICAkZWwudmFsKHRleHQpLmNoYW5n
        ZSgpOwogIH0pOwogIHJldHVybiB3YWl0KGFwcCk7Cn0KCmZ1bmN0aW9uIGZp
        bmRXaXRoQXNzZXJ0KGFwcCwgc2VsZWN0b3IsIGNvbnRleHQpIHsKICB2YXIg
        JGVsID0gZmluZChhcHAsIHNlbGVjdG9yLCBjb250ZXh0KTsKICBpZiAoJGVs
        Lmxlbmd0aCA9PT0gMCkgewogICAgdGhyb3cgbmV3IEVtYmVyLkVycm9yKCJF
        bGVtZW50ICIgKyBzZWxlY3RvciArICIgbm90IGZvdW5kLiIpOwogIH0KICBy
        ZXR1cm4gJGVsOwp9CgpmdW5jdGlvbiBmaW5kKGFwcCwgc2VsZWN0b3IsIGNv
        bnRleHQpIHsKICB2YXIgJGVsOwogIGNvbnRleHQgPSBjb250ZXh0IHx8IGdl
        dChhcHAsICdyb290RWxlbWVudCcpOwogICRlbCA9IGFwcC4kKHNlbGVjdG9y
        LCBjb250ZXh0KTsKCiAgcmV0dXJuICRlbDsKfQoKZnVuY3Rpb24gYW5kVGhl
        bihhcHAsIGNhbGxiYWNrKSB7CiAgcmV0dXJuIHdhaXQoYXBwLCBjYWxsYmFj
        ayhhcHApKTsKfQoKZnVuY3Rpb24gd2FpdChhcHAsIHZhbHVlKSB7CiAgcmV0
        dXJuIFRlc3QucHJvbWlzZShmdW5jdGlvbihyZXNvbHZlKSB7CiAgICAvLyBJ
        ZiB0aGlzIGlzIHRoZSBmaXJzdCBhc3luYyBwcm9taXNlLCBraWNrIG9mZiB0
        aGUgYXN5bmMgdGVzdAogICAgaWYgKCsrY291bnRBc3luYyA9PT0gMSkgewog
        ICAgICBUZXN0LmFkYXB0ZXIuYXN5bmNTdGFydCgpOwogICAgfQoKICAgIC8v
        IEV2ZXJ5IDEwbXMsIHBvbGwgZm9yIHRoZSBhc3luYyB0aGluZyB0byBoYXZl
        IGZpbmlzaGVkCiAgICB2YXIgd2F0Y2hlciA9IHNldEludGVydmFsKGZ1bmN0
        aW9uKCkgewogICAgICAvLyAxLiBJZiB0aGUgcm91dGVyIGlzIGxvYWRpbmcs
        IGtlZXAgcG9sbGluZwogICAgICB2YXIgcm91dGVySXNMb2FkaW5nID0gISFh
        cHAuX19jb250YWluZXJfXy5sb29rdXAoJ3JvdXRlcjptYWluJykucm91dGVy
        LmFjdGl2ZVRyYW5zaXRpb247CiAgICAgIGlmIChyb3V0ZXJJc0xvYWRpbmcp
        IHsgcmV0dXJuOyB9CgogICAgICAvLyAyLiBJZiB0aGVyZSBhcmUgcGVuZGlu
        ZyBBamF4IHJlcXVlc3RzLCBrZWVwIHBvbGxpbmcKICAgICAgaWYgKFRlc3Qu
        cGVuZGluZ0FqYXhSZXF1ZXN0cykgeyByZXR1cm47IH0KCiAgICAgIC8vIDMu
        IElmIHRoZXJlIGFyZSBzY2hlZHVsZWQgdGltZXJzIG9yIHdlIGFyZSBpbnNp
        ZGUgb2YgYSBydW4gbG9vcCwga2VlcCBwb2xsaW5nCiAgICAgIGlmIChFbWJl
        ci5ydW4uaGFzU2NoZWR1bGVkVGltZXJzKCkgfHwgRW1iZXIucnVuLmN1cnJl
        bnRSdW5Mb29wKSB7IHJldHVybjsgfQogICAgICBpZiAoVGVzdC53YWl0ZXJz
        ICYmIFRlc3Qud2FpdGVycy5hbnkoZnVuY3Rpb24od2FpdGVyKSB7CiAgICAg
        ICAgdmFyIGNvbnRleHQgPSB3YWl0ZXJbMF07CiAgICAgICAgdmFyIGNhbGxi
        YWNrID0gd2FpdGVyWzFdOwogICAgICAgIHJldHVybiAhY2FsbGJhY2suY2Fs
        bChjb250ZXh0KTsKICAgICAgfSkpIHsgcmV0dXJuOyB9CiAgICAgIC8vIFN0
        b3AgcG9sbGluZwogICAgICBjbGVhckludGVydmFsKHdhdGNoZXIpOwoKICAg
        ICAgLy8gSWYgdGhpcyBpcyB0aGUgbGFzdCBhc3luYyBwcm9taXNlLCBlbmQg
        dGhlIGFzeW5jIHRlc3QKICAgICAgaWYgKC0tY291bnRBc3luYyA9PT0gMCkg
        ewogICAgICAgIFRlc3QuYWRhcHRlci5hc3luY0VuZCgpOwogICAgICB9Cgog
        ICAgICAvLyBTeW5jaHJvbm91c2x5IHJlc29sdmUgdGhlIHByb21pc2UKICAg
        ICAgRW1iZXIucnVuKG51bGwsIHJlc29sdmUsIHZhbHVlKTsKICAgIH0sIDEw
        KTsKICB9KTsKCn0KCgovKioKKiBMb2FkcyBhIHJvdXRlLCBzZXRzIHVwIGFu
        eSBjb250cm9sbGVycywgYW5kIHJlbmRlcnMgYW55IHRlbXBsYXRlcyBhc3Nv
        Y2lhdGVkCiogd2l0aCB0aGUgcm91dGUgYXMgdGhvdWdoIGEgcmVhbCB1c2Vy
        IGhhZCB0cmlnZ2VyZWQgdGhlIHJvdXRlIGNoYW5nZSB3aGlsZQoqIHVzaW5n
        IHlvdXIgYXBwLgoqCiogRXhhbXBsZToKKgoqIGBgYGphdmFzY3JpcHQKKiB2
        aXNpdCgncG9zdHMvaW5kZXgnKS50aGVuKGZ1bmN0aW9uKCkgewoqICAgLy8g
        YXNzZXJ0IHNvbWV0aGluZwoqIH0pOwoqIGBgYAoqCiogQG1ldGhvZCB2aXNp
        dAoqIEBwYXJhbSB7U3RyaW5nfSB1cmwgdGhlIG5hbWUgb2YgdGhlIHJvdXRl
        CiogQHJldHVybiB7UlNWUC5Qcm9taXNlfQoqLwphc3luY0hlbHBlcigndmlz
        aXQnLCB2aXNpdCk7CgovKioKKiBDbGlja3MgYW4gZWxlbWVudCBhbmQgdHJp
        Z2dlcnMgYW55IGFjdGlvbnMgdHJpZ2dlcmVkIGJ5IHRoZSBlbGVtZW50J3Mg
        YGNsaWNrYAoqIGV2ZW50LgoqCiogRXhhbXBsZToKKgoqIGBgYGphdmFzY3Jp
        cHQKKiBjbGljaygnLnNvbWUtalF1ZXJ5LXNlbGVjdG9yJykudGhlbihmdW5j
        dGlvbigpIHsKKiAgIC8vIGFzc2VydCBzb21ldGhpbmcKKiB9KTsKKiBgYGAK
        KgoqIEBtZXRob2QgY2xpY2sKKiBAcGFyYW0ge1N0cmluZ30gc2VsZWN0b3Ig
        alF1ZXJ5IHNlbGVjdG9yIGZvciBmaW5kaW5nIGVsZW1lbnQgb24gdGhlIERP
        TQoqIEByZXR1cm4ge1JTVlAuUHJvbWlzZX0KKi8KYXN5bmNIZWxwZXIoJ2Ns
        aWNrJywgY2xpY2spOwoKLyoqCiogU2ltdWxhdGVzIGEga2V5IGV2ZW50LCBl
        LmcuIGBrZXlwcmVzc2AsIGBrZXlkb3duYCwgYGtleXVwYCB3aXRoIHRoZSBk
        ZXNpcmVkIGtleUNvZGUKKgoqIEV4YW1wbGU6CioKKiBgYGBqYXZhc2NyaXB0
        Cioga2V5RXZlbnQoJy5zb21lLWpRdWVyeS1zZWxlY3RvcicsICdrZXlwcmVz
        cycsIDEzKS50aGVuKGZ1bmN0aW9uKCkgewoqICAvLyBhc3NlcnQgc29tZXRo
        aW5nCiogfSk7CiogYGBgCioKKiBAbWV0aG9kIGtleUV2ZW50CiogQHBhcmFt
        IHtTdHJpbmd9IHNlbGVjdG9yIGpRdWVyeSBzZWxlY3RvciBmb3IgZmluZGlu
        ZyBlbGVtZW50IG9uIHRoZSBET00KKiBAcGFyYW0ge1N0cmluZ30gdGhlIHR5
        cGUgb2Yga2V5IGV2ZW50LCBlLmcuIGBrZXlwcmVzc2AsIGBrZXlkb3duYCwg
        YGtleXVwYAoqIEBwYXJhbSB7TnVtYmVyfSB0aGUga2V5Q29kZSBvZiB0aGUg
        c2ltdWxhdGVkIGtleSBldmVudAoqIEByZXR1cm4ge1JTVlAuUHJvbWlzZX0K
        Ki8KYXN5bmNIZWxwZXIoJ2tleUV2ZW50Jywga2V5RXZlbnQpOwoKLyoqCiog
        RmlsbHMgaW4gYW4gaW5wdXQgZWxlbWVudCB3aXRoIHNvbWUgdGV4dC4KKgoq
        IEV4YW1wbGU6CioKKiBgYGBqYXZhc2NyaXB0CiogZmlsbEluKCcjZW1haWwn
        LCAneW91QGV4YW1wbGUuY29tJykudGhlbihmdW5jdGlvbigpIHsKKiAgIC8v
        IGFzc2VydCBzb21ldGhpbmcKKiB9KTsKKiBgYGAKKgoqIEBtZXRob2QgZmls
        bEluCiogQHBhcmFtIHtTdHJpbmd9IHNlbGVjdG9yIGpRdWVyeSBzZWxlY3Rv
        ciBmaW5kaW5nIGFuIGlucHV0IGVsZW1lbnQgb24gdGhlIERPTQoqIHRvIGZp
        bGwgdGV4dCB3aXRoCiogQHBhcmFtIHtTdHJpbmd9IHRleHQgdGV4dCB0byBw
        bGFjZSBpbnNpZGUgdGhlIGlucHV0IGVsZW1lbnQKKiBAcmV0dXJuIHtSU1ZQ
        LlByb21pc2V9CiovCmFzeW5jSGVscGVyKCdmaWxsSW4nLCBmaWxsSW4pOwoK
        LyoqCiogRmluZHMgYW4gZWxlbWVudCBpbiB0aGUgY29udGV4dCBvZiB0aGUg
        YXBwJ3MgY29udGFpbmVyIGVsZW1lbnQuIEEgc2ltcGxlIGFsaWFzCiogZm9y
        IGBhcHAuJChzZWxlY3RvcilgLgoqCiogRXhhbXBsZToKKgoqIGBgYGphdmFz
        Y3JpcHQKKiB2YXIgJGVsID0gZmluZCgnLm15LXNlbGVjdG9yJyk7CiogYGBg
        CioKKiBAbWV0aG9kIGZpbmQKKiBAcGFyYW0ge1N0cmluZ30gc2VsZWN0b3Ig
        alF1ZXJ5IHN0cmluZyBzZWxlY3RvciBmb3IgZWxlbWVudCBsb29rdXAKKiBA
        cmV0dXJuIHtPYmplY3R9IGpRdWVyeSBvYmplY3QgcmVwcmVzZW50aW5nIHRo
        ZSByZXN1bHRzIG9mIHRoZSBxdWVyeQoqLwpoZWxwZXIoJ2ZpbmQnLCBmaW5k
        KTsKCi8qKgoqIExpa2UgYGZpbmRgLCBidXQgdGhyb3dzIGFuIGVycm9yIGlm
        IHRoZSBlbGVtZW50IHNlbGVjdG9yIHJldHVybnMgbm8gcmVzdWx0cy4KKgoq
        IEV4YW1wbGU6CioKKiBgYGBqYXZhc2NyaXB0CiogdmFyICRlbCA9IGZpbmRX
        aXRoQXNzZXJ0KCcuZG9lc250LWV4aXN0Jyk7IC8vIHRocm93cyBlcnJvcgoq
        IGBgYAoqCiogQG1ldGhvZCBmaW5kV2l0aEFzc2VydAoqIEBwYXJhbSB7U3Ry
        aW5nfSBzZWxlY3RvciBqUXVlcnkgc2VsZWN0b3Igc3RyaW5nIGZvciBmaW5k
        aW5nIGFuIGVsZW1lbnQgd2l0aGluCiogdGhlIERPTQoqIEByZXR1cm4ge09i
        amVjdH0galF1ZXJ5IG9iamVjdCByZXByZXNlbnRpbmcgdGhlIHJlc3VsdHMg
        b2YgdGhlIHF1ZXJ5CiogQHRocm93cyB7RXJyb3J9IHRocm93cyBlcnJvciBp
        ZiBqUXVlcnkgb2JqZWN0IHJldHVybmVkIGhhcyBhIGxlbmd0aCBvZiAwCiov
        CmhlbHBlcignZmluZFdpdGhBc3NlcnQnLCBmaW5kV2l0aEFzc2VydCk7Cgov
        KioKICBDYXVzZXMgdGhlIHJ1biBsb29wIHRvIHByb2Nlc3MgYW55IHBlbmRp
        bmcgZXZlbnRzLiBUaGlzIGlzIHVzZWQgdG8gZW5zdXJlIHRoYXQKICBhbnkg
        YXN5bmMgb3BlcmF0aW9ucyBmcm9tIG90aGVyIGhlbHBlcnMgKG9yIHlvdXIg
        YXNzZXJ0aW9ucykgaGF2ZSBiZWVuIHByb2Nlc3NlZC4KCiAgVGhpcyBpcyBt
        b3N0IG9mdGVuIHVzZWQgYXMgdGhlIHJldHVybiB2YWx1ZSBmb3IgdGhlIGhl
        bHBlciBmdW5jdGlvbnMgKHNlZSAnY2xpY2snLAogICdmaWxsSW4nLCd2aXNp
        dCcsZXRjKS4KCiAgRXhhbXBsZToKCiAgYGBgamF2YXNjcmlwdAogIEVtYmVy
        LlRlc3QucmVnaXN0ZXJBc3luY0hlbHBlcignbG9naW5Vc2VyJywgZnVuY3Rp
        b24oYXBwLCB1c2VybmFtZSwgcGFzc3dvcmQpIHsKICAgIHZpc2l0KCdzZWN1
        cmVkL3BhdGgvaGVyZScpCiAgICAuZmlsbEluKCcjdXNlcm5hbWUnLCB1c2Vy
        bmFtZSkKICAgIC5maWxsSW4oJyNwYXNzd29yZCcsIHVzZXJuYW1lKQogICAg
        LmNsaWNrKCcuc3VibWl0JykKCiAgICByZXR1cm4gd2FpdCgpOwogIH0pOwoK
        ICBAbWV0aG9kIHdhaXQKICBAcGFyYW0ge09iamVjdH0gdmFsdWUgVGhlIHZh
        bHVlIHRvIGJlIHJldHVybmVkLgogIEByZXR1cm4ge1JTVlAuUHJvbWlzZX0K
        Ki8KYXN5bmNIZWxwZXIoJ3dhaXQnLCB3YWl0KTsKYXN5bmNIZWxwZXIoJ2Fu
        ZFRoZW4nLCBhbmRUaGVuKTsKCgoKCn0pKCk7CgoKCihmdW5jdGlvbigpIHsK
        LyoqCiAgRW1iZXIgVGVzdGluZwoKICBAbW9kdWxlIGVtYmVyCiAgQHN1Ym1v
        ZHVsZSBlbWJlci10ZXN0aW5nCiAgQHJlcXVpcmVzIGVtYmVyLWFwcGxpY2F0
        aW9uCiovCgp9KSgpOwoKKGZ1bmN0aW9uKCkgewovKioKRW1iZXIKCkBtb2R1
        bGUgZW1iZXIKKi8KCmZ1bmN0aW9uIHRocm93V2l0aE1lc3NhZ2UobXNnKSB7
        CiAgcmV0dXJuIGZ1bmN0aW9uKCkgewogICAgdGhyb3cgbmV3IEVtYmVyLkVy
        cm9yKG1zZyk7CiAgfTsKfQoKZnVuY3Rpb24gZ2VuZXJhdGVSZW1vdmVkQ2xh
        c3MoY2xhc3NOYW1lKSB7CiAgdmFyIG1zZyA9ICIgaGFzIGJlZW4gbW92ZWQg
        aW50byBhIHBsdWdpbjogaHR0cHM6Ly9naXRodWIuY29tL2VtYmVyanMvZW1i
        ZXItc3RhdGVzIjsKCiAgcmV0dXJuIHsKICAgIGV4dGVuZDogdGhyb3dXaXRo
        TWVzc2FnZShjbGFzc05hbWUgKyBtc2cpLAogICAgY3JlYXRlOiB0aHJvd1dp
        dGhNZXNzYWdlKGNsYXNzTmFtZSArIG1zZykKICB9Owp9CgpFbWJlci5TdGF0
        ZU1hbmFnZXIgPSBnZW5lcmF0ZVJlbW92ZWRDbGFzcygiRW1iZXIuU3RhdGVN
        YW5hZ2VyIik7CgovKioKICBUaGlzIHdhcyBleHBvcnRlZCB0byBlbWJlci1z
        dGF0ZXMgcGx1Z2luIGZvciB2IDEuMC4wIHJlbGVhc2UuIFNlZTogaHR0cHM6
        Ly9naXRodWIuY29tL2VtYmVyanMvZW1iZXItc3RhdGVzCiAgCiAgQGNsYXNz
        IFN0YXRlTWFuYWdlcgogIEBuYW1lc3BhY2UgRW1iZXIKKi8KCkVtYmVyLlN0
        YXRlID0gZ2VuZXJhdGVSZW1vdmVkQ2xhc3MoIkVtYmVyLlN0YXRlIik7Cgov
        KioKICBUaGlzIHdhcyBleHBvcnRlZCB0byBlbWJlci1zdGF0ZXMgcGx1Z2lu
        IGZvciB2IDEuMC4wIHJlbGVhc2UuIFNlZTogaHR0cHM6Ly9naXRodWIuY29t
        L2VtYmVyanMvZW1iZXItc3RhdGVzCiAgCiAgQGNsYXNzIFN0YXRlCiAgQG5h
        bWVzcGFjZSBFbWJlcgoqLwoKfSkoKTsKCgp9KSgpOwo=
    http_version: 
  recorded_at: Mon, 17 Feb 2014 11:45:10 GMT
- request:
    method: get
    uri: http://builds.emberjs.com/release/ember.min.js
    body:
      encoding: US-ASCII
      string: ''
    headers:
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - '*/*'
      User-Agent:
      - Ruby
      Host:
      - builds.emberjs.com
  response:
    status:
      code: 200
      message: OK
    headers:
      X-Amz-Id-2:
      - h7/TLqro6QfRlFRYZiQuAhM2tUU3FolgKZ/edlOUifnYTXX7KJhTjyBM8iK9i51O
      X-Amz-Request-Id:
      - C70EAEB8D0E37122
      Date:
      - Mon, 17 Feb 2014 11:45:12 GMT
      Last-Modified:
      - Fri, 14 Feb 2014 14:20:29 GMT
      Etag:
      - '"c31f53a8ee4685767b8f48575d27c8d4"'
      Content-Type:
      - text/javascript
      Content-Length:
      - '263745'
      Server:
      - AmazonS3
    body:
      encoding: ASCII-8BIT
      string: !binary |-
        LyohCiAqIEBvdmVydmlldyAgRW1iZXIgLSBKYXZhU2NyaXB0IEFwcGxpY2F0
        aW9uIEZyYW1ld29yawogKiBAY29weXJpZ2h0IENvcHlyaWdodCAyMDExLTIw
        MTQgVGlsZGUgSW5jLiBhbmQgY29udHJpYnV0b3JzCiAqICAgICAgICAgICAg
        UG9ydGlvbnMgQ29weXJpZ2h0IDIwMDYtMjAxMSBTdHJvYmUgSW5jLgogKiAg
        ICAgICAgICAgIFBvcnRpb25zIENvcHlyaWdodCAyMDA4LTIwMTEgQXBwbGUg
        SW5jLiBBbGwgcmlnaHRzIHJlc2VydmVkLgogKiBAbGljZW5zZSAgIExpY2Vu
        c2VkIHVuZGVyIE1JVCBsaWNlbnNlCiAqICAgICAgICAgICAgU2VlIGh0dHBz
        Oi8vcmF3LmdpdGh1Yi5jb20vZW1iZXJqcy9lbWJlci5qcy9tYXN0ZXIvTElD
        RU5TRQogKiBAdmVyc2lvbiAgIDEuNC4xK3ByZS5hZjg3YmQyMAogKi8KIWZ1
        bmN0aW9uKCl7dmFyIGUsdCxyLG47IWZ1bmN0aW9uKCl7dmFyIGk9e30sbz17
        fTtlPWZ1bmN0aW9uKGUsdCxyKXtpW2VdPXtkZXBzOnQsY2FsbGJhY2s6cn19
        LG49cj10PWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHIodCl7aWYoIi4iIT09dC5j
        aGFyQXQoMCkpcmV0dXJuIHQ7Zm9yKHZhciByPXQuc3BsaXQoIi8iKSxuPWUu
        c3BsaXQoIi8iKS5zbGljZSgwLC0xKSxpPTAsbz1yLmxlbmd0aDtvPmk7aSsr
        KXt2YXIgYT1yW2ldO2lmKCIuLiI9PT1hKW4ucG9wKCk7ZWxzZXtpZigiLiI9
        PT1hKWNvbnRpbnVlO24ucHVzaChhKX19cmV0dXJuIG4uam9pbigiLyIpfWlm
        KG4uX2Vha19zZWVuPWksb1tlXSlyZXR1cm4gb1tlXTtpZihvW2VdPXt9LCFp
        W2VdKXRocm93IG5ldyBFcnJvcigiQ291bGQgbm90IGZpbmQgbW9kdWxlICIr
        ZSk7Zm9yKHZhciBhLHM9aVtlXSx1PXMuZGVwcyxsPXMuY2FsbGJhY2ssYz1b
        XSxoPTAsbT11Lmxlbmd0aDttPmg7aCsrKSJleHBvcnRzIj09PXVbaF0/Yy5w
        dXNoKGE9e30pOmMucHVzaCh0KHIodVtoXSkpKTt2YXIgZj1sLmFwcGx5KHRo
        aXMsYyk7cmV0dXJuIG9bZV09YXx8Zn19KCksZnVuY3Rpb24oKXsidW5kZWZp
        bmVkIj09dHlwZW9mIEVtYmVyJiYoRW1iZXI9e30pO3t2YXIgZT0oRW1iZXIu
        aW1wb3J0cz1FbWJlci5pbXBvcnRzfHx0aGlzLEVtYmVyLmV4cG9ydHM9RW1i
        ZXIuZXhwb3J0c3x8dGhpcyk7RW1iZXIubG9va3VwPUVtYmVyLmxvb2t1cHx8
        dGhpc31lLkVtPWUuRW1iZXI9RW09RW1iZXIsRW1iZXIuaXNOYW1lc3BhY2U9
        ITAsRW1iZXIudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4iRW1iZXIifSxF
        bWJlci5WRVJTSU9OPSIxLjQuMStwcmUuYWY4N2JkMjAiLEVtYmVyLkVOVnx8
        KEVtYmVyLkVOVj0idW5kZWZpbmVkIiE9dHlwZW9mIEVtYmVyRU5WP0VtYmVy
        RU5WOiJ1bmRlZmluZWQiIT10eXBlb2YgRU5WP0VOVjp7fSksRW1iZXIuY29u
        ZmlnPUVtYmVyLmNvbmZpZ3x8e30sInVuZGVmaW5lZCI9PXR5cGVvZiBFbWJl
        ci5FTlYuRElTQUJMRV9SQU5HRV9BUEkmJihFbWJlci5FTlYuRElTQUJMRV9S
        QU5HRV9BUEk9ITApLCJ1bmRlZmluZWQiPT10eXBlb2YgTWV0YW1vcnBoRU5W
        JiYoZS5NZXRhbW9ycGhFTlY9e30pLE1ldGFtb3JwaEVOVi5ESVNBQkxFX1JB
        TkdFX0FQST1FbWJlci5FTlYuRElTQUJMRV9SQU5HRV9BUEksRW1iZXIuRkVB
        VFVSRVM9RW1iZXIuRU5WLkZFQVRVUkVTfHx7fSxFbWJlci5GRUFUVVJFUy5p
        c0VuYWJsZWQ9ZnVuY3Rpb24oZSl7dmFyIHQ9RW1iZXIuRkVBVFVSRVNbZV07
        cmV0dXJuIEVtYmVyLkVOVi5FTkFCTEVfQUxMX0ZFQVRVUkVTPyEwOnQ9PT0h
        MHx8dD09PSExfHx2b2lkIDA9PT10P3Q6RW1iZXIuRU5WLkVOQUJMRV9PUFRJ
        T05BTF9GRUFUVVJFUz8hMDohMX0sRW1iZXIuRVhURU5EX1BST1RPVFlQRVM9
        RW1iZXIuRU5WLkVYVEVORF9QUk9UT1RZUEVTLCJ1bmRlZmluZWQiPT10eXBl
        b2YgRW1iZXIuRVhURU5EX1BST1RPVFlQRVMmJihFbWJlci5FWFRFTkRfUFJP
        VE9UWVBFUz0hMCksRW1iZXIuTE9HX1NUQUNLVFJBQ0VfT05fREVQUkVDQVRJ
        T049RW1iZXIuRU5WLkxPR19TVEFDS1RSQUNFX09OX0RFUFJFQ0FUSU9OIT09
        ITEsRW1iZXIuU0hJTV9FUzU9RW1iZXIuRU5WLlNISU1fRVM1PT09ITE/ITE6
        RW1iZXIuRVhURU5EX1BST1RPVFlQRVMsRW1iZXIuTE9HX1ZFUlNJT049RW1i
        ZXIuRU5WLkxPR19WRVJTSU9OPT09ITE/ITE6ITAsRW1iZXIuSz1mdW5jdGlv
        bigpe3JldHVybiB0aGlzfSwidW5kZWZpbmVkIj09dHlwZW9mIEVtYmVyLmFz
        c2VydCYmKEVtYmVyLmFzc2VydD1FbWJlci5LKSwidW5kZWZpbmVkIj09dHlw
        ZW9mIEVtYmVyLndhcm4mJihFbWJlci53YXJuPUVtYmVyLkspLCJ1bmRlZmlu
        ZWQiPT10eXBlb2YgRW1iZXIuZGVidWcmJihFbWJlci5kZWJ1Zz1FbWJlci5L
        KSwidW5kZWZpbmVkIj09dHlwZW9mIEVtYmVyLmRlcHJlY2F0ZSYmKEVtYmVy
        LmRlcHJlY2F0ZT1FbWJlci5LKSwidW5kZWZpbmVkIj09dHlwZW9mIEVtYmVy
        LmRlcHJlY2F0ZUZ1bmMmJihFbWJlci5kZXByZWNhdGVGdW5jPWZ1bmN0aW9u
        KGUsdCl7cmV0dXJuIHR9KSxFbWJlci51dWlkPTAsRW1iZXIubWVyZ2U9ZnVu
        Y3Rpb24oZSx0KXtmb3IodmFyIHIgaW4gdCl0Lmhhc093blByb3BlcnR5KHIp
        JiYoZVtyXT10W3JdKTtyZXR1cm4gZX0sRW1iZXIuaXNOb25lPWZ1bmN0aW9u
        KGUpe3JldHVybiBudWxsPT09ZXx8dm9pZCAwPT09ZX0sRW1iZXIubm9uZT1F
        bWJlci5kZXByZWNhdGVGdW5jKCJFbWJlci5ub25lIGlzIGRlcHJlY2F0ZWQu
        IFBsZWFzZSB1c2UgRW1iZXIuaXNOb25lIGluc3RlYWQuIixFbWJlci5pc05v
        bmUpLEVtYmVyLmlzRW1wdHk9ZnVuY3Rpb24oZSl7cmV0dXJuIEVtYmVyLmlz
        Tm9uZShlKXx8MD09PWUubGVuZ3RoJiYiZnVuY3Rpb24iIT10eXBlb2YgZXx8
        Im9iamVjdCI9PXR5cGVvZiBlJiYwPT09RW1iZXIuZ2V0KGUsImxlbmd0aCIp
        fSxFbWJlci5lbXB0eT1FbWJlci5kZXByZWNhdGVGdW5jKCJFbWJlci5lbXB0
        eSBpcyBkZXByZWNhdGVkLiBQbGVhc2UgdXNlIEVtYmVyLmlzRW1wdHkgaW5z
        dGVhZC4iLEVtYmVyLmlzRW1wdHkpfSgpLGZ1bmN0aW9uKCl7dmFyIGU9RW1i
        ZXIucGxhdGZvcm09e307aWYoRW1iZXIuY3JlYXRlPU9iamVjdC5jcmVhdGUs
        RW1iZXIuY3JlYXRlJiYyIT09RW1iZXIuY3JlYXRlKHthOjF9LHthOnt2YWx1
        ZToyfX0pLmEmJihFbWJlci5jcmVhdGU9bnVsbCksIUVtYmVyLmNyZWF0ZXx8
        RW1iZXIuRU5WLlNUVUJfT0JKRUNUX0NSRUFURSl7dmFyIHQ9ZnVuY3Rpb24o
        KXt9O0VtYmVyLmNyZWF0ZT1mdW5jdGlvbihlLHIpe2lmKHQucHJvdG90eXBl
        PWUsZT1uZXcgdCxyKXt0LnByb3RvdHlwZT1lO2Zvcih2YXIgbiBpbiByKXQu
        cHJvdG90eXBlW25dPXJbbl0udmFsdWU7ZT1uZXcgdH1yZXR1cm4gdC5wcm90
        b3R5cGU9bnVsbCxlfSxFbWJlci5jcmVhdGUuaXNTaW11bGF0ZWQ9ITB9dmFy
        IHIsbixpPU9iamVjdC5kZWZpbmVQcm9wZXJ0eTtpZihpKXRyeXtpKHt9LCJh
        Iix7Z2V0OmZ1bmN0aW9uKCl7fX0pfWNhdGNoKG8pe2k9bnVsbH1pJiYocj1m
        dW5jdGlvbigpe3ZhciBlPXt9O3JldHVybiBpKGUsImEiLHtjb25maWd1cmFi
        bGU6ITAsZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXt9LHNldDpmdW5j
        dGlvbigpe319KSxpKGUsImEiLHtjb25maWd1cmFibGU6ITAsZW51bWVyYWJs
        ZTohMCx3cml0YWJsZTohMCx2YWx1ZTohMH0pLGUuYT09PSEwfSgpLG49ZnVu
        Y3Rpb24oKXt0cnl7cmV0dXJuIGkoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgi
        ZGl2IiksImRlZmluZVByb3BlcnR5T25ET00iLHt9KSwhMH1jYXRjaChlKXt9
        cmV0dXJuITF9KCkscj9ufHwoaT1mdW5jdGlvbihlLHQscil7dmFyIG47cmV0
        dXJuIG49Im9iamVjdCI9PXR5cGVvZiBOb2RlP2UgaW5zdGFuY2VvZiBOb2Rl
        OiJvYmplY3QiPT10eXBlb2YgZSYmIm51bWJlciI9PXR5cGVvZiBlLm5vZGVU
        eXBlJiYic3RyaW5nIj09dHlwZW9mIGUubm9kZU5hbWUsbj9lW3RdPXIudmFs
        dWU6T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsdCxyKX0pOmk9bnVsbCksZS5k
        ZWZpbmVQcm9wZXJ0eT1pLGUuaGFzUHJvcGVydHlBY2Nlc3NvcnM9ITAsZS5k
        ZWZpbmVQcm9wZXJ0eXx8KGUuaGFzUHJvcGVydHlBY2Nlc3NvcnM9ITEsZS5k
        ZWZpbmVQcm9wZXJ0eT1mdW5jdGlvbihlLHQscil7ci5nZXR8fChlW3RdPXIu
        dmFsdWUpfSxlLmRlZmluZVByb3BlcnR5LmlzU2ltdWxhdGVkPSEwKSxFbWJl
        ci5FTlYuTUFOREFUT1JZX1NFVFRFUiYmIWUuaGFzUHJvcGVydHlBY2Nlc3Nv
        cnMmJihFbWJlci5FTlYuTUFOREFUT1JZX1NFVFRFUj0hMSl9KCksZnVuY3Rp
        b24oKXt2YXIgZT1mdW5jdGlvbihlKXtyZXR1cm4gZSYmRnVuY3Rpb24ucHJv
        dG90eXBlLnRvU3RyaW5nLmNhbGwoZSkuaW5kZXhPZigiW25hdGl2ZSBjb2Rl
        XSIpPi0xfSx0PWUoQXJyYXkucHJvdG90eXBlLm1hcCk/QXJyYXkucHJvdG90
        eXBlLm1hcDpmdW5jdGlvbihlKXtpZih2b2lkIDA9PT10aGlzfHxudWxsPT09
        dGhpcyl0aHJvdyBuZXcgVHlwZUVycm9yO3ZhciB0PU9iamVjdCh0aGlzKSxy
        PXQubGVuZ3RoPj4+MDtpZigiZnVuY3Rpb24iIT10eXBlb2YgZSl0aHJvdyBu
        ZXcgVHlwZUVycm9yO2Zvcih2YXIgbj1uZXcgQXJyYXkociksaT1hcmd1bWVu
        dHNbMV0sbz0wO3I+bztvKyspbyBpbiB0JiYobltvXT1lLmNhbGwoaSx0W29d
        LG8sdCkpO3JldHVybiBufSxyPWUoQXJyYXkucHJvdG90eXBlLmZvckVhY2gp
        P0FycmF5LnByb3RvdHlwZS5mb3JFYWNoOmZ1bmN0aW9uKGUpe2lmKHZvaWQg
        MD09PXRoaXN8fG51bGw9PT10aGlzKXRocm93IG5ldyBUeXBlRXJyb3I7dmFy
        IHQ9T2JqZWN0KHRoaXMpLHI9dC5sZW5ndGg+Pj4wO2lmKCJmdW5jdGlvbiIh
        PXR5cGVvZiBlKXRocm93IG5ldyBUeXBlRXJyb3I7Zm9yKHZhciBuPWFyZ3Vt
        ZW50c1sxXSxpPTA7cj5pO2krKylpIGluIHQmJmUuY2FsbChuLHRbaV0saSx0
        KX0sbj1lKEFycmF5LnByb3RvdHlwZS5pbmRleE9mKT9BcnJheS5wcm90b3R5
        cGUuaW5kZXhPZjpmdW5jdGlvbihlLHQpe251bGw9PT10fHx2b2lkIDA9PT10
        P3Q9MDowPnQmJih0PU1hdGgubWF4KDAsdGhpcy5sZW5ndGgrdCkpO2Zvcih2
        YXIgcj10LG49dGhpcy5sZW5ndGg7bj5yO3IrKylpZih0aGlzW3JdPT09ZSly
        ZXR1cm4gcjtyZXR1cm4tMX07RW1iZXIuQXJyYXlQb2x5ZmlsbHM9e21hcDp0
        LGZvckVhY2g6cixpbmRleE9mOm59LEVtYmVyLlNISU1fRVM1JiYoQXJyYXku
        cHJvdG90eXBlLm1hcHx8KEFycmF5LnByb3RvdHlwZS5tYXA9dCksQXJyYXku
        cHJvdG90eXBlLmZvckVhY2h8fChBcnJheS5wcm90b3R5cGUuZm9yRWFjaD1y
        KSxBcnJheS5wcm90b3R5cGUuaW5kZXhPZnx8KEFycmF5LnByb3RvdHlwZS5p
        bmRleE9mPW4pKX0oKSxmdW5jdGlvbigpe3ZhciBlPVsiZGVzY3JpcHRpb24i
        LCJmaWxlTmFtZSIsImxpbmVOdW1iZXIiLCJtZXNzYWdlIiwibmFtZSIsIm51
        bWJlciIsInN0YWNrIl07RW1iZXIuRXJyb3I9ZnVuY3Rpb24oKXt2YXIgdD1F
        cnJvci5hcHBseSh0aGlzLGFyZ3VtZW50cyk7RXJyb3IuY2FwdHVyZVN0YWNr
        VHJhY2UmJkVycm9yLmNhcHR1cmVTdGFja1RyYWNlKHRoaXMsRW1iZXIuRXJy
        b3IpO2Zvcih2YXIgcj0wO3I8ZS5sZW5ndGg7cisrKXRoaXNbZVtyXV09dFtl
        W3JdXX0sRW1iZXIuRXJyb3IucHJvdG90eXBlPUVtYmVyLmNyZWF0ZShFcnJv
        ci5wcm90b3R5cGUpLEVtYmVyLm9uZXJyb3I9bnVsbCxFbWJlci5oYW5kbGVF
        cnJvcnM9ZnVuY3Rpb24oZSx0KXtpZigiZnVuY3Rpb24iIT10eXBlb2YgRW1i
        ZXIub25lcnJvcilyZXR1cm4gZS5jYWxsKHR8fHRoaXMpO3RyeXtyZXR1cm4g
        ZS5jYWxsKHR8fHRoaXMpfWNhdGNoKHIpe0VtYmVyLm9uZXJyb3Iocil9fX0o
        KSxmdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSl7dGhpcy5kZXNjcz17fSx0aGlz
        LndhdGNoaW5nPXt9LHRoaXMuY2FjaGU9e30sdGhpcy5zb3VyY2U9ZX1mdW5j
        dGlvbiB0KGUsdCl7cmV0dXJuISghZXx8ImZ1bmN0aW9uIiE9dHlwZW9mIGVb
        dF0pfUVtYmVyLkdVSURfUFJFRklYPSJlbWJlciI7dmFyIHI9RW1iZXIucGxh
        dGZvcm0uZGVmaW5lUHJvcGVydHksbj1FbWJlci5jcmVhdGUsaT0iX19lbWJl
        ciIrICtuZXcgRGF0ZSxvPTAsYT1bXSxzPXt9LHU9RW1iZXIuRU5WLk1BTkRB
        VE9SWV9TRVRURVI7RW1iZXIuR1VJRF9LRVk9aTt2YXIgbD17d3JpdGFibGU6
        ITEsY29uZmlndXJhYmxlOiExLGVudW1lcmFibGU6ITEsdmFsdWU6bnVsbH07
        RW1iZXIuZ2VuZXJhdGVHdWlkPWZ1bmN0aW9uKGUsdCl7dHx8KHQ9RW1iZXIu
        R1VJRF9QUkVGSVgpO3ZhciBuPXQrbysrO3JldHVybiBlJiYobC52YWx1ZT1u
        LHIoZSxpLGwpKSxufSxFbWJlci5ndWlkRm9yPWZ1bmN0aW9uKGUpe2lmKHZv
        aWQgMD09PWUpcmV0dXJuIih1bmRlZmluZWQpIjtpZihudWxsPT09ZSlyZXR1
        cm4iKG51bGwpIjt2YXIgdCxuPXR5cGVvZiBlO3N3aXRjaChuKXtjYXNlIm51
        bWJlciI6cmV0dXJuIHQ9YVtlXSx0fHwodD1hW2VdPSJudSIrZSksdDtjYXNl
        InN0cmluZyI6cmV0dXJuIHQ9c1tlXSx0fHwodD1zW2VdPSJzdCIrbysrKSx0
        O2Nhc2UiYm9vbGVhbiI6cmV0dXJuIGU/Iih0cnVlKSI6IihmYWxzZSkiO2Rl
        ZmF1bHQ6cmV0dXJuIGVbaV0/ZVtpXTplPT09T2JqZWN0PyIoT2JqZWN0KSI6
        ZT09PUFycmF5PyIoQXJyYXkpIjoodD0iZW1iZXIiK28rKyxsLnZhbHVlPXQs
        cihlLGksbCksdCl9fTt2YXIgYz1FbWJlci5NRVRBX0RFU0M9e3dyaXRhYmxl
        OiEwLGNvbmZpZ3VyYWJsZTohMSxlbnVtZXJhYmxlOiExLHZhbHVlOm51bGx9
        LGg9RW1iZXIuR1VJRF9LRVkrIl9tZXRhIjtFbWJlci5NRVRBX0tFWT1oO3Zh
        ciBtPUVtYmVyLnBsYXRmb3JtLmRlZmluZVByb3BlcnR5LmlzU2ltdWxhdGVk
        O2UucHJvdG90eXBlPXtkZXNjczpudWxsLGRlcHM6bnVsbCx3YXRjaGluZzpu
        dWxsLGxpc3RlbmVyczpudWxsLGNhY2hlOm51bGwsc291cmNlOm51bGwsbWl4
        aW5zOm51bGwsYmluZGluZ3M6bnVsbCxjaGFpbnM6bnVsbCxjaGFpbldhdGNo
        ZXJzOm51bGwsdmFsdWVzOm51bGwscHJvdG86bnVsbH0sbSYmKGUucHJvdG90
        eXBlLl9fcHJldmVudFBsYWluT2JqZWN0X189ITAsZS5wcm90b3R5cGUudG9K
        U09OPWZ1bmN0aW9uKCl7fSk7dmFyIGY9bmV3IGUobnVsbCk7dSYmKGYudmFs
        dWVzPXt9KSxFbWJlci5FTVBUWV9NRVRBPWYsRW1iZXIubWV0YT1mdW5jdGlv
        bih0LGkpe3ZhciBvPXRbaF07cmV0dXJuIGk9PT0hMT9vfHxmOihvP28uc291
        cmNlIT09dCYmKG18fHIodCxoLGMpLG89bihvKSxvLmRlc2NzPW4oby5kZXNj
        cyksby53YXRjaGluZz1uKG8ud2F0Y2hpbmcpLG8uY2FjaGU9e30sby5zb3Vy
        Y2U9dCx1JiYoby52YWx1ZXM9bihvLnZhbHVlcykpLHRbaF09byk6KG18fHIo
        dCxoLGMpLG89bmV3IGUodCksdSYmKG8udmFsdWVzPXt9KSx0W2hdPW8sby5k
        ZXNjcy5jb25zdHJ1Y3Rvcj1udWxsKSxvKX0sRW1iZXIuZ2V0TWV0YT1mdW5j
        dGlvbihlLHQpe3ZhciByPUVtYmVyLm1ldGEoZSwhMSk7cmV0dXJuIHJbdF19
        LEVtYmVyLnNldE1ldGE9ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPUVtYmVyLm1l
        dGEoZSwhMCk7cmV0dXJuIG5bdF09cixyfSxFbWJlci5tZXRhUGF0aD1mdW5j
        dGlvbihlLHQscil7Zm9yKHZhciBpLG8sYT1FbWJlci5tZXRhKGUscikscz0w
        LHU9dC5sZW5ndGg7dT5zO3MrKyl7aWYoaT10W3NdLG89YVtpXSl7aWYoby5f
        X2VtYmVyX3NvdXJjZV9fIT09ZSl7aWYoIXIpcmV0dXJuIHZvaWQgMDtvPWFb
        aV09bihvKSxvLl9fZW1iZXJfc291cmNlX189ZX19ZWxzZXtpZighcilyZXR1
        cm4gdm9pZCAwO289YVtpXT17X19lbWJlcl9zb3VyY2VfXzplfX1hPW99cmV0
        dXJuIG99LEVtYmVyLndyYXA9ZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiByKCl7
        fWZ1bmN0aW9uIG4oKXt2YXIgbixpPXRoaXMuX3N1cGVyO3JldHVybiB0aGlz
        Ll9zdXBlcj10fHxyLG49ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyksdGhpcy5f
        c3VwZXI9aSxufXJldHVybiBuLndyYXBwZWRGdW5jdGlvbj1lLG4uX19lbWJl
        cl9vYnNlcnZlc19fPWUuX19lbWJlcl9vYnNlcnZlc19fLG4uX19lbWJlcl9v
        YnNlcnZlc0JlZm9yZV9fPWUuX19lbWJlcl9vYnNlcnZlc0JlZm9yZV9fLG4u
        X19lbWJlcl9saXN0ZW5zX189ZS5fX2VtYmVyX2xpc3RlbnNfXyxufSxFbWJl
        ci5pc0FycmF5PWZ1bmN0aW9uKGUpe3JldHVybiFlfHxlLnNldEludGVydmFs
        PyExOkFycmF5LmlzQXJyYXkmJkFycmF5LmlzQXJyYXkoZSk/ITA6RW1iZXIu
        QXJyYXkmJkVtYmVyLkFycmF5LmRldGVjdChlKT8hMDp2b2lkIDAhPT1lLmxl
        bmd0aCYmIm9iamVjdCI9PXR5cGVvZiBlPyEwOiExfSxFbWJlci5tYWtlQXJy
        YXk9ZnVuY3Rpb24oZSl7cmV0dXJuIG51bGw9PT1lfHx2b2lkIDA9PT1lP1td
        OkVtYmVyLmlzQXJyYXkoZSk/ZTpbZV19LEVtYmVyLmNhbkludm9rZT10LEVt
        YmVyLnRyeUludm9rZT1mdW5jdGlvbihlLHIsbil7cmV0dXJuIHQoZSxyKT9l
        W3JdLmFwcGx5KGUsbnx8W10pOnZvaWQgMH07dmFyIHA9ZnVuY3Rpb24oKXt2
        YXIgZT0wO3RyeXt0cnl7fWZpbmFsbHl7dGhyb3cgZSsrLG5ldyBFcnJvcigi
        bmVlZHNGaW5hbGx5Rml4VGVzdCIpfX1jYXRjaCh0KXt9cmV0dXJuIDEhPT1l
        fSgpO0VtYmVyLnRyeUZpbmFsbHk9cD9mdW5jdGlvbihlLHQscil7dmFyIG4s
        aSxvO3I9cnx8dGhpczt0cnl7bj1lLmNhbGwocil9ZmluYWxseXt0cnl7aT10
        LmNhbGwocil9Y2F0Y2goYSl7bz1hfX1pZihvKXRocm93IG87cmV0dXJuIHZv
        aWQgMD09PWk/bjppfTpmdW5jdGlvbihlLHQscil7dmFyIG4saTtyPXJ8fHRo
        aXM7dHJ5e249ZS5jYWxsKHIpfWZpbmFsbHl7aT10LmNhbGwocil9cmV0dXJu
        IHZvaWQgMD09PWk/bjppfSxFbWJlci50cnlDYXRjaEZpbmFsbHk9cD9mdW5j
        dGlvbihlLHQscixuKXt2YXIgaSxvLGE7bj1ufHx0aGlzO3RyeXtpPWUuY2Fs
        bChuKX1jYXRjaChzKXtpPXQuY2FsbChuLHMpfWZpbmFsbHl7dHJ5e289ci5j
        YWxsKG4pfWNhdGNoKHUpe2E9dX19aWYoYSl0aHJvdyBhO3JldHVybiB2b2lk
        IDA9PT1vP2k6b306ZnVuY3Rpb24oZSx0LHIsbil7dmFyIGksbztuPW58fHRo
        aXM7dHJ5e2k9ZS5jYWxsKG4pfWNhdGNoKGEpe2k9dC5jYWxsKG4sYSl9Zmlu
        YWxseXtvPXIuY2FsbChuKX1yZXR1cm4gdm9pZCAwPT09bz9pOm99O3ZhciBk
        PXt9LGI9IkJvb2xlYW4gTnVtYmVyIFN0cmluZyBGdW5jdGlvbiBBcnJheSBE
        YXRlIFJlZ0V4cCBPYmplY3QiLnNwbGl0KCIgIik7RW1iZXIuQXJyYXlQb2x5
        ZmlsbHMuZm9yRWFjaC5jYWxsKGIsZnVuY3Rpb24oZSl7ZFsiW29iamVjdCAi
        K2UrIl0iXT1lLnRvTG93ZXJDYXNlKCl9KTt2YXIgdj1PYmplY3QucHJvdG90
        eXBlLnRvU3RyaW5nO0VtYmVyLnR5cGVPZj1mdW5jdGlvbihlKXt2YXIgdDty
        ZXR1cm4gdD1udWxsPT09ZXx8dm9pZCAwPT09ZT9TdHJpbmcoZSk6ZFt2LmNh
        bGwoZSldfHwib2JqZWN0IiwiZnVuY3Rpb24iPT09dD9FbWJlci5PYmplY3Qm
        JkVtYmVyLk9iamVjdC5kZXRlY3QoZSkmJih0PSJjbGFzcyIpOiJvYmplY3Qi
        PT09dCYmKGUgaW5zdGFuY2VvZiBFcnJvcj90PSJlcnJvciI6RW1iZXIuT2Jq
        ZWN0JiZlIGluc3RhbmNlb2YgRW1iZXIuT2JqZWN0P3Q9Imluc3RhbmNlIjpl
        IGluc3RhbmNlb2YgRGF0ZSYmKHQ9ImRhdGUiKSksdH0sRW1iZXIuaW5zcGVj
        dD1mdW5jdGlvbihlKXt2YXIgdD1FbWJlci50eXBlT2YoZSk7aWYoImFycmF5
        Ij09PXQpcmV0dXJuIlsiK2UrIl0iO2lmKCJvYmplY3QiIT09dClyZXR1cm4g
        ZSsiIjt2YXIgcixuPVtdO2Zvcih2YXIgaSBpbiBlKWlmKGUuaGFzT3duUHJv
        cGVydHkoaSkpe2lmKHI9ZVtpXSwidG9TdHJpbmciPT09ciljb250aW51ZTsi
        ZnVuY3Rpb24iPT09RW1iZXIudHlwZU9mKHIpJiYocj0iZnVuY3Rpb24oKSB7
        IC4uLiB9Iiksbi5wdXNoKGkrIjogIityKX1yZXR1cm4ieyIrbi5qb2luKCIs
        ICIpKyJ9In19KCksZnVuY3Rpb24oKXtFbWJlci5JbnN0cnVtZW50YXRpb249
        e307dmFyIGU9W10sdD17fSxyPWZ1bmN0aW9uKHIpe2Zvcih2YXIgbixpPVtd
        LG89MCxhPWUubGVuZ3RoO2E+bztvKyspbj1lW29dLG4ucmVnZXgudGVzdChy
        KSYmaS5wdXNoKG4ub2JqZWN0KTtyZXR1cm4gdFtyXT1pLGl9LG49ZnVuY3Rp
        b24oKXt2YXIgZT0idW5kZWZpbmVkIiE9dHlwZW9mIHdpbmRvdz93aW5kb3cu
        cGVyZm9ybWFuY2V8fHt9Ont9LHQ9ZS5ub3d8fGUubW96Tm93fHxlLndlYmtp
        dE5vd3x8ZS5tc05vd3x8ZS5vTm93O3JldHVybiB0P3QuYmluZChlKTpmdW5j
        dGlvbigpe3JldHVybituZXcgRGF0ZX19KCk7RW1iZXIuSW5zdHJ1bWVudGF0
        aW9uLmluc3RydW1lbnQ9ZnVuY3Rpb24oZSxpLG8sYSl7ZnVuY3Rpb24gcygp
        e2ZvcihwPTAsZD1tLmxlbmd0aDtkPnA7cCsrKWY9bVtwXSxiW3BdPWYuYmVm
        b3JlKGUsbigpLGkpO3JldHVybiBvLmNhbGwoYSl9ZnVuY3Rpb24gdShlKXtp
        PWl8fHt9LGkuZXhjZXB0aW9uPWV9ZnVuY3Rpb24gbCgpe2ZvcihwPTAsZD1t
        Lmxlbmd0aDtkPnA7cCsrKWY9bVtwXSxmLmFmdGVyKGUsbigpLGksYltwXSk7
        RW1iZXIuU1RSVUNUVVJFRF9QUk9GSUxFJiZjb25zb2xlLnRpbWVFbmQoYyl9
        dmFyIGMsaCxtPXRbZV07aWYoRW1iZXIuU1RSVUNUVVJFRF9QUk9GSUxFJiYo
        Yz1lKyI6ICIraS5vYmplY3QsY29uc29sZS50aW1lKGMpKSxtfHwobT1yKGUp
        KSwwPT09bS5sZW5ndGgpcmV0dXJuIGg9by5jYWxsKGEpLEVtYmVyLlNUUlVD
        VFVSRURfUFJPRklMRSYmY29uc29sZS50aW1lRW5kKGMpLGg7dmFyIGYscCxk
        LGI9W107cmV0dXJuIEVtYmVyLnRyeUNhdGNoRmluYWxseShzLHUsbCl9LEVt
        YmVyLkluc3RydW1lbnRhdGlvbi5zdWJzY3JpYmU9ZnVuY3Rpb24ocixuKXtm
        b3IodmFyIGksbz1yLnNwbGl0KCIuIiksYT1bXSxzPTAsdT1vLmxlbmd0aDt1
        PnM7cysrKWk9b1tzXSwiKiI9PT1pP2EucHVzaCgiW15cXC5dKiIpOmEucHVz
        aChpKTthPWEuam9pbigiXFwuIiksYSs9IihcXC4uKik/Ijt2YXIgbD17cGF0
        dGVybjpyLHJlZ2V4Om5ldyBSZWdFeHAoIl4iK2ErIiQiKSxvYmplY3Q6bn07
        cmV0dXJuIGUucHVzaChsKSx0PXt9LGx9LEVtYmVyLkluc3RydW1lbnRhdGlv
        bi51bnN1YnNjcmliZT1mdW5jdGlvbihyKXtmb3IodmFyIG4saT0wLG89ZS5s
        ZW5ndGg7bz5pO2krKyllW2ldPT09ciYmKG49aSk7ZS5zcGxpY2UobiwxKSx0
        PXt9fSxFbWJlci5JbnN0cnVtZW50YXRpb24ucmVzZXQ9ZnVuY3Rpb24oKXtl
        PVtdLHQ9e319LEVtYmVyLmluc3RydW1lbnQ9RW1iZXIuSW5zdHJ1bWVudGF0
        aW9uLmluc3RydW1lbnQsRW1iZXIuc3Vic2NyaWJlPUVtYmVyLkluc3RydW1l
        bnRhdGlvbi5zdWJzY3JpYmV9KCksZnVuY3Rpb24oKXt2YXIgZSx0LHIsbixp
        O2U9QXJyYXkucHJvdG90eXBlLm1hcHx8RW1iZXIuQXJyYXlQb2x5ZmlsbHMu
        bWFwLHQ9QXJyYXkucHJvdG90eXBlLmZvckVhY2h8fEVtYmVyLkFycmF5UG9s
        eWZpbGxzLmZvckVhY2gscj1BcnJheS5wcm90b3R5cGUuaW5kZXhPZnx8RW1i
        ZXIuQXJyYXlQb2x5ZmlsbHMuaW5kZXhPZixpPUFycmF5LnByb3RvdHlwZS5m
        aWx0ZXJ8fEVtYmVyLkFycmF5UG9seWZpbGxzLmZpbHRlcixuPUFycmF5LnBy
        b3RvdHlwZS5zcGxpY2U7dmFyIG89RW1iZXIuRW51bWVyYWJsZVV0aWxzPXtt
        YXA6ZnVuY3Rpb24odCxyLG4pe3JldHVybiB0Lm1hcD90Lm1hcC5jYWxsKHQs
        cixuKTplLmNhbGwodCxyLG4pfSxmb3JFYWNoOmZ1bmN0aW9uKGUscixuKXty
        ZXR1cm4gZS5mb3JFYWNoP2UuZm9yRWFjaC5jYWxsKGUscixuKTp0LmNhbGwo
        ZSxyLG4pfSxmaWx0ZXI6ZnVuY3Rpb24oZSx0LHIpe3JldHVybiBlLmZpbHRl
        cj9lLmZpbHRlci5jYWxsKGUsdCxyKTppLmNhbGwoZSx0LHIpfSxpbmRleE9m
        OmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gZS5pbmRleE9mP2UuaW5kZXhPZi5j
        YWxsKGUsdCxuKTpyLmNhbGwoZSx0LG4pfSxpbmRleGVzT2Y6ZnVuY3Rpb24o
        ZSx0KXtyZXR1cm4gdm9pZCAwPT09dD9bXTpvLm1hcCh0LGZ1bmN0aW9uKHQp
        e3JldHVybiBvLmluZGV4T2YoZSx0KX0pfSxhZGRPYmplY3Q6ZnVuY3Rpb24o
        ZSx0KXt2YXIgcj1vLmluZGV4T2YoZSx0KTstMT09PXImJmUucHVzaCh0KX0s
        cmVtb3ZlT2JqZWN0OmZ1bmN0aW9uKGUsdCl7dmFyIHI9by5pbmRleE9mKGUs
        dCk7LTEhPT1yJiZlLnNwbGljZShyLDEpfSxfcmVwbGFjZTpmdW5jdGlvbihl
        LHQscixpKXtmb3IodmFyIG8sYSxzPVtdLmNvbmNhdChpKSx1PVtdLGw9NmU0
        LGM9dCxoPXI7cy5sZW5ndGg7KWE9aD5sP2w6aCwwPj1hJiYoYT0wKSxvPXMu
        c3BsaWNlKDAsbCksbz1bYyxhXS5jb25jYXQobyksYys9bCxoLT1hLHU9dS5j
        b25jYXQobi5hcHBseShlLG8pKTtyZXR1cm4gdX0scmVwbGFjZTpmdW5jdGlv
        bihlLHQscixuKXtyZXR1cm4gZS5yZXBsYWNlP2UucmVwbGFjZSh0LHIsbik6
        by5fcmVwbGFjZShlLHQscixuKX0saW50ZXJzZWN0aW9uOmZ1bmN0aW9uKGUs
        dCl7dmFyIHI9W107cmV0dXJuIG8uZm9yRWFjaChlLGZ1bmN0aW9uKGUpe28u
        aW5kZXhPZih0LGUpPj0wJiZyLnB1c2goZSl9KSxyfX19KCksZnVuY3Rpb24o
        KXt2YXIgZSx0PUVtYmVyLk1FVEFfS0VZLHI9RW1iZXIuRU5WLk1BTkRBVE9S
        WV9TRVRURVIsbj0vXihbQS1aJF18KFswLTldW0EtWiRdKSkuKltcLlwqXS8s
        aT0vXnRoaXNbXC5cKl0vLG89L14oW15cLlwqXSspLztlPWZ1bmN0aW9uKGUs
        bil7aWYoIiI9PT1uKXJldHVybiBlO2lmKG58fCJzdHJpbmciIT10eXBlb2Yg
        ZXx8KG49ZSxlPW51bGwpLG51bGw9PT1lfHwtMSE9PW4uaW5kZXhPZigiLiIp
        KXJldHVybiBzKGUsbik7dmFyIGksbz1lW3RdLGE9byYmby5kZXNjc1tuXTty
        ZXR1cm4gYT9hLmdldChlLG4pOihpPXImJm8mJm8ud2F0Y2hpbmdbbl0+MD9v
        LnZhbHVlc1tuXTplW25dLHZvaWQgMCE9PWl8fCJvYmplY3QiIT10eXBlb2Yg
        ZXx8biBpbiBlfHwiZnVuY3Rpb24iIT10eXBlb2YgZS51bmtub3duUHJvcGVy
        dHk/aTplLnVua25vd25Qcm9wZXJ0eShuKSl9LEVtYmVyLmNvbmZpZy5vdmVy
        cmlkZUFjY2Vzc29ycyYmKEVtYmVyLmdldD1lLEVtYmVyLmNvbmZpZy5vdmVy
        cmlkZUFjY2Vzc29ycygpLGU9RW1iZXIuZ2V0KTt2YXIgYT1FbWJlci5ub3Jt
        YWxpemVUdXBsZT1mdW5jdGlvbih0LHIpe3ZhciBhLHM9aS50ZXN0KHIpLHU9
        IXMmJm4udGVzdChyKTtpZigoIXR8fHUpJiYodD1FbWJlci5sb29rdXApLHMm
        JihyPXIuc2xpY2UoNSkpLHQ9PT1FbWJlci5sb29rdXAmJihhPXIubWF0Y2go
        bylbMF0sdD1lKHQsYSkscj1yLnNsaWNlKGEubGVuZ3RoKzEpKSwhcnx8MD09
        PXIubGVuZ3RoKXRocm93IG5ldyBFbWJlci5FcnJvcigiUGF0aCBjYW5ub3Qg
        YmUgZW1wdHkiKTtyZXR1cm5bdCxyXX0scz1FbWJlci5fZ2V0UGF0aD1mdW5j
        dGlvbih0LHIpe3ZhciBuLG8scyx1LGw7aWYobnVsbD09PXQmJi0xPT09ci5p
        bmRleE9mKCIuIikpcmV0dXJuIGUoRW1iZXIubG9va3VwLHIpO2ZvcihuPWku
        dGVzdChyKSwoIXR8fG4pJiYocz1hKHQsciksdD1zWzBdLHI9c1sxXSxzLmxl
        bmd0aD0wKSxvPXIuc3BsaXQoIi4iKSxsPW8ubGVuZ3RoLHU9MDtudWxsIT10
        JiZsPnU7dSsrKWlmKHQ9ZSh0LG9bdV0sITApLHQmJnQuaXNEZXN0cm95ZWQp
        cmV0dXJuIHZvaWQgMDtyZXR1cm4gdH07RW1iZXIuZ2V0V2l0aERlZmF1bHQ9
        ZnVuY3Rpb24odCxyLG4pe3ZhciBpPWUodCxyKTtyZXR1cm4gdm9pZCAwPT09
        aT9uOml9LEVtYmVyLmdldD1lfSgpLGZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShl
        LHQscil7Zm9yKHZhciBuPS0xLGk9MCxvPWUubGVuZ3RoO28+aTtpKz0zKWlm
        KHQ9PT1lW2ldJiZyPT09ZVtpKzFdKXtuPWk7YnJlYWt9cmV0dXJuIG59ZnVu
        Y3Rpb24gdChlLHQpe3ZhciByLG49ZihlLCEwKTtyZXR1cm4gbi5saXN0ZW5l
        cnN8fChuLmxpc3RlbmVycz17fSksbi5oYXNPd25Qcm9wZXJ0eSgibGlzdGVu
        ZXJzIil8fChuLmxpc3RlbmVycz1tKG4ubGlzdGVuZXJzKSkscj1uLmxpc3Rl
        bmVyc1t0XSxyJiYhbi5saXN0ZW5lcnMuaGFzT3duUHJvcGVydHkodCk/cj1u
        Lmxpc3RlbmVyc1t0XT1uLmxpc3RlbmVyc1t0XS5zbGljZSgpOnJ8fChyPW4u
        bGlzdGVuZXJzW3RdPVtdKSxyfWZ1bmN0aW9uIHIodCxyLG4pe3ZhciBpPXRb
        cF0sbz1pJiZpLmxpc3RlbmVycyYmaS5saXN0ZW5lcnNbcl07aWYobylmb3Io
        dmFyIGE9by5sZW5ndGgtMzthPj0wO2EtPTMpe3ZhciBzPW9bYV0sdT1vW2Er
        MV0sbD1vW2ErMl0sYz1lKG4scyx1KTstMT09PWMmJm4ucHVzaChzLHUsbCl9
        fWZ1bmN0aW9uIG4odCxyLG4pe3ZhciBpPXRbcF0sbz1pJiZpLmxpc3RlbmVy
        cyYmaS5saXN0ZW5lcnNbcl0sYT1bXTtpZihvKXtmb3IodmFyIHM9by5sZW5n
        dGgtMztzPj0wO3MtPTMpe3ZhciB1PW9bc10sbD1vW3MrMV0sYz1vW3MrMl0s
        aD1lKG4sdSxsKTstMT09PWgmJihuLnB1c2godSxsLGMpLGEucHVzaCh1LGws
        YykpfXJldHVybiBhfX1mdW5jdGlvbiBpKHIsbixpLG8sYSl7b3x8ImZ1bmN0
        aW9uIiE9dHlwZW9mIGl8fChvPWksaT1udWxsKTt2YXIgcz10KHIsbiksdT1l
        KHMsaSxvKSxsPTA7YSYmKGx8PWIpLC0xPT09dSYmKHMucHVzaChpLG8sbCks
        ImZ1bmN0aW9uIj09dHlwZW9mIHIuZGlkQWRkTGlzdGVuZXImJnIuZGlkQWRk
        TGlzdGVuZXIobixpLG8pKX1mdW5jdGlvbiBvKHIsbixpLG8pe2Z1bmN0aW9u
        IGEoaSxvKXt2YXIgYT10KHIsbikscz1lKGEsaSxvKTstMSE9PXMmJihhLnNw
        bGljZShzLDMpLCJmdW5jdGlvbiI9PXR5cGVvZiByLmRpZFJlbW92ZUxpc3Rl
        bmVyJiZyLmRpZFJlbW92ZUxpc3RlbmVyKG4saSxvKSl9aWYob3x8ImZ1bmN0
        aW9uIiE9dHlwZW9mIGl8fChvPWksaT1udWxsKSxvKWEoaSxvKTtlbHNle3Zh
        ciBzPXJbcF0sdT1zJiZzLmxpc3RlbmVycyYmcy5saXN0ZW5lcnNbbl07aWYo
        IXUpcmV0dXJuO2Zvcih2YXIgbD11Lmxlbmd0aC0zO2w+PTA7bC09MylhKHVb
        bF0sdVtsKzFdKX19ZnVuY3Rpb24gYShyLG4saSxvLGEpe2Z1bmN0aW9uIHMo
        KXtyZXR1cm4gYS5jYWxsKGkpfWZ1bmN0aW9uIHUoKXstMSE9PWMmJihsW2Mr
        Ml0mPX52KX1vfHwiZnVuY3Rpb24iIT10eXBlb2YgaXx8KG89aSxpPW51bGwp
        O3ZhciBsPXQocixuKSxjPWUobCxpLG8pO3JldHVybi0xIT09YyYmKGxbYysy
        XXw9diksRW1iZXIudHJ5RmluYWxseShzLHUpfWZ1bmN0aW9uIHMocixuLGks
        byxhKXtmdW5jdGlvbiBzKCl7cmV0dXJuIGEuY2FsbChpKX1mdW5jdGlvbiB1
        KCl7Zm9yKHZhciBlPTAsdD1mLmxlbmd0aDt0PmU7ZSsrKXt2YXIgcj1mW2Vd
        O3BbZV1bcisyXSY9fnZ9fW98fCJmdW5jdGlvbiIhPXR5cGVvZiBpfHwobz1p
        LGk9bnVsbCk7dmFyIGwsYyxoLG0sZj1bXSxwPVtdO2ZvcihoPTAsbT1uLmxl
        bmd0aDttPmg7aCsrKXtsPW5baF0sYz10KHIsbCk7dmFyIGQ9ZShjLGksbyk7
        LTEhPT1kJiYoY1tkKzJdfD12LGYucHVzaChkKSxwLnB1c2goYykpfXJldHVy
        biBFbWJlci50cnlGaW5hbGx5KHMsdSl9ZnVuY3Rpb24gdShlKXt2YXIgdD1l
        W3BdLmxpc3RlbmVycyxyPVtdO2lmKHQpZm9yKHZhciBuIGluIHQpdFtuXSYm
        ci5wdXNoKG4pO3JldHVybiByfWZ1bmN0aW9uIGwoZSx0LHIsbil7aWYoZSE9
        PUVtYmVyJiYiZnVuY3Rpb24iPT10eXBlb2YgZS5zZW5kRXZlbnQmJmUuc2Vu
        ZEV2ZW50KHQsciksIW4pe3ZhciBpPWVbcF07bj1pJiZpLmxpc3RlbmVycyYm
        aS5saXN0ZW5lcnNbdF19aWYobil7Zm9yKHZhciBhPW4ubGVuZ3RoLTM7YT49
        MDthLT0zKXt2YXIgcz1uW2FdLHU9blthKzFdLGw9blthKzJdO3UmJihsJnZ8
        fChsJmImJm8oZSx0LHMsdSksc3x8KHM9ZSksInN0cmluZyI9PXR5cGVvZiB1
        JiYodT1zW3VdKSxyP3UuYXBwbHkocyxyKTp1LmNhbGwocykpKX1yZXR1cm4h
        MH19ZnVuY3Rpb24gYyhlLHQpe3ZhciByPWVbcF0sbj1yJiZyLmxpc3RlbmVy
        cyYmci5saXN0ZW5lcnNbdF07cmV0dXJuISghbnx8IW4ubGVuZ3RoKX1mdW5j
        dGlvbiBoKGUsdCl7dmFyIHI9W10sbj1lW3BdLGk9biYmbi5saXN0ZW5lcnMm
        Jm4ubGlzdGVuZXJzW3RdO2lmKCFpKXJldHVybiByO2Zvcih2YXIgbz0wLGE9
        aS5sZW5ndGg7YT5vO28rPTMpe3ZhciBzPWlbb10sdT1pW28rMV07ci5wdXNo
        KFtzLHVdKX1yZXR1cm4gcn12YXIgbT1FbWJlci5jcmVhdGUsZj1FbWJlci5t
        ZXRhLHA9RW1iZXIuTUVUQV9LRVksZD1bXS5zbGljZSxiPTEsdj0yO0VtYmVy
        Lm9uPWZ1bmN0aW9uKCl7dmFyIGU9ZC5jYWxsKGFyZ3VtZW50cywtMSlbMF0s
        dD1kLmNhbGwoYXJndW1lbnRzLDAsLTEpO3JldHVybiBlLl9fZW1iZXJfbGlz
        dGVuc19fPXQsZX0sRW1iZXIuYWRkTGlzdGVuZXI9aSxFbWJlci5yZW1vdmVM
        aXN0ZW5lcj1vLEVtYmVyLl9zdXNwZW5kTGlzdGVuZXI9YSxFbWJlci5fc3Vz
        cGVuZExpc3RlbmVycz1zLEVtYmVyLnNlbmRFdmVudD1sLEVtYmVyLmhhc0xp
        c3RlbmVycz1jLEVtYmVyLndhdGNoZWRFdmVudHM9dSxFbWJlci5saXN0ZW5l
        cnNGb3I9aCxFbWJlci5saXN0ZW5lcnNEaWZmPW4sRW1iZXIubGlzdGVuZXJz
        VW5pb249cn0oKSxmdW5jdGlvbigpe3ZhciBlPUVtYmVyLmd1aWRGb3IsdD1F
        bWJlci5zZW5kRXZlbnQscj1FbWJlci5fT2JzZXJ2ZXJTZXQ9ZnVuY3Rpb24o
        KXt0aGlzLmNsZWFyKCl9O3IucHJvdG90eXBlLmFkZD1mdW5jdGlvbih0LHIs
        bil7dmFyIGksbz10aGlzLm9ic2VydmVyU2V0LGE9dGhpcy5vYnNlcnZlcnMs
        cz1lKHQpLHU9b1tzXTtyZXR1cm4gdXx8KG9bc109dT17fSksaT11W3JdLHZv
        aWQgMD09PWkmJihpPWEucHVzaCh7c2VuZGVyOnQsa2V5TmFtZTpyLGV2ZW50
        TmFtZTpuLGxpc3RlbmVyczpbXX0pLTEsdVtyXT1pKSxhW2ldLmxpc3RlbmVy
        c30sci5wcm90b3R5cGUuZmx1c2g9ZnVuY3Rpb24oKXt2YXIgZSxyLG4saSxv
        PXRoaXMub2JzZXJ2ZXJzO2Zvcih0aGlzLmNsZWFyKCksZT0wLHI9by5sZW5n
        dGg7cj5lOysrZSluPW9bZV0saT1uLnNlbmRlcixpLmlzRGVzdHJveWluZ3x8
        aS5pc0Rlc3Ryb3llZHx8dChpLG4uZXZlbnROYW1lLFtpLG4ua2V5TmFtZV0s
        bi5saXN0ZW5lcnMpfSxyLnByb3RvdHlwZS5jbGVhcj1mdW5jdGlvbigpe3Ro
        aXMub2JzZXJ2ZXJTZXQ9e30sdGhpcy5vYnNlcnZlcnM9W119fSgpLGZ1bmN0
        aW9uKCl7ZnVuY3Rpb24gZShlLHQpe3ZhciBuPWVbaF0saT1uJiZuLndhdGNo
        aW5nW3RdPjB8fCJsZW5ndGgiPT09dCxhPW4mJm4ucHJvdG8scz1uJiZuLmRl
        c2NzW3RdO2kmJmEhPT1lJiYocyYmcy53aWxsQ2hhbmdlJiZzLndpbGxDaGFu
        Z2UoZSx0KSxyKGUsdCxuKSxvKGUsdCxuKSxsKGUsdCkpfWZ1bmN0aW9uIHQo
        ZSx0KXt2YXIgcj1lW2hdLGk9ciYmci53YXRjaGluZ1t0XT4wfHwibGVuZ3Ro
        Ij09PXQsbz1yJiZyLnByb3RvLHM9ciYmci5kZXNjc1t0XTtvIT09ZSYmKHMm
        JnMuZGlkQ2hhbmdlJiZzLmRpZENoYW5nZShlLHQpLChpfHwibGVuZ3RoIj09
        PXQpJiYobihlLHQsciksYShlLHQsciwhMSksYyhlLHQpKSl9ZnVuY3Rpb24g
        cih0LHIsbil7aWYoIXQuaXNEZXN0cm95aW5nKXt2YXIgbz13LGE9IW87YSYm
        KG89dz17fSksaShlLHQscixvLG4pLGEmJih3PW51bGwpfX1mdW5jdGlvbiBu
        KGUscixuKXtpZighZS5pc0Rlc3Ryb3lpbmcpe3ZhciBvPV8sYT0hbzthJiYo
        bz1fPXt9KSxpKHQsZSxyLG8sbiksYSYmKF89bnVsbCl9fWZ1bmN0aW9uIGko
        ZSx0LHIsbixpKXt2YXIgbz1tKHQpO2lmKG5bb118fChuW29dPXt9KSwhbltv
        XVtyXSl7bltvXVtyXT0hMDt2YXIgYT1pLmRlcHM7aWYoYT1hJiZhW3JdKWZv
        cih2YXIgcyBpbiBhKXt2YXIgdT1pLmRlc2NzW3NdO3UmJnUuX3N1c3BlbmRl
        ZD09PXR8fGUodCxzKX19fWZ1bmN0aW9uIG8odCxyLG4pe2lmKG4uaGFzT3du
        UHJvcGVydHkoImNoYWluV2F0Y2hlcnMiKSYmbi5jaGFpbldhdGNoZXJzW3Jd
        KXt2YXIgaSxvLGE9bi5jaGFpbldhdGNoZXJzW3JdLHM9W107Zm9yKGk9MCxv
        PWEubGVuZ3RoO28+aTtpKyspYVtpXS53aWxsQ2hhbmdlKHMpO2ZvcihpPTAs
        bz1zLmxlbmd0aDtvPmk7aSs9MillKHNbaV0sc1tpKzFdKX19ZnVuY3Rpb24g
        YShlLHIsbixpKXtpZihuJiZuLmhhc093blByb3BlcnR5KCJjaGFpbldhdGNo
        ZXJzIikmJm4uY2hhaW5XYXRjaGVyc1tyXSl7dmFyIG8sYSxzPW4uY2hhaW5X
        YXRjaGVyc1tyXSx1PWk/bnVsbDpbXTtmb3Iobz0wLGE9cy5sZW5ndGg7YT5v
        O28rKylzW29dLmRpZENoYW5nZSh1KTtpZighaSlmb3Iobz0wLGE9dS5sZW5n
        dGg7YT5vO28rPTIpdCh1W29dLHVbbysxXSl9fWZ1bmN0aW9uIHMoKXt5Kyt9
        ZnVuY3Rpb24gdSgpe3ktLSwwPj15JiYoRS5jbGVhcigpLGcuZmx1c2goKSl9
        ZnVuY3Rpb24gbChlLHQpe2lmKCFlLmlzRGVzdHJveWluZyl7dmFyIHIsbixp
        PXQrIjpiZWZvcmUiO3k/KHI9RS5hZGQoZSx0LGkpLG49YihlLGkscikscChl
        LGksW2UsdF0sbikpOnAoZSxpLFtlLHRdKX19ZnVuY3Rpb24gYyhlLHQpe2lm
        KCFlLmlzRGVzdHJveWluZyl7dmFyIHIsbj10KyI6Y2hhbmdlIjt5PyhyPWcu
        YWRkKGUsdCxuKSxkKGUsbixyKSk6cChlLG4sW2UsdF0pfX12YXIgaD1FbWJl
        ci5NRVRBX0tFWSxtPUVtYmVyLmd1aWRGb3IsZj1FbWJlci50cnlGaW5hbGx5
        LHA9RW1iZXIuc2VuZEV2ZW50LGQ9RW1iZXIubGlzdGVuZXJzVW5pb24sYj1F
        bWJlci5saXN0ZW5lcnNEaWZmLHY9RW1iZXIuX09ic2VydmVyU2V0LEU9bmV3
        IHYsZz1uZXcgdix5PTA7RW1iZXIucHJvcGVydHlXaWxsQ2hhbmdlPWUsRW1i
        ZXIucHJvcGVydHlEaWRDaGFuZ2U9dDt2YXIgdyxfO0VtYmVyLm92ZXJyaWRl
        Q2hhaW5zPWZ1bmN0aW9uKGUsdCxyKXthKGUsdCxyLCEwKX0sRW1iZXIuYmVn
        aW5Qcm9wZXJ0eUNoYW5nZXM9cyxFbWJlci5lbmRQcm9wZXJ0eUNoYW5nZXM9
        dSxFbWJlci5jaGFuZ2VQcm9wZXJ0aWVzPWZ1bmN0aW9uKGUsdCl7cygpLGYo
        ZSx1LHQpfX0oKSxmdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0LHIsbyl7dmFy
        IGE7aWYoYT10LnNsaWNlKHQubGFzdEluZGV4T2YoIi4iKSsxKSx0PXQ9PT1h
        P2E6dC5zbGljZSgwLHQubGVuZ3RoLShhLmxlbmd0aCsxKSksInRoaXMiIT09
        dCYmKGU9bihlLHQpKSwhYXx8MD09PWEubGVuZ3RoKXRocm93IG5ldyBFbWJl
        ci5FcnJvcigiUHJvcGVydHkgc2V0IGZhaWxlZDogWW91IHBhc3NlZCBhbiBl
        bXB0eSBwYXRoIik7aWYoIWUpe2lmKG8pcmV0dXJuO3Rocm93IG5ldyBFbWJl
        ci5FcnJvcignUHJvcGVydHkgc2V0IGZhaWxlZDogb2JqZWN0IGluIHBhdGgg
        IicrdCsnIiBjb3VsZCBub3QgYmUgZm91bmQgb3Igd2FzIGRlc3Ryb3llZC4n
        KX1yZXR1cm4gaShlLGEscil9dmFyIHQ9RW1iZXIuTUVUQV9LRVkscj1FbWJl
        ci5FTlYuTUFOREFUT1JZX1NFVFRFUixuPUVtYmVyLl9nZXRQYXRoLGk9ZnVu
        Y3Rpb24obixpLG8sYSl7aWYoInN0cmluZyI9PXR5cGVvZiBuJiYobz1pLGk9
        bixuPW51bGwpLCFufHwtMSE9PWkuaW5kZXhPZigiLiIpKXJldHVybiBlKG4s
        aSxvLGEpO3ZhciBzLHUsbD1uW3RdLGM9bCYmbC5kZXNjc1tpXTtyZXR1cm4g
        Yz9jLnNldChuLGksbyk6KHM9Im9iamVjdCI9PXR5cGVvZiBuJiYhKGkgaW4g
        bikscyYmImZ1bmN0aW9uIj09dHlwZW9mIG4uc2V0VW5rbm93blByb3BlcnR5
        P24uc2V0VW5rbm93blByb3BlcnR5KGksbyk6bCYmbC53YXRjaGluZ1tpXT4w
        Pyh1PXI/bC52YWx1ZXNbaV06bltpXSxvIT09dSYmKEVtYmVyLnByb3BlcnR5
        V2lsbENoYW5nZShuLGkpLHI/KHZvaWQgMCE9PXV8fGkgaW4gbikmJm4ucHJv
        cGVydHlJc0VudW1lcmFibGUoaSk/bC52YWx1ZXNbaV09bzpFbWJlci5kZWZp
        bmVQcm9wZXJ0eShuLGksbnVsbCxvKTpuW2ldPW8sRW1iZXIucHJvcGVydHlE
        aWRDaGFuZ2UobixpKSkpOm5baV09byksb307RW1iZXIuY29uZmlnLm92ZXJy
        aWRlQWNjZXNzb3JzJiYoRW1iZXIuc2V0PWksRW1iZXIuY29uZmlnLm92ZXJy
        aWRlQWNjZXNzb3JzKCksaT1FbWJlci5zZXQpLEVtYmVyLnNldD1pLEVtYmVy
        LnRyeVNldD1mdW5jdGlvbihlLHQscil7cmV0dXJuIGkoZSx0LHIsITApfX0o
        KSxmdW5jdGlvbigpe3ZhciBlPUVtYmVyLnNldCx0PUVtYmVyLmd1aWRGb3Is
        cj1FbWJlci5BcnJheVBvbHlmaWxscy5pbmRleE9mLG49ZnVuY3Rpb24oZSl7
        dmFyIHQ9e307Zm9yKHZhciByIGluIGUpZS5oYXNPd25Qcm9wZXJ0eShyKSYm
        KHRbcl09ZVtyXSk7cmV0dXJuIHR9LGk9ZnVuY3Rpb24oZSx0KXt2YXIgcj1l
        LmtleXMuY29weSgpLGk9bihlLnZhbHVlcyk7cmV0dXJuIHQua2V5cz1yLHQu
        dmFsdWVzPWksdC5sZW5ndGg9ZS5sZW5ndGgsdH0sbz1FbWJlci5PcmRlcmVk
        U2V0PWZ1bmN0aW9uKCl7dGhpcy5jbGVhcigpfTtvLmNyZWF0ZT1mdW5jdGlv
        bigpe3JldHVybiBuZXcgb30sby5wcm90b3R5cGU9e2NsZWFyOmZ1bmN0aW9u
        KCl7dGhpcy5wcmVzZW5jZVNldD17fSx0aGlzLmxpc3Q9W119LGFkZDpmdW5j
        dGlvbihlKXt2YXIgcj10KGUpLG49dGhpcy5wcmVzZW5jZVNldCxpPXRoaXMu
        bGlzdDtyIGluIG58fChuW3JdPSEwLGkucHVzaChlKSl9LHJlbW92ZTpmdW5j
        dGlvbihlKXt2YXIgbj10KGUpLGk9dGhpcy5wcmVzZW5jZVNldCxvPXRoaXMu
        bGlzdDtkZWxldGUgaVtuXTt2YXIgYT1yLmNhbGwobyxlKTthPi0xJiZvLnNw
        bGljZShhLDEpfSxpc0VtcHR5OmZ1bmN0aW9uKCl7cmV0dXJuIDA9PT10aGlz
        Lmxpc3QubGVuZ3RofSxoYXM6ZnVuY3Rpb24oZSl7dmFyIHI9dChlKSxuPXRo
        aXMucHJlc2VuY2VTZXQ7cmV0dXJuIHIgaW4gbn0sZm9yRWFjaDpmdW5jdGlv
        bihlLHQpe2Zvcih2YXIgcj10aGlzLnRvQXJyYXkoKSxuPTAsaT1yLmxlbmd0
        aDtpPm47bisrKWUuY2FsbCh0LHJbbl0pfSx0b0FycmF5OmZ1bmN0aW9uKCl7
        cmV0dXJuIHRoaXMubGlzdC5zbGljZSgpfSxjb3B5OmZ1bmN0aW9uKCl7dmFy
        IGU9bmV3IG87cmV0dXJuIGUucHJlc2VuY2VTZXQ9bih0aGlzLnByZXNlbmNl
        U2V0KSxlLmxpc3Q9dGhpcy50b0FycmF5KCksZX19O3ZhciBhPUVtYmVyLk1h
        cD1mdW5jdGlvbigpe3RoaXMua2V5cz1FbWJlci5PcmRlcmVkU2V0LmNyZWF0
        ZSgpLHRoaXMudmFsdWVzPXt9fTthLmNyZWF0ZT1mdW5jdGlvbigpe3JldHVy
        biBuZXcgYX0sYS5wcm90b3R5cGU9e2xlbmd0aDowLGdldDpmdW5jdGlvbihl
        KXt2YXIgcj10aGlzLnZhbHVlcyxuPXQoZSk7cmV0dXJuIHJbbl19LHNldDpm
        dW5jdGlvbihyLG4pe3ZhciBpPXRoaXMua2V5cyxvPXRoaXMudmFsdWVzLGE9
        dChyKTtpLmFkZChyKSxvW2FdPW4sZSh0aGlzLCJsZW5ndGgiLGkubGlzdC5s
        ZW5ndGgpfSxyZW1vdmU6ZnVuY3Rpb24ocil7dmFyIG49dGhpcy5rZXlzLGk9
        dGhpcy52YWx1ZXMsbz10KHIpO3JldHVybiBpLmhhc093blByb3BlcnR5KG8p
        PyhuLnJlbW92ZShyKSxkZWxldGUgaVtvXSxlKHRoaXMsImxlbmd0aCIsbi5s
        aXN0Lmxlbmd0aCksITApOiExfSxoYXM6ZnVuY3Rpb24oZSl7dmFyIHI9dGhp
        cy52YWx1ZXMsbj10KGUpO3JldHVybiByLmhhc093blByb3BlcnR5KG4pfSxm
        b3JFYWNoOmZ1bmN0aW9uKGUscil7dmFyIG49dGhpcy5rZXlzLGk9dGhpcy52
        YWx1ZXM7bi5mb3JFYWNoKGZ1bmN0aW9uKG4pe3ZhciBvPXQobik7ZS5jYWxs
        KHIsbixpW29dKX0pfSxjb3B5OmZ1bmN0aW9uKCl7cmV0dXJuIGkodGhpcyxu
        ZXcgYSl9fTt2YXIgcz1FbWJlci5NYXBXaXRoRGVmYXVsdD1mdW5jdGlvbihl
        KXthLmNhbGwodGhpcyksdGhpcy5kZWZhdWx0VmFsdWU9ZS5kZWZhdWx0VmFs
        dWV9O3MuY3JlYXRlPWZ1bmN0aW9uKGUpe3JldHVybiBlP25ldyBzKGUpOm5l
        dyBhfSxzLnByb3RvdHlwZT1FbWJlci5jcmVhdGUoYS5wcm90b3R5cGUpLHMu
        cHJvdG90eXBlLmdldD1mdW5jdGlvbihlKXt2YXIgdD10aGlzLmhhcyhlKTtp
        Zih0KXJldHVybiBhLnByb3RvdHlwZS5nZXQuY2FsbCh0aGlzLGUpO3ZhciBy
        PXRoaXMuZGVmYXVsdFZhbHVlKGUpO3JldHVybiB0aGlzLnNldChlLHIpLHJ9
        LHMucHJvdG90eXBlLmNvcHk9ZnVuY3Rpb24oKXtyZXR1cm4gaSh0aGlzLG5l
        dyBzKHtkZWZhdWx0VmFsdWU6dGhpcy5kZWZhdWx0VmFsdWV9KSl9fSgpLGZ1
        bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXt2YXIgdCxyO0VtYmVyLmltcG9ydHMu
        Y29uc29sZT90PUVtYmVyLmltcG9ydHMuY29uc29sZToidW5kZWZpbmVkIiE9
        dHlwZW9mIGNvbnNvbGUmJih0PWNvbnNvbGUpO3ZhciBuPSJvYmplY3QiPT10
        eXBlb2YgdD90W2VdOm51bGw7cmV0dXJuIG4/bi5hcHBseT8ocj1mdW5jdGlv
        bigpe24uYXBwbHkodCxhcmd1bWVudHMpfSxyLmRpc3BsYXlOYW1lPSJjb25z
        b2xlLiIrZSxyKTpmdW5jdGlvbigpe3ZhciBlPUFycmF5LnByb3RvdHlwZS5q
        b2luLmNhbGwoYXJndW1lbnRzLCIsICIpO24oZSl9OnZvaWQgMH1mdW5jdGlv
        biB0KGUsdCl7aWYoIWUpdHJ5e3Rocm93IG5ldyBFbWJlci5FcnJvcigiYXNz
        ZXJ0aW9uIGZhaWxlZDogIit0KX1jYXRjaChyKXtzZXRUaW1lb3V0KGZ1bmN0
        aW9uKCl7dGhyb3cgcn0sMCl9fUVtYmVyLkxvZ2dlcj17bG9nOmUoImxvZyIp
        fHxFbWJlci5LLHdhcm46ZSgid2FybiIpfHxFbWJlci5LLGVycm9yOmUoImVy
        cm9yIil8fEVtYmVyLkssaW5mbzplKCJpbmZvIil8fEVtYmVyLkssZGVidWc6
        ZSgiZGVidWciKXx8ZSgiaW5mbyIpfHxFbWJlci5LLGFzc2VydDplKCJhc3Nl
        cnQiKXx8dH19KCksZnVuY3Rpb24oKXt2YXIgZT1FbWJlci5NRVRBX0tFWSx0
        PUVtYmVyLm1ldGEscj1FbWJlci5wbGF0Zm9ybS5kZWZpbmVQcm9wZXJ0eSxu
        PUVtYmVyLkVOVi5NQU5EQVRPUllfU0VUVEVSO0VtYmVyLkRlc2NyaXB0b3I9
        ZnVuY3Rpb24oKXt9O3ZhciBpPUVtYmVyLk1BTkRBVE9SWV9TRVRURVJfRlVO
        Q1RJT049ZnVuY3Rpb24oKXt9LG89RW1iZXIuREVGQVVMVF9HRVRURVJfRlVO
        Q1RJT049ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIHI9dGhp
        c1tlXTtyZXR1cm4gciYmci52YWx1ZXNbdF19fTtFbWJlci5kZWZpbmVQcm9w
        ZXJ0eT1mdW5jdGlvbihlLGEscyx1LGwpe3ZhciBjLGgsbSxmO3JldHVybiBs
        fHwobD10KGUpKSxjPWwuZGVzY3MsaD1sLmRlc2NzW2FdLG09bC53YXRjaGlu
        Z1thXT4wLGggaW5zdGFuY2VvZiBFbWJlci5EZXNjcmlwdG9yJiZoLnRlYXJk
        b3duKGUsYSkscyBpbnN0YW5jZW9mIEVtYmVyLkRlc2NyaXB0b3I/KGY9cyxj
        W2FdPXMsbiYmbT9yKGUsYSx7Y29uZmlndXJhYmxlOiEwLGVudW1lcmFibGU6
        ITAsd3JpdGFibGU6ITAsdmFsdWU6dm9pZCAwfSk6ZVthXT12b2lkIDApOihj
        W2FdPXZvaWQgMCxudWxsPT1zPyhmPXUsbiYmbT8obC52YWx1ZXNbYV09dSxy
        KGUsYSx7Y29uZmlndXJhYmxlOiEwLGVudW1lcmFibGU6ITAsc2V0OmksZ2V0
        Om8oYSl9KSk6ZVthXT11KTooZj1zLHIoZSxhLHMpKSksbSYmRW1iZXIub3Zl
        cnJpZGVDaGFpbnMoZSxhLGwpLGUuZGlkRGVmaW5lUHJvcGVydHkmJmUuZGlk
        RGVmaW5lUHJvcGVydHkoZSxhLGYpLHRoaXN9fSgpLGZ1bmN0aW9uKCl7dmFy
        IGU9RW1iZXIuZ2V0O0VtYmVyLmdldFByb3BlcnRpZXM9ZnVuY3Rpb24odCl7
        dmFyIHI9e30sbj1hcmd1bWVudHMsaT0xOzI9PT1hcmd1bWVudHMubGVuZ3Ro
        JiYiYXJyYXkiPT09RW1iZXIudHlwZU9mKGFyZ3VtZW50c1sxXSkmJihpPTAs
        bj1hcmd1bWVudHNbMV0pO2Zvcih2YXIgbz1uLmxlbmd0aDtvPmk7aSsrKXJb
        bltpXV09ZSh0LG5baV0pO3JldHVybiByfX0oKSxmdW5jdGlvbigpe3ZhciBl
        PUVtYmVyLmNoYW5nZVByb3BlcnRpZXMsdD1FbWJlci5zZXQ7RW1iZXIuc2V0
        UHJvcGVydGllcz1mdW5jdGlvbihyLG4pe3JldHVybiBlKGZ1bmN0aW9uKCl7
        Zm9yKHZhciBlIGluIG4pbi5oYXNPd25Qcm9wZXJ0eShlKSYmdChyLGUsbltl
        XSl9KSxyfX0oKSxmdW5jdGlvbigpe3ZhciBlPUVtYmVyLm1ldGEsdD1FbWJl
        ci50eXBlT2Yscj1FbWJlci5FTlYuTUFOREFUT1JZX1NFVFRFUixuPUVtYmVy
        LnBsYXRmb3JtLmRlZmluZVByb3BlcnR5O0VtYmVyLndhdGNoS2V5PWZ1bmN0
        aW9uKGksbyxhKXtpZigibGVuZ3RoIiE9PW98fCJhcnJheSIhPT10KGkpKXt2
        YXIgcz1hfHxlKGkpLHU9cy53YXRjaGluZzt1W29dP3Vbb109KHVbb118fDAp
        KzE6KHVbb109MSwiZnVuY3Rpb24iPT10eXBlb2YgaS53aWxsV2F0Y2hQcm9w
        ZXJ0eSYmaS53aWxsV2F0Y2hQcm9wZXJ0eShvKSxyJiZvIGluIGkmJihzLnZh
        bHVlc1tvXT1pW29dLG4oaSxvLHtjb25maWd1cmFibGU6ITAsZW51bWVyYWJs
        ZTppLnByb3BlcnR5SXNFbnVtZXJhYmxlKG8pLHNldDpFbWJlci5NQU5EQVRP
        UllfU0VUVEVSX0ZVTkNUSU9OLGdldDpFbWJlci5ERUZBVUxUX0dFVFRFUl9G
        VU5DVElPTihvKX0pKSl9fSxFbWJlci51bndhdGNoS2V5PWZ1bmN0aW9uKHQs
        aSxvKXt2YXIgYT1vfHxlKHQpLHM9YS53YXRjaGluZzsxPT09c1tpXT8oc1tp
        XT0wLCJmdW5jdGlvbiI9PXR5cGVvZiB0LmRpZFVud2F0Y2hQcm9wZXJ0eSYm
        dC5kaWRVbndhdGNoUHJvcGVydHkoaSksciYmaSBpbiB0JiZuKHQsaSx7Y29u
        ZmlndXJhYmxlOiEwLGVudW1lcmFibGU6dC5wcm9wZXJ0eUlzRW51bWVyYWJs
        ZShpKSxzZXQ6ZnVuY3Rpb24oZSl7bih0LGkse2NvbmZpZ3VyYWJsZTohMCx3
        cml0YWJsZTohMCxlbnVtZXJhYmxlOiEwLHZhbHVlOmV9KSxkZWxldGUgYS52
        YWx1ZXNbaV19LGdldDpFbWJlci5ERUZBVUxUX0dFVFRFUl9GVU5DVElPTihp
        KX0pKTpzW2ldPjEmJnNbaV0tLX19KCksZnVuY3Rpb24oKXtmdW5jdGlvbiBl
        KGUpe3JldHVybiBlLm1hdGNoKGMpWzBdfWZ1bmN0aW9uIHQoZSx0LHIpe2lm
        KGUmJiJvYmplY3QiPT10eXBlb2YgZSl7dmFyIGk9bihlKSxvPWkuY2hhaW5X
        YXRjaGVycztpLmhhc093blByb3BlcnR5KCJjaGFpbldhdGNoZXJzIil8fChv
        PWkuY2hhaW5XYXRjaGVycz17fSksb1t0XXx8KG9bdF09W10pLG9bdF0ucHVz
        aChyKSx1KGUsdCxpKX19ZnVuY3Rpb24gcihlLHQpe2lmKCFlKXJldHVybiB2
        b2lkIDA7dmFyIHI9ZVtoXTtpZihyJiZyLnByb3RvPT09ZSlyZXR1cm4gdm9p
        ZCAwO2lmKCJAZWFjaCI9PT10KXJldHVybiBpKGUsdCk7dmFyIG49ciYmci5k
        ZXNjc1t0XTtyZXR1cm4gbiYmbi5fY2FjaGVhYmxlP3QgaW4gci5jYWNoZT9y
        LmNhY2hlW3RdOnZvaWQgMDppKGUsdCl9dmFyIG49RW1iZXIubWV0YSxpPUVt
        YmVyLmdldCxvPUVtYmVyLm5vcm1hbGl6ZVR1cGxlLGE9RW1iZXIuQXJyYXlQ
        b2x5ZmlsbHMuZm9yRWFjaCxzPUVtYmVyLndhcm4sdT1FbWJlci53YXRjaEtl
        eSxsPUVtYmVyLnVud2F0Y2hLZXksYz0vXihbXlwuXCpdKykvLGg9RW1iZXIu
        TUVUQV9LRVksbT1bXTtFbWJlci5mbHVzaFBlbmRpbmdDaGFpbnM9ZnVuY3Rp
        b24oKXtpZigwIT09bS5sZW5ndGgpe3ZhciBlPW07bT1bXSxhLmNhbGwoZSxm
        dW5jdGlvbihlKXtlWzBdLmFkZChlWzFdKX0pLHMoIldhdGNoaW5nIGFuIHVu
        ZGVmaW5lZCBnbG9iYWwsIEVtYmVyIGV4cGVjdHMgd2F0Y2hlZCBnbG9iYWxz
        IHRvIGJlIHNldHVwIGJ5IHRoZSB0aW1lIHRoZSBydW4gbG9vcCBpcyBmbHVz
        aGVkLCBjaGVjayBmb3IgdHlwb3MiLDA9PT1tLmxlbmd0aCl9fTt2YXIgZj1F
        bWJlci5yZW1vdmVDaGFpbldhdGNoZXI9ZnVuY3Rpb24oZSx0LHIpe2lmKGUm
        JiJvYmplY3QiPT10eXBlb2YgZSl7dmFyIG49ZVtoXTtpZighbnx8bi5oYXNP
        d25Qcm9wZXJ0eSgiY2hhaW5XYXRjaGVycyIpKXt2YXIgaT1uJiZuLmNoYWlu
        V2F0Y2hlcnM7aWYoaSYmaVt0XSl7aT1pW3RdO2Zvcih2YXIgbz0wLGE9aS5s
        ZW5ndGg7YT5vO28rKylpW29dPT09ciYmaS5zcGxpY2UobywxKX1sKGUsdCxu
        KX19fSxwPUVtYmVyLl9DaGFpbk5vZGU9ZnVuY3Rpb24oZSxyLG4pe3RoaXMu
        X3BhcmVudD1lLHRoaXMuX2tleT1yLHRoaXMuX3dhdGNoaW5nPXZvaWQgMD09
        PW4sdGhpcy5fdmFsdWU9bix0aGlzLl9wYXRocz17fSx0aGlzLl93YXRjaGlu
        ZyYmKHRoaXMuX29iamVjdD1lLnZhbHVlKCksdGhpcy5fb2JqZWN0JiZ0KHRo
        aXMuX29iamVjdCx0aGlzLl9rZXksdGhpcykpLHRoaXMuX3BhcmVudCYmIkBl
        YWNoIj09PXRoaXMuX3BhcmVudC5fa2V5JiZ0aGlzLnZhbHVlKCl9LGQ9cC5w
        cm90b3R5cGU7ZC52YWx1ZT1mdW5jdGlvbigpe2lmKHZvaWQgMD09PXRoaXMu
        X3ZhbHVlJiZ0aGlzLl93YXRjaGluZyl7dmFyIGU9dGhpcy5fcGFyZW50LnZh
        bHVlKCk7dGhpcy5fdmFsdWU9cihlLHRoaXMuX2tleSl9cmV0dXJuIHRoaXMu
        X3ZhbHVlfSxkLmRlc3Ryb3k9ZnVuY3Rpb24oKXtpZih0aGlzLl93YXRjaGlu
        Zyl7dmFyIGU9dGhpcy5fb2JqZWN0O2UmJmYoZSx0aGlzLl9rZXksdGhpcyks
        dGhpcy5fd2F0Y2hpbmc9ITF9fSxkLmNvcHk9ZnVuY3Rpb24oZSl7dmFyIHQs
        cj1uZXcgcChudWxsLG51bGwsZSksbj10aGlzLl9wYXRocztmb3IodCBpbiBu
        KW5bdF08PTB8fHIuYWRkKHQpO3JldHVybiByfSxkLmFkZD1mdW5jdGlvbih0
        KXt2YXIgcixuLGksYSxzO2lmKHM9dGhpcy5fcGF0aHMsc1t0XT0oc1t0XXx8
        MCkrMSxyPXRoaXMudmFsdWUoKSxuPW8ocix0KSxuWzBdJiZuWzBdPT09cil0
        PW5bMV0saT1lKHQpLHQ9dC5zbGljZShpLmxlbmd0aCsxKTtlbHNle2lmKCFu
        WzBdKXJldHVybiBtLnB1c2goW3RoaXMsdF0pLG4ubGVuZ3RoPTAsdm9pZCAw
        O2E9blswXSxpPXQuc2xpY2UoMCwwLShuWzFdLmxlbmd0aCsxKSksdD1uWzFd
        fW4ubGVuZ3RoPTAsdGhpcy5jaGFpbihpLHQsYSl9LGQucmVtb3ZlPWZ1bmN0
        aW9uKHQpe3ZhciByLG4saSxhLHM7cz10aGlzLl9wYXRocyxzW3RdPjAmJnNb
        dF0tLSxyPXRoaXMudmFsdWUoKSxuPW8ocix0KSxuWzBdPT09cj8odD1uWzFd
        LGk9ZSh0KSx0PXQuc2xpY2UoaS5sZW5ndGgrMSkpOihhPW5bMF0saT10LnNs
        aWNlKDAsMC0oblsxXS5sZW5ndGgrMSkpLHQ9blsxXSksbi5sZW5ndGg9MCx0
        aGlzLnVuY2hhaW4oaSx0KX0sZC5jb3VudD0wLGQuY2hhaW49ZnVuY3Rpb24o
        dCxyLG4pe3ZhciBpLG89dGhpcy5fY2hhaW5zO298fChvPXRoaXMuX2NoYWlu
        cz17fSksaT1vW3RdLGl8fChpPW9bdF09bmV3IHAodGhpcyx0LG4pKSxpLmNv
        dW50KyssciYmci5sZW5ndGg+MCYmKHQ9ZShyKSxyPXIuc2xpY2UodC5sZW5n
        dGgrMSksaS5jaGFpbih0LHIpKX0sZC51bmNoYWluPWZ1bmN0aW9uKHQscil7
        dmFyIG49dGhpcy5fY2hhaW5zLGk9blt0XTtyJiZyLmxlbmd0aD4xJiYodD1l
        KHIpLHI9ci5zbGljZSh0Lmxlbmd0aCsxKSxpLnVuY2hhaW4odCxyKSksaS5j
        b3VudC0tLGkuY291bnQ8PTAmJihkZWxldGUgbltpLl9rZXldLGkuZGVzdHJv
        eSgpKX0sZC53aWxsQ2hhbmdlPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX2No
        YWlucztpZih0KWZvcih2YXIgciBpbiB0KXQuaGFzT3duUHJvcGVydHkocikm
        JnRbcl0ud2lsbENoYW5nZShlKTt0aGlzLl9wYXJlbnQmJnRoaXMuX3BhcmVu
        dC5jaGFpbldpbGxDaGFuZ2UodGhpcyx0aGlzLl9rZXksMSxlKX0sZC5jaGFp
        bldpbGxDaGFuZ2U9ZnVuY3Rpb24oZSx0LHIsbil7dGhpcy5fa2V5JiYodD10
        aGlzLl9rZXkrIi4iK3QpLHRoaXMuX3BhcmVudD90aGlzLl9wYXJlbnQuY2hh
        aW5XaWxsQ2hhbmdlKHRoaXMsdCxyKzEsbik6KHI+MSYmbi5wdXNoKHRoaXMu
        dmFsdWUoKSx0KSx0PSJ0aGlzLiIrdCx0aGlzLl9wYXRoc1t0XT4wJiZuLnB1
        c2godGhpcy52YWx1ZSgpLHQpKX0sZC5jaGFpbkRpZENoYW5nZT1mdW5jdGlv
        bihlLHQscixuKXt0aGlzLl9rZXkmJih0PXRoaXMuX2tleSsiLiIrdCksdGhp
        cy5fcGFyZW50P3RoaXMuX3BhcmVudC5jaGFpbkRpZENoYW5nZSh0aGlzLHQs
        cisxLG4pOihyPjEmJm4ucHVzaCh0aGlzLnZhbHVlKCksdCksdD0idGhpcy4i
        K3QsdGhpcy5fcGF0aHNbdF0+MCYmbi5wdXNoKHRoaXMudmFsdWUoKSx0KSl9
        LGQuZGlkQ2hhbmdlPWZ1bmN0aW9uKGUpe2lmKHRoaXMuX3dhdGNoaW5nKXt2
        YXIgcj10aGlzLl9wYXJlbnQudmFsdWUoKTtyIT09dGhpcy5fb2JqZWN0JiYo
        Zih0aGlzLl9vYmplY3QsdGhpcy5fa2V5LHRoaXMpLHRoaXMuX29iamVjdD1y
        LHQocix0aGlzLl9rZXksdGhpcykpLHRoaXMuX3ZhbHVlPXZvaWQgMCx0aGlz
        Ll9wYXJlbnQmJiJAZWFjaCI9PT10aGlzLl9wYXJlbnQuX2tleSYmdGhpcy52
        YWx1ZSgpfXZhciBuPXRoaXMuX2NoYWlucztpZihuKWZvcih2YXIgaSBpbiBu
        KW4uaGFzT3duUHJvcGVydHkoaSkmJm5baV0uZGlkQ2hhbmdlKGUpO251bGwh
        PT1lJiZ0aGlzLl9wYXJlbnQmJnRoaXMuX3BhcmVudC5jaGFpbkRpZENoYW5n
        ZSh0aGlzLHRoaXMuX2tleSwxLGUpfSxFbWJlci5maW5pc2hDaGFpbnM9ZnVu
        Y3Rpb24oZSl7dmFyIHQ9ZVtoXSxyPXQmJnQuY2hhaW5zO3ImJihyLnZhbHVl
        KCkhPT1lP24oZSkuY2hhaW5zPXI9ci5jb3B5KGUpOnIuZGlkQ2hhbmdlKG51
        bGwpKX19KCksZnVuY3Rpb24oKXt2YXIgZT1FbWJlci5FbnVtZXJhYmxlVXRp
        bHMuZm9yRWFjaCx0PS9eKCg/OlteXC5dKlwuKSopXHsoLiopXH0kLztFbWJl
        ci5leHBhbmRQcm9wZXJ0aWVzPWZ1bmN0aW9uKHIsbil7dmFyIGksbyxhOyhp
        PXQuZXhlYyhyKSk/KG89aVsxXSxhPWlbMl0sZShhLnNwbGl0KCIsIiksZnVu
        Y3Rpb24oZSl7bihvK2UpfSkpOm4ocil9fSgpLGZ1bmN0aW9uKCl7ZnVuY3Rp
        b24gZShlLHIpe3ZhciBpPXJ8fHQoZSksbz1pLmNoYWlucztyZXR1cm4gbz9v
        LnZhbHVlKCkhPT1lJiYobz1pLmNoYWlucz1vLmNvcHkoZSkpOm89aS5jaGFp
        bnM9bmV3IG4obnVsbCxudWxsLGUpLG99dmFyIHQ9RW1iZXIubWV0YSxyPUVt
        YmVyLnR5cGVPZixuPUVtYmVyLl9DaGFpbk5vZGU7RW1iZXIud2F0Y2hQYXRo
        PWZ1bmN0aW9uKG4saSxvKXtpZigibGVuZ3RoIiE9PWl8fCJhcnJheSIhPT1y
        KG4pKXt2YXIgYT1vfHx0KG4pLHM9YS53YXRjaGluZztzW2ldP3NbaV09KHNb
        aV18fDApKzE6KHNbaV09MSxlKG4sYSkuYWRkKGkpKX19LEVtYmVyLnVud2F0
        Y2hQYXRoPWZ1bmN0aW9uKHIsbixpKXt2YXIgbz1pfHx0KHIpLGE9by53YXRj
        aGluZzsxPT09YVtuXT8oYVtuXT0wLGUocixvKS5yZW1vdmUobikpOmFbbl0+
        MSYmYVtuXS0tfX0oKSxmdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSl7cmV0dXJu
        IioiPT09ZXx8IWMudGVzdChlKX12YXIgdD0oRW1iZXIubWV0YSxFbWJlci5H
        VUlEX0tFWSkscj1FbWJlci5NRVRBX0tFWSxuPUVtYmVyLnJlbW92ZUNoYWlu
        V2F0Y2hlcixpPUVtYmVyLndhdGNoS2V5LG89RW1iZXIudW53YXRjaEtleSxh
        PUVtYmVyLndhdGNoUGF0aCxzPUVtYmVyLnVud2F0Y2hQYXRoLHU9RW1iZXIu
        dHlwZU9mLGw9RW1iZXIuZ2VuZXJhdGVHdWlkLGM9L1tcLlwqXS87RW1iZXIu
        d2F0Y2g9ZnVuY3Rpb24odCxyLG4peygibGVuZ3RoIiE9PXJ8fCJhcnJheSIh
        PT11KHQpKSYmKGUocik/aSh0LHIsbik6YSh0LHIsbikpfSxFbWJlci5pc1dh
        dGNoaW5nPWZ1bmN0aW9uKGUsdCl7dmFyIG49ZVtyXTtyZXR1cm4obiYmbi53
        YXRjaGluZ1t0XSk+MH0sRW1iZXIud2F0Y2guZmx1c2hQZW5kaW5nPUVtYmVy
        LmZsdXNoUGVuZGluZ0NoYWlucyxFbWJlci51bndhdGNoPWZ1bmN0aW9uKHQs
        cixuKXsoImxlbmd0aCIhPT1yfHwiYXJyYXkiIT09dSh0KSkmJihlKHIpP28o
        dCxyLG4pOnModCxyLG4pKX0sRW1iZXIucmV3YXRjaD1mdW5jdGlvbihlKXt2
        YXIgbj1lW3JdLGk9biYmbi5jaGFpbnM7dCBpbiBlJiYhZS5oYXNPd25Qcm9w
        ZXJ0eSh0KSYmbChlKSxpJiZpLnZhbHVlKCkhPT1lJiYobi5jaGFpbnM9aS5j
        b3B5KGUpKX07dmFyIGg9W107RW1iZXIuZGVzdHJveT1mdW5jdGlvbihlKXt2
        YXIgdCxpLG8sYSxzPWVbcl07aWYocyYmKGVbcl09bnVsbCx0PXMuY2hhaW5z
        KSlmb3IoaC5wdXNoKHQpO2gubGVuZ3RoPjA7KXtpZih0PWgucG9wKCksaT10
        Ll9jaGFpbnMpZm9yKG8gaW4gaSlpLmhhc093blByb3BlcnR5KG8pJiZoLnB1
        c2goaVtvXSk7dC5fd2F0Y2hpbmcmJihhPXQuX29iamVjdCxhJiZuKGEsdC5f
        a2V5LHQpKX19fSgpLGZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQpe3ZhciBy
        PWVbdF07cmV0dXJuIHI/ZS5oYXNPd25Qcm9wZXJ0eSh0KXx8KHI9ZVt0XT1o
        KHIpKTpyPWVbdF09e30scn1mdW5jdGlvbiB0KHQpe3JldHVybiBlKHQsImRl
        cHMiKX1mdW5jdGlvbiByKHIsbixpLG8pe3ZhciBhLHMsdSxsLGMsaD1yLl9k
        ZXBlbmRlbnRLZXlzO2lmKGgpZm9yKGE9dChvKSxzPTAsdT1oLmxlbmd0aDt1
        PnM7cysrKWw9aFtzXSxjPWUoYSxsKSxjW2ldPShjW2ldfHwwKSsxLGYobixs
        LG8pfWZ1bmN0aW9uIG4ocixuLGksbyl7dmFyIGEscyx1LGwsYyxoPXIuX2Rl
        cGVuZGVudEtleXM7aWYoaClmb3IoYT10KG8pLHM9MCx1PWgubGVuZ3RoO3U+
        cztzKyspbD1oW3NdLGM9ZShhLGwpLGNbaV09KGNbaV18fDApLTEscChuLGws
        byl9ZnVuY3Rpb24gaShlLHQpe3RoaXMuZnVuYz1lLHRoaXMuX2RlcGVuZGVu
        dEtleXM9dCYmdC5kZXBlbmRlbnRLZXlzLHRoaXMuX2NhY2hlYWJsZT10JiZ2
        b2lkIDAhPT10LmNhY2hlYWJsZT90LmNhY2hlYWJsZTohMCx0aGlzLl9yZWFk
        T25seT10JiYodm9pZCAwIT09dC5yZWFkT25seXx8ISF0LnJlYWRPbmx5KX1m
        dW5jdGlvbiBvKGUpe2Zvcih2YXIgdD0wLHI9ZS5sZW5ndGg7cj50O3QrKyll
        W3RdLmRpZENoYW5nZShudWxsKX1mdW5jdGlvbiBhKGUsdCl7Zm9yKHZhciBy
        PXt9LG49MDtuPHQubGVuZ3RoO24rKylyW3Rbbl1dPXMoZSx0W25dKTtyZXR1
        cm4gcn12YXIgcz1FbWJlci5nZXQsdT1FbWJlci5zZXQsbD1FbWJlci5tZXRh
        LGM9W10uc2xpY2UsaD1FbWJlci5jcmVhdGUsbT1FbWJlci5NRVRBX0tFWSxm
        PUVtYmVyLndhdGNoLHA9RW1iZXIudW53YXRjaCxkPUVtYmVyLmV4cGFuZFBy
        b3BlcnRpZXM7RW1iZXIuQ29tcHV0ZWRQcm9wZXJ0eT1pLGkucHJvdG90eXBl
        PW5ldyBFbWJlci5EZXNjcmlwdG9yO3ZhciBiPWkucHJvdG90eXBlO2IuY2Fj
        aGVhYmxlPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9jYWNoZWFibGU9ZSE9
        PSExLHRoaXN9LGIudm9sYXRpbGU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5j
        YWNoZWFibGUoITEpfSxiLnJlYWRPbmx5PWZ1bmN0aW9uKGUpe3JldHVybiB0
        aGlzLl9yZWFkT25seT12b2lkIDA9PT1lfHwhIWUsdGhpc30sYi5wcm9wZXJ0
        eT1mdW5jdGlvbigpe3ZhciBlLHQ9ZnVuY3Rpb24odCl7ZS5wdXNoKHQpfTtl
        PVtdO2Zvcih2YXIgcj0wLG49YXJndW1lbnRzLmxlbmd0aDtuPnI7cisrKWQo
        YXJndW1lbnRzW3JdLHQpO3JldHVybiB0aGlzLl9kZXBlbmRlbnRLZXlzPWUs
        dGhpc30sYi5tZXRhPWZ1bmN0aW9uKGUpe3JldHVybiAwPT09YXJndW1lbnRz
        Lmxlbmd0aD90aGlzLl9tZXRhfHx7fToodGhpcy5fbWV0YT1lLHRoaXMpfSxi
        LmRpZENoYW5nZT1mdW5jdGlvbihlLHQpe2lmKHRoaXMuX2NhY2hlYWJsZSYm
        dGhpcy5fc3VzcGVuZGVkIT09ZSl7dmFyIHI9bChlKTt0IGluIHIuY2FjaGUm
        JihkZWxldGUgci5jYWNoZVt0XSxuKHRoaXMsZSx0LHIpKX19LGIuZ2V0PWZ1
        bmN0aW9uKGUsdCl7dmFyIG4saSxhLHM7aWYodGhpcy5fY2FjaGVhYmxlKXtp
        ZihhPWwoZSksaT1hLmNhY2hlLHQgaW4gaSlyZXR1cm4gaVt0XTtuPWlbdF09
        dGhpcy5mdW5jLmNhbGwoZSx0KSxzPWEuY2hhaW5XYXRjaGVycyYmYS5jaGFp
        bldhdGNoZXJzW3RdLHMmJm8ocykscih0aGlzLGUsdCxhKX1lbHNlIG49dGhp
        cy5mdW5jLmNhbGwoZSx0KTtyZXR1cm4gbn0sYi5zZXQ9ZnVuY3Rpb24oZSx0
        LG4pe3ZhciBpLG8sYSxzPXRoaXMuX2NhY2hlYWJsZSx1PXRoaXMuZnVuYyxj
        PWwoZSxzKSxoPWMud2F0Y2hpbmdbdF0sbT10aGlzLl9zdXNwZW5kZWQsZj0h
        MSxwPWMuY2FjaGU7aWYodGhpcy5fcmVhZE9ubHkpdGhyb3cgbmV3IEVtYmVy
        LkVycm9yKCJDYW5ub3QgU2V0OiAiK3QrIiBvbjogIitFbWJlci5pbnNwZWN0
        KGUpKTt0aGlzLl9zdXNwZW5kZWQ9ZTt0cnl7aWYocyYmcC5oYXNPd25Qcm9w
        ZXJ0eSh0KSYmKG89cFt0XSxmPSEwKSxpPXUud3JhcHBlZEZ1bmN0aW9uP3Uu
        d3JhcHBlZEZ1bmN0aW9uLmxlbmd0aDp1Lmxlbmd0aCwzPT09aSlhPXUuY2Fs
        bChlLHQsbixvKTtlbHNle2lmKDIhPT1pKXJldHVybiBFbWJlci5kZWZpbmVQ
        cm9wZXJ0eShlLHQsbnVsbCxvKSxFbWJlci5zZXQoZSx0LG4pLHZvaWQgMDth
        PXUuY2FsbChlLHQsbil9aWYoZiYmbz09PWEpcmV0dXJuO2gmJkVtYmVyLnBy
        b3BlcnR5V2lsbENoYW5nZShlLHQpLGYmJmRlbGV0ZSBwW3RdLHMmJihmfHxy
        KHRoaXMsZSx0LGMpLHBbdF09YSksaCYmRW1iZXIucHJvcGVydHlEaWRDaGFu
        Z2UoZSx0KX1maW5hbGx5e3RoaXMuX3N1c3BlbmRlZD1tfXJldHVybiBhfSxi
        LnRlYXJkb3duPWZ1bmN0aW9uKGUsdCl7dmFyIHI9bChlKTtyZXR1cm4gdCBp
        biByLmNhY2hlJiZuKHRoaXMsZSx0LHIpLHRoaXMuX2NhY2hlYWJsZSYmZGVs
        ZXRlIHIuY2FjaGVbdF0sbnVsbH0sRW1iZXIuY29tcHV0ZWQ9ZnVuY3Rpb24o
        ZSl7dmFyIHQ7aWYoYXJndW1lbnRzLmxlbmd0aD4xJiYodD1jLmNhbGwoYXJn
        dW1lbnRzLDAsLTEpLGU9Yy5jYWxsKGFyZ3VtZW50cywtMSlbMF0pLCJmdW5j
        dGlvbiIhPXR5cGVvZiBlKXRocm93IG5ldyBFbWJlci5FcnJvcigiQ29tcHV0
        ZWQgUHJvcGVydHkgZGVjbGFyZWQgd2l0aG91dCBhIHByb3BlcnR5IGZ1bmN0
        aW9uIik7dmFyIHI9bmV3IGkoZSk7cmV0dXJuIHQmJnIucHJvcGVydHkuYXBw
        bHkocix0KSxyfSxFbWJlci5jYWNoZUZvcj1mdW5jdGlvbihlLHQpe3ZhciBy
        PWVbbV0sbj1yJiZyLmNhY2hlO3JldHVybiBuJiZ0IGluIG4/blt0XTp2b2lk
        IDB9O3ZhciB2LEU7dj1mdW5jdGlvbihlLHQpe0VtYmVyLmNvbXB1dGVkW2Vd
        PWZ1bmN0aW9uKGUpe3ZhciByPWMuY2FsbChhcmd1bWVudHMpO3JldHVybiBF
        bWJlci5jb21wdXRlZChlLGZ1bmN0aW9uKCl7cmV0dXJuIHQuYXBwbHkodGhp
        cyxyKX0pfX0sRT1mdW5jdGlvbihlLHQpe0VtYmVyLmNvbXB1dGVkW2VdPWZ1
        bmN0aW9uKCl7dmFyIGU9Yy5jYWxsKGFyZ3VtZW50cykscj1FbWJlci5jb21w
        dXRlZChmdW5jdGlvbigpe3JldHVybiB0LmFwcGx5KHRoaXMsW2EodGhpcyxl
        KV0pfSk7cmV0dXJuIHIucHJvcGVydHkuYXBwbHkocixlKX19LHYoImVtcHR5
        IixmdW5jdGlvbihlKXtyZXR1cm4gRW1iZXIuaXNFbXB0eShzKHRoaXMsZSkp
        fSksdigibm90RW1wdHkiLGZ1bmN0aW9uKGUpe3JldHVybiFFbWJlci5pc0Vt
        cHR5KHModGhpcyxlKSl9KSx2KCJub25lIixmdW5jdGlvbihlKXtyZXR1cm4g
        RW1iZXIuaXNOb25lKHModGhpcyxlKSl9KSx2KCJub3QiLGZ1bmN0aW9uKGUp
        e3JldHVybiFzKHRoaXMsZSl9KSx2KCJib29sIixmdW5jdGlvbihlKXtyZXR1
        cm4hIXModGhpcyxlKX0pLHYoIm1hdGNoIixmdW5jdGlvbihlLHQpe3ZhciBy
        PXModGhpcyxlKTtyZXR1cm4ic3RyaW5nIj09dHlwZW9mIHI/dC50ZXN0KHIp
        OiExfSksdigiZXF1YWwiLGZ1bmN0aW9uKGUsdCl7cmV0dXJuIHModGhpcyxl
        KT09PXR9KSx2KCJndCIsZnVuY3Rpb24oZSx0KXtyZXR1cm4gcyh0aGlzLGUp
        PnR9KSx2KCJndGUiLGZ1bmN0aW9uKGUsdCl7cmV0dXJuIHModGhpcyxlKT49
        dH0pLHYoImx0IixmdW5jdGlvbihlLHQpe3JldHVybiBzKHRoaXMsZSk8dH0p
        LHYoImx0ZSIsZnVuY3Rpb24oZSx0KXtyZXR1cm4gcyh0aGlzLGUpPD10fSks
        RSgiYW5kIixmdW5jdGlvbihlKXtmb3IodmFyIHQgaW4gZSlpZihlLmhhc093
        blByb3BlcnR5KHQpJiYhZVt0XSlyZXR1cm4hMTtyZXR1cm4hMH0pLEUoIm9y
        IixmdW5jdGlvbihlKXtmb3IodmFyIHQgaW4gZSlpZihlLmhhc093blByb3Bl
        cnR5KHQpJiZlW3RdKXJldHVybiEwO3JldHVybiExfSksRSgiYW55IixmdW5j
        dGlvbihlKXtmb3IodmFyIHQgaW4gZSlpZihlLmhhc093blByb3BlcnR5KHQp
        JiZlW3RdKXJldHVybiBlW3RdO3JldHVybiBudWxsfSksRSgiY29sbGVjdCIs
        ZnVuY3Rpb24oZSl7dmFyIHQ9W107Zm9yKHZhciByIGluIGUpZS5oYXNPd25Q
        cm9wZXJ0eShyKSYmKEVtYmVyLmlzTm9uZShlW3JdKT90LnB1c2gobnVsbCk6
        dC5wdXNoKGVbcl0pKTsKcmV0dXJuIHR9KSxFbWJlci5jb21wdXRlZC5hbGlh
        cz1mdW5jdGlvbihlKXtyZXR1cm4gRW1iZXIuY29tcHV0ZWQoZSxmdW5jdGlv
        bih0LHIpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPjE/KHUodGhpcyxlLHIp
        LHIpOnModGhpcyxlKX0pfSxFbWJlci5jb21wdXRlZC5vbmVXYXk9ZnVuY3Rp
        b24oZSl7cmV0dXJuIEVtYmVyLmNvbXB1dGVkKGUsZnVuY3Rpb24oKXtyZXR1
        cm4gcyh0aGlzLGUpfSl9LEVtYmVyLmNvbXB1dGVkLmRlZmF1bHRUbz1mdW5j
        dGlvbihlKXtyZXR1cm4gRW1iZXIuY29tcHV0ZWQoZnVuY3Rpb24odCxyLG4p
        e3JldHVybiAxPT09YXJndW1lbnRzLmxlbmd0aD9udWxsIT1uP246cyh0aGlz
        LGUpOm51bGwhPXI/cjpzKHRoaXMsZSl9KX19KCksZnVuY3Rpb24oKXtmdW5j
        dGlvbiBlKGUpe3JldHVybiBlK3J9ZnVuY3Rpb24gdChlKXtyZXR1cm4gZStu
        fXZhciByPSI6Y2hhbmdlIixuPSI6YmVmb3JlIjtFbWJlci5hZGRPYnNlcnZl
        cj1mdW5jdGlvbih0LHIsbixpKXtyZXR1cm4gRW1iZXIuYWRkTGlzdGVuZXIo
        dCxlKHIpLG4saSksRW1iZXIud2F0Y2godCxyKSx0aGlzfSxFbWJlci5vYnNl
        cnZlcnNGb3I9ZnVuY3Rpb24odCxyKXtyZXR1cm4gRW1iZXIubGlzdGVuZXJz
        Rm9yKHQsZShyKSl9LEVtYmVyLnJlbW92ZU9ic2VydmVyPWZ1bmN0aW9uKHQs
        cixuLGkpe3JldHVybiBFbWJlci51bndhdGNoKHQsciksRW1iZXIucmVtb3Zl
        TGlzdGVuZXIodCxlKHIpLG4saSksdGhpc30sRW1iZXIuYWRkQmVmb3JlT2Jz
        ZXJ2ZXI9ZnVuY3Rpb24oZSxyLG4saSl7cmV0dXJuIEVtYmVyLmFkZExpc3Rl
        bmVyKGUsdChyKSxuLGkpLEVtYmVyLndhdGNoKGUsciksdGhpc30sRW1iZXIu
        X3N1c3BlbmRCZWZvcmVPYnNlcnZlcj1mdW5jdGlvbihlLHIsbixpLG8pe3Jl
        dHVybiBFbWJlci5fc3VzcGVuZExpc3RlbmVyKGUsdChyKSxuLGksbyl9LEVt
        YmVyLl9zdXNwZW5kT2JzZXJ2ZXI9ZnVuY3Rpb24odCxyLG4saSxvKXtyZXR1
        cm4gRW1iZXIuX3N1c3BlbmRMaXN0ZW5lcih0LGUociksbixpLG8pfTt2YXIg
        aT1FbWJlci5BcnJheVBvbHlmaWxscy5tYXA7RW1iZXIuX3N1c3BlbmRCZWZv
        cmVPYnNlcnZlcnM9ZnVuY3Rpb24oZSxyLG4sbyxhKXt2YXIgcz1pLmNhbGwo
        cix0KTtyZXR1cm4gRW1iZXIuX3N1c3BlbmRMaXN0ZW5lcnMoZSxzLG4sbyxh
        KX0sRW1iZXIuX3N1c3BlbmRPYnNlcnZlcnM9ZnVuY3Rpb24odCxyLG4sbyxh
        KXt2YXIgcz1pLmNhbGwocixlKTtyZXR1cm4gRW1iZXIuX3N1c3BlbmRMaXN0
        ZW5lcnModCxzLG4sbyxhKX0sRW1iZXIuYmVmb3JlT2JzZXJ2ZXJzRm9yPWZ1
        bmN0aW9uKGUscil7cmV0dXJuIEVtYmVyLmxpc3RlbmVyc0ZvcihlLHQocikp
        fSxFbWJlci5yZW1vdmVCZWZvcmVPYnNlcnZlcj1mdW5jdGlvbihlLHIsbixp
        KXtyZXR1cm4gRW1iZXIudW53YXRjaChlLHIpLEVtYmVyLnJlbW92ZUxpc3Rl
        bmVyKGUsdChyKSxuLGkpLHRoaXN9fSgpLGZ1bmN0aW9uKCl7ZSgiYmFja2J1
        cm5lci9xdWV1ZSIsWyJleHBvcnRzIl0sZnVuY3Rpb24oZSl7InVzZSBzdHJp
        Y3QiO2Z1bmN0aW9uIHQoZSx0LHIpe3RoaXMuZGFxPWUsdGhpcy5uYW1lPXQs
        dGhpcy5vcHRpb25zPXIsdGhpcy5fcXVldWU9W119dC5wcm90b3R5cGU9e2Rh
        cTpudWxsLG5hbWU6bnVsbCxvcHRpb25zOm51bGwsX3F1ZXVlOm51bGwscHVz
        aDpmdW5jdGlvbihlLHQscixuKXt2YXIgaT10aGlzLl9xdWV1ZTtyZXR1cm4g
        aS5wdXNoKGUsdCxyLG4pLHtxdWV1ZTp0aGlzLHRhcmdldDplLG1ldGhvZDp0
        fX0scHVzaFVuaXF1ZTpmdW5jdGlvbihlLHQscixuKXt2YXIgaSxvLGEscyx1
        PXRoaXMuX3F1ZXVlO2ZvcihhPTAscz11Lmxlbmd0aDtzPmE7YSs9NClpZihp
        PXVbYV0sbz11W2ErMV0saT09PWUmJm89PT10KXJldHVybiB1W2ErMl09cix1
        W2ErM109bix7cXVldWU6dGhpcyx0YXJnZXQ6ZSxtZXRob2Q6dH07cmV0dXJu
        IHRoaXMuX3F1ZXVlLnB1c2goZSx0LHIsbikse3F1ZXVlOnRoaXMsdGFyZ2V0
        OmUsbWV0aG9kOnR9fSxmbHVzaDpmdW5jdGlvbigpe3ZhciBlLHQscixuLGks
        bz10aGlzLl9xdWV1ZSxhPXRoaXMub3B0aW9ucyxzPWEmJmEuYmVmb3JlLHU9
        YSYmYS5hZnRlcixsPW8ubGVuZ3RoO2ZvcihsJiZzJiZzKCksaT0wO2w+aTtp
        Kz00KWU9b1tpXSx0PW9baSsxXSxyPW9baSsyXSxuPW9baSszXSxyJiZyLmxl
        bmd0aD4wP3QuYXBwbHkoZSxyKTp0LmNhbGwoZSk7bCYmdSYmdSgpLG8ubGVu
        Z3RoPmw/KHRoaXMuX3F1ZXVlPW8uc2xpY2UobCksdGhpcy5mbHVzaCgpKTp0
        aGlzLl9xdWV1ZS5sZW5ndGg9MH0sY2FuY2VsOmZ1bmN0aW9uKGUpe3ZhciB0
        LHIsbixpLG89dGhpcy5fcXVldWU7Zm9yKG49MCxpPW8ubGVuZ3RoO2k+bjtu
        Kz00KWlmKHQ9b1tuXSxyPW9bbisxXSx0PT09ZS50YXJnZXQmJnI9PT1lLm1l
        dGhvZClyZXR1cm4gby5zcGxpY2Uobiw0KSwhMDtpZihvPXRoaXMuX3F1ZXVl
        QmVpbmdGbHVzaGVkKWZvcihuPTAsaT1vLmxlbmd0aDtpPm47bis9NClpZih0
        PW9bbl0scj1vW24rMV0sdD09PWUudGFyZ2V0JiZyPT09ZS5tZXRob2QpcmV0
        dXJuIG9bbisxXT1udWxsLCEwfX0sZS5RdWV1ZT10fSksZSgiYmFja2J1cm5l
        ci9kZWZlcnJlZF9hY3Rpb25fcXVldWVzIixbImJhY2tidXJuZXIvcXVldWUi
        LCJleHBvcnRzIl0sZnVuY3Rpb24oZSx0KXsidXNlIHN0cmljdCI7ZnVuY3Rp
        b24gcihlLHQpe3ZhciByPXRoaXMucXVldWVzPXt9O3RoaXMucXVldWVOYW1l
        cz1lPWV8fFtdO2Zvcih2YXIgbixvPTAsYT1lLmxlbmd0aDthPm87bysrKW49
        ZVtvXSxyW25dPW5ldyBpKHRoaXMsbix0W25dKX1mdW5jdGlvbiBuKGUsdCl7
        Zm9yKHZhciByLG4saT0wLG89dDtvPj1pO2krKylpZihyPWUucXVldWVOYW1l
        c1tpXSxuPWUucXVldWVzW3JdLG4uX3F1ZXVlLmxlbmd0aClyZXR1cm4gaTty
        ZXR1cm4tMX12YXIgaT1lLlF1ZXVlO3IucHJvdG90eXBlPXtxdWV1ZU5hbWVz
        Om51bGwscXVldWVzOm51bGwsc2NoZWR1bGU6ZnVuY3Rpb24oZSx0LHIsbixp
        LG8pe3ZhciBhPXRoaXMucXVldWVzLHM9YVtlXTtpZighcyl0aHJvdyBuZXcg
        RXJyb3IoIllvdSBhdHRlbXB0ZWQgdG8gc2NoZWR1bGUgYW4gYWN0aW9uIGlu
        IGEgcXVldWUgKCIrZSsiKSB0aGF0IGRvZXNuJ3QgZXhpc3QiKTtyZXR1cm4g
        aT9zLnB1c2hVbmlxdWUodCxyLG4sbyk6cy5wdXNoKHQscixuLG8pfSxmbHVz
        aDpmdW5jdGlvbigpe2Zvcih2YXIgZSx0LHIsaSxvPXRoaXMucXVldWVzLGE9
        dGhpcy5xdWV1ZU5hbWVzLHM9MCx1PWEubGVuZ3RoO3U+czspe2U9YVtzXSx0
        PW9bZV0scj10Ll9xdWV1ZUJlaW5nRmx1c2hlZD10Ll9xdWV1ZS5zbGljZSgp
        LHQuX3F1ZXVlPVtdO3ZhciBsLGMsaCxtLGY9dC5vcHRpb25zLHA9ZiYmZi5i
        ZWZvcmUsZD1mJiZmLmFmdGVyLGI9MCx2PXIubGVuZ3RoO2Zvcih2JiZwJiZw
        KCk7dj5iOylsPXJbYl0sYz1yW2IrMV0saD1yW2IrMl0sbT1yW2IrM10sInN0
        cmluZyI9PXR5cGVvZiBjJiYoYz1sW2NdKSxjJiYoaCYmaC5sZW5ndGg+MD9j
        LmFwcGx5KGwsaCk6Yy5jYWxsKGwpKSxiKz00O3QuX3F1ZXVlQmVpbmdGbHVz
        aGVkPW51bGwsdiYmZCYmZCgpLC0xPT09KGk9bih0aGlzLHMpKT9zKys6cz1p
        fX19LHQuRGVmZXJyZWRBY3Rpb25RdWV1ZXM9cn0pLGUoImJhY2tidXJuZXIi
        LFsiYmFja2J1cm5lci9kZWZlcnJlZF9hY3Rpb25fcXVldWVzIiwiZXhwb3J0
        cyJdLGZ1bmN0aW9uKGUsdCl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIHIoZSl7
        cmV0dXJuIm51bWJlciI9PXR5cGVvZiBlfHxnLnRlc3QoZSl9ZnVuY3Rpb24g
        bihlLHQpe3RoaXMucXVldWVOYW1lcz1lLHRoaXMub3B0aW9ucz10fHx7fSx0
        aGlzLm9wdGlvbnMuZGVmYXVsdFF1ZXVlfHwodGhpcy5vcHRpb25zLmRlZmF1
        bHRRdWV1ZT1lWzBdKSx0aGlzLmluc3RhbmNlU3RhY2s9W119ZnVuY3Rpb24g
        aShlKXtlLmJlZ2luKCksbD1FLnNldFRpbWVvdXQoZnVuY3Rpb24oKXtsPW51
        bGwsZS5lbmQoKX0pfWZ1bmN0aW9uIG8oZSx0LHIpeyghY3x8aD50KSYmKGMm
        JmNsZWFyVGltZW91dChjKSxjPUUuc2V0VGltZW91dChmdW5jdGlvbigpe2M9
        bnVsbCxoPW51bGwsYShlKX0sciksaD10KX1mdW5jdGlvbiBhKGUpe3ZhciB0
        LHIsbixpLGE9K25ldyBEYXRlO2UucnVuKGZ1bmN0aW9uKCl7Zm9yKG49MCxp
        PXYubGVuZ3RoO2k+biYmKHQ9dltuXSwhKHQ+YSkpO24rPTIpO2ZvcihyPXYu
        c3BsaWNlKDAsbiksbj0xLGk9ci5sZW5ndGg7aT5uO24rPTIpZS5zY2hlZHVs
        ZShlLm9wdGlvbnMuZGVmYXVsdFF1ZXVlLG51bGwscltuXSl9KSx2Lmxlbmd0
        aCYmbyhlLHZbMF0sdlswXS1hKX1mdW5jdGlvbiBzKGUsdCl7Zm9yKHZhciBy
        LG49LTEsaT0wLG89Yi5sZW5ndGg7bz5pO2krKylpZihyPWJbaV0sclswXT09
        PWUmJnJbMV09PT10KXtuPWk7YnJlYWt9cmV0dXJuIG59ZnVuY3Rpb24gdShl
        LHQpe2Zvcih2YXIgcixuPS0xLGk9MCxvPWQubGVuZ3RoO28+aTtpKyspaWYo
        cj1kW2ldLHJbMF09PT1lJiZyWzFdPT09dCl7bj1pO2JyZWFrfXJldHVybiBu
        fXZhciBsLGMsaCxtPWUuRGVmZXJyZWRBY3Rpb25RdWV1ZXMsZj1bXS5zbGlj
        ZSxwPVtdLnBvcCxkPVtdLGI9W10sdj1bXSxFPXRoaXMsZz0vXGQrLztuLnBy
        b3RvdHlwZT17cXVldWVOYW1lczpudWxsLG9wdGlvbnM6bnVsbCxjdXJyZW50
        SW5zdGFuY2U6bnVsbCxpbnN0YW5jZVN0YWNrOm51bGwsYmVnaW46ZnVuY3Rp
        b24oKXt2YXIgZT10aGlzLm9wdGlvbnMmJnRoaXMub3B0aW9ucy5vbkJlZ2lu
        LHQ9dGhpcy5jdXJyZW50SW5zdGFuY2U7dCYmdGhpcy5pbnN0YW5jZVN0YWNr
        LnB1c2godCksdGhpcy5jdXJyZW50SW5zdGFuY2U9bmV3IG0odGhpcy5xdWV1
        ZU5hbWVzLHRoaXMub3B0aW9ucyksZSYmZSh0aGlzLmN1cnJlbnRJbnN0YW5j
        ZSx0KX0sZW5kOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vcHRpb25zJiZ0aGlz
        Lm9wdGlvbnMub25FbmQsdD10aGlzLmN1cnJlbnRJbnN0YW5jZSxyPW51bGw7
        dHJ5e3QuZmx1c2goKX1maW5hbGx5e3RoaXMuY3VycmVudEluc3RhbmNlPW51
        bGwsdGhpcy5pbnN0YW5jZVN0YWNrLmxlbmd0aCYmKHI9dGhpcy5pbnN0YW5j
        ZVN0YWNrLnBvcCgpLHRoaXMuY3VycmVudEluc3RhbmNlPXIpLGUmJmUodCxy
        KX19LHJ1bjpmdW5jdGlvbihlLHQpe3ZhciByO3RoaXMuYmVnaW4oKSx0fHwo
        dD1lLGU9bnVsbCksInN0cmluZyI9PXR5cGVvZiB0JiYodD1lW3RdKTt2YXIg
        bj0hMTt0cnl7cj1hcmd1bWVudHMubGVuZ3RoPjI/dC5hcHBseShlLGYuY2Fs
        bChhcmd1bWVudHMsMikpOnQuY2FsbChlKX1maW5hbGx5e258fChuPSEwLHRo
        aXMuZW5kKCkpfXJldHVybiByfSxkZWZlcjpmdW5jdGlvbihlLHQscil7cnx8
        KHI9dCx0PW51bGwpLCJzdHJpbmciPT10eXBlb2YgciYmKHI9dFtyXSk7dmFy
        IG49dGhpcy5ERUJVRz9uZXcgRXJyb3I6dm9pZCAwLG89YXJndW1lbnRzLmxl
        bmd0aD4zP2YuY2FsbChhcmd1bWVudHMsMyk6dm9pZCAwO3JldHVybiB0aGlz
        LmN1cnJlbnRJbnN0YW5jZXx8aSh0aGlzKSx0aGlzLmN1cnJlbnRJbnN0YW5j
        ZS5zY2hlZHVsZShlLHQscixvLCExLG4pfSxkZWZlck9uY2U6ZnVuY3Rpb24o
        ZSx0LHIpe3J8fChyPXQsdD1udWxsKSwic3RyaW5nIj09dHlwZW9mIHImJihy
        PXRbcl0pO3ZhciBuPXRoaXMuREVCVUc/bmV3IEVycm9yOnZvaWQgMCxvPWFy
        Z3VtZW50cy5sZW5ndGg+Mz9mLmNhbGwoYXJndW1lbnRzLDMpOnZvaWQgMDty
        ZXR1cm4gdGhpcy5jdXJyZW50SW5zdGFuY2V8fGkodGhpcyksdGhpcy5jdXJy
        ZW50SW5zdGFuY2Uuc2NoZWR1bGUoZSx0LHIsbywhMCxuKX0sc2V0VGltZW91
        dDpmdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt0LmFwcGx5KGksbCl9dmFyIHQs
        bixpLGEscyx1LGw9Zi5jYWxsKGFyZ3VtZW50cyksYz1sLmxlbmd0aCxoPXRo
        aXM7aWYoMCE9PWMpe2lmKDE9PT1jKXQ9bC5zaGlmdCgpLG49MDtlbHNlIGlm
        KDI9PT1jKWE9bFswXSxzPWxbMV0sImZ1bmN0aW9uIj09dHlwZW9mIHN8fCJm
        dW5jdGlvbiI9PXR5cGVvZiBhW3NdPyhpPWwuc2hpZnQoKSx0PWwuc2hpZnQo
        KSxuPTApOnIocyk/KHQ9bC5zaGlmdCgpLG49bC5zaGlmdCgpKToodD1sLnNo
        aWZ0KCksbj0wKTtlbHNle3ZhciBtPWxbbC5sZW5ndGgtMV07cihtKSYmKG49
        bC5wb3AoKSksYT1sWzBdLHU9bFsxXSwiZnVuY3Rpb24iPT10eXBlb2YgdXx8
        InN0cmluZyI9PXR5cGVvZiB1JiZudWxsIT09YSYmdSBpbiBhPyhpPWwuc2hp
        ZnQoKSx0PWwuc2hpZnQoKSk6dD1sLnNoaWZ0KCl9dmFyIHA9K25ldyBEYXRl
        K3BhcnNlSW50KG4sMTApOyJzdHJpbmciPT10eXBlb2YgdCYmKHQ9aVt0XSk7
        dmFyIGQsYjtmb3IoZD0wLGI9di5sZW5ndGg7Yj5kJiYhKHA8dltkXSk7ZCs9
        Mik7cmV0dXJuIHYuc3BsaWNlKGQsMCxwLGUpLG8oaCxwLG4pLGV9fSx0aHJv
        dHRsZTpmdW5jdGlvbihlLHQpe3ZhciByLG4saSxvPXRoaXMsYT1hcmd1bWVu
        dHMscz1wYXJzZUludChwLmNhbGwoYSksMTApO3JldHVybiBuPXUoZSx0KSxu
        Pi0xP2Rbbl06KGk9RS5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7by5ydW4uYXBw
        bHkobyxhKTt2YXIgcj11KGUsdCk7cj4tMSYmZC5zcGxpY2UociwxKX0scyks
        cj1bZSx0LGldLGQucHVzaChyKSxyKX0sZGVib3VuY2U6ZnVuY3Rpb24oZSx0
        KXt2YXIgcixuLGksbyxhPXRoaXMsdT1hcmd1bWVudHMsbD1wLmNhbGwodSk7
        cmV0dXJuIm51bWJlciI9PXR5cGVvZiBsfHwic3RyaW5nIj09dHlwZW9mIGw/
        KHI9bCxsPSExKTpyPXAuY2FsbCh1KSxyPXBhcnNlSW50KHIsMTApLG49cyhl
        LHQpLG4+LTEmJihpPWJbbl0sYi5zcGxpY2UobiwxKSxjbGVhclRpbWVvdXQo
        aVsyXSkpLG89RS5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7bHx8YS5ydW4uYXBw
        bHkoYSx1KTt2YXIgcj1zKGUsdCk7cj4tMSYmYi5zcGxpY2UociwxKX0sciks
        bCYmLTE9PT1uJiZhLnJ1bi5hcHBseShhLHUpLGk9W2UsdCxvXSxiLnB1c2go
        aSksaX0sY2FuY2VsVGltZXJzOmZ1bmN0aW9uKCl7dmFyIGUsdDtmb3IoZT0w
        LHQ9ZC5sZW5ndGg7dD5lO2UrKyljbGVhclRpbWVvdXQoZFtlXVsyXSk7Zm9y
        KGQ9W10sZT0wLHQ9Yi5sZW5ndGg7dD5lO2UrKyljbGVhclRpbWVvdXQoYltl
        XVsyXSk7Yj1bXSxjJiYoY2xlYXJUaW1lb3V0KGMpLGM9bnVsbCksdj1bXSxs
        JiYoY2xlYXJUaW1lb3V0KGwpLGw9bnVsbCl9LGhhc1RpbWVyczpmdW5jdGlv
        bigpe3JldHVybiEhdi5sZW5ndGh8fGx9LGNhbmNlbDpmdW5jdGlvbihlKXt2
        YXIgdD10eXBlb2YgZTtpZihlJiYib2JqZWN0Ij09PXQmJmUucXVldWUmJmUu
        bWV0aG9kKXJldHVybiBlLnF1ZXVlLmNhbmNlbChlKTtpZigiZnVuY3Rpb24i
        IT09dClyZXR1cm4iW29iamVjdCBBcnJheV0iPT09T2JqZWN0LnByb3RvdHlw
        ZS50b1N0cmluZy5jYWxsKGUpP3RoaXMuX2NhbmNlbEl0ZW0odSxkLGUpfHx0
        aGlzLl9jYW5jZWxJdGVtKHMsYixlKTp2b2lkIDA7Zm9yKHZhciByPTAsbj12
        Lmxlbmd0aDtuPnI7cis9MilpZih2W3IrMV09PT1lKXJldHVybiB2LnNwbGlj
        ZShyLDIpLCEwfSxfY2FuY2VsSXRlbTpmdW5jdGlvbihlLHQscil7dmFyIG4s
        aTtyZXR1cm4gci5sZW5ndGg8Mz8hMTooaT1lKHJbMF0sclsxXSksaT4tMSYm
        KG49dFtpXSxuWzJdPT09clsyXSk/KHQuc3BsaWNlKGksMSksY2xlYXJUaW1l
        b3V0KHJbMl0pLCEwKTohMSl9fSxuLnByb3RvdHlwZS5zY2hlZHVsZT1uLnBy
        b3RvdHlwZS5kZWZlcixuLnByb3RvdHlwZS5zY2hlZHVsZU9uY2U9bi5wcm90
        b3R5cGUuZGVmZXJPbmNlLG4ucHJvdG90eXBlLmxhdGVyPW4ucHJvdG90eXBl
        LnNldFRpbWVvdXQsdC5CYWNrYnVybmVyPW59KX0oKSxmdW5jdGlvbigpe2Z1
        bmN0aW9uIGUoKXshRW1iZXIucnVuLmN1cnJlbnRSdW5Mb29wfXt2YXIgcj1m
        dW5jdGlvbihlKXtFbWJlci5ydW4uY3VycmVudFJ1bkxvb3A9ZX0sbj1mdW5j
        dGlvbihlLHQpe0VtYmVyLnJ1bi5jdXJyZW50UnVuTG9vcD10fSxpPXQoImJh
        Y2tidXJuZXIiKS5CYWNrYnVybmVyLG89bmV3IGkoWyJzeW5jIiwiYWN0aW9u
        cyIsImRlc3Ryb3kiXSx7c3luYzp7YmVmb3JlOkVtYmVyLmJlZ2luUHJvcGVy
        dHlDaGFuZ2VzLGFmdGVyOkVtYmVyLmVuZFByb3BlcnR5Q2hhbmdlc30sZGVm
        YXVsdFF1ZXVlOiJhY3Rpb25zIixvbkJlZ2luOnIsb25FbmQ6bn0pLGE9W10u
        c2xpY2U7W10uY29uY2F0fUVtYmVyLnJ1bj1mdW5jdGlvbigpe3ZhciBlO2lm
        KEVtYmVyLm9uZXJyb3IpdHJ5e2U9by5ydW4uYXBwbHkobyxhcmd1bWVudHMp
        fWNhdGNoKHQpe0VtYmVyLm9uZXJyb3IodCl9ZWxzZSBlPW8ucnVuLmFwcGx5
        KG8sYXJndW1lbnRzKTtyZXR1cm4gZX0sRW1iZXIucnVuLmpvaW49ZnVuY3Rp
        b24oKXtpZighRW1iZXIucnVuLmN1cnJlbnRSdW5Mb29wKXJldHVybiBFbWJl
        ci5ydW4uYXBwbHkoRW1iZXIucnVuLGFyZ3VtZW50cyk7dmFyIGU9YS5jYWxs
        KGFyZ3VtZW50cyk7ZS51bnNoaWZ0KCJhY3Rpb25zIiksRW1iZXIucnVuLnNj
        aGVkdWxlLmFwcGx5KEVtYmVyLnJ1bixlKX0sRW1iZXIucnVuLmJpbmQ9ZnVu
        Y3Rpb24oKXt2YXIgZT1hcmd1bWVudHM7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0
        dXJuIEVtYmVyLnJ1bi5qb2luLmFwcGx5KEVtYmVyLnJ1bixlKX19LEVtYmVy
        LnJ1bi5iYWNrYnVybmVyPW87RW1iZXIucnVuO0VtYmVyLnJ1bi5jdXJyZW50
        UnVuTG9vcD1udWxsLEVtYmVyLnJ1bi5xdWV1ZXM9by5xdWV1ZU5hbWVzLEVt
        YmVyLnJ1bi5iZWdpbj1mdW5jdGlvbigpe28uYmVnaW4oKX0sRW1iZXIucnVu
        LmVuZD1mdW5jdGlvbigpe28uZW5kKCl9LEVtYmVyLnJ1bi5zY2hlZHVsZT1m
        dW5jdGlvbigpe2UoKSxvLnNjaGVkdWxlLmFwcGx5KG8sYXJndW1lbnRzKX0s
        RW1iZXIucnVuLmhhc1NjaGVkdWxlZFRpbWVycz1mdW5jdGlvbigpe3JldHVy
        biBvLmhhc1RpbWVycygpfSxFbWJlci5ydW4uY2FuY2VsVGltZXJzPWZ1bmN0
        aW9uKCl7by5jYW5jZWxUaW1lcnMoKX0sRW1iZXIucnVuLnN5bmM9ZnVuY3Rp
        b24oKXtvLmN1cnJlbnRJbnN0YW5jZSYmby5jdXJyZW50SW5zdGFuY2UucXVl
        dWVzLnN5bmMuZmx1c2goKX0sRW1iZXIucnVuLmxhdGVyPWZ1bmN0aW9uKCl7
        cmV0dXJuIG8ubGF0ZXIuYXBwbHkobyxhcmd1bWVudHMpfSxFbWJlci5ydW4u
        b25jZT1mdW5jdGlvbigpe2UoKTt2YXIgdD1hLmNhbGwoYXJndW1lbnRzKTty
        ZXR1cm4gdC51bnNoaWZ0KCJhY3Rpb25zIiksby5zY2hlZHVsZU9uY2UuYXBw
        bHkobyx0KX0sRW1iZXIucnVuLnNjaGVkdWxlT25jZT1mdW5jdGlvbigpe3Jl
        dHVybiBlKCksby5zY2hlZHVsZU9uY2UuYXBwbHkobyxhcmd1bWVudHMpfSxF
        bWJlci5ydW4ubmV4dD1mdW5jdGlvbigpe3ZhciBlPWEuY2FsbChhcmd1bWVu
        dHMpO3JldHVybiBlLnB1c2goMSksby5sYXRlci5hcHBseShvLGUpfSxFbWJl
        ci5ydW4uY2FuY2VsPWZ1bmN0aW9uKGUpe3JldHVybiBvLmNhbmNlbChlKX0s
        RW1iZXIucnVuLmRlYm91bmNlPWZ1bmN0aW9uKCl7cmV0dXJuIG8uZGVib3Vu
        Y2UuYXBwbHkobyxhcmd1bWVudHMpfSxFbWJlci5ydW4udGhyb3R0bGU9ZnVu
        Y3Rpb24oKXtyZXR1cm4gby50aHJvdHRsZS5hcHBseShvLGFyZ3VtZW50cyl9
        fSgpLGZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQpe3JldHVybiByKG8odCk/
        RW1iZXIubG9va3VwOmUsdCl9ZnVuY3Rpb24gdChlLHQpe2Zvcih2YXIgciBp
        biB0KXQuaGFzT3duUHJvcGVydHkocikmJihlW3JdPXRbcl0pfUVtYmVyLkxP
        R19CSU5ESU5HUz0hMXx8ISFFbWJlci5FTlYuTE9HX0JJTkRJTkdTO3ZhciBy
        PUVtYmVyLmdldCxuPShFbWJlci5zZXQsRW1iZXIuZ3VpZEZvciksaT0vXihb
        QS1aJF18KFswLTldW0EtWiRdKSkvLG89RW1iZXIuaXNHbG9iYWxQYXRoPWZ1
        bmN0aW9uKGUpe3JldHVybiBpLnRlc3QoZSl9LGE9ZnVuY3Rpb24oZSx0KXt0
        aGlzLl9kaXJlY3Rpb249ImZ3ZCIsdGhpcy5fZnJvbT10LHRoaXMuX3RvPWUs
        dGhpcy5fZGlyZWN0aW9uTWFwPUVtYmVyLk1hcC5jcmVhdGUoKX07YS5wcm90
        b3R5cGU9e2NvcHk6ZnVuY3Rpb24oKXt2YXIgZT1uZXcgYSh0aGlzLl90byx0
        aGlzLl9mcm9tKTtyZXR1cm4gdGhpcy5fb25lV2F5JiYoZS5fb25lV2F5PSEw
        KSxlfSxmcm9tOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9mcm9tPWUsdGhp
        c30sdG86ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX3RvPWUsdGhpc30sb25l
        V2F5OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29uZVdheT0hMCx0aGlzfSx0
        b1N0cmluZzpmdW5jdGlvbigpe3ZhciBlPXRoaXMuX29uZVdheT8iW29uZVdh
        eV0iOiIiO3JldHVybiJFbWJlci5CaW5kaW5nPCIrbih0aGlzKSsiPigiK3Ro
        aXMuX2Zyb20rIiAtPiAiK3RoaXMuX3RvKyIpIitlfSxjb25uZWN0OmZ1bmN0
        aW9uKHQpe3ZhciByPXRoaXMuX2Zyb20sbj10aGlzLl90bztyZXR1cm4gRW1i
        ZXIudHJ5U2V0KHQsbixlKHQscikpLEVtYmVyLmFkZE9ic2VydmVyKHQscix0
        aGlzLHRoaXMuZnJvbURpZENoYW5nZSksdGhpcy5fb25lV2F5fHxFbWJlci5h
        ZGRPYnNlcnZlcih0LG4sdGhpcyx0aGlzLnRvRGlkQ2hhbmdlKSx0aGlzLl9y
        ZWFkeVRvU3luYz0hMCx0aGlzfSxkaXNjb25uZWN0OmZ1bmN0aW9uKGUpe3Zh
        ciB0PSF0aGlzLl9vbmVXYXk7cmV0dXJuIEVtYmVyLnJlbW92ZU9ic2VydmVy
        KGUsdGhpcy5fZnJvbSx0aGlzLHRoaXMuZnJvbURpZENoYW5nZSksdCYmRW1i
        ZXIucmVtb3ZlT2JzZXJ2ZXIoZSx0aGlzLl90byx0aGlzLHRoaXMudG9EaWRD
        aGFuZ2UpLHRoaXMuX3JlYWR5VG9TeW5jPSExLHRoaXN9LGZyb21EaWRDaGFu
        Z2U6ZnVuY3Rpb24oZSl7dGhpcy5fc2NoZWR1bGVTeW5jKGUsImZ3ZCIpfSx0
        b0RpZENoYW5nZTpmdW5jdGlvbihlKXt0aGlzLl9zY2hlZHVsZVN5bmMoZSwi
        YmFjayIpfSxfc2NoZWR1bGVTeW5jOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhp
        cy5fZGlyZWN0aW9uTWFwLG49ci5nZXQoZSk7bnx8KEVtYmVyLnJ1bi5zY2hl
        ZHVsZSgic3luYyIsdGhpcyx0aGlzLl9zeW5jLGUpLHIuc2V0KGUsdCkpLCJi
        YWNrIj09PW4mJiJmd2QiPT09dCYmci5zZXQoZSwiZndkIil9LF9zeW5jOmZ1
        bmN0aW9uKHQpe3ZhciBuPUVtYmVyLkxPR19CSU5ESU5HUztpZighdC5pc0Rl
        c3Ryb3llZCYmdGhpcy5fcmVhZHlUb1N5bmMpe3ZhciBpPXRoaXMuX2RpcmVj
        dGlvbk1hcCxvPWkuZ2V0KHQpLGE9dGhpcy5fZnJvbSxzPXRoaXMuX3RvO2lm
        KGkucmVtb3ZlKHQpLCJmd2QiPT09byl7dmFyIHU9ZSh0LHRoaXMuX2Zyb20p
        O24mJkVtYmVyLkxvZ2dlci5sb2coIiAiLHRoaXMudG9TdHJpbmcoKSwiLT4i
        LHUsdCksdGhpcy5fb25lV2F5P0VtYmVyLnRyeVNldCh0LHMsdSk6RW1iZXIu
        X3N1c3BlbmRPYnNlcnZlcih0LHMsdGhpcyx0aGlzLnRvRGlkQ2hhbmdlLGZ1
        bmN0aW9uKCl7RW1iZXIudHJ5U2V0KHQscyx1KX0pfWVsc2UgaWYoImJhY2si
        PT09byl7dmFyIGw9cih0LHRoaXMuX3RvKTtuJiZFbWJlci5Mb2dnZXIubG9n
        KCIgIix0aGlzLnRvU3RyaW5nKCksIjwtIixsLHQpLEVtYmVyLl9zdXNwZW5k
        T2JzZXJ2ZXIodCxhLHRoaXMsdGhpcy5mcm9tRGlkQ2hhbmdlLGZ1bmN0aW9u
        KCl7RW1iZXIudHJ5U2V0KEVtYmVyLmlzR2xvYmFsUGF0aChhKT9FbWJlci5s
        b29rdXA6dCxhLGwpfSl9fX19LHQoYSx7ZnJvbTpmdW5jdGlvbigpe3ZhciBl
        PXRoaXMsdD1uZXcgZTtyZXR1cm4gdC5mcm9tLmFwcGx5KHQsYXJndW1lbnRz
        KX0sdG86ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9bmV3IGU7cmV0dXJuIHQu
        dG8uYXBwbHkodCxhcmd1bWVudHMpfSxvbmVXYXk6ZnVuY3Rpb24oZSx0KXt2
        YXIgcj10aGlzLG49bmV3IHIobnVsbCxlKTtyZXR1cm4gbi5vbmVXYXkodCl9
        fSksRW1iZXIuQmluZGluZz1hLEVtYmVyLmJpbmQ9ZnVuY3Rpb24oZSx0LHIp
        e3JldHVybiBuZXcgRW1iZXIuQmluZGluZyh0LHIpLmNvbm5lY3QoZSl9LEVt
        YmVyLm9uZVdheT1mdW5jdGlvbihlLHQscil7cmV0dXJuIG5ldyBFbWJlci5C
        aW5kaW5nKHQscikub25lV2F5KCkuY29ubmVjdChlKX19KCksZnVuY3Rpb24o
        KXtmdW5jdGlvbiBlKGUpe3ZhciB0PVMoZSwhMCkscj10Lm1peGlucztyZXR1
        cm4gcj90Lmhhc093blByb3BlcnR5KCJtaXhpbnMiKXx8KHI9dC5taXhpbnM9
        eChyKSk6cj10Lm1peGlucz17fSxyfWZ1bmN0aW9uIHQoZSx0KXtyZXR1cm4g
        dCYmdC5sZW5ndGg+MCYmKGUubWl4aW5zPUMuY2FsbCh0LGZ1bmN0aW9uKGUp
        e2lmKGUgaW5zdGFuY2VvZiB5KXJldHVybiBlO3ZhciB0PW5ldyB5O3JldHVy
        biB0LnByb3BlcnRpZXM9ZSx0fSkpLGV9ZnVuY3Rpb24gcihlKXtyZXR1cm4i
        ZnVuY3Rpb24iPT10eXBlb2YgZSYmZS5pc01ldGhvZCE9PSExJiZlIT09Qm9v
        bGVhbiYmZSE9PU9iamVjdCYmZSE9PU51bWJlciYmZSE9PUFycmF5JiZlIT09
        RGF0ZSYmZSE9PVN0cmluZ31mdW5jdGlvbiBuKGUsdCl7dmFyIHI7cmV0dXJu
        IHQgaW5zdGFuY2VvZiB5PyhyPVYodCksZVtyXT9SOihlW3JdPXQsdC5wcm9w
        ZXJ0aWVzKSk6dH1mdW5jdGlvbiBpKGUsdCxyLG4pe3ZhciBpO3JldHVybiBp
        PXJbZV18fG5bZV0sdFtlXSYmKGk9aT9pLmNvbmNhdCh0W2VdKTp0W2VdKSxp
        fWZ1bmN0aW9uIG8oZSx0LHIsbixpKXt2YXIgbztyZXR1cm4gdm9pZCAwPT09
        blt0XSYmKG89aVt0XSksbz1vfHxlLmRlc2NzW3RdLG8mJm8gaW5zdGFuY2Vv
        ZiBFbWJlci5Db21wdXRlZFByb3BlcnR5PyhyPXgociksci5mdW5jPUVtYmVy
        LndyYXAoci5mdW5jLG8uZnVuYykscik6cn1mdW5jdGlvbiBhKGUsdCxyLG4s
        aSl7dmFyIG87cmV0dXJuIHZvaWQgMD09PWlbdF0mJihvPW5bdF0pLG89b3x8
        ZVt0XSwiZnVuY3Rpb24iIT10eXBlb2Ygbz9yOkVtYmVyLndyYXAocixvKX1m
        dW5jdGlvbiBzKGUsdCxyLG4pe3ZhciBpPW5bdF18fGVbdF07cmV0dXJuIGk/
        ImZ1bmN0aW9uIj09dHlwZW9mIGkuY29uY2F0P2kuY29uY2F0KHIpOkVtYmVy
        Lm1ha2VBcnJheShpKS5jb25jYXQocik6RW1iZXIubWFrZUFycmF5KHIpfWZ1
        bmN0aW9uIHUoZSx0LG4saSl7dmFyIG89aVt0XXx8ZVt0XTtpZighbylyZXR1
        cm4gbjt2YXIgcz1FbWJlci5tZXJnZSh7fSxvKTtmb3IodmFyIHUgaW4gbilp
        ZihuLmhhc093blByb3BlcnR5KHUpKXt2YXIgbD1uW3VdO3NbdV09cihsKT9h
        KGUsdSxsLG8se30pOmx9cmV0dXJuIHN9ZnVuY3Rpb24gbChlLHQsbixpLGws
        YyxoLG0pe2lmKG4gaW5zdGFuY2VvZiBFbWJlci5EZXNjcmlwdG9yKXtpZihu
        PT09dyYmbFt0XSlyZXR1cm4gUjtuLmZ1bmMmJihuPW8oaSx0LG4sYyxsKSks
        bFt0XT1uLGNbdF09dm9pZCAwfWVsc2UgaCYmTy5jYWxsKGgsdCk+PTB8fCJj
        b25jYXRlbmF0ZWRQcm9wZXJ0aWVzIj09PXR8fCJtZXJnZWRQcm9wZXJ0aWVz
        Ij09PXQ/bj1zKGUsdCxuLGMpOm0mJk8uY2FsbChtLHQpPj0wP249dShlLHQs
        bixjKTpyKG4pJiYobj1hKGUsdCxuLGMsbCkpLGxbdF09dm9pZCAwLGNbdF09
        bn1mdW5jdGlvbiBjKGUsdCxyLG8sYSxzKXtmdW5jdGlvbiB1KGUpe2RlbGV0
        ZSByW2VdLGRlbGV0ZSBvW2VdfWZvcih2YXIgaCxtLGYscCxkLGIsdj0wLEU9
        ZS5sZW5ndGg7RT52O3YrKylpZihoPWVbdl0sbT1uKHQsaCksbSE9PVIpaWYo
        bSl7Yj1TKGEpLGEud2lsbE1lcmdlTWl4aW4mJmEud2lsbE1lcmdlTWl4aW4o
        bSkscD1pKCJjb25jYXRlbmF0ZWRQcm9wZXJ0aWVzIixtLG8sYSksZD1pKCJt
        ZXJnZWRQcm9wZXJ0aWVzIixtLG8sYSk7Zm9yKGYgaW4gbSltLmhhc093blBy
        b3BlcnR5KGYpJiYocy5wdXNoKGYpLGwoYSxmLG1bZl0sYixyLG8scCxkKSk7
        bS5oYXNPd25Qcm9wZXJ0eSgidG9TdHJpbmciKSYmKGEudG9TdHJpbmc9bS50
        b1N0cmluZyl9ZWxzZSBoLm1peGlucyYmKGMoaC5taXhpbnMsdCxyLG8sYSxz
        KSxoLl93aXRob3V0JiZBLmNhbGwoaC5fd2l0aG91dCx1KSl9ZnVuY3Rpb24g
        aChlLHQscixuKXtpZihELnRlc3QodCkpe3ZhciBpPW4uYmluZGluZ3M7aT9u
        Lmhhc093blByb3BlcnR5KCJiaW5kaW5ncyIpfHwoaT1uLmJpbmRpbmdzPXgo
        bi5iaW5kaW5ncykpOmk9bi5iaW5kaW5ncz17fSxpW3RdPXJ9fWZ1bmN0aW9u
        IG0oZSx0KXt2YXIgcixuLGksbz10LmJpbmRpbmdzO2lmKG8pe2ZvcihyIGlu
        IG8pbj1vW3JdLG4mJihpPXIuc2xpY2UoMCwtNyksbiBpbnN0YW5jZW9mIEVt
        YmVyLkJpbmRpbmc/KG49bi5jb3B5KCksbi50byhpKSk6bj1uZXcgRW1iZXIu
        QmluZGluZyhpLG4pLG4uY29ubmVjdChlKSxlW3JdPW4pO3QuYmluZGluZ3M9
        e319fWZ1bmN0aW9uIGYoZSx0KXtyZXR1cm4gbShlLHR8fFMoZSkpLGV9ZnVu
        Y3Rpb24gcChlLHQscixuLGkpe3ZhciBvLGE9dC5tZXRob2ROYW1lO3JldHVy
        biBuW2FdfHxpW2FdPyhvPWlbYV0sdD1uW2FdKTpyLmRlc2NzW2FdPyh0PXIu
        ZGVzY3NbYV0sbz12b2lkIDApOih0PXZvaWQgMCxvPWVbYV0pLHtkZXNjOnQs
        dmFsdWU6b319ZnVuY3Rpb24gZChlLHQscixuLGkpe3ZhciBvPXJbbl07aWYo
        bylmb3IodmFyIGE9MCxzPW8ubGVuZ3RoO3M+YTthKyspRW1iZXJbaV0oZSxv
        W2FdLG51bGwsdCl9ZnVuY3Rpb24gYihlLHQscil7dmFyIG49ZVt0XTsiZnVu
        Y3Rpb24iPT10eXBlb2YgbiYmKGQoZSx0LG4sIl9fZW1iZXJfb2JzZXJ2ZXNC
        ZWZvcmVfXyIsInJlbW92ZUJlZm9yZU9ic2VydmVyIiksZChlLHQsbiwiX19l
        bWJlcl9vYnNlcnZlc19fIiwicmVtb3ZlT2JzZXJ2ZXIiKSxkKGUsdCxuLCJf
        X2VtYmVyX2xpc3RlbnNfXyIsInJlbW92ZUxpc3RlbmVyIikpLCJmdW5jdGlv
        biI9PXR5cGVvZiByJiYoZChlLHQsciwiX19lbWJlcl9vYnNlcnZlc0JlZm9y
        ZV9fIiwiYWRkQmVmb3JlT2JzZXJ2ZXIiKSxkKGUsdCxyLCJfX2VtYmVyX29i
        c2VydmVzX18iLCJhZGRPYnNlcnZlciIpLGQoZSx0LHIsIl9fZW1iZXJfbGlz
        dGVuc19fIiwiYWRkTGlzdGVuZXIiKSl9ZnVuY3Rpb24gdih0LHIsbil7dmFy
        IGksbyxhLHM9e30sdT17fSxsPVModCksbT1bXTtjKHIsZSh0KSxzLHUsdCxt
        KTtmb3IodmFyIGQ9MCx2PW0ubGVuZ3RoO3Y+ZDtkKyspaWYoaT1tW2RdLCJj
        b25zdHJ1Y3RvciIhPT1pJiZ1Lmhhc093blByb3BlcnR5KGkpJiYoYT1zW2ld
        LG89dVtpXSxhIT09dykpe2Zvcig7YSYmYSBpbnN0YW5jZW9mIF87KXt2YXIg
        RT1wKHQsYSxsLHMsdSk7YT1FLmRlc2Msbz1FLnZhbHVlfSh2b2lkIDAhPT1h
        fHx2b2lkIDAhPT1vKSYmKGIodCxpLG8pLGgodCxpLG8sbCksVCh0LGksYSxv
        LGwpKX1yZXR1cm4gbnx8Zih0LGwpLHR9ZnVuY3Rpb24gRShlLHQscil7dmFy
        IG49VihlKTtpZihyW25dKXJldHVybiExO2lmKHJbbl09ITAsZT09PXQpcmV0
        dXJuITA7Zm9yKHZhciBpPWUubWl4aW5zLG89aT9pLmxlbmd0aDowOy0tbz49
        MDspaWYoRShpW29dLHQscikpcmV0dXJuITA7cmV0dXJuITF9ZnVuY3Rpb24g
        ZyhlLHQscil7aWYoIXJbVih0KV0paWYocltWKHQpXT0hMCx0LnByb3BlcnRp
        ZXMpe3ZhciBuPXQucHJvcGVydGllcztmb3IodmFyIGkgaW4gbiluLmhhc093
        blByb3BlcnR5KGkpJiYoZVtpXT0hMCl9ZWxzZSB0Lm1peGlucyYmQS5jYWxs
        KHQubWl4aW5zLGZ1bmN0aW9uKHQpe2coZSx0LHIpfSl9dmFyIHksdyxfLEM9
        RW1iZXIuQXJyYXlQb2x5ZmlsbHMubWFwLE89RW1iZXIuQXJyYXlQb2x5Zmls
        bHMuaW5kZXhPZixBPUVtYmVyLkFycmF5UG9seWZpbGxzLmZvckVhY2gsUD1b
        XS5zbGljZSx4PUVtYmVyLmNyZWF0ZSxUPUVtYmVyLmRlZmluZVByb3BlcnR5
        LFY9RW1iZXIuZ3VpZEZvcixTPUVtYmVyLm1ldGEsTj1FbWJlci5NRVRBX0tF
        WSxJPUVtYmVyLmV4cGFuZFByb3BlcnRpZXMsUj17fSxEPUVtYmVyLklTX0JJ
        TkRJTkc9L14uK0JpbmRpbmckLztFbWJlci5taXhpbj1mdW5jdGlvbihlKXt2
        YXIgdD1QLmNhbGwoYXJndW1lbnRzLDEpO3JldHVybiB2KGUsdCwhMSksZX0s
        RW1iZXIuTWl4aW49ZnVuY3Rpb24oKXtyZXR1cm4gdCh0aGlzLGFyZ3VtZW50
        cyl9LHk9RW1iZXIuTWl4aW4seS5wcm90b3R5cGU9e3Byb3BlcnRpZXM6bnVs
        bCxtaXhpbnM6bnVsbCxvd25lckNvbnN0cnVjdG9yOm51bGx9LHkuX2FwcGx5
        PXYseS5hcHBseVBhcnRpYWw9ZnVuY3Rpb24oZSl7dmFyIHQ9UC5jYWxsKGFy
        Z3VtZW50cywxKTtyZXR1cm4gdihlLHQsITApfSx5LmZpbmlzaFBhcnRpYWw9
        ZixFbWJlci5hbnlVbnByb2Nlc3NlZE1peGlucz0hMSx5LmNyZWF0ZT1mdW5j
        dGlvbigpe0VtYmVyLmFueVVucHJvY2Vzc2VkTWl4aW5zPSEwO3ZhciBlPXRo
        aXM7cmV0dXJuIHQobmV3IGUsYXJndW1lbnRzKX07dmFyIE09eS5wcm90b3R5
        cGU7TS5yZW9wZW49ZnVuY3Rpb24oKXt2YXIgZSx0O3RoaXMucHJvcGVydGll
        cz8oZT15LmNyZWF0ZSgpLGUucHJvcGVydGllcz10aGlzLnByb3BlcnRpZXMs
        ZGVsZXRlIHRoaXMucHJvcGVydGllcyx0aGlzLm1peGlucz1bZV0pOnRoaXMu
        bWl4aW5zfHwodGhpcy5taXhpbnM9W10pO3ZhciByLG49YXJndW1lbnRzLmxl
        bmd0aCxpPXRoaXMubWl4aW5zO2ZvcihyPTA7bj5yO3IrKyllPWFyZ3VtZW50
        c1tyXSxlIGluc3RhbmNlb2YgeT9pLnB1c2goZSk6KHQ9eS5jcmVhdGUoKSx0
        LnByb3BlcnRpZXM9ZSxpLnB1c2godCkpO3JldHVybiB0aGlzfSxNLmFwcGx5
        PWZ1bmN0aW9uKGUpe3JldHVybiB2KGUsW3RoaXNdLCExKX0sTS5hcHBseVBh
        cnRpYWw9ZnVuY3Rpb24oZSl7cmV0dXJuIHYoZSxbdGhpc10sITApfSxNLmRl
        dGVjdD1mdW5jdGlvbihlKXtpZighZSlyZXR1cm4hMTtpZihlIGluc3RhbmNl
        b2YgeSlyZXR1cm4gRShlLHRoaXMse30pO3ZhciB0PWVbTl0scj10JiZ0Lm1p
        eGlucztyZXR1cm4gcj8hIXJbVih0aGlzKV06ITF9LE0ud2l0aG91dD1mdW5j
        dGlvbigpe3ZhciBlPW5ldyB5KHRoaXMpO3JldHVybiBlLl93aXRob3V0PVAu
        Y2FsbChhcmd1bWVudHMpLGV9LE0ua2V5cz1mdW5jdGlvbigpe3ZhciBlPXt9
        LHQ9e30scj1bXTtnKGUsdGhpcyx0KTtmb3IodmFyIG4gaW4gZSllLmhhc093
        blByb3BlcnR5KG4pJiZyLnB1c2gobik7cmV0dXJuIHJ9LHkubWl4aW5zPWZ1
        bmN0aW9uKGUpe3ZhciB0PWVbTl0scj10JiZ0Lm1peGlucyxuPVtdO2lmKCFy
        KXJldHVybiBuO2Zvcih2YXIgaSBpbiByKXt2YXIgbz1yW2ldO28ucHJvcGVy
        dGllc3x8bi5wdXNoKG8pfXJldHVybiBufSx3PW5ldyBFbWJlci5EZXNjcmlw
        dG9yLHcudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4iKFJlcXVpcmVkIFBy
        b3BlcnR5KSJ9LEVtYmVyLnJlcXVpcmVkPWZ1bmN0aW9uKCl7cmV0dXJuIHd9
        LF89ZnVuY3Rpb24oZSl7dGhpcy5tZXRob2ROYW1lPWV9LF8ucHJvdG90eXBl
        PW5ldyBFbWJlci5EZXNjcmlwdG9yLEVtYmVyLmFsaWFzTWV0aG9kPWZ1bmN0
        aW9uKGUpe3JldHVybiBuZXcgXyhlKX0sRW1iZXIub2JzZXJ2ZXI9ZnVuY3Rp
        b24oKXt2YXIgZSx0PVAuY2FsbChhcmd1bWVudHMsLTEpWzBdLHI9ZnVuY3Rp
        b24odCl7ZS5wdXNoKHQpfSxuPVAuY2FsbChhcmd1bWVudHMsMCwtMSk7ImZ1
        bmN0aW9uIiE9dHlwZW9mIHQmJih0PWFyZ3VtZW50c1swXSxuPVAuY2FsbChh
        cmd1bWVudHMsMSkpLGU9W107Zm9yKHZhciBpPTA7aTxuLmxlbmd0aDsrK2kp
        SShuW2ldLHIpO2lmKCJmdW5jdGlvbiIhPXR5cGVvZiB0KXRocm93IG5ldyBF
        bWJlci5FcnJvcigiRW1iZXIub2JzZXJ2ZXIgY2FsbGVkIHdpdGhvdXQgYSBm
        dW5jdGlvbiIpO3JldHVybiB0Ll9fZW1iZXJfb2JzZXJ2ZXNfXz1lLHR9LEVt
        YmVyLmltbWVkaWF0ZU9ic2VydmVyPWZ1bmN0aW9uKCl7Zm9yKHZhciBlPTAs
        dD1hcmd1bWVudHMubGVuZ3RoO3Q+ZTtlKyspe2FyZ3VtZW50c1tlXX1yZXR1
        cm4gRW1iZXIub2JzZXJ2ZXIuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxFbWJl
        ci5iZWZvcmVPYnNlcnZlcj1mdW5jdGlvbigpe3ZhciBlLHQ9UC5jYWxsKGFy
        Z3VtZW50cywtMSlbMF0scj1mdW5jdGlvbih0KXtlLnB1c2godCl9LG49UC5j
        YWxsKGFyZ3VtZW50cywwLC0xKTsiZnVuY3Rpb24iIT10eXBlb2YgdCYmKHQ9
        YXJndW1lbnRzWzBdLG49UC5jYWxsKGFyZ3VtZW50cywxKSksZT1bXTtmb3Io
        dmFyIGk9MDtpPG4ubGVuZ3RoOysraSlJKG5baV0scik7aWYoImZ1bmN0aW9u
        IiE9dHlwZW9mIHQpdGhyb3cgbmV3IEVtYmVyLkVycm9yKCJFbWJlci5iZWZv
        cmVPYnNlcnZlciBjYWxsZWQgd2l0aG91dCBhIGZ1bmN0aW9uIik7cmV0dXJu
        IHQuX19lbWJlcl9vYnNlcnZlc0JlZm9yZV9fPWUsdH19KCksZnVuY3Rpb24o
        KXt2YXIgZT1FbWJlci5FbnVtZXJhYmxlVXRpbHMuZm9yRWFjaCx0PUVtYmVy
        LkVudW1lcmFibGVVdGlscy5pbmRleE9mO0VtYmVyLmxpYnJhcmllcz1mdW5j
        dGlvbigpe3ZhciByPVtdLG49MCxpPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD0w
        O3Q8ci5sZW5ndGg7dCsrKWlmKHJbdF0ubmFtZT09PWUpcmV0dXJuIHJbdF19
        O3JldHVybiByLnJlZ2lzdGVyPWZ1bmN0aW9uKGUsdCl7aShlKXx8ci5wdXNo
        KHtuYW1lOmUsdmVyc2lvbjp0fSl9LHIucmVnaXN0ZXJDb3JlTGlicmFyeT1m
        dW5jdGlvbihlLHQpe2koZSl8fHIuc3BsaWNlKG4rKywwLHtuYW1lOmUsdmVy
        c2lvbjp0fSl9LHIuZGVSZWdpc3Rlcj1mdW5jdGlvbihlKXt2YXIgbj1pKGUp
        O24mJnIuc3BsaWNlKHQocixuKSwxKX0sci5lYWNoPWZ1bmN0aW9uKHQpe2Uo
        cixmdW5jdGlvbihlKXt0KGUubmFtZSxlLnZlcnNpb24pfSl9LHJ9KCksRW1i
        ZXIubGlicmFyaWVzLnJlZ2lzdGVyQ29yZUxpYnJhcnkoIkVtYmVyIixFbWJl
        ci5WRVJTSU9OKX0oKSxmdW5jdGlvbigpe2UoInJzdnAvYWxsIixbIi4vcHJv
        bWlzZSIsImV4cG9ydHMiXSxmdW5jdGlvbihlLHQpeyJ1c2Ugc3RyaWN0Ijt2
        YXIgcj1lWyJkZWZhdWx0Il07dFsiZGVmYXVsdCJdPWZ1bmN0aW9uKGUsdCl7
        cmV0dXJuIHIuYWxsKGUsdCl9fSksZSgicnN2cC9hbGxfc2V0dGxlZCIsWyIu
        L3Byb21pc2UiLCIuL3V0aWxzIiwiZXhwb3J0cyJdLGZ1bmN0aW9uKGUsdCxy
        KXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gbihlKXtyZXR1cm57c3RhdGU6ImZ1
        bGZpbGxlZCIsdmFsdWU6ZX19ZnVuY3Rpb24gaShlKXtyZXR1cm57c3RhdGU6
        InJlamVjdGVkIixyZWFzb246ZX19dmFyIG89ZVsiZGVmYXVsdCJdLGE9dC5p
        c0FycmF5LHM9dC5pc05vblRoZW5hYmxlO3JbImRlZmF1bHQiXT1mdW5jdGlv
        bihlLHQpe3JldHVybiBuZXcgbyhmdW5jdGlvbih0KXtmdW5jdGlvbiByKGUp
        e3JldHVybiBmdW5jdGlvbih0KXtsKGUsbih0KSl9fWZ1bmN0aW9uIHUoZSl7
        cmV0dXJuIGZ1bmN0aW9uKHQpe2woZSxpKHQpKX19ZnVuY3Rpb24gbChlLHIp
        e21bZV09ciwwPT09LS1oJiZ0KG0pfWlmKCFhKGUpKXRocm93IG5ldyBUeXBl
        RXJyb3IoIllvdSBtdXN0IHBhc3MgYW4gYXJyYXkgdG8gYWxsU2V0dGxlZC4i
        KTt2YXIgYyxoPWUubGVuZ3RoO2lmKDA9PT1oKXJldHVybiB0KFtdKSx2b2lk
        IDA7Zm9yKHZhciBtPW5ldyBBcnJheShoKSxmPTA7ZjxlLmxlbmd0aDtmKysp
        Yz1lW2ZdLHMoYyk/bChmLG4oYykpOm8uY2FzdChjKS50aGVuKHIoZiksdShm
        KSl9LHQpfX0pLGUoInJzdnAvY29uZmlnIixbIi4vZXZlbnRzIiwiZXhwb3J0
        cyJdLGZ1bmN0aW9uKGUsdCl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIHIoZSx0
        KXtyZXR1cm4ib25lcnJvciI9PT1lPyhpLm9uKCJlcnJvciIsdCksdm9pZCAw
        KToyIT09YXJndW1lbnRzLmxlbmd0aD9pW2VdOihpW2VdPXQsdm9pZCAwKX12
        YXIgbj1lWyJkZWZhdWx0Il0saT17aW5zdHJ1bWVudDohMX07bi5taXhpbihp
        KSx0LmNvbmZpZz1pLHQuY29uZmlndXJlPXJ9KSxlKCJyc3ZwL2RlZmVyIixb
        Ii4vcHJvbWlzZSIsImV4cG9ydHMiXSxmdW5jdGlvbihlLHQpeyJ1c2Ugc3Ry
        aWN0Ijt2YXIgcj1lWyJkZWZhdWx0Il07dFsiZGVmYXVsdCJdPWZ1bmN0aW9u
        KGUpe3ZhciB0PXt9O3JldHVybiB0LnByb21pc2U9bmV3IHIoZnVuY3Rpb24o
        ZSxyKXt0LnJlc29sdmU9ZSx0LnJlamVjdD1yfSxlKSx0fX0pLGUoInJzdnAv
        ZXZlbnRzIixbImV4cG9ydHMiXSxmdW5jdGlvbihlKXsidXNlIHN0cmljdCI7
        dmFyIHQ9ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHI9MCxuPWUubGVuZ3RoO24+
        cjtyKyspaWYoZVtyXT09PXQpcmV0dXJuIHI7cmV0dXJuLTF9LHI9ZnVuY3Rp
        b24oZSl7dmFyIHQ9ZS5fcHJvbWlzZUNhbGxiYWNrcztyZXR1cm4gdHx8KHQ9
        ZS5fcHJvbWlzZUNhbGxiYWNrcz17fSksdH07ZVsiZGVmYXVsdCJdPXttaXhp
        bjpmdW5jdGlvbihlKXtyZXR1cm4gZS5vbj10aGlzLm9uLGUub2ZmPXRoaXMu
        b2ZmLGUudHJpZ2dlcj10aGlzLnRyaWdnZXIsZS5fcHJvbWlzZUNhbGxiYWNr
        cz12b2lkIDAsZX0sb246ZnVuY3Rpb24oZSxuKXt2YXIgaSxvPXIodGhpcyk7
        aT1vW2VdLGl8fChpPW9bZV09W10pLC0xPT09dChpLG4pJiZpLnB1c2gobil9
        LG9mZjpmdW5jdGlvbihlLG4pe3ZhciBpLG8sYT1yKHRoaXMpO3JldHVybiBu
        PyhpPWFbZV0sbz10KGksbiksLTEhPT1vJiZpLnNwbGljZShvLDEpLHZvaWQg
        MCk6KGFbZV09W10sdm9pZCAwKX0sdHJpZ2dlcjpmdW5jdGlvbihlLHQpe3Zh
        ciBuLGksbz1yKHRoaXMpO2lmKG49b1tlXSlmb3IodmFyIGE9MDthPG4ubGVu
        Z3RoO2ErKykoaT1uW2FdKSh0KX19fSksZSgicnN2cC9maWx0ZXIiLFsiLi9h
        bGwiLCIuL21hcCIsIi4vdXRpbHMiLCJleHBvcnRzIl0sZnVuY3Rpb24oZSx0
        LHIsbil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGkoZSx0LHIpe3JldHVybiBv
        KGUscikudGhlbihmdW5jdGlvbihuKXtpZighdShlKSl0aHJvdyBuZXcgVHlw
        ZUVycm9yKCJZb3UgbXVzdCBwYXNzIGFuIGFycmF5IHRvIGZpbHRlci4iKTtp
        Zighcyh0KSl0aHJvdyBuZXcgVHlwZUVycm9yKCJZb3UgbXVzdCBwYXNzIGEg
        ZnVuY3Rpb24gdG8gZmlsdGVyJ3Mgc2Vjb25kIGFyZ3VtZW50LiIpO3JldHVy
        biBhKGUsdCxyKS50aGVuKGZ1bmN0aW9uKGUpe3ZhciB0LHI9bi5sZW5ndGgs
        aT1bXTtmb3IodD0wO3I+dDt0KyspZVt0XSYmaS5wdXNoKG5bdF0pO3JldHVy
        biBpfSl9KX12YXIgbz1lWyJkZWZhdWx0Il0sYT10WyJkZWZhdWx0Il0scz1y
        LmlzRnVuY3Rpb24sdT1yLmlzQXJyYXk7blsiZGVmYXVsdCJdPWl9KSxlKCJy
        c3ZwL2hhc2giLFsiLi9wcm9taXNlIiwiLi91dGlscyIsImV4cG9ydHMiXSxm
        dW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPWVbImRlZmF1bHQi
        XSxpPXQuaXNOb25UaGVuYWJsZSxvPXQua2V5c09mO3JbImRlZmF1bHQiXT1m
        dW5jdGlvbihlKXtyZXR1cm4gbmV3IG4oZnVuY3Rpb24odCxyKXtmdW5jdGlv
        biBhKGUpe3JldHVybiBmdW5jdGlvbihyKXtjW2VdPXIsMD09PS0tbSYmdChj
        KX19ZnVuY3Rpb24gcyhlKXttPTAscihlKX12YXIgdSxsLGM9e30saD1vKGUp
        LG09aC5sZW5ndGg7aWYoMD09PW0pcmV0dXJuIHQoYyksdm9pZCAwO2Zvcih2
        YXIgZj0wO2Y8aC5sZW5ndGg7ZisrKWw9aFtmXSx1PWVbbF0saSh1KT8oY1ts
        XT11LDA9PT0tLW0mJnQoYykpOm4uY2FzdCh1KS50aGVuKGEobCkscyl9KX19
        KSxlKCJyc3ZwL2luc3RydW1lbnQiLFsiLi9jb25maWciLCIuL3V0aWxzIiwi
        ZXhwb3J0cyJdLGZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49
        ZS5jb25maWcsaT10Lm5vdztyWyJkZWZhdWx0Il09ZnVuY3Rpb24oZSx0LHIp
        e3RyeXtuLnRyaWdnZXIoZSx7Z3VpZDp0Ll9ndWlkS2V5K3QuX2lkLGV2ZW50
        TmFtZTplLGRldGFpbDp0Ll9kZXRhaWwsY2hpbGRHdWlkOnImJnQuX2d1aWRL
        ZXkrci5faWQsbGFiZWw6dC5fbGFiZWwsdGltZVN0YW1wOmkoKSxzdGFjazpu
        ZXcgRXJyb3IodC5fbGFiZWwpLnN0YWNrfSl9Y2F0Y2gobyl7c2V0VGltZW91
        dChmdW5jdGlvbigpe3Rocm93IG99LDApfX19KSxlKCJyc3ZwL21hcCIsWyIu
        L3Byb21pc2UiLCIuL2FsbCIsIi4vdXRpbHMiLCJleHBvcnRzIl0sZnVuY3Rp
        b24oZSx0LHIsbil7InVzZSBzdHJpY3QiO3ZhciBpPShlWyJkZWZhdWx0Il0s
        dFsiZGVmYXVsdCJdKSxvPXIuaXNBcnJheSxhPXIuaXNGdW5jdGlvbjtuWyJk
        ZWZhdWx0Il09ZnVuY3Rpb24oZSx0LHIpe3JldHVybiBpKGUscikudGhlbihm
        dW5jdGlvbihuKXtpZighbyhlKSl0aHJvdyBuZXcgVHlwZUVycm9yKCJZb3Ug
        bXVzdCBwYXNzIGFuIGFycmF5IHRvIG1hcC4iKTtpZighYSh0KSl0aHJvdyBu
        ZXcgVHlwZUVycm9yKCJZb3UgbXVzdCBwYXNzIGEgZnVuY3Rpb24gdG8gbWFw
        J3Mgc2Vjb25kIGFyZ3VtZW50LiIpO3ZhciBzLHU9bi5sZW5ndGgsbD1bXTtm
        b3Iocz0wO3U+cztzKyspbC5wdXNoKHQobltzXSkpO3JldHVybiBpKGwscil9
        KX19KSxlKCJyc3ZwL25vZGUiLFsiLi9wcm9taXNlIiwiZXhwb3J0cyJdLGZ1
        bmN0aW9uKGUsdCl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIHIoZSx0KXtyZXR1
        cm4gZnVuY3Rpb24ocixuKXtyP3Qocik6YXJndW1lbnRzLmxlbmd0aD4yP2Uo
        aS5jYWxsKGFyZ3VtZW50cywxKSk6ZShuKX19dmFyIG49ZVsiZGVmYXVsdCJd
        LGk9QXJyYXkucHJvdG90eXBlLnNsaWNlO3RbImRlZmF1bHQiXT1mdW5jdGlv
        bihlLHQpe3JldHVybiBmdW5jdGlvbigpe3ZhciBvPWkuY2FsbChhcmd1bWVu
        dHMpLGE9dGhpc3x8dDtyZXR1cm4gbmV3IG4oZnVuY3Rpb24odCxpKXtuLmFs
        bChvKS50aGVuKGZ1bmN0aW9uKG4pe3RyeXtuLnB1c2gocih0LGkpKSxlLmFw
        cGx5KGEsbil9Y2F0Y2gobyl7aShvKX19KX0pfX19KSxlKCJyc3ZwL3Byb21p
        c2UiLFsiLi9jb25maWciLCIuL2V2ZW50cyIsIi4vaW5zdHJ1bWVudCIsIi4v
        dXRpbHMiLCIuL3Byb21pc2UvY2FzdCIsIi4vcHJvbWlzZS9hbGwiLCIuL3By
        b21pc2UvcmFjZSIsIi4vcHJvbWlzZS9yZXNvbHZlIiwiLi9wcm9taXNlL3Jl
        amVjdCIsImV4cG9ydHMiXSxmdW5jdGlvbihlLHQscixuLGksbyxhLHMsdSxs
        KXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYygpe31mdW5jdGlvbiBoKGUsdCl7
        aWYoIUEoZSkpdGhyb3cgbmV3IFR5cGVFcnJvcigiWW91IG11c3QgcGFzcyBh
        IHJlc29sdmVyIGZ1bmN0aW9uIGFzIHRoZSBmaXJzdCBhcmd1bWVudCB0byB0
        aGUgcHJvbWlzZSBjb25zdHJ1Y3RvciIpO2lmKCEodGhpcyBpbnN0YW5jZW9m
        IGgpKXRocm93IG5ldyBUeXBlRXJyb3IoIkZhaWxlZCB0byBjb25zdHJ1Y3Qg
        J1Byb21pc2UnOiBQbGVhc2UgdXNlIHRoZSAnbmV3JyBvcGVyYXRvciwgdGhp
        cyBvYmplY3QgY29uc3RydWN0b3IgY2Fubm90IGJlIGNhbGxlZCBhcyBhIGZ1
        bmN0aW9uLiIpO3RoaXMuX2lkPVIrKyx0aGlzLl9sYWJlbD10LHRoaXMuX3N1
        YnNjcmliZXJzPVtdLF8uaW5zdHJ1bWVudCYmQygiY3JlYXRlZCIsdGhpcyks
        YyE9PWUmJm0oZSx0aGlzKX1mdW5jdGlvbiBtKGUsdCl7ZnVuY3Rpb24gcihl
        KXt2KHQsZSl9ZnVuY3Rpb24gbihlKXtnKHQsZSl9dHJ5e2UocixuKX1jYXRj
        aChpKXtuKGkpfX1mdW5jdGlvbiBmKGUsdCxyLG4pe3ZhciBpPWUuX3N1YnNj
        cmliZXJzLG89aS5sZW5ndGg7aVtvXT10LGlbbytrXT1yLGlbbytqXT1ufWZ1
        bmN0aW9uIHAoZSx0KXt2YXIgcixuLGk9ZS5fc3Vic2NyaWJlcnMsbz1lLl9k
        ZXRhaWw7Xy5pbnN0cnVtZW50JiZDKHQ9PT1rPyJmdWxmaWxsZWQiOiJyZWpl
        Y3RlZCIsZSk7Zm9yKHZhciBhPTA7YTxpLmxlbmd0aDthKz0zKXI9aVthXSxu
        PWlbYSt0XSxkKHQscixuLG8pO2UuX3N1YnNjcmliZXJzPW51bGx9ZnVuY3Rp
        b24gZChlLHQscixuKXt2YXIgaSxvLGEscyx1PUEocik7aWYodSl0cnl7aT1y
        KG4pLGE9ITB9Y2F0Y2gobCl7cz0hMCxvPWx9ZWxzZSBpPW4sYT0hMDtiKHQs
        aSl8fCh1JiZhP3YodCxpKTpzP2codCxvKTplPT09az92KHQsaSk6ZT09PWom
        JmcodCxpKSl9ZnVuY3Rpb24gYihlLHQpe3ZhciByLG49bnVsbDt0cnl7aWYo
        ZT09PXQpdGhyb3cgbmV3IFR5cGVFcnJvcigiQSBwcm9taXNlcyBjYWxsYmFj
        ayBjYW5ub3QgcmV0dXJuIHRoYXQgc2FtZSBwcm9taXNlLiIpO2lmKE8odCkm
        JihuPXQudGhlbixBKG4pKSlyZXR1cm4gbi5jYWxsKHQsZnVuY3Rpb24obil7
        cmV0dXJuIHI/ITA6KHI9ITAsdCE9PW4/dihlLG4pOkUoZSxuKSx2b2lkIDAp
        fSxmdW5jdGlvbih0KXtyZXR1cm4gcj8hMDoocj0hMCxnKGUsdCksdm9pZCAw
        KX0sImRlcml2ZWQgZnJvbTogIisoZS5fbGFiZWx8fCIgdW5rbm93biBwcm9t
        aXNlIikpLCEwfWNhdGNoKGkpe3JldHVybiByPyEwOihnKGUsaSksITApfXJl
        dHVybiExfWZ1bmN0aW9uIHYoZSx0KXtlPT09dD9FKGUsdCk6YihlLHQpfHxF
        KGUsdCl9ZnVuY3Rpb24gRShlLHQpe2UuX3N0YXRlPT09RCYmKGUuX3N0YXRl
        PU0sZS5fZGV0YWlsPXQsXy5hc3luYyh5LGUpKX1mdW5jdGlvbiBnKGUsdCl7
        ZS5fc3RhdGU9PT1EJiYoZS5fc3RhdGU9TSxlLl9kZXRhaWw9dCxfLmFzeW5j
        KHcsZSkpfWZ1bmN0aW9uIHkoZSl7cChlLGUuX3N0YXRlPWspfWZ1bmN0aW9u
        IHcoZSl7ZS5fb25lcnJvciYmZS5fb25lcnJvcihlLl9kZXRhaWwpLHAoZSxl
        Ll9zdGF0ZT1qKX12YXIgXz1lLmNvbmZpZyxDPSh0WyJkZWZhdWx0Il0sclsi
        ZGVmYXVsdCJdKSxPPW4ub2JqZWN0T3JGdW5jdGlvbixBPW4uaXNGdW5jdGlv
        bixQPW4ubm93LHg9aVsiZGVmYXVsdCJdLFQ9b1siZGVmYXVsdCJdLFY9YVsi
        ZGVmYXVsdCJdLFM9c1siZGVmYXVsdCJdLE49dVsiZGVmYXVsdCJdLEk9InJz
        dnBfIitQKCkrIi0iLFI9MDtsWyJkZWZhdWx0Il09aCxoLmNhc3Q9eCxoLmFs
        bD1ULGgucmFjZT1WLGgucmVzb2x2ZT1TLGgucmVqZWN0PU47dmFyIEQ9dm9p
        ZCAwLE09MCxrPTEsaj0yO2gucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpoLF9p
        ZDp2b2lkIDAsX2d1aWRLZXk6SSxfbGFiZWw6dm9pZCAwLF9zdGF0ZTp2b2lk
        IDAsX2RldGFpbDp2b2lkIDAsX3N1YnNjcmliZXJzOnZvaWQgMCxfb25lcnJv
        cjpmdW5jdGlvbihlKXtfLnRyaWdnZXIoImVycm9yIixlKX0sdGhlbjpmdW5j
        dGlvbihlLHQscil7dmFyIG49dGhpczt0aGlzLl9vbmVycm9yPW51bGw7dmFy
        IGk9bmV3IHRoaXMuY29uc3RydWN0b3IoYyxyKTtpZih0aGlzLl9zdGF0ZSl7
        dmFyIG89YXJndW1lbnRzO18uYXN5bmMoZnVuY3Rpb24oKXtkKG4uX3N0YXRl
        LGksb1tuLl9zdGF0ZS0xXSxuLl9kZXRhaWwpfSl9ZWxzZSBmKHRoaXMsaSxl
        LHQpO3JldHVybiBfLmluc3RydW1lbnQmJkMoImNoYWluZWQiLG4saSksaX0s
        ImNhdGNoIjpmdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLnRoZW4obnVsbCxl
        LHQpfSwiZmluYWxseSI6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLmNvbnN0
        cnVjdG9yO3JldHVybiB0aGlzLnRoZW4oZnVuY3Rpb24odCl7cmV0dXJuIHIu
        Y2FzdChlKCkpLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gdH0pfSxmdW5jdGlv
        bih0KXtyZXR1cm4gci5jYXN0KGUoKSkudGhlbihmdW5jdGlvbigpe3Rocm93
        IHR9KX0sdCl9fX0pLGUoInJzdnAvcHJvbWlzZS9hbGwiLFsiLi4vdXRpbHMi
        LCJleHBvcnRzIl0sZnVuY3Rpb24oZSx0KXsidXNlIHN0cmljdCI7dmFyIHI9
        ZS5pc0FycmF5LG49ZS5pc05vblRoZW5hYmxlO3RbImRlZmF1bHQiXT1mdW5j
        dGlvbihlLHQpe3ZhciBpPXRoaXM7cmV0dXJuIG5ldyBpKGZ1bmN0aW9uKHQs
        byl7ZnVuY3Rpb24gYShlKXtyZXR1cm4gZnVuY3Rpb24ocil7Y1tlXT1yLDA9
        PT0tLWwmJnQoYyl9fWZ1bmN0aW9uIHMoZSl7bD0wLG8oZSl9aWYoIXIoZSkp
        dGhyb3cgbmV3IFR5cGVFcnJvcigiWW91IG11c3QgcGFzcyBhbiBhcnJheSB0
        byBhbGwuIik7dmFyIHUsbD1lLmxlbmd0aCxjPW5ldyBBcnJheShsKTtpZigw
        PT09bClyZXR1cm4gdChjKSx2b2lkIDA7Zm9yKHZhciBoPTA7aDxlLmxlbmd0
        aDtoKyspdT1lW2hdLG4odSk/KGNbaF09dSwwPT09LS1sJiZ0KGMpKTppLmNh
        c3QodSkudGhlbihhKGgpLHMpfSx0KX19KSxlKCJyc3ZwL3Byb21pc2UvY2Fz
        dCIsWyJleHBvcnRzIl0sZnVuY3Rpb24oZSl7InVzZSBzdHJpY3QiO2VbImRl
        ZmF1bHQiXT1mdW5jdGlvbihlLHQpe3ZhciByPXRoaXM7cmV0dXJuIGUmJiJv
        YmplY3QiPT10eXBlb2YgZSYmZS5jb25zdHJ1Y3Rvcj09PXI/ZTpuZXcgcihm
        dW5jdGlvbih0KXt0KGUpfSx0KX19KSxlKCJyc3ZwL3Byb21pc2UvcmFjZSIs
        WyIuLi91dGlscyIsImV4cG9ydHMiXSxmdW5jdGlvbihlLHQpeyJ1c2Ugc3Ry
        aWN0Ijt2YXIgcj1lLmlzQXJyYXksbj0oZS5pc0Z1bmN0aW9uLGUuaXNOb25U
        aGVuYWJsZSk7dFsiZGVmYXVsdCJdPWZ1bmN0aW9uKGUsdCl7dmFyIGksbz10
        aGlzO3JldHVybiBuZXcgbyhmdW5jdGlvbih0LGEpe2Z1bmN0aW9uIHMoZSl7
        bCYmKGw9ITEsdChlKSl9ZnVuY3Rpb24gdShlKXtsJiYobD0hMSxhKGUpKX1p
        ZighcihlKSl0aHJvdyBuZXcgVHlwZUVycm9yKCJZb3UgbXVzdCBwYXNzIGFu
        IGFycmF5IHRvIHJhY2UuIik7Zm9yKHZhciBsPSEwLGM9MDtjPGUubGVuZ3Ro
        O2MrKyl7aWYoaT1lW2NdLG4oaSkpcmV0dXJuIGw9ITEsdChpKSx2b2lkIDA7
        by5jYXN0KGkpLnRoZW4ocyx1KX19LHQpfX0pLGUoInJzdnAvcHJvbWlzZS9y
        ZWplY3QiLFsiZXhwb3J0cyJdLGZ1bmN0aW9uKGUpeyJ1c2Ugc3RyaWN0Ijtl
        WyJkZWZhdWx0Il09ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzO3JldHVybiBu
        ZXcgcihmdW5jdGlvbih0LHIpe3IoZSl9LHQpfX0pLGUoInJzdnAvcHJvbWlz
        ZS9yZXNvbHZlIixbImV4cG9ydHMiXSxmdW5jdGlvbihlKXsidXNlIHN0cmlj
        dCI7ZVsiZGVmYXVsdCJdPWZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcztyZXR1
        cm4gbmV3IHIoZnVuY3Rpb24odCl7dChlKX0sdCl9fSksZSgicnN2cC9yYWNl
        IixbIi4vcHJvbWlzZSIsImV4cG9ydHMiXSxmdW5jdGlvbihlLHQpeyJ1c2Ug
        c3RyaWN0Ijt2YXIgcj1lWyJkZWZhdWx0Il07dFsiZGVmYXVsdCJdPWZ1bmN0
        aW9uKGUsdCl7cmV0dXJuIHIucmFjZShlLHQpfX0pLGUoInJzdnAvcmVqZWN0
        IixbIi4vcHJvbWlzZSIsImV4cG9ydHMiXSxmdW5jdGlvbihlLHQpeyJ1c2Ug
        c3RyaWN0Ijt2YXIgcj1lWyJkZWZhdWx0Il07dFsiZGVmYXVsdCJdPWZ1bmN0
        aW9uKGUsdCl7cmV0dXJuIHIucmVqZWN0KGUsdCl9fSksZSgicnN2cC9yZXNv
        bHZlIixbIi4vcHJvbWlzZSIsImV4cG9ydHMiXSxmdW5jdGlvbihlLHQpeyJ1
        c2Ugc3RyaWN0Ijt2YXIgcj1lWyJkZWZhdWx0Il07dFsiZGVmYXVsdCJdPWZ1
        bmN0aW9uKGUsdCl7cmV0dXJuIHIucmVzb2x2ZShlLHQpfX0pLGUoInJzdnAv
        cmV0aHJvdyIsWyJleHBvcnRzIl0sZnVuY3Rpb24oZSl7InVzZSBzdHJpY3Qi
        O2VbImRlZmF1bHQiXT1mdW5jdGlvbihlKXt0aHJvdyBzZXRUaW1lb3V0KGZ1
        bmN0aW9uKCl7dGhyb3cgZX0pLGV9fSksZSgicnN2cC91dGlscyIsWyJleHBv
        cnRzIl0sZnVuY3Rpb24oZSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIHQoZSl7
        cmV0dXJuImZ1bmN0aW9uIj09dHlwZW9mIGV8fCJvYmplY3QiPT10eXBlb2Yg
        ZSYmbnVsbCE9PWV9ZnVuY3Rpb24gcihlKXtyZXR1cm4iZnVuY3Rpb24iPT10
        eXBlb2YgZX1mdW5jdGlvbiBuKGUpe3JldHVybiF0KGUpfWZ1bmN0aW9uIGko
        ZSl7cmV0dXJuIltvYmplY3QgQXJyYXldIj09PU9iamVjdC5wcm90b3R5cGUu
        dG9TdHJpbmcuY2FsbChlKX1lLm9iamVjdE9yRnVuY3Rpb249dCxlLmlzRnVu
        Y3Rpb249cixlLmlzTm9uVGhlbmFibGU9bixlLmlzQXJyYXk9aTt2YXIgbz1E
        YXRlLm5vd3x8ZnVuY3Rpb24oKXtyZXR1cm4obmV3IERhdGUpLmdldFRpbWUo
        KX07ZS5ub3c9bzt2YXIgYT1PYmplY3Qua2V5c3x8ZnVuY3Rpb24oZSl7dmFy
        IHQ9W107Zm9yKHZhciByIGluIGUpdC5wdXNoKHIpO3JldHVybiB0fTtlLmtl
        eXNPZj1hfSksZSgicnN2cCIsWyIuL3JzdnAvcHJvbWlzZSIsIi4vcnN2cC9l
        dmVudHMiLCIuL3JzdnAvbm9kZSIsIi4vcnN2cC9hbGwiLCIuL3JzdnAvYWxs
        X3NldHRsZWQiLCIuL3JzdnAvcmFjZSIsIi4vcnN2cC9oYXNoIiwiLi9yc3Zw
        L3JldGhyb3ciLCIuL3JzdnAvZGVmZXIiLCIuL3JzdnAvY29uZmlnIiwiLi9y
        c3ZwL21hcCIsIi4vcnN2cC9yZXNvbHZlIiwiLi9yc3ZwL3JlamVjdCIsIi4v
        cnN2cC9maWx0ZXIiLCJleHBvcnRzIl0sZnVuY3Rpb24oZSx0LHIsbixpLG8s
        YSxzLHUsbCxjLGgsbSxmLHApeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBkKGUs
        dCl7eC5hc3luYyhlLHQpfWZ1bmN0aW9uIGIoKXt4Lm9uLmFwcGx5KHgsYXJn
        dW1lbnRzKX1mdW5jdGlvbiB2KCl7eC5vZmYuYXBwbHkoeCxhcmd1bWVudHMp
        fXZhciBFPWVbImRlZmF1bHQiXSxnPXRbImRlZmF1bHQiXSx5PXJbImRlZmF1
        bHQiXSx3PW5bImRlZmF1bHQiXSxfPWlbImRlZmF1bHQiXSxDPW9bImRlZmF1
        bHQiXSxPPWFbImRlZmF1bHQiXSxBPXNbImRlZmF1bHQiXSxQPXVbImRlZmF1
        bHQiXSx4PWwuY29uZmlnLFQ9bC5jb25maWd1cmUsVj1jWyJkZWZhdWx0Il0s
        Uz1oWyJkZWZhdWx0Il0sTj1tWyJkZWZhdWx0Il0sST1mWyJkZWZhdWx0Il07
        aWYoInVuZGVmaW5lZCIhPXR5cGVvZiB3aW5kb3cmJiJvYmplY3QiPT10eXBl
        b2Ygd2luZG93Ll9fUFJPTUlTRV9JTlNUUlVNRU5UQVRJT05fXyl7dmFyIFI9
        d2luZG93Ll9fUFJPTUlTRV9JTlNUUlVNRU5UQVRJT05fXztUKCJpbnN0cnVt
        ZW50IiwhMCk7Zm9yKHZhciBEIGluIFIpUi5oYXNPd25Qcm9wZXJ0eShEKSYm
        YihELFJbRF0pfXAuUHJvbWlzZT1FLHAuRXZlbnRUYXJnZXQ9ZyxwLmFsbD13
        LHAuYWxsU2V0dGxlZD1fLHAucmFjZT1DLHAuaGFzaD1PLHAucmV0aHJvdz1B
        LHAuZGVmZXI9UCxwLmRlbm9kZWlmeT15LHAuY29uZmlndXJlPVQscC5vbj1i
        LHAub2ZmPXYscC5yZXNvbHZlPVMscC5yZWplY3Q9TixwLmFzeW5jPWQscC5t
        YXA9VixwLmZpbHRlcj1JfSl9KCksZnVuY3Rpb24oKXtFbWJlci5NT0RFTF9G
        QUNUT1JZX0lOSkVDVElPTlM9ITF8fCEhRW1iZXIuRU5WLk1PREVMX0ZBQ1RP
        UllfSU5KRUNUSU9OUyxlKCJjb250YWluZXIiLFtdLGZ1bmN0aW9uKCl7InVz
        ZSBzdHJpY3QiO2Z1bmN0aW9uIGUoZSl7dGhpcy5wYXJlbnQ9ZSx0aGlzLmRp
        Y3Q9e319ZnVuY3Rpb24gdCh0KXt0aGlzLnBhcmVudD10LHRoaXMuY2hpbGRy
        ZW49W10sdGhpcy5yZXNvbHZlcj10JiZ0LnJlc29sdmVyfHxmdW5jdGlvbigp
        e30sdGhpcy5yZWdpc3RyeT1uZXcgZSh0JiZ0LnJlZ2lzdHJ5KSx0aGlzLmNh
        Y2hlPW5ldyBlKHQmJnQuY2FjaGUpLHRoaXMuZmFjdG9yeUNhY2hlPW5ldyBl
        KHQmJnQuZmFjdG9yeUNhY2hlKSx0aGlzLnJlc29sdmVDYWNoZT1uZXcgZSh0
        JiZ0LnJlc29sdmVDYWNoZSksdGhpcy50eXBlSW5qZWN0aW9ucz1uZXcgZSh0
        JiZ0LnR5cGVJbmplY3Rpb25zKSx0aGlzLmluamVjdGlvbnM9e30sdGhpcy5m
        YWN0b3J5VHlwZUluamVjdGlvbnM9bmV3IGUodCYmdC5mYWN0b3J5VHlwZUlu
        amVjdGlvbnMpLHRoaXMuZmFjdG9yeUluamVjdGlvbnM9e30sdGhpcy5fb3B0
        aW9ucz1uZXcgZSh0JiZ0Ll9vcHRpb25zKSx0aGlzLl90eXBlT3B0aW9ucz1u
        ZXcgZSh0JiZ0Ll90eXBlT3B0aW9ucyl9ZnVuY3Rpb24gcihlLHQpe3JldHVy
        biBlLmNhY2hlLmhhcyh0KT8hMDohIWUucmVzb2x2ZSh0KX1mdW5jdGlvbiBu
        KGUsdCxyKXtpZihyPXJ8fHt9LGUuY2FjaGUuaGFzKHQpJiZyLnNpbmdsZXRv
        biE9PSExKXJldHVybiBlLmNhY2hlLmdldCh0KTt2YXIgbj1oKGUsdCk7cmV0
        dXJuIHZvaWQgMCE9PW4/KG8oZSx0KSYmci5zaW5nbGV0b24hPT0hMSYmZS5j
        YWNoZS5zZXQodCxuKSxuKTp2b2lkIDB9ZnVuY3Rpb24gaShlKXt0aHJvdyBu
        ZXcgRXJyb3IoZSsiIGlzIG5vdCBjdXJyZW50bHkgc3VwcG9ydGVkIG9uIGNo
        aWxkIGNvbnRhaW5lcnMiKX1mdW5jdGlvbiBvKGUsdCl7dmFyIHI9cyhlLHQs
        InNpbmdsZXRvbiIpO3JldHVybiByIT09ITF9ZnVuY3Rpb24gYShlLHQpe3Zh
        ciByPXt9O2lmKCF0KXJldHVybiByO2Zvcih2YXIgaSxvLGE9MCxzPXQubGVu
        Z3RoO3M+YTthKyspe2lmKGk9dFthXSxvPW4oZSxpLmZ1bGxOYW1lKSx2b2lk
        IDA9PT1vKXRocm93IG5ldyBFcnJvcigiQXR0ZW1wdGluZyB0byBpbmplY3Qg
        YW4gdW5rbm93biBpbmplY3Rpb246IGAiK2kuZnVsbE5hbWUrImAiKTtyW2ku
        cHJvcGVydHldPW99cmV0dXJuIHJ9ZnVuY3Rpb24gcyhlLHQscil7dmFyIG49
        ZS5fb3B0aW9ucy5nZXQodCk7aWYobiYmdm9pZCAwIT09bltyXSlyZXR1cm4g
        bltyXTt2YXIgaT10LnNwbGl0KCI6IilbMF07cmV0dXJuIG49ZS5fdHlwZU9w
        dGlvbnMuZ2V0KGkpLG4/bltyXTp2b2lkIDB9ZnVuY3Rpb24gdShlLHQpe3Zh
        ciByLG49dCxpPWUucmVzb2x2ZShuKSxvPWUuZmFjdG9yeUNhY2hlLGE9dC5z
        cGxpdCgiOiIpWzBdO2lmKHZvaWQgMCE9PWkpe2lmKG8uaGFzKHQpKXJldHVy
        biBvLmdldCh0KTtpZighaXx8ImZ1bmN0aW9uIiE9dHlwZW9mIGkuZXh0ZW5k
        fHwhRW1iZXIuTU9ERUxfRkFDVE9SWV9JTkpFQ1RJT05TJiYibW9kZWwiPT09
        YSlyZXR1cm4gaTt2YXIgcz1sKGUsdCksdT1jKGUsdCk7cmV0dXJuIHUuX3Rv
        U3RyaW5nPWUubWFrZVRvU3RyaW5nKGksdCkscj1pLmV4dGVuZChzKSxyLnJl
        b3BlbkNsYXNzKHUpLG8uc2V0KHQscikscn19ZnVuY3Rpb24gbChlLHQpe3Zh
        ciByPXQuc3BsaXQoIjoiKSxuPXJbMF0saT1bXTtyZXR1cm4gaT1pLmNvbmNh
        dChlLnR5cGVJbmplY3Rpb25zLmdldChuKXx8W10pLGk9aS5jb25jYXQoZS5p
        bmplY3Rpb25zW3RdfHxbXSksaT1hKGUsaSksaS5fZGVidWdDb250YWluZXJL
        ZXk9dCxpLmNvbnRhaW5lcj1lLGl9ZnVuY3Rpb24gYyhlLHQpe3ZhciByPXQu
        c3BsaXQoIjoiKSxuPXJbMF0saT1bXTtyZXR1cm4gaT1pLmNvbmNhdChlLmZh
        Y3RvcnlUeXBlSW5qZWN0aW9ucy5nZXQobil8fFtdKSxpPWkuY29uY2F0KGUu
        ZmFjdG9yeUluamVjdGlvbnNbdF18fFtdKSxpPWEoZSxpKSxpLl9kZWJ1Z0Nv
        bnRhaW5lcktleT10LGl9ZnVuY3Rpb24gaChlLHQpe3ZhciByPXUoZSx0KTty
        ZXR1cm4gcyhlLHQsImluc3RhbnRpYXRlIik9PT0hMT9yOnI/ImZ1bmN0aW9u
        Ij09dHlwZW9mIHIuZXh0ZW5kP3IuY3JlYXRlKCk6ci5jcmVhdGUobChlLHQp
        KTp2b2lkIDB9ZnVuY3Rpb24gbShlLHQpe2UuY2FjaGUuZWFjaExvY2FsKGZ1
        bmN0aW9uKHIsbil7cyhlLHIsImluc3RhbnRpYXRlIikhPT0hMSYmdChuKX0p
        fWZ1bmN0aW9uIGYoZSl7ZS5jYWNoZS5lYWNoTG9jYWwoZnVuY3Rpb24odCxy
        KXtzKGUsdCwiaW5zdGFudGlhdGUiKSE9PSExJiZyLmRlc3Ryb3koKX0pLGUu
        Y2FjaGUuZGljdD17fX1mdW5jdGlvbiBwKGUsdCxyLG4pe3ZhciBpPWUuZ2V0
        KHQpO2l8fChpPVtdLGUuc2V0KHQsaSkpLGkucHVzaCh7cHJvcGVydHk6cixm
        dWxsTmFtZTpufSl9ZnVuY3Rpb24gZChlKXtpZighdi50ZXN0KGUpKXRocm93
        IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgRnVsbG5hbWUsIGV4cGVjdGVkOiBg
        dHlwZTpuYW1lYCBnb3Q6ICIrZSl9ZnVuY3Rpb24gYihlLHQscixuKXt2YXIg
        aT1lW3RdPWVbdF18fFtdO2kucHVzaCh7cHJvcGVydHk6cixmdWxsTmFtZTpu
        fSl9ZS5wcm90b3R5cGU9e3BhcmVudDpudWxsLGRpY3Q6bnVsbCxnZXQ6ZnVu
        Y3Rpb24oZSl7dmFyIHQ9dGhpcy5kaWN0O3JldHVybiB0Lmhhc093blByb3Bl
        cnR5KGUpP3RbZV06dGhpcy5wYXJlbnQ/dGhpcy5wYXJlbnQuZ2V0KGUpOnZv
        aWQgMH0sc2V0OmZ1bmN0aW9uKGUsdCl7dGhpcy5kaWN0W2VdPXR9LHJlbW92
        ZTpmdW5jdGlvbihlKXtkZWxldGUgdGhpcy5kaWN0W2VdfSxoYXM6ZnVuY3Rp
        b24oZSl7dmFyIHQ9dGhpcy5kaWN0O3JldHVybiB0Lmhhc093blByb3BlcnR5
        KGUpPyEwOnRoaXMucGFyZW50P3RoaXMucGFyZW50LmhhcyhlKTohMX0sZWFj
        aExvY2FsOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcy5kaWN0O2Zvcih2YXIg
        biBpbiByKXIuaGFzT3duUHJvcGVydHkobikmJmUuY2FsbCh0LG4scltuXSl9
        fSx0LnByb3RvdHlwZT17cGFyZW50Om51bGwsY2hpbGRyZW46bnVsbCxyZXNv
        bHZlcjpudWxsLHJlZ2lzdHJ5Om51bGwsY2FjaGU6bnVsbCx0eXBlSW5qZWN0
        aW9uczpudWxsLGluamVjdGlvbnM6bnVsbCxfb3B0aW9uczpudWxsLF90eXBl
        T3B0aW9uczpudWxsLGNoaWxkOmZ1bmN0aW9uKCl7dmFyIGU9bmV3IHQodGhp
        cyk7cmV0dXJuIHRoaXMuY2hpbGRyZW4ucHVzaChlKSxlfSxzZXQ6ZnVuY3Rp
        b24oZSx0LHIpe2VbdF09cn0scmVnaXN0ZXI6ZnVuY3Rpb24oZSx0LHIpe2lm
        KGQoZSksdm9pZCAwPT09dCl0aHJvdyBuZXcgVHlwZUVycm9yKCJBdHRlbXB0
        aW5nIHRvIHJlZ2lzdGVyIGFuIHVua25vd24gZmFjdG9yeTogYCIrZSsiYCIp
        O3ZhciBuPXRoaXMubm9ybWFsaXplKGUpO2lmKHRoaXMuY2FjaGUuaGFzKG4p
        KXRocm93IG5ldyBFcnJvcigiQ2Fubm90IHJlLXJlZ2lzdGVyOiBgIitlKyJg
        LCBhcyBpdCBoYXMgYWxyZWFkeSBiZWVuIGxvb2tlZCB1cC4iKTt0aGlzLnJl
        Z2lzdHJ5LnNldChuLHQpLHRoaXMuX29wdGlvbnMuc2V0KG4scnx8e30pfSx1
        bnJlZ2lzdGVyOmZ1bmN0aW9uKGUpe2QoZSk7dmFyIHQ9dGhpcy5ub3JtYWxp
        emUoZSk7dGhpcy5yZWdpc3RyeS5yZW1vdmUodCksdGhpcy5jYWNoZS5yZW1v
        dmUodCksdGhpcy5mYWN0b3J5Q2FjaGUucmVtb3ZlKHQpLHRoaXMucmVzb2x2
        ZUNhY2hlLnJlbW92ZSh0KSx0aGlzLl9vcHRpb25zLnJlbW92ZSh0KX0scmVz
        b2x2ZTpmdW5jdGlvbihlKXtkKGUpO3ZhciB0PXRoaXMubm9ybWFsaXplKGUp
        LHI9dGhpcy5yZXNvbHZlQ2FjaGUuZ2V0KHQpO2lmKHIpcmV0dXJuIHI7dmFy
        IG49dGhpcy5yZXNvbHZlcih0KXx8dGhpcy5yZWdpc3RyeS5nZXQodCk7cmV0
        dXJuIHRoaXMucmVzb2x2ZUNhY2hlLnNldCh0LG4pLG59LGRlc2NyaWJlOmZ1
        bmN0aW9uKGUpe3JldHVybiBlfSxub3JtYWxpemU6ZnVuY3Rpb24oZSl7cmV0
        dXJuIGV9LG1ha2VUb1N0cmluZzpmdW5jdGlvbihlKXtyZXR1cm4gZS50b1N0
        cmluZygpfSxsb29rdXA6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZChlKSxuKHRo
        aXMsdGhpcy5ub3JtYWxpemUoZSksdCl9LGxvb2t1cEZhY3Rvcnk6ZnVuY3Rp
        b24oZSl7cmV0dXJuIGQoZSksdSh0aGlzLHRoaXMubm9ybWFsaXplKGUpKX0s
        aGFzOmZ1bmN0aW9uKGUpe3JldHVybiBkKGUpLHIodGhpcyx0aGlzLm5vcm1h
        bGl6ZShlKSl9LG9wdGlvbnNGb3JUeXBlOmZ1bmN0aW9uKGUsdCl7dGhpcy5w
        YXJlbnQmJmkoIm9wdGlvbnNGb3JUeXBlIiksdGhpcy5fdHlwZU9wdGlvbnMu
        c2V0KGUsdCl9LG9wdGlvbnM6ZnVuY3Rpb24oZSx0KXt0aGlzLm9wdGlvbnNG
        b3JUeXBlKGUsdCl9LHR5cGVJbmplY3Rpb246ZnVuY3Rpb24oZSx0LHIpe2Qo
        ciksdGhpcy5wYXJlbnQmJmkoInR5cGVJbmplY3Rpb24iKSxwKHRoaXMudHlw
        ZUluamVjdGlvbnMsZSx0LHIpfSxpbmplY3Rpb246ZnVuY3Rpb24oZSx0LHIp
        e3RoaXMucGFyZW50JiZpKCJpbmplY3Rpb24iKSxkKHIpO3ZhciBuPXRoaXMu
        bm9ybWFsaXplKHIpO2lmKC0xPT09ZS5pbmRleE9mKCI6IikpcmV0dXJuIHRo
        aXMudHlwZUluamVjdGlvbihlLHQsbik7ZChlKTt2YXIgbz10aGlzLm5vcm1h
        bGl6ZShlKTtiKHRoaXMuaW5qZWN0aW9ucyxvLHQsbil9LGZhY3RvcnlUeXBl
        SW5qZWN0aW9uOmZ1bmN0aW9uKGUsdCxyKXt0aGlzLnBhcmVudCYmaSgiZmFj
        dG9yeVR5cGVJbmplY3Rpb24iKSxwKHRoaXMuZmFjdG9yeVR5cGVJbmplY3Rp
        b25zLGUsdCx0aGlzLm5vcm1hbGl6ZShyKSkKfSxmYWN0b3J5SW5qZWN0aW9u
        OmZ1bmN0aW9uKGUsdCxyKXt0aGlzLnBhcmVudCYmaSgiaW5qZWN0aW9uIik7
        dmFyIG49dGhpcy5ub3JtYWxpemUoZSksbz10aGlzLm5vcm1hbGl6ZShyKTty
        ZXR1cm4gZChyKSwtMT09PWUuaW5kZXhPZigiOiIpP3RoaXMuZmFjdG9yeVR5
        cGVJbmplY3Rpb24obix0LG8pOihkKGUpLGIodGhpcy5mYWN0b3J5SW5qZWN0
        aW9ucyxuLHQsbyksdm9pZCAwKX0sZGVzdHJveTpmdW5jdGlvbigpe2Zvcih2
        YXIgZT0wLHQ9dGhpcy5jaGlsZHJlbi5sZW5ndGg7dD5lO2UrKyl0aGlzLmNo
        aWxkcmVuW2VdLmRlc3Ryb3koKTt0aGlzLmNoaWxkcmVuPVtdLG0odGhpcyxm
        dW5jdGlvbihlKXtlLmRlc3Ryb3koKX0pLHRoaXMucGFyZW50PXZvaWQgMCx0
        aGlzLmlzRGVzdHJveWVkPSEwfSxyZXNldDpmdW5jdGlvbigpe2Zvcih2YXIg
        ZT0wLHQ9dGhpcy5jaGlsZHJlbi5sZW5ndGg7dD5lO2UrKylmKHRoaXMuY2hp
        bGRyZW5bZV0pO2YodGhpcyl9fTt2YXIgdj0vXlteOl0rLis6W146XSskLzty
        ZXR1cm4gdH0pfSgpLGZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShyLG4saSxvKXt2
        YXIgYSxzLHU7aWYoIm9iamVjdCIhPXR5cGVvZiByfHxudWxsPT09cilyZXR1
        cm4gcjtpZihuJiYocz10KGkscikpPj0wKXJldHVybiBvW3NdO2lmKCJhcnJh
        eSI9PT1FbWJlci50eXBlT2Yocikpe2lmKGE9ci5zbGljZSgpLG4pZm9yKHM9
        YS5sZW5ndGg7LS1zPj0wOylhW3NdPWUoYVtzXSxuLGksbyl9ZWxzZSBpZihF
        bWJlci5Db3B5YWJsZSYmRW1iZXIuQ29weWFibGUuZGV0ZWN0KHIpKWE9ci5j
        b3B5KG4saSxvKTtlbHNle2E9e307Zm9yKHUgaW4gcilyLmhhc093blByb3Bl
        cnR5KHUpJiYiX18iIT09dS5zdWJzdHJpbmcoMCwyKSYmKGFbdV09bj9lKHJb
        dV0sbixpLG8pOnJbdV0pfXJldHVybiBuJiYoaS5wdXNoKHIpLG8ucHVzaChh
        KSksYX12YXIgdD1FbWJlci5FbnVtZXJhYmxlVXRpbHMuaW5kZXhPZjtpZihF
        bWJlci5jb21wYXJlPWZ1bmN0aW9uIGkoZSx0KXtpZihlPT09dClyZXR1cm4g
        MDt2YXIgcj1FbWJlci50eXBlT2YoZSksbj1FbWJlci50eXBlT2YodCksbz1F
        bWJlci5Db21wYXJhYmxlO2lmKG8pe2lmKCJpbnN0YW5jZSI9PT1yJiZvLmRl
        dGVjdChlLmNvbnN0cnVjdG9yKSlyZXR1cm4gZS5jb25zdHJ1Y3Rvci5jb21w
        YXJlKGUsdCk7aWYoImluc3RhbmNlIj09PW4mJm8uZGV0ZWN0KHQuY29uc3Ry
        dWN0b3IpKXJldHVybiAxLXQuY29uc3RydWN0b3IuY29tcGFyZSh0LGUpfXZh
        ciBhPUVtYmVyLk9SREVSX0RFRklOSVRJT05fTUFQUElORztpZighYSl7dmFy
        IHM9RW1iZXIuT1JERVJfREVGSU5JVElPTjthPUVtYmVyLk9SREVSX0RFRklO
        SVRJT05fTUFQUElORz17fTt2YXIgdSxsO2Zvcih1PTAsbD1zLmxlbmd0aDts
        PnU7Kyt1KWFbc1t1XV09dTtkZWxldGUgRW1iZXIuT1JERVJfREVGSU5JVElP
        Tn12YXIgYz1hW3JdLGg9YVtuXTtpZihoPmMpcmV0dXJuLTE7aWYoYz5oKXJl
        dHVybiAxO3N3aXRjaChyKXtjYXNlImJvb2xlYW4iOmNhc2UibnVtYmVyIjpy
        ZXR1cm4gdD5lPy0xOmU+dD8xOjA7Y2FzZSJzdHJpbmciOnZhciBtPWUubG9j
        YWxlQ29tcGFyZSh0KTtyZXR1cm4gMD5tPy0xOm0+MD8xOjA7Y2FzZSJhcnJh
        eSI6Zm9yKHZhciBmPWUubGVuZ3RoLHA9dC5sZW5ndGgsZD1NYXRoLm1pbihm
        LHApLGI9MCx2PTA7MD09PWImJmQ+djspYj1pKGVbdl0sdFt2XSksdisrO3Jl
        dHVybiAwIT09Yj9iOnA+Zj8tMTpmPnA/MTowO2Nhc2UiaW5zdGFuY2UiOnJl
        dHVybiBFbWJlci5Db21wYXJhYmxlJiZFbWJlci5Db21wYXJhYmxlLmRldGVj
        dChlKT9lLmNvbXBhcmUoZSx0KTowO2Nhc2UiZGF0ZSI6dmFyIEU9ZS5nZXRU
        aW1lKCksZz10LmdldFRpbWUoKTtyZXR1cm4gZz5FPy0xOkU+Zz8xOjA7ZGVm
        YXVsdDpyZXR1cm4gMH19LEVtYmVyLmNvcHk9ZnVuY3Rpb24odCxyKXtyZXR1
        cm4ib2JqZWN0IiE9dHlwZW9mIHR8fG51bGw9PT10P3Q6RW1iZXIuQ29weWFi
        bGUmJkVtYmVyLkNvcHlhYmxlLmRldGVjdCh0KT90LmNvcHkocik6ZSh0LHIs
        cj9bXTpudWxsLHI/W106bnVsbCl9LEVtYmVyLmlzRXF1YWw9ZnVuY3Rpb24o
        ZSx0KXtyZXR1cm4gZSYmImZ1bmN0aW9uIj09dHlwZW9mIGUuaXNFcXVhbD9l
        LmlzRXF1YWwodCk6ZT09PXR9LEVtYmVyLk9SREVSX0RFRklOSVRJT049RW1i
        ZXIuRU5WLk9SREVSX0RFRklOSVRJT058fFsidW5kZWZpbmVkIiwibnVsbCIs
        ImJvb2xlYW4iLCJudW1iZXIiLCJzdHJpbmciLCJhcnJheSIsIm9iamVjdCIs
        Imluc3RhbmNlIiwiZnVuY3Rpb24iLCJjbGFzcyIsImRhdGUiXSxFbWJlci5r
        ZXlzPU9iamVjdC5rZXlzLCFFbWJlci5rZXlzfHxFbWJlci5jcmVhdGUuaXNT
        aW11bGF0ZWQpe3ZhciByPVsiY29uc3RydWN0b3IiLCJoYXNPd25Qcm9wZXJ0
        eSIsImlzUHJvdG90eXBlT2YiLCJwcm9wZXJ0eUlzRW51bWVyYWJsZSIsInZh
        bHVlT2YiLCJ0b0xvY2FsZVN0cmluZyIsInRvU3RyaW5nIl0sbj1mdW5jdGlv
        bihlLHIsbil7Il9fIiE9PW4uc3Vic3RyaW5nKDAsMikmJiJfc3VwZXIiIT09
        biYmKHQocixuKT49MHx8ZS5oYXNPd25Qcm9wZXJ0eShuKSYmci5wdXNoKG4p
        KX07RW1iZXIua2V5cz1mdW5jdGlvbihlKXt2YXIgdCxpPVtdO2Zvcih0IGlu
        IGUpbihlLGksdCk7Zm9yKHZhciBvPTAsYT1yLmxlbmd0aDthPm87bysrKXQ9
        cltvXSxuKGUsaSx0KTtyZXR1cm4gaX19fSgpLGZ1bmN0aW9uKCl7dmFyIGU9
        L1sgX10vZyx0PXt9LHI9LyhbYS16XGRdKShbQS1aXSkvZyxuPS8oXC18X3xc
        LnxccykrKC4pPy9nLGk9LyhbYS16XGRdKShbQS1aXSspL2csbz0vXC18XHMr
        L2c7RW1iZXIuU1RSSU5HUz17fSxFbWJlci5TdHJpbmc9e2ZtdDpmdW5jdGlv
        bihlLHQpe3ZhciByPTA7cmV0dXJuIGUucmVwbGFjZSgvJUAoWzAtOV0rKT8v
        ZyxmdW5jdGlvbihlLG4pe3JldHVybiBuPW4/cGFyc2VJbnQobiwxMCktMTpy
        KyssZT10W25dLG51bGw9PT1lPyIobnVsbCkiOnZvaWQgMD09PWU/IiI6RW1i
        ZXIuaW5zcGVjdChlKX0pfSxsb2M6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZT1F
        bWJlci5TVFJJTkdTW2VdfHxlLEVtYmVyLlN0cmluZy5mbXQoZSx0KX0sdzpm
        dW5jdGlvbihlKXtyZXR1cm4gZS5zcGxpdCgvXHMrLyl9LGRlY2FtZWxpemU6
        ZnVuY3Rpb24oZSl7cmV0dXJuIGUucmVwbGFjZShyLCIkMV8kMiIpLnRvTG93
        ZXJDYXNlKCl9LGRhc2hlcml6ZTpmdW5jdGlvbihyKXt2YXIgbixpPXQsbz1p
        Lmhhc093blByb3BlcnR5KHIpO3JldHVybiBvP2lbcl06KG49RW1iZXIuU3Ry
        aW5nLmRlY2FtZWxpemUocikucmVwbGFjZShlLCItIiksaVtyXT1uLG4pfSxj
        YW1lbGl6ZTpmdW5jdGlvbihlKXtyZXR1cm4gZS5yZXBsYWNlKG4sZnVuY3Rp
        b24oZSx0LHIpe3JldHVybiByP3IudG9VcHBlckNhc2UoKToiIn0pLnJlcGxh
        Y2UoL14oW0EtWl0pLyxmdW5jdGlvbihlKXtyZXR1cm4gZS50b0xvd2VyQ2Fz
        ZSgpfSl9LGNsYXNzaWZ5OmZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1lLnNwbGl0
        KCIuIikscj1bXSxuPTAsaT10Lmxlbmd0aDtpPm47bisrKXt2YXIgbz1FbWJl
        ci5TdHJpbmcuY2FtZWxpemUodFtuXSk7ci5wdXNoKG8uY2hhckF0KDApLnRv
        VXBwZXJDYXNlKCkrby5zdWJzdHIoMSkpfXJldHVybiByLmpvaW4oIi4iKX0s
        dW5kZXJzY29yZTpmdW5jdGlvbihlKXtyZXR1cm4gZS5yZXBsYWNlKGksIiQx
        XyQyIikucmVwbGFjZShvLCJfIikudG9Mb3dlckNhc2UoKX0sY2FwaXRhbGl6
        ZTpmdW5jdGlvbihlKXtyZXR1cm4gZS5jaGFyQXQoMCkudG9VcHBlckNhc2Uo
        KStlLnN1YnN0cigxKX19fSgpLGZ1bmN0aW9uKCl7dmFyIGU9RW1iZXIuU3Ry
        aW5nLmZtdCx0PUVtYmVyLlN0cmluZy53LHI9RW1iZXIuU3RyaW5nLmxvYyxu
        PUVtYmVyLlN0cmluZy5jYW1lbGl6ZSxpPUVtYmVyLlN0cmluZy5kZWNhbWVs
        aXplLG89RW1iZXIuU3RyaW5nLmRhc2hlcml6ZSxhPUVtYmVyLlN0cmluZy51
        bmRlcnNjb3JlLHM9RW1iZXIuU3RyaW5nLmNhcGl0YWxpemUsdT1FbWJlci5T
        dHJpbmcuY2xhc3NpZnk7KEVtYmVyLkVYVEVORF9QUk9UT1RZUEVTPT09ITB8
        fEVtYmVyLkVYVEVORF9QUk9UT1RZUEVTLlN0cmluZykmJihTdHJpbmcucHJv
        dG90eXBlLmZtdD1mdW5jdGlvbigpe3JldHVybiBlKHRoaXMsYXJndW1lbnRz
        KX0sU3RyaW5nLnByb3RvdHlwZS53PWZ1bmN0aW9uKCl7cmV0dXJuIHQodGhp
        cyl9LFN0cmluZy5wcm90b3R5cGUubG9jPWZ1bmN0aW9uKCl7cmV0dXJuIHIo
        dGhpcyxhcmd1bWVudHMpfSxTdHJpbmcucHJvdG90eXBlLmNhbWVsaXplPWZ1
        bmN0aW9uKCl7cmV0dXJuIG4odGhpcyl9LFN0cmluZy5wcm90b3R5cGUuZGVj
        YW1lbGl6ZT1mdW5jdGlvbigpe3JldHVybiBpKHRoaXMpfSxTdHJpbmcucHJv
        dG90eXBlLmRhc2hlcml6ZT1mdW5jdGlvbigpe3JldHVybiBvKHRoaXMpfSxT
        dHJpbmcucHJvdG90eXBlLnVuZGVyc2NvcmU9ZnVuY3Rpb24oKXtyZXR1cm4g
        YSh0aGlzKX0sU3RyaW5nLnByb3RvdHlwZS5jbGFzc2lmeT1mdW5jdGlvbigp
        e3JldHVybiB1KHRoaXMpfSxTdHJpbmcucHJvdG90eXBlLmNhcGl0YWxpemU9
        ZnVuY3Rpb24oKXtyZXR1cm4gcyh0aGlzKX0pfSgpLGZ1bmN0aW9uKCl7dmFy
        IGU9RW1iZXIuZ2V0LHQ9RW1iZXIuc2V0LHI9QXJyYXkucHJvdG90eXBlLnNs
        aWNlLG49RW1iZXIuZ2V0UHJvcGVydGllcztFbWJlci5PYnNlcnZhYmxlPUVt
        YmVyLk1peGluLmNyZWF0ZSh7Z2V0OmZ1bmN0aW9uKHQpe3JldHVybiBlKHRo
        aXMsdCl9LGdldFByb3BlcnRpZXM6ZnVuY3Rpb24oKXtyZXR1cm4gbi5hcHBs
        eShudWxsLFt0aGlzXS5jb25jYXQoci5jYWxsKGFyZ3VtZW50cykpKX0sc2V0
        OmZ1bmN0aW9uKGUscil7cmV0dXJuIHQodGhpcyxlLHIpLHRoaXN9LHNldFBy
        b3BlcnRpZXM6ZnVuY3Rpb24oZSl7cmV0dXJuIEVtYmVyLnNldFByb3BlcnRp
        ZXModGhpcyxlKX0sYmVnaW5Qcm9wZXJ0eUNoYW5nZXM6ZnVuY3Rpb24oKXty
        ZXR1cm4gRW1iZXIuYmVnaW5Qcm9wZXJ0eUNoYW5nZXMoKSx0aGlzfSxlbmRQ
        cm9wZXJ0eUNoYW5nZXM6ZnVuY3Rpb24oKXtyZXR1cm4gRW1iZXIuZW5kUHJv
        cGVydHlDaGFuZ2VzKCksdGhpc30scHJvcGVydHlXaWxsQ2hhbmdlOmZ1bmN0
        aW9uKGUpe3JldHVybiBFbWJlci5wcm9wZXJ0eVdpbGxDaGFuZ2UodGhpcyxl
        KSx0aGlzfSxwcm9wZXJ0eURpZENoYW5nZTpmdW5jdGlvbihlKXtyZXR1cm4g
        RW1iZXIucHJvcGVydHlEaWRDaGFuZ2UodGhpcyxlKSx0aGlzfSxub3RpZnlQ
        cm9wZXJ0eUNoYW5nZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5wcm9wZXJ0
        eVdpbGxDaGFuZ2UoZSksdGhpcy5wcm9wZXJ0eURpZENoYW5nZShlKSx0aGlz
        fSxhZGRCZWZvcmVPYnNlcnZlcjpmdW5jdGlvbihlLHQscil7RW1iZXIuYWRk
        QmVmb3JlT2JzZXJ2ZXIodGhpcyxlLHQscil9LGFkZE9ic2VydmVyOmZ1bmN0
        aW9uKGUsdCxyKXtFbWJlci5hZGRPYnNlcnZlcih0aGlzLGUsdCxyKX0scmVt
        b3ZlT2JzZXJ2ZXI6ZnVuY3Rpb24oZSx0LHIpe0VtYmVyLnJlbW92ZU9ic2Vy
        dmVyKHRoaXMsZSx0LHIpfSxoYXNPYnNlcnZlckZvcjpmdW5jdGlvbihlKXty
        ZXR1cm4gRW1iZXIuaGFzTGlzdGVuZXJzKHRoaXMsZSsiOmNoYW5nZSIpfSxn
        ZXRXaXRoRGVmYXVsdDpmdW5jdGlvbihlLHQpe3JldHVybiBFbWJlci5nZXRX
        aXRoRGVmYXVsdCh0aGlzLGUsdCl9LGluY3JlbWVudFByb3BlcnR5OmZ1bmN0
        aW9uKHIsbil7cmV0dXJuIEVtYmVyLmlzTm9uZShuKSYmKG49MSksdCh0aGlz
        LHIsKGUodGhpcyxyKXx8MCkrbiksZSh0aGlzLHIpfSxkZWNyZW1lbnRQcm9w
        ZXJ0eTpmdW5jdGlvbihyLG4pe3JldHVybiBFbWJlci5pc05vbmUobikmJihu
        PTEpLHQodGhpcyxyLChlKHRoaXMscil8fDApLW4pLGUodGhpcyxyKX0sdG9n
        Z2xlUHJvcGVydHk6ZnVuY3Rpb24ocil7cmV0dXJuIHQodGhpcyxyLCFlKHRo
        aXMscikpLGUodGhpcyxyKX0sY2FjaGVGb3I6ZnVuY3Rpb24oZSl7cmV0dXJu
        IEVtYmVyLmNhY2hlRm9yKHRoaXMsZSl9LG9ic2VydmVyc0ZvcktleTpmdW5j
        dGlvbihlKXtyZXR1cm4gRW1iZXIub2JzZXJ2ZXJzRm9yKHRoaXMsZSl9fSl9
        KCksZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7dmFyIGUsdCxvPSExLGE9ZnVu
        Y3Rpb24oKXtvfHxhLnByb3RvKCksbih0aGlzLGkseSksbih0aGlzLCJfc3Vw
        ZXIiLHkpO3ZhciB1PXModGhpcyksbD11LnByb3RvO2lmKHUucHJvdG89dGhp
        cyxlKXt2YXIgbT1lO2U9bnVsbCx0aGlzLnJlb3Blbi5hcHBseSh0aGlzLG0p
        fWlmKHQpe3ZhciBmPXQ7dD1udWxsO2Zvcih2YXIgcD10aGlzLmNvbmNhdGVu
        YXRlZFByb3BlcnRpZXMsZD0wLHY9Zi5sZW5ndGg7dj5kO2QrKyl7dmFyIHc9
        ZltkXTtpZigib2JqZWN0IiE9dHlwZW9mIHcmJnZvaWQgMCE9PXcpdGhyb3cg
        bmV3IEVtYmVyLkVycm9yKCJFbWJlci5PYmplY3QuY3JlYXRlIG9ubHkgYWNj
        ZXB0cyBvYmplY3RzLiIpO2lmKHcpZm9yKHZhciBfPUVtYmVyLmtleXModyks
        Qz0wLE89Xy5sZW5ndGg7Tz5DO0MrKyl7dmFyIEE9X1tDXTtpZih3Lmhhc093
        blByb3BlcnR5KEEpKXt2YXIgUD13W0FdLHg9RW1iZXIuSVNfQklORElORztp
        Zih4LnRlc3QoQSkpe3ZhciBUPXUuYmluZGluZ3M7VD91Lmhhc093blByb3Bl
        cnR5KCJiaW5kaW5ncyIpfHwoVD11LmJpbmRpbmdzPXIodS5iaW5kaW5ncykp
        OlQ9dS5iaW5kaW5ncz17fSxUW0FdPVB9dmFyIFY9dS5kZXNjc1tBXTtpZihw
        JiZnKHAsQSk+PTApe3ZhciBTPXRoaXNbQV07UD1TPyJmdW5jdGlvbiI9PXR5
        cGVvZiBTLmNvbmNhdD9TLmNvbmNhdChQKTpFbWJlci5tYWtlQXJyYXkoUyku
        Y29uY2F0KFApOkVtYmVyLm1ha2VBcnJheShQKX1WP1Yuc2V0KHRoaXMsQSxQ
        KToiZnVuY3Rpb24iIT10eXBlb2YgdGhpcy5zZXRVbmtub3duUHJvcGVydHl8
        fEEgaW4gdGhpcz9FP0VtYmVyLmRlZmluZVByb3BlcnR5KHRoaXMsQSxudWxs
        LFApOnRoaXNbQV09UDp0aGlzLnNldFVua25vd25Qcm9wZXJ0eShBLFApfX19
        fWIodGhpcyx1KSx0aGlzLmluaXQuYXBwbHkodGhpcyxhcmd1bWVudHMpLHUu
        cHJvdG89bCxjKHRoaXMpLGgodGhpcywiaW5pdCIpfTtyZXR1cm4gYS50b1N0
        cmluZz1wLnByb3RvdHlwZS50b1N0cmluZyxhLndpbGxSZW9wZW49ZnVuY3Rp
        b24oKXtvJiYoYS5Qcm90b3R5cGVNaXhpbj1wLmNyZWF0ZShhLlByb3RvdHlw
        ZU1peGluKSksbz0hMX0sYS5faW5pdE1peGlucz1mdW5jdGlvbih0KXtlPXR9
        LGEuX2luaXRQcm9wZXJ0aWVzPWZ1bmN0aW9uKGUpe3Q9ZX0sYS5wcm90bz1m
        dW5jdGlvbigpe3ZhciBlPWEuc3VwZXJjbGFzcztyZXR1cm4gZSYmZS5wcm90
        bygpLG98fChvPSEwLGEuUHJvdG90eXBlTWl4aW4uYXBwbHlQYXJ0aWFsKGEu
        cHJvdG90eXBlKSxsKGEucHJvdG90eXBlKSksdGhpcy5wcm90b3R5cGV9LGF9
        ZnVuY3Rpb24gdChlKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gZX19dmFy
        IHI9KEVtYmVyLnNldCxFbWJlci5nZXQsRW1iZXIuY3JlYXRlKSxuPUVtYmVy
        LnBsYXRmb3JtLmRlZmluZVByb3BlcnR5LGk9RW1iZXIuR1VJRF9LRVksbz1F
        bWJlci5ndWlkRm9yLGE9RW1iZXIuZ2VuZXJhdGVHdWlkLHM9RW1iZXIubWV0
        YSx1PUVtYmVyLk1FVEFfS0VZLGw9RW1iZXIucmV3YXRjaCxjPUVtYmVyLmZp
        bmlzaENoYWlucyxoPUVtYmVyLnNlbmRFdmVudCxtPUVtYmVyLmRlc3Ryb3ks
        Zj1FbWJlci5ydW4uc2NoZWR1bGUscD1FbWJlci5NaXhpbixkPXAuX2FwcGx5
        LGI9cC5maW5pc2hQYXJ0aWFsLHY9cC5wcm90b3R5cGUucmVvcGVuLEU9RW1i
        ZXIuRU5WLk1BTkRBVE9SWV9TRVRURVIsZz1FbWJlci5FbnVtZXJhYmxlVXRp
        bHMuaW5kZXhPZix5PXtjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsZW51
        bWVyYWJsZTohMSx2YWx1ZTp2b2lkIDB9LHc9ZSgpO3cudG9TdHJpbmc9ZnVu
        Y3Rpb24oKXtyZXR1cm4iRW1iZXIuQ29yZU9iamVjdCJ9LHcuUHJvdG90eXBl
        TWl4aW49cC5jcmVhdGUoe3Jlb3BlbjpmdW5jdGlvbigpe3JldHVybiBkKHRo
        aXMsYXJndW1lbnRzLCEwKSx0aGlzfSxpbml0OmZ1bmN0aW9uKCl7fSxjb25j
        YXRlbmF0ZWRQcm9wZXJ0aWVzOm51bGwsaXNEZXN0cm95ZWQ6ITEsaXNEZXN0
        cm95aW5nOiExLGRlc3Ryb3k6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pc0Rl
        c3Ryb3lpbmc/dm9pZCAwOih0aGlzLmlzRGVzdHJveWluZz0hMCxmKCJhY3Rp
        b25zIix0aGlzLHRoaXMud2lsbERlc3Ryb3kpLGYoImRlc3Ryb3kiLHRoaXMs
        dGhpcy5fc2NoZWR1bGVkRGVzdHJveSksdGhpcyl9LHdpbGxEZXN0cm95OkVt
        YmVyLkssX3NjaGVkdWxlZERlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLmlzRGVz
        dHJveWVkfHwobSh0aGlzKSx0aGlzLmlzRGVzdHJveWVkPSEwKX0sYmluZDpm
        dW5jdGlvbihlLHQpe3JldHVybiB0IGluc3RhbmNlb2YgRW1iZXIuQmluZGlu
        Z3x8KHQ9RW1iZXIuQmluZGluZy5mcm9tKHQpKSx0LnRvKGUpLmNvbm5lY3Qo
        dGhpcyksdH0sdG9TdHJpbmc6ZnVuY3Rpb24oKXt2YXIgZT0iZnVuY3Rpb24i
        PT10eXBlb2YgdGhpcy50b1N0cmluZ0V4dGVuc2lvbixyPWU/IjoiK3RoaXMu
        dG9TdHJpbmdFeHRlbnNpb24oKToiIixuPSI8Iit0aGlzLmNvbnN0cnVjdG9y
        LnRvU3RyaW5nKCkrIjoiK28odGhpcykrcisiPiI7cmV0dXJuIHRoaXMudG9T
        dHJpbmc9dChuKSxufX0pLHcuUHJvdG90eXBlTWl4aW4ub3duZXJDb25zdHJ1
        Y3Rvcj13LEVtYmVyLmNvbmZpZy5vdmVycmlkZVByb3RvdHlwZU1peGluJiZF
        bWJlci5jb25maWcub3ZlcnJpZGVQcm90b3R5cGVNaXhpbih3LlByb3RvdHlw
        ZU1peGluKSx3Ll9fc3VwZXJfXz1udWxsO3ZhciBfPXAuY3JlYXRlKHtDbGFz
        c01peGluOkVtYmVyLnJlcXVpcmVkKCksUHJvdG90eXBlTWl4aW46RW1iZXIu
        cmVxdWlyZWQoKSxpc0NsYXNzOiEwLGlzTWV0aG9kOiExLGV4dGVuZDpmdW5j
        dGlvbigpe3ZhciB0LG49ZSgpO3JldHVybiBuLkNsYXNzTWl4aW49cC5jcmVh
        dGUodGhpcy5DbGFzc01peGluKSxuLlByb3RvdHlwZU1peGluPXAuY3JlYXRl
        KHRoaXMuUHJvdG90eXBlTWl4aW4pLG4uQ2xhc3NNaXhpbi5vd25lckNvbnN0
        cnVjdG9yPW4sbi5Qcm90b3R5cGVNaXhpbi5vd25lckNvbnN0cnVjdG9yPW4s
        di5hcHBseShuLlByb3RvdHlwZU1peGluLGFyZ3VtZW50cyksbi5zdXBlcmNs
        YXNzPXRoaXMsbi5fX3N1cGVyX189dGhpcy5wcm90b3R5cGUsdD1uLnByb3Rv
        dHlwZT1yKHRoaXMucHJvdG90eXBlKSx0LmNvbnN0cnVjdG9yPW4sYSh0KSxz
        KHQpLnByb3RvPXQsbi5DbGFzc01peGluLmFwcGx5KG4pLG59LGNyZWF0ZVdp
        dGhNaXhpbnM6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3JldHVybiBhcmd1bWVu
        dHMubGVuZ3RoPjAmJnRoaXMuX2luaXRNaXhpbnMoYXJndW1lbnRzKSxuZXcg
        ZX0sY3JlYXRlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztyZXR1cm4gYXJndW1l
        bnRzLmxlbmd0aD4wJiZ0aGlzLl9pbml0UHJvcGVydGllcyhhcmd1bWVudHMp
        LG5ldyBlfSxyZW9wZW46ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy53aWxsUmVv
        cGVuKCksdi5hcHBseSh0aGlzLlByb3RvdHlwZU1peGluLGFyZ3VtZW50cyks
        dGhpc30scmVvcGVuQ2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gdi5hcHBseSh0
        aGlzLkNsYXNzTWl4aW4sYXJndW1lbnRzKSxkKHRoaXMsYXJndW1lbnRzLCEx
        KSx0aGlzfSxkZXRlY3Q6ZnVuY3Rpb24oZSl7aWYoImZ1bmN0aW9uIiE9dHlw
        ZW9mIGUpcmV0dXJuITE7Zm9yKDtlOyl7aWYoZT09PXRoaXMpcmV0dXJuITA7
        ZT1lLnN1cGVyY2xhc3N9cmV0dXJuITF9LGRldGVjdEluc3RhbmNlOmZ1bmN0
        aW9uKGUpe3JldHVybiBlIGluc3RhbmNlb2YgdGhpc30sbWV0YUZvclByb3Bl
        cnR5OmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMucHJvdG8oKVt1XSxyPXQmJnQu
        ZGVzY3NbZV07cmV0dXJuIHIuX21ldGF8fHt9fSxlYWNoQ29tcHV0ZWRQcm9w
        ZXJ0eTpmdW5jdGlvbihlLHQpe3ZhciByLG49dGhpcy5wcm90bygpLGk9cyhu
        KS5kZXNjcyxvPXt9O2Zvcih2YXIgYSBpbiBpKXI9aVthXSxyIGluc3RhbmNl
        b2YgRW1iZXIuQ29tcHV0ZWRQcm9wZXJ0eSYmZS5jYWxsKHR8fHRoaXMsYSxy
        Ll9tZXRhfHxvKX19KTtfLm93bmVyQ29uc3RydWN0b3I9dyxFbWJlci5jb25m
        aWcub3ZlcnJpZGVDbGFzc01peGluJiZFbWJlci5jb25maWcub3ZlcnJpZGVD
        bGFzc01peGluKF8pLHcuQ2xhc3NNaXhpbj1fLF8uYXBwbHkodyksRW1iZXIu
        Q29yZU9iamVjdD13fSgpLGZ1bmN0aW9uKCl7RW1iZXIuT2JqZWN0PUVtYmVy
        LkNvcmVPYmplY3QuZXh0ZW5kKEVtYmVyLk9ic2VydmFibGUpLEVtYmVyLk9i
        amVjdC50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiJFbWJlci5PYmplY3Qi
        fX0oKSxmdW5jdGlvbigpe2Z1bmN0aW9uIGUodCxyLGkpe3ZhciBhPXQubGVu
        Z3RoO2xbdC5qb2luKCIuIildPXI7Zm9yKHZhciBzIGluIHIpaWYoYy5jYWxs
        KHIscykpe3ZhciB1PXJbc107aWYodFthXT1zLHUmJnUudG9TdHJpbmc9PT1u
        KXUudG9TdHJpbmc9byh0LmpvaW4oIi4iKSksdVttXT10LmpvaW4oIi4iKTtl
        bHNlIGlmKHUmJnUuaXNOYW1lc3BhY2Upe2lmKGlbaCh1KV0pY29udGludWU7
        aVtoKHUpXT0hMCxlKHQsdSxpKX19dC5sZW5ndGg9YX1mdW5jdGlvbiB0KCl7
        dmFyIGUsdCxyPUVtYmVyLk5hbWVzcGFjZSxuPUVtYmVyLmxvb2t1cDtpZigh
        ci5QUk9DRVNTRUQpZm9yKHZhciBpIGluIG4paWYoInBhcmVudCIhPT1pJiYi
        dG9wIiE9PWkmJiJmcmFtZUVsZW1lbnQiIT09aSYmIndlYmtpdFN0b3JhZ2VJ
        bmZvIiE9PWkmJiEoImdsb2JhbFN0b3JhZ2UiPT09aSYmbi5TdG9yYWdlTGlz
        dCYmbi5nbG9iYWxTdG9yYWdlIGluc3RhbmNlb2Ygbi5TdG9yYWdlTGlzdHx8
        bi5oYXNPd25Qcm9wZXJ0eSYmIW4uaGFzT3duUHJvcGVydHkoaSkpKXt0cnl7
        ZT1FbWJlci5sb29rdXBbaV0sdD1lJiZlLmlzTmFtZXNwYWNlfWNhdGNoKG8p
        e2NvbnRpbnVlfXQmJihlW21dPWkpfX1mdW5jdGlvbiByKGUpe3ZhciB0PWUu
        c3VwZXJjbGFzcztyZXR1cm4gdD90W21dP3RbbV06cih0KTp2b2lkIDB9ZnVu
        Y3Rpb24gbigpe0VtYmVyLkJPT1RFRHx8dGhpc1ttXXx8aSgpO3ZhciBlO2lm
        KHRoaXNbbV0pZT10aGlzW21dO2Vsc2UgaWYodGhpcy5fdG9TdHJpbmcpZT10
        aGlzLl90b1N0cmluZztlbHNle3ZhciB0PXIodGhpcyk7ZT10PyIoc3ViY2xh
        c3Mgb2YgIit0KyIpIjoiKHVua25vd24gbWl4aW4pIix0aGlzLnRvU3RyaW5n
        PW8oZSl9cmV0dXJuIGV9ZnVuY3Rpb24gaSgpe3ZhciByPSF1LlBST0NFU1NF
        RCxuPUVtYmVyLmFueVVucHJvY2Vzc2VkTWl4aW5zO2lmKHImJih0KCksdS5Q
        Uk9DRVNTRUQ9ITApLHJ8fG4pe2Zvcih2YXIgaSxvPXUuTkFNRVNQQUNFUyxh
        PTAscz1vLmxlbmd0aDtzPmE7YSsrKWk9b1thXSxlKFtpLnRvU3RyaW5nKCld
        LGkse30pO0VtYmVyLmFueVVucHJvY2Vzc2VkTWl4aW5zPSExfX1mdW5jdGlv
        biBvKGUpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiBlfX12YXIgYT1FbWJl
        ci5nZXQscz1FbWJlci5BcnJheVBvbHlmaWxscy5pbmRleE9mLHU9RW1iZXIu
        TmFtZXNwYWNlPUVtYmVyLk9iamVjdC5leHRlbmQoe2lzTmFtZXNwYWNlOiEw
        LGluaXQ6ZnVuY3Rpb24oKXtFbWJlci5OYW1lc3BhY2UuTkFNRVNQQUNFUy5w
        dXNoKHRoaXMpLEVtYmVyLk5hbWVzcGFjZS5QUk9DRVNTRUQ9ITF9LHRvU3Ry
        aW5nOmZ1bmN0aW9uKCl7dmFyIGU9YSh0aGlzLCJuYW1lIik7cmV0dXJuIGU/
        ZToodCgpLHRoaXNbRW1iZXIuR1VJRF9LRVkrIl9uYW1lIl0pfSxuYW1lQ2xh
        c3NlczpmdW5jdGlvbigpe2UoW3RoaXMudG9TdHJpbmcoKV0sdGhpcyx7fSl9
        LGRlc3Ryb3k6ZnVuY3Rpb24oKXt2YXIgZT1FbWJlci5OYW1lc3BhY2UuTkFN
        RVNQQUNFUztFbWJlci5sb29rdXBbdGhpcy50b1N0cmluZygpXT12b2lkIDAs
        ZS5zcGxpY2Uocy5jYWxsKGUsdGhpcyksMSksdGhpcy5fc3VwZXIoKX19KTt1
        LnJlb3BlbkNsYXNzKHtOQU1FU1BBQ0VTOltFbWJlcl0sTkFNRVNQQUNFU19C
        WV9JRDp7fSxQUk9DRVNTRUQ6ITEscHJvY2Vzc0FsbDppLGJ5TmFtZTpmdW5j
        dGlvbihlKXtyZXR1cm4gRW1iZXIuQk9PVEVEfHxpKCksbFtlXX19KTt2YXIg
        bD11Lk5BTUVTUEFDRVNfQllfSUQsYz17fS5oYXNPd25Qcm9wZXJ0eSxoPUVt
        YmVyLmd1aWRGb3IsbT1FbWJlci5OQU1FX0tFWT1FbWJlci5HVUlEX0tFWSsi
        X25hbWUiO0VtYmVyLk1peGluLnByb3RvdHlwZS50b1N0cmluZz1ufSgpLGZ1
        bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQpe3ZhciByPXQuc2xpY2UoOCk7ciBp
        biB0aGlzfHx1KHRoaXMscil9ZnVuY3Rpb24gdChlLHQpe3ZhciByPXQuc2xp
        Y2UoOCk7ciBpbiB0aGlzfHxsKHRoaXMscil9dmFyIHI9RW1iZXIuZ2V0LG49
        RW1iZXIuc2V0LGk9KEVtYmVyLlN0cmluZy5mbXQsRW1iZXIuYWRkQmVmb3Jl
        T2JzZXJ2ZXIpLG89RW1iZXIuYWRkT2JzZXJ2ZXIsYT1FbWJlci5yZW1vdmVC
        ZWZvcmVPYnNlcnZlcixzPUVtYmVyLnJlbW92ZU9ic2VydmVyLHU9RW1iZXIu
        cHJvcGVydHlXaWxsQ2hhbmdlLGw9RW1iZXIucHJvcGVydHlEaWRDaGFuZ2Us
        Yz1FbWJlci5tZXRhLGg9RW1iZXIuZGVmaW5lUHJvcGVydHk7RW1iZXIuT2Jq
        ZWN0UHJveHk9RW1iZXIuT2JqZWN0LmV4dGVuZCh7Y29udGVudDpudWxsLF9j
        b250ZW50RGlkQ2hhbmdlOkVtYmVyLm9ic2VydmVyKCJjb250ZW50IixmdW5j
        dGlvbigpe30pLGlzVHJ1dGh5OkVtYmVyLmNvbXB1dGVkLmJvb2woImNvbnRl
        bnQiKSxfZGVidWdDb250YWluZXJLZXk6bnVsbCx3aWxsV2F0Y2hQcm9wZXJ0
        eTpmdW5jdGlvbihyKXt2YXIgbj0iY29udGVudC4iK3I7aSh0aGlzLG4sbnVs
        bCxlKSxvKHRoaXMsbixudWxsLHQpfSxkaWRVbndhdGNoUHJvcGVydHk6ZnVu
        Y3Rpb24ocil7dmFyIG49ImNvbnRlbnQuIityO2EodGhpcyxuLG51bGwsZSks
        cyh0aGlzLG4sbnVsbCx0KX0sdW5rbm93blByb3BlcnR5OmZ1bmN0aW9uKGUp
        e3ZhciB0PXIodGhpcywiY29udGVudCIpO3JldHVybiB0P3IodCxlKTp2b2lk
        IDB9LHNldFVua25vd25Qcm9wZXJ0eTpmdW5jdGlvbihlLHQpe3ZhciBpPWMo
        dGhpcyk7aWYoaS5wcm90bz09PXRoaXMpcmV0dXJuIGgodGhpcyxlLG51bGws
        dCksdDt2YXIgbz1yKHRoaXMsImNvbnRlbnQiKTtyZXR1cm4gbihvLGUsdCl9
        fSl9KCksZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7cmV0dXJuIDA9PT1zLmxl
        bmd0aD97fTpzLnBvcCgpfWZ1bmN0aW9uIHQoZSl7cmV0dXJuIHMucHVzaChl
        KSxudWxsfWZ1bmN0aW9uIHIoZSx0KXtmdW5jdGlvbiByKHIpe3ZhciBvPW4o
        cixlKTtyZXR1cm4gaT90PT09bzohIW99dmFyIGk9Mj09PWFyZ3VtZW50cy5s
        ZW5ndGg7cmV0dXJuIHJ9dmFyIG49RW1iZXIuZ2V0LGk9RW1iZXIuc2V0LG89
        QXJyYXkucHJvdG90eXBlLnNsaWNlLGE9RW1iZXIuRW51bWVyYWJsZVV0aWxz
        LmluZGV4T2Yscz1bXTtFbWJlci5FbnVtZXJhYmxlPUVtYmVyLk1peGluLmNy
        ZWF0ZSh7bmV4dE9iamVjdDpFbWJlci5yZXF1aXJlZChGdW5jdGlvbiksZmly
        c3RPYmplY3Q6RW1iZXIuY29tcHV0ZWQoZnVuY3Rpb24oKXtpZigwPT09bih0
        aGlzLCJsZW5ndGgiKSlyZXR1cm4gdm9pZCAwO3ZhciByLGk9ZSgpO3JldHVy
        biByPXRoaXMubmV4dE9iamVjdCgwLG51bGwsaSksdChpKSxyfSkucHJvcGVy
        dHkoIltdIiksbGFzdE9iamVjdDpFbWJlci5jb21wdXRlZChmdW5jdGlvbigp
        e3ZhciByPW4odGhpcywibGVuZ3RoIik7aWYoMD09PXIpcmV0dXJuIHZvaWQg
        MDt2YXIgaSxvPWUoKSxhPTAscz1udWxsO2RvIHM9aSxpPXRoaXMubmV4dE9i
        amVjdChhKysscyxvKTt3aGlsZSh2b2lkIDAhPT1pKTtyZXR1cm4gdChvKSxz
        fSkucHJvcGVydHkoIltdIiksY29udGFpbnM6ZnVuY3Rpb24oZSl7cmV0dXJu
        IHZvaWQgMCE9PXRoaXMuZmluZChmdW5jdGlvbih0KXtyZXR1cm4gdD09PWV9
        KX0sZm9yRWFjaDpmdW5jdGlvbihyLGkpe2lmKCJmdW5jdGlvbiIhPXR5cGVv
        ZiByKXRocm93IG5ldyBUeXBlRXJyb3I7dmFyIG89bih0aGlzLCJsZW5ndGgi
        KSxhPW51bGwscz1lKCk7dm9pZCAwPT09aSYmKGk9bnVsbCk7Zm9yKHZhciB1
        PTA7bz51O3UrKyl7dmFyIGw9dGhpcy5uZXh0T2JqZWN0KHUsYSxzKTtyLmNh
        bGwoaSxsLHUsdGhpcyksYT1sfXJldHVybiBhPW51bGwscz10KHMpLHRoaXN9
        LGdldEVhY2g6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMubWFwQnkoZSl9LHNl
        dEVhY2g6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5mb3JFYWNoKGZ1bmN0
        aW9uKHIpe2kocixlLHQpfSl9LG1hcDpmdW5jdGlvbihlLHQpe3ZhciByPUVt
        YmVyLkEoKTtyZXR1cm4gdGhpcy5mb3JFYWNoKGZ1bmN0aW9uKG4saSxvKXty
        W2ldPWUuY2FsbCh0LG4saSxvKX0pLHJ9LG1hcEJ5OmZ1bmN0aW9uKGUpe3Jl
        dHVybiB0aGlzLm1hcChmdW5jdGlvbih0KXtyZXR1cm4gbih0LGUpfSl9LG1h
        cFByb3BlcnR5OkVtYmVyLmFsaWFzTWV0aG9kKCJtYXBCeSIpLGZpbHRlcjpm
        dW5jdGlvbihlLHQpe3ZhciByPUVtYmVyLkEoKTtyZXR1cm4gdGhpcy5mb3JF
        YWNoKGZ1bmN0aW9uKG4saSxvKXtlLmNhbGwodCxuLGksbykmJnIucHVzaChu
        KX0pLHJ9LHJlamVjdDpmdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLmZpbHRl
        cihmdW5jdGlvbigpe3JldHVybiFlLmFwcGx5KHQsYXJndW1lbnRzKX0pfSxm
        aWx0ZXJCeTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmZpbHRlcihyLmFwcGx5
        KHRoaXMsYXJndW1lbnRzKSl9LGZpbHRlclByb3BlcnR5OkVtYmVyLmFsaWFz
        TWV0aG9kKCJmaWx0ZXJCeSIpLHJlamVjdEJ5OmZ1bmN0aW9uKGUsdCl7dmFy
        IHI9ZnVuY3Rpb24ocil7cmV0dXJuIG4ocixlKT09PXR9LGk9ZnVuY3Rpb24o
        dCl7cmV0dXJuISFuKHQsZSl9LG89Mj09PWFyZ3VtZW50cy5sZW5ndGg/cjpp
        O3JldHVybiB0aGlzLnJlamVjdChvKX0scmVqZWN0UHJvcGVydHk6RW1iZXIu
        YWxpYXNNZXRob2QoInJlamVjdEJ5IiksZmluZDpmdW5jdGlvbihyLGkpe3Zh
        ciBvPW4odGhpcywibGVuZ3RoIik7dm9pZCAwPT09aSYmKGk9bnVsbCk7Zm9y
        KHZhciBhLHMsdT1udWxsLGw9ITEsYz1lKCksaD0wO28+aCYmIWw7aCsrKWE9
        dGhpcy5uZXh0T2JqZWN0KGgsdSxjKSwobD1yLmNhbGwoaSxhLGgsdGhpcykp
        JiYocz1hKSx1PWE7cmV0dXJuIGE9dT1udWxsLGM9dChjKSxzfSxmaW5kQnk6
        ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5maW5kKHIuYXBwbHkodGhpcyxhcmd1
        bWVudHMpKX0sZmluZFByb3BlcnR5OkVtYmVyLmFsaWFzTWV0aG9kKCJmaW5k
        QnkiKSxldmVyeTpmdW5jdGlvbihlLHQpe3JldHVybiF0aGlzLmZpbmQoZnVu
        Y3Rpb24ocixuLGkpe3JldHVybiFlLmNhbGwodCxyLG4saSl9KX0sZXZlcnlC
        eTpFbWJlci5hbGlhc01ldGhvZCgiaXNFdmVyeSIpLGV2ZXJ5UHJvcGVydHk6
        RW1iZXIuYWxpYXNNZXRob2QoImlzRXZlcnkiKSxpc0V2ZXJ5OmZ1bmN0aW9u
        KCl7cmV0dXJuIHRoaXMuZXZlcnkoci5hcHBseSh0aGlzLGFyZ3VtZW50cykp
        fSxhbnk6ZnVuY3Rpb24ocixpKXt2YXIgbyxhLHM9bih0aGlzLCJsZW5ndGgi
        KSx1PWUoKSxsPSExLGM9bnVsbDtmb3Iodm9pZCAwPT09aSYmKGk9bnVsbCks
        YT0wO3M+YSYmIWw7YSsrKW89dGhpcy5uZXh0T2JqZWN0KGEsYyx1KSxsPXIu
        Y2FsbChpLG8sYSx0aGlzKSxjPW87cmV0dXJuIG89Yz1udWxsLHU9dCh1KSxs
        fSxzb21lOkVtYmVyLmFsaWFzTWV0aG9kKCJhbnkiKSxpc0FueTpmdW5jdGlv
        bigpe3JldHVybiB0aGlzLmFueShyLmFwcGx5KHRoaXMsYXJndW1lbnRzKSl9
        LGFueUJ5OkVtYmVyLmFsaWFzTWV0aG9kKCJpc0FueSIpLHNvbWVQcm9wZXJ0
        eTpFbWJlci5hbGlhc01ldGhvZCgiaXNBbnkiKSxyZWR1Y2U6ZnVuY3Rpb24o
        ZSx0LHIpe2lmKCJmdW5jdGlvbiIhPXR5cGVvZiBlKXRocm93IG5ldyBUeXBl
        RXJyb3I7dmFyIG49dDtyZXR1cm4gdGhpcy5mb3JFYWNoKGZ1bmN0aW9uKHQs
        aSl7bj1lKG4sdCxpLHRoaXMscil9LHRoaXMpLG59LGludm9rZTpmdW5jdGlv
        bihlKXt2YXIgdCxyPUVtYmVyLkEoKTtyZXR1cm4gYXJndW1lbnRzLmxlbmd0
        aD4xJiYodD1vLmNhbGwoYXJndW1lbnRzLDEpKSx0aGlzLmZvckVhY2goZnVu
        Y3Rpb24obixpKXt2YXIgbz1uJiZuW2VdOyJmdW5jdGlvbiI9PXR5cGVvZiBv
        JiYocltpXT10P28uYXBwbHkobix0KTpuW2VdKCkpfSx0aGlzKSxyfSx0b0Fy
        cmF5OmZ1bmN0aW9uKCl7dmFyIGU9RW1iZXIuQSgpO3JldHVybiB0aGlzLmZv
        ckVhY2goZnVuY3Rpb24odCxyKXtlW3JdPXR9KSxlfSxjb21wYWN0OmZ1bmN0
        aW9uKCl7cmV0dXJuIHRoaXMuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiBu
        dWxsIT1lfSl9LHdpdGhvdXQ6ZnVuY3Rpb24oZSl7aWYoIXRoaXMuY29udGFp
        bnMoZSkpcmV0dXJuIHRoaXM7dmFyIHQ9RW1iZXIuQSgpO3JldHVybiB0aGlz
        LmZvckVhY2goZnVuY3Rpb24ocil7ciE9PWUmJih0W3QubGVuZ3RoXT1yKX0p
        LHR9LHVuaXE6ZnVuY3Rpb24oKXt2YXIgZT1FbWJlci5BKCk7cmV0dXJuIHRo
        aXMuZm9yRWFjaChmdW5jdGlvbih0KXthKGUsdCk8MCYmZS5wdXNoKHQpfSks
        ZX0sIltdIjpFbWJlci5jb21wdXRlZChmdW5jdGlvbigpe3JldHVybiB0aGlz
        fSksYWRkRW51bWVyYWJsZU9ic2VydmVyOmZ1bmN0aW9uKGUsdCl7dmFyIHI9
        dCYmdC53aWxsQ2hhbmdlfHwiZW51bWVyYWJsZVdpbGxDaGFuZ2UiLGk9dCYm
        dC5kaWRDaGFuZ2V8fCJlbnVtZXJhYmxlRGlkQ2hhbmdlIixvPW4odGhpcywi
        aGFzRW51bWVyYWJsZU9ic2VydmVycyIpO3JldHVybiBvfHxFbWJlci5wcm9w
        ZXJ0eVdpbGxDaGFuZ2UodGhpcywiaGFzRW51bWVyYWJsZU9ic2VydmVycyIp
        LEVtYmVyLmFkZExpc3RlbmVyKHRoaXMsIkBlbnVtZXJhYmxlOmJlZm9yZSIs
        ZSxyKSxFbWJlci5hZGRMaXN0ZW5lcih0aGlzLCJAZW51bWVyYWJsZTpjaGFu
        Z2UiLGUsaSksb3x8RW1iZXIucHJvcGVydHlEaWRDaGFuZ2UodGhpcywiaGFz
        RW51bWVyYWJsZU9ic2VydmVycyIpLHRoaXN9LHJlbW92ZUVudW1lcmFibGVP
        YnNlcnZlcjpmdW5jdGlvbihlLHQpe3ZhciByPXQmJnQud2lsbENoYW5nZXx8
        ImVudW1lcmFibGVXaWxsQ2hhbmdlIixpPXQmJnQuZGlkQ2hhbmdlfHwiZW51
        bWVyYWJsZURpZENoYW5nZSIsbz1uKHRoaXMsImhhc0VudW1lcmFibGVPYnNl
        cnZlcnMiKTtyZXR1cm4gbyYmRW1iZXIucHJvcGVydHlXaWxsQ2hhbmdlKHRo
        aXMsImhhc0VudW1lcmFibGVPYnNlcnZlcnMiKSxFbWJlci5yZW1vdmVMaXN0
        ZW5lcih0aGlzLCJAZW51bWVyYWJsZTpiZWZvcmUiLGUsciksRW1iZXIucmVt
        b3ZlTGlzdGVuZXIodGhpcywiQGVudW1lcmFibGU6Y2hhbmdlIixlLGkpLG8m
        JkVtYmVyLnByb3BlcnR5RGlkQ2hhbmdlKHRoaXMsImhhc0VudW1lcmFibGVP
        YnNlcnZlcnMiKSx0aGlzfSxoYXNFbnVtZXJhYmxlT2JzZXJ2ZXJzOkVtYmVy
        LmNvbXB1dGVkKGZ1bmN0aW9uKCl7cmV0dXJuIEVtYmVyLmhhc0xpc3RlbmVy
        cyh0aGlzLCJAZW51bWVyYWJsZTpjaGFuZ2UiKXx8RW1iZXIuaGFzTGlzdGVu
        ZXJzKHRoaXMsIkBlbnVtZXJhYmxlOmJlZm9yZSIpfSksZW51bWVyYWJsZUNv
        bnRlbnRXaWxsQ2hhbmdlOmZ1bmN0aW9uKGUsdCl7dmFyIHIsaSxvO3JldHVy
        biByPSJudW1iZXIiPT10eXBlb2YgZT9lOmU/bihlLCJsZW5ndGgiKTplPS0x
        LGk9Im51bWJlciI9PXR5cGVvZiB0P3Q6dD9uKHQsImxlbmd0aCIpOnQ9LTEs
        bz0wPml8fDA+cnx8aS1yIT09MCwtMT09PWUmJihlPW51bGwpLC0xPT09dCYm
        KHQ9bnVsbCksRW1iZXIucHJvcGVydHlXaWxsQ2hhbmdlKHRoaXMsIltdIiks
        byYmRW1iZXIucHJvcGVydHlXaWxsQ2hhbmdlKHRoaXMsImxlbmd0aCIpLEVt
        YmVyLnNlbmRFdmVudCh0aGlzLCJAZW51bWVyYWJsZTpiZWZvcmUiLFt0aGlz
        LGUsdF0pLHRoaXN9LGVudW1lcmFibGVDb250ZW50RGlkQ2hhbmdlOmZ1bmN0
        aW9uKGUsdCl7dmFyIHIsaSxvO3JldHVybiByPSJudW1iZXIiPT10eXBlb2Yg
        ZT9lOmU/bihlLCJsZW5ndGgiKTplPS0xLGk9Im51bWJlciI9PXR5cGVvZiB0
        P3Q6dD9uKHQsImxlbmd0aCIpOnQ9LTEsbz0wPml8fDA+cnx8aS1yIT09MCwt
        MT09PWUmJihlPW51bGwpLC0xPT09dCYmKHQ9bnVsbCksRW1iZXIuc2VuZEV2
        ZW50KHRoaXMsIkBlbnVtZXJhYmxlOmNoYW5nZSIsW3RoaXMsZSx0XSksbyYm
        RW1iZXIucHJvcGVydHlEaWRDaGFuZ2UodGhpcywibGVuZ3RoIiksRW1iZXIu
        cHJvcGVydHlEaWRDaGFuZ2UodGhpcywiW10iKSx0aGlzfSxzb3J0Qnk6ZnVu
        Y3Rpb24oKXt2YXIgZT1hcmd1bWVudHM7cmV0dXJuIHRoaXMudG9BcnJheSgp
        LnNvcnQoZnVuY3Rpb24odCxyKXtmb3IodmFyIGk9MDtpPGUubGVuZ3RoO2kr
        Kyl7dmFyIG89ZVtpXSxhPW4odCxvKSxzPW4ocixvKSx1PUVtYmVyLmNvbXBh
        cmUoYSxzKTtpZih1KXJldHVybiB1fXJldHVybiAwfSl9fSl9KCksZnVuY3Rp
        b24oKXt2YXIgZT1FbWJlci5nZXQsdD0oRW1iZXIuc2V0LEVtYmVyLmlzTm9u
        ZSkscj1FbWJlci5FbnVtZXJhYmxlVXRpbHMubWFwLG49RW1iZXIuY2FjaGVG
        b3I7RW1iZXIuQXJyYXk9RW1iZXIuTWl4aW4uY3JlYXRlKEVtYmVyLkVudW1l
        cmFibGUse2xlbmd0aDpFbWJlci5yZXF1aXJlZCgpLG9iamVjdEF0OmZ1bmN0
        aW9uKHQpe3JldHVybiAwPnR8fHQ+PWUodGhpcywibGVuZ3RoIik/dm9pZCAw
        OmUodGhpcyx0KX0sb2JqZWN0c0F0OmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7
        cmV0dXJuIHIoZSxmdW5jdGlvbihlKXtyZXR1cm4gdC5vYmplY3RBdChlKX0p
        fSxuZXh0T2JqZWN0OmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLm9iamVjdEF0
        KGUpfSwiW10iOkVtYmVyLmNvbXB1dGVkKGZ1bmN0aW9uKHQscil7cmV0dXJu
        IHZvaWQgMCE9PXImJnRoaXMucmVwbGFjZSgwLGUodGhpcywibGVuZ3RoIiks
        ciksdGhpc30pLGZpcnN0T2JqZWN0OkVtYmVyLmNvbXB1dGVkKGZ1bmN0aW9u
        KCl7cmV0dXJuIHRoaXMub2JqZWN0QXQoMCl9KSxsYXN0T2JqZWN0OkVtYmVy
        LmNvbXB1dGVkKGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub2JqZWN0QXQoZSh0
        aGlzLCJsZW5ndGgiKS0xKX0pLGNvbnRhaW5zOmZ1bmN0aW9uKGUpe3JldHVy
        biB0aGlzLmluZGV4T2YoZSk+PTB9LHNsaWNlOmZ1bmN0aW9uKHIsbil7dmFy
        IGk9RW1iZXIuQSgpLG89ZSh0aGlzLCJsZW5ndGgiKTtmb3IodChyKSYmKHI9
        MCksKHQobil8fG4+bykmJihuPW8pLDA+ciYmKHI9bytyKSwwPm4mJihuPW8r
        bik7bj5yOylpW2kubGVuZ3RoXT10aGlzLm9iamVjdEF0KHIrKyk7cmV0dXJu
        IGl9LGluZGV4T2Y6ZnVuY3Rpb24odCxyKXt2YXIgbixpPWUodGhpcywibGVu
        Z3RoIik7Zm9yKHZvaWQgMD09PXImJihyPTApLDA+ciYmKHIrPWkpLG49cjtp
        Pm47bisrKWlmKHRoaXMub2JqZWN0QXQobik9PT10KXJldHVybiBuO3JldHVy
        bi0xfSxsYXN0SW5kZXhPZjpmdW5jdGlvbih0LHIpe3ZhciBuLGk9ZSh0aGlz
        LCJsZW5ndGgiKTtmb3IoKHZvaWQgMD09PXJ8fHI+PWkpJiYocj1pLTEpLDA+
        ciYmKHIrPWkpLG49cjtuPj0wO24tLSlpZih0aGlzLm9iamVjdEF0KG4pPT09
        dClyZXR1cm4gbjtyZXR1cm4tMX0sYWRkQXJyYXlPYnNlcnZlcjpmdW5jdGlv
        bih0LHIpe3ZhciBuPXImJnIud2lsbENoYW5nZXx8ImFycmF5V2lsbENoYW5n
        ZSIsaT1yJiZyLmRpZENoYW5nZXx8ImFycmF5RGlkQ2hhbmdlIixvPWUodGhp
        cywiaGFzQXJyYXlPYnNlcnZlcnMiKTtyZXR1cm4gb3x8RW1iZXIucHJvcGVy
        dHlXaWxsQ2hhbmdlKHRoaXMsImhhc0FycmF5T2JzZXJ2ZXJzIiksRW1iZXIu
        YWRkTGlzdGVuZXIodGhpcywiQGFycmF5OmJlZm9yZSIsdCxuKSxFbWJlci5h
        ZGRMaXN0ZW5lcih0aGlzLCJAYXJyYXk6Y2hhbmdlIix0LGkpLG98fEVtYmVy
        LnByb3BlcnR5RGlkQ2hhbmdlKHRoaXMsImhhc0FycmF5T2JzZXJ2ZXJzIiks
        dGhpc30scmVtb3ZlQXJyYXlPYnNlcnZlcjpmdW5jdGlvbih0LHIpe3ZhciBu
        PXImJnIud2lsbENoYW5nZXx8ImFycmF5V2lsbENoYW5nZSIsaT1yJiZyLmRp
        ZENoYW5nZXx8ImFycmF5RGlkQ2hhbmdlIixvPWUodGhpcywiaGFzQXJyYXlP
        YnNlcnZlcnMiKTtyZXR1cm4gbyYmRW1iZXIucHJvcGVydHlXaWxsQ2hhbmdl
        KHRoaXMsImhhc0FycmF5T2JzZXJ2ZXJzIiksRW1iZXIucmVtb3ZlTGlzdGVu
        ZXIodGhpcywiQGFycmF5OmJlZm9yZSIsdCxuKSxFbWJlci5yZW1vdmVMaXN0
        ZW5lcih0aGlzLCJAYXJyYXk6Y2hhbmdlIix0LGkpLG8mJkVtYmVyLnByb3Bl
        cnR5RGlkQ2hhbmdlKHRoaXMsImhhc0FycmF5T2JzZXJ2ZXJzIiksdGhpc30s
        aGFzQXJyYXlPYnNlcnZlcnM6RW1iZXIuY29tcHV0ZWQoZnVuY3Rpb24oKXty
        ZXR1cm4gRW1iZXIuaGFzTGlzdGVuZXJzKHRoaXMsIkBhcnJheTpjaGFuZ2Ui
        KXx8RW1iZXIuaGFzTGlzdGVuZXJzKHRoaXMsIkBhcnJheTpiZWZvcmUiKX0p
        LGFycmF5Q29udGVudFdpbGxDaGFuZ2U6ZnVuY3Rpb24odCxyLG4pe3ZvaWQg
        MD09PXQ/KHQ9MCxyPW49LTEpOih2b2lkIDA9PT1yJiYocj0tMSksdm9pZCAw
        PT09biYmKG49LTEpKSxFbWJlci5pc1dhdGNoaW5nKHRoaXMsIkBlYWNoIikm
        JmUodGhpcywiQGVhY2giKSxFbWJlci5zZW5kRXZlbnQodGhpcywiQGFycmF5
        OmJlZm9yZSIsW3RoaXMsdCxyLG5dKTt2YXIgaSxvO2lmKHQ+PTAmJnI+PTAm
        JmUodGhpcywiaGFzRW51bWVyYWJsZU9ic2VydmVycyIpKXtpPVtdLG89dCty
        O2Zvcih2YXIgYT10O28+YTthKyspaS5wdXNoKHRoaXMub2JqZWN0QXQoYSkp
        fWVsc2UgaT1yO3JldHVybiB0aGlzLmVudW1lcmFibGVDb250ZW50V2lsbENo
        YW5nZShpLG4pLHRoaXN9LGFycmF5Q29udGVudERpZENoYW5nZTpmdW5jdGlv
        bih0LHIsaSl7dm9pZCAwPT09dD8odD0wLHI9aT0tMSk6KHZvaWQgMD09PXIm
        JihyPS0xKSx2b2lkIDA9PT1pJiYoaT0tMSkpO3ZhciBvLGE7aWYodD49MCYm
        aT49MCYmZSh0aGlzLCJoYXNFbnVtZXJhYmxlT2JzZXJ2ZXJzIikpe289W10s
        YT10K2k7Zm9yKHZhciBzPXQ7YT5zO3MrKylvLnB1c2godGhpcy5vYmplY3RB
        dChzKSl9ZWxzZSBvPWk7dGhpcy5lbnVtZXJhYmxlQ29udGVudERpZENoYW5n
        ZShyLG8pLEVtYmVyLnNlbmRFdmVudCh0aGlzLCJAYXJyYXk6Y2hhbmdlIixb
        dGhpcyx0LHIsaV0pO3ZhciB1PWUodGhpcywibGVuZ3RoIiksbD1uKHRoaXMs
        ImZpcnN0T2JqZWN0IiksYz1uKHRoaXMsImxhc3RPYmplY3QiKTtyZXR1cm4g
        dGhpcy5vYmplY3RBdCgwKSE9PWwmJihFbWJlci5wcm9wZXJ0eVdpbGxDaGFu
        Z2UodGhpcywiZmlyc3RPYmplY3QiKSxFbWJlci5wcm9wZXJ0eURpZENoYW5n
        ZSh0aGlzLCJmaXJzdE9iamVjdCIpKSx0aGlzLm9iamVjdEF0KHUtMSkhPT1j
        JiYoRW1iZXIucHJvcGVydHlXaWxsQ2hhbmdlKHRoaXMsImxhc3RPYmplY3Qi
        KSxFbWJlci5wcm9wZXJ0eURpZENoYW5nZSh0aGlzLCJsYXN0T2JqZWN0Iikp
        LHRoaXN9LCJAZWFjaCI6RW1iZXIuY29tcHV0ZWQoZnVuY3Rpb24oKXtyZXR1
        cm4gdGhpcy5fX2VhY2h8fCh0aGlzLl9fZWFjaD1uZXcgRW1iZXIuRWFjaFBy
        b3h5KHRoaXMpKSx0aGlzLl9fZWFjaH0pfSl9KCksZnVuY3Rpb24oKXtmdW5j
        dGlvbiBlKGUsdCl7cmV0dXJuIkB0aGlzIj09PXQ/ZTptKGUsdCl9ZnVuY3Rp
        b24gdChlLHQscil7dGhpcy5jYWxsYmFja3M9ZSx0aGlzLmNwPXQsdGhpcy5p
        bnN0YW5jZU1ldGE9cix0aGlzLmRlcGVuZGVudEtleXNCeUd1aWQ9e30sdGhp
        cy50cmFja2VkQXJyYXlzQnlHdWlkPXt9LHRoaXMuc3VzcGVuZGVkPSExLHRo
        aXMuY2hhbmdlZEl0ZW1zPXt9fWZ1bmN0aW9uIHIoZSx0LHIpe3RoaXMuZGVw
        ZW5kZW50QXJyYXk9ZSx0aGlzLmluZGV4PXQsdGhpcy5pdGVtPWUub2JqZWN0
        QXQodCksdGhpcy50cmFja2VkQXJyYXk9cix0aGlzLmJlZm9yZU9ic2VydmVy
        PW51bGwsdGhpcy5vYnNlcnZlcj1udWxsLHRoaXMuZGVzdHJveWVkPSExfWZ1
        bmN0aW9uIG4oZSx0LHIpe3JldHVybiAwPmU/TWF0aC5tYXgoMCx0K2UpOnQ+
        ZT9lOk1hdGgubWluKHQtcixlKX1mdW5jdGlvbiBpKGUsdCxyKXtyZXR1cm4g
        TWF0aC5taW4ocix0LWUpfWZ1bmN0aW9uIG8oZSx0LHIsbixpLG8pe3ZhciBh
        PXthcnJheUNoYW5nZWQ6ZSxpbmRleDpyLGl0ZW06dCxwcm9wZXJ0eU5hbWU6
        bixwcm9wZXJ0eTppfTtyZXR1cm4gbyYmKGEucHJldmlvdXNWYWx1ZXM9byks
        YX1mdW5jdGlvbiBhKGUsdCxyLG4saSl7TyhlLGZ1bmN0aW9uKGEscyl7aS5z
        ZXRWYWx1ZSh0LmFkZGVkSXRlbS5jYWxsKHRoaXMsaS5nZXRWYWx1ZSgpLGEs
        byhlLGEscyxuLHIpLGkuc3VnYXJNZXRhKSl9LHRoaXMpfWZ1bmN0aW9uIHMo
        ZSx0KXt7dmFyIHI7ZS5fY2FsbGJhY2tzKCl9ZS5faGFzSW5zdGFuY2VNZXRh
        KHRoaXMsdCk/KHI9ZS5faW5zdGFuY2VNZXRhKHRoaXMsdCksci5zZXRWYWx1
        ZShlLnJlc2V0VmFsdWUoci5nZXRWYWx1ZSgpKSkpOnI9ZS5faW5zdGFuY2VN
        ZXRhKHRoaXMsdCksZS5vcHRpb25zLmluaXRpYWxpemUmJmUub3B0aW9ucy5p
        bml0aWFsaXplLmNhbGwodGhpcyxyLmdldFZhbHVlKCkse3Byb3BlcnR5OmUs
        cHJvcGVydHlOYW1lOnR9LHIuc3VnYXJNZXRhKX1mdW5jdGlvbiB1KHQscil7
        aWYoeC50ZXN0KHIpKXJldHVybiExO3ZhciBuPWUodCxyKTtyZXR1cm4gRW1i
        ZXIuQXJyYXkuZGV0ZWN0KG4pfWZ1bmN0aW9uIGwoZSx0LHIpe3RoaXMuY29u
        dGV4dD1lLHRoaXMucHJvcGVydHlOYW1lPXQsdGhpcy5jYWNoZT1wKGUpLmNh
        Y2hlLHRoaXMuZGVwZW5kZW50QXJyYXlzPXt9LHRoaXMuc3VnYXJNZXRhPXt9
        LHRoaXMuaW5pdGlhbFZhbHVlPXJ9ZnVuY3Rpb24gYyh0KXt2YXIgcj10aGlz
        O3RoaXMub3B0aW9ucz10LHRoaXMuX2luc3RhbmNlTWV0YXM9e30sdGhpcy5f
        ZGVwZW5kZW50S2V5cz1udWxsLHRoaXMuX2l0ZW1Qcm9wZXJ0eUtleXM9e30s
        dGhpcy5fcHJldmlvdXNJdGVtUHJvcGVydHlLZXlzPXt9LHRoaXMucmVhZE9u
        bHkoKSx0aGlzLmNhY2hlYWJsZSgpLHRoaXMucmVjb21wdXRlT25jZT1mdW5j
        dGlvbihlKXtFbWJlci5ydW4ub25jZSh0aGlzLG4sZSl9O3ZhciBuPWZ1bmN0
        aW9uKHQpe3ZhciBuPShyLl9kZXBlbmRlbnRLZXlzLHIuX2luc3RhbmNlTWV0
        YSh0aGlzLHQpKSxpPXIuX2NhbGxiYWNrcygpO3MuY2FsbCh0aGlzLHIsdCks
        bi5kZXBlbmRlbnRBcnJheXNPYnNlcnZlci5zdXNwZW5kQXJyYXlPYnNlcnZl
        cnMoZnVuY3Rpb24oKXtPKHIuX2RlcGVuZGVudEtleXMsZnVuY3Rpb24odCl7
        aWYodSh0aGlzLHQpKXt2YXIgaT1lKHRoaXMsdCksbz1uLmRlcGVuZGVudEFy
        cmF5c1t0XTtpPT09bz9yLl9wcmV2aW91c0l0ZW1Qcm9wZXJ0eUtleXNbdF0m
        JihkZWxldGUgci5fcHJldmlvdXNJdGVtUHJvcGVydHlLZXlzW3RdLG4uZGVw
        ZW5kZW50QXJyYXlzT2JzZXJ2ZXIuc2V0dXBQcm9wZXJ0eU9ic2VydmVycyh0
        LHIuX2l0ZW1Qcm9wZXJ0eUtleXNbdF0pKToobi5kZXBlbmRlbnRBcnJheXNb
        dF09aSxvJiZuLmRlcGVuZGVudEFycmF5c09ic2VydmVyLnRlYXJkb3duT2Jz
        ZXJ2ZXJzKG8sdCksaSYmbi5kZXBlbmRlbnRBcnJheXNPYnNlcnZlci5zZXR1
        cE9ic2VydmVycyhpLHQpKX19LHRoaXMpfSx0aGlzKSxPKHIuX2RlcGVuZGVu
        dEtleXMsZnVuY3Rpb24obyl7aWYodSh0aGlzLG8pKXt2YXIgcz1lKHRoaXMs
        byk7cyYmYS5jYWxsKHRoaXMscyxpLHIsdCxuKX19LHRoaXMpfTt0aGlzLmZ1
        bmM9ZnVuY3Rpb24oZSl7cmV0dXJuIG4uY2FsbCh0aGlzLGUpLHIuX2luc3Rh
        bmNlTWV0YSh0aGlzLGUpLmdldFZhbHVlKCl9fWZ1bmN0aW9uIGgoZSl7cmV0
        dXJuIGV9dmFyIG09RW1iZXIuZ2V0LGY9KEVtYmVyLnNldCxFbWJlci5ndWlk
        Rm9yKSxwPUVtYmVyLm1ldGEsZD1FbWJlci5wcm9wZXJ0eVdpbGxDaGFuZ2Us
        Yj1FbWJlci5wcm9wZXJ0eURpZENoYW5nZSx2PUVtYmVyLmFkZEJlZm9yZU9i
        c2VydmVyLEU9RW1iZXIucmVtb3ZlQmVmb3JlT2JzZXJ2ZXIsZz1FbWJlci5h
        ZGRPYnNlcnZlcix5PUVtYmVyLnJlbW92ZU9ic2VydmVyLHc9RW1iZXIuQ29t
        cHV0ZWRQcm9wZXJ0eSxfPVtdLnNsaWNlLEM9RW1iZXIuY3JlYXRlLE89RW1i
        ZXIuRW51bWVyYWJsZVV0aWxzLmZvckVhY2gsQT0vXiguKilcLkBlYWNoXC4o
        LiopLyxQPS8oLipcLkBlYWNoKXsyLH0vLHg9L1wuXFtcXSQvLFQ9RW1iZXIu
        ZXhwYW5kUHJvcGVydGllczt0LnByb3RvdHlwZT17c2V0VmFsdWU6ZnVuY3Rp
        b24oZSl7dGhpcy5pbnN0YW5jZU1ldGEuc2V0VmFsdWUoZSwhMCl9LGdldFZh
        bHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaW5zdGFuY2VNZXRhLmdldFZh
        bHVlKCl9LHNldHVwT2JzZXJ2ZXJzOmZ1bmN0aW9uKGUsdCl7dGhpcy5kZXBl
        bmRlbnRLZXlzQnlHdWlkW2YoZSldPXQsZS5hZGRBcnJheU9ic2VydmVyKHRo
        aXMse3dpbGxDaGFuZ2U6ImRlcGVuZGVudEFycmF5V2lsbENoYW5nZSIsZGlk
        Q2hhbmdlOiJkZXBlbmRlbnRBcnJheURpZENoYW5nZSJ9KSx0aGlzLmNwLl9p
        dGVtUHJvcGVydHlLZXlzW3RdJiZ0aGlzLnNldHVwUHJvcGVydHlPYnNlcnZl
        cnModCx0aGlzLmNwLl9pdGVtUHJvcGVydHlLZXlzW3RdKX0sdGVhcmRvd25P
        YnNlcnZlcnM6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLmNwLl9pdGVtUHJv
        cGVydHlLZXlzW3RdfHxbXTtkZWxldGUgdGhpcy5kZXBlbmRlbnRLZXlzQnlH
        dWlkW2YoZSldLHRoaXMudGVhcmRvd25Qcm9wZXJ0eU9ic2VydmVycyh0LHIp
        LGUucmVtb3ZlQXJyYXlPYnNlcnZlcih0aGlzLHt3aWxsQ2hhbmdlOiJkZXBl
        bmRlbnRBcnJheVdpbGxDaGFuZ2UiLGRpZENoYW5nZToiZGVwZW5kZW50QXJy
        YXlEaWRDaGFuZ2UifSl9LHN1c3BlbmRBcnJheU9ic2VydmVyczpmdW5jdGlv
        bihlLHQpe3ZhciByPXRoaXMuc3VzcGVuZGVkO3RoaXMuc3VzcGVuZGVkPSEw
        LGUuY2FsbCh0KSx0aGlzLnN1c3BlbmRlZD1yfSxzZXR1cFByb3BlcnR5T2Jz
        ZXJ2ZXJzOmZ1bmN0aW9uKHQscil7dmFyIG49ZSh0aGlzLmluc3RhbmNlTWV0
        YS5jb250ZXh0LHQpLGk9ZShuLCJsZW5ndGgiKSxvPW5ldyBBcnJheShpKTt0
        aGlzLnJlc2V0VHJhbnNmb3JtYXRpb25zKHQsbyksTyhuLGZ1bmN0aW9uKGUs
        aSl7dmFyIGE9dGhpcy5jcmVhdGVQcm9wZXJ0eU9ic2VydmVyQ29udGV4dChu
        LGksdGhpcy50cmFja2VkQXJyYXlzQnlHdWlkW3RdKTtvW2ldPWEsTyhyLGZ1
        bmN0aW9uKHQpe3YoZSx0LHRoaXMsYS5iZWZvcmVPYnNlcnZlciksZyhlLHQs
        dGhpcyxhLm9ic2VydmVyKX0sdGhpcyl9LHRoaXMpfSx0ZWFyZG93blByb3Bl
        cnR5T2JzZXJ2ZXJzOmZ1bmN0aW9uKGUsdCl7dmFyIHIsbixpLG89dGhpcyxh
        PXRoaXMudHJhY2tlZEFycmF5c0J5R3VpZFtlXTthJiZhLmFwcGx5KGZ1bmN0
        aW9uKGUsYSxzKXtzIT09RW1iZXIuVHJhY2tlZEFycmF5LkRFTEVURSYmTyhl
        LGZ1bmN0aW9uKGUpe2UuZGVzdHJveWVkPSEwLHI9ZS5iZWZvcmVPYnNlcnZl
        cixuPWUub2JzZXJ2ZXIsaT1lLml0ZW0sTyh0LGZ1bmN0aW9uKGUpe0UoaSxl
        LG8scikseShpLGUsbyxuKX0pfSl9KX0sY3JlYXRlUHJvcGVydHlPYnNlcnZl
        ckNvbnRleHQ6ZnVuY3Rpb24oZSx0LG4pe3ZhciBpPW5ldyByKGUsdCxuKTty
        ZXR1cm4gdGhpcy5jcmVhdGVQcm9wZXJ0eU9ic2VydmVyKGkpLGl9LGNyZWF0
        ZVByb3BlcnR5T2JzZXJ2ZXI6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztlLmJl
        Zm9yZU9ic2VydmVyPWZ1bmN0aW9uKHIsbil7cmV0dXJuIHQuaXRlbVByb3Bl
        cnR5V2lsbENoYW5nZShyLG4sZS5kZXBlbmRlbnRBcnJheSxlKX0sZS5vYnNl
        cnZlcj1mdW5jdGlvbihyLG4pe3JldHVybiB0Lml0ZW1Qcm9wZXJ0eURpZENo
        YW5nZShyLG4sZS5kZXBlbmRlbnRBcnJheSxlKX19LHJlc2V0VHJhbnNmb3Jt
        YXRpb25zOmZ1bmN0aW9uKGUsdCl7dGhpcy50cmFja2VkQXJyYXlzQnlHdWlk
        W2VdPW5ldyBFbWJlci5UcmFja2VkQXJyYXkodCl9LHRyYWNrQWRkOmZ1bmN0
        aW9uKGUsdCxyKXt2YXIgbj10aGlzLnRyYWNrZWRBcnJheXNCeUd1aWRbZV07
        biYmbi5hZGRJdGVtcyh0LHIpfSx0cmFja1JlbW92ZTpmdW5jdGlvbihlLHQs
        cil7dmFyIG49dGhpcy50cmFja2VkQXJyYXlzQnlHdWlkW2VdO3JldHVybiBu
        P24ucmVtb3ZlSXRlbXModCxyKTpbXX0sdXBkYXRlSW5kZXhlczpmdW5jdGlv
        bih0LHIpe3ZhciBuPWUociwibGVuZ3RoIik7dC5hcHBseShmdW5jdGlvbihl
        LHQscil7ciE9PUVtYmVyLlRyYWNrZWRBcnJheS5ERUxFVEUmJihyIT09RW1i
        ZXIuVHJhY2tlZEFycmF5LlJFVEFJTnx8ZS5sZW5ndGghPT1ufHwwIT09dCkm
        Jk8oZSxmdW5jdGlvbihlLHIpe2UuaW5kZXg9cit0fSl9KX0sZGVwZW5kZW50
        QXJyYXlXaWxsQ2hhbmdlOmZ1bmN0aW9uKHQscixhKXtmdW5jdGlvbiBzKGUp
        e21baF0uZGVzdHJveWVkPSEwLEUobCxlLHRoaXMsbVtoXS5iZWZvcmVPYnNl
        cnZlcikseShsLGUsdGhpcyxtW2hdLm9ic2VydmVyKX1pZighdGhpcy5zdXNw
        ZW5kZWQpe3ZhciB1LGwsYyxoLG0scD10aGlzLmNhbGxiYWNrcy5yZW1vdmVk
        SXRlbSxkPWYodCksYj10aGlzLmRlcGVuZGVudEtleXNCeUd1aWRbZF0sdj10
        aGlzLmNwLl9pdGVtUHJvcGVydHlLZXlzW2JdfHxbXSxnPWUodCwibGVuZ3Ro
        Iiksdz1uKHIsZywwKSxfPWkodyxnLGEpO2ZvcihtPXRoaXMudHJhY2tSZW1v
        dmUoYix3LF8pLGg9Xy0xO2g+PTAmJihjPXcraCwhKGM+PWcpKTstLWgpbD10
        Lm9iamVjdEF0KGMpLE8odixzLHRoaXMpLHU9byh0LGwsYyx0aGlzLmluc3Rh
        bmNlTWV0YS5wcm9wZXJ0eU5hbWUsdGhpcy5jcCksdGhpcy5zZXRWYWx1ZShw
        LmNhbGwodGhpcy5pbnN0YW5jZU1ldGEuY29udGV4dCx0aGlzLmdldFZhbHVl
        KCksbCx1LHRoaXMuaW5zdGFuY2VNZXRhLnN1Z2FyTWV0YSkpfX0sZGVwZW5k
        ZW50QXJyYXlEaWRDaGFuZ2U6ZnVuY3Rpb24odCxyLGksYSl7aWYoIXRoaXMu
        c3VzcGVuZGVkKXt2YXIgcyx1LGw9dGhpcy5jYWxsYmFja3MuYWRkZWRJdGVt
        LGM9Zih0KSxoPXRoaXMuZGVwZW5kZW50S2V5c0J5R3VpZFtjXSxtPW5ldyBB
        cnJheShhKSxwPXRoaXMuY3AuX2l0ZW1Qcm9wZXJ0eUtleXNbaF0sZD1lKHQs
        Imxlbmd0aCIpLGI9bihyLGQsYSk7Tyh0LnNsaWNlKGIsYithKSxmdW5jdGlv
        bihlLHIpe3AmJih1PW1bcl09dGhpcy5jcmVhdGVQcm9wZXJ0eU9ic2VydmVy
        Q29udGV4dCh0LGIrcix0aGlzLnRyYWNrZWRBcnJheXNCeUd1aWRbaF0pLE8o
        cCxmdW5jdGlvbih0KXt2KGUsdCx0aGlzLHUuYmVmb3JlT2JzZXJ2ZXIpLGco
        ZSx0LHRoaXMsdS5vYnNlcnZlcil9LHRoaXMpKSxzPW8odCxlLGIrcix0aGlz
        Lmluc3RhbmNlTWV0YS5wcm9wZXJ0eU5hbWUsdGhpcy5jcCksdGhpcy5zZXRW
        YWx1ZShsLmNhbGwodGhpcy5pbnN0YW5jZU1ldGEuY29udGV4dCx0aGlzLmdl
        dFZhbHVlKCksZSxzLHRoaXMuaW5zdGFuY2VNZXRhLnN1Z2FyTWV0YSkpfSx0
        aGlzKSx0aGlzLnRyYWNrQWRkKGgsYixtKX19LGl0ZW1Qcm9wZXJ0eVdpbGxD
        aGFuZ2U6ZnVuY3Rpb24odCxyLG4saSl7dmFyIG89Zih0KTt0aGlzLmNoYW5n
        ZWRJdGVtc1tvXXx8KHRoaXMuY2hhbmdlZEl0ZW1zW29dPXthcnJheTpuLG9i
        c2VydmVyQ29udGV4dDppLG9iajp0LHByZXZpb3VzVmFsdWVzOnt9fSksdGhp
        cy5jaGFuZ2VkSXRlbXNbb10ucHJldmlvdXNWYWx1ZXNbcl09ZSh0LHIpfSxp
        dGVtUHJvcGVydHlEaWRDaGFuZ2U6ZnVuY3Rpb24oKXt0aGlzLmZsdXNoQ2hh
        bmdlcygpfSxmbHVzaENoYW5nZXM6ZnVuY3Rpb24oKXt2YXIgZSx0LHIsbj10
        aGlzLmNoYW5nZWRJdGVtcztmb3IoZSBpbiBuKXQ9bltlXSx0Lm9ic2VydmVy
        Q29udGV4dC5kZXN0cm95ZWR8fCh0aGlzLnVwZGF0ZUluZGV4ZXModC5vYnNl
        cnZlckNvbnRleHQudHJhY2tlZEFycmF5LHQub2JzZXJ2ZXJDb250ZXh0LmRl
        cGVuZGVudEFycmF5KSxyPW8odC5hcnJheSx0Lm9iaix0Lm9ic2VydmVyQ29u
        dGV4dC5pbmRleCx0aGlzLmluc3RhbmNlTWV0YS5wcm9wZXJ0eU5hbWUsdGhp
        cy5jcCx0LnByZXZpb3VzVmFsdWVzKSx0aGlzLnNldFZhbHVlKHRoaXMuY2Fs
        bGJhY2tzLnJlbW92ZWRJdGVtLmNhbGwodGhpcy5pbnN0YW5jZU1ldGEuY29u
        dGV4dCx0aGlzLmdldFZhbHVlKCksdC5vYmoscix0aGlzLmluc3RhbmNlTWV0
        YS5zdWdhck1ldGEpKSx0aGlzLnNldFZhbHVlKHRoaXMuY2FsbGJhY2tzLmFk
        ZGVkSXRlbS5jYWxsKHRoaXMuaW5zdGFuY2VNZXRhLmNvbnRleHQsdGhpcy5n
        ZXRWYWx1ZSgpLHQub2JqLHIsdGhpcy5pbnN0YW5jZU1ldGEuc3VnYXJNZXRh
        KSkpO3RoaXMuY2hhbmdlZEl0ZW1zPXt9fX0sbC5wcm90b3R5cGU9e2dldFZh
        bHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucHJvcGVydHlOYW1lIGluIHRo
        aXMuY2FjaGU/dGhpcy5jYWNoZVt0aGlzLnByb3BlcnR5TmFtZV06dGhpcy5p
        bml0aWFsVmFsdWV9LHNldFZhbHVlOmZ1bmN0aW9uKGUsdCl7ZSE9PXRoaXMu
        Y2FjaGVbdGhpcy5wcm9wZXJ0eU5hbWVdJiYodCYmZCh0aGlzLmNvbnRleHQs
        dGhpcy5wcm9wZXJ0eU5hbWUpLHZvaWQgMD09PWU/ZGVsZXRlIHRoaXMuY2Fj
        aGVbdGhpcy5wcm9wZXJ0eU5hbWVdOnRoaXMuY2FjaGVbdGhpcy5wcm9wZXJ0
        eU5hbWVdPWUsdCYmYih0aGlzLmNvbnRleHQsdGhpcy5wcm9wZXJ0eU5hbWUp
        KX19LEVtYmVyLlJlZHVjZUNvbXB1dGVkUHJvcGVydHk9YyxjLnByb3RvdHlw
        ZT1DKHcucHJvdG90eXBlKSxjLnByb3RvdHlwZS5fY2FsbGJhY2tzPWZ1bmN0
        aW9uKCl7aWYoIXRoaXMuY2FsbGJhY2tzKXt2YXIgZT10aGlzLm9wdGlvbnM7
        dGhpcy5jYWxsYmFja3M9e3JlbW92ZWRJdGVtOmUucmVtb3ZlZEl0ZW18fGgs
        YWRkZWRJdGVtOmUuYWRkZWRJdGVtfHxofX1yZXR1cm4gdGhpcy5jYWxsYmFj
        a3N9LGMucHJvdG90eXBlLl9oYXNJbnN0YW5jZU1ldGE9ZnVuY3Rpb24oZSx0
        KXt2YXIgcj1mKGUpLG49cisiOiIrdDtyZXR1cm4hIXRoaXMuX2luc3RhbmNl
        TWV0YXNbbl19LGMucHJvdG90eXBlLl9pbnN0YW5jZU1ldGE9ZnVuY3Rpb24o
        ZSxyKXt2YXIgbj1mKGUpLGk9bisiOiIrcixvPXRoaXMuX2luc3RhbmNlTWV0
        YXNbaV07cmV0dXJuIG98fChvPXRoaXMuX2luc3RhbmNlTWV0YXNbaV09bmV3
        IGwoZSxyLHRoaXMuaW5pdGlhbFZhbHVlKCkpLG8uZGVwZW5kZW50QXJyYXlz
        T2JzZXJ2ZXI9bmV3IHQodGhpcy5fY2FsbGJhY2tzKCksdGhpcyxvLGUscixv
        LnN1Z2FyTWV0YSkpLG99LGMucHJvdG90eXBlLmluaXRpYWxWYWx1ZT1mdW5j
        dGlvbigpe3JldHVybiJmdW5jdGlvbiI9PXR5cGVvZiB0aGlzLm9wdGlvbnMu
        aW5pdGlhbFZhbHVlP3RoaXMub3B0aW9ucy5pbml0aWFsVmFsdWUoKTp0aGlz
        Lm9wdGlvbnMuaW5pdGlhbFZhbHVlfSxjLnByb3RvdHlwZS5yZXNldFZhbHVl
        PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaW5pdGlhbFZhbHVlKCl9LGMucHJv
        dG90eXBlLml0ZW1Qcm9wZXJ0eUtleT1mdW5jdGlvbihlLHQpe3RoaXMuX2l0
        ZW1Qcm9wZXJ0eUtleXNbZV09dGhpcy5faXRlbVByb3BlcnR5S2V5c1tlXXx8
        W10sdGhpcy5faXRlbVByb3BlcnR5S2V5c1tlXS5wdXNoKHQpfSxjLnByb3Rv
        dHlwZS5jbGVhckl0ZW1Qcm9wZXJ0eUtleXM9ZnVuY3Rpb24oZSl7dGhpcy5f
        aXRlbVByb3BlcnR5S2V5c1tlXSYmKHRoaXMuX3ByZXZpb3VzSXRlbVByb3Bl
        cnR5S2V5c1tlXT10aGlzLl9pdGVtUHJvcGVydHlLZXlzW2VdLHRoaXMuX2l0
        ZW1Qcm9wZXJ0eUtleXNbZV09W10pfSxjLnByb3RvdHlwZS5wcm9wZXJ0eT1m
        dW5jdGlvbigpe3ZhciBlLHQscj10aGlzLG49KF8uY2FsbChhcmd1bWVudHMp
        LG5ldyBFbWJlci5TZXQpO3JldHVybiBPKF8uY2FsbChhcmd1bWVudHMpLGZ1
        bmN0aW9uKGkpe2lmKFAudGVzdChpKSl0aHJvdyBuZXcgRW1iZXIuRXJyb3Io
        Ik5lc3RlZCBAZWFjaCBwcm9wZXJ0aWVzIG5vdCBzdXBwb3J0ZWQ6ICIraSk7
        aWYoZT1BLmV4ZWMoaSkpe3Q9ZVsxXTt2YXIgbz1lWzJdLGE9ZnVuY3Rpb24o
        ZSl7ci5pdGVtUHJvcGVydHlLZXkodCxlKX07VChvLGEpLG4uYWRkKHQpfWVs
        c2Ugbi5hZGQoaSl9KSx3LnByb3RvdHlwZS5wcm9wZXJ0eS5hcHBseSh0aGlz
        LG4udG9BcnJheSgpKX0sRW1iZXIucmVkdWNlQ29tcHV0ZWQ9ZnVuY3Rpb24o
        ZSl7dmFyIHQ7aWYoYXJndW1lbnRzLmxlbmd0aD4xJiYodD1fLmNhbGwoYXJn
        dW1lbnRzLDAsLTEpLGU9Xy5jYWxsKGFyZ3VtZW50cywtMSlbMF0pLCJvYmpl
        Y3QiIT10eXBlb2YgZSl0aHJvdyBuZXcgRW1iZXIuRXJyb3IoIlJlZHVjZSBD
        b21wdXRlZCBQcm9wZXJ0eSBkZWNsYXJlZCB3aXRob3V0IGFuIG9wdGlvbnMg
        aGFzaCIpO2lmKCEoImluaXRpYWxWYWx1ZSJpbiBlKSl0aHJvdyBuZXcgRW1i
        ZXIuRXJyb3IoIlJlZHVjZSBDb21wdXRlZCBQcm9wZXJ0eSBkZWNsYXJlZCB3
        aXRob3V0IGFuIGluaXRpYWwgdmFsdWUiKTt2YXIgcj1uZXcgYyhlKTtyZXR1
        cm4gdCYmci5wcm9wZXJ0eS5hcHBseShyLHQpLHJ9fSgpLGZ1bmN0aW9uKCl7
        ZnVuY3Rpb24gZSgpe3ZhciBlPXRoaXM7cmV0dXJuIHQuYXBwbHkodGhpcyxh
        cmd1bWVudHMpLHRoaXMuZnVuYz1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rp
        b24ocil7cmV0dXJuIGUuX2hhc0luc3RhbmNlTWV0YSh0aGlzLHIpfHxpKGUu
        X2RlcGVuZGVudEtleXMsZnVuY3Rpb24odCl7RW1iZXIuYWRkT2JzZXJ2ZXIo
        dGhpcyx0LGZ1bmN0aW9uKCl7ZS5yZWNvbXB1dGVPbmNlLmNhbGwodGhpcyxy
        KX0pfSx0aGlzKSx0LmFwcGx5KHRoaXMsYXJndW1lbnRzKX19KHRoaXMuZnVu
        YyksdGhpc312YXIgdD1FbWJlci5SZWR1Y2VDb21wdXRlZFByb3BlcnR5LHI9
        W10uc2xpY2Usbj1FbWJlci5jcmVhdGUsaT1FbWJlci5FbnVtZXJhYmxlVXRp
        bHMuZm9yRWFjaDtFbWJlci5BcnJheUNvbXB1dGVkUHJvcGVydHk9ZSxlLnBy
        b3RvdHlwZT1uKHQucHJvdG90eXBlKSxlLnByb3RvdHlwZS5pbml0aWFsVmFs
        dWU9ZnVuY3Rpb24oKXtyZXR1cm4gRW1iZXIuQSgpfSxlLnByb3RvdHlwZS5y
        ZXNldFZhbHVlPWZ1bmN0aW9uKGUpe3JldHVybiBlLmNsZWFyKCksZX0sZS5w
        cm90b3R5cGUuZGlkQ2hhbmdlPWZ1bmN0aW9uKCl7fSxFbWJlci5hcnJheUNv
        bXB1dGVkPWZ1bmN0aW9uKHQpe3ZhciBuO2lmKGFyZ3VtZW50cy5sZW5ndGg+
        MSYmKG49ci5jYWxsKGFyZ3VtZW50cywwLC0xKSx0PXIuY2FsbChhcmd1bWVu
        dHMsLTEpWzBdKSwib2JqZWN0IiE9dHlwZW9mIHQpdGhyb3cgbmV3IEVtYmVy
        LkVycm9yKCJBcnJheSBDb21wdXRlZCBQcm9wZXJ0eSBkZWNsYXJlZCB3aXRo
        b3V0IGFuIG9wdGlvbnMgaGFzaCIpO3ZhciBpPW5ldyBlKHQpO3JldHVybiBu
        JiZpLnByb3BlcnR5LmFwcGx5KGksbiksaX19KCksZnVuY3Rpb24oKXtmdW5j
        dGlvbiBlKGUsaSxvLGEpe2Z1bmN0aW9uIHMoZSl7cmV0dXJuIHQuZGV0ZWN0
        SW5zdGFuY2UoZSk/bihyKGUsImNvbnRlbnQiKSk6bihlKX12YXIgdSxsLGMs
        aCxtO3JldHVybiBhcmd1bWVudHMubGVuZ3RoPDQmJihhPXIoZSwibGVuZ3Ro
        IikpLGFyZ3VtZW50cy5sZW5ndGg8MyYmKG89MCksbz09PWE/bzoodT1vK01h
        dGguZmxvb3IoKGEtbykvMiksbD1lLm9iamVjdEF0KHUpLGg9cyhsKSxtPXMo
        aSksaD09PW0/dTooYz10aGlzLm9yZGVyKGwsaSksMD09PWMmJihjPW0+aD8t
        MToxKSwwPmM/dGhpcy5iaW5hcnlTZWFyY2goZSxpLHUrMSxhKTpjPjA/dGhp
        cy5iaW5hcnlTZWFyY2goZSxpLG8sdSk6dSkpfXZhciB0LHI9RW1iZXIuZ2V0
        LG49KEVtYmVyLnNldCxFbWJlci5ndWlkRm9yKSxpPUVtYmVyLm1lcmdlLG89
        W10uc2xpY2UsYT1FbWJlci5FbnVtZXJhYmxlVXRpbHMuZm9yRWFjaCxzPUVt
        YmVyLkVudW1lcmFibGVVdGlscy5tYXA7RW1iZXIuY29tcHV0ZWQuc3VtPWZ1
        bmN0aW9uKGUpe3JldHVybiBFbWJlci5yZWR1Y2VDb21wdXRlZChlLHtpbml0
        aWFsVmFsdWU6MCxhZGRlZEl0ZW06ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZSt0
        fSxyZW1vdmVkSXRlbTpmdW5jdGlvbihlLHQpe3JldHVybiBlLXR9fSl9LEVt
        YmVyLmNvbXB1dGVkLm1heD1mdW5jdGlvbihlKXtyZXR1cm4gRW1iZXIucmVk
        dWNlQ29tcHV0ZWQoZSx7aW5pdGlhbFZhbHVlOi0xLzAsYWRkZWRJdGVtOmZ1
        bmN0aW9uKGUsdCl7cmV0dXJuIE1hdGgubWF4KGUsdCl9LHJlbW92ZWRJdGVt
        OmZ1bmN0aW9uKGUsdCl7cmV0dXJuIGU+dD9lOnZvaWQgMH19KX0sRW1iZXIu
        Y29tcHV0ZWQubWluPWZ1bmN0aW9uKGUpe3JldHVybiBFbWJlci5yZWR1Y2VD
        b21wdXRlZChlLHtpbml0aWFsVmFsdWU6MS8wLGFkZGVkSXRlbTpmdW5jdGlv
        bihlLHQpe3JldHVybiBNYXRoLm1pbihlLHQpfSxyZW1vdmVkSXRlbTpmdW5j
        dGlvbihlLHQpe3JldHVybiB0PmU/ZTp2b2lkIDB9fSl9LEVtYmVyLmNvbXB1
        dGVkLm1hcD1mdW5jdGlvbihlLHQpe3ZhciByPXthZGRlZEl0ZW06ZnVuY3Rp
        b24oZSxyLG4pe3ZhciBpPXQuY2FsbCh0aGlzLHIpO3JldHVybiBlLmluc2Vy
        dEF0KG4uaW5kZXgsaSksZX0scmVtb3ZlZEl0ZW06ZnVuY3Rpb24oZSx0LHIp
        e3JldHVybiBlLnJlbW92ZUF0KHIuaW5kZXgsMSksZX19O3JldHVybiBFbWJl
        ci5hcnJheUNvbXB1dGVkKGUscil9LEVtYmVyLmNvbXB1dGVkLm1hcEJ5PWZ1
        bmN0aW9uKGUsdCl7dmFyIG49ZnVuY3Rpb24oZSl7cmV0dXJuIHIoZSx0KX07
        cmV0dXJuIEVtYmVyLmNvbXB1dGVkLm1hcChlKyIuQGVhY2guIit0LG4pfSxF
        bWJlci5jb21wdXRlZC5tYXBQcm9wZXJ0eT1FbWJlci5jb21wdXRlZC5tYXBC
        eSxFbWJlci5jb21wdXRlZC5maWx0ZXI9ZnVuY3Rpb24oZSx0KXt2YXIgcj17
        aW5pdGlhbGl6ZTpmdW5jdGlvbihlLHQscil7ci5maWx0ZXJlZEFycmF5SW5k
        ZXhlcz1uZXcgRW1iZXIuU3ViQXJyYXl9LGFkZGVkSXRlbTpmdW5jdGlvbihl
        LHIsbixpKXt2YXIgbz0hIXQuY2FsbCh0aGlzLHIpLGE9aS5maWx0ZXJlZEFy
        cmF5SW5kZXhlcy5hZGRJdGVtKG4uaW5kZXgsbyk7cmV0dXJuIG8mJmUuaW5z
        ZXJ0QXQoYSxyKSxlfSxyZW1vdmVkSXRlbTpmdW5jdGlvbihlLHQscixuKXt2
        YXIgaT1uLmZpbHRlcmVkQXJyYXlJbmRleGVzLnJlbW92ZUl0ZW0oci5pbmRl
        eCk7cmV0dXJuIGk+LTEmJmUucmVtb3ZlQXQoaSksZX19O3JldHVybiBFbWJl
        ci5hcnJheUNvbXB1dGVkKGUscil9LEVtYmVyLmNvbXB1dGVkLmZpbHRlckJ5
        PWZ1bmN0aW9uKGUsdCxuKXt2YXIgaTtyZXR1cm4gaT0yPT09YXJndW1lbnRz
        Lmxlbmd0aD9mdW5jdGlvbihlKXtyZXR1cm4gcihlLHQpfTpmdW5jdGlvbihl
        KXtyZXR1cm4gcihlLHQpPT09bn0sRW1iZXIuY29tcHV0ZWQuZmlsdGVyKGUr
        Ii5AZWFjaC4iK3QsaSl9LEVtYmVyLmNvbXB1dGVkLmZpbHRlclByb3BlcnR5
        PUVtYmVyLmNvbXB1dGVkLmZpbHRlckJ5LEVtYmVyLmNvbXB1dGVkLnVuaXE9
        ZnVuY3Rpb24oKXt2YXIgZT1vLmNhbGwoYXJndW1lbnRzKTtyZXR1cm4gZS5w
        dXNoKHtpbml0aWFsaXplOmZ1bmN0aW9uKGUsdCxyKXtyLml0ZW1Db3VudHM9
        e319LGFkZGVkSXRlbTpmdW5jdGlvbihlLHQscixpKXt2YXIgbz1uKHQpOwpy
        ZXR1cm4gaS5pdGVtQ291bnRzW29dPysraS5pdGVtQ291bnRzW29dOmkuaXRl
        bUNvdW50c1tvXT0xLGUuYWRkT2JqZWN0KHQpLGV9LHJlbW92ZWRJdGVtOmZ1
        bmN0aW9uKGUsdCxyLGkpe3ZhciBvPW4odCksYT1pLml0ZW1Db3VudHM7cmV0
        dXJuIDA9PT0tLWFbb10mJmUucmVtb3ZlT2JqZWN0KHQpLGV9fSksRW1iZXIu
        YXJyYXlDb21wdXRlZC5hcHBseShudWxsLGUpfSxFbWJlci5jb21wdXRlZC51
        bmlvbj1FbWJlci5jb21wdXRlZC51bmlxLEVtYmVyLmNvbXB1dGVkLmludGVy
        c2VjdD1mdW5jdGlvbigpe3ZhciBlPWZ1bmN0aW9uKGUpe3JldHVybiBzKGUu
        cHJvcGVydHkuX2RlcGVuZGVudEtleXMsZnVuY3Rpb24oZSl7cmV0dXJuIG4o
        ZSl9KX0sdD1vLmNhbGwoYXJndW1lbnRzKTtyZXR1cm4gdC5wdXNoKHtpbml0
        aWFsaXplOmZ1bmN0aW9uKGUsdCxyKXtyLml0ZW1Db3VudHM9e319LGFkZGVk
        SXRlbTpmdW5jdGlvbih0LHIsaSxvKXt2YXIgYT1uKHIpLHM9KGUoaSksbihp
        LmFycmF5Q2hhbmdlZCkpLHU9aS5wcm9wZXJ0eS5fZGVwZW5kZW50S2V5cy5s
        ZW5ndGgsbD1vLml0ZW1Db3VudHM7cmV0dXJuIGxbYV18fChsW2FdPXt9KSx2
        b2lkIDA9PT1sW2FdW3NdJiYobFthXVtzXT0wKSwxPT09KytsW2FdW3NdJiZ1
        PT09RW1iZXIua2V5cyhsW2FdKS5sZW5ndGgmJnQuYWRkT2JqZWN0KHIpLHR9
        LHJlbW92ZWRJdGVtOmZ1bmN0aW9uKHQscixpLG8pe3ZhciBhLHM9bihyKSx1
        PShlKGkpLG4oaS5hcnJheUNoYW5nZWQpKSxsPShpLnByb3BlcnR5Ll9kZXBl
        bmRlbnRLZXlzLmxlbmd0aCxvLml0ZW1Db3VudHMpO3JldHVybiB2b2lkIDA9
        PT1sW3NdW3VdJiYobFtzXVt1XT0wKSwwPT09LS1sW3NdW3VdJiYoZGVsZXRl
        IGxbc11bdV0sYT1FbWJlci5rZXlzKGxbc10pLmxlbmd0aCwwPT09YSYmZGVs
        ZXRlIGxbc10sdC5yZW1vdmVPYmplY3QocikpLHR9fSksRW1iZXIuYXJyYXlD
        b21wdXRlZC5hcHBseShudWxsLHQpfSxFbWJlci5jb21wdXRlZC5zZXREaWZm
        PWZ1bmN0aW9uKGUsdCl7aWYoMiE9PWFyZ3VtZW50cy5sZW5ndGgpdGhyb3cg
        bmV3IEVtYmVyLkVycm9yKCJzZXREaWZmIHJlcXVpcmVzIGV4YWN0bHkgdHdv
        IGRlcGVuZGVudCBhcnJheXMuIik7cmV0dXJuIEVtYmVyLmFycmF5Q29tcHV0
        ZWQoZSx0LHthZGRlZEl0ZW06ZnVuY3Rpb24obixpLG8pe3ZhciBhPXIodGhp
        cyxlKSxzPXIodGhpcyx0KTtyZXR1cm4gby5hcnJheUNoYW5nZWQ9PT1hP3Mu
        Y29udGFpbnMoaSl8fG4uYWRkT2JqZWN0KGkpOm4ucmVtb3ZlT2JqZWN0KGkp
        LG59LHJlbW92ZWRJdGVtOmZ1bmN0aW9uKG4saSxvKXt2YXIgYT1yKHRoaXMs
        ZSkscz1yKHRoaXMsdCk7cmV0dXJuIG8uYXJyYXlDaGFuZ2VkPT09cz9hLmNv
        bnRhaW5zKGkpJiZuLmFkZE9iamVjdChpKTpuLnJlbW92ZU9iamVjdChpKSxu
        fX0pfSx0PUVtYmVyLk9iamVjdFByb3h5LmV4dGVuZCgpLEVtYmVyLmNvbXB1
        dGVkLnNvcnQ9ZnVuY3Rpb24obixvKXt2YXIgcyx1O3JldHVybiJmdW5jdGlv
        biI9PXR5cGVvZiBvP3M9ZnVuY3Rpb24odCxyLG4pe24ub3JkZXI9byxuLmJp
        bmFyeVNlYXJjaD1lfToodT1vLHM9ZnVuY3Rpb24odCxpLG8pe2Z1bmN0aW9u
        IHMoKXt2YXIgZSx0LHMsYz1yKHRoaXMsdSksaD1vLnNvcnRQcm9wZXJ0aWVz
        PVtdLG09by5zb3J0UHJvcGVydHlBc2NlbmRpbmc9e307aS5wcm9wZXJ0eS5j
        bGVhckl0ZW1Qcm9wZXJ0eUtleXMobiksYShjLGZ1bmN0aW9uKHIpey0xIT09
        KHQ9ci5pbmRleE9mKCI6IikpPyhlPXIuc3Vic3RyaW5nKDAsdCkscz0iZGVz
        YyIhPT1yLnN1YnN0cmluZyh0KzEpLnRvTG93ZXJDYXNlKCkpOihlPXIscz0h
        MCksaC5wdXNoKGUpLG1bZV09cyxpLnByb3BlcnR5Lml0ZW1Qcm9wZXJ0eUtl
        eShuLGUpfSksYy5hZGRPYnNlcnZlcigiQGVhY2giLHRoaXMsbCl9ZnVuY3Rp
        b24gbCgpe0VtYmVyLnJ1bi5vbmNlKHRoaXMsYyxpLnByb3BlcnR5TmFtZSl9
        ZnVuY3Rpb24gYyhlKXtzLmNhbGwodGhpcyksaS5wcm9wZXJ0eS5yZWNvbXB1
        dGVPbmNlLmNhbGwodGhpcyxlKX1FbWJlci5hZGRPYnNlcnZlcih0aGlzLHUs
        bCkscy5jYWxsKHRoaXMpLG8ub3JkZXI9ZnVuY3Rpb24oZSx0KXtmb3IodmFy
        IG4saSxvLGE9MDthPHRoaXMuc29ydFByb3BlcnRpZXMubGVuZ3RoOysrYSlp
        ZihuPXRoaXMuc29ydFByb3BlcnRpZXNbYV0saT1FbWJlci5jb21wYXJlKHIo
        ZSxuKSxyKHQsbikpLDAhPT1pKXJldHVybiBvPXRoaXMuc29ydFByb3BlcnR5
        QXNjZW5kaW5nW25dLG8/aTotMSppO3JldHVybiAwfSxvLmJpbmFyeVNlYXJj
        aD1lfSksRW1iZXIuYXJyYXlDb21wdXRlZChuLHtpbml0aWFsaXplOnMsYWRk
        ZWRJdGVtOmZ1bmN0aW9uKGUsdCxyLG4pe3ZhciBpPW4uYmluYXJ5U2VhcmNo
        KGUsdCk7cmV0dXJuIGUuaW5zZXJ0QXQoaSx0KSxlfSxyZW1vdmVkSXRlbTpm
        dW5jdGlvbihlLHIsbixvKXt2YXIgYSxzLHU7cmV0dXJuIG4ucHJldmlvdXNW
        YWx1ZXM/KGE9aSh7Y29udGVudDpyfSxuLnByZXZpb3VzVmFsdWVzKSx1PXQu
        Y3JlYXRlKGEpKTp1PXIscz1vLmJpbmFyeVNlYXJjaChlLHUpLGUucmVtb3Zl
        QXQocyksZX19KX19KCksZnVuY3Rpb24oKXtFbWJlci5SU1ZQPXQoInJzdnAi
        KSxFbWJlci5SU1ZQLm9uZXJyb3JEZWZhdWx0PWZ1bmN0aW9uKGUpe2lmKGUg
        aW5zdGFuY2VvZiBFcnJvcilpZihFbWJlci50ZXN0aW5nKXtpZighRW1iZXIu
        VGVzdHx8IUVtYmVyLlRlc3QuYWRhcHRlcil0aHJvdyBlO0VtYmVyLlRlc3Qu
        YWRhcHRlci5leGNlcHRpb24oZSl9ZWxzZSBFbWJlci5Mb2dnZXIuZXJyb3Io
        ZS5zdGFjayl9LEVtYmVyLlJTVlAub24oImVycm9yIixFbWJlci5SU1ZQLm9u
        ZXJyb3JEZWZhdWx0KX0oKSxmdW5jdGlvbigpe3ZhciBlPUFycmF5LnByb3Rv
        dHlwZS5zbGljZSx0PUVtYmVyLmV4cGFuZFByb3BlcnRpZXM7KEVtYmVyLkVY
        VEVORF9QUk9UT1RZUEVTPT09ITB8fEVtYmVyLkVYVEVORF9QUk9UT1RZUEVT
        LkZ1bmN0aW9uKSYmKEZ1bmN0aW9uLnByb3RvdHlwZS5wcm9wZXJ0eT1mdW5j
        dGlvbigpe3ZhciBlPUVtYmVyLmNvbXB1dGVkKHRoaXMpO3JldHVybiBlLnBy
        b3BlcnR5LmFwcGx5KGUsYXJndW1lbnRzKX0sRnVuY3Rpb24ucHJvdG90eXBl
        Lm9ic2VydmVzPWZ1bmN0aW9uKCl7Zm9yKHZhciBlPWZ1bmN0aW9uKGUpe3Iu
        cHVzaChlKX0scj1bXSxuPTA7bjxhcmd1bWVudHMubGVuZ3RoOysrbil0KGFy
        Z3VtZW50c1tuXSxlKTtyZXR1cm4gdGhpcy5fX2VtYmVyX29ic2VydmVzX189
        cix0aGlzfSxGdW5jdGlvbi5wcm90b3R5cGUub2JzZXJ2ZXNJbW1lZGlhdGVs
        eT1mdW5jdGlvbigpe2Zvcih2YXIgZT0wLHQ9YXJndW1lbnRzLmxlbmd0aDt0
        PmU7ZSsrKXthcmd1bWVudHNbZV19cmV0dXJuIHRoaXMub2JzZXJ2ZXMuYXBw
        bHkodGhpcyxhcmd1bWVudHMpfSxGdW5jdGlvbi5wcm90b3R5cGUub2JzZXJ2
        ZXNCZWZvcmU9ZnVuY3Rpb24oKXtmb3IodmFyIGU9ZnVuY3Rpb24oZSl7ci5w
        dXNoKGUpfSxyPVtdLG49MDtuPGFyZ3VtZW50cy5sZW5ndGg7KytuKXQoYXJn
        dW1lbnRzW25dLGUpO3JldHVybiB0aGlzLl9fZW1iZXJfb2JzZXJ2ZXNCZWZv
        cmVfXz1yLHRoaXN9LEZ1bmN0aW9uLnByb3RvdHlwZS5vbj1mdW5jdGlvbigp
        e3ZhciB0PWUuY2FsbChhcmd1bWVudHMpO3JldHVybiB0aGlzLl9fZW1iZXJf
        bGlzdGVuc19fPXQsdGhpc30pfSgpLGZ1bmN0aW9uKCl7RW1iZXIuQ29tcGFy
        YWJsZT1FbWJlci5NaXhpbi5jcmVhdGUoe2NvbXBhcmU6RW1iZXIucmVxdWly
        ZWQoRnVuY3Rpb24pfSl9KCksZnVuY3Rpb24oKXt7dmFyIGU9RW1iZXIuZ2V0
        O0VtYmVyLnNldH1FbWJlci5Db3B5YWJsZT1FbWJlci5NaXhpbi5jcmVhdGUo
        e2NvcHk6RW1iZXIucmVxdWlyZWQoRnVuY3Rpb24pLGZyb3plbkNvcHk6ZnVu
        Y3Rpb24oKXtpZihFbWJlci5GcmVlemFibGUmJkVtYmVyLkZyZWV6YWJsZS5k
        ZXRlY3QodGhpcykpcmV0dXJuIGUodGhpcywiaXNGcm96ZW4iKT90aGlzOnRo
        aXMuY29weSgpLmZyZWV6ZSgpO3Rocm93IG5ldyBFbWJlci5FcnJvcihFbWJl
        ci5TdHJpbmcuZm10KCIlQCBkb2VzIG5vdCBzdXBwb3J0IGZyZWV6aW5nIixb
        dGhpc10pKX19KX0oKSxmdW5jdGlvbigpe3ZhciBlPUVtYmVyLmdldCx0PUVt
        YmVyLnNldDtFbWJlci5GcmVlemFibGU9RW1iZXIuTWl4aW4uY3JlYXRlKHtp
        c0Zyb3plbjohMSxmcmVlemU6ZnVuY3Rpb24oKXtyZXR1cm4gZSh0aGlzLCJp
        c0Zyb3plbiIpP3RoaXM6KHQodGhpcywiaXNGcm96ZW4iLCEwKSx0aGlzKX19
        KSxFbWJlci5GUk9aRU5fRVJST1I9IkZyb3plbiBvYmplY3QgY2Fubm90IGJl
        IG1vZGlmaWVkLiJ9KCksZnVuY3Rpb24oKXt2YXIgZT1FbWJlci5FbnVtZXJh
        YmxlVXRpbHMuZm9yRWFjaDtFbWJlci5NdXRhYmxlRW51bWVyYWJsZT1FbWJl
        ci5NaXhpbi5jcmVhdGUoRW1iZXIuRW51bWVyYWJsZSx7YWRkT2JqZWN0OkVt
        YmVyLnJlcXVpcmVkKEZ1bmN0aW9uKSxhZGRPYmplY3RzOmZ1bmN0aW9uKHQp
        e3JldHVybiBFbWJlci5iZWdpblByb3BlcnR5Q2hhbmdlcyh0aGlzKSxlKHQs
        ZnVuY3Rpb24oZSl7dGhpcy5hZGRPYmplY3QoZSl9LHRoaXMpLEVtYmVyLmVu
        ZFByb3BlcnR5Q2hhbmdlcyh0aGlzKSx0aGlzfSxyZW1vdmVPYmplY3Q6RW1i
        ZXIucmVxdWlyZWQoRnVuY3Rpb24pLHJlbW92ZU9iamVjdHM6ZnVuY3Rpb24o
        dCl7cmV0dXJuIEVtYmVyLmJlZ2luUHJvcGVydHlDaGFuZ2VzKHRoaXMpLGUo
        dCxmdW5jdGlvbihlKXt0aGlzLnJlbW92ZU9iamVjdChlKX0sdGhpcyksRW1i
        ZXIuZW5kUHJvcGVydHlDaGFuZ2VzKHRoaXMpLHRoaXN9fSl9KCksZnVuY3Rp
        b24oKXt7dmFyIGU9IkluZGV4IG91dCBvZiByYW5nZSIsdD1bXSxyPUVtYmVy
        LmdldDtFbWJlci5zZXR9RW1iZXIuTXV0YWJsZUFycmF5PUVtYmVyLk1peGlu
        LmNyZWF0ZShFbWJlci5BcnJheSxFbWJlci5NdXRhYmxlRW51bWVyYWJsZSx7
        cmVwbGFjZTpFbWJlci5yZXF1aXJlZCgpLGNsZWFyOmZ1bmN0aW9uKCl7dmFy
        IGU9cih0aGlzLCJsZW5ndGgiKTtyZXR1cm4gMD09PWU/dGhpczoodGhpcy5y
        ZXBsYWNlKDAsZSx0KSx0aGlzKX0saW5zZXJ0QXQ6ZnVuY3Rpb24odCxuKXtp
        Zih0PnIodGhpcywibGVuZ3RoIikpdGhyb3cgbmV3IEVtYmVyLkVycm9yKGUp
        O3JldHVybiB0aGlzLnJlcGxhY2UodCwwLFtuXSksdGhpc30scmVtb3ZlQXQ6
        ZnVuY3Rpb24obixpKXtpZigibnVtYmVyIj09dHlwZW9mIG4pe2lmKDA+bnx8
        bj49cih0aGlzLCJsZW5ndGgiKSl0aHJvdyBuZXcgRW1iZXIuRXJyb3IoZSk7
        dm9pZCAwPT09aSYmKGk9MSksdGhpcy5yZXBsYWNlKG4saSx0KX1yZXR1cm4g
        dGhpc30scHVzaE9iamVjdDpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5pbnNl
        cnRBdChyKHRoaXMsImxlbmd0aCIpLGUpLGV9LHB1c2hPYmplY3RzOmZ1bmN0
        aW9uKGUpe2lmKCFFbWJlci5FbnVtZXJhYmxlLmRldGVjdChlKSYmIUVtYmVy
        LmlzQXJyYXkoZSkpdGhyb3cgbmV3IFR5cGVFcnJvcigiTXVzdCBwYXNzIEVt
        YmVyLkVudW1lcmFibGUgdG8gRW1iZXIuTXV0YWJsZUFycmF5I3B1c2hPYmpl
        Y3RzIik7cmV0dXJuIHRoaXMucmVwbGFjZShyKHRoaXMsImxlbmd0aCIpLDAs
        ZSksdGhpc30scG9wT2JqZWN0OmZ1bmN0aW9uKCl7dmFyIGU9cih0aGlzLCJs
        ZW5ndGgiKTtpZigwPT09ZSlyZXR1cm4gbnVsbDt2YXIgdD10aGlzLm9iamVj
        dEF0KGUtMSk7cmV0dXJuIHRoaXMucmVtb3ZlQXQoZS0xLDEpLHR9LHNoaWZ0
        T2JqZWN0OmZ1bmN0aW9uKCl7aWYoMD09PXIodGhpcywibGVuZ3RoIikpcmV0
        dXJuIG51bGw7dmFyIGU9dGhpcy5vYmplY3RBdCgwKTtyZXR1cm4gdGhpcy5y
        ZW1vdmVBdCgwKSxlfSx1bnNoaWZ0T2JqZWN0OmZ1bmN0aW9uKGUpe3JldHVy
        biB0aGlzLmluc2VydEF0KDAsZSksZX0sdW5zaGlmdE9iamVjdHM6ZnVuY3Rp
        b24oZSl7cmV0dXJuIHRoaXMucmVwbGFjZSgwLDAsZSksdGhpc30scmV2ZXJz
        ZU9iamVjdHM6ZnVuY3Rpb24oKXt2YXIgZT1yKHRoaXMsImxlbmd0aCIpO2lm
        KDA9PT1lKXJldHVybiB0aGlzO3ZhciB0PXRoaXMudG9BcnJheSgpLnJldmVy
        c2UoKTtyZXR1cm4gdGhpcy5yZXBsYWNlKDAsZSx0KSx0aGlzfSxzZXRPYmpl
        Y3RzOmZ1bmN0aW9uKGUpe2lmKDA9PT1lLmxlbmd0aClyZXR1cm4gdGhpcy5j
        bGVhcigpO3ZhciB0PXIodGhpcywibGVuZ3RoIik7cmV0dXJuIHRoaXMucmVw
        bGFjZSgwLHQsZSksdGhpc30scmVtb3ZlT2JqZWN0OmZ1bmN0aW9uKGUpe2Zv
        cih2YXIgdD1yKHRoaXMsImxlbmd0aCIpfHwwOy0tdD49MDspe3ZhciBuPXRo
        aXMub2JqZWN0QXQodCk7bj09PWUmJnRoaXMucmVtb3ZlQXQodCl9cmV0dXJu
        IHRoaXN9LGFkZE9iamVjdDpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5jb250
        YWlucyhlKXx8dGhpcy5wdXNoT2JqZWN0KGUpLHRoaXN9fSl9KCksZnVuY3Rp
        b24oKXt7dmFyIGU9RW1iZXIuZ2V0O0VtYmVyLnNldH1FbWJlci5UYXJnZXRB
        Y3Rpb25TdXBwb3J0PUVtYmVyLk1peGluLmNyZWF0ZSh7dGFyZ2V0Om51bGws
        YWN0aW9uOm51bGwsYWN0aW9uQ29udGV4dDpudWxsLHRhcmdldE9iamVjdDpF
        bWJlci5jb21wdXRlZChmdW5jdGlvbigpe3ZhciB0PWUodGhpcywidGFyZ2V0
        Iik7aWYoInN0cmluZyI9PT1FbWJlci50eXBlT2YodCkpe3ZhciByPWUodGhp
        cyx0KTtyZXR1cm4gdm9pZCAwPT09ciYmKHI9ZShFbWJlci5sb29rdXAsdCkp
        LHJ9cmV0dXJuIHR9KS5wcm9wZXJ0eSgidGFyZ2V0IiksYWN0aW9uQ29udGV4
        dE9iamVjdDpFbWJlci5jb21wdXRlZChmdW5jdGlvbigpe3ZhciB0PWUodGhp
        cywiYWN0aW9uQ29udGV4dCIpO2lmKCJzdHJpbmciPT09RW1iZXIudHlwZU9m
        KHQpKXt2YXIgcj1lKHRoaXMsdCk7cmV0dXJuIHZvaWQgMD09PXImJihyPWUo
        RW1iZXIubG9va3VwLHQpKSxyfXJldHVybiB0fSkucHJvcGVydHkoImFjdGlv
        bkNvbnRleHQiKSx0cmlnZ2VyQWN0aW9uOmZ1bmN0aW9uKHQpe2Z1bmN0aW9u
        IHIoZSx0KXt2YXIgcj1bXTtyZXR1cm4gdCYmci5wdXNoKHQpLHIuY29uY2F0
        KGUpfXQ9dHx8e307dmFyIG49dC5hY3Rpb258fGUodGhpcywiYWN0aW9uIiks
        aT10LnRhcmdldHx8ZSh0aGlzLCJ0YXJnZXRPYmplY3QiKSxvPXQuYWN0aW9u
        Q29udGV4dDtpZigidW5kZWZpbmVkIj09dHlwZW9mIG8mJihvPWUodGhpcywi
        YWN0aW9uQ29udGV4dE9iamVjdCIpfHx0aGlzKSxpJiZuKXt2YXIgYTtyZXR1
        cm4gYT1pLnNlbmQ/aS5zZW5kLmFwcGx5KGkscihvLG4pKTppW25dLmFwcGx5
        KGkscihvKSksYSE9PSExJiYoYT0hMCksYX1yZXR1cm4hMX19KX0oKSxmdW5j
        dGlvbigpe0VtYmVyLkV2ZW50ZWQ9RW1iZXIuTWl4aW4uY3JlYXRlKHtvbjpm
        dW5jdGlvbihlLHQscil7cmV0dXJuIEVtYmVyLmFkZExpc3RlbmVyKHRoaXMs
        ZSx0LHIpLHRoaXN9LG9uZTpmdW5jdGlvbihlLHQscil7cmV0dXJuIHJ8fChy
        PXQsdD1udWxsKSxFbWJlci5hZGRMaXN0ZW5lcih0aGlzLGUsdCxyLCEwKSx0
        aGlzfSx0cmlnZ2VyOmZ1bmN0aW9uKGUpe3ZhciB0LHIsbj1bXTtmb3IodD0x
        LHI9YXJndW1lbnRzLmxlbmd0aDtyPnQ7dCsrKW4ucHVzaChhcmd1bWVudHNb
        dF0pO0VtYmVyLnNlbmRFdmVudCh0aGlzLGUsbil9LG9mZjpmdW5jdGlvbihl
        LHQscil7cmV0dXJuIEVtYmVyLnJlbW92ZUxpc3RlbmVyKHRoaXMsZSx0LHIp
        LHRoaXN9LGhhczpmdW5jdGlvbihlKXtyZXR1cm4gRW1iZXIuaGFzTGlzdGVu
        ZXJzKHRoaXMsZSl9fSl9KCksZnVuY3Rpb24oKXt2YXIgZT10KCJyc3ZwIik7
        ZS5jb25maWd1cmUoImFzeW5jIixmdW5jdGlvbihlLHQpe0VtYmVyLnJ1bi5z
        Y2hlZHVsZSgiYWN0aW9ucyIsdCxlLHQpfSksZS5Qcm9taXNlLnByb3RvdHlw
        ZS5mYWlsPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXNbImNhdGNoIl0oZSx0
        KX07dmFyIHI9RW1iZXIuZ2V0O0VtYmVyLkRlZmVycmVkTWl4aW49RW1iZXIu
        TWl4aW4uY3JlYXRlKHt0aGVuOmZ1bmN0aW9uKGUsdCxuKXtmdW5jdGlvbiBp
        KHQpe3JldHVybiB0PT09YT9lKHMpOmUodCl9dmFyIG8sYSxzO3JldHVybiBz
        PXRoaXMsbz1yKHRoaXMsIl9kZWZlcnJlZCIpLGE9by5wcm9taXNlLGEudGhl
        bihlJiZpLHQsbil9LHJlc29sdmU6ZnVuY3Rpb24oZSl7dmFyIHQsbjt0PXIo
        dGhpcywiX2RlZmVycmVkIiksbj10LnByb21pc2UsZT09PXRoaXM/dC5yZXNv
        bHZlKG4pOnQucmVzb2x2ZShlKX0scmVqZWN0OmZ1bmN0aW9uKGUpe3IodGhp
        cywiX2RlZmVycmVkIikucmVqZWN0KGUpfSxfZGVmZXJyZWQ6RW1iZXIuY29t
        cHV0ZWQoZnVuY3Rpb24oKXtyZXR1cm4gZS5kZWZlcigiRW1iZXI6IERlZmVy
        cmVkTWl4aW4gLSAiK3RoaXMpfSl9KX0oKSxmdW5jdGlvbigpe3ZhciBlPUVt
        YmVyLmdldCx0PUVtYmVyLnR5cGVPZjtFbWJlci5BY3Rpb25IYW5kbGVyPUVt
        YmVyLk1peGluLmNyZWF0ZSh7bWVyZ2VkUHJvcGVydGllczpbIl9hY3Rpb25z
        Il0sd2lsbE1lcmdlTWl4aW46ZnVuY3Rpb24oZSl7dmFyIHI7ZS5fYWN0aW9u
        c3x8KCJvYmplY3QiPT09dChlLmFjdGlvbnMpP3I9ImFjdGlvbnMiOiJvYmpl
        Y3QiPT09dChlLmV2ZW50cykmJihyPSJldmVudHMiKSxyJiYoZS5fYWN0aW9u
        cz1FbWJlci5tZXJnZShlLl9hY3Rpb25zfHx7fSxlW3JdKSksZGVsZXRlIGVb
        cl0pfSxzZW5kOmZ1bmN0aW9uKHQpe3ZhciByLG49W10uc2xpY2UuY2FsbChh
        cmd1bWVudHMsMSk7aWYodGhpcy5fYWN0aW9ucyYmdGhpcy5fYWN0aW9uc1t0
        XSl7aWYodGhpcy5fYWN0aW9uc1t0XS5hcHBseSh0aGlzLG4pIT09ITApcmV0
        dXJufWVsc2UgaWYodGhpcy5kZXByZWNhdGVkU2VuZCYmdGhpcy5kZXByZWNh
        dGVkU2VuZEhhbmRsZXMmJnRoaXMuZGVwcmVjYXRlZFNlbmRIYW5kbGVzKHQp
        JiZ0aGlzLmRlcHJlY2F0ZWRTZW5kLmFwcGx5KHRoaXMsW10uc2xpY2UuY2Fs
        bChhcmd1bWVudHMpKSE9PSEwKXJldHVybjsocj1lKHRoaXMsInRhcmdldCIp
        KSYmci5zZW5kLmFwcGx5KHIsYXJndW1lbnRzKX19KX0oKSxmdW5jdGlvbigp
        e2Z1bmN0aW9uIGUoZSx0KXtyZXR1cm4gdC50aGVuKGZ1bmN0aW9uKHQpe3Jl
        dHVybiByKGUsImlzRnVsZmlsbGVkIiwhMCkscihlLCJjb250ZW50Iix0KSx0
        fSxmdW5jdGlvbih0KXt0aHJvdyByKGUsImlzUmVqZWN0ZWQiLCEwKSxyKGUs
        InJlYXNvbiIsdCksdH0sIkVtYmVyOiBQcm9taXNlUHJveHkiKX1mdW5jdGlv
        biB0KGUpe3JldHVybiBmdW5jdGlvbigpe3ZhciB0PW4odGhpcywicHJvbWlz
        ZSIpO3JldHVybiB0W2VdLmFwcGx5KHQsYXJndW1lbnRzKX19dmFyIHI9RW1i
        ZXIuc2V0LG49RW1iZXIuZ2V0LGk9RW1iZXIuY29tcHV0ZWQubm90LG89RW1i
        ZXIuY29tcHV0ZWQub3I7RW1iZXIuUHJvbWlzZVByb3h5TWl4aW49RW1iZXIu
        TWl4aW4uY3JlYXRlKHtyZWFzb246bnVsbCxpc1BlbmRpbmc6aSgiaXNTZXR0
        bGVkIikucmVhZE9ubHkoKSxpc1NldHRsZWQ6bygiaXNSZWplY3RlZCIsImlz
        RnVsZmlsbGVkIikucmVhZE9ubHkoKSxpc1JlamVjdGVkOiExLGlzRnVsZmls
        bGVkOiExLHByb21pc2U6RW1iZXIuY29tcHV0ZWQoZnVuY3Rpb24odCxyKXtp
        ZigyPT09YXJndW1lbnRzLmxlbmd0aClyZXR1cm4gZSh0aGlzLHIpO3Rocm93
        IG5ldyBFbWJlci5FcnJvcigiUHJvbWlzZVByb3h5J3MgcHJvbWlzZSBtdXN0
        IGJlIHNldCIpfSksdGhlbjp0KCJ0aGVuIiksImNhdGNoIjp0KCJjYXRjaCIp
        LCJmaW5hbGx5Ijp0KCJmaW5hbGx5Iil9KX0oKSxmdW5jdGlvbigpe2Z1bmN0
        aW9uIGUoZSx0LHIpe3RoaXMudHlwZT1lLHRoaXMuY291bnQ9dCx0aGlzLml0
        ZW1zPXJ9ZnVuY3Rpb24gdChlLHQscixuKXt0aGlzLm9wZXJhdGlvbj1lLHRo
        aXMuaW5kZXg9dCx0aGlzLnNwbGl0PXIsdGhpcy5yYW5nZVN0YXJ0PW59dmFy
        IHI9RW1iZXIuZ2V0LG49RW1iZXIuRW51bWVyYWJsZVV0aWxzLmZvckVhY2gs
        aT0iciIsbz0iaSIsYT0iZCI7RW1iZXIuVHJhY2tlZEFycmF5PWZ1bmN0aW9u
        KHQpe2FyZ3VtZW50cy5sZW5ndGg8MSYmKHQ9W10pO3ZhciBuPXIodCwibGVu
        Z3RoIik7dGhpcy5fb3BlcmF0aW9ucz1uP1tuZXcgZShpLG4sdCldOltdfSxF
        bWJlci5UcmFja2VkQXJyYXkuUkVUQUlOPWksRW1iZXIuVHJhY2tlZEFycmF5
        LklOU0VSVD1vLEVtYmVyLlRyYWNrZWRBcnJheS5ERUxFVEU9YSxFbWJlci5U
        cmFja2VkQXJyYXkucHJvdG90eXBlPXthZGRJdGVtczpmdW5jdGlvbih0LG4p
        e3ZhciBpPXIobiwibGVuZ3RoIik7aWYoISgxPmkpKXt2YXIgYSxzLHU9dGhp
        cy5fZmluZEFycmF5T3BlcmF0aW9uKHQpLGw9dS5vcGVyYXRpb24sYz11Lmlu
        ZGV4LGg9dS5yYW5nZVN0YXJ0O3M9bmV3IGUobyxpLG4pLGw/dS5zcGxpdD8o
        dGhpcy5fc3BsaXQoYyx0LWgscyksYT1jKzEpOih0aGlzLl9vcGVyYXRpb25z
        LnNwbGljZShjLDAscyksYT1jKToodGhpcy5fb3BlcmF0aW9ucy5wdXNoKHMp
        LGE9YyksdGhpcy5fY29tcG9zZUluc2VydChhKX19LHJlbW92ZUl0ZW1zOmZ1
        bmN0aW9uKHQscil7aWYoISgxPnIpKXt2YXIgbixpLG89dGhpcy5fZmluZEFy
        cmF5T3BlcmF0aW9uKHQpLHM9KG8ub3BlcmF0aW9uLG8uaW5kZXgpLHU9by5y
        YW5nZVN0YXJ0O3JldHVybiBuPW5ldyBlKGEsciksby5zcGxpdD8odGhpcy5f
        c3BsaXQocyx0LXUsbiksaT1zKzEpOih0aGlzLl9vcGVyYXRpb25zLnNwbGlj
        ZShzLDAsbiksaT1zKSx0aGlzLl9jb21wb3NlRGVsZXRlKGkpfX0sYXBwbHk6
        ZnVuY3Rpb24odCl7dmFyIHI9W10sbz0wO24odGhpcy5fb3BlcmF0aW9ucyxm
        dW5jdGlvbihlKXt0KGUuaXRlbXMsbyxlLnR5cGUpLGUudHlwZSE9PWEmJihv
        Kz1lLmNvdW50LHI9ci5jb25jYXQoZS5pdGVtcykpfSksdGhpcy5fb3BlcmF0
        aW9ucz1bbmV3IGUoaSxyLmxlbmd0aCxyKV19LF9maW5kQXJyYXlPcGVyYXRp
        b246ZnVuY3Rpb24oZSl7dmFyIHIsbixpLG8scyx1PSExO2ZvcihyPW89MCxu
        PXRoaXMuX29wZXJhdGlvbnMubGVuZ3RoO24+cjsrK3IpaWYoaT10aGlzLl9v
        cGVyYXRpb25zW3JdLGkudHlwZSE9PWEpe2lmKHM9bytpLmNvdW50LTEsZT09
        PW8pYnJlYWs7aWYoZT5vJiZzPj1lKXt1PSEwO2JyZWFrfW89cysxfXJldHVy
        biBuZXcgdChpLHIsdSxvKX0sX3NwbGl0OmZ1bmN0aW9uKHQscixuKXt2YXIg
        aT10aGlzLl9vcGVyYXRpb25zW3RdLG89aS5pdGVtcy5zbGljZShyKSxhPW5l
        dyBlKGkudHlwZSxvLmxlbmd0aCxvKTtpLmNvdW50PXIsaS5pdGVtcz1pLml0
        ZW1zLnNsaWNlKDAsciksdGhpcy5fb3BlcmF0aW9ucy5zcGxpY2UodCsxLDAs
        bixhKX0sX2NvbXBvc2VJbnNlcnQ6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5f
        b3BlcmF0aW9uc1tlXSxyPXRoaXMuX29wZXJhdGlvbnNbZS0xXSxuPXRoaXMu
        X29wZXJhdGlvbnNbZSsxXSxpPXImJnIudHlwZSxhPW4mJm4udHlwZTtpPT09
        bz8oci5jb3VudCs9dC5jb3VudCxyLml0ZW1zPXIuaXRlbXMuY29uY2F0KHQu
        aXRlbXMpLGE9PT1vPyhyLmNvdW50Kz1uLmNvdW50LHIuaXRlbXM9ci5pdGVt
        cy5jb25jYXQobi5pdGVtcyksdGhpcy5fb3BlcmF0aW9ucy5zcGxpY2UoZSwy
        KSk6dGhpcy5fb3BlcmF0aW9ucy5zcGxpY2UoZSwxKSk6YT09PW8mJih0LmNv
        dW50Kz1uLmNvdW50LHQuaXRlbXM9dC5pdGVtcy5jb25jYXQobi5pdGVtcyks
        dGhpcy5fb3BlcmF0aW9ucy5zcGxpY2UoZSsxLDEpKX0sX2NvbXBvc2VEZWxl
        dGU6ZnVuY3Rpb24oZSl7dmFyIHQscixuLGk9dGhpcy5fb3BlcmF0aW9uc1tl
        XSxzPWkuY291bnQsdT10aGlzLl9vcGVyYXRpb25zW2UtMV0sbD11JiZ1LnR5
        cGUsYz0hMSxoPVtdO2w9PT1hJiYoaT11LGUtPTEpO2Zvcih2YXIgbT1lKzE7
        cz4wOysrbSl0PXRoaXMuX29wZXJhdGlvbnNbbV0scj10LnR5cGUsbj10LmNv
        dW50LHIhPT1hPyhuPnM/KGg9aC5jb25jYXQodC5pdGVtcy5zcGxpY2UoMCxz
        KSksdC5jb3VudC09cyxtLT0xLG49cyxzPTApOihuPT09cyYmKGM9ITApLGg9
        aC5jb25jYXQodC5pdGVtcykscy09bikscj09PW8mJihpLmNvdW50LT1uKSk6
        aS5jb3VudCs9bjtyZXR1cm4gaS5jb3VudD4wP3RoaXMuX29wZXJhdGlvbnMu
        c3BsaWNlKGUrMSxtLTEtZSk6dGhpcy5fb3BlcmF0aW9ucy5zcGxpY2UoZSxj
        PzI6MSksaH0sdG9TdHJpbmc6ZnVuY3Rpb24oKXt2YXIgZT0iIjtyZXR1cm4g
        bih0aGlzLl9vcGVyYXRpb25zLGZ1bmN0aW9uKHQpe2UrPSIgIit0LnR5cGUr
        IjoiK3QuY291bnR9KSxlLnN1YnN0cmluZygxKX19fSgpLGZ1bmN0aW9uKCl7
        ZnVuY3Rpb24gZShlLHQpe3RoaXMudHlwZT1lLHRoaXMuY291bnQ9dH12YXIg
        dD0oRW1iZXIuZ2V0LEVtYmVyLkVudW1lcmFibGVVdGlscy5mb3JFYWNoKSxy
        PSJyIixuPSJmIjtFbWJlci5TdWJBcnJheT1mdW5jdGlvbih0KXthcmd1bWVu
        dHMubGVuZ3RoPDEmJih0PTApLHRoaXMuX29wZXJhdGlvbnM9dD4wP1tuZXcg
        ZShyLHQpXTpbXX0sRW1iZXIuU3ViQXJyYXkucHJvdG90eXBlPXthZGRJdGVt
        OmZ1bmN0aW9uKHQsaSl7dmFyIG89LTEsYT1pP3I6bixzPXRoaXM7cmV0dXJu
        IHRoaXMuX2ZpbmRPcGVyYXRpb24odCxmdW5jdGlvbihuLHUsbCxjLGgpe3Zh
        ciBtLGY7YT09PW4udHlwZT8rK24uY291bnQ6dD09PWw/cy5fb3BlcmF0aW9u
        cy5zcGxpY2UodSwwLG5ldyBlKGEsMSkpOihtPW5ldyBlKGEsMSksZj1uZXcg
        ZShuLnR5cGUsYy10KzEpLG4uY291bnQ9dC1sLHMuX29wZXJhdGlvbnMuc3Bs
        aWNlKHUrMSwwLG0sZikpLGkmJihvPW4udHlwZT09PXI/aCsodC1sKTpoKSxz
        Ll9jb21wb3NlQXQodSl9LGZ1bmN0aW9uKHQpe3MuX29wZXJhdGlvbnMucHVz
        aChuZXcgZShhLDEpKSxpJiYobz10KSxzLl9jb21wb3NlQXQocy5fb3BlcmF0
        aW9ucy5sZW5ndGgtMSl9KSxvfSxyZW1vdmVJdGVtOmZ1bmN0aW9uKGUpe3Zh
        ciB0PS0xLG49dGhpcztyZXR1cm4gdGhpcy5fZmluZE9wZXJhdGlvbihlLGZ1
        bmN0aW9uKGksbyxhLHMsdSl7aS50eXBlPT09ciYmKHQ9dSsoZS1hKSksaS5j
        b3VudD4xPy0taS5jb3VudDoobi5fb3BlcmF0aW9ucy5zcGxpY2UobywxKSxu
        Ll9jb21wb3NlQXQobykpfSxmdW5jdGlvbigpe3Rocm93IG5ldyBFbWJlci5F
        cnJvcigiQ2FuJ3QgcmVtb3ZlIGFuIGl0ZW0gdGhhdCBoYXMgbmV2ZXIgYmVl
        biBhZGRlZC4iKX0pLHR9LF9maW5kT3BlcmF0aW9uOmZ1bmN0aW9uKGUsdCxu
        KXt2YXIgaSxvLGEscyx1LGw9MDtmb3IoaT1zPTAsbz10aGlzLl9vcGVyYXRp
        b25zLmxlbmd0aDtvPmk7cz11KzEsKytpKXtpZihhPXRoaXMuX29wZXJhdGlv
        bnNbaV0sdT1zK2EuY291bnQtMSxlPj1zJiZ1Pj1lKXJldHVybiB0KGEsaSxz
        LHUsbCksdm9pZCAwO2EudHlwZT09PXImJihsKz1hLmNvdW50KX1uKGwpfSxf
        Y29tcG9zZUF0OmZ1bmN0aW9uKGUpe3ZhciB0LHI9dGhpcy5fb3BlcmF0aW9u
        c1tlXTtyJiYoZT4wJiYodD10aGlzLl9vcGVyYXRpb25zW2UtMV0sdC50eXBl
        PT09ci50eXBlJiYoci5jb3VudCs9dC5jb3VudCx0aGlzLl9vcGVyYXRpb25z
        LnNwbGljZShlLTEsMSksLS1lKSksZTx0aGlzLl9vcGVyYXRpb25zLmxlbmd0
        aC0xJiYodD10aGlzLl9vcGVyYXRpb25zW2UrMV0sdC50eXBlPT09ci50eXBl
        JiYoci5jb3VudCs9dC5jb3VudCx0aGlzLl9vcGVyYXRpb25zLnNwbGljZShl
        KzEsMSkpKSl9LHRvU3RyaW5nOmZ1bmN0aW9uKCl7dmFyIGU9IiI7cmV0dXJu
        IHQodGhpcy5fb3BlcmF0aW9ucyxmdW5jdGlvbih0KXtlKz0iICIrdC50eXBl
        KyI6Iit0LmNvdW50fSksZS5zdWJzdHJpbmcoMSl9fX0oKSxmdW5jdGlvbigp
        e0VtYmVyLkNvbnRhaW5lcj10KCJjb250YWluZXIiKSxFbWJlci5Db250YWlu
        ZXIuc2V0PUVtYmVyLnNldH0oKSxmdW5jdGlvbigpe0VtYmVyLkFwcGxpY2F0
        aW9uPUVtYmVyLk5hbWVzcGFjZS5leHRlbmQoKX0oKSxmdW5jdGlvbigpe3t2
        YXIgZT0iSW5kZXggb3V0IG9mIHJhbmdlIix0PVtdLHI9RW1iZXIuZ2V0O0Vt
        YmVyLnNldH1FbWJlci5BcnJheVByb3h5PUVtYmVyLk9iamVjdC5leHRlbmQo
        RW1iZXIuTXV0YWJsZUFycmF5LHtjb250ZW50Om51bGwsYXJyYW5nZWRDb250
        ZW50OkVtYmVyLmNvbXB1dGVkLmFsaWFzKCJjb250ZW50Iiksb2JqZWN0QXRD
        b250ZW50OmZ1bmN0aW9uKGUpe3JldHVybiByKHRoaXMsImFycmFuZ2VkQ29u
        dGVudCIpLm9iamVjdEF0KGUpfSxyZXBsYWNlQ29udGVudDpmdW5jdGlvbihl
        LHQsbil7cih0aGlzLCJjb250ZW50IikucmVwbGFjZShlLHQsbil9LF9jb250
        ZW50V2lsbENoYW5nZTpFbWJlci5iZWZvcmVPYnNlcnZlcigiY29udGVudCIs
        ZnVuY3Rpb24oKXt0aGlzLl90ZWFyZG93bkNvbnRlbnQoKX0pLF90ZWFyZG93
        bkNvbnRlbnQ6ZnVuY3Rpb24oKXt2YXIgZT1yKHRoaXMsImNvbnRlbnQiKTtl
        JiZlLnJlbW92ZUFycmF5T2JzZXJ2ZXIodGhpcyx7d2lsbENoYW5nZToiY29u
        dGVudEFycmF5V2lsbENoYW5nZSIsZGlkQ2hhbmdlOiJjb250ZW50QXJyYXlE
        aWRDaGFuZ2UifSl9LGNvbnRlbnRBcnJheVdpbGxDaGFuZ2U6RW1iZXIuSyxj
        b250ZW50QXJyYXlEaWRDaGFuZ2U6RW1iZXIuSyxfY29udGVudERpZENoYW5n
        ZTpFbWJlci5vYnNlcnZlcigiY29udGVudCIsZnVuY3Rpb24oKXtyKHRoaXMs
        ImNvbnRlbnQiKTt0aGlzLl9zZXR1cENvbnRlbnQoKX0pLF9zZXR1cENvbnRl
        bnQ6ZnVuY3Rpb24oKXt2YXIgZT1yKHRoaXMsImNvbnRlbnQiKTtlJiZlLmFk
        ZEFycmF5T2JzZXJ2ZXIodGhpcyx7d2lsbENoYW5nZToiY29udGVudEFycmF5
        V2lsbENoYW5nZSIsZGlkQ2hhbmdlOiJjb250ZW50QXJyYXlEaWRDaGFuZ2Ui
        fSl9LF9hcnJhbmdlZENvbnRlbnRXaWxsQ2hhbmdlOkVtYmVyLmJlZm9yZU9i
        c2VydmVyKCJhcnJhbmdlZENvbnRlbnQiLGZ1bmN0aW9uKCl7dmFyIGU9cih0
        aGlzLCJhcnJhbmdlZENvbnRlbnQiKSx0PWU/cihlLCJsZW5ndGgiKTowO3Ro
        aXMuYXJyYW5nZWRDb250ZW50QXJyYXlXaWxsQ2hhbmdlKHRoaXMsMCx0LHZv
        aWQgMCksdGhpcy5hcnJhbmdlZENvbnRlbnRXaWxsQ2hhbmdlKHRoaXMpLHRo
        aXMuX3RlYXJkb3duQXJyYW5nZWRDb250ZW50KGUpfSksX2FycmFuZ2VkQ29u
        dGVudERpZENoYW5nZTpFbWJlci5vYnNlcnZlcigiYXJyYW5nZWRDb250ZW50
        IixmdW5jdGlvbigpe3ZhciBlPXIodGhpcywiYXJyYW5nZWRDb250ZW50Iiks
        dD1lP3IoZSwibGVuZ3RoIik6MDt0aGlzLl9zZXR1cEFycmFuZ2VkQ29udGVu
        dCgpLHRoaXMuYXJyYW5nZWRDb250ZW50RGlkQ2hhbmdlKHRoaXMpLHRoaXMu
        YXJyYW5nZWRDb250ZW50QXJyYXlEaWRDaGFuZ2UodGhpcywwLHZvaWQgMCx0
        KX0pLF9zZXR1cEFycmFuZ2VkQ29udGVudDpmdW5jdGlvbigpe3ZhciBlPXIo
        dGhpcywiYXJyYW5nZWRDb250ZW50Iik7ZSYmZS5hZGRBcnJheU9ic2VydmVy
        KHRoaXMse3dpbGxDaGFuZ2U6ImFycmFuZ2VkQ29udGVudEFycmF5V2lsbENo
        YW5nZSIsZGlkQ2hhbmdlOiJhcnJhbmdlZENvbnRlbnRBcnJheURpZENoYW5n
        ZSJ9KX0sX3RlYXJkb3duQXJyYW5nZWRDb250ZW50OmZ1bmN0aW9uKCl7dmFy
        IGU9cih0aGlzLCJhcnJhbmdlZENvbnRlbnQiKTtlJiZlLnJlbW92ZUFycmF5
        T2JzZXJ2ZXIodGhpcyx7d2lsbENoYW5nZToiYXJyYW5nZWRDb250ZW50QXJy
        YXlXaWxsQ2hhbmdlIixkaWRDaGFuZ2U6ImFycmFuZ2VkQ29udGVudEFycmF5
        RGlkQ2hhbmdlIn0pfSxhcnJhbmdlZENvbnRlbnRXaWxsQ2hhbmdlOkVtYmVy
        LkssYXJyYW5nZWRDb250ZW50RGlkQ2hhbmdlOkVtYmVyLkssb2JqZWN0QXQ6
        ZnVuY3Rpb24oZSl7cmV0dXJuIHIodGhpcywiY29udGVudCIpJiZ0aGlzLm9i
        amVjdEF0Q29udGVudChlKX0sbGVuZ3RoOkVtYmVyLmNvbXB1dGVkKGZ1bmN0
        aW9uKCl7dmFyIGU9cih0aGlzLCJhcnJhbmdlZENvbnRlbnQiKTtyZXR1cm4g
        ZT9yKGUsImxlbmd0aCIpOjB9KSxfcmVwbGFjZTpmdW5jdGlvbihlLHQsbil7
        dmFyIGk9cih0aGlzLCJjb250ZW50Iik7cmV0dXJuIGkmJnRoaXMucmVwbGFj
        ZUNvbnRlbnQoZSx0LG4pLHRoaXN9LHJlcGxhY2U6ZnVuY3Rpb24oKXtpZihy
        KHRoaXMsImFycmFuZ2VkQ29udGVudCIpIT09cih0aGlzLCJjb250ZW50Iikp
        dGhyb3cgbmV3IEVtYmVyLkVycm9yKCJVc2luZyByZXBsYWNlIG9uIGFuIGFy
        cmFuZ2VkIEFycmF5UHJveHkgaXMgbm90IGFsbG93ZWQuIik7dGhpcy5fcmVw
        bGFjZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LF9pbnNlcnRBdDpmdW5jdGlv
        bih0LG4pe2lmKHQ+cih0aGlzLCJjb250ZW50Lmxlbmd0aCIpKXRocm93IG5l
        dyBFbWJlci5FcnJvcihlKTtyZXR1cm4gdGhpcy5fcmVwbGFjZSh0LDAsW25d
        KSx0aGlzfSxpbnNlcnRBdDpmdW5jdGlvbihlLHQpe2lmKHIodGhpcywiYXJy
        YW5nZWRDb250ZW50Iik9PT1yKHRoaXMsImNvbnRlbnQiKSlyZXR1cm4gdGhp
        cy5faW5zZXJ0QXQoZSx0KTt0aHJvdyBuZXcgRW1iZXIuRXJyb3IoIlVzaW5n
        IGluc2VydEF0IG9uIGFuIGFycmFuZ2VkIEFycmF5UHJveHkgaXMgbm90IGFs
        bG93ZWQuIil9LHJlbW92ZUF0OmZ1bmN0aW9uKG4saSl7aWYoIm51bWJlciI9
        PXR5cGVvZiBuKXt2YXIgbyxhPXIodGhpcywiY29udGVudCIpLHM9cih0aGlz
        LCJhcnJhbmdlZENvbnRlbnQiKSx1PVtdO2lmKDA+bnx8bj49cih0aGlzLCJs
        ZW5ndGgiKSl0aHJvdyBuZXcgRW1iZXIuRXJyb3IoZSk7Zm9yKHZvaWQgMD09
        PWkmJihpPTEpLG89bjtuK2k+bztvKyspdS5wdXNoKGEuaW5kZXhPZihzLm9i
        amVjdEF0KG8pKSk7Zm9yKHUuc29ydChmdW5jdGlvbihlLHQpe3JldHVybiB0
        LWV9KSxFbWJlci5iZWdpblByb3BlcnR5Q2hhbmdlcygpLG89MDtvPHUubGVu
        Z3RoO28rKyl0aGlzLl9yZXBsYWNlKHVbb10sMSx0KTtFbWJlci5lbmRQcm9w
        ZXJ0eUNoYW5nZXMoKX1yZXR1cm4gdGhpc30scHVzaE9iamVjdDpmdW5jdGlv
        bihlKXtyZXR1cm4gdGhpcy5faW5zZXJ0QXQocih0aGlzLCJjb250ZW50Lmxl
        bmd0aCIpLGUpLGV9LHB1c2hPYmplY3RzOmZ1bmN0aW9uKGUpe2lmKCFFbWJl
        ci5FbnVtZXJhYmxlLmRldGVjdChlKSYmIUVtYmVyLmlzQXJyYXkoZSkpdGhy
        b3cgbmV3IFR5cGVFcnJvcigiTXVzdCBwYXNzIEVtYmVyLkVudW1lcmFibGUg
        dG8gRW1iZXIuTXV0YWJsZUFycmF5I3B1c2hPYmplY3RzIik7cmV0dXJuIHRo
        aXMuX3JlcGxhY2Uocih0aGlzLCJsZW5ndGgiKSwwLGUpLHRoaXN9LHNldE9i
        amVjdHM6ZnVuY3Rpb24oZSl7aWYoMD09PWUubGVuZ3RoKXJldHVybiB0aGlz
        LmNsZWFyKCk7dmFyIHQ9cih0aGlzLCJsZW5ndGgiKTtyZXR1cm4gdGhpcy5f
        cmVwbGFjZSgwLHQsZSksdGhpc30sdW5zaGlmdE9iamVjdDpmdW5jdGlvbihl
        KXtyZXR1cm4gdGhpcy5faW5zZXJ0QXQoMCxlKSxlfSx1bnNoaWZ0T2JqZWN0
        czpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fcmVwbGFjZSgwLDAsZSksdGhp
        c30sc2xpY2U6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLnRvQXJyYXkoKTtyZXR1
        cm4gZS5zbGljZS5hcHBseShlLGFyZ3VtZW50cyl9LGFycmFuZ2VkQ29udGVu
        dEFycmF5V2lsbENoYW5nZTpmdW5jdGlvbihlLHQscixuKXt0aGlzLmFycmF5
        Q29udGVudFdpbGxDaGFuZ2UodCxyLG4pfSxhcnJhbmdlZENvbnRlbnRBcnJh
        eURpZENoYW5nZTpmdW5jdGlvbihlLHQscixuKXt0aGlzLmFycmF5Q29udGVu
        dERpZENoYW5nZSh0LHIsbil9LGluaXQ6ZnVuY3Rpb24oKXt0aGlzLl9zdXBl
        cigpLHRoaXMuX3NldHVwQ29udGVudCgpLHRoaXMuX3NldHVwQXJyYW5nZWRD
        b250ZW50KCl9LHdpbGxEZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5fdGVhcmRv
        d25BcnJhbmdlZENvbnRlbnQoKSx0aGlzLl90ZWFyZG93bkNvbnRlbnQoKX19
        KX0oKSxmdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0LHIsaSxvKXt2YXIgYSxz
        PXIuX29iamVjdHM7Zm9yKHN8fChzPXIuX29iamVjdHM9e30pOy0tbz49aTsp
        e3ZhciB1PWUub2JqZWN0QXQobyk7dSYmKEVtYmVyLmFkZEJlZm9yZU9ic2Vy
        dmVyKHUsdCxyLCJjb250ZW50S2V5V2lsbENoYW5nZSIpLEVtYmVyLmFkZE9i
        c2VydmVyKHUsdCxyLCJjb250ZW50S2V5RGlkQ2hhbmdlIiksYT1uKHUpLHNb
        YV18fChzW2FdPVtdKSxzW2FdLnB1c2gobykpfX1mdW5jdGlvbiB0KGUsdCxy
        LGksYSl7dmFyIHM9ci5fb2JqZWN0cztzfHwocz1yLl9vYmplY3RzPXt9KTtm
        b3IodmFyIHUsbDstLWE+PWk7KXt2YXIgYz1lLm9iamVjdEF0KGEpO2MmJihF
        bWJlci5yZW1vdmVCZWZvcmVPYnNlcnZlcihjLHQsciwiY29udGVudEtleVdp
        bGxDaGFuZ2UiKSxFbWJlci5yZW1vdmVPYnNlcnZlcihjLHQsciwiY29udGVu
        dEtleURpZENoYW5nZSIpLGw9bihjKSx1PXNbbF0sdVtvLmNhbGwodSxhKV09
        bnVsbCl9fXZhciByPShFbWJlci5zZXQsRW1iZXIuZ2V0KSxuPUVtYmVyLmd1
        aWRGb3IsaT1FbWJlci5FbnVtZXJhYmxlVXRpbHMuZm9yRWFjaCxvPUVtYmVy
        LkFycmF5UG9seWZpbGxzLmluZGV4T2YsYT1FbWJlci5PYmplY3QuZXh0ZW5k
        KEVtYmVyLkFycmF5LHtpbml0OmZ1bmN0aW9uKGUsdCxyKXt0aGlzLl9zdXBl
        cigpLHRoaXMuX2tleU5hbWU9dCx0aGlzLl9vd25lcj1yLHRoaXMuX2NvbnRl
        bnQ9ZX0sb2JqZWN0QXQ6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fY29udGVu
        dC5vYmplY3RBdChlKTtyZXR1cm4gdCYmcih0LHRoaXMuX2tleU5hbWUpfSxs
        ZW5ndGg6RW1iZXIuY29tcHV0ZWQoZnVuY3Rpb24oKXt2YXIgZT10aGlzLl9j
        b250ZW50O3JldHVybiBlP3IoZSwibGVuZ3RoIik6MH0pfSkscz0vXi4rOihi
        ZWZvcmV8Y2hhbmdlKSQvO0VtYmVyLkVhY2hQcm94eT1FbWJlci5PYmplY3Qu
        ZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUpe3RoaXMuX3N1cGVyKCksdGhpcy5f
        Y29udGVudD1lLGUuYWRkQXJyYXlPYnNlcnZlcih0aGlzKSxpKEVtYmVyLndh
        dGNoZWRFdmVudHModGhpcyksZnVuY3Rpb24oZSl7dGhpcy5kaWRBZGRMaXN0
        ZW5lcihlKX0sdGhpcyl9LHVua25vd25Qcm9wZXJ0eTpmdW5jdGlvbihlKXt2
        YXIgdDtyZXR1cm4gdD1uZXcgYSh0aGlzLl9jb250ZW50LGUsdGhpcyksRW1i
        ZXIuZGVmaW5lUHJvcGVydHkodGhpcyxlLG51bGwsdCksdGhpcy5iZWdpbk9i
        c2VydmluZ0NvbnRlbnRLZXkoZSksdH0sYXJyYXlXaWxsQ2hhbmdlOmZ1bmN0
        aW9uKGUscixuKXt2YXIgaSxvLGE9dGhpcy5fa2V5cztvPW4+MD9yK246LTEs
        RW1iZXIuYmVnaW5Qcm9wZXJ0eUNoYW5nZXModGhpcyk7Zm9yKGkgaW4gYSlh
        Lmhhc093blByb3BlcnR5KGkpJiYobz4wJiZ0KGUsaSx0aGlzLHIsbyksRW1i
        ZXIucHJvcGVydHlXaWxsQ2hhbmdlKHRoaXMsaSkpO0VtYmVyLnByb3BlcnR5
        V2lsbENoYW5nZSh0aGlzLl9jb250ZW50LCJAZWFjaCIpLEVtYmVyLmVuZFBy
        b3BlcnR5Q2hhbmdlcyh0aGlzKX0sYXJyYXlEaWRDaGFuZ2U6ZnVuY3Rpb24o
        dCxyLG4saSl7dmFyIG8sYT10aGlzLl9rZXlzO289aT4wP3IraTotMSxFbWJl
        ci5jaGFuZ2VQcm9wZXJ0aWVzKGZ1bmN0aW9uKCl7Zm9yKHZhciBuIGluIGEp
        YS5oYXNPd25Qcm9wZXJ0eShuKSYmKG8+MCYmZSh0LG4sdGhpcyxyLG8pLEVt
        YmVyLnByb3BlcnR5RGlkQ2hhbmdlKHRoaXMsbikpO0VtYmVyLnByb3BlcnR5
        RGlkQ2hhbmdlKHRoaXMuX2NvbnRlbnQsIkBlYWNoIil9LHRoaXMpfSxkaWRB
        ZGRMaXN0ZW5lcjpmdW5jdGlvbihlKXtzLnRlc3QoZSkmJnRoaXMuYmVnaW5P
        YnNlcnZpbmdDb250ZW50S2V5KGUuc2xpY2UoMCwtNykpfSxkaWRSZW1vdmVM
        aXN0ZW5lcjpmdW5jdGlvbihlKXtzLnRlc3QoZSkmJnRoaXMuc3RvcE9ic2Vy
        dmluZ0NvbnRlbnRLZXkoZS5zbGljZSgwLC03KSl9LGJlZ2luT2JzZXJ2aW5n
        Q29udGVudEtleTpmdW5jdGlvbih0KXt2YXIgbj10aGlzLl9rZXlzO2lmKG58
        fChuPXRoaXMuX2tleXM9e30pLG5bdF0pblt0XSsrO2Vsc2V7blt0XT0xO3Zh
        ciBpPXRoaXMuX2NvbnRlbnQsbz1yKGksImxlbmd0aCIpO2UoaSx0LHRoaXMs
        MCxvKX19LHN0b3BPYnNlcnZpbmdDb250ZW50S2V5OmZ1bmN0aW9uKGUpe3Zh
        ciBuPXRoaXMuX2tleXM7aWYobiYmbltlXT4wJiYtLW5bZV08PTApe3ZhciBp
        PXRoaXMuX2NvbnRlbnQsbz1yKGksImxlbmd0aCIpO3QoaSxlLHRoaXMsMCxv
        KX19LGNvbnRlbnRLZXlXaWxsQ2hhbmdlOmZ1bmN0aW9uKGUsdCl7RW1iZXIu
        cHJvcGVydHlXaWxsQ2hhbmdlKHRoaXMsdCl9LGNvbnRlbnRLZXlEaWRDaGFu
        Z2U6ZnVuY3Rpb24oZSx0KXtFbWJlci5wcm9wZXJ0eURpZENoYW5nZSh0aGlz
        LHQpfX0pfSgpLGZ1bmN0aW9uKCl7dmFyIGU9RW1iZXIuZ2V0LHQ9KEVtYmVy
        LnNldCxFbWJlci5FbnVtZXJhYmxlVXRpbHMuX3JlcGxhY2UpLHI9RW1iZXIu
        TWl4aW4uY3JlYXRlKEVtYmVyLk11dGFibGVBcnJheSxFbWJlci5PYnNlcnZh
        YmxlLEVtYmVyLkNvcHlhYmxlLHtnZXQ6ZnVuY3Rpb24oZSl7cmV0dXJuImxl
        bmd0aCI9PT1lP3RoaXMubGVuZ3RoOiJudW1iZXIiPT10eXBlb2YgZT90aGlz
        W2VdOnRoaXMuX3N1cGVyKGUpfSxvYmplY3RBdDpmdW5jdGlvbihlKXtyZXR1
        cm4gdGhpc1tlXX0scmVwbGFjZTpmdW5jdGlvbihyLG4saSl7aWYodGhpcy5p
        c0Zyb3plbil0aHJvdyBFbWJlci5GUk9aRU5fRVJST1I7dmFyIG89aT9lKGks
        Imxlbmd0aCIpOjA7cmV0dXJuIHRoaXMuYXJyYXlDb250ZW50V2lsbENoYW5n
        ZShyLG4sbyksMD09PW8/dGhpcy5zcGxpY2UocixuKTp0KHRoaXMscixuLGkp
        LHRoaXMuYXJyYXlDb250ZW50RGlkQ2hhbmdlKHIsbixvKSx0aGlzfSx1bmtu
        b3duUHJvcGVydHk6ZnVuY3Rpb24oZSx0KXt2YXIgcjtyZXR1cm4gdm9pZCAw
        IT09dCYmdm9pZCAwPT09ciYmKHI9dGhpc1tlXT10KSxyfSxpbmRleE9mOmZ1
        bmN0aW9uKGUsdCl7dmFyIHIsbj10aGlzLmxlbmd0aDtmb3IodD12b2lkIDA9
        PT10PzA6MD50P01hdGguY2VpbCh0KTpNYXRoLmZsb29yKHQpLDA+dCYmKHQr
        PW4pLHI9dDtuPnI7cisrKWlmKHRoaXNbcl09PT1lKXJldHVybiByO3JldHVy
        bi0xfSxsYXN0SW5kZXhPZjpmdW5jdGlvbihlLHQpe3ZhciByLG49dGhpcy5s
        ZW5ndGg7Zm9yKHQ9dm9pZCAwPT09dD9uLTE6MD50P01hdGguY2VpbCh0KTpN
        YXRoLmZsb29yKHQpLDA+dCYmKHQrPW4pLHI9dDtyPj0wO3ItLSlpZih0aGlz
        W3JdPT09ZSlyZXR1cm4gcjtyZXR1cm4tMX0sY29weTpmdW5jdGlvbihlKXty
        ZXR1cm4gZT90aGlzLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gRW1iZXIuY29w
        eShlLCEwKX0pOnRoaXMuc2xpY2UoKX19KSxuPVsibGVuZ3RoIl07RW1iZXIu
        RW51bWVyYWJsZVV0aWxzLmZvckVhY2goci5rZXlzKCksZnVuY3Rpb24oZSl7
        QXJyYXkucHJvdG90eXBlW2VdJiZuLnB1c2goZSl9KSxuLmxlbmd0aD4wJiYo
        cj1yLndpdGhvdXQuYXBwbHkocixuKSksRW1iZXIuTmF0aXZlQXJyYXk9cixF
        bWJlci5BPWZ1bmN0aW9uKGUpe3JldHVybiB2b2lkIDA9PT1lJiYoZT1bXSks
        RW1iZXIuQXJyYXkuZGV0ZWN0KGUpP2U6RW1iZXIuTmF0aXZlQXJyYXkuYXBw
        bHkoZSl9LEVtYmVyLk5hdGl2ZUFycmF5LmFjdGl2YXRlPWZ1bmN0aW9uKCl7
        ci5hcHBseShBcnJheS5wcm90b3R5cGUpLEVtYmVyLkE9ZnVuY3Rpb24oZSl7
        cmV0dXJuIGV8fFtdfX0sKEVtYmVyLkVYVEVORF9QUk9UT1RZUEVTPT09ITB8
        fEVtYmVyLkVYVEVORF9QUk9UT1RZUEVTLkFycmF5KSYmRW1iZXIuTmF0aXZl
        QXJyYXkuYWN0aXZhdGUoKX0oKSxmdW5jdGlvbigpe3ZhciBlPUVtYmVyLmdl
        dCx0PUVtYmVyLnNldCxyPUVtYmVyLmd1aWRGb3Isbj1FbWJlci5pc05vbmUs
        aT1FbWJlci5TdHJpbmcuZm10O0VtYmVyLlNldD1FbWJlci5Db3JlT2JqZWN0
        LmV4dGVuZChFbWJlci5NdXRhYmxlRW51bWVyYWJsZSxFbWJlci5Db3B5YWJs
        ZSxFbWJlci5GcmVlemFibGUse2xlbmd0aDowLGNsZWFyOmZ1bmN0aW9uKCl7
        aWYodGhpcy5pc0Zyb3plbil0aHJvdyBuZXcgRW1iZXIuRXJyb3IoRW1iZXIu
        RlJPWkVOX0VSUk9SKTt2YXIgbj1lKHRoaXMsImxlbmd0aCIpO2lmKDA9PT1u
        KXJldHVybiB0aGlzO3ZhciBpO3RoaXMuZW51bWVyYWJsZUNvbnRlbnRXaWxs
        Q2hhbmdlKG4sMCksRW1iZXIucHJvcGVydHlXaWxsQ2hhbmdlKHRoaXMsImZp
        cnN0T2JqZWN0IiksRW1iZXIucHJvcGVydHlXaWxsQ2hhbmdlKHRoaXMsImxh
        c3RPYmplY3QiKTtmb3IodmFyIG89MDtuPm87bysrKWk9cih0aGlzW29dKSxk
        ZWxldGUgdGhpc1tpXSxkZWxldGUgdGhpc1tvXTtyZXR1cm4gdCh0aGlzLCJs
        ZW5ndGgiLDApLEVtYmVyLnByb3BlcnR5RGlkQ2hhbmdlKHRoaXMsImZpcnN0
        T2JqZWN0IiksRW1iZXIucHJvcGVydHlEaWRDaGFuZ2UodGhpcywibGFzdE9i
        amVjdCIpLHRoaXMuZW51bWVyYWJsZUNvbnRlbnREaWRDaGFuZ2UobiwwKSx0
        aGlzfSxpc0VxdWFsOmZ1bmN0aW9uKHQpe2lmKCFFbWJlci5FbnVtZXJhYmxl
        LmRldGVjdCh0KSlyZXR1cm4hMTt2YXIgcj1lKHRoaXMsImxlbmd0aCIpO2lm
        KGUodCwibGVuZ3RoIikhPT1yKXJldHVybiExO2Zvcig7LS1yPj0wOylpZigh
        dC5jb250YWlucyh0aGlzW3JdKSlyZXR1cm4hMTtyZXR1cm4hMH0sYWRkOkVt
        YmVyLmFsaWFzTWV0aG9kKCJhZGRPYmplY3QiKSxyZW1vdmU6RW1iZXIuYWxp
        YXNNZXRob2QoInJlbW92ZU9iamVjdCIpLHBvcDpmdW5jdGlvbigpe2lmKGUo
        dGhpcywiaXNGcm96ZW4iKSl0aHJvdyBuZXcgRW1iZXIuRXJyb3IoRW1iZXIu
        RlJPWkVOX0VSUk9SKTt2YXIgdD10aGlzLmxlbmd0aD4wP3RoaXNbdGhpcy5s
        ZW5ndGgtMV06bnVsbDtyZXR1cm4gdGhpcy5yZW1vdmUodCksdH0scHVzaDpF
        bWJlci5hbGlhc01ldGhvZCgiYWRkT2JqZWN0Iiksc2hpZnQ6RW1iZXIuYWxp
        YXNNZXRob2QoInBvcCIpLHVuc2hpZnQ6RW1iZXIuYWxpYXNNZXRob2QoInB1
        c2giKSxhZGRFYWNoOkVtYmVyLmFsaWFzTWV0aG9kKCJhZGRPYmplY3RzIiks
        cmVtb3ZlRWFjaDpFbWJlci5hbGlhc01ldGhvZCgicmVtb3ZlT2JqZWN0cyIp
        LGluaXQ6ZnVuY3Rpb24oZSl7dGhpcy5fc3VwZXIoKSxlJiZ0aGlzLmFkZE9i
        amVjdHMoZSl9LG5leHRPYmplY3Q6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXNb
        ZV19LGZpcnN0T2JqZWN0OkVtYmVyLmNvbXB1dGVkKGZ1bmN0aW9uKCl7cmV0
        dXJuIHRoaXMubGVuZ3RoPjA/dGhpc1swXTp2b2lkIDB9KSxsYXN0T2JqZWN0
        OkVtYmVyLmNvbXB1dGVkKGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubGVuZ3Ro
        PjA/dGhpc1t0aGlzLmxlbmd0aC0xXTp2b2lkIDB9KSxhZGRPYmplY3Q6ZnVu
        Y3Rpb24oaSl7aWYoZSh0aGlzLCJpc0Zyb3plbiIpKXRocm93IG5ldyBFbWJl
        ci5FcnJvcihFbWJlci5GUk9aRU5fRVJST1IpO2lmKG4oaSkpcmV0dXJuIHRo
        aXM7dmFyIG8sYT1yKGkpLHM9dGhpc1thXSx1PWUodGhpcywibGVuZ3RoIik7
        cmV0dXJuIHM+PTAmJnU+cyYmdGhpc1tzXT09PWk/dGhpczoobz1baV0sdGhp
        cy5lbnVtZXJhYmxlQ29udGVudFdpbGxDaGFuZ2UobnVsbCxvKSxFbWJlci5w
        cm9wZXJ0eVdpbGxDaGFuZ2UodGhpcywibGFzdE9iamVjdCIpLHU9ZSh0aGlz
        LCJsZW5ndGgiKSx0aGlzW2FdPXUsdGhpc1t1XT1pLHQodGhpcywibGVuZ3Ro
        Iix1KzEpLEVtYmVyLnByb3BlcnR5RGlkQ2hhbmdlKHRoaXMsImxhc3RPYmpl
        Y3QiKSx0aGlzLmVudW1lcmFibGVDb250ZW50RGlkQ2hhbmdlKG51bGwsbyks
        dGhpcyl9LHJlbW92ZU9iamVjdDpmdW5jdGlvbihpKXtpZihlKHRoaXMsImlz
        RnJvemVuIikpdGhyb3cgbmV3IEVtYmVyLkVycm9yKEVtYmVyLkZST1pFTl9F
        UlJPUik7aWYobihpKSlyZXR1cm4gdGhpczt2YXIgbyxhLHM9cihpKSx1PXRo
        aXNbc10sbD1lKHRoaXMsImxlbmd0aCIpLGM9MD09PXUsaD11PT09bC0xO3Jl
        dHVybiB1Pj0wJiZsPnUmJnRoaXNbdV09PT1pJiYoYT1baV0sdGhpcy5lbnVt
        ZXJhYmxlQ29udGVudFdpbGxDaGFuZ2UoYSxudWxsKSxjJiZFbWJlci5wcm9w
        ZXJ0eVdpbGxDaGFuZ2UodGhpcywiZmlyc3RPYmplY3QiKSxoJiZFbWJlci5w
        cm9wZXJ0eVdpbGxDaGFuZ2UodGhpcywibGFzdE9iamVjdCIpLGwtMT51JiYo
        bz10aGlzW2wtMV0sdGhpc1t1XT1vLHRoaXNbcihvKV09dSksZGVsZXRlIHRo
        aXNbc10sZGVsZXRlIHRoaXNbbC0xXSx0KHRoaXMsImxlbmd0aCIsbC0xKSxj
        JiZFbWJlci5wcm9wZXJ0eURpZENoYW5nZSh0aGlzLCJmaXJzdE9iamVjdCIp
        LGgmJkVtYmVyLnByb3BlcnR5RGlkQ2hhbmdlKHRoaXMsImxhc3RPYmplY3Qi
        KSx0aGlzLmVudW1lcmFibGVDb250ZW50RGlkQ2hhbmdlKGEsbnVsbCkpLHRo
        aXN9LGNvbnRhaW5zOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzW3IoZSldPj0w
        fSxjb3B5OmZ1bmN0aW9uKCl7dmFyIG49dGhpcy5jb25zdHJ1Y3RvcixpPW5l
        dyBuLG89ZSh0aGlzLCJsZW5ndGgiKTtmb3IodChpLCJsZW5ndGgiLG8pOy0t
        bz49MDspaVtvXT10aGlzW29dLGlbcih0aGlzW29dKV09bztyZXR1cm4gaX0s
        dG9TdHJpbmc6ZnVuY3Rpb24oKXt2YXIgZSx0PXRoaXMubGVuZ3RoLHI9W107
        Zm9yKGU9MDt0PmU7ZSsrKXJbZV09dGhpc1tlXTtyZXR1cm4gaSgiRW1iZXIu
        U2V0PCVAPiIsW3Iuam9pbigiLCIpXSl9fSl9KCksZnVuY3Rpb24oKXt2YXIg
        ZT1FbWJlci5EZWZlcnJlZE1peGluLHQ9KEVtYmVyLmdldCxFbWJlci5PYmpl
        Y3QuZXh0ZW5kKGUpKTt0LnJlb3BlbkNsYXNzKHtwcm9taXNlOmZ1bmN0aW9u
        KGUscil7dmFyIG49dC5jcmVhdGUoKTtyZXR1cm4gZS5jYWxsKHIsbiksbn19
        KSxFbWJlci5EZWZlcnJlZD10fSgpLGZ1bmN0aW9uKCl7dmFyIGU9RW1iZXIu
        QXJyYXlQb2x5ZmlsbHMuZm9yRWFjaCx0PUVtYmVyLkVOVi5FTUJFUl9MT0FE
        X0hPT0tTfHx7fSxyPXt9O0VtYmVyLm9uTG9hZD1mdW5jdGlvbihlLG4pe3Zh
        ciBpO3RbZV09dFtlXXx8RW1iZXIuQSgpLHRbZV0ucHVzaE9iamVjdChuKSwo
        aT1yW2VdKSYmbihpKX0sRW1iZXIucnVuTG9hZEhvb2tzPWZ1bmN0aW9uKG4s
        aSl7cltuXT1pLHRbbl0mJmUuY2FsbCh0W25dLGZ1bmN0aW9uKGUpe2UoaSl9
        KX19KCksZnVuY3Rpb24oKXtFbWJlci5nZXQ7RW1iZXIuQ29udHJvbGxlck1p
        eGluPUVtYmVyLk1peGluLmNyZWF0ZShFbWJlci5BY3Rpb25IYW5kbGVyLHtp
        c0NvbnRyb2xsZXI6ITAsdGFyZ2V0Om51bGwsY29udGFpbmVyOm51bGwscGFy
        ZW50Q29udHJvbGxlcjpudWxsLHN0b3JlOm51bGwsbW9kZWw6RW1iZXIuY29t
        cHV0ZWQuYWxpYXMoImNvbnRlbnQiKSxkZXByZWNhdGVkU2VuZEhhbmRsZXM6
        ZnVuY3Rpb24oZSl7cmV0dXJuISF0aGlzW2VdfSxkZXByZWNhdGVkU2VuZDpm
        dW5jdGlvbihlKXt2YXIgdD1bXS5zbGljZS5jYWxsKGFyZ3VtZW50cywxKTt0
        aGlzW2VdLmFwcGx5KHRoaXMsdCl9fSksRW1iZXIuQ29udHJvbGxlcj1FbWJl
        ci5PYmplY3QuZXh0ZW5kKEVtYmVyLkNvbnRyb2xsZXJNaXhpbil9KCksZnVu
        Y3Rpb24oKXt2YXIgZT1FbWJlci5nZXQsdD0oRW1iZXIuc2V0LEVtYmVyLkVu
        dW1lcmFibGVVdGlscy5mb3JFYWNoKTtFbWJlci5Tb3J0YWJsZU1peGluPUVt
        YmVyLk1peGluLmNyZWF0ZShFbWJlci5NdXRhYmxlRW51bWVyYWJsZSx7c29y
        dFByb3BlcnRpZXM6bnVsbCxzb3J0QXNjZW5kaW5nOiEwLHNvcnRGdW5jdGlv
        bjpFbWJlci5jb21wYXJlLG9yZGVyQnk6ZnVuY3Rpb24ocixuKXt2YXIgaT0w
        LG89ZSh0aGlzLCJzb3J0UHJvcGVydGllcyIpLGE9ZSh0aGlzLCJzb3J0QXNj
        ZW5kaW5nIikscz1lKHRoaXMsInNvcnRGdW5jdGlvbiIpO3JldHVybiB0KG8s
        ZnVuY3Rpb24odCl7MD09PWkmJihpPXMoZShyLHQpLGUobix0KSksMD09PWl8
        fGF8fChpPS0xKmkpKX0pLGl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt2YXIgcj1l
        KHRoaXMsImNvbnRlbnQiKSxuPWUodGhpcywic29ydFByb3BlcnRpZXMiKTty
        ZXR1cm4gciYmbiYmdChyLGZ1bmN0aW9uKGUpe3QobixmdW5jdGlvbih0KXtF
        bWJlci5yZW1vdmVPYnNlcnZlcihlLHQsdGhpcywiY29udGVudEl0ZW1Tb3J0
        UHJvcGVydHlEaWRDaGFuZ2UiKX0sdGhpcyl9LHRoaXMpLHRoaXMuX3N1cGVy
        KCl9LGlzU29ydGVkOkVtYmVyLmNvbXB1dGVkLmJvb2woInNvcnRQcm9wZXJ0
        aWVzIiksYXJyYW5nZWRDb250ZW50OkVtYmVyLmNvbXB1dGVkKCJjb250ZW50
        Iiwic29ydFByb3BlcnRpZXMuQGVhY2giLGZ1bmN0aW9uKCl7dmFyIHI9ZSh0
        aGlzLCJjb250ZW50Iiksbj1lKHRoaXMsImlzU29ydGVkIiksaT1lKHRoaXMs
        InNvcnRQcm9wZXJ0aWVzIiksbz10aGlzO3JldHVybiByJiZuPyhyPXIuc2xp
        Y2UoKSxyLnNvcnQoZnVuY3Rpb24oZSx0KXtyZXR1cm4gby5vcmRlckJ5KGUs
        dCl9KSx0KHIsZnVuY3Rpb24oZSl7dChpLGZ1bmN0aW9uKHQpe0VtYmVyLmFk
        ZE9ic2VydmVyKGUsdCx0aGlzLCJjb250ZW50SXRlbVNvcnRQcm9wZXJ0eURp
        ZENoYW5nZSIpfSx0aGlzKX0sdGhpcyksRW1iZXIuQShyKSk6cn0pLF9jb250
        ZW50V2lsbENoYW5nZTpFbWJlci5iZWZvcmVPYnNlcnZlcigiY29udGVudCIs
        ZnVuY3Rpb24oKXt2YXIgcj1lKHRoaXMsImNvbnRlbnQiKSxuPWUodGhpcywi
        c29ydFByb3BlcnRpZXMiKTtyJiZuJiZ0KHIsZnVuY3Rpb24oZSl7dChuLGZ1
        bmN0aW9uKHQpe0VtYmVyLnJlbW92ZU9ic2VydmVyKGUsdCx0aGlzLCJjb250
        ZW50SXRlbVNvcnRQcm9wZXJ0eURpZENoYW5nZSIpfSx0aGlzKX0sdGhpcyks
        dGhpcy5fc3VwZXIoKX0pLHNvcnRBc2NlbmRpbmdXaWxsQ2hhbmdlOkVtYmVy
        LmJlZm9yZU9ic2VydmVyKCJzb3J0QXNjZW5kaW5nIixmdW5jdGlvbigpe3Ro
        aXMuX2xhc3RTb3J0QXNjZW5kaW5nPWUodGhpcywic29ydEFzY2VuZGluZyIp
        fSksc29ydEFzY2VuZGluZ0RpZENoYW5nZTpFbWJlci5vYnNlcnZlcigic29y
        dEFzY2VuZGluZyIsZnVuY3Rpb24oKXtpZihlKHRoaXMsInNvcnRBc2NlbmRp
        bmciKSE9PXRoaXMuX2xhc3RTb3J0QXNjZW5kaW5nKXt2YXIgdD1lKHRoaXMs
        ImFycmFuZ2VkQ29udGVudCIpO3QucmV2ZXJzZU9iamVjdHMoKX19KSxjb250
        ZW50QXJyYXlXaWxsQ2hhbmdlOmZ1bmN0aW9uKHIsbixpLG8pe3ZhciBhPWUo
        dGhpcywiaXNTb3J0ZWQiKTtpZihhKXt2YXIgcz1lKHRoaXMsImFycmFuZ2Vk
        Q29udGVudCIpLHU9ci5zbGljZShuLG4raSksbD1lKHRoaXMsInNvcnRQcm9w
        ZXJ0aWVzIik7dCh1LGZ1bmN0aW9uKGUpe3MucmVtb3ZlT2JqZWN0KGUpLHQo
        bCxmdW5jdGlvbih0KXtFbWJlci5yZW1vdmVPYnNlcnZlcihlLHQsdGhpcywi
        Y29udGVudEl0ZW1Tb3J0UHJvcGVydHlEaWRDaGFuZ2UiKX0sdGhpcyl9LHRo
        aXMpfXJldHVybiB0aGlzLl9zdXBlcihyLG4saSxvKX0sY29udGVudEFycmF5
        RGlkQ2hhbmdlOmZ1bmN0aW9uKHIsbixpLG8pe3ZhciBhPWUodGhpcywiaXNT
        b3J0ZWQiKSxzPWUodGhpcywic29ydFByb3BlcnRpZXMiKTtpZihhKXt2YXIg
        dT1yLnNsaWNlKG4sbitvKTt0KHUsZnVuY3Rpb24oZSl7dGhpcy5pbnNlcnRJ
        dGVtU29ydGVkKGUpLHQocyxmdW5jdGlvbih0KXtFbWJlci5hZGRPYnNlcnZl
        cihlLHQsdGhpcywiY29udGVudEl0ZW1Tb3J0UHJvcGVydHlEaWRDaGFuZ2Ui
        KX0sdGhpcyl9LHRoaXMpfXJldHVybiB0aGlzLl9zdXBlcihyLG4saSxvKX0s
        aW5zZXJ0SXRlbVNvcnRlZDpmdW5jdGlvbih0KXt2YXIgcj1lKHRoaXMsImFy
        cmFuZ2VkQ29udGVudCIpLG49ZShyLCJsZW5ndGgiKSxpPXRoaXMuX2JpbmFy
        eVNlYXJjaCh0LDAsbik7ci5pbnNlcnRBdChpLHQpfSxjb250ZW50SXRlbVNv
        cnRQcm9wZXJ0eURpZENoYW5nZTpmdW5jdGlvbih0KXt2YXIgcj1lKHRoaXMs
        ImFycmFuZ2VkQ29udGVudCIpLG49ci5pbmRleE9mKHQpLGk9ci5vYmplY3RB
        dChuLTEpLG89ci5vYmplY3RBdChuKzEpLGE9aSYmdGhpcy5vcmRlckJ5KHQs
        aSkscz1vJiZ0aGlzLm9yZGVyQnkodCxvKTsoMD5hfHxzPjApJiYoci5yZW1v
        dmVPYmplY3QodCksdGhpcy5pbnNlcnRJdGVtU29ydGVkKHQpKX0sX2JpbmFy
        eVNlYXJjaDpmdW5jdGlvbih0LHIsbil7dmFyIGksbyxhLHM7cmV0dXJuIHI9
        PT1uP3I6KHM9ZSh0aGlzLCJhcnJhbmdlZENvbnRlbnQiKSxpPXIrTWF0aC5m
        bG9vcigobi1yKS8yKSxvPXMub2JqZWN0QXQoaSksYT10aGlzLm9yZGVyQnko
        byx0KSwwPmE/dGhpcy5fYmluYXJ5U2VhcmNoKHQsaSsxLG4pOmE+MD90aGlz
        Ll9iaW5hcnlTZWFyY2godCxyLGkpOmkpfX0pfSgpLGZ1bmN0aW9uKCl7dmFy
        IGU9RW1iZXIuZ2V0LHQ9KEVtYmVyLnNldCxFbWJlci5FbnVtZXJhYmxlVXRp
        bHMuZm9yRWFjaCkscj1FbWJlci5FbnVtZXJhYmxlVXRpbHMucmVwbGFjZTtF
        bWJlci5BcnJheUNvbnRyb2xsZXI9RW1iZXIuQXJyYXlQcm94eS5leHRlbmQo
        RW1iZXIuQ29udHJvbGxlck1peGluLEVtYmVyLlNvcnRhYmxlTWl4aW4se2l0
        ZW1Db250cm9sbGVyOm51bGwsbG9va3VwSXRlbUNvbnRyb2xsZXI6ZnVuY3Rp
        b24oKXtyZXR1cm4gZSh0aGlzLCJpdGVtQ29udHJvbGxlciIpfSxvYmplY3RB
        dENvbnRlbnQ6ZnVuY3Rpb24odCl7dmFyIHI9ZSh0aGlzLCJsZW5ndGgiKSxu
        PWUodGhpcywiYXJyYW5nZWRDb250ZW50IiksaT1uJiZuLm9iamVjdEF0KHQp
        O2lmKHQ+PTAmJnI+dCl7dmFyIG89dGhpcy5sb29rdXBJdGVtQ29udHJvbGxl
        cihpKTtpZihvKXJldHVybiB0aGlzLmNvbnRyb2xsZXJBdCh0LGksbyl9cmV0
        dXJuIGl9LGFycmFuZ2VkQ29udGVudERpZENoYW5nZTpmdW5jdGlvbigpe3Ro
        aXMuX3N1cGVyKCksdGhpcy5fcmVzZXRTdWJDb250cm9sbGVycygpfSxhcnJh
        eUNvbnRlbnREaWRDaGFuZ2U6ZnVuY3Rpb24obixpLG8pe3ZhciBhPWUodGhp
        cywiX3N1YkNvbnRyb2xsZXJzIikscz1hLnNsaWNlKG4sbitpKTt0KHMsZnVu
        Y3Rpb24oZSl7ZSYmZS5kZXN0cm95KCl9KSxyKGEsbixpLG5ldyBBcnJheShv
        KSksdGhpcy5fc3VwZXIobixpLG8pfSxpbml0OmZ1bmN0aW9uKCl7dGhpcy5f
        c3VwZXIoKSx0aGlzLnNldCgiX3N1YkNvbnRyb2xsZXJzIixFbWJlci5BKCkp
        fSxjb250ZW50OkVtYmVyLmNvbXB1dGVkKGZ1bmN0aW9uKCl7cmV0dXJuIEVt
        YmVyLkEoKX0pLF9pc1ZpcnR1YWw6ITEsY29udHJvbGxlckF0OmZ1bmN0aW9u
        KHQscixuKXt2YXIgaSxvPWUodGhpcywiY29udGFpbmVyIiksYT1lKHRoaXMs
        Il9zdWJDb250cm9sbGVycyIpLHM9YVt0XTtpZihzKXJldHVybiBzO2lmKGk9
        ImNvbnRyb2xsZXI6IituLCFvLmhhcyhpKSl0aHJvdyBuZXcgRW1iZXIuRXJy
        b3IoJ0NvdWxkIG5vdCByZXNvbHZlIGl0ZW1Db250cm9sbGVyOiAiJytuKyci
        Jyk7dmFyIHU7cmV0dXJuIHRoaXMuX2lzVmlydHVhbCYmKHU9ZSh0aGlzLCJw
        YXJlbnRDb250cm9sbGVyIikpLHU9dXx8dGhpcyxzPW8ubG9va3VwRmFjdG9y
        eShpKS5jcmVhdGUoe3RhcmdldDp0aGlzLHBhcmVudENvbnRyb2xsZXI6dSxj
        b250ZW50OnJ9KSxhW3RdPXMsc30sX3N1YkNvbnRyb2xsZXJzOm51bGwsX3Jl
        c2V0U3ViQ29udHJvbGxlcnM6ZnVuY3Rpb24oKXt2YXIgcj1lKHRoaXMsIl9z
        dWJDb250cm9sbGVycyIpO3ImJnQocixmdW5jdGlvbihlKXtlJiZlLmRlc3Ry
        b3koKX0pLHRoaXMuc2V0KCJfc3ViQ29udHJvbGxlcnMiLEVtYmVyLkEoKSl9
        fSl9KCksZnVuY3Rpb24oKXtFbWJlci5PYmplY3RDb250cm9sbGVyPUVtYmVy
        Lk9iamVjdFByb3h5LmV4dGVuZChFbWJlci5Db250cm9sbGVyTWl4aW4pfSgp
        LGZ1bmN0aW9uKCl7dmFyIGU9dGhpcyYmdGhpcy5qUXVlcnl8fEVtYmVyLmlt
        cG9ydHMmJkVtYmVyLmltcG9ydHMualF1ZXJ5O2V8fCJmdW5jdGlvbiIhPXR5
        cGVvZiByfHwoZT1yKCJqcXVlcnkiKSksRW1iZXIuJD1lfSgpLGZ1bmN0aW9u
        KCl7aWYoRW1iZXIuJCl7dmFyIGU9RW1iZXIuU3RyaW5nLncoImRyYWdzdGFy
        dCBkcmFnIGRyYWdlbnRlciBkcmFnbGVhdmUgZHJhZ292ZXIgZHJvcCBkcmFn
        ZW5kIik7RW1iZXIuRW51bWVyYWJsZVV0aWxzLmZvckVhY2goZSxmdW5jdGlv
        bihlKXtFbWJlci4kLmV2ZW50LmZpeEhvb2tzW2VdPXtwcm9wczpbImRhdGFU
        cmFuc2ZlciJdfX0pfX0oKSxmdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSl7dmFy
        IHQ9ZS5zaGlmdEtleXx8ZS5tZXRhS2V5fHxlLmFsdEtleXx8ZS5jdHJsS2V5
        LHI9ZS53aGljaD4xO3JldHVybiF0JiYhcn12YXIgdD0idW5kZWZpbmVkIiE9
        dHlwZW9mIGRvY3VtZW50JiZmdW5jdGlvbigpe3ZhciBlPWRvY3VtZW50LmNy
        ZWF0ZUVsZW1lbnQoImRpdiIpO3JldHVybiBlLmlubmVySFRNTD0iPGRpdj48
        L2Rpdj4iLGUuZmlyc3RDaGlsZC5pbm5lckhUTUw9IjxzY3JpcHQ+PC9zY3Jp
        cHQ+IiwiIj09PWUuZmlyc3RDaGlsZC5pbm5lckhUTUx9KCkscj0idW5kZWZp
        bmVkIiE9dHlwZW9mIGRvY3VtZW50JiZmdW5jdGlvbigpe3ZhciBlPWRvY3Vt
        ZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpO3JldHVybiBlLmlubmVySFRNTD0i
        VGVzdDogPHNjcmlwdCB0eXBlPSd0ZXh0L3gtcGxhY2Vob2xkZXInPjwvc2Ny
        aXB0PlZhbHVlIiwiVGVzdDoiPT09ZS5jaGlsZE5vZGVzWzBdLm5vZGVWYWx1
        ZSYmIiBWYWx1ZSI9PT1lLmNoaWxkTm9kZXNbMl0ubm9kZVZhbHVlfSgpLG49
        ZnVuY3Rpb24oZSx0KXtpZihlLmdldEF0dHJpYnV0ZSgiaWQiKT09PXQpcmV0
        dXJuIGU7dmFyIHIsaSxvLGE9ZS5jaGlsZE5vZGVzLmxlbmd0aDtmb3Iocj0w
        O2E+cjtyKyspaWYoaT1lLmNoaWxkTm9kZXNbcl0sbz0xPT09aS5ub2RlVHlw
        ZSYmbihpLHQpKXJldHVybiBvfSxpPWZ1bmN0aW9uKGUsaSl7dCYmKGk9IiZz
        aHk7IitpKTt2YXIgbz1bXTtpZihyJiYoaT1pLnJlcGxhY2UoLyhccyspKDxz
        Y3JpcHQgaWQ9JyhbXiddKyknKS9nLGZ1bmN0aW9uKGUsdCxyLG4pe3JldHVy
        biBvLnB1c2goW24sdF0pLHJ9KSksZS5pbm5lckhUTUw9aSxvLmxlbmd0aD4w
        KXt2YXIgYSxzPW8ubGVuZ3RoO2ZvcihhPTA7cz5hO2ErKyl7dmFyIHU9bihl
        LG9bYV1bMF0pLGw9ZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUob1thXVsxXSk7
        dS5wYXJlbnROb2RlLmluc2VydEJlZm9yZShsLHUpfX1pZih0KXtmb3IodmFy
        IGM9ZS5maXJzdENoaWxkOzE9PT1jLm5vZGVUeXBlJiYhYy5ub2RlTmFtZTsp
        Yz1jLmZpcnN0Q2hpbGQ7Mz09PWMubm9kZVR5cGUmJiLCrSI9PT1jLm5vZGVW
        YWx1ZS5jaGFyQXQoMCkmJihjLm5vZGVWYWx1ZT1jLm5vZGVWYWx1ZS5zbGlj
        ZSgxKSl9fSxvPXt9LGE9ZnVuY3Rpb24oZSl7aWYodm9pZCAwIT09b1tlXSly
        ZXR1cm4gb1tlXTt2YXIgdD0hMDtpZigic2VsZWN0Ij09PWUudG9Mb3dlckNh
        c2UoKSl7dmFyIHI9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic2VsZWN0Iik7
        aShyLCc8b3B0aW9uIHZhbHVlPSJ0ZXN0Ij5UZXN0PC9vcHRpb24+JyksdD0x
        PT09ci5vcHRpb25zLmxlbmd0aH1yZXR1cm4gb1tlXT10LHR9LHM9ZnVuY3Rp
        b24oZSx0KXt2YXIgcj1lLnRhZ05hbWU7aWYoYShyKSlpKGUsdCk7ZWxzZXt2
        YXIgbj1lLm91dGVySFRNTHx8KG5ldyBYTUxTZXJpYWxpemVyKS5zZXJpYWxp
        emVUb1N0cmluZyhlKSxvPW4ubWF0Y2gobmV3IFJlZ0V4cCgiPCIrcisiKFte
        Pl0qKT4iLCJpIikpWzBdLHM9IjwvIityKyI+Iix1PWRvY3VtZW50LmNyZWF0
        ZUVsZW1lbnQoImRpdiIpO2ZvcihpKHUsbyt0K3MpLGU9dS5maXJzdENoaWxk
        O2UudGFnTmFtZSE9PXI7KWU9ZS5uZXh0U2libGluZ31yZXR1cm4gZX07RW1i
        ZXIuVmlld1V0aWxzPXtzZXRJbm5lckhUTUw6cyxpc1NpbXBsZUNsaWNrOmV9
        fSgpLGZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXtyZXR1cm4gZT9uLnRlc3Qo
        ZSk/ZS5yZXBsYWNlKGksIiIpOmU6ZX1mdW5jdGlvbiB0KGUpe3ZhciB0PXsi
        PCI6IiZsdDsiLCI+IjoiJmd0OyIsJyInOiImcXVvdDsiLCInIjoiJiN4Mjc7
        IiwiYCI6IiYjeDYwOyJ9LHI9ZnVuY3Rpb24oZSl7cmV0dXJuIHRbZV18fCIm
        YW1wOyJ9LG49ZS50b1N0cmluZygpO3JldHVybiBhLnRlc3Qobik/bi5yZXBs
        YWNlKG8scik6bn12YXIgcj0oRW1iZXIuZ2V0LEVtYmVyLnNldCxmdW5jdGlv
        bigpe3RoaXMuc2Vlbj17fSx0aGlzLmxpc3Q9W119KTtyLnByb3RvdHlwZT17
        YWRkOmZ1bmN0aW9uKGUpe2UgaW4gdGhpcy5zZWVufHwodGhpcy5zZWVuW2Vd
        PSEwLHRoaXMubGlzdC5wdXNoKGUpKX0sdG9ET006ZnVuY3Rpb24oKXtyZXR1
        cm4gdGhpcy5saXN0LmpvaW4oIiAiKX19O3ZhciBuPS9bXmEtekEtWjAtOVwt
        XS8saT0vW15hLXpBLVowLTlcLV0vZyxvPS8mKD8hXHcrOyl8Wzw+IidgXS9n
        LGE9L1smPD4iJ2BdLyxzPWZ1bmN0aW9uKCl7dmFyIGU9ZG9jdW1lbnQuY3Jl
        YXRlRWxlbWVudCgiZGl2IiksdD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJp
        bnB1dCIpO3JldHVybiB0LnNldEF0dHJpYnV0ZSgibmFtZSIsImZvbyIpLGUu
        YXBwZW5kQ2hpbGQodCksISFlLmlubmVySFRNTC5tYXRjaCgiZm9vIil9KCk7
        RW1iZXIuUmVuZGVyQnVmZmVyPWZ1bmN0aW9uKGUpe3JldHVybiBuZXcgRW1i
        ZXIuX1JlbmRlckJ1ZmZlcihlKX0sRW1iZXIuX1JlbmRlckJ1ZmZlcj1mdW5j
        dGlvbihlKXt0aGlzLnRhZ05hbWVzPVtlfHxudWxsXSx0aGlzLmJ1ZmZlcj0i
        In0sRW1iZXIuX1JlbmRlckJ1ZmZlci5wcm90b3R5cGU9e19lbGVtZW50Om51
        bGwsX2hhc0VsZW1lbnQ6ITAsZWxlbWVudENsYXNzZXM6bnVsbCxjbGFzc2Vz
        Om51bGwsZWxlbWVudElkOm51bGwsZWxlbWVudEF0dHJpYnV0ZXM6bnVsbCxl
        bGVtZW50UHJvcGVydGllczpudWxsLGVsZW1lbnRUYWc6bnVsbCxlbGVtZW50
        U3R5bGU6bnVsbCxwYXJlbnRCdWZmZXI6bnVsbCxwdXNoOmZ1bmN0aW9uKGUp
        e3JldHVybiB0aGlzLmJ1ZmZlcis9ZSx0aGlzfSxhZGRDbGFzczpmdW5jdGlv
        bihlKXtyZXR1cm4gdGhpcy5lbGVtZW50Q2xhc3Nlcz10aGlzLmVsZW1lbnRD
        bGFzc2VzfHxuZXcgcix0aGlzLmVsZW1lbnRDbGFzc2VzLmFkZChlKSx0aGlz
        LmNsYXNzZXM9dGhpcy5lbGVtZW50Q2xhc3Nlcy5saXN0LHRoaXN9LHNldENs
        YXNzZXM6ZnVuY3Rpb24oZSl7dGhpcy5lbGVtZW50Q2xhc3Nlcz1udWxsO3Zh
        ciB0LHI9ZS5sZW5ndGg7Zm9yKHQ9MDtyPnQ7dCsrKXRoaXMuYWRkQ2xhc3Mo
        ZVt0XSl9LGlkOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmVsZW1lbnRJZD1l
        LHRoaXN9LGF0dHI6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLmVsZW1lbnRB
        dHRyaWJ1dGVzPXRoaXMuZWxlbWVudEF0dHJpYnV0ZXN8fHt9O3JldHVybiAx
        PT09YXJndW1lbnRzLmxlbmd0aD9yW2VdOihyW2VdPXQsdGhpcyl9LHJlbW92
        ZUF0dHI6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5lbGVtZW50QXR0cmlidXRl
        cztyZXR1cm4gdCYmZGVsZXRlIHRbZV0sdGhpc30scHJvcDpmdW5jdGlvbihl
        LHQpe3ZhciByPXRoaXMuZWxlbWVudFByb3BlcnRpZXM9dGhpcy5lbGVtZW50
        UHJvcGVydGllc3x8e307cmV0dXJuIDE9PT1hcmd1bWVudHMubGVuZ3RoP3Jb
        ZV06KHJbZV09dCx0aGlzKX0scmVtb3ZlUHJvcDpmdW5jdGlvbihlKXt2YXIg
        dD10aGlzLmVsZW1lbnRQcm9wZXJ0aWVzO3JldHVybiB0JiZkZWxldGUgdFtl
        XSx0aGlzfSxzdHlsZTpmdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLmVsZW1l
        bnRTdHlsZT10aGlzLmVsZW1lbnRTdHlsZXx8e30sdGhpcy5lbGVtZW50U3R5
        bGVbZV09dCx0aGlzCn0sYmVnaW46ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMu
        dGFnTmFtZXMucHVzaChlfHxudWxsKSx0aGlzfSxwdXNoT3BlbmluZ1RhZzpm
        dW5jdGlvbigpe3ZhciByPXRoaXMuY3VycmVudFRhZ05hbWUoKTtpZihyKXtp
        Zih0aGlzLl9oYXNFbGVtZW50JiYhdGhpcy5fZWxlbWVudCYmMD09PXRoaXMu
        YnVmZmVyLmxlbmd0aClyZXR1cm4gdGhpcy5fZWxlbWVudD10aGlzLmdlbmVy
        YXRlRWxlbWVudCgpLHZvaWQgMDt2YXIgbixpLG89dGhpcy5idWZmZXIsYT10
        aGlzLmVsZW1lbnRJZCxzPXRoaXMuY2xhc3Nlcyx1PXRoaXMuZWxlbWVudEF0
        dHJpYnV0ZXMsbD10aGlzLmVsZW1lbnRQcm9wZXJ0aWVzLGM9dGhpcy5lbGVt
        ZW50U3R5bGU7aWYobys9IjwiK2UociksYSYmKG8rPScgaWQ9IicrdChhKSsn
        IicsdGhpcy5lbGVtZW50SWQ9bnVsbCkscyYmKG8rPScgY2xhc3M9IicrdChz
        LmpvaW4oIiAiKSkrJyInLHRoaXMuY2xhc3Nlcz1udWxsLHRoaXMuZWxlbWVu
        dENsYXNzZXM9bnVsbCksYyl7bys9JyBzdHlsZT0iJztmb3IoaSBpbiBjKWMu
        aGFzT3duUHJvcGVydHkoaSkmJihvKz1pKyI6Iit0KGNbaV0pKyI7Iik7bys9
        JyInLHRoaXMuZWxlbWVudFN0eWxlPW51bGx9aWYodSl7Zm9yKG4gaW4gdSl1
        Lmhhc093blByb3BlcnR5KG4pJiYobys9IiAiK24rJz0iJyt0KHVbbl0pKyci
        Jyk7dGhpcy5lbGVtZW50QXR0cmlidXRlcz1udWxsfWlmKGwpe2ZvcihpIGlu
        IGwpaWYobC5oYXNPd25Qcm9wZXJ0eShpKSl7dmFyIGg9bFtpXTsoaHx8Im51
        bWJlciI9PXR5cGVvZiBoKSYmKG8rPWg9PT0hMD8iICIraSsnPSInK2krJyIn
        OiIgIitpKyc9IicrdChsW2ldKSsnIicpfXRoaXMuZWxlbWVudFByb3BlcnRp
        ZXM9bnVsbH1vKz0iPiIsdGhpcy5idWZmZXI9b319LHB1c2hDbG9zaW5nVGFn
        OmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy50YWdOYW1lcy5wb3AoKTt0JiYodGhp
        cy5idWZmZXIrPSI8LyIrZSh0KSsiPiIpfSxjdXJyZW50VGFnTmFtZTpmdW5j
        dGlvbigpe3JldHVybiB0aGlzLnRhZ05hbWVzW3RoaXMudGFnTmFtZXMubGVu
        Z3RoLTFdfSxnZW5lcmF0ZUVsZW1lbnQ6ZnVuY3Rpb24oKXt2YXIgcixuLGks
        bz10aGlzLnRhZ05hbWVzLnBvcCgpLGE9dGhpcy5lbGVtZW50SWQsdT10aGlz
        LmNsYXNzZXMsbD10aGlzLmVsZW1lbnRBdHRyaWJ1dGVzLGM9dGhpcy5lbGVt
        ZW50UHJvcGVydGllcyxoPXRoaXMuZWxlbWVudFN0eWxlLG09IiI7aT1sJiZs
        Lm5hbWUmJiFzPyI8IitlKG8pKycgbmFtZT0iJyt0KGwubmFtZSkrJyI+Jzpv
        O3ZhciBmPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoaSkscD1FbWJlci4kKGYp
        O2lmKGEmJihwLmF0dHIoImlkIixhKSx0aGlzLmVsZW1lbnRJZD1udWxsKSx1
        JiYocC5hdHRyKCJjbGFzcyIsdS5qb2luKCIgIikpLHRoaXMuY2xhc3Nlcz1u
        dWxsLHRoaXMuZWxlbWVudENsYXNzZXM9bnVsbCksaCl7Zm9yKG4gaW4gaClo
        Lmhhc093blByb3BlcnR5KG4pJiYobSs9bisiOiIraFtuXSsiOyIpO3AuYXR0
        cigic3R5bGUiLG0pLHRoaXMuZWxlbWVudFN0eWxlPW51bGx9aWYobCl7Zm9y
        KHIgaW4gbClsLmhhc093blByb3BlcnR5KHIpJiZwLmF0dHIocixsW3JdKTt0
        aGlzLmVsZW1lbnRBdHRyaWJ1dGVzPW51bGx9aWYoYyl7Zm9yKG4gaW4gYylj
        Lmhhc093blByb3BlcnR5KG4pJiZwLnByb3AobixjW25dKTt0aGlzLmVsZW1l
        bnRQcm9wZXJ0aWVzPW51bGx9cmV0dXJuIGZ9LGVsZW1lbnQ6ZnVuY3Rpb24o
        KXt2YXIgZT10aGlzLmlubmVyU3RyaW5nKCk7cmV0dXJuIGUmJih0aGlzLl9l
        bGVtZW50PUVtYmVyLlZpZXdVdGlscy5zZXRJbm5lckhUTUwodGhpcy5fZWxl
        bWVudCxlKSksdGhpcy5fZWxlbWVudH0sc3RyaW5nOmZ1bmN0aW9uKCl7aWYo
        dGhpcy5faGFzRWxlbWVudCYmdGhpcy5fZWxlbWVudCl7dmFyIGU9dGhpcy5l
        bGVtZW50KCksdD1lLm91dGVySFRNTDtyZXR1cm4idW5kZWZpbmVkIj09dHlw
        ZW9mIHQ/RW1iZXIuJCgiPGRpdi8+IikuYXBwZW5kKGUpLmh0bWwoKTp0fXJl
        dHVybiB0aGlzLmlubmVyU3RyaW5nKCl9LGlubmVyU3RyaW5nOmZ1bmN0aW9u
        KCl7cmV0dXJuIHRoaXMuYnVmZmVyfX19KCksZnVuY3Rpb24oKXt7dmFyIGU9
        RW1iZXIuZ2V0LHQ9RW1iZXIuc2V0O0VtYmVyLlN0cmluZy5mbXR9RW1iZXIu
        RXZlbnREaXNwYXRjaGVyPUVtYmVyLk9iamVjdC5leHRlbmQoe2V2ZW50czp7
        dG91Y2hzdGFydDoidG91Y2hTdGFydCIsdG91Y2htb3ZlOiJ0b3VjaE1vdmUi
        LHRvdWNoZW5kOiJ0b3VjaEVuZCIsdG91Y2hjYW5jZWw6InRvdWNoQ2FuY2Vs
        IixrZXlkb3duOiJrZXlEb3duIixrZXl1cDoia2V5VXAiLGtleXByZXNzOiJr
        ZXlQcmVzcyIsbW91c2Vkb3duOiJtb3VzZURvd24iLG1vdXNldXA6Im1vdXNl
        VXAiLGNvbnRleHRtZW51OiJjb250ZXh0TWVudSIsY2xpY2s6ImNsaWNrIixk
        YmxjbGljazoiZG91YmxlQ2xpY2siLG1vdXNlbW92ZToibW91c2VNb3ZlIixm
        b2N1c2luOiJmb2N1c0luIixmb2N1c291dDoiZm9jdXNPdXQiLG1vdXNlZW50
        ZXI6Im1vdXNlRW50ZXIiLG1vdXNlbGVhdmU6Im1vdXNlTGVhdmUiLHN1Ym1p
        dDoic3VibWl0IixpbnB1dDoiaW5wdXQiLGNoYW5nZToiY2hhbmdlIixkcmFn
        c3RhcnQ6ImRyYWdTdGFydCIsZHJhZzoiZHJhZyIsZHJhZ2VudGVyOiJkcmFn
        RW50ZXIiLGRyYWdsZWF2ZToiZHJhZ0xlYXZlIixkcmFnb3ZlcjoiZHJhZ092
        ZXIiLGRyb3A6ImRyb3AiLGRyYWdlbmQ6ImRyYWdFbmQifSxyb290RWxlbWVu
        dDoiYm9keSIsc2V0dXA6ZnVuY3Rpb24ocixuKXt2YXIgaSxvPWUodGhpcywi
        ZXZlbnRzIik7RW1iZXIuJC5leHRlbmQobyxyfHx7fSksRW1iZXIuaXNOb25l
        KG4pfHx0KHRoaXMsInJvb3RFbGVtZW50IixuKSxuPUVtYmVyLiQoZSh0aGlz
        LCJyb290RWxlbWVudCIpKSxuLmFkZENsYXNzKCJlbWJlci1hcHBsaWNhdGlv
        biIpO2ZvcihpIGluIG8pby5oYXNPd25Qcm9wZXJ0eShpKSYmdGhpcy5zZXR1
        cEhhbmRsZXIobixpLG9baV0pfSxzZXR1cEhhbmRsZXI6ZnVuY3Rpb24oZSx0
        LHIpe3ZhciBuPXRoaXM7ZS5vbih0KyIuZW1iZXIiLCIuZW1iZXItdmlldyIs
        ZnVuY3Rpb24oZSx0KXtyZXR1cm4gRW1iZXIuaGFuZGxlRXJyb3JzKGZ1bmN0
        aW9uKCl7dmFyIGk9RW1iZXIuVmlldy52aWV3c1t0aGlzLmlkXSxvPSEwLGE9
        bnVsbDtyZXR1cm4gYT1uLl9maW5kTmVhcmVzdEV2ZW50TWFuYWdlcihpLHIp
        LGEmJmEhPT10P289bi5fZGlzcGF0Y2hFdmVudChhLGUscixpKTppP289bi5f
        YnViYmxlRXZlbnQoaSxlLHIpOmUuc3RvcFByb3BhZ2F0aW9uKCksb30sdGhp
        cyl9KSxlLm9uKHQrIi5lbWJlciIsIltkYXRhLWVtYmVyLWFjdGlvbl0iLGZ1
        bmN0aW9uKGUpe3JldHVybiBFbWJlci5oYW5kbGVFcnJvcnMoZnVuY3Rpb24o
        KXt2YXIgdD1FbWJlci4kKGUuY3VycmVudFRhcmdldCkuYXR0cigiZGF0YS1l
        bWJlci1hY3Rpb24iKSxuPUVtYmVyLkhhbmRsZWJhcnMuQWN0aW9uSGVscGVy
        LnJlZ2lzdGVyZWRBY3Rpb25zW3RdO3JldHVybiBuJiZuLmV2ZW50TmFtZT09
        PXI/bi5oYW5kbGVyKGUpOnZvaWQgMH0sdGhpcyl9KX0sX2ZpbmROZWFyZXN0
        RXZlbnRNYW5hZ2VyOmZ1bmN0aW9uKHQscil7Zm9yKHZhciBuPW51bGw7dCYm
        KG49ZSh0LCJldmVudE1hbmFnZXIiKSwhbnx8IW5bcl0pOyl0PWUodCwicGFy
        ZW50VmlldyIpO3JldHVybiBufSxfZGlzcGF0Y2hFdmVudDpmdW5jdGlvbihl
        LHQscixuKXt2YXIgaT0hMCxvPWVbcl07cmV0dXJuImZ1bmN0aW9uIj09PUVt
        YmVyLnR5cGVPZihvKT8oaT1FbWJlci5ydW4oZnVuY3Rpb24oKXtyZXR1cm4g
        by5jYWxsKGUsdCxuKX0pLHQuc3RvcFByb3BhZ2F0aW9uKCkpOmk9dGhpcy5f
        YnViYmxlRXZlbnQobix0LHIpLGl9LF9idWJibGVFdmVudDpmdW5jdGlvbihl
        LHQscil7cmV0dXJuIEVtYmVyLnJ1bihmdW5jdGlvbigpe3JldHVybiBlLmhh
        bmRsZUV2ZW50KHIsdCl9KX0sZGVzdHJveTpmdW5jdGlvbigpe3ZhciB0PWUo
        dGhpcywicm9vdEVsZW1lbnQiKTtyZXR1cm4gRW1iZXIuJCh0KS5vZmYoIi5l
        bWJlciIsIioqIikucmVtb3ZlQ2xhc3MoImVtYmVyLWFwcGxpY2F0aW9uIiks
        dGhpcy5fc3VwZXIoKX19KX0oKSxmdW5jdGlvbigpe3ZhciBlPUVtYmVyLnJ1
        bi5xdWV1ZXMsdD1FbWJlci5BcnJheVBvbHlmaWxscy5pbmRleE9mO2Uuc3Bs
        aWNlKHQuY2FsbChlLCJhY3Rpb25zIikrMSwwLCJyZW5kZXIiLCJhZnRlclJl
        bmRlciIpfSgpLGZ1bmN0aW9uKCl7dmFyIGU9RW1iZXIuZ2V0LHQ9RW1iZXIu
        c2V0O0VtYmVyLkNvbnRyb2xsZXJNaXhpbi5yZW9wZW4oe3RhcmdldDpudWxs
        LG5hbWVzcGFjZTpudWxsLHZpZXc6bnVsbCxjb250YWluZXI6bnVsbCxfY2hp
        bGRDb250YWluZXJzOm51bGwsaW5pdDpmdW5jdGlvbigpe3RoaXMuX3N1cGVy
        KCksdCh0aGlzLCJfY2hpbGRDb250YWluZXJzIix7fSl9LF9tb2RlbERpZENo
        YW5nZTpFbWJlci5vYnNlcnZlcigibW9kZWwiLGZ1bmN0aW9uKCl7dmFyIHI9
        ZSh0aGlzLCJfY2hpbGRDb250YWluZXJzIik7Zm9yKHZhciBuIGluIHIpci5o
        YXNPd25Qcm9wZXJ0eShuKSYmcltuXS5kZXN0cm95KCk7dCh0aGlzLCJfY2hp
        bGRDb250YWluZXJzIix7fSl9KX0pfSgpLGZ1bmN0aW9uKCl7ZnVuY3Rpb24g
        ZSgpe0VtYmVyLnJ1bi5vbmNlKEVtYmVyLlZpZXcsIm5vdGlmeU11dGF0aW9u
        TGlzdGVuZXJzIil9dmFyIHQ9e30scj1FbWJlci5nZXQsbj1FbWJlci5zZXQs
        aT1FbWJlci5ndWlkRm9yLG89RW1iZXIuRW51bWVyYWJsZVV0aWxzLmZvckVh
        Y2gsYT1FbWJlci5FbnVtZXJhYmxlVXRpbHMuYWRkT2JqZWN0LHM9RW1iZXIu
        bWV0YSx1PUVtYmVyLmNvbXB1dGVkKGZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5f
        Y2hpbGRWaWV3cyx0PUVtYmVyLkEoKSxuPXRoaXM7cmV0dXJuIG8oZSxmdW5j
        dGlvbihlKXt2YXIgbjtlLmlzVmlydHVhbD8obj1yKGUsImNoaWxkVmlld3Mi
        KSkmJnQucHVzaE9iamVjdHMobik6dC5wdXNoKGUpfSksdC5yZXBsYWNlPWZ1
        bmN0aW9uKGUsdCxyKXtpZihuIGluc3RhbmNlb2YgRW1iZXIuQ29udGFpbmVy
        VmlldylyZXR1cm4gbi5yZXBsYWNlKGUsdCxyKTt0aHJvdyBuZXcgRW1iZXIu
        RXJyb3IoImNoaWxkVmlld3MgaXMgaW1tdXRhYmxlIil9LHR9KTtFbWJlci5U
        RU1QTEFURVM9e30sRW1iZXIuQ29yZVZpZXc9RW1iZXIuT2JqZWN0LmV4dGVu
        ZChFbWJlci5FdmVudGVkLEVtYmVyLkFjdGlvbkhhbmRsZXIse2lzVmlldzoh
        MCxzdGF0ZXM6dCxpbml0OmZ1bmN0aW9uKCl7dGhpcy5fc3VwZXIoKSx0aGlz
        LnRyYW5zaXRpb25UbygicHJlUmVuZGVyIil9LHBhcmVudFZpZXc6RW1iZXIu
        Y29tcHV0ZWQoZnVuY3Rpb24oKXt2YXIgZT10aGlzLl9wYXJlbnRWaWV3O3Jl
        dHVybiBlJiZlLmlzVmlydHVhbD9yKGUsInBhcmVudFZpZXciKTplfSkucHJv
        cGVydHkoIl9wYXJlbnRWaWV3Iiksc3RhdGU6bnVsbCxfcGFyZW50Vmlldzpu
        dWxsLGNvbmNyZXRlVmlldzpFbWJlci5jb21wdXRlZChmdW5jdGlvbigpe3Jl
        dHVybiB0aGlzLmlzVmlydHVhbD9yKHRoaXMsInBhcmVudFZpZXciKTp0aGlz
        fSkucHJvcGVydHkoInBhcmVudFZpZXciKSxpbnN0cnVtZW50TmFtZToiY29y
        ZV92aWV3IixpbnN0cnVtZW50RGV0YWlsczpmdW5jdGlvbihlKXtlLm9iamVj
        dD10aGlzLnRvU3RyaW5nKCl9LHJlbmRlclRvQnVmZmVyOmZ1bmN0aW9uKGUs
        dCl7dmFyIHI9InJlbmRlci4iK3RoaXMuaW5zdHJ1bWVudE5hbWUsbj17fTty
        ZXR1cm4gdGhpcy5pbnN0cnVtZW50RGV0YWlscyhuKSxFbWJlci5pbnN0cnVt
        ZW50KHIsbixmdW5jdGlvbigpe3JldHVybiB0aGlzLl9yZW5kZXJUb0J1ZmZl
        cihlLHQpfSx0aGlzKX0sX3JlbmRlclRvQnVmZmVyOmZ1bmN0aW9uKGUpe3Zh
        ciB0PXRoaXMudGFnTmFtZTsobnVsbD09PXR8fHZvaWQgMD09PXQpJiYodD0i
        ZGl2Iik7dmFyIHI9dGhpcy5idWZmZXI9ZSYmZS5iZWdpbih0KXx8RW1iZXIu
        UmVuZGVyQnVmZmVyKHQpO3JldHVybiB0aGlzLnRyYW5zaXRpb25UbygiaW5C
        dWZmZXIiLCExKSx0aGlzLmJlZm9yZVJlbmRlcihyKSx0aGlzLnJlbmRlcihy
        KSx0aGlzLmFmdGVyUmVuZGVyKHIpLHJ9LHRyaWdnZXI6ZnVuY3Rpb24oZSl7
        dGhpcy5fc3VwZXIuYXBwbHkodGhpcyxhcmd1bWVudHMpO3ZhciB0PXRoaXNb
        ZV07aWYodCl7dmFyIHIsbixpPVtdO2ZvcihyPTEsbj1hcmd1bWVudHMubGVu
        Z3RoO24+cjtyKyspaS5wdXNoKGFyZ3VtZW50c1tyXSk7cmV0dXJuIHQuYXBw
        bHkodGhpcyxpKX19LGRlcHJlY2F0ZWRTZW5kSGFuZGxlczpmdW5jdGlvbihl
        KXtyZXR1cm4hIXRoaXNbZV19LGRlcHJlY2F0ZWRTZW5kOmZ1bmN0aW9uKGUp
        e3ZhciB0PVtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpO3RoaXNbZV0uYXBw
        bHkodGhpcyx0KX0saGFzOmZ1bmN0aW9uKGUpe3JldHVybiJmdW5jdGlvbiI9
        PT1FbWJlci50eXBlT2YodGhpc1tlXSl8fHRoaXMuX3N1cGVyKGUpfSxkZXN0
        cm95OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5fcGFyZW50VmlldztpZih0aGlz
        Ll9zdXBlcigpKXJldHVybiB0aGlzLnJlbW92ZWRGcm9tRE9NfHx0aGlzLmRl
        c3Ryb3lFbGVtZW50KCksZSYmZS5yZW1vdmVDaGlsZCh0aGlzKSx0aGlzLnRy
        YW5zaXRpb25UbygiZGVzdHJveWluZyIsITEpLHRoaXN9LGNsZWFyUmVuZGVy
        ZWRDaGlsZHJlbjpFbWJlci5LLHRyaWdnZXJSZWN1cnNpdmVseTpFbWJlci5L
        LGludm9rZVJlY3Vyc2l2ZWx5OkVtYmVyLkssdHJhbnNpdGlvblRvOkVtYmVy
        LkssZGVzdHJveUVsZW1lbnQ6RW1iZXIuS30pO3ZhciBsPUVtYmVyLl9WaWV3
        Q29sbGVjdGlvbj1mdW5jdGlvbihlKXt2YXIgdD10aGlzLnZpZXdzPWV8fFtd
        O3RoaXMubGVuZ3RoPXQubGVuZ3RofTtsLnByb3RvdHlwZT17bGVuZ3RoOjAs
        dHJpZ2dlcjpmdW5jdGlvbihlKXtmb3IodmFyIHQscj10aGlzLnZpZXdzLG49
        MCxpPXIubGVuZ3RoO2k+bjtuKyspdD1yW25dLHQudHJpZ2dlciYmdC50cmln
        Z2VyKGUpfSx0cmlnZ2VyUmVjdXJzaXZlbHk6ZnVuY3Rpb24oZSl7Zm9yKHZh
        ciB0PXRoaXMudmlld3Mscj0wLG49dC5sZW5ndGg7bj5yO3IrKyl0W3JdLnRy
        aWdnZXJSZWN1cnNpdmVseShlKX0saW52b2tlUmVjdXJzaXZlbHk6ZnVuY3Rp
        b24oZSl7Zm9yKHZhciB0LHI9dGhpcy52aWV3cyxuPTAsaT1yLmxlbmd0aDtp
        Pm47bisrKXQ9cltuXSxlKHQpfSx0cmFuc2l0aW9uVG86ZnVuY3Rpb24oZSx0
        KXtmb3IodmFyIHI9dGhpcy52aWV3cyxuPTAsaT1yLmxlbmd0aDtpPm47bisr
        KXJbbl0udHJhbnNpdGlvblRvKGUsdCl9LHB1c2g6ZnVuY3Rpb24oKXt0aGlz
        Lmxlbmd0aCs9YXJndW1lbnRzLmxlbmd0aDt2YXIgZT10aGlzLnZpZXdzO3Jl
        dHVybiBlLnB1c2guYXBwbHkoZSxhcmd1bWVudHMpfSxvYmplY3RBdDpmdW5j
        dGlvbihlKXtyZXR1cm4gdGhpcy52aWV3c1tlXX0sZm9yRWFjaDpmdW5jdGlv
        bihlKXt2YXIgdD10aGlzLnZpZXdzO3JldHVybiBvKHQsZSl9LGNsZWFyOmZ1
        bmN0aW9uKCl7dGhpcy5sZW5ndGg9MCx0aGlzLnZpZXdzLmxlbmd0aD0wfX07
        dmFyIGM9W107RW1iZXIuVmlldz1FbWJlci5Db3JlVmlldy5leHRlbmQoe2Nv
        bmNhdGVuYXRlZFByb3BlcnRpZXM6WyJjbGFzc05hbWVzIiwiY2xhc3NOYW1l
        QmluZGluZ3MiLCJhdHRyaWJ1dGVCaW5kaW5ncyJdLGlzVmlldzohMCx0ZW1w
        bGF0ZU5hbWU6bnVsbCxsYXlvdXROYW1lOm51bGwsdGVtcGxhdGU6RW1iZXIu
        Y29tcHV0ZWQoZnVuY3Rpb24oZSx0KXtpZih2b2lkIDAhPT10KXJldHVybiB0
        O3ZhciBuPXIodGhpcywidGVtcGxhdGVOYW1lIiksaT10aGlzLnRlbXBsYXRl
        Rm9yTmFtZShuLCJ0ZW1wbGF0ZSIpO3JldHVybiBpfHxyKHRoaXMsImRlZmF1
        bHRUZW1wbGF0ZSIpfSkucHJvcGVydHkoInRlbXBsYXRlTmFtZSIpLGNvbnRy
        b2xsZXI6RW1iZXIuY29tcHV0ZWQoZnVuY3Rpb24oKXt2YXIgZT1yKHRoaXMs
        Il9wYXJlbnRWaWV3Iik7cmV0dXJuIGU/cihlLCJjb250cm9sbGVyIik6bnVs
        bH0pLnByb3BlcnR5KCJfcGFyZW50VmlldyIpLGxheW91dDpFbWJlci5jb21w
        dXRlZChmdW5jdGlvbigpe3ZhciBlPXIodGhpcywibGF5b3V0TmFtZSIpLHQ9
        dGhpcy50ZW1wbGF0ZUZvck5hbWUoZSwibGF5b3V0Iik7cmV0dXJuIHR8fHIo
        dGhpcywiZGVmYXVsdExheW91dCIpfSkucHJvcGVydHkoImxheW91dE5hbWUi
        KSxfeWllbGQ6ZnVuY3Rpb24oZSx0KXt2YXIgbj1yKHRoaXMsInRlbXBsYXRl
        Iik7biYmbihlLHQpfSx0ZW1wbGF0ZUZvck5hbWU6ZnVuY3Rpb24oZSl7aWYo
        ZSl7dmFyIHQ9dGhpcy5jb250YWluZXJ8fEVtYmVyLkNvbnRhaW5lciYmRW1i
        ZXIuQ29udGFpbmVyLmRlZmF1bHRDb250YWluZXI7cmV0dXJuIHQmJnQubG9v
        a3VwKCJ0ZW1wbGF0ZToiK2UpfX0sY29udGV4dDpFbWJlci5jb21wdXRlZChm
        dW5jdGlvbihlLHQpe3JldHVybiAyPT09YXJndW1lbnRzLmxlbmd0aD8obih0
        aGlzLCJfY29udGV4dCIsdCksdCk6cih0aGlzLCJfY29udGV4dCIpfSkudm9s
        YXRpbGUoKSxfY29udGV4dDpFbWJlci5jb21wdXRlZChmdW5jdGlvbigpe3Zh
        ciBlLHQ7cmV0dXJuKHQ9cih0aGlzLCJjb250cm9sbGVyIikpP3Q6KGU9dGhp
        cy5fcGFyZW50VmlldyxlP3IoZSwiX2NvbnRleHQiKTpudWxsKX0pLF9jb250
        ZXh0RGlkQ2hhbmdlOkVtYmVyLm9ic2VydmVyKCJjb250ZXh0IixmdW5jdGlv
        bigpe3RoaXMucmVyZW5kZXIoKX0pLGlzVmlzaWJsZTohMCxjaGlsZFZpZXdz
        OnUsX2NoaWxkVmlld3M6YyxfY2hpbGRWaWV3c1dpbGxDaGFuZ2U6RW1iZXIu
        YmVmb3JlT2JzZXJ2ZXIoImNoaWxkVmlld3MiLGZ1bmN0aW9uKCl7aWYodGhp
        cy5pc1ZpcnR1YWwpe3ZhciBlPXIodGhpcywicGFyZW50VmlldyIpO2UmJkVt
        YmVyLnByb3BlcnR5V2lsbENoYW5nZShlLCJjaGlsZFZpZXdzIil9fSksX2No
        aWxkVmlld3NEaWRDaGFuZ2U6RW1iZXIub2JzZXJ2ZXIoImNoaWxkVmlld3Mi
        LGZ1bmN0aW9uKCl7aWYodGhpcy5pc1ZpcnR1YWwpe3ZhciBlPXIodGhpcywi
        cGFyZW50VmlldyIpO2UmJkVtYmVyLnByb3BlcnR5RGlkQ2hhbmdlKGUsImNo
        aWxkVmlld3MiKX19KSxuZWFyZXN0SW5zdGFuY2VPZjpmdW5jdGlvbihlKXtm
        b3IodmFyIHQ9cih0aGlzLCJwYXJlbnRWaWV3Iik7dDspe2lmKHQgaW5zdGFu
        Y2VvZiBlKXJldHVybiB0O3Q9cih0LCJwYXJlbnRWaWV3Iil9fSxuZWFyZXN0
        T2ZUeXBlOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1yKHRoaXMsInBhcmVudFZp
        ZXciKSxuPWUgaW5zdGFuY2VvZiBFbWJlci5NaXhpbj9mdW5jdGlvbih0KXty
        ZXR1cm4gZS5kZXRlY3QodCl9OmZ1bmN0aW9uKHQpe3JldHVybiBlLmRldGVj
        dCh0LmNvbnN0cnVjdG9yKX07dDspe2lmKG4odCkpcmV0dXJuIHQ7dD1yKHQs
        InBhcmVudFZpZXciKX19LG5lYXJlc3RXaXRoUHJvcGVydHk6ZnVuY3Rpb24o
        ZSl7Zm9yKHZhciB0PXIodGhpcywicGFyZW50VmlldyIpO3Q7KXtpZihlIGlu
        IHQpcmV0dXJuIHQ7dD1yKHQsInBhcmVudFZpZXciKX19LG5lYXJlc3RDaGls
        ZE9mOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1yKHRoaXMsInBhcmVudFZpZXci
        KTt0Oyl7aWYocih0LCJwYXJlbnRWaWV3IilpbnN0YW5jZW9mIGUpcmV0dXJu
        IHQ7dD1yKHQsInBhcmVudFZpZXciKX19LF9wYXJlbnRWaWV3RGlkQ2hhbmdl
        OkVtYmVyLm9ic2VydmVyKCJfcGFyZW50VmlldyIsZnVuY3Rpb24oKXt0aGlz
        LmlzRGVzdHJveWluZ3x8KHRoaXMudHJpZ2dlcigicGFyZW50Vmlld0RpZENo
        YW5nZSIpLHIodGhpcywicGFyZW50Vmlldy5jb250cm9sbGVyIikmJiFyKHRo
        aXMsImNvbnRyb2xsZXIiKSYmdGhpcy5ub3RpZnlQcm9wZXJ0eUNoYW5nZSgi
        Y29udHJvbGxlciIpKX0pLF9jb250cm9sbGVyRGlkQ2hhbmdlOkVtYmVyLm9i
        c2VydmVyKCJjb250cm9sbGVyIixmdW5jdGlvbigpe3RoaXMuaXNEZXN0cm95
        aW5nfHwodGhpcy5yZXJlbmRlcigpLHRoaXMuZm9yRWFjaENoaWxkVmlldyhm
        dW5jdGlvbihlKXtlLnByb3BlcnR5RGlkQ2hhbmdlKCJjb250cm9sbGVyIil9
        KSl9KSxjbG9uZUtleXdvcmRzOmZ1bmN0aW9uKCl7dmFyIGU9cih0aGlzLCJ0
        ZW1wbGF0ZURhdGEiKSx0PWU/RW1iZXIuY29weShlLmtleXdvcmRzKTp7fTty
        ZXR1cm4gbih0LCJ2aWV3IixyKHRoaXMsImNvbmNyZXRlVmlldyIpKSxuKHQs
        Il92aWV3Iix0aGlzKSxuKHQsImNvbnRyb2xsZXIiLHIodGhpcywiY29udHJv
        bGxlciIpKSx0fSxyZW5kZXI6ZnVuY3Rpb24oZSl7dmFyIHQ9cih0aGlzLCJs
        YXlvdXQiKXx8cih0aGlzLCJ0ZW1wbGF0ZSIpO2lmKHQpe3ZhciBuLGk9cih0
        aGlzLCJjb250ZXh0Iiksbz10aGlzLmNsb25lS2V5d29yZHMoKSxhPXt2aWV3
        OnRoaXMsYnVmZmVyOmUsaXNSZW5kZXJEYXRhOiEwLGtleXdvcmRzOm8saW5z
        aWRlR3JvdXA6cih0aGlzLCJ0ZW1wbGF0ZURhdGEuaW5zaWRlR3JvdXAiKX07
        bj10KGkse2RhdGE6YX0pLHZvaWQgMCE9PW4mJmUucHVzaChuKX19LHJlcmVu
        ZGVyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY3VycmVudFN0YXRlLnJlcmVu
        ZGVyKHRoaXMpfSxjbGVhclJlbmRlcmVkQ2hpbGRyZW46ZnVuY3Rpb24oKXtm
        b3IodmFyIGU9dGhpcy5sZW5ndGhCZWZvcmVSZW5kZXIsdD10aGlzLmxlbmd0
        aEFmdGVyUmVuZGVyLHI9dGhpcy5fY2hpbGRWaWV3cyxuPXQtMTtuPj1lO24t
        LSlyW25dJiZyW25dLmRlc3Ryb3koKX0sX2FwcGx5Q2xhc3NOYW1lQmluZGlu
        Z3M6ZnVuY3Rpb24oZSl7dmFyIHQscixuLGk9dGhpcy5jbGFzc05hbWVzO28o
        ZSxmdW5jdGlvbihlKXt2YXIgbyxzPUVtYmVyLlZpZXcuX3BhcnNlUHJvcGVy
        dHlQYXRoKGUpLHU9ZnVuY3Rpb24oKXtyPXRoaXMuX2NsYXNzU3RyaW5nRm9y
        UHJvcGVydHkoZSksdD10aGlzLiQoKSxvJiYodC5yZW1vdmVDbGFzcyhvKSxp
        LnJlbW92ZU9iamVjdChvKSkscj8odC5hZGRDbGFzcyhyKSxvPXIpOm89bnVs
        bH07bj10aGlzLl9jbGFzc1N0cmluZ0ZvclByb3BlcnR5KGUpLG4mJihhKGks
        biksbz1uKSx0aGlzLnJlZ2lzdGVyT2JzZXJ2ZXIodGhpcyxzLnBhdGgsdSks
        dGhpcy5vbmUoIndpbGxDbGVhclJlbmRlciIsZnVuY3Rpb24oKXtvJiYoaS5y
        ZW1vdmVPYmplY3Qobyksbz1udWxsKX0pfSx0aGlzKX0sX2FwcGx5QXR0cmli
        dXRlQmluZGluZ3M6ZnVuY3Rpb24oZSx0KXt2YXIgbixpO28odCxmdW5jdGlv
        bih0KXt2YXIgbz10LnNwbGl0KCI6IiksYT1vWzBdLHM9b1sxXXx8YSx1PWZ1
        bmN0aW9uKCl7aT10aGlzLiQoKSxuPXIodGhpcyxhKSxFbWJlci5WaWV3LmFw
        cGx5QXR0cmlidXRlQmluZGluZ3MoaSxzLG4pfTt0aGlzLnJlZ2lzdGVyT2Jz
        ZXJ2ZXIodGhpcyxhLHUpLG49cih0aGlzLGEpLEVtYmVyLlZpZXcuYXBwbHlB
        dHRyaWJ1dGVCaW5kaW5ncyhlLHMsbil9LHRoaXMpfSxfY2xhc3NTdHJpbmdG
        b3JQcm9wZXJ0eTpmdW5jdGlvbihlKXt2YXIgdD1FbWJlci5WaWV3Ll9wYXJz
        ZVByb3BlcnR5UGF0aChlKSxuPXQucGF0aCxpPXIodGhpcyxuKTtyZXR1cm4g
        dm9pZCAwPT09aSYmRW1iZXIuaXNHbG9iYWxQYXRoKG4pJiYoaT1yKEVtYmVy
        Lmxvb2t1cCxuKSksRW1iZXIuVmlldy5fY2xhc3NTdHJpbmdGb3JWYWx1ZShu
        LGksdC5jbGFzc05hbWUsdC5mYWxzeUNsYXNzTmFtZSl9LGVsZW1lbnQ6RW1i
        ZXIuY29tcHV0ZWQoZnVuY3Rpb24oZSx0KXtyZXR1cm4gdm9pZCAwIT09dD90
        aGlzLmN1cnJlbnRTdGF0ZS5zZXRFbGVtZW50KHRoaXMsdCk6dGhpcy5jdXJy
        ZW50U3RhdGUuZ2V0RWxlbWVudCh0aGlzKX0pLnByb3BlcnR5KCJfcGFyZW50
        VmlldyIpLCQ6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuY3VycmVudFN0YXRl
        LiQodGhpcyxlKX0sbXV0YXRlQ2hpbGRWaWV3czpmdW5jdGlvbihlKXtmb3Io
        dmFyIHQscj10aGlzLl9jaGlsZFZpZXdzLG49ci5sZW5ndGg7LS1uPj0wOyl0
        PXJbbl0sZSh0aGlzLHQsbik7cmV0dXJuIHRoaXN9LGZvckVhY2hDaGlsZFZp
        ZXc6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fY2hpbGRWaWV3cztpZighdCly
        ZXR1cm4gdGhpczt2YXIgcixuLGk9dC5sZW5ndGg7Zm9yKG49MDtpPm47bisr
        KXI9dFtuXSxlKHIpO3JldHVybiB0aGlzfSxhcHBlbmRUbzpmdW5jdGlvbihl
        KXtyZXR1cm4gdGhpcy5faW5zZXJ0RWxlbWVudExhdGVyKGZ1bmN0aW9uKCl7
        dGhpcy4kKCkuYXBwZW5kVG8oZSl9KSx0aGlzfSxyZXBsYWNlSW46ZnVuY3Rp
        b24oZSl7cmV0dXJuIHRoaXMuX2luc2VydEVsZW1lbnRMYXRlcihmdW5jdGlv
        bigpe0VtYmVyLiQoZSkuZW1wdHkoKSx0aGlzLiQoKS5hcHBlbmRUbyhlKX0p
        LHRoaXN9LF9pbnNlcnRFbGVtZW50TGF0ZXI6ZnVuY3Rpb24oZSl7dGhpcy5f
        c2NoZWR1bGVkSW5zZXJ0PUVtYmVyLnJ1bi5zY2hlZHVsZU9uY2UoInJlbmRl
        ciIsdGhpcywiX2luc2VydEVsZW1lbnQiLGUpfSxfaW5zZXJ0RWxlbWVudDpm
        dW5jdGlvbihlKXt0aGlzLl9zY2hlZHVsZWRJbnNlcnQ9bnVsbCx0aGlzLmN1
        cnJlbnRTdGF0ZS5pbnNlcnRFbGVtZW50KHRoaXMsZSl9LGFwcGVuZDpmdW5j
        dGlvbigpe3JldHVybiB0aGlzLmFwcGVuZFRvKGRvY3VtZW50LmJvZHkpfSxy
        ZW1vdmU6ZnVuY3Rpb24oKXt0aGlzLnJlbW92ZWRGcm9tRE9NfHx0aGlzLmRl
        c3Ryb3lFbGVtZW50KCksdGhpcy5pbnZva2VSZWN1cnNpdmVseShmdW5jdGlv
        bihlKXtlLmNsZWFyUmVuZGVyZWRDaGlsZHJlbiYmZS5jbGVhclJlbmRlcmVk
        Q2hpbGRyZW4oKX0pfSxlbGVtZW50SWQ6bnVsbCxmaW5kRWxlbWVudEluUGFy
        ZW50RWxlbWVudDpmdW5jdGlvbihlKXt2YXIgdD0iIyIrdGhpcy5lbGVtZW50
        SWQ7cmV0dXJuIEVtYmVyLiQodClbMF18fEVtYmVyLiQodCxlKVswXX0sY3Jl
        YXRlRWxlbWVudDpmdW5jdGlvbigpe2lmKHIodGhpcywiZWxlbWVudCIpKXJl
        dHVybiB0aGlzO3ZhciBlPXRoaXMucmVuZGVyVG9CdWZmZXIoKTtyZXR1cm4g
        bih0aGlzLCJlbGVtZW50IixlLmVsZW1lbnQoKSksdGhpc30sd2lsbEluc2Vy
        dEVsZW1lbnQ6RW1iZXIuSyxkaWRJbnNlcnRFbGVtZW50OkVtYmVyLkssd2ls
        bENsZWFyUmVuZGVyOkVtYmVyLkssaW52b2tlUmVjdXJzaXZlbHk6ZnVuY3Rp
        b24oZSx0KXtmb3IodmFyIHIsbixpLG89dD09PSExP3RoaXMuX2NoaWxkVmll
        d3M6W3RoaXNdO28ubGVuZ3RoOyl7cj1vLnNsaWNlKCksbz1bXTtmb3IodmFy
        IGE9MCxzPXIubGVuZ3RoO3M+YTthKyspbj1yW2FdLGk9bi5fY2hpbGRWaWV3
        cz9uLl9jaGlsZFZpZXdzLnNsaWNlKDApOm51bGwsZShuKSxpJiZvLnB1c2gu
        YXBwbHkobyxpKX19LHRyaWdnZXJSZWN1cnNpdmVseTpmdW5jdGlvbihlKXtm
        b3IodmFyIHQscixuLGk9W3RoaXNdO2kubGVuZ3RoOyl7dD1pLnNsaWNlKCks
        aT1bXTtmb3IodmFyIG89MCxhPXQubGVuZ3RoO2E+bztvKyspcj10W29dLG49
        ci5fY2hpbGRWaWV3cz9yLl9jaGlsZFZpZXdzLnNsaWNlKDApOm51bGwsci50
        cmlnZ2VyJiZyLnRyaWdnZXIoZSksbiYmaS5wdXNoLmFwcGx5KGksbil9fSx2
        aWV3SGllcmFyY2h5Q29sbGVjdGlvbjpmdW5jdGlvbigpe2Zvcih2YXIgZSx0
        PW5ldyBsKFt0aGlzXSkscj0wO3I8dC5sZW5ndGg7cisrKWU9dC5vYmplY3RB
        dChyKSxlLl9jaGlsZFZpZXdzJiZ0LnB1c2guYXBwbHkodCxlLl9jaGlsZFZp
        ZXdzKTtyZXR1cm4gdH0sZGVzdHJveUVsZW1lbnQ6ZnVuY3Rpb24oKXtyZXR1
        cm4gdGhpcy5jdXJyZW50U3RhdGUuZGVzdHJveUVsZW1lbnQodGhpcyl9LHdp
        bGxEZXN0cm95RWxlbWVudDpFbWJlci5LLF9ub3RpZnlXaWxsRGVzdHJveUVs
        ZW1lbnQ6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLnZpZXdIaWVyYXJjaHlDb2xs
        ZWN0aW9uKCk7cmV0dXJuIGUudHJpZ2dlcigid2lsbENsZWFyUmVuZGVyIiks
        ZS50cmlnZ2VyKCJ3aWxsRGVzdHJveUVsZW1lbnQiKSxlfSxfZWxlbWVudERp
        ZENoYW5nZTpFbWJlci5vYnNlcnZlcigiZWxlbWVudCIsZnVuY3Rpb24oKXt0
        aGlzLmZvckVhY2hDaGlsZFZpZXcoZnVuY3Rpb24oZSl7ZGVsZXRlIHMoZSku
        Y2FjaGUuZWxlbWVudH0pfSkscGFyZW50Vmlld0RpZENoYW5nZTpFbWJlci5L
        LGluc3RydW1lbnROYW1lOiJ2aWV3IixpbnN0cnVtZW50RGV0YWlsczpmdW5j
        dGlvbihlKXtlLnRlbXBsYXRlPXIodGhpcywidGVtcGxhdGVOYW1lIiksdGhp
        cy5fc3VwZXIoZSl9LF9yZW5kZXJUb0J1ZmZlcjpmdW5jdGlvbihlLHQpe3Ro
        aXMubGVuZ3RoQmVmb3JlUmVuZGVyPXRoaXMuX2NoaWxkVmlld3MubGVuZ3Ro
        O3ZhciByPXRoaXMuX3N1cGVyKGUsdCk7cmV0dXJuIHRoaXMubGVuZ3RoQWZ0
        ZXJSZW5kZXI9dGhpcy5fY2hpbGRWaWV3cy5sZW5ndGgscn0scmVuZGVyVG9C
        dWZmZXJJZk5lZWRlZDpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5jdXJyZW50
        U3RhdGUucmVuZGVyVG9CdWZmZXJJZk5lZWRlZCh0aGlzLGUpfSxiZWZvcmVS
        ZW5kZXI6ZnVuY3Rpb24oZSl7dGhpcy5hcHBseUF0dHJpYnV0ZXNUb0J1ZmZl
        cihlKSxlLnB1c2hPcGVuaW5nVGFnKCl9LGFmdGVyUmVuZGVyOmZ1bmN0aW9u
        KGUpe2UucHVzaENsb3NpbmdUYWcoKX0sYXBwbHlBdHRyaWJ1dGVzVG9CdWZm
        ZXI6ZnVuY3Rpb24oZSl7dmFyIHQ9cih0aGlzLCJjbGFzc05hbWVCaW5kaW5n
        cyIpO3QubGVuZ3RoJiZ0aGlzLl9hcHBseUNsYXNzTmFtZUJpbmRpbmdzKHQp
        O3ZhciBuPXIodGhpcywiYXR0cmlidXRlQmluZGluZ3MiKTtuLmxlbmd0aCYm
        dGhpcy5fYXBwbHlBdHRyaWJ1dGVCaW5kaW5ncyhlLG4pLGUuc2V0Q2xhc3Nl
        cyh0aGlzLmNsYXNzTmFtZXMpLGUuaWQodGhpcy5lbGVtZW50SWQpO3ZhciBp
        PXIodGhpcywiYXJpYVJvbGUiKTtpJiZlLmF0dHIoInJvbGUiLGkpLHIodGhp
        cywiaXNWaXNpYmxlIik9PT0hMSYmZS5zdHlsZSgiZGlzcGxheSIsIm5vbmUi
        KX0sdGFnTmFtZTpudWxsLGFyaWFSb2xlOm51bGwsY2xhc3NOYW1lczpbImVt
        YmVyLXZpZXciXSxjbGFzc05hbWVCaW5kaW5nczpjLGF0dHJpYnV0ZUJpbmRp
        bmdzOmMsaW5pdDpmdW5jdGlvbigpe3RoaXMuZWxlbWVudElkPXRoaXMuZWxl
        bWVudElkfHxpKHRoaXMpLHRoaXMuX3N1cGVyKCksdGhpcy5fY2hpbGRWaWV3
        cz10aGlzLl9jaGlsZFZpZXdzLnNsaWNlKCksdGhpcy5jbGFzc05hbWVCaW5k
        aW5ncz1FbWJlci5BKHRoaXMuY2xhc3NOYW1lQmluZGluZ3Muc2xpY2UoKSks
        dGhpcy5jbGFzc05hbWVzPUVtYmVyLkEodGhpcy5jbGFzc05hbWVzLnNsaWNl
        KCkpfSxhcHBlbmRDaGlsZDpmdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLmN1
        cnJlbnRTdGF0ZS5hcHBlbmRDaGlsZCh0aGlzLGUsdCl9LHJlbW92ZUNoaWxk
        OmZ1bmN0aW9uKGUpe2lmKCF0aGlzLmlzRGVzdHJveWluZyl7bihlLCJfcGFy
        ZW50VmlldyIsbnVsbCk7dmFyIHQ9dGhpcy5fY2hpbGRWaWV3cztyZXR1cm4g
        RW1iZXIuRW51bWVyYWJsZVV0aWxzLnJlbW92ZU9iamVjdCh0LGUpLHRoaXMu
        cHJvcGVydHlEaWRDaGFuZ2UoImNoaWxkVmlld3MiKSx0aGlzfX0scmVtb3Zl
        QWxsQ2hpbGRyZW46ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tdXRhdGVDaGls
        ZFZpZXdzKGZ1bmN0aW9uKGUsdCl7ZS5yZW1vdmVDaGlsZCh0KX0pfSxkZXN0
        cm95QWxsQ2hpbGRyZW46ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tdXRhdGVD
        aGlsZFZpZXdzKGZ1bmN0aW9uKGUsdCl7dC5kZXN0cm95KCl9KX0scmVtb3Zl
        RnJvbVBhcmVudDpmdW5jdGlvbigpe3ZhciBlPXRoaXMuX3BhcmVudFZpZXc7
        cmV0dXJuIHRoaXMucmVtb3ZlKCksZSYmZS5yZW1vdmVDaGlsZCh0aGlzKSx0
        aGlzfSxkZXN0cm95OmZ1bmN0aW9uKCl7dmFyIGUsdCxuPXRoaXMuX2NoaWxk
        Vmlld3MsaT1yKHRoaXMsInBhcmVudFZpZXciKSxvPXRoaXMudmlld05hbWU7
        aWYodGhpcy5fc3VwZXIoKSl7Zm9yKGU9bi5sZW5ndGgsdD1lLTE7dD49MDt0
        LS0pblt0XS5yZW1vdmVkRnJvbURPTT0hMDtmb3IobyYmaSYmaS5zZXQobyxu
        dWxsKSxlPW4ubGVuZ3RoLHQ9ZS0xO3Q+PTA7dC0tKW5bdF0uZGVzdHJveSgp
        O3JldHVybiB0aGlzfX0sY3JlYXRlQ2hpbGRWaWV3OmZ1bmN0aW9uKGUsdCl7
        aWYoIWUpdGhyb3cgbmV3IFR5cGVFcnJvcigiY3JlYXRlQ2hpbGRWaWV3cyBm
        aXJzdCBhcmd1bWVudCBtdXN0IGV4aXN0Iik7aWYoZS5pc1ZpZXcmJmUuX3Bh
        cmVudFZpZXc9PT10aGlzJiZlLmNvbnRhaW5lcj09PXRoaXMuY29udGFpbmVy
        KXJldHVybiBlO2lmKHQ9dHx8e30sdC5fcGFyZW50Vmlldz10aGlzLEVtYmVy
        LkNvcmVWaWV3LmRldGVjdChlKSl0LnRlbXBsYXRlRGF0YT10LnRlbXBsYXRl
        RGF0YXx8cih0aGlzLCJ0ZW1wbGF0ZURhdGEiKSx0LmNvbnRhaW5lcj10aGlz
        LmNvbnRhaW5lcixlPWUuY3JlYXRlKHQpLGUudmlld05hbWUmJm4ocih0aGlz
        LCJjb25jcmV0ZVZpZXciKSxlLnZpZXdOYW1lLGUpO2Vsc2UgaWYoInN0cmlu
        ZyI9PXR5cGVvZiBlKXt2YXIgaT0idmlldzoiK2Usbz10aGlzLmNvbnRhaW5l
        ci5sb29rdXBGYWN0b3J5KGkpO3QudGVtcGxhdGVEYXRhPXIodGhpcywidGVt
        cGxhdGVEYXRhIiksZT1vLmNyZWF0ZSh0KX1lbHNlIHQuY29udGFpbmVyPXRo
        aXMuY29udGFpbmVyLHIoZSwidGVtcGxhdGVEYXRhIil8fCh0LnRlbXBsYXRl
        RGF0YT1yKHRoaXMsInRlbXBsYXRlRGF0YSIpKSxFbWJlci5zZXRQcm9wZXJ0
        aWVzKGUsdCk7cmV0dXJuIGV9LGJlY2FtZVZpc2libGU6RW1iZXIuSyxiZWNh
        bWVIaWRkZW46RW1iZXIuSyxfaXNWaXNpYmxlRGlkQ2hhbmdlOkVtYmVyLm9i
        c2VydmVyKCJpc1Zpc2libGUiLGZ1bmN0aW9uKCl7dmFyIGU9dGhpcy4kKCk7
        aWYoZSl7dmFyIHQ9cih0aGlzLCJpc1Zpc2libGUiKTtlLnRvZ2dsZSh0KSx0
        aGlzLl9pc0FuY2VzdG9ySGlkZGVuKCl8fCh0P3RoaXMuX25vdGlmeUJlY2Ft
        ZVZpc2libGUoKTp0aGlzLl9ub3RpZnlCZWNhbWVIaWRkZW4oKSl9fSksX25v
        dGlmeUJlY2FtZVZpc2libGU6ZnVuY3Rpb24oKXt0aGlzLnRyaWdnZXIoImJl
        Y2FtZVZpc2libGUiKSx0aGlzLmZvckVhY2hDaGlsZFZpZXcoZnVuY3Rpb24o
        ZSl7dmFyIHQ9cihlLCJpc1Zpc2libGUiKTsodHx8bnVsbD09PXQpJiZlLl9u
        b3RpZnlCZWNhbWVWaXNpYmxlKCl9KX0sX25vdGlmeUJlY2FtZUhpZGRlbjpm
        dW5jdGlvbigpe3RoaXMudHJpZ2dlcigiYmVjYW1lSGlkZGVuIiksdGhpcy5m
        b3JFYWNoQ2hpbGRWaWV3KGZ1bmN0aW9uKGUpe3ZhciB0PXIoZSwiaXNWaXNp
        YmxlIik7KHR8fG51bGw9PT10KSYmZS5fbm90aWZ5QmVjYW1lSGlkZGVuKCl9
        KX0sX2lzQW5jZXN0b3JIaWRkZW46ZnVuY3Rpb24oKXtmb3IodmFyIGU9cih0
        aGlzLCJwYXJlbnRWaWV3Iik7ZTspe2lmKHIoZSwiaXNWaXNpYmxlIik9PT0h
        MSlyZXR1cm4hMDtlPXIoZSwicGFyZW50VmlldyIpfXJldHVybiExfSxjbGVh
        ckJ1ZmZlcjpmdW5jdGlvbigpe3RoaXMuaW52b2tlUmVjdXJzaXZlbHkoZnVu
        Y3Rpb24oZSl7ZS5idWZmZXI9bnVsbH0pfSx0cmFuc2l0aW9uVG86ZnVuY3Rp
        b24oZSx0KXt2YXIgcj10aGlzLmN1cnJlbnRTdGF0ZSxuPXRoaXMuY3VycmVu
        dFN0YXRlPXRoaXMuc3RhdGVzW2VdO3RoaXMuc3RhdGU9ZSxyJiZyLmV4aXQm
        JnIuZXhpdCh0aGlzKSxuLmVudGVyJiZuLmVudGVyKHRoaXMpLCJpbkRPTSI9
        PT1lJiZkZWxldGUgRW1iZXIubWV0YSh0aGlzKS5jYWNoZS5lbGVtZW50LHQh
        PT0hMSYmdGhpcy5mb3JFYWNoQ2hpbGRWaWV3KGZ1bmN0aW9uKHQpe3QudHJh
        bnNpdGlvblRvKGUpfSl9LGhhbmRsZUV2ZW50OmZ1bmN0aW9uKGUsdCl7cmV0
        dXJuIHRoaXMuY3VycmVudFN0YXRlLmhhbmRsZUV2ZW50KHRoaXMsZSx0KX0s
        cmVnaXN0ZXJPYnNlcnZlcjpmdW5jdGlvbihlLHQscixuKXtpZihufHwiZnVu
        Y3Rpb24iIT10eXBlb2Ygcnx8KG49cixyPW51bGwpLGUmJiJvYmplY3QiPT10
        eXBlb2YgZSl7dmFyIGk9dGhpcyxvPWZ1bmN0aW9uKCl7aS5jdXJyZW50U3Rh
        dGUuaW52b2tlT2JzZXJ2ZXIodGhpcyxuKX0sYT1mdW5jdGlvbigpe0VtYmVy
        LnJ1bi5zY2hlZHVsZU9uY2UoInJlbmRlciIsdGhpcyxvKX07RW1iZXIuYWRk
        T2JzZXJ2ZXIoZSx0LHIsYSksdGhpcy5vbmUoIndpbGxDbGVhclJlbmRlciIs
        ZnVuY3Rpb24oKXtFbWJlci5yZW1vdmVPYnNlcnZlcihlLHQscixhKX0pfX19
        KTt2YXIgaD17cHJlcGVuZDpmdW5jdGlvbih0LHIpe3QuJCgpLnByZXBlbmQo
        ciksZSgpfSxhZnRlcjpmdW5jdGlvbih0LHIpe3QuJCgpLmFmdGVyKHIpLGUo
        KX0saHRtbDpmdW5jdGlvbih0LHIpe3QuJCgpLmh0bWwociksZSgpfSxyZXBs
        YWNlOmZ1bmN0aW9uKHQpe3ZhciBpPXIodCwiZWxlbWVudCIpO24odCwiZWxl
        bWVudCIsbnVsbCksdC5faW5zZXJ0RWxlbWVudExhdGVyKGZ1bmN0aW9uKCl7
        RW1iZXIuJChpKS5yZXBsYWNlV2l0aChyKHQsImVsZW1lbnQiKSksZSgpfSl9
        LHJlbW92ZTpmdW5jdGlvbih0KXt0LiQoKS5yZW1vdmUoKSxlKCl9LGVtcHR5
        OmZ1bmN0aW9uKHQpe3QuJCgpLmVtcHR5KCksZSgpfX07RW1iZXIuVmlldy5y
        ZW9wZW4oe2RvbU1hbmFnZXI6aH0pLEVtYmVyLlZpZXcucmVvcGVuQ2xhc3Mo
        e19wYXJzZVByb3BlcnR5UGF0aDpmdW5jdGlvbihlKXt2YXIgdCxyLG49ZS5z
        cGxpdCgiOiIpLGk9blswXSxvPSIiO3JldHVybiBuLmxlbmd0aD4xJiYodD1u
        WzFdLDM9PT1uLmxlbmd0aCYmKHI9blsyXSksbz0iOiIrdCxyJiYobys9Ijoi
        K3IpKSx7cGF0aDppLGNsYXNzTmFtZXM6byxjbGFzc05hbWU6IiI9PT10P3Zv
        aWQgMDp0LGZhbHN5Q2xhc3NOYW1lOnJ9fSxfY2xhc3NTdHJpbmdGb3JWYWx1
        ZTpmdW5jdGlvbihlLHQscixuKXtpZihyfHxuKXJldHVybiByJiZ0P3I6biYm
        IXQ/bjpudWxsO2lmKHQ9PT0hMCl7dmFyIGk9ZS5zcGxpdCgiLiIpO3JldHVy
        biBFbWJlci5TdHJpbmcuZGFzaGVyaXplKGlbaS5sZW5ndGgtMV0pfXJldHVy
        biB0IT09ITEmJm51bGwhPXQ/dDpudWxsfX0pO3ZhciBtPUVtYmVyLk9iamVj
        dC5leHRlbmQoRW1iZXIuRXZlbnRlZCkuY3JlYXRlKCk7RW1iZXIuVmlldy5h
        ZGRNdXRhdGlvbkxpc3RlbmVyPWZ1bmN0aW9uKGUpe20ub24oImNoYW5nZSIs
        ZSl9LEVtYmVyLlZpZXcucmVtb3ZlTXV0YXRpb25MaXN0ZW5lcj1mdW5jdGlv
        bihlKXttLm9mZigiY2hhbmdlIixlKX0sRW1iZXIuVmlldy5ub3RpZnlNdXRh
        dGlvbkxpc3RlbmVycz1mdW5jdGlvbigpe20udHJpZ2dlcigiY2hhbmdlIil9
        LEVtYmVyLlZpZXcudmlld3M9e30sRW1iZXIuVmlldy5jaGlsZFZpZXdzUHJv
        cGVydHk9dSxFbWJlci5WaWV3LmFwcGx5QXR0cmlidXRlQmluZGluZ3M9ZnVu
        Y3Rpb24oZSx0LHIpe3ZhciBuPUVtYmVyLnR5cGVPZihyKTsidmFsdWUiPT09
        dHx8InN0cmluZyIhPT1uJiYoIm51bWJlciIhPT1ufHxpc05hTihyKSk/InZh
        bHVlIj09PXR8fCJib29sZWFuIj09PW4/RW1iZXIuaXNOb25lKHIpfHxyPT09
        ITE/KGUucmVtb3ZlQXR0cih0KSxlLnByb3AodCwiIikpOnIhPT1lLnByb3Ao
        dCkmJmUucHJvcCh0LHIpOnJ8fGUucmVtb3ZlQXR0cih0KTpyIT09ZS5hdHRy
        KHQpJiZlLmF0dHIodCxyKX0sRW1iZXIuVmlldy5zdGF0ZXM9dH0oKSxmdW5j
        dGlvbigpe3ZhciBlPShFbWJlci5nZXQsRW1iZXIuc2V0KTtFbWJlci5WaWV3
        LnN0YXRlcy5fZGVmYXVsdD17YXBwZW5kQ2hpbGQ6ZnVuY3Rpb24oKXt0aHJv
        dyJZb3UgY2FuJ3QgdXNlIGFwcGVuZENoaWxkIG91dHNpZGUgb2YgdGhlIHJl
        bmRlcmluZyBwcm9jZXNzIn0sJDpmdW5jdGlvbigpe3JldHVybiB2b2lkIDB9
        LGdldEVsZW1lbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbH0saGFuZGxlRXZl
        bnQ6ZnVuY3Rpb24oKXtyZXR1cm4hMH0sZGVzdHJveUVsZW1lbnQ6ZnVuY3Rp
        b24odCl7cmV0dXJuIGUodCwiZWxlbWVudCIsbnVsbCksdC5fc2NoZWR1bGVk
        SW5zZXJ0JiYoRW1iZXIucnVuLmNhbmNlbCh0Ll9zY2hlZHVsZWRJbnNlcnQp
        LHQuX3NjaGVkdWxlZEluc2VydD1udWxsKSx0fSxyZW5kZXJUb0J1ZmZlcklm
        TmVlZGVkOmZ1bmN0aW9uKCl7cmV0dXJuITF9LHJlcmVuZGVyOkVtYmVyLkss
        aW52b2tlT2JzZXJ2ZXI6RW1iZXIuS319KCksZnVuY3Rpb24oKXt2YXIgZT1F
        bWJlci5WaWV3LnN0YXRlcy5wcmVSZW5kZXI9RW1iZXIuY3JlYXRlKEVtYmVy
        LlZpZXcuc3RhdGVzLl9kZWZhdWx0KTtFbWJlci5tZXJnZShlLHtpbnNlcnRF
        bGVtZW50OmZ1bmN0aW9uKGUsdCl7ZS5jcmVhdGVFbGVtZW50KCk7dmFyIHI9
        ZS52aWV3SGllcmFyY2h5Q29sbGVjdGlvbigpO3IudHJpZ2dlcigid2lsbElu
        c2VydEVsZW1lbnQiKSx0LmNhbGwoZSk7Zm9yKHZhciBuPWUuZ2V0KCJlbGVt
        ZW50Iik7bj1uLnBhcmVudE5vZGU7KW49PT1kb2N1bWVudCYmKHIudHJhbnNp
        dGlvblRvKCJpbkRPTSIsITEpLHIudHJpZ2dlcigiZGlkSW5zZXJ0RWxlbWVu
        dCIpKX0scmVuZGVyVG9CdWZmZXJJZk5lZWRlZDpmdW5jdGlvbihlLHQpe3Jl
        dHVybiBlLnJlbmRlclRvQnVmZmVyKHQpLCEwfSxlbXB0eTpFbWJlci5LLHNl
        dEVsZW1lbnQ6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gbnVsbCE9PXQmJmUudHJh
        bnNpdGlvblRvKCJoYXNFbGVtZW50IiksdH19KX0oKSxmdW5jdGlvbigpe3Zh
        ciBlPShFbWJlci5nZXQsRW1iZXIuc2V0LEVtYmVyLlZpZXcuc3RhdGVzLmlu
        QnVmZmVyPUVtYmVyLmNyZWF0ZShFbWJlci5WaWV3LnN0YXRlcy5fZGVmYXVs
        dCkpO0VtYmVyLm1lcmdlKGUseyQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGUucmVy
        ZW5kZXIoKSxFbWJlci4kKCl9LHJlcmVuZGVyOmZ1bmN0aW9uKCl7dGhyb3cg
        bmV3IEVtYmVyLkVycm9yKCJTb21ldGhpbmcgeW91IGRpZCBjYXVzZWQgYSB2
        aWV3IHRvIHJlLXJlbmRlciBhZnRlciBpdCByZW5kZXJlZCBidXQgYmVmb3Jl
        IGl0IHdhcyBpbnNlcnRlZCBpbnRvIHRoZSBET00uIil9LGFwcGVuZENoaWxk
        OmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1lLmJ1ZmZlcixpPWUuX2NoaWxkVmll
        d3M7cmV0dXJuIHQ9ZS5jcmVhdGVDaGlsZFZpZXcodCxyKSxpLmxlbmd0aHx8
        KGk9ZS5fY2hpbGRWaWV3cz1pLnNsaWNlKCkpLGkucHVzaCh0KSx0LnJlbmRl
        clRvQnVmZmVyKG4pLGUucHJvcGVydHlEaWRDaGFuZ2UoImNoaWxkVmlld3Mi
        KSx0fSxkZXN0cm95RWxlbWVudDpmdW5jdGlvbihlKXtlLmNsZWFyQnVmZmVy
        KCk7dmFyIHQ9ZS5fbm90aWZ5V2lsbERlc3Ryb3lFbGVtZW50KCk7cmV0dXJu
        IHQudHJhbnNpdGlvblRvKCJwcmVSZW5kZXIiLCExKSxlfSxlbXB0eTpmdW5j
        dGlvbigpe30scmVuZGVyVG9CdWZmZXJJZk5lZWRlZDpmdW5jdGlvbigpe3Jl
        dHVybiExfSxpbnNlcnRFbGVtZW50OmZ1bmN0aW9uKCl7dGhyb3ciWW91IGNh
        bid0IGluc2VydCBhbiBlbGVtZW50IHRoYXQgaGFzIGFscmVhZHkgYmVlbiBy
        ZW5kZXJlZCJ9LHNldEVsZW1lbnQ6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gbnVs
        bD09PXQ/ZS50cmFuc2l0aW9uVG8oInByZVJlbmRlciIpOihlLmNsZWFyQnVm
        ZmVyKCksZS50cmFuc2l0aW9uVG8oImhhc0VsZW1lbnQiKSksdH0saW52b2tl
        T2JzZXJ2ZXI6ZnVuY3Rpb24oZSx0KXt0LmNhbGwoZSl9fSl9KCksZnVuY3Rp
        b24oKXt2YXIgZT1FbWJlci5nZXQsdD1FbWJlci5zZXQscj1FbWJlci5WaWV3
        LnN0YXRlcy5oYXNFbGVtZW50PUVtYmVyLmNyZWF0ZShFbWJlci5WaWV3LnN0
        YXRlcy5fZGVmYXVsdCk7RW1iZXIubWVyZ2Uocix7JDpmdW5jdGlvbih0LHIp
        e3ZhciBuPWUodCwiZWxlbWVudCIpO3JldHVybiByP0VtYmVyLiQocixuKTpF
        bWJlci4kKG4pfSxnZXRFbGVtZW50OmZ1bmN0aW9uKHQpe3ZhciByPWUodCwi
        cGFyZW50VmlldyIpO3JldHVybiByJiYocj1lKHIsImVsZW1lbnQiKSkscj90
        LmZpbmRFbGVtZW50SW5QYXJlbnRFbGVtZW50KHIpOkVtYmVyLiQoIiMiK2Uo
        dCwiZWxlbWVudElkIikpWzBdfSxzZXRFbGVtZW50OmZ1bmN0aW9uKGUsdCl7
        aWYobnVsbCE9PXQpdGhyb3ciWW91IGNhbm5vdCBzZXQgYW4gZWxlbWVudCB0
        byBhIG5vbi1udWxsIHZhbHVlIHdoZW4gdGhlIGVsZW1lbnQgaXMgYWxyZWFk
        eSBpbiB0aGUgRE9NLiI7cmV0dXJuIGUudHJhbnNpdGlvblRvKCJwcmVSZW5k
        ZXIiKSx0fSxyZXJlbmRlcjpmdW5jdGlvbihlKXtyZXR1cm4gZS50cmlnZ2Vy
        UmVjdXJzaXZlbHkoIndpbGxDbGVhclJlbmRlciIpLGUuY2xlYXJSZW5kZXJl
        ZENoaWxkcmVuKCksZS5kb21NYW5hZ2VyLnJlcGxhY2UoZSksZX0sZGVzdHJv
        eUVsZW1lbnQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuX25vdGlmeVdpbGxEZXN0
        cm95RWxlbWVudCgpLGUuZG9tTWFuYWdlci5yZW1vdmUoZSksdChlLCJlbGVt
        ZW50IixudWxsKSxlLl9zY2hlZHVsZWRJbnNlcnQmJihFbWJlci5ydW4uY2Fu
        Y2VsKGUuX3NjaGVkdWxlZEluc2VydCksZS5fc2NoZWR1bGVkSW5zZXJ0PW51
        bGwpLGV9LGVtcHR5OmZ1bmN0aW9uKGUpe3ZhciB0LHIsbj1lLl9jaGlsZFZp
        ZXdzO2lmKG4pZm9yKHQ9bi5sZW5ndGgscj0wO3Q+cjtyKyspbltyXS5fbm90
        aWZ5V2lsbERlc3Ryb3lFbGVtZW50KCk7ZS5kb21NYW5hZ2VyLmVtcHR5KGUp
        fSxoYW5kbGVFdmVudDpmdW5jdGlvbihlLHQscil7cmV0dXJuIGUuaGFzKHQp
        P2UudHJpZ2dlcih0LHIpOiEwfSxpbnZva2VPYnNlcnZlcjpmdW5jdGlvbihl
        LHQpe3QuY2FsbChlKX19KX0oKSxmdW5jdGlvbigpe3ZhciBlPUVtYmVyLlZp
        ZXcuc3RhdGVzLmhhc0VsZW1lbnQsdD1FbWJlci5WaWV3LnN0YXRlcy5pbkRP
        TT1FbWJlci5jcmVhdGUoZSk7RW1iZXIubWVyZ2UodCx7ZW50ZXI6ZnVuY3Rp
        b24oZSl7ZS5pc1ZpcnR1YWx8fChFbWJlci5WaWV3LnZpZXdzW2UuZWxlbWVu
        dElkXT1lKSxlLmFkZEJlZm9yZU9ic2VydmVyKCJlbGVtZW50SWQiLGZ1bmN0
        aW9uKCl7dGhyb3cgbmV3IEVtYmVyLkVycm9yKCJDaGFuZ2luZyBhIHZpZXcn
        cyBlbGVtZW50SWQgYWZ0ZXIgY3JlYXRpb24gaXMgbm90IGFsbG93ZWQiKX0p
        fSxleGl0OmZ1bmN0aW9uKGUpe3RoaXMuaXNWaXJ0dWFsfHxkZWxldGUgRW1i
        ZXIuVmlldy52aWV3c1tlLmVsZW1lbnRJZF19LGluc2VydEVsZW1lbnQ6ZnVu
        Y3Rpb24oKXt0aHJvdyJZb3UgY2FuJ3QgaW5zZXJ0IGFuIGVsZW1lbnQgaW50
        byB0aGUgRE9NIHRoYXQgaGFzIGFscmVhZHkgYmVlbiBpbnNlcnRlZCJ9fSl9
        KCksZnVuY3Rpb24oKXt2YXIgZT0iWW91IGNhbid0IGNhbGwgJUAgb24gYSB2
        aWV3IGJlaW5nIGRlc3Ryb3llZCIsdD1FbWJlci5TdHJpbmcuZm10LHI9RW1i
        ZXIuVmlldy5zdGF0ZXMuZGVzdHJveWluZz1FbWJlci5jcmVhdGUoRW1iZXIu
        Vmlldy5zdGF0ZXMuX2RlZmF1bHQpO0VtYmVyLm1lcmdlKHIse2FwcGVuZENo
        aWxkOmZ1bmN0aW9uKCl7dGhyb3cgdChlLFsiYXBwZW5kQ2hpbGQiXSl9LHJl
        cmVuZGVyOmZ1bmN0aW9uKCl7dGhyb3cgdChlLFsicmVyZW5kZXIiXSl9LGRl
        c3Ryb3lFbGVtZW50OmZ1bmN0aW9uKCl7dGhyb3cgdChlLFsiZGVzdHJveUVs
        ZW1lbnQiXSl9LGVtcHR5OmZ1bmN0aW9uKCl7dGhyb3cgdChlLFsiZW1wdHki
        XSl9LHNldEVsZW1lbnQ6ZnVuY3Rpb24oKXt0aHJvdyB0KGUsWyJzZXQoJ2Vs
        ZW1lbnQnLCAuLi4pIl0pfSxyZW5kZXJUb0J1ZmZlcklmTmVlZGVkOmZ1bmN0
        aW9uKCl7cmV0dXJuITF9LGluc2VydEVsZW1lbnQ6RW1iZXIuS30pfSgpLGZ1
        bmN0aW9uKCl7RW1iZXIuVmlldy5jbG9uZVN0YXRlcz1mdW5jdGlvbihlKXt2
        YXIgdD17fTt0Ll9kZWZhdWx0PXt9LHQucHJlUmVuZGVyPUVtYmVyLmNyZWF0
        ZSh0Ll9kZWZhdWx0KSx0LmRlc3Ryb3lpbmc9RW1iZXIuY3JlYXRlKHQuX2Rl
        ZmF1bHQpLHQuaW5CdWZmZXI9RW1iZXIuY3JlYXRlKHQuX2RlZmF1bHQpLHQu
        aGFzRWxlbWVudD1FbWJlci5jcmVhdGUodC5fZGVmYXVsdCksdC5pbkRPTT1F
        bWJlci5jcmVhdGUodC5oYXNFbGVtZW50KTtmb3IodmFyIHIgaW4gZSllLmhh
        c093blByb3BlcnR5KHIpJiZFbWJlci5tZXJnZSh0W3JdLGVbcl0pO3JldHVy
        biB0fX0oKSxmdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0LHIsbil7dC50cmln
        Z2VyUmVjdXJzaXZlbHkoIndpbGxJbnNlcnRFbGVtZW50Iikscj9yLmRvbU1h
        bmFnZXIuYWZ0ZXIocixuLnN0cmluZygpKTplLmRvbU1hbmFnZXIucHJlcGVu
        ZChlLG4uc3RyaW5nKCkpLHQuZm9yRWFjaChmdW5jdGlvbihlKXtlLnRyYW5z
        aXRpb25UbygiaW5ET00iKSxlLnByb3BlcnR5RGlkQ2hhbmdlKCJlbGVtZW50
        IiksZS50cmlnZ2VyUmVjdXJzaXZlbHkoImRpZEluc2VydEVsZW1lbnQiKX0p
        fXZhciB0PUVtYmVyLlZpZXcuY2xvbmVTdGF0ZXMoRW1iZXIuVmlldy5zdGF0
        ZXMpLHI9RW1iZXIuZ2V0LG49RW1iZXIuc2V0LGk9RW1iZXIuRW51bWVyYWJs
        ZVV0aWxzLmZvckVhY2gsbz1FbWJlci5fVmlld0NvbGxlY3Rpb247RW1iZXIu
        Q29udGFpbmVyVmlldz1FbWJlci5WaWV3LmV4dGVuZChFbWJlci5NdXRhYmxl
        QXJyYXkse3N0YXRlczp0LGluaXQ6ZnVuY3Rpb24oKXt0aGlzLl9zdXBlcigp
        O3ZhciBlPXIodGhpcywiY2hpbGRWaWV3cyIpO0VtYmVyLmRlZmluZVByb3Bl
        cnR5KHRoaXMsImNoaWxkVmlld3MiLEVtYmVyLlZpZXcuY2hpbGRWaWV3c1By
        b3BlcnR5KTt2YXIgdD10aGlzLl9jaGlsZFZpZXdzO2koZSxmdW5jdGlvbihl
        LGkpe3ZhciBvOyJzdHJpbmciPT10eXBlb2YgZT8obz1yKHRoaXMsZSksbz10
        aGlzLmNyZWF0ZUNoaWxkVmlldyhvKSxuKHRoaXMsZSxvKSk6bz10aGlzLmNy
        ZWF0ZUNoaWxkVmlldyhlKSx0W2ldPW99LHRoaXMpO3ZhciBvPXIodGhpcywi
        Y3VycmVudFZpZXciKTtvJiYodC5sZW5ndGh8fCh0PXRoaXMuX2NoaWxkVmll
        d3M9dGhpcy5fY2hpbGRWaWV3cy5zbGljZSgpKSx0LnB1c2godGhpcy5jcmVh
        dGVDaGlsZFZpZXcobykpKX0scmVwbGFjZTpmdW5jdGlvbihlLHQsbil7dmFy
        IGk9bj9yKG4sImxlbmd0aCIpOjA7aWYodGhpcy5hcnJheUNvbnRlbnRXaWxs
        Q2hhbmdlKGUsdCxpKSx0aGlzLmNoaWxkVmlld3NXaWxsQ2hhbmdlKHRoaXMu
        X2NoaWxkVmlld3MsZSx0KSwwPT09aSl0aGlzLl9jaGlsZFZpZXdzLnNwbGlj
        ZShlLHQpO2Vsc2V7dmFyIG89W2UsdF0uY29uY2F0KG4pO24ubGVuZ3RoJiYh
        dGhpcy5fY2hpbGRWaWV3cy5sZW5ndGgmJih0aGlzLl9jaGlsZFZpZXdzPXRo
        aXMuX2NoaWxkVmlld3Muc2xpY2UoKSksdGhpcy5fY2hpbGRWaWV3cy5zcGxp
        Y2UuYXBwbHkodGhpcy5fY2hpbGRWaWV3cyxvKX1yZXR1cm4gdGhpcy5hcnJh
        eUNvbnRlbnREaWRDaGFuZ2UoZSx0LGkpLHRoaXMuY2hpbGRWaWV3c0RpZENo
        YW5nZSh0aGlzLl9jaGlsZFZpZXdzLGUsdCxpKSx0aGlzfSxvYmplY3RBdDpm
        dW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fY2hpbGRWaWV3c1tlXX0sbGVuZ3Ro
        OkVtYmVyLmNvbXB1dGVkKGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NoaWxk
        Vmlld3MubGVuZ3RofSkudm9sYXRpbGUoKSxyZW5kZXI6ZnVuY3Rpb24oZSl7
        dGhpcy5mb3JFYWNoQ2hpbGRWaWV3KGZ1bmN0aW9uKHQpe3QucmVuZGVyVG9C
        dWZmZXIoZSl9KX0saW5zdHJ1bWVudE5hbWU6ImNvbnRhaW5lciIsY2hpbGRW
        aWV3c1dpbGxDaGFuZ2U6ZnVuY3Rpb24oZSx0LHIpe2lmKHRoaXMucHJvcGVy
        dHlXaWxsQ2hhbmdlKCJjaGlsZFZpZXdzIikscj4wKXt2YXIgbj1lLnNsaWNl
        KHQsdCtyKTt0aGlzLmN1cnJlbnRTdGF0ZS5jaGlsZFZpZXdzV2lsbENoYW5n
        ZSh0aGlzLGUsdCxyKSx0aGlzLmluaXRpYWxpemVWaWV3cyhuLG51bGwsbnVs
        bCl9fSxyZW1vdmVDaGlsZDpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5yZW1v
        dmVPYmplY3QoZSksdGhpc30sY2hpbGRWaWV3c0RpZENoYW5nZTpmdW5jdGlv
        bihlLHQsbixpKXtpZihpPjApe3ZhciBvPWUuc2xpY2UodCx0K2kpO3RoaXMu
        aW5pdGlhbGl6ZVZpZXdzKG8sdGhpcyxyKHRoaXMsInRlbXBsYXRlRGF0YSIp
        KSx0aGlzLmN1cnJlbnRTdGF0ZS5jaGlsZFZpZXdzRGlkQ2hhbmdlKHRoaXMs
        ZSx0LGkpfXRoaXMucHJvcGVydHlEaWRDaGFuZ2UoImNoaWxkVmlld3MiKX0s
        aW5pdGlhbGl6ZVZpZXdzOmZ1bmN0aW9uKGUsdCxvKXtpKGUsZnVuY3Rpb24o
        ZSl7bihlLCJfcGFyZW50VmlldyIsdCksIWUuY29udGFpbmVyJiZ0JiZuKGUs
        ImNvbnRhaW5lciIsdC5jb250YWluZXIpLHIoZSwidGVtcGxhdGVEYXRhIil8
        fG4oZSwidGVtcGxhdGVEYXRhIixvKX0pfSxjdXJyZW50VmlldzpudWxsLF9j
        dXJyZW50Vmlld1dpbGxDaGFuZ2U6RW1iZXIuYmVmb3JlT2JzZXJ2ZXIoImN1
        cnJlbnRWaWV3IixmdW5jdGlvbigpe3ZhciBlPXIodGhpcywiY3VycmVudFZp
        ZXciKTtlJiZlLmRlc3Ryb3koKX0pLF9jdXJyZW50Vmlld0RpZENoYW5nZTpF
        bWJlci5vYnNlcnZlcigiY3VycmVudFZpZXciLGZ1bmN0aW9uKCl7dmFyIGU9
        cih0aGlzLCJjdXJyZW50VmlldyIpO2UmJnRoaXMucHVzaE9iamVjdChlKX0p
        LF9lbnN1cmVDaGlsZHJlbkFyZUluRE9NOmZ1bmN0aW9uKCl7dGhpcy5jdXJy
        ZW50U3RhdGUuZW5zdXJlQ2hpbGRyZW5BcmVJbkRPTSh0aGlzKX19KSxFbWJl
        ci5tZXJnZSh0Ll9kZWZhdWx0LHtjaGlsZFZpZXdzV2lsbENoYW5nZTpFbWJl
        ci5LLGNoaWxkVmlld3NEaWRDaGFuZ2U6RW1iZXIuSyxlbnN1cmVDaGlsZHJl
        bkFyZUluRE9NOkVtYmVyLkt9KSxFbWJlci5tZXJnZSh0LmluQnVmZmVyLHtj
        aGlsZFZpZXdzRGlkQ2hhbmdlOmZ1bmN0aW9uKCl7dGhyb3cgbmV3IEVtYmVy
        LkVycm9yKCJZb3UgY2Fubm90IG1vZGlmeSBjaGlsZCB2aWV3cyB3aGlsZSBp
        biB0aGUgaW5CdWZmZXIgc3RhdGUiKX19KSxFbWJlci5tZXJnZSh0Lmhhc0Vs
        ZW1lbnQse2NoaWxkVmlld3NXaWxsQ2hhbmdlOmZ1bmN0aW9uKGUsdCxyLG4p
        e2Zvcih2YXIgaT1yO3Irbj5pO2krKyl0W2ldLnJlbW92ZSgpfSxjaGlsZFZp
        ZXdzRGlkQ2hhbmdlOmZ1bmN0aW9uKGUpe0VtYmVyLnJ1bi5zY2hlZHVsZU9u
        Y2UoInJlbmRlciIsZSwiX2Vuc3VyZUNoaWxkcmVuQXJlSW5ET00iKX0sZW5z
        dXJlQ2hpbGRyZW5BcmVJbkRPTTpmdW5jdGlvbih0KXt2YXIgcixuLGksYSxz
        LHU9dC5fY2hpbGRWaWV3cyxsPW5ldyBvO2ZvcihyPTAsbj11Lmxlbmd0aDtu
        PnI7cisrKWk9dVtyXSxzfHwocz1FbWJlci5SZW5kZXJCdWZmZXIoKSxzLl9o
        YXNFbGVtZW50PSExKSxpLnJlbmRlclRvQnVmZmVySWZOZWVkZWQocyk/bC5w
        dXNoKGkpOmwubGVuZ3RoPyhlKHQsbCxhLHMpLHM9bnVsbCxhPWksbC5jbGVh
        cigpKTphPWk7bC5sZW5ndGgmJmUodCxsLGEscyl9fSl9KCksZnVuY3Rpb24o
        KXt7dmFyIGU9RW1iZXIuZ2V0LHQ9RW1iZXIuc2V0O0VtYmVyLlN0cmluZy5m
        bXR9RW1iZXIuQ29sbGVjdGlvblZpZXc9RW1iZXIuQ29udGFpbmVyVmlldy5l
        eHRlbmQoe2NvbnRlbnQ6bnVsbCxlbXB0eVZpZXdDbGFzczpFbWJlci5WaWV3
        LGVtcHR5VmlldzpudWxsLGl0ZW1WaWV3Q2xhc3M6RW1iZXIuVmlldyxpbml0
        OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5fc3VwZXIoKTtyZXR1cm4gdGhpcy5f
        Y29udGVudERpZENoYW5nZSgpLGV9LF9jb250ZW50V2lsbENoYW5nZTpFbWJl
        ci5iZWZvcmVPYnNlcnZlcigiY29udGVudCIsZnVuY3Rpb24oKXt2YXIgdD10
        aGlzLmdldCgiY29udGVudCIpO3QmJnQucmVtb3ZlQXJyYXlPYnNlcnZlcih0
        aGlzKTt2YXIgcj10P2UodCwibGVuZ3RoIik6MDt0aGlzLmFycmF5V2lsbENo
        YW5nZSh0LDAscil9KSxfY29udGVudERpZENoYW5nZTpFbWJlci5vYnNlcnZl
        cigiY29udGVudCIsZnVuY3Rpb24oKXt2YXIgdD1lKHRoaXMsImNvbnRlbnQi
        KTt0JiYodGhpcy5fYXNzZXJ0QXJyYXlMaWtlKHQpLHQuYWRkQXJyYXlPYnNl
        cnZlcih0aGlzKSk7dmFyIHI9dD9lKHQsImxlbmd0aCIpOjA7dGhpcy5hcnJh
        eURpZENoYW5nZSh0LDAsbnVsbCxyKX0pLF9hc3NlcnRBcnJheUxpa2U6ZnVu
        Y3Rpb24oKXt9LGRlc3Ryb3k6ZnVuY3Rpb24oKXtpZih0aGlzLl9zdXBlcigp
        KXt2YXIgdD1lKHRoaXMsImNvbnRlbnQiKTtyZXR1cm4gdCYmdC5yZW1vdmVB
        cnJheU9ic2VydmVyKHRoaXMpLHRoaXMuX2NyZWF0ZWRFbXB0eVZpZXcmJnRo
        aXMuX2NyZWF0ZWRFbXB0eVZpZXcuZGVzdHJveSgpLHRoaXN9fSxhcnJheVdp
        bGxDaGFuZ2U6ZnVuY3Rpb24odCxyLG4pe3ZhciBpPWUodGhpcywiZW1wdHlW
        aWV3Iik7aSYmaSBpbnN0YW5jZW9mIEVtYmVyLlZpZXcmJmkucmVtb3ZlRnJv
        bVBhcmVudCgpO3ZhciBvLGEscyx1PXRoaXMuX2NoaWxkVmlld3M7cz10aGlz
        Ll9jaGlsZFZpZXdzLmxlbmd0aDt2YXIgbD1uPT09cztmb3IobCYmKHRoaXMu
        Y3VycmVudFN0YXRlLmVtcHR5KHRoaXMpLHRoaXMuaW52b2tlUmVjdXJzaXZl
        bHkoZnVuY3Rpb24oZSl7ZS5yZW1vdmVkRnJvbURPTT0hMH0sITEpKSxhPXIr
        bi0xO2E+PXI7YS0tKW89dVthXSxvLmRlc3Ryb3koKX0sYXJyYXlEaWRDaGFu
        Z2U6ZnVuY3Rpb24ocixuLGksbyl7dmFyIGEscyx1LGwsYyxoLG09W107aWYo
        bD1yP2UociwibGVuZ3RoIik6MClmb3IoYz1lKHRoaXMsIml0ZW1WaWV3Q2xh
        c3MiKSwic3RyaW5nIj09dHlwZW9mIGMmJihjPWUoYyl8fGMpLHU9bjtuK28+
        dTt1Kyspcz1yLm9iamVjdEF0KHUpLGE9dGhpcy5jcmVhdGVDaGlsZFZpZXco
        Yyx7Y29udGVudDpzLGNvbnRlbnRJbmRleDp1fSksbS5wdXNoKGEpO2Vsc2V7
        aWYoaD1lKHRoaXMsImVtcHR5VmlldyIpLCFoKXJldHVybjsic3RyaW5nIj09
        dHlwZW9mIGgmJihoPWUoaCl8fGgpLGg9dGhpcy5jcmVhdGVDaGlsZFZpZXco
        aCksbS5wdXNoKGgpLHQodGhpcywiZW1wdHlWaWV3IixoKSxFbWJlci5Db3Jl
        Vmlldy5kZXRlY3QoaCkmJih0aGlzLl9jcmVhdGVkRW1wdHlWaWV3PWgpfXRo
        aXMucmVwbGFjZShuLDAsbSl9LGNyZWF0ZUNoaWxkVmlldzpmdW5jdGlvbihy
        LG4pe3I9dGhpcy5fc3VwZXIocixuKTt2YXIgaT1lKHIsInRhZ05hbWUiKTty
        ZXR1cm4obnVsbD09PWl8fHZvaWQgMD09PWkpJiYoaT1FbWJlci5Db2xsZWN0
        aW9uVmlldy5DT05UQUlORVJfTUFQW2UodGhpcywidGFnTmFtZSIpXSx0KHIs
        InRhZ05hbWUiLGkpKSxyfX0pLEVtYmVyLkNvbGxlY3Rpb25WaWV3LkNPTlRB
        SU5FUl9NQVA9e3VsOiJsaSIsb2w6ImxpIix0YWJsZToidHIiLHRoZWFkOiJ0
        ciIsdGJvZHk6InRyIix0Zm9vdDoidHIiLHRyOiJ0ZCIsc2VsZWN0OiJvcHRp
        b24ifX0oKSxmdW5jdGlvbigpe0VtYmVyLkNvbXBvbmVudFRlbXBsYXRlRGVw
        cmVjYXRpb249RW1iZXIuTWl4aW4uY3JlYXRlKHt3aWxsTWVyZ2VNaXhpbjpm
        dW5jdGlvbihlKXt0aGlzLl9zdXBlci5hcHBseSh0aGlzLGFyZ3VtZW50cyk7
        dmFyIHQscixuPWUubGF5b3V0TmFtZXx8ZS5sYXlvdXQ7ZS50ZW1wbGF0ZU5h
        bWUmJiFuJiYodD0idGVtcGxhdGVOYW1lIixyPSJsYXlvdXROYW1lIixlLmxh
        eW91dE5hbWU9ZS50ZW1wbGF0ZU5hbWUsZGVsZXRlIGUudGVtcGxhdGVOYW1l
        KSxlLnRlbXBsYXRlJiYhbiYmKHQ9InRlbXBsYXRlIixyPSJsYXlvdXQiLGUu
        bGF5b3V0PWUudGVtcGxhdGUsZGVsZXRlIGUudGVtcGxhdGUpfX0pfSgpLGZ1
        bmN0aW9uKCl7dmFyIGU9RW1iZXIuZ2V0LHQ9RW1iZXIuc2V0LHI9KEVtYmVy
        LmlzTm9uZSxBcnJheS5wcm90b3R5cGUuc2xpY2UpO0VtYmVyLkNvbXBvbmVu
        dD1FbWJlci5WaWV3LmV4dGVuZChFbWJlci5UYXJnZXRBY3Rpb25TdXBwb3J0
        LEVtYmVyLkNvbXBvbmVudFRlbXBsYXRlRGVwcmVjYXRpb24se2luaXQ6ZnVu
        Y3Rpb24oKXt0aGlzLl9zdXBlcigpLHQodGhpcywiY29udGV4dCIsdGhpcyks
        dCh0aGlzLCJjb250cm9sbGVyIix0aGlzKX0sZGVmYXVsdExheW91dDpmdW5j
        dGlvbihlLHQpe0VtYmVyLkhhbmRsZWJhcnMuaGVscGVycy55aWVsZC5jYWxs
        KGUsdCl9LHRlbXBsYXRlOkVtYmVyLmNvbXB1dGVkKGZ1bmN0aW9uKHQscil7
        aWYodm9pZCAwIT09cilyZXR1cm4gcjt2YXIgbj1lKHRoaXMsInRlbXBsYXRl
        TmFtZSIpLGk9dGhpcy50ZW1wbGF0ZUZvck5hbWUobiwidGVtcGxhdGUiKTty
        ZXR1cm4gaXx8ZSh0aGlzLCJkZWZhdWx0VGVtcGxhdGUiKX0pLnByb3BlcnR5
        KCJ0ZW1wbGF0ZU5hbWUiKSx0ZW1wbGF0ZU5hbWU6bnVsbCxjbG9uZUtleXdv
        cmRzOmZ1bmN0aW9uKCl7cmV0dXJue3ZpZXc6dGhpcyxjb250cm9sbGVyOnRo
        aXN9fSxfeWllbGQ6ZnVuY3Rpb24odCxyKXt2YXIgbj1yLmRhdGEudmlldyxp
        PXRoaXMuX3BhcmVudFZpZXcsbz1lKHRoaXMsInRlbXBsYXRlIik7byYmbi5h
        cHBlbmRDaGlsZChFbWJlci5WaWV3LHtpc1ZpcnR1YWw6ITAsdGFnTmFtZToi
        IixfY29udGV4dFZpZXc6aSx0ZW1wbGF0ZTpvLGNvbnRleHQ6ZShpLCJjb250
        ZXh0IiksY29udHJvbGxlcjplKGksImNvbnRyb2xsZXIiKSx0ZW1wbGF0ZURh
        dGE6e2tleXdvcmRzOmkuY2xvbmVLZXl3b3JkcygpfX0pfSx0YXJnZXRPYmpl
        Y3Q6RW1iZXIuY29tcHV0ZWQoZnVuY3Rpb24oKXt2YXIgdD1lKHRoaXMsIl9w
        YXJlbnRWaWV3Iik7cmV0dXJuIHQ/ZSh0LCJjb250cm9sbGVyIik6bnVsbH0p
        LnByb3BlcnR5KCJfcGFyZW50VmlldyIpLHNlbmRBY3Rpb246ZnVuY3Rpb24o
        dCl7dmFyIG4saT1yLmNhbGwoYXJndW1lbnRzLDEpO249dm9pZCAwPT09dD9l
        KHRoaXMsImFjdGlvbiIpOmUodGhpcyx0KSx2b2lkIDAhPT1uJiZ0aGlzLnRy
        aWdnZXJBY3Rpb24oe2FjdGlvbjpuLGFjdGlvbkNvbnRleHQ6aX0pfX0pfSgp
        LGZ1bmN0aW9uKCl7RW1iZXIuVmlld1RhcmdldEFjdGlvblN1cHBvcnQ9RW1i
        ZXIuTWl4aW4uY3JlYXRlKEVtYmVyLlRhcmdldEFjdGlvblN1cHBvcnQse3Rh
        cmdldDpFbWJlci5jb21wdXRlZC5hbGlhcygiY29udHJvbGxlciIpLGFjdGlv
        bkNvbnRleHQ6RW1iZXIuY29tcHV0ZWQuYWxpYXMoImNvbnRleHQiKX0pfSgp
        LGZ1bmN0aW9uKCl7ZSgibWV0YW1vcnBoIixbXSxmdW5jdGlvbigpeyJ1c2Ug
        c3RyaWN0IjsvLyBDb3B5cmlnaHQ6IMKpMjAxNCBUaWxkZSwgSW5jLiBBbGwg
        cmlnaHRzIHJlc2VydmVkLgp2YXIgZT1mdW5jdGlvbigpe30sdD0wLHI9ZnVu
        Y3Rpb24oKXtyZXR1cm4idW5kZWZpbmVkIiE9dHlwZW9mIE1ldGFtb3JwaEVO
        Vj9NZXRhbW9ycGhFTlYuRElTQUJMRV9SQU5HRV9BUEk6InVuZGVmaW5lZCIh
        PT1FTlY/RU5WLkRJU0FCTEVfUkFOR0VfQVBJOiExfSgpLG49IXImJiJ1bmRl
        ZmluZWQiIT10eXBlb2YgZG9jdW1lbnQmJiJjcmVhdGVSYW5nZSJpbiBkb2N1
        bWVudCYmInVuZGVmaW5lZCIhPXR5cGVvZiBSYW5nZSYmUmFuZ2UucHJvdG90
        eXBlLmNyZWF0ZUNvbnRleHR1YWxGcmFnbWVudCxpPSJ1bmRlZmluZWQiIT10
        eXBlb2YgZG9jdW1lbnQmJmZ1bmN0aW9uKCl7dmFyIGU9ZG9jdW1lbnQuY3Jl
        YXRlRWxlbWVudCgiZGl2Iik7cmV0dXJuIGUuaW5uZXJIVE1MPSI8ZGl2Pjwv
        ZGl2PiIsZS5maXJzdENoaWxkLmlubmVySFRNTD0iPHNjcmlwdD48L3Njcmlw
        dD4iLCIiPT09ZS5maXJzdENoaWxkLmlubmVySFRNTH0oKSxvPWRvY3VtZW50
        JiZmdW5jdGlvbigpe3ZhciBlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRp
        diIpO3JldHVybiBlLmlubmVySFRNTD0iVGVzdDogPHNjcmlwdCB0eXBlPSd0
        ZXh0L3gtcGxhY2Vob2xkZXInPjwvc2NyaXB0PlZhbHVlIiwiVGVzdDoiPT09
        ZS5jaGlsZE5vZGVzWzBdLm5vZGVWYWx1ZSYmIiBWYWx1ZSI9PT1lLmNoaWxk
        Tm9kZXNbMl0ubm9kZVZhbHVlfSgpLGE9ZnVuY3Rpb24ocil7dmFyIG47bj10
        aGlzIGluc3RhbmNlb2YgYT90aGlzOm5ldyBlLG4uaW5uZXJIVE1MPXI7dmFy
        IGk9Im1ldGFtb3JwaC0iK3QrKztyZXR1cm4gbi5zdGFydD1pKyItc3RhcnQi
        LG4uZW5kPWkrIi1lbmQiLG59O2UucHJvdG90eXBlPWEucHJvdG90eXBlO3Zh
        ciBzLHUsbCxjLGgsbSxmLHAsZDtpZihjPWZ1bmN0aW9uKCl7cmV0dXJuIHRo
        aXMuc3RhcnRUYWcoKSt0aGlzLmlubmVySFRNTCt0aGlzLmVuZFRhZygpfSxw
        PWZ1bmN0aW9uKCl7cmV0dXJuIjxzY3JpcHQgaWQ9JyIrdGhpcy5zdGFydCsi
        JyB0eXBlPSd0ZXh0L3gtcGxhY2Vob2xkZXInPjwvc2NyaXB0PiJ9LGQ9ZnVu
        Y3Rpb24oKXtyZXR1cm4iPHNjcmlwdCBpZD0nIit0aGlzLmVuZCsiJyB0eXBl
        PSd0ZXh0L3gtcGxhY2Vob2xkZXInPjwvc2NyaXB0PiJ9LG4pcz1mdW5jdGlv
        bihlLHQpe3ZhciByPWRvY3VtZW50LmNyZWF0ZVJhbmdlKCksbj1kb2N1bWVu
        dC5nZXRFbGVtZW50QnlJZChlLnN0YXJ0KSxpPWRvY3VtZW50LmdldEVsZW1l
        bnRCeUlkKGUuZW5kKTtyZXR1cm4gdD8oci5zZXRTdGFydEJlZm9yZShuKSxy
        LnNldEVuZEFmdGVyKGkpKTooci5zZXRTdGFydEFmdGVyKG4pLHIuc2V0RW5k
        QmVmb3JlKGkpKSxyfSx1PWZ1bmN0aW9uKGUsdCl7dmFyIHI9cyh0aGlzLHQp
        O3IuZGVsZXRlQ29udGVudHMoKTt2YXIgbj1yLmNyZWF0ZUNvbnRleHR1YWxG
        cmFnbWVudChlKTtyLmluc2VydE5vZGUobil9LGw9ZnVuY3Rpb24oKXt2YXIg
        ZT1zKHRoaXMsITApO2UuZGVsZXRlQ29udGVudHMoKX0saD1mdW5jdGlvbihl
        KXt2YXIgdD1kb2N1bWVudC5jcmVhdGVSYW5nZSgpO3Quc2V0U3RhcnQoZSks
        dC5jb2xsYXBzZSghMSk7dmFyIHI9dC5jcmVhdGVDb250ZXh0dWFsRnJhZ21l
        bnQodGhpcy5vdXRlckhUTUwoKSk7ZS5hcHBlbmRDaGlsZChyKX0sbT1mdW5j
        dGlvbihlKXt2YXIgdD1kb2N1bWVudC5jcmVhdGVSYW5nZSgpLHI9ZG9jdW1l
        bnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5lbmQpO3Quc2V0U3RhcnRBZnRlcihy
        KSx0LnNldEVuZEFmdGVyKHIpO3ZhciBuPXQuY3JlYXRlQ29udGV4dHVhbEZy
        YWdtZW50KGUpO3QuaW5zZXJ0Tm9kZShuKX0sZj1mdW5jdGlvbihlKXt2YXIg
        dD1kb2N1bWVudC5jcmVhdGVSYW5nZSgpLHI9ZG9jdW1lbnQuZ2V0RWxlbWVu
        dEJ5SWQodGhpcy5zdGFydCk7dC5zZXRTdGFydEFmdGVyKHIpLHQuc2V0RW5k
        QWZ0ZXIocik7dmFyIG49dC5jcmVhdGVDb250ZXh0dWFsRnJhZ21lbnQoZSk7
        dC5pbnNlcnROb2RlKG4pfTtlbHNle3ZhciBiPXtzZWxlY3Q6WzEsIjxzZWxl
        Y3QgbXVsdGlwbGU9J211bHRpcGxlJz4iLCI8L3NlbGVjdD4iXSxmaWVsZHNl
        dDpbMSwiPGZpZWxkc2V0PiIsIjwvZmllbGRzZXQ+Il0sdGFibGU6WzEsIjx0
        YWJsZT4iLCI8L3RhYmxlPiJdLHRib2R5OlsyLCI8dGFibGU+PHRib2R5PiIs
        IjwvdGJvZHk+PC90YWJsZT4iXSx0cjpbMywiPHRhYmxlPjx0Ym9keT48dHI+
        IiwiPC90cj48L3Rib2R5PjwvdGFibGU+Il0sY29sZ3JvdXA6WzIsIjx0YWJs
        ZT48dGJvZHk+PC90Ym9keT48Y29sZ3JvdXA+IiwiPC9jb2xncm91cD48L3Rh
        YmxlPiJdLG1hcDpbMSwiPG1hcD4iLCI8L21hcD4iXSxfZGVmYXVsdDpbMCwi
        IiwiIl19LHY9ZnVuY3Rpb24oZSx0KXtpZihlLmdldEF0dHJpYnV0ZSgiaWQi
        KT09PXQpcmV0dXJuIGU7dmFyIHIsbixpLG89ZS5jaGlsZE5vZGVzLmxlbmd0
        aDtmb3Iocj0wO28+cjtyKyspaWYobj1lLmNoaWxkTm9kZXNbcl0saT0xPT09
        bi5ub2RlVHlwZSYmdihuLHQpKXJldHVybiBpfSxFPWZ1bmN0aW9uKGUsdCl7
        dmFyIHI9W107aWYobyYmKHQ9dC5yZXBsYWNlKC8oXHMrKSg8c2NyaXB0IGlk
        PScoW14nXSspJykvZyxmdW5jdGlvbihlLHQsbixpKXtyZXR1cm4gci5wdXNo
        KFtpLHRdKSxufSkpLGUuaW5uZXJIVE1MPXQsci5sZW5ndGg+MCl7dmFyIG4s
        aT1yLmxlbmd0aDtmb3Iobj0wO2k+bjtuKyspe3ZhciBhPXYoZSxyW25dWzBd
        KSxzPWRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHJbbl1bMV0pO2EucGFyZW50
        Tm9kZS5pbnNlcnRCZWZvcmUocyxhKX19fSxnPWZ1bmN0aW9uKGUsdCl7dmFy
        IHI9YltlLnRhZ05hbWUudG9Mb3dlckNhc2UoKV18fGIuX2RlZmF1bHQsbj1y
        WzBdLG89clsxXSxhPXJbMl07aSYmKHQ9IiZzaHk7Iit0KTt2YXIgcz1kb2N1
        bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTtFKHMsbyt0K2EpO2Zvcih2YXIg
        dT0wO24+PXU7dSsrKXM9cy5maXJzdENoaWxkO2lmKGkpe2Zvcih2YXIgbD1z
        OzE9PT1sLm5vZGVUeXBlJiYhbC5ub2RlTmFtZTspbD1sLmZpcnN0Q2hpbGQ7
        Mz09PWwubm9kZVR5cGUmJiLCrSI9PT1sLm5vZGVWYWx1ZS5jaGFyQXQoMCkm
        JihsLm5vZGVWYWx1ZT1sLm5vZGVWYWx1ZS5zbGljZSgxKSl9cmV0dXJuIHN9
        LHk9ZnVuY3Rpb24oZSl7Zm9yKDsiIj09PWUucGFyZW50Tm9kZS50YWdOYW1l
        OyllPWUucGFyZW50Tm9kZTtyZXR1cm4gZX0sdz1mdW5jdGlvbihlLHQpe2Uu
        cGFyZW50Tm9kZSE9PXQucGFyZW50Tm9kZSYmdC5wYXJlbnROb2RlLmluc2Vy
        dEJlZm9yZShlLHQucGFyZW50Tm9kZS5maXJzdENoaWxkKX07dT1mdW5jdGlv
        bihlLHQpe3ZhciByLG4saSxvPXkoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQo
        dGhpcy5zdGFydCkpLGE9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5l
        bmQpLHM9YS5wYXJlbnROb2RlO2Zvcih3KG8sYSkscj1vLm5leHRTaWJsaW5n
        O3I7KXtpZihuPXIubmV4dFNpYmxpbmcsaT1yPT09YSl7aWYoIXQpYnJlYWs7
        YT1yLm5leHRTaWJsaW5nfWlmKHIucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChy
        KSxpKWJyZWFrO3I9bn1mb3Iocj1nKG8ucGFyZW50Tm9kZSxlKSx0JiZvLnBh
        cmVudE5vZGUucmVtb3ZlQ2hpbGQobyk7cjspbj1yLm5leHRTaWJsaW5nLHMu
        aW5zZXJ0QmVmb3JlKHIsYSkscj1ufSxsPWZ1bmN0aW9uKCl7dmFyIGU9eShk
        b2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLnN0YXJ0KSksdD1kb2N1bWVu
        dC5nZXRFbGVtZW50QnlJZCh0aGlzLmVuZCk7dGhpcy5odG1sKCIiKSxlLnBh
        cmVudE5vZGUucmVtb3ZlQ2hpbGQoZSksdC5wYXJlbnROb2RlLnJlbW92ZUNo
        aWxkKHQpfSxoPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdCxyPWcoZSx0aGlzLm91
        dGVySFRNTCgpKTtyOyl0PXIubmV4dFNpYmxpbmcsZS5hcHBlbmRDaGlsZChy
        KSxyPXR9LG09ZnVuY3Rpb24oZSl7dmFyIHQscixuPWRvY3VtZW50LmdldEVs
        ZW1lbnRCeUlkKHRoaXMuZW5kKSxpPW4ubmV4dFNpYmxpbmcsbz1uLnBhcmVu
        dE5vZGU7Zm9yKHI9ZyhvLGUpO3I7KXQ9ci5uZXh0U2libGluZyxvLmluc2Vy
        dEJlZm9yZShyLGkpLHI9dH0sZj1mdW5jdGlvbihlKXt2YXIgdCxyLG49ZG9j
        dW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5zdGFydCksaT1uLnBhcmVudE5v
        ZGU7cj1nKGksZSk7Zm9yKHZhciBvPW4ubmV4dFNpYmxpbmc7cjspdD1yLm5l
        eHRTaWJsaW5nLGkuaW5zZXJ0QmVmb3JlKHIsbykscj10fX1yZXR1cm4gYS5w
        cm90b3R5cGUuaHRtbD1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5jaGVja1Jl
        bW92ZWQoKSx2b2lkIDA9PT1lP3RoaXMuaW5uZXJIVE1MOih1LmNhbGwodGhp
        cyxlKSx0aGlzLmlubmVySFRNTD1lLHZvaWQgMCl9LGEucHJvdG90eXBlLnJl
        cGxhY2VXaXRoPWZ1bmN0aW9uKGUpe3RoaXMuY2hlY2tSZW1vdmVkKCksdS5j
        YWxsKHRoaXMsZSwhMCl9LGEucHJvdG90eXBlLnJlbW92ZT1sLGEucHJvdG90
        eXBlLm91dGVySFRNTD1jLGEucHJvdG90eXBlLmFwcGVuZFRvPWgsYS5wcm90
        b3R5cGUuYWZ0ZXI9bSxhLnByb3RvdHlwZS5wcmVwZW5kPWYsYS5wcm90b3R5
        cGUuc3RhcnRUYWc9cCxhLnByb3RvdHlwZS5lbmRUYWc9ZCxhLnByb3RvdHlw
        ZS5pc1JlbW92ZWQ9ZnVuY3Rpb24oKXt2YXIgZT1kb2N1bWVudC5nZXRFbGVt
        ZW50QnlJZCh0aGlzLnN0YXJ0KSx0PWRvY3VtZW50LmdldEVsZW1lbnRCeUlk
        KHRoaXMuZW5kKTtyZXR1cm4hZXx8IXR9LGEucHJvdG90eXBlLmNoZWNrUmVt
        b3ZlZD1mdW5jdGlvbigpe2lmKHRoaXMuaXNSZW1vdmVkKCkpdGhyb3cgbmV3
        IEVycm9yKCJDYW5ub3QgcGVyZm9ybSBvcGVyYXRpb25zIG9uIGEgTWV0YW1v
        cnBoIHRoYXQgaXMgbm90IGluIHRoZSBET00uIil9LGF9KX0oKSxmdW5jdGlv
        bigpe3ZhciBlPU9iamVjdC5jcmVhdGV8fGZ1bmN0aW9uKGUpe2Z1bmN0aW9u
        IHQoKXt9cmV0dXJuIHQucHJvdG90eXBlPWUsbmV3IHR9LHQ9RW1iZXIuaW1w
        b3J0cyYmRW1iZXIuaW1wb3J0cy5IYW5kbGViYXJzfHx0aGlzJiZ0aGlzLkhh
        bmRsZWJhcnM7dHx8ImZ1bmN0aW9uIiE9dHlwZW9mIHJ8fCh0PXIoImhhbmRs
        ZWJhcnMiKSksRW1iZXIuSGFuZGxlYmFycz1lKHQpLEVtYmVyLkhhbmRsZWJh
        cnMuaGVscGVyPWZ1bmN0aW9uKGUsdCl7RW1iZXIuVmlldy5kZXRlY3QodCk/
        RW1iZXIuSGFuZGxlYmFycy5yZWdpc3RlckhlbHBlcihlLEVtYmVyLkhhbmRs
        ZWJhcnMubWFrZVZpZXdIZWxwZXIodCkpOkVtYmVyLkhhbmRsZWJhcnMucmVn
        aXN0ZXJCb3VuZEhlbHBlci5hcHBseShudWxsLGFyZ3VtZW50cyl9LEVtYmVy
        LkhhbmRsZWJhcnMubWFrZVZpZXdIZWxwZXI9ZnVuY3Rpb24oZSl7cmV0dXJu
        IGZ1bmN0aW9uKHQpe3JldHVybiBFbWJlci5IYW5kbGViYXJzLmhlbHBlcnMu
        dmlldy5jYWxsKHRoaXMsZSx0KX19LEVtYmVyLkhhbmRsZWJhcnMuaGVscGVy
        cz1lKHQuaGVscGVycyksRW1iZXIuSGFuZGxlYmFycy5Db21waWxlcj1mdW5j
        dGlvbigpe30sdC5Db21waWxlciYmKEVtYmVyLkhhbmRsZWJhcnMuQ29tcGls
        ZXIucHJvdG90eXBlPWUodC5Db21waWxlci5wcm90b3R5cGUpKSxFbWJlci5I
        YW5kbGViYXJzLkNvbXBpbGVyLnByb3RvdHlwZS5jb21waWxlcj1FbWJlci5I
        YW5kbGViYXJzLkNvbXBpbGVyLEVtYmVyLkhhbmRsZWJhcnMuSmF2YVNjcmlw
        dENvbXBpbGVyPWZ1bmN0aW9uKCl7fSx0LkphdmFTY3JpcHRDb21waWxlciYm
        KEVtYmVyLkhhbmRsZWJhcnMuSmF2YVNjcmlwdENvbXBpbGVyLnByb3RvdHlw
        ZT1lKHQuSmF2YVNjcmlwdENvbXBpbGVyLnByb3RvdHlwZSksRW1iZXIuSGFu
        ZGxlYmFycy5KYXZhU2NyaXB0Q29tcGlsZXIucHJvdG90eXBlLmNvbXBpbGVy
        PUVtYmVyLkhhbmRsZWJhcnMuSmF2YVNjcmlwdENvbXBpbGVyKSxFbWJlci5I
        YW5kbGViYXJzLkphdmFTY3JpcHRDb21waWxlci5wcm90b3R5cGUubmFtZXNw
        YWNlPSJFbWJlci5IYW5kbGViYXJzIixFbWJlci5IYW5kbGViYXJzLkphdmFT
        Y3JpcHRDb21waWxlci5wcm90b3R5cGUuaW5pdGlhbGl6ZUJ1ZmZlcj1mdW5j
        dGlvbigpe3JldHVybiInJyJ9LEVtYmVyLkhhbmRsZWJhcnMuSmF2YVNjcmlw
        dENvbXBpbGVyLnByb3RvdHlwZS5hcHBlbmRUb0J1ZmZlcj1mdW5jdGlvbihl
        KXtyZXR1cm4iZGF0YS5idWZmZXIucHVzaCgiK2UrIik7In07dmFyIG49L2hl
        bHBlcnNcLiguKj8pXCkvLGk9L2hlbHBlcnNcWycoLio/KScvLG89LyguKmJs
        b2NrSGVscGVyTWlzc2luZ1wuY2FsbFwoLiopKHN0YWNrWzAtOV0rKSgsLiop
        LztFbWJlci5IYW5kbGViYXJzLkphdmFTY3JpcHRDb21waWxlci5zdHJpbmdp
        ZnlMYXN0QmxvY2tIZWxwZXJNaXNzaW5nSW52b2NhdGlvbj1mdW5jdGlvbihl
        KXt2YXIgdD1lW2UubGVuZ3RoLTFdLHI9KG4uZXhlYyh0KXx8aS5leGVjKHQp
        KVsxXSxhPW8uZXhlYyh0KTtlW2UubGVuZ3RoLTFdPWFbMV0rIiciK3IrIici
        K2FbM119O3ZhciBhPUVtYmVyLkhhbmRsZWJhcnMuSmF2YVNjcmlwdENvbXBp
        bGVyLnN0cmluZ2lmeUxhc3RCbG9ja0hlbHBlck1pc3NpbmdJbnZvY2F0aW9u
        LHM9RW1iZXIuSGFuZGxlYmFycy5KYXZhU2NyaXB0Q29tcGlsZXIucHJvdG90
        eXBlLmJsb2NrVmFsdWU7RW1iZXIuSGFuZGxlYmFycy5KYXZhU2NyaXB0Q29t
        cGlsZXIucHJvdG90eXBlLmJsb2NrVmFsdWU9ZnVuY3Rpb24oKXtzLmFwcGx5
        KHRoaXMsYXJndW1lbnRzKSxhKHRoaXMuc291cmNlKX07dmFyIHU9RW1iZXIu
        SGFuZGxlYmFycy5KYXZhU2NyaXB0Q29tcGlsZXIucHJvdG90eXBlLmFtYmln
        dW91c0Jsb2NrVmFsdWU7RW1iZXIuSGFuZGxlYmFycy5KYXZhU2NyaXB0Q29t
        cGlsZXIucHJvdG90eXBlLmFtYmlndW91c0Jsb2NrVmFsdWU9ZnVuY3Rpb24o
        KXt1LmFwcGx5KHRoaXMsYXJndW1lbnRzKSxhKHRoaXMuc291cmNlKX07dmFy
        IGw9ImVtYmVyIisgK25ldyBEYXRlLGM9MTtFbWJlci5IYW5kbGViYXJzLkNv
        bXBpbGVyLnByb3RvdHlwZS5tdXN0YWNoZT1mdW5jdGlvbihlKXtpZihlLmlz
        SGVscGVyJiYiY29udHJvbCI9PT1lLmlkLnN0cmluZyllLmhhc2g9ZS5oYXNo
        fHxuZXcgdC5BU1QuSGFzaE5vZGUoW10pLGUuaGFzaC5wYWlycy5wdXNoKFsi
        Y29udHJvbElEIixuZXcgdC5BU1QuU3RyaW5nTm9kZShsK2MrKyldKTtlbHNl
        IGlmKGUucGFyYW1zLmxlbmd0aHx8ZS5oYXNoKTtlbHNle3ZhciByPW5ldyB0
        LkFTVC5JZE5vZGUoW3twYXJ0OiJfdHJpYWdlTXVzdGFjaGUifV0pO2UuZXNj
        YXBlZHx8KGUuaGFzaD1lLmhhc2h8fG5ldyB0LkFTVC5IYXNoTm9kZShbXSks
        ZS5oYXNoLnBhaXJzLnB1c2goWyJ1bmVzY2FwZWQiLG5ldyB0LkFTVC5TdHJp
        bmdOb2RlKCJ0cnVlIildKSksZT1uZXcgdC5BU1QuTXVzdGFjaGVOb2RlKFty
        XS5jb25jYXQoW2UuaWRdKSxlLmhhc2gsIWUuZXNjYXBlZCl9cmV0dXJuIHQu
        Q29tcGlsZXIucHJvdG90eXBlLm11c3RhY2hlLmNhbGwodGhpcyxlKX0sRW1i
        ZXIuSGFuZGxlYmFycy5wcmVjb21waWxlPWZ1bmN0aW9uKGUpe3ZhciByPXQu
        cGFyc2UoZSksbj17a25vd25IZWxwZXJzOnthY3Rpb246ITAsdW5ib3VuZDoh
        MCwiYmluZC1hdHRyIjohMCx0ZW1wbGF0ZTohMCx2aWV3OiEwLF90cmlhZ2VN
        dXN0YWNoZTohMH0sZGF0YTohMCxzdHJpbmdQYXJhbXM6ITB9LGk9KG5ldyBF
        bWJlci5IYW5kbGViYXJzLkNvbXBpbGVyKS5jb21waWxlKHIsbik7cmV0dXJu
        KG5ldyBFbWJlci5IYW5kbGViYXJzLkphdmFTY3JpcHRDb21waWxlcikuY29t
        cGlsZShpLG4sdm9pZCAwLCEwKX0sdC5jb21waWxlJiYoRW1iZXIuSGFuZGxl
        YmFycy5jb21waWxlPWZ1bmN0aW9uKGUpe3ZhciByPXQucGFyc2UoZSksbj17
        ZGF0YTohMCxzdHJpbmdQYXJhbXM6ITB9LGk9KG5ldyBFbWJlci5IYW5kbGVi
        YXJzLkNvbXBpbGVyKS5jb21waWxlKHIsbiksbz0obmV3IEVtYmVyLkhhbmRs
        ZWJhcnMuSmF2YVNjcmlwdENvbXBpbGVyKS5jb21waWxlKGksbix2b2lkIDAs
        ITApLGE9RW1iZXIuSGFuZGxlYmFycy50ZW1wbGF0ZShvKTtyZXR1cm4gYS5p
        c01ldGhvZD0hMSxhfSl9KCksZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUscixu
        LGkpe3ZhciBvLGEscyx1LGwsYz1bXSxoPWkuaGFzaCxtPWguYm91bmRPcHRp
        b25zLGY9dC5jYWxsKGkudHlwZXMsMSk7Zm9yKGwgaW4gbSltLmhhc093blBy
        b3BlcnR5KGwpJiYoaFtsXT1FbWJlci5IYW5kbGViYXJzLmdldChlLG1bbF0s
        aSkpO2ZvcihvPTAsYT1uLmxlbmd0aDthPm87KytvKXM9bltvXSx1PWZbb10s
        IklEIj09PXU/Yy5wdXNoKEVtYmVyLkhhbmRsZWJhcnMuZ2V0KHMucm9vdCxz
        LnBhdGgsaSkpOmMucHVzaChzLnBhdGgpO3JldHVybiBjLnB1c2goaSksci5h
        cHBseShlLGMpfXZhciB0PUFycmF5LnByb3RvdHlwZS5zbGljZSxyPUVtYmVy
        LkhhbmRsZWJhcnMudGVtcGxhdGUsbj1FbWJlci5IYW5kbGViYXJzLm5vcm1h
        bGl6ZVBhdGg9ZnVuY3Rpb24oZSx0LHIpe3ZhciBuLGksbz1yJiZyLmtleXdv
        cmRzfHx7fTtyZXR1cm4gbj10LnNwbGl0KCIuIiwxKVswXSxvLmhhc093blBy
        b3BlcnR5KG4pJiYoZT1vW25dLGk9ITAsdD10PT09bj8iIjp0LnN1YnN0cihu
        Lmxlbmd0aCsxKSkse3Jvb3Q6ZSxwYXRoOnQsaXNLZXl3b3JkOml9fSxpPUVt
        YmVyLkhhbmRsZWJhcnMuZ2V0PWZ1bmN0aW9uKGUsdCxyKXt2YXIgaSxvPXIm
        JnIuZGF0YSxhPW4oZSx0LG8pO3JldHVybiBlPWEucm9vdCx0PWEucGF0aCxp
        PUVtYmVyLmdldChlLHQpLHZvaWQgMD09PWkmJmUhPT1FbWJlci5sb29rdXAm
        JkVtYmVyLmlzR2xvYmFsUGF0aCh0KSYmKGk9RW1iZXIuZ2V0KEVtYmVyLmxv
        b2t1cCx0KSksaX07RW1iZXIuSGFuZGxlYmFycy5nZXRFc2NhcGVkPWZ1bmN0
        aW9uKGUsdCxyKXt2YXIgbj1pKGUsdCxyKTtyZXR1cm4gbnVsbD09PW58fHZv
        aWQgMD09PW4/bj0iIjpuIGluc3RhbmNlb2YgSGFuZGxlYmFycy5TYWZlU3Ry
        aW5nfHwobj1TdHJpbmcobikpLHIuaGFzaC51bmVzY2FwZWR8fChuPUhhbmRs
        ZWJhcnMuVXRpbHMuZXNjYXBlRXhwcmVzc2lvbihuKSksbn0sRW1iZXIuSGFu
        ZGxlYmFycy5yZXNvbHZlUGFyYW1zPWZ1bmN0aW9uKGUsdCxyKXtmb3IodmFy
        IG4sbyxhPVtdLHM9ci50eXBlcyx1PTAsbD10Lmxlbmd0aDtsPnU7dSsrKW49
        dFt1XSxvPXNbdV0sIklEIj09PW8/YS5wdXNoKGkoZSxuLHIpKTphLnB1c2go
        bik7cmV0dXJuIGF9LEVtYmVyLkhhbmRsZWJhcnMucmVzb2x2ZUhhc2g9ZnVu
        Y3Rpb24oZSx0LHIpe3ZhciBuLG89e30sYT1yLmhhc2hUeXBlcztmb3IodmFy
        IHMgaW4gdCl0Lmhhc093blByb3BlcnR5KHMpJiYobj1hW3NdLG9bc109IklE
        Ij09PW4/aShlLHRbc10scik6dFtzXSk7cmV0dXJuIG99LEVtYmVyLkhhbmRs
        ZWJhcnMucmVnaXN0ZXJIZWxwZXIoImhlbHBlck1pc3NpbmciLGZ1bmN0aW9u
        KGUpe3ZhciByLG49IiIsaT1hcmd1bWVudHNbYXJndW1lbnRzLmxlbmd0aC0x
        XSxvPUVtYmVyLkhhbmRsZWJhcnMucmVzb2x2ZUhlbHBlcihpLmRhdGEudmll
        dy5jb250YWluZXIsZSk7aWYobylyZXR1cm4gby5hcHBseSh0aGlzLHQuY2Fs
        bChhcmd1bWVudHMsMSkpO3Rocm93IHI9IiVAIEhhbmRsZWJhcnMgZXJyb3I6
        IENvdWxkIG5vdCBmaW5kIHByb3BlcnR5ICclQCcgb24gb2JqZWN0ICVALiIs
        aS5kYXRhJiYobj1pLmRhdGEudmlldyksbmV3IEVtYmVyLkVycm9yKEVtYmVy
        LlN0cmluZy5mbXQocixbbixlLHRoaXNdKSl9KSxFbWJlci5IYW5kbGViYXJz
        LnJlZ2lzdGVySGVscGVyKCJibG9ja0hlbHBlck1pc3NpbmciLGZ1bmN0aW9u
        KGUpe3ZhciByPWFyZ3VtZW50c1thcmd1bWVudHMubGVuZ3RoLTFdLG49RW1i
        ZXIuSGFuZGxlYmFycy5yZXNvbHZlSGVscGVyKHIuZGF0YS52aWV3LmNvbnRh
        aW5lcixlKTtyZXR1cm4gbj9uLmFwcGx5KHRoaXMsdC5jYWxsKGFyZ3VtZW50
        cywxKSk6SGFuZGxlYmFycy5oZWxwZXJzLmhlbHBlck1pc3NpbmcuY2FsbCh0
        aGlzLGUpfSksRW1iZXIuSGFuZGxlYmFycy5yZWdpc3RlckJvdW5kSGVscGVy
        PWZ1bmN0aW9uKGUpe3ZhciByPXQuY2FsbChhcmd1bWVudHMsMSksbj1FbWJl
        ci5IYW5kbGViYXJzLm1ha2VCb3VuZEhlbHBlci5hcHBseSh0aGlzLHIpO0Vt
        YmVyLkhhbmRsZWJhcnMucmVnaXN0ZXJIZWxwZXIoZSxuKX0sRW1iZXIuSGFu
        ZGxlYmFycy5tYWtlQm91bmRIZWxwZXI9ZnVuY3Rpb24ocil7ZnVuY3Rpb24g
        aSgpe3ZhciBpLGEscyx1LGwsYz10LmNhbGwoYXJndW1lbnRzLDAsLTEpLGg9
        Yy5sZW5ndGgsbT1hcmd1bWVudHNbYXJndW1lbnRzLmxlbmd0aC0xXSxmPVtd
        LHA9bS5kYXRhLGQ9cC5pc1VuYm91bmQ/dC5jYWxsKG0udHlwZXMsMSk6bS50
        eXBlcyxiPW0uaGFzaCx2PXAudmlldyxFPW0uY29udGV4dHMsZz1FJiZFLmxl
        bmd0aD9FWzBdOnRoaXMseT0iIix3PUVtYmVyLl9TaW1wbGVIYW5kbGViYXJz
        Vmlldy5wcm90b3R5cGUubm9ybWFsaXplZFZhbHVlLF89Yi5ib3VuZE9wdGlv
        bnM9e307Zm9yKHMgaW4gYilFbWJlci5JU19CSU5ESU5HLnRlc3QocykmJihf
        W3Muc2xpY2UoMCwtNyldPWJbc10pO3ZhciBDPVtdO2ZvcihwLnByb3BlcnRp
        ZXM9W10saT0wO2g+aTsrK2kpaWYocC5wcm9wZXJ0aWVzLnB1c2goY1tpXSks
        IklEIj09PWRbaV0pe3ZhciBPPW4oZyxjW2ldLHApO2YucHVzaChPKSxDLnB1
        c2goTyl9ZWxzZSBwLmlzVW5ib3VuZD9mLnB1c2goe3BhdGg6Y1tpXX0pOmYu
        cHVzaChudWxsKTtpZihwLmlzVW5ib3VuZClyZXR1cm4gZSh0aGlzLHIsZixt
        KTt2YXIgQT1uZXcgRW1iZXIuX1NpbXBsZUhhbmRsZWJhcnNWaWV3KG51bGws
        bnVsbCwhbS5oYXNoLnVuZXNjYXBlZCxtLmRhdGEpO0Eubm9ybWFsaXplZFZh
        bHVlPWZ1bmN0aW9uKCl7dmFyIGUsdD1bXTtmb3IoZSBpbiBfKV8uaGFzT3du
        UHJvcGVydHkoZSkmJihsPW4oZyxfW2VdLHApLEEucGF0aD1sLnBhdGgsQS5w
        YXRoUm9vdD1sLnJvb3QsYltlXT13LmNhbGwoQSkpO2ZvcihpPTA7aD5pOysr
        aSlsPWZbaV0sbD8oQS5wYXRoPWwucGF0aCxBLnBhdGhSb290PWwucm9vdCx0
        LnB1c2gody5jYWxsKEEpKSk6dC5wdXNoKGNbaV0pO3JldHVybiB0LnB1c2go
        bSksci5hcHBseShnLHQpfSx2LmFwcGVuZENoaWxkKEEpO2Zvcih1IGluIF8p
        Xy5oYXNPd25Qcm9wZXJ0eSh1KSYmQy5wdXNoKG4oZyxfW3VdLHApKTtmb3Io
        aT0wLGE9Qy5sZW5ndGg7YT5pOysraSlsPUNbaV0sdi5yZWdpc3Rlck9ic2Vy
        dmVyKGwucm9vdCxsLnBhdGgsQSxBLnJlcmVuZGVyKTtpZigiSUQiPT09ZFsw
        XSYmMCE9PWYubGVuZ3RoKXt2YXIgUD1mWzBdLHg9UC5yb290LFQ9UC5wYXRo
        O0VtYmVyLmlzRW1wdHkoVCl8fCh5PVQrIi4iKTtmb3IodmFyIFY9MCxTPW8u
        bGVuZ3RoO1M+VjtWKyspdi5yZWdpc3Rlck9ic2VydmVyKHgseStvW1ZdLEEs
        QS5yZXJlbmRlcil9fXZhciBvPXQuY2FsbChhcmd1bWVudHMsMSk7cmV0dXJu
        IGkuX3Jhd0Z1bmN0aW9uPXIsaX0sRW1iZXIuSGFuZGxlYmFycy50ZW1wbGF0
        ZT1mdW5jdGlvbihlKXt2YXIgdD1yKGUpO3JldHVybiB0LmlzVG9wPSEwLHR9
        fSgpLGZ1bmN0aW9uKCl7RW1iZXIuU3RyaW5nLmh0bWxTYWZlPWZ1bmN0aW9u
        KGUpe3JldHVybiBuZXcgSGFuZGxlYmFycy5TYWZlU3RyaW5nKGUpfTt2YXIg
        ZT1FbWJlci5TdHJpbmcuaHRtbFNhZmU7KEVtYmVyLkVYVEVORF9QUk9UT1RZ
        UEVTPT09ITB8fEVtYmVyLkVYVEVORF9QUk9UT1RZUEVTLlN0cmluZykmJihT
        dHJpbmcucHJvdG90eXBlLmh0bWxTYWZlPWZ1bmN0aW9uKCl7cmV0dXJuIGUo
        dGhpcyl9KX0oKSxmdW5jdGlvbigpe0VtYmVyLkhhbmRsZWJhcnMucmVzb2x2
        ZVBhdGhzPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1bXSxyPWUuY29udGV4dHMs
        bj1lLnJvb3RzLGk9ZS5kYXRhLG89MCxhPXIubGVuZ3RoO2E+bztvKyspdC5w
        dXNoKEVtYmVyLkhhbmRsZWJhcnMuZ2V0KG5bb10scltvXSx7ZGF0YTppfSkp
        O3JldHVybiB0fX0oKSxmdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXtFbWJlci5y
        dW4ub25jZShFbWJlci5WaWV3LCJub3RpZnlNdXRhdGlvbkxpc3RlbmVycyIp
        fXZhciByPShFbWJlci5zZXQsRW1iZXIuZ2V0LHQoIm1ldGFtb3JwaCIpKSxu
        PXtyZW1vdmU6ZnVuY3Rpb24odCl7dC5tb3JwaC5yZW1vdmUoKSxlKCl9LHBy
        ZXBlbmQ6ZnVuY3Rpb24odCxyKXt0Lm1vcnBoLnByZXBlbmQociksZSgpfSxh
        ZnRlcjpmdW5jdGlvbih0LHIpe3QubW9ycGguYWZ0ZXIociksZSgpfSxodG1s
        OmZ1bmN0aW9uKHQscil7dC5tb3JwaC5odG1sKHIpLGUoKX0scmVwbGFjZTpm
        dW5jdGlvbih0KXt2YXIgcj10Lm1vcnBoO3QudHJhbnNpdGlvblRvKCJwcmVS
        ZW5kZXIiKSxFbWJlci5ydW4uc2NoZWR1bGUoInJlbmRlciIsdGhpcyxmdW5j
        dGlvbigpe2lmKCF0LmlzRGVzdHJveWluZyl7dC5jbGVhclJlbmRlcmVkQ2hp
        bGRyZW4oKTt2YXIgbj10LnJlbmRlclRvQnVmZmVyKCk7dC5pbnZva2VSZWN1
        cnNpdmVseShmdW5jdGlvbihlKXtlLnByb3BlcnR5V2lsbENoYW5nZSgiZWxl
        bWVudCIpfSksdC50cmlnZ2VyUmVjdXJzaXZlbHkoIndpbGxJbnNlcnRFbGVt
        ZW50Iiksci5yZXBsYWNlV2l0aChuLnN0cmluZygpKSx0LnRyYW5zaXRpb25U
        bygiaW5ET00iKSx0Lmludm9rZVJlY3Vyc2l2ZWx5KGZ1bmN0aW9uKGUpe2Uu
        cHJvcGVydHlEaWRDaGFuZ2UoImVsZW1lbnQiKX0pLHQudHJpZ2dlclJlY3Vy
        c2l2ZWx5KCJkaWRJbnNlcnRFbGVtZW50IiksZSgpfX0pfSxlbXB0eTpmdW5j
        dGlvbih0KXt0Lm1vcnBoLmh0bWwoIiIpLGUoKX19O0VtYmVyLl9NZXRhbW9y
        cGg9RW1iZXIuTWl4aW4uY3JlYXRlKHtpc1ZpcnR1YWw6ITAsdGFnTmFtZToi
        IixpbnN0cnVtZW50TmFtZToibWV0YW1vcnBoIixpbml0OmZ1bmN0aW9uKCl7
        dGhpcy5fc3VwZXIoKSx0aGlzLm1vcnBoPXIoKX0sYmVmb3JlUmVuZGVyOmZ1
        bmN0aW9uKGUpe2UucHVzaCh0aGlzLm1vcnBoLnN0YXJ0VGFnKCkpLGUucHVz
        aE9wZW5pbmdUYWcoKX0sYWZ0ZXJSZW5kZXI6ZnVuY3Rpb24oZSl7ZS5wdXNo
        Q2xvc2luZ1RhZygpLGUucHVzaCh0aGlzLm1vcnBoLmVuZFRhZygpKX0sY3Jl
        YXRlRWxlbWVudDpmdW5jdGlvbigpe3ZhciBlPXRoaXMucmVuZGVyVG9CdWZm
        ZXIoKTt0aGlzLm91dGVySFRNTD1lLnN0cmluZygpLHRoaXMuY2xlYXJCdWZm
        ZXIoKX0sZG9tTWFuYWdlcjpufSksRW1iZXIuX01ldGFtb3JwaFZpZXc9RW1i
        ZXIuVmlldy5leHRlbmQoRW1iZXIuX01ldGFtb3JwaCksRW1iZXIuX1NpbXBs
        ZU1ldGFtb3JwaFZpZXc9RW1iZXIuQ29yZVZpZXcuZXh0ZW5kKEVtYmVyLl9N
        ZXRhbW9ycGgpfSgpLGZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQscixuKXt0
        aGlzLnBhdGg9ZSx0aGlzLnBhdGhSb290PXQsdGhpcy5pc0VzY2FwZWQ9cix0
        aGlzLnRlbXBsYXRlRGF0YT1uLHRoaXMubW9ycGg9bygpLHRoaXMuc3RhdGU9
        InByZVJlbmRlciIsdGhpcy51cGRhdGVJZD1udWxsLHRoaXMuX3BhcmVudFZp
        ZXc9bnVsbCx0aGlzLmJ1ZmZlcj1udWxsfXZhciByPUVtYmVyLmdldCxuPUVt
        YmVyLnNldCxpPUVtYmVyLkhhbmRsZWJhcnMuZ2V0LG89dCgibWV0YW1vcnBo
        Iik7RW1iZXIuX1NpbXBsZUhhbmRsZWJhcnNWaWV3PWUsZS5wcm90b3R5cGU9
        e2lzVmlydHVhbDohMCxpc1ZpZXc6ITAsZGVzdHJveTpmdW5jdGlvbigpe3Ro
        aXMudXBkYXRlSWQmJihFbWJlci5ydW4uY2FuY2VsKHRoaXMudXBkYXRlSWQp
        LHRoaXMudXBkYXRlSWQ9bnVsbCksdGhpcy5fcGFyZW50VmlldyYmdGhpcy5f
        cGFyZW50Vmlldy5yZW1vdmVDaGlsZCh0aGlzKSx0aGlzLm1vcnBoPW51bGws
        dGhpcy5zdGF0ZT0iZGVzdHJveWVkIn0scHJvcGVydHlXaWxsQ2hhbmdlOkVt
        YmVyLksscHJvcGVydHlEaWRDaGFuZ2U6RW1iZXIuSyxub3JtYWxpemVkVmFs
        dWU6ZnVuY3Rpb24oKXt2YXIgZSx0LHI9dGhpcy5wYXRoLG49dGhpcy5wYXRo
        Um9vdDtyZXR1cm4iIj09PXI/ZT1uOih0PXRoaXMudGVtcGxhdGVEYXRhLGU9
        aShuLHIse2RhdGE6dH0pKSxlfSxyZW5kZXJUb0J1ZmZlcjpmdW5jdGlvbihl
        KXt2YXIgdD0iIjt0Kz10aGlzLm1vcnBoLnN0YXJ0VGFnKCksdCs9dGhpcy5y
        ZW5kZXIoKSx0Kz10aGlzLm1vcnBoLmVuZFRhZygpLGUucHVzaCh0KX0scmVu
        ZGVyOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5pc0VzY2FwZWQsdD10aGlzLm5v
        cm1hbGl6ZWRWYWx1ZSgpO3JldHVybiBudWxsPT09dHx8dm9pZCAwPT09dD90
        PSIiOnQgaW5zdGFuY2VvZiBIYW5kbGViYXJzLlNhZmVTdHJpbmd8fCh0PVN0
        cmluZyh0KSksZSYmKHQ9SGFuZGxlYmFycy5VdGlscy5lc2NhcGVFeHByZXNz
        aW9uKHQpKSx0fSxyZXJlbmRlcjpmdW5jdGlvbigpe3N3aXRjaCh0aGlzLnN0
        YXRlKXtjYXNlInByZVJlbmRlciI6Y2FzZSJkZXN0cm95ZWQiOmJyZWFrO2Nh
        c2UiaW5CdWZmZXIiOnRocm93IG5ldyBFbWJlci5FcnJvcigiU29tZXRoaW5n
        IHlvdSBkaWQgdHJpZWQgdG8gcmVwbGFjZSBhbiB7e2V4cHJlc3Npb259fSBi
        ZWZvcmUgaXQgd2FzIGluc2VydGVkIGludG8gdGhlIERPTS4iKTtjYXNlImhh
        c0VsZW1lbnQiOmNhc2UiaW5ET00iOnRoaXMudXBkYXRlSWQ9RW1iZXIucnVu
        LnNjaGVkdWxlT25jZSgicmVuZGVyIix0aGlzLCJ1cGRhdGUiKX1yZXR1cm4g
        dGhpc30sdXBkYXRlOmZ1bmN0aW9uKCl7dGhpcy51cGRhdGVJZD1udWxsLHRo
        aXMubW9ycGguaHRtbCh0aGlzLnJlbmRlcigpKX0sdHJhbnNpdGlvblRvOmZ1
        bmN0aW9uKGUpe3RoaXMuc3RhdGU9ZX19O3ZhciBhPUVtYmVyLlZpZXcuY2xv
        bmVTdGF0ZXMoRW1iZXIuVmlldy5zdGF0ZXMpLHM9RW1iZXIubWVyZ2U7cyhh
        Ll9kZWZhdWx0LHtyZXJlbmRlcklmTmVlZGVkOkVtYmVyLkt9KSxzKGEuaW5E
        T00se3JlcmVuZGVySWZOZWVkZWQ6ZnVuY3Rpb24oZSl7ZS5ub3JtYWxpemVk
        VmFsdWUoKSE9PWUuX2xhc3ROb3JtYWxpemVkVmFsdWUmJmUucmVyZW5kZXIo
        KX19KSxFbWJlci5fSGFuZGxlYmFyc0JvdW5kVmlldz1FbWJlci5fTWV0YW1v
        cnBoVmlldy5leHRlbmQoe2luc3RydW1lbnROYW1lOiJib3VuZEhhbmRsZWJh
        cnMiLHN0YXRlczphLHNob3VsZERpc3BsYXlGdW5jOm51bGwscHJlc2VydmVD
        b250ZXh0OiExLHByZXZpb3VzQ29udGV4dDpudWxsLGRpc3BsYXlUZW1wbGF0
        ZTpudWxsLGludmVyc2VUZW1wbGF0ZTpudWxsLHBhdGg6bnVsbCxwYXRoUm9v
        dDpudWxsLG5vcm1hbGl6ZWRWYWx1ZTpmdW5jdGlvbigpe3ZhciBlLHQsbj1y
        KHRoaXMsInBhdGgiKSxvPXIodGhpcywicGF0aFJvb3QiKSxhPXIodGhpcywi
        dmFsdWVOb3JtYWxpemVyRnVuYyIpO3JldHVybiIiPT09bj9lPW86KHQ9cih0
        aGlzLCJ0ZW1wbGF0ZURhdGEiKSxlPWkobyxuLHtkYXRhOnR9KSksYT9hKGUp
        OmV9LHJlcmVuZGVySWZOZWVkZWQ6ZnVuY3Rpb24oKXt0aGlzLmN1cnJlbnRT
        dGF0ZS5yZXJlbmRlcklmTmVlZGVkKHRoaXMpfSxyZW5kZXI6ZnVuY3Rpb24o
        ZSl7dmFyIHQ9cih0aGlzLCJpc0VzY2FwZWQiKSxpPXIodGhpcywic2hvdWxk
        RGlzcGxheUZ1bmMiKSxvPXIodGhpcywicHJlc2VydmVDb250ZXh0IiksYT1y
        KHRoaXMsInByZXZpb3VzQ29udGV4dCIpLHM9cih0aGlzLCJfY29udGV4dENv
        bnRyb2xsZXIiKSx1PXIodGhpcywiaW52ZXJzZVRlbXBsYXRlIiksbD1yKHRo
        aXMsImRpc3BsYXlUZW1wbGF0ZSIpLGM9dGhpcy5ub3JtYWxpemVkVmFsdWUo
        KTtpZih0aGlzLl9sYXN0Tm9ybWFsaXplZFZhbHVlPWMsaShjKSlpZihuKHRo
        aXMsInRlbXBsYXRlIixsKSxvKW4odGhpcywiX2NvbnRleHQiLGEpO2Vsc2V7
        aWYoIWwpcmV0dXJuIG51bGw9PT1jfHx2b2lkIDA9PT1jP2M9IiI6YyBpbnN0
        YW5jZW9mIEhhbmRsZWJhcnMuU2FmZVN0cmluZ3x8KGM9U3RyaW5nKGMpKSx0
        JiYoYz1IYW5kbGViYXJzLlV0aWxzLmVzY2FwZUV4cHJlc3Npb24oYykpLGUu
        cHVzaChjKSx2b2lkIDA7cyYmKG4ocywiY29udGVudCIsYyksYz1zKSxuKHRo
        aXMsIl9jb250ZXh0IixjKX1lbHNlIHU/KG4odGhpcywidGVtcGxhdGUiLHUp
        LG8/bih0aGlzLCJfY29udGV4dCIsYSk6bih0aGlzLCJfY29udGV4dCIsYykp
        Om4odGhpcywidGVtcGxhdGUiLGZ1bmN0aW9uKCl7cmV0dXJuIiJ9KTtyZXR1
        cm4gdGhpcy5fc3VwZXIoZSl9fSl9KCksZnVuY3Rpb24oKXtmdW5jdGlvbiBl
        KGUpe3JldHVybiFFbWJlci5pc05vbmUoZSl9ZnVuY3Rpb24gdChlLHQscixu
        LGksdSl7dmFyIGwsYyxoLG09dC5kYXRhLGY9dC5mbixwPXQuaW52ZXJzZSxk
        PW0udmlldyxiPXRoaXM7aWYobD1hKGIsZSxtKSwib2JqZWN0Ij09dHlwZW9m
        IHRoaXMpe2lmKG0uaW5zaWRlR3JvdXApe2M9ZnVuY3Rpb24oKXtFbWJlci5y
        dW4ub25jZShkLCJyZXJlbmRlciIpfTt2YXIgdixFLGc9byhiLGUsdCk7Zz1p
        P2koZyk6ZyxFPXI/YjpnLG4oZyk/dj1mOnAmJih2PXApLHYoRSx7ZGF0YTp0
        LmRhdGF9KX1lbHNle3ZhciB5PWQuY3JlYXRlQ2hpbGRWaWV3KEVtYmVyLl9I
        YW5kbGViYXJzQm91bmRWaWV3LHtwcmVzZXJ2ZUNvbnRleHQ6cixzaG91bGRE
        aXNwbGF5RnVuYzpuLHZhbHVlTm9ybWFsaXplckZ1bmM6aSxkaXNwbGF5VGVt
        cGxhdGU6ZixpbnZlcnNlVGVtcGxhdGU6cCxwYXRoOmUscGF0aFJvb3Q6Yixw
        cmV2aW91c0NvbnRleHQ6Yixpc0VzY2FwZWQ6IXQuaGFzaC51bmVzY2FwZWQs
        dGVtcGxhdGVEYXRhOnQuZGF0YX0pO3QuaGFzaC5jb250cm9sbGVyJiZ5LnNl
        dCgiX2NvbnRleHRDb250cm9sbGVyIix0aGlzLmNvbnRhaW5lci5sb29rdXBG
        YWN0b3J5KCJjb250cm9sbGVyOiIrdC5oYXNoLmNvbnRyb2xsZXIpLmNyZWF0
        ZSh7Y29udGFpbmVyOmIuY29udGFpbmVyLHBhcmVudENvbnRyb2xsZXI6Yix0
        YXJnZXQ6Yn0pKSxkLmFwcGVuZENoaWxkKHkpLGM9ZnVuY3Rpb24oKXtFbWJl
        ci5ydW4uc2NoZWR1bGVPbmNlKCJyZW5kZXIiLHksInJlcmVuZGVySWZOZWVk
        ZWQiKX19aWYoIiIhPT1sLnBhdGgmJihkLnJlZ2lzdGVyT2JzZXJ2ZXIobC5y
        b290LGwucGF0aCxjKSx1KSlmb3IoaD0wO2g8dS5sZW5ndGg7aCsrKWQucmVn
        aXN0ZXJPYnNlcnZlcihsLnJvb3QsbC5wYXRoKyIuIit1W2hdLGMpfWVsc2Ug
        bS5idWZmZXIucHVzaChzKGIsZSx0KSl9ZnVuY3Rpb24gcihlLHQscil7dmFy
        IG4saSxvLHUsbD1yLmRhdGEsYz1sLnZpZXc7aWYobj1hKGUsdCxsKSxvPW4u
        cm9vdCxvJiYib2JqZWN0Ij09dHlwZW9mIG8pe2lmKGwuaW5zaWRlR3JvdXAp
        aT1mdW5jdGlvbigpe0VtYmVyLnJ1bi5vbmNlKGMsInJlcmVuZGVyIil9LHU9
        cyhlLHQsciksbC5idWZmZXIucHVzaCh1KTtlbHNle3ZhciBoPW5ldyBFbWJl
        ci5fU2ltcGxlSGFuZGxlYmFyc1ZpZXcodCxlLCFyLmhhc2gudW5lc2NhcGVk
        LHIuZGF0YSk7aC5fcGFyZW50Vmlldz1jLGMuYXBwZW5kQ2hpbGQoaCksaT1m
        dW5jdGlvbigpe0VtYmVyLnJ1bi5zY2hlZHVsZU9uY2UoInJlbmRlciIsaCwi
        cmVyZW5kZXIiKX19IiIhPT1uLnBhdGgmJmMucmVnaXN0ZXJPYnNlcnZlcihu
        LnJvb3Qsbi5wYXRoLGkpfWVsc2UgdT1zKGUsdCxyKSxsLmJ1ZmZlci5wdXNo
        KHUpfWZ1bmN0aW9uIG4oZSl7dmFyIHQ9ZSYmaShlLCJpc1RydXRoeSIpO3Jl
        dHVybiJib29sZWFuIj09dHlwZW9mIHQ/dDpFbWJlci5pc0FycmF5KGUpPzAh
        PT1pKGUsImxlbmd0aCIpOiEhZX12YXIgaT1FbWJlci5nZXQsbz0oRW1iZXIu
        c2V0LEVtYmVyLlN0cmluZy5mbXQsRW1iZXIuSGFuZGxlYmFycy5nZXQpLGE9
        RW1iZXIuSGFuZGxlYmFycy5ub3JtYWxpemVQYXRoLHM9RW1iZXIuSGFuZGxl
        YmFycy5nZXRFc2NhcGVkLHU9RW1iZXIuQXJyYXlQb2x5ZmlsbHMuZm9yRWFj
        aCxsPUVtYmVyLmNyZWF0ZSxjPUVtYmVyLkhhbmRsZWJhcnMsaD1jLmhlbHBl
        cnM7Yy5iaW5kPXQsYy5yZWdpc3RlckhlbHBlcigiX3RyaWFnZU11c3RhY2hl
        IixmdW5jdGlvbihlLHQpe2lmKGhbZV0pcmV0dXJuIGhbZV0uY2FsbCh0aGlz
        LHQpO3ZhciByPUVtYmVyLkhhbmRsZWJhcnMucmVzb2x2ZUhlbHBlcih0LmRh
        dGEudmlldy5jb250YWluZXIsZSk7cmV0dXJuIHI/ci5jYWxsKHRoaXMsdCk6
        aC5iaW5kLmNhbGwodGhpcyxlLHQpfSksRW1iZXIuSGFuZGxlYmFycy5yZXNv
        bHZlSGVscGVyPWZ1bmN0aW9uKGUsdCl7aWYoZSYmLTEhPT10LmluZGV4T2Yo
        Ii0iKSl7dmFyIHI9ZS5sb29rdXAoImhlbHBlcjoiK3QpO2lmKCFyKXt2YXIg
        bj1lLmxvb2t1cCgiY29tcG9uZW50LWxvb2t1cDptYWluIiksaT1uLmxvb2t1
        cEZhY3RvcnkodCxlKTtpJiYocj1jLm1ha2VWaWV3SGVscGVyKGkpLGUucmVn
        aXN0ZXIoImhlbHBlcjoiK3QscikpfXJldHVybiByfX0sYy5yZWdpc3Rlckhl
        bHBlcigiYmluZCIsZnVuY3Rpb24obixpKXt2YXIgbz1pLmNvbnRleHRzJiZp
        LmNvbnRleHRzLmxlbmd0aD9pLmNvbnRleHRzWzBdOnRoaXM7cmV0dXJuIGku
        Zm4/dC5jYWxsKG8sbixpLCExLGUpOnIobyxuLGkpfSksYy5yZWdpc3Rlckhl
        bHBlcigiYm91bmRJZiIsZnVuY3Rpb24oZSxyKXt2YXIgaT1yLmNvbnRleHRz
        JiZyLmNvbnRleHRzLmxlbmd0aD9yLmNvbnRleHRzWzBdOnRoaXM7cmV0dXJu
        IHQuY2FsbChpLGUsciwhMCxuLG4sWyJpc1RydXRoeSIsImxlbmd0aCJdKX0p
        LGMucmVnaXN0ZXJIZWxwZXIoInVuYm91bmRJZiIsZnVuY3Rpb24oZSx0KXt2
        YXIgcixpLHM9dC5jb250ZXh0cyYmdC5jb250ZXh0cy5sZW5ndGg/dC5jb250
        ZXh0c1swXTp0aGlzLHU9dC5kYXRhLGw9dC5mbixjPXQuaW52ZXJzZTtyPWEo
        cyxlLHUpLGk9byhzLGUsdCksbihpKXx8KGw9YyksbChzLHtkYXRhOnV9KX0p
        LGMucmVnaXN0ZXJIZWxwZXIoIndpdGgiLGZ1bmN0aW9uKHIsbil7aWYoND09
        PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciBpLG8scyx1LGM7bj1hcmd1bWVudHNb
        M10saT1hcmd1bWVudHNbMl0sbz1hcmd1bWVudHNbMF07dmFyIG09bChuKTtp
        ZihtLmRhdGE9bChuLmRhdGEpLG0uZGF0YS5rZXl3b3Jkcz1sKG4uZGF0YS5r
        ZXl3b3Jkc3x8e30pLEVtYmVyLmlzR2xvYmFsUGF0aChvKSljPW87ZWxzZXt1
        PWEodGhpcyxvLG4uZGF0YSksbz11LnBhdGgscz11LnJvb3Q7dmFyIGY9RW1i
        ZXIuJC5leHBhbmRvK0VtYmVyLmd1aWRGb3Iocyk7bS5kYXRhLmtleXdvcmRz
        W2ZdPXMsYz1vP2YrIi4iK286Zn1yZXR1cm4gRW1iZXIuYmluZChtLmRhdGEu
        a2V5d29yZHMsaSxjKSx0LmNhbGwodGhpcyxvLG0sITAsZSl9cmV0dXJuIGgu
        YmluZC5jYWxsKG4uY29udGV4dHNbMF0scixuKX0pLGMucmVnaXN0ZXJIZWxw
        ZXIoImlmIixmdW5jdGlvbihlLHQpe3JldHVybiB0LmRhdGEuaXNVbmJvdW5k
        P2gudW5ib3VuZElmLmNhbGwodC5jb250ZXh0c1swXSxlLHQpOmguYm91bmRJ
        Zi5jYWxsKHQuY29udGV4dHNbMF0sZSx0KX0pLGMucmVnaXN0ZXJIZWxwZXIo
        InVubGVzcyIsZnVuY3Rpb24oZSx0KXt2YXIgcj10LmZuLG49dC5pbnZlcnNl
        O3JldHVybiB0LmZuPW4sdC5pbnZlcnNlPXIsdC5kYXRhLmlzVW5ib3VuZD9o
        LnVuYm91bmRJZi5jYWxsKHQuY29udGV4dHNbMF0sZSx0KTpoLmJvdW5kSWYu
        Y2FsbCh0LmNvbnRleHRzWzBdLGUsdCl9KSxjLnJlZ2lzdGVySGVscGVyKCJi
        aW5kLWF0dHIiLGZ1bmN0aW9uKGUpe3ZhciB0PWUuaGFzaCxyPWUuZGF0YS52
        aWV3LG49W10saT10aGlzLHM9KytFbWJlci51dWlkLGw9dFsiY2xhc3MiXTtp
        ZihudWxsIT1sKXt2YXIgaD1jLmJpbmRDbGFzc2VzKHRoaXMsbCxyLHMsZSk7
        bi5wdXNoKCdjbGFzcz0iJytIYW5kbGViYXJzLlV0aWxzLmVzY2FwZUV4cHJl
        c3Npb24oaC5qb2luKCIgIikpKyciJyksZGVsZXRlIHRbImNsYXNzIl19dmFy
        IG09RW1iZXIua2V5cyh0KTtyZXR1cm4gdS5jYWxsKG0sZnVuY3Rpb24odSl7
        dmFyIGwsYz10W3VdO2w9YShpLGMsZS5kYXRhKTt2YXIgaCxtLGY9InRoaXMi
        PT09Yz9sLnJvb3Q6byhpLGMsZSkscD1FbWJlci50eXBlT2YoZik7aD1mdW5j
        dGlvbigpe3ZhciB0PW8oaSxjLGUpLG49ci4kKCJbZGF0YS1iaW5kYXR0ci0i
        K3MrIj0nIitzKyInXSIpO3JldHVybiBuJiYwIT09bi5sZW5ndGg/KEVtYmVy
        LlZpZXcuYXBwbHlBdHRyaWJ1dGVCaW5kaW5ncyhuLHUsdCksdm9pZCAwKToo
        RW1iZXIucmVtb3ZlT2JzZXJ2ZXIobC5yb290LGwucGF0aCxtKSx2b2lkIDAp
        fSwidGhpcyI9PT1jfHxsLmlzS2V5d29yZCYmIiI9PT1sLnBhdGh8fHIucmVn
        aXN0ZXJPYnNlcnZlcihsLnJvb3QsbC5wYXRoLGgpLCJzdHJpbmciPT09cHx8
        Im51bWJlciI9PT1wJiYhaXNOYU4oZik/bi5wdXNoKHUrJz0iJytIYW5kbGVi
        YXJzLlV0aWxzLmVzY2FwZUV4cHJlc3Npb24oZikrJyInKTpmJiYiYm9vbGVh
        biI9PT1wJiZuLnB1c2godSsnPSInK3UrJyInKX0sdGhpcyksbi5wdXNoKCJk
        YXRhLWJpbmRhdHRyLSIrcysnPSInK3MrJyInKSxuZXcgYy5TYWZlU3RyaW5n
        KG4uam9pbigiICIpKX0pLGMucmVnaXN0ZXJIZWxwZXIoImJpbmRBdHRyIixm
        dW5jdGlvbigpe3JldHVybiBjLmhlbHBlcnNbImJpbmQtYXR0ciJdLmFwcGx5
        KHRoaXMsYXJndW1lbnRzKX0pLGMuYmluZENsYXNzZXM9ZnVuY3Rpb24oZSx0
        LHIsbixpKXt2YXIgcyxsLGMsaD1bXSxtPWZ1bmN0aW9uKGUsdCxyKXt2YXIg
        bixpPXQucGF0aDtyZXR1cm4gbj0idGhpcyI9PT1pP2U6IiI9PT1pPyEwOm8o
        ZSxpLHIpLEVtYmVyLlZpZXcuX2NsYXNzU3RyaW5nRm9yVmFsdWUoaSxuLHQu
        Y2xhc3NOYW1lLHQuZmFsc3lDbGFzc05hbWUpfTtyZXR1cm4gdS5jYWxsKHQu
        c3BsaXQoIiAiKSxmdW5jdGlvbih0KXt2YXIgbyx1LGYscCxkPUVtYmVyLlZp
        ZXcuX3BhcnNlUHJvcGVydHlQYXRoKHQpLGI9ZC5wYXRoLHY9ZTsiIiE9PWIm
        JiJ0aGlzIiE9PWImJihwPWEoZSxiLGkuZGF0YSksdj1wLnJvb3QsYj1wLnBh
        dGgpLHU9ZnVuY3Rpb24oKXtzPW0oZSxkLGkpLGM9bj9yLiQoIltkYXRhLWJp
        bmRhdHRyLSIrbisiPSciK24rIiddIik6ci4kKCksYyYmMCE9PWMubGVuZ3Ro
        PyhvJiZjLnJlbW92ZUNsYXNzKG8pLHM/KGMuYWRkQ2xhc3Mocyksbz1zKTpv
        PW51bGwpOkVtYmVyLnJlbW92ZU9ic2VydmVyKHYsYixmKX0sIiIhPT1iJiYi
        dGhpcyIhPT1iJiZyLnJlZ2lzdGVyT2JzZXJ2ZXIodixiLHUpLGw9bShlLGQs
        aSksbCYmKGgucHVzaChsKSxvPWwpfSksaH19KCksZnVuY3Rpb24oKXtmdW5j
        dGlvbiBlKGUscil7dmFyIG49ci5oYXNoLGk9ci5oYXNoVHlwZXM7Zm9yKHZh
        ciBvIGluIG4paWYoIklEIj09PWlbb10pe3ZhciBhPW5bb107RW1iZXIuSVNf
        QklORElORy50ZXN0KG8pfHwobltvKyJCaW5kaW5nIl09YSxpW28rIkJpbmRp
        bmciXT0iU1RSSU5HIixkZWxldGUgbltvXSxkZWxldGUgaVtvXSl9bi5oYXNP
        d25Qcm9wZXJ0eSgiaWRCaW5kaW5nIikmJihuLmlkPXQuZ2V0KGUsbi5pZEJp
        bmRpbmcsciksaS5pZD0iU1RSSU5HIixkZWxldGUgbi5pZEJpbmRpbmcsZGVs
        ZXRlIGkuaWRCaW5kaW5nKX12YXIgdD0oRW1iZXIuZ2V0LEVtYmVyLnNldCxF
        bWJlci5IYW5kbGViYXJzKSxyPS9eW2Etel0vLG49L152aWV3XC4vO3QuVmll
        d0hlbHBlcj1FbWJlci5PYmplY3QuY3JlYXRlKHtwcm9wZXJ0aWVzRnJvbUhU
        TUxPcHRpb25zOmZ1bmN0aW9uKGUpe3ZhciB0PWUuaGFzaCxyPWUuZGF0YSxu
        PXt9LGk9dFsiY2xhc3MiXSxvPSExO3QuaWQmJihuLmVsZW1lbnRJZD10Lmlk
        LG89ITApLHQudGFnJiYobi50YWdOYW1lPXQudGFnLG89ITApLGkmJihpPWku
        c3BsaXQoIiAiKSxuLmNsYXNzTmFtZXM9aSxvPSEwKSx0LmNsYXNzQmluZGlu
        ZyYmKG4uY2xhc3NOYW1lQmluZGluZ3M9dC5jbGFzc0JpbmRpbmcuc3BsaXQo
        IiAiKSxvPSEwKSx0LmNsYXNzTmFtZUJpbmRpbmdzJiYodm9pZCAwPT09bi5j
        bGFzc05hbWVCaW5kaW5ncyYmKG4uY2xhc3NOYW1lQmluZGluZ3M9W10pLG4u
        Y2xhc3NOYW1lQmluZGluZ3M9bi5jbGFzc05hbWVCaW5kaW5ncy5jb25jYXQo
        dC5jbGFzc05hbWVCaW5kaW5ncy5zcGxpdCgiICIpKSxvPSEwKSx0LmF0dHJp
        YnV0ZUJpbmRpbmdzJiYobi5hdHRyaWJ1dGVCaW5kaW5ncz1udWxsLG89ITAp
        LG8mJih0PUVtYmVyLiQuZXh0ZW5kKHt9LHQpLGRlbGV0ZSB0LmlkLGRlbGV0
        ZSB0LnRhZyxkZWxldGUgdFsiY2xhc3MiXSxkZWxldGUgdC5jbGFzc0JpbmRp
        bmcpO3ZhciBhO2Zvcih2YXIgcyBpbiB0KXQuaGFzT3duUHJvcGVydHkocykm
        JkVtYmVyLklTX0JJTkRJTkcudGVzdChzKSYmInN0cmluZyI9PXR5cGVvZiB0
        W3NdJiYoYT10aGlzLmNvbnRleHR1YWxpemVCaW5kaW5nUGF0aCh0W3NdLHIp
        LGEmJih0W3NdPWEpKTtpZihuLmNsYXNzTmFtZUJpbmRpbmdzKWZvcih2YXIg
        dSBpbiBuLmNsYXNzTmFtZUJpbmRpbmdzKXt2YXIgbD1uLmNsYXNzTmFtZUJp
        bmRpbmdzW3VdO2lmKCJzdHJpbmciPT10eXBlb2YgbCl7dmFyIGM9RW1iZXIu
        Vmlldy5fcGFyc2VQcm9wZXJ0eVBhdGgobCk7YT10aGlzLmNvbnRleHR1YWxp
        emVCaW5kaW5nUGF0aChjLnBhdGgsciksYSYmKG4uY2xhc3NOYW1lQmluZGlu
        Z3NbdV09YStjLmNsYXNzTmFtZXMpfX1yZXR1cm4gRW1iZXIuJC5leHRlbmQo
        dCxuKX0sY29udGV4dHVhbGl6ZUJpbmRpbmdQYXRoOmZ1bmN0aW9uKGUsdCl7
        dmFyIHI9RW1iZXIuSGFuZGxlYmFycy5ub3JtYWxpemVQYXRoKG51bGwsZSx0
        KTtyZXR1cm4gci5pc0tleXdvcmQ/InRlbXBsYXRlRGF0YS5rZXl3b3Jkcy4i
        K2U6RW1iZXIuaXNHbG9iYWxQYXRoKGUpP251bGw6InRoaXMiPT09ZXx8IiI9
        PT1lPyJfcGFyZW50Vmlldy5jb250ZXh0IjoiX3BhcmVudFZpZXcuY29udGV4
        dC4iK2V9LGhlbHBlcjpmdW5jdGlvbihpLG8sYSl7dmFyIHMsdT1hLmRhdGEs
        bD1hLmZuO2UoaSxhKSxzPSJzdHJpbmciPT10eXBlb2Ygbz8iU1RSSU5HIj09
        PWEudHlwZXNbMF0mJnIudGVzdChvKSYmIW4udGVzdChvKT91LnZpZXcuY29u
        dGFpbmVyLmxvb2t1cEZhY3RvcnkoInZpZXc6IitvKTp0LmdldChpLG8sYSk6
        bzt2YXIgYz10aGlzLnByb3BlcnRpZXNGcm9tSFRNTE9wdGlvbnMoYSxpKSxo
        PXUudmlldztjLnRlbXBsYXRlRGF0YT11O3ZhciBtPXMucHJvdG8/cy5wcm90
        bygpOnM7bCYmKGMudGVtcGxhdGU9bCksbS5jb250cm9sbGVyfHxtLmNvbnRy
        b2xsZXJCaW5kaW5nfHxjLmNvbnRyb2xsZXJ8fGMuY29udHJvbGxlckJpbmRp
        bmd8fChjLl9jb250ZXh0PWkpLGguYXBwZW5kQ2hpbGQocyxjKX19KSx0LnJl
        Z2lzdGVySGVscGVyKCJ2aWV3IixmdW5jdGlvbihlLHIpe3JldHVybiBlJiZl
        LmRhdGEmJmUuZGF0YS5pc1JlbmRlckRhdGEmJihyPWUsZT0iRW1iZXIuVmll
        dyIpLHQuVmlld0hlbHBlci5oZWxwZXIodGhpcyxlLHIpfSl9KCksZnVuY3Rp
        b24oKXt7dmFyIGU9RW1iZXIuZ2V0LHQ9RW1iZXIuSGFuZGxlYmFycy5nZXQ7
        RW1iZXIuU3RyaW5nLmZtdH1FbWJlci5IYW5kbGViYXJzLnJlZ2lzdGVySGVs
        cGVyKCJjb2xsZWN0aW9uIixmdW5jdGlvbihyLG4pe3ImJnIuZGF0YSYmci5k
        YXRhLmlzUmVuZGVyRGF0YSYmKG49cixyPXZvaWQgMCk7e3ZhciBpLG8sYSxz
        PW4uZm4sdT1uLmRhdGEsbD1uLmludmVyc2U7bi5kYXRhLnZpZXd9cj8oaT11
        LmtleXdvcmRzLmNvbnRyb2xsZXIsbz1pJiZpLmNvbnRhaW5lcixhPXQodGhp
        cyxyLG4pfHxvLmxvb2t1cEZhY3RvcnkoInZpZXc6IityKSk6YT1FbWJlci5D
        b2xsZWN0aW9uVmlldzt2YXIgYyxoLG09bi5oYXNoLGY9e30scD1hLnByb3Rv
        KCk7bS5pdGVtVmlldz8oaT11LmtleXdvcmRzLmNvbnRyb2xsZXIsbz1pLmNv
        bnRhaW5lcixoPW8ubG9va3VwRmFjdG9yeSgidmlldzoiK20uaXRlbVZpZXcp
        KTpoPW0uaXRlbVZpZXdDbGFzcz90KHAsbS5pdGVtVmlld0NsYXNzLG4pOnAu
        aXRlbVZpZXdDbGFzcyxkZWxldGUgbS5pdGVtVmlld0NsYXNzLGRlbGV0ZSBt
        Lml0ZW1WaWV3O2Zvcih2YXIgZCBpbiBtKW0uaGFzT3duUHJvcGVydHkoZCkm
        JihjPWQubWF0Y2goL15pdGVtKC4pKC4qKSQvKSxjJiYiaXRlbUNvbnRyb2xs
        ZXIiIT09ZCYmKGZbY1sxXS50b0xvd2VyQ2FzZSgpK2NbMl1dPW1bZF0sZGVs
        ZXRlIG1bZF0pKTtzJiYoZi50ZW1wbGF0ZT1zLGRlbGV0ZSBuLmZuKTt2YXIg
        YjtsJiZsIT09RW1iZXIuSGFuZGxlYmFycy5WTS5ub29wPyhiPWUocCwiZW1w
        dHlWaWV3Q2xhc3MiKSxiPWIuZXh0ZW5kKHt0ZW1wbGF0ZTpsLHRhZ05hbWU6
        Zi50YWdOYW1lfSkpOm0uZW1wdHlWaWV3Q2xhc3MmJihiPXQodGhpcyxtLmVt
        cHR5Vmlld0NsYXNzLG4pKSxiJiYobS5lbXB0eVZpZXc9YiksbS5rZXl3b3Jk
        fHwoZi5fY29udGV4dD1FbWJlci5jb21wdXRlZC5hbGlhcygiY29udGVudCIp
        KTt2YXIgdj1FbWJlci5IYW5kbGViYXJzLlZpZXdIZWxwZXIucHJvcGVydGll
        c0Zyb21IVE1MT3B0aW9ucyh7ZGF0YTp1LGhhc2g6Zn0sdGhpcyk7cmV0dXJu
        IG0uaXRlbVZpZXdDbGFzcz1oLmV4dGVuZCh2KSxFbWJlci5IYW5kbGViYXJz
        LmhlbHBlcnMudmlldy5jYWxsKHRoaXMsYSxuKX0pfSgpLGZ1bmN0aW9uKCl7
        dmFyIGU9RW1iZXIuSGFuZGxlYmFycy5nZXQ7RW1iZXIuSGFuZGxlYmFycy5y
        ZWdpc3RlckhlbHBlcigidW5ib3VuZCIsZnVuY3Rpb24odCxyKXt2YXIgbixp
        LG8sYT1hcmd1bWVudHNbYXJndW1lbnRzLmxlbmd0aC0xXTtyZXR1cm4gYXJn
        dW1lbnRzLmxlbmd0aD4yPyhhLmRhdGEuaXNVbmJvdW5kPSEwLG49RW1iZXIu
        SGFuZGxlYmFycy5oZWxwZXJzW2FyZ3VtZW50c1swXV18fEVtYmVyLkhhbmRs
        ZWJhcnMuaGVscGVycy5oZWxwZXJNaXNzaW5nLG89bi5hcHBseSh0aGlzLEFy
        cmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywxKSksZGVsZXRl
        IGEuZGF0YS5pc1VuYm91bmQsbyk6KGk9ci5jb250ZXh0cyYmci5jb250ZXh0
        cy5sZW5ndGg/ci5jb250ZXh0c1swXTp0aGlzLGUoaSx0LHIpKX0pfSgpLGZ1
        bmN0aW9uKCl7dmFyIGU9KEVtYmVyLmdldCxFbWJlci5IYW5kbGViYXJzLmdl
        dCksdD1FbWJlci5IYW5kbGViYXJzLm5vcm1hbGl6ZVBhdGg7RW1iZXIuSGFu
        ZGxlYmFycy5yZWdpc3RlckhlbHBlcigibG9nIixmdW5jdGlvbihyLG4pe3Zh
        ciBpPW4uY29udGV4dHMmJm4uY29udGV4dHMubGVuZ3RoP24uY29udGV4dHNb
        MF06dGhpcyxvPXQoaSxyLG4uZGF0YSksYT1vLnJvb3Qscz1vLnBhdGgsdT0i
        dGhpcyI9PT1zP2E6ZShhLHMsbik7RW1iZXIuTG9nZ2VyLmxvZyh1KX0pLEVt
        YmVyLkhhbmRsZWJhcnMucmVnaXN0ZXJIZWxwZXIoImRlYnVnZ2VyIixmdW5j
        dGlvbigpe3t2YXIgZT10aGlzO0VtYmVyLmluc3BlY3QoZSl9fSl9KCksZnVu
        Y3Rpb24oKXt7dmFyIGU9RW1iZXIuZ2V0LHQ9RW1iZXIuc2V0O0VtYmVyLlN0
        cmluZy5mbXR9RW1iZXIuSGFuZGxlYmFycy5FYWNoVmlldz1FbWJlci5Db2xs
        ZWN0aW9uVmlldy5leHRlbmQoRW1iZXIuX01ldGFtb3JwaCx7aW5pdDpmdW5j
        dGlvbigpe3ZhciByLG49ZSh0aGlzLCJpdGVtQ29udHJvbGxlciIpO2lmKG4p
        e3ZhciBpPWUodGhpcywiY29udHJvbGxlci5jb250YWluZXIiKS5sb29rdXBG
        YWN0b3J5KCJjb250cm9sbGVyOmFycmF5IikuY3JlYXRlKHtfaXNWaXJ0dWFs
        OiEwLHBhcmVudENvbnRyb2xsZXI6ZSh0aGlzLCJjb250cm9sbGVyIiksaXRl
        bUNvbnRyb2xsZXI6bix0YXJnZXQ6ZSh0aGlzLCJjb250cm9sbGVyIiksX2Vh
        Y2hWaWV3OnRoaXN9KTt0aGlzLmRpc2FibGVDb250ZW50T2JzZXJ2ZXJzKGZ1
        bmN0aW9uKCl7dCh0aGlzLCJjb250ZW50IixpKSxyPW5ldyBFbWJlci5CaW5k
        aW5nKCJjb250ZW50IiwiX2VhY2hWaWV3LmRhdGFTb3VyY2UiKS5vbmVXYXko
        KSxyLmNvbm5lY3QoaSl9KSx0KHRoaXMsIl9hcnJheUNvbnRyb2xsZXIiLGkp
        fWVsc2UgdGhpcy5kaXNhYmxlQ29udGVudE9ic2VydmVycyhmdW5jdGlvbigp
        e3I9bmV3IEVtYmVyLkJpbmRpbmcoImNvbnRlbnQiLCJkYXRhU291cmNlIiku
        b25lV2F5KCksci5jb25uZWN0KHRoaXMpfSk7cmV0dXJuIHRoaXMuX3N1cGVy
        KCl9LF9hc3NlcnRBcnJheUxpa2U6ZnVuY3Rpb24oKXt9LGRpc2FibGVDb250
        ZW50T2JzZXJ2ZXJzOmZ1bmN0aW9uKGUpe0VtYmVyLnJlbW92ZUJlZm9yZU9i
        c2VydmVyKHRoaXMsImNvbnRlbnQiLG51bGwsIl9jb250ZW50V2lsbENoYW5n
        ZSIpLEVtYmVyLnJlbW92ZU9ic2VydmVyKHRoaXMsImNvbnRlbnQiLG51bGws
        Il9jb250ZW50RGlkQ2hhbmdlIiksZS5jYWxsKHRoaXMpLEVtYmVyLmFkZEJl
        Zm9yZU9ic2VydmVyKHRoaXMsImNvbnRlbnQiLG51bGwsIl9jb250ZW50V2ls
        bENoYW5nZSIpLEVtYmVyLmFkZE9ic2VydmVyKHRoaXMsImNvbnRlbnQiLG51
        bGwsIl9jb250ZW50RGlkQ2hhbmdlIil9LGl0ZW1WaWV3Q2xhc3M6RW1iZXIu
        X01ldGFtb3JwaFZpZXcsZW1wdHlWaWV3Q2xhc3M6RW1iZXIuX01ldGFtb3Jw
        aFZpZXcsY3JlYXRlQ2hpbGRWaWV3OmZ1bmN0aW9uKHIsbil7cj10aGlzLl9z
        dXBlcihyLG4pO3ZhciBpPWUodGhpcywia2V5d29yZCIpLG89ZShyLCJjb250
        ZW50Iik7aWYoaSl7dmFyIGE9ZShyLCJ0ZW1wbGF0ZURhdGEiKTthPUVtYmVy
        LmNvcHkoYSksYS5rZXl3b3Jkcz1yLmNsb25lS2V5d29yZHMoKSx0KHIsInRl
        bXBsYXRlRGF0YSIsYSksYS5rZXl3b3Jkc1tpXT1vfXJldHVybiBvJiZlKG8s
        ImlzQ29udHJvbGxlciIpJiZ0KHIsImNvbnRyb2xsZXIiLG8pLHJ9LGRlc3Ry
        b3k6ZnVuY3Rpb24oKXtpZih0aGlzLl9zdXBlcigpKXt2YXIgdD1lKHRoaXMs
        Il9hcnJheUNvbnRyb2xsZXIiKTtyZXR1cm4gdCYmdC5kZXN0cm95KCksdGhp
        c319fSk7dmFyIHI9RW1iZXIuSGFuZGxlYmFycy5Hcm91cGVkRWFjaD1mdW5j
        dGlvbihlLHQscil7dmFyIG49dGhpcyxpPUVtYmVyLkhhbmRsZWJhcnMubm9y
        bWFsaXplUGF0aChlLHQsci5kYXRhKTt0aGlzLmNvbnRleHQ9ZSx0aGlzLnBh
        dGg9dCx0aGlzLm9wdGlvbnM9cix0aGlzLnRlbXBsYXRlPXIuZm4sdGhpcy5j
        b250YWluaW5nVmlldz1yLmRhdGEudmlldyx0aGlzLm5vcm1hbGl6ZWRSb290
        PWkucm9vdCx0aGlzLm5vcm1hbGl6ZWRQYXRoPWkucGF0aCx0aGlzLmNvbnRl
        bnQ9dGhpcy5sb29rdXBDb250ZW50KCksdGhpcy5hZGRDb250ZW50T2JzZXJ2
        ZXJzKCksdGhpcy5hZGRBcnJheU9ic2VydmVycygpLHRoaXMuY29udGFpbmlu
        Z1ZpZXcub24oIndpbGxDbGVhclJlbmRlciIsZnVuY3Rpb24oKXtuLmRlc3Ry
        b3koKX0pfTtyLnByb3RvdHlwZT17Y29udGVudFdpbGxDaGFuZ2U6ZnVuY3Rp
        b24oKXt0aGlzLnJlbW92ZUFycmF5T2JzZXJ2ZXJzKCl9LGNvbnRlbnREaWRD
        aGFuZ2U6ZnVuY3Rpb24oKXt0aGlzLmNvbnRlbnQ9dGhpcy5sb29rdXBDb250
        ZW50KCksdGhpcy5hZGRBcnJheU9ic2VydmVycygpLHRoaXMucmVyZW5kZXJD
        b250YWluaW5nVmlldygpfSxjb250ZW50QXJyYXlXaWxsQ2hhbmdlOkVtYmVy
        LkssY29udGVudEFycmF5RGlkQ2hhbmdlOmZ1bmN0aW9uKCl7dGhpcy5yZXJl
        bmRlckNvbnRhaW5pbmdWaWV3KCl9LGxvb2t1cENvbnRlbnQ6ZnVuY3Rpb24o
        KXtyZXR1cm4gRW1iZXIuSGFuZGxlYmFycy5nZXQodGhpcy5ub3JtYWxpemVk
        Um9vdCx0aGlzLm5vcm1hbGl6ZWRQYXRoLHRoaXMub3B0aW9ucyl9LGFkZEFy
        cmF5T2JzZXJ2ZXJzOmZ1bmN0aW9uKCl7dGhpcy5jb250ZW50JiZ0aGlzLmNv
        bnRlbnQuYWRkQXJyYXlPYnNlcnZlcih0aGlzLHt3aWxsQ2hhbmdlOiJjb250
        ZW50QXJyYXlXaWxsQ2hhbmdlIixkaWRDaGFuZ2U6ImNvbnRlbnRBcnJheURp
        ZENoYW5nZSJ9KX0scmVtb3ZlQXJyYXlPYnNlcnZlcnM6ZnVuY3Rpb24oKXt0
        aGlzLmNvbnRlbnQmJnRoaXMuY29udGVudC5yZW1vdmVBcnJheU9ic2VydmVy
        KHRoaXMse3dpbGxDaGFuZ2U6ImNvbnRlbnRBcnJheVdpbGxDaGFuZ2UiLGRp
        ZENoYW5nZToiY29udGVudEFycmF5RGlkQ2hhbmdlIn0pfSxhZGRDb250ZW50
        T2JzZXJ2ZXJzOmZ1bmN0aW9uKCl7RW1iZXIuYWRkQmVmb3JlT2JzZXJ2ZXIo
        dGhpcy5ub3JtYWxpemVkUm9vdCx0aGlzLm5vcm1hbGl6ZWRQYXRoLHRoaXMs
        dGhpcy5jb250ZW50V2lsbENoYW5nZSksRW1iZXIuYWRkT2JzZXJ2ZXIodGhp
        cy5ub3JtYWxpemVkUm9vdCx0aGlzLm5vcm1hbGl6ZWRQYXRoLHRoaXMsdGhp
        cy5jb250ZW50RGlkQ2hhbmdlKX0scmVtb3ZlQ29udGVudE9ic2VydmVyczpm
        dW5jdGlvbigpe0VtYmVyLnJlbW92ZUJlZm9yZU9ic2VydmVyKHRoaXMubm9y
        bWFsaXplZFJvb3QsdGhpcy5ub3JtYWxpemVkUGF0aCx0aGlzLmNvbnRlbnRX
        aWxsQ2hhbmdlKSxFbWJlci5yZW1vdmVPYnNlcnZlcih0aGlzLm5vcm1hbGl6
        ZWRSb290LHRoaXMubm9ybWFsaXplZFBhdGgsdGhpcy5jb250ZW50RGlkQ2hh
        bmdlKX0scmVuZGVyOmZ1bmN0aW9uKCl7aWYodGhpcy5jb250ZW50KXt2YXIg
        dD10aGlzLmNvbnRlbnQscj1lKHQsImxlbmd0aCIpLG49dGhpcy5vcHRpb25z
        LmRhdGEsaT10aGlzLnRlbXBsYXRlO24uaW5zaWRlRWFjaD0hMDtmb3IodmFy
        IG89MDtyPm87bysrKWkodC5vYmplY3RBdChvKSx7ZGF0YTpufSl9fSxyZXJl
        bmRlckNvbnRhaW5pbmdWaWV3OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztFbWJl
        ci5ydW4uc2NoZWR1bGVPbmNlKCJyZW5kZXIiLHRoaXMsZnVuY3Rpb24oKXtl
        LmRlc3Ryb3llZHx8ZS5jb250YWluaW5nVmlldy5yZXJlbmRlcigpfSl9LGRl
        c3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLnJlbW92ZUNvbnRlbnRPYnNlcnZlcnMo
        KSx0aGlzLmNvbnRlbnQmJnRoaXMucmVtb3ZlQXJyYXlPYnNlcnZlcnMoKSx0
        aGlzLmRlc3Ryb3llZD0hMH19LEVtYmVyLkhhbmRsZWJhcnMucmVnaXN0ZXJI
        ZWxwZXIoImVhY2giLGZ1bmN0aW9uKGUsdCl7aWYoND09PWFyZ3VtZW50cy5s
        ZW5ndGgpe3ZhciByPWFyZ3VtZW50c1swXTt0PWFyZ3VtZW50c1szXSxlPWFy
        Z3VtZW50c1syXSwiIj09PWUmJihlPSJ0aGlzIiksdC5oYXNoLmtleXdvcmQ9
        cn1yZXR1cm4gMT09PWFyZ3VtZW50cy5sZW5ndGgmJih0PWUsZT0idGhpcyIp
        LHQuaGFzaC5kYXRhU291cmNlQmluZGluZz1lLCF0LmRhdGEuaW5zaWRlR3Jv
        dXB8fHQuaGFzaC5ncm91cGVkUm93c3x8dC5oYXNoLml0ZW1WaWV3Q2xhc3M/
        RW1iZXIuSGFuZGxlYmFycy5oZWxwZXJzLmNvbGxlY3Rpb24uY2FsbCh0aGlz
        LCJFbWJlci5IYW5kbGViYXJzLkVhY2hWaWV3Iix0KToobmV3IEVtYmVyLkhh
        bmRsZWJhcnMuR3JvdXBlZEVhY2godGhpcyxlLHQpLnJlbmRlcigpLHZvaWQg
        MCl9KX0oKSxmdW5jdGlvbigpe0VtYmVyLkhhbmRsZWJhcnMucmVnaXN0ZXJI
        ZWxwZXIoInRlbXBsYXRlIixmdW5jdGlvbigpe3JldHVybiBFbWJlci5IYW5k
        bGViYXJzLmhlbHBlcnMucGFydGlhbC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9
        KX0oKSxmdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSl7cmV0dXJuIUVtYmVyLmlz
        Tm9uZShlKX1mdW5jdGlvbiB0KGUsdCxyKXt2YXIgbj10LnNwbGl0KCIvIiks
        aT1uW24ubGVuZ3RoLTFdO25bbi5sZW5ndGgtMV09Il8iK2k7dmFyIG89ci5k
        YXRhLnZpZXcsYT1uLmpvaW4oIi8iKSxzPW8udGVtcGxhdGVGb3JOYW1lKGEp
        LHU9IXMmJm8udGVtcGxhdGVGb3JOYW1lKHQpOyhzPXN8fHUpKGUse2RhdGE6
        ci5kYXRhfSl9RW1iZXIuSGFuZGxlYmFycy5yZWdpc3RlckhlbHBlcigicGFy
        dGlhbCIsZnVuY3Rpb24ocixuKXt2YXIgaT1uLmNvbnRleHRzJiZuLmNvbnRl
        eHRzLmxlbmd0aD9uLmNvbnRleHRzWzBdOnRoaXM7cmV0dXJuIklEIj09PW4u
        dHlwZXNbMF0/KG4uZm49ZnVuY3Rpb24oZSxuKXt2YXIgaT1FbWJlci5IYW5k
        bGViYXJzLmdldChlLHIsbik7dChlLGksbil9LEVtYmVyLkhhbmRsZWJhcnMu
        YmluZC5jYWxsKGkscixuLCEwLGUpKToodChpLHIsbiksdm9pZCAwKX0pfSgp
        LGZ1bmN0aW9uKCl7e3ZhciBlPUVtYmVyLmdldDtFbWJlci5zZXR9RW1iZXIu
        SGFuZGxlYmFycy5yZWdpc3RlckhlbHBlcigieWllbGQiLGZ1bmN0aW9uKHQp
        e2Zvcih2YXIgcj10LmRhdGEudmlldztyJiYhZShyLCJsYXlvdXQiKTspcj1y
        Ll9jb250ZXh0Vmlldz9yLl9jb250ZXh0VmlldzplKHIsInBhcmVudFZpZXci
        KTtyLl95aWVsZCh0aGlzLHQpfSl9KCksZnVuY3Rpb24oKXtFbWJlci5IYW5k
        bGViYXJzLnJlZ2lzdGVySGVscGVyKCJsb2MiLGZ1bmN0aW9uKGUpe3JldHVy
        biBFbWJlci5TdHJpbmcubG9jKGUpfSl9KCksZnVuY3Rpb24oKXt7dmFyIGU9
        RW1iZXIuc2V0O0VtYmVyLmdldH1FbWJlci5DaGVja2JveD1FbWJlci5WaWV3
        LmV4dGVuZCh7Y2xhc3NOYW1lczpbImVtYmVyLWNoZWNrYm94Il0sdGFnTmFt
        ZToiaW5wdXQiLGF0dHJpYnV0ZUJpbmRpbmdzOlsidHlwZSIsImNoZWNrZWQi
        LCJpbmRldGVybWluYXRlIiwiZGlzYWJsZWQiLCJ0YWJpbmRleCIsIm5hbWUi
        XSx0eXBlOiJjaGVja2JveCIsY2hlY2tlZDohMSxkaXNhYmxlZDohMSxpbmRl
        dGVybWluYXRlOiExLGluaXQ6ZnVuY3Rpb24oKXt0aGlzLl9zdXBlcigpLHRo
        aXMub24oImNoYW5nZSIsdGhpcyx0aGlzLl91cGRhdGVFbGVtZW50VmFsdWUp
        fSxkaWRJbnNlcnRFbGVtZW50OmZ1bmN0aW9uKCl7dGhpcy5fc3VwZXIoKSx0
        aGlzLmdldCgiZWxlbWVudCIpLmluZGV0ZXJtaW5hdGU9ISF0aGlzLmdldCgi
        aW5kZXRlcm1pbmF0ZSIpfSxfdXBkYXRlRWxlbWVudFZhbHVlOmZ1bmN0aW9u
        KCl7ZSh0aGlzLCJjaGVja2VkIix0aGlzLiQoKS5wcm9wKCJjaGVja2VkIikp
        fX0pfSgpLGZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHIsbil7dmFyIGk9dChy
        LGUpLG89dChyLCJvbkV2ZW50IiksYT10KHIsInZhbHVlIik7KG89PT1lfHwi
        a2V5UHJlc3MiPT09byYmImtleS1wcmVzcyI9PT1lKSYmci5zZW5kQWN0aW9u
        KCJhY3Rpb24iLGEpLHIuc2VuZEFjdGlvbihlLGEpLChpfHxvPT09ZSkmJih0
        KHIsImJ1YmJsZXMiKXx8bi5zdG9wUHJvcGFnYXRpb24oKSl9dmFyIHQ9RW1i
        ZXIuZ2V0LHI9RW1iZXIuc2V0O0VtYmVyLlRleHRTdXBwb3J0PUVtYmVyLk1p
        eGluLmNyZWF0ZSh7dmFsdWU6IiIsYXR0cmlidXRlQmluZGluZ3M6WyJwbGFj
        ZWhvbGRlciIsImRpc2FibGVkIiwibWF4bGVuZ3RoIiwidGFiaW5kZXgiLCJy
        ZWFkb25seSJdLHBsYWNlaG9sZGVyOm51bGwsZGlzYWJsZWQ6ITEsbWF4bGVu
        Z3RoOm51bGwsaW5pdDpmdW5jdGlvbigpe3RoaXMuX3N1cGVyKCksdGhpcy5v
        bigiZm9jdXNPdXQiLHRoaXMsdGhpcy5fZWxlbWVudFZhbHVlRGlkQ2hhbmdl
        KSx0aGlzLm9uKCJjaGFuZ2UiLHRoaXMsdGhpcy5fZWxlbWVudFZhbHVlRGlk
        Q2hhbmdlKSx0aGlzLm9uKCJwYXN0ZSIsdGhpcyx0aGlzLl9lbGVtZW50VmFs
        dWVEaWRDaGFuZ2UpLHRoaXMub24oImN1dCIsdGhpcyx0aGlzLl9lbGVtZW50
        VmFsdWVEaWRDaGFuZ2UpLHRoaXMub24oImlucHV0Iix0aGlzLHRoaXMuX2Vs
        ZW1lbnRWYWx1ZURpZENoYW5nZSksdGhpcy5vbigia2V5VXAiLHRoaXMsdGhp
        cy5pbnRlcnByZXRLZXlFdmVudHMpfSxhY3Rpb246bnVsbCxvbkV2ZW50OiJl
        bnRlciIsYnViYmxlczohMSxpbnRlcnByZXRLZXlFdmVudHM6ZnVuY3Rpb24o
        ZSl7dmFyIHQ9RW1iZXIuVGV4dFN1cHBvcnQuS0VZX0VWRU5UUyxyPXRbZS5r
        ZXlDb2RlXTtyZXR1cm4gdGhpcy5fZWxlbWVudFZhbHVlRGlkQ2hhbmdlKCks
        cj90aGlzW3JdKGUpOnZvaWQgMH0sX2VsZW1lbnRWYWx1ZURpZENoYW5nZTpm
        dW5jdGlvbigpe3IodGhpcywidmFsdWUiLHRoaXMuJCgpLnZhbCgpKX0saW5z
        ZXJ0TmV3bGluZTpmdW5jdGlvbih0KXtlKCJlbnRlciIsdGhpcyx0KSxlKCJp
        bnNlcnQtbmV3bGluZSIsdGhpcyx0KX0sY2FuY2VsOmZ1bmN0aW9uKHQpe2Uo
        ImVzY2FwZS1wcmVzcyIsdGhpcyx0KX0sZm9jdXNJbjpmdW5jdGlvbih0KXtl
        KCJmb2N1cy1pbiIsdGhpcyx0KX0sZm9jdXNPdXQ6ZnVuY3Rpb24odCl7ZSgi
        Zm9jdXMtb3V0Iix0aGlzLHQpfSxrZXlQcmVzczpmdW5jdGlvbih0KXtlKCJr
        ZXktcHJlc3MiLHRoaXMsdCl9fSksRW1iZXIuVGV4dFN1cHBvcnQuS0VZX0VW
        RU5UUz17MTM6Imluc2VydE5ld2xpbmUiLDI3OiJjYW5jZWwifX0oKSxmdW5j
        dGlvbigpe0VtYmVyLmdldCxFbWJlci5zZXQ7RW1iZXIuVGV4dEZpZWxkPUVt
        YmVyLkNvbXBvbmVudC5leHRlbmQoRW1iZXIuVGV4dFN1cHBvcnQse2NsYXNz
        TmFtZXM6WyJlbWJlci10ZXh0LWZpZWxkIl0sdGFnTmFtZToiaW5wdXQiLGF0
        dHJpYnV0ZUJpbmRpbmdzOlsidHlwZSIsInZhbHVlIiwic2l6ZSIsInBhdHRl
        cm4iLCJuYW1lIiwibWluIiwibWF4Il0sdmFsdWU6IiIsdHlwZToidGV4dCIs
        c2l6ZTpudWxsLHBhdHRlcm46bnVsbCxtaW46bnVsbCxtYXg6bnVsbH0pfSgp
        LGZ1bmN0aW9uKCl7e3ZhciBlPUVtYmVyLmdldDtFbWJlci5zZXR9RW1iZXIu
        VGV4dEFyZWE9RW1iZXIuQ29tcG9uZW50LmV4dGVuZChFbWJlci5UZXh0U3Vw
        cG9ydCx7Y2xhc3NOYW1lczpbImVtYmVyLXRleHQtYXJlYSJdLHRhZ05hbWU6
        InRleHRhcmVhIixhdHRyaWJ1dGVCaW5kaW5nczpbInJvd3MiLCJjb2xzIiwi
        bmFtZSJdLHJvd3M6bnVsbCxjb2xzOm51bGwsX3VwZGF0ZUVsZW1lbnRWYWx1
        ZTpFbWJlci5vYnNlcnZlcigidmFsdWUiLGZ1bmN0aW9uKCl7dmFyIHQ9ZSh0
        aGlzLCJ2YWx1ZSIpLHI9dGhpcy4kKCk7ciYmdCE9PXIudmFsKCkmJnIudmFs
        KHQpfSksaW5pdDpmdW5jdGlvbigpe3RoaXMuX3N1cGVyKCksdGhpcy5vbigi
        ZGlkSW5zZXJ0RWxlbWVudCIsdGhpcyx0aGlzLl91cGRhdGVFbGVtZW50VmFs
        dWUpfX0pfSgpLGZ1bmN0aW9uKCl7e3ZhciBlPUVtYmVyLnNldCx0PUVtYmVy
        LmdldCxyPUVtYmVyLkVudW1lcmFibGVVdGlscy5pbmRleE9mLG49RW1iZXIu
        RW51bWVyYWJsZVV0aWxzLmluZGV4ZXNPZixpPUVtYmVyLkVudW1lcmFibGVV
        dGlscy5mb3JFYWNoLG89RW1iZXIuRW51bWVyYWJsZVV0aWxzLnJlcGxhY2Us
        YT1FbWJlci5pc0FycmF5O0VtYmVyLkhhbmRsZWJhcnMuY29tcGlsZX1FbWJl
        ci5TZWxlY3RPcHRpb249RW1iZXIuVmlldy5leHRlbmQoe3RhZ05hbWU6Im9w
        dGlvbiIsYXR0cmlidXRlQmluZGluZ3M6WyJ2YWx1ZSIsInNlbGVjdGVkIl0s
        ZGVmYXVsdFRlbXBsYXRlOmZ1bmN0aW9uKGUsdCl7dD17ZGF0YTp0LmRhdGEs
        aGFzaDp7fX0sRW1iZXIuSGFuZGxlYmFycy5oZWxwZXJzLmJpbmQuY2FsbChl
        LCJ2aWV3LmxhYmVsIix0KX0saW5pdDpmdW5jdGlvbigpe3RoaXMubGFiZWxQ
        YXRoRGlkQ2hhbmdlKCksdGhpcy52YWx1ZVBhdGhEaWRDaGFuZ2UoKSx0aGlz
        Ll9zdXBlcigpfSxzZWxlY3RlZDpFbWJlci5jb21wdXRlZChmdW5jdGlvbigp
        e3ZhciBlPXQodGhpcywiY29udGVudCIpLG49dCh0aGlzLCJwYXJlbnRWaWV3
        LnNlbGVjdGlvbiIpO3JldHVybiB0KHRoaXMsInBhcmVudFZpZXcubXVsdGlw
        bGUiKT9uJiZyKG4sZS52YWx1ZU9mKCkpPi0xOmU9PW59KS5wcm9wZXJ0eSgi
        Y29udGVudCIsInBhcmVudFZpZXcuc2VsZWN0aW9uIiksbGFiZWxQYXRoRGlk
        Q2hhbmdlOkVtYmVyLm9ic2VydmVyKCJwYXJlbnRWaWV3Lm9wdGlvbkxhYmVs
        UGF0aCIsZnVuY3Rpb24oKXt2YXIgZT10KHRoaXMsInBhcmVudFZpZXcub3B0
        aW9uTGFiZWxQYXRoIik7ZSYmRW1iZXIuZGVmaW5lUHJvcGVydHkodGhpcywi
        bGFiZWwiLEVtYmVyLmNvbXB1dGVkKGZ1bmN0aW9uKCl7cmV0dXJuIHQodGhp
        cyxlKX0pLnByb3BlcnR5KGUpKX0pLHZhbHVlUGF0aERpZENoYW5nZTpFbWJl
        ci5vYnNlcnZlcigicGFyZW50Vmlldy5vcHRpb25WYWx1ZVBhdGgiLGZ1bmN0
        aW9uKCl7dmFyIGU9dCh0aGlzLCJwYXJlbnRWaWV3Lm9wdGlvblZhbHVlUGF0
        aCIpOwplJiZFbWJlci5kZWZpbmVQcm9wZXJ0eSh0aGlzLCJ2YWx1ZSIsRW1i
        ZXIuY29tcHV0ZWQoZnVuY3Rpb24oKXtyZXR1cm4gdCh0aGlzLGUpfSkucHJv
        cGVydHkoZSkpfSl9KSxFbWJlci5TZWxlY3RPcHRncm91cD1FbWJlci5Db2xs
        ZWN0aW9uVmlldy5leHRlbmQoe3RhZ05hbWU6Im9wdGdyb3VwIixhdHRyaWJ1
        dGVCaW5kaW5nczpbImxhYmVsIl0sc2VsZWN0aW9uQmluZGluZzoicGFyZW50
        Vmlldy5zZWxlY3Rpb24iLG11bHRpcGxlQmluZGluZzoicGFyZW50Vmlldy5t
        dWx0aXBsZSIsb3B0aW9uTGFiZWxQYXRoQmluZGluZzoicGFyZW50Vmlldy5v
        cHRpb25MYWJlbFBhdGgiLG9wdGlvblZhbHVlUGF0aEJpbmRpbmc6InBhcmVu
        dFZpZXcub3B0aW9uVmFsdWVQYXRoIixpdGVtVmlld0NsYXNzQmluZGluZzoi
        cGFyZW50Vmlldy5vcHRpb25WaWV3In0pLEVtYmVyLlNlbGVjdD1FbWJlci5W
        aWV3LmV4dGVuZCh7dGFnTmFtZToic2VsZWN0IixjbGFzc05hbWVzOlsiZW1i
        ZXItc2VsZWN0Il0sZGVmYXVsdFRlbXBsYXRlOkVtYmVyLkhhbmRsZWJhcnMu
        dGVtcGxhdGUoZnVuY3Rpb24oZSx0LHIsbixpKXtmdW5jdGlvbiBvKGUsdCl7
        dmFyIG4saT0iIjtyZXR1cm4gdC5idWZmZXIucHVzaCgnPG9wdGlvbiB2YWx1
        ZT0iIj4nKSxuPXIuX3RyaWFnZU11c3RhY2hlLmNhbGwoZSwidmlldy5wcm9t
        cHQiLHtoYXNoOnt9LGhhc2hUeXBlczp7fSxoYXNoQ29udGV4dHM6e30sY29u
        dGV4dHM6W2VdLHR5cGVzOlsiSUQiXSxkYXRhOnR9KSwobnx8MD09PW4pJiZ0
        LmJ1ZmZlci5wdXNoKG4pLHQuYnVmZmVyLnB1c2goIjwvb3B0aW9uPiIpLGl9
        ZnVuY3Rpb24gYShlLHQpe3ZhciBuO249ci5lYWNoLmNhbGwoZSwidmlldy5n
        cm91cGVkQ29udGVudCIse2hhc2g6e30saGFzaFR5cGVzOnt9LGhhc2hDb250
        ZXh0czp7fSxpbnZlcnNlOmYubm9vcCxmbjpmLnByb2dyYW0oNCxzLHQpLGNv
        bnRleHRzOltlXSx0eXBlczpbIklEIl0sZGF0YTp0fSksbnx8MD09PW4/dC5i
        dWZmZXIucHVzaChuKTp0LmJ1ZmZlci5wdXNoKCIiKX1mdW5jdGlvbiBzKGUs
        dCl7dC5idWZmZXIucHVzaChtKHIudmlldy5jYWxsKGUsInZpZXcuZ3JvdXBW
        aWV3Iix7aGFzaDp7Y29udGVudDoiY29udGVudCIsbGFiZWw6ImxhYmVsIn0s
        aGFzaFR5cGVzOntjb250ZW50OiJJRCIsbGFiZWw6IklEIn0saGFzaENvbnRl
        eHRzOntjb250ZW50OmUsbGFiZWw6ZX0sY29udGV4dHM6W2VdLHR5cGVzOlsi
        SUQiXSxkYXRhOnR9KSkpfWZ1bmN0aW9uIHUoZSx0KXt2YXIgbjtuPXIuZWFj
        aC5jYWxsKGUsInZpZXcuY29udGVudCIse2hhc2g6e30saGFzaFR5cGVzOnt9
        LGhhc2hDb250ZXh0czp7fSxpbnZlcnNlOmYubm9vcCxmbjpmLnByb2dyYW0o
        NyxsLHQpLGNvbnRleHRzOltlXSx0eXBlczpbIklEIl0sZGF0YTp0fSksbnx8
        MD09PW4/dC5idWZmZXIucHVzaChuKTp0LmJ1ZmZlci5wdXNoKCIiKX1mdW5j
        dGlvbiBsKGUsdCl7dC5idWZmZXIucHVzaChtKHIudmlldy5jYWxsKGUsInZp
        ZXcub3B0aW9uVmlldyIse2hhc2g6e2NvbnRlbnQ6IiJ9LGhhc2hUeXBlczp7
        Y29udGVudDoiSUQifSxoYXNoQ29udGV4dHM6e2NvbnRlbnQ6ZX0sY29udGV4
        dHM6W2VdLHR5cGVzOlsiSUQiXSxkYXRhOnR9KSkpfXRoaXMuY29tcGlsZXJJ
        bmZvPVs0LCI+PSAxLjAuMCJdLHI9dGhpcy5tZXJnZShyLEVtYmVyLkhhbmRs
        ZWJhcnMuaGVscGVycyksaT1pfHx7fTt2YXIgYyxoPSIiLG09dGhpcy5lc2Nh
        cGVFeHByZXNzaW9uLGY9dGhpcztyZXR1cm4gYz1yWyJpZiJdLmNhbGwodCwi
        dmlldy5wcm9tcHQiLHtoYXNoOnt9LGhhc2hUeXBlczp7fSxoYXNoQ29udGV4
        dHM6e30saW52ZXJzZTpmLm5vb3AsZm46Zi5wcm9ncmFtKDEsbyxpKSxjb250
        ZXh0czpbdF0sdHlwZXM6WyJJRCJdLGRhdGE6aX0pLChjfHwwPT09YykmJmku
        YnVmZmVyLnB1c2goYyksYz1yWyJpZiJdLmNhbGwodCwidmlldy5vcHRpb25H
        cm91cFBhdGgiLHtoYXNoOnt9LGhhc2hUeXBlczp7fSxoYXNoQ29udGV4dHM6
        e30saW52ZXJzZTpmLnByb2dyYW0oNix1LGkpLGZuOmYucHJvZ3JhbSgzLGEs
        aSksY29udGV4dHM6W3RdLHR5cGVzOlsiSUQiXSxkYXRhOml9KSwoY3x8MD09
        PWMpJiZpLmJ1ZmZlci5wdXNoKGMpLGh9KSxhdHRyaWJ1dGVCaW5kaW5nczpb
        Im11bHRpcGxlIiwiZGlzYWJsZWQiLCJ0YWJpbmRleCIsIm5hbWUiXSxtdWx0
        aXBsZTohMSxkaXNhYmxlZDohMSxjb250ZW50Om51bGwsc2VsZWN0aW9uOm51
        bGwsdmFsdWU6RW1iZXIuY29tcHV0ZWQoZnVuY3Rpb24oZSxyKXtpZigyPT09
        YXJndW1lbnRzLmxlbmd0aClyZXR1cm4gcjt2YXIgbj10KHRoaXMsIm9wdGlv
        blZhbHVlUGF0aCIpLnJlcGxhY2UoL15jb250ZW50XC4/LywiIik7cmV0dXJu
        IG4/dCh0aGlzLCJzZWxlY3Rpb24uIituKTp0KHRoaXMsInNlbGVjdGlvbiIp
        fSkucHJvcGVydHkoInNlbGVjdGlvbiIpLHByb21wdDpudWxsLG9wdGlvbkxh
        YmVsUGF0aDoiY29udGVudCIsb3B0aW9uVmFsdWVQYXRoOiJjb250ZW50Iixv
        cHRpb25Hcm91cFBhdGg6bnVsbCxncm91cFZpZXc6RW1iZXIuU2VsZWN0T3B0
        Z3JvdXAsZ3JvdXBlZENvbnRlbnQ6RW1iZXIuY29tcHV0ZWQoZnVuY3Rpb24o
        KXt2YXIgZT10KHRoaXMsIm9wdGlvbkdyb3VwUGF0aCIpLHI9RW1iZXIuQSgp
        LG49dCh0aGlzLCJjb250ZW50Iil8fFtdO3JldHVybiBpKG4sZnVuY3Rpb24o
        bil7dmFyIGk9dChuLGUpO3QociwibGFzdE9iamVjdC5sYWJlbCIpIT09aSYm
        ci5wdXNoT2JqZWN0KHtsYWJlbDppLGNvbnRlbnQ6RW1iZXIuQSgpfSksdChy
        LCJsYXN0T2JqZWN0LmNvbnRlbnQiKS5wdXNoKG4pfSkscn0pLnByb3BlcnR5
        KCJvcHRpb25Hcm91cFBhdGgiLCJjb250ZW50LkBlYWNoIiksb3B0aW9uVmll
        dzpFbWJlci5TZWxlY3RPcHRpb24sX2NoYW5nZTpmdW5jdGlvbigpe3QodGhp
        cywibXVsdGlwbGUiKT90aGlzLl9jaGFuZ2VNdWx0aXBsZSgpOnRoaXMuX2No
        YW5nZVNpbmdsZSgpfSxzZWxlY3Rpb25EaWRDaGFuZ2U6RW1iZXIub2JzZXJ2
        ZXIoInNlbGVjdGlvbi5AZWFjaCIsZnVuY3Rpb24oKXt2YXIgcj10KHRoaXMs
        InNlbGVjdGlvbiIpO2lmKHQodGhpcywibXVsdGlwbGUiKSl7aWYoIWEocikp
        cmV0dXJuIGUodGhpcywic2VsZWN0aW9uIixFbWJlci5BKFtyXSkpLHZvaWQg
        MDt0aGlzLl9zZWxlY3Rpb25EaWRDaGFuZ2VNdWx0aXBsZSgpfWVsc2UgdGhp
        cy5fc2VsZWN0aW9uRGlkQ2hhbmdlU2luZ2xlKCl9KSx2YWx1ZURpZENoYW5n
        ZTpFbWJlci5vYnNlcnZlcigidmFsdWUiLGZ1bmN0aW9uKCl7dmFyIGUscj10
        KHRoaXMsImNvbnRlbnQiKSxuPXQodGhpcywidmFsdWUiKSxpPXQodGhpcywi
        b3B0aW9uVmFsdWVQYXRoIikucmVwbGFjZSgvXmNvbnRlbnRcLj8vLCIiKSxv
        PWk/dCh0aGlzLCJzZWxlY3Rpb24uIitpKTp0KHRoaXMsInNlbGVjdGlvbiIp
        O24hPT1vJiYoZT1yP3IuZmluZChmdW5jdGlvbihlKXtyZXR1cm4gbj09PShp
        P3QoZSxpKTplKX0pOm51bGwsdGhpcy5zZXQoInNlbGVjdGlvbiIsZSkpfSks
        X3RyaWdnZXJDaGFuZ2U6ZnVuY3Rpb24oKXt2YXIgZT10KHRoaXMsInNlbGVj
        dGlvbiIpLHI9dCh0aGlzLCJ2YWx1ZSIpO0VtYmVyLmlzTm9uZShlKXx8dGhp
        cy5zZWxlY3Rpb25EaWRDaGFuZ2UoKSxFbWJlci5pc05vbmUocil8fHRoaXMu
        dmFsdWVEaWRDaGFuZ2UoKSx0aGlzLl9jaGFuZ2UoKX0sX2NoYW5nZVNpbmds
        ZTpmdW5jdGlvbigpe3ZhciByPXRoaXMuJCgpWzBdLnNlbGVjdGVkSW5kZXgs
        bj10KHRoaXMsImNvbnRlbnQiKSxpPXQodGhpcywicHJvbXB0Iik7aWYobiYm
        dChuLCJsZW5ndGgiKSl7aWYoaSYmMD09PXIpcmV0dXJuIGUodGhpcywic2Vs
        ZWN0aW9uIixudWxsKSx2b2lkIDA7aSYmKHItPTEpLGUodGhpcywic2VsZWN0
        aW9uIixuLm9iamVjdEF0KHIpKX19LF9jaGFuZ2VNdWx0aXBsZTpmdW5jdGlv
        bigpe3ZhciByPXRoaXMuJCgib3B0aW9uOnNlbGVjdGVkIiksbj10KHRoaXMs
        InByb21wdCIpLGk9bj8xOjAscz10KHRoaXMsImNvbnRlbnQiKSx1PXQodGhp
        cywic2VsZWN0aW9uIik7aWYocyYmcil7dmFyIGw9ci5tYXAoZnVuY3Rpb24o
        KXtyZXR1cm4gdGhpcy5pbmRleC1pfSkudG9BcnJheSgpLGM9cy5vYmplY3Rz
        QXQobCk7YSh1KT9vKHUsMCx0KHUsImxlbmd0aCIpLGMpOmUodGhpcywic2Vs
        ZWN0aW9uIixjKX19LF9zZWxlY3Rpb25EaWRDaGFuZ2VTaW5nbGU6ZnVuY3Rp
        b24oKXt2YXIgZT10aGlzLmdldCgiZWxlbWVudCIpO2lmKGUpe3ZhciBuPXQo
        dGhpcywiY29udGVudCIpLGk9dCh0aGlzLCJzZWxlY3Rpb24iKSxvPW4/cihu
        LGkpOi0xLGE9dCh0aGlzLCJwcm9tcHQiKTthJiYobys9MSksZSYmKGUuc2Vs
        ZWN0ZWRJbmRleD1vKX19LF9zZWxlY3Rpb25EaWRDaGFuZ2VNdWx0aXBsZTpm
        dW5jdGlvbigpe3ZhciBlLGk9dCh0aGlzLCJjb250ZW50Iiksbz10KHRoaXMs
        InNlbGVjdGlvbiIpLGE9aT9uKGksbyk6Wy0xXSxzPXQodGhpcywicHJvbXB0
        IiksdT1zPzE6MCxsPXRoaXMuJCgib3B0aW9uIik7bCYmbC5lYWNoKGZ1bmN0
        aW9uKCl7ZT10aGlzLmluZGV4Pi0xP3RoaXMuaW5kZXgtdTotMSx0aGlzLnNl
        bGVjdGVkPXIoYSxlKT4tMX0pfSxpbml0OmZ1bmN0aW9uKCl7dGhpcy5fc3Vw
        ZXIoKSx0aGlzLm9uKCJkaWRJbnNlcnRFbGVtZW50Iix0aGlzLHRoaXMuX3Ry
        aWdnZXJDaGFuZ2UpLHRoaXMub24oImNoYW5nZSIsdGhpcyx0aGlzLl9jaGFu
        Z2UpfX0pfSgpLGZ1bmN0aW9uKCl7RW1iZXIuSGFuZGxlYmFycy5yZWdpc3Rl
        ckhlbHBlcigiaW5wdXQiLGZ1bmN0aW9uKGUpe3ZhciB0PWUuaGFzaCxyPShl
        Lmhhc2hUeXBlcyx0LnR5cGUpLG49dC5vbjtyZXR1cm4gZGVsZXRlIHQudHlw
        ZSxkZWxldGUgdC5vbiwiY2hlY2tib3giPT09cj9FbWJlci5IYW5kbGViYXJz
        LmhlbHBlcnMudmlldy5jYWxsKHRoaXMsRW1iZXIuQ2hlY2tib3gsZSk6KHIm
        Jih0LnR5cGU9ciksdC5vbkV2ZW50PW58fCJlbnRlciIsRW1iZXIuSGFuZGxl
        YmFycy5oZWxwZXJzLnZpZXcuY2FsbCh0aGlzLEVtYmVyLlRleHRGaWVsZCxl
        KSl9KSxFbWJlci5IYW5kbGViYXJzLnJlZ2lzdGVySGVscGVyKCJ0ZXh0YXJl
        YSIsZnVuY3Rpb24oZSl7ZS5oYXNoLGUuaGFzaFR5cGVzO3JldHVybiBFbWJl
        ci5IYW5kbGViYXJzLmhlbHBlcnMudmlldy5jYWxsKHRoaXMsRW1iZXIuVGV4
        dEFyZWEsZSl9KX0oKSxmdW5jdGlvbigpe0VtYmVyLkNvbXBvbmVudExvb2t1
        cD1FbWJlci5PYmplY3QuZXh0ZW5kKHtsb29rdXBGYWN0b3J5OmZ1bmN0aW9u
        KGUsdCl7dD10fHx0aGlzLmNvbnRhaW5lcjt2YXIgcj0iY29tcG9uZW50OiIr
        ZSxuPSJ0ZW1wbGF0ZTpjb21wb25lbnRzLyIrZSxpPXQmJnQuaGFzKG4pO2km
        JnQuaW5qZWN0aW9uKHIsImxheW91dCIsbik7dmFyIG89dC5sb29rdXBGYWN0
        b3J5KHIpO3JldHVybiBpfHxvPyhvfHwodC5yZWdpc3RlcihyLEVtYmVyLkNv
        bXBvbmVudCksbz10Lmxvb2t1cEZhY3RvcnkocikpLG8pOnZvaWQgMH19KX0o
        KSxmdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXtFbWJlci5IYW5kbGViYXJzLmJv
        b3RzdHJhcChFbWJlci4kKGRvY3VtZW50KSl9ZnVuY3Rpb24gdChlKXtlLnJl
        Z2lzdGVyKCJjb21wb25lbnQtbG9va3VwOm1haW4iLEVtYmVyLkNvbXBvbmVu
        dExvb2t1cCl9RW1iZXIuSGFuZGxlYmFycy5ib290c3RyYXA9ZnVuY3Rpb24o
        ZSl7dmFyIHQ9J3NjcmlwdFt0eXBlPSJ0ZXh0L3gtaGFuZGxlYmFycyJdLCBz
        Y3JpcHRbdHlwZT0idGV4dC94LXJhdy1oYW5kbGViYXJzIl0nO0VtYmVyLiQo
        dCxlKS5lYWNoKGZ1bmN0aW9uKCl7dmFyIGU9RW1iZXIuJCh0aGlzKSx0PSJ0
        ZXh0L3gtcmF3LWhhbmRsZWJhcnMiPT09ZS5hdHRyKCJ0eXBlIik/RW1iZXIu
        JC5wcm94eShIYW5kbGViYXJzLmNvbXBpbGUsSGFuZGxlYmFycyk6RW1iZXIu
        JC5wcm94eShFbWJlci5IYW5kbGViYXJzLmNvbXBpbGUsRW1iZXIuSGFuZGxl
        YmFycykscj1lLmF0dHIoImRhdGEtdGVtcGxhdGUtbmFtZSIpfHxlLmF0dHIo
        ImlkIil8fCJhcHBsaWNhdGlvbiIsbj10KGUuaHRtbCgpKTtpZih2b2lkIDAh
        PT1FbWJlci5URU1QTEFURVNbcl0pdGhyb3cgbmV3IEVtYmVyLkVycm9yKCdU
        ZW1wbGF0ZSBuYW1lZCAiJytyKyciIGFscmVhZHkgZXhpc3RzLicpO0VtYmVy
        LlRFTVBMQVRFU1tyXT1uLGUucmVtb3ZlKCl9KX0sRW1iZXIub25Mb2FkKCJF
        bWJlci5BcHBsaWNhdGlvbiIsZnVuY3Rpb24ocil7ci5pbml0aWFsaXplcih7
        bmFtZToiZG9tVGVtcGxhdGVzIixpbml0aWFsaXplOmV9KSxyLmluaXRpYWxp
        emVyKHtuYW1lOiJyZWdpc3RlckNvbXBvbmVudExvb2t1cCIsYWZ0ZXI6ImRv
        bVRlbXBsYXRlcyIsaW5pdGlhbGl6ZTp0fSl9KX0oKSxmdW5jdGlvbigpe0Vt
        YmVyLnJ1bkxvYWRIb29rcygiRW1iZXIuSGFuZGxlYmFycyIsRW1iZXIuSGFu
        ZGxlYmFycyl9KCksZnVuY3Rpb24oKXtlKCJyb3V0ZS1yZWNvZ25pemVyIixb
        ImV4cG9ydHMiXSxmdW5jdGlvbihlKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24g
        dChlKXt0aGlzLnN0cmluZz1lfWZ1bmN0aW9uIHIoZSl7dGhpcy5uYW1lPWV9
        ZnVuY3Rpb24gbihlKXt0aGlzLm5hbWU9ZX1mdW5jdGlvbiBpKCl7fWZ1bmN0
        aW9uIG8oZSxvLGEpeyIvIj09PWUuY2hhckF0KDApJiYoZT1lLnN1YnN0cigx
        KSk7Zm9yKHZhciBzPWUuc3BsaXQoIi8iKSx1PVtdLGw9MCxjPXMubGVuZ3Ro
        O2M+bDtsKyspe3ZhciBoLG09c1tsXTsoaD1tLm1hdGNoKC9eOihbXlwvXSsp
        JC8pKT8odS5wdXNoKG5ldyByKGhbMV0pKSxvLnB1c2goaFsxXSksYS5keW5h
        bWljcysrKTooaD1tLm1hdGNoKC9eXCooW15cL10rKSQvKSk/KHUucHVzaChu
        ZXcgbihoWzFdKSksby5wdXNoKGhbMV0pLGEuc3RhcnMrKyk6IiI9PT1tP3Uu
        cHVzaChuZXcgaSk6KHUucHVzaChuZXcgdChtKSksYS5zdGF0aWNzKyspfXJl
        dHVybiB1fWZ1bmN0aW9uIGEoZSl7dGhpcy5jaGFyU3BlYz1lLHRoaXMubmV4
        dFN0YXRlcz1bXX1mdW5jdGlvbiBzKGUpe3JldHVybiBlLnNvcnQoZnVuY3Rp
        b24oZSx0KXtyZXR1cm4gZS50eXBlcy5zdGFycyE9PXQudHlwZXMuc3RhcnM/
        ZS50eXBlcy5zdGFycy10LnR5cGVzLnN0YXJzOmUudHlwZXMuZHluYW1pY3Mh
        PT10LnR5cGVzLmR5bmFtaWNzP2UudHlwZXMuZHluYW1pY3MtdC50eXBlcy5k
        eW5hbWljczplLnR5cGVzLnN0YXRpY3MhPT10LnR5cGVzLnN0YXRpY3M/dC50
        eXBlcy5zdGF0aWNzLWUudHlwZXMuc3RhdGljczowfSl9ZnVuY3Rpb24gdShl
        LHQpe2Zvcih2YXIgcj1bXSxuPTAsaT1lLmxlbmd0aDtpPm47bisrKXt2YXIg
        bz1lW25dO3I9ci5jb25jYXQoby5tYXRjaCh0KSl9cmV0dXJuIHJ9ZnVuY3Rp
        b24gbChlKXt0aGlzLnF1ZXJ5UGFyYW1zPWV8fHt9fWZ1bmN0aW9uIGMoZSx0
        LHIpe2Zvcih2YXIgbj1lLmhhbmRsZXJzLGk9ZS5yZWdleCxvPXQubWF0Y2go
        aSksYT0xLHM9bmV3IGwociksdT0wLGM9bi5sZW5ndGg7Yz51O3UrKyl7Zm9y
        KHZhciBoPW5bdV0sbT1oLm5hbWVzLGY9e30scD0wLGQ9bS5sZW5ndGg7ZD5w
        O3ArKylmW21bcF1dPW9bYSsrXTtzLnB1c2goe2hhbmRsZXI6aC5oYW5kbGVy
        LHBhcmFtczpmLGlzRHluYW1pYzohIW0ubGVuZ3RofSl9cmV0dXJuIHN9ZnVu
        Y3Rpb24gaChlLHQpe3JldHVybiB0LmVhY2hDaGFyKGZ1bmN0aW9uKHQpe2U9
        ZS5wdXQodCl9KSxlfWZ1bmN0aW9uIG0oZSx0LHIpe3RoaXMucGF0aD1lLHRo
        aXMubWF0Y2hlcj10LHRoaXMuZGVsZWdhdGU9cn1mdW5jdGlvbiBmKGUpe3Ro
        aXMucm91dGVzPXt9LHRoaXMuY2hpbGRyZW49e30sdGhpcy50YXJnZXQ9ZX1m
        dW5jdGlvbiBwKGUsdCxyKXtyZXR1cm4gZnVuY3Rpb24obixpKXt2YXIgbz1l
        K247cmV0dXJuIGk/KGkocChvLHQscikpLHZvaWQgMCk6bmV3IG0oZStuLHQs
        cil9fWZ1bmN0aW9uIGQoZSx0LHIpe2Zvcih2YXIgbj0wLGk9MCxvPWUubGVu
        Z3RoO28+aTtpKyspbis9ZVtpXS5wYXRoLmxlbmd0aDt0PXQuc3Vic3RyKG4p
        O3ZhciBhPXtwYXRoOnQsaGFuZGxlcjpyfTtlLnB1c2goYSl9ZnVuY3Rpb24g
        YihlLHQscixuKXt2YXIgaT10LnJvdXRlcztmb3IodmFyIG8gaW4gaSlpZihp
        Lmhhc093blByb3BlcnR5KG8pKXt2YXIgYT1lLnNsaWNlKCk7ZChhLG8saVtv
        XSksdC5jaGlsZHJlbltvXT9iKGEsdC5jaGlsZHJlbltvXSxyLG4pOnIuY2Fs
        bChuLGEpfX12YXIgdj1bIi8iLCIuIiwiKiIsIisiLCI/IiwifCIsIigiLCIp
        IiwiWyIsIl0iLCJ7IiwifSIsIlxcIl0sRT1uZXcgUmVnRXhwKCIoXFwiK3Yu
        am9pbigifFxcIikrIikiLCJnIik7dC5wcm90b3R5cGU9e2VhY2hDaGFyOmZ1
        bmN0aW9uKGUpe2Zvcih2YXIgdCxyPXRoaXMuc3RyaW5nLG49MCxpPXIubGVu
        Z3RoO2k+bjtuKyspdD1yLmNoYXJBdChuKSxlKHt2YWxpZENoYXJzOnR9KX0s
        cmVnZXg6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zdHJpbmcucmVwbGFjZShF
        LCJcXCQxIil9LGdlbmVyYXRlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc3Ry
        aW5nfX0sci5wcm90b3R5cGU9e2VhY2hDaGFyOmZ1bmN0aW9uKGUpe2Uoe2lu
        dmFsaWRDaGFyczoiLyIscmVwZWF0OiEwfSl9LHJlZ2V4OmZ1bmN0aW9uKCl7
        cmV0dXJuIihbXi9dKykifSxnZW5lcmF0ZTpmdW5jdGlvbihlKXtyZXR1cm4g
        ZVt0aGlzLm5hbWVdfX0sbi5wcm90b3R5cGU9e2VhY2hDaGFyOmZ1bmN0aW9u
        KGUpe2Uoe2ludmFsaWRDaGFyczoiIixyZXBlYXQ6ITB9KX0scmVnZXg6ZnVu
        Y3Rpb24oKXtyZXR1cm4iKC4rKSJ9LGdlbmVyYXRlOmZ1bmN0aW9uKGUpe3Jl
        dHVybiBlW3RoaXMubmFtZV19fSxpLnByb3RvdHlwZT17ZWFjaENoYXI6ZnVu
        Y3Rpb24oKXt9LHJlZ2V4OmZ1bmN0aW9uKCl7cmV0dXJuIiJ9LGdlbmVyYXRl
        OmZ1bmN0aW9uKCl7cmV0dXJuIiJ9fSxhLnByb3RvdHlwZT17Z2V0OmZ1bmN0
        aW9uKGUpe2Zvcih2YXIgdD10aGlzLm5leHRTdGF0ZXMscj0wLG49dC5sZW5n
        dGg7bj5yO3IrKyl7dmFyIGk9dFtyXSxvPWkuY2hhclNwZWMudmFsaWRDaGFy
        cz09PWUudmFsaWRDaGFycztpZihvPW8mJmkuY2hhclNwZWMuaW52YWxpZENo
        YXJzPT09ZS5pbnZhbGlkQ2hhcnMpcmV0dXJuIGl9fSxwdXQ6ZnVuY3Rpb24o
        ZSl7dmFyIHQ7cmV0dXJuKHQ9dGhpcy5nZXQoZSkpP3Q6KHQ9bmV3IGEoZSks
        dGhpcy5uZXh0U3RhdGVzLnB1c2godCksZS5yZXBlYXQmJnQubmV4dFN0YXRl
        cy5wdXNoKHQpLHQpfSxtYXRjaDpmdW5jdGlvbihlKXtmb3IodmFyIHQscixu
        LGk9dGhpcy5uZXh0U3RhdGVzLG89W10sYT0wLHM9aS5sZW5ndGg7cz5hO2Er
        Kyl0PWlbYV0scj10LmNoYXJTcGVjLCJ1bmRlZmluZWQiIT10eXBlb2Yobj1y
        LnZhbGlkQ2hhcnMpPy0xIT09bi5pbmRleE9mKGUpJiZvLnB1c2godCk6InVu
        ZGVmaW5lZCIhPXR5cGVvZihuPXIuaW52YWxpZENoYXJzKSYmLTE9PT1uLmlu
        ZGV4T2YoZSkmJm8ucHVzaCh0KTtyZXR1cm4gb319O3ZhciBnPU9iamVjdC5j
        cmVhdGV8fGZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoKXt9cmV0dXJuIHQucHJv
        dG90eXBlPWUsbmV3IHR9O2wucHJvdG90eXBlPWcoe3NwbGljZTpBcnJheS5w
        cm90b3R5cGUuc3BsaWNlLHNsaWNlOkFycmF5LnByb3RvdHlwZS5zbGljZSxw
        dXNoOkFycmF5LnByb3RvdHlwZS5wdXNoLGxlbmd0aDowLHF1ZXJ5UGFyYW1z
        Om51bGx9KTt2YXIgeT1mdW5jdGlvbigpe3RoaXMucm9vdFN0YXRlPW5ldyBh
        LHRoaXMubmFtZXM9e319O3kucHJvdG90eXBlPXthZGQ6ZnVuY3Rpb24oZSx0
        KXtmb3IodmFyIHIsbj10aGlzLnJvb3RTdGF0ZSxhPSJeIixzPXtzdGF0aWNz
        OjAsZHluYW1pY3M6MCxzdGFyczowfSx1PVtdLGw9W10sYz0hMCxtPTAsZj1l
        Lmxlbmd0aDtmPm07bSsrKXt2YXIgcD1lW21dLGQ9W10sYj1vKHAucGF0aCxk
        LHMpO2w9bC5jb25jYXQoYik7Zm9yKHZhciB2PTAsRT1iLmxlbmd0aDtFPnY7
        disrKXt2YXIgZz1iW3ZdO2cgaW5zdGFuY2VvZiBpfHwoYz0hMSxuPW4ucHV0
        KHt2YWxpZENoYXJzOiIvIn0pLGErPSIvIixuPWgobixnKSxhKz1nLnJlZ2V4
        KCkpfXZhciB5PXtoYW5kbGVyOnAuaGFuZGxlcixuYW1lczpkfTt1LnB1c2go
        eSl9YyYmKG49bi5wdXQoe3ZhbGlkQ2hhcnM6Ii8ifSksYSs9Ii8iKSxuLmhh
        bmRsZXJzPXUsbi5yZWdleD1uZXcgUmVnRXhwKGErIiQiKSxuLnR5cGVzPXMs
        KHI9dCYmdC5hcykmJih0aGlzLm5hbWVzW3JdPXtzZWdtZW50czpsLGhhbmRs
        ZXJzOnV9KX0saGFuZGxlcnNGb3I6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5u
        YW1lc1tlXSxyPVtdO2lmKCF0KXRocm93IG5ldyBFcnJvcigiVGhlcmUgaXMg
        bm8gcm91dGUgbmFtZWQgIitlKTtmb3IodmFyIG49MCxpPXQuaGFuZGxlcnMu
        bGVuZ3RoO2k+bjtuKyspci5wdXNoKHQuaGFuZGxlcnNbbl0pO3JldHVybiBy
        fSxoYXNSb3V0ZTpmdW5jdGlvbihlKXtyZXR1cm4hIXRoaXMubmFtZXNbZV19
        LGdlbmVyYXRlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcy5uYW1lc1tlXSxu
        PSIiO2lmKCFyKXRocm93IG5ldyBFcnJvcigiVGhlcmUgaXMgbm8gcm91dGUg
        bmFtZWQgIitlKTtmb3IodmFyIG89ci5zZWdtZW50cyxhPTAscz1vLmxlbmd0
        aDtzPmE7YSsrKXt2YXIgdT1vW2FdO3UgaW5zdGFuY2VvZiBpfHwobis9Ii8i
        LG4rPXUuZ2VuZXJhdGUodCkpfXJldHVybiIvIiE9PW4uY2hhckF0KDApJiYo
        bj0iLyIrbiksdCYmdC5xdWVyeVBhcmFtcyYmKG4rPXRoaXMuZ2VuZXJhdGVR
        dWVyeVN0cmluZyh0LnF1ZXJ5UGFyYW1zLHIuaGFuZGxlcnMpKSxufSxnZW5l
        cmF0ZVF1ZXJ5U3RyaW5nOmZ1bmN0aW9uKGUpe3ZhciB0PVtdO2Zvcih2YXIg
        ciBpbiBlKWlmKGUuaGFzT3duUHJvcGVydHkocikpe3ZhciBuPWVbcl07aWYo
        bj09PSExfHxudWxsPT1uKWNvbnRpbnVlO3ZhciBpPXI7aWYoQXJyYXkuaXNB
        cnJheShuKSlmb3IodmFyIG89MCxhPW4ubGVuZ3RoO2E+bztvKyspe3ZhciBz
        PXIrIltdPSIrZW5jb2RlVVJJQ29tcG9uZW50KG5bb10pO3QucHVzaChzKX1l
        bHNlIG4hPT0hMD8oaSs9Ij0iK2VuY29kZVVSSUNvbXBvbmVudChuKSx0LnB1
        c2goaSkpOnQucHVzaChpKX1yZXR1cm4gMD09PXQubGVuZ3RoPyIiOiI/Iit0
        LmpvaW4oIiYiKX0scGFyc2VRdWVyeVN0cmluZzpmdW5jdGlvbihlKXtmb3Io
        dmFyIHQ9ZS5zcGxpdCgiJiIpLHI9e30sbj0wO248dC5sZW5ndGg7bisrKXt2
        YXIgaSxvPXRbbl0uc3BsaXQoIj0iKSxhPWRlY29kZVVSSUNvbXBvbmVudChv
        WzBdKSxzPWEubGVuZ3RoLHU9ITE7MT09PW8ubGVuZ3RoP2k9ITA6KHM+MiYm
        IltdIj09PWEuc2xpY2Uocy0yKSYmKHU9ITAsYT1hLnNsaWNlKDAscy0yKSxy
        W2FdfHwoclthXT1bXSkpLGk9b1sxXT9kZWNvZGVVUklDb21wb25lbnQob1sx
        XSk6IiIpLHU/clthXS5wdXNoKGkpOnJbYV09aX1yZXR1cm4gcn0scmVjb2du
        aXplOmZ1bmN0aW9uKGUpe3ZhciB0LHIsbixpLG89W3RoaXMucm9vdFN0YXRl
        XSxhPXt9LGw9ITE7aWYoaT1lLmluZGV4T2YoIj8iKSwtMSE9PWkpe3ZhciBo
        PWUuc3Vic3RyKGkrMSxlLmxlbmd0aCk7ZT1lLnN1YnN0cigwLGkpLGE9dGhp
        cy5wYXJzZVF1ZXJ5U3RyaW5nKGgpfWZvcigiLyIhPT1lLmNoYXJBdCgwKSYm
        KGU9Ii8iK2UpLHQ9ZS5sZW5ndGgsdD4xJiYiLyI9PT1lLmNoYXJBdCh0LTEp
        JiYoZT1lLnN1YnN0cigwLHQtMSksbD0hMCkscj0wLG49ZS5sZW5ndGg7bj5y
        JiYobz11KG8sZS5jaGFyQXQocikpLG8ubGVuZ3RoKTtyKyspO3ZhciBtPVtd
        O2ZvcihyPTAsbj1vLmxlbmd0aDtuPnI7cisrKW9bcl0uaGFuZGxlcnMmJm0u
        cHVzaChvW3JdKTtvPXMobSk7dmFyIGY9bVswXTtyZXR1cm4gZiYmZi5oYW5k
        bGVycz8obCYmIiguKykkIj09PWYucmVnZXguc291cmNlLnNsaWNlKC01KSYm
        KGUrPSIvIiksYyhmLGUsYSkpOnZvaWQgMH19LGVbImRlZmF1bHQiXT15LG0u
        cHJvdG90eXBlPXt0bzpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXMuZGVsZWdh
        dGU7aWYociYmci53aWxsQWRkUm91dGUmJihlPXIud2lsbEFkZFJvdXRlKHRo
        aXMubWF0Y2hlci50YXJnZXQsZSkpLHRoaXMubWF0Y2hlci5hZGQodGhpcy5w
        YXRoLGUpLHQpe2lmKDA9PT10Lmxlbmd0aCl0aHJvdyBuZXcgRXJyb3IoIllv
        dSBtdXN0IGhhdmUgYW4gYXJndW1lbnQgaW4gdGhlIGZ1bmN0aW9uIHBhc3Nl
        ZCB0byBgdG9gIik7dGhpcy5tYXRjaGVyLmFkZENoaWxkKHRoaXMucGF0aCxl
        LHQsdGhpcy5kZWxlZ2F0ZSl9cmV0dXJuIHRoaXN9fSxmLnByb3RvdHlwZT17
        YWRkOmZ1bmN0aW9uKGUsdCl7dGhpcy5yb3V0ZXNbZV09dH0sYWRkQ2hpbGQ6
        ZnVuY3Rpb24oZSx0LHIsbil7dmFyIGk9bmV3IGYodCk7dGhpcy5jaGlsZHJl
        bltlXT1pO3ZhciBvPXAoZSxpLG4pO24mJm4uY29udGV4dEVudGVyZWQmJm4u
        Y29udGV4dEVudGVyZWQodCxvKSxyKG8pfX0seS5wcm90b3R5cGUubWFwPWZ1
        bmN0aW9uKGUsdCl7dmFyIHI9bmV3IGY7ZShwKCIiLHIsdGhpcy5kZWxlZ2F0
        ZSkpLGIoW10scixmdW5jdGlvbihlKXt0P3QodGhpcyxlKTp0aGlzLmFkZChl
        KX0sdGhpcyl9fSl9KCksZnVuY3Rpb24oKXtlKCJyb3V0ZXIvaGFuZGxlci1p
        bmZvIixbIi4vdXRpbHMiLCJyc3ZwIiwiZXhwb3J0cyJdLGZ1bmN0aW9uKGUs
        dCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gbihlKXtlJiZsKHRoaXMsZSl9
        ZnVuY3Rpb24gaShlKXtuLmNhbGwodGhpcyxlKX1mdW5jdGlvbiBvKGUpe24u
        Y2FsbCh0aGlzLGUpLHRoaXMucGFyYW1zPXRoaXMucGFyYW1zfHx7fX1mdW5j
        dGlvbiBhKGUpe24uY2FsbCh0aGlzLGUpfWZ1bmN0aW9uIHMoZSx0KXtpZigh
        ZV4hdClyZXR1cm4hMTtpZighZSlyZXR1cm4hMDtmb3IodmFyIHIgaW4gZSlp
        ZihlLmhhc093blByb3BlcnR5KHIpJiZlW3JdIT09dFtyXSlyZXR1cm4hMTty
        ZXR1cm4hMH12YXIgdT1lLmJpbmQsbD1lLm1lcmdlLGM9ZS5vQ3JlYXRlLGg9
        ZS5zZXJpYWxpemUsbT10LnJlc29sdmU7bi5wcm90b3R5cGU9e25hbWU6bnVs
        bCxoYW5kbGVyOm51bGwscGFyYW1zOm51bGwsY29udGV4dDpudWxsLGxvZzpm
        dW5jdGlvbihlLHQpe2UubG9nJiZlLmxvZyh0aGlzLm5hbWUrIjogIit0KX0s
        cmVzb2x2ZTpmdW5jdGlvbihlLHQscil7dmFyIG49dSh0aGlzLmNoZWNrRm9y
        QWJvcnQsdGhpcyx0KSxpPXUodGhpcy5ydW5CZWZvcmVNb2RlbEhvb2ssdGhp
        cyxlLHIpLG89dSh0aGlzLmdldE1vZGVsLHRoaXMsZSxyKSxhPXUodGhpcy5y
        dW5BZnRlck1vZGVsSG9vayx0aGlzLGUscikscz11KHRoaXMuYmVjb21lUmVz
        b2x2ZWQsdGhpcyxyKTtyZXR1cm4gbSgpLnRoZW4obikudGhlbihpKS50aGVu
        KG4pLnRoZW4obykudGhlbihuKS50aGVuKGEpLnRoZW4obikudGhlbihzKX0s
        cnVuQmVmb3JlTW9kZWxIb29rOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQudHJp
        Z2dlciYmdC50cmlnZ2VyKCEwLCJ3aWxsUmVzb2x2ZU1vZGVsIix0LHRoaXMu
        aGFuZGxlciksdGhpcy5ydW5TaGFyZWRNb2RlbEhvb2soZSx0LCJiZWZvcmVN
        b2RlbCIsW10pfSxydW5BZnRlck1vZGVsSG9vazpmdW5jdGlvbihlLHQscil7
        dmFyIG49dGhpcy5uYW1lO3JldHVybiB0aGlzLnN0YXNoUmVzb2x2ZWRNb2Rl
        bCh0LHIpLHRoaXMucnVuU2hhcmVkTW9kZWxIb29rKGUsdCwiYWZ0ZXJNb2Rl
        bCIsW3JdKS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIHQucmVzb2x2ZWRNb2Rl
        bHNbbl19KX0scnVuU2hhcmVkTW9kZWxIb29rOmZ1bmN0aW9uKGUsdCxyLG4p
        e3RoaXMubG9nKHQsImNhbGxpbmcgIityKyIgaG9vayIpLHRoaXMucXVlcnlQ
        YXJhbXMmJm4ucHVzaCh0aGlzLnF1ZXJ5UGFyYW1zKSxuLnB1c2godCk7dmFy
        IGk9dGhpcy5oYW5kbGVyO3JldHVybiBlKGZ1bmN0aW9uKCl7cmV0dXJuIGlb
        cl0mJmlbcl0uYXBwbHkoaSxuKX0pfSxnZXRNb2RlbDpmdW5jdGlvbigpe3Ro
        cm93IG5ldyBFcnJvcigiVGhpcyBzaG91bGQgYmUgb3ZlcnJpZGRlbiBieSBh
        IHN1YmNsYXNzIG9mIEhhbmRsZXJJbmZvIil9LGNoZWNrRm9yQWJvcnQ6ZnVu
        Y3Rpb24oZSx0KXtyZXR1cm4gbShlKCkpLnRoZW4oZnVuY3Rpb24oKXtyZXR1
        cm4gdH0pfSxzdGFzaFJlc29sdmVkTW9kZWw6ZnVuY3Rpb24oZSx0KXtlLnJl
        c29sdmVkTW9kZWxzPWUucmVzb2x2ZWRNb2RlbHN8fHt9LGUucmVzb2x2ZWRN
        b2RlbHNbdGhpcy5uYW1lXT10fSxiZWNvbWVSZXNvbHZlZDpmdW5jdGlvbihl
        LHQpe3ZhciByPXRoaXMucGFyYW1zfHxoKHRoaXMuaGFuZGxlcix0LHRoaXMu
        bmFtZXMpO3JldHVybiBlJiYodGhpcy5zdGFzaFJlc29sdmVkTW9kZWwoZSx0
        KSxlLnBhcmFtcz1lLnBhcmFtc3x8e30sZS5wYXJhbXNbdGhpcy5uYW1lXT1y
        KSxuZXcgaSh7Y29udGV4dDp0LG5hbWU6dGhpcy5uYW1lLGhhbmRsZXI6dGhp
        cy5oYW5kbGVyLHBhcmFtczpyfSl9LHNob3VsZFN1cGVyY2VkZTpmdW5jdGlv
        bihlKXtpZighZSlyZXR1cm4hMDt2YXIgdD1lLmNvbnRleHQ9PT10aGlzLmNv
        bnRleHQ7cmV0dXJuIGUubmFtZSE9PXRoaXMubmFtZXx8dGhpcy5oYXNPd25Q
        cm9wZXJ0eSgiY29udGV4dCIpJiYhdHx8dGhpcy5oYXNPd25Qcm9wZXJ0eSgi
        cGFyYW1zIikmJiFzKHRoaXMucGFyYW1zLGUucGFyYW1zKX19LGkucHJvdG90
        eXBlPWMobi5wcm90b3R5cGUpLGkucHJvdG90eXBlLnJlc29sdmU9ZnVuY3Rp
        b24oZSx0LHIpe3JldHVybiByJiZyLnJlc29sdmVkTW9kZWxzJiYoci5yZXNv
        bHZlZE1vZGVsc1t0aGlzLm5hbWVdPXRoaXMuY29udGV4dCksbSh0aGlzKX0s
        by5wcm90b3R5cGU9YyhuLnByb3RvdHlwZSksby5wcm90b3R5cGUuZ2V0TW9k
        ZWw9ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLnBhcmFtczt0JiZ0LnF1ZXJ5
        UGFyYW1zJiYocj17fSxsKHIsdGhpcy5wYXJhbXMpLHIucXVlcnlQYXJhbXM9
        dC5xdWVyeVBhcmFtcyk7dmFyIG49ImZ1bmN0aW9uIj09dHlwZW9mIHRoaXMu
        aGFuZGxlci5kZXNlcmlhbGl6ZT8iZGVzZXJpYWxpemUiOiJtb2RlbCI7cmV0
        dXJuIHRoaXMucnVuU2hhcmVkTW9kZWxIb29rKGUsdCxuLFtyXSl9LGEucHJv
        dG90eXBlPWMobi5wcm90b3R5cGUpLGEucHJvdG90eXBlLmdldE1vZGVsPWZ1
        bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMubG9nKHQsdGhpcy5uYW1lKyI6IHJl
        c29sdmluZyBwcm92aWRlZCBtb2RlbCIpLG0odGhpcy5jb250ZXh0KX0sci5I
        YW5kbGVySW5mbz1uLHIuUmVzb2x2ZWRIYW5kbGVySW5mbz1pLHIuVW5yZXNv
        bHZlZEhhbmRsZXJJbmZvQnlQYXJhbT1vLHIuVW5yZXNvbHZlZEhhbmRsZXJJ
        bmZvQnlPYmplY3Q9YX0pLGUoInJvdXRlci9yb3V0ZXIiLFsicm91dGUtcmVj
        b2duaXplciIsInJzdnAiLCIuL3V0aWxzIiwiLi90cmFuc2l0aW9uLXN0YXRl
        IiwiLi90cmFuc2l0aW9uIiwiLi90cmFuc2l0aW9uLWludGVudC9uYW1lZC10
        cmFuc2l0aW9uLWludGVudCIsIi4vdHJhbnNpdGlvbi1pbnRlbnQvdXJsLXRy
        YW5zaXRpb24taW50ZW50IiwiZXhwb3J0cyJdLGZ1bmN0aW9uKGUsdCxyLG4s
        aSxvLGEscyl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIHUoKXt0aGlzLnJlY29n
        bml6ZXI9bmV3IHYsdGhpcy5yZXNldCgpfWZ1bmN0aW9uIGwoZSx0LHIpe3Zh
        ciBuPWgoZS5zdGF0ZSx0KTtDKG4uZXhpdGVkLGZ1bmN0aW9uKGUpe3ZhciB0
        PWUuaGFuZGxlcjtkZWxldGUgdC5jb250ZXh0LHQuZXhpdCYmdC5leGl0KCl9
        KTt2YXIgaT1lLm9sZFN0YXRlPWUuc3RhdGU7ZS5zdGF0ZT10O3ZhciBvPWUu
        Y3VycmVudEhhbmRsZXJJbmZvcz1uLnVuY2hhbmdlZC5zbGljZSgpO3RyeXtD
        KG4udXBkYXRlZENvbnRleHQsZnVuY3Rpb24oZSl7cmV0dXJuIGMobyxlLCEx
        LHIpfSksQyhuLmVudGVyZWQsZnVuY3Rpb24oZSl7cmV0dXJuIGMobyxlLCEw
        LHIpfSl9Y2F0Y2goYSl7dGhyb3cgZS5zdGF0ZT1pLGUuY3VycmVudEhhbmRs
        ZXJJbmZvcz1pLmhhbmRsZXJJbmZvcyxhfWUuc3RhdGUucXVlcnlQYXJhbXM9
        YihlLG8sdC5xdWVyeVBhcmFtcyl9ZnVuY3Rpb24gYyhlLHQscixuKXt2YXIg
        aT10LmhhbmRsZXIsbz10LmNvbnRleHQ7aWYociYmaS5lbnRlciYmaS5lbnRl
        cihuKSxuJiZuLmlzQWJvcnRlZCl0aHJvdyBuZXcgTjtpZihpLmNvbnRleHQ9
        byxpLmNvbnRleHREaWRDaGFuZ2UmJmkuY29udGV4dERpZENoYW5nZSgpLGku
        c2V0dXAmJmkuc2V0dXAobyxuKSxuJiZuLmlzQWJvcnRlZCl0aHJvdyBuZXcg
        TjtyZXR1cm4gZS5wdXNoKHQpLCEwfWZ1bmN0aW9uIGgoZSx0KXt2YXIgcixu
        LGksbyxhLHM9ZS5oYW5kbGVySW5mb3MsdT10LmhhbmRsZXJJbmZvcyxsPXt1
        cGRhdGVkQ29udGV4dDpbXSxleGl0ZWQ6W10sZW50ZXJlZDpbXSx1bmNoYW5n
        ZWQ6W119O2ZvcihvPTAsYT11Lmxlbmd0aDthPm87bysrKXt2YXIgYz1zW29d
        LGg9dVtvXTtjJiZjLmhhbmRsZXI9PT1oLmhhbmRsZXJ8fChyPSEwKSxyPyhs
        LmVudGVyZWQucHVzaChoKSxjJiZsLmV4aXRlZC51bnNoaWZ0KGMpKTpufHxj
        LmNvbnRleHQhPT1oLmNvbnRleHR8fGk/KG49ITAsbC51cGRhdGVkQ29udGV4
        dC5wdXNoKGgpKTpsLnVuY2hhbmdlZC5wdXNoKGMpfWZvcihvPXUubGVuZ3Ro
        LGE9cy5sZW5ndGg7YT5vO28rKylsLmV4aXRlZC51bnNoaWZ0KHNbb10pO3Jl
        dHVybiBsfWZ1bmN0aW9uIG0oZSx0LHIpe3ZhciBuPWUudXJsTWV0aG9kO2lm
        KG4pe2Zvcih2YXIgaT1lLnJvdXRlcixvPXQuaGFuZGxlckluZm9zLGE9b1tv
        Lmxlbmd0aC0xXS5uYW1lLHM9e30sdT1vLmxlbmd0aC0xO3U+PTA7LS11KXt2
        YXIgbD1vW3VdO08ocyxsLnBhcmFtcyksbC5oYW5kbGVyLmluYWNjZXNzaWJs
        ZUJ5VVJMJiYobj1udWxsKX1pZihuKXtzLnF1ZXJ5UGFyYW1zPXQucXVlcnlQ
        YXJhbXM7dmFyIGM9aS5yZWNvZ25pemVyLmdlbmVyYXRlKGEscyk7InJlcGxh
        Y2VRdWVyeSI9PT1uP2MhPT1yJiZpLnJlcGxhY2VVUkwoYyk6InJlcGxhY2Ui
        PT09bj9pLnJlcGxhY2VVUkwoYyk6aS51cGRhdGVVUkwoYyl9fX1mdW5jdGlv
        biBmKGUsdCl7dHJ5e3coZS5yb3V0ZXIsZS5zZXF1ZW5jZSwiUmVzb2x2ZWQg
        YWxsIG1vZGVscyBvbiBkZXN0aW5hdGlvbiByb3V0ZTsgZmluYWxpemluZyB0
        cmFuc2l0aW9uLiIpO3t2YXIgcj1lLnJvdXRlcixuPXQuaGFuZGxlckluZm9z
        O2Uuc2VxdWVuY2V9cmV0dXJuIGwocix0LGUpLGUuaXNBYm9ydGVkPyhyLnN0
        YXRlLmhhbmRsZXJJbmZvcz1yLmN1cnJlbnRIYW5kbGVySW5mb3MsRShWKGUp
        KSk6KG0oZSx0LGUuaW50ZW50LnVybCksZS5pc0FjdGl2ZT0hMSxyLmFjdGl2
        ZVRyYW5zaXRpb249bnVsbCx5KHIsci5jdXJyZW50SGFuZGxlckluZm9zLCEw
        LFsiZGlkVHJhbnNpdGlvbiJdKSxyLmRpZFRyYW5zaXRpb24mJnIuZGlkVHJh
        bnNpdGlvbihyLmN1cnJlbnRIYW5kbGVySW5mb3MpLHcocixlLnNlcXVlbmNl
        LCJUUkFOU0lUSU9OIENPTVBMRVRFLiIpLG5bbi5sZW5ndGgtMV0uaGFuZGxl
        cil9Y2F0Y2goaSl7aWYoIShpIGluc3RhbmNlb2YgTikpe3ZhciBvPWUuc3Rh
        dGUuaGFuZGxlckluZm9zO2UudHJpZ2dlcighMCwiZXJyb3IiLGksZSxvW28u
        bGVuZ3RoLTFdKSxlLmFib3J0KCl9dGhyb3cgaX19ZnVuY3Rpb24gcChlLHQs
        cil7dmFyIG49dFswXXx8Ii8iLGk9dFt0Lmxlbmd0aC0xXSxvPXt9O2kmJmku
        aGFzT3duUHJvcGVydHkoInF1ZXJ5UGFyYW1zIikmJihvPUQuY2FsbCh0KS5x
        dWVyeVBhcmFtcyk7dmFyIGE7aWYoMD09PXQubGVuZ3RoKXt3KGUsIlVwZGF0
        aW5nIHF1ZXJ5IHBhcmFtcyIpO3ZhciBzPWUuc3RhdGUuaGFuZGxlckluZm9z
        O2E9bmV3IEkoe25hbWU6c1tzLmxlbmd0aC0xXS5uYW1lLGNvbnRleHRzOltd
        LHF1ZXJ5UGFyYW1zOm99KX1lbHNlIi8iPT09bi5jaGFyQXQoMCk/KHcoZSwi
        QXR0ZW1wdGluZyBVUkwgdHJhbnNpdGlvbiB0byAiK24pLGE9bmV3IFIoe3Vy
        bDpufSkpOih3KGUsIkF0dGVtcHRpbmcgdHJhbnNpdGlvbiB0byAiK24pLGE9
        bmV3IEkoe25hbWU6dFswXSxjb250ZXh0czpfLmNhbGwodCwxKSxxdWVyeVBh
        cmFtczpvfSkpO3JldHVybiBlLnRyYW5zaXRpb25CeUludGVudChhLHIpfWZ1
        bmN0aW9uIGQoZSx0KXtpZihlLmxlbmd0aCE9PXQubGVuZ3RoKXJldHVybiEx
        O2Zvcih2YXIgcj0wLG49ZS5sZW5ndGg7bj5yOysrcilpZihlW3JdIT09dFty
        XSlyZXR1cm4hMTtyZXR1cm4hMH1mdW5jdGlvbiBiKGUsdCxyKXt2YXIgbj1b
        XTt5KGUsdCwhMCxbImZpbmFsaXplUXVlcnlQYXJhbUNoYW5nZSIscixuXSk7
        Zm9yKHZhciBpPXt9LG89MCxhPW4ubGVuZ3RoO2E+bzsrK28pe3ZhciBzPW5b
        b107aVtzLmtleV09cy52YWx1ZX1yZXR1cm4gaX12YXIgdj1lWyJkZWZhdWx0
        Il0sRT0odC5yZXNvbHZlLHQucmVqZWN0KSxnPSh0LmFzeW5jLHQuUHJvbWlz
        ZSkseT1yLnRyaWdnZXIsdz1yLmxvZyxfPXIuc2xpY2UsQz1yLmZvckVhY2gs
        Tz1yLm1lcmdlLEE9ci5zZXJpYWxpemUsUD1yLmV4dHJhY3RRdWVyeVBhcmFt
        cyx4PXIuZ2V0Q2hhbmdlbGlzdCxUPW4uVHJhbnNpdGlvblN0YXRlLFY9aS5s
        b2dBYm9ydCxTPWkuVHJhbnNpdGlvbixOPWkuVHJhbnNpdGlvbkFib3J0ZWQs
        ST1vLk5hbWVkVHJhbnNpdGlvbkludGVudCxSPWEuVVJMVHJhbnNpdGlvbklu
        dGVudCxEPUFycmF5LnByb3RvdHlwZS5wb3A7dS5wcm90b3R5cGU9e21hcDpm
        dW5jdGlvbihlKXt0aGlzLnJlY29nbml6ZXIuZGVsZWdhdGU9dGhpcy5kZWxl
        Z2F0ZSx0aGlzLnJlY29nbml6ZXIubWFwKGUsZnVuY3Rpb24oZSx0KXt2YXIg
        cj10W3QubGVuZ3RoLTFdLmhhbmRsZXIsbj1bdCx7YXM6cn1dO2UuYWRkLmFw
        cGx5KGUsbil9KX0saGFzUm91dGU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMu
        cmVjb2duaXplci5oYXNSb3V0ZShlKX0sdHJhbnNpdGlvbkJ5SW50ZW50OmZ1
        bmN0aW9uKGUsdCl7dmFyIHIsbj0hIXRoaXMuYWN0aXZlVHJhbnNpdGlvbixp
        PW4/dGhpcy5hY3RpdmVUcmFuc2l0aW9uLnN0YXRlOnRoaXMuc3RhdGUsbz10
        aGlzO3RyeXt2YXIgYT1lLmFwcGx5VG9TdGF0ZShpLHRoaXMucmVjb2duaXpl
        cix0aGlzLmdldEhhbmRsZXIsdCk7aWYoZChhLmhhbmRsZXJJbmZvcyxpLmhh
        bmRsZXJJbmZvcykpe3ZhciBzPXgoaS5xdWVyeVBhcmFtcyxhLnF1ZXJ5UGFy
        YW1zKTtyZXR1cm4gcz8odGhpcy5fY2hhbmdlZFF1ZXJ5UGFyYW1zPXMuY2hh
        bmdlZCx5KHRoaXMsYS5oYW5kbGVySW5mb3MsITAsWyJxdWVyeVBhcmFtc0Rp
        ZENoYW5nZSIscy5jaGFuZ2VkLHMuYWxsLHMucmVtb3ZlZF0pLHRoaXMuX2No
        YW5nZWRRdWVyeVBhcmFtcz1udWxsLCFuJiZ0aGlzLmFjdGl2ZVRyYW5zaXRp
        b24/dGhpcy5hY3RpdmVUcmFuc2l0aW9uOihpLnF1ZXJ5UGFyYW1zPWIodGhp
        cyxhLmhhbmRsZXJJbmZvcyxhLnF1ZXJ5UGFyYW1zKSxyPW5ldyBTKHRoaXMp
        LHIudXJsTWV0aG9kPSJyZXBsYWNlIixyLnByb21pc2U9ci5wcm9taXNlLnRo
        ZW4oZnVuY3Rpb24oZSl7cmV0dXJuIG0ocixpLCEwKSxvLmRpZFRyYW5zaXRp
        b24mJm8uZGlkVHJhbnNpdGlvbihvLmN1cnJlbnRIYW5kbGVySW5mb3MpLGV9
        KSxyKSk6bmV3IFModGhpcyl9cmV0dXJuIHQ/KGwodGhpcyxhKSx2b2lkIDAp
        OihyPW5ldyBTKHRoaXMsZSxhKSx0aGlzLmFjdGl2ZVRyYW5zaXRpb24mJnRo
        aXMuYWN0aXZlVHJhbnNpdGlvbi5hYm9ydCgpLHRoaXMuYWN0aXZlVHJhbnNp
        dGlvbj1yLHIucHJvbWlzZT1yLnByb21pc2UudGhlbihmdW5jdGlvbihlKXty
        ZXR1cm4gby5hc3luYyhmdW5jdGlvbigpe3JldHVybiBmKHIsZS5zdGF0ZSl9
        KX0pLG58fHkodGhpcyx0aGlzLnN0YXRlLmhhbmRsZXJJbmZvcywhMCxbIndp
        bGxUcmFuc2l0aW9uIixyXSkscil9Y2F0Y2godSl7cmV0dXJuIG5ldyBTKHRo
        aXMsZSxudWxsLHUpfX0scmVzZXQ6ZnVuY3Rpb24oKXt0aGlzLnN0YXRlJiZD
        KHRoaXMuc3RhdGUuaGFuZGxlckluZm9zLGZ1bmN0aW9uKGUpe3ZhciB0PWUu
        aGFuZGxlcjt0LmV4aXQmJnQuZXhpdCgpfSksdGhpcy5zdGF0ZT1uZXcgVCx0
        aGlzLmN1cnJlbnRIYW5kbGVySW5mb3M9bnVsbH0sYWN0aXZlVHJhbnNpdGlv
        bjpudWxsLGhhbmRsZVVSTDpmdW5jdGlvbihlKXt2YXIgdD1fLmNhbGwoYXJn
        dW1lbnRzKTtyZXR1cm4iLyIhPT1lLmNoYXJBdCgwKSYmKHRbMF09Ii8iK2Up
        LHAodGhpcyx0KS5tZXRob2QoInJlcGxhY2VRdWVyeSIpfSx1cGRhdGVVUkw6
        ZnVuY3Rpb24oKXt0aHJvdyBuZXcgRXJyb3IoInVwZGF0ZVVSTCBpcyBub3Qg
        aW1wbGVtZW50ZWQiKX0scmVwbGFjZVVSTDpmdW5jdGlvbihlKXt0aGlzLnVw
        ZGF0ZVVSTChlKX0sdHJhbnNpdGlvblRvOmZ1bmN0aW9uKCl7cmV0dXJuIHAo
        dGhpcyxhcmd1bWVudHMpfSxpbnRlcm1lZGlhdGVUcmFuc2l0aW9uVG86ZnVu
        Y3Rpb24oKXtwKHRoaXMsYXJndW1lbnRzLCEwKX0scmVmcmVzaDpmdW5jdGlv
        bihlKXtmb3IodmFyIHQ9dGhpcy5hY3RpdmVUcmFuc2l0aW9uP3RoaXMuYWN0
        aXZlVHJhbnNpdGlvbi5zdGF0ZTp0aGlzLnN0YXRlLHI9dC5oYW5kbGVySW5m
        b3Msbj17fSxpPTAsbz1yLmxlbmd0aDtvPmk7KytpKXt2YXIgYT1yW2ldO25b
        YS5uYW1lXT1hLnBhcmFtc3x8e319dyh0aGlzLCJTdGFydGluZyBhIHJlZnJl
        c2ggdHJhbnNpdGlvbiIpO3ZhciBzPW5ldyBJKHtuYW1lOnJbci5sZW5ndGgt
        MV0ubmFtZSxwaXZvdEhhbmRsZXI6ZXx8clswXS5oYW5kbGVyLGNvbnRleHRz
        OltdLHF1ZXJ5UGFyYW1zOnRoaXMuX2NoYW5nZWRRdWVyeVBhcmFtc3x8dC5x
        dWVyeVBhcmFtc3x8e319KTtyZXR1cm4gdGhpcy50cmFuc2l0aW9uQnlJbnRl
        bnQocywhMSl9LHJlcGxhY2VXaXRoOmZ1bmN0aW9uKCl7cmV0dXJuIHAodGhp
        cyxhcmd1bWVudHMpLm1ldGhvZCgicmVwbGFjZSIpfSxnZW5lcmF0ZTpmdW5j
        dGlvbihlKXtmb3IodmFyIHQ9UChfLmNhbGwoYXJndW1lbnRzLDEpKSxyPXRb
        MF0sbj10WzFdLGk9bmV3IEkoe25hbWU6ZSxjb250ZXh0czpyfSksbz1pLmFw
        cGx5VG9TdGF0ZSh0aGlzLnN0YXRlLHRoaXMucmVjb2duaXplcix0aGlzLmdl
        dEhhbmRsZXIpLGE9e30scz0wLHU9by5oYW5kbGVySW5mb3MubGVuZ3RoO3U+
        czsrK3Mpe3ZhciBsPW8uaGFuZGxlckluZm9zW3NdLGM9bC5wYXJhbXN8fEEo
        bC5oYW5kbGVyLGwuY29udGV4dCxsLm5hbWVzKTtPKGEsYyl9cmV0dXJuIGEu
        cXVlcnlQYXJhbXM9bix0aGlzLnJlY29nbml6ZXIuZ2VuZXJhdGUoZSxhKX0s
        aXNBY3RpdmU6ZnVuY3Rpb24oZSl7dmFyIHQscixuPVAoXy5jYWxsKGFyZ3Vt
        ZW50cywxKSksaT1uWzBdLG89blsxXSxhPXRoaXMuc3RhdGUucXVlcnlQYXJh
        bXMscz10aGlzLnN0YXRlLmhhbmRsZXJJbmZvcztpZighcy5sZW5ndGgpcmV0
        dXJuITE7dmFyIHU9c1tzLmxlbmd0aC0xXS5uYW1lLGw9dGhpcy5yZWNvZ25p
        emVyLmhhbmRsZXJzRm9yKHUpLGM9MDtmb3Iocj1sLmxlbmd0aDtyPmMmJih0
        PXNbY10sdC5uYW1lIT09ZSk7KytjKTtpZihjPT09bC5sZW5ndGgpcmV0dXJu
        ITE7dmFyIGg9bmV3IFQ7aC5oYW5kbGVySW5mb3M9cy5zbGljZSgwLGMrMSks
        bD1sLnNsaWNlKDAsYysxKTt2YXIgbT1uZXcgSSh7bmFtZTp1LGNvbnRleHRz
        Oml9KSxmPW0uYXBwbHlUb0hhbmRsZXJzKGgsbCx0aGlzLmdldEhhbmRsZXIs
        dSwhMCwhMCk7cmV0dXJuIGQoZi5oYW5kbGVySW5mb3MsaC5oYW5kbGVySW5m
        b3MpJiYheChhLG8pfSx0cmlnZ2VyOmZ1bmN0aW9uKCl7dmFyIGU9Xy5jYWxs
        KGFyZ3VtZW50cyk7eSh0aGlzLHRoaXMuY3VycmVudEhhbmRsZXJJbmZvcywh
        MSxlKX0sYXN5bmM6ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyBnKGZ1bmN0aW9u
        KHQpe3QoZSgpKX0pfSxsb2c6bnVsbH0scy5Sb3V0ZXI9dX0pLGUoInJvdXRl
        ci90cmFuc2l0aW9uLWludGVudCIsWyIuL3V0aWxzIiwiZXhwb3J0cyJdLGZ1
        bmN0aW9uKGUsdCl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIHIoZSl7ZSYmbih0
        aGlzLGUpLHRoaXMuZGF0YT10aGlzLmRhdGF8fHt9fXZhciBuPWUubWVyZ2U7
        ci5wcm90b3R5cGUuYXBwbHlUb1N0YXRlPWZ1bmN0aW9uKGUpe3JldHVybiBl
        fSx0LlRyYW5zaXRpb25JbnRlbnQ9cn0pLGUoInJvdXRlci90cmFuc2l0aW9u
        LWludGVudC9uYW1lZC10cmFuc2l0aW9uLWludGVudCIsWyIuLi90cmFuc2l0
        aW9uLWludGVudCIsIi4uL3RyYW5zaXRpb24tc3RhdGUiLCIuLi9oYW5kbGVy
        LWluZm8iLCIuLi91dGlscyIsImV4cG9ydHMiXSxmdW5jdGlvbihlLHQscixu
        LGkpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBvKGUpe2EuY2FsbCh0aGlzLGUp
        fXZhciBhPWUuVHJhbnNpdGlvbkludGVudCxzPXQuVHJhbnNpdGlvblN0YXRl
        LHU9ci5VbnJlc29sdmVkSGFuZGxlckluZm9CeVBhcmFtLGw9ci5VbnJlc29s
        dmVkSGFuZGxlckluZm9CeU9iamVjdCxjPW4uaXNQYXJhbSxoPW4uZm9yRWFj
        aCxtPW4uZXh0cmFjdFF1ZXJ5UGFyYW1zLGY9bi5vQ3JlYXRlLHA9bi5tZXJn
        ZTtvLnByb3RvdHlwZT1mKGEucHJvdG90eXBlKSxvLnByb3RvdHlwZS5hcHBs
        eVRvU3RhdGU9ZnVuY3Rpb24oZSx0LHIsbil7dmFyIGk9bShbdGhpcy5uYW1l
        XS5jb25jYXQodGhpcy5jb250ZXh0cykpLG89aVswXSxhPShpWzFdLHQuaGFu
        ZGxlcnNGb3Iob1swXSkpLHM9YVthLmxlbmd0aC0xXS5oYW5kbGVyO3JldHVy
        biB0aGlzLmFwcGx5VG9IYW5kbGVycyhlLGEscixzLG4pfSxvLnByb3RvdHlw
        ZS5hcHBseVRvSGFuZGxlcnM9ZnVuY3Rpb24oZSx0LHIsbixpLG8pe3ZhciBh
        LHU9bmV3IHMsbD10aGlzLmNvbnRleHRzLnNsaWNlKDApLGM9dC5sZW5ndGgs
        aD1bXTtpZih0aGlzLnBpdm90SGFuZGxlcilmb3IoYT0wO2E8dC5sZW5ndGg7
        KythKWlmKHIodFthXS5oYW5kbGVyKT09PXRoaXMucGl2b3RIYW5kbGVyKXtj
        PWE7YnJlYWt9IXRoaXMucGl2b3RIYW5kbGVyO2ZvcihhPXQubGVuZ3RoLTE7
        YT49MDstLWEpe3ZhciBtPXRbYV0sZj1tLmhhbmRsZXIsZD1yKGYpLGI9ZS5o
        YW5kbGVySW5mb3NbYV0sdj1udWxsO2lmKG0ubmFtZXMubGVuZ3RoPjA/dj1h
        Pj1jP3RoaXMuY3JlYXRlUGFyYW1IYW5kbGVySW5mbyhmLGQsbS5uYW1lcyxs
        LGIpOnRoaXMuZ2V0SGFuZGxlckluZm9Gb3JEeW5hbWljU2VnbWVudChmLGQs
        bS5uYW1lcyxsLGIsbik6KHY9dGhpcy5jcmVhdGVQYXJhbUhhbmRsZXJJbmZv
        KGYsZCxtLm5hbWVzLGwsYiksaC51bnNoaWZ0KGEpKSxvKXt2PXYuYmVjb21l
        UmVzb2x2ZWQobnVsbCx2LmNvbnRleHQpO3ZhciBFPWImJmIuY29udGV4dDtt
        Lm5hbWVzLmxlbmd0aD4wJiZ2LmNvbnRleHQ9PT1FJiYodi5wYXJhbXM9YiYm
        Yi5wYXJhbXMpLHYuY29udGV4dD1FfXZhciBnPWI7KGE+PWN8fHYuc2hvdWxk
        U3VwZXJjZWRlKGIpKSYmKGM9TWF0aC5taW4oYSxjKSxnPXYpLGkmJiFvJiYo
        Zz1nLmJlY29tZVJlc29sdmVkKG51bGwsZy5jb250ZXh0KSksdS5oYW5kbGVy
        SW5mb3MudW5zaGlmdChnKX1pZihsLmxlbmd0aD4wKXRocm93IG5ldyBFcnJv
        cigiTW9yZSBjb250ZXh0IG9iamVjdHMgd2VyZSBwYXNzZWQgdGhhbiB0aGVy
        ZSBhcmUgZHluYW1pYyBzZWdtZW50cyBmb3IgdGhlIHJvdXRlOiAiK24pO3Jl
        dHVybiBpfHx0aGlzLmludmFsaWRhdGVOb25EeW5hbWljSGFuZGxlcnModS5o
        YW5kbGVySW5mb3MsaCxjKSxwKHUucXVlcnlQYXJhbXMsZS5xdWVyeVBhcmFt
        cykscCh1LnF1ZXJ5UGFyYW1zLHRoaXMucXVlcnlQYXJhbXN8fHt9KSx1fSxv
        LnByb3RvdHlwZS5pbnZhbGlkYXRlTm9uRHluYW1pY0hhbmRsZXJzPWZ1bmN0
        aW9uKGUsdCxyKXtoKHQsZnVuY3Rpb24odCl7aWYodD49cil7dmFyIG49ZVt0
        XTtlW3RdPW5ldyB1KHtuYW1lOm4ubmFtZSxoYW5kbGVyOm4uaGFuZGxlcixw
        YXJhbXM6e319KX19KX0sby5wcm90b3R5cGUuZ2V0SGFuZGxlckluZm9Gb3JE
        eW5hbWljU2VnbWVudD1mdW5jdGlvbihlLHQscixuLGkpe3t2YXIgbztyLmxl
        bmd0aH1yZXR1cm4gbi5sZW5ndGg+MD8obz1uW24ubGVuZ3RoLTFdLGMobyk/
        dGhpcy5jcmVhdGVQYXJhbUhhbmRsZXJJbmZvKGUsdCxyLG4saSk6KG4ucG9w
        KCksbmV3IGwoe25hbWU6ZSxoYW5kbGVyOnQsY29udGV4dDpvLG5hbWVzOnJ9
        KSkpOmkmJmkubmFtZT09PWU/aTppfSxvLnByb3RvdHlwZS5jcmVhdGVQYXJh
        bUhhbmRsZXJJbmZvPWZ1bmN0aW9uKGUsdCxyLG4saSl7Zm9yKHZhciBvPXt9
        LGE9ci5sZW5ndGg7YS0tOyl7dmFyIHM9aSYmZT09PWkubmFtZSYmaS5wYXJh
        bXN8fHt9LGw9bltuLmxlbmd0aC0xXSxoPXJbYV07aWYoYyhsKSlvW2hdPSIi
        K24ucG9wKCk7ZWxzZXtpZighcy5oYXNPd25Qcm9wZXJ0eShoKSl0aHJvdyBu
        ZXcgRXJyb3IoIllvdSBkaWRuJ3QgcHJvdmlkZSBlbm91Z2ggc3RyaW5nL251
        bWVyaWMgcGFyYW1ldGVycyB0byBzYXRpc2Z5IGFsbCBvZiB0aGUgZHluYW1p
        YyBzZWdtZW50cyBmb3Igcm91dGUgIitlKTtvW2hdPXNbaF19fXJldHVybiBu
        ZXcgdSh7bmFtZTplLGhhbmRsZXI6dCxwYXJhbXM6b30pfSxpLk5hbWVkVHJh
        bnNpdGlvbkludGVudD1vfSksZSgicm91dGVyL3RyYW5zaXRpb24taW50ZW50
        L3VybC10cmFuc2l0aW9uLWludGVudCIsWyIuLi90cmFuc2l0aW9uLWludGVu
        dCIsIi4uL3RyYW5zaXRpb24tc3RhdGUiLCIuLi9oYW5kbGVyLWluZm8iLCIu
        Li91dGlscyIsImV4cG9ydHMiXSxmdW5jdGlvbihlLHQscixuLGkpeyJ1c2Ug
        c3RyaWN0IjtmdW5jdGlvbiBvKGUpe3MuY2FsbCh0aGlzLGUpfWZ1bmN0aW9u
        IGEoZSl7dGhpcy5tZXNzYWdlPWV8fCJVbnJlY29nbml6ZWRVUkxFcnJvciIs
        dGhpcy5uYW1lPSJVbnJlY29nbml6ZWRVUkxFcnJvciJ9dmFyIHM9ZS5UcmFu
        c2l0aW9uSW50ZW50LHU9dC5UcmFuc2l0aW9uU3RhdGUsbD1yLlVucmVzb2x2
        ZWRIYW5kbGVySW5mb0J5UGFyYW0sYz1uLm9DcmVhdGUsaD1uLm1lcmdlO28u
        cHJvdG90eXBlPWMocy5wcm90b3R5cGUpLG8ucHJvdG90eXBlLmFwcGx5VG9T
        dGF0ZT1mdW5jdGlvbihlLHQscil7dmFyIG4saSxvPW5ldyB1LHM9dC5yZWNv
        Z25pemUodGhpcy51cmwpO2lmKCFzKXRocm93IG5ldyBhKHRoaXMudXJsKTt2
        YXIgYz0hMTtmb3Iobj0wLGk9cy5sZW5ndGg7aT5uOysrbil7dmFyIG09c1tu
        XSxmPW0uaGFuZGxlcixwPXIoZik7aWYocC5pbmFjY2Vzc2libGVCeVVSTCl0
        aHJvdyBuZXcgYSh0aGlzLnVybCk7dmFyIGQ9bmV3IGwoe25hbWU6ZixoYW5k
        bGVyOnAscGFyYW1zOm0ucGFyYW1zfSksYj1lLmhhbmRsZXJJbmZvc1tuXTtj
        fHxkLnNob3VsZFN1cGVyY2VkZShiKT8oYz0hMCxvLmhhbmRsZXJJbmZvc1tu
        XT1kKTpvLmhhbmRsZXJJbmZvc1tuXT1ifXJldHVybiBoKG8ucXVlcnlQYXJh
        bXMscy5xdWVyeVBhcmFtcyksb30saS5VUkxUcmFuc2l0aW9uSW50ZW50PW99
        KSxlKCJyb3V0ZXIvdHJhbnNpdGlvbi1zdGF0ZSIsWyIuL2hhbmRsZXItaW5m
        byIsIi4vdXRpbHMiLCJyc3ZwIiwiZXhwb3J0cyJdLGZ1bmN0aW9uKGUsdCxy
        LG4peyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBpKCl7dGhpcy5oYW5kbGVySW5m
        b3M9W10sdGhpcy5xdWVyeVBhcmFtcz17fSx0aGlzLnBhcmFtcz17fX12YXIg
        bz0oZS5SZXNvbHZlZEhhbmRsZXJJbmZvLHQuZm9yRWFjaCksYT1yLnJlc29s
        dmU7aS5wcm90b3R5cGU9e2hhbmRsZXJJbmZvczpudWxsLHF1ZXJ5UGFyYW1z
        Om51bGwscGFyYW1zOm51bGwscmVzb2x2ZTpmdW5jdGlvbihlLHQscil7ZnVu
        Y3Rpb24gbigpe3JldHVybiBhKHQoKSlbImNhdGNoIl0oZnVuY3Rpb24oZSl7
        dGhyb3cgaD0hMCxlfSl9ZnVuY3Rpb24gaShlKXt0aHJvd3tlcnJvcjplLGhh
        bmRsZXJXaXRoRXJyb3I6Yy5oYW5kbGVySW5mb3Nbci5yZXNvbHZlSW5kZXhd
        LmhhbmRsZXIsd2FzQWJvcnRlZDpoLHN0YXRlOmN9fWZ1bmN0aW9uIHMoZSl7
        Yy5oYW5kbGVySW5mb3Nbci5yZXNvbHZlSW5kZXgrK109ZTt2YXIgdD1lLmhh
        bmRsZXI7cmV0dXJuIHQmJnQucmVkaXJlY3QmJnQucmVkaXJlY3QoZS5jb250
        ZXh0LHIpLG4oKS50aGVuKHUpfWZ1bmN0aW9uIHUoKXtpZihyLnJlc29sdmVJ
        bmRleD09PWMuaGFuZGxlckluZm9zLmxlbmd0aClyZXR1cm57ZXJyb3I6bnVs
        bCxzdGF0ZTpjfTt2YXIgdD1jLmhhbmRsZXJJbmZvc1tyLnJlc29sdmVJbmRl
        eF07cmV0dXJuIHQucmVzb2x2ZShlLG4scikudGhlbihzKX12YXIgbD10aGlz
        LnBhcmFtcztvKHRoaXMuaGFuZGxlckluZm9zLGZ1bmN0aW9uKGUpe2xbZS5u
        YW1lXT1lLnBhcmFtc3x8e319KSxyPXJ8fHt9LHIucmVzb2x2ZUluZGV4PTA7
        dmFyIGM9dGhpcyxoPSExO3JldHVybiBhKCkudGhlbih1KVsiY2F0Y2giXShp
        KX19LG4uVHJhbnNpdGlvblN0YXRlPWl9KSxlKCJyb3V0ZXIvdHJhbnNpdGlv
        biIsWyJyc3ZwIiwiLi9oYW5kbGVyLWluZm8iLCIuL3V0aWxzIiwiZXhwb3J0
        cyJdLGZ1bmN0aW9uKGUsdCxyLG4peyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBp
        KGUsdCxyLG4pe2Z1bmN0aW9uIGEoKXtyZXR1cm4gYy5pc0Fib3J0ZWQ/cygp
        OnZvaWQgMH12YXIgYz10aGlzO2lmKHRoaXMuc3RhdGU9cnx8ZS5zdGF0ZSx0
        aGlzLmludGVudD10LHRoaXMucm91dGVyPWUsdGhpcy5kYXRhPXRoaXMuaW50
        ZW50JiZ0aGlzLmludGVudC5kYXRhfHx7fSx0aGlzLnJlc29sdmVkTW9kZWxz
        PXt9LHRoaXMucXVlcnlQYXJhbXM9e30sbilyZXR1cm4gdGhpcy5wcm9taXNl
        PXMobiksdm9pZCAwO2lmKHIpe3RoaXMucGFyYW1zPXIucGFyYW1zLHRoaXMu
        cXVlcnlQYXJhbXM9ci5xdWVyeVBhcmFtczt2YXIgaD1yLmhhbmRsZXJJbmZv
        cy5sZW5ndGg7aCYmKHRoaXMudGFyZ2V0TmFtZT1yLmhhbmRsZXJJbmZvc1ty
        LmhhbmRsZXJJbmZvcy5sZW5ndGgtMV0ubmFtZSk7Zm9yKHZhciBtPTA7aD5t
        OysrbSl7dmFyIGY9ci5oYW5kbGVySW5mb3NbbV07aWYoIShmIGluc3RhbmNl
        b2YgbCkpYnJlYWs7dGhpcy5waXZvdEhhbmRsZXI9Zi5oYW5kbGVyfXRoaXMu
        c2VxdWVuY2U9aS5jdXJyZW50U2VxdWVuY2UrKyx0aGlzLnByb21pc2U9ci5y
        ZXNvbHZlKGUuYXN5bmMsYSx0aGlzKVsiY2F0Y2giXShmdW5jdGlvbihlKXt0
        aHJvdyBlLndhc0Fib3J0ZWQ/byhjKTooYy50cmlnZ2VyKCJlcnJvciIsZS5l
        cnJvcixjLGUuaGFuZGxlcldpdGhFcnJvciksYy5hYm9ydCgpLGUuZXJyb3Ip
        fSl9ZWxzZSB0aGlzLnByb21pc2U9dSh0aGlzLnN0YXRlKSx0aGlzLnBhcmFt
        cz17fX1mdW5jdGlvbiBvKGUpe3JldHVybiBtKGUucm91dGVyLGUuc2VxdWVu
        Y2UsImRldGVjdGVkIGFib3J0LiIpLG5ldyBhfWZ1bmN0aW9uIGEoZSl7dGhp
        cy5tZXNzYWdlPWV8fCJUcmFuc2l0aW9uQWJvcnRlZCIsdGhpcy5uYW1lPSJU
        cmFuc2l0aW9uQWJvcnRlZCJ9dmFyIHM9ZS5yZWplY3QsdT1lLnJlc29sdmUs
        bD10LlJlc29sdmVkSGFuZGxlckluZm8sYz1yLnRyaWdnZXIsaD1yLnNsaWNl
        LG09ci5sb2c7aS5jdXJyZW50U2VxdWVuY2U9MCxpLnByb3RvdHlwZT17dGFy
        Z2V0TmFtZTpudWxsLHVybE1ldGhvZDoidXBkYXRlIixpbnRlbnQ6bnVsbCxw
        YXJhbXM6bnVsbCxwaXZvdEhhbmRsZXI6bnVsbCxyZXNvbHZlSW5kZXg6MCxo
        YW5kbGVySW5mb3M6bnVsbCxyZXNvbHZlZE1vZGVsczpudWxsLGlzQWN0aXZl
        OiEwLHN0YXRlOm51bGwscHJvbWlzZTpudWxsLGRhdGE6bnVsbCx0aGVuOmZ1
        bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMucHJvbWlzZS50aGVuKGUsdCl9LGFi
        b3J0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXNBYm9ydGVkP3RoaXM6KG0o
        dGhpcy5yb3V0ZXIsdGhpcy5zZXF1ZW5jZSx0aGlzLnRhcmdldE5hbWUrIjog
        dHJhbnNpdGlvbiB3YXMgYWJvcnRlZCIpLHRoaXMuaXNBYm9ydGVkPSEwLHRo
        aXMuaXNBY3RpdmU9ITEsdGhpcy5yb3V0ZXIuYWN0aXZlVHJhbnNpdGlvbj1u
        dWxsLHRoaXMpfSxyZXRyeTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmFib3J0
        KCksdGhpcy5yb3V0ZXIudHJhbnNpdGlvbkJ5SW50ZW50KHRoaXMuaW50ZW50
        LCExKX0sbWV0aG9kOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnVybE1ldGhv
        ZD1lLHRoaXN9LHRyaWdnZXI6ZnVuY3Rpb24oZSl7dmFyIHQ9aC5jYWxsKGFy
        Z3VtZW50cyk7ImJvb2xlYW4iPT10eXBlb2YgZT90LnNoaWZ0KCk6ZT0hMSxj
        KHRoaXMucm91dGVyLHRoaXMuc3RhdGUuaGFuZGxlckluZm9zLnNsaWNlKDAs
        dGhpcy5yZXNvbHZlSW5kZXgrMSksZSx0KX0sZm9sbG93UmVkaXJlY3RzOmZ1
        bmN0aW9uKCl7dmFyIGU9dGhpcy5yb3V0ZXI7cmV0dXJuIHRoaXMucHJvbWlz
        ZVsiY2F0Y2giXShmdW5jdGlvbih0KXtpZihlLmFjdGl2ZVRyYW5zaXRpb24p
        cmV0dXJuIGUuYWN0aXZlVHJhbnNpdGlvbi5mb2xsb3dSZWRpcmVjdHMoKTt0
        aHJvdyB0fSl9LHRvU3RyaW5nOmZ1bmN0aW9uKCl7cmV0dXJuIlRyYW5zaXRp
        b24gKHNlcXVlbmNlICIrdGhpcy5zZXF1ZW5jZSsiKSJ9LGxvZzpmdW5jdGlv
        bihlKXttKHRoaXMucm91dGVyLHRoaXMuc2VxdWVuY2UsZSl9fSxpLnByb3Rv
        dHlwZS5zZW5kPWkucHJvdG90eXBlLnRyaWdnZXIsbi5UcmFuc2l0aW9uPWks
        bi5sb2dBYm9ydD1vLG4uVHJhbnNpdGlvbkFib3J0ZWQ9YX0pLGUoInJvdXRl
        ci91dGlscyIsWyJleHBvcnRzIl0sZnVuY3Rpb24oZSl7InVzZSBzdHJpY3Qi
        O2Z1bmN0aW9uIHQoZSx0KXtmb3IodmFyIHIgaW4gdCl0Lmhhc093blByb3Bl
        cnR5KHIpJiYoZVtyXT10W3JdKX1mdW5jdGlvbiByKGUpe3ZhciB0LHIsbj1l
        JiZlLmxlbmd0aDtyZXR1cm4gbiYmbj4wJiZlW24tMV0mJmVbbi0xXS5oYXNP
        d25Qcm9wZXJ0eSgicXVlcnlQYXJhbXMiKT8ocj1lW24tMV0ucXVlcnlQYXJh
        bXMsdD1jLmNhbGwoZSwwLG4tMSksW3Qscl0pOltlLG51bGxdfWZ1bmN0aW9u
        IG4oZSx0LHIpe2UubG9nJiYoMz09PWFyZ3VtZW50cy5sZW5ndGg/ZS5sb2co
        IlRyYW5zaXRpb24gIyIrdCsiOiAiK3IpOihyPXQsZS5sb2cocikpKX1mdW5j
        dGlvbiBpKGUsdCl7dmFyIHI9YXJndW1lbnRzO3JldHVybiBmdW5jdGlvbihu
        KXt2YXIgaT1jLmNhbGwociwyKTtyZXR1cm4gaS5wdXNoKG4pLGUuYXBwbHko
        dCxpKX19ZnVuY3Rpb24gbyhlKXtyZXR1cm4ic3RyaW5nIj09dHlwZW9mIGV8
        fGUgaW5zdGFuY2VvZiBTdHJpbmd8fCJudW1iZXIiPT10eXBlb2YgZXx8ZSBp
        bnN0YW5jZW9mIE51bWJlcn1mdW5jdGlvbiBhKGUsdCl7Zm9yKHZhciByPTAs
        bj1lLmxlbmd0aDtuPnImJiExIT09dChlW3JdKTtyKyspO31mdW5jdGlvbiBz
        KGUsdCxyKXt2YXIgbj17fTtpZihvKHQpKXJldHVybiBuW3JbMF1dPXQsbjtp
        ZihlLnNlcmlhbGl6ZSlyZXR1cm4gZS5zZXJpYWxpemUodCxyKTtpZigxPT09
        ci5sZW5ndGgpe3ZhciBpPXJbMF07cmV0dXJuIG5baV09L19pZCQvLnRlc3Qo
        aSk/dC5pZDp0LG59fWZ1bmN0aW9uIHUoZSx0LHIsbil7aWYoZS50cmlnZ2Vy
        RXZlbnQpcmV0dXJuIGUudHJpZ2dlckV2ZW50KHQscixuKSx2b2lkIDA7dmFy
        IGk9bi5zaGlmdCgpO2lmKCF0KXtpZihyKXJldHVybjt0aHJvdyBuZXcgRXJy
        b3IoIkNvdWxkIG5vdCB0cmlnZ2VyIGV2ZW50ICciK2krIicuIFRoZXJlIGFy
        ZSBubyBhY3RpdmUgaGFuZGxlcnMiKX1mb3IodmFyIG89ITEsYT10Lmxlbmd0
        aC0xO2E+PTA7YS0tKXt2YXIgcz10W2FdLHU9cy5oYW5kbGVyO2lmKHUuZXZl
        bnRzJiZ1LmV2ZW50c1tpXSl7aWYodS5ldmVudHNbaV0uYXBwbHkodSxuKSE9
        PSEwKXJldHVybjtvPSEwfX1pZighbyYmIXIpdGhyb3cgbmV3IEVycm9yKCJO
        b3RoaW5nIGhhbmRsZWQgdGhlIGV2ZW50ICciK2krIicuIil9ZnVuY3Rpb24g
        bChlLHIpe3ZhciBuLGk9e2FsbDp7fSxjaGFuZ2VkOnt9LHJlbW92ZWQ6e319
        O3QoaS5hbGwscik7dmFyIG89ITE7Zm9yKG4gaW4gZSllLmhhc093blByb3Bl
        cnR5KG4pJiYoci5oYXNPd25Qcm9wZXJ0eShuKXx8KG89ITAsaS5yZW1vdmVk
        W25dPWVbbl0pKTtmb3IobiBpbiByKXIuaGFzT3duUHJvcGVydHkobikmJmVb
        bl0hPT1yW25dJiYoaS5jaGFuZ2VkW25dPXJbbl0sbz0hMCk7cmV0dXJuIG8m
        Jml9dmFyIGM9QXJyYXkucHJvdG90eXBlLnNsaWNlLGg9T2JqZWN0LmNyZWF0
        ZXx8ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCgpe31yZXR1cm4gdC5wcm90b3R5
        cGU9ZSxuZXcgdH07ZS50cmlnZ2VyPXUsZS5sb2c9bixlLm9DcmVhdGU9aCxl
        Lm1lcmdlPXQsZS5leHRyYWN0UXVlcnlQYXJhbXM9cixlLmJpbmQ9aSxlLmlz
        UGFyYW09byxlLmZvckVhY2g9YSxlLnNsaWNlPWMsZS5zZXJpYWxpemU9cyxl
        LmdldENoYW5nZWxpc3Q9bH0pLGUoInJvdXRlciIsWyIuL3JvdXRlci9yb3V0
        ZXIiLCJleHBvcnRzIl0sZnVuY3Rpb24oZSx0KXsidXNlIHN0cmljdCI7dmFy
        IHI9ZS5Sb3V0ZXI7dC5Sb3V0ZXI9cn0pfSgpLGZ1bmN0aW9uKCl7ZnVuY3Rp
        b24gZShlKXt0aGlzLnBhcmVudD1lLHRoaXMubWF0Y2hlcz1bXX1mdW5jdGlv
        biB0KGUsdCxyKXtyPXJ8fHt9LCJzdHJpbmciIT10eXBlb2Ygci5wYXRoJiYo
        ci5wYXRoPSIvIit0KSxlLnBhcmVudCYmImFwcGxpY2F0aW9uIiE9PWUucGFy
        ZW50JiYodD1lLnBhcmVudCsiLiIrdCksZS5wdXNoKHIucGF0aCx0LG51bGws
        ci5xdWVyeVBhcmFtcyl9ZS5wcm90b3R5cGU9e3Jlc291cmNlOmZ1bmN0aW9u
        KHIsbixpKXtpZigyPT09YXJndW1lbnRzLmxlbmd0aCYmImZ1bmN0aW9uIj09
        dHlwZW9mIG4mJihpPW4sbj17fSksMT09PWFyZ3VtZW50cy5sZW5ndGgmJihu
        PXt9KSwic3RyaW5nIiE9dHlwZW9mIG4ucGF0aCYmKG4ucGF0aD0iLyIrciks
        aSl7dmFyIG89bmV3IGUocik7dChvLCJsb2FkaW5nIiksdChvLCJlcnJvciIs
        e3BhdGg6Ii9fdW51c2VkX2R1bW15X2Vycm9yX3BhdGhfcm91dGVfIityKyIv
        OmVycm9yIn0pLGkuY2FsbChvKSx0aGlzLnB1c2gobi5wYXRoLHIsby5nZW5l
        cmF0ZSgpLG4ucXVlcnlQYXJhbXMpfWVsc2UgdGhpcy5wdXNoKG4ucGF0aCxy
        LG51bGwsbi5xdWVyeVBhcmFtcyl9LHB1c2g6ZnVuY3Rpb24oZSx0LHIsbil7
        dmFyIGk9dC5zcGxpdCgiLiIpOygiIj09PWV8fCIvIj09PWV8fCJpbmRleCI9
        PT1pW2kubGVuZ3RoLTFdKSYmKHRoaXMuZXhwbGljaXRJbmRleD0hMCksdGhp
        cy5tYXRjaGVzLnB1c2goW2UsdCxyLG5dKX0scm91dGU6ZnVuY3Rpb24oZSxy
        KXt0KHRoaXMsZSxyKX0sZ2VuZXJhdGU6ZnVuY3Rpb24oKXt2YXIgZT10aGlz
        Lm1hdGNoZXM7cmV0dXJuIHRoaXMuZXhwbGljaXRJbmRleHx8dGhpcy5yb3V0
        ZSgiaW5kZXgiLHtwYXRoOiIvIn0pLGZ1bmN0aW9uKHQpe2Zvcih2YXIgcj0w
        LG49ZS5sZW5ndGg7bj5yO3IrKyl7dmFyIGk9ZVtyXTt0KGlbMF0pLnRvKGlb
        MV0saVsyXSl9fX19LGUubWFwPWZ1bmN0aW9uKHQpe3ZhciByPW5ldyBlO3Jl
        dHVybiB0LmNhbGwocikscn0sRW1iZXIuUm91dGVyRFNMPWV9KCksZnVuY3Rp
        b24oKXt2YXIgZT1FbWJlci5nZXQ7RW1iZXIuY29udHJvbGxlckZvcj1mdW5j
        dGlvbihlLHQscil7cmV0dXJuIGUubG9va3VwKCJjb250cm9sbGVyOiIrdCxy
        KX0sRW1iZXIuZ2VuZXJhdGVDb250cm9sbGVyRmFjdG9yeT1mdW5jdGlvbihl
        LHQscil7dmFyIG4saSxvLGE7cmV0dXJuIGE9ciYmRW1iZXIuaXNBcnJheShy
        KT8iYXJyYXkiOnI/Im9iamVjdCI6ImJhc2ljIixvPSJjb250cm9sbGVyOiIr
        YSxuPWUubG9va3VwRmFjdG9yeShvKS5leHRlbmQoe2lzR2VuZXJhdGVkOiEw
        LHRvU3RyaW5nOmZ1bmN0aW9uKCl7cmV0dXJuIihnZW5lcmF0ZWQgIit0KyIg
        Y29udHJvbGxlcikifX0pLGk9ImNvbnRyb2xsZXI6Iit0LGUucmVnaXN0ZXIo
        aSxuKSxufSxFbWJlci5nZW5lcmF0ZUNvbnRyb2xsZXI9ZnVuY3Rpb24odCxy
        LG4pe0VtYmVyLmdlbmVyYXRlQ29udHJvbGxlckZhY3RvcnkodCxyLG4pO3Zh
        ciBpPSJjb250cm9sbGVyOiIrcixvPXQubG9va3VwKGkpO3JldHVybiBlKG8s
        Im5hbWVzcGFjZS5MT0dfQUNUSVZFX0dFTkVSQVRJT04iKSxvfX0oKSxmdW5j
        dGlvbigpe2Z1bmN0aW9uIGUoZSx0KXt2YXIgcj1lLmNvbnRyb2xsZXJOYW1l
        fHxlLnJvdXRlTmFtZSxuPWUuY29udHJvbGxlckZvcihyLCEwKTtuJiZuLnF1
        ZXJ5UGFyYW1zJiZmKG4ucXVlcnlQYXJhbXMsZnVuY3Rpb24oZSl7dmFyIG4s
        aT1lLnNwbGl0KCI6Iik7bj1pLmxlbmd0aD4xP2lbMV06ImFwcGxpY2F0aW9u
        IiE9PXI/cisiWyIrZSsiXSI6ZTt2YXIgbz1yKyI6IitlO3QucXVlcnlQYXJh
        bXNbb109bix0LnRyYW5zbGF0aW9uc1tpWzBdXT1vfSl9ZnVuY3Rpb24gcihl
        LHQscil7Zm9yKHZhciBuPXQuc3RhdGUuaGFuZGxlckluZm9zLGk9ITEsbz1u
        Lmxlbmd0aC0xO28+PTA7LS1vKXt2YXIgYT1uW29dLHM9YS5oYW5kbGVyO2lm
        KGkpe2lmKHIocyxuW28rMV0uaGFuZGxlcikhPT0hMClyZXR1cm4hMX1lbHNl
        IGU9PT1zJiYoaT0hMCl9cmV0dXJuITB9ZnVuY3Rpb24gbihlLHQscil7dmFy
        IG4sbz1lLnJvdXRlcixhPSh0LnJvdXRlTmFtZS5zcGxpdCgiLiIpLnBvcCgp
        LCJhcHBsaWNhdGlvbiI9PT1lLnJvdXRlTmFtZT8iIjplLnJvdXRlTmFtZSsi
        LiIpO3JldHVybiBuPWErcixpKG8sbik/bjp2b2lkIDB9ZnVuY3Rpb24gaShl
        LHQpe3ZhciByPWUuY29udGFpbmVyO3JldHVybiBlLmhhc1JvdXRlKHQpJiYo
        ci5oYXMoInRlbXBsYXRlOiIrdCl8fHIuaGFzKCJyb3V0ZToiK3QpKX1mdW5j
        dGlvbiBvKGUsdCxyKXt2YXIgbj1yLnNoaWZ0KCk7aWYoIWUpe2lmKHQpcmV0
        dXJuO3Rocm93IG5ldyBFbWJlci5FcnJvcigiQ2FuJ3QgdHJpZ2dlciBhY3Rp
        b24gJyIrbisiJyBiZWNhdXNlIHlvdXIgYXBwIGhhc24ndCBmaW5pc2hlZCB0
        cmFuc2l0aW9uaW5nIGludG8gaXRzIGZpcnN0IHJvdXRlLiBUbyB0cmlnZ2Vy
        IGFuIGFjdGlvbiBvbiBkZXN0aW5hdGlvbiByb3V0ZXMgZHVyaW5nIGEgdHJh
        bnNpdGlvbiwgeW91IGNhbiBjYWxsIGAuc2VuZCgpYCBvbiB0aGUgYFRyYW5z
        aXRpb25gIG9iamVjdCBwYXNzZWQgdG8gdGhlIGBtb2RlbC9iZWZvcmVNb2Rl
        bC9hZnRlck1vZGVsYCBob29rcy4iKX1mb3IodmFyIGk9ITEsbz1lLmxlbmd0
        aC0xO28+PTA7by0tKXt2YXIgYT1lW29dLHM9YS5oYW5kbGVyO2lmKHMuX2Fj
        dGlvbnMmJnMuX2FjdGlvbnNbbl0pe2lmKHMuX2FjdGlvbnNbbl0uYXBwbHko
        cyxyKSE9PSEwKXJldHVybjtpPSEwfX1pZihkW25dKXJldHVybiBkW25dLmFw
        cGx5KG51bGwsciksdm9pZCAwO2lmKCFpJiYhdCl0aHJvdyBuZXcgRW1iZXIu
        RXJyb3IoIk5vdGhpbmcgaGFuZGxlZCB0aGUgYWN0aW9uICciK24rIicuIElm
        IHlvdSBkaWQgaGFuZGxlIHRoZSBhY3Rpb24sIHRoaXMgZXJyb3IgY2FuIGJl
        IGNhdXNlZCBieSByZXR1cm5pbmcgdHJ1ZSBmcm9tIGFuIGFjdGlvbiBoYW5k
        bGVyIGluIGEgY29udHJvbGxlciwgY2F1c2luZyB0aGUgYWN0aW9uIHRvIGJ1
        YmJsZS4iKX1mdW5jdGlvbiBhKGUpe3ZhciB0PWUuY29udGFpbmVyLmxvb2t1
        cCgiY29udHJvbGxlcjphcHBsaWNhdGlvbiIpO2lmKHQpe3ZhciByPWUucm91
        dGVyLmN1cnJlbnRIYW5kbGVySW5mb3Msbj1FbWJlci5Sb3V0ZXIuX3JvdXRl
        UGF0aChyKTsiY3VycmVudFBhdGgiaW4gdHx8aCh0LCJjdXJyZW50UGF0aCIp
        LGModCwiY3VycmVudFBhdGgiLG4pLCJjdXJyZW50Um91dGVOYW1lImluIHR8
        fGgodCwiY3VycmVudFJvdXRlTmFtZSIpLGModCwiY3VycmVudFJvdXRlTmFt
        ZSIscltyLmxlbmd0aC0xXS5uYW1lKQp9fXZhciBzPXQoInJvdXRlciIpLHU9
        cy5Sb3V0ZXIsbD0ocy5UcmFuc2l0aW9uLEVtYmVyLmdldCksYz1FbWJlci5z
        ZXQsaD0oRW1iZXIuU3RyaW5nLmZtdCxFbWJlci5kZWZpbmVQcm9wZXJ0eSks
        bT1BcnJheS5wcm90b3R5cGUuc2xpY2UsZj1FbWJlci5FbnVtZXJhYmxlVXRp
        bHMuZm9yRWFjaCxwPUVtYmVyLl9NZXRhbW9ycGhWaWV3O0VtYmVyLlJvdXRl
        cj1FbWJlci5PYmplY3QuZXh0ZW5kKEVtYmVyLkV2ZW50ZWQse2xvY2F0aW9u
        OiJoYXNoIixpbml0OmZ1bmN0aW9uKCl7dGhpcy5yb3V0ZXI9dGhpcy5jb25z
        dHJ1Y3Rvci5yb3V0ZXJ8fHRoaXMuY29uc3RydWN0b3IubWFwKEVtYmVyLksp
        LHRoaXMuX2FjdGl2ZVZpZXdzPXt9LHRoaXMuX3NldHVwTG9jYXRpb24oKSxs
        KHRoaXMsIm5hbWVzcGFjZS5MT0dfVFJBTlNJVElPTlNfSU5URVJOQUwiKSYm
        KHRoaXMucm91dGVyLmxvZz1FbWJlci5Mb2dnZXIuZGVidWcpfSx1cmw6RW1i
        ZXIuY29tcHV0ZWQoZnVuY3Rpb24oKXtyZXR1cm4gbCh0aGlzLCJsb2NhdGlv
        biIpLmdldFVSTCgpfSksc3RhcnRSb3V0aW5nOmZ1bmN0aW9uKCl7dGhpcy5y
        b3V0ZXI9dGhpcy5yb3V0ZXJ8fHRoaXMuY29uc3RydWN0b3IubWFwKEVtYmVy
        LkspO3ZhciBlPXRoaXMucm91dGVyLHQ9bCh0aGlzLCJsb2NhdGlvbiIpLHI9
        dGhpcy5jb250YWluZXIsbj10aGlzLGk9bCh0aGlzLCJpbml0aWFsVVJMIik7
        dGhpcy5fc2V0dXBSb3V0ZXIoZSx0KSxyLnJlZ2lzdGVyKCJ2aWV3OmRlZmF1
        bHQiLHApLHIucmVnaXN0ZXIoInZpZXc6dG9wbGV2ZWwiLEVtYmVyLlZpZXcu
        ZXh0ZW5kKCkpLHQub25VcGRhdGVVUkwoZnVuY3Rpb24oZSl7bi5oYW5kbGVV
        UkwoZSl9KSwidW5kZWZpbmVkIj09dHlwZW9mIGkmJihpPXQuZ2V0VVJMKCkp
        LHRoaXMuaGFuZGxlVVJMKGkpfSxkaWRUcmFuc2l0aW9uOmZ1bmN0aW9uKGUp
        e2EodGhpcyksdGhpcy5fY2FuY2VsTG9hZGluZ0V2ZW50KCksdGhpcy5ub3Rp
        ZnlQcm9wZXJ0eUNoYW5nZSgidXJsIiksRW1iZXIucnVuLm9uY2UodGhpcyx0
        aGlzLnRyaWdnZXIsImRpZFRyYW5zaXRpb24iKSxsKHRoaXMsIm5hbWVzcGFj
        ZSIpLkxPR19UUkFOU0lUSU9OUyYmRW1iZXIuTG9nZ2VyLmxvZygiVHJhbnNp
        dGlvbmVkIGludG8gJyIrRW1iZXIuUm91dGVyLl9yb3V0ZVBhdGgoZSkrIici
        KX0saGFuZGxlVVJMOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9kb1RyYW5z
        aXRpb24oImhhbmRsZVVSTCIsW2VdKX0sdHJhbnNpdGlvblRvOmZ1bmN0aW9u
        KCl7cmV0dXJuIHRoaXMuX2RvVHJhbnNpdGlvbigidHJhbnNpdGlvblRvIixh
        cmd1bWVudHMpfSxpbnRlcm1lZGlhdGVUcmFuc2l0aW9uVG86ZnVuY3Rpb24o
        KXt0aGlzLnJvdXRlci5pbnRlcm1lZGlhdGVUcmFuc2l0aW9uVG8uYXBwbHko
        dGhpcy5yb3V0ZXIsYXJndW1lbnRzKSxhKHRoaXMpO3ZhciBlPXRoaXMucm91
        dGVyLmN1cnJlbnRIYW5kbGVySW5mb3M7bCh0aGlzLCJuYW1lc3BhY2UiKS5M
        T0dfVFJBTlNJVElPTlMmJkVtYmVyLkxvZ2dlci5sb2coIkludGVybWVkaWF0
        ZS10cmFuc2l0aW9uZWQgaW50byAnIitFbWJlci5Sb3V0ZXIuX3JvdXRlUGF0
        aChlKSsiJyIpfSxyZXBsYWNlV2l0aDpmdW5jdGlvbigpe3JldHVybiB0aGlz
        Ll9kb1RyYW5zaXRpb24oInJlcGxhY2VXaXRoIixhcmd1bWVudHMpfSxnZW5l
        cmF0ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMucm91dGVyLmdlbmVyYXRlLmFw
        cGx5KHRoaXMucm91dGVyLGFyZ3VtZW50cyk7cmV0dXJuIHRoaXMubG9jYXRp
        b24uZm9ybWF0VVJMKGUpfSxpc0FjdGl2ZTpmdW5jdGlvbigpe3ZhciBlPXRo
        aXMucm91dGVyO3JldHVybiBlLmlzQWN0aXZlLmFwcGx5KGUsYXJndW1lbnRz
        KX0sc2VuZDpmdW5jdGlvbigpe3RoaXMucm91dGVyLnRyaWdnZXIuYXBwbHko
        dGhpcy5yb3V0ZXIsYXJndW1lbnRzKX0saGFzUm91dGU6ZnVuY3Rpb24oZSl7
        cmV0dXJuIHRoaXMucm91dGVyLmhhc1JvdXRlKGUpfSxyZXNldDpmdW5jdGlv
        bigpe3RoaXMucm91dGVyLnJlc2V0KCl9LF9sb29rdXBBY3RpdmVWaWV3OmZ1
        bmN0aW9uKGUpe3ZhciB0PXRoaXMuX2FjdGl2ZVZpZXdzW2VdO3JldHVybiB0
        JiZ0WzBdfSxfY29ubmVjdEFjdGl2ZVZpZXc6ZnVuY3Rpb24oZSx0KXt2YXIg
        cj10aGlzLl9hY3RpdmVWaWV3c1tlXTtyJiZyWzBdLm9mZigid2lsbERlc3Ry
        b3lFbGVtZW50Iix0aGlzLHJbMV0pO3ZhciBuPWZ1bmN0aW9uKCl7ZGVsZXRl
        IHRoaXMuX2FjdGl2ZVZpZXdzW2VdfTt0aGlzLl9hY3RpdmVWaWV3c1tlXT1b
        dCxuXSx0Lm9uZSgid2lsbERlc3Ryb3lFbGVtZW50Iix0aGlzLG4pfSxfc2V0
        dXBMb2NhdGlvbjpmdW5jdGlvbigpe3ZhciBlPWwodGhpcywibG9jYXRpb24i
        KSx0PWwodGhpcywicm9vdFVSTCIpO2lmKCJzdHJpbmciPT10eXBlb2YgZSYm
        dGhpcy5jb250YWluZXIpe3ZhciByPXRoaXMuY29udGFpbmVyLmxvb2t1cCgi
        bG9jYXRpb246IitlKTtpZigidW5kZWZpbmVkIiE9dHlwZW9mIHIpZT1jKHRo
        aXMsImxvY2F0aW9uIixyKTtlbHNle3ZhciBuPXtpbXBsZW1lbnRhdGlvbjpl
        fTtlPWModGhpcywibG9jYXRpb24iLEVtYmVyLkxvY2F0aW9uLmNyZWF0ZShu
        KSl9fSJzdHJpbmciPT10eXBlb2YgdCYmKGUucm9vdFVSTD10KSwiZnVuY3Rp
        b24iPT10eXBlb2YgZS5pbml0U3RhdGUmJmUuaW5pdFN0YXRlKCl9LF9nZXRI
        YW5kbGVyRnVuY3Rpb246ZnVuY3Rpb24oKXt2YXIgZT17fSx0PXRoaXMuY29u
        dGFpbmVyLHI9dC5sb29rdXBGYWN0b3J5KCJyb3V0ZTpiYXNpYyIpLG49dGhp
        cztyZXR1cm4gZnVuY3Rpb24oaSl7dmFyIG89InJvdXRlOiIraSxhPXQubG9v
        a3VwKG8pO3JldHVybiBlW2ldP2E6KGVbaV09ITAsYXx8KHQucmVnaXN0ZXIo
        byxyLmV4dGVuZCgpKSxhPXQubG9va3VwKG8pLGwobiwibmFtZXNwYWNlLkxP
        R19BQ1RJVkVfR0VORVJBVElPTiIpKSxhLnJvdXRlTmFtZT1pLGEpfX0sX3Nl
        dHVwUm91dGVyOmZ1bmN0aW9uKGUsdCl7dmFyIHIsbj10aGlzO2UuZ2V0SGFu
        ZGxlcj10aGlzLl9nZXRIYW5kbGVyRnVuY3Rpb24oKTt2YXIgaT1mdW5jdGlv
        bigpe3Quc2V0VVJMKHIpfTtpZihlLnVwZGF0ZVVSTD1mdW5jdGlvbihlKXty
        PWUsRW1iZXIucnVuLm9uY2UoaSl9LHQucmVwbGFjZVVSTCl7dmFyIG89ZnVu
        Y3Rpb24oKXt0LnJlcGxhY2VVUkwocil9O2UucmVwbGFjZVVSTD1mdW5jdGlv
        bihlKXtyPWUsRW1iZXIucnVuLm9uY2Uobyl9fWUuZGlkVHJhbnNpdGlvbj1m
        dW5jdGlvbihlKXtuLmRpZFRyYW5zaXRpb24oZSl9fSxfZG9UcmFuc2l0aW9u
        OmZ1bmN0aW9uKGUsdCl7dD1tLmNhbGwodCksdFswXT10WzBdfHwiLyI7dmFy
        IHIsbixpPXRbMF0sbz0hMTtpZihvfHwiLyI9PT1pLmNoYXJBdCgwKXx8KHI9
        dGhpcy5yb3V0ZXIuaGFzUm91dGUoaSk/aTp0WzBdPWkrIi5pbmRleCIpLG4p
        e2lmKCFyKXt2YXIgYT10aGlzLnJvdXRlci5hY3RpdmVUcmFuc2l0aW9uP3Ro
        aXMucm91dGVyLmFjdGl2ZVRyYW5zaXRpb24uc3RhdGUuaGFuZGxlckluZm9z
        OnRoaXMucm91dGVyLnN0YXRlLmhhbmRsZXJJbmZvcztyPWFbYS5sZW5ndGgt
        MV0ubmFtZSx0LnVuc2hpZnQocil9dmFyIHM9dGhpcy5fcXVlcnlQYXJhbU5h
        bWVzRm9yKHIpO0VtYmVyLlJvdXRlci5fdHJhbnNsYXRlUXVlcnlQYXJhbXMo
        bixzLnRyYW5zbGF0aW9ucyxyKTtmb3IodmFyIHUgaW4gbilpZih1IGluIHMu
        cXVlcnlQYXJhbXMpe3ZhciBsPW5bdV07ZGVsZXRlIG5bdV0sbltzLnF1ZXJ5
        UGFyYW1zW3VdXT1sfX12YXIgYz10aGlzLnJvdXRlcltlXS5hcHBseSh0aGlz
        LnJvdXRlcix0KTtyZXR1cm4gYy50aGVuKG51bGwsZnVuY3Rpb24oZSl7IlVu
        cmVjb2duaXplZFVSTEVycm9yIj09PWUubmFtZX0sIkVtYmVyOiBDaGVjayBm
        b3IgUm91dGVyIHVucmVjb2duaXplZCBVUkwgZXJyb3IiKSxjfSxfc2NoZWR1
        bGVMb2FkaW5nRXZlbnQ6ZnVuY3Rpb24oZSx0KXt0aGlzLl9jYW5jZWxMb2Fk
        aW5nRXZlbnQoKSx0aGlzLl9sb2FkaW5nU3RhdGVUaW1lcj1FbWJlci5ydW4u
        c2NoZWR1bGVPbmNlKCJyb3V0ZXJUcmFuc2l0aW9ucyIsdGhpcywiX2ZpcmVM
        b2FkaW5nRXZlbnQiLGUsdCl9LF9maXJlTG9hZGluZ0V2ZW50OmZ1bmN0aW9u
        KGUsdCl7dGhpcy5yb3V0ZXIuYWN0aXZlVHJhbnNpdGlvbiYmZS50cmlnZ2Vy
        KCEwLCJsb2FkaW5nIixlLHQpfSxfY2FuY2VsTG9hZGluZ0V2ZW50OmZ1bmN0
        aW9uKCl7dGhpcy5fbG9hZGluZ1N0YXRlVGltZXImJkVtYmVyLnJ1bi5jYW5j
        ZWwodGhpcy5fbG9hZGluZ1N0YXRlVGltZXIpLHRoaXMuX2xvYWRpbmdTdGF0
        ZVRpbWVyPW51bGx9LF9xdWVyeVBhcmFtTmFtZXNGb3I6ZnVuY3Rpb24odCl7
        dD10aGlzLnJvdXRlci5oYXNSb3V0ZSh0KT90OnQrIi5pbmRleCI7dmFyIHI9
        dGhpcy5yb3V0ZXIucmVjb2duaXplci5oYW5kbGVyc0Zvcih0KSxuPXtxdWVy
        eVBhcmFtczpFbWJlci5jcmVhdGUobnVsbCksdHJhbnNsYXRpb25zOkVtYmVy
        LmNyZWF0ZShudWxsKX0saT10aGlzLnJvdXRlcjtyZXR1cm4gZihyLGZ1bmN0
        aW9uKHQpe3ZhciByPWkuZ2V0SGFuZGxlcih0LmhhbmRsZXIpO2UocixuKX0p
        LG59LF9xdWVyeVBhcmFtTmFtZXNGb3JTaW5nbGU6ZnVuY3Rpb24odCl7dmFy
        IHI9e3F1ZXJ5UGFyYW1zOkVtYmVyLmNyZWF0ZShudWxsKSx0cmFuc2xhdGlv
        bnM6RW1iZXIuY3JlYXRlKG51bGwpfSxuPXRoaXMucm91dGVyLmdldEhhbmRs
        ZXIodCk7cmV0dXJuIGUobixyKSxyfSxfcXVlcnlQYXJhbU92ZXJyaWRlczpm
        dW5jdGlvbihlLHQscil7Zm9yKHZhciBuIGluIHQpe3ZhciBpPW4uc3BsaXQo
        IjoiKSxvPXRoaXMuY29udGFpbmVyLmxvb2t1cCgiY29udHJvbGxlcjoiK2lb
        MF0pO2VbdFtuXV09bChvLGlbMV0pLHImJnIobix0W25dLG4pfX19KTt2YXIg
        ZD17d2lsbFJlc29sdmVNb2RlbDpmdW5jdGlvbihlLHQpe3Qucm91dGVyLl9z
        Y2hlZHVsZUxvYWRpbmdFdmVudChlLHQpfSxlcnJvcjpmdW5jdGlvbihlLHQs
        byl7dmFyIGE9by5yb3V0ZXIscz1yKG8sdCxmdW5jdGlvbih0LHIpe3ZhciBp
        PW4odCxyLCJlcnJvciIpO3JldHVybiBpPyhhLmludGVybWVkaWF0ZVRyYW5z
        aXRpb25UbyhpLGUpLHZvaWQgMCk6ITB9KTtyZXR1cm4gcz9pKG8ucm91dGVy
        LCJhcHBsaWNhdGlvbl9lcnJvciIpPyhhLmludGVybWVkaWF0ZVRyYW5zaXRp
        b25UbygiYXBwbGljYXRpb25fZXJyb3IiLGUpLHZvaWQgMCk6KEVtYmVyLkxv
        Z2dlci5lcnJvcigiRXJyb3Igd2hpbGUgbG9hZGluZyByb3V0ZTogIitlLnN0
        YWNrKSx2b2lkIDApOnZvaWQgMH0sbG9hZGluZzpmdW5jdGlvbihlLHQpe3Zh
        ciBvPXQucm91dGVyLGE9cih0LGUsZnVuY3Rpb24odCxyKXt2YXIgaT1uKHQs
        ciwibG9hZGluZyIpO3JldHVybiBpPyhvLmludGVybWVkaWF0ZVRyYW5zaXRp
        b25UbyhpKSx2b2lkIDApOmUucGl2b3RIYW5kbGVyIT09dD8hMDp2b2lkIDB9
        KTtyZXR1cm4gYSYmaSh0LnJvdXRlciwiYXBwbGljYXRpb25fbG9hZGluZyIp
        PyhvLmludGVybWVkaWF0ZVRyYW5zaXRpb25UbygiYXBwbGljYXRpb25fbG9h
        ZGluZyIpLHZvaWQgMCk6dm9pZCAwfX07RW1iZXIuUm91dGVyLnJlb3BlbkNs
        YXNzKHtyb3V0ZXI6bnVsbCxtYXA6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5y
        b3V0ZXI7dHx8KHQ9bmV3IHUsdC5jYWxsYmFja3M9W10sdC50cmlnZ2VyRXZl
        bnQ9byx0aGlzLnJlb3BlbkNsYXNzKHtyb3V0ZXI6dH0pKTt2YXIgcj1FbWJl
        ci5Sb3V0ZXJEU0wubWFwKGZ1bmN0aW9uKCl7dGhpcy5yZXNvdXJjZSgiYXBw
        bGljYXRpb24iLHtwYXRoOiIvIn0sZnVuY3Rpb24oKXtmb3IodmFyIHI9MDty
        PHQuY2FsbGJhY2tzLmxlbmd0aDtyKyspdC5jYWxsYmFja3Nbcl0uY2FsbCh0
        aGlzKTtlLmNhbGwodGhpcyl9KX0pO3JldHVybiB0LmNhbGxiYWNrcy5wdXNo
        KGUpLHQubWFwKHIuZ2VuZXJhdGUoKSksdH0sX3JvdXRlUGF0aDpmdW5jdGlv
        bihlKXtmdW5jdGlvbiB0KGUsdCl7Zm9yKHZhciByPTAsbj1lLmxlbmd0aDtu
        PnI7KytyKWlmKGVbcl0hPT10W3JdKXJldHVybiExO3JldHVybiEwfWZvcih2
        YXIgcj1bXSxuPTEsaT1lLmxlbmd0aDtpPm47bisrKXtmb3IodmFyIG89ZVtu
        XS5uYW1lLGE9by5zcGxpdCgiLiIpLHM9bS5jYWxsKHIpO3MubGVuZ3RoJiYh
        dChzLGEpOylzLnNoaWZ0KCk7ci5wdXNoLmFwcGx5KHIsYS5zbGljZShzLmxl
        bmd0aCkpfXJldHVybiByLmpvaW4oIi4iKX0sX3RyYW5zbGF0ZVF1ZXJ5UGFy
        YW1zOmZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByIGluIGUpZS5oYXNPd25Qcm9w
        ZXJ0eShyKSYmciBpbiB0JiYoZVt0W3JdXT1lW3JdLGRlbGV0ZSBlW3JdKX19
        KX0oKSxmdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSl7dmFyIHQ9ZS5yb3V0ZXIu
        cm91dGVyLnN0YXRlLmhhbmRsZXJJbmZvcztpZih0KWZvcih2YXIgcixuLGk9
        MCxvPXQubGVuZ3RoO28+aTtpKyspe2lmKG49dFtpXS5oYW5kbGVyLG49PT1l
        KXJldHVybiByO3I9bn19ZnVuY3Rpb24gdChyKXt2YXIgbixpPWUocik7aWYo
        aSlyZXR1cm4obj1pLmxhc3RSZW5kZXJlZFRlbXBsYXRlKT9uOnQoaSl9ZnVu
        Y3Rpb24gcihlLHIsbixpKXtpPWl8fHt9LGkuaW50bz1pLmludG8/aS5pbnRv
        LnJlcGxhY2UoL1wvL2csIi4iKTp0KGUpLGkub3V0bGV0PWkub3V0bGV0fHwi
        bWFpbiIsaS5uYW1lPXIsaS50ZW1wbGF0ZT1uLGkuTE9HX1ZJRVdfTE9PS1VQ
        Uz1zKGUucm91dGVyLCJuYW1lc3BhY2UuTE9HX1ZJRVdfTE9PS1VQUyIpO3Zh
        ciBvLGE9aS5jb250cm9sbGVyO2lmKGE9aS5jb250cm9sbGVyP2kuY29udHJv
        bGxlcjoobz1lLmNvbnRhaW5lci5sb29rdXAoImNvbnRyb2xsZXI6IityKSk/
        bzplLmNvbnRyb2xsZXJOYW1lfHxlLnJvdXRlTmFtZSwic3RyaW5nIj09dHlw
        ZW9mIGEpe3ZhciB1PWE7aWYoYT1lLmNvbnRhaW5lci5sb29rdXAoImNvbnRy
        b2xsZXI6Iit1KSwhYSl0aHJvdyBuZXcgRW1iZXIuRXJyb3IoIllvdSBwYXNz
        ZWQgYGNvbnRyb2xsZXI6ICciK3UrIidgIGludG8gdGhlIGByZW5kZXJgIG1l
        dGhvZCwgYnV0IG5vIHN1Y2ggY29udHJvbGxlciBjb3VsZCBiZSBmb3VuZC4i
        KX1yZXR1cm4gaS5jb250cm9sbGVyPWEsaX1mdW5jdGlvbiBuKGUsdCxyKXtp
        ZihlKXIuTE9HX1ZJRVdfTE9PS1VQUztlbHNle3ZhciBuPXIuaW50bz8idmll
        dzpkZWZhdWx0Ijoidmlldzp0b3BsZXZlbCI7ZT10Lmxvb2t1cChuKSxyLkxP
        R19WSUVXX0xPT0tVUFN9cmV0dXJuIHMoZSwidGVtcGxhdGVOYW1lIil8fCh1
        KGUsInRlbXBsYXRlIixyLnRlbXBsYXRlKSx1KGUsIl9kZWJ1Z1RlbXBsYXRl
        TmFtZSIsci5uYW1lKSksdShlLCJyZW5kZXJlZE5hbWUiLHIubmFtZSksdShl
        LCJjb250cm9sbGVyIixyLmNvbnRyb2xsZXIpLGV9ZnVuY3Rpb24gaShlLHQs
        cil7aWYoci5pbnRvKXt2YXIgbj1lLnJvdXRlci5fbG9va3VwQWN0aXZlVmll
        dyhyLmludG8pLGk9YShuLHIub3V0bGV0KTtlLnRlYXJkb3duT3V0bGV0Vmll
        d3N8fChlLnRlYXJkb3duT3V0bGV0Vmlld3M9W10pLGgoZS50ZWFyZG93bk91
        dGxldFZpZXdzLDAsMCxbaV0pLG4uY29ubmVjdE91dGxldChyLm91dGxldCx0
        KX1lbHNle3ZhciB1PXMoZSwicm91dGVyLm5hbWVzcGFjZS5yb290RWxlbWVu
        dCIpO2UudGVhcmRvd25Ub3BMZXZlbFZpZXcmJmUudGVhcmRvd25Ub3BMZXZl
        bFZpZXcoKSxlLnJvdXRlci5fY29ubmVjdEFjdGl2ZVZpZXcoci5uYW1lLHQp
        LGUudGVhcmRvd25Ub3BMZXZlbFZpZXc9byh0KSx0LmFwcGVuZFRvKHUpfX1m
        dW5jdGlvbiBvKGUpe3JldHVybiBmdW5jdGlvbigpe2UuZGVzdHJveSgpfX1m
        dW5jdGlvbiBhKGUsdCl7cmV0dXJuIGZ1bmN0aW9uKCl7ZS5kaXNjb25uZWN0
        T3V0bGV0KHQpfX12YXIgcz1FbWJlci5nZXQsdT1FbWJlci5zZXQsbD1FbWJl
        ci5nZXRQcm9wZXJ0aWVzLGM9KEVtYmVyLlN0cmluZy5jbGFzc2lmeSxFbWJl
        ci5TdHJpbmcuZm10LEVtYmVyLkVudW1lcmFibGVVdGlscy5mb3JFYWNoKSxo
        PUVtYmVyLkVudW1lcmFibGVVdGlscy5yZXBsYWNlO0VtYmVyLlJvdXRlPUVt
        YmVyLk9iamVjdC5leHRlbmQoRW1iZXIuQWN0aW9uSGFuZGxlcix7ZXhpdDpm
        dW5jdGlvbigpe3RoaXMuZGVhY3RpdmF0ZSgpLHRoaXMudGVhcmRvd25WaWV3
        cygpfSxlbnRlcjpmdW5jdGlvbigpe3RoaXMuYWN0aXZhdGUoKX0sdmlld05h
        bWU6bnVsbCx0ZW1wbGF0ZU5hbWU6bnVsbCxjb250cm9sbGVyTmFtZTpudWxs
        LF9hY3Rpb25zOntmaW5hbGl6ZVF1ZXJ5UGFyYW1DaGFuZ2U6ZnVuY3Rpb24o
        KXt9fSxldmVudHM6bnVsbCxtZXJnZWRQcm9wZXJ0aWVzOlsiZXZlbnRzIl0s
        ZGVhY3RpdmF0ZTpFbWJlci5LLGFjdGl2YXRlOkVtYmVyLkssdHJhbnNpdGlv
        blRvOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5yb3V0ZXI7cmV0dXJuIGUudHJh
        bnNpdGlvblRvLmFwcGx5KGUsYXJndW1lbnRzKX0saW50ZXJtZWRpYXRlVHJh
        bnNpdGlvblRvOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5yb3V0ZXI7ZS5pbnRl
        cm1lZGlhdGVUcmFuc2l0aW9uVG8uYXBwbHkoZSxhcmd1bWVudHMpfSxyZWZy
        ZXNoOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucm91dGVyLnJvdXRlci5yZWZy
        ZXNoKHRoaXMpLm1ldGhvZCgicmVwbGFjZSIpfSxyZXBsYWNlV2l0aDpmdW5j
        dGlvbigpe3ZhciBlPXRoaXMucm91dGVyO3JldHVybiBlLnJlcGxhY2VXaXRo
        LmFwcGx5KGUsYXJndW1lbnRzKX0sc2VuZDpmdW5jdGlvbigpe3JldHVybiB0
        aGlzLnJvdXRlci5zZW5kLmFwcGx5KHRoaXMucm91dGVyLGFyZ3VtZW50cyl9
        LHNldHVwOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuY29udHJvbGxlck5hbWV8
        fHRoaXMucm91dGVOYW1lLHI9dGhpcy5jb250cm9sbGVyRm9yKHQsITApO3J8
        fChyPXRoaXMuZ2VuZXJhdGVDb250cm9sbGVyKHQsZSkpLHRoaXMuY29udHJv
        bGxlcj1yLHRoaXMuc2V0dXBDb250cm9sbGVycz90aGlzLnNldHVwQ29udHJv
        bGxlcnMocixlKTp0aGlzLnNldHVwQ29udHJvbGxlcihyLGUpLHRoaXMucmVu
        ZGVyVGVtcGxhdGVzP3RoaXMucmVuZGVyVGVtcGxhdGVzKGUpOnRoaXMucmVu
        ZGVyVGVtcGxhdGUocixlKX0sYmVmb3JlTW9kZWw6RW1iZXIuSyxhZnRlck1v
        ZGVsOkVtYmVyLksscmVkaXJlY3Q6RW1iZXIuSyxjb250ZXh0RGlkQ2hhbmdl
        OmZ1bmN0aW9uKCl7dGhpcy5jdXJyZW50TW9kZWw9dGhpcy5jb250ZXh0fSxt
        b2RlbDpmdW5jdGlvbihlKXt2YXIgdCxyLG4saTtmb3IodmFyIG8gaW4gZSki
        cXVlcnlQYXJhbXMiIT09byYmKCh0PW8ubWF0Y2goL14oLiopX2lkJC8pKSYm
        KHI9dFsxXSxpPWVbb10pLG49ITApO2lmKCFyJiZuKXJldHVybiBlO2lmKHIp
        cmV0dXJuIHRoaXMuZmluZE1vZGVsKHIsaSl9LGRlc2VyaWFsaXplOmZ1bmN0
        aW9uKGUsdCl7cmV0dXJuIHRoaXMubW9kZWwoZSx0KX0sZmluZE1vZGVsOmZ1
        bmN0aW9uKCl7dmFyIGU9cyh0aGlzLCJzdG9yZSIpO3JldHVybiBlLmZpbmQu
        YXBwbHkoZSxhcmd1bWVudHMpfSxzdG9yZTpFbWJlci5jb21wdXRlZChmdW5j
        dGlvbigpe3t2YXIgZT10aGlzLmNvbnRhaW5lcjt0aGlzLnJvdXRlTmFtZSxz
        KHRoaXMsInJvdXRlci5uYW1lc3BhY2UiKX1yZXR1cm57ZmluZDpmdW5jdGlv
        bih0LHIpe3ZhciBuPWUubG9va3VwRmFjdG9yeSgibW9kZWw6Iit0KTtpZihu
        KXJldHVybiBuLmZpbmQocil9fX0pLHNlcmlhbGl6ZTpmdW5jdGlvbihlLHQp
        e2lmKCEodC5sZW5ndGg8MSkmJmUpe3ZhciByPXRbMF0sbj17fTtyZXR1cm4v
        X2lkJC8udGVzdChyKSYmMT09PXQubGVuZ3RoP25bcl09cyhlLCJpZCIpOm49
        bChlLHQpLG59fSxzZXR1cENvbnRyb2xsZXI6ZnVuY3Rpb24oZSx0KXtlJiZ2
        b2lkIDAhPT10JiZ1KGUsIm1vZGVsIix0KX0sY29udHJvbGxlckZvcjpmdW5j
        dGlvbihlKXt2YXIgdCxyPXRoaXMuY29udGFpbmVyLG49ci5sb29rdXAoInJv
        dXRlOiIrZSk7cmV0dXJuIG4mJm4uY29udHJvbGxlck5hbWUmJihlPW4uY29u
        dHJvbGxlck5hbWUpLHQ9ci5sb29rdXAoImNvbnRyb2xsZXI6IitlKX0sZ2Vu
        ZXJhdGVDb250cm9sbGVyOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcy5jb250
        YWluZXI7cmV0dXJuIHQ9dHx8dGhpcy5tb2RlbEZvcihlKSxFbWJlci5nZW5l
        cmF0ZUNvbnRyb2xsZXIocixlLHQpfSxtb2RlbEZvcjpmdW5jdGlvbihlKXt2
        YXIgdD10aGlzLmNvbnRhaW5lci5sb29rdXAoInJvdXRlOiIrZSkscj10aGlz
        LnJvdXRlci5yb3V0ZXIuYWN0aXZlVHJhbnNpdGlvbjtpZihyKXt2YXIgbj10
        JiZ0LnJvdXRlTmFtZXx8ZTtpZihyLnJlc29sdmVkTW9kZWxzLmhhc093blBy
        b3BlcnR5KG4pKXJldHVybiByLnJlc29sdmVkTW9kZWxzW25dfXJldHVybiB0
        JiZ0LmN1cnJlbnRNb2RlbH0scmVuZGVyVGVtcGxhdGU6ZnVuY3Rpb24oKXt0
        aGlzLnJlbmRlcigpfSxyZW5kZXI6ZnVuY3Rpb24oZSx0KXsib2JqZWN0IiE9
        dHlwZW9mIGV8fHR8fCh0PWUsZT10aGlzLnJvdXRlTmFtZSksdD10fHx7fTt2
        YXIgbztlPyhlPWUucmVwbGFjZSgvXC8vZywiLiIpLG89ZSk6KGU9dGhpcy5y
        b3V0ZU5hbWUsbz10aGlzLnRlbXBsYXRlTmFtZXx8ZSk7dmFyIGE9dC52aWV3
        fHx0aGlzLnZpZXdOYW1lfHxlLHU9dGhpcy5jb250YWluZXIsbD11Lmxvb2t1
        cCgidmlldzoiK2EpLGM9bD9sLmdldCgidGVtcGxhdGUiKTpudWxsO3JldHVy
        biBjfHwoYz11Lmxvb2t1cCgidGVtcGxhdGU6IitvKSksbHx8Yz8odD1yKHRo
        aXMsZSxjLHQpLGw9bihsLHUsdCksIm1haW4iPT09dC5vdXRsZXQmJih0aGlz
        Lmxhc3RSZW5kZXJlZFRlbXBsYXRlPWUpLGkodGhpcyxsLHQpLHZvaWQgMCk6
        KHModGhpcy5yb3V0ZXIsIm5hbWVzcGFjZS5MT0dfVklFV19MT09LVVBTIiks
        dm9pZCAwKX0sZGlzY29ubmVjdE91dGxldDpmdW5jdGlvbihlKXtlPWV8fHt9
        LGUucGFyZW50Vmlldz1lLnBhcmVudFZpZXc/ZS5wYXJlbnRWaWV3LnJlcGxh
        Y2UoL1wvL2csIi4iKTp0KHRoaXMpLGUub3V0bGV0PWUub3V0bGV0fHwibWFp
        biI7dmFyIHI9dGhpcy5yb3V0ZXIuX2xvb2t1cEFjdGl2ZVZpZXcoZS5wYXJl
        bnRWaWV3KTtyJiZyLmRpc2Nvbm5lY3RPdXRsZXQoZS5vdXRsZXQpfSx3aWxs
        RGVzdHJveTpmdW5jdGlvbigpe3RoaXMudGVhcmRvd25WaWV3cygpfSx0ZWFy
        ZG93blZpZXdzOmZ1bmN0aW9uKCl7dGhpcy50ZWFyZG93blRvcExldmVsVmll
        dyYmdGhpcy50ZWFyZG93blRvcExldmVsVmlldygpO3ZhciBlPXRoaXMudGVh
        cmRvd25PdXRsZXRWaWV3c3x8W107YyhlLGZ1bmN0aW9uKGUpe2UoKX0pLGRl
        bGV0ZSB0aGlzLnRlYXJkb3duVG9wTGV2ZWxWaWV3LGRlbGV0ZSB0aGlzLnRl
        YXJkb3duT3V0bGV0Vmlld3MsZGVsZXRlIHRoaXMubGFzdFJlbmRlcmVkVGVt
        cGxhdGV9fSl9KCksZnVuY3Rpb24oKXtFbWJlci5vbkxvYWQoIkVtYmVyLkhh
        bmRsZWJhcnMiLGZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHIsaSl7cmV0dXJu
        IG4uY2FsbCh0KGUscixpKSxmdW5jdGlvbih0LG4pe3JldHVybiBudWxsPT09
        dD9yW25dOm8oZSx0LGkpfSl9ZnVuY3Rpb24gdChlLHQsbyl7ZnVuY3Rpb24g
        YShlLHQpe3JldHVybiJjb250cm9sbGVyIj09PXQ/dDpFbWJlci5Db250cm9s
        bGVyTWl4aW4uZGV0ZWN0KGUpP2EoaShlLCJtb2RlbCIpLHQ/dCsiLm1vZGVs
        IjoibW9kZWwiKTp0fXZhciBzPXIoZSx0LG8pLHU9by50eXBlcztyZXR1cm4g
        bi5jYWxsKHMsZnVuY3Rpb24oZSxyKXtyZXR1cm4iSUQiPT09dVtyXT9hKGUs
        dFtyXSk6bnVsbH0pfXZhciByPUVtYmVyLkhhbmRsZWJhcnMucmVzb2x2ZVBh
        cmFtcyxuPUVtYmVyLkFycmF5UG9seWZpbGxzLm1hcCxpPUVtYmVyLmdldCxv
        PUVtYmVyLkhhbmRsZWJhcnMuZ2V0O0VtYmVyLlJvdXRlci5yZXNvbHZlUGFy
        YW1zPWUsRW1iZXIuUm91dGVyLnJlc29sdmVQYXRocz10fSl9KCksZnVuY3Rp
        b24oKXt2YXIgZT1FbWJlci5nZXQsdD0oRW1iZXIuc2V0LEVtYmVyLlN0cmlu
        Zy5mbXQsQXJyYXkucHJvdG90eXBlLnNsaWNlKTtFbWJlci5vbkxvYWQoIkVt
        YmVyLkhhbmRsZWJhcnMiLGZ1bmN0aW9uKCl7ZnVuY3Rpb24gcihlLHQpe3Zh
        ciByO3JldHVybiBlLmhhc1JvdXRlKHQpfHwocj10KyIuaW5kZXgiLHQ9ciks
        dH1mdW5jdGlvbiBuKGUpe3ZhciB0PWUub3B0aW9ucy50eXBlcyxyPWUub3B0
        aW9ucy5kYXRhO3JldHVybiBzKGUuY29udGV4dCxlLnBhcmFtcyx7dHlwZXM6
        dCxkYXRhOnJ9KX12YXIgaT1FbWJlci5PYmplY3QuZXh0ZW5kKHt2YWx1ZXM6
        bnVsbH0pLG89RW1iZXIuUm91dGVyLnJlc29sdmVQYXJhbXMsYT1FbWJlci5S
        b3V0ZXIuX3RyYW5zbGF0ZVF1ZXJ5UGFyYW1zLHM9RW1iZXIuUm91dGVyLnJl
        c29sdmVQYXRocyx1PUVtYmVyLlZpZXdVdGlscy5pc1NpbXBsZUNsaWNrLGw9
        RW1iZXIuTGlua1ZpZXc9RW1iZXIuVmlldy5leHRlbmQoe3RhZ05hbWU6ImEi
        LGN1cnJlbnRXaGVuOm51bGwsdGl0bGU6bnVsbCxyZWw6bnVsbCxhY3RpdmVD
        bGFzczoiYWN0aXZlIixsb2FkaW5nQ2xhc3M6ImxvYWRpbmciLGRpc2FibGVk
        Q2xhc3M6ImRpc2FibGVkIixfaXNEaXNhYmxlZDohMSxyZXBsYWNlOiExLGF0
        dHJpYnV0ZUJpbmRpbmdzOlsiaHJlZiIsInRpdGxlIiwicmVsIl0sY2xhc3NO
        YW1lQmluZGluZ3M6WyJhY3RpdmUiLCJsb2FkaW5nIiwiZGlzYWJsZWQiXSxl
        dmVudE5hbWU6ImNsaWNrIixpbml0OmZ1bmN0aW9uKCl7dGhpcy5fc3VwZXIu
        YXBwbHkodGhpcyxhcmd1bWVudHMpO3ZhciB0PWUodGhpcywiZXZlbnROYW1l
        Iik7dGhpcy5vbih0LHRoaXMsdGhpcy5faW52b2tlKX0sX3BhcmFtc0NoYW5n
        ZWQ6ZnVuY3Rpb24oKXt0aGlzLm5vdGlmeVByb3BlcnR5Q2hhbmdlKCJyZXNv
        bHZlZFBhcmFtcyIpfSxfc2V0dXBQYXRoT2JzZXJ2ZXJzOmZ1bmN0aW9uKCl7
        dmFyIGUsdCxyLGk9dGhpcy5wYXJhbWV0ZXJzLG89aS5vcHRpb25zLmxpbmtU
        ZXh0UGF0aCxhPW4oaSkscz1hLmxlbmd0aDtmb3IobyYmKHI9RW1iZXIuSGFu
        ZGxlYmFycy5ub3JtYWxpemVQYXRoKGkuY29udGV4dCxvLGkub3B0aW9ucy5k
        YXRhKSx0aGlzLnJlZ2lzdGVyT2JzZXJ2ZXIoci5yb290LHIucGF0aCx0aGlz
        LHRoaXMucmVyZW5kZXIpKSx0PTA7cz50O3QrKyllPWFbdF0sbnVsbCE9PWUm
        JihyPUVtYmVyLkhhbmRsZWJhcnMubm9ybWFsaXplUGF0aChpLmNvbnRleHQs
        ZSxpLm9wdGlvbnMuZGF0YSksdGhpcy5yZWdpc3Rlck9ic2VydmVyKHIucm9v
        dCxyLnBhdGgsdGhpcyx0aGlzLl9wYXJhbXNDaGFuZ2VkKSk7dmFyIHU9dGhp
        cy5xdWVyeVBhcmFtc09iamVjdDtpZih1KXt2YXIgbD11LnZhbHVlcztmb3Io
        dmFyIGMgaW4gbClsLmhhc093blByb3BlcnR5KGMpJiYiSUQiPT09dS50eXBl
        c1tjXSYmKHI9RW1iZXIuSGFuZGxlYmFycy5ub3JtYWxpemVQYXRoKGkuY29u
        dGV4dCxsW2NdLGkub3B0aW9ucy5kYXRhKSx0aGlzLnJlZ2lzdGVyT2JzZXJ2
        ZXIoci5yb290LHIucGF0aCx0aGlzLHRoaXMuX3BhcmFtc0NoYW5nZWQpKX19
        LGFmdGVyUmVuZGVyOmZ1bmN0aW9uKCl7dGhpcy5fc3VwZXIuYXBwbHkodGhp
        cyxhcmd1bWVudHMpLHRoaXMuX3NldHVwUGF0aE9ic2VydmVycygpfSxjb25j
        cmV0ZVZpZXc6RW1iZXIuY29tcHV0ZWQoZnVuY3Rpb24oKXtyZXR1cm4gZSh0
        aGlzLCJwYXJlbnRWaWV3Iil9KS5wcm9wZXJ0eSgicGFyZW50VmlldyIpLGRp
        c2FibGVkOkVtYmVyLmNvbXB1dGVkKGZ1bmN0aW9uKHQscil7cmV0dXJuIHZv
        aWQgMCE9PXImJnRoaXMuc2V0KCJfaXNEaXNhYmxlZCIscikscj9lKHRoaXMs
        ImRpc2FibGVkQ2xhc3MiKTohMX0pLGFjdGl2ZTpFbWJlci5jb21wdXRlZChm
        dW5jdGlvbigpe2lmKGUodGhpcywibG9hZGluZyIpKXJldHVybiExO3ZhciB0
        PWUodGhpcywicm91dGVyIikscj1lKHRoaXMsInJvdXRlQXJncyIpLG49ci5z
        bGljZSgxKSxpPWUodGhpcywicmVzb2x2ZWRQYXJhbXMiKSxvPXRoaXMuY3Vy
        cmVudFdoZW58fGlbMF0sYT1vKyIuaW5kZXgiLHM9dC5pc0FjdGl2ZS5hcHBs
        eSh0LFtvXS5jb25jYXQobikpfHx0LmlzQWN0aXZlLmFwcGx5KHQsW2FdLmNv
        bmNhdChuKSk7cmV0dXJuIHM/ZSh0aGlzLCJhY3RpdmVDbGFzcyIpOnZvaWQg
        MH0pLnByb3BlcnR5KCJyZXNvbHZlZFBhcmFtcyIsInJvdXRlQXJncyIpLGxv
        YWRpbmc6RW1iZXIuY29tcHV0ZWQoZnVuY3Rpb24oKXtyZXR1cm4gZSh0aGlz
        LCJyb3V0ZUFyZ3MiKT92b2lkIDA6ZSh0aGlzLCJsb2FkaW5nQ2xhc3MiKX0p
        LnByb3BlcnR5KCJyb3V0ZUFyZ3MiKSxyb3V0ZXI6RW1iZXIuY29tcHV0ZWQo
        ZnVuY3Rpb24oKXtyZXR1cm4gZSh0aGlzLCJjb250cm9sbGVyIikuY29udGFp
        bmVyLmxvb2t1cCgicm91dGVyOm1haW4iKX0pLF9pbnZva2U6ZnVuY3Rpb24o
        dCl7aWYoIXUodCkpcmV0dXJuITA7aWYodGhpcy5wcmV2ZW50RGVmYXVsdCE9
        PSExJiZ0LnByZXZlbnREZWZhdWx0KCksdGhpcy5idWJibGVzPT09ITEmJnQu
        c3RvcFByb3BhZ2F0aW9uKCksZSh0aGlzLCJfaXNEaXNhYmxlZCIpKXJldHVy
        biExO2lmKGUodGhpcywibG9hZGluZyIpKXJldHVybiBFbWJlci5Mb2dnZXIu
        d2FybigiVGhpcyBsaW5rLXRvIGlzIGluIGFuIGluYWN0aXZlIGxvYWRpbmcg
        c3RhdGUgYmVjYXVzZSBhdCBsZWFzdCBvbmUgb2YgaXRzIHBhcmFtZXRlcnMg
        cHJlc2VudGx5IGhhcyBhIG51bGwvdW5kZWZpbmVkIHZhbHVlLCBvciB0aGUg
        cHJvdmlkZWQgcm91dGUgbmFtZSBpcyBpbnZhbGlkLiIpLCExO3ZhciByPWUo
        dGhpcywicm91dGVyIiksbj1lKHRoaXMsInJvdXRlQXJncyIpO2UodGhpcywi
        cmVwbGFjZSIpP3IucmVwbGFjZVdpdGguYXBwbHkocixuKTpyLnRyYW5zaXRp
        b25Uby5hcHBseShyLG4pfSxyZXNvbHZlZFBhcmFtczpFbWJlci5jb21wdXRl
        ZChmdW5jdGlvbigpe3ZhciB0PXRoaXMucGFyYW1ldGVycyxyPXQub3B0aW9u
        cyxuPXIudHlwZXMsaT1yLmRhdGE7aWYoMD09PXQucGFyYW1zLmxlbmd0aCl7
        dmFyIGE9dGhpcy5jb250YWluZXIubG9va3VwKCJjb250cm9sbGVyOmFwcGxp
        Y2F0aW9uIik7cmV0dXJuW2UoYSwiY3VycmVudFJvdXRlTmFtZSIpXX1yZXR1
        cm4gbyh0LmNvbnRleHQsdC5wYXJhbXMse3R5cGVzOm4sZGF0YTppfSl9KS5w
        cm9wZXJ0eSgicm91dGVyLnVybCIpLHJvdXRlQXJnczpFbWJlci5jb21wdXRl
        ZChmdW5jdGlvbigpe3ZhciB0PWUodGhpcywicmVzb2x2ZWRQYXJhbXMiKS5z
        bGljZSgwKSxuPWUodGhpcywicm91dGVyIiksaT10WzBdO2lmKGkpe2k9cihu
        LGkpLHRbMF09aTtmb3IodmFyIG89MSxhPXQubGVuZ3RoO2E+bzsrK28pe3Zh
        ciBzPXRbb107aWYobnVsbD09PXN8fCJ1bmRlZmluZWQiPT10eXBlb2Ygcyly
        ZXR1cm59cmV0dXJuIHR9fSkucHJvcGVydHkoInJlc29sdmVkUGFyYW1zIiwi
        cXVlcnlQYXJhbXMiKSxxdWVyeVBhcmFtc09iamVjdDpudWxsLHF1ZXJ5UGFy
        YW1zOkVtYmVyLmNvbXB1dGVkKGZ1bmN0aW9uKCl7dmFyIHQ9ZSh0aGlzLCJx
        dWVyeVBhcmFtc09iamVjdCIpLHI9e307dCYmRW1iZXIubWVyZ2Uocix0LnZh
        bHVlcyk7dmFyIG49ZSh0aGlzLCJyZXNvbHZlZFBhcmFtcyIpLGk9ZSh0aGlz
        LCJyb3V0ZXIiKSxvPW5bMF0scz1pLl9xdWVyeVBhcmFtTmFtZXNGb3Iobyks
        dT1zLnF1ZXJ5UGFyYW1zLGw9cy50cmFuc2xhdGlvbnMsYz17fTthKHIsbCxv
        KTt2YXIgaD10aGlzLnBhcmFtZXRlcnM7cmV0dXJuIGkuX3F1ZXJ5UGFyYW1P
        dmVycmlkZXMoYyx1LGZ1bmN0aW9uKGUsbil7aWYoZSBpbiByKXt2YXIgaSxv
        PWUuc3BsaXQoIjoiKSxhPXQudHlwZXNbb1sxXV07aWYoIklEIj09PWEpe3Zh
        ciBzPUVtYmVyLkhhbmRsZWJhcnMubm9ybWFsaXplUGF0aChoLmNvbnRleHQs
        cltlXSxoLm9wdGlvbnMuZGF0YSk7aT1FbWJlci5IYW5kbGViYXJzLmdldChz
        LnJvb3Qscy5wYXRoLGgub3B0aW9ucyl9ZWxzZSBpPXJbZV07ZGVsZXRlIHJb
        ZV0sY1tuXT1pfX0pLGN9KS5wcm9wZXJ0eSgicmVzb2x2ZWRQYXJhbXMuW10i
        KSxocmVmOkVtYmVyLmNvbXB1dGVkKGZ1bmN0aW9uKCl7aWYoImEiPT09ZSh0
        aGlzLCJ0YWdOYW1lIikpe3ZhciB0PWUodGhpcywicm91dGVyIikscj1lKHRo
        aXMsInJvdXRlQXJncyIpO3JldHVybiByP3QuZ2VuZXJhdGUuYXBwbHkodCxy
        KTplKHRoaXMsImxvYWRpbmdIcmVmIil9fSkucHJvcGVydHkoInJvdXRlQXJn
        cyIpLGxvYWRpbmdIcmVmOiIjIn0pO2wudG9TdHJpbmc9ZnVuY3Rpb24oKXty
        ZXR1cm4iTGlua1ZpZXcifSxFbWJlci5IYW5kbGViYXJzLnJlZ2lzdGVySGVs
        cGVyKCJsaW5rLXRvIixmdW5jdGlvbigpe3ZhciBlPXQuY2FsbChhcmd1bWVu
        dHMsLTEpWzBdLHI9dC5jYWxsKGFyZ3VtZW50cywwLC0xKSxuPWUuaGFzaDtp
        ZihyW3IubGVuZ3RoLTFdaW5zdGFuY2VvZiBpJiYobi5xdWVyeVBhcmFtc09i
        amVjdD1yLnBvcCgpKSxuLmRpc2FibGVkQmluZGluZz1uLmRpc2FibGVkV2hl
        biwhZS5mbil7dmFyIG89ci5zaGlmdCgpLGE9ZS50eXBlcy5zaGlmdCgpLHM9
        dGhpczsiSUQiPT09YT8oZS5saW5rVGV4dFBhdGg9byxlLmZuPWZ1bmN0aW9u
        KCl7cmV0dXJuIEVtYmVyLkhhbmRsZWJhcnMuZ2V0RXNjYXBlZChzLG8sZSl9
        KTplLmZuPWZ1bmN0aW9uKCl7cmV0dXJuIG99fXJldHVybiBuLnBhcmFtZXRl
        cnM9e2NvbnRleHQ6dGhpcyxvcHRpb25zOmUscGFyYW1zOnJ9LEVtYmVyLkhh
        bmRsZWJhcnMuaGVscGVycy52aWV3LmNhbGwodGhpcyxsLGUpfSksRW1iZXIu
        SGFuZGxlYmFycy5yZWdpc3RlckhlbHBlcigibGlua1RvIixmdW5jdGlvbigp
        e3JldHVybiBFbWJlci5IYW5kbGViYXJzLmhlbHBlcnNbImxpbmstdG8iXS5h
        cHBseSh0aGlzLGFyZ3VtZW50cyl9KX0pfSgpLGZ1bmN0aW9uKCl7RW1iZXIu
        Z2V0LEVtYmVyLnNldDtFbWJlci5vbkxvYWQoIkVtYmVyLkhhbmRsZWJhcnMi
        LGZ1bmN0aW9uKGUpe2UuT3V0bGV0Vmlldz1FbWJlci5Db250YWluZXJWaWV3
        LmV4dGVuZChFbWJlci5fTWV0YW1vcnBoKSxlLnJlZ2lzdGVySGVscGVyKCJv
        dXRsZXQiLGZ1bmN0aW9uKHQscil7dmFyIG4saSxvLGEscztmb3IodCYmdC5k
        YXRhJiZ0LmRhdGEuaXNSZW5kZXJEYXRhJiYocj10LHQ9Im1haW4iKSxpPXIu
        ZGF0YS52aWV3LmNvbnRhaW5lcixuPXIuZGF0YS52aWV3OyFuLmdldCgidGVt
        cGxhdGUuaXNUb3AiKTspbj1uLmdldCgiX3BhcmVudFZpZXciKTtyZXR1cm4g
        bz1yLmhhc2gudmlldyxvJiYocz0idmlldzoiK28pLGE9bz9pLmxvb2t1cEZh
        Y3Rvcnkocyk6ci5oYXNoLnZpZXdDbGFzc3x8ZS5PdXRsZXRWaWV3LHIuZGF0
        YS52aWV3LnNldCgib3V0bGV0U291cmNlIixuKSxyLmhhc2guY3VycmVudFZp
        ZXdCaW5kaW5nPSJfdmlldy5vdXRsZXRTb3VyY2UuX291dGxldHMuIit0LGUu
        aGVscGVycy52aWV3LmNhbGwodGhpcyxhLHIpfSl9KX0oKSxmdW5jdGlvbigp
        e0VtYmVyLmdldCxFbWJlci5zZXQ7RW1iZXIub25Mb2FkKCJFbWJlci5IYW5k
        bGViYXJzIixmdW5jdGlvbigpe0VtYmVyLkhhbmRsZWJhcnMucmVnaXN0ZXJI
        ZWxwZXIoInJlbmRlciIsZnVuY3Rpb24oZSx0LHIpe3ZhciBuLGksbyxhLHMs
        dT1hcmd1bWVudHMubGVuZ3RoO2lmKG49KHJ8fHQpLmRhdGEua2V5d29yZHMu
        Y29udHJvbGxlci5jb250YWluZXIsaT1uLmxvb2t1cCgicm91dGVyOm1haW4i
        KSwyPT09dSlyPXQsdD12b2lkIDA7ZWxzZXtpZigzIT09dSl0aHJvdyBFbWJl
        ci5FcnJvcigiWW91IG11c3QgcGFzcyBhIHRlbXBsYXRlTmFtZSB0byByZW5k
        ZXIiKTtzPUVtYmVyLkhhbmRsZWJhcnMuZ2V0KHIuY29udGV4dHNbMV0sdCxy
        KX1lPWUucmVwbGFjZSgvXC8vZywiLiIpLGE9bi5sb29rdXAoInZpZXc6Iitl
        KXx8bi5sb29rdXAoInZpZXc6ZGVmYXVsdCIpO3ZhciBsPXIuaGFzaC5jb250
        cm9sbGVyfHxlLGM9ImNvbnRyb2xsZXI6IitsO3IuaGFzaC5jb250cm9sbGVy
        O3ZhciBoPXIuZGF0YS5rZXl3b3Jkcy5jb250cm9sbGVyO2lmKHU+Mil7dmFy
        IG09bi5sb29rdXBGYWN0b3J5KGMpfHxFbWJlci5nZW5lcmF0ZUNvbnRyb2xs
        ZXJGYWN0b3J5KG4sbCxzKTtvPW0uY3JlYXRlKHttb2RlbDpzLHBhcmVudENv
        bnRyb2xsZXI6aCx0YXJnZXQ6aH0pfWVsc2Ugbz1uLmxvb2t1cChjKXx8RW1i
        ZXIuZ2VuZXJhdGVDb250cm9sbGVyKG4sbCksby5zZXRQcm9wZXJ0aWVzKHt0
        YXJnZXQ6aCxwYXJlbnRDb250cm9sbGVyOmh9KTt2YXIgZj1yLmNvbnRleHRz
        WzFdO2YmJmEucmVnaXN0ZXJPYnNlcnZlcihmLHQsZnVuY3Rpb24oKXtvLnNl
        dCgibW9kZWwiLEVtYmVyLkhhbmRsZWJhcnMuZ2V0KGYsdCxyKSl9KSxyLmhh
        c2gudmlld05hbWU9RW1iZXIuU3RyaW5nLmNhbWVsaXplKGUpO3ZhciBwPSJ0
        ZW1wbGF0ZToiK2U7ci5oYXNoLnRlbXBsYXRlPW4ubG9va3VwKHApLHIuaGFz
        aC5jb250cm9sbGVyPW8saSYmIXMmJmkuX2Nvbm5lY3RBY3RpdmVWaWV3KGUs
        YSksRW1iZXIuSGFuZGxlYmFycy5oZWxwZXJzLnZpZXcuY2FsbCh0aGlzLGEs
        cil9KX0pfSgpLGZ1bmN0aW9uKCl7RW1iZXIub25Mb2FkKCJFbWJlci5IYW5k
        bGViYXJzIixmdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSxyKXt2YXIgbj1bXTty
        JiZuLnB1c2gocik7dmFyIGk9ZS5vcHRpb25zLnR5cGVzLnNsaWNlKDEpLG89
        ZS5vcHRpb25zLmRhdGE7cmV0dXJuIG4uY29uY2F0KHQoZS5jb250ZXh0LGUu
        cGFyYW1zLHt0eXBlczppLGRhdGE6b30pKX12YXIgdD1FbWJlci5Sb3V0ZXIu
        cmVzb2x2ZVBhcmFtcyxyPUVtYmVyLlZpZXdVdGlscy5pc1NpbXBsZUNsaWNr
        LG49RW1iZXIuSGFuZGxlYmFycyxpPW4uZ2V0LG89bi5TYWZlU3RyaW5nLGE9
        RW1iZXIuQXJyYXlQb2x5ZmlsbHMuZm9yRWFjaCxzPShFbWJlci5nZXQsQXJy
        YXkucHJvdG90eXBlLnNsaWNlKSx1PW4uQWN0aW9uSGVscGVyPXtyZWdpc3Rl
        cmVkQWN0aW9uczp7fX0sbD1bImFsdCIsInNoaWZ0IiwibWV0YSIsImN0cmwi
        XSxjPS9eY2xpY2t8bW91c2V8dG91Y2gvLGg9ZnVuY3Rpb24oZSx0KXtpZigi
        dW5kZWZpbmVkIj09dHlwZW9mIHQpe2lmKGMudGVzdChlLnR5cGUpKXJldHVy
        biByKGUpO3Q9IiJ9aWYodC5pbmRleE9mKCJhbnkiKT49MClyZXR1cm4hMDt2
        YXIgbj0hMDtyZXR1cm4gYS5jYWxsKGwsZnVuY3Rpb24ocil7ZVtyKyJLZXki
        XSYmLTE9PT10LmluZGV4T2YocikmJihuPSExKX0pLG59O3UucmVnaXN0ZXJB
        Y3Rpb249ZnVuY3Rpb24odCxyLG4pe3ZhciBvPSgrK0VtYmVyLnV1aWQpLnRv
        U3RyaW5nKCk7cmV0dXJuIHUucmVnaXN0ZXJlZEFjdGlvbnNbb109e2V2ZW50
        TmFtZTpyLmV2ZW50TmFtZSxoYW5kbGVyOmZ1bmN0aW9uKG8pe2lmKCFoKG8s
        bikpcmV0dXJuITA7ci5wcmV2ZW50RGVmYXVsdCE9PSExJiZvLnByZXZlbnRE
        ZWZhdWx0KCksci5idWJibGVzPT09ITEmJm8uc3RvcFByb3BhZ2F0aW9uKCk7
        dmFyIGE9ci50YXJnZXQ7YT1hLnRhcmdldD9pKGEucm9vdCxhLnRhcmdldCxh
        Lm9wdGlvbnMpOmEucm9vdCxyLmJvdW5kUHJvcGVydHksRW1iZXIucnVuKGZ1
        bmN0aW9uKCl7YS5zZW5kP2Euc2VuZC5hcHBseShhLGUoci5wYXJhbWV0ZXJz
        LHQpKTphW3RdLmFwcGx5KGEsZShyLnBhcmFtZXRlcnMpKX0pfX0sci52aWV3
        Lm9uKCJ3aWxsQ2xlYXJSZW5kZXIiLGZ1bmN0aW9uKCl7ZGVsZXRlIHUucmVn
        aXN0ZXJlZEFjdGlvbnNbb119KSxvfSxuLnJlZ2lzdGVySGVscGVyKCJhY3Rp
        b24iLGZ1bmN0aW9uKGUpe3ZhciB0LHI9YXJndW1lbnRzW2FyZ3VtZW50cy5s
        ZW5ndGgtMV0sbj1zLmNhbGwoYXJndW1lbnRzLDEsLTEpLGk9ci5oYXNoLGE9
        e2V2ZW50TmFtZTppLm9ufHwiY2xpY2sifTthLnBhcmFtZXRlcnM9e2NvbnRl
        eHQ6dGhpcyxvcHRpb25zOnIscGFyYW1zOm59LGEudmlldz1yLmRhdGEudmll
        dzt2YXIgbCxjO2kudGFyZ2V0PyhsPXRoaXMsYz1pLnRhcmdldCk6KHQ9ci5k
        YXRhLmtleXdvcmRzLmNvbnRyb2xsZXIpJiYobD10KSxhLnRhcmdldD17cm9v
        dDpsLHRhcmdldDpjLG9wdGlvbnM6cn0sYS5idWJibGVzPWkuYnViYmxlcyxh
        LnByZXZlbnREZWZhdWx0PWkucHJldmVudERlZmF1bHQsYS5ib3VuZFByb3Bl
        cnR5PSJJRCI9PT1yLnR5cGVzWzBdO3ZhciBoPXUucmVnaXN0ZXJBY3Rpb24o
        ZSxhLGkuYWxsb3dlZEtleXMpO3JldHVybiBuZXcgbygnZGF0YS1lbWJlci1h
        Y3Rpb249IicraCsnIicpfSl9KX0oKSxmdW5jdGlvbigpe3t2YXIgZT1FbWJl
        ci5nZXQ7RW1iZXIuc2V0LEVtYmVyLkVudW1lcmFibGVVdGlscy5tYXB9RW1i
        ZXIuQ29udHJvbGxlck1peGluLnJlb3Blbih7dHJhbnNpdGlvblRvUm91dGU6
        ZnVuY3Rpb24oKXt2YXIgdD1lKHRoaXMsInRhcmdldCIpLHI9dC50cmFuc2l0
        aW9uVG9Sb3V0ZXx8dC50cmFuc2l0aW9uVG87cmV0dXJuIHIuYXBwbHkodCxh
        cmd1bWVudHMpfSx0cmFuc2l0aW9uVG86ZnVuY3Rpb24oKXtyZXR1cm4gdGhp
        cy50cmFuc2l0aW9uVG9Sb3V0ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LHJl
        cGxhY2VSb3V0ZTpmdW5jdGlvbigpe3ZhciB0PWUodGhpcywidGFyZ2V0Iiks
        cj10LnJlcGxhY2VSb3V0ZXx8dC5yZXBsYWNlV2l0aDtyZXR1cm4gci5hcHBs
        eSh0LGFyZ3VtZW50cyl9LHJlcGxhY2VXaXRoOmZ1bmN0aW9uKCl7cmV0dXJu
        IHRoaXMucmVwbGFjZVJvdXRlLmFwcGx5KHRoaXMsYXJndW1lbnRzKX19KX0o
        KSxmdW5jdGlvbigpe3ZhciBlPUVtYmVyLmdldCx0PUVtYmVyLnNldDtFbWJl
        ci5WaWV3LnJlb3Blbih7aW5pdDpmdW5jdGlvbigpe3QodGhpcywiX291dGxl
        dHMiLHt9KSx0aGlzLl9zdXBlcigpfSxjb25uZWN0T3V0bGV0OmZ1bmN0aW9u
        KHIsbil7aWYodGhpcy5fcGVuZGluZ0Rpc2Nvbm5lY3Rpb25zJiZkZWxldGUg
        dGhpcy5fcGVuZGluZ0Rpc2Nvbm5lY3Rpb25zW3JdLHRoaXMuX2hhc0VxdWl2
        YWxlbnRWaWV3KHIsbikpcmV0dXJuIG4uZGVzdHJveSgpLHZvaWQgMDt2YXIg
        aT1lKHRoaXMsIl9vdXRsZXRzIiksbz1lKHRoaXMsImNvbnRhaW5lciIpLGE9
        byYmby5sb29rdXAoInJvdXRlcjptYWluIikscz1lKG4sInJlbmRlcmVkTmFt
        ZSIpO3QoaSxyLG4pLGEmJnMmJmEuX2Nvbm5lY3RBY3RpdmVWaWV3KHMsbil9
        LF9oYXNFcXVpdmFsZW50VmlldzpmdW5jdGlvbih0LHIpe3ZhciBuPWUodGhp
        cywiX291dGxldHMuIit0KTtyZXR1cm4gbiYmbi5jb25zdHJ1Y3Rvcj09PXIu
        Y29uc3RydWN0b3ImJm4uZ2V0KCJ0ZW1wbGF0ZSIpPT09ci5nZXQoInRlbXBs
        YXRlIikmJm4uZ2V0KCJjb250ZXh0Iik9PT1yLmdldCgiY29udGV4dCIpfSxk
        aXNjb25uZWN0T3V0bGV0OmZ1bmN0aW9uKGUpe3RoaXMuX3BlbmRpbmdEaXNj
        b25uZWN0aW9uc3x8KHRoaXMuX3BlbmRpbmdEaXNjb25uZWN0aW9ucz17fSks
        dGhpcy5fcGVuZGluZ0Rpc2Nvbm5lY3Rpb25zW2VdPSEwLEVtYmVyLnJ1bi5v
        bmNlKHRoaXMsIl9maW5pc2hEaXNjb25uZWN0aW9ucyIpfSxfZmluaXNoRGlz
        Y29ubmVjdGlvbnM6ZnVuY3Rpb24oKXtpZighdGhpcy5pc0Rlc3Ryb3llZCl7
        dmFyIHI9ZSh0aGlzLCJfb3V0bGV0cyIpLG49dGhpcy5fcGVuZGluZ0Rpc2Nv
        bm5lY3Rpb25zO3RoaXMuX3BlbmRpbmdEaXNjb25uZWN0aW9ucz1udWxsO2Zv
        cih2YXIgaSBpbiBuKXQocixpLG51bGwpfX19KX0oKSxmdW5jdGlvbigpe3Zh
        ciBlPUVtYmVyLnJ1bi5xdWV1ZXMsdD1FbWJlci5BcnJheVBvbHlmaWxscy5p
        bmRleE9mO2Uuc3BsaWNlKHQuY2FsbChlLCJhY3Rpb25zIikrMSwwLCJyb3V0
        ZXJUcmFuc2l0aW9ucyIpfSgpLGZ1bmN0aW9uKCl7RW1iZXIuZ2V0LEVtYmVy
        LnNldDtFbWJlci5Mb2NhdGlvbj17Y3JlYXRlOmZ1bmN0aW9uKGUpe3ZhciB0
        PWUmJmUuaW1wbGVtZW50YXRpb24scj10aGlzLmltcGxlbWVudGF0aW9uc1t0
        XTtyZXR1cm4gci5jcmVhdGUuYXBwbHkocixhcmd1bWVudHMpfSxyZWdpc3Rl
        ckltcGxlbWVudGF0aW9uOmZ1bmN0aW9uKGUsdCl7dGhpcy5pbXBsZW1lbnRh
        dGlvbnNbZV09dH0saW1wbGVtZW50YXRpb25zOnt9LGdldEhhc2g6ZnVuY3Rp
        b24oKXt2YXIgZT13aW5kb3cubG9jYXRpb24uaHJlZix0PWUuaW5kZXhPZigi
        IyIpO3JldHVybi0xPT09dD8iIjplLnN1YnN0cih0KX19fSgpLGZ1bmN0aW9u
        KCl7dmFyIGU9RW1iZXIuZ2V0LHQ9RW1iZXIuc2V0O0VtYmVyLk5vbmVMb2Nh
        dGlvbj1FbWJlci5PYmplY3QuZXh0ZW5kKHtpbXBsZW1lbnRhdGlvbjoibm9u
        ZSIscGF0aDoiIixnZXRVUkw6ZnVuY3Rpb24oKXtyZXR1cm4gZSh0aGlzLCJw
        YXRoIil9LHNldFVSTDpmdW5jdGlvbihlKXt0KHRoaXMsInBhdGgiLGUpfSxv
        blVwZGF0ZVVSTDpmdW5jdGlvbihlKXt0aGlzLnVwZGF0ZUNhbGxiYWNrPWV9
        LGhhbmRsZVVSTDpmdW5jdGlvbihlKXt0KHRoaXMsInBhdGgiLGUpLHRoaXMu
        dXBkYXRlQ2FsbGJhY2soZSl9LGZvcm1hdFVSTDpmdW5jdGlvbihlKXtyZXR1
        cm4gZX19KX0oKSxmdW5jdGlvbigpe3ZhciBlPUVtYmVyLmdldCx0PUVtYmVy
        LnNldCxyPUVtYmVyLkxvY2F0aW9uLmdldEhhc2g7RW1iZXIuSGFzaExvY2F0
        aW9uPUVtYmVyLk9iamVjdC5leHRlbmQoe2ltcGxlbWVudGF0aW9uOiJoYXNo
        Iixpbml0OmZ1bmN0aW9uKCl7dCh0aGlzLCJsb2NhdGlvbiIsZSh0aGlzLCJs
        b2NhdGlvbiIpfHx3aW5kb3cubG9jYXRpb24pfSxnZXRVUkw6ZnVuY3Rpb24o
        KXtyZXR1cm4gcigpLnN1YnN0cigxKX0sc2V0VVJMOmZ1bmN0aW9uKHIpe2Uo
        dGhpcywibG9jYXRpb24iKS5oYXNoPXIsdCh0aGlzLCJsYXN0U2V0VVJMIixy
        KX0scmVwbGFjZVVSTDpmdW5jdGlvbihyKXtlKHRoaXMsImxvY2F0aW9uIiku
        cmVwbGFjZSgiIyIrciksdCh0aGlzLCJsYXN0U2V0VVJMIixyKX0sb25VcGRh
        dGVVUkw6ZnVuY3Rpb24ocil7dmFyIG49dGhpcyxpPUVtYmVyLmd1aWRGb3Io
        dGhpcyk7RW1iZXIuJCh3aW5kb3cpLm9uKCJoYXNoY2hhbmdlLmVtYmVyLWxv
        Y2F0aW9uLSIraSxmdW5jdGlvbigpe0VtYmVyLnJ1bihmdW5jdGlvbigpe3Zh
        ciBpPW4uZ2V0VVJMKCk7ZShuLCJsYXN0U2V0VVJMIikhPT1pJiYodChuLCJs
        YXN0U2V0VVJMIixudWxsKSxyKGkpKX0pfSl9LGZvcm1hdFVSTDpmdW5jdGlv
        bihlKXtyZXR1cm4iIyIrZX0sd2lsbERlc3Ryb3k6ZnVuY3Rpb24oKXt2YXIg
        ZT1FbWJlci5ndWlkRm9yKHRoaXMpO0VtYmVyLiQod2luZG93KS5vZmYoImhh
        c2hjaGFuZ2UuZW1iZXItbG9jYXRpb24tIitlKX19KX0oKSxmdW5jdGlvbigp
        e3ZhciBlPUVtYmVyLmdldCx0PUVtYmVyLnNldCxyPSExLG49d2luZG93Lmhp
        c3RvcnkmJiJzdGF0ZSJpbiB3aW5kb3cuaGlzdG9yeTtFbWJlci5IaXN0b3J5
        TG9jYXRpb249RW1iZXIuT2JqZWN0LmV4dGVuZCh7aW1wbGVtZW50YXRpb246
        Imhpc3RvcnkiLGluaXQ6ZnVuY3Rpb24oKXt0KHRoaXMsImxvY2F0aW9uIixl
        KHRoaXMsImxvY2F0aW9uIil8fHdpbmRvdy5sb2NhdGlvbiksdCh0aGlzLCJi
        YXNlVVJMIixFbWJlci4kKCJiYXNlIikuYXR0cigiaHJlZiIpfHwiIil9LGlu
        aXRTdGF0ZTpmdW5jdGlvbigpe3QodGhpcywiaGlzdG9yeSIsZSh0aGlzLCJo
        aXN0b3J5Iil8fHdpbmRvdy5oaXN0b3J5KSx0aGlzLnJlcGxhY2VTdGF0ZSh0
        aGlzLmZvcm1hdFVSTCh0aGlzLmdldFVSTCgpKSl9LHJvb3RVUkw6Ii8iLGdl
        dFVSTDpmdW5jdGlvbigpe3ZhciB0PWUodGhpcywicm9vdFVSTCIpLHI9ZSh0
        aGlzLCJsb2NhdGlvbiIpLG49ci5wYXRobmFtZSxpPWUodGhpcywiYmFzZVVS
        TCIpO3Q9dC5yZXBsYWNlKC9cLyQvLCIiKSxpPWkucmVwbGFjZSgvXC8kLywi
        Iik7dmFyIG89bi5yZXBsYWNlKGksIiIpLnJlcGxhY2UodCwiIik7cmV0dXJu
        IG99LHNldFVSTDpmdW5jdGlvbihlKXt2YXIgdD10aGlzLmdldFN0YXRlKCk7
        ZT10aGlzLmZvcm1hdFVSTChlKSx0JiZ0LnBhdGghPT1lJiZ0aGlzLnB1c2hT
        dGF0ZShlKX0scmVwbGFjZVVSTDpmdW5jdGlvbihlKXt2YXIgdD10aGlzLmdl
        dFN0YXRlKCk7ZT10aGlzLmZvcm1hdFVSTChlKSx0JiZ0LnBhdGghPT1lJiZ0
        aGlzLnJlcGxhY2VTdGF0ZShlKX0sZ2V0U3RhdGU6ZnVuY3Rpb24oKXtyZXR1
        cm4gbj9lKHRoaXMsImhpc3RvcnkiKS5zdGF0ZTp0aGlzLl9oaXN0b3J5U3Rh
        dGV9LHB1c2hTdGF0ZTpmdW5jdGlvbih0KXt2YXIgcj17cGF0aDp0fTtlKHRo
        aXMsImhpc3RvcnkiKS5wdXNoU3RhdGUocixudWxsLHQpLG58fCh0aGlzLl9o
        aXN0b3J5U3RhdGU9ciksdGhpcy5fcHJldmlvdXNVUkw9dGhpcy5nZXRVUkwo
        KX0scmVwbGFjZVN0YXRlOmZ1bmN0aW9uKHQpe3ZhciByPXtwYXRoOnR9O2Uo
        dGhpcywiaGlzdG9yeSIpLnJlcGxhY2VTdGF0ZShyLG51bGwsdCksbnx8KHRo
        aXMuX2hpc3RvcnlTdGF0ZT1yKSx0aGlzLl9wcmV2aW91c1VSTD10aGlzLmdl
        dFVSTCgpfSxvblVwZGF0ZVVSTDpmdW5jdGlvbihlKXt2YXIgdD1FbWJlci5n
        dWlkRm9yKHRoaXMpLG49dGhpcztFbWJlci4kKHdpbmRvdykub24oInBvcHN0
        YXRlLmVtYmVyLWxvY2F0aW9uLSIrdCxmdW5jdGlvbigpeyhyfHwocj0hMCxu
        LmdldFVSTCgpIT09bi5fcHJldmlvdXNVUkwpKSYmZShuLmdldFVSTCgpKX0p
        fSxmb3JtYXRVUkw6ZnVuY3Rpb24odCl7dmFyIHI9ZSh0aGlzLCJyb290VVJM
        Iiksbj1lKHRoaXMsImJhc2VVUkwiKTtyZXR1cm4iIiE9PXQ/KHI9ci5yZXBs
        YWNlKC9cLyQvLCIiKSxuPW4ucmVwbGFjZSgvXC8kLywiIikpOm4ubWF0Y2go
        L15cLy8pJiZyLm1hdGNoKC9eXC8vKSYmKG49bi5yZXBsYWNlKC9cLyQvLCIi
        KSksbityK3R9LHdpbGxEZXN0cm95OmZ1bmN0aW9uKCl7dmFyIGU9RW1iZXIu
        Z3VpZEZvcih0aGlzKTtFbWJlci4kKHdpbmRvdykub2ZmKCJwb3BzdGF0ZS5l
        bWJlci1sb2NhdGlvbi0iK2UpfX0pfSgpLGZ1bmN0aW9uKCl7ZnVuY3Rpb24g
        ZSh0LHIsbixpKXt2YXIgbyxhPXQubmFtZSxzPXQuaW5jb21pbmcsdT10Lmlu
        Y29taW5nTmFtZXMsbD11Lmxlbmd0aDtpZihufHwobj17fSksaXx8KGk9W10p
        LCFuLmhhc093blByb3BlcnR5KGEpKXtmb3IoaS5wdXNoKGEpLG5bYV09ITAs
        bz0wO2w+bztvKyspZShzW3Vbb11dLHIsbixpKTtyKHQsaSksaS5wb3AoKX19
        ZnVuY3Rpb24gdCgpe3RoaXMubmFtZXM9W10sdGhpcy52ZXJ0aWNlcz17fX10
        LnByb3RvdHlwZS5hZGQ9ZnVuY3Rpb24oZSl7aWYoZSl7aWYodGhpcy52ZXJ0
        aWNlcy5oYXNPd25Qcm9wZXJ0eShlKSlyZXR1cm4gdGhpcy52ZXJ0aWNlc1tl
        XTt2YXIgdD17bmFtZTplLGluY29taW5nOnt9LGluY29taW5nTmFtZXM6W10s
        aGFzT3V0Z29pbmc6ITEsdmFsdWU6bnVsbH07cmV0dXJuIHRoaXMudmVydGlj
        ZXNbZV09dCx0aGlzLm5hbWVzLnB1c2goZSksdH19LHQucHJvdG90eXBlLm1h
        cD1mdW5jdGlvbihlLHQpe3RoaXMuYWRkKGUpLnZhbHVlPXR9LHQucHJvdG90
        eXBlLmFkZEVkZ2U9ZnVuY3Rpb24odCxyKXtmdW5jdGlvbiBuKGUsdCl7aWYo
        ZS5uYW1lPT09cil0aHJvdyBuZXcgRW1iZXIuRXJyb3IoImN5Y2xlIGRldGVj
        dGVkOiAiK3IrIiA8LSAiK3Quam9pbigiIDwtICIpKX1pZih0JiZyJiZ0IT09
        cil7dmFyIGk9dGhpcy5hZGQodCksbz10aGlzLmFkZChyKTtvLmluY29taW5n
        Lmhhc093blByb3BlcnR5KHQpfHwoZShpLG4pLGkuaGFzT3V0Z29pbmc9ITAs
        by5pbmNvbWluZ1t0XT1pLG8uaW5jb21pbmdOYW1lcy5wdXNoKHQpKX19LHQu
        cHJvdG90eXBlLnRvcHNvcnQ9ZnVuY3Rpb24odCl7dmFyIHIsbixpPXt9LG89
        dGhpcy52ZXJ0aWNlcyxhPXRoaXMubmFtZXMscz1hLmxlbmd0aDtmb3Iocj0w
        O3M+cjtyKyspbj1vW2Fbcl1dLG4uaGFzT3V0Z29pbmd8fGUobix0LGkpfSx0
        LnByb3RvdHlwZS5hZGRFZGdlcz1mdW5jdGlvbihlLHQscixuKXt2YXIgaTtp
        Zih0aGlzLm1hcChlLHQpLHIpaWYoInN0cmluZyI9PXR5cGVvZiByKXRoaXMu
        YWRkRWRnZShlLHIpO2Vsc2UgZm9yKGk9MDtpPHIubGVuZ3RoO2krKyl0aGlz
        LmFkZEVkZ2UoZSxyW2ldKTtpZihuKWlmKCJzdHJpbmciPT10eXBlb2Ygbil0
        aGlzLmFkZEVkZ2UobixlKTtlbHNlIGZvcihpPTA7aTxuLmxlbmd0aDtpKysp
        dGhpcy5hZGRFZGdlKG5baV0sZSl9LEVtYmVyLkRBRz10fSgpLGZ1bmN0aW9u
        KCl7dmFyIGU9RW1iZXIuZ2V0LHQ9RW1iZXIuU3RyaW5nLmNsYXNzaWZ5LHI9
        RW1iZXIuU3RyaW5nLmNhcGl0YWxpemUsbj1FbWJlci5TdHJpbmcuZGVjYW1l
        bGl6ZTtFbWJlci5EZWZhdWx0UmVzb2x2ZXI9RW1iZXIuT2JqZWN0LmV4dGVu
        ZCh7bmFtZXNwYWNlOm51bGwsbm9ybWFsaXplOmZ1bmN0aW9uKGUpe3ZhciB0
        PWUuc3BsaXQoIjoiLDIpLHI9dFswXSxuPXRbMV07aWYoInRlbXBsYXRlIiE9
        PXIpe3ZhciBpPW47cmV0dXJuIGkuaW5kZXhPZigiLiIpPi0xJiYoaT1pLnJl
        cGxhY2UoL1wuKC4pL2csZnVuY3Rpb24oZSl7cmV0dXJuIGUuY2hhckF0KDEp
        LnRvVXBwZXJDYXNlKCl9KSksbi5pbmRleE9mKCJfIik+LTEmJihpPWkucmVw
        bGFjZSgvXyguKS9nLGZ1bmN0aW9uKGUpe3JldHVybiBlLmNoYXJBdCgxKS50
        b1VwcGVyQ2FzZSgpfSkpLHIrIjoiK2l9cmV0dXJuIGV9LHJlc29sdmU6ZnVu
        Y3Rpb24oZSl7dmFyIHQ9dGhpcy5wYXJzZU5hbWUoZSkscj10aGlzW3QucmVz
        b2x2ZU1ldGhvZE5hbWVdO2lmKCF0Lm5hbWV8fCF0LnR5cGUpdGhyb3cgbmV3
        IFR5cGVFcnJvcigiSW52YWxpZCBmdWxsTmFtZTogYCIrZSsiYCwgbXVzdCBi
        ZSBvZiB0aGUgZm9ybSBgdHlwZTpuYW1lYCAiKTtpZihyKXt2YXIgbj1yLmNh
        bGwodGhpcyx0KTtpZihuKXJldHVybiBufXJldHVybiB0aGlzLnJlc29sdmVP
        dGhlcih0KX0scGFyc2VOYW1lOmZ1bmN0aW9uKG4pe3ZhciBpPW4uc3BsaXQo
        IjoiKSxvPWlbMF0sYT1pWzFdLHM9YSx1PWUodGhpcywibmFtZXNwYWNlIiks
        bD11O2lmKCJ0ZW1wbGF0ZSIhPT1vJiYtMSE9PXMuaW5kZXhPZigiLyIpKXt2
        YXIgYz1zLnNwbGl0KCIvIik7cz1jW2MubGVuZ3RoLTFdO3ZhciBoPXIoYy5z
        bGljZSgwLC0xKS5qb2luKCIuIikpO2w9RW1iZXIuTmFtZXNwYWNlLmJ5TmFt
        ZShoKX1yZXR1cm57ZnVsbE5hbWU6bix0eXBlOm8sZnVsbE5hbWVXaXRob3V0
        VHlwZTphLG5hbWU6cyxyb290OmwscmVzb2x2ZU1ldGhvZE5hbWU6InJlc29s
        dmUiK3Qobyl9fSxyZXNvbHZlVGVtcGxhdGU6ZnVuY3Rpb24oZSl7dmFyIHQ9
        ZS5mdWxsTmFtZVdpdGhvdXRUeXBlLnJlcGxhY2UoL1wuL2csIi8iKTtyZXR1
        cm4gRW1iZXIuVEVNUExBVEVTW3RdP0VtYmVyLlRFTVBMQVRFU1t0XToodD1u
        KHQpLEVtYmVyLlRFTVBMQVRFU1t0XT9FbWJlci5URU1QTEFURVNbdF06dm9p
        ZCAwKX0sdXNlUm91dGVyTmFtaW5nOmZ1bmN0aW9uKGUpe2UubmFtZT1lLm5h
        bWUucmVwbGFjZSgvXC4vZywiXyIpLCJiYXNpYyI9PT1lLm5hbWUmJihlLm5h
        bWU9IiIpfSxyZXNvbHZlQ29udHJvbGxlcjpmdW5jdGlvbihlKXtyZXR1cm4g
        dGhpcy51c2VSb3V0ZXJOYW1pbmcoZSksdGhpcy5yZXNvbHZlT3RoZXIoZSl9
        LHJlc29sdmVSb3V0ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy51c2VSb3V0
        ZXJOYW1pbmcoZSksdGhpcy5yZXNvbHZlT3RoZXIoZSl9LHJlc29sdmVWaWV3
        OmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnVzZVJvdXRlck5hbWluZyhlKSx0
        aGlzLnJlc29sdmVPdGhlcihlKX0scmVzb2x2ZUhlbHBlcjpmdW5jdGlvbihl
        KXtyZXR1cm4gdGhpcy5yZXNvbHZlT3RoZXIoZSl8fEVtYmVyLkhhbmRsZWJh
        cnMuaGVscGVyc1tlLmZ1bGxOYW1lV2l0aG91dFR5cGVdfSxyZXNvbHZlTW9k
        ZWw6ZnVuY3Rpb24ocil7dmFyIG49dChyLm5hbWUpLGk9ZShyLnJvb3Qsbik7
        cmV0dXJuIGk/aTp2b2lkIDB9LHJlc29sdmVPdGhlcjpmdW5jdGlvbihyKXt2
        YXIgbj10KHIubmFtZSkrdChyLnR5cGUpLGk9ZShyLnJvb3Qsbik7cmV0dXJu
        IGk/aTp2b2lkIDB9LGxvb2t1cERlc2NyaXB0aW9uOmZ1bmN0aW9uKGUpe3Zh
        ciByPXRoaXMucGFyc2VOYW1lKGUpO2lmKCJ0ZW1wbGF0ZSI9PT1yLnR5cGUp
        cmV0dXJuInRlbXBsYXRlIGF0ICIrci5mdWxsTmFtZVdpdGhvdXRUeXBlLnJl
        cGxhY2UoL1wuL2csIi8iKTt2YXIgbj1yLnJvb3QrIi4iK3Qoci5uYW1lKTty
        ZXR1cm4ibW9kZWwiIT09ci50eXBlJiYobis9dChyLnR5cGUpKSxufSxtYWtl
        VG9TdHJpbmc6ZnVuY3Rpb24oZSl7cmV0dXJuIGUudG9TdHJpbmcoKX19KX0o
        KSxmdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSl7dGhpcy5fY29udGFpbmVyPWV9
        ZnVuY3Rpb24gdChlKXtmdW5jdGlvbiB0KGUpe3JldHVybiBuLnJlc29sdmUo
        ZSl9ZS5nZXQoInJlc29sdmVyIik7dmFyIHI9ZS5nZXQoInJlc29sdmVyIil8
        fGUuZ2V0KCJSZXNvbHZlciIpfHxFbWJlci5EZWZhdWx0UmVzb2x2ZXIsbj1y
        LmNyZWF0ZSh7bmFtZXNwYWNlOmV9KTtyZXR1cm4gdC5kZXNjcmliZT1mdW5j
        dGlvbihlKXtyZXR1cm4gbi5sb29rdXBEZXNjcmlwdGlvbihlKX0sdC5tYWtl
        VG9TdHJpbmc9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gbi5tYWtlVG9TdHJpbmco
        ZSx0KX0sdC5ub3JtYWxpemU9ZnVuY3Rpb24oZSl7cmV0dXJuIG4ubm9ybWFs
        aXplP24ubm9ybWFsaXplKGUpOmV9LHR9dmFyIHI9RW1iZXIuZ2V0LG49RW1i
        ZXIuc2V0O2UuZGVwcmVjYXRlPWZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlv
        bigpe3ZhciB0PXRoaXMuX2NvbnRhaW5lcjtyZXR1cm4gdFtlXS5hcHBseSh0
        LGFyZ3VtZW50cyl9fSxlLnByb3RvdHlwZT17X2NvbnRhaW5lcjpudWxsLGxv
        b2t1cDplLmRlcHJlY2F0ZSgibG9va3VwIikscmVzb2x2ZTplLmRlcHJlY2F0
        ZSgicmVzb2x2ZSIpLHJlZ2lzdGVyOmUuZGVwcmVjYXRlKCJyZWdpc3RlciIp
        fTt2YXIgaT1FbWJlci5BcHBsaWNhdGlvbj1FbWJlci5OYW1lc3BhY2UuZXh0
        ZW5kKEVtYmVyLkRlZmVycmVkTWl4aW4se3Jvb3RFbGVtZW50OiJib2R5Iixl
        dmVudERpc3BhdGNoZXI6bnVsbCxjdXN0b21FdmVudHM6bnVsbCxfcmVhZGlu
        ZXNzRGVmZXJyYWxzOjEsaW5pdDpmdW5jdGlvbigpe2lmKHRoaXMuJHx8KHRo
        aXMuJD1FbWJlci4kKSx0aGlzLl9fY29udGFpbmVyX189dGhpcy5idWlsZENv
        bnRhaW5lcigpLHRoaXMuUm91dGVyPXRoaXMuZGVmYXVsdFJvdXRlcigpLHRo
        aXMuX3N1cGVyKCksdGhpcy5zY2hlZHVsZUluaXRpYWxpemUoKSxFbWJlci5s
        aWJyYXJpZXMucmVnaXN0ZXJDb3JlTGlicmFyeSgiSGFuZGxlYmFycyIsRW1i
        ZXIuSGFuZGxlYmFycy5WRVJTSU9OKSxFbWJlci5saWJyYXJpZXMucmVnaXN0
        ZXJDb3JlTGlicmFyeSgialF1ZXJ5IixFbWJlci4kKCkuanF1ZXJ5KSxFbWJl
        ci5MT0dfVkVSU0lPTil7RW1iZXIuTE9HX1ZFUlNJT049ITE7dmFyIGU9TWF0
        aC5tYXguYXBwbHkodGhpcyxFbWJlci5BKEVtYmVyLmxpYnJhcmllcykubWFw
        QnkoIm5hbWUubGVuZ3RoIikpO0VtYmVyLmxpYnJhcmllcy5lYWNoKGZ1bmN0
        aW9uKHQpe25ldyBBcnJheShlLXQubGVuZ3RoKzEpLmpvaW4oIiAiKX0pfX0s
        YnVpbGRDb250YWluZXI6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLl9fY29udGFp
        bmVyX189aS5idWlsZENvbnRhaW5lcih0aGlzKTtyZXR1cm4gZX0sZGVmYXVs
        dFJvdXRlcjpmdW5jdGlvbigpe2lmKHRoaXMuUm91dGVyIT09ITEpe3ZhciBl
        PXRoaXMuX19jb250YWluZXJfXztyZXR1cm4gdGhpcy5Sb3V0ZXImJihlLnVu
        cmVnaXN0ZXIoInJvdXRlcjptYWluIiksZS5yZWdpc3Rlcigicm91dGVyOm1h
        aW4iLHRoaXMuUm91dGVyKSksZS5sb29rdXBGYWN0b3J5KCJyb3V0ZXI6bWFp
        biIpfX0sc2NoZWR1bGVJbml0aWFsaXplOmZ1bmN0aW9uKCl7dmFyIGU9dGhp
        czshdGhpcy4kfHx0aGlzLiQuaXNSZWFkeT9FbWJlci5ydW4uc2NoZWR1bGUo
        ImFjdGlvbnMiLGUsIl9pbml0aWFsaXplIik6dGhpcy4kKCkucmVhZHkoZnVu
        Y3Rpb24oKXtFbWJlci5ydW4oZSwiX2luaXRpYWxpemUiKX0pfSxkZWZlclJl
        YWRpbmVzczpmdW5jdGlvbigpe3RoaXMuX3JlYWRpbmVzc0RlZmVycmFscysr
        fSxhZHZhbmNlUmVhZGluZXNzOmZ1bmN0aW9uKCl7dGhpcy5fcmVhZGluZXNz
        RGVmZXJyYWxzLS0sMD09PXRoaXMuX3JlYWRpbmVzc0RlZmVycmFscyYmRW1i
        ZXIucnVuLm9uY2UodGhpcyx0aGlzLmRpZEJlY29tZVJlYWR5KX0scmVnaXN0
        ZXI6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLl9fY29udGFpbmVyX187ZS5yZWdp
        c3Rlci5hcHBseShlLGFyZ3VtZW50cyl9LGluamVjdDpmdW5jdGlvbigpe3Zh
        ciBlPXRoaXMuX19jb250YWluZXJfXztlLmluamVjdGlvbi5hcHBseShlLGFy
        Z3VtZW50cyl9LGluaXRpYWxpemU6ZnVuY3Rpb24oKXt9LF9pbml0aWFsaXpl
        OmZ1bmN0aW9uKCl7aWYoIXRoaXMuaXNEZXN0cm95ZWQpe2lmKHRoaXMuUm91
        dGVyKXt2YXIgZT10aGlzLl9fY29udGFpbmVyX187ZS51bnJlZ2lzdGVyKCJy
        b3V0ZXI6bWFpbiIpLGUucmVnaXN0ZXIoInJvdXRlcjptYWluIix0aGlzLlJv
        dXRlcil9cmV0dXJuIHRoaXMucnVuSW5pdGlhbGl6ZXJzKCksRW1iZXIucnVu
        TG9hZEhvb2tzKCJhcHBsaWNhdGlvbiIsdGhpcyksdGhpcy5hZHZhbmNlUmVh
        ZGluZXNzKCksdGhpc319LHJlc2V0OmZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgp
        e3ZhciBlPXRoaXMuX19jb250YWluZXJfXy5sb29rdXAoInJvdXRlcjptYWlu
        Iik7ZS5yZXNldCgpLEVtYmVyLnJ1bih0aGlzLl9fY29udGFpbmVyX18sImRl
        c3Ryb3kiKSx0aGlzLmJ1aWxkQ29udGFpbmVyKCksRW1iZXIucnVuLnNjaGVk
        dWxlKCJhY3Rpb25zIix0aGlzLGZ1bmN0aW9uKCl7dGhpcy5faW5pdGlhbGl6
        ZSgpfSl9dGhpcy5fcmVhZGluZXNzRGVmZXJyYWxzPTEsRW1iZXIucnVuLmpv
        aW4odGhpcyxlKX0scnVuSW5pdGlhbGl6ZXJzOmZ1bmN0aW9uKCl7dmFyIGUs
        dCxuPXIodGhpcy5jb25zdHJ1Y3RvciwiaW5pdGlhbGl6ZXJzIiksaT10aGlz
        Ll9fY29udGFpbmVyX18sbz1uZXcgRW1iZXIuREFHLGE9dGhpcztmb3IoZSBp
        biBuKXQ9bltlXSxvLmFkZEVkZ2VzKHQubmFtZSx0LmluaXRpYWxpemUsdC5i
        ZWZvcmUsdC5hZnRlcik7by50b3Bzb3J0KGZ1bmN0aW9uKGUpe3ZhciB0PWUu
        dmFsdWU7dChpLGEpfSl9LGRpZEJlY29tZVJlYWR5OmZ1bmN0aW9uKCl7dGhp
        cy5zZXR1cEV2ZW50RGlzcGF0Y2hlcigpLHRoaXMucmVhZHkoKSx0aGlzLnN0
        YXJ0Um91dGluZygpLEVtYmVyLnRlc3Rpbmd8fChFbWJlci5OYW1lc3BhY2Uu
        cHJvY2Vzc0FsbCgpLEVtYmVyLkJPT1RFRD0hMCksdGhpcy5yZXNvbHZlKHRo
        aXMpfSxzZXR1cEV2ZW50RGlzcGF0Y2hlcjpmdW5jdGlvbigpe3ZhciBlPXIo
        dGhpcywiY3VzdG9tRXZlbnRzIiksdD1yKHRoaXMsInJvb3RFbGVtZW50Iiks
        aT10aGlzLl9fY29udGFpbmVyX18ubG9va3VwKCJldmVudF9kaXNwYXRjaGVy
        Om1haW4iKTtuKHRoaXMsImV2ZW50RGlzcGF0Y2hlciIsaSksaS5zZXR1cChl
        LHQpfSxzdGFydFJvdXRpbmc6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLl9fY29u
        dGFpbmVyX18ubG9va3VwKCJyb3V0ZXI6bWFpbiIpO2UmJmUuc3RhcnRSb3V0
        aW5nKCl9LGhhbmRsZVVSTDpmdW5jdGlvbihlKXt2YXIgdD10aGlzLl9fY29u
        dGFpbmVyX18ubG9va3VwKCJyb3V0ZXI6bWFpbiIpO3QuaGFuZGxlVVJMKGUp
        fSxyZWFkeTpFbWJlci5LLHJlc29sdmVyOm51bGwsUmVzb2x2ZXI6bnVsbCx3
        aWxsRGVzdHJveTpmdW5jdGlvbigpe0VtYmVyLkJPT1RFRD0hMSx0aGlzLl9f
        Y29udGFpbmVyX18ubG9va3VwKCJyb3V0ZXI6bWFpbiIpLnJlc2V0KCksdGhp
        cy5fX2NvbnRhaW5lcl9fLmRlc3Ryb3koKX0saW5pdGlhbGl6ZXI6ZnVuY3Rp
        b24oZSl7dGhpcy5jb25zdHJ1Y3Rvci5pbml0aWFsaXplcihlKX19KTtFbWJl
        ci5BcHBsaWNhdGlvbi5yZW9wZW5DbGFzcyh7aW5pdGlhbGl6ZXJzOnt9LGlu
        aXRpYWxpemVyOmZ1bmN0aW9uKGUpe3ZvaWQgMCE9PXRoaXMuc3VwZXJjbGFz
        cy5pbml0aWFsaXplcnMmJnRoaXMuc3VwZXJjbGFzcy5pbml0aWFsaXplcnM9
        PT10aGlzLmluaXRpYWxpemVycyYmdGhpcy5yZW9wZW5DbGFzcyh7aW5pdGlh
        bGl6ZXJzOkVtYmVyLmNyZWF0ZSh0aGlzLmluaXRpYWxpemVycyl9KSx0aGlz
        LmluaXRpYWxpemVyc1tlLm5hbWVdPWV9LGJ1aWxkQ29udGFpbmVyOmZ1bmN0
        aW9uKHIpe3ZhciBuPW5ldyBFbWJlci5Db250YWluZXI7cmV0dXJuIEVtYmVy
        LkNvbnRhaW5lci5kZWZhdWx0Q29udGFpbmVyPW5ldyBlKG4pLG4uc2V0PUVt
        YmVyLnNldCxuLnJlc29sdmVyPXQociksbi5ub3JtYWxpemU9bi5yZXNvbHZl
        ci5ub3JtYWxpemUsbi5kZXNjcmliZT1uLnJlc29sdmVyLmRlc2NyaWJlLG4u
        bWFrZVRvU3RyaW5nPW4ucmVzb2x2ZXIubWFrZVRvU3RyaW5nLG4ub3B0aW9u
        c0ZvclR5cGUoImNvbXBvbmVudCIse3NpbmdsZXRvbjohMX0pLG4ub3B0aW9u
        c0ZvclR5cGUoInZpZXciLHtzaW5nbGV0b246ITF9KSxuLm9wdGlvbnNGb3JU
        eXBlKCJ0ZW1wbGF0ZSIse2luc3RhbnRpYXRlOiExfSksbi5vcHRpb25zRm9y
        VHlwZSgiaGVscGVyIix7aW5zdGFudGlhdGU6ITF9KSxuLnJlZ2lzdGVyKCJh
        cHBsaWNhdGlvbjptYWluIixyLHtpbnN0YW50aWF0ZTohMX0pLG4ucmVnaXN0
        ZXIoImNvbnRyb2xsZXI6YmFzaWMiLEVtYmVyLkNvbnRyb2xsZXIse2luc3Rh
        bnRpYXRlOiExfSksbi5yZWdpc3RlcigiY29udHJvbGxlcjpvYmplY3QiLEVt
        YmVyLk9iamVjdENvbnRyb2xsZXIse2luc3RhbnRpYXRlOiExfSksbi5yZWdp
        c3RlcigiY29udHJvbGxlcjphcnJheSIsRW1iZXIuQXJyYXlDb250cm9sbGVy
        LHtpbnN0YW50aWF0ZTohMX0pLG4ucmVnaXN0ZXIoInJvdXRlOmJhc2ljIixF
        bWJlci5Sb3V0ZSx7aW5zdGFudGlhdGU6ITF9KSxuLnJlZ2lzdGVyKCJldmVu
        dF9kaXNwYXRjaGVyOm1haW4iLEVtYmVyLkV2ZW50RGlzcGF0Y2hlciksbi5y
        ZWdpc3Rlcigicm91dGVyOm1haW4iLEVtYmVyLlJvdXRlciksbi5pbmplY3Rp
        b24oInJvdXRlcjptYWluIiwibmFtZXNwYWNlIiwiYXBwbGljYXRpb246bWFp
        biIpLG4ucmVnaXN0ZXIoImxvY2F0aW9uOmhhc2giLEVtYmVyLkhhc2hMb2Nh
        dGlvbiksbi5yZWdpc3RlcigibG9jYXRpb246aGlzdG9yeSIsRW1iZXIuSGlz
        dG9yeUxvY2F0aW9uKSxuLnJlZ2lzdGVyKCJsb2NhdGlvbjpub25lIixFbWJl
        ci5Ob25lTG9jYXRpb24pLG4uaW5qZWN0aW9uKCJjb250cm9sbGVyIiwidGFy
        Z2V0Iiwicm91dGVyOm1haW4iKSxuLmluamVjdGlvbigiY29udHJvbGxlciIs
        Im5hbWVzcGFjZSIsImFwcGxpY2F0aW9uOm1haW4iKSxuLmluamVjdGlvbigi
        cm91dGUiLCJyb3V0ZXIiLCJyb3V0ZXI6bWFpbiIpLG59fSksRW1iZXIucnVu
        TG9hZEhvb2tzKCJFbWJlci5BcHBsaWNhdGlvbiIsRW1iZXIuQXBwbGljYXRp
        b24pfSgpLGZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQscil7dmFyIG4saSxv
        LGE9W107Zm9yKGk9MCxvPXIubGVuZ3RoO28+aTtpKyspbj1yW2ldLC0xPT09
        bi5pbmRleE9mKCI6IikmJihuPSJjb250cm9sbGVyOiIrbiksdC5oYXMobil8
        fGEucHVzaChuKTtpZihhLmxlbmd0aCl0aHJvdyBuZXcgRW1iZXIuRXJyb3Io
        RW1iZXIuaW5zcGVjdChlKSsiIG5lZWRzIFsgIithLmpvaW4oIiwgIikrIiBd
        IGJ1dCAiKyhhLmxlbmd0aD4xPyJ0aGV5IjoiaXQiKSsiIGNvdWxkIG5vdCBi
        ZSBmb3VuZCIpfXZhciB0PUVtYmVyLmdldCxyPShFbWJlci5zZXQsRW1iZXIu
        Y29tcHV0ZWQoZnVuY3Rpb24oKXt2YXIgZT10aGlzOwpyZXR1cm57bmVlZHM6
        dChlLCJuZWVkcyIpLGNvbnRhaW5lcjp0KGUsImNvbnRhaW5lciIpLHVua25v
        d25Qcm9wZXJ0eTpmdW5jdGlvbih0KXt2YXIgcixuLGksbz10aGlzLm5lZWRz
        O2ZvcihuPTAsaT1vLmxlbmd0aDtpPm47bisrKWlmKHI9b1tuXSxyPT09dCly
        ZXR1cm4gdGhpcy5jb250YWluZXIubG9va3VwKCJjb250cm9sbGVyOiIrdCk7
        dmFyIGE9RW1iZXIuaW5zcGVjdChlKSsiI25lZWRzIGRvZXMgbm90IGluY2x1
        ZGUgYCIrdCsiYC4gVG8gYWNjZXNzIHRoZSAiK3QrIiBjb250cm9sbGVyIGZy
        b20gIitFbWJlci5pbnNwZWN0KGUpKyIsICIrRW1iZXIuaW5zcGVjdChlKSsi
        IHNob3VsZCBoYXZlIGEgYG5lZWRzYCBwcm9wZXJ0eSB0aGF0IGlzIGFuIGFy
        cmF5IG9mIHRoZSBjb250cm9sbGVycyBpdCBoYXMgYWNjZXNzIHRvLiI7dGhy
        b3cgbmV3IFJlZmVyZW5jZUVycm9yKGEpfSxzZXRVbmtub3duUHJvcGVydHk6
        ZnVuY3Rpb24odCl7dGhyb3cgbmV3IEVycm9yKCJZb3UgY2Fubm90IG92ZXJ3
        cml0ZSB0aGUgdmFsdWUgb2YgYGNvbnRyb2xsZXJzLiIrdCsiYCBvZiAiK0Vt
        YmVyLmluc3BlY3QoZSkpfX19KSk7RW1iZXIuQ29udHJvbGxlck1peGluLnJl
        b3Blbih7Y29uY2F0ZW5hdGVkUHJvcGVydGllczpbIm5lZWRzIl0sbmVlZHM6
        W10saW5pdDpmdW5jdGlvbigpe3ZhciByPXQodGhpcywibmVlZHMiKSxuPXQo
        ciwibGVuZ3RoIik7bj4wJiYodGhpcy5jb250YWluZXImJmUodGhpcyx0aGlz
        LmNvbnRhaW5lcixyKSx0KHRoaXMsImNvbnRyb2xsZXJzIikpLHRoaXMuX3N1
        cGVyLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sY29udHJvbGxlckZvcjpmdW5j
        dGlvbihlKXtyZXR1cm4gRW1iZXIuY29udHJvbGxlckZvcih0KHRoaXMsImNv
        bnRhaW5lciIpLGUpfSxjb250cm9sbGVyczpyfSl9KCksZnVuY3Rpb24oKXtF
        bWJlci5EYXRhQWRhcHRlcj1FbWJlci5PYmplY3QuZXh0ZW5kKHtpbml0OmZ1
        bmN0aW9uKCl7dGhpcy5fc3VwZXIoKSx0aGlzLnJlbGVhc2VNZXRob2RzPUVt
        YmVyLkEoKX0sY29udGFpbmVyOm51bGwsYXR0cmlidXRlTGltaXQ6MyxyZWxl
        YXNlTWV0aG9kczpFbWJlci5BKCksZ2V0RmlsdGVyczpmdW5jdGlvbigpe3Jl
        dHVybiBFbWJlci5BKCl9LHdhdGNoTW9kZWxUeXBlczpmdW5jdGlvbihlLHQp
        e3ZhciByLG49dGhpcy5nZXRNb2RlbFR5cGVzKCksaT10aGlzLG89RW1iZXIu
        QSgpO3I9bi5tYXAoZnVuY3Rpb24oZSl7dmFyIHI9aS53cmFwTW9kZWxUeXBl
        KGUpO3JldHVybiBvLnB1c2goaS5vYnNlcnZlTW9kZWxUeXBlKGUsdCkpLHJ9
        KSxlKHIpO3ZhciBhPWZ1bmN0aW9uKCl7by5mb3JFYWNoKGZ1bmN0aW9uKGUp
        e2UoKX0pLGkucmVsZWFzZU1ldGhvZHMucmVtb3ZlT2JqZWN0KGEpfTtyZXR1
        cm4gdGhpcy5yZWxlYXNlTWV0aG9kcy5wdXNoT2JqZWN0KGEpLGF9LHdhdGNo
        UmVjb3JkczpmdW5jdGlvbihlLHQscixuKXt2YXIgaSxvPXRoaXMsYT1FbWJl
        ci5BKCkscz10aGlzLmdldFJlY29yZHMoZSksdT1mdW5jdGlvbihlKXtyKFtl
        XSl9LGw9cy5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIGEucHVzaChvLm9ic2Vy
        dmVSZWNvcmQoZSx1KSksby53cmFwUmVjb3JkKGUpfSksYz1mdW5jdGlvbihl
        LHIsaSxzKXtmb3IodmFyIGw9cjtyK3M+bDtsKyspe3ZhciBjPWUub2JqZWN0
        QXQobCksaD1vLndyYXBSZWNvcmQoYyk7YS5wdXNoKG8ub2JzZXJ2ZVJlY29y
        ZChjLHUpKSx0KFtoXSl9aSYmbihyLGkpfSxoPXtkaWRDaGFuZ2U6Yyx3aWxs
        Q2hhbmdlOkVtYmVyLkt9O3JldHVybiBzLmFkZEFycmF5T2JzZXJ2ZXIobyxo
        KSxpPWZ1bmN0aW9uKCl7YS5mb3JFYWNoKGZ1bmN0aW9uKGUpe2UoKX0pLHMu
        cmVtb3ZlQXJyYXlPYnNlcnZlcihvLGgpLG8ucmVsZWFzZU1ldGhvZHMucmVt
        b3ZlT2JqZWN0KGkpfSx0KGwpLHRoaXMucmVsZWFzZU1ldGhvZHMucHVzaE9i
        amVjdChpKSxpfSx3aWxsRGVzdHJveTpmdW5jdGlvbigpe3RoaXMuX3N1cGVy
        KCksdGhpcy5yZWxlYXNlTWV0aG9kcy5mb3JFYWNoKGZ1bmN0aW9uKGUpe2Uo
        KX0pfSxkZXRlY3Q6ZnVuY3Rpb24oKXtyZXR1cm4hMX0sY29sdW1uc0ZvclR5
        cGU6ZnVuY3Rpb24oKXtyZXR1cm4gRW1iZXIuQSgpfSxvYnNlcnZlTW9kZWxU
        eXBlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcyxuPXRoaXMuZ2V0UmVjb3Jk
        cyhlKSxpPWZ1bmN0aW9uKCl7dChbci53cmFwTW9kZWxUeXBlKGUpXSl9LG89
        e2RpZENoYW5nZTpmdW5jdGlvbigpe0VtYmVyLnJ1bi5zY2hlZHVsZU9uY2Uo
        ImFjdGlvbnMiLHRoaXMsaSl9LHdpbGxDaGFuZ2U6RW1iZXIuS307bi5hZGRB
        cnJheU9ic2VydmVyKHRoaXMsbyk7dmFyIGE9ZnVuY3Rpb24oKXtuLnJlbW92
        ZUFycmF5T2JzZXJ2ZXIocixvKX07cmV0dXJuIGF9LHdyYXBNb2RlbFR5cGU6
        ZnVuY3Rpb24oZSl7dmFyIHQscj10aGlzLmdldFJlY29yZHMoZSk7cmV0dXJu
        IHQ9e25hbWU6ZS50b1N0cmluZygpLGNvdW50OkVtYmVyLmdldChyLCJsZW5n
        dGgiKSxjb2x1bW5zOnRoaXMuY29sdW1uc0ZvclR5cGUoZSksb2JqZWN0OmV9
        fSxnZXRNb2RlbFR5cGVzOmZ1bmN0aW9uKCl7dmFyIGU9RW1iZXIuQShFbWJl
        ci5OYW1lc3BhY2UuTkFNRVNQQUNFUyksdD1FbWJlci5BKCkscj10aGlzO3Jl
        dHVybiBlLmZvckVhY2goZnVuY3Rpb24oZSl7Zm9yKHZhciBuIGluIGUpaWYo
        ZS5oYXNPd25Qcm9wZXJ0eShuKSl7dmFyIGk9ZVtuXTtyLmRldGVjdChpKSYm
        dC5wdXNoKGkpfX0pLHR9LGdldFJlY29yZHM6ZnVuY3Rpb24oKXtyZXR1cm4g
        RW1iZXIuQSgpfSx3cmFwUmVjb3JkOmZ1bmN0aW9uKGUpe3ZhciB0PXtvYmpl
        Y3Q6ZX07cmV0dXJuIHQuY29sdW1uVmFsdWVzPXRoaXMuZ2V0UmVjb3JkQ29s
        dW1uVmFsdWVzKGUpLHQuc2VhcmNoS2V5d29yZHM9dGhpcy5nZXRSZWNvcmRL
        ZXl3b3JkcyhlKSx0LmZpbHRlclZhbHVlcz10aGlzLmdldFJlY29yZEZpbHRl
        clZhbHVlcyhlKSx0LmNvbG9yPXRoaXMuZ2V0UmVjb3JkQ29sb3IoZSksdH0s
        Z2V0UmVjb3JkQ29sdW1uVmFsdWVzOmZ1bmN0aW9uKCl7cmV0dXJue319LGdl
        dFJlY29yZEtleXdvcmRzOmZ1bmN0aW9uKCl7cmV0dXJuIEVtYmVyLkEoKX0s
        Z2V0UmVjb3JkRmlsdGVyVmFsdWVzOmZ1bmN0aW9uKCl7cmV0dXJue319LGdl
        dFJlY29yZENvbG9yOmZ1bmN0aW9uKCl7cmV0dXJuIG51bGx9LG9ic2VydmVS
        ZWNvcmQ6ZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oKXt9fX0pfSgpfSgp
        LCJ1bmRlZmluZWQiPT10eXBlb2YgbG9jYXRpb258fCJsb2NhbGhvc3QiIT09
        bG9jYXRpb24uaG9zdG5hbWUmJiIxMjcuMC4wLjEiIT09bG9jYXRpb24uaG9z
        dG5hbWV8fEVtYmVyLkxvZ2dlci53YXJuKCJZb3UgYXJlIHJ1bm5pbmcgYSBw
        cm9kdWN0aW9uIGJ1aWxkIG9mIEVtYmVyIG9uIGxvY2FsaG9zdCBhbmQgd29u
        J3QgcmVjZWl2ZSBkZXRhaWxlZCBlcnJvciBtZXNzYWdlcy4gSWYgeW91IHdh
        bnQgZnVsbCBlcnJvciBtZXNzYWdlcyBwbGVhc2UgdXNlIHRoZSBub24tbWlu
        aWZpZWQgYnVpbGQgcHJvdmlkZWQgb24gdGhlIEVtYmVyIHdlYnNpdGUuIik7
    http_version: 
  recorded_at: Mon, 17 Feb 2014 11:45:12 GMT
- request:
    method: get
    uri: http://builds.emberjs.com/release/ember-data.js
    body:
      encoding: US-ASCII
      string: ''
    headers:
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - '*/*'
      User-Agent:
      - Ruby
      Host:
      - builds.emberjs.com
  response:
    status:
      code: 404
      message: Not Found
    headers:
      X-Amz-Request-Id:
      - 2DD7905EDCB94156
      X-Amz-Id-2:
      - lg/xY6LR/MMwXkIOhAc0kQnJweyaRoeqBebp8vOqa+zD6TO9lOJJucyHbgjMjNRR
      Content-Type:
      - text/html; charset=utf-8
      Content-Length:
      - '344'
      Date:
      - Mon, 17 Feb 2014 11:45:46 GMT
      Server:
      - AmazonS3
    body:
      encoding: UTF-8
      string: |
        <html>
        <head><title>404 Not Found</title></head>
        <body>
        <h1>404 Not Found</h1>
        <ul>
        <li>Code: NoSuchKey</li>
        <li>Message: The specified key does not exist.</li>
        <li>Key: release/ember-data.js</li>
        <li>RequestId: 2DD7905EDCB94156</li>
        <li>HostId: lg/xY6LR/MMwXkIOhAc0kQnJweyaRoeqBebp8vOqa+zD6TO9lOJJucyHbgjMjNRR</li>
        </ul>
        <hr/>
        </body>
        </html>
    http_version: 
  recorded_at: Mon, 17 Feb 2014 11:45:47 GMT
- request:
    method: get
    uri: http://builds.emberjs.com/beta/ember-data.js
    body:
      encoding: US-ASCII
      string: ''
    headers:
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - '*/*'
      User-Agent:
      - Ruby
      Host:
      - builds.emberjs.com
  response:
    status:
      code: 200
      message: OK
    headers:
      X-Amz-Id-2:
      - KH6dytQrEDhj2xmHtp/l+5sVic/3kXwf58gyiTOt2+xdaxBNVO7FWCOrv1Gh2mWm
      X-Amz-Request-Id:
      - E1D9F05353512836
      Date:
      - Mon, 17 Feb 2014 11:45:49 GMT
      Last-Modified:
      - Sun, 26 Jan 2014 02:03:33 GMT
      Etag:
      - '"4e6b873fdc5cf10ec70bef695bf07589"'
      Content-Type:
      - text/javascript
      Content-Length:
      - '280957'
      Server:
      - AmazonS3
    body:
      encoding: ASCII-8BIT
      string: !binary |-
        LyohCiAqIEBvdmVydmlldyAgRW1iZXIgRGF0YQogKiBAY29weXJpZ2h0IENv
        cHlyaWdodCAyMDExLTIwMTQgVGlsZGUgSW5jLiBhbmQgY29udHJpYnV0b3Jz
        LgogKiAgICAgICAgICAgIFBvcnRpb25zIENvcHlyaWdodCAyMDExIExpdmlu
        Z1NvY2lhbCBJbmMuCiAqIEBsaWNlbnNlICAgTGljZW5zZWQgdW5kZXIgTUlU
        IGxpY2Vuc2UgKHNlZSBsaWNlbnNlLmpzKQogKiBAdmVyc2lvbiAgIDEuMC4w
        LWJldGEuNgogKi8KCgooZnVuY3Rpb24oKSB7CnZhciBkZWZpbmUsIHJlcXVp
        cmVNb2R1bGU7CgooZnVuY3Rpb24oKSB7CiAgdmFyIHJlZ2lzdHJ5ID0ge30s
        IHNlZW4gPSB7fTsKCiAgZGVmaW5lID0gZnVuY3Rpb24obmFtZSwgZGVwcywg
        Y2FsbGJhY2spIHsKICAgIHJlZ2lzdHJ5W25hbWVdID0geyBkZXBzOiBkZXBz
        LCBjYWxsYmFjazogY2FsbGJhY2sgfTsKICB9OwoKICByZXF1aXJlTW9kdWxl
        ID0gZnVuY3Rpb24obmFtZSkgewogICAgaWYgKHNlZW5bbmFtZV0pIHsgcmV0
        dXJuIHNlZW5bbmFtZV07IH0KICAgIHNlZW5bbmFtZV0gPSB7fTsKCiAgICB2
        YXIgbW9kLCBkZXBzLCBjYWxsYmFjaywgcmVpZmllZCAsIGV4cG9ydHM7Cgog
        ICAgbW9kID0gcmVnaXN0cnlbbmFtZV07CgogICAgaWYgKCFtb2QpIHsKICAg
        ICAgdGhyb3cgbmV3IEVycm9yKCJNb2R1bGUgJyIgKyBuYW1lICsgIicgbm90
        IGZvdW5kLiIpOwogICAgfQoKICAgIGRlcHMgPSBtb2QuZGVwczsKICAgIGNh
        bGxiYWNrID0gbW9kLmNhbGxiYWNrOwogICAgcmVpZmllZCA9IFtdOwogICAg
        ZXhwb3J0czsKCiAgICBmb3IgKHZhciBpPTAsIGw9ZGVwcy5sZW5ndGg7IGk8
        bDsgaSsrKSB7CiAgICAgIGlmIChkZXBzW2ldID09PSAnZXhwb3J0cycpIHsK
        ICAgICAgICByZWlmaWVkLnB1c2goZXhwb3J0cyA9IHt9KTsKICAgICAgfSBl
        bHNlIHsKICAgICAgICByZWlmaWVkLnB1c2gocmVxdWlyZU1vZHVsZShkZXBz
        W2ldKSk7CiAgICAgIH0KICAgIH0KCiAgICB2YXIgdmFsdWUgPSBjYWxsYmFj
        ay5hcHBseSh0aGlzLCByZWlmaWVkKTsKICAgIHJldHVybiBzZWVuW25hbWVd
        ID0gZXhwb3J0cyB8fCB2YWx1ZTsKICB9Owp9KSgpOwooZnVuY3Rpb24oKSB7
        Ci8qKgogIEBtb2R1bGUgZW1iZXItZGF0YQoqLwoKLyoqCiAgQWxsIEVtYmVy
        IERhdGEgbWV0aG9kcyBhbmQgZnVuY3Rpb25zIGFyZSBkZWZpbmVkIGluc2lk
        ZSBvZiB0aGlzIG5hbWVzcGFjZS4KCiAgQGNsYXNzIERTCiAgQHN0YXRpYwoq
        Lwp2YXIgRFM7CmlmICgndW5kZWZpbmVkJyA9PT0gdHlwZW9mIERTKSB7CiAg
        LyoqCiAgICBAcHJvcGVydHkgVkVSU0lPTgogICAgQHR5cGUgU3RyaW5nCiAg
        ICBAZGVmYXVsdCAnMS4wLjAtYmV0YS42JwogICAgQHN0YXRpYwogICovCiAg
        RFMgPSBFbWJlci5OYW1lc3BhY2UuY3JlYXRlKHsKICAgIFZFUlNJT046ICcx
        LjAuMC1iZXRhLjYnCiAgfSk7CgogIGlmICgndW5kZWZpbmVkJyAhPT0gdHlw
        ZW9mIHdpbmRvdykgewogICAgd2luZG93LkRTID0gRFM7CiAgfQoKICBpZiAo
        RW1iZXIubGlicmFyaWVzKSB7CiAgICBFbWJlci5saWJyYXJpZXMucmVnaXN0
        ZXJDb3JlTGlicmFyeSgnRW1iZXIgRGF0YScsIERTLlZFUlNJT04pOwogIH0K
        fQoKfSkoKTsKCgoKKGZ1bmN0aW9uKCkgewovKioKICBUaGlzIGlzIHVzZWQg
        aW50ZXJuYWxseSB0byBlbmFibGUgZGVwcmVjYXRpb24gb2YgY29udGFpbmVy
        IHBhdGhzIGFuZCBwcm92aWRlCiAgYSBkZWNlbnQgbWVzc2FnZSB0byB0aGUg
        dXNlciBpbmRpY2F0aW5nIGhvdyB0byBmaXggdGhlIGlzc3VlLgoKICBAY2xh
        c3MgQ29udGFpbmVyUHJveHkKICBAbmFtZXNwYWNlIERTCiAgQHByaXZhdGUK
        Ki8KdmFyIENvbnRhaW5lclByb3h5ID0gZnVuY3Rpb24gKGNvbnRhaW5lcil7
        CiAgdGhpcy5jb250YWluZXIgPSBjb250YWluZXI7Cn07CgpDb250YWluZXJQ
        cm94eS5wcm90b3R5cGUuYWxpYXNlZEZhY3RvcnkgPSBmdW5jdGlvbihwYXRo
        LCBwcmVMb29rdXApIHsKICB2YXIgX3RoaXMgPSB0aGlzOwoKICByZXR1cm4g
        e2NyZWF0ZTogZnVuY3Rpb24oKXsgCiAgICBpZiAocHJlTG9va3VwKSB7IHBy
        ZUxvb2t1cCgpOyB9CgogICAgcmV0dXJuIF90aGlzLmNvbnRhaW5lci5sb29r
        dXAocGF0aCk7IAogIH19Owp9OwoKQ29udGFpbmVyUHJveHkucHJvdG90eXBl
        LnJlZ2lzdGVyQWxpYXMgPSBmdW5jdGlvbihzb3VyY2UsIGRlc3QsIHByZUxv
        b2t1cCkgewogIHZhciBmYWN0b3J5ID0gdGhpcy5hbGlhc2VkRmFjdG9yeShk
        ZXN0LCBwcmVMb29rdXApOwoKICByZXR1cm4gdGhpcy5jb250YWluZXIucmVn
        aXN0ZXIoc291cmNlLCBmYWN0b3J5KTsKfTsKCkNvbnRhaW5lclByb3h5LnBy
        b3RvdHlwZS5yZWdpc3RlckRlcHJlY2F0aW9uID0gZnVuY3Rpb24oZGVwcmVj
        YXRlZCwgdmFsaWQpIHsKICB2YXIgcHJlTG9va3VwQ2FsbGJhY2sgPSBmdW5j
        dGlvbigpewogICAgRW1iZXIuZGVwcmVjYXRlKCJZb3UgdHJpZWQgdG8gbG9v
        ayB1cCAnIiArIGRlcHJlY2F0ZWQgKyAiJywgIiArCiAgICAgICAgICAgICAg
        ICAgICAgImJ1dCB0aGlzIGhhcyBiZWVuIGRlcHJlY2F0ZWQgaW4gZmF2b3Ig
        b2YgJyIgKyB2YWxpZCArICInLiIsIGZhbHNlKTsKICB9OwoKICByZXR1cm4g
        dGhpcy5yZWdpc3RlckFsaWFzKGRlcHJlY2F0ZWQsIHZhbGlkLCBwcmVMb29r
        dXBDYWxsYmFjayk7Cn07CgpDb250YWluZXJQcm94eS5wcm90b3R5cGUucmVn
        aXN0ZXJEZXByZWNhdGlvbnMgPSBmdW5jdGlvbihwcm94eVBhaXJzKSB7CiAg
        Zm9yICh2YXIgaSA9IHByb3h5UGFpcnMubGVuZ3RoOyBpID4gMDsgaS0tKSB7
        CiAgICB2YXIgcHJveHlQYWlyID0gcHJveHlQYWlyc1tpIC0gMV0sCiAgICAg
        ICAgZGVwcmVjYXRlZCA9IHByb3h5UGFpclsnZGVwcmVjYXRlZCddLAogICAg
        ICAgIHZhbGlkID0gcHJveHlQYWlyWyd2YWxpZCddOwoKICAgIHRoaXMucmVn
        aXN0ZXJEZXByZWNhdGlvbihkZXByZWNhdGVkLCB2YWxpZCk7CiAgfQp9OwoK
        RFMuQ29udGFpbmVyUHJveHkgPSBDb250YWluZXJQcm94eTsKCn0pKCk7CgoK
        CihmdW5jdGlvbigpIHsKdmFyIGdldCA9IEVtYmVyLmdldCwgc2V0ID0gRW1i
        ZXIuc2V0LCBpc05vbmUgPSBFbWJlci5pc05vbmU7CgovLyBTaW1wbGUgZGlz
        cGF0Y2hlciB0byBzdXBwb3J0IG92ZXJyaWRpbmcgdGhlIGFsaWFzZWQKLy8g
        bWV0aG9kIGluIHN1YmNsYXNzZXMuCmZ1bmN0aW9uIGFsaWFzTWV0aG9kKG1l
        dGhvZE5hbWUpIHsKICByZXR1cm4gZnVuY3Rpb24oKSB7CiAgICByZXR1cm4g
        dGhpc1ttZXRob2ROYW1lXS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogIH07
        Cn0KCi8qKgogIEluIEVtYmVyIERhdGEgYSBTZXJpYWxpemVyIGlzIHVzZWQg
        dG8gc2VyaWFsaXplIGFuZCBkZXNlcmlhbGl6ZQogIHJlY29yZHMgd2hlbiB0
        aGV5IGFyZSB0cmFuc2ZlcnJlZCBpbiBhbmQgb3V0IG9mIGFuIGV4dGVybmFs
        IHNvdXJjZS4KICBUaGlzIHByb2Nlc3MgaW52b2x2ZXMgbm9ybWFsaXppbmcg
        cHJvcGVydHkgbmFtZXMsIHRyYW5zZm9ybWluZwogIGF0dHJpYnV0ZSB2YWx1
        ZXMgYW5kIHNlcmlhbGl6aW5nIHJlbGF0aW9uc2hpcHMuCgogIEZvciBtYXhp
        bXVtIHBlcmZvcm1hbmNlIEVtYmVyIERhdGEgcmVjb21tZW5kcyB5b3UgdXNl
        IHRoZQogIFtSRVNUU2VyaWFsaXplcl0oRFMuUkVTVFNlcmlhbGl6ZXIuaHRt
        bCkgb3Igb25lIG9mIGl0cyBzdWJjbGFzc2VzLgoKICBgSlNPTlNlcmlhbGl6
        ZXJgIGlzIHVzZWZ1bCBmb3Igc2ltcGxlciBvciBsZWdhY3kgYmFja2VuZHMg
        dGhhdCBtYXkKICBub3Qgc3VwcG9ydCB0aGUgaHR0cDovL2pzb25hcGkub3Jn
        LyBzcGVjLgoKICBAY2xhc3MgSlNPTlNlcmlhbGl6ZXIKICBAbmFtZXNwYWNl
        IERTCiovCkRTLkpTT05TZXJpYWxpemVyID0gRW1iZXIuT2JqZWN0LmV4dGVu
        ZCh7CiAgLyoqCiAgICBUaGUgcHJpbWFyeUtleSBpcyB1c2VkIHdoZW4gc2Vy
        aWFsaXppbmcgYW5kIGRlc2VyaWFsaXppbmcKICAgIGRhdGEuIEVtYmVyIERh
        dGEgYWx3YXlzIHVzZXMgdGhlIGBpZGAgcHJvcGVydHkgdG8gc3RvcmUgdGhl
        IGlkIG9mCiAgICB0aGUgcmVjb3JkLiBUaGUgZXh0ZXJuYWwgc291cmNlIG1h
        eSBub3QgYWx3YXlzIGZvbGxvdyB0aGlzCiAgICBjb252ZW50aW9uLiBJbiB0
        aGVzZSBjYXNlcyBpdCBpcyB1c2VmdWwgdG8gb3ZlcnJpZGUgdGhlCiAgICBw
        cmltYXJ5S2V5IHByb3BlcnR5IHRvIG1hdGNoIHRoZSBwcmltYXJ5S2V5IG9m
        IHlvdXIgZXh0ZXJuYWwKICAgIHN0b3JlLgoKICAgIEV4YW1wbGUKCiAgICBg
        YGBqYXZhc2NyaXB0CiAgICBBcHAuQXBwbGljYXRpb25TZXJpYWxpemVyID0g
        RFMuSlNPTlNlcmlhbGl6ZXIuZXh0ZW5kKHsKICAgICAgcHJpbWFyeUtleTog
        J19pZCcKICAgIH0pOwogICAgYGBgCgogICAgQHByb3BlcnR5IHByaW1hcnlL
        ZXkKICAgIEB0eXBlIHtTdHJpbmd9CiAgICBAZGVmYXVsdCAnaWQnCiAgKi8K
        ICBwcmltYXJ5S2V5OiAnaWQnLAoKICAvKioKICAgR2l2ZW4gYSBzdWJjbGFz
        cyBvZiBgRFMuTW9kZWxgIGFuZCBhIEpTT04gb2JqZWN0IHRoaXMgbWV0aG9k
        IHdpbGwKICAgaXRlcmF0ZSB0aHJvdWdoIGVhY2ggYXR0cmlidXRlIG9mIHRo
        ZSBgRFMuTW9kZWxgIGFuZCBpbnZva2UgdGhlCiAgIGBEUy5UcmFuc2Zvcm0j
        ZGVzZXJpYWxpemVgIG1ldGhvZCBvbiB0aGUgbWF0Y2hpbmcgcHJvcGVydHkg
        b2YgdGhlCiAgIEpTT04gb2JqZWN0LiAgVGhpcyBtZXRob2QgaXMgdHlwaWNh
        bGx5IGNhbGxlZCBhZnRlciB0aGUKICAgc2VyaWFsaXplcidzIGBub3JtYWxp
        emVgIG1ldGhvZC4KCiAgIEBtZXRob2QgYXBwbHlUcmFuc2Zvcm1zCiAgIEBw
        cml2YXRlCiAgIEBwYXJhbSB7c3ViY2xhc3Mgb2YgRFMuTW9kZWx9IHR5cGUK
        ICAgQHBhcmFtIHtPYmplY3R9IGRhdGEgVGhlIGRhdGEgdG8gdHJhbnNmb3Jt
        CiAgIEByZXR1cm4ge09iamVjdH0gZGF0YSBUaGUgdHJhbnNmb3JtZWQgZGF0
        YSBvYmplY3QKICAqLwogIGFwcGx5VHJhbnNmb3JtczogZnVuY3Rpb24odHlw
        ZSwgZGF0YSkgewogICAgdHlwZS5lYWNoVHJhbnNmb3JtZWRBdHRyaWJ1dGUo
        ZnVuY3Rpb24oa2V5LCB0eXBlKSB7CiAgICAgIHZhciB0cmFuc2Zvcm0gPSB0
        aGlzLnRyYW5zZm9ybUZvcih0eXBlKTsKICAgICAgZGF0YVtrZXldID0gdHJh
        bnNmb3JtLmRlc2VyaWFsaXplKGRhdGFba2V5XSk7CiAgICB9LCB0aGlzKTsK
        CiAgICByZXR1cm4gZGF0YTsKICB9LAoKICAvKioKICAgIE5vcm1hbGl6ZXMg
        YSBwYXJ0IG9mIHRoZSBKU09OIHBheWxvYWQgcmV0dXJuZWQgYnkKICAgIHRo
        ZSBzZXJ2ZXIuIFlvdSBzaG91bGQgb3ZlcnJpZGUgdGhpcyBtZXRob2QsIG11
        bmdlIHRoZSBoYXNoCiAgICBhbmQgY2FsbCBzdXBlciBpZiB5b3UgaGF2ZSBn
        ZW5lcmljIG5vcm1hbGl6YXRpb24gdG8gZG8uCgogICAgSXQgdGFrZXMgdGhl
        IHR5cGUgb2YgdGhlIHJlY29yZCB0aGF0IGlzIGJlaW5nIG5vcm1hbGl6ZWQK
        ICAgIChhcyBhIERTLk1vZGVsIGNsYXNzKSwgdGhlIHByb3BlcnR5IHdoZXJl
        IHRoZSBoYXNoIHdhcwogICAgb3JpZ2luYWxseSBmb3VuZCwgYW5kIHRoZSBo
        YXNoIHRvIG5vcm1hbGl6ZS4KCiAgICBZb3UgY2FuIHVzZSB0aGlzIG1ldGhv
        ZCwgZm9yIGV4YW1wbGUsIHRvIG5vcm1hbGl6ZSB1bmRlcnNjb3JlZCBrZXlz
        IHRvIGNhbWVsaXplZAogICAgb3Igb3RoZXIgZ2VuZXJhbC1wdXJwb3NlIG5v
        cm1hbGl6YXRpb25zLgoKICAgIEV4YW1wbGUKCiAgICBgYGBqYXZhc2NyaXB0
        CiAgICBBcHAuQXBwbGljYXRpb25TZXJpYWxpemVyID0gRFMuSlNPTlNlcmlh
        bGl6ZXIuZXh0ZW5kKHsKICAgICAgbm9ybWFsaXplOiBmdW5jdGlvbih0eXBl
        LCBoYXNoKSB7CiAgICAgICAgdmFyIGZpZWxkcyA9IEVtYmVyLmdldCh0eXBl
        LCAnZmllbGRzJyk7CiAgICAgICAgZmllbGRzLmZvckVhY2goZnVuY3Rpb24o
        ZmllbGQpIHsKICAgICAgICAgIHZhciBwYXlsb2FkRmllbGQgPSBFbWJlci5T
        dHJpbmcudW5kZXJzY29yZShmaWVsZCk7CiAgICAgICAgICBpZiAoZmllbGQg
        PT09IHBheWxvYWRGaWVsZCkgeyByZXR1cm47IH0KCiAgICAgICAgICBoYXNo
        W2ZpZWxkXSA9IGhhc2hbcGF5bG9hZEZpZWxkXTsKICAgICAgICAgIGRlbGV0
        ZSBoYXNoW3BheWxvYWRGaWVsZF07CiAgICAgICAgfSk7CiAgICAgICAgcmV0
        dXJuIHRoaXMuX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAg
        IH0KICAgIH0pOwogICAgYGBgCgogICAgQG1ldGhvZCBub3JtYWxpemUKICAg
        IEBwYXJhbSB7c3ViY2xhc3Mgb2YgRFMuTW9kZWx9IHR5cGUKICAgIEBwYXJh
        bSB7T2JqZWN0fSBoYXNoCiAgICBAcmV0dXJuIHtPYmplY3R9CiAgKi8KICBu
        b3JtYWxpemU6IGZ1bmN0aW9uKHR5cGUsIGhhc2gpIHsKICAgIGlmICghaGFz
        aCkgeyByZXR1cm4gaGFzaDsgfQoKICAgIHRoaXMuYXBwbHlUcmFuc2Zvcm1z
        KHR5cGUsIGhhc2gpOwogICAgcmV0dXJuIGhhc2g7CiAgfSwKCiAgLy8gU0VS
        SUFMSVpFCiAgLyoqCiAgICBDYWxsZWQgd2hlbiBhIHJlY29yZCBpcyBzYXZl
        ZCBpbiBvcmRlciB0byBjb252ZXJ0IHRoZQogICAgcmVjb3JkIGludG8gSlNP
        Ti4KCiAgICBCeSBkZWZhdWx0LCBpdCBjcmVhdGVzIGEgSlNPTiBvYmplY3Qg
        d2l0aCBhIGtleSBmb3IKICAgIGVhY2ggYXR0cmlidXRlIGFuZCBiZWxvbmdz
        VG8gcmVsYXRpb25zaGlwLgoKICAgIEZvciBleGFtcGxlLCBjb25zaWRlciB0
        aGlzIG1vZGVsOgoKICAgIGBgYGphdmFzY3JpcHQKICAgIEFwcC5Db21tZW50
        ID0gRFMuTW9kZWwuZXh0ZW5kKHsKICAgICAgdGl0bGU6IERTLmF0dHIoKSwK
        ICAgICAgYm9keTogRFMuYXR0cigpLAoKICAgICAgYXV0aG9yOiBEUy5iZWxv
        bmdzVG8oJ3VzZXInKQogICAgfSk7CiAgICBgYGAKCiAgICBUaGUgZGVmYXVs
        dCBzZXJpYWxpemF0aW9uIHdvdWxkIGNyZWF0ZSBhIEpTT04gb2JqZWN0IGxp
        a2U6CgogICAgYGBgamF2YXNjcmlwdAogICAgewogICAgICAidGl0bGUiOiAi
        UmFpbHMgaXMgdW5hZ2kiLAogICAgICAiYm9keSI6ICJSYWlscz8gT21ha2Fz
        ZT8gT19PIiwKICAgICAgImF1dGhvciI6IDEyCiAgICB9CiAgICBgYGAKCiAg
        ICBCeSBkZWZhdWx0LCBhdHRyaWJ1dGVzIGFyZSBwYXNzZWQgdGhyb3VnaCBh
        cy1pcywgdW5sZXNzCiAgICB5b3Ugc3BlY2lmaWVkIGFuIGF0dHJpYnV0ZSB0
        eXBlIChgRFMuYXR0cignZGF0ZScpYCkuIElmCiAgICB5b3Ugc3BlY2lmeSBh
        IHRyYW5zZm9ybSwgdGhlIEphdmFTY3JpcHQgdmFsdWUgd2lsbCBiZQogICAg
        c2VyaWFsaXplZCB3aGVuIGluc2VydGVkIGludG8gdGhlIEpTT04gaGFzaC4K
        CiAgICBCeSBkZWZhdWx0LCBiZWxvbmdzLXRvIHJlbGF0aW9uc2hpcHMgYXJl
        IGNvbnZlcnRlZCBpbnRvCiAgICBJRHMgd2hlbiBpbnNlcnRlZCBpbnRvIHRo
        ZSBKU09OIGhhc2guCgogICAgIyMgSURzCgogICAgYHNlcmlhbGl6ZWAgdGFr
        ZXMgYW4gb3B0aW9ucyBoYXNoIHdpdGggYSBzaW5nbGUgb3B0aW9uOgogICAg
        YGluY2x1ZGVJZGAuIElmIHRoaXMgb3B0aW9uIGlzIGB0cnVlYCwgYHNlcmlh
        bGl6ZWAgd2lsbCwKICAgIGJ5IGRlZmF1bHQgaW5jbHVkZSB0aGUgSUQgaW4g
        dGhlIEpTT04gb2JqZWN0IGl0IGJ1aWxkcy4KCiAgICBUaGUgYWRhcHRlciBw
        YXNzZXMgaW4gYGluY2x1ZGVJZDogdHJ1ZWAgd2hlbiBzZXJpYWxpemluZwog
        ICAgYSByZWNvcmQgZm9yIGBjcmVhdGVSZWNvcmRgLCBidXQgbm90IGZvciBg
        dXBkYXRlUmVjb3JkYC4KCiAgICAjIyBDdXN0b21pemF0aW9uCgogICAgWW91
        ciBzZXJ2ZXIgbWF5IGV4cGVjdCBhIGRpZmZlcmVudCBKU09OIGZvcm1hdCB0
        aGFuIHRoZQogICAgYnVpbHQtaW4gc2VyaWFsaXphdGlvbiBmb3JtYXQuCgog
        ICAgSW4gdGhhdCBjYXNlLCB5b3UgY2FuIGltcGxlbWVudCBgc2VyaWFsaXpl
        YCB5b3Vyc2VsZiBhbmQKICAgIHJldHVybiBhIEpTT04gaGFzaCBvZiB5b3Vy
        IGNob29zaW5nLgoKICAgIGBgYGphdmFzY3JpcHQKICAgIEFwcC5Qb3N0U2Vy
        aWFsaXplciA9IERTLkpTT05TZXJpYWxpemVyLmV4dGVuZCh7CiAgICAgIHNl
        cmlhbGl6ZTogZnVuY3Rpb24ocG9zdCwgb3B0aW9ucykgewogICAgICAgIHZh
        ciBqc29uID0gewogICAgICAgICAgUE9TVF9UVEw6IHBvc3QuZ2V0KCd0aXRs
        ZScpLAogICAgICAgICAgUE9TVF9CRFk6IHBvc3QuZ2V0KCdib2R5JyksCiAg
        ICAgICAgICBQT1NUX0NNUzogcG9zdC5nZXQoJ2NvbW1lbnRzJykubWFwUHJv
        cGVydHkoJ2lkJykKICAgICAgICB9CgogICAgICAgIGlmIChvcHRpb25zLmlu
        Y2x1ZGVJZCkgewogICAgICAgICAganNvbi5QT1NUX0lEXyA9IHBvc3QuZ2V0
        KCdpZCcpOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIGpzb247CiAgICAg
        IH0KICAgIH0pOwogICAgYGBgCgogICAgIyMgQ3VzdG9taXppbmcgYW4gQXBw
        LVdpZGUgU2VyaWFsaXplcgoKICAgIElmIHlvdSB3YW50IHRvIGRlZmluZSBh
        IHNlcmlhbGl6ZXIgZm9yIHlvdXIgZW50aXJlCiAgICBhcHBsaWNhdGlvbiwg
        eW91J2xsIHByb2JhYmx5IHdhbnQgdG8gdXNlIGBlYWNoQXR0cmlidXRlYAog
        ICAgYW5kIGBlYWNoUmVsYXRpb25zaGlwYCBvbiB0aGUgcmVjb3JkLgoKICAg
        IGBgYGphdmFzY3JpcHQKICAgIEFwcC5BcHBsaWNhdGlvblNlcmlhbGl6ZXIg
        PSBEUy5KU09OU2VyaWFsaXplci5leHRlbmQoewogICAgICBzZXJpYWxpemU6
        IGZ1bmN0aW9uKHJlY29yZCwgb3B0aW9ucykgewogICAgICAgIHZhciBqc29u
        ID0ge307CgogICAgICAgIHJlY29yZC5lYWNoQXR0cmlidXRlKGZ1bmN0aW9u
        KG5hbWUpIHsKICAgICAgICAgIGpzb25bc2VydmVyQXR0cmlidXRlTmFtZShu
        YW1lKV0gPSByZWNvcmQuZ2V0KG5hbWUpOwogICAgICAgIH0pCgogICAgICAg
        IHJlY29yZC5lYWNoUmVsYXRpb25zaGlwKGZ1bmN0aW9uKG5hbWUsIHJlbGF0
        aW9uc2hpcCkgewogICAgICAgICAgaWYgKHJlbGF0aW9uc2hpcC5raW5kID09
        PSAnaGFzTWFueScpIHsKICAgICAgICAgICAganNvbltzZXJ2ZXJIYXNNYW55
        TmFtZShuYW1lKV0gPSByZWNvcmQuZ2V0KG5hbWUpLm1hcEJ5KCdpZCcpOwog
        ICAgICAgICAgfQogICAgICAgIH0pOwoKICAgICAgICBpZiAob3B0aW9ucy5p
        bmNsdWRlSWQpIHsKICAgICAgICAgIGpzb24uSURfID0gcmVjb3JkLmdldCgn
        aWQnKTsKICAgICAgICB9CgogICAgICAgIHJldHVybiBqc29uOwogICAgICB9
        CiAgICB9KTsKCiAgICBmdW5jdGlvbiBzZXJ2ZXJBdHRyaWJ1dGVOYW1lKGF0
        dHJpYnV0ZSkgewogICAgICByZXR1cm4gYXR0cmlidXRlLnVuZGVyc2NvcmUo
        KS50b1VwcGVyQ2FzZSgpOwogICAgfQoKICAgIGZ1bmN0aW9uIHNlcnZlckhh
        c01hbnlOYW1lKG5hbWUpIHsKICAgICAgcmV0dXJuIHNlcnZlckF0dHJpYnV0
        ZU5hbWUobmFtZS5zaW5ndWxhcml6ZSgpKSArICJfSURTIjsKICAgIH0KICAg
        IGBgYAoKICAgIFRoaXMgc2VyaWFsaXplciB3aWxsIGdlbmVyYXRlIEpTT04g
        dGhhdCBsb29rcyBsaWtlIHRoaXM6CgogICAgYGBgamF2YXNjcmlwdAogICAg
        ewogICAgICAiVElUTEUiOiAiUmFpbHMgaXMgb21ha2FzZSIsCiAgICAgICJC
        T0RZIjogIlllcC4gT21ha2FzZS4iLAogICAgICAiQ09NTUVOVF9JRFMiOiBb
        IDEsIDIsIDMgXQogICAgfQogICAgYGBgCgogICAgIyMgVHdlYWtpbmcgdGhl
        IERlZmF1bHQgSlNPTgoKICAgIElmIHlvdSBqdXN0IHdhbnQgdG8gZG8gc29t
        ZSBzbWFsbCB0d2Vha3Mgb24gdGhlIGRlZmF1bHQgSlNPTiwKICAgIHlvdSBj
        YW4gY2FsbCBzdXBlciBmaXJzdCBhbmQgbWFrZSB0aGUgdHdlYWtzIG9uIHRo
        ZSByZXR1cm5lZAogICAgSlNPTi4KCiAgICBgYGBqYXZhc2NyaXB0CiAgICBB
        cHAuUG9zdFNlcmlhbGl6ZXIgPSBEUy5KU09OU2VyaWFsaXplci5leHRlbmQo
        ewogICAgICBzZXJpYWxpemU6IGZ1bmN0aW9uKHJlY29yZCwgb3B0aW9ucykg
        ewogICAgICAgIHZhciBqc29uID0gdGhpcy5fc3VwZXIuYXBwbHkodGhpcywg
        YXJndW1lbnRzKTsKCiAgICAgICAganNvbi5zdWJqZWN0ID0ganNvbi50aXRs
        ZTsKICAgICAgICBkZWxldGUganNvbi50aXRsZTsKCiAgICAgICAgcmV0dXJu
        IGpzb247CiAgICAgIH0KICAgIH0pOwogICAgYGBgCgogICAgQG1ldGhvZCBz
        ZXJpYWxpemUKICAgIEBwYXJhbSB7c3ViY2xhc3Mgb2YgRFMuTW9kZWx9IHJl
        Y29yZAogICAgQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMKICAgIEByZXR1cm4g
        e09iamVjdH0ganNvbgogICovCiAgc2VyaWFsaXplOiBmdW5jdGlvbihyZWNv
        cmQsIG9wdGlvbnMpIHsKICAgIHZhciBqc29uID0ge307CgogICAgaWYgKG9w
        dGlvbnMgJiYgb3B0aW9ucy5pbmNsdWRlSWQpIHsKICAgICAgdmFyIGlkID0g
        Z2V0KHJlY29yZCwgJ2lkJyk7CgogICAgICBpZiAoaWQpIHsKICAgICAgICBq
        c29uW2dldCh0aGlzLCAncHJpbWFyeUtleScpXSA9IGlkOwogICAgICB9CiAg
        ICB9CgogICAgcmVjb3JkLmVhY2hBdHRyaWJ1dGUoZnVuY3Rpb24oa2V5LCBh
        dHRyaWJ1dGUpIHsKICAgICAgdGhpcy5zZXJpYWxpemVBdHRyaWJ1dGUocmVj
        b3JkLCBqc29uLCBrZXksIGF0dHJpYnV0ZSk7CiAgICB9LCB0aGlzKTsKCiAg
        ICByZWNvcmQuZWFjaFJlbGF0aW9uc2hpcChmdW5jdGlvbihrZXksIHJlbGF0
        aW9uc2hpcCkgewogICAgICBpZiAocmVsYXRpb25zaGlwLmtpbmQgPT09ICdi
        ZWxvbmdzVG8nKSB7CiAgICAgICAgdGhpcy5zZXJpYWxpemVCZWxvbmdzVG8o
        cmVjb3JkLCBqc29uLCByZWxhdGlvbnNoaXApOwogICAgICB9IGVsc2UgaWYg
        KHJlbGF0aW9uc2hpcC5raW5kID09PSAnaGFzTWFueScpIHsKICAgICAgICB0
        aGlzLnNlcmlhbGl6ZUhhc01hbnkocmVjb3JkLCBqc29uLCByZWxhdGlvbnNo
        aXApOwogICAgICB9CiAgICB9LCB0aGlzKTsKCiAgICByZXR1cm4ganNvbjsK
        ICB9LAoKICAvKioKICAgYHNlcmlhbGl6ZUF0dHJpYnV0ZWAgY2FuIGJlIHVz
        ZWQgdG8gY3VzdG9taXplIGhvdyBgRFMuYXR0cmAKICAgcHJvcGVydGllcyBh
        cmUgc2VyaWFsaXplZAoKICAgRm9yIGV4YW1wbGUgaWYgeW91IHdhbnRlZCB0
        byBlbnN1cmUgYWxsIHlvdSBhdHRyaWJ1dGVzIHdlcmUgYWx3YXlzCiAgIHNl
        cmlhbGl6ZWQgYXMgcHJvcGVydGllcyBvbiBhbiBgYXR0cmlidXRlc2Agb2Jq
        ZWN0IHlvdSBjb3VsZAogICB3cml0ZToKCiAgIGBgYGphdmFzY3JpcHQKICAg
        QXBwLkFwcGxpY2F0aW9uU2VyaWFsaXplciA9IERTLkpTT05TZXJpYWxpemVy
        LmV4dGVuZCh7CiAgICAgc2VyaWFsaXplQXR0cmlidXRlOiBmdW5jdGlvbihy
        ZWNvcmQsIGpzb24sIGtleSwgYXR0cmlidXRlcykgewogICAgICAganNvbi5h
        dHRyaWJ1dGVzID0ganNvbi5hdHRyaWJ1dGVzIHx8IHt9OwogICAgICAgdGhp
        cy5fc3VwZXIocmVjb3JkLCBqc29uLmF0dHJpYnV0ZXMsIGtleSwgYXR0cmli
        dXRlcyk7CiAgICAgfQogICB9KTsKICAgYGBgCgogICBAbWV0aG9kIHNlcmlh
        bGl6ZUF0dHJpYnV0ZQogICBAcGFyYW0ge0RTLk1vZGVsfSByZWNvcmQKICAg
        QHBhcmFtIHtPYmplY3R9IGpzb24KICAgQHBhcmFtIHtTdHJpbmd9IGtleQog
        ICBAcGFyYW0ge09iamVjdH0gYXR0cmlidXRlCiAgKi8KICBzZXJpYWxpemVB
        dHRyaWJ1dGU6IGZ1bmN0aW9uKHJlY29yZCwganNvbiwga2V5LCBhdHRyaWJ1
        dGUpIHsKICAgIHZhciBhdHRycyA9IGdldCh0aGlzLCAnYXR0cnMnKTsKICAg
        IHZhciB2YWx1ZSA9IGdldChyZWNvcmQsIGtleSksIHR5cGUgPSBhdHRyaWJ1
        dGUudHlwZTsKCiAgICBpZiAodHlwZSkgewogICAgICB2YXIgdHJhbnNmb3Jt
        ID0gdGhpcy50cmFuc2Zvcm1Gb3IodHlwZSk7CiAgICAgIHZhbHVlID0gdHJh
        bnNmb3JtLnNlcmlhbGl6ZSh2YWx1ZSk7CiAgICB9CgogICAgLy8gaWYgcHJv
        dmlkZWQsIHVzZSB0aGUgbWFwcGluZyBwcm92aWRlZCBieSBgYXR0cnNgIGlu
        CiAgICAvLyB0aGUgc2VyaWFsaXplcgogICAga2V5ID0gYXR0cnMgJiYgYXR0
        cnNba2V5XSB8fCAodGhpcy5rZXlGb3JBdHRyaWJ1dGUgPyB0aGlzLmtleUZv
        ckF0dHJpYnV0ZShrZXkpIDoga2V5KTsKCiAgICBqc29uW2tleV0gPSB2YWx1
        ZTsKICB9LAoKICAvKioKICAgYHNlcmlhbGl6ZUJlbG9uZ3NUb2AgY2FuIGJl
        IHVzZWQgdG8gY3VzdG9taXplIGhvdyBgRFMuYmVsb25nc1RvYAogICBwcm9w
        ZXJ0aWVzIGFyZSBzZXJpYWxpemVkLgoKICAgRXhhbXBsZQoKICAgYGBgamF2
        YXNjcmlwdAogICBBcHAuUG9zdFNlcmlhbGl6ZXIgPSBEUy5KU09OU2VyaWFs
        aXplci5leHRlbmQoewogICAgIHNlcmlhbGl6ZUJlbG9uZ3NUbzogZnVuY3Rp
        b24ocmVjb3JkLCBqc29uLCByZWxhdGlvbnNoaXApIHsKICAgICAgIHZhciBr
        ZXkgPSByZWxhdGlvbnNoaXAua2V5OwoKICAgICAgIHZhciBiZWxvbmdzVG8g
        PSBnZXQocmVjb3JkLCBrZXkpOwoKICAgICAgIGtleSA9IHRoaXMua2V5Rm9y
        UmVsYXRpb25zaGlwID8gdGhpcy5rZXlGb3JSZWxhdGlvbnNoaXAoa2V5LCAi
        YmVsb25nc1RvIikgOiBrZXk7CgogICAgICAganNvbltrZXldID0gRW1iZXIu
        aXNOb25lKGJlbG9uZ3NUbykgPyBiZWxvbmdzVG8gOiBiZWxvbmdzVG8udG9K
        U09OKCk7CiAgICAgfQogICB9KTsKICAgYGBgCgogICBAbWV0aG9kIHNlcmlh
        bGl6ZUJlbG9uZ3NUbwogICBAcGFyYW0ge0RTLk1vZGVsfSByZWNvcmQKICAg
        QHBhcmFtIHtPYmplY3R9IGpzb24KICAgQHBhcmFtIHtPYmplY3R9IHJlbGF0
        aW9uc2hpcAogICovCiAgc2VyaWFsaXplQmVsb25nc1RvOiBmdW5jdGlvbihy
        ZWNvcmQsIGpzb24sIHJlbGF0aW9uc2hpcCkgewogICAgdmFyIGtleSA9IHJl
        bGF0aW9uc2hpcC5rZXk7CgogICAgdmFyIGJlbG9uZ3NUbyA9IGdldChyZWNv
        cmQsIGtleSk7CgogICAga2V5ID0gdGhpcy5rZXlGb3JSZWxhdGlvbnNoaXAg
        PyB0aGlzLmtleUZvclJlbGF0aW9uc2hpcChrZXksICJiZWxvbmdzVG8iKSA6
        IGtleTsKCiAgICBpZiAoaXNOb25lKGJlbG9uZ3NUbykpIHsKICAgICAganNv
        bltrZXldID0gYmVsb25nc1RvOwogICAgfSBlbHNlIHsKICAgICAganNvbltr
        ZXldID0gZ2V0KGJlbG9uZ3NUbywgJ2lkJyk7CiAgICB9CgogICAgaWYgKHJl
        bGF0aW9uc2hpcC5vcHRpb25zLnBvbHltb3JwaGljKSB7CiAgICAgIHRoaXMu
        c2VyaWFsaXplUG9seW1vcnBoaWNUeXBlKHJlY29yZCwganNvbiwgcmVsYXRp
        b25zaGlwKTsKICAgIH0KICB9LAoKICAvKioKICAgYHNlcmlhbGl6ZUhhc01h
        bnlgIGNhbiBiZSB1c2VkIHRvIGN1c3RvbWl6ZSBob3cgYERTLmhhc01hbnlg
        CiAgIHByb3BlcnRpZXMgYXJlIHNlcmlhbGl6ZWQuCgogICBFeGFtcGxlCgog
        ICBgYGBqYXZhc2NyaXB0CiAgIEFwcC5Qb3N0U2VyaWFsaXplciA9IERTLkpT
        T05TZXJpYWxpemVyLmV4dGVuZCh7CiAgICAgc2VyaWFsaXplSGFzTWFueTog
        ZnVuY3Rpb24ocmVjb3JkLCBqc29uLCByZWxhdGlvbnNoaXApIHsKICAgICAg
        IHZhciBrZXkgPSByZWxhdGlvbnNoaXAua2V5OwogICAgICAgaWYgKGtleSA9
        PT0gJ2NvbW1lbnRzJykgewogICAgICAgICByZXR1cm47CiAgICAgICB9IGVs
        c2UgewogICAgICAgICB0aGlzLl9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVu
        dHMpOwogICAgICAgfQogICAgIH0KICAgfSk7CiAgIGBgYAoKICAgQG1ldGhv
        ZCBzZXJpYWxpemVIYXNNYW55CiAgIEBwYXJhbSB7RFMuTW9kZWx9IHJlY29y
        ZAogICBAcGFyYW0ge09iamVjdH0ganNvbgogICBAcGFyYW0ge09iamVjdH0g
        cmVsYXRpb25zaGlwCiAgKi8KICBzZXJpYWxpemVIYXNNYW55OiBmdW5jdGlv
        bihyZWNvcmQsIGpzb24sIHJlbGF0aW9uc2hpcCkgewogICAgdmFyIGtleSA9
        IHJlbGF0aW9uc2hpcC5rZXk7CgogICAgdmFyIHJlbGF0aW9uc2hpcFR5cGUg
        PSBEUy5SZWxhdGlvbnNoaXBDaGFuZ2UuZGV0ZXJtaW5lUmVsYXRpb25zaGlw
        VHlwZShyZWNvcmQuY29uc3RydWN0b3IsIHJlbGF0aW9uc2hpcCk7CgogICAg
        aWYgKHJlbGF0aW9uc2hpcFR5cGUgPT09ICdtYW55VG9Ob25lJyB8fCByZWxh
        dGlvbnNoaXBUeXBlID09PSAnbWFueVRvTWFueScpIHsKICAgICAganNvbltr
        ZXldID0gZ2V0KHJlY29yZCwga2V5KS5tYXBCeSgnaWQnKTsKICAgICAgLy8g
        VE9ETyBzdXBwb3J0IGZvciBwb2x5bW9ycGhpYyBtYW55VG9Ob25lIGFuZCBt
        YW55VG9NYW55IHJlbGF0aW9uc2hpcHMKICAgIH0KICB9LAoKICAvKioKICAg
        IFlvdSBjYW4gdXNlIHRoaXMgbWV0aG9kIHRvIGN1c3RvbWl6ZSBob3cgcG9s
        eW1vcnBoaWMgb2JqZWN0cyBhcmUKICAgIHNlcmlhbGl6ZWQuIE9iamVjdHMg
        YXJlIGNvbnNpZGVyZWQgdG8gYmUgcG9seW1vcnBoaWMgaWYKICAgIGB7cG9s
        eW1vcnBoaWM6IHRydWV9YCBpcyBwYXNzIGFzIHRoZSBzZWNvbmQgYXJndW1l
        bnQgdG8gdGhlCiAgICBgRFMuYmVsb25nc1RvYCBmdW5jdGlvbi4KCiAgICBF
        eGFtcGxlCgogICAgYGBgamF2YXNjcmlwdAogICAgQXBwLkNvbW1lbnRTZXJp
        YWxpemVyID0gRFMuSlNPTlNlcmlhbGl6ZXIuZXh0ZW5kKHsKICAgICAgc2Vy
        aWFsaXplUG9seW1vcnBoaWNUeXBlOiBmdW5jdGlvbihyZWNvcmQsIGpzb24s
        IHJlbGF0aW9uc2hpcCkgewogICAgICAgIHZhciBrZXkgPSByZWxhdGlvbnNo
        aXAua2V5LAogICAgICAgICAgICBiZWxvbmdzVG8gPSBnZXQocmVjb3JkLCBr
        ZXkpOwogICAgICAgIGtleSA9IHRoaXMua2V5Rm9yQXR0cmlidXRlID8gdGhp
        cy5rZXlGb3JBdHRyaWJ1dGUoa2V5KSA6IGtleTsKICAgICAgICBqc29uW2tl
        eSArICJfdHlwZSJdID0gYmVsb25nc1RvLmNvbnN0cnVjdG9yLnR5cGVLZXk7
        CiAgICAgIH0KICAgIH0pOwogICBgYGAKCiAgICBAbWV0aG9kIHNlcmlhbGl6
        ZVBvbHltb3JwaGljVHlwZQogICAgQHBhcmFtIHtEUy5Nb2RlbH0gcmVjb3Jk
        CiAgICBAcGFyYW0ge09iamVjdH0ganNvbgogICAgQHBhcmFtIHtPYmplY3R9
        IHJlbGF0aW9uc2hpcAogICovCiAgc2VyaWFsaXplUG9seW1vcnBoaWNUeXBl
        OiBFbWJlci5LLAoKICAvLyBFWFRSQUNUCgogIC8qKgogICAgVGhlIGBleHRy
        YWN0YCBtZXRob2QgaXMgdXNlZCB0byBkZXNlcmlhbGl6ZSBwYXlsb2FkIGRh
        dGEgZnJvbSB0aGUKICAgIHNlcnZlci4gQnkgZGVmYXVsdCB0aGUgYEpTT05T
        ZXJpYWxpemVyYCBkb2VzIG5vdCBwdXNoIHRoZSByZWNvcmRzCiAgICBpbnRv
        IHRoZSBzdG9yZS4gSG93ZXZlciByZWNvcmRzIHRoYXQgc3ViY2xhc3MgYEpT
        T05TZXJpYWxpemVyYAogICAgc3VjaCBhcyB0aGUgYFJFU1RTZXJpYWxpemVy
        YCBtYXkgcHVzaCByZWNvcmRzIGludG8gdGhlIHN0b3JlIGFzCiAgICBwYXJ0
        IG9mIHRoZSBleHRyYWN0IGNhbGwuCgogICAgVGhpcyBtZXRob2QgZGVsZWdh
        dGVzIHRvIGEgbW9yZSBzcGVjaWZpYyBleHRyYWN0IG1ldGhvZCBiYXNlZCBv
        bgogICAgdGhlIGByZXF1ZXN0VHlwZWAuCgogICAgRXhhbXBsZQoKICAgIGBg
        YGphdmFzY3JpcHQKICAgIHZhciBnZXQgPSBFbWJlci5nZXQ7CiAgICBzb2Nr
        ZXQub24oJ21lc3NhZ2UnLCBmdW5jdGlvbihtZXNzYWdlKSB7CiAgICAgIHZh
        ciBtb2RlbE5hbWUgPSBtZXNzYWdlLm1vZGVsOwogICAgICB2YXIgZGF0YSA9
        IG1lc3NhZ2UuZGF0YTsKICAgICAgdmFyIHR5cGUgPSBzdG9yZS5tb2RlbEZv
        cihtb2RlbE5hbWUpOwogICAgICB2YXIgc2VyaWFsaXplciA9IHN0b3JlLnNl
        cmlhbGl6ZXJGb3IodHlwZS50eXBlS2V5KTsKICAgICAgdmFyIHJlY29yZCA9
        IHNlcmlhbGl6ZXIuZXh0cmFjdChzdG9yZSwgdHlwZSwgZGF0YSwgZ2V0KGRh
        dGEsICdpZCcpLCAnc2luZ2xlJyk7CiAgICAgIHN0b3JlLnB1c2gobW9kZWxO
        YW1lLCByZWNvcmQpOwogICAgfSk7CiAgICBgYGAKCiAgICBAbWV0aG9kIGV4
        dHJhY3QKICAgIEBwYXJhbSB7RFMuU3RvcmV9IHN0b3JlCiAgICBAcGFyYW0g
        e3N1YmNsYXNzIG9mIERTLk1vZGVsfSB0eXBlCiAgICBAcGFyYW0ge09iamVj
        dH0gcGF5bG9hZAogICAgQHBhcmFtIHtTdHJpbmcgb3IgTnVtYmVyfSBpZAog
        ICAgQHBhcmFtIHtTdHJpbmd9IHJlcXVlc3RUeXBlCiAgICBAcmV0dXJuIHtP
        YmplY3R9IGpzb24gVGhlIGRlc2VyaWFsaXplZCBwYXlsb2FkCiAgKi8KICBl
        eHRyYWN0OiBmdW5jdGlvbihzdG9yZSwgdHlwZSwgcGF5bG9hZCwgaWQsIHJl
        cXVlc3RUeXBlKSB7CiAgICB0aGlzLmV4dHJhY3RNZXRhKHN0b3JlLCB0eXBl
        LCBwYXlsb2FkKTsKCiAgICB2YXIgc3BlY2lmaWNFeHRyYWN0ID0gImV4dHJh
        Y3QiICsgcmVxdWVzdFR5cGUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBy
        ZXF1ZXN0VHlwZS5zdWJzdHIoMSk7CiAgICByZXR1cm4gdGhpc1tzcGVjaWZp
        Y0V4dHJhY3RdKHN0b3JlLCB0eXBlLCBwYXlsb2FkLCBpZCwgcmVxdWVzdFR5
        cGUpOwogIH0sCgogIC8qKgogICAgYGV4dHJhY3RGaW5kQWxsYCBpcyBhIGhv
        b2sgaW50byB0aGUgZXh0cmFjdCBtZXRob2QgdXNlZCB3aGVuIGEKICAgIGNh
        bGwgaXMgbWFkZSB0byBgRFMuU3RvcmUjZmluZEFsbGAuIEJ5IGRlZmF1bHQg
        dGhpcyBtZXRob2QgaXMgYW4KICAgIGFsaWFzIGZvciBbZXh0cmFjdEFycmF5
        XSgjbWV0aG9kX2V4dHJhY3RBcnJheSkuCgogICAgQG1ldGhvZCBleHRyYWN0
        RmluZEFsbAogICAgQHBhcmFtIHtEUy5TdG9yZX0gc3RvcmUKICAgIEBwYXJh
        bSB7c3ViY2xhc3Mgb2YgRFMuTW9kZWx9IHR5cGUKICAgIEBwYXJhbSB7T2Jq
        ZWN0fSBwYXlsb2FkCiAgICBAcmV0dXJuIHtBcnJheX0gYXJyYXkgQW4gYXJy
        YXkgb2YgZGVzZXJpYWxpemVkIG9iamVjdHMKICAqLwogIGV4dHJhY3RGaW5k
        QWxsOiBhbGlhc01ldGhvZCgnZXh0cmFjdEFycmF5JyksCiAgLyoqCiAgICBg
        ZXh0cmFjdEZpbmRRdWVyeWAgaXMgYSBob29rIGludG8gdGhlIGV4dHJhY3Qg
        bWV0aG9kIHVzZWQgd2hlbiBhCiAgICBjYWxsIGlzIG1hZGUgdG8gYERTLlN0
        b3JlI2ZpbmRRdWVyeWAuIEJ5IGRlZmF1bHQgdGhpcyBtZXRob2QgaXMgYW4K
        ICAgIGFsaWFzIGZvciBbZXh0cmFjdEFycmF5XSgjbWV0aG9kX2V4dHJhY3RB
        cnJheSkuCgogICAgQG1ldGhvZCBleHRyYWN0RmluZFF1ZXJ5CiAgICBAcGFy
        YW0ge0RTLlN0b3JlfSBzdG9yZQogICAgQHBhcmFtIHtzdWJjbGFzcyBvZiBE
        Uy5Nb2RlbH0gdHlwZQogICAgQHBhcmFtIHtPYmplY3R9IHBheWxvYWQKICAg
        IEByZXR1cm4ge0FycmF5fSBhcnJheSBBbiBhcnJheSBvZiBkZXNlcmlhbGl6
        ZWQgb2JqZWN0cwogICovCiAgZXh0cmFjdEZpbmRRdWVyeTogYWxpYXNNZXRo
        b2QoJ2V4dHJhY3RBcnJheScpLAogIC8qKgogICAgYGV4dHJhY3RGaW5kTWFu
        eWAgaXMgYSBob29rIGludG8gdGhlIGV4dHJhY3QgbWV0aG9kIHVzZWQgd2hl
        biBhCiAgICBjYWxsIGlzIG1hZGUgdG8gYERTLlN0b3JlI2ZpbmRNYW55YC4g
        QnkgZGVmYXVsdCB0aGlzIG1ldGhvZCBpcwogICAgYWxpYXMgZm9yIFtleHRy
        YWN0QXJyYXldKCNtZXRob2RfZXh0cmFjdEFycmF5KS4KCiAgICBAbWV0aG9k
        IGV4dHJhY3RGaW5kTWFueQogICAgQHBhcmFtIHtEUy5TdG9yZX0gc3RvcmUK
        ICAgIEBwYXJhbSB7c3ViY2xhc3Mgb2YgRFMuTW9kZWx9IHR5cGUKICAgIEBw
        YXJhbSB7T2JqZWN0fSBwYXlsb2FkCiAgICBAcmV0dXJuIHtBcnJheX0gYXJy
        YXkgQW4gYXJyYXkgb2YgZGVzZXJpYWxpemVkIG9iamVjdHMKICAqLwogIGV4
        dHJhY3RGaW5kTWFueTogYWxpYXNNZXRob2QoJ2V4dHJhY3RBcnJheScpLAog
        IC8qKgogICAgYGV4dHJhY3RGaW5kSGFzTWFueWAgaXMgYSBob29rIGludG8g
        dGhlIGV4dHJhY3QgbWV0aG9kIHVzZWQgd2hlbiBhCiAgICBjYWxsIGlzIG1h
        ZGUgdG8gYERTLlN0b3JlI2ZpbmRIYXNNYW55YC4gQnkgZGVmYXVsdCB0aGlz
        IG1ldGhvZCBpcwogICAgYWxpYXMgZm9yIFtleHRyYWN0QXJyYXldKCNtZXRo
        b2RfZXh0cmFjdEFycmF5KS4KCiAgICBAbWV0aG9kIGV4dHJhY3RGaW5kSGFz
        TWFueQogICAgQHBhcmFtIHtEUy5TdG9yZX0gc3RvcmUKICAgIEBwYXJhbSB7
        c3ViY2xhc3Mgb2YgRFMuTW9kZWx9IHR5cGUKICAgIEBwYXJhbSB7T2JqZWN0
        fSBwYXlsb2FkCiAgICBAcmV0dXJuIHtBcnJheX0gYXJyYXkgQW4gYXJyYXkg
        b2YgZGVzZXJpYWxpemVkIG9iamVjdHMKICAqLwogIGV4dHJhY3RGaW5kSGFz
        TWFueTogYWxpYXNNZXRob2QoJ2V4dHJhY3RBcnJheScpLAoKICAvKioKICAg
        IGBleHRyYWN0Q3JlYXRlUmVjb3JkYCBpcyBhIGhvb2sgaW50byB0aGUgZXh0
        cmFjdCBtZXRob2QgdXNlZCB3aGVuIGEKICAgIGNhbGwgaXMgbWFkZSB0byBg
        RFMuU3RvcmUjY3JlYXRlUmVjb3JkYC4gQnkgZGVmYXVsdCB0aGlzIG1ldGhv
        ZCBpcwogICAgYWxpYXMgZm9yIFtleHRyYWN0U2F2ZV0oI21ldGhvZF9leHRy
        YWN0U2F2ZSkuCgogICAgQG1ldGhvZCBleHRyYWN0Q3JlYXRlUmVjb3JkCiAg
        ICBAcGFyYW0ge0RTLlN0b3JlfSBzdG9yZQogICAgQHBhcmFtIHtzdWJjbGFz
        cyBvZiBEUy5Nb2RlbH0gdHlwZQogICAgQHBhcmFtIHtPYmplY3R9IHBheWxv
        YWQKICAgIEByZXR1cm4ge09iamVjdH0ganNvbiBUaGUgZGVzZXJpYWxpemVk
        IHBheWxvYWQKICAqLwogIGV4dHJhY3RDcmVhdGVSZWNvcmQ6IGFsaWFzTWV0
        aG9kKCdleHRyYWN0U2F2ZScpLAogIC8qKgogICAgYGV4dHJhY3RVcGRhdGVS
        ZWNvcmRgIGlzIGEgaG9vayBpbnRvIHRoZSBleHRyYWN0IG1ldGhvZCB1c2Vk
        IHdoZW4KICAgIGEgY2FsbCBpcyBtYWRlIHRvIGBEUy5TdG9yZSN1cGRhdGVg
        LiBCeSBkZWZhdWx0IHRoaXMgbWV0aG9kIGlzIGFsaWFzCiAgICBmb3IgW2V4
        dHJhY3RTYXZlXSgjbWV0aG9kX2V4dHJhY3RTYXZlKS4KCiAgICBAbWV0aG9k
        IGV4dHJhY3RVcGRhdGVSZWNvcmQKICAgIEBwYXJhbSB7RFMuU3RvcmV9IHN0
        b3JlCiAgICBAcGFyYW0ge3N1YmNsYXNzIG9mIERTLk1vZGVsfSB0eXBlCiAg
        ICBAcGFyYW0ge09iamVjdH0gcGF5bG9hZAogICAgQHJldHVybiB7T2JqZWN0
        fSBqc29uIFRoZSBkZXNlcmlhbGl6ZWQgcGF5bG9hZAogICovCiAgZXh0cmFj
        dFVwZGF0ZVJlY29yZDogYWxpYXNNZXRob2QoJ2V4dHJhY3RTYXZlJyksCiAg
        LyoqCiAgICBgZXh0cmFjdERlbGV0ZVJlY29yZGAgaXMgYSBob29rIGludG8g
        dGhlIGV4dHJhY3QgbWV0aG9kIHVzZWQgd2hlbgogICAgYSBjYWxsIGlzIG1h
        ZGUgdG8gYERTLlN0b3JlI2RlbGV0ZVJlY29yZGAuIEJ5IGRlZmF1bHQgdGhp
        cyBtZXRob2QgaXMKICAgIGFsaWFzIGZvciBbZXh0cmFjdFNhdmVdKCNtZXRo
        b2RfZXh0cmFjdFNhdmUpLgoKICAgIEBtZXRob2QgZXh0cmFjdERlbGV0ZVJl
        Y29yZAogICAgQHBhcmFtIHtEUy5TdG9yZX0gc3RvcmUKICAgIEBwYXJhbSB7
        c3ViY2xhc3Mgb2YgRFMuTW9kZWx9IHR5cGUKICAgIEBwYXJhbSB7T2JqZWN0
        fSBwYXlsb2FkCiAgICBAcmV0dXJuIHtPYmplY3R9IGpzb24gVGhlIGRlc2Vy
        aWFsaXplZCBwYXlsb2FkCiAgKi8KICBleHRyYWN0RGVsZXRlUmVjb3JkOiBh
        bGlhc01ldGhvZCgnZXh0cmFjdFNhdmUnKSwKCiAgLyoqCiAgICBgZXh0cmFj
        dEZpbmRgIGlzIGEgaG9vayBpbnRvIHRoZSBleHRyYWN0IG1ldGhvZCB1c2Vk
        IHdoZW4KICAgIGEgY2FsbCBpcyBtYWRlIHRvIGBEUy5TdG9yZSNmaW5kYC4g
        QnkgZGVmYXVsdCB0aGlzIG1ldGhvZCBpcwogICAgYWxpYXMgZm9yIFtleHRy
        YWN0U2luZ2xlXSgjbWV0aG9kX2V4dHJhY3RTaW5nbGUpLgoKICAgIEBtZXRo
        b2QgZXh0cmFjdEZpbmQKICAgIEBwYXJhbSB7RFMuU3RvcmV9IHN0b3JlCiAg
        ICBAcGFyYW0ge3N1YmNsYXNzIG9mIERTLk1vZGVsfSB0eXBlCiAgICBAcGFy
        YW0ge09iamVjdH0gcGF5bG9hZAogICAgQHJldHVybiB7T2JqZWN0fSBqc29u
        IFRoZSBkZXNlcmlhbGl6ZWQgcGF5bG9hZAogICovCiAgZXh0cmFjdEZpbmQ6
        IGFsaWFzTWV0aG9kKCdleHRyYWN0U2luZ2xlJyksCiAgLyoqCiAgICBgZXh0
        cmFjdEZpbmRCZWxvbmdzVG9gIGlzIGEgaG9vayBpbnRvIHRoZSBleHRyYWN0
        IG1ldGhvZCB1c2VkIHdoZW4KICAgIGEgY2FsbCBpcyBtYWRlIHRvIGBEUy5T
        dG9yZSNmaW5kQmVsb25nc1RvYC4gQnkgZGVmYXVsdCB0aGlzIG1ldGhvZCBp
        cwogICAgYWxpYXMgZm9yIFtleHRyYWN0U2luZ2xlXSgjbWV0aG9kX2V4dHJh
        Y3RTaW5nbGUpLgoKICAgIEBtZXRob2QgZXh0cmFjdEZpbmRCZWxvbmdzVG8K
        ICAgIEBwYXJhbSB7RFMuU3RvcmV9IHN0b3JlCiAgICBAcGFyYW0ge3N1YmNs
        YXNzIG9mIERTLk1vZGVsfSB0eXBlCiAgICBAcGFyYW0ge09iamVjdH0gcGF5
        bG9hZAogICAgQHJldHVybiB7T2JqZWN0fSBqc29uIFRoZSBkZXNlcmlhbGl6
        ZWQgcGF5bG9hZAogICovCiAgZXh0cmFjdEZpbmRCZWxvbmdzVG86IGFsaWFz
        TWV0aG9kKCdleHRyYWN0U2luZ2xlJyksCiAgLyoqCiAgICBgZXh0cmFjdFNh
        dmVgIGlzIGEgaG9vayBpbnRvIHRoZSBleHRyYWN0IG1ldGhvZCB1c2VkIHdo
        ZW4gYSBjYWxsCiAgICBpcyBtYWRlIHRvIGBEUy5Nb2RlbCNzYXZlYC4gQnkg
        ZGVmYXVsdCB0aGlzIG1ldGhvZCBpcyBhbGlhcwogICAgZm9yIFtleHRyYWN0
        U2luZ2xlXSgjbWV0aG9kX2V4dHJhY3RTaW5nbGUpLgoKICAgIEBtZXRob2Qg
        ZXh0cmFjdFNhdmUKICAgIEBwYXJhbSB7RFMuU3RvcmV9IHN0b3JlCiAgICBA
        cGFyYW0ge3N1YmNsYXNzIG9mIERTLk1vZGVsfSB0eXBlCiAgICBAcGFyYW0g
        e09iamVjdH0gcGF5bG9hZAogICAgQHJldHVybiB7T2JqZWN0fSBqc29uIFRo
        ZSBkZXNlcmlhbGl6ZWQgcGF5bG9hZAogICovCiAgZXh0cmFjdFNhdmU6IGFs
        aWFzTWV0aG9kKCdleHRyYWN0U2luZ2xlJyksCgogIC8qKgogICAgYGV4dHJh
        Y3RTaW5nbGVgIGlzIHVzZWQgdG8gZGVzZXJpYWxpemUgYSBzaW5nbGUgcmVj
        b3JkIHJldHVybmVkCiAgICBmcm9tIHRoZSBhZGFwdGVyLgoKICAgIEV4YW1w
        bGUKCiAgICBgYGBqYXZhc2NyaXB0CiAgICBBcHAuUG9zdFNlcmlhbGl6ZXIg
        PSBEUy5KU09OU2VyaWFsaXplci5leHRlbmQoewogICAgICBleHRyYWN0U2lu
        Z2xlOiBmdW5jdGlvbihzdG9yZSwgdHlwZSwgcGF5bG9hZCkgewogICAgICAg
        IHBheWxvYWQuY29tbWVudHMgPSBwYXlsb2FkLl9lbWJlZGRlZC5jb21tZW50
        OwogICAgICAgIGRlbGV0ZSBwYXlsb2FkLl9lbWJlZGRlZDsKCiAgICAgICAg
        cmV0dXJuIHRoaXMuX3N1cGVyKHN0b3JlLCB0eXBlLCBwYXlsb2FkKTsKICAg
        ICAgfSwKICAgIH0pOwogICAgYGBgCgogICAgQG1ldGhvZCBleHRyYWN0U2lu
        Z2xlCiAgICBAcGFyYW0ge0RTLlN0b3JlfSBzdG9yZQogICAgQHBhcmFtIHtz
        dWJjbGFzcyBvZiBEUy5Nb2RlbH0gdHlwZQogICAgQHBhcmFtIHtPYmplY3R9
        IHBheWxvYWQKICAgIEByZXR1cm4ge09iamVjdH0ganNvbiBUaGUgZGVzZXJp
        YWxpemVkIHBheWxvYWQKICAqLwogIGV4dHJhY3RTaW5nbGU6IGZ1bmN0aW9u
        KHN0b3JlLCB0eXBlLCBwYXlsb2FkKSB7CiAgICByZXR1cm4gdGhpcy5ub3Jt
        YWxpemUodHlwZSwgcGF5bG9hZCk7CiAgfSwKCiAgLyoqCiAgICBgZXh0cmFj
        dEFycmF5YCBpcyB1c2VkIHRvIGRlc2VyaWFsaXplIGFuIGFycmF5IG9mIHJl
        Y29yZHMKICAgIHJldHVybmVkIGZyb20gdGhlIGFkYXB0ZXIuCgogICAgRXhh
        bXBsZQoKICAgIGBgYGphdmFzY3JpcHQKICAgIEFwcC5Qb3N0U2VyaWFsaXpl
        ciA9IERTLkpTT05TZXJpYWxpemVyLmV4dGVuZCh7CiAgICAgIGV4dHJhY3RB
        cnJheTogZnVuY3Rpb24oc3RvcmUsIHR5cGUsIHBheWxvYWQpIHsKICAgICAg
        ICByZXR1cm4gcGF5bG9hZC5tYXAoZnVuY3Rpb24oanNvbikgewogICAgICAg
        ICAgcmV0dXJuIHRoaXMuZXh0cmFjdFNpbmdsZShqc29uKTsKICAgICAgICB9
        LCB0aGlzKTsKICAgICAgfQogICAgfSk7CiAgICBgYGAKCiAgICBAbWV0aG9k
        IGV4dHJhY3RBcnJheQogICAgQHBhcmFtIHtEUy5TdG9yZX0gc3RvcmUKICAg
        IEBwYXJhbSB7c3ViY2xhc3Mgb2YgRFMuTW9kZWx9IHR5cGUKICAgIEBwYXJh
        bSB7T2JqZWN0fSBwYXlsb2FkCiAgICBAcmV0dXJuIHtBcnJheX0gYXJyYXkg
        QW4gYXJyYXkgb2YgZGVzZXJpYWxpemVkIG9iamVjdHMKICAqLwogIGV4dHJh
        Y3RBcnJheTogZnVuY3Rpb24oc3RvcmUsIHR5cGUsIHBheWxvYWQpIHsKICAg
        IHJldHVybiB0aGlzLm5vcm1hbGl6ZSh0eXBlLCBwYXlsb2FkKTsKICB9LAoK
        ICAvKioKICAgIGBleHRyYWN0TWV0YWAgaXMgdXNlZCB0byBkZXNlcmlhbGl6
        ZSBhbnkgbWV0YSBpbmZvcm1hdGlvbiBpbiB0aGUKICAgIGFkYXB0ZXIgcGF5
        bG9hZC4gQnkgZGVmYXVsdCBFbWJlciBEYXRhIGV4cGVjdHMgbWV0YSBpbmZv
        cm1hdGlvbiB0bwogICAgYmUgbG9jYXRlZCBvbiB0aGUgYG1ldGFgIHByb3Bl
        cnR5IG9mIHRoZSBwYXlsb2FkIG9iamVjdC4KCiAgICBFeGFtcGxlCgogICAg
        YGBgamF2YXNjcmlwdAogICAgQXBwLlBvc3RTZXJpYWxpemVyID0gRFMuSlNP
        TlNlcmlhbGl6ZXIuZXh0ZW5kKHsKICAgICAgZXh0cmFjdE1ldGE6IGZ1bmN0
        aW9uKHN0b3JlLCB0eXBlLCBwYXlsb2FkKSB7CiAgICAgICAgaWYgKHBheWxv
        YWQgJiYgcGF5bG9hZC5fcGFnaW5hdGlvbikgewogICAgICAgICAgc3RvcmUu
        bWV0YUZvclR5cGUodHlwZSwgcGF5bG9hZC5fcGFnaW5hdGlvbik7CiAgICAg
        ICAgICBkZWxldGUgcGF5bG9hZC5fcGFnaW5hdGlvbjsKICAgICAgICB9CiAg
        ICAgIH0KICAgIH0pOwogICAgYGBgCgogICAgQG1ldGhvZCBleHRyYWN0TWV0
        YQogICAgQHBhcmFtIHtEUy5TdG9yZX0gc3RvcmUKICAgIEBwYXJhbSB7c3Vi
        Y2xhc3Mgb2YgRFMuTW9kZWx9IHR5cGUKICAgIEBwYXJhbSB7T2JqZWN0fSBw
        YXlsb2FkCiAgKi8KICBleHRyYWN0TWV0YTogZnVuY3Rpb24oc3RvcmUsIHR5
        cGUsIHBheWxvYWQpIHsKICAgIGlmIChwYXlsb2FkICYmIHBheWxvYWQubWV0
        YSkgewogICAgICBzdG9yZS5tZXRhRm9yVHlwZSh0eXBlLCBwYXlsb2FkLm1l
        dGEpOwogICAgICBkZWxldGUgcGF5bG9hZC5tZXRhOwogICAgfQogIH0sCgog
        IC8qKgogICBga2V5Rm9yQXR0cmlidXRlYCBjYW4gYmUgdXNlZCB0byBkZWZp
        bmUgcnVsZXMgZm9yIGhvdyB0byBjb252ZXJ0IGFuCiAgIGF0dHJpYnV0ZSBu
        YW1lIGluIHlvdXIgbW9kZWwgdG8gYSBrZXkgaW4geW91ciBKU09OLgoKICAg
        RXhhbXBsZQoKICAgYGBgamF2YXNjcmlwdAogICBBcHAuQXBwbGljYXRpb25T
        ZXJpYWxpemVyID0gRFMuUkVTVFNlcmlhbGl6ZXIuZXh0ZW5kKHsKICAgICBr
        ZXlGb3JBdHRyaWJ1dGU6IGZ1bmN0aW9uKGF0dHIpIHsKICAgICAgIHJldHVy
        biBFbWJlci5TdHJpbmcudW5kZXJzY29yZShhdHRyKS50b1VwcGVyQ2FzZSgp
        OwogICAgIH0KICAgfSk7CiAgIGBgYAoKICAgQG1ldGhvZCBrZXlGb3JBdHRy
        aWJ1dGUKICAgQHBhcmFtIHtTdHJpbmd9IGtleQogICBAcmV0dXJuIHtTdHJp
        bmd9IG5vcm1hbGl6ZWQga2V5CiAgKi8KCgogIC8qKgogICBga2V5Rm9yUmVs
        YXRpb25zaGlwYCBjYW4gYmUgdXNlZCB0byBkZWZpbmUgYSBjdXN0b20ga2V5
        IHdoZW4KICAgc2VyaWFsaXppbmcgcmVsYXRpb25zaGlwIHByb3BlcnRpZXMu
        IEJ5IGRlZmF1bHQgYEpTT05TZXJpYWxpemVyYAogICBkb2VzIG5vdCBwcm92
        aWRlIGFuIGltcGxlbWVudGF0aW9uIG9mIHRoaXMgbWV0aG9kLgoKICAgRXhh
        bXBsZQoKICAgIGBgYGphdmFzY3JpcHQKICAgIEFwcC5Qb3N0U2VyaWFsaXpl
        ciA9IERTLkpTT05TZXJpYWxpemVyLmV4dGVuZCh7CiAgICAgIGtleUZvclJl
        bGF0aW9uc2hpcDogZnVuY3Rpb24oa2V5LCByZWxhdGlvbnNoaXApIHsKICAg
        ICAgICAgcmV0dXJuICdyZWxfJyArIEVtYmVyLlN0cmluZy51bmRlcnNjb3Jl
        KGtleSk7CiAgICAgIH0KICAgIH0pOwogICAgYGBgCgogICBAbWV0aG9kIGtl
        eUZvclJlbGF0aW9uc2hpcAogICBAcGFyYW0ge1N0cmluZ30ga2V5CiAgIEBw
        YXJhbSB7U3RyaW5nfSByZWxhdGlvbnNoaXAgdHlwZQogICBAcmV0dXJuIHtT
        dHJpbmd9IG5vcm1hbGl6ZWQga2V5CiAgKi8KCiAgLy8gSEVMUEVSUwoKICAv
        KioKICAgQG1ldGhvZCB0cmFuc2Zvcm1Gb3IKICAgQHByaXZhdGUKICAgQHBh
        cmFtIHtTdHJpbmd9IGF0dHJpYnV0ZVR5cGUKICAgQHBhcmFtIHtCb29sZWFu
        fSBza2lwQXNzZXJ0aW9uCiAgIEByZXR1cm4ge0RTLlRyYW5zZm9ybX0gdHJh
        bnNmb3JtCiAgKi8KICB0cmFuc2Zvcm1Gb3I6IGZ1bmN0aW9uKGF0dHJpYnV0
        ZVR5cGUsIHNraXBBc3NlcnRpb24pIHsKICAgIHZhciB0cmFuc2Zvcm0gPSB0
        aGlzLmNvbnRhaW5lci5sb29rdXAoJ3RyYW5zZm9ybTonICsgYXR0cmlidXRl
        VHlwZSk7CiAgICBFbWJlci5hc3NlcnQoIlVuYWJsZSB0byBmaW5kIHRyYW5z
        Zm9ybSBmb3IgJyIgKyBhdHRyaWJ1dGVUeXBlICsgIiciLCBza2lwQXNzZXJ0
        aW9uIHx8ICEhdHJhbnNmb3JtKTsKICAgIHJldHVybiB0cmFuc2Zvcm07CiAg
        fQp9KTsKCn0pKCk7CgoKCihmdW5jdGlvbigpIHsKLyoqCiAgQG1vZHVsZSBl
        bWJlci1kYXRhCiovCnZhciBnZXQgPSBFbWJlci5nZXQsIGNhcGl0YWxpemUg
        PSBFbWJlci5TdHJpbmcuY2FwaXRhbGl6ZSwgdW5kZXJzY29yZSA9IEVtYmVy
        LlN0cmluZy51bmRlcnNjb3JlLCBEUyA9IHdpbmRvdy5EUyA7CgovKioKICBF
        eHRlbmQgYEVtYmVyLkRhdGFBZGFwdGVyYCB3aXRoIEVEIHNwZWNpZmljIGNv
        ZGUuCgogIEBjbGFzcyBEZWJ1Z0FkYXB0ZXIKICBAbmFtZXNwYWNlIERTCiAg
        QGV4dGVuZHMgRW1iZXIuRGF0YUFkYXB0ZXIKICBAcHJpdmF0ZQoqLwpEUy5E
        ZWJ1Z0FkYXB0ZXIgPSBFbWJlci5EYXRhQWRhcHRlci5leHRlbmQoewogIGdl
        dEZpbHRlcnM6IGZ1bmN0aW9uKCkgewogICAgcmV0dXJuIFsKICAgICAgeyBu
        YW1lOiAnaXNOZXcnLCBkZXNjOiAnTmV3JyB9LAogICAgICB7IG5hbWU6ICdp
        c01vZGlmaWVkJywgZGVzYzogJ01vZGlmaWVkJyB9LAogICAgICB7IG5hbWU6
        ICdpc0NsZWFuJywgZGVzYzogJ0NsZWFuJyB9CiAgICBdOwogIH0sCgogIGRl
        dGVjdDogZnVuY3Rpb24oa2xhc3MpIHsKICAgIHJldHVybiBrbGFzcyAhPT0g
        RFMuTW9kZWwgJiYgRFMuTW9kZWwuZGV0ZWN0KGtsYXNzKTsKICB9LAoKICBj
        b2x1bW5zRm9yVHlwZTogZnVuY3Rpb24odHlwZSkgewogICAgdmFyIGNvbHVt
        bnMgPSBbeyBuYW1lOiAnaWQnLCBkZXNjOiAnSWQnIH1dLCBjb3VudCA9IDAs
        IHNlbGYgPSB0aGlzOwogICAgZ2V0KHR5cGUsICdhdHRyaWJ1dGVzJykuZm9y
        RWFjaChmdW5jdGlvbihuYW1lLCBtZXRhKSB7CiAgICAgICAgaWYgKGNvdW50
        KysgPiBzZWxmLmF0dHJpYnV0ZUxpbWl0KSB7IHJldHVybiBmYWxzZTsgfQog
        ICAgICAgIHZhciBkZXNjID0gY2FwaXRhbGl6ZSh1bmRlcnNjb3JlKG5hbWUp
        LnJlcGxhY2UoJ18nLCAnICcpKTsKICAgICAgICBjb2x1bW5zLnB1c2goeyBu
        YW1lOiBuYW1lLCBkZXNjOiBkZXNjIH0pOwogICAgfSk7CiAgICByZXR1cm4g
        Y29sdW1uczsKICB9LAoKICBnZXRSZWNvcmRzOiBmdW5jdGlvbih0eXBlKSB7
        CiAgICByZXR1cm4gdGhpcy5nZXQoJ3N0b3JlJykuYWxsKHR5cGUpOwogIH0s
        CgogIGdldFJlY29yZENvbHVtblZhbHVlczogZnVuY3Rpb24ocmVjb3JkKSB7
        CiAgICB2YXIgc2VsZiA9IHRoaXMsIGNvdW50ID0gMCwKICAgICAgICBjb2x1
        bW5WYWx1ZXMgPSB7IGlkOiBnZXQocmVjb3JkLCAnaWQnKSB9OwoKICAgIHJl
        Y29yZC5lYWNoQXR0cmlidXRlKGZ1bmN0aW9uKGtleSkgewogICAgICBpZiAo
        Y291bnQrKyA+IHNlbGYuYXR0cmlidXRlTGltaXQpIHsKICAgICAgICByZXR1
        cm4gZmFsc2U7CiAgICAgIH0KICAgICAgdmFyIHZhbHVlID0gZ2V0KHJlY29y
        ZCwga2V5KTsKICAgICAgY29sdW1uVmFsdWVzW2tleV0gPSB2YWx1ZTsKICAg
        IH0pOwogICAgcmV0dXJuIGNvbHVtblZhbHVlczsKICB9LAoKICBnZXRSZWNv
        cmRLZXl3b3JkczogZnVuY3Rpb24ocmVjb3JkKSB7CiAgICB2YXIga2V5d29y
        ZHMgPSBbXSwga2V5cyA9IEVtYmVyLkEoWydpZCddKTsKICAgIHJlY29yZC5l
        YWNoQXR0cmlidXRlKGZ1bmN0aW9uKGtleSkgewogICAgICBrZXlzLnB1c2go
        a2V5KTsKICAgIH0pOwogICAga2V5cy5mb3JFYWNoKGZ1bmN0aW9uKGtleSkg
        ewogICAgICBrZXl3b3Jkcy5wdXNoKGdldChyZWNvcmQsIGtleSkpOwogICAg
        fSk7CiAgICByZXR1cm4ga2V5d29yZHM7CiAgfSwKCiAgZ2V0UmVjb3JkRmls
        dGVyVmFsdWVzOiBmdW5jdGlvbihyZWNvcmQpIHsKICAgIHJldHVybiB7CiAg
        ICAgIGlzTmV3OiByZWNvcmQuZ2V0KCdpc05ldycpLAogICAgICBpc01vZGlm
        aWVkOiByZWNvcmQuZ2V0KCdpc0RpcnR5JykgJiYgIXJlY29yZC5nZXQoJ2lz
        TmV3JyksCiAgICAgIGlzQ2xlYW46ICFyZWNvcmQuZ2V0KCdpc0RpcnR5JykK
        ICAgIH07CiAgfSwKCiAgZ2V0UmVjb3JkQ29sb3I6IGZ1bmN0aW9uKHJlY29y
        ZCkgewogICAgdmFyIGNvbG9yID0gJ2JsYWNrJzsKICAgIGlmIChyZWNvcmQu
        Z2V0KCdpc05ldycpKSB7CiAgICAgIGNvbG9yID0gJ2dyZWVuJzsKICAgIH0g
        ZWxzZSBpZiAocmVjb3JkLmdldCgnaXNEaXJ0eScpKSB7CiAgICAgIGNvbG9y
        ID0gJ2JsdWUnOwogICAgfQogICAgcmV0dXJuIGNvbG9yOwogIH0sCgogIG9i
        c2VydmVSZWNvcmQ6IGZ1bmN0aW9uKHJlY29yZCwgcmVjb3JkVXBkYXRlZCkg
        ewogICAgdmFyIHJlbGVhc2VNZXRob2RzID0gRW1iZXIuQSgpLCBzZWxmID0g
        dGhpcywKICAgICAgICBrZXlzVG9PYnNlcnZlID0gRW1iZXIuQShbJ2lkJywg
        J2lzTmV3JywgJ2lzRGlydHknXSk7CgogICAgcmVjb3JkLmVhY2hBdHRyaWJ1
        dGUoZnVuY3Rpb24oa2V5KSB7CiAgICAgIGtleXNUb09ic2VydmUucHVzaChr
        ZXkpOwogICAgfSk7CgogICAga2V5c1RvT2JzZXJ2ZS5mb3JFYWNoKGZ1bmN0
        aW9uKGtleSkgewogICAgICB2YXIgaGFuZGxlciA9IGZ1bmN0aW9uKCkgewog
        ICAgICAgIHJlY29yZFVwZGF0ZWQoc2VsZi53cmFwUmVjb3JkKHJlY29yZCkp
        OwogICAgICB9OwogICAgICBFbWJlci5hZGRPYnNlcnZlcihyZWNvcmQsIGtl
        eSwgaGFuZGxlcik7CiAgICAgIHJlbGVhc2VNZXRob2RzLnB1c2goZnVuY3Rp
        b24oKSB7CiAgICAgICAgRW1iZXIucmVtb3ZlT2JzZXJ2ZXIocmVjb3JkLCBr
        ZXksIGhhbmRsZXIpOwogICAgICB9KTsKICAgIH0pOwoKICAgIHZhciByZWxl
        YXNlID0gZnVuY3Rpb24oKSB7CiAgICAgIHJlbGVhc2VNZXRob2RzLmZvckVh
        Y2goZnVuY3Rpb24oZm4pIHsgZm4oKTsgfSApOwogICAgfTsKCiAgICByZXR1
        cm4gcmVsZWFzZTsKICB9Cgp9KTsKCn0pKCk7CgoKCihmdW5jdGlvbigpIHsK
        LyoqCiAgVGhlIGBEUy5UcmFuc2Zvcm1gIGNsYXNzIGlzIHVzZWQgdG8gc2Vy
        aWFsaXplIGFuZCBkZXNlcmlhbGl6ZSBtb2RlbAogIGF0dHJpYnV0ZXMgd2hl
        biB0aGV5IGFyZSBzYXZlZCBvciBsb2FkZWQgZnJvbSBhbgogIGFkYXB0ZXIu
        IFN1YmNsYXNzaW5nIGBEUy5UcmFuc2Zvcm1gIGlzIHVzZWZ1bCBmb3IgY3Jl
        YXRpbmcgY3VzdG9tCiAgYXR0cmlidXRlcy4gQWxsIHN1YmNsYXNzZXMgb2Yg
        YERTLlRyYW5zZm9ybWAgbXVzdCBpbXBsZW1lbnQgYQogIGBzZXJpYWxpemVg
        IGFuZCBhIGBkZXNlcmlhbGl6ZWAgbWV0aG9kLgoKICBFeGFtcGxlCgogIGBg
        YGphdmFzY3JpcHQKICBBcHAuUmF3VHJhbnNmb3JtID0gRFMuVHJhbnNmb3Jt
        LmV4dGVuZCh7CiAgICBkZXNlcmlhbGl6ZTogZnVuY3Rpb24oc2VyaWFsaXpl
        ZCkgewogICAgICByZXR1cm4gc2VyaWFsaXplZDsKICAgIH0sCiAgICBzZXJp
        YWxpemU6IGZ1bmN0aW9uKGRlc2VyaWFsaXplZCkgewogICAgICByZXR1cm4g
        ZGVzZXJpYWxpemVkOwogICAgfQogIH0pOwogIGBgYAoKICBVc2FnZQoKICBg
        YGBqYXZhc2NyaXB0CiAgdmFyIGF0dHIgPSBEUy5hdHRyOwogIEFwcC5SZXF1
        aXJlbWVudCA9IERTLk1vZGVsLmV4dGVuZCh7CiAgICBuYW1lOiBhdHRyKCdz
        dHJpbmcnKSwKICAgIG9wdGlvbnNBcnJheTogYXR0cigncmF3JykKICB9KTsK
        ICBgYGAKCiAgQGNsYXNzIFRyYW5zZm9ybQogIEBuYW1lc3BhY2UgRFMKICov
        CkRTLlRyYW5zZm9ybSA9IEVtYmVyLk9iamVjdC5leHRlbmQoewogIC8qKgog
        ICAgV2hlbiBnaXZlbiBhIGRlc2VyaWFsaXplZCB2YWx1ZSBmcm9tIGEgcmVj
        b3JkIGF0dHJpYnV0ZSB0aGlzCiAgICBtZXRob2QgbXVzdCByZXR1cm4gdGhl
        IHNlcmlhbGl6ZWQgdmFsdWUuCgogICAgRXhhbXBsZQoKICAgIGBgYGphdmFz
        Y3JpcHQKICAgIHNlcmlhbGl6ZTogZnVuY3Rpb24oZGVzZXJpYWxpemVkKSB7
        CiAgICAgIHJldHVybiBFbWJlci5pc0VtcHR5KGRlc2VyaWFsaXplZCkgPyBu
        dWxsIDogTnVtYmVyKGRlc2VyaWFsaXplZCk7CiAgICB9CiAgICBgYGAKCiAg
        ICBAbWV0aG9kIHNlcmlhbGl6ZQogICAgQHBhcmFtIGRlc2VyaWFsaXplZCBU
        aGUgZGVzZXJpYWxpemVkIHZhbHVlCiAgICBAcmV0dXJuIFRoZSBzZXJpYWxp
        emVkIHZhbHVlCiAgKi8KICBzZXJpYWxpemU6IEVtYmVyLnJlcXVpcmVkKCks
        CgogIC8qKgogICAgV2hlbiBnaXZlbiBhIHNlcmlhbGl6ZSB2YWx1ZSBmcm9t
        IGEgSlNPTiBvYmplY3QgdGhpcyBtZXRob2QgbXVzdAogICAgcmV0dXJuIHRo
        ZSBkZXNlcmlhbGl6ZWQgdmFsdWUgZm9yIHRoZSByZWNvcmQgYXR0cmlidXRl
        LgoKICAgIEV4YW1wbGUKCiAgICBgYGBqYXZhc2NyaXB0CiAgICBkZXNlcmlh
        bGl6ZTogZnVuY3Rpb24oc2VyaWFsaXplZCkgewogICAgICByZXR1cm4gZW1w
        dHkoc2VyaWFsaXplZCkgPyBudWxsIDogTnVtYmVyKHNlcmlhbGl6ZWQpOwog
        ICAgfQogICAgYGBgCgogICAgQG1ldGhvZCBkZXNlcmlhbGl6ZQogICAgQHBh
        cmFtIHNlcmlhbGl6ZWQgVGhlIHNlcmlhbGl6ZWQgdmFsdWUKICAgIEByZXR1
        cm4gVGhlIGRlc2VyaWFsaXplZCB2YWx1ZQogICovCiAgZGVzZXJpYWxpemU6
        IEVtYmVyLnJlcXVpcmVkKCkKCn0pOwoKfSkoKTsKCgoKKGZ1bmN0aW9uKCkg
        ewoKLyoqCiAgVGhlIGBEUy5Cb29sZWFuVHJhbnNmb3JtYCBjbGFzcyBpcyB1
        c2VkIHRvIHNlcmlhbGl6ZSBhbmQgZGVzZXJpYWxpemUKICBib29sZWFuIGF0
        dHJpYnV0ZXMgb24gRW1iZXIgRGF0YSByZWNvcmQgb2JqZWN0cy4gVGhpcyB0
        cmFuc2Zvcm0gaXMKICB1c2VkIHdoZW4gYGJvb2xlYW5gIGlzIHBhc3NlZCBh
        cyB0aGUgdHlwZSBwYXJhbWV0ZXIgdG8gdGhlCiAgW0RTLmF0dHJdKC4uLy4u
        L2RhdGEjbWV0aG9kX2F0dHIpIGZ1bmN0aW9uLgoKICBVc2FnZQoKICBgYGBq
        YXZhc2NyaXB0CiAgdmFyIGF0dHIgPSBEUy5hdHRyOwogIEFwcC5Vc2VyID0g
        RFMuTW9kZWwuZXh0ZW5kKHsKICAgIGlzQWRtaW46IGF0dHIoJ2Jvb2xlYW4n
        KSwKICAgIG5hbWU6IGF0dHIoJ3N0cmluZycpLAogICAgZW1haWw6IGF0dHIo
        J3N0cmluZycpCiAgfSk7CiAgYGBgCgogIEBjbGFzcyBCb29sZWFuVHJhbnNm
        b3JtCiAgQGV4dGVuZHMgRFMuVHJhbnNmb3JtCiAgQG5hbWVzcGFjZSBEUwog
        Ki8KRFMuQm9vbGVhblRyYW5zZm9ybSA9IERTLlRyYW5zZm9ybS5leHRlbmQo
        ewogIGRlc2VyaWFsaXplOiBmdW5jdGlvbihzZXJpYWxpemVkKSB7CiAgICB2
        YXIgdHlwZSA9IHR5cGVvZiBzZXJpYWxpemVkOwoKICAgIGlmICh0eXBlID09
        PSAiYm9vbGVhbiIpIHsKICAgICAgcmV0dXJuIHNlcmlhbGl6ZWQ7CiAgICB9
        IGVsc2UgaWYgKHR5cGUgPT09ICJzdHJpbmciKSB7CiAgICAgIHJldHVybiBz
        ZXJpYWxpemVkLm1hdGNoKC9edHJ1ZSR8XnQkfF4xJC9pKSAhPT0gbnVsbDsK
        ICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gIm51bWJlciIpIHsKICAgICAgcmV0
        dXJuIHNlcmlhbGl6ZWQgPT09IDE7CiAgICB9IGVsc2UgewogICAgICByZXR1
        cm4gZmFsc2U7CiAgICB9CiAgfSwKCiAgc2VyaWFsaXplOiBmdW5jdGlvbihk
        ZXNlcmlhbGl6ZWQpIHsKICAgIHJldHVybiBCb29sZWFuKGRlc2VyaWFsaXpl
        ZCk7CiAgfQp9KTsKCn0pKCk7CgoKCihmdW5jdGlvbigpIHsKLyoqCiAgVGhl
        IGBEUy5EYXRlVHJhbnNmb3JtYCBjbGFzcyBpcyB1c2VkIHRvIHNlcmlhbGl6
        ZSBhbmQgZGVzZXJpYWxpemUKICBkYXRlIGF0dHJpYnV0ZXMgb24gRW1iZXIg
        RGF0YSByZWNvcmQgb2JqZWN0cy4gVGhpcyB0cmFuc2Zvcm0gaXMgdXNlZAog
        IHdoZW4gYGRhdGVgIGlzIHBhc3NlZCBhcyB0aGUgdHlwZSBwYXJhbWV0ZXIg
        dG8gdGhlCiAgW0RTLmF0dHJdKC4uLy4uL2RhdGEjbWV0aG9kX2F0dHIpIGZ1
        bmN0aW9uLgoKICBgYGBqYXZhc2NyaXB0CiAgdmFyIGF0dHIgPSBEUy5hdHRy
        OwogIEFwcC5TY29yZSA9IERTLk1vZGVsLmV4dGVuZCh7CiAgICB2YWx1ZTog
        YXR0cignbnVtYmVyJyksCiAgICBwbGF5ZXI6IERTLmJlbG9uZ3NUbygncGxh
        eWVyJyksCiAgICBkYXRlOiBhdHRyKCdkYXRlJykKICB9KTsKICBgYGAKCiAg
        QGNsYXNzIERhdGVUcmFuc2Zvcm0KICBAZXh0ZW5kcyBEUy5UcmFuc2Zvcm0K
        ICBAbmFtZXNwYWNlIERTCiAqLwpEUy5EYXRlVHJhbnNmb3JtID0gRFMuVHJh
        bnNmb3JtLmV4dGVuZCh7CgogIGRlc2VyaWFsaXplOiBmdW5jdGlvbihzZXJp
        YWxpemVkKSB7CiAgICB2YXIgdHlwZSA9IHR5cGVvZiBzZXJpYWxpemVkOwoK
        ICAgIGlmICh0eXBlID09PSAic3RyaW5nIikgewogICAgICByZXR1cm4gbmV3
        IERhdGUoRW1iZXIuRGF0ZS5wYXJzZShzZXJpYWxpemVkKSk7CiAgICB9IGVs
        c2UgaWYgKHR5cGUgPT09ICJudW1iZXIiKSB7CiAgICAgIHJldHVybiBuZXcg
        RGF0ZShzZXJpYWxpemVkKTsKICAgIH0gZWxzZSBpZiAoc2VyaWFsaXplZCA9
        PT0gbnVsbCB8fCBzZXJpYWxpemVkID09PSB1bmRlZmluZWQpIHsKICAgICAg
        Ly8gaWYgdGhlIHZhbHVlIGlzIG5vdCBwcmVzZW50IGluIHRoZSBkYXRhLAog
        ICAgICAvLyByZXR1cm4gdW5kZWZpbmVkLCBub3QgbnVsbC4KICAgICAgcmV0
        dXJuIHNlcmlhbGl6ZWQ7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gbnVs
        bDsKICAgIH0KICB9LAoKICBzZXJpYWxpemU6IGZ1bmN0aW9uKGRhdGUpIHsK
        ICAgIGlmIChkYXRlIGluc3RhbmNlb2YgRGF0ZSkgewogICAgICAvLyBTZXJp
        YWxpemUgaXQgYXMgYSBudW1iZXIgdG8gbWFpbnRhaW4gbWlsbGlzZWNvbmQg
        cHJlY2lzaW9uCiAgICAgIHJldHVybiBOdW1iZXIoZGF0ZSk7CiAgICB9IGVs
        c2UgewogICAgICByZXR1cm4gbnVsbDsKICAgIH0KICB9Cgp9KTsKCn0pKCk7
        CgoKCihmdW5jdGlvbigpIHsKdmFyIGVtcHR5ID0gRW1iZXIuaXNFbXB0eTsK
        LyoqCiAgVGhlIGBEUy5OdW1iZXJUcmFuc2Zvcm1gIGNsYXNzIGlzIHVzZWQg
        dG8gc2VyaWFsaXplIGFuZCBkZXNlcmlhbGl6ZQogIG51bWVyaWMgYXR0cmli
        dXRlcyBvbiBFbWJlciBEYXRhIHJlY29yZCBvYmplY3RzLiBUaGlzIHRyYW5z
        Zm9ybSBpcwogIHVzZWQgd2hlbiBgbnVtYmVyYCBpcyBwYXNzZWQgYXMgdGhl
        IHR5cGUgcGFyYW1ldGVyIHRvIHRoZQogIFtEUy5hdHRyXSguLi8uLi9kYXRh
        I21ldGhvZF9hdHRyKSBmdW5jdGlvbi4KCiAgVXNhZ2UKCiAgYGBgamF2YXNj
        cmlwdAogIHZhciBhdHRyID0gRFMuYXR0cjsKICBBcHAuU2NvcmUgPSBEUy5N
        b2RlbC5leHRlbmQoewogICAgdmFsdWU6IGF0dHIoJ251bWJlcicpLAogICAg
        cGxheWVyOiBEUy5iZWxvbmdzVG8oJ3BsYXllcicpLAogICAgZGF0ZTogYXR0
        cignZGF0ZScpCiAgfSk7CiAgYGBgCgogIEBjbGFzcyBOdW1iZXJUcmFuc2Zv
        cm0KICBAZXh0ZW5kcyBEUy5UcmFuc2Zvcm0KICBAbmFtZXNwYWNlIERTCiAq
        LwpEUy5OdW1iZXJUcmFuc2Zvcm0gPSBEUy5UcmFuc2Zvcm0uZXh0ZW5kKHsK
        CiAgZGVzZXJpYWxpemU6IGZ1bmN0aW9uKHNlcmlhbGl6ZWQpIHsKICAgIHJl
        dHVybiBlbXB0eShzZXJpYWxpemVkKSA/IG51bGwgOiBOdW1iZXIoc2VyaWFs
        aXplZCk7CiAgfSwKCiAgc2VyaWFsaXplOiBmdW5jdGlvbihkZXNlcmlhbGl6
        ZWQpIHsKICAgIHJldHVybiBlbXB0eShkZXNlcmlhbGl6ZWQpID8gbnVsbCA6
        IE51bWJlcihkZXNlcmlhbGl6ZWQpOwogIH0KfSk7Cgp9KSgpOwoKCgooZnVu
        Y3Rpb24oKSB7CnZhciBub25lID0gRW1iZXIuaXNOb25lOwoKLyoqCiAgVGhl
        IGBEUy5TdHJpbmdUcmFuc2Zvcm1gIGNsYXNzIGlzIHVzZWQgdG8gc2VyaWFs
        aXplIGFuZCBkZXNlcmlhbGl6ZQogIHN0cmluZyBhdHRyaWJ1dGVzIG9uIEVt
        YmVyIERhdGEgcmVjb3JkIG9iamVjdHMuIFRoaXMgdHJhbnNmb3JtIGlzCiAg
        dXNlZCB3aGVuIGBzdHJpbmdgIGlzIHBhc3NlZCBhcyB0aGUgdHlwZSBwYXJh
        bWV0ZXIgdG8gdGhlCiAgW0RTLmF0dHJdKC4uLy4uL2RhdGEjbWV0aG9kX2F0
        dHIpIGZ1bmN0aW9uLgoKICBVc2FnZQoKICBgYGBqYXZhc2NyaXB0CiAgdmFy
        IGF0dHIgPSBEUy5hdHRyOwogIEFwcC5Vc2VyID0gRFMuTW9kZWwuZXh0ZW5k
        KHsKICAgIGlzQWRtaW46IGF0dHIoJ2Jvb2xlYW4nKSwKICAgIG5hbWU6IGF0
        dHIoJ3N0cmluZycpLAogICAgZW1haWw6IGF0dHIoJ3N0cmluZycpCiAgfSk7
        CiAgYGBgCgogIEBjbGFzcyBTdHJpbmdUcmFuc2Zvcm0KICBAZXh0ZW5kcyBE
        Uy5UcmFuc2Zvcm0KICBAbmFtZXNwYWNlIERTCiAqLwpEUy5TdHJpbmdUcmFu
        c2Zvcm0gPSBEUy5UcmFuc2Zvcm0uZXh0ZW5kKHsKCiAgZGVzZXJpYWxpemU6
        IGZ1bmN0aW9uKHNlcmlhbGl6ZWQpIHsKICAgIHJldHVybiBub25lKHNlcmlh
        bGl6ZWQpID8gbnVsbCA6IFN0cmluZyhzZXJpYWxpemVkKTsKICB9LAoKICBz
        ZXJpYWxpemU6IGZ1bmN0aW9uKGRlc2VyaWFsaXplZCkgewogICAgcmV0dXJu
        IG5vbmUoZGVzZXJpYWxpemVkKSA/IG51bGwgOiBTdHJpbmcoZGVzZXJpYWxp
        emVkKTsKICB9Cgp9KTsKCn0pKCk7CgoKCihmdW5jdGlvbigpIHsKCn0pKCk7
        CgoKCihmdW5jdGlvbigpIHsKLyoqCiAgQG1vZHVsZSBlbWJlci1kYXRhCiov
        Cgp2YXIgc2V0ID0gRW1iZXIuc2V0OwoKLyoKICBUaGlzIGNvZGUgcmVnaXN0
        ZXJzIGFuIGluamVjdGlvbiBmb3IgRW1iZXIuQXBwbGljYXRpb24uCgogIElm
        IGFuIEVtYmVyLmpzIGRldmVsb3BlciBkZWZpbmVzIGEgc3ViY2xhc3Mgb2Yg
        RFMuU3RvcmUgb24gdGhlaXIgYXBwbGljYXRpb24sCiAgdGhpcyBjb2RlIHdp
        bGwgYXV0b21hdGljYWxseSBpbnN0YW50aWF0ZSBpdCBhbmQgbWFrZSBpdCBh
        dmFpbGFibGUgb24gdGhlCiAgcm91dGVyLgoKICBBZGRpdGlvbmFsbHksIGFm
        dGVyIGFuIGFwcGxpY2F0aW9uJ3MgY29udHJvbGxlcnMgaGF2ZSBiZWVuIGlu
        amVjdGVkLCB0aGV5IHdpbGwKICBlYWNoIGhhdmUgdGhlIHN0b3JlIG1hZGUg
        YXZhaWxhYmxlIHRvIHRoZW0uCgogIEZvciBleGFtcGxlLCBpbWFnaW5lIGFu
        IEVtYmVyLmpzIGFwcGxpY2F0aW9uIHdpdGggdGhlIGZvbGxvd2luZyBjbGFz
        c2VzOgoKICBBcHAuU3RvcmUgPSBEUy5TdG9yZS5leHRlbmQoewogICAgYWRh
        cHRlcjogJ2N1c3RvbScKICB9KTsKCiAgQXBwLlBvc3RzQ29udHJvbGxlciA9
        IEVtYmVyLkFycmF5Q29udHJvbGxlci5leHRlbmQoewogICAgLy8gLi4uCiAg
        fSk7CgogIFdoZW4gdGhlIGFwcGxpY2F0aW9uIGlzIGluaXRpYWxpemVkLCBg
        QXBwLlN0b3JlYCB3aWxsIGF1dG9tYXRpY2FsbHkgYmUKICBpbnN0YW50aWF0
        ZWQsIGFuZCB0aGUgaW5zdGFuY2Ugb2YgYEFwcC5Qb3N0c0NvbnRyb2xsZXJg
        IHdpbGwgaGF2ZSBpdHMgYHN0b3JlYAogIHByb3BlcnR5IHNldCB0byB0aGF0
        IGluc3RhbmNlLgoKICBOb3RlIHRoYXQgdGhpcyBjb2RlIHdpbGwgb25seSBi
        ZSBydW4gaWYgdGhlIGBlbWJlci1hcHBsaWNhdGlvbmAgcGFja2FnZSBpcwog
        IGxvYWRlZC4gSWYgRW1iZXIgRGF0YSBpcyBiZWluZyB1c2VkIGluIGFuIGVu
        dmlyb25tZW50IG90aGVyIHRoYW4gYQogIHR5cGljYWwgYXBwbGljYXRpb24g
        KGUuZy4sIG5vZGUuanMgd2hlcmUgb25seSBgZW1iZXItcnVudGltZWAgaXMg
        YXZhaWxhYmxlKSwKICB0aGlzIGNvZGUgd2lsbCBiZSBpZ25vcmVkLgoqLwoK
        RW1iZXIub25Mb2FkKCdFbWJlci5BcHBsaWNhdGlvbicsIGZ1bmN0aW9uKEFw
        cGxpY2F0aW9uKSB7CiAgQXBwbGljYXRpb24uaW5pdGlhbGl6ZXIoewogICAg
        bmFtZTogInN0b3JlIiwKCiAgICBpbml0aWFsaXplOiBmdW5jdGlvbihjb250
        YWluZXIsIGFwcGxpY2F0aW9uKSB7CiAgICAgIGFwcGxpY2F0aW9uLnJlZ2lz
        dGVyKCdzdG9yZTptYWluJywgYXBwbGljYXRpb24uU3RvcmUgfHwgRFMuU3Rv
        cmUpOwoKICAgICAgLy8gYWxsb3cgb2xkZXIgbmFtZXMgdG8gYmUgbG9va2Vk
        IHVwCgogICAgICB2YXIgcHJveHkgPSBuZXcgRFMuQ29udGFpbmVyUHJveHko
        Y29udGFpbmVyKTsKICAgICAgcHJveHkucmVnaXN0ZXJEZXByZWNhdGlvbnMo
        WwogICAgICAgIHtkZXByZWNhdGVkOiAnc2VyaWFsaXplcjpfZGVmYXVsdCcs
        ICB2YWxpZDogJ3NlcmlhbGl6ZXI6LWRlZmF1bHQnfSwKICAgICAgICB7ZGVw
        cmVjYXRlZDogJ3NlcmlhbGl6ZXI6X3Jlc3QnLCAgICAgdmFsaWQ6ICdzZXJp
        YWxpemVyOi1yZXN0J30sCiAgICAgICAge2RlcHJlY2F0ZWQ6ICdhZGFwdGVy
        Ol9yZXN0JywgICAgICAgIHZhbGlkOiAnYWRhcHRlcjotcmVzdCd9CiAgICAg
        IF0pOwoKICAgICAgLy8gbmV3IGdvIGZvcndhcmQgcGF0aHMKICAgICAgYXBw
        bGljYXRpb24ucmVnaXN0ZXIoJ3NlcmlhbGl6ZXI6LWRlZmF1bHQnLCBEUy5K
        U09OU2VyaWFsaXplcik7CiAgICAgIGFwcGxpY2F0aW9uLnJlZ2lzdGVyKCdz
        ZXJpYWxpemVyOi1yZXN0JywgRFMuUkVTVFNlcmlhbGl6ZXIpOwogICAgICBh
        cHBsaWNhdGlvbi5yZWdpc3RlcignYWRhcHRlcjotcmVzdCcsIERTLlJFU1RB
        ZGFwdGVyKTsKCiAgICAgIC8vIEVhZ2VybHkgZ2VuZXJhdGUgdGhlIHN0b3Jl
        IHNvIGRlZmF1bHRTdG9yZSBpcyBwb3B1bGF0ZWQuCiAgICAgIC8vIFRPRE86
        IERvIHRoaXMgaW4gYSBmaW5pc2hlciBob29rCiAgICAgIGNvbnRhaW5lci5s
        b29rdXAoJ3N0b3JlOm1haW4nKTsKICAgIH0KICB9KTsKCiAgQXBwbGljYXRp
        b24uaW5pdGlhbGl6ZXIoewogICAgbmFtZTogInRyYW5zZm9ybXMiLAogICAg
        YmVmb3JlOiAic3RvcmUiLAoKICAgIGluaXRpYWxpemU6IGZ1bmN0aW9uKGNv
        bnRhaW5lciwgYXBwbGljYXRpb24pIHsKICAgICAgYXBwbGljYXRpb24ucmVn
        aXN0ZXIoJ3RyYW5zZm9ybTpib29sZWFuJywgRFMuQm9vbGVhblRyYW5zZm9y
        bSk7CiAgICAgIGFwcGxpY2F0aW9uLnJlZ2lzdGVyKCd0cmFuc2Zvcm06ZGF0
        ZScsIERTLkRhdGVUcmFuc2Zvcm0pOwogICAgICBhcHBsaWNhdGlvbi5yZWdp
        c3RlcigndHJhbnNmb3JtOm51bWJlcicsIERTLk51bWJlclRyYW5zZm9ybSk7
        CiAgICAgIGFwcGxpY2F0aW9uLnJlZ2lzdGVyKCd0cmFuc2Zvcm06c3RyaW5n
        JywgRFMuU3RyaW5nVHJhbnNmb3JtKTsKICAgIH0KICB9KTsKCiAgQXBwbGlj
        YXRpb24uaW5pdGlhbGl6ZXIoewogICAgbmFtZTogImRhdGEtYWRhcHRlciIs
        CiAgICBiZWZvcmU6ICJzdG9yZSIsCgogICAgaW5pdGlhbGl6ZTogZnVuY3Rp
        b24oY29udGFpbmVyLCBhcHBsaWNhdGlvbikgewogICAgICBhcHBsaWNhdGlv
        bi5yZWdpc3RlcignZGF0YS1hZGFwdGVyOm1haW4nLCBEUy5EZWJ1Z0FkYXB0
        ZXIpOwogICAgfQogIH0pOwoKICBBcHBsaWNhdGlvbi5pbml0aWFsaXplcih7
        CiAgICBuYW1lOiAiaW5qZWN0U3RvcmUiLAogICAgYmVmb3JlOiAic3RvcmUi
        LAoKICAgIGluaXRpYWxpemU6IGZ1bmN0aW9uKGNvbnRhaW5lciwgYXBwbGlj
        YXRpb24pIHsKICAgICAgYXBwbGljYXRpb24uaW5qZWN0KCdjb250cm9sbGVy
        JywgJ3N0b3JlJywgJ3N0b3JlOm1haW4nKTsKICAgICAgYXBwbGljYXRpb24u
        aW5qZWN0KCdyb3V0ZScsICdzdG9yZScsICdzdG9yZTptYWluJyk7CiAgICAg
        IGFwcGxpY2F0aW9uLmluamVjdCgnc2VyaWFsaXplcicsICdzdG9yZScsICdz
        dG9yZTptYWluJyk7CiAgICAgIGFwcGxpY2F0aW9uLmluamVjdCgnZGF0YS1h
        ZGFwdGVyJywgJ3N0b3JlJywgJ3N0b3JlOm1haW4nKTsKICAgIH0KICB9KTsK
        Cn0pOwoKfSkoKTsKCgoKKGZ1bmN0aW9uKCkgewovKioKICBAbW9kdWxlIGVt
        YmVyLWRhdGEKKi8KCi8qKgogIERhdGUucGFyc2Ugd2l0aCBwcm9ncmVzc2l2
        ZSBlbmhhbmNlbWVudCBmb3IgSVNPIDg2MDEgPGh0dHBzOi8vZ2l0aHViLmNv
        bS9jc25vdmVyL2pzLWlzbzg2MDE+CgogIMKpIDIwMTEgQ29saW4gU25vdmVy
        IDxodHRwOi8vemV0YWZsZWV0LmNvbT4KCiAgUmVsZWFzZWQgdW5kZXIgTUlU
        IGxpY2Vuc2UuCgogIEBjbGFzcyBEYXRlCiAgQG5hbWVzcGFjZSBFbWJlcgog
        IEBzdGF0aWMKKi8KRW1iZXIuRGF0ZSA9IEVtYmVyLkRhdGUgfHwge307Cgp2
        YXIgb3JpZ1BhcnNlID0gRGF0ZS5wYXJzZSwgbnVtZXJpY0tleXMgPSBbIDEs
        IDQsIDUsIDYsIDcsIDEwLCAxMSBdOwoKLyoqCiAgQG1ldGhvZCBwYXJzZQog
        IEBwYXJhbSBkYXRlCiovCkVtYmVyLkRhdGUucGFyc2UgPSBmdW5jdGlvbiAo
        ZGF0ZSkgewogICAgdmFyIHRpbWVzdGFtcCwgc3RydWN0LCBtaW51dGVzT2Zm
        c2V0ID0gMDsKCiAgICAvLyBFUzUgwqcxNS45LjQuMiBzdGF0ZXMgdGhhdCB0
        aGUgc3RyaW5nIHNob3VsZCBhdHRlbXB0IHRvIGJlIHBhcnNlZCBhcyBhIERh
        dGUgVGltZSBTdHJpbmcgRm9ybWF0IHN0cmluZwogICAgLy8gYmVmb3JlIGZh
        bGxpbmcgYmFjayB0byBhbnkgaW1wbGVtZW50YXRpb24tc3BlY2lmaWMgZGF0
        ZSBwYXJzaW5nLCBzbyB0aGF04oCZcyB3aGF0IHdlIGRvLCBldmVuIGlmIG5h
        dGl2ZQogICAgLy8gaW1wbGVtZW50YXRpb25zIGNvdWxkIGJlIGZhc3Rlcgog
        ICAgLy8gICAgICAgICAgICAgIDEgWVlZWSAgICAgICAgICAgICAgICAyIE1N
        ICAgICAgIDMgREQgICAgICAgICAgIDQgSEggICAgNSBtbSAgICAgICA2IHNz
        ICAgICAgICA3IG1zZWMgICAgICAgIDggWiA5IMKxICAgIDEwIHR6SEggICAg
        MTEgdHptbQogICAgaWYgKChzdHJ1Y3QgPSAvXihcZHs0fXxbK1wtXVxkezZ9
        KSg/Oi0oXGR7Mn0pKD86LShcZHsyfSkpPyk/KD86VChcZHsyfSk6KFxkezJ9
        KSg/OjooXGR7Mn0pKD86XC4oXGR7M30pKT8pPyg/OihaKXwoWytcLV0pKFxk
        ezJ9KSg/OjooXGR7Mn0pKT8pPyk/JC8uZXhlYyhkYXRlKSkpIHsKICAgICAg
        ICAvLyBhdm9pZCBOYU4gdGltZXN0YW1wcyBjYXVzZWQgYnkg4oCcdW5kZWZp
        bmVk4oCdIHZhbHVlcyBiZWluZyBwYXNzZWQgdG8gRGF0ZS5VVEMKICAgICAg
        ICBmb3IgKHZhciBpID0gMCwgazsgKGsgPSBudW1lcmljS2V5c1tpXSk7ICsr
        aSkgewogICAgICAgICAgICBzdHJ1Y3Rba10gPSArc3RydWN0W2tdIHx8IDA7
        CiAgICAgICAgfQoKICAgICAgICAvLyBhbGxvdyB1bmRlZmluZWQgZGF5cyBh
        bmQgbW9udGhzCiAgICAgICAgc3RydWN0WzJdID0gKCtzdHJ1Y3RbMl0gfHwg
        MSkgLSAxOwogICAgICAgIHN0cnVjdFszXSA9ICtzdHJ1Y3RbM10gfHwgMTsK
        CiAgICAgICAgaWYgKHN0cnVjdFs4XSAhPT0gJ1onICYmIHN0cnVjdFs5XSAh
        PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgIG1pbnV0ZXNPZmZzZXQgPSBz
        dHJ1Y3RbMTBdICogNjAgKyBzdHJ1Y3RbMTFdOwoKICAgICAgICAgICAgaWYg
        KHN0cnVjdFs5XSA9PT0gJysnKSB7CiAgICAgICAgICAgICAgICBtaW51dGVz
        T2Zmc2V0ID0gMCAtIG1pbnV0ZXNPZmZzZXQ7CiAgICAgICAgICAgIH0KICAg
        ICAgICB9CgogICAgICAgIHRpbWVzdGFtcCA9IERhdGUuVVRDKHN0cnVjdFsx
        XSwgc3RydWN0WzJdLCBzdHJ1Y3RbM10sIHN0cnVjdFs0XSwgc3RydWN0WzVd
        ICsgbWludXRlc09mZnNldCwgc3RydWN0WzZdLCBzdHJ1Y3RbN10pOwogICAg
        fQogICAgZWxzZSB7CiAgICAgICAgdGltZXN0YW1wID0gb3JpZ1BhcnNlID8g
        b3JpZ1BhcnNlKGRhdGUpIDogTmFOOwogICAgfQoKICAgIHJldHVybiB0aW1l
        c3RhbXA7Cn07CgppZiAoRW1iZXIuRVhURU5EX1BST1RPVFlQRVMgPT09IHRy
        dWUgfHwgRW1iZXIuRVhURU5EX1BST1RPVFlQRVMuRGF0ZSkgewogIERhdGUu
        cGFyc2UgPSBFbWJlci5EYXRlLnBhcnNlOwp9Cgp9KSgpOwoKCgooZnVuY3Rp
        b24oKSB7Cgp9KSgpOwoKCgooZnVuY3Rpb24oKSB7Ci8qKgogIEBtb2R1bGUg
        ZW1iZXItZGF0YQoqLwoKdmFyIGdldCA9IEVtYmVyLmdldCwgc2V0ID0gRW1i
        ZXIuc2V0OwoKLyoqCiAgQSByZWNvcmQgYXJyYXkgaXMgYW4gYXJyYXkgdGhh
        dCBjb250YWlucyByZWNvcmRzIG9mIGEgY2VydGFpbiB0eXBlLiBUaGUgcmVj
        b3JkCiAgYXJyYXkgbWF0ZXJpYWxpemVzIHJlY29yZHMgYXMgbmVlZGVkIHdo
        ZW4gdGhleSBhcmUgcmV0cmlldmVkIGZvciB0aGUgZmlyc3QKICB0aW1lLiBZ
        b3Ugc2hvdWxkIG5vdCBjcmVhdGUgcmVjb3JkIGFycmF5cyB5b3Vyc2VsZi4g
        SW5zdGVhZCwgYW4gaW5zdGFuY2Ugb2YKICBgRFMuUmVjb3JkQXJyYXlgIG9y
        IGl0cyBzdWJjbGFzc2VzIHdpbGwgYmUgcmV0dXJuZWQgYnkgeW91ciBhcHBs
        aWNhdGlvbidzIHN0b3JlCiAgaW4gcmVzcG9uc2UgdG8gcXVlcmllcy4KCiAg
        QGNsYXNzIFJlY29yZEFycmF5CiAgQG5hbWVzcGFjZSBEUwogIEBleHRlbmRz
        IEVtYmVyLkFycmF5UHJveHkKICBAdXNlcyBFbWJlci5FdmVudGVkCiovCgpE
        Uy5SZWNvcmRBcnJheSA9IEVtYmVyLkFycmF5UHJveHkuZXh0ZW5kKEVtYmVy
        LkV2ZW50ZWQsIHsKICAvKioKICAgIFRoZSBtb2RlbCB0eXBlIGNvbnRhaW5l
        ZCBieSB0aGlzIHJlY29yZCBhcnJheS4KCiAgICBAcHJvcGVydHkgdHlwZQog
        ICAgQHR5cGUgRFMuTW9kZWwKICAqLwogIHR5cGU6IG51bGwsCgogIC8qKgog
        ICAgVGhlIGFycmF5IG9mIGNsaWVudCBpZHMgYmFja2luZyB0aGUgcmVjb3Jk
        IGFycmF5LiBXaGVuIGEKICAgIHJlY29yZCBpcyByZXF1ZXN0ZWQgZnJvbSB0
        aGUgcmVjb3JkIGFycmF5LCB0aGUgcmVjb3JkCiAgICBmb3IgdGhlIGNsaWVu
        dCBpZCBhdCB0aGUgc2FtZSBpbmRleCBpcyBtYXRlcmlhbGl6ZWQsIGlmCiAg
        ICBuZWNlc3NhcnksIGJ5IHRoZSBzdG9yZS4KCiAgICBAcHJvcGVydHkgY29u
        dGVudAogICAgQHByaXZhdGUKICAgIEB0eXBlIEVtYmVyLkFycmF5CiAgKi8K
        ICBjb250ZW50OiBudWxsLAoKICAvKioKICAgIFRoZSBmbGFnIHRvIHNpZ25h
        bCBhIGBSZWNvcmRBcnJheWAgaXMgY3VycmVudGx5IGxvYWRpbmcgZGF0YS4K
        CiAgICBFeGFtcGxlCgogICAgYGBgamF2YXNjcmlwdAogICAgdmFyIHBlb3Bs
        ZSA9IHN0b3JlLmFsbChBcHAuUGVyc29uKTsKICAgIHBlb3BsZS5nZXQoJ2lz
        TG9hZGVkJyk7IC8vIHRydWUKICAgIGBgYAoKICAgIEBwcm9wZXJ0eSBpc0xv
        YWRlZAogICAgQHR5cGUgQm9vbGVhbgogICovCiAgaXNMb2FkZWQ6IGZhbHNl
        LAogIC8qKgogICAgVGhlIGZsYWcgdG8gc2lnbmFsIGEgYFJlY29yZEFycmF5
        YCBpcyBjdXJyZW50bHkgbG9hZGluZyBkYXRhLgoKICAgIEV4YW1wbGUKCiAg
        ICBgYGBqYXZhc2NyaXB0CiAgICB2YXIgcGVvcGxlID0gc3RvcmUuYWxsKEFw
        cC5QZXJzb24pOwogICAgcGVvcGxlLmdldCgnaXNVcGRhdGluZycpOyAvLyBm
        YWxzZQogICAgcGVvcGxlLnVwZGF0ZSgpOwogICAgcGVvcGxlLmdldCgnaXNV
        cGRhdGluZycpOyAvLyB0cnVlCiAgICBgYGAKCiAgICBAcHJvcGVydHkgaXNV
        cGRhdGluZwogICAgQHR5cGUgQm9vbGVhbgogICovCiAgaXNVcGRhdGluZzog
        ZmFsc2UsCgogIC8qKgogICAgVGhlIHN0b3JlIHRoYXQgY3JlYXRlZCB0aGlz
        IHJlY29yZCBhcnJheS4KCiAgICBAcHJvcGVydHkgc3RvcmUKICAgIEBwcml2
        YXRlCiAgICBAdHlwZSBEUy5TdG9yZQogICovCiAgc3RvcmU6IG51bGwsCgog
        IC8qKgogICAgUmV0cmlldmVzIGFuIG9iamVjdCBmcm9tIHRoZSBjb250ZW50
        IGJ5IGluZGV4LgoKICAgIEBtZXRob2Qgb2JqZWN0QXRDb250ZW50CiAgICBA
        cHJpdmF0ZQogICAgQHBhcmFtIHtOdW1iZXJ9IGluZGV4CiAgICBAcmV0dXJu
        IHtEUy5Nb2RlbH0gcmVjb3JkCiAgKi8KICBvYmplY3RBdENvbnRlbnQ6IGZ1
        bmN0aW9uKGluZGV4KSB7CiAgICB2YXIgY29udGVudCA9IGdldCh0aGlzLCAn
        Y29udGVudCcpOwoKICAgIHJldHVybiBjb250ZW50Lm9iamVjdEF0KGluZGV4
        KTsKICB9LAoKICAvKioKICAgIFVzZWQgdG8gZ2V0IHRoZSBsYXRlc3QgdmVy
        c2lvbiBvZiBhbGwgb2YgdGhlIHJlY29yZHMgaW4gdGhpcyBhcnJheQogICAg
        ZnJvbSB0aGUgYWRhcHRlci4KCiAgICBFeGFtcGxlCgogICAgYGBgamF2YXNj
        cmlwdAogICAgdmFyIHBlb3BsZSA9IHN0b3JlLmFsbChBcHAuUGVyc29uKTsK
        ICAgIHBlb3BsZS5nZXQoJ2lzVXBkYXRpbmcnKTsgLy8gZmFsc2UKICAgIHBl
        b3BsZS51cGRhdGUoKTsKICAgIHBlb3BsZS5nZXQoJ2lzVXBkYXRpbmcnKTsg
        Ly8gdHJ1ZQogICAgYGBgCgogICAgQG1ldGhvZCB1cGRhdGUKICAqLwogIHVw
        ZGF0ZTogZnVuY3Rpb24oKSB7CiAgICBpZiAoZ2V0KHRoaXMsICdpc1VwZGF0
        aW5nJykpIHsgcmV0dXJuOyB9CgogICAgdmFyIHN0b3JlID0gZ2V0KHRoaXMs
        ICdzdG9yZScpLAogICAgICAgIHR5cGUgPSBnZXQodGhpcywgJ3R5cGUnKTsK
        CiAgICByZXR1cm4gc3RvcmUuZmV0Y2hBbGwodHlwZSwgdGhpcyk7CiAgfSwK
        CiAgLyoqCiAgICBBZGRzIGEgcmVjb3JkIHRvIHRoZSBgUmVjb3JkQXJyYXlg
        LgoKICAgIEBtZXRob2QgYWRkUmVjb3JkCiAgICBAcHJpdmF0ZQogICAgQHBh
        cmFtIHtEUy5Nb2RlbH0gcmVjb3JkCiAgKi8KICBhZGRSZWNvcmQ6IGZ1bmN0
        aW9uKHJlY29yZCkgewogICAgZ2V0KHRoaXMsICdjb250ZW50JykuYWRkT2Jq
        ZWN0KHJlY29yZCk7CiAgfSwKCiAgLyoqCiAgICBSZW1vdmVzIGEgcmVjb3Jk
        IHRvIHRoZSBgUmVjb3JkQXJyYXlgLgoKICAgIEBtZXRob2QgcmVtb3ZlUmVj
        b3JkCiAgICBAcHJpdmF0ZQogICAgQHBhcmFtIHtEUy5Nb2RlbH0gcmVjb3Jk
        CiAgKi8KICByZW1vdmVSZWNvcmQ6IGZ1bmN0aW9uKHJlY29yZCkgewogICAg
        Z2V0KHRoaXMsICdjb250ZW50JykucmVtb3ZlT2JqZWN0KHJlY29yZCk7CiAg
        fSwKCiAgLyoqCiAgICBTYXZlcyBhbGwgb2YgdGhlIHJlY29yZHMgaW4gdGhl
        IGBSZWNvcmRBcnJheWAuCgogICAgRXhhbXBsZQoKICAgIGBgYGphdmFzY3Jp
        cHQKICAgIHZhciBtZXNzYWdlcyA9IHN0b3JlLmFsbChBcHAuTWVzc2FnZSk7
        CiAgICBtZXNzYWdlcy5mb3JFYWNoKGZ1bmN0aW9uKG1lc3NhZ2UpIHsKICAg
        ICAgbWVzc2FnZS5zZXQoJ2hhc0JlZW5TZWVuJywgdHJ1ZSk7CiAgICB9KTsK
        ICAgIG1lc3NhZ2VzLnNhdmUoKTsKICAgIGBgYAoKICAgIEBtZXRob2Qgc2F2
        ZQogICAgQHJldHVybiB7RFMuUHJvbWlzZUFycmF5fSBwcm9taXNlCiAgKi8K
        ICBzYXZlOiBmdW5jdGlvbigpIHsKICAgIHZhciBwcm9taXNlTGFiZWwgPSAi
        RFM6IFJlY29yZEFycmF5I3NhdmUgIiArIGdldCh0aGlzLCAndHlwZScpOwog
        ICAgdmFyIHByb21pc2UgPSBFbWJlci5SU1ZQLmFsbCh0aGlzLmludm9rZSgi
        c2F2ZSIpLCBwcm9taXNlTGFiZWwpLnRoZW4oZnVuY3Rpb24oYXJyYXkpIHsK
        ICAgICAgcmV0dXJuIEVtYmVyLkEoYXJyYXkpOwogICAgfSwgbnVsbCwgIkRT
        OiBSZWNvcmRBcnJheSNzYXZlIGFwcGx5IEVtYmVyLk5hdGl2ZUFycmF5Iik7
        CgogICAgcmV0dXJuIERTLlByb21pc2VBcnJheS5jcmVhdGUoeyBwcm9taXNl
        OiBwcm9taXNlIH0pOwogIH0KfSk7Cgp9KSgpOwoKCgooZnVuY3Rpb24oKSB7
        Ci8qKgogIEBtb2R1bGUgZW1iZXItZGF0YQoqLwoKdmFyIGdldCA9IEVtYmVy
        LmdldDsKCi8qKgogIFJlcHJlc2VudHMgYSBsaXN0IG9mIHJlY29yZHMgd2hv
        c2UgbWVtYmVyc2hpcCBpcyBkZXRlcm1pbmVkIGJ5IHRoZQogIHN0b3JlLiBB
        cyByZWNvcmRzIGFyZSBjcmVhdGVkLCBsb2FkZWQsIG9yIG1vZGlmaWVkLCB0
        aGUgc3RvcmUKICBldmFsdWF0ZXMgdGhlbSB0byBkZXRlcm1pbmUgaWYgdGhl
        eSBzaG91bGQgYmUgcGFydCBvZiB0aGUgcmVjb3JkCiAgYXJyYXkuCgogIEBj
        bGFzcyBGaWx0ZXJlZFJlY29yZEFycmF5CiAgQG5hbWVzcGFjZSBEUwogIEBl
        eHRlbmRzIERTLlJlY29yZEFycmF5CiovCkRTLkZpbHRlcmVkUmVjb3JkQXJy
        YXkgPSBEUy5SZWNvcmRBcnJheS5leHRlbmQoewogIC8qKgogICAgVGhlIGZp
        bHRlckZ1bmN0aW9uIGlzIGEgZnVuY3Rpb24gdXNlZCB0byB0ZXN0IHJlY29y
        ZHMgZnJvbSB0aGUgc3RvcmUgdG8KICAgIGRldGVybWluZSBpZiB0aGV5IHNo
        b3VsZCBiZSBwYXJ0IG9mIHRoZSByZWNvcmQgYXJyYXkuCgogICAgRXhhbXBs
        ZQoKICAgIGBgYGphdmFzY3JpcHQKICAgIHZhciBhbGxQZW9wbGUgPSBzdG9y
        ZS5hbGwoJ3BlcnNvbicpOwogICAgYWxsUGVvcGxlLm1hcEJ5KCduYW1lJyk7
        IC8vIFsiVG9tIERhbGUiLCAiWWVodWRhIEthdHoiLCAiVHJlayBHbG93YWNr
        aSJdCgogICAgdmFyIHBlb3BsZSA9IHN0b3JlLmZpbHRlcigncGVyc29uJywg
        ZnVuY3Rpb24ocGVyc29uKSB7CiAgICAgIGlmIChwZXJzb24uZ2V0KCduYW1l
        JykubWF0Y2goL0thdHokLykpIHsgcmV0dXJuIHRydWU7IH0KICAgIH0pOwog
        ICAgcGVvcGxlLm1hcEJ5KCduYW1lJyk7IC8vIFsiWWVodWRhIEthdHoiXQoK
        ICAgIHZhciBub3RLYXR6RmlsdGVyID0gZnVuY3Rpb24ocGVyc29uKSB7CiAg
        ICAgIHJldHVybiAhcGVyc29uLmdldCgnbmFtZScpLm1hdGNoKC9LYXR6JC8p
        OwogICAgfTsKICAgIHBlb3BsZS5zZXQoJ2ZpbHRlckZ1bmN0aW9uJywgbm90
        S2F0ekZpbHRlcik7CiAgICBwZW9wbGUubWFwQnkoJ25hbWUnKTsgLy8gWyJU
        b20gRGFsZSIsICJUcmVrIEdsb3dhY2tpIl0KICAgIGBgYAoKICAgIEBtZXRo
        b2QgZmlsdGVyRnVuY3Rpb24KICAgIEBwYXJhbSB7RFMuTW9kZWx9IHJlY29y
        ZAogICAgQHJldHVybiB7Qm9vbGVhbn0gYHRydWVgIGlmIHRoZSByZWNvcmQg
        c2hvdWxkIGJlIGluIHRoZSBhcnJheQogICovCiAgZmlsdGVyRnVuY3Rpb246
        IG51bGwsCiAgaXNMb2FkZWQ6IHRydWUsCgogIHJlcGxhY2U6IGZ1bmN0aW9u
        KCkgewogICAgdmFyIHR5cGUgPSBnZXQodGhpcywgJ3R5cGUnKS50b1N0cmlu
        ZygpOwogICAgdGhyb3cgbmV3IEVycm9yKCJUaGUgcmVzdWx0IG9mIGEgY2xp
        ZW50LXNpZGUgZmlsdGVyIChvbiAiICsgdHlwZSArICIpIGlzIGltbXV0YWJs
        ZS4iKTsKICB9LAoKICAvKioKICAgIEBtZXRob2QgdXBkYXRlRmlsdGVyCiAg
        ICBAcHJpdmF0ZQogICovCiAgdXBkYXRlRmlsdGVyOiBFbWJlci5vYnNlcnZl
        cihmdW5jdGlvbigpIHsKICAgIHZhciBtYW5hZ2VyID0gZ2V0KHRoaXMsICdt
        YW5hZ2VyJyk7CiAgICBtYW5hZ2VyLnVwZGF0ZUZpbHRlcih0aGlzLCBnZXQo
        dGhpcywgJ3R5cGUnKSwgZ2V0KHRoaXMsICdmaWx0ZXJGdW5jdGlvbicpKTsK
        ICB9LCAnZmlsdGVyRnVuY3Rpb24nKQp9KTsKCn0pKCk7CgoKCihmdW5jdGlv
        bigpIHsKLyoqCiAgQG1vZHVsZSBlbWJlci1kYXRhCiovCgp2YXIgZ2V0ID0g
        RW1iZXIuZ2V0LCBzZXQgPSBFbWJlci5zZXQ7CgovKioKICBSZXByZXNlbnRz
        IGFuIG9yZGVyZWQgbGlzdCBvZiByZWNvcmRzIHdob3NlIG9yZGVyIGFuZCBt
        ZW1iZXJzaGlwIGlzCiAgZGV0ZXJtaW5lZCBieSB0aGUgYWRhcHRlci4gRm9y
        IGV4YW1wbGUsIGEgcXVlcnkgc2VudCB0byB0aGUgYWRhcHRlcgogIG1heSB0
        cmlnZ2VyIGEgc2VhcmNoIG9uIHRoZSBzZXJ2ZXIsIHdob3NlIHJlc3VsdHMg
        d291bGQgYmUgbG9hZGVkCiAgaW50byBhbiBpbnN0YW5jZSBvZiB0aGUgYEFk
        YXB0ZXJQb3B1bGF0ZWRSZWNvcmRBcnJheWAuCgogIEBjbGFzcyBBZGFwdGVy
        UG9wdWxhdGVkUmVjb3JkQXJyYXkKICBAbmFtZXNwYWNlIERTCiAgQGV4dGVu
        ZHMgRFMuUmVjb3JkQXJyYXkKKi8KRFMuQWRhcHRlclBvcHVsYXRlZFJlY29y
        ZEFycmF5ID0gRFMuUmVjb3JkQXJyYXkuZXh0ZW5kKHsKICBxdWVyeTogbnVs
        bCwKCiAgcmVwbGFjZTogZnVuY3Rpb24oKSB7CiAgICB2YXIgdHlwZSA9IGdl
        dCh0aGlzLCAndHlwZScpLnRvU3RyaW5nKCk7CiAgICB0aHJvdyBuZXcgRXJy
        b3IoIlRoZSByZXN1bHQgb2YgYSBzZXJ2ZXIgcXVlcnkgKG9uICIgKyB0eXBl
        ICsgIikgaXMgaW1tdXRhYmxlLiIpOwogIH0sCgogIC8qKgogICAgQG1ldGhv
        ZCBsb2FkCiAgICBAcHJpdmF0ZQogICAgQHBhcmFtIHtBcnJheX0gZGF0YQog
        ICovCiAgbG9hZDogZnVuY3Rpb24oZGF0YSkgewogICAgdmFyIHN0b3JlID0g
        Z2V0KHRoaXMsICdzdG9yZScpLAogICAgICAgIHR5cGUgPSBnZXQodGhpcywg
        J3R5cGUnKSwKICAgICAgICByZWNvcmRzID0gc3RvcmUucHVzaE1hbnkodHlw
        ZSwgZGF0YSksCiAgICAgICAgbWV0YSA9IHN0b3JlLm1ldGFkYXRhRm9yKHR5
        cGUpOwoKICAgIHRoaXMuc2V0UHJvcGVydGllcyh7CiAgICAgIGNvbnRlbnQ6
        IEVtYmVyLkEocmVjb3JkcyksCiAgICAgIGlzTG9hZGVkOiB0cnVlLAogICAg
        ICBtZXRhOiBtZXRhCiAgICB9KTsKCiAgICAvLyBUT0RPOiBkb2VzIHRyaWdn
        ZXJpbmcgZGlkTG9hZCBldmVudCBzaG91bGQgYmUgdGhlIGxhc3QgYWN0aW9u
        IG9mIHRoZSBydW5Mb29wPwogICAgRW1iZXIucnVuLm9uY2UodGhpcywgJ3Ry
        aWdnZXInLCAnZGlkTG9hZCcpOwogIH0KfSk7Cgp9KSgpOwoKCgooZnVuY3Rp
        b24oKSB7Ci8qKgogIEBtb2R1bGUgZW1iZXItZGF0YQoqLwoKdmFyIGdldCA9
        IEVtYmVyLmdldCwgc2V0ID0gRW1iZXIuc2V0Owp2YXIgbWFwID0gRW1iZXIu
        RW51bWVyYWJsZVV0aWxzLm1hcDsKCi8qKgogIEEgYE1hbnlBcnJheWAgaXMg
        YSBgUmVjb3JkQXJyYXlgIHRoYXQgcmVwcmVzZW50cyB0aGUgY29udGVudHMg
        b2YgYSBoYXMtbWFueQogIHJlbGF0aW9uc2hpcC4KCiAgVGhlIGBNYW55QXJy
        YXlgIGlzIGluc3RhbnRpYXRlZCBsYXppbHkgdGhlIGZpcnN0IHRpbWUgdGhl
        IHJlbGF0aW9uc2hpcCBpcwogIHJlcXVlc3RlZC4KCiAgIyMjIEludmVyc2Vz
        CgogIE9mdGVuLCB0aGUgcmVsYXRpb25zaGlwcyBpbiBFbWJlciBEYXRhIGFw
        cGxpY2F0aW9ucyB3aWxsIGhhdmUKICBhbiBpbnZlcnNlLiBGb3IgZXhhbXBs
        ZSwgaW1hZ2luZSB0aGUgZm9sbG93aW5nIG1vZGVscyBhcmUKICBkZWZpbmVk
        OgoKICBgYGBqYXZhc2NyaXB0CiAgQXBwLlBvc3QgPSBEUy5Nb2RlbC5leHRl
        bmQoewogICAgY29tbWVudHM6IERTLmhhc01hbnkoJ2NvbW1lbnQnKQogIH0p
        OwoKICBBcHAuQ29tbWVudCA9IERTLk1vZGVsLmV4dGVuZCh7CiAgICBwb3N0
        OiBEUy5iZWxvbmdzVG8oJ3Bvc3QnKQogIH0pOwogIGBgYAoKICBJZiB5b3Ug
        Y3JlYXRlZCBhIG5ldyBpbnN0YW5jZSBvZiBgQXBwLlBvc3RgIGFuZCBhZGRl
        ZAogIGEgYEFwcC5Db21tZW50YCByZWNvcmQgdG8gaXRzIGBjb21tZW50c2Ag
        aGFzLW1hbnkKICByZWxhdGlvbnNoaXAsIHlvdSB3b3VsZCBleHBlY3QgdGhl
        IGNvbW1lbnQncyBgcG9zdGAKICBwcm9wZXJ0eSB0byBiZSBzZXQgdG8gdGhl
        IHBvc3QgdGhhdCBjb250YWluZWQKICB0aGUgaGFzLW1hbnkuCgogIFdlIGNh
        bGwgdGhlIHJlY29yZCB0byB3aGljaCBhIHJlbGF0aW9uc2hpcCBiZWxvbmdz
        IHRoZQogIHJlbGF0aW9uc2hpcCdzIF9vd25lcl8uCgogIEBjbGFzcyBNYW55
        QXJyYXkKICBAbmFtZXNwYWNlIERTCiAgQGV4dGVuZHMgRFMuUmVjb3JkQXJy
        YXkKKi8KRFMuTWFueUFycmF5ID0gRFMuUmVjb3JkQXJyYXkuZXh0ZW5kKHsK
        ICBpbml0OiBmdW5jdGlvbigpIHsKICAgIHRoaXMuX3N1cGVyLmFwcGx5KHRo
        aXMsIGFyZ3VtZW50cyk7CiAgICB0aGlzLl9jaGFuZ2VzVG9TeW5jID0gRW1i
        ZXIuT3JkZXJlZFNldC5jcmVhdGUoKTsKICB9LAoKICAvKioKICAgIFRoZSBw
        cm9wZXJ0eSBuYW1lIG9mIHRoZSByZWxhdGlvbnNoaXAKCiAgICBAcHJvcGVy
        dHkge1N0cmluZ30gbmFtZQogICAgQHByaXZhdGUKICAqLwogIG5hbWU6IG51
        bGwsCgogIC8qKgogICAgVGhlIHJlY29yZCB0byB3aGljaCB0aGlzIHJlbGF0
        aW9uc2hpcCBiZWxvbmdzLgoKICAgIEBwcm9wZXJ0eSB7RFMuTW9kZWx9IG93
        bmVyCiAgICBAcHJpdmF0ZQogICovCiAgb3duZXI6IG51bGwsCgogIC8qKgog
        ICAgYHRydWVgIGlmIHRoZSByZWxhdGlvbnNoaXAgaXMgcG9seW1vcnBoaWMs
        IGBmYWxzZWAgb3RoZXJ3aXNlLgoKICAgIEBwcm9wZXJ0eSB7Qm9vbGVhbn0g
        aXNQb2x5bW9ycGhpYwogICAgQHByaXZhdGUKICAqLwogIGlzUG9seW1vcnBo
        aWM6IGZhbHNlLAoKICAvLyBMT0FESU5HIFNUQVRFCgogIGlzTG9hZGVkOiBm
        YWxzZSwKCiAgLyoqCiAgICBVc2VkIGZvciBhc3luYyBgaGFzTWFueWAgYXJy
        YXlzCiAgICB0byBrZWVwIHRyYWNrIG9mIHdoZW4gdGhleSB3aWxsIHJlc29s
        dmUuCgogICAgQHByb3BlcnR5IHtFbWJlci5SU1ZQLlByb21pc2V9IHByb21p
        c2UKICAgIEBwcml2YXRlCiAgKi8KICBwcm9taXNlOiBudWxsLAoKICAvKioK
        ICAgIEBtZXRob2QgbG9hZGluZ1JlY29yZHNDb3VudAogICAgQHBhcmFtIHtO
        dW1iZXJ9IGNvdW50CiAgICBAcHJpdmF0ZQogICovCiAgbG9hZGluZ1JlY29y
        ZHNDb3VudDogZnVuY3Rpb24oY291bnQpIHsKICAgIHRoaXMubG9hZGluZ1Jl
        Y29yZHNDb3VudCA9IGNvdW50OwogIH0sCgogIC8qKgogICAgQG1ldGhvZCBs
        b2FkZWRSZWNvcmQKICAgIEBwcml2YXRlCiAgKi8KICBsb2FkZWRSZWNvcmQ6
        IGZ1bmN0aW9uKCkgewogICAgdGhpcy5sb2FkaW5nUmVjb3Jkc0NvdW50LS07
        CiAgICBpZiAodGhpcy5sb2FkaW5nUmVjb3Jkc0NvdW50ID09PSAwKSB7CiAg
        ICAgIHNldCh0aGlzLCAnaXNMb2FkZWQnLCB0cnVlKTsKICAgICAgdGhpcy50
        cmlnZ2VyKCdkaWRMb2FkJyk7CiAgICB9CiAgfSwKCiAgLyoqCiAgICBAbWV0
        aG9kIGZldGNoCiAgICBAcHJpdmF0ZQogICovCiAgZmV0Y2g6IGZ1bmN0aW9u
        KCkgewogICAgdmFyIHJlY29yZHMgPSBnZXQodGhpcywgJ2NvbnRlbnQnKSwK
        ICAgICAgICBzdG9yZSA9IGdldCh0aGlzLCAnc3RvcmUnKSwKICAgICAgICBv
        d25lciA9IGdldCh0aGlzLCAnb3duZXInKSwKICAgICAgICByZXNvbHZlciA9
        IEVtYmVyLlJTVlAuZGVmZXIoIkRTOiBNYW55QXJyYXkjZmV0Y2ggIiArIGdl
        dCh0aGlzLCAndHlwZScpKTsKCiAgICB2YXIgdW5sb2FkZWRSZWNvcmRzID0g
        cmVjb3Jkcy5maWx0ZXJQcm9wZXJ0eSgnaXNFbXB0eScsIHRydWUpOwogICAg
        c3RvcmUuZmV0Y2hNYW55KHVubG9hZGVkUmVjb3Jkcywgb3duZXIsIHJlc29s
        dmVyKTsKICB9LAoKICAvLyBPdmVycmlkZXMgRW1iZXIuQXJyYXkncyByZXBs
        YWNlIG1ldGhvZCB0byBpbXBsZW1lbnQKICByZXBsYWNlQ29udGVudDogZnVu
        Y3Rpb24oaW5kZXgsIHJlbW92ZWQsIGFkZGVkKSB7CiAgICAvLyBNYXAgdGhl
        IGFycmF5IG9mIHJlY29yZCBvYmplY3RzIGludG8gYW4gYXJyYXkgb2YgIGNs
        aWVudCBpZHMuCiAgICBhZGRlZCA9IG1hcChhZGRlZCwgZnVuY3Rpb24ocmVj
        b3JkKSB7CiAgICAgIEVtYmVyLmFzc2VydCgiWW91IGNhbm5vdCBhZGQgJyIg
        KyByZWNvcmQuY29uc3RydWN0b3IudHlwZUtleSArICInIHJlY29yZHMgdG8g
        dGhpcyByZWxhdGlvbnNoaXAgKG9ubHkgJyIgKyB0aGlzLnR5cGUudHlwZUtl
        eSArICInIGFsbG93ZWQpIiwgIXRoaXMudHlwZSB8fCByZWNvcmQgaW5zdGFu
        Y2VvZiB0aGlzLnR5cGUpOwogICAgICByZXR1cm4gcmVjb3JkOwogICAgfSwg
        dGhpcyk7CgogICAgdGhpcy5fc3VwZXIoaW5kZXgsIHJlbW92ZWQsIGFkZGVk
        KTsKICB9LAoKICBhcnJhbmdlZENvbnRlbnREaWRDaGFuZ2U6IGZ1bmN0aW9u
        KCkgewogICAgRW1iZXIucnVuLm9uY2UodGhpcywgJ2ZldGNoJyk7CiAgfSwK
        CiAgYXJyYXlDb250ZW50V2lsbENoYW5nZTogZnVuY3Rpb24oaW5kZXgsIHJl
        bW92ZWQsIGFkZGVkKSB7CiAgICB2YXIgb3duZXIgPSBnZXQodGhpcywgJ293
        bmVyJyksCiAgICAgICAgbmFtZSA9IGdldCh0aGlzLCAnbmFtZScpOwoKICAg
        IGlmICghb3duZXIuX3N1c3BlbmRlZFJlbGF0aW9uc2hpcHMpIHsKICAgICAg
        Ly8gVGhpcyBjb2RlIGlzIHRoZSBmaXJzdCBoYWxmIG9mIGNvZGUgdGhhdCBj
        b250aW51ZXMgaW5zaWRlCiAgICAgIC8vIG9mIGFycmF5Q29udGVudERpZENo
        YW5nZS4gSXQgZ2V0cyBvciBjcmVhdGVzIGEgY2hhbmdlIGZyb20KICAgICAg
        Ly8gdGhlIGNoaWxkIG9iamVjdCwgYWRkcyB0aGUgY3VycmVudCBvd25lciBh
        cyB0aGUgb2xkCiAgICAgIC8vIHBhcmVudCBpZiB0aGlzIGlzIHRoZSBmaXJz
        dCB0aW1lIHRoZSBvYmplY3Qgd2FzIHJlbW92ZWQKICAgICAgLy8gZnJvbSBh
        IE1hbnlBcnJheSwgYW5kIHNldHMgYG5ld1BhcmVudGAgdG8gbnVsbC4KICAg
        ICAgLy8KICAgICAgLy8gTGF0ZXIsIGlmIHRoZSBvYmplY3QgaXMgYWRkZWQg
        dG8gYW5vdGhlciBNYW55QXJyYXksCiAgICAgIC8vIHRoZSBgYXJyYXlDb250
        ZW50RGlkQ2hhbmdlYCB3aWxsIHNldCBgbmV3UGFyZW50YCBvbgogICAgICAv
        LyB0aGUgY2hhbmdlLgogICAgICBmb3IgKHZhciBpPWluZGV4OyBpPGluZGV4
        K3JlbW92ZWQ7IGkrKykgewogICAgICAgIHZhciByZWNvcmQgPSBnZXQodGhp
        cywgJ2NvbnRlbnQnKS5vYmplY3RBdChpKTsKCiAgICAgICAgdmFyIGNoYW5n
        ZSA9IERTLlJlbGF0aW9uc2hpcENoYW5nZS5jcmVhdGVDaGFuZ2Uob3duZXIs
        IHJlY29yZCwgZ2V0KHRoaXMsICdzdG9yZScpLCB7CiAgICAgICAgICBwYXJl
        bnRUeXBlOiBvd25lci5jb25zdHJ1Y3RvciwKICAgICAgICAgIGNoYW5nZVR5
        cGU6ICJyZW1vdmUiLAogICAgICAgICAga2luZDogImhhc01hbnkiLAogICAg
        ICAgICAga2V5OiBuYW1lCiAgICAgICAgfSk7CgogICAgICAgIHRoaXMuX2No
        YW5nZXNUb1N5bmMuYWRkKGNoYW5nZSk7CiAgICAgIH0KICAgIH0KCiAgICBy
        ZXR1cm4gdGhpcy5fc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICB9
        LAoKICBhcnJheUNvbnRlbnREaWRDaGFuZ2U6IGZ1bmN0aW9uKGluZGV4LCBy
        ZW1vdmVkLCBhZGRlZCkgewogICAgdGhpcy5fc3VwZXIuYXBwbHkodGhpcywg
        YXJndW1lbnRzKTsKCiAgICB2YXIgb3duZXIgPSBnZXQodGhpcywgJ293bmVy
        JyksCiAgICAgICAgbmFtZSA9IGdldCh0aGlzLCAnbmFtZScpLAogICAgICAg
        IHN0b3JlID0gZ2V0KHRoaXMsICdzdG9yZScpOwoKICAgIGlmICghb3duZXIu
        X3N1c3BlbmRlZFJlbGF0aW9uc2hpcHMpIHsKICAgICAgLy8gVGhpcyBjb2Rl
        IGlzIHRoZSBzZWNvbmQgaGFsZiBvZiBjb2RlIHRoYXQgc3RhcnRlZCBpbgog
        ICAgICAvLyBgYXJyYXlDb250ZW50V2lsbENoYW5nZWAuIEl0IGdldHMgb3Ig
        Y3JlYXRlcyBhIGNoYW5nZQogICAgICAvLyBmcm9tIHRoZSBjaGlsZCBvYmpl
        Y3QsIGFuZCBhZGRzIHRoZSBjdXJyZW50IG93bmVyIGFzCiAgICAgIC8vIHRo
        ZSBuZXcgcGFyZW50LgogICAgICBmb3IgKHZhciBpPWluZGV4OyBpPGluZGV4
        K2FkZGVkOyBpKyspIHsKICAgICAgICB2YXIgcmVjb3JkID0gZ2V0KHRoaXMs
        ICdjb250ZW50Jykub2JqZWN0QXQoaSk7CgogICAgICAgIHZhciBjaGFuZ2Ug
        PSBEUy5SZWxhdGlvbnNoaXBDaGFuZ2UuY3JlYXRlQ2hhbmdlKG93bmVyLCBy
        ZWNvcmQsIHN0b3JlLCB7CiAgICAgICAgICBwYXJlbnRUeXBlOiBvd25lci5j
        b25zdHJ1Y3RvciwKICAgICAgICAgIGNoYW5nZVR5cGU6ICJhZGQiLAogICAg
        ICAgICAga2luZDoiaGFzTWFueSIsCiAgICAgICAgICBrZXk6IG5hbWUKICAg
        ICAgICB9KTsKICAgICAgICBjaGFuZ2UuaGFzTWFueU5hbWUgPSBuYW1lOwoK
        ICAgICAgICB0aGlzLl9jaGFuZ2VzVG9TeW5jLmFkZChjaGFuZ2UpOwogICAg
        ICB9CgogICAgICAvLyBXZSB3YWl0IHVudGlsIHRoZSBhcnJheSBoYXMgZmlu
        aXNoZWQgYmVpbmcKICAgICAgLy8gbXV0YXRlZCBiZWZvcmUgc3luY2luZyB0
        aGUgT25lVG9NYW55Q2hhbmdlcyBjcmVhdGVkCiAgICAgIC8vIGluIGFycmF5
        Q29udGVudFdpbGxDaGFuZ2UsIHNvIHRoYXQgdGhlIGFycmF5CiAgICAgIC8v
        IG1lbWJlcnNoaXAgdGVzdCBpbiB0aGUgc3luYygpIGxvZ2ljIG9wZXJhdGVz
        CiAgICAgIC8vIG9uIHRoZSBmaW5hbCByZXN1bHRzLgogICAgICB0aGlzLl9j
        aGFuZ2VzVG9TeW5jLmZvckVhY2goZnVuY3Rpb24oY2hhbmdlKSB7CiAgICAg
        ICAgY2hhbmdlLnN5bmMoKTsKICAgICAgfSk7CgogICAgICB0aGlzLl9jaGFu
        Z2VzVG9TeW5jLmNsZWFyKCk7CiAgICB9CiAgfSwKCiAgLyoqCiAgICBDcmVh
        dGUgYSBjaGlsZCByZWNvcmQgd2l0aGluIHRoZSBvd25lcgoKICAgIEBtZXRo
        b2QgY3JlYXRlUmVjb3JkCiAgICBAcHJpdmF0ZQogICAgQHBhcmFtIHtPYmpl
        Y3R9IGhhc2gKICAgIEByZXR1cm4ge0RTLk1vZGVsfSByZWNvcmQKICAqLwog
        IGNyZWF0ZVJlY29yZDogZnVuY3Rpb24oaGFzaCkgewogICAgdmFyIG93bmVy
        ID0gZ2V0KHRoaXMsICdvd25lcicpLAogICAgICAgIHN0b3JlID0gZ2V0KG93
        bmVyLCAnc3RvcmUnKSwKICAgICAgICB0eXBlID0gZ2V0KHRoaXMsICd0eXBl
        JyksCiAgICAgICAgcmVjb3JkOwoKICAgIEVtYmVyLmFzc2VydCgiWW91IGNh
        bm5vdCBhZGQgJyIgKyB0eXBlLnR5cGVLZXkgKyAiJyByZWNvcmRzIHRvIHRo
        aXMgcG9seW1vcnBoaWMgcmVsYXRpb25zaGlwLiIsICFnZXQodGhpcywgJ2lz
        UG9seW1vcnBoaWMnKSk7CgogICAgcmVjb3JkID0gc3RvcmUuY3JlYXRlUmVj
        b3JkLmNhbGwoc3RvcmUsIHR5cGUsIGhhc2gpOwogICAgdGhpcy5wdXNoT2Jq
        ZWN0KHJlY29yZCk7CgogICAgcmV0dXJuIHJlY29yZDsKICB9Cgp9KTsKCn0p
        KCk7CgoKCihmdW5jdGlvbigpIHsKLyoqCiAgQG1vZHVsZSBlbWJlci1kYXRh
        CiovCgp9KSgpOwoKCgooZnVuY3Rpb24oKSB7Ci8qZ2xvYmFscyBFbWJlciov
        Ci8qanNoaW50IGVxbnVsbDp0cnVlKi8KLyoqCiAgQG1vZHVsZSBlbWJlci1k
        YXRhCiovCgp2YXIgZ2V0ID0gRW1iZXIuZ2V0LCBzZXQgPSBFbWJlci5zZXQ7
        CnZhciBvbmNlID0gRW1iZXIucnVuLm9uY2U7CnZhciBpc05vbmUgPSBFbWJl
        ci5pc05vbmU7CnZhciBmb3JFYWNoID0gRW1iZXIuRW51bWVyYWJsZVV0aWxz
        LmZvckVhY2g7CnZhciBpbmRleE9mID0gRW1iZXIuRW51bWVyYWJsZVV0aWxz
        LmluZGV4T2Y7CnZhciBtYXAgPSBFbWJlci5FbnVtZXJhYmxlVXRpbHMubWFw
        Owp2YXIgcmVzb2x2ZSA9IEVtYmVyLlJTVlAucmVzb2x2ZTsKdmFyIGNvcHkg
        PSBFbWJlci5jb3B5OwoKLy8gSW1wbGVtZW50b3JzIE5vdGU6Ci8vCi8vICAg
        VGhlIHZhcmlhYmxlcyBpbiB0aGlzIGZpbGUgYXJlIGNvbnNpc3RlbnRseSBu
        YW1lZCBhY2NvcmRpbmcgdG8gdGhlIGZvbGxvd2luZwovLyAgIHNjaGVtZToK
        Ly8KLy8gICAqICtpZCsgbWVhbnMgYW4gaWRlbnRpZmllciBtYW5hZ2VkIGJ5
        IGFuIGV4dGVybmFsIHNvdXJjZSwgcHJvdmlkZWQgaW5zaWRlCi8vICAgICB0
        aGUgZGF0YSBwcm92aWRlZCBieSB0aGF0IHNvdXJjZS4gVGhlc2UgYXJlIGFs
        d2F5cyBjb2VyY2VkIHRvIGJlIHN0cmluZ3MKLy8gICAgIGJlZm9yZSBiZWlu
        ZyB1c2VkIGludGVybmFsbHkuCi8vICAgKiArY2xpZW50SWQrIG1lYW5zIGEg
        dHJhbnNpZW50IG51bWVyaWNhbCBpZGVudGlmaWVyIGdlbmVyYXRlZCBhdCBy
        dW50aW1lIGJ5Ci8vICAgICB0aGUgZGF0YSBzdG9yZS4gSXQgaXMgaW1wb3J0
        YW50IHByaW1hcmlseSBiZWNhdXNlIG5ld2x5IGNyZWF0ZWQgb2JqZWN0cyBt
        YXkKLy8gICAgIG5vdCB5ZXQgaGF2ZSBhbiBleHRlcm5hbGx5IGdlbmVyYXRl
        ZCBpZC4KLy8gICAqICtyZWZlcmVuY2UrIG1lYW5zIGEgcmVjb3JkIHJlZmVy
        ZW5jZSBvYmplY3QsIHdoaWNoIGhvbGRzIG1ldGFkYXRhIGFib3V0IGEKLy8g
        ICAgIHJlY29yZCwgZXZlbiBpZiBpdCBoYXMgbm90IHlldCBiZWVuIGZ1bGx5
        IG1hdGVyaWFsaXplZC4KLy8gICAqICt0eXBlKyBtZWFucyBhIHN1YmNsYXNz
        IG9mIERTLk1vZGVsLgoKLy8gVXNlZCBieSB0aGUgc3RvcmUgdG8gbm9ybWFs
        aXplIElEcyBlbnRlcmluZyB0aGUgc3RvcmUuICBEZXNwaXRlIHRoZSBmYWN0
        Ci8vIHRoYXQgZGV2ZWxvcGVycyBtYXkgcHJvdmlkZSBJRHMgYXMgbnVtYmVy
        cyAoZS5nLiwgYHN0b3JlLmZpbmQoUGVyc29uLCAxKWApLAovLyBpdCBpcyBp
        bXBvcnRhbnQgdGhhdCBpbnRlcm5hbGx5IHdlIHVzZSBzdHJpbmdzLCBzaW5j
        ZSBJRHMgbWF5IGJlIHNlcmlhbGl6ZWQKLy8gYW5kIGxvc2UgdHlwZSBpbmZv
        cm1hdGlvbi4gIEZvciBleGFtcGxlLCBFbWJlcidzIHJvdXRlciBtYXkgcHV0
        IGEgcmVjb3JkJ3MKLy8gSUQgaW50byB0aGUgVVJMLCBhbmQgaWYgd2UgbGF0
        ZXIgdHJ5IHRvIGRlc2VyaWFsaXplIHRoYXQgVVJMIGFuZCBmaW5kIHRoZQov
        LyBjb3JyZXNwb25kaW5nIHJlY29yZCwgd2Ugd2lsbCBub3Qga25vdyBpZiBp
        dCBpcyBhIHN0cmluZyBvciBhIG51bWJlci4KdmFyIGNvZXJjZUlkID0gZnVu
        Y3Rpb24oaWQpIHsKICByZXR1cm4gaWQgPT0gbnVsbCA/IG51bGwgOiBpZCsn
        JzsKfTsKCi8qKgogIFRoZSBzdG9yZSBjb250YWlucyBhbGwgb2YgdGhlIGRh
        dGEgZm9yIHJlY29yZHMgbG9hZGVkIGZyb20gdGhlIHNlcnZlci4KICBJdCBp
        cyBhbHNvIHJlc3BvbnNpYmxlIGZvciBjcmVhdGluZyBpbnN0YW5jZXMgb2Yg
        YERTLk1vZGVsYCB0aGF0IHdyYXAKICB0aGUgaW5kaXZpZHVhbCBkYXRhIGZv
        ciBhIHJlY29yZCwgc28gdGhhdCB0aGV5IGNhbiBiZSBib3VuZCB0byBpbiB5
        b3VyCiAgSGFuZGxlYmFycyB0ZW1wbGF0ZXMuCgogIERlZmluZSB5b3VyIGFw
        cGxpY2F0aW9uJ3Mgc3RvcmUgbGlrZSB0aGlzOgoKICBgYGBqYXZhc2NyaXB0
        CiAgTXlBcHAuU3RvcmUgPSBEUy5TdG9yZS5leHRlbmQoKTsKICBgYGAKCiAg
        TW9zdCBFbWJlci5qcyBhcHBsaWNhdGlvbnMgd2lsbCBvbmx5IGhhdmUgYSBz
        aW5nbGUgYERTLlN0b3JlYCB0aGF0IGlzCiAgYXV0b21hdGljYWxseSBjcmVh
        dGVkIGJ5IHRoZWlyIGBFbWJlci5BcHBsaWNhdGlvbmAuCgogIFlvdSBjYW4g
        cmV0cmlldmUgbW9kZWxzIGZyb20gdGhlIHN0b3JlIGluIHNldmVyYWwgd2F5
        cy4gVG8gcmV0cmlldmUgYSByZWNvcmQKICBmb3IgYSBzcGVjaWZpYyBpZCwg
        dXNlIGBEUy5TdG9yZWAncyBgZmluZCgpYCBtZXRob2Q6CgogIGBgYGphdmFz
        Y3JpcHQKICB2YXIgcGVyc29uID0gc3RvcmUuZmluZCgncGVyc29uJywgMTIz
        KTsKICBgYGAKCiAgSWYgeW91ciBhcHBsaWNhdGlvbiBoYXMgbXVsdGlwbGUg
        YERTLlN0b3JlYCBpbnN0YW5jZXMgKGFuIHVudXN1YWwgY2FzZSksIHlvdSBj
        YW4KICBzcGVjaWZ5IHdoaWNoIHN0b3JlIHNob3VsZCBiZSB1c2VkOgoKICBg
        YGBqYXZhc2NyaXB0CiAgdmFyIHBlcnNvbiA9IHN0b3JlLmZpbmQoQXBwLlBl
        cnNvbiwgMTIzKTsKICBgYGAKCiAgQnkgZGVmYXVsdCwgdGhlIHN0b3JlIHdp
        bGwgdGFsayB0byB5b3VyIGJhY2tlbmQgdXNpbmcgYSBzdGFuZGFyZAogIFJF
        U1QgbWVjaGFuaXNtLiBZb3UgY2FuIGN1c3RvbWl6ZSBob3cgdGhlIHN0b3Jl
        IHRhbGtzIHRvIHlvdXIKICBiYWNrZW5kIGJ5IHNwZWNpZnlpbmcgYSBjdXN0
        b20gYWRhcHRlcjoKCiAgYGBgamF2YXNjcmlwdAogICBNeUFwcC5zdG9yZSA9
        IERTLlN0b3JlLmNyZWF0ZSh7CiAgICAgYWRhcHRlcjogJ015QXBwLkN1c3Rv
        bUFkYXB0ZXInCiAgIH0pOwogICBgYGAKCiAgWW91IGNhbiBsZWFybiBtb3Jl
        IGFib3V0IHdyaXRpbmcgYSBjdXN0b20gYWRhcHRlciBieSByZWFkaW5nIHRo
        ZSBgRFMuQWRhcHRlcmAKICBkb2N1bWVudGF0aW9uLgoKICBAY2xhc3MgU3Rv
        cmUKICBAbmFtZXNwYWNlIERTCiAgQGV4dGVuZHMgRW1iZXIuT2JqZWN0Ciov
        CkRTLlN0b3JlID0gRW1iZXIuT2JqZWN0LmV4dGVuZCh7CgogIC8qKgogICAg
        QG1ldGhvZCBpbml0CiAgICBAcHJpdmF0ZQogICovCiAgaW5pdDogZnVuY3Rp
        b24oKSB7CiAgICAvLyBpbnRlcm5hbCBib29ra2VlcGluZzsgbm90IG9ic2Vy
        dmFibGUKICAgIHRoaXMudHlwZU1hcHMgPSB7fTsKICAgIHRoaXMucmVjb3Jk
        QXJyYXlNYW5hZ2VyID0gRFMuUmVjb3JkQXJyYXlNYW5hZ2VyLmNyZWF0ZSh7
        CiAgICAgIHN0b3JlOiB0aGlzCiAgICB9KTsKICAgIHRoaXMuX3JlbGF0aW9u
        c2hpcENoYW5nZXMgPSB7fTsKICAgIHRoaXMuX3BlbmRpbmdTYXZlID0gW107
        CiAgfSwKCiAgLyoqCiAgICBUaGUgYWRhcHRlciB0byB1c2UgdG8gY29tbXVu
        aWNhdGUgdG8gYSBiYWNrZW5kIHNlcnZlciBvciBvdGhlciBwZXJzaXN0ZW5j
        ZSBsYXllci4KCiAgICBUaGlzIGNhbiBiZSBzcGVjaWZpZWQgYXMgYW4gaW5z
        dGFuY2UsIGNsYXNzLCBvciBzdHJpbmcuCgogICAgSWYgeW91IHdhbnQgdG8g
        c3BlY2lmeSBgQXBwLkN1c3RvbUFkYXB0ZXJgIGFzIGEgc3RyaW5nLCBkbzoK
        CiAgICBgYGBqcwogICAgYWRhcHRlcjogJ2N1c3RvbScKICAgIGBgYAoKICAg
        IEBwcm9wZXJ0eSBhZGFwdGVyCiAgICBAZGVmYXVsdCBEUy5SRVNUQWRhcHRl
        cgogICAgQHR5cGUge0RTLkFkYXB0ZXJ8U3RyaW5nfQogICovCiAgYWRhcHRl
        cjogJy1yZXN0JywKCiAgLyoqCiAgICBSZXR1cm5zIGEgSlNPTiByZXByZXNl
        bnRhdGlvbiBvZiB0aGUgcmVjb3JkIHVzaW5nIGEgY3VzdG9tCiAgICB0eXBl
        LXNwZWNpZmljIHNlcmlhbGl6ZXIsIGlmIG9uZSBleGlzdHMuCgogICAgVGhl
        IGF2YWlsYWJsZSBvcHRpb25zIGFyZToKCiAgICAqIGBpbmNsdWRlSWRgOiBg
        dHJ1ZWAgaWYgdGhlIHJlY29yZCdzIElEIHNob3VsZCBiZSBpbmNsdWRlZCBp
        bgogICAgICB0aGUgSlNPTiByZXByZXNlbnRhdGlvbgoKICAgIEBtZXRob2Qg
        c2VyaWFsaXplCiAgICBAcHJpdmF0ZQogICAgQHBhcmFtIHtEUy5Nb2RlbH0g
        cmVjb3JkIHRoZSByZWNvcmQgdG8gc2VyaWFsaXplCiAgICBAcGFyYW0ge09i
        amVjdH0gb3B0aW9ucyBhbiBvcHRpb25zIGhhc2gKICAqLwogIHNlcmlhbGl6
        ZTogZnVuY3Rpb24ocmVjb3JkLCBvcHRpb25zKSB7CiAgICByZXR1cm4gdGhp
        cy5zZXJpYWxpemVyRm9yKHJlY29yZC5jb25zdHJ1Y3Rvci50eXBlS2V5KS5z
        ZXJpYWxpemUocmVjb3JkLCBvcHRpb25zKTsKICB9LAoKICAvKioKICAgIFRo
        aXMgcHJvcGVydHkgcmV0dXJucyB0aGUgYWRhcHRlciwgYWZ0ZXIgcmVzb2x2
        aW5nIGEgcG9zc2libGUKICAgIHN0cmluZyBrZXkuCgogICAgSWYgdGhlIHN1
        cHBsaWVkIGBhZGFwdGVyYCB3YXMgYSBjbGFzcywgb3IgYSBTdHJpbmcgcHJv
        cGVydHkKICAgIHBhdGggcmVzb2x2ZWQgdG8gYSBjbGFzcywgdGhpcyBwcm9w
        ZXJ0eSB3aWxsIGluc3RhbnRpYXRlIHRoZQogICAgY2xhc3MuCgogICAgVGhp
        cyBwcm9wZXJ0eSBpcyBjYWNoZWFibGUsIHNvIHRoZSBzYW1lIGluc3RhbmNl
        IG9mIGEgc3BlY2lmaWVkCiAgICBhZGFwdGVyIGNsYXNzIHNob3VsZCBiZSB1
        c2VkIGZvciB0aGUgbGlmZXRpbWUgb2YgdGhlIHN0b3JlLgoKICAgIEBwcm9w
        ZXJ0eSBkZWZhdWx0QWRhcHRlcgogICAgQHByaXZhdGUKICAgIEByZXR1cm5z
        IERTLkFkYXB0ZXIKICAqLwogIGRlZmF1bHRBZGFwdGVyOiBFbWJlci5jb21w
        dXRlZCgnYWRhcHRlcicsIGZ1bmN0aW9uKCkgewogICAgdmFyIGFkYXB0ZXIg
        PSBnZXQodGhpcywgJ2FkYXB0ZXInKTsKCiAgICBFbWJlci5hc3NlcnQoJ1lv
        dSB0cmllZCB0byBzZXQgYGFkYXB0ZXJgIHByb3BlcnR5IHRvIGFuIGluc3Rh
        bmNlIG9mIGBEUy5BZGFwdGVyYCwgd2hlcmUgaXQgc2hvdWxkIGJlIGEgbmFt
        ZSBvciBhIGZhY3RvcnknLCAhKGFkYXB0ZXIgaW5zdGFuY2VvZiBEUy5BZGFw
        dGVyKSk7CgogICAgaWYgKHR5cGVvZiBhZGFwdGVyID09PSAnc3RyaW5nJykg
        ewogICAgICBhZGFwdGVyID0gdGhpcy5jb250YWluZXIubG9va3VwKCdhZGFw
        dGVyOicgKyBhZGFwdGVyKSB8fCB0aGlzLmNvbnRhaW5lci5sb29rdXAoJ2Fk
        YXB0ZXI6YXBwbGljYXRpb24nKSB8fCB0aGlzLmNvbnRhaW5lci5sb29rdXAo
        J2FkYXB0ZXI6LXJlc3QnKTsKICAgIH0KCiAgICBpZiAoRFMuQWRhcHRlci5k
        ZXRlY3QoYWRhcHRlcikpIHsKICAgICAgYWRhcHRlciA9IGFkYXB0ZXIuY3Jl
        YXRlKHsgY29udGFpbmVyOiB0aGlzLmNvbnRhaW5lciB9KTsKICAgIH0KCiAg
        ICByZXR1cm4gYWRhcHRlcjsKICB9KSwKCiAgLy8gLi4uLi4uLi4uLi4uLi4u
        Li4uLi4uCiAgLy8gLiBDUkVBVEUgTkVXIFJFQ09SRCAuCiAgLy8gLi4uLi4u
        Li4uLi4uLi4uLi4uLi4uCgogIC8qKgogICAgQ3JlYXRlIGEgbmV3IHJlY29y
        ZCBpbiB0aGUgY3VycmVudCBzdG9yZS4gVGhlIHByb3BlcnRpZXMgcGFzc2Vk
        CiAgICB0byB0aGlzIG1ldGhvZCBhcmUgc2V0IG9uIHRoZSBuZXdseSBjcmVh
        dGVkIHJlY29yZC4KCiAgICBUbyBjcmVhdGUgYSBuZXcgaW5zdGFuY2Ugb2Yg
        YEFwcC5Qb3N0YDoKCiAgICBgYGBqcwogICAgc3RvcmUuY3JlYXRlUmVjb3Jk
        KCdwb3N0JywgewogICAgICB0aXRsZTogIlJhaWxzIGlzIG9tYWthc2UiCiAg
        ICB9KTsKICAgIGBgYAoKICAgIEBtZXRob2QgY3JlYXRlUmVjb3JkCiAgICBA
        cGFyYW0ge1N0cmluZ30gdHlwZQogICAgQHBhcmFtIHtPYmplY3R9IHByb3Bl
        cnRpZXMgYSBoYXNoIG9mIHByb3BlcnRpZXMgdG8gc2V0IG9uIHRoZQogICAg
        ICBuZXdseSBjcmVhdGVkIHJlY29yZC4KICAgIEByZXR1cm5zIHtEUy5Nb2Rl
        bH0gcmVjb3JkCiAgKi8KICBjcmVhdGVSZWNvcmQ6IGZ1bmN0aW9uKHR5cGUs
        IHByb3BlcnRpZXMpIHsKICAgIHR5cGUgPSB0aGlzLm1vZGVsRm9yKHR5cGUp
        OwoKICAgIHByb3BlcnRpZXMgPSBjb3B5KHByb3BlcnRpZXMpIHx8IHt9OwoK
        ICAgIC8vIElmIHRoZSBwYXNzZWQgcHJvcGVydGllcyBkbyBub3QgaW5jbHVk
        ZSBhIHByaW1hcnkga2V5LAogICAgLy8gZ2l2ZSB0aGUgYWRhcHRlciBhbiBv
        cHBvcnR1bml0eSB0byBnZW5lcmF0ZSBvbmUuIFR5cGljYWxseSwKICAgIC8v
        IGNsaWVudC1zaWRlIElEIGdlbmVyYXRvcnMgd2lsbCB1c2Ugc29tZXRoaW5n
        IGxpa2UgdXVpZC5qcwogICAgLy8gdG8gYXZvaWQgY29uZmxpY3RzLgoKICAg
        IGlmIChpc05vbmUocHJvcGVydGllcy5pZCkpIHsKICAgICAgcHJvcGVydGll
        cy5pZCA9IHRoaXMuX2dlbmVyYXRlSWQodHlwZSk7CiAgICB9CgogICAgLy8g
        Q29lcmNlIElEIHRvIGEgc3RyaW5nCiAgICBwcm9wZXJ0aWVzLmlkID0gY29l
        cmNlSWQocHJvcGVydGllcy5pZCk7CgogICAgdmFyIHJlY29yZCA9IHRoaXMu
        YnVpbGRSZWNvcmQodHlwZSwgcHJvcGVydGllcy5pZCk7CgogICAgLy8gTW92
        ZSB0aGUgcmVjb3JkIG91dCBvZiBpdHMgaW5pdGlhbCBgZW1wdHlgIHN0YXRl
        IGludG8KICAgIC8vIHRoZSBgbG9hZGVkYCBzdGF0ZS4KICAgIHJlY29yZC5s
        b2FkZWREYXRhKCk7CgogICAgLy8gU2V0IHRoZSBwcm9wZXJ0aWVzIHNwZWNp
        ZmllZCBvbiB0aGUgcmVjb3JkLgogICAgcmVjb3JkLnNldFByb3BlcnRpZXMo
        cHJvcGVydGllcyk7CgogICAgcmV0dXJuIHJlY29yZDsKICB9LAoKICAvKioK
        ICAgIElmIHBvc3NpYmxlLCB0aGlzIG1ldGhvZCBhc2tzIHRoZSBhZGFwdGVy
        IHRvIGdlbmVyYXRlIGFuIElEIGZvcgogICAgYSBuZXdseSBjcmVhdGVkIHJl
        Y29yZC4KCiAgICBAbWV0aG9kIF9nZW5lcmF0ZUlkCiAgICBAcHJpdmF0ZQog
        ICAgQHBhcmFtIHtTdHJpbmd9IHR5cGUKICAgIEByZXR1cm5zIHtTdHJpbmd9
        IGlmIHRoZSBhZGFwdGVyIGNhbiBnZW5lcmF0ZSBvbmUsIGFuIElECiAgKi8K
        ICBfZ2VuZXJhdGVJZDogZnVuY3Rpb24odHlwZSkgewogICAgdmFyIGFkYXB0
        ZXIgPSB0aGlzLmFkYXB0ZXJGb3IodHlwZSk7CgogICAgaWYgKGFkYXB0ZXIg
        JiYgYWRhcHRlci5nZW5lcmF0ZUlkRm9yUmVjb3JkKSB7CiAgICAgIHJldHVy
        biBhZGFwdGVyLmdlbmVyYXRlSWRGb3JSZWNvcmQodGhpcyk7CiAgICB9Cgog
        ICAgcmV0dXJuIG51bGw7CiAgfSwKCiAgLy8gLi4uLi4uLi4uLi4uLi4uLi4K
        ICAvLyAuIERFTEVURSBSRUNPUkQgLgogIC8vIC4uLi4uLi4uLi4uLi4uLi4u
        CgogIC8qKgogICAgRm9yIHN5bW1ldHJ5LCBhIHJlY29yZCBjYW4gYmUgZGVs
        ZXRlZCB2aWEgdGhlIHN0b3JlLgoKICAgIEV4YW1wbGUKCiAgICBgYGBqYXZh
        c2NyaXB0CiAgICB2YXIgcG9zdCA9IHN0b3JlLmNyZWF0ZVJlY29yZCgncG9z
        dCcsIHsKICAgICAgdGl0bGU6ICJSYWlscyBpcyBvbWFrYXNlIgogICAgfSk7
        CgogICAgc3RvcmUuZGVsZXRlUmVjb3JkKHBvc3QpOwogICAgYGBgCgogICAg
        QG1ldGhvZCBkZWxldGVSZWNvcmQKICAgIEBwYXJhbSB7RFMuTW9kZWx9IHJl
        Y29yZAogICovCiAgZGVsZXRlUmVjb3JkOiBmdW5jdGlvbihyZWNvcmQpIHsK
        ICAgIHJlY29yZC5kZWxldGVSZWNvcmQoKTsKICB9LAoKICAvKioKICAgIEZv
        ciBzeW1tZXRyeSwgYSByZWNvcmQgY2FuIGJlIHVubG9hZGVkIHZpYSB0aGUg
        c3RvcmUuIE9ubHkKICAgIG5vbi1kaXJ0eSByZWNvcmRzIGNhbiBiZSB1bmxv
        YWRlZC4KCiAgICBFeGFtcGxlCgogICAgYGBgamF2YXNjcmlwdAogICAgc3Rv
        cmUuZmluZCgncG9zdCcsIDEpLnRoZW4oZnVuY3Rpb24ocG9zdCkgewogICAg
        ICBzdG9yZS51bmxvYWRSZWNvcmQocG9zdCk7CiAgICB9KTsKICAgIGBgYAoK
        ICAgIEBtZXRob2QgdW5sb2FkUmVjb3JkCiAgICBAcGFyYW0ge0RTLk1vZGVs
        fSByZWNvcmQKICAqLwogIHVubG9hZFJlY29yZDogZnVuY3Rpb24ocmVjb3Jk
        KSB7CiAgICByZWNvcmQudW5sb2FkUmVjb3JkKCk7CiAgfSwKCiAgLy8gLi4u
        Li4uLi4uLi4uLi4uLgogIC8vIC4gRklORCBSRUNPUkRTIC4KICAvLyAuLi4u
        Li4uLi4uLi4uLi4uCgogIC8qKgogICAgVGhpcyBpcyB0aGUgbWFpbiBlbnRy
        eSBwb2ludCBpbnRvIGZpbmRpbmcgcmVjb3Jkcy4gVGhlIGZpcnN0IHBhcmFt
        ZXRlciB0bwogICAgdGhpcyBtZXRob2QgaXMgdGhlIG1vZGVsJ3MgbmFtZSBh
        cyBhIHN0cmluZy4KCiAgICAtLS0KCiAgICBUbyBmaW5kIGEgcmVjb3JkIGJ5
        IElELCBwYXNzIHRoZSBgaWRgIGFzIHRoZSBzZWNvbmQgcGFyYW1ldGVyOgoK
        ICAgIGBgYGphdmFzY3JpcHQKICAgIHN0b3JlLmZpbmQoJ3BlcnNvbicsIDEp
        OwogICAgYGBgCgogICAgVGhlIGBmaW5kYCBtZXRob2Qgd2lsbCBhbHdheXMg
        cmV0dXJuIGEgKipwcm9taXNlKiogdGhhdCB3aWxsIGJlIHJlc29sdmVkCiAg
        ICB3aXRoIHRoZSByZWNvcmQuIElmIHRoZSByZWNvcmQgd2FzIGFscmVhZHkg
        aW4gdGhlIHN0b3JlLCB0aGUgcHJvbWlzZSB3aWxsCiAgICBiZSByZXNvbHZl
        ZCBpbW1lZGlhdGVseS4gT3RoZXJ3aXNlLCB0aGUgc3RvcmUgd2lsbCBhc2sg
        dGhlIGFkYXB0ZXIncyBgZmluZGAKICAgIG1ldGhvZCB0byBmaW5kIHRoZSBu
        ZWNlc3NhcnkgZGF0YS4KCiAgICBUaGUgYGZpbmRgIG1ldGhvZCB3aWxsIGFs
        d2F5cyByZXNvbHZlIGl0cyBwcm9taXNlIHdpdGggdGhlIHNhbWUgb2JqZWN0
        IGZvcgogICAgYSBnaXZlbiB0eXBlIGFuZCBgaWRgLgoKICAgIC0tLQoKICAg
        IFRvIGZpbmQgYWxsIHJlY29yZHMgZm9yIGEgdHlwZSwgY2FsbCBgZmluZGAg
        d2l0aCBubyBhZGRpdGlvbmFsIHBhcmFtZXRlcnM6CgogICAgYGBgamF2YXNj
        cmlwdAogICAgc3RvcmUuZmluZCgncGVyc29uJyk7CiAgICBgYGAKCiAgICBU
        aGlzIHdpbGwgYXNrIHRoZSBhZGFwdGVyJ3MgYGZpbmRBbGxgIG1ldGhvZCB0
        byBmaW5kIHRoZSByZWNvcmRzIGZvciB0aGUKICAgIGdpdmVuIHR5cGUsIGFu
        ZCByZXR1cm4gYSBwcm9taXNlIHRoYXQgd2lsbCBiZSByZXNvbHZlZCBvbmNl
        IHRoZSBzZXJ2ZXIKICAgIHJldHVybnMgdGhlIHZhbHVlcy4KCiAgICAtLS0K
        CiAgICBUbyBmaW5kIGEgcmVjb3JkIGJ5IGEgcXVlcnksIGNhbGwgYGZpbmRg
        IHdpdGggYSBoYXNoIGFzIHRoZSBzZWNvbmQKICAgIHBhcmFtZXRlcjoKCiAg
        ICBgYGBqYXZhc2NyaXB0CiAgICBzdG9yZS5maW5kKEFwcC5QZXJzb24sIHsg
        cGFnZTogMSB9KTsKICAgIGBgYAoKICAgIFRoaXMgd2lsbCBhc2sgdGhlIGFk
        YXB0ZXIncyBgZmluZFF1ZXJ5YCBtZXRob2QgdG8gZmluZCB0aGUgcmVjb3Jk
        cyBmb3IKICAgIHRoZSBxdWVyeSwgYW5kIHJldHVybiBhIHByb21pc2UgdGhh
        dCB3aWxsIGJlIHJlc29sdmVkIG9uY2UgdGhlIHNlcnZlcgogICAgcmVzcG9u
        ZHMuCgogICAgQG1ldGhvZCBmaW5kCiAgICBAcGFyYW0ge1N0cmluZyBvciBz
        dWJjbGFzcyBvZiBEUy5Nb2RlbH0gdHlwZQogICAgQHBhcmFtIHtPYmplY3R8
        U3RyaW5nfEludGVnZXJ8bnVsbH0gaWQKICAgIEByZXR1cm4ge1Byb21pc2V9
        IHByb21pc2UKICAqLwogIGZpbmQ6IGZ1bmN0aW9uKHR5cGUsIGlkKSB7CiAg
        ICBpZiAoaWQgPT09IHVuZGVmaW5lZCkgewogICAgICByZXR1cm4gdGhpcy5m
        aW5kQWxsKHR5cGUpOwogICAgfQoKICAgIC8vIFdlIGFyZSBwYXNzZWQgYSBx
        dWVyeSBpbnN0ZWFkIG9mIGFuIGlkLgogICAgaWYgKEVtYmVyLnR5cGVPZihp
        ZCkgPT09ICdvYmplY3QnKSB7CiAgICAgIHJldHVybiB0aGlzLmZpbmRRdWVy
        eSh0eXBlLCBpZCk7CiAgICB9CgogICAgcmV0dXJuIHRoaXMuZmluZEJ5SWQo
        dHlwZSwgY29lcmNlSWQoaWQpKTsKICB9LAoKICAvKioKICAgIFRoaXMgbWV0
        aG9kIHJldHVybnMgYSByZWNvcmQgZm9yIGEgZ2l2ZW4gdHlwZSBhbmQgaWQg
        Y29tYmluYXRpb24uCgogICAgQG1ldGhvZCBmaW5kQnlJZAogICAgQHByaXZh
        dGUKICAgIEBwYXJhbSB7U3RyaW5nIG9yIHN1YmNsYXNzIG9mIERTLk1vZGVs
        fSB0eXBlCiAgICBAcGFyYW0ge1N0cmluZ3xJbnRlZ2VyfSBpZAogICAgQHJl
        dHVybiB7UHJvbWlzZX0gcHJvbWlzZQogICovCiAgZmluZEJ5SWQ6IGZ1bmN0
        aW9uKHR5cGUsIGlkKSB7CiAgICB0eXBlID0gdGhpcy5tb2RlbEZvcih0eXBl
        KTsKCiAgICB2YXIgcmVjb3JkID0gdGhpcy5yZWNvcmRGb3JJZCh0eXBlLCBp
        ZCk7CgogICAgdmFyIHByb21pc2UgPSB0aGlzLmZldGNoUmVjb3JkKHJlY29y
        ZCkgfHwgcmVzb2x2ZShyZWNvcmQsICJEUzogU3RvcmUjZmluZEJ5SWQgIiAr
        IHR5cGUgKyAiIHdpdGggaWQ6ICIgKyBpZCk7CiAgICByZXR1cm4gcHJvbWlz
        ZU9iamVjdChwcm9taXNlKTsKICB9LAoKICAvKioKICAgIFRoaXMgbWV0aG9k
        IG1ha2VzIGEgc2VyaWVzIG9mIHJlcXVlc3RzIHRvIHRoZSBhZGFwdGVyJ3Mg
        YGZpbmRgIG1ldGhvZAogICAgYW5kIHJldHVybnMgYSBwcm9taXNlIHRoYXQg
        cmVzb2x2ZXMgb25jZSB0aGV5IGFyZSBhbGwgbG9hZGVkLgoKICAgIEBwcml2
        YXRlCiAgICBAbWV0aG9kIGZpbmRCeUlkcwogICAgQHBhcmFtIHtTdHJpbmd9
        IHR5cGUKICAgIEBwYXJhbSB7QXJyYXl9IGlkcwogICAgQHJldHVybnMge1By
        b21pc2V9IHByb21pc2UKICAqLwogIGZpbmRCeUlkczogZnVuY3Rpb24odHlw
        ZSwgaWRzKSB7CiAgICB2YXIgc3RvcmUgPSB0aGlzOwogICAgdmFyIHByb21p
        c2VMYWJlbCA9ICJEUzogU3RvcmUjZmluZEJ5SWRzICIgKyB0eXBlOwogICAg
        cmV0dXJuIHByb21pc2VBcnJheShFbWJlci5SU1ZQLmFsbChtYXAoaWRzLCBm
        dW5jdGlvbihpZCkgewogICAgICByZXR1cm4gc3RvcmUuZmluZEJ5SWQodHlw
        ZSwgaWQpOwogICAgfSkpLnRoZW4oRW1iZXIuQSwgbnVsbCwgIkRTOiBTdG9y
        ZSNmaW5kQnlJZHMgb2YgIiArIHR5cGUgKyAiIGNvbXBsZXRlIikpOwogIH0s
        CgogIC8qKgogICAgVGhpcyBtZXRob2QgaXMgY2FsbGVkIGJ5IGBmaW5kQnlJ
        ZGAgaWYgaXQgZGlzY292ZXJzIHRoYXQgYSBwYXJ0aWN1bGFyCiAgICB0eXBl
        L2lkIHBhaXIgaGFzbid0IGJlZW4gbG9hZGVkIHlldCB0byBraWNrIG9mZiBh
        IHJlcXVlc3QgdG8gdGhlCiAgICBhZGFwdGVyLgoKICAgIEBtZXRob2QgZmV0
        Y2hSZWNvcmQKICAgIEBwcml2YXRlCiAgICBAcGFyYW0ge0RTLk1vZGVsfSBy
        ZWNvcmQKICAgIEByZXR1cm5zIHtQcm9taXNlfSBwcm9taXNlCiAgKi8KICBm
        ZXRjaFJlY29yZDogZnVuY3Rpb24ocmVjb3JkKSB7CiAgICBpZiAoaXNOb25l
        KHJlY29yZCkpIHsgcmV0dXJuIG51bGw7IH0KICAgIGlmIChyZWNvcmQuX2xv
        YWRpbmdQcm9taXNlKSB7IHJldHVybiByZWNvcmQuX2xvYWRpbmdQcm9taXNl
        OyB9CiAgICBpZiAoIWdldChyZWNvcmQsICdpc0VtcHR5JykpIHsgcmV0dXJu
        IG51bGw7IH0KCiAgICB2YXIgdHlwZSA9IHJlY29yZC5jb25zdHJ1Y3RvciwK
        ICAgICAgICBpZCA9IGdldChyZWNvcmQsICdpZCcpOwoKICAgIHZhciBhZGFw
        dGVyID0gdGhpcy5hZGFwdGVyRm9yKHR5cGUpOwoKICAgIEVtYmVyLmFzc2Vy
        dCgiWW91IHRyaWVkIHRvIGZpbmQgYSByZWNvcmQgYnV0IHlvdSBoYXZlIG5v
        IGFkYXB0ZXIgKGZvciAiICsgdHlwZSArICIpIiwgYWRhcHRlcik7CiAgICBF
        bWJlci5hc3NlcnQoIllvdSB0cmllZCB0byBmaW5kIGEgcmVjb3JkIGJ1dCB5
        b3VyIGFkYXB0ZXIgKGZvciAiICsgdHlwZSArICIpIGRvZXMgbm90IGltcGxl
        bWVudCAnZmluZCciLCBhZGFwdGVyLmZpbmQpOwoKICAgIHZhciBwcm9taXNl
        ID0gX2ZpbmQoYWRhcHRlciwgdGhpcywgdHlwZSwgaWQpOwogICAgcmVjb3Jk
        LmxvYWRpbmdEYXRhKHByb21pc2UpOwogICAgcmV0dXJuIHByb21pc2U7CiAg
        fSwKCiAgLyoqCiAgICBHZXQgYSByZWNvcmQgYnkgYSBnaXZlbiB0eXBlIGFu
        ZCBJRCB3aXRob3V0IHRyaWdnZXJpbmcgYSBmZXRjaC4KCiAgICBUaGlzIG1l
        dGhvZCB3aWxsIHN5bmNocm9ub3VzbHkgcmV0dXJuIHRoZSByZWNvcmQgaWYg
        aXQncyBhdmFpbGFibGUuCiAgICBPdGhlcndpc2UsIGl0IHdpbGwgcmV0dXJu
        IG51bGwuCgogICAgYGBganMKICAgIHZhciBwb3N0ID0gc3RvcmUuZ2V0QnlJ
        ZCgncG9zdCcsIDEpOwogICAgYGBgCgogICAgQG1ldGhvZCBnZXRCeUlkCiAg
        ICBAcGFyYW0ge1N0cmluZyBvciBzdWJjbGFzcyBvZiBEUy5Nb2RlbH0gdHlw
        ZQogICAgQHBhcmFtIHtTdHJpbmd8SW50ZWdlcn0gaWQKICAgIEBwYXJhbSB7
        RFMuTW9kZWx9IHJlY29yZAogICovCiAgZ2V0QnlJZDogZnVuY3Rpb24odHlw
        ZSwgaWQpIHsKICAgIGlmICh0aGlzLmhhc1JlY29yZEZvcklkKHR5cGUsIGlk
        KSkgewogICAgICByZXR1cm4gdGhpcy5yZWNvcmRGb3JJZCh0eXBlLCBpZCk7
        CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gbnVsbDsKICAgIH0KICB9LAoK
        ICAvKioKICAgIFRoaXMgbWV0aG9kIGlzIGNhbGxlZCBieSB0aGUgcmVjb3Jk
        J3MgYHJlbG9hZGAgbWV0aG9kLgoKICAgIFRoaXMgbWV0aG9kIGNhbGxzIHRo
        ZSBhZGFwdGVyJ3MgYGZpbmRgIG1ldGhvZCwgd2hpY2ggcmV0dXJucyBhIHBy
        b21pc2UuIFdoZW4KICAgICoqdGhhdCoqIHByb21pc2UgcmVzb2x2ZXMsIGBy
        ZWxvYWRSZWNvcmRgIHdpbGwgcmVzb2x2ZSB0aGUgcHJvbWlzZSByZXR1cm5l
        ZAogICAgYnkgdGhlIHJlY29yZCdzIGByZWxvYWRgLgoKICAgIEBtZXRob2Qg
        cmVsb2FkUmVjb3JkCiAgICBAcHJpdmF0ZQogICAgQHBhcmFtIHtEUy5Nb2Rl
        bH0gcmVjb3JkCiAgICBAcmV0dXJuIHtQcm9taXNlfSBwcm9taXNlCiAgKi8K
        ICByZWxvYWRSZWNvcmQ6IGZ1bmN0aW9uKHJlY29yZCkgewogICAgdmFyIHR5
        cGUgPSByZWNvcmQuY29uc3RydWN0b3IsCiAgICAgICAgYWRhcHRlciA9IHRo
        aXMuYWRhcHRlckZvcih0eXBlKSwKICAgICAgICBpZCA9IGdldChyZWNvcmQs
        ICdpZCcpOwoKICAgIEVtYmVyLmFzc2VydCgiWW91IGNhbm5vdCByZWxvYWQg
        YSByZWNvcmQgd2l0aG91dCBhbiBJRCIsIGlkKTsKICAgIEVtYmVyLmFzc2Vy
        dCgiWW91IHRyaWVkIHRvIHJlbG9hZCBhIHJlY29yZCBidXQgeW91IGhhdmUg
        bm8gYWRhcHRlciAoZm9yICIgKyB0eXBlICsgIikiLCBhZGFwdGVyKTsKICAg
        IEVtYmVyLmFzc2VydCgiWW91IHRyaWVkIHRvIHJlbG9hZCBhIHJlY29yZCBi
        dXQgeW91ciBhZGFwdGVyIGRvZXMgbm90IGltcGxlbWVudCBgZmluZGAiLCBh
        ZGFwdGVyLmZpbmQpOwoKICAgIHJldHVybiBfZmluZChhZGFwdGVyLCB0aGlz
        LCB0eXBlLCBpZCk7CiAgfSwKCiAgLyoqCiAgICBUaGlzIG1ldGhvZCB0YWtl
        cyBhIGxpc3Qgb2YgcmVjb3JkcywgZ3JvdXBzIHRoZSByZWNvcmRzIGJ5IHR5
        cGUsCiAgICBjb252ZXJ0cyB0aGUgcmVjb3JkcyBpbnRvIElEcywgYW5kIHRo
        ZW4gaW52b2tlcyB0aGUgYWRhcHRlcidzIGBmaW5kTWFueWAKICAgIG1ldGhv
        ZC4KCiAgICBUaGUgcmVjb3JkcyBhcmUgZ3JvdXBlZCBieSB0eXBlIHRvIGlu
        dm9rZSBgZmluZE1hbnlgIG9uIGFkYXB0ZXJzCiAgICBmb3IgZWFjaCB1bmlx
        dWUgdHlwZSBpbiByZWNvcmRzLgoKICAgIEl0IGlzIHVzZWQgYm90aCBieSBh
        IGJyYW5kIG5ldyByZWxhdGlvbnNoaXAgKHZpYSB0aGUgYGZpbmRNYW55YAog
        ICAgbWV0aG9kKSBvciB3aGVuIHRoZSBkYXRhIHVuZGVybHlpbmcgYW4gZXhp
        c3RpbmcgcmVsYXRpb25zaGlwCiAgICBjaGFuZ2VzLgoKICAgIEBtZXRob2Qg
        ZmV0Y2hNYW55CiAgICBAcHJpdmF0ZQogICAgQHBhcmFtIHtBcnJheX0gcmVj
        b3JkcwogICAgQHBhcmFtIHtEUy5Nb2RlbH0gb3duZXIKICAgIEBwYXJhbSB7
        UmVzb2x2ZXJ9IHJlc29sdmVyCiAgKi8KICBmZXRjaE1hbnk6IGZ1bmN0aW9u
        KHJlY29yZHMsIG93bmVyLCByZXNvbHZlcikgewogICAgaWYgKCFyZWNvcmRz
        Lmxlbmd0aCkgeyByZXR1cm47IH0KCiAgICAvLyBHcm91cCBCeSBUeXBlCiAg
        ICB2YXIgcmVjb3Jkc0J5VHlwZU1hcCA9IEVtYmVyLk1hcFdpdGhEZWZhdWx0
        LmNyZWF0ZSh7CiAgICAgIGRlZmF1bHRWYWx1ZTogZnVuY3Rpb24oKSB7IHJl
        dHVybiBFbWJlci5BKCk7IH0KICAgIH0pOwoKICAgIGZvckVhY2gocmVjb3Jk
        cywgZnVuY3Rpb24ocmVjb3JkKSB7CiAgICAgIHJlY29yZHNCeVR5cGVNYXAu
        Z2V0KHJlY29yZC5jb25zdHJ1Y3RvcikucHVzaChyZWNvcmQpOwogICAgfSk7
        CgogICAgZm9yRWFjaChyZWNvcmRzQnlUeXBlTWFwLCBmdW5jdGlvbih0eXBl
        LCByZWNvcmRzKSB7CiAgICAgIHZhciBpZHMgPSByZWNvcmRzLm1hcFByb3Bl
        cnR5KCdpZCcpLAogICAgICAgICAgYWRhcHRlciA9IHRoaXMuYWRhcHRlckZv
        cih0eXBlKTsKCiAgICAgIEVtYmVyLmFzc2VydCgiWW91IHRyaWVkIHRvIGxv
        YWQgbWFueSByZWNvcmRzIGJ1dCB5b3UgaGF2ZSBubyBhZGFwdGVyIChmb3Ig
        IiArIHR5cGUgKyAiKSIsIGFkYXB0ZXIpOwogICAgICBFbWJlci5hc3NlcnQo
        IllvdSB0cmllZCB0byBsb2FkIG1hbnkgcmVjb3JkcyBidXQgeW91ciBhZGFw
        dGVyIGRvZXMgbm90IGltcGxlbWVudCBgZmluZE1hbnlgIiwgYWRhcHRlci5m
        aW5kTWFueSk7CgogICAgICByZXNvbHZlci5yZXNvbHZlKF9maW5kTWFueShh
        ZGFwdGVyLCB0aGlzLCB0eXBlLCBpZHMsIG93bmVyKSk7CiAgICB9LCB0aGlz
        KTsKICB9LAoKICAvKioKICAgIFJldHVybnMgdHJ1ZSBpZiBhIHJlY29yZCBm
        b3IgYSBnaXZlbiB0eXBlIGFuZCBJRCBpcyBhbHJlYWR5IGxvYWRlZC4KCiAg
        ICBAbWV0aG9kIGhhc1JlY29yZEZvcklkCiAgICBAcGFyYW0ge1N0cmluZyBv
        ciBzdWJjbGFzcyBvZiBEUy5Nb2RlbH0gdHlwZQogICAgQHBhcmFtIHtTdHJp
        bmd8SW50ZWdlcn0gaWQKICAgIEByZXR1cm5zIHtCb29sZWFufQogICovCiAg
        aGFzUmVjb3JkRm9ySWQ6IGZ1bmN0aW9uKHR5cGUsIGlkKSB7CiAgICBpZCA9
        IGNvZXJjZUlkKGlkKTsKICAgIHR5cGUgPSB0aGlzLm1vZGVsRm9yKHR5cGUp
        OwogICAgcmV0dXJuICEhdGhpcy50eXBlTWFwRm9yKHR5cGUpLmlkVG9SZWNv
        cmRbaWRdOwogIH0sCgogIC8qKgogICAgUmV0dXJucyBpZCByZWNvcmQgZm9y
        IGEgZ2l2ZW4gdHlwZSBhbmQgSUQuIElmIG9uZSBpc24ndCBhbHJlYWR5IGxv
        YWRlZCwKICAgIGl0IGJ1aWxkcyBhIG5ldyByZWNvcmQgYW5kIGxlYXZlcyBp
        dCBpbiB0aGUgYGVtcHR5YCBzdGF0ZS4KCiAgICBAbWV0aG9kIHJlY29yZEZv
        cklkCiAgICBAcHJpdmF0ZQogICAgQHBhcmFtIHtTdHJpbmcgb3Igc3ViY2xh
        c3Mgb2YgRFMuTW9kZWx9IHR5cGUKICAgIEBwYXJhbSB7U3RyaW5nfEludGVn
        ZXJ9IGlkCiAgICBAcmV0dXJucyB7RFMuTW9kZWx9IHJlY29yZAogICovCiAg
        cmVjb3JkRm9ySWQ6IGZ1bmN0aW9uKHR5cGUsIGlkKSB7CiAgICB0eXBlID0g
        dGhpcy5tb2RlbEZvcih0eXBlKTsKCiAgICBpZCA9IGNvZXJjZUlkKGlkKTsK
        CiAgICB2YXIgcmVjb3JkID0gdGhpcy50eXBlTWFwRm9yKHR5cGUpLmlkVG9S
        ZWNvcmRbaWRdOwoKICAgIGlmICghcmVjb3JkKSB7CiAgICAgIHJlY29yZCA9
        IHRoaXMuYnVpbGRSZWNvcmQodHlwZSwgaWQpOwogICAgfQoKICAgIHJldHVy
        biByZWNvcmQ7CiAgfSwKCiAgLyoqCiAgICBAbWV0aG9kIGZpbmRNYW55CiAg
        ICBAcHJpdmF0ZQogICAgQHBhcmFtIHtEUy5Nb2RlbH0gb3duZXIKICAgIEBw
        YXJhbSB7QXJyYXl9IHJlY29yZHMKICAgIEBwYXJhbSB7U3RyaW5nIG9yIHN1
        YmNsYXNzIG9mIERTLk1vZGVsfSB0eXBlCiAgICBAcGFyYW0ge1Jlc29sdmVy
        fSByZXNvbHZlcgogICAgQHJldHVybiB7RFMuTWFueUFycmF5fSByZWNvcmRz
        CiAgKi8KICBmaW5kTWFueTogZnVuY3Rpb24ob3duZXIsIHJlY29yZHMsIHR5
        cGUsIHJlc29sdmVyKSB7CiAgICB0eXBlID0gdGhpcy5tb2RlbEZvcih0eXBl
        KTsKCiAgICByZWNvcmRzID0gRW1iZXIuQShyZWNvcmRzKTsKCiAgICB2YXIg
        dW5sb2FkZWRSZWNvcmRzID0gcmVjb3Jkcy5maWx0ZXJQcm9wZXJ0eSgnaXNF
        bXB0eScsIHRydWUpLAogICAgICAgIG1hbnlBcnJheSA9IHRoaXMucmVjb3Jk
        QXJyYXlNYW5hZ2VyLmNyZWF0ZU1hbnlBcnJheSh0eXBlLCByZWNvcmRzKTsK
        CiAgICBmb3JFYWNoKHVubG9hZGVkUmVjb3JkcywgZnVuY3Rpb24ocmVjb3Jk
        KSB7CiAgICAgIHJlY29yZC5sb2FkaW5nRGF0YSgpOwogICAgfSk7CgogICAg
        bWFueUFycmF5LmxvYWRpbmdSZWNvcmRzQ291bnQgPSB1bmxvYWRlZFJlY29y
        ZHMubGVuZ3RoOwoKICAgIGlmICh1bmxvYWRlZFJlY29yZHMubGVuZ3RoKSB7
        CiAgICAgIGZvckVhY2godW5sb2FkZWRSZWNvcmRzLCBmdW5jdGlvbihyZWNv
        cmQpIHsKICAgICAgICB0aGlzLnJlY29yZEFycmF5TWFuYWdlci5yZWdpc3Rl
        cldhaXRpbmdSZWNvcmRBcnJheShyZWNvcmQsIG1hbnlBcnJheSk7CiAgICAg
        IH0sIHRoaXMpOwoKICAgICAgdGhpcy5mZXRjaE1hbnkodW5sb2FkZWRSZWNv
        cmRzLCBvd25lciwgcmVzb2x2ZXIpOwogICAgfSBlbHNlIHsKICAgICAgaWYg
        KHJlc29sdmVyKSB7IHJlc29sdmVyLnJlc29sdmUoKTsgfQogICAgICBtYW55
        QXJyYXkuc2V0KCdpc0xvYWRlZCcsIHRydWUpOwogICAgICBFbWJlci5ydW4u
        b25jZShtYW55QXJyYXksICd0cmlnZ2VyJywgJ2RpZExvYWQnKTsKICAgIH0K
        CiAgICByZXR1cm4gbWFueUFycmF5OwogIH0sCgogIC8qKgogICAgSWYgYSBy
        ZWxhdGlvbnNoaXAgd2FzIG9yaWdpbmFsbHkgcG9wdWxhdGVkIGJ5IHRoZSBh
        ZGFwdGVyIGFzIGEgbGluawogICAgKGFzIG9wcG9zZWQgdG8gYSBsaXN0IG9m
        IElEcyksIHRoaXMgbWV0aG9kIGlzIGNhbGxlZCB3aGVuIHRoZQogICAgcmVs
        YXRpb25zaGlwIGlzIGZldGNoZWQuCgogICAgVGhlIGxpbmsgKHdoaWNoIGlz
        IHVzdWFsbHkgYSBVUkwpIGlzIHBhc3NlZCB0aHJvdWdoIHVuY2hhbmdlZCwg
        c28gdGhlCiAgICBhZGFwdGVyIGNhbiBtYWtlIHdoYXRldmVyIHJlcXVlc3Qg
        aXQgd2FudHMuCgogICAgVGhlIHVzdWFsIHVzZS1jYXNlIGlzIGZvciB0aGUg
        c2VydmVyIHRvIHJlZ2lzdGVyIGEgVVJMIGFzIGEgbGluaywgYW5kCiAgICB0
        aGVuIHVzZSB0aGF0IFVSTCBpbiB0aGUgZnV0dXJlIHRvIG1ha2UgYSByZXF1
        ZXN0IGZvciB0aGUgcmVsYXRpb25zaGlwLgoKICAgIEBtZXRob2QgZmluZEhh
        c01hbnkKICAgIEBwcml2YXRlCiAgICBAcGFyYW0ge0RTLk1vZGVsfSBvd25l
        cgogICAgQHBhcmFtIHthbnl9IGxpbmsKICAgIEBwYXJhbSB7U3RyaW5nIG9y
        IHN1YmNsYXNzIG9mIERTLk1vZGVsfSB0eXBlCiAgICBAcGFyYW0ge1Jlc29s
        dmVyfSByZXNvbHZlcgogICAgQHJldHVybiB7RFMuTWFueUFycmF5fQogICov
        CiAgZmluZEhhc01hbnk6IGZ1bmN0aW9uKG93bmVyLCBsaW5rLCByZWxhdGlv
        bnNoaXAsIHJlc29sdmVyKSB7CiAgICB2YXIgYWRhcHRlciA9IHRoaXMuYWRh
        cHRlckZvcihvd25lci5jb25zdHJ1Y3Rvcik7CgogICAgRW1iZXIuYXNzZXJ0
        KCJZb3UgdHJpZWQgdG8gbG9hZCBhIGhhc01hbnkgcmVsYXRpb25zaGlwIGJ1
        dCB5b3UgaGF2ZSBubyBhZGFwdGVyIChmb3IgIiArIG93bmVyLmNvbnN0cnVj
        dG9yICsgIikiLCBhZGFwdGVyKTsKICAgIEVtYmVyLmFzc2VydCgiWW91IHRy
        aWVkIHRvIGxvYWQgYSBoYXNNYW55IHJlbGF0aW9uc2hpcCBmcm9tIGEgc3Bl
        Y2lmaWVkIGBsaW5rYCBpbiB0aGUgb3JpZ2luYWwgcGF5bG9hZCBidXQgeW91
        ciBhZGFwdGVyIGRvZXMgbm90IGltcGxlbWVudCBgZmluZEhhc01hbnlgIiwg
        YWRhcHRlci5maW5kSGFzTWFueSk7CgogICAgdmFyIHJlY29yZHMgPSB0aGlz
        LnJlY29yZEFycmF5TWFuYWdlci5jcmVhdGVNYW55QXJyYXkocmVsYXRpb25z
        aGlwLnR5cGUsIEVtYmVyLkEoW10pKTsKICAgIHJlc29sdmVyLnJlc29sdmUo
        X2ZpbmRIYXNNYW55KGFkYXB0ZXIsIHRoaXMsIG93bmVyLCBsaW5rLCByZWxh
        dGlvbnNoaXApKTsKICAgIHJldHVybiByZWNvcmRzOwogIH0sCgogIC8qKgog
        ICAgQG1ldGhvZCBmaW5kQmVsb25nc1RvCiAgICBAcHJpdmF0ZQogICAgQHBh
        cmFtIHtEUy5Nb2RlbH0gb3duZXIKICAgIEBwYXJhbSB7YW55fSBsaW5rCiAg
        ICBAcGFyYW0ge1JlbGF0aW9uc2hpcH0gcmVsYXRpb25zaGlwCiAgICBAcGFy
        YW0ge1Jlc29sdmVyfSByZXNvbHZlcgogICovCiAgZmluZEJlbG9uZ3NUbzog
        ZnVuY3Rpb24ob3duZXIsIGxpbmssIHJlbGF0aW9uc2hpcCwgcmVzb2x2ZXIp
        IHsKICAgIHZhciBhZGFwdGVyID0gdGhpcy5hZGFwdGVyRm9yKG93bmVyLmNv
        bnN0cnVjdG9yKTsKCiAgICBFbWJlci5hc3NlcnQoIllvdSB0cmllZCB0byBs
        b2FkIGEgYmVsb25nc1RvIHJlbGF0aW9uc2hpcCBidXQgeW91IGhhdmUgbm8g
        YWRhcHRlciAoZm9yICIgKyBvd25lci5jb25zdHJ1Y3RvciArICIpIiwgYWRh
        cHRlcik7CiAgICBFbWJlci5hc3NlcnQoIllvdSB0cmllZCB0byBsb2FkIGEg
        YmVsb25nc1RvIHJlbGF0aW9uc2hpcCBmcm9tIGEgc3BlY2lmaWVkIGBsaW5r
        YCBpbiB0aGUgb3JpZ2luYWwgcGF5bG9hZCBidXQgeW91ciBhZGFwdGVyIGRv
        ZXMgbm90IGltcGxlbWVudCBgZmluZEJlbG9uZ3NUb2AiLCBhZGFwdGVyLmZp
        bmRCZWxvbmdzVG8pOwoKICAgIHJlc29sdmVyLnJlc29sdmUoX2ZpbmRCZWxv
        bmdzVG8oYWRhcHRlciwgdGhpcywgb3duZXIsIGxpbmssIHJlbGF0aW9uc2hp
        cCkpOwogIH0sCgogIC8qKgogICAgVGhpcyBtZXRob2QgZGVsZWdhdGVzIGEg
        cXVlcnkgdG8gdGhlIGFkYXB0ZXIuIFRoaXMgaXMgdGhlIG9uZSBwbGFjZSB3
        aGVyZQogICAgYWRhcHRlci1sZXZlbCBzZW1hbnRpY3MgYXJlIGV4cG9zZWQg
        dG8gdGhlIGFwcGxpY2F0aW9uLgoKICAgIEV4cG9zaW5nIHF1ZXJpZXMgdGhp
        cyB3YXkgc2VlbXMgcHJlZmVyYWJsZSB0byBjcmVhdGluZyBhbiBhYnN0cmFj
        dCBxdWVyeQogICAgbGFuZ3VhZ2UgZm9yIGFsbCBzZXJ2ZXItc2lkZSBxdWVy
        aWVzLCBhbmQgdGhlbiByZXF1aXJlIGFsbCBhZGFwdGVycyB0bwogICAgaW1w
        bGVtZW50IHRoZW0uCgogICAgVGhpcyBtZXRob2QgcmV0dXJucyBhIHByb21p
        c2UsIHdoaWNoIGlzIHJlc29sdmVkIHdpdGggYSBgUmVjb3JkQXJyYXlgCiAg
        ICBvbmNlIHRoZSBzZXJ2ZXIgcmV0dXJucy4KCiAgICBAbWV0aG9kIGZpbmRR
        dWVyeQogICAgQHByaXZhdGUKICAgIEBwYXJhbSB7U3RyaW5nIG9yIHN1YmNs
        YXNzIG9mIERTLk1vZGVsfSB0eXBlCiAgICBAcGFyYW0ge2FueX0gcXVlcnkg
        YW4gb3BhcXVlIHF1ZXJ5IHRvIGJlIHVzZWQgYnkgdGhlIGFkYXB0ZXIKICAg
        IEByZXR1cm4ge1Byb21pc2V9IHByb21pc2UKICAqLwogIGZpbmRRdWVyeTog
        ZnVuY3Rpb24odHlwZSwgcXVlcnkpIHsKICAgIHR5cGUgPSB0aGlzLm1vZGVs
        Rm9yKHR5cGUpOwoKICAgIHZhciBhcnJheSA9IHRoaXMucmVjb3JkQXJyYXlN
        YW5hZ2VyCiAgICAgIC5jcmVhdGVBZGFwdGVyUG9wdWxhdGVkUmVjb3JkQXJy
        YXkodHlwZSwgcXVlcnkpOwoKICAgIHZhciBhZGFwdGVyID0gdGhpcy5hZGFw
        dGVyRm9yKHR5cGUpLAogICAgICAgIHByb21pc2VMYWJlbCA9ICJEUzogU3Rv
        cmUjZmluZFF1ZXJ5ICIgKyB0eXBlLAogICAgICAgIHJlc29sdmVyID0gRW1i
        ZXIuUlNWUC5kZWZlcihwcm9taXNlTGFiZWwpOwoKICAgIEVtYmVyLmFzc2Vy
        dCgiWW91IHRyaWVkIHRvIGxvYWQgYSBxdWVyeSBidXQgeW91IGhhdmUgbm8g
        YWRhcHRlciAoZm9yICIgKyB0eXBlICsgIikiLCBhZGFwdGVyKTsKICAgIEVt
        YmVyLmFzc2VydCgiWW91IHRyaWVkIHRvIGxvYWQgYSBxdWVyeSBidXQgeW91
        ciBhZGFwdGVyIGRvZXMgbm90IGltcGxlbWVudCBgZmluZFF1ZXJ5YCIsIGFk
        YXB0ZXIuZmluZFF1ZXJ5KTsKCiAgICByZXNvbHZlci5yZXNvbHZlKF9maW5k
        UXVlcnkoYWRhcHRlciwgdGhpcywgdHlwZSwgcXVlcnksIGFycmF5KSk7Cgog
        ICAgcmV0dXJuIHByb21pc2VBcnJheShyZXNvbHZlci5wcm9taXNlKTsKICB9
        LAoKICAvKioKICAgIFRoaXMgbWV0aG9kIHJldHVybnMgYW4gYXJyYXkgb2Yg
        YWxsIHJlY29yZHMgYWRhcHRlciBjYW4gZmluZC4KICAgIEl0IHRyaWdnZXJz
        IHRoZSBhZGFwdGVyJ3MgYGZpbmRBbGxgIG1ldGhvZCB0byBnaXZlIGl0IGFu
        IG9wcG9ydHVuaXR5IHRvIHBvcHVsYXRlCiAgICB0aGUgYXJyYXkgd2l0aCBy
        ZWNvcmRzIG9mIHRoYXQgdHlwZS4KCiAgICBAbWV0aG9kIGZpbmRBbGwKICAg
        IEBwcml2YXRlCiAgICBAcGFyYW0ge1N0cmluZyBvciBzdWJjbGFzcyBvZiBE
        Uy5Nb2RlbH0gdHlwZQogICAgQHJldHVybiB7RFMuQWRhcHRlclBvcHVsYXRl
        ZFJlY29yZEFycmF5fQogICovCiAgZmluZEFsbDogZnVuY3Rpb24odHlwZSkg
        ewogICAgdHlwZSA9IHRoaXMubW9kZWxGb3IodHlwZSk7CgogICAgcmV0dXJu
        IHRoaXMuZmV0Y2hBbGwodHlwZSwgdGhpcy5hbGwodHlwZSkpOwogIH0sCgog
        IC8qKgogICAgQG1ldGhvZCBmZXRjaEFsbAogICAgQHByaXZhdGUKICAgIEBw
        YXJhbSB7RFMuTW9kZWx9IHR5cGUKICAgIEBwYXJhbSB7RFMuUmVjb3JkQXJy
        YXl9IGFycmF5CiAgICBAcmV0dXJucyB7UHJvbWlzZX0gcHJvbWlzZQogICov
        CiAgZmV0Y2hBbGw6IGZ1bmN0aW9uKHR5cGUsIGFycmF5KSB7CiAgICB2YXIg
        YWRhcHRlciA9IHRoaXMuYWRhcHRlckZvcih0eXBlKSwKICAgICAgICBzaW5j
        ZVRva2VuID0gdGhpcy50eXBlTWFwRm9yKHR5cGUpLm1ldGFkYXRhLnNpbmNl
        OwoKICAgIHNldChhcnJheSwgJ2lzVXBkYXRpbmcnLCB0cnVlKTsKCiAgICBF
        bWJlci5hc3NlcnQoIllvdSB0cmllZCB0byBsb2FkIGFsbCByZWNvcmRzIGJ1
        dCB5b3UgaGF2ZSBubyBhZGFwdGVyIChmb3IgIiArIHR5cGUgKyAiKSIsIGFk
        YXB0ZXIpOwogICAgRW1iZXIuYXNzZXJ0KCJZb3UgdHJpZWQgdG8gbG9hZCBh
        bGwgcmVjb3JkcyBidXQgeW91ciBhZGFwdGVyIGRvZXMgbm90IGltcGxlbWVu
        dCBgZmluZEFsbGAiLCBhZGFwdGVyLmZpbmRBbGwpOwoKICAgIHJldHVybiBw
        cm9taXNlQXJyYXkoX2ZpbmRBbGwoYWRhcHRlciwgdGhpcywgdHlwZSwgc2lu
        Y2VUb2tlbikpOwogIH0sCgogIC8qKgogICAgQG1ldGhvZCBkaWRVcGRhdGVB
        bGwKICAgIEBwYXJhbSB7RFMuTW9kZWx9IHR5cGUKICAqLwogIGRpZFVwZGF0
        ZUFsbDogZnVuY3Rpb24odHlwZSkgewogICAgdmFyIGZpbmRBbGxDYWNoZSA9
        IHRoaXMudHlwZU1hcEZvcih0eXBlKS5maW5kQWxsQ2FjaGU7CiAgICBzZXQo
        ZmluZEFsbENhY2hlLCAnaXNVcGRhdGluZycsIGZhbHNlKTsKICB9LAoKICAv
        KioKICAgIFRoaXMgbWV0aG9kIHJldHVybnMgYSBmaWx0ZXJlZCBhcnJheSB0
        aGF0IGNvbnRhaW5zIGFsbCBvZiB0aGUga25vd24gcmVjb3JkcwogICAgZm9y
        IGEgZ2l2ZW4gdHlwZS4KCiAgICBOb3RlIHRoYXQgYmVjYXVzZSBpdCdzIGp1
        c3QgYSBmaWx0ZXIsIGl0IHdpbGwgaGF2ZSBhbnkgbG9jYWxseQogICAgY3Jl
        YXRlZCByZWNvcmRzIG9mIHRoZSB0eXBlLgoKICAgIEFsc28gbm90ZSB0aGF0
        IG11bHRpcGxlIGNhbGxzIHRvIGBhbGxgIGZvciBhIGdpdmVuIHR5cGUgd2ls
        bCBhbHdheXMKICAgIHJldHVybiB0aGUgc2FtZSBSZWNvcmRBcnJheS4KCiAg
        ICBFeGFtcGxlCgogICAgYGBgamF2YXNjcmlwdAogICAgdmFyIGxvY2FsX3Bv
        c3RzID0gc3RvcmUuYWxsKEFwcC5Qb3N0KTsKICAgIGBgYAoKICAgIEBtZXRo
        b2QgYWxsCiAgICBAcGFyYW0ge1N0cmluZyBvciBzdWJjbGFzcyBvZiBEUy5N
        b2RlbH0gdHlwZQogICAgQHJldHVybiB7RFMuUmVjb3JkQXJyYXl9CiAgKi8K
        ICBhbGw6IGZ1bmN0aW9uKHR5cGUpIHsKICAgIHR5cGUgPSB0aGlzLm1vZGVs
        Rm9yKHR5cGUpOwoKICAgIHZhciB0eXBlTWFwID0gdGhpcy50eXBlTWFwRm9y
        KHR5cGUpLAogICAgICAgIGZpbmRBbGxDYWNoZSA9IHR5cGVNYXAuZmluZEFs
        bENhY2hlOwoKICAgIGlmIChmaW5kQWxsQ2FjaGUpIHsgcmV0dXJuIGZpbmRB
        bGxDYWNoZTsgfQoKICAgIHZhciBhcnJheSA9IHRoaXMucmVjb3JkQXJyYXlN
        YW5hZ2VyLmNyZWF0ZVJlY29yZEFycmF5KHR5cGUpOwoKICAgIHR5cGVNYXAu
        ZmluZEFsbENhY2hlID0gYXJyYXk7CiAgICByZXR1cm4gYXJyYXk7CiAgfSwK
        CgogIC8qKgogICAgVGhpcyBtZXRob2QgdW5sb2FkcyBhbGwgb2YgdGhlIGtu
        b3duIHJlY29yZHMgZm9yIGEgZ2l2ZW4gdHlwZS4KCiAgICBgYGBqYXZhc2Ny
        aXB0CiAgICBzdG9yZS51bmxvYWRBbGwoQXBwLlBvc3QpOwogICAgYGBgCgog
        ICAgQG1ldGhvZCB1bmxvYWRBbGwKICAgIEBwYXJhbSB7U3RyaW5nIG9yIHN1
        YmNsYXNzIG9mIERTLk1vZGVsfSB0eXBlCiAgKi8KICB1bmxvYWRBbGw6IGZ1
        bmN0aW9uKHR5cGUpIHsKICAgIHR5cGUgPSB0aGlzLm1vZGVsRm9yKHR5cGUp
        OwoKICAgIHZhciB0eXBlTWFwID0gdGhpcy50eXBlTWFwRm9yKHR5cGUpLAog
        ICAgICAgIHJlY29yZHMgPSB0eXBlTWFwLnJlY29yZHMuc3BsaWNlKDApLCBy
        ZWNvcmQ7CgogICAgd2hpbGUocmVjb3JkID0gcmVjb3Jkcy5wb3AoKSkgewog
        ICAgICByZWNvcmQudW5sb2FkUmVjb3JkKCk7CiAgICB9CgogICAgdHlwZU1h
        cC5maW5kQWxsQ2FjaGUgPSBudWxsOwogIH0sCgogIC8qKgogICAgVGFrZXMg
        YSB0eXBlIGFuZCBmaWx0ZXIgZnVuY3Rpb24sIGFuZCByZXR1cm5zIGEgbGl2
        ZSBSZWNvcmRBcnJheSB0aGF0CiAgICByZW1haW5zIHVwIHRvIGRhdGUgYXMg
        bmV3IHJlY29yZHMgYXJlIGxvYWRlZCBpbnRvIHRoZSBzdG9yZSBvciBjcmVh
        dGVkCiAgICBsb2NhbGx5LgoKICAgIFRoZSBjYWxsYmFjayBmdW5jdGlvbiB0
        YWtlcyBhIG1hdGVyaWFsaXplZCByZWNvcmQsIGFuZCByZXR1cm5zIHRydWUK
        ICAgIGlmIHRoZSByZWNvcmQgc2hvdWxkIGJlIGluY2x1ZGVkIGluIHRoZSBm
        aWx0ZXIgYW5kIGZhbHNlIGlmIGl0IHNob3VsZAogICAgbm90LgoKICAgIFRo
        ZSBmaWx0ZXIgZnVuY3Rpb24gaXMgY2FsbGVkIG9uY2Ugb24gYWxsIHJlY29y
        ZHMgZm9yIHRoZSB0eXBlIHdoZW4KICAgIGl0IGlzIGNyZWF0ZWQsIGFuZCB0
        aGVuIG9uY2Ugb24gZWFjaCBuZXdseSBsb2FkZWQgb3IgY3JlYXRlZCByZWNv
        cmQuCgogICAgSWYgYW55IG9mIGEgcmVjb3JkJ3MgcHJvcGVydGllcyBjaGFu
        Z2UsIG9yIGlmIGl0IGNoYW5nZXMgc3RhdGUsIHRoZQogICAgZmlsdGVyIGZ1
        bmN0aW9uIHdpbGwgYmUgaW52b2tlZCBhZ2FpbiB0byBkZXRlcm1pbmUgd2hl
        dGhlciBpdCBzaG91bGQKICAgIHN0aWxsIGJlIGluIHRoZSBhcnJheS4KCiAg
        ICBPcHRpb25hbGx5IHlvdSBjYW4gcGFzcyBhIHF1ZXJ5IHdoaWNoIHdpbGwg
        YmUgdHJpZ2dlcmVkIGF0IGZpcnN0LiBUaGUKICAgIHJlc3VsdHMgcmV0dXJu
        ZWQgYnkgdGhlIHNlcnZlciBjb3VsZCB0aGVuIGFwcGVhciBpbiB0aGUgZmls
        dGVyIGlmIHRoZXkKICAgIG1hdGNoIHRoZSBmaWx0ZXIgZnVuY3Rpb24uCgog
        ICAgRXhhbXBsZQoKICAgIGBgYGphdmFzY3JpcHQKICAgIHN0b3JlLmZpbHRl
        cihBcHAuUG9zdCwge3VucmVhZDogdHJ1ZX0sIGZ1bmN0aW9uKHBvc3QpIHsK
        ICAgICAgcmV0dXJuIHBvc3QuZ2V0KCd1bnJlYWQnKTsKICAgIH0pLnRoZW4o
        ZnVuY3Rpb24odW5yZWFkUG9zdHMpIHsKICAgICAgdW5yZWFkUG9zdHMuZ2V0
        KCdsZW5ndGgnKTsgLy8gNQogICAgICB2YXIgdW5yZWFkUG9zdCA9IHVucmVh
        ZFBvc3RzLm9iamVjdEF0KDApOwogICAgICB1bnJlYWRQb3N0LnNldCgndW5y
        ZWFkJywgZmFsc2UpOwogICAgICB1bnJlYWRQb3N0cy5nZXQoJ2xlbmd0aCcp
        OyAvLyA0CiAgICB9KTsKICAgIGBgYAoKICAgIEBtZXRob2QgZmlsdGVyCiAg
        ICBAcGFyYW0ge1N0cmluZyBvciBzdWJjbGFzcyBvZiBEUy5Nb2RlbH0gdHlw
        ZQogICAgQHBhcmFtIHtPYmplY3R9IHF1ZXJ5IG9wdGlvbmFsIHF1ZXJ5CiAg
        ICBAcGFyYW0ge0Z1bmN0aW9ufSBmaWx0ZXIKICAgIEByZXR1cm4ge0RTLlBy
        b21pc2VBcnJheX0KICAqLwogIGZpbHRlcjogZnVuY3Rpb24odHlwZSwgcXVl
        cnksIGZpbHRlcikgewogICAgdmFyIHByb21pc2U7CgogICAgLy8gYWxsb3cg
        YW4gb3B0aW9uYWwgc2VydmVyIHF1ZXJ5CiAgICBpZiAoYXJndW1lbnRzLmxl
        bmd0aCA9PT0gMykgewogICAgICBwcm9taXNlID0gdGhpcy5maW5kUXVlcnko
        dHlwZSwgcXVlcnkpOwogICAgfSBlbHNlIGlmIChhcmd1bWVudHMubGVuZ3Ro
        ID09PSAyKSB7CiAgICAgIGZpbHRlciA9IHF1ZXJ5OwogICAgfQoKICAgIHR5
        cGUgPSB0aGlzLm1vZGVsRm9yKHR5cGUpOwoKICAgIHZhciBhcnJheSA9IHRo
        aXMucmVjb3JkQXJyYXlNYW5hZ2VyCiAgICAgIC5jcmVhdGVGaWx0ZXJlZFJl
        Y29yZEFycmF5KHR5cGUsIGZpbHRlcik7CiAgICBwcm9taXNlID0gcHJvbWlz
        ZSB8fCByZXNvbHZlKGFycmF5KTsKCiAgICByZXR1cm4gcHJvbWlzZUFycmF5
        KHByb21pc2UudGhlbihmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIGFycmF5
        OwogICAgfSwgbnVsbCwgIkRTOiBTdG9yZSNmaWx0ZXIgb2YgIiArIHR5cGUp
        KTsKICB9LAoKICAvKioKICAgIFRoaXMgbWV0aG9kIHJldHVybnMgaWYgYSBj
        ZXJ0YWluIHJlY29yZCBpcyBhbHJlYWR5IGxvYWRlZAogICAgaW4gdGhlIHN0
        b3JlLiBVc2UgdGhpcyBmdW5jdGlvbiB0byBrbm93IGJlZm9yZWhhbmQgaWYg
        YSBmaW5kKCkKICAgIHdpbGwgcmVzdWx0IGluIGEgcmVxdWVzdCBvciB0aGF0
        IGl0IHdpbGwgYmUgYSBjYWNoZSBoaXQuCgogICAgIEV4YW1wbGUKCiAgICBg
        YGBqYXZhc2NyaXB0CiAgICBzdG9yZS5yZWNvcmRJc0xvYWRlZChBcHAuUG9z
        dCwgMSk7IC8vIGZhbHNlCiAgICBzdG9yZS5maW5kKEFwcC5Qb3N0LCAxKS50
        aGVuKGZ1bmN0aW9uKCkgewogICAgICBzdG9yZS5yZWNvcmRJc0xvYWRlZChB
        cHAuUG9zdCwgMSk7IC8vIHRydWUKICAgIH0pOwogICAgYGBgCgogICAgQG1l
        dGhvZCByZWNvcmRJc0xvYWRlZAogICAgQHBhcmFtIHtTdHJpbmcgb3Igc3Vi
        Y2xhc3Mgb2YgRFMuTW9kZWx9IHR5cGUKICAgIEBwYXJhbSB7c3RyaW5nfSBp
        ZAogICAgQHJldHVybiB7Ym9vbGVhbn0KICAqLwogIHJlY29yZElzTG9hZGVk
        OiBmdW5jdGlvbih0eXBlLCBpZCkgewogICAgaWYgKCF0aGlzLmhhc1JlY29y
        ZEZvcklkKHR5cGUsIGlkKSkgeyByZXR1cm4gZmFsc2U7IH0KICAgIHJldHVy
        biAhZ2V0KHRoaXMucmVjb3JkRm9ySWQodHlwZSwgaWQpLCAnaXNFbXB0eScp
        OwogIH0sCgogIC8qKgogICAgVGhpcyBtZXRob2QgcmV0dXJucyB0aGUgbWV0
        YWRhdGEgZm9yIGEgc3BlY2lmaWMgdHlwZS4KCiAgICBAbWV0aG9kIG1ldGFk
        YXRhRm9yCiAgICBAcGFyYW0ge1N0cmluZyBvciBzdWJjbGFzcyBvZiBEUy5N
        b2RlbH0gdHlwZQogICAgQHJldHVybiB7b2JqZWN0fQogICovCiAgbWV0YWRh
        dGFGb3I6IGZ1bmN0aW9uKHR5cGUpIHsKICAgIHR5cGUgPSB0aGlzLm1vZGVs
        Rm9yKHR5cGUpOwogICAgcmV0dXJuIHRoaXMudHlwZU1hcEZvcih0eXBlKS5t
        ZXRhZGF0YTsKICB9LAoKICAvLyAuLi4uLi4uLi4uLi4KICAvLyAuIFVQREFU
        SU5HIC4KICAvLyAuLi4uLi4uLi4uLi4KCiAgLyoqCiAgICBJZiB0aGUgYWRh
        cHRlciB1cGRhdGVzIGF0dHJpYnV0ZXMgb3IgYWNrbm93bGVkZ2VzIGNyZWF0
        aW9uCiAgICBvciBkZWxldGlvbiwgdGhlIHJlY29yZCB3aWxsIG5vdGlmeSB0
        aGUgc3RvcmUgdG8gdXBkYXRlIGl0cwogICAgbWVtYmVyc2hpcCBpbiBhbnkg
        ZmlsdGVycy4KICAgIFRvIGF2b2lkIHRocmFzaGluZywgdGhpcyBtZXRob2Qg
        aXMgaW52b2tlZCBvbmx5IG9uY2UgcGVyCgogICAgcnVuIGxvb3AgcGVyIHJl
        Y29yZC4KCiAgICBAbWV0aG9kIGRhdGFXYXNVcGRhdGVkCiAgICBAcHJpdmF0
        ZQogICAgQHBhcmFtIHtDbGFzc30gdHlwZQogICAgQHBhcmFtIHtEUy5Nb2Rl
        bH0gcmVjb3JkCiAgKi8KICBkYXRhV2FzVXBkYXRlZDogZnVuY3Rpb24odHlw
        ZSwgcmVjb3JkKSB7CiAgICB0aGlzLnJlY29yZEFycmF5TWFuYWdlci5yZWNv
        cmREaWRDaGFuZ2UocmVjb3JkKTsKICB9LAoKICAvLyAuLi4uLi4uLi4uLi4u
        LgogIC8vIC4gUEVSU0lTVElORyAuCiAgLy8gLi4uLi4uLi4uLi4uLi4KCiAg
        LyoqCiAgICBUaGlzIG1ldGhvZCBpcyBjYWxsZWQgYnkgYHJlY29yZC5zYXZl
        YCwgYW5kIGdldHMgcGFzc2VkIGEKICAgIHJlc29sdmVyIGZvciB0aGUgcHJv
        bWlzZSB0aGF0IGByZWNvcmQuc2F2ZWAgcmV0dXJucy4KCiAgICBJdCBzY2hl
        ZHVsZXMgc2F2aW5nIHRvIGhhcHBlbiBhdCB0aGUgZW5kIG9mIHRoZSBydW4g
        bG9vcC4KCiAgICBAbWV0aG9kIHNjaGVkdWxlU2F2ZQogICAgQHByaXZhdGUK
        ICAgIEBwYXJhbSB7RFMuTW9kZWx9IHJlY29yZAogICAgQHBhcmFtIHtSZXNv
        bHZlcn0gcmVzb2x2ZXIKICAqLwogIHNjaGVkdWxlU2F2ZTogZnVuY3Rpb24o
        cmVjb3JkLCByZXNvbHZlcikgewogICAgcmVjb3JkLmFkYXB0ZXJXaWxsQ29t
        bWl0KCk7CiAgICB0aGlzLl9wZW5kaW5nU2F2ZS5wdXNoKFtyZWNvcmQsIHJl
        c29sdmVyXSk7CiAgICBvbmNlKHRoaXMsICdmbHVzaFBlbmRpbmdTYXZlJyk7
        CiAgfSwKCiAgLyoqCiAgICBUaGlzIG1ldGhvZCBpcyBjYWxsZWQgYXQgdGhl
        IGVuZCBvZiB0aGUgcnVuIGxvb3AsIGFuZAogICAgZmx1c2hlcyBhbnkgcmVj
        b3JkcyBwYXNzZWQgaW50byBgc2NoZWR1bGVTYXZlYAoKICAgIEBtZXRob2Qg
        Zmx1c2hQZW5kaW5nU2F2ZQogICAgQHByaXZhdGUKICAqLwogIGZsdXNoUGVu
        ZGluZ1NhdmU6IGZ1bmN0aW9uKCkgewogICAgdmFyIHBlbmRpbmcgPSB0aGlz
        Ll9wZW5kaW5nU2F2ZS5zbGljZSgpOwogICAgdGhpcy5fcGVuZGluZ1NhdmUg
        PSBbXTsKCiAgICBmb3JFYWNoKHBlbmRpbmcsIGZ1bmN0aW9uKHR1cGxlKSB7
        CiAgICAgIHZhciByZWNvcmQgPSB0dXBsZVswXSwgcmVzb2x2ZXIgPSB0dXBs
        ZVsxXSwKICAgICAgICAgIGFkYXB0ZXIgPSB0aGlzLmFkYXB0ZXJGb3IocmVj
        b3JkLmNvbnN0cnVjdG9yKSwKICAgICAgICAgIG9wZXJhdGlvbjsKCiAgICAg
        IGlmIChnZXQocmVjb3JkLCAnaXNOZXcnKSkgewogICAgICAgIG9wZXJhdGlv
        biA9ICdjcmVhdGVSZWNvcmQnOwogICAgICB9IGVsc2UgaWYgKGdldChyZWNv
        cmQsICdpc0RlbGV0ZWQnKSkgewogICAgICAgIG9wZXJhdGlvbiA9ICdkZWxl
        dGVSZWNvcmQnOwogICAgICB9IGVsc2UgewogICAgICAgIG9wZXJhdGlvbiA9
        ICd1cGRhdGVSZWNvcmQnOwogICAgICB9CgogICAgICByZXNvbHZlci5yZXNv
        bHZlKF9jb21taXQoYWRhcHRlciwgdGhpcywgb3BlcmF0aW9uLCByZWNvcmQp
        KTsKICAgIH0sIHRoaXMpOwogIH0sCgogIC8qKgogICAgVGhpcyBtZXRob2Qg
        aXMgY2FsbGVkIG9uY2UgdGhlIHByb21pc2UgcmV0dXJuZWQgYnkgYW4KICAg
        IGFkYXB0ZXIncyBgY3JlYXRlUmVjb3JkYCwgYHVwZGF0ZVJlY29yZGAgb3Ig
        YGRlbGV0ZVJlY29yZGAKICAgIGlzIHJlc29sdmVkLgoKICAgIElmIHRoZSBk
        YXRhIHByb3ZpZGVzIGEgc2VydmVyLWdlbmVyYXRlZCBJRCwgaXQgd2lsbAog
        ICAgdXBkYXRlIHRoZSByZWNvcmQgYW5kIHRoZSBzdG9yZSdzIGluZGV4ZXMu
        CgogICAgQG1ldGhvZCBkaWRTYXZlUmVjb3JkCiAgICBAcHJpdmF0ZQogICAg
        QHBhcmFtIHtEUy5Nb2RlbH0gcmVjb3JkIHRoZSBpbi1mbGlnaHQgcmVjb3Jk
        CiAgICBAcGFyYW0ge09iamVjdH0gZGF0YSBvcHRpb25hbCBkYXRhIChzZWUg
        YWJvdmUpCiAgKi8KICBkaWRTYXZlUmVjb3JkOiBmdW5jdGlvbihyZWNvcmQs
        IGRhdGEpIHsKICAgIGlmIChkYXRhKSB7CiAgICAgIC8vIG5vcm1hbGl6ZSBy
        ZWxhdGlvbnNoaXAgSURzIGludG8gcmVjb3JkcwogICAgICBkYXRhID0gbm9y
        bWFsaXplUmVsYXRpb25zaGlwcyh0aGlzLCByZWNvcmQuY29uc3RydWN0b3Is
        IGRhdGEsIHJlY29yZCk7CgogICAgICB0aGlzLnVwZGF0ZUlkKHJlY29yZCwg
        ZGF0YSk7CiAgICB9CgogICAgcmVjb3JkLmFkYXB0ZXJEaWRDb21taXQoZGF0
        YSk7CiAgfSwKCiAgLyoqCiAgICBUaGlzIG1ldGhvZCBpcyBjYWxsZWQgb25j
        ZSB0aGUgcHJvbWlzZSByZXR1cm5lZCBieSBhbgogICAgYWRhcHRlcidzIGBj
        cmVhdGVSZWNvcmRgLCBgdXBkYXRlUmVjb3JkYCBvciBgZGVsZXRlUmVjb3Jk
        YAogICAgaXMgcmVqZWN0ZWQgd2l0aCBhIGBEUy5JbnZhbGlkRXJyb3JgLgoK
        ICAgIEBtZXRob2QgcmVjb3JkV2FzSW52YWxpZAogICAgQHByaXZhdGUKICAg
        IEBwYXJhbSB7RFMuTW9kZWx9IHJlY29yZAogICAgQHBhcmFtIHtPYmplY3R9
        IGVycm9ycwogICovCiAgcmVjb3JkV2FzSW52YWxpZDogZnVuY3Rpb24ocmVj
        b3JkLCBlcnJvcnMpIHsKICAgIHJlY29yZC5hZGFwdGVyRGlkSW52YWxpZGF0
        ZShlcnJvcnMpOwogIH0sCgogIC8qKgogICAgVGhpcyBtZXRob2QgaXMgY2Fs
        bGVkIG9uY2UgdGhlIHByb21pc2UgcmV0dXJuZWQgYnkgYW4KICAgIGFkYXB0
        ZXIncyBgY3JlYXRlUmVjb3JkYCwgYHVwZGF0ZVJlY29yZGAgb3IgYGRlbGV0
        ZVJlY29yZGAKICAgIGlzIHJlamVjdGVkICh3aXRoIGFueXRoaW5nIG90aGVy
        IHRoYW4gYSBgRFMuSW52YWxpZEVycm9yYCkuCgogICAgQG1ldGhvZCByZWNv
        cmRXYXNFcnJvcgogICAgQHByaXZhdGUKICAgIEBwYXJhbSB7RFMuTW9kZWx9
        IHJlY29yZAogICovCiAgcmVjb3JkV2FzRXJyb3I6IGZ1bmN0aW9uKHJlY29y
        ZCkgewogICAgcmVjb3JkLmFkYXB0ZXJEaWRFcnJvcigpOwogIH0sCgogIC8q
        KgogICAgV2hlbiBhbiBhZGFwdGVyJ3MgYGNyZWF0ZVJlY29yZGAsIGB1cGRh
        dGVSZWNvcmRgIG9yIGBkZWxldGVSZWNvcmRgCiAgICByZXNvbHZlcyB3aXRo
        IGRhdGEsIHRoaXMgbWV0aG9kIGV4dHJhY3RzIHRoZSBJRCBmcm9tIHRoZSBz
        dXBwbGllZAogICAgZGF0YS4KCiAgICBAbWV0aG9kIHVwZGF0ZUlkCiAgICBA
        cHJpdmF0ZQogICAgQHBhcmFtIHtEUy5Nb2RlbH0gcmVjb3JkCiAgICBAcGFy
        YW0ge09iamVjdH0gZGF0YQogICovCiAgdXBkYXRlSWQ6IGZ1bmN0aW9uKHJl
        Y29yZCwgZGF0YSkgewogICAgdmFyIG9sZElkID0gZ2V0KHJlY29yZCwgJ2lk
        JyksCiAgICAgICAgaWQgPSBjb2VyY2VJZChkYXRhLmlkKTsKCiAgICBFbWJl
        ci5hc3NlcnQoIkFuIGFkYXB0ZXIgY2Fubm90IGFzc2lnbiBhIG5ldyBpZCB0
        byBhIHJlY29yZCB0aGF0IGFscmVhZHkgaGFzIGFuIGlkLiAiICsgcmVjb3Jk
        ICsgIiBoYWQgaWQ6ICIgKyBvbGRJZCArICIgYW5kIHlvdSB0cmllZCB0byB1
        cGRhdGUgaXQgd2l0aCAiICsgaWQgKyAiLiBUaGlzIGxpa2VseSBoYXBwZW5l
        ZCBiZWNhdXNlIHlvdXIgc2VydmVyIHJldHVybmVkIGRhdGEgaW4gcmVzcG9u
        c2UgdG8gYSBmaW5kIG9yIHVwZGF0ZSB0aGF0IGhhZCBhIGRpZmZlcmVudCBp
        ZCB0aGFuIHRoZSBvbmUgeW91IHNlbnQuIiwgb2xkSWQgPT09IG51bGwgfHwg
        aWQgPT09IG9sZElkKTsKCiAgICB0aGlzLnR5cGVNYXBGb3IocmVjb3JkLmNv
        bnN0cnVjdG9yKS5pZFRvUmVjb3JkW2lkXSA9IHJlY29yZDsKCiAgICBzZXQo
        cmVjb3JkLCAnaWQnLCBpZCk7CiAgfSwKCiAgLyoqCiAgICBSZXR1cm5zIGEg
        bWFwIG9mIElEcyB0byBjbGllbnQgSURzIGZvciBhIGdpdmVuIHR5cGUuCgog
        ICAgQG1ldGhvZCB0eXBlTWFwRm9yCiAgICBAcHJpdmF0ZQogICAgQHBhcmFt
        IHR5cGUKICAgIEByZXR1cm4ge09iamVjdH0gdHlwZU1hcAogICovCiAgdHlw
        ZU1hcEZvcjogZnVuY3Rpb24odHlwZSkgewogICAgdmFyIHR5cGVNYXBzID0g
        Z2V0KHRoaXMsICd0eXBlTWFwcycpLAogICAgICAgIGd1aWQgPSBFbWJlci5n
        dWlkRm9yKHR5cGUpLAogICAgICAgIHR5cGVNYXA7CgogICAgdHlwZU1hcCA9
        IHR5cGVNYXBzW2d1aWRdOwoKICAgIGlmICh0eXBlTWFwKSB7IHJldHVybiB0
        eXBlTWFwOyB9CgogICAgdHlwZU1hcCA9IHsKICAgICAgaWRUb1JlY29yZDog
        e30sCiAgICAgIHJlY29yZHM6IFtdLAogICAgICBtZXRhZGF0YToge30KICAg
        IH07CgogICAgdHlwZU1hcHNbZ3VpZF0gPSB0eXBlTWFwOwoKICAgIHJldHVy
        biB0eXBlTWFwOwogIH0sCgogIC8vIC4uLi4uLi4uLi4uLi4uLi4KICAvLyAu
        IExPQURJTkcgREFUQSAuCiAgLy8gLi4uLi4uLi4uLi4uLi4uLgoKICAvKioK
        ICAgIFRoaXMgaW50ZXJuYWwgbWV0aG9kIGlzIHVzZWQgYnkgYHB1c2hgLgoK
        ICAgIEBtZXRob2QgX2xvYWQKICAgIEBwcml2YXRlCiAgICBAcGFyYW0ge1N0
        cmluZyBvciBzdWJjbGFzcyBvZiBEUy5Nb2RlbH0gdHlwZQogICAgQHBhcmFt
        IHtPYmplY3R9IGRhdGEKICAgIEBwYXJhbSB7Qm9vbGVhbn0gcGFydGlhbCB0
        aGUgZGF0YSBzaG91bGQgYmUgbWVyZ2VkIGludG8KICAgICAgdGhlIGV4aXN0
        aW5nIGRhdGEsIG5vdCByZXBsYWNlIGl0LgogICovCiAgX2xvYWQ6IGZ1bmN0
        aW9uKHR5cGUsIGRhdGEsIHBhcnRpYWwpIHsKICAgIHZhciBpZCA9IGNvZXJj
        ZUlkKGRhdGEuaWQpLAogICAgICAgIHJlY29yZCA9IHRoaXMucmVjb3JkRm9y
        SWQodHlwZSwgaWQpOwoKICAgIHJlY29yZC5zZXR1cERhdGEoZGF0YSwgcGFy
        dGlhbCk7CiAgICB0aGlzLnJlY29yZEFycmF5TWFuYWdlci5yZWNvcmREaWRD
        aGFuZ2UocmVjb3JkKTsKCiAgICByZXR1cm4gcmVjb3JkOwogIH0sCgogIC8q
        KgogICAgUmV0dXJucyBhIG1vZGVsIGNsYXNzIGZvciBhIHBhcnRpY3VsYXIg
        a2V5LiBVc2VkIGJ5CiAgICBtZXRob2RzIHRoYXQgdGFrZSBhIHR5cGUga2V5
        IChsaWtlIGBmaW5kYCwgYGNyZWF0ZVJlY29yZGAsCiAgICBldGMuKQoKICAg
        IEBtZXRob2QgbW9kZWxGb3IKICAgIEBwYXJhbSB7U3RyaW5nIG9yIHN1YmNs
        YXNzIG9mIERTLk1vZGVsfSBrZXkKICAgIEByZXR1cm5zIHtzdWJjbGFzcyBv
        ZiBEUy5Nb2RlbH0KICAqLwogIG1vZGVsRm9yOiBmdW5jdGlvbihrZXkpIHsK
        ICAgIHZhciBmYWN0b3J5OwoKCiAgICBpZiAodHlwZW9mIGtleSA9PT0gJ3N0
        cmluZycpIHsKICAgICAgdmFyIG5vcm1hbGl6ZWRLZXkgPSB0aGlzLmNvbnRh
        aW5lci5ub3JtYWxpemUoJ21vZGVsOicgKyBrZXkpOwoKICAgICAgZmFjdG9y
        eSA9IHRoaXMuY29udGFpbmVyLmxvb2t1cEZhY3Rvcnkobm9ybWFsaXplZEtl
        eSk7CiAgICAgIGlmICghZmFjdG9yeSkgeyB0aHJvdyBuZXcgRW1iZXIuRXJy
        b3IoIk5vIG1vZGVsIHdhcyBmb3VuZCBmb3IgJyIgKyBrZXkgKyAiJyIpOyB9
        CiAgICAgIGZhY3RvcnkudHlwZUtleSA9IG5vcm1hbGl6ZWRLZXkuc3BsaXQo
        JzonLCAyKVsxXTsKICAgIH0gZWxzZSB7CiAgICAgIC8vIEEgZmFjdG9yeSBh
        bHJlYWR5IHN1cHBsaWVkLgogICAgICBmYWN0b3J5ID0ga2V5OwogICAgfQoK
        ICAgIGZhY3Rvcnkuc3RvcmUgPSB0aGlzOwogICAgcmV0dXJuIGZhY3Rvcnk7
        CiAgfSwKCiAgLyoqCiAgICBQdXNoIHNvbWUgZGF0YSBmb3IgYSBnaXZlbiB0
        eXBlIGludG8gdGhlIHN0b3JlLgoKICAgIFRoaXMgbWV0aG9kIGV4cGVjdHMg
        bm9ybWFsaXplZCBkYXRhOgoKICAgICogVGhlIElEIGlzIGEga2V5IG5hbWVk
        IGBpZGAgKGFuIElEIGlzIG1hbmRhdG9yeSkKICAgICogVGhlIG5hbWVzIG9m
        IGF0dHJpYnV0ZXMgYXJlIHRoZSBvbmVzIHlvdSB1c2VkIGluCiAgICAgIHlv
        dXIgbW9kZWwncyBgRFMuYXR0cmBzLgogICAgKiBZb3VyIHJlbGF0aW9uc2hp
        cHMgbXVzdCBiZToKICAgICAgKiByZXByZXNlbnRlZCBhcyBJRHMgb3IgQXJy
        YXlzIG9mIElEcwogICAgICAqIHJlcHJlc2VudGVkIGFzIG1vZGVsIGluc3Rh
        bmNlcwogICAgICAqIHJlcHJlc2VudGVkIGFzIFVSTHMsIHVuZGVyIHRoZSBg
        bGlua3NgIGtleQoKICAgIEZvciB0aGlzIG1vZGVsOgoKICAgIGBgYGpzCiAg
        ICBBcHAuUGVyc29uID0gRFMuTW9kZWwuZXh0ZW5kKHsKICAgICAgZmlyc3RO
        YW1lOiBEUy5hdHRyKCksCiAgICAgIGxhc3ROYW1lOiBEUy5hdHRyKCksCgog
        ICAgICBjaGlsZHJlbjogRFMuaGFzTWFueSgncGVyc29uJykKICAgIH0pOwog
        ICAgYGBgCgogICAgVG8gcmVwcmVzZW50IHRoZSBjaGlsZHJlbiBhcyBJRHM6
        CgogICAgYGBganMKICAgIHsKICAgICAgaWQ6IDEsCiAgICAgIGZpcnN0TmFt
        ZTogIlRvbSIsCiAgICAgIGxhc3ROYW1lOiAiRGFsZSIsCiAgICAgIGNoaWxk
        cmVuOiBbMSwgMiwgM10KICAgIH0KICAgIGBgYAoKICAgIFRvIHJlcHJlc2Vu
        dCB0aGUgY2hpbGRyZW4gcmVsYXRpb25zaGlwIGFzIGEgVVJMOgoKICAgIGBg
        YGpzCiAgICB7CiAgICAgIGlkOiAxLAogICAgICBmaXJzdE5hbWU6ICJUb20i
        LAogICAgICBsYXN0TmFtZTogIkRhbGUiLAogICAgICBsaW5rczogewogICAg
        ICAgIGNoaWxkcmVuOiAiL3Blb3BsZS8xL2NoaWxkcmVuIgogICAgICB9CiAg
        ICB9CiAgICBgYGAKCiAgICBJZiB5b3UncmUgc3RyZWFtaW5nIGRhdGEgb3Ig
        aW1wbGVtZW50aW5nIGFuIGFkYXB0ZXIsCiAgICBtYWtlIHN1cmUgdGhhdCB5
        b3UgaGF2ZSBjb252ZXJ0ZWQgdGhlIGluY29taW5nIGRhdGEKICAgIGludG8g
        dGhpcyBmb3JtLgoKICAgIFRoaXMgbWV0aG9kIGNhbiBiZSB1c2VkIGJvdGgg
        dG8gcHVzaCBpbiBicmFuZCBuZXcKICAgIHJlY29yZHMsIGFzIHdlbGwgYXMg
        dG8gdXBkYXRlIGV4aXN0aW5nIHJlY29yZHMuCgogICAgQG1ldGhvZCBwdXNo
        CiAgICBAcGFyYW0ge1N0cmluZyBvciBzdWJjbGFzcyBvZiBEUy5Nb2RlbH0g
        dHlwZQogICAgQHBhcmFtIHtPYmplY3R9IGRhdGEKICAgIEByZXR1cm5zIHtE
        Uy5Nb2RlbH0gdGhlIHJlY29yZCB0aGF0IHdhcyBjcmVhdGVkIG9yCiAgICAg
        IHVwZGF0ZWQuCiAgKi8KICBwdXNoOiBmdW5jdGlvbih0eXBlLCBkYXRhLCBf
        cGFydGlhbCkgewogICAgLy8gX3BhcnRpYWwgaXMgYW4gaW50ZXJuYWwgcGFy
        YW0gdXNlZCBieSBgdXBkYXRlYC4KICAgIC8vIElmIHBhc3NlZCwgaXQgbWVh
        bnMgdGhhdCB0aGUgZGF0YSBzaG91bGQgYmUKICAgIC8vIG1lcmdlZCBpbnRv
        IHRoZSBleGlzdGluZyBkYXRhLCBub3QgcmVwbGFjZSBpdC4KCiAgICBFbWJl
        ci5hc3NlcnQoIllvdSBtdXN0IGluY2x1ZGUgYW4gYGlkYCBpbiBhIGhhc2gg
        cGFzc2VkIHRvIGBwdXNoYCIsIGRhdGEuaWQgIT0gbnVsbCk7CgogICAgdHlw
        ZSA9IHRoaXMubW9kZWxGb3IodHlwZSk7CgogICAgLy8gbm9ybWFsaXplIHJl
        bGF0aW9uc2hpcCBJRHMgaW50byByZWNvcmRzCiAgICBkYXRhID0gbm9ybWFs
        aXplUmVsYXRpb25zaGlwcyh0aGlzLCB0eXBlLCBkYXRhKTsKCiAgICB0aGlz
        Ll9sb2FkKHR5cGUsIGRhdGEsIF9wYXJ0aWFsKTsKCiAgICByZXR1cm4gdGhp
        cy5yZWNvcmRGb3JJZCh0eXBlLCBkYXRhLmlkKTsKICB9LAoKICAvKioKICAg
        IFB1c2ggc29tZSByYXcgZGF0YSBpbnRvIHRoZSBzdG9yZS4KCiAgICBUaGUg
        ZGF0YSB3aWxsIGJlIGF1dG9tYXRpY2FsbHkgZGVzZXJpYWxpemVkIHVzaW5n
        IHRoZQogICAgc2VyaWFsaXplciBmb3IgdGhlIGB0eXBlYCBwYXJhbS4KCiAg
        ICBUaGlzIG1ldGhvZCBjYW4gYmUgdXNlZCBib3RoIHRvIHB1c2ggaW4gYnJh
        bmQgbmV3CiAgICByZWNvcmRzLCBhcyB3ZWxsIGFzIHRvIHVwZGF0ZSBleGlz
        dGluZyByZWNvcmRzLgoKICAgIFlvdSBjYW4gcHVzaCBpbiBtb3JlIHRoYW4g
        b25lIHR5cGUgb2Ygb2JqZWN0IGF0IG9uY2UuCiAgICBBbGwgb2JqZWN0cyBz
        aG91bGQgYmUgaW4gdGhlIGZvcm1hdCBleHBlY3RlZCBieSB0aGUKICAgIHNl
        cmlhbGl6ZXIuCgogICAgYGBganMKICAgIEFwcC5BcHBsaWNhdGlvblNlcmlh
        bGl6ZXIgPSBEUy5BY3RpdmVNb2RlbFNlcmlhbGl6ZXI7CgogICAgdmFyIHB1
        c2hEYXRhID0gewogICAgICBwb3N0czogWwogICAgICAgIHtpZDogMSwgcG9z
        dF90aXRsZTogIkdyZWF0IHBvc3QiLCBjb21tZW50X2lkczogWzJdfQogICAg
        ICBdLAogICAgICBjb21tZW50czogWwogICAgICAgIHtpZDogMiwgY29tbWVu
        dF9ib2R5OiAiSW5zaWdodGZ1bCBjb21tZW50In0KICAgICAgXQogICAgfQoK
        ICAgIHN0b3JlLnB1c2hQYXlsb2FkKCdwb3N0JywgcHVzaERhdGEpOwogICAg
        YGBgCgogICAgQG1ldGhvZCBwdXNoUGF5bG9hZAogICAgQHBhcmFtIHtTdHJp
        bmd9IHR5cGUKICAgIEBwYXJhbSB7T2JqZWN0fSBwYXlsb2FkCiAgICBAcmV0
        dXJuIHtEUy5Nb2RlbH0gdGhlIHJlY29yZCB0aGF0IHdhcyBjcmVhdGVkIG9y
        IHVwZGF0ZWQuCiAgKi8KICBwdXNoUGF5bG9hZDogZnVuY3Rpb24gKHR5cGUs
        IHBheWxvYWQpIHsKICAgIHZhciBzZXJpYWxpemVyOwogICAgaWYgKCFwYXls
        b2FkKSB7CiAgICAgIHBheWxvYWQgPSB0eXBlOwogICAgICBzZXJpYWxpemVy
        ID0gZGVmYXVsdFNlcmlhbGl6ZXIodGhpcy5jb250YWluZXIpOwogICAgICBF
        bWJlci5hc3NlcnQoIllvdSBjYW5ub3QgdXNlIGBzdG9yZSNwdXNoUGF5bG9h
        ZGAgd2l0aG91dCBhIHR5cGUgdW5sZXNzIHlvdXIgZGVmYXVsdCBzZXJpYWxp
        emVyIGRlZmluZXMgYHB1c2hQYXlsb2FkYCIsIHNlcmlhbGl6ZXIucHVzaFBh
        eWxvYWQpOwogICAgfSBlbHNlIHsKICAgICAgc2VyaWFsaXplciA9IHRoaXMu
        c2VyaWFsaXplckZvcih0eXBlKTsKICAgIH0KICAgIHNlcmlhbGl6ZXIucHVz
        aFBheWxvYWQodGhpcywgcGF5bG9hZCk7CiAgfSwKCiAgdXBkYXRlOiBmdW5j
        dGlvbih0eXBlLCBkYXRhKSB7CiAgICBFbWJlci5hc3NlcnQoIllvdSBtdXN0
        IGluY2x1ZGUgYW4gYGlkYCBpbiBhIGhhc2ggcGFzc2VkIHRvIGB1cGRhdGVg
        IiwgZGF0YS5pZCAhPSBudWxsKTsKCiAgICByZXR1cm4gdGhpcy5wdXNoKHR5
        cGUsIGRhdGEsIHRydWUpOwogIH0sCgogIC8qKgogICAgSWYgeW91IGhhdmUg
        YW4gQXJyYXkgb2Ygbm9ybWFsaXplZCBkYXRhIHRvIHB1c2gsCiAgICB5b3Ug
        Y2FuIGNhbGwgYHB1c2hNYW55YCB3aXRoIHRoZSBBcnJheSwgYW5kIGl0IHdp
        bGwKICAgIGNhbGwgYHB1c2hgIHJlcGVhdGVkbHkgZm9yIHlvdS4KCiAgICBA
        bWV0aG9kIHB1c2hNYW55CiAgICBAcGFyYW0ge1N0cmluZyBvciBzdWJjbGFz
        cyBvZiBEUy5Nb2RlbH0gdHlwZQogICAgQHBhcmFtIHtBcnJheX0gZGF0YXMK
        ICAgIEByZXR1cm4ge0FycmF5fQogICovCiAgcHVzaE1hbnk6IGZ1bmN0aW9u
        KHR5cGUsIGRhdGFzKSB7CiAgICByZXR1cm4gbWFwKGRhdGFzLCBmdW5jdGlv
        bihkYXRhKSB7CiAgICAgIHJldHVybiB0aGlzLnB1c2godHlwZSwgZGF0YSk7
        CiAgICB9LCB0aGlzKTsKICB9LAoKICAvKioKICAgIElmIHlvdSBoYXZlIHNv
        bWUgbWV0YWRhdGEgdG8gc2V0IGZvciBhIHR5cGUKICAgIHlvdSBjYW4gY2Fs
        bCBgbWV0YUZvclR5cGVgLgoKICAgIEBtZXRob2QgbWV0YUZvclR5cGUKICAg
        IEBwYXJhbSB7U3RyaW5nIG9yIHN1YmNsYXNzIG9mIERTLk1vZGVsfSB0eXBl
        CiAgICBAcGFyYW0ge09iamVjdH0gbWV0YWRhdGEKICAqLwogIG1ldGFGb3JU
        eXBlOiBmdW5jdGlvbih0eXBlLCBtZXRhZGF0YSkgewogICAgdHlwZSA9IHRo
        aXMubW9kZWxGb3IodHlwZSk7CgogICAgRW1iZXIubWVyZ2UodGhpcy50eXBl
        TWFwRm9yKHR5cGUpLm1ldGFkYXRhLCBtZXRhZGF0YSk7CiAgfSwKCiAgLyoq
        CiAgICBCdWlsZCBhIGJyYW5kIG5ldyByZWNvcmQgZm9yIGEgZ2l2ZW4gdHlw
        ZSwgSUQsIGFuZAogICAgaW5pdGlhbCBkYXRhLgoKICAgIEBtZXRob2QgYnVp
        bGRSZWNvcmQKICAgIEBwcml2YXRlCiAgICBAcGFyYW0ge3N1YmNsYXNzIG9m
        IERTLk1vZGVsfSB0eXBlCiAgICBAcGFyYW0ge1N0cmluZ30gaWQKICAgIEBw
        YXJhbSB7T2JqZWN0fSBkYXRhCiAgICBAcmV0dXJucyB7RFMuTW9kZWx9IHJl
        Y29yZAogICovCiAgYnVpbGRSZWNvcmQ6IGZ1bmN0aW9uKHR5cGUsIGlkLCBk
        YXRhKSB7CiAgICB2YXIgdHlwZU1hcCA9IHRoaXMudHlwZU1hcEZvcih0eXBl
        KSwKICAgICAgICBpZFRvUmVjb3JkID0gdHlwZU1hcC5pZFRvUmVjb3JkOwoK
        ICAgIEVtYmVyLmFzc2VydCgnVGhlIGlkICcgKyBpZCArICcgaGFzIGFscmVh
        ZHkgYmVlbiB1c2VkIHdpdGggYW5vdGhlciByZWNvcmQgb2YgdHlwZSAnICsg
        dHlwZS50b1N0cmluZygpICsgJy4nLCAhaWQgfHwgIWlkVG9SZWNvcmRbaWRd
        KTsKCiAgICAvLyBsb29rdXBGYWN0b3J5IHNob3VsZCByZWFsbHkgcmV0dXJu
        IGFuIG9iamVjdCB0aGF0IGNyZWF0ZXMKICAgIC8vIGluc3RhbmNlcyB3aXRo
        IHRoZSBpbmplY3Rpb25zIGFwcGxpZWQKICAgIHZhciByZWNvcmQgPSB0eXBl
        Ll9jcmVhdGUoewogICAgICBpZDogaWQsCiAgICAgIHN0b3JlOiB0aGlzLAog
        ICAgICBjb250YWluZXI6IHRoaXMuY29udGFpbmVyCiAgICB9KTsKCiAgICBp
        ZiAoZGF0YSkgewogICAgICByZWNvcmQuc2V0dXBEYXRhKGRhdGEpOwogICAg
        fQoKICAgIC8vIGlmIHdlJ3JlIGNyZWF0aW5nIGFuIGl0ZW0sIHRoaXMgcHJv
        Y2VzcyB3aWxsIGJlIGRvbmUKICAgIC8vIGxhdGVyLCBvbmNlIHRoZSBvYmpl
        Y3QgaGFzIGJlZW4gcGVyc2lzdGVkLgogICAgaWYgKGlkKSB7CiAgICAgIGlk
        VG9SZWNvcmRbaWRdID0gcmVjb3JkOwogICAgfQoKICAgIHR5cGVNYXAucmVj
        b3Jkcy5wdXNoKHJlY29yZCk7CgogICAgcmV0dXJuIHJlY29yZDsKICB9LAoK
        ICAvLyAuLi4uLi4uLi4uLi4uLi4KICAvLyAuIERFU1RSVUNUSU9OIC4KICAv
        LyAuLi4uLi4uLi4uLi4uLi4KCiAgLyoqCiAgICBXaGVuIGEgcmVjb3JkIGlz
        IGRlc3Ryb3llZCwgdGhpcyB1bi1pbmRleGVzIGl0IGFuZAogICAgcmVtb3Zl
        cyBpdCBmcm9tIGFueSByZWNvcmQgYXJyYXlzIHNvIGl0IGNhbiBiZSBHQ2Vk
        LgoKICAgIEBtZXRob2QgZGVtYXRlcmlhbGl6ZVJlY29yZAogICAgQHByaXZh
        dGUKICAgIEBwYXJhbSB7RFMuTW9kZWx9IHJlY29yZAogICovCiAgZGVtYXRl
        cmlhbGl6ZVJlY29yZDogZnVuY3Rpb24ocmVjb3JkKSB7CiAgICB2YXIgdHlw
        ZSA9IHJlY29yZC5jb25zdHJ1Y3RvciwKICAgICAgICB0eXBlTWFwID0gdGhp
        cy50eXBlTWFwRm9yKHR5cGUpLAogICAgICAgIGlkID0gZ2V0KHJlY29yZCwg
        J2lkJyk7CgogICAgcmVjb3JkLnVwZGF0ZVJlY29yZEFycmF5cygpOwoKICAg
        IGlmIChpZCkgewogICAgICBkZWxldGUgdHlwZU1hcC5pZFRvUmVjb3JkW2lk
        XTsKICAgIH0KCiAgICB2YXIgbG9jID0gaW5kZXhPZih0eXBlTWFwLnJlY29y
        ZHMsIHJlY29yZCk7CiAgICB0eXBlTWFwLnJlY29yZHMuc3BsaWNlKGxvYywg
        MSk7CiAgfSwKCiAgLy8gLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uCiAgLy8g
        LiBSRUxBVElPTlNISVAgQ0hBTkdFUyAuCiAgLy8gLi4uLi4uLi4uLi4uLi4u
        Li4uLi4uLi4uCgogIGFkZFJlbGF0aW9uc2hpcENoYW5nZUZvcjogZnVuY3Rp
        b24oY2hpbGRSZWNvcmQsIGNoaWxkS2V5LCBwYXJlbnRSZWNvcmQsIHBhcmVu
        dEtleSwgY2hhbmdlKSB7CiAgICB2YXIgY2xpZW50SWQgPSBjaGlsZFJlY29y
        ZC5jbGllbnRJZCwKICAgICAgICBwYXJlbnRDbGllbnRJZCA9IHBhcmVudFJl
        Y29yZCA/IHBhcmVudFJlY29yZCA6IHBhcmVudFJlY29yZDsKICAgIHZhciBr
        ZXkgPSBjaGlsZEtleSArIHBhcmVudEtleTsKICAgIHZhciBjaGFuZ2VzID0g
        dGhpcy5fcmVsYXRpb25zaGlwQ2hhbmdlczsKICAgIGlmICghKGNsaWVudElk
        IGluIGNoYW5nZXMpKSB7CiAgICAgIGNoYW5nZXNbY2xpZW50SWRdID0ge307
        CiAgICB9CiAgICBpZiAoIShwYXJlbnRDbGllbnRJZCBpbiBjaGFuZ2VzW2Ns
        aWVudElkXSkpIHsKICAgICAgY2hhbmdlc1tjbGllbnRJZF1bcGFyZW50Q2xp
        ZW50SWRdID0ge307CiAgICB9CiAgICBpZiAoIShrZXkgaW4gY2hhbmdlc1tj
        bGllbnRJZF1bcGFyZW50Q2xpZW50SWRdKSkgewogICAgICBjaGFuZ2VzW2Ns
        aWVudElkXVtwYXJlbnRDbGllbnRJZF1ba2V5XSA9IHt9OwogICAgfQogICAg
        Y2hhbmdlc1tjbGllbnRJZF1bcGFyZW50Q2xpZW50SWRdW2tleV1bY2hhbmdl
        LmNoYW5nZVR5cGVdID0gY2hhbmdlOwogIH0sCgogIHJlbW92ZVJlbGF0aW9u
        c2hpcENoYW5nZUZvcjogZnVuY3Rpb24oY2xpZW50UmVjb3JkLCBjaGlsZEtl
        eSwgcGFyZW50UmVjb3JkLCBwYXJlbnRLZXksIHR5cGUpIHsKICAgIHZhciBj
        bGllbnRJZCA9IGNsaWVudFJlY29yZC5jbGllbnRJZCwKICAgICAgICBwYXJl
        bnRDbGllbnRJZCA9IHBhcmVudFJlY29yZCA/IHBhcmVudFJlY29yZC5jbGll
        bnRJZCA6IHBhcmVudFJlY29yZDsKICAgIHZhciBjaGFuZ2VzID0gdGhpcy5f
        cmVsYXRpb25zaGlwQ2hhbmdlczsKICAgIHZhciBrZXkgPSBjaGlsZEtleSAr
        IHBhcmVudEtleTsKICAgIGlmICghKGNsaWVudElkIGluIGNoYW5nZXMpIHx8
        ICEocGFyZW50Q2xpZW50SWQgaW4gY2hhbmdlc1tjbGllbnRJZF0pIHx8ICEo
        a2V5IGluIGNoYW5nZXNbY2xpZW50SWRdW3BhcmVudENsaWVudElkXSkpewog
        ICAgICByZXR1cm47CiAgICB9CiAgICBkZWxldGUgY2hhbmdlc1tjbGllbnRJ
        ZF1bcGFyZW50Q2xpZW50SWRdW2tleV1bdHlwZV07CiAgfSwKCiAgcmVsYXRp
        b25zaGlwQ2hhbmdlUGFpcnNGb3I6IGZ1bmN0aW9uKHJlY29yZCl7CiAgICB2
        YXIgdG9SZXR1cm4gPSBbXTsKCiAgICBpZiggIXJlY29yZCApIHsgcmV0dXJu
        IHRvUmV0dXJuOyB9CgogICAgLy9UT0RPKElnb3IpIFdoYXQgYWJvdXQgdGhl
        IG90aGVyIHNpZGUKICAgIHZhciBjaGFuZ2VzT2JqZWN0ID0gdGhpcy5fcmVs
        YXRpb25zaGlwQ2hhbmdlc1tyZWNvcmQuY2xpZW50SWRdOwogICAgZm9yICh2
        YXIgb2JqS2V5IGluIGNoYW5nZXNPYmplY3QpewogICAgICBpZihjaGFuZ2Vz
        T2JqZWN0Lmhhc093blByb3BlcnR5KG9iaktleSkpewogICAgICAgIGZvciAo
        dmFyIGNoYW5nZUtleSBpbiBjaGFuZ2VzT2JqZWN0W29iaktleV0pewogICAg
        ICAgICAgaWYoY2hhbmdlc09iamVjdFtvYmpLZXldLmhhc093blByb3BlcnR5
        KGNoYW5nZUtleSkpewogICAgICAgICAgICB0b1JldHVybi5wdXNoKGNoYW5n
        ZXNPYmplY3Rbb2JqS2V5XVtjaGFuZ2VLZXldKTsKICAgICAgICAgIH0KICAg
        ICAgICB9CiAgICAgIH0KICAgIH0KICAgIHJldHVybiB0b1JldHVybjsKICB9
        LAoKICAvLyAuLi4uLi4uLi4uLi4uLi4uLi4uLi4uCiAgLy8gLiBQRVItVFlQ
        RSBBREFQVEVSUwogIC8vIC4uLi4uLi4uLi4uLi4uLi4uLi4uLi4KCiAgLyoq
        CiAgICBSZXR1cm5zIHRoZSBhZGFwdGVyIGZvciBhIGdpdmVuIHR5cGUuCgog
        ICAgQG1ldGhvZCBhZGFwdGVyRm9yCiAgICBAcHJpdmF0ZQogICAgQHBhcmFt
        IHtzdWJjbGFzcyBvZiBEUy5Nb2RlbH0gdHlwZQogICAgQHJldHVybnMgRFMu
        QWRhcHRlcgogICovCiAgYWRhcHRlckZvcjogZnVuY3Rpb24odHlwZSkgewog
        ICAgdmFyIGNvbnRhaW5lciA9IHRoaXMuY29udGFpbmVyLCBhZGFwdGVyOwoK
        ICAgIGlmIChjb250YWluZXIpIHsKICAgICAgYWRhcHRlciA9IGNvbnRhaW5l
        ci5sb29rdXAoJ2FkYXB0ZXI6JyArIHR5cGUudHlwZUtleSkgfHwgY29udGFp
        bmVyLmxvb2t1cCgnYWRhcHRlcjphcHBsaWNhdGlvbicpOwogICAgfQoKICAg
        IHJldHVybiBhZGFwdGVyIHx8IGdldCh0aGlzLCAnZGVmYXVsdEFkYXB0ZXIn
        KTsKICB9LAoKICAvLyAuLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4K
        ICAvLyAuIFJFQ09SRCBDSEFOR0UgTk9USUZJQ0FUSU9OIC4KICAvLyAuLi4u
        Li4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4KCiAgLyoqCiAgICBSZXR1cm5z
        IGFuIGluc3RhbmNlIG9mIHRoZSBzZXJpYWxpemVyIGZvciBhIGdpdmVuIHR5
        cGUuIEZvcgogICAgZXhhbXBsZSwgYHNlcmlhbGl6ZXJGb3IoJ3BlcnNvbicp
        YCB3aWxsIHJldHVybiBhbiBpbnN0YW5jZSBvZgogICAgYEFwcC5QZXJzb25T
        ZXJpYWxpemVyYC4KCiAgICBJZiBubyBgQXBwLlBlcnNvblNlcmlhbGl6ZXJg
        IGlzIGZvdW5kLCB0aGlzIG1ldGhvZCB3aWxsIGxvb2sKICAgIGZvciBhbiBg
        QXBwLkFwcGxpY2F0aW9uU2VyaWFsaXplcmAgKHRoZSBkZWZhdWx0IHNlcmlh
        bGl6ZXIgZm9yCiAgICB5b3VyIGVudGlyZSBhcHBsaWNhdGlvbikuCgogICAg
        SWYgbm8gYEFwcC5BcHBsaWNhdGlvblNlcmlhbGl6ZXJgIGlzIGZvdW5kLCBp
        dCB3aWxsIGZhbGwgYmFjawogICAgdG8gYW4gaW5zdGFuY2Ugb2YgYERTLkpT
        T05TZXJpYWxpemVyYC4KCiAgICBAbWV0aG9kIHNlcmlhbGl6ZXJGb3IKICAg
        IEBwcml2YXRlCiAgICBAcGFyYW0ge1N0cmluZ30gdHlwZSB0aGUgcmVjb3Jk
        IHRvIHNlcmlhbGl6ZQogICAgQHJldHVybiB7RFMuU2VyaWFsaXplcn0KICAq
        LwogIHNlcmlhbGl6ZXJGb3I6IGZ1bmN0aW9uKHR5cGUpIHsKICAgIHR5cGUg
        PSB0aGlzLm1vZGVsRm9yKHR5cGUpOwogICAgdmFyIGFkYXB0ZXIgPSB0aGlz
        LmFkYXB0ZXJGb3IodHlwZSk7CgogICAgcmV0dXJuIHNlcmlhbGl6ZXJGb3Io
        dGhpcy5jb250YWluZXIsIHR5cGUudHlwZUtleSwgYWRhcHRlciAmJiBhZGFw
        dGVyLmRlZmF1bHRTZXJpYWxpemVyKTsKICB9Cn0pOwoKZnVuY3Rpb24gbm9y
        bWFsaXplUmVsYXRpb25zaGlwcyhzdG9yZSwgdHlwZSwgZGF0YSwgcmVjb3Jk
        KSB7CiAgdHlwZS5lYWNoUmVsYXRpb25zaGlwKGZ1bmN0aW9uKGtleSwgcmVs
        YXRpb25zaGlwKSB7CiAgICAvLyBBIGxpbmsgKHVzdWFsbHkgYSBVUkwpIHdh
        cyBhbHJlYWR5IHByb3ZpZGVkIGluCiAgICAvLyBub3JtYWxpemVkIGZvcm0K
        ICAgIGlmIChkYXRhLmxpbmtzICYmIGRhdGEubGlua3Nba2V5XSkgewogICAg
        ICBpZiAocmVjb3JkICYmIHJlbGF0aW9uc2hpcC5vcHRpb25zLmFzeW5jKSB7
        IHJlY29yZC5fcmVsYXRpb25zaGlwc1trZXldID0gbnVsbDsgfQogICAgICBy
        ZXR1cm47CiAgICB9CgogICAgdmFyIGtpbmQgPSByZWxhdGlvbnNoaXAua2lu
        ZCwKICAgICAgICB2YWx1ZSA9IGRhdGFba2V5XTsKCiAgICBpZiAodmFsdWUg
        PT0gbnVsbCkgeyByZXR1cm47IH0KCiAgICBpZiAoa2luZCA9PT0gJ2JlbG9u
        Z3NUbycpIHsKICAgICAgZGVzZXJpYWxpemVSZWNvcmRJZChzdG9yZSwgZGF0
        YSwga2V5LCByZWxhdGlvbnNoaXAsIHZhbHVlKTsKICAgIH0gZWxzZSBpZiAo
        a2luZCA9PT0gJ2hhc01hbnknKSB7CiAgICAgIGRlc2VyaWFsaXplUmVjb3Jk
        SWRzKHN0b3JlLCBkYXRhLCBrZXksIHJlbGF0aW9uc2hpcCwgdmFsdWUpOwog
        ICAgICBhZGRVbnNhdmVkUmVjb3JkcyhyZWNvcmQsIGtleSwgdmFsdWUpOwog
        ICAgfQogIH0pOwoKICByZXR1cm4gZGF0YTsKfQoKZnVuY3Rpb24gZGVzZXJp
        YWxpemVSZWNvcmRJZChzdG9yZSwgZGF0YSwga2V5LCByZWxhdGlvbnNoaXAs
        IGlkKSB7CiAgaWYgKGlzTm9uZShpZCkgfHwgaWQgaW5zdGFuY2VvZiBEUy5N
        b2RlbCkgewogICAgcmV0dXJuOwogIH0KCiAgdmFyIHR5cGU7CgogIGlmICh0
        eXBlb2YgaWQgPT09ICdudW1iZXInIHx8IHR5cGVvZiBpZCA9PT0gJ3N0cmlu
        ZycpIHsKICAgIHR5cGUgPSB0eXBlRm9yKHJlbGF0aW9uc2hpcCwga2V5LCBk
        YXRhKTsKICAgIGRhdGFba2V5XSA9IHN0b3JlLnJlY29yZEZvcklkKHR5cGUs
        IGlkKTsKICB9IGVsc2UgaWYgKHR5cGVvZiBpZCA9PT0gJ29iamVjdCcpIHsK
        ICAgIC8vIHBvbHltb3JwaGljCiAgICBkYXRhW2tleV0gPSBzdG9yZS5yZWNv
        cmRGb3JJZChpZC50eXBlLCBpZC5pZCk7CiAgfQp9CgpmdW5jdGlvbiB0eXBl
        Rm9yKHJlbGF0aW9uc2hpcCwga2V5LCBkYXRhKSB7CiAgaWYgKHJlbGF0aW9u
        c2hpcC5vcHRpb25zLnBvbHltb3JwaGljKSB7CiAgICByZXR1cm4gZGF0YVtr
        ZXkgKyAiVHlwZSJdOwogIH0gZWxzZSB7CiAgICByZXR1cm4gcmVsYXRpb25z
        aGlwLnR5cGU7CiAgfQp9CgpmdW5jdGlvbiBkZXNlcmlhbGl6ZVJlY29yZElk
        cyhzdG9yZSwgZGF0YSwga2V5LCByZWxhdGlvbnNoaXAsIGlkcykgewogIGZv
        ciAodmFyIGk9MCwgbD1pZHMubGVuZ3RoOyBpPGw7IGkrKykgewogICAgZGVz
        ZXJpYWxpemVSZWNvcmRJZChzdG9yZSwgaWRzLCBpLCByZWxhdGlvbnNoaXAs
        IGlkc1tpXSk7CiAgfQp9CgovLyBJZiB0aGVyZSBhcmUgYW55IHVuc2F2ZWQg
        cmVjb3JkcyB0aGF0IGFyZSBpbiBhIGhhc01hbnkgdGhleSB3b24ndCBiZQov
        LyBpbiB0aGUgcGF5bG9hZCwgc28gYWRkIHRoZW0gYmFjayBpbiBtYW51YWxs
        eS4KZnVuY3Rpb24gYWRkVW5zYXZlZFJlY29yZHMocmVjb3JkLCBrZXksIGRh
        dGEpIHsKICBpZihyZWNvcmQpIHsKICAgIGRhdGEucHVzaE9iamVjdHMocmVj
        b3JkLmdldChrZXkpLmZpbHRlckJ5KCdpc05ldycpKTsKICB9Cn0KCi8vIERl
        bGVnYXRpb24gdG8gdGhlIGFkYXB0ZXIgYW5kIHByb21pc2UgbWFuYWdlbWVu
        dAovKioKICBBIGBQcm9taXNlQXJyYXlgIGlzIGFuIG9iamVjdCB0aGF0IGFj
        dHMgbGlrZSBib3RoIGFuIGBFbWJlci5BcnJheWAKICBhbmQgYSBwcm9taXNl
        LiBXaGVuIHRoZSBwcm9taXNlIGlzIHJlc29sdmVkIHRoZSB0aGUgcmVzdWx0
        aW5nIHZhbHVlCiAgd2lsbCBiZSBzZXQgdG8gdGhlIGBQcm9taXNlQXJyYXlg
        J3MgYGNvbnRlbnRgIHByb3BlcnR5LiBUaGlzIG1ha2VzCiAgaXQgZWFzeSB0
        byBjcmVhdGUgZGF0YSBiaW5kaW5ncyB3aXRoIHRoZSBgUHJvbWlzZUFycmF5
        YCB0aGF0IHdpbGwgYmUKICB1cGRhdGVkIHdoZW4gdGhlIHByb21pc2UgcmVz
        b2x2ZXMuCgogIEZvciBtb3JlIGluZm9ybWF0aW9uIHNlZSB0aGUgW0VtYmVy
        LlByb21pc2VQcm94eU1peGluCiAgZG9jdW1lbnRhdGlvbl0oL2FwaS9jbGFz
        c2VzL0VtYmVyLlByb21pc2VQcm94eU1peGluLmh0bWwpLgoKICBFeGFtcGxl
        CgogIGBgYGphdmFzY3JpcHQKICB2YXIgcHJvbWlzZUFycmF5ID0gRFMuUHJv
        bWlzZUFycmF5LmNyZWF0ZSh7CiAgICBwcm9taXNlOiAkLmdldEpTT04oJy9z
        b21lL3JlbW90ZS9kYXRhLmpzb24nKQogIH0pOwoKICBwcm9taXNlQXJyYXku
        Z2V0KCdsZW5ndGgnKTsgLy8gMAoKICBwcm9taXNlQXJyYXkudGhlbihmdW5j
        dGlvbigpIHsKICAgIHByb21pc2VBcnJheS5nZXQoJ2xlbmd0aCcpOyAvLyAx
        MDAKICB9KTsKICBgYGAKCiAgQGNsYXNzIFByb21pc2VBcnJheQogIEBuYW1l
        c3BhY2UgRFMKICBAZXh0ZW5kcyBFbWJlci5BcnJheVByb3h5CiAgQHVzZXMg
        RW1iZXIuUHJvbWlzZVByb3h5TWl4aW4KKi8KRFMuUHJvbWlzZUFycmF5ID0g
        RW1iZXIuQXJyYXlQcm94eS5leHRlbmQoRW1iZXIuUHJvbWlzZVByb3h5TWl4
        aW4pOwovKioKICBBIGBQcm9taXNlT2JqZWN0YCBpcyBhbiBvYmplY3QgdGhh
        dCBhY3RzIGxpa2UgYm90aCBhbiBgRW1iZXIuT2JqZWN0YAogIGFuZCBhIHBy
        b21pc2UuIFdoZW4gdGhlIHByb21pc2UgaXMgcmVzb2x2ZWQgdGhlIHRoZSBy
        ZXN1bHRpbmcgdmFsdWUKICB3aWxsIGJlIHNldCB0byB0aGUgYFByb21pc2VP
        YmplY3RgJ3MgYGNvbnRlbnRgIHByb3BlcnR5LiBUaGlzIG1ha2VzCiAgaXQg
        ZWFzeSB0byBjcmVhdGUgZGF0YSBiaW5kaW5ncyB3aXRoIHRoZSBgUHJvbWlz
        ZU9iamVjdGAgdGhhdCB3aWxsCiAgYmUgdXBkYXRlZCB3aGVuIHRoZSBwcm9t
        aXNlIHJlc29sdmVzLgoKICBGb3IgbW9yZSBpbmZvcm1hdGlvbiBzZWUgdGhl
        IFtFbWJlci5Qcm9taXNlUHJveHlNaXhpbgogIGRvY3VtZW50YXRpb25dKC9h
        cGkvY2xhc3Nlcy9FbWJlci5Qcm9taXNlUHJveHlNaXhpbi5odG1sKS4KCiAg
        RXhhbXBsZQoKICBgYGBqYXZhc2NyaXB0CiAgdmFyIHByb21pc2VPYmplY3Qg
        PSBEUy5Qcm9taXNlT2JqZWN0LmNyZWF0ZSh7CiAgICBwcm9taXNlOiAkLmdl
        dEpTT04oJy9zb21lL3JlbW90ZS9kYXRhLmpzb24nKQogIH0pOwoKICBwcm9t
        aXNlT2JqZWN0LmdldCgnbmFtZScpOyAvLyBudWxsCgogIHByb21pc2VPYmpl
        Y3QudGhlbihmdW5jdGlvbigpIHsKICAgIHByb21pc2VPYmplY3QuZ2V0KCdu
        YW1lJyk7IC8vICdUb21zdGVyJwogIH0pOwogIGBgYAoKICBAY2xhc3MgUHJv
        bWlzZU9iamVjdAogIEBuYW1lc3BhY2UgRFMKICBAZXh0ZW5kcyBFbWJlci5P
        YmplY3RQcm94eQogIEB1c2VzIEVtYmVyLlByb21pc2VQcm94eU1peGluCiov
        CkRTLlByb21pc2VPYmplY3QgPSBFbWJlci5PYmplY3RQcm94eS5leHRlbmQo
        RW1iZXIuUHJvbWlzZVByb3h5TWl4aW4pOwoKZnVuY3Rpb24gcHJvbWlzZU9i
        amVjdChwcm9taXNlKSB7CiAgcmV0dXJuIERTLlByb21pc2VPYmplY3QuY3Jl
        YXRlKHsgcHJvbWlzZTogcHJvbWlzZSB9KTsKfQoKZnVuY3Rpb24gcHJvbWlz
        ZUFycmF5KHByb21pc2UpIHsKICByZXR1cm4gRFMuUHJvbWlzZUFycmF5LmNy
        ZWF0ZSh7IHByb21pc2U6IHByb21pc2UgfSk7Cn0KCmZ1bmN0aW9uIGlzVGhl
        bmFibGUob2JqZWN0KSB7CiAgcmV0dXJuIG9iamVjdCAmJiB0eXBlb2Ygb2Jq
        ZWN0LnRoZW4gPT09ICdmdW5jdGlvbic7Cn0KCmZ1bmN0aW9uIHNlcmlhbGl6
        ZXJGb3IoY29udGFpbmVyLCB0eXBlLCBkZWZhdWx0U2VyaWFsaXplcikgewog
        IHJldHVybiBjb250YWluZXIubG9va3VwKCdzZXJpYWxpemVyOicrdHlwZSkg
        fHwKICAgICAgICAgICAgICAgICBjb250YWluZXIubG9va3VwKCdzZXJpYWxp
        emVyOmFwcGxpY2F0aW9uJykgfHwKICAgICAgICAgICAgICAgICBjb250YWlu
        ZXIubG9va3VwKCdzZXJpYWxpemVyOicgKyBkZWZhdWx0U2VyaWFsaXplcikg
        fHwKICAgICAgICAgICAgICAgICBjb250YWluZXIubG9va3VwKCdzZXJpYWxp
        emVyOi1kZWZhdWx0Jyk7Cn0KCmZ1bmN0aW9uIGRlZmF1bHRTZXJpYWxpemVy
        KGNvbnRhaW5lcikgewogIHJldHVybiBjb250YWluZXIubG9va3VwKCdzZXJp
        YWxpemVyOmFwcGxpY2F0aW9uJykgfHwKICAgICAgICAgY29udGFpbmVyLmxv
        b2t1cCgnc2VyaWFsaXplcjotZGVmYXVsdCcpOwp9CgpmdW5jdGlvbiBzZXJp
        YWxpemVyRm9yQWRhcHRlcihhZGFwdGVyLCB0eXBlKSB7CiAgdmFyIHNlcmlh
        bGl6ZXIgPSBhZGFwdGVyLnNlcmlhbGl6ZXIsCiAgICAgIGRlZmF1bHRTZXJp
        YWxpemVyID0gYWRhcHRlci5kZWZhdWx0U2VyaWFsaXplciwKICAgICAgY29u
        dGFpbmVyID0gYWRhcHRlci5jb250YWluZXI7CgogIGlmIChjb250YWluZXIg
        JiYgc2VyaWFsaXplciA9PT0gdW5kZWZpbmVkKSB7CiAgICBzZXJpYWxpemVy
        ID0gc2VyaWFsaXplckZvcihjb250YWluZXIsIHR5cGUudHlwZUtleSwgZGVm
        YXVsdFNlcmlhbGl6ZXIpOwogIH0KCiAgaWYgKHNlcmlhbGl6ZXIgPT09IG51
        bGwgfHwgc2VyaWFsaXplciA9PT0gdW5kZWZpbmVkKSB7CiAgICBzZXJpYWxp
        emVyID0gewogICAgICBleHRyYWN0OiBmdW5jdGlvbihzdG9yZSwgdHlwZSwg
        cGF5bG9hZCkgeyByZXR1cm4gcGF5bG9hZDsgfQogICAgfTsKICB9CgogIHJl
        dHVybiBzZXJpYWxpemVyOwp9CgpmdW5jdGlvbiBfZmluZChhZGFwdGVyLCBz
        dG9yZSwgdHlwZSwgaWQpIHsKICB2YXIgcHJvbWlzZSA9IGFkYXB0ZXIuZmlu
        ZChzdG9yZSwgdHlwZSwgaWQpLAogICAgICBzZXJpYWxpemVyID0gc2VyaWFs
        aXplckZvckFkYXB0ZXIoYWRhcHRlciwgdHlwZSk7CgogIHJldHVybiByZXNv
        bHZlKHByb21pc2UsICJEUzogSGFuZGxlIEFkYXB0ZXIjZmluZCBvZiAiICsg
        dHlwZSArICIgd2l0aCBpZDogIiArIGlkKS50aGVuKGZ1bmN0aW9uKHBheWxv
        YWQpIHsKICAgIEVtYmVyLmFzc2VydCgiWW91IG1hZGUgYSByZXF1ZXN0IGZv
        ciBhICIgKyB0eXBlLnR5cGVLZXkgKyAiIHdpdGggaWQgIiArIGlkICsgIiwg
        YnV0IHRoZSBhZGFwdGVyJ3MgcmVzcG9uc2UgZGlkIG5vdCBoYXZlIGFueSBk
        YXRhIiwgcGF5bG9hZCk7CiAgICBwYXlsb2FkID0gc2VyaWFsaXplci5leHRy
        YWN0KHN0b3JlLCB0eXBlLCBwYXlsb2FkLCBpZCwgJ2ZpbmQnKTsKCiAgICBy
        ZXR1cm4gc3RvcmUucHVzaCh0eXBlLCBwYXlsb2FkKTsKICB9LCBmdW5jdGlv
        bihlcnJvcikgewogICAgdmFyIHJlY29yZCA9IHN0b3JlLmdldEJ5SWQodHlw
        ZSwgaWQpOwogICAgcmVjb3JkLm5vdEZvdW5kKCk7CiAgICB0aHJvdyBlcnJv
        cjsKICB9LCAiRFM6IEV4dHJhY3QgcGF5bG9hZCBvZiAnIiArIHR5cGUgKyAi
        JyIpOwp9CgpmdW5jdGlvbiBfZmluZE1hbnkoYWRhcHRlciwgc3RvcmUsIHR5
        cGUsIGlkcywgb3duZXIpIHsKICB2YXIgcHJvbWlzZSA9IGFkYXB0ZXIuZmlu
        ZE1hbnkoc3RvcmUsIHR5cGUsIGlkcywgb3duZXIpLAogICAgICBzZXJpYWxp
        emVyID0gc2VyaWFsaXplckZvckFkYXB0ZXIoYWRhcHRlciwgdHlwZSk7Cgog
        IHJldHVybiByZXNvbHZlKHByb21pc2UsICJEUzogSGFuZGxlIEFkYXB0ZXIj
        ZmluZE1hbnkgb2YgIiArIHR5cGUpLnRoZW4oZnVuY3Rpb24ocGF5bG9hZCkg
        ewogICAgcGF5bG9hZCA9IHNlcmlhbGl6ZXIuZXh0cmFjdChzdG9yZSwgdHlw
        ZSwgcGF5bG9hZCwgbnVsbCwgJ2ZpbmRNYW55Jyk7CgogICAgRW1iZXIuYXNz
        ZXJ0KCJUaGUgcmVzcG9uc2UgZnJvbSBhIGZpbmRNYW55IG11c3QgYmUgYW4g
        QXJyYXksIG5vdCAiICsgRW1iZXIuaW5zcGVjdChwYXlsb2FkKSwgRW1iZXIu
        dHlwZU9mKHBheWxvYWQpID09PSAnYXJyYXknKTsKCiAgICBzdG9yZS5wdXNo
        TWFueSh0eXBlLCBwYXlsb2FkKTsKICB9LCBudWxsLCAiRFM6IEV4dHJhY3Qg
        cGF5bG9hZCBvZiAiICsgdHlwZSk7Cn0KCmZ1bmN0aW9uIF9maW5kSGFzTWFu
        eShhZGFwdGVyLCBzdG9yZSwgcmVjb3JkLCBsaW5rLCByZWxhdGlvbnNoaXAp
        IHsKICB2YXIgcHJvbWlzZSA9IGFkYXB0ZXIuZmluZEhhc01hbnkoc3RvcmUs
        IHJlY29yZCwgbGluaywgcmVsYXRpb25zaGlwKSwKICAgICAgc2VyaWFsaXpl
        ciA9IHNlcmlhbGl6ZXJGb3JBZGFwdGVyKGFkYXB0ZXIsIHJlbGF0aW9uc2hp
        cC50eXBlKTsKCiAgcmV0dXJuIHJlc29sdmUocHJvbWlzZSwgIkRTOiBIYW5k
        bGUgQWRhcHRlciNmaW5kSGFzTWFueSBvZiAiICsgcmVjb3JkICsgIiA6ICIg
        KyByZWxhdGlvbnNoaXAudHlwZSkudGhlbihmdW5jdGlvbihwYXlsb2FkKSB7
        CiAgICBwYXlsb2FkID0gc2VyaWFsaXplci5leHRyYWN0KHN0b3JlLCByZWxh
        dGlvbnNoaXAudHlwZSwgcGF5bG9hZCwgbnVsbCwgJ2ZpbmRIYXNNYW55Jyk7
        CgogICAgRW1iZXIuYXNzZXJ0KCJUaGUgcmVzcG9uc2UgZnJvbSBhIGZpbmRI
        YXNNYW55IG11c3QgYmUgYW4gQXJyYXksIG5vdCAiICsgRW1iZXIuaW5zcGVj
        dChwYXlsb2FkKSwgRW1iZXIudHlwZU9mKHBheWxvYWQpID09PSAnYXJyYXkn
        KTsKCiAgICB2YXIgcmVjb3JkcyA9IHN0b3JlLnB1c2hNYW55KHJlbGF0aW9u
        c2hpcC50eXBlLCBwYXlsb2FkKTsKICAgIHJlY29yZC51cGRhdGVIYXNNYW55
        KHJlbGF0aW9uc2hpcC5rZXksIHJlY29yZHMpOwogIH0sIG51bGwsICJEUzog
        RXh0cmFjdCBwYXlsb2FkIG9mICIgKyByZWNvcmQgKyAiIDogaGFzTWFueSAi
        ICsgcmVsYXRpb25zaGlwLnR5cGUpOwp9CgpmdW5jdGlvbiBfZmluZEJlbG9u
        Z3NUbyhhZGFwdGVyLCBzdG9yZSwgcmVjb3JkLCBsaW5rLCByZWxhdGlvbnNo
        aXApIHsKICB2YXIgcHJvbWlzZSA9IGFkYXB0ZXIuZmluZEJlbG9uZ3NUbyhz
        dG9yZSwgcmVjb3JkLCBsaW5rLCByZWxhdGlvbnNoaXApLAogICAgICBzZXJp
        YWxpemVyID0gc2VyaWFsaXplckZvckFkYXB0ZXIoYWRhcHRlciwgcmVsYXRp
        b25zaGlwLnR5cGUpOwoKICByZXR1cm4gcmVzb2x2ZShwcm9taXNlLCAiRFM6
        IEhhbmRsZSBBZGFwdGVyI2ZpbmRCZWxvbmdzVG8gb2YgIiArIHJlY29yZCAr
        ICIgOiAiICsgcmVsYXRpb25zaGlwLnR5cGUpLnRoZW4oZnVuY3Rpb24ocGF5
        bG9hZCkgewogICAgcGF5bG9hZCA9IHNlcmlhbGl6ZXIuZXh0cmFjdChzdG9y
        ZSwgcmVsYXRpb25zaGlwLnR5cGUsIHBheWxvYWQsIG51bGwsICdmaW5kQmVs
        b25nc1RvJyk7CgogICAgdmFyIHJlY29yZCA9IHN0b3JlLnB1c2gocmVsYXRp
        b25zaGlwLnR5cGUsIHBheWxvYWQpOwogICAgcmVjb3JkLnVwZGF0ZUJlbG9u
        Z3NUbyhyZWxhdGlvbnNoaXAua2V5LCByZWNvcmQpOwogICAgcmV0dXJuIHJl
        Y29yZDsKICB9LCBudWxsLCAiRFM6IEV4dHJhY3QgcGF5bG9hZCBvZiAiICsg
        cmVjb3JkICsgIiA6ICIgKyByZWxhdGlvbnNoaXAudHlwZSk7Cn0KCmZ1bmN0
        aW9uIF9maW5kQWxsKGFkYXB0ZXIsIHN0b3JlLCB0eXBlLCBzaW5jZVRva2Vu
        KSB7CiAgdmFyIHByb21pc2UgPSBhZGFwdGVyLmZpbmRBbGwoc3RvcmUsIHR5
        cGUsIHNpbmNlVG9rZW4pLAogICAgICBzZXJpYWxpemVyID0gc2VyaWFsaXpl
        ckZvckFkYXB0ZXIoYWRhcHRlciwgdHlwZSk7CgogIHJldHVybiByZXNvbHZl
        KHByb21pc2UsICJEUzogSGFuZGxlIEFkYXB0ZXIjZmluZEFsbCBvZiAiICsg
        dHlwZSkudGhlbihmdW5jdGlvbihwYXlsb2FkKSB7CiAgICBwYXlsb2FkID0g
        c2VyaWFsaXplci5leHRyYWN0KHN0b3JlLCB0eXBlLCBwYXlsb2FkLCBudWxs
        LCAnZmluZEFsbCcpOwoKICAgIEVtYmVyLmFzc2VydCgiVGhlIHJlc3BvbnNl
        IGZyb20gYSBmaW5kQWxsIG11c3QgYmUgYW4gQXJyYXksIG5vdCAiICsgRW1i
        ZXIuaW5zcGVjdChwYXlsb2FkKSwgRW1iZXIudHlwZU9mKHBheWxvYWQpID09
        PSAnYXJyYXknKTsKCiAgICBzdG9yZS5wdXNoTWFueSh0eXBlLCBwYXlsb2Fk
        KTsKICAgIHN0b3JlLmRpZFVwZGF0ZUFsbCh0eXBlKTsKICAgIHJldHVybiBz
        dG9yZS5hbGwodHlwZSk7CiAgfSwgbnVsbCwgIkRTOiBFeHRyYWN0IHBheWxv
        YWQgb2YgZmluZEFsbCAiICsgdHlwZSk7Cn0KCmZ1bmN0aW9uIF9maW5kUXVl
        cnkoYWRhcHRlciwgc3RvcmUsIHR5cGUsIHF1ZXJ5LCByZWNvcmRBcnJheSkg
        ewogIHZhciBwcm9taXNlID0gYWRhcHRlci5maW5kUXVlcnkoc3RvcmUsIHR5
        cGUsIHF1ZXJ5LCByZWNvcmRBcnJheSksCiAgICAgIHNlcmlhbGl6ZXIgPSBz
        ZXJpYWxpemVyRm9yQWRhcHRlcihhZGFwdGVyLCB0eXBlKTsKCiAgcmV0dXJu
        IHJlc29sdmUocHJvbWlzZSwgIkRTOiBIYW5kbGUgQWRhcHRlciNmaW5kUXVl
        cnkgb2YgIiArIHR5cGUpLnRoZW4oZnVuY3Rpb24ocGF5bG9hZCkgewogICAg
        cGF5bG9hZCA9IHNlcmlhbGl6ZXIuZXh0cmFjdChzdG9yZSwgdHlwZSwgcGF5
        bG9hZCwgbnVsbCwgJ2ZpbmRRdWVyeScpOwoKICAgIEVtYmVyLmFzc2VydCgi
        VGhlIHJlc3BvbnNlIGZyb20gYSBmaW5kUXVlcnkgbXVzdCBiZSBhbiBBcnJh
        eSwgbm90ICIgKyBFbWJlci5pbnNwZWN0KHBheWxvYWQpLCBFbWJlci50eXBl
        T2YocGF5bG9hZCkgPT09ICdhcnJheScpOwoKICAgIHJlY29yZEFycmF5Lmxv
        YWQocGF5bG9hZCk7CiAgICByZXR1cm4gcmVjb3JkQXJyYXk7CiAgfSwgbnVs
        bCwgIkRTOiBFeHRyYWN0IHBheWxvYWQgb2YgZmluZFF1ZXJ5ICIgKyB0eXBl
        KTsKfQoKZnVuY3Rpb24gX2NvbW1pdChhZGFwdGVyLCBzdG9yZSwgb3BlcmF0
        aW9uLCByZWNvcmQpIHsKICB2YXIgdHlwZSA9IHJlY29yZC5jb25zdHJ1Y3Rv
        ciwKICAgICAgcHJvbWlzZSA9IGFkYXB0ZXJbb3BlcmF0aW9uXShzdG9yZSwg
        dHlwZSwgcmVjb3JkKSwKICAgICAgc2VyaWFsaXplciA9IHNlcmlhbGl6ZXJG
        b3JBZGFwdGVyKGFkYXB0ZXIsIHR5cGUpOwoKICBFbWJlci5hc3NlcnQoIllv
        dXIgYWRhcHRlcidzICciICsgb3BlcmF0aW9uICsgIicgbWV0aG9kIG11c3Qg
        cmV0dXJuIGEgcHJvbWlzZSwgYnV0IGl0IHJldHVybmVkICIgKyBwcm9taXNl
        LCBpc1RoZW5hYmxlKHByb21pc2UpKTsKCiAgcmV0dXJuIHByb21pc2UudGhl
        bihmdW5jdGlvbihwYXlsb2FkKSB7CiAgICBpZiAocGF5bG9hZCkgeyBwYXls
        b2FkID0gc2VyaWFsaXplci5leHRyYWN0KHN0b3JlLCB0eXBlLCBwYXlsb2Fk
        LCBnZXQocmVjb3JkLCAnaWQnKSwgb3BlcmF0aW9uKTsgfQogICAgc3RvcmUu
        ZGlkU2F2ZVJlY29yZChyZWNvcmQsIHBheWxvYWQpOwogICAgcmV0dXJuIHJl
        Y29yZDsKICB9LCBmdW5jdGlvbihyZWFzb24pIHsKICAgIGlmIChyZWFzb24g
        aW5zdGFuY2VvZiBEUy5JbnZhbGlkRXJyb3IpIHsKICAgICAgc3RvcmUucmVj
        b3JkV2FzSW52YWxpZChyZWNvcmQsIHJlYXNvbi5lcnJvcnMpOwogICAgfSBl
        bHNlIHsKICAgICAgc3RvcmUucmVjb3JkV2FzRXJyb3IocmVjb3JkLCByZWFz
        b24pOwogICAgfQoKICAgIHRocm93IHJlYXNvbjsKICB9LCAiRFM6IEV4dHJh
        Y3QgYW5kIG5vdGlmeSBhYm91dCAiICsgb3BlcmF0aW9uICsgIiBjb21wbGV0
        aW9uIG9mICIgKyByZWNvcmQpOwp9Cgp9KSgpOwoKCgooZnVuY3Rpb24oKSB7
        Ci8qKgogIEBtb2R1bGUgZW1iZXItZGF0YQoqLwoKdmFyIGdldCA9IEVtYmVy
        LmdldCwgc2V0ID0gRW1iZXIuc2V0OwovKgogIFRoaXMgZmlsZSBlbmNhcHN1
        bGF0ZXMgdGhlIHZhcmlvdXMgc3RhdGVzIHRoYXQgYSByZWNvcmQgY2FuIHRy
        YW5zaXRpb24KICB0aHJvdWdoIGR1cmluZyBpdHMgbGlmZWN5Y2xlLgoqLwov
        KioKICAjIyMgU3RhdGUKCiAgRWFjaCByZWNvcmQgaGFzIGEgYGN1cnJlbnRT
        dGF0ZWAgcHJvcGVydHkgdGhhdCBleHBsaWNpdGx5IHRyYWNrcyB3aGF0CiAg
        c3RhdGUgYSByZWNvcmQgaXMgaW4gYXQgYW55IGdpdmVuIHRpbWUuIEZvciBp
        bnN0YW5jZSwgaWYgYSByZWNvcmQgaXMKICBuZXdseSBjcmVhdGVkIGFuZCBo
        YXMgbm90IHlldCBiZWVuIHNlbnQgdG8gdGhlIGFkYXB0ZXIgdG8gYmUgc2F2
        ZWQsCiAgaXQgd291bGQgYmUgaW4gdGhlIGByb290LmxvYWRlZC5jcmVhdGVk
        LnVuY29tbWl0dGVkYCBzdGF0ZS4gIElmIGEKICByZWNvcmQgaGFzIGhhZCBs
        b2NhbCBtb2RpZmljYXRpb25zIG1hZGUgdG8gaXQgdGhhdCBhcmUgaW4gdGhl
        CiAgcHJvY2VzcyBvZiBiZWluZyBzYXZlZCwgdGhlIHJlY29yZCB3b3VsZCBi
        ZSBpbiB0aGUKICBgcm9vdC5sb2FkZWQudXBkYXRlZC5pbkZsaWdodGAgc3Rh
        dGUuIChUaGVzZSBzdGF0ZSBwYXRocyB3aWxsIGJlCiAgZXhwbGFpbmVkIGlu
        IG1vcmUgZGV0YWlsIGJlbG93LikKCiAgRXZlbnRzIGFyZSBzZW50IGJ5IHRo
        ZSByZWNvcmQgb3IgaXRzIHN0b3JlIHRvIHRoZSByZWNvcmQncwogIGBjdXJy
        ZW50U3RhdGVgIHByb3BlcnR5LiBIb3cgdGhlIHN0YXRlIHJlYWN0cyB0byB0
        aGVzZSBldmVudHMgaXMKICBkZXBlbmRlbnQgb24gd2hpY2ggc3RhdGUgaXQg
        aXMgaW4uIEluIHNvbWUgc3RhdGVzLCBjZXJ0YWluIGV2ZW50cwogIHdpbGwg
        YmUgaW52YWxpZCBhbmQgd2lsbCBjYXVzZSBhbiBleGNlcHRpb24gdG8gYmUg
        cmFpc2VkLgoKICBTdGF0ZXMgYXJlIGhpZXJhcmNoaWNhbCBhbmQgZXZlcnkg
        c3RhdGUgaXMgYSBzdWJzdGF0ZSBvZiB0aGUKICBgUm9vdFN0YXRlYC4gRm9y
        IGV4YW1wbGUsIGEgcmVjb3JkIGNhbiBiZSBpbiB0aGUKICBgcm9vdC5kZWxl
        dGVkLnVuY29tbWl0dGVkYCBzdGF0ZSwgdGhlbiB0cmFuc2l0aW9uIGludG8g
        dGhlCiAgYHJvb3QuZGVsZXRlZC5pbkZsaWdodGAgc3RhdGUuIElmIGEgY2hp
        bGQgc3RhdGUgZG9lcyBub3QgaW1wbGVtZW50CiAgYW4gZXZlbnQgaGFuZGxl
        ciwgdGhlIHN0YXRlIG1hbmFnZXIgd2lsbCBhdHRlbXB0IHRvIGludm9rZSB0
        aGUgZXZlbnQKICBvbiBhbGwgcGFyZW50IHN0YXRlcyB1bnRpbCB0aGUgcm9v
        dCBzdGF0ZSBpcyByZWFjaGVkLiBUaGUgc3RhdGUKICBoaWVyYXJjaHkgb2Yg
        YSByZWNvcmQgaXMgZGVzY3JpYmVkIGluIHRlcm1zIG9mIGEgcGF0aCBzdHJp
        bmcuIFlvdQogIGNhbiBkZXRlcm1pbmUgYSByZWNvcmQncyBjdXJyZW50IHN0
        YXRlIGJ5IGdldHRpbmcgdGhlIHN0YXRlJ3MKICBgc3RhdGVOYW1lYCBwcm9w
        ZXJ0eToKCiAgYGBgamF2YXNjcmlwdAogIHJlY29yZC5nZXQoJ2N1cnJlbnRT
        dGF0ZS5zdGF0ZU5hbWUnKTsKICAvLz0+ICJyb290LmNyZWF0ZWQudW5jb21t
        aXR0ZWQiCiAgIGBgYAoKICBUaGUgaGllcmFyY2h5IG9mIHZhbGlkIHN0YXRl
        cyB0aGF0IHNoaXAgd2l0aCBlbWJlciBkYXRhIGxvb2tzIGxpa2UKICB0aGlz
        OgoKICBgYGB0ZXh0CiAgKiByb290CiAgICAqIGRlbGV0ZWQKICAgICAgKiBz
        YXZlZAogICAgICAqIHVuY29tbWl0dGVkCiAgICAgICogaW5GbGlnaHQKICAg
        ICogZW1wdHkKICAgICogbG9hZGVkCiAgICAgICogY3JlYXRlZAogICAgICAg
        ICogdW5jb21taXR0ZWQKICAgICAgICAqIGluRmxpZ2h0CiAgICAgICogc2F2
        ZWQKICAgICAgKiB1cGRhdGVkCiAgICAgICAgKiB1bmNvbW1pdHRlZAogICAg
        ICAgICogaW5GbGlnaHQKICAgICogbG9hZGluZwogIGBgYAoKICBUaGUgYERT
        Lk1vZGVsYCBzdGF0ZXMgYXJlIHRoZW1zZWx2ZXMgc3RhdGVsZXNzLiBXaGF0
        IHdlIG1lYW4gaXMKICB0aGF0LCB0aGUgaGllcmFyY2hpY2FsIHN0YXRlcyB0
        aGF0IGVhY2ggb2YgKnRob3NlKiBwb2ludHMgdG8gaXMgYQogIHNoYXJlZCBk
        YXRhIHN0cnVjdHVyZS4gRm9yIHBlcmZvcm1hbmNlIHJlYXNvbnMsIGluc3Rl
        YWQgb2YgZWFjaAogIHJlY29yZCBnZXR0aW5nIGl0cyBvd24gY29weSBvZiB0
        aGUgaGllcmFyY2h5IG9mIHN0YXRlcywgZWFjaCByZWNvcmQKICBwb2ludHMg
        dG8gdGhpcyBnbG9iYWwsIGltbXV0YWJsZSBzaGFyZWQgaW5zdGFuY2UuIEhv
        dyBkb2VzIGEgc3RhdGUKICBrbm93IHdoaWNoIHJlY29yZCBpdCBzaG91bGQg
        YmUgYWN0aW5nIG9uPyBXZSBwYXNzIHRoZSByZWNvcmQKICBpbnN0YW5jZSBp
        bnRvIHRoZSBzdGF0ZSdzIGV2ZW50IGhhbmRsZXJzIGFzIHRoZSBmaXJzdCBh
        cmd1bWVudC4KCiAgVGhlIHJlY29yZCBwYXNzZWQgYXMgdGhlIGZpcnN0IHBh
        cmFtZXRlciBpcyB3aGVyZSB5b3Ugc2hvdWxkIHN0YXNoCiAgc3RhdGUgYWJv
        dXQgdGhlIHJlY29yZCBpZiBuZWVkZWQ7IHlvdSBzaG91bGQgbmV2ZXIgc3Rv
        cmUgZGF0YSBvbiB0aGUgc3RhdGUKICBvYmplY3QgaXRzZWxmLgoKICAjIyMg
        RXZlbnRzIGFuZCBGbGFncwoKICBBIHN0YXRlIG1heSBpbXBsZW1lbnQgemVy
        byBvciBtb3JlIGV2ZW50cyBhbmQgZmxhZ3MuCgogICMjIyMgRXZlbnRzCgog
        IEV2ZW50cyBhcmUgbmFtZWQgZnVuY3Rpb25zIHRoYXQgYXJlIGludm9rZWQg
        d2hlbiBzZW50IHRvIGEgcmVjb3JkLiBUaGUKICByZWNvcmQgd2lsbCBmaXJz
        dCBsb29rIGZvciBhIG1ldGhvZCB3aXRoIHRoZSBnaXZlbiBuYW1lIG9uIHRo
        ZQogIGN1cnJlbnQgc3RhdGUuIElmIG5vIG1ldGhvZCBpcyBmb3VuZCwgaXQg
        d2lsbCBzZWFyY2ggdGhlIGN1cnJlbnQKICBzdGF0ZSdzIHBhcmVudCwgYW5k
        IHRoZW4gaXRzIGdyYW5kcGFyZW50LCBhbmQgc28gb24gdW50aWwgcmVhY2hp
        bmcKICB0aGUgdG9wIG9mIHRoZSBoaWVyYXJjaHkuIElmIHRoZSByb290IGlz
        IHJlYWNoZWQgd2l0aG91dCBhbiBldmVudAogIGhhbmRsZXIgYmVpbmcgZm91
        bmQsIGFuIGV4Y2VwdGlvbiB3aWxsIGJlIHJhaXNlZC4gVGhpcyBjYW4gYmUg
        dmVyeQogIGhlbHBmdWwgd2hlbiBkZWJ1Z2dpbmcgbmV3IGZlYXR1cmVzLgoK
        ICBIZXJlJ3MgYW4gZXhhbXBsZSBpbXBsZW1lbnRhdGlvbiBvZiBhIHN0YXRl
        IHdpdGggYSBgbXlFdmVudGAgZXZlbnQgaGFuZGxlcjoKCiAgYGBgamF2YXNj
        cmlwdAogIGFTdGF0ZTogRFMuU3RhdGUuY3JlYXRlKHsKICAgIG15RXZlbnQ6
        IGZ1bmN0aW9uKG1hbmFnZXIsIHBhcmFtKSB7CiAgICAgIGNvbnNvbGUubG9n
        KCJSZWNlaXZlZCBteUV2ZW50IHdpdGgiLCBwYXJhbSk7CiAgICB9CiAgfSkK
        ICBgYGAKCiAgVG8gdHJpZ2dlciB0aGlzIGV2ZW50OgoKICBgYGBqYXZhc2Ny
        aXB0CiAgcmVjb3JkLnNlbmQoJ215RXZlbnQnLCAnZm9vJyk7CiAgLy89PiAi
        UmVjZWl2ZWQgbXlFdmVudCB3aXRoIGZvbyIKICBgYGAKCiAgTm90ZSB0aGF0
        IGFuIG9wdGlvbmFsIHBhcmFtZXRlciBjYW4gYmUgc2VudCB0byBhIHJlY29y
        ZCdzIGBzZW5kKClgIG1ldGhvZCwKICB3aGljaCB3aWxsIGJlIHBhc3NlZCBh
        cyB0aGUgc2Vjb25kIHBhcmFtZXRlciB0byB0aGUgZXZlbnQgaGFuZGxlci4K
        CiAgRXZlbnRzIHNob3VsZCB0cmFuc2l0aW9uIHRvIGEgZGlmZmVyZW50IHN0
        YXRlIGlmIGFwcHJvcHJpYXRlLiBUaGlzIGNhbiBiZQogIGRvbmUgYnkgY2Fs
        bGluZyB0aGUgcmVjb3JkJ3MgYHRyYW5zaXRpb25UbygpYCBtZXRob2Qgd2l0
        aCBhIHBhdGggdG8gdGhlCiAgZGVzaXJlZCBzdGF0ZS4gVGhlIHN0YXRlIG1h
        bmFnZXIgd2lsbCBhdHRlbXB0IHRvIHJlc29sdmUgdGhlIHN0YXRlIHBhdGgK
        ICByZWxhdGl2ZSB0byB0aGUgY3VycmVudCBzdGF0ZS4gSWYgbm8gc3RhdGUg
        aXMgZm91bmQgYXQgdGhhdCBwYXRoLCBpdCB3aWxsCiAgYXR0ZW1wdCB0byBy
        ZXNvbHZlIGl0IHJlbGF0aXZlIHRvIHRoZSBjdXJyZW50IHN0YXRlJ3MgcGFy
        ZW50LCBhbmQgdGhlbiBpdHMKICBwYXJlbnQsIGFuZCBzbyBvbiB1bnRpbCB0
        aGUgcm9vdCBpcyByZWFjaGVkLiBGb3IgZXhhbXBsZSwgaW1hZ2luZSBhIGhp
        ZXJhcmNoeQogIGxpa2UgdGhpczoKCiAgICAgICogY3JlYXRlZAogICAgICAg
        ICogdW5jb21taXR0ZWQgPC0tIGN1cnJlbnRTdGF0ZQogICAgICAgICogaW5G
        bGlnaHQKICAgICAgKiB1cGRhdGVkCiAgICAgICAgKiBpbkZsaWdodAoKICBJ
        ZiB3ZSBhcmUgY3VycmVudGx5IGluIHRoZSBgdW5jb21taXR0ZWRgIHN0YXRl
        LCBjYWxsaW5nCiAgYHRyYW5zaXRpb25UbygnaW5GbGlnaHQnKWAgd291bGQg
        dHJhbnNpdGlvbiB0byB0aGUgYGNyZWF0ZWQuaW5GbGlnaHRgIHN0YXRlLAog
        IHdoaWxlIGNhbGxpbmcgYHRyYW5zaXRpb25UbygndXBkYXRlZC5pbkZsaWdo
        dCcpYCB3b3VsZCB0cmFuc2l0aW9uIHRvCiAgdGhlIGB1cGRhdGVkLmluRmxp
        Z2h0YCBzdGF0ZS4KCiAgUmVtZW1iZXIgdGhhdCAqb25seSBldmVudHMqIHNo
        b3VsZCBldmVyIGNhdXNlIGEgc3RhdGUgdHJhbnNpdGlvbi4gWW91IHNob3Vs
        ZAogIG5ldmVyIGNhbGwgYHRyYW5zaXRpb25UbygpYCBmcm9tIG91dHNpZGUg
        YSBzdGF0ZSdzIGV2ZW50IGhhbmRsZXIuIElmIHlvdSBhcmUKICB0ZW1wdGVk
        IHRvIGRvIHNvLCBjcmVhdGUgYSBuZXcgZXZlbnQgYW5kIHNlbmQgdGhhdCB0
        byB0aGUgc3RhdGUgbWFuYWdlci4KCiAgIyMjIyBGbGFncwoKICBGbGFncyBh
        cmUgQm9vbGVhbiB2YWx1ZXMgdGhhdCBjYW4gYmUgdXNlZCB0byBpbnRyb3Nw
        ZWN0IGEgcmVjb3JkJ3MgY3VycmVudAogIHN0YXRlIGluIGEgbW9yZSB1c2Vy
        LWZyaWVuZGx5IHdheSB0aGFuIGV4YW1pbmluZyBpdHMgc3RhdGUgcGF0aC4g
        Rm9yIGV4YW1wbGUsCiAgaW5zdGVhZCBvZiBkb2luZyB0aGlzOgoKICBgYGBq
        YXZhc2NyaXB0CiAgdmFyIHN0YXRlUGF0aCA9IHJlY29yZC5nZXQoJ3N0YXRl
        TWFuYWdlci5jdXJyZW50UGF0aCcpOwogIGlmIChzdGF0ZVBhdGggPT09ICdj
        cmVhdGVkLmluRmxpZ2h0JykgewogICAgZG9Tb21ldGhpbmcoKTsKICB9CiAg
        YGBgCgogIFlvdSBjYW4gc2F5OgoKICBgYGBqYXZhc2NyaXB0CiAgaWYgKHJl
        Y29yZC5nZXQoJ2lzTmV3JykgJiYgcmVjb3JkLmdldCgnaXNTYXZpbmcnKSkg
        ewogICAgZG9Tb21ldGhpbmcoKTsKICB9CiAgYGBgCgogIElmIHlvdXIgc3Rh
        dGUgZG9lcyBub3Qgc2V0IGEgdmFsdWUgZm9yIGEgZ2l2ZW4gZmxhZywgdGhl
        IHZhbHVlIHdpbGwKICBiZSBpbmhlcml0ZWQgZnJvbSBpdHMgcGFyZW50IChv
        ciB0aGUgZmlyc3QgcGxhY2UgaW4gdGhlIHN0YXRlIGhpZXJhcmNoeQogIHdo
        ZXJlIGl0IGlzIGRlZmluZWQpLgoKICBUaGUgY3VycmVudCBzZXQgb2YgZmxh
        Z3MgYXJlIGRlZmluZWQgYmVsb3cuIElmIHlvdSB3YW50IHRvIGFkZCBhIG5l
        dyBmbGFnLAogIGluIGFkZGl0aW9uIHRvIHRoZSBhcmVhIGJlbG93LCB5b3Ug
        d2lsbCBhbHNvIG5lZWQgdG8gZGVjbGFyZSBpdCBpbiB0aGUKICBgRFMuTW9k
        ZWxgIGNsYXNzLgoKCiAgICogW2lzRW1wdHldKERTLk1vZGVsLmh0bWwjcHJv
        cGVydHlfaXNFbXB0eSkKICAgKiBbaXNMb2FkaW5nXShEUy5Nb2RlbC5odG1s
        I3Byb3BlcnR5X2lzTG9hZGluZykKICAgKiBbaXNMb2FkZWRdKERTLk1vZGVs
        Lmh0bWwjcHJvcGVydHlfaXNMb2FkZWQpCiAgICogW2lzRGlydHldKERTLk1v
        ZGVsLmh0bWwjcHJvcGVydHlfaXNEaXJ0eSkKICAgKiBbaXNTYXZpbmddKERT
        Lk1vZGVsLmh0bWwjcHJvcGVydHlfaXNTYXZpbmcpCiAgICogW2lzRGVsZXRl
        ZF0oRFMuTW9kZWwuaHRtbCNwcm9wZXJ0eV9pc0RlbGV0ZWQpCiAgICogW2lz
        TmV3XShEUy5Nb2RlbC5odG1sI3Byb3BlcnR5X2lzTmV3KQogICAqIFtpc1Zh
        bGlkXShEUy5Nb2RlbC5odG1sI3Byb3BlcnR5X2lzVmFsaWQpCgogIEBuYW1l
        c3BhY2UgRFMKICBAY2xhc3MgUm9vdFN0YXRlCiovCgp2YXIgaGFzRGVmaW5l
        ZFByb3BlcnRpZXMgPSBmdW5jdGlvbihvYmplY3QpIHsKICAvLyBJZ25vcmUg
        aW50ZXJuYWwgcHJvcGVydHkgZGVmaW5lZCBieSBzaW11bGF0ZWQgYEVtYmVy
        LmNyZWF0ZWAuCiAgdmFyIG5hbWVzID0gRW1iZXIua2V5cyhvYmplY3QpOwog
        IHZhciBpLCBsLCBuYW1lOwogIGZvciAoaSA9IDAsIGwgPSBuYW1lcy5sZW5n
        dGg7IGkgPCBsOyBpKysgKSB7CiAgICBuYW1lID0gbmFtZXNbaV07CiAgICBp
        ZiAob2JqZWN0Lmhhc093blByb3BlcnR5KG5hbWUpICYmIG9iamVjdFtuYW1l
        XSkgeyByZXR1cm4gdHJ1ZTsgfQogIH0KCiAgcmV0dXJuIGZhbHNlOwp9OwoK
        dmFyIGRpZFNldFByb3BlcnR5ID0gZnVuY3Rpb24ocmVjb3JkLCBjb250ZXh0
        KSB7CiAgaWYgKGNvbnRleHQudmFsdWUgPT09IGNvbnRleHQub3JpZ2luYWxW
        YWx1ZSkgewogICAgZGVsZXRlIHJlY29yZC5fYXR0cmlidXRlc1tjb250ZXh0
        Lm5hbWVdOwogICAgcmVjb3JkLnNlbmQoJ3Byb3BlcnR5V2FzUmVzZXQnLCBj
        b250ZXh0Lm5hbWUpOwogIH0gZWxzZSBpZiAoY29udGV4dC52YWx1ZSAhPT0g
        Y29udGV4dC5vbGRWYWx1ZSkgewogICAgcmVjb3JkLnNlbmQoJ2JlY29tZURp
        cnR5Jyk7CiAgfQoKICByZWNvcmQudXBkYXRlUmVjb3JkQXJyYXlzTGF0ZXIo
        KTsKfTsKCi8vIEltcGxlbWVudGF0aW9uIG5vdGVzOgovLwovLyBFYWNoIHN0
        YXRlIGhhcyBhIGJvb2xlYW4gdmFsdWUgZm9yIGFsbCBvZiB0aGUgZm9sbG93
        aW5nIGZsYWdzOgovLwovLyAqIGlzTG9hZGVkOiBUaGUgcmVjb3JkIGhhcyBh
        IHBvcHVsYXRlZCBgZGF0YWAgcHJvcGVydHkuIFdoZW4gYQovLyAgIHJlY29y
        ZCBpcyBsb2FkZWQgdmlhIGBzdG9yZS5maW5kYCwgYGlzTG9hZGVkYCBpcyBm
        YWxzZQovLyAgIHVudGlsIHRoZSBhZGFwdGVyIHNldHMgaXQuIFdoZW4gYSBy
        ZWNvcmQgaXMgY3JlYXRlZCBsb2NhbGx5LAovLyAgIGl0cyBgaXNMb2FkZWRg
        IHByb3BlcnR5IGlzIGFsd2F5cyB0cnVlLgovLyAqIGlzRGlydHk6IFRoZSBy
        ZWNvcmQgaGFzIGxvY2FsIGNoYW5nZXMgdGhhdCBoYXZlIG5vdCB5ZXQgYmVl
        bgovLyAgIHNhdmVkIGJ5IHRoZSBhZGFwdGVyLiBUaGlzIGluY2x1ZGVzIHJl
        Y29yZHMgdGhhdCBoYXZlIGJlZW4KLy8gICBjcmVhdGVkIChidXQgbm90IHll
        dCBzYXZlZCkgb3IgZGVsZXRlZC4KLy8gKiBpc1NhdmluZzogVGhlIHJlY29y
        ZCBoYXMgYmVlbiBjb21taXR0ZWQsIGJ1dAovLyAgIHRoZSBhZGFwdGVyIGhh
        cyBub3QgeWV0IGFja25vd2xlZGdlZCB0aGF0IHRoZSBjaGFuZ2VzIGhhdmUK
        Ly8gICBiZWVuIHBlcnNpc3RlZCB0byB0aGUgYmFja2VuZC4KLy8gKiBpc0Rl
        bGV0ZWQ6IFRoZSByZWNvcmQgd2FzIG1hcmtlZCBmb3IgZGVsZXRpb24uIFdo
        ZW4gYGlzRGVsZXRlZGAKLy8gICBpcyB0cnVlIGFuZCBgaXNEaXJ0eWAgaXMg
        dHJ1ZSwgdGhlIHJlY29yZCBpcyBkZWxldGVkIGxvY2FsbHkKLy8gICBidXQg
        dGhlIGRlbGV0aW9uIHdhcyBub3QgeWV0IHBlcnNpc3RlZC4gV2hlbiBgaXNT
        YXZpbmdgIGlzCi8vICAgdHJ1ZSwgdGhlIGNoYW5nZSBpcyBpbi1mbGlnaHQu
        IFdoZW4gYm90aCBgaXNEaXJ0eWAgYW5kCi8vICAgYGlzU2F2aW5nYCBhcmUg
        ZmFsc2UsIHRoZSBjaGFuZ2UgaGFzIHBlcnNpc3RlZC4KLy8gKiBpc0Vycm9y
        OiBUaGUgYWRhcHRlciByZXBvcnRlZCB0aGF0IGl0IHdhcyB1bmFibGUgdG8g
        c2F2ZQovLyAgIGxvY2FsIGNoYW5nZXMgdG8gdGhlIGJhY2tlbmQuIFRoaXMg
        bWF5IGFsc28gcmVzdWx0IGluIHRoZQovLyAgIHJlY29yZCBoYXZpbmcgaXRz
        IGBpc1ZhbGlkYCBwcm9wZXJ0eSBiZWNvbWUgZmFsc2UgaWYgdGhlCi8vICAg
        YWRhcHRlciByZXBvcnRlZCB0aGF0IHNlcnZlci1zaWRlIHZhbGlkYXRpb25z
        IGZhaWxlZC4KLy8gKiBpc05ldzogVGhlIHJlY29yZCB3YXMgY3JlYXRlZCBv
        biB0aGUgY2xpZW50IGFuZCB0aGUgYWRhcHRlcgovLyAgIGRpZCBub3QgeWV0
        IHJlcG9ydCB0aGF0IGl0IHdhcyBzdWNjZXNzZnVsbHkgc2F2ZWQuCi8vICog
        aXNWYWxpZDogTm8gY2xpZW50LXNpZGUgdmFsaWRhdGlvbnMgaGF2ZSBmYWls
        ZWQgYW5kIHRoZQovLyAgIGFkYXB0ZXIgZGlkIG5vdCByZXBvcnQgYW55IHNl
        cnZlci1zaWRlIHZhbGlkYXRpb24gZmFpbHVyZXMuCgovLyBUaGUgZGlydHkg
        c3RhdGUgaXMgYSBhYnN0cmFjdCBzdGF0ZSB3aG9zZSBmdW5jdGlvbmFsaXR5
        IGlzCi8vIHNoYXJlZCBiZXR3ZWVuIHRoZSBgY3JlYXRlZGAgYW5kIGB1cGRh
        dGVkYCBzdGF0ZXMuCi8vCi8vIFRoZSBkZWxldGVkIHN0YXRlIHNoYXJlcyB0
        aGUgYGlzRGlydHlgIGZsYWcgd2l0aCB0aGUKLy8gc3ViY2xhc3NlcyBvZiBg
        RGlydHlTdGF0ZWAsIGJ1dCB3aXRoIGEgdmVyeSBkaWZmZXJlbnQKLy8gaW1w
        bGVtZW50YXRpb24uCi8vCi8vIERpcnR5IHN0YXRlcyBoYXZlIHRocmVlIGNo
        aWxkIHN0YXRlczoKLy8KLy8gYHVuY29tbWl0dGVkYDogdGhlIHN0b3JlIGhh
        cyBub3QgeWV0IGhhbmRlZCBvZmYgdGhlIHJlY29yZAovLyAgIHRvIGJlIHNh
        dmVkLgovLyBgaW5GbGlnaHRgOiB0aGUgc3RvcmUgaGFzIGhhbmRlZCBvZmYg
        dGhlIHJlY29yZCB0byBiZSBzYXZlZCwKLy8gICBidXQgdGhlIGFkYXB0ZXIg
        aGFzIG5vdCB5ZXQgYWNrbm93bGVkZ2VkIHN1Y2Nlc3MuCi8vIGBpbnZhbGlk
        YDogdGhlIHJlY29yZCBoYXMgaW52YWxpZCBpbmZvcm1hdGlvbiBhbmQgY2Fu
        bm90IGJlCi8vICAgc2VuZCB0byB0aGUgYWRhcHRlciB5ZXQuCnZhciBEaXJ0
        eVN0YXRlID0gewogIGluaXRpYWxTdGF0ZTogJ3VuY29tbWl0dGVkJywKCiAg
        Ly8gRkxBR1MKICBpc0RpcnR5OiB0cnVlLAoKICAvLyBTVUJTVEFURVMKCiAg
        Ly8gV2hlbiBhIHJlY29yZCBmaXJzdCBiZWNvbWVzIGRpcnR5LCBpdCBpcyBg
        dW5jb21taXR0ZWRgLgogIC8vIFRoaXMgbWVhbnMgdGhhdCB0aGVyZSBhcmUg
        bG9jYWwgcGVuZGluZyBjaGFuZ2VzLCBidXQgdGhleQogIC8vIGhhdmUgbm90
        IHlldCBiZWd1biB0byBiZSBzYXZlZCwgYW5kIGFyZSBub3QgaW52YWxpZC4K
        ICB1bmNvbW1pdHRlZDogewogICAgLy8gRVZFTlRTCiAgICBkaWRTZXRQcm9w
        ZXJ0eTogZGlkU2V0UHJvcGVydHksCgogICAgcHJvcGVydHlXYXNSZXNldDog
        ZnVuY3Rpb24ocmVjb3JkLCBuYW1lKSB7CiAgICAgIHZhciBzdGlsbERpcnR5
        ID0gZmFsc2U7CgogICAgICBmb3IgKHZhciBwcm9wIGluIHJlY29yZC5fYXR0
        cmlidXRlcykgewogICAgICAgIHN0aWxsRGlydHkgPSB0cnVlOwogICAgICAg
        IGJyZWFrOwogICAgICB9CgogICAgICBpZiAoIXN0aWxsRGlydHkpIHsgcmVj
        b3JkLnNlbmQoJ3JvbGxlZEJhY2snKTsgfQogICAgfSwKCiAgICBwdXNoZWRE
        YXRhOiBFbWJlci5LLAoKICAgIGJlY29tZURpcnR5OiBFbWJlci5LLAoKICAg
        IHdpbGxDb21taXQ6IGZ1bmN0aW9uKHJlY29yZCkgewogICAgICByZWNvcmQu
        dHJhbnNpdGlvblRvKCdpbkZsaWdodCcpOwogICAgfSwKCiAgICByZWxvYWRS
        ZWNvcmQ6IGZ1bmN0aW9uKHJlY29yZCwgcmVzb2x2ZSkgewogICAgICByZXNv
        bHZlKGdldChyZWNvcmQsICdzdG9yZScpLnJlbG9hZFJlY29yZChyZWNvcmQp
        KTsKICAgIH0sCgogICAgcm9sbGVkQmFjazogZnVuY3Rpb24ocmVjb3JkKSB7
        CiAgICAgIHJlY29yZC50cmFuc2l0aW9uVG8oJ2xvYWRlZC5zYXZlZCcpOwog
        ICAgfSwKCiAgICBiZWNhbWVJbnZhbGlkOiBmdW5jdGlvbihyZWNvcmQpIHsK
        ICAgICAgcmVjb3JkLnRyYW5zaXRpb25UbygnaW52YWxpZCcpOwogICAgfSwK
        CiAgICByb2xsYmFjazogZnVuY3Rpb24ocmVjb3JkKSB7CiAgICAgIHJlY29y
        ZC5yb2xsYmFjaygpOwogICAgfQogIH0sCgogIC8vIE9uY2UgYSByZWNvcmQg
        aGFzIGJlZW4gaGFuZGVkIG9mZiB0byB0aGUgYWRhcHRlciB0byBiZQogIC8v
        IHNhdmVkLCBpdCBpcyBpbiB0aGUgJ2luIGZsaWdodCcgc3RhdGUuIENoYW5n
        ZXMgdG8gdGhlCiAgLy8gcmVjb3JkIGNhbm5vdCBiZSBtYWRlIGR1cmluZyB0
        aGlzIHdpbmRvdy4KICBpbkZsaWdodDogewogICAgLy8gRkxBR1MKICAgIGlz
        U2F2aW5nOiB0cnVlLAoKICAgIC8vIEVWRU5UUwogICAgZGlkU2V0UHJvcGVy
        dHk6IGRpZFNldFByb3BlcnR5LAogICAgYmVjb21lRGlydHk6IEVtYmVyLkss
        CiAgICBwdXNoZWREYXRhOiBFbWJlci5LLAoKICAgIC8vIFRPRE86IE1vcmUg
        cm9idXN0IHNlbWFudGljcyBhcm91bmQgc2F2ZS13aGlsZS1pbi1mbGlnaHQK
        ICAgIHdpbGxDb21taXQ6IEVtYmVyLkssCgogICAgZGlkQ29tbWl0OiBmdW5j
        dGlvbihyZWNvcmQpIHsKICAgICAgdmFyIGRpcnR5VHlwZSA9IGdldCh0aGlz
        LCAnZGlydHlUeXBlJyk7CgogICAgICByZWNvcmQudHJhbnNpdGlvblRvKCdz
        YXZlZCcpOwogICAgICByZWNvcmQuc2VuZCgnaW52b2tlTGlmZWN5Y2xlQ2Fs
        bGJhY2tzJywgZGlydHlUeXBlKTsKICAgIH0sCgogICAgYmVjYW1lSW52YWxp
        ZDogZnVuY3Rpb24ocmVjb3JkKSB7CiAgICAgIHJlY29yZC50cmFuc2l0aW9u
        VG8oJ2ludmFsaWQnKTsKICAgICAgcmVjb3JkLnNlbmQoJ2ludm9rZUxpZmVj
        eWNsZUNhbGxiYWNrcycpOwogICAgfSwKCiAgICBiZWNhbWVFcnJvcjogZnVu
        Y3Rpb24ocmVjb3JkKSB7CiAgICAgIHJlY29yZC50cmFuc2l0aW9uVG8oJ3Vu
        Y29tbWl0dGVkJyk7CiAgICAgIHJlY29yZC50cmlnZ2VyTGF0ZXIoJ2JlY2Ft
        ZUVycm9yJywgcmVjb3JkKTsKICAgIH0KICB9LAoKICAvLyBBIHJlY29yZCBp
        cyBpbiB0aGUgYGludmFsaWRgIHN0YXRlIHdoZW4gaXRzIGNsaWVudC1zaWRl
        CiAgLy8gaW52YWxpZGF0aW9ucyBoYXZlIGZhaWxlZCwgb3IgaWYgdGhlIGFk
        YXB0ZXIgaGFzIGluZGljYXRlZAogIC8vIHRoZSB0aGUgcmVjb3JkIGZhaWxl
        ZCBzZXJ2ZXItc2lkZSBpbnZhbGlkYXRpb25zLgogIGludmFsaWQ6IHsKICAg
        IC8vIEZMQUdTCiAgICBpc1ZhbGlkOiBmYWxzZSwKCiAgICAvLyBFVkVOVFMK
        ICAgIGRlbGV0ZVJlY29yZDogZnVuY3Rpb24ocmVjb3JkKSB7CiAgICAgIHJl
        Y29yZC50cmFuc2l0aW9uVG8oJ2RlbGV0ZWQudW5jb21taXR0ZWQnKTsKICAg
        ICAgcmVjb3JkLmNsZWFyUmVsYXRpb25zaGlwcygpOwogICAgfSwKCiAgICBk
        aWRTZXRQcm9wZXJ0eTogZnVuY3Rpb24ocmVjb3JkLCBjb250ZXh0KSB7CiAg
        ICAgIGdldChyZWNvcmQsICdlcnJvcnMnKS5yZW1vdmUoY29udGV4dC5uYW1l
        KTsKCiAgICAgIGRpZFNldFByb3BlcnR5KHJlY29yZCwgY29udGV4dCk7CiAg
        ICB9LAoKICAgIGJlY29tZURpcnR5OiBFbWJlci5LLAoKICAgIHJvbGxlZEJh
        Y2s6IGZ1bmN0aW9uKHJlY29yZCkgewogICAgICBnZXQocmVjb3JkLCAnZXJy
        b3JzJykuY2xlYXIoKTsKICAgIH0sCgogICAgYmVjYW1lVmFsaWQ6IGZ1bmN0
        aW9uKHJlY29yZCkgewogICAgICByZWNvcmQudHJhbnNpdGlvblRvKCd1bmNv
        bW1pdHRlZCcpOwogICAgfSwKCiAgICBpbnZva2VMaWZlY3ljbGVDYWxsYmFj
        a3M6IGZ1bmN0aW9uKHJlY29yZCkgewogICAgICByZWNvcmQudHJpZ2dlckxh
        dGVyKCdiZWNhbWVJbnZhbGlkJywgcmVjb3JkKTsKICAgIH0KICB9Cn07Cgov
        LyBUaGUgY3JlYXRlZCBhbmQgdXBkYXRlZCBzdGF0ZXMgYXJlIGNyZWF0ZWQg
        b3V0c2lkZSB0aGUgc3RhdGUKLy8gY2hhcnQgc28gd2UgY2FuIHJlb3BlbiB0
        aGVpciBzdWJzdGF0ZXMgYW5kIGFkZCBtaXhpbnMgYXMKLy8gbmVjZXNzYXJ5
        LgoKZnVuY3Rpb24gZGVlcENsb25lKG9iamVjdCkgewogIHZhciBjbG9uZSA9
        IHt9LCB2YWx1ZTsKCiAgZm9yICh2YXIgcHJvcCBpbiBvYmplY3QpIHsKICAg
        IHZhbHVlID0gb2JqZWN0W3Byb3BdOwogICAgaWYgKHZhbHVlICYmIHR5cGVv
        ZiB2YWx1ZSA9PT0gJ29iamVjdCcpIHsKICAgICAgY2xvbmVbcHJvcF0gPSBk
        ZWVwQ2xvbmUodmFsdWUpOwogICAgfSBlbHNlIHsKICAgICAgY2xvbmVbcHJv
        cF0gPSB2YWx1ZTsKICAgIH0KICB9CgogIHJldHVybiBjbG9uZTsKfQoKZnVu
        Y3Rpb24gbWl4aW4ob3JpZ2luYWwsIGhhc2gpIHsKICBmb3IgKHZhciBwcm9w
        IGluIGhhc2gpIHsKICAgIG9yaWdpbmFsW3Byb3BdID0gaGFzaFtwcm9wXTsK
        ICB9CgogIHJldHVybiBvcmlnaW5hbDsKfQoKZnVuY3Rpb24gZGlydHlTdGF0
        ZShvcHRpb25zKSB7CiAgdmFyIG5ld1N0YXRlID0gZGVlcENsb25lKERpcnR5
        U3RhdGUpOwogIHJldHVybiBtaXhpbihuZXdTdGF0ZSwgb3B0aW9ucyk7Cn0K
        CnZhciBjcmVhdGVkU3RhdGUgPSBkaXJ0eVN0YXRlKHsKICBkaXJ0eVR5cGU6
        ICdjcmVhdGVkJywKCiAgLy8gRkxBR1MKICBpc05ldzogdHJ1ZQp9KTsKCmNy
        ZWF0ZWRTdGF0ZS51bmNvbW1pdHRlZC5yb2xsZWRCYWNrID0gZnVuY3Rpb24o
        cmVjb3JkKSB7CiAgcmVjb3JkLnRyYW5zaXRpb25UbygnZGVsZXRlZC5zYXZl
        ZCcpOwp9OwoKdmFyIHVwZGF0ZWRTdGF0ZSA9IGRpcnR5U3RhdGUoewogIGRp
        cnR5VHlwZTogJ3VwZGF0ZWQnCn0pOwoKY3JlYXRlZFN0YXRlLnVuY29tbWl0
        dGVkLmRlbGV0ZVJlY29yZCA9IGZ1bmN0aW9uKHJlY29yZCkgewogIHJlY29y
        ZC5jbGVhclJlbGF0aW9uc2hpcHMoKTsKICByZWNvcmQudHJhbnNpdGlvblRv
        KCdkZWxldGVkLnNhdmVkJyk7Cn07CgpjcmVhdGVkU3RhdGUudW5jb21taXR0
        ZWQucm9sbGJhY2sgPSBmdW5jdGlvbihyZWNvcmQpIHsKICBEaXJ0eVN0YXRl
        LnVuY29tbWl0dGVkLnJvbGxiYWNrLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7
        CiAgcmVjb3JkLnRyYW5zaXRpb25UbygnZGVsZXRlZC5zYXZlZCcpOwp9OwoK
        Y3JlYXRlZFN0YXRlLnVuY29tbWl0dGVkLnByb3BlcnR5V2FzUmVzZXQgPSBF
        bWJlci5LOwoKdXBkYXRlZFN0YXRlLnVuY29tbWl0dGVkLmRlbGV0ZVJlY29y
        ZCA9IGZ1bmN0aW9uKHJlY29yZCkgewogIHJlY29yZC50cmFuc2l0aW9uVG8o
        J2RlbGV0ZWQudW5jb21taXR0ZWQnKTsKICByZWNvcmQuY2xlYXJSZWxhdGlv
        bnNoaXBzKCk7Cn07Cgp2YXIgUm9vdFN0YXRlID0gewogIC8vIEZMQUdTCiAg
        aXNFbXB0eTogZmFsc2UsCiAgaXNMb2FkaW5nOiBmYWxzZSwKICBpc0xvYWRl
        ZDogZmFsc2UsCiAgaXNEaXJ0eTogZmFsc2UsCiAgaXNTYXZpbmc6IGZhbHNl
        LAogIGlzRGVsZXRlZDogZmFsc2UsCiAgaXNOZXc6IGZhbHNlLAogIGlzVmFs
        aWQ6IHRydWUsCgogIC8vIERFRkFVTFQgRVZFTlRTCgogIC8vIFRyeWluZyB0
        byByb2xsIGJhY2sgaWYgeW91J3JlIG5vdCBpbiB0aGUgZGlydHkgc3RhdGUK
        ICAvLyBkb2Vzbid0IGNoYW5nZSB5b3VyIHN0YXRlLiBGb3IgZXhhbXBsZSwg
        aWYgeW91J3JlIGluIHRoZQogIC8vIGluLWZsaWdodCBzdGF0ZSwgcm9sbGlu
        ZyBiYWNrIHRoZSByZWNvcmQgZG9lc24ndCBtb3ZlCiAgLy8geW91IG91dCBv
        ZiB0aGUgaW4tZmxpZ2h0IHN0YXRlLgogIHJvbGxlZEJhY2s6IEVtYmVyLkss
        CgogIHByb3BlcnR5V2FzUmVzZXQ6IEVtYmVyLkssCgogIC8vIFNVQlNUQVRF
        UwoKICAvLyBBIHJlY29yZCBiZWdpbnMgaXRzIGxpZmVjeWNsZSBpbiB0aGUg
        YGVtcHR5YCBzdGF0ZS4KICAvLyBJZiBpdHMgZGF0YSB3aWxsIGNvbWUgZnJv
        bSB0aGUgYWRhcHRlciwgaXQgd2lsbAogIC8vIHRyYW5zaXRpb24gaW50byB0
        aGUgYGxvYWRpbmdgIHN0YXRlLiBPdGhlcndpc2UsIGlmCiAgLy8gdGhlIHJl
        Y29yZCBpcyBiZWluZyBjcmVhdGVkIG9uIHRoZSBjbGllbnQsIGl0IHdpbGwK
        ICAvLyB0cmFuc2l0aW9uIGludG8gdGhlIGBjcmVhdGVkYCBzdGF0ZS4KICBl
        bXB0eTogewogICAgaXNFbXB0eTogdHJ1ZSwKCiAgICAvLyBFVkVOVFMKICAg
        IGxvYWRpbmdEYXRhOiBmdW5jdGlvbihyZWNvcmQsIHByb21pc2UpIHsKICAg
        ICAgcmVjb3JkLl9sb2FkaW5nUHJvbWlzZSA9IHByb21pc2U7CiAgICAgIHJl
        Y29yZC50cmFuc2l0aW9uVG8oJ2xvYWRpbmcnKTsKICAgIH0sCgogICAgbG9h
        ZGVkRGF0YTogZnVuY3Rpb24ocmVjb3JkKSB7CiAgICAgIHJlY29yZC50cmFu
        c2l0aW9uVG8oJ2xvYWRlZC5jcmVhdGVkLnVuY29tbWl0dGVkJyk7CgogICAg
        ICByZWNvcmQuc3VzcGVuZFJlbGF0aW9uc2hpcE9ic2VydmVycyhmdW5jdGlv
        bigpIHsKICAgICAgICByZWNvcmQubm90aWZ5UHJvcGVydHlDaGFuZ2UoJ2Rh
        dGEnKTsKICAgICAgfSk7CiAgICB9LAoKICAgIHB1c2hlZERhdGE6IGZ1bmN0
        aW9uKHJlY29yZCkgewogICAgICByZWNvcmQudHJhbnNpdGlvblRvKCdsb2Fk
        ZWQuc2F2ZWQnKTsKICAgICAgcmVjb3JkLnRyaWdnZXJMYXRlcignZGlkTG9h
        ZCcpOwogICAgfQogIH0sCgogIC8vIEEgcmVjb3JkIGVudGVycyB0aGlzIHN0
        YXRlIHdoZW4gdGhlIHN0b3JlIGFza3MKICAvLyB0aGUgYWRhcHRlciBmb3Ig
        aXRzIGRhdGEuIEl0IHJlbWFpbnMgaW4gdGhpcyBzdGF0ZQogIC8vIHVudGls
        IHRoZSBhZGFwdGVyIHByb3ZpZGVzIHRoZSByZXF1ZXN0ZWQgZGF0YS4KICAv
        LwogIC8vIFVzdWFsbHksIHRoaXMgcHJvY2VzcyBpcyBhc3luY2hyb25vdXMs
        IHVzaW5nIGFuCiAgLy8gWEhSIHRvIHJldHJpZXZlIHRoZSBkYXRhLgogIGxv
        YWRpbmc6IHsKICAgIC8vIEZMQUdTCiAgICBpc0xvYWRpbmc6IHRydWUsCgog
        ICAgZXhpdDogZnVuY3Rpb24ocmVjb3JkKSB7CiAgICAgIHJlY29yZC5fbG9h
        ZGluZ1Byb21pc2UgPSBudWxsOwogICAgfSwKCiAgICAvLyBFVkVOVFMKICAg
        IHB1c2hlZERhdGE6IGZ1bmN0aW9uKHJlY29yZCkgewogICAgICByZWNvcmQu
        dHJhbnNpdGlvblRvKCdsb2FkZWQuc2F2ZWQnKTsKICAgICAgcmVjb3JkLnRy
        aWdnZXJMYXRlcignZGlkTG9hZCcpOwogICAgICBzZXQocmVjb3JkLCAnaXNF
        cnJvcicsIGZhbHNlKTsKICAgIH0sCgogICAgYmVjYW1lRXJyb3I6IGZ1bmN0
        aW9uKHJlY29yZCkgewogICAgICByZWNvcmQudHJpZ2dlckxhdGVyKCdiZWNh
        bWVFcnJvcicsIHJlY29yZCk7CiAgICB9LAoKICAgIG5vdEZvdW5kOiBmdW5j
        dGlvbihyZWNvcmQpIHsKICAgICAgcmVjb3JkLnRyYW5zaXRpb25UbygnZW1w
        dHknKTsKICAgIH0KICB9LAoKICAvLyBBIHJlY29yZCBlbnRlcnMgdGhpcyBz
        dGF0ZSB3aGVuIGl0cyBkYXRhIGlzIHBvcHVsYXRlZC4KICAvLyBNb3N0IG9m
        IGEgcmVjb3JkJ3MgbGlmZWN5Y2xlIGlzIHNwZW50IGluc2lkZSBzdWJzdGF0
        ZXMKICAvLyBvZiB0aGUgYGxvYWRlZGAgc3RhdGUuCiAgbG9hZGVkOiB7CiAg
        ICBpbml0aWFsU3RhdGU6ICdzYXZlZCcsCgogICAgLy8gRkxBR1MKICAgIGlz
        TG9hZGVkOiB0cnVlLAoKICAgIC8vIFNVQlNUQVRFUwoKICAgIC8vIElmIHRo
        ZXJlIGFyZSBubyBsb2NhbCBjaGFuZ2VzIHRvIGEgcmVjb3JkLCBpdCByZW1h
        aW5zCiAgICAvLyBpbiB0aGUgYHNhdmVkYCBzdGF0ZS4KICAgIHNhdmVkOiB7
        CiAgICAgIHNldHVwOiBmdW5jdGlvbihyZWNvcmQpIHsKICAgICAgICB2YXIg
        YXR0cnMgPSByZWNvcmQuX2F0dHJpYnV0ZXMsCiAgICAgICAgICAgIGlzRGly
        dHkgPSBmYWxzZTsKCiAgICAgICAgZm9yICh2YXIgcHJvcCBpbiBhdHRycykg
        ewogICAgICAgICAgaWYgKGF0dHJzLmhhc093blByb3BlcnR5KHByb3ApKSB7
        CiAgICAgICAgICAgIGlzRGlydHkgPSB0cnVlOwogICAgICAgICAgICBicmVh
        azsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGlmIChpc0RpcnR5
        KSB7CiAgICAgICAgICByZWNvcmQuYWRhcHRlckRpZERpcnR5KCk7CiAgICAg
        ICAgfQogICAgICB9LAoKICAgICAgLy8gRVZFTlRTCiAgICAgIGRpZFNldFBy
        b3BlcnR5OiBkaWRTZXRQcm9wZXJ0eSwKCiAgICAgIHB1c2hlZERhdGE6IEVt
        YmVyLkssCgogICAgICBiZWNvbWVEaXJ0eTogZnVuY3Rpb24ocmVjb3JkKSB7
        CiAgICAgICAgcmVjb3JkLnRyYW5zaXRpb25UbygndXBkYXRlZC51bmNvbW1p
        dHRlZCcpOwogICAgICB9LAoKICAgICAgd2lsbENvbW1pdDogZnVuY3Rpb24o
        cmVjb3JkKSB7CiAgICAgICAgcmVjb3JkLnRyYW5zaXRpb25UbygndXBkYXRl
        ZC5pbkZsaWdodCcpOwogICAgICB9LAoKICAgICAgcmVsb2FkUmVjb3JkOiBm
        dW5jdGlvbihyZWNvcmQsIHJlc29sdmUpIHsKICAgICAgICByZXNvbHZlKGdl
        dChyZWNvcmQsICdzdG9yZScpLnJlbG9hZFJlY29yZChyZWNvcmQpKTsKICAg
        ICAgfSwKCiAgICAgIGRlbGV0ZVJlY29yZDogZnVuY3Rpb24ocmVjb3JkKSB7
        CiAgICAgICAgcmVjb3JkLnRyYW5zaXRpb25UbygnZGVsZXRlZC51bmNvbW1p
        dHRlZCcpOwogICAgICAgIHJlY29yZC5jbGVhclJlbGF0aW9uc2hpcHMoKTsK
        ICAgICAgfSwKCiAgICAgIHVubG9hZFJlY29yZDogZnVuY3Rpb24ocmVjb3Jk
        KSB7CiAgICAgICAgLy8gY2xlYXIgcmVsYXRpb25zaGlwcyBiZWZvcmUgbW92
        aW5nIHRvIGRlbGV0ZWQgc3RhdGUKICAgICAgICAvLyBvdGhlcndpc2UgaXQg
        ZmFpbHMKICAgICAgICByZWNvcmQuY2xlYXJSZWxhdGlvbnNoaXBzKCk7CiAg
        ICAgICAgcmVjb3JkLnRyYW5zaXRpb25UbygnZGVsZXRlZC5zYXZlZCcpOwog
        ICAgICB9LAoKICAgICAgZGlkQ29tbWl0OiBmdW5jdGlvbihyZWNvcmQpIHsK
        ICAgICAgICByZWNvcmQuc2VuZCgnaW52b2tlTGlmZWN5Y2xlQ2FsbGJhY2tz
        JywgZ2V0KHJlY29yZCwgJ2xhc3REaXJ0eVR5cGUnKSk7CiAgICAgIH0sCgog
        ICAgICAvLyBsb2FkZWQuc2F2ZWQubm90Rm91bmQgd291bGQgYmUgdHJpZ2dl
        cmVkIGJ5IGEgZmFpbGVkCiAgICAgIC8vIGByZWxvYWQoKWAgb24gYW4gdW5j
        aGFuZ2VkIHJlY29yZAogICAgICBub3RGb3VuZDogRW1iZXIuSwoKICAgIH0s
        CgogICAgLy8gQSByZWNvcmQgaXMgaW4gdGhpcyBzdGF0ZSBhZnRlciBpdCBo
        YXMgYmVlbiBsb2NhbGx5CiAgICAvLyBjcmVhdGVkIGJ1dCBiZWZvcmUgdGhl
        IGFkYXB0ZXIgaGFzIGluZGljYXRlZCB0aGF0CiAgICAvLyBpdCBoYXMgYmVl
        biBzYXZlZC4KICAgIGNyZWF0ZWQ6IGNyZWF0ZWRTdGF0ZSwKCiAgICAvLyBB
        IHJlY29yZCBpcyBpbiB0aGlzIHN0YXRlIGlmIGl0IGhhcyBhbHJlYWR5IGJl
        ZW4KICAgIC8vIHNhdmVkIHRvIHRoZSBzZXJ2ZXIsIGJ1dCB0aGVyZSBhcmUg
        bmV3IGxvY2FsIGNoYW5nZXMKICAgIC8vIHRoYXQgaGF2ZSBub3QgeWV0IGJl
        ZW4gc2F2ZWQuCiAgICB1cGRhdGVkOiB1cGRhdGVkU3RhdGUKICB9LAoKICAv
        LyBBIHJlY29yZCBpcyBpbiB0aGlzIHN0YXRlIGlmIGl0IHdhcyBkZWxldGVk
        IGZyb20gdGhlIHN0b3JlLgogIGRlbGV0ZWQ6IHsKICAgIGluaXRpYWxTdGF0
        ZTogJ3VuY29tbWl0dGVkJywKICAgIGRpcnR5VHlwZTogJ2RlbGV0ZWQnLAoK
        ICAgIC8vIEZMQUdTCiAgICBpc0RlbGV0ZWQ6IHRydWUsCiAgICBpc0xvYWRl
        ZDogdHJ1ZSwKICAgIGlzRGlydHk6IHRydWUsCgogICAgLy8gVFJBTlNJVElP
        TlMKICAgIHNldHVwOiBmdW5jdGlvbihyZWNvcmQpIHsKICAgICAgcmVjb3Jk
        LnVwZGF0ZVJlY29yZEFycmF5cygpOwogICAgfSwKCiAgICAvLyBTVUJTVEFU
        RVMKCiAgICAvLyBXaGVuIGEgcmVjb3JkIGlzIGRlbGV0ZWQsIGl0IGVudGVy
        cyB0aGUgYHN0YXJ0YAogICAgLy8gc3RhdGUuIEl0IHdpbGwgZXhpdCB0aGlz
        IHN0YXRlIHdoZW4gdGhlIHJlY29yZAogICAgLy8gc3RhcnRzIHRvIGNvbW1p
        dC4KICAgIHVuY29tbWl0dGVkOiB7CgogICAgICAvLyBFVkVOVFMKCiAgICAg
        IHdpbGxDb21taXQ6IGZ1bmN0aW9uKHJlY29yZCkgewogICAgICAgIHJlY29y
        ZC50cmFuc2l0aW9uVG8oJ2luRmxpZ2h0Jyk7CiAgICAgIH0sCgogICAgICBy
        b2xsYmFjazogZnVuY3Rpb24ocmVjb3JkKSB7CiAgICAgICAgcmVjb3JkLnJv
        bGxiYWNrKCk7CiAgICAgIH0sCgogICAgICBiZWNvbWVEaXJ0eTogRW1iZXIu
        SywKICAgICAgZGVsZXRlUmVjb3JkOiBFbWJlci5LLAoKICAgICAgcm9sbGVk
        QmFjazogZnVuY3Rpb24ocmVjb3JkKSB7CiAgICAgICAgcmVjb3JkLnRyYW5z
        aXRpb25UbygnbG9hZGVkLnNhdmVkJyk7CiAgICAgIH0KICAgIH0sCgogICAg
        Ly8gQWZ0ZXIgYSByZWNvcmQgc3RhcnRzIGNvbW1pdHRpbmcsIGJ1dAogICAg
        Ly8gYmVmb3JlIHRoZSBhZGFwdGVyIGluZGljYXRlcyB0aGF0IHRoZSBkZWxl
        dGlvbgogICAgLy8gaGFzIHNhdmVkIHRvIHRoZSBzZXJ2ZXIsIGEgcmVjb3Jk
        IGlzIGluIHRoZQogICAgLy8gYGluRmxpZ2h0YCBzdWJzdGF0ZSBvZiBgZGVs
        ZXRlZGAuCiAgICBpbkZsaWdodDogewogICAgICAvLyBGTEFHUwogICAgICBp
        c1NhdmluZzogdHJ1ZSwKCiAgICAgIC8vIEVWRU5UUwoKICAgICAgLy8gVE9E
        TzogTW9yZSByb2J1c3Qgc2VtYW50aWNzIGFyb3VuZCBzYXZlLXdoaWxlLWlu
        LWZsaWdodAogICAgICB3aWxsQ29tbWl0OiBFbWJlci5LLAogICAgICBkaWRD
        b21taXQ6IGZ1bmN0aW9uKHJlY29yZCkgewogICAgICAgIHJlY29yZC50cmFu
        c2l0aW9uVG8oJ3NhdmVkJyk7CgogICAgICAgIHJlY29yZC5zZW5kKCdpbnZv
        a2VMaWZlY3ljbGVDYWxsYmFja3MnKTsKICAgICAgfSwKCiAgICAgIGJlY2Ft
        ZUVycm9yOiBmdW5jdGlvbihyZWNvcmQpIHsKICAgICAgICByZWNvcmQudHJh
        bnNpdGlvblRvKCd1bmNvbW1pdHRlZCcpOwogICAgICAgIHJlY29yZC50cmln
        Z2VyTGF0ZXIoJ2JlY2FtZUVycm9yJywgcmVjb3JkKTsKICAgICAgfQogICAg
        fSwKCiAgICAvLyBPbmNlIHRoZSBhZGFwdGVyIGluZGljYXRlcyB0aGF0IHRo
        ZSBkZWxldGlvbiBoYXMKICAgIC8vIGJlZW4gc2F2ZWQsIHRoZSByZWNvcmQg
        ZW50ZXJzIHRoZSBgc2F2ZWRgIHN1YnN0YXRlCiAgICAvLyBvZiBgZGVsZXRl
        ZGAuCiAgICBzYXZlZDogewogICAgICAvLyBGTEFHUwogICAgICBpc0RpcnR5
        OiBmYWxzZSwKCiAgICAgIHNldHVwOiBmdW5jdGlvbihyZWNvcmQpIHsKICAg
        ICAgICB2YXIgc3RvcmUgPSBnZXQocmVjb3JkLCAnc3RvcmUnKTsKICAgICAg
        ICBzdG9yZS5kZW1hdGVyaWFsaXplUmVjb3JkKHJlY29yZCk7CiAgICAgIH0s
        CgogICAgICBpbnZva2VMaWZlY3ljbGVDYWxsYmFja3M6IGZ1bmN0aW9uKHJl
        Y29yZCkgewogICAgICAgIHJlY29yZC50cmlnZ2VyTGF0ZXIoJ2RpZERlbGV0
        ZScsIHJlY29yZCk7CiAgICAgICAgcmVjb3JkLnRyaWdnZXJMYXRlcignZGlk
        Q29tbWl0JywgcmVjb3JkKTsKICAgICAgfQogICAgfQogIH0sCgogIGludm9r
        ZUxpZmVjeWNsZUNhbGxiYWNrczogZnVuY3Rpb24ocmVjb3JkLCBkaXJ0eVR5
        cGUpIHsKICAgIGlmIChkaXJ0eVR5cGUgPT09ICdjcmVhdGVkJykgewogICAg
        ICByZWNvcmQudHJpZ2dlckxhdGVyKCdkaWRDcmVhdGUnLCByZWNvcmQpOwog
        ICAgfSBlbHNlIHsKICAgICAgcmVjb3JkLnRyaWdnZXJMYXRlcignZGlkVXBk
        YXRlJywgcmVjb3JkKTsKICAgIH0KCiAgICByZWNvcmQudHJpZ2dlckxhdGVy
        KCdkaWRDb21taXQnLCByZWNvcmQpOwogIH0KfTsKCmZ1bmN0aW9uIHdpcmVT
        dGF0ZShvYmplY3QsIHBhcmVudCwgbmFtZSkgewogIC8qanNoaW50IHByb3Rv
        OnRydWUqLwogIC8vIFRPRE86IFVzZSBPYmplY3QuY3JlYXRlIGFuZCBjb3B5
        IGluc3RlYWQKICBvYmplY3QgPSBtaXhpbihwYXJlbnQgPyBFbWJlci5jcmVh
        dGUocGFyZW50KSA6IHt9LCBvYmplY3QpOwogIG9iamVjdC5wYXJlbnRTdGF0
        ZSA9IHBhcmVudDsKICBvYmplY3Quc3RhdGVOYW1lID0gbmFtZTsKCiAgZm9y
        ICh2YXIgcHJvcCBpbiBvYmplY3QpIHsKICAgIGlmICghb2JqZWN0Lmhhc093
        blByb3BlcnR5KHByb3ApIHx8IHByb3AgPT09ICdwYXJlbnRTdGF0ZScgfHwg
        cHJvcCA9PT0gJ3N0YXRlTmFtZScpIHsgY29udGludWU7IH0KICAgIGlmICh0
        eXBlb2Ygb2JqZWN0W3Byb3BdID09PSAnb2JqZWN0JykgewogICAgICBvYmpl
        Y3RbcHJvcF0gPSB3aXJlU3RhdGUob2JqZWN0W3Byb3BdLCBvYmplY3QsIG5h
        bWUgKyAiLiIgKyBwcm9wKTsKICAgIH0KICB9CgogIHJldHVybiBvYmplY3Q7
        Cn0KClJvb3RTdGF0ZSA9IHdpcmVTdGF0ZShSb290U3RhdGUsIG51bGwsICJy
        b290Iik7CgpEUy5Sb290U3RhdGUgPSBSb290U3RhdGU7Cgp9KSgpOwoKCgoo
        ZnVuY3Rpb24oKSB7CnZhciBnZXQgPSBFbWJlci5nZXQsIGlzRW1wdHkgPSBF
        bWJlci5pc0VtcHR5OwoKLyoqCkBtb2R1bGUgZW1iZXItZGF0YQoqLwoKLyoq
        CiAgSG9sZHMgdmFsaWRhdGlvbiBlcnJvcnMgZm9yIGEgZ2l2ZW4gcmVjb3Jk
        IG9yZ2FuaXplZCBieSBhdHRyaWJ1dGUgbmFtZXMuCgogIEBjbGFzcyBFcnJv
        cnMKICBAbmFtZXNwYWNlIERTCiAgQGV4dGVuZHMgRW1iZXIuT2JqZWN0CiAg
        QHVzZXMgRW1iZXIuRW51bWVyYWJsZQogIEB1c2VzIEVtYmVyLkV2ZW50ZWQK
        ICovCkRTLkVycm9ycyA9IEVtYmVyLk9iamVjdC5leHRlbmQoRW1iZXIuRW51
        bWVyYWJsZSwgRW1iZXIuRXZlbnRlZCwgewogIC8qKgogICAgUmVnaXN0ZXIg
        d2l0aCB0YXJnZXQgaGFuZGxlcgoKICAgIEBtZXRob2QgcmVnaXN0ZXJIYW5k
        bGVycwogICAgQHBhcmFtIHtPYmplY3R9IHRhcmdldAogICAgQHBhcmFtIHtG
        dW5jdGlvbn0gYmVjYW1lSW52YWxpZAogICAgQHBhcmFtIHtGdW5jdGlvbn0g
        YmVjYW1lVmFsaWQKICAqLwogIHJlZ2lzdGVySGFuZGxlcnM6IGZ1bmN0aW9u
        KHRhcmdldCwgYmVjYW1lSW52YWxpZCwgYmVjYW1lVmFsaWQpIHsKICAgIHRo
        aXMub24oJ2JlY2FtZUludmFsaWQnLCB0YXJnZXQsIGJlY2FtZUludmFsaWQp
        OwogICAgdGhpcy5vbignYmVjYW1lVmFsaWQnLCB0YXJnZXQsIGJlY2FtZVZh
        bGlkKTsKICB9LAoKICAvKioKICAgIEBwcm9wZXJ0eSBlcnJvcnNCeUF0dHJp
        YnV0ZU5hbWUKICAgIEB0eXBlIHtFbWJlci5NYXBXaXRoRGVmYXVsdH0KICAg
        IEBwcml2YXRlCiAgKi8KICBlcnJvcnNCeUF0dHJpYnV0ZU5hbWU6IEVtYmVy
        LnJlZHVjZUNvbXB1dGVkKCJjb250ZW50IiwgewogICAgaW5pdGlhbFZhbHVl
        OiBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIEVtYmVyLk1hcFdpdGhEZWZh
        dWx0LmNyZWF0ZSh7CiAgICAgICAgZGVmYXVsdFZhbHVlOiBmdW5jdGlvbigp
        IHsKICAgICAgICAgIHJldHVybiBFbWJlci5BKCk7CiAgICAgICAgfQogICAg
        ICB9KTsKICAgIH0sCgogICAgYWRkZWRJdGVtOiBmdW5jdGlvbihlcnJvcnMs
        IGVycm9yKSB7CiAgICAgIGVycm9ycy5nZXQoZXJyb3IuYXR0cmlidXRlKS5w
        dXNoT2JqZWN0KGVycm9yKTsKCiAgICAgIHJldHVybiBlcnJvcnM7CiAgICB9
        LAoKICAgIHJlbW92ZWRJdGVtOiBmdW5jdGlvbihlcnJvcnMsIGVycm9yKSB7
        CiAgICAgIGVycm9ycy5nZXQoZXJyb3IuYXR0cmlidXRlKS5yZW1vdmVPYmpl
        Y3QoZXJyb3IpOwoKICAgICAgcmV0dXJuIGVycm9yczsKICAgIH0KICB9KSwK
        CiAgLyoqCiAgICBSZXR1cm5zIGVycm9ycyBmb3IgYSBnaXZlbiBhdHRyaWJ1
        dGUKCiAgICBAbWV0aG9kIGVycm9yc0ZvcgogICAgQHBhcmFtIHtTdHJpbmd9
        IGF0dHJpYnV0ZQogICAgQHJldHVybnMge0FycmF5fQogICovCiAgZXJyb3Jz
        Rm9yOiBmdW5jdGlvbihhdHRyaWJ1dGUpIHsKICAgIHJldHVybiBnZXQodGhp
        cywgJ2Vycm9yc0J5QXR0cmlidXRlTmFtZScpLmdldChhdHRyaWJ1dGUpOwog
        IH0sCgogIC8qKgogICovCiAgbWVzc2FnZXM6IEVtYmVyLmNvbXB1dGVkLm1h
        cEJ5KCdjb250ZW50JywgJ21lc3NhZ2UnKSwKCiAgLyoqCiAgICBAcHJvcGVy
        dHkgY29udGVudAogICAgQHR5cGUge0FycmF5fQogICAgQHByaXZhdGUKICAq
        LwogIGNvbnRlbnQ6IEVtYmVyLmNvbXB1dGVkKGZ1bmN0aW9uKCkgewogICAg
        cmV0dXJuIEVtYmVyLkEoKTsKICB9KSwKCiAgLyoqCiAgICBAbWV0aG9kIHVu
        a25vd25Qcm9wZXJ0eQogICAgQHByaXZhdGUKICAqLwogIHVua25vd25Qcm9w
        ZXJ0eTogZnVuY3Rpb24oYXR0cmlidXRlKSB7CiAgICB2YXIgZXJyb3JzID0g
        dGhpcy5lcnJvcnNGb3IoYXR0cmlidXRlKTsKICAgIGlmIChpc0VtcHR5KGVy
        cm9ycykpIHsgcmV0dXJuIG51bGw7IH0KICAgIHJldHVybiBlcnJvcnM7CiAg
        fSwKCiAgLyoqCiAgICBAbWV0aG9kIG5leHRPYmplY3QKICAgIEBwcml2YXRl
        CiAgKi8KICBuZXh0T2JqZWN0OiBmdW5jdGlvbihpbmRleCwgcHJldmlvdXNP
        YmplY3QsIGNvbnRleHQpIHsKICAgIHJldHVybiBnZXQodGhpcywgJ2NvbnRl
        bnQnKS5vYmplY3RBdChpbmRleCk7CiAgfSwKCiAgLyoqCiAgICBUb3RhbCBu
        dW1iZXIgb2YgZXJyb3JzLgoKICAgIEBwcm9wZXJ0eSBsZW5ndGgKICAgIEB0
        eXBlIHtOdW1iZXJ9CiAgICBAcmVhZE9ubHkKICAqLwogIGxlbmd0aDogRW1i
        ZXIuY29tcHV0ZWQub25lV2F5KCdjb250ZW50Lmxlbmd0aCcpLnJlYWRPbmx5
        KCksCgogIC8qKgogICAgQHByb3BlcnR5IGlzRW1wdHkKICAgIEB0eXBlIHtC
        b29sZWFufQogICAgQHJlYWRPbmx5CiAgKi8KICBpc0VtcHR5OiBFbWJlci5j
        b21wdXRlZC5ub3QoJ2xlbmd0aCcpLnJlYWRPbmx5KCksCgogIC8qKgogICAg
        QWRkcyBlcnJvciBtZXNzYWdlcyB0byBhIGdpdmVuIGF0dHJpYnV0ZSBhbmQg
        c2VuZHMKICAgIGBiZWNhbWVJbnZhbGlkYCBldmVudCB0byB0aGUgcmVjb3Jk
        LgoKICAgIEBtZXRob2QgYWRkCiAgICBAcGFyYW0ge1N0cmluZ30gYXR0cmli
        dXRlCiAgICBAcGFyYW0ge0FycmF5fFN0cmluZ30gbWVzc2FnZXMKICAqLwog
        IGFkZDogZnVuY3Rpb24oYXR0cmlidXRlLCBtZXNzYWdlcykgewogICAgdmFy
        IHdhc0VtcHR5ID0gZ2V0KHRoaXMsICdpc0VtcHR5Jyk7CgogICAgbWVzc2Fn
        ZXMgPSB0aGlzLl9maW5kT3JDcmVhdGVNZXNzYWdlcyhhdHRyaWJ1dGUsIG1l
        c3NhZ2VzKTsKICAgIGdldCh0aGlzLCAnY29udGVudCcpLmFkZE9iamVjdHMo
        bWVzc2FnZXMpOwoKICAgIHRoaXMubm90aWZ5UHJvcGVydHlDaGFuZ2UoYXR0
        cmlidXRlKTsKICAgIHRoaXMuZW51bWVyYWJsZUNvbnRlbnREaWRDaGFuZ2Uo
        KTsKCiAgICBpZiAod2FzRW1wdHkgJiYgIWdldCh0aGlzLCAnaXNFbXB0eScp
        KSB7CiAgICAgIHRoaXMudHJpZ2dlcignYmVjYW1lSW52YWxpZCcpOwogICAg
        fQogIH0sCgogIC8qKgogICAgQG1ldGhvZCBfZmluZE9yQ3JlYXRlTWVzc2Fn
        ZXMKICAgIEBwcml2YXRlCiAgKi8KICBfZmluZE9yQ3JlYXRlTWVzc2FnZXM6
        IGZ1bmN0aW9uKGF0dHJpYnV0ZSwgbWVzc2FnZXMpIHsKICAgIHZhciBlcnJv
        cnMgPSB0aGlzLmVycm9yc0ZvcihhdHRyaWJ1dGUpOwoKICAgIHJldHVybiBF
        bWJlci5tYWtlQXJyYXkobWVzc2FnZXMpLm1hcChmdW5jdGlvbihtZXNzYWdl
        KSB7CiAgICAgIHJldHVybiBlcnJvcnMuZmluZEJ5KCdtZXNzYWdlJywgbWVz
        c2FnZSkgfHwgewogICAgICAgIGF0dHJpYnV0ZTogYXR0cmlidXRlLAogICAg
        ICAgIG1lc3NhZ2U6IG1lc3NhZ2UKICAgICAgfTsKICAgIH0pOwogIH0sCgog
        IC8qKgogICAgUmVtb3ZlcyBhbGwgZXJyb3IgbWVzc2FnZXMgZnJvbSB0aGUg
        Z2l2ZW4gYXR0cmlidXRlIGFuZCBzZW5kcwogICAgYGJlY2FtZVZhbGlkYCBl
        dmVudCB0byB0aGUgcmVjb3JkIGlmIHRoZXJlIG5vIG1vcmUgZXJyb3JzIGxl
        ZnQuCgogICAgQG1ldGhvZCByZW1vdmUKICAgIEBwYXJhbSB7U3RyaW5nfSBh
        dHRyaWJ1dGUKICAqLwogIHJlbW92ZTogZnVuY3Rpb24oYXR0cmlidXRlKSB7
        CiAgICBpZiAoZ2V0KHRoaXMsICdpc0VtcHR5JykpIHsgcmV0dXJuOyB9Cgog
        ICAgdmFyIGNvbnRlbnQgPSBnZXQodGhpcywgJ2NvbnRlbnQnKS5yZWplY3RC
        eSgnYXR0cmlidXRlJywgYXR0cmlidXRlKTsKICAgIGdldCh0aGlzLCAnY29u
        dGVudCcpLnNldE9iamVjdHMoY29udGVudCk7CgogICAgdGhpcy5ub3RpZnlQ
        cm9wZXJ0eUNoYW5nZShhdHRyaWJ1dGUpOwogICAgdGhpcy5lbnVtZXJhYmxl
        Q29udGVudERpZENoYW5nZSgpOwoKICAgIGlmIChnZXQodGhpcywgJ2lzRW1w
        dHknKSkgewogICAgICB0aGlzLnRyaWdnZXIoJ2JlY2FtZVZhbGlkJyk7CiAg
        ICB9CiAgfSwKCiAgLyoqCiAgICBSZW1vdmVzIGFsbCBlcnJvciBtZXNzYWdl
        cyBhbmQgc2VuZHMgYGJlY2FtZVZhbGlkYCBldmVudAogICAgdG8gdGhlIHJl
        Y29yZC4KCiAgICBAbWV0aG9kIGNsZWFyCiAgKi8KICBjbGVhcjogZnVuY3Rp
        b24oKSB7CiAgICBpZiAoZ2V0KHRoaXMsICdpc0VtcHR5JykpIHsgcmV0dXJu
        OyB9CgogICAgZ2V0KHRoaXMsICdjb250ZW50JykuY2xlYXIoKTsKICAgIHRo
        aXMuZW51bWVyYWJsZUNvbnRlbnREaWRDaGFuZ2UoKTsKCiAgICB0aGlzLnRy
        aWdnZXIoJ2JlY2FtZVZhbGlkJyk7CiAgfSwKCiAgLyoqCiAgICBDaGVja3Mg
        aWYgdGhlcmUgaXMgZXJyb3IgbWVzc2FnZXMgZm9yIHRoZSBnaXZlbiBhdHRy
        aWJ1dGUuCgogICAgQG1ldGhvZCBoYXMKICAgIEBwYXJhbSB7U3RyaW5nfSBh
        dHRyaWJ1dGUKICAgIEByZXR1cm5zIHtCb29sZWFufSB0cnVlIGlmIHRoZXJl
        IHNvbWUgZXJyb3JzIG9uIGdpdmVuIGF0dHJpYnV0ZQogICovCiAgaGFzOiBm
        dW5jdGlvbihhdHRyaWJ1dGUpIHsKICAgIHJldHVybiAhaXNFbXB0eSh0aGlz
        LmVycm9yc0ZvcihhdHRyaWJ1dGUpKTsKICB9Cn0pOwoKfSkoKTsKCgoKKGZ1
        bmN0aW9uKCkgewovKioKICBAbW9kdWxlIGVtYmVyLWRhdGEKKi8KCnZhciBn
        ZXQgPSBFbWJlci5nZXQsIHNldCA9IEVtYmVyLnNldCwKICAgIG1lcmdlID0g
        RW1iZXIubWVyZ2U7Cgp2YXIgcmV0cmlldmVGcm9tQ3VycmVudFN0YXRlID0g
        RW1iZXIuY29tcHV0ZWQoJ2N1cnJlbnRTdGF0ZScsIGZ1bmN0aW9uKGtleSwg
        dmFsdWUpIHsKICByZXR1cm4gZ2V0KGdldCh0aGlzLCAnY3VycmVudFN0YXRl
        JyksIGtleSk7Cn0pLnJlYWRPbmx5KCk7CgovKioKCiAgVGhlIG1vZGVsIGNs
        YXNzIHRoYXQgYWxsIEVtYmVyIERhdGEgcmVjb3JkcyBkZXNjZW5kIGZyb20u
        CgogIEBjbGFzcyBNb2RlbAogIEBuYW1lc3BhY2UgRFMKICBAZXh0ZW5kcyBF
        bWJlci5PYmplY3QKICBAdXNlcyBFbWJlci5FdmVudGVkCiovCkRTLk1vZGVs
        ID0gRW1iZXIuT2JqZWN0LmV4dGVuZChFbWJlci5FdmVudGVkLCB7CiAgLyoq
        CiAgICBJZiB0aGlzIHByb3BlcnR5IGlzIGB0cnVlYCB0aGUgcmVjb3JkIGlz
        IGluIHRoZSBgZW1wdHlgCiAgICBzdGF0ZS4gRW1wdHkgaXMgdGhlIGZpcnN0
        IHN0YXRlIGFsbCByZWNvcmRzIGVudGVyIGFmdGVyIHRoZXkgaGF2ZQogICAg
        YmVlbiBjcmVhdGVkLiBNb3N0IHJlY29yZHMgY3JlYXRlZCBieSB0aGUgc3Rv
        cmUgd2lsbCBxdWlja2x5CiAgICB0cmFuc2l0aW9uIHRvIHRoZSBgbG9hZGlu
        Z2Agc3RhdGUgaWYgZGF0YSBuZWVkcyB0byBiZSBmZXRjaGVkIGZyb20KICAg
        IHRoZSBzZXJ2ZXIgb3IgdGhlIGBjcmVhdGVkYCBzdGF0ZSBpZiB0aGUgcmVj
        b3JkIGlzIGNyZWF0ZWQgb24gdGhlCiAgICBjbGllbnQuIEEgcmVjb3JkIGNh
        biBhbHNvIGVudGVyIHRoZSBlbXB0eSBzdGF0ZSBpZiB0aGUgYWRhcHRlciBp
        cwogICAgdW5hYmxlIHRvIGxvY2F0ZSB0aGUgcmVjb3JkLgoKICAgIEBwcm9w
        ZXJ0eSBpc0VtcHR5CiAgICBAdHlwZSB7Qm9vbGVhbn0KICAgIEByZWFkT25s
        eQogICovCiAgaXNFbXB0eTogcmV0cmlldmVGcm9tQ3VycmVudFN0YXRlLAog
        IC8qKgogICAgSWYgdGhpcyBwcm9wZXJ0eSBpcyBgdHJ1ZWAgdGhlIHJlY29y
        ZCBpcyBpbiB0aGUgYGxvYWRpbmdgIHN0YXRlLiBBCiAgICByZWNvcmQgZW50
        ZXJzIHRoaXMgc3RhdGUgd2hlbiB0aGUgc3RvcmUgYXNrcyB0aGUgYWRhcHRl
        ciBmb3IgaXRzCiAgICBkYXRhLiBJdCByZW1haW5zIGluIHRoaXMgc3RhdGUg
        dW50aWwgdGhlIGFkYXB0ZXIgcHJvdmlkZXMgdGhlCiAgICByZXF1ZXN0ZWQg
        ZGF0YS4KCiAgICBAcHJvcGVydHkgaXNMb2FkaW5nCiAgICBAdHlwZSB7Qm9v
        bGVhbn0KICAgIEByZWFkT25seQogICovCiAgaXNMb2FkaW5nOiByZXRyaWV2
        ZUZyb21DdXJyZW50U3RhdGUsCiAgLyoqCiAgICBJZiB0aGlzIHByb3BlcnR5
        IGlzIGB0cnVlYCB0aGUgcmVjb3JkIGlzIGluIHRoZSBgbG9hZGVkYCBzdGF0
        ZS4gQQogICAgcmVjb3JkIGVudGVycyB0aGlzIHN0YXRlIHdoZW4gaXRzIGRh
        dGEgaXMgcG9wdWxhdGVkLiBNb3N0IG9mIGEKICAgIHJlY29yZCdzIGxpZmVj
        eWNsZSBpcyBzcGVudCBpbnNpZGUgc3Vic3RhdGVzIG9mIHRoZSBgbG9hZGVk
        YAogICAgc3RhdGUuCgogICAgRXhhbXBsZQoKICAgIGBgYGphdmFzY3JpcHQK
        ICAgIHZhciByZWNvcmQgPSBzdG9yZS5jcmVhdGVSZWNvcmQoQXBwLk1vZGVs
        KTsKICAgIHJlY29yZC5nZXQoJ2lzTG9hZGVkJyk7IC8vIHRydWUKCiAgICBz
        dG9yZS5maW5kKCdtb2RlbCcsIDEpLnRoZW4oZnVuY3Rpb24obW9kZWwpIHsK
        ICAgICAgbW9kZWwuZ2V0KCdpc0xvYWRlZCcpOyAvLyB0cnVlCiAgICB9KTsK
        ICAgIGBgYAoKICAgIEBwcm9wZXJ0eSBpc0xvYWRlZAogICAgQHR5cGUge0Jv
        b2xlYW59CiAgICBAcmVhZE9ubHkKICAqLwogIGlzTG9hZGVkOiByZXRyaWV2
        ZUZyb21DdXJyZW50U3RhdGUsCiAgLyoqCiAgICBJZiB0aGlzIHByb3BlcnR5
        IGlzIGB0cnVlYCB0aGUgcmVjb3JkIGlzIGluIHRoZSBgZGlydHlgIHN0YXRl
        LiBUaGUKICAgIHJlY29yZCBoYXMgbG9jYWwgY2hhbmdlcyB0aGF0IGhhdmUg
        bm90IHlldCBiZWVuIHNhdmVkIGJ5IHRoZQogICAgYWRhcHRlci4gVGhpcyBp
        bmNsdWRlcyByZWNvcmRzIHRoYXQgaGF2ZSBiZWVuIGNyZWF0ZWQgKGJ1dCBu
        b3QgeWV0CiAgICBzYXZlZCkgb3IgZGVsZXRlZC4KCiAgICBFeGFtcGxlCgog
        ICAgYGBgamF2YXNjcmlwdAogICAgdmFyIHJlY29yZCA9IHN0b3JlLmNyZWF0
        ZVJlY29yZChBcHAuTW9kZWwpOwogICAgcmVjb3JkLmdldCgnaXNEaXJ0eScp
        OyAvLyB0cnVlCgogICAgc3RvcmUuZmluZCgnbW9kZWwnLCAxKS50aGVuKGZ1
        bmN0aW9uKG1vZGVsKSB7CiAgICAgIG1vZGVsLmdldCgnaXNEaXJ0eScpOyAv
        LyBmYWxzZQogICAgICBtb2RlbC5zZXQoJ2ZvbycsICdzb21lIHZhbHVlJyk7
        CiAgICAgIG1vZGVsLnNldCgnaXNEaXJ0eScpOyAvLyB0cnVlCiAgICB9KTsK
        ICAgIGBgYAoKICAgIEBwcm9wZXJ0eSBpc0RpcnR5CiAgICBAdHlwZSB7Qm9v
        bGVhbn0KICAgIEByZWFkT25seQogICovCiAgaXNEaXJ0eTogcmV0cmlldmVG
        cm9tQ3VycmVudFN0YXRlLAogIC8qKgogICAgSWYgdGhpcyBwcm9wZXJ0eSBp
        cyBgdHJ1ZWAgdGhlIHJlY29yZCBpcyBpbiB0aGUgYHNhdmluZ2Agc3RhdGUu
        IEEKICAgIHJlY29yZCBlbnRlcnMgdGhlIHNhdmluZyBzdGF0ZSB3aGVuIGBz
        YXZlYCBpcyBjYWxsZWQsIGJ1dCB0aGUKICAgIGFkYXB0ZXIgaGFzIG5vdCB5
        ZXQgYWNrbm93bGVkZ2VkIHRoYXQgdGhlIGNoYW5nZXMgaGF2ZSBiZWVuCiAg
        ICBwZXJzaXN0ZWQgdG8gdGhlIGJhY2tlbmQuCgogICAgRXhhbXBsZQoKICAg
        IGBgYGphdmFzY3JpcHQKICAgIHZhciByZWNvcmQgPSBzdG9yZS5jcmVhdGVS
        ZWNvcmQoQXBwLk1vZGVsKTsKICAgIHJlY29yZC5nZXQoJ2lzU2F2aW5nJyk7
        IC8vIGZhbHNlCiAgICB2YXIgcHJvbWlzZSA9IHJlY29yZC5zYXZlKCk7CiAg
        ICByZWNvcmQuZ2V0KCdpc1NhdmluZycpOyAvLyB0cnVlCiAgICBwcm9taXNl
        LnRoZW4oZnVuY3Rpb24oKSB7CiAgICAgIHJlY29yZC5nZXQoJ2lzU2F2aW5n
        Jyk7IC8vIGZhbHNlCiAgICB9KTsKICAgIGBgYAoKICAgIEBwcm9wZXJ0eSBp
        c1NhdmluZwogICAgQHR5cGUge0Jvb2xlYW59CiAgICBAcmVhZE9ubHkKICAq
        LwogIGlzU2F2aW5nOiByZXRyaWV2ZUZyb21DdXJyZW50U3RhdGUsCiAgLyoq
        CiAgICBJZiB0aGlzIHByb3BlcnR5IGlzIGB0cnVlYCB0aGUgcmVjb3JkIGlz
        IGluIHRoZSBgZGVsZXRlZGAgc3RhdGUKICAgIGFuZCBoYXMgYmVlbiBtYXJr
        ZWQgZm9yIGRlbGV0aW9uLiBXaGVuIGBpc0RlbGV0ZWRgIGlzIHRydWUgYW5k
        CiAgICBgaXNEaXJ0eWAgaXMgdHJ1ZSwgdGhlIHJlY29yZCBpcyBkZWxldGVk
        IGxvY2FsbHkgYnV0IHRoZSBkZWxldGlvbgogICAgd2FzIG5vdCB5ZXQgcGVy
        c2lzdGVkLiBXaGVuIGBpc1NhdmluZ2AgaXMgdHJ1ZSwgdGhlIGNoYW5nZSBp
        cwogICAgaW4tZmxpZ2h0LiBXaGVuIGJvdGggYGlzRGlydHlgIGFuZCBgaXNT
        YXZpbmdgIGFyZSBmYWxzZSwgdGhlCiAgICBjaGFuZ2UgaGFzIHBlcnNpc3Rl
        ZC4KCiAgICBFeGFtcGxlCgogICAgYGBgamF2YXNjcmlwdAogICAgdmFyIHJl
        Y29yZCA9IHN0b3JlLmNyZWF0ZVJlY29yZChBcHAuTW9kZWwpOwogICAgcmVj
        b3JkLmdldCgnaXNEZWxldGVkJyk7IC8vIGZhbHNlCiAgICByZWNvcmQuZGVs
        ZXRlUmVjb3JkKCk7CiAgICByZWNvcmQuZ2V0KCdpc0RlbGV0ZWQnKTsgLy8g
        dHJ1ZQogICAgYGBgCgogICAgQHByb3BlcnR5IGlzRGVsZXRlZAogICAgQHR5
        cGUge0Jvb2xlYW59CiAgICBAcmVhZE9ubHkKICAqLwogIGlzRGVsZXRlZDog
        cmV0cmlldmVGcm9tQ3VycmVudFN0YXRlLAogIC8qKgogICAgSWYgdGhpcyBw
        cm9wZXJ0eSBpcyBgdHJ1ZWAgdGhlIHJlY29yZCBpcyBpbiB0aGUgYG5ld2Ag
        c3RhdGUuIEEKICAgIHJlY29yZCB3aWxsIGJlIGluIHRoZSBgbmV3YCBzdGF0
        ZSB3aGVuIGl0IGhhcyBiZWVuIGNyZWF0ZWQgb24gdGhlCiAgICBjbGllbnQg
        YW5kIHRoZSBhZGFwdGVyIGhhcyBub3QgeWV0IHJlcG9ydCB0aGF0IGl0IHdh
        cyBzdWNjZXNzZnVsbHkKICAgIHNhdmVkLgoKICAgIEV4YW1wbGUKCiAgICBg
        YGBqYXZhc2NyaXB0CiAgICB2YXIgcmVjb3JkID0gc3RvcmUuY3JlYXRlUmVj
        b3JkKEFwcC5Nb2RlbCk7CiAgICByZWNvcmQuZ2V0KCdpc05ldycpOyAvLyB0
        cnVlCgogICAgcmVjb3JkLnNhdmUoKS50aGVuKGZ1bmN0aW9uKG1vZGVsKSB7
        CiAgICAgIG1vZGVsLmdldCgnaXNOZXcnKTsgLy8gZmFsc2UKICAgIH0pOwog
        ICAgYGBgCgogICAgQHByb3BlcnR5IGlzTmV3CiAgICBAdHlwZSB7Qm9vbGVh
        bn0KICAgIEByZWFkT25seQogICovCiAgaXNOZXc6IHJldHJpZXZlRnJvbUN1
        cnJlbnRTdGF0ZSwKICAvKioKICAgIElmIHRoaXMgcHJvcGVydHkgaXMgYHRy
        dWVgIHRoZSByZWNvcmQgaXMgaW4gdGhlIGB2YWxpZGAgc3RhdGUuIEEKICAg
        IHJlY29yZCB3aWxsIGJlIGluIHRoZSBgdmFsaWRgIHN0YXRlIHdoZW4gbm8g
        Y2xpZW50LXNpZGUKICAgIHZhbGlkYXRpb25zIGhhdmUgZmFpbGVkIGFuZCB0
        aGUgYWRhcHRlciBkaWQgbm90IHJlcG9ydCBhbnkKICAgIHNlcnZlci1zaWRl
        IHZhbGlkYXRpb24gZmFpbHVyZXMuCgogICAgQHByb3BlcnR5IGlzVmFsaWQK
        ICAgIEB0eXBlIHtCb29sZWFufQogICAgQHJlYWRPbmx5CiAgKi8KICBpc1Zh
        bGlkOiByZXRyaWV2ZUZyb21DdXJyZW50U3RhdGUsCiAgLyoqCiAgICBJZiB0
        aGUgcmVjb3JkIGlzIGluIHRoZSBkaXJ0eSBzdGF0ZSB0aGlzIHByb3BlcnR5
        IHdpbGwgcmVwb3J0IHdoYXQKICAgIGtpbmQgb2YgY2hhbmdlIGhhcyBjYXVz
        ZWQgaXQgdG8gbW92ZSBpbnRvIHRoZSBkaXJ0eQogICAgc3RhdGUuIFBvc3Np
        YmxlIHZhbHVlcyBhcmU6CgogICAgLSBgY3JlYXRlZGAgVGhlIHJlY29yZCBo
        YXMgYmVlbiBjcmVhdGVkIGJ5IHRoZSBjbGllbnQgYW5kIG5vdCB5ZXQgc2F2
        ZWQgdG8gdGhlIGFkYXB0ZXIuCiAgICAtIGB1cGRhdGVkYCBUaGUgcmVjb3Jk
        IGhhcyBiZWVuIHVwZGF0ZWQgYnkgdGhlIGNsaWVudCBhbmQgbm90IHlldCBz
        YXZlZCB0byB0aGUgYWRhcHRlci4KICAgIC0gYGRlbGV0ZWRgIFRoZSByZWNv
        cmQgaGFzIGJlZW4gZGVsZXRlZCBieSB0aGUgY2xpZW50IGFuZCBub3QgeWV0
        IHNhdmVkIHRvIHRoZSBhZGFwdGVyLgoKICAgIEV4YW1wbGUKCiAgICBgYGBq
        YXZhc2NyaXB0CiAgICB2YXIgcmVjb3JkID0gc3RvcmUuY3JlYXRlUmVjb3Jk
        KEFwcC5Nb2RlbCk7CiAgICByZWNvcmQuZ2V0KCdkaXJ0eVR5cGUnKTsgLy8g
        J2NyZWF0ZWQnCiAgICBgYGAKCiAgICBAcHJvcGVydHkgZGlydHlUeXBlCiAg
        ICBAdHlwZSB7U3RyaW5nfQogICAgQHJlYWRPbmx5CiAgKi8KICBkaXJ0eVR5
        cGU6IHJldHJpZXZlRnJvbUN1cnJlbnRTdGF0ZSwKCiAgLyoqCiAgICBJZiBg
        dHJ1ZWAgdGhlIGFkYXB0ZXIgcmVwb3J0ZWQgdGhhdCBpdCB3YXMgdW5hYmxl
        IHRvIHNhdmUgbG9jYWwKICAgIGNoYW5nZXMgdG8gdGhlIGJhY2tlbmQuIFRo
        aXMgbWF5IGFsc28gcmVzdWx0IGluIHRoZSByZWNvcmQgaGF2aW5nCiAgICBp
        dHMgYGlzVmFsaWRgIHByb3BlcnR5IGJlY29tZSBmYWxzZSBpZiB0aGUgYWRh
        cHRlciByZXBvcnRlZCB0aGF0CiAgICBzZXJ2ZXItc2lkZSB2YWxpZGF0aW9u
        cyBmYWlsZWQuCgogICAgRXhhbXBsZQoKICAgIGBgYGphdmFzY3JpcHQKICAg
        IHJlY29yZC5nZXQoJ2lzRXJyb3InKTsgLy8gZmFsc2UKICAgIHJlY29yZC5z
        ZXQoJ2ZvbycsICdpbnZhbGlkIHZhbHVlJyk7CiAgICByZWNvcmQuc2F2ZSgp
        LnRoZW4obnVsbCwgZnVuY3Rpb24oKSB7CiAgICAgIHJlY29yZC5nZXQoJ2lz
        RXJyb3InKTsgLy8gdHJ1ZQogICAgfSk7CiAgICBgYGAKCiAgICBAcHJvcGVy
        dHkgaXNFcnJvcgogICAgQHR5cGUge0Jvb2xlYW59CiAgICBAcmVhZE9ubHkK
        ICAqLwogIGlzRXJyb3I6IGZhbHNlLAogIC8qKgogICAgSWYgYHRydWVgIHRo
        ZSBzdG9yZSBpcyBhdHRlbXB0aW5nIHRvIHJlbG9hZCB0aGUgcmVjb3JkIGZv
        cm0gdGhlIGFkYXB0ZXIuCgogICAgRXhhbXBsZQoKICAgIGBgYGphdmFzY3Jp
        cHQKICAgIHJlY29yZC5nZXQoJ2lzUmVsb2FkaW5nJyk7IC8vIGZhbHNlCiAg
        ICByZWNvcmQucmVsb2FkKCk7CiAgICByZWNvcmQuZ2V0KCdpc1JlbG9hZGlu
        ZycpOyAvLyB0cnVlCiAgICBgYGAKCiAgICBAcHJvcGVydHkgaXNSZWxvYWRp
        bmcKICAgIEB0eXBlIHtCb29sZWFufQogICAgQHJlYWRPbmx5CiAgKi8KICBp
        c1JlbG9hZGluZzogZmFsc2UsCgogIC8qKgogICAgVGhlIGBjbGllbnRJZGAg
        cHJvcGVydHkgaXMgYSB0cmFuc2llbnQgbnVtZXJpY2FsIGlkZW50aWZpZXIK
        ICAgIGdlbmVyYXRlZCBhdCBydW50aW1lIGJ5IHRoZSBkYXRhIHN0b3JlLiBJ
        dCBpcyBpbXBvcnRhbnQKICAgIHByaW1hcmlseSBiZWNhdXNlIG5ld2x5IGNy
        ZWF0ZWQgb2JqZWN0cyBtYXkgbm90IHlldCBoYXZlIGFuCiAgICBleHRlcm5h
        bGx5IGdlbmVyYXRlZCBpZC4KCiAgICBAcHJvcGVydHkgY2xpZW50SWQKICAg
        IEBwcml2YXRlCiAgICBAdHlwZSB7TnVtYmVyfFN0cmluZ30KICAqLwogIGNs
        aWVudElkOiBudWxsLAogIC8qKgogICAgQWxsIGVtYmVyIG1vZGVscyBoYXZl
        IGFuIGlkIHByb3BlcnR5LiBUaGlzIGlzIGFuIGlkZW50aWZpZXIKICAgIG1h
        bmFnZWQgYnkgYW4gZXh0ZXJuYWwgc291cmNlLiBUaGVzZSBhcmUgYWx3YXlz
        IGNvZXJjZWQgdG8gYmUKICAgIHN0cmluZ3MgYmVmb3JlIGJlaW5nIHVzZWQg
        aW50ZXJuYWxseS4gTm90ZSB3aGVuIGRlY2xhcmluZyB0aGUKICAgIGF0dHJp
        YnV0ZXMgZm9yIGEgbW9kZWwgaXQgaXMgYW4gZXJyb3IgdG8gZGVjbGFyZSBh
        biBpZAogICAgYXR0cmlidXRlLgoKICAgIGBgYGphdmFzY3JpcHQKICAgIHZh
        ciByZWNvcmQgPSBzdG9yZS5jcmVhdGVSZWNvcmQoQXBwLk1vZGVsKTsKICAg
        IHJlY29yZC5nZXQoJ2lkJyk7IC8vIG51bGwKCiAgICBzdG9yZS5maW5kKCdt
        b2RlbCcsIDEpLnRoZW4oZnVuY3Rpb24obW9kZWwpIHsKICAgICAgbW9kZWwu
        Z2V0KCdpZCcpOyAvLyAnMScKICAgIH0pOwogICAgYGBgCgogICAgQHByb3Bl
        cnR5IGlkCiAgICBAdHlwZSB7U3RyaW5nfQogICovCiAgaWQ6IG51bGwsCiAg
        dHJhbnNhY3Rpb246IG51bGwsCiAgLyoqCiAgICBAcHJvcGVydHkgY3VycmVu
        dFN0YXRlCiAgICBAcHJpdmF0ZQogICAgQHR5cGUge09iamVjdH0KICAqLwog
        IGN1cnJlbnRTdGF0ZTogbnVsbCwKICAvKioKICAgIFdoZW4gdGhlIHJlY29y
        ZCBpcyBpbiB0aGUgYGludmFsaWRgIHN0YXRlIHRoaXMgb2JqZWN0IHdpbGwg
        Y29udGFpbgogICAgYW55IGVycm9ycyByZXR1cm5lZCBieSB0aGUgYWRhcHRl
        ci4gV2hlbiBwcmVzZW50IHRoZSBlcnJvcnMgaGFzaAogICAgdHlwaWNhbGx5
        IGNvbnRhaW5zIGtleXMgY29ycmVzcG9uZGluZyB0byB0aGUgaW52YWxpZCBw
        cm9wZXJ0eSBuYW1lcwogICAgYW5kIHZhbHVlcyB3aGljaCBhcmUgYW4gYXJy
        YXkgb2YgZXJyb3IgbWVzc2FnZXMuCgogICAgYGBgamF2YXNjcmlwdAogICAg
        cmVjb3JkLmdldCgnZXJyb3JzLmxlbmd0aCcpOyAvLyAwCiAgICByZWNvcmQu
        c2V0KCdmb28nLCAnaW52YWxpZCB2YWx1ZScpOwogICAgcmVjb3JkLnNhdmUo
        KS50aGVuKG51bGwsIGZ1bmN0aW9uKCkgewogICAgICByZWNvcmQuZ2V0KCdl
        cnJvcnMnKS5nZXQoJ2ZvbycpOyAvLyBbJ2ZvbyBzaG91bGQgYmUgYSBudW1i
        ZXIuJ10KICAgIH0pOwogICAgYGBgCgogICAgQHByb3BlcnR5IGVycm9ycwog
        ICAgQHR5cGUge09iamVjdH0KICAqLwogIGVycm9yczogbnVsbCwKCiAgLyoq
        CiAgICBDcmVhdGUgYSBKU09OIHJlcHJlc2VudGF0aW9uIG9mIHRoZSByZWNv
        cmQsIHVzaW5nIHRoZSBzZXJpYWxpemF0aW9uCiAgICBzdHJhdGVneSBvZiB0
        aGUgc3RvcmUncyBhZGFwdGVyLgoKICAgYHNlcmlhbGl6ZWAgdGFrZXMgYW4g
        b3B0aW9uYWwgaGFzaCBhcyBhIHBhcmFtZXRlciwgY3VycmVudGx5CiAgICBz
        dXBwb3J0ZWQgb3B0aW9ucyBhcmU6CgogICAtIGBpbmNsdWRlSWRgOiBgdHJ1
        ZWAgaWYgdGhlIHJlY29yZCdzIElEIHNob3VsZCBiZSBpbmNsdWRlZCBpbiB0
        aGUKICAgICAgSlNPTiByZXByZXNlbnRhdGlvbi4KCiAgICBAbWV0aG9kIHNl
        cmlhbGl6ZQogICAgQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMKICAgIEByZXR1
        cm5zIHtPYmplY3R9IGFuIG9iamVjdCB3aG9zZSB2YWx1ZXMgYXJlIHByaW1p
        dGl2ZSBKU09OIHZhbHVlcyBvbmx5CiAgKi8KICBzZXJpYWxpemU6IGZ1bmN0
        aW9uKG9wdGlvbnMpIHsKICAgIHZhciBzdG9yZSA9IGdldCh0aGlzLCAnc3Rv
        cmUnKTsKICAgIHJldHVybiBzdG9yZS5zZXJpYWxpemUodGhpcywgb3B0aW9u
        cyk7CiAgfSwKCiAgLyoqCiAgICBVc2UgW0RTLkpTT05TZXJpYWxpemVyXShE
        Uy5KU09OU2VyaWFsaXplci5odG1sKSB0bwogICAgZ2V0IHRoZSBKU09OIHJl
        cHJlc2VudGF0aW9uIG9mIGEgcmVjb3JkLgoKICAgIGB0b0pTT05gIHRha2Vz
        IGFuIG9wdGlvbmFsIGhhc2ggYXMgYSBwYXJhbWV0ZXIsIGN1cnJlbnRseQog
        ICAgc3VwcG9ydGVkIG9wdGlvbnMgYXJlOgoKICAgIC0gYGluY2x1ZGVJZGA6
        IGB0cnVlYCBpZiB0aGUgcmVjb3JkJ3MgSUQgc2hvdWxkIGJlIGluY2x1ZGVk
        IGluIHRoZQogICAgICBKU09OIHJlcHJlc2VudGF0aW9uLgoKICAgIEBtZXRo
        b2QgdG9KU09OCiAgICBAcGFyYW0ge09iamVjdH0gb3B0aW9ucwogICAgQHJl
        dHVybnMge09iamVjdH0gQSBKU09OIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBv
        YmplY3QuCiAgKi8KICB0b0pTT046IGZ1bmN0aW9uKG9wdGlvbnMpIHsKICAg
        IC8vIGNvbnRhaW5lciBpcyBmb3IgbGF6eSB0cmFuc2Zvcm0gbG9va3Vwcwog
        ICAgdmFyIHNlcmlhbGl6ZXIgPSBEUy5KU09OU2VyaWFsaXplci5jcmVhdGUo
        eyBjb250YWluZXI6IHRoaXMuY29udGFpbmVyIH0pOwogICAgcmV0dXJuIHNl
        cmlhbGl6ZXIuc2VyaWFsaXplKHRoaXMsIG9wdGlvbnMpOwogIH0sCgogIC8q
        KgogICAgRmlyZWQgd2hlbiB0aGUgcmVjb3JkIGlzIGxvYWRlZCBmcm9tIHRo
        ZSBzZXJ2ZXIuCgogICAgQGV2ZW50IGRpZExvYWQKICAqLwogIGRpZExvYWQ6
        IEVtYmVyLkssCgogIC8qKgogICAgRmlyZWQgd2hlbiB0aGUgcmVjb3JkIGlz
        IHVwZGF0ZWQuCgogICAgQGV2ZW50IGRpZFVwZGF0ZQogICovCiAgZGlkVXBk
        YXRlOiBFbWJlci5LLAoKICAvKioKICAgIEZpcmVkIHdoZW4gdGhlIHJlY29y
        ZCBpcyBjcmVhdGVkLgoKICAgIEBldmVudCBkaWRDcmVhdGUKICAqLwogIGRp
        ZENyZWF0ZTogRW1iZXIuSywKCiAgLyoqCiAgICBGaXJlZCB3aGVuIHRoZSBy
        ZWNvcmQgaXMgZGVsZXRlZC4KCiAgICBAZXZlbnQgZGlkRGVsZXRlCiAgKi8K
        ICBkaWREZWxldGU6IEVtYmVyLkssCgogIC8qKgogICAgRmlyZWQgd2hlbiB0
        aGUgcmVjb3JkIGJlY29tZXMgaW52YWxpZC4KCiAgICBAZXZlbnQgYmVjYW1l
        SW52YWxpZAogICovCiAgYmVjYW1lSW52YWxpZDogRW1iZXIuSywKCiAgLyoq
        CiAgICBGaXJlZCB3aGVuIHRoZSByZWNvcmQgZW50ZXJzIHRoZSBlcnJvciBz
        dGF0ZS4KCiAgICBAZXZlbnQgYmVjYW1lRXJyb3IKICAqLwogIGJlY2FtZUVy
        cm9yOiBFbWJlci5LLAoKICAvKioKICAgIEBwcm9wZXJ0eSBkYXRhCiAgICBA
        cHJpdmF0ZQogICAgQHR5cGUge09iamVjdH0KICAqLwogIGRhdGE6IEVtYmVy
        LmNvbXB1dGVkKGZ1bmN0aW9uKCkgewogICAgdGhpcy5fZGF0YSA9IHRoaXMu
        X2RhdGEgfHwge307CiAgICByZXR1cm4gdGhpcy5fZGF0YTsKICB9KS5wcm9w
        ZXJ0eSgpLAoKICBfZGF0YTogbnVsbCwKCiAgaW5pdDogZnVuY3Rpb24oKSB7
        CiAgICBzZXQodGhpcywgJ2N1cnJlbnRTdGF0ZScsIERTLlJvb3RTdGF0ZS5l
        bXB0eSk7CiAgICB2YXIgZXJyb3JzID0gRFMuRXJyb3JzLmNyZWF0ZSgpOwog
        ICAgZXJyb3JzLnJlZ2lzdGVySGFuZGxlcnModGhpcywgZnVuY3Rpb24oKSB7
        CiAgICAgIHRoaXMuc2VuZCgnYmVjYW1lSW52YWxpZCcpOwogICAgfSwgZnVu
        Y3Rpb24oKSB7CiAgICAgIHRoaXMuc2VuZCgnYmVjYW1lVmFsaWQnKTsKICAg
        IH0pOwogICAgc2V0KHRoaXMsICdlcnJvcnMnLCBlcnJvcnMpOwogICAgdGhp
        cy5fc3VwZXIoKTsKICAgIHRoaXMuX3NldHVwKCk7CiAgfSwKCiAgX3NldHVw
        OiBmdW5jdGlvbigpIHsKICAgIHRoaXMuX2NoYW5nZXNUb1N5bmMgPSB7fTsK
        ICAgIHRoaXMuX2RlZmVycmVkVHJpZ2dlcnMgPSBbXTsKICAgIHRoaXMuX2Rh
        dGEgPSB7fTsKICAgIHRoaXMuX2F0dHJpYnV0ZXMgPSB7fTsKICAgIHRoaXMu
        X2luRmxpZ2h0QXR0cmlidXRlcyA9IHt9OwogICAgdGhpcy5fcmVsYXRpb25z
        aGlwcyA9IHt9OwogIH0sCgogIC8qKgogICAgQG1ldGhvZCBzZW5kCiAgICBA
        cHJpdmF0ZQogICAgQHBhcmFtIHtTdHJpbmd9IG5hbWUKICAgIEBwYXJhbSB7
        T2JqZWN0fSBjb250ZXh0CiAgKi8KICBzZW5kOiBmdW5jdGlvbihuYW1lLCBj
        b250ZXh0KSB7CiAgICB2YXIgY3VycmVudFN0YXRlID0gZ2V0KHRoaXMsICdj
        dXJyZW50U3RhdGUnKTsKCiAgICBpZiAoIWN1cnJlbnRTdGF0ZVtuYW1lXSkg
        ewogICAgICB0aGlzLl91bmhhbmRsZWRFdmVudChjdXJyZW50U3RhdGUsIG5h
        bWUsIGNvbnRleHQpOwogICAgfQoKICAgIHJldHVybiBjdXJyZW50U3RhdGVb
        bmFtZV0odGhpcywgY29udGV4dCk7CiAgfSwKCiAgLyoqCiAgICBAbWV0aG9k
        IHRyYW5zaXRpb25UbwogICAgQHByaXZhdGUKICAgIEBwYXJhbSB7U3RyaW5n
        fSBuYW1lCiAgKi8KICB0cmFuc2l0aW9uVG86IGZ1bmN0aW9uKG5hbWUpIHsK
        ICAgIC8vIFBPU1NJQkxFIFRPRE86IFJlbW92ZSB0aGlzIGNvZGUgYW5kIHJl
        cGxhY2Ugd2l0aAogICAgLy8gYWx3YXlzIGhhdmluZyBkaXJlY3QgcmVmZXJl
        bmNlcyB0byBzdGF0ZSBvYmplY3RzCgogICAgdmFyIHBpdm90TmFtZSA9IG5h
        bWUuc3BsaXQoIi4iLCAxKSwKICAgICAgICBjdXJyZW50U3RhdGUgPSBnZXQo
        dGhpcywgJ2N1cnJlbnRTdGF0ZScpLAogICAgICAgIHN0YXRlID0gY3VycmVu
        dFN0YXRlOwoKICAgIGRvIHsKICAgICAgaWYgKHN0YXRlLmV4aXQpIHsgc3Rh
        dGUuZXhpdCh0aGlzKTsgfQogICAgICBzdGF0ZSA9IHN0YXRlLnBhcmVudFN0
        YXRlOwogICAgfSB3aGlsZSAoIXN0YXRlLmhhc093blByb3BlcnR5KHBpdm90
        TmFtZSkpOwoKICAgIHZhciBwYXRoID0gbmFtZS5zcGxpdCgiLiIpOwoKICAg
        IHZhciBzZXR1cHMgPSBbXSwgZW50ZXJzID0gW10sIGksIGw7CgogICAgZm9y
        IChpPTAsIGw9cGF0aC5sZW5ndGg7IGk8bDsgaSsrKSB7CiAgICAgIHN0YXRl
        ID0gc3RhdGVbcGF0aFtpXV07CgogICAgICBpZiAoc3RhdGUuZW50ZXIpIHsg
        ZW50ZXJzLnB1c2goc3RhdGUpOyB9CiAgICAgIGlmIChzdGF0ZS5zZXR1cCkg
        eyBzZXR1cHMucHVzaChzdGF0ZSk7IH0KICAgIH0KCiAgICBmb3IgKGk9MCwg
        bD1lbnRlcnMubGVuZ3RoOyBpPGw7IGkrKykgewogICAgICBlbnRlcnNbaV0u
        ZW50ZXIodGhpcyk7CiAgICB9CgogICAgc2V0KHRoaXMsICdjdXJyZW50U3Rh
        dGUnLCBzdGF0ZSk7CgogICAgZm9yIChpPTAsIGw9c2V0dXBzLmxlbmd0aDsg
        aTxsOyBpKyspIHsKICAgICAgc2V0dXBzW2ldLnNldHVwKHRoaXMpOwogICAg
        fQoKICAgIHRoaXMudXBkYXRlUmVjb3JkQXJyYXlzTGF0ZXIoKTsKICB9LAoK
        ICBfdW5oYW5kbGVkRXZlbnQ6IGZ1bmN0aW9uKHN0YXRlLCBuYW1lLCBjb250
        ZXh0KSB7CiAgICB2YXIgZXJyb3JNZXNzYWdlID0gIkF0dGVtcHRlZCB0byBo
        YW5kbGUgZXZlbnQgYCIgKyBuYW1lICsgImAgIjsKICAgIGVycm9yTWVzc2Fn
        ZSAgICArPSAib24gIiArIFN0cmluZyh0aGlzKSArICIgd2hpbGUgaW4gc3Rh
        dGUgIjsKICAgIGVycm9yTWVzc2FnZSAgICArPSBzdGF0ZS5zdGF0ZU5hbWUg
        KyAiLiAiOwoKICAgIGlmIChjb250ZXh0ICE9PSB1bmRlZmluZWQpIHsKICAg
        ICAgZXJyb3JNZXNzYWdlICArPSAiQ2FsbGVkIHdpdGggIiArIEVtYmVyLmlu
        c3BlY3QoY29udGV4dCkgKyAiLiI7CiAgICB9CgogICAgdGhyb3cgbmV3IEVt
        YmVyLkVycm9yKGVycm9yTWVzc2FnZSk7CiAgfSwKCiAgd2l0aFRyYW5zYWN0
        aW9uOiBmdW5jdGlvbihmbikgewogICAgdmFyIHRyYW5zYWN0aW9uID0gZ2V0
        KHRoaXMsICd0cmFuc2FjdGlvbicpOwogICAgaWYgKHRyYW5zYWN0aW9uKSB7
        IGZuKHRyYW5zYWN0aW9uKTsgfQogIH0sCgogIC8qKgogICAgQG1ldGhvZCBs
        b2FkaW5nRGF0YQogICAgQHByaXZhdGUKICAgIEBwYXJhbSB7UHJvbWlzZX0g
        cHJvbWlzZQogICovCiAgbG9hZGluZ0RhdGE6IGZ1bmN0aW9uKHByb21pc2Up
        IHsKICAgIHRoaXMuc2VuZCgnbG9hZGluZ0RhdGEnLCBwcm9taXNlKTsKICB9
        LAoKICAvKioKICAgIEBtZXRob2QgbG9hZGVkRGF0YQogICAgQHByaXZhdGUK
        ICAqLwogIGxvYWRlZERhdGE6IGZ1bmN0aW9uKCkgewogICAgdGhpcy5zZW5k
        KCdsb2FkZWREYXRhJyk7CiAgfSwKCiAgLyoqCiAgICBAbWV0aG9kIG5vdEZv
        dW5kCiAgICBAcHJpdmF0ZQogICovCiAgbm90Rm91bmQ6IGZ1bmN0aW9uKCkg
        ewogICAgdGhpcy5zZW5kKCdub3RGb3VuZCcpOwogIH0sCgogIC8qKgogICAg
        QG1ldGhvZCBwdXNoZWREYXRhCiAgICBAcHJpdmF0ZQogICovCiAgcHVzaGVk
        RGF0YTogZnVuY3Rpb24oKSB7CiAgICB0aGlzLnNlbmQoJ3B1c2hlZERhdGEn
        KTsKICB9LAoKICAvKioKICAgIE1hcmtzIHRoZSByZWNvcmQgYXMgZGVsZXRl
        ZCBidXQgZG9lcyBub3Qgc2F2ZSBpdC4gWW91IG11c3QgY2FsbAogICAgYHNh
        dmVgIGFmdGVyd2FyZHMgaWYgeW91IHdhbnQgdG8gcGVyc2lzdCBpdC4gWW91
        IG1pZ2h0IHVzZSB0aGlzCiAgICBtZXRob2QgaWYgeW91IHdhbnQgdG8gYWxs
        b3cgdGhlIHVzZXIgdG8gc3RpbGwgYHJvbGxiYWNrKClgIGEKICAgIGRlbGV0
        ZSBhZnRlciBpdCB3YXMgbWFkZS4KCiAgICBFeGFtcGxlCgogICAgYGBgamF2
        YXNjcmlwdAogICAgQXBwLk1vZGVsRGVsZXRlUm91dGUgPSBFbWJlci5Sb3V0
        ZS5leHRlbmQoewogICAgICBhY3Rpb25zOiB7CiAgICAgICAgc29mdERlbGV0
        ZTogZnVuY3Rpb24oKSB7CiAgICAgICAgICB0aGlzLmdldCgnbW9kZWwnKS5k
        ZWxldGVSZWNvcmQoKTsKICAgICAgICB9LAogICAgICAgIGNvbmZpcm06IGZ1
        bmN0aW9uKCkgewogICAgICAgICAgdGhpcy5nZXQoJ21vZGVsJykuc2F2ZSgp
        OwogICAgICAgIH0sCiAgICAgICAgdW5kbzogZnVuY3Rpb24oKSB7CiAgICAg
        ICAgICB0aGlzLmdldCgnbW9kZWwnKS5yb2xsYmFjaygpOwogICAgICAgIH0K
        ICAgICAgfQogICAgfSk7CiAgICBgYGAKCiAgICBAbWV0aG9kIGRlbGV0ZVJl
        Y29yZAogICovCiAgZGVsZXRlUmVjb3JkOiBmdW5jdGlvbigpIHsKICAgIHRo
        aXMuc2VuZCgnZGVsZXRlUmVjb3JkJyk7CiAgfSwKCiAgLyoqCiAgICBTYW1l
        IGFzIGBkZWxldGVSZWNvcmRgLCBidXQgc2F2ZXMgdGhlIHJlY29yZCBpbW1l
        ZGlhdGVseS4KCiAgICBFeGFtcGxlCgogICAgYGBgamF2YXNjcmlwdAogICAg
        QXBwLk1vZGVsRGVsZXRlUm91dGUgPSBFbWJlci5Sb3V0ZS5leHRlbmQoewog
        ICAgICBhY3Rpb25zOiB7CiAgICAgICAgZGVsZXRlOiBmdW5jdGlvbigpIHsK
        ICAgICAgICAgIHZhciBjb250cm9sbGVyID0gdGhpcy5jb250cm9sbGVyOwog
        ICAgICAgICAgdGhpcy5nZXQoJ21vZGVsJykuZGVzdHJveVJlY29yZCgpLnRo
        ZW4oZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIGNvbnRyb2xsZXIudHJhbnNp
        dGlvblRvUm91dGUoJ21vZGVsLmluZGV4Jyk7CiAgICAgICAgICB9KTsKICAg
        ICAgICB9CiAgICAgIH0KICAgIH0pOwogICAgYGBgCgogICAgQG1ldGhvZCBk
        ZXN0cm95UmVjb3JkCiAgICBAcmV0dXJuIHtQcm9taXNlfSBhIHByb21pc2Ug
        dGhhdCB3aWxsIGJlIHJlc29sdmVkIHdoZW4gdGhlIGFkYXB0ZXIgcmV0dXJu
        cwogICAgc3VjY2Vzc2Z1bGx5IG9yIHJlamVjdGVkIGlmIHRoZSBhZGFwdGVy
        IHJldHVybnMgd2l0aCBhbiBlcnJvci4KICAqLwogIGRlc3Ryb3lSZWNvcmQ6
        IGZ1bmN0aW9uKCkgewogICAgdGhpcy5kZWxldGVSZWNvcmQoKTsKICAgIHJl
        dHVybiB0aGlzLnNhdmUoKTsKICB9LAoKICAvKioKICAgIEBtZXRob2QgdW5s
        b2FkUmVjb3JkCiAgICBAcHJpdmF0ZQogICovCiAgdW5sb2FkUmVjb3JkOiBm
        dW5jdGlvbigpIHsKICAgIEVtYmVyLmFzc2VydCgiWW91IGNhbiBvbmx5IHVu
        bG9hZCBhIGxvYWRlZCwgbm9uLWRpcnR5IHJlY29yZC4iLCAhZ2V0KHRoaXMs
        ICdpc0RpcnR5JykpOwoKICAgIHRoaXMuc2VuZCgndW5sb2FkUmVjb3JkJyk7
        CiAgfSwKCiAgLyoqCiAgICBAbWV0aG9kIGNsZWFyUmVsYXRpb25zaGlwcwog
        ICAgQHByaXZhdGUKICAqLwogIGNsZWFyUmVsYXRpb25zaGlwczogZnVuY3Rp
        b24oKSB7CiAgICB0aGlzLmVhY2hSZWxhdGlvbnNoaXAoZnVuY3Rpb24obmFt
        ZSwgcmVsYXRpb25zaGlwKSB7CiAgICAgIGlmIChyZWxhdGlvbnNoaXAua2lu
        ZCA9PT0gJ2JlbG9uZ3NUbycpIHsKICAgICAgICBzZXQodGhpcywgbmFtZSwg
        bnVsbCk7CiAgICAgIH0gZWxzZSBpZiAocmVsYXRpb25zaGlwLmtpbmQgPT09
        ICdoYXNNYW55JykgewogICAgICAgIHZhciBoYXNNYW55ID0gdGhpcy5fcmVs
        YXRpb25zaGlwc1tyZWxhdGlvbnNoaXAubmFtZV07CiAgICAgICAgaWYgKGhh
        c01hbnkpIHsgaGFzTWFueS5jbGVhcigpOyB9CiAgICAgIH0KICAgIH0sIHRo
        aXMpOwogIH0sCgogIC8qKgogICAgQG1ldGhvZCB1cGRhdGVSZWNvcmRBcnJh
        eXMKICAgIEBwcml2YXRlCiAgKi8KICB1cGRhdGVSZWNvcmRBcnJheXM6IGZ1
        bmN0aW9uKCkgewogICAgdGhpcy5fdXBkYXRpbmdSZWNvcmRBcnJheXNMYXRl
        ciA9IGZhbHNlOwogICAgZ2V0KHRoaXMsICdzdG9yZScpLmRhdGFXYXNVcGRh
        dGVkKHRoaXMuY29uc3RydWN0b3IsIHRoaXMpOwogIH0sCgogIC8qKgogICAg
        UmV0dXJucyBhbiBvYmplY3QsIHdob3NlIGtleXMgYXJlIGNoYW5nZWQgcHJv
        cGVydGllcywgYW5kIHZhbHVlIGlzCiAgICBhbiBbb2xkUHJvcCwgbmV3UHJv
        cF0gYXJyYXkuCgogICAgRXhhbXBsZQoKICAgIGBgYGphdmFzY3JpcHQKICAg
        IEFwcC5NYXNjb3QgPSBEUy5Nb2RlbC5leHRlbmQoewogICAgICBuYW1lOiBh
        dHRyKCdzdHJpbmcnKQogICAgfSk7CgogICAgdmFyIHBlcnNvbiA9IHN0b3Jl
        LmNyZWF0ZVJlY29yZCgncGVyc29uJyk7CiAgICBwZXJzb24uY2hhbmdlZEF0
        dHJpYnV0ZXMoKTsgLy8ge30KICAgIHBlcnNvbi5zZXQoJ25hbWUnLCAnVG9t
        c3RlcicpOwogICAgcGVyc29uLmNoYW5nZWRBdHRyaWJ1dGVzKCk7IC8vIHtu
        YW1lOiBbdW5kZWZpbmVkLCAnVG9tc3RlciddfQogICAgYGBgCgogICAgQG1l
        dGhvZCBjaGFuZ2VkQXR0cmlidXRlcwogICAgQHJldHVybiB7T2JqZWN0fSBh
        biBvYmplY3QsIHdob3NlIGtleXMgYXJlIGNoYW5nZWQgcHJvcGVydGllcywK
        ICAgICAgYW5kIHZhbHVlIGlzIGFuIFtvbGRQcm9wLCBuZXdQcm9wXSBhcnJh
        eS4KICAqLwogIGNoYW5nZWRBdHRyaWJ1dGVzOiBmdW5jdGlvbigpIHsKICAg
        IHZhciBvbGREYXRhID0gZ2V0KHRoaXMsICdfZGF0YScpLAogICAgICAgIG5l
        d0RhdGEgPSBnZXQodGhpcywgJ19hdHRyaWJ1dGVzJyksCiAgICAgICAgZGlm
        ZkRhdGEgPSB7fSwKICAgICAgICBwcm9wOwoKICAgIGZvciAocHJvcCBpbiBu
        ZXdEYXRhKSB7CiAgICAgIGRpZmZEYXRhW3Byb3BdID0gW29sZERhdGFbcHJv
        cF0sIG5ld0RhdGFbcHJvcF1dOwogICAgfQoKICAgIHJldHVybiBkaWZmRGF0
        YTsKICB9LAoKICAvKioKICAgIEBtZXRob2QgYWRhcHRlcldpbGxDb21taXQK
        ICAgIEBwcml2YXRlCiAgKi8KICBhZGFwdGVyV2lsbENvbW1pdDogZnVuY3Rp
        b24oKSB7CiAgICB0aGlzLnNlbmQoJ3dpbGxDb21taXQnKTsKICB9LAoKICAv
        KioKICAgIElmIHRoZSBhZGFwdGVyIGRpZCBub3QgcmV0dXJuIGEgaGFzaCBp
        biByZXNwb25zZSB0byBhIGNvbW1pdCwKICAgIG1lcmdlIHRoZSBjaGFuZ2Vk
        IGF0dHJpYnV0ZXMgYW5kIHJlbGF0aW9uc2hpcHMgaW50byB0aGUgZXhpc3Rp
        bmcKICAgIHNhdmVkIGRhdGEuCgogICAgQG1ldGhvZCBhZGFwdGVyRGlkQ29t
        bWl0CiAgKi8KICBhZGFwdGVyRGlkQ29tbWl0OiBmdW5jdGlvbihkYXRhKSB7
        CiAgICBzZXQodGhpcywgJ2lzRXJyb3InLCBmYWxzZSk7CgogICAgaWYgKGRh
        dGEpIHsKICAgICAgdGhpcy5fZGF0YSA9IGRhdGE7CiAgICB9IGVsc2Ugewog
        ICAgICBFbWJlci5taXhpbih0aGlzLl9kYXRhLCB0aGlzLl9pbkZsaWdodEF0
        dHJpYnV0ZXMpOwogICAgfQoKICAgIHRoaXMuX2luRmxpZ2h0QXR0cmlidXRl
        cyA9IHt9OwoKICAgIHRoaXMuc2VuZCgnZGlkQ29tbWl0Jyk7CiAgICB0aGlz
        LnVwZGF0ZVJlY29yZEFycmF5c0xhdGVyKCk7CgogICAgaWYgKCFkYXRhKSB7
        IHJldHVybjsgfQoKICAgIHRoaXMuc3VzcGVuZFJlbGF0aW9uc2hpcE9ic2Vy
        dmVycyhmdW5jdGlvbigpIHsKICAgICAgdGhpcy5ub3RpZnlQcm9wZXJ0eUNo
        YW5nZSgnZGF0YScpOwogICAgfSk7CiAgfSwKCiAgLyoqCiAgICBAbWV0aG9k
        IGFkYXB0ZXJEaWREaXJ0eQogICAgQHByaXZhdGUKICAqLwogIGFkYXB0ZXJE
        aWREaXJ0eTogZnVuY3Rpb24oKSB7CiAgICB0aGlzLnNlbmQoJ2JlY29tZURp
        cnR5Jyk7CiAgICB0aGlzLnVwZGF0ZVJlY29yZEFycmF5c0xhdGVyKCk7CiAg
        fSwKCiAgZGF0YURpZENoYW5nZTogRW1iZXIub2JzZXJ2ZXIoZnVuY3Rpb24o
        KSB7CiAgICB0aGlzLnJlbG9hZEhhc01hbnlzKCk7CiAgfSwgJ2RhdGEnKSwK
        CiAgcmVsb2FkSGFzTWFueXM6IGZ1bmN0aW9uKCkgewogICAgdmFyIHJlbGF0
        aW9uc2hpcHMgPSBnZXQodGhpcy5jb25zdHJ1Y3RvciwgJ3JlbGF0aW9uc2hp
        cHNCeU5hbWUnKTsKICAgIHRoaXMudXBkYXRlUmVjb3JkQXJyYXlzTGF0ZXIo
        KTsKICAgIHJlbGF0aW9uc2hpcHMuZm9yRWFjaChmdW5jdGlvbihuYW1lLCBy
        ZWxhdGlvbnNoaXApIHsKICAgICAgaWYgKHRoaXMuX2RhdGEubGlua3MgJiYg
        dGhpcy5fZGF0YS5saW5rc1tuYW1lXSkgeyByZXR1cm47IH0KICAgICAgaWYg
        KHJlbGF0aW9uc2hpcC5raW5kID09PSAnaGFzTWFueScpIHsKICAgICAgICB0
        aGlzLmhhc01hbnlEaWRDaGFuZ2UocmVsYXRpb25zaGlwLmtleSk7CiAgICAg
        IH0KICAgIH0sIHRoaXMpOwogIH0sCgogIGhhc01hbnlEaWRDaGFuZ2U6IGZ1
        bmN0aW9uKGtleSkgewogICAgdmFyIGhhc01hbnkgPSB0aGlzLl9yZWxhdGlv
        bnNoaXBzW2tleV07CgogICAgaWYgKGhhc01hbnkpIHsKICAgICAgdmFyIHJl
        Y29yZHMgPSB0aGlzLl9kYXRhW2tleV0gfHwgW107CgogICAgICBzZXQoaGFz
        TWFueSwgJ2NvbnRlbnQnLCBFbWJlci5BKHJlY29yZHMpKTsKICAgICAgc2V0
        KGhhc01hbnksICdpc0xvYWRlZCcsIHRydWUpOwogICAgICBoYXNNYW55LnRy
        aWdnZXIoJ2RpZExvYWQnKTsKICAgIH0KICB9LAoKICAvKioKICAgIEBtZXRo
        b2QgdXBkYXRlUmVjb3JkQXJyYXlzTGF0ZXIKICAgIEBwcml2YXRlCiAgKi8K
        ICB1cGRhdGVSZWNvcmRBcnJheXNMYXRlcjogZnVuY3Rpb24oKSB7CiAgICAv
        LyBxdWljayBoYWNrIChzb21ldGhpbmcgbGlrZSB0aGlzIGNvdWxkIGJlIHB1
        c2hlZCBpbnRvIHJ1bi5vbmNlCiAgICBpZiAodGhpcy5fdXBkYXRpbmdSZWNv
        cmRBcnJheXNMYXRlcikgeyByZXR1cm47IH0KICAgIHRoaXMuX3VwZGF0aW5n
        UmVjb3JkQXJyYXlzTGF0ZXIgPSB0cnVlOwoKICAgIEVtYmVyLnJ1bi5zY2hl
        ZHVsZSgnYWN0aW9ucycsIHRoaXMsIHRoaXMudXBkYXRlUmVjb3JkQXJyYXlz
        KTsKICB9LAoKICAvKioKICAgIEBtZXRob2Qgc2V0dXBEYXRhCiAgICBAcHJp
        dmF0ZQogICAgQHBhcmFtIHtPYmplY3R9IGRhdGEKICAgIEBwYXJhbSB7Qm9v
        bGVhbn0gcGFydGlhbCB0aGUgZGF0YSBzaG91bGQgYmUgbWVyZ2VkIGludG8K
        ICAgICAgdGhlIGV4aXN0aW5nIGRhdGEsIG5vdCByZXBsYWNlIGl0LgogICov
        CiAgc2V0dXBEYXRhOiBmdW5jdGlvbihkYXRhLCBwYXJ0aWFsKSB7CiAgICBp
        ZiAocGFydGlhbCkgewogICAgICBFbWJlci5tZXJnZSh0aGlzLl9kYXRhLCBk
        YXRhKTsKICAgIH0gZWxzZSB7CiAgICAgIHRoaXMuX2RhdGEgPSBkYXRhOwog
        ICAgfQoKICAgIHZhciByZWxhdGlvbnNoaXBzID0gdGhpcy5fcmVsYXRpb25z
        aGlwczsKCiAgICB0aGlzLmVhY2hSZWxhdGlvbnNoaXAoZnVuY3Rpb24obmFt
        ZSwgcmVsKSB7CiAgICAgIGlmIChkYXRhLmxpbmtzICYmIGRhdGEubGlua3Nb
        bmFtZV0pIHsgcmV0dXJuOyB9CiAgICAgIGlmIChyZWwub3B0aW9ucy5hc3lu
        YykgeyByZWxhdGlvbnNoaXBzW25hbWVdID0gbnVsbDsgfQogICAgfSk7Cgog
        ICAgaWYgKGRhdGEpIHsgdGhpcy5wdXNoZWREYXRhKCk7IH0KCiAgICB0aGlz
        LnN1c3BlbmRSZWxhdGlvbnNoaXBPYnNlcnZlcnMoZnVuY3Rpb24oKSB7CiAg
        ICAgIHRoaXMubm90aWZ5UHJvcGVydHlDaGFuZ2UoJ2RhdGEnKTsKICAgIH0p
        OwogIH0sCgogIG1hdGVyaWFsaXplSWQ6IGZ1bmN0aW9uKGlkKSB7CiAgICBz
        ZXQodGhpcywgJ2lkJywgaWQpOwogIH0sCgogIG1hdGVyaWFsaXplQXR0cmli
        dXRlczogZnVuY3Rpb24oYXR0cmlidXRlcykgewogICAgRW1iZXIuYXNzZXJ0
        KCJNdXN0IHBhc3MgYSBoYXNoIG9mIGF0dHJpYnV0ZXMgdG8gbWF0ZXJpYWxp
        emVBdHRyaWJ1dGVzIiwgISFhdHRyaWJ1dGVzKTsKICAgIG1lcmdlKHRoaXMu
        X2RhdGEsIGF0dHJpYnV0ZXMpOwogIH0sCgogIG1hdGVyaWFsaXplQXR0cmli
        dXRlOiBmdW5jdGlvbihuYW1lLCB2YWx1ZSkgewogICAgdGhpcy5fZGF0YVtu
        YW1lXSA9IHZhbHVlOwogIH0sCgogIC8qKgogICAgQG1ldGhvZCB1cGRhdGVI
        YXNNYW55CiAgICBAcHJpdmF0ZQogICAgQHBhcmFtIHtTdHJpbmd9IG5hbWUK
        ICAgIEBwYXJhbSB7QXJyYXl9IHJlY29yZHMKICAqLwogIHVwZGF0ZUhhc01h
        bnk6IGZ1bmN0aW9uKG5hbWUsIHJlY29yZHMpIHsKICAgIHRoaXMuX2RhdGFb
        bmFtZV0gPSByZWNvcmRzOwogICAgdGhpcy5oYXNNYW55RGlkQ2hhbmdlKG5h
        bWUpOwogIH0sCgogIC8qKgogICAgQG1ldGhvZCB1cGRhdGVCZWxvbmdzVG8K
        ICAgIEBwcml2YXRlCiAgICBAcGFyYW0ge1N0cmluZ30gbmFtZQogICAgQHBh
        cmFtIHtEUy5Nb2RlbH0gcmVjb3JkCiAgKi8KICB1cGRhdGVCZWxvbmdzVG86
        IGZ1bmN0aW9uKG5hbWUsIHJlY29yZCkgewogICAgdGhpcy5fZGF0YVtuYW1l
        XSA9IHJlY29yZDsKICB9LAoKICAvKioKICAgIElmIHRoZSBtb2RlbCBgaXNE
        aXJ0eWAgdGhpcyBmdW5jdGlvbiB3aWxsIGRpc2NhcmQgYW55IHVuc2F2ZWQK
        ICAgIGNoYW5nZXMKCiAgICBFeGFtcGxlCgogICAgYGBgamF2YXNjcmlwdAog
        ICAgcmVjb3JkLmdldCgnbmFtZScpOyAvLyAnVW50aXRsZWQgRG9jdW1lbnQn
        CiAgICByZWNvcmQuc2V0KCduYW1lJywgJ0RvYyAxJyk7CiAgICByZWNvcmQu
        Z2V0KCduYW1lJyk7IC8vICdEb2MgMScKICAgIHJlY29yZC5yb2xsYmFjaygp
        OwogICAgcmVjb3JkLmdldCgnbmFtZScpOyAvLyAnVW50aXRsZWQgRG9jdW1l
        bnQnCiAgICBgYGAKCiAgICBAbWV0aG9kIHJvbGxiYWNrCiAgKi8KICByb2xs
        YmFjazogZnVuY3Rpb24oKSB7CiAgICB0aGlzLl9hdHRyaWJ1dGVzID0ge307
        CgogICAgaWYgKGdldCh0aGlzLCAnaXNFcnJvcicpKSB7CiAgICAgIHRoaXMu
        X2luRmxpZ2h0QXR0cmlidXRlcyA9IHt9OwogICAgICBzZXQodGhpcywgJ2lz
        RXJyb3InLCBmYWxzZSk7CiAgICB9CgogICAgaWYgKCFnZXQodGhpcywgJ2lz
        VmFsaWQnKSkgewogICAgICB0aGlzLl9pbkZsaWdodEF0dHJpYnV0ZXMgPSB7
        fTsKICAgIH0KCiAgICB0aGlzLnNlbmQoJ3JvbGxlZEJhY2snKTsKCiAgICB0
        aGlzLnN1c3BlbmRSZWxhdGlvbnNoaXBPYnNlcnZlcnMoZnVuY3Rpb24oKSB7
        CiAgICAgIHRoaXMubm90aWZ5UHJvcGVydHlDaGFuZ2UoJ2RhdGEnKTsKICAg
        IH0pOwogIH0sCgogIHRvU3RyaW5nRXh0ZW5zaW9uOiBmdW5jdGlvbigpIHsK
        ICAgIHJldHVybiBnZXQodGhpcywgJ2lkJyk7CiAgfSwKCiAgLyoqCiAgICBU
        aGUgZ29hbCBvZiB0aGlzIG1ldGhvZCBpcyB0byB0ZW1wb3JhcmlseSBkaXNh
        YmxlIHNwZWNpZmljIG9ic2VydmVycwogICAgdGhhdCB0YWtlIGFjdGlvbiBp
        biByZXNwb25zZSB0byBhcHBsaWNhdGlvbiBjaGFuZ2VzLgoKICAgIFRoaXMg
        YWxsb3dzIHRoZSBzeXN0ZW0gdG8gbWFrZSBjaGFuZ2VzIChzdWNoIGFzIG1h
        dGVyaWFsaXphdGlvbiBhbmQKICAgIHJvbGxiYWNrKSB0aGF0IHNob3VsZCBu
        b3QgdHJpZ2dlciBzZWNvbmRhcnkgYmVoYXZpb3IgKHN1Y2ggYXMgc2V0dGlu
        ZyBhbgogICAgaW52ZXJzZSByZWxhdGlvbnNoaXAgb3IgbWFya2luZyByZWNv
        cmRzIGFzIGRpcnR5KS4KCiAgICBUaGUgc3BlY2lmaWMgaW1wbGVtZW50YXRp
        b24gd2lsbCBsaWtlbHkgY2hhbmdlIGFzIEVtYmVyIHByb3BlciBwcm92aWRl
        cwogICAgYmV0dGVyIGluZnJhc3RydWN0dXJlIGZvciBzdXNwZW5kaW5nIGdy
        b3VwcyBvZiBvYnNlcnZlcnMsIGFuZCBpZiBBcnJheQogICAgb2JzZXJ2YXRp
        b24gYmVjb21lcyBtb3JlIHVuaWZpZWQgd2l0aCByZWd1bGFyIG9ic2VydmVy
        cy4KCiAgICBAbWV0aG9kIHN1c3BlbmRSZWxhdGlvbnNoaXBPYnNlcnZlcnMK
        ICAgIEBwcml2YXRlCiAgICBAcGFyYW0gY2FsbGJhY2sKICAgIEBwYXJhbSBi
        aW5kaW5nCiAgKi8KICBzdXNwZW5kUmVsYXRpb25zaGlwT2JzZXJ2ZXJzOiBm
        dW5jdGlvbihjYWxsYmFjaywgYmluZGluZykgewogICAgdmFyIG9ic2VydmVy
        cyA9IGdldCh0aGlzLmNvbnN0cnVjdG9yLCAncmVsYXRpb25zaGlwTmFtZXMn
        KS5iZWxvbmdzVG87CiAgICB2YXIgc2VsZiA9IHRoaXM7CgogICAgdHJ5IHsK
        ICAgICAgdGhpcy5fc3VzcGVuZGVkUmVsYXRpb25zaGlwcyA9IHRydWU7CiAg
        ICAgIEVtYmVyLl9zdXNwZW5kT2JzZXJ2ZXJzKHNlbGYsIG9ic2VydmVycywg
        bnVsbCwgJ2JlbG9uZ3NUb0RpZENoYW5nZScsIGZ1bmN0aW9uKCkgewogICAg
        ICAgIEVtYmVyLl9zdXNwZW5kQmVmb3JlT2JzZXJ2ZXJzKHNlbGYsIG9ic2Vy
        dmVycywgbnVsbCwgJ2JlbG9uZ3NUb1dpbGxDaGFuZ2UnLCBmdW5jdGlvbigp
        IHsKICAgICAgICAgIGNhbGxiYWNrLmNhbGwoYmluZGluZyB8fCBzZWxmKTsK
        ICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9IGZpbmFsbHkgewogICAgICB0
        aGlzLl9zdXNwZW5kZWRSZWxhdGlvbnNoaXBzID0gZmFsc2U7CiAgICB9CiAg
        fSwKCiAgLyoqCiAgICBTYXZlIHRoZSByZWNvcmQgYW5kIHBlcnNpc3QgYW55
        IGNoYW5nZXMgdG8gdGhlIHJlY29yZCB0byBhbgogICAgZXh0ZW5hbCBzb3Vy
        Y2UgdmlhIHRoZSBhZGFwdGVyLgoKICAgIEV4YW1wbGUKCiAgICBgYGBqYXZh
        c2NyaXB0CiAgICByZWNvcmQuc2V0KCduYW1lJywgJ1RvbXN0ZXInKTsKICAg
        IHJlY29yZC5zYXZlKCkudGhlbihmdW5jdGlvbigpewogICAgICAvLyBTdWNj
        ZXNzIGNhbGxiYWNrCiAgICB9LCBmdW5jdGlvbigpIHsKICAgICAgLy8gRXJy
        b3IgY2FsbGJhY2sKICAgIH0pOwogICAgYGBgCiAgICBAbWV0aG9kIHNhdmUK
        ICAgIEByZXR1cm4ge1Byb21pc2V9IGEgcHJvbWlzZSB0aGF0IHdpbGwgYmUg
        cmVzb2x2ZWQgd2hlbiB0aGUgYWRhcHRlciByZXR1cm5zCiAgICBzdWNjZXNz
        ZnVsbHkgb3IgcmVqZWN0ZWQgaWYgdGhlIGFkYXB0ZXIgcmV0dXJucyB3aXRo
        IGFuIGVycm9yLgogICovCiAgc2F2ZTogZnVuY3Rpb24oKSB7CiAgICB2YXIg
        cHJvbWlzZUxhYmVsID0gIkRTOiBNb2RlbCNzYXZlICIgKyB0aGlzOwogICAg
        dmFyIHJlc29sdmVyID0gRW1iZXIuUlNWUC5kZWZlcihwcm9taXNlTGFiZWwp
        OwoKICAgIHRoaXMuZ2V0KCdzdG9yZScpLnNjaGVkdWxlU2F2ZSh0aGlzLCBy
        ZXNvbHZlcik7CiAgICB0aGlzLl9pbkZsaWdodEF0dHJpYnV0ZXMgPSB0aGlz
        Ll9hdHRyaWJ1dGVzOwogICAgdGhpcy5fYXR0cmlidXRlcyA9IHt9OwoKICAg
        IHJldHVybiBEUy5Qcm9taXNlT2JqZWN0LmNyZWF0ZSh7IHByb21pc2U6IHJl
        c29sdmVyLnByb21pc2UgfSk7CiAgfSwKCiAgLyoqCiAgICBSZWxvYWQgdGhl
        IHJlY29yZCBmcm9tIHRoZSBhZGFwdGVyLgoKICAgIFRoaXMgd2lsbCBvbmx5
        IHdvcmsgaWYgdGhlIHJlY29yZCBoYXMgYWxyZWFkeSBmaW5pc2hlZCBsb2Fk
        aW5nCiAgICBhbmQgaGFzIG5vdCB5ZXQgYmVlbiBtb2RpZmllZCAoYGlzTG9h
        ZGVkYCBidXQgbm90IGBpc0RpcnR5YCwKICAgIG9yIGBpc1NhdmluZ2ApLgoK
        ICAgIEV4YW1wbGUKCiAgICBgYGBqYXZhc2NyaXB0CiAgICBBcHAuTW9kZWxW
        aWV3Um91dGUgPSBFbWJlci5Sb3V0ZS5leHRlbmQoewogICAgICBhY3Rpb25z
        OiB7CiAgICAgICAgcmVsb2FkOiBmdW5jdGlvbigpIHsKICAgICAgICAgIHRo
        aXMuZ2V0KCdtb2RlbCcpLnJlbG9hZCgpOwogICAgICAgIH0KICAgICAgfQog
        ICAgfSk7CiAgICBgYGAKCiAgICBAbWV0aG9kIHJlbG9hZAogICAgQHJldHVy
        biB7UHJvbWlzZX0gYSBwcm9taXNlIHRoYXQgd2lsbCBiZSByZXNvbHZlZCB3
        aXRoIHRoZSByZWNvcmQgd2hlbiB0aGUKICAgIGFkYXB0ZXIgcmV0dXJucyBz
        dWNjZXNzZnVsbHkgb3IgcmVqZWN0ZWQgaWYgdGhlIGFkYXB0ZXIgcmV0dXJu
        cwogICAgd2l0aCBhbiBlcnJvci4KICAqLwogIHJlbG9hZDogZnVuY3Rpb24o
        KSB7CiAgICBzZXQodGhpcywgJ2lzUmVsb2FkaW5nJywgdHJ1ZSk7CgogICAg
        dmFyICByZWNvcmQgPSB0aGlzOwoKICAgIHZhciBwcm9taXNlTGFiZWwgPSAi
        RFM6IE1vZGVsI3JlbG9hZCBvZiAiICsgdGhpczsKICAgIHZhciBwcm9taXNl
        ID0gbmV3IEVtYmVyLlJTVlAuUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlKXsK
        ICAgICAgIHJlY29yZC5zZW5kKCdyZWxvYWRSZWNvcmQnLCByZXNvbHZlKTsK
        ICAgIH0sIHByb21pc2VMYWJlbCkudGhlbihmdW5jdGlvbigpIHsKICAgICAg
        cmVjb3JkLnNldCgnaXNSZWxvYWRpbmcnLCBmYWxzZSk7CiAgICAgIHJlY29y
        ZC5zZXQoJ2lzRXJyb3InLCBmYWxzZSk7CiAgICAgIHJldHVybiByZWNvcmQ7
        CiAgICB9LCBmdW5jdGlvbihyZWFzb24pIHsKICAgICAgcmVjb3JkLnNldCgn
        aXNFcnJvcicsIHRydWUpOwogICAgICB0aHJvdyByZWFzb247CiAgICB9LCAi
        RFM6IE1vZGVsI3JlbG9hZCBjb21wbGV0ZSwgdXBkYXRlIGZsYWdzIik7Cgog
        ICAgcmV0dXJuIERTLlByb21pc2VPYmplY3QuY3JlYXRlKHsgcHJvbWlzZTog
        cHJvbWlzZSB9KTsKICB9LAoKICAvLyBGT1IgVVNFIERVUklORyBDT01NSVQg
        UFJPQ0VTUwoKICBhZGFwdGVyRGlkVXBkYXRlQXR0cmlidXRlOiBmdW5jdGlv
        bihhdHRyaWJ1dGVOYW1lLCB2YWx1ZSkgewoKICAgIC8vIElmIGEgdmFsdWUg
        aXMgcGFzc2VkIGluLCB1cGRhdGUgdGhlIGludGVybmFsIGF0dHJpYnV0ZXMg
        YW5kIGNsZWFyCiAgICAvLyB0aGUgYXR0cmlidXRlIGNhY2hlIHNvIGl0IHBp
        Y2tzIHVwIHRoZSBuZXcgdmFsdWUuIE90aGVyd2lzZSwKICAgIC8vIGNvbGxh
        cHNlIHRoZSBjdXJyZW50IHZhbHVlIGludG8gdGhlIGludGVybmFsIGF0dHJp
        YnV0ZXMgYmVjYXVzZQogICAgLy8gdGhlIGFkYXB0ZXIgaGFzIGFja25vd2xl
        ZGdlZCBpdC4KICAgIGlmICh2YWx1ZSAhPT0gdW5kZWZpbmVkKSB7CiAgICAg
        IHRoaXMuX2RhdGFbYXR0cmlidXRlTmFtZV0gPSB2YWx1ZTsKICAgICAgdGhp
        cy5ub3RpZnlQcm9wZXJ0eUNoYW5nZShhdHRyaWJ1dGVOYW1lKTsKICAgIH0g
        ZWxzZSB7CiAgICAgIHRoaXMuX2RhdGFbYXR0cmlidXRlTmFtZV0gPSB0aGlz
        Ll9pbkZsaWdodEF0dHJpYnV0ZXNbYXR0cmlidXRlTmFtZV07CiAgICB9Cgog
        ICAgdGhpcy51cGRhdGVSZWNvcmRBcnJheXNMYXRlcigpOwogIH0sCgogIC8q
        KgogICAgQG1ldGhvZCBhZGFwdGVyRGlkSW52YWxpZGF0ZQogICAgQHByaXZh
        dGUKICAqLwogIGFkYXB0ZXJEaWRJbnZhbGlkYXRlOiBmdW5jdGlvbihlcnJv
        cnMpIHsKICAgIHZhciByZWNvcmRFcnJvcnMgPSBnZXQodGhpcywgJ2Vycm9y
        cycpOwogICAgZnVuY3Rpb24gYWRkRXJyb3IobmFtZSkgewogICAgICBpZiAo
        ZXJyb3JzW25hbWVdKSB7CiAgICAgICAgcmVjb3JkRXJyb3JzLmFkZChuYW1l
        LCBlcnJvcnNbbmFtZV0pOwogICAgICB9CiAgICB9CgogICAgdGhpcy5lYWNo
        QXR0cmlidXRlKGFkZEVycm9yKTsKICAgIHRoaXMuZWFjaFJlbGF0aW9uc2hp
        cChhZGRFcnJvcik7CiAgfSwKCiAgLyoqCiAgICBAbWV0aG9kIGFkYXB0ZXJE
        aWRFcnJvcgogICAgQHByaXZhdGUKICAqLwogIGFkYXB0ZXJEaWRFcnJvcjog
        ZnVuY3Rpb24oKSB7CiAgICB0aGlzLnNlbmQoJ2JlY2FtZUVycm9yJyk7CiAg
        ICBzZXQodGhpcywgJ2lzRXJyb3InLCB0cnVlKTsKICB9LAoKICAvKioKICAg
        IE92ZXJyaWRlIHRoZSBkZWZhdWx0IGV2ZW50IGZpcmluZyBmcm9tIEVtYmVy
        LkV2ZW50ZWQgdG8KICAgIGFsc28gY2FsbCBtZXRob2RzIHdpdGggdGhlIGdp
        dmVuIG5hbWUuCgogICAgQG1ldGhvZCB0cmlnZ2VyCiAgICBAcHJpdmF0ZQog
        ICAgQHBhcmFtIG5hbWUKICAqLwogIHRyaWdnZXI6IGZ1bmN0aW9uKG5hbWUp
        IHsKICAgIEVtYmVyLnRyeUludm9rZSh0aGlzLCBuYW1lLCBbXS5zbGljZS5j
        YWxsKGFyZ3VtZW50cywgMSkpOwogICAgdGhpcy5fc3VwZXIuYXBwbHkodGhp
        cywgYXJndW1lbnRzKTsKICB9LAoKICB0cmlnZ2VyTGF0ZXI6IGZ1bmN0aW9u
        KCkgewogICAgaWYgKHRoaXMuX2RlZmVycmVkVHJpZ2dlcnMucHVzaChhcmd1
        bWVudHMpICE9PSAxKSB7IHJldHVybjsgfQogICAgRW1iZXIucnVuLnNjaGVk
        dWxlKCdhY3Rpb25zJywgdGhpcywgJ190cmlnZ2VyRGVmZXJyZWRUcmlnZ2Vy
        cycpOwogIH0sCgogIF90cmlnZ2VyRGVmZXJyZWRUcmlnZ2VyczogZnVuY3Rp
        b24oKSB7CiAgICBmb3IgKHZhciBpPTAsIGw9dGhpcy5fZGVmZXJyZWRUcmln
        Z2Vycy5sZW5ndGg7IGk8bDsgaSsrKSB7CiAgICAgIHRoaXMudHJpZ2dlci5h
        cHBseSh0aGlzLCB0aGlzLl9kZWZlcnJlZFRyaWdnZXJzW2ldKTsKICAgIH0K
        CiAgICB0aGlzLl9kZWZlcnJlZFRyaWdnZXJzLmxlbmd0aCA9IDA7CiAgfQp9
        KTsKCkRTLk1vZGVsLnJlb3BlbkNsYXNzKHsKCiAgLyoqCiAgICBBbGlhcyBE
        Uy5Nb2RlbCdzIGBjcmVhdGVgIG1ldGhvZCB0byBgX2NyZWF0ZWAuIFRoaXMg
        YWxsb3dzIHVzIHRvIGNyZWF0ZSBEUy5Nb2RlbAogICAgaW5zdGFuY2VzIGZy
        b20gd2l0aGluIHRoZSBzdG9yZSwgYnV0IGlmIGVuZCB1c2VycyBhY2NpZGVu
        dGFsbHkgY2FsbCBgY3JlYXRlKClgCiAgICAoaW5zdGVhZCBvZiBgY3JlYXRl
        UmVjb3JkKClgKSwgd2UgY2FuIHJhaXNlIGFuIGVycm9yLgoKICAgIEBtZXRo
        b2QgX2NyZWF0ZQogICAgQHByaXZhdGUKICAgIEBzdGF0aWMKICAqLwogIF9j
        cmVhdGU6IERTLk1vZGVsLmNyZWF0ZSwKCiAgLyoqCiAgICBPdmVycmlkZSB0
        aGUgY2xhc3MnIGBjcmVhdGUoKWAgbWV0aG9kIHRvIHJhaXNlIGFuIGVycm9y
        LiBUaGlzCiAgICBwcmV2ZW50cyBlbmQgdXNlcnMgZnJvbSBpbmFkdmVydGVu
        dGx5IGNhbGxpbmcgYGNyZWF0ZSgpYCBpbnN0ZWFkCiAgICBvZiBgY3JlYXRl
        UmVjb3JkKClgLiBUaGUgc3RvcmUgaXMgc3RpbGwgYWJsZSB0byBjcmVhdGUg
        aW5zdGFuY2VzCiAgICBieSBjYWxsaW5nIHRoZSBgX2NyZWF0ZSgpYCBtZXRo
        b2QuIFRvIGNyZWF0ZSBhbiBpbnN0YW5jZSBvZiBhCiAgICBgRFMuTW9kZWxg
        IHVzZSBbc3RvcmUuY3JlYXRlUmVjb3JkXShEUy5TdG9yZS5odG1sI21ldGhv
        ZF9jcmVhdGVSZWNvcmQpLgoKICAgIEBtZXRob2QgY3JlYXRlCiAgICBAcHJp
        dmF0ZQogICAgQHN0YXRpYwogICovCiAgY3JlYXRlOiBmdW5jdGlvbigpIHsK
        ICAgIHRocm93IG5ldyBFbWJlci5FcnJvcigiWW91IHNob3VsZCBub3QgY2Fs
        bCBgY3JlYXRlYCBvbiBhIG1vZGVsLiBJbnN0ZWFkLCBjYWxsIGBzdG9yZS5j
        cmVhdGVSZWNvcmRgIHdpdGggdGhlIGF0dHJpYnV0ZXMgeW91IHdvdWxkIGxp
        a2UgdG8gc2V0LiIpOwogIH0KfSk7Cgp9KSgpOwoKCgooZnVuY3Rpb24oKSB7
        Ci8qKgogIEBtb2R1bGUgZW1iZXItZGF0YQoqLwoKdmFyIGdldCA9IEVtYmVy
        LmdldDsKCi8qKgogIEBjbGFzcyBNb2RlbAogIEBuYW1lc3BhY2UgRFMKKi8K
        RFMuTW9kZWwucmVvcGVuQ2xhc3MoewogIC8qKgogICAgQSBtYXAgd2hvc2Ug
        a2V5cyBhcmUgdGhlIGF0dHJpYnV0ZXMgb2YgdGhlIG1vZGVsIChwcm9wZXJ0
        aWVzCiAgICBkZXNjcmliZWQgYnkgRFMuYXR0cikgYW5kIHdob3NlIHZhbHVl
        cyBhcmUgdGhlIG1ldGEgb2JqZWN0IGZvciB0aGUKICAgIHByb3BlcnR5LgoK
        ICAgIEV4YW1wbGUKCiAgICBgYGBqYXZhc2NyaXB0CgogICAgQXBwLlBlcnNv
        biA9IERTLk1vZGVsLmV4dGVuZCh7CiAgICAgIGZpcnN0TmFtZTogYXR0cign
        c3RyaW5nJyksCiAgICAgIGxhc3ROYW1lOiBhdHRyKCdzdHJpbmcnKSwKICAg
        ICAgYmlydGhkYXk6IGF0dHIoJ2RhdGUnKQogICAgfSk7CgogICAgdmFyIGF0
        dHJpYnV0ZXMgPSBFbWJlci5nZXQoQXBwLlBlcnNvbiwgJ2F0dHJpYnV0ZXMn
        KQoKICAgIGF0dHJpYnV0ZXMuZm9yRWFjaChmdW5jdGlvbihuYW1lLCBtZXRh
        KSB7CiAgICAgIGNvbnNvbGUubG9nKG5hbWUsIG1ldGEpOwogICAgfSk7Cgog
        ICAgLy8gcHJpbnRzOgogICAgLy8gZmlyc3ROYW1lIHt0eXBlOiAic3RyaW5n
        IiwgaXNBdHRyaWJ1dGU6IHRydWUsIG9wdGlvbnM6IE9iamVjdCwgcGFyZW50
        VHlwZTogZnVuY3Rpb24sIG5hbWU6ICJmaXJzdE5hbWUifQogICAgLy8gbGFz
        dE5hbWUge3R5cGU6ICJzdHJpbmciLCBpc0F0dHJpYnV0ZTogdHJ1ZSwgb3B0
        aW9uczogT2JqZWN0LCBwYXJlbnRUeXBlOiBmdW5jdGlvbiwgbmFtZTogImxh
        c3ROYW1lIn0KICAgIC8vIGJpcnRoZGF5IHt0eXBlOiAiZGF0ZSIsIGlzQXR0
        cmlidXRlOiB0cnVlLCBvcHRpb25zOiBPYmplY3QsIHBhcmVudFR5cGU6IGZ1
        bmN0aW9uLCBuYW1lOiAiYmlydGhkYXkifQogICAgYGBgCgogICAgQHByb3Bl
        cnR5IGF0dHJpYnV0ZXMKICAgIEBzdGF0aWMKICAgIEB0eXBlIHtFbWJlci5N
        YXB9CiAgICBAcmVhZE9ubHkKICAqLwogIGF0dHJpYnV0ZXM6IEVtYmVyLmNv
        bXB1dGVkKGZ1bmN0aW9uKCkgewogICAgdmFyIG1hcCA9IEVtYmVyLk1hcC5j
        cmVhdGUoKTsKCiAgICB0aGlzLmVhY2hDb21wdXRlZFByb3BlcnR5KGZ1bmN0
        aW9uKG5hbWUsIG1ldGEpIHsKICAgICAgaWYgKG1ldGEuaXNBdHRyaWJ1dGUp
        IHsKICAgICAgICBFbWJlci5hc3NlcnQoIllvdSBtYXkgbm90IHNldCBgaWRg
        IGFzIGFuIGF0dHJpYnV0ZSBvbiB5b3VyIG1vZGVsLiBQbGVhc2UgcmVtb3Zl
        IGFueSBsaW5lcyB0aGF0IGxvb2sgbGlrZTogYGlkOiBEUy5hdHRyKCc8dHlw
        ZT4nKWAgZnJvbSAiICsgdGhpcy50b1N0cmluZygpLCBuYW1lICE9PSAnaWQn
        KTsKCiAgICAgICAgbWV0YS5uYW1lID0gbmFtZTsKICAgICAgICBtYXAuc2V0
        KG5hbWUsIG1ldGEpOwogICAgICB9CiAgICB9KTsKCiAgICByZXR1cm4gbWFw
        OwogIH0pLAoKICAvKioKICAgIEEgbWFwIHdob3NlIGtleXMgYXJlIHRoZSBh
        dHRyaWJ1dGVzIG9mIHRoZSBtb2RlbCAocHJvcGVydGllcwogICAgZGVzY3Jp
        YmVkIGJ5IERTLmF0dHIpIGFuZCB3aG9zZSB2YWx1ZXMgYXJlIHR5cGUgb2Yg
        dHJhbnNmb3JtYXRpb24KICAgIGFwcGxpZWQgdG8gZWFjaCBhdHRyaWJ1dGUu
        IFRoaXMgbWFwIGRvZXMgbm90IGluY2x1ZGUgYW55CiAgICBhdHRyaWJ1dGVz
        IHRoYXQgZG8gbm90IGhhdmUgYW4gdHJhbnNmb3JtYXRpb24gdHlwZS4KCiAg
        ICBFeGFtcGxlCgogICAgYGBgamF2YXNjcmlwdAogICAgQXBwLlBlcnNvbiA9
        IERTLk1vZGVsLmV4dGVuZCh7CiAgICAgIGZpcnN0TmFtZTogYXR0cigpLAog
        ICAgICBsYXN0TmFtZTogYXR0cignc3RyaW5nJyksCiAgICAgIGJpcnRoZGF5
        OiBhdHRyKCdkYXRlJykKICAgIH0pOwoKICAgIHZhciB0cmFuc2Zvcm1lZEF0
        dHJpYnV0ZXMgPSBFbWJlci5nZXQoQXBwLlBlcnNvbiwgJ3RyYW5zZm9ybWVk
        QXR0cmlidXRlcycpCgogICAgdHJhbnNmb3JtZWRBdHRyaWJ1dGVzLmZvckVh
        Y2goZnVuY3Rpb24oZmllbGQsIHR5cGUpIHsKICAgICAgY29uc29sZS5sb2co
        ZmllbGQsIHR5cGUpOwogICAgfSk7CgogICAgLy8gcHJpbnRzOgogICAgLy8g
        bGFzdE5hbWUgc3RyaW5nCiAgICAvLyBiaXJ0aGRheSBkYXRlCiAgICBgYGAK
        CiAgICBAcHJvcGVydHkgdHJhbnNmb3JtZWRBdHRyaWJ1dGVzCiAgICBAc3Rh
        dGljCiAgICBAdHlwZSB7RW1iZXIuTWFwfQogICAgQHJlYWRPbmx5CiAgKi8K
        ICB0cmFuc2Zvcm1lZEF0dHJpYnV0ZXM6IEVtYmVyLmNvbXB1dGVkKGZ1bmN0
        aW9uKCkgewogICAgdmFyIG1hcCA9IEVtYmVyLk1hcC5jcmVhdGUoKTsKCiAg
        ICB0aGlzLmVhY2hBdHRyaWJ1dGUoZnVuY3Rpb24oa2V5LCBtZXRhKSB7CiAg
        ICAgIGlmIChtZXRhLnR5cGUpIHsKICAgICAgICBtYXAuc2V0KGtleSwgbWV0
        YS50eXBlKTsKICAgICAgfQogICAgfSk7CgogICAgcmV0dXJuIG1hcDsKICB9
        KSwKCiAgLyoqCiAgICBJdGVyYXRlcyB0aHJvdWdoIHRoZSBhdHRyaWJ1dGVz
        IG9mIHRoZSBtb2RlbCwgY2FsbGluZyB0aGUgcGFzc2VkIGZ1bmN0aW9uIG9u
        IGVhY2gKICAgIGF0dHJpYnV0ZS4KCiAgICBUaGUgY2FsbGJhY2sgbWV0aG9k
        IHlvdSBwcm92aWRlIHNob3VsZCBoYXZlIHRoZSBmb2xsb3dpbmcgc2lnbmF0
        dXJlIChhbGwKICAgIHBhcmFtZXRlcnMgYXJlIG9wdGlvbmFsKToKCiAgICBg
        YGBqYXZhc2NyaXB0CiAgICBmdW5jdGlvbihuYW1lLCBtZXRhKTsKICAgIGBg
        YAoKICAgIC0gYG5hbWVgIHRoZSBuYW1lIG9mIHRoZSBjdXJyZW50IHByb3Bl
        cnR5IGluIHRoZSBpdGVyYXRpb24KICAgIC0gYG1ldGFgIHRoZSBtZXRhIG9i
        amVjdCBmb3IgdGhlIGF0dHJpYnV0ZSBwcm9wZXJ0eSBpbiB0aGUgaXRlcmF0
        aW9uCgogICAgTm90ZSB0aGF0IGluIGFkZGl0aW9uIHRvIGEgY2FsbGJhY2ss
        IHlvdSBjYW4gYWxzbyBwYXNzIGFuIG9wdGlvbmFsIHRhcmdldAogICAgb2Jq
        ZWN0IHRoYXQgd2lsbCBiZSBzZXQgYXMgYHRoaXNgIG9uIHRoZSBjb250ZXh0
        LgoKICAgIEV4YW1wbGUKCiAgICBgYGBqYXZhc2NyaXB0CiAgICBBcHAuUGVy
        c29uID0gRFMuTW9kZWwuZXh0ZW5kKHsKICAgICAgZmlyc3ROYW1lOiBhdHRy
        KCdzdHJpbmcnKSwKICAgICAgbGFzdE5hbWU6IGF0dHIoJ3N0cmluZycpLAog
        ICAgICBiaXJ0aGRheTogYXR0cignZGF0ZScpCiAgICB9KTsKCiAgICBBcHAu
        UGVyc29uLmVhY2hBdHRyaWJ1dGUoZnVuY3Rpb24obmFtZSwgbWV0YSkgewog
        ICAgICBjb25zb2xlLmxvZyhuYW1lLCBtZXRhKTsKICAgIH0pOwoKICAgIC8v
        IHByaW50czoKICAgIC8vIGZpcnN0TmFtZSB7dHlwZTogInN0cmluZyIsIGlz
        QXR0cmlidXRlOiB0cnVlLCBvcHRpb25zOiBPYmplY3QsIHBhcmVudFR5cGU6
        IGZ1bmN0aW9uLCBuYW1lOiAiZmlyc3ROYW1lIn0KICAgIC8vIGxhc3ROYW1l
        IHt0eXBlOiAic3RyaW5nIiwgaXNBdHRyaWJ1dGU6IHRydWUsIG9wdGlvbnM6
        IE9iamVjdCwgcGFyZW50VHlwZTogZnVuY3Rpb24sIG5hbWU6ICJsYXN0TmFt
        ZSJ9CiAgICAvLyBiaXJ0aGRheSB7dHlwZTogImRhdGUiLCBpc0F0dHJpYnV0
        ZTogdHJ1ZSwgb3B0aW9uczogT2JqZWN0LCBwYXJlbnRUeXBlOiBmdW5jdGlv
        biwgbmFtZTogImJpcnRoZGF5In0KICAgYGBgCgogICAgQG1ldGhvZCBlYWNo
        QXR0cmlidXRlCiAgICBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjayBUaGUg
        Y2FsbGJhY2sgdG8gZXhlY3V0ZQogICAgQHBhcmFtIHtPYmplY3R9IFt0YXJn
        ZXRdIFRoZSB0YXJnZXQgb2JqZWN0IHRvIHVzZQogICAgQHN0YXRpYwogICov
        CiAgZWFjaEF0dHJpYnV0ZTogZnVuY3Rpb24oY2FsbGJhY2ssIGJpbmRpbmcp
        IHsKICAgIGdldCh0aGlzLCAnYXR0cmlidXRlcycpLmZvckVhY2goZnVuY3Rp
        b24obmFtZSwgbWV0YSkgewogICAgICBjYWxsYmFjay5jYWxsKGJpbmRpbmcs
        IG5hbWUsIG1ldGEpOwogICAgfSwgYmluZGluZyk7CiAgfSwKCiAgLyoqCiAg
        ICBJdGVyYXRlcyB0aHJvdWdoIHRoZSB0cmFuc2Zvcm1lZEF0dHJpYnV0ZXMg
        b2YgdGhlIG1vZGVsLCBjYWxsaW5nCiAgICB0aGUgcGFzc2VkIGZ1bmN0aW9u
        IG9uIGVhY2ggYXR0cmlidXRlLiBOb3RlIHRoZSBjYWxsYmFjayB3aWxsIG5v
        dCBiZQogICAgY2FsbGVkIGZvciBhbnkgYXR0cmlidXRlcyB0aGF0IGRvIG5v
        dCBoYXZlIGFuIHRyYW5zZm9ybWF0aW9uIHR5cGUuCgogICAgVGhlIGNhbGxi
        YWNrIG1ldGhvZCB5b3UgcHJvdmlkZSBzaG91bGQgaGF2ZSB0aGUgZm9sbG93
        aW5nIHNpZ25hdHVyZSAoYWxsCiAgICBwYXJhbWV0ZXJzIGFyZSBvcHRpb25h
        bCk6CgogICAgYGBgamF2YXNjcmlwdAogICAgZnVuY3Rpb24obmFtZSwgdHlw
        ZSk7CiAgICBgYGAKCiAgICAtIGBuYW1lYCB0aGUgbmFtZSBvZiB0aGUgY3Vy
        cmVudCBwcm9wZXJ0eSBpbiB0aGUgaXRlcmF0aW9uCiAgICAtIGB0eXBlYCBh
        IHN0cmluZyBjb250YWluaW5nIHRoZSBuYW1lIG9mIHRoZSB0eXBlIG9mIHRy
        YW5zZm9ybWVkCiAgICAgIGFwcGxpZWQgdG8gdGhlIGF0dHJpYnV0ZQoKICAg
        IE5vdGUgdGhhdCBpbiBhZGRpdGlvbiB0byBhIGNhbGxiYWNrLCB5b3UgY2Fu
        IGFsc28gcGFzcyBhbiBvcHRpb25hbCB0YXJnZXQKICAgIG9iamVjdCB0aGF0
        IHdpbGwgYmUgc2V0IGFzIGB0aGlzYCBvbiB0aGUgY29udGV4dC4KCiAgICBF
        eGFtcGxlCgogICAgYGBgamF2YXNjcmlwdAogICAgQXBwLlBlcnNvbiA9IERT
        Lk1vZGVsLmV4dGVuZCh7CiAgICAgIGZpcnN0TmFtZTogYXR0cigpLAogICAg
        ICBsYXN0TmFtZTogYXR0cignc3RyaW5nJyksCiAgICAgIGJpcnRoZGF5OiBh
        dHRyKCdkYXRlJykKICAgIH0pOwoKICAgIEFwcC5QZXJzb24uZWFjaFRyYW5z
        Zm9ybWVkQXR0cmlidXRlKGZ1bmN0aW9uKG5hbWUsIHR5cGUpIHsKICAgICAg
        Y29uc29sZS5sb2cobmFtZSwgdHlwZSk7CiAgICB9KTsKCiAgICAvLyBwcmlu
        dHM6CiAgICAvLyBsYXN0TmFtZSBzdHJpbmcKICAgIC8vIGJpcnRoZGF5IGRh
        dGUKICAgYGBgCgogICAgQG1ldGhvZCBlYWNoVHJhbnNmb3JtZWRBdHRyaWJ1
        dGUKICAgIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrIFRoZSBjYWxsYmFj
        ayB0byBleGVjdXRlCiAgICBAcGFyYW0ge09iamVjdH0gW3RhcmdldF0gVGhl
        IHRhcmdldCBvYmplY3QgdG8gdXNlCiAgICBAc3RhdGljCiAgKi8KICBlYWNo
        VHJhbnNmb3JtZWRBdHRyaWJ1dGU6IGZ1bmN0aW9uKGNhbGxiYWNrLCBiaW5k
        aW5nKSB7CiAgICBnZXQodGhpcywgJ3RyYW5zZm9ybWVkQXR0cmlidXRlcycp
        LmZvckVhY2goZnVuY3Rpb24obmFtZSwgdHlwZSkgewogICAgICBjYWxsYmFj
        ay5jYWxsKGJpbmRpbmcsIG5hbWUsIHR5cGUpOwogICAgfSk7CiAgfQp9KTsK
        CgpEUy5Nb2RlbC5yZW9wZW4oewogIGVhY2hBdHRyaWJ1dGU6IGZ1bmN0aW9u
        KGNhbGxiYWNrLCBiaW5kaW5nKSB7CiAgICB0aGlzLmNvbnN0cnVjdG9yLmVh
        Y2hBdHRyaWJ1dGUoY2FsbGJhY2ssIGJpbmRpbmcpOwogIH0KfSk7CgpmdW5j
        dGlvbiBnZXREZWZhdWx0VmFsdWUocmVjb3JkLCBvcHRpb25zLCBrZXkpIHsK
        ICBpZiAodHlwZW9mIG9wdGlvbnMuZGVmYXVsdFZhbHVlID09PSAiZnVuY3Rp
        b24iKSB7CiAgICByZXR1cm4gb3B0aW9ucy5kZWZhdWx0VmFsdWUoKTsKICB9
        IGVsc2UgewogICAgcmV0dXJuIG9wdGlvbnMuZGVmYXVsdFZhbHVlOwogIH0K
        fQoKZnVuY3Rpb24gaGFzVmFsdWUocmVjb3JkLCBrZXkpIHsKICByZXR1cm4g
        cmVjb3JkLl9hdHRyaWJ1dGVzLmhhc093blByb3BlcnR5KGtleSkgfHwKICAg
        ICAgICAgcmVjb3JkLl9pbkZsaWdodEF0dHJpYnV0ZXMuaGFzT3duUHJvcGVy
        dHkoa2V5KSB8fAogICAgICAgICByZWNvcmQuX2RhdGEuaGFzT3duUHJvcGVy
        dHkoa2V5KTsKfQoKZnVuY3Rpb24gZ2V0VmFsdWUocmVjb3JkLCBrZXkpIHsK
        ICBpZiAocmVjb3JkLl9hdHRyaWJ1dGVzLmhhc093blByb3BlcnR5KGtleSkp
        IHsKICAgIHJldHVybiByZWNvcmQuX2F0dHJpYnV0ZXNba2V5XTsKICB9IGVs
        c2UgaWYgKHJlY29yZC5faW5GbGlnaHRBdHRyaWJ1dGVzLmhhc093blByb3Bl
        cnR5KGtleSkpIHsKICAgIHJldHVybiByZWNvcmQuX2luRmxpZ2h0QXR0cmli
        dXRlc1trZXldOwogIH0gZWxzZSB7CiAgICByZXR1cm4gcmVjb3JkLl9kYXRh
        W2tleV07CiAgfQp9CgovKioKICBgRFMuYXR0cmAgZGVmaW5lcyBhbiBhdHRy
        aWJ1dGUgb24gYSBbRFMuTW9kZWxdKERTLk1vZGVsLmh0bWwpLgogIEJ5IGRl
        ZmF1bHQsIGF0dHJpYnV0ZXMgYXJlIHBhc3NlZCB0aHJvdWdoIGFzLWlzLCBo
        b3dldmVyIHlvdSBjYW4gc3BlY2lmeSBhbgogIG9wdGlvbmFsIHR5cGUgdG8g
        aGF2ZSB0aGUgdmFsdWUgYXV0b21hdGljYWxseSB0cmFuc2Zvcm1lZC4KICBF
        bWJlciBEYXRhIHNoaXBzIHdpdGggZm91ciBiYXNpYyB0cmFuc2Zvcm0gdHlw
        ZXM6IGBzdHJpbmdgLCBgbnVtYmVyYCwKICBgYm9vbGVhbmAgYW5kIGBkYXRl
        YC4gWW91IGNhbiBkZWZpbmUgeW91ciBvd24gdHJhbnNmb3JtcyBieSBzdWJj
        bGFzc2luZwogIFtEUy5UcmFuc2Zvcm1dKERTLlRyYW5zZm9ybS5odG1sKS4K
        CiAgYERTLmF0dHJgIHRha2VzIGFuIG9wdGlvbmFsIGhhc2ggYXMgYSBzZWNv
        bmQgcGFyYW1ldGVyLCBjdXJyZW50bHkKICBzdXBwb3J0ZWQgb3B0aW9ucyBh
        cmU6CgogIC0gYGRlZmF1bHRWYWx1ZWA6IFBhc3MgYSBzdHJpbmcgb3IgYSBm
        dW5jdGlvbiB0byBiZSBjYWxsZWQgdG8gc2V0IHRoZSBhdHRyaWJ1dGUKICAg
        ICAgICAgICAgICAgICAgICB0byBhIGRlZmF1bHQgdmFsdWUgaWYgbm9uZSBp
        cyBzdXBwbGllZC4KCiAgRXhhbXBsZQoKICBgYGBqYXZhc2NyaXB0CiAgdmFy
        IGF0dHIgPSBEUy5hdHRyOwoKICBBcHAuVXNlciA9IERTLk1vZGVsLmV4dGVu
        ZCh7CiAgICB1c2VybmFtZTogYXR0cignc3RyaW5nJyksCiAgICBlbWFpbDog
        YXR0cignc3RyaW5nJyksCiAgICB2ZXJpZmllZDogYXR0cignYm9vbGVhbics
        IHtkZWZhdWx0VmFsdWU6IGZhbHNlfSkKICB9KTsKICBgYGAKCiAgQG5hbWVz
        cGFjZQogIEBtZXRob2QgYXR0cgogIEBmb3IgRFMKICBAcGFyYW0ge1N0cmlu
        Z30gdHlwZSB0aGUgYXR0cmlidXRlIHR5cGUKICBAcGFyYW0ge09iamVjdH0g
        b3B0aW9ucyBhIGhhc2ggb2Ygb3B0aW9ucwogIEByZXR1cm4ge0F0dHJpYnV0
        ZX0KKi8KCkRTLmF0dHIgPSBmdW5jdGlvbih0eXBlLCBvcHRpb25zKSB7CiAg
        b3B0aW9ucyA9IG9wdGlvbnMgfHwge307CgogIHZhciBtZXRhID0gewogICAg
        dHlwZTogdHlwZSwKICAgIGlzQXR0cmlidXRlOiB0cnVlLAogICAgb3B0aW9u
        czogb3B0aW9ucwogIH07CgogIHJldHVybiBFbWJlci5jb21wdXRlZChmdW5j
        dGlvbihrZXksIHZhbHVlKSB7CiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+
        IDEpIHsKICAgICAgRW1iZXIuYXNzZXJ0KCJZb3UgbWF5IG5vdCBzZXQgYGlk
        YCBhcyBhbiBhdHRyaWJ1dGUgb24geW91ciBtb2RlbC4gUGxlYXNlIHJlbW92
        ZSBhbnkgbGluZXMgdGhhdCBsb29rIGxpa2U6IGBpZDogRFMuYXR0cignPHR5
        cGU+JylgIGZyb20gIiArIHRoaXMuY29uc3RydWN0b3IudG9TdHJpbmcoKSwg
        a2V5ICE9PSAnaWQnKTsKICAgICAgdmFyIG9sZFZhbHVlID0gdGhpcy5fYXR0
        cmlidXRlc1trZXldIHx8IHRoaXMuX2luRmxpZ2h0QXR0cmlidXRlc1trZXld
        IHx8IHRoaXMuX2RhdGFba2V5XTsKCiAgICAgIHRoaXMuc2VuZCgnZGlkU2V0
        UHJvcGVydHknLCB7CiAgICAgICAgbmFtZToga2V5LAogICAgICAgIG9sZFZh
        bHVlOiBvbGRWYWx1ZSwKICAgICAgICBvcmlnaW5hbFZhbHVlOiB0aGlzLl9k
        YXRhW2tleV0sCiAgICAgICAgdmFsdWU6IHZhbHVlCiAgICAgIH0pOwoKICAg
        ICAgdGhpcy5fYXR0cmlidXRlc1trZXldID0gdmFsdWU7CiAgICAgIHJldHVy
        biB2YWx1ZTsKICAgIH0gZWxzZSBpZiAoaGFzVmFsdWUodGhpcywga2V5KSkg
        ewogICAgICByZXR1cm4gZ2V0VmFsdWUodGhpcywga2V5KTsKICAgIH0gZWxz
        ZSB7CiAgICAgIHJldHVybiBnZXREZWZhdWx0VmFsdWUodGhpcywgb3B0aW9u
        cywga2V5KTsKICAgIH0KCiAgLy8gYGRhdGFgIGlzIG5ldmVyIHNldCBkaXJl
        Y3RseS4gSG93ZXZlciwgaXQgbWF5IGJlCiAgLy8gaW52YWxpZGF0ZWQgZnJv
        bSB0aGUgc3RhdGUgbWFuYWdlcidzIHNldERhdGEKICAvLyBldmVudC4KICB9
        KS5wcm9wZXJ0eSgnZGF0YScpLm1ldGEobWV0YSk7Cn07CgoKfSkoKTsKCgoK
        KGZ1bmN0aW9uKCkgewovKioKICBAbW9kdWxlIGVtYmVyLWRhdGEKKi8KCn0p
        KCk7CgoKCihmdW5jdGlvbigpIHsKLyoqCiAgQG1vZHVsZSBlbWJlci1kYXRh
        CiovCgovKioKICBBbiBBdHRyaWJ1dGVDaGFuZ2Ugb2JqZWN0IGlzIGNyZWF0
        ZWQgd2hlbmV2ZXIgYSByZWNvcmQncwogIGF0dHJpYnV0ZSBjaGFuZ2VzIHZh
        bHVlLiBJdCBpcyB1c2VkIHRvIHRyYWNrIGNoYW5nZXMgdG8gYQogIHJlY29y
        ZCBiZXR3ZWVuIHRyYW5zYWN0aW9uIGNvbW1pdHMuCgogIEBjbGFzcyBBdHRy
        aWJ1dGVDaGFuZ2UKICBAbmFtZXNwYWNlIERTCiAgQHByaXZhdGUKICBAY29u
        c3RydWN0b3IKKi8KdmFyIEF0dHJpYnV0ZUNoYW5nZSA9IERTLkF0dHJpYnV0
        ZUNoYW5nZSA9IGZ1bmN0aW9uKG9wdGlvbnMpIHsKICB0aGlzLnJlY29yZCA9
        IG9wdGlvbnMucmVjb3JkOwogIHRoaXMuc3RvcmUgPSBvcHRpb25zLnN0b3Jl
        OwogIHRoaXMubmFtZSA9IG9wdGlvbnMubmFtZTsKICB0aGlzLnZhbHVlID0g
        b3B0aW9ucy52YWx1ZTsKICB0aGlzLm9sZFZhbHVlID0gb3B0aW9ucy5vbGRW
        YWx1ZTsKfTsKCkF0dHJpYnV0ZUNoYW5nZS5jcmVhdGVDaGFuZ2UgPSBmdW5j
        dGlvbihvcHRpb25zKSB7CiAgcmV0dXJuIG5ldyBBdHRyaWJ1dGVDaGFuZ2Uo
        b3B0aW9ucyk7Cn07CgpBdHRyaWJ1dGVDaGFuZ2UucHJvdG90eXBlID0gewog
        IHN5bmM6IGZ1bmN0aW9uKCkgewogICAgaWYgKHRoaXMudmFsdWUgIT09IHRo
        aXMub2xkVmFsdWUpIHsKICAgICAgdGhpcy5yZWNvcmQuc2VuZCgnYmVjb21l
        RGlydHknKTsKICAgICAgdGhpcy5yZWNvcmQudXBkYXRlUmVjb3JkQXJyYXlz
        TGF0ZXIoKTsKICAgIH0KCiAgICAvLyBUT0RPOiBVc2UgdGhpcyBvYmplY3Qg
        aW4gdGhlIGNvbW1pdCBwcm9jZXNzCiAgICB0aGlzLmRlc3Ryb3koKTsKICB9
        LAoKICAvKioKICAgIElmIHRoZSBBdHRyaWJ1dGVDaGFuZ2UgaXMgZGVzdHJv
        eWVkIChlaXRoZXIgYnkgYmVpbmcgcm9sbGVkIGJhY2sKICAgIG9yIGJlaW5n
        IGNvbW1pdHRlZCksIHJlbW92ZSBpdCBmcm9tIHRoZSBsaXN0IG9mIHBlbmRp
        bmcgY2hhbmdlcwogICAgb24gdGhlIHJlY29yZC4KCiAgICBAbWV0aG9kIGRl
        c3Ryb3kKICAqLwogIGRlc3Ryb3k6IGZ1bmN0aW9uKCkgewogICAgZGVsZXRl
        IHRoaXMucmVjb3JkLl9jaGFuZ2VzVG9TeW5jW3RoaXMubmFtZV07CiAgfQp9
        OwoKfSkoKTsKCgoKKGZ1bmN0aW9uKCkgewovKioKICBAbW9kdWxlIGVtYmVy
        LWRhdGEKKi8KCnZhciBnZXQgPSBFbWJlci5nZXQsIHNldCA9IEVtYmVyLnNl
        dDsKdmFyIGZvckVhY2ggPSBFbWJlci5FbnVtZXJhYmxlVXRpbHMuZm9yRWFj
        aDsKCi8qKgogIEBjbGFzcyBSZWxhdGlvbnNoaXBDaGFuZ2UKICBAbmFtZXNw
        YWNlIERTCiAgQHByaXZhdGUKICBAY29uc3RydWN0b3IKKi8KRFMuUmVsYXRp
        b25zaGlwQ2hhbmdlID0gZnVuY3Rpb24ob3B0aW9ucykgewogIHRoaXMucGFy
        ZW50UmVjb3JkID0gb3B0aW9ucy5wYXJlbnRSZWNvcmQ7CiAgdGhpcy5jaGls
        ZFJlY29yZCA9IG9wdGlvbnMuY2hpbGRSZWNvcmQ7CiAgdGhpcy5maXJzdFJl
        Y29yZCA9IG9wdGlvbnMuZmlyc3RSZWNvcmQ7CiAgdGhpcy5maXJzdFJlY29y
        ZEtpbmQgPSBvcHRpb25zLmZpcnN0UmVjb3JkS2luZDsKICB0aGlzLmZpcnN0
        UmVjb3JkTmFtZSA9IG9wdGlvbnMuZmlyc3RSZWNvcmROYW1lOwogIHRoaXMu
        c2Vjb25kUmVjb3JkID0gb3B0aW9ucy5zZWNvbmRSZWNvcmQ7CiAgdGhpcy5z
        ZWNvbmRSZWNvcmRLaW5kID0gb3B0aW9ucy5zZWNvbmRSZWNvcmRLaW5kOwog
        IHRoaXMuc2Vjb25kUmVjb3JkTmFtZSA9IG9wdGlvbnMuc2Vjb25kUmVjb3Jk
        TmFtZTsKICB0aGlzLmNoYW5nZVR5cGUgPSBvcHRpb25zLmNoYW5nZVR5cGU7
        CiAgdGhpcy5zdG9yZSA9IG9wdGlvbnMuc3RvcmU7CgogIHRoaXMuY29tbWl0
        dGVkID0ge307Cn07CgovKioKICBAY2xhc3MgUmVsYXRpb25zaGlwQ2hhbmdl
        QWRkCiAgQG5hbWVzcGFjZSBEUwogIEBwcml2YXRlCiAgQGNvbnN0cnVjdG9y
        CiovCkRTLlJlbGF0aW9uc2hpcENoYW5nZUFkZCA9IGZ1bmN0aW9uKG9wdGlv
        bnMpewogIERTLlJlbGF0aW9uc2hpcENoYW5nZS5jYWxsKHRoaXMsIG9wdGlv
        bnMpOwp9OwoKLyoqCiAgQGNsYXNzIFJlbGF0aW9uc2hpcENoYW5nZVJlbW92
        ZQogIEBuYW1lc3BhY2UgRFMKICBAcHJpdmF0ZQogIEBjb25zdHJ1Y3Rvcgoq
        LwpEUy5SZWxhdGlvbnNoaXBDaGFuZ2VSZW1vdmUgPSBmdW5jdGlvbihvcHRp
        b25zKXsKICBEUy5SZWxhdGlvbnNoaXBDaGFuZ2UuY2FsbCh0aGlzLCBvcHRp
        b25zKTsKfTsKCkRTLlJlbGF0aW9uc2hpcENoYW5nZS5jcmVhdGUgPSBmdW5j
        dGlvbihvcHRpb25zKSB7CiAgcmV0dXJuIG5ldyBEUy5SZWxhdGlvbnNoaXBD
        aGFuZ2Uob3B0aW9ucyk7Cn07CgpEUy5SZWxhdGlvbnNoaXBDaGFuZ2VBZGQu
        Y3JlYXRlID0gZnVuY3Rpb24ob3B0aW9ucykgewogIHJldHVybiBuZXcgRFMu
        UmVsYXRpb25zaGlwQ2hhbmdlQWRkKG9wdGlvbnMpOwp9OwoKRFMuUmVsYXRp
        b25zaGlwQ2hhbmdlUmVtb3ZlLmNyZWF0ZSA9IGZ1bmN0aW9uKG9wdGlvbnMp
        IHsKICByZXR1cm4gbmV3IERTLlJlbGF0aW9uc2hpcENoYW5nZVJlbW92ZShv
        cHRpb25zKTsKfTsKCkRTLk9uZVRvTWFueUNoYW5nZSA9IHt9OwpEUy5PbmVU
        b05vbmVDaGFuZ2UgPSB7fTsKRFMuTWFueVRvTm9uZUNoYW5nZSA9IHt9OwpE
        Uy5PbmVUb09uZUNoYW5nZSA9IHt9OwpEUy5NYW55VG9NYW55Q2hhbmdlID0g
        e307CgpEUy5SZWxhdGlvbnNoaXBDaGFuZ2UuX2NyZWF0ZUNoYW5nZSA9IGZ1
        bmN0aW9uKG9wdGlvbnMpewogIGlmKG9wdGlvbnMuY2hhbmdlVHlwZSA9PT0g
        ImFkZCIpewogICAgcmV0dXJuIERTLlJlbGF0aW9uc2hpcENoYW5nZUFkZC5j
        cmVhdGUob3B0aW9ucyk7CiAgfQogIGlmKG9wdGlvbnMuY2hhbmdlVHlwZSA9
        PT0gInJlbW92ZSIpewogICAgcmV0dXJuIERTLlJlbGF0aW9uc2hpcENoYW5n
        ZVJlbW92ZS5jcmVhdGUob3B0aW9ucyk7CiAgfQp9OwoKCkRTLlJlbGF0aW9u
        c2hpcENoYW5nZS5kZXRlcm1pbmVSZWxhdGlvbnNoaXBUeXBlID0gZnVuY3Rp
        b24ocmVjb3JkVHlwZSwga25vd25TaWRlKXsKICB2YXIga25vd25LZXkgPSBr
        bm93blNpZGUua2V5LCBrZXksIG90aGVyS2luZDsKICB2YXIga25vd25LaW5k
        ID0ga25vd25TaWRlLmtpbmQ7CgogIHZhciBpbnZlcnNlID0gcmVjb3JkVHlw
        ZS5pbnZlcnNlRm9yKGtub3duS2V5KTsKCiAgaWYgKGludmVyc2UpewogICAg
        a2V5ID0gaW52ZXJzZS5uYW1lOwogICAgb3RoZXJLaW5kID0gaW52ZXJzZS5r
        aW5kOwogIH0KCiAgaWYgKCFpbnZlcnNlKXsKICAgIHJldHVybiBrbm93bktp
        bmQgPT09ICJiZWxvbmdzVG8iID8gIm9uZVRvTm9uZSIgOiAibWFueVRvTm9u
        ZSI7CiAgfQogIGVsc2V7CiAgICBpZihvdGhlcktpbmQgPT09ICJiZWxvbmdz
        VG8iKXsKICAgICAgcmV0dXJuIGtub3duS2luZCA9PT0gImJlbG9uZ3NUbyIg
        PyAib25lVG9PbmUiIDogIm1hbnlUb09uZSI7CiAgICB9CiAgICBlbHNlewog
        ICAgICByZXR1cm4ga25vd25LaW5kID09PSAiYmVsb25nc1RvIiA/ICJvbmVU
        b01hbnkiIDogIm1hbnlUb01hbnkiOwogICAgfQogIH0KCn07CgpEUy5SZWxh
        dGlvbnNoaXBDaGFuZ2UuY3JlYXRlQ2hhbmdlID0gZnVuY3Rpb24oZmlyc3RS
        ZWNvcmQsIHNlY29uZFJlY29yZCwgc3RvcmUsIG9wdGlvbnMpewogIC8vIEdl
        dCB0aGUgdHlwZSBvZiB0aGUgY2hpbGQgYmFzZWQgb24gdGhlIGNoaWxkJ3Mg
        Y2xpZW50IElECiAgdmFyIGZpcnN0UmVjb3JkVHlwZSA9IGZpcnN0UmVjb3Jk
        LmNvbnN0cnVjdG9yLCBjaGFuZ2VUeXBlOwogIGNoYW5nZVR5cGUgPSBEUy5S
        ZWxhdGlvbnNoaXBDaGFuZ2UuZGV0ZXJtaW5lUmVsYXRpb25zaGlwVHlwZShm
        aXJzdFJlY29yZFR5cGUsIG9wdGlvbnMpOwogIGlmIChjaGFuZ2VUeXBlID09
        PSAib25lVG9NYW55Iil7CiAgICByZXR1cm4gRFMuT25lVG9NYW55Q2hhbmdl
        LmNyZWF0ZUNoYW5nZShmaXJzdFJlY29yZCwgc2Vjb25kUmVjb3JkLCBzdG9y
        ZSwgb3B0aW9ucyk7CiAgfQogIGVsc2UgaWYgKGNoYW5nZVR5cGUgPT09ICJt
        YW55VG9PbmUiKXsKICAgIHJldHVybiBEUy5PbmVUb01hbnlDaGFuZ2UuY3Jl
        YXRlQ2hhbmdlKHNlY29uZFJlY29yZCwgZmlyc3RSZWNvcmQsIHN0b3JlLCBv
        cHRpb25zKTsKICB9CiAgZWxzZSBpZiAoY2hhbmdlVHlwZSA9PT0gIm9uZVRv
        Tm9uZSIpewogICAgcmV0dXJuIERTLk9uZVRvTm9uZUNoYW5nZS5jcmVhdGVD
        aGFuZ2UoZmlyc3RSZWNvcmQsIHNlY29uZFJlY29yZCwgc3RvcmUsIG9wdGlv
        bnMpOwogIH0KICBlbHNlIGlmIChjaGFuZ2VUeXBlID09PSAibWFueVRvTm9u
        ZSIpewogICAgcmV0dXJuIERTLk1hbnlUb05vbmVDaGFuZ2UuY3JlYXRlQ2hh
        bmdlKGZpcnN0UmVjb3JkLCBzZWNvbmRSZWNvcmQsIHN0b3JlLCBvcHRpb25z
        KTsKICB9CiAgZWxzZSBpZiAoY2hhbmdlVHlwZSA9PT0gIm9uZVRvT25lIil7
        CiAgICByZXR1cm4gRFMuT25lVG9PbmVDaGFuZ2UuY3JlYXRlQ2hhbmdlKGZp
        cnN0UmVjb3JkLCBzZWNvbmRSZWNvcmQsIHN0b3JlLCBvcHRpb25zKTsKICB9
        CiAgZWxzZSBpZiAoY2hhbmdlVHlwZSA9PT0gIm1hbnlUb01hbnkiKXsKICAg
        IHJldHVybiBEUy5NYW55VG9NYW55Q2hhbmdlLmNyZWF0ZUNoYW5nZShmaXJz
        dFJlY29yZCwgc2Vjb25kUmVjb3JkLCBzdG9yZSwgb3B0aW9ucyk7CiAgfQp9
        OwoKRFMuT25lVG9Ob25lQ2hhbmdlLmNyZWF0ZUNoYW5nZSA9IGZ1bmN0aW9u
        KGNoaWxkUmVjb3JkLCBwYXJlbnRSZWNvcmQsIHN0b3JlLCBvcHRpb25zKSB7
        CiAgdmFyIGtleSA9IG9wdGlvbnMua2V5OwogIHZhciBjaGFuZ2UgPSBEUy5S
        ZWxhdGlvbnNoaXBDaGFuZ2UuX2NyZWF0ZUNoYW5nZSh7CiAgICAgIHBhcmVu
        dFJlY29yZDogcGFyZW50UmVjb3JkLAogICAgICBjaGlsZFJlY29yZDogY2hp
        bGRSZWNvcmQsCiAgICAgIGZpcnN0UmVjb3JkOiBjaGlsZFJlY29yZCwKICAg
        ICAgc3RvcmU6IHN0b3JlLAogICAgICBjaGFuZ2VUeXBlOiBvcHRpb25zLmNo
        YW5nZVR5cGUsCiAgICAgIGZpcnN0UmVjb3JkTmFtZToga2V5LAogICAgICBm
        aXJzdFJlY29yZEtpbmQ6ICJiZWxvbmdzVG8iCiAgfSk7CgogIHN0b3JlLmFk
        ZFJlbGF0aW9uc2hpcENoYW5nZUZvcihjaGlsZFJlY29yZCwga2V5LCBwYXJl
        bnRSZWNvcmQsIG51bGwsIGNoYW5nZSk7CgogIHJldHVybiBjaGFuZ2U7Cn07
        CgpEUy5NYW55VG9Ob25lQ2hhbmdlLmNyZWF0ZUNoYW5nZSA9IGZ1bmN0aW9u
        KGNoaWxkUmVjb3JkLCBwYXJlbnRSZWNvcmQsIHN0b3JlLCBvcHRpb25zKSB7
        CiAgdmFyIGtleSA9IG9wdGlvbnMua2V5OwogIHZhciBjaGFuZ2UgPSBEUy5S
        ZWxhdGlvbnNoaXBDaGFuZ2UuX2NyZWF0ZUNoYW5nZSh7CiAgICAgIHBhcmVu
        dFJlY29yZDogY2hpbGRSZWNvcmQsCiAgICAgIGNoaWxkUmVjb3JkOiBwYXJl
        bnRSZWNvcmQsCiAgICAgIHNlY29uZFJlY29yZDogY2hpbGRSZWNvcmQsCiAg
        ICAgIHN0b3JlOiBzdG9yZSwKICAgICAgY2hhbmdlVHlwZTogb3B0aW9ucy5j
        aGFuZ2VUeXBlLAogICAgICBzZWNvbmRSZWNvcmROYW1lOiBvcHRpb25zLmtl
        eSwKICAgICAgc2Vjb25kUmVjb3JkS2luZDogImhhc01hbnkiCiAgfSk7Cgog
        IHN0b3JlLmFkZFJlbGF0aW9uc2hpcENoYW5nZUZvcihjaGlsZFJlY29yZCwg
        a2V5LCBwYXJlbnRSZWNvcmQsIG51bGwsIGNoYW5nZSk7CiAgcmV0dXJuIGNo
        YW5nZTsKfTsKCgpEUy5NYW55VG9NYW55Q2hhbmdlLmNyZWF0ZUNoYW5nZSA9
        IGZ1bmN0aW9uKGNoaWxkUmVjb3JkLCBwYXJlbnRSZWNvcmQsIHN0b3JlLCBv
        cHRpb25zKSB7CiAgLy8gSWYgdGhlIG5hbWUgb2YgdGhlIGJlbG9uZ3NUbyBz
        aWRlIG9mIHRoZSByZWxhdGlvbnNoaXAgaXMgc3BlY2lmaWVkLAogIC8vIHVz
        ZSB0aGF0CiAgLy8gSWYgdGhlIHR5cGUgb2YgdGhlIHBhcmVudCBpcyBzcGVj
        aWZpZWQsIGxvb2sgaXQgdXAgb24gdGhlIGNoaWxkJ3MgdHlwZQogIC8vIGRl
        ZmluaXRpb24uCiAgdmFyIGtleSA9IG9wdGlvbnMua2V5OwoKICB2YXIgY2hh
        bmdlID0gRFMuUmVsYXRpb25zaGlwQ2hhbmdlLl9jcmVhdGVDaGFuZ2Uoewog
        ICAgICBwYXJlbnRSZWNvcmQ6IHBhcmVudFJlY29yZCwKICAgICAgY2hpbGRS
        ZWNvcmQ6IGNoaWxkUmVjb3JkLAogICAgICBmaXJzdFJlY29yZDogY2hpbGRS
        ZWNvcmQsCiAgICAgIHNlY29uZFJlY29yZDogcGFyZW50UmVjb3JkLAogICAg
        ICBmaXJzdFJlY29yZEtpbmQ6ICJoYXNNYW55IiwKICAgICAgc2Vjb25kUmVj
        b3JkS2luZDogImhhc01hbnkiLAogICAgICBzdG9yZTogc3RvcmUsCiAgICAg
        IGNoYW5nZVR5cGU6IG9wdGlvbnMuY2hhbmdlVHlwZSwKICAgICAgZmlyc3RS
        ZWNvcmROYW1lOiAga2V5CiAgfSk7CgogIHN0b3JlLmFkZFJlbGF0aW9uc2hp
        cENoYW5nZUZvcihjaGlsZFJlY29yZCwga2V5LCBwYXJlbnRSZWNvcmQsIG51
        bGwsIGNoYW5nZSk7CgoKICByZXR1cm4gY2hhbmdlOwp9OwoKRFMuT25lVG9P
        bmVDaGFuZ2UuY3JlYXRlQ2hhbmdlID0gZnVuY3Rpb24oY2hpbGRSZWNvcmQs
        IHBhcmVudFJlY29yZCwgc3RvcmUsIG9wdGlvbnMpIHsKICB2YXIga2V5OwoK
        ICAvLyBJZiB0aGUgbmFtZSBvZiB0aGUgYmVsb25nc1RvIHNpZGUgb2YgdGhl
        IHJlbGF0aW9uc2hpcCBpcyBzcGVjaWZpZWQsCiAgLy8gdXNlIHRoYXQKICAv
        LyBJZiB0aGUgdHlwZSBvZiB0aGUgcGFyZW50IGlzIHNwZWNpZmllZCwgbG9v
        ayBpdCB1cCBvbiB0aGUgY2hpbGQncyB0eXBlCiAgLy8gZGVmaW5pdGlvbi4K
        ICBpZiAob3B0aW9ucy5wYXJlbnRUeXBlKSB7CiAgICBrZXkgPSBvcHRpb25z
        LnBhcmVudFR5cGUuaW52ZXJzZUZvcihvcHRpb25zLmtleSkubmFtZTsKICB9
        IGVsc2UgaWYgKG9wdGlvbnMua2V5KSB7CiAgICBrZXkgPSBvcHRpb25zLmtl
        eTsKICB9IGVsc2UgewogICAgRW1iZXIuYXNzZXJ0KCJZb3UgbXVzdCBwYXNz
        IGVpdGhlciBhIHBhcmVudFR5cGUgb3IgYmVsb25nc1RvTmFtZSBvcHRpb24g
        dG8gT25lVG9NYW55Q2hhbmdlLmZvckNoaWxkQW5kUGFyZW50IiwgZmFsc2Up
        OwogIH0KCiAgdmFyIGNoYW5nZSA9IERTLlJlbGF0aW9uc2hpcENoYW5nZS5f
        Y3JlYXRlQ2hhbmdlKHsKICAgICAgcGFyZW50UmVjb3JkOiBwYXJlbnRSZWNv
        cmQsCiAgICAgIGNoaWxkUmVjb3JkOiBjaGlsZFJlY29yZCwKICAgICAgZmly
        c3RSZWNvcmQ6IGNoaWxkUmVjb3JkLAogICAgICBzZWNvbmRSZWNvcmQ6IHBh
        cmVudFJlY29yZCwKICAgICAgZmlyc3RSZWNvcmRLaW5kOiAiYmVsb25nc1Rv
        IiwKICAgICAgc2Vjb25kUmVjb3JkS2luZDogImJlbG9uZ3NUbyIsCiAgICAg
        IHN0b3JlOiBzdG9yZSwKICAgICAgY2hhbmdlVHlwZTogb3B0aW9ucy5jaGFu
        Z2VUeXBlLAogICAgICBmaXJzdFJlY29yZE5hbWU6ICBrZXkKICB9KTsKCiAg
        c3RvcmUuYWRkUmVsYXRpb25zaGlwQ2hhbmdlRm9yKGNoaWxkUmVjb3JkLCBr
        ZXksIHBhcmVudFJlY29yZCwgbnVsbCwgY2hhbmdlKTsKCgogIHJldHVybiBj
        aGFuZ2U7Cn07CgpEUy5PbmVUb09uZUNoYW5nZS5tYWludGFpbkludmFyaWFu
        dCA9IGZ1bmN0aW9uKG9wdGlvbnMsIHN0b3JlLCBjaGlsZFJlY29yZCwga2V5
        KXsKICBpZiAob3B0aW9ucy5jaGFuZ2VUeXBlID09PSAiYWRkIiAmJiBzdG9y
        ZS5yZWNvcmRJc01hdGVyaWFsaXplZChjaGlsZFJlY29yZCkpIHsKICAgIHZh
        ciBvbGRQYXJlbnQgPSBnZXQoY2hpbGRSZWNvcmQsIGtleSk7CiAgICBpZiAo
        b2xkUGFyZW50KXsKICAgICAgdmFyIGNvcnJlc3BvbmRpbmdDaGFuZ2UgPSBE
        Uy5PbmVUb09uZUNoYW5nZS5jcmVhdGVDaGFuZ2UoY2hpbGRSZWNvcmQsIG9s
        ZFBhcmVudCwgc3RvcmUsIHsKICAgICAgICAgIHBhcmVudFR5cGU6IG9wdGlv
        bnMucGFyZW50VHlwZSwKICAgICAgICAgIGhhc01hbnlOYW1lOiBvcHRpb25z
        Lmhhc01hbnlOYW1lLAogICAgICAgICAgY2hhbmdlVHlwZTogInJlbW92ZSIs
        CiAgICAgICAgICBrZXk6IG9wdGlvbnMua2V5CiAgICAgICAgfSk7CiAgICAg
        IHN0b3JlLmFkZFJlbGF0aW9uc2hpcENoYW5nZUZvcihjaGlsZFJlY29yZCwg
        a2V5LCBvcHRpb25zLnBhcmVudFJlY29yZCAsIG51bGwsIGNvcnJlc3BvbmRp
        bmdDaGFuZ2UpOwogICAgIGNvcnJlc3BvbmRpbmdDaGFuZ2Uuc3luYygpOwog
        ICAgfQogIH0KfTsKCkRTLk9uZVRvTWFueUNoYW5nZS5jcmVhdGVDaGFuZ2Ug
        PSBmdW5jdGlvbihjaGlsZFJlY29yZCwgcGFyZW50UmVjb3JkLCBzdG9yZSwg
        b3B0aW9ucykgewogIHZhciBrZXk7CgogIC8vIElmIHRoZSBuYW1lIG9mIHRo
        ZSBiZWxvbmdzVG8gc2lkZSBvZiB0aGUgcmVsYXRpb25zaGlwIGlzIHNwZWNp
        ZmllZCwKICAvLyB1c2UgdGhhdAogIC8vIElmIHRoZSB0eXBlIG9mIHRoZSBw
        YXJlbnQgaXMgc3BlY2lmaWVkLCBsb29rIGl0IHVwIG9uIHRoZSBjaGlsZCdz
        IHR5cGUKICAvLyBkZWZpbml0aW9uLgogIGlmIChvcHRpb25zLnBhcmVudFR5
        cGUpIHsKICAgIGtleSA9IG9wdGlvbnMucGFyZW50VHlwZS5pbnZlcnNlRm9y
        KG9wdGlvbnMua2V5KS5uYW1lOwogICAgRFMuT25lVG9NYW55Q2hhbmdlLm1h
        aW50YWluSW52YXJpYW50KCBvcHRpb25zLCBzdG9yZSwgY2hpbGRSZWNvcmQs
        IGtleSApOwogIH0gZWxzZSBpZiAob3B0aW9ucy5rZXkpIHsKICAgIGtleSA9
        IG9wdGlvbnMua2V5OwogIH0gZWxzZSB7CiAgICBFbWJlci5hc3NlcnQoIllv
        dSBtdXN0IHBhc3MgZWl0aGVyIGEgcGFyZW50VHlwZSBvciBiZWxvbmdzVG9O
        YW1lIG9wdGlvbiB0byBPbmVUb01hbnlDaGFuZ2UuZm9yQ2hpbGRBbmRQYXJl
        bnQiLCBmYWxzZSk7CiAgfQoKICB2YXIgY2hhbmdlID0gRFMuUmVsYXRpb25z
        aGlwQ2hhbmdlLl9jcmVhdGVDaGFuZ2UoewogICAgICBwYXJlbnRSZWNvcmQ6
        IHBhcmVudFJlY29yZCwKICAgICAgY2hpbGRSZWNvcmQ6IGNoaWxkUmVjb3Jk
        LAogICAgICBmaXJzdFJlY29yZDogY2hpbGRSZWNvcmQsCiAgICAgIHNlY29u
        ZFJlY29yZDogcGFyZW50UmVjb3JkLAogICAgICBmaXJzdFJlY29yZEtpbmQ6
        ICJiZWxvbmdzVG8iLAogICAgICBzZWNvbmRSZWNvcmRLaW5kOiAiaGFzTWFu
        eSIsCiAgICAgIHN0b3JlOiBzdG9yZSwKICAgICAgY2hhbmdlVHlwZTogb3B0
        aW9ucy5jaGFuZ2VUeXBlLAogICAgICBmaXJzdFJlY29yZE5hbWU6ICBrZXkK
        ICB9KTsKCiAgc3RvcmUuYWRkUmVsYXRpb25zaGlwQ2hhbmdlRm9yKGNoaWxk
        UmVjb3JkLCBrZXksIHBhcmVudFJlY29yZCwgY2hhbmdlLmdldFNlY29uZFJl
        Y29yZE5hbWUoKSwgY2hhbmdlKTsKCgogIHJldHVybiBjaGFuZ2U7Cn07CgoK
        RFMuT25lVG9NYW55Q2hhbmdlLm1haW50YWluSW52YXJpYW50ID0gZnVuY3Rp
        b24ob3B0aW9ucywgc3RvcmUsIGNoaWxkUmVjb3JkLCBrZXkpewogIGlmIChv
        cHRpb25zLmNoYW5nZVR5cGUgPT09ICJhZGQiICYmIGNoaWxkUmVjb3JkKSB7
        CiAgICB2YXIgb2xkUGFyZW50ID0gZ2V0KGNoaWxkUmVjb3JkLCBrZXkpOwog
        ICAgaWYgKG9sZFBhcmVudCl7CiAgICAgIHZhciBjb3JyZXNwb25kaW5nQ2hh
        bmdlID0gRFMuT25lVG9NYW55Q2hhbmdlLmNyZWF0ZUNoYW5nZShjaGlsZFJl
        Y29yZCwgb2xkUGFyZW50LCBzdG9yZSwgewogICAgICAgICAgcGFyZW50VHlw
        ZTogb3B0aW9ucy5wYXJlbnRUeXBlLAogICAgICAgICAgaGFzTWFueU5hbWU6
        IG9wdGlvbnMuaGFzTWFueU5hbWUsCiAgICAgICAgICBjaGFuZ2VUeXBlOiAi
        cmVtb3ZlIiwKICAgICAgICAgIGtleTogb3B0aW9ucy5rZXkKICAgICAgICB9
        KTsKICAgICAgc3RvcmUuYWRkUmVsYXRpb25zaGlwQ2hhbmdlRm9yKGNoaWxk
        UmVjb3JkLCBrZXksIG9wdGlvbnMucGFyZW50UmVjb3JkLCBjb3JyZXNwb25k
        aW5nQ2hhbmdlLmdldFNlY29uZFJlY29yZE5hbWUoKSwgY29ycmVzcG9uZGlu
        Z0NoYW5nZSk7CiAgICAgIGNvcnJlc3BvbmRpbmdDaGFuZ2Uuc3luYygpOwog
        ICAgfQogIH0KfTsKCi8qKgogIEBjbGFzcyBSZWxhdGlvbnNoaXBDaGFuZ2UK
        ICBAbmFtZXNwYWNlIERTCiovCkRTLlJlbGF0aW9uc2hpcENoYW5nZS5wcm90
        b3R5cGUgPSB7CgogIGdldFNlY29uZFJlY29yZE5hbWU6IGZ1bmN0aW9uKCkg
        ewogICAgdmFyIG5hbWUgPSB0aGlzLnNlY29uZFJlY29yZE5hbWUsIHBhcmVu
        dDsKCiAgICBpZiAoIW5hbWUpIHsKICAgICAgcGFyZW50ID0gdGhpcy5zZWNv
        bmRSZWNvcmQ7CiAgICAgIGlmICghcGFyZW50KSB7IHJldHVybjsgfQoKICAg
        ICAgdmFyIGNoaWxkVHlwZSA9IHRoaXMuZmlyc3RSZWNvcmQuY29uc3RydWN0
        b3I7CiAgICAgIHZhciBpbnZlcnNlID0gY2hpbGRUeXBlLmludmVyc2VGb3Io
        dGhpcy5maXJzdFJlY29yZE5hbWUpOwogICAgICB0aGlzLnNlY29uZFJlY29y
        ZE5hbWUgPSBpbnZlcnNlLm5hbWU7CiAgICB9CgogICAgcmV0dXJuIHRoaXMu
        c2Vjb25kUmVjb3JkTmFtZTsKICB9LAoKICAvKioKICAgIEdldCB0aGUgbmFt
        ZSBvZiB0aGUgcmVsYXRpb25zaGlwIG9uIHRoZSBiZWxvbmdzVG8gc2lkZS4K
        CiAgICBAbWV0aG9kIGdldEZpcnN0UmVjb3JkTmFtZQogICAgQHJldHVybiB7
        U3RyaW5nfQogICovCiAgZ2V0Rmlyc3RSZWNvcmROYW1lOiBmdW5jdGlvbigp
        IHsKICAgIHZhciBuYW1lID0gdGhpcy5maXJzdFJlY29yZE5hbWU7CiAgICBy
        ZXR1cm4gbmFtZTsKICB9LAoKICAvKioKICAgIEBtZXRob2QgZGVzdHJveQog
        ICAgQHByaXZhdGUKICAqLwogIGRlc3Ryb3k6IGZ1bmN0aW9uKCkgewogICAg
        dmFyIGNoaWxkUmVjb3JkID0gdGhpcy5jaGlsZFJlY29yZCwKICAgICAgICBi
        ZWxvbmdzVG9OYW1lID0gdGhpcy5nZXRGaXJzdFJlY29yZE5hbWUoKSwKICAg
        ICAgICBoYXNNYW55TmFtZSA9IHRoaXMuZ2V0U2Vjb25kUmVjb3JkTmFtZSgp
        LAogICAgICAgIHN0b3JlID0gdGhpcy5zdG9yZTsKCiAgICBzdG9yZS5yZW1v
        dmVSZWxhdGlvbnNoaXBDaGFuZ2VGb3IoY2hpbGRSZWNvcmQsIGJlbG9uZ3NU
        b05hbWUsIHRoaXMucGFyZW50UmVjb3JkLCBoYXNNYW55TmFtZSwgdGhpcy5j
        aGFuZ2VUeXBlKTsKICB9LAoKICBnZXRTZWNvbmRSZWNvcmQ6IGZ1bmN0aW9u
        KCl7CiAgICByZXR1cm4gdGhpcy5zZWNvbmRSZWNvcmQ7CiAgfSwKCiAgLyoq
        CiAgICBAbWV0aG9kIGdldEZpcnN0UmVjb3JkCiAgICBAcHJpdmF0ZQogICov
        CiAgZ2V0Rmlyc3RSZWNvcmQ6IGZ1bmN0aW9uKCkgewogICAgcmV0dXJuIHRo
        aXMuZmlyc3RSZWNvcmQ7CiAgfSwKCiAgY29hbGVzY2U6IGZ1bmN0aW9uKCl7
        CiAgICB2YXIgcmVsYXRpb25zaGlwUGFpcnMgPSB0aGlzLnN0b3JlLnJlbGF0
        aW9uc2hpcENoYW5nZVBhaXJzRm9yKHRoaXMuZmlyc3RSZWNvcmQpOwogICAg
        Zm9yRWFjaChyZWxhdGlvbnNoaXBQYWlycywgZnVuY3Rpb24ocGFpcil7CiAg
        ICAgIHZhciBhZGRlZENoYW5nZSA9IHBhaXJbImFkZCJdOwogICAgICB2YXIg
        cmVtb3ZlZENoYW5nZSA9IHBhaXJbInJlbW92ZSJdOwogICAgICBpZihhZGRl
        ZENoYW5nZSAmJiByZW1vdmVkQ2hhbmdlKSB7CiAgICAgICAgYWRkZWRDaGFu
        Z2UuZGVzdHJveSgpOwogICAgICAgIHJlbW92ZWRDaGFuZ2UuZGVzdHJveSgp
        OwogICAgICB9CiAgICB9KTsKICB9Cn07CgpEUy5SZWxhdGlvbnNoaXBDaGFu
        Z2VBZGQucHJvdG90eXBlID0gRW1iZXIuY3JlYXRlKERTLlJlbGF0aW9uc2hp
        cENoYW5nZS5jcmVhdGUoe30pKTsKRFMuUmVsYXRpb25zaGlwQ2hhbmdlUmVt
        b3ZlLnByb3RvdHlwZSA9IEVtYmVyLmNyZWF0ZShEUy5SZWxhdGlvbnNoaXBD
        aGFuZ2UuY3JlYXRlKHt9KSk7CgovLyB0aGUgb2JqZWN0IGlzIGEgdmFsdWUs
        IGFuZCBub3QgYSBwcm9taXNlCmZ1bmN0aW9uIGlzVmFsdWUob2JqZWN0KSB7
        CiAgcmV0dXJuIHR5cGVvZiBvYmplY3QgPT09ICdvYmplY3QnICYmICghb2Jq
        ZWN0LnRoZW4gfHwgdHlwZW9mIG9iamVjdC50aGVuICE9PSAnZnVuY3Rpb24n
        KTsKfQoKRFMuUmVsYXRpb25zaGlwQ2hhbmdlQWRkLnByb3RvdHlwZS5jaGFu
        Z2VUeXBlID0gImFkZCI7CkRTLlJlbGF0aW9uc2hpcENoYW5nZUFkZC5wcm90
        b3R5cGUuc3luYyA9IGZ1bmN0aW9uKCkgewogIHZhciBzZWNvbmRSZWNvcmRO
        YW1lID0gdGhpcy5nZXRTZWNvbmRSZWNvcmROYW1lKCksCiAgICAgIGZpcnN0
        UmVjb3JkTmFtZSA9IHRoaXMuZ2V0Rmlyc3RSZWNvcmROYW1lKCksCiAgICAg
        IGZpcnN0UmVjb3JkID0gdGhpcy5nZXRGaXJzdFJlY29yZCgpLAogICAgICBz
        ZWNvbmRSZWNvcmQgPSB0aGlzLmdldFNlY29uZFJlY29yZCgpOwoKICAvL0Vt
        YmVyLmFzc2VydCgiWW91IHNwZWNpZmllZCBhIGhhc01hbnkgKCIgKyBoYXNN
        YW55TmFtZSArICIpIG9uICIgKyAoIWJlbG9uZ3NUb05hbWUgJiYgKG5ld1Bh
        cmVudCB8fCBvbGRQYXJlbnQgfHwgdGhpcy5sYXN0UGFyZW50KS5jb25zdHJ1
        Y3RvcikgKyAiIGJ1dCBkaWQgbm90IHNwZWNpZnkgYW4gaW52ZXJzZSBiZWxv
        bmdzVG8gb24gIiArIGNoaWxkLmNvbnN0cnVjdG9yLCBiZWxvbmdzVG9OYW1l
        KTsKICAvL0VtYmVyLmFzc2VydCgiWW91IHNwZWNpZmllZCBhIGJlbG9uZ3NU
        byAoIiArIGJlbG9uZ3NUb05hbWUgKyAiKSBvbiAiICsgY2hpbGQuY29uc3Ry
        dWN0b3IgKyAiIGJ1dCBkaWQgbm90IHNwZWNpZnkgYW4gaW52ZXJzZSBoYXNN
        YW55IG9uICIgKyAoIWhhc01hbnlOYW1lICYmIChuZXdQYXJlbnQgfHwgb2xk
        UGFyZW50IHx8IHRoaXMubGFzdFBhcmVudFJlY29yZCkuY29uc3RydWN0b3Ip
        LCBoYXNNYW55TmFtZSk7CgogIGlmIChzZWNvbmRSZWNvcmQgaW5zdGFuY2Vv
        ZiBEUy5Nb2RlbCAmJiBmaXJzdFJlY29yZCBpbnN0YW5jZW9mIERTLk1vZGVs
        KSB7CiAgICBpZih0aGlzLnNlY29uZFJlY29yZEtpbmQgPT09ICJiZWxvbmdz
        VG8iKXsKICAgICAgc2Vjb25kUmVjb3JkLnN1c3BlbmRSZWxhdGlvbnNoaXBP
        YnNlcnZlcnMoZnVuY3Rpb24oKXsKICAgICAgICBzZXQoc2Vjb25kUmVjb3Jk
        LCBzZWNvbmRSZWNvcmROYW1lLCBmaXJzdFJlY29yZCk7CiAgICAgIH0pOwoK
        ICAgICB9CiAgICAgZWxzZSBpZih0aGlzLnNlY29uZFJlY29yZEtpbmQgPT09
        ICJoYXNNYW55Iil7CiAgICAgIHNlY29uZFJlY29yZC5zdXNwZW5kUmVsYXRp
        b25zaGlwT2JzZXJ2ZXJzKGZ1bmN0aW9uKCl7CiAgICAgICAgdmFyIHJlbGF0
        aW9uc2hpcCA9IGdldChzZWNvbmRSZWNvcmQsIHNlY29uZFJlY29yZE5hbWUp
        OwogICAgICAgIGlmIChpc1ZhbHVlKHJlbGF0aW9uc2hpcCkpIHsgcmVsYXRp
        b25zaGlwLmFkZE9iamVjdChmaXJzdFJlY29yZCk7IH0KICAgICAgfSk7CiAg
        ICB9CiAgfQoKICBpZiAoZmlyc3RSZWNvcmQgaW5zdGFuY2VvZiBEUy5Nb2Rl
        bCAmJiBzZWNvbmRSZWNvcmQgaW5zdGFuY2VvZiBEUy5Nb2RlbCAmJiBnZXQo
        Zmlyc3RSZWNvcmQsIGZpcnN0UmVjb3JkTmFtZSkgIT09IHNlY29uZFJlY29y
        ZCkgewogICAgaWYodGhpcy5maXJzdFJlY29yZEtpbmQgPT09ICJiZWxvbmdz
        VG8iKXsKICAgICAgZmlyc3RSZWNvcmQuc3VzcGVuZFJlbGF0aW9uc2hpcE9i
        c2VydmVycyhmdW5jdGlvbigpewogICAgICAgIHNldChmaXJzdFJlY29yZCwg
        Zmlyc3RSZWNvcmROYW1lLCBzZWNvbmRSZWNvcmQpOwogICAgICB9KTsKICAg
        IH0KICAgIGVsc2UgaWYodGhpcy5maXJzdFJlY29yZEtpbmQgPT09ICJoYXNN
        YW55Iil7CiAgICAgIGZpcnN0UmVjb3JkLnN1c3BlbmRSZWxhdGlvbnNoaXBP
        YnNlcnZlcnMoZnVuY3Rpb24oKXsKICAgICAgICB2YXIgcmVsYXRpb25zaGlw
        ID0gZ2V0KGZpcnN0UmVjb3JkLCBmaXJzdFJlY29yZE5hbWUpOwogICAgICAg
        IGlmIChpc1ZhbHVlKHJlbGF0aW9uc2hpcCkpIHsgcmVsYXRpb25zaGlwLmFk
        ZE9iamVjdChzZWNvbmRSZWNvcmQpOyB9CiAgICAgIH0pOwogICAgfQogIH0K
        CiAgdGhpcy5jb2FsZXNjZSgpOwp9OwoKRFMuUmVsYXRpb25zaGlwQ2hhbmdl
        UmVtb3ZlLnByb3RvdHlwZS5jaGFuZ2VUeXBlID0gInJlbW92ZSI7CkRTLlJl
        bGF0aW9uc2hpcENoYW5nZVJlbW92ZS5wcm90b3R5cGUuc3luYyA9IGZ1bmN0
        aW9uKCkgewogIHZhciBzZWNvbmRSZWNvcmROYW1lID0gdGhpcy5nZXRTZWNv
        bmRSZWNvcmROYW1lKCksCiAgICAgIGZpcnN0UmVjb3JkTmFtZSA9IHRoaXMu
        Z2V0Rmlyc3RSZWNvcmROYW1lKCksCiAgICAgIGZpcnN0UmVjb3JkID0gdGhp
        cy5nZXRGaXJzdFJlY29yZCgpLAogICAgICBzZWNvbmRSZWNvcmQgPSB0aGlz
        LmdldFNlY29uZFJlY29yZCgpOwoKICAvL0VtYmVyLmFzc2VydCgiWW91IHNw
        ZWNpZmllZCBhIGhhc01hbnkgKCIgKyBoYXNNYW55TmFtZSArICIpIG9uICIg
        KyAoIWJlbG9uZ3NUb05hbWUgJiYgKG5ld1BhcmVudCB8fCBvbGRQYXJlbnQg
        fHwgdGhpcy5sYXN0UGFyZW50KS5jb25zdHJ1Y3RvcikgKyAiIGJ1dCBkaWQg
        bm90IHNwZWNpZnkgYW4gaW52ZXJzZSBiZWxvbmdzVG8gb24gIiArIGNoaWxk
        LmNvbnN0cnVjdG9yLCBiZWxvbmdzVG9OYW1lKTsKICAvL0VtYmVyLmFzc2Vy
        dCgiWW91IHNwZWNpZmllZCBhIGJlbG9uZ3NUbyAoIiArIGJlbG9uZ3NUb05h
        bWUgKyAiKSBvbiAiICsgY2hpbGQuY29uc3RydWN0b3IgKyAiIGJ1dCBkaWQg
        bm90IHNwZWNpZnkgYW4gaW52ZXJzZSBoYXNNYW55IG9uICIgKyAoIWhhc01h
        bnlOYW1lICYmIChuZXdQYXJlbnQgfHwgb2xkUGFyZW50IHx8IHRoaXMubGFz
        dFBhcmVudFJlY29yZCkuY29uc3RydWN0b3IpLCBoYXNNYW55TmFtZSk7Cgog
        IGlmIChzZWNvbmRSZWNvcmQgaW5zdGFuY2VvZiBEUy5Nb2RlbCAmJiBmaXJz
        dFJlY29yZCBpbnN0YW5jZW9mIERTLk1vZGVsKSB7CiAgICBpZih0aGlzLnNl
        Y29uZFJlY29yZEtpbmQgPT09ICJiZWxvbmdzVG8iKXsKICAgICAgc2Vjb25k
        UmVjb3JkLnN1c3BlbmRSZWxhdGlvbnNoaXBPYnNlcnZlcnMoZnVuY3Rpb24o
        KXsKICAgICAgICBzZXQoc2Vjb25kUmVjb3JkLCBzZWNvbmRSZWNvcmROYW1l
        LCBudWxsKTsKICAgICAgfSk7CiAgICB9CiAgICBlbHNlIGlmKHRoaXMuc2Vj
        b25kUmVjb3JkS2luZCA9PT0gImhhc01hbnkiKXsKICAgICAgc2Vjb25kUmVj
        b3JkLnN1c3BlbmRSZWxhdGlvbnNoaXBPYnNlcnZlcnMoZnVuY3Rpb24oKXsK
        ICAgICAgICB2YXIgcmVsYXRpb25zaGlwID0gZ2V0KHNlY29uZFJlY29yZCwg
        c2Vjb25kUmVjb3JkTmFtZSk7CiAgICAgICAgaWYgKGlzVmFsdWUocmVsYXRp
        b25zaGlwKSkgeyByZWxhdGlvbnNoaXAucmVtb3ZlT2JqZWN0KGZpcnN0UmVj
        b3JkKTsgfQogICAgICB9KTsKICAgIH0KICB9CgogIGlmIChmaXJzdFJlY29y
        ZCBpbnN0YW5jZW9mIERTLk1vZGVsICYmIGdldChmaXJzdFJlY29yZCwgZmly
        c3RSZWNvcmROYW1lKSkgewogICAgaWYodGhpcy5maXJzdFJlY29yZEtpbmQg
        PT09ICJiZWxvbmdzVG8iKXsKICAgICAgZmlyc3RSZWNvcmQuc3VzcGVuZFJl
        bGF0aW9uc2hpcE9ic2VydmVycyhmdW5jdGlvbigpewogICAgICAgIHNldChm
        aXJzdFJlY29yZCwgZmlyc3RSZWNvcmROYW1lLCBudWxsKTsKICAgICAgfSk7
        CiAgICAgfQogICAgIGVsc2UgaWYodGhpcy5maXJzdFJlY29yZEtpbmQgPT09
        ICJoYXNNYW55Iil7CiAgICAgICBmaXJzdFJlY29yZC5zdXNwZW5kUmVsYXRp
        b25zaGlwT2JzZXJ2ZXJzKGZ1bmN0aW9uKCl7CiAgICAgICAgIHZhciByZWxh
        dGlvbnNoaXAgPSBnZXQoZmlyc3RSZWNvcmQsIGZpcnN0UmVjb3JkTmFtZSk7
        CiAgICAgICAgIGlmIChpc1ZhbHVlKHJlbGF0aW9uc2hpcCkpIHsgcmVsYXRp
        b25zaGlwLnJlbW92ZU9iamVjdChzZWNvbmRSZWNvcmQpOyB9CiAgICAgIH0p
        OwogICAgfQogIH0KCiAgdGhpcy5jb2FsZXNjZSgpOwp9OwoKfSkoKTsKCgoK
        KGZ1bmN0aW9uKCkgewovKioKICBAbW9kdWxlIGVtYmVyLWRhdGEKKi8KCn0p
        KCk7CgoKCihmdW5jdGlvbigpIHsKdmFyIGdldCA9IEVtYmVyLmdldCwgc2V0
        ID0gRW1iZXIuc2V0LAogICAgaXNOb25lID0gRW1iZXIuaXNOb25lOwoKLyoq
        CiAgQG1vZHVsZSBlbWJlci1kYXRhCiovCgpmdW5jdGlvbiBhc3luY0JlbG9u
        Z3NUbyh0eXBlLCBvcHRpb25zLCBtZXRhKSB7CiAgcmV0dXJuIEVtYmVyLmNv
        bXB1dGVkKGZ1bmN0aW9uKGtleSwgdmFsdWUpIHsKICAgIHZhciBkYXRhID0g
        Z2V0KHRoaXMsICdkYXRhJyksCiAgICAgICAgc3RvcmUgPSBnZXQodGhpcywg
        J3N0b3JlJyksCiAgICAgICAgcHJvbWlzZUxhYmVsID0gIkRTOiBBc3luYyBi
        ZWxvbmdzVG8gIiArIHRoaXMgKyAiIDogIiArIGtleTsKCiAgICBpZiAoYXJn
        dW1lbnRzLmxlbmd0aCA9PT0gMikgewogICAgICBFbWJlci5hc3NlcnQoIllv
        dSBjYW4gb25seSBhZGQgYSAnIiArIHR5cGUgKyAiJyByZWNvcmQgdG8gdGhp
        cyByZWxhdGlvbnNoaXAiLCAhdmFsdWUgfHwgdmFsdWUgaW5zdGFuY2VvZiBz
        dG9yZS5tb2RlbEZvcih0eXBlKSk7CiAgICAgIHJldHVybiB2YWx1ZSA9PT0g
        dW5kZWZpbmVkID8gbnVsbCA6IERTLlByb21pc2VPYmplY3QuY3JlYXRlKHsg
        cHJvbWlzZTogRW1iZXIuUlNWUC5yZXNvbHZlKHZhbHVlLCBwcm9taXNlTGFi
        ZWwpIH0pOwogICAgfQoKICAgIHZhciBsaW5rID0gZGF0YS5saW5rcyAmJiBk
        YXRhLmxpbmtzW2tleV0sCiAgICAgICAgYmVsb25nc1RvID0gZGF0YVtrZXld
        OwoKICAgIGlmKCFpc05vbmUoYmVsb25nc1RvKSkgewogICAgICB2YXIgcHJv
        bWlzZSA9IHN0b3JlLmZldGNoUmVjb3JkKGJlbG9uZ3NUbykgfHwgRW1iZXIu
        UlNWUC5yZXNvbHZlKGJlbG9uZ3NUbywgcHJvbWlzZUxhYmVsKTsKICAgICAg
        cmV0dXJuIERTLlByb21pc2VPYmplY3QuY3JlYXRlKHsgcHJvbWlzZTogcHJv
        bWlzZX0pOwogICAgfSBlbHNlIGlmIChsaW5rKSB7CiAgICAgIHZhciByZXNv
        bHZlciA9IEVtYmVyLlJTVlAuZGVmZXIoIkRTOiBBc3luYyBiZWxvbmdzVG8g
        KGxpbmspICIgKyB0aGlzICsgIiA6ICIgKyBrZXkpOwogICAgICBzdG9yZS5m
        aW5kQmVsb25nc1RvKHRoaXMsIGxpbmssIG1ldGEsIHJlc29sdmVyKTsKICAg
        ICAgcmV0dXJuIERTLlByb21pc2VPYmplY3QuY3JlYXRlKHsgcHJvbWlzZTog
        cmVzb2x2ZXIucHJvbWlzZSB9KTsKICAgIH0gZWxzZSB7CiAgICAgIHJldHVy
        biBudWxsOwogICAgfQogIH0pLnByb3BlcnR5KCdkYXRhJykubWV0YShtZXRh
        KTsKfQoKLyoqCiAgYERTLmJlbG9uZ3NUb2AgaXMgdXNlZCB0byBkZWZpbmUg
        T25lLVRvLU9uZSBhbmQgT25lLVRvLU1hbnkKICByZWxhdGlvbnNoaXBzIG9u
        IGEgW0RTLk1vZGVsXShEUy5Nb2RlbC5odG1sKS4KCgogIGBEUy5iZWxvbmdz
        VG9gIHRha2VzIGFuIG9wdGlvbmFsIGhhc2ggYXMgYSBzZWNvbmQgcGFyYW1l
        dGVyLCBjdXJyZW50bHkKICBzdXBwb3J0ZWQgb3B0aW9ucyBhcmU6CgogIC0g
        YGFzeW5jYDogQSBib29sZWFuIHZhbHVlIHVzZWQgdG8gZXhwbGljaXRseSBk
        ZWNsYXJlIHRoaXMgdG8gYmUgYW4gYXN5bmMgcmVsYXRpb25zaGlwLgogIC0g
        YGludmVyc2VgOiBBIHN0cmluZyB1c2VkIHRvIGlkZW50aWZ5IHRoZSBpbnZl
        cnNlIHByb3BlcnR5IG9uIGEKICAgIHJlbGF0ZWQgbW9kZWwgaW4gYSBPbmUt
        VG8tTWFueSByZWxhdGlvbnNoaXAuIFNlZSBbRXhwbGljaXQgSW52ZXJzZXNd
        KCN0b2NfZXhwbGljaXQtaW52ZXJzZXMpCgogICMjIyMgT25lLVRvLU9uZQog
        IFRvIGRlY2xhcmUgYSBvbmUtdG8tb25lIHJlbGF0aW9uc2hpcCBiZXR3ZWVu
        IHR3byBtb2RlbHMsIHVzZQogIGBEUy5iZWxvbmdzVG9gOgoKICBgYGBqYXZh
        c2NyaXB0CiAgQXBwLlVzZXIgPSBEUy5Nb2RlbC5leHRlbmQoewogICAgcHJv
        ZmlsZTogRFMuYmVsb25nc1RvKCdwcm9maWxlJykKICB9KTsKCiAgQXBwLlBy
        b2ZpbGUgPSBEUy5Nb2RlbC5leHRlbmQoewogICAgdXNlcjogRFMuYmVsb25n
        c1RvKCd1c2VyJykKICB9KTsKICBgYGAKCiAgIyMjIyBPbmUtVG8tTWFueQog
        IFRvIGRlY2xhcmUgYSBvbmUtdG8tbWFueSByZWxhdGlvbnNoaXAgYmV0d2Vl
        biB0d28gbW9kZWxzLCB1c2UKICBgRFMuYmVsb25nc1RvYCBpbiBjb21iaW5h
        dGlvbiB3aXRoIGBEUy5oYXNNYW55YCwgbGlrZSB0aGlzOgoKICBgYGBqYXZh
        c2NyaXB0CiAgQXBwLlBvc3QgPSBEUy5Nb2RlbC5leHRlbmQoewogICAgY29t
        bWVudHM6IERTLmhhc01hbnkoJ2NvbW1lbnQnKQogIH0pOwoKICBBcHAuQ29t
        bWVudCA9IERTLk1vZGVsLmV4dGVuZCh7CiAgICBwb3N0OiBEUy5iZWxvbmdz
        VG8oJ3Bvc3QnKQogIH0pOwogIGBgYAoKICBAbmFtZXNwYWNlCiAgQG1ldGhv
        ZCBiZWxvbmdzVG8KICBAZm9yIERTCiAgQHBhcmFtIHtTdHJpbmcgb3IgRFMu
        TW9kZWx9IHR5cGUgdGhlIG1vZGVsIHR5cGUgb2YgdGhlIHJlbGF0aW9uc2hp
        cAogIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIGEgaGFzaCBvZiBvcHRpb25z
        CiAgQHJldHVybiB7RW1iZXIuY29tcHV0ZWR9IHJlbGF0aW9uc2hpcAoqLwpE
        Uy5iZWxvbmdzVG8gPSBmdW5jdGlvbih0eXBlLCBvcHRpb25zKSB7CiAgaWYg
        KHR5cGVvZiB0eXBlID09PSAnb2JqZWN0JykgewogICAgb3B0aW9ucyA9IHR5
        cGU7CiAgICB0eXBlID0gdW5kZWZpbmVkOwogIH0gZWxzZSB7CiAgICBFbWJl
        ci5hc3NlcnQoIlRoZSBmaXJzdCBhcmd1bWVudCBEUy5iZWxvbmdzVG8gbXVz
        dCBiZSBhIG1vZGVsIHR5cGUgb3Igc3RyaW5nLCBsaWtlIERTLmJlbG9uZ3NU
        byhBcHAuUGVyc29uKSIsICEhdHlwZSAmJiAodHlwZW9mIHR5cGUgPT09ICdz
        dHJpbmcnIHx8IERTLk1vZGVsLmRldGVjdCh0eXBlKSkpOwogIH0KCiAgb3B0
        aW9ucyA9IG9wdGlvbnMgfHwge307CgogIHZhciBtZXRhID0geyB0eXBlOiB0
        eXBlLCBpc1JlbGF0aW9uc2hpcDogdHJ1ZSwgb3B0aW9uczogb3B0aW9ucywg
        a2luZDogJ2JlbG9uZ3NUbycgfTsKCiAgaWYgKG9wdGlvbnMuYXN5bmMpIHsK
        ICAgIHJldHVybiBhc3luY0JlbG9uZ3NUbyh0eXBlLCBvcHRpb25zLCBtZXRh
        KTsKICB9CgogIHJldHVybiBFbWJlci5jb21wdXRlZChmdW5jdGlvbihrZXks
        IHZhbHVlKSB7CiAgICB2YXIgZGF0YSA9IGdldCh0aGlzLCAnZGF0YScpLAog
        ICAgICAgIHN0b3JlID0gZ2V0KHRoaXMsICdzdG9yZScpLCBiZWxvbmdzVG8s
        IHR5cGVDbGFzczsKCiAgICBpZiAodHlwZW9mIHR5cGUgPT09ICdzdHJpbmcn
        KSB7CiAgICAgIHR5cGVDbGFzcyA9IHN0b3JlLm1vZGVsRm9yKHR5cGUpOwog
        ICAgfSBlbHNlIHsKICAgICAgdHlwZUNsYXNzID0gdHlwZTsKICAgIH0KCiAg
        ICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMikgewogICAgICBFbWJlci5h
        c3NlcnQoIllvdSBjYW4gb25seSBhZGQgYSAnIiArIHR5cGUgKyAiJyByZWNv
        cmQgdG8gdGhpcyByZWxhdGlvbnNoaXAiLCAhdmFsdWUgfHwgdmFsdWUgaW5z
        dGFuY2VvZiB0eXBlQ2xhc3MpOwogICAgICByZXR1cm4gdmFsdWUgPT09IHVu
        ZGVmaW5lZCA/IG51bGwgOiB2YWx1ZTsKICAgIH0KCiAgICBiZWxvbmdzVG8g
        PSBkYXRhW2tleV07CgogICAgaWYgKGlzTm9uZShiZWxvbmdzVG8pKSB7IHJl
        dHVybiBudWxsOyB9CgogICAgc3RvcmUuZmV0Y2hSZWNvcmQoYmVsb25nc1Rv
        KTsKCiAgICByZXR1cm4gYmVsb25nc1RvOwogIH0pLnByb3BlcnR5KCdkYXRh
        JykubWV0YShtZXRhKTsKfTsKCi8qKgogIFRoZXNlIG9ic2VydmVycyBvYnNl
        cnZlIGFsbCBgYmVsb25nc1RvYCByZWxhdGlvbnNoaXBzIG9uIHRoZSByZWNv
        cmQuIFNlZQogIGByZWxhdGlvbnNoaXBzL2V4dGAgdG8gc2VlIGhvdyB0aGVz
        ZSBvYnNlcnZlcnMgZ2V0IHRoZWlyIGRlcGVuZGVuY2llcy4KCiAgQGNsYXNz
        IE1vZGVsCiAgQG5hbWVzcGFjZSBEUwoqLwpEUy5Nb2RlbC5yZW9wZW4oewoK
        ICAvKioKICAgIEBtZXRob2QgYmVsb25nc1RvV2lsbENoYW5nZQogICAgQHBy
        aXZhdGUKICAgIEBzdGF0aWMKICAgIEBwYXJhbSByZWNvcmQKICAgIEBwYXJh
        bSBrZXkKICAqLwogIGJlbG9uZ3NUb1dpbGxDaGFuZ2U6IEVtYmVyLmJlZm9y
        ZU9ic2VydmVyKGZ1bmN0aW9uKHJlY29yZCwga2V5KSB7CiAgICBpZiAoZ2V0
        KHJlY29yZCwgJ2lzTG9hZGVkJykpIHsKICAgICAgdmFyIG9sZFBhcmVudCA9
        IGdldChyZWNvcmQsIGtleSk7CgogICAgICBpZiAob2xkUGFyZW50KSB7CiAg
        ICAgICAgdmFyIHN0b3JlID0gZ2V0KHJlY29yZCwgJ3N0b3JlJyksCiAgICAg
        ICAgICAgIGNoYW5nZSA9IERTLlJlbGF0aW9uc2hpcENoYW5nZS5jcmVhdGVD
        aGFuZ2UocmVjb3JkLCBvbGRQYXJlbnQsIHN0b3JlLCB7IGtleToga2V5LCBr
        aW5kOiAiYmVsb25nc1RvIiwgY2hhbmdlVHlwZTogInJlbW92ZSIgfSk7Cgog
        ICAgICAgIGNoYW5nZS5zeW5jKCk7CiAgICAgICAgdGhpcy5fY2hhbmdlc1Rv
        U3luY1trZXldID0gY2hhbmdlOwogICAgICB9CiAgICB9CiAgfSksCgogIC8q
        KgogICAgQG1ldGhvZCBiZWxvbmdzVG9EaWRDaGFuZ2UKICAgIEBwcml2YXRl
        CiAgICBAc3RhdGljCiAgICBAcGFyYW0gcmVjb3JkCiAgICBAcGFyYW0ga2V5
        CiAgKi8KICBiZWxvbmdzVG9EaWRDaGFuZ2U6IEVtYmVyLmltbWVkaWF0ZU9i
        c2VydmVyKGZ1bmN0aW9uKHJlY29yZCwga2V5KSB7CiAgICBpZiAoZ2V0KHJl
        Y29yZCwgJ2lzTG9hZGVkJykpIHsKICAgICAgdmFyIG5ld1BhcmVudCA9IGdl
        dChyZWNvcmQsIGtleSk7CgogICAgICBpZiAobmV3UGFyZW50KSB7CiAgICAg
        ICAgdmFyIHN0b3JlID0gZ2V0KHJlY29yZCwgJ3N0b3JlJyksCiAgICAgICAg
        ICAgIGNoYW5nZSA9IERTLlJlbGF0aW9uc2hpcENoYW5nZS5jcmVhdGVDaGFu
        Z2UocmVjb3JkLCBuZXdQYXJlbnQsIHN0b3JlLCB7IGtleToga2V5LCBraW5k
        OiAiYmVsb25nc1RvIiwgY2hhbmdlVHlwZTogImFkZCIgfSk7CgogICAgICAg
        IGNoYW5nZS5zeW5jKCk7CiAgICAgIH0KICAgIH0KCiAgICBkZWxldGUgdGhp
        cy5fY2hhbmdlc1RvU3luY1trZXldOwogIH0pCn0pOwoKfSkoKTsKCgoKKGZ1
        bmN0aW9uKCkgewovKioKICBAbW9kdWxlIGVtYmVyLWRhdGEKKi8KCnZhciBn
        ZXQgPSBFbWJlci5nZXQsIHNldCA9IEVtYmVyLnNldCwgc2V0UHJvcGVydGll
        cyA9IEVtYmVyLnNldFByb3BlcnRpZXM7CgpmdW5jdGlvbiBhc3luY0hhc01h
        bnkodHlwZSwgb3B0aW9ucywgbWV0YSkgewogIHJldHVybiBFbWJlci5jb21w
        dXRlZChmdW5jdGlvbihrZXksIHZhbHVlKSB7CiAgICB2YXIgcmVsYXRpb25z
        aGlwID0gdGhpcy5fcmVsYXRpb25zaGlwc1trZXldLAogICAgICAgIHByb21p
        c2VMYWJlbCA9ICJEUzogQXN5bmMgaGFzTWFueSAiICsgdGhpcyArICIgOiAi
        ICsga2V5OwoKICAgIGlmICghcmVsYXRpb25zaGlwKSB7CiAgICAgIHZhciBy
        ZXNvbHZlciA9IEVtYmVyLlJTVlAuZGVmZXIocHJvbWlzZUxhYmVsKTsKICAg
        ICAgcmVsYXRpb25zaGlwID0gYnVpbGRSZWxhdGlvbnNoaXAodGhpcywga2V5
        LCBvcHRpb25zLCBmdW5jdGlvbihzdG9yZSwgZGF0YSkgewogICAgICAgIHZh
        ciBsaW5rID0gZGF0YS5saW5rcyAmJiBkYXRhLmxpbmtzW2tleV07CiAgICAg
        ICAgdmFyIHJlbDsKICAgICAgICBpZiAobGluaykgewogICAgICAgICAgcmVs
        ID0gc3RvcmUuZmluZEhhc01hbnkodGhpcywgbGluaywgbWV0YSwgcmVzb2x2
        ZXIpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZWwgPSBzdG9yZS5m
        aW5kTWFueSh0aGlzLCBkYXRhW2tleV0sIG1ldGEudHlwZSwgcmVzb2x2ZXIp
        OwogICAgICAgIH0KICAgICAgICAvLyBjYWNoZSB0aGUgcHJvbWlzZSBzbyB3
        ZSBjYW4gdXNlIGl0CiAgICAgICAgLy8gd2hlbiB3ZSBjb21lIGJhY2sgYW5k
        IGRvbid0IG5lZWQgdG8gcmVidWlsZAogICAgICAgIC8vIHRoZSByZWxhdGlv
        bnNoaXAuCiAgICAgICAgc2V0KHJlbCwgJ3Byb21pc2UnLCByZXNvbHZlci5w
        cm9taXNlKTsKICAgICAgICByZXR1cm4gcmVsOwogICAgICB9KTsKICAgIH0K
        CiAgICB2YXIgcHJvbWlzZSA9IHJlbGF0aW9uc2hpcC5nZXQoJ3Byb21pc2Un
        KS50aGVuKGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gcmVsYXRpb25zaGlw
        OwogICAgfSwgbnVsbCwgIkRTOiBBc3luYyBoYXNNYW55IHJlY29yZHMgcmVj
        ZWl2ZWQiKTsKCiAgICByZXR1cm4gRFMuUHJvbWlzZUFycmF5LmNyZWF0ZSh7
        IHByb21pc2U6IHByb21pc2UgfSk7CiAgfSkucHJvcGVydHkoJ2RhdGEnKS5t
        ZXRhKG1ldGEpOwp9CgpmdW5jdGlvbiBidWlsZFJlbGF0aW9uc2hpcChyZWNv
        cmQsIGtleSwgb3B0aW9ucywgY2FsbGJhY2spIHsKICB2YXIgcmVscyA9IHJl
        Y29yZC5fcmVsYXRpb25zaGlwczsKCiAgaWYgKHJlbHNba2V5XSkgeyByZXR1
        cm4gcmVsc1trZXldOyB9CgogIHZhciBkYXRhID0gZ2V0KHJlY29yZCwgJ2Rh
        dGEnKSwKICAgICAgc3RvcmUgPSBnZXQocmVjb3JkLCAnc3RvcmUnKTsKCiAg
        dmFyIHJlbGF0aW9uc2hpcCA9IHJlbHNba2V5XSA9IGNhbGxiYWNrLmNhbGwo
        cmVjb3JkLCBzdG9yZSwgZGF0YSk7CgogIHJldHVybiBzZXRQcm9wZXJ0aWVz
        KHJlbGF0aW9uc2hpcCwgewogICAgb3duZXI6IHJlY29yZCwgbmFtZToga2V5
        LCBpc1BvbHltb3JwaGljOiBvcHRpb25zLnBvbHltb3JwaGljCiAgfSk7Cn0K
        CmZ1bmN0aW9uIGhhc1JlbGF0aW9uc2hpcCh0eXBlLCBvcHRpb25zKSB7CiAg
        b3B0aW9ucyA9IG9wdGlvbnMgfHwge307CgogIHZhciBtZXRhID0geyB0eXBl
        OiB0eXBlLCBpc1JlbGF0aW9uc2hpcDogdHJ1ZSwgb3B0aW9uczogb3B0aW9u
        cywga2luZDogJ2hhc01hbnknIH07CgogIGlmIChvcHRpb25zLmFzeW5jKSB7
        CiAgICByZXR1cm4gYXN5bmNIYXNNYW55KHR5cGUsIG9wdGlvbnMsIG1ldGEp
        OwogIH0KCiAgcmV0dXJuIEVtYmVyLmNvbXB1dGVkKGZ1bmN0aW9uKGtleSwg
        dmFsdWUpIHsKICAgIHJldHVybiBidWlsZFJlbGF0aW9uc2hpcCh0aGlzLCBr
        ZXksIG9wdGlvbnMsIGZ1bmN0aW9uKHN0b3JlLCBkYXRhKSB7CiAgICAgIHZh
        ciByZWNvcmRzID0gZGF0YVtrZXldOwogICAgICBFbWJlci5hc3NlcnQoIllv
        dSBsb29rZWQgdXAgdGhlICciICsga2V5ICsgIicgcmVsYXRpb25zaGlwIG9u
        ICciICsgdGhpcyArICInIGJ1dCBzb21lIG9mIHRoZSBhc3NvY2lhdGVkIHJl
        Y29yZHMgd2VyZSBub3QgbG9hZGVkLiBFaXRoZXIgbWFrZSBzdXJlIHRoZXkg
        YXJlIGFsbCBsb2FkZWQgdG9nZXRoZXIgd2l0aCB0aGUgcGFyZW50IHJlY29y
        ZCwgb3Igc3BlY2lmeSB0aGF0IHRoZSByZWxhdGlvbnNoaXAgaXMgYXN5bmMg
        KGBEUy5oYXNNYW55KHsgYXN5bmM6IHRydWUgfSlgKSIsIEVtYmVyLkEocmVj
        b3JkcykuZXZlcnlQcm9wZXJ0eSgnaXNFbXB0eScsIGZhbHNlKSk7CiAgICAg
        IHJldHVybiBzdG9yZS5maW5kTWFueSh0aGlzLCBkYXRhW2tleV0sIG1ldGEu
        dHlwZSk7CiAgICB9KTsKICB9KS5wcm9wZXJ0eSgnZGF0YScpLm1ldGEobWV0
        YSk7Cn0KCi8qKgogIGBEUy5oYXNNYW55YCBpcyB1c2VkIHRvIGRlZmluZSBP
        bmUtVG8tTWFueSBhbmQgTWFueS1Uby1NYW55CiAgcmVsYXRpb25zaGlwcyBv
        biBhIFtEUy5Nb2RlbF0oRFMuTW9kZWwuaHRtbCkuCgogIGBEUy5oYXNNYW55
        YCB0YWtlcyBhbiBvcHRpb25hbCBoYXNoIGFzIGEgc2Vjb25kIHBhcmFtZXRl
        ciwgY3VycmVudGx5CiAgc3VwcG9ydGVkIG9wdGlvbnMgYXJlOgoKICAtIGBh
        c3luY2A6IEEgYm9vbGVhbiB2YWx1ZSB1c2VkIHRvIGV4cGxpY2l0bHkgZGVj
        bGFyZSB0aGlzIHRvIGJlIGFuIGFzeW5jIHJlbGF0aW9uc2hpcC4KICAtIGBp
        bnZlcnNlYDogQSBzdHJpbmcgdXNlZCB0byBpZGVudGlmeSB0aGUgaW52ZXJz
        ZSBwcm9wZXJ0eSBvbiBhIHJlbGF0ZWQgbW9kZWwuCgogICMjIyMgT25lLVRv
        LU1hbnkKICBUbyBkZWNsYXJlIGEgb25lLXRvLW1hbnkgcmVsYXRpb25zaGlw
        IGJldHdlZW4gdHdvIG1vZGVscywgdXNlCiAgYERTLmJlbG9uZ3NUb2AgaW4g
        Y29tYmluYXRpb24gd2l0aCBgRFMuaGFzTWFueWAsIGxpa2UgdGhpczoKCiAg
        YGBgamF2YXNjcmlwdAogIEFwcC5Qb3N0ID0gRFMuTW9kZWwuZXh0ZW5kKHsK
        ICAgIGNvbW1lbnRzOiBEUy5oYXNNYW55KCdjb21tZW50JykKICB9KTsKCiAg
        QXBwLkNvbW1lbnQgPSBEUy5Nb2RlbC5leHRlbmQoewogICAgcG9zdDogRFMu
        YmVsb25nc1RvKCdwb3N0JykKICB9KTsKICBgYGAKCiAgIyMjIyBNYW55LVRv
        LU1hbnkKICBUbyBkZWNsYXJlIGEgbWFueS10by1tYW55IHJlbGF0aW9uc2hp
        cCBiZXR3ZWVuIHR3byBtb2RlbHMsIHVzZQogIGBEUy5oYXNNYW55YDoKCiAg
        YGBgamF2YXNjcmlwdAogIEFwcC5Qb3N0ID0gRFMuTW9kZWwuZXh0ZW5kKHsK
        ICAgIHRhZ3M6IERTLmhhc01hbnkoJ3RhZycpCiAgfSk7CgogIEFwcC5UYWcg
        PSBEUy5Nb2RlbC5leHRlbmQoewogICAgcG9zdHM6IERTLmhhc01hbnkoJ3Bv
        c3QnKQogIH0pOwogIGBgYAoKICAjIyMjIEV4cGxpY2l0IEludmVyc2VzCgog
        IEVtYmVyIERhdGEgd2lsbCBkbyBpdHMgYmVzdCB0byBkaXNjb3ZlciB3aGlj
        aCByZWxhdGlvbnNoaXBzIG1hcCB0bwogIG9uZSBhbm90aGVyLiBJbiB0aGUg
        b25lLXRvLW1hbnkgY29kZSBhYm92ZSwgZm9yIGV4YW1wbGUsIEVtYmVyIERh
        dGEKICBjYW4gZmlndXJlIG91dCB0aGF0IGNoYW5naW5nIHRoZSBgY29tbWVu
        dHNgIHJlbGF0aW9uc2hpcCBzaG91bGQgdXBkYXRlCiAgdGhlIGBwb3N0YCBy
        ZWxhdGlvbnNoaXAgb24gdGhlIGludmVyc2UgYmVjYXVzZSBwb3N0IGlzIHRo
        ZSBvbmx5CiAgcmVsYXRpb25zaGlwIHRvIHRoYXQgbW9kZWwuCgogIEhvd2V2
        ZXIsIHNvbWV0aW1lcyB5b3UgbWF5IGhhdmUgbXVsdGlwbGUgYGJlbG9uZ3NU
        b2AvYGhhc01hbnlzYCBmb3IgdGhlCiAgc2FtZSB0eXBlLiBZb3UgY2FuIHNw
        ZWNpZnkgd2hpY2ggcHJvcGVydHkgb24gdGhlIHJlbGF0ZWQgbW9kZWwgaXMK
        ICB0aGUgaW52ZXJzZSB1c2luZyBgRFMuaGFzTWFueWAncyBgaW52ZXJzZWAg
        b3B0aW9uOgoKICBgYGBqYXZhc2NyaXB0CiAgdmFyIGJlbG9uZ3NUbyA9IERT
        LmJlbG9uZ3NUbywKICAgICAgaGFzTWFueSA9IERTLmhhc01hbnk7CgogIEFw
        cC5Db21tZW50ID0gRFMuTW9kZWwuZXh0ZW5kKHsKICAgIG9uZVBvc3Q6IGJl
        bG9uZ3NUbygncG9zdCcpLAogICAgdHdvUG9zdDogYmVsb25nc1RvKCdwb3N0
        JyksCiAgICByZWRQb3N0OiBiZWxvbmdzVG8oJ3Bvc3QnKSwKICAgIGJsdWVQ
        b3N0OiBiZWxvbmdzVG8oJ3Bvc3QnKQogIH0pOwoKICBBcHAuUG9zdCA9IERT
        Lk1vZGVsLmV4dGVuZCh7CiAgICBjb21tZW50czogaGFzTWFueSgnY29tbWVu
        dCcsIHsKICAgICAgaW52ZXJzZTogJ3JlZFBvc3QnCiAgICB9KQogIH0pOwog
        IGBgYAoKICBZb3UgY2FuIGFsc28gc3BlY2lmeSBhbiBpbnZlcnNlIG9uIGEg
        YGJlbG9uZ3NUb2AsIHdoaWNoIHdvcmtzIGhvdwogIHlvdSdkIGV4cGVjdC4K
        CiAgQG5hbWVzcGFjZQogIEBtZXRob2QgaGFzTWFueQogIEBmb3IgRFMKICBA
        cGFyYW0ge1N0cmluZyBvciBEUy5Nb2RlbH0gdHlwZSB0aGUgbW9kZWwgdHlw
        ZSBvZiB0aGUgcmVsYXRpb25zaGlwCiAgQHBhcmFtIHtPYmplY3R9IG9wdGlv
        bnMgYSBoYXNoIG9mIG9wdGlvbnMKICBAcmV0dXJuIHtFbWJlci5jb21wdXRl
        ZH0gcmVsYXRpb25zaGlwCiovCkRTLmhhc01hbnkgPSBmdW5jdGlvbih0eXBl
        LCBvcHRpb25zKSB7CiAgaWYgKHR5cGVvZiB0eXBlID09PSAnb2JqZWN0Jykg
        ewogICAgb3B0aW9ucyA9IHR5cGU7CiAgICB0eXBlID0gdW5kZWZpbmVkOwog
        IH0KICByZXR1cm4gaGFzUmVsYXRpb25zaGlwKHR5cGUsIG9wdGlvbnMpOwp9
        OwoKfSkoKTsKCgoKKGZ1bmN0aW9uKCkgewp2YXIgZ2V0ID0gRW1iZXIuZ2V0
        LCBzZXQgPSBFbWJlci5zZXQ7CgovKioKICBAbW9kdWxlIGVtYmVyLWRhdGEK
        Ki8KCi8qCiAgVGhpcyBmaWxlIGRlZmluZXMgc2V2ZXJhbCBleHRlbnNpb25z
        IHRvIHRoZSBiYXNlIGBEUy5Nb2RlbGAgY2xhc3MgdGhhdAogIGFkZCBzdXBw
        b3J0IGZvciBvbmUtdG8tbWFueSByZWxhdGlvbnNoaXBzLgoqLwoKLyoqCiAg
        QGNsYXNzIE1vZGVsCiAgQG5hbWVzcGFjZSBEUwoqLwpEUy5Nb2RlbC5yZW9w
        ZW4oewoKICAvKioKICAgIFRoaXMgRW1iZXIuanMgaG9vayBhbGxvd3MgYW4g
        b2JqZWN0IHRvIGJlIG5vdGlmaWVkIHdoZW4gYSBwcm9wZXJ0eQogICAgaXMg
        ZGVmaW5lZC4KCiAgICBJbiB0aGlzIGNhc2UsIHdlIHVzZSBpdCB0byBiZSBu
        b3RpZmllZCB3aGVuIGFuIEVtYmVyIERhdGEgdXNlciBkZWZpbmVzIGEKICAg
        IGJlbG9uZ3MtdG8gcmVsYXRpb25zaGlwLiBJbiB0aGF0IGNhc2UsIHdlIG5l
        ZWQgdG8gc2V0IHVwIG9ic2VydmVycyBmb3IKICAgIGVhY2ggb25lLCBhbGxv
        d2luZyB1cyB0byB0cmFjayByZWxhdGlvbnNoaXAgY2hhbmdlcyBhbmQgYXV0
        b21hdGljYWxseQogICAgcmVmbGVjdCBjaGFuZ2VzIGluIHRoZSBpbnZlcnNl
        IGhhcy1tYW55IGFycmF5LgoKICAgIFRoaXMgaG9vayBwYXNzZXMgdGhlIGNs
        YXNzIGJlaW5nIHNldCB1cCwgYXMgd2VsbCBhcyB0aGUga2V5IGFuZCB2YWx1
        ZQogICAgYmVpbmcgZGVmaW5lZC4gU28sIGZvciBleGFtcGxlLCB3aGVuIHRo
        ZSB1c2VyIGRvZXMgdGhpczoKCiAgICBgYGBqYXZhc2NyaXB0CiAgICBEUy5N
        b2RlbC5leHRlbmQoewogICAgICBwYXJlbnQ6IERTLmJlbG9uZ3NUbygndXNl
        cicpCiAgICB9KTsKICAgIGBgYAoKICAgIFRoaXMgaG9vayB3b3VsZCBiZSBj
        YWxsZWQgd2l0aCAicGFyZW50IiBhcyB0aGUga2V5IGFuZCB0aGUgY29tcHV0
        ZWQKICAgIHByb3BlcnR5IHJldHVybmVkIGJ5IGBEUy5iZWxvbmdzVG9gIGFz
        IHRoZSB2YWx1ZS4KCiAgICBAbWV0aG9kIGRpZERlZmluZVByb3BlcnR5CiAg
        ICBAcGFyYW0gcHJvdG8KICAgIEBwYXJhbSBrZXkKICAgIEBwYXJhbSB2YWx1
        ZQogICovCiAgZGlkRGVmaW5lUHJvcGVydHk6IGZ1bmN0aW9uKHByb3RvLCBr
        ZXksIHZhbHVlKSB7CiAgICAvLyBDaGVjayBpZiB0aGUgdmFsdWUgYmVpbmcg
        c2V0IGlzIGEgY29tcHV0ZWQgcHJvcGVydHkuCiAgICBpZiAodmFsdWUgaW5z
        dGFuY2VvZiBFbWJlci5EZXNjcmlwdG9yKSB7CgogICAgICAvLyBJZiBpdCBp
        cywgZ2V0IHRoZSBtZXRhZGF0YSBmb3IgdGhlIHJlbGF0aW9uc2hpcC4gVGhp
        cyBpcwogICAgICAvLyBwb3B1bGF0ZWQgYnkgdGhlIGBEUy5iZWxvbmdzVG9g
        IGhlbHBlciB3aGVuIGl0IGlzIGNyZWF0aW5nCiAgICAgIC8vIHRoZSBjb21w
        dXRlZCBwcm9wZXJ0eS4KICAgICAgdmFyIG1ldGEgPSB2YWx1ZS5tZXRhKCk7
        CgogICAgICBpZiAobWV0YS5pc1JlbGF0aW9uc2hpcCAmJiBtZXRhLmtpbmQg
        PT09ICdiZWxvbmdzVG8nKSB7CiAgICAgICAgRW1iZXIuYWRkT2JzZXJ2ZXIo
        cHJvdG8sIGtleSwgbnVsbCwgJ2JlbG9uZ3NUb0RpZENoYW5nZScpOwogICAg
        ICAgIEVtYmVyLmFkZEJlZm9yZU9ic2VydmVyKHByb3RvLCBrZXksIG51bGws
        ICdiZWxvbmdzVG9XaWxsQ2hhbmdlJyk7CiAgICAgIH0KCiAgICAgIG1ldGEu
        cGFyZW50VHlwZSA9IHByb3RvLmNvbnN0cnVjdG9yOwogICAgfQogIH0KfSk7
        CgovKgogIFRoZXNlIERTLk1vZGVsIGV4dGVuc2lvbnMgYWRkIGNsYXNzIG1l
        dGhvZHMgdGhhdCBwcm92aWRlIHJlbGF0aW9uc2hpcAogIGludHJvc3BlY3Rp
        b24gYWJpbGl0aWVzIGFib3V0IHJlbGF0aW9uc2hpcHMuCgogIEEgbm90ZSBh
        Ym91dCB0aGUgY29tcHV0ZWQgcHJvcGVydGllcyBjb250YWluZWQgaGVyZToK
        CiAgKipUaGVzZSBwcm9wZXJ0aWVzIGFyZSBlZmZlY3RpdmVseSBzZWFsZWQg
        b25jZSBjYWxsZWQgZm9yIHRoZSBmaXJzdCB0aW1lLioqCiAgVG8gYXZvaWQg
        cmVwZWF0ZWRseSBkb2luZyBleHBlbnNpdmUgaXRlcmF0aW9uIG92ZXIgYSBt
        b2RlbCdzIGZpZWxkcywgdGhlc2UKICB2YWx1ZXMgYXJlIGNvbXB1dGVkIG9u
        Y2UgYW5kIHRoZW4gY2FjaGVkIGZvciB0aGUgcmVtYWluZGVyIG9mIHRoZSBy
        dW50aW1lIG9mCiAgeW91ciBhcHBsaWNhdGlvbi4KCiAgSWYgeW91ciBhcHBs
        aWNhdGlvbiBuZWVkcyB0byBtb2RpZnkgYSBjbGFzcyBhZnRlciBpdHMgaW5p
        dGlhbCBkZWZpbml0aW9uCiAgKGZvciBleGFtcGxlLCB1c2luZyBgcmVvcGVu
        KClgIHRvIGFkZCBhZGRpdGlvbmFsIGF0dHJpYnV0ZXMpLCBtYWtlIHN1cmUg
        eW91CiAgZG8gaXQgYmVmb3JlIHVzaW5nIHlvdXIgbW9kZWwgd2l0aCB0aGUg
        c3RvcmUsIHdoaWNoIHVzZXMgdGhlc2UgcHJvcGVydGllcwogIGV4dGVuc2l2
        ZWx5LgoqLwoKRFMuTW9kZWwucmVvcGVuQ2xhc3MoewogIC8qKgogICAgRm9y
        IGEgZ2l2ZW4gcmVsYXRpb25zaGlwIG5hbWUsIHJldHVybnMgdGhlIG1vZGVs
        IHR5cGUgb2YgdGhlIHJlbGF0aW9uc2hpcC4KCiAgICBGb3IgZXhhbXBsZSwg
        aWYgeW91IGRlZmluZSBhIG1vZGVsIGxpa2UgdGhpczoKCiAgIGBgYGphdmFz
        Y3JpcHQKICAgIEFwcC5Qb3N0ID0gRFMuTW9kZWwuZXh0ZW5kKHsKICAgICAg
        Y29tbWVudHM6IERTLmhhc01hbnkoJ2NvbW1lbnQnKQogICAgfSk7CiAgIGBg
        YAoKICAgIENhbGxpbmcgYEFwcC5Qb3N0LnR5cGVGb3JSZWxhdGlvbnNoaXAo
        J2NvbW1lbnRzJylgIHdpbGwgcmV0dXJuIGBBcHAuQ29tbWVudGAuCgogICAg
        QG1ldGhvZCB0eXBlRm9yUmVsYXRpb25zaGlwCiAgICBAc3RhdGljCiAgICBA
        cGFyYW0ge1N0cmluZ30gbmFtZSB0aGUgbmFtZSBvZiB0aGUgcmVsYXRpb25z
        aGlwCiAgICBAcmV0dXJuIHtzdWJjbGFzcyBvZiBEUy5Nb2RlbH0gdGhlIHR5
        cGUgb2YgdGhlIHJlbGF0aW9uc2hpcCwgb3IgdW5kZWZpbmVkCiAgKi8KICB0
        eXBlRm9yUmVsYXRpb25zaGlwOiBmdW5jdGlvbihuYW1lKSB7CiAgICB2YXIg
        cmVsYXRpb25zaGlwID0gZ2V0KHRoaXMsICdyZWxhdGlvbnNoaXBzQnlOYW1l
        JykuZ2V0KG5hbWUpOwogICAgcmV0dXJuIHJlbGF0aW9uc2hpcCAmJiByZWxh
        dGlvbnNoaXAudHlwZTsKICB9LAoKICBpbnZlcnNlRm9yOiBmdW5jdGlvbihu
        YW1lKSB7CiAgICB2YXIgaW52ZXJzZVR5cGUgPSB0aGlzLnR5cGVGb3JSZWxh
        dGlvbnNoaXAobmFtZSk7CgogICAgaWYgKCFpbnZlcnNlVHlwZSkgeyByZXR1
        cm4gbnVsbDsgfQoKICAgIHZhciBvcHRpb25zID0gdGhpcy5tZXRhRm9yUHJv
        cGVydHkobmFtZSkub3B0aW9uczsKCiAgICBpZiAob3B0aW9ucy5pbnZlcnNl
        ID09PSBudWxsKSB7IHJldHVybiBudWxsOyB9CgogICAgdmFyIGludmVyc2VO
        YW1lLCBpbnZlcnNlS2luZDsKCiAgICBpZiAob3B0aW9ucy5pbnZlcnNlKSB7
        CiAgICAgIGludmVyc2VOYW1lID0gb3B0aW9ucy5pbnZlcnNlOwogICAgICBp
        bnZlcnNlS2luZCA9IEVtYmVyLmdldChpbnZlcnNlVHlwZSwgJ3JlbGF0aW9u
        c2hpcHNCeU5hbWUnKS5nZXQoaW52ZXJzZU5hbWUpLmtpbmQ7CiAgICB9IGVs
        c2UgewogICAgICB2YXIgcG9zc2libGVSZWxhdGlvbnNoaXBzID0gZmluZFBv
        c3NpYmxlSW52ZXJzZXModGhpcywgaW52ZXJzZVR5cGUpOwoKICAgICAgaWYg
        KHBvc3NpYmxlUmVsYXRpb25zaGlwcy5sZW5ndGggPT09IDApIHsgcmV0dXJu
        IG51bGw7IH0KCiAgICAgIEVtYmVyLmFzc2VydCgiWW91IGRlZmluZWQgdGhl
        ICciICsgbmFtZSArICInIHJlbGF0aW9uc2hpcCBvbiAiICsgdGhpcyArICIs
        IGJ1dCBtdWx0aXBsZSBwb3NzaWJsZSBpbnZlcnNlIHJlbGF0aW9uc2hpcHMg
        b2YgdHlwZSAiICsgdGhpcyArICIgd2VyZSBmb3VuZCBvbiAiICsgaW52ZXJz
        ZVR5cGUgKyAiLiBMb29rIGF0IGh0dHA6Ly9lbWJlcmpzLmNvbS9ndWlkZXMv
        bW9kZWxzL2RlZmluaW5nLW1vZGVscy8jdG9jX2V4cGxpY2l0LWludmVyc2Vz
        IGZvciBob3cgdG8gZXhwbGljaXRseSBzcGVjaWZ5IGludmVyc2VzIiwgcG9z
        c2libGVSZWxhdGlvbnNoaXBzLmxlbmd0aCA9PT0gMSk7CgogICAgICBpbnZl
        cnNlTmFtZSA9IHBvc3NpYmxlUmVsYXRpb25zaGlwc1swXS5uYW1lOwogICAg
        ICBpbnZlcnNlS2luZCA9IHBvc3NpYmxlUmVsYXRpb25zaGlwc1swXS5raW5k
        OwogICAgfQoKICAgIGZ1bmN0aW9uIGZpbmRQb3NzaWJsZUludmVyc2VzKHR5
        cGUsIGludmVyc2VUeXBlLCBwb3NzaWJsZVJlbGF0aW9uc2hpcHMpIHsKICAg
        ICAgcG9zc2libGVSZWxhdGlvbnNoaXBzID0gcG9zc2libGVSZWxhdGlvbnNo
        aXBzIHx8IFtdOwoKICAgICAgdmFyIHJlbGF0aW9uc2hpcE1hcCA9IGdldChp
        bnZlcnNlVHlwZSwgJ3JlbGF0aW9uc2hpcHMnKTsKICAgICAgaWYgKCFyZWxh
        dGlvbnNoaXBNYXApIHsgcmV0dXJuOyB9CgogICAgICB2YXIgcmVsYXRpb25z
        aGlwcyA9IHJlbGF0aW9uc2hpcE1hcC5nZXQodHlwZSk7CiAgICAgIGlmIChy
        ZWxhdGlvbnNoaXBzKSB7CiAgICAgICAgcG9zc2libGVSZWxhdGlvbnNoaXBz
        LnB1c2guYXBwbHkocG9zc2libGVSZWxhdGlvbnNoaXBzLCByZWxhdGlvbnNo
        aXBNYXAuZ2V0KHR5cGUpKTsKICAgICAgfQoKICAgICAgaWYgKHR5cGUuc3Vw
        ZXJjbGFzcykgewogICAgICAgIGZpbmRQb3NzaWJsZUludmVyc2VzKHR5cGUu
        c3VwZXJjbGFzcywgaW52ZXJzZVR5cGUsIHBvc3NpYmxlUmVsYXRpb25zaGlw
        cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBwb3NzaWJsZVJlbGF0aW9uc2hp
        cHM7CiAgICB9CgogICAgcmV0dXJuIHsKICAgICAgdHlwZTogaW52ZXJzZVR5
        cGUsCiAgICAgIG5hbWU6IGludmVyc2VOYW1lLAogICAgICBraW5kOiBpbnZl
        cnNlS2luZAogICAgfTsKICB9LAoKICAvKioKICAgIFRoZSBtb2RlbCdzIHJl
        bGF0aW9uc2hpcHMgYXMgYSBtYXAsIGtleWVkIG9uIHRoZSB0eXBlIG9mIHRo
        ZQogICAgcmVsYXRpb25zaGlwLiBUaGUgdmFsdWUgb2YgZWFjaCBlbnRyeSBp
        cyBhbiBhcnJheSBjb250YWluaW5nIGEgZGVzY3JpcHRvcgogICAgZm9yIGVh
        Y2ggcmVsYXRpb25zaGlwIHdpdGggdGhhdCB0eXBlLCBkZXNjcmliaW5nIHRo
        ZSBuYW1lIG9mIHRoZSByZWxhdGlvbnNoaXAKICAgIGFzIHdlbGwgYXMgdGhl
        IHR5cGUuCgogICAgRm9yIGV4YW1wbGUsIGdpdmVuIHRoZSBmb2xsb3dpbmcg
        bW9kZWwgZGVmaW5pdGlvbjoKCiAgICBgYGBqYXZhc2NyaXB0CiAgICBBcHAu
        QmxvZyA9IERTLk1vZGVsLmV4dGVuZCh7CiAgICAgIHVzZXJzOiBEUy5oYXNN
        YW55KCd1c2VyJyksCiAgICAgIG93bmVyOiBEUy5iZWxvbmdzVG8oJ3VzZXIn
        KSwKICAgICAgcG9zdHM6IERTLmhhc01hbnkoJ3Bvc3QnKQogICAgfSk7CiAg
        ICBgYGAKCiAgICBUaGlzIGNvbXB1dGVkIHByb3BlcnR5IHdvdWxkIHJldHVy
        biBhIG1hcCBkZXNjcmliaW5nIHRoZXNlCiAgICByZWxhdGlvbnNoaXBzLCBs
        aWtlIHRoaXM6CgogICAgYGBgamF2YXNjcmlwdAogICAgdmFyIHJlbGF0aW9u
        c2hpcHMgPSBFbWJlci5nZXQoQXBwLkJsb2csICdyZWxhdGlvbnNoaXBzJyk7
        CiAgICByZWxhdGlvbnNoaXBzLmdldChBcHAuVXNlcik7CiAgICAvLz0+IFsg
        eyBuYW1lOiAndXNlcnMnLCBraW5kOiAnaGFzTWFueScgfSwKICAgIC8vICAg
        ICB7IG5hbWU6ICdvd25lcicsIGtpbmQ6ICdiZWxvbmdzVG8nIH0gXQogICAg
        cmVsYXRpb25zaGlwcy5nZXQoQXBwLlBvc3QpOwogICAgLy89PiBbIHsgbmFt
        ZTogJ3Bvc3RzJywga2luZDogJ2hhc01hbnknIH0gXQogICAgYGBgCgogICAg
        QHByb3BlcnR5IHJlbGF0aW9uc2hpcHMKICAgIEBzdGF0aWMKICAgIEB0eXBl
        IEVtYmVyLk1hcAogICAgQHJlYWRPbmx5CiAgKi8KICByZWxhdGlvbnNoaXBz
        OiBFbWJlci5jb21wdXRlZChmdW5jdGlvbigpIHsKICAgIHZhciBtYXAgPSBu
        ZXcgRW1iZXIuTWFwV2l0aERlZmF1bHQoewogICAgICBkZWZhdWx0VmFsdWU6
        IGZ1bmN0aW9uKCkgeyByZXR1cm4gW107IH0KICAgIH0pOwoKICAgIC8vIExv
        b3AgdGhyb3VnaCBlYWNoIGNvbXB1dGVkIHByb3BlcnR5IG9uIHRoZSBjbGFz
        cwogICAgdGhpcy5lYWNoQ29tcHV0ZWRQcm9wZXJ0eShmdW5jdGlvbihuYW1l
        LCBtZXRhKSB7CgogICAgICAvLyBJZiB0aGUgY29tcHV0ZWQgcHJvcGVydHkg
        aXMgYSByZWxhdGlvbnNoaXAsIGFkZAogICAgICAvLyBpdCB0byB0aGUgbWFw
        LgogICAgICBpZiAobWV0YS5pc1JlbGF0aW9uc2hpcCkgewogICAgICAgIGlm
        ICh0eXBlb2YgbWV0YS50eXBlID09PSAnc3RyaW5nJykgewogICAgICAgICAg
        bWV0YS50eXBlID0gdGhpcy5zdG9yZS5tb2RlbEZvcihtZXRhLnR5cGUpOwog
        ICAgICAgIH0KCiAgICAgICAgdmFyIHJlbGF0aW9uc2hpcHNGb3JUeXBlID0g
        bWFwLmdldChtZXRhLnR5cGUpOwoKICAgICAgICByZWxhdGlvbnNoaXBzRm9y
        VHlwZS5wdXNoKHsgbmFtZTogbmFtZSwga2luZDogbWV0YS5raW5kIH0pOwog
        ICAgICB9CiAgICB9KTsKCiAgICByZXR1cm4gbWFwOwogIH0pLAoKICAvKioK
        ICAgIEEgaGFzaCBjb250YWluaW5nIGxpc3RzIG9mIHRoZSBtb2RlbCdzIHJl
        bGF0aW9uc2hpcHMsIGdyb3VwZWQKICAgIGJ5IHRoZSByZWxhdGlvbnNoaXAg
        a2luZC4gRm9yIGV4YW1wbGUsIGdpdmVuIGEgbW9kZWwgd2l0aCB0aGlzCiAg
        ICBkZWZpbml0aW9uOgoKICAgIGBgYGphdmFzY3JpcHQKICAgIEFwcC5CbG9n
        ID0gRFMuTW9kZWwuZXh0ZW5kKHsKICAgICAgdXNlcnM6IERTLmhhc01hbnko
        J3VzZXInKSwKICAgICAgb3duZXI6IERTLmJlbG9uZ3NUbygndXNlcicpLAoK
        ICAgICAgcG9zdHM6IERTLmhhc01hbnkoJ3Bvc3QnKQogICAgfSk7CiAgICBg
        YGAKCiAgICBUaGlzIHByb3BlcnR5IHdvdWxkIGNvbnRhaW4gdGhlIGZvbGxv
        d2luZzoKCiAgICBgYGBqYXZhc2NyaXB0CiAgICB2YXIgcmVsYXRpb25zaGlw
        TmFtZXMgPSBFbWJlci5nZXQoQXBwLkJsb2csICdyZWxhdGlvbnNoaXBOYW1l
        cycpOwogICAgcmVsYXRpb25zaGlwTmFtZXMuaGFzTWFueTsKICAgIC8vPT4g
        Wyd1c2VycycsICdwb3N0cyddCiAgICByZWxhdGlvbnNoaXBOYW1lcy5iZWxv
        bmdzVG87CiAgICAvLz0+IFsnb3duZXInXQogICAgYGBgCgogICAgQHByb3Bl
        cnR5IHJlbGF0aW9uc2hpcE5hbWVzCiAgICBAc3RhdGljCiAgICBAdHlwZSBP
        YmplY3QKICAgIEByZWFkT25seQogICovCiAgcmVsYXRpb25zaGlwTmFtZXM6
        IEVtYmVyLmNvbXB1dGVkKGZ1bmN0aW9uKCkgewogICAgdmFyIG5hbWVzID0g
        eyBoYXNNYW55OiBbXSwgYmVsb25nc1RvOiBbXSB9OwoKICAgIHRoaXMuZWFj
        aENvbXB1dGVkUHJvcGVydHkoZnVuY3Rpb24obmFtZSwgbWV0YSkgewogICAg
        ICBpZiAobWV0YS5pc1JlbGF0aW9uc2hpcCkgewogICAgICAgIG5hbWVzW21l
        dGEua2luZF0ucHVzaChuYW1lKTsKICAgICAgfQogICAgfSk7CgogICAgcmV0
        dXJuIG5hbWVzOwogIH0pLAoKICAvKioKICAgIEFuIGFycmF5IG9mIHR5cGVz
        IGRpcmVjdGx5IHJlbGF0ZWQgdG8gYSBtb2RlbC4gRWFjaCB0eXBlIHdpbGwg
        YmUKICAgIGluY2x1ZGVkIG9uY2UsIHJlZ2FyZGxlc3Mgb2YgdGhlIG51bWJl
        ciBvZiByZWxhdGlvbnNoaXBzIGl0IGhhcyB3aXRoCiAgICB0aGUgbW9kZWwu
        CgogICAgRm9yIGV4YW1wbGUsIGdpdmVuIGEgbW9kZWwgd2l0aCB0aGlzIGRl
        ZmluaXRpb246CgogICAgYGBgamF2YXNjcmlwdAogICAgQXBwLkJsb2cgPSBE
        Uy5Nb2RlbC5leHRlbmQoewogICAgICB1c2VyczogRFMuaGFzTWFueSgndXNl
        cicpLAogICAgICBvd25lcjogRFMuYmVsb25nc1RvKCd1c2VyJyksCgogICAg
        ICBwb3N0czogRFMuaGFzTWFueSgncG9zdCcpCiAgICB9KTsKICAgIGBgYAoK
        ICAgIFRoaXMgcHJvcGVydHkgd291bGQgY29udGFpbiB0aGUgZm9sbG93aW5n
        OgoKICAgIGBgYGphdmFzY3JpcHQKICAgIHZhciByZWxhdGVkVHlwZXMgPSBF
        bWJlci5nZXQoQXBwLkJsb2csICdyZWxhdGVkVHlwZXMnKTsKICAgIC8vPT4g
        WyBBcHAuVXNlciwgQXBwLlBvc3QgXQogICAgYGBgCgogICAgQHByb3BlcnR5
        IHJlbGF0ZWRUeXBlcwogICAgQHN0YXRpYwogICAgQHR5cGUgRW1iZXIuQXJy
        YXkKICAgIEByZWFkT25seQogICovCiAgcmVsYXRlZFR5cGVzOiBFbWJlci5j
        b21wdXRlZChmdW5jdGlvbigpIHsKICAgIHZhciB0eXBlLAogICAgICAgIHR5
        cGVzID0gRW1iZXIuQSgpOwoKICAgIC8vIExvb3AgdGhyb3VnaCBlYWNoIGNv
        bXB1dGVkIHByb3BlcnR5IG9uIHRoZSBjbGFzcywKICAgIC8vIGFuZCBjcmVh
        dGUgYW4gYXJyYXkgb2YgdGhlIHVuaXF1ZSB0eXBlcyBpbnZvbHZlZAogICAg
        Ly8gaW4gcmVsYXRpb25zaGlwcwogICAgdGhpcy5lYWNoQ29tcHV0ZWRQcm9w
        ZXJ0eShmdW5jdGlvbihuYW1lLCBtZXRhKSB7CiAgICAgIGlmIChtZXRhLmlz
        UmVsYXRpb25zaGlwKSB7CiAgICAgICAgdHlwZSA9IG1ldGEudHlwZTsKCiAg
        ICAgICAgaWYgKHR5cGVvZiB0eXBlID09PSAnc3RyaW5nJykgewogICAgICAg
        ICAgdHlwZSA9IGdldCh0aGlzLCB0eXBlLCBmYWxzZSkgfHwgdGhpcy5zdG9y
        ZS5tb2RlbEZvcih0eXBlKTsKICAgICAgICB9CgogICAgICAgIEVtYmVyLmFz
        c2VydCgiWW91IHNwZWNpZmllZCBhIGhhc01hbnkgKCIgKyBtZXRhLnR5cGUg
        KyAiKSBvbiAiICsgbWV0YS5wYXJlbnRUeXBlICsgIiBidXQgIiArIG1ldGEu
        dHlwZSArICIgd2FzIG5vdCBmb3VuZC4iLCAgdHlwZSk7CgogICAgICAgIGlm
        ICghdHlwZXMuY29udGFpbnModHlwZSkpIHsKICAgICAgICAgIEVtYmVyLmFz
        c2VydCgiVHJ5aW5nIHRvIHNpZGVsb2FkICIgKyBuYW1lICsgIiBvbiAiICsg
        dGhpcy50b1N0cmluZygpICsgIiBidXQgdGhlIHR5cGUgZG9lc24ndCBleGlz
        dC4iLCAhIXR5cGUpOwogICAgICAgICAgdHlwZXMucHVzaCh0eXBlKTsKICAg
        ICAgICB9CiAgICAgIH0KICAgIH0pOwoKICAgIHJldHVybiB0eXBlczsKICB9
        KSwKCiAgLyoqCiAgICBBIG1hcCB3aG9zZSBrZXlzIGFyZSB0aGUgcmVsYXRp
        b25zaGlwcyBvZiBhIG1vZGVsIGFuZCB3aG9zZSB2YWx1ZXMgYXJlCiAgICBy
        ZWxhdGlvbnNoaXAgZGVzY3JpcHRvcnMuCgogICAgRm9yIGV4YW1wbGUsIGdp
        dmVuIGEgbW9kZWwgd2l0aCB0aGlzCiAgICBkZWZpbml0aW9uOgoKICAgIGBg
        YGphdmFzY3JpcHQKICAgIEFwcC5CbG9nID0gRFMuTW9kZWwuZXh0ZW5kKHsK
        ICAgICAgdXNlcnM6IERTLmhhc01hbnkoJ3VzZXInKSwKICAgICAgb3duZXI6
        IERTLmJlbG9uZ3NUbygndXNlcicpLAoKICAgICAgcG9zdHM6IERTLmhhc01h
        bnkoJ3Bvc3QnKQogICAgfSk7CiAgICBgYGAKCiAgICBUaGlzIHByb3BlcnR5
        IHdvdWxkIGNvbnRhaW4gdGhlIGZvbGxvd2luZzoKCiAgICBgYGBqYXZhc2Ny
        aXB0CiAgICB2YXIgcmVsYXRpb25zaGlwc0J5TmFtZSA9IEVtYmVyLmdldChB
        cHAuQmxvZywgJ3JlbGF0aW9uc2hpcHNCeU5hbWUnKTsKICAgIHJlbGF0aW9u
        c2hpcHNCeU5hbWUuZ2V0KCd1c2VycycpOwogICAgLy89PiB7IGtleTogJ3Vz
        ZXJzJywga2luZDogJ2hhc01hbnknLCB0eXBlOiBBcHAuVXNlciB9CiAgICBy
        ZWxhdGlvbnNoaXBzQnlOYW1lLmdldCgnb3duZXInKTsKICAgIC8vPT4geyBr
        ZXk6ICdvd25lcicsIGtpbmQ6ICdiZWxvbmdzVG8nLCB0eXBlOiBBcHAuVXNl
        ciB9CiAgICBgYGAKCiAgICBAcHJvcGVydHkgcmVsYXRpb25zaGlwc0J5TmFt
        ZQogICAgQHN0YXRpYwogICAgQHR5cGUgRW1iZXIuTWFwCiAgICBAcmVhZE9u
        bHkKICAqLwogIHJlbGF0aW9uc2hpcHNCeU5hbWU6IEVtYmVyLmNvbXB1dGVk
        KGZ1bmN0aW9uKCkgewogICAgdmFyIG1hcCA9IEVtYmVyLk1hcC5jcmVhdGUo
        KSwgdHlwZTsKCiAgICB0aGlzLmVhY2hDb21wdXRlZFByb3BlcnR5KGZ1bmN0
        aW9uKG5hbWUsIG1ldGEpIHsKICAgICAgaWYgKG1ldGEuaXNSZWxhdGlvbnNo
        aXApIHsKICAgICAgICBtZXRhLmtleSA9IG5hbWU7CiAgICAgICAgdHlwZSA9
        IG1ldGEudHlwZTsKCiAgICAgICAgaWYgKCF0eXBlICYmIG1ldGEua2luZCA9
        PT0gJ2hhc01hbnknKSB7CiAgICAgICAgICB0eXBlID0gRW1iZXIuU3RyaW5n
        LnNpbmd1bGFyaXplKG5hbWUpOwogICAgICAgIH0gZWxzZSBpZiAoIXR5cGUp
        IHsKICAgICAgICAgIHR5cGUgPSBuYW1lOwogICAgICAgIH0KCiAgICAgICAg
        aWYgKHR5cGVvZiB0eXBlID09PSAnc3RyaW5nJykgewogICAgICAgICAgbWV0
        YS50eXBlID0gdGhpcy5zdG9yZS5tb2RlbEZvcih0eXBlKTsKICAgICAgICB9
        CgogICAgICAgIG1hcC5zZXQobmFtZSwgbWV0YSk7CiAgICAgIH0KICAgIH0p
        OwoKICAgIHJldHVybiBtYXA7CiAgfSksCgogIC8qKgogICAgQSBtYXAgd2hv
        c2Uga2V5cyBhcmUgdGhlIGZpZWxkcyBvZiB0aGUgbW9kZWwgYW5kIHdob3Nl
        IHZhbHVlcyBhcmUgc3RyaW5ncwogICAgZGVzY3JpYmluZyB0aGUga2luZCBv
        ZiB0aGUgZmllbGQuIEEgbW9kZWwncyBmaWVsZHMgYXJlIHRoZSB1bmlvbiBv
        ZiBhbGwgb2YgaXRzCiAgICBhdHRyaWJ1dGVzIGFuZCByZWxhdGlvbnNoaXBz
        LgoKICAgIEZvciBleGFtcGxlOgoKICAgIGBgYGphdmFzY3JpcHQKCiAgICBB
        cHAuQmxvZyA9IERTLk1vZGVsLmV4dGVuZCh7CiAgICAgIHVzZXJzOiBEUy5o
        YXNNYW55KCd1c2VyJyksCiAgICAgIG93bmVyOiBEUy5iZWxvbmdzVG8oJ3Vz
        ZXInKSwKCiAgICAgIHBvc3RzOiBEUy5oYXNNYW55KCdwb3N0JyksCgogICAg
        ICB0aXRsZTogRFMuYXR0cignc3RyaW5nJykKICAgIH0pOwoKICAgIHZhciBm
        aWVsZHMgPSBFbWJlci5nZXQoQXBwLkJsb2csICdmaWVsZHMnKTsKICAgIGZp
        ZWxkcy5mb3JFYWNoKGZ1bmN0aW9uKGZpZWxkLCBraW5kKSB7CiAgICAgIGNv
        bnNvbGUubG9nKGZpZWxkLCBraW5kKTsKICAgIH0pOwoKICAgIC8vIHByaW50
        czoKICAgIC8vIHVzZXJzLCBoYXNNYW55CiAgICAvLyBvd25lciwgYmVsb25n
        c1RvCiAgICAvLyBwb3N0cywgaGFzTWFueQogICAgLy8gdGl0bGUsIGF0dHJp
        YnV0ZQogICAgYGBgCgogICAgQHByb3BlcnR5IGZpZWxkcwogICAgQHN0YXRp
        YwogICAgQHR5cGUgRW1iZXIuTWFwCiAgICBAcmVhZE9ubHkKICAqLwogIGZp
        ZWxkczogRW1iZXIuY29tcHV0ZWQoZnVuY3Rpb24oKSB7CiAgICB2YXIgbWFw
        ID0gRW1iZXIuTWFwLmNyZWF0ZSgpOwoKICAgIHRoaXMuZWFjaENvbXB1dGVk
        UHJvcGVydHkoZnVuY3Rpb24obmFtZSwgbWV0YSkgewogICAgICBpZiAobWV0
        YS5pc1JlbGF0aW9uc2hpcCkgewogICAgICAgIG1hcC5zZXQobmFtZSwgbWV0
        YS5raW5kKTsKICAgICAgfSBlbHNlIGlmIChtZXRhLmlzQXR0cmlidXRlKSB7
        CiAgICAgICAgbWFwLnNldChuYW1lLCAnYXR0cmlidXRlJyk7CiAgICAgIH0K
        ICAgIH0pOwoKICAgIHJldHVybiBtYXA7CiAgfSksCgogIC8qKgogICAgR2l2
        ZW4gYSBjYWxsYmFjaywgaXRlcmF0ZXMgb3ZlciBlYWNoIG9mIHRoZSByZWxh
        dGlvbnNoaXBzIGluIHRoZSBtb2RlbCwKICAgIGludm9raW5nIHRoZSBjYWxs
        YmFjayB3aXRoIHRoZSBuYW1lIG9mIGVhY2ggcmVsYXRpb25zaGlwIGFuZCBp
        dHMgcmVsYXRpb25zaGlwCiAgICBkZXNjcmlwdG9yLgoKICAgIEBtZXRob2Qg
        ZWFjaFJlbGF0aW9uc2hpcAogICAgQHN0YXRpYwogICAgQHBhcmFtIHtGdW5j
        dGlvbn0gY2FsbGJhY2sgdGhlIGNhbGxiYWNrIHRvIGludm9rZQogICAgQHBh
        cmFtIHthbnl9IGJpbmRpbmcgdGhlIHZhbHVlIHRvIHdoaWNoIHRoZSBjYWxs
        YmFjaydzIGB0aGlzYCBzaG91bGQgYmUgYm91bmQKICAqLwogIGVhY2hSZWxh
        dGlvbnNoaXA6IGZ1bmN0aW9uKGNhbGxiYWNrLCBiaW5kaW5nKSB7CiAgICBn
        ZXQodGhpcywgJ3JlbGF0aW9uc2hpcHNCeU5hbWUnKS5mb3JFYWNoKGZ1bmN0
        aW9uKG5hbWUsIHJlbGF0aW9uc2hpcCkgewogICAgICBjYWxsYmFjay5jYWxs
        KGJpbmRpbmcsIG5hbWUsIHJlbGF0aW9uc2hpcCk7CiAgICB9KTsKICB9LAoK
        ICAvKioKICAgIEdpdmVuIGEgY2FsbGJhY2ssIGl0ZXJhdGVzIG92ZXIgZWFj
        aCBvZiB0aGUgdHlwZXMgcmVsYXRlZCB0byBhIG1vZGVsLAogICAgaW52b2tp
        bmcgdGhlIGNhbGxiYWNrIHdpdGggdGhlIHJlbGF0ZWQgdHlwZSdzIGNsYXNz
        LiBFYWNoIHR5cGUgd2lsbCBiZQogICAgcmV0dXJuZWQganVzdCBvbmNlLCBy
        ZWdhcmRsZXNzIG9mIGhvdyBtYW55IGRpZmZlcmVudCByZWxhdGlvbnNoaXBz
        IGl0IGhhcwogICAgd2l0aCBhIG1vZGVsLgoKICAgIEBtZXRob2QgZWFjaFJl
        bGF0ZWRUeXBlCiAgICBAc3RhdGljCiAgICBAcGFyYW0ge0Z1bmN0aW9ufSBj
        YWxsYmFjayB0aGUgY2FsbGJhY2sgdG8gaW52b2tlCiAgICBAcGFyYW0ge2Fu
        eX0gYmluZGluZyB0aGUgdmFsdWUgdG8gd2hpY2ggdGhlIGNhbGxiYWNrJ3Mg
        YHRoaXNgIHNob3VsZCBiZSBib3VuZAogICovCiAgZWFjaFJlbGF0ZWRUeXBl
        OiBmdW5jdGlvbihjYWxsYmFjaywgYmluZGluZykgewogICAgZ2V0KHRoaXMs
        ICdyZWxhdGVkVHlwZXMnKS5mb3JFYWNoKGZ1bmN0aW9uKHR5cGUpIHsKICAg
        ICAgY2FsbGJhY2suY2FsbChiaW5kaW5nLCB0eXBlKTsKICAgIH0pOwogIH0K
        fSk7CgpEUy5Nb2RlbC5yZW9wZW4oewogIC8qKgogICAgR2l2ZW4gYSBjYWxs
        YmFjaywgaXRlcmF0ZXMgb3ZlciBlYWNoIG9mIHRoZSByZWxhdGlvbnNoaXBz
        IGluIHRoZSBtb2RlbCwKICAgIGludm9raW5nIHRoZSBjYWxsYmFjayB3aXRo
        IHRoZSBuYW1lIG9mIGVhY2ggcmVsYXRpb25zaGlwIGFuZCBpdHMgcmVsYXRp
        b25zaGlwCiAgICBkZXNjcmlwdG9yLgoKICAgIEBtZXRob2QgZWFjaFJlbGF0
        aW9uc2hpcAogICAgQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2sgdGhlIGNh
        bGxiYWNrIHRvIGludm9rZQogICAgQHBhcmFtIHthbnl9IGJpbmRpbmcgdGhl
        IHZhbHVlIHRvIHdoaWNoIHRoZSBjYWxsYmFjaydzIGB0aGlzYCBzaG91bGQg
        YmUgYm91bmQKICAqLwogIGVhY2hSZWxhdGlvbnNoaXA6IGZ1bmN0aW9uKGNh
        bGxiYWNrLCBiaW5kaW5nKSB7CiAgICB0aGlzLmNvbnN0cnVjdG9yLmVhY2hS
        ZWxhdGlvbnNoaXAoY2FsbGJhY2ssIGJpbmRpbmcpOwogIH0KfSk7Cgp9KSgp
        OwoKCgooZnVuY3Rpb24oKSB7Ci8qKgogIEBtb2R1bGUgZW1iZXItZGF0YQoq
        LwoKfSkoKTsKCgoKKGZ1bmN0aW9uKCkgewovKioKICBAbW9kdWxlIGVtYmVy
        LWRhdGEKKi8KCnZhciBnZXQgPSBFbWJlci5nZXQsIHNldCA9IEVtYmVyLnNl
        dDsKdmFyIGZvckVhY2ggPSBFbWJlci5FbnVtZXJhYmxlVXRpbHMuZm9yRWFj
        aDsKCi8qKgogIEBjbGFzcyBSZWNvcmRBcnJheU1hbmFnZXIKICBAbmFtZXNw
        YWNlIERTCiAgQHByaXZhdGUKICBAZXh0ZW5kcyBFbWJlci5PYmplY3QKKi8K
        RFMuUmVjb3JkQXJyYXlNYW5hZ2VyID0gRW1iZXIuT2JqZWN0LmV4dGVuZCh7
        CiAgaW5pdDogZnVuY3Rpb24oKSB7CiAgICB0aGlzLmZpbHRlcmVkUmVjb3Jk
        QXJyYXlzID0gRW1iZXIuTWFwV2l0aERlZmF1bHQuY3JlYXRlKHsKICAgICAg
        ZGVmYXVsdFZhbHVlOiBmdW5jdGlvbigpIHsgcmV0dXJuIFtdOyB9CiAgICB9
        KTsKCiAgICB0aGlzLmNoYW5nZWRSZWNvcmRzID0gW107CiAgfSwKCiAgcmVj
        b3JkRGlkQ2hhbmdlOiBmdW5jdGlvbihyZWNvcmQpIHsKICAgIGlmICh0aGlz
        LmNoYW5nZWRSZWNvcmRzLnB1c2gocmVjb3JkKSAhPT0gMSkgeyByZXR1cm47
        IH0KCiAgICBFbWJlci5ydW4uc2NoZWR1bGUoJ2FjdGlvbnMnLCB0aGlzLCB0
        aGlzLnVwZGF0ZVJlY29yZEFycmF5cyk7CiAgfSwKCiAgcmVjb3JkQXJyYXlz
        Rm9yUmVjb3JkOiBmdW5jdGlvbihyZWNvcmQpIHsKICAgIHJlY29yZC5fcmVj
        b3JkQXJyYXlzID0gcmVjb3JkLl9yZWNvcmRBcnJheXMgfHwgRW1iZXIuT3Jk
        ZXJlZFNldC5jcmVhdGUoKTsKICAgIHJldHVybiByZWNvcmQuX3JlY29yZEFy
        cmF5czsKICB9LAoKICAvKioKICAgIFRoaXMgbWV0aG9kIGlzIGludm9rZWQg
        d2hlbmV2ZXIgZGF0YSBpcyBsb2FkZWQgaW50byB0aGUgc3RvcmUgYnkgdGhl
        CiAgICBhZGFwdGVyIG9yIHVwZGF0ZWQgYnkgdGhlIGFkYXB0ZXIsIG9yIHdo
        ZW4gYSByZWNvcmQgaGFzIGNoYW5nZWQuCgogICAgSXQgdXBkYXRlcyBhbGwg
        cmVjb3JkIGFycmF5cyB0aGF0IGEgcmVjb3JkIGJlbG9uZ3MgdG8uCgogICAg
        VG8gYXZvaWQgdGhyYXNoaW5nLCBpdCBvbmx5IHJ1bnMgYXQgbW9zdCBvbmNl
        IHBlciBydW4gbG9vcC4KCiAgICBAbWV0aG9kIHVwZGF0ZVJlY29yZEFycmF5
        cwogICAgQHBhcmFtIHtDbGFzc30gdHlwZQogICAgQHBhcmFtIHtOdW1iZXJ8
        U3RyaW5nfSBjbGllbnRJZAogICovCiAgdXBkYXRlUmVjb3JkQXJyYXlzOiBm
        dW5jdGlvbigpIHsKICAgIGZvckVhY2godGhpcy5jaGFuZ2VkUmVjb3Jkcywg
        ZnVuY3Rpb24ocmVjb3JkKSB7CiAgICAgIGlmIChnZXQocmVjb3JkLCAnaXNE
        ZWxldGVkJykpIHsKICAgICAgICB0aGlzLl9yZWNvcmRXYXNEZWxldGVkKHJl
        Y29yZCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5fcmVjb3JkV2Fz
        Q2hhbmdlZChyZWNvcmQpOwogICAgICB9CiAgICB9LCB0aGlzKTsKCiAgICB0
        aGlzLmNoYW5nZWRSZWNvcmRzLmxlbmd0aCA9IDA7CiAgfSwKCiAgX3JlY29y
        ZFdhc0RlbGV0ZWQ6IGZ1bmN0aW9uIChyZWNvcmQpIHsKICAgIHZhciByZWNv
        cmRBcnJheXMgPSByZWNvcmQuX3JlY29yZEFycmF5czsKCiAgICBpZiAoIXJl
        Y29yZEFycmF5cykgeyByZXR1cm47IH0KCiAgICBmb3JFYWNoKHJlY29yZEFy
        cmF5cywgZnVuY3Rpb24oYXJyYXkpIHsKICAgICAgYXJyYXkucmVtb3ZlUmVj
        b3JkKHJlY29yZCk7CiAgICB9KTsKICB9LAoKICBfcmVjb3JkV2FzQ2hhbmdl
        ZDogZnVuY3Rpb24gKHJlY29yZCkgewogICAgdmFyIHR5cGUgPSByZWNvcmQu
        Y29uc3RydWN0b3IsCiAgICAgICAgcmVjb3JkQXJyYXlzID0gdGhpcy5maWx0
        ZXJlZFJlY29yZEFycmF5cy5nZXQodHlwZSksCiAgICAgICAgZmlsdGVyOwoK
        ICAgIGZvckVhY2gocmVjb3JkQXJyYXlzLCBmdW5jdGlvbihhcnJheSkgewog
        ICAgICBmaWx0ZXIgPSBnZXQoYXJyYXksICdmaWx0ZXJGdW5jdGlvbicpOwog
        ICAgICB0aGlzLnVwZGF0ZVJlY29yZEFycmF5KGFycmF5LCBmaWx0ZXIsIHR5
        cGUsIHJlY29yZCk7CiAgICB9LCB0aGlzKTsKCiAgICAvLyBsb29wIHRocm91
        Z2ggYWxsIG1hbnlBcnJheXMgY29udGFpbmluZyBhbiB1bmxvYWRlZCBjb3B5
        IG9mIHRoaXMKICAgIC8vIGNsaWVudElkIGFuZCBub3RpZnkgdGhlbSB0aGF0
        IHRoZSByZWNvcmQgd2FzIGxvYWRlZC4KICAgIHZhciBtYW55QXJyYXlzID0g
        cmVjb3JkLl9sb2FkaW5nUmVjb3JkQXJyYXlzOwoKICAgIGlmIChtYW55QXJy
        YXlzKSB7CiAgICAgIGZvciAodmFyIGk9MCwgbD1tYW55QXJyYXlzLmxlbmd0
        aDsgaTxsOyBpKyspIHsKICAgICAgICBtYW55QXJyYXlzW2ldLmxvYWRlZFJl
        Y29yZCgpOwogICAgICB9CgogICAgICByZWNvcmQuX2xvYWRpbmdSZWNvcmRB
        cnJheXMgPSBbXTsKICAgIH0KICB9LAoKICAvKioKICAgIFVwZGF0ZSBhbiBp
        bmRpdmlkdWFsIGZpbHRlci4KCiAgICBAbWV0aG9kIHVwZGF0ZVJlY29yZEFy
        cmF5CiAgICBAcGFyYW0ge0RTLkZpbHRlcmVkUmVjb3JkQXJyYXl9IGFycmF5
        CiAgICBAcGFyYW0ge0Z1bmN0aW9ufSBmaWx0ZXIKICAgIEBwYXJhbSB7Q2xh
        c3N9IHR5cGUKICAgIEBwYXJhbSB7TnVtYmVyfFN0cmluZ30gY2xpZW50SWQK
        ICAqLwogIHVwZGF0ZVJlY29yZEFycmF5OiBmdW5jdGlvbihhcnJheSwgZmls
        dGVyLCB0eXBlLCByZWNvcmQpIHsKICAgIHZhciBzaG91bGRCZUluQXJyYXk7
        CgogICAgaWYgKCFmaWx0ZXIpIHsKICAgICAgc2hvdWxkQmVJbkFycmF5ID0g
        dHJ1ZTsKICAgIH0gZWxzZSB7CiAgICAgIHNob3VsZEJlSW5BcnJheSA9IGZp
        bHRlcihyZWNvcmQpOwogICAgfQoKICAgIHZhciByZWNvcmRBcnJheXMgPSB0
        aGlzLnJlY29yZEFycmF5c0ZvclJlY29yZChyZWNvcmQpOwoKICAgIGlmIChz
        aG91bGRCZUluQXJyYXkpIHsKICAgICAgcmVjb3JkQXJyYXlzLmFkZChhcnJh
        eSk7CiAgICAgIGFycmF5LmFkZFJlY29yZChyZWNvcmQpOwogICAgfSBlbHNl
        IGlmICghc2hvdWxkQmVJbkFycmF5KSB7CiAgICAgIHJlY29yZEFycmF5cy5y
        ZW1vdmUoYXJyYXkpOwogICAgICBhcnJheS5yZW1vdmVSZWNvcmQocmVjb3Jk
        KTsKICAgIH0KICB9LAoKICAvKioKICAgIFRoaXMgbWV0aG9kIGlzIGludm9r
        ZWQgaWYgdGhlIGBmaWx0ZXJGdW5jdGlvbmAgcHJvcGVydHkgaXMKICAgIGNo
        YW5nZWQgb24gYSBgRFMuRmlsdGVyZWRSZWNvcmRBcnJheWAuCgogICAgSXQg
        ZXNzZW50aWFsbHkgcmUtcnVucyB0aGUgZmlsdGVyIGZyb20gc2NyYXRjaC4g
        VGhpcyBzYW1lCiAgICBtZXRob2QgaXMgaW52b2tlZCB3aGVuIHRoZSBmaWx0
        ZXIgaXMgY3JlYXRlZCBpbiB0aCBmaXJzdCBwbGFjZS4KCiAgICBAbWV0aG9k
        IHVwZGF0ZUZpbHRlcgogICAgQHBhcmFtIGFycmF5CiAgICBAcGFyYW0gdHlw
        ZQogICAgQHBhcmFtIGZpbHRlcgogICovCiAgdXBkYXRlRmlsdGVyOiBmdW5j
        dGlvbihhcnJheSwgdHlwZSwgZmlsdGVyKSB7CiAgICB2YXIgdHlwZU1hcCA9
        IHRoaXMuc3RvcmUudHlwZU1hcEZvcih0eXBlKSwKICAgICAgICByZWNvcmRz
        ID0gdHlwZU1hcC5yZWNvcmRzLCByZWNvcmQ7CgogICAgZm9yICh2YXIgaT0w
        LCBsPXJlY29yZHMubGVuZ3RoOyBpPGw7IGkrKykgewogICAgICByZWNvcmQg
        PSByZWNvcmRzW2ldOwoKICAgICAgaWYgKCFnZXQocmVjb3JkLCAnaXNEZWxl
        dGVkJykgJiYgIWdldChyZWNvcmQsICdpc0VtcHR5JykpIHsKICAgICAgICB0
        aGlzLnVwZGF0ZVJlY29yZEFycmF5KGFycmF5LCBmaWx0ZXIsIHR5cGUsIHJl
        Y29yZCk7CiAgICAgIH0KICAgIH0KICB9LAoKICAvKioKICAgIENyZWF0ZSBh
        IGBEUy5NYW55QXJyYXlgIGZvciBhIHR5cGUgYW5kIGxpc3Qgb2YgcmVjb3Jk
        IHJlZmVyZW5jZXMsIGFuZCBpbmRleAogICAgdGhlIGBNYW55QXJyYXlgIHVu
        ZGVyIGVhY2ggcmVmZXJlbmNlLiBUaGlzIGFsbG93cyB1cyB0byBlZmZpY2ll
        bnRseSByZW1vdmUKICAgIHJlY29yZHMgZnJvbSBgTWFueUFycmF5YHMgd2hl
        biB0aGV5IGFyZSBkZWxldGVkLgoKICAgIEBtZXRob2QgY3JlYXRlTWFueUFy
        cmF5CiAgICBAcGFyYW0ge0NsYXNzfSB0eXBlCiAgICBAcGFyYW0ge0FycmF5
        fSByZWZlcmVuY2VzCiAgICBAcmV0dXJuIHtEUy5NYW55QXJyYXl9CiAgKi8K
        ICBjcmVhdGVNYW55QXJyYXk6IGZ1bmN0aW9uKHR5cGUsIHJlY29yZHMpIHsK
        ICAgIHZhciBtYW55QXJyYXkgPSBEUy5NYW55QXJyYXkuY3JlYXRlKHsKICAg
        ICAgdHlwZTogdHlwZSwKICAgICAgY29udGVudDogcmVjb3JkcywKICAgICAg
        c3RvcmU6IHRoaXMuc3RvcmUKICAgIH0pOwoKICAgIGZvckVhY2gocmVjb3Jk
        cywgZnVuY3Rpb24ocmVjb3JkKSB7CiAgICAgIHZhciBhcnJheXMgPSB0aGlz
        LnJlY29yZEFycmF5c0ZvclJlY29yZChyZWNvcmQpOwogICAgICBhcnJheXMu
        YWRkKG1hbnlBcnJheSk7CiAgICB9LCB0aGlzKTsKCiAgICByZXR1cm4gbWFu
        eUFycmF5OwogIH0sCgogIC8qKgogICAgQ3JlYXRlIGEgYERTLlJlY29yZEFy
        cmF5YCBmb3IgYSB0eXBlIGFuZCByZWdpc3RlciBpdCBmb3IgdXBkYXRlcy4K
        CiAgICBAbWV0aG9kIGNyZWF0ZVJlY29yZEFycmF5CiAgICBAcGFyYW0ge0Ns
        YXNzfSB0eXBlCiAgICBAcmV0dXJuIHtEUy5SZWNvcmRBcnJheX0KICAqLwog
        IGNyZWF0ZVJlY29yZEFycmF5OiBmdW5jdGlvbih0eXBlKSB7CiAgICB2YXIg
        YXJyYXkgPSBEUy5SZWNvcmRBcnJheS5jcmVhdGUoewogICAgICB0eXBlOiB0
        eXBlLAogICAgICBjb250ZW50OiBFbWJlci5BKCksCiAgICAgIHN0b3JlOiB0
        aGlzLnN0b3JlLAogICAgICBpc0xvYWRlZDogdHJ1ZQogICAgfSk7CgogICAg
        dGhpcy5yZWdpc3RlckZpbHRlcmVkUmVjb3JkQXJyYXkoYXJyYXksIHR5cGUp
        OwoKICAgIHJldHVybiBhcnJheTsKICB9LAoKICAvKioKICAgIENyZWF0ZSBh
        IGBEUy5GaWx0ZXJlZFJlY29yZEFycmF5YCBmb3IgYSB0eXBlIGFuZCByZWdp
        c3RlciBpdCBmb3IgdXBkYXRlcy4KCiAgICBAbWV0aG9kIGNyZWF0ZUZpbHRl
        cmVkUmVjb3JkQXJyYXkKICAgIEBwYXJhbSB7Q2xhc3N9IHR5cGUKICAgIEBw
        YXJhbSB7RnVuY3Rpb259IGZpbHRlcgogICAgQHJldHVybiB7RFMuRmlsdGVy
        ZWRSZWNvcmRBcnJheX0KICAqLwogIGNyZWF0ZUZpbHRlcmVkUmVjb3JkQXJy
        YXk6IGZ1bmN0aW9uKHR5cGUsIGZpbHRlcikgewogICAgdmFyIGFycmF5ID0g
        RFMuRmlsdGVyZWRSZWNvcmRBcnJheS5jcmVhdGUoewogICAgICB0eXBlOiB0
        eXBlLAogICAgICBjb250ZW50OiBFbWJlci5BKCksCiAgICAgIHN0b3JlOiB0
        aGlzLnN0b3JlLAogICAgICBtYW5hZ2VyOiB0aGlzLAogICAgICBmaWx0ZXJG
        dW5jdGlvbjogZmlsdGVyCiAgICB9KTsKCiAgICB0aGlzLnJlZ2lzdGVyRmls
        dGVyZWRSZWNvcmRBcnJheShhcnJheSwgdHlwZSwgZmlsdGVyKTsKCiAgICBy
        ZXR1cm4gYXJyYXk7CiAgfSwKCiAgLyoqCiAgICBDcmVhdGUgYSBgRFMuQWRh
        cHRlclBvcHVsYXRlZFJlY29yZEFycmF5YCBmb3IgYSB0eXBlIHdpdGggZ2l2
        ZW4gcXVlcnkuCgogICAgQG1ldGhvZCBjcmVhdGVBZGFwdGVyUG9wdWxhdGVk
        UmVjb3JkQXJyYXkKICAgIEBwYXJhbSB7Q2xhc3N9IHR5cGUKICAgIEBwYXJh
        bSB7T2JqZWN0fSBxdWVyeQogICAgQHJldHVybiB7RFMuQWRhcHRlclBvcHVs
        YXRlZFJlY29yZEFycmF5fQogICovCiAgY3JlYXRlQWRhcHRlclBvcHVsYXRl
        ZFJlY29yZEFycmF5OiBmdW5jdGlvbih0eXBlLCBxdWVyeSkgewogICAgcmV0
        dXJuIERTLkFkYXB0ZXJQb3B1bGF0ZWRSZWNvcmRBcnJheS5jcmVhdGUoewog
        ICAgICB0eXBlOiB0eXBlLAogICAgICBxdWVyeTogcXVlcnksCiAgICAgIGNv
        bnRlbnQ6IEVtYmVyLkEoKSwKICAgICAgc3RvcmU6IHRoaXMuc3RvcmUKICAg
        IH0pOwogIH0sCgogIC8qKgogICAgUmVnaXN0ZXIgYSBSZWNvcmRBcnJheSBm
        b3IgYSBnaXZlbiB0eXBlIHRvIGJlIGJhY2tlZCBieQogICAgYSBmaWx0ZXIg
        ZnVuY3Rpb24uIFRoaXMgd2lsbCBjYXVzZSB0aGUgYXJyYXkgdG8gdXBkYXRl
        CiAgICBhdXRvbWF0aWNhbGx5IHdoZW4gcmVjb3JkcyBvZiB0aGF0IHR5cGUg
        Y2hhbmdlIGF0dHJpYnV0ZQogICAgdmFsdWVzIG9yIHN0YXRlcy4KCiAgICBA
        bWV0aG9kIHJlZ2lzdGVyRmlsdGVyZWRSZWNvcmRBcnJheQogICAgQHBhcmFt
        IHtEUy5SZWNvcmRBcnJheX0gYXJyYXkKICAgIEBwYXJhbSB7Q2xhc3N9IHR5
        cGUKICAgIEBwYXJhbSB7RnVuY3Rpb259IGZpbHRlcgogICovCiAgcmVnaXN0
        ZXJGaWx0ZXJlZFJlY29yZEFycmF5OiBmdW5jdGlvbihhcnJheSwgdHlwZSwg
        ZmlsdGVyKSB7CiAgICB2YXIgcmVjb3JkQXJyYXlzID0gdGhpcy5maWx0ZXJl
        ZFJlY29yZEFycmF5cy5nZXQodHlwZSk7CiAgICByZWNvcmRBcnJheXMucHVz
        aChhcnJheSk7CgogICAgdGhpcy51cGRhdGVGaWx0ZXIoYXJyYXksIHR5cGUs
        IGZpbHRlcik7CiAgfSwKCiAgLy8gSW50ZXJuYWxseSwgd2UgbWFpbnRhaW4g
        YSBtYXAgb2YgYWxsIHVubG9hZGVkIElEcyByZXF1ZXN0ZWQgYnkKICAvLyBh
        IE1hbnlBcnJheS4gQXMgdGhlIGFkYXB0ZXIgbG9hZHMgZGF0YSBpbnRvIHRo
        ZSBzdG9yZSwgdGhlCiAgLy8gc3RvcmUgbm90aWZpZXMgYW55IGludGVyZXN0
        ZWQgTWFueUFycmF5cy4gV2hlbiB0aGUgTWFueUFycmF5J3MKICAvLyB0b3Rh
        bCBudW1iZXIgb2YgbG9hZGluZyByZWNvcmRzIGRyb3BzIHRvIHplcm8sIGl0
        IGJlY29tZXMKICAvLyBgaXNMb2FkZWRgIGFuZCBmaXJlcyBhIGBkaWRMb2Fk
        YCBldmVudC4KICByZWdpc3RlcldhaXRpbmdSZWNvcmRBcnJheTogZnVuY3Rp
        b24ocmVjb3JkLCBhcnJheSkgewogICAgdmFyIGxvYWRpbmdSZWNvcmRBcnJh
        eXMgPSByZWNvcmQuX2xvYWRpbmdSZWNvcmRBcnJheXMgfHwgW107CiAgICBs
        b2FkaW5nUmVjb3JkQXJyYXlzLnB1c2goYXJyYXkpOwogICAgcmVjb3JkLl9s
        b2FkaW5nUmVjb3JkQXJyYXlzID0gbG9hZGluZ1JlY29yZEFycmF5czsKICB9
        Cn0pOwoKfSkoKTsKCgoKKGZ1bmN0aW9uKCkgewovKioKICBAbW9kdWxlIGVt
        YmVyLWRhdGEKKi8KCnZhciBnZXQgPSBFbWJlci5nZXQsIHNldCA9IEVtYmVy
        LnNldDsKdmFyIG1hcCA9IEVtYmVyLkFycmF5UG9seWZpbGxzLm1hcDsKCnZh
        ciBlcnJvclByb3BzID0gWydkZXNjcmlwdGlvbicsICdmaWxlTmFtZScsICds
        aW5lTnVtYmVyJywgJ21lc3NhZ2UnLCAnbmFtZScsICdudW1iZXInLCAnc3Rh
        Y2snXTsKCi8qKgogIEEgYERTLkludmFsaWRFcnJvcmAgaXMgdXNlZCBieSBh
        biBhZGFwdGVyIHRvIHNpZ25hbCB0aGUgZXh0ZXJuYWwgQVBJCiAgd2FzIHVu
        YWJsZSB0byBwcm9jZXNzIGEgcmVxdWVzdCBiZWNhdXNlIHRoZSBjb250ZW50
        IHdhcyBub3QKICBzZW1hbnRpY2FsbHkgY29ycmVjdCBvciBtZWFuaW5nZnVs
        IHBlciB0aGUgQVBJLiBVc3VhbGx5IHRoaXMgbWVhbnMgYQogIHJlY29yZCBm
        YWlsZWQgc29tZSBmb3JtIG9mIHNlcnZlciBzaWRlIHZhbGlkYXRpb24uIFdo
        ZW4gYSBwcm9taXNlCiAgZnJvbSBhbiBhZGFwdGVyIGlzIHJlamVjdGVkIHdp
        dGggYSBgRFMuSW52YWxpZEVycm9yYCB0aGUgcmVjb3JkIHdpbGwKICB0cmFu
        c2l0aW9uIHRvIHRoZSBgaW52YWxpZGAgc3RhdGUgYW5kIHRoZSBlcnJvcnMg
        d2lsbCBiZSBzZXQgdG8gdGhlCiAgYGVycm9yc2AgcHJvcGVydHkgb24gdGhl
        IHJlY29yZC4KCiAgRXhhbXBsZQoKICBgYGBqYXZhc2NyaXB0CiAgQXBwLkFw
        cGxpY2F0aW9uQWRhcHRlciA9IERTLlJFU1RBZGFwdGVyLmV4dGVuZCh7CiAg
        ICBhamF4RXJyb3I6IGZ1bmN0aW9uKGpxWEhSKSB7CiAgICAgIHZhciBlcnJv
        ciA9IHRoaXMuX3N1cGVyKGpxWEhSKTsKCiAgICAgIGlmIChqcVhIUiAmJiBq
        cVhIUi5zdGF0dXMgPT09IDQyMikgewogICAgICAgIHZhciBqc29uRXJyb3Jz
        ID0gRW1iZXIuJC5wYXJzZUpTT04oanFYSFIucmVzcG9uc2VUZXh0KVsiZXJy
        b3JzIl07CiAgICAgICAgcmV0dXJuIG5ldyBEUy5JbnZhbGlkRXJyb3IoanNv
        bkVycm9ycyk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIGVycm9y
        OwogICAgICB9CiAgICB9CiAgfSk7CiAgYGBgCgogIEBjbGFzcyBJbnZhbGlk
        RXJyb3IKICBAbmFtZXNwYWNlIERTCiovCkRTLkludmFsaWRFcnJvciA9IGZ1
        bmN0aW9uKGVycm9ycykgewogIHZhciB0bXAgPSBFcnJvci5wcm90b3R5cGUu
        Y29uc3RydWN0b3IuY2FsbCh0aGlzLCAiVGhlIGJhY2tlbmQgcmVqZWN0ZWQg
        dGhlIGNvbW1pdCBiZWNhdXNlIGl0IHdhcyBpbnZhbGlkOiAiICsgRW1iZXIu
        aW5zcGVjdChlcnJvcnMpKTsKICB0aGlzLmVycm9ycyA9IGVycm9yczsKCiAg
        Zm9yICh2YXIgaT0wLCBsPWVycm9yUHJvcHMubGVuZ3RoOyBpPGw7IGkrKykg
        ewogICAgdGhpc1tlcnJvclByb3BzW2ldXSA9IHRtcFtlcnJvclByb3BzW2ld
        XTsKICB9Cn07CkRTLkludmFsaWRFcnJvci5wcm90b3R5cGUgPSBFbWJlci5j
        cmVhdGUoRXJyb3IucHJvdG90eXBlKTsKCi8qKgogIEFuIGFkYXB0ZXIgaXMg
        YW4gb2JqZWN0IHRoYXQgcmVjZWl2ZXMgcmVxdWVzdHMgZnJvbSBhIHN0b3Jl
        IGFuZAogIHRyYW5zbGF0ZXMgdGhlbSBpbnRvIHRoZSBhcHByb3ByaWF0ZSBh
        Y3Rpb24gdG8gdGFrZSBhZ2FpbnN0IHlvdXIKICBwZXJzaXN0ZW5jZSBsYXll
        ci4gVGhlIHBlcnNpc3RlbmNlIGxheWVyIGlzIHVzdWFsbHkgYW4gSFRUUCBB
        UEksIGJ1dAogIG1heSBiZSBhbnl0aGluZywgc3VjaCBhcyB0aGUgYnJvd3Nl
        cidzIGxvY2FsIHN0b3JhZ2UuIFR5cGljYWxseSB0aGUKICBhZGFwdGVyIGlz
        IG5vdCBpbnZva2VkIGRpcmVjdGx5IGluc3RlYWQgaXRzIGZ1bmN0aW9uYWxp
        dHkgaXMgYWNjZXNzZWQKICB0aHJvdWdoIHRoZSBgc3RvcmVgLgoKICAjIyMg
        Q3JlYXRpbmcgYW4gQWRhcHRlcgoKICBGaXJzdCwgY3JlYXRlIGEgbmV3IHN1
        YmNsYXNzIG9mIGBEUy5BZGFwdGVyYDoKCiAgYGBgamF2YXNjcmlwdAogIEFw
        cC5NeUFkYXB0ZXIgPSBEUy5BZGFwdGVyLmV4dGVuZCh7CiAgICAvLyAuLi55
        b3VyIGNvZGUgaGVyZQogIH0pOwogIGBgYAoKICBUbyB0ZWxsIHlvdXIgc3Rv
        cmUgd2hpY2ggYWRhcHRlciB0byB1c2UsIHNldCBpdHMgYGFkYXB0ZXJgIHBy
        b3BlcnR5OgoKICBgYGBqYXZhc2NyaXB0CiAgQXBwLnN0b3JlID0gRFMuU3Rv
        cmUuY3JlYXRlKHsKICAgIGFkYXB0ZXI6ICdNeUFkYXB0ZXInCiAgfSk7CiAg
        YGBgCgogIGBEUy5BZGFwdGVyYCBpcyBhbiBhYnN0cmFjdCBiYXNlIGNsYXNz
        IHRoYXQgeW91IHNob3VsZCBvdmVycmlkZSBpbiB5b3VyCiAgYXBwbGljYXRp
        b24gdG8gY3VzdG9taXplIGl0IGZvciB5b3VyIGJhY2tlbmQuIFRoZSBtaW5p
        bXVtIHNldCBvZiBtZXRob2RzCiAgdGhhdCB5b3Ugc2hvdWxkIGltcGxlbWVu
        dCBpczoKCiAgICAqIGBmaW5kKClgCiAgICAqIGBjcmVhdGVSZWNvcmQoKWAK
        ICAgICogYHVwZGF0ZVJlY29yZCgpYAogICAgKiBgZGVsZXRlUmVjb3JkKClg
        CiAgICAqIGBmaW5kQWxsKClgCiAgICAqIGBmaW5kUXVlcnkoKWAKCiAgVG8g
        aW1wcm92ZSB0aGUgbmV0d29yayBwZXJmb3JtYW5jZSBvZiB5b3VyIGFwcGxp
        Y2F0aW9uLCB5b3UgY2FuIG9wdGltaXplCiAgeW91ciBhZGFwdGVyIGJ5IG92
        ZXJyaWRpbmcgdGhlc2UgbG93ZXItbGV2ZWwgbWV0aG9kczoKCiAgICAqIGBm
        aW5kTWFueSgpYAoKCiAgRm9yIGFuIGV4YW1wbGUgaW1wbGVtZW50YXRpb24s
        IHNlZSBgRFMuUkVTVEFkYXB0ZXJgLCB0aGUKICBpbmNsdWRlZCBSRVNUIGFk
        YXB0ZXIuCgogIEBjbGFzcyBBZGFwdGVyCiAgQG5hbWVzcGFjZSBEUwogIEBl
        eHRlbmRzIEVtYmVyLk9iamVjdAoqLwoKRFMuQWRhcHRlciA9IEVtYmVyLk9i
        amVjdC5leHRlbmQoewoKICAvKioKICAgIElmIHlvdSB3b3VsZCBsaWtlIHlv
        dXIgYWRhcHRlciB0byB1c2UgYSBjdXN0b20gc2VyaWFsaXplciB5b3UgY2Fu
        CiAgICBzZXQgdGhlIGBkZWZhdWx0U2VyaWFsaXplcmAgcHJvcGVydHkgdG8g
        YmUgdGhlIG5hbWUgb2YgdGhlIGN1c3RvbQogICAgc2VyaWFsaXplci4KCiAg
        ICBOb3RlIHRoZSBgZGVmYXVsdFNlcmlhbGl6ZXJgIHNlcmlhbGl6ZXIgaGFz
        IGEgbG93ZXIgcHJpb3JpdHkgdGhlbgogICAgYSBtb2RlbCBzcGVjaWZpYyBz
        ZXJpYWxpemVyIChpLmUuIGBQb3N0U2VyaWFsaXplcmApIG9yIHRoZQogICAg
        YGFwcGxpY2F0aW9uYCBzZXJpYWxpemVyLgoKICAgIGBgYGphdmFzY3JpcHQK
        ICAgIHZhciBEamFuZ29BZGFwdGVyID0gRFMuQWRhcHRlci5leHRlbmQoewog
        ICAgICBkZWZhdWx0U2VyaWFsaXplcjogJ2RqYW5nbycKICAgIH0pOwogICAg
        YGBgCgogICAgQHByb3BlcnR5IGRlZmF1bHRTZXJpYWxpemVyCiAgICBAdHlw
        ZSB7U3RyaW5nfQogICovCgogIC8qKgogICAgVGhlIGBmaW5kKClgIG1ldGhv
        ZCBpcyBpbnZva2VkIHdoZW4gdGhlIHN0b3JlIGlzIGFza2VkIGZvciBhIHJl
        Y29yZCB0aGF0CiAgICBoYXMgbm90IHByZXZpb3VzbHkgYmVlbiBsb2FkZWQu
        IEluIHJlc3BvbnNlIHRvIGBmaW5kKClgIGJlaW5nIGNhbGxlZCwgeW91CiAg
        ICBzaG91bGQgcXVlcnkgeW91ciBwZXJzaXN0ZW5jZSBsYXllciBmb3IgYSBy
        ZWNvcmQgd2l0aCB0aGUgZ2l2ZW4gSUQuIE9uY2UKICAgIGZvdW5kLCB5b3Ug
        Y2FuIGFzeW5jaHJvbm91c2x5IGNhbGwgdGhlIHN0b3JlJ3MgYHB1c2goKWAg
        bWV0aG9kIHRvIHB1c2gKICAgIHRoZSByZWNvcmQgaW50byB0aGUgc3RvcmUu
        CgogICAgSGVyZSBpcyBhbiBleGFtcGxlIGBmaW5kYCBpbXBsZW1lbnRhdGlv
        bjoKCiAgICBgYGBqYXZhc2NyaXB0CiAgICBBcHAuQXBwbGljYXRpb25BZGFw
        dGVyID0gRFMuQWRhcHRlci5leHRlbmQoewogICAgICBmaW5kOiBmdW5jdGlv
        bihzdG9yZSwgdHlwZSwgaWQpIHsKICAgICAgICB2YXIgdXJsID0gW3R5cGUs
        IGlkXS5qb2luKCcvJyk7CgogICAgICAgIHJldHVybiBuZXcgRW1iZXIuUlNW
        UC5Qcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkgewogICAgICAg
        ICAgalF1ZXJ5LmdldEpTT04odXJsKS50aGVuKGZ1bmN0aW9uKGRhdGEpIHsK
        ICAgICAgICAgICAgRW1iZXIucnVuKG51bGwsIHJlc29sdmUsIGRhdGEpOwog
        ICAgICAgICAgfSwgZnVuY3Rpb24oanFYSFIpIHsKICAgICAgICAgICAganFY
        SFIudGhlbiA9IG51bGw7IC8vIHRhbWUgalF1ZXJ5J3MgaWxsIG1hbm5lcmVk
        IHByb21pc2VzCiAgICAgICAgICAgIEVtYmVyLnJ1bihudWxsLCByZWplY3Qs
        IGpxWEhSKTsKICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgICB9CiAg
        ICB9KTsKICAgIGBgYAoKICAgIEBtZXRob2QgZmluZAogICAgQHBhcmFtIHtE
        Uy5TdG9yZX0gc3RvcmUKICAgIEBwYXJhbSB7c3ViY2xhc3Mgb2YgRFMuTW9k
        ZWx9IHR5cGUKICAgIEBwYXJhbSB7U3RyaW5nfSBpZAogICAgQHJldHVybiB7
        UHJvbWlzZX0gcHJvbWlzZQogICovCiAgZmluZDogRW1iZXIucmVxdWlyZWQo
        RnVuY3Rpb24pLAoKICAvKioKICAgIFRoZSBgZmluZEFsbCgpYCBtZXRob2Qg
        aXMgY2FsbGVkIHdoZW4geW91IGNhbGwgYGZpbmRgIG9uIHRoZSBzdG9yZQog
        ICAgd2l0aG91dCBhbiBJRCAoaS5lLiBgc3RvcmUuZmluZCgncG9zdCcpYCku
        CgogICAgRXhhbXBsZQoKICAgIGBgYGphdmFzY3JpcHQKICAgIEFwcC5BcHBs
        aWNhdGlvbkFkYXB0ZXIgPSBEUy5BZGFwdGVyLmV4dGVuZCh7CiAgICAgIGZp
        bmRBbGw6IGZ1bmN0aW9uKHN0b3JlLCB0eXBlLCBzaW5jZVRva2VuKSB7CiAg
        ICAgICAgdmFyIHVybCA9IHR5cGU7CiAgICAgICAgdmFyIHF1ZXJ5ID0geyBz
        aW5jZTogc2luY2VUb2tlbiB9OwogICAgICAgIHJldHVybiBuZXcgRW1iZXIu
        UlNWUC5Qcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkgewogICAg
        ICAgICAgalF1ZXJ5LmdldEpTT04odXJsLCBxdWVyeSkudGhlbihmdW5jdGlv
        bihkYXRhKSB7CiAgICAgICAgICAgIEVtYmVyLnJ1bihudWxsLCByZXNvbHZl
        LCBkYXRhKTsKICAgICAgICAgIH0sIGZ1bmN0aW9uKGpxWEhSKSB7CiAgICAg
        ICAgICAgIGpxWEhSLnRoZW4gPSBudWxsOyAvLyB0YW1lIGpRdWVyeSdzIGls
        bCBtYW5uZXJlZCBwcm9taXNlcwogICAgICAgICAgICBFbWJlci5ydW4obnVs
        bCwgcmVqZWN0LCBqcVhIUik7CiAgICAgICAgICB9KTsKICAgICAgICB9KTsK
        ICAgICAgfQogICAgfSk7CiAgICBgYGAKCiAgICBAcHJpdmF0ZQogICAgQG1l
        dGhvZCBmaW5kQWxsCiAgICBAcGFyYW0ge0RTLlN0b3JlfSBzdG9yZQogICAg
        QHBhcmFtIHtzdWJjbGFzcyBvZiBEUy5Nb2RlbH0gdHlwZQogICAgQHBhcmFt
        IHtTdHJpbmd9IHNpbmNlVG9rZW4KICAgIEByZXR1cm4ge1Byb21pc2V9IHBy
        b21pc2UKICAqLwogIGZpbmRBbGw6IG51bGwsCgogIC8qKgogICAgVGhpcyBt
        ZXRob2QgaXMgY2FsbGVkIHdoZW4geW91IGNhbGwgYGZpbmRgIG9uIHRoZSBz
        dG9yZSB3aXRoIGEKICAgIHF1ZXJ5IG9iamVjdCBhcyB0aGUgc2Vjb25kIHBh
        cmFtZXRlciAoaS5lLiBgc3RvcmUuZmluZCgncGVyc29uJywgewogICAgcGFn
        ZTogMSB9KWApLgoKICAgIEV4YW1wbGUKCiAgICBgYGBqYXZhc2NyaXB0CiAg
        ICBBcHAuQXBwbGljYXRpb25BZGFwdGVyID0gRFMuQWRhcHRlci5leHRlbmQo
        ewogICAgICBmaW5kUXVlcnk6IGZ1bmN0aW9uKHN0b3JlLCB0eXBlLCBxdWVy
        eSkgewogICAgICAgIHZhciB1cmwgPSB0eXBlOwogICAgICAgIHJldHVybiBu
        ZXcgRW1iZXIuUlNWUC5Qcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVj
        dCkgewogICAgICAgICAgalF1ZXJ5LmdldEpTT04odXJsLCBxdWVyeSkudGhl
        bihmdW5jdGlvbihkYXRhKSB7CiAgICAgICAgICAgIEVtYmVyLnJ1bihudWxs
        LCByZXNvbHZlLCBkYXRhKTsKICAgICAgICAgIH0sIGZ1bmN0aW9uKGpxWEhS
        KSB7CiAgICAgICAgICAgIGpxWEhSLnRoZW4gPSBudWxsOyAvLyB0YW1lIGpR
        dWVyeSdzIGlsbCBtYW5uZXJlZCBwcm9taXNlcwogICAgICAgICAgICBFbWJl
        ci5ydW4obnVsbCwgcmVqZWN0LCBqcVhIUik7CiAgICAgICAgICB9KTsKICAg
        ICAgICB9KTsKICAgICAgfQogICAgfSk7CiAgICBgYGAKCiAgICBAcHJpdmF0
        ZQogICAgQG1ldGhvZCBmaW5kUXVlcnkKICAgIEBwYXJhbSB7RFMuU3RvcmV9
        IHN0b3JlCiAgICBAcGFyYW0ge3N1YmNsYXNzIG9mIERTLk1vZGVsfSB0eXBl
        CiAgICBAcGFyYW0ge09iamVjdH0gcXVlcnkKICAgIEBwYXJhbSB7RFMuQWRh
        cHRlclBvcHVsYXRlZFJlY29yZEFycmF5fSByZWNvcmRBcnJheQogICAgQHJl
        dHVybiB7UHJvbWlzZX0gcHJvbWlzZQogICovCiAgZmluZFF1ZXJ5OiBudWxs
        LAoKICAvKioKICAgIElmIHRoZSBnbG9iYWxseSB1bmlxdWUgSURzIGZvciB5
        b3VyIHJlY29yZHMgc2hvdWxkIGJlIGdlbmVyYXRlZCBvbiB0aGUgY2xpZW50
        LAogICAgaW1wbGVtZW50IHRoZSBgZ2VuZXJhdGVJZEZvclJlY29yZCgpYCBt
        ZXRob2QuIFRoaXMgbWV0aG9kIHdpbGwgYmUgaW52b2tlZAogICAgZWFjaCB0
        aW1lIHlvdSBjcmVhdGUgYSBuZXcgcmVjb3JkLCBhbmQgdGhlIHZhbHVlIHJl
        dHVybmVkIGZyb20gaXQgd2lsbCBiZQogICAgYXNzaWduZWQgdG8gdGhlIHJl
        Y29yZCdzIGBwcmltYXJ5S2V5YC4KCiAgICBNb3N0IHRyYWRpdGlvbmFsIFJF
        U1QtbGlrZSBIVFRQIEFQSXMgd2lsbCBub3QgdXNlIHRoaXMgbWV0aG9kLiBJ
        bnN0ZWFkLCB0aGUgSUQKICAgIG9mIHRoZSByZWNvcmQgd2lsbCBiZSBzZXQg
        YnkgdGhlIHNlcnZlciwgYW5kIHlvdXIgYWRhcHRlciB3aWxsIHVwZGF0ZSB0
        aGUgc3RvcmUKICAgIHdpdGggdGhlIG5ldyBJRCB3aGVuIGl0IGNhbGxzIGBk
        aWRDcmVhdGVSZWNvcmQoKWAuIE9ubHkgaW1wbGVtZW50IHRoaXMgbWV0aG9k
        IGlmCiAgICB5b3UgaW50ZW5kIHRvIGdlbmVyYXRlIHJlY29yZCBJRHMgb24g
        dGhlIGNsaWVudC1zaWRlLgoKICAgIFRoZSBgZ2VuZXJhdGVJZEZvclJlY29y
        ZCgpYCBtZXRob2Qgd2lsbCBiZSBpbnZva2VkIHdpdGggdGhlIHJlcXVlc3Rp
        bmcgc3RvcmUgYXMKICAgIHRoZSBmaXJzdCBwYXJhbWV0ZXIgYW5kIHRoZSBu
        ZXdseSBjcmVhdGVkIHJlY29yZCBhcyB0aGUgc2Vjb25kIHBhcmFtZXRlcjoK
        CiAgICBgYGBqYXZhc2NyaXB0CiAgICBnZW5lcmF0ZUlkRm9yUmVjb3JkOiBm
        dW5jdGlvbihzdG9yZSwgcmVjb3JkKSB7CiAgICAgIHZhciB1dWlkID0gQXBw
        LmdlbmVyYXRlVVVJRFdpdGhTdGF0aXN0aWNhbGx5TG93T2Rkc09mQ29sbGlz
        aW9uKCk7CiAgICAgIHJldHVybiB1dWlkOwogICAgfQogICAgYGBgCgogICAg
        QG1ldGhvZCBnZW5lcmF0ZUlkRm9yUmVjb3JkCiAgICBAcGFyYW0ge0RTLlN0
        b3JlfSBzdG9yZQogICAgQHBhcmFtIHtEUy5Nb2RlbH0gcmVjb3JkCiAgICBA
        cmV0dXJuIHtTdHJpbmd8TnVtYmVyfSBpZAogICovCiAgZ2VuZXJhdGVJZEZv
        clJlY29yZDogbnVsbCwKCiAgLyoqCiAgICBQcm94aWVzIHRvIHRoZSBzZXJp
        YWxpemVyJ3MgYHNlcmlhbGl6ZWAgbWV0aG9kLgoKICAgIEV4YW1wbGUKCiAg
        ICBgYGBqYXZhc2NyaXB0CiAgICBBcHAuQXBwbGljYXRpb25BZGFwdGVyID0g
        RFMuQWRhcHRlci5leHRlbmQoewogICAgICBjcmVhdGVSZWNvcmQ6IGZ1bmN0
        aW9uKHN0b3JlLCB0eXBlLCByZWNvcmQpIHsKICAgICAgICB2YXIgZGF0YSA9
        IHRoaXMuc2VyaWFsaXplKHJlY29yZCwgeyBpbmNsdWRlSWQ6IHRydWUgfSk7
        CiAgICAgICAgdmFyIHVybCA9IHR5cGU7CgogICAgICAgIC8vIC4uLgogICAg
        ICB9CiAgICB9KTsKICAgIGBgYAoKICAgIEBtZXRob2Qgc2VyaWFsaXplCiAg
        ICBAcGFyYW0ge0RTLk1vZGVsfSByZWNvcmQKICAgIEBwYXJhbSB7T2JqZWN0
        fSAgIG9wdGlvbnMKICAgIEByZXR1cm4ge09iamVjdH0gc2VyaWFsaXplZCBy
        ZWNvcmQKICAqLwogIHNlcmlhbGl6ZTogZnVuY3Rpb24ocmVjb3JkLCBvcHRp
        b25zKSB7CiAgICByZXR1cm4gZ2V0KHJlY29yZCwgJ3N0b3JlJykuc2VyaWFs
        aXplckZvcihyZWNvcmQuY29uc3RydWN0b3IudHlwZUtleSkuc2VyaWFsaXpl
        KHJlY29yZCwgb3B0aW9ucyk7CiAgfSwKCiAgLyoqCiAgICBJbXBsZW1lbnQg
        dGhpcyBtZXRob2QgaW4gYSBzdWJjbGFzcyB0byBoYW5kbGUgdGhlIGNyZWF0
        aW9uIG9mCiAgICBuZXcgcmVjb3Jkcy4KCiAgICBTZXJpYWxpemVzIHRoZSBy
        ZWNvcmQgYW5kIHNlbmQgaXQgdG8gdGhlIHNlcnZlci4KCiAgICBFeGFtcGxl
        CgogICAgYGBgamF2YXNjcmlwdAogICAgQXBwLkFwcGxpY2F0aW9uQWRhcHRl
        ciA9IERTLkFkYXB0ZXIuZXh0ZW5kKHsKICAgICAgY3JlYXRlUmVjb3JkOiBm
        dW5jdGlvbihzdG9yZSwgdHlwZSwgcmVjb3JkKSB7CiAgICAgICAgdmFyIGRh
        dGEgPSB0aGlzLnNlcmlhbGl6ZShyZWNvcmQsIHsgaW5jbHVkZUlkOiB0cnVl
        IH0pOwogICAgICAgIHZhciB1cmwgPSB0eXBlOwoKICAgICAgICByZXR1cm4g
        bmV3IEVtYmVyLlJTVlAuUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWpl
        Y3QpIHsKICAgICAgICAgIGpRdWVyeS5hamF4KHsKICAgICAgICAgICAgdHlw
        ZTogJ1BPU1QnLAogICAgICAgICAgICB1cmw6IHVybCwKICAgICAgICAgICAg
        ZGF0YVR5cGU6ICdqc29uJywKICAgICAgICAgICAgZGF0YTogZGF0YQogICAg
        ICAgICAgfSkudGhlbihmdW5jdGlvbihkYXRhKSB7CiAgICAgICAgICAgIEVt
        YmVyLnJ1bihudWxsLCByZXNvbHZlLCBkYXRhKTsKICAgICAgICAgIH0sIGZ1
        bmN0aW9uKGpxWEhSKSB7CiAgICAgICAgICAgIGpxWEhSLnRoZW4gPSBudWxs
        OyAvLyB0YW1lIGpRdWVyeSdzIGlsbCBtYW5uZXJlZCBwcm9taXNlcwogICAg
        ICAgICAgICBFbWJlci5ydW4obnVsbCwgcmVqZWN0LCBqcVhIUik7CiAgICAg
        ICAgICB9KTsKICAgICAgICB9KTsKICAgICAgfQogICAgfSk7CiAgICBgYGAK
        CiAgICBAbWV0aG9kIGNyZWF0ZVJlY29yZAogICAgQHBhcmFtIHtEUy5TdG9y
        ZX0gc3RvcmUKICAgIEBwYXJhbSB7c3ViY2xhc3Mgb2YgRFMuTW9kZWx9IHR5
        cGUgICB0aGUgRFMuTW9kZWwgY2xhc3Mgb2YgdGhlIHJlY29yZAogICAgQHBh
        cmFtIHtEUy5Nb2RlbH0gcmVjb3JkCiAgICBAcmV0dXJuIHtQcm9taXNlfSBw
        cm9taXNlCiAgKi8KICBjcmVhdGVSZWNvcmQ6IEVtYmVyLnJlcXVpcmVkKEZ1
        bmN0aW9uKSwKCiAgLyoqCiAgICBJbXBsZW1lbnQgdGhpcyBtZXRob2QgaW4g
        YSBzdWJjbGFzcyB0byBoYW5kbGUgdGhlIHVwZGF0aW5nIG9mCiAgICBhIHJl
        Y29yZC4KCiAgICBTZXJpYWxpemVzIHRoZSByZWNvcmQgdXBkYXRlIGFuZCBz
        ZW5kIGl0IHRvIHRoZSBzZXJ2ZXIuCgogICAgRXhhbXBsZQoKICAgIGBgYGph
        dmFzY3JpcHQKICAgIEFwcC5BcHBsaWNhdGlvbkFkYXB0ZXIgPSBEUy5BZGFw
        dGVyLmV4dGVuZCh7CiAgICAgIHVwZGF0ZVJlY29yZDogZnVuY3Rpb24oc3Rv
        cmUsIHR5cGUsIHJlY29yZCkgewogICAgICAgIHZhciBkYXRhID0gdGhpcy5z
        ZXJpYWxpemUocmVjb3JkLCB7IGluY2x1ZGVJZDogdHJ1ZSB9KTsKICAgICAg
        ICB2YXIgaWQgPSByZWNvcmQuZ2V0KCdpZCcpOwogICAgICAgIHZhciB1cmwg
        PSBbdHlwZSwgaWRdLmpvaW4oJy8nKTsKCiAgICAgICAgcmV0dXJuIG5ldyBF
        bWJlci5SU1ZQLlByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7
        CiAgICAgICAgICBqUXVlcnkuYWpheCh7CiAgICAgICAgICAgIHR5cGU6ICdQ
        VVQnLAogICAgICAgICAgICB1cmw6IHVybCwKICAgICAgICAgICAgZGF0YVR5
        cGU6ICdqc29uJywKICAgICAgICAgICAgZGF0YTogZGF0YQogICAgICAgICAg
        fSkudGhlbihmdW5jdGlvbihkYXRhKSB7CiAgICAgICAgICAgIEVtYmVyLnJ1
        bihudWxsLCByZXNvbHZlLCBkYXRhKTsKICAgICAgICAgIH0sIGZ1bmN0aW9u
        KGpxWEhSKSB7CiAgICAgICAgICAgIGpxWEhSLnRoZW4gPSBudWxsOyAvLyB0
        YW1lIGpRdWVyeSdzIGlsbCBtYW5uZXJlZCBwcm9taXNlcwogICAgICAgICAg
        ICBFbWJlci5ydW4obnVsbCwgcmVqZWN0LCBqcVhIUik7CiAgICAgICAgICB9
        KTsKICAgICAgICB9KTsKICAgICAgfQogICAgfSk7CiAgICBgYGAKCiAgICBA
        bWV0aG9kIHVwZGF0ZVJlY29yZAogICAgQHBhcmFtIHtEUy5TdG9yZX0gc3Rv
        cmUKICAgIEBwYXJhbSB7c3ViY2xhc3Mgb2YgRFMuTW9kZWx9IHR5cGUgICB0
        aGUgRFMuTW9kZWwgY2xhc3Mgb2YgdGhlIHJlY29yZAogICAgQHBhcmFtIHtE
        Uy5Nb2RlbH0gcmVjb3JkCiAgICBAcmV0dXJuIHtQcm9taXNlfSBwcm9taXNl
        CiAgKi8KICB1cGRhdGVSZWNvcmQ6IEVtYmVyLnJlcXVpcmVkKEZ1bmN0aW9u
        KSwKCiAgLyoqCiAgICBJbXBsZW1lbnQgdGhpcyBtZXRob2QgaW4gYSBzdWJj
        bGFzcyB0byBoYW5kbGUgdGhlIGRlbGV0aW9uIG9mCiAgICBhIHJlY29yZC4K
        CiAgICBTZW5kcyBhIGRlbGV0ZSByZXF1ZXN0IGZvciB0aGUgcmVjb3JkIHRv
        IHRoZSBzZXJ2ZXIuCgogICAgRXhhbXBsZQoKICAgIGBgYGphdmFzY3JpcHQK
        ICAgIEFwcC5BcHBsaWNhdGlvbkFkYXB0ZXIgPSBEUy5BZGFwdGVyLmV4dGVu
        ZCh7CiAgICAgIGRlbGV0ZVJlY29yZDogZnVuY3Rpb24oc3RvcmUsIHR5cGUs
        IHJlY29yZCkgewogICAgICAgIHZhciBkYXRhID0gdGhpcy5zZXJpYWxpemUo
        cmVjb3JkLCB7IGluY2x1ZGVJZDogdHJ1ZSB9KTsKICAgICAgICB2YXIgaWQg
        PSByZWNvcmQuZ2V0KCdpZCcpOwogICAgICAgIHZhciB1cmwgPSBbdHlwZSwg
        aWRdLmpvaW4oJy8nKTsKCiAgICAgICAgcmV0dXJuIG5ldyBFbWJlci5SU1ZQ
        LlByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAg
        ICBqUXVlcnkuYWpheCh7CiAgICAgICAgICAgIHR5cGU6ICdERUxFVEUnLAog
        ICAgICAgICAgICB1cmw6IHVybCwKICAgICAgICAgICAgZGF0YVR5cGU6ICdq
        c29uJywKICAgICAgICAgICAgZGF0YTogZGF0YQogICAgICAgICAgfSkudGhl
        bihmdW5jdGlvbihkYXRhKSB7CiAgICAgICAgICAgIEVtYmVyLnJ1bihudWxs
        LCByZXNvbHZlLCBkYXRhKTsKICAgICAgICAgIH0sIGZ1bmN0aW9uKGpxWEhS
        KSB7CiAgICAgICAgICAgIGpxWEhSLnRoZW4gPSBudWxsOyAvLyB0YW1lIGpR
        dWVyeSdzIGlsbCBtYW5uZXJlZCBwcm9taXNlcwogICAgICAgICAgICBFbWJl
        ci5ydW4obnVsbCwgcmVqZWN0LCBqcVhIUik7CiAgICAgICAgICB9KTsKICAg
        ICAgICB9KTsKICAgICAgfQogICAgfSk7CiAgICBgYGAKCiAgICBAbWV0aG9k
        IGRlbGV0ZVJlY29yZAogICAgQHBhcmFtIHtEUy5TdG9yZX0gc3RvcmUKICAg
        IEBwYXJhbSB7c3ViY2xhc3Mgb2YgRFMuTW9kZWx9IHR5cGUgICB0aGUgRFMu
        TW9kZWwgY2xhc3Mgb2YgdGhlIHJlY29yZAogICAgQHBhcmFtIHtEUy5Nb2Rl
        bH0gcmVjb3JkCiAgICBAcmV0dXJuIHtQcm9taXNlfSBwcm9taXNlCiAgKi8K
        ICBkZWxldGVSZWNvcmQ6IEVtYmVyLnJlcXVpcmVkKEZ1bmN0aW9uKSwKCiAg
        LyoqCiAgICBGaW5kIG11bHRpcGxlIHJlY29yZHMgYXQgb25jZS4KCiAgICBC
        eSBkZWZhdWx0LCBpdCBsb29wcyBvdmVyIHRoZSBwcm92aWRlZCBpZHMgYW5k
        IGNhbGxzIGBmaW5kYCBvbiBlYWNoLgogICAgTWF5IGJlIG92ZXJ3cml0dGVu
        IHRvIGltcHJvdmUgcGVyZm9ybWFuY2UgYW5kIHJlZHVjZSB0aGUgbnVtYmVy
        IG9mCiAgICBzZXJ2ZXIgcmVxdWVzdHMuCgogICAgRXhhbXBsZQoKICAgIGBg
        YGphdmFzY3JpcHQKICAgIEFwcC5BcHBsaWNhdGlvbkFkYXB0ZXIgPSBEUy5B
        ZGFwdGVyLmV4dGVuZCh7CiAgICAgIGZpbmRNYW55OiBmdW5jdGlvbihzdG9y
        ZSwgdHlwZSwgaWRzKSB7CiAgICAgICAgdmFyIHVybCA9IHR5cGU7CiAgICAg
        ICAgcmV0dXJuIG5ldyBFbWJlci5SU1ZQLlByb21pc2UoZnVuY3Rpb24ocmVz
        b2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgICBqUXVlcnkuZ2V0SlNPTih1cmws
        IHtpZHM6IGlkc30pLnRoZW4oZnVuY3Rpb24oZGF0YSkgewogICAgICAgICAg
        ICBFbWJlci5ydW4obnVsbCwgcmVzb2x2ZSwgZGF0YSk7CiAgICAgICAgICB9
        LCBmdW5jdGlvbihqcVhIUikgewogICAgICAgICAgICBqcVhIUi50aGVuID0g
        bnVsbDsgLy8gdGFtZSBqUXVlcnkncyBpbGwgbWFubmVyZWQgcHJvbWlzZXMK
        ICAgICAgICAgICAgRW1iZXIucnVuKG51bGwsIHJlamVjdCwganFYSFIpOwog
        ICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0pOwogICAg
        YGBgCgogICAgQG1ldGhvZCBmaW5kTWFueQogICAgQHBhcmFtIHtEUy5TdG9y
        ZX0gc3RvcmUKICAgIEBwYXJhbSB7c3ViY2xhc3Mgb2YgRFMuTW9kZWx9IHR5
        cGUgICB0aGUgRFMuTW9kZWwgY2xhc3Mgb2YgdGhlIHJlY29yZHMKICAgIEBw
        YXJhbSB7QXJyYXl9ICAgIGlkcwogICAgQHJldHVybiB7UHJvbWlzZX0gcHJv
        bWlzZQogICovCiAgZmluZE1hbnk6IGZ1bmN0aW9uKHN0b3JlLCB0eXBlLCBp
        ZHMpIHsKICAgIHZhciBwcm9taXNlcyA9IG1hcC5jYWxsKGlkcywgZnVuY3Rp
        b24oaWQpIHsKICAgICAgcmV0dXJuIHRoaXMuZmluZChzdG9yZSwgdHlwZSwg
        aWQpOwogICAgfSwgdGhpcyk7CgogICAgcmV0dXJuIEVtYmVyLlJTVlAuYWxs
        KHByb21pc2VzKTsKICB9Cn0pOwoKfSkoKTsKCgoKKGZ1bmN0aW9uKCkgewov
        KioKICBAbW9kdWxlIGVtYmVyLWRhdGEKKi8KCnZhciBnZXQgPSBFbWJlci5n
        ZXQsIGZtdCA9IEVtYmVyLlN0cmluZy5mbXQsCiAgICBpbmRleE9mID0gRW1i
        ZXIuRW51bWVyYWJsZVV0aWxzLmluZGV4T2Y7Cgp2YXIgY291bnRlciA9IDA7
        CgovKioKICBgRFMuRml4dHVyZUFkYXB0ZXJgIGlzIGFuIGFkYXB0ZXIgdGhh
        dCBsb2FkcyByZWNvcmRzIGZyb20gbWVtb3J5LgogIEl0cyBwcmltYXJpbHkg
        dXNlZCBmb3IgZGV2ZWxvcG1lbnQgYW5kIHRlc3RpbmcuIFlvdSBjYW4gYWxz
        byB1c2UKICBgRFMuRml4dHVyZUFkYXB0ZXJgIHdoaWxlIHdvcmtpbmcgb24g
        dGhlIEFQSSBidXQgYXJlIG5vdCByZWFkeSB0bwogIGludGVncmF0ZSB5ZXQu
        IEl0IGlzIGEgZnVsbHkgZnVuY3Rpb25pbmcgYWRhcHRlci4gQWxsIENSVUQg
        bWV0aG9kcwogIGFyZSBpbXBsZW1lbnRlZC4gWW91IGNhbiBhbHNvIGltcGxl
        bWVudCBxdWVyeSBsb2dpYyB0aGF0IGEgcmVtb3RlCiAgc3lzdGVtIHdvdWxk
        IGRvLiBJdHMgcG9zc2libGUgdG8gZG8gZGV2ZWxvcCB5b3VyIGVudGlyZSBh
        cHBsaWNhdGlvbgogIHdpdGggYERTLkZpeHR1cmVBZGFwdGVyYC4KCiAgRm9y
        IGluZm9ybWF0aW9uIG9uIGhvdyB0byB1c2UgdGhlIGBGaXh0dXJlQWRhcHRl
        cmAgaW4geW91cgogIGFwcGxpY2F0aW9uIHBsZWFzZSBzZWUgdGhlIFtGaXh0
        dXJlQWRhcHRlcgogIGd1aWRlXSgvZ3VpZGVzL21vZGVscy90aGUtZml4dHVy
        ZS1hZGFwdGVyLykuCgogIEBjbGFzcyBGaXh0dXJlQWRhcHRlcgogIEBuYW1l
        c3BhY2UgRFMKICBAZXh0ZW5kcyBEUy5BZGFwdGVyCiovCkRTLkZpeHR1cmVB
        ZGFwdGVyID0gRFMuQWRhcHRlci5leHRlbmQoewogIC8vIGJ5IGRlZmF1bHQs
        IGZpeHR1cmVzIGFyZSBhbHJlYWR5IGluIG5vcm1hbGl6ZWQgZm9ybQogIHNl
        cmlhbGl6ZXI6IG51bGwsCgogIC8qKgogICAgSWYgYHNpbXVsYXRlUmVtb3Rl
        UmVzcG9uc2VgIGlzIGB0cnVlYCB0aGUgYEZpeHR1cmVBZGFwdGVyYCB3aWxs
        CiAgICB3YWl0IGEgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyBiZWZvcmUgcmVz
        b2x2aW5nIHByb21pc2VzIHdpdGggdGhlCiAgICBmaXh0dXJlIHZhbHVlcy4g
        VGhlIHdhaXQgdGltZSBjYW4gYmUgY29uZmlndXJlZCB2aWEgdGhlIGBsYXRl
        bmN5YAogICAgcHJvcGVydHkuCgogICAgQHByb3BlcnR5IHNpbXVsYXRlUmVt
        b3RlUmVzcG9uc2UKICAgIEB0eXBlIHtCb29sZWFufQogICAgQGRlZmF1bHQg
        dHJ1ZQogICovCiAgc2ltdWxhdGVSZW1vdGVSZXNwb25zZTogdHJ1ZSwKCiAg
        LyoqCiAgICBCeSBkZWZhdWx0IHRoZSBgRml4dHVyZUFkYXB0ZXJgIHdpbGwg
        c2ltdWxhdGUgYSB3YWl0IG9mIHRoZQogICAgYGxhdGVuY3lgIG1pbGxpc2Vj
        b25kcyBiZWZvcmUgcmVzb2x2aW5nIHByb21pc2VzIHdpdGggdGhlIGZpeHR1
        cmUKICAgIHZhbHVlcy4gVGhpcyBiZWhhdmlvciBjYW4gYmUgdHVybmVkIG9m
        ZiB2aWEgdGhlCiAgICBgc2ltdWxhdGVSZW1vdGVSZXNwb25zZWAgcHJvcGVy
        dHkuCgogICAgQHByb3BlcnR5IGxhdGVuY3kKICAgIEB0eXBlIHtOdW1iZXJ9
        CiAgICBAZGVmYXVsdCA1MAogICovCiAgbGF0ZW5jeTogNTAsCgogIC8qKgog
        ICAgSW1wbGVtZW50IHRoaXMgbWV0aG9kIGluIG9yZGVyIHRvIHByb3ZpZGUg
        ZGF0YSBhc3NvY2lhdGVkIHdpdGggYSB0eXBlCgogICAgQG1ldGhvZCBmaXh0
        dXJlc0ZvclR5cGUKICAgIEBwYXJhbSB7U3ViY2xhc3Mgb2YgRFMuTW9kZWx9
        IHR5cGUKICAgIEByZXR1cm4ge0FycmF5fQogICovCiAgZml4dHVyZXNGb3JU
        eXBlOiBmdW5jdGlvbih0eXBlKSB7CiAgICBpZiAodHlwZS5GSVhUVVJFUykg
        ewogICAgICB2YXIgZml4dHVyZXMgPSBFbWJlci5BKHR5cGUuRklYVFVSRVMp
        OwogICAgICByZXR1cm4gZml4dHVyZXMubWFwKGZ1bmN0aW9uKGZpeHR1cmUp
        ewogICAgICAgIHZhciBmaXh0dXJlSWRUeXBlID0gdHlwZW9mIGZpeHR1cmUu
        aWQ7CiAgICAgICAgaWYoZml4dHVyZUlkVHlwZSAhPT0gIm51bWJlciIgJiYg
        Zml4dHVyZUlkVHlwZSAhPT0gInN0cmluZyIpewogICAgICAgICAgdGhyb3cg
        bmV3IEVycm9yKGZtdCgndGhlIGlkIHByb3BlcnR5IG11c3QgYmUgZGVmaW5l
        ZCBhcyBhIG51bWJlciBvciBzdHJpbmcgZm9yIGZpeHR1cmUgJUAnLCBbZml4
        dHVyZV0pKTsKICAgICAgICB9CiAgICAgICAgZml4dHVyZS5pZCA9IGZpeHR1
        cmUuaWQgKyAnJzsKICAgICAgICByZXR1cm4gZml4dHVyZTsKICAgICAgfSk7
        CiAgICB9CiAgICByZXR1cm4gbnVsbDsKICB9LAoKICAvKioKICAgIEltcGxl
        bWVudCB0aGlzIG1ldGhvZCBpbiBvcmRlciB0byBxdWVyeSBmaXh0dXJlcyBk
        YXRhCgogICAgQG1ldGhvZCBxdWVyeUZpeHR1cmVzCiAgICBAcGFyYW0ge0Fy
        cmF5fSBmaXh0dXJlCiAgICBAcGFyYW0ge09iamVjdH0gcXVlcnkKICAgIEBw
        YXJhbSB7U3ViY2xhc3Mgb2YgRFMuTW9kZWx9IHR5cGUKICAgIEByZXR1cm4g
        e1Byb21pc2V8QXJyYXl9CiAgKi8KICBxdWVyeUZpeHR1cmVzOiBmdW5jdGlv
        bihmaXh0dXJlcywgcXVlcnksIHR5cGUpIHsKICAgIEVtYmVyLmFzc2VydCgn
        Tm90IGltcGxlbWVudGVkOiBZb3UgbXVzdCBvdmVycmlkZSB0aGUgRFMuRml4
        dHVyZUFkYXB0ZXI6OnF1ZXJ5Rml4dHVyZXMgbWV0aG9kIHRvIHN1cHBvcnQg
        cXVlcnlpbmcgdGhlIGZpeHR1cmUgc3RvcmUuJyk7CiAgfSwKCiAgLyoqCiAg
        ICBAbWV0aG9kIHVwZGF0ZUZpeHR1cmVzCiAgICBAcGFyYW0ge1N1YmNsYXNz
        IG9mIERTLk1vZGVsfSB0eXBlCiAgICBAcGFyYW0ge0FycmF5fSBmaXh0dXJl
        CiAgKi8KICB1cGRhdGVGaXh0dXJlczogZnVuY3Rpb24odHlwZSwgZml4dHVy
        ZSkgewogICAgaWYoIXR5cGUuRklYVFVSRVMpIHsKICAgICAgdHlwZS5GSVhU
        VVJFUyA9IFtdOwogICAgfQoKICAgIHZhciBmaXh0dXJlcyA9IHR5cGUuRklY
        VFVSRVM7CgogICAgdGhpcy5kZWxldGVMb2FkZWRGaXh0dXJlKHR5cGUsIGZp
        eHR1cmUpOwoKICAgIGZpeHR1cmVzLnB1c2goZml4dHVyZSk7CiAgfSwKCiAg
        LyoqCiAgICBJbXBsZW1lbnQgdGhpcyBtZXRob2QgaW4gb3JkZXIgdG8gcHJv
        dmlkZSBqc29uIGZvciBDUlVEIG1ldGhvZHMKCiAgICBAbWV0aG9kIG1vY2tK
        U09OCiAgICBAcGFyYW0ge1N1YmNsYXNzIG9mIERTLk1vZGVsfSB0eXBlCiAg
        ICBAcGFyYW0ge0RTLk1vZGVsfSByZWNvcmQKICAqLwogIG1vY2tKU09OOiBm
        dW5jdGlvbihzdG9yZSwgdHlwZSwgcmVjb3JkKSB7CiAgICByZXR1cm4gc3Rv
        cmUuc2VyaWFsaXplckZvcih0eXBlKS5zZXJpYWxpemUocmVjb3JkLCB7IGlu
        Y2x1ZGVJZDogdHJ1ZSB9KTsKICB9LAoKICAvKioKICAgIEBtZXRob2QgZ2Vu
        ZXJhdGVJZEZvclJlY29yZAogICAgQHBhcmFtIHtEUy5TdG9yZX0gc3RvcmUK
        ICAgIEBwYXJhbSB7RFMuTW9kZWx9IHJlY29yZAogICAgQHJldHVybiB7U3Ry
        aW5nfSBpZAogICovCiAgZ2VuZXJhdGVJZEZvclJlY29yZDogZnVuY3Rpb24o
        c3RvcmUpIHsKICAgIHJldHVybiAiZml4dHVyZS0iICsgY291bnRlcisrOwog
        IH0sCgogIC8qKgogICAgQG1ldGhvZCBmaW5kCiAgICBAcGFyYW0ge0RTLlN0
        b3JlfSBzdG9yZQogICAgQHBhcmFtIHtzdWJjbGFzcyBvZiBEUy5Nb2RlbH0g
        dHlwZQogICAgQHBhcmFtIHtTdHJpbmd9IGlkCiAgICBAcmV0dXJuIHtQcm9t
        aXNlfSBwcm9taXNlCiAgKi8KICBmaW5kOiBmdW5jdGlvbihzdG9yZSwgdHlw
        ZSwgaWQpIHsKICAgIHZhciBmaXh0dXJlcyA9IHRoaXMuZml4dHVyZXNGb3JU
        eXBlKHR5cGUpLAogICAgICAgIGZpeHR1cmU7CgogICAgRW1iZXIuYXNzZXJ0
        KCJVbmFibGUgdG8gZmluZCBmaXh0dXJlcyBmb3IgbW9kZWwgdHlwZSAiK3R5
        cGUudG9TdHJpbmcoKSwgZml4dHVyZXMpOwoKICAgIGlmIChmaXh0dXJlcykg
        ewogICAgICBmaXh0dXJlID0gRW1iZXIuQShmaXh0dXJlcykuZmluZFByb3Bl
        cnR5KCdpZCcsIGlkKTsKICAgIH0KCiAgICBpZiAoZml4dHVyZSkgewogICAg
        ICByZXR1cm4gdGhpcy5zaW11bGF0ZVJlbW90ZUNhbGwoZnVuY3Rpb24oKSB7
        CiAgICAgICAgcmV0dXJuIGZpeHR1cmU7CiAgICAgIH0sIHRoaXMpOwogICAg
        fQogIH0sCgogIC8qKgogICAgQG1ldGhvZCBmaW5kTWFueQogICAgQHBhcmFt
        IHtEUy5TdG9yZX0gc3RvcmUKICAgIEBwYXJhbSB7c3ViY2xhc3Mgb2YgRFMu
        TW9kZWx9IHR5cGUKICAgIEBwYXJhbSB7QXJyYXl9IGlkcwogICAgQHJldHVy
        biB7UHJvbWlzZX0gcHJvbWlzZQogICovCiAgZmluZE1hbnk6IGZ1bmN0aW9u
        KHN0b3JlLCB0eXBlLCBpZHMpIHsKICAgIHZhciBmaXh0dXJlcyA9IHRoaXMu
        Zml4dHVyZXNGb3JUeXBlKHR5cGUpOwoKICAgIEVtYmVyLmFzc2VydCgiVW5h
        YmxlIHRvIGZpbmQgZml4dHVyZXMgZm9yIG1vZGVsIHR5cGUgIit0eXBlLnRv
        U3RyaW5nKCksIGZpeHR1cmVzKTsKCiAgICBpZiAoZml4dHVyZXMpIHsKICAg
        ICAgZml4dHVyZXMgPSBmaXh0dXJlcy5maWx0ZXIoZnVuY3Rpb24oaXRlbSkg
        ewogICAgICAgIHJldHVybiBpbmRleE9mKGlkcywgaXRlbS5pZCkgIT09IC0x
        OwogICAgICB9KTsKICAgIH0KCiAgICBpZiAoZml4dHVyZXMpIHsKICAgICAg
        cmV0dXJuIHRoaXMuc2ltdWxhdGVSZW1vdGVDYWxsKGZ1bmN0aW9uKCkgewog
        ICAgICAgIHJldHVybiBmaXh0dXJlczsKICAgICAgfSwgdGhpcyk7CiAgICB9
        CiAgfSwKCiAgLyoqCiAgICBAcHJpdmF0ZQogICAgQG1ldGhvZCBmaW5kQWxs
        CiAgICBAcGFyYW0ge0RTLlN0b3JlfSBzdG9yZQogICAgQHBhcmFtIHtzdWJj
        bGFzcyBvZiBEUy5Nb2RlbH0gdHlwZQogICAgQHBhcmFtIHtTdHJpbmd9IHNp
        bmNlVG9rZW4KICAgIEByZXR1cm4ge1Byb21pc2V9IHByb21pc2UKICAqLwog
        IGZpbmRBbGw6IGZ1bmN0aW9uKHN0b3JlLCB0eXBlKSB7CiAgICB2YXIgZml4
        dHVyZXMgPSB0aGlzLmZpeHR1cmVzRm9yVHlwZSh0eXBlKTsKCiAgICBFbWJl
        ci5hc3NlcnQoIlVuYWJsZSB0byBmaW5kIGZpeHR1cmVzIGZvciBtb2RlbCB0
        eXBlICIrdHlwZS50b1N0cmluZygpLCBmaXh0dXJlcyk7CgogICAgcmV0dXJu
        IHRoaXMuc2ltdWxhdGVSZW1vdGVDYWxsKGZ1bmN0aW9uKCkgewogICAgICBy
        ZXR1cm4gZml4dHVyZXM7CiAgICB9LCB0aGlzKTsKICB9LAoKICAvKioKICAg
        IEBwcml2YXRlCiAgICBAbWV0aG9kIGZpbmRRdWVyeQogICAgQHBhcmFtIHtE
        Uy5TdG9yZX0gc3RvcmUKICAgIEBwYXJhbSB7c3ViY2xhc3Mgb2YgRFMuTW9k
        ZWx9IHR5cGUKICAgIEBwYXJhbSB7T2JqZWN0fSBxdWVyeQogICAgQHBhcmFt
        IHtEUy5BZGFwdGVyUG9wdWxhdGVkUmVjb3JkQXJyYXl9IHJlY29yZEFycmF5
        CiAgICBAcmV0dXJuIHtQcm9taXNlfSBwcm9taXNlCiAgKi8KICBmaW5kUXVl
        cnk6IGZ1bmN0aW9uKHN0b3JlLCB0eXBlLCBxdWVyeSwgYXJyYXkpIHsKICAg
        IHZhciBmaXh0dXJlcyA9IHRoaXMuZml4dHVyZXNGb3JUeXBlKHR5cGUpOwoK
        ICAgIEVtYmVyLmFzc2VydCgiVW5hYmxlIHRvIGZpbmQgZml4dHVyZXMgZm9y
        IG1vZGVsIHR5cGUgIit0eXBlLnRvU3RyaW5nKCksIGZpeHR1cmVzKTsKCiAg
        ICBmaXh0dXJlcyA9IHRoaXMucXVlcnlGaXh0dXJlcyhmaXh0dXJlcywgcXVl
        cnksIHR5cGUpOwoKICAgIGlmIChmaXh0dXJlcykgewogICAgICByZXR1cm4g
        dGhpcy5zaW11bGF0ZVJlbW90ZUNhbGwoZnVuY3Rpb24oKSB7CiAgICAgICAg
        cmV0dXJuIGZpeHR1cmVzOwogICAgICB9LCB0aGlzKTsKICAgIH0KICB9LAoK
        ICAvKioKICAgIEBtZXRob2QgY3JlYXRlUmVjb3JkCiAgICBAcGFyYW0ge0RT
        LlN0b3JlfSBzdG9yZQogICAgQHBhcmFtIHtzdWJjbGFzcyBvZiBEUy5Nb2Rl
        bH0gdHlwZQogICAgQHBhcmFtIHtEUy5Nb2RlbH0gcmVjb3JkCiAgICBAcmV0
        dXJuIHtQcm9taXNlfSBwcm9taXNlCiAgKi8KICBjcmVhdGVSZWNvcmQ6IGZ1
        bmN0aW9uKHN0b3JlLCB0eXBlLCByZWNvcmQpIHsKICAgIHZhciBmaXh0dXJl
        ID0gdGhpcy5tb2NrSlNPTihzdG9yZSwgdHlwZSwgcmVjb3JkKTsKCiAgICB0
        aGlzLnVwZGF0ZUZpeHR1cmVzKHR5cGUsIGZpeHR1cmUpOwoKICAgIHJldHVy
        biB0aGlzLnNpbXVsYXRlUmVtb3RlQ2FsbChmdW5jdGlvbigpIHsKICAgICAg
        cmV0dXJuIGZpeHR1cmU7CiAgICB9LCB0aGlzKTsKICB9LAoKICAvKioKICAg
        IEBtZXRob2QgdXBkYXRlUmVjb3JkCiAgICBAcGFyYW0ge0RTLlN0b3JlfSBz
        dG9yZQogICAgQHBhcmFtIHtzdWJjbGFzcyBvZiBEUy5Nb2RlbH0gdHlwZQog
        ICAgQHBhcmFtIHtEUy5Nb2RlbH0gcmVjb3JkCiAgICBAcmV0dXJuIHtQcm9t
        aXNlfSBwcm9taXNlCiAgKi8KICB1cGRhdGVSZWNvcmQ6IGZ1bmN0aW9uKHN0
        b3JlLCB0eXBlLCByZWNvcmQpIHsKICAgIHZhciBmaXh0dXJlID0gdGhpcy5t
        b2NrSlNPTihzdG9yZSwgdHlwZSwgcmVjb3JkKTsKCiAgICB0aGlzLnVwZGF0
        ZUZpeHR1cmVzKHR5cGUsIGZpeHR1cmUpOwoKICAgIHJldHVybiB0aGlzLnNp
        bXVsYXRlUmVtb3RlQ2FsbChmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIGZp
        eHR1cmU7CiAgICB9LCB0aGlzKTsKICB9LAoKICAvKioKICAgIEBtZXRob2Qg
        ZGVsZXRlUmVjb3JkCiAgICBAcGFyYW0ge0RTLlN0b3JlfSBzdG9yZQogICAg
        QHBhcmFtIHtzdWJjbGFzcyBvZiBEUy5Nb2RlbH0gdHlwZQogICAgQHBhcmFt
        IHtEUy5Nb2RlbH0gcmVjb3JkCiAgICBAcmV0dXJuIHtQcm9taXNlfSBwcm9t
        aXNlCiAgKi8KICBkZWxldGVSZWNvcmQ6IGZ1bmN0aW9uKHN0b3JlLCB0eXBl
        LCByZWNvcmQpIHsKICAgIHZhciBmaXh0dXJlID0gdGhpcy5tb2NrSlNPTihz
        dG9yZSwgdHlwZSwgcmVjb3JkKTsKCiAgICB0aGlzLmRlbGV0ZUxvYWRlZEZp
        eHR1cmUodHlwZSwgZml4dHVyZSk7CgogICAgcmV0dXJuIHRoaXMuc2ltdWxh
        dGVSZW1vdGVDYWxsKGZ1bmN0aW9uKCkgewogICAgICAvLyBubyBwYXlsb2Fk
        IGluIGEgZGVsZXRpb24KICAgICAgcmV0dXJuIG51bGw7CiAgICB9KTsKICB9
        LAoKICAvKgogICAgQG1ldGhvZCBkZWxldGVMb2FkZWRGaXh0dXJlCiAgICBA
        cHJpdmF0ZQogICAgQHBhcmFtIHR5cGUKICAgIEBwYXJhbSByZWNvcmQKICAq
        LwogIGRlbGV0ZUxvYWRlZEZpeHR1cmU6IGZ1bmN0aW9uKHR5cGUsIHJlY29y
        ZCkgewogICAgdmFyIGV4aXN0aW5nRml4dHVyZSA9IHRoaXMuZmluZEV4aXN0
        aW5nRml4dHVyZSh0eXBlLCByZWNvcmQpOwoKICAgIGlmKGV4aXN0aW5nRml4
        dHVyZSkgewogICAgICB2YXIgaW5kZXggPSBpbmRleE9mKHR5cGUuRklYVFVS
        RVMsIGV4aXN0aW5nRml4dHVyZSk7CiAgICAgIHR5cGUuRklYVFVSRVMuc3Bs
        aWNlKGluZGV4LCAxKTsKICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgfSwK
        CiAgLyoKICAgIEBtZXRob2QgZmluZEV4aXN0aW5nRml4dHVyZQogICAgQHBy
        aXZhdGUKICAgIEBwYXJhbSB0eXBlCiAgICBAcGFyYW0gcmVjb3JkCiAgKi8K
        ICBmaW5kRXhpc3RpbmdGaXh0dXJlOiBmdW5jdGlvbih0eXBlLCByZWNvcmQp
        IHsKICAgIHZhciBmaXh0dXJlcyA9IHRoaXMuZml4dHVyZXNGb3JUeXBlKHR5
        cGUpOwogICAgdmFyIGlkID0gZ2V0KHJlY29yZCwgJ2lkJyk7CgogICAgcmV0
        dXJuIHRoaXMuZmluZEZpeHR1cmVCeUlkKGZpeHR1cmVzLCBpZCk7CiAgfSwK
        CiAgLyoKICAgIEBtZXRob2QgZmluZEZpeHR1cmVCeUlkCiAgICBAcHJpdmF0
        ZQogICAgQHBhcmFtIGZpeHR1cmVzCiAgICBAcGFyYW0gaWQKICAqLwogIGZp
        bmRGaXh0dXJlQnlJZDogZnVuY3Rpb24oZml4dHVyZXMsIGlkKSB7CiAgICBy
        ZXR1cm4gRW1iZXIuQShmaXh0dXJlcykuZmluZChmdW5jdGlvbihyKSB7CiAg
        ICAgIGlmKCcnK2dldChyLCAnaWQnKSA9PT0gJycraWQpIHsKICAgICAgICBy
        ZXR1cm4gdHJ1ZTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gZmFs
        c2U7CiAgICAgIH0KICAgIH0pOwogIH0sCgogIC8qCiAgICBAbWV0aG9kIHNp
        bXVsYXRlUmVtb3RlQ2FsbAogICAgQHByaXZhdGUKICAgIEBwYXJhbSBjYWxs
        YmFjawogICAgQHBhcmFtIGNvbnRleHQKICAqLwogIHNpbXVsYXRlUmVtb3Rl
        Q2FsbDogZnVuY3Rpb24oY2FsbGJhY2ssIGNvbnRleHQpIHsKICAgIHZhciBh
        ZGFwdGVyID0gdGhpczsKCiAgICByZXR1cm4gbmV3IEVtYmVyLlJTVlAuUHJv
        bWlzZShmdW5jdGlvbihyZXNvbHZlKSB7CiAgICAgIGlmIChnZXQoYWRhcHRl
        ciwgJ3NpbXVsYXRlUmVtb3RlUmVzcG9uc2UnKSkgewogICAgICAgIC8vIFNj
        aGVkdWxlIHdpdGggc2V0VGltZW91dAogICAgICAgIEVtYmVyLnJ1bi5sYXRl
        cihmdW5jdGlvbigpIHsKICAgICAgICAgIHJlc29sdmUoY2FsbGJhY2suY2Fs
        bChjb250ZXh0KSk7CiAgICAgICAgfSwgZ2V0KGFkYXB0ZXIsICdsYXRlbmN5
        JykpOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIEFzeW5jaHJvbm91cywg
        YnV0IGF0IHRoZSBvZiB0aGUgcnVubG9vcCB3aXRoIHplcm8gbGF0ZW5jeQog
        ICAgICAgIEVtYmVyLnJ1bi5zY2hlZHVsZSgnYWN0aW9ucycsIG51bGwsIGZ1
        bmN0aW9uKCkgewogICAgICAgICAgcmVzb2x2ZShjYWxsYmFjay5jYWxsKGNv
        bnRleHQpKTsKICAgICAgICB9KTsKICAgICAgfQogICAgfSwgIkRTOiBGaXh0
        dXJlQWRhcHRlciNzaW11bGF0ZVJlbW90ZUNhbGwiKTsKICB9Cn0pOwoKfSko
        KTsKCgoKKGZ1bmN0aW9uKCkgewovKioKICBAbW9kdWxlIGVtYmVyLWRhdGEK
        Ki8KCnZhciBnZXQgPSBFbWJlci5nZXQsIHNldCA9IEVtYmVyLnNldDsKdmFy
        IGZvckVhY2ggPSBFbWJlci5BcnJheVBvbHlmaWxscy5mb3JFYWNoOwp2YXIg
        bWFwID0gRW1iZXIuQXJyYXlQb2x5ZmlsbHMubWFwOwoKZnVuY3Rpb24gY29l
        cmNlSWQoaWQpIHsKICByZXR1cm4gaWQgPT0gbnVsbCA/IG51bGwgOiBpZCsn
        JzsKfQoKLyoqCiAgTm9ybWFsbHksIGFwcGxpY2F0aW9ucyB3aWxsIHVzZSB0
        aGUgYFJFU1RTZXJpYWxpemVyYCBieSBpbXBsZW1lbnRpbmcKICB0aGUgYG5v
        cm1hbGl6ZWAgbWV0aG9kIGFuZCBpbmRpdmlkdWFsIG5vcm1hbGl6YXRpb25z
        IHVuZGVyCiAgYG5vcm1hbGl6ZUhhc2hgLgoKICBUaGlzIGFsbG93cyB5b3Ug
        dG8gZG8gd2hhdGV2ZXIga2luZCBvZiBtdW5naW5nIHlvdSBuZWVkLCBhbmQg
        aXMKICBlc3BlY2lhbGx5IHVzZWZ1bCBpZiB5b3VyIHNlcnZlciBpcyBpbmNv
        bnNpc3RlbnQgYW5kIHlvdSBuZWVkIHRvCiAgZG8gbXVuZ2luZyBkaWZmZXJl
        bnRseSBmb3IgbWFueSBkaWZmZXJlbnQga2luZHMgb2YgcmVzcG9uc2VzLgoK
        ICBTZWUgdGhlIGBub3JtYWxpemVgIGRvY3VtZW50YXRpb24gZm9yIG1vcmUg
        aW5mb3JtYXRpb24uCgogICMjIEFjcm9zcyB0aGUgQm9hcmQgTm9ybWFsaXph
        dGlvbgoKICBUaGVyZSBhcmUgYWxzbyBhIG51bWJlciBvZiBob29rcyB0aGF0
        IHlvdSBtaWdodCBmaW5kIHVzZWZ1bCB0byBkZWZpbmVkCiAgYWNyb3NzLXRo
        ZS1ib2FyZCBydWxlcyBmb3IgeW91ciBwYXlsb2FkLiBUaGVzZSBydWxlcyB3
        aWxsIGJlIHVzZWZ1bAogIGlmIHlvdXIgc2VydmVyIGlzIGNvbnNpc3RlbnQs
        IG9yIGlmIHlvdSdyZSBidWlsZGluZyBhbiBhZGFwdGVyIGZvcgogIGFuIGlu
        ZnJhc3RydWN0dXJlIHNlcnZpY2UsIGxpa2UgUGFyc2UsIGFuZCB3YW50IHRv
        IGVuY29kZSBzZXJ2aWNlCiAgY29udmVudGlvbnMuCgogIEZvciBleGFtcGxl
        LCBpZiBhbGwgb2YgeW91ciBrZXlzIGFyZSB1bmRlcnNjb3JlZCBhbmQgYWxs
        LWNhcHMsIGJ1dAogIG90aGVyd2lzZSBjb25zaXN0ZW50IHdpdGggdGhlIG5h
        bWVzIHlvdSB1c2UgaW4geW91ciBtb2RlbHMsIHlvdQogIGNhbiBpbXBsZW1l
        bnQgYWNyb3NzLXRoZS1ib2FyZCBydWxlcyBmb3IgaG93IHRvIGNvbnZlcnQg
        YW4gYXR0cmlidXRlCiAgbmFtZSBpbiB5b3VyIG1vZGVsIHRvIGEga2V5IGlu
        IHlvdXIgSlNPTi4KCiAgYGBganMKICBBcHAuQXBwbGljYXRpb25TZXJpYWxp
        emVyID0gRFMuUkVTVFNlcmlhbGl6ZXIuZXh0ZW5kKHsKICAgIGtleUZvckF0
        dHJpYnV0ZTogZnVuY3Rpb24oYXR0cikgewogICAgICByZXR1cm4gRW1iZXIu
        U3RyaW5nLnVuZGVyc2NvcmUoYXR0cikudG9VcHBlckNhc2UoKTsKICAgIH0K
        ICB9KTsKICBgYGAKCiAgWW91IGNhbiBhbHNvIGltcGxlbWVudCBga2V5Rm9y
        UmVsYXRpb25zaGlwYCwgd2hpY2ggdGFrZXMgdGhlIG5hbWUKICBvZiB0aGUg
        cmVsYXRpb25zaGlwIGFzIHRoZSBmaXJzdCBwYXJhbWV0ZXIsIGFuZCB0aGUg
        a2luZCBvZgogIHJlbGF0aW9uc2hpcCAoYGhhc01hbnlgIG9yIGBiZWxvbmdz
        VG9gKSBhcyB0aGUgc2Vjb25kIHBhcmFtZXRlci4KCiAgQGNsYXNzIFJFU1RT
        ZXJpYWxpemVyCiAgQG5hbWVzcGFjZSBEUwogIEBleHRlbmRzIERTLkpTT05T
        ZXJpYWxpemVyCiovCkRTLlJFU1RTZXJpYWxpemVyID0gRFMuSlNPTlNlcmlh
        bGl6ZXIuZXh0ZW5kKHsKICAvKioKICAgIElmIHlvdSB3YW50IHRvIGRvIG5v
        cm1hbGl6YXRpb25zIHNwZWNpZmljIHRvIHNvbWUgcGFydCBvZiB0aGUgcGF5
        bG9hZCwgeW91CiAgICBjYW4gc3BlY2lmeSB0aG9zZSB1bmRlciBgbm9ybWFs
        aXplSGFzaGAuCgogICAgRm9yIGV4YW1wbGUsIGdpdmVuIHRoZSBmb2xsb3dp
        bmcganNvbiB3aGVyZSB0aGUgdGhlIGBJRHNgIHVuZGVyCiAgICBgImNvbW1l
        bnRzImAgYXJlIHByb3ZpZGVkIGFzIGBfaWRgIGluc3RlYWQgb2YgYGlkYC4K
        CiAgICBgYGBqYXZhc2NyaXB0CiAgICB7CiAgICAgICJwb3N0IjogewogICAg
        ICAgICJpZCI6IDEsCiAgICAgICAgInRpdGxlIjogIlJhaWxzIGlzIG9tYWth
        c2UiLAogICAgICAgICJjb21tZW50cyI6IFsgMSwgMiBdCiAgICAgIH0sCiAg
        ICAgICJjb21tZW50cyI6IFt7CiAgICAgICAgIl9pZCI6IDEsCiAgICAgICAg
        ImJvZHkiOiAiRklSU1QiCiAgICAgIH0sIHsKICAgICAgICAiX2lkIjogMiwK
        ICAgICAgICAiYm9keSI6ICJSYWlscyBpcyB1bmFnaSIKICAgICAgfV0KICAg
        IH0KICAgIGBgYAoKICAgIFlvdSB1c2UgYG5vcm1hbGl6ZUhhc2hgIHRvIG5v
        cm1hbGl6ZSBqdXN0IHRoZSBjb21tZW50czoKCiAgICBgYGBqYXZhc2NyaXB0
        CiAgICBBcHAuUG9zdFNlcmlhbGl6ZXIgPSBEUy5SRVNUU2VyaWFsaXplci5l
        eHRlbmQoewogICAgICBub3JtYWxpemVIYXNoOiB7CiAgICAgICAgY29tbWVu
        dHM6IGZ1bmN0aW9uKGhhc2gpIHsKICAgICAgICAgIGhhc2guaWQgPSBoYXNo
        Ll9pZDsKICAgICAgICAgIGRlbGV0ZSBoYXNoLl9pZDsKICAgICAgICAgIHJl
        dHVybiBoYXNoOwogICAgICAgIH0KICAgICAgfQogICAgfSk7CiAgICBgYGAK
        CiAgICBUaGUga2V5IHVuZGVyIGBub3JtYWxpemVIYXNoYCBpcyB1c3VhbGx5
        IGp1c3QgdGhlIG9yaWdpbmFsIGtleQogICAgdGhhdCB3YXMgaW4gdGhlIG9y
        aWdpbmFsIHBheWxvYWQuIEhvd2V2ZXIsIGtleSBuYW1lcyB3aWxsIGJlCiAg
        ICBpbXBhY3RlZCBieSBhbnkgbW9kaWZpY2F0aW9ucyBkb25lIGluIHRoZSBg
        bm9ybWFsaXplUGF5bG9hZGAKICAgIG1ldGhvZC4gVGhlIGBEUy5SRVNUU2Vy
        aWFsaXplcmAncyBkZWZhdWx0IGltcGxlbWVudGF0aW9uIG1ha2VzIG5vCiAg
        ICBjaGFuZ2VzIHRvIHRoZSBwYXlsb2FkIGtleXMuCgogICAgQHByb3BlcnR5
        IG5vcm1hbGl6ZUhhc2gKICAgIEB0eXBlIHtPYmplY3R9CiAgICBAZGVmYXVs
        dCB1bmRlZmluZWQKICAqLwoKICAvKioKICAgIE5vcm1hbGl6ZXMgYSBwYXJ0
        IG9mIHRoZSBKU09OIHBheWxvYWQgcmV0dXJuZWQgYnkKICAgIHRoZSBzZXJ2
        ZXIuIFlvdSBzaG91bGQgb3ZlcnJpZGUgdGhpcyBtZXRob2QsIG11bmdlIHRo
        ZSBoYXNoCiAgICBhbmQgY2FsbCBzdXBlciBpZiB5b3UgaGF2ZSBnZW5lcmlj
        IG5vcm1hbGl6YXRpb24gdG8gZG8uCgogICAgSXQgdGFrZXMgdGhlIHR5cGUg
        b2YgdGhlIHJlY29yZCB0aGF0IGlzIGJlaW5nIG5vcm1hbGl6ZWQKICAgIChh
        cyBhIERTLk1vZGVsIGNsYXNzKSwgdGhlIHByb3BlcnR5IHdoZXJlIHRoZSBo
        YXNoIHdhcwogICAgb3JpZ2luYWxseSBmb3VuZCwgYW5kIHRoZSBoYXNoIHRv
        IG5vcm1hbGl6ZS4KCiAgICBGb3IgZXhhbXBsZSwgaWYgeW91IGhhdmUgYSBw
        YXlsb2FkIHRoYXQgbG9va3MgbGlrZSB0aGlzOgoKICAgIGBgYGpzCiAgICB7
        CiAgICAgICJwb3N0IjogewogICAgICAgICJpZCI6IDEsCiAgICAgICAgInRp
        dGxlIjogIlJhaWxzIGlzIG9tYWthc2UiLAogICAgICAgICJjb21tZW50cyI6
        IFsgMSwgMiBdCiAgICAgIH0sCiAgICAgICJjb21tZW50cyI6IFt7CiAgICAg
        ICAgImlkIjogMSwKICAgICAgICAiYm9keSI6ICJGSVJTVCIKICAgICAgfSwg
        ewogICAgICAgICJpZCI6IDIsCiAgICAgICAgImJvZHkiOiAiUmFpbHMgaXMg
        dW5hZ2kiCiAgICAgIH1dCiAgICB9CiAgICBgYGAKCiAgICBUaGUgYG5vcm1h
        bGl6ZWAgbWV0aG9kIHdpbGwgYmUgY2FsbGVkIHRocmVlIHRpbWVzOgoKICAg
        ICogV2l0aCBgQXBwLlBvc3RgLCBgInBvc3RzImAgYW5kIGB7IGlkOiAxLCB0
        aXRsZTogIlJhaWxzIGlzIG9tYWthc2UiLCAuLi4gfWAKICAgICogV2l0aCBg
        QXBwLkNvbW1lbnRgLCBgImNvbW1lbnRzImAgYW5kIGB7IGlkOiAxLCBib2R5
        OiAiRklSU1QiIH1gCiAgICAqIFdpdGggYEFwcC5Db21tZW50YCwgYCJjb21t
        ZW50cyJgIGFuZCBgeyBpZDogMiwgYm9keTogIlJhaWxzIGlzIHVuYWdpIiB9
        YAoKICAgIFlvdSBjYW4gdXNlIHRoaXMgbWV0aG9kLCBmb3IgZXhhbXBsZSwg
        dG8gbm9ybWFsaXplIHVuZGVyc2NvcmVkIGtleXMgdG8gY2FtZWxpemVkCiAg
        ICBvciBvdGhlciBnZW5lcmFsLXB1cnBvc2Ugbm9ybWFsaXphdGlvbnMuCgog
        ICAgSWYgeW91IHdhbnQgdG8gZG8gbm9ybWFsaXphdGlvbnMgc3BlY2lmaWMg
        dG8gc29tZSBwYXJ0IG9mIHRoZSBwYXlsb2FkLCB5b3UKICAgIGNhbiBzcGVj
        aWZ5IHRob3NlIHVuZGVyIGBub3JtYWxpemVIYXNoYC4KCiAgICBGb3IgZXhh
        bXBsZSwgaWYgdGhlIGBJRHNgIHVuZGVyIGAiY29tbWVudHMiYCBhcmUgcHJv
        dmlkZWQgYXMgYF9pZGAgaW5zdGVhZCBvZgogICAgYGlkYCwgeW91IGNhbiBz
        cGVjaWZ5IGhvdyB0byBub3JtYWxpemUganVzdCB0aGUgY29tbWVudHM6Cgog
        ICAgYGBganMKICAgIEFwcC5Qb3N0U2VyaWFsaXplciA9IERTLlJFU1RTZXJp
        YWxpemVyLmV4dGVuZCh7CiAgICAgIG5vcm1hbGl6ZUhhc2g6IHsKICAgICAg
        ICBjb21tZW50czogZnVuY3Rpb24oaGFzaCkgewogICAgICAgICAgaGFzaC5p
        ZCA9IGhhc2guX2lkOwogICAgICAgICAgZGVsZXRlIGhhc2guX2lkOwogICAg
        ICAgICAgcmV0dXJuIGhhc2g7CiAgICAgICAgfQogICAgICB9CiAgICB9KTsK
        ICAgIGBgYAoKICAgIFRoZSBrZXkgdW5kZXIgYG5vcm1hbGl6ZUhhc2hgIGlz
        IGp1c3QgdGhlIG9yaWdpbmFsIGtleSB0aGF0IHdhcyBpbiB0aGUgb3JpZ2lu
        YWwKICAgIHBheWxvYWQuCgogICAgQG1ldGhvZCBub3JtYWxpemUKICAgIEBw
        YXJhbSB7c3ViY2xhc3Mgb2YgRFMuTW9kZWx9IHR5cGUKICAgIEBwYXJhbSB7
        T2JqZWN0fSBoYXNoCiAgICBAcGFyYW0ge1N0cmluZ30gcHJvcAogICAgQHJl
        dHVybnMge09iamVjdH0KICAqLwogIG5vcm1hbGl6ZTogZnVuY3Rpb24odHlw
        ZSwgaGFzaCwgcHJvcCkgewogICAgdGhpcy5ub3JtYWxpemVJZChoYXNoKTsK
        ICAgIHRoaXMubm9ybWFsaXplQXR0cmlidXRlcyh0eXBlLCBoYXNoKTsKICAg
        IHRoaXMubm9ybWFsaXplUmVsYXRpb25zaGlwcyh0eXBlLCBoYXNoKTsKCiAg
        ICB0aGlzLm5vcm1hbGl6ZVVzaW5nRGVjbGFyZWRNYXBwaW5nKHR5cGUsIGhh
        c2gpOwoKICAgIGlmICh0aGlzLm5vcm1hbGl6ZUhhc2ggJiYgdGhpcy5ub3Jt
        YWxpemVIYXNoW3Byb3BdKSB7CiAgICAgIHRoaXMubm9ybWFsaXplSGFzaFtw
        cm9wXShoYXNoKTsKICAgIH0KCiAgICByZXR1cm4gdGhpcy5fc3VwZXIodHlw
        ZSwgaGFzaCwgcHJvcCk7CiAgfSwKCiAgLyoqCiAgICBZb3UgY2FuIHVzZSB0
        aGlzIG1ldGhvZCB0byBub3JtYWxpemUgYWxsIHBheWxvYWRzLCByZWdhcmRs
        ZXNzIG9mIHdoZXRoZXIgdGhleQogICAgcmVwcmVzZW50IHNpbmdsZSByZWNv
        cmRzIG9yIGFuIGFycmF5LgoKICAgIEZvciBleGFtcGxlLCB5b3UgbWlnaHQg
        d2FudCB0byByZW1vdmUgc29tZSBleHRyYW5lb3VzIGRhdGEgZnJvbSB0aGUg
        cGF5bG9hZDoKCiAgICBgYGBqcwogICAgQXBwLkFwcGxpY2F0aW9uU2VyaWFs
        aXplciA9IERTLlJFU1RTZXJpYWxpemVyLmV4dGVuZCh7CiAgICAgIG5vcm1h
        bGl6ZVBheWxvYWQ6IGZ1bmN0aW9uKHR5cGUsIHBheWxvYWQpIHsKICAgICAg
        ICBkZWxldGUgcGF5bG9hZC52ZXJzaW9uOwogICAgICAgIGRlbGV0ZSBwYXls
        b2FkLnN0YXR1czsKICAgICAgICByZXR1cm4gcGF5bG9hZDsKICAgICAgfQog
        ICAgfSk7CiAgICBgYGAKCiAgICBAbWV0aG9kIG5vcm1hbGl6ZVBheWxvYWQK
        ICAgIEBwYXJhbSB7c3ViY2xhc3Mgb2YgRFMuTW9kZWx9IHR5cGUKICAgIEBw
        YXJhbSB7T2JqZWN0fSBoYXNoCiAgICBAcmV0dXJucyB7T2JqZWN0fSB0aGUg
        bm9ybWFsaXplZCBwYXlsb2FkCiAgKi8KICBub3JtYWxpemVQYXlsb2FkOiBm
        dW5jdGlvbih0eXBlLCBwYXlsb2FkKSB7CiAgICByZXR1cm4gcGF5bG9hZDsK
        ICB9LAoKICAvKioKICAgIEBtZXRob2Qgbm9ybWFsaXplSWQKICAgIEBwcml2
        YXRlCiAgKi8KICBub3JtYWxpemVJZDogZnVuY3Rpb24oaGFzaCkgewogICAg
        dmFyIHByaW1hcnlLZXkgPSBnZXQodGhpcywgJ3ByaW1hcnlLZXknKTsKCiAg
        ICBpZiAocHJpbWFyeUtleSA9PT0gJ2lkJykgeyByZXR1cm47IH0KCiAgICBo
        YXNoLmlkID0gaGFzaFtwcmltYXJ5S2V5XTsKICAgIGRlbGV0ZSBoYXNoW3By
        aW1hcnlLZXldOwogIH0sCgogIC8qKgogICAgQG1ldGhvZCBub3JtYWxpemVV
        c2luZ0RlY2xhcmVkTWFwcGluZwogICAgQHByaXZhdGUKICAqLwogIG5vcm1h
        bGl6ZVVzaW5nRGVjbGFyZWRNYXBwaW5nOiBmdW5jdGlvbih0eXBlLCBoYXNo
        KSB7CiAgICB2YXIgYXR0cnMgPSBnZXQodGhpcywgJ2F0dHJzJyksIHBheWxv
        YWRLZXksIGtleTsKCiAgICBpZiAoYXR0cnMpIHsKICAgICAgZm9yIChrZXkg
        aW4gYXR0cnMpIHsKICAgICAgICBwYXlsb2FkS2V5ID0gYXR0cnNba2V5XTsK
        ICAgICAgICBpZiAocGF5bG9hZEtleSAmJiBwYXlsb2FkS2V5LmtleSkgewog
        ICAgICAgICAgcGF5bG9hZEtleSA9IHBheWxvYWRLZXkua2V5OwogICAgICAg
        IH0KICAgICAgICBpZiAodHlwZW9mIHBheWxvYWRLZXkgPT09ICdzdHJpbmcn
        KSB7CiAgICAgICAgICBoYXNoW2tleV0gPSBoYXNoW3BheWxvYWRLZXldOwog
        ICAgICAgICAgZGVsZXRlIGhhc2hbcGF5bG9hZEtleV07CiAgICAgICAgfQog
        ICAgICB9CiAgICB9CiAgfSwKCiAgLyoqCiAgICBAbWV0aG9kIG5vcm1hbGl6
        ZUF0dHJpYnV0ZXMKICAgIEBwcml2YXRlCiAgKi8KICBub3JtYWxpemVBdHRy
        aWJ1dGVzOiBmdW5jdGlvbih0eXBlLCBoYXNoKSB7CiAgICB2YXIgcGF5bG9h
        ZEtleSwga2V5OwoKICAgIGlmICh0aGlzLmtleUZvckF0dHJpYnV0ZSkgewog
        ICAgICB0eXBlLmVhY2hBdHRyaWJ1dGUoZnVuY3Rpb24oa2V5KSB7CiAgICAg
        ICAgcGF5bG9hZEtleSA9IHRoaXMua2V5Rm9yQXR0cmlidXRlKGtleSk7CiAg
        ICAgICAgaWYgKGtleSA9PT0gcGF5bG9hZEtleSkgeyByZXR1cm47IH0KCiAg
        ICAgICAgaGFzaFtrZXldID0gaGFzaFtwYXlsb2FkS2V5XTsKICAgICAgICBk
        ZWxldGUgaGFzaFtwYXlsb2FkS2V5XTsKICAgICAgfSwgdGhpcyk7CiAgICB9
        CiAgfSwKCiAgLyoqCiAgICBAbWV0aG9kIG5vcm1hbGl6ZVJlbGF0aW9uc2hp
        cHMKICAgIEBwcml2YXRlCiAgKi8KICBub3JtYWxpemVSZWxhdGlvbnNoaXBz
        OiBmdW5jdGlvbih0eXBlLCBoYXNoKSB7CiAgICB2YXIgcGF5bG9hZEtleSwg
        a2V5OwoKICAgIGlmICh0aGlzLmtleUZvclJlbGF0aW9uc2hpcCkgewogICAg
        ICB0eXBlLmVhY2hSZWxhdGlvbnNoaXAoZnVuY3Rpb24oa2V5LCByZWxhdGlv
        bnNoaXApIHsKICAgICAgICBwYXlsb2FkS2V5ID0gdGhpcy5rZXlGb3JSZWxh
        dGlvbnNoaXAoa2V5LCByZWxhdGlvbnNoaXAua2luZCk7CiAgICAgICAgaWYg
        KGtleSA9PT0gcGF5bG9hZEtleSkgeyByZXR1cm47IH0KCiAgICAgICAgaGFz
        aFtrZXldID0gaGFzaFtwYXlsb2FkS2V5XTsKICAgICAgICBkZWxldGUgaGFz
        aFtwYXlsb2FkS2V5XTsKICAgICAgfSwgdGhpcyk7CiAgICB9CiAgfSwKCiAg
        LyoqCiAgICBDYWxsZWQgd2hlbiB0aGUgc2VydmVyIGhhcyByZXR1cm5lZCBh
        IHBheWxvYWQgcmVwcmVzZW50aW5nCiAgICBhIHNpbmdsZSByZWNvcmQsIHN1
        Y2ggYXMgaW4gcmVzcG9uc2UgdG8gYSBgZmluZGAgb3IgYHNhdmVgLgoKICAg
        IEl0IGlzIHlvdXIgb3Bwb3J0dW5pdHkgdG8gY2xlYW4gdXAgdGhlIHNlcnZl
        cidzIHJlc3BvbnNlIGludG8gdGhlIG5vcm1hbGl6ZWQKICAgIGZvcm0gZXhw
        ZWN0ZWQgYnkgRW1iZXIgRGF0YS4KCiAgICBJZiB5b3Ugd2FudCwgeW91IGNh
        biBqdXN0IHJlc3RydWN0dXJlIHRoZSB0b3AtbGV2ZWwgb2YgeW91ciBwYXls
        b2FkLCBhbmQKICAgIGRvIG1vcmUgZmluZS1ncmFpbmVkIG5vcm1hbGl6YXRp
        b24gaW4gdGhlIGBub3JtYWxpemVgIG1ldGhvZC4KCiAgICBGb3IgZXhhbXBs
        ZSwgaWYgeW91IGhhdmUgYSBwYXlsb2FkIGxpa2UgdGhpcyBpbiByZXNwb25z
        ZSB0byBhIHJlcXVlc3QgZm9yCiAgICBwb3N0IDE6CgogICAgYGBganMKICAg
        IHsKICAgICAgImlkIjogMSwKICAgICAgInRpdGxlIjogIlJhaWxzIGlzIG9t
        YWthc2UiLAoKICAgICAgIl9lbWJlZGRlZCI6IHsKICAgICAgICAiY29tbWVu
        dCI6IFt7CiAgICAgICAgICAiX2lkIjogMSwKICAgICAgICAgICJjb21tZW50
        X3RpdGxlIjogIkZJUlNUIgogICAgICAgIH0sIHsKICAgICAgICAgICJfaWQi
        OiAyLAogICAgICAgICAgImNvbW1lbnRfdGl0bGUiOiAiUmFpbHMgaXMgdW5h
        Z2kiCiAgICAgICAgfV0KICAgICAgfQogICAgfQogICAgYGBgCgogICAgWW91
        IGNvdWxkIGltcGxlbWVudCBhIHNlcmlhbGl6ZXIgdGhhdCBsb29rcyBsaWtl
        IHRoaXMgdG8gZ2V0IHlvdXIgcGF5bG9hZAogICAgaW50byBzaGFwZToKCiAg
        ICBgYGBqcwogICAgQXBwLlBvc3RTZXJpYWxpemVyID0gRFMuUkVTVFNlcmlh
        bGl6ZXIuZXh0ZW5kKHsKICAgICAgLy8gRmlyc3QsIHJlc3RydWN0dXJlIHRo
        ZSB0b3AtbGV2ZWwgc28gaXQncyBvcmdhbml6ZWQgYnkgdHlwZQogICAgICBl
        eHRyYWN0U2luZ2xlOiBmdW5jdGlvbihzdG9yZSwgdHlwZSwgcGF5bG9hZCwg
        aWQsIHJlcXVlc3RUeXBlKSB7CiAgICAgICAgdmFyIGNvbW1lbnRzID0gcGF5
        bG9hZC5fZW1iZWRkZWQuY29tbWVudDsKICAgICAgICBkZWxldGUgcGF5bG9h
        ZC5fZW1iZWRkZWQ7CgogICAgICAgIHBheWxvYWQgPSB7IGNvbW1lbnRzOiBj
        b21tZW50cywgcG9zdDogcGF5bG9hZCB9OwogICAgICAgIHJldHVybiB0aGlz
        Ll9zdXBlcihzdG9yZSwgdHlwZSwgcGF5bG9hZCwgaWQsIHJlcXVlc3RUeXBl
        KTsKICAgICAgfSwKCiAgICAgIG5vcm1hbGl6ZUhhc2g6IHsKICAgICAgICAv
        LyBOZXh0LCBub3JtYWxpemUgaW5kaXZpZHVhbCBjb21tZW50cywgd2hpY2gg
        KGFmdGVyIGBleHRyYWN0YCkKICAgICAgICAvLyBhcmUgbm93IGxvY2F0ZWQg
        dW5kZXIgYGNvbW1lbnRzYAogICAgICAgIGNvbW1lbnRzOiBmdW5jdGlvbiho
        YXNoKSB7CiAgICAgICAgICBoYXNoLmlkID0gaGFzaC5faWQ7CiAgICAgICAg
        ICBoYXNoLnRpdGxlID0gaGFzaC5jb21tZW50X3RpdGxlOwogICAgICAgICAg
        ZGVsZXRlIGhhc2guX2lkOwogICAgICAgICAgZGVsZXRlIGhhc2guY29tbWVu
        dF90aXRsZTsKICAgICAgICAgIHJldHVybiBoYXNoOwogICAgICAgIH0KICAg
        ICAgfQogICAgfSkKICAgIGBgYAoKICAgIFdoZW4geW91IGNhbGwgc3VwZXIg
        ZnJvbSB5b3VyIG93biBpbXBsZW1lbnRhdGlvbiBvZiBgZXh0cmFjdFNpbmds
        ZWAsIHRoZQogICAgYnVpbHQtaW4gaW1wbGVtZW50YXRpb24gd2lsbCBmaW5k
        IHRoZSBwcmltYXJ5IHJlY29yZCBpbiB5b3VyIG5vcm1hbGl6ZWQKICAgIHBh
        eWxvYWQgYW5kIHB1c2ggdGhlIHJlbWFpbmluZyByZWNvcmRzIGludG8gdGhl
        IHN0b3JlLgoKICAgIFRoZSBwcmltYXJ5IHJlY29yZCBpcyB0aGUgc2luZ2xl
        IGhhc2ggZm91bmQgdW5kZXIgYHBvc3RgIG9yIHRoZSBmaXJzdAogICAgZWxl
        bWVudCBvZiB0aGUgYHBvc3RzYCBhcnJheS4KCiAgICBUaGUgcHJpbWFyeSBy
        ZWNvcmQgaGFzIHNwZWNpYWwgbWVhbmluZyB3aGVuIHRoZSByZWNvcmQgaXMg
        YmVpbmcgY3JlYXRlZAogICAgZm9yIHRoZSBmaXJzdCB0aW1lIG9yIHVwZGF0
        ZWQgKGBjcmVhdGVSZWNvcmRgIG9yIGB1cGRhdGVSZWNvcmRgKS4gSW4KICAg
        IHBhcnRpY3VsYXIsIGl0IHdpbGwgdXBkYXRlIHRoZSBwcm9wZXJ0aWVzIG9m
        IHRoZSByZWNvcmQgdGhhdCB3YXMgc2F2ZWQuCgogICAgQG1ldGhvZCBleHRy
        YWN0U2luZ2xlCiAgICBAcGFyYW0ge0RTLlN0b3JlfSBzdG9yZQogICAgQHBh
        cmFtIHtzdWJjbGFzcyBvZiBEUy5Nb2RlbH0gdHlwZQogICAgQHBhcmFtIHtP
        YmplY3R9IHBheWxvYWQKICAgIEBwYXJhbSB7U3RyaW5nfSBpZAogICAgQHBh
        cmFtIHsnZmluZCd8J2NyZWF0ZVJlY29yZCd8J3VwZGF0ZVJlY29yZCd8J2Rl
        bGV0ZVJlY29yZCd9IHJlcXVlc3RUeXBlCiAgICBAcmV0dXJucyB7T2JqZWN0
        fSB0aGUgcHJpbWFyeSByZXNwb25zZSB0byB0aGUgb3JpZ2luYWwgcmVxdWVz
        dAogICovCiAgZXh0cmFjdFNpbmdsZTogZnVuY3Rpb24oc3RvcmUsIHByaW1h
        cnlUeXBlLCBwYXlsb2FkLCByZWNvcmRJZCwgcmVxdWVzdFR5cGUpIHsKICAg
        IHBheWxvYWQgPSB0aGlzLm5vcm1hbGl6ZVBheWxvYWQocHJpbWFyeVR5cGUs
        IHBheWxvYWQpOwoKICAgIHZhciBwcmltYXJ5VHlwZU5hbWUgPSBwcmltYXJ5
        VHlwZS50eXBlS2V5LAogICAgICAgIHByaW1hcnlSZWNvcmQ7CgogICAgZm9y
        ICh2YXIgcHJvcCBpbiBwYXlsb2FkKSB7CiAgICAgIHZhciB0eXBlTmFtZSAg
        PSB0aGlzLnR5cGVGb3JSb290KHByb3ApLAogICAgICAgICAgdHlwZSA9IHN0
        b3JlLm1vZGVsRm9yKHR5cGVOYW1lKSwKICAgICAgICAgIGlzUHJpbWFyeSA9
        IHR5cGUudHlwZUtleSA9PT0gcHJpbWFyeVR5cGVOYW1lOwoKICAgICAgLy8g
        bGVnYWN5IHN1cHBvcnQgZm9yIHNpbmd1bGFyIHJlc291cmNlcwogICAgICBp
        ZiAoaXNQcmltYXJ5ICYmIEVtYmVyLnR5cGVPZihwYXlsb2FkW3Byb3BdKSAh
        PT0gImFycmF5IiApIHsKICAgICAgICBwcmltYXJ5UmVjb3JkID0gdGhpcy5u
        b3JtYWxpemUocHJpbWFyeVR5cGUsIHBheWxvYWRbcHJvcF0sIHByb3ApOwog
        ICAgICAgIGNvbnRpbnVlOwogICAgICB9CgogICAgICAvKmpzaGludCBsb29w
        ZnVuYzp0cnVlKi8KICAgICAgZm9yRWFjaC5jYWxsKHBheWxvYWRbcHJvcF0s
        IGZ1bmN0aW9uKGhhc2gpIHsKICAgICAgICB2YXIgdHlwZU5hbWUgPSB0aGlz
        LnR5cGVGb3JSb290KHByb3ApLAogICAgICAgICAgICB0eXBlID0gc3RvcmUu
        bW9kZWxGb3IodHlwZU5hbWUpLAogICAgICAgICAgICB0eXBlU2VyaWFsaXpl
        ciA9IHN0b3JlLnNlcmlhbGl6ZXJGb3IodHlwZSk7CgogICAgICAgIGhhc2gg
        PSB0eXBlU2VyaWFsaXplci5ub3JtYWxpemUodHlwZSwgaGFzaCwgcHJvcCk7
        CgogICAgICAgIHZhciBpc0ZpcnN0Q3JlYXRlZFJlY29yZCA9IGlzUHJpbWFy
        eSAmJiAhcmVjb3JkSWQgJiYgIXByaW1hcnlSZWNvcmQsCiAgICAgICAgICAg
        IGlzVXBkYXRlZFJlY29yZCA9IGlzUHJpbWFyeSAmJiBjb2VyY2VJZChoYXNo
        LmlkKSA9PT0gcmVjb3JkSWQ7CgogICAgICAgIC8vIGZpbmQgdGhlIHByaW1h
        cnkgcmVjb3JkLgogICAgICAgIC8vCiAgICAgICAgLy8gSXQncyBlaXRoZXI6
        CiAgICAgICAgLy8gKiB0aGUgcmVjb3JkIHdpdGggdGhlIHNhbWUgSUQgYXMg
        dGhlIG9yaWdpbmFsIHJlcXVlc3QKICAgICAgICAvLyAqIGluIHRoZSBjYXNl
        IG9mIGEgbmV3bHkgY3JlYXRlZCByZWNvcmQgdGhhdCBkaWRuJ3QgaGF2ZSBh
        biBJRCwgdGhlIGZpcnN0CiAgICAgICAgLy8gICByZWNvcmQgaW4gdGhlIEFy
        cmF5CiAgICAgICAgaWYgKGlzRmlyc3RDcmVhdGVkUmVjb3JkIHx8IGlzVXBk
        YXRlZFJlY29yZCkgewogICAgICAgICAgcHJpbWFyeVJlY29yZCA9IGhhc2g7
        CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHN0b3JlLnB1c2godHlwZU5h
        bWUsIGhhc2gpOwogICAgICAgIH0KICAgICAgfSwgdGhpcyk7CiAgICB9Cgog
        ICAgcmV0dXJuIHByaW1hcnlSZWNvcmQ7CiAgfSwKCiAgLyoqCiAgICBDYWxs
        ZWQgd2hlbiB0aGUgc2VydmVyIGhhcyByZXR1cm5lZCBhIHBheWxvYWQgcmVw
        cmVzZW50aW5nCiAgICBtdWx0aXBsZSByZWNvcmRzLCBzdWNoIGFzIGluIHJl
        c3BvbnNlIHRvIGEgYGZpbmRBbGxgIG9yIGBmaW5kUXVlcnlgLgoKICAgIEl0
        IGlzIHlvdXIgb3Bwb3J0dW5pdHkgdG8gY2xlYW4gdXAgdGhlIHNlcnZlcidz
        IHJlc3BvbnNlIGludG8gdGhlIG5vcm1hbGl6ZWQKICAgIGZvcm0gZXhwZWN0
        ZWQgYnkgRW1iZXIgRGF0YS4KCiAgICBJZiB5b3Ugd2FudCwgeW91IGNhbiBq
        dXN0IHJlc3RydWN0dXJlIHRoZSB0b3AtbGV2ZWwgb2YgeW91ciBwYXlsb2Fk
        LCBhbmQKICAgIGRvIG1vcmUgZmluZS1ncmFpbmVkIG5vcm1hbGl6YXRpb24g
        aW4gdGhlIGBub3JtYWxpemVgIG1ldGhvZC4KCiAgICBGb3IgZXhhbXBsZSwg
        aWYgeW91IGhhdmUgYSBwYXlsb2FkIGxpa2UgdGhpcyBpbiByZXNwb25zZSB0
        byBhIHJlcXVlc3QgZm9yCiAgICBhbGwgcG9zdHM6CgogICAgYGBganMKICAg
        IHsKICAgICAgIl9lbWJlZGRlZCI6IHsKICAgICAgICAicG9zdCI6IFt7CiAg
        ICAgICAgICAiaWQiOiAxLAogICAgICAgICAgInRpdGxlIjogIlJhaWxzIGlz
        IG9tYWthc2UiCiAgICAgICAgfSwgewogICAgICAgICAgImlkIjogMiwKICAg
        ICAgICAgICJ0aXRsZSI6ICJUaGUgUGFybGV5IExldHRlciIKICAgICAgICB9
        XSwKICAgICAgICAiY29tbWVudCI6IFt7CiAgICAgICAgICAiX2lkIjogMSwK
        ICAgICAgICAgICJjb21tZW50X3RpdGxlIjogIlJhaWxzIGlzIHVuYWdpIgog
        ICAgICAgICAgInBvc3RfaWQiOiAxCiAgICAgICAgfSwgewogICAgICAgICAg
        Il9pZCI6IDIsCiAgICAgICAgICAiY29tbWVudF90aXRsZSI6ICJEb24ndCB0
        cmVhZCBvbiBtZSIsCiAgICAgICAgICAicG9zdF9pZCI6IDIKICAgICAgICB9
        XQogICAgICB9CiAgICB9CiAgICBgYGAKCiAgICBZb3UgY291bGQgaW1wbGVt
        ZW50IGEgc2VyaWFsaXplciB0aGF0IGxvb2tzIGxpa2UgdGhpcyB0byBnZXQg
        eW91ciBwYXlsb2FkCiAgICBpbnRvIHNoYXBlOgoKICAgIGBgYGpzCiAgICBB
        cHAuUG9zdFNlcmlhbGl6ZXIgPSBEUy5SRVNUU2VyaWFsaXplci5leHRlbmQo
        ewogICAgICAvLyBGaXJzdCwgcmVzdHJ1Y3R1cmUgdGhlIHRvcC1sZXZlbCBz
        byBpdCdzIG9yZ2FuaXplZCBieSB0eXBlCiAgICAgIC8vIGFuZCB0aGUgY29t
        bWVudHMgYXJlIGxpc3RlZCB1bmRlciBhIHBvc3QncyBgY29tbWVudHNgIGtl
        eS4KICAgICAgZXh0cmFjdEFycmF5OiBmdW5jdGlvbihzdG9yZSwgdHlwZSwg
        cGF5bG9hZCwgaWQsIHJlcXVlc3RUeXBlKSB7CiAgICAgICAgdmFyIHBvc3Rz
        ID0gcGF5bG9hZC5fZW1iZWRkZWQucG9zdDsKICAgICAgICB2YXIgY29tbWVu
        dHMgPSBbXTsKICAgICAgICB2YXIgcG9zdENhY2hlID0ge307CgogICAgICAg
        IHBvc3RzLmZvckVhY2goZnVuY3Rpb24ocG9zdCkgewogICAgICAgICAgcG9z
        dC5jb21tZW50cyA9IFtdOwogICAgICAgICAgcG9zdENhY2hlW3Bvc3QuaWRd
        ID0gcG9zdDsKICAgICAgICB9KTsKCiAgICAgICAgcGF5bG9hZC5fZW1iZWRk
        ZWQuY29tbWVudC5mb3JFYWNoKGZ1bmN0aW9uKGNvbW1lbnQpIHsKICAgICAg
        ICAgIGNvbW1lbnRzLnB1c2goY29tbWVudCk7CiAgICAgICAgICBwb3N0Q2Fj
        aGVbY29tbWVudC5wb3N0X2lkXS5jb21tZW50cy5wdXNoKGNvbW1lbnQpOwog
        ICAgICAgICAgZGVsZXRlIGNvbW1lbnQucG9zdF9pZDsKICAgICAgICB9Cgog
        ICAgICAgIHBheWxvYWQgPSB7IGNvbW1lbnRzOiBjb21tZW50cywgcG9zdHM6
        IHBheWxvYWQgfTsKCiAgICAgICAgcmV0dXJuIHRoaXMuX3N1cGVyKHN0b3Jl
        LCB0eXBlLCBwYXlsb2FkLCBpZCwgcmVxdWVzdFR5cGUpOwogICAgICB9LAoK
        ICAgICAgbm9ybWFsaXplSGFzaDogewogICAgICAgIC8vIE5leHQsIG5vcm1h
        bGl6ZSBpbmRpdmlkdWFsIGNvbW1lbnRzLCB3aGljaCAoYWZ0ZXIgYGV4dHJh
        Y3RgKQogICAgICAgIC8vIGFyZSBub3cgbG9jYXRlZCB1bmRlciBgY29tbWVu
        dHNgCiAgICAgICAgY29tbWVudHM6IGZ1bmN0aW9uKGhhc2gpIHsKICAgICAg
        ICAgIGhhc2guaWQgPSBoYXNoLl9pZDsKICAgICAgICAgIGhhc2gudGl0bGUg
        PSBoYXNoLmNvbW1lbnRfdGl0bGU7CiAgICAgICAgICBkZWxldGUgaGFzaC5f
        aWQ7CiAgICAgICAgICBkZWxldGUgaGFzaC5jb21tZW50X3RpdGxlOwogICAg
        ICAgICAgcmV0dXJuIGhhc2g7CiAgICAgICAgfQogICAgICB9CiAgICB9KQog
        ICAgYGBgCgogICAgV2hlbiB5b3UgY2FsbCBzdXBlciBmcm9tIHlvdXIgb3du
        IGltcGxlbWVudGF0aW9uIG9mIGBleHRyYWN0QXJyYXlgLCB0aGUKICAgIGJ1
        aWx0LWluIGltcGxlbWVudGF0aW9uIHdpbGwgZmluZCB0aGUgcHJpbWFyeSBh
        cnJheSBpbiB5b3VyIG5vcm1hbGl6ZWQKICAgIHBheWxvYWQgYW5kIHB1c2gg
        dGhlIHJlbWFpbmluZyByZWNvcmRzIGludG8gdGhlIHN0b3JlLgoKICAgIFRo
        ZSBwcmltYXJ5IGFycmF5IGlzIHRoZSBhcnJheSBmb3VuZCB1bmRlciBgcG9z
        dHNgLgoKICAgIFRoZSBwcmltYXJ5IHJlY29yZCBoYXMgc3BlY2lhbCBtZWFu
        aW5nIHdoZW4gcmVzcG9uZGluZyB0byBgZmluZFF1ZXJ5YAogICAgb3IgYGZp
        bmRIYXNNYW55YC4gSW4gcGFydGljdWxhciwgdGhlIHByaW1hcnkgYXJyYXkg
        d2lsbCBiZWNvbWUgdGhlCiAgICBsaXN0IG9mIHJlY29yZHMgaW4gdGhlIHJl
        Y29yZCBhcnJheSB0aGF0IGtpY2tlZCBvZmYgdGhlIHJlcXVlc3QuCgogICAg
        SWYgeW91ciBwcmltYXJ5IGFycmF5IGNvbnRhaW5zIHNlY29uZGFyeSAoZW1i
        ZWRkZWQpIHJlY29yZHMgb2YgdGhlIHNhbWUgdHlwZSwKICAgIHlvdSBjYW5u
        b3QgcGxhY2UgdGhlc2UgaW50byB0aGUgcHJpbWFyeSBhcnJheSBgcG9zdHNg
        LiBJbnN0ZWFkLCBwbGFjZSB0aGUKICAgIHNlY29uZGFyeSBpdGVtcyBpbnRv
        IGFuIHVuZGVyc2NvcmUgcHJlZml4ZWQgcHJvcGVydHkgYF9wb3N0c2AsIHdo
        aWNoIHdpbGwKICAgIHB1c2ggdGhlc2UgaXRlbXMgaW50byB0aGUgc3RvcmUg
        YW5kIHdpbGwgbm90IGFmZmVjdCB0aGUgcmVzdWx0aW5nIHF1ZXJ5LgoKICAg
        IEBtZXRob2QgZXh0cmFjdEFycmF5CiAgICBAcGFyYW0ge0RTLlN0b3JlfSBz
        dG9yZQogICAgQHBhcmFtIHtzdWJjbGFzcyBvZiBEUy5Nb2RlbH0gdHlwZQog
        ICAgQHBhcmFtIHtPYmplY3R9IHBheWxvYWQKICAgIEBwYXJhbSB7J2ZpbmRB
        bGwnfCdmaW5kTWFueSd8J2ZpbmRIYXNNYW55J3wnZmluZFF1ZXJ5J30gcmVx
        dWVzdFR5cGUKICAgIEByZXR1cm5zIHtBcnJheX0gVGhlIHByaW1hcnkgYXJy
        YXkgdGhhdCB3YXMgcmV0dXJuZWQgaW4gcmVzcG9uc2UKICAgICAgdG8gdGhl
        IG9yaWdpbmFsIHF1ZXJ5LgogICovCiAgZXh0cmFjdEFycmF5OiBmdW5jdGlv
        bihzdG9yZSwgcHJpbWFyeVR5cGUsIHBheWxvYWQpIHsKICAgIHBheWxvYWQg
        PSB0aGlzLm5vcm1hbGl6ZVBheWxvYWQocHJpbWFyeVR5cGUsIHBheWxvYWQp
        OwoKICAgIHZhciBwcmltYXJ5VHlwZU5hbWUgPSBwcmltYXJ5VHlwZS50eXBl
        S2V5LAogICAgICAgIHByaW1hcnlBcnJheTsKCiAgICBmb3IgKHZhciBwcm9w
        IGluIHBheWxvYWQpIHsKICAgICAgdmFyIHR5cGVLZXkgPSBwcm9wLAogICAg
        ICAgICAgZm9yY2VkU2Vjb25kYXJ5ID0gZmFsc2U7CgogICAgICBpZiAocHJv
        cC5jaGFyQXQoMCkgPT09ICdfJykgewogICAgICAgIGZvcmNlZFNlY29uZGFy
        eSA9IHRydWU7CiAgICAgICAgdHlwZUtleSA9IHByb3Auc3Vic3RyKDEpOwog
        ICAgICB9CgogICAgICB2YXIgdHlwZU5hbWUgPSB0aGlzLnR5cGVGb3JSb290
        KHR5cGVLZXkpLAogICAgICAgICAgdHlwZSA9IHN0b3JlLm1vZGVsRm9yKHR5
        cGVOYW1lKSwKICAgICAgICAgIHR5cGVTZXJpYWxpemVyID0gc3RvcmUuc2Vy
        aWFsaXplckZvcih0eXBlKSwKICAgICAgICAgIGlzUHJpbWFyeSA9ICghZm9y
        Y2VkU2Vjb25kYXJ5ICYmICh0eXBlLnR5cGVLZXkgPT09IHByaW1hcnlUeXBl
        TmFtZSkpOwoKICAgICAgLypqc2hpbnQgbG9vcGZ1bmM6dHJ1ZSovCiAgICAg
        IHZhciBub3JtYWxpemVkQXJyYXkgPSBtYXAuY2FsbChwYXlsb2FkW3Byb3Bd
        LCBmdW5jdGlvbihoYXNoKSB7CiAgICAgICAgcmV0dXJuIHR5cGVTZXJpYWxp
        emVyLm5vcm1hbGl6ZSh0eXBlLCBoYXNoLCBwcm9wKTsKICAgICAgfSwgdGhp
        cyk7CgogICAgICBpZiAoaXNQcmltYXJ5KSB7CiAgICAgICAgcHJpbWFyeUFy
        cmF5ID0gbm9ybWFsaXplZEFycmF5OwogICAgICB9IGVsc2UgewogICAgICAg
        IHN0b3JlLnB1c2hNYW55KHR5cGVOYW1lLCBub3JtYWxpemVkQXJyYXkpOwog
        ICAgICB9CiAgICB9CgogICAgcmV0dXJuIHByaW1hcnlBcnJheTsKICB9LAoK
        ICAvKioKICAgIFRoaXMgbWV0aG9kIGFsbG93cyB5b3UgdG8gcHVzaCBhIHBh
        eWxvYWQgY29udGFpbmluZyB0b3AtbGV2ZWwKICAgIGNvbGxlY3Rpb25zIG9m
        IHJlY29yZHMgb3JnYW5pemVkIHBlciB0eXBlLgoKICAgIGBgYGpzCiAgICB7
        CiAgICAgICJwb3N0cyI6IFt7CiAgICAgICAgImlkIjogIjEiLAogICAgICAg
        ICJ0aXRsZSI6ICJSYWlscyBpcyBvbWFrYXNlIiwKICAgICAgICAiYXV0aG9y
        IiwgIjEiLAogICAgICAgICJjb21tZW50cyI6IFsgIjEiIF0KICAgICAgfV0s
        CiAgICAgICJjb21tZW50cyI6IFt7CiAgICAgICAgImlkIjogIjEiLAogICAg
        ICAgICJib2R5IjogIkZJUlNUIgogICAgICB9XSwKICAgICAgInVzZXJzIjog
        W3sKICAgICAgICAiaWQiOiAiMSIsCiAgICAgICAgIm5hbWUiOiAiQGQyaCIK
        ICAgICAgfV0KICAgIH0KICAgIGBgYAoKICAgIEl0IHdpbGwgZmlyc3Qgbm9y
        bWFsaXplIHRoZSBwYXlsb2FkLCBzbyB5b3UgY2FuIHVzZSB0aGlzIHRvIHB1
        c2gKICAgIGluIGRhdGEgc3RyZWFtaW5nIGluIGZyb20geW91ciBzZXJ2ZXIg
        c3RydWN0dXJlZCB0aGUgc2FtZSB3YXkKICAgIHRoYXQgZmV0Y2hlcyBhbmQg
        c2F2ZXMgYXJlIHN0cnVjdHVyZWQuCgogICAgQG1ldGhvZCBwdXNoUGF5bG9h
        ZAogICAgQHBhcmFtIHtEUy5TdG9yZX0gc3RvcmUKICAgIEBwYXJhbSB7T2Jq
        ZWN0fSBwYXlsb2FkCiAgKi8KICBwdXNoUGF5bG9hZDogZnVuY3Rpb24oc3Rv
        cmUsIHBheWxvYWQpIHsKICAgIHBheWxvYWQgPSB0aGlzLm5vcm1hbGl6ZVBh
        eWxvYWQobnVsbCwgcGF5bG9hZCk7CgogICAgZm9yICh2YXIgcHJvcCBpbiBw
        YXlsb2FkKSB7CiAgICAgIHZhciB0eXBlTmFtZSA9IHRoaXMudHlwZUZvclJv
        b3QocHJvcCksCiAgICAgICAgICB0eXBlID0gc3RvcmUubW9kZWxGb3IodHlw
        ZU5hbWUpOwoKICAgICAgLypqc2hpbnQgbG9vcGZ1bmM6dHJ1ZSovCiAgICAg
        IHZhciBub3JtYWxpemVkQXJyYXkgPSBtYXAuY2FsbChFbWJlci5tYWtlQXJy
        YXkocGF5bG9hZFtwcm9wXSksIGZ1bmN0aW9uKGhhc2gpIHsKICAgICAgICBy
        ZXR1cm4gdGhpcy5ub3JtYWxpemUodHlwZSwgaGFzaCwgcHJvcCk7CiAgICAg
        IH0sIHRoaXMpOwoKICAgICAgc3RvcmUucHVzaE1hbnkodHlwZU5hbWUsIG5v
        cm1hbGl6ZWRBcnJheSk7CiAgICB9CiAgfSwKCiAgLyoqCiAgICBZb3UgY2Fu
        IHVzZSB0aGlzIG1ldGhvZCB0byBub3JtYWxpemUgdGhlIEpTT04gcm9vdCBr
        ZXlzIHJldHVybmVkCiAgICBpbnRvIHRoZSBtb2RlbCB0eXBlIGV4cGVjdGVk
        IGJ5IHlvdXIgc3RvcmUuCgogICAgRm9yIGV4YW1wbGUsIHlvdXIgc2VydmVy
        IG1heSByZXR1cm4gdW5kZXJzY29yZWQgcm9vdCBrZXlzIHJhdGhlciB0aGFu
        CiAgICB0aGUgZXhwZWN0ZWQgY2FtZWxjYXNlZCB2ZXJzaW9ucy4KCiAgICBg
        YGBqcwogICAgQXBwLkFwcGxpY2F0aW9uU2VyaWFsaXplciA9IERTLlJFU1RT
        ZXJpYWxpemVyLmV4dGVuZCh7CiAgICAgIHR5cGVGb3JSb290OiBmdW5jdGlv
        bihyb290KSB7CiAgICAgICAgdmFyIGNhbWVsaXplZCA9IEVtYmVyLlN0cmlu
        Zy5jYW1lbGl6ZShyb290KTsKICAgICAgICByZXR1cm4gRW1iZXIuU3RyaW5n
        LnNpbmd1bGFyaXplKGNhbWVsaXplZCk7CiAgICAgIH0KICAgIH0pOwogICAg
        YGBgCgogICAgQG1ldGhvZCB0eXBlRm9yUm9vdAogICAgQHBhcmFtIHtTdHJp
        bmd9IHJvb3QKICAgIEByZXR1cm5zIHtTdHJpbmd9IHRoZSBtb2RlbCdzIHR5
        cGVLZXkKICAqLwogIHR5cGVGb3JSb290OiBmdW5jdGlvbihyb290KSB7CiAg
        ICByZXR1cm4gRW1iZXIuU3RyaW5nLnNpbmd1bGFyaXplKHJvb3QpOwogIH0s
        CgogIC8vIFNFUklBTElaRQoKICAvKioKICAgIENhbGxlZCB3aGVuIGEgcmVj
        b3JkIGlzIHNhdmVkIGluIG9yZGVyIHRvIGNvbnZlcnQgdGhlCiAgICByZWNv
        cmQgaW50byBKU09OLgoKICAgIEJ5IGRlZmF1bHQsIGl0IGNyZWF0ZXMgYSBK
        U09OIG9iamVjdCB3aXRoIGEga2V5IGZvcgogICAgZWFjaCBhdHRyaWJ1dGUg
        YW5kIGJlbG9uZ3NUbyByZWxhdGlvbnNoaXAuCgogICAgRm9yIGV4YW1wbGUs
        IGNvbnNpZGVyIHRoaXMgbW9kZWw6CgogICAgYGBganMKICAgIEFwcC5Db21t
        ZW50ID0gRFMuTW9kZWwuZXh0ZW5kKHsKICAgICAgdGl0bGU6IERTLmF0dHIo
        KSwKICAgICAgYm9keTogRFMuYXR0cigpLAoKICAgICAgYXV0aG9yOiBEUy5i
        ZWxvbmdzVG8oJ3VzZXInKQogICAgfSk7CiAgICBgYGAKCiAgICBUaGUgZGVm
        YXVsdCBzZXJpYWxpemF0aW9uIHdvdWxkIGNyZWF0ZSBhIEpTT04gb2JqZWN0
        IGxpa2U6CgogICAgYGBganMKICAgIHsKICAgICAgInRpdGxlIjogIlJhaWxz
        IGlzIHVuYWdpIiwKICAgICAgImJvZHkiOiAiUmFpbHM/IE9tYWthc2U/IE9f
        TyIsCiAgICAgICJhdXRob3IiOiAxMgogICAgfQogICAgYGBgCgogICAgQnkg
        ZGVmYXVsdCwgYXR0cmlidXRlcyBhcmUgcGFzc2VkIHRocm91Z2ggYXMtaXMs
        IHVubGVzcwogICAgeW91IHNwZWNpZmllZCBhbiBhdHRyaWJ1dGUgdHlwZSAo
        YERTLmF0dHIoJ2RhdGUnKWApLiBJZgogICAgeW91IHNwZWNpZnkgYSB0cmFu
        c2Zvcm0sIHRoZSBKYXZhU2NyaXB0IHZhbHVlIHdpbGwgYmUKICAgIHNlcmlh
        bGl6ZWQgd2hlbiBpbnNlcnRlZCBpbnRvIHRoZSBKU09OIGhhc2guCgogICAg
        QnkgZGVmYXVsdCwgYmVsb25ncy10byByZWxhdGlvbnNoaXBzIGFyZSBjb252
        ZXJ0ZWQgaW50bwogICAgSURzIHdoZW4gaW5zZXJ0ZWQgaW50byB0aGUgSlNP
        TiBoYXNoLgoKICAgICMjIElEcwoKICAgIGBzZXJpYWxpemVgIHRha2VzIGFu
        IG9wdGlvbnMgaGFzaCB3aXRoIGEgc2luZ2xlIG9wdGlvbjoKICAgIGBpbmNs
        dWRlSWRgLiBJZiB0aGlzIG9wdGlvbiBpcyBgdHJ1ZWAsIGBzZXJpYWxpemVg
        IHdpbGwsCiAgICBieSBkZWZhdWx0IGluY2x1ZGUgdGhlIElEIGluIHRoZSBK
        U09OIG9iamVjdCBpdCBidWlsZHMuCgogICAgVGhlIGFkYXB0ZXIgcGFzc2Vz
        IGluIGBpbmNsdWRlSWQ6IHRydWVgIHdoZW4gc2VyaWFsaXppbmcKICAgIGEg
        cmVjb3JkIGZvciBgY3JlYXRlUmVjb3JkYCwgYnV0IG5vdCBmb3IgYHVwZGF0
        ZVJlY29yZGAuCgogICAgIyMgQ3VzdG9taXphdGlvbgoKICAgIFlvdXIgc2Vy
        dmVyIG1heSBleHBlY3QgYSBkaWZmZXJlbnQgSlNPTiBmb3JtYXQgdGhhbiB0
        aGUKICAgIGJ1aWx0LWluIHNlcmlhbGl6YXRpb24gZm9ybWF0LgoKICAgIElu
        IHRoYXQgY2FzZSwgeW91IGNhbiBpbXBsZW1lbnQgYHNlcmlhbGl6ZWAgeW91
        cnNlbGYgYW5kCiAgICByZXR1cm4gYSBKU09OIGhhc2ggb2YgeW91ciBjaG9v
        c2luZy4KCiAgICBgYGBqcwogICAgQXBwLlBvc3RTZXJpYWxpemVyID0gRFMu
        UkVTVFNlcmlhbGl6ZXIuZXh0ZW5kKHsKICAgICAgc2VyaWFsaXplOiBmdW5j
        dGlvbihwb3N0LCBvcHRpb25zKSB7CiAgICAgICAgdmFyIGpzb24gPSB7CiAg
        ICAgICAgICBQT1NUX1RUTDogcG9zdC5nZXQoJ3RpdGxlJyksCiAgICAgICAg
        ICBQT1NUX0JEWTogcG9zdC5nZXQoJ2JvZHknKSwKICAgICAgICAgIFBPU1Rf
        Q01TOiBwb3N0LmdldCgnY29tbWVudHMnKS5tYXBQcm9wZXJ0eSgnaWQnKQog
        ICAgICAgIH0KCiAgICAgICAgaWYgKG9wdGlvbnMuaW5jbHVkZUlkKSB7CiAg
        ICAgICAgICBqc29uLlBPU1RfSURfID0gcG9zdC5nZXQoJ2lkJyk7CiAgICAg
        ICAgfQoKICAgICAgICByZXR1cm4ganNvbjsKICAgICAgfQogICAgfSk7CiAg
        ICBgYGAKCiAgICAjIyBDdXN0b21pemluZyBhbiBBcHAtV2lkZSBTZXJpYWxp
        emVyCgogICAgSWYgeW91IHdhbnQgdG8gZGVmaW5lIGEgc2VyaWFsaXplciBm
        b3IgeW91ciBlbnRpcmUKICAgIGFwcGxpY2F0aW9uLCB5b3UnbGwgcHJvYmFi
        bHkgd2FudCB0byB1c2UgYGVhY2hBdHRyaWJ1dGVgCiAgICBhbmQgYGVhY2hS
        ZWxhdGlvbnNoaXBgIG9uIHRoZSByZWNvcmQuCgogICAgYGBganMKICAgIEFw
        cC5BcHBsaWNhdGlvblNlcmlhbGl6ZXIgPSBEUy5SRVNUU2VyaWFsaXplci5l
        eHRlbmQoewogICAgICBzZXJpYWxpemU6IGZ1bmN0aW9uKHJlY29yZCwgb3B0
        aW9ucykgewogICAgICAgIHZhciBqc29uID0ge307CgogICAgICAgIHJlY29y
        ZC5lYWNoQXR0cmlidXRlKGZ1bmN0aW9uKG5hbWUpIHsKICAgICAgICAgIGpz
        b25bc2VydmVyQXR0cmlidXRlTmFtZShuYW1lKV0gPSByZWNvcmQuZ2V0KG5h
        bWUpOwogICAgICAgIH0pCgogICAgICAgIHJlY29yZC5lYWNoUmVsYXRpb25z
        aGlwKGZ1bmN0aW9uKG5hbWUsIHJlbGF0aW9uc2hpcCkgewogICAgICAgICAg
        aWYgKHJlbGF0aW9uc2hpcC5raW5kID09PSAnaGFzTWFueScpIHsKICAgICAg
        ICAgICAganNvbltzZXJ2ZXJIYXNNYW55TmFtZShuYW1lKV0gPSByZWNvcmQu
        Z2V0KG5hbWUpLm1hcEJ5KCdpZCcpOwogICAgICAgICAgfQogICAgICAgIH0p
        OwoKICAgICAgICBpZiAob3B0aW9ucy5pbmNsdWRlSWQpIHsKICAgICAgICAg
        IGpzb24uSURfID0gcmVjb3JkLmdldCgnaWQnKTsKICAgICAgICB9CgogICAg
        ICAgIHJldHVybiBqc29uOwogICAgICB9CiAgICB9KTsKCiAgICBmdW5jdGlv
        biBzZXJ2ZXJBdHRyaWJ1dGVOYW1lKGF0dHJpYnV0ZSkgewogICAgICByZXR1
        cm4gYXR0cmlidXRlLnVuZGVyc2NvcmUoKS50b1VwcGVyQ2FzZSgpOwogICAg
        fQoKICAgIGZ1bmN0aW9uIHNlcnZlckhhc01hbnlOYW1lKG5hbWUpIHsKICAg
        ICAgcmV0dXJuIHNlcnZlckF0dHJpYnV0ZU5hbWUobmFtZS5zaW5ndWxhcml6
        ZSgpKSArICJfSURTIjsKICAgIH0KICAgIGBgYAoKICAgIFRoaXMgc2VyaWFs
        aXplciB3aWxsIGdlbmVyYXRlIEpTT04gdGhhdCBsb29rcyBsaWtlIHRoaXM6
        CgogICAgYGBganMKICAgIHsKICAgICAgIlRJVExFIjogIlJhaWxzIGlzIG9t
        YWthc2UiLAogICAgICAiQk9EWSI6ICJZZXAuIE9tYWthc2UuIiwKICAgICAg
        IkNPTU1FTlRfSURTIjogWyAxLCAyLCAzIF0KICAgIH0KICAgIGBgYAoKICAg
        ICMjIFR3ZWFraW5nIHRoZSBEZWZhdWx0IEpTT04KCiAgICBJZiB5b3UganVz
        dCB3YW50IHRvIGRvIHNvbWUgc21hbGwgdHdlYWtzIG9uIHRoZSBkZWZhdWx0
        IEpTT04sCiAgICB5b3UgY2FuIGNhbGwgc3VwZXIgZmlyc3QgYW5kIG1ha2Ug
        dGhlIHR3ZWFrcyBvbiB0aGUgcmV0dXJuZWQKICAgIEpTT04uCgogICAgYGBg
        anMKICAgIEFwcC5Qb3N0U2VyaWFsaXplciA9IERTLlJFU1RTZXJpYWxpemVy
        LmV4dGVuZCh7CiAgICAgIHNlcmlhbGl6ZTogZnVuY3Rpb24ocmVjb3JkLCBv
        cHRpb25zKSB7CiAgICAgICAgdmFyIGpzb24gPSB0aGlzLl9zdXBlcihyZWNv
        cmQsIG9wdGlvbnMpOwoKICAgICAgICBqc29uLnN1YmplY3QgPSBqc29uLnRp
        dGxlOwogICAgICAgIGRlbGV0ZSBqc29uLnRpdGxlOwoKICAgICAgICByZXR1
        cm4ganNvbjsKICAgICAgfQogICAgfSk7CiAgICBgYGAKCiAgICBAbWV0aG9k
        IHNlcmlhbGl6ZQogICAgQHBhcmFtIHJlY29yZAogICAgQHBhcmFtIG9wdGlv
        bnMKICAqLwogIHNlcmlhbGl6ZTogZnVuY3Rpb24ocmVjb3JkLCBvcHRpb25z
        KSB7CiAgICByZXR1cm4gdGhpcy5fc3VwZXIuYXBwbHkodGhpcywgYXJndW1l
        bnRzKTsKICB9LAoKICAvKioKICAgIFlvdSBjYW4gdXNlIHRoaXMgbWV0aG9k
        IHRvIGN1c3RvbWl6ZSB0aGUgcm9vdCBrZXlzIHNlcmlhbGl6ZWQgaW50byB0
        aGUgSlNPTi4KICAgIEJ5IGRlZmF1bHQgdGhlIFJFU1QgU2VyaWFsaXplciBz
        ZW5kcyBjYW1lbGl6ZWQgcm9vdCBrZXlzLgogICAgRm9yIGV4YW1wbGUsIHlv
        dXIgc2VydmVyIG1heSBleHBlY3QgdW5kZXJzY29yZWQgcm9vdCBvYmplY3Rz
        LgoKICAgIGBgYGpzCiAgICBBcHAuQXBwbGljYXRpb25TZXJpYWxpemVyID0g
        RFMuUkVTVFNlcmlhbGl6ZXIuZXh0ZW5kKHsKICAgICAgc2VyaWFsaXplSW50
        b0hhc2g6IGZ1bmN0aW9uKGRhdGEsIHR5cGUsIHJlY29yZCwgb3B0aW9ucykg
        ewogICAgICAgIHZhciByb290ID0gRW1iZXIuU3RyaW5nLmRlY2FtZWxpemUo
        dHlwZS50eXBlS2V5KTsKICAgICAgICBkYXRhW3Jvb3RdID0gdGhpcy5zZXJp
        YWxpemUocmVjb3JkLCBvcHRpb25zKTsKICAgICAgfQogICAgfSk7CiAgICBg
        YGAKCiAgICBAbWV0aG9kIHNlcmlhbGl6ZUludG9IYXNoCiAgICBAcGFyYW0g
        e09iamVjdH0gaGFzaAogICAgQHBhcmFtIHtzdWJjbGFzcyBvZiBEUy5Nb2Rl
        bH0gdHlwZQogICAgQHBhcmFtIHtEUy5Nb2RlbH0gcmVjb3JkCiAgICBAcGFy
        YW0ge09iamVjdH0gb3B0aW9ucwogICovCiAgc2VyaWFsaXplSW50b0hhc2g6
        IGZ1bmN0aW9uKGhhc2gsIHR5cGUsIHJlY29yZCwgb3B0aW9ucykgewogICAg
        dmFyIHJvb3QgPSBFbWJlci5TdHJpbmcuY2FtZWxpemUodHlwZS50eXBlS2V5
        KTsKICAgIGhhc2hbcm9vdF0gPSB0aGlzLnNlcmlhbGl6ZShyZWNvcmQsIG9w
        dGlvbnMpOwogIH0sCgogIC8qKgogICAgWW91IGNhbiB1c2UgdGhpcyBtZXRo
        b2QgdG8gY3VzdG9taXplIGhvdyBwb2x5bW9ycGhpYyBvYmplY3RzIGFyZSBz
        ZXJpYWxpemVkLgogICAgQnkgZGVmYXVsdCB0aGUgSlNPTiBTZXJpYWxpemVy
        IGNyZWF0ZXMgdGhlIGtleSBieSBhcHBlbmRpbmcgYFR5cGVgIHRvCiAgICB0
        aGUgYXR0cmlidXRlIGFuZCB2YWx1ZSBmcm9tIHRoZSBtb2RlbCdzIGNhbWVs
        Y2FzZWQgbW9kZWwgbmFtZS4KCiAgICBAbWV0aG9kIHNlcmlhbGl6ZVBvbHlt
        b3JwaGljVHlwZQogICAgQHBhcmFtIHtEUy5Nb2RlbH0gcmVjb3JkCiAgICBA
        cGFyYW0ge09iamVjdH0ganNvbgogICAgQHBhcmFtIHtPYmplY3R9IHJlbGF0
        aW9uc2hpcAogICovCiAgc2VyaWFsaXplUG9seW1vcnBoaWNUeXBlOiBmdW5j
        dGlvbihyZWNvcmQsIGpzb24sIHJlbGF0aW9uc2hpcCkgewogICAgdmFyIGtl
        eSA9IHJlbGF0aW9uc2hpcC5rZXksCiAgICAgICAgYmVsb25nc1RvID0gZ2V0
        KHJlY29yZCwga2V5KTsKICAgIGtleSA9IHRoaXMua2V5Rm9yQXR0cmlidXRl
        ID8gdGhpcy5rZXlGb3JBdHRyaWJ1dGUoa2V5KSA6IGtleTsKICAgIGpzb25b
        a2V5ICsgIlR5cGUiXSA9IEVtYmVyLlN0cmluZy5jYW1lbGl6ZShiZWxvbmdz
        VG8uY29uc3RydWN0b3IudHlwZUtleSk7CiAgfQp9KTsKCn0pKCk7CgoKCihm
        dW5jdGlvbigpIHsKLyoqCiAgQG1vZHVsZSBlbWJlci1kYXRhCiovCgp2YXIg
        Z2V0ID0gRW1iZXIuZ2V0LCBzZXQgPSBFbWJlci5zZXQ7CnZhciBmb3JFYWNo
        ID0gRW1iZXIuQXJyYXlQb2x5ZmlsbHMuZm9yRWFjaDsKCi8qKgogIFRoZSBS
        RVNUIGFkYXB0ZXIgYWxsb3dzIHlvdXIgc3RvcmUgdG8gY29tbXVuaWNhdGUg
        d2l0aCBhbiBIVFRQIHNlcnZlciBieQogIHRyYW5zbWl0dGluZyBKU09OIHZp
        YSBYSFIuIE1vc3QgRW1iZXIuanMgYXBwcyB0aGF0IGNvbnN1bWUgYSBKU09O
        IEFQSQogIHNob3VsZCB1c2UgdGhlIFJFU1QgYWRhcHRlci4KCiAgVGhpcyBh
        ZGFwdGVyIGlzIGRlc2lnbmVkIGFyb3VuZCB0aGUgaWRlYSB0aGF0IHRoZSBK
        U09OIGV4Y2hhbmdlZCB3aXRoCiAgdGhlIHNlcnZlciBzaG91bGQgYmUgY29u
        dmVudGlvbmFsLgoKICAjIyBKU09OIFN0cnVjdHVyZQoKICBUaGUgUkVTVCBh
        ZGFwdGVyIGV4cGVjdHMgdGhlIEpTT04gcmV0dXJuZWQgZnJvbSB5b3VyIHNl
        cnZlciB0byBmb2xsb3cKICB0aGVzZSBjb252ZW50aW9ucy4KCiAgIyMjIE9i
        amVjdCBSb290CgogIFRoZSBKU09OIHBheWxvYWQgc2hvdWxkIGJlIGFuIG9i
        amVjdCB0aGF0IGNvbnRhaW5zIHRoZSByZWNvcmQgaW5zaWRlIGEKICByb290
        IHByb3BlcnR5LiBGb3IgZXhhbXBsZSwgaW4gcmVzcG9uc2UgdG8gYSBgR0VU
        YCByZXF1ZXN0IGZvcgogIGAvcG9zdHMvMWAsIHRoZSBKU09OIHNob3VsZCBs
        b29rIGxpa2UgdGhpczoKCiAgYGBganMKICB7CiAgICAicG9zdCI6IHsKICAg
        ICAgInRpdGxlIjogIkknbSBSdW5uaW5nIHRvIFJlZm9ybSB0aGUgVzNDJ3Mg
        VGFnIiwKICAgICAgImF1dGhvciI6ICJZZWh1ZGEgS2F0eiIKICAgIH0KICB9
        CiAgYGBgCgogICMjIyBDb252ZW50aW9uYWwgTmFtZXMKCiAgQXR0cmlidXRl
        IG5hbWVzIGluIHlvdXIgSlNPTiBwYXlsb2FkIHNob3VsZCBiZSB0aGUgY2Ft
        ZWxDYXNlZCB2ZXJzaW9ucyBvZgogIHRoZSBhdHRyaWJ1dGVzIGluIHlvdXIg
        RW1iZXIuanMgbW9kZWxzLgoKICBGb3IgZXhhbXBsZSwgaWYgeW91IGhhdmUg
        YSBgUGVyc29uYCBtb2RlbDoKCiAgYGBganMKICBBcHAuUGVyc29uID0gRFMu
        TW9kZWwuZXh0ZW5kKHsKICAgIGZpcnN0TmFtZTogRFMuYXR0cignc3RyaW5n
        JyksCiAgICBsYXN0TmFtZTogRFMuYXR0cignc3RyaW5nJyksCiAgICBvY2N1
        cGF0aW9uOiBEUy5hdHRyKCdzdHJpbmcnKQogIH0pOwogIGBgYAoKICBUaGUg
        SlNPTiByZXR1cm5lZCBzaG91bGQgbG9vayBsaWtlIHRoaXM6CgogIGBgYGpz
        CiAgewogICAgInBlcnNvbiI6IHsKICAgICAgImZpcnN0TmFtZSI6ICJCYXJh
        Y2siLAogICAgICAibGFzdE5hbWUiOiAiT2JhbWEiLAogICAgICAib2NjdXBh
        dGlvbiI6ICJQcmVzaWRlbnQiCiAgICB9CiAgfQogIGBgYAoKICAjIyBDdXN0
        b21pemF0aW9uCgogICMjIyBFbmRwb2ludCBwYXRoIGN1c3RvbWl6YXRpb24K
        CiAgRW5kcG9pbnQgcGF0aHMgY2FuIGJlIHByZWZpeGVkIHdpdGggYSBgbmFt
        ZXNwYWNlYCBieSBzZXR0aW5nIHRoZSBuYW1lc3BhY2UKICBwcm9wZXJ0eSBv
        biB0aGUgYWRhcHRlcjoKCiAgYGBganMKICBEUy5SRVNUQWRhcHRlci5yZW9w
        ZW4oewogICAgbmFtZXNwYWNlOiAnYXBpLzEnCiAgfSk7CiAgYGBgCiAgUmVx
        dWVzdHMgZm9yIGBBcHAuUGVyc29uYCB3b3VsZCBub3cgdGFyZ2V0IGAvYXBp
        LzEvcGVvcGxlLzFgLgoKICAjIyMgSG9zdCBjdXN0b21pemF0aW9uCgogIEFu
        IGFkYXB0ZXIgY2FuIHRhcmdldCBvdGhlciBob3N0cyBieSBzZXR0aW5nIHRo
        ZSBgaG9zdGAgcHJvcGVydHkuCgogIGBgYGpzCiAgRFMuUkVTVEFkYXB0ZXIu
        cmVvcGVuKHsKICAgIGhvc3Q6ICdodHRwczovL2FwaS5leGFtcGxlLmNvbScK
        ICB9KTsKICBgYGAKCiAgIyMjIEhlYWRlcnMgY3VzdG9taXphdGlvbgoKICBT
        b21lIEFQSXMgcmVxdWlyZSBIVFRQIGhlYWRlcnMsIGUuZy4gdG8gcHJvdmlk
        ZSBhbiBBUEkga2V5LiBBbiBhcnJheSBvZgogIGhlYWRlcnMgY2FuIGJlIGFk
        ZGVkIHRvIHRoZSBhZGFwdGVyIHdoaWNoIGFyZSBwYXNzZWQgd2l0aCBldmVy
        eSByZXF1ZXN0OgoKICBgYGBqcwogIERTLlJFU1RBZGFwdGVyLnJlb3Blbih7
        CiAgICBoZWFkZXJzOiB7CiAgICAgICJBUElfS0VZIjogInNlY3JldCBrZXki
        LAogICAgICAiQU5PVEhFUl9IRUFERVIiOiAiU29tZSBoZWFkZXIgdmFsdWUi
        CiAgICB9CiAgfSk7CiAgYGBgCgogIEBjbGFzcyBSRVNUQWRhcHRlcgogIEBj
        b25zdHJ1Y3RvcgogIEBuYW1lc3BhY2UgRFMKICBAZXh0ZW5kcyBEUy5BZGFw
        dGVyCiovCkRTLlJFU1RBZGFwdGVyID0gRFMuQWRhcHRlci5leHRlbmQoewog
        IGRlZmF1bHRTZXJpYWxpemVyOiAnLXJlc3QnLAoKCiAgLyoqCiAgICBFbmRw
        b2ludCBwYXRocyBjYW4gYmUgcHJlZml4ZWQgd2l0aCBhIGBuYW1lc3BhY2Vg
        IGJ5IHNldHRpbmcgdGhlIG5hbWVzcGFjZQogICAgcHJvcGVydHkgb24gdGhl
        IGFkYXB0ZXI6CgogICAgYGBgamF2YXNjcmlwdAogICAgRFMuUkVTVEFkYXB0
        ZXIucmVvcGVuKHsKICAgICAgbmFtZXNwYWNlOiAnYXBpLzEnCiAgICB9KTsK
        ICAgIGBgYAoKICAgIFJlcXVlc3RzIGZvciBgQXBwLlBvc3RgIHdvdWxkIG5v
        dyB0YXJnZXQgYC9hcGkvMS9wb3N0L2AuCgogICAgQHByb3BlcnR5IG5hbWVz
        cGFjZQogICAgQHR5cGUge1N0cmluZ30KICAqLwoKICAvKioKICAgIEFuIGFk
        YXB0ZXIgY2FuIHRhcmdldCBvdGhlciBob3N0cyBieSBzZXR0aW5nIHRoZSBg
        aG9zdGAgcHJvcGVydHkuCgogICAgYGBgamF2YXNjcmlwdAogICAgRFMuUkVT
        VEFkYXB0ZXIucmVvcGVuKHsKICAgICAgaG9zdDogJ2h0dHBzOi8vYXBpLmV4
        YW1wbGUuY29tJwogICAgfSk7CiAgICBgYGAKCiAgICBSZXF1ZXN0cyBmb3Ig
        YEFwcC5Qb3N0YCB3b3VsZCBub3cgdGFyZ2V0IGBodHRwczovL2FwaS5leGFt
        cGxlLmNvbS9wb3N0L2AuCgogICAgQHByb3BlcnR5IGhvc3QKICAgIEB0eXBl
        IHtTdHJpbmd9CiAgKi8KCiAgLyoqCiAgICBTb21lIEFQSXMgcmVxdWlyZSBI
        VFRQIGhlYWRlcnMsIGUuZy4gdG8gcHJvdmlkZSBhbiBBUEkga2V5LiBBbiBh
        cnJheSBvZgogICAgaGVhZGVycyBjYW4gYmUgYWRkZWQgdG8gdGhlIGFkYXB0
        ZXIgd2hpY2ggYXJlIHBhc3NlZCB3aXRoIGV2ZXJ5IHJlcXVlc3Q6CgogICAg
        YGBgamF2YXNjcmlwdAogICAgRFMuUkVTVEFkYXB0ZXIucmVvcGVuKHsKICAg
        ICAgaGVhZGVyczogewogICAgICAgICJBUElfS0VZIjogInNlY3JldCBrZXki
        LAogICAgICAgICJBTk9USEVSX0hFQURFUiI6ICJTb21lIGhlYWRlciB2YWx1
        ZSIKICAgICAgfQogICAgfSk7CiAgICBgYGAKCiAgICBAcHJvcGVydHkgaGVh
        ZGVycwogICAgQHR5cGUge09iamVjdH0KICAqLwoKICAvKioKICAgIENhbGxl
        ZCBieSB0aGUgc3RvcmUgaW4gb3JkZXIgdG8gZmV0Y2ggdGhlIEpTT04gZm9y
        IGEgZ2l2ZW4KICAgIHR5cGUgYW5kIElELgoKICAgIFRoZSBgZmluZGAgbWV0
        aG9kIG1ha2VzIGFuIEFqYXggcmVxdWVzdCB0byBhIFVSTCBjb21wdXRlZCBi
        eSBgYnVpbGRVUkxgLCBhbmQgcmV0dXJucyBhCiAgICBwcm9taXNlIGZvciB0
        aGUgcmVzdWx0aW5nIHBheWxvYWQuCgogICAgVGhpcyBtZXRob2QgcGVyZm9y
        bXMgYW4gSFRUUCBgR0VUYCByZXF1ZXN0IHdpdGggdGhlIGlkIHByb3ZpZGVk
        IGFzIHBhcnQgb2YgdGhlIHF1ZXJ5IHN0cmluZy4KCiAgICBAbWV0aG9kIGZp
        bmQKICAgIEBwYXJhbSB7RFMuU3RvcmV9IHN0b3JlCiAgICBAcGFyYW0ge3N1
        YmNsYXNzIG9mIERTLk1vZGVsfSB0eXBlCiAgICBAcGFyYW0ge1N0cmluZ30g
        aWQKICAgIEByZXR1cm5zIHtQcm9taXNlfSBwcm9taXNlCiAgKi8KICBmaW5k
        OiBmdW5jdGlvbihzdG9yZSwgdHlwZSwgaWQpIHsKICAgIHJldHVybiB0aGlz
        LmFqYXgodGhpcy5idWlsZFVSTCh0eXBlLnR5cGVLZXksIGlkKSwgJ0dFVCcp
        OwogIH0sCgogIC8qKgogICAgQ2FsbGVkIGJ5IHRoZSBzdG9yZSBpbiBvcmRl
        ciB0byBmZXRjaCBhIEpTT04gYXJyYXkgZm9yIGFsbAogICAgb2YgdGhlIHJl
        Y29yZHMgZm9yIGEgZ2l2ZW4gdHlwZS4KCiAgICBUaGUgYGZpbmRBbGxgIG1l
        dGhvZCBtYWtlcyBhbiBBamF4IChIVFRQIEdFVCkgcmVxdWVzdCB0byBhIFVS
        TCBjb21wdXRlZCBieSBgYnVpbGRVUkxgLCBhbmQgcmV0dXJucyBhCiAgICBw
        cm9taXNlIGZvciB0aGUgcmVzdWx0aW5nIHBheWxvYWQuCgogICAgQHByaXZh
        dGUKICAgIEBtZXRob2QgZmluZEFsbAogICAgQHBhcmFtIHtEUy5TdG9yZX0g
        c3RvcmUKICAgIEBwYXJhbSB7c3ViY2xhc3Mgb2YgRFMuTW9kZWx9IHR5cGUK
        ICAgIEBwYXJhbSB7U3RyaW5nfSBzaW5jZVRva2VuCiAgICBAcmV0dXJucyB7
        UHJvbWlzZX0gcHJvbWlzZQogICovCiAgZmluZEFsbDogZnVuY3Rpb24oc3Rv
        cmUsIHR5cGUsIHNpbmNlVG9rZW4pIHsKICAgIHZhciBxdWVyeTsKCiAgICBp
        ZiAoc2luY2VUb2tlbikgewogICAgICBxdWVyeSA9IHsgc2luY2U6IHNpbmNl
        VG9rZW4gfTsKICAgIH0KCiAgICByZXR1cm4gdGhpcy5hamF4KHRoaXMuYnVp
        bGRVUkwodHlwZS50eXBlS2V5KSwgJ0dFVCcsIHsgZGF0YTogcXVlcnkgfSk7
        CiAgfSwKCiAgLyoqCiAgICBDYWxsZWQgYnkgdGhlIHN0b3JlIGluIG9yZGVy
        IHRvIGZldGNoIGEgSlNPTiBhcnJheSBmb3IKICAgIHRoZSByZWNvcmRzIHRo
        YXQgbWF0Y2ggYSBwYXJ0aWN1bGFyIHF1ZXJ5LgoKICAgIFRoZSBgZmluZFF1
        ZXJ5YCBtZXRob2QgbWFrZXMgYW4gQWpheCAoSFRUUCBHRVQpIHJlcXVlc3Qg
        dG8gYSBVUkwgY29tcHV0ZWQgYnkgYGJ1aWxkVVJMYCwgYW5kIHJldHVybnMg
        YQogICAgcHJvbWlzZSBmb3IgdGhlIHJlc3VsdGluZyBwYXlsb2FkLgoKICAg
        IFRoZSBgcXVlcnlgIGFyZ3VtZW50IGlzIGEgc2ltcGxlIEphdmFTY3JpcHQg
        b2JqZWN0IHRoYXQgd2lsbCBiZSBwYXNzZWQgZGlyZWN0bHkKICAgIHRvIHRo
        ZSBzZXJ2ZXIgYXMgcGFyYW1ldGVycy4KCiAgICBAcHJpdmF0ZQogICAgQG1l
        dGhvZCBmaW5kUXVlcnkKICAgIEBwYXJhbSB7RFMuU3RvcmV9IHN0b3JlCiAg
        ICBAcGFyYW0ge3N1YmNsYXNzIG9mIERTLk1vZGVsfSB0eXBlCiAgICBAcGFy
        YW0ge09iamVjdH0gcXVlcnkKICAgIEByZXR1cm5zIHtQcm9taXNlfSBwcm9t
        aXNlCiAgKi8KICBmaW5kUXVlcnk6IGZ1bmN0aW9uKHN0b3JlLCB0eXBlLCBx
        dWVyeSkgewogICAgcmV0dXJuIHRoaXMuYWpheCh0aGlzLmJ1aWxkVVJMKHR5
        cGUudHlwZUtleSksICdHRVQnLCB7IGRhdGE6IHF1ZXJ5IH0pOwogIH0sCgog
        IC8qKgogICAgQ2FsbGVkIGJ5IHRoZSBzdG9yZSBpbiBvcmRlciB0byBmZXRj
        aCBhIEpTT04gYXJyYXkgZm9yCiAgICB0aGUgdW5sb2FkZWQgcmVjb3JkcyBp
        biBhIGhhcy1tYW55IHJlbGF0aW9uc2hpcCB0aGF0IHdlcmUgb3JpZ2luYWxs
        eQogICAgc3BlY2lmaWVkIGFzIElEcy4KCiAgICBGb3IgZXhhbXBsZSwgaWYg
        dGhlIG9yaWdpbmFsIHBheWxvYWQgbG9va3MgbGlrZToKCiAgICBgYGBqcwog
        ICAgewogICAgICAiaWQiOiAxLAogICAgICAidGl0bGUiOiAiUmFpbHMgaXMg
        b21ha2FzZSIsCiAgICAgICJjb21tZW50cyI6IFsgMSwgMiwgMyBdCiAgICB9
        CiAgICBgYGAKCiAgICBUaGUgSURzIHdpbGwgYmUgcGFzc2VkIGFzIGEgVVJM
        LWVuY29kZWQgQXJyYXkgb2YgSURzLCBpbiB0aGlzIGZvcm06CgogICAgYGBg
        CiAgICBpZHNbXT0xJmlkc1tdPTImaWRzW109MwogICAgYGBgCgogICAgTWFu
        eSBzZXJ2ZXJzLCBzdWNoIGFzIFJhaWxzIGFuZCBQSFAsIHdpbGwgYXV0b21h
        dGljYWxseSBjb252ZXJ0IHRoaXMgVVJMLWVuY29kZWQgYXJyYXkKICAgIGlu
        dG8gYW4gQXJyYXkgZm9yIHlvdSBvbiB0aGUgc2VydmVyLXNpZGUuIElmIHlv
        dSB3YW50IHRvIGVuY29kZSB0aGUKICAgIElEcywgZGlmZmVyZW50bHksIGp1
        c3Qgb3ZlcnJpZGUgdGhpcyAob25lLWxpbmUpIG1ldGhvZC4KCiAgICBUaGUg
        YGZpbmRNYW55YCBtZXRob2QgbWFrZXMgYW4gQWpheCAoSFRUUCBHRVQpIHJl
        cXVlc3QgdG8gYSBVUkwgY29tcHV0ZWQgYnkgYGJ1aWxkVVJMYCwgYW5kIHJl
        dHVybnMgYQogICAgcHJvbWlzZSBmb3IgdGhlIHJlc3VsdGluZyBwYXlsb2Fk
        LgoKICAgIEBtZXRob2QgZmluZE1hbnkKICAgIEBwYXJhbSB7RFMuU3RvcmV9
        IHN0b3JlCiAgICBAcGFyYW0ge3N1YmNsYXNzIG9mIERTLk1vZGVsfSB0eXBl
        CiAgICBAcGFyYW0ge0FycmF5fSBpZHMKICAgIEByZXR1cm5zIHtQcm9taXNl
        fSBwcm9taXNlCiAgKi8KICBmaW5kTWFueTogZnVuY3Rpb24oc3RvcmUsIHR5
        cGUsIGlkcykgewogICAgcmV0dXJuIHRoaXMuYWpheCh0aGlzLmJ1aWxkVVJM
        KHR5cGUudHlwZUtleSksICdHRVQnLCB7IGRhdGE6IHsgaWRzOiBpZHMgfSB9
        KTsKICB9LAoKICAvKioKICAgIENhbGxlZCBieSB0aGUgc3RvcmUgaW4gb3Jk
        ZXIgdG8gZmV0Y2ggYSBKU09OIGFycmF5IGZvcgogICAgdGhlIHVubG9hZGVk
        IHJlY29yZHMgaW4gYSBoYXMtbWFueSByZWxhdGlvbnNoaXAgdGhhdCB3ZXJl
        IG9yaWdpbmFsbHkKICAgIHNwZWNpZmllZCBhcyBhIFVSTCAoaW5zaWRlIG9m
        IGBsaW5rc2ApLgoKICAgIEZvciBleGFtcGxlLCBpZiB5b3VyIG9yaWdpbmFs
        IHBheWxvYWQgbG9va3MgbGlrZSB0aGlzOgoKICAgIGBgYGpzCiAgICB7CiAg
        ICAgICJwb3N0IjogewogICAgICAgICJpZCI6IDEsCiAgICAgICAgInRpdGxl
        IjogIlJhaWxzIGlzIG9tYWthc2UiLAogICAgICAgICJsaW5rcyI6IHsgImNv
        bW1lbnRzIjogIi9wb3N0cy8xL2NvbW1lbnRzIiB9CiAgICAgIH0KICAgIH0K
        ICAgIGBgYAoKICAgIFRoaXMgbWV0aG9kIHdpbGwgYmUgY2FsbGVkIHdpdGgg
        dGhlIHBhcmVudCByZWNvcmQgYW5kIGAvcG9zdHMvMS9jb21tZW50c2AuCgog
        ICAgVGhlIGBmaW5kSGFzTWFueWAgbWV0aG9kIHdpbGwgbWFrZSBhbiBBamF4
        IChIVFRQIEdFVCkgcmVxdWVzdCB0byB0aGUgb3JpZ2luYWxseSBzcGVjaWZp
        ZWQgVVJMLgogICAgSWYgdGhlIFVSTCBpcyBob3N0LXJlbGF0aXZlIChzdGFy
        dGluZyB3aXRoIGEgc2luZ2xlIHNsYXNoKSwgdGhlCiAgICByZXF1ZXN0IHdp
        bGwgdXNlIHRoZSBob3N0IHNwZWNpZmllZCBvbiB0aGUgYWRhcHRlciAoaWYg
        YW55KS4KCiAgICBAbWV0aG9kIGZpbmRIYXNNYW55CiAgICBAcGFyYW0ge0RT
        LlN0b3JlfSBzdG9yZQogICAgQHBhcmFtIHtEUy5Nb2RlbH0gcmVjb3JkCiAg
        ICBAcGFyYW0ge1N0cmluZ30gdXJsCiAgICBAcmV0dXJucyB7UHJvbWlzZX0g
        cHJvbWlzZQogICovCiAgZmluZEhhc01hbnk6IGZ1bmN0aW9uKHN0b3JlLCBy
        ZWNvcmQsIHVybCkgewogICAgdmFyIGhvc3QgPSBnZXQodGhpcywgJ2hvc3Qn
        KSwKICAgICAgICBpZCAgID0gZ2V0KHJlY29yZCwgJ2lkJyksCiAgICAgICAg
        dHlwZSA9IHJlY29yZC5jb25zdHJ1Y3Rvci50eXBlS2V5OwoKICAgIGlmICho
        b3N0ICYmIHVybC5jaGFyQXQoMCkgPT09ICcvJyAmJiB1cmwuY2hhckF0KDEp
        ICE9PSAnLycpIHsKICAgICAgdXJsID0gaG9zdCArIHVybDsKICAgIH0KCiAg
        ICByZXR1cm4gdGhpcy5hamF4KHRoaXMudXJsUHJlZml4KHVybCwgdGhpcy5i
        dWlsZFVSTCh0eXBlLCBpZCkpLCAnR0VUJyk7CiAgfSwKCiAgLyoqCiAgICBD
        YWxsZWQgYnkgdGhlIHN0b3JlIGluIG9yZGVyIHRvIGZldGNoIGEgSlNPTiBh
        cnJheSBmb3IKICAgIHRoZSB1bmxvYWRlZCByZWNvcmRzIGluIGEgYmVsb25n
        cy10byByZWxhdGlvbnNoaXAgdGhhdCB3ZXJlIG9yaWdpbmFsbHkKICAgIHNw
        ZWNpZmllZCBhcyBhIFVSTCAoaW5zaWRlIG9mIGBsaW5rc2ApLgoKICAgIEZv
        ciBleGFtcGxlLCBpZiB5b3VyIG9yaWdpbmFsIHBheWxvYWQgbG9va3MgbGlr
        ZSB0aGlzOgoKICAgIGBgYGpzCiAgICB7CiAgICAgICJwZXJzb24iOiB7CiAg
        ICAgICAgImlkIjogMSwKICAgICAgICAibmFtZSI6ICJUb20gRGFsZSIsCiAg
        ICAgICAgImxpbmtzIjogeyAiZ3JvdXAiOiAiL3Blb3BsZS8xL2dyb3VwIiB9
        CiAgICAgIH0KICAgIH0KICAgIGBgYAoKICAgIFRoaXMgbWV0aG9kIHdpbGwg
        YmUgY2FsbGVkIHdpdGggdGhlIHBhcmVudCByZWNvcmQgYW5kIGAvcGVvcGxl
        LzEvZ3JvdXBgLgoKICAgIFRoZSBgZmluZEJlbG9uZ3NUb2AgbWV0aG9kIHdp
        bGwgbWFrZSBhbiBBamF4IChIVFRQIEdFVCkgcmVxdWVzdCB0byB0aGUgb3Jp
        Z2luYWxseSBzcGVjaWZpZWQgVVJMLgoKICAgIEBtZXRob2QgZmluZEJlbG9u
        Z3NUbwogICAgQHBhcmFtIHtEUy5TdG9yZX0gc3RvcmUKICAgIEBwYXJhbSB7
        RFMuTW9kZWx9IHJlY29yZAogICAgQHBhcmFtIHtTdHJpbmd9IHVybAogICAg
        QHJldHVybnMge1Byb21pc2V9IHByb21pc2UKICAqLwogIGZpbmRCZWxvbmdz
        VG86IGZ1bmN0aW9uKHN0b3JlLCByZWNvcmQsIHVybCkgewogICAgdmFyIGlk
        ICAgPSBnZXQocmVjb3JkLCAnaWQnKSwKICAgICAgICB0eXBlID0gcmVjb3Jk
        LmNvbnN0cnVjdG9yLnR5cGVLZXk7CgogICAgcmV0dXJuIHRoaXMuYWpheCh0
        aGlzLnVybFByZWZpeCh1cmwsIHRoaXMuYnVpbGRVUkwodHlwZSwgaWQpKSwg
        J0dFVCcpOwogIH0sCgogIC8qKgogICAgQ2FsbGVkIGJ5IHRoZSBzdG9yZSB3
        aGVuIGEgbmV3bHkgY3JlYXRlZCByZWNvcmQgaXMKICAgIHNhdmVkIHZpYSB0
        aGUgYHNhdmVgIG1ldGhvZCBvbiBhIG1vZGVsIHJlY29yZCBpbnN0YW5jZS4K
        CiAgICBUaGUgYGNyZWF0ZVJlY29yZGAgbWV0aG9kIHNlcmlhbGl6ZXMgdGhl
        IHJlY29yZCBhbmQgbWFrZXMgYW4gQWpheCAoSFRUUCBQT1NUKSByZXF1ZXN0
        CiAgICB0byBhIFVSTCBjb21wdXRlZCBieSBgYnVpbGRVUkxgLgoKICAgIFNl
        ZSBgc2VyaWFsaXplYCBmb3IgaW5mb3JtYXRpb24gb24gaG93IHRvIGN1c3Rv
        bWl6ZSB0aGUgc2VyaWFsaXplZCBmb3JtCiAgICBvZiBhIHJlY29yZC4KCiAg
        ICBAbWV0aG9kIGNyZWF0ZVJlY29yZAogICAgQHBhcmFtIHtEUy5TdG9yZX0g
        c3RvcmUKICAgIEBwYXJhbSB7c3ViY2xhc3Mgb2YgRFMuTW9kZWx9IHR5cGUK
        ICAgIEBwYXJhbSB7RFMuTW9kZWx9IHJlY29yZAogICAgQHJldHVybnMge1By
        b21pc2V9IHByb21pc2UKICAqLwogIGNyZWF0ZVJlY29yZDogZnVuY3Rpb24o
        c3RvcmUsIHR5cGUsIHJlY29yZCkgewogICAgdmFyIGRhdGEgPSB7fTsKICAg
        IHZhciBzZXJpYWxpemVyID0gc3RvcmUuc2VyaWFsaXplckZvcih0eXBlLnR5
        cGVLZXkpOwoKICAgIHNlcmlhbGl6ZXIuc2VyaWFsaXplSW50b0hhc2goZGF0
        YSwgdHlwZSwgcmVjb3JkLCB7IGluY2x1ZGVJZDogdHJ1ZSB9KTsKCiAgICBy
        ZXR1cm4gdGhpcy5hamF4KHRoaXMuYnVpbGRVUkwodHlwZS50eXBlS2V5KSwg
        IlBPU1QiLCB7IGRhdGE6IGRhdGEgfSk7CiAgfSwKCiAgLyoqCiAgICBDYWxs
        ZWQgYnkgdGhlIHN0b3JlIHdoZW4gYW4gZXhpc3RpbmcgcmVjb3JkIGlzIHNh
        dmVkCiAgICB2aWEgdGhlIGBzYXZlYCBtZXRob2Qgb24gYSBtb2RlbCByZWNv
        cmQgaW5zdGFuY2UuCgogICAgVGhlIGB1cGRhdGVSZWNvcmRgIG1ldGhvZCBz
        ZXJpYWxpemVzIHRoZSByZWNvcmQgYW5kIG1ha2VzIGFuIEFqYXggKEhUVFAg
        UFVUKSByZXF1ZXN0CiAgICB0byBhIFVSTCBjb21wdXRlZCBieSBgYnVpbGRV
        UkxgLgoKICAgIFNlZSBgc2VyaWFsaXplYCBmb3IgaW5mb3JtYXRpb24gb24g
        aG93IHRvIGN1c3RvbWl6ZSB0aGUgc2VyaWFsaXplZCBmb3JtCiAgICBvZiBh
        IHJlY29yZC4KCiAgICBAbWV0aG9kIHVwZGF0ZVJlY29yZAogICAgQHBhcmFt
        IHtEUy5TdG9yZX0gc3RvcmUKICAgIEBwYXJhbSB7c3ViY2xhc3Mgb2YgRFMu
        TW9kZWx9IHR5cGUKICAgIEBwYXJhbSB7RFMuTW9kZWx9IHJlY29yZAogICAg
        QHJldHVybnMge1Byb21pc2V9IHByb21pc2UKICAqLwogIHVwZGF0ZVJlY29y
        ZDogZnVuY3Rpb24oc3RvcmUsIHR5cGUsIHJlY29yZCkgewogICAgdmFyIGRh
        dGEgPSB7fTsKICAgIHZhciBzZXJpYWxpemVyID0gc3RvcmUuc2VyaWFsaXpl
        ckZvcih0eXBlLnR5cGVLZXkpOwoKICAgIHNlcmlhbGl6ZXIuc2VyaWFsaXpl
        SW50b0hhc2goZGF0YSwgdHlwZSwgcmVjb3JkKTsKCiAgICB2YXIgaWQgPSBn
        ZXQocmVjb3JkLCAnaWQnKTsKCiAgICByZXR1cm4gdGhpcy5hamF4KHRoaXMu
        YnVpbGRVUkwodHlwZS50eXBlS2V5LCBpZCksICJQVVQiLCB7IGRhdGE6IGRh
        dGEgfSk7CiAgfSwKCiAgLyoqCiAgICBDYWxsZWQgYnkgdGhlIHN0b3JlIHdo
        ZW4gYSByZWNvcmQgaXMgZGVsZXRlZC4KCiAgICBUaGUgYGRlbGV0ZVJlY29y
        ZGAgbWV0aG9kICBtYWtlcyBhbiBBamF4IChIVFRQIERFTEVURSkgcmVxdWVz
        dCB0byBhIFVSTCBjb21wdXRlZCBieSBgYnVpbGRVUkxgLgoKICAgIEBtZXRo
        b2QgZGVsZXRlUmVjb3JkCiAgICBAcGFyYW0ge0RTLlN0b3JlfSBzdG9yZQog
        ICAgQHBhcmFtIHtzdWJjbGFzcyBvZiBEUy5Nb2RlbH0gdHlwZQogICAgQHBh
        cmFtIHtEUy5Nb2RlbH0gcmVjb3JkCiAgICBAcmV0dXJucyB7UHJvbWlzZX0g
        cHJvbWlzZQogICovCiAgZGVsZXRlUmVjb3JkOiBmdW5jdGlvbihzdG9yZSwg
        dHlwZSwgcmVjb3JkKSB7CiAgICB2YXIgaWQgPSBnZXQocmVjb3JkLCAnaWQn
        KTsKCiAgICByZXR1cm4gdGhpcy5hamF4KHRoaXMuYnVpbGRVUkwodHlwZS50
        eXBlS2V5LCBpZCksICJERUxFVEUiKTsKICB9LAoKICAvKioKICAgIEJ1aWxk
        cyBhIFVSTCBmb3IgYSBnaXZlbiB0eXBlIGFuZCBvcHRpb25hbCBJRC4KCiAg
        ICBCeSBkZWZhdWx0LCBpdCBwbHVyYWxpemVzIHRoZSB0eXBlJ3MgbmFtZSAo
        Zm9yIGV4YW1wbGUsICdwb3N0JwogICAgYmVjb21lcyAncG9zdHMnIGFuZCAn
        cGVyc29uJyBiZWNvbWVzICdwZW9wbGUnKS4gVG8gb3ZlcnJpZGUgdGhlCiAg
        ICBwbHVyYWxpemF0aW9uIHNlZSBbcGF0aEZvclR5cGVdKCNtZXRob2RfcGF0
        aEZvclR5cGUpLgoKICAgIElmIGFuIElEIGlzIHNwZWNpZmllZCwgaXQgYWRk
        cyB0aGUgSUQgdG8gdGhlIHBhdGggZ2VuZXJhdGVkCiAgICBmb3IgdGhlIHR5
        cGUsIHNlcGFyYXRlZCBieSBhIGAvYC4KCiAgICBAbWV0aG9kIGJ1aWxkVVJM
        CiAgICBAcGFyYW0ge1N0cmluZ30gdHlwZQogICAgQHBhcmFtIHtTdHJpbmd9
        IGlkCiAgICBAcmV0dXJucyB7U3RyaW5nfSB1cmwKICAqLwogIGJ1aWxkVVJM
        OiBmdW5jdGlvbih0eXBlLCBpZCkgewogICAgdmFyIHVybCA9IFtdLAogICAg
        ICAgIGhvc3QgPSBnZXQodGhpcywgJ2hvc3QnKSwKICAgICAgICBwcmVmaXgg
        PSB0aGlzLnVybFByZWZpeCgpOwoKICAgIGlmICh0eXBlKSB7IHVybC5wdXNo
        KHRoaXMucGF0aEZvclR5cGUodHlwZSkpOyB9CiAgICBpZiAoaWQpIHsgdXJs
        LnB1c2goaWQpOyB9CgogICAgaWYgKHByZWZpeCkgeyB1cmwudW5zaGlmdChw
        cmVmaXgpOyB9CgogICAgdXJsID0gdXJsLmpvaW4oJy8nKTsKICAgIGlmICgh
        aG9zdCAmJiB1cmwpIHsgdXJsID0gJy8nICsgdXJsOyB9CgogICAgcmV0dXJu
        IHVybDsKICB9LAoKICAvKioKICAgIEBtZXRob2QgdXJsUHJlZml4CiAgICBA
        cHJpdmF0ZQogICAgQHBhcmFtIHtTdHJpbmd9IHBhdGgKICAgIEBwYXJhbSB7
        U3RyaW5nfSBwYXJlbnRVcmwKICAgIEByZXR1cm4ge1N0cmluZ30gdXJsUHJl
        Zml4CiAgKi8KICB1cmxQcmVmaXg6IGZ1bmN0aW9uKHBhdGgsIHBhcmVudFVS
        TCkgewogICAgdmFyIGhvc3QgPSBnZXQodGhpcywgJ2hvc3QnKSwKICAgICAg
        ICBuYW1lc3BhY2UgPSBnZXQodGhpcywgJ25hbWVzcGFjZScpLAogICAgICAg
        IHVybCA9IFtdOwoKICAgIGlmIChwYXRoKSB7CiAgICAgIC8vIEFic29sdXRl
        IHBhdGgKICAgICAgaWYgKHBhdGguY2hhckF0KDApID09PSAnLycpIHsKICAg
        ICAgICBpZiAoaG9zdCkgewogICAgICAgICAgcGF0aCA9IHBhdGguc2xpY2Uo
        MSk7CiAgICAgICAgICB1cmwucHVzaChob3N0KTsKICAgICAgICB9CiAgICAg
        IC8vIFJlbGF0aXZlIHBhdGgKICAgICAgfSBlbHNlIGlmICghL15odHRwKHMp
        PzpcL1wvLy50ZXN0KHBhdGgpKSB7CiAgICAgICAgdXJsLnB1c2gocGFyZW50
        VVJMKTsKICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgaWYgKGhvc3QpIHsg
        dXJsLnB1c2goaG9zdCk7IH0KICAgICAgaWYgKG5hbWVzcGFjZSkgeyB1cmwu
        cHVzaChuYW1lc3BhY2UpOyB9CiAgICB9CgogICAgaWYgKHBhdGgpIHsKICAg
        ICAgdXJsLnB1c2gocGF0aCk7CiAgICB9CgogICAgcmV0dXJuIHVybC5qb2lu
        KCcvJyk7CiAgfSwKCiAgLyoqCiAgICBEZXRlcm1pbmVzIHRoZSBwYXRobmFt
        ZSBmb3IgYSBnaXZlbiB0eXBlLgoKICAgIEJ5IGRlZmF1bHQsIGl0IHBsdXJh
        bGl6ZXMgdGhlIHR5cGUncyBuYW1lIChmb3IgZXhhbXBsZSwKICAgICdwb3N0
        JyBiZWNvbWVzICdwb3N0cycgYW5kICdwZXJzb24nIGJlY29tZXMgJ3Blb3Bs
        ZScpLgoKICAgICMjIyBQYXRobmFtZSBjdXN0b21pemF0aW9uCgogICAgRm9y
        IGV4YW1wbGUgaWYgeW91IGhhdmUgYW4gb2JqZWN0IExpbmVJdGVtIHdpdGgg
        YW4KICAgIGVuZHBvaW50IG9mICIvbGluZV9pdGVtcy8iLgoKICAgIGBgYGpz
        CiAgICBEUy5SRVNUQWRhcHRlci5yZW9wZW4oewogICAgICBwYXRoRm9yVHlw
        ZTogZnVuY3Rpb24odHlwZSkgewogICAgICAgIHZhciBkZWNhbWVsaXplZCA9
        IEVtYmVyLlN0cmluZy5kZWNhbWVsaXplKHR5cGUpOwogICAgICAgIHJldHVy
        biBFbWJlci5TdHJpbmcucGx1cmFsaXplKGRlY2FtZWxpemVkKTsKICAgICAg
        fTsKICAgIH0pOwogICAgYGBgCgogICAgQG1ldGhvZCBwYXRoRm9yVHlwZQog
        ICAgQHBhcmFtIHtTdHJpbmd9IHR5cGUKICAgIEByZXR1cm5zIHtTdHJpbmd9
        IHBhdGgKICAqKi8KICBwYXRoRm9yVHlwZTogZnVuY3Rpb24odHlwZSkgewog
        ICAgdmFyIGNhbWVsaXplZCA9IEVtYmVyLlN0cmluZy5jYW1lbGl6ZSh0eXBl
        KTsKICAgIHJldHVybiBFbWJlci5TdHJpbmcucGx1cmFsaXplKGNhbWVsaXpl
        ZCk7CiAgfSwKCiAgLyoqCiAgICBUYWtlcyBhbiBhamF4IHJlc3BvbnNlLCBh
        bmQgcmV0dXJucyBhIHJlbGV2YW50IGVycm9yLgoKICAgIFJldHVybmluZyBh
        IGBEUy5JbnZhbGlkRXJyb3JgIGZyb20gdGhpcyBtZXRob2Qgd2lsbCBjYXVz
        ZSB0aGUKICAgIHJlY29yZCB0byB0cmFuc2l0aW9uIGludG8gdGhlIGBpbnZh
        bGlkYCBzdGF0ZSBhbmQgbWFrZSB0aGUKICAgIGBlcnJvcnNgIG9iamVjdCBh
        dmFpbGFibGUgb24gdGhlIHJlY29yZC4KCiAgICBgYGBqYXZhc2NyaXB0CiAg
        ICBBcHAuQXBwbGljYXRpb25BZGFwdGVyID0gRFMuUkVTVEFkYXB0ZXIuZXh0
        ZW5kKHsKICAgICAgYWpheEVycm9yOiBmdW5jdGlvbihqcVhIUikgewogICAg
        ICAgIHZhciBlcnJvciA9IHRoaXMuX3N1cGVyKGpxWEhSKTsKCiAgICAgICAg
        aWYgKGpxWEhSICYmIGpxWEhSLnN0YXR1cyA9PT0gNDIyKSB7CiAgICAgICAg
        ICB2YXIganNvbkVycm9ycyA9IEVtYmVyLiQucGFyc2VKU09OKGpxWEhSLnJl
        c3BvbnNlVGV4dClbImVycm9ycyJdOwoKICAgICAgICAgIHJldHVybiBuZXcg
        RFMuSW52YWxpZEVycm9yKGpzb25FcnJvcnMpOwogICAgICAgIH0gZWxzZSB7
        CiAgICAgICAgICByZXR1cm4gZXJyb3I7CiAgICAgICAgfQogICAgICB9CiAg
        ICB9KTsKICAgIGBgYAoKICAgIE5vdGU6IEFzIGEgY29ycmVjdG5lc3Mgb3B0
        aW1pemF0aW9uLCB0aGUgZGVmYXVsdCBpbXBsZW1lbnRhdGlvbiBvZgogICAg
        dGhlIGBhamF4RXJyb3JgIG1ldGhvZCBzdHJpcHMgb3V0IHRoZSBgdGhlbmAg
        bWV0aG9kIGZyb20ganF1ZXJ5J3MKICAgIGFqYXggcmVzcG9uc2UgKGpxWEhS
        KS4gVGhpcyBpcyBpbXBvcnRhbnQgYmVjYXVzZSB0aGUganFYSFIncwogICAg
        YHRoZW5gIG1ldGhvZCBmdWxmaWxscyB0aGUgcHJvbWlzZSB3aXRoIGl0c2Vs
        ZiByZXN1bHRpbmcgaW4gYQogICAgY2lyY3VsYXIgInRoZW5hYmxlIiBjaGFp
        biB3aGljaCBtYXkgY2F1c2UgcHJvYmxlbXMgZm9yIHNvbWUKICAgIHByb21p
        c2UgbGlicmFyaWVzLgoKICAgIEBtZXRob2QgYWpheEVycm9yCiAgICBAcGFy
        YW0gIHtPYmplY3R9IGpxWEhSCiAgICBAcmV0dXJuIHtPYmplY3R9IGpxWEhS
        CiAgKi8KICBhamF4RXJyb3I6IGZ1bmN0aW9uKGpxWEhSKSB7CiAgICBpZiAo
        anFYSFIpIHsKICAgICAganFYSFIudGhlbiA9IG51bGw7CiAgICB9CgogICAg
        cmV0dXJuIGpxWEhSOwogIH0sCgogIC8qKgogICAgVGFrZXMgYSBVUkwsIGFu
        IEhUVFAgbWV0aG9kIGFuZCBhIGhhc2ggb2YgZGF0YSwgYW5kIG1ha2VzIGFu
        CiAgICBIVFRQIHJlcXVlc3QuCgogICAgV2hlbiB0aGUgc2VydmVyIHJlc3Bv
        bmRzIHdpdGggYSBwYXlsb2FkLCBFbWJlciBEYXRhIHdpbGwgY2FsbCBpbnRv
        IGBleHRyYWN0U2luZ2xlYAogICAgb3IgYGV4dHJhY3RBcnJheWAgKGRlcGVu
        ZGluZyBvbiB3aGV0aGVyIHRoZSBvcmlnaW5hbCBxdWVyeSB3YXMgZm9yIG9u
        ZSByZWNvcmQgb3IKICAgIG1hbnkgcmVjb3JkcykuCgogICAgQnkgZGVmYXVs
        dCwgYGFqYXhgIG1ldGhvZCBoYXMgdGhlIGZvbGxvd2luZyBiZWhhdmlvcjoK
        CiAgICAqIEl0IHNldHMgdGhlIHJlc3BvbnNlIGBkYXRhVHlwZWAgdG8gYCJq
        c29uImAKICAgICogSWYgdGhlIEhUVFAgbWV0aG9kIGlzIG5vdCBgIkdFVCJg
        LCBpdCBzZXRzIHRoZSBgQ29udGVudC1UeXBlYCB0byBiZQogICAgICBgYXBw
        bGljYXRpb24vanNvbjsgY2hhcnNldD11dGYtOGAKICAgICogSWYgdGhlIEhU
        VFAgbWV0aG9kIGlzIG5vdCBgIkdFVCJgLCBpdCBzdHJpbmdpZmllcyB0aGUg
        ZGF0YSBwYXNzZWQgaW4uIFRoZQogICAgICBkYXRhIGlzIHRoZSBzZXJpYWxp
        emVkIHJlY29yZCBpbiB0aGUgY2FzZSBvZiBhIHNhdmUuCiAgICAqIFJlZ2lz
        dGVycyBzdWNjZXNzIGFuZCBmYWlsdXJlIGhhbmRsZXJzLgoKICAgIEBtZXRo
        b2QgYWpheAogICAgQHByaXZhdGUKICAgIEBwYXJhbSB7U3RyaW5nfSB1cmwK
        ICAgIEBwYXJhbSB7U3RyaW5nfSB0eXBlIFRoZSByZXF1ZXN0IHR5cGUgR0VU
        LCBQT1NULCBQVVQsIERFTEVURSBldGMuCiAgICBAcGFyYW0ge09iamVjdH0g
        aGFzaAogICAgQHJldHVybiB7UHJvbWlzZX0gcHJvbWlzZQogICovCiAgYWph
        eDogZnVuY3Rpb24odXJsLCB0eXBlLCBoYXNoKSB7CiAgICB2YXIgYWRhcHRl
        ciA9IHRoaXM7CgogICAgcmV0dXJuIG5ldyBFbWJlci5SU1ZQLlByb21pc2Uo
        ZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgIGhhc2ggPSBhZGFw
        dGVyLmFqYXhPcHRpb25zKHVybCwgdHlwZSwgaGFzaCk7CgogICAgICBoYXNo
        LnN1Y2Nlc3MgPSBmdW5jdGlvbihqc29uKSB7CiAgICAgICAgRW1iZXIucnVu
        KG51bGwsIHJlc29sdmUsIGpzb24pOwogICAgICB9OwoKICAgICAgaGFzaC5l
        cnJvciA9IGZ1bmN0aW9uKGpxWEhSLCB0ZXh0U3RhdHVzLCBlcnJvclRocm93
        bikgewogICAgICAgIEVtYmVyLnJ1bihudWxsLCByZWplY3QsIGFkYXB0ZXIu
        YWpheEVycm9yKGpxWEhSKSk7CiAgICAgIH07CgogICAgICBFbWJlci4kLmFq
        YXgoaGFzaCk7CiAgICB9LCAiRFM6IFJlc3RBZGFwdGVyI2FqYXggIiArIHR5
        cGUgKyAiIHRvICIgKyB1cmwpOwogIH0sCgogIC8qKgogICAgQG1ldGhvZCBh
        amF4T3B0aW9ucwogICAgQHByaXZhdGUKICAgIEBwYXJhbSB7U3RyaW5nfSB1
        cmwKICAgIEBwYXJhbSB7U3RyaW5nfSB0eXBlIFRoZSByZXF1ZXN0IHR5cGUg
        R0VULCBQT1NULCBQVVQsIERFTEVURSBldGMuCiAgICBAcGFyYW0ge09iamVj
        dH0gaGFzaAogICAgQHJldHVybiB7T2JqZWN0fSBoYXNoCiAgKi8KICBhamF4
        T3B0aW9uczogZnVuY3Rpb24odXJsLCB0eXBlLCBoYXNoKSB7CiAgICBoYXNo
        ID0gaGFzaCB8fCB7fTsKICAgIGhhc2gudXJsID0gdXJsOwogICAgaGFzaC50
        eXBlID0gdHlwZTsKICAgIGhhc2guZGF0YVR5cGUgPSAnanNvbic7CiAgICBo
        YXNoLmNvbnRleHQgPSB0aGlzOwoKICAgIGlmIChoYXNoLmRhdGEgJiYgdHlw
        ZSAhPT0gJ0dFVCcpIHsKICAgICAgaGFzaC5jb250ZW50VHlwZSA9ICdhcHBs
        aWNhdGlvbi9qc29uOyBjaGFyc2V0PXV0Zi04JzsKICAgICAgaGFzaC5kYXRh
        ID0gSlNPTi5zdHJpbmdpZnkoaGFzaC5kYXRhKTsKICAgIH0KCiAgICBpZiAo
        dGhpcy5oZWFkZXJzICE9PSB1bmRlZmluZWQpIHsKICAgICAgdmFyIGhlYWRl
        cnMgPSB0aGlzLmhlYWRlcnM7CiAgICAgIGhhc2guYmVmb3JlU2VuZCA9IGZ1
        bmN0aW9uICh4aHIpIHsKICAgICAgICBmb3JFYWNoLmNhbGwoRW1iZXIua2V5
        cyhoZWFkZXJzKSwgZnVuY3Rpb24oa2V5KSB7CiAgICAgICAgICB4aHIuc2V0
        UmVxdWVzdEhlYWRlcihrZXksIGhlYWRlcnNba2V5XSk7CiAgICAgICAgfSk7
        CiAgICAgIH07CiAgICB9CgoKICAgIHJldHVybiBoYXNoOwogIH0KCn0pOwoK
        fSkoKTsKCgoKKGZ1bmN0aW9uKCkgewovKioKICBAbW9kdWxlIGVtYmVyLWRh
        dGEKKi8KCn0pKCk7CgoKCihmdW5jdGlvbigpIHsKRFMuTW9kZWwucmVvcGVu
        KHsKCiAgLyoqCiAgICBQcm92aWRlcyBpbmZvIGFib3V0IHRoZSBtb2RlbCBm
        b3IgZGVidWdnaW5nIHB1cnBvc2VzCiAgICBieSBncm91cGluZyB0aGUgcHJv
        cGVydGllcyBpbnRvIG1vcmUgc2VtYW50aWMgZ3JvdXBzLgoKICAgIE1lYW50
        IHRvIGJlIHVzZWQgYnkgZGVidWdnaW5nIHRvb2xzIHN1Y2ggYXMgdGhlIENo
        cm9tZSBFbWJlciBFeHRlbnNpb24uCgogICAgLSBHcm91cHMgYWxsIGF0dHJp
        YnV0ZXMgaW4gIkF0dHJpYnV0ZXMiIGdyb3VwLgogICAgLSBHcm91cHMgYWxs
        IGJlbG9uZ3NUbyByZWxhdGlvbnNoaXBzIGluICJCZWxvbmdzIFRvIiBncm91
        cC4KICAgIC0gR3JvdXBzIGFsbCBoYXNNYW55IHJlbGF0aW9uc2hpcHMgaW4g
        IkhhcyBNYW55IiBncm91cC4KICAgIC0gR3JvdXBzIGFsbCBmbGFncyBpbiAi
        RmxhZ3MiIGdyb3VwLgogICAgLSBGbGFncyByZWxhdGlvbnNoaXAgQ1BzIGFz
        IGV4cGVuc2l2ZSBwcm9wZXJ0aWVzLgoKICAgIEBtZXRob2QgX2RlYnVnSW5m
        bwogICAgQGZvciBEUy5Nb2RlbAogICAgQHByaXZhdGUKICAqLwogIF9kZWJ1
        Z0luZm86IGZ1bmN0aW9uKCkgewogICAgdmFyIGF0dHJpYnV0ZXMgPSBbJ2lk
        J10sCiAgICAgICAgcmVsYXRpb25zaGlwcyA9IHsgYmVsb25nc1RvOiBbXSwg
        aGFzTWFueTogW10gfSwKICAgICAgICBleHBlbnNpdmVQcm9wZXJ0aWVzID0g
        W107CgogICAgdGhpcy5lYWNoQXR0cmlidXRlKGZ1bmN0aW9uKG5hbWUsIG1l
        dGEpIHsKICAgICAgYXR0cmlidXRlcy5wdXNoKG5hbWUpOwogICAgfSwgdGhp
        cyk7CgogICAgdGhpcy5lYWNoUmVsYXRpb25zaGlwKGZ1bmN0aW9uKG5hbWUs
        IHJlbGF0aW9uc2hpcCkgewogICAgICByZWxhdGlvbnNoaXBzW3JlbGF0aW9u
        c2hpcC5raW5kXS5wdXNoKG5hbWUpOwogICAgICBleHBlbnNpdmVQcm9wZXJ0
        aWVzLnB1c2gobmFtZSk7CiAgICB9KTsKCiAgICB2YXIgZ3JvdXBzID0gWwog
        ICAgICB7CiAgICAgICAgbmFtZTogJ0F0dHJpYnV0ZXMnLAogICAgICAgIHBy
        b3BlcnRpZXM6IGF0dHJpYnV0ZXMsCiAgICAgICAgZXhwYW5kOiB0cnVlCiAg
        ICAgIH0sCiAgICAgIHsKICAgICAgICBuYW1lOiAnQmVsb25ncyBUbycsCiAg
        ICAgICAgcHJvcGVydGllczogcmVsYXRpb25zaGlwcy5iZWxvbmdzVG8sCiAg
        ICAgICAgZXhwYW5kOiB0cnVlCiAgICAgIH0sCiAgICAgIHsKICAgICAgICBu
        YW1lOiAnSGFzIE1hbnknLAogICAgICAgIHByb3BlcnRpZXM6IHJlbGF0aW9u
        c2hpcHMuaGFzTWFueSwKICAgICAgICBleHBhbmQ6IHRydWUKICAgICAgfSwK
        ICAgICAgewogICAgICAgIG5hbWU6ICdGbGFncycsCiAgICAgICAgcHJvcGVy
        dGllczogWydpc0xvYWRlZCcsICdpc0RpcnR5JywgJ2lzU2F2aW5nJywgJ2lz
        RGVsZXRlZCcsICdpc0Vycm9yJywgJ2lzTmV3JywgJ2lzVmFsaWQnXQogICAg
        ICB9CiAgICBdOwoKICAgIHJldHVybiB7CiAgICAgIHByb3BlcnR5SW5mbzog
        ewogICAgICAgIC8vIGluY2x1ZGUgYWxsIG90aGVyIG1peGlucyAvIHByb3Bl
        cnRpZXMgKG5vdCBqdXN0IHRoZSBncm91cGVkIG9uZXMpCiAgICAgICAgaW5j
        bHVkZU90aGVyUHJvcGVydGllczogdHJ1ZSwKICAgICAgICBncm91cHM6IGdy
        b3VwcywKICAgICAgICAvLyBkb24ndCBwcmUtY2FsY3VsYXRlIHVubGVzcyBj
        YWNoZWQKICAgICAgICBleHBlbnNpdmVQcm9wZXJ0aWVzOiBleHBlbnNpdmVQ
        cm9wZXJ0aWVzCiAgICAgIH0KICAgIH07CiAgfQoKfSk7Cgp9KSgpOwoKCgoo
        ZnVuY3Rpb24oKSB7Ci8qKgogIEBtb2R1bGUgZW1iZXItZGF0YQoqLwoKfSko
        KTsKCgoKKGZ1bmN0aW9uKCkgewovKioKICBFbWJlciBEYXRhCgogIEBtb2R1
        bGUgZW1iZXItZGF0YQogIEBtYWluIGVtYmVyLWRhdGEKKi8KCn0pKCk7Cgoo
        ZnVuY3Rpb24oKSB7CkVtYmVyLlN0cmluZy5wbHVyYWxpemUgPSBmdW5jdGlv
        bih3b3JkKSB7CiAgcmV0dXJuIEVtYmVyLkluZmxlY3Rvci5pbmZsZWN0b3Iu
        cGx1cmFsaXplKHdvcmQpOwp9OwoKRW1iZXIuU3RyaW5nLnNpbmd1bGFyaXpl
        ID0gZnVuY3Rpb24od29yZCkgewogIHJldHVybiBFbWJlci5JbmZsZWN0b3Iu
        aW5mbGVjdG9yLnNpbmd1bGFyaXplKHdvcmQpOwp9OwoKfSkoKTsKCgoKKGZ1
        bmN0aW9uKCkgewp2YXIgQkxBTktfUkVHRVggPSAvXlxzKiQvOwoKZnVuY3Rp
        b24gbG9hZFVuY291bnRhYmxlKHJ1bGVzLCB1bmNvdW50YWJsZSkgewogIGZv
        ciAodmFyIGkgPSAwLCBsZW5ndGggPSB1bmNvdW50YWJsZS5sZW5ndGg7IGkg
        PCBsZW5ndGg7IGkrKykgewogICAgcnVsZXMudW5jb3VudGFibGVbdW5jb3Vu
        dGFibGVbaV0udG9Mb3dlckNhc2UoKV0gPSB0cnVlOwogIH0KfQoKZnVuY3Rp
        b24gbG9hZElycmVndWxhcihydWxlcywgaXJyZWd1bGFyUGFpcnMpIHsKICB2
        YXIgcGFpcjsKCiAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aCA9IGlycmVndWxh
        clBhaXJzLmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7CiAgICBwYWlyID0g
        aXJyZWd1bGFyUGFpcnNbaV07CgogICAgcnVsZXMuaXJyZWd1bGFyW3BhaXJb
        MF0udG9Mb3dlckNhc2UoKV0gPSBwYWlyWzFdOwogICAgcnVsZXMuaXJyZWd1
        bGFySW52ZXJzZVtwYWlyWzFdLnRvTG93ZXJDYXNlKCldID0gcGFpclswXTsK
        ICB9Cn0KCi8qKgogIEluZmxlY3Rvci5FbWJlciBwcm92aWRlcyBhIG1lY2hh
        bmlzbSBmb3Igc3VwcGx5aW5nIGluZmxlY3Rpb24gcnVsZXMgZm9yIHlvdXIK
        ICBhcHBsaWNhdGlvbi4gRW1iZXIgaW5jbHVkZXMgYSBkZWZhdWx0IHNldCBv
        ZiBpbmZsZWN0aW9uIHJ1bGVzLCBhbmQgcHJvdmlkZXMgYW4KICBBUEkgZm9y
        IHByb3ZpZGluZyBhZGRpdGlvbmFsIHJ1bGVzLgoKICBFeGFtcGxlczoKCiAg
        Q3JlYXRpbmcgYW4gaW5mbGVjdG9yIHdpdGggbm8gcnVsZXMuCgogIGBgYGpz
        CiAgdmFyIGluZmxlY3RvciA9IG5ldyBFbWJlci5JbmZsZWN0b3IoKTsKICBg
        YGAKCiAgQ3JlYXRpbmcgYW4gaW5mbGVjdG9yIHdpdGggdGhlIGRlZmF1bHQg
        ZW1iZXIgcnVsZXNldC4KCiAgYGBganMKICB2YXIgaW5mbGVjdG9yID0gbmV3
        IEVtYmVyLkluZmxlY3RvcihFbWJlci5JbmZsZWN0b3IuZGVmYXVsdFJ1bGVz
        KTsKCiAgaW5mbGVjdG9yLnBsdXJhbGl6ZSgnY293JykgLy89PiAna2luZScK
        ICBpbmZsZWN0b3Iuc2luZ3VsYXJpemUoJ2tpbmUnKSAvLz0+ICdjb3cnCiAg
        YGBgCgogIENyZWF0aW5nIGFuIGluZmxlY3RvciBhbmQgYWRkaW5nIHJ1bGVz
        IGxhdGVyLgoKICBgYGBqYXZhc2NyaXB0CiAgdmFyIGluZmxlY3RvciA9IEVt
        YmVyLkluZmxlY3Rvci5pbmZsZWN0b3I7CgogIGluZmxlY3Rvci5wbHVyYWxp
        emUoJ2FkdmljZScpIC8vID0+ICdhZHZpY2VzJwogIGluZmxlY3Rvci51bmNv
        dW50YWJsZSgnYWR2aWNlJyk7CiAgaW5mbGVjdG9yLnBsdXJhbGl6ZSgnYWR2
        aWNlJykgLy8gPT4gJ2FkdmljZScKCiAgaW5mbGVjdG9yLnBsdXJhbGl6ZSgn
        Zm9ybXVsYScpIC8vID0+ICdmb3JtdWxhcycKICBpbmZsZWN0b3IuaXJyZWd1
        bGFyKCdmb3JtdWxhJywgJ2Zvcm11bGFlJyk7CiAgaW5mbGVjdG9yLnBsdXJh
        bGl6ZSgnZm9ybXVsYScpIC8vID0+ICdmb3JtdWxhZScKCiAgLy8geW91IHdv
        dWxkIG5vdCBuZWVkIHRvIGFkZCB0aGVzZSBhcyB0aGV5IGFyZSB0aGUgZGVm
        YXVsdCBydWxlcwogIGluZmxlY3Rvci5wbHVyYWwoLyQvLCAncycpOwogIGlu
        ZmxlY3Rvci5zaW5ndWxhcigvcyQvaSwgJycpOwogIGBgYAoKICBDcmVhdGlu
        ZyBhbiBpbmZsZWN0b3Igd2l0aCBhIG5vbmRlZmF1bHQgcnVsZXNldC4KCiAg
        YGBgamF2YXNjcmlwdAogIHZhciBydWxlcyA9IHsKICAgIHBsdXJhbHM6ICBb
        IC8kLywgJ3MnIF0sCiAgICBzaW5ndWxhcjogWyAvXHMkLywgJycgXSwKICAg
        IGlycmVndWxhclBhaXJzOiBbCiAgICAgIFsgJ2NvdycsICdraW5lJyBdCiAg
        ICBdLAogICAgdW5jb3VudGFibGU6IFsgJ2Zpc2gnIF0KICB9OwoKICB2YXIg
        aW5mbGVjdG9yID0gbmV3IEVtYmVyLkluZmxlY3RvcihydWxlcyk7CiAgYGBg
        CgogIEBjbGFzcyBJbmZsZWN0b3IKICBAbmFtZXNwYWNlIEVtYmVyCiovCmZ1
        bmN0aW9uIEluZmxlY3RvcihydWxlU2V0KSB7CiAgcnVsZVNldCA9IHJ1bGVT
        ZXQgfHwge307CiAgcnVsZVNldC51bmNvdW50YWJsZSA9IHJ1bGVTZXQudW5j
        b3VudGFibGUgfHwge307CiAgcnVsZVNldC5pcnJlZ3VsYXJQYWlycyA9IHJ1
        bGVTZXQuaXJyZWd1bGFyUGFpcnMgfHwge307CgogIHZhciBydWxlcyA9IHRo
        aXMucnVsZXMgPSB7CiAgICBwbHVyYWxzOiAgcnVsZVNldC5wbHVyYWxzIHx8
        IFtdLAogICAgc2luZ3VsYXI6IHJ1bGVTZXQuc2luZ3VsYXIgfHwgW10sCiAg
        ICBpcnJlZ3VsYXI6IHt9LAogICAgaXJyZWd1bGFySW52ZXJzZToge30sCiAg
        ICB1bmNvdW50YWJsZToge30KICB9OwoKICBsb2FkVW5jb3VudGFibGUocnVs
        ZXMsIHJ1bGVTZXQudW5jb3VudGFibGUpOwogIGxvYWRJcnJlZ3VsYXIocnVs
        ZXMsIHJ1bGVTZXQuaXJyZWd1bGFyUGFpcnMpOwp9CgpJbmZsZWN0b3IucHJv
        dG90eXBlID0gewogIC8qKgogICAgQG1ldGhvZCBwbHVyYWwKICAgIEBwYXJh
        bSB7UmVnRXhwfSByZWdleAogICAgQHBhcmFtIHtTdHJpbmd9IHN0cmluZwog
        ICovCiAgcGx1cmFsOiBmdW5jdGlvbihyZWdleCwgc3RyaW5nKSB7CiAgICB0
        aGlzLnJ1bGVzLnBsdXJhbHMucHVzaChbcmVnZXgsIHN0cmluZy50b0xvd2Vy
        Q2FzZSgpXSk7CiAgfSwKCiAgLyoqCiAgICBAbWV0aG9kIHNpbmd1bGFyCiAg
        ICBAcGFyYW0ge1JlZ0V4cH0gcmVnZXgKICAgIEBwYXJhbSB7U3RyaW5nfSBz
        dHJpbmcKICAqLwogIHNpbmd1bGFyOiBmdW5jdGlvbihyZWdleCwgc3RyaW5n
        KSB7CiAgICB0aGlzLnJ1bGVzLnNpbmd1bGFyLnB1c2goW3JlZ2V4LCBzdHJp
        bmcudG9Mb3dlckNhc2UoKV0pOwogIH0sCgogIC8qKgogICAgQG1ldGhvZCB1
        bmNvdW50YWJsZQogICAgQHBhcmFtIHtTdHJpbmd9IHJlZ2V4CiAgKi8KICB1
        bmNvdW50YWJsZTogZnVuY3Rpb24oc3RyaW5nKSB7CiAgICBsb2FkVW5jb3Vu
        dGFibGUodGhpcy5ydWxlcywgW3N0cmluZy50b0xvd2VyQ2FzZSgpXSk7CiAg
        fSwKCiAgLyoqCiAgICBAbWV0aG9kIGlycmVndWxhcgogICAgQHBhcmFtIHtT
        dHJpbmd9IHNpbmd1bGFyCiAgICBAcGFyYW0ge1N0cmluZ30gcGx1cmFsCiAg
        Ki8KICBpcnJlZ3VsYXI6IGZ1bmN0aW9uIChzaW5ndWxhciwgcGx1cmFsKSB7
        CiAgICBsb2FkSXJyZWd1bGFyKHRoaXMucnVsZXMsIFtbc2luZ3VsYXIsIHBs
        dXJhbF1dKTsKICB9LAoKICAvKioKICAgIEBtZXRob2QgcGx1cmFsaXplCiAg
        ICBAcGFyYW0ge1N0cmluZ30gd29yZAogICovCiAgcGx1cmFsaXplOiBmdW5j
        dGlvbih3b3JkKSB7CiAgICByZXR1cm4gdGhpcy5pbmZsZWN0KHdvcmQsIHRo
        aXMucnVsZXMucGx1cmFscywgdGhpcy5ydWxlcy5pcnJlZ3VsYXIpOwogIH0s
        CgogIC8qKgogICAgQG1ldGhvZCBzaW5ndWxhcml6ZQogICAgQHBhcmFtIHtT
        dHJpbmd9IHdvcmQKICAqLwogIHNpbmd1bGFyaXplOiBmdW5jdGlvbih3b3Jk
        KSB7CiAgICByZXR1cm4gdGhpcy5pbmZsZWN0KHdvcmQsIHRoaXMucnVsZXMu
        c2luZ3VsYXIsICB0aGlzLnJ1bGVzLmlycmVndWxhckludmVyc2UpOwogIH0s
        CgogIC8qKgogICAgQHByb3RlY3RlZAoKICAgIEBtZXRob2QgaW5mbGVjdAog
        ICAgQHBhcmFtIHtTdHJpbmd9IHdvcmQKICAgIEBwYXJhbSB7T2JqZWN0fSB0
        eXBlUnVsZXMKICAgIEBwYXJhbSB7T2JqZWN0fSBpcnJlZ3VsYXIKICAqLwog
        IGluZmxlY3Q6IGZ1bmN0aW9uKHdvcmQsIHR5cGVSdWxlcywgaXJyZWd1bGFy
        KSB7CiAgICB2YXIgaW5mbGVjdGlvbiwgc3Vic3RpdHV0aW9uLCByZXN1bHQs
        IGxvd2VyY2FzZSwgaXNCbGFuaywKICAgIGlzVW5jb3VudGFibGUsIGlzSXJy
        ZWd1bGFyLCBpc0lycmVndWxhckludmVyc2UsIHJ1bGU7CgogICAgaXNCbGFu
        ayA9IEJMQU5LX1JFR0VYLnRlc3Qod29yZCk7CgogICAgaWYgKGlzQmxhbmsp
        IHsKICAgICAgcmV0dXJuIHdvcmQ7CiAgICB9CgogICAgbG93ZXJjYXNlID0g
        d29yZC50b0xvd2VyQ2FzZSgpOwoKICAgIGlzVW5jb3VudGFibGUgPSB0aGlz
        LnJ1bGVzLnVuY291bnRhYmxlW2xvd2VyY2FzZV07CgogICAgaWYgKGlzVW5j
        b3VudGFibGUpIHsKICAgICAgcmV0dXJuIHdvcmQ7CiAgICB9CgogICAgaXNJ
        cnJlZ3VsYXIgPSBpcnJlZ3VsYXIgJiYgaXJyZWd1bGFyW2xvd2VyY2FzZV07
        CgogICAgaWYgKGlzSXJyZWd1bGFyKSB7CiAgICAgIHJldHVybiBpc0lycmVn
        dWxhcjsKICAgIH0KCiAgICBmb3IgKHZhciBpID0gdHlwZVJ1bGVzLmxlbmd0
        aCwgbWluID0gMDsgaSA+IG1pbjsgaS0tKSB7CiAgICAgICBpbmZsZWN0aW9u
        ID0gdHlwZVJ1bGVzW2ktMV07CiAgICAgICBydWxlID0gaW5mbGVjdGlvblsw
        XTsKCiAgICAgIGlmIChydWxlLnRlc3Qod29yZCkpIHsKICAgICAgICBicmVh
        azsKICAgICAgfQogICAgfQoKICAgIGluZmxlY3Rpb24gPSBpbmZsZWN0aW9u
        IHx8IFtdOwoKICAgIHJ1bGUgPSBpbmZsZWN0aW9uWzBdOwogICAgc3Vic3Rp
        dHV0aW9uID0gaW5mbGVjdGlvblsxXTsKCiAgICByZXN1bHQgPSB3b3JkLnJl
        cGxhY2UocnVsZSwgc3Vic3RpdHV0aW9uKTsKCiAgICByZXR1cm4gcmVzdWx0
        OwogIH0KfTsKCkVtYmVyLkluZmxlY3RvciA9IEluZmxlY3RvcjsKCn0pKCk7
        CgoKCihmdW5jdGlvbigpIHsKRW1iZXIuSW5mbGVjdG9yLmRlZmF1bHRSdWxl
        cyA9IHsKICBwbHVyYWxzOiBbCiAgICBbLyQvLCAncyddLAogICAgWy9zJC9p
        LCAncyddLAogICAgWy9eKGF4fHRlc3QpaXMkL2ksICckMWVzJ10sCiAgICBb
        LyhvY3RvcHx2aXIpdXMkL2ksICckMWknXSwKICAgIFsvKG9jdG9wfHZpcilp
        JC9pLCAnJDFpJ10sCiAgICBbLyhhbGlhc3xzdGF0dXMpJC9pLCAnJDFlcydd
        LAogICAgWy8oYnUpcyQvaSwgJyQxc2VzJ10sCiAgICBbLyhidWZmYWx8dG9t
        YXQpbyQvaSwgJyQxb2VzJ10sCiAgICBbLyhbdGldKXVtJC9pLCAnJDFhJ10s
        CiAgICBbLyhbdGldKWEkL2ksICckMWEnXSwKICAgIFsvc2lzJC9pLCAnc2Vz
        J10sCiAgICBbLyg/OihbXmZdKWZlfChbbHJdKWYpJC9pLCAnJDEkMnZlcydd
        LAogICAgWy8oaGl2ZSkkL2ksICckMXMnXSwKICAgIFsvKFteYWVpb3V5XXxx
        dSl5JC9pLCAnJDFpZXMnXSwKICAgIFsvKHh8Y2h8c3N8c2gpJC9pLCAnJDFl
        cyddLAogICAgWy8obWF0cnx2ZXJ0fGluZCkoPzppeHxleCkkL2ksICckMWlj
        ZXMnXSwKICAgIFsvXihtfGwpb3VzZSQvaSwgJyQxaWNlJ10sCiAgICBbL14o
        bXxsKWljZSQvaSwgJyQxaWNlJ10sCiAgICBbL14ob3gpJC9pLCAnJDFlbidd
        LAogICAgWy9eKG94ZW4pJC9pLCAnJDEnXSwKICAgIFsvKHF1aXopJC9pLCAn
        JDF6ZXMnXQogIF0sCgogIHNpbmd1bGFyOiBbCiAgICBbL3MkL2ksICcnXSwK
        ICAgIFsvKHNzKSQvaSwgJyQxJ10sCiAgICBbLyhuKWV3cyQvaSwgJyQxZXdz
        J10sCiAgICBbLyhbdGldKWEkL2ksICckMXVtJ10sCiAgICBbLygoYSluYWx5
        fChiKWF8KGQpaWFnbm98KHApYXJlbnRoZXwocClyb2dub3wocyl5bm9wfCh0
        KWhlKShzaXN8c2VzKSQvaSwgJyQxc2lzJ10sCiAgICBbLyheYW5hbHkpKHNp
        c3xzZXMpJC9pLCAnJDFzaXMnXSwKICAgIFsvKFteZl0pdmVzJC9pLCAnJDFm
        ZSddLAogICAgWy8oaGl2ZSlzJC9pLCAnJDEnXSwKICAgIFsvKHRpdmUpcyQv
        aSwgJyQxJ10sCiAgICBbLyhbbHJdKXZlcyQvaSwgJyQxZiddLAogICAgWy8o
        W15hZWlvdXldfHF1KWllcyQvaSwgJyQxeSddLAogICAgWy8ocyllcmllcyQv
        aSwgJyQxZXJpZXMnXSwKICAgIFsvKG0pb3ZpZXMkL2ksICckMW92aWUnXSwK
        ICAgIFsvKHh8Y2h8c3N8c2gpZXMkL2ksICckMSddLAogICAgWy9eKG18bClp
        Y2UkL2ksICckMW91c2UnXSwKICAgIFsvKGJ1cykoZXMpPyQvaSwgJyQxJ10s
        CiAgICBbLyhvKWVzJC9pLCAnJDEnXSwKICAgIFsvKHNob2UpcyQvaSwgJyQx
        J10sCiAgICBbLyhjcmlzfHRlc3QpKGlzfGVzKSQvaSwgJyQxaXMnXSwKICAg
        IFsvXihhKXhbaWVdcyQvaSwgJyQxeGlzJ10sCiAgICBbLyhvY3RvcHx2aXIp
        KHVzfGkpJC9pLCAnJDF1cyddLAogICAgWy8oYWxpYXN8c3RhdHVzKShlcyk/
        JC9pLCAnJDEnXSwKICAgIFsvXihveCllbi9pLCAnJDEnXSwKICAgIFsvKHZl
        cnR8aW5kKWljZXMkL2ksICckMWV4J10sCiAgICBbLyhtYXRyKWljZXMkL2ks
        ICckMWl4J10sCiAgICBbLyhxdWl6KXplcyQvaSwgJyQxJ10sCiAgICBbLyhk
        YXRhYmFzZSlzJC9pLCAnJDEnXQogIF0sCgogIGlycmVndWxhclBhaXJzOiBb
        CiAgICBbJ3BlcnNvbicsICdwZW9wbGUnXSwKICAgIFsnbWFuJywgJ21lbidd
        LAogICAgWydjaGlsZCcsICdjaGlsZHJlbiddLAogICAgWydzZXgnLCAnc2V4
        ZXMnXSwKICAgIFsnbW92ZScsICdtb3ZlcyddLAogICAgWydjb3cnLCAna2lu
        ZSddLAogICAgWyd6b21iaWUnLCAnem9tYmllcyddCiAgXSwKCiAgdW5jb3Vu
        dGFibGU6IFsKICAgICdlcXVpcG1lbnQnLAogICAgJ2luZm9ybWF0aW9uJywK
        ICAgICdyaWNlJywKICAgICdtb25leScsCiAgICAnc3BlY2llcycsCiAgICAn
        c2VyaWVzJywKICAgICdmaXNoJywKICAgICdzaGVlcCcsCiAgICAnamVhbnMn
        LAogICAgJ3BvbGljZScKICBdCn07Cgp9KSgpOwoKCgooZnVuY3Rpb24oKSB7
        CmlmIChFbWJlci5FWFRFTkRfUFJPVE9UWVBFUyA9PT0gdHJ1ZSB8fCBFbWJl
        ci5FWFRFTkRfUFJPVE9UWVBFUy5TdHJpbmcpIHsKICAvKioKICAgIFNlZSB7
        eyNjcm9zc0xpbmsgIkVtYmVyLlN0cmluZy9wbHVyYWxpemUifX17ey9jcm9z
        c0xpbmt9fQoKICAgIEBtZXRob2QgcGx1cmFsaXplCiAgICBAZm9yIFN0cmlu
        ZwogICovCiAgU3RyaW5nLnByb3RvdHlwZS5wbHVyYWxpemUgPSBmdW5jdGlv
        bigpIHsKICAgIHJldHVybiBFbWJlci5TdHJpbmcucGx1cmFsaXplKHRoaXMp
        OwogIH07CgogIC8qKgogICAgU2VlIHt7I2Nyb3NzTGluayAiRW1iZXIuU3Ry
        aW5nL3Npbmd1bGFyaXplIn19e3svY3Jvc3NMaW5rfX0KCiAgICBAbWV0aG9k
        IHNpbmd1bGFyaXplCiAgICBAZm9yIFN0cmluZwogICovCiAgU3RyaW5nLnBy
        b3RvdHlwZS5zaW5ndWxhcml6ZSA9IGZ1bmN0aW9uKCkgewogICAgcmV0dXJu
        IEVtYmVyLlN0cmluZy5zaW5ndWxhcml6ZSh0aGlzKTsKICB9Owp9Cgp9KSgp
        OwoKCgooZnVuY3Rpb24oKSB7CkVtYmVyLkluZmxlY3Rvci5pbmZsZWN0b3Ig
        PSBuZXcgRW1iZXIuSW5mbGVjdG9yKEVtYmVyLkluZmxlY3Rvci5kZWZhdWx0
        UnVsZXMpOw0KCn0pKCk7CgoKCihmdW5jdGlvbigpIHsKCn0pKCk7CgooZnVu
        Y3Rpb24oKSB7Ci8qKgogIEBtb2R1bGUgZW1iZXItZGF0YQoqLwoKdmFyIGdl
        dCA9IEVtYmVyLmdldCwKICAgIGZvckVhY2ggPSBFbWJlci5FbnVtZXJhYmxl
        VXRpbHMuZm9yRWFjaCwKICAgIGNhbWVsaXplID0gICBFbWJlci5TdHJpbmcu
        Y2FtZWxpemUsCiAgICBjYXBpdGFsaXplID0gRW1iZXIuU3RyaW5nLmNhcGl0
        YWxpemUsCiAgICBkZWNhbWVsaXplID0gRW1iZXIuU3RyaW5nLmRlY2FtZWxp
        emUsCiAgICBzaW5ndWxhcml6ZSA9IEVtYmVyLlN0cmluZy5zaW5ndWxhcml6
        ZSwKICAgIHVuZGVyc2NvcmUgPSBFbWJlci5TdHJpbmcudW5kZXJzY29yZTsK
        CkRTLkFjdGl2ZU1vZGVsU2VyaWFsaXplciA9IERTLlJFU1RTZXJpYWxpemVy
        LmV4dGVuZCh7CiAgLy8gU0VSSUFMSVpFCgogIC8qKgogICAgQ29udmVydHMg
        Y2FtZWxjYXNlZCBhdHRyaWJ1dGVzIHRvIHVuZGVyc2NvcmVkIHdoZW4gc2Vy
        aWFsaXppbmcuCgogICAgQG1ldGhvZCBrZXlGb3JBdHRyaWJ1dGUKICAgIEBw
        YXJhbSB7U3RyaW5nfSBhdHRyaWJ1dGUKICAgIEByZXR1cm5zIFN0cmluZwog
        ICovCiAga2V5Rm9yQXR0cmlidXRlOiBmdW5jdGlvbihhdHRyKSB7CiAgICBy
        ZXR1cm4gZGVjYW1lbGl6ZShhdHRyKTsKICB9LAoKICAvKioKICAgIFVuZGVy
        c2NvcmVzIHJlbGF0aW9uc2hpcCBuYW1lcyBhbmQgYXBwZW5kcyAiX2lkIiBv
        ciAiX2lkcyIgd2hlbiBzZXJpYWxpemluZwogICAgcmVsYXRpb25zaGlwIGtl
        eXMuCgogICAgQG1ldGhvZCBrZXlGb3JSZWxhdGlvbnNoaXAKICAgIEBwYXJh
        bSB7U3RyaW5nfSBrZXkKICAgIEBwYXJhbSB7U3RyaW5nfSBraW5kCiAgICBA
        cmV0dXJucyBTdHJpbmcKICAqLwogIGtleUZvclJlbGF0aW9uc2hpcDogZnVu
        Y3Rpb24oa2V5LCBraW5kKSB7CiAgICBrZXkgPSBkZWNhbWVsaXplKGtleSk7
        CiAgICBpZiAoa2luZCA9PT0gImJlbG9uZ3NUbyIpIHsKICAgICAgcmV0dXJu
        IGtleSArICJfaWQiOwogICAgfSBlbHNlIGlmIChraW5kID09PSAiaGFzTWFu
        eSIpIHsKICAgICAgcmV0dXJuIHNpbmd1bGFyaXplKGtleSkgKyAiX2lkcyI7
        CiAgICB9IGVsc2UgewogICAgICByZXR1cm4ga2V5OwogICAgfQogIH0sCgog
        IC8qKgogICAgRG9lcyBub3Qgc2VyaWFsaXplIGhhc01hbnkgcmVsYXRpb25z
        aGlwcyBieSBkZWZhdWx0LgogICovCiAgc2VyaWFsaXplSGFzTWFueTogRW1i
        ZXIuSywKCiAgLyoqCiAgICBVbmRlcnNjb3JlcyB0aGUgSlNPTiByb290IGtl
        eXMgd2hlbiBzZXJpYWxpemluZy4KCiAgICBAbWV0aG9kIHNlcmlhbGl6ZUlu
        dG9IYXNoCiAgICBAcGFyYW0ge09iamVjdH0gaGFzaAogICAgQHBhcmFtIHtz
        dWJjbGFzcyBvZiBEUy5Nb2RlbH0gdHlwZQogICAgQHBhcmFtIHtEUy5Nb2Rl
        bH0gcmVjb3JkCiAgICBAcGFyYW0ge09iamVjdH0gb3B0aW9ucwogICovCiAg
        c2VyaWFsaXplSW50b0hhc2g6IGZ1bmN0aW9uKGRhdGEsIHR5cGUsIHJlY29y
        ZCwgb3B0aW9ucykgewogICAgdmFyIHJvb3QgPSB1bmRlcnNjb3JlKGRlY2Ft
        ZWxpemUodHlwZS50eXBlS2V5KSk7CiAgICBkYXRhW3Jvb3RdID0gdGhpcy5z
        ZXJpYWxpemUocmVjb3JkLCBvcHRpb25zKTsKICB9LAoKICAvKioKICAgIFNl
        cmlhbGl6ZXMgYSBwb2x5bW9ycGhpYyB0eXBlIGFzIGEgZnVsbHkgY2FwaXRh
        bGl6ZWQgbW9kZWwgbmFtZS4KCiAgICBAbWV0aG9kIHNlcmlhbGl6ZVBvbHlt
        b3JwaGljVHlwZQogICAgQHBhcmFtIHtEUy5Nb2RlbH0gcmVjb3JkCiAgICBA
        cGFyYW0ge09iamVjdH0ganNvbgogICAgQHBhcmFtIHJlbGF0aW9uc2hpcAog
        ICovCiAgc2VyaWFsaXplUG9seW1vcnBoaWNUeXBlOiBmdW5jdGlvbihyZWNv
        cmQsIGpzb24sIHJlbGF0aW9uc2hpcCkgewogICAgdmFyIGtleSA9IHJlbGF0
        aW9uc2hpcC5rZXksCiAgICAgICAgYmVsb25nc1RvID0gZ2V0KHJlY29yZCwg
        a2V5KTsKICAgIGtleSA9IHRoaXMua2V5Rm9yQXR0cmlidXRlKGtleSk7CiAg
        ICBqc29uW2tleSArICJfdHlwZSJdID0gY2FwaXRhbGl6ZShjYW1lbGl6ZShi
        ZWxvbmdzVG8uY29uc3RydWN0b3IudHlwZUtleSkpOwogIH0sCgogIC8vIEVY
        VFJBQ1QKCiAgLyoqCiAgICBFeHRyYWN0cyB0aGUgbW9kZWwgdHlwZUtleSBm
        cm9tIHVuZGVyc2NvcmVkIHJvb3Qgb2JqZWN0cy4KCiAgICBAbWV0aG9kIHR5
        cGVGb3JSb290CiAgICBAcGFyYW0ge1N0cmluZ30gcm9vdAogICAgQHJldHVy
        bnMgU3RyaW5nIHRoZSBtb2RlbCdzIHR5cGVLZXkKICAqLwogIHR5cGVGb3JS
        b290OiBmdW5jdGlvbihyb290KSB7CiAgICB2YXIgY2FtZWxpemVkID0gY2Ft
        ZWxpemUocm9vdCk7CiAgICByZXR1cm4gc2luZ3VsYXJpemUoY2FtZWxpemVk
        KTsKICB9LAoKICAvKioKICAgIEFkZCBleHRyYSBzdGVwIHRvIGBEUy5SRVNU
        U2VyaWFsaXplci5ub3JtYWxpemVgIHNvIGxpbmtzIGFyZQogICAgbm9ybWFs
        aXplZC4KCiAgICBJZiB5b3VyIHBheWxvYWQgbG9va3MgbGlrZSB0aGlzCgog
        ICAgYGBganMKICAgIHsKICAgICAgInBvc3QiOiB7CiAgICAgICAgImlkIjog
        MSwKICAgICAgICAidGl0bGUiOiAiUmFpbHMgaXMgb21ha2FzZSIsCiAgICAg
        ICAgImxpbmtzIjogeyAiZmxhZ2dlZF9jb21tZW50cyI6ICJhcGkvY29tbWVu
        dHMvZmxhZ2dlZCIgfQogICAgICB9CiAgICB9CiAgICBgYGAKICAgIFRoZSBu
        b3JtYWxpemVkIHZlcnNpb24gd291bGQgbG9vayBsaWtlIHRoaXMKCiAgICBg
        YGBqcwogICAgewogICAgICAicG9zdCI6IHsKICAgICAgICAiaWQiOiAxLAog
        ICAgICAgICJ0aXRsZSI6ICJSYWlscyBpcyBvbWFrYXNlIiwKICAgICAgICAi
        bGlua3MiOiB7ICJmbGFnZ2VkQ29tbWVudHMiOiAiYXBpL2NvbW1lbnRzL2Zs
        YWdnZWQiIH0KICAgICAgfQogICAgfQogICAgYGBgCgogICAgQG1ldGhvZCBu
        b3JtYWxpemUKICAgIEBwYXJhbSB7c3ViY2xhc3Mgb2YgRFMuTW9kZWx9IHR5
        cGUKICAgIEBwYXJhbSB7T2JqZWN0fSBoYXNoCiAgICBAcGFyYW0ge1N0cmlu
        Z30gcHJvcAogICAgQHJldHVybnMgT2JqZWN0CiAgKi8KCiAgbm9ybWFsaXpl
        OiBmdW5jdGlvbih0eXBlLCBoYXNoLCBwcm9wKSB7CiAgICB0aGlzLm5vcm1h
        bGl6ZUxpbmtzKGhhc2gpOwoKICAgIHJldHVybiB0aGlzLl9zdXBlcih0eXBl
        LCBoYXNoLCBwcm9wKTsKICB9LAoKICAvKioKICAgIENvbnZlcnQgYHNuYWtl
        X2Nhc2VkYCBsaW5rcyAgdG8gYGNhbWVsQ2FzZWAKCiAgICBAbWV0aG9kIG5v
        cm1hbGl6ZUxpbmtzCiAgICBAcGFyYW0ge09iamVjdH0gaGFzaAogICovCgog
        IG5vcm1hbGl6ZUxpbmtzOiBmdW5jdGlvbihkYXRhKXsKICAgIGlmIChkYXRh
        LmxpbmtzKSB7CiAgICAgIHZhciBsaW5rcyA9IGRhdGEubGlua3M7CgogICAg
        ICBmb3IgKHZhciBsaW5rIGluIGxpbmtzKSB7CiAgICAgICAgdmFyIGNhbWVs
        aXplZExpbmsgPSBjYW1lbGl6ZShsaW5rKTsKCiAgICAgICAgaWYgKGNhbWVs
        aXplZExpbmsgIT09IGxpbmspIHsKICAgICAgICAgIGxpbmtzW2NhbWVsaXpl
        ZExpbmtdID0gbGlua3NbbGlua107CiAgICAgICAgICBkZWxldGUgbGlua3Nb
        bGlua107CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfSwKCiAgLyoqCiAg
        ICBOb3JtYWxpemUgdGhlIHBvbHltb3JwaGljIHR5cGUgZnJvbSB0aGUgSlNP
        Ti4KCiAgICBOb3JtYWxpemU6CiAgICBgYGBqcwogICAgICB7CiAgICAgICAg
        aWQ6ICIxIgogICAgICAgIG1pbmlvbjogeyB0eXBlOiAiZXZpbF9taW5pb24i
        LCBpZDogIjEyIn0KICAgICAgfQogICAgYGBgCgogICAgVG86CiAgICBgYGBq
        cwogICAgICB7CiAgICAgICAgaWQ6ICIxIgogICAgICAgIG1pbmlvbjogeyB0
        eXBlOiAiZXZpbE1pbmlvbiIsIGlkOiAiMTIifQogICAgICB9CiAgICBgYGAK
        CiAgICBAbWV0aG9kIG5vcm1hbGl6ZVJlbGF0aW9uc2hpcHMKICAgIEBwcml2
        YXRlCiAgKi8KICBub3JtYWxpemVSZWxhdGlvbnNoaXBzOiBmdW5jdGlvbih0
        eXBlLCBoYXNoKSB7CiAgICB2YXIgcGF5bG9hZEtleSwgcGF5bG9hZDsKCiAg
        ICBpZiAodGhpcy5rZXlGb3JSZWxhdGlvbnNoaXApIHsKICAgICAgdHlwZS5l
        YWNoUmVsYXRpb25zaGlwKGZ1bmN0aW9uKGtleSwgcmVsYXRpb25zaGlwKSB7
        CiAgICAgICAgaWYgKHJlbGF0aW9uc2hpcC5vcHRpb25zLnBvbHltb3JwaGlj
        KSB7CiAgICAgICAgICBwYXlsb2FkS2V5ID0gdGhpcy5rZXlGb3JBdHRyaWJ1
        dGUoa2V5KTsKICAgICAgICAgIHBheWxvYWQgPSBoYXNoW3BheWxvYWRLZXld
        OwogICAgICAgICAgaWYgKHBheWxvYWQgJiYgcGF5bG9hZC50eXBlKSB7CiAg
        ICAgICAgICAgIHBheWxvYWQudHlwZSA9IHRoaXMudHlwZUZvclJvb3QocGF5
        bG9hZC50eXBlKTsKICAgICAgICAgIH0gZWxzZSBpZiAocGF5bG9hZCAmJiBy
        ZWxhdGlvbnNoaXAua2luZCA9PT0gImhhc01hbnkiKSB7CiAgICAgICAgICAg
        IHZhciBzZWxmID0gdGhpczsKICAgICAgICAgICAgZm9yRWFjaChwYXlsb2Fk
        LCBmdW5jdGlvbihzaW5nbGUpIHsKICAgICAgICAgICAgICBzaW5nbGUudHlw
        ZSA9IHNlbGYudHlwZUZvclJvb3Qoc2luZ2xlLnR5cGUpOwogICAgICAgICAg
        ICB9KTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAg
        cGF5bG9hZEtleSA9IHRoaXMua2V5Rm9yUmVsYXRpb25zaGlwKGtleSwgcmVs
        YXRpb25zaGlwLmtpbmQpOwogICAgICAgICAgcGF5bG9hZCA9IGhhc2hbcGF5
        bG9hZEtleV07CiAgICAgICAgfQoKICAgICAgICBoYXNoW2tleV0gPSBwYXls
        b2FkOwoKICAgICAgICBpZiAoa2V5ICE9PSBwYXlsb2FkS2V5KSB7CiAgICAg
        ICAgICBkZWxldGUgaGFzaFtwYXlsb2FkS2V5XTsKICAgICAgICB9CiAgICAg
        IH0sIHRoaXMpOwogICAgfQogIH0KfSk7Cgp9KSgpOwoKCgooZnVuY3Rpb24o
        KSB7CnZhciBnZXQgPSBFbWJlci5nZXQ7CnZhciBmb3JFYWNoID0gRW1iZXIu
        RW51bWVyYWJsZVV0aWxzLmZvckVhY2g7CgovKioKICBUaGUgRW1iZWRkZWRS
        ZWNvcmRzTWl4aW4gYWxsb3dzIHlvdSB0byBhZGQgZW1iZWRkZWQgcmVjb3Jk
        IHN1cHBvcnQgdG8geW91cgogIHNlcmlhbGl6ZXJzLgogIFRvIHNldCB1cCBl
        bWJlZGRlZCByZWNvcmRzLCB5b3UgaW5jbHVkZSB0aGUgbWl4aW4gaW50byB0
        aGUgc2VyaWFsaXplciBhbmQgdGhlbgogIGRlZmluZSB5b3VyIGVtYmVkZGVk
        IHJlbGF0aW9ucy4KCiAgYGBganMKICBBcHAuUG9zdFNlcmlhbGl6ZXIgPSBE
        Uy5BY3RpdmVNb2RlbFNlcmlhbGl6ZXIuZXh0ZW5kKERTLkVtYmVkZGVkUmVj
        b3Jkc01peGluLCB7CiAgICBhdHRyczogewogICAgICBjb21tZW50czoge2Vt
        YmVkZGVkOiAnYWx3YXlzJ30KICAgIH0KICB9KQogIGBgYAoKICBDdXJyZW50
        bHkgb25seSBge2VtYmVkZGVkOiAnYWx3YXlzJ31gIHJlY29yZHMgYXJlIHN1
        cHBvcnRlZC4KCiAgQGNsYXNzIEVtYmVkZGVkUmVjb3Jkc01peGluCiAgQG5h
        bWVzcGFjZSBEUwoqLwpEUy5FbWJlZGRlZFJlY29yZHNNaXhpbiA9IEVtYmVy
        Lk1peGluLmNyZWF0ZSh7CgogIC8qKgogICAgU2VyaWFsaXplIGhhcy1tYXkg
        cmVsYXRpb25zaGlwIHdoZW4gaXQgaXMgY29uZmlndXJlZCBhcyBlbWJlZGRl
        ZCBvYmplY3RzLgoKICAgIEBtZXRob2Qgc2VyaWFsaXplSGFzTWFueQogICov
        CiAgc2VyaWFsaXplSGFzTWFueTogZnVuY3Rpb24ocmVjb3JkLCBqc29uLCBy
        ZWxhdGlvbnNoaXApIHsKICAgIHZhciBrZXkgICA9IHJlbGF0aW9uc2hpcC5r
        ZXksCiAgICAgICAgYXR0cnMgPSBnZXQodGhpcywgJ2F0dHJzJyksCiAgICAg
        ICAgZW1iZWQgPSBhdHRycyAmJiBhdHRyc1trZXldICYmIGF0dHJzW2tleV0u
        ZW1iZWRkZWQgPT09ICdhbHdheXMnOwoKICAgIGlmIChlbWJlZCkgewogICAg
        ICBqc29uW3RoaXMua2V5Rm9yQXR0cmlidXRlKGtleSldID0gZ2V0KHJlY29y
        ZCwga2V5KS5tYXAoZnVuY3Rpb24ocmVsYXRpb24pIHsKICAgICAgICB2YXIg
        ZGF0YSA9IHJlbGF0aW9uLnNlcmlhbGl6ZSgpLAogICAgICAgICAgICBwcmlt
        YXJ5S2V5ID0gZ2V0KHRoaXMsICdwcmltYXJ5S2V5Jyk7CgogICAgICAgIGRh
        dGFbcHJpbWFyeUtleV0gPSBnZXQocmVsYXRpb24sIHByaW1hcnlLZXkpOwoK
        ICAgICAgICByZXR1cm4gZGF0YTsKICAgICAgfSwgdGhpcyk7CiAgICB9CiAg
        fSwKCiAgLyoqCiAgICBFeHRyYWN0IGVtYmVkZGVkIG9iamVjdHMgb3V0IG9m
        IHRoZSBwYXlsb2FkIGZvciBhIHNpbmdsZSBvYmplY3QKICAgIGFuZCBhZGQg
        dGhlbSBhcyBzaWRlbG9hZGVkIG9iamVjdHMgaW5zdGVhZC4KCiAgICBAbWV0
        aG9kIGV4dHJhY3RTaW5nbGUKICAqLwogIGV4dHJhY3RTaW5nbGU6IGZ1bmN0
        aW9uKHN0b3JlLCBwcmltYXJ5VHlwZSwgcGF5bG9hZCwgcmVjb3JkSWQsIHJl
        cXVlc3RUeXBlKSB7CiAgICB2YXIgcm9vdCA9IHRoaXMua2V5Rm9yQXR0cmli
        dXRlKHByaW1hcnlUeXBlLnR5cGVLZXkpLAogICAgICAgIHBhcnRpYWwgPSBw
        YXlsb2FkW3Jvb3RdOwoKICAgIHVwZGF0ZVBheWxvYWRXaXRoRW1iZWRkZWQo
        c3RvcmUsIHRoaXMsIHByaW1hcnlUeXBlLCBwYXJ0aWFsLCBwYXlsb2FkKTsK
        CiAgICByZXR1cm4gdGhpcy5fc3VwZXIoc3RvcmUsIHByaW1hcnlUeXBlLCBw
        YXlsb2FkLCByZWNvcmRJZCwgcmVxdWVzdFR5cGUpOwogIH0sCgogIC8qKgog
        ICAgRXh0cmFjdCBlbWJlZGRlZCBvYmplY3RzIG91dCBvZiBhIHN0YW5kYXJk
        IHBheWxvYWQKICAgIGFuZCBhZGQgdGhlbSBhcyBzaWRlbG9hZGVkIG9iamVj
        dHMgaW5zdGVhZC4KCiAgICBAbWV0aG9kIGV4dHJhY3RBcnJheQogICovCiAg
        ZXh0cmFjdEFycmF5OiBmdW5jdGlvbihzdG9yZSwgdHlwZSwgcGF5bG9hZCkg
        ewogICAgdmFyIHJvb3QgPSB0aGlzLmtleUZvckF0dHJpYnV0ZSh0eXBlLnR5
        cGVLZXkpLAogICAgICAgIHBhcnRpYWxzID0gcGF5bG9hZFtFbWJlci5TdHJp
        bmcucGx1cmFsaXplKHJvb3QpXTsKCiAgICBmb3JFYWNoKHBhcnRpYWxzLCBm
        dW5jdGlvbihwYXJ0aWFsKSB7CiAgICAgIHVwZGF0ZVBheWxvYWRXaXRoRW1i
        ZWRkZWQoc3RvcmUsIHRoaXMsIHR5cGUsIHBhcnRpYWwsIHBheWxvYWQpOwog
        ICAgfSwgdGhpcyk7CgogICAgcmV0dXJuIHRoaXMuX3N1cGVyKHN0b3JlLCB0
        eXBlLCBwYXlsb2FkKTsKICB9Cn0pOwoKZnVuY3Rpb24gdXBkYXRlUGF5bG9h
        ZFdpdGhFbWJlZGRlZChzdG9yZSwgc2VyaWFsaXplciwgdHlwZSwgcGFydGlh
        bCwgcGF5bG9hZCkgewogIHZhciBhdHRycyA9IGdldChzZXJpYWxpemVyLCAn
        YXR0cnMnKTsKCiAgaWYgKCFhdHRycykgewogICAgcmV0dXJuOwogIH0KCiAg
        dHlwZS5lYWNoUmVsYXRpb25zaGlwKGZ1bmN0aW9uKGtleSwgcmVsYXRpb25z
        aGlwKSB7CiAgICB2YXIgZXhwYW5kZWRLZXksIGVtYmVkZGVkVHlwZUtleSwg
        YXR0cmlidXRlLCBpZHMsCiAgICAgICAgY29uZmlnID0gYXR0cnNba2V5XSwK
        ICAgICAgICBzZXJpYWxpemVyID0gc3RvcmUuc2VyaWFsaXplckZvcihyZWxh
        dGlvbnNoaXAudHlwZS50eXBlS2V5KSwKICAgICAgICBwcmltYXJ5S2V5ID0g
        Z2V0KHNlcmlhbGl6ZXIsICJwcmltYXJ5S2V5Iik7CgogICAgaWYgKHJlbGF0
        aW9uc2hpcC5raW5kICE9PSAiaGFzTWFueSIpIHsKICAgICAgcmV0dXJuOwog
        ICAgfQoKICAgIGlmIChjb25maWcgJiYgKGNvbmZpZy5lbWJlZGRlZCA9PT0g
        J2Fsd2F5cycgfHwgY29uZmlnLmVtYmVkZGVkID09PSAnbG9hZCcpKSB7CiAg
        ICAgIC8vIHVuZGVyc2NvcmUgZm9yY2VzIHRoZSBlbWJlZGRlZCByZWNvcmRz
        IHRvIGJlIHNpZGUgbG9hZGVkLgogICAgICAvLyBpdCBpcyBuZWVkZWQgd2hl
        biBtYWluIHR5cGUgPT09IHJlbGF0aW9uc2hpcC50eXBlCiAgICAgIGVtYmVk
        ZGVkVHlwZUtleSA9ICdfJyArIEVtYmVyLlN0cmluZy5wbHVyYWxpemUocmVs
        YXRpb25zaGlwLnR5cGUudHlwZUtleSk7CiAgICAgIGV4cGFuZGVkS2V5ID0g
        dGhpcy5rZXlGb3JSZWxhdGlvbnNoaXAoa2V5LCByZWxhdGlvbnNoaXAua2lu
        ZCk7CiAgICAgIGF0dHJpYnV0ZSAgPSB0aGlzLmtleUZvckF0dHJpYnV0ZShr
        ZXkpOwogICAgICBpZHMgPSBbXTsKCiAgICAgIGlmICghcGFydGlhbFthdHRy
        aWJ1dGVdKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBwYXls
        b2FkW2VtYmVkZGVkVHlwZUtleV0gPSBwYXlsb2FkW2VtYmVkZGVkVHlwZUtl
        eV0gfHwgW107CgogICAgICBmb3JFYWNoKHBhcnRpYWxbYXR0cmlidXRlXSwg
        ZnVuY3Rpb24oZGF0YSkgewogICAgICAgIHZhciBlbWJlZGRlZFR5cGUgPSBz
        dG9yZS5tb2RlbEZvcihyZWxhdGlvbnNoaXAudHlwZS50eXBlS2V5KTsKICAg
        ICAgICB1cGRhdGVQYXlsb2FkV2l0aEVtYmVkZGVkKHN0b3JlLCBzZXJpYWxp
        emVyLCBlbWJlZGRlZFR5cGUsIGRhdGEsIHBheWxvYWQpOwogICAgICAgIGlk
        cy5wdXNoKGRhdGFbcHJpbWFyeUtleV0pOwogICAgICAgIHBheWxvYWRbZW1i
        ZWRkZWRUeXBlS2V5XS5wdXNoKGRhdGEpOwogICAgICB9KTsKCiAgICAgIHBh
        cnRpYWxbZXhwYW5kZWRLZXldID0gaWRzOwogICAgICBkZWxldGUgcGFydGlh
        bFthdHRyaWJ1dGVdOwogICAgfQogIH0sIHNlcmlhbGl6ZXIpOwp9Cn0pKCk7
        CgoKCihmdW5jdGlvbigpIHsKLyoqCiAgQG1vZHVsZSBlbWJlci1kYXRhCiov
        Cgp2YXIgZm9yRWFjaCA9IEVtYmVyLkVudW1lcmFibGVVdGlscy5mb3JFYWNo
        Owp2YXIgZGVjYW1lbGl6ZSA9IEVtYmVyLlN0cmluZy5kZWNhbWVsaXplLAog
        ICAgdW5kZXJzY29yZSA9IEVtYmVyLlN0cmluZy51bmRlcnNjb3JlLAogICAg
        cGx1cmFsaXplICA9IEVtYmVyLlN0cmluZy5wbHVyYWxpemU7CgovKioKICBU
        aGUgQWN0aXZlTW9kZWxBZGFwdGVyIGlzIGEgc3ViY2xhc3Mgb2YgdGhlIFJF
        U1RBZGFwdGVyIGRlc2lnbmVkIHRvIGludGVncmF0ZQogIHdpdGggYSBKU09O
        IEFQSSB0aGF0IHVzZXMgYW4gdW5kZXJzY29yZWQgbmFtaW5nIGNvbnZlbnRp
        b24gaW5zdGVhZCBvZiBjYW1lbGNhc2luZy4KICBJdCBoYXMgYmVlbiBkZXNp
        Z25lZCB0byB3b3JrIG91dCBvZiB0aGUgYm94IHdpdGggdGhlCiAgW2FjdGl2
        ZV9tb2RlbF9zZXJpYWxpemVyc10oaHR0cDovL2dpdGh1Yi5jb20vcmFpbHMt
        YXBpL2FjdGl2ZV9tb2RlbF9zZXJpYWxpemVycykKICBSdWJ5IGdlbS4KCiAg
        VGhpcyBhZGFwdGVyIGV4dGVuZHMgdGhlIERTLlJFU1RBZGFwdGVyIGJ5IG1h
        a2luZyBjb25zaXN0ZW50IHVzZSBvZiB0aGUgY2FtZWxpemF0aW9uLAogIGRl
        Y2FtZWxpemF0aW9uIGFuZCBwbHVyYWxpemF0aW9uIG1ldGhvZHMgdG8gbm9y
        bWFsaXplIHRoZSBzZXJpYWxpemVkIEpTT04gaW50byBhCiAgZm9ybWF0IHRo
        YXQgaXMgY29tcGF0aWJsZSB3aXRoIGEgY29udmVudGlvbmFsIFJhaWxzIGJh
        Y2tlbmQgYW5kIEVtYmVyIERhdGEuCgogICMjIEpTT04gU3RydWN0dXJlCgog
        IFRoZSBBY3RpdmVNb2RlbEFkYXB0ZXIgZXhwZWN0cyB0aGUgSlNPTiByZXR1
        cm5lZCBmcm9tIHlvdXIgc2VydmVyIHRvIGZvbGxvdwogIHRoZSBSRVNUIGFk
        YXB0ZXIgY29udmVudGlvbnMgc3Vic3RpdHV0aW5nIHVuZGVyc2NvcmVkIGtl
        eXMgZm9yIGNhbWVsY2FzZWQgb25lcy4KCiAgIyMjIENvbnZlbnRpb25hbCBO
        YW1lcwoKICBBdHRyaWJ1dGUgbmFtZXMgaW4geW91ciBKU09OIHBheWxvYWQg
        c2hvdWxkIGJlIHRoZSB1bmRlcnNjb3JlZCB2ZXJzaW9ucyBvZgogIHRoZSBh
        dHRyaWJ1dGVzIGluIHlvdXIgRW1iZXIuanMgbW9kZWxzLgoKICBGb3IgZXhh
        bXBsZSwgaWYgeW91IGhhdmUgYSBgUGVyc29uYCBtb2RlbDoKCiAgYGBganMK
        ICBBcHAuRmFtb3VzUGVyc29uID0gRFMuTW9kZWwuZXh0ZW5kKHsKICAgIGZp
        cnN0TmFtZTogRFMuYXR0cignc3RyaW5nJyksCiAgICBsYXN0TmFtZTogRFMu
        YXR0cignc3RyaW5nJyksCiAgICBvY2N1cGF0aW9uOiBEUy5hdHRyKCdzdHJp
        bmcnKQogIH0pOwogIGBgYAoKICBUaGUgSlNPTiByZXR1cm5lZCBzaG91bGQg
        bG9vayBsaWtlIHRoaXM6CgogIGBgYGpzCiAgewogICAgImZhbW91c19wZXJz
        b24iOiB7CiAgICAgICJmaXJzdF9uYW1lIjogIkJhcmFjayIsCiAgICAgICJs
        YXN0X25hbWUiOiAiT2JhbWEiLAogICAgICAib2NjdXBhdGlvbiI6ICJQcmVz
        aWRlbnQiCiAgICB9CiAgfQogIGBgYAoKICBAY2xhc3MgQWN0aXZlTW9kZWxB
        ZGFwdGVyCiAgQGNvbnN0cnVjdG9yCiAgQG5hbWVzcGFjZSBEUwogIEBleHRl
        bmRzIERTLkFkYXB0ZXIKKiovCgpEUy5BY3RpdmVNb2RlbEFkYXB0ZXIgPSBE
        Uy5SRVNUQWRhcHRlci5leHRlbmQoewogIGRlZmF1bHRTZXJpYWxpemVyOiAn
        LWFjdGl2ZS1tb2RlbCcsCiAgLyoqCiAgICBUaGUgQWN0aXZlTW9kZWxBZGFw
        dGVyIG92ZXJyaWRlcyB0aGUgYHBhdGhGb3JUeXBlYCBtZXRob2QgdG8gYnVp
        bGQKICAgIHVuZGVyc2NvcmVkIFVSTHMgYnkgZGVjYW1lbGl6aW5nIGFuZCBw
        bHVyYWxpemluZyB0aGUgb2JqZWN0IHR5cGUgbmFtZS4KCiAgICBgYGBqcwog
        ICAgICB0aGlzLnBhdGhGb3JUeXBlKCJmYW1vdXNQZXJzb24iKTsKICAgICAg
        Ly89PiAiZmFtb3VzX3Blb3BsZSIKICAgIGBgYAoKICAgIEBtZXRob2QgcGF0
        aEZvclR5cGUKICAgIEBwYXJhbSB7U3RyaW5nfSB0eXBlCiAgICBAcmV0dXJu
        cyBTdHJpbmcKICAqLwogIHBhdGhGb3JUeXBlOiBmdW5jdGlvbih0eXBlKSB7
        CiAgICB2YXIgZGVjYW1lbGl6ZWQgPSBkZWNhbWVsaXplKHR5cGUpOwogICAg
        dmFyIHVuZGVyc2NvcmVkID0gdW5kZXJzY29yZShkZWNhbWVsaXplZCk7CiAg
        ICByZXR1cm4gcGx1cmFsaXplKHVuZGVyc2NvcmVkKTsKICB9LAoKICAvKioK
        ICAgIFRoZSBBY3RpdmVNb2RlbEFkYXB0ZXIgb3ZlcnJpZGVzIHRoZSBgYWph
        eEVycm9yYCBtZXRob2QKICAgIHRvIHJldHVybiBhIERTLkludmFsaWRFcnJv
        ciBmb3IgYWxsIDQyMiBVbnByb2Nlc3NhYmxlIEVudGl0eQogICAgcmVzcG9u
        c2VzLgoKICAgIEEgNDIyIEhUVFAgcmVzcG9uc2UgZnJvbSB0aGUgc2VydmVy
        IGdlbmVyYWxseSBpbXBsaWVzIHRoYXQgdGhlIHJlcXVlc3QKICAgIHdhcyB3
        ZWxsIGZvcm1lZCBidXQgdGhlIEFQSSB3YXMgdW5hYmxlIHRvIHByb2Nlc3Mg
        aXQgYmVjYXVzZSB0aGUKICAgIGNvbnRlbnQgd2FzIG5vdCBzZW1hbnRpY2Fs
        bHkgY29ycmVjdCBvciBtZWFuaW5nZnVsIHBlciB0aGUgQVBJLgoKICAgIEZv
        ciBtb3JlIGluZm9ybWF0aW9uIG9uIDQyMiBIVFRQIEVycm9yIGNvZGUgc2Vl
        IDExLjIgV2ViREFWIFJGQyA0OTE4CiAgICBodHRwczovL3Rvb2xzLmlldGYu
        b3JnL2h0bWwvcmZjNDkxOCNzZWN0aW9uLTExLjIKCiAgICBAbWV0aG9kIGFq
        YXhFcnJvcgogICAgQHBhcmFtIGpxWEhSCiAgICBAcmV0dXJucyBlcnJvcgog
        ICovCiAgYWpheEVycm9yOiBmdW5jdGlvbihqcVhIUikgewogICAgdmFyIGVy
        cm9yID0gdGhpcy5fc3VwZXIoanFYSFIpOwoKICAgIGlmIChqcVhIUiAmJiBq
        cVhIUi5zdGF0dXMgPT09IDQyMikgewogICAgICB2YXIgcmVzcG9uc2UgPSBF
        bWJlci4kLnBhcnNlSlNPTihqcVhIUi5yZXNwb25zZVRleHQpLAogICAgICAg
        ICAgZXJyb3JzID0ge307CgogICAgICBpZiAocmVzcG9uc2UuZXJyb3JzICE9
        PSB1bmRlZmluZWQpIHsKICAgICAgICB2YXIganNvbkVycm9ycyA9IHJlc3Bv
        bnNlLmVycm9yczsKCiAgICAgICAgZm9yRWFjaChFbWJlci5rZXlzKGpzb25F
        cnJvcnMpLCBmdW5jdGlvbihrZXkpIHsKICAgICAgICAgIGVycm9yc1tFbWJl
        ci5TdHJpbmcuY2FtZWxpemUoa2V5KV0gPSBqc29uRXJyb3JzW2tleV07CiAg
        ICAgICAgfSk7CiAgICAgIH0KCiAgICAgIHJldHVybiBuZXcgRFMuSW52YWxp
        ZEVycm9yKGVycm9ycyk7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gZXJy
        b3I7CiAgICB9CiAgfQp9KTsKCn0pKCk7CgoKCihmdW5jdGlvbigpIHsKCn0p
        KCk7CgoKCihmdW5jdGlvbigpIHsKRW1iZXIub25Mb2FkKCdFbWJlci5BcHBs
        aWNhdGlvbicsIGZ1bmN0aW9uKEFwcGxpY2F0aW9uKSB7CiAgQXBwbGljYXRp
        b24uaW5pdGlhbGl6ZXIoewogICAgbmFtZTogImFjdGl2ZU1vZGVsQWRhcHRl
        ciIsCgogICAgaW5pdGlhbGl6ZTogZnVuY3Rpb24oY29udGFpbmVyLCBhcHBs
        aWNhdGlvbikgewogICAgICB2YXIgcHJveHkgPSBuZXcgRFMuQ29udGFpbmVy
        UHJveHkoY29udGFpbmVyKTsKICAgICAgcHJveHkucmVnaXN0ZXJEZXByZWNh
        dGlvbnMoWwogICAgICAgIHtkZXByZWNhdGVkOiAnc2VyaWFsaXplcjpfYW1z
        JywgIHZhbGlkOiAnc2VyaWFsaXplcjotYWN0aXZlLW1vZGVsJ30sCiAgICAg
        ICAge2RlcHJlY2F0ZWQ6ICdhZGFwdGVyOl9hbXMnLCAgICAgdmFsaWQ6ICdh
        ZGFwdGVyOi1hY3RpdmUtbW9kZWwnfQogICAgICBdKTsKCiAgICAgIGFwcGxp
        Y2F0aW9uLnJlZ2lzdGVyKCdzZXJpYWxpemVyOi1hY3RpdmUtbW9kZWwnLCBE
        Uy5BY3RpdmVNb2RlbFNlcmlhbGl6ZXIpOwogICAgICBhcHBsaWNhdGlvbi5y
        ZWdpc3RlcignYWRhcHRlcjotYWN0aXZlLW1vZGVsJywgRFMuQWN0aXZlTW9k
        ZWxBZGFwdGVyKTsKICAgIH0KICB9KTsKfSk7Cgp9KSgpOwoKCgooZnVuY3Rp
        b24oKSB7Cgp9KSgpOwoKCn0pKCk7Cg==
    http_version: 
  recorded_at: Mon, 17 Feb 2014 11:45:50 GMT
- request:
    method: get
    uri: http://builds.emberjs.com/beta/ember-data.min.js
    body:
      encoding: US-ASCII
      string: ''
    headers:
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - '*/*'
      User-Agent:
      - Ruby
      Host:
      - builds.emberjs.com
  response:
    status:
      code: 200
      message: OK
    headers:
      X-Amz-Id-2:
      - kH5x94y4lxf++ZMbud/kirpUy/oRa3PVWU7DaxKpMs2SgqmdXO33IZMKQ4NaSUAX
      X-Amz-Request-Id:
      - D1F209C3E0306567
      Date:
      - Mon, 17 Feb 2014 11:45:51 GMT
      Last-Modified:
      - Sun, 26 Jan 2014 02:04:26 GMT
      Etag:
      - '"4bc58817f377007755b986a16db4a7c8"'
      Content-Type:
      - text/javascript
      Content-Length:
      - '71020'
      Server:
      - AmazonS3
    body:
      encoding: UTF-8
      string: |-
        /*!
         * @overview  Ember Data
         * @copyright Copyright 2011-2014 Tilde Inc. and contributors.
         *            Portions Copyright 2011 LivingSocial Inc.
         * @license   Licensed under MIT license (see license.js)
         * @version   1.0.0-beta.6
         */
        !function(){var e,t;!function(){var r={},n={};e=function(e,t,n){r[e]={deps:t,callback:n}},t=function(e){if(n[e])return n[e];n[e]={};var i,a,o,s,d;if(i=r[e],!i)throw new Error("Module '"+e+"' not found.");a=i.deps,o=i.callback,s=[];for(var u=0,c=a.length;c>u;u++)"exports"===a[u]?s.push(d={}):s.push(t(a[u]));var l=o.apply(this,s);return n[e]=d||l}}(),function(){var e;"undefined"==typeof e&&(e=Ember.Namespace.create({VERSION:"1.0.0-beta.6"}),"undefined"!=typeof window&&(window.DS=e),Ember.libraries&&Ember.libraries.registerCoreLibrary("Ember Data",e.VERSION))}(),function(){var e=function(e){this.container=e};e.prototype.aliasedFactory=function(e,t){var r=this;return{create:function(){return t&&t(),r.container.lookup(e)}}},e.prototype.registerAlias=function(e,t,r){var n=this.aliasedFactory(t,r);return this.container.register(e,n)},e.prototype.registerDeprecation=function(e,t){var r=function(){Ember.deprecate("You tried to look up '"+e+"', but this has been deprecated in favor of '"+t+"'.",!1)};return this.registerAlias(e,t,r)},e.prototype.registerDeprecations=function(e){for(var t=e.length;t>0;t--){var r=e[t-1],n=r.deprecated,i=r.valid;this.registerDeprecation(n,i)}},DS.ContainerProxy=e}(),function(){function e(e){return function(){return this[e].apply(this,arguments)}}var t=Ember.get,r=(Ember.set,Ember.isNone);DS.JSONSerializer=Ember.Object.extend({primaryKey:"id",applyTransforms:function(e,t){return e.eachTransformedAttribute(function(e,r){var n=this.transformFor(r);t[e]=n.deserialize(t[e])},this),t},normalize:function(e,t){return t?(this.applyTransforms(e,t),t):t},serialize:function(e,r){var n={};if(r&&r.includeId){var i=t(e,"id");i&&(n[t(this,"primaryKey")]=i)}return e.eachAttribute(function(t,r){this.serializeAttribute(e,n,t,r)},this),e.eachRelationship(function(t,r){"belongsTo"===r.kind?this.serializeBelongsTo(e,n,r):"hasMany"===r.kind&&this.serializeHasMany(e,n,r)},this),n},serializeAttribute:function(e,r,n,i){var a=t(this,"attrs"),o=t(e,n),s=i.type;if(s){var d=this.transformFor(s);o=d.serialize(o)}n=a&&a[n]||(this.keyForAttribute?this.keyForAttribute(n):n),r[n]=o},serializeBelongsTo:function(e,n,i){var a=i.key,o=t(e,a);a=this.keyForRelationship?this.keyForRelationship(a,"belongsTo"):a,n[a]=r(o)?o:t(o,"id"),i.options.polymorphic&&this.serializePolymorphicType(e,n,i)},serializeHasMany:function(e,r,n){var i=n.key,a=DS.RelationshipChange.determineRelationshipType(e.constructor,n);("manyToNone"===a||"manyToMany"===a)&&(r[i]=t(e,i).mapBy("id"))},serializePolymorphicType:Ember.K,extract:function(e,t,r,n,i){this.extractMeta(e,t,r);var a="extract"+i.charAt(0).toUpperCase()+i.substr(1);return this[a](e,t,r,n,i)},extractFindAll:e("extractArray"),extractFindQuery:e("extractArray"),extractFindMany:e("extractArray"),extractFindHasMany:e("extractArray"),extractCreateRecord:e("extractSave"),extractUpdateRecord:e("extractSave"),extractDeleteRecord:e("extractSave"),extractFind:e("extractSingle"),extractFindBelongsTo:e("extractSingle"),extractSave:e("extractSingle"),extractSingle:function(e,t,r){return this.normalize(t,r)},extractArray:function(e,t,r){return this.normalize(t,r)},extractMeta:function(e,t,r){r&&r.meta&&(e.metaForType(t,r.meta),delete r.meta)},transformFor:function(e,t){var r=this.container.lookup("transform:"+e);return Ember.assert("Unable to find transform for '"+e+"'",t||!!r),r}})}(),function(){var e=Ember.get,t=Ember.String.capitalize,r=Ember.String.underscore,n=window.DS;n.DebugAdapter=Ember.DataAdapter.extend({getFilters:function(){return[{name:"isNew",desc:"New"},{name:"isModified",desc:"Modified"},{name:"isClean",desc:"Clean"}]},detect:function(e){return e!==n.Model&&n.Model.detect(e)},columnsForType:function(n){var i=[{name:"id",desc:"Id"}],a=0,o=this;return e(n,"attributes").forEach(function(e){if(a++>o.attributeLimit)return!1;var n=t(r(e).replace("_"," "));i.push({name:e,desc:n})}),i},getRecords:function(e){return this.get("store").all(e)},getRecordColumnValues:function(t){var r=this,n=0,i={id:e(t,"id")};return t.eachAttribute(function(a){if(n++>r.attributeLimit)return!1;var o=e(t,a);i[a]=o}),i},getRecordKeywords:function(t){var r=[],n=Ember.A(["id"]);return t.eachAttribute(function(e){n.push(e)}),n.forEach(function(n){r.push(e(t,n))}),r},getRecordFilterValues:function(e){return{isNew:e.get("isNew"),isModified:e.get("isDirty")&&!e.get("isNew"),isClean:!e.get("isDirty")}},getRecordColor:function(e){var t="black";return e.get("isNew")?t="green":e.get("isDirty")&&(t="blue"),t},observeRecord:function(e,t){var r=Ember.A(),n=this,i=Ember.A(["id","isNew","isDirty"]);e.eachAttribute(function(e){i.push(e)}),i.forEach(function(i){var a=function(){t(n.wrapRecord(e))};Ember.addObserver(e,i,a),r.push(function(){Ember.removeObserver(e,i,a)})});var a=function(){r.forEach(function(e){e()})};return a}})}(),function(){DS.Transform=Ember.Object.extend({serialize:Ember.required(),deserialize:Ember.required()})}(),function(){DS.BooleanTransform=DS.Transform.extend({deserialize:function(e){var t=typeof e;return"boolean"===t?e:"string"===t?null!==e.match(/^true$|^t$|^1$/i):"number"===t?1===e:!1},serialize:function(e){return Boolean(e)}})}(),function(){DS.DateTransform=DS.Transform.extend({deserialize:function(e){var t=typeof e;return"string"===t?new Date(Ember.Date.parse(e)):"number"===t?new Date(e):null===e||void 0===e?e:null},serialize:function(e){return e instanceof Date?Number(e):null}})}(),function(){var e=Ember.isEmpty;DS.NumberTransform=DS.Transform.extend({deserialize:function(t){return e(t)?null:Number(t)},serialize:function(t){return e(t)?null:Number(t)}})}(),function(){var e=Ember.isNone;DS.StringTransform=DS.Transform.extend({deserialize:function(t){return e(t)?null:String(t)},serialize:function(t){return e(t)?null:String(t)}})}(),function(){Ember.set;Ember.onLoad("Ember.Application",function(e){e.initializer({name:"store",initialize:function(e,t){t.register("store:main",t.Store||DS.Store);var r=new DS.ContainerProxy(e);r.registerDeprecations([{deprecated:"serializer:_default",valid:"serializer:-default"},{deprecated:"serializer:_rest",valid:"serializer:-rest"},{deprecated:"adapter:_rest",valid:"adapter:-rest"}]),t.register("serializer:-default",DS.JSONSerializer),t.register("serializer:-rest",DS.RESTSerializer),t.register("adapter:-rest",DS.RESTAdapter),e.lookup("store:main")}}),e.initializer({name:"transforms",before:"store",initialize:function(e,t){t.register("transform:boolean",DS.BooleanTransform),t.register("transform:date",DS.DateTransform),t.register("transform:number",DS.NumberTransform),t.register("transform:string",DS.StringTransform)}}),e.initializer({name:"data-adapter",before:"store",initialize:function(e,t){t.register("data-adapter:main",DS.DebugAdapter)}}),e.initializer({name:"injectStore",before:"store",initialize:function(e,t){t.inject("controller","store","store:main"),t.inject("route","store","store:main"),t.inject("serializer","store","store:main"),t.inject("data-adapter","store","store:main")}})})}(),function(){Ember.Date=Ember.Date||{};var e=Date.parse,t=[1,4,5,6,7,10,11];Ember.Date.parse=function(r){var n,i,a=0;if(i=/^(\d{4}|[+\-]\d{6})(?:-(\d{2})(?:-(\d{2}))?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(?:\.(\d{3}))?)?(?:(Z)|([+\-])(\d{2})(?::(\d{2}))?)?)?$/.exec(r)){for(var o,s=0;o=t[s];++s)i[o]=+i[o]||0;i[2]=(+i[2]||1)-1,i[3]=+i[3]||1,"Z"!==i[8]&&void 0!==i[9]&&(a=60*i[10]+i[11],"+"===i[9]&&(a=0-a)),n=Date.UTC(i[1],i[2],i[3],i[4],i[5]+a,i[6],i[7])}else n=e?e(r):0/0;return n},(Ember.EXTEND_PROTOTYPES===!0||Ember.EXTEND_PROTOTYPES.Date)&&(Date.parse=Ember.Date.parse)}(),function(){{var e=Ember.get;Ember.set}DS.RecordArray=Ember.ArrayProxy.extend(Ember.Evented,{type:null,content:null,isLoaded:!1,isUpdating:!1,store:null,objectAtContent:function(t){var r=e(this,"content");return r.objectAt(t)},update:function(){if(!e(this,"isUpdating")){var t=e(this,"store"),r=e(this,"type");return t.fetchAll(r,this)}},addRecord:function(t){e(this,"content").addObject(t)},removeRecord:function(t){e(this,"content").removeObject(t)},save:function(){var t="DS: RecordArray#save "+e(this,"type"),r=Ember.RSVP.all(this.invoke("save"),t).then(function(e){return Ember.A(e)},null,"DS: RecordArray#save apply Ember.NativeArray");return DS.PromiseArray.create({promise:r})}})}(),function(){var e=Ember.get;DS.FilteredRecordArray=DS.RecordArray.extend({filterFunction:null,isLoaded:!0,replace:function(){var t=e(this,"type").toString();throw new Error("The result of a client-side filter (on "+t+") is immutable.")},updateFilter:Ember.observer(function(){var t=e(this,"manager");t.updateFilter(this,e(this,"type"),e(this,"filterFunction"))},"filterFunction")})}(),function(){{var e=Ember.get;Ember.set}DS.AdapterPopulatedRecordArray=DS.RecordArray.extend({query:null,replace:function(){var t=e(this,"type").toString();throw new Error("The result of a server query (on "+t+") is immutable.")},load:function(t){var r=e(this,"store"),n=e(this,"type"),i=r.pushMany(n,t),a=r.metadataFor(n);this.setProperties({content:Ember.A(i),isLoaded:!0,meta:a}),Ember.run.once(this,"trigger","didLoad")}})}(),function(){var e=Ember.get,t=Ember.set,r=Ember.EnumerableUtils.map;DS.ManyArray=DS.RecordArray.extend({init:function(){this._super.apply(this,arguments),this._changesToSync=Ember.OrderedSet.create()},name:null,owner:null,isPolymorphic:!1,isLoaded:!1,promise:null,loadingRecordsCount:function(e){this.loadingRecordsCount=e},loadedRecord:function(){this.loadingRecordsCount--,0===this.loadingRecordsCount&&(t(this,"isLoaded",!0),this.trigger("didLoad"))},fetch:function(){var t=e(this,"content"),r=e(this,"store"),n=e(this,"owner"),i=Ember.RSVP.defer("DS: ManyArray#fetch "+e(this,"type")),a=t.filterProperty("isEmpty",!0);r.fetchMany(a,n,i)},replaceContent:function(e,t,n){n=r(n,function(e){return Ember.assert("You cannot add '"+e.constructor.typeKey+"' records to this relationship (only '"+this.type.typeKey+"' allowed)",!this.type||e instanceof this.type),e},this),this._super(e,t,n)},arrangedContentDidChange:function(){Ember.run.once(this,"fetch")},arrayContentWillChange:function(t,r){var n=e(this,"owner"),i=e(this,"name");if(!n._suspendedRelationships)for(var a=t;t+r>a;a++){var o=e(this,"content").objectAt(a),s=DS.RelationshipChange.createChange(n,o,e(this,"store"),{parentType:n.constructor,changeType:"remove",kind:"hasMany",key:i});this._changesToSync.add(s)}return this._super.apply(this,arguments)},arrayContentDidChange:function(t,r,n){this._super.apply(this,arguments);var i=e(this,"owner"),a=e(this,"name"),o=e(this,"store");if(!i._suspendedRelationships){for(var s=t;t+n>s;s++){var d=e(this,"content").objectAt(s),u=DS.RelationshipChange.createChange(i,d,o,{parentType:i.constructor,changeType:"add",kind:"hasMany",key:a});u.hasManyName=a,this._changesToSync.add(u)}this._changesToSync.forEach(function(e){e.sync()}),this._changesToSync.clear()}},createRecord:function(t){var r,n=e(this,"owner"),i=e(n,"store"),a=e(this,"type");return Ember.assert("You cannot add '"+a.typeKey+"' records to this polymorphic relationship.",!e(this,"isPolymorphic")),r=i.createRecord.call(i,a,t),this.pushObject(r),r}})}(),function(){function e(e,r,a,o){return r.eachRelationship(function(r,s){if(a.links&&a.links[r])return o&&s.options.async&&(o._relationships[r]=null),void 0;var d=s.kind,u=a[r];null!=u&&("belongsTo"===d?t(e,a,r,s,u):"hasMany"===d&&(n(e,a,r,s,u),i(o,r,u)))}),a}function t(e,t,n,i,a){if(!(R(a)||a instanceof DS.Model)){var o;"number"==typeof a||"string"==typeof a?(o=r(i,n,t),t[n]=e.recordForId(o,a)):"object"==typeof a&&(t[n]=e.recordForId(a.type,a.id))}}function r(e,t,r){return e.options.polymorphic?r[t+"Type"]:e.type}function n(e,r,n,i,a){for(var o=0,s=a.length;s>o;o++)t(e,a,o,i,a[o])}function i(e,t,r){e&&r.pushObjects(e.get(t).filterBy("isNew"))}function a(e){return DS.PromiseObject.create({promise:e})}function o(e){return DS.PromiseArray.create({promise:e})}function s(e){return e&&"function"==typeof e.then}function d(e,t,r){return e.lookup("serializer:"+t)||e.lookup("serializer:application")||e.lookup("serializer:"+r)||e.lookup("serializer:-default")}function u(e){return e.lookup("serializer:application")||e.lookup("serializer:-default")}function c(e,t){var r=e.serializer,n=e.defaultSerializer,i=e.container;return i&&void 0===r&&(r=d(i,t.typeKey,n)),(null===r||void 0===r)&&(r={extract:function(e,t,r){return r}}),r}function l(e,t,r,n){var i=e.find(t,r,n),a=c(e,r);return A(i,"DS: Handle Adapter#find of "+r+" with id: "+n).then(function(e){return Ember.assert("You made a request for a "+r.typeKey+" with id "+n+", but the adapter's response did not have any data",e),e=a.extract(t,r,e,n,"find"),t.push(r,e)},function(e){var i=t.getById(r,n);throw i.notFound(),e},"DS: Extract payload of '"+r+"'")}function h(e,t,r,n,i){var a=e.findMany(t,r,n,i),o=c(e,r);return A(a,"DS: Handle Adapter#findMany of "+r).then(function(e){e=o.extract(t,r,e,null,"findMany"),Ember.assert("The response from a findMany must be an Array, not "+Ember.inspect(e),"array"===Ember.typeOf(e)),t.pushMany(r,e)},null,"DS: Extract payload of "+r)}function p(e,t,r,n,i){var a=e.findHasMany(t,r,n,i),o=c(e,i.type);return A(a,"DS: Handle Adapter#findHasMany of "+r+" : "+i.type).then(function(e){e=o.extract(t,i.type,e,null,"findHasMany"),Ember.assert("The response from a findHasMany must be an Array, not "+Ember.inspect(e),"array"===Ember.typeOf(e));var n=t.pushMany(i.type,e);r.updateHasMany(i.key,n)},null,"DS: Extract payload of "+r+" : hasMany "+i.type)}function f(e,t,r,n,i){var a=e.findBelongsTo(t,r,n,i),o=c(e,i.type);return A(a,"DS: Handle Adapter#findBelongsTo of "+r+" : "+i.type).then(function(e){e=o.extract(t,i.type,e,null,"findBelongsTo");var r=t.push(i.type,e);return r.updateBelongsTo(i.key,r),r},null,"DS: Extract payload of "+r+" : "+i.type)}function m(e,t,r,n){var i=e.findAll(t,r,n),a=c(e,r);return A(i,"DS: Handle Adapter#findAll of "+r).then(function(e){return e=a.extract(t,r,e,null,"findAll"),Ember.assert("The response from a findAll must be an Array, not "+Ember.inspect(e),"array"===Ember.typeOf(e)),t.pushMany(r,e),t.didUpdateAll(r),t.all(r)},null,"DS: Extract payload of findAll "+r)}function y(e,t,r,n,i){var a=e.findQuery(t,r,n,i),o=c(e,r);return A(a,"DS: Handle Adapter#findQuery of "+r).then(function(e){return e=o.extract(t,r,e,null,"findQuery"),Ember.assert("The response from a findQuery must be an Array, not "+Ember.inspect(e),"array"===Ember.typeOf(e)),i.load(e),i},null,"DS: Extract payload of findQuery "+r)}function b(e,t,r,n){var i=n.constructor,a=e[r](t,i,n),o=c(e,i);return Ember.assert("Your adapter's '"+r+"' method must return a promise, but it returned "+a,s(a)),a.then(function(e){return e&&(e=o.extract(t,i,e,g(n,"id"),r)),t.didSaveRecord(n,e),n},function(e){throw e instanceof DS.InvalidError?t.recordWasInvalid(n,e.errors):t.recordWasError(n,e),e},"DS: Extract and notify about "+r+" completion of "+n)}var g=Ember.get,v=Ember.set,E=Ember.run.once,R=Ember.isNone,S=Ember.EnumerableUtils.forEach,D=Ember.EnumerableUtils.indexOf,T=Ember.EnumerableUtils.map,A=Ember.RSVP.resolve,F=Ember.copy,C=function(e){return null==e?null:e+""};DS.Store=Ember.Object.extend({init:function(){this.typeMaps={},this.recordArrayManager=DS.RecordArrayManager.create({store:this}),this._relationshipChanges={},this._pendingSave=[]},adapter:"-rest",serialize:function(e,t){return this.serializerFor(e.constructor.typeKey).serialize(e,t)},defaultAdapter:Ember.computed("adapter",function(){var e=g(this,"adapter");return Ember.assert("You tried to set `adapter` property to an instance of `DS.Adapter`, where it should be a name or a factory",!(e instanceof DS.Adapter)),"string"==typeof e&&(e=this.container.lookup("adapter:"+e)||this.container.lookup("adapter:application")||this.container.lookup("adapter:-rest")),DS.Adapter.detect(e)&&(e=e.create({container:this.container})),e}),createRecord:function(e,t){e=this.modelFor(e),t=F(t)||{},R(t.id)&&(t.id=this._generateId(e)),t.id=C(t.id);var r=this.buildRecord(e,t.id);return r.loadedData(),r.setProperties(t),r},_generateId:function(e){var t=this.adapterFor(e);return t&&t.generateIdForRecord?t.generateIdForRecord(this):null},deleteRecord:function(e){e.deleteRecord()},unloadRecord:function(e){e.unloadRecord()},find:function(e,t){return void 0===t?this.findAll(e):"object"===Ember.typeOf(t)?this.findQuery(e,t):this.findById(e,C(t))},findById:function(e,t){e=this.modelFor(e);var r=this.recordForId(e,t),n=this.fetchRecord(r)||A(r,"DS: Store#findById "+e+" with id: "+t);return a(n)},findByIds:function(e,t){var r=this;return o(Ember.RSVP.all(T(t,function(t){return r.findById(e,t)})).then(Ember.A,null,"DS: Store#findByIds of "+e+" complete"))},fetchRecord:function(e){if(R(e))return null;if(e._loadingPromise)return e._loadingPromise;if(!g(e,"isEmpty"))return null;var t=e.constructor,r=g(e,"id"),n=this.adapterFor(t);Ember.assert("You tried to find a record but you have no adapter (for "+t+")",n),Ember.assert("You tried to find a record but your adapter (for "+t+") does not implement 'find'",n.find);var i=l(n,this,t,r);return e.loadingData(i),i},getById:function(e,t){return this.hasRecordForId(e,t)?this.recordForId(e,t):null},reloadRecord:function(e){var t=e.constructor,r=this.adapterFor(t),n=g(e,"id");return Ember.assert("You cannot reload a record without an ID",n),Ember.assert("You tried to reload a record but you have no adapter (for "+t+")",r),Ember.assert("You tried to reload a record but your adapter does not implement `find`",r.find),l(r,this,t,n)},fetchMany:function(e,t,r){if(e.length){var n=Ember.MapWithDefault.create({defaultValue:function(){return Ember.A()}});S(e,function(e){n.get(e.constructor).push(e)}),S(n,function(e,n){var i=n.mapProperty("id"),a=this.adapterFor(e);Ember.assert("You tried to load many records but you have no adapter (for "+e+")",a),Ember.assert("You tried to load many records but your adapter does not implement `findMany`",a.findMany),r.resolve(h(a,this,e,i,t))},this)}},hasRecordForId:function(e,t){return t=C(t),e=this.modelFor(e),!!this.typeMapFor(e).idToRecord[t]},recordForId:function(e,t){e=this.modelFor(e),t=C(t);var r=this.typeMapFor(e).idToRecord[t];return r||(r=this.buildRecord(e,t)),r},findMany:function(e,t,r,n){r=this.modelFor(r),t=Ember.A(t);var i=t.filterProperty("isEmpty",!0),a=this.recordArrayManager.createManyArray(r,t);return S(i,function(e){e.loadingData()}),a.loadingRecordsCount=i.length,i.length?(S(i,function(e){this.recordArrayManager.registerWaitingRecordArray(e,a)},this),this.fetchMany(i,e,n)):(n&&n.resolve(),a.set("isLoaded",!0),Ember.run.once(a,"trigger","didLoad")),a},findHasMany:function(e,t,r,n){var i=this.adapterFor(e.constructor);Ember.assert("You tried to load a hasMany relationship but you have no adapter (for "+e.constructor+")",i),Ember.assert("You tried to load a hasMany relationship from a specified `link` in the original payload but your adapter does not implement `findHasMany`",i.findHasMany);var a=this.recordArrayManager.createManyArray(r.type,Ember.A([]));return n.resolve(p(i,this,e,t,r)),a},findBelongsTo:function(e,t,r,n){var i=this.adapterFor(e.constructor);Ember.assert("You tried to load a belongsTo relationship but you have no adapter (for "+e.constructor+")",i),Ember.assert("You tried to load a belongsTo relationship from a specified `link` in the original payload but your adapter does not implement `findBelongsTo`",i.findBelongsTo),n.resolve(f(i,this,e,t,r))},findQuery:function(e,t){e=this.modelFor(e);var r=this.recordArrayManager.createAdapterPopulatedRecordArray(e,t),n=this.adapterFor(e),i="DS: Store#findQuery "+e,a=Ember.RSVP.defer(i);return Ember.assert("You tried to load a query but you have no adapter (for "+e+")",n),Ember.assert("You tried to load a query but your adapter does not implement `findQuery`",n.findQuery),a.resolve(y(n,this,e,t,r)),o(a.promise)},findAll:function(e){return e=this.modelFor(e),this.fetchAll(e,this.all(e))},fetchAll:function(e,t){var r=this.adapterFor(e),n=this.typeMapFor(e).metadata.since;return v(t,"isUpdating",!0),Ember.assert("You tried to load all records but you have no adapter (for "+e+")",r),Ember.assert("You tried to load all records but your adapter does not implement `findAll`",r.findAll),o(m(r,this,e,n))},didUpdateAll:function(e){var t=this.typeMapFor(e).findAllCache;v(t,"isUpdating",!1)},all:function(e){e=this.modelFor(e);var t=this.typeMapFor(e),r=t.findAllCache;if(r)return r;var n=this.recordArrayManager.createRecordArray(e);return t.findAllCache=n,n},unloadAll:function(e){e=this.modelFor(e);for(var t,r=this.typeMapFor(e),n=r.records.splice(0);t=n.pop();)t.unloadRecord();r.findAllCache=null},filter:function(e,t,r){var n;3===arguments.length?n=this.findQuery(e,t):2===arguments.length&&(r=t),e=this.modelFor(e);var i=this.recordArrayManager.createFilteredRecordArray(e,r);return n=n||A(i),o(n.then(function(){return i},null,"DS: Store#filter of "+e))},recordIsLoaded:function(e,t){return this.hasRecordForId(e,t)?!g(this.recordForId(e,t),"isEmpty"):!1},metadataFor:function(e){return e=this.modelFor(e),this.typeMapFor(e).metadata},dataWasUpdated:function(e,t){this.recordArrayManager.recordDidChange(t)},scheduleSave:function(e,t){e.adapterWillCommit(),this._pendingSave.push([e,t]),E(this,"flushPendingSave")},flushPendingSave:function(){var e=this._pendingSave.slice();this._pendingSave=[],S(e,function(e){var t,r=e[0],n=e[1],i=this.adapterFor(r.constructor);t=g(r,"isNew")?"createRecord":g(r,"isDeleted")?"deleteRecord":"updateRecord",n.resolve(b(i,this,t,r))},this)},didSaveRecord:function(t,r){r&&(r=e(this,t.constructor,r,t),this.updateId(t,r)),t.adapterDidCommit(r)},recordWasInvalid:function(e,t){e.adapterDidInvalidate(t)},recordWasError:function(e){e.adapterDidError()},updateId:function(e,t){var r=g(e,"id"),n=C(t.id);Ember.assert("An adapter cannot assign a new id to a record that already has an id. "+e+" had id: "+r+" and you tried to update it with "+n+". This likely happened because your server returned data in response to a find or update that had a different id than the one you sent.",null===r||n===r),this.typeMapFor(e.constructor).idToRecord[n]=e,v(e,"id",n)},typeMapFor:function(e){var t,r=g(this,"typeMaps"),n=Ember.guidFor(e);return(t=r[n])?t:(t={idToRecord:{},records:[],metadata:{}},r[n]=t,t)},_load:function(e,t,r){var n=C(t.id),i=this.recordForId(e,n);return i.setupData(t,r),this.recordArrayManager.recordDidChange(i),i},modelFor:function(e){var t;if("string"==typeof e){var r=this.container.normalize("model:"+e);if(t=this.container.lookupFactory(r),!t)throw new Ember.Error("No model was found for '"+e+"'");t.typeKey=r.split(":",2)[1]}else t=e;return t.store=this,t},push:function(t,r,n){return Ember.assert("You must include an `id` in a hash passed to `push`",null!=r.id),t=this.modelFor(t),r=e(this,t,r),this._load(t,r,n),this.recordForId(t,r.id)},pushPayload:function(e,t){var r;t?r=this.serializerFor(e):(t=e,r=u(this.container),Ember.assert("You cannot use `store#pushPayload` without a type unless your default serializer defines `pushPayload`",r.pushPayload)),r.pushPayload(this,t)},update:function(e,t){return Ember.assert("You must include an `id` in a hash passed to `update`",null!=t.id),this.push(e,t,!0)},pushMany:function(e,t){return T(t,function(t){return this.push(e,t)},this)},metaForType:function(e,t){e=this.modelFor(e),Ember.merge(this.typeMapFor(e).metadata,t)},buildRecord:function(e,t,r){var n=this.typeMapFor(e),i=n.idToRecord;Ember.assert("The id "+t+" has already been used with another record of type "+e.toString()+".",!t||!i[t]);var a=e._create({id:t,store:this,container:this.container});return r&&a.setupData(r),t&&(i[t]=a),n.records.push(a),a},dematerializeRecord:function(e){var t=e.constructor,r=this.typeMapFor(t),n=g(e,"id");e.updateRecordArrays(),n&&delete r.idToRecord[n];var i=D(r.records,e);r.records.splice(i,1)},addRelationshipChangeFor:function(e,t,r,n,i){var a=e.clientId,o=r?r:r,s=t+n,d=this._relationshipChanges;a in d||(d[a]={}),o in d[a]||(d[a][o]={}),s in d[a][o]||(d[a][o][s]={}),d[a][o][s][i.changeType]=i},removeRelationshipChangeFor:function(e,t,r,n,i){var a=e.clientId,o=r?r.clientId:r,s=this._relationshipChanges,d=t+n;a in s&&o in s[a]&&d in s[a][o]&&delete s[a][o][d][i]},relationshipChangePairsFor:function(e){var t=[];if(!e)return t;var r=this._relationshipChanges[e.clientId];for(var n in r)if(r.hasOwnProperty(n))for(var i in r[n])r[n].hasOwnProperty(i)&&t.push(r[n][i]);return t},adapterFor:function(e){var t,r=this.container;return r&&(t=r.lookup("adapter:"+e.typeKey)||r.lookup("adapter:application")),t||g(this,"defaultAdapter")},serializerFor:function(e){e=this.modelFor(e);var t=this.adapterFor(e);return d(this.container,e.typeKey,t&&t.defaultSerializer)}}),DS.PromiseArray=Ember.ArrayProxy.extend(Ember.PromiseProxyMixin),DS.PromiseObject=Ember.ObjectProxy.extend(Ember.PromiseProxyMixin)}(),function(){function e(t){var r,n={};for(var i in t)r=t[i],n[i]=r&&"object"==typeof r?e(r):r;return n}function t(e,t){for(var r in t)e[r]=t[r];return e}function r(r){var n=e(s);return t(n,r)}function n(e,r,i){e=t(r?Ember.create(r):{},e),e.parentState=r,e.stateName=i;for(var a in e)e.hasOwnProperty(a)&&"parentState"!==a&&"stateName"!==a&&"object"==typeof e[a]&&(e[a]=n(e[a],e,i+"."+a));return e}var i=Ember.get,a=Ember.set,o=function(e,t){t.value===t.originalValue?(delete e._attributes[t.name],e.send("propertyWasReset",t.name)):t.value!==t.oldValue&&e.send("becomeDirty"),e.updateRecordArraysLater()},s={initialState:"uncommitted",isDirty:!0,uncommitted:{didSetProperty:o,propertyWasReset:function(e){var t=!1;for(var r in e._attributes){t=!0;break}t||e.send("rolledBack")},pushedData:Ember.K,becomeDirty:Ember.K,willCommit:function(e){e.transitionTo("inFlight")},reloadRecord:function(e,t){t(i(e,"store").reloadRecord(e))},rolledBack:function(e){e.transitionTo("loaded.saved")},becameInvalid:function(e){e.transitionTo("invalid")},rollback:function(e){e.rollback()}},inFlight:{isSaving:!0,didSetProperty:o,becomeDirty:Ember.K,pushedData:Ember.K,willCommit:Ember.K,didCommit:function(e){var t=i(this,"dirtyType");e.transitionTo("saved"),e.send("invokeLifecycleCallbacks",t)},becameInvalid:function(e){e.transitionTo("invalid"),e.send("invokeLifecycleCallbacks")},becameError:function(e){e.transitionTo("uncommitted"),e.triggerLater("becameError",e)}},invalid:{isValid:!1,deleteRecord:function(e){e.transitionTo("deleted.uncommitted"),e.clearRelationships()},didSetProperty:function(e,t){i(e,"errors").remove(t.name),o(e,t)},becomeDirty:Ember.K,rolledBack:function(e){i(e,"errors").clear()},becameValid:function(e){e.transitionTo("uncommitted")},invokeLifecycleCallbacks:function(e){e.triggerLater("becameInvalid",e)}}},d=r({dirtyType:"created",isNew:!0});d.uncommitted.rolledBack=function(e){e.transitionTo("deleted.saved")};var u=r({dirtyType:"updated"});d.uncommitted.deleteRecord=function(e){e.clearRelationships(),e.transitionTo("deleted.saved")},d.uncommitted.rollback=function(e){s.uncommitted.rollback.apply(this,arguments),e.transitionTo("deleted.saved")},d.uncommitted.propertyWasReset=Ember.K,u.uncommitted.deleteRecord=function(e){e.transitionTo("deleted.uncommitted"),e.clearRelationships()};var c={isEmpty:!1,isLoading:!1,isLoaded:!1,isDirty:!1,isSaving:!1,isDeleted:!1,isNew:!1,isValid:!0,rolledBack:Ember.K,propertyWasReset:Ember.K,empty:{isEmpty:!0,loadingData:function(e,t){e._loadingPromise=t,e.transitionTo("loading")},loadedData:function(e){e.transitionTo("loaded.created.uncommitted"),e.suspendRelationshipObservers(function(){e.notifyPropertyChange("data")})},pushedData:function(e){e.transitionTo("loaded.saved"),e.triggerLater("didLoad")}},loading:{isLoading:!0,exit:function(e){e._loadingPromise=null},pushedData:function(e){e.transitionTo("loaded.saved"),e.triggerLater("didLoad"),a(e,"isError",!1)},becameError:function(e){e.triggerLater("becameError",e)},notFound:function(e){e.transitionTo("empty")}},loaded:{initialState:"saved",isLoaded:!0,saved:{setup:function(e){var t=e._attributes,r=!1;for(var n in t)if(t.hasOwnProperty(n)){r=!0;break}r&&e.adapterDidDirty()},didSetProperty:o,pushedData:Ember.K,becomeDirty:function(e){e.transitionTo("updated.uncommitted")},willCommit:function(e){e.transitionTo("updated.inFlight")},reloadRecord:function(e,t){t(i(e,"store").reloadRecord(e))},deleteRecord:function(e){e.transitionTo("deleted.uncommitted"),e.clearRelationships()},unloadRecord:function(e){e.clearRelationships(),e.transitionTo("deleted.saved")},didCommit:function(e){e.send("invokeLifecycleCallbacks",i(e,"lastDirtyType"))},notFound:Ember.K},created:d,updated:u},deleted:{initialState:"uncommitted",dirtyType:"deleted",isDeleted:!0,isLoaded:!0,isDirty:!0,setup:function(e){e.updateRecordArrays()},uncommitted:{willCommit:function(e){e.transitionTo("inFlight")},rollback:function(e){e.rollback()},becomeDirty:Ember.K,deleteRecord:Ember.K,rolledBack:function(e){e.transitionTo("loaded.saved")}},inFlight:{isSaving:!0,willCommit:Ember.K,didCommit:function(e){e.transitionTo("saved"),e.send("invokeLifecycleCallbacks")},becameError:function(e){e.transitionTo("uncommitted"),e.triggerLater("becameError",e)}},saved:{isDirty:!1,setup:function(e){var t=i(e,"store");t.dematerializeRecord(e)},invokeLifecycleCallbacks:function(e){e.triggerLater("didDelete",e),e.triggerLater("didCommit",e)}}},invokeLifecycleCallbacks:function(e,t){"created"===t?e.triggerLater("didCreate",e):e.triggerLater("didUpdate",e),e.triggerLater("didCommit",e)}};c=n(c,null,"root"),DS.RootState=c}(),function(){var e=Ember.get,t=Ember.isEmpty;DS.Errors=Ember.Object.extend(Ember.Enumerable,Ember.Evented,{registerHandlers:function(e,t,r){this.on("becameInvalid",e,t),this.on("becameValid",e,r)},errorsByAttributeName:Ember.reduceComputed("content",{initialValue:function(){return Ember.MapWithDefault.create({defaultValue:function(){return Ember.A()}})},addedItem:function(e,t){return e.get(t.attribute).pushObject(t),e},removedItem:function(e,t){return e.get(t.attribute).removeObject(t),e}}),errorsFor:function(t){return e(this,"errorsByAttributeName").get(t)},messages:Ember.computed.mapBy("content","message"),content:Ember.computed(function(){return Ember.A()}),unknownProperty:function(e){var r=this.errorsFor(e);return t(r)?null:r},nextObject:function(t){return e(this,"content").objectAt(t)},length:Ember.computed.oneWay("content.length").readOnly(),isEmpty:Ember.computed.not("length").readOnly(),add:function(t,r){var n=e(this,"isEmpty");r=this._findOrCreateMessages(t,r),e(this,"content").addObjects(r),this.notifyPropertyChange(t),this.enumerableContentDidChange(),n&&!e(this,"isEmpty")&&this.trigger("becameInvalid")},_findOrCreateMessages:function(e,t){var r=this.errorsFor(e);return Ember.makeArray(t).map(function(t){return r.findBy("message",t)||{attribute:e,message:t}})},remove:function(t){if(!e(this,"isEmpty")){var r=e(this,"content").rejectBy("attribute",t);e(this,"content").setObjects(r),this.notifyPropertyChange(t),this.enumerableContentDidChange(),e(this,"isEmpty")&&this.trigger("becameValid")}},clear:function(){e(this,"isEmpty")||(e(this,"content").clear(),this.enumerableContentDidChange(),this.trigger("becameValid"))},has:function(e){return!t(this.errorsFor(e))}})}(),function(){var e=Ember.get,t=Ember.set,r=Ember.merge,n=Ember.computed("currentState",function(t){return e(e(this,"currentState"),t)}).readOnly();DS.Model=Ember.Object.extend(Ember.Evented,{isEmpty:n,isLoading:n,isLoaded:n,isDirty:n,isSaving:n,isDeleted:n,isNew:n,isValid:n,dirtyType:n,isError:!1,isReloading:!1,clientId:null,id:null,transaction:null,currentState:null,errors:null,serialize:function(t){var r=e(this,"store");return r.serialize(this,t)},toJSON:function(e){var t=DS.JSONSerializer.create({container:this.container});return t.serialize(this,e)},didLoad:Ember.K,didUpdate:Ember.K,didCreate:Ember.K,didDelete:Ember.K,becameInvalid:Ember.K,becameError:Ember.K,data:Ember.computed(function(){return this._data=this._data||{},this._data}).property(),_data:null,init:function(){t(this,"currentState",DS.RootState.empty);var e=DS.Errors.create();e.registerHandlers(this,function(){this.send("becameInvalid")},function(){this.send("becameValid")}),t(this,"errors",e),this._super(),this._setup()},_setup:function(){this._changesToSync={},this._deferredTriggers=[],this._data={},this._attributes={},this._inFlightAttributes={},this._relationships={}},send:function(t,r){var n=e(this,"currentState");return n[t]||this._unhandledEvent(n,t,r),n[t](this,r)},transitionTo:function(r){var n=r.split(".",1),i=e(this,"currentState"),a=i;do a.exit&&a.exit(this),a=a.parentState;while(!a.hasOwnProperty(n));var o,s,d=r.split("."),u=[],c=[];for(o=0,s=d.length;s>o;o++)a=a[d[o]],a.enter&&c.push(a),a.setup&&u.push(a);for(o=0,s=c.length;s>o;o++)c[o].enter(this);for(t(this,"currentState",a),o=0,s=u.length;s>o;o++)u[o].setup(this);this.updateRecordArraysLater()},_unhandledEvent:function(e,t,r){var n="Attempted to handle event `"+t+"` ";throw n+="on "+String(this)+" while in state ",n+=e.stateName+". ",void 0!==r&&(n+="Called with "+Ember.inspect(r)+"."),new Ember.Error(n)
        },withTransaction:function(t){var r=e(this,"transaction");r&&t(r)},loadingData:function(e){this.send("loadingData",e)},loadedData:function(){this.send("loadedData")},notFound:function(){this.send("notFound")},pushedData:function(){this.send("pushedData")},deleteRecord:function(){this.send("deleteRecord")},destroyRecord:function(){return this.deleteRecord(),this.save()},unloadRecord:function(){Ember.assert("You can only unload a loaded, non-dirty record.",!e(this,"isDirty")),this.send("unloadRecord")},clearRelationships:function(){this.eachRelationship(function(e,r){if("belongsTo"===r.kind)t(this,e,null);else if("hasMany"===r.kind){var n=this._relationships[r.name];n&&n.clear()}},this)},updateRecordArrays:function(){this._updatingRecordArraysLater=!1,e(this,"store").dataWasUpdated(this.constructor,this)},changedAttributes:function(){var t,r=e(this,"_data"),n=e(this,"_attributes"),i={};for(t in n)i[t]=[r[t],n[t]];return i},adapterWillCommit:function(){this.send("willCommit")},adapterDidCommit:function(e){t(this,"isError",!1),e?this._data=e:Ember.mixin(this._data,this._inFlightAttributes),this._inFlightAttributes={},this.send("didCommit"),this.updateRecordArraysLater(),e&&this.suspendRelationshipObservers(function(){this.notifyPropertyChange("data")})},adapterDidDirty:function(){this.send("becomeDirty"),this.updateRecordArraysLater()},dataDidChange:Ember.observer(function(){this.reloadHasManys()},"data"),reloadHasManys:function(){var t=e(this.constructor,"relationshipsByName");this.updateRecordArraysLater(),t.forEach(function(e,t){this._data.links&&this._data.links[e]||"hasMany"===t.kind&&this.hasManyDidChange(t.key)},this)},hasManyDidChange:function(e){var r=this._relationships[e];if(r){var n=this._data[e]||[];t(r,"content",Ember.A(n)),t(r,"isLoaded",!0),r.trigger("didLoad")}},updateRecordArraysLater:function(){this._updatingRecordArraysLater||(this._updatingRecordArraysLater=!0,Ember.run.schedule("actions",this,this.updateRecordArrays))},setupData:function(e,t){t?Ember.merge(this._data,e):this._data=e;var r=this._relationships;this.eachRelationship(function(t,n){e.links&&e.links[t]||n.options.async&&(r[t]=null)}),e&&this.pushedData(),this.suspendRelationshipObservers(function(){this.notifyPropertyChange("data")})},materializeId:function(e){t(this,"id",e)},materializeAttributes:function(e){Ember.assert("Must pass a hash of attributes to materializeAttributes",!!e),r(this._data,e)},materializeAttribute:function(e,t){this._data[e]=t},updateHasMany:function(e,t){this._data[e]=t,this.hasManyDidChange(e)},updateBelongsTo:function(e,t){this._data[e]=t},rollback:function(){this._attributes={},e(this,"isError")&&(this._inFlightAttributes={},t(this,"isError",!1)),e(this,"isValid")||(this._inFlightAttributes={}),this.send("rolledBack"),this.suspendRelationshipObservers(function(){this.notifyPropertyChange("data")})},toStringExtension:function(){return e(this,"id")},suspendRelationshipObservers:function(t,r){var n=e(this.constructor,"relationshipNames").belongsTo,i=this;try{this._suspendedRelationships=!0,Ember._suspendObservers(i,n,null,"belongsToDidChange",function(){Ember._suspendBeforeObservers(i,n,null,"belongsToWillChange",function(){t.call(r||i)})})}finally{this._suspendedRelationships=!1}},save:function(){var e="DS: Model#save "+this,t=Ember.RSVP.defer(e);return this.get("store").scheduleSave(this,t),this._inFlightAttributes=this._attributes,this._attributes={},DS.PromiseObject.create({promise:t.promise})},reload:function(){t(this,"isReloading",!0);var e=this,r="DS: Model#reload of "+this,n=new Ember.RSVP.Promise(function(t){e.send("reloadRecord",t)},r).then(function(){return e.set("isReloading",!1),e.set("isError",!1),e},function(t){throw e.set("isError",!0),t},"DS: Model#reload complete, update flags");return DS.PromiseObject.create({promise:n})},adapterDidUpdateAttribute:function(e,t){void 0!==t?(this._data[e]=t,this.notifyPropertyChange(e)):this._data[e]=this._inFlightAttributes[e],this.updateRecordArraysLater()},adapterDidInvalidate:function(t){function r(e){t[e]&&n.add(e,t[e])}var n=e(this,"errors");this.eachAttribute(r),this.eachRelationship(r)},adapterDidError:function(){this.send("becameError"),t(this,"isError",!0)},trigger:function(e){Ember.tryInvoke(this,e,[].slice.call(arguments,1)),this._super.apply(this,arguments)},triggerLater:function(){1===this._deferredTriggers.push(arguments)&&Ember.run.schedule("actions",this,"_triggerDeferredTriggers")},_triggerDeferredTriggers:function(){for(var e=0,t=this._deferredTriggers.length;t>e;e++)this.trigger.apply(this,this._deferredTriggers[e]);this._deferredTriggers.length=0}}),DS.Model.reopenClass({_create:DS.Model.create,create:function(){throw new Ember.Error("You should not call `create` on a model. Instead, call `store.createRecord` with the attributes you would like to set.")}})}(),function(){function e(e,t){return"function"==typeof t.defaultValue?t.defaultValue():t.defaultValue}function t(e,t){return e._attributes.hasOwnProperty(t)||e._inFlightAttributes.hasOwnProperty(t)||e._data.hasOwnProperty(t)}function r(e,t){return e._attributes.hasOwnProperty(t)?e._attributes[t]:e._inFlightAttributes.hasOwnProperty(t)?e._inFlightAttributes[t]:e._data[t]}var n=Ember.get;DS.Model.reopenClass({attributes:Ember.computed(function(){var e=Ember.Map.create();return this.eachComputedProperty(function(t,r){r.isAttribute&&(Ember.assert("You may not set `id` as an attribute on your model. Please remove any lines that look like: `id: DS.attr('<type>')` from "+this.toString(),"id"!==t),r.name=t,e.set(t,r))}),e}),transformedAttributes:Ember.computed(function(){var e=Ember.Map.create();return this.eachAttribute(function(t,r){r.type&&e.set(t,r.type)}),e}),eachAttribute:function(e,t){n(this,"attributes").forEach(function(r,n){e.call(t,r,n)},t)},eachTransformedAttribute:function(e,t){n(this,"transformedAttributes").forEach(function(r,n){e.call(t,r,n)})}}),DS.Model.reopen({eachAttribute:function(e,t){this.constructor.eachAttribute(e,t)}}),DS.attr=function(n,i){i=i||{};var a={type:n,isAttribute:!0,options:i};return Ember.computed(function(n,a){if(arguments.length>1){Ember.assert("You may not set `id` as an attribute on your model. Please remove any lines that look like: `id: DS.attr('<type>')` from "+this.constructor.toString(),"id"!==n);var o=this._attributes[n]||this._inFlightAttributes[n]||this._data[n];return this.send("didSetProperty",{name:n,oldValue:o,originalValue:this._data[n],value:a}),this._attributes[n]=a,a}return t(this,n)?r(this,n):e(this,i,n)}).property("data").meta(a)}}(),function(){var e=DS.AttributeChange=function(e){this.record=e.record,this.store=e.store,this.name=e.name,this.value=e.value,this.oldValue=e.oldValue};e.createChange=function(t){return new e(t)},e.prototype={sync:function(){this.value!==this.oldValue&&(this.record.send("becomeDirty"),this.record.updateRecordArraysLater()),this.destroy()},destroy:function(){delete this.record._changesToSync[this.name]}}}(),function(){function e(e){return"object"==typeof e&&(!e.then||"function"!=typeof e.then)}var t=Ember.get,r=Ember.set,n=Ember.EnumerableUtils.forEach;DS.RelationshipChange=function(e){this.parentRecord=e.parentRecord,this.childRecord=e.childRecord,this.firstRecord=e.firstRecord,this.firstRecordKind=e.firstRecordKind,this.firstRecordName=e.firstRecordName,this.secondRecord=e.secondRecord,this.secondRecordKind=e.secondRecordKind,this.secondRecordName=e.secondRecordName,this.changeType=e.changeType,this.store=e.store,this.committed={}},DS.RelationshipChangeAdd=function(e){DS.RelationshipChange.call(this,e)},DS.RelationshipChangeRemove=function(e){DS.RelationshipChange.call(this,e)},DS.RelationshipChange.create=function(e){return new DS.RelationshipChange(e)},DS.RelationshipChangeAdd.create=function(e){return new DS.RelationshipChangeAdd(e)},DS.RelationshipChangeRemove.create=function(e){return new DS.RelationshipChangeRemove(e)},DS.OneToManyChange={},DS.OneToNoneChange={},DS.ManyToNoneChange={},DS.OneToOneChange={},DS.ManyToManyChange={},DS.RelationshipChange._createChange=function(e){return"add"===e.changeType?DS.RelationshipChangeAdd.create(e):"remove"===e.changeType?DS.RelationshipChangeRemove.create(e):void 0},DS.RelationshipChange.determineRelationshipType=function(e,t){var r,n,i=t.key,a=t.kind,o=e.inverseFor(i);return o&&(r=o.name,n=o.kind),o?"belongsTo"===n?"belongsTo"===a?"oneToOne":"manyToOne":"belongsTo"===a?"oneToMany":"manyToMany":"belongsTo"===a?"oneToNone":"manyToNone"},DS.RelationshipChange.createChange=function(e,t,r,n){var i,a=e.constructor;return i=DS.RelationshipChange.determineRelationshipType(a,n),"oneToMany"===i?DS.OneToManyChange.createChange(e,t,r,n):"manyToOne"===i?DS.OneToManyChange.createChange(t,e,r,n):"oneToNone"===i?DS.OneToNoneChange.createChange(e,t,r,n):"manyToNone"===i?DS.ManyToNoneChange.createChange(e,t,r,n):"oneToOne"===i?DS.OneToOneChange.createChange(e,t,r,n):"manyToMany"===i?DS.ManyToManyChange.createChange(e,t,r,n):void 0},DS.OneToNoneChange.createChange=function(e,t,r,n){var i=n.key,a=DS.RelationshipChange._createChange({parentRecord:t,childRecord:e,firstRecord:e,store:r,changeType:n.changeType,firstRecordName:i,firstRecordKind:"belongsTo"});return r.addRelationshipChangeFor(e,i,t,null,a),a},DS.ManyToNoneChange.createChange=function(e,t,r,n){var i=n.key,a=DS.RelationshipChange._createChange({parentRecord:e,childRecord:t,secondRecord:e,store:r,changeType:n.changeType,secondRecordName:n.key,secondRecordKind:"hasMany"});return r.addRelationshipChangeFor(e,i,t,null,a),a},DS.ManyToManyChange.createChange=function(e,t,r,n){var i=n.key,a=DS.RelationshipChange._createChange({parentRecord:t,childRecord:e,firstRecord:e,secondRecord:t,firstRecordKind:"hasMany",secondRecordKind:"hasMany",store:r,changeType:n.changeType,firstRecordName:i});return r.addRelationshipChangeFor(e,i,t,null,a),a},DS.OneToOneChange.createChange=function(e,t,r,n){var i;n.parentType?i=n.parentType.inverseFor(n.key).name:n.key?i=n.key:Ember.assert("You must pass either a parentType or belongsToName option to OneToManyChange.forChildAndParent",!1);var a=DS.RelationshipChange._createChange({parentRecord:t,childRecord:e,firstRecord:e,secondRecord:t,firstRecordKind:"belongsTo",secondRecordKind:"belongsTo",store:r,changeType:n.changeType,firstRecordName:i});return r.addRelationshipChangeFor(e,i,t,null,a),a},DS.OneToOneChange.maintainInvariant=function(e,r,n,i){if("add"===e.changeType&&r.recordIsMaterialized(n)){var a=t(n,i);if(a){var o=DS.OneToOneChange.createChange(n,a,r,{parentType:e.parentType,hasManyName:e.hasManyName,changeType:"remove",key:e.key});r.addRelationshipChangeFor(n,i,e.parentRecord,null,o),o.sync()}}},DS.OneToManyChange.createChange=function(e,t,r,n){var i;n.parentType?(i=n.parentType.inverseFor(n.key).name,DS.OneToManyChange.maintainInvariant(n,r,e,i)):n.key?i=n.key:Ember.assert("You must pass either a parentType or belongsToName option to OneToManyChange.forChildAndParent",!1);var a=DS.RelationshipChange._createChange({parentRecord:t,childRecord:e,firstRecord:e,secondRecord:t,firstRecordKind:"belongsTo",secondRecordKind:"hasMany",store:r,changeType:n.changeType,firstRecordName:i});return r.addRelationshipChangeFor(e,i,t,a.getSecondRecordName(),a),a},DS.OneToManyChange.maintainInvariant=function(e,r,n,i){if("add"===e.changeType&&n){var a=t(n,i);if(a){var o=DS.OneToManyChange.createChange(n,a,r,{parentType:e.parentType,hasManyName:e.hasManyName,changeType:"remove",key:e.key});r.addRelationshipChangeFor(n,i,e.parentRecord,o.getSecondRecordName(),o),o.sync()}}},DS.RelationshipChange.prototype={getSecondRecordName:function(){var e,t=this.secondRecordName;if(!t){if(e=this.secondRecord,!e)return;var r=this.firstRecord.constructor,n=r.inverseFor(this.firstRecordName);this.secondRecordName=n.name}return this.secondRecordName},getFirstRecordName:function(){var e=this.firstRecordName;return e},destroy:function(){var e=this.childRecord,t=this.getFirstRecordName(),r=this.getSecondRecordName(),n=this.store;n.removeRelationshipChangeFor(e,t,this.parentRecord,r,this.changeType)},getSecondRecord:function(){return this.secondRecord},getFirstRecord:function(){return this.firstRecord},coalesce:function(){var e=this.store.relationshipChangePairsFor(this.firstRecord);n(e,function(e){var t=e.add,r=e.remove;t&&r&&(t.destroy(),r.destroy())})}},DS.RelationshipChangeAdd.prototype=Ember.create(DS.RelationshipChange.create({})),DS.RelationshipChangeRemove.prototype=Ember.create(DS.RelationshipChange.create({})),DS.RelationshipChangeAdd.prototype.changeType="add",DS.RelationshipChangeAdd.prototype.sync=function(){var n=this.getSecondRecordName(),i=this.getFirstRecordName(),a=this.getFirstRecord(),o=this.getSecondRecord();o instanceof DS.Model&&a instanceof DS.Model&&("belongsTo"===this.secondRecordKind?o.suspendRelationshipObservers(function(){r(o,n,a)}):"hasMany"===this.secondRecordKind&&o.suspendRelationshipObservers(function(){var r=t(o,n);e(r)&&r.addObject(a)})),a instanceof DS.Model&&o instanceof DS.Model&&t(a,i)!==o&&("belongsTo"===this.firstRecordKind?a.suspendRelationshipObservers(function(){r(a,i,o)}):"hasMany"===this.firstRecordKind&&a.suspendRelationshipObservers(function(){var r=t(a,i);e(r)&&r.addObject(o)})),this.coalesce()},DS.RelationshipChangeRemove.prototype.changeType="remove",DS.RelationshipChangeRemove.prototype.sync=function(){var n=this.getSecondRecordName(),i=this.getFirstRecordName(),a=this.getFirstRecord(),o=this.getSecondRecord();o instanceof DS.Model&&a instanceof DS.Model&&("belongsTo"===this.secondRecordKind?o.suspendRelationshipObservers(function(){r(o,n,null)}):"hasMany"===this.secondRecordKind&&o.suspendRelationshipObservers(function(){var r=t(o,n);e(r)&&r.removeObject(a)})),a instanceof DS.Model&&t(a,i)&&("belongsTo"===this.firstRecordKind?a.suspendRelationshipObservers(function(){r(a,i,null)}):"hasMany"===this.firstRecordKind&&a.suspendRelationshipObservers(function(){var r=t(a,i);e(r)&&r.removeObject(o)})),this.coalesce()}}(),function(){function e(e,n,i){return Ember.computed(function(n,a){var o=t(this,"data"),s=t(this,"store"),d="DS: Async belongsTo "+this+" : "+n;if(2===arguments.length)return Ember.assert("You can only add a '"+e+"' record to this relationship",!a||a instanceof s.modelFor(e)),void 0===a?null:DS.PromiseObject.create({promise:Ember.RSVP.resolve(a,d)});var u=o.links&&o.links[n],c=o[n];if(r(c)){if(u){var l=Ember.RSVP.defer("DS: Async belongsTo (link) "+this+" : "+n);return s.findBelongsTo(this,u,i,l),DS.PromiseObject.create({promise:l.promise})}return null}var h=s.fetchRecord(c)||Ember.RSVP.resolve(c,d);return DS.PromiseObject.create({promise:h})}).property("data").meta(i)}var t=Ember.get,r=(Ember.set,Ember.isNone);DS.belongsTo=function(n,i){"object"==typeof n?(i=n,n=void 0):Ember.assert("The first argument DS.belongsTo must be a model type or string, like DS.belongsTo(App.Person)",!!n&&("string"==typeof n||DS.Model.detect(n))),i=i||{};var a={type:n,isRelationship:!0,options:i,kind:"belongsTo"};return i.async?e(n,i,a):Ember.computed(function(e,i){var a,o,s=t(this,"data"),d=t(this,"store");return o="string"==typeof n?d.modelFor(n):n,2===arguments.length?(Ember.assert("You can only add a '"+n+"' record to this relationship",!i||i instanceof o),void 0===i?null:i):(a=s[e],r(a)?null:(d.fetchRecord(a),a))}).property("data").meta(a)},DS.Model.reopen({belongsToWillChange:Ember.beforeObserver(function(e,r){if(t(e,"isLoaded")){var n=t(e,r);if(n){var i=t(e,"store"),a=DS.RelationshipChange.createChange(e,n,i,{key:r,kind:"belongsTo",changeType:"remove"});a.sync(),this._changesToSync[r]=a}}}),belongsToDidChange:Ember.immediateObserver(function(e,r){if(t(e,"isLoaded")){var n=t(e,r);if(n){var i=t(e,"store"),a=DS.RelationshipChange.createChange(e,n,i,{key:r,kind:"belongsTo",changeType:"add"});a.sync()}}delete this._changesToSync[r]})})}(),function(){function e(e,r,n){return Ember.computed(function(e){var a=this._relationships[e],o="DS: Async hasMany "+this+" : "+e;if(!a){var s=Ember.RSVP.defer(o);a=t(this,e,r,function(t,r){var a,o=r.links&&r.links[e];return a=o?t.findHasMany(this,o,n,s):t.findMany(this,r[e],n.type,s),i(a,"promise",s.promise),a})}var d=a.get("promise").then(function(){return a},null,"DS: Async hasMany records received");return DS.PromiseArray.create({promise:d})}).property("data").meta(n)}function t(e,t,r,i){var o=e._relationships;if(o[t])return o[t];var s=n(e,"data"),d=n(e,"store"),u=o[t]=i.call(e,d,s);return a(u,{owner:e,name:t,isPolymorphic:r.polymorphic})}function r(r,n){n=n||{};var i={type:r,isRelationship:!0,options:n,kind:"hasMany"};return n.async?e(r,n,i):Ember.computed(function(e){return t(this,e,n,function(t,r){var n=r[e];return Ember.assert("You looked up the '"+e+"' relationship on '"+this+"' but some of the associated records were not loaded. Either make sure they are all loaded together with the parent record, or specify that the relationship is async (`DS.hasMany({ async: true })`)",Ember.A(n).everyProperty("isEmpty",!1)),t.findMany(this,r[e],i.type)})}).property("data").meta(i)}var n=Ember.get,i=Ember.set,a=Ember.setProperties;DS.hasMany=function(e,t){return"object"==typeof e&&(t=e,e=void 0),r(e,t)}}(),function(){{var e=Ember.get;Ember.set}DS.Model.reopen({didDefineProperty:function(e,t,r){if(r instanceof Ember.Descriptor){var n=r.meta();n.isRelationship&&"belongsTo"===n.kind&&(Ember.addObserver(e,t,null,"belongsToDidChange"),Ember.addBeforeObserver(e,t,null,"belongsToWillChange")),n.parentType=e.constructor}}}),DS.Model.reopenClass({typeForRelationship:function(t){var r=e(this,"relationshipsByName").get(t);return r&&r.type},inverseFor:function(t){function r(t,n,i){i=i||[];var a=e(n,"relationships");if(a){var o=a.get(t);return o&&i.push.apply(i,a.get(t)),t.superclass&&r(t.superclass,n,i),i}}var n=this.typeForRelationship(t);if(!n)return null;var i=this.metaForProperty(t).options;if(null===i.inverse)return null;var a,o;if(i.inverse)a=i.inverse,o=Ember.get(n,"relationshipsByName").get(a).kind;else{var s=r(this,n);if(0===s.length)return null;Ember.assert("You defined the '"+t+"' relationship on "+this+", but multiple possible inverse relationships of type "+this+" were found on "+n+". Look at http://emberjs.com/guides/models/defining-models/#toc_explicit-inverses for how to explicitly specify inverses",1===s.length),a=s[0].name,o=s[0].kind}return{type:n,name:a,kind:o}},relationships:Ember.computed(function(){var e=new Ember.MapWithDefault({defaultValue:function(){return[]}});return this.eachComputedProperty(function(t,r){if(r.isRelationship){"string"==typeof r.type&&(r.type=this.store.modelFor(r.type));var n=e.get(r.type);n.push({name:t,kind:r.kind})}}),e}),relationshipNames:Ember.computed(function(){var e={hasMany:[],belongsTo:[]};return this.eachComputedProperty(function(t,r){r.isRelationship&&e[r.kind].push(t)}),e}),relatedTypes:Ember.computed(function(){var t,r=Ember.A();return this.eachComputedProperty(function(n,i){i.isRelationship&&(t=i.type,"string"==typeof t&&(t=e(this,t,!1)||this.store.modelFor(t)),Ember.assert("You specified a hasMany ("+i.type+") on "+i.parentType+" but "+i.type+" was not found.",t),r.contains(t)||(Ember.assert("Trying to sideload "+n+" on "+this.toString()+" but the type doesn't exist.",!!t),r.push(t)))}),r}),relationshipsByName:Ember.computed(function(){var e,t=Ember.Map.create();return this.eachComputedProperty(function(r,n){n.isRelationship&&(n.key=r,e=n.type,e||"hasMany"!==n.kind?e||(e=r):e=Ember.String.singularize(r),"string"==typeof e&&(n.type=this.store.modelFor(e)),t.set(r,n))}),t}),fields:Ember.computed(function(){var e=Ember.Map.create();return this.eachComputedProperty(function(t,r){r.isRelationship?e.set(t,r.kind):r.isAttribute&&e.set(t,"attribute")}),e}),eachRelationship:function(t,r){e(this,"relationshipsByName").forEach(function(e,n){t.call(r,e,n)})},eachRelatedType:function(t,r){e(this,"relatedTypes").forEach(function(e){t.call(r,e)})}}),DS.Model.reopen({eachRelationship:function(e,t){this.constructor.eachRelationship(e,t)}})}(),function(){var e=Ember.get,t=(Ember.set,Ember.EnumerableUtils.forEach);DS.RecordArrayManager=Ember.Object.extend({init:function(){this.filteredRecordArrays=Ember.MapWithDefault.create({defaultValue:function(){return[]}}),this.changedRecords=[]},recordDidChange:function(e){1===this.changedRecords.push(e)&&Ember.run.schedule("actions",this,this.updateRecordArrays)},recordArraysForRecord:function(e){return e._recordArrays=e._recordArrays||Ember.OrderedSet.create(),e._recordArrays},updateRecordArrays:function(){t(this.changedRecords,function(t){e(t,"isDeleted")?this._recordWasDeleted(t):this._recordWasChanged(t)},this),this.changedRecords.length=0},_recordWasDeleted:function(e){var r=e._recordArrays;r&&t(r,function(t){t.removeRecord(e)})},_recordWasChanged:function(r){var n,i=r.constructor,a=this.filteredRecordArrays.get(i);t(a,function(t){n=e(t,"filterFunction"),this.updateRecordArray(t,n,i,r)},this);var o=r._loadingRecordArrays;if(o){for(var s=0,d=o.length;d>s;s++)o[s].loadedRecord();r._loadingRecordArrays=[]}},updateRecordArray:function(e,t,r,n){var i;i=t?t(n):!0;var a=this.recordArraysForRecord(n);i?(a.add(e),e.addRecord(n)):i||(a.remove(e),e.removeRecord(n))},updateFilter:function(t,r,n){for(var i,a=this.store.typeMapFor(r),o=a.records,s=0,d=o.length;d>s;s++)i=o[s],e(i,"isDeleted")||e(i,"isEmpty")||this.updateRecordArray(t,n,r,i)},createManyArray:function(e,r){var n=DS.ManyArray.create({type:e,content:r,store:this.store});return t(r,function(e){var t=this.recordArraysForRecord(e);t.add(n)},this),n},createRecordArray:function(e){var t=DS.RecordArray.create({type:e,content:Ember.A(),store:this.store,isLoaded:!0});return this.registerFilteredRecordArray(t,e),t},createFilteredRecordArray:function(e,t){var r=DS.FilteredRecordArray.create({type:e,content:Ember.A(),store:this.store,manager:this,filterFunction:t});return this.registerFilteredRecordArray(r,e,t),r},createAdapterPopulatedRecordArray:function(e,t){return DS.AdapterPopulatedRecordArray.create({type:e,query:t,content:Ember.A(),store:this.store})},registerFilteredRecordArray:function(e,t,r){var n=this.filteredRecordArrays.get(t);n.push(e),this.updateFilter(e,t,r)},registerWaitingRecordArray:function(e,t){var r=e._loadingRecordArrays||[];r.push(t),e._loadingRecordArrays=r}})}(),function(){var e=Ember.get,t=(Ember.set,Ember.ArrayPolyfills.map),r=["description","fileName","lineNumber","message","name","number","stack"];DS.InvalidError=function(e){var t=Error.prototype.constructor.call(this,"The backend rejected the commit because it was invalid: "+Ember.inspect(e));this.errors=e;for(var n=0,i=r.length;i>n;n++)this[r[n]]=t[r[n]]},DS.InvalidError.prototype=Ember.create(Error.prototype),DS.Adapter=Ember.Object.extend({find:Ember.required(Function),findAll:null,findQuery:null,generateIdForRecord:null,serialize:function(t,r){return e(t,"store").serializerFor(t.constructor.typeKey).serialize(t,r)},createRecord:Ember.required(Function),updateRecord:Ember.required(Function),deleteRecord:Ember.required(Function),findMany:function(e,r,n){var i=t.call(n,function(t){return this.find(e,r,t)},this);return Ember.RSVP.all(i)}})}(),function(){var e=Ember.get,t=Ember.String.fmt,r=Ember.EnumerableUtils.indexOf,n=0;DS.FixtureAdapter=DS.Adapter.extend({serializer:null,simulateRemoteResponse:!0,latency:50,fixturesForType:function(e){if(e.FIXTURES){var r=Ember.A(e.FIXTURES);return r.map(function(e){var r=typeof e.id;if("number"!==r&&"string"!==r)throw new Error(t("the id property must be defined as a number or string for fixture %@",[e]));return e.id=e.id+"",e})}return null},queryFixtures:function(){Ember.assert("Not implemented: You must override the DS.FixtureAdapter::queryFixtures method to support querying the fixture store.")},updateFixtures:function(e,t){e.FIXTURES||(e.FIXTURES=[]);var r=e.FIXTURES;this.deleteLoadedFixture(e,t),r.push(t)},mockJSON:function(e,t,r){return e.serializerFor(t).serialize(r,{includeId:!0})},generateIdForRecord:function(){return"fixture-"+n++},find:function(e,t,r){var n,i=this.fixturesForType(t);return Ember.assert("Unable to find fixtures for model type "+t.toString(),i),i&&(n=Ember.A(i).findProperty("id",r)),n?this.simulateRemoteCall(function(){return n},this):void 0},findMany:function(e,t,n){var i=this.fixturesForType(t);return Ember.assert("Unable to find fixtures for model type "+t.toString(),i),i&&(i=i.filter(function(e){return-1!==r(n,e.id)})),i?this.simulateRemoteCall(function(){return i},this):void 0},findAll:function(e,t){var r=this.fixturesForType(t);return Ember.assert("Unable to find fixtures for model type "+t.toString(),r),this.simulateRemoteCall(function(){return r},this)},findQuery:function(e,t,r){var n=this.fixturesForType(t);return Ember.assert("Unable to find fixtures for model type "+t.toString(),n),n=this.queryFixtures(n,r,t),n?this.simulateRemoteCall(function(){return n},this):void 0},createRecord:function(e,t,r){var n=this.mockJSON(e,t,r);return this.updateFixtures(t,n),this.simulateRemoteCall(function(){return n},this)},updateRecord:function(e,t,r){var n=this.mockJSON(e,t,r);return this.updateFixtures(t,n),this.simulateRemoteCall(function(){return n},this)},deleteRecord:function(e,t,r){var n=this.mockJSON(e,t,r);return this.deleteLoadedFixture(t,n),this.simulateRemoteCall(function(){return null})},deleteLoadedFixture:function(e,t){var n=this.findExistingFixture(e,t);if(n){var i=r(e.FIXTURES,n);return e.FIXTURES.splice(i,1),!0}},findExistingFixture:function(t,r){var n=this.fixturesForType(t),i=e(r,"id");return this.findFixtureById(n,i)},findFixtureById:function(t,r){return Ember.A(t).find(function(t){return""+e(t,"id")==""+r?!0:!1})},simulateRemoteCall:function(t,r){var n=this;return new Ember.RSVP.Promise(function(i){e(n,"simulateRemoteResponse")?Ember.run.later(function(){i(t.call(r))},e(n,"latency")):Ember.run.schedule("actions",null,function(){i(t.call(r))})},"DS: FixtureAdapter#simulateRemoteCall")}})}(),function(){function e(e){return null==e?null:e+""}var t=Ember.get,r=(Ember.set,Ember.ArrayPolyfills.forEach),n=Ember.ArrayPolyfills.map;DS.RESTSerializer=DS.JSONSerializer.extend({normalize:function(e,t,r){return this.normalizeId(t),this.normalizeAttributes(e,t),this.normalizeRelationships(e,t),this.normalizeUsingDeclaredMapping(e,t),this.normalizeHash&&this.normalizeHash[r]&&this.normalizeHash[r](t),this._super(e,t,r)},normalizePayload:function(e,t){return t},normalizeId:function(e){var r=t(this,"primaryKey");"id"!==r&&(e.id=e[r],delete e[r])},normalizeUsingDeclaredMapping:function(e,r){var n,i,a=t(this,"attrs");if(a)for(i in a)n=a[i],n&&n.key&&(n=n.key),"string"==typeof n&&(r[i]=r[n],delete r[n])},normalizeAttributes:function(e,t){var r;this.keyForAttribute&&e.eachAttribute(function(e){r=this.keyForAttribute(e),e!==r&&(t[e]=t[r],delete t[r])},this)},normalizeRelationships:function(e,t){var r;this.keyForRelationship&&e.eachRelationship(function(e,n){r=this.keyForRelationship(e,n.kind),e!==r&&(t[e]=t[r],delete t[r])},this)},extractSingle:function(t,n,i,a){i=this.normalizePayload(n,i);var o,s=n.typeKey;for(var d in i){var u=this.typeForRoot(d),c=t.modelFor(u),l=c.typeKey===s;l&&"array"!==Ember.typeOf(i[d])?o=this.normalize(n,i[d],d):r.call(i[d],function(r){var n=this.typeForRoot(d),i=t.modelFor(n),s=t.serializerFor(i);r=s.normalize(i,r,d);var u=l&&!a&&!o,c=l&&e(r.id)===a;u||c?o=r:t.push(n,r)},this)}return o},extractArray:function(e,t,r){r=this.normalizePayload(t,r);var i,a=t.typeKey;for(var o in r){var s=o,d=!1;"_"===o.charAt(0)&&(d=!0,s=o.substr(1));var u=this.typeForRoot(s),c=e.modelFor(u),l=e.serializerFor(c),h=!d&&c.typeKey===a,p=n.call(r[o],function(e){return l.normalize(c,e,o)},this);h?i=p:e.pushMany(u,p)}return i},pushPayload:function(e,t){t=this.normalizePayload(null,t);for(var r in t){var i=this.typeForRoot(r),a=e.modelFor(i),o=n.call(Ember.makeArray(t[r]),function(e){return this.normalize(a,e,r)},this);e.pushMany(i,o)}},typeForRoot:function(e){return Ember.String.singularize(e)},serialize:function(){return this._super.apply(this,arguments)},serializeIntoHash:function(e,t,r,n){var i=Ember.String.camelize(t.typeKey);e[i]=this.serialize(r,n)},serializePolymorphicType:function(e,r,n){var i=n.key,a=t(e,i);i=this.keyForAttribute?this.keyForAttribute(i):i,r[i+"Type"]=Ember.String.camelize(a.constructor.typeKey)}})}(),function(){var e=Ember.get,t=(Ember.set,Ember.ArrayPolyfills.forEach);DS.RESTAdapter=DS.Adapter.extend({defaultSerializer:"-rest",find:function(e,t,r){return this.ajax(this.buildURL(t.typeKey,r),"GET")},findAll:function(e,t,r){var n;return r&&(n={since:r}),this.ajax(this.buildURL(t.typeKey),"GET",{data:n})},findQuery:function(e,t,r){return this.ajax(this.buildURL(t.typeKey),"GET",{data:r})},findMany:function(e,t,r){return this.ajax(this.buildURL(t.typeKey),"GET",{data:{ids:r}})},findHasMany:function(t,r,n){var i=e(this,"host"),a=e(r,"id"),o=r.constructor.typeKey;return i&&"/"===n.charAt(0)&&"/"!==n.charAt(1)&&(n=i+n),this.ajax(this.urlPrefix(n,this.buildURL(o,a)),"GET")},findBelongsTo:function(t,r,n){var i=e(r,"id"),a=r.constructor.typeKey;return this.ajax(this.urlPrefix(n,this.buildURL(a,i)),"GET")},createRecord:function(e,t,r){var n={},i=e.serializerFor(t.typeKey);return i.serializeIntoHash(n,t,r,{includeId:!0}),this.ajax(this.buildURL(t.typeKey),"POST",{data:n})},updateRecord:function(t,r,n){var i={},a=t.serializerFor(r.typeKey);a.serializeIntoHash(i,r,n);var o=e(n,"id");return this.ajax(this.buildURL(r.typeKey,o),"PUT",{data:i})},deleteRecord:function(t,r,n){var i=e(n,"id");return this.ajax(this.buildURL(r.typeKey,i),"DELETE")},buildURL:function(t,r){var n=[],i=e(this,"host"),a=this.urlPrefix();return t&&n.push(this.pathForType(t)),r&&n.push(r),a&&n.unshift(a),n=n.join("/"),!i&&n&&(n="/"+n),n},urlPrefix:function(t,r){var n=e(this,"host"),i=e(this,"namespace"),a=[];return t?"/"===t.charAt(0)?n&&(t=t.slice(1),a.push(n)):/^http(s)?:\/\//.test(t)||a.push(r):(n&&a.push(n),i&&a.push(i)),t&&a.push(t),a.join("/")},pathForType:function(e){var t=Ember.String.camelize(e);return Ember.String.pluralize(t)},ajaxError:function(e){return e&&(e.then=null),e},ajax:function(e,t,r){var n=this;return new Ember.RSVP.Promise(function(i,a){r=n.ajaxOptions(e,t,r),r.success=function(e){Ember.run(null,i,e)},r.error=function(e){Ember.run(null,a,n.ajaxError(e))},Ember.$.ajax(r)},"DS: RestAdapter#ajax "+t+" to "+e)},ajaxOptions:function(e,r,n){if(n=n||{},n.url=e,n.type=r,n.dataType="json",n.context=this,n.data&&"GET"!==r&&(n.contentType="application/json; charset=utf-8",n.data=JSON.stringify(n.data)),void 0!==this.headers){var i=this.headers;n.beforeSend=function(e){t.call(Ember.keys(i),function(t){e.setRequestHeader(t,i[t])})}}return n}})}(),function(){DS.Model.reopen({_debugInfo:function(){var e=["id"],t={belongsTo:[],hasMany:[]},r=[];this.eachAttribute(function(t){e.push(t)},this),this.eachRelationship(function(e,n){t[n.kind].push(e),r.push(e)});var n=[{name:"Attributes",properties:e,expand:!0},{name:"Belongs To",properties:t.belongsTo,expand:!0},{name:"Has Many",properties:t.hasMany,expand:!0},{name:"Flags",properties:["isLoaded","isDirty","isSaving","isDeleted","isError","isNew","isValid"]}];return{propertyInfo:{includeOtherProperties:!0,groups:n,expensiveProperties:r}}}})}(),function(){Ember.String.pluralize=function(e){return Ember.Inflector.inflector.pluralize(e)},Ember.String.singularize=function(e){return Ember.Inflector.inflector.singularize(e)}}(),function(){function e(e,t){for(var r=0,n=t.length;n>r;r++)e.uncountable[t[r].toLowerCase()]=!0}function t(e,t){for(var r,n=0,i=t.length;i>n;n++)r=t[n],e.irregular[r[0].toLowerCase()]=r[1],e.irregularInverse[r[1].toLowerCase()]=r[0]}function r(r){r=r||{},r.uncountable=r.uncountable||{},r.irregularPairs=r.irregularPairs||{};var n=this.rules={plurals:r.plurals||[],singular:r.singular||[],irregular:{},irregularInverse:{},uncountable:{}};e(n,r.uncountable),t(n,r.irregularPairs)}var n=/^\s*$/;r.prototype={plural:function(e,t){this.rules.plurals.push([e,t.toLowerCase()])},singular:function(e,t){this.rules.singular.push([e,t.toLowerCase()])},uncountable:function(t){e(this.rules,[t.toLowerCase()])},irregular:function(e,r){t(this.rules,[[e,r]])},pluralize:function(e){return this.inflect(e,this.rules.plurals,this.rules.irregular)},singularize:function(e){return this.inflect(e,this.rules.singular,this.rules.irregularInverse)},inflect:function(e,t,r){var i,a,o,s,d,u,c,l;if(d=n.test(e))return e;if(s=e.toLowerCase(),u=this.rules.uncountable[s])return e;if(c=r&&r[s])return c;for(var h=t.length,p=0;h>p&&(i=t[h-1],l=i[0],!l.test(e));h--);return i=i||[],l=i[0],a=i[1],o=e.replace(l,a)}},Ember.Inflector=r}(),function(){Ember.Inflector.defaultRules={plurals:[[/$/,"s"],[/s$/i,"s"],[/^(ax|test)is$/i,"$1es"],[/(octop|vir)us$/i,"$1i"],[/(octop|vir)i$/i,"$1i"],[/(alias|status)$/i,"$1es"],[/(bu)s$/i,"$1ses"],[/(buffal|tomat)o$/i,"$1oes"],[/([ti])um$/i,"$1a"],[/([ti])a$/i,"$1a"],[/sis$/i,"ses"],[/(?:([^f])fe|([lr])f)$/i,"$1$2ves"],[/(hive)$/i,"$1s"],[/([^aeiouy]|qu)y$/i,"$1ies"],[/(x|ch|ss|sh)$/i,"$1es"],[/(matr|vert|ind)(?:ix|ex)$/i,"$1ices"],[/^(m|l)ouse$/i,"$1ice"],[/^(m|l)ice$/i,"$1ice"],[/^(ox)$/i,"$1en"],[/^(oxen)$/i,"$1"],[/(quiz)$/i,"$1zes"]],singular:[[/s$/i,""],[/(ss)$/i,"$1"],[/(n)ews$/i,"$1ews"],[/([ti])a$/i,"$1um"],[/((a)naly|(b)a|(d)iagno|(p)arenthe|(p)rogno|(s)ynop|(t)he)(sis|ses)$/i,"$1sis"],[/(^analy)(sis|ses)$/i,"$1sis"],[/([^f])ves$/i,"$1fe"],[/(hive)s$/i,"$1"],[/(tive)s$/i,"$1"],[/([lr])ves$/i,"$1f"],[/([^aeiouy]|qu)ies$/i,"$1y"],[/(s)eries$/i,"$1eries"],[/(m)ovies$/i,"$1ovie"],[/(x|ch|ss|sh)es$/i,"$1"],[/^(m|l)ice$/i,"$1ouse"],[/(bus)(es)?$/i,"$1"],[/(o)es$/i,"$1"],[/(shoe)s$/i,"$1"],[/(cris|test)(is|es)$/i,"$1is"],[/^(a)x[ie]s$/i,"$1xis"],[/(octop|vir)(us|i)$/i,"$1us"],[/(alias|status)(es)?$/i,"$1"],[/^(ox)en/i,"$1"],[/(vert|ind)ices$/i,"$1ex"],[/(matr)ices$/i,"$1ix"],[/(quiz)zes$/i,"$1"],[/(database)s$/i,"$1"]],irregularPairs:[["person","people"],["man","men"],["child","children"],["sex","sexes"],["move","moves"],["cow","kine"],["zombie","zombies"]],uncountable:["equipment","information","rice","money","species","series","fish","sheep","jeans","police"]}
        }(),function(){(Ember.EXTEND_PROTOTYPES===!0||Ember.EXTEND_PROTOTYPES.String)&&(String.prototype.pluralize=function(){return Ember.String.pluralize(this)},String.prototype.singularize=function(){return Ember.String.singularize(this)})}(),function(){Ember.Inflector.inflector=new Ember.Inflector(Ember.Inflector.defaultRules)}(),function(){var e=Ember.get,t=Ember.EnumerableUtils.forEach,r=Ember.String.camelize,n=Ember.String.capitalize,i=Ember.String.decamelize,a=Ember.String.singularize,o=Ember.String.underscore;DS.ActiveModelSerializer=DS.RESTSerializer.extend({keyForAttribute:function(e){return i(e)},keyForRelationship:function(e,t){return e=i(e),"belongsTo"===t?e+"_id":"hasMany"===t?a(e)+"_ids":e},serializeHasMany:Ember.K,serializeIntoHash:function(e,t,r,n){var a=o(i(t.typeKey));e[a]=this.serialize(r,n)},serializePolymorphicType:function(t,i,a){var o=a.key,s=e(t,o);o=this.keyForAttribute(o),i[o+"_type"]=n(r(s.constructor.typeKey))},typeForRoot:function(e){var t=r(e);return a(t)},normalize:function(e,t,r){return this.normalizeLinks(t),this._super(e,t,r)},normalizeLinks:function(e){if(e.links){var t=e.links;for(var n in t){var i=r(n);i!==n&&(t[i]=t[n],delete t[n])}}},normalizeRelationships:function(e,r){var n,i;this.keyForRelationship&&e.eachRelationship(function(e,a){if(a.options.polymorphic){if(n=this.keyForAttribute(e),i=r[n],i&&i.type)i.type=this.typeForRoot(i.type);else if(i&&"hasMany"===a.kind){var o=this;t(i,function(e){e.type=o.typeForRoot(e.type)})}}else n=this.keyForRelationship(e,a.kind),i=r[n];r[e]=i,e!==n&&delete r[n]},this)}})}(),function(){function e(n,i,a,o,s){var d=t(i,"attrs");d&&a.eachRelationship(function(i,a){var u,c,l,h,p=d[i],f=n.serializerFor(a.type.typeKey),m=t(f,"primaryKey");if("hasMany"===a.kind&&p&&("always"===p.embedded||"load"===p.embedded)){if(c="_"+Ember.String.pluralize(a.type.typeKey),u=this.keyForRelationship(i,a.kind),l=this.keyForAttribute(i),h=[],!o[l])return;s[c]=s[c]||[],r(o[l],function(t){var r=n.modelFor(a.type.typeKey);e(n,f,r,t,s),h.push(t[m]),s[c].push(t)}),o[u]=h,delete o[l]}},i)}var t=Ember.get,r=Ember.EnumerableUtils.forEach;DS.EmbeddedRecordsMixin=Ember.Mixin.create({serializeHasMany:function(e,r,n){var i=n.key,a=t(this,"attrs"),o=a&&a[i]&&"always"===a[i].embedded;o&&(r[this.keyForAttribute(i)]=t(e,i).map(function(e){var r=e.serialize(),n=t(this,"primaryKey");return r[n]=t(e,n),r},this))},extractSingle:function(t,r,n,i,a){var o=this.keyForAttribute(r.typeKey),s=n[o];return e(t,this,r,s,n),this._super(t,r,n,i,a)},extractArray:function(t,n,i){var a=this.keyForAttribute(n.typeKey),o=i[Ember.String.pluralize(a)];return r(o,function(r){e(t,this,n,r,i)},this),this._super(t,n,i)}})}(),function(){var e=Ember.EnumerableUtils.forEach,t=Ember.String.decamelize,r=Ember.String.underscore,n=Ember.String.pluralize;DS.ActiveModelAdapter=DS.RESTAdapter.extend({defaultSerializer:"-active-model",pathForType:function(e){var i=t(e),a=r(i);return n(a)},ajaxError:function(t){var r=this._super(t);if(t&&422===t.status){var n=Ember.$.parseJSON(t.responseText),i={};if(void 0!==n.errors){var a=n.errors;e(Ember.keys(a),function(e){i[Ember.String.camelize(e)]=a[e]})}return new DS.InvalidError(i)}return r}})}(),function(){Ember.onLoad("Ember.Application",function(e){e.initializer({name:"activeModelAdapter",initialize:function(e,t){var r=new DS.ContainerProxy(e);r.registerDeprecations([{deprecated:"serializer:_ams",valid:"serializer:-active-model"},{deprecated:"adapter:_ams",valid:"adapter:-active-model"}]),t.register("serializer:-active-model",DS.ActiveModelSerializer),t.register("adapter:-active-model",DS.ActiveModelAdapter)}})})}()}(),"undefined"==typeof location||"localhost"!==location.hostname&&"127.0.0.1"!==location.hostname||Ember.Logger.warn("You are running a production build of Ember on localhost and won't receive detailed error messages. If you want full error messages please use the non-minified build provided on the Ember website.");
    http_version: 
  recorded_at: Mon, 17 Feb 2014 11:45:51 GMT
recorded_with: VCR 2.8.0
