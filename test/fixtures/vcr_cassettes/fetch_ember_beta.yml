---
http_interactions:
- request:
    method: get
    uri: http://builds.emberjs.com/beta/ember-data.js
    body:
      encoding: US-ASCII
      string: ''
    headers:
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - '*/*'
      User-Agent:
      - Ruby
      Host:
      - builds.emberjs.com
  response:
    status:
      code: 200
      message: OK
    headers:
      X-Amz-Id-2:
      - EqJNLOiuj9KP0f8g6Ia70sBXxamim+Mk3d9wD3c3WMAxMTePx8+pYmI3+aJ9zWfk
      X-Amz-Request-Id:
      - 961EE02CE9A84E17
      Date:
      - Mon, 17 Feb 2014 11:44:55 GMT
      Last-Modified:
      - Sun, 26 Jan 2014 02:03:33 GMT
      Etag:
      - '"4e6b873fdc5cf10ec70bef695bf07589"'
      Content-Type:
      - text/javascript
      Content-Length:
      - '280957'
      Server:
      - AmazonS3
    body:
      encoding: ASCII-8BIT
      string: !binary |-
        LyohCiAqIEBvdmVydmlldyAgRW1iZXIgRGF0YQogKiBAY29weXJpZ2h0IENv
        cHlyaWdodCAyMDExLTIwMTQgVGlsZGUgSW5jLiBhbmQgY29udHJpYnV0b3Jz
        LgogKiAgICAgICAgICAgIFBvcnRpb25zIENvcHlyaWdodCAyMDExIExpdmlu
        Z1NvY2lhbCBJbmMuCiAqIEBsaWNlbnNlICAgTGljZW5zZWQgdW5kZXIgTUlU
        IGxpY2Vuc2UgKHNlZSBsaWNlbnNlLmpzKQogKiBAdmVyc2lvbiAgIDEuMC4w
        LWJldGEuNgogKi8KCgooZnVuY3Rpb24oKSB7CnZhciBkZWZpbmUsIHJlcXVp
        cmVNb2R1bGU7CgooZnVuY3Rpb24oKSB7CiAgdmFyIHJlZ2lzdHJ5ID0ge30s
        IHNlZW4gPSB7fTsKCiAgZGVmaW5lID0gZnVuY3Rpb24obmFtZSwgZGVwcywg
        Y2FsbGJhY2spIHsKICAgIHJlZ2lzdHJ5W25hbWVdID0geyBkZXBzOiBkZXBz
        LCBjYWxsYmFjazogY2FsbGJhY2sgfTsKICB9OwoKICByZXF1aXJlTW9kdWxl
        ID0gZnVuY3Rpb24obmFtZSkgewogICAgaWYgKHNlZW5bbmFtZV0pIHsgcmV0
        dXJuIHNlZW5bbmFtZV07IH0KICAgIHNlZW5bbmFtZV0gPSB7fTsKCiAgICB2
        YXIgbW9kLCBkZXBzLCBjYWxsYmFjaywgcmVpZmllZCAsIGV4cG9ydHM7Cgog
        ICAgbW9kID0gcmVnaXN0cnlbbmFtZV07CgogICAgaWYgKCFtb2QpIHsKICAg
        ICAgdGhyb3cgbmV3IEVycm9yKCJNb2R1bGUgJyIgKyBuYW1lICsgIicgbm90
        IGZvdW5kLiIpOwogICAgfQoKICAgIGRlcHMgPSBtb2QuZGVwczsKICAgIGNh
        bGxiYWNrID0gbW9kLmNhbGxiYWNrOwogICAgcmVpZmllZCA9IFtdOwogICAg
        ZXhwb3J0czsKCiAgICBmb3IgKHZhciBpPTAsIGw9ZGVwcy5sZW5ndGg7IGk8
        bDsgaSsrKSB7CiAgICAgIGlmIChkZXBzW2ldID09PSAnZXhwb3J0cycpIHsK
        ICAgICAgICByZWlmaWVkLnB1c2goZXhwb3J0cyA9IHt9KTsKICAgICAgfSBl
        bHNlIHsKICAgICAgICByZWlmaWVkLnB1c2gocmVxdWlyZU1vZHVsZShkZXBz
        W2ldKSk7CiAgICAgIH0KICAgIH0KCiAgICB2YXIgdmFsdWUgPSBjYWxsYmFj
        ay5hcHBseSh0aGlzLCByZWlmaWVkKTsKICAgIHJldHVybiBzZWVuW25hbWVd
        ID0gZXhwb3J0cyB8fCB2YWx1ZTsKICB9Owp9KSgpOwooZnVuY3Rpb24oKSB7
        Ci8qKgogIEBtb2R1bGUgZW1iZXItZGF0YQoqLwoKLyoqCiAgQWxsIEVtYmVy
        IERhdGEgbWV0aG9kcyBhbmQgZnVuY3Rpb25zIGFyZSBkZWZpbmVkIGluc2lk
        ZSBvZiB0aGlzIG5hbWVzcGFjZS4KCiAgQGNsYXNzIERTCiAgQHN0YXRpYwoq
        Lwp2YXIgRFM7CmlmICgndW5kZWZpbmVkJyA9PT0gdHlwZW9mIERTKSB7CiAg
        LyoqCiAgICBAcHJvcGVydHkgVkVSU0lPTgogICAgQHR5cGUgU3RyaW5nCiAg
        ICBAZGVmYXVsdCAnMS4wLjAtYmV0YS42JwogICAgQHN0YXRpYwogICovCiAg
        RFMgPSBFbWJlci5OYW1lc3BhY2UuY3JlYXRlKHsKICAgIFZFUlNJT046ICcx
        LjAuMC1iZXRhLjYnCiAgfSk7CgogIGlmICgndW5kZWZpbmVkJyAhPT0gdHlw
        ZW9mIHdpbmRvdykgewogICAgd2luZG93LkRTID0gRFM7CiAgfQoKICBpZiAo
        RW1iZXIubGlicmFyaWVzKSB7CiAgICBFbWJlci5saWJyYXJpZXMucmVnaXN0
        ZXJDb3JlTGlicmFyeSgnRW1iZXIgRGF0YScsIERTLlZFUlNJT04pOwogIH0K
        fQoKfSkoKTsKCgoKKGZ1bmN0aW9uKCkgewovKioKICBUaGlzIGlzIHVzZWQg
        aW50ZXJuYWxseSB0byBlbmFibGUgZGVwcmVjYXRpb24gb2YgY29udGFpbmVy
        IHBhdGhzIGFuZCBwcm92aWRlCiAgYSBkZWNlbnQgbWVzc2FnZSB0byB0aGUg
        dXNlciBpbmRpY2F0aW5nIGhvdyB0byBmaXggdGhlIGlzc3VlLgoKICBAY2xh
        c3MgQ29udGFpbmVyUHJveHkKICBAbmFtZXNwYWNlIERTCiAgQHByaXZhdGUK
        Ki8KdmFyIENvbnRhaW5lclByb3h5ID0gZnVuY3Rpb24gKGNvbnRhaW5lcil7
        CiAgdGhpcy5jb250YWluZXIgPSBjb250YWluZXI7Cn07CgpDb250YWluZXJQ
        cm94eS5wcm90b3R5cGUuYWxpYXNlZEZhY3RvcnkgPSBmdW5jdGlvbihwYXRo
        LCBwcmVMb29rdXApIHsKICB2YXIgX3RoaXMgPSB0aGlzOwoKICByZXR1cm4g
        e2NyZWF0ZTogZnVuY3Rpb24oKXsgCiAgICBpZiAocHJlTG9va3VwKSB7IHBy
        ZUxvb2t1cCgpOyB9CgogICAgcmV0dXJuIF90aGlzLmNvbnRhaW5lci5sb29r
        dXAocGF0aCk7IAogIH19Owp9OwoKQ29udGFpbmVyUHJveHkucHJvdG90eXBl
        LnJlZ2lzdGVyQWxpYXMgPSBmdW5jdGlvbihzb3VyY2UsIGRlc3QsIHByZUxv
        b2t1cCkgewogIHZhciBmYWN0b3J5ID0gdGhpcy5hbGlhc2VkRmFjdG9yeShk
        ZXN0LCBwcmVMb29rdXApOwoKICByZXR1cm4gdGhpcy5jb250YWluZXIucmVn
        aXN0ZXIoc291cmNlLCBmYWN0b3J5KTsKfTsKCkNvbnRhaW5lclByb3h5LnBy
        b3RvdHlwZS5yZWdpc3RlckRlcHJlY2F0aW9uID0gZnVuY3Rpb24oZGVwcmVj
        YXRlZCwgdmFsaWQpIHsKICB2YXIgcHJlTG9va3VwQ2FsbGJhY2sgPSBmdW5j
        dGlvbigpewogICAgRW1iZXIuZGVwcmVjYXRlKCJZb3UgdHJpZWQgdG8gbG9v
        ayB1cCAnIiArIGRlcHJlY2F0ZWQgKyAiJywgIiArCiAgICAgICAgICAgICAg
        ICAgICAgImJ1dCB0aGlzIGhhcyBiZWVuIGRlcHJlY2F0ZWQgaW4gZmF2b3Ig
        b2YgJyIgKyB2YWxpZCArICInLiIsIGZhbHNlKTsKICB9OwoKICByZXR1cm4g
        dGhpcy5yZWdpc3RlckFsaWFzKGRlcHJlY2F0ZWQsIHZhbGlkLCBwcmVMb29r
        dXBDYWxsYmFjayk7Cn07CgpDb250YWluZXJQcm94eS5wcm90b3R5cGUucmVn
        aXN0ZXJEZXByZWNhdGlvbnMgPSBmdW5jdGlvbihwcm94eVBhaXJzKSB7CiAg
        Zm9yICh2YXIgaSA9IHByb3h5UGFpcnMubGVuZ3RoOyBpID4gMDsgaS0tKSB7
        CiAgICB2YXIgcHJveHlQYWlyID0gcHJveHlQYWlyc1tpIC0gMV0sCiAgICAg
        ICAgZGVwcmVjYXRlZCA9IHByb3h5UGFpclsnZGVwcmVjYXRlZCddLAogICAg
        ICAgIHZhbGlkID0gcHJveHlQYWlyWyd2YWxpZCddOwoKICAgIHRoaXMucmVn
        aXN0ZXJEZXByZWNhdGlvbihkZXByZWNhdGVkLCB2YWxpZCk7CiAgfQp9OwoK
        RFMuQ29udGFpbmVyUHJveHkgPSBDb250YWluZXJQcm94eTsKCn0pKCk7CgoK
        CihmdW5jdGlvbigpIHsKdmFyIGdldCA9IEVtYmVyLmdldCwgc2V0ID0gRW1i
        ZXIuc2V0LCBpc05vbmUgPSBFbWJlci5pc05vbmU7CgovLyBTaW1wbGUgZGlz
        cGF0Y2hlciB0byBzdXBwb3J0IG92ZXJyaWRpbmcgdGhlIGFsaWFzZWQKLy8g
        bWV0aG9kIGluIHN1YmNsYXNzZXMuCmZ1bmN0aW9uIGFsaWFzTWV0aG9kKG1l
        dGhvZE5hbWUpIHsKICByZXR1cm4gZnVuY3Rpb24oKSB7CiAgICByZXR1cm4g
        dGhpc1ttZXRob2ROYW1lXS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogIH07
        Cn0KCi8qKgogIEluIEVtYmVyIERhdGEgYSBTZXJpYWxpemVyIGlzIHVzZWQg
        dG8gc2VyaWFsaXplIGFuZCBkZXNlcmlhbGl6ZQogIHJlY29yZHMgd2hlbiB0
        aGV5IGFyZSB0cmFuc2ZlcnJlZCBpbiBhbmQgb3V0IG9mIGFuIGV4dGVybmFs
        IHNvdXJjZS4KICBUaGlzIHByb2Nlc3MgaW52b2x2ZXMgbm9ybWFsaXppbmcg
        cHJvcGVydHkgbmFtZXMsIHRyYW5zZm9ybWluZwogIGF0dHJpYnV0ZSB2YWx1
        ZXMgYW5kIHNlcmlhbGl6aW5nIHJlbGF0aW9uc2hpcHMuCgogIEZvciBtYXhp
        bXVtIHBlcmZvcm1hbmNlIEVtYmVyIERhdGEgcmVjb21tZW5kcyB5b3UgdXNl
        IHRoZQogIFtSRVNUU2VyaWFsaXplcl0oRFMuUkVTVFNlcmlhbGl6ZXIuaHRt
        bCkgb3Igb25lIG9mIGl0cyBzdWJjbGFzc2VzLgoKICBgSlNPTlNlcmlhbGl6
        ZXJgIGlzIHVzZWZ1bCBmb3Igc2ltcGxlciBvciBsZWdhY3kgYmFja2VuZHMg
        dGhhdCBtYXkKICBub3Qgc3VwcG9ydCB0aGUgaHR0cDovL2pzb25hcGkub3Jn
        LyBzcGVjLgoKICBAY2xhc3MgSlNPTlNlcmlhbGl6ZXIKICBAbmFtZXNwYWNl
        IERTCiovCkRTLkpTT05TZXJpYWxpemVyID0gRW1iZXIuT2JqZWN0LmV4dGVu
        ZCh7CiAgLyoqCiAgICBUaGUgcHJpbWFyeUtleSBpcyB1c2VkIHdoZW4gc2Vy
        aWFsaXppbmcgYW5kIGRlc2VyaWFsaXppbmcKICAgIGRhdGEuIEVtYmVyIERh
        dGEgYWx3YXlzIHVzZXMgdGhlIGBpZGAgcHJvcGVydHkgdG8gc3RvcmUgdGhl
        IGlkIG9mCiAgICB0aGUgcmVjb3JkLiBUaGUgZXh0ZXJuYWwgc291cmNlIG1h
        eSBub3QgYWx3YXlzIGZvbGxvdyB0aGlzCiAgICBjb252ZW50aW9uLiBJbiB0
        aGVzZSBjYXNlcyBpdCBpcyB1c2VmdWwgdG8gb3ZlcnJpZGUgdGhlCiAgICBw
        cmltYXJ5S2V5IHByb3BlcnR5IHRvIG1hdGNoIHRoZSBwcmltYXJ5S2V5IG9m
        IHlvdXIgZXh0ZXJuYWwKICAgIHN0b3JlLgoKICAgIEV4YW1wbGUKCiAgICBg
        YGBqYXZhc2NyaXB0CiAgICBBcHAuQXBwbGljYXRpb25TZXJpYWxpemVyID0g
        RFMuSlNPTlNlcmlhbGl6ZXIuZXh0ZW5kKHsKICAgICAgcHJpbWFyeUtleTog
        J19pZCcKICAgIH0pOwogICAgYGBgCgogICAgQHByb3BlcnR5IHByaW1hcnlL
        ZXkKICAgIEB0eXBlIHtTdHJpbmd9CiAgICBAZGVmYXVsdCAnaWQnCiAgKi8K
        ICBwcmltYXJ5S2V5OiAnaWQnLAoKICAvKioKICAgR2l2ZW4gYSBzdWJjbGFz
        cyBvZiBgRFMuTW9kZWxgIGFuZCBhIEpTT04gb2JqZWN0IHRoaXMgbWV0aG9k
        IHdpbGwKICAgaXRlcmF0ZSB0aHJvdWdoIGVhY2ggYXR0cmlidXRlIG9mIHRo
        ZSBgRFMuTW9kZWxgIGFuZCBpbnZva2UgdGhlCiAgIGBEUy5UcmFuc2Zvcm0j
        ZGVzZXJpYWxpemVgIG1ldGhvZCBvbiB0aGUgbWF0Y2hpbmcgcHJvcGVydHkg
        b2YgdGhlCiAgIEpTT04gb2JqZWN0LiAgVGhpcyBtZXRob2QgaXMgdHlwaWNh
        bGx5IGNhbGxlZCBhZnRlciB0aGUKICAgc2VyaWFsaXplcidzIGBub3JtYWxp
        emVgIG1ldGhvZC4KCiAgIEBtZXRob2QgYXBwbHlUcmFuc2Zvcm1zCiAgIEBw
        cml2YXRlCiAgIEBwYXJhbSB7c3ViY2xhc3Mgb2YgRFMuTW9kZWx9IHR5cGUK
        ICAgQHBhcmFtIHtPYmplY3R9IGRhdGEgVGhlIGRhdGEgdG8gdHJhbnNmb3Jt
        CiAgIEByZXR1cm4ge09iamVjdH0gZGF0YSBUaGUgdHJhbnNmb3JtZWQgZGF0
        YSBvYmplY3QKICAqLwogIGFwcGx5VHJhbnNmb3JtczogZnVuY3Rpb24odHlw
        ZSwgZGF0YSkgewogICAgdHlwZS5lYWNoVHJhbnNmb3JtZWRBdHRyaWJ1dGUo
        ZnVuY3Rpb24oa2V5LCB0eXBlKSB7CiAgICAgIHZhciB0cmFuc2Zvcm0gPSB0
        aGlzLnRyYW5zZm9ybUZvcih0eXBlKTsKICAgICAgZGF0YVtrZXldID0gdHJh
        bnNmb3JtLmRlc2VyaWFsaXplKGRhdGFba2V5XSk7CiAgICB9LCB0aGlzKTsK
        CiAgICByZXR1cm4gZGF0YTsKICB9LAoKICAvKioKICAgIE5vcm1hbGl6ZXMg
        YSBwYXJ0IG9mIHRoZSBKU09OIHBheWxvYWQgcmV0dXJuZWQgYnkKICAgIHRo
        ZSBzZXJ2ZXIuIFlvdSBzaG91bGQgb3ZlcnJpZGUgdGhpcyBtZXRob2QsIG11
        bmdlIHRoZSBoYXNoCiAgICBhbmQgY2FsbCBzdXBlciBpZiB5b3UgaGF2ZSBn
        ZW5lcmljIG5vcm1hbGl6YXRpb24gdG8gZG8uCgogICAgSXQgdGFrZXMgdGhl
        IHR5cGUgb2YgdGhlIHJlY29yZCB0aGF0IGlzIGJlaW5nIG5vcm1hbGl6ZWQK
        ICAgIChhcyBhIERTLk1vZGVsIGNsYXNzKSwgdGhlIHByb3BlcnR5IHdoZXJl
        IHRoZSBoYXNoIHdhcwogICAgb3JpZ2luYWxseSBmb3VuZCwgYW5kIHRoZSBo
        YXNoIHRvIG5vcm1hbGl6ZS4KCiAgICBZb3UgY2FuIHVzZSB0aGlzIG1ldGhv
        ZCwgZm9yIGV4YW1wbGUsIHRvIG5vcm1hbGl6ZSB1bmRlcnNjb3JlZCBrZXlz
        IHRvIGNhbWVsaXplZAogICAgb3Igb3RoZXIgZ2VuZXJhbC1wdXJwb3NlIG5v
        cm1hbGl6YXRpb25zLgoKICAgIEV4YW1wbGUKCiAgICBgYGBqYXZhc2NyaXB0
        CiAgICBBcHAuQXBwbGljYXRpb25TZXJpYWxpemVyID0gRFMuSlNPTlNlcmlh
        bGl6ZXIuZXh0ZW5kKHsKICAgICAgbm9ybWFsaXplOiBmdW5jdGlvbih0eXBl
        LCBoYXNoKSB7CiAgICAgICAgdmFyIGZpZWxkcyA9IEVtYmVyLmdldCh0eXBl
        LCAnZmllbGRzJyk7CiAgICAgICAgZmllbGRzLmZvckVhY2goZnVuY3Rpb24o
        ZmllbGQpIHsKICAgICAgICAgIHZhciBwYXlsb2FkRmllbGQgPSBFbWJlci5T
        dHJpbmcudW5kZXJzY29yZShmaWVsZCk7CiAgICAgICAgICBpZiAoZmllbGQg
        PT09IHBheWxvYWRGaWVsZCkgeyByZXR1cm47IH0KCiAgICAgICAgICBoYXNo
        W2ZpZWxkXSA9IGhhc2hbcGF5bG9hZEZpZWxkXTsKICAgICAgICAgIGRlbGV0
        ZSBoYXNoW3BheWxvYWRGaWVsZF07CiAgICAgICAgfSk7CiAgICAgICAgcmV0
        dXJuIHRoaXMuX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAg
        IH0KICAgIH0pOwogICAgYGBgCgogICAgQG1ldGhvZCBub3JtYWxpemUKICAg
        IEBwYXJhbSB7c3ViY2xhc3Mgb2YgRFMuTW9kZWx9IHR5cGUKICAgIEBwYXJh
        bSB7T2JqZWN0fSBoYXNoCiAgICBAcmV0dXJuIHtPYmplY3R9CiAgKi8KICBu
        b3JtYWxpemU6IGZ1bmN0aW9uKHR5cGUsIGhhc2gpIHsKICAgIGlmICghaGFz
        aCkgeyByZXR1cm4gaGFzaDsgfQoKICAgIHRoaXMuYXBwbHlUcmFuc2Zvcm1z
        KHR5cGUsIGhhc2gpOwogICAgcmV0dXJuIGhhc2g7CiAgfSwKCiAgLy8gU0VS
        SUFMSVpFCiAgLyoqCiAgICBDYWxsZWQgd2hlbiBhIHJlY29yZCBpcyBzYXZl
        ZCBpbiBvcmRlciB0byBjb252ZXJ0IHRoZQogICAgcmVjb3JkIGludG8gSlNP
        Ti4KCiAgICBCeSBkZWZhdWx0LCBpdCBjcmVhdGVzIGEgSlNPTiBvYmplY3Qg
        d2l0aCBhIGtleSBmb3IKICAgIGVhY2ggYXR0cmlidXRlIGFuZCBiZWxvbmdz
        VG8gcmVsYXRpb25zaGlwLgoKICAgIEZvciBleGFtcGxlLCBjb25zaWRlciB0
        aGlzIG1vZGVsOgoKICAgIGBgYGphdmFzY3JpcHQKICAgIEFwcC5Db21tZW50
        ID0gRFMuTW9kZWwuZXh0ZW5kKHsKICAgICAgdGl0bGU6IERTLmF0dHIoKSwK
        ICAgICAgYm9keTogRFMuYXR0cigpLAoKICAgICAgYXV0aG9yOiBEUy5iZWxv
        bmdzVG8oJ3VzZXInKQogICAgfSk7CiAgICBgYGAKCiAgICBUaGUgZGVmYXVs
        dCBzZXJpYWxpemF0aW9uIHdvdWxkIGNyZWF0ZSBhIEpTT04gb2JqZWN0IGxp
        a2U6CgogICAgYGBgamF2YXNjcmlwdAogICAgewogICAgICAidGl0bGUiOiAi
        UmFpbHMgaXMgdW5hZ2kiLAogICAgICAiYm9keSI6ICJSYWlscz8gT21ha2Fz
        ZT8gT19PIiwKICAgICAgImF1dGhvciI6IDEyCiAgICB9CiAgICBgYGAKCiAg
        ICBCeSBkZWZhdWx0LCBhdHRyaWJ1dGVzIGFyZSBwYXNzZWQgdGhyb3VnaCBh
        cy1pcywgdW5sZXNzCiAgICB5b3Ugc3BlY2lmaWVkIGFuIGF0dHJpYnV0ZSB0
        eXBlIChgRFMuYXR0cignZGF0ZScpYCkuIElmCiAgICB5b3Ugc3BlY2lmeSBh
        IHRyYW5zZm9ybSwgdGhlIEphdmFTY3JpcHQgdmFsdWUgd2lsbCBiZQogICAg
        c2VyaWFsaXplZCB3aGVuIGluc2VydGVkIGludG8gdGhlIEpTT04gaGFzaC4K
        CiAgICBCeSBkZWZhdWx0LCBiZWxvbmdzLXRvIHJlbGF0aW9uc2hpcHMgYXJl
        IGNvbnZlcnRlZCBpbnRvCiAgICBJRHMgd2hlbiBpbnNlcnRlZCBpbnRvIHRo
        ZSBKU09OIGhhc2guCgogICAgIyMgSURzCgogICAgYHNlcmlhbGl6ZWAgdGFr
        ZXMgYW4gb3B0aW9ucyBoYXNoIHdpdGggYSBzaW5nbGUgb3B0aW9uOgogICAg
        YGluY2x1ZGVJZGAuIElmIHRoaXMgb3B0aW9uIGlzIGB0cnVlYCwgYHNlcmlh
        bGl6ZWAgd2lsbCwKICAgIGJ5IGRlZmF1bHQgaW5jbHVkZSB0aGUgSUQgaW4g
        dGhlIEpTT04gb2JqZWN0IGl0IGJ1aWxkcy4KCiAgICBUaGUgYWRhcHRlciBw
        YXNzZXMgaW4gYGluY2x1ZGVJZDogdHJ1ZWAgd2hlbiBzZXJpYWxpemluZwog
        ICAgYSByZWNvcmQgZm9yIGBjcmVhdGVSZWNvcmRgLCBidXQgbm90IGZvciBg
        dXBkYXRlUmVjb3JkYC4KCiAgICAjIyBDdXN0b21pemF0aW9uCgogICAgWW91
        ciBzZXJ2ZXIgbWF5IGV4cGVjdCBhIGRpZmZlcmVudCBKU09OIGZvcm1hdCB0
        aGFuIHRoZQogICAgYnVpbHQtaW4gc2VyaWFsaXphdGlvbiBmb3JtYXQuCgog
        ICAgSW4gdGhhdCBjYXNlLCB5b3UgY2FuIGltcGxlbWVudCBgc2VyaWFsaXpl
        YCB5b3Vyc2VsZiBhbmQKICAgIHJldHVybiBhIEpTT04gaGFzaCBvZiB5b3Vy
        IGNob29zaW5nLgoKICAgIGBgYGphdmFzY3JpcHQKICAgIEFwcC5Qb3N0U2Vy
        aWFsaXplciA9IERTLkpTT05TZXJpYWxpemVyLmV4dGVuZCh7CiAgICAgIHNl
        cmlhbGl6ZTogZnVuY3Rpb24ocG9zdCwgb3B0aW9ucykgewogICAgICAgIHZh
        ciBqc29uID0gewogICAgICAgICAgUE9TVF9UVEw6IHBvc3QuZ2V0KCd0aXRs
        ZScpLAogICAgICAgICAgUE9TVF9CRFk6IHBvc3QuZ2V0KCdib2R5JyksCiAg
        ICAgICAgICBQT1NUX0NNUzogcG9zdC5nZXQoJ2NvbW1lbnRzJykubWFwUHJv
        cGVydHkoJ2lkJykKICAgICAgICB9CgogICAgICAgIGlmIChvcHRpb25zLmlu
        Y2x1ZGVJZCkgewogICAgICAgICAganNvbi5QT1NUX0lEXyA9IHBvc3QuZ2V0
        KCdpZCcpOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIGpzb247CiAgICAg
        IH0KICAgIH0pOwogICAgYGBgCgogICAgIyMgQ3VzdG9taXppbmcgYW4gQXBw
        LVdpZGUgU2VyaWFsaXplcgoKICAgIElmIHlvdSB3YW50IHRvIGRlZmluZSBh
        IHNlcmlhbGl6ZXIgZm9yIHlvdXIgZW50aXJlCiAgICBhcHBsaWNhdGlvbiwg
        eW91J2xsIHByb2JhYmx5IHdhbnQgdG8gdXNlIGBlYWNoQXR0cmlidXRlYAog
        ICAgYW5kIGBlYWNoUmVsYXRpb25zaGlwYCBvbiB0aGUgcmVjb3JkLgoKICAg
        IGBgYGphdmFzY3JpcHQKICAgIEFwcC5BcHBsaWNhdGlvblNlcmlhbGl6ZXIg
        PSBEUy5KU09OU2VyaWFsaXplci5leHRlbmQoewogICAgICBzZXJpYWxpemU6
        IGZ1bmN0aW9uKHJlY29yZCwgb3B0aW9ucykgewogICAgICAgIHZhciBqc29u
        ID0ge307CgogICAgICAgIHJlY29yZC5lYWNoQXR0cmlidXRlKGZ1bmN0aW9u
        KG5hbWUpIHsKICAgICAgICAgIGpzb25bc2VydmVyQXR0cmlidXRlTmFtZShu
        YW1lKV0gPSByZWNvcmQuZ2V0KG5hbWUpOwogICAgICAgIH0pCgogICAgICAg
        IHJlY29yZC5lYWNoUmVsYXRpb25zaGlwKGZ1bmN0aW9uKG5hbWUsIHJlbGF0
        aW9uc2hpcCkgewogICAgICAgICAgaWYgKHJlbGF0aW9uc2hpcC5raW5kID09
        PSAnaGFzTWFueScpIHsKICAgICAgICAgICAganNvbltzZXJ2ZXJIYXNNYW55
        TmFtZShuYW1lKV0gPSByZWNvcmQuZ2V0KG5hbWUpLm1hcEJ5KCdpZCcpOwog
        ICAgICAgICAgfQogICAgICAgIH0pOwoKICAgICAgICBpZiAob3B0aW9ucy5p
        bmNsdWRlSWQpIHsKICAgICAgICAgIGpzb24uSURfID0gcmVjb3JkLmdldCgn
        aWQnKTsKICAgICAgICB9CgogICAgICAgIHJldHVybiBqc29uOwogICAgICB9
        CiAgICB9KTsKCiAgICBmdW5jdGlvbiBzZXJ2ZXJBdHRyaWJ1dGVOYW1lKGF0
        dHJpYnV0ZSkgewogICAgICByZXR1cm4gYXR0cmlidXRlLnVuZGVyc2NvcmUo
        KS50b1VwcGVyQ2FzZSgpOwogICAgfQoKICAgIGZ1bmN0aW9uIHNlcnZlckhh
        c01hbnlOYW1lKG5hbWUpIHsKICAgICAgcmV0dXJuIHNlcnZlckF0dHJpYnV0
        ZU5hbWUobmFtZS5zaW5ndWxhcml6ZSgpKSArICJfSURTIjsKICAgIH0KICAg
        IGBgYAoKICAgIFRoaXMgc2VyaWFsaXplciB3aWxsIGdlbmVyYXRlIEpTT04g
        dGhhdCBsb29rcyBsaWtlIHRoaXM6CgogICAgYGBgamF2YXNjcmlwdAogICAg
        ewogICAgICAiVElUTEUiOiAiUmFpbHMgaXMgb21ha2FzZSIsCiAgICAgICJC
        T0RZIjogIlllcC4gT21ha2FzZS4iLAogICAgICAiQ09NTUVOVF9JRFMiOiBb
        IDEsIDIsIDMgXQogICAgfQogICAgYGBgCgogICAgIyMgVHdlYWtpbmcgdGhl
        IERlZmF1bHQgSlNPTgoKICAgIElmIHlvdSBqdXN0IHdhbnQgdG8gZG8gc29t
        ZSBzbWFsbCB0d2Vha3Mgb24gdGhlIGRlZmF1bHQgSlNPTiwKICAgIHlvdSBj
        YW4gY2FsbCBzdXBlciBmaXJzdCBhbmQgbWFrZSB0aGUgdHdlYWtzIG9uIHRo
        ZSByZXR1cm5lZAogICAgSlNPTi4KCiAgICBgYGBqYXZhc2NyaXB0CiAgICBB
        cHAuUG9zdFNlcmlhbGl6ZXIgPSBEUy5KU09OU2VyaWFsaXplci5leHRlbmQo
        ewogICAgICBzZXJpYWxpemU6IGZ1bmN0aW9uKHJlY29yZCwgb3B0aW9ucykg
        ewogICAgICAgIHZhciBqc29uID0gdGhpcy5fc3VwZXIuYXBwbHkodGhpcywg
        YXJndW1lbnRzKTsKCiAgICAgICAganNvbi5zdWJqZWN0ID0ganNvbi50aXRs
        ZTsKICAgICAgICBkZWxldGUganNvbi50aXRsZTsKCiAgICAgICAgcmV0dXJu
        IGpzb247CiAgICAgIH0KICAgIH0pOwogICAgYGBgCgogICAgQG1ldGhvZCBz
        ZXJpYWxpemUKICAgIEBwYXJhbSB7c3ViY2xhc3Mgb2YgRFMuTW9kZWx9IHJl
        Y29yZAogICAgQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMKICAgIEByZXR1cm4g
        e09iamVjdH0ganNvbgogICovCiAgc2VyaWFsaXplOiBmdW5jdGlvbihyZWNv
        cmQsIG9wdGlvbnMpIHsKICAgIHZhciBqc29uID0ge307CgogICAgaWYgKG9w
        dGlvbnMgJiYgb3B0aW9ucy5pbmNsdWRlSWQpIHsKICAgICAgdmFyIGlkID0g
        Z2V0KHJlY29yZCwgJ2lkJyk7CgogICAgICBpZiAoaWQpIHsKICAgICAgICBq
        c29uW2dldCh0aGlzLCAncHJpbWFyeUtleScpXSA9IGlkOwogICAgICB9CiAg
        ICB9CgogICAgcmVjb3JkLmVhY2hBdHRyaWJ1dGUoZnVuY3Rpb24oa2V5LCBh
        dHRyaWJ1dGUpIHsKICAgICAgdGhpcy5zZXJpYWxpemVBdHRyaWJ1dGUocmVj
        b3JkLCBqc29uLCBrZXksIGF0dHJpYnV0ZSk7CiAgICB9LCB0aGlzKTsKCiAg
        ICByZWNvcmQuZWFjaFJlbGF0aW9uc2hpcChmdW5jdGlvbihrZXksIHJlbGF0
        aW9uc2hpcCkgewogICAgICBpZiAocmVsYXRpb25zaGlwLmtpbmQgPT09ICdi
        ZWxvbmdzVG8nKSB7CiAgICAgICAgdGhpcy5zZXJpYWxpemVCZWxvbmdzVG8o
        cmVjb3JkLCBqc29uLCByZWxhdGlvbnNoaXApOwogICAgICB9IGVsc2UgaWYg
        KHJlbGF0aW9uc2hpcC5raW5kID09PSAnaGFzTWFueScpIHsKICAgICAgICB0
        aGlzLnNlcmlhbGl6ZUhhc01hbnkocmVjb3JkLCBqc29uLCByZWxhdGlvbnNo
        aXApOwogICAgICB9CiAgICB9LCB0aGlzKTsKCiAgICByZXR1cm4ganNvbjsK
        ICB9LAoKICAvKioKICAgYHNlcmlhbGl6ZUF0dHJpYnV0ZWAgY2FuIGJlIHVz
        ZWQgdG8gY3VzdG9taXplIGhvdyBgRFMuYXR0cmAKICAgcHJvcGVydGllcyBh
        cmUgc2VyaWFsaXplZAoKICAgRm9yIGV4YW1wbGUgaWYgeW91IHdhbnRlZCB0
        byBlbnN1cmUgYWxsIHlvdSBhdHRyaWJ1dGVzIHdlcmUgYWx3YXlzCiAgIHNl
        cmlhbGl6ZWQgYXMgcHJvcGVydGllcyBvbiBhbiBgYXR0cmlidXRlc2Agb2Jq
        ZWN0IHlvdSBjb3VsZAogICB3cml0ZToKCiAgIGBgYGphdmFzY3JpcHQKICAg
        QXBwLkFwcGxpY2F0aW9uU2VyaWFsaXplciA9IERTLkpTT05TZXJpYWxpemVy
        LmV4dGVuZCh7CiAgICAgc2VyaWFsaXplQXR0cmlidXRlOiBmdW5jdGlvbihy
        ZWNvcmQsIGpzb24sIGtleSwgYXR0cmlidXRlcykgewogICAgICAganNvbi5h
        dHRyaWJ1dGVzID0ganNvbi5hdHRyaWJ1dGVzIHx8IHt9OwogICAgICAgdGhp
        cy5fc3VwZXIocmVjb3JkLCBqc29uLmF0dHJpYnV0ZXMsIGtleSwgYXR0cmli
        dXRlcyk7CiAgICAgfQogICB9KTsKICAgYGBgCgogICBAbWV0aG9kIHNlcmlh
        bGl6ZUF0dHJpYnV0ZQogICBAcGFyYW0ge0RTLk1vZGVsfSByZWNvcmQKICAg
        QHBhcmFtIHtPYmplY3R9IGpzb24KICAgQHBhcmFtIHtTdHJpbmd9IGtleQog
        ICBAcGFyYW0ge09iamVjdH0gYXR0cmlidXRlCiAgKi8KICBzZXJpYWxpemVB
        dHRyaWJ1dGU6IGZ1bmN0aW9uKHJlY29yZCwganNvbiwga2V5LCBhdHRyaWJ1
        dGUpIHsKICAgIHZhciBhdHRycyA9IGdldCh0aGlzLCAnYXR0cnMnKTsKICAg
        IHZhciB2YWx1ZSA9IGdldChyZWNvcmQsIGtleSksIHR5cGUgPSBhdHRyaWJ1
        dGUudHlwZTsKCiAgICBpZiAodHlwZSkgewogICAgICB2YXIgdHJhbnNmb3Jt
        ID0gdGhpcy50cmFuc2Zvcm1Gb3IodHlwZSk7CiAgICAgIHZhbHVlID0gdHJh
        bnNmb3JtLnNlcmlhbGl6ZSh2YWx1ZSk7CiAgICB9CgogICAgLy8gaWYgcHJv
        dmlkZWQsIHVzZSB0aGUgbWFwcGluZyBwcm92aWRlZCBieSBgYXR0cnNgIGlu
        CiAgICAvLyB0aGUgc2VyaWFsaXplcgogICAga2V5ID0gYXR0cnMgJiYgYXR0
        cnNba2V5XSB8fCAodGhpcy5rZXlGb3JBdHRyaWJ1dGUgPyB0aGlzLmtleUZv
        ckF0dHJpYnV0ZShrZXkpIDoga2V5KTsKCiAgICBqc29uW2tleV0gPSB2YWx1
        ZTsKICB9LAoKICAvKioKICAgYHNlcmlhbGl6ZUJlbG9uZ3NUb2AgY2FuIGJl
        IHVzZWQgdG8gY3VzdG9taXplIGhvdyBgRFMuYmVsb25nc1RvYAogICBwcm9w
        ZXJ0aWVzIGFyZSBzZXJpYWxpemVkLgoKICAgRXhhbXBsZQoKICAgYGBgamF2
        YXNjcmlwdAogICBBcHAuUG9zdFNlcmlhbGl6ZXIgPSBEUy5KU09OU2VyaWFs
        aXplci5leHRlbmQoewogICAgIHNlcmlhbGl6ZUJlbG9uZ3NUbzogZnVuY3Rp
        b24ocmVjb3JkLCBqc29uLCByZWxhdGlvbnNoaXApIHsKICAgICAgIHZhciBr
        ZXkgPSByZWxhdGlvbnNoaXAua2V5OwoKICAgICAgIHZhciBiZWxvbmdzVG8g
        PSBnZXQocmVjb3JkLCBrZXkpOwoKICAgICAgIGtleSA9IHRoaXMua2V5Rm9y
        UmVsYXRpb25zaGlwID8gdGhpcy5rZXlGb3JSZWxhdGlvbnNoaXAoa2V5LCAi
        YmVsb25nc1RvIikgOiBrZXk7CgogICAgICAganNvbltrZXldID0gRW1iZXIu
        aXNOb25lKGJlbG9uZ3NUbykgPyBiZWxvbmdzVG8gOiBiZWxvbmdzVG8udG9K
        U09OKCk7CiAgICAgfQogICB9KTsKICAgYGBgCgogICBAbWV0aG9kIHNlcmlh
        bGl6ZUJlbG9uZ3NUbwogICBAcGFyYW0ge0RTLk1vZGVsfSByZWNvcmQKICAg
        QHBhcmFtIHtPYmplY3R9IGpzb24KICAgQHBhcmFtIHtPYmplY3R9IHJlbGF0
        aW9uc2hpcAogICovCiAgc2VyaWFsaXplQmVsb25nc1RvOiBmdW5jdGlvbihy
        ZWNvcmQsIGpzb24sIHJlbGF0aW9uc2hpcCkgewogICAgdmFyIGtleSA9IHJl
        bGF0aW9uc2hpcC5rZXk7CgogICAgdmFyIGJlbG9uZ3NUbyA9IGdldChyZWNv
        cmQsIGtleSk7CgogICAga2V5ID0gdGhpcy5rZXlGb3JSZWxhdGlvbnNoaXAg
        PyB0aGlzLmtleUZvclJlbGF0aW9uc2hpcChrZXksICJiZWxvbmdzVG8iKSA6
        IGtleTsKCiAgICBpZiAoaXNOb25lKGJlbG9uZ3NUbykpIHsKICAgICAganNv
        bltrZXldID0gYmVsb25nc1RvOwogICAgfSBlbHNlIHsKICAgICAganNvbltr
        ZXldID0gZ2V0KGJlbG9uZ3NUbywgJ2lkJyk7CiAgICB9CgogICAgaWYgKHJl
        bGF0aW9uc2hpcC5vcHRpb25zLnBvbHltb3JwaGljKSB7CiAgICAgIHRoaXMu
        c2VyaWFsaXplUG9seW1vcnBoaWNUeXBlKHJlY29yZCwganNvbiwgcmVsYXRp
        b25zaGlwKTsKICAgIH0KICB9LAoKICAvKioKICAgYHNlcmlhbGl6ZUhhc01h
        bnlgIGNhbiBiZSB1c2VkIHRvIGN1c3RvbWl6ZSBob3cgYERTLmhhc01hbnlg
        CiAgIHByb3BlcnRpZXMgYXJlIHNlcmlhbGl6ZWQuCgogICBFeGFtcGxlCgog
        ICBgYGBqYXZhc2NyaXB0CiAgIEFwcC5Qb3N0U2VyaWFsaXplciA9IERTLkpT
        T05TZXJpYWxpemVyLmV4dGVuZCh7CiAgICAgc2VyaWFsaXplSGFzTWFueTog
        ZnVuY3Rpb24ocmVjb3JkLCBqc29uLCByZWxhdGlvbnNoaXApIHsKICAgICAg
        IHZhciBrZXkgPSByZWxhdGlvbnNoaXAua2V5OwogICAgICAgaWYgKGtleSA9
        PT0gJ2NvbW1lbnRzJykgewogICAgICAgICByZXR1cm47CiAgICAgICB9IGVs
        c2UgewogICAgICAgICB0aGlzLl9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVu
        dHMpOwogICAgICAgfQogICAgIH0KICAgfSk7CiAgIGBgYAoKICAgQG1ldGhv
        ZCBzZXJpYWxpemVIYXNNYW55CiAgIEBwYXJhbSB7RFMuTW9kZWx9IHJlY29y
        ZAogICBAcGFyYW0ge09iamVjdH0ganNvbgogICBAcGFyYW0ge09iamVjdH0g
        cmVsYXRpb25zaGlwCiAgKi8KICBzZXJpYWxpemVIYXNNYW55OiBmdW5jdGlv
        bihyZWNvcmQsIGpzb24sIHJlbGF0aW9uc2hpcCkgewogICAgdmFyIGtleSA9
        IHJlbGF0aW9uc2hpcC5rZXk7CgogICAgdmFyIHJlbGF0aW9uc2hpcFR5cGUg
        PSBEUy5SZWxhdGlvbnNoaXBDaGFuZ2UuZGV0ZXJtaW5lUmVsYXRpb25zaGlw
        VHlwZShyZWNvcmQuY29uc3RydWN0b3IsIHJlbGF0aW9uc2hpcCk7CgogICAg
        aWYgKHJlbGF0aW9uc2hpcFR5cGUgPT09ICdtYW55VG9Ob25lJyB8fCByZWxh
        dGlvbnNoaXBUeXBlID09PSAnbWFueVRvTWFueScpIHsKICAgICAganNvbltr
        ZXldID0gZ2V0KHJlY29yZCwga2V5KS5tYXBCeSgnaWQnKTsKICAgICAgLy8g
        VE9ETyBzdXBwb3J0IGZvciBwb2x5bW9ycGhpYyBtYW55VG9Ob25lIGFuZCBt
        YW55VG9NYW55IHJlbGF0aW9uc2hpcHMKICAgIH0KICB9LAoKICAvKioKICAg
        IFlvdSBjYW4gdXNlIHRoaXMgbWV0aG9kIHRvIGN1c3RvbWl6ZSBob3cgcG9s
        eW1vcnBoaWMgb2JqZWN0cyBhcmUKICAgIHNlcmlhbGl6ZWQuIE9iamVjdHMg
        YXJlIGNvbnNpZGVyZWQgdG8gYmUgcG9seW1vcnBoaWMgaWYKICAgIGB7cG9s
        eW1vcnBoaWM6IHRydWV9YCBpcyBwYXNzIGFzIHRoZSBzZWNvbmQgYXJndW1l
        bnQgdG8gdGhlCiAgICBgRFMuYmVsb25nc1RvYCBmdW5jdGlvbi4KCiAgICBF
        eGFtcGxlCgogICAgYGBgamF2YXNjcmlwdAogICAgQXBwLkNvbW1lbnRTZXJp
        YWxpemVyID0gRFMuSlNPTlNlcmlhbGl6ZXIuZXh0ZW5kKHsKICAgICAgc2Vy
        aWFsaXplUG9seW1vcnBoaWNUeXBlOiBmdW5jdGlvbihyZWNvcmQsIGpzb24s
        IHJlbGF0aW9uc2hpcCkgewogICAgICAgIHZhciBrZXkgPSByZWxhdGlvbnNo
        aXAua2V5LAogICAgICAgICAgICBiZWxvbmdzVG8gPSBnZXQocmVjb3JkLCBr
        ZXkpOwogICAgICAgIGtleSA9IHRoaXMua2V5Rm9yQXR0cmlidXRlID8gdGhp
        cy5rZXlGb3JBdHRyaWJ1dGUoa2V5KSA6IGtleTsKICAgICAgICBqc29uW2tl
        eSArICJfdHlwZSJdID0gYmVsb25nc1RvLmNvbnN0cnVjdG9yLnR5cGVLZXk7
        CiAgICAgIH0KICAgIH0pOwogICBgYGAKCiAgICBAbWV0aG9kIHNlcmlhbGl6
        ZVBvbHltb3JwaGljVHlwZQogICAgQHBhcmFtIHtEUy5Nb2RlbH0gcmVjb3Jk
        CiAgICBAcGFyYW0ge09iamVjdH0ganNvbgogICAgQHBhcmFtIHtPYmplY3R9
        IHJlbGF0aW9uc2hpcAogICovCiAgc2VyaWFsaXplUG9seW1vcnBoaWNUeXBl
        OiBFbWJlci5LLAoKICAvLyBFWFRSQUNUCgogIC8qKgogICAgVGhlIGBleHRy
        YWN0YCBtZXRob2QgaXMgdXNlZCB0byBkZXNlcmlhbGl6ZSBwYXlsb2FkIGRh
        dGEgZnJvbSB0aGUKICAgIHNlcnZlci4gQnkgZGVmYXVsdCB0aGUgYEpTT05T
        ZXJpYWxpemVyYCBkb2VzIG5vdCBwdXNoIHRoZSByZWNvcmRzCiAgICBpbnRv
        IHRoZSBzdG9yZS4gSG93ZXZlciByZWNvcmRzIHRoYXQgc3ViY2xhc3MgYEpT
        T05TZXJpYWxpemVyYAogICAgc3VjaCBhcyB0aGUgYFJFU1RTZXJpYWxpemVy
        YCBtYXkgcHVzaCByZWNvcmRzIGludG8gdGhlIHN0b3JlIGFzCiAgICBwYXJ0
        IG9mIHRoZSBleHRyYWN0IGNhbGwuCgogICAgVGhpcyBtZXRob2QgZGVsZWdh
        dGVzIHRvIGEgbW9yZSBzcGVjaWZpYyBleHRyYWN0IG1ldGhvZCBiYXNlZCBv
        bgogICAgdGhlIGByZXF1ZXN0VHlwZWAuCgogICAgRXhhbXBsZQoKICAgIGBg
        YGphdmFzY3JpcHQKICAgIHZhciBnZXQgPSBFbWJlci5nZXQ7CiAgICBzb2Nr
        ZXQub24oJ21lc3NhZ2UnLCBmdW5jdGlvbihtZXNzYWdlKSB7CiAgICAgIHZh
        ciBtb2RlbE5hbWUgPSBtZXNzYWdlLm1vZGVsOwogICAgICB2YXIgZGF0YSA9
        IG1lc3NhZ2UuZGF0YTsKICAgICAgdmFyIHR5cGUgPSBzdG9yZS5tb2RlbEZv
        cihtb2RlbE5hbWUpOwogICAgICB2YXIgc2VyaWFsaXplciA9IHN0b3JlLnNl
        cmlhbGl6ZXJGb3IodHlwZS50eXBlS2V5KTsKICAgICAgdmFyIHJlY29yZCA9
        IHNlcmlhbGl6ZXIuZXh0cmFjdChzdG9yZSwgdHlwZSwgZGF0YSwgZ2V0KGRh
        dGEsICdpZCcpLCAnc2luZ2xlJyk7CiAgICAgIHN0b3JlLnB1c2gobW9kZWxO
        YW1lLCByZWNvcmQpOwogICAgfSk7CiAgICBgYGAKCiAgICBAbWV0aG9kIGV4
        dHJhY3QKICAgIEBwYXJhbSB7RFMuU3RvcmV9IHN0b3JlCiAgICBAcGFyYW0g
        e3N1YmNsYXNzIG9mIERTLk1vZGVsfSB0eXBlCiAgICBAcGFyYW0ge09iamVj
        dH0gcGF5bG9hZAogICAgQHBhcmFtIHtTdHJpbmcgb3IgTnVtYmVyfSBpZAog
        ICAgQHBhcmFtIHtTdHJpbmd9IHJlcXVlc3RUeXBlCiAgICBAcmV0dXJuIHtP
        YmplY3R9IGpzb24gVGhlIGRlc2VyaWFsaXplZCBwYXlsb2FkCiAgKi8KICBl
        eHRyYWN0OiBmdW5jdGlvbihzdG9yZSwgdHlwZSwgcGF5bG9hZCwgaWQsIHJl
        cXVlc3RUeXBlKSB7CiAgICB0aGlzLmV4dHJhY3RNZXRhKHN0b3JlLCB0eXBl
        LCBwYXlsb2FkKTsKCiAgICB2YXIgc3BlY2lmaWNFeHRyYWN0ID0gImV4dHJh
        Y3QiICsgcmVxdWVzdFR5cGUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBy
        ZXF1ZXN0VHlwZS5zdWJzdHIoMSk7CiAgICByZXR1cm4gdGhpc1tzcGVjaWZp
        Y0V4dHJhY3RdKHN0b3JlLCB0eXBlLCBwYXlsb2FkLCBpZCwgcmVxdWVzdFR5
        cGUpOwogIH0sCgogIC8qKgogICAgYGV4dHJhY3RGaW5kQWxsYCBpcyBhIGhv
        b2sgaW50byB0aGUgZXh0cmFjdCBtZXRob2QgdXNlZCB3aGVuIGEKICAgIGNh
        bGwgaXMgbWFkZSB0byBgRFMuU3RvcmUjZmluZEFsbGAuIEJ5IGRlZmF1bHQg
        dGhpcyBtZXRob2QgaXMgYW4KICAgIGFsaWFzIGZvciBbZXh0cmFjdEFycmF5
        XSgjbWV0aG9kX2V4dHJhY3RBcnJheSkuCgogICAgQG1ldGhvZCBleHRyYWN0
        RmluZEFsbAogICAgQHBhcmFtIHtEUy5TdG9yZX0gc3RvcmUKICAgIEBwYXJh
        bSB7c3ViY2xhc3Mgb2YgRFMuTW9kZWx9IHR5cGUKICAgIEBwYXJhbSB7T2Jq
        ZWN0fSBwYXlsb2FkCiAgICBAcmV0dXJuIHtBcnJheX0gYXJyYXkgQW4gYXJy
        YXkgb2YgZGVzZXJpYWxpemVkIG9iamVjdHMKICAqLwogIGV4dHJhY3RGaW5k
        QWxsOiBhbGlhc01ldGhvZCgnZXh0cmFjdEFycmF5JyksCiAgLyoqCiAgICBg
        ZXh0cmFjdEZpbmRRdWVyeWAgaXMgYSBob29rIGludG8gdGhlIGV4dHJhY3Qg
        bWV0aG9kIHVzZWQgd2hlbiBhCiAgICBjYWxsIGlzIG1hZGUgdG8gYERTLlN0
        b3JlI2ZpbmRRdWVyeWAuIEJ5IGRlZmF1bHQgdGhpcyBtZXRob2QgaXMgYW4K
        ICAgIGFsaWFzIGZvciBbZXh0cmFjdEFycmF5XSgjbWV0aG9kX2V4dHJhY3RB
        cnJheSkuCgogICAgQG1ldGhvZCBleHRyYWN0RmluZFF1ZXJ5CiAgICBAcGFy
        YW0ge0RTLlN0b3JlfSBzdG9yZQogICAgQHBhcmFtIHtzdWJjbGFzcyBvZiBE
        Uy5Nb2RlbH0gdHlwZQogICAgQHBhcmFtIHtPYmplY3R9IHBheWxvYWQKICAg
        IEByZXR1cm4ge0FycmF5fSBhcnJheSBBbiBhcnJheSBvZiBkZXNlcmlhbGl6
        ZWQgb2JqZWN0cwogICovCiAgZXh0cmFjdEZpbmRRdWVyeTogYWxpYXNNZXRo
        b2QoJ2V4dHJhY3RBcnJheScpLAogIC8qKgogICAgYGV4dHJhY3RGaW5kTWFu
        eWAgaXMgYSBob29rIGludG8gdGhlIGV4dHJhY3QgbWV0aG9kIHVzZWQgd2hl
        biBhCiAgICBjYWxsIGlzIG1hZGUgdG8gYERTLlN0b3JlI2ZpbmRNYW55YC4g
        QnkgZGVmYXVsdCB0aGlzIG1ldGhvZCBpcwogICAgYWxpYXMgZm9yIFtleHRy
        YWN0QXJyYXldKCNtZXRob2RfZXh0cmFjdEFycmF5KS4KCiAgICBAbWV0aG9k
        IGV4dHJhY3RGaW5kTWFueQogICAgQHBhcmFtIHtEUy5TdG9yZX0gc3RvcmUK
        ICAgIEBwYXJhbSB7c3ViY2xhc3Mgb2YgRFMuTW9kZWx9IHR5cGUKICAgIEBw
        YXJhbSB7T2JqZWN0fSBwYXlsb2FkCiAgICBAcmV0dXJuIHtBcnJheX0gYXJy
        YXkgQW4gYXJyYXkgb2YgZGVzZXJpYWxpemVkIG9iamVjdHMKICAqLwogIGV4
        dHJhY3RGaW5kTWFueTogYWxpYXNNZXRob2QoJ2V4dHJhY3RBcnJheScpLAog
        IC8qKgogICAgYGV4dHJhY3RGaW5kSGFzTWFueWAgaXMgYSBob29rIGludG8g
        dGhlIGV4dHJhY3QgbWV0aG9kIHVzZWQgd2hlbiBhCiAgICBjYWxsIGlzIG1h
        ZGUgdG8gYERTLlN0b3JlI2ZpbmRIYXNNYW55YC4gQnkgZGVmYXVsdCB0aGlz
        IG1ldGhvZCBpcwogICAgYWxpYXMgZm9yIFtleHRyYWN0QXJyYXldKCNtZXRo
        b2RfZXh0cmFjdEFycmF5KS4KCiAgICBAbWV0aG9kIGV4dHJhY3RGaW5kSGFz
        TWFueQogICAgQHBhcmFtIHtEUy5TdG9yZX0gc3RvcmUKICAgIEBwYXJhbSB7
        c3ViY2xhc3Mgb2YgRFMuTW9kZWx9IHR5cGUKICAgIEBwYXJhbSB7T2JqZWN0
        fSBwYXlsb2FkCiAgICBAcmV0dXJuIHtBcnJheX0gYXJyYXkgQW4gYXJyYXkg
        b2YgZGVzZXJpYWxpemVkIG9iamVjdHMKICAqLwogIGV4dHJhY3RGaW5kSGFz
        TWFueTogYWxpYXNNZXRob2QoJ2V4dHJhY3RBcnJheScpLAoKICAvKioKICAg
        IGBleHRyYWN0Q3JlYXRlUmVjb3JkYCBpcyBhIGhvb2sgaW50byB0aGUgZXh0
        cmFjdCBtZXRob2QgdXNlZCB3aGVuIGEKICAgIGNhbGwgaXMgbWFkZSB0byBg
        RFMuU3RvcmUjY3JlYXRlUmVjb3JkYC4gQnkgZGVmYXVsdCB0aGlzIG1ldGhv
        ZCBpcwogICAgYWxpYXMgZm9yIFtleHRyYWN0U2F2ZV0oI21ldGhvZF9leHRy
        YWN0U2F2ZSkuCgogICAgQG1ldGhvZCBleHRyYWN0Q3JlYXRlUmVjb3JkCiAg
        ICBAcGFyYW0ge0RTLlN0b3JlfSBzdG9yZQogICAgQHBhcmFtIHtzdWJjbGFz
        cyBvZiBEUy5Nb2RlbH0gdHlwZQogICAgQHBhcmFtIHtPYmplY3R9IHBheWxv
        YWQKICAgIEByZXR1cm4ge09iamVjdH0ganNvbiBUaGUgZGVzZXJpYWxpemVk
        IHBheWxvYWQKICAqLwogIGV4dHJhY3RDcmVhdGVSZWNvcmQ6IGFsaWFzTWV0
        aG9kKCdleHRyYWN0U2F2ZScpLAogIC8qKgogICAgYGV4dHJhY3RVcGRhdGVS
        ZWNvcmRgIGlzIGEgaG9vayBpbnRvIHRoZSBleHRyYWN0IG1ldGhvZCB1c2Vk
        IHdoZW4KICAgIGEgY2FsbCBpcyBtYWRlIHRvIGBEUy5TdG9yZSN1cGRhdGVg
        LiBCeSBkZWZhdWx0IHRoaXMgbWV0aG9kIGlzIGFsaWFzCiAgICBmb3IgW2V4
        dHJhY3RTYXZlXSgjbWV0aG9kX2V4dHJhY3RTYXZlKS4KCiAgICBAbWV0aG9k
        IGV4dHJhY3RVcGRhdGVSZWNvcmQKICAgIEBwYXJhbSB7RFMuU3RvcmV9IHN0
        b3JlCiAgICBAcGFyYW0ge3N1YmNsYXNzIG9mIERTLk1vZGVsfSB0eXBlCiAg
        ICBAcGFyYW0ge09iamVjdH0gcGF5bG9hZAogICAgQHJldHVybiB7T2JqZWN0
        fSBqc29uIFRoZSBkZXNlcmlhbGl6ZWQgcGF5bG9hZAogICovCiAgZXh0cmFj
        dFVwZGF0ZVJlY29yZDogYWxpYXNNZXRob2QoJ2V4dHJhY3RTYXZlJyksCiAg
        LyoqCiAgICBgZXh0cmFjdERlbGV0ZVJlY29yZGAgaXMgYSBob29rIGludG8g
        dGhlIGV4dHJhY3QgbWV0aG9kIHVzZWQgd2hlbgogICAgYSBjYWxsIGlzIG1h
        ZGUgdG8gYERTLlN0b3JlI2RlbGV0ZVJlY29yZGAuIEJ5IGRlZmF1bHQgdGhp
        cyBtZXRob2QgaXMKICAgIGFsaWFzIGZvciBbZXh0cmFjdFNhdmVdKCNtZXRo
        b2RfZXh0cmFjdFNhdmUpLgoKICAgIEBtZXRob2QgZXh0cmFjdERlbGV0ZVJl
        Y29yZAogICAgQHBhcmFtIHtEUy5TdG9yZX0gc3RvcmUKICAgIEBwYXJhbSB7
        c3ViY2xhc3Mgb2YgRFMuTW9kZWx9IHR5cGUKICAgIEBwYXJhbSB7T2JqZWN0
        fSBwYXlsb2FkCiAgICBAcmV0dXJuIHtPYmplY3R9IGpzb24gVGhlIGRlc2Vy
        aWFsaXplZCBwYXlsb2FkCiAgKi8KICBleHRyYWN0RGVsZXRlUmVjb3JkOiBh
        bGlhc01ldGhvZCgnZXh0cmFjdFNhdmUnKSwKCiAgLyoqCiAgICBgZXh0cmFj
        dEZpbmRgIGlzIGEgaG9vayBpbnRvIHRoZSBleHRyYWN0IG1ldGhvZCB1c2Vk
        IHdoZW4KICAgIGEgY2FsbCBpcyBtYWRlIHRvIGBEUy5TdG9yZSNmaW5kYC4g
        QnkgZGVmYXVsdCB0aGlzIG1ldGhvZCBpcwogICAgYWxpYXMgZm9yIFtleHRy
        YWN0U2luZ2xlXSgjbWV0aG9kX2V4dHJhY3RTaW5nbGUpLgoKICAgIEBtZXRo
        b2QgZXh0cmFjdEZpbmQKICAgIEBwYXJhbSB7RFMuU3RvcmV9IHN0b3JlCiAg
        ICBAcGFyYW0ge3N1YmNsYXNzIG9mIERTLk1vZGVsfSB0eXBlCiAgICBAcGFy
        YW0ge09iamVjdH0gcGF5bG9hZAogICAgQHJldHVybiB7T2JqZWN0fSBqc29u
        IFRoZSBkZXNlcmlhbGl6ZWQgcGF5bG9hZAogICovCiAgZXh0cmFjdEZpbmQ6
        IGFsaWFzTWV0aG9kKCdleHRyYWN0U2luZ2xlJyksCiAgLyoqCiAgICBgZXh0
        cmFjdEZpbmRCZWxvbmdzVG9gIGlzIGEgaG9vayBpbnRvIHRoZSBleHRyYWN0
        IG1ldGhvZCB1c2VkIHdoZW4KICAgIGEgY2FsbCBpcyBtYWRlIHRvIGBEUy5T
        dG9yZSNmaW5kQmVsb25nc1RvYC4gQnkgZGVmYXVsdCB0aGlzIG1ldGhvZCBp
        cwogICAgYWxpYXMgZm9yIFtleHRyYWN0U2luZ2xlXSgjbWV0aG9kX2V4dHJh
        Y3RTaW5nbGUpLgoKICAgIEBtZXRob2QgZXh0cmFjdEZpbmRCZWxvbmdzVG8K
        ICAgIEBwYXJhbSB7RFMuU3RvcmV9IHN0b3JlCiAgICBAcGFyYW0ge3N1YmNs
        YXNzIG9mIERTLk1vZGVsfSB0eXBlCiAgICBAcGFyYW0ge09iamVjdH0gcGF5
        bG9hZAogICAgQHJldHVybiB7T2JqZWN0fSBqc29uIFRoZSBkZXNlcmlhbGl6
        ZWQgcGF5bG9hZAogICovCiAgZXh0cmFjdEZpbmRCZWxvbmdzVG86IGFsaWFz
        TWV0aG9kKCdleHRyYWN0U2luZ2xlJyksCiAgLyoqCiAgICBgZXh0cmFjdFNh
        dmVgIGlzIGEgaG9vayBpbnRvIHRoZSBleHRyYWN0IG1ldGhvZCB1c2VkIHdo
        ZW4gYSBjYWxsCiAgICBpcyBtYWRlIHRvIGBEUy5Nb2RlbCNzYXZlYC4gQnkg
        ZGVmYXVsdCB0aGlzIG1ldGhvZCBpcyBhbGlhcwogICAgZm9yIFtleHRyYWN0
        U2luZ2xlXSgjbWV0aG9kX2V4dHJhY3RTaW5nbGUpLgoKICAgIEBtZXRob2Qg
        ZXh0cmFjdFNhdmUKICAgIEBwYXJhbSB7RFMuU3RvcmV9IHN0b3JlCiAgICBA
        cGFyYW0ge3N1YmNsYXNzIG9mIERTLk1vZGVsfSB0eXBlCiAgICBAcGFyYW0g
        e09iamVjdH0gcGF5bG9hZAogICAgQHJldHVybiB7T2JqZWN0fSBqc29uIFRo
        ZSBkZXNlcmlhbGl6ZWQgcGF5bG9hZAogICovCiAgZXh0cmFjdFNhdmU6IGFs
        aWFzTWV0aG9kKCdleHRyYWN0U2luZ2xlJyksCgogIC8qKgogICAgYGV4dHJh
        Y3RTaW5nbGVgIGlzIHVzZWQgdG8gZGVzZXJpYWxpemUgYSBzaW5nbGUgcmVj
        b3JkIHJldHVybmVkCiAgICBmcm9tIHRoZSBhZGFwdGVyLgoKICAgIEV4YW1w
        bGUKCiAgICBgYGBqYXZhc2NyaXB0CiAgICBBcHAuUG9zdFNlcmlhbGl6ZXIg
        PSBEUy5KU09OU2VyaWFsaXplci5leHRlbmQoewogICAgICBleHRyYWN0U2lu
        Z2xlOiBmdW5jdGlvbihzdG9yZSwgdHlwZSwgcGF5bG9hZCkgewogICAgICAg
        IHBheWxvYWQuY29tbWVudHMgPSBwYXlsb2FkLl9lbWJlZGRlZC5jb21tZW50
        OwogICAgICAgIGRlbGV0ZSBwYXlsb2FkLl9lbWJlZGRlZDsKCiAgICAgICAg
        cmV0dXJuIHRoaXMuX3N1cGVyKHN0b3JlLCB0eXBlLCBwYXlsb2FkKTsKICAg
        ICAgfSwKICAgIH0pOwogICAgYGBgCgogICAgQG1ldGhvZCBleHRyYWN0U2lu
        Z2xlCiAgICBAcGFyYW0ge0RTLlN0b3JlfSBzdG9yZQogICAgQHBhcmFtIHtz
        dWJjbGFzcyBvZiBEUy5Nb2RlbH0gdHlwZQogICAgQHBhcmFtIHtPYmplY3R9
        IHBheWxvYWQKICAgIEByZXR1cm4ge09iamVjdH0ganNvbiBUaGUgZGVzZXJp
        YWxpemVkIHBheWxvYWQKICAqLwogIGV4dHJhY3RTaW5nbGU6IGZ1bmN0aW9u
        KHN0b3JlLCB0eXBlLCBwYXlsb2FkKSB7CiAgICByZXR1cm4gdGhpcy5ub3Jt
        YWxpemUodHlwZSwgcGF5bG9hZCk7CiAgfSwKCiAgLyoqCiAgICBgZXh0cmFj
        dEFycmF5YCBpcyB1c2VkIHRvIGRlc2VyaWFsaXplIGFuIGFycmF5IG9mIHJl
        Y29yZHMKICAgIHJldHVybmVkIGZyb20gdGhlIGFkYXB0ZXIuCgogICAgRXhh
        bXBsZQoKICAgIGBgYGphdmFzY3JpcHQKICAgIEFwcC5Qb3N0U2VyaWFsaXpl
        ciA9IERTLkpTT05TZXJpYWxpemVyLmV4dGVuZCh7CiAgICAgIGV4dHJhY3RB
        cnJheTogZnVuY3Rpb24oc3RvcmUsIHR5cGUsIHBheWxvYWQpIHsKICAgICAg
        ICByZXR1cm4gcGF5bG9hZC5tYXAoZnVuY3Rpb24oanNvbikgewogICAgICAg
        ICAgcmV0dXJuIHRoaXMuZXh0cmFjdFNpbmdsZShqc29uKTsKICAgICAgICB9
        LCB0aGlzKTsKICAgICAgfQogICAgfSk7CiAgICBgYGAKCiAgICBAbWV0aG9k
        IGV4dHJhY3RBcnJheQogICAgQHBhcmFtIHtEUy5TdG9yZX0gc3RvcmUKICAg
        IEBwYXJhbSB7c3ViY2xhc3Mgb2YgRFMuTW9kZWx9IHR5cGUKICAgIEBwYXJh
        bSB7T2JqZWN0fSBwYXlsb2FkCiAgICBAcmV0dXJuIHtBcnJheX0gYXJyYXkg
        QW4gYXJyYXkgb2YgZGVzZXJpYWxpemVkIG9iamVjdHMKICAqLwogIGV4dHJh
        Y3RBcnJheTogZnVuY3Rpb24oc3RvcmUsIHR5cGUsIHBheWxvYWQpIHsKICAg
        IHJldHVybiB0aGlzLm5vcm1hbGl6ZSh0eXBlLCBwYXlsb2FkKTsKICB9LAoK
        ICAvKioKICAgIGBleHRyYWN0TWV0YWAgaXMgdXNlZCB0byBkZXNlcmlhbGl6
        ZSBhbnkgbWV0YSBpbmZvcm1hdGlvbiBpbiB0aGUKICAgIGFkYXB0ZXIgcGF5
        bG9hZC4gQnkgZGVmYXVsdCBFbWJlciBEYXRhIGV4cGVjdHMgbWV0YSBpbmZv
        cm1hdGlvbiB0bwogICAgYmUgbG9jYXRlZCBvbiB0aGUgYG1ldGFgIHByb3Bl
        cnR5IG9mIHRoZSBwYXlsb2FkIG9iamVjdC4KCiAgICBFeGFtcGxlCgogICAg
        YGBgamF2YXNjcmlwdAogICAgQXBwLlBvc3RTZXJpYWxpemVyID0gRFMuSlNP
        TlNlcmlhbGl6ZXIuZXh0ZW5kKHsKICAgICAgZXh0cmFjdE1ldGE6IGZ1bmN0
        aW9uKHN0b3JlLCB0eXBlLCBwYXlsb2FkKSB7CiAgICAgICAgaWYgKHBheWxv
        YWQgJiYgcGF5bG9hZC5fcGFnaW5hdGlvbikgewogICAgICAgICAgc3RvcmUu
        bWV0YUZvclR5cGUodHlwZSwgcGF5bG9hZC5fcGFnaW5hdGlvbik7CiAgICAg
        ICAgICBkZWxldGUgcGF5bG9hZC5fcGFnaW5hdGlvbjsKICAgICAgICB9CiAg
        ICAgIH0KICAgIH0pOwogICAgYGBgCgogICAgQG1ldGhvZCBleHRyYWN0TWV0
        YQogICAgQHBhcmFtIHtEUy5TdG9yZX0gc3RvcmUKICAgIEBwYXJhbSB7c3Vi
        Y2xhc3Mgb2YgRFMuTW9kZWx9IHR5cGUKICAgIEBwYXJhbSB7T2JqZWN0fSBw
        YXlsb2FkCiAgKi8KICBleHRyYWN0TWV0YTogZnVuY3Rpb24oc3RvcmUsIHR5
        cGUsIHBheWxvYWQpIHsKICAgIGlmIChwYXlsb2FkICYmIHBheWxvYWQubWV0
        YSkgewogICAgICBzdG9yZS5tZXRhRm9yVHlwZSh0eXBlLCBwYXlsb2FkLm1l
        dGEpOwogICAgICBkZWxldGUgcGF5bG9hZC5tZXRhOwogICAgfQogIH0sCgog
        IC8qKgogICBga2V5Rm9yQXR0cmlidXRlYCBjYW4gYmUgdXNlZCB0byBkZWZp
        bmUgcnVsZXMgZm9yIGhvdyB0byBjb252ZXJ0IGFuCiAgIGF0dHJpYnV0ZSBu
        YW1lIGluIHlvdXIgbW9kZWwgdG8gYSBrZXkgaW4geW91ciBKU09OLgoKICAg
        RXhhbXBsZQoKICAgYGBgamF2YXNjcmlwdAogICBBcHAuQXBwbGljYXRpb25T
        ZXJpYWxpemVyID0gRFMuUkVTVFNlcmlhbGl6ZXIuZXh0ZW5kKHsKICAgICBr
        ZXlGb3JBdHRyaWJ1dGU6IGZ1bmN0aW9uKGF0dHIpIHsKICAgICAgIHJldHVy
        biBFbWJlci5TdHJpbmcudW5kZXJzY29yZShhdHRyKS50b1VwcGVyQ2FzZSgp
        OwogICAgIH0KICAgfSk7CiAgIGBgYAoKICAgQG1ldGhvZCBrZXlGb3JBdHRy
        aWJ1dGUKICAgQHBhcmFtIHtTdHJpbmd9IGtleQogICBAcmV0dXJuIHtTdHJp
        bmd9IG5vcm1hbGl6ZWQga2V5CiAgKi8KCgogIC8qKgogICBga2V5Rm9yUmVs
        YXRpb25zaGlwYCBjYW4gYmUgdXNlZCB0byBkZWZpbmUgYSBjdXN0b20ga2V5
        IHdoZW4KICAgc2VyaWFsaXppbmcgcmVsYXRpb25zaGlwIHByb3BlcnRpZXMu
        IEJ5IGRlZmF1bHQgYEpTT05TZXJpYWxpemVyYAogICBkb2VzIG5vdCBwcm92
        aWRlIGFuIGltcGxlbWVudGF0aW9uIG9mIHRoaXMgbWV0aG9kLgoKICAgRXhh
        bXBsZQoKICAgIGBgYGphdmFzY3JpcHQKICAgIEFwcC5Qb3N0U2VyaWFsaXpl
        ciA9IERTLkpTT05TZXJpYWxpemVyLmV4dGVuZCh7CiAgICAgIGtleUZvclJl
        bGF0aW9uc2hpcDogZnVuY3Rpb24oa2V5LCByZWxhdGlvbnNoaXApIHsKICAg
        ICAgICAgcmV0dXJuICdyZWxfJyArIEVtYmVyLlN0cmluZy51bmRlcnNjb3Jl
        KGtleSk7CiAgICAgIH0KICAgIH0pOwogICAgYGBgCgogICBAbWV0aG9kIGtl
        eUZvclJlbGF0aW9uc2hpcAogICBAcGFyYW0ge1N0cmluZ30ga2V5CiAgIEBw
        YXJhbSB7U3RyaW5nfSByZWxhdGlvbnNoaXAgdHlwZQogICBAcmV0dXJuIHtT
        dHJpbmd9IG5vcm1hbGl6ZWQga2V5CiAgKi8KCiAgLy8gSEVMUEVSUwoKICAv
        KioKICAgQG1ldGhvZCB0cmFuc2Zvcm1Gb3IKICAgQHByaXZhdGUKICAgQHBh
        cmFtIHtTdHJpbmd9IGF0dHJpYnV0ZVR5cGUKICAgQHBhcmFtIHtCb29sZWFu
        fSBza2lwQXNzZXJ0aW9uCiAgIEByZXR1cm4ge0RTLlRyYW5zZm9ybX0gdHJh
        bnNmb3JtCiAgKi8KICB0cmFuc2Zvcm1Gb3I6IGZ1bmN0aW9uKGF0dHJpYnV0
        ZVR5cGUsIHNraXBBc3NlcnRpb24pIHsKICAgIHZhciB0cmFuc2Zvcm0gPSB0
        aGlzLmNvbnRhaW5lci5sb29rdXAoJ3RyYW5zZm9ybTonICsgYXR0cmlidXRl
        VHlwZSk7CiAgICBFbWJlci5hc3NlcnQoIlVuYWJsZSB0byBmaW5kIHRyYW5z
        Zm9ybSBmb3IgJyIgKyBhdHRyaWJ1dGVUeXBlICsgIiciLCBza2lwQXNzZXJ0
        aW9uIHx8ICEhdHJhbnNmb3JtKTsKICAgIHJldHVybiB0cmFuc2Zvcm07CiAg
        fQp9KTsKCn0pKCk7CgoKCihmdW5jdGlvbigpIHsKLyoqCiAgQG1vZHVsZSBl
        bWJlci1kYXRhCiovCnZhciBnZXQgPSBFbWJlci5nZXQsIGNhcGl0YWxpemUg
        PSBFbWJlci5TdHJpbmcuY2FwaXRhbGl6ZSwgdW5kZXJzY29yZSA9IEVtYmVy
        LlN0cmluZy51bmRlcnNjb3JlLCBEUyA9IHdpbmRvdy5EUyA7CgovKioKICBF
        eHRlbmQgYEVtYmVyLkRhdGFBZGFwdGVyYCB3aXRoIEVEIHNwZWNpZmljIGNv
        ZGUuCgogIEBjbGFzcyBEZWJ1Z0FkYXB0ZXIKICBAbmFtZXNwYWNlIERTCiAg
        QGV4dGVuZHMgRW1iZXIuRGF0YUFkYXB0ZXIKICBAcHJpdmF0ZQoqLwpEUy5E
        ZWJ1Z0FkYXB0ZXIgPSBFbWJlci5EYXRhQWRhcHRlci5leHRlbmQoewogIGdl
        dEZpbHRlcnM6IGZ1bmN0aW9uKCkgewogICAgcmV0dXJuIFsKICAgICAgeyBu
        YW1lOiAnaXNOZXcnLCBkZXNjOiAnTmV3JyB9LAogICAgICB7IG5hbWU6ICdp
        c01vZGlmaWVkJywgZGVzYzogJ01vZGlmaWVkJyB9LAogICAgICB7IG5hbWU6
        ICdpc0NsZWFuJywgZGVzYzogJ0NsZWFuJyB9CiAgICBdOwogIH0sCgogIGRl
        dGVjdDogZnVuY3Rpb24oa2xhc3MpIHsKICAgIHJldHVybiBrbGFzcyAhPT0g
        RFMuTW9kZWwgJiYgRFMuTW9kZWwuZGV0ZWN0KGtsYXNzKTsKICB9LAoKICBj
        b2x1bW5zRm9yVHlwZTogZnVuY3Rpb24odHlwZSkgewogICAgdmFyIGNvbHVt
        bnMgPSBbeyBuYW1lOiAnaWQnLCBkZXNjOiAnSWQnIH1dLCBjb3VudCA9IDAs
        IHNlbGYgPSB0aGlzOwogICAgZ2V0KHR5cGUsICdhdHRyaWJ1dGVzJykuZm9y
        RWFjaChmdW5jdGlvbihuYW1lLCBtZXRhKSB7CiAgICAgICAgaWYgKGNvdW50
        KysgPiBzZWxmLmF0dHJpYnV0ZUxpbWl0KSB7IHJldHVybiBmYWxzZTsgfQog
        ICAgICAgIHZhciBkZXNjID0gY2FwaXRhbGl6ZSh1bmRlcnNjb3JlKG5hbWUp
        LnJlcGxhY2UoJ18nLCAnICcpKTsKICAgICAgICBjb2x1bW5zLnB1c2goeyBu
        YW1lOiBuYW1lLCBkZXNjOiBkZXNjIH0pOwogICAgfSk7CiAgICByZXR1cm4g
        Y29sdW1uczsKICB9LAoKICBnZXRSZWNvcmRzOiBmdW5jdGlvbih0eXBlKSB7
        CiAgICByZXR1cm4gdGhpcy5nZXQoJ3N0b3JlJykuYWxsKHR5cGUpOwogIH0s
        CgogIGdldFJlY29yZENvbHVtblZhbHVlczogZnVuY3Rpb24ocmVjb3JkKSB7
        CiAgICB2YXIgc2VsZiA9IHRoaXMsIGNvdW50ID0gMCwKICAgICAgICBjb2x1
        bW5WYWx1ZXMgPSB7IGlkOiBnZXQocmVjb3JkLCAnaWQnKSB9OwoKICAgIHJl
        Y29yZC5lYWNoQXR0cmlidXRlKGZ1bmN0aW9uKGtleSkgewogICAgICBpZiAo
        Y291bnQrKyA+IHNlbGYuYXR0cmlidXRlTGltaXQpIHsKICAgICAgICByZXR1
        cm4gZmFsc2U7CiAgICAgIH0KICAgICAgdmFyIHZhbHVlID0gZ2V0KHJlY29y
        ZCwga2V5KTsKICAgICAgY29sdW1uVmFsdWVzW2tleV0gPSB2YWx1ZTsKICAg
        IH0pOwogICAgcmV0dXJuIGNvbHVtblZhbHVlczsKICB9LAoKICBnZXRSZWNv
        cmRLZXl3b3JkczogZnVuY3Rpb24ocmVjb3JkKSB7CiAgICB2YXIga2V5d29y
        ZHMgPSBbXSwga2V5cyA9IEVtYmVyLkEoWydpZCddKTsKICAgIHJlY29yZC5l
        YWNoQXR0cmlidXRlKGZ1bmN0aW9uKGtleSkgewogICAgICBrZXlzLnB1c2go
        a2V5KTsKICAgIH0pOwogICAga2V5cy5mb3JFYWNoKGZ1bmN0aW9uKGtleSkg
        ewogICAgICBrZXl3b3Jkcy5wdXNoKGdldChyZWNvcmQsIGtleSkpOwogICAg
        fSk7CiAgICByZXR1cm4ga2V5d29yZHM7CiAgfSwKCiAgZ2V0UmVjb3JkRmls
        dGVyVmFsdWVzOiBmdW5jdGlvbihyZWNvcmQpIHsKICAgIHJldHVybiB7CiAg
        ICAgIGlzTmV3OiByZWNvcmQuZ2V0KCdpc05ldycpLAogICAgICBpc01vZGlm
        aWVkOiByZWNvcmQuZ2V0KCdpc0RpcnR5JykgJiYgIXJlY29yZC5nZXQoJ2lz
        TmV3JyksCiAgICAgIGlzQ2xlYW46ICFyZWNvcmQuZ2V0KCdpc0RpcnR5JykK
        ICAgIH07CiAgfSwKCiAgZ2V0UmVjb3JkQ29sb3I6IGZ1bmN0aW9uKHJlY29y
        ZCkgewogICAgdmFyIGNvbG9yID0gJ2JsYWNrJzsKICAgIGlmIChyZWNvcmQu
        Z2V0KCdpc05ldycpKSB7CiAgICAgIGNvbG9yID0gJ2dyZWVuJzsKICAgIH0g
        ZWxzZSBpZiAocmVjb3JkLmdldCgnaXNEaXJ0eScpKSB7CiAgICAgIGNvbG9y
        ID0gJ2JsdWUnOwogICAgfQogICAgcmV0dXJuIGNvbG9yOwogIH0sCgogIG9i
        c2VydmVSZWNvcmQ6IGZ1bmN0aW9uKHJlY29yZCwgcmVjb3JkVXBkYXRlZCkg
        ewogICAgdmFyIHJlbGVhc2VNZXRob2RzID0gRW1iZXIuQSgpLCBzZWxmID0g
        dGhpcywKICAgICAgICBrZXlzVG9PYnNlcnZlID0gRW1iZXIuQShbJ2lkJywg
        J2lzTmV3JywgJ2lzRGlydHknXSk7CgogICAgcmVjb3JkLmVhY2hBdHRyaWJ1
        dGUoZnVuY3Rpb24oa2V5KSB7CiAgICAgIGtleXNUb09ic2VydmUucHVzaChr
        ZXkpOwogICAgfSk7CgogICAga2V5c1RvT2JzZXJ2ZS5mb3JFYWNoKGZ1bmN0
        aW9uKGtleSkgewogICAgICB2YXIgaGFuZGxlciA9IGZ1bmN0aW9uKCkgewog
        ICAgICAgIHJlY29yZFVwZGF0ZWQoc2VsZi53cmFwUmVjb3JkKHJlY29yZCkp
        OwogICAgICB9OwogICAgICBFbWJlci5hZGRPYnNlcnZlcihyZWNvcmQsIGtl
        eSwgaGFuZGxlcik7CiAgICAgIHJlbGVhc2VNZXRob2RzLnB1c2goZnVuY3Rp
        b24oKSB7CiAgICAgICAgRW1iZXIucmVtb3ZlT2JzZXJ2ZXIocmVjb3JkLCBr
        ZXksIGhhbmRsZXIpOwogICAgICB9KTsKICAgIH0pOwoKICAgIHZhciByZWxl
        YXNlID0gZnVuY3Rpb24oKSB7CiAgICAgIHJlbGVhc2VNZXRob2RzLmZvckVh
        Y2goZnVuY3Rpb24oZm4pIHsgZm4oKTsgfSApOwogICAgfTsKCiAgICByZXR1
        cm4gcmVsZWFzZTsKICB9Cgp9KTsKCn0pKCk7CgoKCihmdW5jdGlvbigpIHsK
        LyoqCiAgVGhlIGBEUy5UcmFuc2Zvcm1gIGNsYXNzIGlzIHVzZWQgdG8gc2Vy
        aWFsaXplIGFuZCBkZXNlcmlhbGl6ZSBtb2RlbAogIGF0dHJpYnV0ZXMgd2hl
        biB0aGV5IGFyZSBzYXZlZCBvciBsb2FkZWQgZnJvbSBhbgogIGFkYXB0ZXIu
        IFN1YmNsYXNzaW5nIGBEUy5UcmFuc2Zvcm1gIGlzIHVzZWZ1bCBmb3IgY3Jl
        YXRpbmcgY3VzdG9tCiAgYXR0cmlidXRlcy4gQWxsIHN1YmNsYXNzZXMgb2Yg
        YERTLlRyYW5zZm9ybWAgbXVzdCBpbXBsZW1lbnQgYQogIGBzZXJpYWxpemVg
        IGFuZCBhIGBkZXNlcmlhbGl6ZWAgbWV0aG9kLgoKICBFeGFtcGxlCgogIGBg
        YGphdmFzY3JpcHQKICBBcHAuUmF3VHJhbnNmb3JtID0gRFMuVHJhbnNmb3Jt
        LmV4dGVuZCh7CiAgICBkZXNlcmlhbGl6ZTogZnVuY3Rpb24oc2VyaWFsaXpl
        ZCkgewogICAgICByZXR1cm4gc2VyaWFsaXplZDsKICAgIH0sCiAgICBzZXJp
        YWxpemU6IGZ1bmN0aW9uKGRlc2VyaWFsaXplZCkgewogICAgICByZXR1cm4g
        ZGVzZXJpYWxpemVkOwogICAgfQogIH0pOwogIGBgYAoKICBVc2FnZQoKICBg
        YGBqYXZhc2NyaXB0CiAgdmFyIGF0dHIgPSBEUy5hdHRyOwogIEFwcC5SZXF1
        aXJlbWVudCA9IERTLk1vZGVsLmV4dGVuZCh7CiAgICBuYW1lOiBhdHRyKCdz
        dHJpbmcnKSwKICAgIG9wdGlvbnNBcnJheTogYXR0cigncmF3JykKICB9KTsK
        ICBgYGAKCiAgQGNsYXNzIFRyYW5zZm9ybQogIEBuYW1lc3BhY2UgRFMKICov
        CkRTLlRyYW5zZm9ybSA9IEVtYmVyLk9iamVjdC5leHRlbmQoewogIC8qKgog
        ICAgV2hlbiBnaXZlbiBhIGRlc2VyaWFsaXplZCB2YWx1ZSBmcm9tIGEgcmVj
        b3JkIGF0dHJpYnV0ZSB0aGlzCiAgICBtZXRob2QgbXVzdCByZXR1cm4gdGhl
        IHNlcmlhbGl6ZWQgdmFsdWUuCgogICAgRXhhbXBsZQoKICAgIGBgYGphdmFz
        Y3JpcHQKICAgIHNlcmlhbGl6ZTogZnVuY3Rpb24oZGVzZXJpYWxpemVkKSB7
        CiAgICAgIHJldHVybiBFbWJlci5pc0VtcHR5KGRlc2VyaWFsaXplZCkgPyBu
        dWxsIDogTnVtYmVyKGRlc2VyaWFsaXplZCk7CiAgICB9CiAgICBgYGAKCiAg
        ICBAbWV0aG9kIHNlcmlhbGl6ZQogICAgQHBhcmFtIGRlc2VyaWFsaXplZCBU
        aGUgZGVzZXJpYWxpemVkIHZhbHVlCiAgICBAcmV0dXJuIFRoZSBzZXJpYWxp
        emVkIHZhbHVlCiAgKi8KICBzZXJpYWxpemU6IEVtYmVyLnJlcXVpcmVkKCks
        CgogIC8qKgogICAgV2hlbiBnaXZlbiBhIHNlcmlhbGl6ZSB2YWx1ZSBmcm9t
        IGEgSlNPTiBvYmplY3QgdGhpcyBtZXRob2QgbXVzdAogICAgcmV0dXJuIHRo
        ZSBkZXNlcmlhbGl6ZWQgdmFsdWUgZm9yIHRoZSByZWNvcmQgYXR0cmlidXRl
        LgoKICAgIEV4YW1wbGUKCiAgICBgYGBqYXZhc2NyaXB0CiAgICBkZXNlcmlh
        bGl6ZTogZnVuY3Rpb24oc2VyaWFsaXplZCkgewogICAgICByZXR1cm4gZW1w
        dHkoc2VyaWFsaXplZCkgPyBudWxsIDogTnVtYmVyKHNlcmlhbGl6ZWQpOwog
        ICAgfQogICAgYGBgCgogICAgQG1ldGhvZCBkZXNlcmlhbGl6ZQogICAgQHBh
        cmFtIHNlcmlhbGl6ZWQgVGhlIHNlcmlhbGl6ZWQgdmFsdWUKICAgIEByZXR1
        cm4gVGhlIGRlc2VyaWFsaXplZCB2YWx1ZQogICovCiAgZGVzZXJpYWxpemU6
        IEVtYmVyLnJlcXVpcmVkKCkKCn0pOwoKfSkoKTsKCgoKKGZ1bmN0aW9uKCkg
        ewoKLyoqCiAgVGhlIGBEUy5Cb29sZWFuVHJhbnNmb3JtYCBjbGFzcyBpcyB1
        c2VkIHRvIHNlcmlhbGl6ZSBhbmQgZGVzZXJpYWxpemUKICBib29sZWFuIGF0
        dHJpYnV0ZXMgb24gRW1iZXIgRGF0YSByZWNvcmQgb2JqZWN0cy4gVGhpcyB0
        cmFuc2Zvcm0gaXMKICB1c2VkIHdoZW4gYGJvb2xlYW5gIGlzIHBhc3NlZCBh
        cyB0aGUgdHlwZSBwYXJhbWV0ZXIgdG8gdGhlCiAgW0RTLmF0dHJdKC4uLy4u
        L2RhdGEjbWV0aG9kX2F0dHIpIGZ1bmN0aW9uLgoKICBVc2FnZQoKICBgYGBq
        YXZhc2NyaXB0CiAgdmFyIGF0dHIgPSBEUy5hdHRyOwogIEFwcC5Vc2VyID0g
        RFMuTW9kZWwuZXh0ZW5kKHsKICAgIGlzQWRtaW46IGF0dHIoJ2Jvb2xlYW4n
        KSwKICAgIG5hbWU6IGF0dHIoJ3N0cmluZycpLAogICAgZW1haWw6IGF0dHIo
        J3N0cmluZycpCiAgfSk7CiAgYGBgCgogIEBjbGFzcyBCb29sZWFuVHJhbnNm
        b3JtCiAgQGV4dGVuZHMgRFMuVHJhbnNmb3JtCiAgQG5hbWVzcGFjZSBEUwog
        Ki8KRFMuQm9vbGVhblRyYW5zZm9ybSA9IERTLlRyYW5zZm9ybS5leHRlbmQo
        ewogIGRlc2VyaWFsaXplOiBmdW5jdGlvbihzZXJpYWxpemVkKSB7CiAgICB2
        YXIgdHlwZSA9IHR5cGVvZiBzZXJpYWxpemVkOwoKICAgIGlmICh0eXBlID09
        PSAiYm9vbGVhbiIpIHsKICAgICAgcmV0dXJuIHNlcmlhbGl6ZWQ7CiAgICB9
        IGVsc2UgaWYgKHR5cGUgPT09ICJzdHJpbmciKSB7CiAgICAgIHJldHVybiBz
        ZXJpYWxpemVkLm1hdGNoKC9edHJ1ZSR8XnQkfF4xJC9pKSAhPT0gbnVsbDsK
        ICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gIm51bWJlciIpIHsKICAgICAgcmV0
        dXJuIHNlcmlhbGl6ZWQgPT09IDE7CiAgICB9IGVsc2UgewogICAgICByZXR1
        cm4gZmFsc2U7CiAgICB9CiAgfSwKCiAgc2VyaWFsaXplOiBmdW5jdGlvbihk
        ZXNlcmlhbGl6ZWQpIHsKICAgIHJldHVybiBCb29sZWFuKGRlc2VyaWFsaXpl
        ZCk7CiAgfQp9KTsKCn0pKCk7CgoKCihmdW5jdGlvbigpIHsKLyoqCiAgVGhl
        IGBEUy5EYXRlVHJhbnNmb3JtYCBjbGFzcyBpcyB1c2VkIHRvIHNlcmlhbGl6
        ZSBhbmQgZGVzZXJpYWxpemUKICBkYXRlIGF0dHJpYnV0ZXMgb24gRW1iZXIg
        RGF0YSByZWNvcmQgb2JqZWN0cy4gVGhpcyB0cmFuc2Zvcm0gaXMgdXNlZAog
        IHdoZW4gYGRhdGVgIGlzIHBhc3NlZCBhcyB0aGUgdHlwZSBwYXJhbWV0ZXIg
        dG8gdGhlCiAgW0RTLmF0dHJdKC4uLy4uL2RhdGEjbWV0aG9kX2F0dHIpIGZ1
        bmN0aW9uLgoKICBgYGBqYXZhc2NyaXB0CiAgdmFyIGF0dHIgPSBEUy5hdHRy
        OwogIEFwcC5TY29yZSA9IERTLk1vZGVsLmV4dGVuZCh7CiAgICB2YWx1ZTog
        YXR0cignbnVtYmVyJyksCiAgICBwbGF5ZXI6IERTLmJlbG9uZ3NUbygncGxh
        eWVyJyksCiAgICBkYXRlOiBhdHRyKCdkYXRlJykKICB9KTsKICBgYGAKCiAg
        QGNsYXNzIERhdGVUcmFuc2Zvcm0KICBAZXh0ZW5kcyBEUy5UcmFuc2Zvcm0K
        ICBAbmFtZXNwYWNlIERTCiAqLwpEUy5EYXRlVHJhbnNmb3JtID0gRFMuVHJh
        bnNmb3JtLmV4dGVuZCh7CgogIGRlc2VyaWFsaXplOiBmdW5jdGlvbihzZXJp
        YWxpemVkKSB7CiAgICB2YXIgdHlwZSA9IHR5cGVvZiBzZXJpYWxpemVkOwoK
        ICAgIGlmICh0eXBlID09PSAic3RyaW5nIikgewogICAgICByZXR1cm4gbmV3
        IERhdGUoRW1iZXIuRGF0ZS5wYXJzZShzZXJpYWxpemVkKSk7CiAgICB9IGVs
        c2UgaWYgKHR5cGUgPT09ICJudW1iZXIiKSB7CiAgICAgIHJldHVybiBuZXcg
        RGF0ZShzZXJpYWxpemVkKTsKICAgIH0gZWxzZSBpZiAoc2VyaWFsaXplZCA9
        PT0gbnVsbCB8fCBzZXJpYWxpemVkID09PSB1bmRlZmluZWQpIHsKICAgICAg
        Ly8gaWYgdGhlIHZhbHVlIGlzIG5vdCBwcmVzZW50IGluIHRoZSBkYXRhLAog
        ICAgICAvLyByZXR1cm4gdW5kZWZpbmVkLCBub3QgbnVsbC4KICAgICAgcmV0
        dXJuIHNlcmlhbGl6ZWQ7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gbnVs
        bDsKICAgIH0KICB9LAoKICBzZXJpYWxpemU6IGZ1bmN0aW9uKGRhdGUpIHsK
        ICAgIGlmIChkYXRlIGluc3RhbmNlb2YgRGF0ZSkgewogICAgICAvLyBTZXJp
        YWxpemUgaXQgYXMgYSBudW1iZXIgdG8gbWFpbnRhaW4gbWlsbGlzZWNvbmQg
        cHJlY2lzaW9uCiAgICAgIHJldHVybiBOdW1iZXIoZGF0ZSk7CiAgICB9IGVs
        c2UgewogICAgICByZXR1cm4gbnVsbDsKICAgIH0KICB9Cgp9KTsKCn0pKCk7
        CgoKCihmdW5jdGlvbigpIHsKdmFyIGVtcHR5ID0gRW1iZXIuaXNFbXB0eTsK
        LyoqCiAgVGhlIGBEUy5OdW1iZXJUcmFuc2Zvcm1gIGNsYXNzIGlzIHVzZWQg
        dG8gc2VyaWFsaXplIGFuZCBkZXNlcmlhbGl6ZQogIG51bWVyaWMgYXR0cmli
        dXRlcyBvbiBFbWJlciBEYXRhIHJlY29yZCBvYmplY3RzLiBUaGlzIHRyYW5z
        Zm9ybSBpcwogIHVzZWQgd2hlbiBgbnVtYmVyYCBpcyBwYXNzZWQgYXMgdGhl
        IHR5cGUgcGFyYW1ldGVyIHRvIHRoZQogIFtEUy5hdHRyXSguLi8uLi9kYXRh
        I21ldGhvZF9hdHRyKSBmdW5jdGlvbi4KCiAgVXNhZ2UKCiAgYGBgamF2YXNj
        cmlwdAogIHZhciBhdHRyID0gRFMuYXR0cjsKICBBcHAuU2NvcmUgPSBEUy5N
        b2RlbC5leHRlbmQoewogICAgdmFsdWU6IGF0dHIoJ251bWJlcicpLAogICAg
        cGxheWVyOiBEUy5iZWxvbmdzVG8oJ3BsYXllcicpLAogICAgZGF0ZTogYXR0
        cignZGF0ZScpCiAgfSk7CiAgYGBgCgogIEBjbGFzcyBOdW1iZXJUcmFuc2Zv
        cm0KICBAZXh0ZW5kcyBEUy5UcmFuc2Zvcm0KICBAbmFtZXNwYWNlIERTCiAq
        LwpEUy5OdW1iZXJUcmFuc2Zvcm0gPSBEUy5UcmFuc2Zvcm0uZXh0ZW5kKHsK
        CiAgZGVzZXJpYWxpemU6IGZ1bmN0aW9uKHNlcmlhbGl6ZWQpIHsKICAgIHJl
        dHVybiBlbXB0eShzZXJpYWxpemVkKSA/IG51bGwgOiBOdW1iZXIoc2VyaWFs
        aXplZCk7CiAgfSwKCiAgc2VyaWFsaXplOiBmdW5jdGlvbihkZXNlcmlhbGl6
        ZWQpIHsKICAgIHJldHVybiBlbXB0eShkZXNlcmlhbGl6ZWQpID8gbnVsbCA6
        IE51bWJlcihkZXNlcmlhbGl6ZWQpOwogIH0KfSk7Cgp9KSgpOwoKCgooZnVu
        Y3Rpb24oKSB7CnZhciBub25lID0gRW1iZXIuaXNOb25lOwoKLyoqCiAgVGhl
        IGBEUy5TdHJpbmdUcmFuc2Zvcm1gIGNsYXNzIGlzIHVzZWQgdG8gc2VyaWFs
        aXplIGFuZCBkZXNlcmlhbGl6ZQogIHN0cmluZyBhdHRyaWJ1dGVzIG9uIEVt
        YmVyIERhdGEgcmVjb3JkIG9iamVjdHMuIFRoaXMgdHJhbnNmb3JtIGlzCiAg
        dXNlZCB3aGVuIGBzdHJpbmdgIGlzIHBhc3NlZCBhcyB0aGUgdHlwZSBwYXJh
        bWV0ZXIgdG8gdGhlCiAgW0RTLmF0dHJdKC4uLy4uL2RhdGEjbWV0aG9kX2F0
        dHIpIGZ1bmN0aW9uLgoKICBVc2FnZQoKICBgYGBqYXZhc2NyaXB0CiAgdmFy
        IGF0dHIgPSBEUy5hdHRyOwogIEFwcC5Vc2VyID0gRFMuTW9kZWwuZXh0ZW5k
        KHsKICAgIGlzQWRtaW46IGF0dHIoJ2Jvb2xlYW4nKSwKICAgIG5hbWU6IGF0
        dHIoJ3N0cmluZycpLAogICAgZW1haWw6IGF0dHIoJ3N0cmluZycpCiAgfSk7
        CiAgYGBgCgogIEBjbGFzcyBTdHJpbmdUcmFuc2Zvcm0KICBAZXh0ZW5kcyBE
        Uy5UcmFuc2Zvcm0KICBAbmFtZXNwYWNlIERTCiAqLwpEUy5TdHJpbmdUcmFu
        c2Zvcm0gPSBEUy5UcmFuc2Zvcm0uZXh0ZW5kKHsKCiAgZGVzZXJpYWxpemU6
        IGZ1bmN0aW9uKHNlcmlhbGl6ZWQpIHsKICAgIHJldHVybiBub25lKHNlcmlh
        bGl6ZWQpID8gbnVsbCA6IFN0cmluZyhzZXJpYWxpemVkKTsKICB9LAoKICBz
        ZXJpYWxpemU6IGZ1bmN0aW9uKGRlc2VyaWFsaXplZCkgewogICAgcmV0dXJu
        IG5vbmUoZGVzZXJpYWxpemVkKSA/IG51bGwgOiBTdHJpbmcoZGVzZXJpYWxp
        emVkKTsKICB9Cgp9KTsKCn0pKCk7CgoKCihmdW5jdGlvbigpIHsKCn0pKCk7
        CgoKCihmdW5jdGlvbigpIHsKLyoqCiAgQG1vZHVsZSBlbWJlci1kYXRhCiov
        Cgp2YXIgc2V0ID0gRW1iZXIuc2V0OwoKLyoKICBUaGlzIGNvZGUgcmVnaXN0
        ZXJzIGFuIGluamVjdGlvbiBmb3IgRW1iZXIuQXBwbGljYXRpb24uCgogIElm
        IGFuIEVtYmVyLmpzIGRldmVsb3BlciBkZWZpbmVzIGEgc3ViY2xhc3Mgb2Yg
        RFMuU3RvcmUgb24gdGhlaXIgYXBwbGljYXRpb24sCiAgdGhpcyBjb2RlIHdp
        bGwgYXV0b21hdGljYWxseSBpbnN0YW50aWF0ZSBpdCBhbmQgbWFrZSBpdCBh
        dmFpbGFibGUgb24gdGhlCiAgcm91dGVyLgoKICBBZGRpdGlvbmFsbHksIGFm
        dGVyIGFuIGFwcGxpY2F0aW9uJ3MgY29udHJvbGxlcnMgaGF2ZSBiZWVuIGlu
        amVjdGVkLCB0aGV5IHdpbGwKICBlYWNoIGhhdmUgdGhlIHN0b3JlIG1hZGUg
        YXZhaWxhYmxlIHRvIHRoZW0uCgogIEZvciBleGFtcGxlLCBpbWFnaW5lIGFu
        IEVtYmVyLmpzIGFwcGxpY2F0aW9uIHdpdGggdGhlIGZvbGxvd2luZyBjbGFz
        c2VzOgoKICBBcHAuU3RvcmUgPSBEUy5TdG9yZS5leHRlbmQoewogICAgYWRh
        cHRlcjogJ2N1c3RvbScKICB9KTsKCiAgQXBwLlBvc3RzQ29udHJvbGxlciA9
        IEVtYmVyLkFycmF5Q29udHJvbGxlci5leHRlbmQoewogICAgLy8gLi4uCiAg
        fSk7CgogIFdoZW4gdGhlIGFwcGxpY2F0aW9uIGlzIGluaXRpYWxpemVkLCBg
        QXBwLlN0b3JlYCB3aWxsIGF1dG9tYXRpY2FsbHkgYmUKICBpbnN0YW50aWF0
        ZWQsIGFuZCB0aGUgaW5zdGFuY2Ugb2YgYEFwcC5Qb3N0c0NvbnRyb2xsZXJg
        IHdpbGwgaGF2ZSBpdHMgYHN0b3JlYAogIHByb3BlcnR5IHNldCB0byB0aGF0
        IGluc3RhbmNlLgoKICBOb3RlIHRoYXQgdGhpcyBjb2RlIHdpbGwgb25seSBi
        ZSBydW4gaWYgdGhlIGBlbWJlci1hcHBsaWNhdGlvbmAgcGFja2FnZSBpcwog
        IGxvYWRlZC4gSWYgRW1iZXIgRGF0YSBpcyBiZWluZyB1c2VkIGluIGFuIGVu
        dmlyb25tZW50IG90aGVyIHRoYW4gYQogIHR5cGljYWwgYXBwbGljYXRpb24g
        KGUuZy4sIG5vZGUuanMgd2hlcmUgb25seSBgZW1iZXItcnVudGltZWAgaXMg
        YXZhaWxhYmxlKSwKICB0aGlzIGNvZGUgd2lsbCBiZSBpZ25vcmVkLgoqLwoK
        RW1iZXIub25Mb2FkKCdFbWJlci5BcHBsaWNhdGlvbicsIGZ1bmN0aW9uKEFw
        cGxpY2F0aW9uKSB7CiAgQXBwbGljYXRpb24uaW5pdGlhbGl6ZXIoewogICAg
        bmFtZTogInN0b3JlIiwKCiAgICBpbml0aWFsaXplOiBmdW5jdGlvbihjb250
        YWluZXIsIGFwcGxpY2F0aW9uKSB7CiAgICAgIGFwcGxpY2F0aW9uLnJlZ2lz
        dGVyKCdzdG9yZTptYWluJywgYXBwbGljYXRpb24uU3RvcmUgfHwgRFMuU3Rv
        cmUpOwoKICAgICAgLy8gYWxsb3cgb2xkZXIgbmFtZXMgdG8gYmUgbG9va2Vk
        IHVwCgogICAgICB2YXIgcHJveHkgPSBuZXcgRFMuQ29udGFpbmVyUHJveHko
        Y29udGFpbmVyKTsKICAgICAgcHJveHkucmVnaXN0ZXJEZXByZWNhdGlvbnMo
        WwogICAgICAgIHtkZXByZWNhdGVkOiAnc2VyaWFsaXplcjpfZGVmYXVsdCcs
        ICB2YWxpZDogJ3NlcmlhbGl6ZXI6LWRlZmF1bHQnfSwKICAgICAgICB7ZGVw
        cmVjYXRlZDogJ3NlcmlhbGl6ZXI6X3Jlc3QnLCAgICAgdmFsaWQ6ICdzZXJp
        YWxpemVyOi1yZXN0J30sCiAgICAgICAge2RlcHJlY2F0ZWQ6ICdhZGFwdGVy
        Ol9yZXN0JywgICAgICAgIHZhbGlkOiAnYWRhcHRlcjotcmVzdCd9CiAgICAg
        IF0pOwoKICAgICAgLy8gbmV3IGdvIGZvcndhcmQgcGF0aHMKICAgICAgYXBw
        bGljYXRpb24ucmVnaXN0ZXIoJ3NlcmlhbGl6ZXI6LWRlZmF1bHQnLCBEUy5K
        U09OU2VyaWFsaXplcik7CiAgICAgIGFwcGxpY2F0aW9uLnJlZ2lzdGVyKCdz
        ZXJpYWxpemVyOi1yZXN0JywgRFMuUkVTVFNlcmlhbGl6ZXIpOwogICAgICBh
        cHBsaWNhdGlvbi5yZWdpc3RlcignYWRhcHRlcjotcmVzdCcsIERTLlJFU1RB
        ZGFwdGVyKTsKCiAgICAgIC8vIEVhZ2VybHkgZ2VuZXJhdGUgdGhlIHN0b3Jl
        IHNvIGRlZmF1bHRTdG9yZSBpcyBwb3B1bGF0ZWQuCiAgICAgIC8vIFRPRE86
        IERvIHRoaXMgaW4gYSBmaW5pc2hlciBob29rCiAgICAgIGNvbnRhaW5lci5s
        b29rdXAoJ3N0b3JlOm1haW4nKTsKICAgIH0KICB9KTsKCiAgQXBwbGljYXRp
        b24uaW5pdGlhbGl6ZXIoewogICAgbmFtZTogInRyYW5zZm9ybXMiLAogICAg
        YmVmb3JlOiAic3RvcmUiLAoKICAgIGluaXRpYWxpemU6IGZ1bmN0aW9uKGNv
        bnRhaW5lciwgYXBwbGljYXRpb24pIHsKICAgICAgYXBwbGljYXRpb24ucmVn
        aXN0ZXIoJ3RyYW5zZm9ybTpib29sZWFuJywgRFMuQm9vbGVhblRyYW5zZm9y
        bSk7CiAgICAgIGFwcGxpY2F0aW9uLnJlZ2lzdGVyKCd0cmFuc2Zvcm06ZGF0
        ZScsIERTLkRhdGVUcmFuc2Zvcm0pOwogICAgICBhcHBsaWNhdGlvbi5yZWdp
        c3RlcigndHJhbnNmb3JtOm51bWJlcicsIERTLk51bWJlclRyYW5zZm9ybSk7
        CiAgICAgIGFwcGxpY2F0aW9uLnJlZ2lzdGVyKCd0cmFuc2Zvcm06c3RyaW5n
        JywgRFMuU3RyaW5nVHJhbnNmb3JtKTsKICAgIH0KICB9KTsKCiAgQXBwbGlj
        YXRpb24uaW5pdGlhbGl6ZXIoewogICAgbmFtZTogImRhdGEtYWRhcHRlciIs
        CiAgICBiZWZvcmU6ICJzdG9yZSIsCgogICAgaW5pdGlhbGl6ZTogZnVuY3Rp
        b24oY29udGFpbmVyLCBhcHBsaWNhdGlvbikgewogICAgICBhcHBsaWNhdGlv
        bi5yZWdpc3RlcignZGF0YS1hZGFwdGVyOm1haW4nLCBEUy5EZWJ1Z0FkYXB0
        ZXIpOwogICAgfQogIH0pOwoKICBBcHBsaWNhdGlvbi5pbml0aWFsaXplcih7
        CiAgICBuYW1lOiAiaW5qZWN0U3RvcmUiLAogICAgYmVmb3JlOiAic3RvcmUi
        LAoKICAgIGluaXRpYWxpemU6IGZ1bmN0aW9uKGNvbnRhaW5lciwgYXBwbGlj
        YXRpb24pIHsKICAgICAgYXBwbGljYXRpb24uaW5qZWN0KCdjb250cm9sbGVy
        JywgJ3N0b3JlJywgJ3N0b3JlOm1haW4nKTsKICAgICAgYXBwbGljYXRpb24u
        aW5qZWN0KCdyb3V0ZScsICdzdG9yZScsICdzdG9yZTptYWluJyk7CiAgICAg
        IGFwcGxpY2F0aW9uLmluamVjdCgnc2VyaWFsaXplcicsICdzdG9yZScsICdz
        dG9yZTptYWluJyk7CiAgICAgIGFwcGxpY2F0aW9uLmluamVjdCgnZGF0YS1h
        ZGFwdGVyJywgJ3N0b3JlJywgJ3N0b3JlOm1haW4nKTsKICAgIH0KICB9KTsK
        Cn0pOwoKfSkoKTsKCgoKKGZ1bmN0aW9uKCkgewovKioKICBAbW9kdWxlIGVt
        YmVyLWRhdGEKKi8KCi8qKgogIERhdGUucGFyc2Ugd2l0aCBwcm9ncmVzc2l2
        ZSBlbmhhbmNlbWVudCBmb3IgSVNPIDg2MDEgPGh0dHBzOi8vZ2l0aHViLmNv
        bS9jc25vdmVyL2pzLWlzbzg2MDE+CgogIMKpIDIwMTEgQ29saW4gU25vdmVy
        IDxodHRwOi8vemV0YWZsZWV0LmNvbT4KCiAgUmVsZWFzZWQgdW5kZXIgTUlU
        IGxpY2Vuc2UuCgogIEBjbGFzcyBEYXRlCiAgQG5hbWVzcGFjZSBFbWJlcgog
        IEBzdGF0aWMKKi8KRW1iZXIuRGF0ZSA9IEVtYmVyLkRhdGUgfHwge307Cgp2
        YXIgb3JpZ1BhcnNlID0gRGF0ZS5wYXJzZSwgbnVtZXJpY0tleXMgPSBbIDEs
        IDQsIDUsIDYsIDcsIDEwLCAxMSBdOwoKLyoqCiAgQG1ldGhvZCBwYXJzZQog
        IEBwYXJhbSBkYXRlCiovCkVtYmVyLkRhdGUucGFyc2UgPSBmdW5jdGlvbiAo
        ZGF0ZSkgewogICAgdmFyIHRpbWVzdGFtcCwgc3RydWN0LCBtaW51dGVzT2Zm
        c2V0ID0gMDsKCiAgICAvLyBFUzUgwqcxNS45LjQuMiBzdGF0ZXMgdGhhdCB0
        aGUgc3RyaW5nIHNob3VsZCBhdHRlbXB0IHRvIGJlIHBhcnNlZCBhcyBhIERh
        dGUgVGltZSBTdHJpbmcgRm9ybWF0IHN0cmluZwogICAgLy8gYmVmb3JlIGZh
        bGxpbmcgYmFjayB0byBhbnkgaW1wbGVtZW50YXRpb24tc3BlY2lmaWMgZGF0
        ZSBwYXJzaW5nLCBzbyB0aGF04oCZcyB3aGF0IHdlIGRvLCBldmVuIGlmIG5h
        dGl2ZQogICAgLy8gaW1wbGVtZW50YXRpb25zIGNvdWxkIGJlIGZhc3Rlcgog
        ICAgLy8gICAgICAgICAgICAgIDEgWVlZWSAgICAgICAgICAgICAgICAyIE1N
        ICAgICAgIDMgREQgICAgICAgICAgIDQgSEggICAgNSBtbSAgICAgICA2IHNz
        ICAgICAgICA3IG1zZWMgICAgICAgIDggWiA5IMKxICAgIDEwIHR6SEggICAg
        MTEgdHptbQogICAgaWYgKChzdHJ1Y3QgPSAvXihcZHs0fXxbK1wtXVxkezZ9
        KSg/Oi0oXGR7Mn0pKD86LShcZHsyfSkpPyk/KD86VChcZHsyfSk6KFxkezJ9
        KSg/OjooXGR7Mn0pKD86XC4oXGR7M30pKT8pPyg/OihaKXwoWytcLV0pKFxk
        ezJ9KSg/OjooXGR7Mn0pKT8pPyk/JC8uZXhlYyhkYXRlKSkpIHsKICAgICAg
        ICAvLyBhdm9pZCBOYU4gdGltZXN0YW1wcyBjYXVzZWQgYnkg4oCcdW5kZWZp
        bmVk4oCdIHZhbHVlcyBiZWluZyBwYXNzZWQgdG8gRGF0ZS5VVEMKICAgICAg
        ICBmb3IgKHZhciBpID0gMCwgazsgKGsgPSBudW1lcmljS2V5c1tpXSk7ICsr
        aSkgewogICAgICAgICAgICBzdHJ1Y3Rba10gPSArc3RydWN0W2tdIHx8IDA7
        CiAgICAgICAgfQoKICAgICAgICAvLyBhbGxvdyB1bmRlZmluZWQgZGF5cyBh
        bmQgbW9udGhzCiAgICAgICAgc3RydWN0WzJdID0gKCtzdHJ1Y3RbMl0gfHwg
        MSkgLSAxOwogICAgICAgIHN0cnVjdFszXSA9ICtzdHJ1Y3RbM10gfHwgMTsK
        CiAgICAgICAgaWYgKHN0cnVjdFs4XSAhPT0gJ1onICYmIHN0cnVjdFs5XSAh
        PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgIG1pbnV0ZXNPZmZzZXQgPSBz
        dHJ1Y3RbMTBdICogNjAgKyBzdHJ1Y3RbMTFdOwoKICAgICAgICAgICAgaWYg
        KHN0cnVjdFs5XSA9PT0gJysnKSB7CiAgICAgICAgICAgICAgICBtaW51dGVz
        T2Zmc2V0ID0gMCAtIG1pbnV0ZXNPZmZzZXQ7CiAgICAgICAgICAgIH0KICAg
        ICAgICB9CgogICAgICAgIHRpbWVzdGFtcCA9IERhdGUuVVRDKHN0cnVjdFsx
        XSwgc3RydWN0WzJdLCBzdHJ1Y3RbM10sIHN0cnVjdFs0XSwgc3RydWN0WzVd
        ICsgbWludXRlc09mZnNldCwgc3RydWN0WzZdLCBzdHJ1Y3RbN10pOwogICAg
        fQogICAgZWxzZSB7CiAgICAgICAgdGltZXN0YW1wID0gb3JpZ1BhcnNlID8g
        b3JpZ1BhcnNlKGRhdGUpIDogTmFOOwogICAgfQoKICAgIHJldHVybiB0aW1l
        c3RhbXA7Cn07CgppZiAoRW1iZXIuRVhURU5EX1BST1RPVFlQRVMgPT09IHRy
        dWUgfHwgRW1iZXIuRVhURU5EX1BST1RPVFlQRVMuRGF0ZSkgewogIERhdGUu
        cGFyc2UgPSBFbWJlci5EYXRlLnBhcnNlOwp9Cgp9KSgpOwoKCgooZnVuY3Rp
        b24oKSB7Cgp9KSgpOwoKCgooZnVuY3Rpb24oKSB7Ci8qKgogIEBtb2R1bGUg
        ZW1iZXItZGF0YQoqLwoKdmFyIGdldCA9IEVtYmVyLmdldCwgc2V0ID0gRW1i
        ZXIuc2V0OwoKLyoqCiAgQSByZWNvcmQgYXJyYXkgaXMgYW4gYXJyYXkgdGhh
        dCBjb250YWlucyByZWNvcmRzIG9mIGEgY2VydGFpbiB0eXBlLiBUaGUgcmVj
        b3JkCiAgYXJyYXkgbWF0ZXJpYWxpemVzIHJlY29yZHMgYXMgbmVlZGVkIHdo
        ZW4gdGhleSBhcmUgcmV0cmlldmVkIGZvciB0aGUgZmlyc3QKICB0aW1lLiBZ
        b3Ugc2hvdWxkIG5vdCBjcmVhdGUgcmVjb3JkIGFycmF5cyB5b3Vyc2VsZi4g
        SW5zdGVhZCwgYW4gaW5zdGFuY2Ugb2YKICBgRFMuUmVjb3JkQXJyYXlgIG9y
        IGl0cyBzdWJjbGFzc2VzIHdpbGwgYmUgcmV0dXJuZWQgYnkgeW91ciBhcHBs
        aWNhdGlvbidzIHN0b3JlCiAgaW4gcmVzcG9uc2UgdG8gcXVlcmllcy4KCiAg
        QGNsYXNzIFJlY29yZEFycmF5CiAgQG5hbWVzcGFjZSBEUwogIEBleHRlbmRz
        IEVtYmVyLkFycmF5UHJveHkKICBAdXNlcyBFbWJlci5FdmVudGVkCiovCgpE
        Uy5SZWNvcmRBcnJheSA9IEVtYmVyLkFycmF5UHJveHkuZXh0ZW5kKEVtYmVy
        LkV2ZW50ZWQsIHsKICAvKioKICAgIFRoZSBtb2RlbCB0eXBlIGNvbnRhaW5l
        ZCBieSB0aGlzIHJlY29yZCBhcnJheS4KCiAgICBAcHJvcGVydHkgdHlwZQog
        ICAgQHR5cGUgRFMuTW9kZWwKICAqLwogIHR5cGU6IG51bGwsCgogIC8qKgog
        ICAgVGhlIGFycmF5IG9mIGNsaWVudCBpZHMgYmFja2luZyB0aGUgcmVjb3Jk
        IGFycmF5LiBXaGVuIGEKICAgIHJlY29yZCBpcyByZXF1ZXN0ZWQgZnJvbSB0
        aGUgcmVjb3JkIGFycmF5LCB0aGUgcmVjb3JkCiAgICBmb3IgdGhlIGNsaWVu
        dCBpZCBhdCB0aGUgc2FtZSBpbmRleCBpcyBtYXRlcmlhbGl6ZWQsIGlmCiAg
        ICBuZWNlc3NhcnksIGJ5IHRoZSBzdG9yZS4KCiAgICBAcHJvcGVydHkgY29u
        dGVudAogICAgQHByaXZhdGUKICAgIEB0eXBlIEVtYmVyLkFycmF5CiAgKi8K
        ICBjb250ZW50OiBudWxsLAoKICAvKioKICAgIFRoZSBmbGFnIHRvIHNpZ25h
        bCBhIGBSZWNvcmRBcnJheWAgaXMgY3VycmVudGx5IGxvYWRpbmcgZGF0YS4K
        CiAgICBFeGFtcGxlCgogICAgYGBgamF2YXNjcmlwdAogICAgdmFyIHBlb3Bs
        ZSA9IHN0b3JlLmFsbChBcHAuUGVyc29uKTsKICAgIHBlb3BsZS5nZXQoJ2lz
        TG9hZGVkJyk7IC8vIHRydWUKICAgIGBgYAoKICAgIEBwcm9wZXJ0eSBpc0xv
        YWRlZAogICAgQHR5cGUgQm9vbGVhbgogICovCiAgaXNMb2FkZWQ6IGZhbHNl
        LAogIC8qKgogICAgVGhlIGZsYWcgdG8gc2lnbmFsIGEgYFJlY29yZEFycmF5
        YCBpcyBjdXJyZW50bHkgbG9hZGluZyBkYXRhLgoKICAgIEV4YW1wbGUKCiAg
        ICBgYGBqYXZhc2NyaXB0CiAgICB2YXIgcGVvcGxlID0gc3RvcmUuYWxsKEFw
        cC5QZXJzb24pOwogICAgcGVvcGxlLmdldCgnaXNVcGRhdGluZycpOyAvLyBm
        YWxzZQogICAgcGVvcGxlLnVwZGF0ZSgpOwogICAgcGVvcGxlLmdldCgnaXNV
        cGRhdGluZycpOyAvLyB0cnVlCiAgICBgYGAKCiAgICBAcHJvcGVydHkgaXNV
        cGRhdGluZwogICAgQHR5cGUgQm9vbGVhbgogICovCiAgaXNVcGRhdGluZzog
        ZmFsc2UsCgogIC8qKgogICAgVGhlIHN0b3JlIHRoYXQgY3JlYXRlZCB0aGlz
        IHJlY29yZCBhcnJheS4KCiAgICBAcHJvcGVydHkgc3RvcmUKICAgIEBwcml2
        YXRlCiAgICBAdHlwZSBEUy5TdG9yZQogICovCiAgc3RvcmU6IG51bGwsCgog
        IC8qKgogICAgUmV0cmlldmVzIGFuIG9iamVjdCBmcm9tIHRoZSBjb250ZW50
        IGJ5IGluZGV4LgoKICAgIEBtZXRob2Qgb2JqZWN0QXRDb250ZW50CiAgICBA
        cHJpdmF0ZQogICAgQHBhcmFtIHtOdW1iZXJ9IGluZGV4CiAgICBAcmV0dXJu
        IHtEUy5Nb2RlbH0gcmVjb3JkCiAgKi8KICBvYmplY3RBdENvbnRlbnQ6IGZ1
        bmN0aW9uKGluZGV4KSB7CiAgICB2YXIgY29udGVudCA9IGdldCh0aGlzLCAn
        Y29udGVudCcpOwoKICAgIHJldHVybiBjb250ZW50Lm9iamVjdEF0KGluZGV4
        KTsKICB9LAoKICAvKioKICAgIFVzZWQgdG8gZ2V0IHRoZSBsYXRlc3QgdmVy
        c2lvbiBvZiBhbGwgb2YgdGhlIHJlY29yZHMgaW4gdGhpcyBhcnJheQogICAg
        ZnJvbSB0aGUgYWRhcHRlci4KCiAgICBFeGFtcGxlCgogICAgYGBgamF2YXNj
        cmlwdAogICAgdmFyIHBlb3BsZSA9IHN0b3JlLmFsbChBcHAuUGVyc29uKTsK
        ICAgIHBlb3BsZS5nZXQoJ2lzVXBkYXRpbmcnKTsgLy8gZmFsc2UKICAgIHBl
        b3BsZS51cGRhdGUoKTsKICAgIHBlb3BsZS5nZXQoJ2lzVXBkYXRpbmcnKTsg
        Ly8gdHJ1ZQogICAgYGBgCgogICAgQG1ldGhvZCB1cGRhdGUKICAqLwogIHVw
        ZGF0ZTogZnVuY3Rpb24oKSB7CiAgICBpZiAoZ2V0KHRoaXMsICdpc1VwZGF0
        aW5nJykpIHsgcmV0dXJuOyB9CgogICAgdmFyIHN0b3JlID0gZ2V0KHRoaXMs
        ICdzdG9yZScpLAogICAgICAgIHR5cGUgPSBnZXQodGhpcywgJ3R5cGUnKTsK
        CiAgICByZXR1cm4gc3RvcmUuZmV0Y2hBbGwodHlwZSwgdGhpcyk7CiAgfSwK
        CiAgLyoqCiAgICBBZGRzIGEgcmVjb3JkIHRvIHRoZSBgUmVjb3JkQXJyYXlg
        LgoKICAgIEBtZXRob2QgYWRkUmVjb3JkCiAgICBAcHJpdmF0ZQogICAgQHBh
        cmFtIHtEUy5Nb2RlbH0gcmVjb3JkCiAgKi8KICBhZGRSZWNvcmQ6IGZ1bmN0
        aW9uKHJlY29yZCkgewogICAgZ2V0KHRoaXMsICdjb250ZW50JykuYWRkT2Jq
        ZWN0KHJlY29yZCk7CiAgfSwKCiAgLyoqCiAgICBSZW1vdmVzIGEgcmVjb3Jk
        IHRvIHRoZSBgUmVjb3JkQXJyYXlgLgoKICAgIEBtZXRob2QgcmVtb3ZlUmVj
        b3JkCiAgICBAcHJpdmF0ZQogICAgQHBhcmFtIHtEUy5Nb2RlbH0gcmVjb3Jk
        CiAgKi8KICByZW1vdmVSZWNvcmQ6IGZ1bmN0aW9uKHJlY29yZCkgewogICAg
        Z2V0KHRoaXMsICdjb250ZW50JykucmVtb3ZlT2JqZWN0KHJlY29yZCk7CiAg
        fSwKCiAgLyoqCiAgICBTYXZlcyBhbGwgb2YgdGhlIHJlY29yZHMgaW4gdGhl
        IGBSZWNvcmRBcnJheWAuCgogICAgRXhhbXBsZQoKICAgIGBgYGphdmFzY3Jp
        cHQKICAgIHZhciBtZXNzYWdlcyA9IHN0b3JlLmFsbChBcHAuTWVzc2FnZSk7
        CiAgICBtZXNzYWdlcy5mb3JFYWNoKGZ1bmN0aW9uKG1lc3NhZ2UpIHsKICAg
        ICAgbWVzc2FnZS5zZXQoJ2hhc0JlZW5TZWVuJywgdHJ1ZSk7CiAgICB9KTsK
        ICAgIG1lc3NhZ2VzLnNhdmUoKTsKICAgIGBgYAoKICAgIEBtZXRob2Qgc2F2
        ZQogICAgQHJldHVybiB7RFMuUHJvbWlzZUFycmF5fSBwcm9taXNlCiAgKi8K
        ICBzYXZlOiBmdW5jdGlvbigpIHsKICAgIHZhciBwcm9taXNlTGFiZWwgPSAi
        RFM6IFJlY29yZEFycmF5I3NhdmUgIiArIGdldCh0aGlzLCAndHlwZScpOwog
        ICAgdmFyIHByb21pc2UgPSBFbWJlci5SU1ZQLmFsbCh0aGlzLmludm9rZSgi
        c2F2ZSIpLCBwcm9taXNlTGFiZWwpLnRoZW4oZnVuY3Rpb24oYXJyYXkpIHsK
        ICAgICAgcmV0dXJuIEVtYmVyLkEoYXJyYXkpOwogICAgfSwgbnVsbCwgIkRT
        OiBSZWNvcmRBcnJheSNzYXZlIGFwcGx5IEVtYmVyLk5hdGl2ZUFycmF5Iik7
        CgogICAgcmV0dXJuIERTLlByb21pc2VBcnJheS5jcmVhdGUoeyBwcm9taXNl
        OiBwcm9taXNlIH0pOwogIH0KfSk7Cgp9KSgpOwoKCgooZnVuY3Rpb24oKSB7
        Ci8qKgogIEBtb2R1bGUgZW1iZXItZGF0YQoqLwoKdmFyIGdldCA9IEVtYmVy
        LmdldDsKCi8qKgogIFJlcHJlc2VudHMgYSBsaXN0IG9mIHJlY29yZHMgd2hv
        c2UgbWVtYmVyc2hpcCBpcyBkZXRlcm1pbmVkIGJ5IHRoZQogIHN0b3JlLiBB
        cyByZWNvcmRzIGFyZSBjcmVhdGVkLCBsb2FkZWQsIG9yIG1vZGlmaWVkLCB0
        aGUgc3RvcmUKICBldmFsdWF0ZXMgdGhlbSB0byBkZXRlcm1pbmUgaWYgdGhl
        eSBzaG91bGQgYmUgcGFydCBvZiB0aGUgcmVjb3JkCiAgYXJyYXkuCgogIEBj
        bGFzcyBGaWx0ZXJlZFJlY29yZEFycmF5CiAgQG5hbWVzcGFjZSBEUwogIEBl
        eHRlbmRzIERTLlJlY29yZEFycmF5CiovCkRTLkZpbHRlcmVkUmVjb3JkQXJy
        YXkgPSBEUy5SZWNvcmRBcnJheS5leHRlbmQoewogIC8qKgogICAgVGhlIGZp
        bHRlckZ1bmN0aW9uIGlzIGEgZnVuY3Rpb24gdXNlZCB0byB0ZXN0IHJlY29y
        ZHMgZnJvbSB0aGUgc3RvcmUgdG8KICAgIGRldGVybWluZSBpZiB0aGV5IHNo
        b3VsZCBiZSBwYXJ0IG9mIHRoZSByZWNvcmQgYXJyYXkuCgogICAgRXhhbXBs
        ZQoKICAgIGBgYGphdmFzY3JpcHQKICAgIHZhciBhbGxQZW9wbGUgPSBzdG9y
        ZS5hbGwoJ3BlcnNvbicpOwogICAgYWxsUGVvcGxlLm1hcEJ5KCduYW1lJyk7
        IC8vIFsiVG9tIERhbGUiLCAiWWVodWRhIEthdHoiLCAiVHJlayBHbG93YWNr
        aSJdCgogICAgdmFyIHBlb3BsZSA9IHN0b3JlLmZpbHRlcigncGVyc29uJywg
        ZnVuY3Rpb24ocGVyc29uKSB7CiAgICAgIGlmIChwZXJzb24uZ2V0KCduYW1l
        JykubWF0Y2goL0thdHokLykpIHsgcmV0dXJuIHRydWU7IH0KICAgIH0pOwog
        ICAgcGVvcGxlLm1hcEJ5KCduYW1lJyk7IC8vIFsiWWVodWRhIEthdHoiXQoK
        ICAgIHZhciBub3RLYXR6RmlsdGVyID0gZnVuY3Rpb24ocGVyc29uKSB7CiAg
        ICAgIHJldHVybiAhcGVyc29uLmdldCgnbmFtZScpLm1hdGNoKC9LYXR6JC8p
        OwogICAgfTsKICAgIHBlb3BsZS5zZXQoJ2ZpbHRlckZ1bmN0aW9uJywgbm90
        S2F0ekZpbHRlcik7CiAgICBwZW9wbGUubWFwQnkoJ25hbWUnKTsgLy8gWyJU
        b20gRGFsZSIsICJUcmVrIEdsb3dhY2tpIl0KICAgIGBgYAoKICAgIEBtZXRo
        b2QgZmlsdGVyRnVuY3Rpb24KICAgIEBwYXJhbSB7RFMuTW9kZWx9IHJlY29y
        ZAogICAgQHJldHVybiB7Qm9vbGVhbn0gYHRydWVgIGlmIHRoZSByZWNvcmQg
        c2hvdWxkIGJlIGluIHRoZSBhcnJheQogICovCiAgZmlsdGVyRnVuY3Rpb246
        IG51bGwsCiAgaXNMb2FkZWQ6IHRydWUsCgogIHJlcGxhY2U6IGZ1bmN0aW9u
        KCkgewogICAgdmFyIHR5cGUgPSBnZXQodGhpcywgJ3R5cGUnKS50b1N0cmlu
        ZygpOwogICAgdGhyb3cgbmV3IEVycm9yKCJUaGUgcmVzdWx0IG9mIGEgY2xp
        ZW50LXNpZGUgZmlsdGVyIChvbiAiICsgdHlwZSArICIpIGlzIGltbXV0YWJs
        ZS4iKTsKICB9LAoKICAvKioKICAgIEBtZXRob2QgdXBkYXRlRmlsdGVyCiAg
        ICBAcHJpdmF0ZQogICovCiAgdXBkYXRlRmlsdGVyOiBFbWJlci5vYnNlcnZl
        cihmdW5jdGlvbigpIHsKICAgIHZhciBtYW5hZ2VyID0gZ2V0KHRoaXMsICdt
        YW5hZ2VyJyk7CiAgICBtYW5hZ2VyLnVwZGF0ZUZpbHRlcih0aGlzLCBnZXQo
        dGhpcywgJ3R5cGUnKSwgZ2V0KHRoaXMsICdmaWx0ZXJGdW5jdGlvbicpKTsK
        ICB9LCAnZmlsdGVyRnVuY3Rpb24nKQp9KTsKCn0pKCk7CgoKCihmdW5jdGlv
        bigpIHsKLyoqCiAgQG1vZHVsZSBlbWJlci1kYXRhCiovCgp2YXIgZ2V0ID0g
        RW1iZXIuZ2V0LCBzZXQgPSBFbWJlci5zZXQ7CgovKioKICBSZXByZXNlbnRz
        IGFuIG9yZGVyZWQgbGlzdCBvZiByZWNvcmRzIHdob3NlIG9yZGVyIGFuZCBt
        ZW1iZXJzaGlwIGlzCiAgZGV0ZXJtaW5lZCBieSB0aGUgYWRhcHRlci4gRm9y
        IGV4YW1wbGUsIGEgcXVlcnkgc2VudCB0byB0aGUgYWRhcHRlcgogIG1heSB0
        cmlnZ2VyIGEgc2VhcmNoIG9uIHRoZSBzZXJ2ZXIsIHdob3NlIHJlc3VsdHMg
        d291bGQgYmUgbG9hZGVkCiAgaW50byBhbiBpbnN0YW5jZSBvZiB0aGUgYEFk
        YXB0ZXJQb3B1bGF0ZWRSZWNvcmRBcnJheWAuCgogIEBjbGFzcyBBZGFwdGVy
        UG9wdWxhdGVkUmVjb3JkQXJyYXkKICBAbmFtZXNwYWNlIERTCiAgQGV4dGVu
        ZHMgRFMuUmVjb3JkQXJyYXkKKi8KRFMuQWRhcHRlclBvcHVsYXRlZFJlY29y
        ZEFycmF5ID0gRFMuUmVjb3JkQXJyYXkuZXh0ZW5kKHsKICBxdWVyeTogbnVs
        bCwKCiAgcmVwbGFjZTogZnVuY3Rpb24oKSB7CiAgICB2YXIgdHlwZSA9IGdl
        dCh0aGlzLCAndHlwZScpLnRvU3RyaW5nKCk7CiAgICB0aHJvdyBuZXcgRXJy
        b3IoIlRoZSByZXN1bHQgb2YgYSBzZXJ2ZXIgcXVlcnkgKG9uICIgKyB0eXBl
        ICsgIikgaXMgaW1tdXRhYmxlLiIpOwogIH0sCgogIC8qKgogICAgQG1ldGhv
        ZCBsb2FkCiAgICBAcHJpdmF0ZQogICAgQHBhcmFtIHtBcnJheX0gZGF0YQog
        ICovCiAgbG9hZDogZnVuY3Rpb24oZGF0YSkgewogICAgdmFyIHN0b3JlID0g
        Z2V0KHRoaXMsICdzdG9yZScpLAogICAgICAgIHR5cGUgPSBnZXQodGhpcywg
        J3R5cGUnKSwKICAgICAgICByZWNvcmRzID0gc3RvcmUucHVzaE1hbnkodHlw
        ZSwgZGF0YSksCiAgICAgICAgbWV0YSA9IHN0b3JlLm1ldGFkYXRhRm9yKHR5
        cGUpOwoKICAgIHRoaXMuc2V0UHJvcGVydGllcyh7CiAgICAgIGNvbnRlbnQ6
        IEVtYmVyLkEocmVjb3JkcyksCiAgICAgIGlzTG9hZGVkOiB0cnVlLAogICAg
        ICBtZXRhOiBtZXRhCiAgICB9KTsKCiAgICAvLyBUT0RPOiBkb2VzIHRyaWdn
        ZXJpbmcgZGlkTG9hZCBldmVudCBzaG91bGQgYmUgdGhlIGxhc3QgYWN0aW9u
        IG9mIHRoZSBydW5Mb29wPwogICAgRW1iZXIucnVuLm9uY2UodGhpcywgJ3Ry
        aWdnZXInLCAnZGlkTG9hZCcpOwogIH0KfSk7Cgp9KSgpOwoKCgooZnVuY3Rp
        b24oKSB7Ci8qKgogIEBtb2R1bGUgZW1iZXItZGF0YQoqLwoKdmFyIGdldCA9
        IEVtYmVyLmdldCwgc2V0ID0gRW1iZXIuc2V0Owp2YXIgbWFwID0gRW1iZXIu
        RW51bWVyYWJsZVV0aWxzLm1hcDsKCi8qKgogIEEgYE1hbnlBcnJheWAgaXMg
        YSBgUmVjb3JkQXJyYXlgIHRoYXQgcmVwcmVzZW50cyB0aGUgY29udGVudHMg
        b2YgYSBoYXMtbWFueQogIHJlbGF0aW9uc2hpcC4KCiAgVGhlIGBNYW55QXJy
        YXlgIGlzIGluc3RhbnRpYXRlZCBsYXppbHkgdGhlIGZpcnN0IHRpbWUgdGhl
        IHJlbGF0aW9uc2hpcCBpcwogIHJlcXVlc3RlZC4KCiAgIyMjIEludmVyc2Vz
        CgogIE9mdGVuLCB0aGUgcmVsYXRpb25zaGlwcyBpbiBFbWJlciBEYXRhIGFw
        cGxpY2F0aW9ucyB3aWxsIGhhdmUKICBhbiBpbnZlcnNlLiBGb3IgZXhhbXBs
        ZSwgaW1hZ2luZSB0aGUgZm9sbG93aW5nIG1vZGVscyBhcmUKICBkZWZpbmVk
        OgoKICBgYGBqYXZhc2NyaXB0CiAgQXBwLlBvc3QgPSBEUy5Nb2RlbC5leHRl
        bmQoewogICAgY29tbWVudHM6IERTLmhhc01hbnkoJ2NvbW1lbnQnKQogIH0p
        OwoKICBBcHAuQ29tbWVudCA9IERTLk1vZGVsLmV4dGVuZCh7CiAgICBwb3N0
        OiBEUy5iZWxvbmdzVG8oJ3Bvc3QnKQogIH0pOwogIGBgYAoKICBJZiB5b3Ug
        Y3JlYXRlZCBhIG5ldyBpbnN0YW5jZSBvZiBgQXBwLlBvc3RgIGFuZCBhZGRl
        ZAogIGEgYEFwcC5Db21tZW50YCByZWNvcmQgdG8gaXRzIGBjb21tZW50c2Ag
        aGFzLW1hbnkKICByZWxhdGlvbnNoaXAsIHlvdSB3b3VsZCBleHBlY3QgdGhl
        IGNvbW1lbnQncyBgcG9zdGAKICBwcm9wZXJ0eSB0byBiZSBzZXQgdG8gdGhl
        IHBvc3QgdGhhdCBjb250YWluZWQKICB0aGUgaGFzLW1hbnkuCgogIFdlIGNh
        bGwgdGhlIHJlY29yZCB0byB3aGljaCBhIHJlbGF0aW9uc2hpcCBiZWxvbmdz
        IHRoZQogIHJlbGF0aW9uc2hpcCdzIF9vd25lcl8uCgogIEBjbGFzcyBNYW55
        QXJyYXkKICBAbmFtZXNwYWNlIERTCiAgQGV4dGVuZHMgRFMuUmVjb3JkQXJy
        YXkKKi8KRFMuTWFueUFycmF5ID0gRFMuUmVjb3JkQXJyYXkuZXh0ZW5kKHsK
        ICBpbml0OiBmdW5jdGlvbigpIHsKICAgIHRoaXMuX3N1cGVyLmFwcGx5KHRo
        aXMsIGFyZ3VtZW50cyk7CiAgICB0aGlzLl9jaGFuZ2VzVG9TeW5jID0gRW1i
        ZXIuT3JkZXJlZFNldC5jcmVhdGUoKTsKICB9LAoKICAvKioKICAgIFRoZSBw
        cm9wZXJ0eSBuYW1lIG9mIHRoZSByZWxhdGlvbnNoaXAKCiAgICBAcHJvcGVy
        dHkge1N0cmluZ30gbmFtZQogICAgQHByaXZhdGUKICAqLwogIG5hbWU6IG51
        bGwsCgogIC8qKgogICAgVGhlIHJlY29yZCB0byB3aGljaCB0aGlzIHJlbGF0
        aW9uc2hpcCBiZWxvbmdzLgoKICAgIEBwcm9wZXJ0eSB7RFMuTW9kZWx9IG93
        bmVyCiAgICBAcHJpdmF0ZQogICovCiAgb3duZXI6IG51bGwsCgogIC8qKgog
        ICAgYHRydWVgIGlmIHRoZSByZWxhdGlvbnNoaXAgaXMgcG9seW1vcnBoaWMs
        IGBmYWxzZWAgb3RoZXJ3aXNlLgoKICAgIEBwcm9wZXJ0eSB7Qm9vbGVhbn0g
        aXNQb2x5bW9ycGhpYwogICAgQHByaXZhdGUKICAqLwogIGlzUG9seW1vcnBo
        aWM6IGZhbHNlLAoKICAvLyBMT0FESU5HIFNUQVRFCgogIGlzTG9hZGVkOiBm
        YWxzZSwKCiAgLyoqCiAgICBVc2VkIGZvciBhc3luYyBgaGFzTWFueWAgYXJy
        YXlzCiAgICB0byBrZWVwIHRyYWNrIG9mIHdoZW4gdGhleSB3aWxsIHJlc29s
        dmUuCgogICAgQHByb3BlcnR5IHtFbWJlci5SU1ZQLlByb21pc2V9IHByb21p
        c2UKICAgIEBwcml2YXRlCiAgKi8KICBwcm9taXNlOiBudWxsLAoKICAvKioK
        ICAgIEBtZXRob2QgbG9hZGluZ1JlY29yZHNDb3VudAogICAgQHBhcmFtIHtO
        dW1iZXJ9IGNvdW50CiAgICBAcHJpdmF0ZQogICovCiAgbG9hZGluZ1JlY29y
        ZHNDb3VudDogZnVuY3Rpb24oY291bnQpIHsKICAgIHRoaXMubG9hZGluZ1Jl
        Y29yZHNDb3VudCA9IGNvdW50OwogIH0sCgogIC8qKgogICAgQG1ldGhvZCBs
        b2FkZWRSZWNvcmQKICAgIEBwcml2YXRlCiAgKi8KICBsb2FkZWRSZWNvcmQ6
        IGZ1bmN0aW9uKCkgewogICAgdGhpcy5sb2FkaW5nUmVjb3Jkc0NvdW50LS07
        CiAgICBpZiAodGhpcy5sb2FkaW5nUmVjb3Jkc0NvdW50ID09PSAwKSB7CiAg
        ICAgIHNldCh0aGlzLCAnaXNMb2FkZWQnLCB0cnVlKTsKICAgICAgdGhpcy50
        cmlnZ2VyKCdkaWRMb2FkJyk7CiAgICB9CiAgfSwKCiAgLyoqCiAgICBAbWV0
        aG9kIGZldGNoCiAgICBAcHJpdmF0ZQogICovCiAgZmV0Y2g6IGZ1bmN0aW9u
        KCkgewogICAgdmFyIHJlY29yZHMgPSBnZXQodGhpcywgJ2NvbnRlbnQnKSwK
        ICAgICAgICBzdG9yZSA9IGdldCh0aGlzLCAnc3RvcmUnKSwKICAgICAgICBv
        d25lciA9IGdldCh0aGlzLCAnb3duZXInKSwKICAgICAgICByZXNvbHZlciA9
        IEVtYmVyLlJTVlAuZGVmZXIoIkRTOiBNYW55QXJyYXkjZmV0Y2ggIiArIGdl
        dCh0aGlzLCAndHlwZScpKTsKCiAgICB2YXIgdW5sb2FkZWRSZWNvcmRzID0g
        cmVjb3Jkcy5maWx0ZXJQcm9wZXJ0eSgnaXNFbXB0eScsIHRydWUpOwogICAg
        c3RvcmUuZmV0Y2hNYW55KHVubG9hZGVkUmVjb3Jkcywgb3duZXIsIHJlc29s
        dmVyKTsKICB9LAoKICAvLyBPdmVycmlkZXMgRW1iZXIuQXJyYXkncyByZXBs
        YWNlIG1ldGhvZCB0byBpbXBsZW1lbnQKICByZXBsYWNlQ29udGVudDogZnVu
        Y3Rpb24oaW5kZXgsIHJlbW92ZWQsIGFkZGVkKSB7CiAgICAvLyBNYXAgdGhl
        IGFycmF5IG9mIHJlY29yZCBvYmplY3RzIGludG8gYW4gYXJyYXkgb2YgIGNs
        aWVudCBpZHMuCiAgICBhZGRlZCA9IG1hcChhZGRlZCwgZnVuY3Rpb24ocmVj
        b3JkKSB7CiAgICAgIEVtYmVyLmFzc2VydCgiWW91IGNhbm5vdCBhZGQgJyIg
        KyByZWNvcmQuY29uc3RydWN0b3IudHlwZUtleSArICInIHJlY29yZHMgdG8g
        dGhpcyByZWxhdGlvbnNoaXAgKG9ubHkgJyIgKyB0aGlzLnR5cGUudHlwZUtl
        eSArICInIGFsbG93ZWQpIiwgIXRoaXMudHlwZSB8fCByZWNvcmQgaW5zdGFu
        Y2VvZiB0aGlzLnR5cGUpOwogICAgICByZXR1cm4gcmVjb3JkOwogICAgfSwg
        dGhpcyk7CgogICAgdGhpcy5fc3VwZXIoaW5kZXgsIHJlbW92ZWQsIGFkZGVk
        KTsKICB9LAoKICBhcnJhbmdlZENvbnRlbnREaWRDaGFuZ2U6IGZ1bmN0aW9u
        KCkgewogICAgRW1iZXIucnVuLm9uY2UodGhpcywgJ2ZldGNoJyk7CiAgfSwK
        CiAgYXJyYXlDb250ZW50V2lsbENoYW5nZTogZnVuY3Rpb24oaW5kZXgsIHJl
        bW92ZWQsIGFkZGVkKSB7CiAgICB2YXIgb3duZXIgPSBnZXQodGhpcywgJ293
        bmVyJyksCiAgICAgICAgbmFtZSA9IGdldCh0aGlzLCAnbmFtZScpOwoKICAg
        IGlmICghb3duZXIuX3N1c3BlbmRlZFJlbGF0aW9uc2hpcHMpIHsKICAgICAg
        Ly8gVGhpcyBjb2RlIGlzIHRoZSBmaXJzdCBoYWxmIG9mIGNvZGUgdGhhdCBj
        b250aW51ZXMgaW5zaWRlCiAgICAgIC8vIG9mIGFycmF5Q29udGVudERpZENo
        YW5nZS4gSXQgZ2V0cyBvciBjcmVhdGVzIGEgY2hhbmdlIGZyb20KICAgICAg
        Ly8gdGhlIGNoaWxkIG9iamVjdCwgYWRkcyB0aGUgY3VycmVudCBvd25lciBh
        cyB0aGUgb2xkCiAgICAgIC8vIHBhcmVudCBpZiB0aGlzIGlzIHRoZSBmaXJz
        dCB0aW1lIHRoZSBvYmplY3Qgd2FzIHJlbW92ZWQKICAgICAgLy8gZnJvbSBh
        IE1hbnlBcnJheSwgYW5kIHNldHMgYG5ld1BhcmVudGAgdG8gbnVsbC4KICAg
        ICAgLy8KICAgICAgLy8gTGF0ZXIsIGlmIHRoZSBvYmplY3QgaXMgYWRkZWQg
        dG8gYW5vdGhlciBNYW55QXJyYXksCiAgICAgIC8vIHRoZSBgYXJyYXlDb250
        ZW50RGlkQ2hhbmdlYCB3aWxsIHNldCBgbmV3UGFyZW50YCBvbgogICAgICAv
        LyB0aGUgY2hhbmdlLgogICAgICBmb3IgKHZhciBpPWluZGV4OyBpPGluZGV4
        K3JlbW92ZWQ7IGkrKykgewogICAgICAgIHZhciByZWNvcmQgPSBnZXQodGhp
        cywgJ2NvbnRlbnQnKS5vYmplY3RBdChpKTsKCiAgICAgICAgdmFyIGNoYW5n
        ZSA9IERTLlJlbGF0aW9uc2hpcENoYW5nZS5jcmVhdGVDaGFuZ2Uob3duZXIs
        IHJlY29yZCwgZ2V0KHRoaXMsICdzdG9yZScpLCB7CiAgICAgICAgICBwYXJl
        bnRUeXBlOiBvd25lci5jb25zdHJ1Y3RvciwKICAgICAgICAgIGNoYW5nZVR5
        cGU6ICJyZW1vdmUiLAogICAgICAgICAga2luZDogImhhc01hbnkiLAogICAg
        ICAgICAga2V5OiBuYW1lCiAgICAgICAgfSk7CgogICAgICAgIHRoaXMuX2No
        YW5nZXNUb1N5bmMuYWRkKGNoYW5nZSk7CiAgICAgIH0KICAgIH0KCiAgICBy
        ZXR1cm4gdGhpcy5fc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICB9
        LAoKICBhcnJheUNvbnRlbnREaWRDaGFuZ2U6IGZ1bmN0aW9uKGluZGV4LCBy
        ZW1vdmVkLCBhZGRlZCkgewogICAgdGhpcy5fc3VwZXIuYXBwbHkodGhpcywg
        YXJndW1lbnRzKTsKCiAgICB2YXIgb3duZXIgPSBnZXQodGhpcywgJ293bmVy
        JyksCiAgICAgICAgbmFtZSA9IGdldCh0aGlzLCAnbmFtZScpLAogICAgICAg
        IHN0b3JlID0gZ2V0KHRoaXMsICdzdG9yZScpOwoKICAgIGlmICghb3duZXIu
        X3N1c3BlbmRlZFJlbGF0aW9uc2hpcHMpIHsKICAgICAgLy8gVGhpcyBjb2Rl
        IGlzIHRoZSBzZWNvbmQgaGFsZiBvZiBjb2RlIHRoYXQgc3RhcnRlZCBpbgog
        ICAgICAvLyBgYXJyYXlDb250ZW50V2lsbENoYW5nZWAuIEl0IGdldHMgb3Ig
        Y3JlYXRlcyBhIGNoYW5nZQogICAgICAvLyBmcm9tIHRoZSBjaGlsZCBvYmpl
        Y3QsIGFuZCBhZGRzIHRoZSBjdXJyZW50IG93bmVyIGFzCiAgICAgIC8vIHRo
        ZSBuZXcgcGFyZW50LgogICAgICBmb3IgKHZhciBpPWluZGV4OyBpPGluZGV4
        K2FkZGVkOyBpKyspIHsKICAgICAgICB2YXIgcmVjb3JkID0gZ2V0KHRoaXMs
        ICdjb250ZW50Jykub2JqZWN0QXQoaSk7CgogICAgICAgIHZhciBjaGFuZ2Ug
        PSBEUy5SZWxhdGlvbnNoaXBDaGFuZ2UuY3JlYXRlQ2hhbmdlKG93bmVyLCBy
        ZWNvcmQsIHN0b3JlLCB7CiAgICAgICAgICBwYXJlbnRUeXBlOiBvd25lci5j
        b25zdHJ1Y3RvciwKICAgICAgICAgIGNoYW5nZVR5cGU6ICJhZGQiLAogICAg
        ICAgICAga2luZDoiaGFzTWFueSIsCiAgICAgICAgICBrZXk6IG5hbWUKICAg
        ICAgICB9KTsKICAgICAgICBjaGFuZ2UuaGFzTWFueU5hbWUgPSBuYW1lOwoK
        ICAgICAgICB0aGlzLl9jaGFuZ2VzVG9TeW5jLmFkZChjaGFuZ2UpOwogICAg
        ICB9CgogICAgICAvLyBXZSB3YWl0IHVudGlsIHRoZSBhcnJheSBoYXMgZmlu
        aXNoZWQgYmVpbmcKICAgICAgLy8gbXV0YXRlZCBiZWZvcmUgc3luY2luZyB0
        aGUgT25lVG9NYW55Q2hhbmdlcyBjcmVhdGVkCiAgICAgIC8vIGluIGFycmF5
        Q29udGVudFdpbGxDaGFuZ2UsIHNvIHRoYXQgdGhlIGFycmF5CiAgICAgIC8v
        IG1lbWJlcnNoaXAgdGVzdCBpbiB0aGUgc3luYygpIGxvZ2ljIG9wZXJhdGVz
        CiAgICAgIC8vIG9uIHRoZSBmaW5hbCByZXN1bHRzLgogICAgICB0aGlzLl9j
        aGFuZ2VzVG9TeW5jLmZvckVhY2goZnVuY3Rpb24oY2hhbmdlKSB7CiAgICAg
        ICAgY2hhbmdlLnN5bmMoKTsKICAgICAgfSk7CgogICAgICB0aGlzLl9jaGFu
        Z2VzVG9TeW5jLmNsZWFyKCk7CiAgICB9CiAgfSwKCiAgLyoqCiAgICBDcmVh
        dGUgYSBjaGlsZCByZWNvcmQgd2l0aGluIHRoZSBvd25lcgoKICAgIEBtZXRo
        b2QgY3JlYXRlUmVjb3JkCiAgICBAcHJpdmF0ZQogICAgQHBhcmFtIHtPYmpl
        Y3R9IGhhc2gKICAgIEByZXR1cm4ge0RTLk1vZGVsfSByZWNvcmQKICAqLwog
        IGNyZWF0ZVJlY29yZDogZnVuY3Rpb24oaGFzaCkgewogICAgdmFyIG93bmVy
        ID0gZ2V0KHRoaXMsICdvd25lcicpLAogICAgICAgIHN0b3JlID0gZ2V0KG93
        bmVyLCAnc3RvcmUnKSwKICAgICAgICB0eXBlID0gZ2V0KHRoaXMsICd0eXBl
        JyksCiAgICAgICAgcmVjb3JkOwoKICAgIEVtYmVyLmFzc2VydCgiWW91IGNh
        bm5vdCBhZGQgJyIgKyB0eXBlLnR5cGVLZXkgKyAiJyByZWNvcmRzIHRvIHRo
        aXMgcG9seW1vcnBoaWMgcmVsYXRpb25zaGlwLiIsICFnZXQodGhpcywgJ2lz
        UG9seW1vcnBoaWMnKSk7CgogICAgcmVjb3JkID0gc3RvcmUuY3JlYXRlUmVj
        b3JkLmNhbGwoc3RvcmUsIHR5cGUsIGhhc2gpOwogICAgdGhpcy5wdXNoT2Jq
        ZWN0KHJlY29yZCk7CgogICAgcmV0dXJuIHJlY29yZDsKICB9Cgp9KTsKCn0p
        KCk7CgoKCihmdW5jdGlvbigpIHsKLyoqCiAgQG1vZHVsZSBlbWJlci1kYXRh
        CiovCgp9KSgpOwoKCgooZnVuY3Rpb24oKSB7Ci8qZ2xvYmFscyBFbWJlciov
        Ci8qanNoaW50IGVxbnVsbDp0cnVlKi8KLyoqCiAgQG1vZHVsZSBlbWJlci1k
        YXRhCiovCgp2YXIgZ2V0ID0gRW1iZXIuZ2V0LCBzZXQgPSBFbWJlci5zZXQ7
        CnZhciBvbmNlID0gRW1iZXIucnVuLm9uY2U7CnZhciBpc05vbmUgPSBFbWJl
        ci5pc05vbmU7CnZhciBmb3JFYWNoID0gRW1iZXIuRW51bWVyYWJsZVV0aWxz
        LmZvckVhY2g7CnZhciBpbmRleE9mID0gRW1iZXIuRW51bWVyYWJsZVV0aWxz
        LmluZGV4T2Y7CnZhciBtYXAgPSBFbWJlci5FbnVtZXJhYmxlVXRpbHMubWFw
        Owp2YXIgcmVzb2x2ZSA9IEVtYmVyLlJTVlAucmVzb2x2ZTsKdmFyIGNvcHkg
        PSBFbWJlci5jb3B5OwoKLy8gSW1wbGVtZW50b3JzIE5vdGU6Ci8vCi8vICAg
        VGhlIHZhcmlhYmxlcyBpbiB0aGlzIGZpbGUgYXJlIGNvbnNpc3RlbnRseSBu
        YW1lZCBhY2NvcmRpbmcgdG8gdGhlIGZvbGxvd2luZwovLyAgIHNjaGVtZToK
        Ly8KLy8gICAqICtpZCsgbWVhbnMgYW4gaWRlbnRpZmllciBtYW5hZ2VkIGJ5
        IGFuIGV4dGVybmFsIHNvdXJjZSwgcHJvdmlkZWQgaW5zaWRlCi8vICAgICB0
        aGUgZGF0YSBwcm92aWRlZCBieSB0aGF0IHNvdXJjZS4gVGhlc2UgYXJlIGFs
        d2F5cyBjb2VyY2VkIHRvIGJlIHN0cmluZ3MKLy8gICAgIGJlZm9yZSBiZWlu
        ZyB1c2VkIGludGVybmFsbHkuCi8vICAgKiArY2xpZW50SWQrIG1lYW5zIGEg
        dHJhbnNpZW50IG51bWVyaWNhbCBpZGVudGlmaWVyIGdlbmVyYXRlZCBhdCBy
        dW50aW1lIGJ5Ci8vICAgICB0aGUgZGF0YSBzdG9yZS4gSXQgaXMgaW1wb3J0
        YW50IHByaW1hcmlseSBiZWNhdXNlIG5ld2x5IGNyZWF0ZWQgb2JqZWN0cyBt
        YXkKLy8gICAgIG5vdCB5ZXQgaGF2ZSBhbiBleHRlcm5hbGx5IGdlbmVyYXRl
        ZCBpZC4KLy8gICAqICtyZWZlcmVuY2UrIG1lYW5zIGEgcmVjb3JkIHJlZmVy
        ZW5jZSBvYmplY3QsIHdoaWNoIGhvbGRzIG1ldGFkYXRhIGFib3V0IGEKLy8g
        ICAgIHJlY29yZCwgZXZlbiBpZiBpdCBoYXMgbm90IHlldCBiZWVuIGZ1bGx5
        IG1hdGVyaWFsaXplZC4KLy8gICAqICt0eXBlKyBtZWFucyBhIHN1YmNsYXNz
        IG9mIERTLk1vZGVsLgoKLy8gVXNlZCBieSB0aGUgc3RvcmUgdG8gbm9ybWFs
        aXplIElEcyBlbnRlcmluZyB0aGUgc3RvcmUuICBEZXNwaXRlIHRoZSBmYWN0
        Ci8vIHRoYXQgZGV2ZWxvcGVycyBtYXkgcHJvdmlkZSBJRHMgYXMgbnVtYmVy
        cyAoZS5nLiwgYHN0b3JlLmZpbmQoUGVyc29uLCAxKWApLAovLyBpdCBpcyBp
        bXBvcnRhbnQgdGhhdCBpbnRlcm5hbGx5IHdlIHVzZSBzdHJpbmdzLCBzaW5j
        ZSBJRHMgbWF5IGJlIHNlcmlhbGl6ZWQKLy8gYW5kIGxvc2UgdHlwZSBpbmZv
        cm1hdGlvbi4gIEZvciBleGFtcGxlLCBFbWJlcidzIHJvdXRlciBtYXkgcHV0
        IGEgcmVjb3JkJ3MKLy8gSUQgaW50byB0aGUgVVJMLCBhbmQgaWYgd2UgbGF0
        ZXIgdHJ5IHRvIGRlc2VyaWFsaXplIHRoYXQgVVJMIGFuZCBmaW5kIHRoZQov
        LyBjb3JyZXNwb25kaW5nIHJlY29yZCwgd2Ugd2lsbCBub3Qga25vdyBpZiBp
        dCBpcyBhIHN0cmluZyBvciBhIG51bWJlci4KdmFyIGNvZXJjZUlkID0gZnVu
        Y3Rpb24oaWQpIHsKICByZXR1cm4gaWQgPT0gbnVsbCA/IG51bGwgOiBpZCsn
        JzsKfTsKCi8qKgogIFRoZSBzdG9yZSBjb250YWlucyBhbGwgb2YgdGhlIGRh
        dGEgZm9yIHJlY29yZHMgbG9hZGVkIGZyb20gdGhlIHNlcnZlci4KICBJdCBp
        cyBhbHNvIHJlc3BvbnNpYmxlIGZvciBjcmVhdGluZyBpbnN0YW5jZXMgb2Yg
        YERTLk1vZGVsYCB0aGF0IHdyYXAKICB0aGUgaW5kaXZpZHVhbCBkYXRhIGZv
        ciBhIHJlY29yZCwgc28gdGhhdCB0aGV5IGNhbiBiZSBib3VuZCB0byBpbiB5
        b3VyCiAgSGFuZGxlYmFycyB0ZW1wbGF0ZXMuCgogIERlZmluZSB5b3VyIGFw
        cGxpY2F0aW9uJ3Mgc3RvcmUgbGlrZSB0aGlzOgoKICBgYGBqYXZhc2NyaXB0
        CiAgTXlBcHAuU3RvcmUgPSBEUy5TdG9yZS5leHRlbmQoKTsKICBgYGAKCiAg
        TW9zdCBFbWJlci5qcyBhcHBsaWNhdGlvbnMgd2lsbCBvbmx5IGhhdmUgYSBz
        aW5nbGUgYERTLlN0b3JlYCB0aGF0IGlzCiAgYXV0b21hdGljYWxseSBjcmVh
        dGVkIGJ5IHRoZWlyIGBFbWJlci5BcHBsaWNhdGlvbmAuCgogIFlvdSBjYW4g
        cmV0cmlldmUgbW9kZWxzIGZyb20gdGhlIHN0b3JlIGluIHNldmVyYWwgd2F5
        cy4gVG8gcmV0cmlldmUgYSByZWNvcmQKICBmb3IgYSBzcGVjaWZpYyBpZCwg
        dXNlIGBEUy5TdG9yZWAncyBgZmluZCgpYCBtZXRob2Q6CgogIGBgYGphdmFz
        Y3JpcHQKICB2YXIgcGVyc29uID0gc3RvcmUuZmluZCgncGVyc29uJywgMTIz
        KTsKICBgYGAKCiAgSWYgeW91ciBhcHBsaWNhdGlvbiBoYXMgbXVsdGlwbGUg
        YERTLlN0b3JlYCBpbnN0YW5jZXMgKGFuIHVudXN1YWwgY2FzZSksIHlvdSBj
        YW4KICBzcGVjaWZ5IHdoaWNoIHN0b3JlIHNob3VsZCBiZSB1c2VkOgoKICBg
        YGBqYXZhc2NyaXB0CiAgdmFyIHBlcnNvbiA9IHN0b3JlLmZpbmQoQXBwLlBl
        cnNvbiwgMTIzKTsKICBgYGAKCiAgQnkgZGVmYXVsdCwgdGhlIHN0b3JlIHdp
        bGwgdGFsayB0byB5b3VyIGJhY2tlbmQgdXNpbmcgYSBzdGFuZGFyZAogIFJF
        U1QgbWVjaGFuaXNtLiBZb3UgY2FuIGN1c3RvbWl6ZSBob3cgdGhlIHN0b3Jl
        IHRhbGtzIHRvIHlvdXIKICBiYWNrZW5kIGJ5IHNwZWNpZnlpbmcgYSBjdXN0
        b20gYWRhcHRlcjoKCiAgYGBgamF2YXNjcmlwdAogICBNeUFwcC5zdG9yZSA9
        IERTLlN0b3JlLmNyZWF0ZSh7CiAgICAgYWRhcHRlcjogJ015QXBwLkN1c3Rv
        bUFkYXB0ZXInCiAgIH0pOwogICBgYGAKCiAgWW91IGNhbiBsZWFybiBtb3Jl
        IGFib3V0IHdyaXRpbmcgYSBjdXN0b20gYWRhcHRlciBieSByZWFkaW5nIHRo
        ZSBgRFMuQWRhcHRlcmAKICBkb2N1bWVudGF0aW9uLgoKICBAY2xhc3MgU3Rv
        cmUKICBAbmFtZXNwYWNlIERTCiAgQGV4dGVuZHMgRW1iZXIuT2JqZWN0Ciov
        CkRTLlN0b3JlID0gRW1iZXIuT2JqZWN0LmV4dGVuZCh7CgogIC8qKgogICAg
        QG1ldGhvZCBpbml0CiAgICBAcHJpdmF0ZQogICovCiAgaW5pdDogZnVuY3Rp
        b24oKSB7CiAgICAvLyBpbnRlcm5hbCBib29ra2VlcGluZzsgbm90IG9ic2Vy
        dmFibGUKICAgIHRoaXMudHlwZU1hcHMgPSB7fTsKICAgIHRoaXMucmVjb3Jk
        QXJyYXlNYW5hZ2VyID0gRFMuUmVjb3JkQXJyYXlNYW5hZ2VyLmNyZWF0ZSh7
        CiAgICAgIHN0b3JlOiB0aGlzCiAgICB9KTsKICAgIHRoaXMuX3JlbGF0aW9u
        c2hpcENoYW5nZXMgPSB7fTsKICAgIHRoaXMuX3BlbmRpbmdTYXZlID0gW107
        CiAgfSwKCiAgLyoqCiAgICBUaGUgYWRhcHRlciB0byB1c2UgdG8gY29tbXVu
        aWNhdGUgdG8gYSBiYWNrZW5kIHNlcnZlciBvciBvdGhlciBwZXJzaXN0ZW5j
        ZSBsYXllci4KCiAgICBUaGlzIGNhbiBiZSBzcGVjaWZpZWQgYXMgYW4gaW5z
        dGFuY2UsIGNsYXNzLCBvciBzdHJpbmcuCgogICAgSWYgeW91IHdhbnQgdG8g
        c3BlY2lmeSBgQXBwLkN1c3RvbUFkYXB0ZXJgIGFzIGEgc3RyaW5nLCBkbzoK
        CiAgICBgYGBqcwogICAgYWRhcHRlcjogJ2N1c3RvbScKICAgIGBgYAoKICAg
        IEBwcm9wZXJ0eSBhZGFwdGVyCiAgICBAZGVmYXVsdCBEUy5SRVNUQWRhcHRl
        cgogICAgQHR5cGUge0RTLkFkYXB0ZXJ8U3RyaW5nfQogICovCiAgYWRhcHRl
        cjogJy1yZXN0JywKCiAgLyoqCiAgICBSZXR1cm5zIGEgSlNPTiByZXByZXNl
        bnRhdGlvbiBvZiB0aGUgcmVjb3JkIHVzaW5nIGEgY3VzdG9tCiAgICB0eXBl
        LXNwZWNpZmljIHNlcmlhbGl6ZXIsIGlmIG9uZSBleGlzdHMuCgogICAgVGhl
        IGF2YWlsYWJsZSBvcHRpb25zIGFyZToKCiAgICAqIGBpbmNsdWRlSWRgOiBg
        dHJ1ZWAgaWYgdGhlIHJlY29yZCdzIElEIHNob3VsZCBiZSBpbmNsdWRlZCBp
        bgogICAgICB0aGUgSlNPTiByZXByZXNlbnRhdGlvbgoKICAgIEBtZXRob2Qg
        c2VyaWFsaXplCiAgICBAcHJpdmF0ZQogICAgQHBhcmFtIHtEUy5Nb2RlbH0g
        cmVjb3JkIHRoZSByZWNvcmQgdG8gc2VyaWFsaXplCiAgICBAcGFyYW0ge09i
        amVjdH0gb3B0aW9ucyBhbiBvcHRpb25zIGhhc2gKICAqLwogIHNlcmlhbGl6
        ZTogZnVuY3Rpb24ocmVjb3JkLCBvcHRpb25zKSB7CiAgICByZXR1cm4gdGhp
        cy5zZXJpYWxpemVyRm9yKHJlY29yZC5jb25zdHJ1Y3Rvci50eXBlS2V5KS5z
        ZXJpYWxpemUocmVjb3JkLCBvcHRpb25zKTsKICB9LAoKICAvKioKICAgIFRo
        aXMgcHJvcGVydHkgcmV0dXJucyB0aGUgYWRhcHRlciwgYWZ0ZXIgcmVzb2x2
        aW5nIGEgcG9zc2libGUKICAgIHN0cmluZyBrZXkuCgogICAgSWYgdGhlIHN1
        cHBsaWVkIGBhZGFwdGVyYCB3YXMgYSBjbGFzcywgb3IgYSBTdHJpbmcgcHJv
        cGVydHkKICAgIHBhdGggcmVzb2x2ZWQgdG8gYSBjbGFzcywgdGhpcyBwcm9w
        ZXJ0eSB3aWxsIGluc3RhbnRpYXRlIHRoZQogICAgY2xhc3MuCgogICAgVGhp
        cyBwcm9wZXJ0eSBpcyBjYWNoZWFibGUsIHNvIHRoZSBzYW1lIGluc3RhbmNl
        IG9mIGEgc3BlY2lmaWVkCiAgICBhZGFwdGVyIGNsYXNzIHNob3VsZCBiZSB1
        c2VkIGZvciB0aGUgbGlmZXRpbWUgb2YgdGhlIHN0b3JlLgoKICAgIEBwcm9w
        ZXJ0eSBkZWZhdWx0QWRhcHRlcgogICAgQHByaXZhdGUKICAgIEByZXR1cm5z
        IERTLkFkYXB0ZXIKICAqLwogIGRlZmF1bHRBZGFwdGVyOiBFbWJlci5jb21w
        dXRlZCgnYWRhcHRlcicsIGZ1bmN0aW9uKCkgewogICAgdmFyIGFkYXB0ZXIg
        PSBnZXQodGhpcywgJ2FkYXB0ZXInKTsKCiAgICBFbWJlci5hc3NlcnQoJ1lv
        dSB0cmllZCB0byBzZXQgYGFkYXB0ZXJgIHByb3BlcnR5IHRvIGFuIGluc3Rh
        bmNlIG9mIGBEUy5BZGFwdGVyYCwgd2hlcmUgaXQgc2hvdWxkIGJlIGEgbmFt
        ZSBvciBhIGZhY3RvcnknLCAhKGFkYXB0ZXIgaW5zdGFuY2VvZiBEUy5BZGFw
        dGVyKSk7CgogICAgaWYgKHR5cGVvZiBhZGFwdGVyID09PSAnc3RyaW5nJykg
        ewogICAgICBhZGFwdGVyID0gdGhpcy5jb250YWluZXIubG9va3VwKCdhZGFw
        dGVyOicgKyBhZGFwdGVyKSB8fCB0aGlzLmNvbnRhaW5lci5sb29rdXAoJ2Fk
        YXB0ZXI6YXBwbGljYXRpb24nKSB8fCB0aGlzLmNvbnRhaW5lci5sb29rdXAo
        J2FkYXB0ZXI6LXJlc3QnKTsKICAgIH0KCiAgICBpZiAoRFMuQWRhcHRlci5k
        ZXRlY3QoYWRhcHRlcikpIHsKICAgICAgYWRhcHRlciA9IGFkYXB0ZXIuY3Jl
        YXRlKHsgY29udGFpbmVyOiB0aGlzLmNvbnRhaW5lciB9KTsKICAgIH0KCiAg
        ICByZXR1cm4gYWRhcHRlcjsKICB9KSwKCiAgLy8gLi4uLi4uLi4uLi4uLi4u
        Li4uLi4uCiAgLy8gLiBDUkVBVEUgTkVXIFJFQ09SRCAuCiAgLy8gLi4uLi4u
        Li4uLi4uLi4uLi4uLi4uCgogIC8qKgogICAgQ3JlYXRlIGEgbmV3IHJlY29y
        ZCBpbiB0aGUgY3VycmVudCBzdG9yZS4gVGhlIHByb3BlcnRpZXMgcGFzc2Vk
        CiAgICB0byB0aGlzIG1ldGhvZCBhcmUgc2V0IG9uIHRoZSBuZXdseSBjcmVh
        dGVkIHJlY29yZC4KCiAgICBUbyBjcmVhdGUgYSBuZXcgaW5zdGFuY2Ugb2Yg
        YEFwcC5Qb3N0YDoKCiAgICBgYGBqcwogICAgc3RvcmUuY3JlYXRlUmVjb3Jk
        KCdwb3N0JywgewogICAgICB0aXRsZTogIlJhaWxzIGlzIG9tYWthc2UiCiAg
        ICB9KTsKICAgIGBgYAoKICAgIEBtZXRob2QgY3JlYXRlUmVjb3JkCiAgICBA
        cGFyYW0ge1N0cmluZ30gdHlwZQogICAgQHBhcmFtIHtPYmplY3R9IHByb3Bl
        cnRpZXMgYSBoYXNoIG9mIHByb3BlcnRpZXMgdG8gc2V0IG9uIHRoZQogICAg
        ICBuZXdseSBjcmVhdGVkIHJlY29yZC4KICAgIEByZXR1cm5zIHtEUy5Nb2Rl
        bH0gcmVjb3JkCiAgKi8KICBjcmVhdGVSZWNvcmQ6IGZ1bmN0aW9uKHR5cGUs
        IHByb3BlcnRpZXMpIHsKICAgIHR5cGUgPSB0aGlzLm1vZGVsRm9yKHR5cGUp
        OwoKICAgIHByb3BlcnRpZXMgPSBjb3B5KHByb3BlcnRpZXMpIHx8IHt9OwoK
        ICAgIC8vIElmIHRoZSBwYXNzZWQgcHJvcGVydGllcyBkbyBub3QgaW5jbHVk
        ZSBhIHByaW1hcnkga2V5LAogICAgLy8gZ2l2ZSB0aGUgYWRhcHRlciBhbiBv
        cHBvcnR1bml0eSB0byBnZW5lcmF0ZSBvbmUuIFR5cGljYWxseSwKICAgIC8v
        IGNsaWVudC1zaWRlIElEIGdlbmVyYXRvcnMgd2lsbCB1c2Ugc29tZXRoaW5n
        IGxpa2UgdXVpZC5qcwogICAgLy8gdG8gYXZvaWQgY29uZmxpY3RzLgoKICAg
        IGlmIChpc05vbmUocHJvcGVydGllcy5pZCkpIHsKICAgICAgcHJvcGVydGll
        cy5pZCA9IHRoaXMuX2dlbmVyYXRlSWQodHlwZSk7CiAgICB9CgogICAgLy8g
        Q29lcmNlIElEIHRvIGEgc3RyaW5nCiAgICBwcm9wZXJ0aWVzLmlkID0gY29l
        cmNlSWQocHJvcGVydGllcy5pZCk7CgogICAgdmFyIHJlY29yZCA9IHRoaXMu
        YnVpbGRSZWNvcmQodHlwZSwgcHJvcGVydGllcy5pZCk7CgogICAgLy8gTW92
        ZSB0aGUgcmVjb3JkIG91dCBvZiBpdHMgaW5pdGlhbCBgZW1wdHlgIHN0YXRl
        IGludG8KICAgIC8vIHRoZSBgbG9hZGVkYCBzdGF0ZS4KICAgIHJlY29yZC5s
        b2FkZWREYXRhKCk7CgogICAgLy8gU2V0IHRoZSBwcm9wZXJ0aWVzIHNwZWNp
        ZmllZCBvbiB0aGUgcmVjb3JkLgogICAgcmVjb3JkLnNldFByb3BlcnRpZXMo
        cHJvcGVydGllcyk7CgogICAgcmV0dXJuIHJlY29yZDsKICB9LAoKICAvKioK
        ICAgIElmIHBvc3NpYmxlLCB0aGlzIG1ldGhvZCBhc2tzIHRoZSBhZGFwdGVy
        IHRvIGdlbmVyYXRlIGFuIElEIGZvcgogICAgYSBuZXdseSBjcmVhdGVkIHJl
        Y29yZC4KCiAgICBAbWV0aG9kIF9nZW5lcmF0ZUlkCiAgICBAcHJpdmF0ZQog
        ICAgQHBhcmFtIHtTdHJpbmd9IHR5cGUKICAgIEByZXR1cm5zIHtTdHJpbmd9
        IGlmIHRoZSBhZGFwdGVyIGNhbiBnZW5lcmF0ZSBvbmUsIGFuIElECiAgKi8K
        ICBfZ2VuZXJhdGVJZDogZnVuY3Rpb24odHlwZSkgewogICAgdmFyIGFkYXB0
        ZXIgPSB0aGlzLmFkYXB0ZXJGb3IodHlwZSk7CgogICAgaWYgKGFkYXB0ZXIg
        JiYgYWRhcHRlci5nZW5lcmF0ZUlkRm9yUmVjb3JkKSB7CiAgICAgIHJldHVy
        biBhZGFwdGVyLmdlbmVyYXRlSWRGb3JSZWNvcmQodGhpcyk7CiAgICB9Cgog
        ICAgcmV0dXJuIG51bGw7CiAgfSwKCiAgLy8gLi4uLi4uLi4uLi4uLi4uLi4K
        ICAvLyAuIERFTEVURSBSRUNPUkQgLgogIC8vIC4uLi4uLi4uLi4uLi4uLi4u
        CgogIC8qKgogICAgRm9yIHN5bW1ldHJ5LCBhIHJlY29yZCBjYW4gYmUgZGVs
        ZXRlZCB2aWEgdGhlIHN0b3JlLgoKICAgIEV4YW1wbGUKCiAgICBgYGBqYXZh
        c2NyaXB0CiAgICB2YXIgcG9zdCA9IHN0b3JlLmNyZWF0ZVJlY29yZCgncG9z
        dCcsIHsKICAgICAgdGl0bGU6ICJSYWlscyBpcyBvbWFrYXNlIgogICAgfSk7
        CgogICAgc3RvcmUuZGVsZXRlUmVjb3JkKHBvc3QpOwogICAgYGBgCgogICAg
        QG1ldGhvZCBkZWxldGVSZWNvcmQKICAgIEBwYXJhbSB7RFMuTW9kZWx9IHJl
        Y29yZAogICovCiAgZGVsZXRlUmVjb3JkOiBmdW5jdGlvbihyZWNvcmQpIHsK
        ICAgIHJlY29yZC5kZWxldGVSZWNvcmQoKTsKICB9LAoKICAvKioKICAgIEZv
        ciBzeW1tZXRyeSwgYSByZWNvcmQgY2FuIGJlIHVubG9hZGVkIHZpYSB0aGUg
        c3RvcmUuIE9ubHkKICAgIG5vbi1kaXJ0eSByZWNvcmRzIGNhbiBiZSB1bmxv
        YWRlZC4KCiAgICBFeGFtcGxlCgogICAgYGBgamF2YXNjcmlwdAogICAgc3Rv
        cmUuZmluZCgncG9zdCcsIDEpLnRoZW4oZnVuY3Rpb24ocG9zdCkgewogICAg
        ICBzdG9yZS51bmxvYWRSZWNvcmQocG9zdCk7CiAgICB9KTsKICAgIGBgYAoK
        ICAgIEBtZXRob2QgdW5sb2FkUmVjb3JkCiAgICBAcGFyYW0ge0RTLk1vZGVs
        fSByZWNvcmQKICAqLwogIHVubG9hZFJlY29yZDogZnVuY3Rpb24ocmVjb3Jk
        KSB7CiAgICByZWNvcmQudW5sb2FkUmVjb3JkKCk7CiAgfSwKCiAgLy8gLi4u
        Li4uLi4uLi4uLi4uLgogIC8vIC4gRklORCBSRUNPUkRTIC4KICAvLyAuLi4u
        Li4uLi4uLi4uLi4uCgogIC8qKgogICAgVGhpcyBpcyB0aGUgbWFpbiBlbnRy
        eSBwb2ludCBpbnRvIGZpbmRpbmcgcmVjb3Jkcy4gVGhlIGZpcnN0IHBhcmFt
        ZXRlciB0bwogICAgdGhpcyBtZXRob2QgaXMgdGhlIG1vZGVsJ3MgbmFtZSBh
        cyBhIHN0cmluZy4KCiAgICAtLS0KCiAgICBUbyBmaW5kIGEgcmVjb3JkIGJ5
        IElELCBwYXNzIHRoZSBgaWRgIGFzIHRoZSBzZWNvbmQgcGFyYW1ldGVyOgoK
        ICAgIGBgYGphdmFzY3JpcHQKICAgIHN0b3JlLmZpbmQoJ3BlcnNvbicsIDEp
        OwogICAgYGBgCgogICAgVGhlIGBmaW5kYCBtZXRob2Qgd2lsbCBhbHdheXMg
        cmV0dXJuIGEgKipwcm9taXNlKiogdGhhdCB3aWxsIGJlIHJlc29sdmVkCiAg
        ICB3aXRoIHRoZSByZWNvcmQuIElmIHRoZSByZWNvcmQgd2FzIGFscmVhZHkg
        aW4gdGhlIHN0b3JlLCB0aGUgcHJvbWlzZSB3aWxsCiAgICBiZSByZXNvbHZl
        ZCBpbW1lZGlhdGVseS4gT3RoZXJ3aXNlLCB0aGUgc3RvcmUgd2lsbCBhc2sg
        dGhlIGFkYXB0ZXIncyBgZmluZGAKICAgIG1ldGhvZCB0byBmaW5kIHRoZSBu
        ZWNlc3NhcnkgZGF0YS4KCiAgICBUaGUgYGZpbmRgIG1ldGhvZCB3aWxsIGFs
        d2F5cyByZXNvbHZlIGl0cyBwcm9taXNlIHdpdGggdGhlIHNhbWUgb2JqZWN0
        IGZvcgogICAgYSBnaXZlbiB0eXBlIGFuZCBgaWRgLgoKICAgIC0tLQoKICAg
        IFRvIGZpbmQgYWxsIHJlY29yZHMgZm9yIGEgdHlwZSwgY2FsbCBgZmluZGAg
        d2l0aCBubyBhZGRpdGlvbmFsIHBhcmFtZXRlcnM6CgogICAgYGBgamF2YXNj
        cmlwdAogICAgc3RvcmUuZmluZCgncGVyc29uJyk7CiAgICBgYGAKCiAgICBU
        aGlzIHdpbGwgYXNrIHRoZSBhZGFwdGVyJ3MgYGZpbmRBbGxgIG1ldGhvZCB0
        byBmaW5kIHRoZSByZWNvcmRzIGZvciB0aGUKICAgIGdpdmVuIHR5cGUsIGFu
        ZCByZXR1cm4gYSBwcm9taXNlIHRoYXQgd2lsbCBiZSByZXNvbHZlZCBvbmNl
        IHRoZSBzZXJ2ZXIKICAgIHJldHVybnMgdGhlIHZhbHVlcy4KCiAgICAtLS0K
        CiAgICBUbyBmaW5kIGEgcmVjb3JkIGJ5IGEgcXVlcnksIGNhbGwgYGZpbmRg
        IHdpdGggYSBoYXNoIGFzIHRoZSBzZWNvbmQKICAgIHBhcmFtZXRlcjoKCiAg
        ICBgYGBqYXZhc2NyaXB0CiAgICBzdG9yZS5maW5kKEFwcC5QZXJzb24sIHsg
        cGFnZTogMSB9KTsKICAgIGBgYAoKICAgIFRoaXMgd2lsbCBhc2sgdGhlIGFk
        YXB0ZXIncyBgZmluZFF1ZXJ5YCBtZXRob2QgdG8gZmluZCB0aGUgcmVjb3Jk
        cyBmb3IKICAgIHRoZSBxdWVyeSwgYW5kIHJldHVybiBhIHByb21pc2UgdGhh
        dCB3aWxsIGJlIHJlc29sdmVkIG9uY2UgdGhlIHNlcnZlcgogICAgcmVzcG9u
        ZHMuCgogICAgQG1ldGhvZCBmaW5kCiAgICBAcGFyYW0ge1N0cmluZyBvciBz
        dWJjbGFzcyBvZiBEUy5Nb2RlbH0gdHlwZQogICAgQHBhcmFtIHtPYmplY3R8
        U3RyaW5nfEludGVnZXJ8bnVsbH0gaWQKICAgIEByZXR1cm4ge1Byb21pc2V9
        IHByb21pc2UKICAqLwogIGZpbmQ6IGZ1bmN0aW9uKHR5cGUsIGlkKSB7CiAg
        ICBpZiAoaWQgPT09IHVuZGVmaW5lZCkgewogICAgICByZXR1cm4gdGhpcy5m
        aW5kQWxsKHR5cGUpOwogICAgfQoKICAgIC8vIFdlIGFyZSBwYXNzZWQgYSBx
        dWVyeSBpbnN0ZWFkIG9mIGFuIGlkLgogICAgaWYgKEVtYmVyLnR5cGVPZihp
        ZCkgPT09ICdvYmplY3QnKSB7CiAgICAgIHJldHVybiB0aGlzLmZpbmRRdWVy
        eSh0eXBlLCBpZCk7CiAgICB9CgogICAgcmV0dXJuIHRoaXMuZmluZEJ5SWQo
        dHlwZSwgY29lcmNlSWQoaWQpKTsKICB9LAoKICAvKioKICAgIFRoaXMgbWV0
        aG9kIHJldHVybnMgYSByZWNvcmQgZm9yIGEgZ2l2ZW4gdHlwZSBhbmQgaWQg
        Y29tYmluYXRpb24uCgogICAgQG1ldGhvZCBmaW5kQnlJZAogICAgQHByaXZh
        dGUKICAgIEBwYXJhbSB7U3RyaW5nIG9yIHN1YmNsYXNzIG9mIERTLk1vZGVs
        fSB0eXBlCiAgICBAcGFyYW0ge1N0cmluZ3xJbnRlZ2VyfSBpZAogICAgQHJl
        dHVybiB7UHJvbWlzZX0gcHJvbWlzZQogICovCiAgZmluZEJ5SWQ6IGZ1bmN0
        aW9uKHR5cGUsIGlkKSB7CiAgICB0eXBlID0gdGhpcy5tb2RlbEZvcih0eXBl
        KTsKCiAgICB2YXIgcmVjb3JkID0gdGhpcy5yZWNvcmRGb3JJZCh0eXBlLCBp
        ZCk7CgogICAgdmFyIHByb21pc2UgPSB0aGlzLmZldGNoUmVjb3JkKHJlY29y
        ZCkgfHwgcmVzb2x2ZShyZWNvcmQsICJEUzogU3RvcmUjZmluZEJ5SWQgIiAr
        IHR5cGUgKyAiIHdpdGggaWQ6ICIgKyBpZCk7CiAgICByZXR1cm4gcHJvbWlz
        ZU9iamVjdChwcm9taXNlKTsKICB9LAoKICAvKioKICAgIFRoaXMgbWV0aG9k
        IG1ha2VzIGEgc2VyaWVzIG9mIHJlcXVlc3RzIHRvIHRoZSBhZGFwdGVyJ3Mg
        YGZpbmRgIG1ldGhvZAogICAgYW5kIHJldHVybnMgYSBwcm9taXNlIHRoYXQg
        cmVzb2x2ZXMgb25jZSB0aGV5IGFyZSBhbGwgbG9hZGVkLgoKICAgIEBwcml2
        YXRlCiAgICBAbWV0aG9kIGZpbmRCeUlkcwogICAgQHBhcmFtIHtTdHJpbmd9
        IHR5cGUKICAgIEBwYXJhbSB7QXJyYXl9IGlkcwogICAgQHJldHVybnMge1By
        b21pc2V9IHByb21pc2UKICAqLwogIGZpbmRCeUlkczogZnVuY3Rpb24odHlw
        ZSwgaWRzKSB7CiAgICB2YXIgc3RvcmUgPSB0aGlzOwogICAgdmFyIHByb21p
        c2VMYWJlbCA9ICJEUzogU3RvcmUjZmluZEJ5SWRzICIgKyB0eXBlOwogICAg
        cmV0dXJuIHByb21pc2VBcnJheShFbWJlci5SU1ZQLmFsbChtYXAoaWRzLCBm
        dW5jdGlvbihpZCkgewogICAgICByZXR1cm4gc3RvcmUuZmluZEJ5SWQodHlw
        ZSwgaWQpOwogICAgfSkpLnRoZW4oRW1iZXIuQSwgbnVsbCwgIkRTOiBTdG9y
        ZSNmaW5kQnlJZHMgb2YgIiArIHR5cGUgKyAiIGNvbXBsZXRlIikpOwogIH0s
        CgogIC8qKgogICAgVGhpcyBtZXRob2QgaXMgY2FsbGVkIGJ5IGBmaW5kQnlJ
        ZGAgaWYgaXQgZGlzY292ZXJzIHRoYXQgYSBwYXJ0aWN1bGFyCiAgICB0eXBl
        L2lkIHBhaXIgaGFzbid0IGJlZW4gbG9hZGVkIHlldCB0byBraWNrIG9mZiBh
        IHJlcXVlc3QgdG8gdGhlCiAgICBhZGFwdGVyLgoKICAgIEBtZXRob2QgZmV0
        Y2hSZWNvcmQKICAgIEBwcml2YXRlCiAgICBAcGFyYW0ge0RTLk1vZGVsfSBy
        ZWNvcmQKICAgIEByZXR1cm5zIHtQcm9taXNlfSBwcm9taXNlCiAgKi8KICBm
        ZXRjaFJlY29yZDogZnVuY3Rpb24ocmVjb3JkKSB7CiAgICBpZiAoaXNOb25l
        KHJlY29yZCkpIHsgcmV0dXJuIG51bGw7IH0KICAgIGlmIChyZWNvcmQuX2xv
        YWRpbmdQcm9taXNlKSB7IHJldHVybiByZWNvcmQuX2xvYWRpbmdQcm9taXNl
        OyB9CiAgICBpZiAoIWdldChyZWNvcmQsICdpc0VtcHR5JykpIHsgcmV0dXJu
        IG51bGw7IH0KCiAgICB2YXIgdHlwZSA9IHJlY29yZC5jb25zdHJ1Y3RvciwK
        ICAgICAgICBpZCA9IGdldChyZWNvcmQsICdpZCcpOwoKICAgIHZhciBhZGFw
        dGVyID0gdGhpcy5hZGFwdGVyRm9yKHR5cGUpOwoKICAgIEVtYmVyLmFzc2Vy
        dCgiWW91IHRyaWVkIHRvIGZpbmQgYSByZWNvcmQgYnV0IHlvdSBoYXZlIG5v
        IGFkYXB0ZXIgKGZvciAiICsgdHlwZSArICIpIiwgYWRhcHRlcik7CiAgICBF
        bWJlci5hc3NlcnQoIllvdSB0cmllZCB0byBmaW5kIGEgcmVjb3JkIGJ1dCB5
        b3VyIGFkYXB0ZXIgKGZvciAiICsgdHlwZSArICIpIGRvZXMgbm90IGltcGxl
        bWVudCAnZmluZCciLCBhZGFwdGVyLmZpbmQpOwoKICAgIHZhciBwcm9taXNl
        ID0gX2ZpbmQoYWRhcHRlciwgdGhpcywgdHlwZSwgaWQpOwogICAgcmVjb3Jk
        LmxvYWRpbmdEYXRhKHByb21pc2UpOwogICAgcmV0dXJuIHByb21pc2U7CiAg
        fSwKCiAgLyoqCiAgICBHZXQgYSByZWNvcmQgYnkgYSBnaXZlbiB0eXBlIGFu
        ZCBJRCB3aXRob3V0IHRyaWdnZXJpbmcgYSBmZXRjaC4KCiAgICBUaGlzIG1l
        dGhvZCB3aWxsIHN5bmNocm9ub3VzbHkgcmV0dXJuIHRoZSByZWNvcmQgaWYg
        aXQncyBhdmFpbGFibGUuCiAgICBPdGhlcndpc2UsIGl0IHdpbGwgcmV0dXJu
        IG51bGwuCgogICAgYGBganMKICAgIHZhciBwb3N0ID0gc3RvcmUuZ2V0QnlJ
        ZCgncG9zdCcsIDEpOwogICAgYGBgCgogICAgQG1ldGhvZCBnZXRCeUlkCiAg
        ICBAcGFyYW0ge1N0cmluZyBvciBzdWJjbGFzcyBvZiBEUy5Nb2RlbH0gdHlw
        ZQogICAgQHBhcmFtIHtTdHJpbmd8SW50ZWdlcn0gaWQKICAgIEBwYXJhbSB7
        RFMuTW9kZWx9IHJlY29yZAogICovCiAgZ2V0QnlJZDogZnVuY3Rpb24odHlw
        ZSwgaWQpIHsKICAgIGlmICh0aGlzLmhhc1JlY29yZEZvcklkKHR5cGUsIGlk
        KSkgewogICAgICByZXR1cm4gdGhpcy5yZWNvcmRGb3JJZCh0eXBlLCBpZCk7
        CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gbnVsbDsKICAgIH0KICB9LAoK
        ICAvKioKICAgIFRoaXMgbWV0aG9kIGlzIGNhbGxlZCBieSB0aGUgcmVjb3Jk
        J3MgYHJlbG9hZGAgbWV0aG9kLgoKICAgIFRoaXMgbWV0aG9kIGNhbGxzIHRo
        ZSBhZGFwdGVyJ3MgYGZpbmRgIG1ldGhvZCwgd2hpY2ggcmV0dXJucyBhIHBy
        b21pc2UuIFdoZW4KICAgICoqdGhhdCoqIHByb21pc2UgcmVzb2x2ZXMsIGBy
        ZWxvYWRSZWNvcmRgIHdpbGwgcmVzb2x2ZSB0aGUgcHJvbWlzZSByZXR1cm5l
        ZAogICAgYnkgdGhlIHJlY29yZCdzIGByZWxvYWRgLgoKICAgIEBtZXRob2Qg
        cmVsb2FkUmVjb3JkCiAgICBAcHJpdmF0ZQogICAgQHBhcmFtIHtEUy5Nb2Rl
        bH0gcmVjb3JkCiAgICBAcmV0dXJuIHtQcm9taXNlfSBwcm9taXNlCiAgKi8K
        ICByZWxvYWRSZWNvcmQ6IGZ1bmN0aW9uKHJlY29yZCkgewogICAgdmFyIHR5
        cGUgPSByZWNvcmQuY29uc3RydWN0b3IsCiAgICAgICAgYWRhcHRlciA9IHRo
        aXMuYWRhcHRlckZvcih0eXBlKSwKICAgICAgICBpZCA9IGdldChyZWNvcmQs
        ICdpZCcpOwoKICAgIEVtYmVyLmFzc2VydCgiWW91IGNhbm5vdCByZWxvYWQg
        YSByZWNvcmQgd2l0aG91dCBhbiBJRCIsIGlkKTsKICAgIEVtYmVyLmFzc2Vy
        dCgiWW91IHRyaWVkIHRvIHJlbG9hZCBhIHJlY29yZCBidXQgeW91IGhhdmUg
        bm8gYWRhcHRlciAoZm9yICIgKyB0eXBlICsgIikiLCBhZGFwdGVyKTsKICAg
        IEVtYmVyLmFzc2VydCgiWW91IHRyaWVkIHRvIHJlbG9hZCBhIHJlY29yZCBi
        dXQgeW91ciBhZGFwdGVyIGRvZXMgbm90IGltcGxlbWVudCBgZmluZGAiLCBh
        ZGFwdGVyLmZpbmQpOwoKICAgIHJldHVybiBfZmluZChhZGFwdGVyLCB0aGlz
        LCB0eXBlLCBpZCk7CiAgfSwKCiAgLyoqCiAgICBUaGlzIG1ldGhvZCB0YWtl
        cyBhIGxpc3Qgb2YgcmVjb3JkcywgZ3JvdXBzIHRoZSByZWNvcmRzIGJ5IHR5
        cGUsCiAgICBjb252ZXJ0cyB0aGUgcmVjb3JkcyBpbnRvIElEcywgYW5kIHRo
        ZW4gaW52b2tlcyB0aGUgYWRhcHRlcidzIGBmaW5kTWFueWAKICAgIG1ldGhv
        ZC4KCiAgICBUaGUgcmVjb3JkcyBhcmUgZ3JvdXBlZCBieSB0eXBlIHRvIGlu
        dm9rZSBgZmluZE1hbnlgIG9uIGFkYXB0ZXJzCiAgICBmb3IgZWFjaCB1bmlx
        dWUgdHlwZSBpbiByZWNvcmRzLgoKICAgIEl0IGlzIHVzZWQgYm90aCBieSBh
        IGJyYW5kIG5ldyByZWxhdGlvbnNoaXAgKHZpYSB0aGUgYGZpbmRNYW55YAog
        ICAgbWV0aG9kKSBvciB3aGVuIHRoZSBkYXRhIHVuZGVybHlpbmcgYW4gZXhp
        c3RpbmcgcmVsYXRpb25zaGlwCiAgICBjaGFuZ2VzLgoKICAgIEBtZXRob2Qg
        ZmV0Y2hNYW55CiAgICBAcHJpdmF0ZQogICAgQHBhcmFtIHtBcnJheX0gcmVj
        b3JkcwogICAgQHBhcmFtIHtEUy5Nb2RlbH0gb3duZXIKICAgIEBwYXJhbSB7
        UmVzb2x2ZXJ9IHJlc29sdmVyCiAgKi8KICBmZXRjaE1hbnk6IGZ1bmN0aW9u
        KHJlY29yZHMsIG93bmVyLCByZXNvbHZlcikgewogICAgaWYgKCFyZWNvcmRz
        Lmxlbmd0aCkgeyByZXR1cm47IH0KCiAgICAvLyBHcm91cCBCeSBUeXBlCiAg
        ICB2YXIgcmVjb3Jkc0J5VHlwZU1hcCA9IEVtYmVyLk1hcFdpdGhEZWZhdWx0
        LmNyZWF0ZSh7CiAgICAgIGRlZmF1bHRWYWx1ZTogZnVuY3Rpb24oKSB7IHJl
        dHVybiBFbWJlci5BKCk7IH0KICAgIH0pOwoKICAgIGZvckVhY2gocmVjb3Jk
        cywgZnVuY3Rpb24ocmVjb3JkKSB7CiAgICAgIHJlY29yZHNCeVR5cGVNYXAu
        Z2V0KHJlY29yZC5jb25zdHJ1Y3RvcikucHVzaChyZWNvcmQpOwogICAgfSk7
        CgogICAgZm9yRWFjaChyZWNvcmRzQnlUeXBlTWFwLCBmdW5jdGlvbih0eXBl
        LCByZWNvcmRzKSB7CiAgICAgIHZhciBpZHMgPSByZWNvcmRzLm1hcFByb3Bl
        cnR5KCdpZCcpLAogICAgICAgICAgYWRhcHRlciA9IHRoaXMuYWRhcHRlckZv
        cih0eXBlKTsKCiAgICAgIEVtYmVyLmFzc2VydCgiWW91IHRyaWVkIHRvIGxv
        YWQgbWFueSByZWNvcmRzIGJ1dCB5b3UgaGF2ZSBubyBhZGFwdGVyIChmb3Ig
        IiArIHR5cGUgKyAiKSIsIGFkYXB0ZXIpOwogICAgICBFbWJlci5hc3NlcnQo
        IllvdSB0cmllZCB0byBsb2FkIG1hbnkgcmVjb3JkcyBidXQgeW91ciBhZGFw
        dGVyIGRvZXMgbm90IGltcGxlbWVudCBgZmluZE1hbnlgIiwgYWRhcHRlci5m
        aW5kTWFueSk7CgogICAgICByZXNvbHZlci5yZXNvbHZlKF9maW5kTWFueShh
        ZGFwdGVyLCB0aGlzLCB0eXBlLCBpZHMsIG93bmVyKSk7CiAgICB9LCB0aGlz
        KTsKICB9LAoKICAvKioKICAgIFJldHVybnMgdHJ1ZSBpZiBhIHJlY29yZCBm
        b3IgYSBnaXZlbiB0eXBlIGFuZCBJRCBpcyBhbHJlYWR5IGxvYWRlZC4KCiAg
        ICBAbWV0aG9kIGhhc1JlY29yZEZvcklkCiAgICBAcGFyYW0ge1N0cmluZyBv
        ciBzdWJjbGFzcyBvZiBEUy5Nb2RlbH0gdHlwZQogICAgQHBhcmFtIHtTdHJp
        bmd8SW50ZWdlcn0gaWQKICAgIEByZXR1cm5zIHtCb29sZWFufQogICovCiAg
        aGFzUmVjb3JkRm9ySWQ6IGZ1bmN0aW9uKHR5cGUsIGlkKSB7CiAgICBpZCA9
        IGNvZXJjZUlkKGlkKTsKICAgIHR5cGUgPSB0aGlzLm1vZGVsRm9yKHR5cGUp
        OwogICAgcmV0dXJuICEhdGhpcy50eXBlTWFwRm9yKHR5cGUpLmlkVG9SZWNv
        cmRbaWRdOwogIH0sCgogIC8qKgogICAgUmV0dXJucyBpZCByZWNvcmQgZm9y
        IGEgZ2l2ZW4gdHlwZSBhbmQgSUQuIElmIG9uZSBpc24ndCBhbHJlYWR5IGxv
        YWRlZCwKICAgIGl0IGJ1aWxkcyBhIG5ldyByZWNvcmQgYW5kIGxlYXZlcyBp
        dCBpbiB0aGUgYGVtcHR5YCBzdGF0ZS4KCiAgICBAbWV0aG9kIHJlY29yZEZv
        cklkCiAgICBAcHJpdmF0ZQogICAgQHBhcmFtIHtTdHJpbmcgb3Igc3ViY2xh
        c3Mgb2YgRFMuTW9kZWx9IHR5cGUKICAgIEBwYXJhbSB7U3RyaW5nfEludGVn
        ZXJ9IGlkCiAgICBAcmV0dXJucyB7RFMuTW9kZWx9IHJlY29yZAogICovCiAg
        cmVjb3JkRm9ySWQ6IGZ1bmN0aW9uKHR5cGUsIGlkKSB7CiAgICB0eXBlID0g
        dGhpcy5tb2RlbEZvcih0eXBlKTsKCiAgICBpZCA9IGNvZXJjZUlkKGlkKTsK
        CiAgICB2YXIgcmVjb3JkID0gdGhpcy50eXBlTWFwRm9yKHR5cGUpLmlkVG9S
        ZWNvcmRbaWRdOwoKICAgIGlmICghcmVjb3JkKSB7CiAgICAgIHJlY29yZCA9
        IHRoaXMuYnVpbGRSZWNvcmQodHlwZSwgaWQpOwogICAgfQoKICAgIHJldHVy
        biByZWNvcmQ7CiAgfSwKCiAgLyoqCiAgICBAbWV0aG9kIGZpbmRNYW55CiAg
        ICBAcHJpdmF0ZQogICAgQHBhcmFtIHtEUy5Nb2RlbH0gb3duZXIKICAgIEBw
        YXJhbSB7QXJyYXl9IHJlY29yZHMKICAgIEBwYXJhbSB7U3RyaW5nIG9yIHN1
        YmNsYXNzIG9mIERTLk1vZGVsfSB0eXBlCiAgICBAcGFyYW0ge1Jlc29sdmVy
        fSByZXNvbHZlcgogICAgQHJldHVybiB7RFMuTWFueUFycmF5fSByZWNvcmRz
        CiAgKi8KICBmaW5kTWFueTogZnVuY3Rpb24ob3duZXIsIHJlY29yZHMsIHR5
        cGUsIHJlc29sdmVyKSB7CiAgICB0eXBlID0gdGhpcy5tb2RlbEZvcih0eXBl
        KTsKCiAgICByZWNvcmRzID0gRW1iZXIuQShyZWNvcmRzKTsKCiAgICB2YXIg
        dW5sb2FkZWRSZWNvcmRzID0gcmVjb3Jkcy5maWx0ZXJQcm9wZXJ0eSgnaXNF
        bXB0eScsIHRydWUpLAogICAgICAgIG1hbnlBcnJheSA9IHRoaXMucmVjb3Jk
        QXJyYXlNYW5hZ2VyLmNyZWF0ZU1hbnlBcnJheSh0eXBlLCByZWNvcmRzKTsK
        CiAgICBmb3JFYWNoKHVubG9hZGVkUmVjb3JkcywgZnVuY3Rpb24ocmVjb3Jk
        KSB7CiAgICAgIHJlY29yZC5sb2FkaW5nRGF0YSgpOwogICAgfSk7CgogICAg
        bWFueUFycmF5LmxvYWRpbmdSZWNvcmRzQ291bnQgPSB1bmxvYWRlZFJlY29y
        ZHMubGVuZ3RoOwoKICAgIGlmICh1bmxvYWRlZFJlY29yZHMubGVuZ3RoKSB7
        CiAgICAgIGZvckVhY2godW5sb2FkZWRSZWNvcmRzLCBmdW5jdGlvbihyZWNv
        cmQpIHsKICAgICAgICB0aGlzLnJlY29yZEFycmF5TWFuYWdlci5yZWdpc3Rl
        cldhaXRpbmdSZWNvcmRBcnJheShyZWNvcmQsIG1hbnlBcnJheSk7CiAgICAg
        IH0sIHRoaXMpOwoKICAgICAgdGhpcy5mZXRjaE1hbnkodW5sb2FkZWRSZWNv
        cmRzLCBvd25lciwgcmVzb2x2ZXIpOwogICAgfSBlbHNlIHsKICAgICAgaWYg
        KHJlc29sdmVyKSB7IHJlc29sdmVyLnJlc29sdmUoKTsgfQogICAgICBtYW55
        QXJyYXkuc2V0KCdpc0xvYWRlZCcsIHRydWUpOwogICAgICBFbWJlci5ydW4u
        b25jZShtYW55QXJyYXksICd0cmlnZ2VyJywgJ2RpZExvYWQnKTsKICAgIH0K
        CiAgICByZXR1cm4gbWFueUFycmF5OwogIH0sCgogIC8qKgogICAgSWYgYSBy
        ZWxhdGlvbnNoaXAgd2FzIG9yaWdpbmFsbHkgcG9wdWxhdGVkIGJ5IHRoZSBh
        ZGFwdGVyIGFzIGEgbGluawogICAgKGFzIG9wcG9zZWQgdG8gYSBsaXN0IG9m
        IElEcyksIHRoaXMgbWV0aG9kIGlzIGNhbGxlZCB3aGVuIHRoZQogICAgcmVs
        YXRpb25zaGlwIGlzIGZldGNoZWQuCgogICAgVGhlIGxpbmsgKHdoaWNoIGlz
        IHVzdWFsbHkgYSBVUkwpIGlzIHBhc3NlZCB0aHJvdWdoIHVuY2hhbmdlZCwg
        c28gdGhlCiAgICBhZGFwdGVyIGNhbiBtYWtlIHdoYXRldmVyIHJlcXVlc3Qg
        aXQgd2FudHMuCgogICAgVGhlIHVzdWFsIHVzZS1jYXNlIGlzIGZvciB0aGUg
        c2VydmVyIHRvIHJlZ2lzdGVyIGEgVVJMIGFzIGEgbGluaywgYW5kCiAgICB0
        aGVuIHVzZSB0aGF0IFVSTCBpbiB0aGUgZnV0dXJlIHRvIG1ha2UgYSByZXF1
        ZXN0IGZvciB0aGUgcmVsYXRpb25zaGlwLgoKICAgIEBtZXRob2QgZmluZEhh
        c01hbnkKICAgIEBwcml2YXRlCiAgICBAcGFyYW0ge0RTLk1vZGVsfSBvd25l
        cgogICAgQHBhcmFtIHthbnl9IGxpbmsKICAgIEBwYXJhbSB7U3RyaW5nIG9y
        IHN1YmNsYXNzIG9mIERTLk1vZGVsfSB0eXBlCiAgICBAcGFyYW0ge1Jlc29s
        dmVyfSByZXNvbHZlcgogICAgQHJldHVybiB7RFMuTWFueUFycmF5fQogICov
        CiAgZmluZEhhc01hbnk6IGZ1bmN0aW9uKG93bmVyLCBsaW5rLCByZWxhdGlv
        bnNoaXAsIHJlc29sdmVyKSB7CiAgICB2YXIgYWRhcHRlciA9IHRoaXMuYWRh
        cHRlckZvcihvd25lci5jb25zdHJ1Y3Rvcik7CgogICAgRW1iZXIuYXNzZXJ0
        KCJZb3UgdHJpZWQgdG8gbG9hZCBhIGhhc01hbnkgcmVsYXRpb25zaGlwIGJ1
        dCB5b3UgaGF2ZSBubyBhZGFwdGVyIChmb3IgIiArIG93bmVyLmNvbnN0cnVj
        dG9yICsgIikiLCBhZGFwdGVyKTsKICAgIEVtYmVyLmFzc2VydCgiWW91IHRy
        aWVkIHRvIGxvYWQgYSBoYXNNYW55IHJlbGF0aW9uc2hpcCBmcm9tIGEgc3Bl
        Y2lmaWVkIGBsaW5rYCBpbiB0aGUgb3JpZ2luYWwgcGF5bG9hZCBidXQgeW91
        ciBhZGFwdGVyIGRvZXMgbm90IGltcGxlbWVudCBgZmluZEhhc01hbnlgIiwg
        YWRhcHRlci5maW5kSGFzTWFueSk7CgogICAgdmFyIHJlY29yZHMgPSB0aGlz
        LnJlY29yZEFycmF5TWFuYWdlci5jcmVhdGVNYW55QXJyYXkocmVsYXRpb25z
        aGlwLnR5cGUsIEVtYmVyLkEoW10pKTsKICAgIHJlc29sdmVyLnJlc29sdmUo
        X2ZpbmRIYXNNYW55KGFkYXB0ZXIsIHRoaXMsIG93bmVyLCBsaW5rLCByZWxh
        dGlvbnNoaXApKTsKICAgIHJldHVybiByZWNvcmRzOwogIH0sCgogIC8qKgog
        ICAgQG1ldGhvZCBmaW5kQmVsb25nc1RvCiAgICBAcHJpdmF0ZQogICAgQHBh
        cmFtIHtEUy5Nb2RlbH0gb3duZXIKICAgIEBwYXJhbSB7YW55fSBsaW5rCiAg
        ICBAcGFyYW0ge1JlbGF0aW9uc2hpcH0gcmVsYXRpb25zaGlwCiAgICBAcGFy
        YW0ge1Jlc29sdmVyfSByZXNvbHZlcgogICovCiAgZmluZEJlbG9uZ3NUbzog
        ZnVuY3Rpb24ob3duZXIsIGxpbmssIHJlbGF0aW9uc2hpcCwgcmVzb2x2ZXIp
        IHsKICAgIHZhciBhZGFwdGVyID0gdGhpcy5hZGFwdGVyRm9yKG93bmVyLmNv
        bnN0cnVjdG9yKTsKCiAgICBFbWJlci5hc3NlcnQoIllvdSB0cmllZCB0byBs
        b2FkIGEgYmVsb25nc1RvIHJlbGF0aW9uc2hpcCBidXQgeW91IGhhdmUgbm8g
        YWRhcHRlciAoZm9yICIgKyBvd25lci5jb25zdHJ1Y3RvciArICIpIiwgYWRh
        cHRlcik7CiAgICBFbWJlci5hc3NlcnQoIllvdSB0cmllZCB0byBsb2FkIGEg
        YmVsb25nc1RvIHJlbGF0aW9uc2hpcCBmcm9tIGEgc3BlY2lmaWVkIGBsaW5r
        YCBpbiB0aGUgb3JpZ2luYWwgcGF5bG9hZCBidXQgeW91ciBhZGFwdGVyIGRv
        ZXMgbm90IGltcGxlbWVudCBgZmluZEJlbG9uZ3NUb2AiLCBhZGFwdGVyLmZp
        bmRCZWxvbmdzVG8pOwoKICAgIHJlc29sdmVyLnJlc29sdmUoX2ZpbmRCZWxv
        bmdzVG8oYWRhcHRlciwgdGhpcywgb3duZXIsIGxpbmssIHJlbGF0aW9uc2hp
        cCkpOwogIH0sCgogIC8qKgogICAgVGhpcyBtZXRob2QgZGVsZWdhdGVzIGEg
        cXVlcnkgdG8gdGhlIGFkYXB0ZXIuIFRoaXMgaXMgdGhlIG9uZSBwbGFjZSB3
        aGVyZQogICAgYWRhcHRlci1sZXZlbCBzZW1hbnRpY3MgYXJlIGV4cG9zZWQg
        dG8gdGhlIGFwcGxpY2F0aW9uLgoKICAgIEV4cG9zaW5nIHF1ZXJpZXMgdGhp
        cyB3YXkgc2VlbXMgcHJlZmVyYWJsZSB0byBjcmVhdGluZyBhbiBhYnN0cmFj
        dCBxdWVyeQogICAgbGFuZ3VhZ2UgZm9yIGFsbCBzZXJ2ZXItc2lkZSBxdWVy
        aWVzLCBhbmQgdGhlbiByZXF1aXJlIGFsbCBhZGFwdGVycyB0bwogICAgaW1w
        bGVtZW50IHRoZW0uCgogICAgVGhpcyBtZXRob2QgcmV0dXJucyBhIHByb21p
        c2UsIHdoaWNoIGlzIHJlc29sdmVkIHdpdGggYSBgUmVjb3JkQXJyYXlgCiAg
        ICBvbmNlIHRoZSBzZXJ2ZXIgcmV0dXJucy4KCiAgICBAbWV0aG9kIGZpbmRR
        dWVyeQogICAgQHByaXZhdGUKICAgIEBwYXJhbSB7U3RyaW5nIG9yIHN1YmNs
        YXNzIG9mIERTLk1vZGVsfSB0eXBlCiAgICBAcGFyYW0ge2FueX0gcXVlcnkg
        YW4gb3BhcXVlIHF1ZXJ5IHRvIGJlIHVzZWQgYnkgdGhlIGFkYXB0ZXIKICAg
        IEByZXR1cm4ge1Byb21pc2V9IHByb21pc2UKICAqLwogIGZpbmRRdWVyeTog
        ZnVuY3Rpb24odHlwZSwgcXVlcnkpIHsKICAgIHR5cGUgPSB0aGlzLm1vZGVs
        Rm9yKHR5cGUpOwoKICAgIHZhciBhcnJheSA9IHRoaXMucmVjb3JkQXJyYXlN
        YW5hZ2VyCiAgICAgIC5jcmVhdGVBZGFwdGVyUG9wdWxhdGVkUmVjb3JkQXJy
        YXkodHlwZSwgcXVlcnkpOwoKICAgIHZhciBhZGFwdGVyID0gdGhpcy5hZGFw
        dGVyRm9yKHR5cGUpLAogICAgICAgIHByb21pc2VMYWJlbCA9ICJEUzogU3Rv
        cmUjZmluZFF1ZXJ5ICIgKyB0eXBlLAogICAgICAgIHJlc29sdmVyID0gRW1i
        ZXIuUlNWUC5kZWZlcihwcm9taXNlTGFiZWwpOwoKICAgIEVtYmVyLmFzc2Vy
        dCgiWW91IHRyaWVkIHRvIGxvYWQgYSBxdWVyeSBidXQgeW91IGhhdmUgbm8g
        YWRhcHRlciAoZm9yICIgKyB0eXBlICsgIikiLCBhZGFwdGVyKTsKICAgIEVt
        YmVyLmFzc2VydCgiWW91IHRyaWVkIHRvIGxvYWQgYSBxdWVyeSBidXQgeW91
        ciBhZGFwdGVyIGRvZXMgbm90IGltcGxlbWVudCBgZmluZFF1ZXJ5YCIsIGFk
        YXB0ZXIuZmluZFF1ZXJ5KTsKCiAgICByZXNvbHZlci5yZXNvbHZlKF9maW5k
        UXVlcnkoYWRhcHRlciwgdGhpcywgdHlwZSwgcXVlcnksIGFycmF5KSk7Cgog
        ICAgcmV0dXJuIHByb21pc2VBcnJheShyZXNvbHZlci5wcm9taXNlKTsKICB9
        LAoKICAvKioKICAgIFRoaXMgbWV0aG9kIHJldHVybnMgYW4gYXJyYXkgb2Yg
        YWxsIHJlY29yZHMgYWRhcHRlciBjYW4gZmluZC4KICAgIEl0IHRyaWdnZXJz
        IHRoZSBhZGFwdGVyJ3MgYGZpbmRBbGxgIG1ldGhvZCB0byBnaXZlIGl0IGFu
        IG9wcG9ydHVuaXR5IHRvIHBvcHVsYXRlCiAgICB0aGUgYXJyYXkgd2l0aCBy
        ZWNvcmRzIG9mIHRoYXQgdHlwZS4KCiAgICBAbWV0aG9kIGZpbmRBbGwKICAg
        IEBwcml2YXRlCiAgICBAcGFyYW0ge1N0cmluZyBvciBzdWJjbGFzcyBvZiBE
        Uy5Nb2RlbH0gdHlwZQogICAgQHJldHVybiB7RFMuQWRhcHRlclBvcHVsYXRl
        ZFJlY29yZEFycmF5fQogICovCiAgZmluZEFsbDogZnVuY3Rpb24odHlwZSkg
        ewogICAgdHlwZSA9IHRoaXMubW9kZWxGb3IodHlwZSk7CgogICAgcmV0dXJu
        IHRoaXMuZmV0Y2hBbGwodHlwZSwgdGhpcy5hbGwodHlwZSkpOwogIH0sCgog
        IC8qKgogICAgQG1ldGhvZCBmZXRjaEFsbAogICAgQHByaXZhdGUKICAgIEBw
        YXJhbSB7RFMuTW9kZWx9IHR5cGUKICAgIEBwYXJhbSB7RFMuUmVjb3JkQXJy
        YXl9IGFycmF5CiAgICBAcmV0dXJucyB7UHJvbWlzZX0gcHJvbWlzZQogICov
        CiAgZmV0Y2hBbGw6IGZ1bmN0aW9uKHR5cGUsIGFycmF5KSB7CiAgICB2YXIg
        YWRhcHRlciA9IHRoaXMuYWRhcHRlckZvcih0eXBlKSwKICAgICAgICBzaW5j
        ZVRva2VuID0gdGhpcy50eXBlTWFwRm9yKHR5cGUpLm1ldGFkYXRhLnNpbmNl
        OwoKICAgIHNldChhcnJheSwgJ2lzVXBkYXRpbmcnLCB0cnVlKTsKCiAgICBF
        bWJlci5hc3NlcnQoIllvdSB0cmllZCB0byBsb2FkIGFsbCByZWNvcmRzIGJ1
        dCB5b3UgaGF2ZSBubyBhZGFwdGVyIChmb3IgIiArIHR5cGUgKyAiKSIsIGFk
        YXB0ZXIpOwogICAgRW1iZXIuYXNzZXJ0KCJZb3UgdHJpZWQgdG8gbG9hZCBh
        bGwgcmVjb3JkcyBidXQgeW91ciBhZGFwdGVyIGRvZXMgbm90IGltcGxlbWVu
        dCBgZmluZEFsbGAiLCBhZGFwdGVyLmZpbmRBbGwpOwoKICAgIHJldHVybiBw
        cm9taXNlQXJyYXkoX2ZpbmRBbGwoYWRhcHRlciwgdGhpcywgdHlwZSwgc2lu
        Y2VUb2tlbikpOwogIH0sCgogIC8qKgogICAgQG1ldGhvZCBkaWRVcGRhdGVB
        bGwKICAgIEBwYXJhbSB7RFMuTW9kZWx9IHR5cGUKICAqLwogIGRpZFVwZGF0
        ZUFsbDogZnVuY3Rpb24odHlwZSkgewogICAgdmFyIGZpbmRBbGxDYWNoZSA9
        IHRoaXMudHlwZU1hcEZvcih0eXBlKS5maW5kQWxsQ2FjaGU7CiAgICBzZXQo
        ZmluZEFsbENhY2hlLCAnaXNVcGRhdGluZycsIGZhbHNlKTsKICB9LAoKICAv
        KioKICAgIFRoaXMgbWV0aG9kIHJldHVybnMgYSBmaWx0ZXJlZCBhcnJheSB0
        aGF0IGNvbnRhaW5zIGFsbCBvZiB0aGUga25vd24gcmVjb3JkcwogICAgZm9y
        IGEgZ2l2ZW4gdHlwZS4KCiAgICBOb3RlIHRoYXQgYmVjYXVzZSBpdCdzIGp1
        c3QgYSBmaWx0ZXIsIGl0IHdpbGwgaGF2ZSBhbnkgbG9jYWxseQogICAgY3Jl
        YXRlZCByZWNvcmRzIG9mIHRoZSB0eXBlLgoKICAgIEFsc28gbm90ZSB0aGF0
        IG11bHRpcGxlIGNhbGxzIHRvIGBhbGxgIGZvciBhIGdpdmVuIHR5cGUgd2ls
        bCBhbHdheXMKICAgIHJldHVybiB0aGUgc2FtZSBSZWNvcmRBcnJheS4KCiAg
        ICBFeGFtcGxlCgogICAgYGBgamF2YXNjcmlwdAogICAgdmFyIGxvY2FsX3Bv
        c3RzID0gc3RvcmUuYWxsKEFwcC5Qb3N0KTsKICAgIGBgYAoKICAgIEBtZXRo
        b2QgYWxsCiAgICBAcGFyYW0ge1N0cmluZyBvciBzdWJjbGFzcyBvZiBEUy5N
        b2RlbH0gdHlwZQogICAgQHJldHVybiB7RFMuUmVjb3JkQXJyYXl9CiAgKi8K
        ICBhbGw6IGZ1bmN0aW9uKHR5cGUpIHsKICAgIHR5cGUgPSB0aGlzLm1vZGVs
        Rm9yKHR5cGUpOwoKICAgIHZhciB0eXBlTWFwID0gdGhpcy50eXBlTWFwRm9y
        KHR5cGUpLAogICAgICAgIGZpbmRBbGxDYWNoZSA9IHR5cGVNYXAuZmluZEFs
        bENhY2hlOwoKICAgIGlmIChmaW5kQWxsQ2FjaGUpIHsgcmV0dXJuIGZpbmRB
        bGxDYWNoZTsgfQoKICAgIHZhciBhcnJheSA9IHRoaXMucmVjb3JkQXJyYXlN
        YW5hZ2VyLmNyZWF0ZVJlY29yZEFycmF5KHR5cGUpOwoKICAgIHR5cGVNYXAu
        ZmluZEFsbENhY2hlID0gYXJyYXk7CiAgICByZXR1cm4gYXJyYXk7CiAgfSwK
        CgogIC8qKgogICAgVGhpcyBtZXRob2QgdW5sb2FkcyBhbGwgb2YgdGhlIGtu
        b3duIHJlY29yZHMgZm9yIGEgZ2l2ZW4gdHlwZS4KCiAgICBgYGBqYXZhc2Ny
        aXB0CiAgICBzdG9yZS51bmxvYWRBbGwoQXBwLlBvc3QpOwogICAgYGBgCgog
        ICAgQG1ldGhvZCB1bmxvYWRBbGwKICAgIEBwYXJhbSB7U3RyaW5nIG9yIHN1
        YmNsYXNzIG9mIERTLk1vZGVsfSB0eXBlCiAgKi8KICB1bmxvYWRBbGw6IGZ1
        bmN0aW9uKHR5cGUpIHsKICAgIHR5cGUgPSB0aGlzLm1vZGVsRm9yKHR5cGUp
        OwoKICAgIHZhciB0eXBlTWFwID0gdGhpcy50eXBlTWFwRm9yKHR5cGUpLAog
        ICAgICAgIHJlY29yZHMgPSB0eXBlTWFwLnJlY29yZHMuc3BsaWNlKDApLCBy
        ZWNvcmQ7CgogICAgd2hpbGUocmVjb3JkID0gcmVjb3Jkcy5wb3AoKSkgewog
        ICAgICByZWNvcmQudW5sb2FkUmVjb3JkKCk7CiAgICB9CgogICAgdHlwZU1h
        cC5maW5kQWxsQ2FjaGUgPSBudWxsOwogIH0sCgogIC8qKgogICAgVGFrZXMg
        YSB0eXBlIGFuZCBmaWx0ZXIgZnVuY3Rpb24sIGFuZCByZXR1cm5zIGEgbGl2
        ZSBSZWNvcmRBcnJheSB0aGF0CiAgICByZW1haW5zIHVwIHRvIGRhdGUgYXMg
        bmV3IHJlY29yZHMgYXJlIGxvYWRlZCBpbnRvIHRoZSBzdG9yZSBvciBjcmVh
        dGVkCiAgICBsb2NhbGx5LgoKICAgIFRoZSBjYWxsYmFjayBmdW5jdGlvbiB0
        YWtlcyBhIG1hdGVyaWFsaXplZCByZWNvcmQsIGFuZCByZXR1cm5zIHRydWUK
        ICAgIGlmIHRoZSByZWNvcmQgc2hvdWxkIGJlIGluY2x1ZGVkIGluIHRoZSBm
        aWx0ZXIgYW5kIGZhbHNlIGlmIGl0IHNob3VsZAogICAgbm90LgoKICAgIFRo
        ZSBmaWx0ZXIgZnVuY3Rpb24gaXMgY2FsbGVkIG9uY2Ugb24gYWxsIHJlY29y
        ZHMgZm9yIHRoZSB0eXBlIHdoZW4KICAgIGl0IGlzIGNyZWF0ZWQsIGFuZCB0
        aGVuIG9uY2Ugb24gZWFjaCBuZXdseSBsb2FkZWQgb3IgY3JlYXRlZCByZWNv
        cmQuCgogICAgSWYgYW55IG9mIGEgcmVjb3JkJ3MgcHJvcGVydGllcyBjaGFu
        Z2UsIG9yIGlmIGl0IGNoYW5nZXMgc3RhdGUsIHRoZQogICAgZmlsdGVyIGZ1
        bmN0aW9uIHdpbGwgYmUgaW52b2tlZCBhZ2FpbiB0byBkZXRlcm1pbmUgd2hl
        dGhlciBpdCBzaG91bGQKICAgIHN0aWxsIGJlIGluIHRoZSBhcnJheS4KCiAg
        ICBPcHRpb25hbGx5IHlvdSBjYW4gcGFzcyBhIHF1ZXJ5IHdoaWNoIHdpbGwg
        YmUgdHJpZ2dlcmVkIGF0IGZpcnN0LiBUaGUKICAgIHJlc3VsdHMgcmV0dXJu
        ZWQgYnkgdGhlIHNlcnZlciBjb3VsZCB0aGVuIGFwcGVhciBpbiB0aGUgZmls
        dGVyIGlmIHRoZXkKICAgIG1hdGNoIHRoZSBmaWx0ZXIgZnVuY3Rpb24uCgog
        ICAgRXhhbXBsZQoKICAgIGBgYGphdmFzY3JpcHQKICAgIHN0b3JlLmZpbHRl
        cihBcHAuUG9zdCwge3VucmVhZDogdHJ1ZX0sIGZ1bmN0aW9uKHBvc3QpIHsK
        ICAgICAgcmV0dXJuIHBvc3QuZ2V0KCd1bnJlYWQnKTsKICAgIH0pLnRoZW4o
        ZnVuY3Rpb24odW5yZWFkUG9zdHMpIHsKICAgICAgdW5yZWFkUG9zdHMuZ2V0
        KCdsZW5ndGgnKTsgLy8gNQogICAgICB2YXIgdW5yZWFkUG9zdCA9IHVucmVh
        ZFBvc3RzLm9iamVjdEF0KDApOwogICAgICB1bnJlYWRQb3N0LnNldCgndW5y
        ZWFkJywgZmFsc2UpOwogICAgICB1bnJlYWRQb3N0cy5nZXQoJ2xlbmd0aCcp
        OyAvLyA0CiAgICB9KTsKICAgIGBgYAoKICAgIEBtZXRob2QgZmlsdGVyCiAg
        ICBAcGFyYW0ge1N0cmluZyBvciBzdWJjbGFzcyBvZiBEUy5Nb2RlbH0gdHlw
        ZQogICAgQHBhcmFtIHtPYmplY3R9IHF1ZXJ5IG9wdGlvbmFsIHF1ZXJ5CiAg
        ICBAcGFyYW0ge0Z1bmN0aW9ufSBmaWx0ZXIKICAgIEByZXR1cm4ge0RTLlBy
        b21pc2VBcnJheX0KICAqLwogIGZpbHRlcjogZnVuY3Rpb24odHlwZSwgcXVl
        cnksIGZpbHRlcikgewogICAgdmFyIHByb21pc2U7CgogICAgLy8gYWxsb3cg
        YW4gb3B0aW9uYWwgc2VydmVyIHF1ZXJ5CiAgICBpZiAoYXJndW1lbnRzLmxl
        bmd0aCA9PT0gMykgewogICAgICBwcm9taXNlID0gdGhpcy5maW5kUXVlcnko
        dHlwZSwgcXVlcnkpOwogICAgfSBlbHNlIGlmIChhcmd1bWVudHMubGVuZ3Ro
        ID09PSAyKSB7CiAgICAgIGZpbHRlciA9IHF1ZXJ5OwogICAgfQoKICAgIHR5
        cGUgPSB0aGlzLm1vZGVsRm9yKHR5cGUpOwoKICAgIHZhciBhcnJheSA9IHRo
        aXMucmVjb3JkQXJyYXlNYW5hZ2VyCiAgICAgIC5jcmVhdGVGaWx0ZXJlZFJl
        Y29yZEFycmF5KHR5cGUsIGZpbHRlcik7CiAgICBwcm9taXNlID0gcHJvbWlz
        ZSB8fCByZXNvbHZlKGFycmF5KTsKCiAgICByZXR1cm4gcHJvbWlzZUFycmF5
        KHByb21pc2UudGhlbihmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIGFycmF5
        OwogICAgfSwgbnVsbCwgIkRTOiBTdG9yZSNmaWx0ZXIgb2YgIiArIHR5cGUp
        KTsKICB9LAoKICAvKioKICAgIFRoaXMgbWV0aG9kIHJldHVybnMgaWYgYSBj
        ZXJ0YWluIHJlY29yZCBpcyBhbHJlYWR5IGxvYWRlZAogICAgaW4gdGhlIHN0
        b3JlLiBVc2UgdGhpcyBmdW5jdGlvbiB0byBrbm93IGJlZm9yZWhhbmQgaWYg
        YSBmaW5kKCkKICAgIHdpbGwgcmVzdWx0IGluIGEgcmVxdWVzdCBvciB0aGF0
        IGl0IHdpbGwgYmUgYSBjYWNoZSBoaXQuCgogICAgIEV4YW1wbGUKCiAgICBg
        YGBqYXZhc2NyaXB0CiAgICBzdG9yZS5yZWNvcmRJc0xvYWRlZChBcHAuUG9z
        dCwgMSk7IC8vIGZhbHNlCiAgICBzdG9yZS5maW5kKEFwcC5Qb3N0LCAxKS50
        aGVuKGZ1bmN0aW9uKCkgewogICAgICBzdG9yZS5yZWNvcmRJc0xvYWRlZChB
        cHAuUG9zdCwgMSk7IC8vIHRydWUKICAgIH0pOwogICAgYGBgCgogICAgQG1l
        dGhvZCByZWNvcmRJc0xvYWRlZAogICAgQHBhcmFtIHtTdHJpbmcgb3Igc3Vi
        Y2xhc3Mgb2YgRFMuTW9kZWx9IHR5cGUKICAgIEBwYXJhbSB7c3RyaW5nfSBp
        ZAogICAgQHJldHVybiB7Ym9vbGVhbn0KICAqLwogIHJlY29yZElzTG9hZGVk
        OiBmdW5jdGlvbih0eXBlLCBpZCkgewogICAgaWYgKCF0aGlzLmhhc1JlY29y
        ZEZvcklkKHR5cGUsIGlkKSkgeyByZXR1cm4gZmFsc2U7IH0KICAgIHJldHVy
        biAhZ2V0KHRoaXMucmVjb3JkRm9ySWQodHlwZSwgaWQpLCAnaXNFbXB0eScp
        OwogIH0sCgogIC8qKgogICAgVGhpcyBtZXRob2QgcmV0dXJucyB0aGUgbWV0
        YWRhdGEgZm9yIGEgc3BlY2lmaWMgdHlwZS4KCiAgICBAbWV0aG9kIG1ldGFk
        YXRhRm9yCiAgICBAcGFyYW0ge1N0cmluZyBvciBzdWJjbGFzcyBvZiBEUy5N
        b2RlbH0gdHlwZQogICAgQHJldHVybiB7b2JqZWN0fQogICovCiAgbWV0YWRh
        dGFGb3I6IGZ1bmN0aW9uKHR5cGUpIHsKICAgIHR5cGUgPSB0aGlzLm1vZGVs
        Rm9yKHR5cGUpOwogICAgcmV0dXJuIHRoaXMudHlwZU1hcEZvcih0eXBlKS5t
        ZXRhZGF0YTsKICB9LAoKICAvLyAuLi4uLi4uLi4uLi4KICAvLyAuIFVQREFU
        SU5HIC4KICAvLyAuLi4uLi4uLi4uLi4KCiAgLyoqCiAgICBJZiB0aGUgYWRh
        cHRlciB1cGRhdGVzIGF0dHJpYnV0ZXMgb3IgYWNrbm93bGVkZ2VzIGNyZWF0
        aW9uCiAgICBvciBkZWxldGlvbiwgdGhlIHJlY29yZCB3aWxsIG5vdGlmeSB0
        aGUgc3RvcmUgdG8gdXBkYXRlIGl0cwogICAgbWVtYmVyc2hpcCBpbiBhbnkg
        ZmlsdGVycy4KICAgIFRvIGF2b2lkIHRocmFzaGluZywgdGhpcyBtZXRob2Qg
        aXMgaW52b2tlZCBvbmx5IG9uY2UgcGVyCgogICAgcnVuIGxvb3AgcGVyIHJl
        Y29yZC4KCiAgICBAbWV0aG9kIGRhdGFXYXNVcGRhdGVkCiAgICBAcHJpdmF0
        ZQogICAgQHBhcmFtIHtDbGFzc30gdHlwZQogICAgQHBhcmFtIHtEUy5Nb2Rl
        bH0gcmVjb3JkCiAgKi8KICBkYXRhV2FzVXBkYXRlZDogZnVuY3Rpb24odHlw
        ZSwgcmVjb3JkKSB7CiAgICB0aGlzLnJlY29yZEFycmF5TWFuYWdlci5yZWNv
        cmREaWRDaGFuZ2UocmVjb3JkKTsKICB9LAoKICAvLyAuLi4uLi4uLi4uLi4u
        LgogIC8vIC4gUEVSU0lTVElORyAuCiAgLy8gLi4uLi4uLi4uLi4uLi4KCiAg
        LyoqCiAgICBUaGlzIG1ldGhvZCBpcyBjYWxsZWQgYnkgYHJlY29yZC5zYXZl
        YCwgYW5kIGdldHMgcGFzc2VkIGEKICAgIHJlc29sdmVyIGZvciB0aGUgcHJv
        bWlzZSB0aGF0IGByZWNvcmQuc2F2ZWAgcmV0dXJucy4KCiAgICBJdCBzY2hl
        ZHVsZXMgc2F2aW5nIHRvIGhhcHBlbiBhdCB0aGUgZW5kIG9mIHRoZSBydW4g
        bG9vcC4KCiAgICBAbWV0aG9kIHNjaGVkdWxlU2F2ZQogICAgQHByaXZhdGUK
        ICAgIEBwYXJhbSB7RFMuTW9kZWx9IHJlY29yZAogICAgQHBhcmFtIHtSZXNv
        bHZlcn0gcmVzb2x2ZXIKICAqLwogIHNjaGVkdWxlU2F2ZTogZnVuY3Rpb24o
        cmVjb3JkLCByZXNvbHZlcikgewogICAgcmVjb3JkLmFkYXB0ZXJXaWxsQ29t
        bWl0KCk7CiAgICB0aGlzLl9wZW5kaW5nU2F2ZS5wdXNoKFtyZWNvcmQsIHJl
        c29sdmVyXSk7CiAgICBvbmNlKHRoaXMsICdmbHVzaFBlbmRpbmdTYXZlJyk7
        CiAgfSwKCiAgLyoqCiAgICBUaGlzIG1ldGhvZCBpcyBjYWxsZWQgYXQgdGhl
        IGVuZCBvZiB0aGUgcnVuIGxvb3AsIGFuZAogICAgZmx1c2hlcyBhbnkgcmVj
        b3JkcyBwYXNzZWQgaW50byBgc2NoZWR1bGVTYXZlYAoKICAgIEBtZXRob2Qg
        Zmx1c2hQZW5kaW5nU2F2ZQogICAgQHByaXZhdGUKICAqLwogIGZsdXNoUGVu
        ZGluZ1NhdmU6IGZ1bmN0aW9uKCkgewogICAgdmFyIHBlbmRpbmcgPSB0aGlz
        Ll9wZW5kaW5nU2F2ZS5zbGljZSgpOwogICAgdGhpcy5fcGVuZGluZ1NhdmUg
        PSBbXTsKCiAgICBmb3JFYWNoKHBlbmRpbmcsIGZ1bmN0aW9uKHR1cGxlKSB7
        CiAgICAgIHZhciByZWNvcmQgPSB0dXBsZVswXSwgcmVzb2x2ZXIgPSB0dXBs
        ZVsxXSwKICAgICAgICAgIGFkYXB0ZXIgPSB0aGlzLmFkYXB0ZXJGb3IocmVj
        b3JkLmNvbnN0cnVjdG9yKSwKICAgICAgICAgIG9wZXJhdGlvbjsKCiAgICAg
        IGlmIChnZXQocmVjb3JkLCAnaXNOZXcnKSkgewogICAgICAgIG9wZXJhdGlv
        biA9ICdjcmVhdGVSZWNvcmQnOwogICAgICB9IGVsc2UgaWYgKGdldChyZWNv
        cmQsICdpc0RlbGV0ZWQnKSkgewogICAgICAgIG9wZXJhdGlvbiA9ICdkZWxl
        dGVSZWNvcmQnOwogICAgICB9IGVsc2UgewogICAgICAgIG9wZXJhdGlvbiA9
        ICd1cGRhdGVSZWNvcmQnOwogICAgICB9CgogICAgICByZXNvbHZlci5yZXNv
        bHZlKF9jb21taXQoYWRhcHRlciwgdGhpcywgb3BlcmF0aW9uLCByZWNvcmQp
        KTsKICAgIH0sIHRoaXMpOwogIH0sCgogIC8qKgogICAgVGhpcyBtZXRob2Qg
        aXMgY2FsbGVkIG9uY2UgdGhlIHByb21pc2UgcmV0dXJuZWQgYnkgYW4KICAg
        IGFkYXB0ZXIncyBgY3JlYXRlUmVjb3JkYCwgYHVwZGF0ZVJlY29yZGAgb3Ig
        YGRlbGV0ZVJlY29yZGAKICAgIGlzIHJlc29sdmVkLgoKICAgIElmIHRoZSBk
        YXRhIHByb3ZpZGVzIGEgc2VydmVyLWdlbmVyYXRlZCBJRCwgaXQgd2lsbAog
        ICAgdXBkYXRlIHRoZSByZWNvcmQgYW5kIHRoZSBzdG9yZSdzIGluZGV4ZXMu
        CgogICAgQG1ldGhvZCBkaWRTYXZlUmVjb3JkCiAgICBAcHJpdmF0ZQogICAg
        QHBhcmFtIHtEUy5Nb2RlbH0gcmVjb3JkIHRoZSBpbi1mbGlnaHQgcmVjb3Jk
        CiAgICBAcGFyYW0ge09iamVjdH0gZGF0YSBvcHRpb25hbCBkYXRhIChzZWUg
        YWJvdmUpCiAgKi8KICBkaWRTYXZlUmVjb3JkOiBmdW5jdGlvbihyZWNvcmQs
        IGRhdGEpIHsKICAgIGlmIChkYXRhKSB7CiAgICAgIC8vIG5vcm1hbGl6ZSBy
        ZWxhdGlvbnNoaXAgSURzIGludG8gcmVjb3JkcwogICAgICBkYXRhID0gbm9y
        bWFsaXplUmVsYXRpb25zaGlwcyh0aGlzLCByZWNvcmQuY29uc3RydWN0b3Is
        IGRhdGEsIHJlY29yZCk7CgogICAgICB0aGlzLnVwZGF0ZUlkKHJlY29yZCwg
        ZGF0YSk7CiAgICB9CgogICAgcmVjb3JkLmFkYXB0ZXJEaWRDb21taXQoZGF0
        YSk7CiAgfSwKCiAgLyoqCiAgICBUaGlzIG1ldGhvZCBpcyBjYWxsZWQgb25j
        ZSB0aGUgcHJvbWlzZSByZXR1cm5lZCBieSBhbgogICAgYWRhcHRlcidzIGBj
        cmVhdGVSZWNvcmRgLCBgdXBkYXRlUmVjb3JkYCBvciBgZGVsZXRlUmVjb3Jk
        YAogICAgaXMgcmVqZWN0ZWQgd2l0aCBhIGBEUy5JbnZhbGlkRXJyb3JgLgoK
        ICAgIEBtZXRob2QgcmVjb3JkV2FzSW52YWxpZAogICAgQHByaXZhdGUKICAg
        IEBwYXJhbSB7RFMuTW9kZWx9IHJlY29yZAogICAgQHBhcmFtIHtPYmplY3R9
        IGVycm9ycwogICovCiAgcmVjb3JkV2FzSW52YWxpZDogZnVuY3Rpb24ocmVj
        b3JkLCBlcnJvcnMpIHsKICAgIHJlY29yZC5hZGFwdGVyRGlkSW52YWxpZGF0
        ZShlcnJvcnMpOwogIH0sCgogIC8qKgogICAgVGhpcyBtZXRob2QgaXMgY2Fs
        bGVkIG9uY2UgdGhlIHByb21pc2UgcmV0dXJuZWQgYnkgYW4KICAgIGFkYXB0
        ZXIncyBgY3JlYXRlUmVjb3JkYCwgYHVwZGF0ZVJlY29yZGAgb3IgYGRlbGV0
        ZVJlY29yZGAKICAgIGlzIHJlamVjdGVkICh3aXRoIGFueXRoaW5nIG90aGVy
        IHRoYW4gYSBgRFMuSW52YWxpZEVycm9yYCkuCgogICAgQG1ldGhvZCByZWNv
        cmRXYXNFcnJvcgogICAgQHByaXZhdGUKICAgIEBwYXJhbSB7RFMuTW9kZWx9
        IHJlY29yZAogICovCiAgcmVjb3JkV2FzRXJyb3I6IGZ1bmN0aW9uKHJlY29y
        ZCkgewogICAgcmVjb3JkLmFkYXB0ZXJEaWRFcnJvcigpOwogIH0sCgogIC8q
        KgogICAgV2hlbiBhbiBhZGFwdGVyJ3MgYGNyZWF0ZVJlY29yZGAsIGB1cGRh
        dGVSZWNvcmRgIG9yIGBkZWxldGVSZWNvcmRgCiAgICByZXNvbHZlcyB3aXRo
        IGRhdGEsIHRoaXMgbWV0aG9kIGV4dHJhY3RzIHRoZSBJRCBmcm9tIHRoZSBz
        dXBwbGllZAogICAgZGF0YS4KCiAgICBAbWV0aG9kIHVwZGF0ZUlkCiAgICBA
        cHJpdmF0ZQogICAgQHBhcmFtIHtEUy5Nb2RlbH0gcmVjb3JkCiAgICBAcGFy
        YW0ge09iamVjdH0gZGF0YQogICovCiAgdXBkYXRlSWQ6IGZ1bmN0aW9uKHJl
        Y29yZCwgZGF0YSkgewogICAgdmFyIG9sZElkID0gZ2V0KHJlY29yZCwgJ2lk
        JyksCiAgICAgICAgaWQgPSBjb2VyY2VJZChkYXRhLmlkKTsKCiAgICBFbWJl
        ci5hc3NlcnQoIkFuIGFkYXB0ZXIgY2Fubm90IGFzc2lnbiBhIG5ldyBpZCB0
        byBhIHJlY29yZCB0aGF0IGFscmVhZHkgaGFzIGFuIGlkLiAiICsgcmVjb3Jk
        ICsgIiBoYWQgaWQ6ICIgKyBvbGRJZCArICIgYW5kIHlvdSB0cmllZCB0byB1
        cGRhdGUgaXQgd2l0aCAiICsgaWQgKyAiLiBUaGlzIGxpa2VseSBoYXBwZW5l
        ZCBiZWNhdXNlIHlvdXIgc2VydmVyIHJldHVybmVkIGRhdGEgaW4gcmVzcG9u
        c2UgdG8gYSBmaW5kIG9yIHVwZGF0ZSB0aGF0IGhhZCBhIGRpZmZlcmVudCBp
        ZCB0aGFuIHRoZSBvbmUgeW91IHNlbnQuIiwgb2xkSWQgPT09IG51bGwgfHwg
        aWQgPT09IG9sZElkKTsKCiAgICB0aGlzLnR5cGVNYXBGb3IocmVjb3JkLmNv
        bnN0cnVjdG9yKS5pZFRvUmVjb3JkW2lkXSA9IHJlY29yZDsKCiAgICBzZXQo
        cmVjb3JkLCAnaWQnLCBpZCk7CiAgfSwKCiAgLyoqCiAgICBSZXR1cm5zIGEg
        bWFwIG9mIElEcyB0byBjbGllbnQgSURzIGZvciBhIGdpdmVuIHR5cGUuCgog
        ICAgQG1ldGhvZCB0eXBlTWFwRm9yCiAgICBAcHJpdmF0ZQogICAgQHBhcmFt
        IHR5cGUKICAgIEByZXR1cm4ge09iamVjdH0gdHlwZU1hcAogICovCiAgdHlw
        ZU1hcEZvcjogZnVuY3Rpb24odHlwZSkgewogICAgdmFyIHR5cGVNYXBzID0g
        Z2V0KHRoaXMsICd0eXBlTWFwcycpLAogICAgICAgIGd1aWQgPSBFbWJlci5n
        dWlkRm9yKHR5cGUpLAogICAgICAgIHR5cGVNYXA7CgogICAgdHlwZU1hcCA9
        IHR5cGVNYXBzW2d1aWRdOwoKICAgIGlmICh0eXBlTWFwKSB7IHJldHVybiB0
        eXBlTWFwOyB9CgogICAgdHlwZU1hcCA9IHsKICAgICAgaWRUb1JlY29yZDog
        e30sCiAgICAgIHJlY29yZHM6IFtdLAogICAgICBtZXRhZGF0YToge30KICAg
        IH07CgogICAgdHlwZU1hcHNbZ3VpZF0gPSB0eXBlTWFwOwoKICAgIHJldHVy
        biB0eXBlTWFwOwogIH0sCgogIC8vIC4uLi4uLi4uLi4uLi4uLi4KICAvLyAu
        IExPQURJTkcgREFUQSAuCiAgLy8gLi4uLi4uLi4uLi4uLi4uLgoKICAvKioK
        ICAgIFRoaXMgaW50ZXJuYWwgbWV0aG9kIGlzIHVzZWQgYnkgYHB1c2hgLgoK
        ICAgIEBtZXRob2QgX2xvYWQKICAgIEBwcml2YXRlCiAgICBAcGFyYW0ge1N0
        cmluZyBvciBzdWJjbGFzcyBvZiBEUy5Nb2RlbH0gdHlwZQogICAgQHBhcmFt
        IHtPYmplY3R9IGRhdGEKICAgIEBwYXJhbSB7Qm9vbGVhbn0gcGFydGlhbCB0
        aGUgZGF0YSBzaG91bGQgYmUgbWVyZ2VkIGludG8KICAgICAgdGhlIGV4aXN0
        aW5nIGRhdGEsIG5vdCByZXBsYWNlIGl0LgogICovCiAgX2xvYWQ6IGZ1bmN0
        aW9uKHR5cGUsIGRhdGEsIHBhcnRpYWwpIHsKICAgIHZhciBpZCA9IGNvZXJj
        ZUlkKGRhdGEuaWQpLAogICAgICAgIHJlY29yZCA9IHRoaXMucmVjb3JkRm9y
        SWQodHlwZSwgaWQpOwoKICAgIHJlY29yZC5zZXR1cERhdGEoZGF0YSwgcGFy
        dGlhbCk7CiAgICB0aGlzLnJlY29yZEFycmF5TWFuYWdlci5yZWNvcmREaWRD
        aGFuZ2UocmVjb3JkKTsKCiAgICByZXR1cm4gcmVjb3JkOwogIH0sCgogIC8q
        KgogICAgUmV0dXJucyBhIG1vZGVsIGNsYXNzIGZvciBhIHBhcnRpY3VsYXIg
        a2V5LiBVc2VkIGJ5CiAgICBtZXRob2RzIHRoYXQgdGFrZSBhIHR5cGUga2V5
        IChsaWtlIGBmaW5kYCwgYGNyZWF0ZVJlY29yZGAsCiAgICBldGMuKQoKICAg
        IEBtZXRob2QgbW9kZWxGb3IKICAgIEBwYXJhbSB7U3RyaW5nIG9yIHN1YmNs
        YXNzIG9mIERTLk1vZGVsfSBrZXkKICAgIEByZXR1cm5zIHtzdWJjbGFzcyBv
        ZiBEUy5Nb2RlbH0KICAqLwogIG1vZGVsRm9yOiBmdW5jdGlvbihrZXkpIHsK
        ICAgIHZhciBmYWN0b3J5OwoKCiAgICBpZiAodHlwZW9mIGtleSA9PT0gJ3N0
        cmluZycpIHsKICAgICAgdmFyIG5vcm1hbGl6ZWRLZXkgPSB0aGlzLmNvbnRh
        aW5lci5ub3JtYWxpemUoJ21vZGVsOicgKyBrZXkpOwoKICAgICAgZmFjdG9y
        eSA9IHRoaXMuY29udGFpbmVyLmxvb2t1cEZhY3Rvcnkobm9ybWFsaXplZEtl
        eSk7CiAgICAgIGlmICghZmFjdG9yeSkgeyB0aHJvdyBuZXcgRW1iZXIuRXJy
        b3IoIk5vIG1vZGVsIHdhcyBmb3VuZCBmb3IgJyIgKyBrZXkgKyAiJyIpOyB9
        CiAgICAgIGZhY3RvcnkudHlwZUtleSA9IG5vcm1hbGl6ZWRLZXkuc3BsaXQo
        JzonLCAyKVsxXTsKICAgIH0gZWxzZSB7CiAgICAgIC8vIEEgZmFjdG9yeSBh
        bHJlYWR5IHN1cHBsaWVkLgogICAgICBmYWN0b3J5ID0ga2V5OwogICAgfQoK
        ICAgIGZhY3Rvcnkuc3RvcmUgPSB0aGlzOwogICAgcmV0dXJuIGZhY3Rvcnk7
        CiAgfSwKCiAgLyoqCiAgICBQdXNoIHNvbWUgZGF0YSBmb3IgYSBnaXZlbiB0
        eXBlIGludG8gdGhlIHN0b3JlLgoKICAgIFRoaXMgbWV0aG9kIGV4cGVjdHMg
        bm9ybWFsaXplZCBkYXRhOgoKICAgICogVGhlIElEIGlzIGEga2V5IG5hbWVk
        IGBpZGAgKGFuIElEIGlzIG1hbmRhdG9yeSkKICAgICogVGhlIG5hbWVzIG9m
        IGF0dHJpYnV0ZXMgYXJlIHRoZSBvbmVzIHlvdSB1c2VkIGluCiAgICAgIHlv
        dXIgbW9kZWwncyBgRFMuYXR0cmBzLgogICAgKiBZb3VyIHJlbGF0aW9uc2hp
        cHMgbXVzdCBiZToKICAgICAgKiByZXByZXNlbnRlZCBhcyBJRHMgb3IgQXJy
        YXlzIG9mIElEcwogICAgICAqIHJlcHJlc2VudGVkIGFzIG1vZGVsIGluc3Rh
        bmNlcwogICAgICAqIHJlcHJlc2VudGVkIGFzIFVSTHMsIHVuZGVyIHRoZSBg
        bGlua3NgIGtleQoKICAgIEZvciB0aGlzIG1vZGVsOgoKICAgIGBgYGpzCiAg
        ICBBcHAuUGVyc29uID0gRFMuTW9kZWwuZXh0ZW5kKHsKICAgICAgZmlyc3RO
        YW1lOiBEUy5hdHRyKCksCiAgICAgIGxhc3ROYW1lOiBEUy5hdHRyKCksCgog
        ICAgICBjaGlsZHJlbjogRFMuaGFzTWFueSgncGVyc29uJykKICAgIH0pOwog
        ICAgYGBgCgogICAgVG8gcmVwcmVzZW50IHRoZSBjaGlsZHJlbiBhcyBJRHM6
        CgogICAgYGBganMKICAgIHsKICAgICAgaWQ6IDEsCiAgICAgIGZpcnN0TmFt
        ZTogIlRvbSIsCiAgICAgIGxhc3ROYW1lOiAiRGFsZSIsCiAgICAgIGNoaWxk
        cmVuOiBbMSwgMiwgM10KICAgIH0KICAgIGBgYAoKICAgIFRvIHJlcHJlc2Vu
        dCB0aGUgY2hpbGRyZW4gcmVsYXRpb25zaGlwIGFzIGEgVVJMOgoKICAgIGBg
        YGpzCiAgICB7CiAgICAgIGlkOiAxLAogICAgICBmaXJzdE5hbWU6ICJUb20i
        LAogICAgICBsYXN0TmFtZTogIkRhbGUiLAogICAgICBsaW5rczogewogICAg
        ICAgIGNoaWxkcmVuOiAiL3Blb3BsZS8xL2NoaWxkcmVuIgogICAgICB9CiAg
        ICB9CiAgICBgYGAKCiAgICBJZiB5b3UncmUgc3RyZWFtaW5nIGRhdGEgb3Ig
        aW1wbGVtZW50aW5nIGFuIGFkYXB0ZXIsCiAgICBtYWtlIHN1cmUgdGhhdCB5
        b3UgaGF2ZSBjb252ZXJ0ZWQgdGhlIGluY29taW5nIGRhdGEKICAgIGludG8g
        dGhpcyBmb3JtLgoKICAgIFRoaXMgbWV0aG9kIGNhbiBiZSB1c2VkIGJvdGgg
        dG8gcHVzaCBpbiBicmFuZCBuZXcKICAgIHJlY29yZHMsIGFzIHdlbGwgYXMg
        dG8gdXBkYXRlIGV4aXN0aW5nIHJlY29yZHMuCgogICAgQG1ldGhvZCBwdXNo
        CiAgICBAcGFyYW0ge1N0cmluZyBvciBzdWJjbGFzcyBvZiBEUy5Nb2RlbH0g
        dHlwZQogICAgQHBhcmFtIHtPYmplY3R9IGRhdGEKICAgIEByZXR1cm5zIHtE
        Uy5Nb2RlbH0gdGhlIHJlY29yZCB0aGF0IHdhcyBjcmVhdGVkIG9yCiAgICAg
        IHVwZGF0ZWQuCiAgKi8KICBwdXNoOiBmdW5jdGlvbih0eXBlLCBkYXRhLCBf
        cGFydGlhbCkgewogICAgLy8gX3BhcnRpYWwgaXMgYW4gaW50ZXJuYWwgcGFy
        YW0gdXNlZCBieSBgdXBkYXRlYC4KICAgIC8vIElmIHBhc3NlZCwgaXQgbWVh
        bnMgdGhhdCB0aGUgZGF0YSBzaG91bGQgYmUKICAgIC8vIG1lcmdlZCBpbnRv
        IHRoZSBleGlzdGluZyBkYXRhLCBub3QgcmVwbGFjZSBpdC4KCiAgICBFbWJl
        ci5hc3NlcnQoIllvdSBtdXN0IGluY2x1ZGUgYW4gYGlkYCBpbiBhIGhhc2gg
        cGFzc2VkIHRvIGBwdXNoYCIsIGRhdGEuaWQgIT0gbnVsbCk7CgogICAgdHlw
        ZSA9IHRoaXMubW9kZWxGb3IodHlwZSk7CgogICAgLy8gbm9ybWFsaXplIHJl
        bGF0aW9uc2hpcCBJRHMgaW50byByZWNvcmRzCiAgICBkYXRhID0gbm9ybWFs
        aXplUmVsYXRpb25zaGlwcyh0aGlzLCB0eXBlLCBkYXRhKTsKCiAgICB0aGlz
        Ll9sb2FkKHR5cGUsIGRhdGEsIF9wYXJ0aWFsKTsKCiAgICByZXR1cm4gdGhp
        cy5yZWNvcmRGb3JJZCh0eXBlLCBkYXRhLmlkKTsKICB9LAoKICAvKioKICAg
        IFB1c2ggc29tZSByYXcgZGF0YSBpbnRvIHRoZSBzdG9yZS4KCiAgICBUaGUg
        ZGF0YSB3aWxsIGJlIGF1dG9tYXRpY2FsbHkgZGVzZXJpYWxpemVkIHVzaW5n
        IHRoZQogICAgc2VyaWFsaXplciBmb3IgdGhlIGB0eXBlYCBwYXJhbS4KCiAg
        ICBUaGlzIG1ldGhvZCBjYW4gYmUgdXNlZCBib3RoIHRvIHB1c2ggaW4gYnJh
        bmQgbmV3CiAgICByZWNvcmRzLCBhcyB3ZWxsIGFzIHRvIHVwZGF0ZSBleGlz
        dGluZyByZWNvcmRzLgoKICAgIFlvdSBjYW4gcHVzaCBpbiBtb3JlIHRoYW4g
        b25lIHR5cGUgb2Ygb2JqZWN0IGF0IG9uY2UuCiAgICBBbGwgb2JqZWN0cyBz
        aG91bGQgYmUgaW4gdGhlIGZvcm1hdCBleHBlY3RlZCBieSB0aGUKICAgIHNl
        cmlhbGl6ZXIuCgogICAgYGBganMKICAgIEFwcC5BcHBsaWNhdGlvblNlcmlh
        bGl6ZXIgPSBEUy5BY3RpdmVNb2RlbFNlcmlhbGl6ZXI7CgogICAgdmFyIHB1
        c2hEYXRhID0gewogICAgICBwb3N0czogWwogICAgICAgIHtpZDogMSwgcG9z
        dF90aXRsZTogIkdyZWF0IHBvc3QiLCBjb21tZW50X2lkczogWzJdfQogICAg
        ICBdLAogICAgICBjb21tZW50czogWwogICAgICAgIHtpZDogMiwgY29tbWVu
        dF9ib2R5OiAiSW5zaWdodGZ1bCBjb21tZW50In0KICAgICAgXQogICAgfQoK
        ICAgIHN0b3JlLnB1c2hQYXlsb2FkKCdwb3N0JywgcHVzaERhdGEpOwogICAg
        YGBgCgogICAgQG1ldGhvZCBwdXNoUGF5bG9hZAogICAgQHBhcmFtIHtTdHJp
        bmd9IHR5cGUKICAgIEBwYXJhbSB7T2JqZWN0fSBwYXlsb2FkCiAgICBAcmV0
        dXJuIHtEUy5Nb2RlbH0gdGhlIHJlY29yZCB0aGF0IHdhcyBjcmVhdGVkIG9y
        IHVwZGF0ZWQuCiAgKi8KICBwdXNoUGF5bG9hZDogZnVuY3Rpb24gKHR5cGUs
        IHBheWxvYWQpIHsKICAgIHZhciBzZXJpYWxpemVyOwogICAgaWYgKCFwYXls
        b2FkKSB7CiAgICAgIHBheWxvYWQgPSB0eXBlOwogICAgICBzZXJpYWxpemVy
        ID0gZGVmYXVsdFNlcmlhbGl6ZXIodGhpcy5jb250YWluZXIpOwogICAgICBF
        bWJlci5hc3NlcnQoIllvdSBjYW5ub3QgdXNlIGBzdG9yZSNwdXNoUGF5bG9h
        ZGAgd2l0aG91dCBhIHR5cGUgdW5sZXNzIHlvdXIgZGVmYXVsdCBzZXJpYWxp
        emVyIGRlZmluZXMgYHB1c2hQYXlsb2FkYCIsIHNlcmlhbGl6ZXIucHVzaFBh
        eWxvYWQpOwogICAgfSBlbHNlIHsKICAgICAgc2VyaWFsaXplciA9IHRoaXMu
        c2VyaWFsaXplckZvcih0eXBlKTsKICAgIH0KICAgIHNlcmlhbGl6ZXIucHVz
        aFBheWxvYWQodGhpcywgcGF5bG9hZCk7CiAgfSwKCiAgdXBkYXRlOiBmdW5j
        dGlvbih0eXBlLCBkYXRhKSB7CiAgICBFbWJlci5hc3NlcnQoIllvdSBtdXN0
        IGluY2x1ZGUgYW4gYGlkYCBpbiBhIGhhc2ggcGFzc2VkIHRvIGB1cGRhdGVg
        IiwgZGF0YS5pZCAhPSBudWxsKTsKCiAgICByZXR1cm4gdGhpcy5wdXNoKHR5
        cGUsIGRhdGEsIHRydWUpOwogIH0sCgogIC8qKgogICAgSWYgeW91IGhhdmUg
        YW4gQXJyYXkgb2Ygbm9ybWFsaXplZCBkYXRhIHRvIHB1c2gsCiAgICB5b3Ug
        Y2FuIGNhbGwgYHB1c2hNYW55YCB3aXRoIHRoZSBBcnJheSwgYW5kIGl0IHdp
        bGwKICAgIGNhbGwgYHB1c2hgIHJlcGVhdGVkbHkgZm9yIHlvdS4KCiAgICBA
        bWV0aG9kIHB1c2hNYW55CiAgICBAcGFyYW0ge1N0cmluZyBvciBzdWJjbGFz
        cyBvZiBEUy5Nb2RlbH0gdHlwZQogICAgQHBhcmFtIHtBcnJheX0gZGF0YXMK
        ICAgIEByZXR1cm4ge0FycmF5fQogICovCiAgcHVzaE1hbnk6IGZ1bmN0aW9u
        KHR5cGUsIGRhdGFzKSB7CiAgICByZXR1cm4gbWFwKGRhdGFzLCBmdW5jdGlv
        bihkYXRhKSB7CiAgICAgIHJldHVybiB0aGlzLnB1c2godHlwZSwgZGF0YSk7
        CiAgICB9LCB0aGlzKTsKICB9LAoKICAvKioKICAgIElmIHlvdSBoYXZlIHNv
        bWUgbWV0YWRhdGEgdG8gc2V0IGZvciBhIHR5cGUKICAgIHlvdSBjYW4gY2Fs
        bCBgbWV0YUZvclR5cGVgLgoKICAgIEBtZXRob2QgbWV0YUZvclR5cGUKICAg
        IEBwYXJhbSB7U3RyaW5nIG9yIHN1YmNsYXNzIG9mIERTLk1vZGVsfSB0eXBl
        CiAgICBAcGFyYW0ge09iamVjdH0gbWV0YWRhdGEKICAqLwogIG1ldGFGb3JU
        eXBlOiBmdW5jdGlvbih0eXBlLCBtZXRhZGF0YSkgewogICAgdHlwZSA9IHRo
        aXMubW9kZWxGb3IodHlwZSk7CgogICAgRW1iZXIubWVyZ2UodGhpcy50eXBl
        TWFwRm9yKHR5cGUpLm1ldGFkYXRhLCBtZXRhZGF0YSk7CiAgfSwKCiAgLyoq
        CiAgICBCdWlsZCBhIGJyYW5kIG5ldyByZWNvcmQgZm9yIGEgZ2l2ZW4gdHlw
        ZSwgSUQsIGFuZAogICAgaW5pdGlhbCBkYXRhLgoKICAgIEBtZXRob2QgYnVp
        bGRSZWNvcmQKICAgIEBwcml2YXRlCiAgICBAcGFyYW0ge3N1YmNsYXNzIG9m
        IERTLk1vZGVsfSB0eXBlCiAgICBAcGFyYW0ge1N0cmluZ30gaWQKICAgIEBw
        YXJhbSB7T2JqZWN0fSBkYXRhCiAgICBAcmV0dXJucyB7RFMuTW9kZWx9IHJl
        Y29yZAogICovCiAgYnVpbGRSZWNvcmQ6IGZ1bmN0aW9uKHR5cGUsIGlkLCBk
        YXRhKSB7CiAgICB2YXIgdHlwZU1hcCA9IHRoaXMudHlwZU1hcEZvcih0eXBl
        KSwKICAgICAgICBpZFRvUmVjb3JkID0gdHlwZU1hcC5pZFRvUmVjb3JkOwoK
        ICAgIEVtYmVyLmFzc2VydCgnVGhlIGlkICcgKyBpZCArICcgaGFzIGFscmVh
        ZHkgYmVlbiB1c2VkIHdpdGggYW5vdGhlciByZWNvcmQgb2YgdHlwZSAnICsg
        dHlwZS50b1N0cmluZygpICsgJy4nLCAhaWQgfHwgIWlkVG9SZWNvcmRbaWRd
        KTsKCiAgICAvLyBsb29rdXBGYWN0b3J5IHNob3VsZCByZWFsbHkgcmV0dXJu
        IGFuIG9iamVjdCB0aGF0IGNyZWF0ZXMKICAgIC8vIGluc3RhbmNlcyB3aXRo
        IHRoZSBpbmplY3Rpb25zIGFwcGxpZWQKICAgIHZhciByZWNvcmQgPSB0eXBl
        Ll9jcmVhdGUoewogICAgICBpZDogaWQsCiAgICAgIHN0b3JlOiB0aGlzLAog
        ICAgICBjb250YWluZXI6IHRoaXMuY29udGFpbmVyCiAgICB9KTsKCiAgICBp
        ZiAoZGF0YSkgewogICAgICByZWNvcmQuc2V0dXBEYXRhKGRhdGEpOwogICAg
        fQoKICAgIC8vIGlmIHdlJ3JlIGNyZWF0aW5nIGFuIGl0ZW0sIHRoaXMgcHJv
        Y2VzcyB3aWxsIGJlIGRvbmUKICAgIC8vIGxhdGVyLCBvbmNlIHRoZSBvYmpl
        Y3QgaGFzIGJlZW4gcGVyc2lzdGVkLgogICAgaWYgKGlkKSB7CiAgICAgIGlk
        VG9SZWNvcmRbaWRdID0gcmVjb3JkOwogICAgfQoKICAgIHR5cGVNYXAucmVj
        b3Jkcy5wdXNoKHJlY29yZCk7CgogICAgcmV0dXJuIHJlY29yZDsKICB9LAoK
        ICAvLyAuLi4uLi4uLi4uLi4uLi4KICAvLyAuIERFU1RSVUNUSU9OIC4KICAv
        LyAuLi4uLi4uLi4uLi4uLi4KCiAgLyoqCiAgICBXaGVuIGEgcmVjb3JkIGlz
        IGRlc3Ryb3llZCwgdGhpcyB1bi1pbmRleGVzIGl0IGFuZAogICAgcmVtb3Zl
        cyBpdCBmcm9tIGFueSByZWNvcmQgYXJyYXlzIHNvIGl0IGNhbiBiZSBHQ2Vk
        LgoKICAgIEBtZXRob2QgZGVtYXRlcmlhbGl6ZVJlY29yZAogICAgQHByaXZh
        dGUKICAgIEBwYXJhbSB7RFMuTW9kZWx9IHJlY29yZAogICovCiAgZGVtYXRl
        cmlhbGl6ZVJlY29yZDogZnVuY3Rpb24ocmVjb3JkKSB7CiAgICB2YXIgdHlw
        ZSA9IHJlY29yZC5jb25zdHJ1Y3RvciwKICAgICAgICB0eXBlTWFwID0gdGhp
        cy50eXBlTWFwRm9yKHR5cGUpLAogICAgICAgIGlkID0gZ2V0KHJlY29yZCwg
        J2lkJyk7CgogICAgcmVjb3JkLnVwZGF0ZVJlY29yZEFycmF5cygpOwoKICAg
        IGlmIChpZCkgewogICAgICBkZWxldGUgdHlwZU1hcC5pZFRvUmVjb3JkW2lk
        XTsKICAgIH0KCiAgICB2YXIgbG9jID0gaW5kZXhPZih0eXBlTWFwLnJlY29y
        ZHMsIHJlY29yZCk7CiAgICB0eXBlTWFwLnJlY29yZHMuc3BsaWNlKGxvYywg
        MSk7CiAgfSwKCiAgLy8gLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uCiAgLy8g
        LiBSRUxBVElPTlNISVAgQ0hBTkdFUyAuCiAgLy8gLi4uLi4uLi4uLi4uLi4u
        Li4uLi4uLi4uCgogIGFkZFJlbGF0aW9uc2hpcENoYW5nZUZvcjogZnVuY3Rp
        b24oY2hpbGRSZWNvcmQsIGNoaWxkS2V5LCBwYXJlbnRSZWNvcmQsIHBhcmVu
        dEtleSwgY2hhbmdlKSB7CiAgICB2YXIgY2xpZW50SWQgPSBjaGlsZFJlY29y
        ZC5jbGllbnRJZCwKICAgICAgICBwYXJlbnRDbGllbnRJZCA9IHBhcmVudFJl
        Y29yZCA/IHBhcmVudFJlY29yZCA6IHBhcmVudFJlY29yZDsKICAgIHZhciBr
        ZXkgPSBjaGlsZEtleSArIHBhcmVudEtleTsKICAgIHZhciBjaGFuZ2VzID0g
        dGhpcy5fcmVsYXRpb25zaGlwQ2hhbmdlczsKICAgIGlmICghKGNsaWVudElk
        IGluIGNoYW5nZXMpKSB7CiAgICAgIGNoYW5nZXNbY2xpZW50SWRdID0ge307
        CiAgICB9CiAgICBpZiAoIShwYXJlbnRDbGllbnRJZCBpbiBjaGFuZ2VzW2Ns
        aWVudElkXSkpIHsKICAgICAgY2hhbmdlc1tjbGllbnRJZF1bcGFyZW50Q2xp
        ZW50SWRdID0ge307CiAgICB9CiAgICBpZiAoIShrZXkgaW4gY2hhbmdlc1tj
        bGllbnRJZF1bcGFyZW50Q2xpZW50SWRdKSkgewogICAgICBjaGFuZ2VzW2Ns
        aWVudElkXVtwYXJlbnRDbGllbnRJZF1ba2V5XSA9IHt9OwogICAgfQogICAg
        Y2hhbmdlc1tjbGllbnRJZF1bcGFyZW50Q2xpZW50SWRdW2tleV1bY2hhbmdl
        LmNoYW5nZVR5cGVdID0gY2hhbmdlOwogIH0sCgogIHJlbW92ZVJlbGF0aW9u
        c2hpcENoYW5nZUZvcjogZnVuY3Rpb24oY2xpZW50UmVjb3JkLCBjaGlsZEtl
        eSwgcGFyZW50UmVjb3JkLCBwYXJlbnRLZXksIHR5cGUpIHsKICAgIHZhciBj
        bGllbnRJZCA9IGNsaWVudFJlY29yZC5jbGllbnRJZCwKICAgICAgICBwYXJl
        bnRDbGllbnRJZCA9IHBhcmVudFJlY29yZCA/IHBhcmVudFJlY29yZC5jbGll
        bnRJZCA6IHBhcmVudFJlY29yZDsKICAgIHZhciBjaGFuZ2VzID0gdGhpcy5f
        cmVsYXRpb25zaGlwQ2hhbmdlczsKICAgIHZhciBrZXkgPSBjaGlsZEtleSAr
        IHBhcmVudEtleTsKICAgIGlmICghKGNsaWVudElkIGluIGNoYW5nZXMpIHx8
        ICEocGFyZW50Q2xpZW50SWQgaW4gY2hhbmdlc1tjbGllbnRJZF0pIHx8ICEo
        a2V5IGluIGNoYW5nZXNbY2xpZW50SWRdW3BhcmVudENsaWVudElkXSkpewog
        ICAgICByZXR1cm47CiAgICB9CiAgICBkZWxldGUgY2hhbmdlc1tjbGllbnRJ
        ZF1bcGFyZW50Q2xpZW50SWRdW2tleV1bdHlwZV07CiAgfSwKCiAgcmVsYXRp
        b25zaGlwQ2hhbmdlUGFpcnNGb3I6IGZ1bmN0aW9uKHJlY29yZCl7CiAgICB2
        YXIgdG9SZXR1cm4gPSBbXTsKCiAgICBpZiggIXJlY29yZCApIHsgcmV0dXJu
        IHRvUmV0dXJuOyB9CgogICAgLy9UT0RPKElnb3IpIFdoYXQgYWJvdXQgdGhl
        IG90aGVyIHNpZGUKICAgIHZhciBjaGFuZ2VzT2JqZWN0ID0gdGhpcy5fcmVs
        YXRpb25zaGlwQ2hhbmdlc1tyZWNvcmQuY2xpZW50SWRdOwogICAgZm9yICh2
        YXIgb2JqS2V5IGluIGNoYW5nZXNPYmplY3QpewogICAgICBpZihjaGFuZ2Vz
        T2JqZWN0Lmhhc093blByb3BlcnR5KG9iaktleSkpewogICAgICAgIGZvciAo
        dmFyIGNoYW5nZUtleSBpbiBjaGFuZ2VzT2JqZWN0W29iaktleV0pewogICAg
        ICAgICAgaWYoY2hhbmdlc09iamVjdFtvYmpLZXldLmhhc093blByb3BlcnR5
        KGNoYW5nZUtleSkpewogICAgICAgICAgICB0b1JldHVybi5wdXNoKGNoYW5n
        ZXNPYmplY3Rbb2JqS2V5XVtjaGFuZ2VLZXldKTsKICAgICAgICAgIH0KICAg
        ICAgICB9CiAgICAgIH0KICAgIH0KICAgIHJldHVybiB0b1JldHVybjsKICB9
        LAoKICAvLyAuLi4uLi4uLi4uLi4uLi4uLi4uLi4uCiAgLy8gLiBQRVItVFlQ
        RSBBREFQVEVSUwogIC8vIC4uLi4uLi4uLi4uLi4uLi4uLi4uLi4KCiAgLyoq
        CiAgICBSZXR1cm5zIHRoZSBhZGFwdGVyIGZvciBhIGdpdmVuIHR5cGUuCgog
        ICAgQG1ldGhvZCBhZGFwdGVyRm9yCiAgICBAcHJpdmF0ZQogICAgQHBhcmFt
        IHtzdWJjbGFzcyBvZiBEUy5Nb2RlbH0gdHlwZQogICAgQHJldHVybnMgRFMu
        QWRhcHRlcgogICovCiAgYWRhcHRlckZvcjogZnVuY3Rpb24odHlwZSkgewog
        ICAgdmFyIGNvbnRhaW5lciA9IHRoaXMuY29udGFpbmVyLCBhZGFwdGVyOwoK
        ICAgIGlmIChjb250YWluZXIpIHsKICAgICAgYWRhcHRlciA9IGNvbnRhaW5l
        ci5sb29rdXAoJ2FkYXB0ZXI6JyArIHR5cGUudHlwZUtleSkgfHwgY29udGFp
        bmVyLmxvb2t1cCgnYWRhcHRlcjphcHBsaWNhdGlvbicpOwogICAgfQoKICAg
        IHJldHVybiBhZGFwdGVyIHx8IGdldCh0aGlzLCAnZGVmYXVsdEFkYXB0ZXIn
        KTsKICB9LAoKICAvLyAuLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4K
        ICAvLyAuIFJFQ09SRCBDSEFOR0UgTk9USUZJQ0FUSU9OIC4KICAvLyAuLi4u
        Li4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4KCiAgLyoqCiAgICBSZXR1cm5z
        IGFuIGluc3RhbmNlIG9mIHRoZSBzZXJpYWxpemVyIGZvciBhIGdpdmVuIHR5
        cGUuIEZvcgogICAgZXhhbXBsZSwgYHNlcmlhbGl6ZXJGb3IoJ3BlcnNvbicp
        YCB3aWxsIHJldHVybiBhbiBpbnN0YW5jZSBvZgogICAgYEFwcC5QZXJzb25T
        ZXJpYWxpemVyYC4KCiAgICBJZiBubyBgQXBwLlBlcnNvblNlcmlhbGl6ZXJg
        IGlzIGZvdW5kLCB0aGlzIG1ldGhvZCB3aWxsIGxvb2sKICAgIGZvciBhbiBg
        QXBwLkFwcGxpY2F0aW9uU2VyaWFsaXplcmAgKHRoZSBkZWZhdWx0IHNlcmlh
        bGl6ZXIgZm9yCiAgICB5b3VyIGVudGlyZSBhcHBsaWNhdGlvbikuCgogICAg
        SWYgbm8gYEFwcC5BcHBsaWNhdGlvblNlcmlhbGl6ZXJgIGlzIGZvdW5kLCBp
        dCB3aWxsIGZhbGwgYmFjawogICAgdG8gYW4gaW5zdGFuY2Ugb2YgYERTLkpT
        T05TZXJpYWxpemVyYC4KCiAgICBAbWV0aG9kIHNlcmlhbGl6ZXJGb3IKICAg
        IEBwcml2YXRlCiAgICBAcGFyYW0ge1N0cmluZ30gdHlwZSB0aGUgcmVjb3Jk
        IHRvIHNlcmlhbGl6ZQogICAgQHJldHVybiB7RFMuU2VyaWFsaXplcn0KICAq
        LwogIHNlcmlhbGl6ZXJGb3I6IGZ1bmN0aW9uKHR5cGUpIHsKICAgIHR5cGUg
        PSB0aGlzLm1vZGVsRm9yKHR5cGUpOwogICAgdmFyIGFkYXB0ZXIgPSB0aGlz
        LmFkYXB0ZXJGb3IodHlwZSk7CgogICAgcmV0dXJuIHNlcmlhbGl6ZXJGb3Io
        dGhpcy5jb250YWluZXIsIHR5cGUudHlwZUtleSwgYWRhcHRlciAmJiBhZGFw
        dGVyLmRlZmF1bHRTZXJpYWxpemVyKTsKICB9Cn0pOwoKZnVuY3Rpb24gbm9y
        bWFsaXplUmVsYXRpb25zaGlwcyhzdG9yZSwgdHlwZSwgZGF0YSwgcmVjb3Jk
        KSB7CiAgdHlwZS5lYWNoUmVsYXRpb25zaGlwKGZ1bmN0aW9uKGtleSwgcmVs
        YXRpb25zaGlwKSB7CiAgICAvLyBBIGxpbmsgKHVzdWFsbHkgYSBVUkwpIHdh
        cyBhbHJlYWR5IHByb3ZpZGVkIGluCiAgICAvLyBub3JtYWxpemVkIGZvcm0K
        ICAgIGlmIChkYXRhLmxpbmtzICYmIGRhdGEubGlua3Nba2V5XSkgewogICAg
        ICBpZiAocmVjb3JkICYmIHJlbGF0aW9uc2hpcC5vcHRpb25zLmFzeW5jKSB7
        IHJlY29yZC5fcmVsYXRpb25zaGlwc1trZXldID0gbnVsbDsgfQogICAgICBy
        ZXR1cm47CiAgICB9CgogICAgdmFyIGtpbmQgPSByZWxhdGlvbnNoaXAua2lu
        ZCwKICAgICAgICB2YWx1ZSA9IGRhdGFba2V5XTsKCiAgICBpZiAodmFsdWUg
        PT0gbnVsbCkgeyByZXR1cm47IH0KCiAgICBpZiAoa2luZCA9PT0gJ2JlbG9u
        Z3NUbycpIHsKICAgICAgZGVzZXJpYWxpemVSZWNvcmRJZChzdG9yZSwgZGF0
        YSwga2V5LCByZWxhdGlvbnNoaXAsIHZhbHVlKTsKICAgIH0gZWxzZSBpZiAo
        a2luZCA9PT0gJ2hhc01hbnknKSB7CiAgICAgIGRlc2VyaWFsaXplUmVjb3Jk
        SWRzKHN0b3JlLCBkYXRhLCBrZXksIHJlbGF0aW9uc2hpcCwgdmFsdWUpOwog
        ICAgICBhZGRVbnNhdmVkUmVjb3JkcyhyZWNvcmQsIGtleSwgdmFsdWUpOwog
        ICAgfQogIH0pOwoKICByZXR1cm4gZGF0YTsKfQoKZnVuY3Rpb24gZGVzZXJp
        YWxpemVSZWNvcmRJZChzdG9yZSwgZGF0YSwga2V5LCByZWxhdGlvbnNoaXAs
        IGlkKSB7CiAgaWYgKGlzTm9uZShpZCkgfHwgaWQgaW5zdGFuY2VvZiBEUy5N
        b2RlbCkgewogICAgcmV0dXJuOwogIH0KCiAgdmFyIHR5cGU7CgogIGlmICh0
        eXBlb2YgaWQgPT09ICdudW1iZXInIHx8IHR5cGVvZiBpZCA9PT0gJ3N0cmlu
        ZycpIHsKICAgIHR5cGUgPSB0eXBlRm9yKHJlbGF0aW9uc2hpcCwga2V5LCBk
        YXRhKTsKICAgIGRhdGFba2V5XSA9IHN0b3JlLnJlY29yZEZvcklkKHR5cGUs
        IGlkKTsKICB9IGVsc2UgaWYgKHR5cGVvZiBpZCA9PT0gJ29iamVjdCcpIHsK
        ICAgIC8vIHBvbHltb3JwaGljCiAgICBkYXRhW2tleV0gPSBzdG9yZS5yZWNv
        cmRGb3JJZChpZC50eXBlLCBpZC5pZCk7CiAgfQp9CgpmdW5jdGlvbiB0eXBl
        Rm9yKHJlbGF0aW9uc2hpcCwga2V5LCBkYXRhKSB7CiAgaWYgKHJlbGF0aW9u
        c2hpcC5vcHRpb25zLnBvbHltb3JwaGljKSB7CiAgICByZXR1cm4gZGF0YVtr
        ZXkgKyAiVHlwZSJdOwogIH0gZWxzZSB7CiAgICByZXR1cm4gcmVsYXRpb25z
        aGlwLnR5cGU7CiAgfQp9CgpmdW5jdGlvbiBkZXNlcmlhbGl6ZVJlY29yZElk
        cyhzdG9yZSwgZGF0YSwga2V5LCByZWxhdGlvbnNoaXAsIGlkcykgewogIGZv
        ciAodmFyIGk9MCwgbD1pZHMubGVuZ3RoOyBpPGw7IGkrKykgewogICAgZGVz
        ZXJpYWxpemVSZWNvcmRJZChzdG9yZSwgaWRzLCBpLCByZWxhdGlvbnNoaXAs
        IGlkc1tpXSk7CiAgfQp9CgovLyBJZiB0aGVyZSBhcmUgYW55IHVuc2F2ZWQg
        cmVjb3JkcyB0aGF0IGFyZSBpbiBhIGhhc01hbnkgdGhleSB3b24ndCBiZQov
        LyBpbiB0aGUgcGF5bG9hZCwgc28gYWRkIHRoZW0gYmFjayBpbiBtYW51YWxs
        eS4KZnVuY3Rpb24gYWRkVW5zYXZlZFJlY29yZHMocmVjb3JkLCBrZXksIGRh
        dGEpIHsKICBpZihyZWNvcmQpIHsKICAgIGRhdGEucHVzaE9iamVjdHMocmVj
        b3JkLmdldChrZXkpLmZpbHRlckJ5KCdpc05ldycpKTsKICB9Cn0KCi8vIERl
        bGVnYXRpb24gdG8gdGhlIGFkYXB0ZXIgYW5kIHByb21pc2UgbWFuYWdlbWVu
        dAovKioKICBBIGBQcm9taXNlQXJyYXlgIGlzIGFuIG9iamVjdCB0aGF0IGFj
        dHMgbGlrZSBib3RoIGFuIGBFbWJlci5BcnJheWAKICBhbmQgYSBwcm9taXNl
        LiBXaGVuIHRoZSBwcm9taXNlIGlzIHJlc29sdmVkIHRoZSB0aGUgcmVzdWx0
        aW5nIHZhbHVlCiAgd2lsbCBiZSBzZXQgdG8gdGhlIGBQcm9taXNlQXJyYXlg
        J3MgYGNvbnRlbnRgIHByb3BlcnR5LiBUaGlzIG1ha2VzCiAgaXQgZWFzeSB0
        byBjcmVhdGUgZGF0YSBiaW5kaW5ncyB3aXRoIHRoZSBgUHJvbWlzZUFycmF5
        YCB0aGF0IHdpbGwgYmUKICB1cGRhdGVkIHdoZW4gdGhlIHByb21pc2UgcmVz
        b2x2ZXMuCgogIEZvciBtb3JlIGluZm9ybWF0aW9uIHNlZSB0aGUgW0VtYmVy
        LlByb21pc2VQcm94eU1peGluCiAgZG9jdW1lbnRhdGlvbl0oL2FwaS9jbGFz
        c2VzL0VtYmVyLlByb21pc2VQcm94eU1peGluLmh0bWwpLgoKICBFeGFtcGxl
        CgogIGBgYGphdmFzY3JpcHQKICB2YXIgcHJvbWlzZUFycmF5ID0gRFMuUHJv
        bWlzZUFycmF5LmNyZWF0ZSh7CiAgICBwcm9taXNlOiAkLmdldEpTT04oJy9z
        b21lL3JlbW90ZS9kYXRhLmpzb24nKQogIH0pOwoKICBwcm9taXNlQXJyYXku
        Z2V0KCdsZW5ndGgnKTsgLy8gMAoKICBwcm9taXNlQXJyYXkudGhlbihmdW5j
        dGlvbigpIHsKICAgIHByb21pc2VBcnJheS5nZXQoJ2xlbmd0aCcpOyAvLyAx
        MDAKICB9KTsKICBgYGAKCiAgQGNsYXNzIFByb21pc2VBcnJheQogIEBuYW1l
        c3BhY2UgRFMKICBAZXh0ZW5kcyBFbWJlci5BcnJheVByb3h5CiAgQHVzZXMg
        RW1iZXIuUHJvbWlzZVByb3h5TWl4aW4KKi8KRFMuUHJvbWlzZUFycmF5ID0g
        RW1iZXIuQXJyYXlQcm94eS5leHRlbmQoRW1iZXIuUHJvbWlzZVByb3h5TWl4
        aW4pOwovKioKICBBIGBQcm9taXNlT2JqZWN0YCBpcyBhbiBvYmplY3QgdGhh
        dCBhY3RzIGxpa2UgYm90aCBhbiBgRW1iZXIuT2JqZWN0YAogIGFuZCBhIHBy
        b21pc2UuIFdoZW4gdGhlIHByb21pc2UgaXMgcmVzb2x2ZWQgdGhlIHRoZSBy
        ZXN1bHRpbmcgdmFsdWUKICB3aWxsIGJlIHNldCB0byB0aGUgYFByb21pc2VP
        YmplY3RgJ3MgYGNvbnRlbnRgIHByb3BlcnR5LiBUaGlzIG1ha2VzCiAgaXQg
        ZWFzeSB0byBjcmVhdGUgZGF0YSBiaW5kaW5ncyB3aXRoIHRoZSBgUHJvbWlz
        ZU9iamVjdGAgdGhhdCB3aWxsCiAgYmUgdXBkYXRlZCB3aGVuIHRoZSBwcm9t
        aXNlIHJlc29sdmVzLgoKICBGb3IgbW9yZSBpbmZvcm1hdGlvbiBzZWUgdGhl
        IFtFbWJlci5Qcm9taXNlUHJveHlNaXhpbgogIGRvY3VtZW50YXRpb25dKC9h
        cGkvY2xhc3Nlcy9FbWJlci5Qcm9taXNlUHJveHlNaXhpbi5odG1sKS4KCiAg
        RXhhbXBsZQoKICBgYGBqYXZhc2NyaXB0CiAgdmFyIHByb21pc2VPYmplY3Qg
        PSBEUy5Qcm9taXNlT2JqZWN0LmNyZWF0ZSh7CiAgICBwcm9taXNlOiAkLmdl
        dEpTT04oJy9zb21lL3JlbW90ZS9kYXRhLmpzb24nKQogIH0pOwoKICBwcm9t
        aXNlT2JqZWN0LmdldCgnbmFtZScpOyAvLyBudWxsCgogIHByb21pc2VPYmpl
        Y3QudGhlbihmdW5jdGlvbigpIHsKICAgIHByb21pc2VPYmplY3QuZ2V0KCdu
        YW1lJyk7IC8vICdUb21zdGVyJwogIH0pOwogIGBgYAoKICBAY2xhc3MgUHJv
        bWlzZU9iamVjdAogIEBuYW1lc3BhY2UgRFMKICBAZXh0ZW5kcyBFbWJlci5P
        YmplY3RQcm94eQogIEB1c2VzIEVtYmVyLlByb21pc2VQcm94eU1peGluCiov
        CkRTLlByb21pc2VPYmplY3QgPSBFbWJlci5PYmplY3RQcm94eS5leHRlbmQo
        RW1iZXIuUHJvbWlzZVByb3h5TWl4aW4pOwoKZnVuY3Rpb24gcHJvbWlzZU9i
        amVjdChwcm9taXNlKSB7CiAgcmV0dXJuIERTLlByb21pc2VPYmplY3QuY3Jl
        YXRlKHsgcHJvbWlzZTogcHJvbWlzZSB9KTsKfQoKZnVuY3Rpb24gcHJvbWlz
        ZUFycmF5KHByb21pc2UpIHsKICByZXR1cm4gRFMuUHJvbWlzZUFycmF5LmNy
        ZWF0ZSh7IHByb21pc2U6IHByb21pc2UgfSk7Cn0KCmZ1bmN0aW9uIGlzVGhl
        bmFibGUob2JqZWN0KSB7CiAgcmV0dXJuIG9iamVjdCAmJiB0eXBlb2Ygb2Jq
        ZWN0LnRoZW4gPT09ICdmdW5jdGlvbic7Cn0KCmZ1bmN0aW9uIHNlcmlhbGl6
        ZXJGb3IoY29udGFpbmVyLCB0eXBlLCBkZWZhdWx0U2VyaWFsaXplcikgewog
        IHJldHVybiBjb250YWluZXIubG9va3VwKCdzZXJpYWxpemVyOicrdHlwZSkg
        fHwKICAgICAgICAgICAgICAgICBjb250YWluZXIubG9va3VwKCdzZXJpYWxp
        emVyOmFwcGxpY2F0aW9uJykgfHwKICAgICAgICAgICAgICAgICBjb250YWlu
        ZXIubG9va3VwKCdzZXJpYWxpemVyOicgKyBkZWZhdWx0U2VyaWFsaXplcikg
        fHwKICAgICAgICAgICAgICAgICBjb250YWluZXIubG9va3VwKCdzZXJpYWxp
        emVyOi1kZWZhdWx0Jyk7Cn0KCmZ1bmN0aW9uIGRlZmF1bHRTZXJpYWxpemVy
        KGNvbnRhaW5lcikgewogIHJldHVybiBjb250YWluZXIubG9va3VwKCdzZXJp
        YWxpemVyOmFwcGxpY2F0aW9uJykgfHwKICAgICAgICAgY29udGFpbmVyLmxv
        b2t1cCgnc2VyaWFsaXplcjotZGVmYXVsdCcpOwp9CgpmdW5jdGlvbiBzZXJp
        YWxpemVyRm9yQWRhcHRlcihhZGFwdGVyLCB0eXBlKSB7CiAgdmFyIHNlcmlh
        bGl6ZXIgPSBhZGFwdGVyLnNlcmlhbGl6ZXIsCiAgICAgIGRlZmF1bHRTZXJp
        YWxpemVyID0gYWRhcHRlci5kZWZhdWx0U2VyaWFsaXplciwKICAgICAgY29u
        dGFpbmVyID0gYWRhcHRlci5jb250YWluZXI7CgogIGlmIChjb250YWluZXIg
        JiYgc2VyaWFsaXplciA9PT0gdW5kZWZpbmVkKSB7CiAgICBzZXJpYWxpemVy
        ID0gc2VyaWFsaXplckZvcihjb250YWluZXIsIHR5cGUudHlwZUtleSwgZGVm
        YXVsdFNlcmlhbGl6ZXIpOwogIH0KCiAgaWYgKHNlcmlhbGl6ZXIgPT09IG51
        bGwgfHwgc2VyaWFsaXplciA9PT0gdW5kZWZpbmVkKSB7CiAgICBzZXJpYWxp
        emVyID0gewogICAgICBleHRyYWN0OiBmdW5jdGlvbihzdG9yZSwgdHlwZSwg
        cGF5bG9hZCkgeyByZXR1cm4gcGF5bG9hZDsgfQogICAgfTsKICB9CgogIHJl
        dHVybiBzZXJpYWxpemVyOwp9CgpmdW5jdGlvbiBfZmluZChhZGFwdGVyLCBz
        dG9yZSwgdHlwZSwgaWQpIHsKICB2YXIgcHJvbWlzZSA9IGFkYXB0ZXIuZmlu
        ZChzdG9yZSwgdHlwZSwgaWQpLAogICAgICBzZXJpYWxpemVyID0gc2VyaWFs
        aXplckZvckFkYXB0ZXIoYWRhcHRlciwgdHlwZSk7CgogIHJldHVybiByZXNv
        bHZlKHByb21pc2UsICJEUzogSGFuZGxlIEFkYXB0ZXIjZmluZCBvZiAiICsg
        dHlwZSArICIgd2l0aCBpZDogIiArIGlkKS50aGVuKGZ1bmN0aW9uKHBheWxv
        YWQpIHsKICAgIEVtYmVyLmFzc2VydCgiWW91IG1hZGUgYSByZXF1ZXN0IGZv
        ciBhICIgKyB0eXBlLnR5cGVLZXkgKyAiIHdpdGggaWQgIiArIGlkICsgIiwg
        YnV0IHRoZSBhZGFwdGVyJ3MgcmVzcG9uc2UgZGlkIG5vdCBoYXZlIGFueSBk
        YXRhIiwgcGF5bG9hZCk7CiAgICBwYXlsb2FkID0gc2VyaWFsaXplci5leHRy
        YWN0KHN0b3JlLCB0eXBlLCBwYXlsb2FkLCBpZCwgJ2ZpbmQnKTsKCiAgICBy
        ZXR1cm4gc3RvcmUucHVzaCh0eXBlLCBwYXlsb2FkKTsKICB9LCBmdW5jdGlv
        bihlcnJvcikgewogICAgdmFyIHJlY29yZCA9IHN0b3JlLmdldEJ5SWQodHlw
        ZSwgaWQpOwogICAgcmVjb3JkLm5vdEZvdW5kKCk7CiAgICB0aHJvdyBlcnJv
        cjsKICB9LCAiRFM6IEV4dHJhY3QgcGF5bG9hZCBvZiAnIiArIHR5cGUgKyAi
        JyIpOwp9CgpmdW5jdGlvbiBfZmluZE1hbnkoYWRhcHRlciwgc3RvcmUsIHR5
        cGUsIGlkcywgb3duZXIpIHsKICB2YXIgcHJvbWlzZSA9IGFkYXB0ZXIuZmlu
        ZE1hbnkoc3RvcmUsIHR5cGUsIGlkcywgb3duZXIpLAogICAgICBzZXJpYWxp
        emVyID0gc2VyaWFsaXplckZvckFkYXB0ZXIoYWRhcHRlciwgdHlwZSk7Cgog
        IHJldHVybiByZXNvbHZlKHByb21pc2UsICJEUzogSGFuZGxlIEFkYXB0ZXIj
        ZmluZE1hbnkgb2YgIiArIHR5cGUpLnRoZW4oZnVuY3Rpb24ocGF5bG9hZCkg
        ewogICAgcGF5bG9hZCA9IHNlcmlhbGl6ZXIuZXh0cmFjdChzdG9yZSwgdHlw
        ZSwgcGF5bG9hZCwgbnVsbCwgJ2ZpbmRNYW55Jyk7CgogICAgRW1iZXIuYXNz
        ZXJ0KCJUaGUgcmVzcG9uc2UgZnJvbSBhIGZpbmRNYW55IG11c3QgYmUgYW4g
        QXJyYXksIG5vdCAiICsgRW1iZXIuaW5zcGVjdChwYXlsb2FkKSwgRW1iZXIu
        dHlwZU9mKHBheWxvYWQpID09PSAnYXJyYXknKTsKCiAgICBzdG9yZS5wdXNo
        TWFueSh0eXBlLCBwYXlsb2FkKTsKICB9LCBudWxsLCAiRFM6IEV4dHJhY3Qg
        cGF5bG9hZCBvZiAiICsgdHlwZSk7Cn0KCmZ1bmN0aW9uIF9maW5kSGFzTWFu
        eShhZGFwdGVyLCBzdG9yZSwgcmVjb3JkLCBsaW5rLCByZWxhdGlvbnNoaXAp
        IHsKICB2YXIgcHJvbWlzZSA9IGFkYXB0ZXIuZmluZEhhc01hbnkoc3RvcmUs
        IHJlY29yZCwgbGluaywgcmVsYXRpb25zaGlwKSwKICAgICAgc2VyaWFsaXpl
        ciA9IHNlcmlhbGl6ZXJGb3JBZGFwdGVyKGFkYXB0ZXIsIHJlbGF0aW9uc2hp
        cC50eXBlKTsKCiAgcmV0dXJuIHJlc29sdmUocHJvbWlzZSwgIkRTOiBIYW5k
        bGUgQWRhcHRlciNmaW5kSGFzTWFueSBvZiAiICsgcmVjb3JkICsgIiA6ICIg
        KyByZWxhdGlvbnNoaXAudHlwZSkudGhlbihmdW5jdGlvbihwYXlsb2FkKSB7
        CiAgICBwYXlsb2FkID0gc2VyaWFsaXplci5leHRyYWN0KHN0b3JlLCByZWxh
        dGlvbnNoaXAudHlwZSwgcGF5bG9hZCwgbnVsbCwgJ2ZpbmRIYXNNYW55Jyk7
        CgogICAgRW1iZXIuYXNzZXJ0KCJUaGUgcmVzcG9uc2UgZnJvbSBhIGZpbmRI
        YXNNYW55IG11c3QgYmUgYW4gQXJyYXksIG5vdCAiICsgRW1iZXIuaW5zcGVj
        dChwYXlsb2FkKSwgRW1iZXIudHlwZU9mKHBheWxvYWQpID09PSAnYXJyYXkn
        KTsKCiAgICB2YXIgcmVjb3JkcyA9IHN0b3JlLnB1c2hNYW55KHJlbGF0aW9u
        c2hpcC50eXBlLCBwYXlsb2FkKTsKICAgIHJlY29yZC51cGRhdGVIYXNNYW55
        KHJlbGF0aW9uc2hpcC5rZXksIHJlY29yZHMpOwogIH0sIG51bGwsICJEUzog
        RXh0cmFjdCBwYXlsb2FkIG9mICIgKyByZWNvcmQgKyAiIDogaGFzTWFueSAi
        ICsgcmVsYXRpb25zaGlwLnR5cGUpOwp9CgpmdW5jdGlvbiBfZmluZEJlbG9u
        Z3NUbyhhZGFwdGVyLCBzdG9yZSwgcmVjb3JkLCBsaW5rLCByZWxhdGlvbnNo
        aXApIHsKICB2YXIgcHJvbWlzZSA9IGFkYXB0ZXIuZmluZEJlbG9uZ3NUbyhz
        dG9yZSwgcmVjb3JkLCBsaW5rLCByZWxhdGlvbnNoaXApLAogICAgICBzZXJp
        YWxpemVyID0gc2VyaWFsaXplckZvckFkYXB0ZXIoYWRhcHRlciwgcmVsYXRp
        b25zaGlwLnR5cGUpOwoKICByZXR1cm4gcmVzb2x2ZShwcm9taXNlLCAiRFM6
        IEhhbmRsZSBBZGFwdGVyI2ZpbmRCZWxvbmdzVG8gb2YgIiArIHJlY29yZCAr
        ICIgOiAiICsgcmVsYXRpb25zaGlwLnR5cGUpLnRoZW4oZnVuY3Rpb24ocGF5
        bG9hZCkgewogICAgcGF5bG9hZCA9IHNlcmlhbGl6ZXIuZXh0cmFjdChzdG9y
        ZSwgcmVsYXRpb25zaGlwLnR5cGUsIHBheWxvYWQsIG51bGwsICdmaW5kQmVs
        b25nc1RvJyk7CgogICAgdmFyIHJlY29yZCA9IHN0b3JlLnB1c2gocmVsYXRp
        b25zaGlwLnR5cGUsIHBheWxvYWQpOwogICAgcmVjb3JkLnVwZGF0ZUJlbG9u
        Z3NUbyhyZWxhdGlvbnNoaXAua2V5LCByZWNvcmQpOwogICAgcmV0dXJuIHJl
        Y29yZDsKICB9LCBudWxsLCAiRFM6IEV4dHJhY3QgcGF5bG9hZCBvZiAiICsg
        cmVjb3JkICsgIiA6ICIgKyByZWxhdGlvbnNoaXAudHlwZSk7Cn0KCmZ1bmN0
        aW9uIF9maW5kQWxsKGFkYXB0ZXIsIHN0b3JlLCB0eXBlLCBzaW5jZVRva2Vu
        KSB7CiAgdmFyIHByb21pc2UgPSBhZGFwdGVyLmZpbmRBbGwoc3RvcmUsIHR5
        cGUsIHNpbmNlVG9rZW4pLAogICAgICBzZXJpYWxpemVyID0gc2VyaWFsaXpl
        ckZvckFkYXB0ZXIoYWRhcHRlciwgdHlwZSk7CgogIHJldHVybiByZXNvbHZl
        KHByb21pc2UsICJEUzogSGFuZGxlIEFkYXB0ZXIjZmluZEFsbCBvZiAiICsg
        dHlwZSkudGhlbihmdW5jdGlvbihwYXlsb2FkKSB7CiAgICBwYXlsb2FkID0g
        c2VyaWFsaXplci5leHRyYWN0KHN0b3JlLCB0eXBlLCBwYXlsb2FkLCBudWxs
        LCAnZmluZEFsbCcpOwoKICAgIEVtYmVyLmFzc2VydCgiVGhlIHJlc3BvbnNl
        IGZyb20gYSBmaW5kQWxsIG11c3QgYmUgYW4gQXJyYXksIG5vdCAiICsgRW1i
        ZXIuaW5zcGVjdChwYXlsb2FkKSwgRW1iZXIudHlwZU9mKHBheWxvYWQpID09
        PSAnYXJyYXknKTsKCiAgICBzdG9yZS5wdXNoTWFueSh0eXBlLCBwYXlsb2Fk
        KTsKICAgIHN0b3JlLmRpZFVwZGF0ZUFsbCh0eXBlKTsKICAgIHJldHVybiBz
        dG9yZS5hbGwodHlwZSk7CiAgfSwgbnVsbCwgIkRTOiBFeHRyYWN0IHBheWxv
        YWQgb2YgZmluZEFsbCAiICsgdHlwZSk7Cn0KCmZ1bmN0aW9uIF9maW5kUXVl
        cnkoYWRhcHRlciwgc3RvcmUsIHR5cGUsIHF1ZXJ5LCByZWNvcmRBcnJheSkg
        ewogIHZhciBwcm9taXNlID0gYWRhcHRlci5maW5kUXVlcnkoc3RvcmUsIHR5
        cGUsIHF1ZXJ5LCByZWNvcmRBcnJheSksCiAgICAgIHNlcmlhbGl6ZXIgPSBz
        ZXJpYWxpemVyRm9yQWRhcHRlcihhZGFwdGVyLCB0eXBlKTsKCiAgcmV0dXJu
        IHJlc29sdmUocHJvbWlzZSwgIkRTOiBIYW5kbGUgQWRhcHRlciNmaW5kUXVl
        cnkgb2YgIiArIHR5cGUpLnRoZW4oZnVuY3Rpb24ocGF5bG9hZCkgewogICAg
        cGF5bG9hZCA9IHNlcmlhbGl6ZXIuZXh0cmFjdChzdG9yZSwgdHlwZSwgcGF5
        bG9hZCwgbnVsbCwgJ2ZpbmRRdWVyeScpOwoKICAgIEVtYmVyLmFzc2VydCgi
        VGhlIHJlc3BvbnNlIGZyb20gYSBmaW5kUXVlcnkgbXVzdCBiZSBhbiBBcnJh
        eSwgbm90ICIgKyBFbWJlci5pbnNwZWN0KHBheWxvYWQpLCBFbWJlci50eXBl
        T2YocGF5bG9hZCkgPT09ICdhcnJheScpOwoKICAgIHJlY29yZEFycmF5Lmxv
        YWQocGF5bG9hZCk7CiAgICByZXR1cm4gcmVjb3JkQXJyYXk7CiAgfSwgbnVs
        bCwgIkRTOiBFeHRyYWN0IHBheWxvYWQgb2YgZmluZFF1ZXJ5ICIgKyB0eXBl
        KTsKfQoKZnVuY3Rpb24gX2NvbW1pdChhZGFwdGVyLCBzdG9yZSwgb3BlcmF0
        aW9uLCByZWNvcmQpIHsKICB2YXIgdHlwZSA9IHJlY29yZC5jb25zdHJ1Y3Rv
        ciwKICAgICAgcHJvbWlzZSA9IGFkYXB0ZXJbb3BlcmF0aW9uXShzdG9yZSwg
        dHlwZSwgcmVjb3JkKSwKICAgICAgc2VyaWFsaXplciA9IHNlcmlhbGl6ZXJG
        b3JBZGFwdGVyKGFkYXB0ZXIsIHR5cGUpOwoKICBFbWJlci5hc3NlcnQoIllv
        dXIgYWRhcHRlcidzICciICsgb3BlcmF0aW9uICsgIicgbWV0aG9kIG11c3Qg
        cmV0dXJuIGEgcHJvbWlzZSwgYnV0IGl0IHJldHVybmVkICIgKyBwcm9taXNl
        LCBpc1RoZW5hYmxlKHByb21pc2UpKTsKCiAgcmV0dXJuIHByb21pc2UudGhl
        bihmdW5jdGlvbihwYXlsb2FkKSB7CiAgICBpZiAocGF5bG9hZCkgeyBwYXls
        b2FkID0gc2VyaWFsaXplci5leHRyYWN0KHN0b3JlLCB0eXBlLCBwYXlsb2Fk
        LCBnZXQocmVjb3JkLCAnaWQnKSwgb3BlcmF0aW9uKTsgfQogICAgc3RvcmUu
        ZGlkU2F2ZVJlY29yZChyZWNvcmQsIHBheWxvYWQpOwogICAgcmV0dXJuIHJl
        Y29yZDsKICB9LCBmdW5jdGlvbihyZWFzb24pIHsKICAgIGlmIChyZWFzb24g
        aW5zdGFuY2VvZiBEUy5JbnZhbGlkRXJyb3IpIHsKICAgICAgc3RvcmUucmVj
        b3JkV2FzSW52YWxpZChyZWNvcmQsIHJlYXNvbi5lcnJvcnMpOwogICAgfSBl
        bHNlIHsKICAgICAgc3RvcmUucmVjb3JkV2FzRXJyb3IocmVjb3JkLCByZWFz
        b24pOwogICAgfQoKICAgIHRocm93IHJlYXNvbjsKICB9LCAiRFM6IEV4dHJh
        Y3QgYW5kIG5vdGlmeSBhYm91dCAiICsgb3BlcmF0aW9uICsgIiBjb21wbGV0
        aW9uIG9mICIgKyByZWNvcmQpOwp9Cgp9KSgpOwoKCgooZnVuY3Rpb24oKSB7
        Ci8qKgogIEBtb2R1bGUgZW1iZXItZGF0YQoqLwoKdmFyIGdldCA9IEVtYmVy
        LmdldCwgc2V0ID0gRW1iZXIuc2V0OwovKgogIFRoaXMgZmlsZSBlbmNhcHN1
        bGF0ZXMgdGhlIHZhcmlvdXMgc3RhdGVzIHRoYXQgYSByZWNvcmQgY2FuIHRy
        YW5zaXRpb24KICB0aHJvdWdoIGR1cmluZyBpdHMgbGlmZWN5Y2xlLgoqLwov
        KioKICAjIyMgU3RhdGUKCiAgRWFjaCByZWNvcmQgaGFzIGEgYGN1cnJlbnRT
        dGF0ZWAgcHJvcGVydHkgdGhhdCBleHBsaWNpdGx5IHRyYWNrcyB3aGF0CiAg
        c3RhdGUgYSByZWNvcmQgaXMgaW4gYXQgYW55IGdpdmVuIHRpbWUuIEZvciBp
        bnN0YW5jZSwgaWYgYSByZWNvcmQgaXMKICBuZXdseSBjcmVhdGVkIGFuZCBo
        YXMgbm90IHlldCBiZWVuIHNlbnQgdG8gdGhlIGFkYXB0ZXIgdG8gYmUgc2F2
        ZWQsCiAgaXQgd291bGQgYmUgaW4gdGhlIGByb290LmxvYWRlZC5jcmVhdGVk
        LnVuY29tbWl0dGVkYCBzdGF0ZS4gIElmIGEKICByZWNvcmQgaGFzIGhhZCBs
        b2NhbCBtb2RpZmljYXRpb25zIG1hZGUgdG8gaXQgdGhhdCBhcmUgaW4gdGhl
        CiAgcHJvY2VzcyBvZiBiZWluZyBzYXZlZCwgdGhlIHJlY29yZCB3b3VsZCBi
        ZSBpbiB0aGUKICBgcm9vdC5sb2FkZWQudXBkYXRlZC5pbkZsaWdodGAgc3Rh
        dGUuIChUaGVzZSBzdGF0ZSBwYXRocyB3aWxsIGJlCiAgZXhwbGFpbmVkIGlu
        IG1vcmUgZGV0YWlsIGJlbG93LikKCiAgRXZlbnRzIGFyZSBzZW50IGJ5IHRo
        ZSByZWNvcmQgb3IgaXRzIHN0b3JlIHRvIHRoZSByZWNvcmQncwogIGBjdXJy
        ZW50U3RhdGVgIHByb3BlcnR5LiBIb3cgdGhlIHN0YXRlIHJlYWN0cyB0byB0
        aGVzZSBldmVudHMgaXMKICBkZXBlbmRlbnQgb24gd2hpY2ggc3RhdGUgaXQg
        aXMgaW4uIEluIHNvbWUgc3RhdGVzLCBjZXJ0YWluIGV2ZW50cwogIHdpbGwg
        YmUgaW52YWxpZCBhbmQgd2lsbCBjYXVzZSBhbiBleGNlcHRpb24gdG8gYmUg
        cmFpc2VkLgoKICBTdGF0ZXMgYXJlIGhpZXJhcmNoaWNhbCBhbmQgZXZlcnkg
        c3RhdGUgaXMgYSBzdWJzdGF0ZSBvZiB0aGUKICBgUm9vdFN0YXRlYC4gRm9y
        IGV4YW1wbGUsIGEgcmVjb3JkIGNhbiBiZSBpbiB0aGUKICBgcm9vdC5kZWxl
        dGVkLnVuY29tbWl0dGVkYCBzdGF0ZSwgdGhlbiB0cmFuc2l0aW9uIGludG8g
        dGhlCiAgYHJvb3QuZGVsZXRlZC5pbkZsaWdodGAgc3RhdGUuIElmIGEgY2hp
        bGQgc3RhdGUgZG9lcyBub3QgaW1wbGVtZW50CiAgYW4gZXZlbnQgaGFuZGxl
        ciwgdGhlIHN0YXRlIG1hbmFnZXIgd2lsbCBhdHRlbXB0IHRvIGludm9rZSB0
        aGUgZXZlbnQKICBvbiBhbGwgcGFyZW50IHN0YXRlcyB1bnRpbCB0aGUgcm9v
        dCBzdGF0ZSBpcyByZWFjaGVkLiBUaGUgc3RhdGUKICBoaWVyYXJjaHkgb2Yg
        YSByZWNvcmQgaXMgZGVzY3JpYmVkIGluIHRlcm1zIG9mIGEgcGF0aCBzdHJp
        bmcuIFlvdQogIGNhbiBkZXRlcm1pbmUgYSByZWNvcmQncyBjdXJyZW50IHN0
        YXRlIGJ5IGdldHRpbmcgdGhlIHN0YXRlJ3MKICBgc3RhdGVOYW1lYCBwcm9w
        ZXJ0eToKCiAgYGBgamF2YXNjcmlwdAogIHJlY29yZC5nZXQoJ2N1cnJlbnRT
        dGF0ZS5zdGF0ZU5hbWUnKTsKICAvLz0+ICJyb290LmNyZWF0ZWQudW5jb21t
        aXR0ZWQiCiAgIGBgYAoKICBUaGUgaGllcmFyY2h5IG9mIHZhbGlkIHN0YXRl
        cyB0aGF0IHNoaXAgd2l0aCBlbWJlciBkYXRhIGxvb2tzIGxpa2UKICB0aGlz
        OgoKICBgYGB0ZXh0CiAgKiByb290CiAgICAqIGRlbGV0ZWQKICAgICAgKiBz
        YXZlZAogICAgICAqIHVuY29tbWl0dGVkCiAgICAgICogaW5GbGlnaHQKICAg
        ICogZW1wdHkKICAgICogbG9hZGVkCiAgICAgICogY3JlYXRlZAogICAgICAg
        ICogdW5jb21taXR0ZWQKICAgICAgICAqIGluRmxpZ2h0CiAgICAgICogc2F2
        ZWQKICAgICAgKiB1cGRhdGVkCiAgICAgICAgKiB1bmNvbW1pdHRlZAogICAg
        ICAgICogaW5GbGlnaHQKICAgICogbG9hZGluZwogIGBgYAoKICBUaGUgYERT
        Lk1vZGVsYCBzdGF0ZXMgYXJlIHRoZW1zZWx2ZXMgc3RhdGVsZXNzLiBXaGF0
        IHdlIG1lYW4gaXMKICB0aGF0LCB0aGUgaGllcmFyY2hpY2FsIHN0YXRlcyB0
        aGF0IGVhY2ggb2YgKnRob3NlKiBwb2ludHMgdG8gaXMgYQogIHNoYXJlZCBk
        YXRhIHN0cnVjdHVyZS4gRm9yIHBlcmZvcm1hbmNlIHJlYXNvbnMsIGluc3Rl
        YWQgb2YgZWFjaAogIHJlY29yZCBnZXR0aW5nIGl0cyBvd24gY29weSBvZiB0
        aGUgaGllcmFyY2h5IG9mIHN0YXRlcywgZWFjaCByZWNvcmQKICBwb2ludHMg
        dG8gdGhpcyBnbG9iYWwsIGltbXV0YWJsZSBzaGFyZWQgaW5zdGFuY2UuIEhv
        dyBkb2VzIGEgc3RhdGUKICBrbm93IHdoaWNoIHJlY29yZCBpdCBzaG91bGQg
        YmUgYWN0aW5nIG9uPyBXZSBwYXNzIHRoZSByZWNvcmQKICBpbnN0YW5jZSBp
        bnRvIHRoZSBzdGF0ZSdzIGV2ZW50IGhhbmRsZXJzIGFzIHRoZSBmaXJzdCBh
        cmd1bWVudC4KCiAgVGhlIHJlY29yZCBwYXNzZWQgYXMgdGhlIGZpcnN0IHBh
        cmFtZXRlciBpcyB3aGVyZSB5b3Ugc2hvdWxkIHN0YXNoCiAgc3RhdGUgYWJv
        dXQgdGhlIHJlY29yZCBpZiBuZWVkZWQ7IHlvdSBzaG91bGQgbmV2ZXIgc3Rv
        cmUgZGF0YSBvbiB0aGUgc3RhdGUKICBvYmplY3QgaXRzZWxmLgoKICAjIyMg
        RXZlbnRzIGFuZCBGbGFncwoKICBBIHN0YXRlIG1heSBpbXBsZW1lbnQgemVy
        byBvciBtb3JlIGV2ZW50cyBhbmQgZmxhZ3MuCgogICMjIyMgRXZlbnRzCgog
        IEV2ZW50cyBhcmUgbmFtZWQgZnVuY3Rpb25zIHRoYXQgYXJlIGludm9rZWQg
        d2hlbiBzZW50IHRvIGEgcmVjb3JkLiBUaGUKICByZWNvcmQgd2lsbCBmaXJz
        dCBsb29rIGZvciBhIG1ldGhvZCB3aXRoIHRoZSBnaXZlbiBuYW1lIG9uIHRo
        ZQogIGN1cnJlbnQgc3RhdGUuIElmIG5vIG1ldGhvZCBpcyBmb3VuZCwgaXQg
        d2lsbCBzZWFyY2ggdGhlIGN1cnJlbnQKICBzdGF0ZSdzIHBhcmVudCwgYW5k
        IHRoZW4gaXRzIGdyYW5kcGFyZW50LCBhbmQgc28gb24gdW50aWwgcmVhY2hp
        bmcKICB0aGUgdG9wIG9mIHRoZSBoaWVyYXJjaHkuIElmIHRoZSByb290IGlz
        IHJlYWNoZWQgd2l0aG91dCBhbiBldmVudAogIGhhbmRsZXIgYmVpbmcgZm91
        bmQsIGFuIGV4Y2VwdGlvbiB3aWxsIGJlIHJhaXNlZC4gVGhpcyBjYW4gYmUg
        dmVyeQogIGhlbHBmdWwgd2hlbiBkZWJ1Z2dpbmcgbmV3IGZlYXR1cmVzLgoK
        ICBIZXJlJ3MgYW4gZXhhbXBsZSBpbXBsZW1lbnRhdGlvbiBvZiBhIHN0YXRl
        IHdpdGggYSBgbXlFdmVudGAgZXZlbnQgaGFuZGxlcjoKCiAgYGBgamF2YXNj
        cmlwdAogIGFTdGF0ZTogRFMuU3RhdGUuY3JlYXRlKHsKICAgIG15RXZlbnQ6
        IGZ1bmN0aW9uKG1hbmFnZXIsIHBhcmFtKSB7CiAgICAgIGNvbnNvbGUubG9n
        KCJSZWNlaXZlZCBteUV2ZW50IHdpdGgiLCBwYXJhbSk7CiAgICB9CiAgfSkK
        ICBgYGAKCiAgVG8gdHJpZ2dlciB0aGlzIGV2ZW50OgoKICBgYGBqYXZhc2Ny
        aXB0CiAgcmVjb3JkLnNlbmQoJ215RXZlbnQnLCAnZm9vJyk7CiAgLy89PiAi
        UmVjZWl2ZWQgbXlFdmVudCB3aXRoIGZvbyIKICBgYGAKCiAgTm90ZSB0aGF0
        IGFuIG9wdGlvbmFsIHBhcmFtZXRlciBjYW4gYmUgc2VudCB0byBhIHJlY29y
        ZCdzIGBzZW5kKClgIG1ldGhvZCwKICB3aGljaCB3aWxsIGJlIHBhc3NlZCBh
        cyB0aGUgc2Vjb25kIHBhcmFtZXRlciB0byB0aGUgZXZlbnQgaGFuZGxlci4K
        CiAgRXZlbnRzIHNob3VsZCB0cmFuc2l0aW9uIHRvIGEgZGlmZmVyZW50IHN0
        YXRlIGlmIGFwcHJvcHJpYXRlLiBUaGlzIGNhbiBiZQogIGRvbmUgYnkgY2Fs
        bGluZyB0aGUgcmVjb3JkJ3MgYHRyYW5zaXRpb25UbygpYCBtZXRob2Qgd2l0
        aCBhIHBhdGggdG8gdGhlCiAgZGVzaXJlZCBzdGF0ZS4gVGhlIHN0YXRlIG1h
        bmFnZXIgd2lsbCBhdHRlbXB0IHRvIHJlc29sdmUgdGhlIHN0YXRlIHBhdGgK
        ICByZWxhdGl2ZSB0byB0aGUgY3VycmVudCBzdGF0ZS4gSWYgbm8gc3RhdGUg
        aXMgZm91bmQgYXQgdGhhdCBwYXRoLCBpdCB3aWxsCiAgYXR0ZW1wdCB0byBy
        ZXNvbHZlIGl0IHJlbGF0aXZlIHRvIHRoZSBjdXJyZW50IHN0YXRlJ3MgcGFy
        ZW50LCBhbmQgdGhlbiBpdHMKICBwYXJlbnQsIGFuZCBzbyBvbiB1bnRpbCB0
        aGUgcm9vdCBpcyByZWFjaGVkLiBGb3IgZXhhbXBsZSwgaW1hZ2luZSBhIGhp
        ZXJhcmNoeQogIGxpa2UgdGhpczoKCiAgICAgICogY3JlYXRlZAogICAgICAg
        ICogdW5jb21taXR0ZWQgPC0tIGN1cnJlbnRTdGF0ZQogICAgICAgICogaW5G
        bGlnaHQKICAgICAgKiB1cGRhdGVkCiAgICAgICAgKiBpbkZsaWdodAoKICBJ
        ZiB3ZSBhcmUgY3VycmVudGx5IGluIHRoZSBgdW5jb21taXR0ZWRgIHN0YXRl
        LCBjYWxsaW5nCiAgYHRyYW5zaXRpb25UbygnaW5GbGlnaHQnKWAgd291bGQg
        dHJhbnNpdGlvbiB0byB0aGUgYGNyZWF0ZWQuaW5GbGlnaHRgIHN0YXRlLAog
        IHdoaWxlIGNhbGxpbmcgYHRyYW5zaXRpb25UbygndXBkYXRlZC5pbkZsaWdo
        dCcpYCB3b3VsZCB0cmFuc2l0aW9uIHRvCiAgdGhlIGB1cGRhdGVkLmluRmxp
        Z2h0YCBzdGF0ZS4KCiAgUmVtZW1iZXIgdGhhdCAqb25seSBldmVudHMqIHNo
        b3VsZCBldmVyIGNhdXNlIGEgc3RhdGUgdHJhbnNpdGlvbi4gWW91IHNob3Vs
        ZAogIG5ldmVyIGNhbGwgYHRyYW5zaXRpb25UbygpYCBmcm9tIG91dHNpZGUg
        YSBzdGF0ZSdzIGV2ZW50IGhhbmRsZXIuIElmIHlvdSBhcmUKICB0ZW1wdGVk
        IHRvIGRvIHNvLCBjcmVhdGUgYSBuZXcgZXZlbnQgYW5kIHNlbmQgdGhhdCB0
        byB0aGUgc3RhdGUgbWFuYWdlci4KCiAgIyMjIyBGbGFncwoKICBGbGFncyBh
        cmUgQm9vbGVhbiB2YWx1ZXMgdGhhdCBjYW4gYmUgdXNlZCB0byBpbnRyb3Nw
        ZWN0IGEgcmVjb3JkJ3MgY3VycmVudAogIHN0YXRlIGluIGEgbW9yZSB1c2Vy
        LWZyaWVuZGx5IHdheSB0aGFuIGV4YW1pbmluZyBpdHMgc3RhdGUgcGF0aC4g
        Rm9yIGV4YW1wbGUsCiAgaW5zdGVhZCBvZiBkb2luZyB0aGlzOgoKICBgYGBq
        YXZhc2NyaXB0CiAgdmFyIHN0YXRlUGF0aCA9IHJlY29yZC5nZXQoJ3N0YXRl
        TWFuYWdlci5jdXJyZW50UGF0aCcpOwogIGlmIChzdGF0ZVBhdGggPT09ICdj
        cmVhdGVkLmluRmxpZ2h0JykgewogICAgZG9Tb21ldGhpbmcoKTsKICB9CiAg
        YGBgCgogIFlvdSBjYW4gc2F5OgoKICBgYGBqYXZhc2NyaXB0CiAgaWYgKHJl
        Y29yZC5nZXQoJ2lzTmV3JykgJiYgcmVjb3JkLmdldCgnaXNTYXZpbmcnKSkg
        ewogICAgZG9Tb21ldGhpbmcoKTsKICB9CiAgYGBgCgogIElmIHlvdXIgc3Rh
        dGUgZG9lcyBub3Qgc2V0IGEgdmFsdWUgZm9yIGEgZ2l2ZW4gZmxhZywgdGhl
        IHZhbHVlIHdpbGwKICBiZSBpbmhlcml0ZWQgZnJvbSBpdHMgcGFyZW50IChv
        ciB0aGUgZmlyc3QgcGxhY2UgaW4gdGhlIHN0YXRlIGhpZXJhcmNoeQogIHdo
        ZXJlIGl0IGlzIGRlZmluZWQpLgoKICBUaGUgY3VycmVudCBzZXQgb2YgZmxh
        Z3MgYXJlIGRlZmluZWQgYmVsb3cuIElmIHlvdSB3YW50IHRvIGFkZCBhIG5l
        dyBmbGFnLAogIGluIGFkZGl0aW9uIHRvIHRoZSBhcmVhIGJlbG93LCB5b3Ug
        d2lsbCBhbHNvIG5lZWQgdG8gZGVjbGFyZSBpdCBpbiB0aGUKICBgRFMuTW9k
        ZWxgIGNsYXNzLgoKCiAgICogW2lzRW1wdHldKERTLk1vZGVsLmh0bWwjcHJv
        cGVydHlfaXNFbXB0eSkKICAgKiBbaXNMb2FkaW5nXShEUy5Nb2RlbC5odG1s
        I3Byb3BlcnR5X2lzTG9hZGluZykKICAgKiBbaXNMb2FkZWRdKERTLk1vZGVs
        Lmh0bWwjcHJvcGVydHlfaXNMb2FkZWQpCiAgICogW2lzRGlydHldKERTLk1v
        ZGVsLmh0bWwjcHJvcGVydHlfaXNEaXJ0eSkKICAgKiBbaXNTYXZpbmddKERT
        Lk1vZGVsLmh0bWwjcHJvcGVydHlfaXNTYXZpbmcpCiAgICogW2lzRGVsZXRl
        ZF0oRFMuTW9kZWwuaHRtbCNwcm9wZXJ0eV9pc0RlbGV0ZWQpCiAgICogW2lz
        TmV3XShEUy5Nb2RlbC5odG1sI3Byb3BlcnR5X2lzTmV3KQogICAqIFtpc1Zh
        bGlkXShEUy5Nb2RlbC5odG1sI3Byb3BlcnR5X2lzVmFsaWQpCgogIEBuYW1l
        c3BhY2UgRFMKICBAY2xhc3MgUm9vdFN0YXRlCiovCgp2YXIgaGFzRGVmaW5l
        ZFByb3BlcnRpZXMgPSBmdW5jdGlvbihvYmplY3QpIHsKICAvLyBJZ25vcmUg
        aW50ZXJuYWwgcHJvcGVydHkgZGVmaW5lZCBieSBzaW11bGF0ZWQgYEVtYmVy
        LmNyZWF0ZWAuCiAgdmFyIG5hbWVzID0gRW1iZXIua2V5cyhvYmplY3QpOwog
        IHZhciBpLCBsLCBuYW1lOwogIGZvciAoaSA9IDAsIGwgPSBuYW1lcy5sZW5n
        dGg7IGkgPCBsOyBpKysgKSB7CiAgICBuYW1lID0gbmFtZXNbaV07CiAgICBp
        ZiAob2JqZWN0Lmhhc093blByb3BlcnR5KG5hbWUpICYmIG9iamVjdFtuYW1l
        XSkgeyByZXR1cm4gdHJ1ZTsgfQogIH0KCiAgcmV0dXJuIGZhbHNlOwp9OwoK
        dmFyIGRpZFNldFByb3BlcnR5ID0gZnVuY3Rpb24ocmVjb3JkLCBjb250ZXh0
        KSB7CiAgaWYgKGNvbnRleHQudmFsdWUgPT09IGNvbnRleHQub3JpZ2luYWxW
        YWx1ZSkgewogICAgZGVsZXRlIHJlY29yZC5fYXR0cmlidXRlc1tjb250ZXh0
        Lm5hbWVdOwogICAgcmVjb3JkLnNlbmQoJ3Byb3BlcnR5V2FzUmVzZXQnLCBj
        b250ZXh0Lm5hbWUpOwogIH0gZWxzZSBpZiAoY29udGV4dC52YWx1ZSAhPT0g
        Y29udGV4dC5vbGRWYWx1ZSkgewogICAgcmVjb3JkLnNlbmQoJ2JlY29tZURp
        cnR5Jyk7CiAgfQoKICByZWNvcmQudXBkYXRlUmVjb3JkQXJyYXlzTGF0ZXIo
        KTsKfTsKCi8vIEltcGxlbWVudGF0aW9uIG5vdGVzOgovLwovLyBFYWNoIHN0
        YXRlIGhhcyBhIGJvb2xlYW4gdmFsdWUgZm9yIGFsbCBvZiB0aGUgZm9sbG93
        aW5nIGZsYWdzOgovLwovLyAqIGlzTG9hZGVkOiBUaGUgcmVjb3JkIGhhcyBh
        IHBvcHVsYXRlZCBgZGF0YWAgcHJvcGVydHkuIFdoZW4gYQovLyAgIHJlY29y
        ZCBpcyBsb2FkZWQgdmlhIGBzdG9yZS5maW5kYCwgYGlzTG9hZGVkYCBpcyBm
        YWxzZQovLyAgIHVudGlsIHRoZSBhZGFwdGVyIHNldHMgaXQuIFdoZW4gYSBy
        ZWNvcmQgaXMgY3JlYXRlZCBsb2NhbGx5LAovLyAgIGl0cyBgaXNMb2FkZWRg
        IHByb3BlcnR5IGlzIGFsd2F5cyB0cnVlLgovLyAqIGlzRGlydHk6IFRoZSBy
        ZWNvcmQgaGFzIGxvY2FsIGNoYW5nZXMgdGhhdCBoYXZlIG5vdCB5ZXQgYmVl
        bgovLyAgIHNhdmVkIGJ5IHRoZSBhZGFwdGVyLiBUaGlzIGluY2x1ZGVzIHJl
        Y29yZHMgdGhhdCBoYXZlIGJlZW4KLy8gICBjcmVhdGVkIChidXQgbm90IHll
        dCBzYXZlZCkgb3IgZGVsZXRlZC4KLy8gKiBpc1NhdmluZzogVGhlIHJlY29y
        ZCBoYXMgYmVlbiBjb21taXR0ZWQsIGJ1dAovLyAgIHRoZSBhZGFwdGVyIGhh
        cyBub3QgeWV0IGFja25vd2xlZGdlZCB0aGF0IHRoZSBjaGFuZ2VzIGhhdmUK
        Ly8gICBiZWVuIHBlcnNpc3RlZCB0byB0aGUgYmFja2VuZC4KLy8gKiBpc0Rl
        bGV0ZWQ6IFRoZSByZWNvcmQgd2FzIG1hcmtlZCBmb3IgZGVsZXRpb24uIFdo
        ZW4gYGlzRGVsZXRlZGAKLy8gICBpcyB0cnVlIGFuZCBgaXNEaXJ0eWAgaXMg
        dHJ1ZSwgdGhlIHJlY29yZCBpcyBkZWxldGVkIGxvY2FsbHkKLy8gICBidXQg
        dGhlIGRlbGV0aW9uIHdhcyBub3QgeWV0IHBlcnNpc3RlZC4gV2hlbiBgaXNT
        YXZpbmdgIGlzCi8vICAgdHJ1ZSwgdGhlIGNoYW5nZSBpcyBpbi1mbGlnaHQu
        IFdoZW4gYm90aCBgaXNEaXJ0eWAgYW5kCi8vICAgYGlzU2F2aW5nYCBhcmUg
        ZmFsc2UsIHRoZSBjaGFuZ2UgaGFzIHBlcnNpc3RlZC4KLy8gKiBpc0Vycm9y
        OiBUaGUgYWRhcHRlciByZXBvcnRlZCB0aGF0IGl0IHdhcyB1bmFibGUgdG8g
        c2F2ZQovLyAgIGxvY2FsIGNoYW5nZXMgdG8gdGhlIGJhY2tlbmQuIFRoaXMg
        bWF5IGFsc28gcmVzdWx0IGluIHRoZQovLyAgIHJlY29yZCBoYXZpbmcgaXRz
        IGBpc1ZhbGlkYCBwcm9wZXJ0eSBiZWNvbWUgZmFsc2UgaWYgdGhlCi8vICAg
        YWRhcHRlciByZXBvcnRlZCB0aGF0IHNlcnZlci1zaWRlIHZhbGlkYXRpb25z
        IGZhaWxlZC4KLy8gKiBpc05ldzogVGhlIHJlY29yZCB3YXMgY3JlYXRlZCBv
        biB0aGUgY2xpZW50IGFuZCB0aGUgYWRhcHRlcgovLyAgIGRpZCBub3QgeWV0
        IHJlcG9ydCB0aGF0IGl0IHdhcyBzdWNjZXNzZnVsbHkgc2F2ZWQuCi8vICog
        aXNWYWxpZDogTm8gY2xpZW50LXNpZGUgdmFsaWRhdGlvbnMgaGF2ZSBmYWls
        ZWQgYW5kIHRoZQovLyAgIGFkYXB0ZXIgZGlkIG5vdCByZXBvcnQgYW55IHNl
        cnZlci1zaWRlIHZhbGlkYXRpb24gZmFpbHVyZXMuCgovLyBUaGUgZGlydHkg
        c3RhdGUgaXMgYSBhYnN0cmFjdCBzdGF0ZSB3aG9zZSBmdW5jdGlvbmFsaXR5
        IGlzCi8vIHNoYXJlZCBiZXR3ZWVuIHRoZSBgY3JlYXRlZGAgYW5kIGB1cGRh
        dGVkYCBzdGF0ZXMuCi8vCi8vIFRoZSBkZWxldGVkIHN0YXRlIHNoYXJlcyB0
        aGUgYGlzRGlydHlgIGZsYWcgd2l0aCB0aGUKLy8gc3ViY2xhc3NlcyBvZiBg
        RGlydHlTdGF0ZWAsIGJ1dCB3aXRoIGEgdmVyeSBkaWZmZXJlbnQKLy8gaW1w
        bGVtZW50YXRpb24uCi8vCi8vIERpcnR5IHN0YXRlcyBoYXZlIHRocmVlIGNo
        aWxkIHN0YXRlczoKLy8KLy8gYHVuY29tbWl0dGVkYDogdGhlIHN0b3JlIGhh
        cyBub3QgeWV0IGhhbmRlZCBvZmYgdGhlIHJlY29yZAovLyAgIHRvIGJlIHNh
        dmVkLgovLyBgaW5GbGlnaHRgOiB0aGUgc3RvcmUgaGFzIGhhbmRlZCBvZmYg
        dGhlIHJlY29yZCB0byBiZSBzYXZlZCwKLy8gICBidXQgdGhlIGFkYXB0ZXIg
        aGFzIG5vdCB5ZXQgYWNrbm93bGVkZ2VkIHN1Y2Nlc3MuCi8vIGBpbnZhbGlk
        YDogdGhlIHJlY29yZCBoYXMgaW52YWxpZCBpbmZvcm1hdGlvbiBhbmQgY2Fu
        bm90IGJlCi8vICAgc2VuZCB0byB0aGUgYWRhcHRlciB5ZXQuCnZhciBEaXJ0
        eVN0YXRlID0gewogIGluaXRpYWxTdGF0ZTogJ3VuY29tbWl0dGVkJywKCiAg
        Ly8gRkxBR1MKICBpc0RpcnR5OiB0cnVlLAoKICAvLyBTVUJTVEFURVMKCiAg
        Ly8gV2hlbiBhIHJlY29yZCBmaXJzdCBiZWNvbWVzIGRpcnR5LCBpdCBpcyBg
        dW5jb21taXR0ZWRgLgogIC8vIFRoaXMgbWVhbnMgdGhhdCB0aGVyZSBhcmUg
        bG9jYWwgcGVuZGluZyBjaGFuZ2VzLCBidXQgdGhleQogIC8vIGhhdmUgbm90
        IHlldCBiZWd1biB0byBiZSBzYXZlZCwgYW5kIGFyZSBub3QgaW52YWxpZC4K
        ICB1bmNvbW1pdHRlZDogewogICAgLy8gRVZFTlRTCiAgICBkaWRTZXRQcm9w
        ZXJ0eTogZGlkU2V0UHJvcGVydHksCgogICAgcHJvcGVydHlXYXNSZXNldDog
        ZnVuY3Rpb24ocmVjb3JkLCBuYW1lKSB7CiAgICAgIHZhciBzdGlsbERpcnR5
        ID0gZmFsc2U7CgogICAgICBmb3IgKHZhciBwcm9wIGluIHJlY29yZC5fYXR0
        cmlidXRlcykgewogICAgICAgIHN0aWxsRGlydHkgPSB0cnVlOwogICAgICAg
        IGJyZWFrOwogICAgICB9CgogICAgICBpZiAoIXN0aWxsRGlydHkpIHsgcmVj
        b3JkLnNlbmQoJ3JvbGxlZEJhY2snKTsgfQogICAgfSwKCiAgICBwdXNoZWRE
        YXRhOiBFbWJlci5LLAoKICAgIGJlY29tZURpcnR5OiBFbWJlci5LLAoKICAg
        IHdpbGxDb21taXQ6IGZ1bmN0aW9uKHJlY29yZCkgewogICAgICByZWNvcmQu
        dHJhbnNpdGlvblRvKCdpbkZsaWdodCcpOwogICAgfSwKCiAgICByZWxvYWRS
        ZWNvcmQ6IGZ1bmN0aW9uKHJlY29yZCwgcmVzb2x2ZSkgewogICAgICByZXNv
        bHZlKGdldChyZWNvcmQsICdzdG9yZScpLnJlbG9hZFJlY29yZChyZWNvcmQp
        KTsKICAgIH0sCgogICAgcm9sbGVkQmFjazogZnVuY3Rpb24ocmVjb3JkKSB7
        CiAgICAgIHJlY29yZC50cmFuc2l0aW9uVG8oJ2xvYWRlZC5zYXZlZCcpOwog
        ICAgfSwKCiAgICBiZWNhbWVJbnZhbGlkOiBmdW5jdGlvbihyZWNvcmQpIHsK
        ICAgICAgcmVjb3JkLnRyYW5zaXRpb25UbygnaW52YWxpZCcpOwogICAgfSwK
        CiAgICByb2xsYmFjazogZnVuY3Rpb24ocmVjb3JkKSB7CiAgICAgIHJlY29y
        ZC5yb2xsYmFjaygpOwogICAgfQogIH0sCgogIC8vIE9uY2UgYSByZWNvcmQg
        aGFzIGJlZW4gaGFuZGVkIG9mZiB0byB0aGUgYWRhcHRlciB0byBiZQogIC8v
        IHNhdmVkLCBpdCBpcyBpbiB0aGUgJ2luIGZsaWdodCcgc3RhdGUuIENoYW5n
        ZXMgdG8gdGhlCiAgLy8gcmVjb3JkIGNhbm5vdCBiZSBtYWRlIGR1cmluZyB0
        aGlzIHdpbmRvdy4KICBpbkZsaWdodDogewogICAgLy8gRkxBR1MKICAgIGlz
        U2F2aW5nOiB0cnVlLAoKICAgIC8vIEVWRU5UUwogICAgZGlkU2V0UHJvcGVy
        dHk6IGRpZFNldFByb3BlcnR5LAogICAgYmVjb21lRGlydHk6IEVtYmVyLkss
        CiAgICBwdXNoZWREYXRhOiBFbWJlci5LLAoKICAgIC8vIFRPRE86IE1vcmUg
        cm9idXN0IHNlbWFudGljcyBhcm91bmQgc2F2ZS13aGlsZS1pbi1mbGlnaHQK
        ICAgIHdpbGxDb21taXQ6IEVtYmVyLkssCgogICAgZGlkQ29tbWl0OiBmdW5j
        dGlvbihyZWNvcmQpIHsKICAgICAgdmFyIGRpcnR5VHlwZSA9IGdldCh0aGlz
        LCAnZGlydHlUeXBlJyk7CgogICAgICByZWNvcmQudHJhbnNpdGlvblRvKCdz
        YXZlZCcpOwogICAgICByZWNvcmQuc2VuZCgnaW52b2tlTGlmZWN5Y2xlQ2Fs
        bGJhY2tzJywgZGlydHlUeXBlKTsKICAgIH0sCgogICAgYmVjYW1lSW52YWxp
        ZDogZnVuY3Rpb24ocmVjb3JkKSB7CiAgICAgIHJlY29yZC50cmFuc2l0aW9u
        VG8oJ2ludmFsaWQnKTsKICAgICAgcmVjb3JkLnNlbmQoJ2ludm9rZUxpZmVj
        eWNsZUNhbGxiYWNrcycpOwogICAgfSwKCiAgICBiZWNhbWVFcnJvcjogZnVu
        Y3Rpb24ocmVjb3JkKSB7CiAgICAgIHJlY29yZC50cmFuc2l0aW9uVG8oJ3Vu
        Y29tbWl0dGVkJyk7CiAgICAgIHJlY29yZC50cmlnZ2VyTGF0ZXIoJ2JlY2Ft
        ZUVycm9yJywgcmVjb3JkKTsKICAgIH0KICB9LAoKICAvLyBBIHJlY29yZCBp
        cyBpbiB0aGUgYGludmFsaWRgIHN0YXRlIHdoZW4gaXRzIGNsaWVudC1zaWRl
        CiAgLy8gaW52YWxpZGF0aW9ucyBoYXZlIGZhaWxlZCwgb3IgaWYgdGhlIGFk
        YXB0ZXIgaGFzIGluZGljYXRlZAogIC8vIHRoZSB0aGUgcmVjb3JkIGZhaWxl
        ZCBzZXJ2ZXItc2lkZSBpbnZhbGlkYXRpb25zLgogIGludmFsaWQ6IHsKICAg
        IC8vIEZMQUdTCiAgICBpc1ZhbGlkOiBmYWxzZSwKCiAgICAvLyBFVkVOVFMK
        ICAgIGRlbGV0ZVJlY29yZDogZnVuY3Rpb24ocmVjb3JkKSB7CiAgICAgIHJl
        Y29yZC50cmFuc2l0aW9uVG8oJ2RlbGV0ZWQudW5jb21taXR0ZWQnKTsKICAg
        ICAgcmVjb3JkLmNsZWFyUmVsYXRpb25zaGlwcygpOwogICAgfSwKCiAgICBk
        aWRTZXRQcm9wZXJ0eTogZnVuY3Rpb24ocmVjb3JkLCBjb250ZXh0KSB7CiAg
        ICAgIGdldChyZWNvcmQsICdlcnJvcnMnKS5yZW1vdmUoY29udGV4dC5uYW1l
        KTsKCiAgICAgIGRpZFNldFByb3BlcnR5KHJlY29yZCwgY29udGV4dCk7CiAg
        ICB9LAoKICAgIGJlY29tZURpcnR5OiBFbWJlci5LLAoKICAgIHJvbGxlZEJh
        Y2s6IGZ1bmN0aW9uKHJlY29yZCkgewogICAgICBnZXQocmVjb3JkLCAnZXJy
        b3JzJykuY2xlYXIoKTsKICAgIH0sCgogICAgYmVjYW1lVmFsaWQ6IGZ1bmN0
        aW9uKHJlY29yZCkgewogICAgICByZWNvcmQudHJhbnNpdGlvblRvKCd1bmNv
        bW1pdHRlZCcpOwogICAgfSwKCiAgICBpbnZva2VMaWZlY3ljbGVDYWxsYmFj
        a3M6IGZ1bmN0aW9uKHJlY29yZCkgewogICAgICByZWNvcmQudHJpZ2dlckxh
        dGVyKCdiZWNhbWVJbnZhbGlkJywgcmVjb3JkKTsKICAgIH0KICB9Cn07Cgov
        LyBUaGUgY3JlYXRlZCBhbmQgdXBkYXRlZCBzdGF0ZXMgYXJlIGNyZWF0ZWQg
        b3V0c2lkZSB0aGUgc3RhdGUKLy8gY2hhcnQgc28gd2UgY2FuIHJlb3BlbiB0
        aGVpciBzdWJzdGF0ZXMgYW5kIGFkZCBtaXhpbnMgYXMKLy8gbmVjZXNzYXJ5
        LgoKZnVuY3Rpb24gZGVlcENsb25lKG9iamVjdCkgewogIHZhciBjbG9uZSA9
        IHt9LCB2YWx1ZTsKCiAgZm9yICh2YXIgcHJvcCBpbiBvYmplY3QpIHsKICAg
        IHZhbHVlID0gb2JqZWN0W3Byb3BdOwogICAgaWYgKHZhbHVlICYmIHR5cGVv
        ZiB2YWx1ZSA9PT0gJ29iamVjdCcpIHsKICAgICAgY2xvbmVbcHJvcF0gPSBk
        ZWVwQ2xvbmUodmFsdWUpOwogICAgfSBlbHNlIHsKICAgICAgY2xvbmVbcHJv
        cF0gPSB2YWx1ZTsKICAgIH0KICB9CgogIHJldHVybiBjbG9uZTsKfQoKZnVu
        Y3Rpb24gbWl4aW4ob3JpZ2luYWwsIGhhc2gpIHsKICBmb3IgKHZhciBwcm9w
        IGluIGhhc2gpIHsKICAgIG9yaWdpbmFsW3Byb3BdID0gaGFzaFtwcm9wXTsK
        ICB9CgogIHJldHVybiBvcmlnaW5hbDsKfQoKZnVuY3Rpb24gZGlydHlTdGF0
        ZShvcHRpb25zKSB7CiAgdmFyIG5ld1N0YXRlID0gZGVlcENsb25lKERpcnR5
        U3RhdGUpOwogIHJldHVybiBtaXhpbihuZXdTdGF0ZSwgb3B0aW9ucyk7Cn0K
        CnZhciBjcmVhdGVkU3RhdGUgPSBkaXJ0eVN0YXRlKHsKICBkaXJ0eVR5cGU6
        ICdjcmVhdGVkJywKCiAgLy8gRkxBR1MKICBpc05ldzogdHJ1ZQp9KTsKCmNy
        ZWF0ZWRTdGF0ZS51bmNvbW1pdHRlZC5yb2xsZWRCYWNrID0gZnVuY3Rpb24o
        cmVjb3JkKSB7CiAgcmVjb3JkLnRyYW5zaXRpb25UbygnZGVsZXRlZC5zYXZl
        ZCcpOwp9OwoKdmFyIHVwZGF0ZWRTdGF0ZSA9IGRpcnR5U3RhdGUoewogIGRp
        cnR5VHlwZTogJ3VwZGF0ZWQnCn0pOwoKY3JlYXRlZFN0YXRlLnVuY29tbWl0
        dGVkLmRlbGV0ZVJlY29yZCA9IGZ1bmN0aW9uKHJlY29yZCkgewogIHJlY29y
        ZC5jbGVhclJlbGF0aW9uc2hpcHMoKTsKICByZWNvcmQudHJhbnNpdGlvblRv
        KCdkZWxldGVkLnNhdmVkJyk7Cn07CgpjcmVhdGVkU3RhdGUudW5jb21taXR0
        ZWQucm9sbGJhY2sgPSBmdW5jdGlvbihyZWNvcmQpIHsKICBEaXJ0eVN0YXRl
        LnVuY29tbWl0dGVkLnJvbGxiYWNrLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7
        CiAgcmVjb3JkLnRyYW5zaXRpb25UbygnZGVsZXRlZC5zYXZlZCcpOwp9OwoK
        Y3JlYXRlZFN0YXRlLnVuY29tbWl0dGVkLnByb3BlcnR5V2FzUmVzZXQgPSBF
        bWJlci5LOwoKdXBkYXRlZFN0YXRlLnVuY29tbWl0dGVkLmRlbGV0ZVJlY29y
        ZCA9IGZ1bmN0aW9uKHJlY29yZCkgewogIHJlY29yZC50cmFuc2l0aW9uVG8o
        J2RlbGV0ZWQudW5jb21taXR0ZWQnKTsKICByZWNvcmQuY2xlYXJSZWxhdGlv
        bnNoaXBzKCk7Cn07Cgp2YXIgUm9vdFN0YXRlID0gewogIC8vIEZMQUdTCiAg
        aXNFbXB0eTogZmFsc2UsCiAgaXNMb2FkaW5nOiBmYWxzZSwKICBpc0xvYWRl
        ZDogZmFsc2UsCiAgaXNEaXJ0eTogZmFsc2UsCiAgaXNTYXZpbmc6IGZhbHNl
        LAogIGlzRGVsZXRlZDogZmFsc2UsCiAgaXNOZXc6IGZhbHNlLAogIGlzVmFs
        aWQ6IHRydWUsCgogIC8vIERFRkFVTFQgRVZFTlRTCgogIC8vIFRyeWluZyB0
        byByb2xsIGJhY2sgaWYgeW91J3JlIG5vdCBpbiB0aGUgZGlydHkgc3RhdGUK
        ICAvLyBkb2Vzbid0IGNoYW5nZSB5b3VyIHN0YXRlLiBGb3IgZXhhbXBsZSwg
        aWYgeW91J3JlIGluIHRoZQogIC8vIGluLWZsaWdodCBzdGF0ZSwgcm9sbGlu
        ZyBiYWNrIHRoZSByZWNvcmQgZG9lc24ndCBtb3ZlCiAgLy8geW91IG91dCBv
        ZiB0aGUgaW4tZmxpZ2h0IHN0YXRlLgogIHJvbGxlZEJhY2s6IEVtYmVyLkss
        CgogIHByb3BlcnR5V2FzUmVzZXQ6IEVtYmVyLkssCgogIC8vIFNVQlNUQVRF
        UwoKICAvLyBBIHJlY29yZCBiZWdpbnMgaXRzIGxpZmVjeWNsZSBpbiB0aGUg
        YGVtcHR5YCBzdGF0ZS4KICAvLyBJZiBpdHMgZGF0YSB3aWxsIGNvbWUgZnJv
        bSB0aGUgYWRhcHRlciwgaXQgd2lsbAogIC8vIHRyYW5zaXRpb24gaW50byB0
        aGUgYGxvYWRpbmdgIHN0YXRlLiBPdGhlcndpc2UsIGlmCiAgLy8gdGhlIHJl
        Y29yZCBpcyBiZWluZyBjcmVhdGVkIG9uIHRoZSBjbGllbnQsIGl0IHdpbGwK
        ICAvLyB0cmFuc2l0aW9uIGludG8gdGhlIGBjcmVhdGVkYCBzdGF0ZS4KICBl
        bXB0eTogewogICAgaXNFbXB0eTogdHJ1ZSwKCiAgICAvLyBFVkVOVFMKICAg
        IGxvYWRpbmdEYXRhOiBmdW5jdGlvbihyZWNvcmQsIHByb21pc2UpIHsKICAg
        ICAgcmVjb3JkLl9sb2FkaW5nUHJvbWlzZSA9IHByb21pc2U7CiAgICAgIHJl
        Y29yZC50cmFuc2l0aW9uVG8oJ2xvYWRpbmcnKTsKICAgIH0sCgogICAgbG9h
        ZGVkRGF0YTogZnVuY3Rpb24ocmVjb3JkKSB7CiAgICAgIHJlY29yZC50cmFu
        c2l0aW9uVG8oJ2xvYWRlZC5jcmVhdGVkLnVuY29tbWl0dGVkJyk7CgogICAg
        ICByZWNvcmQuc3VzcGVuZFJlbGF0aW9uc2hpcE9ic2VydmVycyhmdW5jdGlv
        bigpIHsKICAgICAgICByZWNvcmQubm90aWZ5UHJvcGVydHlDaGFuZ2UoJ2Rh
        dGEnKTsKICAgICAgfSk7CiAgICB9LAoKICAgIHB1c2hlZERhdGE6IGZ1bmN0
        aW9uKHJlY29yZCkgewogICAgICByZWNvcmQudHJhbnNpdGlvblRvKCdsb2Fk
        ZWQuc2F2ZWQnKTsKICAgICAgcmVjb3JkLnRyaWdnZXJMYXRlcignZGlkTG9h
        ZCcpOwogICAgfQogIH0sCgogIC8vIEEgcmVjb3JkIGVudGVycyB0aGlzIHN0
        YXRlIHdoZW4gdGhlIHN0b3JlIGFza3MKICAvLyB0aGUgYWRhcHRlciBmb3Ig
        aXRzIGRhdGEuIEl0IHJlbWFpbnMgaW4gdGhpcyBzdGF0ZQogIC8vIHVudGls
        IHRoZSBhZGFwdGVyIHByb3ZpZGVzIHRoZSByZXF1ZXN0ZWQgZGF0YS4KICAv
        LwogIC8vIFVzdWFsbHksIHRoaXMgcHJvY2VzcyBpcyBhc3luY2hyb25vdXMs
        IHVzaW5nIGFuCiAgLy8gWEhSIHRvIHJldHJpZXZlIHRoZSBkYXRhLgogIGxv
        YWRpbmc6IHsKICAgIC8vIEZMQUdTCiAgICBpc0xvYWRpbmc6IHRydWUsCgog
        ICAgZXhpdDogZnVuY3Rpb24ocmVjb3JkKSB7CiAgICAgIHJlY29yZC5fbG9h
        ZGluZ1Byb21pc2UgPSBudWxsOwogICAgfSwKCiAgICAvLyBFVkVOVFMKICAg
        IHB1c2hlZERhdGE6IGZ1bmN0aW9uKHJlY29yZCkgewogICAgICByZWNvcmQu
        dHJhbnNpdGlvblRvKCdsb2FkZWQuc2F2ZWQnKTsKICAgICAgcmVjb3JkLnRy
        aWdnZXJMYXRlcignZGlkTG9hZCcpOwogICAgICBzZXQocmVjb3JkLCAnaXNF
        cnJvcicsIGZhbHNlKTsKICAgIH0sCgogICAgYmVjYW1lRXJyb3I6IGZ1bmN0
        aW9uKHJlY29yZCkgewogICAgICByZWNvcmQudHJpZ2dlckxhdGVyKCdiZWNh
        bWVFcnJvcicsIHJlY29yZCk7CiAgICB9LAoKICAgIG5vdEZvdW5kOiBmdW5j
        dGlvbihyZWNvcmQpIHsKICAgICAgcmVjb3JkLnRyYW5zaXRpb25UbygnZW1w
        dHknKTsKICAgIH0KICB9LAoKICAvLyBBIHJlY29yZCBlbnRlcnMgdGhpcyBz
        dGF0ZSB3aGVuIGl0cyBkYXRhIGlzIHBvcHVsYXRlZC4KICAvLyBNb3N0IG9m
        IGEgcmVjb3JkJ3MgbGlmZWN5Y2xlIGlzIHNwZW50IGluc2lkZSBzdWJzdGF0
        ZXMKICAvLyBvZiB0aGUgYGxvYWRlZGAgc3RhdGUuCiAgbG9hZGVkOiB7CiAg
        ICBpbml0aWFsU3RhdGU6ICdzYXZlZCcsCgogICAgLy8gRkxBR1MKICAgIGlz
        TG9hZGVkOiB0cnVlLAoKICAgIC8vIFNVQlNUQVRFUwoKICAgIC8vIElmIHRo
        ZXJlIGFyZSBubyBsb2NhbCBjaGFuZ2VzIHRvIGEgcmVjb3JkLCBpdCByZW1h
        aW5zCiAgICAvLyBpbiB0aGUgYHNhdmVkYCBzdGF0ZS4KICAgIHNhdmVkOiB7
        CiAgICAgIHNldHVwOiBmdW5jdGlvbihyZWNvcmQpIHsKICAgICAgICB2YXIg
        YXR0cnMgPSByZWNvcmQuX2F0dHJpYnV0ZXMsCiAgICAgICAgICAgIGlzRGly
        dHkgPSBmYWxzZTsKCiAgICAgICAgZm9yICh2YXIgcHJvcCBpbiBhdHRycykg
        ewogICAgICAgICAgaWYgKGF0dHJzLmhhc093blByb3BlcnR5KHByb3ApKSB7
        CiAgICAgICAgICAgIGlzRGlydHkgPSB0cnVlOwogICAgICAgICAgICBicmVh
        azsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGlmIChpc0RpcnR5
        KSB7CiAgICAgICAgICByZWNvcmQuYWRhcHRlckRpZERpcnR5KCk7CiAgICAg
        ICAgfQogICAgICB9LAoKICAgICAgLy8gRVZFTlRTCiAgICAgIGRpZFNldFBy
        b3BlcnR5OiBkaWRTZXRQcm9wZXJ0eSwKCiAgICAgIHB1c2hlZERhdGE6IEVt
        YmVyLkssCgogICAgICBiZWNvbWVEaXJ0eTogZnVuY3Rpb24ocmVjb3JkKSB7
        CiAgICAgICAgcmVjb3JkLnRyYW5zaXRpb25UbygndXBkYXRlZC51bmNvbW1p
        dHRlZCcpOwogICAgICB9LAoKICAgICAgd2lsbENvbW1pdDogZnVuY3Rpb24o
        cmVjb3JkKSB7CiAgICAgICAgcmVjb3JkLnRyYW5zaXRpb25UbygndXBkYXRl
        ZC5pbkZsaWdodCcpOwogICAgICB9LAoKICAgICAgcmVsb2FkUmVjb3JkOiBm
        dW5jdGlvbihyZWNvcmQsIHJlc29sdmUpIHsKICAgICAgICByZXNvbHZlKGdl
        dChyZWNvcmQsICdzdG9yZScpLnJlbG9hZFJlY29yZChyZWNvcmQpKTsKICAg
        ICAgfSwKCiAgICAgIGRlbGV0ZVJlY29yZDogZnVuY3Rpb24ocmVjb3JkKSB7
        CiAgICAgICAgcmVjb3JkLnRyYW5zaXRpb25UbygnZGVsZXRlZC51bmNvbW1p
        dHRlZCcpOwogICAgICAgIHJlY29yZC5jbGVhclJlbGF0aW9uc2hpcHMoKTsK
        ICAgICAgfSwKCiAgICAgIHVubG9hZFJlY29yZDogZnVuY3Rpb24ocmVjb3Jk
        KSB7CiAgICAgICAgLy8gY2xlYXIgcmVsYXRpb25zaGlwcyBiZWZvcmUgbW92
        aW5nIHRvIGRlbGV0ZWQgc3RhdGUKICAgICAgICAvLyBvdGhlcndpc2UgaXQg
        ZmFpbHMKICAgICAgICByZWNvcmQuY2xlYXJSZWxhdGlvbnNoaXBzKCk7CiAg
        ICAgICAgcmVjb3JkLnRyYW5zaXRpb25UbygnZGVsZXRlZC5zYXZlZCcpOwog
        ICAgICB9LAoKICAgICAgZGlkQ29tbWl0OiBmdW5jdGlvbihyZWNvcmQpIHsK
        ICAgICAgICByZWNvcmQuc2VuZCgnaW52b2tlTGlmZWN5Y2xlQ2FsbGJhY2tz
        JywgZ2V0KHJlY29yZCwgJ2xhc3REaXJ0eVR5cGUnKSk7CiAgICAgIH0sCgog
        ICAgICAvLyBsb2FkZWQuc2F2ZWQubm90Rm91bmQgd291bGQgYmUgdHJpZ2dl
        cmVkIGJ5IGEgZmFpbGVkCiAgICAgIC8vIGByZWxvYWQoKWAgb24gYW4gdW5j
        aGFuZ2VkIHJlY29yZAogICAgICBub3RGb3VuZDogRW1iZXIuSwoKICAgIH0s
        CgogICAgLy8gQSByZWNvcmQgaXMgaW4gdGhpcyBzdGF0ZSBhZnRlciBpdCBo
        YXMgYmVlbiBsb2NhbGx5CiAgICAvLyBjcmVhdGVkIGJ1dCBiZWZvcmUgdGhl
        IGFkYXB0ZXIgaGFzIGluZGljYXRlZCB0aGF0CiAgICAvLyBpdCBoYXMgYmVl
        biBzYXZlZC4KICAgIGNyZWF0ZWQ6IGNyZWF0ZWRTdGF0ZSwKCiAgICAvLyBB
        IHJlY29yZCBpcyBpbiB0aGlzIHN0YXRlIGlmIGl0IGhhcyBhbHJlYWR5IGJl
        ZW4KICAgIC8vIHNhdmVkIHRvIHRoZSBzZXJ2ZXIsIGJ1dCB0aGVyZSBhcmUg
        bmV3IGxvY2FsIGNoYW5nZXMKICAgIC8vIHRoYXQgaGF2ZSBub3QgeWV0IGJl
        ZW4gc2F2ZWQuCiAgICB1cGRhdGVkOiB1cGRhdGVkU3RhdGUKICB9LAoKICAv
        LyBBIHJlY29yZCBpcyBpbiB0aGlzIHN0YXRlIGlmIGl0IHdhcyBkZWxldGVk
        IGZyb20gdGhlIHN0b3JlLgogIGRlbGV0ZWQ6IHsKICAgIGluaXRpYWxTdGF0
        ZTogJ3VuY29tbWl0dGVkJywKICAgIGRpcnR5VHlwZTogJ2RlbGV0ZWQnLAoK
        ICAgIC8vIEZMQUdTCiAgICBpc0RlbGV0ZWQ6IHRydWUsCiAgICBpc0xvYWRl
        ZDogdHJ1ZSwKICAgIGlzRGlydHk6IHRydWUsCgogICAgLy8gVFJBTlNJVElP
        TlMKICAgIHNldHVwOiBmdW5jdGlvbihyZWNvcmQpIHsKICAgICAgcmVjb3Jk
        LnVwZGF0ZVJlY29yZEFycmF5cygpOwogICAgfSwKCiAgICAvLyBTVUJTVEFU
        RVMKCiAgICAvLyBXaGVuIGEgcmVjb3JkIGlzIGRlbGV0ZWQsIGl0IGVudGVy
        cyB0aGUgYHN0YXJ0YAogICAgLy8gc3RhdGUuIEl0IHdpbGwgZXhpdCB0aGlz
        IHN0YXRlIHdoZW4gdGhlIHJlY29yZAogICAgLy8gc3RhcnRzIHRvIGNvbW1p
        dC4KICAgIHVuY29tbWl0dGVkOiB7CgogICAgICAvLyBFVkVOVFMKCiAgICAg
        IHdpbGxDb21taXQ6IGZ1bmN0aW9uKHJlY29yZCkgewogICAgICAgIHJlY29y
        ZC50cmFuc2l0aW9uVG8oJ2luRmxpZ2h0Jyk7CiAgICAgIH0sCgogICAgICBy
        b2xsYmFjazogZnVuY3Rpb24ocmVjb3JkKSB7CiAgICAgICAgcmVjb3JkLnJv
        bGxiYWNrKCk7CiAgICAgIH0sCgogICAgICBiZWNvbWVEaXJ0eTogRW1iZXIu
        SywKICAgICAgZGVsZXRlUmVjb3JkOiBFbWJlci5LLAoKICAgICAgcm9sbGVk
        QmFjazogZnVuY3Rpb24ocmVjb3JkKSB7CiAgICAgICAgcmVjb3JkLnRyYW5z
        aXRpb25UbygnbG9hZGVkLnNhdmVkJyk7CiAgICAgIH0KICAgIH0sCgogICAg
        Ly8gQWZ0ZXIgYSByZWNvcmQgc3RhcnRzIGNvbW1pdHRpbmcsIGJ1dAogICAg
        Ly8gYmVmb3JlIHRoZSBhZGFwdGVyIGluZGljYXRlcyB0aGF0IHRoZSBkZWxl
        dGlvbgogICAgLy8gaGFzIHNhdmVkIHRvIHRoZSBzZXJ2ZXIsIGEgcmVjb3Jk
        IGlzIGluIHRoZQogICAgLy8gYGluRmxpZ2h0YCBzdWJzdGF0ZSBvZiBgZGVs
        ZXRlZGAuCiAgICBpbkZsaWdodDogewogICAgICAvLyBGTEFHUwogICAgICBp
        c1NhdmluZzogdHJ1ZSwKCiAgICAgIC8vIEVWRU5UUwoKICAgICAgLy8gVE9E
        TzogTW9yZSByb2J1c3Qgc2VtYW50aWNzIGFyb3VuZCBzYXZlLXdoaWxlLWlu
        LWZsaWdodAogICAgICB3aWxsQ29tbWl0OiBFbWJlci5LLAogICAgICBkaWRD
        b21taXQ6IGZ1bmN0aW9uKHJlY29yZCkgewogICAgICAgIHJlY29yZC50cmFu
        c2l0aW9uVG8oJ3NhdmVkJyk7CgogICAgICAgIHJlY29yZC5zZW5kKCdpbnZv
        a2VMaWZlY3ljbGVDYWxsYmFja3MnKTsKICAgICAgfSwKCiAgICAgIGJlY2Ft
        ZUVycm9yOiBmdW5jdGlvbihyZWNvcmQpIHsKICAgICAgICByZWNvcmQudHJh
        bnNpdGlvblRvKCd1bmNvbW1pdHRlZCcpOwogICAgICAgIHJlY29yZC50cmln
        Z2VyTGF0ZXIoJ2JlY2FtZUVycm9yJywgcmVjb3JkKTsKICAgICAgfQogICAg
        fSwKCiAgICAvLyBPbmNlIHRoZSBhZGFwdGVyIGluZGljYXRlcyB0aGF0IHRo
        ZSBkZWxldGlvbiBoYXMKICAgIC8vIGJlZW4gc2F2ZWQsIHRoZSByZWNvcmQg
        ZW50ZXJzIHRoZSBgc2F2ZWRgIHN1YnN0YXRlCiAgICAvLyBvZiBgZGVsZXRl
        ZGAuCiAgICBzYXZlZDogewogICAgICAvLyBGTEFHUwogICAgICBpc0RpcnR5
        OiBmYWxzZSwKCiAgICAgIHNldHVwOiBmdW5jdGlvbihyZWNvcmQpIHsKICAg
        ICAgICB2YXIgc3RvcmUgPSBnZXQocmVjb3JkLCAnc3RvcmUnKTsKICAgICAg
        ICBzdG9yZS5kZW1hdGVyaWFsaXplUmVjb3JkKHJlY29yZCk7CiAgICAgIH0s
        CgogICAgICBpbnZva2VMaWZlY3ljbGVDYWxsYmFja3M6IGZ1bmN0aW9uKHJl
        Y29yZCkgewogICAgICAgIHJlY29yZC50cmlnZ2VyTGF0ZXIoJ2RpZERlbGV0
        ZScsIHJlY29yZCk7CiAgICAgICAgcmVjb3JkLnRyaWdnZXJMYXRlcignZGlk
        Q29tbWl0JywgcmVjb3JkKTsKICAgICAgfQogICAgfQogIH0sCgogIGludm9r
        ZUxpZmVjeWNsZUNhbGxiYWNrczogZnVuY3Rpb24ocmVjb3JkLCBkaXJ0eVR5
        cGUpIHsKICAgIGlmIChkaXJ0eVR5cGUgPT09ICdjcmVhdGVkJykgewogICAg
        ICByZWNvcmQudHJpZ2dlckxhdGVyKCdkaWRDcmVhdGUnLCByZWNvcmQpOwog
        ICAgfSBlbHNlIHsKICAgICAgcmVjb3JkLnRyaWdnZXJMYXRlcignZGlkVXBk
        YXRlJywgcmVjb3JkKTsKICAgIH0KCiAgICByZWNvcmQudHJpZ2dlckxhdGVy
        KCdkaWRDb21taXQnLCByZWNvcmQpOwogIH0KfTsKCmZ1bmN0aW9uIHdpcmVT
        dGF0ZShvYmplY3QsIHBhcmVudCwgbmFtZSkgewogIC8qanNoaW50IHByb3Rv
        OnRydWUqLwogIC8vIFRPRE86IFVzZSBPYmplY3QuY3JlYXRlIGFuZCBjb3B5
        IGluc3RlYWQKICBvYmplY3QgPSBtaXhpbihwYXJlbnQgPyBFbWJlci5jcmVh
        dGUocGFyZW50KSA6IHt9LCBvYmplY3QpOwogIG9iamVjdC5wYXJlbnRTdGF0
        ZSA9IHBhcmVudDsKICBvYmplY3Quc3RhdGVOYW1lID0gbmFtZTsKCiAgZm9y
        ICh2YXIgcHJvcCBpbiBvYmplY3QpIHsKICAgIGlmICghb2JqZWN0Lmhhc093
        blByb3BlcnR5KHByb3ApIHx8IHByb3AgPT09ICdwYXJlbnRTdGF0ZScgfHwg
        cHJvcCA9PT0gJ3N0YXRlTmFtZScpIHsgY29udGludWU7IH0KICAgIGlmICh0
        eXBlb2Ygb2JqZWN0W3Byb3BdID09PSAnb2JqZWN0JykgewogICAgICBvYmpl
        Y3RbcHJvcF0gPSB3aXJlU3RhdGUob2JqZWN0W3Byb3BdLCBvYmplY3QsIG5h
        bWUgKyAiLiIgKyBwcm9wKTsKICAgIH0KICB9CgogIHJldHVybiBvYmplY3Q7
        Cn0KClJvb3RTdGF0ZSA9IHdpcmVTdGF0ZShSb290U3RhdGUsIG51bGwsICJy
        b290Iik7CgpEUy5Sb290U3RhdGUgPSBSb290U3RhdGU7Cgp9KSgpOwoKCgoo
        ZnVuY3Rpb24oKSB7CnZhciBnZXQgPSBFbWJlci5nZXQsIGlzRW1wdHkgPSBF
        bWJlci5pc0VtcHR5OwoKLyoqCkBtb2R1bGUgZW1iZXItZGF0YQoqLwoKLyoq
        CiAgSG9sZHMgdmFsaWRhdGlvbiBlcnJvcnMgZm9yIGEgZ2l2ZW4gcmVjb3Jk
        IG9yZ2FuaXplZCBieSBhdHRyaWJ1dGUgbmFtZXMuCgogIEBjbGFzcyBFcnJv
        cnMKICBAbmFtZXNwYWNlIERTCiAgQGV4dGVuZHMgRW1iZXIuT2JqZWN0CiAg
        QHVzZXMgRW1iZXIuRW51bWVyYWJsZQogIEB1c2VzIEVtYmVyLkV2ZW50ZWQK
        ICovCkRTLkVycm9ycyA9IEVtYmVyLk9iamVjdC5leHRlbmQoRW1iZXIuRW51
        bWVyYWJsZSwgRW1iZXIuRXZlbnRlZCwgewogIC8qKgogICAgUmVnaXN0ZXIg
        d2l0aCB0YXJnZXQgaGFuZGxlcgoKICAgIEBtZXRob2QgcmVnaXN0ZXJIYW5k
        bGVycwogICAgQHBhcmFtIHtPYmplY3R9IHRhcmdldAogICAgQHBhcmFtIHtG
        dW5jdGlvbn0gYmVjYW1lSW52YWxpZAogICAgQHBhcmFtIHtGdW5jdGlvbn0g
        YmVjYW1lVmFsaWQKICAqLwogIHJlZ2lzdGVySGFuZGxlcnM6IGZ1bmN0aW9u
        KHRhcmdldCwgYmVjYW1lSW52YWxpZCwgYmVjYW1lVmFsaWQpIHsKICAgIHRo
        aXMub24oJ2JlY2FtZUludmFsaWQnLCB0YXJnZXQsIGJlY2FtZUludmFsaWQp
        OwogICAgdGhpcy5vbignYmVjYW1lVmFsaWQnLCB0YXJnZXQsIGJlY2FtZVZh
        bGlkKTsKICB9LAoKICAvKioKICAgIEBwcm9wZXJ0eSBlcnJvcnNCeUF0dHJp
        YnV0ZU5hbWUKICAgIEB0eXBlIHtFbWJlci5NYXBXaXRoRGVmYXVsdH0KICAg
        IEBwcml2YXRlCiAgKi8KICBlcnJvcnNCeUF0dHJpYnV0ZU5hbWU6IEVtYmVy
        LnJlZHVjZUNvbXB1dGVkKCJjb250ZW50IiwgewogICAgaW5pdGlhbFZhbHVl
        OiBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIEVtYmVyLk1hcFdpdGhEZWZh
        dWx0LmNyZWF0ZSh7CiAgICAgICAgZGVmYXVsdFZhbHVlOiBmdW5jdGlvbigp
        IHsKICAgICAgICAgIHJldHVybiBFbWJlci5BKCk7CiAgICAgICAgfQogICAg
        ICB9KTsKICAgIH0sCgogICAgYWRkZWRJdGVtOiBmdW5jdGlvbihlcnJvcnMs
        IGVycm9yKSB7CiAgICAgIGVycm9ycy5nZXQoZXJyb3IuYXR0cmlidXRlKS5w
        dXNoT2JqZWN0KGVycm9yKTsKCiAgICAgIHJldHVybiBlcnJvcnM7CiAgICB9
        LAoKICAgIHJlbW92ZWRJdGVtOiBmdW5jdGlvbihlcnJvcnMsIGVycm9yKSB7
        CiAgICAgIGVycm9ycy5nZXQoZXJyb3IuYXR0cmlidXRlKS5yZW1vdmVPYmpl
        Y3QoZXJyb3IpOwoKICAgICAgcmV0dXJuIGVycm9yczsKICAgIH0KICB9KSwK
        CiAgLyoqCiAgICBSZXR1cm5zIGVycm9ycyBmb3IgYSBnaXZlbiBhdHRyaWJ1
        dGUKCiAgICBAbWV0aG9kIGVycm9yc0ZvcgogICAgQHBhcmFtIHtTdHJpbmd9
        IGF0dHJpYnV0ZQogICAgQHJldHVybnMge0FycmF5fQogICovCiAgZXJyb3Jz
        Rm9yOiBmdW5jdGlvbihhdHRyaWJ1dGUpIHsKICAgIHJldHVybiBnZXQodGhp
        cywgJ2Vycm9yc0J5QXR0cmlidXRlTmFtZScpLmdldChhdHRyaWJ1dGUpOwog
        IH0sCgogIC8qKgogICovCiAgbWVzc2FnZXM6IEVtYmVyLmNvbXB1dGVkLm1h
        cEJ5KCdjb250ZW50JywgJ21lc3NhZ2UnKSwKCiAgLyoqCiAgICBAcHJvcGVy
        dHkgY29udGVudAogICAgQHR5cGUge0FycmF5fQogICAgQHByaXZhdGUKICAq
        LwogIGNvbnRlbnQ6IEVtYmVyLmNvbXB1dGVkKGZ1bmN0aW9uKCkgewogICAg
        cmV0dXJuIEVtYmVyLkEoKTsKICB9KSwKCiAgLyoqCiAgICBAbWV0aG9kIHVu
        a25vd25Qcm9wZXJ0eQogICAgQHByaXZhdGUKICAqLwogIHVua25vd25Qcm9w
        ZXJ0eTogZnVuY3Rpb24oYXR0cmlidXRlKSB7CiAgICB2YXIgZXJyb3JzID0g
        dGhpcy5lcnJvcnNGb3IoYXR0cmlidXRlKTsKICAgIGlmIChpc0VtcHR5KGVy
        cm9ycykpIHsgcmV0dXJuIG51bGw7IH0KICAgIHJldHVybiBlcnJvcnM7CiAg
        fSwKCiAgLyoqCiAgICBAbWV0aG9kIG5leHRPYmplY3QKICAgIEBwcml2YXRl
        CiAgKi8KICBuZXh0T2JqZWN0OiBmdW5jdGlvbihpbmRleCwgcHJldmlvdXNP
        YmplY3QsIGNvbnRleHQpIHsKICAgIHJldHVybiBnZXQodGhpcywgJ2NvbnRl
        bnQnKS5vYmplY3RBdChpbmRleCk7CiAgfSwKCiAgLyoqCiAgICBUb3RhbCBu
        dW1iZXIgb2YgZXJyb3JzLgoKICAgIEBwcm9wZXJ0eSBsZW5ndGgKICAgIEB0
        eXBlIHtOdW1iZXJ9CiAgICBAcmVhZE9ubHkKICAqLwogIGxlbmd0aDogRW1i
        ZXIuY29tcHV0ZWQub25lV2F5KCdjb250ZW50Lmxlbmd0aCcpLnJlYWRPbmx5
        KCksCgogIC8qKgogICAgQHByb3BlcnR5IGlzRW1wdHkKICAgIEB0eXBlIHtC
        b29sZWFufQogICAgQHJlYWRPbmx5CiAgKi8KICBpc0VtcHR5OiBFbWJlci5j
        b21wdXRlZC5ub3QoJ2xlbmd0aCcpLnJlYWRPbmx5KCksCgogIC8qKgogICAg
        QWRkcyBlcnJvciBtZXNzYWdlcyB0byBhIGdpdmVuIGF0dHJpYnV0ZSBhbmQg
        c2VuZHMKICAgIGBiZWNhbWVJbnZhbGlkYCBldmVudCB0byB0aGUgcmVjb3Jk
        LgoKICAgIEBtZXRob2QgYWRkCiAgICBAcGFyYW0ge1N0cmluZ30gYXR0cmli
        dXRlCiAgICBAcGFyYW0ge0FycmF5fFN0cmluZ30gbWVzc2FnZXMKICAqLwog
        IGFkZDogZnVuY3Rpb24oYXR0cmlidXRlLCBtZXNzYWdlcykgewogICAgdmFy
        IHdhc0VtcHR5ID0gZ2V0KHRoaXMsICdpc0VtcHR5Jyk7CgogICAgbWVzc2Fn
        ZXMgPSB0aGlzLl9maW5kT3JDcmVhdGVNZXNzYWdlcyhhdHRyaWJ1dGUsIG1l
        c3NhZ2VzKTsKICAgIGdldCh0aGlzLCAnY29udGVudCcpLmFkZE9iamVjdHMo
        bWVzc2FnZXMpOwoKICAgIHRoaXMubm90aWZ5UHJvcGVydHlDaGFuZ2UoYXR0
        cmlidXRlKTsKICAgIHRoaXMuZW51bWVyYWJsZUNvbnRlbnREaWRDaGFuZ2Uo
        KTsKCiAgICBpZiAod2FzRW1wdHkgJiYgIWdldCh0aGlzLCAnaXNFbXB0eScp
        KSB7CiAgICAgIHRoaXMudHJpZ2dlcignYmVjYW1lSW52YWxpZCcpOwogICAg
        fQogIH0sCgogIC8qKgogICAgQG1ldGhvZCBfZmluZE9yQ3JlYXRlTWVzc2Fn
        ZXMKICAgIEBwcml2YXRlCiAgKi8KICBfZmluZE9yQ3JlYXRlTWVzc2FnZXM6
        IGZ1bmN0aW9uKGF0dHJpYnV0ZSwgbWVzc2FnZXMpIHsKICAgIHZhciBlcnJv
        cnMgPSB0aGlzLmVycm9yc0ZvcihhdHRyaWJ1dGUpOwoKICAgIHJldHVybiBF
        bWJlci5tYWtlQXJyYXkobWVzc2FnZXMpLm1hcChmdW5jdGlvbihtZXNzYWdl
        KSB7CiAgICAgIHJldHVybiBlcnJvcnMuZmluZEJ5KCdtZXNzYWdlJywgbWVz
        c2FnZSkgfHwgewogICAgICAgIGF0dHJpYnV0ZTogYXR0cmlidXRlLAogICAg
        ICAgIG1lc3NhZ2U6IG1lc3NhZ2UKICAgICAgfTsKICAgIH0pOwogIH0sCgog
        IC8qKgogICAgUmVtb3ZlcyBhbGwgZXJyb3IgbWVzc2FnZXMgZnJvbSB0aGUg
        Z2l2ZW4gYXR0cmlidXRlIGFuZCBzZW5kcwogICAgYGJlY2FtZVZhbGlkYCBl
        dmVudCB0byB0aGUgcmVjb3JkIGlmIHRoZXJlIG5vIG1vcmUgZXJyb3JzIGxl
        ZnQuCgogICAgQG1ldGhvZCByZW1vdmUKICAgIEBwYXJhbSB7U3RyaW5nfSBh
        dHRyaWJ1dGUKICAqLwogIHJlbW92ZTogZnVuY3Rpb24oYXR0cmlidXRlKSB7
        CiAgICBpZiAoZ2V0KHRoaXMsICdpc0VtcHR5JykpIHsgcmV0dXJuOyB9Cgog
        ICAgdmFyIGNvbnRlbnQgPSBnZXQodGhpcywgJ2NvbnRlbnQnKS5yZWplY3RC
        eSgnYXR0cmlidXRlJywgYXR0cmlidXRlKTsKICAgIGdldCh0aGlzLCAnY29u
        dGVudCcpLnNldE9iamVjdHMoY29udGVudCk7CgogICAgdGhpcy5ub3RpZnlQ
        cm9wZXJ0eUNoYW5nZShhdHRyaWJ1dGUpOwogICAgdGhpcy5lbnVtZXJhYmxl
        Q29udGVudERpZENoYW5nZSgpOwoKICAgIGlmIChnZXQodGhpcywgJ2lzRW1w
        dHknKSkgewogICAgICB0aGlzLnRyaWdnZXIoJ2JlY2FtZVZhbGlkJyk7CiAg
        ICB9CiAgfSwKCiAgLyoqCiAgICBSZW1vdmVzIGFsbCBlcnJvciBtZXNzYWdl
        cyBhbmQgc2VuZHMgYGJlY2FtZVZhbGlkYCBldmVudAogICAgdG8gdGhlIHJl
        Y29yZC4KCiAgICBAbWV0aG9kIGNsZWFyCiAgKi8KICBjbGVhcjogZnVuY3Rp
        b24oKSB7CiAgICBpZiAoZ2V0KHRoaXMsICdpc0VtcHR5JykpIHsgcmV0dXJu
        OyB9CgogICAgZ2V0KHRoaXMsICdjb250ZW50JykuY2xlYXIoKTsKICAgIHRo
        aXMuZW51bWVyYWJsZUNvbnRlbnREaWRDaGFuZ2UoKTsKCiAgICB0aGlzLnRy
        aWdnZXIoJ2JlY2FtZVZhbGlkJyk7CiAgfSwKCiAgLyoqCiAgICBDaGVja3Mg
        aWYgdGhlcmUgaXMgZXJyb3IgbWVzc2FnZXMgZm9yIHRoZSBnaXZlbiBhdHRy
        aWJ1dGUuCgogICAgQG1ldGhvZCBoYXMKICAgIEBwYXJhbSB7U3RyaW5nfSBh
        dHRyaWJ1dGUKICAgIEByZXR1cm5zIHtCb29sZWFufSB0cnVlIGlmIHRoZXJl
        IHNvbWUgZXJyb3JzIG9uIGdpdmVuIGF0dHJpYnV0ZQogICovCiAgaGFzOiBm
        dW5jdGlvbihhdHRyaWJ1dGUpIHsKICAgIHJldHVybiAhaXNFbXB0eSh0aGlz
        LmVycm9yc0ZvcihhdHRyaWJ1dGUpKTsKICB9Cn0pOwoKfSkoKTsKCgoKKGZ1
        bmN0aW9uKCkgewovKioKICBAbW9kdWxlIGVtYmVyLWRhdGEKKi8KCnZhciBn
        ZXQgPSBFbWJlci5nZXQsIHNldCA9IEVtYmVyLnNldCwKICAgIG1lcmdlID0g
        RW1iZXIubWVyZ2U7Cgp2YXIgcmV0cmlldmVGcm9tQ3VycmVudFN0YXRlID0g
        RW1iZXIuY29tcHV0ZWQoJ2N1cnJlbnRTdGF0ZScsIGZ1bmN0aW9uKGtleSwg
        dmFsdWUpIHsKICByZXR1cm4gZ2V0KGdldCh0aGlzLCAnY3VycmVudFN0YXRl
        JyksIGtleSk7Cn0pLnJlYWRPbmx5KCk7CgovKioKCiAgVGhlIG1vZGVsIGNs
        YXNzIHRoYXQgYWxsIEVtYmVyIERhdGEgcmVjb3JkcyBkZXNjZW5kIGZyb20u
        CgogIEBjbGFzcyBNb2RlbAogIEBuYW1lc3BhY2UgRFMKICBAZXh0ZW5kcyBF
        bWJlci5PYmplY3QKICBAdXNlcyBFbWJlci5FdmVudGVkCiovCkRTLk1vZGVs
        ID0gRW1iZXIuT2JqZWN0LmV4dGVuZChFbWJlci5FdmVudGVkLCB7CiAgLyoq
        CiAgICBJZiB0aGlzIHByb3BlcnR5IGlzIGB0cnVlYCB0aGUgcmVjb3JkIGlz
        IGluIHRoZSBgZW1wdHlgCiAgICBzdGF0ZS4gRW1wdHkgaXMgdGhlIGZpcnN0
        IHN0YXRlIGFsbCByZWNvcmRzIGVudGVyIGFmdGVyIHRoZXkgaGF2ZQogICAg
        YmVlbiBjcmVhdGVkLiBNb3N0IHJlY29yZHMgY3JlYXRlZCBieSB0aGUgc3Rv
        cmUgd2lsbCBxdWlja2x5CiAgICB0cmFuc2l0aW9uIHRvIHRoZSBgbG9hZGlu
        Z2Agc3RhdGUgaWYgZGF0YSBuZWVkcyB0byBiZSBmZXRjaGVkIGZyb20KICAg
        IHRoZSBzZXJ2ZXIgb3IgdGhlIGBjcmVhdGVkYCBzdGF0ZSBpZiB0aGUgcmVj
        b3JkIGlzIGNyZWF0ZWQgb24gdGhlCiAgICBjbGllbnQuIEEgcmVjb3JkIGNh
        biBhbHNvIGVudGVyIHRoZSBlbXB0eSBzdGF0ZSBpZiB0aGUgYWRhcHRlciBp
        cwogICAgdW5hYmxlIHRvIGxvY2F0ZSB0aGUgcmVjb3JkLgoKICAgIEBwcm9w
        ZXJ0eSBpc0VtcHR5CiAgICBAdHlwZSB7Qm9vbGVhbn0KICAgIEByZWFkT25s
        eQogICovCiAgaXNFbXB0eTogcmV0cmlldmVGcm9tQ3VycmVudFN0YXRlLAog
        IC8qKgogICAgSWYgdGhpcyBwcm9wZXJ0eSBpcyBgdHJ1ZWAgdGhlIHJlY29y
        ZCBpcyBpbiB0aGUgYGxvYWRpbmdgIHN0YXRlLiBBCiAgICByZWNvcmQgZW50
        ZXJzIHRoaXMgc3RhdGUgd2hlbiB0aGUgc3RvcmUgYXNrcyB0aGUgYWRhcHRl
        ciBmb3IgaXRzCiAgICBkYXRhLiBJdCByZW1haW5zIGluIHRoaXMgc3RhdGUg
        dW50aWwgdGhlIGFkYXB0ZXIgcHJvdmlkZXMgdGhlCiAgICByZXF1ZXN0ZWQg
        ZGF0YS4KCiAgICBAcHJvcGVydHkgaXNMb2FkaW5nCiAgICBAdHlwZSB7Qm9v
        bGVhbn0KICAgIEByZWFkT25seQogICovCiAgaXNMb2FkaW5nOiByZXRyaWV2
        ZUZyb21DdXJyZW50U3RhdGUsCiAgLyoqCiAgICBJZiB0aGlzIHByb3BlcnR5
        IGlzIGB0cnVlYCB0aGUgcmVjb3JkIGlzIGluIHRoZSBgbG9hZGVkYCBzdGF0
        ZS4gQQogICAgcmVjb3JkIGVudGVycyB0aGlzIHN0YXRlIHdoZW4gaXRzIGRh
        dGEgaXMgcG9wdWxhdGVkLiBNb3N0IG9mIGEKICAgIHJlY29yZCdzIGxpZmVj
        eWNsZSBpcyBzcGVudCBpbnNpZGUgc3Vic3RhdGVzIG9mIHRoZSBgbG9hZGVk
        YAogICAgc3RhdGUuCgogICAgRXhhbXBsZQoKICAgIGBgYGphdmFzY3JpcHQK
        ICAgIHZhciByZWNvcmQgPSBzdG9yZS5jcmVhdGVSZWNvcmQoQXBwLk1vZGVs
        KTsKICAgIHJlY29yZC5nZXQoJ2lzTG9hZGVkJyk7IC8vIHRydWUKCiAgICBz
        dG9yZS5maW5kKCdtb2RlbCcsIDEpLnRoZW4oZnVuY3Rpb24obW9kZWwpIHsK
        ICAgICAgbW9kZWwuZ2V0KCdpc0xvYWRlZCcpOyAvLyB0cnVlCiAgICB9KTsK
        ICAgIGBgYAoKICAgIEBwcm9wZXJ0eSBpc0xvYWRlZAogICAgQHR5cGUge0Jv
        b2xlYW59CiAgICBAcmVhZE9ubHkKICAqLwogIGlzTG9hZGVkOiByZXRyaWV2
        ZUZyb21DdXJyZW50U3RhdGUsCiAgLyoqCiAgICBJZiB0aGlzIHByb3BlcnR5
        IGlzIGB0cnVlYCB0aGUgcmVjb3JkIGlzIGluIHRoZSBgZGlydHlgIHN0YXRl
        LiBUaGUKICAgIHJlY29yZCBoYXMgbG9jYWwgY2hhbmdlcyB0aGF0IGhhdmUg
        bm90IHlldCBiZWVuIHNhdmVkIGJ5IHRoZQogICAgYWRhcHRlci4gVGhpcyBp
        bmNsdWRlcyByZWNvcmRzIHRoYXQgaGF2ZSBiZWVuIGNyZWF0ZWQgKGJ1dCBu
        b3QgeWV0CiAgICBzYXZlZCkgb3IgZGVsZXRlZC4KCiAgICBFeGFtcGxlCgog
        ICAgYGBgamF2YXNjcmlwdAogICAgdmFyIHJlY29yZCA9IHN0b3JlLmNyZWF0
        ZVJlY29yZChBcHAuTW9kZWwpOwogICAgcmVjb3JkLmdldCgnaXNEaXJ0eScp
        OyAvLyB0cnVlCgogICAgc3RvcmUuZmluZCgnbW9kZWwnLCAxKS50aGVuKGZ1
        bmN0aW9uKG1vZGVsKSB7CiAgICAgIG1vZGVsLmdldCgnaXNEaXJ0eScpOyAv
        LyBmYWxzZQogICAgICBtb2RlbC5zZXQoJ2ZvbycsICdzb21lIHZhbHVlJyk7
        CiAgICAgIG1vZGVsLnNldCgnaXNEaXJ0eScpOyAvLyB0cnVlCiAgICB9KTsK
        ICAgIGBgYAoKICAgIEBwcm9wZXJ0eSBpc0RpcnR5CiAgICBAdHlwZSB7Qm9v
        bGVhbn0KICAgIEByZWFkT25seQogICovCiAgaXNEaXJ0eTogcmV0cmlldmVG
        cm9tQ3VycmVudFN0YXRlLAogIC8qKgogICAgSWYgdGhpcyBwcm9wZXJ0eSBp
        cyBgdHJ1ZWAgdGhlIHJlY29yZCBpcyBpbiB0aGUgYHNhdmluZ2Agc3RhdGUu
        IEEKICAgIHJlY29yZCBlbnRlcnMgdGhlIHNhdmluZyBzdGF0ZSB3aGVuIGBz
        YXZlYCBpcyBjYWxsZWQsIGJ1dCB0aGUKICAgIGFkYXB0ZXIgaGFzIG5vdCB5
        ZXQgYWNrbm93bGVkZ2VkIHRoYXQgdGhlIGNoYW5nZXMgaGF2ZSBiZWVuCiAg
        ICBwZXJzaXN0ZWQgdG8gdGhlIGJhY2tlbmQuCgogICAgRXhhbXBsZQoKICAg
        IGBgYGphdmFzY3JpcHQKICAgIHZhciByZWNvcmQgPSBzdG9yZS5jcmVhdGVS
        ZWNvcmQoQXBwLk1vZGVsKTsKICAgIHJlY29yZC5nZXQoJ2lzU2F2aW5nJyk7
        IC8vIGZhbHNlCiAgICB2YXIgcHJvbWlzZSA9IHJlY29yZC5zYXZlKCk7CiAg
        ICByZWNvcmQuZ2V0KCdpc1NhdmluZycpOyAvLyB0cnVlCiAgICBwcm9taXNl
        LnRoZW4oZnVuY3Rpb24oKSB7CiAgICAgIHJlY29yZC5nZXQoJ2lzU2F2aW5n
        Jyk7IC8vIGZhbHNlCiAgICB9KTsKICAgIGBgYAoKICAgIEBwcm9wZXJ0eSBp
        c1NhdmluZwogICAgQHR5cGUge0Jvb2xlYW59CiAgICBAcmVhZE9ubHkKICAq
        LwogIGlzU2F2aW5nOiByZXRyaWV2ZUZyb21DdXJyZW50U3RhdGUsCiAgLyoq
        CiAgICBJZiB0aGlzIHByb3BlcnR5IGlzIGB0cnVlYCB0aGUgcmVjb3JkIGlz
        IGluIHRoZSBgZGVsZXRlZGAgc3RhdGUKICAgIGFuZCBoYXMgYmVlbiBtYXJr
        ZWQgZm9yIGRlbGV0aW9uLiBXaGVuIGBpc0RlbGV0ZWRgIGlzIHRydWUgYW5k
        CiAgICBgaXNEaXJ0eWAgaXMgdHJ1ZSwgdGhlIHJlY29yZCBpcyBkZWxldGVk
        IGxvY2FsbHkgYnV0IHRoZSBkZWxldGlvbgogICAgd2FzIG5vdCB5ZXQgcGVy
        c2lzdGVkLiBXaGVuIGBpc1NhdmluZ2AgaXMgdHJ1ZSwgdGhlIGNoYW5nZSBp
        cwogICAgaW4tZmxpZ2h0LiBXaGVuIGJvdGggYGlzRGlydHlgIGFuZCBgaXNT
        YXZpbmdgIGFyZSBmYWxzZSwgdGhlCiAgICBjaGFuZ2UgaGFzIHBlcnNpc3Rl
        ZC4KCiAgICBFeGFtcGxlCgogICAgYGBgamF2YXNjcmlwdAogICAgdmFyIHJl
        Y29yZCA9IHN0b3JlLmNyZWF0ZVJlY29yZChBcHAuTW9kZWwpOwogICAgcmVj
        b3JkLmdldCgnaXNEZWxldGVkJyk7IC8vIGZhbHNlCiAgICByZWNvcmQuZGVs
        ZXRlUmVjb3JkKCk7CiAgICByZWNvcmQuZ2V0KCdpc0RlbGV0ZWQnKTsgLy8g
        dHJ1ZQogICAgYGBgCgogICAgQHByb3BlcnR5IGlzRGVsZXRlZAogICAgQHR5
        cGUge0Jvb2xlYW59CiAgICBAcmVhZE9ubHkKICAqLwogIGlzRGVsZXRlZDog
        cmV0cmlldmVGcm9tQ3VycmVudFN0YXRlLAogIC8qKgogICAgSWYgdGhpcyBw
        cm9wZXJ0eSBpcyBgdHJ1ZWAgdGhlIHJlY29yZCBpcyBpbiB0aGUgYG5ld2Ag
        c3RhdGUuIEEKICAgIHJlY29yZCB3aWxsIGJlIGluIHRoZSBgbmV3YCBzdGF0
        ZSB3aGVuIGl0IGhhcyBiZWVuIGNyZWF0ZWQgb24gdGhlCiAgICBjbGllbnQg
        YW5kIHRoZSBhZGFwdGVyIGhhcyBub3QgeWV0IHJlcG9ydCB0aGF0IGl0IHdh
        cyBzdWNjZXNzZnVsbHkKICAgIHNhdmVkLgoKICAgIEV4YW1wbGUKCiAgICBg
        YGBqYXZhc2NyaXB0CiAgICB2YXIgcmVjb3JkID0gc3RvcmUuY3JlYXRlUmVj
        b3JkKEFwcC5Nb2RlbCk7CiAgICByZWNvcmQuZ2V0KCdpc05ldycpOyAvLyB0
        cnVlCgogICAgcmVjb3JkLnNhdmUoKS50aGVuKGZ1bmN0aW9uKG1vZGVsKSB7
        CiAgICAgIG1vZGVsLmdldCgnaXNOZXcnKTsgLy8gZmFsc2UKICAgIH0pOwog
        ICAgYGBgCgogICAgQHByb3BlcnR5IGlzTmV3CiAgICBAdHlwZSB7Qm9vbGVh
        bn0KICAgIEByZWFkT25seQogICovCiAgaXNOZXc6IHJldHJpZXZlRnJvbUN1
        cnJlbnRTdGF0ZSwKICAvKioKICAgIElmIHRoaXMgcHJvcGVydHkgaXMgYHRy
        dWVgIHRoZSByZWNvcmQgaXMgaW4gdGhlIGB2YWxpZGAgc3RhdGUuIEEKICAg
        IHJlY29yZCB3aWxsIGJlIGluIHRoZSBgdmFsaWRgIHN0YXRlIHdoZW4gbm8g
        Y2xpZW50LXNpZGUKICAgIHZhbGlkYXRpb25zIGhhdmUgZmFpbGVkIGFuZCB0
        aGUgYWRhcHRlciBkaWQgbm90IHJlcG9ydCBhbnkKICAgIHNlcnZlci1zaWRl
        IHZhbGlkYXRpb24gZmFpbHVyZXMuCgogICAgQHByb3BlcnR5IGlzVmFsaWQK
        ICAgIEB0eXBlIHtCb29sZWFufQogICAgQHJlYWRPbmx5CiAgKi8KICBpc1Zh
        bGlkOiByZXRyaWV2ZUZyb21DdXJyZW50U3RhdGUsCiAgLyoqCiAgICBJZiB0
        aGUgcmVjb3JkIGlzIGluIHRoZSBkaXJ0eSBzdGF0ZSB0aGlzIHByb3BlcnR5
        IHdpbGwgcmVwb3J0IHdoYXQKICAgIGtpbmQgb2YgY2hhbmdlIGhhcyBjYXVz
        ZWQgaXQgdG8gbW92ZSBpbnRvIHRoZSBkaXJ0eQogICAgc3RhdGUuIFBvc3Np
        YmxlIHZhbHVlcyBhcmU6CgogICAgLSBgY3JlYXRlZGAgVGhlIHJlY29yZCBo
        YXMgYmVlbiBjcmVhdGVkIGJ5IHRoZSBjbGllbnQgYW5kIG5vdCB5ZXQgc2F2
        ZWQgdG8gdGhlIGFkYXB0ZXIuCiAgICAtIGB1cGRhdGVkYCBUaGUgcmVjb3Jk
        IGhhcyBiZWVuIHVwZGF0ZWQgYnkgdGhlIGNsaWVudCBhbmQgbm90IHlldCBz
        YXZlZCB0byB0aGUgYWRhcHRlci4KICAgIC0gYGRlbGV0ZWRgIFRoZSByZWNv
        cmQgaGFzIGJlZW4gZGVsZXRlZCBieSB0aGUgY2xpZW50IGFuZCBub3QgeWV0
        IHNhdmVkIHRvIHRoZSBhZGFwdGVyLgoKICAgIEV4YW1wbGUKCiAgICBgYGBq
        YXZhc2NyaXB0CiAgICB2YXIgcmVjb3JkID0gc3RvcmUuY3JlYXRlUmVjb3Jk
        KEFwcC5Nb2RlbCk7CiAgICByZWNvcmQuZ2V0KCdkaXJ0eVR5cGUnKTsgLy8g
        J2NyZWF0ZWQnCiAgICBgYGAKCiAgICBAcHJvcGVydHkgZGlydHlUeXBlCiAg
        ICBAdHlwZSB7U3RyaW5nfQogICAgQHJlYWRPbmx5CiAgKi8KICBkaXJ0eVR5
        cGU6IHJldHJpZXZlRnJvbUN1cnJlbnRTdGF0ZSwKCiAgLyoqCiAgICBJZiBg
        dHJ1ZWAgdGhlIGFkYXB0ZXIgcmVwb3J0ZWQgdGhhdCBpdCB3YXMgdW5hYmxl
        IHRvIHNhdmUgbG9jYWwKICAgIGNoYW5nZXMgdG8gdGhlIGJhY2tlbmQuIFRo
        aXMgbWF5IGFsc28gcmVzdWx0IGluIHRoZSByZWNvcmQgaGF2aW5nCiAgICBp
        dHMgYGlzVmFsaWRgIHByb3BlcnR5IGJlY29tZSBmYWxzZSBpZiB0aGUgYWRh
        cHRlciByZXBvcnRlZCB0aGF0CiAgICBzZXJ2ZXItc2lkZSB2YWxpZGF0aW9u
        cyBmYWlsZWQuCgogICAgRXhhbXBsZQoKICAgIGBgYGphdmFzY3JpcHQKICAg
        IHJlY29yZC5nZXQoJ2lzRXJyb3InKTsgLy8gZmFsc2UKICAgIHJlY29yZC5z
        ZXQoJ2ZvbycsICdpbnZhbGlkIHZhbHVlJyk7CiAgICByZWNvcmQuc2F2ZSgp
        LnRoZW4obnVsbCwgZnVuY3Rpb24oKSB7CiAgICAgIHJlY29yZC5nZXQoJ2lz
        RXJyb3InKTsgLy8gdHJ1ZQogICAgfSk7CiAgICBgYGAKCiAgICBAcHJvcGVy
        dHkgaXNFcnJvcgogICAgQHR5cGUge0Jvb2xlYW59CiAgICBAcmVhZE9ubHkK
        ICAqLwogIGlzRXJyb3I6IGZhbHNlLAogIC8qKgogICAgSWYgYHRydWVgIHRo
        ZSBzdG9yZSBpcyBhdHRlbXB0aW5nIHRvIHJlbG9hZCB0aGUgcmVjb3JkIGZv
        cm0gdGhlIGFkYXB0ZXIuCgogICAgRXhhbXBsZQoKICAgIGBgYGphdmFzY3Jp
        cHQKICAgIHJlY29yZC5nZXQoJ2lzUmVsb2FkaW5nJyk7IC8vIGZhbHNlCiAg
        ICByZWNvcmQucmVsb2FkKCk7CiAgICByZWNvcmQuZ2V0KCdpc1JlbG9hZGlu
        ZycpOyAvLyB0cnVlCiAgICBgYGAKCiAgICBAcHJvcGVydHkgaXNSZWxvYWRp
        bmcKICAgIEB0eXBlIHtCb29sZWFufQogICAgQHJlYWRPbmx5CiAgKi8KICBp
        c1JlbG9hZGluZzogZmFsc2UsCgogIC8qKgogICAgVGhlIGBjbGllbnRJZGAg
        cHJvcGVydHkgaXMgYSB0cmFuc2llbnQgbnVtZXJpY2FsIGlkZW50aWZpZXIK
        ICAgIGdlbmVyYXRlZCBhdCBydW50aW1lIGJ5IHRoZSBkYXRhIHN0b3JlLiBJ
        dCBpcyBpbXBvcnRhbnQKICAgIHByaW1hcmlseSBiZWNhdXNlIG5ld2x5IGNy
        ZWF0ZWQgb2JqZWN0cyBtYXkgbm90IHlldCBoYXZlIGFuCiAgICBleHRlcm5h
        bGx5IGdlbmVyYXRlZCBpZC4KCiAgICBAcHJvcGVydHkgY2xpZW50SWQKICAg
        IEBwcml2YXRlCiAgICBAdHlwZSB7TnVtYmVyfFN0cmluZ30KICAqLwogIGNs
        aWVudElkOiBudWxsLAogIC8qKgogICAgQWxsIGVtYmVyIG1vZGVscyBoYXZl
        IGFuIGlkIHByb3BlcnR5LiBUaGlzIGlzIGFuIGlkZW50aWZpZXIKICAgIG1h
        bmFnZWQgYnkgYW4gZXh0ZXJuYWwgc291cmNlLiBUaGVzZSBhcmUgYWx3YXlz
        IGNvZXJjZWQgdG8gYmUKICAgIHN0cmluZ3MgYmVmb3JlIGJlaW5nIHVzZWQg
        aW50ZXJuYWxseS4gTm90ZSB3aGVuIGRlY2xhcmluZyB0aGUKICAgIGF0dHJp
        YnV0ZXMgZm9yIGEgbW9kZWwgaXQgaXMgYW4gZXJyb3IgdG8gZGVjbGFyZSBh
        biBpZAogICAgYXR0cmlidXRlLgoKICAgIGBgYGphdmFzY3JpcHQKICAgIHZh
        ciByZWNvcmQgPSBzdG9yZS5jcmVhdGVSZWNvcmQoQXBwLk1vZGVsKTsKICAg
        IHJlY29yZC5nZXQoJ2lkJyk7IC8vIG51bGwKCiAgICBzdG9yZS5maW5kKCdt
        b2RlbCcsIDEpLnRoZW4oZnVuY3Rpb24obW9kZWwpIHsKICAgICAgbW9kZWwu
        Z2V0KCdpZCcpOyAvLyAnMScKICAgIH0pOwogICAgYGBgCgogICAgQHByb3Bl
        cnR5IGlkCiAgICBAdHlwZSB7U3RyaW5nfQogICovCiAgaWQ6IG51bGwsCiAg
        dHJhbnNhY3Rpb246IG51bGwsCiAgLyoqCiAgICBAcHJvcGVydHkgY3VycmVu
        dFN0YXRlCiAgICBAcHJpdmF0ZQogICAgQHR5cGUge09iamVjdH0KICAqLwog
        IGN1cnJlbnRTdGF0ZTogbnVsbCwKICAvKioKICAgIFdoZW4gdGhlIHJlY29y
        ZCBpcyBpbiB0aGUgYGludmFsaWRgIHN0YXRlIHRoaXMgb2JqZWN0IHdpbGwg
        Y29udGFpbgogICAgYW55IGVycm9ycyByZXR1cm5lZCBieSB0aGUgYWRhcHRl
        ci4gV2hlbiBwcmVzZW50IHRoZSBlcnJvcnMgaGFzaAogICAgdHlwaWNhbGx5
        IGNvbnRhaW5zIGtleXMgY29ycmVzcG9uZGluZyB0byB0aGUgaW52YWxpZCBw
        cm9wZXJ0eSBuYW1lcwogICAgYW5kIHZhbHVlcyB3aGljaCBhcmUgYW4gYXJy
        YXkgb2YgZXJyb3IgbWVzc2FnZXMuCgogICAgYGBgamF2YXNjcmlwdAogICAg
        cmVjb3JkLmdldCgnZXJyb3JzLmxlbmd0aCcpOyAvLyAwCiAgICByZWNvcmQu
        c2V0KCdmb28nLCAnaW52YWxpZCB2YWx1ZScpOwogICAgcmVjb3JkLnNhdmUo
        KS50aGVuKG51bGwsIGZ1bmN0aW9uKCkgewogICAgICByZWNvcmQuZ2V0KCdl
        cnJvcnMnKS5nZXQoJ2ZvbycpOyAvLyBbJ2ZvbyBzaG91bGQgYmUgYSBudW1i
        ZXIuJ10KICAgIH0pOwogICAgYGBgCgogICAgQHByb3BlcnR5IGVycm9ycwog
        ICAgQHR5cGUge09iamVjdH0KICAqLwogIGVycm9yczogbnVsbCwKCiAgLyoq
        CiAgICBDcmVhdGUgYSBKU09OIHJlcHJlc2VudGF0aW9uIG9mIHRoZSByZWNv
        cmQsIHVzaW5nIHRoZSBzZXJpYWxpemF0aW9uCiAgICBzdHJhdGVneSBvZiB0
        aGUgc3RvcmUncyBhZGFwdGVyLgoKICAgYHNlcmlhbGl6ZWAgdGFrZXMgYW4g
        b3B0aW9uYWwgaGFzaCBhcyBhIHBhcmFtZXRlciwgY3VycmVudGx5CiAgICBz
        dXBwb3J0ZWQgb3B0aW9ucyBhcmU6CgogICAtIGBpbmNsdWRlSWRgOiBgdHJ1
        ZWAgaWYgdGhlIHJlY29yZCdzIElEIHNob3VsZCBiZSBpbmNsdWRlZCBpbiB0
        aGUKICAgICAgSlNPTiByZXByZXNlbnRhdGlvbi4KCiAgICBAbWV0aG9kIHNl
        cmlhbGl6ZQogICAgQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMKICAgIEByZXR1
        cm5zIHtPYmplY3R9IGFuIG9iamVjdCB3aG9zZSB2YWx1ZXMgYXJlIHByaW1p
        dGl2ZSBKU09OIHZhbHVlcyBvbmx5CiAgKi8KICBzZXJpYWxpemU6IGZ1bmN0
        aW9uKG9wdGlvbnMpIHsKICAgIHZhciBzdG9yZSA9IGdldCh0aGlzLCAnc3Rv
        cmUnKTsKICAgIHJldHVybiBzdG9yZS5zZXJpYWxpemUodGhpcywgb3B0aW9u
        cyk7CiAgfSwKCiAgLyoqCiAgICBVc2UgW0RTLkpTT05TZXJpYWxpemVyXShE
        Uy5KU09OU2VyaWFsaXplci5odG1sKSB0bwogICAgZ2V0IHRoZSBKU09OIHJl
        cHJlc2VudGF0aW9uIG9mIGEgcmVjb3JkLgoKICAgIGB0b0pTT05gIHRha2Vz
        IGFuIG9wdGlvbmFsIGhhc2ggYXMgYSBwYXJhbWV0ZXIsIGN1cnJlbnRseQog
        ICAgc3VwcG9ydGVkIG9wdGlvbnMgYXJlOgoKICAgIC0gYGluY2x1ZGVJZGA6
        IGB0cnVlYCBpZiB0aGUgcmVjb3JkJ3MgSUQgc2hvdWxkIGJlIGluY2x1ZGVk
        IGluIHRoZQogICAgICBKU09OIHJlcHJlc2VudGF0aW9uLgoKICAgIEBtZXRo
        b2QgdG9KU09OCiAgICBAcGFyYW0ge09iamVjdH0gb3B0aW9ucwogICAgQHJl
        dHVybnMge09iamVjdH0gQSBKU09OIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBv
        YmplY3QuCiAgKi8KICB0b0pTT046IGZ1bmN0aW9uKG9wdGlvbnMpIHsKICAg
        IC8vIGNvbnRhaW5lciBpcyBmb3IgbGF6eSB0cmFuc2Zvcm0gbG9va3Vwcwog
        ICAgdmFyIHNlcmlhbGl6ZXIgPSBEUy5KU09OU2VyaWFsaXplci5jcmVhdGUo
        eyBjb250YWluZXI6IHRoaXMuY29udGFpbmVyIH0pOwogICAgcmV0dXJuIHNl
        cmlhbGl6ZXIuc2VyaWFsaXplKHRoaXMsIG9wdGlvbnMpOwogIH0sCgogIC8q
        KgogICAgRmlyZWQgd2hlbiB0aGUgcmVjb3JkIGlzIGxvYWRlZCBmcm9tIHRo
        ZSBzZXJ2ZXIuCgogICAgQGV2ZW50IGRpZExvYWQKICAqLwogIGRpZExvYWQ6
        IEVtYmVyLkssCgogIC8qKgogICAgRmlyZWQgd2hlbiB0aGUgcmVjb3JkIGlz
        IHVwZGF0ZWQuCgogICAgQGV2ZW50IGRpZFVwZGF0ZQogICovCiAgZGlkVXBk
        YXRlOiBFbWJlci5LLAoKICAvKioKICAgIEZpcmVkIHdoZW4gdGhlIHJlY29y
        ZCBpcyBjcmVhdGVkLgoKICAgIEBldmVudCBkaWRDcmVhdGUKICAqLwogIGRp
        ZENyZWF0ZTogRW1iZXIuSywKCiAgLyoqCiAgICBGaXJlZCB3aGVuIHRoZSBy
        ZWNvcmQgaXMgZGVsZXRlZC4KCiAgICBAZXZlbnQgZGlkRGVsZXRlCiAgKi8K
        ICBkaWREZWxldGU6IEVtYmVyLkssCgogIC8qKgogICAgRmlyZWQgd2hlbiB0
        aGUgcmVjb3JkIGJlY29tZXMgaW52YWxpZC4KCiAgICBAZXZlbnQgYmVjYW1l
        SW52YWxpZAogICovCiAgYmVjYW1lSW52YWxpZDogRW1iZXIuSywKCiAgLyoq
        CiAgICBGaXJlZCB3aGVuIHRoZSByZWNvcmQgZW50ZXJzIHRoZSBlcnJvciBz
        dGF0ZS4KCiAgICBAZXZlbnQgYmVjYW1lRXJyb3IKICAqLwogIGJlY2FtZUVy
        cm9yOiBFbWJlci5LLAoKICAvKioKICAgIEBwcm9wZXJ0eSBkYXRhCiAgICBA
        cHJpdmF0ZQogICAgQHR5cGUge09iamVjdH0KICAqLwogIGRhdGE6IEVtYmVy
        LmNvbXB1dGVkKGZ1bmN0aW9uKCkgewogICAgdGhpcy5fZGF0YSA9IHRoaXMu
        X2RhdGEgfHwge307CiAgICByZXR1cm4gdGhpcy5fZGF0YTsKICB9KS5wcm9w
        ZXJ0eSgpLAoKICBfZGF0YTogbnVsbCwKCiAgaW5pdDogZnVuY3Rpb24oKSB7
        CiAgICBzZXQodGhpcywgJ2N1cnJlbnRTdGF0ZScsIERTLlJvb3RTdGF0ZS5l
        bXB0eSk7CiAgICB2YXIgZXJyb3JzID0gRFMuRXJyb3JzLmNyZWF0ZSgpOwog
        ICAgZXJyb3JzLnJlZ2lzdGVySGFuZGxlcnModGhpcywgZnVuY3Rpb24oKSB7
        CiAgICAgIHRoaXMuc2VuZCgnYmVjYW1lSW52YWxpZCcpOwogICAgfSwgZnVu
        Y3Rpb24oKSB7CiAgICAgIHRoaXMuc2VuZCgnYmVjYW1lVmFsaWQnKTsKICAg
        IH0pOwogICAgc2V0KHRoaXMsICdlcnJvcnMnLCBlcnJvcnMpOwogICAgdGhp
        cy5fc3VwZXIoKTsKICAgIHRoaXMuX3NldHVwKCk7CiAgfSwKCiAgX3NldHVw
        OiBmdW5jdGlvbigpIHsKICAgIHRoaXMuX2NoYW5nZXNUb1N5bmMgPSB7fTsK
        ICAgIHRoaXMuX2RlZmVycmVkVHJpZ2dlcnMgPSBbXTsKICAgIHRoaXMuX2Rh
        dGEgPSB7fTsKICAgIHRoaXMuX2F0dHJpYnV0ZXMgPSB7fTsKICAgIHRoaXMu
        X2luRmxpZ2h0QXR0cmlidXRlcyA9IHt9OwogICAgdGhpcy5fcmVsYXRpb25z
        aGlwcyA9IHt9OwogIH0sCgogIC8qKgogICAgQG1ldGhvZCBzZW5kCiAgICBA
        cHJpdmF0ZQogICAgQHBhcmFtIHtTdHJpbmd9IG5hbWUKICAgIEBwYXJhbSB7
        T2JqZWN0fSBjb250ZXh0CiAgKi8KICBzZW5kOiBmdW5jdGlvbihuYW1lLCBj
        b250ZXh0KSB7CiAgICB2YXIgY3VycmVudFN0YXRlID0gZ2V0KHRoaXMsICdj
        dXJyZW50U3RhdGUnKTsKCiAgICBpZiAoIWN1cnJlbnRTdGF0ZVtuYW1lXSkg
        ewogICAgICB0aGlzLl91bmhhbmRsZWRFdmVudChjdXJyZW50U3RhdGUsIG5h
        bWUsIGNvbnRleHQpOwogICAgfQoKICAgIHJldHVybiBjdXJyZW50U3RhdGVb
        bmFtZV0odGhpcywgY29udGV4dCk7CiAgfSwKCiAgLyoqCiAgICBAbWV0aG9k
        IHRyYW5zaXRpb25UbwogICAgQHByaXZhdGUKICAgIEBwYXJhbSB7U3RyaW5n
        fSBuYW1lCiAgKi8KICB0cmFuc2l0aW9uVG86IGZ1bmN0aW9uKG5hbWUpIHsK
        ICAgIC8vIFBPU1NJQkxFIFRPRE86IFJlbW92ZSB0aGlzIGNvZGUgYW5kIHJl
        cGxhY2Ugd2l0aAogICAgLy8gYWx3YXlzIGhhdmluZyBkaXJlY3QgcmVmZXJl
        bmNlcyB0byBzdGF0ZSBvYmplY3RzCgogICAgdmFyIHBpdm90TmFtZSA9IG5h
        bWUuc3BsaXQoIi4iLCAxKSwKICAgICAgICBjdXJyZW50U3RhdGUgPSBnZXQo
        dGhpcywgJ2N1cnJlbnRTdGF0ZScpLAogICAgICAgIHN0YXRlID0gY3VycmVu
        dFN0YXRlOwoKICAgIGRvIHsKICAgICAgaWYgKHN0YXRlLmV4aXQpIHsgc3Rh
        dGUuZXhpdCh0aGlzKTsgfQogICAgICBzdGF0ZSA9IHN0YXRlLnBhcmVudFN0
        YXRlOwogICAgfSB3aGlsZSAoIXN0YXRlLmhhc093blByb3BlcnR5KHBpdm90
        TmFtZSkpOwoKICAgIHZhciBwYXRoID0gbmFtZS5zcGxpdCgiLiIpOwoKICAg
        IHZhciBzZXR1cHMgPSBbXSwgZW50ZXJzID0gW10sIGksIGw7CgogICAgZm9y
        IChpPTAsIGw9cGF0aC5sZW5ndGg7IGk8bDsgaSsrKSB7CiAgICAgIHN0YXRl
        ID0gc3RhdGVbcGF0aFtpXV07CgogICAgICBpZiAoc3RhdGUuZW50ZXIpIHsg
        ZW50ZXJzLnB1c2goc3RhdGUpOyB9CiAgICAgIGlmIChzdGF0ZS5zZXR1cCkg
        eyBzZXR1cHMucHVzaChzdGF0ZSk7IH0KICAgIH0KCiAgICBmb3IgKGk9MCwg
        bD1lbnRlcnMubGVuZ3RoOyBpPGw7IGkrKykgewogICAgICBlbnRlcnNbaV0u
        ZW50ZXIodGhpcyk7CiAgICB9CgogICAgc2V0KHRoaXMsICdjdXJyZW50U3Rh
        dGUnLCBzdGF0ZSk7CgogICAgZm9yIChpPTAsIGw9c2V0dXBzLmxlbmd0aDsg
        aTxsOyBpKyspIHsKICAgICAgc2V0dXBzW2ldLnNldHVwKHRoaXMpOwogICAg
        fQoKICAgIHRoaXMudXBkYXRlUmVjb3JkQXJyYXlzTGF0ZXIoKTsKICB9LAoK
        ICBfdW5oYW5kbGVkRXZlbnQ6IGZ1bmN0aW9uKHN0YXRlLCBuYW1lLCBjb250
        ZXh0KSB7CiAgICB2YXIgZXJyb3JNZXNzYWdlID0gIkF0dGVtcHRlZCB0byBo
        YW5kbGUgZXZlbnQgYCIgKyBuYW1lICsgImAgIjsKICAgIGVycm9yTWVzc2Fn
        ZSAgICArPSAib24gIiArIFN0cmluZyh0aGlzKSArICIgd2hpbGUgaW4gc3Rh
        dGUgIjsKICAgIGVycm9yTWVzc2FnZSAgICArPSBzdGF0ZS5zdGF0ZU5hbWUg
        KyAiLiAiOwoKICAgIGlmIChjb250ZXh0ICE9PSB1bmRlZmluZWQpIHsKICAg
        ICAgZXJyb3JNZXNzYWdlICArPSAiQ2FsbGVkIHdpdGggIiArIEVtYmVyLmlu
        c3BlY3QoY29udGV4dCkgKyAiLiI7CiAgICB9CgogICAgdGhyb3cgbmV3IEVt
        YmVyLkVycm9yKGVycm9yTWVzc2FnZSk7CiAgfSwKCiAgd2l0aFRyYW5zYWN0
        aW9uOiBmdW5jdGlvbihmbikgewogICAgdmFyIHRyYW5zYWN0aW9uID0gZ2V0
        KHRoaXMsICd0cmFuc2FjdGlvbicpOwogICAgaWYgKHRyYW5zYWN0aW9uKSB7
        IGZuKHRyYW5zYWN0aW9uKTsgfQogIH0sCgogIC8qKgogICAgQG1ldGhvZCBs
        b2FkaW5nRGF0YQogICAgQHByaXZhdGUKICAgIEBwYXJhbSB7UHJvbWlzZX0g
        cHJvbWlzZQogICovCiAgbG9hZGluZ0RhdGE6IGZ1bmN0aW9uKHByb21pc2Up
        IHsKICAgIHRoaXMuc2VuZCgnbG9hZGluZ0RhdGEnLCBwcm9taXNlKTsKICB9
        LAoKICAvKioKICAgIEBtZXRob2QgbG9hZGVkRGF0YQogICAgQHByaXZhdGUK
        ICAqLwogIGxvYWRlZERhdGE6IGZ1bmN0aW9uKCkgewogICAgdGhpcy5zZW5k
        KCdsb2FkZWREYXRhJyk7CiAgfSwKCiAgLyoqCiAgICBAbWV0aG9kIG5vdEZv
        dW5kCiAgICBAcHJpdmF0ZQogICovCiAgbm90Rm91bmQ6IGZ1bmN0aW9uKCkg
        ewogICAgdGhpcy5zZW5kKCdub3RGb3VuZCcpOwogIH0sCgogIC8qKgogICAg
        QG1ldGhvZCBwdXNoZWREYXRhCiAgICBAcHJpdmF0ZQogICovCiAgcHVzaGVk
        RGF0YTogZnVuY3Rpb24oKSB7CiAgICB0aGlzLnNlbmQoJ3B1c2hlZERhdGEn
        KTsKICB9LAoKICAvKioKICAgIE1hcmtzIHRoZSByZWNvcmQgYXMgZGVsZXRl
        ZCBidXQgZG9lcyBub3Qgc2F2ZSBpdC4gWW91IG11c3QgY2FsbAogICAgYHNh
        dmVgIGFmdGVyd2FyZHMgaWYgeW91IHdhbnQgdG8gcGVyc2lzdCBpdC4gWW91
        IG1pZ2h0IHVzZSB0aGlzCiAgICBtZXRob2QgaWYgeW91IHdhbnQgdG8gYWxs
        b3cgdGhlIHVzZXIgdG8gc3RpbGwgYHJvbGxiYWNrKClgIGEKICAgIGRlbGV0
        ZSBhZnRlciBpdCB3YXMgbWFkZS4KCiAgICBFeGFtcGxlCgogICAgYGBgamF2
        YXNjcmlwdAogICAgQXBwLk1vZGVsRGVsZXRlUm91dGUgPSBFbWJlci5Sb3V0
        ZS5leHRlbmQoewogICAgICBhY3Rpb25zOiB7CiAgICAgICAgc29mdERlbGV0
        ZTogZnVuY3Rpb24oKSB7CiAgICAgICAgICB0aGlzLmdldCgnbW9kZWwnKS5k
        ZWxldGVSZWNvcmQoKTsKICAgICAgICB9LAogICAgICAgIGNvbmZpcm06IGZ1
        bmN0aW9uKCkgewogICAgICAgICAgdGhpcy5nZXQoJ21vZGVsJykuc2F2ZSgp
        OwogICAgICAgIH0sCiAgICAgICAgdW5kbzogZnVuY3Rpb24oKSB7CiAgICAg
        ICAgICB0aGlzLmdldCgnbW9kZWwnKS5yb2xsYmFjaygpOwogICAgICAgIH0K
        ICAgICAgfQogICAgfSk7CiAgICBgYGAKCiAgICBAbWV0aG9kIGRlbGV0ZVJl
        Y29yZAogICovCiAgZGVsZXRlUmVjb3JkOiBmdW5jdGlvbigpIHsKICAgIHRo
        aXMuc2VuZCgnZGVsZXRlUmVjb3JkJyk7CiAgfSwKCiAgLyoqCiAgICBTYW1l
        IGFzIGBkZWxldGVSZWNvcmRgLCBidXQgc2F2ZXMgdGhlIHJlY29yZCBpbW1l
        ZGlhdGVseS4KCiAgICBFeGFtcGxlCgogICAgYGBgamF2YXNjcmlwdAogICAg
        QXBwLk1vZGVsRGVsZXRlUm91dGUgPSBFbWJlci5Sb3V0ZS5leHRlbmQoewog
        ICAgICBhY3Rpb25zOiB7CiAgICAgICAgZGVsZXRlOiBmdW5jdGlvbigpIHsK
        ICAgICAgICAgIHZhciBjb250cm9sbGVyID0gdGhpcy5jb250cm9sbGVyOwog
        ICAgICAgICAgdGhpcy5nZXQoJ21vZGVsJykuZGVzdHJveVJlY29yZCgpLnRo
        ZW4oZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIGNvbnRyb2xsZXIudHJhbnNp
        dGlvblRvUm91dGUoJ21vZGVsLmluZGV4Jyk7CiAgICAgICAgICB9KTsKICAg
        ICAgICB9CiAgICAgIH0KICAgIH0pOwogICAgYGBgCgogICAgQG1ldGhvZCBk
        ZXN0cm95UmVjb3JkCiAgICBAcmV0dXJuIHtQcm9taXNlfSBhIHByb21pc2Ug
        dGhhdCB3aWxsIGJlIHJlc29sdmVkIHdoZW4gdGhlIGFkYXB0ZXIgcmV0dXJu
        cwogICAgc3VjY2Vzc2Z1bGx5IG9yIHJlamVjdGVkIGlmIHRoZSBhZGFwdGVy
        IHJldHVybnMgd2l0aCBhbiBlcnJvci4KICAqLwogIGRlc3Ryb3lSZWNvcmQ6
        IGZ1bmN0aW9uKCkgewogICAgdGhpcy5kZWxldGVSZWNvcmQoKTsKICAgIHJl
        dHVybiB0aGlzLnNhdmUoKTsKICB9LAoKICAvKioKICAgIEBtZXRob2QgdW5s
        b2FkUmVjb3JkCiAgICBAcHJpdmF0ZQogICovCiAgdW5sb2FkUmVjb3JkOiBm
        dW5jdGlvbigpIHsKICAgIEVtYmVyLmFzc2VydCgiWW91IGNhbiBvbmx5IHVu
        bG9hZCBhIGxvYWRlZCwgbm9uLWRpcnR5IHJlY29yZC4iLCAhZ2V0KHRoaXMs
        ICdpc0RpcnR5JykpOwoKICAgIHRoaXMuc2VuZCgndW5sb2FkUmVjb3JkJyk7
        CiAgfSwKCiAgLyoqCiAgICBAbWV0aG9kIGNsZWFyUmVsYXRpb25zaGlwcwog
        ICAgQHByaXZhdGUKICAqLwogIGNsZWFyUmVsYXRpb25zaGlwczogZnVuY3Rp
        b24oKSB7CiAgICB0aGlzLmVhY2hSZWxhdGlvbnNoaXAoZnVuY3Rpb24obmFt
        ZSwgcmVsYXRpb25zaGlwKSB7CiAgICAgIGlmIChyZWxhdGlvbnNoaXAua2lu
        ZCA9PT0gJ2JlbG9uZ3NUbycpIHsKICAgICAgICBzZXQodGhpcywgbmFtZSwg
        bnVsbCk7CiAgICAgIH0gZWxzZSBpZiAocmVsYXRpb25zaGlwLmtpbmQgPT09
        ICdoYXNNYW55JykgewogICAgICAgIHZhciBoYXNNYW55ID0gdGhpcy5fcmVs
        YXRpb25zaGlwc1tyZWxhdGlvbnNoaXAubmFtZV07CiAgICAgICAgaWYgKGhh
        c01hbnkpIHsgaGFzTWFueS5jbGVhcigpOyB9CiAgICAgIH0KICAgIH0sIHRo
        aXMpOwogIH0sCgogIC8qKgogICAgQG1ldGhvZCB1cGRhdGVSZWNvcmRBcnJh
        eXMKICAgIEBwcml2YXRlCiAgKi8KICB1cGRhdGVSZWNvcmRBcnJheXM6IGZ1
        bmN0aW9uKCkgewogICAgdGhpcy5fdXBkYXRpbmdSZWNvcmRBcnJheXNMYXRl
        ciA9IGZhbHNlOwogICAgZ2V0KHRoaXMsICdzdG9yZScpLmRhdGFXYXNVcGRh
        dGVkKHRoaXMuY29uc3RydWN0b3IsIHRoaXMpOwogIH0sCgogIC8qKgogICAg
        UmV0dXJucyBhbiBvYmplY3QsIHdob3NlIGtleXMgYXJlIGNoYW5nZWQgcHJv
        cGVydGllcywgYW5kIHZhbHVlIGlzCiAgICBhbiBbb2xkUHJvcCwgbmV3UHJv
        cF0gYXJyYXkuCgogICAgRXhhbXBsZQoKICAgIGBgYGphdmFzY3JpcHQKICAg
        IEFwcC5NYXNjb3QgPSBEUy5Nb2RlbC5leHRlbmQoewogICAgICBuYW1lOiBh
        dHRyKCdzdHJpbmcnKQogICAgfSk7CgogICAgdmFyIHBlcnNvbiA9IHN0b3Jl
        LmNyZWF0ZVJlY29yZCgncGVyc29uJyk7CiAgICBwZXJzb24uY2hhbmdlZEF0
        dHJpYnV0ZXMoKTsgLy8ge30KICAgIHBlcnNvbi5zZXQoJ25hbWUnLCAnVG9t
        c3RlcicpOwogICAgcGVyc29uLmNoYW5nZWRBdHRyaWJ1dGVzKCk7IC8vIHtu
        YW1lOiBbdW5kZWZpbmVkLCAnVG9tc3RlciddfQogICAgYGBgCgogICAgQG1l
        dGhvZCBjaGFuZ2VkQXR0cmlidXRlcwogICAgQHJldHVybiB7T2JqZWN0fSBh
        biBvYmplY3QsIHdob3NlIGtleXMgYXJlIGNoYW5nZWQgcHJvcGVydGllcywK
        ICAgICAgYW5kIHZhbHVlIGlzIGFuIFtvbGRQcm9wLCBuZXdQcm9wXSBhcnJh
        eS4KICAqLwogIGNoYW5nZWRBdHRyaWJ1dGVzOiBmdW5jdGlvbigpIHsKICAg
        IHZhciBvbGREYXRhID0gZ2V0KHRoaXMsICdfZGF0YScpLAogICAgICAgIG5l
        d0RhdGEgPSBnZXQodGhpcywgJ19hdHRyaWJ1dGVzJyksCiAgICAgICAgZGlm
        ZkRhdGEgPSB7fSwKICAgICAgICBwcm9wOwoKICAgIGZvciAocHJvcCBpbiBu
        ZXdEYXRhKSB7CiAgICAgIGRpZmZEYXRhW3Byb3BdID0gW29sZERhdGFbcHJv
        cF0sIG5ld0RhdGFbcHJvcF1dOwogICAgfQoKICAgIHJldHVybiBkaWZmRGF0
        YTsKICB9LAoKICAvKioKICAgIEBtZXRob2QgYWRhcHRlcldpbGxDb21taXQK
        ICAgIEBwcml2YXRlCiAgKi8KICBhZGFwdGVyV2lsbENvbW1pdDogZnVuY3Rp
        b24oKSB7CiAgICB0aGlzLnNlbmQoJ3dpbGxDb21taXQnKTsKICB9LAoKICAv
        KioKICAgIElmIHRoZSBhZGFwdGVyIGRpZCBub3QgcmV0dXJuIGEgaGFzaCBp
        biByZXNwb25zZSB0byBhIGNvbW1pdCwKICAgIG1lcmdlIHRoZSBjaGFuZ2Vk
        IGF0dHJpYnV0ZXMgYW5kIHJlbGF0aW9uc2hpcHMgaW50byB0aGUgZXhpc3Rp
        bmcKICAgIHNhdmVkIGRhdGEuCgogICAgQG1ldGhvZCBhZGFwdGVyRGlkQ29t
        bWl0CiAgKi8KICBhZGFwdGVyRGlkQ29tbWl0OiBmdW5jdGlvbihkYXRhKSB7
        CiAgICBzZXQodGhpcywgJ2lzRXJyb3InLCBmYWxzZSk7CgogICAgaWYgKGRh
        dGEpIHsKICAgICAgdGhpcy5fZGF0YSA9IGRhdGE7CiAgICB9IGVsc2Ugewog
        ICAgICBFbWJlci5taXhpbih0aGlzLl9kYXRhLCB0aGlzLl9pbkZsaWdodEF0
        dHJpYnV0ZXMpOwogICAgfQoKICAgIHRoaXMuX2luRmxpZ2h0QXR0cmlidXRl
        cyA9IHt9OwoKICAgIHRoaXMuc2VuZCgnZGlkQ29tbWl0Jyk7CiAgICB0aGlz
        LnVwZGF0ZVJlY29yZEFycmF5c0xhdGVyKCk7CgogICAgaWYgKCFkYXRhKSB7
        IHJldHVybjsgfQoKICAgIHRoaXMuc3VzcGVuZFJlbGF0aW9uc2hpcE9ic2Vy
        dmVycyhmdW5jdGlvbigpIHsKICAgICAgdGhpcy5ub3RpZnlQcm9wZXJ0eUNo
        YW5nZSgnZGF0YScpOwogICAgfSk7CiAgfSwKCiAgLyoqCiAgICBAbWV0aG9k
        IGFkYXB0ZXJEaWREaXJ0eQogICAgQHByaXZhdGUKICAqLwogIGFkYXB0ZXJE
        aWREaXJ0eTogZnVuY3Rpb24oKSB7CiAgICB0aGlzLnNlbmQoJ2JlY29tZURp
        cnR5Jyk7CiAgICB0aGlzLnVwZGF0ZVJlY29yZEFycmF5c0xhdGVyKCk7CiAg
        fSwKCiAgZGF0YURpZENoYW5nZTogRW1iZXIub2JzZXJ2ZXIoZnVuY3Rpb24o
        KSB7CiAgICB0aGlzLnJlbG9hZEhhc01hbnlzKCk7CiAgfSwgJ2RhdGEnKSwK
        CiAgcmVsb2FkSGFzTWFueXM6IGZ1bmN0aW9uKCkgewogICAgdmFyIHJlbGF0
        aW9uc2hpcHMgPSBnZXQodGhpcy5jb25zdHJ1Y3RvciwgJ3JlbGF0aW9uc2hp
        cHNCeU5hbWUnKTsKICAgIHRoaXMudXBkYXRlUmVjb3JkQXJyYXlzTGF0ZXIo
        KTsKICAgIHJlbGF0aW9uc2hpcHMuZm9yRWFjaChmdW5jdGlvbihuYW1lLCBy
        ZWxhdGlvbnNoaXApIHsKICAgICAgaWYgKHRoaXMuX2RhdGEubGlua3MgJiYg
        dGhpcy5fZGF0YS5saW5rc1tuYW1lXSkgeyByZXR1cm47IH0KICAgICAgaWYg
        KHJlbGF0aW9uc2hpcC5raW5kID09PSAnaGFzTWFueScpIHsKICAgICAgICB0
        aGlzLmhhc01hbnlEaWRDaGFuZ2UocmVsYXRpb25zaGlwLmtleSk7CiAgICAg
        IH0KICAgIH0sIHRoaXMpOwogIH0sCgogIGhhc01hbnlEaWRDaGFuZ2U6IGZ1
        bmN0aW9uKGtleSkgewogICAgdmFyIGhhc01hbnkgPSB0aGlzLl9yZWxhdGlv
        bnNoaXBzW2tleV07CgogICAgaWYgKGhhc01hbnkpIHsKICAgICAgdmFyIHJl
        Y29yZHMgPSB0aGlzLl9kYXRhW2tleV0gfHwgW107CgogICAgICBzZXQoaGFz
        TWFueSwgJ2NvbnRlbnQnLCBFbWJlci5BKHJlY29yZHMpKTsKICAgICAgc2V0
        KGhhc01hbnksICdpc0xvYWRlZCcsIHRydWUpOwogICAgICBoYXNNYW55LnRy
        aWdnZXIoJ2RpZExvYWQnKTsKICAgIH0KICB9LAoKICAvKioKICAgIEBtZXRo
        b2QgdXBkYXRlUmVjb3JkQXJyYXlzTGF0ZXIKICAgIEBwcml2YXRlCiAgKi8K
        ICB1cGRhdGVSZWNvcmRBcnJheXNMYXRlcjogZnVuY3Rpb24oKSB7CiAgICAv
        LyBxdWljayBoYWNrIChzb21ldGhpbmcgbGlrZSB0aGlzIGNvdWxkIGJlIHB1
        c2hlZCBpbnRvIHJ1bi5vbmNlCiAgICBpZiAodGhpcy5fdXBkYXRpbmdSZWNv
        cmRBcnJheXNMYXRlcikgeyByZXR1cm47IH0KICAgIHRoaXMuX3VwZGF0aW5n
        UmVjb3JkQXJyYXlzTGF0ZXIgPSB0cnVlOwoKICAgIEVtYmVyLnJ1bi5zY2hl
        ZHVsZSgnYWN0aW9ucycsIHRoaXMsIHRoaXMudXBkYXRlUmVjb3JkQXJyYXlz
        KTsKICB9LAoKICAvKioKICAgIEBtZXRob2Qgc2V0dXBEYXRhCiAgICBAcHJp
        dmF0ZQogICAgQHBhcmFtIHtPYmplY3R9IGRhdGEKICAgIEBwYXJhbSB7Qm9v
        bGVhbn0gcGFydGlhbCB0aGUgZGF0YSBzaG91bGQgYmUgbWVyZ2VkIGludG8K
        ICAgICAgdGhlIGV4aXN0aW5nIGRhdGEsIG5vdCByZXBsYWNlIGl0LgogICov
        CiAgc2V0dXBEYXRhOiBmdW5jdGlvbihkYXRhLCBwYXJ0aWFsKSB7CiAgICBp
        ZiAocGFydGlhbCkgewogICAgICBFbWJlci5tZXJnZSh0aGlzLl9kYXRhLCBk
        YXRhKTsKICAgIH0gZWxzZSB7CiAgICAgIHRoaXMuX2RhdGEgPSBkYXRhOwog
        ICAgfQoKICAgIHZhciByZWxhdGlvbnNoaXBzID0gdGhpcy5fcmVsYXRpb25z
        aGlwczsKCiAgICB0aGlzLmVhY2hSZWxhdGlvbnNoaXAoZnVuY3Rpb24obmFt
        ZSwgcmVsKSB7CiAgICAgIGlmIChkYXRhLmxpbmtzICYmIGRhdGEubGlua3Nb
        bmFtZV0pIHsgcmV0dXJuOyB9CiAgICAgIGlmIChyZWwub3B0aW9ucy5hc3lu
        YykgeyByZWxhdGlvbnNoaXBzW25hbWVdID0gbnVsbDsgfQogICAgfSk7Cgog
        ICAgaWYgKGRhdGEpIHsgdGhpcy5wdXNoZWREYXRhKCk7IH0KCiAgICB0aGlz
        LnN1c3BlbmRSZWxhdGlvbnNoaXBPYnNlcnZlcnMoZnVuY3Rpb24oKSB7CiAg
        ICAgIHRoaXMubm90aWZ5UHJvcGVydHlDaGFuZ2UoJ2RhdGEnKTsKICAgIH0p
        OwogIH0sCgogIG1hdGVyaWFsaXplSWQ6IGZ1bmN0aW9uKGlkKSB7CiAgICBz
        ZXQodGhpcywgJ2lkJywgaWQpOwogIH0sCgogIG1hdGVyaWFsaXplQXR0cmli
        dXRlczogZnVuY3Rpb24oYXR0cmlidXRlcykgewogICAgRW1iZXIuYXNzZXJ0
        KCJNdXN0IHBhc3MgYSBoYXNoIG9mIGF0dHJpYnV0ZXMgdG8gbWF0ZXJpYWxp
        emVBdHRyaWJ1dGVzIiwgISFhdHRyaWJ1dGVzKTsKICAgIG1lcmdlKHRoaXMu
        X2RhdGEsIGF0dHJpYnV0ZXMpOwogIH0sCgogIG1hdGVyaWFsaXplQXR0cmli
        dXRlOiBmdW5jdGlvbihuYW1lLCB2YWx1ZSkgewogICAgdGhpcy5fZGF0YVtu
        YW1lXSA9IHZhbHVlOwogIH0sCgogIC8qKgogICAgQG1ldGhvZCB1cGRhdGVI
        YXNNYW55CiAgICBAcHJpdmF0ZQogICAgQHBhcmFtIHtTdHJpbmd9IG5hbWUK
        ICAgIEBwYXJhbSB7QXJyYXl9IHJlY29yZHMKICAqLwogIHVwZGF0ZUhhc01h
        bnk6IGZ1bmN0aW9uKG5hbWUsIHJlY29yZHMpIHsKICAgIHRoaXMuX2RhdGFb
        bmFtZV0gPSByZWNvcmRzOwogICAgdGhpcy5oYXNNYW55RGlkQ2hhbmdlKG5h
        bWUpOwogIH0sCgogIC8qKgogICAgQG1ldGhvZCB1cGRhdGVCZWxvbmdzVG8K
        ICAgIEBwcml2YXRlCiAgICBAcGFyYW0ge1N0cmluZ30gbmFtZQogICAgQHBh
        cmFtIHtEUy5Nb2RlbH0gcmVjb3JkCiAgKi8KICB1cGRhdGVCZWxvbmdzVG86
        IGZ1bmN0aW9uKG5hbWUsIHJlY29yZCkgewogICAgdGhpcy5fZGF0YVtuYW1l
        XSA9IHJlY29yZDsKICB9LAoKICAvKioKICAgIElmIHRoZSBtb2RlbCBgaXNE
        aXJ0eWAgdGhpcyBmdW5jdGlvbiB3aWxsIGRpc2NhcmQgYW55IHVuc2F2ZWQK
        ICAgIGNoYW5nZXMKCiAgICBFeGFtcGxlCgogICAgYGBgamF2YXNjcmlwdAog
        ICAgcmVjb3JkLmdldCgnbmFtZScpOyAvLyAnVW50aXRsZWQgRG9jdW1lbnQn
        CiAgICByZWNvcmQuc2V0KCduYW1lJywgJ0RvYyAxJyk7CiAgICByZWNvcmQu
        Z2V0KCduYW1lJyk7IC8vICdEb2MgMScKICAgIHJlY29yZC5yb2xsYmFjaygp
        OwogICAgcmVjb3JkLmdldCgnbmFtZScpOyAvLyAnVW50aXRsZWQgRG9jdW1l
        bnQnCiAgICBgYGAKCiAgICBAbWV0aG9kIHJvbGxiYWNrCiAgKi8KICByb2xs
        YmFjazogZnVuY3Rpb24oKSB7CiAgICB0aGlzLl9hdHRyaWJ1dGVzID0ge307
        CgogICAgaWYgKGdldCh0aGlzLCAnaXNFcnJvcicpKSB7CiAgICAgIHRoaXMu
        X2luRmxpZ2h0QXR0cmlidXRlcyA9IHt9OwogICAgICBzZXQodGhpcywgJ2lz
        RXJyb3InLCBmYWxzZSk7CiAgICB9CgogICAgaWYgKCFnZXQodGhpcywgJ2lz
        VmFsaWQnKSkgewogICAgICB0aGlzLl9pbkZsaWdodEF0dHJpYnV0ZXMgPSB7
        fTsKICAgIH0KCiAgICB0aGlzLnNlbmQoJ3JvbGxlZEJhY2snKTsKCiAgICB0
        aGlzLnN1c3BlbmRSZWxhdGlvbnNoaXBPYnNlcnZlcnMoZnVuY3Rpb24oKSB7
        CiAgICAgIHRoaXMubm90aWZ5UHJvcGVydHlDaGFuZ2UoJ2RhdGEnKTsKICAg
        IH0pOwogIH0sCgogIHRvU3RyaW5nRXh0ZW5zaW9uOiBmdW5jdGlvbigpIHsK
        ICAgIHJldHVybiBnZXQodGhpcywgJ2lkJyk7CiAgfSwKCiAgLyoqCiAgICBU
        aGUgZ29hbCBvZiB0aGlzIG1ldGhvZCBpcyB0byB0ZW1wb3JhcmlseSBkaXNh
        YmxlIHNwZWNpZmljIG9ic2VydmVycwogICAgdGhhdCB0YWtlIGFjdGlvbiBp
        biByZXNwb25zZSB0byBhcHBsaWNhdGlvbiBjaGFuZ2VzLgoKICAgIFRoaXMg
        YWxsb3dzIHRoZSBzeXN0ZW0gdG8gbWFrZSBjaGFuZ2VzIChzdWNoIGFzIG1h
        dGVyaWFsaXphdGlvbiBhbmQKICAgIHJvbGxiYWNrKSB0aGF0IHNob3VsZCBu
        b3QgdHJpZ2dlciBzZWNvbmRhcnkgYmVoYXZpb3IgKHN1Y2ggYXMgc2V0dGlu
        ZyBhbgogICAgaW52ZXJzZSByZWxhdGlvbnNoaXAgb3IgbWFya2luZyByZWNv
        cmRzIGFzIGRpcnR5KS4KCiAgICBUaGUgc3BlY2lmaWMgaW1wbGVtZW50YXRp
        b24gd2lsbCBsaWtlbHkgY2hhbmdlIGFzIEVtYmVyIHByb3BlciBwcm92aWRl
        cwogICAgYmV0dGVyIGluZnJhc3RydWN0dXJlIGZvciBzdXNwZW5kaW5nIGdy
        b3VwcyBvZiBvYnNlcnZlcnMsIGFuZCBpZiBBcnJheQogICAgb2JzZXJ2YXRp
        b24gYmVjb21lcyBtb3JlIHVuaWZpZWQgd2l0aCByZWd1bGFyIG9ic2VydmVy
        cy4KCiAgICBAbWV0aG9kIHN1c3BlbmRSZWxhdGlvbnNoaXBPYnNlcnZlcnMK
        ICAgIEBwcml2YXRlCiAgICBAcGFyYW0gY2FsbGJhY2sKICAgIEBwYXJhbSBi
        aW5kaW5nCiAgKi8KICBzdXNwZW5kUmVsYXRpb25zaGlwT2JzZXJ2ZXJzOiBm
        dW5jdGlvbihjYWxsYmFjaywgYmluZGluZykgewogICAgdmFyIG9ic2VydmVy
        cyA9IGdldCh0aGlzLmNvbnN0cnVjdG9yLCAncmVsYXRpb25zaGlwTmFtZXMn
        KS5iZWxvbmdzVG87CiAgICB2YXIgc2VsZiA9IHRoaXM7CgogICAgdHJ5IHsK
        ICAgICAgdGhpcy5fc3VzcGVuZGVkUmVsYXRpb25zaGlwcyA9IHRydWU7CiAg
        ICAgIEVtYmVyLl9zdXNwZW5kT2JzZXJ2ZXJzKHNlbGYsIG9ic2VydmVycywg
        bnVsbCwgJ2JlbG9uZ3NUb0RpZENoYW5nZScsIGZ1bmN0aW9uKCkgewogICAg
        ICAgIEVtYmVyLl9zdXNwZW5kQmVmb3JlT2JzZXJ2ZXJzKHNlbGYsIG9ic2Vy
        dmVycywgbnVsbCwgJ2JlbG9uZ3NUb1dpbGxDaGFuZ2UnLCBmdW5jdGlvbigp
        IHsKICAgICAgICAgIGNhbGxiYWNrLmNhbGwoYmluZGluZyB8fCBzZWxmKTsK
        ICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9IGZpbmFsbHkgewogICAgICB0
        aGlzLl9zdXNwZW5kZWRSZWxhdGlvbnNoaXBzID0gZmFsc2U7CiAgICB9CiAg
        fSwKCiAgLyoqCiAgICBTYXZlIHRoZSByZWNvcmQgYW5kIHBlcnNpc3QgYW55
        IGNoYW5nZXMgdG8gdGhlIHJlY29yZCB0byBhbgogICAgZXh0ZW5hbCBzb3Vy
        Y2UgdmlhIHRoZSBhZGFwdGVyLgoKICAgIEV4YW1wbGUKCiAgICBgYGBqYXZh
        c2NyaXB0CiAgICByZWNvcmQuc2V0KCduYW1lJywgJ1RvbXN0ZXInKTsKICAg
        IHJlY29yZC5zYXZlKCkudGhlbihmdW5jdGlvbigpewogICAgICAvLyBTdWNj
        ZXNzIGNhbGxiYWNrCiAgICB9LCBmdW5jdGlvbigpIHsKICAgICAgLy8gRXJy
        b3IgY2FsbGJhY2sKICAgIH0pOwogICAgYGBgCiAgICBAbWV0aG9kIHNhdmUK
        ICAgIEByZXR1cm4ge1Byb21pc2V9IGEgcHJvbWlzZSB0aGF0IHdpbGwgYmUg
        cmVzb2x2ZWQgd2hlbiB0aGUgYWRhcHRlciByZXR1cm5zCiAgICBzdWNjZXNz
        ZnVsbHkgb3IgcmVqZWN0ZWQgaWYgdGhlIGFkYXB0ZXIgcmV0dXJucyB3aXRo
        IGFuIGVycm9yLgogICovCiAgc2F2ZTogZnVuY3Rpb24oKSB7CiAgICB2YXIg
        cHJvbWlzZUxhYmVsID0gIkRTOiBNb2RlbCNzYXZlICIgKyB0aGlzOwogICAg
        dmFyIHJlc29sdmVyID0gRW1iZXIuUlNWUC5kZWZlcihwcm9taXNlTGFiZWwp
        OwoKICAgIHRoaXMuZ2V0KCdzdG9yZScpLnNjaGVkdWxlU2F2ZSh0aGlzLCBy
        ZXNvbHZlcik7CiAgICB0aGlzLl9pbkZsaWdodEF0dHJpYnV0ZXMgPSB0aGlz
        Ll9hdHRyaWJ1dGVzOwogICAgdGhpcy5fYXR0cmlidXRlcyA9IHt9OwoKICAg
        IHJldHVybiBEUy5Qcm9taXNlT2JqZWN0LmNyZWF0ZSh7IHByb21pc2U6IHJl
        c29sdmVyLnByb21pc2UgfSk7CiAgfSwKCiAgLyoqCiAgICBSZWxvYWQgdGhl
        IHJlY29yZCBmcm9tIHRoZSBhZGFwdGVyLgoKICAgIFRoaXMgd2lsbCBvbmx5
        IHdvcmsgaWYgdGhlIHJlY29yZCBoYXMgYWxyZWFkeSBmaW5pc2hlZCBsb2Fk
        aW5nCiAgICBhbmQgaGFzIG5vdCB5ZXQgYmVlbiBtb2RpZmllZCAoYGlzTG9h
        ZGVkYCBidXQgbm90IGBpc0RpcnR5YCwKICAgIG9yIGBpc1NhdmluZ2ApLgoK
        ICAgIEV4YW1wbGUKCiAgICBgYGBqYXZhc2NyaXB0CiAgICBBcHAuTW9kZWxW
        aWV3Um91dGUgPSBFbWJlci5Sb3V0ZS5leHRlbmQoewogICAgICBhY3Rpb25z
        OiB7CiAgICAgICAgcmVsb2FkOiBmdW5jdGlvbigpIHsKICAgICAgICAgIHRo
        aXMuZ2V0KCdtb2RlbCcpLnJlbG9hZCgpOwogICAgICAgIH0KICAgICAgfQog
        ICAgfSk7CiAgICBgYGAKCiAgICBAbWV0aG9kIHJlbG9hZAogICAgQHJldHVy
        biB7UHJvbWlzZX0gYSBwcm9taXNlIHRoYXQgd2lsbCBiZSByZXNvbHZlZCB3
        aXRoIHRoZSByZWNvcmQgd2hlbiB0aGUKICAgIGFkYXB0ZXIgcmV0dXJucyBz
        dWNjZXNzZnVsbHkgb3IgcmVqZWN0ZWQgaWYgdGhlIGFkYXB0ZXIgcmV0dXJu
        cwogICAgd2l0aCBhbiBlcnJvci4KICAqLwogIHJlbG9hZDogZnVuY3Rpb24o
        KSB7CiAgICBzZXQodGhpcywgJ2lzUmVsb2FkaW5nJywgdHJ1ZSk7CgogICAg
        dmFyICByZWNvcmQgPSB0aGlzOwoKICAgIHZhciBwcm9taXNlTGFiZWwgPSAi
        RFM6IE1vZGVsI3JlbG9hZCBvZiAiICsgdGhpczsKICAgIHZhciBwcm9taXNl
        ID0gbmV3IEVtYmVyLlJTVlAuUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlKXsK
        ICAgICAgIHJlY29yZC5zZW5kKCdyZWxvYWRSZWNvcmQnLCByZXNvbHZlKTsK
        ICAgIH0sIHByb21pc2VMYWJlbCkudGhlbihmdW5jdGlvbigpIHsKICAgICAg
        cmVjb3JkLnNldCgnaXNSZWxvYWRpbmcnLCBmYWxzZSk7CiAgICAgIHJlY29y
        ZC5zZXQoJ2lzRXJyb3InLCBmYWxzZSk7CiAgICAgIHJldHVybiByZWNvcmQ7
        CiAgICB9LCBmdW5jdGlvbihyZWFzb24pIHsKICAgICAgcmVjb3JkLnNldCgn
        aXNFcnJvcicsIHRydWUpOwogICAgICB0aHJvdyByZWFzb247CiAgICB9LCAi
        RFM6IE1vZGVsI3JlbG9hZCBjb21wbGV0ZSwgdXBkYXRlIGZsYWdzIik7Cgog
        ICAgcmV0dXJuIERTLlByb21pc2VPYmplY3QuY3JlYXRlKHsgcHJvbWlzZTog
        cHJvbWlzZSB9KTsKICB9LAoKICAvLyBGT1IgVVNFIERVUklORyBDT01NSVQg
        UFJPQ0VTUwoKICBhZGFwdGVyRGlkVXBkYXRlQXR0cmlidXRlOiBmdW5jdGlv
        bihhdHRyaWJ1dGVOYW1lLCB2YWx1ZSkgewoKICAgIC8vIElmIGEgdmFsdWUg
        aXMgcGFzc2VkIGluLCB1cGRhdGUgdGhlIGludGVybmFsIGF0dHJpYnV0ZXMg
        YW5kIGNsZWFyCiAgICAvLyB0aGUgYXR0cmlidXRlIGNhY2hlIHNvIGl0IHBp
        Y2tzIHVwIHRoZSBuZXcgdmFsdWUuIE90aGVyd2lzZSwKICAgIC8vIGNvbGxh
        cHNlIHRoZSBjdXJyZW50IHZhbHVlIGludG8gdGhlIGludGVybmFsIGF0dHJp
        YnV0ZXMgYmVjYXVzZQogICAgLy8gdGhlIGFkYXB0ZXIgaGFzIGFja25vd2xl
        ZGdlZCBpdC4KICAgIGlmICh2YWx1ZSAhPT0gdW5kZWZpbmVkKSB7CiAgICAg
        IHRoaXMuX2RhdGFbYXR0cmlidXRlTmFtZV0gPSB2YWx1ZTsKICAgICAgdGhp
        cy5ub3RpZnlQcm9wZXJ0eUNoYW5nZShhdHRyaWJ1dGVOYW1lKTsKICAgIH0g
        ZWxzZSB7CiAgICAgIHRoaXMuX2RhdGFbYXR0cmlidXRlTmFtZV0gPSB0aGlz
        Ll9pbkZsaWdodEF0dHJpYnV0ZXNbYXR0cmlidXRlTmFtZV07CiAgICB9Cgog
        ICAgdGhpcy51cGRhdGVSZWNvcmRBcnJheXNMYXRlcigpOwogIH0sCgogIC8q
        KgogICAgQG1ldGhvZCBhZGFwdGVyRGlkSW52YWxpZGF0ZQogICAgQHByaXZh
        dGUKICAqLwogIGFkYXB0ZXJEaWRJbnZhbGlkYXRlOiBmdW5jdGlvbihlcnJv
        cnMpIHsKICAgIHZhciByZWNvcmRFcnJvcnMgPSBnZXQodGhpcywgJ2Vycm9y
        cycpOwogICAgZnVuY3Rpb24gYWRkRXJyb3IobmFtZSkgewogICAgICBpZiAo
        ZXJyb3JzW25hbWVdKSB7CiAgICAgICAgcmVjb3JkRXJyb3JzLmFkZChuYW1l
        LCBlcnJvcnNbbmFtZV0pOwogICAgICB9CiAgICB9CgogICAgdGhpcy5lYWNo
        QXR0cmlidXRlKGFkZEVycm9yKTsKICAgIHRoaXMuZWFjaFJlbGF0aW9uc2hp
        cChhZGRFcnJvcik7CiAgfSwKCiAgLyoqCiAgICBAbWV0aG9kIGFkYXB0ZXJE
        aWRFcnJvcgogICAgQHByaXZhdGUKICAqLwogIGFkYXB0ZXJEaWRFcnJvcjog
        ZnVuY3Rpb24oKSB7CiAgICB0aGlzLnNlbmQoJ2JlY2FtZUVycm9yJyk7CiAg
        ICBzZXQodGhpcywgJ2lzRXJyb3InLCB0cnVlKTsKICB9LAoKICAvKioKICAg
        IE92ZXJyaWRlIHRoZSBkZWZhdWx0IGV2ZW50IGZpcmluZyBmcm9tIEVtYmVy
        LkV2ZW50ZWQgdG8KICAgIGFsc28gY2FsbCBtZXRob2RzIHdpdGggdGhlIGdp
        dmVuIG5hbWUuCgogICAgQG1ldGhvZCB0cmlnZ2VyCiAgICBAcHJpdmF0ZQog
        ICAgQHBhcmFtIG5hbWUKICAqLwogIHRyaWdnZXI6IGZ1bmN0aW9uKG5hbWUp
        IHsKICAgIEVtYmVyLnRyeUludm9rZSh0aGlzLCBuYW1lLCBbXS5zbGljZS5j
        YWxsKGFyZ3VtZW50cywgMSkpOwogICAgdGhpcy5fc3VwZXIuYXBwbHkodGhp
        cywgYXJndW1lbnRzKTsKICB9LAoKICB0cmlnZ2VyTGF0ZXI6IGZ1bmN0aW9u
        KCkgewogICAgaWYgKHRoaXMuX2RlZmVycmVkVHJpZ2dlcnMucHVzaChhcmd1
        bWVudHMpICE9PSAxKSB7IHJldHVybjsgfQogICAgRW1iZXIucnVuLnNjaGVk
        dWxlKCdhY3Rpb25zJywgdGhpcywgJ190cmlnZ2VyRGVmZXJyZWRUcmlnZ2Vy
        cycpOwogIH0sCgogIF90cmlnZ2VyRGVmZXJyZWRUcmlnZ2VyczogZnVuY3Rp
        b24oKSB7CiAgICBmb3IgKHZhciBpPTAsIGw9dGhpcy5fZGVmZXJyZWRUcmln
        Z2Vycy5sZW5ndGg7IGk8bDsgaSsrKSB7CiAgICAgIHRoaXMudHJpZ2dlci5h
        cHBseSh0aGlzLCB0aGlzLl9kZWZlcnJlZFRyaWdnZXJzW2ldKTsKICAgIH0K
        CiAgICB0aGlzLl9kZWZlcnJlZFRyaWdnZXJzLmxlbmd0aCA9IDA7CiAgfQp9
        KTsKCkRTLk1vZGVsLnJlb3BlbkNsYXNzKHsKCiAgLyoqCiAgICBBbGlhcyBE
        Uy5Nb2RlbCdzIGBjcmVhdGVgIG1ldGhvZCB0byBgX2NyZWF0ZWAuIFRoaXMg
        YWxsb3dzIHVzIHRvIGNyZWF0ZSBEUy5Nb2RlbAogICAgaW5zdGFuY2VzIGZy
        b20gd2l0aGluIHRoZSBzdG9yZSwgYnV0IGlmIGVuZCB1c2VycyBhY2NpZGVu
        dGFsbHkgY2FsbCBgY3JlYXRlKClgCiAgICAoaW5zdGVhZCBvZiBgY3JlYXRl
        UmVjb3JkKClgKSwgd2UgY2FuIHJhaXNlIGFuIGVycm9yLgoKICAgIEBtZXRo
        b2QgX2NyZWF0ZQogICAgQHByaXZhdGUKICAgIEBzdGF0aWMKICAqLwogIF9j
        cmVhdGU6IERTLk1vZGVsLmNyZWF0ZSwKCiAgLyoqCiAgICBPdmVycmlkZSB0
        aGUgY2xhc3MnIGBjcmVhdGUoKWAgbWV0aG9kIHRvIHJhaXNlIGFuIGVycm9y
        LiBUaGlzCiAgICBwcmV2ZW50cyBlbmQgdXNlcnMgZnJvbSBpbmFkdmVydGVu
        dGx5IGNhbGxpbmcgYGNyZWF0ZSgpYCBpbnN0ZWFkCiAgICBvZiBgY3JlYXRl
        UmVjb3JkKClgLiBUaGUgc3RvcmUgaXMgc3RpbGwgYWJsZSB0byBjcmVhdGUg
        aW5zdGFuY2VzCiAgICBieSBjYWxsaW5nIHRoZSBgX2NyZWF0ZSgpYCBtZXRo
        b2QuIFRvIGNyZWF0ZSBhbiBpbnN0YW5jZSBvZiBhCiAgICBgRFMuTW9kZWxg
        IHVzZSBbc3RvcmUuY3JlYXRlUmVjb3JkXShEUy5TdG9yZS5odG1sI21ldGhv
        ZF9jcmVhdGVSZWNvcmQpLgoKICAgIEBtZXRob2QgY3JlYXRlCiAgICBAcHJp
        dmF0ZQogICAgQHN0YXRpYwogICovCiAgY3JlYXRlOiBmdW5jdGlvbigpIHsK
        ICAgIHRocm93IG5ldyBFbWJlci5FcnJvcigiWW91IHNob3VsZCBub3QgY2Fs
        bCBgY3JlYXRlYCBvbiBhIG1vZGVsLiBJbnN0ZWFkLCBjYWxsIGBzdG9yZS5j
        cmVhdGVSZWNvcmRgIHdpdGggdGhlIGF0dHJpYnV0ZXMgeW91IHdvdWxkIGxp
        a2UgdG8gc2V0LiIpOwogIH0KfSk7Cgp9KSgpOwoKCgooZnVuY3Rpb24oKSB7
        Ci8qKgogIEBtb2R1bGUgZW1iZXItZGF0YQoqLwoKdmFyIGdldCA9IEVtYmVy
        LmdldDsKCi8qKgogIEBjbGFzcyBNb2RlbAogIEBuYW1lc3BhY2UgRFMKKi8K
        RFMuTW9kZWwucmVvcGVuQ2xhc3MoewogIC8qKgogICAgQSBtYXAgd2hvc2Ug
        a2V5cyBhcmUgdGhlIGF0dHJpYnV0ZXMgb2YgdGhlIG1vZGVsIChwcm9wZXJ0
        aWVzCiAgICBkZXNjcmliZWQgYnkgRFMuYXR0cikgYW5kIHdob3NlIHZhbHVl
        cyBhcmUgdGhlIG1ldGEgb2JqZWN0IGZvciB0aGUKICAgIHByb3BlcnR5LgoK
        ICAgIEV4YW1wbGUKCiAgICBgYGBqYXZhc2NyaXB0CgogICAgQXBwLlBlcnNv
        biA9IERTLk1vZGVsLmV4dGVuZCh7CiAgICAgIGZpcnN0TmFtZTogYXR0cign
        c3RyaW5nJyksCiAgICAgIGxhc3ROYW1lOiBhdHRyKCdzdHJpbmcnKSwKICAg
        ICAgYmlydGhkYXk6IGF0dHIoJ2RhdGUnKQogICAgfSk7CgogICAgdmFyIGF0
        dHJpYnV0ZXMgPSBFbWJlci5nZXQoQXBwLlBlcnNvbiwgJ2F0dHJpYnV0ZXMn
        KQoKICAgIGF0dHJpYnV0ZXMuZm9yRWFjaChmdW5jdGlvbihuYW1lLCBtZXRh
        KSB7CiAgICAgIGNvbnNvbGUubG9nKG5hbWUsIG1ldGEpOwogICAgfSk7Cgog
        ICAgLy8gcHJpbnRzOgogICAgLy8gZmlyc3ROYW1lIHt0eXBlOiAic3RyaW5n
        IiwgaXNBdHRyaWJ1dGU6IHRydWUsIG9wdGlvbnM6IE9iamVjdCwgcGFyZW50
        VHlwZTogZnVuY3Rpb24sIG5hbWU6ICJmaXJzdE5hbWUifQogICAgLy8gbGFz
        dE5hbWUge3R5cGU6ICJzdHJpbmciLCBpc0F0dHJpYnV0ZTogdHJ1ZSwgb3B0
        aW9uczogT2JqZWN0LCBwYXJlbnRUeXBlOiBmdW5jdGlvbiwgbmFtZTogImxh
        c3ROYW1lIn0KICAgIC8vIGJpcnRoZGF5IHt0eXBlOiAiZGF0ZSIsIGlzQXR0
        cmlidXRlOiB0cnVlLCBvcHRpb25zOiBPYmplY3QsIHBhcmVudFR5cGU6IGZ1
        bmN0aW9uLCBuYW1lOiAiYmlydGhkYXkifQogICAgYGBgCgogICAgQHByb3Bl
        cnR5IGF0dHJpYnV0ZXMKICAgIEBzdGF0aWMKICAgIEB0eXBlIHtFbWJlci5N
        YXB9CiAgICBAcmVhZE9ubHkKICAqLwogIGF0dHJpYnV0ZXM6IEVtYmVyLmNv
        bXB1dGVkKGZ1bmN0aW9uKCkgewogICAgdmFyIG1hcCA9IEVtYmVyLk1hcC5j
        cmVhdGUoKTsKCiAgICB0aGlzLmVhY2hDb21wdXRlZFByb3BlcnR5KGZ1bmN0
        aW9uKG5hbWUsIG1ldGEpIHsKICAgICAgaWYgKG1ldGEuaXNBdHRyaWJ1dGUp
        IHsKICAgICAgICBFbWJlci5hc3NlcnQoIllvdSBtYXkgbm90IHNldCBgaWRg
        IGFzIGFuIGF0dHJpYnV0ZSBvbiB5b3VyIG1vZGVsLiBQbGVhc2UgcmVtb3Zl
        IGFueSBsaW5lcyB0aGF0IGxvb2sgbGlrZTogYGlkOiBEUy5hdHRyKCc8dHlw
        ZT4nKWAgZnJvbSAiICsgdGhpcy50b1N0cmluZygpLCBuYW1lICE9PSAnaWQn
        KTsKCiAgICAgICAgbWV0YS5uYW1lID0gbmFtZTsKICAgICAgICBtYXAuc2V0
        KG5hbWUsIG1ldGEpOwogICAgICB9CiAgICB9KTsKCiAgICByZXR1cm4gbWFw
        OwogIH0pLAoKICAvKioKICAgIEEgbWFwIHdob3NlIGtleXMgYXJlIHRoZSBh
        dHRyaWJ1dGVzIG9mIHRoZSBtb2RlbCAocHJvcGVydGllcwogICAgZGVzY3Jp
        YmVkIGJ5IERTLmF0dHIpIGFuZCB3aG9zZSB2YWx1ZXMgYXJlIHR5cGUgb2Yg
        dHJhbnNmb3JtYXRpb24KICAgIGFwcGxpZWQgdG8gZWFjaCBhdHRyaWJ1dGUu
        IFRoaXMgbWFwIGRvZXMgbm90IGluY2x1ZGUgYW55CiAgICBhdHRyaWJ1dGVz
        IHRoYXQgZG8gbm90IGhhdmUgYW4gdHJhbnNmb3JtYXRpb24gdHlwZS4KCiAg
        ICBFeGFtcGxlCgogICAgYGBgamF2YXNjcmlwdAogICAgQXBwLlBlcnNvbiA9
        IERTLk1vZGVsLmV4dGVuZCh7CiAgICAgIGZpcnN0TmFtZTogYXR0cigpLAog
        ICAgICBsYXN0TmFtZTogYXR0cignc3RyaW5nJyksCiAgICAgIGJpcnRoZGF5
        OiBhdHRyKCdkYXRlJykKICAgIH0pOwoKICAgIHZhciB0cmFuc2Zvcm1lZEF0
        dHJpYnV0ZXMgPSBFbWJlci5nZXQoQXBwLlBlcnNvbiwgJ3RyYW5zZm9ybWVk
        QXR0cmlidXRlcycpCgogICAgdHJhbnNmb3JtZWRBdHRyaWJ1dGVzLmZvckVh
        Y2goZnVuY3Rpb24oZmllbGQsIHR5cGUpIHsKICAgICAgY29uc29sZS5sb2co
        ZmllbGQsIHR5cGUpOwogICAgfSk7CgogICAgLy8gcHJpbnRzOgogICAgLy8g
        bGFzdE5hbWUgc3RyaW5nCiAgICAvLyBiaXJ0aGRheSBkYXRlCiAgICBgYGAK
        CiAgICBAcHJvcGVydHkgdHJhbnNmb3JtZWRBdHRyaWJ1dGVzCiAgICBAc3Rh
        dGljCiAgICBAdHlwZSB7RW1iZXIuTWFwfQogICAgQHJlYWRPbmx5CiAgKi8K
        ICB0cmFuc2Zvcm1lZEF0dHJpYnV0ZXM6IEVtYmVyLmNvbXB1dGVkKGZ1bmN0
        aW9uKCkgewogICAgdmFyIG1hcCA9IEVtYmVyLk1hcC5jcmVhdGUoKTsKCiAg
        ICB0aGlzLmVhY2hBdHRyaWJ1dGUoZnVuY3Rpb24oa2V5LCBtZXRhKSB7CiAg
        ICAgIGlmIChtZXRhLnR5cGUpIHsKICAgICAgICBtYXAuc2V0KGtleSwgbWV0
        YS50eXBlKTsKICAgICAgfQogICAgfSk7CgogICAgcmV0dXJuIG1hcDsKICB9
        KSwKCiAgLyoqCiAgICBJdGVyYXRlcyB0aHJvdWdoIHRoZSBhdHRyaWJ1dGVz
        IG9mIHRoZSBtb2RlbCwgY2FsbGluZyB0aGUgcGFzc2VkIGZ1bmN0aW9uIG9u
        IGVhY2gKICAgIGF0dHJpYnV0ZS4KCiAgICBUaGUgY2FsbGJhY2sgbWV0aG9k
        IHlvdSBwcm92aWRlIHNob3VsZCBoYXZlIHRoZSBmb2xsb3dpbmcgc2lnbmF0
        dXJlIChhbGwKICAgIHBhcmFtZXRlcnMgYXJlIG9wdGlvbmFsKToKCiAgICBg
        YGBqYXZhc2NyaXB0CiAgICBmdW5jdGlvbihuYW1lLCBtZXRhKTsKICAgIGBg
        YAoKICAgIC0gYG5hbWVgIHRoZSBuYW1lIG9mIHRoZSBjdXJyZW50IHByb3Bl
        cnR5IGluIHRoZSBpdGVyYXRpb24KICAgIC0gYG1ldGFgIHRoZSBtZXRhIG9i
        amVjdCBmb3IgdGhlIGF0dHJpYnV0ZSBwcm9wZXJ0eSBpbiB0aGUgaXRlcmF0
        aW9uCgogICAgTm90ZSB0aGF0IGluIGFkZGl0aW9uIHRvIGEgY2FsbGJhY2ss
        IHlvdSBjYW4gYWxzbyBwYXNzIGFuIG9wdGlvbmFsIHRhcmdldAogICAgb2Jq
        ZWN0IHRoYXQgd2lsbCBiZSBzZXQgYXMgYHRoaXNgIG9uIHRoZSBjb250ZXh0
        LgoKICAgIEV4YW1wbGUKCiAgICBgYGBqYXZhc2NyaXB0CiAgICBBcHAuUGVy
        c29uID0gRFMuTW9kZWwuZXh0ZW5kKHsKICAgICAgZmlyc3ROYW1lOiBhdHRy
        KCdzdHJpbmcnKSwKICAgICAgbGFzdE5hbWU6IGF0dHIoJ3N0cmluZycpLAog
        ICAgICBiaXJ0aGRheTogYXR0cignZGF0ZScpCiAgICB9KTsKCiAgICBBcHAu
        UGVyc29uLmVhY2hBdHRyaWJ1dGUoZnVuY3Rpb24obmFtZSwgbWV0YSkgewog
        ICAgICBjb25zb2xlLmxvZyhuYW1lLCBtZXRhKTsKICAgIH0pOwoKICAgIC8v
        IHByaW50czoKICAgIC8vIGZpcnN0TmFtZSB7dHlwZTogInN0cmluZyIsIGlz
        QXR0cmlidXRlOiB0cnVlLCBvcHRpb25zOiBPYmplY3QsIHBhcmVudFR5cGU6
        IGZ1bmN0aW9uLCBuYW1lOiAiZmlyc3ROYW1lIn0KICAgIC8vIGxhc3ROYW1l
        IHt0eXBlOiAic3RyaW5nIiwgaXNBdHRyaWJ1dGU6IHRydWUsIG9wdGlvbnM6
        IE9iamVjdCwgcGFyZW50VHlwZTogZnVuY3Rpb24sIG5hbWU6ICJsYXN0TmFt
        ZSJ9CiAgICAvLyBiaXJ0aGRheSB7dHlwZTogImRhdGUiLCBpc0F0dHJpYnV0
        ZTogdHJ1ZSwgb3B0aW9uczogT2JqZWN0LCBwYXJlbnRUeXBlOiBmdW5jdGlv
        biwgbmFtZTogImJpcnRoZGF5In0KICAgYGBgCgogICAgQG1ldGhvZCBlYWNo
        QXR0cmlidXRlCiAgICBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjayBUaGUg
        Y2FsbGJhY2sgdG8gZXhlY3V0ZQogICAgQHBhcmFtIHtPYmplY3R9IFt0YXJn
        ZXRdIFRoZSB0YXJnZXQgb2JqZWN0IHRvIHVzZQogICAgQHN0YXRpYwogICov
        CiAgZWFjaEF0dHJpYnV0ZTogZnVuY3Rpb24oY2FsbGJhY2ssIGJpbmRpbmcp
        IHsKICAgIGdldCh0aGlzLCAnYXR0cmlidXRlcycpLmZvckVhY2goZnVuY3Rp
        b24obmFtZSwgbWV0YSkgewogICAgICBjYWxsYmFjay5jYWxsKGJpbmRpbmcs
        IG5hbWUsIG1ldGEpOwogICAgfSwgYmluZGluZyk7CiAgfSwKCiAgLyoqCiAg
        ICBJdGVyYXRlcyB0aHJvdWdoIHRoZSB0cmFuc2Zvcm1lZEF0dHJpYnV0ZXMg
        b2YgdGhlIG1vZGVsLCBjYWxsaW5nCiAgICB0aGUgcGFzc2VkIGZ1bmN0aW9u
        IG9uIGVhY2ggYXR0cmlidXRlLiBOb3RlIHRoZSBjYWxsYmFjayB3aWxsIG5v
        dCBiZQogICAgY2FsbGVkIGZvciBhbnkgYXR0cmlidXRlcyB0aGF0IGRvIG5v
        dCBoYXZlIGFuIHRyYW5zZm9ybWF0aW9uIHR5cGUuCgogICAgVGhlIGNhbGxi
        YWNrIG1ldGhvZCB5b3UgcHJvdmlkZSBzaG91bGQgaGF2ZSB0aGUgZm9sbG93
        aW5nIHNpZ25hdHVyZSAoYWxsCiAgICBwYXJhbWV0ZXJzIGFyZSBvcHRpb25h
        bCk6CgogICAgYGBgamF2YXNjcmlwdAogICAgZnVuY3Rpb24obmFtZSwgdHlw
        ZSk7CiAgICBgYGAKCiAgICAtIGBuYW1lYCB0aGUgbmFtZSBvZiB0aGUgY3Vy
        cmVudCBwcm9wZXJ0eSBpbiB0aGUgaXRlcmF0aW9uCiAgICAtIGB0eXBlYCBh
        IHN0cmluZyBjb250YWluaW5nIHRoZSBuYW1lIG9mIHRoZSB0eXBlIG9mIHRy
        YW5zZm9ybWVkCiAgICAgIGFwcGxpZWQgdG8gdGhlIGF0dHJpYnV0ZQoKICAg
        IE5vdGUgdGhhdCBpbiBhZGRpdGlvbiB0byBhIGNhbGxiYWNrLCB5b3UgY2Fu
        IGFsc28gcGFzcyBhbiBvcHRpb25hbCB0YXJnZXQKICAgIG9iamVjdCB0aGF0
        IHdpbGwgYmUgc2V0IGFzIGB0aGlzYCBvbiB0aGUgY29udGV4dC4KCiAgICBF
        eGFtcGxlCgogICAgYGBgamF2YXNjcmlwdAogICAgQXBwLlBlcnNvbiA9IERT
        Lk1vZGVsLmV4dGVuZCh7CiAgICAgIGZpcnN0TmFtZTogYXR0cigpLAogICAg
        ICBsYXN0TmFtZTogYXR0cignc3RyaW5nJyksCiAgICAgIGJpcnRoZGF5OiBh
        dHRyKCdkYXRlJykKICAgIH0pOwoKICAgIEFwcC5QZXJzb24uZWFjaFRyYW5z
        Zm9ybWVkQXR0cmlidXRlKGZ1bmN0aW9uKG5hbWUsIHR5cGUpIHsKICAgICAg
        Y29uc29sZS5sb2cobmFtZSwgdHlwZSk7CiAgICB9KTsKCiAgICAvLyBwcmlu
        dHM6CiAgICAvLyBsYXN0TmFtZSBzdHJpbmcKICAgIC8vIGJpcnRoZGF5IGRh
        dGUKICAgYGBgCgogICAgQG1ldGhvZCBlYWNoVHJhbnNmb3JtZWRBdHRyaWJ1
        dGUKICAgIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrIFRoZSBjYWxsYmFj
        ayB0byBleGVjdXRlCiAgICBAcGFyYW0ge09iamVjdH0gW3RhcmdldF0gVGhl
        IHRhcmdldCBvYmplY3QgdG8gdXNlCiAgICBAc3RhdGljCiAgKi8KICBlYWNo
        VHJhbnNmb3JtZWRBdHRyaWJ1dGU6IGZ1bmN0aW9uKGNhbGxiYWNrLCBiaW5k
        aW5nKSB7CiAgICBnZXQodGhpcywgJ3RyYW5zZm9ybWVkQXR0cmlidXRlcycp
        LmZvckVhY2goZnVuY3Rpb24obmFtZSwgdHlwZSkgewogICAgICBjYWxsYmFj
        ay5jYWxsKGJpbmRpbmcsIG5hbWUsIHR5cGUpOwogICAgfSk7CiAgfQp9KTsK
        CgpEUy5Nb2RlbC5yZW9wZW4oewogIGVhY2hBdHRyaWJ1dGU6IGZ1bmN0aW9u
        KGNhbGxiYWNrLCBiaW5kaW5nKSB7CiAgICB0aGlzLmNvbnN0cnVjdG9yLmVh
        Y2hBdHRyaWJ1dGUoY2FsbGJhY2ssIGJpbmRpbmcpOwogIH0KfSk7CgpmdW5j
        dGlvbiBnZXREZWZhdWx0VmFsdWUocmVjb3JkLCBvcHRpb25zLCBrZXkpIHsK
        ICBpZiAodHlwZW9mIG9wdGlvbnMuZGVmYXVsdFZhbHVlID09PSAiZnVuY3Rp
        b24iKSB7CiAgICByZXR1cm4gb3B0aW9ucy5kZWZhdWx0VmFsdWUoKTsKICB9
        IGVsc2UgewogICAgcmV0dXJuIG9wdGlvbnMuZGVmYXVsdFZhbHVlOwogIH0K
        fQoKZnVuY3Rpb24gaGFzVmFsdWUocmVjb3JkLCBrZXkpIHsKICByZXR1cm4g
        cmVjb3JkLl9hdHRyaWJ1dGVzLmhhc093blByb3BlcnR5KGtleSkgfHwKICAg
        ICAgICAgcmVjb3JkLl9pbkZsaWdodEF0dHJpYnV0ZXMuaGFzT3duUHJvcGVy
        dHkoa2V5KSB8fAogICAgICAgICByZWNvcmQuX2RhdGEuaGFzT3duUHJvcGVy
        dHkoa2V5KTsKfQoKZnVuY3Rpb24gZ2V0VmFsdWUocmVjb3JkLCBrZXkpIHsK
        ICBpZiAocmVjb3JkLl9hdHRyaWJ1dGVzLmhhc093blByb3BlcnR5KGtleSkp
        IHsKICAgIHJldHVybiByZWNvcmQuX2F0dHJpYnV0ZXNba2V5XTsKICB9IGVs
        c2UgaWYgKHJlY29yZC5faW5GbGlnaHRBdHRyaWJ1dGVzLmhhc093blByb3Bl
        cnR5KGtleSkpIHsKICAgIHJldHVybiByZWNvcmQuX2luRmxpZ2h0QXR0cmli
        dXRlc1trZXldOwogIH0gZWxzZSB7CiAgICByZXR1cm4gcmVjb3JkLl9kYXRh
        W2tleV07CiAgfQp9CgovKioKICBgRFMuYXR0cmAgZGVmaW5lcyBhbiBhdHRy
        aWJ1dGUgb24gYSBbRFMuTW9kZWxdKERTLk1vZGVsLmh0bWwpLgogIEJ5IGRl
        ZmF1bHQsIGF0dHJpYnV0ZXMgYXJlIHBhc3NlZCB0aHJvdWdoIGFzLWlzLCBo
        b3dldmVyIHlvdSBjYW4gc3BlY2lmeSBhbgogIG9wdGlvbmFsIHR5cGUgdG8g
        aGF2ZSB0aGUgdmFsdWUgYXV0b21hdGljYWxseSB0cmFuc2Zvcm1lZC4KICBF
        bWJlciBEYXRhIHNoaXBzIHdpdGggZm91ciBiYXNpYyB0cmFuc2Zvcm0gdHlw
        ZXM6IGBzdHJpbmdgLCBgbnVtYmVyYCwKICBgYm9vbGVhbmAgYW5kIGBkYXRl
        YC4gWW91IGNhbiBkZWZpbmUgeW91ciBvd24gdHJhbnNmb3JtcyBieSBzdWJj
        bGFzc2luZwogIFtEUy5UcmFuc2Zvcm1dKERTLlRyYW5zZm9ybS5odG1sKS4K
        CiAgYERTLmF0dHJgIHRha2VzIGFuIG9wdGlvbmFsIGhhc2ggYXMgYSBzZWNv
        bmQgcGFyYW1ldGVyLCBjdXJyZW50bHkKICBzdXBwb3J0ZWQgb3B0aW9ucyBh
        cmU6CgogIC0gYGRlZmF1bHRWYWx1ZWA6IFBhc3MgYSBzdHJpbmcgb3IgYSBm
        dW5jdGlvbiB0byBiZSBjYWxsZWQgdG8gc2V0IHRoZSBhdHRyaWJ1dGUKICAg
        ICAgICAgICAgICAgICAgICB0byBhIGRlZmF1bHQgdmFsdWUgaWYgbm9uZSBp
        cyBzdXBwbGllZC4KCiAgRXhhbXBsZQoKICBgYGBqYXZhc2NyaXB0CiAgdmFy
        IGF0dHIgPSBEUy5hdHRyOwoKICBBcHAuVXNlciA9IERTLk1vZGVsLmV4dGVu
        ZCh7CiAgICB1c2VybmFtZTogYXR0cignc3RyaW5nJyksCiAgICBlbWFpbDog
        YXR0cignc3RyaW5nJyksCiAgICB2ZXJpZmllZDogYXR0cignYm9vbGVhbics
        IHtkZWZhdWx0VmFsdWU6IGZhbHNlfSkKICB9KTsKICBgYGAKCiAgQG5hbWVz
        cGFjZQogIEBtZXRob2QgYXR0cgogIEBmb3IgRFMKICBAcGFyYW0ge1N0cmlu
        Z30gdHlwZSB0aGUgYXR0cmlidXRlIHR5cGUKICBAcGFyYW0ge09iamVjdH0g
        b3B0aW9ucyBhIGhhc2ggb2Ygb3B0aW9ucwogIEByZXR1cm4ge0F0dHJpYnV0
        ZX0KKi8KCkRTLmF0dHIgPSBmdW5jdGlvbih0eXBlLCBvcHRpb25zKSB7CiAg
        b3B0aW9ucyA9IG9wdGlvbnMgfHwge307CgogIHZhciBtZXRhID0gewogICAg
        dHlwZTogdHlwZSwKICAgIGlzQXR0cmlidXRlOiB0cnVlLAogICAgb3B0aW9u
        czogb3B0aW9ucwogIH07CgogIHJldHVybiBFbWJlci5jb21wdXRlZChmdW5j
        dGlvbihrZXksIHZhbHVlKSB7CiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+
        IDEpIHsKICAgICAgRW1iZXIuYXNzZXJ0KCJZb3UgbWF5IG5vdCBzZXQgYGlk
        YCBhcyBhbiBhdHRyaWJ1dGUgb24geW91ciBtb2RlbC4gUGxlYXNlIHJlbW92
        ZSBhbnkgbGluZXMgdGhhdCBsb29rIGxpa2U6IGBpZDogRFMuYXR0cignPHR5
        cGU+JylgIGZyb20gIiArIHRoaXMuY29uc3RydWN0b3IudG9TdHJpbmcoKSwg
        a2V5ICE9PSAnaWQnKTsKICAgICAgdmFyIG9sZFZhbHVlID0gdGhpcy5fYXR0
        cmlidXRlc1trZXldIHx8IHRoaXMuX2luRmxpZ2h0QXR0cmlidXRlc1trZXld
        IHx8IHRoaXMuX2RhdGFba2V5XTsKCiAgICAgIHRoaXMuc2VuZCgnZGlkU2V0
        UHJvcGVydHknLCB7CiAgICAgICAgbmFtZToga2V5LAogICAgICAgIG9sZFZh
        bHVlOiBvbGRWYWx1ZSwKICAgICAgICBvcmlnaW5hbFZhbHVlOiB0aGlzLl9k
        YXRhW2tleV0sCiAgICAgICAgdmFsdWU6IHZhbHVlCiAgICAgIH0pOwoKICAg
        ICAgdGhpcy5fYXR0cmlidXRlc1trZXldID0gdmFsdWU7CiAgICAgIHJldHVy
        biB2YWx1ZTsKICAgIH0gZWxzZSBpZiAoaGFzVmFsdWUodGhpcywga2V5KSkg
        ewogICAgICByZXR1cm4gZ2V0VmFsdWUodGhpcywga2V5KTsKICAgIH0gZWxz
        ZSB7CiAgICAgIHJldHVybiBnZXREZWZhdWx0VmFsdWUodGhpcywgb3B0aW9u
        cywga2V5KTsKICAgIH0KCiAgLy8gYGRhdGFgIGlzIG5ldmVyIHNldCBkaXJl
        Y3RseS4gSG93ZXZlciwgaXQgbWF5IGJlCiAgLy8gaW52YWxpZGF0ZWQgZnJv
        bSB0aGUgc3RhdGUgbWFuYWdlcidzIHNldERhdGEKICAvLyBldmVudC4KICB9
        KS5wcm9wZXJ0eSgnZGF0YScpLm1ldGEobWV0YSk7Cn07CgoKfSkoKTsKCgoK
        KGZ1bmN0aW9uKCkgewovKioKICBAbW9kdWxlIGVtYmVyLWRhdGEKKi8KCn0p
        KCk7CgoKCihmdW5jdGlvbigpIHsKLyoqCiAgQG1vZHVsZSBlbWJlci1kYXRh
        CiovCgovKioKICBBbiBBdHRyaWJ1dGVDaGFuZ2Ugb2JqZWN0IGlzIGNyZWF0
        ZWQgd2hlbmV2ZXIgYSByZWNvcmQncwogIGF0dHJpYnV0ZSBjaGFuZ2VzIHZh
        bHVlLiBJdCBpcyB1c2VkIHRvIHRyYWNrIGNoYW5nZXMgdG8gYQogIHJlY29y
        ZCBiZXR3ZWVuIHRyYW5zYWN0aW9uIGNvbW1pdHMuCgogIEBjbGFzcyBBdHRy
        aWJ1dGVDaGFuZ2UKICBAbmFtZXNwYWNlIERTCiAgQHByaXZhdGUKICBAY29u
        c3RydWN0b3IKKi8KdmFyIEF0dHJpYnV0ZUNoYW5nZSA9IERTLkF0dHJpYnV0
        ZUNoYW5nZSA9IGZ1bmN0aW9uKG9wdGlvbnMpIHsKICB0aGlzLnJlY29yZCA9
        IG9wdGlvbnMucmVjb3JkOwogIHRoaXMuc3RvcmUgPSBvcHRpb25zLnN0b3Jl
        OwogIHRoaXMubmFtZSA9IG9wdGlvbnMubmFtZTsKICB0aGlzLnZhbHVlID0g
        b3B0aW9ucy52YWx1ZTsKICB0aGlzLm9sZFZhbHVlID0gb3B0aW9ucy5vbGRW
        YWx1ZTsKfTsKCkF0dHJpYnV0ZUNoYW5nZS5jcmVhdGVDaGFuZ2UgPSBmdW5j
        dGlvbihvcHRpb25zKSB7CiAgcmV0dXJuIG5ldyBBdHRyaWJ1dGVDaGFuZ2Uo
        b3B0aW9ucyk7Cn07CgpBdHRyaWJ1dGVDaGFuZ2UucHJvdG90eXBlID0gewog
        IHN5bmM6IGZ1bmN0aW9uKCkgewogICAgaWYgKHRoaXMudmFsdWUgIT09IHRo
        aXMub2xkVmFsdWUpIHsKICAgICAgdGhpcy5yZWNvcmQuc2VuZCgnYmVjb21l
        RGlydHknKTsKICAgICAgdGhpcy5yZWNvcmQudXBkYXRlUmVjb3JkQXJyYXlz
        TGF0ZXIoKTsKICAgIH0KCiAgICAvLyBUT0RPOiBVc2UgdGhpcyBvYmplY3Qg
        aW4gdGhlIGNvbW1pdCBwcm9jZXNzCiAgICB0aGlzLmRlc3Ryb3koKTsKICB9
        LAoKICAvKioKICAgIElmIHRoZSBBdHRyaWJ1dGVDaGFuZ2UgaXMgZGVzdHJv
        eWVkIChlaXRoZXIgYnkgYmVpbmcgcm9sbGVkIGJhY2sKICAgIG9yIGJlaW5n
        IGNvbW1pdHRlZCksIHJlbW92ZSBpdCBmcm9tIHRoZSBsaXN0IG9mIHBlbmRp
        bmcgY2hhbmdlcwogICAgb24gdGhlIHJlY29yZC4KCiAgICBAbWV0aG9kIGRl
        c3Ryb3kKICAqLwogIGRlc3Ryb3k6IGZ1bmN0aW9uKCkgewogICAgZGVsZXRl
        IHRoaXMucmVjb3JkLl9jaGFuZ2VzVG9TeW5jW3RoaXMubmFtZV07CiAgfQp9
        OwoKfSkoKTsKCgoKKGZ1bmN0aW9uKCkgewovKioKICBAbW9kdWxlIGVtYmVy
        LWRhdGEKKi8KCnZhciBnZXQgPSBFbWJlci5nZXQsIHNldCA9IEVtYmVyLnNl
        dDsKdmFyIGZvckVhY2ggPSBFbWJlci5FbnVtZXJhYmxlVXRpbHMuZm9yRWFj
        aDsKCi8qKgogIEBjbGFzcyBSZWxhdGlvbnNoaXBDaGFuZ2UKICBAbmFtZXNw
        YWNlIERTCiAgQHByaXZhdGUKICBAY29uc3RydWN0b3IKKi8KRFMuUmVsYXRp
        b25zaGlwQ2hhbmdlID0gZnVuY3Rpb24ob3B0aW9ucykgewogIHRoaXMucGFy
        ZW50UmVjb3JkID0gb3B0aW9ucy5wYXJlbnRSZWNvcmQ7CiAgdGhpcy5jaGls
        ZFJlY29yZCA9IG9wdGlvbnMuY2hpbGRSZWNvcmQ7CiAgdGhpcy5maXJzdFJl
        Y29yZCA9IG9wdGlvbnMuZmlyc3RSZWNvcmQ7CiAgdGhpcy5maXJzdFJlY29y
        ZEtpbmQgPSBvcHRpb25zLmZpcnN0UmVjb3JkS2luZDsKICB0aGlzLmZpcnN0
        UmVjb3JkTmFtZSA9IG9wdGlvbnMuZmlyc3RSZWNvcmROYW1lOwogIHRoaXMu
        c2Vjb25kUmVjb3JkID0gb3B0aW9ucy5zZWNvbmRSZWNvcmQ7CiAgdGhpcy5z
        ZWNvbmRSZWNvcmRLaW5kID0gb3B0aW9ucy5zZWNvbmRSZWNvcmRLaW5kOwog
        IHRoaXMuc2Vjb25kUmVjb3JkTmFtZSA9IG9wdGlvbnMuc2Vjb25kUmVjb3Jk
        TmFtZTsKICB0aGlzLmNoYW5nZVR5cGUgPSBvcHRpb25zLmNoYW5nZVR5cGU7
        CiAgdGhpcy5zdG9yZSA9IG9wdGlvbnMuc3RvcmU7CgogIHRoaXMuY29tbWl0
        dGVkID0ge307Cn07CgovKioKICBAY2xhc3MgUmVsYXRpb25zaGlwQ2hhbmdl
        QWRkCiAgQG5hbWVzcGFjZSBEUwogIEBwcml2YXRlCiAgQGNvbnN0cnVjdG9y
        CiovCkRTLlJlbGF0aW9uc2hpcENoYW5nZUFkZCA9IGZ1bmN0aW9uKG9wdGlv
        bnMpewogIERTLlJlbGF0aW9uc2hpcENoYW5nZS5jYWxsKHRoaXMsIG9wdGlv
        bnMpOwp9OwoKLyoqCiAgQGNsYXNzIFJlbGF0aW9uc2hpcENoYW5nZVJlbW92
        ZQogIEBuYW1lc3BhY2UgRFMKICBAcHJpdmF0ZQogIEBjb25zdHJ1Y3Rvcgoq
        LwpEUy5SZWxhdGlvbnNoaXBDaGFuZ2VSZW1vdmUgPSBmdW5jdGlvbihvcHRp
        b25zKXsKICBEUy5SZWxhdGlvbnNoaXBDaGFuZ2UuY2FsbCh0aGlzLCBvcHRp
        b25zKTsKfTsKCkRTLlJlbGF0aW9uc2hpcENoYW5nZS5jcmVhdGUgPSBmdW5j
        dGlvbihvcHRpb25zKSB7CiAgcmV0dXJuIG5ldyBEUy5SZWxhdGlvbnNoaXBD
        aGFuZ2Uob3B0aW9ucyk7Cn07CgpEUy5SZWxhdGlvbnNoaXBDaGFuZ2VBZGQu
        Y3JlYXRlID0gZnVuY3Rpb24ob3B0aW9ucykgewogIHJldHVybiBuZXcgRFMu
        UmVsYXRpb25zaGlwQ2hhbmdlQWRkKG9wdGlvbnMpOwp9OwoKRFMuUmVsYXRp
        b25zaGlwQ2hhbmdlUmVtb3ZlLmNyZWF0ZSA9IGZ1bmN0aW9uKG9wdGlvbnMp
        IHsKICByZXR1cm4gbmV3IERTLlJlbGF0aW9uc2hpcENoYW5nZVJlbW92ZShv
        cHRpb25zKTsKfTsKCkRTLk9uZVRvTWFueUNoYW5nZSA9IHt9OwpEUy5PbmVU
        b05vbmVDaGFuZ2UgPSB7fTsKRFMuTWFueVRvTm9uZUNoYW5nZSA9IHt9OwpE
        Uy5PbmVUb09uZUNoYW5nZSA9IHt9OwpEUy5NYW55VG9NYW55Q2hhbmdlID0g
        e307CgpEUy5SZWxhdGlvbnNoaXBDaGFuZ2UuX2NyZWF0ZUNoYW5nZSA9IGZ1
        bmN0aW9uKG9wdGlvbnMpewogIGlmKG9wdGlvbnMuY2hhbmdlVHlwZSA9PT0g
        ImFkZCIpewogICAgcmV0dXJuIERTLlJlbGF0aW9uc2hpcENoYW5nZUFkZC5j
        cmVhdGUob3B0aW9ucyk7CiAgfQogIGlmKG9wdGlvbnMuY2hhbmdlVHlwZSA9
        PT0gInJlbW92ZSIpewogICAgcmV0dXJuIERTLlJlbGF0aW9uc2hpcENoYW5n
        ZVJlbW92ZS5jcmVhdGUob3B0aW9ucyk7CiAgfQp9OwoKCkRTLlJlbGF0aW9u
        c2hpcENoYW5nZS5kZXRlcm1pbmVSZWxhdGlvbnNoaXBUeXBlID0gZnVuY3Rp
        b24ocmVjb3JkVHlwZSwga25vd25TaWRlKXsKICB2YXIga25vd25LZXkgPSBr
        bm93blNpZGUua2V5LCBrZXksIG90aGVyS2luZDsKICB2YXIga25vd25LaW5k
        ID0ga25vd25TaWRlLmtpbmQ7CgogIHZhciBpbnZlcnNlID0gcmVjb3JkVHlw
        ZS5pbnZlcnNlRm9yKGtub3duS2V5KTsKCiAgaWYgKGludmVyc2UpewogICAg
        a2V5ID0gaW52ZXJzZS5uYW1lOwogICAgb3RoZXJLaW5kID0gaW52ZXJzZS5r
        aW5kOwogIH0KCiAgaWYgKCFpbnZlcnNlKXsKICAgIHJldHVybiBrbm93bktp
        bmQgPT09ICJiZWxvbmdzVG8iID8gIm9uZVRvTm9uZSIgOiAibWFueVRvTm9u
        ZSI7CiAgfQogIGVsc2V7CiAgICBpZihvdGhlcktpbmQgPT09ICJiZWxvbmdz
        VG8iKXsKICAgICAgcmV0dXJuIGtub3duS2luZCA9PT0gImJlbG9uZ3NUbyIg
        PyAib25lVG9PbmUiIDogIm1hbnlUb09uZSI7CiAgICB9CiAgICBlbHNlewog
        ICAgICByZXR1cm4ga25vd25LaW5kID09PSAiYmVsb25nc1RvIiA/ICJvbmVU
        b01hbnkiIDogIm1hbnlUb01hbnkiOwogICAgfQogIH0KCn07CgpEUy5SZWxh
        dGlvbnNoaXBDaGFuZ2UuY3JlYXRlQ2hhbmdlID0gZnVuY3Rpb24oZmlyc3RS
        ZWNvcmQsIHNlY29uZFJlY29yZCwgc3RvcmUsIG9wdGlvbnMpewogIC8vIEdl
        dCB0aGUgdHlwZSBvZiB0aGUgY2hpbGQgYmFzZWQgb24gdGhlIGNoaWxkJ3Mg
        Y2xpZW50IElECiAgdmFyIGZpcnN0UmVjb3JkVHlwZSA9IGZpcnN0UmVjb3Jk
        LmNvbnN0cnVjdG9yLCBjaGFuZ2VUeXBlOwogIGNoYW5nZVR5cGUgPSBEUy5S
        ZWxhdGlvbnNoaXBDaGFuZ2UuZGV0ZXJtaW5lUmVsYXRpb25zaGlwVHlwZShm
        aXJzdFJlY29yZFR5cGUsIG9wdGlvbnMpOwogIGlmIChjaGFuZ2VUeXBlID09
        PSAib25lVG9NYW55Iil7CiAgICByZXR1cm4gRFMuT25lVG9NYW55Q2hhbmdl
        LmNyZWF0ZUNoYW5nZShmaXJzdFJlY29yZCwgc2Vjb25kUmVjb3JkLCBzdG9y
        ZSwgb3B0aW9ucyk7CiAgfQogIGVsc2UgaWYgKGNoYW5nZVR5cGUgPT09ICJt
        YW55VG9PbmUiKXsKICAgIHJldHVybiBEUy5PbmVUb01hbnlDaGFuZ2UuY3Jl
        YXRlQ2hhbmdlKHNlY29uZFJlY29yZCwgZmlyc3RSZWNvcmQsIHN0b3JlLCBv
        cHRpb25zKTsKICB9CiAgZWxzZSBpZiAoY2hhbmdlVHlwZSA9PT0gIm9uZVRv
        Tm9uZSIpewogICAgcmV0dXJuIERTLk9uZVRvTm9uZUNoYW5nZS5jcmVhdGVD
        aGFuZ2UoZmlyc3RSZWNvcmQsIHNlY29uZFJlY29yZCwgc3RvcmUsIG9wdGlv
        bnMpOwogIH0KICBlbHNlIGlmIChjaGFuZ2VUeXBlID09PSAibWFueVRvTm9u
        ZSIpewogICAgcmV0dXJuIERTLk1hbnlUb05vbmVDaGFuZ2UuY3JlYXRlQ2hh
        bmdlKGZpcnN0UmVjb3JkLCBzZWNvbmRSZWNvcmQsIHN0b3JlLCBvcHRpb25z
        KTsKICB9CiAgZWxzZSBpZiAoY2hhbmdlVHlwZSA9PT0gIm9uZVRvT25lIil7
        CiAgICByZXR1cm4gRFMuT25lVG9PbmVDaGFuZ2UuY3JlYXRlQ2hhbmdlKGZp
        cnN0UmVjb3JkLCBzZWNvbmRSZWNvcmQsIHN0b3JlLCBvcHRpb25zKTsKICB9
        CiAgZWxzZSBpZiAoY2hhbmdlVHlwZSA9PT0gIm1hbnlUb01hbnkiKXsKICAg
        IHJldHVybiBEUy5NYW55VG9NYW55Q2hhbmdlLmNyZWF0ZUNoYW5nZShmaXJz
        dFJlY29yZCwgc2Vjb25kUmVjb3JkLCBzdG9yZSwgb3B0aW9ucyk7CiAgfQp9
        OwoKRFMuT25lVG9Ob25lQ2hhbmdlLmNyZWF0ZUNoYW5nZSA9IGZ1bmN0aW9u
        KGNoaWxkUmVjb3JkLCBwYXJlbnRSZWNvcmQsIHN0b3JlLCBvcHRpb25zKSB7
        CiAgdmFyIGtleSA9IG9wdGlvbnMua2V5OwogIHZhciBjaGFuZ2UgPSBEUy5S
        ZWxhdGlvbnNoaXBDaGFuZ2UuX2NyZWF0ZUNoYW5nZSh7CiAgICAgIHBhcmVu
        dFJlY29yZDogcGFyZW50UmVjb3JkLAogICAgICBjaGlsZFJlY29yZDogY2hp
        bGRSZWNvcmQsCiAgICAgIGZpcnN0UmVjb3JkOiBjaGlsZFJlY29yZCwKICAg
        ICAgc3RvcmU6IHN0b3JlLAogICAgICBjaGFuZ2VUeXBlOiBvcHRpb25zLmNo
        YW5nZVR5cGUsCiAgICAgIGZpcnN0UmVjb3JkTmFtZToga2V5LAogICAgICBm
        aXJzdFJlY29yZEtpbmQ6ICJiZWxvbmdzVG8iCiAgfSk7CgogIHN0b3JlLmFk
        ZFJlbGF0aW9uc2hpcENoYW5nZUZvcihjaGlsZFJlY29yZCwga2V5LCBwYXJl
        bnRSZWNvcmQsIG51bGwsIGNoYW5nZSk7CgogIHJldHVybiBjaGFuZ2U7Cn07
        CgpEUy5NYW55VG9Ob25lQ2hhbmdlLmNyZWF0ZUNoYW5nZSA9IGZ1bmN0aW9u
        KGNoaWxkUmVjb3JkLCBwYXJlbnRSZWNvcmQsIHN0b3JlLCBvcHRpb25zKSB7
        CiAgdmFyIGtleSA9IG9wdGlvbnMua2V5OwogIHZhciBjaGFuZ2UgPSBEUy5S
        ZWxhdGlvbnNoaXBDaGFuZ2UuX2NyZWF0ZUNoYW5nZSh7CiAgICAgIHBhcmVu
        dFJlY29yZDogY2hpbGRSZWNvcmQsCiAgICAgIGNoaWxkUmVjb3JkOiBwYXJl
        bnRSZWNvcmQsCiAgICAgIHNlY29uZFJlY29yZDogY2hpbGRSZWNvcmQsCiAg
        ICAgIHN0b3JlOiBzdG9yZSwKICAgICAgY2hhbmdlVHlwZTogb3B0aW9ucy5j
        aGFuZ2VUeXBlLAogICAgICBzZWNvbmRSZWNvcmROYW1lOiBvcHRpb25zLmtl
        eSwKICAgICAgc2Vjb25kUmVjb3JkS2luZDogImhhc01hbnkiCiAgfSk7Cgog
        IHN0b3JlLmFkZFJlbGF0aW9uc2hpcENoYW5nZUZvcihjaGlsZFJlY29yZCwg
        a2V5LCBwYXJlbnRSZWNvcmQsIG51bGwsIGNoYW5nZSk7CiAgcmV0dXJuIGNo
        YW5nZTsKfTsKCgpEUy5NYW55VG9NYW55Q2hhbmdlLmNyZWF0ZUNoYW5nZSA9
        IGZ1bmN0aW9uKGNoaWxkUmVjb3JkLCBwYXJlbnRSZWNvcmQsIHN0b3JlLCBv
        cHRpb25zKSB7CiAgLy8gSWYgdGhlIG5hbWUgb2YgdGhlIGJlbG9uZ3NUbyBz
        aWRlIG9mIHRoZSByZWxhdGlvbnNoaXAgaXMgc3BlY2lmaWVkLAogIC8vIHVz
        ZSB0aGF0CiAgLy8gSWYgdGhlIHR5cGUgb2YgdGhlIHBhcmVudCBpcyBzcGVj
        aWZpZWQsIGxvb2sgaXQgdXAgb24gdGhlIGNoaWxkJ3MgdHlwZQogIC8vIGRl
        ZmluaXRpb24uCiAgdmFyIGtleSA9IG9wdGlvbnMua2V5OwoKICB2YXIgY2hh
        bmdlID0gRFMuUmVsYXRpb25zaGlwQ2hhbmdlLl9jcmVhdGVDaGFuZ2Uoewog
        ICAgICBwYXJlbnRSZWNvcmQ6IHBhcmVudFJlY29yZCwKICAgICAgY2hpbGRS
        ZWNvcmQ6IGNoaWxkUmVjb3JkLAogICAgICBmaXJzdFJlY29yZDogY2hpbGRS
        ZWNvcmQsCiAgICAgIHNlY29uZFJlY29yZDogcGFyZW50UmVjb3JkLAogICAg
        ICBmaXJzdFJlY29yZEtpbmQ6ICJoYXNNYW55IiwKICAgICAgc2Vjb25kUmVj
        b3JkS2luZDogImhhc01hbnkiLAogICAgICBzdG9yZTogc3RvcmUsCiAgICAg
        IGNoYW5nZVR5cGU6IG9wdGlvbnMuY2hhbmdlVHlwZSwKICAgICAgZmlyc3RS
        ZWNvcmROYW1lOiAga2V5CiAgfSk7CgogIHN0b3JlLmFkZFJlbGF0aW9uc2hp
        cENoYW5nZUZvcihjaGlsZFJlY29yZCwga2V5LCBwYXJlbnRSZWNvcmQsIG51
        bGwsIGNoYW5nZSk7CgoKICByZXR1cm4gY2hhbmdlOwp9OwoKRFMuT25lVG9P
        bmVDaGFuZ2UuY3JlYXRlQ2hhbmdlID0gZnVuY3Rpb24oY2hpbGRSZWNvcmQs
        IHBhcmVudFJlY29yZCwgc3RvcmUsIG9wdGlvbnMpIHsKICB2YXIga2V5OwoK
        ICAvLyBJZiB0aGUgbmFtZSBvZiB0aGUgYmVsb25nc1RvIHNpZGUgb2YgdGhl
        IHJlbGF0aW9uc2hpcCBpcyBzcGVjaWZpZWQsCiAgLy8gdXNlIHRoYXQKICAv
        LyBJZiB0aGUgdHlwZSBvZiB0aGUgcGFyZW50IGlzIHNwZWNpZmllZCwgbG9v
        ayBpdCB1cCBvbiB0aGUgY2hpbGQncyB0eXBlCiAgLy8gZGVmaW5pdGlvbi4K
        ICBpZiAob3B0aW9ucy5wYXJlbnRUeXBlKSB7CiAgICBrZXkgPSBvcHRpb25z
        LnBhcmVudFR5cGUuaW52ZXJzZUZvcihvcHRpb25zLmtleSkubmFtZTsKICB9
        IGVsc2UgaWYgKG9wdGlvbnMua2V5KSB7CiAgICBrZXkgPSBvcHRpb25zLmtl
        eTsKICB9IGVsc2UgewogICAgRW1iZXIuYXNzZXJ0KCJZb3UgbXVzdCBwYXNz
        IGVpdGhlciBhIHBhcmVudFR5cGUgb3IgYmVsb25nc1RvTmFtZSBvcHRpb24g
        dG8gT25lVG9NYW55Q2hhbmdlLmZvckNoaWxkQW5kUGFyZW50IiwgZmFsc2Up
        OwogIH0KCiAgdmFyIGNoYW5nZSA9IERTLlJlbGF0aW9uc2hpcENoYW5nZS5f
        Y3JlYXRlQ2hhbmdlKHsKICAgICAgcGFyZW50UmVjb3JkOiBwYXJlbnRSZWNv
        cmQsCiAgICAgIGNoaWxkUmVjb3JkOiBjaGlsZFJlY29yZCwKICAgICAgZmly
        c3RSZWNvcmQ6IGNoaWxkUmVjb3JkLAogICAgICBzZWNvbmRSZWNvcmQ6IHBh
        cmVudFJlY29yZCwKICAgICAgZmlyc3RSZWNvcmRLaW5kOiAiYmVsb25nc1Rv
        IiwKICAgICAgc2Vjb25kUmVjb3JkS2luZDogImJlbG9uZ3NUbyIsCiAgICAg
        IHN0b3JlOiBzdG9yZSwKICAgICAgY2hhbmdlVHlwZTogb3B0aW9ucy5jaGFu
        Z2VUeXBlLAogICAgICBmaXJzdFJlY29yZE5hbWU6ICBrZXkKICB9KTsKCiAg
        c3RvcmUuYWRkUmVsYXRpb25zaGlwQ2hhbmdlRm9yKGNoaWxkUmVjb3JkLCBr
        ZXksIHBhcmVudFJlY29yZCwgbnVsbCwgY2hhbmdlKTsKCgogIHJldHVybiBj
        aGFuZ2U7Cn07CgpEUy5PbmVUb09uZUNoYW5nZS5tYWludGFpbkludmFyaWFu
        dCA9IGZ1bmN0aW9uKG9wdGlvbnMsIHN0b3JlLCBjaGlsZFJlY29yZCwga2V5
        KXsKICBpZiAob3B0aW9ucy5jaGFuZ2VUeXBlID09PSAiYWRkIiAmJiBzdG9y
        ZS5yZWNvcmRJc01hdGVyaWFsaXplZChjaGlsZFJlY29yZCkpIHsKICAgIHZh
        ciBvbGRQYXJlbnQgPSBnZXQoY2hpbGRSZWNvcmQsIGtleSk7CiAgICBpZiAo
        b2xkUGFyZW50KXsKICAgICAgdmFyIGNvcnJlc3BvbmRpbmdDaGFuZ2UgPSBE
        Uy5PbmVUb09uZUNoYW5nZS5jcmVhdGVDaGFuZ2UoY2hpbGRSZWNvcmQsIG9s
        ZFBhcmVudCwgc3RvcmUsIHsKICAgICAgICAgIHBhcmVudFR5cGU6IG9wdGlv
        bnMucGFyZW50VHlwZSwKICAgICAgICAgIGhhc01hbnlOYW1lOiBvcHRpb25z
        Lmhhc01hbnlOYW1lLAogICAgICAgICAgY2hhbmdlVHlwZTogInJlbW92ZSIs
        CiAgICAgICAgICBrZXk6IG9wdGlvbnMua2V5CiAgICAgICAgfSk7CiAgICAg
        IHN0b3JlLmFkZFJlbGF0aW9uc2hpcENoYW5nZUZvcihjaGlsZFJlY29yZCwg
        a2V5LCBvcHRpb25zLnBhcmVudFJlY29yZCAsIG51bGwsIGNvcnJlc3BvbmRp
        bmdDaGFuZ2UpOwogICAgIGNvcnJlc3BvbmRpbmdDaGFuZ2Uuc3luYygpOwog
        ICAgfQogIH0KfTsKCkRTLk9uZVRvTWFueUNoYW5nZS5jcmVhdGVDaGFuZ2Ug
        PSBmdW5jdGlvbihjaGlsZFJlY29yZCwgcGFyZW50UmVjb3JkLCBzdG9yZSwg
        b3B0aW9ucykgewogIHZhciBrZXk7CgogIC8vIElmIHRoZSBuYW1lIG9mIHRo
        ZSBiZWxvbmdzVG8gc2lkZSBvZiB0aGUgcmVsYXRpb25zaGlwIGlzIHNwZWNp
        ZmllZCwKICAvLyB1c2UgdGhhdAogIC8vIElmIHRoZSB0eXBlIG9mIHRoZSBw
        YXJlbnQgaXMgc3BlY2lmaWVkLCBsb29rIGl0IHVwIG9uIHRoZSBjaGlsZCdz
        IHR5cGUKICAvLyBkZWZpbml0aW9uLgogIGlmIChvcHRpb25zLnBhcmVudFR5
        cGUpIHsKICAgIGtleSA9IG9wdGlvbnMucGFyZW50VHlwZS5pbnZlcnNlRm9y
        KG9wdGlvbnMua2V5KS5uYW1lOwogICAgRFMuT25lVG9NYW55Q2hhbmdlLm1h
        aW50YWluSW52YXJpYW50KCBvcHRpb25zLCBzdG9yZSwgY2hpbGRSZWNvcmQs
        IGtleSApOwogIH0gZWxzZSBpZiAob3B0aW9ucy5rZXkpIHsKICAgIGtleSA9
        IG9wdGlvbnMua2V5OwogIH0gZWxzZSB7CiAgICBFbWJlci5hc3NlcnQoIllv
        dSBtdXN0IHBhc3MgZWl0aGVyIGEgcGFyZW50VHlwZSBvciBiZWxvbmdzVG9O
        YW1lIG9wdGlvbiB0byBPbmVUb01hbnlDaGFuZ2UuZm9yQ2hpbGRBbmRQYXJl
        bnQiLCBmYWxzZSk7CiAgfQoKICB2YXIgY2hhbmdlID0gRFMuUmVsYXRpb25z
        aGlwQ2hhbmdlLl9jcmVhdGVDaGFuZ2UoewogICAgICBwYXJlbnRSZWNvcmQ6
        IHBhcmVudFJlY29yZCwKICAgICAgY2hpbGRSZWNvcmQ6IGNoaWxkUmVjb3Jk
        LAogICAgICBmaXJzdFJlY29yZDogY2hpbGRSZWNvcmQsCiAgICAgIHNlY29u
        ZFJlY29yZDogcGFyZW50UmVjb3JkLAogICAgICBmaXJzdFJlY29yZEtpbmQ6
        ICJiZWxvbmdzVG8iLAogICAgICBzZWNvbmRSZWNvcmRLaW5kOiAiaGFzTWFu
        eSIsCiAgICAgIHN0b3JlOiBzdG9yZSwKICAgICAgY2hhbmdlVHlwZTogb3B0
        aW9ucy5jaGFuZ2VUeXBlLAogICAgICBmaXJzdFJlY29yZE5hbWU6ICBrZXkK
        ICB9KTsKCiAgc3RvcmUuYWRkUmVsYXRpb25zaGlwQ2hhbmdlRm9yKGNoaWxk
        UmVjb3JkLCBrZXksIHBhcmVudFJlY29yZCwgY2hhbmdlLmdldFNlY29uZFJl
        Y29yZE5hbWUoKSwgY2hhbmdlKTsKCgogIHJldHVybiBjaGFuZ2U7Cn07CgoK
        RFMuT25lVG9NYW55Q2hhbmdlLm1haW50YWluSW52YXJpYW50ID0gZnVuY3Rp
        b24ob3B0aW9ucywgc3RvcmUsIGNoaWxkUmVjb3JkLCBrZXkpewogIGlmIChv
        cHRpb25zLmNoYW5nZVR5cGUgPT09ICJhZGQiICYmIGNoaWxkUmVjb3JkKSB7
        CiAgICB2YXIgb2xkUGFyZW50ID0gZ2V0KGNoaWxkUmVjb3JkLCBrZXkpOwog
        ICAgaWYgKG9sZFBhcmVudCl7CiAgICAgIHZhciBjb3JyZXNwb25kaW5nQ2hh
        bmdlID0gRFMuT25lVG9NYW55Q2hhbmdlLmNyZWF0ZUNoYW5nZShjaGlsZFJl
        Y29yZCwgb2xkUGFyZW50LCBzdG9yZSwgewogICAgICAgICAgcGFyZW50VHlw
        ZTogb3B0aW9ucy5wYXJlbnRUeXBlLAogICAgICAgICAgaGFzTWFueU5hbWU6
        IG9wdGlvbnMuaGFzTWFueU5hbWUsCiAgICAgICAgICBjaGFuZ2VUeXBlOiAi
        cmVtb3ZlIiwKICAgICAgICAgIGtleTogb3B0aW9ucy5rZXkKICAgICAgICB9
        KTsKICAgICAgc3RvcmUuYWRkUmVsYXRpb25zaGlwQ2hhbmdlRm9yKGNoaWxk
        UmVjb3JkLCBrZXksIG9wdGlvbnMucGFyZW50UmVjb3JkLCBjb3JyZXNwb25k
        aW5nQ2hhbmdlLmdldFNlY29uZFJlY29yZE5hbWUoKSwgY29ycmVzcG9uZGlu
        Z0NoYW5nZSk7CiAgICAgIGNvcnJlc3BvbmRpbmdDaGFuZ2Uuc3luYygpOwog
        ICAgfQogIH0KfTsKCi8qKgogIEBjbGFzcyBSZWxhdGlvbnNoaXBDaGFuZ2UK
        ICBAbmFtZXNwYWNlIERTCiovCkRTLlJlbGF0aW9uc2hpcENoYW5nZS5wcm90
        b3R5cGUgPSB7CgogIGdldFNlY29uZFJlY29yZE5hbWU6IGZ1bmN0aW9uKCkg
        ewogICAgdmFyIG5hbWUgPSB0aGlzLnNlY29uZFJlY29yZE5hbWUsIHBhcmVu
        dDsKCiAgICBpZiAoIW5hbWUpIHsKICAgICAgcGFyZW50ID0gdGhpcy5zZWNv
        bmRSZWNvcmQ7CiAgICAgIGlmICghcGFyZW50KSB7IHJldHVybjsgfQoKICAg
        ICAgdmFyIGNoaWxkVHlwZSA9IHRoaXMuZmlyc3RSZWNvcmQuY29uc3RydWN0
        b3I7CiAgICAgIHZhciBpbnZlcnNlID0gY2hpbGRUeXBlLmludmVyc2VGb3Io
        dGhpcy5maXJzdFJlY29yZE5hbWUpOwogICAgICB0aGlzLnNlY29uZFJlY29y
        ZE5hbWUgPSBpbnZlcnNlLm5hbWU7CiAgICB9CgogICAgcmV0dXJuIHRoaXMu
        c2Vjb25kUmVjb3JkTmFtZTsKICB9LAoKICAvKioKICAgIEdldCB0aGUgbmFt
        ZSBvZiB0aGUgcmVsYXRpb25zaGlwIG9uIHRoZSBiZWxvbmdzVG8gc2lkZS4K
        CiAgICBAbWV0aG9kIGdldEZpcnN0UmVjb3JkTmFtZQogICAgQHJldHVybiB7
        U3RyaW5nfQogICovCiAgZ2V0Rmlyc3RSZWNvcmROYW1lOiBmdW5jdGlvbigp
        IHsKICAgIHZhciBuYW1lID0gdGhpcy5maXJzdFJlY29yZE5hbWU7CiAgICBy
        ZXR1cm4gbmFtZTsKICB9LAoKICAvKioKICAgIEBtZXRob2QgZGVzdHJveQog
        ICAgQHByaXZhdGUKICAqLwogIGRlc3Ryb3k6IGZ1bmN0aW9uKCkgewogICAg
        dmFyIGNoaWxkUmVjb3JkID0gdGhpcy5jaGlsZFJlY29yZCwKICAgICAgICBi
        ZWxvbmdzVG9OYW1lID0gdGhpcy5nZXRGaXJzdFJlY29yZE5hbWUoKSwKICAg
        ICAgICBoYXNNYW55TmFtZSA9IHRoaXMuZ2V0U2Vjb25kUmVjb3JkTmFtZSgp
        LAogICAgICAgIHN0b3JlID0gdGhpcy5zdG9yZTsKCiAgICBzdG9yZS5yZW1v
        dmVSZWxhdGlvbnNoaXBDaGFuZ2VGb3IoY2hpbGRSZWNvcmQsIGJlbG9uZ3NU
        b05hbWUsIHRoaXMucGFyZW50UmVjb3JkLCBoYXNNYW55TmFtZSwgdGhpcy5j
        aGFuZ2VUeXBlKTsKICB9LAoKICBnZXRTZWNvbmRSZWNvcmQ6IGZ1bmN0aW9u
        KCl7CiAgICByZXR1cm4gdGhpcy5zZWNvbmRSZWNvcmQ7CiAgfSwKCiAgLyoq
        CiAgICBAbWV0aG9kIGdldEZpcnN0UmVjb3JkCiAgICBAcHJpdmF0ZQogICov
        CiAgZ2V0Rmlyc3RSZWNvcmQ6IGZ1bmN0aW9uKCkgewogICAgcmV0dXJuIHRo
        aXMuZmlyc3RSZWNvcmQ7CiAgfSwKCiAgY29hbGVzY2U6IGZ1bmN0aW9uKCl7
        CiAgICB2YXIgcmVsYXRpb25zaGlwUGFpcnMgPSB0aGlzLnN0b3JlLnJlbGF0
        aW9uc2hpcENoYW5nZVBhaXJzRm9yKHRoaXMuZmlyc3RSZWNvcmQpOwogICAg
        Zm9yRWFjaChyZWxhdGlvbnNoaXBQYWlycywgZnVuY3Rpb24ocGFpcil7CiAg
        ICAgIHZhciBhZGRlZENoYW5nZSA9IHBhaXJbImFkZCJdOwogICAgICB2YXIg
        cmVtb3ZlZENoYW5nZSA9IHBhaXJbInJlbW92ZSJdOwogICAgICBpZihhZGRl
        ZENoYW5nZSAmJiByZW1vdmVkQ2hhbmdlKSB7CiAgICAgICAgYWRkZWRDaGFu
        Z2UuZGVzdHJveSgpOwogICAgICAgIHJlbW92ZWRDaGFuZ2UuZGVzdHJveSgp
        OwogICAgICB9CiAgICB9KTsKICB9Cn07CgpEUy5SZWxhdGlvbnNoaXBDaGFu
        Z2VBZGQucHJvdG90eXBlID0gRW1iZXIuY3JlYXRlKERTLlJlbGF0aW9uc2hp
        cENoYW5nZS5jcmVhdGUoe30pKTsKRFMuUmVsYXRpb25zaGlwQ2hhbmdlUmVt
        b3ZlLnByb3RvdHlwZSA9IEVtYmVyLmNyZWF0ZShEUy5SZWxhdGlvbnNoaXBD
        aGFuZ2UuY3JlYXRlKHt9KSk7CgovLyB0aGUgb2JqZWN0IGlzIGEgdmFsdWUs
        IGFuZCBub3QgYSBwcm9taXNlCmZ1bmN0aW9uIGlzVmFsdWUob2JqZWN0KSB7
        CiAgcmV0dXJuIHR5cGVvZiBvYmplY3QgPT09ICdvYmplY3QnICYmICghb2Jq
        ZWN0LnRoZW4gfHwgdHlwZW9mIG9iamVjdC50aGVuICE9PSAnZnVuY3Rpb24n
        KTsKfQoKRFMuUmVsYXRpb25zaGlwQ2hhbmdlQWRkLnByb3RvdHlwZS5jaGFu
        Z2VUeXBlID0gImFkZCI7CkRTLlJlbGF0aW9uc2hpcENoYW5nZUFkZC5wcm90
        b3R5cGUuc3luYyA9IGZ1bmN0aW9uKCkgewogIHZhciBzZWNvbmRSZWNvcmRO
        YW1lID0gdGhpcy5nZXRTZWNvbmRSZWNvcmROYW1lKCksCiAgICAgIGZpcnN0
        UmVjb3JkTmFtZSA9IHRoaXMuZ2V0Rmlyc3RSZWNvcmROYW1lKCksCiAgICAg
        IGZpcnN0UmVjb3JkID0gdGhpcy5nZXRGaXJzdFJlY29yZCgpLAogICAgICBz
        ZWNvbmRSZWNvcmQgPSB0aGlzLmdldFNlY29uZFJlY29yZCgpOwoKICAvL0Vt
        YmVyLmFzc2VydCgiWW91IHNwZWNpZmllZCBhIGhhc01hbnkgKCIgKyBoYXNN
        YW55TmFtZSArICIpIG9uICIgKyAoIWJlbG9uZ3NUb05hbWUgJiYgKG5ld1Bh
        cmVudCB8fCBvbGRQYXJlbnQgfHwgdGhpcy5sYXN0UGFyZW50KS5jb25zdHJ1
        Y3RvcikgKyAiIGJ1dCBkaWQgbm90IHNwZWNpZnkgYW4gaW52ZXJzZSBiZWxv
        bmdzVG8gb24gIiArIGNoaWxkLmNvbnN0cnVjdG9yLCBiZWxvbmdzVG9OYW1l
        KTsKICAvL0VtYmVyLmFzc2VydCgiWW91IHNwZWNpZmllZCBhIGJlbG9uZ3NU
        byAoIiArIGJlbG9uZ3NUb05hbWUgKyAiKSBvbiAiICsgY2hpbGQuY29uc3Ry
        dWN0b3IgKyAiIGJ1dCBkaWQgbm90IHNwZWNpZnkgYW4gaW52ZXJzZSBoYXNN
        YW55IG9uICIgKyAoIWhhc01hbnlOYW1lICYmIChuZXdQYXJlbnQgfHwgb2xk
        UGFyZW50IHx8IHRoaXMubGFzdFBhcmVudFJlY29yZCkuY29uc3RydWN0b3Ip
        LCBoYXNNYW55TmFtZSk7CgogIGlmIChzZWNvbmRSZWNvcmQgaW5zdGFuY2Vv
        ZiBEUy5Nb2RlbCAmJiBmaXJzdFJlY29yZCBpbnN0YW5jZW9mIERTLk1vZGVs
        KSB7CiAgICBpZih0aGlzLnNlY29uZFJlY29yZEtpbmQgPT09ICJiZWxvbmdz
        VG8iKXsKICAgICAgc2Vjb25kUmVjb3JkLnN1c3BlbmRSZWxhdGlvbnNoaXBP
        YnNlcnZlcnMoZnVuY3Rpb24oKXsKICAgICAgICBzZXQoc2Vjb25kUmVjb3Jk
        LCBzZWNvbmRSZWNvcmROYW1lLCBmaXJzdFJlY29yZCk7CiAgICAgIH0pOwoK
        ICAgICB9CiAgICAgZWxzZSBpZih0aGlzLnNlY29uZFJlY29yZEtpbmQgPT09
        ICJoYXNNYW55Iil7CiAgICAgIHNlY29uZFJlY29yZC5zdXNwZW5kUmVsYXRp
        b25zaGlwT2JzZXJ2ZXJzKGZ1bmN0aW9uKCl7CiAgICAgICAgdmFyIHJlbGF0
        aW9uc2hpcCA9IGdldChzZWNvbmRSZWNvcmQsIHNlY29uZFJlY29yZE5hbWUp
        OwogICAgICAgIGlmIChpc1ZhbHVlKHJlbGF0aW9uc2hpcCkpIHsgcmVsYXRp
        b25zaGlwLmFkZE9iamVjdChmaXJzdFJlY29yZCk7IH0KICAgICAgfSk7CiAg
        ICB9CiAgfQoKICBpZiAoZmlyc3RSZWNvcmQgaW5zdGFuY2VvZiBEUy5Nb2Rl
        bCAmJiBzZWNvbmRSZWNvcmQgaW5zdGFuY2VvZiBEUy5Nb2RlbCAmJiBnZXQo
        Zmlyc3RSZWNvcmQsIGZpcnN0UmVjb3JkTmFtZSkgIT09IHNlY29uZFJlY29y
        ZCkgewogICAgaWYodGhpcy5maXJzdFJlY29yZEtpbmQgPT09ICJiZWxvbmdz
        VG8iKXsKICAgICAgZmlyc3RSZWNvcmQuc3VzcGVuZFJlbGF0aW9uc2hpcE9i
        c2VydmVycyhmdW5jdGlvbigpewogICAgICAgIHNldChmaXJzdFJlY29yZCwg
        Zmlyc3RSZWNvcmROYW1lLCBzZWNvbmRSZWNvcmQpOwogICAgICB9KTsKICAg
        IH0KICAgIGVsc2UgaWYodGhpcy5maXJzdFJlY29yZEtpbmQgPT09ICJoYXNN
        YW55Iil7CiAgICAgIGZpcnN0UmVjb3JkLnN1c3BlbmRSZWxhdGlvbnNoaXBP
        YnNlcnZlcnMoZnVuY3Rpb24oKXsKICAgICAgICB2YXIgcmVsYXRpb25zaGlw
        ID0gZ2V0KGZpcnN0UmVjb3JkLCBmaXJzdFJlY29yZE5hbWUpOwogICAgICAg
        IGlmIChpc1ZhbHVlKHJlbGF0aW9uc2hpcCkpIHsgcmVsYXRpb25zaGlwLmFk
        ZE9iamVjdChzZWNvbmRSZWNvcmQpOyB9CiAgICAgIH0pOwogICAgfQogIH0K
        CiAgdGhpcy5jb2FsZXNjZSgpOwp9OwoKRFMuUmVsYXRpb25zaGlwQ2hhbmdl
        UmVtb3ZlLnByb3RvdHlwZS5jaGFuZ2VUeXBlID0gInJlbW92ZSI7CkRTLlJl
        bGF0aW9uc2hpcENoYW5nZVJlbW92ZS5wcm90b3R5cGUuc3luYyA9IGZ1bmN0
        aW9uKCkgewogIHZhciBzZWNvbmRSZWNvcmROYW1lID0gdGhpcy5nZXRTZWNv
        bmRSZWNvcmROYW1lKCksCiAgICAgIGZpcnN0UmVjb3JkTmFtZSA9IHRoaXMu
        Z2V0Rmlyc3RSZWNvcmROYW1lKCksCiAgICAgIGZpcnN0UmVjb3JkID0gdGhp
        cy5nZXRGaXJzdFJlY29yZCgpLAogICAgICBzZWNvbmRSZWNvcmQgPSB0aGlz
        LmdldFNlY29uZFJlY29yZCgpOwoKICAvL0VtYmVyLmFzc2VydCgiWW91IHNw
        ZWNpZmllZCBhIGhhc01hbnkgKCIgKyBoYXNNYW55TmFtZSArICIpIG9uICIg
        KyAoIWJlbG9uZ3NUb05hbWUgJiYgKG5ld1BhcmVudCB8fCBvbGRQYXJlbnQg
        fHwgdGhpcy5sYXN0UGFyZW50KS5jb25zdHJ1Y3RvcikgKyAiIGJ1dCBkaWQg
        bm90IHNwZWNpZnkgYW4gaW52ZXJzZSBiZWxvbmdzVG8gb24gIiArIGNoaWxk
        LmNvbnN0cnVjdG9yLCBiZWxvbmdzVG9OYW1lKTsKICAvL0VtYmVyLmFzc2Vy
        dCgiWW91IHNwZWNpZmllZCBhIGJlbG9uZ3NUbyAoIiArIGJlbG9uZ3NUb05h
        bWUgKyAiKSBvbiAiICsgY2hpbGQuY29uc3RydWN0b3IgKyAiIGJ1dCBkaWQg
        bm90IHNwZWNpZnkgYW4gaW52ZXJzZSBoYXNNYW55IG9uICIgKyAoIWhhc01h
        bnlOYW1lICYmIChuZXdQYXJlbnQgfHwgb2xkUGFyZW50IHx8IHRoaXMubGFz
        dFBhcmVudFJlY29yZCkuY29uc3RydWN0b3IpLCBoYXNNYW55TmFtZSk7Cgog
        IGlmIChzZWNvbmRSZWNvcmQgaW5zdGFuY2VvZiBEUy5Nb2RlbCAmJiBmaXJz
        dFJlY29yZCBpbnN0YW5jZW9mIERTLk1vZGVsKSB7CiAgICBpZih0aGlzLnNl
        Y29uZFJlY29yZEtpbmQgPT09ICJiZWxvbmdzVG8iKXsKICAgICAgc2Vjb25k
        UmVjb3JkLnN1c3BlbmRSZWxhdGlvbnNoaXBPYnNlcnZlcnMoZnVuY3Rpb24o
        KXsKICAgICAgICBzZXQoc2Vjb25kUmVjb3JkLCBzZWNvbmRSZWNvcmROYW1l
        LCBudWxsKTsKICAgICAgfSk7CiAgICB9CiAgICBlbHNlIGlmKHRoaXMuc2Vj
        b25kUmVjb3JkS2luZCA9PT0gImhhc01hbnkiKXsKICAgICAgc2Vjb25kUmVj
        b3JkLnN1c3BlbmRSZWxhdGlvbnNoaXBPYnNlcnZlcnMoZnVuY3Rpb24oKXsK
        ICAgICAgICB2YXIgcmVsYXRpb25zaGlwID0gZ2V0KHNlY29uZFJlY29yZCwg
        c2Vjb25kUmVjb3JkTmFtZSk7CiAgICAgICAgaWYgKGlzVmFsdWUocmVsYXRp
        b25zaGlwKSkgeyByZWxhdGlvbnNoaXAucmVtb3ZlT2JqZWN0KGZpcnN0UmVj
        b3JkKTsgfQogICAgICB9KTsKICAgIH0KICB9CgogIGlmIChmaXJzdFJlY29y
        ZCBpbnN0YW5jZW9mIERTLk1vZGVsICYmIGdldChmaXJzdFJlY29yZCwgZmly
        c3RSZWNvcmROYW1lKSkgewogICAgaWYodGhpcy5maXJzdFJlY29yZEtpbmQg
        PT09ICJiZWxvbmdzVG8iKXsKICAgICAgZmlyc3RSZWNvcmQuc3VzcGVuZFJl
        bGF0aW9uc2hpcE9ic2VydmVycyhmdW5jdGlvbigpewogICAgICAgIHNldChm
        aXJzdFJlY29yZCwgZmlyc3RSZWNvcmROYW1lLCBudWxsKTsKICAgICAgfSk7
        CiAgICAgfQogICAgIGVsc2UgaWYodGhpcy5maXJzdFJlY29yZEtpbmQgPT09
        ICJoYXNNYW55Iil7CiAgICAgICBmaXJzdFJlY29yZC5zdXNwZW5kUmVsYXRp
        b25zaGlwT2JzZXJ2ZXJzKGZ1bmN0aW9uKCl7CiAgICAgICAgIHZhciByZWxh
        dGlvbnNoaXAgPSBnZXQoZmlyc3RSZWNvcmQsIGZpcnN0UmVjb3JkTmFtZSk7
        CiAgICAgICAgIGlmIChpc1ZhbHVlKHJlbGF0aW9uc2hpcCkpIHsgcmVsYXRp
        b25zaGlwLnJlbW92ZU9iamVjdChzZWNvbmRSZWNvcmQpOyB9CiAgICAgIH0p
        OwogICAgfQogIH0KCiAgdGhpcy5jb2FsZXNjZSgpOwp9OwoKfSkoKTsKCgoK
        KGZ1bmN0aW9uKCkgewovKioKICBAbW9kdWxlIGVtYmVyLWRhdGEKKi8KCn0p
        KCk7CgoKCihmdW5jdGlvbigpIHsKdmFyIGdldCA9IEVtYmVyLmdldCwgc2V0
        ID0gRW1iZXIuc2V0LAogICAgaXNOb25lID0gRW1iZXIuaXNOb25lOwoKLyoq
        CiAgQG1vZHVsZSBlbWJlci1kYXRhCiovCgpmdW5jdGlvbiBhc3luY0JlbG9u
        Z3NUbyh0eXBlLCBvcHRpb25zLCBtZXRhKSB7CiAgcmV0dXJuIEVtYmVyLmNv
        bXB1dGVkKGZ1bmN0aW9uKGtleSwgdmFsdWUpIHsKICAgIHZhciBkYXRhID0g
        Z2V0KHRoaXMsICdkYXRhJyksCiAgICAgICAgc3RvcmUgPSBnZXQodGhpcywg
        J3N0b3JlJyksCiAgICAgICAgcHJvbWlzZUxhYmVsID0gIkRTOiBBc3luYyBi
        ZWxvbmdzVG8gIiArIHRoaXMgKyAiIDogIiArIGtleTsKCiAgICBpZiAoYXJn
        dW1lbnRzLmxlbmd0aCA9PT0gMikgewogICAgICBFbWJlci5hc3NlcnQoIllv
        dSBjYW4gb25seSBhZGQgYSAnIiArIHR5cGUgKyAiJyByZWNvcmQgdG8gdGhp
        cyByZWxhdGlvbnNoaXAiLCAhdmFsdWUgfHwgdmFsdWUgaW5zdGFuY2VvZiBz
        dG9yZS5tb2RlbEZvcih0eXBlKSk7CiAgICAgIHJldHVybiB2YWx1ZSA9PT0g
        dW5kZWZpbmVkID8gbnVsbCA6IERTLlByb21pc2VPYmplY3QuY3JlYXRlKHsg
        cHJvbWlzZTogRW1iZXIuUlNWUC5yZXNvbHZlKHZhbHVlLCBwcm9taXNlTGFi
        ZWwpIH0pOwogICAgfQoKICAgIHZhciBsaW5rID0gZGF0YS5saW5rcyAmJiBk
        YXRhLmxpbmtzW2tleV0sCiAgICAgICAgYmVsb25nc1RvID0gZGF0YVtrZXld
        OwoKICAgIGlmKCFpc05vbmUoYmVsb25nc1RvKSkgewogICAgICB2YXIgcHJv
        bWlzZSA9IHN0b3JlLmZldGNoUmVjb3JkKGJlbG9uZ3NUbykgfHwgRW1iZXIu
        UlNWUC5yZXNvbHZlKGJlbG9uZ3NUbywgcHJvbWlzZUxhYmVsKTsKICAgICAg
        cmV0dXJuIERTLlByb21pc2VPYmplY3QuY3JlYXRlKHsgcHJvbWlzZTogcHJv
        bWlzZX0pOwogICAgfSBlbHNlIGlmIChsaW5rKSB7CiAgICAgIHZhciByZXNv
        bHZlciA9IEVtYmVyLlJTVlAuZGVmZXIoIkRTOiBBc3luYyBiZWxvbmdzVG8g
        KGxpbmspICIgKyB0aGlzICsgIiA6ICIgKyBrZXkpOwogICAgICBzdG9yZS5m
        aW5kQmVsb25nc1RvKHRoaXMsIGxpbmssIG1ldGEsIHJlc29sdmVyKTsKICAg
        ICAgcmV0dXJuIERTLlByb21pc2VPYmplY3QuY3JlYXRlKHsgcHJvbWlzZTog
        cmVzb2x2ZXIucHJvbWlzZSB9KTsKICAgIH0gZWxzZSB7CiAgICAgIHJldHVy
        biBudWxsOwogICAgfQogIH0pLnByb3BlcnR5KCdkYXRhJykubWV0YShtZXRh
        KTsKfQoKLyoqCiAgYERTLmJlbG9uZ3NUb2AgaXMgdXNlZCB0byBkZWZpbmUg
        T25lLVRvLU9uZSBhbmQgT25lLVRvLU1hbnkKICByZWxhdGlvbnNoaXBzIG9u
        IGEgW0RTLk1vZGVsXShEUy5Nb2RlbC5odG1sKS4KCgogIGBEUy5iZWxvbmdz
        VG9gIHRha2VzIGFuIG9wdGlvbmFsIGhhc2ggYXMgYSBzZWNvbmQgcGFyYW1l
        dGVyLCBjdXJyZW50bHkKICBzdXBwb3J0ZWQgb3B0aW9ucyBhcmU6CgogIC0g
        YGFzeW5jYDogQSBib29sZWFuIHZhbHVlIHVzZWQgdG8gZXhwbGljaXRseSBk
        ZWNsYXJlIHRoaXMgdG8gYmUgYW4gYXN5bmMgcmVsYXRpb25zaGlwLgogIC0g
        YGludmVyc2VgOiBBIHN0cmluZyB1c2VkIHRvIGlkZW50aWZ5IHRoZSBpbnZl
        cnNlIHByb3BlcnR5IG9uIGEKICAgIHJlbGF0ZWQgbW9kZWwgaW4gYSBPbmUt
        VG8tTWFueSByZWxhdGlvbnNoaXAuIFNlZSBbRXhwbGljaXQgSW52ZXJzZXNd
        KCN0b2NfZXhwbGljaXQtaW52ZXJzZXMpCgogICMjIyMgT25lLVRvLU9uZQog
        IFRvIGRlY2xhcmUgYSBvbmUtdG8tb25lIHJlbGF0aW9uc2hpcCBiZXR3ZWVu
        IHR3byBtb2RlbHMsIHVzZQogIGBEUy5iZWxvbmdzVG9gOgoKICBgYGBqYXZh
        c2NyaXB0CiAgQXBwLlVzZXIgPSBEUy5Nb2RlbC5leHRlbmQoewogICAgcHJv
        ZmlsZTogRFMuYmVsb25nc1RvKCdwcm9maWxlJykKICB9KTsKCiAgQXBwLlBy
        b2ZpbGUgPSBEUy5Nb2RlbC5leHRlbmQoewogICAgdXNlcjogRFMuYmVsb25n
        c1RvKCd1c2VyJykKICB9KTsKICBgYGAKCiAgIyMjIyBPbmUtVG8tTWFueQog
        IFRvIGRlY2xhcmUgYSBvbmUtdG8tbWFueSByZWxhdGlvbnNoaXAgYmV0d2Vl
        biB0d28gbW9kZWxzLCB1c2UKICBgRFMuYmVsb25nc1RvYCBpbiBjb21iaW5h
        dGlvbiB3aXRoIGBEUy5oYXNNYW55YCwgbGlrZSB0aGlzOgoKICBgYGBqYXZh
        c2NyaXB0CiAgQXBwLlBvc3QgPSBEUy5Nb2RlbC5leHRlbmQoewogICAgY29t
        bWVudHM6IERTLmhhc01hbnkoJ2NvbW1lbnQnKQogIH0pOwoKICBBcHAuQ29t
        bWVudCA9IERTLk1vZGVsLmV4dGVuZCh7CiAgICBwb3N0OiBEUy5iZWxvbmdz
        VG8oJ3Bvc3QnKQogIH0pOwogIGBgYAoKICBAbmFtZXNwYWNlCiAgQG1ldGhv
        ZCBiZWxvbmdzVG8KICBAZm9yIERTCiAgQHBhcmFtIHtTdHJpbmcgb3IgRFMu
        TW9kZWx9IHR5cGUgdGhlIG1vZGVsIHR5cGUgb2YgdGhlIHJlbGF0aW9uc2hp
        cAogIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIGEgaGFzaCBvZiBvcHRpb25z
        CiAgQHJldHVybiB7RW1iZXIuY29tcHV0ZWR9IHJlbGF0aW9uc2hpcAoqLwpE
        Uy5iZWxvbmdzVG8gPSBmdW5jdGlvbih0eXBlLCBvcHRpb25zKSB7CiAgaWYg
        KHR5cGVvZiB0eXBlID09PSAnb2JqZWN0JykgewogICAgb3B0aW9ucyA9IHR5
        cGU7CiAgICB0eXBlID0gdW5kZWZpbmVkOwogIH0gZWxzZSB7CiAgICBFbWJl
        ci5hc3NlcnQoIlRoZSBmaXJzdCBhcmd1bWVudCBEUy5iZWxvbmdzVG8gbXVz
        dCBiZSBhIG1vZGVsIHR5cGUgb3Igc3RyaW5nLCBsaWtlIERTLmJlbG9uZ3NU
        byhBcHAuUGVyc29uKSIsICEhdHlwZSAmJiAodHlwZW9mIHR5cGUgPT09ICdz
        dHJpbmcnIHx8IERTLk1vZGVsLmRldGVjdCh0eXBlKSkpOwogIH0KCiAgb3B0
        aW9ucyA9IG9wdGlvbnMgfHwge307CgogIHZhciBtZXRhID0geyB0eXBlOiB0
        eXBlLCBpc1JlbGF0aW9uc2hpcDogdHJ1ZSwgb3B0aW9uczogb3B0aW9ucywg
        a2luZDogJ2JlbG9uZ3NUbycgfTsKCiAgaWYgKG9wdGlvbnMuYXN5bmMpIHsK
        ICAgIHJldHVybiBhc3luY0JlbG9uZ3NUbyh0eXBlLCBvcHRpb25zLCBtZXRh
        KTsKICB9CgogIHJldHVybiBFbWJlci5jb21wdXRlZChmdW5jdGlvbihrZXks
        IHZhbHVlKSB7CiAgICB2YXIgZGF0YSA9IGdldCh0aGlzLCAnZGF0YScpLAog
        ICAgICAgIHN0b3JlID0gZ2V0KHRoaXMsICdzdG9yZScpLCBiZWxvbmdzVG8s
        IHR5cGVDbGFzczsKCiAgICBpZiAodHlwZW9mIHR5cGUgPT09ICdzdHJpbmcn
        KSB7CiAgICAgIHR5cGVDbGFzcyA9IHN0b3JlLm1vZGVsRm9yKHR5cGUpOwog
        ICAgfSBlbHNlIHsKICAgICAgdHlwZUNsYXNzID0gdHlwZTsKICAgIH0KCiAg
        ICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMikgewogICAgICBFbWJlci5h
        c3NlcnQoIllvdSBjYW4gb25seSBhZGQgYSAnIiArIHR5cGUgKyAiJyByZWNv
        cmQgdG8gdGhpcyByZWxhdGlvbnNoaXAiLCAhdmFsdWUgfHwgdmFsdWUgaW5z
        dGFuY2VvZiB0eXBlQ2xhc3MpOwogICAgICByZXR1cm4gdmFsdWUgPT09IHVu
        ZGVmaW5lZCA/IG51bGwgOiB2YWx1ZTsKICAgIH0KCiAgICBiZWxvbmdzVG8g
        PSBkYXRhW2tleV07CgogICAgaWYgKGlzTm9uZShiZWxvbmdzVG8pKSB7IHJl
        dHVybiBudWxsOyB9CgogICAgc3RvcmUuZmV0Y2hSZWNvcmQoYmVsb25nc1Rv
        KTsKCiAgICByZXR1cm4gYmVsb25nc1RvOwogIH0pLnByb3BlcnR5KCdkYXRh
        JykubWV0YShtZXRhKTsKfTsKCi8qKgogIFRoZXNlIG9ic2VydmVycyBvYnNl
        cnZlIGFsbCBgYmVsb25nc1RvYCByZWxhdGlvbnNoaXBzIG9uIHRoZSByZWNv
        cmQuIFNlZQogIGByZWxhdGlvbnNoaXBzL2V4dGAgdG8gc2VlIGhvdyB0aGVz
        ZSBvYnNlcnZlcnMgZ2V0IHRoZWlyIGRlcGVuZGVuY2llcy4KCiAgQGNsYXNz
        IE1vZGVsCiAgQG5hbWVzcGFjZSBEUwoqLwpEUy5Nb2RlbC5yZW9wZW4oewoK
        ICAvKioKICAgIEBtZXRob2QgYmVsb25nc1RvV2lsbENoYW5nZQogICAgQHBy
        aXZhdGUKICAgIEBzdGF0aWMKICAgIEBwYXJhbSByZWNvcmQKICAgIEBwYXJh
        bSBrZXkKICAqLwogIGJlbG9uZ3NUb1dpbGxDaGFuZ2U6IEVtYmVyLmJlZm9y
        ZU9ic2VydmVyKGZ1bmN0aW9uKHJlY29yZCwga2V5KSB7CiAgICBpZiAoZ2V0
        KHJlY29yZCwgJ2lzTG9hZGVkJykpIHsKICAgICAgdmFyIG9sZFBhcmVudCA9
        IGdldChyZWNvcmQsIGtleSk7CgogICAgICBpZiAob2xkUGFyZW50KSB7CiAg
        ICAgICAgdmFyIHN0b3JlID0gZ2V0KHJlY29yZCwgJ3N0b3JlJyksCiAgICAg
        ICAgICAgIGNoYW5nZSA9IERTLlJlbGF0aW9uc2hpcENoYW5nZS5jcmVhdGVD
        aGFuZ2UocmVjb3JkLCBvbGRQYXJlbnQsIHN0b3JlLCB7IGtleToga2V5LCBr
        aW5kOiAiYmVsb25nc1RvIiwgY2hhbmdlVHlwZTogInJlbW92ZSIgfSk7Cgog
        ICAgICAgIGNoYW5nZS5zeW5jKCk7CiAgICAgICAgdGhpcy5fY2hhbmdlc1Rv
        U3luY1trZXldID0gY2hhbmdlOwogICAgICB9CiAgICB9CiAgfSksCgogIC8q
        KgogICAgQG1ldGhvZCBiZWxvbmdzVG9EaWRDaGFuZ2UKICAgIEBwcml2YXRl
        CiAgICBAc3RhdGljCiAgICBAcGFyYW0gcmVjb3JkCiAgICBAcGFyYW0ga2V5
        CiAgKi8KICBiZWxvbmdzVG9EaWRDaGFuZ2U6IEVtYmVyLmltbWVkaWF0ZU9i
        c2VydmVyKGZ1bmN0aW9uKHJlY29yZCwga2V5KSB7CiAgICBpZiAoZ2V0KHJl
        Y29yZCwgJ2lzTG9hZGVkJykpIHsKICAgICAgdmFyIG5ld1BhcmVudCA9IGdl
        dChyZWNvcmQsIGtleSk7CgogICAgICBpZiAobmV3UGFyZW50KSB7CiAgICAg
        ICAgdmFyIHN0b3JlID0gZ2V0KHJlY29yZCwgJ3N0b3JlJyksCiAgICAgICAg
        ICAgIGNoYW5nZSA9IERTLlJlbGF0aW9uc2hpcENoYW5nZS5jcmVhdGVDaGFu
        Z2UocmVjb3JkLCBuZXdQYXJlbnQsIHN0b3JlLCB7IGtleToga2V5LCBraW5k
        OiAiYmVsb25nc1RvIiwgY2hhbmdlVHlwZTogImFkZCIgfSk7CgogICAgICAg
        IGNoYW5nZS5zeW5jKCk7CiAgICAgIH0KICAgIH0KCiAgICBkZWxldGUgdGhp
        cy5fY2hhbmdlc1RvU3luY1trZXldOwogIH0pCn0pOwoKfSkoKTsKCgoKKGZ1
        bmN0aW9uKCkgewovKioKICBAbW9kdWxlIGVtYmVyLWRhdGEKKi8KCnZhciBn
        ZXQgPSBFbWJlci5nZXQsIHNldCA9IEVtYmVyLnNldCwgc2V0UHJvcGVydGll
        cyA9IEVtYmVyLnNldFByb3BlcnRpZXM7CgpmdW5jdGlvbiBhc3luY0hhc01h
        bnkodHlwZSwgb3B0aW9ucywgbWV0YSkgewogIHJldHVybiBFbWJlci5jb21w
        dXRlZChmdW5jdGlvbihrZXksIHZhbHVlKSB7CiAgICB2YXIgcmVsYXRpb25z
        aGlwID0gdGhpcy5fcmVsYXRpb25zaGlwc1trZXldLAogICAgICAgIHByb21p
        c2VMYWJlbCA9ICJEUzogQXN5bmMgaGFzTWFueSAiICsgdGhpcyArICIgOiAi
        ICsga2V5OwoKICAgIGlmICghcmVsYXRpb25zaGlwKSB7CiAgICAgIHZhciBy
        ZXNvbHZlciA9IEVtYmVyLlJTVlAuZGVmZXIocHJvbWlzZUxhYmVsKTsKICAg
        ICAgcmVsYXRpb25zaGlwID0gYnVpbGRSZWxhdGlvbnNoaXAodGhpcywga2V5
        LCBvcHRpb25zLCBmdW5jdGlvbihzdG9yZSwgZGF0YSkgewogICAgICAgIHZh
        ciBsaW5rID0gZGF0YS5saW5rcyAmJiBkYXRhLmxpbmtzW2tleV07CiAgICAg
        ICAgdmFyIHJlbDsKICAgICAgICBpZiAobGluaykgewogICAgICAgICAgcmVs
        ID0gc3RvcmUuZmluZEhhc01hbnkodGhpcywgbGluaywgbWV0YSwgcmVzb2x2
        ZXIpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZWwgPSBzdG9yZS5m
        aW5kTWFueSh0aGlzLCBkYXRhW2tleV0sIG1ldGEudHlwZSwgcmVzb2x2ZXIp
        OwogICAgICAgIH0KICAgICAgICAvLyBjYWNoZSB0aGUgcHJvbWlzZSBzbyB3
        ZSBjYW4gdXNlIGl0CiAgICAgICAgLy8gd2hlbiB3ZSBjb21lIGJhY2sgYW5k
        IGRvbid0IG5lZWQgdG8gcmVidWlsZAogICAgICAgIC8vIHRoZSByZWxhdGlv
        bnNoaXAuCiAgICAgICAgc2V0KHJlbCwgJ3Byb21pc2UnLCByZXNvbHZlci5w
        cm9taXNlKTsKICAgICAgICByZXR1cm4gcmVsOwogICAgICB9KTsKICAgIH0K
        CiAgICB2YXIgcHJvbWlzZSA9IHJlbGF0aW9uc2hpcC5nZXQoJ3Byb21pc2Un
        KS50aGVuKGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gcmVsYXRpb25zaGlw
        OwogICAgfSwgbnVsbCwgIkRTOiBBc3luYyBoYXNNYW55IHJlY29yZHMgcmVj
        ZWl2ZWQiKTsKCiAgICByZXR1cm4gRFMuUHJvbWlzZUFycmF5LmNyZWF0ZSh7
        IHByb21pc2U6IHByb21pc2UgfSk7CiAgfSkucHJvcGVydHkoJ2RhdGEnKS5t
        ZXRhKG1ldGEpOwp9CgpmdW5jdGlvbiBidWlsZFJlbGF0aW9uc2hpcChyZWNv
        cmQsIGtleSwgb3B0aW9ucywgY2FsbGJhY2spIHsKICB2YXIgcmVscyA9IHJl
        Y29yZC5fcmVsYXRpb25zaGlwczsKCiAgaWYgKHJlbHNba2V5XSkgeyByZXR1
        cm4gcmVsc1trZXldOyB9CgogIHZhciBkYXRhID0gZ2V0KHJlY29yZCwgJ2Rh
        dGEnKSwKICAgICAgc3RvcmUgPSBnZXQocmVjb3JkLCAnc3RvcmUnKTsKCiAg
        dmFyIHJlbGF0aW9uc2hpcCA9IHJlbHNba2V5XSA9IGNhbGxiYWNrLmNhbGwo
        cmVjb3JkLCBzdG9yZSwgZGF0YSk7CgogIHJldHVybiBzZXRQcm9wZXJ0aWVz
        KHJlbGF0aW9uc2hpcCwgewogICAgb3duZXI6IHJlY29yZCwgbmFtZToga2V5
        LCBpc1BvbHltb3JwaGljOiBvcHRpb25zLnBvbHltb3JwaGljCiAgfSk7Cn0K
        CmZ1bmN0aW9uIGhhc1JlbGF0aW9uc2hpcCh0eXBlLCBvcHRpb25zKSB7CiAg
        b3B0aW9ucyA9IG9wdGlvbnMgfHwge307CgogIHZhciBtZXRhID0geyB0eXBl
        OiB0eXBlLCBpc1JlbGF0aW9uc2hpcDogdHJ1ZSwgb3B0aW9uczogb3B0aW9u
        cywga2luZDogJ2hhc01hbnknIH07CgogIGlmIChvcHRpb25zLmFzeW5jKSB7
        CiAgICByZXR1cm4gYXN5bmNIYXNNYW55KHR5cGUsIG9wdGlvbnMsIG1ldGEp
        OwogIH0KCiAgcmV0dXJuIEVtYmVyLmNvbXB1dGVkKGZ1bmN0aW9uKGtleSwg
        dmFsdWUpIHsKICAgIHJldHVybiBidWlsZFJlbGF0aW9uc2hpcCh0aGlzLCBr
        ZXksIG9wdGlvbnMsIGZ1bmN0aW9uKHN0b3JlLCBkYXRhKSB7CiAgICAgIHZh
        ciByZWNvcmRzID0gZGF0YVtrZXldOwogICAgICBFbWJlci5hc3NlcnQoIllv
        dSBsb29rZWQgdXAgdGhlICciICsga2V5ICsgIicgcmVsYXRpb25zaGlwIG9u
        ICciICsgdGhpcyArICInIGJ1dCBzb21lIG9mIHRoZSBhc3NvY2lhdGVkIHJl
        Y29yZHMgd2VyZSBub3QgbG9hZGVkLiBFaXRoZXIgbWFrZSBzdXJlIHRoZXkg
        YXJlIGFsbCBsb2FkZWQgdG9nZXRoZXIgd2l0aCB0aGUgcGFyZW50IHJlY29y
        ZCwgb3Igc3BlY2lmeSB0aGF0IHRoZSByZWxhdGlvbnNoaXAgaXMgYXN5bmMg
        KGBEUy5oYXNNYW55KHsgYXN5bmM6IHRydWUgfSlgKSIsIEVtYmVyLkEocmVj
        b3JkcykuZXZlcnlQcm9wZXJ0eSgnaXNFbXB0eScsIGZhbHNlKSk7CiAgICAg
        IHJldHVybiBzdG9yZS5maW5kTWFueSh0aGlzLCBkYXRhW2tleV0sIG1ldGEu
        dHlwZSk7CiAgICB9KTsKICB9KS5wcm9wZXJ0eSgnZGF0YScpLm1ldGEobWV0
        YSk7Cn0KCi8qKgogIGBEUy5oYXNNYW55YCBpcyB1c2VkIHRvIGRlZmluZSBP
        bmUtVG8tTWFueSBhbmQgTWFueS1Uby1NYW55CiAgcmVsYXRpb25zaGlwcyBv
        biBhIFtEUy5Nb2RlbF0oRFMuTW9kZWwuaHRtbCkuCgogIGBEUy5oYXNNYW55
        YCB0YWtlcyBhbiBvcHRpb25hbCBoYXNoIGFzIGEgc2Vjb25kIHBhcmFtZXRl
        ciwgY3VycmVudGx5CiAgc3VwcG9ydGVkIG9wdGlvbnMgYXJlOgoKICAtIGBh
        c3luY2A6IEEgYm9vbGVhbiB2YWx1ZSB1c2VkIHRvIGV4cGxpY2l0bHkgZGVj
        bGFyZSB0aGlzIHRvIGJlIGFuIGFzeW5jIHJlbGF0aW9uc2hpcC4KICAtIGBp
        bnZlcnNlYDogQSBzdHJpbmcgdXNlZCB0byBpZGVudGlmeSB0aGUgaW52ZXJz
        ZSBwcm9wZXJ0eSBvbiBhIHJlbGF0ZWQgbW9kZWwuCgogICMjIyMgT25lLVRv
        LU1hbnkKICBUbyBkZWNsYXJlIGEgb25lLXRvLW1hbnkgcmVsYXRpb25zaGlw
        IGJldHdlZW4gdHdvIG1vZGVscywgdXNlCiAgYERTLmJlbG9uZ3NUb2AgaW4g
        Y29tYmluYXRpb24gd2l0aCBgRFMuaGFzTWFueWAsIGxpa2UgdGhpczoKCiAg
        YGBgamF2YXNjcmlwdAogIEFwcC5Qb3N0ID0gRFMuTW9kZWwuZXh0ZW5kKHsK
        ICAgIGNvbW1lbnRzOiBEUy5oYXNNYW55KCdjb21tZW50JykKICB9KTsKCiAg
        QXBwLkNvbW1lbnQgPSBEUy5Nb2RlbC5leHRlbmQoewogICAgcG9zdDogRFMu
        YmVsb25nc1RvKCdwb3N0JykKICB9KTsKICBgYGAKCiAgIyMjIyBNYW55LVRv
        LU1hbnkKICBUbyBkZWNsYXJlIGEgbWFueS10by1tYW55IHJlbGF0aW9uc2hp
        cCBiZXR3ZWVuIHR3byBtb2RlbHMsIHVzZQogIGBEUy5oYXNNYW55YDoKCiAg
        YGBgamF2YXNjcmlwdAogIEFwcC5Qb3N0ID0gRFMuTW9kZWwuZXh0ZW5kKHsK
        ICAgIHRhZ3M6IERTLmhhc01hbnkoJ3RhZycpCiAgfSk7CgogIEFwcC5UYWcg
        PSBEUy5Nb2RlbC5leHRlbmQoewogICAgcG9zdHM6IERTLmhhc01hbnkoJ3Bv
        c3QnKQogIH0pOwogIGBgYAoKICAjIyMjIEV4cGxpY2l0IEludmVyc2VzCgog
        IEVtYmVyIERhdGEgd2lsbCBkbyBpdHMgYmVzdCB0byBkaXNjb3ZlciB3aGlj
        aCByZWxhdGlvbnNoaXBzIG1hcCB0bwogIG9uZSBhbm90aGVyLiBJbiB0aGUg
        b25lLXRvLW1hbnkgY29kZSBhYm92ZSwgZm9yIGV4YW1wbGUsIEVtYmVyIERh
        dGEKICBjYW4gZmlndXJlIG91dCB0aGF0IGNoYW5naW5nIHRoZSBgY29tbWVu
        dHNgIHJlbGF0aW9uc2hpcCBzaG91bGQgdXBkYXRlCiAgdGhlIGBwb3N0YCBy
        ZWxhdGlvbnNoaXAgb24gdGhlIGludmVyc2UgYmVjYXVzZSBwb3N0IGlzIHRo
        ZSBvbmx5CiAgcmVsYXRpb25zaGlwIHRvIHRoYXQgbW9kZWwuCgogIEhvd2V2
        ZXIsIHNvbWV0aW1lcyB5b3UgbWF5IGhhdmUgbXVsdGlwbGUgYGJlbG9uZ3NU
        b2AvYGhhc01hbnlzYCBmb3IgdGhlCiAgc2FtZSB0eXBlLiBZb3UgY2FuIHNw
        ZWNpZnkgd2hpY2ggcHJvcGVydHkgb24gdGhlIHJlbGF0ZWQgbW9kZWwgaXMK
        ICB0aGUgaW52ZXJzZSB1c2luZyBgRFMuaGFzTWFueWAncyBgaW52ZXJzZWAg
        b3B0aW9uOgoKICBgYGBqYXZhc2NyaXB0CiAgdmFyIGJlbG9uZ3NUbyA9IERT
        LmJlbG9uZ3NUbywKICAgICAgaGFzTWFueSA9IERTLmhhc01hbnk7CgogIEFw
        cC5Db21tZW50ID0gRFMuTW9kZWwuZXh0ZW5kKHsKICAgIG9uZVBvc3Q6IGJl
        bG9uZ3NUbygncG9zdCcpLAogICAgdHdvUG9zdDogYmVsb25nc1RvKCdwb3N0
        JyksCiAgICByZWRQb3N0OiBiZWxvbmdzVG8oJ3Bvc3QnKSwKICAgIGJsdWVQ
        b3N0OiBiZWxvbmdzVG8oJ3Bvc3QnKQogIH0pOwoKICBBcHAuUG9zdCA9IERT
        Lk1vZGVsLmV4dGVuZCh7CiAgICBjb21tZW50czogaGFzTWFueSgnY29tbWVu
        dCcsIHsKICAgICAgaW52ZXJzZTogJ3JlZFBvc3QnCiAgICB9KQogIH0pOwog
        IGBgYAoKICBZb3UgY2FuIGFsc28gc3BlY2lmeSBhbiBpbnZlcnNlIG9uIGEg
        YGJlbG9uZ3NUb2AsIHdoaWNoIHdvcmtzIGhvdwogIHlvdSdkIGV4cGVjdC4K
        CiAgQG5hbWVzcGFjZQogIEBtZXRob2QgaGFzTWFueQogIEBmb3IgRFMKICBA
        cGFyYW0ge1N0cmluZyBvciBEUy5Nb2RlbH0gdHlwZSB0aGUgbW9kZWwgdHlw
        ZSBvZiB0aGUgcmVsYXRpb25zaGlwCiAgQHBhcmFtIHtPYmplY3R9IG9wdGlv
        bnMgYSBoYXNoIG9mIG9wdGlvbnMKICBAcmV0dXJuIHtFbWJlci5jb21wdXRl
        ZH0gcmVsYXRpb25zaGlwCiovCkRTLmhhc01hbnkgPSBmdW5jdGlvbih0eXBl
        LCBvcHRpb25zKSB7CiAgaWYgKHR5cGVvZiB0eXBlID09PSAnb2JqZWN0Jykg
        ewogICAgb3B0aW9ucyA9IHR5cGU7CiAgICB0eXBlID0gdW5kZWZpbmVkOwog
        IH0KICByZXR1cm4gaGFzUmVsYXRpb25zaGlwKHR5cGUsIG9wdGlvbnMpOwp9
        OwoKfSkoKTsKCgoKKGZ1bmN0aW9uKCkgewp2YXIgZ2V0ID0gRW1iZXIuZ2V0
        LCBzZXQgPSBFbWJlci5zZXQ7CgovKioKICBAbW9kdWxlIGVtYmVyLWRhdGEK
        Ki8KCi8qCiAgVGhpcyBmaWxlIGRlZmluZXMgc2V2ZXJhbCBleHRlbnNpb25z
        IHRvIHRoZSBiYXNlIGBEUy5Nb2RlbGAgY2xhc3MgdGhhdAogIGFkZCBzdXBw
        b3J0IGZvciBvbmUtdG8tbWFueSByZWxhdGlvbnNoaXBzLgoqLwoKLyoqCiAg
        QGNsYXNzIE1vZGVsCiAgQG5hbWVzcGFjZSBEUwoqLwpEUy5Nb2RlbC5yZW9w
        ZW4oewoKICAvKioKICAgIFRoaXMgRW1iZXIuanMgaG9vayBhbGxvd3MgYW4g
        b2JqZWN0IHRvIGJlIG5vdGlmaWVkIHdoZW4gYSBwcm9wZXJ0eQogICAgaXMg
        ZGVmaW5lZC4KCiAgICBJbiB0aGlzIGNhc2UsIHdlIHVzZSBpdCB0byBiZSBu
        b3RpZmllZCB3aGVuIGFuIEVtYmVyIERhdGEgdXNlciBkZWZpbmVzIGEKICAg
        IGJlbG9uZ3MtdG8gcmVsYXRpb25zaGlwLiBJbiB0aGF0IGNhc2UsIHdlIG5l
        ZWQgdG8gc2V0IHVwIG9ic2VydmVycyBmb3IKICAgIGVhY2ggb25lLCBhbGxv
        d2luZyB1cyB0byB0cmFjayByZWxhdGlvbnNoaXAgY2hhbmdlcyBhbmQgYXV0
        b21hdGljYWxseQogICAgcmVmbGVjdCBjaGFuZ2VzIGluIHRoZSBpbnZlcnNl
        IGhhcy1tYW55IGFycmF5LgoKICAgIFRoaXMgaG9vayBwYXNzZXMgdGhlIGNs
        YXNzIGJlaW5nIHNldCB1cCwgYXMgd2VsbCBhcyB0aGUga2V5IGFuZCB2YWx1
        ZQogICAgYmVpbmcgZGVmaW5lZC4gU28sIGZvciBleGFtcGxlLCB3aGVuIHRo
        ZSB1c2VyIGRvZXMgdGhpczoKCiAgICBgYGBqYXZhc2NyaXB0CiAgICBEUy5N
        b2RlbC5leHRlbmQoewogICAgICBwYXJlbnQ6IERTLmJlbG9uZ3NUbygndXNl
        cicpCiAgICB9KTsKICAgIGBgYAoKICAgIFRoaXMgaG9vayB3b3VsZCBiZSBj
        YWxsZWQgd2l0aCAicGFyZW50IiBhcyB0aGUga2V5IGFuZCB0aGUgY29tcHV0
        ZWQKICAgIHByb3BlcnR5IHJldHVybmVkIGJ5IGBEUy5iZWxvbmdzVG9gIGFz
        IHRoZSB2YWx1ZS4KCiAgICBAbWV0aG9kIGRpZERlZmluZVByb3BlcnR5CiAg
        ICBAcGFyYW0gcHJvdG8KICAgIEBwYXJhbSBrZXkKICAgIEBwYXJhbSB2YWx1
        ZQogICovCiAgZGlkRGVmaW5lUHJvcGVydHk6IGZ1bmN0aW9uKHByb3RvLCBr
        ZXksIHZhbHVlKSB7CiAgICAvLyBDaGVjayBpZiB0aGUgdmFsdWUgYmVpbmcg
        c2V0IGlzIGEgY29tcHV0ZWQgcHJvcGVydHkuCiAgICBpZiAodmFsdWUgaW5z
        dGFuY2VvZiBFbWJlci5EZXNjcmlwdG9yKSB7CgogICAgICAvLyBJZiBpdCBp
        cywgZ2V0IHRoZSBtZXRhZGF0YSBmb3IgdGhlIHJlbGF0aW9uc2hpcC4gVGhp
        cyBpcwogICAgICAvLyBwb3B1bGF0ZWQgYnkgdGhlIGBEUy5iZWxvbmdzVG9g
        IGhlbHBlciB3aGVuIGl0IGlzIGNyZWF0aW5nCiAgICAgIC8vIHRoZSBjb21w
        dXRlZCBwcm9wZXJ0eS4KICAgICAgdmFyIG1ldGEgPSB2YWx1ZS5tZXRhKCk7
        CgogICAgICBpZiAobWV0YS5pc1JlbGF0aW9uc2hpcCAmJiBtZXRhLmtpbmQg
        PT09ICdiZWxvbmdzVG8nKSB7CiAgICAgICAgRW1iZXIuYWRkT2JzZXJ2ZXIo
        cHJvdG8sIGtleSwgbnVsbCwgJ2JlbG9uZ3NUb0RpZENoYW5nZScpOwogICAg
        ICAgIEVtYmVyLmFkZEJlZm9yZU9ic2VydmVyKHByb3RvLCBrZXksIG51bGws
        ICdiZWxvbmdzVG9XaWxsQ2hhbmdlJyk7CiAgICAgIH0KCiAgICAgIG1ldGEu
        cGFyZW50VHlwZSA9IHByb3RvLmNvbnN0cnVjdG9yOwogICAgfQogIH0KfSk7
        CgovKgogIFRoZXNlIERTLk1vZGVsIGV4dGVuc2lvbnMgYWRkIGNsYXNzIG1l
        dGhvZHMgdGhhdCBwcm92aWRlIHJlbGF0aW9uc2hpcAogIGludHJvc3BlY3Rp
        b24gYWJpbGl0aWVzIGFib3V0IHJlbGF0aW9uc2hpcHMuCgogIEEgbm90ZSBh
        Ym91dCB0aGUgY29tcHV0ZWQgcHJvcGVydGllcyBjb250YWluZWQgaGVyZToK
        CiAgKipUaGVzZSBwcm9wZXJ0aWVzIGFyZSBlZmZlY3RpdmVseSBzZWFsZWQg
        b25jZSBjYWxsZWQgZm9yIHRoZSBmaXJzdCB0aW1lLioqCiAgVG8gYXZvaWQg
        cmVwZWF0ZWRseSBkb2luZyBleHBlbnNpdmUgaXRlcmF0aW9uIG92ZXIgYSBt
        b2RlbCdzIGZpZWxkcywgdGhlc2UKICB2YWx1ZXMgYXJlIGNvbXB1dGVkIG9u
        Y2UgYW5kIHRoZW4gY2FjaGVkIGZvciB0aGUgcmVtYWluZGVyIG9mIHRoZSBy
        dW50aW1lIG9mCiAgeW91ciBhcHBsaWNhdGlvbi4KCiAgSWYgeW91ciBhcHBs
        aWNhdGlvbiBuZWVkcyB0byBtb2RpZnkgYSBjbGFzcyBhZnRlciBpdHMgaW5p
        dGlhbCBkZWZpbml0aW9uCiAgKGZvciBleGFtcGxlLCB1c2luZyBgcmVvcGVu
        KClgIHRvIGFkZCBhZGRpdGlvbmFsIGF0dHJpYnV0ZXMpLCBtYWtlIHN1cmUg
        eW91CiAgZG8gaXQgYmVmb3JlIHVzaW5nIHlvdXIgbW9kZWwgd2l0aCB0aGUg
        c3RvcmUsIHdoaWNoIHVzZXMgdGhlc2UgcHJvcGVydGllcwogIGV4dGVuc2l2
        ZWx5LgoqLwoKRFMuTW9kZWwucmVvcGVuQ2xhc3MoewogIC8qKgogICAgRm9y
        IGEgZ2l2ZW4gcmVsYXRpb25zaGlwIG5hbWUsIHJldHVybnMgdGhlIG1vZGVs
        IHR5cGUgb2YgdGhlIHJlbGF0aW9uc2hpcC4KCiAgICBGb3IgZXhhbXBsZSwg
        aWYgeW91IGRlZmluZSBhIG1vZGVsIGxpa2UgdGhpczoKCiAgIGBgYGphdmFz
        Y3JpcHQKICAgIEFwcC5Qb3N0ID0gRFMuTW9kZWwuZXh0ZW5kKHsKICAgICAg
        Y29tbWVudHM6IERTLmhhc01hbnkoJ2NvbW1lbnQnKQogICAgfSk7CiAgIGBg
        YAoKICAgIENhbGxpbmcgYEFwcC5Qb3N0LnR5cGVGb3JSZWxhdGlvbnNoaXAo
        J2NvbW1lbnRzJylgIHdpbGwgcmV0dXJuIGBBcHAuQ29tbWVudGAuCgogICAg
        QG1ldGhvZCB0eXBlRm9yUmVsYXRpb25zaGlwCiAgICBAc3RhdGljCiAgICBA
        cGFyYW0ge1N0cmluZ30gbmFtZSB0aGUgbmFtZSBvZiB0aGUgcmVsYXRpb25z
        aGlwCiAgICBAcmV0dXJuIHtzdWJjbGFzcyBvZiBEUy5Nb2RlbH0gdGhlIHR5
        cGUgb2YgdGhlIHJlbGF0aW9uc2hpcCwgb3IgdW5kZWZpbmVkCiAgKi8KICB0
        eXBlRm9yUmVsYXRpb25zaGlwOiBmdW5jdGlvbihuYW1lKSB7CiAgICB2YXIg
        cmVsYXRpb25zaGlwID0gZ2V0KHRoaXMsICdyZWxhdGlvbnNoaXBzQnlOYW1l
        JykuZ2V0KG5hbWUpOwogICAgcmV0dXJuIHJlbGF0aW9uc2hpcCAmJiByZWxh
        dGlvbnNoaXAudHlwZTsKICB9LAoKICBpbnZlcnNlRm9yOiBmdW5jdGlvbihu
        YW1lKSB7CiAgICB2YXIgaW52ZXJzZVR5cGUgPSB0aGlzLnR5cGVGb3JSZWxh
        dGlvbnNoaXAobmFtZSk7CgogICAgaWYgKCFpbnZlcnNlVHlwZSkgeyByZXR1
        cm4gbnVsbDsgfQoKICAgIHZhciBvcHRpb25zID0gdGhpcy5tZXRhRm9yUHJv
        cGVydHkobmFtZSkub3B0aW9uczsKCiAgICBpZiAob3B0aW9ucy5pbnZlcnNl
        ID09PSBudWxsKSB7IHJldHVybiBudWxsOyB9CgogICAgdmFyIGludmVyc2VO
        YW1lLCBpbnZlcnNlS2luZDsKCiAgICBpZiAob3B0aW9ucy5pbnZlcnNlKSB7
        CiAgICAgIGludmVyc2VOYW1lID0gb3B0aW9ucy5pbnZlcnNlOwogICAgICBp
        bnZlcnNlS2luZCA9IEVtYmVyLmdldChpbnZlcnNlVHlwZSwgJ3JlbGF0aW9u
        c2hpcHNCeU5hbWUnKS5nZXQoaW52ZXJzZU5hbWUpLmtpbmQ7CiAgICB9IGVs
        c2UgewogICAgICB2YXIgcG9zc2libGVSZWxhdGlvbnNoaXBzID0gZmluZFBv
        c3NpYmxlSW52ZXJzZXModGhpcywgaW52ZXJzZVR5cGUpOwoKICAgICAgaWYg
        KHBvc3NpYmxlUmVsYXRpb25zaGlwcy5sZW5ndGggPT09IDApIHsgcmV0dXJu
        IG51bGw7IH0KCiAgICAgIEVtYmVyLmFzc2VydCgiWW91IGRlZmluZWQgdGhl
        ICciICsgbmFtZSArICInIHJlbGF0aW9uc2hpcCBvbiAiICsgdGhpcyArICIs
        IGJ1dCBtdWx0aXBsZSBwb3NzaWJsZSBpbnZlcnNlIHJlbGF0aW9uc2hpcHMg
        b2YgdHlwZSAiICsgdGhpcyArICIgd2VyZSBmb3VuZCBvbiAiICsgaW52ZXJz
        ZVR5cGUgKyAiLiBMb29rIGF0IGh0dHA6Ly9lbWJlcmpzLmNvbS9ndWlkZXMv
        bW9kZWxzL2RlZmluaW5nLW1vZGVscy8jdG9jX2V4cGxpY2l0LWludmVyc2Vz
        IGZvciBob3cgdG8gZXhwbGljaXRseSBzcGVjaWZ5IGludmVyc2VzIiwgcG9z
        c2libGVSZWxhdGlvbnNoaXBzLmxlbmd0aCA9PT0gMSk7CgogICAgICBpbnZl
        cnNlTmFtZSA9IHBvc3NpYmxlUmVsYXRpb25zaGlwc1swXS5uYW1lOwogICAg
        ICBpbnZlcnNlS2luZCA9IHBvc3NpYmxlUmVsYXRpb25zaGlwc1swXS5raW5k
        OwogICAgfQoKICAgIGZ1bmN0aW9uIGZpbmRQb3NzaWJsZUludmVyc2VzKHR5
        cGUsIGludmVyc2VUeXBlLCBwb3NzaWJsZVJlbGF0aW9uc2hpcHMpIHsKICAg
        ICAgcG9zc2libGVSZWxhdGlvbnNoaXBzID0gcG9zc2libGVSZWxhdGlvbnNo
        aXBzIHx8IFtdOwoKICAgICAgdmFyIHJlbGF0aW9uc2hpcE1hcCA9IGdldChp
        bnZlcnNlVHlwZSwgJ3JlbGF0aW9uc2hpcHMnKTsKICAgICAgaWYgKCFyZWxh
        dGlvbnNoaXBNYXApIHsgcmV0dXJuOyB9CgogICAgICB2YXIgcmVsYXRpb25z
        aGlwcyA9IHJlbGF0aW9uc2hpcE1hcC5nZXQodHlwZSk7CiAgICAgIGlmIChy
        ZWxhdGlvbnNoaXBzKSB7CiAgICAgICAgcG9zc2libGVSZWxhdGlvbnNoaXBz
        LnB1c2guYXBwbHkocG9zc2libGVSZWxhdGlvbnNoaXBzLCByZWxhdGlvbnNo
        aXBNYXAuZ2V0KHR5cGUpKTsKICAgICAgfQoKICAgICAgaWYgKHR5cGUuc3Vw
        ZXJjbGFzcykgewogICAgICAgIGZpbmRQb3NzaWJsZUludmVyc2VzKHR5cGUu
        c3VwZXJjbGFzcywgaW52ZXJzZVR5cGUsIHBvc3NpYmxlUmVsYXRpb25zaGlw
        cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBwb3NzaWJsZVJlbGF0aW9uc2hp
        cHM7CiAgICB9CgogICAgcmV0dXJuIHsKICAgICAgdHlwZTogaW52ZXJzZVR5
        cGUsCiAgICAgIG5hbWU6IGludmVyc2VOYW1lLAogICAgICBraW5kOiBpbnZl
        cnNlS2luZAogICAgfTsKICB9LAoKICAvKioKICAgIFRoZSBtb2RlbCdzIHJl
        bGF0aW9uc2hpcHMgYXMgYSBtYXAsIGtleWVkIG9uIHRoZSB0eXBlIG9mIHRo
        ZQogICAgcmVsYXRpb25zaGlwLiBUaGUgdmFsdWUgb2YgZWFjaCBlbnRyeSBp
        cyBhbiBhcnJheSBjb250YWluaW5nIGEgZGVzY3JpcHRvcgogICAgZm9yIGVh
        Y2ggcmVsYXRpb25zaGlwIHdpdGggdGhhdCB0eXBlLCBkZXNjcmliaW5nIHRo
        ZSBuYW1lIG9mIHRoZSByZWxhdGlvbnNoaXAKICAgIGFzIHdlbGwgYXMgdGhl
        IHR5cGUuCgogICAgRm9yIGV4YW1wbGUsIGdpdmVuIHRoZSBmb2xsb3dpbmcg
        bW9kZWwgZGVmaW5pdGlvbjoKCiAgICBgYGBqYXZhc2NyaXB0CiAgICBBcHAu
        QmxvZyA9IERTLk1vZGVsLmV4dGVuZCh7CiAgICAgIHVzZXJzOiBEUy5oYXNN
        YW55KCd1c2VyJyksCiAgICAgIG93bmVyOiBEUy5iZWxvbmdzVG8oJ3VzZXIn
        KSwKICAgICAgcG9zdHM6IERTLmhhc01hbnkoJ3Bvc3QnKQogICAgfSk7CiAg
        ICBgYGAKCiAgICBUaGlzIGNvbXB1dGVkIHByb3BlcnR5IHdvdWxkIHJldHVy
        biBhIG1hcCBkZXNjcmliaW5nIHRoZXNlCiAgICByZWxhdGlvbnNoaXBzLCBs
        aWtlIHRoaXM6CgogICAgYGBgamF2YXNjcmlwdAogICAgdmFyIHJlbGF0aW9u
        c2hpcHMgPSBFbWJlci5nZXQoQXBwLkJsb2csICdyZWxhdGlvbnNoaXBzJyk7
        CiAgICByZWxhdGlvbnNoaXBzLmdldChBcHAuVXNlcik7CiAgICAvLz0+IFsg
        eyBuYW1lOiAndXNlcnMnLCBraW5kOiAnaGFzTWFueScgfSwKICAgIC8vICAg
        ICB7IG5hbWU6ICdvd25lcicsIGtpbmQ6ICdiZWxvbmdzVG8nIH0gXQogICAg
        cmVsYXRpb25zaGlwcy5nZXQoQXBwLlBvc3QpOwogICAgLy89PiBbIHsgbmFt
        ZTogJ3Bvc3RzJywga2luZDogJ2hhc01hbnknIH0gXQogICAgYGBgCgogICAg
        QHByb3BlcnR5IHJlbGF0aW9uc2hpcHMKICAgIEBzdGF0aWMKICAgIEB0eXBl
        IEVtYmVyLk1hcAogICAgQHJlYWRPbmx5CiAgKi8KICByZWxhdGlvbnNoaXBz
        OiBFbWJlci5jb21wdXRlZChmdW5jdGlvbigpIHsKICAgIHZhciBtYXAgPSBu
        ZXcgRW1iZXIuTWFwV2l0aERlZmF1bHQoewogICAgICBkZWZhdWx0VmFsdWU6
        IGZ1bmN0aW9uKCkgeyByZXR1cm4gW107IH0KICAgIH0pOwoKICAgIC8vIExv
        b3AgdGhyb3VnaCBlYWNoIGNvbXB1dGVkIHByb3BlcnR5IG9uIHRoZSBjbGFz
        cwogICAgdGhpcy5lYWNoQ29tcHV0ZWRQcm9wZXJ0eShmdW5jdGlvbihuYW1l
        LCBtZXRhKSB7CgogICAgICAvLyBJZiB0aGUgY29tcHV0ZWQgcHJvcGVydHkg
        aXMgYSByZWxhdGlvbnNoaXAsIGFkZAogICAgICAvLyBpdCB0byB0aGUgbWFw
        LgogICAgICBpZiAobWV0YS5pc1JlbGF0aW9uc2hpcCkgewogICAgICAgIGlm
        ICh0eXBlb2YgbWV0YS50eXBlID09PSAnc3RyaW5nJykgewogICAgICAgICAg
        bWV0YS50eXBlID0gdGhpcy5zdG9yZS5tb2RlbEZvcihtZXRhLnR5cGUpOwog
        ICAgICAgIH0KCiAgICAgICAgdmFyIHJlbGF0aW9uc2hpcHNGb3JUeXBlID0g
        bWFwLmdldChtZXRhLnR5cGUpOwoKICAgICAgICByZWxhdGlvbnNoaXBzRm9y
        VHlwZS5wdXNoKHsgbmFtZTogbmFtZSwga2luZDogbWV0YS5raW5kIH0pOwog
        ICAgICB9CiAgICB9KTsKCiAgICByZXR1cm4gbWFwOwogIH0pLAoKICAvKioK
        ICAgIEEgaGFzaCBjb250YWluaW5nIGxpc3RzIG9mIHRoZSBtb2RlbCdzIHJl
        bGF0aW9uc2hpcHMsIGdyb3VwZWQKICAgIGJ5IHRoZSByZWxhdGlvbnNoaXAg
        a2luZC4gRm9yIGV4YW1wbGUsIGdpdmVuIGEgbW9kZWwgd2l0aCB0aGlzCiAg
        ICBkZWZpbml0aW9uOgoKICAgIGBgYGphdmFzY3JpcHQKICAgIEFwcC5CbG9n
        ID0gRFMuTW9kZWwuZXh0ZW5kKHsKICAgICAgdXNlcnM6IERTLmhhc01hbnko
        J3VzZXInKSwKICAgICAgb3duZXI6IERTLmJlbG9uZ3NUbygndXNlcicpLAoK
        ICAgICAgcG9zdHM6IERTLmhhc01hbnkoJ3Bvc3QnKQogICAgfSk7CiAgICBg
        YGAKCiAgICBUaGlzIHByb3BlcnR5IHdvdWxkIGNvbnRhaW4gdGhlIGZvbGxv
        d2luZzoKCiAgICBgYGBqYXZhc2NyaXB0CiAgICB2YXIgcmVsYXRpb25zaGlw
        TmFtZXMgPSBFbWJlci5nZXQoQXBwLkJsb2csICdyZWxhdGlvbnNoaXBOYW1l
        cycpOwogICAgcmVsYXRpb25zaGlwTmFtZXMuaGFzTWFueTsKICAgIC8vPT4g
        Wyd1c2VycycsICdwb3N0cyddCiAgICByZWxhdGlvbnNoaXBOYW1lcy5iZWxv
        bmdzVG87CiAgICAvLz0+IFsnb3duZXInXQogICAgYGBgCgogICAgQHByb3Bl
        cnR5IHJlbGF0aW9uc2hpcE5hbWVzCiAgICBAc3RhdGljCiAgICBAdHlwZSBP
        YmplY3QKICAgIEByZWFkT25seQogICovCiAgcmVsYXRpb25zaGlwTmFtZXM6
        IEVtYmVyLmNvbXB1dGVkKGZ1bmN0aW9uKCkgewogICAgdmFyIG5hbWVzID0g
        eyBoYXNNYW55OiBbXSwgYmVsb25nc1RvOiBbXSB9OwoKICAgIHRoaXMuZWFj
        aENvbXB1dGVkUHJvcGVydHkoZnVuY3Rpb24obmFtZSwgbWV0YSkgewogICAg
        ICBpZiAobWV0YS5pc1JlbGF0aW9uc2hpcCkgewogICAgICAgIG5hbWVzW21l
        dGEua2luZF0ucHVzaChuYW1lKTsKICAgICAgfQogICAgfSk7CgogICAgcmV0
        dXJuIG5hbWVzOwogIH0pLAoKICAvKioKICAgIEFuIGFycmF5IG9mIHR5cGVz
        IGRpcmVjdGx5IHJlbGF0ZWQgdG8gYSBtb2RlbC4gRWFjaCB0eXBlIHdpbGwg
        YmUKICAgIGluY2x1ZGVkIG9uY2UsIHJlZ2FyZGxlc3Mgb2YgdGhlIG51bWJl
        ciBvZiByZWxhdGlvbnNoaXBzIGl0IGhhcyB3aXRoCiAgICB0aGUgbW9kZWwu
        CgogICAgRm9yIGV4YW1wbGUsIGdpdmVuIGEgbW9kZWwgd2l0aCB0aGlzIGRl
        ZmluaXRpb246CgogICAgYGBgamF2YXNjcmlwdAogICAgQXBwLkJsb2cgPSBE
        Uy5Nb2RlbC5leHRlbmQoewogICAgICB1c2VyczogRFMuaGFzTWFueSgndXNl
        cicpLAogICAgICBvd25lcjogRFMuYmVsb25nc1RvKCd1c2VyJyksCgogICAg
        ICBwb3N0czogRFMuaGFzTWFueSgncG9zdCcpCiAgICB9KTsKICAgIGBgYAoK
        ICAgIFRoaXMgcHJvcGVydHkgd291bGQgY29udGFpbiB0aGUgZm9sbG93aW5n
        OgoKICAgIGBgYGphdmFzY3JpcHQKICAgIHZhciByZWxhdGVkVHlwZXMgPSBF
        bWJlci5nZXQoQXBwLkJsb2csICdyZWxhdGVkVHlwZXMnKTsKICAgIC8vPT4g
        WyBBcHAuVXNlciwgQXBwLlBvc3QgXQogICAgYGBgCgogICAgQHByb3BlcnR5
        IHJlbGF0ZWRUeXBlcwogICAgQHN0YXRpYwogICAgQHR5cGUgRW1iZXIuQXJy
        YXkKICAgIEByZWFkT25seQogICovCiAgcmVsYXRlZFR5cGVzOiBFbWJlci5j
        b21wdXRlZChmdW5jdGlvbigpIHsKICAgIHZhciB0eXBlLAogICAgICAgIHR5
        cGVzID0gRW1iZXIuQSgpOwoKICAgIC8vIExvb3AgdGhyb3VnaCBlYWNoIGNv
        bXB1dGVkIHByb3BlcnR5IG9uIHRoZSBjbGFzcywKICAgIC8vIGFuZCBjcmVh
        dGUgYW4gYXJyYXkgb2YgdGhlIHVuaXF1ZSB0eXBlcyBpbnZvbHZlZAogICAg
        Ly8gaW4gcmVsYXRpb25zaGlwcwogICAgdGhpcy5lYWNoQ29tcHV0ZWRQcm9w
        ZXJ0eShmdW5jdGlvbihuYW1lLCBtZXRhKSB7CiAgICAgIGlmIChtZXRhLmlz
        UmVsYXRpb25zaGlwKSB7CiAgICAgICAgdHlwZSA9IG1ldGEudHlwZTsKCiAg
        ICAgICAgaWYgKHR5cGVvZiB0eXBlID09PSAnc3RyaW5nJykgewogICAgICAg
        ICAgdHlwZSA9IGdldCh0aGlzLCB0eXBlLCBmYWxzZSkgfHwgdGhpcy5zdG9y
        ZS5tb2RlbEZvcih0eXBlKTsKICAgICAgICB9CgogICAgICAgIEVtYmVyLmFz
        c2VydCgiWW91IHNwZWNpZmllZCBhIGhhc01hbnkgKCIgKyBtZXRhLnR5cGUg
        KyAiKSBvbiAiICsgbWV0YS5wYXJlbnRUeXBlICsgIiBidXQgIiArIG1ldGEu
        dHlwZSArICIgd2FzIG5vdCBmb3VuZC4iLCAgdHlwZSk7CgogICAgICAgIGlm
        ICghdHlwZXMuY29udGFpbnModHlwZSkpIHsKICAgICAgICAgIEVtYmVyLmFz
        c2VydCgiVHJ5aW5nIHRvIHNpZGVsb2FkICIgKyBuYW1lICsgIiBvbiAiICsg
        dGhpcy50b1N0cmluZygpICsgIiBidXQgdGhlIHR5cGUgZG9lc24ndCBleGlz
        dC4iLCAhIXR5cGUpOwogICAgICAgICAgdHlwZXMucHVzaCh0eXBlKTsKICAg
        ICAgICB9CiAgICAgIH0KICAgIH0pOwoKICAgIHJldHVybiB0eXBlczsKICB9
        KSwKCiAgLyoqCiAgICBBIG1hcCB3aG9zZSBrZXlzIGFyZSB0aGUgcmVsYXRp
        b25zaGlwcyBvZiBhIG1vZGVsIGFuZCB3aG9zZSB2YWx1ZXMgYXJlCiAgICBy
        ZWxhdGlvbnNoaXAgZGVzY3JpcHRvcnMuCgogICAgRm9yIGV4YW1wbGUsIGdp
        dmVuIGEgbW9kZWwgd2l0aCB0aGlzCiAgICBkZWZpbml0aW9uOgoKICAgIGBg
        YGphdmFzY3JpcHQKICAgIEFwcC5CbG9nID0gRFMuTW9kZWwuZXh0ZW5kKHsK
        ICAgICAgdXNlcnM6IERTLmhhc01hbnkoJ3VzZXInKSwKICAgICAgb3duZXI6
        IERTLmJlbG9uZ3NUbygndXNlcicpLAoKICAgICAgcG9zdHM6IERTLmhhc01h
        bnkoJ3Bvc3QnKQogICAgfSk7CiAgICBgYGAKCiAgICBUaGlzIHByb3BlcnR5
        IHdvdWxkIGNvbnRhaW4gdGhlIGZvbGxvd2luZzoKCiAgICBgYGBqYXZhc2Ny
        aXB0CiAgICB2YXIgcmVsYXRpb25zaGlwc0J5TmFtZSA9IEVtYmVyLmdldChB
        cHAuQmxvZywgJ3JlbGF0aW9uc2hpcHNCeU5hbWUnKTsKICAgIHJlbGF0aW9u
        c2hpcHNCeU5hbWUuZ2V0KCd1c2VycycpOwogICAgLy89PiB7IGtleTogJ3Vz
        ZXJzJywga2luZDogJ2hhc01hbnknLCB0eXBlOiBBcHAuVXNlciB9CiAgICBy
        ZWxhdGlvbnNoaXBzQnlOYW1lLmdldCgnb3duZXInKTsKICAgIC8vPT4geyBr
        ZXk6ICdvd25lcicsIGtpbmQ6ICdiZWxvbmdzVG8nLCB0eXBlOiBBcHAuVXNl
        ciB9CiAgICBgYGAKCiAgICBAcHJvcGVydHkgcmVsYXRpb25zaGlwc0J5TmFt
        ZQogICAgQHN0YXRpYwogICAgQHR5cGUgRW1iZXIuTWFwCiAgICBAcmVhZE9u
        bHkKICAqLwogIHJlbGF0aW9uc2hpcHNCeU5hbWU6IEVtYmVyLmNvbXB1dGVk
        KGZ1bmN0aW9uKCkgewogICAgdmFyIG1hcCA9IEVtYmVyLk1hcC5jcmVhdGUo
        KSwgdHlwZTsKCiAgICB0aGlzLmVhY2hDb21wdXRlZFByb3BlcnR5KGZ1bmN0
        aW9uKG5hbWUsIG1ldGEpIHsKICAgICAgaWYgKG1ldGEuaXNSZWxhdGlvbnNo
        aXApIHsKICAgICAgICBtZXRhLmtleSA9IG5hbWU7CiAgICAgICAgdHlwZSA9
        IG1ldGEudHlwZTsKCiAgICAgICAgaWYgKCF0eXBlICYmIG1ldGEua2luZCA9
        PT0gJ2hhc01hbnknKSB7CiAgICAgICAgICB0eXBlID0gRW1iZXIuU3RyaW5n
        LnNpbmd1bGFyaXplKG5hbWUpOwogICAgICAgIH0gZWxzZSBpZiAoIXR5cGUp
        IHsKICAgICAgICAgIHR5cGUgPSBuYW1lOwogICAgICAgIH0KCiAgICAgICAg
        aWYgKHR5cGVvZiB0eXBlID09PSAnc3RyaW5nJykgewogICAgICAgICAgbWV0
        YS50eXBlID0gdGhpcy5zdG9yZS5tb2RlbEZvcih0eXBlKTsKICAgICAgICB9
        CgogICAgICAgIG1hcC5zZXQobmFtZSwgbWV0YSk7CiAgICAgIH0KICAgIH0p
        OwoKICAgIHJldHVybiBtYXA7CiAgfSksCgogIC8qKgogICAgQSBtYXAgd2hv
        c2Uga2V5cyBhcmUgdGhlIGZpZWxkcyBvZiB0aGUgbW9kZWwgYW5kIHdob3Nl
        IHZhbHVlcyBhcmUgc3RyaW5ncwogICAgZGVzY3JpYmluZyB0aGUga2luZCBv
        ZiB0aGUgZmllbGQuIEEgbW9kZWwncyBmaWVsZHMgYXJlIHRoZSB1bmlvbiBv
        ZiBhbGwgb2YgaXRzCiAgICBhdHRyaWJ1dGVzIGFuZCByZWxhdGlvbnNoaXBz
        LgoKICAgIEZvciBleGFtcGxlOgoKICAgIGBgYGphdmFzY3JpcHQKCiAgICBB
        cHAuQmxvZyA9IERTLk1vZGVsLmV4dGVuZCh7CiAgICAgIHVzZXJzOiBEUy5o
        YXNNYW55KCd1c2VyJyksCiAgICAgIG93bmVyOiBEUy5iZWxvbmdzVG8oJ3Vz
        ZXInKSwKCiAgICAgIHBvc3RzOiBEUy5oYXNNYW55KCdwb3N0JyksCgogICAg
        ICB0aXRsZTogRFMuYXR0cignc3RyaW5nJykKICAgIH0pOwoKICAgIHZhciBm
        aWVsZHMgPSBFbWJlci5nZXQoQXBwLkJsb2csICdmaWVsZHMnKTsKICAgIGZp
        ZWxkcy5mb3JFYWNoKGZ1bmN0aW9uKGZpZWxkLCBraW5kKSB7CiAgICAgIGNv
        bnNvbGUubG9nKGZpZWxkLCBraW5kKTsKICAgIH0pOwoKICAgIC8vIHByaW50
        czoKICAgIC8vIHVzZXJzLCBoYXNNYW55CiAgICAvLyBvd25lciwgYmVsb25n
        c1RvCiAgICAvLyBwb3N0cywgaGFzTWFueQogICAgLy8gdGl0bGUsIGF0dHJp
        YnV0ZQogICAgYGBgCgogICAgQHByb3BlcnR5IGZpZWxkcwogICAgQHN0YXRp
        YwogICAgQHR5cGUgRW1iZXIuTWFwCiAgICBAcmVhZE9ubHkKICAqLwogIGZp
        ZWxkczogRW1iZXIuY29tcHV0ZWQoZnVuY3Rpb24oKSB7CiAgICB2YXIgbWFw
        ID0gRW1iZXIuTWFwLmNyZWF0ZSgpOwoKICAgIHRoaXMuZWFjaENvbXB1dGVk
        UHJvcGVydHkoZnVuY3Rpb24obmFtZSwgbWV0YSkgewogICAgICBpZiAobWV0
        YS5pc1JlbGF0aW9uc2hpcCkgewogICAgICAgIG1hcC5zZXQobmFtZSwgbWV0
        YS5raW5kKTsKICAgICAgfSBlbHNlIGlmIChtZXRhLmlzQXR0cmlidXRlKSB7
        CiAgICAgICAgbWFwLnNldChuYW1lLCAnYXR0cmlidXRlJyk7CiAgICAgIH0K
        ICAgIH0pOwoKICAgIHJldHVybiBtYXA7CiAgfSksCgogIC8qKgogICAgR2l2
        ZW4gYSBjYWxsYmFjaywgaXRlcmF0ZXMgb3ZlciBlYWNoIG9mIHRoZSByZWxh
        dGlvbnNoaXBzIGluIHRoZSBtb2RlbCwKICAgIGludm9raW5nIHRoZSBjYWxs
        YmFjayB3aXRoIHRoZSBuYW1lIG9mIGVhY2ggcmVsYXRpb25zaGlwIGFuZCBp
        dHMgcmVsYXRpb25zaGlwCiAgICBkZXNjcmlwdG9yLgoKICAgIEBtZXRob2Qg
        ZWFjaFJlbGF0aW9uc2hpcAogICAgQHN0YXRpYwogICAgQHBhcmFtIHtGdW5j
        dGlvbn0gY2FsbGJhY2sgdGhlIGNhbGxiYWNrIHRvIGludm9rZQogICAgQHBh
        cmFtIHthbnl9IGJpbmRpbmcgdGhlIHZhbHVlIHRvIHdoaWNoIHRoZSBjYWxs
        YmFjaydzIGB0aGlzYCBzaG91bGQgYmUgYm91bmQKICAqLwogIGVhY2hSZWxh
        dGlvbnNoaXA6IGZ1bmN0aW9uKGNhbGxiYWNrLCBiaW5kaW5nKSB7CiAgICBn
        ZXQodGhpcywgJ3JlbGF0aW9uc2hpcHNCeU5hbWUnKS5mb3JFYWNoKGZ1bmN0
        aW9uKG5hbWUsIHJlbGF0aW9uc2hpcCkgewogICAgICBjYWxsYmFjay5jYWxs
        KGJpbmRpbmcsIG5hbWUsIHJlbGF0aW9uc2hpcCk7CiAgICB9KTsKICB9LAoK
        ICAvKioKICAgIEdpdmVuIGEgY2FsbGJhY2ssIGl0ZXJhdGVzIG92ZXIgZWFj
        aCBvZiB0aGUgdHlwZXMgcmVsYXRlZCB0byBhIG1vZGVsLAogICAgaW52b2tp
        bmcgdGhlIGNhbGxiYWNrIHdpdGggdGhlIHJlbGF0ZWQgdHlwZSdzIGNsYXNz
        LiBFYWNoIHR5cGUgd2lsbCBiZQogICAgcmV0dXJuZWQganVzdCBvbmNlLCBy
        ZWdhcmRsZXNzIG9mIGhvdyBtYW55IGRpZmZlcmVudCByZWxhdGlvbnNoaXBz
        IGl0IGhhcwogICAgd2l0aCBhIG1vZGVsLgoKICAgIEBtZXRob2QgZWFjaFJl
        bGF0ZWRUeXBlCiAgICBAc3RhdGljCiAgICBAcGFyYW0ge0Z1bmN0aW9ufSBj
        YWxsYmFjayB0aGUgY2FsbGJhY2sgdG8gaW52b2tlCiAgICBAcGFyYW0ge2Fu
        eX0gYmluZGluZyB0aGUgdmFsdWUgdG8gd2hpY2ggdGhlIGNhbGxiYWNrJ3Mg
        YHRoaXNgIHNob3VsZCBiZSBib3VuZAogICovCiAgZWFjaFJlbGF0ZWRUeXBl
        OiBmdW5jdGlvbihjYWxsYmFjaywgYmluZGluZykgewogICAgZ2V0KHRoaXMs
        ICdyZWxhdGVkVHlwZXMnKS5mb3JFYWNoKGZ1bmN0aW9uKHR5cGUpIHsKICAg
        ICAgY2FsbGJhY2suY2FsbChiaW5kaW5nLCB0eXBlKTsKICAgIH0pOwogIH0K
        fSk7CgpEUy5Nb2RlbC5yZW9wZW4oewogIC8qKgogICAgR2l2ZW4gYSBjYWxs
        YmFjaywgaXRlcmF0ZXMgb3ZlciBlYWNoIG9mIHRoZSByZWxhdGlvbnNoaXBz
        IGluIHRoZSBtb2RlbCwKICAgIGludm9raW5nIHRoZSBjYWxsYmFjayB3aXRo
        IHRoZSBuYW1lIG9mIGVhY2ggcmVsYXRpb25zaGlwIGFuZCBpdHMgcmVsYXRp
        b25zaGlwCiAgICBkZXNjcmlwdG9yLgoKICAgIEBtZXRob2QgZWFjaFJlbGF0
        aW9uc2hpcAogICAgQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2sgdGhlIGNh
        bGxiYWNrIHRvIGludm9rZQogICAgQHBhcmFtIHthbnl9IGJpbmRpbmcgdGhl
        IHZhbHVlIHRvIHdoaWNoIHRoZSBjYWxsYmFjaydzIGB0aGlzYCBzaG91bGQg
        YmUgYm91bmQKICAqLwogIGVhY2hSZWxhdGlvbnNoaXA6IGZ1bmN0aW9uKGNh
        bGxiYWNrLCBiaW5kaW5nKSB7CiAgICB0aGlzLmNvbnN0cnVjdG9yLmVhY2hS
        ZWxhdGlvbnNoaXAoY2FsbGJhY2ssIGJpbmRpbmcpOwogIH0KfSk7Cgp9KSgp
        OwoKCgooZnVuY3Rpb24oKSB7Ci8qKgogIEBtb2R1bGUgZW1iZXItZGF0YQoq
        LwoKfSkoKTsKCgoKKGZ1bmN0aW9uKCkgewovKioKICBAbW9kdWxlIGVtYmVy
        LWRhdGEKKi8KCnZhciBnZXQgPSBFbWJlci5nZXQsIHNldCA9IEVtYmVyLnNl
        dDsKdmFyIGZvckVhY2ggPSBFbWJlci5FbnVtZXJhYmxlVXRpbHMuZm9yRWFj
        aDsKCi8qKgogIEBjbGFzcyBSZWNvcmRBcnJheU1hbmFnZXIKICBAbmFtZXNw
        YWNlIERTCiAgQHByaXZhdGUKICBAZXh0ZW5kcyBFbWJlci5PYmplY3QKKi8K
        RFMuUmVjb3JkQXJyYXlNYW5hZ2VyID0gRW1iZXIuT2JqZWN0LmV4dGVuZCh7
        CiAgaW5pdDogZnVuY3Rpb24oKSB7CiAgICB0aGlzLmZpbHRlcmVkUmVjb3Jk
        QXJyYXlzID0gRW1iZXIuTWFwV2l0aERlZmF1bHQuY3JlYXRlKHsKICAgICAg
        ZGVmYXVsdFZhbHVlOiBmdW5jdGlvbigpIHsgcmV0dXJuIFtdOyB9CiAgICB9
        KTsKCiAgICB0aGlzLmNoYW5nZWRSZWNvcmRzID0gW107CiAgfSwKCiAgcmVj
        b3JkRGlkQ2hhbmdlOiBmdW5jdGlvbihyZWNvcmQpIHsKICAgIGlmICh0aGlz
        LmNoYW5nZWRSZWNvcmRzLnB1c2gocmVjb3JkKSAhPT0gMSkgeyByZXR1cm47
        IH0KCiAgICBFbWJlci5ydW4uc2NoZWR1bGUoJ2FjdGlvbnMnLCB0aGlzLCB0
        aGlzLnVwZGF0ZVJlY29yZEFycmF5cyk7CiAgfSwKCiAgcmVjb3JkQXJyYXlz
        Rm9yUmVjb3JkOiBmdW5jdGlvbihyZWNvcmQpIHsKICAgIHJlY29yZC5fcmVj
        b3JkQXJyYXlzID0gcmVjb3JkLl9yZWNvcmRBcnJheXMgfHwgRW1iZXIuT3Jk
        ZXJlZFNldC5jcmVhdGUoKTsKICAgIHJldHVybiByZWNvcmQuX3JlY29yZEFy
        cmF5czsKICB9LAoKICAvKioKICAgIFRoaXMgbWV0aG9kIGlzIGludm9rZWQg
        d2hlbmV2ZXIgZGF0YSBpcyBsb2FkZWQgaW50byB0aGUgc3RvcmUgYnkgdGhl
        CiAgICBhZGFwdGVyIG9yIHVwZGF0ZWQgYnkgdGhlIGFkYXB0ZXIsIG9yIHdo
        ZW4gYSByZWNvcmQgaGFzIGNoYW5nZWQuCgogICAgSXQgdXBkYXRlcyBhbGwg
        cmVjb3JkIGFycmF5cyB0aGF0IGEgcmVjb3JkIGJlbG9uZ3MgdG8uCgogICAg
        VG8gYXZvaWQgdGhyYXNoaW5nLCBpdCBvbmx5IHJ1bnMgYXQgbW9zdCBvbmNl
        IHBlciBydW4gbG9vcC4KCiAgICBAbWV0aG9kIHVwZGF0ZVJlY29yZEFycmF5
        cwogICAgQHBhcmFtIHtDbGFzc30gdHlwZQogICAgQHBhcmFtIHtOdW1iZXJ8
        U3RyaW5nfSBjbGllbnRJZAogICovCiAgdXBkYXRlUmVjb3JkQXJyYXlzOiBm
        dW5jdGlvbigpIHsKICAgIGZvckVhY2godGhpcy5jaGFuZ2VkUmVjb3Jkcywg
        ZnVuY3Rpb24ocmVjb3JkKSB7CiAgICAgIGlmIChnZXQocmVjb3JkLCAnaXNE
        ZWxldGVkJykpIHsKICAgICAgICB0aGlzLl9yZWNvcmRXYXNEZWxldGVkKHJl
        Y29yZCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5fcmVjb3JkV2Fz
        Q2hhbmdlZChyZWNvcmQpOwogICAgICB9CiAgICB9LCB0aGlzKTsKCiAgICB0
        aGlzLmNoYW5nZWRSZWNvcmRzLmxlbmd0aCA9IDA7CiAgfSwKCiAgX3JlY29y
        ZFdhc0RlbGV0ZWQ6IGZ1bmN0aW9uIChyZWNvcmQpIHsKICAgIHZhciByZWNv
        cmRBcnJheXMgPSByZWNvcmQuX3JlY29yZEFycmF5czsKCiAgICBpZiAoIXJl
        Y29yZEFycmF5cykgeyByZXR1cm47IH0KCiAgICBmb3JFYWNoKHJlY29yZEFy
        cmF5cywgZnVuY3Rpb24oYXJyYXkpIHsKICAgICAgYXJyYXkucmVtb3ZlUmVj
        b3JkKHJlY29yZCk7CiAgICB9KTsKICB9LAoKICBfcmVjb3JkV2FzQ2hhbmdl
        ZDogZnVuY3Rpb24gKHJlY29yZCkgewogICAgdmFyIHR5cGUgPSByZWNvcmQu
        Y29uc3RydWN0b3IsCiAgICAgICAgcmVjb3JkQXJyYXlzID0gdGhpcy5maWx0
        ZXJlZFJlY29yZEFycmF5cy5nZXQodHlwZSksCiAgICAgICAgZmlsdGVyOwoK
        ICAgIGZvckVhY2gocmVjb3JkQXJyYXlzLCBmdW5jdGlvbihhcnJheSkgewog
        ICAgICBmaWx0ZXIgPSBnZXQoYXJyYXksICdmaWx0ZXJGdW5jdGlvbicpOwog
        ICAgICB0aGlzLnVwZGF0ZVJlY29yZEFycmF5KGFycmF5LCBmaWx0ZXIsIHR5
        cGUsIHJlY29yZCk7CiAgICB9LCB0aGlzKTsKCiAgICAvLyBsb29wIHRocm91
        Z2ggYWxsIG1hbnlBcnJheXMgY29udGFpbmluZyBhbiB1bmxvYWRlZCBjb3B5
        IG9mIHRoaXMKICAgIC8vIGNsaWVudElkIGFuZCBub3RpZnkgdGhlbSB0aGF0
        IHRoZSByZWNvcmQgd2FzIGxvYWRlZC4KICAgIHZhciBtYW55QXJyYXlzID0g
        cmVjb3JkLl9sb2FkaW5nUmVjb3JkQXJyYXlzOwoKICAgIGlmIChtYW55QXJy
        YXlzKSB7CiAgICAgIGZvciAodmFyIGk9MCwgbD1tYW55QXJyYXlzLmxlbmd0
        aDsgaTxsOyBpKyspIHsKICAgICAgICBtYW55QXJyYXlzW2ldLmxvYWRlZFJl
        Y29yZCgpOwogICAgICB9CgogICAgICByZWNvcmQuX2xvYWRpbmdSZWNvcmRB
        cnJheXMgPSBbXTsKICAgIH0KICB9LAoKICAvKioKICAgIFVwZGF0ZSBhbiBp
        bmRpdmlkdWFsIGZpbHRlci4KCiAgICBAbWV0aG9kIHVwZGF0ZVJlY29yZEFy
        cmF5CiAgICBAcGFyYW0ge0RTLkZpbHRlcmVkUmVjb3JkQXJyYXl9IGFycmF5
        CiAgICBAcGFyYW0ge0Z1bmN0aW9ufSBmaWx0ZXIKICAgIEBwYXJhbSB7Q2xh
        c3N9IHR5cGUKICAgIEBwYXJhbSB7TnVtYmVyfFN0cmluZ30gY2xpZW50SWQK
        ICAqLwogIHVwZGF0ZVJlY29yZEFycmF5OiBmdW5jdGlvbihhcnJheSwgZmls
        dGVyLCB0eXBlLCByZWNvcmQpIHsKICAgIHZhciBzaG91bGRCZUluQXJyYXk7
        CgogICAgaWYgKCFmaWx0ZXIpIHsKICAgICAgc2hvdWxkQmVJbkFycmF5ID0g
        dHJ1ZTsKICAgIH0gZWxzZSB7CiAgICAgIHNob3VsZEJlSW5BcnJheSA9IGZp
        bHRlcihyZWNvcmQpOwogICAgfQoKICAgIHZhciByZWNvcmRBcnJheXMgPSB0
        aGlzLnJlY29yZEFycmF5c0ZvclJlY29yZChyZWNvcmQpOwoKICAgIGlmIChz
        aG91bGRCZUluQXJyYXkpIHsKICAgICAgcmVjb3JkQXJyYXlzLmFkZChhcnJh
        eSk7CiAgICAgIGFycmF5LmFkZFJlY29yZChyZWNvcmQpOwogICAgfSBlbHNl
        IGlmICghc2hvdWxkQmVJbkFycmF5KSB7CiAgICAgIHJlY29yZEFycmF5cy5y
        ZW1vdmUoYXJyYXkpOwogICAgICBhcnJheS5yZW1vdmVSZWNvcmQocmVjb3Jk
        KTsKICAgIH0KICB9LAoKICAvKioKICAgIFRoaXMgbWV0aG9kIGlzIGludm9r
        ZWQgaWYgdGhlIGBmaWx0ZXJGdW5jdGlvbmAgcHJvcGVydHkgaXMKICAgIGNo
        YW5nZWQgb24gYSBgRFMuRmlsdGVyZWRSZWNvcmRBcnJheWAuCgogICAgSXQg
        ZXNzZW50aWFsbHkgcmUtcnVucyB0aGUgZmlsdGVyIGZyb20gc2NyYXRjaC4g
        VGhpcyBzYW1lCiAgICBtZXRob2QgaXMgaW52b2tlZCB3aGVuIHRoZSBmaWx0
        ZXIgaXMgY3JlYXRlZCBpbiB0aCBmaXJzdCBwbGFjZS4KCiAgICBAbWV0aG9k
        IHVwZGF0ZUZpbHRlcgogICAgQHBhcmFtIGFycmF5CiAgICBAcGFyYW0gdHlw
        ZQogICAgQHBhcmFtIGZpbHRlcgogICovCiAgdXBkYXRlRmlsdGVyOiBmdW5j
        dGlvbihhcnJheSwgdHlwZSwgZmlsdGVyKSB7CiAgICB2YXIgdHlwZU1hcCA9
        IHRoaXMuc3RvcmUudHlwZU1hcEZvcih0eXBlKSwKICAgICAgICByZWNvcmRz
        ID0gdHlwZU1hcC5yZWNvcmRzLCByZWNvcmQ7CgogICAgZm9yICh2YXIgaT0w
        LCBsPXJlY29yZHMubGVuZ3RoOyBpPGw7IGkrKykgewogICAgICByZWNvcmQg
        PSByZWNvcmRzW2ldOwoKICAgICAgaWYgKCFnZXQocmVjb3JkLCAnaXNEZWxl
        dGVkJykgJiYgIWdldChyZWNvcmQsICdpc0VtcHR5JykpIHsKICAgICAgICB0
        aGlzLnVwZGF0ZVJlY29yZEFycmF5KGFycmF5LCBmaWx0ZXIsIHR5cGUsIHJl
        Y29yZCk7CiAgICAgIH0KICAgIH0KICB9LAoKICAvKioKICAgIENyZWF0ZSBh
        IGBEUy5NYW55QXJyYXlgIGZvciBhIHR5cGUgYW5kIGxpc3Qgb2YgcmVjb3Jk
        IHJlZmVyZW5jZXMsIGFuZCBpbmRleAogICAgdGhlIGBNYW55QXJyYXlgIHVu
        ZGVyIGVhY2ggcmVmZXJlbmNlLiBUaGlzIGFsbG93cyB1cyB0byBlZmZpY2ll
        bnRseSByZW1vdmUKICAgIHJlY29yZHMgZnJvbSBgTWFueUFycmF5YHMgd2hl
        biB0aGV5IGFyZSBkZWxldGVkLgoKICAgIEBtZXRob2QgY3JlYXRlTWFueUFy
        cmF5CiAgICBAcGFyYW0ge0NsYXNzfSB0eXBlCiAgICBAcGFyYW0ge0FycmF5
        fSByZWZlcmVuY2VzCiAgICBAcmV0dXJuIHtEUy5NYW55QXJyYXl9CiAgKi8K
        ICBjcmVhdGVNYW55QXJyYXk6IGZ1bmN0aW9uKHR5cGUsIHJlY29yZHMpIHsK
        ICAgIHZhciBtYW55QXJyYXkgPSBEUy5NYW55QXJyYXkuY3JlYXRlKHsKICAg
        ICAgdHlwZTogdHlwZSwKICAgICAgY29udGVudDogcmVjb3JkcywKICAgICAg
        c3RvcmU6IHRoaXMuc3RvcmUKICAgIH0pOwoKICAgIGZvckVhY2gocmVjb3Jk
        cywgZnVuY3Rpb24ocmVjb3JkKSB7CiAgICAgIHZhciBhcnJheXMgPSB0aGlz
        LnJlY29yZEFycmF5c0ZvclJlY29yZChyZWNvcmQpOwogICAgICBhcnJheXMu
        YWRkKG1hbnlBcnJheSk7CiAgICB9LCB0aGlzKTsKCiAgICByZXR1cm4gbWFu
        eUFycmF5OwogIH0sCgogIC8qKgogICAgQ3JlYXRlIGEgYERTLlJlY29yZEFy
        cmF5YCBmb3IgYSB0eXBlIGFuZCByZWdpc3RlciBpdCBmb3IgdXBkYXRlcy4K
        CiAgICBAbWV0aG9kIGNyZWF0ZVJlY29yZEFycmF5CiAgICBAcGFyYW0ge0Ns
        YXNzfSB0eXBlCiAgICBAcmV0dXJuIHtEUy5SZWNvcmRBcnJheX0KICAqLwog
        IGNyZWF0ZVJlY29yZEFycmF5OiBmdW5jdGlvbih0eXBlKSB7CiAgICB2YXIg
        YXJyYXkgPSBEUy5SZWNvcmRBcnJheS5jcmVhdGUoewogICAgICB0eXBlOiB0
        eXBlLAogICAgICBjb250ZW50OiBFbWJlci5BKCksCiAgICAgIHN0b3JlOiB0
        aGlzLnN0b3JlLAogICAgICBpc0xvYWRlZDogdHJ1ZQogICAgfSk7CgogICAg
        dGhpcy5yZWdpc3RlckZpbHRlcmVkUmVjb3JkQXJyYXkoYXJyYXksIHR5cGUp
        OwoKICAgIHJldHVybiBhcnJheTsKICB9LAoKICAvKioKICAgIENyZWF0ZSBh
        IGBEUy5GaWx0ZXJlZFJlY29yZEFycmF5YCBmb3IgYSB0eXBlIGFuZCByZWdp
        c3RlciBpdCBmb3IgdXBkYXRlcy4KCiAgICBAbWV0aG9kIGNyZWF0ZUZpbHRl
        cmVkUmVjb3JkQXJyYXkKICAgIEBwYXJhbSB7Q2xhc3N9IHR5cGUKICAgIEBw
        YXJhbSB7RnVuY3Rpb259IGZpbHRlcgogICAgQHJldHVybiB7RFMuRmlsdGVy
        ZWRSZWNvcmRBcnJheX0KICAqLwogIGNyZWF0ZUZpbHRlcmVkUmVjb3JkQXJy
        YXk6IGZ1bmN0aW9uKHR5cGUsIGZpbHRlcikgewogICAgdmFyIGFycmF5ID0g
        RFMuRmlsdGVyZWRSZWNvcmRBcnJheS5jcmVhdGUoewogICAgICB0eXBlOiB0
        eXBlLAogICAgICBjb250ZW50OiBFbWJlci5BKCksCiAgICAgIHN0b3JlOiB0
        aGlzLnN0b3JlLAogICAgICBtYW5hZ2VyOiB0aGlzLAogICAgICBmaWx0ZXJG
        dW5jdGlvbjogZmlsdGVyCiAgICB9KTsKCiAgICB0aGlzLnJlZ2lzdGVyRmls
        dGVyZWRSZWNvcmRBcnJheShhcnJheSwgdHlwZSwgZmlsdGVyKTsKCiAgICBy
        ZXR1cm4gYXJyYXk7CiAgfSwKCiAgLyoqCiAgICBDcmVhdGUgYSBgRFMuQWRh
        cHRlclBvcHVsYXRlZFJlY29yZEFycmF5YCBmb3IgYSB0eXBlIHdpdGggZ2l2
        ZW4gcXVlcnkuCgogICAgQG1ldGhvZCBjcmVhdGVBZGFwdGVyUG9wdWxhdGVk
        UmVjb3JkQXJyYXkKICAgIEBwYXJhbSB7Q2xhc3N9IHR5cGUKICAgIEBwYXJh
        bSB7T2JqZWN0fSBxdWVyeQogICAgQHJldHVybiB7RFMuQWRhcHRlclBvcHVs
        YXRlZFJlY29yZEFycmF5fQogICovCiAgY3JlYXRlQWRhcHRlclBvcHVsYXRl
        ZFJlY29yZEFycmF5OiBmdW5jdGlvbih0eXBlLCBxdWVyeSkgewogICAgcmV0
        dXJuIERTLkFkYXB0ZXJQb3B1bGF0ZWRSZWNvcmRBcnJheS5jcmVhdGUoewog
        ICAgICB0eXBlOiB0eXBlLAogICAgICBxdWVyeTogcXVlcnksCiAgICAgIGNv
        bnRlbnQ6IEVtYmVyLkEoKSwKICAgICAgc3RvcmU6IHRoaXMuc3RvcmUKICAg
        IH0pOwogIH0sCgogIC8qKgogICAgUmVnaXN0ZXIgYSBSZWNvcmRBcnJheSBm
        b3IgYSBnaXZlbiB0eXBlIHRvIGJlIGJhY2tlZCBieQogICAgYSBmaWx0ZXIg
        ZnVuY3Rpb24uIFRoaXMgd2lsbCBjYXVzZSB0aGUgYXJyYXkgdG8gdXBkYXRl
        CiAgICBhdXRvbWF0aWNhbGx5IHdoZW4gcmVjb3JkcyBvZiB0aGF0IHR5cGUg
        Y2hhbmdlIGF0dHJpYnV0ZQogICAgdmFsdWVzIG9yIHN0YXRlcy4KCiAgICBA
        bWV0aG9kIHJlZ2lzdGVyRmlsdGVyZWRSZWNvcmRBcnJheQogICAgQHBhcmFt
        IHtEUy5SZWNvcmRBcnJheX0gYXJyYXkKICAgIEBwYXJhbSB7Q2xhc3N9IHR5
        cGUKICAgIEBwYXJhbSB7RnVuY3Rpb259IGZpbHRlcgogICovCiAgcmVnaXN0
        ZXJGaWx0ZXJlZFJlY29yZEFycmF5OiBmdW5jdGlvbihhcnJheSwgdHlwZSwg
        ZmlsdGVyKSB7CiAgICB2YXIgcmVjb3JkQXJyYXlzID0gdGhpcy5maWx0ZXJl
        ZFJlY29yZEFycmF5cy5nZXQodHlwZSk7CiAgICByZWNvcmRBcnJheXMucHVz
        aChhcnJheSk7CgogICAgdGhpcy51cGRhdGVGaWx0ZXIoYXJyYXksIHR5cGUs
        IGZpbHRlcik7CiAgfSwKCiAgLy8gSW50ZXJuYWxseSwgd2UgbWFpbnRhaW4g
        YSBtYXAgb2YgYWxsIHVubG9hZGVkIElEcyByZXF1ZXN0ZWQgYnkKICAvLyBh
        IE1hbnlBcnJheS4gQXMgdGhlIGFkYXB0ZXIgbG9hZHMgZGF0YSBpbnRvIHRo
        ZSBzdG9yZSwgdGhlCiAgLy8gc3RvcmUgbm90aWZpZXMgYW55IGludGVyZXN0
        ZWQgTWFueUFycmF5cy4gV2hlbiB0aGUgTWFueUFycmF5J3MKICAvLyB0b3Rh
        bCBudW1iZXIgb2YgbG9hZGluZyByZWNvcmRzIGRyb3BzIHRvIHplcm8sIGl0
        IGJlY29tZXMKICAvLyBgaXNMb2FkZWRgIGFuZCBmaXJlcyBhIGBkaWRMb2Fk
        YCBldmVudC4KICByZWdpc3RlcldhaXRpbmdSZWNvcmRBcnJheTogZnVuY3Rp
        b24ocmVjb3JkLCBhcnJheSkgewogICAgdmFyIGxvYWRpbmdSZWNvcmRBcnJh
        eXMgPSByZWNvcmQuX2xvYWRpbmdSZWNvcmRBcnJheXMgfHwgW107CiAgICBs
        b2FkaW5nUmVjb3JkQXJyYXlzLnB1c2goYXJyYXkpOwogICAgcmVjb3JkLl9s
        b2FkaW5nUmVjb3JkQXJyYXlzID0gbG9hZGluZ1JlY29yZEFycmF5czsKICB9
        Cn0pOwoKfSkoKTsKCgoKKGZ1bmN0aW9uKCkgewovKioKICBAbW9kdWxlIGVt
        YmVyLWRhdGEKKi8KCnZhciBnZXQgPSBFbWJlci5nZXQsIHNldCA9IEVtYmVy
        LnNldDsKdmFyIG1hcCA9IEVtYmVyLkFycmF5UG9seWZpbGxzLm1hcDsKCnZh
        ciBlcnJvclByb3BzID0gWydkZXNjcmlwdGlvbicsICdmaWxlTmFtZScsICds
        aW5lTnVtYmVyJywgJ21lc3NhZ2UnLCAnbmFtZScsICdudW1iZXInLCAnc3Rh
        Y2snXTsKCi8qKgogIEEgYERTLkludmFsaWRFcnJvcmAgaXMgdXNlZCBieSBh
        biBhZGFwdGVyIHRvIHNpZ25hbCB0aGUgZXh0ZXJuYWwgQVBJCiAgd2FzIHVu
        YWJsZSB0byBwcm9jZXNzIGEgcmVxdWVzdCBiZWNhdXNlIHRoZSBjb250ZW50
        IHdhcyBub3QKICBzZW1hbnRpY2FsbHkgY29ycmVjdCBvciBtZWFuaW5nZnVs
        IHBlciB0aGUgQVBJLiBVc3VhbGx5IHRoaXMgbWVhbnMgYQogIHJlY29yZCBm
        YWlsZWQgc29tZSBmb3JtIG9mIHNlcnZlciBzaWRlIHZhbGlkYXRpb24uIFdo
        ZW4gYSBwcm9taXNlCiAgZnJvbSBhbiBhZGFwdGVyIGlzIHJlamVjdGVkIHdp
        dGggYSBgRFMuSW52YWxpZEVycm9yYCB0aGUgcmVjb3JkIHdpbGwKICB0cmFu
        c2l0aW9uIHRvIHRoZSBgaW52YWxpZGAgc3RhdGUgYW5kIHRoZSBlcnJvcnMg
        d2lsbCBiZSBzZXQgdG8gdGhlCiAgYGVycm9yc2AgcHJvcGVydHkgb24gdGhl
        IHJlY29yZC4KCiAgRXhhbXBsZQoKICBgYGBqYXZhc2NyaXB0CiAgQXBwLkFw
        cGxpY2F0aW9uQWRhcHRlciA9IERTLlJFU1RBZGFwdGVyLmV4dGVuZCh7CiAg
        ICBhamF4RXJyb3I6IGZ1bmN0aW9uKGpxWEhSKSB7CiAgICAgIHZhciBlcnJv
        ciA9IHRoaXMuX3N1cGVyKGpxWEhSKTsKCiAgICAgIGlmIChqcVhIUiAmJiBq
        cVhIUi5zdGF0dXMgPT09IDQyMikgewogICAgICAgIHZhciBqc29uRXJyb3Jz
        ID0gRW1iZXIuJC5wYXJzZUpTT04oanFYSFIucmVzcG9uc2VUZXh0KVsiZXJy
        b3JzIl07CiAgICAgICAgcmV0dXJuIG5ldyBEUy5JbnZhbGlkRXJyb3IoanNv
        bkVycm9ycyk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIGVycm9y
        OwogICAgICB9CiAgICB9CiAgfSk7CiAgYGBgCgogIEBjbGFzcyBJbnZhbGlk
        RXJyb3IKICBAbmFtZXNwYWNlIERTCiovCkRTLkludmFsaWRFcnJvciA9IGZ1
        bmN0aW9uKGVycm9ycykgewogIHZhciB0bXAgPSBFcnJvci5wcm90b3R5cGUu
        Y29uc3RydWN0b3IuY2FsbCh0aGlzLCAiVGhlIGJhY2tlbmQgcmVqZWN0ZWQg
        dGhlIGNvbW1pdCBiZWNhdXNlIGl0IHdhcyBpbnZhbGlkOiAiICsgRW1iZXIu
        aW5zcGVjdChlcnJvcnMpKTsKICB0aGlzLmVycm9ycyA9IGVycm9yczsKCiAg
        Zm9yICh2YXIgaT0wLCBsPWVycm9yUHJvcHMubGVuZ3RoOyBpPGw7IGkrKykg
        ewogICAgdGhpc1tlcnJvclByb3BzW2ldXSA9IHRtcFtlcnJvclByb3BzW2ld
        XTsKICB9Cn07CkRTLkludmFsaWRFcnJvci5wcm90b3R5cGUgPSBFbWJlci5j
        cmVhdGUoRXJyb3IucHJvdG90eXBlKTsKCi8qKgogIEFuIGFkYXB0ZXIgaXMg
        YW4gb2JqZWN0IHRoYXQgcmVjZWl2ZXMgcmVxdWVzdHMgZnJvbSBhIHN0b3Jl
        IGFuZAogIHRyYW5zbGF0ZXMgdGhlbSBpbnRvIHRoZSBhcHByb3ByaWF0ZSBh
        Y3Rpb24gdG8gdGFrZSBhZ2FpbnN0IHlvdXIKICBwZXJzaXN0ZW5jZSBsYXll
        ci4gVGhlIHBlcnNpc3RlbmNlIGxheWVyIGlzIHVzdWFsbHkgYW4gSFRUUCBB
        UEksIGJ1dAogIG1heSBiZSBhbnl0aGluZywgc3VjaCBhcyB0aGUgYnJvd3Nl
        cidzIGxvY2FsIHN0b3JhZ2UuIFR5cGljYWxseSB0aGUKICBhZGFwdGVyIGlz
        IG5vdCBpbnZva2VkIGRpcmVjdGx5IGluc3RlYWQgaXRzIGZ1bmN0aW9uYWxp
        dHkgaXMgYWNjZXNzZWQKICB0aHJvdWdoIHRoZSBgc3RvcmVgLgoKICAjIyMg
        Q3JlYXRpbmcgYW4gQWRhcHRlcgoKICBGaXJzdCwgY3JlYXRlIGEgbmV3IHN1
        YmNsYXNzIG9mIGBEUy5BZGFwdGVyYDoKCiAgYGBgamF2YXNjcmlwdAogIEFw
        cC5NeUFkYXB0ZXIgPSBEUy5BZGFwdGVyLmV4dGVuZCh7CiAgICAvLyAuLi55
        b3VyIGNvZGUgaGVyZQogIH0pOwogIGBgYAoKICBUbyB0ZWxsIHlvdXIgc3Rv
        cmUgd2hpY2ggYWRhcHRlciB0byB1c2UsIHNldCBpdHMgYGFkYXB0ZXJgIHBy
        b3BlcnR5OgoKICBgYGBqYXZhc2NyaXB0CiAgQXBwLnN0b3JlID0gRFMuU3Rv
        cmUuY3JlYXRlKHsKICAgIGFkYXB0ZXI6ICdNeUFkYXB0ZXInCiAgfSk7CiAg
        YGBgCgogIGBEUy5BZGFwdGVyYCBpcyBhbiBhYnN0cmFjdCBiYXNlIGNsYXNz
        IHRoYXQgeW91IHNob3VsZCBvdmVycmlkZSBpbiB5b3VyCiAgYXBwbGljYXRp
        b24gdG8gY3VzdG9taXplIGl0IGZvciB5b3VyIGJhY2tlbmQuIFRoZSBtaW5p
        bXVtIHNldCBvZiBtZXRob2RzCiAgdGhhdCB5b3Ugc2hvdWxkIGltcGxlbWVu
        dCBpczoKCiAgICAqIGBmaW5kKClgCiAgICAqIGBjcmVhdGVSZWNvcmQoKWAK
        ICAgICogYHVwZGF0ZVJlY29yZCgpYAogICAgKiBgZGVsZXRlUmVjb3JkKClg
        CiAgICAqIGBmaW5kQWxsKClgCiAgICAqIGBmaW5kUXVlcnkoKWAKCiAgVG8g
        aW1wcm92ZSB0aGUgbmV0d29yayBwZXJmb3JtYW5jZSBvZiB5b3VyIGFwcGxp
        Y2F0aW9uLCB5b3UgY2FuIG9wdGltaXplCiAgeW91ciBhZGFwdGVyIGJ5IG92
        ZXJyaWRpbmcgdGhlc2UgbG93ZXItbGV2ZWwgbWV0aG9kczoKCiAgICAqIGBm
        aW5kTWFueSgpYAoKCiAgRm9yIGFuIGV4YW1wbGUgaW1wbGVtZW50YXRpb24s
        IHNlZSBgRFMuUkVTVEFkYXB0ZXJgLCB0aGUKICBpbmNsdWRlZCBSRVNUIGFk
        YXB0ZXIuCgogIEBjbGFzcyBBZGFwdGVyCiAgQG5hbWVzcGFjZSBEUwogIEBl
        eHRlbmRzIEVtYmVyLk9iamVjdAoqLwoKRFMuQWRhcHRlciA9IEVtYmVyLk9i
        amVjdC5leHRlbmQoewoKICAvKioKICAgIElmIHlvdSB3b3VsZCBsaWtlIHlv
        dXIgYWRhcHRlciB0byB1c2UgYSBjdXN0b20gc2VyaWFsaXplciB5b3UgY2Fu
        CiAgICBzZXQgdGhlIGBkZWZhdWx0U2VyaWFsaXplcmAgcHJvcGVydHkgdG8g
        YmUgdGhlIG5hbWUgb2YgdGhlIGN1c3RvbQogICAgc2VyaWFsaXplci4KCiAg
        ICBOb3RlIHRoZSBgZGVmYXVsdFNlcmlhbGl6ZXJgIHNlcmlhbGl6ZXIgaGFz
        IGEgbG93ZXIgcHJpb3JpdHkgdGhlbgogICAgYSBtb2RlbCBzcGVjaWZpYyBz
        ZXJpYWxpemVyIChpLmUuIGBQb3N0U2VyaWFsaXplcmApIG9yIHRoZQogICAg
        YGFwcGxpY2F0aW9uYCBzZXJpYWxpemVyLgoKICAgIGBgYGphdmFzY3JpcHQK
        ICAgIHZhciBEamFuZ29BZGFwdGVyID0gRFMuQWRhcHRlci5leHRlbmQoewog
        ICAgICBkZWZhdWx0U2VyaWFsaXplcjogJ2RqYW5nbycKICAgIH0pOwogICAg
        YGBgCgogICAgQHByb3BlcnR5IGRlZmF1bHRTZXJpYWxpemVyCiAgICBAdHlw
        ZSB7U3RyaW5nfQogICovCgogIC8qKgogICAgVGhlIGBmaW5kKClgIG1ldGhv
        ZCBpcyBpbnZva2VkIHdoZW4gdGhlIHN0b3JlIGlzIGFza2VkIGZvciBhIHJl
        Y29yZCB0aGF0CiAgICBoYXMgbm90IHByZXZpb3VzbHkgYmVlbiBsb2FkZWQu
        IEluIHJlc3BvbnNlIHRvIGBmaW5kKClgIGJlaW5nIGNhbGxlZCwgeW91CiAg
        ICBzaG91bGQgcXVlcnkgeW91ciBwZXJzaXN0ZW5jZSBsYXllciBmb3IgYSBy
        ZWNvcmQgd2l0aCB0aGUgZ2l2ZW4gSUQuIE9uY2UKICAgIGZvdW5kLCB5b3Ug
        Y2FuIGFzeW5jaHJvbm91c2x5IGNhbGwgdGhlIHN0b3JlJ3MgYHB1c2goKWAg
        bWV0aG9kIHRvIHB1c2gKICAgIHRoZSByZWNvcmQgaW50byB0aGUgc3RvcmUu
        CgogICAgSGVyZSBpcyBhbiBleGFtcGxlIGBmaW5kYCBpbXBsZW1lbnRhdGlv
        bjoKCiAgICBgYGBqYXZhc2NyaXB0CiAgICBBcHAuQXBwbGljYXRpb25BZGFw
        dGVyID0gRFMuQWRhcHRlci5leHRlbmQoewogICAgICBmaW5kOiBmdW5jdGlv
        bihzdG9yZSwgdHlwZSwgaWQpIHsKICAgICAgICB2YXIgdXJsID0gW3R5cGUs
        IGlkXS5qb2luKCcvJyk7CgogICAgICAgIHJldHVybiBuZXcgRW1iZXIuUlNW
        UC5Qcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkgewogICAgICAg
        ICAgalF1ZXJ5LmdldEpTT04odXJsKS50aGVuKGZ1bmN0aW9uKGRhdGEpIHsK
        ICAgICAgICAgICAgRW1iZXIucnVuKG51bGwsIHJlc29sdmUsIGRhdGEpOwog
        ICAgICAgICAgfSwgZnVuY3Rpb24oanFYSFIpIHsKICAgICAgICAgICAganFY
        SFIudGhlbiA9IG51bGw7IC8vIHRhbWUgalF1ZXJ5J3MgaWxsIG1hbm5lcmVk
        IHByb21pc2VzCiAgICAgICAgICAgIEVtYmVyLnJ1bihudWxsLCByZWplY3Qs
        IGpxWEhSKTsKICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgICB9CiAg
        ICB9KTsKICAgIGBgYAoKICAgIEBtZXRob2QgZmluZAogICAgQHBhcmFtIHtE
        Uy5TdG9yZX0gc3RvcmUKICAgIEBwYXJhbSB7c3ViY2xhc3Mgb2YgRFMuTW9k
        ZWx9IHR5cGUKICAgIEBwYXJhbSB7U3RyaW5nfSBpZAogICAgQHJldHVybiB7
        UHJvbWlzZX0gcHJvbWlzZQogICovCiAgZmluZDogRW1iZXIucmVxdWlyZWQo
        RnVuY3Rpb24pLAoKICAvKioKICAgIFRoZSBgZmluZEFsbCgpYCBtZXRob2Qg
        aXMgY2FsbGVkIHdoZW4geW91IGNhbGwgYGZpbmRgIG9uIHRoZSBzdG9yZQog
        ICAgd2l0aG91dCBhbiBJRCAoaS5lLiBgc3RvcmUuZmluZCgncG9zdCcpYCku
        CgogICAgRXhhbXBsZQoKICAgIGBgYGphdmFzY3JpcHQKICAgIEFwcC5BcHBs
        aWNhdGlvbkFkYXB0ZXIgPSBEUy5BZGFwdGVyLmV4dGVuZCh7CiAgICAgIGZp
        bmRBbGw6IGZ1bmN0aW9uKHN0b3JlLCB0eXBlLCBzaW5jZVRva2VuKSB7CiAg
        ICAgICAgdmFyIHVybCA9IHR5cGU7CiAgICAgICAgdmFyIHF1ZXJ5ID0geyBz
        aW5jZTogc2luY2VUb2tlbiB9OwogICAgICAgIHJldHVybiBuZXcgRW1iZXIu
        UlNWUC5Qcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkgewogICAg
        ICAgICAgalF1ZXJ5LmdldEpTT04odXJsLCBxdWVyeSkudGhlbihmdW5jdGlv
        bihkYXRhKSB7CiAgICAgICAgICAgIEVtYmVyLnJ1bihudWxsLCByZXNvbHZl
        LCBkYXRhKTsKICAgICAgICAgIH0sIGZ1bmN0aW9uKGpxWEhSKSB7CiAgICAg
        ICAgICAgIGpxWEhSLnRoZW4gPSBudWxsOyAvLyB0YW1lIGpRdWVyeSdzIGls
        bCBtYW5uZXJlZCBwcm9taXNlcwogICAgICAgICAgICBFbWJlci5ydW4obnVs
        bCwgcmVqZWN0LCBqcVhIUik7CiAgICAgICAgICB9KTsKICAgICAgICB9KTsK
        ICAgICAgfQogICAgfSk7CiAgICBgYGAKCiAgICBAcHJpdmF0ZQogICAgQG1l
        dGhvZCBmaW5kQWxsCiAgICBAcGFyYW0ge0RTLlN0b3JlfSBzdG9yZQogICAg
        QHBhcmFtIHtzdWJjbGFzcyBvZiBEUy5Nb2RlbH0gdHlwZQogICAgQHBhcmFt
        IHtTdHJpbmd9IHNpbmNlVG9rZW4KICAgIEByZXR1cm4ge1Byb21pc2V9IHBy
        b21pc2UKICAqLwogIGZpbmRBbGw6IG51bGwsCgogIC8qKgogICAgVGhpcyBt
        ZXRob2QgaXMgY2FsbGVkIHdoZW4geW91IGNhbGwgYGZpbmRgIG9uIHRoZSBz
        dG9yZSB3aXRoIGEKICAgIHF1ZXJ5IG9iamVjdCBhcyB0aGUgc2Vjb25kIHBh
        cmFtZXRlciAoaS5lLiBgc3RvcmUuZmluZCgncGVyc29uJywgewogICAgcGFn
        ZTogMSB9KWApLgoKICAgIEV4YW1wbGUKCiAgICBgYGBqYXZhc2NyaXB0CiAg
        ICBBcHAuQXBwbGljYXRpb25BZGFwdGVyID0gRFMuQWRhcHRlci5leHRlbmQo
        ewogICAgICBmaW5kUXVlcnk6IGZ1bmN0aW9uKHN0b3JlLCB0eXBlLCBxdWVy
        eSkgewogICAgICAgIHZhciB1cmwgPSB0eXBlOwogICAgICAgIHJldHVybiBu
        ZXcgRW1iZXIuUlNWUC5Qcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVj
        dCkgewogICAgICAgICAgalF1ZXJ5LmdldEpTT04odXJsLCBxdWVyeSkudGhl
        bihmdW5jdGlvbihkYXRhKSB7CiAgICAgICAgICAgIEVtYmVyLnJ1bihudWxs
        LCByZXNvbHZlLCBkYXRhKTsKICAgICAgICAgIH0sIGZ1bmN0aW9uKGpxWEhS
        KSB7CiAgICAgICAgICAgIGpxWEhSLnRoZW4gPSBudWxsOyAvLyB0YW1lIGpR
        dWVyeSdzIGlsbCBtYW5uZXJlZCBwcm9taXNlcwogICAgICAgICAgICBFbWJl
        ci5ydW4obnVsbCwgcmVqZWN0LCBqcVhIUik7CiAgICAgICAgICB9KTsKICAg
        ICAgICB9KTsKICAgICAgfQogICAgfSk7CiAgICBgYGAKCiAgICBAcHJpdmF0
        ZQogICAgQG1ldGhvZCBmaW5kUXVlcnkKICAgIEBwYXJhbSB7RFMuU3RvcmV9
        IHN0b3JlCiAgICBAcGFyYW0ge3N1YmNsYXNzIG9mIERTLk1vZGVsfSB0eXBl
        CiAgICBAcGFyYW0ge09iamVjdH0gcXVlcnkKICAgIEBwYXJhbSB7RFMuQWRh
        cHRlclBvcHVsYXRlZFJlY29yZEFycmF5fSByZWNvcmRBcnJheQogICAgQHJl
        dHVybiB7UHJvbWlzZX0gcHJvbWlzZQogICovCiAgZmluZFF1ZXJ5OiBudWxs
        LAoKICAvKioKICAgIElmIHRoZSBnbG9iYWxseSB1bmlxdWUgSURzIGZvciB5
        b3VyIHJlY29yZHMgc2hvdWxkIGJlIGdlbmVyYXRlZCBvbiB0aGUgY2xpZW50
        LAogICAgaW1wbGVtZW50IHRoZSBgZ2VuZXJhdGVJZEZvclJlY29yZCgpYCBt
        ZXRob2QuIFRoaXMgbWV0aG9kIHdpbGwgYmUgaW52b2tlZAogICAgZWFjaCB0
        aW1lIHlvdSBjcmVhdGUgYSBuZXcgcmVjb3JkLCBhbmQgdGhlIHZhbHVlIHJl
        dHVybmVkIGZyb20gaXQgd2lsbCBiZQogICAgYXNzaWduZWQgdG8gdGhlIHJl
        Y29yZCdzIGBwcmltYXJ5S2V5YC4KCiAgICBNb3N0IHRyYWRpdGlvbmFsIFJF
        U1QtbGlrZSBIVFRQIEFQSXMgd2lsbCBub3QgdXNlIHRoaXMgbWV0aG9kLiBJ
        bnN0ZWFkLCB0aGUgSUQKICAgIG9mIHRoZSByZWNvcmQgd2lsbCBiZSBzZXQg
        YnkgdGhlIHNlcnZlciwgYW5kIHlvdXIgYWRhcHRlciB3aWxsIHVwZGF0ZSB0
        aGUgc3RvcmUKICAgIHdpdGggdGhlIG5ldyBJRCB3aGVuIGl0IGNhbGxzIGBk
        aWRDcmVhdGVSZWNvcmQoKWAuIE9ubHkgaW1wbGVtZW50IHRoaXMgbWV0aG9k
        IGlmCiAgICB5b3UgaW50ZW5kIHRvIGdlbmVyYXRlIHJlY29yZCBJRHMgb24g
        dGhlIGNsaWVudC1zaWRlLgoKICAgIFRoZSBgZ2VuZXJhdGVJZEZvclJlY29y
        ZCgpYCBtZXRob2Qgd2lsbCBiZSBpbnZva2VkIHdpdGggdGhlIHJlcXVlc3Rp
        bmcgc3RvcmUgYXMKICAgIHRoZSBmaXJzdCBwYXJhbWV0ZXIgYW5kIHRoZSBu
        ZXdseSBjcmVhdGVkIHJlY29yZCBhcyB0aGUgc2Vjb25kIHBhcmFtZXRlcjoK
        CiAgICBgYGBqYXZhc2NyaXB0CiAgICBnZW5lcmF0ZUlkRm9yUmVjb3JkOiBm
        dW5jdGlvbihzdG9yZSwgcmVjb3JkKSB7CiAgICAgIHZhciB1dWlkID0gQXBw
        LmdlbmVyYXRlVVVJRFdpdGhTdGF0aXN0aWNhbGx5TG93T2Rkc09mQ29sbGlz
        aW9uKCk7CiAgICAgIHJldHVybiB1dWlkOwogICAgfQogICAgYGBgCgogICAg
        QG1ldGhvZCBnZW5lcmF0ZUlkRm9yUmVjb3JkCiAgICBAcGFyYW0ge0RTLlN0
        b3JlfSBzdG9yZQogICAgQHBhcmFtIHtEUy5Nb2RlbH0gcmVjb3JkCiAgICBA
        cmV0dXJuIHtTdHJpbmd8TnVtYmVyfSBpZAogICovCiAgZ2VuZXJhdGVJZEZv
        clJlY29yZDogbnVsbCwKCiAgLyoqCiAgICBQcm94aWVzIHRvIHRoZSBzZXJp
        YWxpemVyJ3MgYHNlcmlhbGl6ZWAgbWV0aG9kLgoKICAgIEV4YW1wbGUKCiAg
        ICBgYGBqYXZhc2NyaXB0CiAgICBBcHAuQXBwbGljYXRpb25BZGFwdGVyID0g
        RFMuQWRhcHRlci5leHRlbmQoewogICAgICBjcmVhdGVSZWNvcmQ6IGZ1bmN0
        aW9uKHN0b3JlLCB0eXBlLCByZWNvcmQpIHsKICAgICAgICB2YXIgZGF0YSA9
        IHRoaXMuc2VyaWFsaXplKHJlY29yZCwgeyBpbmNsdWRlSWQ6IHRydWUgfSk7
        CiAgICAgICAgdmFyIHVybCA9IHR5cGU7CgogICAgICAgIC8vIC4uLgogICAg
        ICB9CiAgICB9KTsKICAgIGBgYAoKICAgIEBtZXRob2Qgc2VyaWFsaXplCiAg
        ICBAcGFyYW0ge0RTLk1vZGVsfSByZWNvcmQKICAgIEBwYXJhbSB7T2JqZWN0
        fSAgIG9wdGlvbnMKICAgIEByZXR1cm4ge09iamVjdH0gc2VyaWFsaXplZCBy
        ZWNvcmQKICAqLwogIHNlcmlhbGl6ZTogZnVuY3Rpb24ocmVjb3JkLCBvcHRp
        b25zKSB7CiAgICByZXR1cm4gZ2V0KHJlY29yZCwgJ3N0b3JlJykuc2VyaWFs
        aXplckZvcihyZWNvcmQuY29uc3RydWN0b3IudHlwZUtleSkuc2VyaWFsaXpl
        KHJlY29yZCwgb3B0aW9ucyk7CiAgfSwKCiAgLyoqCiAgICBJbXBsZW1lbnQg
        dGhpcyBtZXRob2QgaW4gYSBzdWJjbGFzcyB0byBoYW5kbGUgdGhlIGNyZWF0
        aW9uIG9mCiAgICBuZXcgcmVjb3Jkcy4KCiAgICBTZXJpYWxpemVzIHRoZSBy
        ZWNvcmQgYW5kIHNlbmQgaXQgdG8gdGhlIHNlcnZlci4KCiAgICBFeGFtcGxl
        CgogICAgYGBgamF2YXNjcmlwdAogICAgQXBwLkFwcGxpY2F0aW9uQWRhcHRl
        ciA9IERTLkFkYXB0ZXIuZXh0ZW5kKHsKICAgICAgY3JlYXRlUmVjb3JkOiBm
        dW5jdGlvbihzdG9yZSwgdHlwZSwgcmVjb3JkKSB7CiAgICAgICAgdmFyIGRh
        dGEgPSB0aGlzLnNlcmlhbGl6ZShyZWNvcmQsIHsgaW5jbHVkZUlkOiB0cnVl
        IH0pOwogICAgICAgIHZhciB1cmwgPSB0eXBlOwoKICAgICAgICByZXR1cm4g
        bmV3IEVtYmVyLlJTVlAuUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWpl
        Y3QpIHsKICAgICAgICAgIGpRdWVyeS5hamF4KHsKICAgICAgICAgICAgdHlw
        ZTogJ1BPU1QnLAogICAgICAgICAgICB1cmw6IHVybCwKICAgICAgICAgICAg
        ZGF0YVR5cGU6ICdqc29uJywKICAgICAgICAgICAgZGF0YTogZGF0YQogICAg
        ICAgICAgfSkudGhlbihmdW5jdGlvbihkYXRhKSB7CiAgICAgICAgICAgIEVt
        YmVyLnJ1bihudWxsLCByZXNvbHZlLCBkYXRhKTsKICAgICAgICAgIH0sIGZ1
        bmN0aW9uKGpxWEhSKSB7CiAgICAgICAgICAgIGpxWEhSLnRoZW4gPSBudWxs
        OyAvLyB0YW1lIGpRdWVyeSdzIGlsbCBtYW5uZXJlZCBwcm9taXNlcwogICAg
        ICAgICAgICBFbWJlci5ydW4obnVsbCwgcmVqZWN0LCBqcVhIUik7CiAgICAg
        ICAgICB9KTsKICAgICAgICB9KTsKICAgICAgfQogICAgfSk7CiAgICBgYGAK
        CiAgICBAbWV0aG9kIGNyZWF0ZVJlY29yZAogICAgQHBhcmFtIHtEUy5TdG9y
        ZX0gc3RvcmUKICAgIEBwYXJhbSB7c3ViY2xhc3Mgb2YgRFMuTW9kZWx9IHR5
        cGUgICB0aGUgRFMuTW9kZWwgY2xhc3Mgb2YgdGhlIHJlY29yZAogICAgQHBh
        cmFtIHtEUy5Nb2RlbH0gcmVjb3JkCiAgICBAcmV0dXJuIHtQcm9taXNlfSBw
        cm9taXNlCiAgKi8KICBjcmVhdGVSZWNvcmQ6IEVtYmVyLnJlcXVpcmVkKEZ1
        bmN0aW9uKSwKCiAgLyoqCiAgICBJbXBsZW1lbnQgdGhpcyBtZXRob2QgaW4g
        YSBzdWJjbGFzcyB0byBoYW5kbGUgdGhlIHVwZGF0aW5nIG9mCiAgICBhIHJl
        Y29yZC4KCiAgICBTZXJpYWxpemVzIHRoZSByZWNvcmQgdXBkYXRlIGFuZCBz
        ZW5kIGl0IHRvIHRoZSBzZXJ2ZXIuCgogICAgRXhhbXBsZQoKICAgIGBgYGph
        dmFzY3JpcHQKICAgIEFwcC5BcHBsaWNhdGlvbkFkYXB0ZXIgPSBEUy5BZGFw
        dGVyLmV4dGVuZCh7CiAgICAgIHVwZGF0ZVJlY29yZDogZnVuY3Rpb24oc3Rv
        cmUsIHR5cGUsIHJlY29yZCkgewogICAgICAgIHZhciBkYXRhID0gdGhpcy5z
        ZXJpYWxpemUocmVjb3JkLCB7IGluY2x1ZGVJZDogdHJ1ZSB9KTsKICAgICAg
        ICB2YXIgaWQgPSByZWNvcmQuZ2V0KCdpZCcpOwogICAgICAgIHZhciB1cmwg
        PSBbdHlwZSwgaWRdLmpvaW4oJy8nKTsKCiAgICAgICAgcmV0dXJuIG5ldyBF
        bWJlci5SU1ZQLlByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7
        CiAgICAgICAgICBqUXVlcnkuYWpheCh7CiAgICAgICAgICAgIHR5cGU6ICdQ
        VVQnLAogICAgICAgICAgICB1cmw6IHVybCwKICAgICAgICAgICAgZGF0YVR5
        cGU6ICdqc29uJywKICAgICAgICAgICAgZGF0YTogZGF0YQogICAgICAgICAg
        fSkudGhlbihmdW5jdGlvbihkYXRhKSB7CiAgICAgICAgICAgIEVtYmVyLnJ1
        bihudWxsLCByZXNvbHZlLCBkYXRhKTsKICAgICAgICAgIH0sIGZ1bmN0aW9u
        KGpxWEhSKSB7CiAgICAgICAgICAgIGpxWEhSLnRoZW4gPSBudWxsOyAvLyB0
        YW1lIGpRdWVyeSdzIGlsbCBtYW5uZXJlZCBwcm9taXNlcwogICAgICAgICAg
        ICBFbWJlci5ydW4obnVsbCwgcmVqZWN0LCBqcVhIUik7CiAgICAgICAgICB9
        KTsKICAgICAgICB9KTsKICAgICAgfQogICAgfSk7CiAgICBgYGAKCiAgICBA
        bWV0aG9kIHVwZGF0ZVJlY29yZAogICAgQHBhcmFtIHtEUy5TdG9yZX0gc3Rv
        cmUKICAgIEBwYXJhbSB7c3ViY2xhc3Mgb2YgRFMuTW9kZWx9IHR5cGUgICB0
        aGUgRFMuTW9kZWwgY2xhc3Mgb2YgdGhlIHJlY29yZAogICAgQHBhcmFtIHtE
        Uy5Nb2RlbH0gcmVjb3JkCiAgICBAcmV0dXJuIHtQcm9taXNlfSBwcm9taXNl
        CiAgKi8KICB1cGRhdGVSZWNvcmQ6IEVtYmVyLnJlcXVpcmVkKEZ1bmN0aW9u
        KSwKCiAgLyoqCiAgICBJbXBsZW1lbnQgdGhpcyBtZXRob2QgaW4gYSBzdWJj
        bGFzcyB0byBoYW5kbGUgdGhlIGRlbGV0aW9uIG9mCiAgICBhIHJlY29yZC4K
        CiAgICBTZW5kcyBhIGRlbGV0ZSByZXF1ZXN0IGZvciB0aGUgcmVjb3JkIHRv
        IHRoZSBzZXJ2ZXIuCgogICAgRXhhbXBsZQoKICAgIGBgYGphdmFzY3JpcHQK
        ICAgIEFwcC5BcHBsaWNhdGlvbkFkYXB0ZXIgPSBEUy5BZGFwdGVyLmV4dGVu
        ZCh7CiAgICAgIGRlbGV0ZVJlY29yZDogZnVuY3Rpb24oc3RvcmUsIHR5cGUs
        IHJlY29yZCkgewogICAgICAgIHZhciBkYXRhID0gdGhpcy5zZXJpYWxpemUo
        cmVjb3JkLCB7IGluY2x1ZGVJZDogdHJ1ZSB9KTsKICAgICAgICB2YXIgaWQg
        PSByZWNvcmQuZ2V0KCdpZCcpOwogICAgICAgIHZhciB1cmwgPSBbdHlwZSwg
        aWRdLmpvaW4oJy8nKTsKCiAgICAgICAgcmV0dXJuIG5ldyBFbWJlci5SU1ZQ
        LlByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAg
        ICBqUXVlcnkuYWpheCh7CiAgICAgICAgICAgIHR5cGU6ICdERUxFVEUnLAog
        ICAgICAgICAgICB1cmw6IHVybCwKICAgICAgICAgICAgZGF0YVR5cGU6ICdq
        c29uJywKICAgICAgICAgICAgZGF0YTogZGF0YQogICAgICAgICAgfSkudGhl
        bihmdW5jdGlvbihkYXRhKSB7CiAgICAgICAgICAgIEVtYmVyLnJ1bihudWxs
        LCByZXNvbHZlLCBkYXRhKTsKICAgICAgICAgIH0sIGZ1bmN0aW9uKGpxWEhS
        KSB7CiAgICAgICAgICAgIGpxWEhSLnRoZW4gPSBudWxsOyAvLyB0YW1lIGpR
        dWVyeSdzIGlsbCBtYW5uZXJlZCBwcm9taXNlcwogICAgICAgICAgICBFbWJl
        ci5ydW4obnVsbCwgcmVqZWN0LCBqcVhIUik7CiAgICAgICAgICB9KTsKICAg
        ICAgICB9KTsKICAgICAgfQogICAgfSk7CiAgICBgYGAKCiAgICBAbWV0aG9k
        IGRlbGV0ZVJlY29yZAogICAgQHBhcmFtIHtEUy5TdG9yZX0gc3RvcmUKICAg
        IEBwYXJhbSB7c3ViY2xhc3Mgb2YgRFMuTW9kZWx9IHR5cGUgICB0aGUgRFMu
        TW9kZWwgY2xhc3Mgb2YgdGhlIHJlY29yZAogICAgQHBhcmFtIHtEUy5Nb2Rl
        bH0gcmVjb3JkCiAgICBAcmV0dXJuIHtQcm9taXNlfSBwcm9taXNlCiAgKi8K
        ICBkZWxldGVSZWNvcmQ6IEVtYmVyLnJlcXVpcmVkKEZ1bmN0aW9uKSwKCiAg
        LyoqCiAgICBGaW5kIG11bHRpcGxlIHJlY29yZHMgYXQgb25jZS4KCiAgICBC
        eSBkZWZhdWx0LCBpdCBsb29wcyBvdmVyIHRoZSBwcm92aWRlZCBpZHMgYW5k
        IGNhbGxzIGBmaW5kYCBvbiBlYWNoLgogICAgTWF5IGJlIG92ZXJ3cml0dGVu
        IHRvIGltcHJvdmUgcGVyZm9ybWFuY2UgYW5kIHJlZHVjZSB0aGUgbnVtYmVy
        IG9mCiAgICBzZXJ2ZXIgcmVxdWVzdHMuCgogICAgRXhhbXBsZQoKICAgIGBg
        YGphdmFzY3JpcHQKICAgIEFwcC5BcHBsaWNhdGlvbkFkYXB0ZXIgPSBEUy5B
        ZGFwdGVyLmV4dGVuZCh7CiAgICAgIGZpbmRNYW55OiBmdW5jdGlvbihzdG9y
        ZSwgdHlwZSwgaWRzKSB7CiAgICAgICAgdmFyIHVybCA9IHR5cGU7CiAgICAg
        ICAgcmV0dXJuIG5ldyBFbWJlci5SU1ZQLlByb21pc2UoZnVuY3Rpb24ocmVz
        b2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgICBqUXVlcnkuZ2V0SlNPTih1cmws
        IHtpZHM6IGlkc30pLnRoZW4oZnVuY3Rpb24oZGF0YSkgewogICAgICAgICAg
        ICBFbWJlci5ydW4obnVsbCwgcmVzb2x2ZSwgZGF0YSk7CiAgICAgICAgICB9
        LCBmdW5jdGlvbihqcVhIUikgewogICAgICAgICAgICBqcVhIUi50aGVuID0g
        bnVsbDsgLy8gdGFtZSBqUXVlcnkncyBpbGwgbWFubmVyZWQgcHJvbWlzZXMK
        ICAgICAgICAgICAgRW1iZXIucnVuKG51bGwsIHJlamVjdCwganFYSFIpOwog
        ICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0pOwogICAg
        YGBgCgogICAgQG1ldGhvZCBmaW5kTWFueQogICAgQHBhcmFtIHtEUy5TdG9y
        ZX0gc3RvcmUKICAgIEBwYXJhbSB7c3ViY2xhc3Mgb2YgRFMuTW9kZWx9IHR5
        cGUgICB0aGUgRFMuTW9kZWwgY2xhc3Mgb2YgdGhlIHJlY29yZHMKICAgIEBw
        YXJhbSB7QXJyYXl9ICAgIGlkcwogICAgQHJldHVybiB7UHJvbWlzZX0gcHJv
        bWlzZQogICovCiAgZmluZE1hbnk6IGZ1bmN0aW9uKHN0b3JlLCB0eXBlLCBp
        ZHMpIHsKICAgIHZhciBwcm9taXNlcyA9IG1hcC5jYWxsKGlkcywgZnVuY3Rp
        b24oaWQpIHsKICAgICAgcmV0dXJuIHRoaXMuZmluZChzdG9yZSwgdHlwZSwg
        aWQpOwogICAgfSwgdGhpcyk7CgogICAgcmV0dXJuIEVtYmVyLlJTVlAuYWxs
        KHByb21pc2VzKTsKICB9Cn0pOwoKfSkoKTsKCgoKKGZ1bmN0aW9uKCkgewov
        KioKICBAbW9kdWxlIGVtYmVyLWRhdGEKKi8KCnZhciBnZXQgPSBFbWJlci5n
        ZXQsIGZtdCA9IEVtYmVyLlN0cmluZy5mbXQsCiAgICBpbmRleE9mID0gRW1i
        ZXIuRW51bWVyYWJsZVV0aWxzLmluZGV4T2Y7Cgp2YXIgY291bnRlciA9IDA7
        CgovKioKICBgRFMuRml4dHVyZUFkYXB0ZXJgIGlzIGFuIGFkYXB0ZXIgdGhh
        dCBsb2FkcyByZWNvcmRzIGZyb20gbWVtb3J5LgogIEl0cyBwcmltYXJpbHkg
        dXNlZCBmb3IgZGV2ZWxvcG1lbnQgYW5kIHRlc3RpbmcuIFlvdSBjYW4gYWxz
        byB1c2UKICBgRFMuRml4dHVyZUFkYXB0ZXJgIHdoaWxlIHdvcmtpbmcgb24g
        dGhlIEFQSSBidXQgYXJlIG5vdCByZWFkeSB0bwogIGludGVncmF0ZSB5ZXQu
        IEl0IGlzIGEgZnVsbHkgZnVuY3Rpb25pbmcgYWRhcHRlci4gQWxsIENSVUQg
        bWV0aG9kcwogIGFyZSBpbXBsZW1lbnRlZC4gWW91IGNhbiBhbHNvIGltcGxl
        bWVudCBxdWVyeSBsb2dpYyB0aGF0IGEgcmVtb3RlCiAgc3lzdGVtIHdvdWxk
        IGRvLiBJdHMgcG9zc2libGUgdG8gZG8gZGV2ZWxvcCB5b3VyIGVudGlyZSBh
        cHBsaWNhdGlvbgogIHdpdGggYERTLkZpeHR1cmVBZGFwdGVyYC4KCiAgRm9y
        IGluZm9ybWF0aW9uIG9uIGhvdyB0byB1c2UgdGhlIGBGaXh0dXJlQWRhcHRl
        cmAgaW4geW91cgogIGFwcGxpY2F0aW9uIHBsZWFzZSBzZWUgdGhlIFtGaXh0
        dXJlQWRhcHRlcgogIGd1aWRlXSgvZ3VpZGVzL21vZGVscy90aGUtZml4dHVy
        ZS1hZGFwdGVyLykuCgogIEBjbGFzcyBGaXh0dXJlQWRhcHRlcgogIEBuYW1l
        c3BhY2UgRFMKICBAZXh0ZW5kcyBEUy5BZGFwdGVyCiovCkRTLkZpeHR1cmVB
        ZGFwdGVyID0gRFMuQWRhcHRlci5leHRlbmQoewogIC8vIGJ5IGRlZmF1bHQs
        IGZpeHR1cmVzIGFyZSBhbHJlYWR5IGluIG5vcm1hbGl6ZWQgZm9ybQogIHNl
        cmlhbGl6ZXI6IG51bGwsCgogIC8qKgogICAgSWYgYHNpbXVsYXRlUmVtb3Rl
        UmVzcG9uc2VgIGlzIGB0cnVlYCB0aGUgYEZpeHR1cmVBZGFwdGVyYCB3aWxs
        CiAgICB3YWl0IGEgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyBiZWZvcmUgcmVz
        b2x2aW5nIHByb21pc2VzIHdpdGggdGhlCiAgICBmaXh0dXJlIHZhbHVlcy4g
        VGhlIHdhaXQgdGltZSBjYW4gYmUgY29uZmlndXJlZCB2aWEgdGhlIGBsYXRl
        bmN5YAogICAgcHJvcGVydHkuCgogICAgQHByb3BlcnR5IHNpbXVsYXRlUmVt
        b3RlUmVzcG9uc2UKICAgIEB0eXBlIHtCb29sZWFufQogICAgQGRlZmF1bHQg
        dHJ1ZQogICovCiAgc2ltdWxhdGVSZW1vdGVSZXNwb25zZTogdHJ1ZSwKCiAg
        LyoqCiAgICBCeSBkZWZhdWx0IHRoZSBgRml4dHVyZUFkYXB0ZXJgIHdpbGwg
        c2ltdWxhdGUgYSB3YWl0IG9mIHRoZQogICAgYGxhdGVuY3lgIG1pbGxpc2Vj
        b25kcyBiZWZvcmUgcmVzb2x2aW5nIHByb21pc2VzIHdpdGggdGhlIGZpeHR1
        cmUKICAgIHZhbHVlcy4gVGhpcyBiZWhhdmlvciBjYW4gYmUgdHVybmVkIG9m
        ZiB2aWEgdGhlCiAgICBgc2ltdWxhdGVSZW1vdGVSZXNwb25zZWAgcHJvcGVy
        dHkuCgogICAgQHByb3BlcnR5IGxhdGVuY3kKICAgIEB0eXBlIHtOdW1iZXJ9
        CiAgICBAZGVmYXVsdCA1MAogICovCiAgbGF0ZW5jeTogNTAsCgogIC8qKgog
        ICAgSW1wbGVtZW50IHRoaXMgbWV0aG9kIGluIG9yZGVyIHRvIHByb3ZpZGUg
        ZGF0YSBhc3NvY2lhdGVkIHdpdGggYSB0eXBlCgogICAgQG1ldGhvZCBmaXh0
        dXJlc0ZvclR5cGUKICAgIEBwYXJhbSB7U3ViY2xhc3Mgb2YgRFMuTW9kZWx9
        IHR5cGUKICAgIEByZXR1cm4ge0FycmF5fQogICovCiAgZml4dHVyZXNGb3JU
        eXBlOiBmdW5jdGlvbih0eXBlKSB7CiAgICBpZiAodHlwZS5GSVhUVVJFUykg
        ewogICAgICB2YXIgZml4dHVyZXMgPSBFbWJlci5BKHR5cGUuRklYVFVSRVMp
        OwogICAgICByZXR1cm4gZml4dHVyZXMubWFwKGZ1bmN0aW9uKGZpeHR1cmUp
        ewogICAgICAgIHZhciBmaXh0dXJlSWRUeXBlID0gdHlwZW9mIGZpeHR1cmUu
        aWQ7CiAgICAgICAgaWYoZml4dHVyZUlkVHlwZSAhPT0gIm51bWJlciIgJiYg
        Zml4dHVyZUlkVHlwZSAhPT0gInN0cmluZyIpewogICAgICAgICAgdGhyb3cg
        bmV3IEVycm9yKGZtdCgndGhlIGlkIHByb3BlcnR5IG11c3QgYmUgZGVmaW5l
        ZCBhcyBhIG51bWJlciBvciBzdHJpbmcgZm9yIGZpeHR1cmUgJUAnLCBbZml4
        dHVyZV0pKTsKICAgICAgICB9CiAgICAgICAgZml4dHVyZS5pZCA9IGZpeHR1
        cmUuaWQgKyAnJzsKICAgICAgICByZXR1cm4gZml4dHVyZTsKICAgICAgfSk7
        CiAgICB9CiAgICByZXR1cm4gbnVsbDsKICB9LAoKICAvKioKICAgIEltcGxl
        bWVudCB0aGlzIG1ldGhvZCBpbiBvcmRlciB0byBxdWVyeSBmaXh0dXJlcyBk
        YXRhCgogICAgQG1ldGhvZCBxdWVyeUZpeHR1cmVzCiAgICBAcGFyYW0ge0Fy
        cmF5fSBmaXh0dXJlCiAgICBAcGFyYW0ge09iamVjdH0gcXVlcnkKICAgIEBw
        YXJhbSB7U3ViY2xhc3Mgb2YgRFMuTW9kZWx9IHR5cGUKICAgIEByZXR1cm4g
        e1Byb21pc2V8QXJyYXl9CiAgKi8KICBxdWVyeUZpeHR1cmVzOiBmdW5jdGlv
        bihmaXh0dXJlcywgcXVlcnksIHR5cGUpIHsKICAgIEVtYmVyLmFzc2VydCgn
        Tm90IGltcGxlbWVudGVkOiBZb3UgbXVzdCBvdmVycmlkZSB0aGUgRFMuRml4
        dHVyZUFkYXB0ZXI6OnF1ZXJ5Rml4dHVyZXMgbWV0aG9kIHRvIHN1cHBvcnQg
        cXVlcnlpbmcgdGhlIGZpeHR1cmUgc3RvcmUuJyk7CiAgfSwKCiAgLyoqCiAg
        ICBAbWV0aG9kIHVwZGF0ZUZpeHR1cmVzCiAgICBAcGFyYW0ge1N1YmNsYXNz
        IG9mIERTLk1vZGVsfSB0eXBlCiAgICBAcGFyYW0ge0FycmF5fSBmaXh0dXJl
        CiAgKi8KICB1cGRhdGVGaXh0dXJlczogZnVuY3Rpb24odHlwZSwgZml4dHVy
        ZSkgewogICAgaWYoIXR5cGUuRklYVFVSRVMpIHsKICAgICAgdHlwZS5GSVhU
        VVJFUyA9IFtdOwogICAgfQoKICAgIHZhciBmaXh0dXJlcyA9IHR5cGUuRklY
        VFVSRVM7CgogICAgdGhpcy5kZWxldGVMb2FkZWRGaXh0dXJlKHR5cGUsIGZp
        eHR1cmUpOwoKICAgIGZpeHR1cmVzLnB1c2goZml4dHVyZSk7CiAgfSwKCiAg
        LyoqCiAgICBJbXBsZW1lbnQgdGhpcyBtZXRob2QgaW4gb3JkZXIgdG8gcHJv
        dmlkZSBqc29uIGZvciBDUlVEIG1ldGhvZHMKCiAgICBAbWV0aG9kIG1vY2tK
        U09OCiAgICBAcGFyYW0ge1N1YmNsYXNzIG9mIERTLk1vZGVsfSB0eXBlCiAg
        ICBAcGFyYW0ge0RTLk1vZGVsfSByZWNvcmQKICAqLwogIG1vY2tKU09OOiBm
        dW5jdGlvbihzdG9yZSwgdHlwZSwgcmVjb3JkKSB7CiAgICByZXR1cm4gc3Rv
        cmUuc2VyaWFsaXplckZvcih0eXBlKS5zZXJpYWxpemUocmVjb3JkLCB7IGlu
        Y2x1ZGVJZDogdHJ1ZSB9KTsKICB9LAoKICAvKioKICAgIEBtZXRob2QgZ2Vu
        ZXJhdGVJZEZvclJlY29yZAogICAgQHBhcmFtIHtEUy5TdG9yZX0gc3RvcmUK
        ICAgIEBwYXJhbSB7RFMuTW9kZWx9IHJlY29yZAogICAgQHJldHVybiB7U3Ry
        aW5nfSBpZAogICovCiAgZ2VuZXJhdGVJZEZvclJlY29yZDogZnVuY3Rpb24o
        c3RvcmUpIHsKICAgIHJldHVybiAiZml4dHVyZS0iICsgY291bnRlcisrOwog
        IH0sCgogIC8qKgogICAgQG1ldGhvZCBmaW5kCiAgICBAcGFyYW0ge0RTLlN0
        b3JlfSBzdG9yZQogICAgQHBhcmFtIHtzdWJjbGFzcyBvZiBEUy5Nb2RlbH0g
        dHlwZQogICAgQHBhcmFtIHtTdHJpbmd9IGlkCiAgICBAcmV0dXJuIHtQcm9t
        aXNlfSBwcm9taXNlCiAgKi8KICBmaW5kOiBmdW5jdGlvbihzdG9yZSwgdHlw
        ZSwgaWQpIHsKICAgIHZhciBmaXh0dXJlcyA9IHRoaXMuZml4dHVyZXNGb3JU
        eXBlKHR5cGUpLAogICAgICAgIGZpeHR1cmU7CgogICAgRW1iZXIuYXNzZXJ0
        KCJVbmFibGUgdG8gZmluZCBmaXh0dXJlcyBmb3IgbW9kZWwgdHlwZSAiK3R5
        cGUudG9TdHJpbmcoKSwgZml4dHVyZXMpOwoKICAgIGlmIChmaXh0dXJlcykg
        ewogICAgICBmaXh0dXJlID0gRW1iZXIuQShmaXh0dXJlcykuZmluZFByb3Bl
        cnR5KCdpZCcsIGlkKTsKICAgIH0KCiAgICBpZiAoZml4dHVyZSkgewogICAg
        ICByZXR1cm4gdGhpcy5zaW11bGF0ZVJlbW90ZUNhbGwoZnVuY3Rpb24oKSB7
        CiAgICAgICAgcmV0dXJuIGZpeHR1cmU7CiAgICAgIH0sIHRoaXMpOwogICAg
        fQogIH0sCgogIC8qKgogICAgQG1ldGhvZCBmaW5kTWFueQogICAgQHBhcmFt
        IHtEUy5TdG9yZX0gc3RvcmUKICAgIEBwYXJhbSB7c3ViY2xhc3Mgb2YgRFMu
        TW9kZWx9IHR5cGUKICAgIEBwYXJhbSB7QXJyYXl9IGlkcwogICAgQHJldHVy
        biB7UHJvbWlzZX0gcHJvbWlzZQogICovCiAgZmluZE1hbnk6IGZ1bmN0aW9u
        KHN0b3JlLCB0eXBlLCBpZHMpIHsKICAgIHZhciBmaXh0dXJlcyA9IHRoaXMu
        Zml4dHVyZXNGb3JUeXBlKHR5cGUpOwoKICAgIEVtYmVyLmFzc2VydCgiVW5h
        YmxlIHRvIGZpbmQgZml4dHVyZXMgZm9yIG1vZGVsIHR5cGUgIit0eXBlLnRv
        U3RyaW5nKCksIGZpeHR1cmVzKTsKCiAgICBpZiAoZml4dHVyZXMpIHsKICAg
        ICAgZml4dHVyZXMgPSBmaXh0dXJlcy5maWx0ZXIoZnVuY3Rpb24oaXRlbSkg
        ewogICAgICAgIHJldHVybiBpbmRleE9mKGlkcywgaXRlbS5pZCkgIT09IC0x
        OwogICAgICB9KTsKICAgIH0KCiAgICBpZiAoZml4dHVyZXMpIHsKICAgICAg
        cmV0dXJuIHRoaXMuc2ltdWxhdGVSZW1vdGVDYWxsKGZ1bmN0aW9uKCkgewog
        ICAgICAgIHJldHVybiBmaXh0dXJlczsKICAgICAgfSwgdGhpcyk7CiAgICB9
        CiAgfSwKCiAgLyoqCiAgICBAcHJpdmF0ZQogICAgQG1ldGhvZCBmaW5kQWxs
        CiAgICBAcGFyYW0ge0RTLlN0b3JlfSBzdG9yZQogICAgQHBhcmFtIHtzdWJj
        bGFzcyBvZiBEUy5Nb2RlbH0gdHlwZQogICAgQHBhcmFtIHtTdHJpbmd9IHNp
        bmNlVG9rZW4KICAgIEByZXR1cm4ge1Byb21pc2V9IHByb21pc2UKICAqLwog
        IGZpbmRBbGw6IGZ1bmN0aW9uKHN0b3JlLCB0eXBlKSB7CiAgICB2YXIgZml4
        dHVyZXMgPSB0aGlzLmZpeHR1cmVzRm9yVHlwZSh0eXBlKTsKCiAgICBFbWJl
        ci5hc3NlcnQoIlVuYWJsZSB0byBmaW5kIGZpeHR1cmVzIGZvciBtb2RlbCB0
        eXBlICIrdHlwZS50b1N0cmluZygpLCBmaXh0dXJlcyk7CgogICAgcmV0dXJu
        IHRoaXMuc2ltdWxhdGVSZW1vdGVDYWxsKGZ1bmN0aW9uKCkgewogICAgICBy
        ZXR1cm4gZml4dHVyZXM7CiAgICB9LCB0aGlzKTsKICB9LAoKICAvKioKICAg
        IEBwcml2YXRlCiAgICBAbWV0aG9kIGZpbmRRdWVyeQogICAgQHBhcmFtIHtE
        Uy5TdG9yZX0gc3RvcmUKICAgIEBwYXJhbSB7c3ViY2xhc3Mgb2YgRFMuTW9k
        ZWx9IHR5cGUKICAgIEBwYXJhbSB7T2JqZWN0fSBxdWVyeQogICAgQHBhcmFt
        IHtEUy5BZGFwdGVyUG9wdWxhdGVkUmVjb3JkQXJyYXl9IHJlY29yZEFycmF5
        CiAgICBAcmV0dXJuIHtQcm9taXNlfSBwcm9taXNlCiAgKi8KICBmaW5kUXVl
        cnk6IGZ1bmN0aW9uKHN0b3JlLCB0eXBlLCBxdWVyeSwgYXJyYXkpIHsKICAg
        IHZhciBmaXh0dXJlcyA9IHRoaXMuZml4dHVyZXNGb3JUeXBlKHR5cGUpOwoK
        ICAgIEVtYmVyLmFzc2VydCgiVW5hYmxlIHRvIGZpbmQgZml4dHVyZXMgZm9y
        IG1vZGVsIHR5cGUgIit0eXBlLnRvU3RyaW5nKCksIGZpeHR1cmVzKTsKCiAg
        ICBmaXh0dXJlcyA9IHRoaXMucXVlcnlGaXh0dXJlcyhmaXh0dXJlcywgcXVl
        cnksIHR5cGUpOwoKICAgIGlmIChmaXh0dXJlcykgewogICAgICByZXR1cm4g
        dGhpcy5zaW11bGF0ZVJlbW90ZUNhbGwoZnVuY3Rpb24oKSB7CiAgICAgICAg
        cmV0dXJuIGZpeHR1cmVzOwogICAgICB9LCB0aGlzKTsKICAgIH0KICB9LAoK
        ICAvKioKICAgIEBtZXRob2QgY3JlYXRlUmVjb3JkCiAgICBAcGFyYW0ge0RT
        LlN0b3JlfSBzdG9yZQogICAgQHBhcmFtIHtzdWJjbGFzcyBvZiBEUy5Nb2Rl
        bH0gdHlwZQogICAgQHBhcmFtIHtEUy5Nb2RlbH0gcmVjb3JkCiAgICBAcmV0
        dXJuIHtQcm9taXNlfSBwcm9taXNlCiAgKi8KICBjcmVhdGVSZWNvcmQ6IGZ1
        bmN0aW9uKHN0b3JlLCB0eXBlLCByZWNvcmQpIHsKICAgIHZhciBmaXh0dXJl
        ID0gdGhpcy5tb2NrSlNPTihzdG9yZSwgdHlwZSwgcmVjb3JkKTsKCiAgICB0
        aGlzLnVwZGF0ZUZpeHR1cmVzKHR5cGUsIGZpeHR1cmUpOwoKICAgIHJldHVy
        biB0aGlzLnNpbXVsYXRlUmVtb3RlQ2FsbChmdW5jdGlvbigpIHsKICAgICAg
        cmV0dXJuIGZpeHR1cmU7CiAgICB9LCB0aGlzKTsKICB9LAoKICAvKioKICAg
        IEBtZXRob2QgdXBkYXRlUmVjb3JkCiAgICBAcGFyYW0ge0RTLlN0b3JlfSBz
        dG9yZQogICAgQHBhcmFtIHtzdWJjbGFzcyBvZiBEUy5Nb2RlbH0gdHlwZQog
        ICAgQHBhcmFtIHtEUy5Nb2RlbH0gcmVjb3JkCiAgICBAcmV0dXJuIHtQcm9t
        aXNlfSBwcm9taXNlCiAgKi8KICB1cGRhdGVSZWNvcmQ6IGZ1bmN0aW9uKHN0
        b3JlLCB0eXBlLCByZWNvcmQpIHsKICAgIHZhciBmaXh0dXJlID0gdGhpcy5t
        b2NrSlNPTihzdG9yZSwgdHlwZSwgcmVjb3JkKTsKCiAgICB0aGlzLnVwZGF0
        ZUZpeHR1cmVzKHR5cGUsIGZpeHR1cmUpOwoKICAgIHJldHVybiB0aGlzLnNp
        bXVsYXRlUmVtb3RlQ2FsbChmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIGZp
        eHR1cmU7CiAgICB9LCB0aGlzKTsKICB9LAoKICAvKioKICAgIEBtZXRob2Qg
        ZGVsZXRlUmVjb3JkCiAgICBAcGFyYW0ge0RTLlN0b3JlfSBzdG9yZQogICAg
        QHBhcmFtIHtzdWJjbGFzcyBvZiBEUy5Nb2RlbH0gdHlwZQogICAgQHBhcmFt
        IHtEUy5Nb2RlbH0gcmVjb3JkCiAgICBAcmV0dXJuIHtQcm9taXNlfSBwcm9t
        aXNlCiAgKi8KICBkZWxldGVSZWNvcmQ6IGZ1bmN0aW9uKHN0b3JlLCB0eXBl
        LCByZWNvcmQpIHsKICAgIHZhciBmaXh0dXJlID0gdGhpcy5tb2NrSlNPTihz
        dG9yZSwgdHlwZSwgcmVjb3JkKTsKCiAgICB0aGlzLmRlbGV0ZUxvYWRlZEZp
        eHR1cmUodHlwZSwgZml4dHVyZSk7CgogICAgcmV0dXJuIHRoaXMuc2ltdWxh
        dGVSZW1vdGVDYWxsKGZ1bmN0aW9uKCkgewogICAgICAvLyBubyBwYXlsb2Fk
        IGluIGEgZGVsZXRpb24KICAgICAgcmV0dXJuIG51bGw7CiAgICB9KTsKICB9
        LAoKICAvKgogICAgQG1ldGhvZCBkZWxldGVMb2FkZWRGaXh0dXJlCiAgICBA
        cHJpdmF0ZQogICAgQHBhcmFtIHR5cGUKICAgIEBwYXJhbSByZWNvcmQKICAq
        LwogIGRlbGV0ZUxvYWRlZEZpeHR1cmU6IGZ1bmN0aW9uKHR5cGUsIHJlY29y
        ZCkgewogICAgdmFyIGV4aXN0aW5nRml4dHVyZSA9IHRoaXMuZmluZEV4aXN0
        aW5nRml4dHVyZSh0eXBlLCByZWNvcmQpOwoKICAgIGlmKGV4aXN0aW5nRml4
        dHVyZSkgewogICAgICB2YXIgaW5kZXggPSBpbmRleE9mKHR5cGUuRklYVFVS
        RVMsIGV4aXN0aW5nRml4dHVyZSk7CiAgICAgIHR5cGUuRklYVFVSRVMuc3Bs
        aWNlKGluZGV4LCAxKTsKICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgfSwK
        CiAgLyoKICAgIEBtZXRob2QgZmluZEV4aXN0aW5nRml4dHVyZQogICAgQHBy
        aXZhdGUKICAgIEBwYXJhbSB0eXBlCiAgICBAcGFyYW0gcmVjb3JkCiAgKi8K
        ICBmaW5kRXhpc3RpbmdGaXh0dXJlOiBmdW5jdGlvbih0eXBlLCByZWNvcmQp
        IHsKICAgIHZhciBmaXh0dXJlcyA9IHRoaXMuZml4dHVyZXNGb3JUeXBlKHR5
        cGUpOwogICAgdmFyIGlkID0gZ2V0KHJlY29yZCwgJ2lkJyk7CgogICAgcmV0
        dXJuIHRoaXMuZmluZEZpeHR1cmVCeUlkKGZpeHR1cmVzLCBpZCk7CiAgfSwK
        CiAgLyoKICAgIEBtZXRob2QgZmluZEZpeHR1cmVCeUlkCiAgICBAcHJpdmF0
        ZQogICAgQHBhcmFtIGZpeHR1cmVzCiAgICBAcGFyYW0gaWQKICAqLwogIGZp
        bmRGaXh0dXJlQnlJZDogZnVuY3Rpb24oZml4dHVyZXMsIGlkKSB7CiAgICBy
        ZXR1cm4gRW1iZXIuQShmaXh0dXJlcykuZmluZChmdW5jdGlvbihyKSB7CiAg
        ICAgIGlmKCcnK2dldChyLCAnaWQnKSA9PT0gJycraWQpIHsKICAgICAgICBy
        ZXR1cm4gdHJ1ZTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gZmFs
        c2U7CiAgICAgIH0KICAgIH0pOwogIH0sCgogIC8qCiAgICBAbWV0aG9kIHNp
        bXVsYXRlUmVtb3RlQ2FsbAogICAgQHByaXZhdGUKICAgIEBwYXJhbSBjYWxs
        YmFjawogICAgQHBhcmFtIGNvbnRleHQKICAqLwogIHNpbXVsYXRlUmVtb3Rl
        Q2FsbDogZnVuY3Rpb24oY2FsbGJhY2ssIGNvbnRleHQpIHsKICAgIHZhciBh
        ZGFwdGVyID0gdGhpczsKCiAgICByZXR1cm4gbmV3IEVtYmVyLlJTVlAuUHJv
        bWlzZShmdW5jdGlvbihyZXNvbHZlKSB7CiAgICAgIGlmIChnZXQoYWRhcHRl
        ciwgJ3NpbXVsYXRlUmVtb3RlUmVzcG9uc2UnKSkgewogICAgICAgIC8vIFNj
        aGVkdWxlIHdpdGggc2V0VGltZW91dAogICAgICAgIEVtYmVyLnJ1bi5sYXRl
        cihmdW5jdGlvbigpIHsKICAgICAgICAgIHJlc29sdmUoY2FsbGJhY2suY2Fs
        bChjb250ZXh0KSk7CiAgICAgICAgfSwgZ2V0KGFkYXB0ZXIsICdsYXRlbmN5
        JykpOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIEFzeW5jaHJvbm91cywg
        YnV0IGF0IHRoZSBvZiB0aGUgcnVubG9vcCB3aXRoIHplcm8gbGF0ZW5jeQog
        ICAgICAgIEVtYmVyLnJ1bi5zY2hlZHVsZSgnYWN0aW9ucycsIG51bGwsIGZ1
        bmN0aW9uKCkgewogICAgICAgICAgcmVzb2x2ZShjYWxsYmFjay5jYWxsKGNv
        bnRleHQpKTsKICAgICAgICB9KTsKICAgICAgfQogICAgfSwgIkRTOiBGaXh0
        dXJlQWRhcHRlciNzaW11bGF0ZVJlbW90ZUNhbGwiKTsKICB9Cn0pOwoKfSko
        KTsKCgoKKGZ1bmN0aW9uKCkgewovKioKICBAbW9kdWxlIGVtYmVyLWRhdGEK
        Ki8KCnZhciBnZXQgPSBFbWJlci5nZXQsIHNldCA9IEVtYmVyLnNldDsKdmFy
        IGZvckVhY2ggPSBFbWJlci5BcnJheVBvbHlmaWxscy5mb3JFYWNoOwp2YXIg
        bWFwID0gRW1iZXIuQXJyYXlQb2x5ZmlsbHMubWFwOwoKZnVuY3Rpb24gY29l
        cmNlSWQoaWQpIHsKICByZXR1cm4gaWQgPT0gbnVsbCA/IG51bGwgOiBpZCsn
        JzsKfQoKLyoqCiAgTm9ybWFsbHksIGFwcGxpY2F0aW9ucyB3aWxsIHVzZSB0
        aGUgYFJFU1RTZXJpYWxpemVyYCBieSBpbXBsZW1lbnRpbmcKICB0aGUgYG5v
        cm1hbGl6ZWAgbWV0aG9kIGFuZCBpbmRpdmlkdWFsIG5vcm1hbGl6YXRpb25z
        IHVuZGVyCiAgYG5vcm1hbGl6ZUhhc2hgLgoKICBUaGlzIGFsbG93cyB5b3Ug
        dG8gZG8gd2hhdGV2ZXIga2luZCBvZiBtdW5naW5nIHlvdSBuZWVkLCBhbmQg
        aXMKICBlc3BlY2lhbGx5IHVzZWZ1bCBpZiB5b3VyIHNlcnZlciBpcyBpbmNv
        bnNpc3RlbnQgYW5kIHlvdSBuZWVkIHRvCiAgZG8gbXVuZ2luZyBkaWZmZXJl
        bnRseSBmb3IgbWFueSBkaWZmZXJlbnQga2luZHMgb2YgcmVzcG9uc2VzLgoK
        ICBTZWUgdGhlIGBub3JtYWxpemVgIGRvY3VtZW50YXRpb24gZm9yIG1vcmUg
        aW5mb3JtYXRpb24uCgogICMjIEFjcm9zcyB0aGUgQm9hcmQgTm9ybWFsaXph
        dGlvbgoKICBUaGVyZSBhcmUgYWxzbyBhIG51bWJlciBvZiBob29rcyB0aGF0
        IHlvdSBtaWdodCBmaW5kIHVzZWZ1bCB0byBkZWZpbmVkCiAgYWNyb3NzLXRo
        ZS1ib2FyZCBydWxlcyBmb3IgeW91ciBwYXlsb2FkLiBUaGVzZSBydWxlcyB3
        aWxsIGJlIHVzZWZ1bAogIGlmIHlvdXIgc2VydmVyIGlzIGNvbnNpc3RlbnQs
        IG9yIGlmIHlvdSdyZSBidWlsZGluZyBhbiBhZGFwdGVyIGZvcgogIGFuIGlu
        ZnJhc3RydWN0dXJlIHNlcnZpY2UsIGxpa2UgUGFyc2UsIGFuZCB3YW50IHRv
        IGVuY29kZSBzZXJ2aWNlCiAgY29udmVudGlvbnMuCgogIEZvciBleGFtcGxl
        LCBpZiBhbGwgb2YgeW91ciBrZXlzIGFyZSB1bmRlcnNjb3JlZCBhbmQgYWxs
        LWNhcHMsIGJ1dAogIG90aGVyd2lzZSBjb25zaXN0ZW50IHdpdGggdGhlIG5h
        bWVzIHlvdSB1c2UgaW4geW91ciBtb2RlbHMsIHlvdQogIGNhbiBpbXBsZW1l
        bnQgYWNyb3NzLXRoZS1ib2FyZCBydWxlcyBmb3IgaG93IHRvIGNvbnZlcnQg
        YW4gYXR0cmlidXRlCiAgbmFtZSBpbiB5b3VyIG1vZGVsIHRvIGEga2V5IGlu
        IHlvdXIgSlNPTi4KCiAgYGBganMKICBBcHAuQXBwbGljYXRpb25TZXJpYWxp
        emVyID0gRFMuUkVTVFNlcmlhbGl6ZXIuZXh0ZW5kKHsKICAgIGtleUZvckF0
        dHJpYnV0ZTogZnVuY3Rpb24oYXR0cikgewogICAgICByZXR1cm4gRW1iZXIu
        U3RyaW5nLnVuZGVyc2NvcmUoYXR0cikudG9VcHBlckNhc2UoKTsKICAgIH0K
        ICB9KTsKICBgYGAKCiAgWW91IGNhbiBhbHNvIGltcGxlbWVudCBga2V5Rm9y
        UmVsYXRpb25zaGlwYCwgd2hpY2ggdGFrZXMgdGhlIG5hbWUKICBvZiB0aGUg
        cmVsYXRpb25zaGlwIGFzIHRoZSBmaXJzdCBwYXJhbWV0ZXIsIGFuZCB0aGUg
        a2luZCBvZgogIHJlbGF0aW9uc2hpcCAoYGhhc01hbnlgIG9yIGBiZWxvbmdz
        VG9gKSBhcyB0aGUgc2Vjb25kIHBhcmFtZXRlci4KCiAgQGNsYXNzIFJFU1RT
        ZXJpYWxpemVyCiAgQG5hbWVzcGFjZSBEUwogIEBleHRlbmRzIERTLkpTT05T
        ZXJpYWxpemVyCiovCkRTLlJFU1RTZXJpYWxpemVyID0gRFMuSlNPTlNlcmlh
        bGl6ZXIuZXh0ZW5kKHsKICAvKioKICAgIElmIHlvdSB3YW50IHRvIGRvIG5v
        cm1hbGl6YXRpb25zIHNwZWNpZmljIHRvIHNvbWUgcGFydCBvZiB0aGUgcGF5
        bG9hZCwgeW91CiAgICBjYW4gc3BlY2lmeSB0aG9zZSB1bmRlciBgbm9ybWFs
        aXplSGFzaGAuCgogICAgRm9yIGV4YW1wbGUsIGdpdmVuIHRoZSBmb2xsb3dp
        bmcganNvbiB3aGVyZSB0aGUgdGhlIGBJRHNgIHVuZGVyCiAgICBgImNvbW1l
        bnRzImAgYXJlIHByb3ZpZGVkIGFzIGBfaWRgIGluc3RlYWQgb2YgYGlkYC4K
        CiAgICBgYGBqYXZhc2NyaXB0CiAgICB7CiAgICAgICJwb3N0IjogewogICAg
        ICAgICJpZCI6IDEsCiAgICAgICAgInRpdGxlIjogIlJhaWxzIGlzIG9tYWth
        c2UiLAogICAgICAgICJjb21tZW50cyI6IFsgMSwgMiBdCiAgICAgIH0sCiAg
        ICAgICJjb21tZW50cyI6IFt7CiAgICAgICAgIl9pZCI6IDEsCiAgICAgICAg
        ImJvZHkiOiAiRklSU1QiCiAgICAgIH0sIHsKICAgICAgICAiX2lkIjogMiwK
        ICAgICAgICAiYm9keSI6ICJSYWlscyBpcyB1bmFnaSIKICAgICAgfV0KICAg
        IH0KICAgIGBgYAoKICAgIFlvdSB1c2UgYG5vcm1hbGl6ZUhhc2hgIHRvIG5v
        cm1hbGl6ZSBqdXN0IHRoZSBjb21tZW50czoKCiAgICBgYGBqYXZhc2NyaXB0
        CiAgICBBcHAuUG9zdFNlcmlhbGl6ZXIgPSBEUy5SRVNUU2VyaWFsaXplci5l
        eHRlbmQoewogICAgICBub3JtYWxpemVIYXNoOiB7CiAgICAgICAgY29tbWVu
        dHM6IGZ1bmN0aW9uKGhhc2gpIHsKICAgICAgICAgIGhhc2guaWQgPSBoYXNo
        Ll9pZDsKICAgICAgICAgIGRlbGV0ZSBoYXNoLl9pZDsKICAgICAgICAgIHJl
        dHVybiBoYXNoOwogICAgICAgIH0KICAgICAgfQogICAgfSk7CiAgICBgYGAK
        CiAgICBUaGUga2V5IHVuZGVyIGBub3JtYWxpemVIYXNoYCBpcyB1c3VhbGx5
        IGp1c3QgdGhlIG9yaWdpbmFsIGtleQogICAgdGhhdCB3YXMgaW4gdGhlIG9y
        aWdpbmFsIHBheWxvYWQuIEhvd2V2ZXIsIGtleSBuYW1lcyB3aWxsIGJlCiAg
        ICBpbXBhY3RlZCBieSBhbnkgbW9kaWZpY2F0aW9ucyBkb25lIGluIHRoZSBg
        bm9ybWFsaXplUGF5bG9hZGAKICAgIG1ldGhvZC4gVGhlIGBEUy5SRVNUU2Vy
        aWFsaXplcmAncyBkZWZhdWx0IGltcGxlbWVudGF0aW9uIG1ha2VzIG5vCiAg
        ICBjaGFuZ2VzIHRvIHRoZSBwYXlsb2FkIGtleXMuCgogICAgQHByb3BlcnR5
        IG5vcm1hbGl6ZUhhc2gKICAgIEB0eXBlIHtPYmplY3R9CiAgICBAZGVmYXVs
        dCB1bmRlZmluZWQKICAqLwoKICAvKioKICAgIE5vcm1hbGl6ZXMgYSBwYXJ0
        IG9mIHRoZSBKU09OIHBheWxvYWQgcmV0dXJuZWQgYnkKICAgIHRoZSBzZXJ2
        ZXIuIFlvdSBzaG91bGQgb3ZlcnJpZGUgdGhpcyBtZXRob2QsIG11bmdlIHRo
        ZSBoYXNoCiAgICBhbmQgY2FsbCBzdXBlciBpZiB5b3UgaGF2ZSBnZW5lcmlj
        IG5vcm1hbGl6YXRpb24gdG8gZG8uCgogICAgSXQgdGFrZXMgdGhlIHR5cGUg
        b2YgdGhlIHJlY29yZCB0aGF0IGlzIGJlaW5nIG5vcm1hbGl6ZWQKICAgIChh
        cyBhIERTLk1vZGVsIGNsYXNzKSwgdGhlIHByb3BlcnR5IHdoZXJlIHRoZSBo
        YXNoIHdhcwogICAgb3JpZ2luYWxseSBmb3VuZCwgYW5kIHRoZSBoYXNoIHRv
        IG5vcm1hbGl6ZS4KCiAgICBGb3IgZXhhbXBsZSwgaWYgeW91IGhhdmUgYSBw
        YXlsb2FkIHRoYXQgbG9va3MgbGlrZSB0aGlzOgoKICAgIGBgYGpzCiAgICB7
        CiAgICAgICJwb3N0IjogewogICAgICAgICJpZCI6IDEsCiAgICAgICAgInRp
        dGxlIjogIlJhaWxzIGlzIG9tYWthc2UiLAogICAgICAgICJjb21tZW50cyI6
        IFsgMSwgMiBdCiAgICAgIH0sCiAgICAgICJjb21tZW50cyI6IFt7CiAgICAg
        ICAgImlkIjogMSwKICAgICAgICAiYm9keSI6ICJGSVJTVCIKICAgICAgfSwg
        ewogICAgICAgICJpZCI6IDIsCiAgICAgICAgImJvZHkiOiAiUmFpbHMgaXMg
        dW5hZ2kiCiAgICAgIH1dCiAgICB9CiAgICBgYGAKCiAgICBUaGUgYG5vcm1h
        bGl6ZWAgbWV0aG9kIHdpbGwgYmUgY2FsbGVkIHRocmVlIHRpbWVzOgoKICAg
        ICogV2l0aCBgQXBwLlBvc3RgLCBgInBvc3RzImAgYW5kIGB7IGlkOiAxLCB0
        aXRsZTogIlJhaWxzIGlzIG9tYWthc2UiLCAuLi4gfWAKICAgICogV2l0aCBg
        QXBwLkNvbW1lbnRgLCBgImNvbW1lbnRzImAgYW5kIGB7IGlkOiAxLCBib2R5
        OiAiRklSU1QiIH1gCiAgICAqIFdpdGggYEFwcC5Db21tZW50YCwgYCJjb21t
        ZW50cyJgIGFuZCBgeyBpZDogMiwgYm9keTogIlJhaWxzIGlzIHVuYWdpIiB9
        YAoKICAgIFlvdSBjYW4gdXNlIHRoaXMgbWV0aG9kLCBmb3IgZXhhbXBsZSwg
        dG8gbm9ybWFsaXplIHVuZGVyc2NvcmVkIGtleXMgdG8gY2FtZWxpemVkCiAg
        ICBvciBvdGhlciBnZW5lcmFsLXB1cnBvc2Ugbm9ybWFsaXphdGlvbnMuCgog
        ICAgSWYgeW91IHdhbnQgdG8gZG8gbm9ybWFsaXphdGlvbnMgc3BlY2lmaWMg
        dG8gc29tZSBwYXJ0IG9mIHRoZSBwYXlsb2FkLCB5b3UKICAgIGNhbiBzcGVj
        aWZ5IHRob3NlIHVuZGVyIGBub3JtYWxpemVIYXNoYC4KCiAgICBGb3IgZXhh
        bXBsZSwgaWYgdGhlIGBJRHNgIHVuZGVyIGAiY29tbWVudHMiYCBhcmUgcHJv
        dmlkZWQgYXMgYF9pZGAgaW5zdGVhZCBvZgogICAgYGlkYCwgeW91IGNhbiBz
        cGVjaWZ5IGhvdyB0byBub3JtYWxpemUganVzdCB0aGUgY29tbWVudHM6Cgog
        ICAgYGBganMKICAgIEFwcC5Qb3N0U2VyaWFsaXplciA9IERTLlJFU1RTZXJp
        YWxpemVyLmV4dGVuZCh7CiAgICAgIG5vcm1hbGl6ZUhhc2g6IHsKICAgICAg
        ICBjb21tZW50czogZnVuY3Rpb24oaGFzaCkgewogICAgICAgICAgaGFzaC5p
        ZCA9IGhhc2guX2lkOwogICAgICAgICAgZGVsZXRlIGhhc2guX2lkOwogICAg
        ICAgICAgcmV0dXJuIGhhc2g7CiAgICAgICAgfQogICAgICB9CiAgICB9KTsK
        ICAgIGBgYAoKICAgIFRoZSBrZXkgdW5kZXIgYG5vcm1hbGl6ZUhhc2hgIGlz
        IGp1c3QgdGhlIG9yaWdpbmFsIGtleSB0aGF0IHdhcyBpbiB0aGUgb3JpZ2lu
        YWwKICAgIHBheWxvYWQuCgogICAgQG1ldGhvZCBub3JtYWxpemUKICAgIEBw
        YXJhbSB7c3ViY2xhc3Mgb2YgRFMuTW9kZWx9IHR5cGUKICAgIEBwYXJhbSB7
        T2JqZWN0fSBoYXNoCiAgICBAcGFyYW0ge1N0cmluZ30gcHJvcAogICAgQHJl
        dHVybnMge09iamVjdH0KICAqLwogIG5vcm1hbGl6ZTogZnVuY3Rpb24odHlw
        ZSwgaGFzaCwgcHJvcCkgewogICAgdGhpcy5ub3JtYWxpemVJZChoYXNoKTsK
        ICAgIHRoaXMubm9ybWFsaXplQXR0cmlidXRlcyh0eXBlLCBoYXNoKTsKICAg
        IHRoaXMubm9ybWFsaXplUmVsYXRpb25zaGlwcyh0eXBlLCBoYXNoKTsKCiAg
        ICB0aGlzLm5vcm1hbGl6ZVVzaW5nRGVjbGFyZWRNYXBwaW5nKHR5cGUsIGhh
        c2gpOwoKICAgIGlmICh0aGlzLm5vcm1hbGl6ZUhhc2ggJiYgdGhpcy5ub3Jt
        YWxpemVIYXNoW3Byb3BdKSB7CiAgICAgIHRoaXMubm9ybWFsaXplSGFzaFtw
        cm9wXShoYXNoKTsKICAgIH0KCiAgICByZXR1cm4gdGhpcy5fc3VwZXIodHlw
        ZSwgaGFzaCwgcHJvcCk7CiAgfSwKCiAgLyoqCiAgICBZb3UgY2FuIHVzZSB0
        aGlzIG1ldGhvZCB0byBub3JtYWxpemUgYWxsIHBheWxvYWRzLCByZWdhcmRs
        ZXNzIG9mIHdoZXRoZXIgdGhleQogICAgcmVwcmVzZW50IHNpbmdsZSByZWNv
        cmRzIG9yIGFuIGFycmF5LgoKICAgIEZvciBleGFtcGxlLCB5b3UgbWlnaHQg
        d2FudCB0byByZW1vdmUgc29tZSBleHRyYW5lb3VzIGRhdGEgZnJvbSB0aGUg
        cGF5bG9hZDoKCiAgICBgYGBqcwogICAgQXBwLkFwcGxpY2F0aW9uU2VyaWFs
        aXplciA9IERTLlJFU1RTZXJpYWxpemVyLmV4dGVuZCh7CiAgICAgIG5vcm1h
        bGl6ZVBheWxvYWQ6IGZ1bmN0aW9uKHR5cGUsIHBheWxvYWQpIHsKICAgICAg
        ICBkZWxldGUgcGF5bG9hZC52ZXJzaW9uOwogICAgICAgIGRlbGV0ZSBwYXls
        b2FkLnN0YXR1czsKICAgICAgICByZXR1cm4gcGF5bG9hZDsKICAgICAgfQog
        ICAgfSk7CiAgICBgYGAKCiAgICBAbWV0aG9kIG5vcm1hbGl6ZVBheWxvYWQK
        ICAgIEBwYXJhbSB7c3ViY2xhc3Mgb2YgRFMuTW9kZWx9IHR5cGUKICAgIEBw
        YXJhbSB7T2JqZWN0fSBoYXNoCiAgICBAcmV0dXJucyB7T2JqZWN0fSB0aGUg
        bm9ybWFsaXplZCBwYXlsb2FkCiAgKi8KICBub3JtYWxpemVQYXlsb2FkOiBm
        dW5jdGlvbih0eXBlLCBwYXlsb2FkKSB7CiAgICByZXR1cm4gcGF5bG9hZDsK
        ICB9LAoKICAvKioKICAgIEBtZXRob2Qgbm9ybWFsaXplSWQKICAgIEBwcml2
        YXRlCiAgKi8KICBub3JtYWxpemVJZDogZnVuY3Rpb24oaGFzaCkgewogICAg
        dmFyIHByaW1hcnlLZXkgPSBnZXQodGhpcywgJ3ByaW1hcnlLZXknKTsKCiAg
        ICBpZiAocHJpbWFyeUtleSA9PT0gJ2lkJykgeyByZXR1cm47IH0KCiAgICBo
        YXNoLmlkID0gaGFzaFtwcmltYXJ5S2V5XTsKICAgIGRlbGV0ZSBoYXNoW3By
        aW1hcnlLZXldOwogIH0sCgogIC8qKgogICAgQG1ldGhvZCBub3JtYWxpemVV
        c2luZ0RlY2xhcmVkTWFwcGluZwogICAgQHByaXZhdGUKICAqLwogIG5vcm1h
        bGl6ZVVzaW5nRGVjbGFyZWRNYXBwaW5nOiBmdW5jdGlvbih0eXBlLCBoYXNo
        KSB7CiAgICB2YXIgYXR0cnMgPSBnZXQodGhpcywgJ2F0dHJzJyksIHBheWxv
        YWRLZXksIGtleTsKCiAgICBpZiAoYXR0cnMpIHsKICAgICAgZm9yIChrZXkg
        aW4gYXR0cnMpIHsKICAgICAgICBwYXlsb2FkS2V5ID0gYXR0cnNba2V5XTsK
        ICAgICAgICBpZiAocGF5bG9hZEtleSAmJiBwYXlsb2FkS2V5LmtleSkgewog
        ICAgICAgICAgcGF5bG9hZEtleSA9IHBheWxvYWRLZXkua2V5OwogICAgICAg
        IH0KICAgICAgICBpZiAodHlwZW9mIHBheWxvYWRLZXkgPT09ICdzdHJpbmcn
        KSB7CiAgICAgICAgICBoYXNoW2tleV0gPSBoYXNoW3BheWxvYWRLZXldOwog
        ICAgICAgICAgZGVsZXRlIGhhc2hbcGF5bG9hZEtleV07CiAgICAgICAgfQog
        ICAgICB9CiAgICB9CiAgfSwKCiAgLyoqCiAgICBAbWV0aG9kIG5vcm1hbGl6
        ZUF0dHJpYnV0ZXMKICAgIEBwcml2YXRlCiAgKi8KICBub3JtYWxpemVBdHRy
        aWJ1dGVzOiBmdW5jdGlvbih0eXBlLCBoYXNoKSB7CiAgICB2YXIgcGF5bG9h
        ZEtleSwga2V5OwoKICAgIGlmICh0aGlzLmtleUZvckF0dHJpYnV0ZSkgewog
        ICAgICB0eXBlLmVhY2hBdHRyaWJ1dGUoZnVuY3Rpb24oa2V5KSB7CiAgICAg
        ICAgcGF5bG9hZEtleSA9IHRoaXMua2V5Rm9yQXR0cmlidXRlKGtleSk7CiAg
        ICAgICAgaWYgKGtleSA9PT0gcGF5bG9hZEtleSkgeyByZXR1cm47IH0KCiAg
        ICAgICAgaGFzaFtrZXldID0gaGFzaFtwYXlsb2FkS2V5XTsKICAgICAgICBk
        ZWxldGUgaGFzaFtwYXlsb2FkS2V5XTsKICAgICAgfSwgdGhpcyk7CiAgICB9
        CiAgfSwKCiAgLyoqCiAgICBAbWV0aG9kIG5vcm1hbGl6ZVJlbGF0aW9uc2hp
        cHMKICAgIEBwcml2YXRlCiAgKi8KICBub3JtYWxpemVSZWxhdGlvbnNoaXBz
        OiBmdW5jdGlvbih0eXBlLCBoYXNoKSB7CiAgICB2YXIgcGF5bG9hZEtleSwg
        a2V5OwoKICAgIGlmICh0aGlzLmtleUZvclJlbGF0aW9uc2hpcCkgewogICAg
        ICB0eXBlLmVhY2hSZWxhdGlvbnNoaXAoZnVuY3Rpb24oa2V5LCByZWxhdGlv
        bnNoaXApIHsKICAgICAgICBwYXlsb2FkS2V5ID0gdGhpcy5rZXlGb3JSZWxh
        dGlvbnNoaXAoa2V5LCByZWxhdGlvbnNoaXAua2luZCk7CiAgICAgICAgaWYg
        KGtleSA9PT0gcGF5bG9hZEtleSkgeyByZXR1cm47IH0KCiAgICAgICAgaGFz
        aFtrZXldID0gaGFzaFtwYXlsb2FkS2V5XTsKICAgICAgICBkZWxldGUgaGFz
        aFtwYXlsb2FkS2V5XTsKICAgICAgfSwgdGhpcyk7CiAgICB9CiAgfSwKCiAg
        LyoqCiAgICBDYWxsZWQgd2hlbiB0aGUgc2VydmVyIGhhcyByZXR1cm5lZCBh
        IHBheWxvYWQgcmVwcmVzZW50aW5nCiAgICBhIHNpbmdsZSByZWNvcmQsIHN1
        Y2ggYXMgaW4gcmVzcG9uc2UgdG8gYSBgZmluZGAgb3IgYHNhdmVgLgoKICAg
        IEl0IGlzIHlvdXIgb3Bwb3J0dW5pdHkgdG8gY2xlYW4gdXAgdGhlIHNlcnZl
        cidzIHJlc3BvbnNlIGludG8gdGhlIG5vcm1hbGl6ZWQKICAgIGZvcm0gZXhw
        ZWN0ZWQgYnkgRW1iZXIgRGF0YS4KCiAgICBJZiB5b3Ugd2FudCwgeW91IGNh
        biBqdXN0IHJlc3RydWN0dXJlIHRoZSB0b3AtbGV2ZWwgb2YgeW91ciBwYXls
        b2FkLCBhbmQKICAgIGRvIG1vcmUgZmluZS1ncmFpbmVkIG5vcm1hbGl6YXRp
        b24gaW4gdGhlIGBub3JtYWxpemVgIG1ldGhvZC4KCiAgICBGb3IgZXhhbXBs
        ZSwgaWYgeW91IGhhdmUgYSBwYXlsb2FkIGxpa2UgdGhpcyBpbiByZXNwb25z
        ZSB0byBhIHJlcXVlc3QgZm9yCiAgICBwb3N0IDE6CgogICAgYGBganMKICAg
        IHsKICAgICAgImlkIjogMSwKICAgICAgInRpdGxlIjogIlJhaWxzIGlzIG9t
        YWthc2UiLAoKICAgICAgIl9lbWJlZGRlZCI6IHsKICAgICAgICAiY29tbWVu
        dCI6IFt7CiAgICAgICAgICAiX2lkIjogMSwKICAgICAgICAgICJjb21tZW50
        X3RpdGxlIjogIkZJUlNUIgogICAgICAgIH0sIHsKICAgICAgICAgICJfaWQi
        OiAyLAogICAgICAgICAgImNvbW1lbnRfdGl0bGUiOiAiUmFpbHMgaXMgdW5h
        Z2kiCiAgICAgICAgfV0KICAgICAgfQogICAgfQogICAgYGBgCgogICAgWW91
        IGNvdWxkIGltcGxlbWVudCBhIHNlcmlhbGl6ZXIgdGhhdCBsb29rcyBsaWtl
        IHRoaXMgdG8gZ2V0IHlvdXIgcGF5bG9hZAogICAgaW50byBzaGFwZToKCiAg
        ICBgYGBqcwogICAgQXBwLlBvc3RTZXJpYWxpemVyID0gRFMuUkVTVFNlcmlh
        bGl6ZXIuZXh0ZW5kKHsKICAgICAgLy8gRmlyc3QsIHJlc3RydWN0dXJlIHRo
        ZSB0b3AtbGV2ZWwgc28gaXQncyBvcmdhbml6ZWQgYnkgdHlwZQogICAgICBl
        eHRyYWN0U2luZ2xlOiBmdW5jdGlvbihzdG9yZSwgdHlwZSwgcGF5bG9hZCwg
        aWQsIHJlcXVlc3RUeXBlKSB7CiAgICAgICAgdmFyIGNvbW1lbnRzID0gcGF5
        bG9hZC5fZW1iZWRkZWQuY29tbWVudDsKICAgICAgICBkZWxldGUgcGF5bG9h
        ZC5fZW1iZWRkZWQ7CgogICAgICAgIHBheWxvYWQgPSB7IGNvbW1lbnRzOiBj
        b21tZW50cywgcG9zdDogcGF5bG9hZCB9OwogICAgICAgIHJldHVybiB0aGlz
        Ll9zdXBlcihzdG9yZSwgdHlwZSwgcGF5bG9hZCwgaWQsIHJlcXVlc3RUeXBl
        KTsKICAgICAgfSwKCiAgICAgIG5vcm1hbGl6ZUhhc2g6IHsKICAgICAgICAv
        LyBOZXh0LCBub3JtYWxpemUgaW5kaXZpZHVhbCBjb21tZW50cywgd2hpY2gg
        KGFmdGVyIGBleHRyYWN0YCkKICAgICAgICAvLyBhcmUgbm93IGxvY2F0ZWQg
        dW5kZXIgYGNvbW1lbnRzYAogICAgICAgIGNvbW1lbnRzOiBmdW5jdGlvbiho
        YXNoKSB7CiAgICAgICAgICBoYXNoLmlkID0gaGFzaC5faWQ7CiAgICAgICAg
        ICBoYXNoLnRpdGxlID0gaGFzaC5jb21tZW50X3RpdGxlOwogICAgICAgICAg
        ZGVsZXRlIGhhc2guX2lkOwogICAgICAgICAgZGVsZXRlIGhhc2guY29tbWVu
        dF90aXRsZTsKICAgICAgICAgIHJldHVybiBoYXNoOwogICAgICAgIH0KICAg
        ICAgfQogICAgfSkKICAgIGBgYAoKICAgIFdoZW4geW91IGNhbGwgc3VwZXIg
        ZnJvbSB5b3VyIG93biBpbXBsZW1lbnRhdGlvbiBvZiBgZXh0cmFjdFNpbmds
        ZWAsIHRoZQogICAgYnVpbHQtaW4gaW1wbGVtZW50YXRpb24gd2lsbCBmaW5k
        IHRoZSBwcmltYXJ5IHJlY29yZCBpbiB5b3VyIG5vcm1hbGl6ZWQKICAgIHBh
        eWxvYWQgYW5kIHB1c2ggdGhlIHJlbWFpbmluZyByZWNvcmRzIGludG8gdGhl
        IHN0b3JlLgoKICAgIFRoZSBwcmltYXJ5IHJlY29yZCBpcyB0aGUgc2luZ2xl
        IGhhc2ggZm91bmQgdW5kZXIgYHBvc3RgIG9yIHRoZSBmaXJzdAogICAgZWxl
        bWVudCBvZiB0aGUgYHBvc3RzYCBhcnJheS4KCiAgICBUaGUgcHJpbWFyeSBy
        ZWNvcmQgaGFzIHNwZWNpYWwgbWVhbmluZyB3aGVuIHRoZSByZWNvcmQgaXMg
        YmVpbmcgY3JlYXRlZAogICAgZm9yIHRoZSBmaXJzdCB0aW1lIG9yIHVwZGF0
        ZWQgKGBjcmVhdGVSZWNvcmRgIG9yIGB1cGRhdGVSZWNvcmRgKS4gSW4KICAg
        IHBhcnRpY3VsYXIsIGl0IHdpbGwgdXBkYXRlIHRoZSBwcm9wZXJ0aWVzIG9m
        IHRoZSByZWNvcmQgdGhhdCB3YXMgc2F2ZWQuCgogICAgQG1ldGhvZCBleHRy
        YWN0U2luZ2xlCiAgICBAcGFyYW0ge0RTLlN0b3JlfSBzdG9yZQogICAgQHBh
        cmFtIHtzdWJjbGFzcyBvZiBEUy5Nb2RlbH0gdHlwZQogICAgQHBhcmFtIHtP
        YmplY3R9IHBheWxvYWQKICAgIEBwYXJhbSB7U3RyaW5nfSBpZAogICAgQHBh
        cmFtIHsnZmluZCd8J2NyZWF0ZVJlY29yZCd8J3VwZGF0ZVJlY29yZCd8J2Rl
        bGV0ZVJlY29yZCd9IHJlcXVlc3RUeXBlCiAgICBAcmV0dXJucyB7T2JqZWN0
        fSB0aGUgcHJpbWFyeSByZXNwb25zZSB0byB0aGUgb3JpZ2luYWwgcmVxdWVz
        dAogICovCiAgZXh0cmFjdFNpbmdsZTogZnVuY3Rpb24oc3RvcmUsIHByaW1h
        cnlUeXBlLCBwYXlsb2FkLCByZWNvcmRJZCwgcmVxdWVzdFR5cGUpIHsKICAg
        IHBheWxvYWQgPSB0aGlzLm5vcm1hbGl6ZVBheWxvYWQocHJpbWFyeVR5cGUs
        IHBheWxvYWQpOwoKICAgIHZhciBwcmltYXJ5VHlwZU5hbWUgPSBwcmltYXJ5
        VHlwZS50eXBlS2V5LAogICAgICAgIHByaW1hcnlSZWNvcmQ7CgogICAgZm9y
        ICh2YXIgcHJvcCBpbiBwYXlsb2FkKSB7CiAgICAgIHZhciB0eXBlTmFtZSAg
        PSB0aGlzLnR5cGVGb3JSb290KHByb3ApLAogICAgICAgICAgdHlwZSA9IHN0
        b3JlLm1vZGVsRm9yKHR5cGVOYW1lKSwKICAgICAgICAgIGlzUHJpbWFyeSA9
        IHR5cGUudHlwZUtleSA9PT0gcHJpbWFyeVR5cGVOYW1lOwoKICAgICAgLy8g
        bGVnYWN5IHN1cHBvcnQgZm9yIHNpbmd1bGFyIHJlc291cmNlcwogICAgICBp
        ZiAoaXNQcmltYXJ5ICYmIEVtYmVyLnR5cGVPZihwYXlsb2FkW3Byb3BdKSAh
        PT0gImFycmF5IiApIHsKICAgICAgICBwcmltYXJ5UmVjb3JkID0gdGhpcy5u
        b3JtYWxpemUocHJpbWFyeVR5cGUsIHBheWxvYWRbcHJvcF0sIHByb3ApOwog
        ICAgICAgIGNvbnRpbnVlOwogICAgICB9CgogICAgICAvKmpzaGludCBsb29w
        ZnVuYzp0cnVlKi8KICAgICAgZm9yRWFjaC5jYWxsKHBheWxvYWRbcHJvcF0s
        IGZ1bmN0aW9uKGhhc2gpIHsKICAgICAgICB2YXIgdHlwZU5hbWUgPSB0aGlz
        LnR5cGVGb3JSb290KHByb3ApLAogICAgICAgICAgICB0eXBlID0gc3RvcmUu
        bW9kZWxGb3IodHlwZU5hbWUpLAogICAgICAgICAgICB0eXBlU2VyaWFsaXpl
        ciA9IHN0b3JlLnNlcmlhbGl6ZXJGb3IodHlwZSk7CgogICAgICAgIGhhc2gg
        PSB0eXBlU2VyaWFsaXplci5ub3JtYWxpemUodHlwZSwgaGFzaCwgcHJvcCk7
        CgogICAgICAgIHZhciBpc0ZpcnN0Q3JlYXRlZFJlY29yZCA9IGlzUHJpbWFy
        eSAmJiAhcmVjb3JkSWQgJiYgIXByaW1hcnlSZWNvcmQsCiAgICAgICAgICAg
        IGlzVXBkYXRlZFJlY29yZCA9IGlzUHJpbWFyeSAmJiBjb2VyY2VJZChoYXNo
        LmlkKSA9PT0gcmVjb3JkSWQ7CgogICAgICAgIC8vIGZpbmQgdGhlIHByaW1h
        cnkgcmVjb3JkLgogICAgICAgIC8vCiAgICAgICAgLy8gSXQncyBlaXRoZXI6
        CiAgICAgICAgLy8gKiB0aGUgcmVjb3JkIHdpdGggdGhlIHNhbWUgSUQgYXMg
        dGhlIG9yaWdpbmFsIHJlcXVlc3QKICAgICAgICAvLyAqIGluIHRoZSBjYXNl
        IG9mIGEgbmV3bHkgY3JlYXRlZCByZWNvcmQgdGhhdCBkaWRuJ3QgaGF2ZSBh
        biBJRCwgdGhlIGZpcnN0CiAgICAgICAgLy8gICByZWNvcmQgaW4gdGhlIEFy
        cmF5CiAgICAgICAgaWYgKGlzRmlyc3RDcmVhdGVkUmVjb3JkIHx8IGlzVXBk
        YXRlZFJlY29yZCkgewogICAgICAgICAgcHJpbWFyeVJlY29yZCA9IGhhc2g7
        CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHN0b3JlLnB1c2godHlwZU5h
        bWUsIGhhc2gpOwogICAgICAgIH0KICAgICAgfSwgdGhpcyk7CiAgICB9Cgog
        ICAgcmV0dXJuIHByaW1hcnlSZWNvcmQ7CiAgfSwKCiAgLyoqCiAgICBDYWxs
        ZWQgd2hlbiB0aGUgc2VydmVyIGhhcyByZXR1cm5lZCBhIHBheWxvYWQgcmVw
        cmVzZW50aW5nCiAgICBtdWx0aXBsZSByZWNvcmRzLCBzdWNoIGFzIGluIHJl
        c3BvbnNlIHRvIGEgYGZpbmRBbGxgIG9yIGBmaW5kUXVlcnlgLgoKICAgIEl0
        IGlzIHlvdXIgb3Bwb3J0dW5pdHkgdG8gY2xlYW4gdXAgdGhlIHNlcnZlcidz
        IHJlc3BvbnNlIGludG8gdGhlIG5vcm1hbGl6ZWQKICAgIGZvcm0gZXhwZWN0
        ZWQgYnkgRW1iZXIgRGF0YS4KCiAgICBJZiB5b3Ugd2FudCwgeW91IGNhbiBq
        dXN0IHJlc3RydWN0dXJlIHRoZSB0b3AtbGV2ZWwgb2YgeW91ciBwYXlsb2Fk
        LCBhbmQKICAgIGRvIG1vcmUgZmluZS1ncmFpbmVkIG5vcm1hbGl6YXRpb24g
        aW4gdGhlIGBub3JtYWxpemVgIG1ldGhvZC4KCiAgICBGb3IgZXhhbXBsZSwg
        aWYgeW91IGhhdmUgYSBwYXlsb2FkIGxpa2UgdGhpcyBpbiByZXNwb25zZSB0
        byBhIHJlcXVlc3QgZm9yCiAgICBhbGwgcG9zdHM6CgogICAgYGBganMKICAg
        IHsKICAgICAgIl9lbWJlZGRlZCI6IHsKICAgICAgICAicG9zdCI6IFt7CiAg
        ICAgICAgICAiaWQiOiAxLAogICAgICAgICAgInRpdGxlIjogIlJhaWxzIGlz
        IG9tYWthc2UiCiAgICAgICAgfSwgewogICAgICAgICAgImlkIjogMiwKICAg
        ICAgICAgICJ0aXRsZSI6ICJUaGUgUGFybGV5IExldHRlciIKICAgICAgICB9
        XSwKICAgICAgICAiY29tbWVudCI6IFt7CiAgICAgICAgICAiX2lkIjogMSwK
        ICAgICAgICAgICJjb21tZW50X3RpdGxlIjogIlJhaWxzIGlzIHVuYWdpIgog
        ICAgICAgICAgInBvc3RfaWQiOiAxCiAgICAgICAgfSwgewogICAgICAgICAg
        Il9pZCI6IDIsCiAgICAgICAgICAiY29tbWVudF90aXRsZSI6ICJEb24ndCB0
        cmVhZCBvbiBtZSIsCiAgICAgICAgICAicG9zdF9pZCI6IDIKICAgICAgICB9
        XQogICAgICB9CiAgICB9CiAgICBgYGAKCiAgICBZb3UgY291bGQgaW1wbGVt
        ZW50IGEgc2VyaWFsaXplciB0aGF0IGxvb2tzIGxpa2UgdGhpcyB0byBnZXQg
        eW91ciBwYXlsb2FkCiAgICBpbnRvIHNoYXBlOgoKICAgIGBgYGpzCiAgICBB
        cHAuUG9zdFNlcmlhbGl6ZXIgPSBEUy5SRVNUU2VyaWFsaXplci5leHRlbmQo
        ewogICAgICAvLyBGaXJzdCwgcmVzdHJ1Y3R1cmUgdGhlIHRvcC1sZXZlbCBz
        byBpdCdzIG9yZ2FuaXplZCBieSB0eXBlCiAgICAgIC8vIGFuZCB0aGUgY29t
        bWVudHMgYXJlIGxpc3RlZCB1bmRlciBhIHBvc3QncyBgY29tbWVudHNgIGtl
        eS4KICAgICAgZXh0cmFjdEFycmF5OiBmdW5jdGlvbihzdG9yZSwgdHlwZSwg
        cGF5bG9hZCwgaWQsIHJlcXVlc3RUeXBlKSB7CiAgICAgICAgdmFyIHBvc3Rz
        ID0gcGF5bG9hZC5fZW1iZWRkZWQucG9zdDsKICAgICAgICB2YXIgY29tbWVu
        dHMgPSBbXTsKICAgICAgICB2YXIgcG9zdENhY2hlID0ge307CgogICAgICAg
        IHBvc3RzLmZvckVhY2goZnVuY3Rpb24ocG9zdCkgewogICAgICAgICAgcG9z
        dC5jb21tZW50cyA9IFtdOwogICAgICAgICAgcG9zdENhY2hlW3Bvc3QuaWRd
        ID0gcG9zdDsKICAgICAgICB9KTsKCiAgICAgICAgcGF5bG9hZC5fZW1iZWRk
        ZWQuY29tbWVudC5mb3JFYWNoKGZ1bmN0aW9uKGNvbW1lbnQpIHsKICAgICAg
        ICAgIGNvbW1lbnRzLnB1c2goY29tbWVudCk7CiAgICAgICAgICBwb3N0Q2Fj
        aGVbY29tbWVudC5wb3N0X2lkXS5jb21tZW50cy5wdXNoKGNvbW1lbnQpOwog
        ICAgICAgICAgZGVsZXRlIGNvbW1lbnQucG9zdF9pZDsKICAgICAgICB9Cgog
        ICAgICAgIHBheWxvYWQgPSB7IGNvbW1lbnRzOiBjb21tZW50cywgcG9zdHM6
        IHBheWxvYWQgfTsKCiAgICAgICAgcmV0dXJuIHRoaXMuX3N1cGVyKHN0b3Jl
        LCB0eXBlLCBwYXlsb2FkLCBpZCwgcmVxdWVzdFR5cGUpOwogICAgICB9LAoK
        ICAgICAgbm9ybWFsaXplSGFzaDogewogICAgICAgIC8vIE5leHQsIG5vcm1h
        bGl6ZSBpbmRpdmlkdWFsIGNvbW1lbnRzLCB3aGljaCAoYWZ0ZXIgYGV4dHJh
        Y3RgKQogICAgICAgIC8vIGFyZSBub3cgbG9jYXRlZCB1bmRlciBgY29tbWVu
        dHNgCiAgICAgICAgY29tbWVudHM6IGZ1bmN0aW9uKGhhc2gpIHsKICAgICAg
        ICAgIGhhc2guaWQgPSBoYXNoLl9pZDsKICAgICAgICAgIGhhc2gudGl0bGUg
        PSBoYXNoLmNvbW1lbnRfdGl0bGU7CiAgICAgICAgICBkZWxldGUgaGFzaC5f
        aWQ7CiAgICAgICAgICBkZWxldGUgaGFzaC5jb21tZW50X3RpdGxlOwogICAg
        ICAgICAgcmV0dXJuIGhhc2g7CiAgICAgICAgfQogICAgICB9CiAgICB9KQog
        ICAgYGBgCgogICAgV2hlbiB5b3UgY2FsbCBzdXBlciBmcm9tIHlvdXIgb3du
        IGltcGxlbWVudGF0aW9uIG9mIGBleHRyYWN0QXJyYXlgLCB0aGUKICAgIGJ1
        aWx0LWluIGltcGxlbWVudGF0aW9uIHdpbGwgZmluZCB0aGUgcHJpbWFyeSBh
        cnJheSBpbiB5b3VyIG5vcm1hbGl6ZWQKICAgIHBheWxvYWQgYW5kIHB1c2gg
        dGhlIHJlbWFpbmluZyByZWNvcmRzIGludG8gdGhlIHN0b3JlLgoKICAgIFRo
        ZSBwcmltYXJ5IGFycmF5IGlzIHRoZSBhcnJheSBmb3VuZCB1bmRlciBgcG9z
        dHNgLgoKICAgIFRoZSBwcmltYXJ5IHJlY29yZCBoYXMgc3BlY2lhbCBtZWFu
        aW5nIHdoZW4gcmVzcG9uZGluZyB0byBgZmluZFF1ZXJ5YAogICAgb3IgYGZp
        bmRIYXNNYW55YC4gSW4gcGFydGljdWxhciwgdGhlIHByaW1hcnkgYXJyYXkg
        d2lsbCBiZWNvbWUgdGhlCiAgICBsaXN0IG9mIHJlY29yZHMgaW4gdGhlIHJl
        Y29yZCBhcnJheSB0aGF0IGtpY2tlZCBvZmYgdGhlIHJlcXVlc3QuCgogICAg
        SWYgeW91ciBwcmltYXJ5IGFycmF5IGNvbnRhaW5zIHNlY29uZGFyeSAoZW1i
        ZWRkZWQpIHJlY29yZHMgb2YgdGhlIHNhbWUgdHlwZSwKICAgIHlvdSBjYW5u
        b3QgcGxhY2UgdGhlc2UgaW50byB0aGUgcHJpbWFyeSBhcnJheSBgcG9zdHNg
        LiBJbnN0ZWFkLCBwbGFjZSB0aGUKICAgIHNlY29uZGFyeSBpdGVtcyBpbnRv
        IGFuIHVuZGVyc2NvcmUgcHJlZml4ZWQgcHJvcGVydHkgYF9wb3N0c2AsIHdo
        aWNoIHdpbGwKICAgIHB1c2ggdGhlc2UgaXRlbXMgaW50byB0aGUgc3RvcmUg
        YW5kIHdpbGwgbm90IGFmZmVjdCB0aGUgcmVzdWx0aW5nIHF1ZXJ5LgoKICAg
        IEBtZXRob2QgZXh0cmFjdEFycmF5CiAgICBAcGFyYW0ge0RTLlN0b3JlfSBz
        dG9yZQogICAgQHBhcmFtIHtzdWJjbGFzcyBvZiBEUy5Nb2RlbH0gdHlwZQog
        ICAgQHBhcmFtIHtPYmplY3R9IHBheWxvYWQKICAgIEBwYXJhbSB7J2ZpbmRB
        bGwnfCdmaW5kTWFueSd8J2ZpbmRIYXNNYW55J3wnZmluZFF1ZXJ5J30gcmVx
        dWVzdFR5cGUKICAgIEByZXR1cm5zIHtBcnJheX0gVGhlIHByaW1hcnkgYXJy
        YXkgdGhhdCB3YXMgcmV0dXJuZWQgaW4gcmVzcG9uc2UKICAgICAgdG8gdGhl
        IG9yaWdpbmFsIHF1ZXJ5LgogICovCiAgZXh0cmFjdEFycmF5OiBmdW5jdGlv
        bihzdG9yZSwgcHJpbWFyeVR5cGUsIHBheWxvYWQpIHsKICAgIHBheWxvYWQg
        PSB0aGlzLm5vcm1hbGl6ZVBheWxvYWQocHJpbWFyeVR5cGUsIHBheWxvYWQp
        OwoKICAgIHZhciBwcmltYXJ5VHlwZU5hbWUgPSBwcmltYXJ5VHlwZS50eXBl
        S2V5LAogICAgICAgIHByaW1hcnlBcnJheTsKCiAgICBmb3IgKHZhciBwcm9w
        IGluIHBheWxvYWQpIHsKICAgICAgdmFyIHR5cGVLZXkgPSBwcm9wLAogICAg
        ICAgICAgZm9yY2VkU2Vjb25kYXJ5ID0gZmFsc2U7CgogICAgICBpZiAocHJv
        cC5jaGFyQXQoMCkgPT09ICdfJykgewogICAgICAgIGZvcmNlZFNlY29uZGFy
        eSA9IHRydWU7CiAgICAgICAgdHlwZUtleSA9IHByb3Auc3Vic3RyKDEpOwog
        ICAgICB9CgogICAgICB2YXIgdHlwZU5hbWUgPSB0aGlzLnR5cGVGb3JSb290
        KHR5cGVLZXkpLAogICAgICAgICAgdHlwZSA9IHN0b3JlLm1vZGVsRm9yKHR5
        cGVOYW1lKSwKICAgICAgICAgIHR5cGVTZXJpYWxpemVyID0gc3RvcmUuc2Vy
        aWFsaXplckZvcih0eXBlKSwKICAgICAgICAgIGlzUHJpbWFyeSA9ICghZm9y
        Y2VkU2Vjb25kYXJ5ICYmICh0eXBlLnR5cGVLZXkgPT09IHByaW1hcnlUeXBl
        TmFtZSkpOwoKICAgICAgLypqc2hpbnQgbG9vcGZ1bmM6dHJ1ZSovCiAgICAg
        IHZhciBub3JtYWxpemVkQXJyYXkgPSBtYXAuY2FsbChwYXlsb2FkW3Byb3Bd
        LCBmdW5jdGlvbihoYXNoKSB7CiAgICAgICAgcmV0dXJuIHR5cGVTZXJpYWxp
        emVyLm5vcm1hbGl6ZSh0eXBlLCBoYXNoLCBwcm9wKTsKICAgICAgfSwgdGhp
        cyk7CgogICAgICBpZiAoaXNQcmltYXJ5KSB7CiAgICAgICAgcHJpbWFyeUFy
        cmF5ID0gbm9ybWFsaXplZEFycmF5OwogICAgICB9IGVsc2UgewogICAgICAg
        IHN0b3JlLnB1c2hNYW55KHR5cGVOYW1lLCBub3JtYWxpemVkQXJyYXkpOwog
        ICAgICB9CiAgICB9CgogICAgcmV0dXJuIHByaW1hcnlBcnJheTsKICB9LAoK
        ICAvKioKICAgIFRoaXMgbWV0aG9kIGFsbG93cyB5b3UgdG8gcHVzaCBhIHBh
        eWxvYWQgY29udGFpbmluZyB0b3AtbGV2ZWwKICAgIGNvbGxlY3Rpb25zIG9m
        IHJlY29yZHMgb3JnYW5pemVkIHBlciB0eXBlLgoKICAgIGBgYGpzCiAgICB7
        CiAgICAgICJwb3N0cyI6IFt7CiAgICAgICAgImlkIjogIjEiLAogICAgICAg
        ICJ0aXRsZSI6ICJSYWlscyBpcyBvbWFrYXNlIiwKICAgICAgICAiYXV0aG9y
        IiwgIjEiLAogICAgICAgICJjb21tZW50cyI6IFsgIjEiIF0KICAgICAgfV0s
        CiAgICAgICJjb21tZW50cyI6IFt7CiAgICAgICAgImlkIjogIjEiLAogICAg
        ICAgICJib2R5IjogIkZJUlNUIgogICAgICB9XSwKICAgICAgInVzZXJzIjog
        W3sKICAgICAgICAiaWQiOiAiMSIsCiAgICAgICAgIm5hbWUiOiAiQGQyaCIK
        ICAgICAgfV0KICAgIH0KICAgIGBgYAoKICAgIEl0IHdpbGwgZmlyc3Qgbm9y
        bWFsaXplIHRoZSBwYXlsb2FkLCBzbyB5b3UgY2FuIHVzZSB0aGlzIHRvIHB1
        c2gKICAgIGluIGRhdGEgc3RyZWFtaW5nIGluIGZyb20geW91ciBzZXJ2ZXIg
        c3RydWN0dXJlZCB0aGUgc2FtZSB3YXkKICAgIHRoYXQgZmV0Y2hlcyBhbmQg
        c2F2ZXMgYXJlIHN0cnVjdHVyZWQuCgogICAgQG1ldGhvZCBwdXNoUGF5bG9h
        ZAogICAgQHBhcmFtIHtEUy5TdG9yZX0gc3RvcmUKICAgIEBwYXJhbSB7T2Jq
        ZWN0fSBwYXlsb2FkCiAgKi8KICBwdXNoUGF5bG9hZDogZnVuY3Rpb24oc3Rv
        cmUsIHBheWxvYWQpIHsKICAgIHBheWxvYWQgPSB0aGlzLm5vcm1hbGl6ZVBh
        eWxvYWQobnVsbCwgcGF5bG9hZCk7CgogICAgZm9yICh2YXIgcHJvcCBpbiBw
        YXlsb2FkKSB7CiAgICAgIHZhciB0eXBlTmFtZSA9IHRoaXMudHlwZUZvclJv
        b3QocHJvcCksCiAgICAgICAgICB0eXBlID0gc3RvcmUubW9kZWxGb3IodHlw
        ZU5hbWUpOwoKICAgICAgLypqc2hpbnQgbG9vcGZ1bmM6dHJ1ZSovCiAgICAg
        IHZhciBub3JtYWxpemVkQXJyYXkgPSBtYXAuY2FsbChFbWJlci5tYWtlQXJy
        YXkocGF5bG9hZFtwcm9wXSksIGZ1bmN0aW9uKGhhc2gpIHsKICAgICAgICBy
        ZXR1cm4gdGhpcy5ub3JtYWxpemUodHlwZSwgaGFzaCwgcHJvcCk7CiAgICAg
        IH0sIHRoaXMpOwoKICAgICAgc3RvcmUucHVzaE1hbnkodHlwZU5hbWUsIG5v
        cm1hbGl6ZWRBcnJheSk7CiAgICB9CiAgfSwKCiAgLyoqCiAgICBZb3UgY2Fu
        IHVzZSB0aGlzIG1ldGhvZCB0byBub3JtYWxpemUgdGhlIEpTT04gcm9vdCBr
        ZXlzIHJldHVybmVkCiAgICBpbnRvIHRoZSBtb2RlbCB0eXBlIGV4cGVjdGVk
        IGJ5IHlvdXIgc3RvcmUuCgogICAgRm9yIGV4YW1wbGUsIHlvdXIgc2VydmVy
        IG1heSByZXR1cm4gdW5kZXJzY29yZWQgcm9vdCBrZXlzIHJhdGhlciB0aGFu
        CiAgICB0aGUgZXhwZWN0ZWQgY2FtZWxjYXNlZCB2ZXJzaW9ucy4KCiAgICBg
        YGBqcwogICAgQXBwLkFwcGxpY2F0aW9uU2VyaWFsaXplciA9IERTLlJFU1RT
        ZXJpYWxpemVyLmV4dGVuZCh7CiAgICAgIHR5cGVGb3JSb290OiBmdW5jdGlv
        bihyb290KSB7CiAgICAgICAgdmFyIGNhbWVsaXplZCA9IEVtYmVyLlN0cmlu
        Zy5jYW1lbGl6ZShyb290KTsKICAgICAgICByZXR1cm4gRW1iZXIuU3RyaW5n
        LnNpbmd1bGFyaXplKGNhbWVsaXplZCk7CiAgICAgIH0KICAgIH0pOwogICAg
        YGBgCgogICAgQG1ldGhvZCB0eXBlRm9yUm9vdAogICAgQHBhcmFtIHtTdHJp
        bmd9IHJvb3QKICAgIEByZXR1cm5zIHtTdHJpbmd9IHRoZSBtb2RlbCdzIHR5
        cGVLZXkKICAqLwogIHR5cGVGb3JSb290OiBmdW5jdGlvbihyb290KSB7CiAg
        ICByZXR1cm4gRW1iZXIuU3RyaW5nLnNpbmd1bGFyaXplKHJvb3QpOwogIH0s
        CgogIC8vIFNFUklBTElaRQoKICAvKioKICAgIENhbGxlZCB3aGVuIGEgcmVj
        b3JkIGlzIHNhdmVkIGluIG9yZGVyIHRvIGNvbnZlcnQgdGhlCiAgICByZWNv
        cmQgaW50byBKU09OLgoKICAgIEJ5IGRlZmF1bHQsIGl0IGNyZWF0ZXMgYSBK
        U09OIG9iamVjdCB3aXRoIGEga2V5IGZvcgogICAgZWFjaCBhdHRyaWJ1dGUg
        YW5kIGJlbG9uZ3NUbyByZWxhdGlvbnNoaXAuCgogICAgRm9yIGV4YW1wbGUs
        IGNvbnNpZGVyIHRoaXMgbW9kZWw6CgogICAgYGBganMKICAgIEFwcC5Db21t
        ZW50ID0gRFMuTW9kZWwuZXh0ZW5kKHsKICAgICAgdGl0bGU6IERTLmF0dHIo
        KSwKICAgICAgYm9keTogRFMuYXR0cigpLAoKICAgICAgYXV0aG9yOiBEUy5i
        ZWxvbmdzVG8oJ3VzZXInKQogICAgfSk7CiAgICBgYGAKCiAgICBUaGUgZGVm
        YXVsdCBzZXJpYWxpemF0aW9uIHdvdWxkIGNyZWF0ZSBhIEpTT04gb2JqZWN0
        IGxpa2U6CgogICAgYGBganMKICAgIHsKICAgICAgInRpdGxlIjogIlJhaWxz
        IGlzIHVuYWdpIiwKICAgICAgImJvZHkiOiAiUmFpbHM/IE9tYWthc2U/IE9f
        TyIsCiAgICAgICJhdXRob3IiOiAxMgogICAgfQogICAgYGBgCgogICAgQnkg
        ZGVmYXVsdCwgYXR0cmlidXRlcyBhcmUgcGFzc2VkIHRocm91Z2ggYXMtaXMs
        IHVubGVzcwogICAgeW91IHNwZWNpZmllZCBhbiBhdHRyaWJ1dGUgdHlwZSAo
        YERTLmF0dHIoJ2RhdGUnKWApLiBJZgogICAgeW91IHNwZWNpZnkgYSB0cmFu
        c2Zvcm0sIHRoZSBKYXZhU2NyaXB0IHZhbHVlIHdpbGwgYmUKICAgIHNlcmlh
        bGl6ZWQgd2hlbiBpbnNlcnRlZCBpbnRvIHRoZSBKU09OIGhhc2guCgogICAg
        QnkgZGVmYXVsdCwgYmVsb25ncy10byByZWxhdGlvbnNoaXBzIGFyZSBjb252
        ZXJ0ZWQgaW50bwogICAgSURzIHdoZW4gaW5zZXJ0ZWQgaW50byB0aGUgSlNP
        TiBoYXNoLgoKICAgICMjIElEcwoKICAgIGBzZXJpYWxpemVgIHRha2VzIGFu
        IG9wdGlvbnMgaGFzaCB3aXRoIGEgc2luZ2xlIG9wdGlvbjoKICAgIGBpbmNs
        dWRlSWRgLiBJZiB0aGlzIG9wdGlvbiBpcyBgdHJ1ZWAsIGBzZXJpYWxpemVg
        IHdpbGwsCiAgICBieSBkZWZhdWx0IGluY2x1ZGUgdGhlIElEIGluIHRoZSBK
        U09OIG9iamVjdCBpdCBidWlsZHMuCgogICAgVGhlIGFkYXB0ZXIgcGFzc2Vz
        IGluIGBpbmNsdWRlSWQ6IHRydWVgIHdoZW4gc2VyaWFsaXppbmcKICAgIGEg
        cmVjb3JkIGZvciBgY3JlYXRlUmVjb3JkYCwgYnV0IG5vdCBmb3IgYHVwZGF0
        ZVJlY29yZGAuCgogICAgIyMgQ3VzdG9taXphdGlvbgoKICAgIFlvdXIgc2Vy
        dmVyIG1heSBleHBlY3QgYSBkaWZmZXJlbnQgSlNPTiBmb3JtYXQgdGhhbiB0
        aGUKICAgIGJ1aWx0LWluIHNlcmlhbGl6YXRpb24gZm9ybWF0LgoKICAgIElu
        IHRoYXQgY2FzZSwgeW91IGNhbiBpbXBsZW1lbnQgYHNlcmlhbGl6ZWAgeW91
        cnNlbGYgYW5kCiAgICByZXR1cm4gYSBKU09OIGhhc2ggb2YgeW91ciBjaG9v
        c2luZy4KCiAgICBgYGBqcwogICAgQXBwLlBvc3RTZXJpYWxpemVyID0gRFMu
        UkVTVFNlcmlhbGl6ZXIuZXh0ZW5kKHsKICAgICAgc2VyaWFsaXplOiBmdW5j
        dGlvbihwb3N0LCBvcHRpb25zKSB7CiAgICAgICAgdmFyIGpzb24gPSB7CiAg
        ICAgICAgICBQT1NUX1RUTDogcG9zdC5nZXQoJ3RpdGxlJyksCiAgICAgICAg
        ICBQT1NUX0JEWTogcG9zdC5nZXQoJ2JvZHknKSwKICAgICAgICAgIFBPU1Rf
        Q01TOiBwb3N0LmdldCgnY29tbWVudHMnKS5tYXBQcm9wZXJ0eSgnaWQnKQog
        ICAgICAgIH0KCiAgICAgICAgaWYgKG9wdGlvbnMuaW5jbHVkZUlkKSB7CiAg
        ICAgICAgICBqc29uLlBPU1RfSURfID0gcG9zdC5nZXQoJ2lkJyk7CiAgICAg
        ICAgfQoKICAgICAgICByZXR1cm4ganNvbjsKICAgICAgfQogICAgfSk7CiAg
        ICBgYGAKCiAgICAjIyBDdXN0b21pemluZyBhbiBBcHAtV2lkZSBTZXJpYWxp
        emVyCgogICAgSWYgeW91IHdhbnQgdG8gZGVmaW5lIGEgc2VyaWFsaXplciBm
        b3IgeW91ciBlbnRpcmUKICAgIGFwcGxpY2F0aW9uLCB5b3UnbGwgcHJvYmFi
        bHkgd2FudCB0byB1c2UgYGVhY2hBdHRyaWJ1dGVgCiAgICBhbmQgYGVhY2hS
        ZWxhdGlvbnNoaXBgIG9uIHRoZSByZWNvcmQuCgogICAgYGBganMKICAgIEFw
        cC5BcHBsaWNhdGlvblNlcmlhbGl6ZXIgPSBEUy5SRVNUU2VyaWFsaXplci5l
        eHRlbmQoewogICAgICBzZXJpYWxpemU6IGZ1bmN0aW9uKHJlY29yZCwgb3B0
        aW9ucykgewogICAgICAgIHZhciBqc29uID0ge307CgogICAgICAgIHJlY29y
        ZC5lYWNoQXR0cmlidXRlKGZ1bmN0aW9uKG5hbWUpIHsKICAgICAgICAgIGpz
        b25bc2VydmVyQXR0cmlidXRlTmFtZShuYW1lKV0gPSByZWNvcmQuZ2V0KG5h
        bWUpOwogICAgICAgIH0pCgogICAgICAgIHJlY29yZC5lYWNoUmVsYXRpb25z
        aGlwKGZ1bmN0aW9uKG5hbWUsIHJlbGF0aW9uc2hpcCkgewogICAgICAgICAg
        aWYgKHJlbGF0aW9uc2hpcC5raW5kID09PSAnaGFzTWFueScpIHsKICAgICAg
        ICAgICAganNvbltzZXJ2ZXJIYXNNYW55TmFtZShuYW1lKV0gPSByZWNvcmQu
        Z2V0KG5hbWUpLm1hcEJ5KCdpZCcpOwogICAgICAgICAgfQogICAgICAgIH0p
        OwoKICAgICAgICBpZiAob3B0aW9ucy5pbmNsdWRlSWQpIHsKICAgICAgICAg
        IGpzb24uSURfID0gcmVjb3JkLmdldCgnaWQnKTsKICAgICAgICB9CgogICAg
        ICAgIHJldHVybiBqc29uOwogICAgICB9CiAgICB9KTsKCiAgICBmdW5jdGlv
        biBzZXJ2ZXJBdHRyaWJ1dGVOYW1lKGF0dHJpYnV0ZSkgewogICAgICByZXR1
        cm4gYXR0cmlidXRlLnVuZGVyc2NvcmUoKS50b1VwcGVyQ2FzZSgpOwogICAg
        fQoKICAgIGZ1bmN0aW9uIHNlcnZlckhhc01hbnlOYW1lKG5hbWUpIHsKICAg
        ICAgcmV0dXJuIHNlcnZlckF0dHJpYnV0ZU5hbWUobmFtZS5zaW5ndWxhcml6
        ZSgpKSArICJfSURTIjsKICAgIH0KICAgIGBgYAoKICAgIFRoaXMgc2VyaWFs
        aXplciB3aWxsIGdlbmVyYXRlIEpTT04gdGhhdCBsb29rcyBsaWtlIHRoaXM6
        CgogICAgYGBganMKICAgIHsKICAgICAgIlRJVExFIjogIlJhaWxzIGlzIG9t
        YWthc2UiLAogICAgICAiQk9EWSI6ICJZZXAuIE9tYWthc2UuIiwKICAgICAg
        IkNPTU1FTlRfSURTIjogWyAxLCAyLCAzIF0KICAgIH0KICAgIGBgYAoKICAg
        ICMjIFR3ZWFraW5nIHRoZSBEZWZhdWx0IEpTT04KCiAgICBJZiB5b3UganVz
        dCB3YW50IHRvIGRvIHNvbWUgc21hbGwgdHdlYWtzIG9uIHRoZSBkZWZhdWx0
        IEpTT04sCiAgICB5b3UgY2FuIGNhbGwgc3VwZXIgZmlyc3QgYW5kIG1ha2Ug
        dGhlIHR3ZWFrcyBvbiB0aGUgcmV0dXJuZWQKICAgIEpTT04uCgogICAgYGBg
        anMKICAgIEFwcC5Qb3N0U2VyaWFsaXplciA9IERTLlJFU1RTZXJpYWxpemVy
        LmV4dGVuZCh7CiAgICAgIHNlcmlhbGl6ZTogZnVuY3Rpb24ocmVjb3JkLCBv
        cHRpb25zKSB7CiAgICAgICAgdmFyIGpzb24gPSB0aGlzLl9zdXBlcihyZWNv
        cmQsIG9wdGlvbnMpOwoKICAgICAgICBqc29uLnN1YmplY3QgPSBqc29uLnRp
        dGxlOwogICAgICAgIGRlbGV0ZSBqc29uLnRpdGxlOwoKICAgICAgICByZXR1
        cm4ganNvbjsKICAgICAgfQogICAgfSk7CiAgICBgYGAKCiAgICBAbWV0aG9k
        IHNlcmlhbGl6ZQogICAgQHBhcmFtIHJlY29yZAogICAgQHBhcmFtIG9wdGlv
        bnMKICAqLwogIHNlcmlhbGl6ZTogZnVuY3Rpb24ocmVjb3JkLCBvcHRpb25z
        KSB7CiAgICByZXR1cm4gdGhpcy5fc3VwZXIuYXBwbHkodGhpcywgYXJndW1l
        bnRzKTsKICB9LAoKICAvKioKICAgIFlvdSBjYW4gdXNlIHRoaXMgbWV0aG9k
        IHRvIGN1c3RvbWl6ZSB0aGUgcm9vdCBrZXlzIHNlcmlhbGl6ZWQgaW50byB0
        aGUgSlNPTi4KICAgIEJ5IGRlZmF1bHQgdGhlIFJFU1QgU2VyaWFsaXplciBz
        ZW5kcyBjYW1lbGl6ZWQgcm9vdCBrZXlzLgogICAgRm9yIGV4YW1wbGUsIHlv
        dXIgc2VydmVyIG1heSBleHBlY3QgdW5kZXJzY29yZWQgcm9vdCBvYmplY3Rz
        LgoKICAgIGBgYGpzCiAgICBBcHAuQXBwbGljYXRpb25TZXJpYWxpemVyID0g
        RFMuUkVTVFNlcmlhbGl6ZXIuZXh0ZW5kKHsKICAgICAgc2VyaWFsaXplSW50
        b0hhc2g6IGZ1bmN0aW9uKGRhdGEsIHR5cGUsIHJlY29yZCwgb3B0aW9ucykg
        ewogICAgICAgIHZhciByb290ID0gRW1iZXIuU3RyaW5nLmRlY2FtZWxpemUo
        dHlwZS50eXBlS2V5KTsKICAgICAgICBkYXRhW3Jvb3RdID0gdGhpcy5zZXJp
        YWxpemUocmVjb3JkLCBvcHRpb25zKTsKICAgICAgfQogICAgfSk7CiAgICBg
        YGAKCiAgICBAbWV0aG9kIHNlcmlhbGl6ZUludG9IYXNoCiAgICBAcGFyYW0g
        e09iamVjdH0gaGFzaAogICAgQHBhcmFtIHtzdWJjbGFzcyBvZiBEUy5Nb2Rl
        bH0gdHlwZQogICAgQHBhcmFtIHtEUy5Nb2RlbH0gcmVjb3JkCiAgICBAcGFy
        YW0ge09iamVjdH0gb3B0aW9ucwogICovCiAgc2VyaWFsaXplSW50b0hhc2g6
        IGZ1bmN0aW9uKGhhc2gsIHR5cGUsIHJlY29yZCwgb3B0aW9ucykgewogICAg
        dmFyIHJvb3QgPSBFbWJlci5TdHJpbmcuY2FtZWxpemUodHlwZS50eXBlS2V5
        KTsKICAgIGhhc2hbcm9vdF0gPSB0aGlzLnNlcmlhbGl6ZShyZWNvcmQsIG9w
        dGlvbnMpOwogIH0sCgogIC8qKgogICAgWW91IGNhbiB1c2UgdGhpcyBtZXRo
        b2QgdG8gY3VzdG9taXplIGhvdyBwb2x5bW9ycGhpYyBvYmplY3RzIGFyZSBz
        ZXJpYWxpemVkLgogICAgQnkgZGVmYXVsdCB0aGUgSlNPTiBTZXJpYWxpemVy
        IGNyZWF0ZXMgdGhlIGtleSBieSBhcHBlbmRpbmcgYFR5cGVgIHRvCiAgICB0
        aGUgYXR0cmlidXRlIGFuZCB2YWx1ZSBmcm9tIHRoZSBtb2RlbCdzIGNhbWVs
        Y2FzZWQgbW9kZWwgbmFtZS4KCiAgICBAbWV0aG9kIHNlcmlhbGl6ZVBvbHlt
        b3JwaGljVHlwZQogICAgQHBhcmFtIHtEUy5Nb2RlbH0gcmVjb3JkCiAgICBA
        cGFyYW0ge09iamVjdH0ganNvbgogICAgQHBhcmFtIHtPYmplY3R9IHJlbGF0
        aW9uc2hpcAogICovCiAgc2VyaWFsaXplUG9seW1vcnBoaWNUeXBlOiBmdW5j
        dGlvbihyZWNvcmQsIGpzb24sIHJlbGF0aW9uc2hpcCkgewogICAgdmFyIGtl
        eSA9IHJlbGF0aW9uc2hpcC5rZXksCiAgICAgICAgYmVsb25nc1RvID0gZ2V0
        KHJlY29yZCwga2V5KTsKICAgIGtleSA9IHRoaXMua2V5Rm9yQXR0cmlidXRl
        ID8gdGhpcy5rZXlGb3JBdHRyaWJ1dGUoa2V5KSA6IGtleTsKICAgIGpzb25b
        a2V5ICsgIlR5cGUiXSA9IEVtYmVyLlN0cmluZy5jYW1lbGl6ZShiZWxvbmdz
        VG8uY29uc3RydWN0b3IudHlwZUtleSk7CiAgfQp9KTsKCn0pKCk7CgoKCihm
        dW5jdGlvbigpIHsKLyoqCiAgQG1vZHVsZSBlbWJlci1kYXRhCiovCgp2YXIg
        Z2V0ID0gRW1iZXIuZ2V0LCBzZXQgPSBFbWJlci5zZXQ7CnZhciBmb3JFYWNo
        ID0gRW1iZXIuQXJyYXlQb2x5ZmlsbHMuZm9yRWFjaDsKCi8qKgogIFRoZSBS
        RVNUIGFkYXB0ZXIgYWxsb3dzIHlvdXIgc3RvcmUgdG8gY29tbXVuaWNhdGUg
        d2l0aCBhbiBIVFRQIHNlcnZlciBieQogIHRyYW5zbWl0dGluZyBKU09OIHZp
        YSBYSFIuIE1vc3QgRW1iZXIuanMgYXBwcyB0aGF0IGNvbnN1bWUgYSBKU09O
        IEFQSQogIHNob3VsZCB1c2UgdGhlIFJFU1QgYWRhcHRlci4KCiAgVGhpcyBh
        ZGFwdGVyIGlzIGRlc2lnbmVkIGFyb3VuZCB0aGUgaWRlYSB0aGF0IHRoZSBK
        U09OIGV4Y2hhbmdlZCB3aXRoCiAgdGhlIHNlcnZlciBzaG91bGQgYmUgY29u
        dmVudGlvbmFsLgoKICAjIyBKU09OIFN0cnVjdHVyZQoKICBUaGUgUkVTVCBh
        ZGFwdGVyIGV4cGVjdHMgdGhlIEpTT04gcmV0dXJuZWQgZnJvbSB5b3VyIHNl
        cnZlciB0byBmb2xsb3cKICB0aGVzZSBjb252ZW50aW9ucy4KCiAgIyMjIE9i
        amVjdCBSb290CgogIFRoZSBKU09OIHBheWxvYWQgc2hvdWxkIGJlIGFuIG9i
        amVjdCB0aGF0IGNvbnRhaW5zIHRoZSByZWNvcmQgaW5zaWRlIGEKICByb290
        IHByb3BlcnR5LiBGb3IgZXhhbXBsZSwgaW4gcmVzcG9uc2UgdG8gYSBgR0VU
        YCByZXF1ZXN0IGZvcgogIGAvcG9zdHMvMWAsIHRoZSBKU09OIHNob3VsZCBs
        b29rIGxpa2UgdGhpczoKCiAgYGBganMKICB7CiAgICAicG9zdCI6IHsKICAg
        ICAgInRpdGxlIjogIkknbSBSdW5uaW5nIHRvIFJlZm9ybSB0aGUgVzNDJ3Mg
        VGFnIiwKICAgICAgImF1dGhvciI6ICJZZWh1ZGEgS2F0eiIKICAgIH0KICB9
        CiAgYGBgCgogICMjIyBDb252ZW50aW9uYWwgTmFtZXMKCiAgQXR0cmlidXRl
        IG5hbWVzIGluIHlvdXIgSlNPTiBwYXlsb2FkIHNob3VsZCBiZSB0aGUgY2Ft
        ZWxDYXNlZCB2ZXJzaW9ucyBvZgogIHRoZSBhdHRyaWJ1dGVzIGluIHlvdXIg
        RW1iZXIuanMgbW9kZWxzLgoKICBGb3IgZXhhbXBsZSwgaWYgeW91IGhhdmUg
        YSBgUGVyc29uYCBtb2RlbDoKCiAgYGBganMKICBBcHAuUGVyc29uID0gRFMu
        TW9kZWwuZXh0ZW5kKHsKICAgIGZpcnN0TmFtZTogRFMuYXR0cignc3RyaW5n
        JyksCiAgICBsYXN0TmFtZTogRFMuYXR0cignc3RyaW5nJyksCiAgICBvY2N1
        cGF0aW9uOiBEUy5hdHRyKCdzdHJpbmcnKQogIH0pOwogIGBgYAoKICBUaGUg
        SlNPTiByZXR1cm5lZCBzaG91bGQgbG9vayBsaWtlIHRoaXM6CgogIGBgYGpz
        CiAgewogICAgInBlcnNvbiI6IHsKICAgICAgImZpcnN0TmFtZSI6ICJCYXJh
        Y2siLAogICAgICAibGFzdE5hbWUiOiAiT2JhbWEiLAogICAgICAib2NjdXBh
        dGlvbiI6ICJQcmVzaWRlbnQiCiAgICB9CiAgfQogIGBgYAoKICAjIyBDdXN0
        b21pemF0aW9uCgogICMjIyBFbmRwb2ludCBwYXRoIGN1c3RvbWl6YXRpb24K
        CiAgRW5kcG9pbnQgcGF0aHMgY2FuIGJlIHByZWZpeGVkIHdpdGggYSBgbmFt
        ZXNwYWNlYCBieSBzZXR0aW5nIHRoZSBuYW1lc3BhY2UKICBwcm9wZXJ0eSBv
        biB0aGUgYWRhcHRlcjoKCiAgYGBganMKICBEUy5SRVNUQWRhcHRlci5yZW9w
        ZW4oewogICAgbmFtZXNwYWNlOiAnYXBpLzEnCiAgfSk7CiAgYGBgCiAgUmVx
        dWVzdHMgZm9yIGBBcHAuUGVyc29uYCB3b3VsZCBub3cgdGFyZ2V0IGAvYXBp
        LzEvcGVvcGxlLzFgLgoKICAjIyMgSG9zdCBjdXN0b21pemF0aW9uCgogIEFu
        IGFkYXB0ZXIgY2FuIHRhcmdldCBvdGhlciBob3N0cyBieSBzZXR0aW5nIHRo
        ZSBgaG9zdGAgcHJvcGVydHkuCgogIGBgYGpzCiAgRFMuUkVTVEFkYXB0ZXIu
        cmVvcGVuKHsKICAgIGhvc3Q6ICdodHRwczovL2FwaS5leGFtcGxlLmNvbScK
        ICB9KTsKICBgYGAKCiAgIyMjIEhlYWRlcnMgY3VzdG9taXphdGlvbgoKICBT
        b21lIEFQSXMgcmVxdWlyZSBIVFRQIGhlYWRlcnMsIGUuZy4gdG8gcHJvdmlk
        ZSBhbiBBUEkga2V5LiBBbiBhcnJheSBvZgogIGhlYWRlcnMgY2FuIGJlIGFk
        ZGVkIHRvIHRoZSBhZGFwdGVyIHdoaWNoIGFyZSBwYXNzZWQgd2l0aCBldmVy
        eSByZXF1ZXN0OgoKICBgYGBqcwogIERTLlJFU1RBZGFwdGVyLnJlb3Blbih7
        CiAgICBoZWFkZXJzOiB7CiAgICAgICJBUElfS0VZIjogInNlY3JldCBrZXki
        LAogICAgICAiQU5PVEhFUl9IRUFERVIiOiAiU29tZSBoZWFkZXIgdmFsdWUi
        CiAgICB9CiAgfSk7CiAgYGBgCgogIEBjbGFzcyBSRVNUQWRhcHRlcgogIEBj
        b25zdHJ1Y3RvcgogIEBuYW1lc3BhY2UgRFMKICBAZXh0ZW5kcyBEUy5BZGFw
        dGVyCiovCkRTLlJFU1RBZGFwdGVyID0gRFMuQWRhcHRlci5leHRlbmQoewog
        IGRlZmF1bHRTZXJpYWxpemVyOiAnLXJlc3QnLAoKCiAgLyoqCiAgICBFbmRw
        b2ludCBwYXRocyBjYW4gYmUgcHJlZml4ZWQgd2l0aCBhIGBuYW1lc3BhY2Vg
        IGJ5IHNldHRpbmcgdGhlIG5hbWVzcGFjZQogICAgcHJvcGVydHkgb24gdGhl
        IGFkYXB0ZXI6CgogICAgYGBgamF2YXNjcmlwdAogICAgRFMuUkVTVEFkYXB0
        ZXIucmVvcGVuKHsKICAgICAgbmFtZXNwYWNlOiAnYXBpLzEnCiAgICB9KTsK
        ICAgIGBgYAoKICAgIFJlcXVlc3RzIGZvciBgQXBwLlBvc3RgIHdvdWxkIG5v
        dyB0YXJnZXQgYC9hcGkvMS9wb3N0L2AuCgogICAgQHByb3BlcnR5IG5hbWVz
        cGFjZQogICAgQHR5cGUge1N0cmluZ30KICAqLwoKICAvKioKICAgIEFuIGFk
        YXB0ZXIgY2FuIHRhcmdldCBvdGhlciBob3N0cyBieSBzZXR0aW5nIHRoZSBg
        aG9zdGAgcHJvcGVydHkuCgogICAgYGBgamF2YXNjcmlwdAogICAgRFMuUkVT
        VEFkYXB0ZXIucmVvcGVuKHsKICAgICAgaG9zdDogJ2h0dHBzOi8vYXBpLmV4
        YW1wbGUuY29tJwogICAgfSk7CiAgICBgYGAKCiAgICBSZXF1ZXN0cyBmb3Ig
        YEFwcC5Qb3N0YCB3b3VsZCBub3cgdGFyZ2V0IGBodHRwczovL2FwaS5leGFt
        cGxlLmNvbS9wb3N0L2AuCgogICAgQHByb3BlcnR5IGhvc3QKICAgIEB0eXBl
        IHtTdHJpbmd9CiAgKi8KCiAgLyoqCiAgICBTb21lIEFQSXMgcmVxdWlyZSBI
        VFRQIGhlYWRlcnMsIGUuZy4gdG8gcHJvdmlkZSBhbiBBUEkga2V5LiBBbiBh
        cnJheSBvZgogICAgaGVhZGVycyBjYW4gYmUgYWRkZWQgdG8gdGhlIGFkYXB0
        ZXIgd2hpY2ggYXJlIHBhc3NlZCB3aXRoIGV2ZXJ5IHJlcXVlc3Q6CgogICAg
        YGBgamF2YXNjcmlwdAogICAgRFMuUkVTVEFkYXB0ZXIucmVvcGVuKHsKICAg
        ICAgaGVhZGVyczogewogICAgICAgICJBUElfS0VZIjogInNlY3JldCBrZXki
        LAogICAgICAgICJBTk9USEVSX0hFQURFUiI6ICJTb21lIGhlYWRlciB2YWx1
        ZSIKICAgICAgfQogICAgfSk7CiAgICBgYGAKCiAgICBAcHJvcGVydHkgaGVh
        ZGVycwogICAgQHR5cGUge09iamVjdH0KICAqLwoKICAvKioKICAgIENhbGxl
        ZCBieSB0aGUgc3RvcmUgaW4gb3JkZXIgdG8gZmV0Y2ggdGhlIEpTT04gZm9y
        IGEgZ2l2ZW4KICAgIHR5cGUgYW5kIElELgoKICAgIFRoZSBgZmluZGAgbWV0
        aG9kIG1ha2VzIGFuIEFqYXggcmVxdWVzdCB0byBhIFVSTCBjb21wdXRlZCBi
        eSBgYnVpbGRVUkxgLCBhbmQgcmV0dXJucyBhCiAgICBwcm9taXNlIGZvciB0
        aGUgcmVzdWx0aW5nIHBheWxvYWQuCgogICAgVGhpcyBtZXRob2QgcGVyZm9y
        bXMgYW4gSFRUUCBgR0VUYCByZXF1ZXN0IHdpdGggdGhlIGlkIHByb3ZpZGVk
        IGFzIHBhcnQgb2YgdGhlIHF1ZXJ5IHN0cmluZy4KCiAgICBAbWV0aG9kIGZp
        bmQKICAgIEBwYXJhbSB7RFMuU3RvcmV9IHN0b3JlCiAgICBAcGFyYW0ge3N1
        YmNsYXNzIG9mIERTLk1vZGVsfSB0eXBlCiAgICBAcGFyYW0ge1N0cmluZ30g
        aWQKICAgIEByZXR1cm5zIHtQcm9taXNlfSBwcm9taXNlCiAgKi8KICBmaW5k
        OiBmdW5jdGlvbihzdG9yZSwgdHlwZSwgaWQpIHsKICAgIHJldHVybiB0aGlz
        LmFqYXgodGhpcy5idWlsZFVSTCh0eXBlLnR5cGVLZXksIGlkKSwgJ0dFVCcp
        OwogIH0sCgogIC8qKgogICAgQ2FsbGVkIGJ5IHRoZSBzdG9yZSBpbiBvcmRl
        ciB0byBmZXRjaCBhIEpTT04gYXJyYXkgZm9yIGFsbAogICAgb2YgdGhlIHJl
        Y29yZHMgZm9yIGEgZ2l2ZW4gdHlwZS4KCiAgICBUaGUgYGZpbmRBbGxgIG1l
        dGhvZCBtYWtlcyBhbiBBamF4IChIVFRQIEdFVCkgcmVxdWVzdCB0byBhIFVS
        TCBjb21wdXRlZCBieSBgYnVpbGRVUkxgLCBhbmQgcmV0dXJucyBhCiAgICBw
        cm9taXNlIGZvciB0aGUgcmVzdWx0aW5nIHBheWxvYWQuCgogICAgQHByaXZh
        dGUKICAgIEBtZXRob2QgZmluZEFsbAogICAgQHBhcmFtIHtEUy5TdG9yZX0g
        c3RvcmUKICAgIEBwYXJhbSB7c3ViY2xhc3Mgb2YgRFMuTW9kZWx9IHR5cGUK
        ICAgIEBwYXJhbSB7U3RyaW5nfSBzaW5jZVRva2VuCiAgICBAcmV0dXJucyB7
        UHJvbWlzZX0gcHJvbWlzZQogICovCiAgZmluZEFsbDogZnVuY3Rpb24oc3Rv
        cmUsIHR5cGUsIHNpbmNlVG9rZW4pIHsKICAgIHZhciBxdWVyeTsKCiAgICBp
        ZiAoc2luY2VUb2tlbikgewogICAgICBxdWVyeSA9IHsgc2luY2U6IHNpbmNl
        VG9rZW4gfTsKICAgIH0KCiAgICByZXR1cm4gdGhpcy5hamF4KHRoaXMuYnVp
        bGRVUkwodHlwZS50eXBlS2V5KSwgJ0dFVCcsIHsgZGF0YTogcXVlcnkgfSk7
        CiAgfSwKCiAgLyoqCiAgICBDYWxsZWQgYnkgdGhlIHN0b3JlIGluIG9yZGVy
        IHRvIGZldGNoIGEgSlNPTiBhcnJheSBmb3IKICAgIHRoZSByZWNvcmRzIHRo
        YXQgbWF0Y2ggYSBwYXJ0aWN1bGFyIHF1ZXJ5LgoKICAgIFRoZSBgZmluZFF1
        ZXJ5YCBtZXRob2QgbWFrZXMgYW4gQWpheCAoSFRUUCBHRVQpIHJlcXVlc3Qg
        dG8gYSBVUkwgY29tcHV0ZWQgYnkgYGJ1aWxkVVJMYCwgYW5kIHJldHVybnMg
        YQogICAgcHJvbWlzZSBmb3IgdGhlIHJlc3VsdGluZyBwYXlsb2FkLgoKICAg
        IFRoZSBgcXVlcnlgIGFyZ3VtZW50IGlzIGEgc2ltcGxlIEphdmFTY3JpcHQg
        b2JqZWN0IHRoYXQgd2lsbCBiZSBwYXNzZWQgZGlyZWN0bHkKICAgIHRvIHRo
        ZSBzZXJ2ZXIgYXMgcGFyYW1ldGVycy4KCiAgICBAcHJpdmF0ZQogICAgQG1l
        dGhvZCBmaW5kUXVlcnkKICAgIEBwYXJhbSB7RFMuU3RvcmV9IHN0b3JlCiAg
        ICBAcGFyYW0ge3N1YmNsYXNzIG9mIERTLk1vZGVsfSB0eXBlCiAgICBAcGFy
        YW0ge09iamVjdH0gcXVlcnkKICAgIEByZXR1cm5zIHtQcm9taXNlfSBwcm9t
        aXNlCiAgKi8KICBmaW5kUXVlcnk6IGZ1bmN0aW9uKHN0b3JlLCB0eXBlLCBx
        dWVyeSkgewogICAgcmV0dXJuIHRoaXMuYWpheCh0aGlzLmJ1aWxkVVJMKHR5
        cGUudHlwZUtleSksICdHRVQnLCB7IGRhdGE6IHF1ZXJ5IH0pOwogIH0sCgog
        IC8qKgogICAgQ2FsbGVkIGJ5IHRoZSBzdG9yZSBpbiBvcmRlciB0byBmZXRj
        aCBhIEpTT04gYXJyYXkgZm9yCiAgICB0aGUgdW5sb2FkZWQgcmVjb3JkcyBp
        biBhIGhhcy1tYW55IHJlbGF0aW9uc2hpcCB0aGF0IHdlcmUgb3JpZ2luYWxs
        eQogICAgc3BlY2lmaWVkIGFzIElEcy4KCiAgICBGb3IgZXhhbXBsZSwgaWYg
        dGhlIG9yaWdpbmFsIHBheWxvYWQgbG9va3MgbGlrZToKCiAgICBgYGBqcwog
        ICAgewogICAgICAiaWQiOiAxLAogICAgICAidGl0bGUiOiAiUmFpbHMgaXMg
        b21ha2FzZSIsCiAgICAgICJjb21tZW50cyI6IFsgMSwgMiwgMyBdCiAgICB9
        CiAgICBgYGAKCiAgICBUaGUgSURzIHdpbGwgYmUgcGFzc2VkIGFzIGEgVVJM
        LWVuY29kZWQgQXJyYXkgb2YgSURzLCBpbiB0aGlzIGZvcm06CgogICAgYGBg
        CiAgICBpZHNbXT0xJmlkc1tdPTImaWRzW109MwogICAgYGBgCgogICAgTWFu
        eSBzZXJ2ZXJzLCBzdWNoIGFzIFJhaWxzIGFuZCBQSFAsIHdpbGwgYXV0b21h
        dGljYWxseSBjb252ZXJ0IHRoaXMgVVJMLWVuY29kZWQgYXJyYXkKICAgIGlu
        dG8gYW4gQXJyYXkgZm9yIHlvdSBvbiB0aGUgc2VydmVyLXNpZGUuIElmIHlv
        dSB3YW50IHRvIGVuY29kZSB0aGUKICAgIElEcywgZGlmZmVyZW50bHksIGp1
        c3Qgb3ZlcnJpZGUgdGhpcyAob25lLWxpbmUpIG1ldGhvZC4KCiAgICBUaGUg
        YGZpbmRNYW55YCBtZXRob2QgbWFrZXMgYW4gQWpheCAoSFRUUCBHRVQpIHJl
        cXVlc3QgdG8gYSBVUkwgY29tcHV0ZWQgYnkgYGJ1aWxkVVJMYCwgYW5kIHJl
        dHVybnMgYQogICAgcHJvbWlzZSBmb3IgdGhlIHJlc3VsdGluZyBwYXlsb2Fk
        LgoKICAgIEBtZXRob2QgZmluZE1hbnkKICAgIEBwYXJhbSB7RFMuU3RvcmV9
        IHN0b3JlCiAgICBAcGFyYW0ge3N1YmNsYXNzIG9mIERTLk1vZGVsfSB0eXBl
        CiAgICBAcGFyYW0ge0FycmF5fSBpZHMKICAgIEByZXR1cm5zIHtQcm9taXNl
        fSBwcm9taXNlCiAgKi8KICBmaW5kTWFueTogZnVuY3Rpb24oc3RvcmUsIHR5
        cGUsIGlkcykgewogICAgcmV0dXJuIHRoaXMuYWpheCh0aGlzLmJ1aWxkVVJM
        KHR5cGUudHlwZUtleSksICdHRVQnLCB7IGRhdGE6IHsgaWRzOiBpZHMgfSB9
        KTsKICB9LAoKICAvKioKICAgIENhbGxlZCBieSB0aGUgc3RvcmUgaW4gb3Jk
        ZXIgdG8gZmV0Y2ggYSBKU09OIGFycmF5IGZvcgogICAgdGhlIHVubG9hZGVk
        IHJlY29yZHMgaW4gYSBoYXMtbWFueSByZWxhdGlvbnNoaXAgdGhhdCB3ZXJl
        IG9yaWdpbmFsbHkKICAgIHNwZWNpZmllZCBhcyBhIFVSTCAoaW5zaWRlIG9m
        IGBsaW5rc2ApLgoKICAgIEZvciBleGFtcGxlLCBpZiB5b3VyIG9yaWdpbmFs
        IHBheWxvYWQgbG9va3MgbGlrZSB0aGlzOgoKICAgIGBgYGpzCiAgICB7CiAg
        ICAgICJwb3N0IjogewogICAgICAgICJpZCI6IDEsCiAgICAgICAgInRpdGxl
        IjogIlJhaWxzIGlzIG9tYWthc2UiLAogICAgICAgICJsaW5rcyI6IHsgImNv
        bW1lbnRzIjogIi9wb3N0cy8xL2NvbW1lbnRzIiB9CiAgICAgIH0KICAgIH0K
        ICAgIGBgYAoKICAgIFRoaXMgbWV0aG9kIHdpbGwgYmUgY2FsbGVkIHdpdGgg
        dGhlIHBhcmVudCByZWNvcmQgYW5kIGAvcG9zdHMvMS9jb21tZW50c2AuCgog
        ICAgVGhlIGBmaW5kSGFzTWFueWAgbWV0aG9kIHdpbGwgbWFrZSBhbiBBamF4
        IChIVFRQIEdFVCkgcmVxdWVzdCB0byB0aGUgb3JpZ2luYWxseSBzcGVjaWZp
        ZWQgVVJMLgogICAgSWYgdGhlIFVSTCBpcyBob3N0LXJlbGF0aXZlIChzdGFy
        dGluZyB3aXRoIGEgc2luZ2xlIHNsYXNoKSwgdGhlCiAgICByZXF1ZXN0IHdp
        bGwgdXNlIHRoZSBob3N0IHNwZWNpZmllZCBvbiB0aGUgYWRhcHRlciAoaWYg
        YW55KS4KCiAgICBAbWV0aG9kIGZpbmRIYXNNYW55CiAgICBAcGFyYW0ge0RT
        LlN0b3JlfSBzdG9yZQogICAgQHBhcmFtIHtEUy5Nb2RlbH0gcmVjb3JkCiAg
        ICBAcGFyYW0ge1N0cmluZ30gdXJsCiAgICBAcmV0dXJucyB7UHJvbWlzZX0g
        cHJvbWlzZQogICovCiAgZmluZEhhc01hbnk6IGZ1bmN0aW9uKHN0b3JlLCBy
        ZWNvcmQsIHVybCkgewogICAgdmFyIGhvc3QgPSBnZXQodGhpcywgJ2hvc3Qn
        KSwKICAgICAgICBpZCAgID0gZ2V0KHJlY29yZCwgJ2lkJyksCiAgICAgICAg
        dHlwZSA9IHJlY29yZC5jb25zdHJ1Y3Rvci50eXBlS2V5OwoKICAgIGlmICho
        b3N0ICYmIHVybC5jaGFyQXQoMCkgPT09ICcvJyAmJiB1cmwuY2hhckF0KDEp
        ICE9PSAnLycpIHsKICAgICAgdXJsID0gaG9zdCArIHVybDsKICAgIH0KCiAg
        ICByZXR1cm4gdGhpcy5hamF4KHRoaXMudXJsUHJlZml4KHVybCwgdGhpcy5i
        dWlsZFVSTCh0eXBlLCBpZCkpLCAnR0VUJyk7CiAgfSwKCiAgLyoqCiAgICBD
        YWxsZWQgYnkgdGhlIHN0b3JlIGluIG9yZGVyIHRvIGZldGNoIGEgSlNPTiBh
        cnJheSBmb3IKICAgIHRoZSB1bmxvYWRlZCByZWNvcmRzIGluIGEgYmVsb25n
        cy10byByZWxhdGlvbnNoaXAgdGhhdCB3ZXJlIG9yaWdpbmFsbHkKICAgIHNw
        ZWNpZmllZCBhcyBhIFVSTCAoaW5zaWRlIG9mIGBsaW5rc2ApLgoKICAgIEZv
        ciBleGFtcGxlLCBpZiB5b3VyIG9yaWdpbmFsIHBheWxvYWQgbG9va3MgbGlr
        ZSB0aGlzOgoKICAgIGBgYGpzCiAgICB7CiAgICAgICJwZXJzb24iOiB7CiAg
        ICAgICAgImlkIjogMSwKICAgICAgICAibmFtZSI6ICJUb20gRGFsZSIsCiAg
        ICAgICAgImxpbmtzIjogeyAiZ3JvdXAiOiAiL3Blb3BsZS8xL2dyb3VwIiB9
        CiAgICAgIH0KICAgIH0KICAgIGBgYAoKICAgIFRoaXMgbWV0aG9kIHdpbGwg
        YmUgY2FsbGVkIHdpdGggdGhlIHBhcmVudCByZWNvcmQgYW5kIGAvcGVvcGxl
        LzEvZ3JvdXBgLgoKICAgIFRoZSBgZmluZEJlbG9uZ3NUb2AgbWV0aG9kIHdp
        bGwgbWFrZSBhbiBBamF4IChIVFRQIEdFVCkgcmVxdWVzdCB0byB0aGUgb3Jp
        Z2luYWxseSBzcGVjaWZpZWQgVVJMLgoKICAgIEBtZXRob2QgZmluZEJlbG9u
        Z3NUbwogICAgQHBhcmFtIHtEUy5TdG9yZX0gc3RvcmUKICAgIEBwYXJhbSB7
        RFMuTW9kZWx9IHJlY29yZAogICAgQHBhcmFtIHtTdHJpbmd9IHVybAogICAg
        QHJldHVybnMge1Byb21pc2V9IHByb21pc2UKICAqLwogIGZpbmRCZWxvbmdz
        VG86IGZ1bmN0aW9uKHN0b3JlLCByZWNvcmQsIHVybCkgewogICAgdmFyIGlk
        ICAgPSBnZXQocmVjb3JkLCAnaWQnKSwKICAgICAgICB0eXBlID0gcmVjb3Jk
        LmNvbnN0cnVjdG9yLnR5cGVLZXk7CgogICAgcmV0dXJuIHRoaXMuYWpheCh0
        aGlzLnVybFByZWZpeCh1cmwsIHRoaXMuYnVpbGRVUkwodHlwZSwgaWQpKSwg
        J0dFVCcpOwogIH0sCgogIC8qKgogICAgQ2FsbGVkIGJ5IHRoZSBzdG9yZSB3
        aGVuIGEgbmV3bHkgY3JlYXRlZCByZWNvcmQgaXMKICAgIHNhdmVkIHZpYSB0
        aGUgYHNhdmVgIG1ldGhvZCBvbiBhIG1vZGVsIHJlY29yZCBpbnN0YW5jZS4K
        CiAgICBUaGUgYGNyZWF0ZVJlY29yZGAgbWV0aG9kIHNlcmlhbGl6ZXMgdGhl
        IHJlY29yZCBhbmQgbWFrZXMgYW4gQWpheCAoSFRUUCBQT1NUKSByZXF1ZXN0
        CiAgICB0byBhIFVSTCBjb21wdXRlZCBieSBgYnVpbGRVUkxgLgoKICAgIFNl
        ZSBgc2VyaWFsaXplYCBmb3IgaW5mb3JtYXRpb24gb24gaG93IHRvIGN1c3Rv
        bWl6ZSB0aGUgc2VyaWFsaXplZCBmb3JtCiAgICBvZiBhIHJlY29yZC4KCiAg
        ICBAbWV0aG9kIGNyZWF0ZVJlY29yZAogICAgQHBhcmFtIHtEUy5TdG9yZX0g
        c3RvcmUKICAgIEBwYXJhbSB7c3ViY2xhc3Mgb2YgRFMuTW9kZWx9IHR5cGUK
        ICAgIEBwYXJhbSB7RFMuTW9kZWx9IHJlY29yZAogICAgQHJldHVybnMge1By
        b21pc2V9IHByb21pc2UKICAqLwogIGNyZWF0ZVJlY29yZDogZnVuY3Rpb24o
        c3RvcmUsIHR5cGUsIHJlY29yZCkgewogICAgdmFyIGRhdGEgPSB7fTsKICAg
        IHZhciBzZXJpYWxpemVyID0gc3RvcmUuc2VyaWFsaXplckZvcih0eXBlLnR5
        cGVLZXkpOwoKICAgIHNlcmlhbGl6ZXIuc2VyaWFsaXplSW50b0hhc2goZGF0
        YSwgdHlwZSwgcmVjb3JkLCB7IGluY2x1ZGVJZDogdHJ1ZSB9KTsKCiAgICBy
        ZXR1cm4gdGhpcy5hamF4KHRoaXMuYnVpbGRVUkwodHlwZS50eXBlS2V5KSwg
        IlBPU1QiLCB7IGRhdGE6IGRhdGEgfSk7CiAgfSwKCiAgLyoqCiAgICBDYWxs
        ZWQgYnkgdGhlIHN0b3JlIHdoZW4gYW4gZXhpc3RpbmcgcmVjb3JkIGlzIHNh
        dmVkCiAgICB2aWEgdGhlIGBzYXZlYCBtZXRob2Qgb24gYSBtb2RlbCByZWNv
        cmQgaW5zdGFuY2UuCgogICAgVGhlIGB1cGRhdGVSZWNvcmRgIG1ldGhvZCBz
        ZXJpYWxpemVzIHRoZSByZWNvcmQgYW5kIG1ha2VzIGFuIEFqYXggKEhUVFAg
        UFVUKSByZXF1ZXN0CiAgICB0byBhIFVSTCBjb21wdXRlZCBieSBgYnVpbGRV
        UkxgLgoKICAgIFNlZSBgc2VyaWFsaXplYCBmb3IgaW5mb3JtYXRpb24gb24g
        aG93IHRvIGN1c3RvbWl6ZSB0aGUgc2VyaWFsaXplZCBmb3JtCiAgICBvZiBh
        IHJlY29yZC4KCiAgICBAbWV0aG9kIHVwZGF0ZVJlY29yZAogICAgQHBhcmFt
        IHtEUy5TdG9yZX0gc3RvcmUKICAgIEBwYXJhbSB7c3ViY2xhc3Mgb2YgRFMu
        TW9kZWx9IHR5cGUKICAgIEBwYXJhbSB7RFMuTW9kZWx9IHJlY29yZAogICAg
        QHJldHVybnMge1Byb21pc2V9IHByb21pc2UKICAqLwogIHVwZGF0ZVJlY29y
        ZDogZnVuY3Rpb24oc3RvcmUsIHR5cGUsIHJlY29yZCkgewogICAgdmFyIGRh
        dGEgPSB7fTsKICAgIHZhciBzZXJpYWxpemVyID0gc3RvcmUuc2VyaWFsaXpl
        ckZvcih0eXBlLnR5cGVLZXkpOwoKICAgIHNlcmlhbGl6ZXIuc2VyaWFsaXpl
        SW50b0hhc2goZGF0YSwgdHlwZSwgcmVjb3JkKTsKCiAgICB2YXIgaWQgPSBn
        ZXQocmVjb3JkLCAnaWQnKTsKCiAgICByZXR1cm4gdGhpcy5hamF4KHRoaXMu
        YnVpbGRVUkwodHlwZS50eXBlS2V5LCBpZCksICJQVVQiLCB7IGRhdGE6IGRh
        dGEgfSk7CiAgfSwKCiAgLyoqCiAgICBDYWxsZWQgYnkgdGhlIHN0b3JlIHdo
        ZW4gYSByZWNvcmQgaXMgZGVsZXRlZC4KCiAgICBUaGUgYGRlbGV0ZVJlY29y
        ZGAgbWV0aG9kICBtYWtlcyBhbiBBamF4IChIVFRQIERFTEVURSkgcmVxdWVz
        dCB0byBhIFVSTCBjb21wdXRlZCBieSBgYnVpbGRVUkxgLgoKICAgIEBtZXRo
        b2QgZGVsZXRlUmVjb3JkCiAgICBAcGFyYW0ge0RTLlN0b3JlfSBzdG9yZQog
        ICAgQHBhcmFtIHtzdWJjbGFzcyBvZiBEUy5Nb2RlbH0gdHlwZQogICAgQHBh
        cmFtIHtEUy5Nb2RlbH0gcmVjb3JkCiAgICBAcmV0dXJucyB7UHJvbWlzZX0g
        cHJvbWlzZQogICovCiAgZGVsZXRlUmVjb3JkOiBmdW5jdGlvbihzdG9yZSwg
        dHlwZSwgcmVjb3JkKSB7CiAgICB2YXIgaWQgPSBnZXQocmVjb3JkLCAnaWQn
        KTsKCiAgICByZXR1cm4gdGhpcy5hamF4KHRoaXMuYnVpbGRVUkwodHlwZS50
        eXBlS2V5LCBpZCksICJERUxFVEUiKTsKICB9LAoKICAvKioKICAgIEJ1aWxk
        cyBhIFVSTCBmb3IgYSBnaXZlbiB0eXBlIGFuZCBvcHRpb25hbCBJRC4KCiAg
        ICBCeSBkZWZhdWx0LCBpdCBwbHVyYWxpemVzIHRoZSB0eXBlJ3MgbmFtZSAo
        Zm9yIGV4YW1wbGUsICdwb3N0JwogICAgYmVjb21lcyAncG9zdHMnIGFuZCAn
        cGVyc29uJyBiZWNvbWVzICdwZW9wbGUnKS4gVG8gb3ZlcnJpZGUgdGhlCiAg
        ICBwbHVyYWxpemF0aW9uIHNlZSBbcGF0aEZvclR5cGVdKCNtZXRob2RfcGF0
        aEZvclR5cGUpLgoKICAgIElmIGFuIElEIGlzIHNwZWNpZmllZCwgaXQgYWRk
        cyB0aGUgSUQgdG8gdGhlIHBhdGggZ2VuZXJhdGVkCiAgICBmb3IgdGhlIHR5
        cGUsIHNlcGFyYXRlZCBieSBhIGAvYC4KCiAgICBAbWV0aG9kIGJ1aWxkVVJM
        CiAgICBAcGFyYW0ge1N0cmluZ30gdHlwZQogICAgQHBhcmFtIHtTdHJpbmd9
        IGlkCiAgICBAcmV0dXJucyB7U3RyaW5nfSB1cmwKICAqLwogIGJ1aWxkVVJM
        OiBmdW5jdGlvbih0eXBlLCBpZCkgewogICAgdmFyIHVybCA9IFtdLAogICAg
        ICAgIGhvc3QgPSBnZXQodGhpcywgJ2hvc3QnKSwKICAgICAgICBwcmVmaXgg
        PSB0aGlzLnVybFByZWZpeCgpOwoKICAgIGlmICh0eXBlKSB7IHVybC5wdXNo
        KHRoaXMucGF0aEZvclR5cGUodHlwZSkpOyB9CiAgICBpZiAoaWQpIHsgdXJs
        LnB1c2goaWQpOyB9CgogICAgaWYgKHByZWZpeCkgeyB1cmwudW5zaGlmdChw
        cmVmaXgpOyB9CgogICAgdXJsID0gdXJsLmpvaW4oJy8nKTsKICAgIGlmICgh
        aG9zdCAmJiB1cmwpIHsgdXJsID0gJy8nICsgdXJsOyB9CgogICAgcmV0dXJu
        IHVybDsKICB9LAoKICAvKioKICAgIEBtZXRob2QgdXJsUHJlZml4CiAgICBA
        cHJpdmF0ZQogICAgQHBhcmFtIHtTdHJpbmd9IHBhdGgKICAgIEBwYXJhbSB7
        U3RyaW5nfSBwYXJlbnRVcmwKICAgIEByZXR1cm4ge1N0cmluZ30gdXJsUHJl
        Zml4CiAgKi8KICB1cmxQcmVmaXg6IGZ1bmN0aW9uKHBhdGgsIHBhcmVudFVS
        TCkgewogICAgdmFyIGhvc3QgPSBnZXQodGhpcywgJ2hvc3QnKSwKICAgICAg
        ICBuYW1lc3BhY2UgPSBnZXQodGhpcywgJ25hbWVzcGFjZScpLAogICAgICAg
        IHVybCA9IFtdOwoKICAgIGlmIChwYXRoKSB7CiAgICAgIC8vIEFic29sdXRl
        IHBhdGgKICAgICAgaWYgKHBhdGguY2hhckF0KDApID09PSAnLycpIHsKICAg
        ICAgICBpZiAoaG9zdCkgewogICAgICAgICAgcGF0aCA9IHBhdGguc2xpY2Uo
        MSk7CiAgICAgICAgICB1cmwucHVzaChob3N0KTsKICAgICAgICB9CiAgICAg
        IC8vIFJlbGF0aXZlIHBhdGgKICAgICAgfSBlbHNlIGlmICghL15odHRwKHMp
        PzpcL1wvLy50ZXN0KHBhdGgpKSB7CiAgICAgICAgdXJsLnB1c2gocGFyZW50
        VVJMKTsKICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgaWYgKGhvc3QpIHsg
        dXJsLnB1c2goaG9zdCk7IH0KICAgICAgaWYgKG5hbWVzcGFjZSkgeyB1cmwu
        cHVzaChuYW1lc3BhY2UpOyB9CiAgICB9CgogICAgaWYgKHBhdGgpIHsKICAg
        ICAgdXJsLnB1c2gocGF0aCk7CiAgICB9CgogICAgcmV0dXJuIHVybC5qb2lu
        KCcvJyk7CiAgfSwKCiAgLyoqCiAgICBEZXRlcm1pbmVzIHRoZSBwYXRobmFt
        ZSBmb3IgYSBnaXZlbiB0eXBlLgoKICAgIEJ5IGRlZmF1bHQsIGl0IHBsdXJh
        bGl6ZXMgdGhlIHR5cGUncyBuYW1lIChmb3IgZXhhbXBsZSwKICAgICdwb3N0
        JyBiZWNvbWVzICdwb3N0cycgYW5kICdwZXJzb24nIGJlY29tZXMgJ3Blb3Bs
        ZScpLgoKICAgICMjIyBQYXRobmFtZSBjdXN0b21pemF0aW9uCgogICAgRm9y
        IGV4YW1wbGUgaWYgeW91IGhhdmUgYW4gb2JqZWN0IExpbmVJdGVtIHdpdGgg
        YW4KICAgIGVuZHBvaW50IG9mICIvbGluZV9pdGVtcy8iLgoKICAgIGBgYGpz
        CiAgICBEUy5SRVNUQWRhcHRlci5yZW9wZW4oewogICAgICBwYXRoRm9yVHlw
        ZTogZnVuY3Rpb24odHlwZSkgewogICAgICAgIHZhciBkZWNhbWVsaXplZCA9
        IEVtYmVyLlN0cmluZy5kZWNhbWVsaXplKHR5cGUpOwogICAgICAgIHJldHVy
        biBFbWJlci5TdHJpbmcucGx1cmFsaXplKGRlY2FtZWxpemVkKTsKICAgICAg
        fTsKICAgIH0pOwogICAgYGBgCgogICAgQG1ldGhvZCBwYXRoRm9yVHlwZQog
        ICAgQHBhcmFtIHtTdHJpbmd9IHR5cGUKICAgIEByZXR1cm5zIHtTdHJpbmd9
        IHBhdGgKICAqKi8KICBwYXRoRm9yVHlwZTogZnVuY3Rpb24odHlwZSkgewog
        ICAgdmFyIGNhbWVsaXplZCA9IEVtYmVyLlN0cmluZy5jYW1lbGl6ZSh0eXBl
        KTsKICAgIHJldHVybiBFbWJlci5TdHJpbmcucGx1cmFsaXplKGNhbWVsaXpl
        ZCk7CiAgfSwKCiAgLyoqCiAgICBUYWtlcyBhbiBhamF4IHJlc3BvbnNlLCBh
        bmQgcmV0dXJucyBhIHJlbGV2YW50IGVycm9yLgoKICAgIFJldHVybmluZyBh
        IGBEUy5JbnZhbGlkRXJyb3JgIGZyb20gdGhpcyBtZXRob2Qgd2lsbCBjYXVz
        ZSB0aGUKICAgIHJlY29yZCB0byB0cmFuc2l0aW9uIGludG8gdGhlIGBpbnZh
        bGlkYCBzdGF0ZSBhbmQgbWFrZSB0aGUKICAgIGBlcnJvcnNgIG9iamVjdCBh
        dmFpbGFibGUgb24gdGhlIHJlY29yZC4KCiAgICBgYGBqYXZhc2NyaXB0CiAg
        ICBBcHAuQXBwbGljYXRpb25BZGFwdGVyID0gRFMuUkVTVEFkYXB0ZXIuZXh0
        ZW5kKHsKICAgICAgYWpheEVycm9yOiBmdW5jdGlvbihqcVhIUikgewogICAg
        ICAgIHZhciBlcnJvciA9IHRoaXMuX3N1cGVyKGpxWEhSKTsKCiAgICAgICAg
        aWYgKGpxWEhSICYmIGpxWEhSLnN0YXR1cyA9PT0gNDIyKSB7CiAgICAgICAg
        ICB2YXIganNvbkVycm9ycyA9IEVtYmVyLiQucGFyc2VKU09OKGpxWEhSLnJl
        c3BvbnNlVGV4dClbImVycm9ycyJdOwoKICAgICAgICAgIHJldHVybiBuZXcg
        RFMuSW52YWxpZEVycm9yKGpzb25FcnJvcnMpOwogICAgICAgIH0gZWxzZSB7
        CiAgICAgICAgICByZXR1cm4gZXJyb3I7CiAgICAgICAgfQogICAgICB9CiAg
        ICB9KTsKICAgIGBgYAoKICAgIE5vdGU6IEFzIGEgY29ycmVjdG5lc3Mgb3B0
        aW1pemF0aW9uLCB0aGUgZGVmYXVsdCBpbXBsZW1lbnRhdGlvbiBvZgogICAg
        dGhlIGBhamF4RXJyb3JgIG1ldGhvZCBzdHJpcHMgb3V0IHRoZSBgdGhlbmAg
        bWV0aG9kIGZyb20ganF1ZXJ5J3MKICAgIGFqYXggcmVzcG9uc2UgKGpxWEhS
        KS4gVGhpcyBpcyBpbXBvcnRhbnQgYmVjYXVzZSB0aGUganFYSFIncwogICAg
        YHRoZW5gIG1ldGhvZCBmdWxmaWxscyB0aGUgcHJvbWlzZSB3aXRoIGl0c2Vs
        ZiByZXN1bHRpbmcgaW4gYQogICAgY2lyY3VsYXIgInRoZW5hYmxlIiBjaGFp
        biB3aGljaCBtYXkgY2F1c2UgcHJvYmxlbXMgZm9yIHNvbWUKICAgIHByb21p
        c2UgbGlicmFyaWVzLgoKICAgIEBtZXRob2QgYWpheEVycm9yCiAgICBAcGFy
        YW0gIHtPYmplY3R9IGpxWEhSCiAgICBAcmV0dXJuIHtPYmplY3R9IGpxWEhS
        CiAgKi8KICBhamF4RXJyb3I6IGZ1bmN0aW9uKGpxWEhSKSB7CiAgICBpZiAo
        anFYSFIpIHsKICAgICAganFYSFIudGhlbiA9IG51bGw7CiAgICB9CgogICAg
        cmV0dXJuIGpxWEhSOwogIH0sCgogIC8qKgogICAgVGFrZXMgYSBVUkwsIGFu
        IEhUVFAgbWV0aG9kIGFuZCBhIGhhc2ggb2YgZGF0YSwgYW5kIG1ha2VzIGFu
        CiAgICBIVFRQIHJlcXVlc3QuCgogICAgV2hlbiB0aGUgc2VydmVyIHJlc3Bv
        bmRzIHdpdGggYSBwYXlsb2FkLCBFbWJlciBEYXRhIHdpbGwgY2FsbCBpbnRv
        IGBleHRyYWN0U2luZ2xlYAogICAgb3IgYGV4dHJhY3RBcnJheWAgKGRlcGVu
        ZGluZyBvbiB3aGV0aGVyIHRoZSBvcmlnaW5hbCBxdWVyeSB3YXMgZm9yIG9u
        ZSByZWNvcmQgb3IKICAgIG1hbnkgcmVjb3JkcykuCgogICAgQnkgZGVmYXVs
        dCwgYGFqYXhgIG1ldGhvZCBoYXMgdGhlIGZvbGxvd2luZyBiZWhhdmlvcjoK
        CiAgICAqIEl0IHNldHMgdGhlIHJlc3BvbnNlIGBkYXRhVHlwZWAgdG8gYCJq
        c29uImAKICAgICogSWYgdGhlIEhUVFAgbWV0aG9kIGlzIG5vdCBgIkdFVCJg
        LCBpdCBzZXRzIHRoZSBgQ29udGVudC1UeXBlYCB0byBiZQogICAgICBgYXBw
        bGljYXRpb24vanNvbjsgY2hhcnNldD11dGYtOGAKICAgICogSWYgdGhlIEhU
        VFAgbWV0aG9kIGlzIG5vdCBgIkdFVCJgLCBpdCBzdHJpbmdpZmllcyB0aGUg
        ZGF0YSBwYXNzZWQgaW4uIFRoZQogICAgICBkYXRhIGlzIHRoZSBzZXJpYWxp
        emVkIHJlY29yZCBpbiB0aGUgY2FzZSBvZiBhIHNhdmUuCiAgICAqIFJlZ2lz
        dGVycyBzdWNjZXNzIGFuZCBmYWlsdXJlIGhhbmRsZXJzLgoKICAgIEBtZXRo
        b2QgYWpheAogICAgQHByaXZhdGUKICAgIEBwYXJhbSB7U3RyaW5nfSB1cmwK
        ICAgIEBwYXJhbSB7U3RyaW5nfSB0eXBlIFRoZSByZXF1ZXN0IHR5cGUgR0VU
        LCBQT1NULCBQVVQsIERFTEVURSBldGMuCiAgICBAcGFyYW0ge09iamVjdH0g
        aGFzaAogICAgQHJldHVybiB7UHJvbWlzZX0gcHJvbWlzZQogICovCiAgYWph
        eDogZnVuY3Rpb24odXJsLCB0eXBlLCBoYXNoKSB7CiAgICB2YXIgYWRhcHRl
        ciA9IHRoaXM7CgogICAgcmV0dXJuIG5ldyBFbWJlci5SU1ZQLlByb21pc2Uo
        ZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgIGhhc2ggPSBhZGFw
        dGVyLmFqYXhPcHRpb25zKHVybCwgdHlwZSwgaGFzaCk7CgogICAgICBoYXNo
        LnN1Y2Nlc3MgPSBmdW5jdGlvbihqc29uKSB7CiAgICAgICAgRW1iZXIucnVu
        KG51bGwsIHJlc29sdmUsIGpzb24pOwogICAgICB9OwoKICAgICAgaGFzaC5l
        cnJvciA9IGZ1bmN0aW9uKGpxWEhSLCB0ZXh0U3RhdHVzLCBlcnJvclRocm93
        bikgewogICAgICAgIEVtYmVyLnJ1bihudWxsLCByZWplY3QsIGFkYXB0ZXIu
        YWpheEVycm9yKGpxWEhSKSk7CiAgICAgIH07CgogICAgICBFbWJlci4kLmFq
        YXgoaGFzaCk7CiAgICB9LCAiRFM6IFJlc3RBZGFwdGVyI2FqYXggIiArIHR5
        cGUgKyAiIHRvICIgKyB1cmwpOwogIH0sCgogIC8qKgogICAgQG1ldGhvZCBh
        amF4T3B0aW9ucwogICAgQHByaXZhdGUKICAgIEBwYXJhbSB7U3RyaW5nfSB1
        cmwKICAgIEBwYXJhbSB7U3RyaW5nfSB0eXBlIFRoZSByZXF1ZXN0IHR5cGUg
        R0VULCBQT1NULCBQVVQsIERFTEVURSBldGMuCiAgICBAcGFyYW0ge09iamVj
        dH0gaGFzaAogICAgQHJldHVybiB7T2JqZWN0fSBoYXNoCiAgKi8KICBhamF4
        T3B0aW9uczogZnVuY3Rpb24odXJsLCB0eXBlLCBoYXNoKSB7CiAgICBoYXNo
        ID0gaGFzaCB8fCB7fTsKICAgIGhhc2gudXJsID0gdXJsOwogICAgaGFzaC50
        eXBlID0gdHlwZTsKICAgIGhhc2guZGF0YVR5cGUgPSAnanNvbic7CiAgICBo
        YXNoLmNvbnRleHQgPSB0aGlzOwoKICAgIGlmIChoYXNoLmRhdGEgJiYgdHlw
        ZSAhPT0gJ0dFVCcpIHsKICAgICAgaGFzaC5jb250ZW50VHlwZSA9ICdhcHBs
        aWNhdGlvbi9qc29uOyBjaGFyc2V0PXV0Zi04JzsKICAgICAgaGFzaC5kYXRh
        ID0gSlNPTi5zdHJpbmdpZnkoaGFzaC5kYXRhKTsKICAgIH0KCiAgICBpZiAo
        dGhpcy5oZWFkZXJzICE9PSB1bmRlZmluZWQpIHsKICAgICAgdmFyIGhlYWRl
        cnMgPSB0aGlzLmhlYWRlcnM7CiAgICAgIGhhc2guYmVmb3JlU2VuZCA9IGZ1
        bmN0aW9uICh4aHIpIHsKICAgICAgICBmb3JFYWNoLmNhbGwoRW1iZXIua2V5
        cyhoZWFkZXJzKSwgZnVuY3Rpb24oa2V5KSB7CiAgICAgICAgICB4aHIuc2V0
        UmVxdWVzdEhlYWRlcihrZXksIGhlYWRlcnNba2V5XSk7CiAgICAgICAgfSk7
        CiAgICAgIH07CiAgICB9CgoKICAgIHJldHVybiBoYXNoOwogIH0KCn0pOwoK
        fSkoKTsKCgoKKGZ1bmN0aW9uKCkgewovKioKICBAbW9kdWxlIGVtYmVyLWRh
        dGEKKi8KCn0pKCk7CgoKCihmdW5jdGlvbigpIHsKRFMuTW9kZWwucmVvcGVu
        KHsKCiAgLyoqCiAgICBQcm92aWRlcyBpbmZvIGFib3V0IHRoZSBtb2RlbCBm
        b3IgZGVidWdnaW5nIHB1cnBvc2VzCiAgICBieSBncm91cGluZyB0aGUgcHJv
        cGVydGllcyBpbnRvIG1vcmUgc2VtYW50aWMgZ3JvdXBzLgoKICAgIE1lYW50
        IHRvIGJlIHVzZWQgYnkgZGVidWdnaW5nIHRvb2xzIHN1Y2ggYXMgdGhlIENo
        cm9tZSBFbWJlciBFeHRlbnNpb24uCgogICAgLSBHcm91cHMgYWxsIGF0dHJp
        YnV0ZXMgaW4gIkF0dHJpYnV0ZXMiIGdyb3VwLgogICAgLSBHcm91cHMgYWxs
        IGJlbG9uZ3NUbyByZWxhdGlvbnNoaXBzIGluICJCZWxvbmdzIFRvIiBncm91
        cC4KICAgIC0gR3JvdXBzIGFsbCBoYXNNYW55IHJlbGF0aW9uc2hpcHMgaW4g
        IkhhcyBNYW55IiBncm91cC4KICAgIC0gR3JvdXBzIGFsbCBmbGFncyBpbiAi
        RmxhZ3MiIGdyb3VwLgogICAgLSBGbGFncyByZWxhdGlvbnNoaXAgQ1BzIGFz
        IGV4cGVuc2l2ZSBwcm9wZXJ0aWVzLgoKICAgIEBtZXRob2QgX2RlYnVnSW5m
        bwogICAgQGZvciBEUy5Nb2RlbAogICAgQHByaXZhdGUKICAqLwogIF9kZWJ1
        Z0luZm86IGZ1bmN0aW9uKCkgewogICAgdmFyIGF0dHJpYnV0ZXMgPSBbJ2lk
        J10sCiAgICAgICAgcmVsYXRpb25zaGlwcyA9IHsgYmVsb25nc1RvOiBbXSwg
        aGFzTWFueTogW10gfSwKICAgICAgICBleHBlbnNpdmVQcm9wZXJ0aWVzID0g
        W107CgogICAgdGhpcy5lYWNoQXR0cmlidXRlKGZ1bmN0aW9uKG5hbWUsIG1l
        dGEpIHsKICAgICAgYXR0cmlidXRlcy5wdXNoKG5hbWUpOwogICAgfSwgdGhp
        cyk7CgogICAgdGhpcy5lYWNoUmVsYXRpb25zaGlwKGZ1bmN0aW9uKG5hbWUs
        IHJlbGF0aW9uc2hpcCkgewogICAgICByZWxhdGlvbnNoaXBzW3JlbGF0aW9u
        c2hpcC5raW5kXS5wdXNoKG5hbWUpOwogICAgICBleHBlbnNpdmVQcm9wZXJ0
        aWVzLnB1c2gobmFtZSk7CiAgICB9KTsKCiAgICB2YXIgZ3JvdXBzID0gWwog
        ICAgICB7CiAgICAgICAgbmFtZTogJ0F0dHJpYnV0ZXMnLAogICAgICAgIHBy
        b3BlcnRpZXM6IGF0dHJpYnV0ZXMsCiAgICAgICAgZXhwYW5kOiB0cnVlCiAg
        ICAgIH0sCiAgICAgIHsKICAgICAgICBuYW1lOiAnQmVsb25ncyBUbycsCiAg
        ICAgICAgcHJvcGVydGllczogcmVsYXRpb25zaGlwcy5iZWxvbmdzVG8sCiAg
        ICAgICAgZXhwYW5kOiB0cnVlCiAgICAgIH0sCiAgICAgIHsKICAgICAgICBu
        YW1lOiAnSGFzIE1hbnknLAogICAgICAgIHByb3BlcnRpZXM6IHJlbGF0aW9u
        c2hpcHMuaGFzTWFueSwKICAgICAgICBleHBhbmQ6IHRydWUKICAgICAgfSwK
        ICAgICAgewogICAgICAgIG5hbWU6ICdGbGFncycsCiAgICAgICAgcHJvcGVy
        dGllczogWydpc0xvYWRlZCcsICdpc0RpcnR5JywgJ2lzU2F2aW5nJywgJ2lz
        RGVsZXRlZCcsICdpc0Vycm9yJywgJ2lzTmV3JywgJ2lzVmFsaWQnXQogICAg
        ICB9CiAgICBdOwoKICAgIHJldHVybiB7CiAgICAgIHByb3BlcnR5SW5mbzog
        ewogICAgICAgIC8vIGluY2x1ZGUgYWxsIG90aGVyIG1peGlucyAvIHByb3Bl
        cnRpZXMgKG5vdCBqdXN0IHRoZSBncm91cGVkIG9uZXMpCiAgICAgICAgaW5j
        bHVkZU90aGVyUHJvcGVydGllczogdHJ1ZSwKICAgICAgICBncm91cHM6IGdy
        b3VwcywKICAgICAgICAvLyBkb24ndCBwcmUtY2FsY3VsYXRlIHVubGVzcyBj
        YWNoZWQKICAgICAgICBleHBlbnNpdmVQcm9wZXJ0aWVzOiBleHBlbnNpdmVQ
        cm9wZXJ0aWVzCiAgICAgIH0KICAgIH07CiAgfQoKfSk7Cgp9KSgpOwoKCgoo
        ZnVuY3Rpb24oKSB7Ci8qKgogIEBtb2R1bGUgZW1iZXItZGF0YQoqLwoKfSko
        KTsKCgoKKGZ1bmN0aW9uKCkgewovKioKICBFbWJlciBEYXRhCgogIEBtb2R1
        bGUgZW1iZXItZGF0YQogIEBtYWluIGVtYmVyLWRhdGEKKi8KCn0pKCk7Cgoo
        ZnVuY3Rpb24oKSB7CkVtYmVyLlN0cmluZy5wbHVyYWxpemUgPSBmdW5jdGlv
        bih3b3JkKSB7CiAgcmV0dXJuIEVtYmVyLkluZmxlY3Rvci5pbmZsZWN0b3Iu
        cGx1cmFsaXplKHdvcmQpOwp9OwoKRW1iZXIuU3RyaW5nLnNpbmd1bGFyaXpl
        ID0gZnVuY3Rpb24od29yZCkgewogIHJldHVybiBFbWJlci5JbmZsZWN0b3Iu
        aW5mbGVjdG9yLnNpbmd1bGFyaXplKHdvcmQpOwp9OwoKfSkoKTsKCgoKKGZ1
        bmN0aW9uKCkgewp2YXIgQkxBTktfUkVHRVggPSAvXlxzKiQvOwoKZnVuY3Rp
        b24gbG9hZFVuY291bnRhYmxlKHJ1bGVzLCB1bmNvdW50YWJsZSkgewogIGZv
        ciAodmFyIGkgPSAwLCBsZW5ndGggPSB1bmNvdW50YWJsZS5sZW5ndGg7IGkg
        PCBsZW5ndGg7IGkrKykgewogICAgcnVsZXMudW5jb3VudGFibGVbdW5jb3Vu
        dGFibGVbaV0udG9Mb3dlckNhc2UoKV0gPSB0cnVlOwogIH0KfQoKZnVuY3Rp
        b24gbG9hZElycmVndWxhcihydWxlcywgaXJyZWd1bGFyUGFpcnMpIHsKICB2
        YXIgcGFpcjsKCiAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aCA9IGlycmVndWxh
        clBhaXJzLmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7CiAgICBwYWlyID0g
        aXJyZWd1bGFyUGFpcnNbaV07CgogICAgcnVsZXMuaXJyZWd1bGFyW3BhaXJb
        MF0udG9Mb3dlckNhc2UoKV0gPSBwYWlyWzFdOwogICAgcnVsZXMuaXJyZWd1
        bGFySW52ZXJzZVtwYWlyWzFdLnRvTG93ZXJDYXNlKCldID0gcGFpclswXTsK
        ICB9Cn0KCi8qKgogIEluZmxlY3Rvci5FbWJlciBwcm92aWRlcyBhIG1lY2hh
        bmlzbSBmb3Igc3VwcGx5aW5nIGluZmxlY3Rpb24gcnVsZXMgZm9yIHlvdXIK
        ICBhcHBsaWNhdGlvbi4gRW1iZXIgaW5jbHVkZXMgYSBkZWZhdWx0IHNldCBv
        ZiBpbmZsZWN0aW9uIHJ1bGVzLCBhbmQgcHJvdmlkZXMgYW4KICBBUEkgZm9y
        IHByb3ZpZGluZyBhZGRpdGlvbmFsIHJ1bGVzLgoKICBFeGFtcGxlczoKCiAg
        Q3JlYXRpbmcgYW4gaW5mbGVjdG9yIHdpdGggbm8gcnVsZXMuCgogIGBgYGpz
        CiAgdmFyIGluZmxlY3RvciA9IG5ldyBFbWJlci5JbmZsZWN0b3IoKTsKICBg
        YGAKCiAgQ3JlYXRpbmcgYW4gaW5mbGVjdG9yIHdpdGggdGhlIGRlZmF1bHQg
        ZW1iZXIgcnVsZXNldC4KCiAgYGBganMKICB2YXIgaW5mbGVjdG9yID0gbmV3
        IEVtYmVyLkluZmxlY3RvcihFbWJlci5JbmZsZWN0b3IuZGVmYXVsdFJ1bGVz
        KTsKCiAgaW5mbGVjdG9yLnBsdXJhbGl6ZSgnY293JykgLy89PiAna2luZScK
        ICBpbmZsZWN0b3Iuc2luZ3VsYXJpemUoJ2tpbmUnKSAvLz0+ICdjb3cnCiAg
        YGBgCgogIENyZWF0aW5nIGFuIGluZmxlY3RvciBhbmQgYWRkaW5nIHJ1bGVz
        IGxhdGVyLgoKICBgYGBqYXZhc2NyaXB0CiAgdmFyIGluZmxlY3RvciA9IEVt
        YmVyLkluZmxlY3Rvci5pbmZsZWN0b3I7CgogIGluZmxlY3Rvci5wbHVyYWxp
        emUoJ2FkdmljZScpIC8vID0+ICdhZHZpY2VzJwogIGluZmxlY3Rvci51bmNv
        dW50YWJsZSgnYWR2aWNlJyk7CiAgaW5mbGVjdG9yLnBsdXJhbGl6ZSgnYWR2
        aWNlJykgLy8gPT4gJ2FkdmljZScKCiAgaW5mbGVjdG9yLnBsdXJhbGl6ZSgn
        Zm9ybXVsYScpIC8vID0+ICdmb3JtdWxhcycKICBpbmZsZWN0b3IuaXJyZWd1
        bGFyKCdmb3JtdWxhJywgJ2Zvcm11bGFlJyk7CiAgaW5mbGVjdG9yLnBsdXJh
        bGl6ZSgnZm9ybXVsYScpIC8vID0+ICdmb3JtdWxhZScKCiAgLy8geW91IHdv
        dWxkIG5vdCBuZWVkIHRvIGFkZCB0aGVzZSBhcyB0aGV5IGFyZSB0aGUgZGVm
        YXVsdCBydWxlcwogIGluZmxlY3Rvci5wbHVyYWwoLyQvLCAncycpOwogIGlu
        ZmxlY3Rvci5zaW5ndWxhcigvcyQvaSwgJycpOwogIGBgYAoKICBDcmVhdGlu
        ZyBhbiBpbmZsZWN0b3Igd2l0aCBhIG5vbmRlZmF1bHQgcnVsZXNldC4KCiAg
        YGBgamF2YXNjcmlwdAogIHZhciBydWxlcyA9IHsKICAgIHBsdXJhbHM6ICBb
        IC8kLywgJ3MnIF0sCiAgICBzaW5ndWxhcjogWyAvXHMkLywgJycgXSwKICAg
        IGlycmVndWxhclBhaXJzOiBbCiAgICAgIFsgJ2NvdycsICdraW5lJyBdCiAg
        ICBdLAogICAgdW5jb3VudGFibGU6IFsgJ2Zpc2gnIF0KICB9OwoKICB2YXIg
        aW5mbGVjdG9yID0gbmV3IEVtYmVyLkluZmxlY3RvcihydWxlcyk7CiAgYGBg
        CgogIEBjbGFzcyBJbmZsZWN0b3IKICBAbmFtZXNwYWNlIEVtYmVyCiovCmZ1
        bmN0aW9uIEluZmxlY3RvcihydWxlU2V0KSB7CiAgcnVsZVNldCA9IHJ1bGVT
        ZXQgfHwge307CiAgcnVsZVNldC51bmNvdW50YWJsZSA9IHJ1bGVTZXQudW5j
        b3VudGFibGUgfHwge307CiAgcnVsZVNldC5pcnJlZ3VsYXJQYWlycyA9IHJ1
        bGVTZXQuaXJyZWd1bGFyUGFpcnMgfHwge307CgogIHZhciBydWxlcyA9IHRo
        aXMucnVsZXMgPSB7CiAgICBwbHVyYWxzOiAgcnVsZVNldC5wbHVyYWxzIHx8
        IFtdLAogICAgc2luZ3VsYXI6IHJ1bGVTZXQuc2luZ3VsYXIgfHwgW10sCiAg
        ICBpcnJlZ3VsYXI6IHt9LAogICAgaXJyZWd1bGFySW52ZXJzZToge30sCiAg
        ICB1bmNvdW50YWJsZToge30KICB9OwoKICBsb2FkVW5jb3VudGFibGUocnVs
        ZXMsIHJ1bGVTZXQudW5jb3VudGFibGUpOwogIGxvYWRJcnJlZ3VsYXIocnVs
        ZXMsIHJ1bGVTZXQuaXJyZWd1bGFyUGFpcnMpOwp9CgpJbmZsZWN0b3IucHJv
        dG90eXBlID0gewogIC8qKgogICAgQG1ldGhvZCBwbHVyYWwKICAgIEBwYXJh
        bSB7UmVnRXhwfSByZWdleAogICAgQHBhcmFtIHtTdHJpbmd9IHN0cmluZwog
        ICovCiAgcGx1cmFsOiBmdW5jdGlvbihyZWdleCwgc3RyaW5nKSB7CiAgICB0
        aGlzLnJ1bGVzLnBsdXJhbHMucHVzaChbcmVnZXgsIHN0cmluZy50b0xvd2Vy
        Q2FzZSgpXSk7CiAgfSwKCiAgLyoqCiAgICBAbWV0aG9kIHNpbmd1bGFyCiAg
        ICBAcGFyYW0ge1JlZ0V4cH0gcmVnZXgKICAgIEBwYXJhbSB7U3RyaW5nfSBz
        dHJpbmcKICAqLwogIHNpbmd1bGFyOiBmdW5jdGlvbihyZWdleCwgc3RyaW5n
        KSB7CiAgICB0aGlzLnJ1bGVzLnNpbmd1bGFyLnB1c2goW3JlZ2V4LCBzdHJp
        bmcudG9Mb3dlckNhc2UoKV0pOwogIH0sCgogIC8qKgogICAgQG1ldGhvZCB1
        bmNvdW50YWJsZQogICAgQHBhcmFtIHtTdHJpbmd9IHJlZ2V4CiAgKi8KICB1
        bmNvdW50YWJsZTogZnVuY3Rpb24oc3RyaW5nKSB7CiAgICBsb2FkVW5jb3Vu
        dGFibGUodGhpcy5ydWxlcywgW3N0cmluZy50b0xvd2VyQ2FzZSgpXSk7CiAg
        fSwKCiAgLyoqCiAgICBAbWV0aG9kIGlycmVndWxhcgogICAgQHBhcmFtIHtT
        dHJpbmd9IHNpbmd1bGFyCiAgICBAcGFyYW0ge1N0cmluZ30gcGx1cmFsCiAg
        Ki8KICBpcnJlZ3VsYXI6IGZ1bmN0aW9uIChzaW5ndWxhciwgcGx1cmFsKSB7
        CiAgICBsb2FkSXJyZWd1bGFyKHRoaXMucnVsZXMsIFtbc2luZ3VsYXIsIHBs
        dXJhbF1dKTsKICB9LAoKICAvKioKICAgIEBtZXRob2QgcGx1cmFsaXplCiAg
        ICBAcGFyYW0ge1N0cmluZ30gd29yZAogICovCiAgcGx1cmFsaXplOiBmdW5j
        dGlvbih3b3JkKSB7CiAgICByZXR1cm4gdGhpcy5pbmZsZWN0KHdvcmQsIHRo
        aXMucnVsZXMucGx1cmFscywgdGhpcy5ydWxlcy5pcnJlZ3VsYXIpOwogIH0s
        CgogIC8qKgogICAgQG1ldGhvZCBzaW5ndWxhcml6ZQogICAgQHBhcmFtIHtT
        dHJpbmd9IHdvcmQKICAqLwogIHNpbmd1bGFyaXplOiBmdW5jdGlvbih3b3Jk
        KSB7CiAgICByZXR1cm4gdGhpcy5pbmZsZWN0KHdvcmQsIHRoaXMucnVsZXMu
        c2luZ3VsYXIsICB0aGlzLnJ1bGVzLmlycmVndWxhckludmVyc2UpOwogIH0s
        CgogIC8qKgogICAgQHByb3RlY3RlZAoKICAgIEBtZXRob2QgaW5mbGVjdAog
        ICAgQHBhcmFtIHtTdHJpbmd9IHdvcmQKICAgIEBwYXJhbSB7T2JqZWN0fSB0
        eXBlUnVsZXMKICAgIEBwYXJhbSB7T2JqZWN0fSBpcnJlZ3VsYXIKICAqLwog
        IGluZmxlY3Q6IGZ1bmN0aW9uKHdvcmQsIHR5cGVSdWxlcywgaXJyZWd1bGFy
        KSB7CiAgICB2YXIgaW5mbGVjdGlvbiwgc3Vic3RpdHV0aW9uLCByZXN1bHQs
        IGxvd2VyY2FzZSwgaXNCbGFuaywKICAgIGlzVW5jb3VudGFibGUsIGlzSXJy
        ZWd1bGFyLCBpc0lycmVndWxhckludmVyc2UsIHJ1bGU7CgogICAgaXNCbGFu
        ayA9IEJMQU5LX1JFR0VYLnRlc3Qod29yZCk7CgogICAgaWYgKGlzQmxhbmsp
        IHsKICAgICAgcmV0dXJuIHdvcmQ7CiAgICB9CgogICAgbG93ZXJjYXNlID0g
        d29yZC50b0xvd2VyQ2FzZSgpOwoKICAgIGlzVW5jb3VudGFibGUgPSB0aGlz
        LnJ1bGVzLnVuY291bnRhYmxlW2xvd2VyY2FzZV07CgogICAgaWYgKGlzVW5j
        b3VudGFibGUpIHsKICAgICAgcmV0dXJuIHdvcmQ7CiAgICB9CgogICAgaXNJ
        cnJlZ3VsYXIgPSBpcnJlZ3VsYXIgJiYgaXJyZWd1bGFyW2xvd2VyY2FzZV07
        CgogICAgaWYgKGlzSXJyZWd1bGFyKSB7CiAgICAgIHJldHVybiBpc0lycmVn
        dWxhcjsKICAgIH0KCiAgICBmb3IgKHZhciBpID0gdHlwZVJ1bGVzLmxlbmd0
        aCwgbWluID0gMDsgaSA+IG1pbjsgaS0tKSB7CiAgICAgICBpbmZsZWN0aW9u
        ID0gdHlwZVJ1bGVzW2ktMV07CiAgICAgICBydWxlID0gaW5mbGVjdGlvblsw
        XTsKCiAgICAgIGlmIChydWxlLnRlc3Qod29yZCkpIHsKICAgICAgICBicmVh
        azsKICAgICAgfQogICAgfQoKICAgIGluZmxlY3Rpb24gPSBpbmZsZWN0aW9u
        IHx8IFtdOwoKICAgIHJ1bGUgPSBpbmZsZWN0aW9uWzBdOwogICAgc3Vic3Rp
        dHV0aW9uID0gaW5mbGVjdGlvblsxXTsKCiAgICByZXN1bHQgPSB3b3JkLnJl
        cGxhY2UocnVsZSwgc3Vic3RpdHV0aW9uKTsKCiAgICByZXR1cm4gcmVzdWx0
        OwogIH0KfTsKCkVtYmVyLkluZmxlY3RvciA9IEluZmxlY3RvcjsKCn0pKCk7
        CgoKCihmdW5jdGlvbigpIHsKRW1iZXIuSW5mbGVjdG9yLmRlZmF1bHRSdWxl
        cyA9IHsKICBwbHVyYWxzOiBbCiAgICBbLyQvLCAncyddLAogICAgWy9zJC9p
        LCAncyddLAogICAgWy9eKGF4fHRlc3QpaXMkL2ksICckMWVzJ10sCiAgICBb
        LyhvY3RvcHx2aXIpdXMkL2ksICckMWknXSwKICAgIFsvKG9jdG9wfHZpcilp
        JC9pLCAnJDFpJ10sCiAgICBbLyhhbGlhc3xzdGF0dXMpJC9pLCAnJDFlcydd
        LAogICAgWy8oYnUpcyQvaSwgJyQxc2VzJ10sCiAgICBbLyhidWZmYWx8dG9t
        YXQpbyQvaSwgJyQxb2VzJ10sCiAgICBbLyhbdGldKXVtJC9pLCAnJDFhJ10s
        CiAgICBbLyhbdGldKWEkL2ksICckMWEnXSwKICAgIFsvc2lzJC9pLCAnc2Vz
        J10sCiAgICBbLyg/OihbXmZdKWZlfChbbHJdKWYpJC9pLCAnJDEkMnZlcydd
        LAogICAgWy8oaGl2ZSkkL2ksICckMXMnXSwKICAgIFsvKFteYWVpb3V5XXxx
        dSl5JC9pLCAnJDFpZXMnXSwKICAgIFsvKHh8Y2h8c3N8c2gpJC9pLCAnJDFl
        cyddLAogICAgWy8obWF0cnx2ZXJ0fGluZCkoPzppeHxleCkkL2ksICckMWlj
        ZXMnXSwKICAgIFsvXihtfGwpb3VzZSQvaSwgJyQxaWNlJ10sCiAgICBbL14o
        bXxsKWljZSQvaSwgJyQxaWNlJ10sCiAgICBbL14ob3gpJC9pLCAnJDFlbidd
        LAogICAgWy9eKG94ZW4pJC9pLCAnJDEnXSwKICAgIFsvKHF1aXopJC9pLCAn
        JDF6ZXMnXQogIF0sCgogIHNpbmd1bGFyOiBbCiAgICBbL3MkL2ksICcnXSwK
        ICAgIFsvKHNzKSQvaSwgJyQxJ10sCiAgICBbLyhuKWV3cyQvaSwgJyQxZXdz
        J10sCiAgICBbLyhbdGldKWEkL2ksICckMXVtJ10sCiAgICBbLygoYSluYWx5
        fChiKWF8KGQpaWFnbm98KHApYXJlbnRoZXwocClyb2dub3wocyl5bm9wfCh0
        KWhlKShzaXN8c2VzKSQvaSwgJyQxc2lzJ10sCiAgICBbLyheYW5hbHkpKHNp
        c3xzZXMpJC9pLCAnJDFzaXMnXSwKICAgIFsvKFteZl0pdmVzJC9pLCAnJDFm
        ZSddLAogICAgWy8oaGl2ZSlzJC9pLCAnJDEnXSwKICAgIFsvKHRpdmUpcyQv
        aSwgJyQxJ10sCiAgICBbLyhbbHJdKXZlcyQvaSwgJyQxZiddLAogICAgWy8o
        W15hZWlvdXldfHF1KWllcyQvaSwgJyQxeSddLAogICAgWy8ocyllcmllcyQv
        aSwgJyQxZXJpZXMnXSwKICAgIFsvKG0pb3ZpZXMkL2ksICckMW92aWUnXSwK
        ICAgIFsvKHh8Y2h8c3N8c2gpZXMkL2ksICckMSddLAogICAgWy9eKG18bClp
        Y2UkL2ksICckMW91c2UnXSwKICAgIFsvKGJ1cykoZXMpPyQvaSwgJyQxJ10s
        CiAgICBbLyhvKWVzJC9pLCAnJDEnXSwKICAgIFsvKHNob2UpcyQvaSwgJyQx
        J10sCiAgICBbLyhjcmlzfHRlc3QpKGlzfGVzKSQvaSwgJyQxaXMnXSwKICAg
        IFsvXihhKXhbaWVdcyQvaSwgJyQxeGlzJ10sCiAgICBbLyhvY3RvcHx2aXIp
        KHVzfGkpJC9pLCAnJDF1cyddLAogICAgWy8oYWxpYXN8c3RhdHVzKShlcyk/
        JC9pLCAnJDEnXSwKICAgIFsvXihveCllbi9pLCAnJDEnXSwKICAgIFsvKHZl
        cnR8aW5kKWljZXMkL2ksICckMWV4J10sCiAgICBbLyhtYXRyKWljZXMkL2ks
        ICckMWl4J10sCiAgICBbLyhxdWl6KXplcyQvaSwgJyQxJ10sCiAgICBbLyhk
        YXRhYmFzZSlzJC9pLCAnJDEnXQogIF0sCgogIGlycmVndWxhclBhaXJzOiBb
        CiAgICBbJ3BlcnNvbicsICdwZW9wbGUnXSwKICAgIFsnbWFuJywgJ21lbidd
        LAogICAgWydjaGlsZCcsICdjaGlsZHJlbiddLAogICAgWydzZXgnLCAnc2V4
        ZXMnXSwKICAgIFsnbW92ZScsICdtb3ZlcyddLAogICAgWydjb3cnLCAna2lu
        ZSddLAogICAgWyd6b21iaWUnLCAnem9tYmllcyddCiAgXSwKCiAgdW5jb3Vu
        dGFibGU6IFsKICAgICdlcXVpcG1lbnQnLAogICAgJ2luZm9ybWF0aW9uJywK
        ICAgICdyaWNlJywKICAgICdtb25leScsCiAgICAnc3BlY2llcycsCiAgICAn
        c2VyaWVzJywKICAgICdmaXNoJywKICAgICdzaGVlcCcsCiAgICAnamVhbnMn
        LAogICAgJ3BvbGljZScKICBdCn07Cgp9KSgpOwoKCgooZnVuY3Rpb24oKSB7
        CmlmIChFbWJlci5FWFRFTkRfUFJPVE9UWVBFUyA9PT0gdHJ1ZSB8fCBFbWJl
        ci5FWFRFTkRfUFJPVE9UWVBFUy5TdHJpbmcpIHsKICAvKioKICAgIFNlZSB7
        eyNjcm9zc0xpbmsgIkVtYmVyLlN0cmluZy9wbHVyYWxpemUifX17ey9jcm9z
        c0xpbmt9fQoKICAgIEBtZXRob2QgcGx1cmFsaXplCiAgICBAZm9yIFN0cmlu
        ZwogICovCiAgU3RyaW5nLnByb3RvdHlwZS5wbHVyYWxpemUgPSBmdW5jdGlv
        bigpIHsKICAgIHJldHVybiBFbWJlci5TdHJpbmcucGx1cmFsaXplKHRoaXMp
        OwogIH07CgogIC8qKgogICAgU2VlIHt7I2Nyb3NzTGluayAiRW1iZXIuU3Ry
        aW5nL3Npbmd1bGFyaXplIn19e3svY3Jvc3NMaW5rfX0KCiAgICBAbWV0aG9k
        IHNpbmd1bGFyaXplCiAgICBAZm9yIFN0cmluZwogICovCiAgU3RyaW5nLnBy
        b3RvdHlwZS5zaW5ndWxhcml6ZSA9IGZ1bmN0aW9uKCkgewogICAgcmV0dXJu
        IEVtYmVyLlN0cmluZy5zaW5ndWxhcml6ZSh0aGlzKTsKICB9Owp9Cgp9KSgp
        OwoKCgooZnVuY3Rpb24oKSB7CkVtYmVyLkluZmxlY3Rvci5pbmZsZWN0b3Ig
        PSBuZXcgRW1iZXIuSW5mbGVjdG9yKEVtYmVyLkluZmxlY3Rvci5kZWZhdWx0
        UnVsZXMpOw0KCn0pKCk7CgoKCihmdW5jdGlvbigpIHsKCn0pKCk7CgooZnVu
        Y3Rpb24oKSB7Ci8qKgogIEBtb2R1bGUgZW1iZXItZGF0YQoqLwoKdmFyIGdl
        dCA9IEVtYmVyLmdldCwKICAgIGZvckVhY2ggPSBFbWJlci5FbnVtZXJhYmxl
        VXRpbHMuZm9yRWFjaCwKICAgIGNhbWVsaXplID0gICBFbWJlci5TdHJpbmcu
        Y2FtZWxpemUsCiAgICBjYXBpdGFsaXplID0gRW1iZXIuU3RyaW5nLmNhcGl0
        YWxpemUsCiAgICBkZWNhbWVsaXplID0gRW1iZXIuU3RyaW5nLmRlY2FtZWxp
        emUsCiAgICBzaW5ndWxhcml6ZSA9IEVtYmVyLlN0cmluZy5zaW5ndWxhcml6
        ZSwKICAgIHVuZGVyc2NvcmUgPSBFbWJlci5TdHJpbmcudW5kZXJzY29yZTsK
        CkRTLkFjdGl2ZU1vZGVsU2VyaWFsaXplciA9IERTLlJFU1RTZXJpYWxpemVy
        LmV4dGVuZCh7CiAgLy8gU0VSSUFMSVpFCgogIC8qKgogICAgQ29udmVydHMg
        Y2FtZWxjYXNlZCBhdHRyaWJ1dGVzIHRvIHVuZGVyc2NvcmVkIHdoZW4gc2Vy
        aWFsaXppbmcuCgogICAgQG1ldGhvZCBrZXlGb3JBdHRyaWJ1dGUKICAgIEBw
        YXJhbSB7U3RyaW5nfSBhdHRyaWJ1dGUKICAgIEByZXR1cm5zIFN0cmluZwog
        ICovCiAga2V5Rm9yQXR0cmlidXRlOiBmdW5jdGlvbihhdHRyKSB7CiAgICBy
        ZXR1cm4gZGVjYW1lbGl6ZShhdHRyKTsKICB9LAoKICAvKioKICAgIFVuZGVy
        c2NvcmVzIHJlbGF0aW9uc2hpcCBuYW1lcyBhbmQgYXBwZW5kcyAiX2lkIiBv
        ciAiX2lkcyIgd2hlbiBzZXJpYWxpemluZwogICAgcmVsYXRpb25zaGlwIGtl
        eXMuCgogICAgQG1ldGhvZCBrZXlGb3JSZWxhdGlvbnNoaXAKICAgIEBwYXJh
        bSB7U3RyaW5nfSBrZXkKICAgIEBwYXJhbSB7U3RyaW5nfSBraW5kCiAgICBA
        cmV0dXJucyBTdHJpbmcKICAqLwogIGtleUZvclJlbGF0aW9uc2hpcDogZnVu
        Y3Rpb24oa2V5LCBraW5kKSB7CiAgICBrZXkgPSBkZWNhbWVsaXplKGtleSk7
        CiAgICBpZiAoa2luZCA9PT0gImJlbG9uZ3NUbyIpIHsKICAgICAgcmV0dXJu
        IGtleSArICJfaWQiOwogICAgfSBlbHNlIGlmIChraW5kID09PSAiaGFzTWFu
        eSIpIHsKICAgICAgcmV0dXJuIHNpbmd1bGFyaXplKGtleSkgKyAiX2lkcyI7
        CiAgICB9IGVsc2UgewogICAgICByZXR1cm4ga2V5OwogICAgfQogIH0sCgog
        IC8qKgogICAgRG9lcyBub3Qgc2VyaWFsaXplIGhhc01hbnkgcmVsYXRpb25z
        aGlwcyBieSBkZWZhdWx0LgogICovCiAgc2VyaWFsaXplSGFzTWFueTogRW1i
        ZXIuSywKCiAgLyoqCiAgICBVbmRlcnNjb3JlcyB0aGUgSlNPTiByb290IGtl
        eXMgd2hlbiBzZXJpYWxpemluZy4KCiAgICBAbWV0aG9kIHNlcmlhbGl6ZUlu
        dG9IYXNoCiAgICBAcGFyYW0ge09iamVjdH0gaGFzaAogICAgQHBhcmFtIHtz
        dWJjbGFzcyBvZiBEUy5Nb2RlbH0gdHlwZQogICAgQHBhcmFtIHtEUy5Nb2Rl
        bH0gcmVjb3JkCiAgICBAcGFyYW0ge09iamVjdH0gb3B0aW9ucwogICovCiAg
        c2VyaWFsaXplSW50b0hhc2g6IGZ1bmN0aW9uKGRhdGEsIHR5cGUsIHJlY29y
        ZCwgb3B0aW9ucykgewogICAgdmFyIHJvb3QgPSB1bmRlcnNjb3JlKGRlY2Ft
        ZWxpemUodHlwZS50eXBlS2V5KSk7CiAgICBkYXRhW3Jvb3RdID0gdGhpcy5z
        ZXJpYWxpemUocmVjb3JkLCBvcHRpb25zKTsKICB9LAoKICAvKioKICAgIFNl
        cmlhbGl6ZXMgYSBwb2x5bW9ycGhpYyB0eXBlIGFzIGEgZnVsbHkgY2FwaXRh
        bGl6ZWQgbW9kZWwgbmFtZS4KCiAgICBAbWV0aG9kIHNlcmlhbGl6ZVBvbHlt
        b3JwaGljVHlwZQogICAgQHBhcmFtIHtEUy5Nb2RlbH0gcmVjb3JkCiAgICBA
        cGFyYW0ge09iamVjdH0ganNvbgogICAgQHBhcmFtIHJlbGF0aW9uc2hpcAog
        ICovCiAgc2VyaWFsaXplUG9seW1vcnBoaWNUeXBlOiBmdW5jdGlvbihyZWNv
        cmQsIGpzb24sIHJlbGF0aW9uc2hpcCkgewogICAgdmFyIGtleSA9IHJlbGF0
        aW9uc2hpcC5rZXksCiAgICAgICAgYmVsb25nc1RvID0gZ2V0KHJlY29yZCwg
        a2V5KTsKICAgIGtleSA9IHRoaXMua2V5Rm9yQXR0cmlidXRlKGtleSk7CiAg
        ICBqc29uW2tleSArICJfdHlwZSJdID0gY2FwaXRhbGl6ZShjYW1lbGl6ZShi
        ZWxvbmdzVG8uY29uc3RydWN0b3IudHlwZUtleSkpOwogIH0sCgogIC8vIEVY
        VFJBQ1QKCiAgLyoqCiAgICBFeHRyYWN0cyB0aGUgbW9kZWwgdHlwZUtleSBm
        cm9tIHVuZGVyc2NvcmVkIHJvb3Qgb2JqZWN0cy4KCiAgICBAbWV0aG9kIHR5
        cGVGb3JSb290CiAgICBAcGFyYW0ge1N0cmluZ30gcm9vdAogICAgQHJldHVy
        bnMgU3RyaW5nIHRoZSBtb2RlbCdzIHR5cGVLZXkKICAqLwogIHR5cGVGb3JS
        b290OiBmdW5jdGlvbihyb290KSB7CiAgICB2YXIgY2FtZWxpemVkID0gY2Ft
        ZWxpemUocm9vdCk7CiAgICByZXR1cm4gc2luZ3VsYXJpemUoY2FtZWxpemVk
        KTsKICB9LAoKICAvKioKICAgIEFkZCBleHRyYSBzdGVwIHRvIGBEUy5SRVNU
        U2VyaWFsaXplci5ub3JtYWxpemVgIHNvIGxpbmtzIGFyZQogICAgbm9ybWFs
        aXplZC4KCiAgICBJZiB5b3VyIHBheWxvYWQgbG9va3MgbGlrZSB0aGlzCgog
        ICAgYGBganMKICAgIHsKICAgICAgInBvc3QiOiB7CiAgICAgICAgImlkIjog
        MSwKICAgICAgICAidGl0bGUiOiAiUmFpbHMgaXMgb21ha2FzZSIsCiAgICAg
        ICAgImxpbmtzIjogeyAiZmxhZ2dlZF9jb21tZW50cyI6ICJhcGkvY29tbWVu
        dHMvZmxhZ2dlZCIgfQogICAgICB9CiAgICB9CiAgICBgYGAKICAgIFRoZSBu
        b3JtYWxpemVkIHZlcnNpb24gd291bGQgbG9vayBsaWtlIHRoaXMKCiAgICBg
        YGBqcwogICAgewogICAgICAicG9zdCI6IHsKICAgICAgICAiaWQiOiAxLAog
        ICAgICAgICJ0aXRsZSI6ICJSYWlscyBpcyBvbWFrYXNlIiwKICAgICAgICAi
        bGlua3MiOiB7ICJmbGFnZ2VkQ29tbWVudHMiOiAiYXBpL2NvbW1lbnRzL2Zs
        YWdnZWQiIH0KICAgICAgfQogICAgfQogICAgYGBgCgogICAgQG1ldGhvZCBu
        b3JtYWxpemUKICAgIEBwYXJhbSB7c3ViY2xhc3Mgb2YgRFMuTW9kZWx9IHR5
        cGUKICAgIEBwYXJhbSB7T2JqZWN0fSBoYXNoCiAgICBAcGFyYW0ge1N0cmlu
        Z30gcHJvcAogICAgQHJldHVybnMgT2JqZWN0CiAgKi8KCiAgbm9ybWFsaXpl
        OiBmdW5jdGlvbih0eXBlLCBoYXNoLCBwcm9wKSB7CiAgICB0aGlzLm5vcm1h
        bGl6ZUxpbmtzKGhhc2gpOwoKICAgIHJldHVybiB0aGlzLl9zdXBlcih0eXBl
        LCBoYXNoLCBwcm9wKTsKICB9LAoKICAvKioKICAgIENvbnZlcnQgYHNuYWtl
        X2Nhc2VkYCBsaW5rcyAgdG8gYGNhbWVsQ2FzZWAKCiAgICBAbWV0aG9kIG5v
        cm1hbGl6ZUxpbmtzCiAgICBAcGFyYW0ge09iamVjdH0gaGFzaAogICovCgog
        IG5vcm1hbGl6ZUxpbmtzOiBmdW5jdGlvbihkYXRhKXsKICAgIGlmIChkYXRh
        LmxpbmtzKSB7CiAgICAgIHZhciBsaW5rcyA9IGRhdGEubGlua3M7CgogICAg
        ICBmb3IgKHZhciBsaW5rIGluIGxpbmtzKSB7CiAgICAgICAgdmFyIGNhbWVs
        aXplZExpbmsgPSBjYW1lbGl6ZShsaW5rKTsKCiAgICAgICAgaWYgKGNhbWVs
        aXplZExpbmsgIT09IGxpbmspIHsKICAgICAgICAgIGxpbmtzW2NhbWVsaXpl
        ZExpbmtdID0gbGlua3NbbGlua107CiAgICAgICAgICBkZWxldGUgbGlua3Nb
        bGlua107CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfSwKCiAgLyoqCiAg
        ICBOb3JtYWxpemUgdGhlIHBvbHltb3JwaGljIHR5cGUgZnJvbSB0aGUgSlNP
        Ti4KCiAgICBOb3JtYWxpemU6CiAgICBgYGBqcwogICAgICB7CiAgICAgICAg
        aWQ6ICIxIgogICAgICAgIG1pbmlvbjogeyB0eXBlOiAiZXZpbF9taW5pb24i
        LCBpZDogIjEyIn0KICAgICAgfQogICAgYGBgCgogICAgVG86CiAgICBgYGBq
        cwogICAgICB7CiAgICAgICAgaWQ6ICIxIgogICAgICAgIG1pbmlvbjogeyB0
        eXBlOiAiZXZpbE1pbmlvbiIsIGlkOiAiMTIifQogICAgICB9CiAgICBgYGAK
        CiAgICBAbWV0aG9kIG5vcm1hbGl6ZVJlbGF0aW9uc2hpcHMKICAgIEBwcml2
        YXRlCiAgKi8KICBub3JtYWxpemVSZWxhdGlvbnNoaXBzOiBmdW5jdGlvbih0
        eXBlLCBoYXNoKSB7CiAgICB2YXIgcGF5bG9hZEtleSwgcGF5bG9hZDsKCiAg
        ICBpZiAodGhpcy5rZXlGb3JSZWxhdGlvbnNoaXApIHsKICAgICAgdHlwZS5l
        YWNoUmVsYXRpb25zaGlwKGZ1bmN0aW9uKGtleSwgcmVsYXRpb25zaGlwKSB7
        CiAgICAgICAgaWYgKHJlbGF0aW9uc2hpcC5vcHRpb25zLnBvbHltb3JwaGlj
        KSB7CiAgICAgICAgICBwYXlsb2FkS2V5ID0gdGhpcy5rZXlGb3JBdHRyaWJ1
        dGUoa2V5KTsKICAgICAgICAgIHBheWxvYWQgPSBoYXNoW3BheWxvYWRLZXld
        OwogICAgICAgICAgaWYgKHBheWxvYWQgJiYgcGF5bG9hZC50eXBlKSB7CiAg
        ICAgICAgICAgIHBheWxvYWQudHlwZSA9IHRoaXMudHlwZUZvclJvb3QocGF5
        bG9hZC50eXBlKTsKICAgICAgICAgIH0gZWxzZSBpZiAocGF5bG9hZCAmJiBy
        ZWxhdGlvbnNoaXAua2luZCA9PT0gImhhc01hbnkiKSB7CiAgICAgICAgICAg
        IHZhciBzZWxmID0gdGhpczsKICAgICAgICAgICAgZm9yRWFjaChwYXlsb2Fk
        LCBmdW5jdGlvbihzaW5nbGUpIHsKICAgICAgICAgICAgICBzaW5nbGUudHlw
        ZSA9IHNlbGYudHlwZUZvclJvb3Qoc2luZ2xlLnR5cGUpOwogICAgICAgICAg
        ICB9KTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAg
        cGF5bG9hZEtleSA9IHRoaXMua2V5Rm9yUmVsYXRpb25zaGlwKGtleSwgcmVs
        YXRpb25zaGlwLmtpbmQpOwogICAgICAgICAgcGF5bG9hZCA9IGhhc2hbcGF5
        bG9hZEtleV07CiAgICAgICAgfQoKICAgICAgICBoYXNoW2tleV0gPSBwYXls
        b2FkOwoKICAgICAgICBpZiAoa2V5ICE9PSBwYXlsb2FkS2V5KSB7CiAgICAg
        ICAgICBkZWxldGUgaGFzaFtwYXlsb2FkS2V5XTsKICAgICAgICB9CiAgICAg
        IH0sIHRoaXMpOwogICAgfQogIH0KfSk7Cgp9KSgpOwoKCgooZnVuY3Rpb24o
        KSB7CnZhciBnZXQgPSBFbWJlci5nZXQ7CnZhciBmb3JFYWNoID0gRW1iZXIu
        RW51bWVyYWJsZVV0aWxzLmZvckVhY2g7CgovKioKICBUaGUgRW1iZWRkZWRS
        ZWNvcmRzTWl4aW4gYWxsb3dzIHlvdSB0byBhZGQgZW1iZWRkZWQgcmVjb3Jk
        IHN1cHBvcnQgdG8geW91cgogIHNlcmlhbGl6ZXJzLgogIFRvIHNldCB1cCBl
        bWJlZGRlZCByZWNvcmRzLCB5b3UgaW5jbHVkZSB0aGUgbWl4aW4gaW50byB0
        aGUgc2VyaWFsaXplciBhbmQgdGhlbgogIGRlZmluZSB5b3VyIGVtYmVkZGVk
        IHJlbGF0aW9ucy4KCiAgYGBganMKICBBcHAuUG9zdFNlcmlhbGl6ZXIgPSBE
        Uy5BY3RpdmVNb2RlbFNlcmlhbGl6ZXIuZXh0ZW5kKERTLkVtYmVkZGVkUmVj
        b3Jkc01peGluLCB7CiAgICBhdHRyczogewogICAgICBjb21tZW50czoge2Vt
        YmVkZGVkOiAnYWx3YXlzJ30KICAgIH0KICB9KQogIGBgYAoKICBDdXJyZW50
        bHkgb25seSBge2VtYmVkZGVkOiAnYWx3YXlzJ31gIHJlY29yZHMgYXJlIHN1
        cHBvcnRlZC4KCiAgQGNsYXNzIEVtYmVkZGVkUmVjb3Jkc01peGluCiAgQG5h
        bWVzcGFjZSBEUwoqLwpEUy5FbWJlZGRlZFJlY29yZHNNaXhpbiA9IEVtYmVy
        Lk1peGluLmNyZWF0ZSh7CgogIC8qKgogICAgU2VyaWFsaXplIGhhcy1tYXkg
        cmVsYXRpb25zaGlwIHdoZW4gaXQgaXMgY29uZmlndXJlZCBhcyBlbWJlZGRl
        ZCBvYmplY3RzLgoKICAgIEBtZXRob2Qgc2VyaWFsaXplSGFzTWFueQogICov
        CiAgc2VyaWFsaXplSGFzTWFueTogZnVuY3Rpb24ocmVjb3JkLCBqc29uLCBy
        ZWxhdGlvbnNoaXApIHsKICAgIHZhciBrZXkgICA9IHJlbGF0aW9uc2hpcC5r
        ZXksCiAgICAgICAgYXR0cnMgPSBnZXQodGhpcywgJ2F0dHJzJyksCiAgICAg
        ICAgZW1iZWQgPSBhdHRycyAmJiBhdHRyc1trZXldICYmIGF0dHJzW2tleV0u
        ZW1iZWRkZWQgPT09ICdhbHdheXMnOwoKICAgIGlmIChlbWJlZCkgewogICAg
        ICBqc29uW3RoaXMua2V5Rm9yQXR0cmlidXRlKGtleSldID0gZ2V0KHJlY29y
        ZCwga2V5KS5tYXAoZnVuY3Rpb24ocmVsYXRpb24pIHsKICAgICAgICB2YXIg
        ZGF0YSA9IHJlbGF0aW9uLnNlcmlhbGl6ZSgpLAogICAgICAgICAgICBwcmlt
        YXJ5S2V5ID0gZ2V0KHRoaXMsICdwcmltYXJ5S2V5Jyk7CgogICAgICAgIGRh
        dGFbcHJpbWFyeUtleV0gPSBnZXQocmVsYXRpb24sIHByaW1hcnlLZXkpOwoK
        ICAgICAgICByZXR1cm4gZGF0YTsKICAgICAgfSwgdGhpcyk7CiAgICB9CiAg
        fSwKCiAgLyoqCiAgICBFeHRyYWN0IGVtYmVkZGVkIG9iamVjdHMgb3V0IG9m
        IHRoZSBwYXlsb2FkIGZvciBhIHNpbmdsZSBvYmplY3QKICAgIGFuZCBhZGQg
        dGhlbSBhcyBzaWRlbG9hZGVkIG9iamVjdHMgaW5zdGVhZC4KCiAgICBAbWV0
        aG9kIGV4dHJhY3RTaW5nbGUKICAqLwogIGV4dHJhY3RTaW5nbGU6IGZ1bmN0
        aW9uKHN0b3JlLCBwcmltYXJ5VHlwZSwgcGF5bG9hZCwgcmVjb3JkSWQsIHJl
        cXVlc3RUeXBlKSB7CiAgICB2YXIgcm9vdCA9IHRoaXMua2V5Rm9yQXR0cmli
        dXRlKHByaW1hcnlUeXBlLnR5cGVLZXkpLAogICAgICAgIHBhcnRpYWwgPSBw
        YXlsb2FkW3Jvb3RdOwoKICAgIHVwZGF0ZVBheWxvYWRXaXRoRW1iZWRkZWQo
        c3RvcmUsIHRoaXMsIHByaW1hcnlUeXBlLCBwYXJ0aWFsLCBwYXlsb2FkKTsK
        CiAgICByZXR1cm4gdGhpcy5fc3VwZXIoc3RvcmUsIHByaW1hcnlUeXBlLCBw
        YXlsb2FkLCByZWNvcmRJZCwgcmVxdWVzdFR5cGUpOwogIH0sCgogIC8qKgog
        ICAgRXh0cmFjdCBlbWJlZGRlZCBvYmplY3RzIG91dCBvZiBhIHN0YW5kYXJk
        IHBheWxvYWQKICAgIGFuZCBhZGQgdGhlbSBhcyBzaWRlbG9hZGVkIG9iamVj
        dHMgaW5zdGVhZC4KCiAgICBAbWV0aG9kIGV4dHJhY3RBcnJheQogICovCiAg
        ZXh0cmFjdEFycmF5OiBmdW5jdGlvbihzdG9yZSwgdHlwZSwgcGF5bG9hZCkg
        ewogICAgdmFyIHJvb3QgPSB0aGlzLmtleUZvckF0dHJpYnV0ZSh0eXBlLnR5
        cGVLZXkpLAogICAgICAgIHBhcnRpYWxzID0gcGF5bG9hZFtFbWJlci5TdHJp
        bmcucGx1cmFsaXplKHJvb3QpXTsKCiAgICBmb3JFYWNoKHBhcnRpYWxzLCBm
        dW5jdGlvbihwYXJ0aWFsKSB7CiAgICAgIHVwZGF0ZVBheWxvYWRXaXRoRW1i
        ZWRkZWQoc3RvcmUsIHRoaXMsIHR5cGUsIHBhcnRpYWwsIHBheWxvYWQpOwog
        ICAgfSwgdGhpcyk7CgogICAgcmV0dXJuIHRoaXMuX3N1cGVyKHN0b3JlLCB0
        eXBlLCBwYXlsb2FkKTsKICB9Cn0pOwoKZnVuY3Rpb24gdXBkYXRlUGF5bG9h
        ZFdpdGhFbWJlZGRlZChzdG9yZSwgc2VyaWFsaXplciwgdHlwZSwgcGFydGlh
        bCwgcGF5bG9hZCkgewogIHZhciBhdHRycyA9IGdldChzZXJpYWxpemVyLCAn
        YXR0cnMnKTsKCiAgaWYgKCFhdHRycykgewogICAgcmV0dXJuOwogIH0KCiAg
        dHlwZS5lYWNoUmVsYXRpb25zaGlwKGZ1bmN0aW9uKGtleSwgcmVsYXRpb25z
        aGlwKSB7CiAgICB2YXIgZXhwYW5kZWRLZXksIGVtYmVkZGVkVHlwZUtleSwg
        YXR0cmlidXRlLCBpZHMsCiAgICAgICAgY29uZmlnID0gYXR0cnNba2V5XSwK
        ICAgICAgICBzZXJpYWxpemVyID0gc3RvcmUuc2VyaWFsaXplckZvcihyZWxh
        dGlvbnNoaXAudHlwZS50eXBlS2V5KSwKICAgICAgICBwcmltYXJ5S2V5ID0g
        Z2V0KHNlcmlhbGl6ZXIsICJwcmltYXJ5S2V5Iik7CgogICAgaWYgKHJlbGF0
        aW9uc2hpcC5raW5kICE9PSAiaGFzTWFueSIpIHsKICAgICAgcmV0dXJuOwog
        ICAgfQoKICAgIGlmIChjb25maWcgJiYgKGNvbmZpZy5lbWJlZGRlZCA9PT0g
        J2Fsd2F5cycgfHwgY29uZmlnLmVtYmVkZGVkID09PSAnbG9hZCcpKSB7CiAg
        ICAgIC8vIHVuZGVyc2NvcmUgZm9yY2VzIHRoZSBlbWJlZGRlZCByZWNvcmRz
        IHRvIGJlIHNpZGUgbG9hZGVkLgogICAgICAvLyBpdCBpcyBuZWVkZWQgd2hl
        biBtYWluIHR5cGUgPT09IHJlbGF0aW9uc2hpcC50eXBlCiAgICAgIGVtYmVk
        ZGVkVHlwZUtleSA9ICdfJyArIEVtYmVyLlN0cmluZy5wbHVyYWxpemUocmVs
        YXRpb25zaGlwLnR5cGUudHlwZUtleSk7CiAgICAgIGV4cGFuZGVkS2V5ID0g
        dGhpcy5rZXlGb3JSZWxhdGlvbnNoaXAoa2V5LCByZWxhdGlvbnNoaXAua2lu
        ZCk7CiAgICAgIGF0dHJpYnV0ZSAgPSB0aGlzLmtleUZvckF0dHJpYnV0ZShr
        ZXkpOwogICAgICBpZHMgPSBbXTsKCiAgICAgIGlmICghcGFydGlhbFthdHRy
        aWJ1dGVdKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBwYXls
        b2FkW2VtYmVkZGVkVHlwZUtleV0gPSBwYXlsb2FkW2VtYmVkZGVkVHlwZUtl
        eV0gfHwgW107CgogICAgICBmb3JFYWNoKHBhcnRpYWxbYXR0cmlidXRlXSwg
        ZnVuY3Rpb24oZGF0YSkgewogICAgICAgIHZhciBlbWJlZGRlZFR5cGUgPSBz
        dG9yZS5tb2RlbEZvcihyZWxhdGlvbnNoaXAudHlwZS50eXBlS2V5KTsKICAg
        ICAgICB1cGRhdGVQYXlsb2FkV2l0aEVtYmVkZGVkKHN0b3JlLCBzZXJpYWxp
        emVyLCBlbWJlZGRlZFR5cGUsIGRhdGEsIHBheWxvYWQpOwogICAgICAgIGlk
        cy5wdXNoKGRhdGFbcHJpbWFyeUtleV0pOwogICAgICAgIHBheWxvYWRbZW1i
        ZWRkZWRUeXBlS2V5XS5wdXNoKGRhdGEpOwogICAgICB9KTsKCiAgICAgIHBh
        cnRpYWxbZXhwYW5kZWRLZXldID0gaWRzOwogICAgICBkZWxldGUgcGFydGlh
        bFthdHRyaWJ1dGVdOwogICAgfQogIH0sIHNlcmlhbGl6ZXIpOwp9Cn0pKCk7
        CgoKCihmdW5jdGlvbigpIHsKLyoqCiAgQG1vZHVsZSBlbWJlci1kYXRhCiov
        Cgp2YXIgZm9yRWFjaCA9IEVtYmVyLkVudW1lcmFibGVVdGlscy5mb3JFYWNo
        Owp2YXIgZGVjYW1lbGl6ZSA9IEVtYmVyLlN0cmluZy5kZWNhbWVsaXplLAog
        ICAgdW5kZXJzY29yZSA9IEVtYmVyLlN0cmluZy51bmRlcnNjb3JlLAogICAg
        cGx1cmFsaXplICA9IEVtYmVyLlN0cmluZy5wbHVyYWxpemU7CgovKioKICBU
        aGUgQWN0aXZlTW9kZWxBZGFwdGVyIGlzIGEgc3ViY2xhc3Mgb2YgdGhlIFJF
        U1RBZGFwdGVyIGRlc2lnbmVkIHRvIGludGVncmF0ZQogIHdpdGggYSBKU09O
        IEFQSSB0aGF0IHVzZXMgYW4gdW5kZXJzY29yZWQgbmFtaW5nIGNvbnZlbnRp
        b24gaW5zdGVhZCBvZiBjYW1lbGNhc2luZy4KICBJdCBoYXMgYmVlbiBkZXNp
        Z25lZCB0byB3b3JrIG91dCBvZiB0aGUgYm94IHdpdGggdGhlCiAgW2FjdGl2
        ZV9tb2RlbF9zZXJpYWxpemVyc10oaHR0cDovL2dpdGh1Yi5jb20vcmFpbHMt
        YXBpL2FjdGl2ZV9tb2RlbF9zZXJpYWxpemVycykKICBSdWJ5IGdlbS4KCiAg
        VGhpcyBhZGFwdGVyIGV4dGVuZHMgdGhlIERTLlJFU1RBZGFwdGVyIGJ5IG1h
        a2luZyBjb25zaXN0ZW50IHVzZSBvZiB0aGUgY2FtZWxpemF0aW9uLAogIGRl
        Y2FtZWxpemF0aW9uIGFuZCBwbHVyYWxpemF0aW9uIG1ldGhvZHMgdG8gbm9y
        bWFsaXplIHRoZSBzZXJpYWxpemVkIEpTT04gaW50byBhCiAgZm9ybWF0IHRo
        YXQgaXMgY29tcGF0aWJsZSB3aXRoIGEgY29udmVudGlvbmFsIFJhaWxzIGJh
        Y2tlbmQgYW5kIEVtYmVyIERhdGEuCgogICMjIEpTT04gU3RydWN0dXJlCgog
        IFRoZSBBY3RpdmVNb2RlbEFkYXB0ZXIgZXhwZWN0cyB0aGUgSlNPTiByZXR1
        cm5lZCBmcm9tIHlvdXIgc2VydmVyIHRvIGZvbGxvdwogIHRoZSBSRVNUIGFk
        YXB0ZXIgY29udmVudGlvbnMgc3Vic3RpdHV0aW5nIHVuZGVyc2NvcmVkIGtl
        eXMgZm9yIGNhbWVsY2FzZWQgb25lcy4KCiAgIyMjIENvbnZlbnRpb25hbCBO
        YW1lcwoKICBBdHRyaWJ1dGUgbmFtZXMgaW4geW91ciBKU09OIHBheWxvYWQg
        c2hvdWxkIGJlIHRoZSB1bmRlcnNjb3JlZCB2ZXJzaW9ucyBvZgogIHRoZSBh
        dHRyaWJ1dGVzIGluIHlvdXIgRW1iZXIuanMgbW9kZWxzLgoKICBGb3IgZXhh
        bXBsZSwgaWYgeW91IGhhdmUgYSBgUGVyc29uYCBtb2RlbDoKCiAgYGBganMK
        ICBBcHAuRmFtb3VzUGVyc29uID0gRFMuTW9kZWwuZXh0ZW5kKHsKICAgIGZp
        cnN0TmFtZTogRFMuYXR0cignc3RyaW5nJyksCiAgICBsYXN0TmFtZTogRFMu
        YXR0cignc3RyaW5nJyksCiAgICBvY2N1cGF0aW9uOiBEUy5hdHRyKCdzdHJp
        bmcnKQogIH0pOwogIGBgYAoKICBUaGUgSlNPTiByZXR1cm5lZCBzaG91bGQg
        bG9vayBsaWtlIHRoaXM6CgogIGBgYGpzCiAgewogICAgImZhbW91c19wZXJz
        b24iOiB7CiAgICAgICJmaXJzdF9uYW1lIjogIkJhcmFjayIsCiAgICAgICJs
        YXN0X25hbWUiOiAiT2JhbWEiLAogICAgICAib2NjdXBhdGlvbiI6ICJQcmVz
        aWRlbnQiCiAgICB9CiAgfQogIGBgYAoKICBAY2xhc3MgQWN0aXZlTW9kZWxB
        ZGFwdGVyCiAgQGNvbnN0cnVjdG9yCiAgQG5hbWVzcGFjZSBEUwogIEBleHRl
        bmRzIERTLkFkYXB0ZXIKKiovCgpEUy5BY3RpdmVNb2RlbEFkYXB0ZXIgPSBE
        Uy5SRVNUQWRhcHRlci5leHRlbmQoewogIGRlZmF1bHRTZXJpYWxpemVyOiAn
        LWFjdGl2ZS1tb2RlbCcsCiAgLyoqCiAgICBUaGUgQWN0aXZlTW9kZWxBZGFw
        dGVyIG92ZXJyaWRlcyB0aGUgYHBhdGhGb3JUeXBlYCBtZXRob2QgdG8gYnVp
        bGQKICAgIHVuZGVyc2NvcmVkIFVSTHMgYnkgZGVjYW1lbGl6aW5nIGFuZCBw
        bHVyYWxpemluZyB0aGUgb2JqZWN0IHR5cGUgbmFtZS4KCiAgICBgYGBqcwog
        ICAgICB0aGlzLnBhdGhGb3JUeXBlKCJmYW1vdXNQZXJzb24iKTsKICAgICAg
        Ly89PiAiZmFtb3VzX3Blb3BsZSIKICAgIGBgYAoKICAgIEBtZXRob2QgcGF0
        aEZvclR5cGUKICAgIEBwYXJhbSB7U3RyaW5nfSB0eXBlCiAgICBAcmV0dXJu
        cyBTdHJpbmcKICAqLwogIHBhdGhGb3JUeXBlOiBmdW5jdGlvbih0eXBlKSB7
        CiAgICB2YXIgZGVjYW1lbGl6ZWQgPSBkZWNhbWVsaXplKHR5cGUpOwogICAg
        dmFyIHVuZGVyc2NvcmVkID0gdW5kZXJzY29yZShkZWNhbWVsaXplZCk7CiAg
        ICByZXR1cm4gcGx1cmFsaXplKHVuZGVyc2NvcmVkKTsKICB9LAoKICAvKioK
        ICAgIFRoZSBBY3RpdmVNb2RlbEFkYXB0ZXIgb3ZlcnJpZGVzIHRoZSBgYWph
        eEVycm9yYCBtZXRob2QKICAgIHRvIHJldHVybiBhIERTLkludmFsaWRFcnJv
        ciBmb3IgYWxsIDQyMiBVbnByb2Nlc3NhYmxlIEVudGl0eQogICAgcmVzcG9u
        c2VzLgoKICAgIEEgNDIyIEhUVFAgcmVzcG9uc2UgZnJvbSB0aGUgc2VydmVy
        IGdlbmVyYWxseSBpbXBsaWVzIHRoYXQgdGhlIHJlcXVlc3QKICAgIHdhcyB3
        ZWxsIGZvcm1lZCBidXQgdGhlIEFQSSB3YXMgdW5hYmxlIHRvIHByb2Nlc3Mg
        aXQgYmVjYXVzZSB0aGUKICAgIGNvbnRlbnQgd2FzIG5vdCBzZW1hbnRpY2Fs
        bHkgY29ycmVjdCBvciBtZWFuaW5nZnVsIHBlciB0aGUgQVBJLgoKICAgIEZv
        ciBtb3JlIGluZm9ybWF0aW9uIG9uIDQyMiBIVFRQIEVycm9yIGNvZGUgc2Vl
        IDExLjIgV2ViREFWIFJGQyA0OTE4CiAgICBodHRwczovL3Rvb2xzLmlldGYu
        b3JnL2h0bWwvcmZjNDkxOCNzZWN0aW9uLTExLjIKCiAgICBAbWV0aG9kIGFq
        YXhFcnJvcgogICAgQHBhcmFtIGpxWEhSCiAgICBAcmV0dXJucyBlcnJvcgog
        ICovCiAgYWpheEVycm9yOiBmdW5jdGlvbihqcVhIUikgewogICAgdmFyIGVy
        cm9yID0gdGhpcy5fc3VwZXIoanFYSFIpOwoKICAgIGlmIChqcVhIUiAmJiBq
        cVhIUi5zdGF0dXMgPT09IDQyMikgewogICAgICB2YXIgcmVzcG9uc2UgPSBF
        bWJlci4kLnBhcnNlSlNPTihqcVhIUi5yZXNwb25zZVRleHQpLAogICAgICAg
        ICAgZXJyb3JzID0ge307CgogICAgICBpZiAocmVzcG9uc2UuZXJyb3JzICE9
        PSB1bmRlZmluZWQpIHsKICAgICAgICB2YXIganNvbkVycm9ycyA9IHJlc3Bv
        bnNlLmVycm9yczsKCiAgICAgICAgZm9yRWFjaChFbWJlci5rZXlzKGpzb25F
        cnJvcnMpLCBmdW5jdGlvbihrZXkpIHsKICAgICAgICAgIGVycm9yc1tFbWJl
        ci5TdHJpbmcuY2FtZWxpemUoa2V5KV0gPSBqc29uRXJyb3JzW2tleV07CiAg
        ICAgICAgfSk7CiAgICAgIH0KCiAgICAgIHJldHVybiBuZXcgRFMuSW52YWxp
        ZEVycm9yKGVycm9ycyk7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gZXJy
        b3I7CiAgICB9CiAgfQp9KTsKCn0pKCk7CgoKCihmdW5jdGlvbigpIHsKCn0p
        KCk7CgoKCihmdW5jdGlvbigpIHsKRW1iZXIub25Mb2FkKCdFbWJlci5BcHBs
        aWNhdGlvbicsIGZ1bmN0aW9uKEFwcGxpY2F0aW9uKSB7CiAgQXBwbGljYXRp
        b24uaW5pdGlhbGl6ZXIoewogICAgbmFtZTogImFjdGl2ZU1vZGVsQWRhcHRl
        ciIsCgogICAgaW5pdGlhbGl6ZTogZnVuY3Rpb24oY29udGFpbmVyLCBhcHBs
        aWNhdGlvbikgewogICAgICB2YXIgcHJveHkgPSBuZXcgRFMuQ29udGFpbmVy
        UHJveHkoY29udGFpbmVyKTsKICAgICAgcHJveHkucmVnaXN0ZXJEZXByZWNh
        dGlvbnMoWwogICAgICAgIHtkZXByZWNhdGVkOiAnc2VyaWFsaXplcjpfYW1z
        JywgIHZhbGlkOiAnc2VyaWFsaXplcjotYWN0aXZlLW1vZGVsJ30sCiAgICAg
        ICAge2RlcHJlY2F0ZWQ6ICdhZGFwdGVyOl9hbXMnLCAgICAgdmFsaWQ6ICdh
        ZGFwdGVyOi1hY3RpdmUtbW9kZWwnfQogICAgICBdKTsKCiAgICAgIGFwcGxp
        Y2F0aW9uLnJlZ2lzdGVyKCdzZXJpYWxpemVyOi1hY3RpdmUtbW9kZWwnLCBE
        Uy5BY3RpdmVNb2RlbFNlcmlhbGl6ZXIpOwogICAgICBhcHBsaWNhdGlvbi5y
        ZWdpc3RlcignYWRhcHRlcjotYWN0aXZlLW1vZGVsJywgRFMuQWN0aXZlTW9k
        ZWxBZGFwdGVyKTsKICAgIH0KICB9KTsKfSk7Cgp9KSgpOwoKCgooZnVuY3Rp
        b24oKSB7Cgp9KSgpOwoKCn0pKCk7Cg==
    http_version: 
  recorded_at: Mon, 17 Feb 2014 11:44:59 GMT
- request:
    method: get
    uri: http://builds.emberjs.com/beta/ember-data.min.js
    body:
      encoding: US-ASCII
      string: ''
    headers:
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - '*/*'
      User-Agent:
      - Ruby
      Host:
      - builds.emberjs.com
  response:
    status:
      code: 200
      message: OK
    headers:
      X-Amz-Id-2:
      - hvDZkcrX7EydavwfFcAHNvqYCe23n+DLqj0Yt1RwbI0l06/IA4o+xPCT7/5wOAFc
      X-Amz-Request-Id:
      - 81506E0D46372679
      Date:
      - Mon, 17 Feb 2014 11:45:01 GMT
      Last-Modified:
      - Sun, 26 Jan 2014 02:04:26 GMT
      Etag:
      - '"4bc58817f377007755b986a16db4a7c8"'
      Content-Type:
      - text/javascript
      Content-Length:
      - '71020'
      Server:
      - AmazonS3
    body:
      encoding: UTF-8
      string: |-
        /*!
         * @overview  Ember Data
         * @copyright Copyright 2011-2014 Tilde Inc. and contributors.
         *            Portions Copyright 2011 LivingSocial Inc.
         * @license   Licensed under MIT license (see license.js)
         * @version   1.0.0-beta.6
         */
        !function(){var e,t;!function(){var r={},n={};e=function(e,t,n){r[e]={deps:t,callback:n}},t=function(e){if(n[e])return n[e];n[e]={};var i,a,o,s,d;if(i=r[e],!i)throw new Error("Module '"+e+"' not found.");a=i.deps,o=i.callback,s=[];for(var u=0,c=a.length;c>u;u++)"exports"===a[u]?s.push(d={}):s.push(t(a[u]));var l=o.apply(this,s);return n[e]=d||l}}(),function(){var e;"undefined"==typeof e&&(e=Ember.Namespace.create({VERSION:"1.0.0-beta.6"}),"undefined"!=typeof window&&(window.DS=e),Ember.libraries&&Ember.libraries.registerCoreLibrary("Ember Data",e.VERSION))}(),function(){var e=function(e){this.container=e};e.prototype.aliasedFactory=function(e,t){var r=this;return{create:function(){return t&&t(),r.container.lookup(e)}}},e.prototype.registerAlias=function(e,t,r){var n=this.aliasedFactory(t,r);return this.container.register(e,n)},e.prototype.registerDeprecation=function(e,t){var r=function(){Ember.deprecate("You tried to look up '"+e+"', but this has been deprecated in favor of '"+t+"'.",!1)};return this.registerAlias(e,t,r)},e.prototype.registerDeprecations=function(e){for(var t=e.length;t>0;t--){var r=e[t-1],n=r.deprecated,i=r.valid;this.registerDeprecation(n,i)}},DS.ContainerProxy=e}(),function(){function e(e){return function(){return this[e].apply(this,arguments)}}var t=Ember.get,r=(Ember.set,Ember.isNone);DS.JSONSerializer=Ember.Object.extend({primaryKey:"id",applyTransforms:function(e,t){return e.eachTransformedAttribute(function(e,r){var n=this.transformFor(r);t[e]=n.deserialize(t[e])},this),t},normalize:function(e,t){return t?(this.applyTransforms(e,t),t):t},serialize:function(e,r){var n={};if(r&&r.includeId){var i=t(e,"id");i&&(n[t(this,"primaryKey")]=i)}return e.eachAttribute(function(t,r){this.serializeAttribute(e,n,t,r)},this),e.eachRelationship(function(t,r){"belongsTo"===r.kind?this.serializeBelongsTo(e,n,r):"hasMany"===r.kind&&this.serializeHasMany(e,n,r)},this),n},serializeAttribute:function(e,r,n,i){var a=t(this,"attrs"),o=t(e,n),s=i.type;if(s){var d=this.transformFor(s);o=d.serialize(o)}n=a&&a[n]||(this.keyForAttribute?this.keyForAttribute(n):n),r[n]=o},serializeBelongsTo:function(e,n,i){var a=i.key,o=t(e,a);a=this.keyForRelationship?this.keyForRelationship(a,"belongsTo"):a,n[a]=r(o)?o:t(o,"id"),i.options.polymorphic&&this.serializePolymorphicType(e,n,i)},serializeHasMany:function(e,r,n){var i=n.key,a=DS.RelationshipChange.determineRelationshipType(e.constructor,n);("manyToNone"===a||"manyToMany"===a)&&(r[i]=t(e,i).mapBy("id"))},serializePolymorphicType:Ember.K,extract:function(e,t,r,n,i){this.extractMeta(e,t,r);var a="extract"+i.charAt(0).toUpperCase()+i.substr(1);return this[a](e,t,r,n,i)},extractFindAll:e("extractArray"),extractFindQuery:e("extractArray"),extractFindMany:e("extractArray"),extractFindHasMany:e("extractArray"),extractCreateRecord:e("extractSave"),extractUpdateRecord:e("extractSave"),extractDeleteRecord:e("extractSave"),extractFind:e("extractSingle"),extractFindBelongsTo:e("extractSingle"),extractSave:e("extractSingle"),extractSingle:function(e,t,r){return this.normalize(t,r)},extractArray:function(e,t,r){return this.normalize(t,r)},extractMeta:function(e,t,r){r&&r.meta&&(e.metaForType(t,r.meta),delete r.meta)},transformFor:function(e,t){var r=this.container.lookup("transform:"+e);return Ember.assert("Unable to find transform for '"+e+"'",t||!!r),r}})}(),function(){var e=Ember.get,t=Ember.String.capitalize,r=Ember.String.underscore,n=window.DS;n.DebugAdapter=Ember.DataAdapter.extend({getFilters:function(){return[{name:"isNew",desc:"New"},{name:"isModified",desc:"Modified"},{name:"isClean",desc:"Clean"}]},detect:function(e){return e!==n.Model&&n.Model.detect(e)},columnsForType:function(n){var i=[{name:"id",desc:"Id"}],a=0,o=this;return e(n,"attributes").forEach(function(e){if(a++>o.attributeLimit)return!1;var n=t(r(e).replace("_"," "));i.push({name:e,desc:n})}),i},getRecords:function(e){return this.get("store").all(e)},getRecordColumnValues:function(t){var r=this,n=0,i={id:e(t,"id")};return t.eachAttribute(function(a){if(n++>r.attributeLimit)return!1;var o=e(t,a);i[a]=o}),i},getRecordKeywords:function(t){var r=[],n=Ember.A(["id"]);return t.eachAttribute(function(e){n.push(e)}),n.forEach(function(n){r.push(e(t,n))}),r},getRecordFilterValues:function(e){return{isNew:e.get("isNew"),isModified:e.get("isDirty")&&!e.get("isNew"),isClean:!e.get("isDirty")}},getRecordColor:function(e){var t="black";return e.get("isNew")?t="green":e.get("isDirty")&&(t="blue"),t},observeRecord:function(e,t){var r=Ember.A(),n=this,i=Ember.A(["id","isNew","isDirty"]);e.eachAttribute(function(e){i.push(e)}),i.forEach(function(i){var a=function(){t(n.wrapRecord(e))};Ember.addObserver(e,i,a),r.push(function(){Ember.removeObserver(e,i,a)})});var a=function(){r.forEach(function(e){e()})};return a}})}(),function(){DS.Transform=Ember.Object.extend({serialize:Ember.required(),deserialize:Ember.required()})}(),function(){DS.BooleanTransform=DS.Transform.extend({deserialize:function(e){var t=typeof e;return"boolean"===t?e:"string"===t?null!==e.match(/^true$|^t$|^1$/i):"number"===t?1===e:!1},serialize:function(e){return Boolean(e)}})}(),function(){DS.DateTransform=DS.Transform.extend({deserialize:function(e){var t=typeof e;return"string"===t?new Date(Ember.Date.parse(e)):"number"===t?new Date(e):null===e||void 0===e?e:null},serialize:function(e){return e instanceof Date?Number(e):null}})}(),function(){var e=Ember.isEmpty;DS.NumberTransform=DS.Transform.extend({deserialize:function(t){return e(t)?null:Number(t)},serialize:function(t){return e(t)?null:Number(t)}})}(),function(){var e=Ember.isNone;DS.StringTransform=DS.Transform.extend({deserialize:function(t){return e(t)?null:String(t)},serialize:function(t){return e(t)?null:String(t)}})}(),function(){Ember.set;Ember.onLoad("Ember.Application",function(e){e.initializer({name:"store",initialize:function(e,t){t.register("store:main",t.Store||DS.Store);var r=new DS.ContainerProxy(e);r.registerDeprecations([{deprecated:"serializer:_default",valid:"serializer:-default"},{deprecated:"serializer:_rest",valid:"serializer:-rest"},{deprecated:"adapter:_rest",valid:"adapter:-rest"}]),t.register("serializer:-default",DS.JSONSerializer),t.register("serializer:-rest",DS.RESTSerializer),t.register("adapter:-rest",DS.RESTAdapter),e.lookup("store:main")}}),e.initializer({name:"transforms",before:"store",initialize:function(e,t){t.register("transform:boolean",DS.BooleanTransform),t.register("transform:date",DS.DateTransform),t.register("transform:number",DS.NumberTransform),t.register("transform:string",DS.StringTransform)}}),e.initializer({name:"data-adapter",before:"store",initialize:function(e,t){t.register("data-adapter:main",DS.DebugAdapter)}}),e.initializer({name:"injectStore",before:"store",initialize:function(e,t){t.inject("controller","store","store:main"),t.inject("route","store","store:main"),t.inject("serializer","store","store:main"),t.inject("data-adapter","store","store:main")}})})}(),function(){Ember.Date=Ember.Date||{};var e=Date.parse,t=[1,4,5,6,7,10,11];Ember.Date.parse=function(r){var n,i,a=0;if(i=/^(\d{4}|[+\-]\d{6})(?:-(\d{2})(?:-(\d{2}))?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(?:\.(\d{3}))?)?(?:(Z)|([+\-])(\d{2})(?::(\d{2}))?)?)?$/.exec(r)){for(var o,s=0;o=t[s];++s)i[o]=+i[o]||0;i[2]=(+i[2]||1)-1,i[3]=+i[3]||1,"Z"!==i[8]&&void 0!==i[9]&&(a=60*i[10]+i[11],"+"===i[9]&&(a=0-a)),n=Date.UTC(i[1],i[2],i[3],i[4],i[5]+a,i[6],i[7])}else n=e?e(r):0/0;return n},(Ember.EXTEND_PROTOTYPES===!0||Ember.EXTEND_PROTOTYPES.Date)&&(Date.parse=Ember.Date.parse)}(),function(){{var e=Ember.get;Ember.set}DS.RecordArray=Ember.ArrayProxy.extend(Ember.Evented,{type:null,content:null,isLoaded:!1,isUpdating:!1,store:null,objectAtContent:function(t){var r=e(this,"content");return r.objectAt(t)},update:function(){if(!e(this,"isUpdating")){var t=e(this,"store"),r=e(this,"type");return t.fetchAll(r,this)}},addRecord:function(t){e(this,"content").addObject(t)},removeRecord:function(t){e(this,"content").removeObject(t)},save:function(){var t="DS: RecordArray#save "+e(this,"type"),r=Ember.RSVP.all(this.invoke("save"),t).then(function(e){return Ember.A(e)},null,"DS: RecordArray#save apply Ember.NativeArray");return DS.PromiseArray.create({promise:r})}})}(),function(){var e=Ember.get;DS.FilteredRecordArray=DS.RecordArray.extend({filterFunction:null,isLoaded:!0,replace:function(){var t=e(this,"type").toString();throw new Error("The result of a client-side filter (on "+t+") is immutable.")},updateFilter:Ember.observer(function(){var t=e(this,"manager");t.updateFilter(this,e(this,"type"),e(this,"filterFunction"))},"filterFunction")})}(),function(){{var e=Ember.get;Ember.set}DS.AdapterPopulatedRecordArray=DS.RecordArray.extend({query:null,replace:function(){var t=e(this,"type").toString();throw new Error("The result of a server query (on "+t+") is immutable.")},load:function(t){var r=e(this,"store"),n=e(this,"type"),i=r.pushMany(n,t),a=r.metadataFor(n);this.setProperties({content:Ember.A(i),isLoaded:!0,meta:a}),Ember.run.once(this,"trigger","didLoad")}})}(),function(){var e=Ember.get,t=Ember.set,r=Ember.EnumerableUtils.map;DS.ManyArray=DS.RecordArray.extend({init:function(){this._super.apply(this,arguments),this._changesToSync=Ember.OrderedSet.create()},name:null,owner:null,isPolymorphic:!1,isLoaded:!1,promise:null,loadingRecordsCount:function(e){this.loadingRecordsCount=e},loadedRecord:function(){this.loadingRecordsCount--,0===this.loadingRecordsCount&&(t(this,"isLoaded",!0),this.trigger("didLoad"))},fetch:function(){var t=e(this,"content"),r=e(this,"store"),n=e(this,"owner"),i=Ember.RSVP.defer("DS: ManyArray#fetch "+e(this,"type")),a=t.filterProperty("isEmpty",!0);r.fetchMany(a,n,i)},replaceContent:function(e,t,n){n=r(n,function(e){return Ember.assert("You cannot add '"+e.constructor.typeKey+"' records to this relationship (only '"+this.type.typeKey+"' allowed)",!this.type||e instanceof this.type),e},this),this._super(e,t,n)},arrangedContentDidChange:function(){Ember.run.once(this,"fetch")},arrayContentWillChange:function(t,r){var n=e(this,"owner"),i=e(this,"name");if(!n._suspendedRelationships)for(var a=t;t+r>a;a++){var o=e(this,"content").objectAt(a),s=DS.RelationshipChange.createChange(n,o,e(this,"store"),{parentType:n.constructor,changeType:"remove",kind:"hasMany",key:i});this._changesToSync.add(s)}return this._super.apply(this,arguments)},arrayContentDidChange:function(t,r,n){this._super.apply(this,arguments);var i=e(this,"owner"),a=e(this,"name"),o=e(this,"store");if(!i._suspendedRelationships){for(var s=t;t+n>s;s++){var d=e(this,"content").objectAt(s),u=DS.RelationshipChange.createChange(i,d,o,{parentType:i.constructor,changeType:"add",kind:"hasMany",key:a});u.hasManyName=a,this._changesToSync.add(u)}this._changesToSync.forEach(function(e){e.sync()}),this._changesToSync.clear()}},createRecord:function(t){var r,n=e(this,"owner"),i=e(n,"store"),a=e(this,"type");return Ember.assert("You cannot add '"+a.typeKey+"' records to this polymorphic relationship.",!e(this,"isPolymorphic")),r=i.createRecord.call(i,a,t),this.pushObject(r),r}})}(),function(){function e(e,r,a,o){return r.eachRelationship(function(r,s){if(a.links&&a.links[r])return o&&s.options.async&&(o._relationships[r]=null),void 0;var d=s.kind,u=a[r];null!=u&&("belongsTo"===d?t(e,a,r,s,u):"hasMany"===d&&(n(e,a,r,s,u),i(o,r,u)))}),a}function t(e,t,n,i,a){if(!(R(a)||a instanceof DS.Model)){var o;"number"==typeof a||"string"==typeof a?(o=r(i,n,t),t[n]=e.recordForId(o,a)):"object"==typeof a&&(t[n]=e.recordForId(a.type,a.id))}}function r(e,t,r){return e.options.polymorphic?r[t+"Type"]:e.type}function n(e,r,n,i,a){for(var o=0,s=a.length;s>o;o++)t(e,a,o,i,a[o])}function i(e,t,r){e&&r.pushObjects(e.get(t).filterBy("isNew"))}function a(e){return DS.PromiseObject.create({promise:e})}function o(e){return DS.PromiseArray.create({promise:e})}function s(e){return e&&"function"==typeof e.then}function d(e,t,r){return e.lookup("serializer:"+t)||e.lookup("serializer:application")||e.lookup("serializer:"+r)||e.lookup("serializer:-default")}function u(e){return e.lookup("serializer:application")||e.lookup("serializer:-default")}function c(e,t){var r=e.serializer,n=e.defaultSerializer,i=e.container;return i&&void 0===r&&(r=d(i,t.typeKey,n)),(null===r||void 0===r)&&(r={extract:function(e,t,r){return r}}),r}function l(e,t,r,n){var i=e.find(t,r,n),a=c(e,r);return A(i,"DS: Handle Adapter#find of "+r+" with id: "+n).then(function(e){return Ember.assert("You made a request for a "+r.typeKey+" with id "+n+", but the adapter's response did not have any data",e),e=a.extract(t,r,e,n,"find"),t.push(r,e)},function(e){var i=t.getById(r,n);throw i.notFound(),e},"DS: Extract payload of '"+r+"'")}function h(e,t,r,n,i){var a=e.findMany(t,r,n,i),o=c(e,r);return A(a,"DS: Handle Adapter#findMany of "+r).then(function(e){e=o.extract(t,r,e,null,"findMany"),Ember.assert("The response from a findMany must be an Array, not "+Ember.inspect(e),"array"===Ember.typeOf(e)),t.pushMany(r,e)},null,"DS: Extract payload of "+r)}function p(e,t,r,n,i){var a=e.findHasMany(t,r,n,i),o=c(e,i.type);return A(a,"DS: Handle Adapter#findHasMany of "+r+" : "+i.type).then(function(e){e=o.extract(t,i.type,e,null,"findHasMany"),Ember.assert("The response from a findHasMany must be an Array, not "+Ember.inspect(e),"array"===Ember.typeOf(e));var n=t.pushMany(i.type,e);r.updateHasMany(i.key,n)},null,"DS: Extract payload of "+r+" : hasMany "+i.type)}function f(e,t,r,n,i){var a=e.findBelongsTo(t,r,n,i),o=c(e,i.type);return A(a,"DS: Handle Adapter#findBelongsTo of "+r+" : "+i.type).then(function(e){e=o.extract(t,i.type,e,null,"findBelongsTo");var r=t.push(i.type,e);return r.updateBelongsTo(i.key,r),r},null,"DS: Extract payload of "+r+" : "+i.type)}function m(e,t,r,n){var i=e.findAll(t,r,n),a=c(e,r);return A(i,"DS: Handle Adapter#findAll of "+r).then(function(e){return e=a.extract(t,r,e,null,"findAll"),Ember.assert("The response from a findAll must be an Array, not "+Ember.inspect(e),"array"===Ember.typeOf(e)),t.pushMany(r,e),t.didUpdateAll(r),t.all(r)},null,"DS: Extract payload of findAll "+r)}function y(e,t,r,n,i){var a=e.findQuery(t,r,n,i),o=c(e,r);return A(a,"DS: Handle Adapter#findQuery of "+r).then(function(e){return e=o.extract(t,r,e,null,"findQuery"),Ember.assert("The response from a findQuery must be an Array, not "+Ember.inspect(e),"array"===Ember.typeOf(e)),i.load(e),i},null,"DS: Extract payload of findQuery "+r)}function b(e,t,r,n){var i=n.constructor,a=e[r](t,i,n),o=c(e,i);return Ember.assert("Your adapter's '"+r+"' method must return a promise, but it returned "+a,s(a)),a.then(function(e){return e&&(e=o.extract(t,i,e,g(n,"id"),r)),t.didSaveRecord(n,e),n},function(e){throw e instanceof DS.InvalidError?t.recordWasInvalid(n,e.errors):t.recordWasError(n,e),e},"DS: Extract and notify about "+r+" completion of "+n)}var g=Ember.get,v=Ember.set,E=Ember.run.once,R=Ember.isNone,S=Ember.EnumerableUtils.forEach,D=Ember.EnumerableUtils.indexOf,T=Ember.EnumerableUtils.map,A=Ember.RSVP.resolve,F=Ember.copy,C=function(e){return null==e?null:e+""};DS.Store=Ember.Object.extend({init:function(){this.typeMaps={},this.recordArrayManager=DS.RecordArrayManager.create({store:this}),this._relationshipChanges={},this._pendingSave=[]},adapter:"-rest",serialize:function(e,t){return this.serializerFor(e.constructor.typeKey).serialize(e,t)},defaultAdapter:Ember.computed("adapter",function(){var e=g(this,"adapter");return Ember.assert("You tried to set `adapter` property to an instance of `DS.Adapter`, where it should be a name or a factory",!(e instanceof DS.Adapter)),"string"==typeof e&&(e=this.container.lookup("adapter:"+e)||this.container.lookup("adapter:application")||this.container.lookup("adapter:-rest")),DS.Adapter.detect(e)&&(e=e.create({container:this.container})),e}),createRecord:function(e,t){e=this.modelFor(e),t=F(t)||{},R(t.id)&&(t.id=this._generateId(e)),t.id=C(t.id);var r=this.buildRecord(e,t.id);return r.loadedData(),r.setProperties(t),r},_generateId:function(e){var t=this.adapterFor(e);return t&&t.generateIdForRecord?t.generateIdForRecord(this):null},deleteRecord:function(e){e.deleteRecord()},unloadRecord:function(e){e.unloadRecord()},find:function(e,t){return void 0===t?this.findAll(e):"object"===Ember.typeOf(t)?this.findQuery(e,t):this.findById(e,C(t))},findById:function(e,t){e=this.modelFor(e);var r=this.recordForId(e,t),n=this.fetchRecord(r)||A(r,"DS: Store#findById "+e+" with id: "+t);return a(n)},findByIds:function(e,t){var r=this;return o(Ember.RSVP.all(T(t,function(t){return r.findById(e,t)})).then(Ember.A,null,"DS: Store#findByIds of "+e+" complete"))},fetchRecord:function(e){if(R(e))return null;if(e._loadingPromise)return e._loadingPromise;if(!g(e,"isEmpty"))return null;var t=e.constructor,r=g(e,"id"),n=this.adapterFor(t);Ember.assert("You tried to find a record but you have no adapter (for "+t+")",n),Ember.assert("You tried to find a record but your adapter (for "+t+") does not implement 'find'",n.find);var i=l(n,this,t,r);return e.loadingData(i),i},getById:function(e,t){return this.hasRecordForId(e,t)?this.recordForId(e,t):null},reloadRecord:function(e){var t=e.constructor,r=this.adapterFor(t),n=g(e,"id");return Ember.assert("You cannot reload a record without an ID",n),Ember.assert("You tried to reload a record but you have no adapter (for "+t+")",r),Ember.assert("You tried to reload a record but your adapter does not implement `find`",r.find),l(r,this,t,n)},fetchMany:function(e,t,r){if(e.length){var n=Ember.MapWithDefault.create({defaultValue:function(){return Ember.A()}});S(e,function(e){n.get(e.constructor).push(e)}),S(n,function(e,n){var i=n.mapProperty("id"),a=this.adapterFor(e);Ember.assert("You tried to load many records but you have no adapter (for "+e+")",a),Ember.assert("You tried to load many records but your adapter does not implement `findMany`",a.findMany),r.resolve(h(a,this,e,i,t))},this)}},hasRecordForId:function(e,t){return t=C(t),e=this.modelFor(e),!!this.typeMapFor(e).idToRecord[t]},recordForId:function(e,t){e=this.modelFor(e),t=C(t);var r=this.typeMapFor(e).idToRecord[t];return r||(r=this.buildRecord(e,t)),r},findMany:function(e,t,r,n){r=this.modelFor(r),t=Ember.A(t);var i=t.filterProperty("isEmpty",!0),a=this.recordArrayManager.createManyArray(r,t);return S(i,function(e){e.loadingData()}),a.loadingRecordsCount=i.length,i.length?(S(i,function(e){this.recordArrayManager.registerWaitingRecordArray(e,a)},this),this.fetchMany(i,e,n)):(n&&n.resolve(),a.set("isLoaded",!0),Ember.run.once(a,"trigger","didLoad")),a},findHasMany:function(e,t,r,n){var i=this.adapterFor(e.constructor);Ember.assert("You tried to load a hasMany relationship but you have no adapter (for "+e.constructor+")",i),Ember.assert("You tried to load a hasMany relationship from a specified `link` in the original payload but your adapter does not implement `findHasMany`",i.findHasMany);var a=this.recordArrayManager.createManyArray(r.type,Ember.A([]));return n.resolve(p(i,this,e,t,r)),a},findBelongsTo:function(e,t,r,n){var i=this.adapterFor(e.constructor);Ember.assert("You tried to load a belongsTo relationship but you have no adapter (for "+e.constructor+")",i),Ember.assert("You tried to load a belongsTo relationship from a specified `link` in the original payload but your adapter does not implement `findBelongsTo`",i.findBelongsTo),n.resolve(f(i,this,e,t,r))},findQuery:function(e,t){e=this.modelFor(e);var r=this.recordArrayManager.createAdapterPopulatedRecordArray(e,t),n=this.adapterFor(e),i="DS: Store#findQuery "+e,a=Ember.RSVP.defer(i);return Ember.assert("You tried to load a query but you have no adapter (for "+e+")",n),Ember.assert("You tried to load a query but your adapter does not implement `findQuery`",n.findQuery),a.resolve(y(n,this,e,t,r)),o(a.promise)},findAll:function(e){return e=this.modelFor(e),this.fetchAll(e,this.all(e))},fetchAll:function(e,t){var r=this.adapterFor(e),n=this.typeMapFor(e).metadata.since;return v(t,"isUpdating",!0),Ember.assert("You tried to load all records but you have no adapter (for "+e+")",r),Ember.assert("You tried to load all records but your adapter does not implement `findAll`",r.findAll),o(m(r,this,e,n))},didUpdateAll:function(e){var t=this.typeMapFor(e).findAllCache;v(t,"isUpdating",!1)},all:function(e){e=this.modelFor(e);var t=this.typeMapFor(e),r=t.findAllCache;if(r)return r;var n=this.recordArrayManager.createRecordArray(e);return t.findAllCache=n,n},unloadAll:function(e){e=this.modelFor(e);for(var t,r=this.typeMapFor(e),n=r.records.splice(0);t=n.pop();)t.unloadRecord();r.findAllCache=null},filter:function(e,t,r){var n;3===arguments.length?n=this.findQuery(e,t):2===arguments.length&&(r=t),e=this.modelFor(e);var i=this.recordArrayManager.createFilteredRecordArray(e,r);return n=n||A(i),o(n.then(function(){return i},null,"DS: Store#filter of "+e))},recordIsLoaded:function(e,t){return this.hasRecordForId(e,t)?!g(this.recordForId(e,t),"isEmpty"):!1},metadataFor:function(e){return e=this.modelFor(e),this.typeMapFor(e).metadata},dataWasUpdated:function(e,t){this.recordArrayManager.recordDidChange(t)},scheduleSave:function(e,t){e.adapterWillCommit(),this._pendingSave.push([e,t]),E(this,"flushPendingSave")},flushPendingSave:function(){var e=this._pendingSave.slice();this._pendingSave=[],S(e,function(e){var t,r=e[0],n=e[1],i=this.adapterFor(r.constructor);t=g(r,"isNew")?"createRecord":g(r,"isDeleted")?"deleteRecord":"updateRecord",n.resolve(b(i,this,t,r))},this)},didSaveRecord:function(t,r){r&&(r=e(this,t.constructor,r,t),this.updateId(t,r)),t.adapterDidCommit(r)},recordWasInvalid:function(e,t){e.adapterDidInvalidate(t)},recordWasError:function(e){e.adapterDidError()},updateId:function(e,t){var r=g(e,"id"),n=C(t.id);Ember.assert("An adapter cannot assign a new id to a record that already has an id. "+e+" had id: "+r+" and you tried to update it with "+n+". This likely happened because your server returned data in response to a find or update that had a different id than the one you sent.",null===r||n===r),this.typeMapFor(e.constructor).idToRecord[n]=e,v(e,"id",n)},typeMapFor:function(e){var t,r=g(this,"typeMaps"),n=Ember.guidFor(e);return(t=r[n])?t:(t={idToRecord:{},records:[],metadata:{}},r[n]=t,t)},_load:function(e,t,r){var n=C(t.id),i=this.recordForId(e,n);return i.setupData(t,r),this.recordArrayManager.recordDidChange(i),i},modelFor:function(e){var t;if("string"==typeof e){var r=this.container.normalize("model:"+e);if(t=this.container.lookupFactory(r),!t)throw new Ember.Error("No model was found for '"+e+"'");t.typeKey=r.split(":",2)[1]}else t=e;return t.store=this,t},push:function(t,r,n){return Ember.assert("You must include an `id` in a hash passed to `push`",null!=r.id),t=this.modelFor(t),r=e(this,t,r),this._load(t,r,n),this.recordForId(t,r.id)},pushPayload:function(e,t){var r;t?r=this.serializerFor(e):(t=e,r=u(this.container),Ember.assert("You cannot use `store#pushPayload` without a type unless your default serializer defines `pushPayload`",r.pushPayload)),r.pushPayload(this,t)},update:function(e,t){return Ember.assert("You must include an `id` in a hash passed to `update`",null!=t.id),this.push(e,t,!0)},pushMany:function(e,t){return T(t,function(t){return this.push(e,t)},this)},metaForType:function(e,t){e=this.modelFor(e),Ember.merge(this.typeMapFor(e).metadata,t)},buildRecord:function(e,t,r){var n=this.typeMapFor(e),i=n.idToRecord;Ember.assert("The id "+t+" has already been used with another record of type "+e.toString()+".",!t||!i[t]);var a=e._create({id:t,store:this,container:this.container});return r&&a.setupData(r),t&&(i[t]=a),n.records.push(a),a},dematerializeRecord:function(e){var t=e.constructor,r=this.typeMapFor(t),n=g(e,"id");e.updateRecordArrays(),n&&delete r.idToRecord[n];var i=D(r.records,e);r.records.splice(i,1)},addRelationshipChangeFor:function(e,t,r,n,i){var a=e.clientId,o=r?r:r,s=t+n,d=this._relationshipChanges;a in d||(d[a]={}),o in d[a]||(d[a][o]={}),s in d[a][o]||(d[a][o][s]={}),d[a][o][s][i.changeType]=i},removeRelationshipChangeFor:function(e,t,r,n,i){var a=e.clientId,o=r?r.clientId:r,s=this._relationshipChanges,d=t+n;a in s&&o in s[a]&&d in s[a][o]&&delete s[a][o][d][i]},relationshipChangePairsFor:function(e){var t=[];if(!e)return t;var r=this._relationshipChanges[e.clientId];for(var n in r)if(r.hasOwnProperty(n))for(var i in r[n])r[n].hasOwnProperty(i)&&t.push(r[n][i]);return t},adapterFor:function(e){var t,r=this.container;return r&&(t=r.lookup("adapter:"+e.typeKey)||r.lookup("adapter:application")),t||g(this,"defaultAdapter")},serializerFor:function(e){e=this.modelFor(e);var t=this.adapterFor(e);return d(this.container,e.typeKey,t&&t.defaultSerializer)}}),DS.PromiseArray=Ember.ArrayProxy.extend(Ember.PromiseProxyMixin),DS.PromiseObject=Ember.ObjectProxy.extend(Ember.PromiseProxyMixin)}(),function(){function e(t){var r,n={};for(var i in t)r=t[i],n[i]=r&&"object"==typeof r?e(r):r;return n}function t(e,t){for(var r in t)e[r]=t[r];return e}function r(r){var n=e(s);return t(n,r)}function n(e,r,i){e=t(r?Ember.create(r):{},e),e.parentState=r,e.stateName=i;for(var a in e)e.hasOwnProperty(a)&&"parentState"!==a&&"stateName"!==a&&"object"==typeof e[a]&&(e[a]=n(e[a],e,i+"."+a));return e}var i=Ember.get,a=Ember.set,o=function(e,t){t.value===t.originalValue?(delete e._attributes[t.name],e.send("propertyWasReset",t.name)):t.value!==t.oldValue&&e.send("becomeDirty"),e.updateRecordArraysLater()},s={initialState:"uncommitted",isDirty:!0,uncommitted:{didSetProperty:o,propertyWasReset:function(e){var t=!1;for(var r in e._attributes){t=!0;break}t||e.send("rolledBack")},pushedData:Ember.K,becomeDirty:Ember.K,willCommit:function(e){e.transitionTo("inFlight")},reloadRecord:function(e,t){t(i(e,"store").reloadRecord(e))},rolledBack:function(e){e.transitionTo("loaded.saved")},becameInvalid:function(e){e.transitionTo("invalid")},rollback:function(e){e.rollback()}},inFlight:{isSaving:!0,didSetProperty:o,becomeDirty:Ember.K,pushedData:Ember.K,willCommit:Ember.K,didCommit:function(e){var t=i(this,"dirtyType");e.transitionTo("saved"),e.send("invokeLifecycleCallbacks",t)},becameInvalid:function(e){e.transitionTo("invalid"),e.send("invokeLifecycleCallbacks")},becameError:function(e){e.transitionTo("uncommitted"),e.triggerLater("becameError",e)}},invalid:{isValid:!1,deleteRecord:function(e){e.transitionTo("deleted.uncommitted"),e.clearRelationships()},didSetProperty:function(e,t){i(e,"errors").remove(t.name),o(e,t)},becomeDirty:Ember.K,rolledBack:function(e){i(e,"errors").clear()},becameValid:function(e){e.transitionTo("uncommitted")},invokeLifecycleCallbacks:function(e){e.triggerLater("becameInvalid",e)}}},d=r({dirtyType:"created",isNew:!0});d.uncommitted.rolledBack=function(e){e.transitionTo("deleted.saved")};var u=r({dirtyType:"updated"});d.uncommitted.deleteRecord=function(e){e.clearRelationships(),e.transitionTo("deleted.saved")},d.uncommitted.rollback=function(e){s.uncommitted.rollback.apply(this,arguments),e.transitionTo("deleted.saved")},d.uncommitted.propertyWasReset=Ember.K,u.uncommitted.deleteRecord=function(e){e.transitionTo("deleted.uncommitted"),e.clearRelationships()};var c={isEmpty:!1,isLoading:!1,isLoaded:!1,isDirty:!1,isSaving:!1,isDeleted:!1,isNew:!1,isValid:!0,rolledBack:Ember.K,propertyWasReset:Ember.K,empty:{isEmpty:!0,loadingData:function(e,t){e._loadingPromise=t,e.transitionTo("loading")},loadedData:function(e){e.transitionTo("loaded.created.uncommitted"),e.suspendRelationshipObservers(function(){e.notifyPropertyChange("data")})},pushedData:function(e){e.transitionTo("loaded.saved"),e.triggerLater("didLoad")}},loading:{isLoading:!0,exit:function(e){e._loadingPromise=null},pushedData:function(e){e.transitionTo("loaded.saved"),e.triggerLater("didLoad"),a(e,"isError",!1)},becameError:function(e){e.triggerLater("becameError",e)},notFound:function(e){e.transitionTo("empty")}},loaded:{initialState:"saved",isLoaded:!0,saved:{setup:function(e){var t=e._attributes,r=!1;for(var n in t)if(t.hasOwnProperty(n)){r=!0;break}r&&e.adapterDidDirty()},didSetProperty:o,pushedData:Ember.K,becomeDirty:function(e){e.transitionTo("updated.uncommitted")},willCommit:function(e){e.transitionTo("updated.inFlight")},reloadRecord:function(e,t){t(i(e,"store").reloadRecord(e))},deleteRecord:function(e){e.transitionTo("deleted.uncommitted"),e.clearRelationships()},unloadRecord:function(e){e.clearRelationships(),e.transitionTo("deleted.saved")},didCommit:function(e){e.send("invokeLifecycleCallbacks",i(e,"lastDirtyType"))},notFound:Ember.K},created:d,updated:u},deleted:{initialState:"uncommitted",dirtyType:"deleted",isDeleted:!0,isLoaded:!0,isDirty:!0,setup:function(e){e.updateRecordArrays()},uncommitted:{willCommit:function(e){e.transitionTo("inFlight")},rollback:function(e){e.rollback()},becomeDirty:Ember.K,deleteRecord:Ember.K,rolledBack:function(e){e.transitionTo("loaded.saved")}},inFlight:{isSaving:!0,willCommit:Ember.K,didCommit:function(e){e.transitionTo("saved"),e.send("invokeLifecycleCallbacks")},becameError:function(e){e.transitionTo("uncommitted"),e.triggerLater("becameError",e)}},saved:{isDirty:!1,setup:function(e){var t=i(e,"store");t.dematerializeRecord(e)},invokeLifecycleCallbacks:function(e){e.triggerLater("didDelete",e),e.triggerLater("didCommit",e)}}},invokeLifecycleCallbacks:function(e,t){"created"===t?e.triggerLater("didCreate",e):e.triggerLater("didUpdate",e),e.triggerLater("didCommit",e)}};c=n(c,null,"root"),DS.RootState=c}(),function(){var e=Ember.get,t=Ember.isEmpty;DS.Errors=Ember.Object.extend(Ember.Enumerable,Ember.Evented,{registerHandlers:function(e,t,r){this.on("becameInvalid",e,t),this.on("becameValid",e,r)},errorsByAttributeName:Ember.reduceComputed("content",{initialValue:function(){return Ember.MapWithDefault.create({defaultValue:function(){return Ember.A()}})},addedItem:function(e,t){return e.get(t.attribute).pushObject(t),e},removedItem:function(e,t){return e.get(t.attribute).removeObject(t),e}}),errorsFor:function(t){return e(this,"errorsByAttributeName").get(t)},messages:Ember.computed.mapBy("content","message"),content:Ember.computed(function(){return Ember.A()}),unknownProperty:function(e){var r=this.errorsFor(e);return t(r)?null:r},nextObject:function(t){return e(this,"content").objectAt(t)},length:Ember.computed.oneWay("content.length").readOnly(),isEmpty:Ember.computed.not("length").readOnly(),add:function(t,r){var n=e(this,"isEmpty");r=this._findOrCreateMessages(t,r),e(this,"content").addObjects(r),this.notifyPropertyChange(t),this.enumerableContentDidChange(),n&&!e(this,"isEmpty")&&this.trigger("becameInvalid")},_findOrCreateMessages:function(e,t){var r=this.errorsFor(e);return Ember.makeArray(t).map(function(t){return r.findBy("message",t)||{attribute:e,message:t}})},remove:function(t){if(!e(this,"isEmpty")){var r=e(this,"content").rejectBy("attribute",t);e(this,"content").setObjects(r),this.notifyPropertyChange(t),this.enumerableContentDidChange(),e(this,"isEmpty")&&this.trigger("becameValid")}},clear:function(){e(this,"isEmpty")||(e(this,"content").clear(),this.enumerableContentDidChange(),this.trigger("becameValid"))},has:function(e){return!t(this.errorsFor(e))}})}(),function(){var e=Ember.get,t=Ember.set,r=Ember.merge,n=Ember.computed("currentState",function(t){return e(e(this,"currentState"),t)}).readOnly();DS.Model=Ember.Object.extend(Ember.Evented,{isEmpty:n,isLoading:n,isLoaded:n,isDirty:n,isSaving:n,isDeleted:n,isNew:n,isValid:n,dirtyType:n,isError:!1,isReloading:!1,clientId:null,id:null,transaction:null,currentState:null,errors:null,serialize:function(t){var r=e(this,"store");return r.serialize(this,t)},toJSON:function(e){var t=DS.JSONSerializer.create({container:this.container});return t.serialize(this,e)},didLoad:Ember.K,didUpdate:Ember.K,didCreate:Ember.K,didDelete:Ember.K,becameInvalid:Ember.K,becameError:Ember.K,data:Ember.computed(function(){return this._data=this._data||{},this._data}).property(),_data:null,init:function(){t(this,"currentState",DS.RootState.empty);var e=DS.Errors.create();e.registerHandlers(this,function(){this.send("becameInvalid")},function(){this.send("becameValid")}),t(this,"errors",e),this._super(),this._setup()},_setup:function(){this._changesToSync={},this._deferredTriggers=[],this._data={},this._attributes={},this._inFlightAttributes={},this._relationships={}},send:function(t,r){var n=e(this,"currentState");return n[t]||this._unhandledEvent(n,t,r),n[t](this,r)},transitionTo:function(r){var n=r.split(".",1),i=e(this,"currentState"),a=i;do a.exit&&a.exit(this),a=a.parentState;while(!a.hasOwnProperty(n));var o,s,d=r.split("."),u=[],c=[];for(o=0,s=d.length;s>o;o++)a=a[d[o]],a.enter&&c.push(a),a.setup&&u.push(a);for(o=0,s=c.length;s>o;o++)c[o].enter(this);for(t(this,"currentState",a),o=0,s=u.length;s>o;o++)u[o].setup(this);this.updateRecordArraysLater()},_unhandledEvent:function(e,t,r){var n="Attempted to handle event `"+t+"` ";throw n+="on "+String(this)+" while in state ",n+=e.stateName+". ",void 0!==r&&(n+="Called with "+Ember.inspect(r)+"."),new Ember.Error(n)
        },withTransaction:function(t){var r=e(this,"transaction");r&&t(r)},loadingData:function(e){this.send("loadingData",e)},loadedData:function(){this.send("loadedData")},notFound:function(){this.send("notFound")},pushedData:function(){this.send("pushedData")},deleteRecord:function(){this.send("deleteRecord")},destroyRecord:function(){return this.deleteRecord(),this.save()},unloadRecord:function(){Ember.assert("You can only unload a loaded, non-dirty record.",!e(this,"isDirty")),this.send("unloadRecord")},clearRelationships:function(){this.eachRelationship(function(e,r){if("belongsTo"===r.kind)t(this,e,null);else if("hasMany"===r.kind){var n=this._relationships[r.name];n&&n.clear()}},this)},updateRecordArrays:function(){this._updatingRecordArraysLater=!1,e(this,"store").dataWasUpdated(this.constructor,this)},changedAttributes:function(){var t,r=e(this,"_data"),n=e(this,"_attributes"),i={};for(t in n)i[t]=[r[t],n[t]];return i},adapterWillCommit:function(){this.send("willCommit")},adapterDidCommit:function(e){t(this,"isError",!1),e?this._data=e:Ember.mixin(this._data,this._inFlightAttributes),this._inFlightAttributes={},this.send("didCommit"),this.updateRecordArraysLater(),e&&this.suspendRelationshipObservers(function(){this.notifyPropertyChange("data")})},adapterDidDirty:function(){this.send("becomeDirty"),this.updateRecordArraysLater()},dataDidChange:Ember.observer(function(){this.reloadHasManys()},"data"),reloadHasManys:function(){var t=e(this.constructor,"relationshipsByName");this.updateRecordArraysLater(),t.forEach(function(e,t){this._data.links&&this._data.links[e]||"hasMany"===t.kind&&this.hasManyDidChange(t.key)},this)},hasManyDidChange:function(e){var r=this._relationships[e];if(r){var n=this._data[e]||[];t(r,"content",Ember.A(n)),t(r,"isLoaded",!0),r.trigger("didLoad")}},updateRecordArraysLater:function(){this._updatingRecordArraysLater||(this._updatingRecordArraysLater=!0,Ember.run.schedule("actions",this,this.updateRecordArrays))},setupData:function(e,t){t?Ember.merge(this._data,e):this._data=e;var r=this._relationships;this.eachRelationship(function(t,n){e.links&&e.links[t]||n.options.async&&(r[t]=null)}),e&&this.pushedData(),this.suspendRelationshipObservers(function(){this.notifyPropertyChange("data")})},materializeId:function(e){t(this,"id",e)},materializeAttributes:function(e){Ember.assert("Must pass a hash of attributes to materializeAttributes",!!e),r(this._data,e)},materializeAttribute:function(e,t){this._data[e]=t},updateHasMany:function(e,t){this._data[e]=t,this.hasManyDidChange(e)},updateBelongsTo:function(e,t){this._data[e]=t},rollback:function(){this._attributes={},e(this,"isError")&&(this._inFlightAttributes={},t(this,"isError",!1)),e(this,"isValid")||(this._inFlightAttributes={}),this.send("rolledBack"),this.suspendRelationshipObservers(function(){this.notifyPropertyChange("data")})},toStringExtension:function(){return e(this,"id")},suspendRelationshipObservers:function(t,r){var n=e(this.constructor,"relationshipNames").belongsTo,i=this;try{this._suspendedRelationships=!0,Ember._suspendObservers(i,n,null,"belongsToDidChange",function(){Ember._suspendBeforeObservers(i,n,null,"belongsToWillChange",function(){t.call(r||i)})})}finally{this._suspendedRelationships=!1}},save:function(){var e="DS: Model#save "+this,t=Ember.RSVP.defer(e);return this.get("store").scheduleSave(this,t),this._inFlightAttributes=this._attributes,this._attributes={},DS.PromiseObject.create({promise:t.promise})},reload:function(){t(this,"isReloading",!0);var e=this,r="DS: Model#reload of "+this,n=new Ember.RSVP.Promise(function(t){e.send("reloadRecord",t)},r).then(function(){return e.set("isReloading",!1),e.set("isError",!1),e},function(t){throw e.set("isError",!0),t},"DS: Model#reload complete, update flags");return DS.PromiseObject.create({promise:n})},adapterDidUpdateAttribute:function(e,t){void 0!==t?(this._data[e]=t,this.notifyPropertyChange(e)):this._data[e]=this._inFlightAttributes[e],this.updateRecordArraysLater()},adapterDidInvalidate:function(t){function r(e){t[e]&&n.add(e,t[e])}var n=e(this,"errors");this.eachAttribute(r),this.eachRelationship(r)},adapterDidError:function(){this.send("becameError"),t(this,"isError",!0)},trigger:function(e){Ember.tryInvoke(this,e,[].slice.call(arguments,1)),this._super.apply(this,arguments)},triggerLater:function(){1===this._deferredTriggers.push(arguments)&&Ember.run.schedule("actions",this,"_triggerDeferredTriggers")},_triggerDeferredTriggers:function(){for(var e=0,t=this._deferredTriggers.length;t>e;e++)this.trigger.apply(this,this._deferredTriggers[e]);this._deferredTriggers.length=0}}),DS.Model.reopenClass({_create:DS.Model.create,create:function(){throw new Ember.Error("You should not call `create` on a model. Instead, call `store.createRecord` with the attributes you would like to set.")}})}(),function(){function e(e,t){return"function"==typeof t.defaultValue?t.defaultValue():t.defaultValue}function t(e,t){return e._attributes.hasOwnProperty(t)||e._inFlightAttributes.hasOwnProperty(t)||e._data.hasOwnProperty(t)}function r(e,t){return e._attributes.hasOwnProperty(t)?e._attributes[t]:e._inFlightAttributes.hasOwnProperty(t)?e._inFlightAttributes[t]:e._data[t]}var n=Ember.get;DS.Model.reopenClass({attributes:Ember.computed(function(){var e=Ember.Map.create();return this.eachComputedProperty(function(t,r){r.isAttribute&&(Ember.assert("You may not set `id` as an attribute on your model. Please remove any lines that look like: `id: DS.attr('<type>')` from "+this.toString(),"id"!==t),r.name=t,e.set(t,r))}),e}),transformedAttributes:Ember.computed(function(){var e=Ember.Map.create();return this.eachAttribute(function(t,r){r.type&&e.set(t,r.type)}),e}),eachAttribute:function(e,t){n(this,"attributes").forEach(function(r,n){e.call(t,r,n)},t)},eachTransformedAttribute:function(e,t){n(this,"transformedAttributes").forEach(function(r,n){e.call(t,r,n)})}}),DS.Model.reopen({eachAttribute:function(e,t){this.constructor.eachAttribute(e,t)}}),DS.attr=function(n,i){i=i||{};var a={type:n,isAttribute:!0,options:i};return Ember.computed(function(n,a){if(arguments.length>1){Ember.assert("You may not set `id` as an attribute on your model. Please remove any lines that look like: `id: DS.attr('<type>')` from "+this.constructor.toString(),"id"!==n);var o=this._attributes[n]||this._inFlightAttributes[n]||this._data[n];return this.send("didSetProperty",{name:n,oldValue:o,originalValue:this._data[n],value:a}),this._attributes[n]=a,a}return t(this,n)?r(this,n):e(this,i,n)}).property("data").meta(a)}}(),function(){var e=DS.AttributeChange=function(e){this.record=e.record,this.store=e.store,this.name=e.name,this.value=e.value,this.oldValue=e.oldValue};e.createChange=function(t){return new e(t)},e.prototype={sync:function(){this.value!==this.oldValue&&(this.record.send("becomeDirty"),this.record.updateRecordArraysLater()),this.destroy()},destroy:function(){delete this.record._changesToSync[this.name]}}}(),function(){function e(e){return"object"==typeof e&&(!e.then||"function"!=typeof e.then)}var t=Ember.get,r=Ember.set,n=Ember.EnumerableUtils.forEach;DS.RelationshipChange=function(e){this.parentRecord=e.parentRecord,this.childRecord=e.childRecord,this.firstRecord=e.firstRecord,this.firstRecordKind=e.firstRecordKind,this.firstRecordName=e.firstRecordName,this.secondRecord=e.secondRecord,this.secondRecordKind=e.secondRecordKind,this.secondRecordName=e.secondRecordName,this.changeType=e.changeType,this.store=e.store,this.committed={}},DS.RelationshipChangeAdd=function(e){DS.RelationshipChange.call(this,e)},DS.RelationshipChangeRemove=function(e){DS.RelationshipChange.call(this,e)},DS.RelationshipChange.create=function(e){return new DS.RelationshipChange(e)},DS.RelationshipChangeAdd.create=function(e){return new DS.RelationshipChangeAdd(e)},DS.RelationshipChangeRemove.create=function(e){return new DS.RelationshipChangeRemove(e)},DS.OneToManyChange={},DS.OneToNoneChange={},DS.ManyToNoneChange={},DS.OneToOneChange={},DS.ManyToManyChange={},DS.RelationshipChange._createChange=function(e){return"add"===e.changeType?DS.RelationshipChangeAdd.create(e):"remove"===e.changeType?DS.RelationshipChangeRemove.create(e):void 0},DS.RelationshipChange.determineRelationshipType=function(e,t){var r,n,i=t.key,a=t.kind,o=e.inverseFor(i);return o&&(r=o.name,n=o.kind),o?"belongsTo"===n?"belongsTo"===a?"oneToOne":"manyToOne":"belongsTo"===a?"oneToMany":"manyToMany":"belongsTo"===a?"oneToNone":"manyToNone"},DS.RelationshipChange.createChange=function(e,t,r,n){var i,a=e.constructor;return i=DS.RelationshipChange.determineRelationshipType(a,n),"oneToMany"===i?DS.OneToManyChange.createChange(e,t,r,n):"manyToOne"===i?DS.OneToManyChange.createChange(t,e,r,n):"oneToNone"===i?DS.OneToNoneChange.createChange(e,t,r,n):"manyToNone"===i?DS.ManyToNoneChange.createChange(e,t,r,n):"oneToOne"===i?DS.OneToOneChange.createChange(e,t,r,n):"manyToMany"===i?DS.ManyToManyChange.createChange(e,t,r,n):void 0},DS.OneToNoneChange.createChange=function(e,t,r,n){var i=n.key,a=DS.RelationshipChange._createChange({parentRecord:t,childRecord:e,firstRecord:e,store:r,changeType:n.changeType,firstRecordName:i,firstRecordKind:"belongsTo"});return r.addRelationshipChangeFor(e,i,t,null,a),a},DS.ManyToNoneChange.createChange=function(e,t,r,n){var i=n.key,a=DS.RelationshipChange._createChange({parentRecord:e,childRecord:t,secondRecord:e,store:r,changeType:n.changeType,secondRecordName:n.key,secondRecordKind:"hasMany"});return r.addRelationshipChangeFor(e,i,t,null,a),a},DS.ManyToManyChange.createChange=function(e,t,r,n){var i=n.key,a=DS.RelationshipChange._createChange({parentRecord:t,childRecord:e,firstRecord:e,secondRecord:t,firstRecordKind:"hasMany",secondRecordKind:"hasMany",store:r,changeType:n.changeType,firstRecordName:i});return r.addRelationshipChangeFor(e,i,t,null,a),a},DS.OneToOneChange.createChange=function(e,t,r,n){var i;n.parentType?i=n.parentType.inverseFor(n.key).name:n.key?i=n.key:Ember.assert("You must pass either a parentType or belongsToName option to OneToManyChange.forChildAndParent",!1);var a=DS.RelationshipChange._createChange({parentRecord:t,childRecord:e,firstRecord:e,secondRecord:t,firstRecordKind:"belongsTo",secondRecordKind:"belongsTo",store:r,changeType:n.changeType,firstRecordName:i});return r.addRelationshipChangeFor(e,i,t,null,a),a},DS.OneToOneChange.maintainInvariant=function(e,r,n,i){if("add"===e.changeType&&r.recordIsMaterialized(n)){var a=t(n,i);if(a){var o=DS.OneToOneChange.createChange(n,a,r,{parentType:e.parentType,hasManyName:e.hasManyName,changeType:"remove",key:e.key});r.addRelationshipChangeFor(n,i,e.parentRecord,null,o),o.sync()}}},DS.OneToManyChange.createChange=function(e,t,r,n){var i;n.parentType?(i=n.parentType.inverseFor(n.key).name,DS.OneToManyChange.maintainInvariant(n,r,e,i)):n.key?i=n.key:Ember.assert("You must pass either a parentType or belongsToName option to OneToManyChange.forChildAndParent",!1);var a=DS.RelationshipChange._createChange({parentRecord:t,childRecord:e,firstRecord:e,secondRecord:t,firstRecordKind:"belongsTo",secondRecordKind:"hasMany",store:r,changeType:n.changeType,firstRecordName:i});return r.addRelationshipChangeFor(e,i,t,a.getSecondRecordName(),a),a},DS.OneToManyChange.maintainInvariant=function(e,r,n,i){if("add"===e.changeType&&n){var a=t(n,i);if(a){var o=DS.OneToManyChange.createChange(n,a,r,{parentType:e.parentType,hasManyName:e.hasManyName,changeType:"remove",key:e.key});r.addRelationshipChangeFor(n,i,e.parentRecord,o.getSecondRecordName(),o),o.sync()}}},DS.RelationshipChange.prototype={getSecondRecordName:function(){var e,t=this.secondRecordName;if(!t){if(e=this.secondRecord,!e)return;var r=this.firstRecord.constructor,n=r.inverseFor(this.firstRecordName);this.secondRecordName=n.name}return this.secondRecordName},getFirstRecordName:function(){var e=this.firstRecordName;return e},destroy:function(){var e=this.childRecord,t=this.getFirstRecordName(),r=this.getSecondRecordName(),n=this.store;n.removeRelationshipChangeFor(e,t,this.parentRecord,r,this.changeType)},getSecondRecord:function(){return this.secondRecord},getFirstRecord:function(){return this.firstRecord},coalesce:function(){var e=this.store.relationshipChangePairsFor(this.firstRecord);n(e,function(e){var t=e.add,r=e.remove;t&&r&&(t.destroy(),r.destroy())})}},DS.RelationshipChangeAdd.prototype=Ember.create(DS.RelationshipChange.create({})),DS.RelationshipChangeRemove.prototype=Ember.create(DS.RelationshipChange.create({})),DS.RelationshipChangeAdd.prototype.changeType="add",DS.RelationshipChangeAdd.prototype.sync=function(){var n=this.getSecondRecordName(),i=this.getFirstRecordName(),a=this.getFirstRecord(),o=this.getSecondRecord();o instanceof DS.Model&&a instanceof DS.Model&&("belongsTo"===this.secondRecordKind?o.suspendRelationshipObservers(function(){r(o,n,a)}):"hasMany"===this.secondRecordKind&&o.suspendRelationshipObservers(function(){var r=t(o,n);e(r)&&r.addObject(a)})),a instanceof DS.Model&&o instanceof DS.Model&&t(a,i)!==o&&("belongsTo"===this.firstRecordKind?a.suspendRelationshipObservers(function(){r(a,i,o)}):"hasMany"===this.firstRecordKind&&a.suspendRelationshipObservers(function(){var r=t(a,i);e(r)&&r.addObject(o)})),this.coalesce()},DS.RelationshipChangeRemove.prototype.changeType="remove",DS.RelationshipChangeRemove.prototype.sync=function(){var n=this.getSecondRecordName(),i=this.getFirstRecordName(),a=this.getFirstRecord(),o=this.getSecondRecord();o instanceof DS.Model&&a instanceof DS.Model&&("belongsTo"===this.secondRecordKind?o.suspendRelationshipObservers(function(){r(o,n,null)}):"hasMany"===this.secondRecordKind&&o.suspendRelationshipObservers(function(){var r=t(o,n);e(r)&&r.removeObject(a)})),a instanceof DS.Model&&t(a,i)&&("belongsTo"===this.firstRecordKind?a.suspendRelationshipObservers(function(){r(a,i,null)}):"hasMany"===this.firstRecordKind&&a.suspendRelationshipObservers(function(){var r=t(a,i);e(r)&&r.removeObject(o)})),this.coalesce()}}(),function(){function e(e,n,i){return Ember.computed(function(n,a){var o=t(this,"data"),s=t(this,"store"),d="DS: Async belongsTo "+this+" : "+n;if(2===arguments.length)return Ember.assert("You can only add a '"+e+"' record to this relationship",!a||a instanceof s.modelFor(e)),void 0===a?null:DS.PromiseObject.create({promise:Ember.RSVP.resolve(a,d)});var u=o.links&&o.links[n],c=o[n];if(r(c)){if(u){var l=Ember.RSVP.defer("DS: Async belongsTo (link) "+this+" : "+n);return s.findBelongsTo(this,u,i,l),DS.PromiseObject.create({promise:l.promise})}return null}var h=s.fetchRecord(c)||Ember.RSVP.resolve(c,d);return DS.PromiseObject.create({promise:h})}).property("data").meta(i)}var t=Ember.get,r=(Ember.set,Ember.isNone);DS.belongsTo=function(n,i){"object"==typeof n?(i=n,n=void 0):Ember.assert("The first argument DS.belongsTo must be a model type or string, like DS.belongsTo(App.Person)",!!n&&("string"==typeof n||DS.Model.detect(n))),i=i||{};var a={type:n,isRelationship:!0,options:i,kind:"belongsTo"};return i.async?e(n,i,a):Ember.computed(function(e,i){var a,o,s=t(this,"data"),d=t(this,"store");return o="string"==typeof n?d.modelFor(n):n,2===arguments.length?(Ember.assert("You can only add a '"+n+"' record to this relationship",!i||i instanceof o),void 0===i?null:i):(a=s[e],r(a)?null:(d.fetchRecord(a),a))}).property("data").meta(a)},DS.Model.reopen({belongsToWillChange:Ember.beforeObserver(function(e,r){if(t(e,"isLoaded")){var n=t(e,r);if(n){var i=t(e,"store"),a=DS.RelationshipChange.createChange(e,n,i,{key:r,kind:"belongsTo",changeType:"remove"});a.sync(),this._changesToSync[r]=a}}}),belongsToDidChange:Ember.immediateObserver(function(e,r){if(t(e,"isLoaded")){var n=t(e,r);if(n){var i=t(e,"store"),a=DS.RelationshipChange.createChange(e,n,i,{key:r,kind:"belongsTo",changeType:"add"});a.sync()}}delete this._changesToSync[r]})})}(),function(){function e(e,r,n){return Ember.computed(function(e){var a=this._relationships[e],o="DS: Async hasMany "+this+" : "+e;if(!a){var s=Ember.RSVP.defer(o);a=t(this,e,r,function(t,r){var a,o=r.links&&r.links[e];return a=o?t.findHasMany(this,o,n,s):t.findMany(this,r[e],n.type,s),i(a,"promise",s.promise),a})}var d=a.get("promise").then(function(){return a},null,"DS: Async hasMany records received");return DS.PromiseArray.create({promise:d})}).property("data").meta(n)}function t(e,t,r,i){var o=e._relationships;if(o[t])return o[t];var s=n(e,"data"),d=n(e,"store"),u=o[t]=i.call(e,d,s);return a(u,{owner:e,name:t,isPolymorphic:r.polymorphic})}function r(r,n){n=n||{};var i={type:r,isRelationship:!0,options:n,kind:"hasMany"};return n.async?e(r,n,i):Ember.computed(function(e){return t(this,e,n,function(t,r){var n=r[e];return Ember.assert("You looked up the '"+e+"' relationship on '"+this+"' but some of the associated records were not loaded. Either make sure they are all loaded together with the parent record, or specify that the relationship is async (`DS.hasMany({ async: true })`)",Ember.A(n).everyProperty("isEmpty",!1)),t.findMany(this,r[e],i.type)})}).property("data").meta(i)}var n=Ember.get,i=Ember.set,a=Ember.setProperties;DS.hasMany=function(e,t){return"object"==typeof e&&(t=e,e=void 0),r(e,t)}}(),function(){{var e=Ember.get;Ember.set}DS.Model.reopen({didDefineProperty:function(e,t,r){if(r instanceof Ember.Descriptor){var n=r.meta();n.isRelationship&&"belongsTo"===n.kind&&(Ember.addObserver(e,t,null,"belongsToDidChange"),Ember.addBeforeObserver(e,t,null,"belongsToWillChange")),n.parentType=e.constructor}}}),DS.Model.reopenClass({typeForRelationship:function(t){var r=e(this,"relationshipsByName").get(t);return r&&r.type},inverseFor:function(t){function r(t,n,i){i=i||[];var a=e(n,"relationships");if(a){var o=a.get(t);return o&&i.push.apply(i,a.get(t)),t.superclass&&r(t.superclass,n,i),i}}var n=this.typeForRelationship(t);if(!n)return null;var i=this.metaForProperty(t).options;if(null===i.inverse)return null;var a,o;if(i.inverse)a=i.inverse,o=Ember.get(n,"relationshipsByName").get(a).kind;else{var s=r(this,n);if(0===s.length)return null;Ember.assert("You defined the '"+t+"' relationship on "+this+", but multiple possible inverse relationships of type "+this+" were found on "+n+". Look at http://emberjs.com/guides/models/defining-models/#toc_explicit-inverses for how to explicitly specify inverses",1===s.length),a=s[0].name,o=s[0].kind}return{type:n,name:a,kind:o}},relationships:Ember.computed(function(){var e=new Ember.MapWithDefault({defaultValue:function(){return[]}});return this.eachComputedProperty(function(t,r){if(r.isRelationship){"string"==typeof r.type&&(r.type=this.store.modelFor(r.type));var n=e.get(r.type);n.push({name:t,kind:r.kind})}}),e}),relationshipNames:Ember.computed(function(){var e={hasMany:[],belongsTo:[]};return this.eachComputedProperty(function(t,r){r.isRelationship&&e[r.kind].push(t)}),e}),relatedTypes:Ember.computed(function(){var t,r=Ember.A();return this.eachComputedProperty(function(n,i){i.isRelationship&&(t=i.type,"string"==typeof t&&(t=e(this,t,!1)||this.store.modelFor(t)),Ember.assert("You specified a hasMany ("+i.type+") on "+i.parentType+" but "+i.type+" was not found.",t),r.contains(t)||(Ember.assert("Trying to sideload "+n+" on "+this.toString()+" but the type doesn't exist.",!!t),r.push(t)))}),r}),relationshipsByName:Ember.computed(function(){var e,t=Ember.Map.create();return this.eachComputedProperty(function(r,n){n.isRelationship&&(n.key=r,e=n.type,e||"hasMany"!==n.kind?e||(e=r):e=Ember.String.singularize(r),"string"==typeof e&&(n.type=this.store.modelFor(e)),t.set(r,n))}),t}),fields:Ember.computed(function(){var e=Ember.Map.create();return this.eachComputedProperty(function(t,r){r.isRelationship?e.set(t,r.kind):r.isAttribute&&e.set(t,"attribute")}),e}),eachRelationship:function(t,r){e(this,"relationshipsByName").forEach(function(e,n){t.call(r,e,n)})},eachRelatedType:function(t,r){e(this,"relatedTypes").forEach(function(e){t.call(r,e)})}}),DS.Model.reopen({eachRelationship:function(e,t){this.constructor.eachRelationship(e,t)}})}(),function(){var e=Ember.get,t=(Ember.set,Ember.EnumerableUtils.forEach);DS.RecordArrayManager=Ember.Object.extend({init:function(){this.filteredRecordArrays=Ember.MapWithDefault.create({defaultValue:function(){return[]}}),this.changedRecords=[]},recordDidChange:function(e){1===this.changedRecords.push(e)&&Ember.run.schedule("actions",this,this.updateRecordArrays)},recordArraysForRecord:function(e){return e._recordArrays=e._recordArrays||Ember.OrderedSet.create(),e._recordArrays},updateRecordArrays:function(){t(this.changedRecords,function(t){e(t,"isDeleted")?this._recordWasDeleted(t):this._recordWasChanged(t)},this),this.changedRecords.length=0},_recordWasDeleted:function(e){var r=e._recordArrays;r&&t(r,function(t){t.removeRecord(e)})},_recordWasChanged:function(r){var n,i=r.constructor,a=this.filteredRecordArrays.get(i);t(a,function(t){n=e(t,"filterFunction"),this.updateRecordArray(t,n,i,r)},this);var o=r._loadingRecordArrays;if(o){for(var s=0,d=o.length;d>s;s++)o[s].loadedRecord();r._loadingRecordArrays=[]}},updateRecordArray:function(e,t,r,n){var i;i=t?t(n):!0;var a=this.recordArraysForRecord(n);i?(a.add(e),e.addRecord(n)):i||(a.remove(e),e.removeRecord(n))},updateFilter:function(t,r,n){for(var i,a=this.store.typeMapFor(r),o=a.records,s=0,d=o.length;d>s;s++)i=o[s],e(i,"isDeleted")||e(i,"isEmpty")||this.updateRecordArray(t,n,r,i)},createManyArray:function(e,r){var n=DS.ManyArray.create({type:e,content:r,store:this.store});return t(r,function(e){var t=this.recordArraysForRecord(e);t.add(n)},this),n},createRecordArray:function(e){var t=DS.RecordArray.create({type:e,content:Ember.A(),store:this.store,isLoaded:!0});return this.registerFilteredRecordArray(t,e),t},createFilteredRecordArray:function(e,t){var r=DS.FilteredRecordArray.create({type:e,content:Ember.A(),store:this.store,manager:this,filterFunction:t});return this.registerFilteredRecordArray(r,e,t),r},createAdapterPopulatedRecordArray:function(e,t){return DS.AdapterPopulatedRecordArray.create({type:e,query:t,content:Ember.A(),store:this.store})},registerFilteredRecordArray:function(e,t,r){var n=this.filteredRecordArrays.get(t);n.push(e),this.updateFilter(e,t,r)},registerWaitingRecordArray:function(e,t){var r=e._loadingRecordArrays||[];r.push(t),e._loadingRecordArrays=r}})}(),function(){var e=Ember.get,t=(Ember.set,Ember.ArrayPolyfills.map),r=["description","fileName","lineNumber","message","name","number","stack"];DS.InvalidError=function(e){var t=Error.prototype.constructor.call(this,"The backend rejected the commit because it was invalid: "+Ember.inspect(e));this.errors=e;for(var n=0,i=r.length;i>n;n++)this[r[n]]=t[r[n]]},DS.InvalidError.prototype=Ember.create(Error.prototype),DS.Adapter=Ember.Object.extend({find:Ember.required(Function),findAll:null,findQuery:null,generateIdForRecord:null,serialize:function(t,r){return e(t,"store").serializerFor(t.constructor.typeKey).serialize(t,r)},createRecord:Ember.required(Function),updateRecord:Ember.required(Function),deleteRecord:Ember.required(Function),findMany:function(e,r,n){var i=t.call(n,function(t){return this.find(e,r,t)},this);return Ember.RSVP.all(i)}})}(),function(){var e=Ember.get,t=Ember.String.fmt,r=Ember.EnumerableUtils.indexOf,n=0;DS.FixtureAdapter=DS.Adapter.extend({serializer:null,simulateRemoteResponse:!0,latency:50,fixturesForType:function(e){if(e.FIXTURES){var r=Ember.A(e.FIXTURES);return r.map(function(e){var r=typeof e.id;if("number"!==r&&"string"!==r)throw new Error(t("the id property must be defined as a number or string for fixture %@",[e]));return e.id=e.id+"",e})}return null},queryFixtures:function(){Ember.assert("Not implemented: You must override the DS.FixtureAdapter::queryFixtures method to support querying the fixture store.")},updateFixtures:function(e,t){e.FIXTURES||(e.FIXTURES=[]);var r=e.FIXTURES;this.deleteLoadedFixture(e,t),r.push(t)},mockJSON:function(e,t,r){return e.serializerFor(t).serialize(r,{includeId:!0})},generateIdForRecord:function(){return"fixture-"+n++},find:function(e,t,r){var n,i=this.fixturesForType(t);return Ember.assert("Unable to find fixtures for model type "+t.toString(),i),i&&(n=Ember.A(i).findProperty("id",r)),n?this.simulateRemoteCall(function(){return n},this):void 0},findMany:function(e,t,n){var i=this.fixturesForType(t);return Ember.assert("Unable to find fixtures for model type "+t.toString(),i),i&&(i=i.filter(function(e){return-1!==r(n,e.id)})),i?this.simulateRemoteCall(function(){return i},this):void 0},findAll:function(e,t){var r=this.fixturesForType(t);return Ember.assert("Unable to find fixtures for model type "+t.toString(),r),this.simulateRemoteCall(function(){return r},this)},findQuery:function(e,t,r){var n=this.fixturesForType(t);return Ember.assert("Unable to find fixtures for model type "+t.toString(),n),n=this.queryFixtures(n,r,t),n?this.simulateRemoteCall(function(){return n},this):void 0},createRecord:function(e,t,r){var n=this.mockJSON(e,t,r);return this.updateFixtures(t,n),this.simulateRemoteCall(function(){return n},this)},updateRecord:function(e,t,r){var n=this.mockJSON(e,t,r);return this.updateFixtures(t,n),this.simulateRemoteCall(function(){return n},this)},deleteRecord:function(e,t,r){var n=this.mockJSON(e,t,r);return this.deleteLoadedFixture(t,n),this.simulateRemoteCall(function(){return null})},deleteLoadedFixture:function(e,t){var n=this.findExistingFixture(e,t);if(n){var i=r(e.FIXTURES,n);return e.FIXTURES.splice(i,1),!0}},findExistingFixture:function(t,r){var n=this.fixturesForType(t),i=e(r,"id");return this.findFixtureById(n,i)},findFixtureById:function(t,r){return Ember.A(t).find(function(t){return""+e(t,"id")==""+r?!0:!1})},simulateRemoteCall:function(t,r){var n=this;return new Ember.RSVP.Promise(function(i){e(n,"simulateRemoteResponse")?Ember.run.later(function(){i(t.call(r))},e(n,"latency")):Ember.run.schedule("actions",null,function(){i(t.call(r))})},"DS: FixtureAdapter#simulateRemoteCall")}})}(),function(){function e(e){return null==e?null:e+""}var t=Ember.get,r=(Ember.set,Ember.ArrayPolyfills.forEach),n=Ember.ArrayPolyfills.map;DS.RESTSerializer=DS.JSONSerializer.extend({normalize:function(e,t,r){return this.normalizeId(t),this.normalizeAttributes(e,t),this.normalizeRelationships(e,t),this.normalizeUsingDeclaredMapping(e,t),this.normalizeHash&&this.normalizeHash[r]&&this.normalizeHash[r](t),this._super(e,t,r)},normalizePayload:function(e,t){return t},normalizeId:function(e){var r=t(this,"primaryKey");"id"!==r&&(e.id=e[r],delete e[r])},normalizeUsingDeclaredMapping:function(e,r){var n,i,a=t(this,"attrs");if(a)for(i in a)n=a[i],n&&n.key&&(n=n.key),"string"==typeof n&&(r[i]=r[n],delete r[n])},normalizeAttributes:function(e,t){var r;this.keyForAttribute&&e.eachAttribute(function(e){r=this.keyForAttribute(e),e!==r&&(t[e]=t[r],delete t[r])},this)},normalizeRelationships:function(e,t){var r;this.keyForRelationship&&e.eachRelationship(function(e,n){r=this.keyForRelationship(e,n.kind),e!==r&&(t[e]=t[r],delete t[r])},this)},extractSingle:function(t,n,i,a){i=this.normalizePayload(n,i);var o,s=n.typeKey;for(var d in i){var u=this.typeForRoot(d),c=t.modelFor(u),l=c.typeKey===s;l&&"array"!==Ember.typeOf(i[d])?o=this.normalize(n,i[d],d):r.call(i[d],function(r){var n=this.typeForRoot(d),i=t.modelFor(n),s=t.serializerFor(i);r=s.normalize(i,r,d);var u=l&&!a&&!o,c=l&&e(r.id)===a;u||c?o=r:t.push(n,r)},this)}return o},extractArray:function(e,t,r){r=this.normalizePayload(t,r);var i,a=t.typeKey;for(var o in r){var s=o,d=!1;"_"===o.charAt(0)&&(d=!0,s=o.substr(1));var u=this.typeForRoot(s),c=e.modelFor(u),l=e.serializerFor(c),h=!d&&c.typeKey===a,p=n.call(r[o],function(e){return l.normalize(c,e,o)},this);h?i=p:e.pushMany(u,p)}return i},pushPayload:function(e,t){t=this.normalizePayload(null,t);for(var r in t){var i=this.typeForRoot(r),a=e.modelFor(i),o=n.call(Ember.makeArray(t[r]),function(e){return this.normalize(a,e,r)},this);e.pushMany(i,o)}},typeForRoot:function(e){return Ember.String.singularize(e)},serialize:function(){return this._super.apply(this,arguments)},serializeIntoHash:function(e,t,r,n){var i=Ember.String.camelize(t.typeKey);e[i]=this.serialize(r,n)},serializePolymorphicType:function(e,r,n){var i=n.key,a=t(e,i);i=this.keyForAttribute?this.keyForAttribute(i):i,r[i+"Type"]=Ember.String.camelize(a.constructor.typeKey)}})}(),function(){var e=Ember.get,t=(Ember.set,Ember.ArrayPolyfills.forEach);DS.RESTAdapter=DS.Adapter.extend({defaultSerializer:"-rest",find:function(e,t,r){return this.ajax(this.buildURL(t.typeKey,r),"GET")},findAll:function(e,t,r){var n;return r&&(n={since:r}),this.ajax(this.buildURL(t.typeKey),"GET",{data:n})},findQuery:function(e,t,r){return this.ajax(this.buildURL(t.typeKey),"GET",{data:r})},findMany:function(e,t,r){return this.ajax(this.buildURL(t.typeKey),"GET",{data:{ids:r}})},findHasMany:function(t,r,n){var i=e(this,"host"),a=e(r,"id"),o=r.constructor.typeKey;return i&&"/"===n.charAt(0)&&"/"!==n.charAt(1)&&(n=i+n),this.ajax(this.urlPrefix(n,this.buildURL(o,a)),"GET")},findBelongsTo:function(t,r,n){var i=e(r,"id"),a=r.constructor.typeKey;return this.ajax(this.urlPrefix(n,this.buildURL(a,i)),"GET")},createRecord:function(e,t,r){var n={},i=e.serializerFor(t.typeKey);return i.serializeIntoHash(n,t,r,{includeId:!0}),this.ajax(this.buildURL(t.typeKey),"POST",{data:n})},updateRecord:function(t,r,n){var i={},a=t.serializerFor(r.typeKey);a.serializeIntoHash(i,r,n);var o=e(n,"id");return this.ajax(this.buildURL(r.typeKey,o),"PUT",{data:i})},deleteRecord:function(t,r,n){var i=e(n,"id");return this.ajax(this.buildURL(r.typeKey,i),"DELETE")},buildURL:function(t,r){var n=[],i=e(this,"host"),a=this.urlPrefix();return t&&n.push(this.pathForType(t)),r&&n.push(r),a&&n.unshift(a),n=n.join("/"),!i&&n&&(n="/"+n),n},urlPrefix:function(t,r){var n=e(this,"host"),i=e(this,"namespace"),a=[];return t?"/"===t.charAt(0)?n&&(t=t.slice(1),a.push(n)):/^http(s)?:\/\//.test(t)||a.push(r):(n&&a.push(n),i&&a.push(i)),t&&a.push(t),a.join("/")},pathForType:function(e){var t=Ember.String.camelize(e);return Ember.String.pluralize(t)},ajaxError:function(e){return e&&(e.then=null),e},ajax:function(e,t,r){var n=this;return new Ember.RSVP.Promise(function(i,a){r=n.ajaxOptions(e,t,r),r.success=function(e){Ember.run(null,i,e)},r.error=function(e){Ember.run(null,a,n.ajaxError(e))},Ember.$.ajax(r)},"DS: RestAdapter#ajax "+t+" to "+e)},ajaxOptions:function(e,r,n){if(n=n||{},n.url=e,n.type=r,n.dataType="json",n.context=this,n.data&&"GET"!==r&&(n.contentType="application/json; charset=utf-8",n.data=JSON.stringify(n.data)),void 0!==this.headers){var i=this.headers;n.beforeSend=function(e){t.call(Ember.keys(i),function(t){e.setRequestHeader(t,i[t])})}}return n}})}(),function(){DS.Model.reopen({_debugInfo:function(){var e=["id"],t={belongsTo:[],hasMany:[]},r=[];this.eachAttribute(function(t){e.push(t)},this),this.eachRelationship(function(e,n){t[n.kind].push(e),r.push(e)});var n=[{name:"Attributes",properties:e,expand:!0},{name:"Belongs To",properties:t.belongsTo,expand:!0},{name:"Has Many",properties:t.hasMany,expand:!0},{name:"Flags",properties:["isLoaded","isDirty","isSaving","isDeleted","isError","isNew","isValid"]}];return{propertyInfo:{includeOtherProperties:!0,groups:n,expensiveProperties:r}}}})}(),function(){Ember.String.pluralize=function(e){return Ember.Inflector.inflector.pluralize(e)},Ember.String.singularize=function(e){return Ember.Inflector.inflector.singularize(e)}}(),function(){function e(e,t){for(var r=0,n=t.length;n>r;r++)e.uncountable[t[r].toLowerCase()]=!0}function t(e,t){for(var r,n=0,i=t.length;i>n;n++)r=t[n],e.irregular[r[0].toLowerCase()]=r[1],e.irregularInverse[r[1].toLowerCase()]=r[0]}function r(r){r=r||{},r.uncountable=r.uncountable||{},r.irregularPairs=r.irregularPairs||{};var n=this.rules={plurals:r.plurals||[],singular:r.singular||[],irregular:{},irregularInverse:{},uncountable:{}};e(n,r.uncountable),t(n,r.irregularPairs)}var n=/^\s*$/;r.prototype={plural:function(e,t){this.rules.plurals.push([e,t.toLowerCase()])},singular:function(e,t){this.rules.singular.push([e,t.toLowerCase()])},uncountable:function(t){e(this.rules,[t.toLowerCase()])},irregular:function(e,r){t(this.rules,[[e,r]])},pluralize:function(e){return this.inflect(e,this.rules.plurals,this.rules.irregular)},singularize:function(e){return this.inflect(e,this.rules.singular,this.rules.irregularInverse)},inflect:function(e,t,r){var i,a,o,s,d,u,c,l;if(d=n.test(e))return e;if(s=e.toLowerCase(),u=this.rules.uncountable[s])return e;if(c=r&&r[s])return c;for(var h=t.length,p=0;h>p&&(i=t[h-1],l=i[0],!l.test(e));h--);return i=i||[],l=i[0],a=i[1],o=e.replace(l,a)}},Ember.Inflector=r}(),function(){Ember.Inflector.defaultRules={plurals:[[/$/,"s"],[/s$/i,"s"],[/^(ax|test)is$/i,"$1es"],[/(octop|vir)us$/i,"$1i"],[/(octop|vir)i$/i,"$1i"],[/(alias|status)$/i,"$1es"],[/(bu)s$/i,"$1ses"],[/(buffal|tomat)o$/i,"$1oes"],[/([ti])um$/i,"$1a"],[/([ti])a$/i,"$1a"],[/sis$/i,"ses"],[/(?:([^f])fe|([lr])f)$/i,"$1$2ves"],[/(hive)$/i,"$1s"],[/([^aeiouy]|qu)y$/i,"$1ies"],[/(x|ch|ss|sh)$/i,"$1es"],[/(matr|vert|ind)(?:ix|ex)$/i,"$1ices"],[/^(m|l)ouse$/i,"$1ice"],[/^(m|l)ice$/i,"$1ice"],[/^(ox)$/i,"$1en"],[/^(oxen)$/i,"$1"],[/(quiz)$/i,"$1zes"]],singular:[[/s$/i,""],[/(ss)$/i,"$1"],[/(n)ews$/i,"$1ews"],[/([ti])a$/i,"$1um"],[/((a)naly|(b)a|(d)iagno|(p)arenthe|(p)rogno|(s)ynop|(t)he)(sis|ses)$/i,"$1sis"],[/(^analy)(sis|ses)$/i,"$1sis"],[/([^f])ves$/i,"$1fe"],[/(hive)s$/i,"$1"],[/(tive)s$/i,"$1"],[/([lr])ves$/i,"$1f"],[/([^aeiouy]|qu)ies$/i,"$1y"],[/(s)eries$/i,"$1eries"],[/(m)ovies$/i,"$1ovie"],[/(x|ch|ss|sh)es$/i,"$1"],[/^(m|l)ice$/i,"$1ouse"],[/(bus)(es)?$/i,"$1"],[/(o)es$/i,"$1"],[/(shoe)s$/i,"$1"],[/(cris|test)(is|es)$/i,"$1is"],[/^(a)x[ie]s$/i,"$1xis"],[/(octop|vir)(us|i)$/i,"$1us"],[/(alias|status)(es)?$/i,"$1"],[/^(ox)en/i,"$1"],[/(vert|ind)ices$/i,"$1ex"],[/(matr)ices$/i,"$1ix"],[/(quiz)zes$/i,"$1"],[/(database)s$/i,"$1"]],irregularPairs:[["person","people"],["man","men"],["child","children"],["sex","sexes"],["move","moves"],["cow","kine"],["zombie","zombies"]],uncountable:["equipment","information","rice","money","species","series","fish","sheep","jeans","police"]}
        }(),function(){(Ember.EXTEND_PROTOTYPES===!0||Ember.EXTEND_PROTOTYPES.String)&&(String.prototype.pluralize=function(){return Ember.String.pluralize(this)},String.prototype.singularize=function(){return Ember.String.singularize(this)})}(),function(){Ember.Inflector.inflector=new Ember.Inflector(Ember.Inflector.defaultRules)}(),function(){var e=Ember.get,t=Ember.EnumerableUtils.forEach,r=Ember.String.camelize,n=Ember.String.capitalize,i=Ember.String.decamelize,a=Ember.String.singularize,o=Ember.String.underscore;DS.ActiveModelSerializer=DS.RESTSerializer.extend({keyForAttribute:function(e){return i(e)},keyForRelationship:function(e,t){return e=i(e),"belongsTo"===t?e+"_id":"hasMany"===t?a(e)+"_ids":e},serializeHasMany:Ember.K,serializeIntoHash:function(e,t,r,n){var a=o(i(t.typeKey));e[a]=this.serialize(r,n)},serializePolymorphicType:function(t,i,a){var o=a.key,s=e(t,o);o=this.keyForAttribute(o),i[o+"_type"]=n(r(s.constructor.typeKey))},typeForRoot:function(e){var t=r(e);return a(t)},normalize:function(e,t,r){return this.normalizeLinks(t),this._super(e,t,r)},normalizeLinks:function(e){if(e.links){var t=e.links;for(var n in t){var i=r(n);i!==n&&(t[i]=t[n],delete t[n])}}},normalizeRelationships:function(e,r){var n,i;this.keyForRelationship&&e.eachRelationship(function(e,a){if(a.options.polymorphic){if(n=this.keyForAttribute(e),i=r[n],i&&i.type)i.type=this.typeForRoot(i.type);else if(i&&"hasMany"===a.kind){var o=this;t(i,function(e){e.type=o.typeForRoot(e.type)})}}else n=this.keyForRelationship(e,a.kind),i=r[n];r[e]=i,e!==n&&delete r[n]},this)}})}(),function(){function e(n,i,a,o,s){var d=t(i,"attrs");d&&a.eachRelationship(function(i,a){var u,c,l,h,p=d[i],f=n.serializerFor(a.type.typeKey),m=t(f,"primaryKey");if("hasMany"===a.kind&&p&&("always"===p.embedded||"load"===p.embedded)){if(c="_"+Ember.String.pluralize(a.type.typeKey),u=this.keyForRelationship(i,a.kind),l=this.keyForAttribute(i),h=[],!o[l])return;s[c]=s[c]||[],r(o[l],function(t){var r=n.modelFor(a.type.typeKey);e(n,f,r,t,s),h.push(t[m]),s[c].push(t)}),o[u]=h,delete o[l]}},i)}var t=Ember.get,r=Ember.EnumerableUtils.forEach;DS.EmbeddedRecordsMixin=Ember.Mixin.create({serializeHasMany:function(e,r,n){var i=n.key,a=t(this,"attrs"),o=a&&a[i]&&"always"===a[i].embedded;o&&(r[this.keyForAttribute(i)]=t(e,i).map(function(e){var r=e.serialize(),n=t(this,"primaryKey");return r[n]=t(e,n),r},this))},extractSingle:function(t,r,n,i,a){var o=this.keyForAttribute(r.typeKey),s=n[o];return e(t,this,r,s,n),this._super(t,r,n,i,a)},extractArray:function(t,n,i){var a=this.keyForAttribute(n.typeKey),o=i[Ember.String.pluralize(a)];return r(o,function(r){e(t,this,n,r,i)},this),this._super(t,n,i)}})}(),function(){var e=Ember.EnumerableUtils.forEach,t=Ember.String.decamelize,r=Ember.String.underscore,n=Ember.String.pluralize;DS.ActiveModelAdapter=DS.RESTAdapter.extend({defaultSerializer:"-active-model",pathForType:function(e){var i=t(e),a=r(i);return n(a)},ajaxError:function(t){var r=this._super(t);if(t&&422===t.status){var n=Ember.$.parseJSON(t.responseText),i={};if(void 0!==n.errors){var a=n.errors;e(Ember.keys(a),function(e){i[Ember.String.camelize(e)]=a[e]})}return new DS.InvalidError(i)}return r}})}(),function(){Ember.onLoad("Ember.Application",function(e){e.initializer({name:"activeModelAdapter",initialize:function(e,t){var r=new DS.ContainerProxy(e);r.registerDeprecations([{deprecated:"serializer:_ams",valid:"serializer:-active-model"},{deprecated:"adapter:_ams",valid:"adapter:-active-model"}]),t.register("serializer:-active-model",DS.ActiveModelSerializer),t.register("adapter:-active-model",DS.ActiveModelAdapter)}})})}()}(),"undefined"==typeof location||"localhost"!==location.hostname&&"127.0.0.1"!==location.hostname||Ember.Logger.warn("You are running a production build of Ember on localhost and won't receive detailed error messages. If you want full error messages please use the non-minified build provided on the Ember website.");
    http_version: 
  recorded_at: Mon, 17 Feb 2014 11:45:02 GMT
- request:
    method: get
    uri: http://builds.emberjs.com/beta/ember.js
    body:
      encoding: US-ASCII
      string: ''
    headers:
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - '*/*'
      User-Agent:
      - Ruby
      Host:
      - builds.emberjs.com
  response:
    status:
      code: 200
      message: OK
    headers:
      X-Amz-Id-2:
      - GI5brd5E+pjC61gajLS7qRHY+pdFCST9MING9cQrjPcKlPios8GN7I7nkEjs1ua4
      X-Amz-Request-Id:
      - B3F04305615A2622
      Date:
      - Mon, 17 Feb 2014 11:45:25 GMT
      Last-Modified:
      - Sun, 16 Feb 2014 02:41:59 GMT
      Etag:
      - '"e525bfd359fa6621c1439a9f82320ecb"'
      Content-Type:
      - text/javascript
      Content-Length:
      - '1220966'
      Server:
      - AmazonS3
    body:
      encoding: ASCII-8BIT
      string: !binary |-
        LyohCiAqIEBvdmVydmlldyAgRW1iZXIgLSBKYXZhU2NyaXB0IEFwcGxpY2F0
        aW9uIEZyYW1ld29yawogKiBAY29weXJpZ2h0IENvcHlyaWdodCAyMDExLTIw
        MTQgVGlsZGUgSW5jLiBhbmQgY29udHJpYnV0b3JzCiAqICAgICAgICAgICAg
        UG9ydGlvbnMgQ29weXJpZ2h0IDIwMDYtMjAxMSBTdHJvYmUgSW5jLgogKiAg
        ICAgICAgICAgIFBvcnRpb25zIENvcHlyaWdodCAyMDA4LTIwMTEgQXBwbGUg
        SW5jLiBBbGwgcmlnaHRzIHJlc2VydmVkLgogKiBAbGljZW5zZSAgIExpY2Vu
        c2VkIHVuZGVyIE1JVCBsaWNlbnNlCiAqICAgICAgICAgICAgU2VlIGh0dHBz
        Oi8vcmF3LmdpdGh1Yi5jb20vZW1iZXJqcy9lbWJlci5qcy9tYXN0ZXIvTElD
        RU5TRQogKiBAdmVyc2lvbiAgIDEuNS4wLWJldGEuMitwcmUuM2NlOGY5YWMK
        ICovCgoKKGZ1bmN0aW9uKCkgewovKmdsb2JhbCBfX2ZhaWxfXyovCgovKioK
        RW1iZXIgRGVidWcKCkBtb2R1bGUgZW1iZXIKQHN1Ym1vZHVsZSBlbWJlci1k
        ZWJ1ZwoqLwoKLyoqCkBjbGFzcyBFbWJlcgoqLwoKaWYgKCd1bmRlZmluZWQn
        ID09PSB0eXBlb2YgRW1iZXIpIHsKICBFbWJlciA9IHt9OwoKICBpZiAoJ3Vu
        ZGVmaW5lZCcgIT09IHR5cGVvZiB3aW5kb3cpIHsKICAgIHdpbmRvdy5FbSA9
        IHdpbmRvdy5FbWJlciA9IEVtID0gRW1iZXI7CiAgfQp9CgovLyBUaGlzIG5l
        ZWRzIHRvIGJlIGtlcHQgaW4gc3luYyB3aXRoIHRoZSBsb2dpYyBpbgovLyBg
        cGFja2FnZXMvZW1iZXItbWV0YWwvbGliL2NvcmUuanNgLgovLwovLyBUaGlz
        IGlzIGR1cGxpY2F0ZWQgaGVyZSB0byBlbnN1cmUgdGhhdCBgRW1iZXIuRU5W
        YAovLyBpcyBzZXR1cCBldmVuIGlmIGBFbWJlcmAgaXMgbm90IGxvYWRlZCB5
        ZXQuCmlmIChFbWJlci5FTlYpIHsKICAvLyBkbyBub3RoaW5nIGlmIEVtYmVy
        LkVOViBpcyBhbHJlYWR5IHNldHVwCn0gZWxzZSBpZiAoJ3VuZGVmaW5lZCcg
        IT09IHR5cGVvZiBFbWJlckVOVikgewogIEVtYmVyLkVOViA9IEVtYmVyRU5W
        Owp9IGVsc2UgaWYoJ3VuZGVmaW5lZCcgIT09IHR5cGVvZiBFTlYpIHsKICBF
        bWJlci5FTlYgPSBFTlY7Cn0gZWxzZSB7CiAgRW1iZXIuRU5WID0ge307Cn0K
        CmlmICghKCdNQU5EQVRPUllfU0VUVEVSJyBpbiBFbWJlci5FTlYpKSB7CiAg
        RW1iZXIuRU5WLk1BTkRBVE9SWV9TRVRURVIgPSB0cnVlOyAvLyBkZWZhdWx0
        IHRvIHRydWUgZm9yIGRlYnVnIGRpc3QKfQoKLyoqCiAgRGVmaW5lIGFuIGFz
        c2VydGlvbiB0aGF0IHdpbGwgdGhyb3cgYW4gZXhjZXB0aW9uIGlmIHRoZSBj
        b25kaXRpb24gaXMgbm90CiAgbWV0LiBFbWJlciBidWlsZCB0b29scyB3aWxs
        IHJlbW92ZSBhbnkgY2FsbHMgdG8gYEVtYmVyLmFzc2VydCgpYCB3aGVuCiAg
        ZG9pbmcgYSBwcm9kdWN0aW9uIGJ1aWxkLiBFeGFtcGxlOgoKICBgYGBqYXZh
        c2NyaXB0CiAgLy8gVGVzdCBmb3IgdHJ1dGhpbmVzcwogIEVtYmVyLmFzc2Vy
        dCgnTXVzdCBwYXNzIGEgdmFsaWQgb2JqZWN0Jywgb2JqKTsKICAvLyBGYWls
        IHVuY29uZGl0aW9uYWxseQogIEVtYmVyLmFzc2VydCgnVGhpcyBjb2RlIHBh
        dGggc2hvdWxkIG5ldmVyIGJlIHJ1bicpCiAgYGBgCgogIEBtZXRob2QgYXNz
        ZXJ0CiAgQHBhcmFtIHtTdHJpbmd9IGRlc2MgQSBkZXNjcmlwdGlvbiBvZiB0
        aGUgYXNzZXJ0aW9uLiBUaGlzIHdpbGwgYmVjb21lCiAgICB0aGUgdGV4dCBv
        ZiB0aGUgRXJyb3IgdGhyb3duIGlmIHRoZSBhc3NlcnRpb24gZmFpbHMuCiAg
        QHBhcmFtIHtCb29sZWFufSB0ZXN0IE11c3QgYmUgdHJ1dGh5IGZvciB0aGUg
        YXNzZXJ0aW9uIHRvIHBhc3MuIElmCiAgICBmYWxzeSwgYW4gZXhjZXB0aW9u
        IHdpbGwgYmUgdGhyb3duLgoqLwpFbWJlci5hc3NlcnQgPSBmdW5jdGlvbihk
        ZXNjLCB0ZXN0KSB7CiAgaWYgKCF0ZXN0KSB7CiAgICB0aHJvdyBuZXcgRW1i
        ZXIuRXJyb3IoIkFzc2VydGlvbiBGYWlsZWQ6ICIgKyBkZXNjKTsKICB9Cn07
        CgoKLyoqCiAgRGlzcGxheSBhIHdhcm5pbmcgd2l0aCB0aGUgcHJvdmlkZWQg
        bWVzc2FnZS4gRW1iZXIgYnVpbGQgdG9vbHMgd2lsbAogIHJlbW92ZSBhbnkg
        Y2FsbHMgdG8gYEVtYmVyLndhcm4oKWAgd2hlbiBkb2luZyBhIHByb2R1Y3Rp
        b24gYnVpbGQuCgogIEBtZXRob2Qgd2FybgogIEBwYXJhbSB7U3RyaW5nfSBt
        ZXNzYWdlIEEgd2FybmluZyB0byBkaXNwbGF5LgogIEBwYXJhbSB7Qm9vbGVh
        bn0gdGVzdCBBbiBvcHRpb25hbCBib29sZWFuLiBJZiBmYWxzeSwgdGhlIHdh
        cm5pbmcKICAgIHdpbGwgYmUgZGlzcGxheWVkLgoqLwpFbWJlci53YXJuID0g
        ZnVuY3Rpb24obWVzc2FnZSwgdGVzdCkgewogIGlmICghdGVzdCkgewogICAg
        RW1iZXIuTG9nZ2VyLndhcm4oIldBUk5JTkc6ICIrbWVzc2FnZSk7CiAgICBp
        ZiAoJ3RyYWNlJyBpbiBFbWJlci5Mb2dnZXIpIEVtYmVyLkxvZ2dlci50cmFj
        ZSgpOwogIH0KfTsKCi8qKgogIERpc3BsYXkgYSBkZWJ1ZyBub3RpY2UuIEVt
        YmVyIGJ1aWxkIHRvb2xzIHdpbGwgcmVtb3ZlIGFueSBjYWxscyB0bwogIGBF
        bWJlci5kZWJ1ZygpYCB3aGVuIGRvaW5nIGEgcHJvZHVjdGlvbiBidWlsZC4K
        CiAgYGBgamF2YXNjcmlwdAogIEVtYmVyLmRlYnVnKCJJJ20gYSBkZWJ1ZyBu
        b3RpY2UhIik7CiAgYGBgCgogIEBtZXRob2QgZGVidWcKICBAcGFyYW0ge1N0
        cmluZ30gbWVzc2FnZSBBIGRlYnVnIG1lc3NhZ2UgdG8gZGlzcGxheS4KKi8K
        RW1iZXIuZGVidWcgPSBmdW5jdGlvbihtZXNzYWdlKSB7CiAgRW1iZXIuTG9n
        Z2VyLmRlYnVnKCJERUJVRzogIittZXNzYWdlKTsKfTsKCi8qKgogIERpc3Bs
        YXkgYSBkZXByZWNhdGlvbiB3YXJuaW5nIHdpdGggdGhlIHByb3ZpZGVkIG1l
        c3NhZ2UgYW5kIGEgc3RhY2sgdHJhY2UKICAoQ2hyb21lIGFuZCBGaXJlZm94
        IG9ubHkpLiBFbWJlciBidWlsZCB0b29scyB3aWxsIHJlbW92ZSBhbnkgY2Fs
        bHMgdG8KICBgRW1iZXIuZGVwcmVjYXRlKClgIHdoZW4gZG9pbmcgYSBwcm9k
        dWN0aW9uIGJ1aWxkLgoKICBAbWV0aG9kIGRlcHJlY2F0ZQogIEBwYXJhbSB7
        U3RyaW5nfSBtZXNzYWdlIEEgZGVzY3JpcHRpb24gb2YgdGhlIGRlcHJlY2F0
        aW9uLgogIEBwYXJhbSB7Qm9vbGVhbn0gdGVzdCBBbiBvcHRpb25hbCBib29s
        ZWFuLiBJZiBmYWxzeSwgdGhlIGRlcHJlY2F0aW9uCiAgICB3aWxsIGJlIGRp
        c3BsYXllZC4KKi8KRW1iZXIuZGVwcmVjYXRlID0gZnVuY3Rpb24obWVzc2Fn
        ZSwgdGVzdCkgewogIGlmICh0ZXN0KSB7IHJldHVybjsgfQoKICBpZiAoRW1i
        ZXIuRU5WLlJBSVNFX09OX0RFUFJFQ0FUSU9OKSB7IHRocm93IG5ldyBFbWJl
        ci5FcnJvcihtZXNzYWdlKTsgfQoKICB2YXIgZXJyb3I7CgogIC8vIFdoZW4g
        dXNpbmcgbmV3IEVycm9yLCB3ZSBjYW4ndCBkbyB0aGUgYXJndW1lbnRzIGNo
        ZWNrIGZvciBDaHJvbWUuIEFsdGVybmF0aXZlcyBhcmUgd2VsY29tZQogIHRy
        eSB7IF9fZmFpbF9fLmZhaWwoKTsgfSBjYXRjaCAoZSkgeyBlcnJvciA9IGU7
        IH0KCiAgaWYgKEVtYmVyLkxPR19TVEFDS1RSQUNFX09OX0RFUFJFQ0FUSU9O
        ICYmIGVycm9yLnN0YWNrKSB7CiAgICB2YXIgc3RhY2ssIHN0YWNrU3RyID0g
        Jyc7CiAgICBpZiAoZXJyb3JbJ2FyZ3VtZW50cyddKSB7CiAgICAgIC8vIENo
        cm9tZQogICAgICBzdGFjayA9IGVycm9yLnN0YWNrLnJlcGxhY2UoL15ccyth
        dFxzKy9nbSwgJycpLgogICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGxh
        Y2UoL14oW15cKF0rPykoW1xuJF0pL2dtLCAne2Fub255bW91c30oJDEpJDIn
        KS4KICAgICAgICAgICAgICAgICAgICAgICAgICByZXBsYWNlKC9eT2JqZWN0
        Ljxhbm9ueW1vdXM+XHMqXCgoW15cKV0rKVwpL2dtLCAne2Fub255bW91c30o
        JDEpJykuc3BsaXQoJ1xuJyk7CiAgICAgIHN0YWNrLnNoaWZ0KCk7CiAgICB9
        IGVsc2UgewogICAgICAvLyBGaXJlZm94CiAgICAgIHN0YWNrID0gZXJyb3Iu
        c3RhY2sucmVwbGFjZSgvKD86XG5AOjApP1xzKyQvbSwgJycpLgogICAgICAg
        ICAgICAgICAgICAgICAgICAgIHJlcGxhY2UoL15cKC9nbSwgJ3thbm9ueW1v
        dXN9KCcpLnNwbGl0KCdcbicpOwogICAgfQoKICAgIHN0YWNrU3RyID0gIlxu
        ICAgICIgKyBzdGFjay5zbGljZSgyKS5qb2luKCJcbiAgICAiKTsKICAgIG1l
        c3NhZ2UgPSBtZXNzYWdlICsgc3RhY2tTdHI7CiAgfQoKICBFbWJlci5Mb2dn
        ZXIud2FybigiREVQUkVDQVRJT046ICIrbWVzc2FnZSk7Cn07CgoKCi8qKgog
        IEFsaWFzIGFuIG9sZCwgZGVwcmVjYXRlZCBtZXRob2Qgd2l0aCBpdHMgbmV3
        IGNvdW50ZXJwYXJ0LgoKICBEaXNwbGF5IGEgZGVwcmVjYXRpb24gd2Fybmlu
        ZyB3aXRoIHRoZSBwcm92aWRlZCBtZXNzYWdlIGFuZCBhIHN0YWNrIHRyYWNl
        CiAgKENocm9tZSBhbmQgRmlyZWZveCBvbmx5KSB3aGVuIHRoZSBhc3NpZ25l
        ZCBtZXRob2QgaXMgY2FsbGVkLgoKICBFbWJlciBidWlsZCB0b29scyB3aWxs
        IG5vdCByZW1vdmUgY2FsbHMgdG8gYEVtYmVyLmRlcHJlY2F0ZUZ1bmMoKWAs
        IHRob3VnaAogIG5vIHdhcm5pbmdzIHdpbGwgYmUgc2hvd24gaW4gcHJvZHVj
        dGlvbi4KCiAgYGBgamF2YXNjcmlwdAogIEVtYmVyLm9sZE1ldGhvZCA9IEVt
        YmVyLmRlcHJlY2F0ZUZ1bmMoIlBsZWFzZSB1c2UgdGhlIG5ldywgdXBkYXRl
        ZCBtZXRob2QiLCBFbWJlci5uZXdNZXRob2QpOwogIGBgYAoKICBAbWV0aG9k
        IGRlcHJlY2F0ZUZ1bmMKICBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZSBBIGRl
        c2NyaXB0aW9uIG9mIHRoZSBkZXByZWNhdGlvbi4KICBAcGFyYW0ge0Z1bmN0
        aW9ufSBmdW5jIFRoZSBuZXcgZnVuY3Rpb24gY2FsbGVkIHRvIHJlcGxhY2Ug
        aXRzIGRlcHJlY2F0ZWQgY291bnRlcnBhcnQuCiAgQHJldHVybiB7RnVuY3Rp
        b259IGEgbmV3IGZ1bmN0aW9uIHRoYXQgd3JhcHBlZCB0aGUgb3JpZ2luYWwg
        ZnVuY3Rpb24gd2l0aCBhIGRlcHJlY2F0aW9uIHdhcm5pbmcKKi8KRW1iZXIu
        ZGVwcmVjYXRlRnVuYyA9IGZ1bmN0aW9uKG1lc3NhZ2UsIGZ1bmMpIHsKICBy
        ZXR1cm4gZnVuY3Rpb24oKSB7CiAgICBFbWJlci5kZXByZWNhdGUobWVzc2Fn
        ZSk7CiAgICByZXR1cm4gZnVuYy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwog
        IH07Cn07CgoKLy8gSW5mb3JtIHRoZSBkZXZlbG9wZXIgYWJvdXQgdGhlIEVt
        YmVyIEluc3BlY3RvciBpZiBub3QgaW5zdGFsbGVkLgppZiAoIUVtYmVyLnRl
        c3RpbmcpIHsKICB2YXIgaXNGaXJlZm94ID0gdHlwZW9mIEluc3RhbGxUcmln
        Z2VyICE9PSAndW5kZWZpbmVkJzsKICB2YXIgaXNDaHJvbWUgPSAhIXdpbmRv
        dy5jaHJvbWUgJiYgIXdpbmRvdy5vcGVyYTsKCiAgaWYgKHR5cGVvZiB3aW5k
        b3cgIT09ICd1bmRlZmluZWQnICYmIChpc0ZpcmVmb3ggfHwgaXNDaHJvbWUp
        ICYmIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKSB7CiAgICB3aW5kb3cuYWRk
        RXZlbnRMaXN0ZW5lcigibG9hZCIsIGZ1bmN0aW9uKCkgewogICAgICBpZiAo
        ZG9jdW1lbnQuYm9keSAmJiBkb2N1bWVudC5ib2R5LmRhdGFzZXQgJiYgIWRv
        Y3VtZW50LmJvZHkuZGF0YXNldC5lbWJlckV4dGVuc2lvbikgewogICAgICAg
        IHZhciBkb3dubG9hZFVSTDsKCiAgICAgICAgaWYoaXNDaHJvbWUpIHsKICAg
        ICAgICAgIGRvd25sb2FkVVJMID0gJ2h0dHBzOi8vY2hyb21lLmdvb2dsZS5j
        b20vd2Vic3RvcmUvZGV0YWlsL2VtYmVyLWluc3BlY3Rvci9ibWRibG5jZWdr
        ZW5rYWNpZWloZmhwamZwcG9jb25oaSc7CiAgICAgICAgfSBlbHNlIGlmKGlz
        RmlyZWZveCkgewogICAgICAgICAgZG93bmxvYWRVUkwgPSAnaHR0cHM6Ly9h
        ZGRvbnMubW96aWxsYS5vcmcvZW4tVVMvZmlyZWZveC9hZGRvbi9lbWJlci1p
        bnNwZWN0b3IvJwogICAgICAgIH0KCiAgICAgICAgRW1iZXIuZGVidWcoJ0Zv
        ciBtb3JlIGFkdmFuY2VkIGRlYnVnZ2luZywgaW5zdGFsbCB0aGUgRW1iZXIg
        SW5zcGVjdG9yIGZyb20gJyArIGRvd25sb2FkVVJMKTsKICAgICAgfQogICAg
        fSwgZmFsc2UpOwogIH0KfQoKfSkoKTsKCi8qIQogKiBAb3ZlcnZpZXcgIEVt
        YmVyIC0gSmF2YVNjcmlwdCBBcHBsaWNhdGlvbiBGcmFtZXdvcmsKICogQGNv
        cHlyaWdodCBDb3B5cmlnaHQgMjAxMS0yMDE0IFRpbGRlIEluYy4gYW5kIGNv
        bnRyaWJ1dG9ycwogKiAgICAgICAgICAgIFBvcnRpb25zIENvcHlyaWdodCAy
        MDA2LTIwMTEgU3Ryb2JlIEluYy4KICogICAgICAgICAgICBQb3J0aW9ucyBD
        b3B5cmlnaHQgMjAwOC0yMDExIEFwcGxlIEluYy4gQWxsIHJpZ2h0cyByZXNl
        cnZlZC4KICogQGxpY2Vuc2UgICBMaWNlbnNlZCB1bmRlciBNSVQgbGljZW5z
        ZQogKiAgICAgICAgICAgIFNlZSBodHRwczovL3Jhdy5naXRodWIuY29tL2Vt
        YmVyanMvZW1iZXIuanMvbWFzdGVyL0xJQ0VOU0UKICogQHZlcnNpb24gICAx
        LjUuMC1iZXRhLjIrcHJlLjNjZThmOWFjCiAqLwoKCihmdW5jdGlvbigpIHsK
        dmFyIGRlZmluZSwgcmVxdWlyZU1vZHVsZSwgcmVxdWlyZSwgcmVxdWlyZWpz
        OwoKKGZ1bmN0aW9uKCkgewogIHZhciByZWdpc3RyeSA9IHt9LCBzZWVuID0g
        e307CgogIGRlZmluZSA9IGZ1bmN0aW9uKG5hbWUsIGRlcHMsIGNhbGxiYWNr
        KSB7CiAgICByZWdpc3RyeVtuYW1lXSA9IHsgZGVwczogZGVwcywgY2FsbGJh
        Y2s6IGNhbGxiYWNrIH07CiAgfTsKCiAgcmVxdWlyZWpzID0gcmVxdWlyZSA9
        IHJlcXVpcmVNb2R1bGUgPSBmdW5jdGlvbihuYW1lKSB7CiAgcmVxdWlyZWpz
        Ll9lYWtfc2VlbiA9IHJlZ2lzdHJ5OwoKICAgIGlmIChzZWVuW25hbWVdKSB7
        IHJldHVybiBzZWVuW25hbWVdOyB9CiAgICBzZWVuW25hbWVdID0ge307Cgog
        ICAgaWYgKCFyZWdpc3RyeVtuYW1lXSkgewogICAgICB0aHJvdyBuZXcgRXJy
        b3IoIkNvdWxkIG5vdCBmaW5kIG1vZHVsZSAiICsgbmFtZSk7CiAgICB9Cgog
        ICAgdmFyIG1vZCA9IHJlZ2lzdHJ5W25hbWVdLAogICAgICAgIGRlcHMgPSBt
        b2QuZGVwcywKICAgICAgICBjYWxsYmFjayA9IG1vZC5jYWxsYmFjaywKICAg
        ICAgICByZWlmaWVkID0gW10sCiAgICAgICAgZXhwb3J0czsKCiAgICBmb3Ig
        KHZhciBpPTAsIGw9ZGVwcy5sZW5ndGg7IGk8bDsgaSsrKSB7CiAgICAgIGlm
        IChkZXBzW2ldID09PSAnZXhwb3J0cycpIHsKICAgICAgICByZWlmaWVkLnB1
        c2goZXhwb3J0cyA9IHt9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZWlm
        aWVkLnB1c2gocmVxdWlyZU1vZHVsZShyZXNvbHZlKGRlcHNbaV0pKSk7CiAg
        ICAgIH0KICAgIH0KCiAgICB2YXIgdmFsdWUgPSBjYWxsYmFjay5hcHBseSh0
        aGlzLCByZWlmaWVkKTsKICAgIHJldHVybiBzZWVuW25hbWVdID0gZXhwb3J0
        cyB8fCB2YWx1ZTsKCiAgICBmdW5jdGlvbiByZXNvbHZlKGNoaWxkKSB7CiAg
        ICAgIGlmIChjaGlsZC5jaGFyQXQoMCkgIT09ICcuJykgeyByZXR1cm4gY2hp
        bGQ7IH0KICAgICAgdmFyIHBhcnRzID0gY2hpbGQuc3BsaXQoIi8iKTsKICAg
        ICAgdmFyIHBhcmVudEJhc2UgPSBuYW1lLnNwbGl0KCIvIikuc2xpY2UoMCwg
        LTEpOwoKICAgICAgZm9yICh2YXIgaT0wLCBsPXBhcnRzLmxlbmd0aDsgaTxs
        OyBpKyspIHsKICAgICAgICB2YXIgcGFydCA9IHBhcnRzW2ldOwoKICAgICAg
        ICBpZiAocGFydCA9PT0gJy4uJykgeyBwYXJlbnRCYXNlLnBvcCgpOyB9CiAg
        ICAgICAgZWxzZSBpZiAocGFydCA9PT0gJy4nKSB7IGNvbnRpbnVlOyB9CiAg
        ICAgICAgZWxzZSB7IHBhcmVudEJhc2UucHVzaChwYXJ0KTsgfQogICAgICB9
        CgogICAgICByZXR1cm4gcGFyZW50QmFzZS5qb2luKCIvIik7CiAgICB9CiAg
        fTsKfSkoKTsKKGZ1bmN0aW9uKCkgewovKmdsb2JhbHMgRW06dHJ1ZSBFTlYg
        RW1iZXJFTlYgTWV0YW1vcnBoRU5WOnRydWUgKi8KCi8qKgpAbW9kdWxlIGVt
        YmVyCkBzdWJtb2R1bGUgZW1iZXItbWV0YWwKKi8KCi8qKgogIEFsbCBFbWJl
        ciBtZXRob2RzIGFuZCBmdW5jdGlvbnMgYXJlIGRlZmluZWQgaW5zaWRlIG9m
        IHRoaXMgbmFtZXNwYWNlLiBZb3UKICBnZW5lcmFsbHkgc2hvdWxkIG5vdCBh
        ZGQgbmV3IHByb3BlcnRpZXMgdG8gdGhpcyBuYW1lc3BhY2UgYXMgaXQgbWF5
        IGJlCiAgb3ZlcndyaXR0ZW4gYnkgZnV0dXJlIHZlcnNpb25zIG9mIEVtYmVy
        LgoKICBZb3UgY2FuIGFsc28gdXNlIHRoZSBzaG9ydGhhbmQgYEVtYCBpbnN0
        ZWFkIG9mIGBFbWJlcmAuCgogIEVtYmVyLVJ1bnRpbWUgaXMgYSBmcmFtZXdv
        cmsgdGhhdCBwcm92aWRlcyBjb3JlIGZ1bmN0aW9ucyBmb3IgRW1iZXIgaW5j
        bHVkaW5nCiAgY3Jvc3MtcGxhdGZvcm0gZnVuY3Rpb25zLCBzdXBwb3J0IGZv
        ciBwcm9wZXJ0eSBvYnNlcnZpbmcgYW5kIG9iamVjdHMuIEl0cwogIGZvY3Vz
        IGlzIG9uIHNtYWxsIHNpemUgYW5kIHBlcmZvcm1hbmNlLiBZb3UgY2FuIHVz
        ZSB0aGlzIGluIHBsYWNlIG9mIG9yCiAgYWxvbmctc2lkZSBvdGhlciBjcm9z
        cy1wbGF0Zm9ybSBsaWJyYXJpZXMgc3VjaCBhcyBqUXVlcnkuCgogIFRoZSBj
        b3JlIFJ1bnRpbWUgZnJhbWV3b3JrIGlzIGJhc2VkIG9uIHRoZSBqUXVlcnkg
        QVBJIHdpdGggYSBudW1iZXIgb2YKICBwZXJmb3JtYW5jZSBvcHRpbWl6YXRp
        b25zLgoKICBAY2xhc3MgRW1iZXIKICBAc3RhdGljCiAgQHZlcnNpb24gMS41
        LjAtYmV0YS4yK3ByZS4zY2U4ZjlhYwoqLwoKaWYgKCd1bmRlZmluZWQnID09
        PSB0eXBlb2YgRW1iZXIpIHsKICAvLyBDcmVhdGUgY29yZSBvYmplY3QuIE1h
        a2UgaXQgYWN0IGxpa2UgYW4gaW5zdGFuY2Ugb2YgRW1iZXIuTmFtZXNwYWNl
        IHNvIHRoYXQKICAvLyBvYmplY3RzIGFzc2lnbmVkIHRvIGl0IGFyZSBnaXZl
        biBhIHNhbmUgc3RyaW5nIHJlcHJlc2VudGF0aW9uLgogIEVtYmVyID0ge307
        Cn0KCi8vIERlZmF1bHQgaW1wb3J0cywgZXhwb3J0cyBhbmQgbG9va3VwIHRv
        IHRoZSBnbG9iYWwgb2JqZWN0Owp2YXIgaW1wb3J0cyA9IEVtYmVyLmltcG9y
        dHMgPSBFbWJlci5pbXBvcnRzIHx8IHRoaXM7CnZhciBleHBvcnRzID0gRW1i
        ZXIuZXhwb3J0cyA9IEVtYmVyLmV4cG9ydHMgfHwgdGhpczsKdmFyIGxvb2t1
        cCAgPSBFbWJlci5sb29rdXAgID0gRW1iZXIubG9va3VwICB8fCB0aGlzOwoK
        Ly8gYWxpYXNlcyBuZWVkZWQgdG8ga2VlcCBtaW5pZmllcnMgZnJvbSByZW1v
        dmluZyB0aGUgZ2xvYmFsIGNvbnRleHQKZXhwb3J0cy5FbSA9IGV4cG9ydHMu
        RW1iZXIgPSBFbSA9IEVtYmVyOwoKLy8gTWFrZSBzdXJlIHRoZXNlIGFyZSBz
        ZXQgd2hldGhlciBFbWJlciB3YXMgYWxyZWFkeSBkZWZpbmVkIG9yIG5vdAoK
        RW1iZXIuaXNOYW1lc3BhY2UgPSB0cnVlOwoKRW1iZXIudG9TdHJpbmcgPSBm
        dW5jdGlvbigpIHsgcmV0dXJuICJFbWJlciI7IH07CgoKLyoqCiAgQHByb3Bl
        cnR5IFZFUlNJT04KICBAdHlwZSBTdHJpbmcKICBAZGVmYXVsdCAnMS41LjAt
        YmV0YS4yK3ByZS4zY2U4ZjlhYycKICBAc3RhdGljCiovCkVtYmVyLlZFUlNJ
        T04gPSAnMS41LjAtYmV0YS4yK3ByZS4zY2U4ZjlhYyc7CgovKioKICBTdGFu
        ZGFyZCBlbnZpcm9ubWVudGFsIHZhcmlhYmxlcy4gWW91IGNhbiBkZWZpbmUg
        dGhlc2UgaW4gYSBnbG9iYWwgYEVtYmVyRU5WYAogIHZhcmlhYmxlIGJlZm9y
        ZSBsb2FkaW5nIEVtYmVyIHRvIGNvbnRyb2wgdmFyaW91cyBjb25maWd1cmF0
        aW9uIHNldHRpbmdzLgoKICBGb3IgYmFja3dhcmRzIGNvbXBhdGliaWxpdHkg
        d2l0aCBlYXJsaWVyIHZlcnNpb25zIG9mIEVtYmVyIHRoZSBnbG9iYWwgYEVO
        VmAKICB2YXJpYWJsZSB3aWxsIGJlIHVzZWQgaWYgYEVtYmVyRU5WYCBpcyBu
        b3QgZGVmaW5lZC4KCiAgQHByb3BlcnR5IEVOVgogIEB0eXBlIEhhc2gKKi8K
        Ci8vIFRoaXMgbmVlZHMgdG8gYmUga2VwdCBpbiBzeW5jIHdpdGggdGhlIGxv
        Z2ljIGluCi8vIGBwYWNrYWdlcy9lbWJlci1kZWJ1Zy9saWIvbWFpbi5qc2Au
        CmlmIChFbWJlci5FTlYpIHsKICAvLyBkbyBub3RoaW5nIGlmIEVtYmVyLkVO
        ViBpcyBhbHJlYWR5IHNldHVwCn0gZWxzZSBpZiAoJ3VuZGVmaW5lZCcgIT09
        IHR5cGVvZiBFbWJlckVOVikgewogIEVtYmVyLkVOViA9IEVtYmVyRU5WOwp9
        IGVsc2UgaWYoJ3VuZGVmaW5lZCcgIT09IHR5cGVvZiBFTlYpIHsKICBFbWJl
        ci5FTlYgPSBFTlY7Cn0gZWxzZSB7CiAgRW1iZXIuRU5WID0ge307Cn0KCkVt
        YmVyLmNvbmZpZyA9IEVtYmVyLmNvbmZpZyB8fCB7fTsKCi8vIFdlIGRpc2Fi
        bGUgdGhlIFJBTkdFIEFQSSBieSBkZWZhdWx0IGZvciBwZXJmb3JtYW5jZSBy
        ZWFzb25zCmlmICgndW5kZWZpbmVkJyA9PT0gdHlwZW9mIEVtYmVyLkVOVi5E
        SVNBQkxFX1JBTkdFX0FQSSkgewogIEVtYmVyLkVOVi5ESVNBQkxFX1JBTkdF
        X0FQSSA9IHRydWU7Cn0KCmlmICgidW5kZWZpbmVkIiA9PT0gdHlwZW9mIE1l
        dGFtb3JwaEVOVikgewogIGV4cG9ydHMuTWV0YW1vcnBoRU5WID0ge307Cn0K
        Ck1ldGFtb3JwaEVOVi5ESVNBQkxFX1JBTkdFX0FQSSA9IEVtYmVyLkVOVi5E
        SVNBQkxFX1JBTkdFX0FQSTsKCi8qKgogIEhhc2ggb2YgZW5hYmxlZCBDYW5h
        cnkgZmVhdHVyZXMuIEFkZCB0byBiZWZvcmUgY3JlYXRpbmcgeW91ciBhcHBs
        aWNhdGlvbi4KCiAgWW91IGNhbiBhbHNvIGRlZmluZSBgRU5WLkZFQVRVUkVT
        YCBpZiB5b3UgbmVlZCB0byBlbmFibGUgZmVhdHVyZXMgZmxhZ2dlZCBhdCBy
        dW50aW1lLgoKICBAcHJvcGVydHkgRkVBVFVSRVMKICBAdHlwZSBIYXNoCiov
        CgpFbWJlci5GRUFUVVJFUyA9IEVtYmVyLkVOVi5GRUFUVVJFUyB8fCB7fTsK
        Ci8qKgogIFRlc3QgdGhhdCBhIGZlYXR1cmUgaXMgZW5hYmxlZC4gUGFyc2Vk
        IGJ5IEVtYmVyJ3MgYnVpbGQgdG9vbHMgdG8gbGVhdmUKICBleHBlcmltZW50
        YWwgZmVhdHVyZXMgb3V0IG9mIGJldGEvc3RhYmxlIGJ1aWxkcy4KCiAgWW91
        IGNhbiBkZWZpbmUgdGhlIGZvbGxvd2luZyBjb25maWd1cmF0aW9uIG9wdGlv
        bnM6CgogICogYEVOVi5FTkFCTEVfQUxMX0ZFQVRVUkVTYCAtIGZvcmNlIGFs
        bCBmZWF0dXJlcyB0byBiZSBlbmFibGVkLgogICogYEVOVi5FTkFCTEVfT1BU
        SU9OQUxfRkVBVFVSRVNgIC0gZW5hYmxlIGFueSBmZWF0dXJlcyB0aGF0IGhh
        dmUgbm90IGJlZW4gZXhwbGljaXRseQogICAgZW5hYmxlZC9kaXNhYmxlZC4K
        CiAgQG1ldGhvZCBpc0VuYWJsZWQKICBAcGFyYW0ge3N0cmluZ30gZmVhdHVy
        ZQoqLwoKRW1iZXIuRkVBVFVSRVMuaXNFbmFibGVkID0gZnVuY3Rpb24oZmVh
        dHVyZSkgewogIHZhciBmZWF0dXJlVmFsdWUgPSBFbWJlci5GRUFUVVJFU1tm
        ZWF0dXJlXTsKCiAgaWYgKEVtYmVyLkVOVi5FTkFCTEVfQUxMX0ZFQVRVUkVT
        KSB7CiAgICByZXR1cm4gdHJ1ZTsKICB9IGVsc2UgaWYgKGZlYXR1cmVWYWx1
        ZSA9PT0gdHJ1ZSB8fCBmZWF0dXJlVmFsdWUgPT09IGZhbHNlIHx8IGZlYXR1
        cmVWYWx1ZSA9PT0gdW5kZWZpbmVkKSB7CiAgICByZXR1cm4gZmVhdHVyZVZh
        bHVlOwogIH0gZWxzZSBpZiAoRW1iZXIuRU5WLkVOQUJMRV9PUFRJT05BTF9G
        RUFUVVJFUykgewogICAgcmV0dXJuIHRydWU7CiAgfSBlbHNlIHsKICAgIHJl
        dHVybiBmYWxzZTsKICB9Cn07CgovLyAuLi4uLi4uLi4uLi4uLi4uLi4uLi4u
        Li4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uCi8vIEJPT1RT
        VFJBUAovLwoKLyoqCiAgRGV0ZXJtaW5lcyB3aGV0aGVyIEVtYmVyIHNob3Vs
        ZCBlbmhhbmNlcyBzb21lIGJ1aWx0LWluIG9iamVjdCBwcm90b3R5cGVzIHRv
        CiAgcHJvdmlkZSBhIG1vcmUgZnJpZW5kbHkgQVBJLiBJZiBlbmFibGVkLCBh
        IGZldyBtZXRob2RzIHdpbGwgYmUgYWRkZWQgdG8KICBgRnVuY3Rpb25gLCBg
        U3RyaW5nYCwgYW5kIGBBcnJheWAuIGBPYmplY3QucHJvdG90eXBlYCB3aWxs
        IG5vdCBiZSBlbmhhbmNlZCwKICB3aGljaCBpcyB0aGUgb25lIHRoYXQgY2F1
        c2VzIG1vc3QgdHJvdWJsZSBmb3IgcGVvcGxlLgoKICBJbiBnZW5lcmFsIHdl
        IHJlY29tbWVuZCBsZWF2aW5nIHRoaXMgb3B0aW9uIHNldCB0byB0cnVlIHNp
        bmNlIGl0IHJhcmVseQogIGNvbmZsaWN0cyB3aXRoIG90aGVyIGNvZGUuIElm
        IHlvdSBuZWVkIHRvIHR1cm4gaXQgb2ZmIGhvd2V2ZXIsIHlvdSBjYW4KICBk
        ZWZpbmUgYW4gYEVOVi5FWFRFTkRfUFJPVE9UWVBFU2AgY29uZmlnIHRvIGRp
        c2FibGUgaXQuCgogIEBwcm9wZXJ0eSBFWFRFTkRfUFJPVE9UWVBFUwogIEB0
        eXBlIEJvb2xlYW4KICBAZGVmYXVsdCB0cnVlCiovCkVtYmVyLkVYVEVORF9Q
        Uk9UT1RZUEVTID0gRW1iZXIuRU5WLkVYVEVORF9QUk9UT1RZUEVTOwoKaWYg
        KHR5cGVvZiBFbWJlci5FWFRFTkRfUFJPVE9UWVBFUyA9PT0gJ3VuZGVmaW5l
        ZCcpIHsKICBFbWJlci5FWFRFTkRfUFJPVE9UWVBFUyA9IHRydWU7Cn0KCi8q
        KgogIERldGVybWluZXMgd2hldGhlciBFbWJlciBsb2dzIGEgZnVsbCBzdGFj
        ayB0cmFjZSBkdXJpbmcgZGVwcmVjYXRpb24gd2FybmluZ3MKCiAgQHByb3Bl
        cnR5IExPR19TVEFDS1RSQUNFX09OX0RFUFJFQ0FUSU9OCiAgQHR5cGUgQm9v
        bGVhbgogIEBkZWZhdWx0IHRydWUKKi8KRW1iZXIuTE9HX1NUQUNLVFJBQ0Vf
        T05fREVQUkVDQVRJT04gPSAoRW1iZXIuRU5WLkxPR19TVEFDS1RSQUNFX09O
        X0RFUFJFQ0FUSU9OICE9PSBmYWxzZSk7CgovKioKICBEZXRlcm1pbmVzIHdo
        ZXRoZXIgRW1iZXIgc2hvdWxkIGFkZCBFQ01BU2NyaXB0IDUgc2hpbXMgdG8g
        b2xkZXIgYnJvd3NlcnMuCgogIEBwcm9wZXJ0eSBTSElNX0VTNQogIEB0eXBl
        IEJvb2xlYW4KICBAZGVmYXVsdCBFbWJlci5FWFRFTkRfUFJPVE9UWVBFUwoq
        LwpFbWJlci5TSElNX0VTNSA9IChFbWJlci5FTlYuU0hJTV9FUzUgPT09IGZh
        bHNlKSA/IGZhbHNlIDogRW1iZXIuRVhURU5EX1BST1RPVFlQRVM7CgovKioK
        ICBEZXRlcm1pbmVzIHdoZXRoZXIgRW1iZXIgbG9ncyBpbmZvIGFib3V0IHZl
        cnNpb24gb2YgdXNlZCBsaWJyYXJpZXMKCiAgQHByb3BlcnR5IExPR19WRVJT
        SU9OCiAgQHR5cGUgQm9vbGVhbgogIEBkZWZhdWx0IHRydWUKKi8KRW1iZXIu
        TE9HX1ZFUlNJT04gPSAoRW1iZXIuRU5WLkxPR19WRVJTSU9OID09PSBmYWxz
        ZSkgPyBmYWxzZSA6IHRydWU7CgovKioKICBFbXB0eSBmdW5jdGlvbi4gVXNl
        ZnVsIGZvciBzb21lIG9wZXJhdGlvbnMuIEFsd2F5cyByZXR1cm5zIGB0aGlz
        YC4KCiAgQG1ldGhvZCBLCiAgQHByaXZhdGUKICBAcmV0dXJuIHtPYmplY3R9
        CiovCkVtYmVyLksgPSBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH07CgoK
        Ly8gU3R1YiBvdXQgdGhlIG1ldGhvZHMgZGVmaW5lZCBieSB0aGUgZW1iZXIt
        ZGVidWcgcGFja2FnZSBpbiBjYXNlIGl0J3Mgbm90IGxvYWRlZAoKaWYgKCd1
        bmRlZmluZWQnID09PSB0eXBlb2YgRW1iZXIuYXNzZXJ0KSB7IEVtYmVyLmFz
        c2VydCA9IEVtYmVyLks7IH0KaWYgKCd1bmRlZmluZWQnID09PSB0eXBlb2Yg
        RW1iZXIud2FybikgeyBFbWJlci53YXJuID0gRW1iZXIuSzsgfQppZiAoJ3Vu
        ZGVmaW5lZCcgPT09IHR5cGVvZiBFbWJlci5kZWJ1ZykgeyBFbWJlci5kZWJ1
        ZyA9IEVtYmVyLks7IH0KaWYgKCd1bmRlZmluZWQnID09PSB0eXBlb2YgRW1i
        ZXIuZGVwcmVjYXRlKSB7IEVtYmVyLmRlcHJlY2F0ZSA9IEVtYmVyLks7IH0K
        aWYgKCd1bmRlZmluZWQnID09PSB0eXBlb2YgRW1iZXIuZGVwcmVjYXRlRnVu
        YykgewogIEVtYmVyLmRlcHJlY2F0ZUZ1bmMgPSBmdW5jdGlvbihfLCBmdW5j
        KSB7IHJldHVybiBmdW5jOyB9Owp9CgovKioKICBQcmV2aW91c2x5IHdlIHVz
        ZWQgYEVtYmVyLiQudXVpZGAsIGhvd2V2ZXIgYCQudXVpZGAgaGFzIGJlZW4g
        cmVtb3ZlZCBmcm9tCiAgalF1ZXJ5IG1hc3Rlci4gV2UnbGwganVzdCBib290
        c3RyYXAgb3VyIG93biB1dWlkIG5vdy4KCiAgQHByb3BlcnR5IHV1aWQKICBA
        dHlwZSBOdW1iZXIKICBAcHJpdmF0ZQoqLwpFbWJlci51dWlkID0gMDsKCi8q
        KgogIE1lcmdlIHRoZSBjb250ZW50cyBvZiB0d28gb2JqZWN0cyB0b2dldGhl
        ciBpbnRvIHRoZSBmaXJzdCBvYmplY3QuCgogIGBgYGphdmFzY3JpcHQKICBF
        bWJlci5tZXJnZSh7Zmlyc3Q6ICdUb20nfSwge2xhc3Q6ICdEYWxlJ30pOyAv
        LyB7Zmlyc3Q6ICdUb20nLCBsYXN0OiAnRGFsZSd9CiAgdmFyIGEgPSB7Zmly
        c3Q6ICdZZWh1ZGEnfSwgYiA9IHtsYXN0OiAnS2F0eid9OwogIEVtYmVyLm1l
        cmdlKGEsIGIpOyAvLyBhID09IHtmaXJzdDogJ1llaHVkYScsIGxhc3Q6ICdL
        YXR6J30sIGIgPT0ge2xhc3Q6ICdLYXR6J30KICBgYGAKCiAgQG1ldGhvZCBt
        ZXJnZQogIEBmb3IgRW1iZXIKICBAcGFyYW0ge09iamVjdH0gb3JpZ2luYWwg
        VGhlIG9iamVjdCB0byBtZXJnZSBpbnRvCiAgQHBhcmFtIHtPYmplY3R9IHVw
        ZGF0ZXMgVGhlIG9iamVjdCB0byBjb3B5IHByb3BlcnRpZXMgZnJvbQogIEBy
        ZXR1cm4ge09iamVjdH0KKi8KRW1iZXIubWVyZ2UgPSBmdW5jdGlvbihvcmln
        aW5hbCwgdXBkYXRlcykgewogIGZvciAodmFyIHByb3AgaW4gdXBkYXRlcykg
        ewogICAgaWYgKCF1cGRhdGVzLmhhc093blByb3BlcnR5KHByb3ApKSB7IGNv
        bnRpbnVlOyB9CiAgICBvcmlnaW5hbFtwcm9wXSA9IHVwZGF0ZXNbcHJvcF07
        CiAgfQogIHJldHVybiBvcmlnaW5hbDsKfTsKCi8qKgogIFJldHVybnMgdHJ1
        ZSBpZiB0aGUgcGFzc2VkIHZhbHVlIGlzIG51bGwgb3IgdW5kZWZpbmVkLiBU
        aGlzIGF2b2lkcyBlcnJvcnMKICBmcm9tIEpTTGludCBjb21wbGFpbmluZyBh
        Ym91dCB1c2Ugb2YgPT0sIHdoaWNoIGNhbiBiZSB0ZWNobmljYWxseQogIGNv
        bmZ1c2luZy4KCiAgYGBgamF2YXNjcmlwdAogIEVtYmVyLmlzTm9uZSgpOyAg
        ICAgICAgICAgICAgLy8gdHJ1ZQogIEVtYmVyLmlzTm9uZShudWxsKTsgICAg
        ICAgICAgLy8gdHJ1ZQogIEVtYmVyLmlzTm9uZSh1bmRlZmluZWQpOyAgICAg
        Ly8gdHJ1ZQogIEVtYmVyLmlzTm9uZSgnJyk7ICAgICAgICAgICAgLy8gZmFs
        c2UKICBFbWJlci5pc05vbmUoW10pOyAgICAgICAgICAgIC8vIGZhbHNlCiAg
        RW1iZXIuaXNOb25lKGZ1bmN0aW9uKCkge30pOyAgLy8gZmFsc2UKICBgYGAK
        CiAgQG1ldGhvZCBpc05vbmUKICBAZm9yIEVtYmVyCiAgQHBhcmFtIHtPYmpl
        Y3R9IG9iaiBWYWx1ZSB0byB0ZXN0CiAgQHJldHVybiB7Qm9vbGVhbn0KKi8K
        RW1iZXIuaXNOb25lID0gZnVuY3Rpb24ob2JqKSB7CiAgcmV0dXJuIG9iaiA9
        PT0gbnVsbCB8fCBvYmogPT09IHVuZGVmaW5lZDsKfTsKRW1iZXIubm9uZSA9
        IEVtYmVyLmRlcHJlY2F0ZUZ1bmMoIkVtYmVyLm5vbmUgaXMgZGVwcmVjYXRl
        ZC4gUGxlYXNlIHVzZSBFbWJlci5pc05vbmUgaW5zdGVhZC4iLCBFbWJlci5p
        c05vbmUpOwoKLyoqCiAgVmVyaWZpZXMgdGhhdCBhIHZhbHVlIGlzIGBudWxs
        YCBvciBhbiBlbXB0eSBzdHJpbmcsIGVtcHR5IGFycmF5LAogIG9yIGVtcHR5
        IGZ1bmN0aW9uLgoKICBDb25zdHJhaW5zIHRoZSBydWxlcyBvbiBgRW1iZXIu
        aXNOb25lYCBieSByZXR1cm5pbmcgZmFsc2UgZm9yIGVtcHR5CiAgc3RyaW5n
        IGFuZCBlbXB0eSBhcnJheXMuCgogIGBgYGphdmFzY3JpcHQKICBFbWJlci5p
        c0VtcHR5KCk7ICAgICAgICAgICAgICAgIC8vIHRydWUKICBFbWJlci5pc0Vt
        cHR5KG51bGwpOyAgICAgICAgICAgIC8vIHRydWUKICBFbWJlci5pc0VtcHR5
        KHVuZGVmaW5lZCk7ICAgICAgIC8vIHRydWUKICBFbWJlci5pc0VtcHR5KCcn
        KTsgICAgICAgICAgICAgIC8vIHRydWUKICBFbWJlci5pc0VtcHR5KFtdKTsg
        ICAgICAgICAgICAgIC8vIHRydWUKICBFbWJlci5pc0VtcHR5KCdBZGFtIEhh
        d2tpbnMnKTsgIC8vIGZhbHNlCiAgRW1iZXIuaXNFbXB0eShbMCwxLDJdKTsg
        ICAgICAgICAvLyBmYWxzZQogIGBgYAoKICBAbWV0aG9kIGlzRW1wdHkKICBA
        Zm9yIEVtYmVyCiAgQHBhcmFtIHtPYmplY3R9IG9iaiBWYWx1ZSB0byB0ZXN0
        CiAgQHJldHVybiB7Qm9vbGVhbn0KKi8KRW1iZXIuaXNFbXB0eSA9IGZ1bmN0
        aW9uKG9iaikgewogIHJldHVybiBFbWJlci5pc05vbmUob2JqKSB8fCAob2Jq
        Lmxlbmd0aCA9PT0gMCAmJiB0eXBlb2Ygb2JqICE9PSAnZnVuY3Rpb24nKSB8
        fCAodHlwZW9mIG9iaiA9PT0gJ29iamVjdCcgJiYgRW1iZXIuZ2V0KG9iaiwg
        J2xlbmd0aCcpID09PSAwKTsKfTsKRW1iZXIuZW1wdHkgPSBFbWJlci5kZXBy
        ZWNhdGVGdW5jKCJFbWJlci5lbXB0eSBpcyBkZXByZWNhdGVkLiBQbGVhc2Ug
        dXNlIEVtYmVyLmlzRW1wdHkgaW5zdGVhZC4iLCBFbWJlci5pc0VtcHR5KTsK
        CgogIC8qKgogICAgQSB2YWx1ZSBpcyBibGFuayBpZiBpdCBpcyBlbXB0eSBv
        ciBhIHdoaXRlc3BhY2Ugc3RyaW5nLgoKICAgIGBgYGphdmFzY3JpcHQKICAg
        IEVtYmVyLmlzQmxhbmsoKTsgICAgICAgICAgICAgICAgLy8gdHJ1ZQogICAg
        RW1iZXIuaXNCbGFuayhudWxsKTsgICAgICAgICAgICAvLyB0cnVlCiAgICBF
        bWJlci5pc0JsYW5rKHVuZGVmaW5lZCk7ICAgICAgIC8vIHRydWUKICAgIEVt
        YmVyLmlzQmxhbmsoJycpOyAgICAgICAgICAgICAgLy8gdHJ1ZQogICAgRW1i
        ZXIuaXNCbGFuayhbXSk7ICAgICAgICAgICAgICAvLyB0cnVlCiAgICBFbWJl
        ci5pc0JsYW5rKCdcblx0Jyk7ICAgICAgICAgIC8vIHRydWUKICAgIEVtYmVy
        LmlzQmxhbmsoJyAgJyk7ICAgICAgICAgICAgLy8gdHJ1ZQogICAgRW1iZXIu
        aXNCbGFuayh7fSk7ICAgICAgICAgICAgICAvLyBmYWxzZQogICAgRW1iZXIu
        aXNCbGFuaygnXG5cdCBIZWxsbycpOyAgICAvLyBmYWxzZQogICAgRW1iZXIu
        aXNCbGFuaygnSGVsbG8gd29ybGQnKTsgICAvLyBmYWxzZQogICAgRW1iZXIu
        aXNCbGFuayhbMSwyLDNdKTsgICAgICAgICAvLyBmYWxzZQogICAgYGBgCgog
        ICAgQG1ldGhvZCBpc0JsYW5rCiAgICBAZm9yIEVtYmVyCiAgICBAcGFyYW0g
        e09iamVjdH0gb2JqIFZhbHVlIHRvIHRlc3QKICAgIEByZXR1cm4ge0Jvb2xl
        YW59CiAgKi8KICBFbWJlci5pc0JsYW5rID0gZnVuY3Rpb24ob2JqKSB7CiAg
        ICByZXR1cm4gRW1iZXIuaXNFbXB0eShvYmopIHx8ICh0eXBlb2Ygb2JqID09
        PSAnc3RyaW5nJyAmJiBvYmoubWF0Y2goL1xTLykgPT09IG51bGwpOwogIH07
        CgoKfSkoKTsKCgoKKGZ1bmN0aW9uKCkgewovKmdsb2JhbHMgTm9kZSAqLwov
        KioKQG1vZHVsZSBlbWJlci1tZXRhbAoqLwoKLyoqCiAgUGxhdGZvcm0gc3Bl
        Y2lmaWMgbWV0aG9kcyBhbmQgZmVhdHVyZSBkZXRlY3RvcnMgbmVlZGVkIGJ5
        IHRoZSBmcmFtZXdvcmsuCgogIEBjbGFzcyBwbGF0Zm9ybQogIEBuYW1lc3Bh
        Y2UgRW1iZXIKICBAc3RhdGljCiovCnZhciBwbGF0Zm9ybSA9IEVtYmVyLnBs
        YXRmb3JtID0ge307CgoKLyoqCiAgSWRlbnRpY2FsIHRvIGBPYmplY3QuY3Jl
        YXRlKClgLiBJbXBsZW1lbnRzIGlmIG5vdCBhdmFpbGFibGUgbmF0aXZlbHku
        CgogIEBtZXRob2QgY3JlYXRlCiAgQGZvciBFbWJlcgoqLwpFbWJlci5jcmVh
        dGUgPSBPYmplY3QuY3JlYXRlOwoKLy8gSUU4IGhhcyBPYmplY3QuY3JlYXRl
        IGJ1dCBpdCBjb3VsZG4ndCB0cmVhdCBwcm9wZXJ0eSBkZXNjcmlwdG9ycy4K
        aWYgKEVtYmVyLmNyZWF0ZSkgewogIGlmIChFbWJlci5jcmVhdGUoe2E6IDF9
        LCB7YToge3ZhbHVlOiAyfX0pLmEgIT09IDIpIHsKICAgIEVtYmVyLmNyZWF0
        ZSA9IG51bGw7CiAgfQp9CgovLyBTVFVCX09CSkVDVF9DUkVBVEUgYWxsb3dz
        IHVzIHRvIG92ZXJyaWRlIG90aGVyIGxpYnJhcmllcyB0aGF0IHN0dWIKLy8g
        T2JqZWN0LmNyZWF0ZSBkaWZmZXJlbnQgdGhhbiB3ZSB3b3VsZCBwcmVmZXIK
        aWYgKCFFbWJlci5jcmVhdGUgfHwgRW1iZXIuRU5WLlNUVUJfT0JKRUNUX0NS
        RUFURSkgewogIHZhciBLID0gZnVuY3Rpb24oKSB7fTsKCiAgRW1iZXIuY3Jl
        YXRlID0gZnVuY3Rpb24ob2JqLCBwcm9wcykgewogICAgSy5wcm90b3R5cGUg
        PSBvYmo7CiAgICBvYmogPSBuZXcgSygpOwogICAgaWYgKHByb3BzKSB7CiAg
        ICAgIEsucHJvdG90eXBlID0gb2JqOwogICAgICBmb3IgKHZhciBwcm9wIGlu
        IHByb3BzKSB7CiAgICAgICAgSy5wcm90b3R5cGVbcHJvcF0gPSBwcm9wc1tw
        cm9wXS52YWx1ZTsKICAgICAgfQogICAgICBvYmogPSBuZXcgSygpOwogICAg
        fQogICAgSy5wcm90b3R5cGUgPSBudWxsOwoKICAgIHJldHVybiBvYmo7CiAg
        fTsKCiAgRW1iZXIuY3JlYXRlLmlzU2ltdWxhdGVkID0gdHJ1ZTsKfQoKdmFy
        IGRlZmluZVByb3BlcnR5ID0gT2JqZWN0LmRlZmluZVByb3BlcnR5Owp2YXIg
        Y2FuUmVkZWZpbmVQcm9wZXJ0aWVzLCBjYW5EZWZpbmVQcm9wZXJ0eU9uRE9N
        OwoKLy8gQ2F0Y2ggSUU4IHdoZXJlIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSBl
        eGlzdHMgYnV0IG9ubHkgd29ya3Mgb24gRE9NIGVsZW1lbnRzCmlmIChkZWZp
        bmVQcm9wZXJ0eSkgewogIHRyeSB7CiAgICBkZWZpbmVQcm9wZXJ0eSh7fSwg
        J2EnLHtnZXQ6ZnVuY3Rpb24oKSB7fX0pOwogIH0gY2F0Y2ggKGUpIHsKICAg
        IGRlZmluZVByb3BlcnR5ID0gbnVsbDsKICB9Cn0KCmlmIChkZWZpbmVQcm9w
        ZXJ0eSkgewogIC8vIERldGVjdHMgYSBidWcgaW4gQW5kcm9pZCA8My4yIHdo
        ZXJlIHlvdSBjYW5ub3QgcmVkZWZpbmUgYSBwcm9wZXJ0eSB1c2luZwogIC8v
        IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSBvbmNlIGFjY2Vzc29ycyBoYXZlIGFs
        cmVhZHkgYmVlbiBzZXQuCiAgY2FuUmVkZWZpbmVQcm9wZXJ0aWVzID0gKGZ1
        bmN0aW9uKCkgewogICAgdmFyIG9iaiA9IHt9OwoKICAgIGRlZmluZVByb3Bl
        cnR5KG9iaiwgJ2EnLCB7CiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICAg
        ICAgZW51bWVyYWJsZTogdHJ1ZSwKICAgICAgZ2V0OiBmdW5jdGlvbigpIHsg
        fSwKICAgICAgc2V0OiBmdW5jdGlvbigpIHsgfQogICAgfSk7CgogICAgZGVm
        aW5lUHJvcGVydHkob2JqLCAnYScsIHsKICAgICAgY29uZmlndXJhYmxlOiB0
        cnVlLAogICAgICBlbnVtZXJhYmxlOiB0cnVlLAogICAgICB3cml0YWJsZTog
        dHJ1ZSwKICAgICAgdmFsdWU6IHRydWUKICAgIH0pOwoKICAgIHJldHVybiBv
        YmouYSA9PT0gdHJ1ZTsKICB9KSgpOwoKICAvLyBUaGlzIGlzIGZvciBTYWZh
        cmkgNS4wLCB3aGljaCBzdXBwb3J0cyBPYmplY3QuZGVmaW5lUHJvcGVydHks
        IGJ1dCBub3QKICAvLyBvbiBET00gbm9kZXMuCiAgY2FuRGVmaW5lUHJvcGVy
        dHlPbkRPTSA9IChmdW5jdGlvbigpIHsKICAgIHRyeSB7CiAgICAgIGRlZmlu
        ZVByb3BlcnR5KGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpLCAnZGVm
        aW5lUHJvcGVydHlPbkRPTScsIHt9KTsKICAgICAgcmV0dXJuIHRydWU7CiAg
        ICB9IGNhdGNoKGUpIHsgfQoKICAgIHJldHVybiBmYWxzZTsKICB9KSgpOwoK
        ICBpZiAoIWNhblJlZGVmaW5lUHJvcGVydGllcykgewogICAgZGVmaW5lUHJv
        cGVydHkgPSBudWxsOwogIH0gZWxzZSBpZiAoIWNhbkRlZmluZVByb3BlcnR5
        T25ET00pIHsKICAgIGRlZmluZVByb3BlcnR5ID0gZnVuY3Rpb24ob2JqLCBr
        ZXlOYW1lLCBkZXNjKSB7CiAgICAgIHZhciBpc05vZGU7CgogICAgICBpZiAo
        dHlwZW9mIE5vZGUgPT09ICJvYmplY3QiKSB7CiAgICAgICAgaXNOb2RlID0g
        b2JqIGluc3RhbmNlb2YgTm9kZTsKICAgICAgfSBlbHNlIHsKICAgICAgICBp
        c05vZGUgPSB0eXBlb2Ygb2JqID09PSAib2JqZWN0IiAmJiB0eXBlb2Ygb2Jq
        Lm5vZGVUeXBlID09PSAibnVtYmVyIiAmJiB0eXBlb2Ygb2JqLm5vZGVOYW1l
        ID09PSAic3RyaW5nIjsKICAgICAgfQoKICAgICAgaWYgKGlzTm9kZSkgewog
        ICAgICAgIC8vIFRPRE86IFNob3VsZCB3ZSBoYXZlIGEgd2FybmluZyBoZXJl
        PwogICAgICAgIHJldHVybiAob2JqW2tleU5hbWVdID0gZGVzYy52YWx1ZSk7
        CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIE9iamVjdC5kZWZpbmVQ
        cm9wZXJ0eShvYmosIGtleU5hbWUsIGRlc2MpOwogICAgICB9CiAgICB9Owog
        IH0KfQoKLyoqCkBjbGFzcyBwbGF0Zm9ybQpAbmFtZXNwYWNlIEVtYmVyCiov
        CgovKioKICBJZGVudGljYWwgdG8gYE9iamVjdC5kZWZpbmVQcm9wZXJ0eSgp
        YC4gSW1wbGVtZW50cyBhcyBtdWNoIGZ1bmN0aW9uYWxpdHkKICBhcyBwb3Nz
        aWJsZSBpZiBub3QgYXZhaWxhYmxlIG5hdGl2ZWx5LgoKICBAbWV0aG9kIGRl
        ZmluZVByb3BlcnR5CiAgQHBhcmFtIHtPYmplY3R9IG9iaiBUaGUgb2JqZWN0
        IHRvIG1vZGlmeQogIEBwYXJhbSB7U3RyaW5nfSBrZXlOYW1lIHByb3BlcnR5
        IG5hbWUgdG8gbW9kaWZ5CiAgQHBhcmFtIHtPYmplY3R9IGRlc2MgZGVzY3Jp
        cHRvciBoYXNoCiAgQHJldHVybiB7dm9pZH0KKi8KcGxhdGZvcm0uZGVmaW5l
        UHJvcGVydHkgPSBkZWZpbmVQcm9wZXJ0eTsKCi8qKgogIFNldCB0byB0cnVl
        IGlmIHRoZSBwbGF0Zm9ybSBzdXBwb3J0cyBuYXRpdmUgZ2V0dGVycyBhbmQg
        c2V0dGVycy4KCiAgQHByb3BlcnR5IGhhc1Byb3BlcnR5QWNjZXNzb3JzCiAg
        QGZpbmFsCiovCnBsYXRmb3JtLmhhc1Byb3BlcnR5QWNjZXNzb3JzID0gdHJ1
        ZTsKCmlmICghcGxhdGZvcm0uZGVmaW5lUHJvcGVydHkpIHsKICBwbGF0Zm9y
        bS5oYXNQcm9wZXJ0eUFjY2Vzc29ycyA9IGZhbHNlOwoKICBwbGF0Zm9ybS5k
        ZWZpbmVQcm9wZXJ0eSA9IGZ1bmN0aW9uKG9iaiwga2V5TmFtZSwgZGVzYykg
        ewogICAgaWYgKCFkZXNjLmdldCkgeyBvYmpba2V5TmFtZV0gPSBkZXNjLnZh
        bHVlOyB9CiAgfTsKCiAgcGxhdGZvcm0uZGVmaW5lUHJvcGVydHkuaXNTaW11
        bGF0ZWQgPSB0cnVlOwp9CgppZiAoRW1iZXIuRU5WLk1BTkRBVE9SWV9TRVRU
        RVIgJiYgIXBsYXRmb3JtLmhhc1Byb3BlcnR5QWNjZXNzb3JzKSB7CiAgRW1i
        ZXIuRU5WLk1BTkRBVE9SWV9TRVRURVIgPSBmYWxzZTsKfQoKfSkoKTsKCgoK
        KGZ1bmN0aW9uKCkgewovKmpzaGludCBuZXdjYXA6ZmFsc2UqLwovKioKQG1v
        ZHVsZSBlbWJlci1tZXRhbAoqLwoKLy8gTk9URTogVGhlcmUgaXMgYSBidWcg
        aW4ganNoaW50IHRoYXQgZG9lc24ndCByZWNvZ25pemUgYE9iamVjdCgpYCB3
        aXRob3V0IGBuZXdgCi8vIGFzIGJlaW5nIG9rIHVubGVzcyBib3RoIGBuZXdj
        YXA6ZmFsc2VgIGFuZCBub3QgYHVzZSBzdHJpY3RgLgovLyBodHRwczovL2dp
        dGh1Yi5jb20vanNoaW50L2pzaGludC9pc3N1ZXMvMzkyCgovLyBUZXN0aW5n
        IHRoaXMgaXMgbm90IGlkZWFsLCBidXQgd2Ugd2FudCB0byB1c2UgbmF0aXZl
        IGZ1bmN0aW9ucwovLyBpZiBhdmFpbGFibGUsIGJ1dCBub3QgdG8gdXNlIHZl
        cnNpb25zIGNyZWF0ZWQgYnkgbGlicmFyaWVzIGxpa2UgUHJvdG90eXBlCnZh
        ciBpc05hdGl2ZUZ1bmMgPSBmdW5jdGlvbihmdW5jKSB7CiAgLy8gVGhpcyBz
        aG91bGQgcHJvYmFibHkgd29yayBpbiBhbGwgYnJvd3NlcnMgbGlrZWx5IHRv
        IGhhdmUgRVM1IGFycmF5IG1ldGhvZHMKICByZXR1cm4gZnVuYyAmJiBGdW5j
        dGlvbi5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChmdW5jKS5pbmRleE9mKCdb
        bmF0aXZlIGNvZGVdJykgPiAtMTsKfTsKCi8vIEZyb206IGh0dHBzOi8vZGV2
        ZWxvcGVyLm1vemlsbGEub3JnL2VuL0phdmFTY3JpcHQvUmVmZXJlbmNlL0ds
        b2JhbF9PYmplY3RzL2FycmF5L21hcAp2YXIgYXJyYXlNYXAgPSBpc05hdGl2
        ZUZ1bmMoQXJyYXkucHJvdG90eXBlLm1hcCkgPyBBcnJheS5wcm90b3R5cGUu
        bWFwIDogZnVuY3Rpb24oZnVuIC8qLCB0aGlzcCAqLykgewogIC8vInVzZSBz
        dHJpY3QiOwoKICBpZiAodGhpcyA9PT0gdm9pZCAwIHx8IHRoaXMgPT09IG51
        bGwpIHsKICAgIHRocm93IG5ldyBUeXBlRXJyb3IoKTsKICB9CgogIHZhciB0
        ID0gT2JqZWN0KHRoaXMpOwogIHZhciBsZW4gPSB0Lmxlbmd0aCA+Pj4gMDsK
        ICBpZiAodHlwZW9mIGZ1biAhPT0gImZ1bmN0aW9uIikgewogICAgdGhyb3cg
        bmV3IFR5cGVFcnJvcigpOwogIH0KCiAgdmFyIHJlcyA9IG5ldyBBcnJheShs
        ZW4pOwogIHZhciB0aGlzcCA9IGFyZ3VtZW50c1sxXTsKICBmb3IgKHZhciBp
        ID0gMDsgaSA8IGxlbjsgaSsrKSB7CiAgICBpZiAoaSBpbiB0KSB7CiAgICAg
        IHJlc1tpXSA9IGZ1bi5jYWxsKHRoaXNwLCB0W2ldLCBpLCB0KTsKICAgIH0K
        ICB9CgogIHJldHVybiByZXM7Cn07CgovLyBGcm9tOiBodHRwczovL2RldmVs
        b3Blci5tb3ppbGxhLm9yZy9lbi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9i
        YWxfT2JqZWN0cy9hcnJheS9mb3JlYWNoCnZhciBhcnJheUZvckVhY2ggPSBp
        c05hdGl2ZUZ1bmMoQXJyYXkucHJvdG90eXBlLmZvckVhY2gpID8gQXJyYXku
        cHJvdG90eXBlLmZvckVhY2ggOiBmdW5jdGlvbihmdW4gLyosIHRoaXNwICov
        KSB7CiAgLy8idXNlIHN0cmljdCI7CgogIGlmICh0aGlzID09PSB2b2lkIDAg
        fHwgdGhpcyA9PT0gbnVsbCkgewogICAgdGhyb3cgbmV3IFR5cGVFcnJvcigp
        OwogIH0KCiAgdmFyIHQgPSBPYmplY3QodGhpcyk7CiAgdmFyIGxlbiA9IHQu
        bGVuZ3RoID4+PiAwOwogIGlmICh0eXBlb2YgZnVuICE9PSAiZnVuY3Rpb24i
        KSB7CiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCk7CiAgfQoKICB2YXIgdGhp
        c3AgPSBhcmd1bWVudHNbMV07CiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47
        IGkrKykgewogICAgaWYgKGkgaW4gdCkgewogICAgICBmdW4uY2FsbCh0aGlz
        cCwgdFtpXSwgaSwgdCk7CiAgICB9CiAgfQp9OwoKdmFyIGFycmF5SW5kZXhP
        ZiA9IGlzTmF0aXZlRnVuYyhBcnJheS5wcm90b3R5cGUuaW5kZXhPZikgPyBB
        cnJheS5wcm90b3R5cGUuaW5kZXhPZiA6IGZ1bmN0aW9uIChvYmosIGZyb21J
        bmRleCkgewogIGlmIChmcm9tSW5kZXggPT09IG51bGwgfHwgZnJvbUluZGV4
        ID09PSB1bmRlZmluZWQpIHsgZnJvbUluZGV4ID0gMDsgfQogIGVsc2UgaWYg
        KGZyb21JbmRleCA8IDApIHsgZnJvbUluZGV4ID0gTWF0aC5tYXgoMCwgdGhp
        cy5sZW5ndGggKyBmcm9tSW5kZXgpOyB9CiAgZm9yICh2YXIgaSA9IGZyb21J
        bmRleCwgaiA9IHRoaXMubGVuZ3RoOyBpIDwgajsgaSsrKSB7CiAgICBpZiAo
        dGhpc1tpXSA9PT0gb2JqKSB7IHJldHVybiBpOyB9CiAgfQogIHJldHVybiAt
        MTsKfTsKCnZhciBhcnJheUZpbHRlciA9IGlzTmF0aXZlRnVuYyhBcnJheS5w
        cm90b3R5cGUuZmlsdGVyKSA/IEFycmF5LnByb3RvdHlwZS5maWx0ZXIgOiBm
        dW5jdGlvbiAoZm4sIGNvbnRleHQpIHsKICB2YXIgaSwKICB2YWx1ZSwKICBy
        ZXN1bHQgPSBbXSwKICBsZW5ndGggPSB0aGlzLmxlbmd0aDsKCiAgZm9yIChp
        ID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7CiAgICBpZiAodGhpcy5oYXNPd25Q
        cm9wZXJ0eShpKSkgewogICAgICB2YWx1ZSA9IHRoaXNbaV07CiAgICAgIGlm
        IChmbi5jYWxsKGNvbnRleHQsIHZhbHVlLCBpLCB0aGlzKSkgewogICAgICAg
        IHJlc3VsdC5wdXNoKHZhbHVlKTsKICAgICAgfQogICAgfQogIH0KICByZXR1
        cm4gcmVzdWx0Owp9OwoKLyoqCiAgQXJyYXkgcG9seWZpbGxzIHRvIHN1cHBv
        cnQgRVM1IGZlYXR1cmVzIGluIG9sZGVyIGJyb3dzZXJzLgoKICBAbmFtZXNw
        YWNlIEVtYmVyCiAgQHByb3BlcnR5IEFycmF5UG9seWZpbGxzCiovCkVtYmVy
        LkFycmF5UG9seWZpbGxzID0gewogIG1hcDogYXJyYXlNYXAsCiAgZm9yRWFj
        aDogYXJyYXlGb3JFYWNoLAogIGZpbHRlcjogYXJyYXlGaWx0ZXIsCiAgaW5k
        ZXhPZjogYXJyYXlJbmRleE9mCn07CgppZiAoRW1iZXIuU0hJTV9FUzUpIHsK
        ICBpZiAoIUFycmF5LnByb3RvdHlwZS5tYXApIHsKICAgIEFycmF5LnByb3Rv
        dHlwZS5tYXAgPSBhcnJheU1hcDsKICB9CgogIGlmICghQXJyYXkucHJvdG90
        eXBlLmZvckVhY2gpIHsKICAgIEFycmF5LnByb3RvdHlwZS5mb3JFYWNoID0g
        YXJyYXlGb3JFYWNoOwogIH0KCiAgaWYgKCFBcnJheS5wcm90b3R5cGUuZmls
        dGVyKSB7CiAgICBBcnJheS5wcm90b3R5cGUuZmlsdGVyID0gYXJyYXlGaWx0
        ZXI7CiAgfQoKICBpZiAoIUFycmF5LnByb3RvdHlwZS5pbmRleE9mKSB7CiAg
        ICBBcnJheS5wcm90b3R5cGUuaW5kZXhPZiA9IGFycmF5SW5kZXhPZjsKICB9
        Cn0KCn0pKCk7CgoKCihmdW5jdGlvbigpIHsKdmFyIGVycm9yUHJvcHMgPSBb
        J2Rlc2NyaXB0aW9uJywgJ2ZpbGVOYW1lJywgJ2xpbmVOdW1iZXInLCAnbWVz
        c2FnZScsICduYW1lJywgJ251bWJlcicsICdzdGFjayddOwoKLyoqCiAgQSBz
        dWJjbGFzcyBvZiB0aGUgSmF2YVNjcmlwdCBFcnJvciBvYmplY3QgZm9yIHVz
        ZSBpbiBFbWJlci4KCiAgQGNsYXNzIEVycm9yCiAgQG5hbWVzcGFjZSBFbWJl
        cgogIEBleHRlbmRzIEVycm9yCiAgQGNvbnN0cnVjdG9yCiovCkVtYmVyLkVy
        cm9yID0gZnVuY3Rpb24oKSB7CiAgdmFyIHRtcCA9IEVycm9yLmFwcGx5KHRo
        aXMsIGFyZ3VtZW50cyk7CgogIC8vIEFkZHMgYSBgc3RhY2tgIHByb3BlcnR5
        IHRvIHRoZSBnaXZlbiBlcnJvciBvYmplY3QgdGhhdCB3aWxsIHlpZWxkIHRo
        ZQogIC8vIHN0YWNrIHRyYWNlIGF0IHRoZSB0aW1lIGNhcHR1cmVTdGFja1Ry
        YWNlIHdhcyBjYWxsZWQuCiAgLy8gV2hlbiBjb2xsZWN0aW5nIHRoZSBzdGFj
        ayB0cmFjZSBhbGwgZnJhbWVzIGFib3ZlIHRoZSB0b3Btb3N0IGNhbGwKICAv
        LyB0byB0aGlzIGZ1bmN0aW9uLCBpbmNsdWRpbmcgdGhhdCBjYWxsLCB3aWxs
        IGJlIGxlZnQgb3V0IG9mIHRoZQogIC8vIHN0YWNrIHRyYWNlLgogIC8vIFRo
        aXMgaXMgdXNlZnVsIGJlY2F1c2Ugd2UgY2FuIGhpZGUgRW1iZXIgaW1wbGVt
        ZW50YXRpb24gZGV0YWlscwogIC8vIHRoYXQgYXJlIG5vdCB2ZXJ5IGhlbHBm
        dWwgZm9yIHRoZSB1c2VyLgogIGlmIChFcnJvci5jYXB0dXJlU3RhY2tUcmFj
        ZSkgewogICAgRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UodGhpcywgRW1iZXIu
        RXJyb3IpOwogIH0KICAvLyBVbmZvcnR1bmF0ZWx5IGVycm9ycyBhcmUgbm90
        IGVudW1lcmFibGUgaW4gQ2hyb21lIChhdCBsZWFzdCksIHNvIGBmb3IgcHJv
        cCBpbiB0bXBgIGRvZXNuJ3Qgd29yay4KICBmb3IgKHZhciBpZHggPSAwOyBp
        ZHggPCBlcnJvclByb3BzLmxlbmd0aDsgaWR4KyspIHsKICAgIHRoaXNbZXJy
        b3JQcm9wc1tpZHhdXSA9IHRtcFtlcnJvclByb3BzW2lkeF1dOwogIH0KfTsK
        CkVtYmVyLkVycm9yLnByb3RvdHlwZSA9IEVtYmVyLmNyZWF0ZShFcnJvci5w
        cm90b3R5cGUpOwoKLy8gLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4u
        Li4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLgovLyBFUlJPUiBIQU5ETElO
        RwovLwoKLyoqCiAgQSBmdW5jdGlvbiBtYXkgYmUgYXNzaWduZWQgdG8gYEVt
        YmVyLm9uZXJyb3JgIHRvIGJlIGNhbGxlZCB3aGVuIEVtYmVyCiAgaW50ZXJu
        YWxzIGVuY291bnRlciBhbiBlcnJvci4gVGhpcyBpcyB1c2VmdWwgZm9yIHNw
        ZWNpYWxpemVkIGVycm9yIGhhbmRsaW5nCiAgYW5kIHJlcG9ydGluZyBjb2Rl
        LgoKICBgYGBqYXZhc2NyaXB0CiAgRW1iZXIub25lcnJvciA9IGZ1bmN0aW9u
        KGVycm9yKSB7CiAgICBFbS4kLmFqYXgoJy9yZXBvcnQtZXJyb3InLCAnUE9T
        VCcsIHsKICAgICAgc3RhY2s6IGVycm9yLnN0YWNrLAogICAgICBvdGhlcklu
        Zm9ybWF0aW9uOiAnd2hhdGV2ZXIgYXBwIHN0YXRlIHlvdSB3YW50IHRvIHBy
        b3ZpZGUnCiAgICB9KTsKICB9OwogIGBgYAoKICBAZXZlbnQgb25lcnJvcgog
        IEBmb3IgRW1iZXIKICBAcGFyYW0ge0V4Y2VwdGlvbn0gZXJyb3IgdGhlIGVy
        cm9yIG9iamVjdAoqLwpFbWJlci5vbmVycm9yID0gbnVsbDsKCn0pKCk7CgoK
        CihmdW5jdGlvbigpIHsKLyoqCkBtb2R1bGUgZW1iZXItbWV0YWwKKi8KCi8q
        KgogIFByZWZpeCB1c2VkIGZvciBndWlkcyB0aHJvdWdoIG91dCBFbWJlci4K
        ICBAcHJpdmF0ZQoqLwpFbWJlci5HVUlEX1BSRUZJWCA9ICdlbWJlcic7CgoK
        dmFyIG9fZGVmaW5lUHJvcGVydHkgPSBFbWJlci5wbGF0Zm9ybS5kZWZpbmVQ
        cm9wZXJ0eSwKICAgIG9fY3JlYXRlID0gRW1iZXIuY3JlYXRlLAogICAgLy8g
        VXNlZCBmb3IgZ3VpZCBnZW5lcmF0aW9uLi4uCiAgICBHVUlEX0tFWSA9ICdf
        X2VtYmVyJysgKCsgbmV3IERhdGUoKSksCiAgICBudW1iZXJDYWNoZSAgPSBb
        XSwKICAgIHN0cmluZ0NhY2hlICA9IHt9LAogICAgdXVpZCA9IDA7Cgp2YXIg
        TUFOREFUT1JZX1NFVFRFUiA9IEVtYmVyLkVOVi5NQU5EQVRPUllfU0VUVEVS
        OwoKLyoqCiAgQSB1bmlxdWUga2V5IHVzZWQgdG8gYXNzaWduIGd1aWRzIGFu
        ZCBvdGhlciBwcml2YXRlIG1ldGFkYXRhIHRvIG9iamVjdHMuCiAgSWYgeW91
        IGluc3BlY3QgYW4gb2JqZWN0IGluIHlvdXIgYnJvd3NlciBkZWJ1Z2dlciB5
        b3Ugd2lsbCBvZnRlbiBzZWUgdGhlc2UuCiAgVGhleSBjYW4gYmUgc2FmZWx5
        IGlnbm9yZWQuCgogIE9uIGJyb3dzZXJzIHRoYXQgc3VwcG9ydCBpdCwgdGhl
        c2UgcHJvcGVydGllcyBhcmUgYWRkZWQgd2l0aCBlbnVtZXJhdGlvbgogIGRp
        c2FibGVkIHNvIHRoZXkgd29uJ3Qgc2hvdyB1cCB3aGVuIHlvdSBpdGVyYXRl
        IG92ZXIgeW91ciBwcm9wZXJ0aWVzLgoKICBAcHJpdmF0ZQogIEBwcm9wZXJ0
        eSBHVUlEX0tFWQogIEBmb3IgRW1iZXIKICBAdHlwZSBTdHJpbmcKICBAZmlu
        YWwKKi8KRW1iZXIuR1VJRF9LRVkgPSBHVUlEX0tFWTsKCnZhciBHVUlEX0RF
        U0MgPSB7CiAgd3JpdGFibGU6ICAgIGZhbHNlLAogIGNvbmZpZ3VyYWJsZTog
        ZmFsc2UsCiAgZW51bWVyYWJsZTogIGZhbHNlLAogIHZhbHVlOiBudWxsCn07
        CgovKioKICBHZW5lcmF0ZXMgYSBuZXcgZ3VpZCwgb3B0aW9uYWxseSBzYXZp
        bmcgdGhlIGd1aWQgdG8gdGhlIG9iamVjdCB0aGF0IHlvdQogIHBhc3MgaW4u
        IFlvdSB3aWxsIHJhcmVseSBuZWVkIHRvIHVzZSB0aGlzIG1ldGhvZC4gSW5z
        dGVhZCB5b3Ugc2hvdWxkCiAgY2FsbCBgRW1iZXIuZ3VpZEZvcihvYmopYCwg
        d2hpY2ggcmV0dXJuIGFuIGV4aXN0aW5nIGd1aWQgaWYgYXZhaWxhYmxlLgoK
        ICBAcHJpdmF0ZQogIEBtZXRob2QgZ2VuZXJhdGVHdWlkCiAgQGZvciBFbWJl
        cgogIEBwYXJhbSB7T2JqZWN0fSBbb2JqXSBPYmplY3QgdGhlIGd1aWQgd2ls
        bCBiZSB1c2VkIGZvci4gSWYgcGFzc2VkIGluLCB0aGUgZ3VpZCB3aWxsCiAg
        ICBiZSBzYXZlZCBvbiB0aGUgb2JqZWN0IGFuZCByZXVzZWQgd2hlbmV2ZXIg
        eW91IHBhc3MgdGhlIHNhbWUgb2JqZWN0CiAgICBhZ2Fpbi4KCiAgICBJZiBu
        byBvYmplY3QgaXMgcGFzc2VkLCBqdXN0IGdlbmVyYXRlIGEgbmV3IGd1aWQu
        CiAgQHBhcmFtIHtTdHJpbmd9IFtwcmVmaXhdIFByZWZpeCB0byBwbGFjZSBp
        biBmcm9udCBvZiB0aGUgZ3VpZC4gVXNlZnVsIHdoZW4geW91IHdhbnQgdG8K
        ICAgIHNlcGFyYXRlIHRoZSBndWlkIGludG8gc2VwYXJhdGUgbmFtZXNwYWNl
        cy4KICBAcmV0dXJuIHtTdHJpbmd9IHRoZSBndWlkCiovCkVtYmVyLmdlbmVy
        YXRlR3VpZCA9IGZ1bmN0aW9uIGdlbmVyYXRlR3VpZChvYmosIHByZWZpeCkg
        ewogIGlmICghcHJlZml4KSBwcmVmaXggPSBFbWJlci5HVUlEX1BSRUZJWDsK
        ICB2YXIgcmV0ID0gKHByZWZpeCArICh1dWlkKyspKTsKICBpZiAob2JqKSB7
        CiAgICBpZiAob2JqW0dVSURfS0VZXSA9PT0gbnVsbCkgewogICAgICBvYmpb
        R1VJRF9LRVldID0gcmV0OwogICAgfSBlbHNlIHsKICAgICAgR1VJRF9ERVND
        LnZhbHVlID0gcmV0OwogICAgICBvX2RlZmluZVByb3BlcnR5KG9iaiwgR1VJ
        RF9LRVksIEdVSURfREVTQyk7CiAgICB9CiAgfQogIHJldHVybiByZXQ7Cn07
        CgovKioKICBSZXR1cm5zIGEgdW5pcXVlIGlkIGZvciB0aGUgb2JqZWN0LiBJ
        ZiB0aGUgb2JqZWN0IGRvZXMgbm90IHlldCBoYXZlIGEgZ3VpZCwKICBvbmUg
        d2lsbCBiZSBhc3NpZ25lZCB0byBpdC4gWW91IGNhbiBjYWxsIHRoaXMgb24g
        YW55IG9iamVjdCwKICBgRW1iZXIuT2JqZWN0YC1iYXNlZCBvciBub3QsIGJ1
        dCBiZSBhd2FyZSB0aGF0IGl0IHdpbGwgYWRkIGEgYF9ndWlkYAogIHByb3Bl
        cnR5LgoKICBZb3UgY2FuIGFsc28gdXNlIHRoaXMgbWV0aG9kIG9uIERPTSBF
        bGVtZW50IG9iamVjdHMuCgogIEBwcml2YXRlCiAgQG1ldGhvZCBndWlkRm9y
        CiAgQGZvciBFbWJlcgogIEBwYXJhbSB7T2JqZWN0fSBvYmogYW55IG9iamVj
        dCwgc3RyaW5nLCBudW1iZXIsIEVsZW1lbnQsIG9yIHByaW1pdGl2ZQogIEBy
        ZXR1cm4ge1N0cmluZ30gdGhlIHVuaXF1ZSBndWlkIGZvciB0aGlzIGluc3Rh
        bmNlLgoqLwpFbWJlci5ndWlkRm9yID0gZnVuY3Rpb24gZ3VpZEZvcihvYmop
        IHsKCiAgLy8gc3BlY2lhbCBjYXNlcyB3aGVyZSB3ZSBkb24ndCB3YW50IHRv
        IGFkZCBhIGtleSB0byBvYmplY3QKICBpZiAob2JqID09PSB1bmRlZmluZWQp
        IHJldHVybiAiKHVuZGVmaW5lZCkiOwogIGlmIChvYmogPT09IG51bGwpIHJl
        dHVybiAiKG51bGwpIjsKCiAgdmFyIHJldDsKICB2YXIgdHlwZSA9IHR5cGVv
        ZiBvYmo7CgogIC8vIERvbid0IGFsbG93IHByb3RvdHlwZSBjaGFuZ2VzIHRv
        IFN0cmluZyBldGMuIHRvIGNoYW5nZSB0aGUgZ3VpZEZvcgogIHN3aXRjaCh0
        eXBlKSB7CiAgICBjYXNlICdudW1iZXInOgogICAgICByZXQgPSBudW1iZXJD
        YWNoZVtvYmpdOwogICAgICBpZiAoIXJldCkgcmV0ID0gbnVtYmVyQ2FjaGVb
        b2JqXSA9ICdudScrb2JqOwogICAgICByZXR1cm4gcmV0OwoKICAgIGNhc2Ug
        J3N0cmluZyc6CiAgICAgIHJldCA9IHN0cmluZ0NhY2hlW29ial07CiAgICAg
        IGlmICghcmV0KSByZXQgPSBzdHJpbmdDYWNoZVtvYmpdID0gJ3N0JysodXVp
        ZCsrKTsKICAgICAgcmV0dXJuIHJldDsKCiAgICBjYXNlICdib29sZWFuJzoK
        ICAgICAgcmV0dXJuIG9iaiA/ICcodHJ1ZSknIDogJyhmYWxzZSknOwoKICAg
        IGRlZmF1bHQ6CiAgICAgIGlmIChvYmpbR1VJRF9LRVldKSByZXR1cm4gb2Jq
        W0dVSURfS0VZXTsKICAgICAgaWYgKG9iaiA9PT0gT2JqZWN0KSByZXR1cm4g
        JyhPYmplY3QpJzsKICAgICAgaWYgKG9iaiA9PT0gQXJyYXkpICByZXR1cm4g
        JyhBcnJheSknOwogICAgICByZXQgPSAnZW1iZXInICsgKHV1aWQrKyk7Cgog
        ICAgICBpZiAob2JqW0dVSURfS0VZXSA9PT0gbnVsbCkgewogICAgICAgIG9i
        altHVUlEX0tFWV0gPSByZXQ7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgR1VJ
        RF9ERVNDLnZhbHVlID0gcmV0OwogICAgICAgIG9fZGVmaW5lUHJvcGVydHko
        b2JqLCBHVUlEX0tFWSwgR1VJRF9ERVNDKTsKICAgICAgfQogICAgICByZXR1
        cm4gcmV0OwogIH0KfTsKCi8vIC4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4u
        Li4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4KLy8gTUVUQQovLwoK
        dmFyIE1FVEFfREVTQyA9IEVtYmVyLk1FVEFfREVTQyA9IHsKICB3cml0YWJs
        ZTogICAgdHJ1ZSwKICBjb25maWd1cmFibGU6IGZhbHNlLAogIGVudW1lcmFi
        bGU6ICBmYWxzZSwKICB2YWx1ZTogbnVsbAp9OwoKdmFyIE1FVEFfS0VZID0g
        RW1iZXIuR1VJRF9LRVkrJ19tZXRhJzsKCi8qKgogIFRoZSBrZXkgdXNlZCB0
        byBzdG9yZSBtZXRhIGluZm9ybWF0aW9uIG9uIG9iamVjdCBmb3IgcHJvcGVy
        dHkgb2JzZXJ2aW5nLgoKICBAcHJvcGVydHkgTUVUQV9LRVkKICBAZm9yIEVt
        YmVyCiAgQHByaXZhdGUKICBAZmluYWwKICBAdHlwZSBTdHJpbmcKKi8KRW1i
        ZXIuTUVUQV9LRVkgPSBNRVRBX0tFWTsKCnZhciBpc0RlZmluZVByb3BlcnR5
        U2ltdWxhdGVkID0gRW1iZXIucGxhdGZvcm0uZGVmaW5lUHJvcGVydHkuaXNT
        aW11bGF0ZWQ7CgpmdW5jdGlvbiBNZXRhKG9iaikgewogIHRoaXMuZGVzY3Mg
        PSB7fTsKICB0aGlzLndhdGNoaW5nID0ge307CiAgdGhpcy5jYWNoZSA9IHt9
        OwogIHRoaXMuc291cmNlID0gb2JqOwp9CgpNZXRhLnByb3RvdHlwZSA9IHsK
        ICBkZXNjczogbnVsbCwKICBkZXBzOiBudWxsLAogIHdhdGNoaW5nOiBudWxs
        LAogIGxpc3RlbmVyczogbnVsbCwKICBjYWNoZTogbnVsbCwKICBzb3VyY2U6
        IG51bGwsCiAgbWl4aW5zOiBudWxsLAogIGJpbmRpbmdzOiBudWxsLAogIGNo
        YWluczogbnVsbCwKICBjaGFpbldhdGNoZXJzOiBudWxsLAogIHZhbHVlczog
        bnVsbCwKICBwcm90bzogbnVsbAp9OwoKaWYgKGlzRGVmaW5lUHJvcGVydHlT
        aW11bGF0ZWQpIHsKICAvLyBvbiBwbGF0Zm9ybXMgdGhhdCBkb24ndCBzdXBw
        b3J0IGVudW1lcmFibGUgZmFsc2UKICAvLyBtYWtlIG1ldGEgZmFpbCBqUXVl
        cnkuaXNQbGFpbk9iamVjdCgpIHRvIGhpZGUgZnJvbQogIC8vIGpRdWVyeS5l
        eHRlbmQoKSBieSBoYXZpbmcgYSBwcm9wZXJ0eSB0aGF0IGZhaWxzCiAgLy8g
        aGFzT3duUHJvcGVydHkgY2hlY2suCiAgTWV0YS5wcm90b3R5cGUuX19wcmV2
        ZW50UGxhaW5PYmplY3RfXyA9IHRydWU7CgogIC8vIFdpdGhvdXQgbm9uLWVu
        dW1lcmFibGUgcHJvcGVydGllcywgbWV0YSBvYmplY3RzIHdpbGwgYmUgb3V0
        cHV0IGluIEpTT04KICAvLyB1bmxlc3MgZXhwbGljaXRseSBzdXBwcmVzc2Vk
        CiAgTWV0YS5wcm90b3R5cGUudG9KU09OID0gZnVuY3Rpb24gKCkgeyB9Owp9
        CgovLyBQbGFjZWhvbGRlciBmb3Igbm9uLXdyaXRhYmxlIG1ldGFzLgp2YXIg
        RU1QVFlfTUVUQSA9IG5ldyBNZXRhKG51bGwpOwoKaWYgKE1BTkRBVE9SWV9T
        RVRURVIpIHsgRU1QVFlfTUVUQS52YWx1ZXMgPSB7fTsgfQoKRW1iZXIuRU1Q
        VFlfTUVUQSA9IEVNUFRZX01FVEE7CgovKioKICBSZXRyaWV2ZXMgdGhlIG1l
        dGEgaGFzaCBmb3IgYW4gb2JqZWN0LiBJZiBgd3JpdGFibGVgIGlzIHRydWUg
        ZW5zdXJlcyB0aGUKICBoYXNoIGlzIHdyaXRhYmxlIGZvciB0aGlzIG9iamVj
        dCBhcyB3ZWxsLgoKICBUaGUgbWV0YSBvYmplY3QgY29udGFpbnMgaW5mb3Jt
        YXRpb24gYWJvdXQgY29tcHV0ZWQgcHJvcGVydHkgZGVzY3JpcHRvcnMgYXMK
        ICB3ZWxsIGFzIGFueSB3YXRjaGVkIHByb3BlcnRpZXMgYW5kIG90aGVyIGlu
        Zm9ybWF0aW9uLiBZb3UgZ2VuZXJhbGx5IHdpbGwKICBub3QgYWNjZXNzIHRo
        aXMgaW5mb3JtYXRpb24gZGlyZWN0bHkgYnV0IGluc3RlYWQgd29yayB3aXRo
        IGhpZ2hlciBsZXZlbAogIG1ldGhvZHMgdGhhdCBtYW5pcHVsYXRlIHRoaXMg
        aGFzaCBpbmRpcmVjdGx5LgoKICBAbWV0aG9kIG1ldGEKICBAZm9yIEVtYmVy
        CiAgQHByaXZhdGUKCiAgQHBhcmFtIHtPYmplY3R9IG9iaiBUaGUgb2JqZWN0
        IHRvIHJldHJpZXZlIG1ldGEgZm9yCiAgQHBhcmFtIHtCb29sZWFufSBbd3Jp
        dGFibGU9dHJ1ZV0gUGFzcyBgZmFsc2VgIGlmIHlvdSBkbyBub3QgaW50ZW5k
        IHRvIG1vZGlmeQogICAgdGhlIG1ldGEgaGFzaCwgYWxsb3dpbmcgdGhlIG1l
        dGhvZCB0byBhdm9pZCBtYWtpbmcgYW4gdW5uZWNlc3NhcnkgY29weS4KICBA
        cmV0dXJuIHtPYmplY3R9IHRoZSBtZXRhIGhhc2ggZm9yIGFuIG9iamVjdAoq
        LwpFbWJlci5tZXRhID0gZnVuY3Rpb24gbWV0YShvYmosIHdyaXRhYmxlKSB7
        CgogIHZhciByZXQgPSBvYmpbTUVUQV9LRVldOwogIGlmICh3cml0YWJsZT09
        PWZhbHNlKSByZXR1cm4gcmV0IHx8IEVNUFRZX01FVEE7CgogIGlmICghcmV0
        KSB7CiAgICBpZiAoIWlzRGVmaW5lUHJvcGVydHlTaW11bGF0ZWQpIG9fZGVm
        aW5lUHJvcGVydHkob2JqLCBNRVRBX0tFWSwgTUVUQV9ERVNDKTsKCiAgICBy
        ZXQgPSBuZXcgTWV0YShvYmopOwoKICAgIGlmIChNQU5EQVRPUllfU0VUVEVS
        KSB7IHJldC52YWx1ZXMgPSB7fTsgfQoKICAgIG9ialtNRVRBX0tFWV0gPSBy
        ZXQ7CgogICAgLy8gbWFrZSBzdXJlIHdlIGRvbid0IGFjY2lkZW50YWxseSB0
        cnkgdG8gY3JlYXRlIGNvbnN0cnVjdG9yIGxpa2UgZGVzYwogICAgcmV0LmRl
        c2NzLmNvbnN0cnVjdG9yID0gbnVsbDsKCiAgfSBlbHNlIGlmIChyZXQuc291
        cmNlICE9PSBvYmopIHsKICAgIGlmICghaXNEZWZpbmVQcm9wZXJ0eVNpbXVs
        YXRlZCkgb19kZWZpbmVQcm9wZXJ0eShvYmosIE1FVEFfS0VZLCBNRVRBX0RF
        U0MpOwoKICAgIHJldCA9IG9fY3JlYXRlKHJldCk7CiAgICByZXQuZGVzY3Mg
        ICAgPSBvX2NyZWF0ZShyZXQuZGVzY3MpOwogICAgcmV0LndhdGNoaW5nID0g
        b19jcmVhdGUocmV0LndhdGNoaW5nKTsKICAgIHJldC5jYWNoZSAgICA9IHt9
        OwogICAgcmV0LnNvdXJjZSAgID0gb2JqOwoKICAgIGlmIChNQU5EQVRPUllf
        U0VUVEVSKSB7IHJldC52YWx1ZXMgPSBvX2NyZWF0ZShyZXQudmFsdWVzKTsg
        fQoKICAgIG9ialtNRVRBX0tFWV0gPSByZXQ7CiAgfQogIHJldHVybiByZXQ7
        Cn07CgpFbWJlci5nZXRNZXRhID0gZnVuY3Rpb24gZ2V0TWV0YShvYmosIHBy
        b3BlcnR5KSB7CiAgdmFyIG1ldGEgPSBFbWJlci5tZXRhKG9iaiwgZmFsc2Up
        OwogIHJldHVybiBtZXRhW3Byb3BlcnR5XTsKfTsKCkVtYmVyLnNldE1ldGEg
        PSBmdW5jdGlvbiBzZXRNZXRhKG9iaiwgcHJvcGVydHksIHZhbHVlKSB7CiAg
        dmFyIG1ldGEgPSBFbWJlci5tZXRhKG9iaiwgdHJ1ZSk7CiAgbWV0YVtwcm9w
        ZXJ0eV0gPSB2YWx1ZTsKICByZXR1cm4gdmFsdWU7Cn07CgovKioKICBAZGVw
        cmVjYXRlZAogIEBwcml2YXRlCgogIEluIG9yZGVyIHRvIHN0b3JlIGRlZmF1
        bHRzIGZvciBhIGNsYXNzLCBhIHByb3RvdHlwZSBtYXkgbmVlZCB0byBjcmVh
        dGUKICBhIGRlZmF1bHQgbWV0YSBvYmplY3QsIHdoaWNoIHdpbGwgYmUgaW5o
        ZXJpdGVkIGJ5IGFueSBvYmplY3RzIGluc3RhbnRpYXRlZAogIGZyb20gdGhl
        IGNsYXNzJ3MgY29uc3RydWN0b3IuCgogIEhvd2V2ZXIsIHRoZSBwcm9wZXJ0
        aWVzIG9mIHRoYXQgbWV0YSBvYmplY3QgYXJlIG9ubHkgc2hhbGxvdy1jbG9u
        ZWQsCiAgc28gaWYgYSBwcm9wZXJ0eSBpcyBhIGhhc2ggKGxpa2UgdGhlIGV2
        ZW50IHN5c3RlbSdzIGBsaXN0ZW5lcnNgIGhhc2gpLAogIGl0IHdpbGwgYnkg
        ZGVmYXVsdCBiZSBzaGFyZWQgYWNyb3NzIGFsbCBpbnN0YW5jZXMgb2YgdGhh
        dCBjbGFzcy4KCiAgVGhpcyBtZXRob2QgYWxsb3dzIGV4dGVuc2lvbnMgdG8g
        ZGVlcGx5IGNsb25lIGEgc2VyaWVzIG9mIG5lc3RlZCBoYXNoZXMgb3IKICBv
        dGhlciBjb21wbGV4IG9iamVjdHMuIEZvciBpbnN0YW5jZSwgdGhlIGV2ZW50
        IHN5c3RlbSBtaWdodCBwYXNzCiAgYFsnbGlzdGVuZXJzJywgJ2ZvbzpjaGFu
        Z2UnLCAnZW1iZXIxNTcnXWAgdG8gYHByZXBhcmVNZXRhUGF0aGAsIHdoaWNo
        IHdpbGwKICB3YWxrIGRvd24gdGhlIGtleXMgcHJvdmlkZWQuCgogIEZvciBl
        YWNoIGtleSwgaWYgdGhlIGtleSBkb2VzIG5vdCBleGlzdCwgaXQgaXMgY3Jl
        YXRlZC4gSWYgaXQgYWxyZWFkeQogIGV4aXN0cyBhbmQgaXQgd2FzIGluaGVy
        aXRlZCBmcm9tIGl0cyBjb25zdHJ1Y3RvciwgdGhlIGNvbnN0cnVjdG9yJ3MK
        ICBrZXkgaXMgY2xvbmVkLgoKICBZb3UgY2FuIGFsc28gcGFzcyBmYWxzZSBm
        b3IgYHdyaXRhYmxlYCwgd2hpY2ggd2lsbCBzaW1wbHkgcmV0dXJuCiAgdW5k
        ZWZpbmVkIGlmIGBwcmVwYXJlTWV0YVBhdGhgIGRpc2NvdmVycyBhbnkgcGFy
        dCBvZiB0aGUgcGF0aCB0aGF0CiAgc2hhcmVkIG9yIHVuZGVmaW5lZC4KCiAg
        QG1ldGhvZCBtZXRhUGF0aAogIEBmb3IgRW1iZXIKICBAcGFyYW0ge09iamVj
        dH0gb2JqIFRoZSBvYmplY3Qgd2hvc2UgbWV0YSB3ZSBhcmUgZXhhbWluaW5n
        CiAgQHBhcmFtIHtBcnJheX0gcGF0aCBBbiBhcnJheSBvZiBrZXlzIHRvIHdh
        bGsgZG93bgogIEBwYXJhbSB7Qm9vbGVhbn0gd3JpdGFibGUgd2hldGhlciBv
        ciBub3QgdG8gY3JlYXRlIGEgbmV3IG1ldGEKICAgIChvciBtZXRhIHByb3Bl
        cnR5KSBpZiBvbmUgZG9lcyBub3QgYWxyZWFkeSBleGlzdCBvciBpZiBpdCdz
        CiAgICBzaGFyZWQgd2l0aCBpdHMgY29uc3RydWN0b3IKKi8KRW1iZXIubWV0
        YVBhdGggPSBmdW5jdGlvbiBtZXRhUGF0aChvYmosIHBhdGgsIHdyaXRhYmxl
        KSB7CiAgRW1iZXIuZGVwcmVjYXRlKCJFbWJlci5tZXRhUGF0aCBpcyBkZXBy
        ZWNhdGVkIGFuZCB3aWxsIGJlIHJlbW92ZWQgZnJvbSBmdXR1cmUgcmVsZWFz
        ZXMuIik7CiAgdmFyIG1ldGEgPSBFbWJlci5tZXRhKG9iaiwgd3JpdGFibGUp
        LCBrZXlOYW1lLCB2YWx1ZTsKCiAgZm9yICh2YXIgaT0wLCBsPXBhdGgubGVu
        Z3RoOyBpPGw7IGkrKykgewogICAga2V5TmFtZSA9IHBhdGhbaV07CiAgICB2
        YWx1ZSA9IG1ldGFba2V5TmFtZV07CgogICAgaWYgKCF2YWx1ZSkgewogICAg
        ICBpZiAoIXdyaXRhYmxlKSB7IHJldHVybiB1bmRlZmluZWQ7IH0KICAgICAg
        dmFsdWUgPSBtZXRhW2tleU5hbWVdID0geyBfX2VtYmVyX3NvdXJjZV9fOiBv
        YmogfTsKICAgIH0gZWxzZSBpZiAodmFsdWUuX19lbWJlcl9zb3VyY2VfXyAh
        PT0gb2JqKSB7CiAgICAgIGlmICghd3JpdGFibGUpIHsgcmV0dXJuIHVuZGVm
        aW5lZDsgfQogICAgICB2YWx1ZSA9IG1ldGFba2V5TmFtZV0gPSBvX2NyZWF0
        ZSh2YWx1ZSk7CiAgICAgIHZhbHVlLl9fZW1iZXJfc291cmNlX18gPSBvYmo7
        CiAgICB9CgogICAgbWV0YSA9IHZhbHVlOwogIH0KCiAgcmV0dXJuIHZhbHVl
        Owp9OwoKLyoqCiAgV3JhcHMgdGhlIHBhc3NlZCBmdW5jdGlvbiBzbyB0aGF0
        IGB0aGlzLl9zdXBlcmAgd2lsbCBwb2ludCB0byB0aGUgc3VwZXJGdW5jCiAg
        d2hlbiB0aGUgZnVuY3Rpb24gaXMgaW52b2tlZC4gVGhpcyBpcyB0aGUgcHJp
        bWl0aXZlIHdlIHVzZSB0byBpbXBsZW1lbnQKICBjYWxscyB0byBzdXBlci4K
        CiAgQHByaXZhdGUKICBAbWV0aG9kIHdyYXAKICBAZm9yIEVtYmVyCiAgQHBh
        cmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gY2FsbAogIEBw
        YXJhbSB7RnVuY3Rpb259IHN1cGVyRnVuYyBUaGUgc3VwZXIgZnVuY3Rpb24u
        CiAgQHJldHVybiB7RnVuY3Rpb259IHdyYXBwZWQgZnVuY3Rpb24uCiovCkVt
        YmVyLndyYXAgPSBmdW5jdGlvbihmdW5jLCBzdXBlckZ1bmMpIHsKICBmdW5j
        dGlvbiBzdXBlcldyYXBwZXIoKSB7CiAgICB2YXIgcmV0LCBzdXAgPSB0aGlz
        Ll9fbmV4dFN1cGVyOwogICAgdGhpcy5fX25leHRTdXBlciA9IHN1cGVyRnVu
        YzsKICAgIHJldCA9IGZ1bmMuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAg
        IHRoaXMuX19uZXh0U3VwZXIgPSBzdXA7CiAgICByZXR1cm4gcmV0OwogIH0K
        CiAgc3VwZXJXcmFwcGVyLndyYXBwZWRGdW5jdGlvbiA9IGZ1bmM7CiAgc3Vw
        ZXJXcmFwcGVyLl9fZW1iZXJfb2JzZXJ2ZXNfXyA9IGZ1bmMuX19lbWJlcl9v
        YnNlcnZlc19fOwogIHN1cGVyV3JhcHBlci5fX2VtYmVyX29ic2VydmVzQmVm
        b3JlX18gPSBmdW5jLl9fZW1iZXJfb2JzZXJ2ZXNCZWZvcmVfXzsKICBzdXBl
        cldyYXBwZXIuX19lbWJlcl9saXN0ZW5zX18gPSBmdW5jLl9fZW1iZXJfbGlz
        dGVuc19fOwoKICByZXR1cm4gc3VwZXJXcmFwcGVyOwp9OwoKLyoqCiAgUmV0
        dXJucyB0cnVlIGlmIHRoZSBwYXNzZWQgb2JqZWN0IGlzIGFuIGFycmF5IG9y
        IEFycmF5LWxpa2UuCgogIEVtYmVyIEFycmF5IFByb3RvY29sOgoKICAgIC0g
        dGhlIG9iamVjdCBoYXMgYW4gb2JqZWN0QXQgcHJvcGVydHkKICAgIC0gdGhl
        IG9iamVjdCBpcyBhIG5hdGl2ZSBBcnJheQogICAgLSB0aGUgb2JqZWN0IGlz
        IGFuIE9iamVjdCwgYW5kIGhhcyBhIGxlbmd0aCBwcm9wZXJ0eQoKICBVbmxp
        a2UgYEVtYmVyLnR5cGVPZmAgdGhpcyBtZXRob2QgcmV0dXJucyB0cnVlIGV2
        ZW4gaWYgdGhlIHBhc3NlZCBvYmplY3QgaXMKICBub3QgZm9ybWFsbHkgYXJy
        YXkgYnV0IGFwcGVhcnMgdG8gYmUgYXJyYXktbGlrZSAoaS5lLiBpbXBsZW1l
        bnRzIGBFbWJlci5BcnJheWApCgogIGBgYGphdmFzY3JpcHQKICBFbWJlci5p
        c0FycmF5KCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
        ICAgICAgICAvLyBmYWxzZQogIEVtYmVyLmlzQXJyYXkoW10pOyAgICAgICAg
        ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRydWUKICBF
        bWJlci5pc0FycmF5KCBFbWJlci5BcnJheVByb3h5LmNyZWF0ZSh7IGNvbnRl
        bnQ6IFtdIH0pICk7ICAvLyB0cnVlCiAgYGBgCgogIEBtZXRob2QgaXNBcnJh
        eQogIEBmb3IgRW1iZXIKICBAcGFyYW0ge09iamVjdH0gb2JqIFRoZSBvYmpl
        Y3QgdG8gdGVzdAogIEByZXR1cm4ge0Jvb2xlYW59IHRydWUgaWYgdGhlIHBh
        c3NlZCBvYmplY3QgaXMgYW4gYXJyYXkgb3IgQXJyYXktbGlrZQoqLwpFbWJl
        ci5pc0FycmF5ID0gZnVuY3Rpb24ob2JqKSB7CiAgaWYgKCFvYmogfHwgb2Jq
        LnNldEludGVydmFsKSB7IHJldHVybiBmYWxzZTsgfQogIGlmIChBcnJheS5p
        c0FycmF5ICYmIEFycmF5LmlzQXJyYXkob2JqKSkgeyByZXR1cm4gdHJ1ZTsg
        fQogIGlmIChFbWJlci5BcnJheSAmJiBFbWJlci5BcnJheS5kZXRlY3Qob2Jq
        KSkgeyByZXR1cm4gdHJ1ZTsgfQogIGlmICgob2JqLmxlbmd0aCAhPT0gdW5k
        ZWZpbmVkKSAmJiAnb2JqZWN0Jz09PXR5cGVvZiBvYmopIHsgcmV0dXJuIHRy
        dWU7IH0KICByZXR1cm4gZmFsc2U7Cn07CgovKioKICBGb3JjZXMgdGhlIHBh
        c3NlZCBvYmplY3QgdG8gYmUgcGFydCBvZiBhbiBhcnJheS4gSWYgdGhlIG9i
        amVjdCBpcyBhbHJlYWR5CiAgYW4gYXJyYXkgb3IgYXJyYXktbGlrZSwgcmV0
        dXJucyB0aGUgb2JqZWN0LiBPdGhlcndpc2UgYWRkcyB0aGUgb2JqZWN0IHRv
        CiAgYW4gYXJyYXkuIElmIG9iaiBpcyBgbnVsbGAgb3IgYHVuZGVmaW5lZGAs
        IHJldHVybnMgYW4gZW1wdHkgYXJyYXkuCgogIGBgYGphdmFzY3JpcHQKICBF
        bWJlci5tYWtlQXJyYXkoKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAv
        LyBbXQogIEVtYmVyLm1ha2VBcnJheShudWxsKTsgICAgICAgICAgICAgICAg
        ICAgICAgIC8vIFtdCiAgRW1iZXIubWFrZUFycmF5KHVuZGVmaW5lZCk7ICAg
        ICAgICAgICAgICAgICAgLy8gW10KICBFbWJlci5tYWtlQXJyYXkoJ2xpbmRz
        YXknKTsgICAgICAgICAgICAgICAgICAvLyBbJ2xpbmRzYXknXQogIEVtYmVy
        Lm1ha2VBcnJheShbMSwyLDQyXSk7ICAgICAgICAgICAgICAgICAgIC8vIFsx
        LDIsNDJdCgogIHZhciBjb250cm9sbGVyID0gRW1iZXIuQXJyYXlQcm94eS5j
        cmVhdGUoeyBjb250ZW50OiBbXSB9KTsKICBFbWJlci5tYWtlQXJyYXkoY29u
        dHJvbGxlcikgPT09IGNvbnRyb2xsZXI7ICAvLyB0cnVlCiAgYGBgCgogIEBt
        ZXRob2QgbWFrZUFycmF5CiAgQGZvciBFbWJlcgogIEBwYXJhbSB7T2JqZWN0
        fSBvYmogdGhlIG9iamVjdAogIEByZXR1cm4ge0FycmF5fQoqLwpFbWJlci5t
        YWtlQXJyYXkgPSBmdW5jdGlvbihvYmopIHsKICBpZiAob2JqID09PSBudWxs
        IHx8IG9iaiA9PT0gdW5kZWZpbmVkKSB7IHJldHVybiBbXTsgfQogIHJldHVy
        biBFbWJlci5pc0FycmF5KG9iaikgPyBvYmogOiBbb2JqXTsKfTsKCmZ1bmN0
        aW9uIGNhbkludm9rZShvYmosIG1ldGhvZE5hbWUpIHsKICByZXR1cm4gISEo
        b2JqICYmIHR5cGVvZiBvYmpbbWV0aG9kTmFtZV0gPT09ICdmdW5jdGlvbicp
        Owp9CgovKioKICBDaGVja3MgdG8gc2VlIGlmIHRoZSBgbWV0aG9kTmFtZWAg
        ZXhpc3RzIG9uIHRoZSBgb2JqYC4KCiAgYGBgamF2YXNjcmlwdAogIHZhciBm
        b28gPSB7YmFyOiBFbWJlci5LLCBiYXo6IG51bGx9OwogIEVtYmVyLmNhbklu
        dm9rZShmb28sICdiYXInKTsgLy8gdHJ1ZQogIEVtYmVyLmNhbkludm9rZShm
        b28sICdiYXonKTsgLy8gZmFsc2UKICBFbWJlci5jYW5JbnZva2UoZm9vLCAn
        YmF0Jyk7IC8vIGZhbHNlCiAgYGBgCgogIEBtZXRob2QgY2FuSW52b2tlCiAg
        QGZvciBFbWJlcgogIEBwYXJhbSB7T2JqZWN0fSBvYmogVGhlIG9iamVjdCB0
        byBjaGVjayBmb3IgdGhlIG1ldGhvZAogIEBwYXJhbSB7U3RyaW5nfSBtZXRo
        b2ROYW1lIFRoZSBtZXRob2QgbmFtZSB0byBjaGVjayBmb3IKICBAcmV0dXJu
        IHtCb29sZWFufQoqLwpFbWJlci5jYW5JbnZva2UgPSBjYW5JbnZva2U7Cgov
        KioKICBDaGVja3MgdG8gc2VlIGlmIHRoZSBgbWV0aG9kTmFtZWAgZXhpc3Rz
        IG9uIHRoZSBgb2JqYCwKICBhbmQgaWYgaXQgZG9lcywgaW52b2tlcyBpdCB3
        aXRoIHRoZSBhcmd1bWVudHMgcGFzc2VkLgoKICBgYGBqYXZhc2NyaXB0CiAg
        dmFyIGQgPSBuZXcgRGF0ZSgnMDMvMTUvMjAxMycpOwogIEVtYmVyLnRyeUlu
        dm9rZShkLCAnZ2V0VGltZScpOyAvLyAxMzYzMzIwMDAwMDAwCiAgRW1iZXIu
        dHJ5SW52b2tlKGQsICdzZXRGdWxsWWVhcicsIFsyMDE0XSk7IC8vIDEzOTQ4
        NTYwMDAwMDAKICBFbWJlci50cnlJbnZva2UoZCwgJ25vU3VjaE1ldGhvZCcs
        IFsyMDE0XSk7IC8vIHVuZGVmaW5lZAogIGBgYAoKICBAbWV0aG9kIHRyeUlu
        dm9rZQogIEBmb3IgRW1iZXIKICBAcGFyYW0ge09iamVjdH0gb2JqIFRoZSBv
        YmplY3QgdG8gY2hlY2sgZm9yIHRoZSBtZXRob2QKICBAcGFyYW0ge1N0cmlu
        Z30gbWV0aG9kTmFtZSBUaGUgbWV0aG9kIG5hbWUgdG8gY2hlY2sgZm9yCiAg
        QHBhcmFtIHtBcnJheX0gW2FyZ3NdIFRoZSBhcmd1bWVudHMgdG8gcGFzcyB0
        byB0aGUgbWV0aG9kCiAgQHJldHVybiB7Kn0gdGhlIHJldHVybiB2YWx1ZSBv
        ZiB0aGUgaW52b2tlZCBtZXRob2Qgb3IgdW5kZWZpbmVkIGlmIGl0IGNhbm5v
        dCBiZSBpbnZva2VkCiovCkVtYmVyLnRyeUludm9rZSA9IGZ1bmN0aW9uKG9i
        aiwgbWV0aG9kTmFtZSwgYXJncykgewogIGlmIChjYW5JbnZva2Uob2JqLCBt
        ZXRob2ROYW1lKSkgewogICAgcmV0dXJuIG9ialttZXRob2ROYW1lXS5hcHBs
        eShvYmosIGFyZ3MgfHwgW10pOwogIH0KfTsKCi8vIGh0dHBzOi8vZ2l0aHVi
        LmNvbS9lbWJlcmpzL2VtYmVyLmpzL3B1bGwvMTYxNwp2YXIgbmVlZHNGaW5h
        bGx5Rml4ID0gKGZ1bmN0aW9uKCkgewogIHZhciBjb3VudCA9IDA7CiAgdHJ5
        ewogICAgdHJ5IHsgfQogICAgZmluYWxseSB7CiAgICAgIGNvdW50Kys7CiAg
        ICAgIHRocm93IG5ldyBFcnJvcignbmVlZHNGaW5hbGx5Rml4VGVzdCcpOwog
        ICAgfQogIH0gY2F0Y2ggKGUpIHt9CgogIHJldHVybiBjb3VudCAhPT0gMTsK
        fSkoKTsKCi8qKgogIFByb3ZpZGVzIHRyeSB7IH0gZmluYWxseSB7IH0gZnVu
        Y3Rpb25hbGl0eSwgd2hpbGUgd29ya2luZwogIGFyb3VuZCBTYWZhcmkncyBk
        b3VibGUgZmluYWxseSBidWcuCgogIGBgYGphdmFzY3JpcHQKICB2YXIgdHJ5
        YWJsZSA9IGZ1bmN0aW9uKCkgewogICAgc29tZVJlc291cmNlLmxvY2soKTsK
        ICAgIHJ1bkNhbGxiYWNrKCk7IC8vIE1heSB0aHJvdyBlcnJvci4KICB9Owog
        IHZhciBmaW5hbGl6ZXIgPSBmdW5jdGlvbigpIHsKICAgIHNvbWVSZXNvdXJj
        ZS51bmxvY2soKTsKICB9OwogIEVtYmVyLnRyeUZpbmFsbHkodHJ5YWJsZSwg
        ZmluYWxpemVyKTsKICBgYGAKCiAgQG1ldGhvZCB0cnlGaW5hbGx5CiAgQGZv
        ciBFbWJlcgogIEBwYXJhbSB7RnVuY3Rpb259IHRyeWFibGUgVGhlIGZ1bmN0
        aW9uIHRvIHJ1biB0aGUgdHJ5IGNhbGxiYWNrCiAgQHBhcmFtIHtGdW5jdGlv
        bn0gZmluYWxpemVyIFRoZSBmdW5jdGlvbiB0byBydW4gdGhlIGZpbmFsbHkg
        Y2FsbGJhY2sKICBAcGFyYW0ge09iamVjdH0gW2JpbmRpbmddIFRoZSBvcHRp
        b25hbCBjYWxsaW5nIG9iamVjdC4gRGVmYXVsdHMgdG8gJ3RoaXMnCiAgQHJl
        dHVybiB7Kn0gVGhlIHJldHVybiB2YWx1ZSBpcyB0aGUgdGhhdCBvZiB0aGUg
        ZmluYWxpemVyLAogIHVubGVzcyB0aGF0IHZhbHVlIGlzIHVuZGVmaW5lZCwg
        aW4gd2hpY2ggY2FzZSBpdCBpcyB0aGUgcmV0dXJuIHZhbHVlCiAgb2YgdGhl
        IHRyeWFibGUKKi8KCmlmIChuZWVkc0ZpbmFsbHlGaXgpIHsKICBFbWJlci50
        cnlGaW5hbGx5ID0gZnVuY3Rpb24odHJ5YWJsZSwgZmluYWxpemVyLCBiaW5k
        aW5nKSB7CiAgICB2YXIgcmVzdWx0LCBmaW5hbFJlc3VsdCwgZmluYWxFcnJv
        cjsKCiAgICBiaW5kaW5nID0gYmluZGluZyB8fCB0aGlzOwoKICAgIHRyeSB7
        CiAgICAgIHJlc3VsdCA9IHRyeWFibGUuY2FsbChiaW5kaW5nKTsKICAgIH0g
        ZmluYWxseSB7CiAgICAgIHRyeSB7CiAgICAgICAgZmluYWxSZXN1bHQgPSBm
        aW5hbGl6ZXIuY2FsbChiaW5kaW5nKTsKICAgICAgfSBjYXRjaCAoZSkgewog
        ICAgICAgIGZpbmFsRXJyb3IgPSBlOwogICAgICB9CiAgICB9CgogICAgaWYg
        KGZpbmFsRXJyb3IpIHsgdGhyb3cgZmluYWxFcnJvcjsgfQoKICAgIHJldHVy
        biAoZmluYWxSZXN1bHQgPT09IHVuZGVmaW5lZCkgPyByZXN1bHQgOiBmaW5h
        bFJlc3VsdDsKICB9Owp9IGVsc2UgewogIEVtYmVyLnRyeUZpbmFsbHkgPSBm
        dW5jdGlvbih0cnlhYmxlLCBmaW5hbGl6ZXIsIGJpbmRpbmcpIHsKICAgIHZh
        ciByZXN1bHQsIGZpbmFsUmVzdWx0OwoKICAgIGJpbmRpbmcgPSBiaW5kaW5n
        IHx8IHRoaXM7CgogICAgdHJ5IHsKICAgICAgcmVzdWx0ID0gdHJ5YWJsZS5j
        YWxsKGJpbmRpbmcpOwogICAgfSBmaW5hbGx5IHsKICAgICAgZmluYWxSZXN1
        bHQgPSBmaW5hbGl6ZXIuY2FsbChiaW5kaW5nKTsKICAgIH0KCiAgICByZXR1
        cm4gKGZpbmFsUmVzdWx0ID09PSB1bmRlZmluZWQpID8gcmVzdWx0IDogZmlu
        YWxSZXN1bHQ7CiAgfTsKfQoKLyoqCiAgUHJvdmlkZXMgdHJ5IHsgfSBjYXRj
        aCBmaW5hbGx5IHsgfSBmdW5jdGlvbmFsaXR5LCB3aGlsZSB3b3JraW5nCiAg
        YXJvdW5kIFNhZmFyaSdzIGRvdWJsZSBmaW5hbGx5IGJ1Zy4KCiAgYGBgamF2
        YXNjcmlwdAogIHZhciB0cnlhYmxlID0gZnVuY3Rpb24oKSB7CiAgICBmb3Ig
        KGk9MCwgbD1saXN0ZW5lcnMubGVuZ3RoOyBpPGw7IGkrKykgewogICAgICBs
        aXN0ZW5lciA9IGxpc3RlbmVyc1tpXTsKICAgICAgYmVmb3JlVmFsdWVzW2ld
        ID0gbGlzdGVuZXIuYmVmb3JlKG5hbWUsIHRpbWUoKSwgcGF5bG9hZCk7CiAg
        ICB9CgogICAgcmV0dXJuIGNhbGxiYWNrLmNhbGwoYmluZGluZyk7CiAgfTsK
        CiAgdmFyIGNhdGNoYWJsZSA9IGZ1bmN0aW9uKGUpIHsKICAgIHBheWxvYWQg
        PSBwYXlsb2FkIHx8IHt9OwogICAgcGF5bG9hZC5leGNlcHRpb24gPSBlOwog
        IH07CgogIHZhciBmaW5hbGl6ZXIgPSBmdW5jdGlvbigpIHsKICAgIGZvciAo
        aT0wLCBsPWxpc3RlbmVycy5sZW5ndGg7IGk8bDsgaSsrKSB7CiAgICAgIGxp
        c3RlbmVyID0gbGlzdGVuZXJzW2ldOwogICAgICBsaXN0ZW5lci5hZnRlcihu
        YW1lLCB0aW1lKCksIHBheWxvYWQsIGJlZm9yZVZhbHVlc1tpXSk7CiAgICB9
        CiAgfTsKICBFbWJlci50cnlDYXRjaEZpbmFsbHkodHJ5YWJsZSwgY2F0Y2hh
        YmxlLCBmaW5hbGl6ZXIpOwogIGBgYAoKICBAbWV0aG9kIHRyeUNhdGNoRmlu
        YWxseQogIEBmb3IgRW1iZXIKICBAcGFyYW0ge0Z1bmN0aW9ufSB0cnlhYmxl
        IFRoZSBmdW5jdGlvbiB0byBydW4gdGhlIHRyeSBjYWxsYmFjawogIEBwYXJh
        bSB7RnVuY3Rpb259IGNhdGNoYWJsZSBUaGUgZnVuY3Rpb24gdG8gcnVuIHRo
        ZSBjYXRjaGFibGUgY2FsbGJhY2sKICBAcGFyYW0ge0Z1bmN0aW9ufSBmaW5h
        bGl6ZXIgVGhlIGZ1bmN0aW9uIHRvIHJ1biB0aGUgZmluYWxseSBjYWxsYmFj
        awogIEBwYXJhbSB7T2JqZWN0fSBbYmluZGluZ10gVGhlIG9wdGlvbmFsIGNh
        bGxpbmcgb2JqZWN0LiBEZWZhdWx0cyB0byAndGhpcycKICBAcmV0dXJuIHsq
        fSBUaGUgcmV0dXJuIHZhbHVlIGlzIHRoZSB0aGF0IG9mIHRoZSBmaW5hbGl6
        ZXIsCiAgdW5sZXNzIHRoYXQgdmFsdWUgaXMgdW5kZWZpbmVkLCBpbiB3aGlj
        aCBjYXNlIGl0IGlzIHRoZSByZXR1cm4gdmFsdWUKICBvZiB0aGUgdHJ5YWJs
        ZS4KKi8KaWYgKG5lZWRzRmluYWxseUZpeCkgewogIEVtYmVyLnRyeUNhdGNo
        RmluYWxseSA9IGZ1bmN0aW9uKHRyeWFibGUsIGNhdGNoYWJsZSwgZmluYWxp
        emVyLCBiaW5kaW5nKSB7CiAgICB2YXIgcmVzdWx0LCBmaW5hbFJlc3VsdCwg
        ZmluYWxFcnJvcjsKCiAgICBiaW5kaW5nID0gYmluZGluZyB8fCB0aGlzOwoK
        ICAgIHRyeSB7CiAgICAgIHJlc3VsdCA9IHRyeWFibGUuY2FsbChiaW5kaW5n
        KTsKICAgIH0gY2F0Y2goZXJyb3IpIHsKICAgICAgcmVzdWx0ID0gY2F0Y2hh
        YmxlLmNhbGwoYmluZGluZywgZXJyb3IpOwogICAgfSBmaW5hbGx5IHsKICAg
        ICAgdHJ5IHsKICAgICAgICBmaW5hbFJlc3VsdCA9IGZpbmFsaXplci5jYWxs
        KGJpbmRpbmcpOwogICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgZmluYWxF
        cnJvciA9IGU7CiAgICAgIH0KICAgIH0KCiAgICBpZiAoZmluYWxFcnJvcikg
        eyB0aHJvdyBmaW5hbEVycm9yOyB9CgogICAgcmV0dXJuIChmaW5hbFJlc3Vs
        dCA9PT0gdW5kZWZpbmVkKSA/IHJlc3VsdCA6IGZpbmFsUmVzdWx0OwogIH07
        Cn0gZWxzZSB7CiAgRW1iZXIudHJ5Q2F0Y2hGaW5hbGx5ID0gZnVuY3Rpb24o
        dHJ5YWJsZSwgY2F0Y2hhYmxlLCBmaW5hbGl6ZXIsIGJpbmRpbmcpIHsKICAg
        IHZhciByZXN1bHQsIGZpbmFsUmVzdWx0OwoKICAgIGJpbmRpbmcgPSBiaW5k
        aW5nIHx8IHRoaXM7CgogICAgdHJ5IHsKICAgICAgcmVzdWx0ID0gdHJ5YWJs
        ZS5jYWxsKGJpbmRpbmcpOwogICAgfSBjYXRjaChlcnJvcikgewogICAgICBy
        ZXN1bHQgPSBjYXRjaGFibGUuY2FsbChiaW5kaW5nLCBlcnJvcik7CiAgICB9
        IGZpbmFsbHkgewogICAgICBmaW5hbFJlc3VsdCA9IGZpbmFsaXplci5jYWxs
        KGJpbmRpbmcpOwogICAgfQoKICAgIHJldHVybiAoZmluYWxSZXN1bHQgPT09
        IHVuZGVmaW5lZCkgPyByZXN1bHQgOiBmaW5hbFJlc3VsdDsKICB9Owp9Cgov
        LyAuLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uCi8v
        IFRZUElORyAmIEFSUkFZIE1FU1NBR0lORwovLwoKdmFyIFRZUEVfTUFQID0g
        e307CnZhciB0ID0gIkJvb2xlYW4gTnVtYmVyIFN0cmluZyBGdW5jdGlvbiBB
        cnJheSBEYXRlIFJlZ0V4cCBPYmplY3QiLnNwbGl0KCIgIik7CkVtYmVyLkFy
        cmF5UG9seWZpbGxzLmZvckVhY2guY2FsbCh0LCBmdW5jdGlvbihuYW1lKSB7
        CiAgVFlQRV9NQVBbICJbb2JqZWN0ICIgKyBuYW1lICsgIl0iIF0gPSBuYW1l
        LnRvTG93ZXJDYXNlKCk7Cn0pOwoKdmFyIHRvU3RyaW5nID0gT2JqZWN0LnBy
        b3RvdHlwZS50b1N0cmluZzsKCi8qKgogIFJldHVybnMgYSBjb25zaXN0ZW50
        IHR5cGUgZm9yIHRoZSBwYXNzZWQgaXRlbS4KCiAgVXNlIHRoaXMgaW5zdGVh
        ZCBvZiB0aGUgYnVpbHQtaW4gYHR5cGVvZmAgdG8gZ2V0IHRoZSB0eXBlIG9m
        IGFuIGl0ZW0uCiAgSXQgd2lsbCByZXR1cm4gdGhlIHNhbWUgcmVzdWx0IGFj
        cm9zcyBhbGwgYnJvd3NlcnMgYW5kIGluY2x1ZGVzIGEgYml0CiAgbW9yZSBk
        ZXRhaWwuIEhlcmUgaXMgd2hhdCB3aWxsIGJlIHJldHVybmVkOgoKICAgICAg
        fCBSZXR1cm4gVmFsdWUgIHwgTWVhbmluZyAgICAgICAgICAgICAgICAgICAg
        ICAgICAgICAgICAgICAgICAgICAgICAgICB8CiAgICAgIHwtLS0tLS0tLS0t
        LS0tLS18LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
        LS0tLS0tLS0tLS0tLS0tfAogICAgICB8ICdzdHJpbmcnICAgICAgfCBTdHJp
        bmcgcHJpbWl0aXZlIG9yIFN0cmluZyBvYmplY3QuICAgICAgICAgICAgICAg
        ICAgIHwKICAgICAgfCAnbnVtYmVyJyAgICAgIHwgTnVtYmVyIHByaW1pdGl2
        ZSBvciBOdW1iZXIgb2JqZWN0LiAgICAgICAgICAgICAgICAgICB8CiAgICAg
        IHwgJ2Jvb2xlYW4nICAgICB8IEJvb2xlYW4gcHJpbWl0aXZlIG9yIEJvb2xl
        YW4gb2JqZWN0LiAgICAgICAgICAgICAgICAgfAogICAgICB8ICdudWxsJyAg
        ICAgICAgfCBOdWxsIHZhbHVlICAgICAgICAgICAgICAgICAgICAgICAgICAg
        ICAgICAgICAgICAgICAgIHwKICAgICAgfCAndW5kZWZpbmVkJyAgIHwgVW5k
        ZWZpbmVkIHZhbHVlICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
        ICAgICB8CiAgICAgIHwgJ2Z1bmN0aW9uJyAgICB8IEEgZnVuY3Rpb24gICAg
        ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfAogICAg
        ICB8ICdhcnJheScgICAgICAgfCBBbiBpbnN0YW5jZSBvZiBBcnJheSAgICAg
        ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwKICAgICAgfCAncmVnZXhw
        JyAgICAgIHwgQW4gaW5zdGFuY2Ugb2YgUmVnRXhwICAgICAgICAgICAgICAg
        ICAgICAgICAgICAgICAgICB8CiAgICAgIHwgJ2RhdGUnICAgICAgICB8IEFu
        IGluc3RhbmNlIG9mIERhdGUgICAgICAgICAgICAgICAgICAgICAgICAgICAg
        ICAgICAgfAogICAgICB8ICdjbGFzcycgICAgICAgfCBBbiBFbWJlciBjbGFz
        cyAoY3JlYXRlZCB1c2luZyBFbWJlci5PYmplY3QuZXh0ZW5kKCkpIHwKICAg
        ICAgfCAnaW5zdGFuY2UnICAgIHwgQW4gRW1iZXIgb2JqZWN0IGluc3RhbmNl
        ICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8CiAgICAgIHwgJ2Vycm9y
        JyAgICAgICB8IEFuIGluc3RhbmNlIG9mIHRoZSBFcnJvciBvYmplY3QgICAg
        ICAgICAgICAgICAgICAgICAgfAogICAgICB8ICdvYmplY3QnICAgICAgfCBB
        IEphdmFTY3JpcHQgb2JqZWN0IG5vdCBpbmhlcml0aW5nIGZyb20gRW1iZXIu
        T2JqZWN0IHwKCiAgRXhhbXBsZXM6CgogIGBgYGphdmFzY3JpcHQKICBFbWJl
        ci50eXBlT2YoKTsgICAgICAgICAgICAgICAgICAgICAgIC8vICd1bmRlZmlu
        ZWQnCiAgRW1iZXIudHlwZU9mKG51bGwpOyAgICAgICAgICAgICAgICAgICAv
        LyAnbnVsbCcKICBFbWJlci50eXBlT2YodW5kZWZpbmVkKTsgICAgICAgICAg
        ICAgIC8vICd1bmRlZmluZWQnCiAgRW1iZXIudHlwZU9mKCdtaWNoYWVsJyk7
        ICAgICAgICAgICAgICAvLyAnc3RyaW5nJwogIEVtYmVyLnR5cGVPZihuZXcg
        U3RyaW5nKCdtaWNoYWVsJykpOyAgLy8gJ3N0cmluZycKICBFbWJlci50eXBl
        T2YoMTAxKTsgICAgICAgICAgICAgICAgICAgIC8vICdudW1iZXInCiAgRW1i
        ZXIudHlwZU9mKG5ldyBOdW1iZXIoMTAxKSk7ICAgICAgICAvLyAnbnVtYmVy
        JwogIEVtYmVyLnR5cGVPZih0cnVlKTsgICAgICAgICAgICAgICAgICAgLy8g
        J2Jvb2xlYW4nCiAgRW1iZXIudHlwZU9mKG5ldyBCb29sZWFuKHRydWUpKTsg
        ICAgICAvLyAnYm9vbGVhbicKICBFbWJlci50eXBlT2YoRW1iZXIubWFrZUFy
        cmF5KTsgICAgICAgIC8vICdmdW5jdGlvbicKICBFbWJlci50eXBlT2YoWzEs
        Miw5MF0pOyAgICAgICAgICAgICAgIC8vICdhcnJheScKICBFbWJlci50eXBl
        T2YoL2FiYy8pOyAgICAgICAgICAgICAgICAgIC8vICdyZWdleHAnCiAgRW1i
        ZXIudHlwZU9mKG5ldyBEYXRlKCkpOyAgICAgICAgICAgICAvLyAnZGF0ZScK
        ICBFbWJlci50eXBlT2YoRW1iZXIuT2JqZWN0LmV4dGVuZCgpKTsgIC8vICdj
        bGFzcycKICBFbWJlci50eXBlT2YoRW1iZXIuT2JqZWN0LmNyZWF0ZSgpKTsg
        IC8vICdpbnN0YW5jZScKICBFbWJlci50eXBlT2YobmV3IEVycm9yKCd0ZWFt
        b2NpbCcpKTsgIC8vICdlcnJvcicKCiAgLy8gIm5vcm1hbCIgSmF2YVNjcmlw
        dCBvYmplY3QKICBFbWJlci50eXBlT2Yoe2E6ICdiJ30pOyAgICAgICAgICAg
        ICAgLy8gJ29iamVjdCcKICBgYGAKCiAgQG1ldGhvZCB0eXBlT2YKICBAZm9y
        IEVtYmVyCiAgQHBhcmFtIHtPYmplY3R9IGl0ZW0gdGhlIGl0ZW0gdG8gY2hl
        Y2sKICBAcmV0dXJuIHtTdHJpbmd9IHRoZSB0eXBlCiovCkVtYmVyLnR5cGVP
        ZiA9IGZ1bmN0aW9uKGl0ZW0pIHsKICB2YXIgcmV0OwoKICByZXQgPSAoaXRl
        bSA9PT0gbnVsbCB8fCBpdGVtID09PSB1bmRlZmluZWQpID8gU3RyaW5nKGl0
        ZW0pIDogVFlQRV9NQVBbdG9TdHJpbmcuY2FsbChpdGVtKV0gfHwgJ29iamVj
        dCc7CgogIGlmIChyZXQgPT09ICdmdW5jdGlvbicpIHsKICAgIGlmIChFbWJl
        ci5PYmplY3QgJiYgRW1iZXIuT2JqZWN0LmRldGVjdChpdGVtKSkgcmV0ID0g
        J2NsYXNzJzsKICB9IGVsc2UgaWYgKHJldCA9PT0gJ29iamVjdCcpIHsKICAg
        IGlmIChpdGVtIGluc3RhbmNlb2YgRXJyb3IpIHJldCA9ICdlcnJvcic7CiAg
        ICBlbHNlIGlmIChFbWJlci5PYmplY3QgJiYgaXRlbSBpbnN0YW5jZW9mIEVt
        YmVyLk9iamVjdCkgcmV0ID0gJ2luc3RhbmNlJzsKICAgIGVsc2UgaWYgKGl0
        ZW0gaW5zdGFuY2VvZiBEYXRlKSByZXQgPSAnZGF0ZSc7CiAgfQoKICByZXR1
        cm4gcmV0Owp9OwoKLyoqCiAgQ29udmVuaWVuY2UgbWV0aG9kIHRvIGluc3Bl
        Y3QgYW4gb2JqZWN0LiBUaGlzIG1ldGhvZCB3aWxsIGF0dGVtcHQgdG8KICBj
        b252ZXJ0IHRoZSBvYmplY3QgaW50byBhIHVzZWZ1bCBzdHJpbmcgZGVzY3Jp
        cHRpb24uCgogIEl0IGlzIGEgcHJldHR5IHNpbXBsZSBpbXBsZW1lbnRhdGlv
        bi4gSWYgeW91IHdhbnQgc29tZXRoaW5nIG1vcmUgcm9idXN0LAogIHVzZSBz
        b21ldGhpbmcgbGlrZSBKU0R1bXA6IGh0dHBzOi8vZ2l0aHViLmNvbS9OVi9q
        c0R1bXAKCiAgQG1ldGhvZCBpbnNwZWN0CiAgQGZvciBFbWJlcgogIEBwYXJh
        bSB7T2JqZWN0fSBvYmogVGhlIG9iamVjdCB5b3Ugd2FudCB0byBpbnNwZWN0
        LgogIEByZXR1cm4ge1N0cmluZ30gQSBkZXNjcmlwdGlvbiBvZiB0aGUgb2Jq
        ZWN0CiovCkVtYmVyLmluc3BlY3QgPSBmdW5jdGlvbihvYmopIHsKICB2YXIg
        dHlwZSA9IEVtYmVyLnR5cGVPZihvYmopOwogIGlmICh0eXBlID09PSAnYXJy
        YXknKSB7CiAgICByZXR1cm4gJ1snICsgb2JqICsgJ10nOwogIH0KICBpZiAo
        dHlwZSAhPT0gJ29iamVjdCcpIHsKICAgIHJldHVybiBvYmogKyAnJzsKICB9
        CgogIHZhciB2LCByZXQgPSBbXTsKICBmb3IodmFyIGtleSBpbiBvYmopIHsK
        ICAgIGlmIChvYmouaGFzT3duUHJvcGVydHkoa2V5KSkgewogICAgICB2ID0g
        b2JqW2tleV07CiAgICAgIGlmICh2ID09PSAndG9TdHJpbmcnKSB7IGNvbnRp
        bnVlOyB9IC8vIGlnbm9yZSB1c2VsZXNzIGl0ZW1zCiAgICAgIGlmIChFbWJl
        ci50eXBlT2YodikgPT09ICdmdW5jdGlvbicpIHsgdiA9ICJmdW5jdGlvbigp
        IHsgLi4uIH0iOyB9CiAgICAgIHJldC5wdXNoKGtleSArICI6ICIgKyB2KTsK
        ICAgIH0KICB9CiAgcmV0dXJuICJ7IiArIHJldC5qb2luKCIsICIpICsgIn0i
        Owp9OwoKCgp9KSgpOwoKCgooZnVuY3Rpb24oKSB7Ci8vIEVtYmVyLnRyeUNh
        dGNoRmluYWxseQoKLyoqCiAgVGhlIHB1cnBvc2Ugb2YgdGhlIEVtYmVyIElu
        c3RydW1lbnRhdGlvbiBtb2R1bGUgaXMKICB0byBwcm92aWRlIGVmZmljaWVu
        dCwgZ2VuZXJhbC1wdXJwb3NlIGluc3RydW1lbnRhdGlvbgogIGZvciBFbWJl
        ci4KCiAgU3Vic2NyaWJlIHRvIGEgbGlzdGVuZXIgYnkgdXNpbmcgYEVtYmVy
        LnN1YnNjcmliZWA6CgogIGBgYGphdmFzY3JpcHQKICBFbWJlci5zdWJzY3Jp
        YmUoInJlbmRlciIsIHsKICAgIGJlZm9yZTogZnVuY3Rpb24obmFtZSwgdGlt
        ZXN0YW1wLCBwYXlsb2FkKSB7CgogICAgfSwKCiAgICBhZnRlcjogZnVuY3Rp
        b24obmFtZSwgdGltZXN0YW1wLCBwYXlsb2FkKSB7CgogICAgfQogIH0pOwog
        IGBgYAoKICBJZiB5b3UgcmV0dXJuIGEgdmFsdWUgZnJvbSB0aGUgYGJlZm9y
        ZWAgY2FsbGJhY2ssIHRoYXQgc2FtZQogIHZhbHVlIHdpbGwgYmUgcGFzc2Vk
        IGFzIGEgZm91cnRoIHBhcmFtZXRlciB0byB0aGUgYGFmdGVyYAogIGNhbGxi
        YWNrLgoKICBJbnN0cnVtZW50IGEgYmxvY2sgb2YgY29kZSBieSB1c2luZyBg
        RW1iZXIuaW5zdHJ1bWVudGA6CgogIGBgYGphdmFzY3JpcHQKICBFbWJlci5p
        bnN0cnVtZW50KCJyZW5kZXIuaGFuZGxlYmFycyIsIHBheWxvYWQsIGZ1bmN0
        aW9uKCkgewogICAgLy8gcmVuZGVyaW5nIGxvZ2ljCiAgfSwgYmluZGluZyk7
        CiAgYGBgCgogIEV2ZW50IG5hbWVzIHBhc3NlZCB0byBgRW1iZXIuaW5zdHJ1
        bWVudGAgYXJlIG5hbWVzcGFjZWQKICBieSBwZXJpb2RzLCBmcm9tIG1vcmUg
        Z2VuZXJhbCB0byBtb3JlIHNwZWNpZmljLiBTdWJzY3JpYmVycwogIGNhbiBs
        aXN0ZW4gZm9yIGV2ZW50cyBieSB3aGF0ZXZlciBsZXZlbCBvZiBncmFudWxh
        cml0eSB0aGV5CiAgYXJlIGludGVyZXN0ZWQgaW4uCgogIEluIHRoZSBhYm92
        ZSBleGFtcGxlLCB0aGUgZXZlbnQgaXMgYHJlbmRlci5oYW5kbGViYXJzYCwK
        ICBhbmQgdGhlIHN1YnNjcmliZXIgbGlzdGVuZWQgZm9yIGFsbCBldmVudHMg
        YmVnaW5uaW5nIHdpdGgKICBgcmVuZGVyYC4gSXQgd291bGQgcmVjZWl2ZSBj
        YWxsYmFja3MgZm9yIGV2ZW50cyBuYW1lZAogIGByZW5kZXJgLCBgcmVuZGVy
        LmhhbmRsZWJhcnNgLCBgcmVuZGVyLmNvbnRhaW5lcmAsIG9yCiAgZXZlbiBg
        cmVuZGVyLmhhbmRsZWJhcnMubGF5b3V0YC4KCiAgQGNsYXNzIEluc3RydW1l
        bnRhdGlvbgogIEBuYW1lc3BhY2UgRW1iZXIKICBAc3RhdGljCiovCkVtYmVy
        Lkluc3RydW1lbnRhdGlvbiA9IHt9OwoKdmFyIHN1YnNjcmliZXJzID0gW10s
        IGNhY2hlID0ge307Cgp2YXIgcG9wdWxhdGVMaXN0ZW5lcnMgPSBmdW5jdGlv
        bihuYW1lKSB7CiAgdmFyIGxpc3RlbmVycyA9IFtdLCBzdWJzY3JpYmVyOwoK
        ICBmb3IgKHZhciBpPTAsIGw9c3Vic2NyaWJlcnMubGVuZ3RoOyBpPGw7IGkr
        KykgewogICAgc3Vic2NyaWJlciA9IHN1YnNjcmliZXJzW2ldOwogICAgaWYg
        KHN1YnNjcmliZXIucmVnZXgudGVzdChuYW1lKSkgewogICAgICBsaXN0ZW5l
        cnMucHVzaChzdWJzY3JpYmVyLm9iamVjdCk7CiAgICB9CiAgfQoKICBjYWNo
        ZVtuYW1lXSA9IGxpc3RlbmVyczsKICByZXR1cm4gbGlzdGVuZXJzOwp9OwoK
        dmFyIHRpbWUgPSAoZnVuY3Rpb24oKSB7CiAgdmFyIHBlcmYgPSAndW5kZWZp
        bmVkJyAhPT0gdHlwZW9mIHdpbmRvdyA/IHdpbmRvdy5wZXJmb3JtYW5jZSB8
        fCB7fSA6IHt9OwogIHZhciBmbiA9IHBlcmYubm93IHx8IHBlcmYubW96Tm93
        IHx8IHBlcmYud2Via2l0Tm93IHx8IHBlcmYubXNOb3cgfHwgcGVyZi5vTm93
        OwogIC8vIGZuLmJpbmQgd2lsbCBiZSBhdmFpbGFibGUgaW4gYWxsIHRoZSBi
        cm93c2VycyB0aGF0IHN1cHBvcnQgdGhlIGFkdmFuY2VkIHdpbmRvdy5wZXJm
        b3JtYW5jZS4uLiA7LSkKICByZXR1cm4gZm4gPyBmbi5iaW5kKHBlcmYpIDog
        ZnVuY3Rpb24oKSB7IHJldHVybiArbmV3IERhdGUoKTsgfTsKfSkoKTsKCi8q
        KgogIE5vdGlmaWVzIGV2ZW50J3Mgc3Vic2NyaWJlcnMsIGNhbGxzIGBiZWZv
        cmVgIGFuZCBgYWZ0ZXJgIGhvb2tzLgoKICBAbWV0aG9kIGluc3RydW1lbnQK
        ICBAbmFtZXNwYWNlIEVtYmVyLkluc3RydW1lbnRhdGlvbgoKICBAcGFyYW0g
        e1N0cmluZ30gW25hbWVdIE5hbWVzcGFjZWQgZXZlbnQgbmFtZS4KICBAcGFy
        YW0ge09iamVjdH0gcGF5bG9hZAogIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxi
        YWNrIEZ1bmN0aW9uIHRoYXQgeW91J3JlIGluc3RydW1lbnRpbmcuCiAgQHBh
        cmFtIHtPYmplY3R9IGJpbmRpbmcgQ29udGV4dCB0aGF0IGluc3RydW1lbnQg
        ZnVuY3Rpb24gaXMgY2FsbGVkIHdpdGguCiovCkVtYmVyLkluc3RydW1lbnRh
        dGlvbi5pbnN0cnVtZW50ID0gZnVuY3Rpb24obmFtZSwgcGF5bG9hZCwgY2Fs
        bGJhY2ssIGJpbmRpbmcpIHsKICB2YXIgbGlzdGVuZXJzID0gY2FjaGVbbmFt
        ZV0sIHRpbWVOYW1lLCByZXQ7CgogIGlmIChFbWJlci5TVFJVQ1RVUkVEX1BS
        T0ZJTEUpIHsKICAgIHRpbWVOYW1lID0gbmFtZSArICI6ICIgKyBwYXlsb2Fk
        Lm9iamVjdDsKICAgIGNvbnNvbGUudGltZSh0aW1lTmFtZSk7CiAgfQoKICBp
        ZiAoIWxpc3RlbmVycykgewogICAgbGlzdGVuZXJzID0gcG9wdWxhdGVMaXN0
        ZW5lcnMobmFtZSk7CiAgfQoKICBpZiAobGlzdGVuZXJzLmxlbmd0aCA9PT0g
        MCkgewogICAgcmV0ID0gY2FsbGJhY2suY2FsbChiaW5kaW5nKTsKICAgIGlm
        IChFbWJlci5TVFJVQ1RVUkVEX1BST0ZJTEUpIHsgY29uc29sZS50aW1lRW5k
        KHRpbWVOYW1lKTsgfQogICAgcmV0dXJuIHJldDsKICB9CgogIHZhciBiZWZv
        cmVWYWx1ZXMgPSBbXSwgbGlzdGVuZXIsIGksIGw7CgogIGZ1bmN0aW9uIHRy
        eWFibGUoKSB7CiAgICBmb3IgKGk9MCwgbD1saXN0ZW5lcnMubGVuZ3RoOyBp
        PGw7IGkrKykgewogICAgICBsaXN0ZW5lciA9IGxpc3RlbmVyc1tpXTsKICAg
        ICAgYmVmb3JlVmFsdWVzW2ldID0gbGlzdGVuZXIuYmVmb3JlKG5hbWUsIHRp
        bWUoKSwgcGF5bG9hZCk7CiAgICB9CgogICAgcmV0dXJuIGNhbGxiYWNrLmNh
        bGwoYmluZGluZyk7CiAgfQoKICBmdW5jdGlvbiBjYXRjaGFibGUoZSkgewog
        ICAgcGF5bG9hZCA9IHBheWxvYWQgfHwge307CiAgICBwYXlsb2FkLmV4Y2Vw
        dGlvbiA9IGU7CiAgfQoKICBmdW5jdGlvbiBmaW5hbGl6ZXIoKSB7CiAgICBm
        b3IgKGk9MCwgbD1saXN0ZW5lcnMubGVuZ3RoOyBpPGw7IGkrKykgewogICAg
        ICBsaXN0ZW5lciA9IGxpc3RlbmVyc1tpXTsKICAgICAgbGlzdGVuZXIuYWZ0
        ZXIobmFtZSwgdGltZSgpLCBwYXlsb2FkLCBiZWZvcmVWYWx1ZXNbaV0pOwog
        ICAgfQoKICAgIGlmIChFbWJlci5TVFJVQ1RVUkVEX1BST0ZJTEUpIHsKICAg
        ICAgY29uc29sZS50aW1lRW5kKHRpbWVOYW1lKTsKICAgIH0KICB9CgogIHJl
        dHVybiBFbWJlci50cnlDYXRjaEZpbmFsbHkodHJ5YWJsZSwgY2F0Y2hhYmxl
        LCBmaW5hbGl6ZXIpOwp9OwoKLyoqCiAgU3Vic2NyaWJlcyB0byBhIHBhcnRp
        Y3VsYXIgZXZlbnQgb3IgaW5zdHJ1bWVudGVkIGJsb2NrIG9mIGNvZGUuCgog
        IEBtZXRob2Qgc3Vic2NyaWJlCiAgQG5hbWVzcGFjZSBFbWJlci5JbnN0cnVt
        ZW50YXRpb24KCiAgQHBhcmFtIHtTdHJpbmd9IFtwYXR0ZXJuXSBOYW1lc3Bh
        Y2VkIGV2ZW50IG5hbWUuCiAgQHBhcmFtIHtPYmplY3R9IFtvYmplY3RdIEJl
        Zm9yZSBhbmQgQWZ0ZXIgaG9va3MuCgogIEByZXR1cm4ge1N1YnNjcmliZXJ9
        CiovCkVtYmVyLkluc3RydW1lbnRhdGlvbi5zdWJzY3JpYmUgPSBmdW5jdGlv
        bihwYXR0ZXJuLCBvYmplY3QpIHsKICB2YXIgcGF0aHMgPSBwYXR0ZXJuLnNw
        bGl0KCIuIiksIHBhdGgsIHJlZ2V4ID0gW107CgogIGZvciAodmFyIGk9MCwg
        bD1wYXRocy5sZW5ndGg7IGk8bDsgaSsrKSB7CiAgICBwYXRoID0gcGF0aHNb
        aV07CiAgICBpZiAocGF0aCA9PT0gIioiKSB7CiAgICAgIHJlZ2V4LnB1c2go
        IlteXFwuXSoiKTsKICAgIH0gZWxzZSB7CiAgICAgIHJlZ2V4LnB1c2gocGF0
        aCk7CiAgICB9CiAgfQoKICByZWdleCA9IHJlZ2V4LmpvaW4oIlxcLiIpOwog
        IHJlZ2V4ID0gcmVnZXggKyAiKFxcLi4qKT8iOwoKICB2YXIgc3Vic2NyaWJl
        ciA9IHsKICAgIHBhdHRlcm46IHBhdHRlcm4sCiAgICByZWdleDogbmV3IFJl
        Z0V4cCgiXiIgKyByZWdleCArICIkIiksCiAgICBvYmplY3Q6IG9iamVjdAog
        IH07CgogIHN1YnNjcmliZXJzLnB1c2goc3Vic2NyaWJlcik7CiAgY2FjaGUg
        PSB7fTsKCiAgcmV0dXJuIHN1YnNjcmliZXI7Cn07CgovKioKICBVbnN1YnNj
        cmliZXMgZnJvbSBhIHBhcnRpY3VsYXIgZXZlbnQgb3IgaW5zdHJ1bWVudGVk
        IGJsb2NrIG9mIGNvZGUuCgogIEBtZXRob2QgdW5zdWJzY3JpYmUKICBAbmFt
        ZXNwYWNlIEVtYmVyLkluc3RydW1lbnRhdGlvbgoKICBAcGFyYW0ge09iamVj
        dH0gW3N1YnNjcmliZXJdCiovCkVtYmVyLkluc3RydW1lbnRhdGlvbi51bnN1
        YnNjcmliZSA9IGZ1bmN0aW9uKHN1YnNjcmliZXIpIHsKICB2YXIgaW5kZXg7
        CgogIGZvciAodmFyIGk9MCwgbD1zdWJzY3JpYmVycy5sZW5ndGg7IGk8bDsg
        aSsrKSB7CiAgICBpZiAoc3Vic2NyaWJlcnNbaV0gPT09IHN1YnNjcmliZXIp
        IHsKICAgICAgaW5kZXggPSBpOwogICAgfQogIH0KCiAgc3Vic2NyaWJlcnMu
        c3BsaWNlKGluZGV4LCAxKTsKICBjYWNoZSA9IHt9Owp9OwoKLyoqCiAgUmVz
        ZXRzIGBFbWJlci5JbnN0cnVtZW50YXRpb25gIGJ5IGZsdXNoaW5nIGxpc3Qg
        b2Ygc3Vic2NyaWJlcnMuCgogIEBtZXRob2QgcmVzZXQKICBAbmFtZXNwYWNl
        IEVtYmVyLkluc3RydW1lbnRhdGlvbgoqLwpFbWJlci5JbnN0cnVtZW50YXRp
        b24ucmVzZXQgPSBmdW5jdGlvbigpIHsKICBzdWJzY3JpYmVycyA9IFtdOwog
        IGNhY2hlID0ge307Cn07CgpFbWJlci5pbnN0cnVtZW50ID0gRW1iZXIuSW5z
        dHJ1bWVudGF0aW9uLmluc3RydW1lbnQ7CkVtYmVyLnN1YnNjcmliZSA9IEVt
        YmVyLkluc3RydW1lbnRhdGlvbi5zdWJzY3JpYmU7Cn0pKCk7CgoKCihmdW5j
        dGlvbigpIHsKdmFyIG1hcCwgZm9yRWFjaCwgaW5kZXhPZiwgc3BsaWNlLCBm
        aWx0ZXI7Cm1hcCAgICAgPSBBcnJheS5wcm90b3R5cGUubWFwICAgICB8fCBF
        bWJlci5BcnJheVBvbHlmaWxscy5tYXA7CmZvckVhY2ggPSBBcnJheS5wcm90
        b3R5cGUuZm9yRWFjaCB8fCBFbWJlci5BcnJheVBvbHlmaWxscy5mb3JFYWNo
        OwppbmRleE9mID0gQXJyYXkucHJvdG90eXBlLmluZGV4T2YgfHwgRW1iZXIu
        QXJyYXlQb2x5ZmlsbHMuaW5kZXhPZjsKZmlsdGVyID0gQXJyYXkucHJvdG90
        eXBlLmZpbHRlciB8fCBFbWJlci5BcnJheVBvbHlmaWxscy5maWx0ZXI7CnNw
        bGljZSA9IEFycmF5LnByb3RvdHlwZS5zcGxpY2U7CgovKioKICogRGVmaW5l
        cyBzb21lIGNvbnZlbmllbmNlIG1ldGhvZHMgZm9yIHdvcmtpbmcgd2l0aCBF
        bnVtZXJhYmxlcy4KICogYEVtYmVyLkVudW1lcmFibGVVdGlsc2AgdXNlcyBg
        RW1iZXIuQXJyYXlQb2x5ZmlsbHNgIHdoZW4gbmVjZXNzYXJ5LgogKgogKiBA
        Y2xhc3MgRW51bWVyYWJsZVV0aWxzCiAqIEBuYW1lc3BhY2UgRW1iZXIKICog
        QHN0YXRpYwogKiAqLwp2YXIgdXRpbHMgPSBFbWJlci5FbnVtZXJhYmxlVXRp
        bHMgPSB7CiAgLyoqCiAgICogQ2FsbHMgdGhlIG1hcCBmdW5jdGlvbiBvbiB0
        aGUgcGFzc2VkIG9iamVjdCB3aXRoIGEgc3BlY2lmaWVkIGNhbGxiYWNrLiBU
        aGlzCiAgICogdXNlcyBgRW1iZXIuQXJyYXlQb2x5ZmlsbGAncy1tYXAgbWV0
        aG9kIHdoZW4gbmVjZXNzYXJ5LgogICAqCiAgICogQG1ldGhvZCBtYXAKICAg
        KiBAcGFyYW0ge09iamVjdH0gb2JqIFRoZSBvYmplY3QgdGhhdCBzaG91bGQg
        YmUgbWFwcGVkCiAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2sgVGhl
        IGNhbGxiYWNrIHRvIGV4ZWN1dGUKICAgKiBAcGFyYW0ge09iamVjdH0gdGhp
        c0FyZyBWYWx1ZSB0byB1c2UgYXMgdGhpcyB3aGVuIGV4ZWN1dGluZyAqY2Fs
        bGJhY2sqCiAgICoKICAgKiBAcmV0dXJuIHtBcnJheX0gQW4gYXJyYXkgb2Yg
        bWFwcGVkIHZhbHVlcy4KICAgKi8KICBtYXA6IGZ1bmN0aW9uKG9iaiwgY2Fs
        bGJhY2ssIHRoaXNBcmcpIHsKICAgIHJldHVybiBvYmoubWFwID8gb2JqLm1h
        cC5jYWxsKG9iaiwgY2FsbGJhY2ssIHRoaXNBcmcpIDogbWFwLmNhbGwob2Jq
        LCBjYWxsYmFjaywgdGhpc0FyZyk7CiAgfSwKCiAgLyoqCiAgICogQ2FsbHMg
        dGhlIGZvckVhY2ggZnVuY3Rpb24gb24gdGhlIHBhc3NlZCBvYmplY3Qgd2l0
        aCBhIHNwZWNpZmllZCBjYWxsYmFjay4gVGhpcwogICAqIHVzZXMgYEVtYmVy
        LkFycmF5UG9seWZpbGxgJ3MtZm9yRWFjaCBtZXRob2Qgd2hlbiBuZWNlc3Nh
        cnkuCiAgICoKICAgKiBAbWV0aG9kIGZvckVhY2gKICAgKiBAcGFyYW0ge09i
        amVjdH0gb2JqIFRoZSBvYmplY3QgdG8gY2FsbCBmb3JFYWNoIG9uCiAgICog
        QHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2sgVGhlIGNhbGxiYWNrIHRvIGV4
        ZWN1dGUKICAgKiBAcGFyYW0ge09iamVjdH0gdGhpc0FyZyBWYWx1ZSB0byB1
        c2UgYXMgdGhpcyB3aGVuIGV4ZWN1dGluZyAqY2FsbGJhY2sqCiAgICoKICAg
        Ki8KICBmb3JFYWNoOiBmdW5jdGlvbihvYmosIGNhbGxiYWNrLCB0aGlzQXJn
        KSB7CiAgICByZXR1cm4gb2JqLmZvckVhY2ggPyBvYmouZm9yRWFjaC5jYWxs
        KG9iaiwgY2FsbGJhY2ssIHRoaXNBcmcpIDogZm9yRWFjaC5jYWxsKG9iaiwg
        Y2FsbGJhY2ssIHRoaXNBcmcpOwogIH0sCgogIC8qKgogICAqIENhbGxzIHRo
        ZSBmaWx0ZXIgZnVuY3Rpb24gb24gdGhlIHBhc3NlZCBvYmplY3Qgd2l0aCBh
        IHNwZWNpZmllZCBjYWxsYmFjay4gVGhpcwogICAqIHVzZXMgYEVtYmVyLkFy
        cmF5UG9seWZpbGxgJ3MtZmlsdGVyIG1ldGhvZCB3aGVuIG5lY2Vzc2FyeS4K
        ICAgKgogICAqIEBtZXRob2QgZmlsdGVyCiAgICogQHBhcmFtIHtPYmplY3R9
        IG9iaiBUaGUgb2JqZWN0IHRvIGNhbGwgZmlsdGVyIG9uCiAgICogQHBhcmFt
        IHtGdW5jdGlvbn0gY2FsbGJhY2sgVGhlIGNhbGxiYWNrIHRvIGV4ZWN1dGUK
        ICAgKiBAcGFyYW0ge09iamVjdH0gdGhpc0FyZyBWYWx1ZSB0byB1c2UgYXMg
        dGhpcyB3aGVuIGV4ZWN1dGluZyAqY2FsbGJhY2sqCiAgICoKICAgKiBAcmV0
        dXJuIHtBcnJheX0gQW4gYXJyYXkgY29udGFpbmluZyB0aGUgZmlsdGVyZWQg
        dmFsdWVzCiAgICovCiAgZmlsdGVyOiBmdW5jdGlvbihvYmosIGNhbGxiYWNr
        LCB0aGlzQXJnKSB7CiAgICByZXR1cm4gb2JqLmZpbHRlciA/IG9iai5maWx0
        ZXIuY2FsbChvYmosIGNhbGxiYWNrLCB0aGlzQXJnKSA6IGZpbHRlci5jYWxs
        KG9iaiwgY2FsbGJhY2ssIHRoaXNBcmcpOwogIH0sCgogIC8qKgogICAqIENh
        bGxzIHRoZSBpbmRleE9mIGZ1bmN0aW9uIG9uIHRoZSBwYXNzZWQgb2JqZWN0
        IHdpdGggYSBzcGVjaWZpZWQgY2FsbGJhY2suIFRoaXMKICAgKiB1c2VzIGBF
        bWJlci5BcnJheVBvbHlmaWxsYCdzLWluZGV4T2YgbWV0aG9kIHdoZW4gbmVj
        ZXNzYXJ5LgogICAqCiAgICogQG1ldGhvZCBpbmRleE9mCiAgICogQHBhcmFt
        IHtPYmplY3R9IG9iaiBUaGUgb2JqZWN0IHRvIGNhbGwgaW5kZXhPbiBvbgog
        ICAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrIFRoZSBjYWxsYmFjayB0
        byBleGVjdXRlCiAgICogQHBhcmFtIHtPYmplY3R9IGluZGV4IFRoZSBpbmRl
        eCB0byBzdGFydCBzZWFyY2hpbmcgZnJvbQogICAqCiAgICovCiAgaW5kZXhP
        ZjogZnVuY3Rpb24ob2JqLCBlbGVtZW50LCBpbmRleCkgewogICAgcmV0dXJu
        IG9iai5pbmRleE9mID8gb2JqLmluZGV4T2YuY2FsbChvYmosIGVsZW1lbnQs
        IGluZGV4KSA6IGluZGV4T2YuY2FsbChvYmosIGVsZW1lbnQsIGluZGV4KTsK
        ICB9LAoKICAvKioKICAgKiBSZXR1cm5zIGFuIGFycmF5IG9mIGluZGV4ZXMg
        b2YgdGhlIGZpcnN0IG9jY3VycmVuY2VzIG9mIHRoZSBwYXNzZWQgZWxlbWVu
        dHMKICAgKiBvbiB0aGUgcGFzc2VkIG9iamVjdC4KICAgKgogICAqIGBgYGph
        dmFzY3JpcHQKICAgKiAgdmFyIGFycmF5ID0gWzEsIDIsIDMsIDQsIDVdOwog
        ICAqICBFbWJlci5FbnVtZXJhYmxlVXRpbHMuaW5kZXhlc09mKGFycmF5LCBb
        MiwgNV0pOyAvLyBbMSwgNF0KICAgKgogICAqICB2YXIgZnViYXIgPSAiRnVi
        YXJyIjsKICAgKiAgRW1iZXIuRW51bWVyYWJsZVV0aWxzLmluZGV4ZXNPZihm
        dWJhciwgWydiJywgJ3InXSk7IC8vIFsyLCA0XQogICAqIGBgYAogICAqCiAg
        ICogQG1ldGhvZCBpbmRleGVzT2YKICAgKiBAcGFyYW0ge09iamVjdH0gb2Jq
        IFRoZSBvYmplY3QgdG8gY2hlY2sgZm9yIGVsZW1lbnQgaW5kZXhlcwogICAq
        IEBwYXJhbSB7QXJyYXl9IGVsZW1lbnRzIFRoZSBlbGVtZW50cyB0byBzZWFy
        Y2ggZm9yIG9uICpvYmoqCiAgICoKICAgKiBAcmV0dXJuIHtBcnJheX0gQW4g
        YXJyYXkgb2YgaW5kZXhlcy4KICAgKgogICAqLwogIGluZGV4ZXNPZjogZnVu
        Y3Rpb24ob2JqLCBlbGVtZW50cykgewogICAgcmV0dXJuIGVsZW1lbnRzID09
        PSB1bmRlZmluZWQgPyBbXSA6IHV0aWxzLm1hcChlbGVtZW50cywgZnVuY3Rp
        b24oaXRlbSkgewogICAgICByZXR1cm4gdXRpbHMuaW5kZXhPZihvYmosIGl0
        ZW0pOwogICAgfSk7CiAgfSwKCiAgLyoqIAogICAqIEFkZHMgYW4gb2JqZWN0
        IHRvIGFuIGFycmF5LiBJZiB0aGUgYXJyYXkgYWxyZWFkeSBpbmNsdWRlcyB0
        aGUgb2JqZWN0IHRoaXMKICAgKiBtZXRob2QgaGFzIG5vIGVmZmVjdC4KICAg
        KgogICAqIEBtZXRob2QgYWRkT2JqZWN0CiAgICogQHBhcmFtIHtBcnJheX0g
        YXJyYXkgVGhlIGFycmF5IHRoZSBwYXNzZWQgaXRlbSBzaG91bGQgYmUgYWRk
        ZWQgdG8KICAgKiBAcGFyYW0ge09iamVjdH0gaXRlbSBUaGUgaXRlbSB0byBh
        ZGQgdG8gdGhlIHBhc3NlZCBhcnJheQogICAqCiAgICogQHJldHVybiAndW5k
        ZWZpbmVkJwogICAqLwogIGFkZE9iamVjdDogZnVuY3Rpb24oYXJyYXksIGl0
        ZW0pIHsKICAgIHZhciBpbmRleCA9IHV0aWxzLmluZGV4T2YoYXJyYXksIGl0
        ZW0pOwogICAgaWYgKGluZGV4ID09PSAtMSkgeyBhcnJheS5wdXNoKGl0ZW0p
        OyB9CiAgfSwKCiAgLyoqCiAgICogUmVtb3ZlcyBhbiBvYmplY3QgZnJvbSBh
        biBhcnJheS4gSWYgdGhlIGFycmF5IGRvZXMgbm90IGNvbnRhaW4gdGhlIHBh
        c3NlZAogICAqIG9iamVjdCB0aGlzIG1ldGhvZCBoYXMgbm8gZWZmZWN0Lgog
        ICAqCiAgICogQG1ldGhvZCByZW1vdmVPYmplY3QKICAgKiBAcGFyYW0ge0Fy
        cmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gcmVtb3ZlIHRoZSBpdGVtIGZyb20u
        CiAgICogQHBhcmFtIHtPYmplY3R9IGl0ZW0gVGhlIGl0ZW0gdG8gcmVtb3Zl
        IGZyb20gdGhlIHBhc3NlZCBhcnJheS4KICAgKgogICAqIEByZXR1cm4gJ3Vu
        ZGVmaW5lZCcKICAgKi8KICByZW1vdmVPYmplY3Q6IGZ1bmN0aW9uKGFycmF5
        LCBpdGVtKSB7CiAgICB2YXIgaW5kZXggPSB1dGlscy5pbmRleE9mKGFycmF5
        LCBpdGVtKTsKICAgIGlmIChpbmRleCAhPT0gLTEpIHsgYXJyYXkuc3BsaWNl
        KGluZGV4LCAxKTsgfQogIH0sCgogIF9yZXBsYWNlOiBmdW5jdGlvbihhcnJh
        eSwgaWR4LCBhbXQsIG9iamVjdHMpIHsKICAgIHZhciBhcmdzID0gW10uY29u
        Y2F0KG9iamVjdHMpLCBjaHVuaywgcmV0ID0gW10sCiAgICAgICAgLy8gaHR0
        cHM6Ly9jb2RlLmdvb2dsZS5jb20vcC9jaHJvbWl1bS9pc3N1ZXMvZGV0YWls
        P2lkPTU2NTg4CiAgICAgICAgc2l6ZSA9IDYwMDAwLCBzdGFydCA9IGlkeCwg
        ZW5kcyA9IGFtdCwgY291bnQ7CgogICAgd2hpbGUgKGFyZ3MubGVuZ3RoKSB7
        CiAgICAgIGNvdW50ID0gZW5kcyA+IHNpemUgPyBzaXplIDogZW5kczsKICAg
        ICAgaWYgKGNvdW50IDw9IDApIHsgY291bnQgPSAwOyB9CgogICAgICBjaHVu
        ayA9IGFyZ3Muc3BsaWNlKDAsIHNpemUpOwogICAgICBjaHVuayA9IFtzdGFy
        dCwgY291bnRdLmNvbmNhdChjaHVuayk7CgogICAgICBzdGFydCArPSBzaXpl
        OwogICAgICBlbmRzIC09IGNvdW50OwoKICAgICAgcmV0ID0gcmV0LmNvbmNh
        dChzcGxpY2UuYXBwbHkoYXJyYXksIGNodW5rKSk7CiAgICB9CiAgICByZXR1
        cm4gcmV0OwogIH0sCgogIC8qKgogICAqIFJlcGxhY2VzIG9iamVjdHMgaW4g
        YW4gYXJyYXkgd2l0aCB0aGUgcGFzc2VkIG9iamVjdHMuCiAgICoKICAgKiBg
        YGBqYXZhc2NyaXB0CiAgICogICB2YXIgYXJyYXkgPSBbMSwyLDNdOwogICAq
        ICAgRW1iZXIuRW51bWVyYWJsZVV0aWxzLnJlcGxhY2UoYXJyYXksIDEsIDIs
        IFs0LCA1XSk7IC8vIFsxLCA0LCA1XQogICAqCiAgICogICB2YXIgYXJyYXkg
        PSBbMSwyLDNdOwogICAqICAgRW1iZXIuRW51bWVyYWJsZVV0aWxzLnJlcGxh
        Y2UoYXJyYXksIDEsIDEsIFs0LCA1XSk7IC8vIFsxLCA0LCA1LCAzXQogICAq
        CiAgICogICB2YXIgYXJyYXkgPSBbMSwyLDNdOwogICAqICAgRW1iZXIuRW51
        bWVyYWJsZVV0aWxzLnJlcGxhY2UoYXJyYXksIDEwLCAxLCBbNCwgNV0pOyAv
        LyBbMSwgMiwgMywgNCwgNV0KICAgKiBgYGAKICAgKiAKICAgKiBAbWV0aG9k
        IHJlcGxhY2UKICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkg
        dGhlIG9iamVjdHMgc2hvdWxkIGJlIGluc2VydGVkIGludG8uCiAgICogQHBh
        cmFtIHtOdW1iZXJ9IGlkeCBTdGFydGluZyBpbmRleCBpbiB0aGUgYXJyYXkg
        dG8gcmVwbGFjZS4gSWYgKmlkeCogPj0KICAgKiBsZW5ndGgsIHRoZW4gYXBw
        ZW5kIHRvIHRoZSBlbmQgb2YgdGhlIGFycmF5LgogICAqIEBwYXJhbSB7TnVt
        YmVyfSBhbXQgTnVtYmVyIG9mIGVsZW1lbnRzIHRoYXQgc2hvdWxkIGJlIHJl
        bW92ZSBmcm9tIHRoZSBhcnJheSwKICAgKiBzdGFydGluZyBhdCAqaWR4Kgog
        ICAqIEBwYXJhbSB7QXJyYXl9IG9iamVjdHMgQW4gYXJyYXkgb2YgemVybyBv
        ciBtb3JlIG9iamVjdHMgdGhhdCBzaG91bGQgYmUKICAgKiBpbnNlcnRlZCBp
        bnRvIHRoZSBhcnJheSBhdCAqaWR4KgogICAqCiAgICogQHJldHVybiB7QXJy
        YXl9IFRoZSBjaGFuZ2VkIGFycmF5LgogICAqLwogIHJlcGxhY2U6IGZ1bmN0
        aW9uKGFycmF5LCBpZHgsIGFtdCwgb2JqZWN0cykgewogICAgaWYgKGFycmF5
        LnJlcGxhY2UpIHsKICAgICAgcmV0dXJuIGFycmF5LnJlcGxhY2UoaWR4LCBh
        bXQsIG9iamVjdHMpOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIHV0aWxz
        Ll9yZXBsYWNlKGFycmF5LCBpZHgsIGFtdCwgb2JqZWN0cyk7CiAgICB9CiAg
        fSwKCiAgLyoqCiAgICogQ2FsY3VsYXRlcyB0aGUgaW50ZXJzZWN0aW9uIG9m
        IHR3byBhcnJheXMuIFRoaXMgbWV0aG9kIHJldHVybnMgYSBuZXcgYXJyYXkK
        ICAgKiBmaWxsZWQgd2l0aCB0aGUgcmVjb3JkcyB0aGF0IHRoZSB0d28gcGFz
        c2VkIGFycmF5cyBzaGFyZSB3aXRoIGVhY2ggb3RoZXIuIAogICAqIElmIHRo
        ZXJlIGlzIG5vIGludGVyc2VjdGlvbiwgYW4gZW1wdHkgYXJyYXkgd2lsbCBi
        ZSByZXR1cm5lZC4KICAgKgogICAqIGBgYGphdmFzY3JpcHQKICAgKiB2YXIg
        YXJyYXkxID0gWzEsIDIsIDMsIDQsIDVdOwogICAqIHZhciBhcnJheTIgPSBb
        MSwgMywgNSwgNiwgN107CiAgICoKICAgKiBFbWJlci5FbnVtZXJhYmxlVXRp
        bHMuaW50ZXJzZWN0aW9uKGFycmF5MSwgYXJyYXkyKTsgLy8gWzEsIDMsIDVd
        CiAgICoKICAgKiB2YXIgYXJyYXkxID0gWzEsIDIsIDNdOwogICAqIHZhciBh
        cnJheTIgPSBbNCwgNSwgNl07CiAgICoKICAgKiBFbWJlci5FbnVtZXJhYmxl
        VXRpbHMuaW50ZXJzZWN0aW9uKGFycmF5MSwgYXJyYXkyKTsgLy8gW10KICAg
        KiBgYGAKICAgKgogICAqIEBtZXRob2QgaW50ZXJzZWN0aW9uCiAgICogQHBh
        cmFtIHtBcnJheX0gYXJyYXkxIFRoZSBmaXJzdCBhcnJheQogICAqIEBwYXJh
        bSB7QXJyYXl9IGFycmF5MiBUaGUgc2Vjb25kIGFycmF5CiAgICoKICAgKiBA
        cmV0dXJuIHtBcnJheX0gVGhlIGludGVyc2VjdGlvbiBvZiB0aGUgdHdvIHBh
        c3NlZCBhcnJheXMuCiAgICovCiAgaW50ZXJzZWN0aW9uOiBmdW5jdGlvbihh
        cnJheTEsIGFycmF5MikgewogICAgdmFyIGludGVyc2VjdGlvbiA9IFtdOwoK
        ICAgIHV0aWxzLmZvckVhY2goYXJyYXkxLCBmdW5jdGlvbihlbGVtZW50KSB7
        CiAgICAgIGlmICh1dGlscy5pbmRleE9mKGFycmF5MiwgZWxlbWVudCkgPj0g
        MCkgewogICAgICAgIGludGVyc2VjdGlvbi5wdXNoKGVsZW1lbnQpOwogICAg
        ICB9CiAgICB9KTsKCiAgICByZXR1cm4gaW50ZXJzZWN0aW9uOwogIH0KfTsK
        Cn0pKCk7CgoKCihmdW5jdGlvbigpIHsKLyoqCkBtb2R1bGUgZW1iZXItbWV0
        YWwKKi8KCnZhciBNRVRBX0tFWSA9IEVtYmVyLk1FVEFfS0VZLCBnZXQ7Cgp2
        YXIgTUFOREFUT1JZX1NFVFRFUiA9IEVtYmVyLkVOVi5NQU5EQVRPUllfU0VU
        VEVSOwoKdmFyIElTX0dMT0JBTF9QQVRIID0gL14oW0EtWiRdfChbMC05XVtB
        LVokXSkpLipbXC5cKl0vOwp2YXIgSEFTX1RISVMgID0gL150aGlzW1wuXCpd
        LzsKdmFyIEZJUlNUX0tFWSA9IC9eKFteXC5cKl0rKS87CgovLyAuLi4uLi4u
        Li4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4u
        Li4uLi4uCi8vIEdFVCBBTkQgU0VUCi8vCi8vIElmIHdlIGFyZSBvbiBhIHBs
        YXRmb3JtIHRoYXQgc3VwcG9ydHMgYWNjZXNzb3JzIHdlIGNhbiB1c2UgdGhv
        c2UuCi8vIE90aGVyd2lzZSBzaW11bGF0ZSBhY2Nlc3NvcnMgYnkgbG9va2lu
        ZyB1cCB0aGUgcHJvcGVydHkgZGlyZWN0bHkgb24gdGhlCi8vIG9iamVjdC4K
        Ci8qKgogIEdldHMgdGhlIHZhbHVlIG9mIGEgcHJvcGVydHkgb24gYW4gb2Jq
        ZWN0LiBJZiB0aGUgcHJvcGVydHkgaXMgY29tcHV0ZWQsCiAgdGhlIGZ1bmN0
        aW9uIHdpbGwgYmUgaW52b2tlZC4gSWYgdGhlIHByb3BlcnR5IGlzIG5vdCBk
        ZWZpbmVkIGJ1dCB0aGUKICBvYmplY3QgaW1wbGVtZW50cyB0aGUgYHVua25v
        d25Qcm9wZXJ0eWAgbWV0aG9kIHRoZW4gdGhhdCB3aWxsIGJlIGludm9rZWQu
        CgogIElmIHlvdSBwbGFuIHRvIHJ1biBvbiBJRTggYW5kIG9sZGVyIGJyb3dz
        ZXJzIHRoZW4geW91IHNob3VsZCB1c2UgdGhpcwogIG1ldGhvZCBhbnl0aW1l
        IHlvdSB3YW50IHRvIHJldHJpZXZlIGEgcHJvcGVydHkgb24gYW4gb2JqZWN0
        IHRoYXQgeW91IGRvbid0CiAga25vdyBmb3Igc3VyZSBpcyBwcml2YXRlLiAo
        UHJvcGVydGllcyBiZWdpbm5pbmcgd2l0aCBhbiB1bmRlcnNjb3JlICdfJwog
        IGFyZSBjb25zaWRlcmVkIHByaXZhdGUuKQoKICBPbiBhbGwgbmV3ZXIgYnJv
        d3NlcnMsIHlvdSBvbmx5IG5lZWQgdG8gdXNlIHRoaXMgbWV0aG9kIHRvIHJl
        dHJpZXZlCiAgcHJvcGVydGllcyBpZiB0aGUgcHJvcGVydHkgbWlnaHQgbm90
        IGJlIGRlZmluZWQgb24gdGhlIG9iamVjdCBhbmQgeW91IHdhbnQKICB0byBy
        ZXNwZWN0IHRoZSBgdW5rbm93blByb3BlcnR5YCBoYW5kbGVyLiBPdGhlcndp
        c2UgeW91IGNhbiBpZ25vcmUgdGhpcwogIG1ldGhvZC4KCiAgTm90ZSB0aGF0
        IGlmIHRoZSBvYmplY3QgaXRzZWxmIGlzIGB1bmRlZmluZWRgLCB0aGlzIG1l
        dGhvZCB3aWxsIHRocm93CiAgYW4gZXJyb3IuCgogIEBtZXRob2QgZ2V0CiAg
        QGZvciBFbWJlcgogIEBwYXJhbSB7T2JqZWN0fSBvYmogVGhlIG9iamVjdCB0
        byByZXRyaWV2ZSBmcm9tLgogIEBwYXJhbSB7U3RyaW5nfSBrZXlOYW1lIFRo
        ZSBwcm9wZXJ0eSBrZXkgdG8gcmV0cmlldmUKICBAcmV0dXJuIHtPYmplY3R9
        IHRoZSBwcm9wZXJ0eSB2YWx1ZSBvciBgbnVsbGAuCiovCmdldCA9IGZ1bmN0
        aW9uIGdldChvYmosIGtleU5hbWUpIHsKICAvLyBIZWxwZXJzIHRoYXQgb3Bl
        cmF0ZSB3aXRoICd0aGlzJyB3aXRoaW4gYW4gI2VhY2gKICBpZiAoa2V5TmFt
        ZSA9PT0gJycpIHsKICAgIHJldHVybiBvYmo7CiAgfQoKICBpZiAoIWtleU5h
        bWUgJiYgJ3N0cmluZyc9PT10eXBlb2Ygb2JqKSB7CiAgICBrZXlOYW1lID0g
        b2JqOwogICAgb2JqID0gbnVsbDsKICB9CgogIEVtYmVyLmFzc2VydCgiQ2Fu
        bm90IGNhbGwgZ2V0IHdpdGggIisga2V5TmFtZSArIiBrZXkuIiwgISFrZXlO
        YW1lKTsKICBFbWJlci5hc3NlcnQoIkNhbm5vdCBjYWxsIGdldCB3aXRoICci
        KyBrZXlOYW1lICsiJyBvbiBhbiB1bmRlZmluZWQgb2JqZWN0LiIsIG9iaiAh
        PT0gdW5kZWZpbmVkKTsKCiAgaWYgKG9iaiA9PT0gbnVsbCB8fCBrZXlOYW1l
        LmluZGV4T2YoJy4nKSAhPT0gLTEpIHsKICAgIHJldHVybiBnZXRQYXRoKG9i
        aiwga2V5TmFtZSk7CiAgfQoKICB2YXIgbWV0YSA9IG9ialtNRVRBX0tFWV0s
        IGRlc2MgPSBtZXRhICYmIG1ldGEuZGVzY3Nba2V5TmFtZV0sIHJldDsKICBp
        ZiAoZGVzYykgewogICAgcmV0dXJuIGRlc2MuZ2V0KG9iaiwga2V5TmFtZSk7
        CiAgfSBlbHNlIHsKICAgIGlmIChNQU5EQVRPUllfU0VUVEVSICYmIG1ldGEg
        JiYgbWV0YS53YXRjaGluZ1trZXlOYW1lXSA+IDApIHsKICAgICAgcmV0ID0g
        bWV0YS52YWx1ZXNba2V5TmFtZV07CiAgICB9IGVsc2UgewogICAgICByZXQg
        PSBvYmpba2V5TmFtZV07CiAgICB9CgogICAgaWYgKHJldCA9PT0gdW5kZWZp
        bmVkICYmCiAgICAgICAgJ29iamVjdCcgPT09IHR5cGVvZiBvYmogJiYgIShr
        ZXlOYW1lIGluIG9iaikgJiYgJ2Z1bmN0aW9uJyA9PT0gdHlwZW9mIG9iai51
        bmtub3duUHJvcGVydHkpIHsKICAgICAgcmV0dXJuIG9iai51bmtub3duUHJv
        cGVydHkoa2V5TmFtZSk7CiAgICB9CgogICAgcmV0dXJuIHJldDsKICB9Cn07
        CgovLyBDdXJyZW50bHkgdXNlZCBvbmx5IGJ5IEVtYmVyIERhdGEgdGVzdHMK
        aWYgKEVtYmVyLmNvbmZpZy5vdmVycmlkZUFjY2Vzc29ycykgewogIEVtYmVy
        LmdldCA9IGdldDsKICBFbWJlci5jb25maWcub3ZlcnJpZGVBY2Nlc3NvcnMo
        KTsKICBnZXQgPSBFbWJlci5nZXQ7Cn0KCi8qKgogIE5vcm1hbGl6ZXMgYSB0
        YXJnZXQvcGF0aCBwYWlyIHRvIHJlZmxlY3QgdGhhdCBhY3R1YWwgdGFyZ2V0
        L3BhdGggdGhhdCBzaG91bGQKICBiZSBvYnNlcnZlZCwgZXRjLiBUaGlzIHRh
        a2VzIGludG8gYWNjb3VudCBwYXNzaW5nIGluIGdsb2JhbCBwcm9wZXJ0eQog
        IHBhdGhzIChpLmUuIGEgcGF0aCBiZWdpbm5pbmcgd2l0aCBhIGNhcHRpYWwg
        bGV0dGVyIG5vdCBkZWZpbmVkIG9uIHRoZQogIHRhcmdldCkgYW5kICogc2Vw
        YXJhdG9ycy4KCiAgQHByaXZhdGUKICBAbWV0aG9kIG5vcm1hbGl6ZVR1cGxl
        CiAgQGZvciBFbWJlcgogIEBwYXJhbSB7T2JqZWN0fSB0YXJnZXQgVGhlIGN1
        cnJlbnQgdGFyZ2V0LiBNYXkgYmUgYG51bGxgLgogIEBwYXJhbSB7U3RyaW5n
        fSBwYXRoIEEgcGF0aCBvbiB0aGUgdGFyZ2V0IG9yIGEgZ2xvYmFsIHByb3Bl
        cnR5IHBhdGguCiAgQHJldHVybiB7QXJyYXl9IGEgdGVtcG9yYXJ5IGFycmF5
        IHdpdGggdGhlIG5vcm1hbGl6ZWQgdGFyZ2V0L3BhdGggcGFpci4KKi8KdmFy
        IG5vcm1hbGl6ZVR1cGxlID0gRW1iZXIubm9ybWFsaXplVHVwbGUgPSBmdW5j
        dGlvbih0YXJnZXQsIHBhdGgpIHsKICB2YXIgaGFzVGhpcyAgPSBIQVNfVEhJ
        Uy50ZXN0KHBhdGgpLAogICAgICBpc0dsb2JhbCA9ICFoYXNUaGlzICYmIElT
        X0dMT0JBTF9QQVRILnRlc3QocGF0aCksCiAgICAgIGtleTsKCiAgaWYgKCF0
        YXJnZXQgfHwgaXNHbG9iYWwpIHRhcmdldCA9IEVtYmVyLmxvb2t1cDsKICBp
        ZiAoaGFzVGhpcykgcGF0aCA9IHBhdGguc2xpY2UoNSk7CgogIGlmICh0YXJn
        ZXQgPT09IEVtYmVyLmxvb2t1cCkgewogICAga2V5ID0gcGF0aC5tYXRjaChG
        SVJTVF9LRVkpWzBdOwogICAgdGFyZ2V0ID0gZ2V0KHRhcmdldCwga2V5KTsK
        ICAgIHBhdGggICA9IHBhdGguc2xpY2Uoa2V5Lmxlbmd0aCsxKTsKICB9Cgog
        IC8vIG11c3QgcmV0dXJuIHNvbWUga2luZCBvZiBwYXRoIHRvIGJlIHZhbGlk
        IGVsc2Ugb3RoZXIgdGhpbmdzIHdpbGwgYnJlYWsuCiAgaWYgKCFwYXRoIHx8
        IHBhdGgubGVuZ3RoPT09MCkgdGhyb3cgbmV3IEVtYmVyLkVycm9yKCdQYXRo
        IGNhbm5vdCBiZSBlbXB0eScpOwoKICByZXR1cm4gWyB0YXJnZXQsIHBhdGgg
        XTsKfTsKCnZhciBnZXRQYXRoID0gRW1iZXIuX2dldFBhdGggPSBmdW5jdGlv
        bihyb290LCBwYXRoKSB7CiAgdmFyIGhhc1RoaXMsIHBhcnRzLCB0dXBsZSwg
        aWR4LCBsZW47CgogIC8vIElmIHRoZXJlIGlzIG5vIHJvb3QgYW5kIHBhdGgg
        aXMgYSBrZXkgbmFtZSwgcmV0dXJuIHRoYXQKICAvLyBwcm9wZXJ0eSBmcm9t
        IHRoZSBnbG9iYWwgb2JqZWN0LgogIC8vIEUuZy4gZ2V0KCdFbWJlcicpIC0+
        IEVtYmVyCiAgaWYgKHJvb3QgPT09IG51bGwgJiYgcGF0aC5pbmRleE9mKCcu
        JykgPT09IC0xKSB7IHJldHVybiBnZXQoRW1iZXIubG9va3VwLCBwYXRoKTsg
        fQoKICAvLyBkZXRlY3QgY29tcGxpY2F0ZWQgcGF0aHMgYW5kIG5vcm1hbGl6
        ZSB0aGVtCiAgaGFzVGhpcyAgPSBIQVNfVEhJUy50ZXN0KHBhdGgpOwoKICBp
        ZiAoIXJvb3QgfHwgaGFzVGhpcykgewogICAgdHVwbGUgPSBub3JtYWxpemVU
        dXBsZShyb290LCBwYXRoKTsKICAgIHJvb3QgPSB0dXBsZVswXTsKICAgIHBh
        dGggPSB0dXBsZVsxXTsKICAgIHR1cGxlLmxlbmd0aCA9IDA7CiAgfQoKICBw
        YXJ0cyA9IHBhdGguc3BsaXQoIi4iKTsKICBsZW4gPSBwYXJ0cy5sZW5ndGg7
        CiAgZm9yIChpZHggPSAwOyByb290ICE9IG51bGwgJiYgaWR4IDwgbGVuOyBp
        ZHgrKykgewogICAgcm9vdCA9IGdldChyb290LCBwYXJ0c1tpZHhdLCB0cnVl
        KTsKICAgIGlmIChyb290ICYmIHJvb3QuaXNEZXN0cm95ZWQpIHsgcmV0dXJu
        IHVuZGVmaW5lZDsgfQogIH0KICByZXR1cm4gcm9vdDsKfTsKCkVtYmVyLmdl
        dFdpdGhEZWZhdWx0ID0gZnVuY3Rpb24ocm9vdCwga2V5LCBkZWZhdWx0VmFs
        dWUpIHsKICB2YXIgdmFsdWUgPSBnZXQocm9vdCwga2V5KTsKCiAgaWYgKHZh
        bHVlID09PSB1bmRlZmluZWQpIHsgcmV0dXJuIGRlZmF1bHRWYWx1ZTsgfQog
        IHJldHVybiB2YWx1ZTsKfTsKCgpFbWJlci5nZXQgPSBnZXQ7Cgp9KSgpOwoK
        CgooZnVuY3Rpb24oKSB7Ci8qKgpAbW9kdWxlIGVtYmVyLW1ldGFsCiovCgp2
        YXIgb19jcmVhdGUgPSBFbWJlci5jcmVhdGUsCiAgICBtZXRhRm9yID0gRW1i
        ZXIubWV0YSwKICAgIE1FVEFfS0VZID0gRW1iZXIuTUVUQV9LRVksCiAgICBh
        X3NsaWNlID0gW10uc2xpY2UsCiAgICAvKiBsaXN0ZW5lciBmbGFncyAqLwog
        ICAgT05DRSA9IDEsIFNVU1BFTkRFRCA9IDI7CgovKgogIFRoZSBldmVudCBz
        eXN0ZW0gdXNlcyBhIHNlcmllcyBvZiBuZXN0ZWQgaGFzaGVzIHRvIHN0b3Jl
        IGxpc3RlbmVycyBvbiBhbgogIG9iamVjdC4gV2hlbiBhIGxpc3RlbmVyIGlz
        IHJlZ2lzdGVyZWQsIG9yIHdoZW4gYW4gZXZlbnQgYXJyaXZlcywgdGhlc2UK
        ICBoYXNoZXMgYXJlIGNvbnN1bHRlZCB0byBkZXRlcm1pbmUgd2hpY2ggdGFy
        Z2V0IGFuZCBhY3Rpb24gcGFpciB0byBpbnZva2UuCgogIFRoZSBoYXNoZXMg
        YXJlIHN0b3JlZCBpbiB0aGUgb2JqZWN0J3MgbWV0YSBoYXNoLCBhbmQgbG9v
        ayBsaWtlIHRoaXM6CgogICAgICAvLyBPYmplY3QncyBtZXRhIGhhc2gKICAg
        ICAgewogICAgICAgIGxpc3RlbmVyczogeyAgICAgICAvLyB2YXJpYWJsZSBu
        YW1lOiBgbGlzdGVuZXJTZXRgCiAgICAgICAgICAiZm9vOmNoYW5nZWQiOiBb
        IC8vIHZhcmlhYmxlIG5hbWU6IGBhY3Rpb25zYAogICAgICAgICAgICB0YXJn
        ZXQsIG1ldGhvZCwgZmxhZ3MKICAgICAgICAgIF0KICAgICAgICB9CiAgICAg
        IH0KCiovCgpmdW5jdGlvbiBpbmRleE9mKGFycmF5LCB0YXJnZXQsIG1ldGhv
        ZCkgewogIHZhciBpbmRleCA9IC0xOwogIC8vIGhhc2hlcyBhcmUgYWRkZWQg
        dG8gdGhlIGVuZCBvZiB0aGUgZXZlbnQgYXJyYXkKICAvLyBzbyBpdCBtYWtl
        cyBzZW5zZSB0byBzdGFydCBzZWFyY2hpbmcgYXQgdGhlIGVuZAogIC8vIG9m
        IHRoZSBhcnJheSBhbmQgc2VhcmNoIGluIHJldmVyc2UKICBmb3IgKHZhciBp
        ID0gYXJyYXkubGVuZ3RoIC0gMyA7IGkgPj0wOyBpIC09IDMpIHsKICAgIGlm
        ICh0YXJnZXQgPT09IGFycmF5W2ldICYmIG1ldGhvZCA9PT0gYXJyYXlbaSAr
        IDFdKSB7CiAgICAgICAgIGluZGV4ID0gaTsgYnJlYWs7CiAgICB9CiAgfQog
        IHJldHVybiBpbmRleDsKfQoKZnVuY3Rpb24gYWN0aW9uc0ZvcihvYmosIGV2
        ZW50TmFtZSkgewogIHZhciBtZXRhID0gbWV0YUZvcihvYmosIHRydWUpLAog
        ICAgICBhY3Rpb25zOwoKICBpZiAoIW1ldGEubGlzdGVuZXJzKSB7IG1ldGEu
        bGlzdGVuZXJzID0ge307IH0KCiAgaWYgKCFtZXRhLmhhc093blByb3BlcnR5
        KCdsaXN0ZW5lcnMnKSkgewogICAgLy8gc2V0dXAgaW5oZXJpdGVkIGNvcHkg
        b2YgdGhlIGxpc3RlbmVycyBvYmplY3QKICAgIG1ldGEubGlzdGVuZXJzID0g
        b19jcmVhdGUobWV0YS5saXN0ZW5lcnMpOwogIH0KCiAgYWN0aW9ucyA9IG1l
        dGEubGlzdGVuZXJzW2V2ZW50TmFtZV07CgogIC8vIGlmIHRoZXJlIGFyZSBh
        Y3Rpb25zLCBidXQgdGhlIGV2ZW50TmFtZSBkb2Vzbid0IGV4aXN0IGluIG91
        ciBsaXN0ZW5lcnMsIHRoZW4gY29weSB0aGVtIGZyb20gdGhlIHByb3RvdHlw
        ZQogIGlmIChhY3Rpb25zICYmICFtZXRhLmxpc3RlbmVycy5oYXNPd25Qcm9w
        ZXJ0eShldmVudE5hbWUpKSB7CiAgICBhY3Rpb25zID0gbWV0YS5saXN0ZW5l
        cnNbZXZlbnROYW1lXSA9IG1ldGEubGlzdGVuZXJzW2V2ZW50TmFtZV0uc2xp
        Y2UoKTsKICB9IGVsc2UgaWYgKCFhY3Rpb25zKSB7CiAgICBhY3Rpb25zID0g
        bWV0YS5saXN0ZW5lcnNbZXZlbnROYW1lXSA9IFtdOwogIH0KCiAgcmV0dXJu
        IGFjdGlvbnM7Cn0KCmZ1bmN0aW9uIGFjdGlvbnNVbmlvbihvYmosIGV2ZW50
        TmFtZSwgb3RoZXJBY3Rpb25zKSB7CiAgdmFyIG1ldGEgPSBvYmpbTUVUQV9L
        RVldLAogICAgICBhY3Rpb25zID0gbWV0YSAmJiBtZXRhLmxpc3RlbmVycyAm
        JiBtZXRhLmxpc3RlbmVyc1tldmVudE5hbWVdOwoKICBpZiAoIWFjdGlvbnMp
        IHsgcmV0dXJuOyB9CiAgZm9yICh2YXIgaSA9IGFjdGlvbnMubGVuZ3RoIC0g
        MzsgaSA+PSAwOyBpIC09IDMpIHsKICAgIHZhciB0YXJnZXQgPSBhY3Rpb25z
        W2ldLAogICAgICAgIG1ldGhvZCA9IGFjdGlvbnNbaSsxXSwKICAgICAgICBm
        bGFncyA9IGFjdGlvbnNbaSsyXSwKICAgICAgICBhY3Rpb25JbmRleCA9IGlu
        ZGV4T2Yob3RoZXJBY3Rpb25zLCB0YXJnZXQsIG1ldGhvZCk7CgogICAgaWYg
        KGFjdGlvbkluZGV4ID09PSAtMSkgewogICAgICBvdGhlckFjdGlvbnMucHVz
        aCh0YXJnZXQsIG1ldGhvZCwgZmxhZ3MpOwogICAgfQogIH0KfQoKZnVuY3Rp
        b24gYWN0aW9uc0RpZmYob2JqLCBldmVudE5hbWUsIG90aGVyQWN0aW9ucykg
        ewogIHZhciBtZXRhID0gb2JqW01FVEFfS0VZXSwKICAgICAgYWN0aW9ucyA9
        IG1ldGEgJiYgbWV0YS5saXN0ZW5lcnMgJiYgbWV0YS5saXN0ZW5lcnNbZXZl
        bnROYW1lXSwKICAgICAgZGlmZkFjdGlvbnMgPSBbXTsKCiAgaWYgKCFhY3Rp
        b25zKSB7IHJldHVybjsgfQogIGZvciAodmFyIGkgPSBhY3Rpb25zLmxlbmd0
        aCAtIDM7IGkgPj0gMDsgaSAtPSAzKSB7CiAgICB2YXIgdGFyZ2V0ID0gYWN0
        aW9uc1tpXSwKICAgICAgICBtZXRob2QgPSBhY3Rpb25zW2krMV0sCiAgICAg
        ICAgZmxhZ3MgPSBhY3Rpb25zW2krMl0sCiAgICAgICAgYWN0aW9uSW5kZXgg
        PSBpbmRleE9mKG90aGVyQWN0aW9ucywgdGFyZ2V0LCBtZXRob2QpOwoKICAg
        IGlmIChhY3Rpb25JbmRleCAhPT0gLTEpIHsgY29udGludWU7IH0KCiAgICBv
        dGhlckFjdGlvbnMucHVzaCh0YXJnZXQsIG1ldGhvZCwgZmxhZ3MpOwogICAg
        ZGlmZkFjdGlvbnMucHVzaCh0YXJnZXQsIG1ldGhvZCwgZmxhZ3MpOwogIH0K
        CiAgcmV0dXJuIGRpZmZBY3Rpb25zOwp9CgovKioKICBBZGQgYW4gZXZlbnQg
        bGlzdGVuZXIKCiAgQG1ldGhvZCBhZGRMaXN0ZW5lcgogIEBmb3IgRW1iZXIK
        ICBAcGFyYW0gb2JqCiAgQHBhcmFtIHtTdHJpbmd9IGV2ZW50TmFtZQogIEBw
        YXJhbSB7T2JqZWN0fEZ1bmN0aW9ufSB0YXJnZXRPck1ldGhvZCBBIHRhcmdl
        dCBvYmplY3Qgb3IgYSBmdW5jdGlvbgogIEBwYXJhbSB7RnVuY3Rpb258U3Ry
        aW5nfSBtZXRob2QgQSBmdW5jdGlvbiBvciB0aGUgbmFtZSBvZiBhIGZ1bmN0
        aW9uIHRvIGJlIGNhbGxlZCBvbiBgdGFyZ2V0YAogIEBwYXJhbSB7Qm9vbGVh
        bn0gb25jZSBBIGZsYWcgd2hldGhlciBhIGZ1bmN0aW9uIHNob3VsZCBvbmx5
        IGJlIGNhbGxlZCBvbmNlCiovCmZ1bmN0aW9uIGFkZExpc3RlbmVyKG9iaiwg
        ZXZlbnROYW1lLCB0YXJnZXQsIG1ldGhvZCwgb25jZSkgewogIEVtYmVyLmFz
        c2VydCgiWW91IG11c3QgcGFzcyBhdCBsZWFzdCBhbiBvYmplY3QgYW5kIGV2
        ZW50IG5hbWUgdG8gRW1iZXIuYWRkTGlzdGVuZXIiLCAhIW9iaiAmJiAhIWV2
        ZW50TmFtZSk7CgogIGlmICghbWV0aG9kICYmICdmdW5jdGlvbicgPT09IHR5
        cGVvZiB0YXJnZXQpIHsKICAgIG1ldGhvZCA9IHRhcmdldDsKICAgIHRhcmdl
        dCA9IG51bGw7CiAgfQoKICB2YXIgYWN0aW9ucyA9IGFjdGlvbnNGb3Iob2Jq
        LCBldmVudE5hbWUpLAogICAgICBhY3Rpb25JbmRleCA9IGluZGV4T2YoYWN0
        aW9ucywgdGFyZ2V0LCBtZXRob2QpLAogICAgICBmbGFncyA9IDA7CgogIGlm
        IChvbmNlKSBmbGFncyB8PSBPTkNFOwoKICBpZiAoYWN0aW9uSW5kZXggIT09
        IC0xKSB7IHJldHVybjsgfQoKICBhY3Rpb25zLnB1c2godGFyZ2V0LCBtZXRo
        b2QsIGZsYWdzKTsKCiAgaWYgKCdmdW5jdGlvbicgPT09IHR5cGVvZiBvYmou
        ZGlkQWRkTGlzdGVuZXIpIHsKICAgIG9iai5kaWRBZGRMaXN0ZW5lcihldmVu
        dE5hbWUsIHRhcmdldCwgbWV0aG9kKTsKICB9Cn0KCi8qKgogIFJlbW92ZSBh
        biBldmVudCBsaXN0ZW5lcgoKICBBcmd1bWVudHMgc2hvdWxkIG1hdGNoIHRo
        b3NlIHBhc3NlZCB0byBgRW1iZXIuYWRkTGlzdGVuZXJgLgoKICBAbWV0aG9k
        IHJlbW92ZUxpc3RlbmVyCiAgQGZvciBFbWJlcgogIEBwYXJhbSBvYmoKICBA
        cGFyYW0ge1N0cmluZ30gZXZlbnROYW1lCiAgQHBhcmFtIHtPYmplY3R8RnVu
        Y3Rpb259IHRhcmdldE9yTWV0aG9kIEEgdGFyZ2V0IG9iamVjdCBvciBhIGZ1
        bmN0aW9uCiAgQHBhcmFtIHtGdW5jdGlvbnxTdHJpbmd9IG1ldGhvZCBBIGZ1
        bmN0aW9uIG9yIHRoZSBuYW1lIG9mIGEgZnVuY3Rpb24gdG8gYmUgY2FsbGVk
        IG9uIGB0YXJnZXRgCiovCmZ1bmN0aW9uIHJlbW92ZUxpc3RlbmVyKG9iaiwg
        ZXZlbnROYW1lLCB0YXJnZXQsIG1ldGhvZCkgewogIEVtYmVyLmFzc2VydCgi
        WW91IG11c3QgcGFzcyBhdCBsZWFzdCBhbiBvYmplY3QgYW5kIGV2ZW50IG5h
        bWUgdG8gRW1iZXIucmVtb3ZlTGlzdGVuZXIiLCAhIW9iaiAmJiAhIWV2ZW50
        TmFtZSk7CgogIGlmICghbWV0aG9kICYmICdmdW5jdGlvbicgPT09IHR5cGVv
        ZiB0YXJnZXQpIHsKICAgIG1ldGhvZCA9IHRhcmdldDsKICAgIHRhcmdldCA9
        IG51bGw7CiAgfQoKICBmdW5jdGlvbiBfcmVtb3ZlTGlzdGVuZXIodGFyZ2V0
        LCBtZXRob2QpIHsKICAgIHZhciBhY3Rpb25zID0gYWN0aW9uc0ZvcihvYmos
        IGV2ZW50TmFtZSksCiAgICAgICAgYWN0aW9uSW5kZXggPSBpbmRleE9mKGFj
        dGlvbnMsIHRhcmdldCwgbWV0aG9kKTsKCiAgICAvLyBhY3Rpb24gZG9lc24n
        dCBleGlzdCwgZ2l2ZSB1cCBzaWxlbnRseQogICAgaWYgKGFjdGlvbkluZGV4
        ID09PSAtMSkgeyByZXR1cm47IH0KCiAgICBhY3Rpb25zLnNwbGljZShhY3Rp
        b25JbmRleCwgMyk7CgogICAgaWYgKCdmdW5jdGlvbicgPT09IHR5cGVvZiBv
        YmouZGlkUmVtb3ZlTGlzdGVuZXIpIHsKICAgICAgb2JqLmRpZFJlbW92ZUxp
        c3RlbmVyKGV2ZW50TmFtZSwgdGFyZ2V0LCBtZXRob2QpOwogICAgfQogIH0K
        CiAgaWYgKG1ldGhvZCkgewogICAgX3JlbW92ZUxpc3RlbmVyKHRhcmdldCwg
        bWV0aG9kKTsKICB9IGVsc2UgewogICAgdmFyIG1ldGEgPSBvYmpbTUVUQV9L
        RVldLAogICAgICAgIGFjdGlvbnMgPSBtZXRhICYmIG1ldGEubGlzdGVuZXJz
        ICYmIG1ldGEubGlzdGVuZXJzW2V2ZW50TmFtZV07CgogICAgaWYgKCFhY3Rp
        b25zKSB7IHJldHVybjsgfQogICAgZm9yICh2YXIgaSA9IGFjdGlvbnMubGVu
        Z3RoIC0gMzsgaSA+PSAwOyBpIC09IDMpIHsKICAgICAgX3JlbW92ZUxpc3Rl
        bmVyKGFjdGlvbnNbaV0sIGFjdGlvbnNbaSsxXSk7CiAgICB9CiAgfQp9Cgov
        KioKICBTdXNwZW5kIGxpc3RlbmVyIGR1cmluZyBjYWxsYmFjay4KCiAgVGhp
        cyBzaG91bGQgb25seSBiZSB1c2VkIGJ5IHRoZSB0YXJnZXQgb2YgdGhlIGV2
        ZW50IGxpc3RlbmVyCiAgd2hlbiBpdCBpcyB0YWtpbmcgYW4gYWN0aW9uIHRo
        YXQgd291bGQgY2F1c2UgdGhlIGV2ZW50LCBlLmcuCiAgYW4gb2JqZWN0IG1p
        Z2h0IHN1c3BlbmQgaXRzIHByb3BlcnR5IGNoYW5nZSBsaXN0ZW5lciB3aGls
        ZSBpdCBpcwogIHNldHRpbmcgdGhhdCBwcm9wZXJ0eS4KCiAgQG1ldGhvZCBz
        dXNwZW5kTGlzdGVuZXIKICBAZm9yIEVtYmVyCgogIEBwcml2YXRlCiAgQHBh
        cmFtIG9iagogIEBwYXJhbSB7U3RyaW5nfSBldmVudE5hbWUKICBAcGFyYW0g
        e09iamVjdHxGdW5jdGlvbn0gdGFyZ2V0T3JNZXRob2QgQSB0YXJnZXQgb2Jq
        ZWN0IG9yIGEgZnVuY3Rpb24KICBAcGFyYW0ge0Z1bmN0aW9ufFN0cmluZ30g
        bWV0aG9kIEEgZnVuY3Rpb24gb3IgdGhlIG5hbWUgb2YgYSBmdW5jdGlvbiB0
        byBiZSBjYWxsZWQgb24gYHRhcmdldGAKICBAcGFyYW0ge0Z1bmN0aW9ufSBj
        YWxsYmFjawoqLwpmdW5jdGlvbiBzdXNwZW5kTGlzdGVuZXIob2JqLCBldmVu
        dE5hbWUsIHRhcmdldCwgbWV0aG9kLCBjYWxsYmFjaykgewogIGlmICghbWV0
        aG9kICYmICdmdW5jdGlvbicgPT09IHR5cGVvZiB0YXJnZXQpIHsKICAgIG1l
        dGhvZCA9IHRhcmdldDsKICAgIHRhcmdldCA9IG51bGw7CiAgfQoKICB2YXIg
        YWN0aW9ucyA9IGFjdGlvbnNGb3Iob2JqLCBldmVudE5hbWUpLAogICAgICBh
        Y3Rpb25JbmRleCA9IGluZGV4T2YoYWN0aW9ucywgdGFyZ2V0LCBtZXRob2Qp
        OwoKICBpZiAoYWN0aW9uSW5kZXggIT09IC0xKSB7CiAgICBhY3Rpb25zW2Fj
        dGlvbkluZGV4KzJdIHw9IFNVU1BFTkRFRDsgLy8gbWFyayB0aGUgYWN0aW9u
        IGFzIHN1c3BlbmRlZAogIH0KCiAgZnVuY3Rpb24gdHJ5YWJsZSgpICAgeyBy
        ZXR1cm4gY2FsbGJhY2suY2FsbCh0YXJnZXQpOyB9CiAgZnVuY3Rpb24gZmlu
        YWxpemVyKCkgeyBpZiAoYWN0aW9uSW5kZXggIT09IC0xKSB7IGFjdGlvbnNb
        YWN0aW9uSW5kZXgrMl0gJj0gflNVU1BFTkRFRDsgfSB9CgogIHJldHVybiBF
        bWJlci50cnlGaW5hbGx5KHRyeWFibGUsIGZpbmFsaXplcik7Cn0KCi8qKgog
        IFN1c3BlbmRzIG11bHRpcGxlIGxpc3RlbmVycyBkdXJpbmcgYSBjYWxsYmFj
        ay4KCiAgQG1ldGhvZCBzdXNwZW5kTGlzdGVuZXJzCiAgQGZvciBFbWJlcgoK
        ICBAcHJpdmF0ZQogIEBwYXJhbSBvYmoKICBAcGFyYW0ge0FycmF5fSBldmVu
        dE5hbWUgQXJyYXkgb2YgZXZlbnQgbmFtZXMKICBAcGFyYW0ge09iamVjdHxG
        dW5jdGlvbn0gdGFyZ2V0T3JNZXRob2QgQSB0YXJnZXQgb2JqZWN0IG9yIGEg
        ZnVuY3Rpb24KICBAcGFyYW0ge0Z1bmN0aW9ufFN0cmluZ30gbWV0aG9kIEEg
        ZnVuY3Rpb24gb3IgdGhlIG5hbWUgb2YgYSBmdW5jdGlvbiB0byBiZSBjYWxs
        ZWQgb24gYHRhcmdldGAKICBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjawoq
        LwpmdW5jdGlvbiBzdXNwZW5kTGlzdGVuZXJzKG9iaiwgZXZlbnROYW1lcywg
        dGFyZ2V0LCBtZXRob2QsIGNhbGxiYWNrKSB7CiAgaWYgKCFtZXRob2QgJiYg
        J2Z1bmN0aW9uJyA9PT0gdHlwZW9mIHRhcmdldCkgewogICAgbWV0aG9kID0g
        dGFyZ2V0OwogICAgdGFyZ2V0ID0gbnVsbDsKICB9CgogIHZhciBzdXNwZW5k
        ZWRBY3Rpb25zID0gW10sCiAgICAgIGFjdGlvbnNMaXN0ID0gW10sCiAgICAg
        IGV2ZW50TmFtZSwgYWN0aW9ucywgaSwgbDsKCiAgZm9yIChpPTAsIGw9ZXZl
        bnROYW1lcy5sZW5ndGg7IGk8bDsgaSsrKSB7CiAgICBldmVudE5hbWUgPSBl
        dmVudE5hbWVzW2ldOwogICAgYWN0aW9ucyA9IGFjdGlvbnNGb3Iob2JqLCBl
        dmVudE5hbWUpOwogICAgdmFyIGFjdGlvbkluZGV4ID0gaW5kZXhPZihhY3Rp
        b25zLCB0YXJnZXQsIG1ldGhvZCk7CgogICAgaWYgKGFjdGlvbkluZGV4ICE9
        PSAtMSkgewogICAgICBhY3Rpb25zW2FjdGlvbkluZGV4KzJdIHw9IFNVU1BF
        TkRFRDsKICAgICAgc3VzcGVuZGVkQWN0aW9ucy5wdXNoKGFjdGlvbkluZGV4
        KTsKICAgICAgYWN0aW9uc0xpc3QucHVzaChhY3Rpb25zKTsKICAgIH0KICB9
        CgogIGZ1bmN0aW9uIHRyeWFibGUoKSB7IHJldHVybiBjYWxsYmFjay5jYWxs
        KHRhcmdldCk7IH0KCiAgZnVuY3Rpb24gZmluYWxpemVyKCkgewogICAgZm9y
        ICh2YXIgaSA9IDAsIGwgPSBzdXNwZW5kZWRBY3Rpb25zLmxlbmd0aDsgaSA8
        IGw7IGkrKykgewogICAgICB2YXIgYWN0aW9uSW5kZXggPSBzdXNwZW5kZWRB
        Y3Rpb25zW2ldOwogICAgICBhY3Rpb25zTGlzdFtpXVthY3Rpb25JbmRleCsy
        XSAmPSB+U1VTUEVOREVEOwogICAgfQogIH0KCiAgcmV0dXJuIEVtYmVyLnRy
        eUZpbmFsbHkodHJ5YWJsZSwgZmluYWxpemVyKTsKfQoKLyoqCiAgUmV0dXJu
        IGEgbGlzdCBvZiBjdXJyZW50bHkgd2F0Y2hlZCBldmVudHMKCiAgQHByaXZh
        dGUKICBAbWV0aG9kIHdhdGNoZWRFdmVudHMKICBAZm9yIEVtYmVyCiAgQHBh
        cmFtIG9iagoqLwpmdW5jdGlvbiB3YXRjaGVkRXZlbnRzKG9iaikgewogIHZh
        ciBsaXN0ZW5lcnMgPSBvYmpbTUVUQV9LRVldLmxpc3RlbmVycywgcmV0ID0g
        W107CgogIGlmIChsaXN0ZW5lcnMpIHsKICAgIGZvcih2YXIgZXZlbnROYW1l
        IGluIGxpc3RlbmVycykgewogICAgICBpZiAobGlzdGVuZXJzW2V2ZW50TmFt
        ZV0pIHsgcmV0LnB1c2goZXZlbnROYW1lKTsgfQogICAgfQogIH0KICByZXR1
        cm4gcmV0Owp9CgovKioKICBTZW5kIGFuIGV2ZW50LiBUaGUgZXhlY3V0aW9u
        IG9mIHN1c3BlbmRlZCBsaXN0ZW5lcnMKICBpcyBza2lwcGVkLCBhbmQgb25j
        ZSBsaXN0ZW5lcnMgYXJlIHJlbW92ZWQuIEEgbGlzdGVuZXIgd2l0aG91dAog
        IGEgdGFyZ2V0IGlzIGV4ZWN1dGVkIG9uIHRoZSBwYXNzZWQgb2JqZWN0LiBJ
        ZiBhbiBhcnJheSBvZiBhY3Rpb25zCiAgaXMgbm90IHBhc3NlZCwgdGhlIGFj
        dGlvbnMgc3RvcmVkIG9uIHRoZSBwYXNzZWQgb2JqZWN0IGFyZSBpbnZva2Vk
        LgoKICBAbWV0aG9kIHNlbmRFdmVudAogIEBmb3IgRW1iZXIKICBAcGFyYW0g
        b2JqCiAgQHBhcmFtIHtTdHJpbmd9IGV2ZW50TmFtZQogIEBwYXJhbSB7QXJy
        YXl9IHBhcmFtcyBPcHRpb25hbCBwYXJhbWV0ZXJzIGZvciBlYWNoIGxpc3Rl
        bmVyLgogIEBwYXJhbSB7QXJyYXl9IGFjdGlvbnMgT3B0aW9uYWwgYXJyYXkg
        b2YgYWN0aW9ucyAobGlzdGVuZXJzKS4KICBAcmV0dXJuIHRydWUKKi8KZnVu
        Y3Rpb24gc2VuZEV2ZW50KG9iaiwgZXZlbnROYW1lLCBwYXJhbXMsIGFjdGlv
        bnMpIHsKICAvLyBmaXJzdCBnaXZlIG9iamVjdCBhIGNoYW5jZSB0byBoYW5k
        bGUgaXQKICBpZiAob2JqICE9PSBFbWJlciAmJiAnZnVuY3Rpb24nID09PSB0
        eXBlb2Ygb2JqLnNlbmRFdmVudCkgewogICAgb2JqLnNlbmRFdmVudChldmVu
        dE5hbWUsIHBhcmFtcyk7CiAgfQoKICBpZiAoIWFjdGlvbnMpIHsKICAgIHZh
        ciBtZXRhID0gb2JqW01FVEFfS0VZXTsKICAgIGFjdGlvbnMgPSBtZXRhICYm
        IG1ldGEubGlzdGVuZXJzICYmIG1ldGEubGlzdGVuZXJzW2V2ZW50TmFtZV07
        CiAgfQoKICBpZiAoIWFjdGlvbnMpIHsgcmV0dXJuOyB9CgogIGZvciAodmFy
        IGkgPSBhY3Rpb25zLmxlbmd0aCAtIDM7IGkgPj0gMDsgaSAtPSAzKSB7IC8v
        IGxvb3BpbmcgaW4gcmV2ZXJzZSBmb3Igb25jZSBsaXN0ZW5lcnMKICAgIHZh
        ciB0YXJnZXQgPSBhY3Rpb25zW2ldLCBtZXRob2QgPSBhY3Rpb25zW2krMV0s
        IGZsYWdzID0gYWN0aW9uc1tpKzJdOwogICAgaWYgKCFtZXRob2QpIHsgY29u
        dGludWU7IH0KICAgIGlmIChmbGFncyAmIFNVU1BFTkRFRCkgeyBjb250aW51
        ZTsgfQogICAgaWYgKGZsYWdzICYgT05DRSkgeyByZW1vdmVMaXN0ZW5lcihv
        YmosIGV2ZW50TmFtZSwgdGFyZ2V0LCBtZXRob2QpOyB9CiAgICBpZiAoIXRh
        cmdldCkgeyB0YXJnZXQgPSBvYmo7IH0KICAgIGlmICgnc3RyaW5nJyA9PT0g
        dHlwZW9mIG1ldGhvZCkgeyBtZXRob2QgPSB0YXJnZXRbbWV0aG9kXTsgfQog
        ICAgaWYgKHBhcmFtcykgewogICAgICBtZXRob2QuYXBwbHkodGFyZ2V0LCBw
        YXJhbXMpOwogICAgfSBlbHNlIHsKICAgICAgbWV0aG9kLmNhbGwodGFyZ2V0
        KTsKICAgIH0KICB9CiAgcmV0dXJuIHRydWU7Cn0KCi8qKgogIEBwcml2YXRl
        CiAgQG1ldGhvZCBoYXNMaXN0ZW5lcnMKICBAZm9yIEVtYmVyCiAgQHBhcmFt
        IG9iagogIEBwYXJhbSB7U3RyaW5nfSBldmVudE5hbWUKKi8KZnVuY3Rpb24g
        aGFzTGlzdGVuZXJzKG9iaiwgZXZlbnROYW1lKSB7CiAgdmFyIG1ldGEgPSBv
        YmpbTUVUQV9LRVldLAogICAgICBhY3Rpb25zID0gbWV0YSAmJiBtZXRhLmxp
        c3RlbmVycyAmJiBtZXRhLmxpc3RlbmVyc1tldmVudE5hbWVdOwoKICByZXR1
        cm4gISEoYWN0aW9ucyAmJiBhY3Rpb25zLmxlbmd0aCk7Cn0KCi8qKgogIEBw
        cml2YXRlCiAgQG1ldGhvZCBsaXN0ZW5lcnNGb3IKICBAZm9yIEVtYmVyCiAg
        QHBhcmFtIG9iagogIEBwYXJhbSB7U3RyaW5nfSBldmVudE5hbWUKKi8KZnVu
        Y3Rpb24gbGlzdGVuZXJzRm9yKG9iaiwgZXZlbnROYW1lKSB7CiAgdmFyIHJl
        dCA9IFtdOwogIHZhciBtZXRhID0gb2JqW01FVEFfS0VZXSwKICAgICAgYWN0
        aW9ucyA9IG1ldGEgJiYgbWV0YS5saXN0ZW5lcnMgJiYgbWV0YS5saXN0ZW5l
        cnNbZXZlbnROYW1lXTsKCiAgaWYgKCFhY3Rpb25zKSB7IHJldHVybiByZXQ7
        IH0KCiAgZm9yICh2YXIgaSA9IDAsIGwgPSBhY3Rpb25zLmxlbmd0aDsgaSA8
        IGw7IGkgKz0gMykgewogICAgdmFyIHRhcmdldCA9IGFjdGlvbnNbaV0sCiAg
        ICAgICAgbWV0aG9kID0gYWN0aW9uc1tpKzFdOwogICAgcmV0LnB1c2goW3Rh
        cmdldCwgbWV0aG9kXSk7CiAgfQoKICByZXR1cm4gcmV0Owp9CgovKioKICBE
        ZWZpbmUgYSBwcm9wZXJ0eSBhcyBhIGZ1bmN0aW9uIHRoYXQgc2hvdWxkIGJl
        IGV4ZWN1dGVkIHdoZW4KICBhIHNwZWNpZmllZCBldmVudCBvciBldmVudHMg
        YXJlIHRyaWdnZXJlZC4KCgogIGBgYCBqYXZhc2NyaXB0CiAgdmFyIEpvYiA9
        IEVtYmVyLk9iamVjdC5leHRlbmQoewogICAgbG9nQ29tcGxldGVkOiBFbWJl
        ci5vbignY29tcGxldGVkJywgZnVuY3Rpb24oKXsKICAgICAgY29uc29sZS5s
        b2coJ0pvYiBjb21wbGV0ZWQhJyk7CiAgICB9KQogIH0pOwogIHZhciBqb2Ig
        PSBKb2IuY3JlYXRlKCk7CiAgRW1iZXIuc2VuZEV2ZW50KGpvYiwgJ2NvbXBs
        ZXRlZCcpOyAvLyBMb2dzICJKb2IgY29tcGxldGVkISIKIGBgYAoKICBAbWV0
        aG9kIG9uCiAgQGZvciBFbWJlcgogIEBwYXJhbSB7U3RyaW5nfSBldmVudE5h
        bWVzKgogIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMKICBAcmV0dXJuIGZ1bmMK
        Ki8KRW1iZXIub24gPSBmdW5jdGlvbigpewogIHZhciBmdW5jID0gYV9zbGlj
        ZS5jYWxsKGFyZ3VtZW50cywgLTEpWzBdLAogICAgICBldmVudHMgPSBhX3Ns
        aWNlLmNhbGwoYXJndW1lbnRzLCAwLCAtMSk7CiAgZnVuYy5fX2VtYmVyX2xp
        c3RlbnNfXyA9IGV2ZW50czsKICByZXR1cm4gZnVuYzsKfTsKCkVtYmVyLmFk
        ZExpc3RlbmVyID0gYWRkTGlzdGVuZXI7CkVtYmVyLnJlbW92ZUxpc3RlbmVy
        ID0gcmVtb3ZlTGlzdGVuZXI7CkVtYmVyLl9zdXNwZW5kTGlzdGVuZXIgPSBz
        dXNwZW5kTGlzdGVuZXI7CkVtYmVyLl9zdXNwZW5kTGlzdGVuZXJzID0gc3Vz
        cGVuZExpc3RlbmVyczsKRW1iZXIuc2VuZEV2ZW50ID0gc2VuZEV2ZW50OwpF
        bWJlci5oYXNMaXN0ZW5lcnMgPSBoYXNMaXN0ZW5lcnM7CkVtYmVyLndhdGNo
        ZWRFdmVudHMgPSB3YXRjaGVkRXZlbnRzOwpFbWJlci5saXN0ZW5lcnNGb3Ig
        PSBsaXN0ZW5lcnNGb3I7CkVtYmVyLmxpc3RlbmVyc0RpZmYgPSBhY3Rpb25z
        RGlmZjsKRW1iZXIubGlzdGVuZXJzVW5pb24gPSBhY3Rpb25zVW5pb247Cgp9
        KSgpOwoKCgooZnVuY3Rpb24oKSB7CnZhciBndWlkRm9yID0gRW1iZXIuZ3Vp
        ZEZvciwKICAgIHNlbmRFdmVudCA9IEVtYmVyLnNlbmRFdmVudDsKCi8qCiAg
        dGhpcy5vYnNlcnZlclNldCA9IHsKICAgIFtzZW5kZXJHdWlkXTogeyAvLyB2
        YXJpYWJsZSBuYW1lOiBga2V5U2V0YAogICAgICBba2V5TmFtZV06IGxpc3RJ
        bmRleAogICAgfQogIH0sCiAgdGhpcy5vYnNlcnZlcnMgPSBbCiAgICB7CiAg
        ICAgIHNlbmRlcjogb2JqLAogICAgICBrZXlOYW1lOiBrZXlOYW1lLAogICAg
        ICBldmVudE5hbWU6IGV2ZW50TmFtZSwKICAgICAgbGlzdGVuZXJzOiBbCiAg
        ICAgICAgW3RhcmdldCwgbWV0aG9kLCBmbGFnc10KICAgICAgXQogICAgfSwK
        ICAgIC4uLgogIF0KKi8KdmFyIE9ic2VydmVyU2V0ID0gRW1iZXIuX09ic2Vy
        dmVyU2V0ID0gZnVuY3Rpb24oKSB7CiAgdGhpcy5jbGVhcigpOwp9OwoKT2Jz
        ZXJ2ZXJTZXQucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uKHNlbmRlciwga2V5
        TmFtZSwgZXZlbnROYW1lKSB7CiAgdmFyIG9ic2VydmVyU2V0ID0gdGhpcy5v
        YnNlcnZlclNldCwKICAgICAgb2JzZXJ2ZXJzID0gdGhpcy5vYnNlcnZlcnMs
        CiAgICAgIHNlbmRlckd1aWQgPSBndWlkRm9yKHNlbmRlciksCiAgICAgIGtl
        eVNldCA9IG9ic2VydmVyU2V0W3NlbmRlckd1aWRdLAogICAgICBpbmRleDsK
        CiAgaWYgKCFrZXlTZXQpIHsKICAgIG9ic2VydmVyU2V0W3NlbmRlckd1aWRd
        ID0ga2V5U2V0ID0ge307CiAgfQogIGluZGV4ID0ga2V5U2V0W2tleU5hbWVd
        OwogIGlmIChpbmRleCA9PT0gdW5kZWZpbmVkKSB7CiAgICBpbmRleCA9IG9i
        c2VydmVycy5wdXNoKHsKICAgICAgc2VuZGVyOiBzZW5kZXIsCiAgICAgIGtl
        eU5hbWU6IGtleU5hbWUsCiAgICAgIGV2ZW50TmFtZTogZXZlbnROYW1lLAog
        ICAgICBsaXN0ZW5lcnM6IFtdCiAgICB9KSAtIDE7CiAgICBrZXlTZXRba2V5
        TmFtZV0gPSBpbmRleDsKICB9CiAgcmV0dXJuIG9ic2VydmVyc1tpbmRleF0u
        bGlzdGVuZXJzOwp9OwoKT2JzZXJ2ZXJTZXQucHJvdG90eXBlLmZsdXNoID0g
        ZnVuY3Rpb24oKSB7CiAgdmFyIG9ic2VydmVycyA9IHRoaXMub2JzZXJ2ZXJz
        LCBpLCBsZW4sIG9ic2VydmVyLCBzZW5kZXI7CiAgdGhpcy5jbGVhcigpOwog
        IGZvciAoaT0wLCBsZW49b2JzZXJ2ZXJzLmxlbmd0aDsgaSA8IGxlbjsgKytp
        KSB7CiAgICBvYnNlcnZlciA9IG9ic2VydmVyc1tpXTsKICAgIHNlbmRlciA9
        IG9ic2VydmVyLnNlbmRlcjsKICAgIGlmIChzZW5kZXIuaXNEZXN0cm95aW5n
        IHx8IHNlbmRlci5pc0Rlc3Ryb3llZCkgeyBjb250aW51ZTsgfQogICAgc2Vu
        ZEV2ZW50KHNlbmRlciwgb2JzZXJ2ZXIuZXZlbnROYW1lLCBbc2VuZGVyLCBv
        YnNlcnZlci5rZXlOYW1lXSwgb2JzZXJ2ZXIubGlzdGVuZXJzKTsKICB9Cn07
        CgpPYnNlcnZlclNldC5wcm90b3R5cGUuY2xlYXIgPSBmdW5jdGlvbigpIHsK
        ICB0aGlzLm9ic2VydmVyU2V0ID0ge307CiAgdGhpcy5vYnNlcnZlcnMgPSBb
        XTsKfTsKfSkoKTsKCgoKKGZ1bmN0aW9uKCkgewp2YXIgTUVUQV9LRVkgPSBF
        bWJlci5NRVRBX0tFWSwKICAgIGd1aWRGb3IgPSBFbWJlci5ndWlkRm9yLAog
        ICAgdHJ5RmluYWxseSA9IEVtYmVyLnRyeUZpbmFsbHksCiAgICBzZW5kRXZl
        bnQgPSBFbWJlci5zZW5kRXZlbnQsCiAgICBsaXN0ZW5lcnNVbmlvbiA9IEVt
        YmVyLmxpc3RlbmVyc1VuaW9uLAogICAgbGlzdGVuZXJzRGlmZiA9IEVtYmVy
        Lmxpc3RlbmVyc0RpZmYsCiAgICBPYnNlcnZlclNldCA9IEVtYmVyLl9PYnNl
        cnZlclNldCwKICAgIGJlZm9yZU9ic2VydmVyU2V0ID0gbmV3IE9ic2VydmVy
        U2V0KCksCiAgICBvYnNlcnZlclNldCA9IG5ldyBPYnNlcnZlclNldCgpLAog
        ICAgZGVmZXJyZWQgPSAwOwoKLy8gLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4u
        Li4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLgovLyBQUk9QRVJU
        WSBDSEFOR0VTCi8vCgovKioKICBUaGlzIGZ1bmN0aW9uIGlzIGNhbGxlZCBq
        dXN0IGJlZm9yZSBhbiBvYmplY3QgcHJvcGVydHkgaXMgYWJvdXQgdG8gY2hh
        bmdlLgogIEl0IHdpbGwgbm90aWZ5IGFueSBiZWZvcmUgb2JzZXJ2ZXJzIGFu
        ZCBwcmVwYXJlIGNhY2hlcyBhbW9uZyBvdGhlciB0aGluZ3MuCgogIE5vcm1h
        bGx5IHlvdSB3aWxsIG5vdCBuZWVkIHRvIGNhbGwgdGhpcyBtZXRob2QgZGly
        ZWN0bHkgYnV0IGlmIGZvciBzb21lCiAgcmVhc29uIHlvdSBjYW4ndCBkaXJl
        Y3RseSB3YXRjaCBhIHByb3BlcnR5IHlvdSBjYW4gaW52b2tlIHRoaXMgbWV0
        aG9kCiAgbWFudWFsbHkgYWxvbmcgd2l0aCBgRW1iZXIucHJvcGVydHlEaWRD
        aGFuZ2UoKWAgd2hpY2ggeW91IHNob3VsZCBjYWxsIGp1c3QKICBhZnRlciB0
        aGUgcHJvcGVydHkgdmFsdWUgY2hhbmdlcy4KCiAgQG1ldGhvZCBwcm9wZXJ0
        eVdpbGxDaGFuZ2UKICBAZm9yIEVtYmVyCiAgQHBhcmFtIHtPYmplY3R9IG9i
        aiBUaGUgb2JqZWN0IHdpdGggdGhlIHByb3BlcnR5IHRoYXQgd2lsbCBjaGFu
        Z2UKICBAcGFyYW0ge1N0cmluZ30ga2V5TmFtZSBUaGUgcHJvcGVydHkga2V5
        IChvciBwYXRoKSB0aGF0IHdpbGwgY2hhbmdlLgogIEByZXR1cm4ge3ZvaWR9
        CiovCmZ1bmN0aW9uIHByb3BlcnR5V2lsbENoYW5nZShvYmosIGtleU5hbWUp
        IHsKICB2YXIgbSA9IG9ialtNRVRBX0tFWV0sCiAgICAgIHdhdGNoaW5nID0g
        KG0gJiYgbS53YXRjaGluZ1trZXlOYW1lXSA+IDApIHx8IGtleU5hbWUgPT09
        ICdsZW5ndGgnLAogICAgICBwcm90byA9IG0gJiYgbS5wcm90bywKICAgICAg
        ZGVzYyA9IG0gJiYgbS5kZXNjc1trZXlOYW1lXTsKCiAgaWYgKCF3YXRjaGlu
        ZykgeyByZXR1cm47IH0KICBpZiAocHJvdG8gPT09IG9iaikgeyByZXR1cm47
        IH0KICBpZiAoZGVzYyAmJiBkZXNjLndpbGxDaGFuZ2UpIHsgZGVzYy53aWxs
        Q2hhbmdlKG9iaiwga2V5TmFtZSk7IH0KICBkZXBlbmRlbnRLZXlzV2lsbENo
        YW5nZShvYmosIGtleU5hbWUsIG0pOwogIGNoYWluc1dpbGxDaGFuZ2Uob2Jq
        LCBrZXlOYW1lLCBtKTsKICBub3RpZnlCZWZvcmVPYnNlcnZlcnMob2JqLCBr
        ZXlOYW1lKTsKfQpFbWJlci5wcm9wZXJ0eVdpbGxDaGFuZ2UgPSBwcm9wZXJ0
        eVdpbGxDaGFuZ2U7CgovKioKICBUaGlzIGZ1bmN0aW9uIGlzIGNhbGxlZCBq
        dXN0IGFmdGVyIGFuIG9iamVjdCBwcm9wZXJ0eSBoYXMgY2hhbmdlZC4KICBJ
        dCB3aWxsIG5vdGlmeSBhbnkgb2JzZXJ2ZXJzIGFuZCBjbGVhciBjYWNoZXMg
        YW1vbmcgb3RoZXIgdGhpbmdzLgoKICBOb3JtYWxseSB5b3Ugd2lsbCBub3Qg
        bmVlZCB0byBjYWxsIHRoaXMgbWV0aG9kIGRpcmVjdGx5IGJ1dCBpZiBmb3Ig
        c29tZQogIHJlYXNvbiB5b3UgY2FuJ3QgZGlyZWN0bHkgd2F0Y2ggYSBwcm9w
        ZXJ0eSB5b3UgY2FuIGludm9rZSB0aGlzIG1ldGhvZAogIG1hbnVhbGx5IGFs
        b25nIHdpdGggYEVtYmVyLnByb3BlcnR5V2lsbENoYW5nZSgpYCB3aGljaCB5
        b3Ugc2hvdWxkIGNhbGwganVzdAogIGJlZm9yZSB0aGUgcHJvcGVydHkgdmFs
        dWUgY2hhbmdlcy4KCiAgQG1ldGhvZCBwcm9wZXJ0eURpZENoYW5nZQogIEBm
        b3IgRW1iZXIKICBAcGFyYW0ge09iamVjdH0gb2JqIFRoZSBvYmplY3Qgd2l0
        aCB0aGUgcHJvcGVydHkgdGhhdCB3aWxsIGNoYW5nZQogIEBwYXJhbSB7U3Ry
        aW5nfSBrZXlOYW1lIFRoZSBwcm9wZXJ0eSBrZXkgKG9yIHBhdGgpIHRoYXQg
        d2lsbCBjaGFuZ2UuCiAgQHJldHVybiB7dm9pZH0KKi8KZnVuY3Rpb24gcHJv
        cGVydHlEaWRDaGFuZ2Uob2JqLCBrZXlOYW1lKSB7CiAgdmFyIG0gPSBvYmpb
        TUVUQV9LRVldLAogICAgICB3YXRjaGluZyA9IChtICYmIG0ud2F0Y2hpbmdb
        a2V5TmFtZV0gPiAwKSB8fCBrZXlOYW1lID09PSAnbGVuZ3RoJywKICAgICAg
        cHJvdG8gPSBtICYmIG0ucHJvdG8sCiAgICAgIGRlc2MgPSBtICYmIG0uZGVz
        Y3Nba2V5TmFtZV07CgogIGlmIChwcm90byA9PT0gb2JqKSB7IHJldHVybjsg
        fQoKICAvLyBzaG91bGRuJ3QgdGhpcyBtZWFuIHRoYXQgd2UncmUgd2F0Y2hp
        bmcgdGhpcyBrZXk/CiAgaWYgKGRlc2MgJiYgZGVzYy5kaWRDaGFuZ2UpIHsg
        ZGVzYy5kaWRDaGFuZ2Uob2JqLCBrZXlOYW1lKTsgfQogIGlmICghd2F0Y2hp
        bmcgJiYga2V5TmFtZSAhPT0gJ2xlbmd0aCcpIHsgcmV0dXJuOyB9CgogIGRl
        cGVuZGVudEtleXNEaWRDaGFuZ2Uob2JqLCBrZXlOYW1lLCBtKTsKICBjaGFp
        bnNEaWRDaGFuZ2Uob2JqLCBrZXlOYW1lLCBtLCBmYWxzZSk7CiAgbm90aWZ5
        T2JzZXJ2ZXJzKG9iaiwga2V5TmFtZSk7Cn0KRW1iZXIucHJvcGVydHlEaWRD
        aGFuZ2UgPSBwcm9wZXJ0eURpZENoYW5nZTsKCnZhciBXSUxMX1NFRU4sIERJ
        RF9TRUVOOwoKLy8gY2FsbGVkIHdoZW5ldmVyIGEgcHJvcGVydHkgaXMgYWJv
        dXQgdG8gY2hhbmdlIHRvIGNsZWFyIHRoZSBjYWNoZSBvZiBhbnkgZGVwZW5k
        ZW50IGtleXMgKGFuZCBub3RpZnkgdGhvc2UgcHJvcGVydGllcyBvZiBjaGFu
        Z2VzLCBldGMuLi4pCmZ1bmN0aW9uIGRlcGVuZGVudEtleXNXaWxsQ2hhbmdl
        KG9iaiwgZGVwS2V5LCBtZXRhKSB7CiAgaWYgKG9iai5pc0Rlc3Ryb3lpbmcp
        IHsgcmV0dXJuOyB9CgogIHZhciBzZWVuID0gV0lMTF9TRUVOLCB0b3AgPSAh
        c2VlbjsKICBpZiAodG9wKSB7IHNlZW4gPSBXSUxMX1NFRU4gPSB7fTsgfQog
        IGl0ZXJEZXBzKHByb3BlcnR5V2lsbENoYW5nZSwgb2JqLCBkZXBLZXksIHNl
        ZW4sIG1ldGEpOwogIGlmICh0b3ApIHsgV0lMTF9TRUVOID0gbnVsbDsgfQp9
        CgovLyBjYWxsZWQgd2hlbmV2ZXIgYSBwcm9wZXJ0eSBoYXMganVzdCBjaGFu
        Z2VkIHRvIHVwZGF0ZSBkZXBlbmRlbnQga2V5cwpmdW5jdGlvbiBkZXBlbmRl
        bnRLZXlzRGlkQ2hhbmdlKG9iaiwgZGVwS2V5LCBtZXRhKSB7CiAgaWYgKG9i
        ai5pc0Rlc3Ryb3lpbmcpIHsgcmV0dXJuOyB9CgogIHZhciBzZWVuID0gRElE
        X1NFRU4sIHRvcCA9ICFzZWVuOwogIGlmICh0b3ApIHsgc2VlbiA9IERJRF9T
        RUVOID0ge307IH0KICBpdGVyRGVwcyhwcm9wZXJ0eURpZENoYW5nZSwgb2Jq
        LCBkZXBLZXksIHNlZW4sIG1ldGEpOwogIGlmICh0b3ApIHsgRElEX1NFRU4g
        PSBudWxsOyB9Cn0KCmZ1bmN0aW9uIGl0ZXJEZXBzKG1ldGhvZCwgb2JqLCBk
        ZXBLZXksIHNlZW4sIG1ldGEpIHsKICB2YXIgZ3VpZCA9IGd1aWRGb3Iob2Jq
        KTsKICBpZiAoIXNlZW5bZ3VpZF0pIHNlZW5bZ3VpZF0gPSB7fTsKICBpZiAo
        c2VlbltndWlkXVtkZXBLZXldKSByZXR1cm47CiAgc2VlbltndWlkXVtkZXBL
        ZXldID0gdHJ1ZTsKCiAgdmFyIGRlcHMgPSBtZXRhLmRlcHM7CiAgZGVwcyA9
        IGRlcHMgJiYgZGVwc1tkZXBLZXldOwogIGlmIChkZXBzKSB7CiAgICBmb3Io
        dmFyIGtleSBpbiBkZXBzKSB7CiAgICAgIHZhciBkZXNjID0gbWV0YS5kZXNj
        c1trZXldOwogICAgICBpZiAoZGVzYyAmJiBkZXNjLl9zdXNwZW5kZWQgPT09
        IG9iaikgY29udGludWU7CiAgICAgIG1ldGhvZChvYmosIGtleSk7CiAgICB9
        CiAgfQp9CgpmdW5jdGlvbiBjaGFpbnNXaWxsQ2hhbmdlKG9iaiwga2V5TmFt
        ZSwgbSkgewogIGlmICghKG0uaGFzT3duUHJvcGVydHkoJ2NoYWluV2F0Y2hl
        cnMnKSAmJgogICAgICAgIG0uY2hhaW5XYXRjaGVyc1trZXlOYW1lXSkpIHsK
        ICAgIHJldHVybjsKICB9CgogIHZhciBub2RlcyA9IG0uY2hhaW5XYXRjaGVy
        c1trZXlOYW1lXSwKICAgICAgZXZlbnRzID0gW10sCiAgICAgIGksIGw7Cgog
        IGZvcihpID0gMCwgbCA9IG5vZGVzLmxlbmd0aDsgaSA8IGw7IGkrKykgewog
        ICAgbm9kZXNbaV0ud2lsbENoYW5nZShldmVudHMpOwogIH0KCiAgZm9yIChp
        ID0gMCwgbCA9IGV2ZW50cy5sZW5ndGg7IGkgPCBsOyBpICs9IDIpIHsKICAg
        IHByb3BlcnR5V2lsbENoYW5nZShldmVudHNbaV0sIGV2ZW50c1tpKzFdKTsK
        ICB9Cn0KCmZ1bmN0aW9uIGNoYWluc0RpZENoYW5nZShvYmosIGtleU5hbWUs
        IG0sIHN1cHByZXNzRXZlbnRzKSB7CiAgaWYgKCEobSAmJiBtLmhhc093blBy
        b3BlcnR5KCdjaGFpbldhdGNoZXJzJykgJiYKICAgICAgICBtLmNoYWluV2F0
        Y2hlcnNba2V5TmFtZV0pKSB7CiAgICByZXR1cm47CiAgfQoKICB2YXIgbm9k
        ZXMgPSBtLmNoYWluV2F0Y2hlcnNba2V5TmFtZV0sCiAgICAgIGV2ZW50cyA9
        IHN1cHByZXNzRXZlbnRzID8gbnVsbCA6IFtdLAogICAgICBpLCBsOwoKICBm
        b3IoaSA9IDAsIGwgPSBub2Rlcy5sZW5ndGg7IGkgPCBsOyBpKyspIHsKICAg
        IG5vZGVzW2ldLmRpZENoYW5nZShldmVudHMpOwogIH0KCiAgaWYgKHN1cHBy
        ZXNzRXZlbnRzKSB7CiAgICByZXR1cm47CiAgfQoKICBmb3IgKGkgPSAwLCBs
        ID0gZXZlbnRzLmxlbmd0aDsgaSA8IGw7IGkgKz0gMikgewogICAgcHJvcGVy
        dHlEaWRDaGFuZ2UoZXZlbnRzW2ldLCBldmVudHNbaSsxXSk7CiAgfQp9CgpF
        bWJlci5vdmVycmlkZUNoYWlucyA9IGZ1bmN0aW9uKG9iaiwga2V5TmFtZSwg
        bSkgewogIGNoYWluc0RpZENoYW5nZShvYmosIGtleU5hbWUsIG0sIHRydWUp
        Owp9OwoKLyoqCiAgQG1ldGhvZCBiZWdpblByb3BlcnR5Q2hhbmdlcwogIEBj
        aGFpbmFibGUKICBAcHJpdmF0ZQoqLwpmdW5jdGlvbiBiZWdpblByb3BlcnR5
        Q2hhbmdlcygpIHsKICBkZWZlcnJlZCsrOwp9CgpFbWJlci5iZWdpblByb3Bl
        cnR5Q2hhbmdlcyA9IGJlZ2luUHJvcGVydHlDaGFuZ2VzOwoKLyoqCiAgQG1l
        dGhvZCBlbmRQcm9wZXJ0eUNoYW5nZXMKICBAcHJpdmF0ZQoqLwpmdW5jdGlv
        biBlbmRQcm9wZXJ0eUNoYW5nZXMoKSB7CiAgZGVmZXJyZWQtLTsKICBpZiAo
        ZGVmZXJyZWQ8PTApIHsKICAgIGJlZm9yZU9ic2VydmVyU2V0LmNsZWFyKCk7
        CiAgICBvYnNlcnZlclNldC5mbHVzaCgpOwogIH0KfQoKRW1iZXIuZW5kUHJv
        cGVydHlDaGFuZ2VzID0gZW5kUHJvcGVydHlDaGFuZ2VzOwoKLyoqCiAgTWFr
        ZSBhIHNlcmllcyBvZiBwcm9wZXJ0eSBjaGFuZ2VzIHRvZ2V0aGVyIGluIGFu
        CiAgZXhjZXB0aW9uLXNhZmUgd2F5LgoKICBgYGBqYXZhc2NyaXB0CiAgRW1i
        ZXIuY2hhbmdlUHJvcGVydGllcyhmdW5jdGlvbigpIHsKICAgIG9iajEuc2V0
        KCdmb28nLCBtYXlCbG93VXBXaGVuU2V0KTsKICAgIG9iajIuc2V0KCdiYXIn
        LCBiYXopOwogIH0pOwogIGBgYAoKICBAbWV0aG9kIGNoYW5nZVByb3BlcnRp
        ZXMKICBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjawogIEBwYXJhbSBbYmlu
        ZGluZ10KKi8KRW1iZXIuY2hhbmdlUHJvcGVydGllcyA9IGZ1bmN0aW9uKGNi
        LCBiaW5kaW5nKSB7CiAgYmVnaW5Qcm9wZXJ0eUNoYW5nZXMoKTsKICB0cnlG
        aW5hbGx5KGNiLCBlbmRQcm9wZXJ0eUNoYW5nZXMsIGJpbmRpbmcpOwp9OwoK
        ZnVuY3Rpb24gbm90aWZ5QmVmb3JlT2JzZXJ2ZXJzKG9iaiwga2V5TmFtZSkg
        ewogIGlmIChvYmouaXNEZXN0cm95aW5nKSB7IHJldHVybjsgfQoKICB2YXIg
        ZXZlbnROYW1lID0ga2V5TmFtZSArICc6YmVmb3JlJywgbGlzdGVuZXJzLCBk
        aWZmOwogIGlmIChkZWZlcnJlZCkgewogICAgbGlzdGVuZXJzID0gYmVmb3Jl
        T2JzZXJ2ZXJTZXQuYWRkKG9iaiwga2V5TmFtZSwgZXZlbnROYW1lKTsKICAg
        IGRpZmYgPSBsaXN0ZW5lcnNEaWZmKG9iaiwgZXZlbnROYW1lLCBsaXN0ZW5l
        cnMpOwogICAgc2VuZEV2ZW50KG9iaiwgZXZlbnROYW1lLCBbb2JqLCBrZXlO
        YW1lXSwgZGlmZik7CiAgfSBlbHNlIHsKICAgIHNlbmRFdmVudChvYmosIGV2
        ZW50TmFtZSwgW29iaiwga2V5TmFtZV0pOwogIH0KfQoKZnVuY3Rpb24gbm90
        aWZ5T2JzZXJ2ZXJzKG9iaiwga2V5TmFtZSkgewogIGlmIChvYmouaXNEZXN0
        cm95aW5nKSB7IHJldHVybjsgfQoKICB2YXIgZXZlbnROYW1lID0ga2V5TmFt
        ZSArICc6Y2hhbmdlJywgbGlzdGVuZXJzOwogIGlmIChkZWZlcnJlZCkgewog
        ICAgbGlzdGVuZXJzID0gb2JzZXJ2ZXJTZXQuYWRkKG9iaiwga2V5TmFtZSwg
        ZXZlbnROYW1lKTsKICAgIGxpc3RlbmVyc1VuaW9uKG9iaiwgZXZlbnROYW1l
        LCBsaXN0ZW5lcnMpOwogIH0gZWxzZSB7CiAgICBzZW5kRXZlbnQob2JqLCBl
        dmVudE5hbWUsIFtvYmosIGtleU5hbWVdKTsKICB9Cn0KCn0pKCk7CgoKCihm
        dW5jdGlvbigpIHsKLy8gTUVUQV9LRVkKLy8gX2dldFBhdGgKLy8gcHJvcGVy
        dHlXaWxsQ2hhbmdlLCBwcm9wZXJ0eURpZENoYW5nZQoKdmFyIE1FVEFfS0VZ
        ID0gRW1iZXIuTUVUQV9LRVksCiAgICBNQU5EQVRPUllfU0VUVEVSID0gRW1i
        ZXIuRU5WLk1BTkRBVE9SWV9TRVRURVIsCiAgICBJU19HTE9CQUwgPSAvXihb
        QS1aJF18KFswLTldW0EtWiRdKSkvLAogICAgZ2V0UGF0aCA9IEVtYmVyLl9n
        ZXRQYXRoOwoKLyoqCiAgU2V0cyB0aGUgdmFsdWUgb2YgYSBwcm9wZXJ0eSBv
        biBhbiBvYmplY3QsIHJlc3BlY3RpbmcgY29tcHV0ZWQgcHJvcGVydGllcwog
        IGFuZCBub3RpZnlpbmcgb2JzZXJ2ZXJzIGFuZCBvdGhlciBsaXN0ZW5lcnMg
        b2YgdGhlIGNoYW5nZS4gSWYgdGhlCiAgcHJvcGVydHkgaXMgbm90IGRlZmlu
        ZWQgYnV0IHRoZSBvYmplY3QgaW1wbGVtZW50cyB0aGUgYHNldFVua25vd25Q
        cm9wZXJ0eWAKICBtZXRob2QgdGhlbiB0aGF0IHdpbGwgYmUgaW52b2tlZCBh
        cyB3ZWxsLgoKICBAbWV0aG9kIHNldAogIEBmb3IgRW1iZXIKICBAcGFyYW0g
        e09iamVjdH0gb2JqIFRoZSBvYmplY3QgdG8gbW9kaWZ5LgogIEBwYXJhbSB7
        U3RyaW5nfSBrZXlOYW1lIFRoZSBwcm9wZXJ0eSBrZXkgdG8gc2V0CiAgQHBh
        cmFtIHtPYmplY3R9IHZhbHVlIFRoZSB2YWx1ZSB0byBzZXQKICBAcmV0dXJu
        IHtPYmplY3R9IHRoZSBwYXNzZWQgdmFsdWUuCiovCnZhciBzZXQgPSBmdW5j
        dGlvbiBzZXQob2JqLCBrZXlOYW1lLCB2YWx1ZSwgdG9sZXJhbnQpIHsKICBp
        ZiAodHlwZW9mIG9iaiA9PT0gJ3N0cmluZycpIHsKICAgIEVtYmVyLmFzc2Vy
        dCgiUGF0aCAnIiArIG9iaiArICInIG11c3QgYmUgZ2xvYmFsIGlmIG5vIG9i
        aiBpcyBnaXZlbi4iLCBJU19HTE9CQUwudGVzdChvYmopKTsKICAgIHZhbHVl
        ID0ga2V5TmFtZTsKICAgIGtleU5hbWUgPSBvYmo7CiAgICBvYmogPSBudWxs
        OwogIH0KCiAgRW1iZXIuYXNzZXJ0KCJDYW5ub3QgY2FsbCBzZXQgd2l0aCAi
        KyBrZXlOYW1lICsiIGtleS4iLCAhIWtleU5hbWUpOwoKICBpZiAoIW9iaiB8
        fCBrZXlOYW1lLmluZGV4T2YoJy4nKSAhPT0gLTEpIHsKICAgIHJldHVybiBz
        ZXRQYXRoKG9iaiwga2V5TmFtZSwgdmFsdWUsIHRvbGVyYW50KTsKICB9Cgog
        IEVtYmVyLmFzc2VydCgiWW91IG5lZWQgdG8gcHJvdmlkZSBhbiBvYmplY3Qg
        YW5kIGtleSB0byBgc2V0YC4iLCAhIW9iaiAmJiBrZXlOYW1lICE9PSB1bmRl
        ZmluZWQpOwogIEVtYmVyLmFzc2VydCgnY2FsbGluZyBzZXQgb24gZGVzdHJv
        eWVkIG9iamVjdCcsICFvYmouaXNEZXN0cm95ZWQpOwoKICB2YXIgbWV0YSA9
        IG9ialtNRVRBX0tFWV0sIGRlc2MgPSBtZXRhICYmIG1ldGEuZGVzY3Nba2V5
        TmFtZV0sCiAgICAgIGlzVW5rbm93biwgY3VycmVudFZhbHVlOwogIGlmIChk
        ZXNjKSB7CiAgICBkZXNjLnNldChvYmosIGtleU5hbWUsIHZhbHVlKTsKICB9
        IGVsc2UgewogICAgaXNVbmtub3duID0gJ29iamVjdCcgPT09IHR5cGVvZiBv
        YmogJiYgIShrZXlOYW1lIGluIG9iaik7CgogICAgLy8gc2V0VW5rbm93blBy
        b3BlcnR5IGlzIGNhbGxlZCBpZiBgb2JqYCBpcyBhbiBvYmplY3QsCiAgICAv
        LyB0aGUgcHJvcGVydHkgZG9lcyBub3QgYWxyZWFkeSBleGlzdCwgYW5kIHRo
        ZQogICAgLy8gYHNldFVua25vd25Qcm9wZXJ0eWAgbWV0aG9kIGV4aXN0cyBv
        biB0aGUgb2JqZWN0CiAgICBpZiAoaXNVbmtub3duICYmICdmdW5jdGlvbicg
        PT09IHR5cGVvZiBvYmouc2V0VW5rbm93blByb3BlcnR5KSB7CiAgICAgIG9i
        ai5zZXRVbmtub3duUHJvcGVydHkoa2V5TmFtZSwgdmFsdWUpOwogICAgfSBl
        bHNlIGlmIChtZXRhICYmIG1ldGEud2F0Y2hpbmdba2V5TmFtZV0gPiAwKSB7
        CiAgICAgIGlmIChNQU5EQVRPUllfU0VUVEVSKSB7CiAgICAgICAgY3VycmVu
        dFZhbHVlID0gbWV0YS52YWx1ZXNba2V5TmFtZV07CiAgICAgIH0gZWxzZSB7
        CiAgICAgICAgY3VycmVudFZhbHVlID0gb2JqW2tleU5hbWVdOwogICAgICB9
        CiAgICAgIC8vIG9ubHkgdHJpZ2dlciBhIGNoYW5nZSBpZiB0aGUgdmFsdWUg
        aGFzIGNoYW5nZWQKICAgICAgaWYgKHZhbHVlICE9PSBjdXJyZW50VmFsdWUp
        IHsKICAgICAgICBFbWJlci5wcm9wZXJ0eVdpbGxDaGFuZ2Uob2JqLCBrZXlO
        YW1lKTsKICAgICAgICBpZiAoTUFOREFUT1JZX1NFVFRFUikgewogICAgICAg
        ICAgaWYgKChjdXJyZW50VmFsdWUgPT09IHVuZGVmaW5lZCAmJiAhKGtleU5h
        bWUgaW4gb2JqKSkgfHwgIW9iai5wcm9wZXJ0eUlzRW51bWVyYWJsZShrZXlO
        YW1lKSkgewogICAgICAgICAgICBFbWJlci5kZWZpbmVQcm9wZXJ0eShvYmos
        IGtleU5hbWUsIG51bGwsIHZhbHVlKTsgLy8gc2V0dXAgbWFuZGF0b3J5IHNl
        dHRlcgogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgbWV0YS52YWx1
        ZXNba2V5TmFtZV0gPSB2YWx1ZTsKICAgICAgICAgIH0KICAgICAgICB9IGVs
        c2UgewogICAgICAgICAgb2JqW2tleU5hbWVdID0gdmFsdWU7CiAgICAgICAg
        fQogICAgICAgIEVtYmVyLnByb3BlcnR5RGlkQ2hhbmdlKG9iaiwga2V5TmFt
        ZSk7CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIG9ialtrZXlOYW1lXSA9
        IHZhbHVlOwogICAgfQogIH0KICByZXR1cm4gdmFsdWU7Cn07CgovLyBDdXJy
        ZW50bHkgdXNlZCBvbmx5IGJ5IEVtYmVyIERhdGEgdGVzdHMKaWYgKEVtYmVy
        LmNvbmZpZy5vdmVycmlkZUFjY2Vzc29ycykgewogIEVtYmVyLnNldCA9IHNl
        dDsKICBFbWJlci5jb25maWcub3ZlcnJpZGVBY2Nlc3NvcnMoKTsKICBzZXQg
        PSBFbWJlci5zZXQ7Cn0KCmZ1bmN0aW9uIHNldFBhdGgocm9vdCwgcGF0aCwg
        dmFsdWUsIHRvbGVyYW50KSB7CiAgdmFyIGtleU5hbWU7CgogIC8vIGdldCB0
        aGUgbGFzdCBwYXJ0IG9mIHRoZSBwYXRoCiAga2V5TmFtZSA9IHBhdGguc2xp
        Y2UocGF0aC5sYXN0SW5kZXhPZignLicpICsgMSk7CgogIC8vIGdldCB0aGUg
        Zmlyc3QgcGFydCBvZiB0aGUgcGFydAogIHBhdGggICAgPSAocGF0aCA9PT0g
        a2V5TmFtZSkgPyBrZXlOYW1lIDogcGF0aC5zbGljZSgwLCBwYXRoLmxlbmd0
        aC0oa2V5TmFtZS5sZW5ndGgrMSkpOwoKICAvLyB1bmxlc3MgdGhlIHBhdGgg
        aXMgdGhpcywgbG9vayB1cCB0aGUgZmlyc3QgcGFydCB0bwogIC8vIGdldCB0
        aGUgcm9vdAogIGlmIChwYXRoICE9PSAndGhpcycpIHsKICAgIHJvb3QgPSBn
        ZXRQYXRoKHJvb3QsIHBhdGgpOwogIH0KCiAgaWYgKCFrZXlOYW1lIHx8IGtl
        eU5hbWUubGVuZ3RoID09PSAwKSB7CiAgICB0aHJvdyBuZXcgRW1iZXIuRXJy
        b3IoJ1Byb3BlcnR5IHNldCBmYWlsZWQ6IFlvdSBwYXNzZWQgYW4gZW1wdHkg
        cGF0aCcpOwogIH0KCiAgaWYgKCFyb290KSB7CiAgICBpZiAodG9sZXJhbnQp
        IHsgcmV0dXJuOyB9CiAgICBlbHNlIHsgdGhyb3cgbmV3IEVtYmVyLkVycm9y
        KCdQcm9wZXJ0eSBzZXQgZmFpbGVkOiBvYmplY3QgaW4gcGF0aCAiJytwYXRo
        KyciIGNvdWxkIG5vdCBiZSBmb3VuZCBvciB3YXMgZGVzdHJveWVkLicpOyB9
        CiAgfQoKICByZXR1cm4gc2V0KHJvb3QsIGtleU5hbWUsIHZhbHVlKTsKfQoK
        RW1iZXIuc2V0ID0gc2V0OwoKLyoqCiAgRXJyb3ItdG9sZXJhbnQgZm9ybSBv
        ZiBgRW1iZXIuc2V0YC4gV2lsbCBub3QgYmxvdyB1cCBpZiBhbnkgcGFydCBv
        ZiB0aGUKICBjaGFpbiBpcyBgdW5kZWZpbmVkYCwgYG51bGxgLCBvciBkZXN0
        cm95ZWQuCgogIFRoaXMgaXMgcHJpbWFyaWx5IHVzZWQgd2hlbiBzeW5jaW5n
        IGJpbmRpbmdzLCB3aGljaCBtYXkgdHJ5IHRvIHVwZGF0ZSBhZnRlcgogIGFu
        IG9iamVjdCBoYXMgYmVlbiBkZXN0cm95ZWQuCgogIEBtZXRob2QgdHJ5U2V0
        CiAgQGZvciBFbWJlcgogIEBwYXJhbSB7T2JqZWN0fSBvYmogVGhlIG9iamVj
        dCB0byBtb2RpZnkuCiAgQHBhcmFtIHtTdHJpbmd9IHBhdGggVGhlIHByb3Bl
        cnR5IHBhdGggdG8gc2V0CiAgQHBhcmFtIHtPYmplY3R9IHZhbHVlIFRoZSB2
        YWx1ZSB0byBzZXQKKi8KRW1iZXIudHJ5U2V0ID0gZnVuY3Rpb24ocm9vdCwg
        cGF0aCwgdmFsdWUpIHsKICByZXR1cm4gc2V0KHJvb3QsIHBhdGgsIHZhbHVl
        LCB0cnVlKTsKfTsKCn0pKCk7CgoKCihmdW5jdGlvbigpIHsKLyoqCkBtb2R1
        bGUgZW1iZXItbWV0YWwKKi8KCi8qCiAgSmF2YVNjcmlwdCAoYmVmb3JlIEVT
        NikgZG9lcyBub3QgaGF2ZSBhIE1hcCBpbXBsZW1lbnRhdGlvbi4gT2JqZWN0
        cywKICB3aGljaCBhcmUgb2Z0ZW4gdXNlZCBhcyBkaWN0aW9uYXJpZXMsIG1h
        eSBvbmx5IGhhdmUgU3RyaW5ncyBhcyBrZXlzLgoKICBCZWNhdXNlIEVtYmVy
        IGhhcyBhIHdheSB0byBnZXQgYSB1bmlxdWUgaWRlbnRpZmllciBmb3IgZXZl
        cnkgb2JqZWN0CiAgdmlhIGBFbWJlci5ndWlkRm9yYCwgd2UgY2FuIGltcGxl
        bWVudCBhIHBlcmZvcm1hbnQgTWFwIHdpdGggYXJiaXRyYXJ5CiAga2V5cy4g
        QmVjYXVzZSBpdCBpcyBjb21tb25seSB1c2VkIGluIGxvdy1sZXZlbCBib29r
        a2VlcGluZywgTWFwIGlzCiAgaW1wbGVtZW50ZWQgYXMgYSBwdXJlIEphdmFT
        Y3JpcHQgb2JqZWN0IGZvciBwZXJmb3JtYW5jZS4KCiAgVGhpcyBpbXBsZW1l
        bnRhdGlvbiBmb2xsb3dzIHRoZSBjdXJyZW50IGl0ZXJhdGlvbiBvZiB0aGUg
        RVM2IHByb3Bvc2FsIGZvcgogIG1hcHMgKGh0dHA6Ly93aWtpLmVjbWFzY3Jp
        cHQub3JnL2Rva3UucGhwP2lkPWhhcm1vbnk6c2ltcGxlX21hcHNfYW5kX3Nl
        dHMpLAogIHdpdGggdHdvIGV4Y2VwdGlvbnMuIEZpcnN0LCBiZWNhdXNlIHdl
        IG5lZWQgb3VyIGltcGxlbWVudGF0aW9uIHRvIGJlIHBsZWFzYW50CiAgb24g
        b2xkZXIgYnJvd3NlcnMsIHdlIGRvIG5vdCB1c2UgdGhlIGBkZWxldGVgIG5h
        bWUgKHVzaW5nIGByZW1vdmVgIGluc3RlYWQpLgogIFNlY29uZCwgYXMgd2Ug
        ZG8gbm90IGhhdmUgdGhlIGx1eHVyeSBvZiBpbi1WTSBpdGVyYXRpb24sIHdl
        IGltcGxlbWVudCBhCiAgZm9yRWFjaCBtZXRob2QgZm9yIGl0ZXJhdGlvbi4K
        CiAgTWFwIGlzIG1vY2tlZCBvdXQgdG8gbG9vayBsaWtlIGFuIEVtYmVyIG9i
        amVjdCwgc28geW91IGNhbiBkbwogIGBFbWJlci5NYXAuY3JlYXRlKClgIGZv
        ciBzeW1tZXRyeSB3aXRoIG90aGVyIEVtYmVyIGNsYXNzZXMuCiovCnZhciBz
        ZXQgPSBFbWJlci5zZXQsCiAgICBndWlkRm9yID0gRW1iZXIuZ3VpZEZvciwK
        ICAgIGluZGV4T2YgPSBFbWJlci5BcnJheVBvbHlmaWxscy5pbmRleE9mOwoK
        dmFyIGNvcHkgPSBmdW5jdGlvbihvYmopIHsKICB2YXIgb3V0cHV0ID0ge307
        CgogIGZvciAodmFyIHByb3AgaW4gb2JqKSB7CiAgICBpZiAob2JqLmhhc093
        blByb3BlcnR5KHByb3ApKSB7IG91dHB1dFtwcm9wXSA9IG9ialtwcm9wXTsg
        fQogIH0KCiAgcmV0dXJuIG91dHB1dDsKfTsKCnZhciBjb3B5TWFwID0gZnVu
        Y3Rpb24ob3JpZ2luYWwsIG5ld09iamVjdCkgewogIHZhciBrZXlzID0gb3Jp
        Z2luYWwua2V5cy5jb3B5KCksCiAgICAgIHZhbHVlcyA9IGNvcHkob3JpZ2lu
        YWwudmFsdWVzKTsKCiAgbmV3T2JqZWN0LmtleXMgPSBrZXlzOwogIG5ld09i
        amVjdC52YWx1ZXMgPSB2YWx1ZXM7CiAgbmV3T2JqZWN0Lmxlbmd0aCA9IG9y
        aWdpbmFsLmxlbmd0aDsKCiAgcmV0dXJuIG5ld09iamVjdDsKfTsKCi8qKgog
        IFRoaXMgY2xhc3MgaXMgdXNlZCBpbnRlcm5hbGx5IGJ5IEVtYmVyIGFuZCBF
        bWJlciBEYXRhLgogIFBsZWFzZSBkbyBub3QgdXNlIGl0IGF0IHRoaXMgdGlt
        ZS4gV2UgcGxhbiB0byBjbGVhbiBpdCB1cAogIGFuZCBhZGQgbWFueSB0ZXN0
        cyBzb29uLgoKICBAY2xhc3MgT3JkZXJlZFNldAogIEBuYW1lc3BhY2UgRW1i
        ZXIKICBAY29uc3RydWN0b3IKICBAcHJpdmF0ZQoqLwp2YXIgT3JkZXJlZFNl
        dCA9IEVtYmVyLk9yZGVyZWRTZXQgPSBmdW5jdGlvbigpIHsKICB0aGlzLmNs
        ZWFyKCk7Cn07CgovKioKICBAbWV0aG9kIGNyZWF0ZQogIEBzdGF0aWMKICBA
        cmV0dXJuIHtFbWJlci5PcmRlcmVkU2V0fQoqLwpPcmRlcmVkU2V0LmNyZWF0
        ZSA9IGZ1bmN0aW9uKCkgewogIHJldHVybiBuZXcgT3JkZXJlZFNldCgpOwp9
        OwoKCk9yZGVyZWRTZXQucHJvdG90eXBlID0gewogIC8qKgogICAgQG1ldGhv
        ZCBjbGVhcgogICovCiAgY2xlYXI6IGZ1bmN0aW9uKCkgewogICAgdGhpcy5w
        cmVzZW5jZVNldCA9IHt9OwogICAgdGhpcy5saXN0ID0gW107CiAgfSwKCiAg
        LyoqCiAgICBAbWV0aG9kIGFkZAogICAgQHBhcmFtIG9iagogICovCiAgYWRk
        OiBmdW5jdGlvbihvYmopIHsKICAgIHZhciBndWlkID0gZ3VpZEZvcihvYmop
        LAogICAgICAgIHByZXNlbmNlU2V0ID0gdGhpcy5wcmVzZW5jZVNldCwKICAg
        ICAgICBsaXN0ID0gdGhpcy5saXN0OwoKICAgIGlmIChndWlkIGluIHByZXNl
        bmNlU2V0KSB7IHJldHVybjsgfQoKICAgIHByZXNlbmNlU2V0W2d1aWRdID0g
        dHJ1ZTsKICAgIGxpc3QucHVzaChvYmopOwogIH0sCgogIC8qKgogICAgQG1l
        dGhvZCByZW1vdmUKICAgIEBwYXJhbSBvYmoKICAqLwogIHJlbW92ZTogZnVu
        Y3Rpb24ob2JqKSB7CiAgICB2YXIgZ3VpZCA9IGd1aWRGb3Iob2JqKSwKICAg
        ICAgICBwcmVzZW5jZVNldCA9IHRoaXMucHJlc2VuY2VTZXQsCiAgICAgICAg
        bGlzdCA9IHRoaXMubGlzdDsKCiAgICBkZWxldGUgcHJlc2VuY2VTZXRbZ3Vp
        ZF07CgogICAgdmFyIGluZGV4ID0gaW5kZXhPZi5jYWxsKGxpc3QsIG9iaik7
        CiAgICBpZiAoaW5kZXggPiAtMSkgewogICAgICBsaXN0LnNwbGljZShpbmRl
        eCwgMSk7CiAgICB9CiAgfSwKCiAgLyoqCiAgICBAbWV0aG9kIGlzRW1wdHkK
        ICAgIEByZXR1cm4ge0Jvb2xlYW59CiAgKi8KICBpc0VtcHR5OiBmdW5jdGlv
        bigpIHsKICAgIHJldHVybiB0aGlzLmxpc3QubGVuZ3RoID09PSAwOwogIH0s
        CgogIC8qKgogICAgQG1ldGhvZCBoYXMKICAgIEBwYXJhbSBvYmoKICAgIEBy
        ZXR1cm4ge0Jvb2xlYW59CiAgKi8KICBoYXM6IGZ1bmN0aW9uKG9iaikgewog
        ICAgdmFyIGd1aWQgPSBndWlkRm9yKG9iaiksCiAgICAgICAgcHJlc2VuY2VT
        ZXQgPSB0aGlzLnByZXNlbmNlU2V0OwoKICAgIHJldHVybiBndWlkIGluIHBy
        ZXNlbmNlU2V0OwogIH0sCgogIC8qKgogICAgQG1ldGhvZCBmb3JFYWNoCiAg
        ICBAcGFyYW0ge0Z1bmN0aW9ufSBmbgogICAgQHBhcmFtIHNlbGYKICAqLwog
        IGZvckVhY2g6IGZ1bmN0aW9uKGZuLCBzZWxmKSB7CiAgICAvLyBhbGxvdyBt
        dXRhdGlvbiBkdXJpbmcgaXRlcmF0aW9uCiAgICB2YXIgbGlzdCA9IHRoaXMu
        dG9BcnJheSgpOwoKICAgIGZvciAodmFyIGkgPSAwLCBqID0gbGlzdC5sZW5n
        dGg7IGkgPCBqOyBpKyspIHsKICAgICAgZm4uY2FsbChzZWxmLCBsaXN0W2ld
        KTsKICAgIH0KICB9LAoKICAvKioKICAgIEBtZXRob2QgdG9BcnJheQogICAg
        QHJldHVybiB7QXJyYXl9CiAgKi8KICB0b0FycmF5OiBmdW5jdGlvbigpIHsK
        ICAgIHJldHVybiB0aGlzLmxpc3Quc2xpY2UoKTsKICB9LAoKICAvKioKICAg
        IEBtZXRob2QgY29weQogICAgQHJldHVybiB7RW1iZXIuT3JkZXJlZFNldH0K
        ICAqLwogIGNvcHk6IGZ1bmN0aW9uKCkgewogICAgdmFyIHNldCA9IG5ldyBP
        cmRlcmVkU2V0KCk7CgogICAgc2V0LnByZXNlbmNlU2V0ID0gY29weSh0aGlz
        LnByZXNlbmNlU2V0KTsKICAgIHNldC5saXN0ID0gdGhpcy50b0FycmF5KCk7
        CgogICAgcmV0dXJuIHNldDsKICB9Cn07CgovKioKICBBIE1hcCBzdG9yZXMg
        dmFsdWVzIGluZGV4ZWQgYnkga2V5cy4gVW5saWtlIEphdmFTY3JpcHQncwog
        IGRlZmF1bHQgT2JqZWN0cywgdGhlIGtleXMgb2YgYSBNYXAgY2FuIGJlIGFu
        eSBKYXZhU2NyaXB0CiAgb2JqZWN0LgoKICBJbnRlcm5hbGx5LCBhIE1hcCBo
        YXMgdHdvIGRhdGEgc3RydWN0dXJlczoKCiAgMS4gYGtleXNgOiBhbiBPcmRl
        cmVkU2V0IG9mIGFsbCBvZiB0aGUgZXhpc3Rpbmcga2V5cwogIDIuIGB2YWx1
        ZXNgOiBhIEphdmFTY3JpcHQgT2JqZWN0IGluZGV4ZWQgYnkgdGhlIGBFbWJl
        ci5ndWlkRm9yKGtleSlgCgogIFdoZW4gYSBrZXkvdmFsdWUgcGFpciBpcyBh
        ZGRlZCBmb3IgdGhlIGZpcnN0IHRpbWUsIHdlCiAgYWRkIHRoZSBrZXkgdG8g
        dGhlIGBrZXlzYCBPcmRlcmVkU2V0LCBhbmQgY3JlYXRlIG9yCiAgcmVwbGFj
        ZSBhbiBlbnRyeSBpbiBgdmFsdWVzYC4gV2hlbiBhbiBlbnRyeSBpcyBkZWxl
        dGVkLAogIHdlIGRlbGV0ZSBpdHMgZW50cnkgaW4gYGtleXNgIGFuZCBgdmFs
        dWVzYC4KCiAgQGNsYXNzIE1hcAogIEBuYW1lc3BhY2UgRW1iZXIKICBAcHJp
        dmF0ZQogIEBjb25zdHJ1Y3RvcgoqLwp2YXIgTWFwID0gRW1iZXIuTWFwID0g
        ZnVuY3Rpb24oKSB7CiAgdGhpcy5rZXlzID0gRW1iZXIuT3JkZXJlZFNldC5j
        cmVhdGUoKTsKICB0aGlzLnZhbHVlcyA9IHt9Owp9OwoKLyoqCiAgQG1ldGhv
        ZCBjcmVhdGUKICBAc3RhdGljCiovCk1hcC5jcmVhdGUgPSBmdW5jdGlvbigp
        IHsKICByZXR1cm4gbmV3IE1hcCgpOwp9OwoKTWFwLnByb3RvdHlwZSA9IHsK
        ICAvKioKICAgIFRoaXMgcHJvcGVydHkgd2lsbCBjaGFuZ2UgYXMgdGhlIG51
        bWJlciBvZiBvYmplY3RzIGluIHRoZSBtYXAgY2hhbmdlcy4KICAgCiAgICBA
        cHJvcGVydHkgbGVuZ3RoCiAgICBAdHlwZSBudW1iZXIKICAgIEBkZWZhdWx0
        IDAKICAqLwogIGxlbmd0aDogMCwKICAgIAogICAgCiAgLyoqCiAgICBSZXRy
        aWV2ZSB0aGUgdmFsdWUgYXNzb2NpYXRlZCB3aXRoIGEgZ2l2ZW4ga2V5LgoK
        ICAgIEBtZXRob2QgZ2V0CiAgICBAcGFyYW0geyp9IGtleQogICAgQHJldHVy
        biB7Kn0gdGhlIHZhbHVlIGFzc29jaWF0ZWQgd2l0aCB0aGUga2V5LCBvciBg
        dW5kZWZpbmVkYAogICovCiAgZ2V0OiBmdW5jdGlvbihrZXkpIHsKICAgIHZh
        ciB2YWx1ZXMgPSB0aGlzLnZhbHVlcywKICAgICAgICBndWlkID0gZ3VpZEZv
        cihrZXkpOwoKICAgIHJldHVybiB2YWx1ZXNbZ3VpZF07CiAgfSwKCiAgLyoq
        CiAgICBBZGRzIGEgdmFsdWUgdG8gdGhlIG1hcC4gSWYgYSB2YWx1ZSBmb3Ig
        dGhlIGdpdmVuIGtleSBoYXMgYWxyZWFkeSBiZWVuCiAgICBwcm92aWRlZCwg
        dGhlIG5ldyB2YWx1ZSB3aWxsIHJlcGxhY2UgdGhlIG9sZCB2YWx1ZS4KCiAg
        ICBAbWV0aG9kIHNldAogICAgQHBhcmFtIHsqfSBrZXkKICAgIEBwYXJhbSB7
        Kn0gdmFsdWUKICAqLwogIHNldDogZnVuY3Rpb24oa2V5LCB2YWx1ZSkgewog
        ICAgdmFyIGtleXMgPSB0aGlzLmtleXMsCiAgICAgICAgdmFsdWVzID0gdGhp
        cy52YWx1ZXMsCiAgICAgICAgZ3VpZCA9IGd1aWRGb3Ioa2V5KTsKCiAgICBr
        ZXlzLmFkZChrZXkpOwogICAgdmFsdWVzW2d1aWRdID0gdmFsdWU7CiAgICBz
        ZXQodGhpcywgJ2xlbmd0aCcsIGtleXMubGlzdC5sZW5ndGgpOwogIH0sCgog
        IC8qKgogICAgUmVtb3ZlcyBhIHZhbHVlIGZyb20gdGhlIG1hcCBmb3IgYW4g
        YXNzb2NpYXRlZCBrZXkuCgogICAgQG1ldGhvZCByZW1vdmUKICAgIEBwYXJh
        bSB7Kn0ga2V5CiAgICBAcmV0dXJuIHtCb29sZWFufSB0cnVlIGlmIGFuIGl0
        ZW0gd2FzIHJlbW92ZWQsIGZhbHNlIG90aGVyd2lzZQogICovCiAgcmVtb3Zl
        OiBmdW5jdGlvbihrZXkpIHsKICAgIC8vIGRvbid0IHVzZSBFUzYgImRlbGV0
        ZSIgYmVjYXVzZSBpdCB3aWxsIGJlIGFubm95aW5nCiAgICAvLyB0byB1c2Ug
        aW4gYnJvd3NlcnMgdGhhdCBhcmUgbm90IEVTNiBmcmllbmRseTsKICAgIHZh
        ciBrZXlzID0gdGhpcy5rZXlzLAogICAgICAgIHZhbHVlcyA9IHRoaXMudmFs
        dWVzLAogICAgICAgIGd1aWQgPSBndWlkRm9yKGtleSk7CgogICAgaWYgKHZh
        bHVlcy5oYXNPd25Qcm9wZXJ0eShndWlkKSkgewogICAgICBrZXlzLnJlbW92
        ZShrZXkpOwogICAgICBkZWxldGUgdmFsdWVzW2d1aWRdOwogICAgICBzZXQo
        dGhpcywgJ2xlbmd0aCcsIGtleXMubGlzdC5sZW5ndGgpOwogICAgICByZXR1
        cm4gdHJ1ZTsKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiBmYWxzZTsKICAg
        IH0KICB9LAoKICAvKioKICAgIENoZWNrIHdoZXRoZXIgYSBrZXkgaXMgcHJl
        c2VudC4KCiAgICBAbWV0aG9kIGhhcwogICAgQHBhcmFtIHsqfSBrZXkKICAg
        IEByZXR1cm4ge0Jvb2xlYW59IHRydWUgaWYgdGhlIGl0ZW0gd2FzIHByZXNl
        bnQsIGZhbHNlIG90aGVyd2lzZQogICovCiAgaGFzOiBmdW5jdGlvbihrZXkp
        IHsKICAgIHZhciB2YWx1ZXMgPSB0aGlzLnZhbHVlcywKICAgICAgICBndWlk
        ID0gZ3VpZEZvcihrZXkpOwoKICAgIHJldHVybiB2YWx1ZXMuaGFzT3duUHJv
        cGVydHkoZ3VpZCk7CiAgfSwKCiAgLyoqCiAgICBJdGVyYXRlIG92ZXIgYWxs
        IHRoZSBrZXlzIGFuZCB2YWx1ZXMuIENhbGxzIHRoZSBmdW5jdGlvbiBvbmNl
        CiAgICBmb3IgZWFjaCBrZXksIHBhc3NpbmcgaW4gdGhlIGtleSBhbmQgdmFs
        dWUsIGluIHRoYXQgb3JkZXIuCgogICAgVGhlIGtleXMgYXJlIGd1YXJhbnRl
        ZWQgdG8gYmUgaXRlcmF0ZWQgb3ZlciBpbiBpbnNlcnRpb24gb3JkZXIuCgog
        ICAgQG1ldGhvZCBmb3JFYWNoCiAgICBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxs
        YmFjawogICAgQHBhcmFtIHsqfSBzZWxmIGlmIHBhc3NlZCwgdGhlIGB0aGlz
        YCB2YWx1ZSBpbnNpZGUgdGhlCiAgICAgIGNhbGxiYWNrLiBCeSBkZWZhdWx0
        LCBgdGhpc2AgaXMgdGhlIG1hcC4KICAqLwogIGZvckVhY2g6IGZ1bmN0aW9u
        KGNhbGxiYWNrLCBzZWxmKSB7CiAgICB2YXIga2V5cyA9IHRoaXMua2V5cywK
        ICAgICAgICB2YWx1ZXMgPSB0aGlzLnZhbHVlczsKCiAgICBrZXlzLmZvckVh
        Y2goZnVuY3Rpb24oa2V5KSB7CiAgICAgIHZhciBndWlkID0gZ3VpZEZvcihr
        ZXkpOwogICAgICBjYWxsYmFjay5jYWxsKHNlbGYsIGtleSwgdmFsdWVzW2d1
        aWRdKTsKICAgIH0pOwogIH0sCgogIC8qKgogICAgQG1ldGhvZCBjb3B5CiAg
        ICBAcmV0dXJuIHtFbWJlci5NYXB9CiAgKi8KICBjb3B5OiBmdW5jdGlvbigp
        IHsKICAgIHJldHVybiBjb3B5TWFwKHRoaXMsIG5ldyBNYXAoKSk7CiAgfQp9
        OwoKLyoqCiAgQGNsYXNzIE1hcFdpdGhEZWZhdWx0CiAgQG5hbWVzcGFjZSBF
        bWJlcgogIEBleHRlbmRzIEVtYmVyLk1hcAogIEBwcml2YXRlCiAgQGNvbnN0
        cnVjdG9yCiAgQHBhcmFtIFtvcHRpb25zXQogICAgQHBhcmFtIHsqfSBbb3B0
        aW9ucy5kZWZhdWx0VmFsdWVdCiovCnZhciBNYXBXaXRoRGVmYXVsdCA9IEVt
        YmVyLk1hcFdpdGhEZWZhdWx0ID0gZnVuY3Rpb24ob3B0aW9ucykgewogIE1h
        cC5jYWxsKHRoaXMpOwogIHRoaXMuZGVmYXVsdFZhbHVlID0gb3B0aW9ucy5k
        ZWZhdWx0VmFsdWU7Cn07CgovKioKICBAbWV0aG9kIGNyZWF0ZQogIEBzdGF0
        aWMKICBAcGFyYW0gW29wdGlvbnNdCiAgICBAcGFyYW0geyp9IFtvcHRpb25z
        LmRlZmF1bHRWYWx1ZV0KICBAcmV0dXJuIHtFbWJlci5NYXBXaXRoRGVmYXVs
        dHxFbWJlci5NYXB9IElmIG9wdGlvbnMgYXJlIHBhc3NlZCwgcmV0dXJucwog
        ICAgYEVtYmVyLk1hcFdpdGhEZWZhdWx0YCBvdGhlcndpc2UgcmV0dXJucyBg
        RW1iZXIuTWFwYAoqLwpNYXBXaXRoRGVmYXVsdC5jcmVhdGUgPSBmdW5jdGlv
        bihvcHRpb25zKSB7CiAgaWYgKG9wdGlvbnMpIHsKICAgIHJldHVybiBuZXcg
        TWFwV2l0aERlZmF1bHQob3B0aW9ucyk7CiAgfSBlbHNlIHsKICAgIHJldHVy
        biBuZXcgTWFwKCk7CiAgfQp9OwoKTWFwV2l0aERlZmF1bHQucHJvdG90eXBl
        ID0gRW1iZXIuY3JlYXRlKE1hcC5wcm90b3R5cGUpOwoKLyoqCiAgUmV0cmll
        dmUgdGhlIHZhbHVlIGFzc29jaWF0ZWQgd2l0aCBhIGdpdmVuIGtleS4KCiAg
        QG1ldGhvZCBnZXQKICBAcGFyYW0geyp9IGtleQogIEByZXR1cm4geyp9IHRo
        ZSB2YWx1ZSBhc3NvY2lhdGVkIHdpdGggdGhlIGtleSwgb3IgdGhlIGRlZmF1
        bHQgdmFsdWUKKi8KTWFwV2l0aERlZmF1bHQucHJvdG90eXBlLmdldCA9IGZ1
        bmN0aW9uKGtleSkgewogIHZhciBoYXNWYWx1ZSA9IHRoaXMuaGFzKGtleSk7
        CgogIGlmIChoYXNWYWx1ZSkgewogICAgcmV0dXJuIE1hcC5wcm90b3R5cGUu
        Z2V0LmNhbGwodGhpcywga2V5KTsKICB9IGVsc2UgewogICAgdmFyIGRlZmF1
        bHRWYWx1ZSA9IHRoaXMuZGVmYXVsdFZhbHVlKGtleSk7CiAgICB0aGlzLnNl
        dChrZXksIGRlZmF1bHRWYWx1ZSk7CiAgICByZXR1cm4gZGVmYXVsdFZhbHVl
        OwogIH0KfTsKCi8qKgogIEBtZXRob2QgY29weQogIEByZXR1cm4ge0VtYmVy
        Lk1hcFdpdGhEZWZhdWx0fQoqLwpNYXBXaXRoRGVmYXVsdC5wcm90b3R5cGUu
        Y29weSA9IGZ1bmN0aW9uKCkgewogIHJldHVybiBjb3B5TWFwKHRoaXMsIG5l
        dyBNYXBXaXRoRGVmYXVsdCh7CiAgICBkZWZhdWx0VmFsdWU6IHRoaXMuZGVm
        YXVsdFZhbHVlCiAgfSkpOwp9OwoKfSkoKTsKCgoKKGZ1bmN0aW9uKCkgewpm
        dW5jdGlvbiBjb25zb2xlTWV0aG9kKG5hbWUpIHsKICB2YXIgY29uc29sZU9i
        aiwgbG9nVG9Db25zb2xlOwogIGlmIChFbWJlci5pbXBvcnRzLmNvbnNvbGUp
        IHsKICAgIGNvbnNvbGVPYmogPSBFbWJlci5pbXBvcnRzLmNvbnNvbGU7CiAg
        fSBlbHNlIGlmICh0eXBlb2YgY29uc29sZSAhPT0gJ3VuZGVmaW5lZCcpIHsK
        ICAgIGNvbnNvbGVPYmogPSBjb25zb2xlOwogIH0KCiAgdmFyIG1ldGhvZCA9
        IHR5cGVvZiBjb25zb2xlT2JqID09PSAnb2JqZWN0JyA/IGNvbnNvbGVPYmpb
        bmFtZV0gOiBudWxsOwoKICBpZiAobWV0aG9kKSB7CiAgICAvLyBPbGRlciBJ
        RSBkb2Vzbid0IHN1cHBvcnQgYXBwbHksIGJ1dCBDaHJvbWUgbmVlZHMgaXQK
        ICAgIGlmICh0eXBlb2YgbWV0aG9kLmFwcGx5ID09PSAnZnVuY3Rpb24nKSB7
        CiAgICAgIGxvZ1RvQ29uc29sZSA9IGZ1bmN0aW9uKCkgewogICAgICAgIG1l
        dGhvZC5hcHBseShjb25zb2xlT2JqLCBhcmd1bWVudHMpOwogICAgICB9Owog
        ICAgICBsb2dUb0NvbnNvbGUuZGlzcGxheU5hbWUgPSAnY29uc29sZS4nICsg
        bmFtZTsKICAgICAgcmV0dXJuIGxvZ1RvQ29uc29sZTsKICAgIH0gZWxzZSB7
        CiAgICAgIHJldHVybiBmdW5jdGlvbigpIHsKICAgICAgICB2YXIgbWVzc2Fn
        ZSA9IEFycmF5LnByb3RvdHlwZS5qb2luLmNhbGwoYXJndW1lbnRzLCAnLCAn
        KTsKICAgICAgICBtZXRob2QobWVzc2FnZSk7CiAgICAgIH07CiAgICB9CiAg
        fQp9CgpmdW5jdGlvbiBhc3NlcnRQb2x5ZmlsbCh0ZXN0LCBtZXNzYWdlKSB7
        CiAgaWYgKCF0ZXN0KSB7CiAgICB0cnkgewogICAgICAvLyBhdHRlbXB0IHRv
        IHByZXNlcnZlIHRoZSBzdGFjawogICAgICB0aHJvdyBuZXcgRW1iZXIuRXJy
        b3IoImFzc2VydGlvbiBmYWlsZWQ6ICIgKyBtZXNzYWdlKTsKICAgIH0gY2F0
        Y2goZXJyb3IpIHsKICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAg
        ICAgICB0aHJvdyBlcnJvcjsKICAgICAgfSwgMCk7CiAgICB9CiAgfQp9Cgov
        KioKICBJbnNpZGUgRW1iZXItTWV0YWwsIHNpbXBseSB1c2VzIHRoZSBtZXRo
        b2RzIGZyb20gYGltcG9ydHMuY29uc29sZWAuCiAgT3ZlcnJpZGUgdGhpcyB0
        byBwcm92aWRlIG1vcmUgcm9idXN0IGxvZ2dpbmcgZnVuY3Rpb25hbGl0eS4K
        CiAgQGNsYXNzIExvZ2dlcgogIEBuYW1lc3BhY2UgRW1iZXIKKi8KRW1iZXIu
        TG9nZ2VyID0gewogIC8qKgogICBMb2dzIHRoZSBhcmd1bWVudHMgdG8gdGhl
        IGNvbnNvbGUuCiAgIFlvdSBjYW4gcGFzcyBhcyBtYW55IGFyZ3VtZW50cyBh
        cyB5b3Ugd2FudCBhbmQgdGhleSB3aWxsIGJlIGpvaW5lZCB0b2dldGhlciB3
        aXRoIGEgc3BhY2UuCgogICAgYGBgamF2YXNjcmlwdAogICAgdmFyIGZvbyA9
        IDE7CiAgICBFbWJlci5Mb2dnZXIubG9nKCdsb2cgdmFsdWUgb2YgZm9vOics
        IGZvbyk7IC8vICJsb2cgdmFsdWUgb2YgZm9vOiAxIiB3aWxsIGJlIHByaW50
        ZWQgdG8gdGhlIGNvbnNvbGUKICAgIGBgYAoKICAgQG1ldGhvZCBsb2cKICAg
        QGZvciBFbWJlci5Mb2dnZXIKICAgQHBhcmFtIHsqfSBhcmd1bWVudHMKICAq
        LwogIGxvZzogICBjb25zb2xlTWV0aG9kKCdsb2cnKSAgIHx8IEVtYmVyLkss
        CgogIC8qKgogICBQcmludHMgdGhlIGFyZ3VtZW50cyB0byB0aGUgY29uc29s
        ZSB3aXRoIGEgd2FybmluZyBpY29uLgogICBZb3UgY2FuIHBhc3MgYXMgbWFu
        eSBhcmd1bWVudHMgYXMgeW91IHdhbnQgYW5kIHRoZXkgd2lsbCBiZSBqb2lu
        ZWQgdG9nZXRoZXIgd2l0aCBhIHNwYWNlLgoKICAgIGBgYGphdmFzY3JpcHQK
        ICAgIEVtYmVyLkxvZ2dlci53YXJuKCdTb21ldGhpbmcgaGFwcGVuZWQhJyk7
        IC8vICJTb21ldGhpbmcgaGFwcGVuZWQhIiB3aWxsIGJlIHByaW50ZWQgdG8g
        dGhlIGNvbnNvbGUgd2l0aCBhIHdhcm5pbmcgaWNvbi4KICAgIGBgYAoKICAg
        QG1ldGhvZCB3YXJuCiAgIEBmb3IgRW1iZXIuTG9nZ2VyCiAgIEBwYXJhbSB7
        Kn0gYXJndW1lbnRzCiAgKi8KICB3YXJuOiAgY29uc29sZU1ldGhvZCgnd2Fy
        bicpICB8fCBFbWJlci5LLAoKICAvKioKICAgUHJpbnRzIHRoZSBhcmd1bWVu
        dHMgdG8gdGhlIGNvbnNvbGUgd2l0aCBhbiBlcnJvciBpY29uLCByZWQgdGV4
        dCBhbmQgYSBzdGFjayB0cmFjZS4KICAgWW91IGNhbiBwYXNzIGFzIG1hbnkg
        YXJndW1lbnRzIGFzIHlvdSB3YW50IGFuZCB0aGV5IHdpbGwgYmUgam9pbmVk
        IHRvZ2V0aGVyIHdpdGggYSBzcGFjZS4KCiAgICBgYGBqYXZhc2NyaXB0CiAg
        ICBFbWJlci5Mb2dnZXIuZXJyb3IoJ0RhbmdlciEgRGFuZ2VyIScpOyAvLyAi
        RGFuZ2VyISBEYW5nZXIhIiB3aWxsIGJlIHByaW50ZWQgdG8gdGhlIGNvbnNv
        bGUgaW4gcmVkIHRleHQuCiAgICBgYGAKCiAgIEBtZXRob2QgZXJyb3IKICAg
        QGZvciBFbWJlci5Mb2dnZXIKICAgQHBhcmFtIHsqfSBhcmd1bWVudHMKICAq
        LwogIGVycm9yOiBjb25zb2xlTWV0aG9kKCdlcnJvcicpIHx8IEVtYmVyLkss
        CgogIC8qKgogICBMb2dzIHRoZSBhcmd1bWVudHMgdG8gdGhlIGNvbnNvbGUu
        CiAgIFlvdSBjYW4gcGFzcyBhcyBtYW55IGFyZ3VtZW50cyBhcyB5b3Ugd2Fu
        dCBhbmQgdGhleSB3aWxsIGJlIGpvaW5lZCB0b2dldGhlciB3aXRoIGEgc3Bh
        Y2UuCgogICAgYGBgamF2YXNjcmlwdAogICAgdmFyIGZvbyA9IDE7CiAgICBF
        bWJlci5Mb2dnZXIuaW5mbygnbG9nIHZhbHVlIG9mIGZvbzonLCBmb28pOyAv
        LyAibG9nIHZhbHVlIG9mIGZvbzogMSIgd2lsbCBiZSBwcmludGVkIHRvIHRo
        ZSBjb25zb2xlCiAgICBgYGAKCiAgIEBtZXRob2QgaW5mbwogICBAZm9yIEVt
        YmVyLkxvZ2dlcgogICBAcGFyYW0geyp9IGFyZ3VtZW50cwogICovCiAgaW5m
        bzogIGNvbnNvbGVNZXRob2QoJ2luZm8nKSAgfHwgRW1iZXIuSywKCiAgLyoq
        CiAgIExvZ3MgdGhlIGFyZ3VtZW50cyB0byB0aGUgY29uc29sZSBpbiBibHVl
        IHRleHQuCiAgIFlvdSBjYW4gcGFzcyBhcyBtYW55IGFyZ3VtZW50cyBhcyB5
        b3Ugd2FudCBhbmQgdGhleSB3aWxsIGJlIGpvaW5lZCB0b2dldGhlciB3aXRo
        IGEgc3BhY2UuCgogICAgYGBgamF2YXNjcmlwdAogICAgdmFyIGZvbyA9IDE7
        CiAgICBFbWJlci5Mb2dnZXIuZGVidWcoJ2xvZyB2YWx1ZSBvZiBmb286Jywg
        Zm9vKTsgLy8gImxvZyB2YWx1ZSBvZiBmb286IDEiIHdpbGwgYmUgcHJpbnRl
        ZCB0byB0aGUgY29uc29sZQogICAgYGBgCgogICBAbWV0aG9kIGRlYnVnCiAg
        IEBmb3IgRW1iZXIuTG9nZ2VyCiAgIEBwYXJhbSB7Kn0gYXJndW1lbnRzCiAg
        Ki8KICBkZWJ1ZzogY29uc29sZU1ldGhvZCgnZGVidWcnKSB8fCBjb25zb2xl
        TWV0aG9kKCdpbmZvJykgfHwgRW1iZXIuSywKCiAgLyoqCiAgIElmIHRoZSB2
        YWx1ZSBwYXNzZWQgaW50byBgRW1iZXIuTG9nZ2VyLmFzc2VydGAgaXMgbm90
        IHRydXRoeSBpdCB3aWxsIHRocm93IGFuIGVycm9yIHdpdGggYSBzdGFjayB0
        cmFjZS4KCiAgICBgYGBqYXZhc2NyaXB0CiAgICBFbWJlci5Mb2dnZXIuYXNz
        ZXJ0KHRydWUpOyAvLyB1bmRlZmluZWQKICAgIEVtYmVyLkxvZ2dlci5hc3Nl
        cnQodHJ1ZSA9PT0gZmFsc2UpOyAvLyBUaHJvd3MgYW4gQXNzZXJ0aW9uIGZh
        aWxlZCBlcnJvci4KICAgIGBgYAoKICAgQG1ldGhvZCBhc3NlcnQKICAgQGZv
        ciBFbWJlci5Mb2dnZXIKICAgQHBhcmFtIHtCb29sZWFufSBib29sIFZhbHVl
        IHRvIHRlc3QKICAqLwogIGFzc2VydDogY29uc29sZU1ldGhvZCgnYXNzZXJ0
        JykgfHwgYXNzZXJ0UG9seWZpbGwKfTsKCgp9KSgpOwoKCgooZnVuY3Rpb24o
        KSB7Ci8qKgpAbW9kdWxlIGVtYmVyLW1ldGFsCiovCgp2YXIgTUVUQV9LRVkg
        PSBFbWJlci5NRVRBX0tFWSwKICAgIG1ldGFGb3IgPSBFbWJlci5tZXRhLAog
        ICAgb2JqZWN0RGVmaW5lUHJvcGVydHkgPSBFbWJlci5wbGF0Zm9ybS5kZWZp
        bmVQcm9wZXJ0eTsKCnZhciBNQU5EQVRPUllfU0VUVEVSID0gRW1iZXIuRU5W
        Lk1BTkRBVE9SWV9TRVRURVI7CgovLyAuLi4uLi4uLi4uLi4uLi4uLi4uLi4u
        Li4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uCi8vIERFU0NS
        SVBUT1IKLy8KCi8qKgogIE9iamVjdHMgb2YgdGhpcyB0eXBlIGNhbiBpbXBs
        ZW1lbnQgYW4gaW50ZXJmYWNlIHRvIHJlc3BvbmQgdG8gcmVxdWVzdHMgdG8K
        ICBnZXQgYW5kIHNldC4gVGhlIGRlZmF1bHQgaW1wbGVtZW50YXRpb24gaGFu
        ZGxlcyBzaW1wbGUgcHJvcGVydGllcy4KCiAgWW91IGdlbmVyYWxseSB3b24n
        dCBuZWVkIHRvIGNyZWF0ZSBvciBzdWJjbGFzcyB0aGlzIGRpcmVjdGx5LgoK
        ICBAY2xhc3MgRGVzY3JpcHRvcgogIEBuYW1lc3BhY2UgRW1iZXIKICBAcHJp
        dmF0ZQogIEBjb25zdHJ1Y3RvcgoqLwpFbWJlci5EZXNjcmlwdG9yID0gZnVu
        Y3Rpb24oKSB7fTsKCi8vIC4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4u
        Li4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4KLy8gREVGSU5JTkcgUFJP
        UEVSVElFUyBBUEkKLy8KCnZhciBNQU5EQVRPUllfU0VUVEVSX0ZVTkNUSU9O
        ID0gRW1iZXIuTUFOREFUT1JZX1NFVFRFUl9GVU5DVElPTiA9IGZ1bmN0aW9u
        KHZhbHVlKSB7CiAgRW1iZXIuYXNzZXJ0KCJZb3UgbXVzdCB1c2UgRW1iZXIu
        c2V0KCkgdG8gYWNjZXNzIHRoaXMgcHJvcGVydHkgKG9mICIgKyB0aGlzICsg
        IikiLCBmYWxzZSk7Cn07Cgp2YXIgREVGQVVMVF9HRVRURVJfRlVOQ1RJT04g
        PSBFbWJlci5ERUZBVUxUX0dFVFRFUl9GVU5DVElPTiA9IGZ1bmN0aW9uKG5h
        bWUpIHsKICByZXR1cm4gZnVuY3Rpb24oKSB7CiAgICB2YXIgbWV0YSA9IHRo
        aXNbTUVUQV9LRVldOwogICAgcmV0dXJuIG1ldGEgJiYgbWV0YS52YWx1ZXNb
        bmFtZV07CiAgfTsKfTsKCi8qKgogIE5PVEU6IFRoaXMgaXMgYSBsb3ctbGV2
        ZWwgbWV0aG9kIHVzZWQgYnkgb3RoZXIgcGFydHMgb2YgdGhlIEFQSS4gWW91
        IGFsbW9zdAogIG5ldmVyIHdhbnQgdG8gY2FsbCB0aGlzIG1ldGhvZCBkaXJl
        Y3RseS4gSW5zdGVhZCB5b3Ugc2hvdWxkIHVzZQogIGBFbWJlci5taXhpbigp
        YCB0byBkZWZpbmUgbmV3IHByb3BlcnRpZXMuCgogIERlZmluZXMgYSBwcm9w
        ZXJ0eSBvbiBhbiBvYmplY3QuIFRoaXMgbWV0aG9kIHdvcmtzIG11Y2ggbGlr
        ZSB0aGUgRVM1CiAgYE9iamVjdC5kZWZpbmVQcm9wZXJ0eSgpYCBtZXRob2Qg
        ZXhjZXB0IHRoYXQgaXQgY2FuIGFsc28gYWNjZXB0IGNvbXB1dGVkCiAgcHJv
        cGVydGllcyBhbmQgb3RoZXIgc3BlY2lhbCBkZXNjcmlwdG9ycy4KCiAgTm9y
        bWFsbHkgdGhpcyBtZXRob2QgdGFrZXMgb25seSB0aHJlZSBwYXJhbWV0ZXJz
        LiBIb3dldmVyIGlmIHlvdSBwYXNzIGFuCiAgaW5zdGFuY2Ugb2YgYEVtYmVy
        LkRlc2NyaXB0b3JgIGFzIHRoZSB0aGlyZCBwYXJhbSB0aGVuIHlvdSBjYW4g
        cGFzcyBhbgogIG9wdGlvbmFsIHZhbHVlIGFzIHRoZSBmb3VydGggcGFyYW1l
        dGVyLiBUaGlzIGlzIG9mdGVuIG1vcmUgZWZmaWNpZW50IHRoYW4KICBjcmVh
        dGluZyBuZXcgZGVzY3JpcHRvciBoYXNoZXMgZm9yIGVhY2ggcHJvcGVydHku
        CgogICMjIEV4YW1wbGVzCgogIGBgYGphdmFzY3JpcHQKICAvLyBFUzUgY29t
        cGF0aWJsZSBtb2RlCiAgRW1iZXIuZGVmaW5lUHJvcGVydHkoY29udGFjdCwg
        J2ZpcnN0TmFtZScsIHsKICAgIHdyaXRhYmxlOiB0cnVlLAogICAgY29uZmln
        dXJhYmxlOiBmYWxzZSwKICAgIGVudW1lcmFibGU6IHRydWUsCiAgICB2YWx1
        ZTogJ0NoYXJsZXMnCiAgfSk7CgogIC8vIGRlZmluZSBhIHNpbXBsZSBwcm9w
        ZXJ0eQogIEVtYmVyLmRlZmluZVByb3BlcnR5KGNvbnRhY3QsICdsYXN0TmFt
        ZScsIHVuZGVmaW5lZCwgJ0pvbGxleScpOwoKICAvLyBkZWZpbmUgYSBjb21w
        dXRlZCBwcm9wZXJ0eQogIEVtYmVyLmRlZmluZVByb3BlcnR5KGNvbnRhY3Qs
        ICdmdWxsTmFtZScsIEVtYmVyLmNvbXB1dGVkKGZ1bmN0aW9uKCkgewogICAg
        cmV0dXJuIHRoaXMuZmlyc3ROYW1lKycgJyt0aGlzLmxhc3ROYW1lOwogIH0p
        LnByb3BlcnR5KCdmaXJzdE5hbWUnLCAnbGFzdE5hbWUnKSk7CiAgYGBgCgog
        IEBwcml2YXRlCiAgQG1ldGhvZCBkZWZpbmVQcm9wZXJ0eQogIEBmb3IgRW1i
        ZXIKICBAcGFyYW0ge09iamVjdH0gb2JqIHRoZSBvYmplY3QgdG8gZGVmaW5l
        IHRoaXMgcHJvcGVydHkgb24uIFRoaXMgbWF5IGJlIGEgcHJvdG90eXBlLgog
        IEBwYXJhbSB7U3RyaW5nfSBrZXlOYW1lIHRoZSBuYW1lIG9mIHRoZSBwcm9w
        ZXJ0eQogIEBwYXJhbSB7RW1iZXIuRGVzY3JpcHRvcn0gW2Rlc2NdIGFuIGlu
        c3RhbmNlIG9mIGBFbWJlci5EZXNjcmlwdG9yYCAodHlwaWNhbGx5IGEKICAg
        IGNvbXB1dGVkIHByb3BlcnR5KSBvciBhbiBFUzUgZGVzY3JpcHRvci4KICAg
        IFlvdSBtdXN0IHByb3ZpZGUgdGhpcyBvciBgZGF0YWAgYnV0IG5vdCBib3Ro
        LgogIEBwYXJhbSB7Kn0gW2RhdGFdIHNvbWV0aGluZyBvdGhlciB0aGFuIGEg
        ZGVzY3JpcHRvciwgdGhhdCB3aWxsCiAgICBiZWNvbWUgdGhlIGV4cGxpY2l0
        IHZhbHVlIG9mIHRoaXMgcHJvcGVydHkuCiovCkVtYmVyLmRlZmluZVByb3Bl
        cnR5ID0gZnVuY3Rpb24ob2JqLCBrZXlOYW1lLCBkZXNjLCBkYXRhLCBtZXRh
        KSB7CiAgdmFyIGRlc2NzLCBleGlzdGluZ0Rlc2MsIHdhdGNoaW5nLCB2YWx1
        ZTsKCiAgaWYgKCFtZXRhKSBtZXRhID0gbWV0YUZvcihvYmopOwogIGRlc2Nz
        ID0gbWV0YS5kZXNjczsKICBleGlzdGluZ0Rlc2MgPSBtZXRhLmRlc2NzW2tl
        eU5hbWVdOwogIHdhdGNoaW5nID0gbWV0YS53YXRjaGluZ1trZXlOYW1lXSA+
        IDA7CgogIGlmIChleGlzdGluZ0Rlc2MgaW5zdGFuY2VvZiBFbWJlci5EZXNj
        cmlwdG9yKSB7CiAgICBleGlzdGluZ0Rlc2MudGVhcmRvd24ob2JqLCBrZXlO
        YW1lKTsKICB9CgogIGlmIChkZXNjIGluc3RhbmNlb2YgRW1iZXIuRGVzY3Jp
        cHRvcikgewogICAgdmFsdWUgPSBkZXNjOwoKICAgIGRlc2NzW2tleU5hbWVd
        ID0gZGVzYzsKICAgIGlmIChNQU5EQVRPUllfU0VUVEVSICYmIHdhdGNoaW5n
        KSB7CiAgICAgIG9iamVjdERlZmluZVByb3BlcnR5KG9iaiwga2V5TmFtZSwg
        ewogICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICAgICAgICBlbnVtZXJh
        YmxlOiB0cnVlLAogICAgICAgIHdyaXRhYmxlOiB0cnVlLAogICAgICAgIHZh
        bHVlOiB1bmRlZmluZWQgLy8gbWFrZSBlbnVtZXJhYmxlCiAgICAgIH0pOwog
        ICAgfSBlbHNlIHsKICAgICAgb2JqW2tleU5hbWVdID0gdW5kZWZpbmVkOyAv
        LyBtYWtlIGVudW1lcmFibGUKICAgIH0KCiAgICBpZiAoRW1iZXIuRkVBVFVS
        RVMuaXNFbmFibGVkKCdjb21wb3NhYmxlLWNvbXB1dGVkLXByb3BlcnRpZXMn
        KSkgewogICAgICBpZiAoZGVzYy5mdW5jICYmIGRlc2MuX2RlcGVuZGVudENQ
        cykgewogICAgICAgIGFkZEltcGxpY2l0Q1BzKG9iaiwgZGVzYy5fZGVwZW5k
        ZW50Q1BzLCBtZXRhKTsKICAgICAgfQogICAgfQogIH0gZWxzZSB7CiAgICBk
        ZXNjc1trZXlOYW1lXSA9IHVuZGVmaW5lZDsgLy8gc2hhZG93IGRlc2NyaXB0
        b3IgaW4gcHJvdG8KICAgIGlmIChkZXNjID09IG51bGwpIHsKICAgICAgdmFs
        dWUgPSBkYXRhOwoKICAgICAgaWYgKE1BTkRBVE9SWV9TRVRURVIgJiYgd2F0
        Y2hpbmcpIHsKICAgICAgICBtZXRhLnZhbHVlc1trZXlOYW1lXSA9IGRhdGE7
        CiAgICAgICAgb2JqZWN0RGVmaW5lUHJvcGVydHkob2JqLCBrZXlOYW1lLCB7
        CiAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsCiAgICAgICAgICBlbnVt
        ZXJhYmxlOiB0cnVlLAogICAgICAgICAgc2V0OiBNQU5EQVRPUllfU0VUVEVS
        X0ZVTkNUSU9OLAogICAgICAgICAgZ2V0OiBERUZBVUxUX0dFVFRFUl9GVU5D
        VElPTihrZXlOYW1lKQogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAg
        ICAgIG9ialtrZXlOYW1lXSA9IGRhdGE7CiAgICAgIH0KICAgIH0gZWxzZSB7
        CiAgICAgIHZhbHVlID0gZGVzYzsKCiAgICAgIC8vIGNvbXBhdGliaWxpdHkg
        d2l0aCBFUzUKICAgICAgb2JqZWN0RGVmaW5lUHJvcGVydHkob2JqLCBrZXlO
        YW1lLCBkZXNjKTsKICAgIH0KICB9CgogIC8vIGlmIGtleSBpcyBiZWluZyB3
        YXRjaGVkLCBvdmVycmlkZSBjaGFpbnMgdGhhdAogIC8vIHdlcmUgaW5pdGlh
        bGl6ZWQgd2l0aCB0aGUgcHJvdG90eXBlCiAgaWYgKHdhdGNoaW5nKSB7IEVt
        YmVyLm92ZXJyaWRlQ2hhaW5zKG9iaiwga2V5TmFtZSwgbWV0YSk7IH0KCiAg
        Ly8gVGhlIGB2YWx1ZWAgcGFzc2VkIHRvIHRoZSBgZGlkRGVmaW5lUHJvcGVy
        dHlgIGhvb2sgaXMKICAvLyBlaXRoZXIgdGhlIGRlc2NyaXB0b3Igb3IgZGF0
        YSwgd2hpY2hldmVyIHdhcyBwYXNzZWQuCiAgaWYgKG9iai5kaWREZWZpbmVQ
        cm9wZXJ0eSkgeyBvYmouZGlkRGVmaW5lUHJvcGVydHkob2JqLCBrZXlOYW1l
        LCB2YWx1ZSk7IH0KCiAgcmV0dXJuIHRoaXM7Cn07CgppZiAoRW1iZXIuRkVB
        VFVSRVMuaXNFbmFibGVkKCdjb21wb3NhYmxlLWNvbXB1dGVkLXByb3BlcnRp
        ZXMnKSkgewogIHZhciBhZGRJbXBsaWNpdENQcyA9IGZ1bmN0aW9uIGRlZmlu
        ZUltcGxpY2l0Q1BzKG9iaiwgaW1wbGljaXRDUHMsIG1ldGEpIHsKICAgIHZh
        ciBjcCwga2V5LCBsZW5ndGggPSBpbXBsaWNpdENQcy5sZW5ndGg7CgogICAg
        Zm9yICh2YXIgaT0wOyBpPGxlbmd0aDsgKytpKSB7CiAgICAgIGNwID0gaW1w
        bGljaXRDUHNbaV07CiAgICAgIGtleSA9IGNwLmltcGxpY2l0Q1BLZXk7Cgog
        ICAgICBFbWJlci5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgY3AsIHVuZGVm
        aW5lZCwgbWV0YSk7CgogICAgICBpZiAoY3AuX2RlcGVuZGVudENQcykgewog
        ICAgICAgIGFkZEltcGxpY2l0Q1BzKG9iaiwgY3AuX2RlcGVuZGVudENQcywg
        bWV0YSk7CiAgICAgIH0KICAgIH0KICB9Owp9Cgp9KSgpOwoKCgooZnVuY3Rp
        b24oKSB7CnZhciBnZXQgPSBFbWJlci5nZXQ7CgovKioKICBUbyBnZXQgbXVs
        dGlwbGUgcHJvcGVydGllcyBhdCBvbmNlLCBjYWxsIGBFbWJlci5nZXRQcm9w
        ZXJ0aWVzYAogIHdpdGggYW4gb2JqZWN0IGZvbGxvd2VkIGJ5IGEgbGlzdCBv
        ZiBzdHJpbmdzIG9yIGFuIGFycmF5OgoKICBgYGBqYXZhc2NyaXB0CiAgRW1i
        ZXIuZ2V0UHJvcGVydGllcyhyZWNvcmQsICdmaXJzdE5hbWUnLCAnbGFzdE5h
        bWUnLCAnemlwQ29kZScpOyAgLy8geyBmaXJzdE5hbWU6ICdKb2huJywgbGFz
        dE5hbWU6ICdEb2UnLCB6aXBDb2RlOiAnMTAwMTEnIH0KICBgYGAKCiAgaXMg
        ZXF1aXZhbGVudCB0bzoKCiAgYGBgamF2YXNjcmlwdAogIEVtYmVyLmdldFBy
        b3BlcnRpZXMocmVjb3JkLCBbJ2ZpcnN0TmFtZScsICdsYXN0TmFtZScsICd6
        aXBDb2RlJ10pOyAgLy8geyBmaXJzdE5hbWU6ICdKb2huJywgbGFzdE5hbWU6
        ICdEb2UnLCB6aXBDb2RlOiAnMTAwMTEnIH0KICBgYGAKCiAgQG1ldGhvZCBn
        ZXRQcm9wZXJ0aWVzCiAgQHBhcmFtIG9iagogIEBwYXJhbSB7U3RyaW5nLi4u
        fEFycmF5fSBsaXN0IG9mIGtleXMgdG8gZ2V0CiAgQHJldHVybiB7SGFzaH0K
        Ki8KRW1iZXIuZ2V0UHJvcGVydGllcyA9IGZ1bmN0aW9uKG9iaikgewogIHZh
        ciByZXQgPSB7fSwKICAgICAgcHJvcGVydHlOYW1lcyA9IGFyZ3VtZW50cywK
        ICAgICAgaSA9IDE7CgogIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAyICYm
        IEVtYmVyLnR5cGVPZihhcmd1bWVudHNbMV0pID09PSAnYXJyYXknKSB7CiAg
        ICBpID0gMDsKICAgIHByb3BlcnR5TmFtZXMgPSBhcmd1bWVudHNbMV07CiAg
        fQogIGZvcih2YXIgbGVuID0gcHJvcGVydHlOYW1lcy5sZW5ndGg7IGkgPCBs
        ZW47IGkrKykgewogICAgcmV0W3Byb3BlcnR5TmFtZXNbaV1dID0gZ2V0KG9i
        aiwgcHJvcGVydHlOYW1lc1tpXSk7CiAgfQogIHJldHVybiByZXQ7Cn07Cgp9
        KSgpOwoKCgooZnVuY3Rpb24oKSB7CnZhciBjaGFuZ2VQcm9wZXJ0aWVzID0g
        RW1iZXIuY2hhbmdlUHJvcGVydGllcywKICAgIHNldCA9IEVtYmVyLnNldDsK
        Ci8qKgogIFNldCBhIGxpc3Qgb2YgcHJvcGVydGllcyBvbiBhbiBvYmplY3Qu
        IFRoZXNlIHByb3BlcnRpZXMgYXJlIHNldCBpbnNpZGUKICBhIHNpbmdsZSBg
        YmVnaW5Qcm9wZXJ0eUNoYW5nZXNgIGFuZCBgZW5kUHJvcGVydHlDaGFuZ2Vz
        YCBiYXRjaCwgc28KICBvYnNlcnZlcnMgd2lsbCBiZSBidWZmZXJlZC4KCiAg
        YGBgamF2YXNjcmlwdAogIGFuT2JqZWN0LnNldFByb3BlcnRpZXMoewogICAg
        Zmlyc3ROYW1lOiAiU3RhbmxleSIsCiAgICBsYXN0TmFtZTogIlN0dWFydCIs
        CiAgICBhZ2U6ICIyMSIKICB9KQogIGBgYAoKICBAbWV0aG9kIHNldFByb3Bl
        cnRpZXMKICBAcGFyYW0gc2VsZgogIEBwYXJhbSB7T2JqZWN0fSBoYXNoCiAg
        QHJldHVybiBzZWxmCiovCkVtYmVyLnNldFByb3BlcnRpZXMgPSBmdW5jdGlv
        bihzZWxmLCBoYXNoKSB7CiAgY2hhbmdlUHJvcGVydGllcyhmdW5jdGlvbigp
        IHsKICAgIGZvcih2YXIgcHJvcCBpbiBoYXNoKSB7CiAgICAgIGlmIChoYXNo
        Lmhhc093blByb3BlcnR5KHByb3ApKSB7IHNldChzZWxmLCBwcm9wLCBoYXNo
        W3Byb3BdKTsgfQogICAgfQogIH0pOwogIHJldHVybiBzZWxmOwp9OwoKfSko
        KTsKCgoKKGZ1bmN0aW9uKCkgewp2YXIgbWV0YUZvciA9IEVtYmVyLm1ldGEs
        IC8vIHV0aWxzLmpzCiAgICB0eXBlT2YgPSBFbWJlci50eXBlT2YsIC8vIHV0
        aWxzLmpzCiAgICBNQU5EQVRPUllfU0VUVEVSID0gRW1iZXIuRU5WLk1BTkRB
        VE9SWV9TRVRURVIsCiAgICBvX2RlZmluZVByb3BlcnR5ID0gRW1iZXIucGxh
        dGZvcm0uZGVmaW5lUHJvcGVydHk7CgpFbWJlci53YXRjaEtleSA9IGZ1bmN0
        aW9uKG9iaiwga2V5TmFtZSwgbWV0YSkgewogIC8vIGNhbid0IHdhdGNoIGxl
        bmd0aCBvbiBBcnJheSAtIGl0IGlzIHNwZWNpYWwuLi4KICBpZiAoa2V5TmFt
        ZSA9PT0gJ2xlbmd0aCcgJiYgdHlwZU9mKG9iaikgPT09ICdhcnJheScpIHsg
        cmV0dXJuOyB9CgogIHZhciBtID0gbWV0YSB8fCBtZXRhRm9yKG9iaiksIHdh
        dGNoaW5nID0gbS53YXRjaGluZzsKCiAgLy8gYWN0aXZhdGUgd2F0Y2hpbmcg
        Zmlyc3QgdGltZQogIGlmICghd2F0Y2hpbmdba2V5TmFtZV0pIHsKICAgIHdh
        dGNoaW5nW2tleU5hbWVdID0gMTsKCiAgICBpZiAoJ2Z1bmN0aW9uJyA9PT0g
        dHlwZW9mIG9iai53aWxsV2F0Y2hQcm9wZXJ0eSkgewogICAgICBvYmoud2ls
        bFdhdGNoUHJvcGVydHkoa2V5TmFtZSk7CiAgICB9CgogICAgaWYgKE1BTkRB
        VE9SWV9TRVRURVIgJiYga2V5TmFtZSBpbiBvYmopIHsKICAgICAgbS52YWx1
        ZXNba2V5TmFtZV0gPSBvYmpba2V5TmFtZV07CiAgICAgIG9fZGVmaW5lUHJv
        cGVydHkob2JqLCBrZXlOYW1lLCB7CiAgICAgICAgY29uZmlndXJhYmxlOiB0
        cnVlLAogICAgICAgIGVudW1lcmFibGU6IG9iai5wcm9wZXJ0eUlzRW51bWVy
        YWJsZShrZXlOYW1lKSwKICAgICAgICBzZXQ6IEVtYmVyLk1BTkRBVE9SWV9T
        RVRURVJfRlVOQ1RJT04sCiAgICAgICAgZ2V0OiBFbWJlci5ERUZBVUxUX0dF
        VFRFUl9GVU5DVElPTihrZXlOYW1lKQogICAgICB9KTsKICAgIH0KICB9IGVs
        c2UgewogICAgd2F0Y2hpbmdba2V5TmFtZV0gPSAod2F0Y2hpbmdba2V5TmFt
        ZV0gfHwgMCkgKyAxOwogIH0KfTsKCgpFbWJlci51bndhdGNoS2V5ID0gZnVu
        Y3Rpb24ob2JqLCBrZXlOYW1lLCBtZXRhKSB7CiAgdmFyIG0gPSBtZXRhIHx8
        IG1ldGFGb3Iob2JqKSwgd2F0Y2hpbmcgPSBtLndhdGNoaW5nOwoKICBpZiAo
        d2F0Y2hpbmdba2V5TmFtZV0gPT09IDEpIHsKICAgIHdhdGNoaW5nW2tleU5h
        bWVdID0gMDsKCiAgICBpZiAoJ2Z1bmN0aW9uJyA9PT0gdHlwZW9mIG9iai5k
        aWRVbndhdGNoUHJvcGVydHkpIHsKICAgICAgb2JqLmRpZFVud2F0Y2hQcm9w
        ZXJ0eShrZXlOYW1lKTsKICAgIH0KCiAgICBpZiAoTUFOREFUT1JZX1NFVFRF
        UiAmJiBrZXlOYW1lIGluIG9iaikgewogICAgICBvX2RlZmluZVByb3BlcnR5
        KG9iaiwga2V5TmFtZSwgewogICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwK
        ICAgICAgICBlbnVtZXJhYmxlOiBvYmoucHJvcGVydHlJc0VudW1lcmFibGUo
        a2V5TmFtZSksCiAgICAgICAgc2V0OiBmdW5jdGlvbih2YWwpIHsKICAgICAg
        ICAgIC8vIHJlZGVmaW5lIHRvIHNldCBhcyBlbnVtZXJhYmxlCiAgICAgICAg
        ICBvX2RlZmluZVByb3BlcnR5KG9iaiwga2V5TmFtZSwgewogICAgICAgICAg
        ICBjb25maWd1cmFibGU6IHRydWUsCiAgICAgICAgICAgIHdyaXRhYmxlOiB0
        cnVlLAogICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLAogICAgICAgICAg
        ICB2YWx1ZTogdmFsCiAgICAgICAgICB9KTsKICAgICAgICAgIGRlbGV0ZSBt
        LnZhbHVlc1trZXlOYW1lXTsKICAgICAgICB9LAogICAgICAgIGdldDogRW1i
        ZXIuREVGQVVMVF9HRVRURVJfRlVOQ1RJT04oa2V5TmFtZSkKICAgICAgfSk7
        CiAgICB9CiAgfSBlbHNlIGlmICh3YXRjaGluZ1trZXlOYW1lXSA+IDEpIHsK
        ICAgIHdhdGNoaW5nW2tleU5hbWVdLS07CiAgfQp9OwoKfSkoKTsKCgoKKGZ1
        bmN0aW9uKCkgewp2YXIgbWV0YUZvciA9IEVtYmVyLm1ldGEsIC8vIHV0aWxz
        LmpzCiAgICBnZXQgPSBFbWJlci5nZXQsIC8vIHByb3BlcnR5X2dldC5qcwog
        ICAgbm9ybWFsaXplVHVwbGUgPSBFbWJlci5ub3JtYWxpemVUdXBsZSwgLy8g
        cHJvcGVydHlfZ2V0LmpzCiAgICBmb3JFYWNoID0gRW1iZXIuQXJyYXlQb2x5
        ZmlsbHMuZm9yRWFjaCwgLy8gYXJyYXkuanMKICAgIHdhcm4gPSBFbWJlci53
        YXJuLAogICAgd2F0Y2hLZXkgPSBFbWJlci53YXRjaEtleSwKICAgIHVud2F0
        Y2hLZXkgPSBFbWJlci51bndhdGNoS2V5LAogICAgRklSU1RfS0VZID0gL14o
        W15cLlwqXSspLywKICAgIE1FVEFfS0VZID0gRW1iZXIuTUVUQV9LRVk7Cgpm
        dW5jdGlvbiBmaXJzdEtleShwYXRoKSB7CiAgcmV0dXJuIHBhdGgubWF0Y2go
        RklSU1RfS0VZKVswXTsKfQoKdmFyIHBlbmRpbmdRdWV1ZSA9IFtdOwoKLy8g
        YXR0ZW1wdHMgdG8gYWRkIHRoZSBwZW5kaW5nUXVldWUgY2hhaW5zIGFnYWlu
        LiBJZiBzb21lIG9mIHRoZW0gZW5kIHVwCi8vIGJhY2sgaW4gdGhlIHF1ZXVl
        IGFuZCByZXNjaGVkdWxlIGlzIHRydWUsIHNjaGVkdWxlcyBhIHRpbWVvdXQg
        dG8gdHJ5Ci8vIGFnYWluLgpFbWJlci5mbHVzaFBlbmRpbmdDaGFpbnMgPSBm
        dW5jdGlvbigpIHsKICBpZiAocGVuZGluZ1F1ZXVlLmxlbmd0aCA9PT0gMCkg
        eyByZXR1cm47IH0gLy8gbm90aGluZyB0byBkbwoKICB2YXIgcXVldWUgPSBw
        ZW5kaW5nUXVldWU7CiAgcGVuZGluZ1F1ZXVlID0gW107CgogIGZvckVhY2gu
        Y2FsbChxdWV1ZSwgZnVuY3Rpb24ocSkgeyBxWzBdLmFkZChxWzFdKTsgfSk7
        CgogIHdhcm4oJ1dhdGNoaW5nIGFuIHVuZGVmaW5lZCBnbG9iYWwsIEVtYmVy
        IGV4cGVjdHMgd2F0Y2hlZCBnbG9iYWxzIHRvIGJlIHNldHVwIGJ5IHRoZSB0
        aW1lIHRoZSBydW4gbG9vcCBpcyBmbHVzaGVkLCBjaGVjayBmb3IgdHlwb3Mn
        LCBwZW5kaW5nUXVldWUubGVuZ3RoID09PSAwKTsKfTsKCgpmdW5jdGlvbiBh
        ZGRDaGFpbldhdGNoZXIob2JqLCBrZXlOYW1lLCBub2RlKSB7CiAgaWYgKCFv
        YmogfHwgKCdvYmplY3QnICE9PSB0eXBlb2Ygb2JqKSkgeyByZXR1cm47IH0g
        Ly8gbm90aGluZyB0byBkbwoKICB2YXIgbSA9IG1ldGFGb3Iob2JqKSwgbm9k
        ZXMgPSBtLmNoYWluV2F0Y2hlcnM7CgogIGlmICghbS5oYXNPd25Qcm9wZXJ0
        eSgnY2hhaW5XYXRjaGVycycpKSB7CiAgICBub2RlcyA9IG0uY2hhaW5XYXRj
        aGVycyA9IHt9OwogIH0KCiAgaWYgKCFub2Rlc1trZXlOYW1lXSkgeyBub2Rl
        c1trZXlOYW1lXSA9IFtdOyB9CiAgbm9kZXNba2V5TmFtZV0ucHVzaChub2Rl
        KTsKICB3YXRjaEtleShvYmosIGtleU5hbWUsIG0pOwp9Cgp2YXIgcmVtb3Zl
        Q2hhaW5XYXRjaGVyID0gRW1iZXIucmVtb3ZlQ2hhaW5XYXRjaGVyID0gZnVu
        Y3Rpb24ob2JqLCBrZXlOYW1lLCBub2RlKSB7CiAgaWYgKCFvYmogfHwgJ29i
        amVjdCcgIT09IHR5cGVvZiBvYmopIHsgcmV0dXJuOyB9IC8vIG5vdGhpbmcg
        dG8gZG8KCiAgdmFyIG0gPSBvYmpbTUVUQV9LRVldOwogIGlmIChtICYmICFt
        Lmhhc093blByb3BlcnR5KCdjaGFpbldhdGNoZXJzJykpIHsgcmV0dXJuOyB9
        IC8vIG5vdGhpbmcgdG8gZG8KCiAgdmFyIG5vZGVzID0gbSAmJiBtLmNoYWlu
        V2F0Y2hlcnM7CgogIGlmIChub2RlcyAmJiBub2Rlc1trZXlOYW1lXSkgewog
        ICAgbm9kZXMgPSBub2Rlc1trZXlOYW1lXTsKICAgIGZvciAodmFyIGkgPSAw
        LCBsID0gbm9kZXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7CiAgICAgIGlmIChu
        b2Rlc1tpXSA9PT0gbm9kZSkgeyBub2Rlcy5zcGxpY2UoaSwgMSk7IH0KICAg
        IH0KICB9CiAgdW53YXRjaEtleShvYmosIGtleU5hbWUsIG0pOwp9OwoKLy8g
        QSBDaGFpbk5vZGUgd2F0Y2hlcyBhIHNpbmdsZSBrZXkgb24gYW4gb2JqZWN0
        LiBJZiB5b3UgcHJvdmlkZSBhIHN0YXJ0aW5nCi8vIHZhbHVlIGZvciB0aGUg
        a2V5IHRoZW4gdGhlIG5vZGUgd29uJ3QgYWN0dWFsbHkgd2F0Y2ggaXQuIEZv
        ciBhIHJvb3Qgbm9kZQovLyBwYXNzIG51bGwgZm9yIHBhcmVudCBhbmQga2V5
        IGFuZCBvYmplY3QgZm9yIHZhbHVlLgp2YXIgQ2hhaW5Ob2RlID0gRW1iZXIu
        X0NoYWluTm9kZSA9IGZ1bmN0aW9uKHBhcmVudCwga2V5LCB2YWx1ZSkgewog
        IHRoaXMuX3BhcmVudCA9IHBhcmVudDsKICB0aGlzLl9rZXkgICAgPSBrZXk7
        CgogIC8vIF93YXRjaGluZyBpcyB0cnVlIHdoZW4gY2FsbGluZyBnZXQodGhp
        cy5fcGFyZW50LCB0aGlzLl9rZXkpIHdpbGwKICAvLyByZXR1cm4gdGhlIHZh
        bHVlIG9mIHRoaXMgbm9kZS4KICAvLwogIC8vIEl0IGlzIGZhbHNlIGZvciB0
        aGUgcm9vdCBvZiBhIGNoYWluIChiZWNhdXNlIHdlIGhhdmUgbm8gcGFyZW50
        KQogIC8vIGFuZCBmb3IgZ2xvYmFsIHBhdGhzIChiZWNhdXNlIHRoZSBwYXJl
        bnQgbm9kZSBpcyB0aGUgb2JqZWN0IHdpdGgKICAvLyB0aGUgb2JzZXJ2ZXIg
        b24gaXQpCiAgdGhpcy5fd2F0Y2hpbmcgPSB2YWx1ZT09PXVuZGVmaW5lZDsK
        CiAgdGhpcy5fdmFsdWUgID0gdmFsdWU7CiAgdGhpcy5fcGF0aHMgPSB7fTsK
        ICBpZiAodGhpcy5fd2F0Y2hpbmcpIHsKICAgIHRoaXMuX29iamVjdCA9IHBh
        cmVudC52YWx1ZSgpOwogICAgaWYgKHRoaXMuX29iamVjdCkgeyBhZGRDaGFp
        bldhdGNoZXIodGhpcy5fb2JqZWN0LCB0aGlzLl9rZXksIHRoaXMpOyB9CiAg
        fQoKICAvLyBTcGVjaWFsLWNhc2U6IHRoZSBFYWNoUHJveHkgcmVsaWVzIG9u
        IGltbWVkaWF0ZSBldmFsdWF0aW9uIHRvCiAgLy8gZXN0YWJsaXNoIGl0cyBv
        YnNlcnZlcnMuCiAgLy8KICAvLyBUT0RPOiBSZXBsYWNlIHRoaXMgd2l0aCBh
        biBlZmZpY2llbnQgY2FsbGJhY2sgdGhhdCB0aGUgRWFjaFByb3h5CiAgLy8g
        Y2FuIGltcGxlbWVudC4KICBpZiAodGhpcy5fcGFyZW50ICYmIHRoaXMuX3Bh
        cmVudC5fa2V5ID09PSAnQGVhY2gnKSB7CiAgICB0aGlzLnZhbHVlKCk7CiAg
        fQp9OwoKdmFyIENoYWluTm9kZVByb3RvdHlwZSA9IENoYWluTm9kZS5wcm90
        b3R5cGU7CgpmdW5jdGlvbiBsYXp5R2V0KG9iaiwga2V5KSB7CiAgaWYgKCFv
        YmopIHJldHVybiB1bmRlZmluZWQ7CgogIHZhciBtZXRhID0gb2JqW01FVEFf
        S0VZXTsKICAvLyBjaGVjayBpZiBvYmplY3QgbWVhbnQgb25seSB0byBiZSBh
        IHByb3RvdHlwZQogIGlmIChtZXRhICYmIG1ldGEucHJvdG8gPT09IG9iaikg
        cmV0dXJuIHVuZGVmaW5lZDsKCiAgaWYgKGtleSA9PT0gIkBlYWNoIikgcmV0
        dXJuIGdldChvYmosIGtleSk7CgogIC8vIGlmIGEgQ1Agb25seSByZXR1cm4g
        Y2FjaGVkIHZhbHVlCiAgdmFyIGRlc2MgPSBtZXRhICYmIG1ldGEuZGVzY3Nb
        a2V5XTsKICBpZiAoZGVzYyAmJiBkZXNjLl9jYWNoZWFibGUpIHsKICAgIGlm
        IChrZXkgaW4gbWV0YS5jYWNoZSkgewogICAgICByZXR1cm4gbWV0YS5jYWNo
        ZVtrZXldOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIHVuZGVmaW5lZDsK
        ICAgIH0KICB9CgogIHJldHVybiBnZXQob2JqLCBrZXkpOwp9CgpDaGFpbk5v
        ZGVQcm90b3R5cGUudmFsdWUgPSBmdW5jdGlvbigpIHsKICBpZiAodGhpcy5f
        dmFsdWUgPT09IHVuZGVmaW5lZCAmJiB0aGlzLl93YXRjaGluZykgewogICAg
        dmFyIG9iaiA9IHRoaXMuX3BhcmVudC52YWx1ZSgpOwogICAgdGhpcy5fdmFs
        dWUgPSBsYXp5R2V0KG9iaiwgdGhpcy5fa2V5KTsKICB9CiAgcmV0dXJuIHRo
        aXMuX3ZhbHVlOwp9OwoKQ2hhaW5Ob2RlUHJvdG90eXBlLmRlc3Ryb3kgPSBm
        dW5jdGlvbigpIHsKICBpZiAodGhpcy5fd2F0Y2hpbmcpIHsKICAgIHZhciBv
        YmogPSB0aGlzLl9vYmplY3Q7CiAgICBpZiAob2JqKSB7IHJlbW92ZUNoYWlu
        V2F0Y2hlcihvYmosIHRoaXMuX2tleSwgdGhpcyk7IH0KICAgIHRoaXMuX3dh
        dGNoaW5nID0gZmFsc2U7IC8vIHNvIGZ1dHVyZSBjYWxscyBkbyBub3RoaW5n
        CiAgfQp9OwoKLy8gY29waWVzIGEgdG9wIGxldmVsIG9iamVjdCBvbmx5CkNo
        YWluTm9kZVByb3RvdHlwZS5jb3B5ID0gZnVuY3Rpb24ob2JqKSB7CiAgdmFy
        IHJldCA9IG5ldyBDaGFpbk5vZGUobnVsbCwgbnVsbCwgb2JqKSwKICAgICAg
        cGF0aHMgPSB0aGlzLl9wYXRocywgcGF0aDsKICBmb3IgKHBhdGggaW4gcGF0
        aHMpIHsKICAgIGlmIChwYXRoc1twYXRoXSA8PSAwKSB7IGNvbnRpbnVlOyB9
        IC8vIHRoaXMgY2hlY2sgd2lsbCBhbHNvIGNhdGNoIG5vbi1udW1iZXIgdmFs
        cy4KICAgIHJldC5hZGQocGF0aCk7CiAgfQogIHJldHVybiByZXQ7Cn07Cgov
        LyBjYWxsZWQgb24gdGhlIHJvb3Qgbm9kZSBvZiBhIGNoYWluIHRvIHNldHVw
        IHdhdGNoZXJzIG9uIHRoZSBzcGVjaWZpZWQKLy8gcGF0aC4KQ2hhaW5Ob2Rl
        UHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uKHBhdGgpIHsKICB2YXIgb2JqLCB0
        dXBsZSwga2V5LCBzcmMsIHBhdGhzOwoKICBwYXRocyA9IHRoaXMuX3BhdGhz
        OwogIHBhdGhzW3BhdGhdID0gKHBhdGhzW3BhdGhdIHx8IDApICsgMTsKCiAg
        b2JqID0gdGhpcy52YWx1ZSgpOwogIHR1cGxlID0gbm9ybWFsaXplVHVwbGUo
        b2JqLCBwYXRoKTsKCiAgLy8gdGhlIHBhdGggd2FzIGEgbG9jYWwgcGF0aAog
        IGlmICh0dXBsZVswXSAmJiB0dXBsZVswXSA9PT0gb2JqKSB7CiAgICBwYXRo
        ID0gdHVwbGVbMV07CiAgICBrZXkgID0gZmlyc3RLZXkocGF0aCk7CiAgICBw
        YXRoID0gcGF0aC5zbGljZShrZXkubGVuZ3RoKzEpOwoKICAvLyBnbG9iYWwg
        cGF0aCwgYnV0IG9iamVjdCBkb2VzIG5vdCBleGlzdCB5ZXQuCiAgLy8gcHV0
        IGludG8gYSBxdWV1ZSBhbmQgdHJ5IHRvIGNvbm5lY3QgbGF0ZXIuCiAgfSBl
        bHNlIGlmICghdHVwbGVbMF0pIHsKICAgIHBlbmRpbmdRdWV1ZS5wdXNoKFt0
        aGlzLCBwYXRoXSk7CiAgICB0dXBsZS5sZW5ndGggPSAwOwogICAgcmV0dXJu
        OwoKICAvLyBnbG9iYWwgcGF0aCwgYW5kIG9iamVjdCBhbHJlYWR5IGV4aXN0
        cwogIH0gZWxzZSB7CiAgICBzcmMgID0gdHVwbGVbMF07CiAgICBrZXkgID0g
        cGF0aC5zbGljZSgwLCAwLSh0dXBsZVsxXS5sZW5ndGgrMSkpOwogICAgcGF0
        aCA9IHR1cGxlWzFdOwogIH0KCiAgdHVwbGUubGVuZ3RoID0gMDsKICB0aGlz
        LmNoYWluKGtleSwgcGF0aCwgc3JjKTsKfTsKCi8vIGNhbGxlZCBvbiB0aGUg
        cm9vdCBub2RlIG9mIGEgY2hhaW4gdG8gdGVhcmRvd24gd2F0Y2hlciBvbiB0
        aGUgc3BlY2lmaWVkCi8vIHBhdGgKQ2hhaW5Ob2RlUHJvdG90eXBlLnJlbW92
        ZSA9IGZ1bmN0aW9uKHBhdGgpIHsKICB2YXIgb2JqLCB0dXBsZSwga2V5LCBz
        cmMsIHBhdGhzOwoKICBwYXRocyA9IHRoaXMuX3BhdGhzOwogIGlmIChwYXRo
        c1twYXRoXSA+IDApIHsgcGF0aHNbcGF0aF0tLTsgfQoKICBvYmogPSB0aGlz
        LnZhbHVlKCk7CiAgdHVwbGUgPSBub3JtYWxpemVUdXBsZShvYmosIHBhdGgp
        OwogIGlmICh0dXBsZVswXSA9PT0gb2JqKSB7CiAgICBwYXRoID0gdHVwbGVb
        MV07CiAgICBrZXkgID0gZmlyc3RLZXkocGF0aCk7CiAgICBwYXRoID0gcGF0
        aC5zbGljZShrZXkubGVuZ3RoKzEpOwogIH0gZWxzZSB7CiAgICBzcmMgID0g
        dHVwbGVbMF07CiAgICBrZXkgID0gcGF0aC5zbGljZSgwLCAwLSh0dXBsZVsx
        XS5sZW5ndGgrMSkpOwogICAgcGF0aCA9IHR1cGxlWzFdOwogIH0KCiAgdHVw
        bGUubGVuZ3RoID0gMDsKICB0aGlzLnVuY2hhaW4oa2V5LCBwYXRoKTsKfTsK
        CkNoYWluTm9kZVByb3RvdHlwZS5jb3VudCA9IDA7CgpDaGFpbk5vZGVQcm90
        b3R5cGUuY2hhaW4gPSBmdW5jdGlvbihrZXksIHBhdGgsIHNyYykgewogIHZh
        ciBjaGFpbnMgPSB0aGlzLl9jaGFpbnMsIG5vZGU7CiAgaWYgKCFjaGFpbnMp
        IHsgY2hhaW5zID0gdGhpcy5fY2hhaW5zID0ge307IH0KCiAgbm9kZSA9IGNo
        YWluc1trZXldOwogIGlmICghbm9kZSkgeyBub2RlID0gY2hhaW5zW2tleV0g
        PSBuZXcgQ2hhaW5Ob2RlKHRoaXMsIGtleSwgc3JjKTsgfQogIG5vZGUuY291
        bnQrKzsgLy8gY291bnQgY2hhaW5zLi4uCgogIC8vIGNoYWluIHJlc3Qgb2Yg
        cGF0aCBpZiB0aGVyZSBpcyBvbmUKICBpZiAocGF0aCAmJiBwYXRoLmxlbmd0
        aD4wKSB7CiAgICBrZXkgPSBmaXJzdEtleShwYXRoKTsKICAgIHBhdGggPSBw
        YXRoLnNsaWNlKGtleS5sZW5ndGgrMSk7CiAgICBub2RlLmNoYWluKGtleSwg
        cGF0aCk7IC8vIE5PVEU6IG5vIHNyYyBtZWFucyBpdCB3aWxsIG9ic2VydmUg
        Y2hhbmdlcy4uLgogIH0KfTsKCkNoYWluTm9kZVByb3RvdHlwZS51bmNoYWlu
        ID0gZnVuY3Rpb24oa2V5LCBwYXRoKSB7CiAgdmFyIGNoYWlucyA9IHRoaXMu
        X2NoYWlucywgbm9kZSA9IGNoYWluc1trZXldOwoKICAvLyB1bmNoYWluIHJl
        c3Qgb2YgcGF0aCBmaXJzdC4uLgogIGlmIChwYXRoICYmIHBhdGgubGVuZ3Ro
        PjEpIHsKICAgIGtleSAgPSBmaXJzdEtleShwYXRoKTsKICAgIHBhdGggPSBw
        YXRoLnNsaWNlKGtleS5sZW5ndGgrMSk7CiAgICBub2RlLnVuY2hhaW4oa2V5
        LCBwYXRoKTsKICB9CgogIC8vIGRlbGV0ZSBub2RlIGlmIG5lZWRlZC4KICBu
        b2RlLmNvdW50LS07CiAgaWYgKG5vZGUuY291bnQ8PTApIHsKICAgIGRlbGV0
        ZSBjaGFpbnNbbm9kZS5fa2V5XTsKICAgIG5vZGUuZGVzdHJveSgpOwogIH0K
        Cn07CgpDaGFpbk5vZGVQcm90b3R5cGUud2lsbENoYW5nZSA9IGZ1bmN0aW9u
        KGV2ZW50cykgewogIHZhciBjaGFpbnMgPSB0aGlzLl9jaGFpbnM7CiAgaWYg
        KGNoYWlucykgewogICAgZm9yKHZhciBrZXkgaW4gY2hhaW5zKSB7CiAgICAg
        IGlmICghY2hhaW5zLmhhc093blByb3BlcnR5KGtleSkpIHsgY29udGludWU7
        IH0KICAgICAgY2hhaW5zW2tleV0ud2lsbENoYW5nZShldmVudHMpOwogICAg
        fQogIH0KCiAgaWYgKHRoaXMuX3BhcmVudCkgeyB0aGlzLl9wYXJlbnQuY2hh
        aW5XaWxsQ2hhbmdlKHRoaXMsIHRoaXMuX2tleSwgMSwgZXZlbnRzKTsgfQp9
        OwoKQ2hhaW5Ob2RlUHJvdG90eXBlLmNoYWluV2lsbENoYW5nZSA9IGZ1bmN0
        aW9uKGNoYWluLCBwYXRoLCBkZXB0aCwgZXZlbnRzKSB7CiAgaWYgKHRoaXMu
        X2tleSkgeyBwYXRoID0gdGhpcy5fa2V5ICsgJy4nICsgcGF0aDsgfQoKICBp
        ZiAodGhpcy5fcGFyZW50KSB7CiAgICB0aGlzLl9wYXJlbnQuY2hhaW5XaWxs
        Q2hhbmdlKHRoaXMsIHBhdGgsIGRlcHRoKzEsIGV2ZW50cyk7CiAgfSBlbHNl
        IHsKICAgIGlmIChkZXB0aCA+IDEpIHsKICAgICAgZXZlbnRzLnB1c2godGhp
        cy52YWx1ZSgpLCBwYXRoKTsKICAgIH0KICAgIHBhdGggPSAndGhpcy4nICsg
        cGF0aDsKICAgIGlmICh0aGlzLl9wYXRoc1twYXRoXSA+IDApIHsKICAgICAg
        ZXZlbnRzLnB1c2godGhpcy52YWx1ZSgpLCBwYXRoKTsKICAgIH0KICB9Cn07
        CgpDaGFpbk5vZGVQcm90b3R5cGUuY2hhaW5EaWRDaGFuZ2UgPSBmdW5jdGlv
        bihjaGFpbiwgcGF0aCwgZGVwdGgsIGV2ZW50cykgewogIGlmICh0aGlzLl9r
        ZXkpIHsgcGF0aCA9IHRoaXMuX2tleSArICcuJyArIHBhdGg7IH0KICBpZiAo
        dGhpcy5fcGFyZW50KSB7CiAgICB0aGlzLl9wYXJlbnQuY2hhaW5EaWRDaGFu
        Z2UodGhpcywgcGF0aCwgZGVwdGgrMSwgZXZlbnRzKTsKICB9IGVsc2Ugewog
        ICAgaWYgKGRlcHRoID4gMSkgewogICAgICBldmVudHMucHVzaCh0aGlzLnZh
        bHVlKCksIHBhdGgpOwogICAgfQogICAgcGF0aCA9ICd0aGlzLicgKyBwYXRo
        OwogICAgaWYgKHRoaXMuX3BhdGhzW3BhdGhdID4gMCkgewogICAgICBldmVu
        dHMucHVzaCh0aGlzLnZhbHVlKCksIHBhdGgpOwogICAgfQogIH0KfTsKCkNo
        YWluTm9kZVByb3RvdHlwZS5kaWRDaGFuZ2UgPSBmdW5jdGlvbihldmVudHMp
        IHsKICAvLyBpbnZhbGlkYXRlIG15IG93biB2YWx1ZSBmaXJzdC4KICBpZiAo
        dGhpcy5fd2F0Y2hpbmcpIHsKICAgIHZhciBvYmogPSB0aGlzLl9wYXJlbnQu
        dmFsdWUoKTsKICAgIGlmIChvYmogIT09IHRoaXMuX29iamVjdCkgewogICAg
        ICByZW1vdmVDaGFpbldhdGNoZXIodGhpcy5fb2JqZWN0LCB0aGlzLl9rZXks
        IHRoaXMpOwogICAgICB0aGlzLl9vYmplY3QgPSBvYmo7CiAgICAgIGFkZENo
        YWluV2F0Y2hlcihvYmosIHRoaXMuX2tleSwgdGhpcyk7CiAgICB9CiAgICB0
        aGlzLl92YWx1ZSAgPSB1bmRlZmluZWQ7CgogICAgLy8gU3BlY2lhbC1jYXNl
        OiB0aGUgRWFjaFByb3h5IHJlbGllcyBvbiBpbW1lZGlhdGUgZXZhbHVhdGlv
        biB0bwogICAgLy8gZXN0YWJsaXNoIGl0cyBvYnNlcnZlcnMuCiAgICBpZiAo
        dGhpcy5fcGFyZW50ICYmIHRoaXMuX3BhcmVudC5fa2V5ID09PSAnQGVhY2gn
        KQogICAgICB0aGlzLnZhbHVlKCk7CiAgfQoKICAvLyB0aGVuIG5vdGlmeSBj
        aGFpbnMuLi4KICB2YXIgY2hhaW5zID0gdGhpcy5fY2hhaW5zOwogIGlmIChj
        aGFpbnMpIHsKICAgIGZvcih2YXIga2V5IGluIGNoYWlucykgewogICAgICBp
        ZiAoIWNoYWlucy5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7IGNvbnRpbnVlOyB9
        CiAgICAgIGNoYWluc1trZXldLmRpZENoYW5nZShldmVudHMpOwogICAgfQog
        IH0KCiAgLy8gaWYgbm8gZXZlbnRzIGFyZSBwYXNzZWQgaW4gdGhlbiB3ZSBv
        bmx5IGNhcmUgYWJvdXQgdGhlIGFib3ZlIHdpcmluZyB1cGRhdGUKICBpZiAo
        ZXZlbnRzID09PSBudWxsKSB7IHJldHVybjsgfQoKICAvLyBhbmQgZmluYWxs
        eSB0ZWxsIHBhcmVudCBhYm91dCBteSBwYXRoIGNoYW5naW5nLi4uCiAgaWYg
        KHRoaXMuX3BhcmVudCkgeyB0aGlzLl9wYXJlbnQuY2hhaW5EaWRDaGFuZ2Uo
        dGhpcywgdGhpcy5fa2V5LCAxLCBldmVudHMpOyB9Cn07CgpFbWJlci5maW5p
        c2hDaGFpbnMgPSBmdW5jdGlvbihvYmopIHsKICAvLyBXZSBvbmx5IGNyZWF0
        ZSBtZXRhIGlmIHdlIHJlYWxseSBoYXZlIHRvCiAgdmFyIG0gPSBvYmpbTUVU
        QV9LRVldLCBjaGFpbnMgPSBtICYmIG0uY2hhaW5zOwogIGlmIChjaGFpbnMp
        IHsKICAgIGlmIChjaGFpbnMudmFsdWUoKSAhPT0gb2JqKSB7CiAgICAgIG1l
        dGFGb3Iob2JqKS5jaGFpbnMgPSBjaGFpbnMgPSBjaGFpbnMuY29weShvYmop
        OwogICAgfSBlbHNlIHsKICAgICAgY2hhaW5zLmRpZENoYW5nZShudWxsKTsK
        ICAgIH0KICB9Cn07Cgp9KSgpOwoKCgooZnVuY3Rpb24oKSB7Ci8qKgogIEBt
        b2R1bGUgZW1iZXItbWV0YWwKICAqLwoKdmFyIGZvckVhY2ggPSBFbWJlci5F
        bnVtZXJhYmxlVXRpbHMuZm9yRWFjaCwKQlJBQ0VfRVhQQU5TSU9OID0gL14o
        KD86W15cLl0qXC4pKilceyguKilcfSQvOwoKLyoqCiAgRXhwYW5kcyBgcGF0
        dGVybmAsIGludm9raW5nIGBjYWxsYmFja2AgZm9yIGVhY2ggZXhwYW5zaW9u
        LgoKICBUaGUgb25seSBwYXR0ZXJuIHN1cHBvcnRlZCBpcyBicmFjZS1leHBh
        bnNpb24sIGFueXRoaW5nIGVsc2Ugd2lsbCBiZSBwYXNzZWQKICBvbmNlIHRv
        IGBjYWxsYmFja2AgZGlyZWN0bHkuIEJyYWNlIGV4cGFuc2lvbiBjYW4gb25s
        eSBhcHBlYXIgYXQgdGhlIGVuZCBvZiBhCiAgcGF0dGVybiwgZm9yIGV4YW1w
        bGUgYXMgdGhlIGxhc3QgaXRlbSBpbiBhIGNoYWluLgoKICBFeGFtcGxlCiAg
        YGBganMKICBmdW5jdGlvbiBlY2hvKGFyZyl7IGNvbnNvbGUubG9nKGFyZyk7
        IH0KCiAgRW1iZXIuZXhwYW5kUHJvcGVydGllcygnZm9vLmJhcicsIGVjaG8p
        OyAgICAgICAgLy89PiAnZm9vLmJhcicKICBFbWJlci5leHBhbmRQcm9wZXJ0
        aWVzKCd7Zm9vLGJhcn0nLCBlY2hvKTsgICAgICAvLz0+ICdmb28nLCAnYmFy
        JwogIEVtYmVyLmV4cGFuZFByb3BlcnRpZXMoJ2Zvby57YmFyLGJhen0nLCBl
        Y2hvKTsgIC8vPT4gJ2Zvby5iYXInLCAnZm9vLmJheicKICBFbWJlci5leHBh
        bmRQcm9wZXJ0aWVzKCd7Zm9vLGJhcn0uYmF6JywgZWNobyk7ICAvLz0+ICd7
        Zm9vLGJhcn0uYmF6JwogIGBgYAoKICBAbWV0aG9kCiAgQHByaXZhdGUKICBA
        cGFyYW0ge3N0cmluZ30gcGF0dGVybiBUaGUgcHJvcGVydHkgcGF0dGVybiB0
        byBleHBhbmQuCiAgQHBhcmFtIHtmdW5jdGlvbn0gY2FsbGJhY2sgVGhlIGNh
        bGxiYWNrIHRvIGludm9rZS4gIEl0IGlzIGludm9rZWQgb25jZSBwZXIKICBl
        eHBhbnNpb24sIGFuZCBpcyBwYXNzZWQgdGhlIGV4cGFuc2lvbi4KICAqLwpF
        bWJlci5leHBhbmRQcm9wZXJ0aWVzID0gZnVuY3Rpb24gKHBhdHRlcm4sIGNh
        bGxiYWNrKSB7CiAgdmFyIG1hdGNoLCBwcmVmaXgsIGxpc3Q7CgogIGlmICht
        YXRjaCA9IEJSQUNFX0VYUEFOU0lPTi5leGVjKHBhdHRlcm4pKSB7CiAgICBw
        cmVmaXggPSBtYXRjaFsxXTsKICAgIGxpc3QgPSBtYXRjaFsyXTsKCiAgICBm
        b3JFYWNoKGxpc3Quc3BsaXQoJywnKSwgZnVuY3Rpb24gKHN1ZmZpeCkgewog
        ICAgICBjYWxsYmFjayhwcmVmaXggKyBzdWZmaXgpOwogICAgfSk7CiAgfSBl
        bHNlIHsKICAgIGNhbGxiYWNrKHBhdHRlcm4pOwogIH0KfTsKCn0pKCk7CgoK
        CihmdW5jdGlvbigpIHsKdmFyIG1ldGFGb3IgPSBFbWJlci5tZXRhLCAvLyB1
        dGlscy5qcwogICAgdHlwZU9mID0gRW1iZXIudHlwZU9mLCAvLyB1dGlscy5q
        cwogICAgQ2hhaW5Ob2RlID0gRW1iZXIuX0NoYWluTm9kZTsgLy8gY2hhaW5z
        LmpzCgovLyBnZXQgdGhlIGNoYWlucyBmb3IgdGhlIGN1cnJlbnQgb2JqZWN0
        LiBJZiB0aGUgY3VycmVudCBvYmplY3QgaGFzCi8vIGNoYWlucyBpbmhlcml0
        ZWQgZnJvbSB0aGUgcHJvdG8gdGhleSB3aWxsIGJlIGNsb25lZCBhbmQgcmVj
        b25maWd1cmVkIGZvcgovLyB0aGUgY3VycmVudCBvYmplY3QuCmZ1bmN0aW9u
        IGNoYWluc0ZvcihvYmosIG1ldGEpIHsKICB2YXIgbSA9IG1ldGEgfHwgbWV0
        YUZvcihvYmopLCByZXQgPSBtLmNoYWluczsKICBpZiAoIXJldCkgewogICAg
        cmV0ID0gbS5jaGFpbnMgPSBuZXcgQ2hhaW5Ob2RlKG51bGwsIG51bGwsIG9i
        aik7CiAgfSBlbHNlIGlmIChyZXQudmFsdWUoKSAhPT0gb2JqKSB7CiAgICBy
        ZXQgPSBtLmNoYWlucyA9IHJldC5jb3B5KG9iaik7CiAgfQogIHJldHVybiBy
        ZXQ7Cn0KCkVtYmVyLndhdGNoUGF0aCA9IGZ1bmN0aW9uKG9iaiwga2V5UGF0
        aCwgbWV0YSkgewogIC8vIGNhbid0IHdhdGNoIGxlbmd0aCBvbiBBcnJheSAt
        IGl0IGlzIHNwZWNpYWwuLi4KICBpZiAoa2V5UGF0aCA9PT0gJ2xlbmd0aCcg
        JiYgdHlwZU9mKG9iaikgPT09ICdhcnJheScpIHsgcmV0dXJuOyB9CgogIHZh
        ciBtID0gbWV0YSB8fCBtZXRhRm9yKG9iaiksIHdhdGNoaW5nID0gbS53YXRj
        aGluZzsKCiAgaWYgKCF3YXRjaGluZ1trZXlQYXRoXSkgeyAvLyBhY3RpdmF0
        ZSB3YXRjaGluZyBmaXJzdCB0aW1lCiAgICB3YXRjaGluZ1trZXlQYXRoXSA9
        IDE7CiAgICBjaGFpbnNGb3Iob2JqLCBtKS5hZGQoa2V5UGF0aCk7CiAgfSBl
        bHNlIHsKICAgIHdhdGNoaW5nW2tleVBhdGhdID0gKHdhdGNoaW5nW2tleVBh
        dGhdIHx8IDApICsgMTsKICB9Cn07CgpFbWJlci51bndhdGNoUGF0aCA9IGZ1
        bmN0aW9uKG9iaiwga2V5UGF0aCwgbWV0YSkgewogIHZhciBtID0gbWV0YSB8
        fCBtZXRhRm9yKG9iaiksIHdhdGNoaW5nID0gbS53YXRjaGluZzsKCiAgaWYg
        KHdhdGNoaW5nW2tleVBhdGhdID09PSAxKSB7CiAgICB3YXRjaGluZ1trZXlQ
        YXRoXSA9IDA7CiAgICBjaGFpbnNGb3Iob2JqLCBtKS5yZW1vdmUoa2V5UGF0
        aCk7CiAgfSBlbHNlIGlmICh3YXRjaGluZ1trZXlQYXRoXSA+IDEpIHsKICAg
        IHdhdGNoaW5nW2tleVBhdGhdLS07CiAgfQp9Owp9KSgpOwoKCgooZnVuY3Rp
        b24oKSB7Ci8qKgpAbW9kdWxlIGVtYmVyLW1ldGFsCiovCgp2YXIgbWV0YUZv
        ciA9IEVtYmVyLm1ldGEsIC8vIHV0aWxzLmpzCiAgICBHVUlEX0tFWSA9IEVt
        YmVyLkdVSURfS0VZLCAvLyB1dGlscy5qcwogICAgTUVUQV9LRVkgPSBFbWJl
        ci5NRVRBX0tFWSwgLy8gdXRpbHMuanMKICAgIHJlbW92ZUNoYWluV2F0Y2hl
        ciA9IEVtYmVyLnJlbW92ZUNoYWluV2F0Y2hlciwKICAgIHdhdGNoS2V5ID0g
        RW1iZXIud2F0Y2hLZXksIC8vIHdhdGNoX2tleS5qcwogICAgdW53YXRjaEtl
        eSA9IEVtYmVyLnVud2F0Y2hLZXksCiAgICB3YXRjaFBhdGggPSBFbWJlci53
        YXRjaFBhdGgsIC8vIHdhdGNoX3BhdGguanMKICAgIHVud2F0Y2hQYXRoID0g
        RW1iZXIudW53YXRjaFBhdGgsCiAgICB0eXBlT2YgPSBFbWJlci50eXBlT2Ys
        IC8vIHV0aWxzLmpzCiAgICBnZW5lcmF0ZUd1aWQgPSBFbWJlci5nZW5lcmF0
        ZUd1aWQsCiAgICBJU19QQVRIID0gL1tcLlwqXS87CgovLyByZXR1cm5zIHRy
        dWUgaWYgdGhlIHBhc3NlZCBwYXRoIGlzIGp1c3QgYSBrZXlOYW1lCmZ1bmN0
        aW9uIGlzS2V5TmFtZShwYXRoKSB7CiAgcmV0dXJuIHBhdGg9PT0nKicgfHwg
        IUlTX1BBVEgudGVzdChwYXRoKTsKfQoKLyoqCiAgU3RhcnRzIHdhdGNoaW5n
        IGEgcHJvcGVydHkgb24gYW4gb2JqZWN0LiBXaGVuZXZlciB0aGUgcHJvcGVy
        dHkgY2hhbmdlcywKICBpbnZva2VzIGBFbWJlci5wcm9wZXJ0eVdpbGxDaGFu
        Z2VgIGFuZCBgRW1iZXIucHJvcGVydHlEaWRDaGFuZ2VgLiBUaGlzIGlzIHRo
        ZQogIHByaW1pdGl2ZSB1c2VkIGJ5IG9ic2VydmVycyBhbmQgZGVwZW5kZW50
        IGtleXM7IHVzdWFsbHkgeW91IHdpbGwgbmV2ZXIgY2FsbAogIHRoaXMgbWV0
        aG9kIGRpcmVjdGx5IGJ1dCBpbnN0ZWFkIHVzZSBoaWdoZXIgbGV2ZWwgbWV0
        aG9kcyBsaWtlCiAgYEVtYmVyLmFkZE9ic2VydmVyKClgCgogIEBwcml2YXRl
        CiAgQG1ldGhvZCB3YXRjaAogIEBmb3IgRW1iZXIKICBAcGFyYW0gb2JqCiAg
        QHBhcmFtIHtTdHJpbmd9IGtleU5hbWUKKi8KRW1iZXIud2F0Y2ggPSBmdW5j
        dGlvbihvYmosIF9rZXlQYXRoLCBtKSB7CiAgLy8gY2FuJ3Qgd2F0Y2ggbGVu
        Z3RoIG9uIEFycmF5IC0gaXQgaXMgc3BlY2lhbC4uLgogIGlmIChfa2V5UGF0
        aCA9PT0gJ2xlbmd0aCcgJiYgdHlwZU9mKG9iaikgPT09ICdhcnJheScpIHsg
        cmV0dXJuOyB9CgogIGlmIChpc0tleU5hbWUoX2tleVBhdGgpKSB7CiAgICB3
        YXRjaEtleShvYmosIF9rZXlQYXRoLCBtKTsKICB9IGVsc2UgewogICAgd2F0
        Y2hQYXRoKG9iaiwgX2tleVBhdGgsIG0pOwogIH0KfTsKCkVtYmVyLmlzV2F0
        Y2hpbmcgPSBmdW5jdGlvbiBpc1dhdGNoaW5nKG9iaiwga2V5KSB7CiAgdmFy
        IG1ldGEgPSBvYmpbTUVUQV9LRVldOwogIHJldHVybiAobWV0YSAmJiBtZXRh
        LndhdGNoaW5nW2tleV0pID4gMDsKfTsKCkVtYmVyLndhdGNoLmZsdXNoUGVu
        ZGluZyA9IEVtYmVyLmZsdXNoUGVuZGluZ0NoYWluczsKCkVtYmVyLnVud2F0
        Y2ggPSBmdW5jdGlvbihvYmosIF9rZXlQYXRoLCBtKSB7CiAgLy8gY2FuJ3Qg
        d2F0Y2ggbGVuZ3RoIG9uIEFycmF5IC0gaXQgaXMgc3BlY2lhbC4uLgogIGlm
        IChfa2V5UGF0aCA9PT0gJ2xlbmd0aCcgJiYgdHlwZU9mKG9iaikgPT09ICdh
        cnJheScpIHsgcmV0dXJuOyB9CgogIGlmIChpc0tleU5hbWUoX2tleVBhdGgp
        KSB7CiAgICB1bndhdGNoS2V5KG9iaiwgX2tleVBhdGgsIG0pOwogIH0gZWxz
        ZSB7CiAgICB1bndhdGNoUGF0aChvYmosIF9rZXlQYXRoLCBtKTsKICB9Cn07
        CgovKioKICBDYWxsIG9uIGFuIG9iamVjdCB3aGVuIHlvdSBmaXJzdCBiZWdl
        dCBpdCBmcm9tIGFub3RoZXIgb2JqZWN0LiBUaGlzIHdpbGwKICBzZXR1cCBh
        bnkgY2hhaW5lZCB3YXRjaGVycyBvbiB0aGUgb2JqZWN0IGluc3RhbmNlIGFz
        IG5lZWRlZC4gVGhpcyBtZXRob2QgaXMKICBzYWZlIHRvIGNhbGwgbXVsdGlw
        bGUgdGltZXMuCgogIEBwcml2YXRlCiAgQG1ldGhvZCByZXdhdGNoCiAgQGZv
        ciBFbWJlcgogIEBwYXJhbSBvYmoKKi8KRW1iZXIucmV3YXRjaCA9IGZ1bmN0
        aW9uKG9iaikgewogIHZhciBtID0gb2JqW01FVEFfS0VZXSwgY2hhaW5zID0g
        bSAmJiBtLmNoYWluczsKCiAgLy8gbWFrZSBzdXJlIHRoZSBvYmplY3QgaGFz
        IGl0cyBvd24gZ3VpZC4KICBpZiAoR1VJRF9LRVkgaW4gb2JqICYmICFvYmou
        aGFzT3duUHJvcGVydHkoR1VJRF9LRVkpKSB7CiAgICBnZW5lcmF0ZUd1aWQo
        b2JqKTsKICB9CgogIC8vIG1ha2Ugc3VyZSBhbnkgY2hhaW5lZCB3YXRjaGVy
        cyB1cGRhdGUuCiAgaWYgKGNoYWlucyAmJiBjaGFpbnMudmFsdWUoKSAhPT0g
        b2JqKSB7CiAgICBtLmNoYWlucyA9IGNoYWlucy5jb3B5KG9iaik7CiAgfQp9
        OwoKdmFyIE5PREVfU1RBQ0sgPSBbXTsKCi8qKgogIFRlYXJzIGRvd24gdGhl
        IG1ldGEgb24gYW4gb2JqZWN0IHNvIHRoYXQgaXQgY2FuIGJlIGdhcmJhZ2Ug
        Y29sbGVjdGVkLgogIE11bHRpcGxlIGNhbGxzIHdpbGwgaGF2ZSBubyBlZmZl
        Y3QuCgogIEBtZXRob2QgZGVzdHJveQogIEBmb3IgRW1iZXIKICBAcGFyYW0g
        e09iamVjdH0gb2JqICB0aGUgb2JqZWN0IHRvIGRlc3Ryb3kKICBAcmV0dXJu
        IHt2b2lkfQoqLwpFbWJlci5kZXN0cm95ID0gZnVuY3Rpb24gKG9iaikgewog
        IHZhciBtZXRhID0gb2JqW01FVEFfS0VZXSwgbm9kZSwgbm9kZXMsIGtleSwg
        bm9kZU9iamVjdDsKICBpZiAobWV0YSkgewogICAgb2JqW01FVEFfS0VZXSA9
        IG51bGw7CiAgICAvLyByZW1vdmUgY2hhaW5XYXRjaGVycyB0byByZW1vdmUg
        Y2lyY3VsYXIgcmVmZXJlbmNlcyB0aGF0IHdvdWxkIHByZXZlbnQgR0MKICAg
        IG5vZGUgPSBtZXRhLmNoYWluczsKICAgIGlmIChub2RlKSB7CiAgICAgIE5P
        REVfU1RBQ0sucHVzaChub2RlKTsKICAgICAgLy8gcHJvY2VzcyB0cmVlCiAg
        ICAgIHdoaWxlIChOT0RFX1NUQUNLLmxlbmd0aCA+IDApIHsKICAgICAgICBu
        b2RlID0gTk9ERV9TVEFDSy5wb3AoKTsKICAgICAgICAvLyBwdXNoIGNoaWxk
        cmVuCiAgICAgICAgbm9kZXMgPSBub2RlLl9jaGFpbnM7CiAgICAgICAgaWYg
        KG5vZGVzKSB7CiAgICAgICAgICBmb3IgKGtleSBpbiBub2RlcykgewogICAg
        ICAgICAgICBpZiAobm9kZXMuaGFzT3duUHJvcGVydHkoa2V5KSkgewogICAg
        ICAgICAgICAgIE5PREVfU1RBQ0sucHVzaChub2Rlc1trZXldKTsKICAgICAg
        ICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICAvLyByZW1v
        dmUgY2hhaW5XYXRjaGVyIGluIG5vZGUgb2JqZWN0CiAgICAgICAgaWYgKG5v
        ZGUuX3dhdGNoaW5nKSB7CiAgICAgICAgICBub2RlT2JqZWN0ID0gbm9kZS5f
        b2JqZWN0OwogICAgICAgICAgaWYgKG5vZGVPYmplY3QpIHsKICAgICAgICAg
        ICAgcmVtb3ZlQ2hhaW5XYXRjaGVyKG5vZGVPYmplY3QsIG5vZGUuX2tleSwg
        bm9kZSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9CiAg
        fQp9OwoKfSkoKTsKCgoKKGZ1bmN0aW9uKCkgewovKioKQG1vZHVsZSBlbWJl
        ci1tZXRhbAoqLwoKRW1iZXIud2FybigiVGhlIENQX0RFRkFVTFRfQ0FDSEVB
        QkxFIGZsYWcgaGFzIGJlZW4gcmVtb3ZlZCBhbmQgY29tcHV0ZWQgcHJvcGVy
        dGllcyBhcmUgYWx3YXlzIGNhY2hlZCBieSBkZWZhdWx0LiBVc2UgYHZvbGF0
        aWxlYCBpZiB5b3UgZG9uJ3Qgd2FudCBjYWNoaW5nLiIsIEVtYmVyLkVOVi5D
        UF9ERUZBVUxUX0NBQ0hFQUJMRSAhPT0gZmFsc2UpOwoKCnZhciBnZXQgPSBF
        bWJlci5nZXQsCiAgICBzZXQgPSBFbWJlci5zZXQsCiAgICBtZXRhRm9yID0g
        RW1iZXIubWV0YSwKICAgIGFfc2xpY2UgPSBbXS5zbGljZSwKICAgIG9fY3Jl
        YXRlID0gRW1iZXIuY3JlYXRlLAogICAgTUVUQV9LRVkgPSBFbWJlci5NRVRB
        X0tFWSwKICAgIHdhdGNoID0gRW1iZXIud2F0Y2gsCiAgICB1bndhdGNoID0g
        RW1iZXIudW53YXRjaDsKCnZhciBleHBhbmRQcm9wZXJ0aWVzID0gRW1iZXIu
        ZXhwYW5kUHJvcGVydGllczsKCgovLyAuLi4uLi4uLi4uLi4uLi4uLi4uLi4u
        Li4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uCi8vIERFUEVO
        REVOVCBLRVlTCi8vCgovLyBkYXRhIHN0cnVjdHVyZToKLy8gIG1ldGEuZGVw
        cyA9IHsKLy8gICAnZGVwS2V5JzogewovLyAgICAgJ2tleU5hbWUnOiBjb3Vu
        dCwKLy8gICB9Ci8vICB9CgovKgogIFRoaXMgZnVuY3Rpb24gcmV0dXJucyBh
        IG1hcCBvZiB1bmlxdWUgZGVwZW5kZW5jaWVzIGZvciBhCiAgZ2l2ZW4gb2Jq
        ZWN0IGFuZCBrZXkuCiovCmZ1bmN0aW9uIGtleXNGb3JEZXAoZGVwc01ldGEs
        IGRlcEtleSkgewogIHZhciBrZXlzID0gZGVwc01ldGFbZGVwS2V5XTsKICBp
        ZiAoIWtleXMpIHsKICAgIC8vIGlmIHRoZXJlIGFyZSBubyBkZXBlbmRlbmNp
        ZXMgeWV0IGZvciBhIHRoZSBnaXZlbiBrZXkKICAgIC8vIGNyZWF0ZSBhIG5l
        dyBlbXB0eSBsaXN0IG9mIGRlcGVuZGVuY2llcyBmb3IgdGhlIGtleQogICAg
        a2V5cyA9IGRlcHNNZXRhW2RlcEtleV0gPSB7fTsKICB9IGVsc2UgaWYgKCFk
        ZXBzTWV0YS5oYXNPd25Qcm9wZXJ0eShkZXBLZXkpKSB7CiAgICAvLyBvdGhl
        cndpc2UgaWYgdGhlIGRlcGVuZGVuY3kgbGlzdCBpcyBpbmhlcml0ZWQgZnJv
        bQogICAgLy8gYSBzdXBlcmNsYXNzLCBjbG9uZSB0aGUgaGFzaAogICAga2V5
        cyA9IGRlcHNNZXRhW2RlcEtleV0gPSBvX2NyZWF0ZShrZXlzKTsKICB9CiAg
        cmV0dXJuIGtleXM7Cn0KCmZ1bmN0aW9uIG1ldGFGb3JEZXBzKG1ldGEpIHsK
        ICByZXR1cm4ga2V5c0ZvckRlcChtZXRhLCAnZGVwcycpOwp9CgpmdW5jdGlv
        biBhZGREZXBlbmRlbnRLZXlzKGRlc2MsIG9iaiwga2V5TmFtZSwgbWV0YSkg
        ewogIC8vIHRoZSBkZXNjcmlwdG9yIGhhcyBhIGxpc3Qgb2YgZGVwZW5kZW50
        IGtleXMsIHNvCiAgLy8gYWRkIGFsbCBvZiBpdHMgZGVwZW5kZW50IGtleXMu
        CiAgdmFyIGRlcEtleXMgPSBkZXNjLl9kZXBlbmRlbnRLZXlzLCBkZXBzTWV0
        YSwgaWR4LCBsZW4sIGRlcEtleSwga2V5czsKICBpZiAoIWRlcEtleXMpIHJl
        dHVybjsKCiAgZGVwc01ldGEgPSBtZXRhRm9yRGVwcyhtZXRhKTsKCiAgZm9y
        KGlkeCA9IDAsIGxlbiA9IGRlcEtleXMubGVuZ3RoOyBpZHggPCBsZW47IGlk
        eCsrKSB7CiAgICBkZXBLZXkgPSBkZXBLZXlzW2lkeF07CiAgICAvLyBMb29r
        dXAga2V5cyBtZXRhIGZvciBkZXBLZXkKICAgIGtleXMgPSBrZXlzRm9yRGVw
        KGRlcHNNZXRhLCBkZXBLZXkpOwogICAgLy8gSW5jcmVtZW50IHRoZSBudW1i
        ZXIgb2YgdGltZXMgZGVwS2V5IGRlcGVuZHMgb24ga2V5TmFtZS4KICAgIGtl
        eXNba2V5TmFtZV0gPSAoa2V5c1trZXlOYW1lXSB8fCAwKSArIDE7CiAgICAv
        LyBXYXRjaCB0aGUgZGVwS2V5CiAgICB3YXRjaChvYmosIGRlcEtleSwgbWV0
        YSk7CiAgfQp9CgpmdW5jdGlvbiByZW1vdmVEZXBlbmRlbnRLZXlzKGRlc2Ms
        IG9iaiwga2V5TmFtZSwgbWV0YSkgewogIC8vIHRoZSBkZXNjcmlwdG9yIGhh
        cyBhIGxpc3Qgb2YgZGVwZW5kZW50IGtleXMsIHNvCiAgLy8gYWRkIGFsbCBv
        ZiBpdHMgZGVwZW5kZW50IGtleXMuCiAgdmFyIGRlcEtleXMgPSBkZXNjLl9k
        ZXBlbmRlbnRLZXlzLCBkZXBzTWV0YSwgaWR4LCBsZW4sIGRlcEtleSwga2V5
        czsKICBpZiAoIWRlcEtleXMpIHJldHVybjsKCiAgZGVwc01ldGEgPSBtZXRh
        Rm9yRGVwcyhtZXRhKTsKCiAgZm9yKGlkeCA9IDAsIGxlbiA9IGRlcEtleXMu
        bGVuZ3RoOyBpZHggPCBsZW47IGlkeCsrKSB7CiAgICBkZXBLZXkgPSBkZXBL
        ZXlzW2lkeF07CiAgICAvLyBMb29rdXAga2V5cyBtZXRhIGZvciBkZXBLZXkK
        ICAgIGtleXMgPSBrZXlzRm9yRGVwKGRlcHNNZXRhLCBkZXBLZXkpOwogICAg
        Ly8gSW5jcmVtZW50IHRoZSBudW1iZXIgb2YgdGltZXMgZGVwS2V5IGRlcGVu
        ZHMgb24ga2V5TmFtZS4KICAgIGtleXNba2V5TmFtZV0gPSAoa2V5c1trZXlO
        YW1lXSB8fCAwKSAtIDE7CiAgICAvLyBXYXRjaCB0aGUgZGVwS2V5CiAgICB1
        bndhdGNoKG9iaiwgZGVwS2V5LCBtZXRhKTsKICB9Cn0KCi8vIC4uLi4uLi4u
        Li4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4u
        Li4uLi4KLy8gQ09NUFVURUQgUFJPUEVSVFkKLy8KCi8qKgogIEEgY29tcHV0
        ZWQgcHJvcGVydHkgdHJhbnNmb3JtcyBhbiBvYmplY3RzIGZ1bmN0aW9uIGlu
        dG8gYSBwcm9wZXJ0eS4KCiAgQnkgZGVmYXVsdCB0aGUgZnVuY3Rpb24gYmFj
        a2luZyB0aGUgY29tcHV0ZWQgcHJvcGVydHkgd2lsbCBvbmx5IGJlIGNhbGxl
        ZAogIG9uY2UgYW5kIHRoZSByZXN1bHQgd2lsbCBiZSBjYWNoZWQuIFlvdSBj
        YW4gc3BlY2lmeSB2YXJpb3VzIHByb3BlcnRpZXMKICB0aGF0IHlvdXIgY29t
        cHV0ZWQgcHJvcGVydHkgaXMgZGVwZW5kZW50IG9uLiBUaGlzIHdpbGwgZm9y
        Y2UgdGhlIGNhY2hlZAogIHJlc3VsdCB0byBiZSByZWNvbXB1dGVkIGlmIHRo
        ZSBkZXBlbmRlbmNpZXMgYXJlIG1vZGlmaWVkLgoKICBJbiB0aGUgZm9sbG93
        aW5nIGV4YW1wbGUgd2UgZGVjbGFyZSBhIGNvbXB1dGVkIHByb3BlcnR5IChi
        eSBjYWxsaW5nCiAgYC5wcm9wZXJ0eSgpYCBvbiB0aGUgZnVsbE5hbWUgZnVu
        Y3Rpb24pIGFuZCBzZXR1cCB0aGUgcHJvcGVydGllcwogIGRlcGVuZGVuY2ll
        cyAoZGVwZW5kaW5nIG9uIGZpcnN0TmFtZSBhbmQgbGFzdE5hbWUpLiBUaGUg
        ZnVsbE5hbWUgZnVuY3Rpb24KICB3aWxsIGJlIGNhbGxlZCBvbmNlIChyZWdh
        cmRsZXNzIG9mIGhvdyBtYW55IHRpbWVzIGl0IGlzIGFjY2Vzc2VkKSBhcyBs
        b25nCiAgYXMgaXQncyBkZXBlbmRlbmNpZXMgaGF2ZSBub3QgYmVlbiBjaGFu
        Z2VkLiBPbmNlIGZpcnN0TmFtZSBvciBsYXN0TmFtZSBhcmUgdXBkYXRlZAog
        IGFueSBmdXR1cmUgY2FsbHMgKG9yIGFueXRoaW5nIGJvdW5kKSB0byBmdWxs
        TmFtZSB3aWxsIGluY29ycG9yYXRlIHRoZSBuZXcKICB2YWx1ZXMuCgogIGBg
        YGphdmFzY3JpcHQKICBQZXJzb24gPSBFbWJlci5PYmplY3QuZXh0ZW5kKHsK
        ICAgIC8vIHRoZXNlIHdpbGwgYmUgc3VwcGxpZWQgYnkgYGNyZWF0ZWAKICAg
        IGZpcnN0TmFtZTogbnVsbCwKICAgIGxhc3ROYW1lOiBudWxsLAoKICAgIGZ1
        bGxOYW1lOiBmdW5jdGlvbigpIHsKICAgICAgdmFyIGZpcnN0TmFtZSA9IHRo
        aXMuZ2V0KCdmaXJzdE5hbWUnKTsKICAgICAgdmFyIGxhc3ROYW1lID0gdGhp
        cy5nZXQoJ2xhc3ROYW1lJyk7CgogICAgIHJldHVybiBmaXJzdE5hbWUgKyAn
        ICcgKyBsYXN0TmFtZTsKICAgIH0ucHJvcGVydHkoJ2ZpcnN0TmFtZScsICds
        YXN0TmFtZScpCiAgfSk7CgogIHZhciB0b20gPSBQZXJzb24uY3JlYXRlKHsK
        ICAgIGZpcnN0TmFtZTogIlRvbSIsCiAgICBsYXN0TmFtZTogIkRhbGUiCiAg
        fSk7CgogIHRvbS5nZXQoJ2Z1bGxOYW1lJykgLy8gIlRvbSBEYWxlIgogIGBg
        YAoKICBZb3UgY2FuIGFsc28gZGVmaW5lIHdoYXQgRW1iZXIgc2hvdWxkIGRv
        IHdoZW4gc2V0dGluZyBhIGNvbXB1dGVkIHByb3BlcnR5LgogIElmIHlvdSB0
        cnkgdG8gc2V0IGEgY29tcHV0ZWQgcHJvcGVydHksIGl0IHdpbGwgYmUgaW52
        b2tlZCB3aXRoIHRoZSBrZXkgYW5kCiAgdmFsdWUgeW91IHdhbnQgdG8gc2V0
        IGl0IHRvLiBZb3UgY2FuIGFsc28gYWNjZXB0IHRoZSBwcmV2aW91cyB2YWx1
        ZSBhcyB0aGUKICB0aGlyZCBwYXJhbWV0ZXIuCgogIGBgYGphdmFzY3JpcHQK
        CiBQZXJzb24gPSBFbWJlci5PYmplY3QuZXh0ZW5kKHsKICAgIC8vIHRoZXNl
        IHdpbGwgYmUgc3VwcGxpZWQgYnkgYGNyZWF0ZWAKICAgIGZpcnN0TmFtZTog
        bnVsbCwKICAgIGxhc3ROYW1lOiBudWxsLAoKICAgIGZ1bGxOYW1lOiBmdW5j
        dGlvbihrZXksIHZhbHVlLCBvbGRWYWx1ZSkgewogICAgICAvLyBnZXR0ZXIK
        ICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDEpIHsKICAgICAgICB2
        YXIgZmlyc3ROYW1lID0gdGhpcy5nZXQoJ2ZpcnN0TmFtZScpOwogICAgICAg
        IHZhciBsYXN0TmFtZSA9IHRoaXMuZ2V0KCdsYXN0TmFtZScpOwoKICAgICAg
        ICByZXR1cm4gZmlyc3ROYW1lICsgJyAnICsgbGFzdE5hbWU7CgogICAgICAv
        LyBzZXR0ZXIKICAgICAgfSBlbHNlIHsKICAgICAgICB2YXIgbmFtZSA9IHZh
        bHVlLnNwbGl0KCIgIik7CgogICAgICAgIHRoaXMuc2V0KCdmaXJzdE5hbWUn
        LCBuYW1lWzBdKTsKICAgICAgICB0aGlzLnNldCgnbGFzdE5hbWUnLCBuYW1l
        WzFdKTsKCiAgICAgICAgcmV0dXJuIHZhbHVlOwogICAgICB9CiAgICB9LnBy
        b3BlcnR5KCdmaXJzdE5hbWUnLCAnbGFzdE5hbWUnKQogIH0pOwoKICB2YXIg
        cGVyc29uID0gUGVyc29uLmNyZWF0ZSgpOwogIHBlcnNvbi5zZXQoJ2Z1bGxO
        YW1lJywgIlBldGVyIFdhZ2VuZXQiKTsKICBwZXJzb24uZ2V0KCdmaXJzdE5h
        bWUnKSAvLyBQZXRlcgogIHBlcnNvbi5nZXQoJ2xhc3ROYW1lJykgLy8gV2Fn
        ZW5ldAogIGBgYAoKICBAY2xhc3MgQ29tcHV0ZWRQcm9wZXJ0eQogIEBuYW1l
        c3BhY2UgRW1iZXIKICBAZXh0ZW5kcyBFbWJlci5EZXNjcmlwdG9yCiAgQGNv
        bnN0cnVjdG9yCiovCmZ1bmN0aW9uIENvbXB1dGVkUHJvcGVydHkoZnVuYywg
        b3B0cykgewogIHRoaXMuZnVuYyA9IGZ1bmM7CiAgaWYgKEVtYmVyLkZFQVRV
        UkVTLmlzRW5hYmxlZCgnY29tcG9zYWJsZS1jb21wdXRlZC1wcm9wZXJ0aWVz
        JykpIHsKICAgIHNldERlcGVuZGVudEtleXModGhpcywgb3B0cyAmJiBvcHRz
        LmRlcGVuZGVudEtleXMpOwogIH0gZWxzZSB7CiAgICB0aGlzLl9kZXBlbmRl
        bnRLZXlzID0gb3B0cyAmJiBvcHRzLmRlcGVuZGVudEtleXM7CiAgfQoKICB0
        aGlzLl9jYWNoZWFibGUgPSAob3B0cyAmJiBvcHRzLmNhY2hlYWJsZSAhPT0g
        dW5kZWZpbmVkKSA/IG9wdHMuY2FjaGVhYmxlIDogdHJ1ZTsKICB0aGlzLl9y
        ZWFkT25seSA9IG9wdHMgJiYgKG9wdHMucmVhZE9ubHkgIT09IHVuZGVmaW5l
        ZCB8fCAhIW9wdHMucmVhZE9ubHkpOwp9CgpFbWJlci5Db21wdXRlZFByb3Bl
        cnR5ID0gQ29tcHV0ZWRQcm9wZXJ0eTsKCkNvbXB1dGVkUHJvcGVydHkucHJv
        dG90eXBlID0gbmV3IEVtYmVyLkRlc2NyaXB0b3IoKTsKCnZhciBDb21wdXRl
        ZFByb3BlcnR5UHJvdG90eXBlID0gQ29tcHV0ZWRQcm9wZXJ0eS5wcm90b3R5
        cGU7CkNvbXB1dGVkUHJvcGVydHlQcm90b3R5cGUuX2RlcGVuZGVudEtleXMg
        PSB1bmRlZmluZWQ7CkNvbXB1dGVkUHJvcGVydHlQcm90b3R5cGUuX3N1c3Bl
        bmRlZCA9IHVuZGVmaW5lZDsKQ29tcHV0ZWRQcm9wZXJ0eVByb3RvdHlwZS5f
        bWV0YSA9IHVuZGVmaW5lZDsKCmlmIChFbWJlci5GRUFUVVJFUy5pc0VuYWJs
        ZWQoJ2NvbXBvc2FibGUtY29tcHV0ZWQtcHJvcGVydGllcycpKSB7CiAgQ29t
        cHV0ZWRQcm9wZXJ0eVByb3RvdHlwZS5fZGVwZW5kZW50Q1BzID0gdW5kZWZp
        bmVkOwogIENvbXB1dGVkUHJvcGVydHlQcm90b3R5cGUuaW1wbGljaXRDUEtl
        eSA9IHVuZGVmaW5lZDsKCiAgQ29tcHV0ZWRQcm9wZXJ0eVByb3RvdHlwZS50
        b1N0cmluZyA9IGZ1bmN0aW9uKCkgewogICAgaWYgKHRoaXMuaW1wbGljaXRD
        UEtleSkgewogICAgICByZXR1cm4gdGhpcy5pbXBsaWNpdENQS2V5OwogICAg
        fQogICAgcmV0dXJuIEVtYmVyLkRlc2NyaXB0b3IucHJvdG90eXBlLnRvU3Ry
        aW5nLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgfTsKfQoKLyoqCiAgUHJv
        cGVydGllcyBhcmUgY2FjaGVhYmxlIGJ5IGRlZmF1bHQuIENvbXB1dGVkIHBy
        b3BlcnR5IHdpbGwgYXV0b21hdGljYWxseQogIGNhY2hlIHRoZSByZXR1cm4g
        dmFsdWUgb2YgeW91ciBmdW5jdGlvbiB1bnRpbCBvbmUgb2YgdGhlIGRlcGVu
        ZGVudCBrZXlzIGNoYW5nZXMuCgogIENhbGwgYHZvbGF0aWxlKClgIHRvIHNl
        dCBpdCBpbnRvIG5vbi1jYWNoZWQgbW9kZS4gV2hlbiBpbiB0aGlzIG1vZGUK
        ICB0aGUgY29tcHV0ZWQgcHJvcGVydHkgd2lsbCBub3QgYXV0b21hdGljYWxs
        eSBjYWNoZSB0aGUgcmV0dXJuIHZhbHVlLgoKICBIb3dldmVyLCBpZiBhIHBy
        b3BlcnR5IGlzIHByb3Blcmx5IG9ic2VydmFibGUsIHRoZXJlIGlzIG5vIHJl
        YXNvbiB0byBkaXNhYmxlCiAgY2FjaGluZy4KCiAgQG1ldGhvZCBjYWNoZWFi
        bGUKICBAcGFyYW0ge0Jvb2xlYW59IGFGbGFnIG9wdGlvbmFsIHNldCB0byBg
        ZmFsc2VgIHRvIGRpc2FibGUgY2FjaGluZwogIEByZXR1cm4ge0VtYmVyLkNv
        bXB1dGVkUHJvcGVydHl9IHRoaXMKICBAY2hhaW5hYmxlCiovCkNvbXB1dGVk
        UHJvcGVydHlQcm90b3R5cGUuY2FjaGVhYmxlID0gZnVuY3Rpb24oYUZsYWcp
        IHsKICB0aGlzLl9jYWNoZWFibGUgPSBhRmxhZyAhPT0gZmFsc2U7CiAgcmV0
        dXJuIHRoaXM7Cn07CgovKioKICBDYWxsIG9uIGEgY29tcHV0ZWQgcHJvcGVy
        dHkgdG8gc2V0IGl0IGludG8gbm9uLWNhY2hlZCBtb2RlLiBXaGVuIGluIHRo
        aXMKICBtb2RlIHRoZSBjb21wdXRlZCBwcm9wZXJ0eSB3aWxsIG5vdCBhdXRv
        bWF0aWNhbGx5IGNhY2hlIHRoZSByZXR1cm4gdmFsdWUuCgogIGBgYGphdmFz
        Y3JpcHQKICBNeUFwcC5vdXRzaWRlU2VydmljZSA9IEVtYmVyLk9iamVjdC5l
        eHRlbmQoewogICAgdmFsdWU6IGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4g
        T3V0c2lkZVNlcnZpY2UuZ2V0VmFsdWUoKTsKICAgIH0ucHJvcGVydHkoKS52
        b2xhdGlsZSgpCiAgfSkuY3JlYXRlKCk7CiAgYGBgCgogIEBtZXRob2Qgdm9s
        YXRpbGUKICBAcmV0dXJuIHtFbWJlci5Db21wdXRlZFByb3BlcnR5fSB0aGlz
        CiAgQGNoYWluYWJsZQoqLwpDb21wdXRlZFByb3BlcnR5UHJvdG90eXBlLnZv
        bGF0aWxlID0gZnVuY3Rpb24oKSB7CiAgcmV0dXJuIHRoaXMuY2FjaGVhYmxl
        KGZhbHNlKTsKfTsKCi8qKgogIENhbGwgb24gYSBjb21wdXRlZCBwcm9wZXJ0
        eSB0byBzZXQgaXQgaW50byByZWFkLW9ubHkgbW9kZS4gV2hlbiBpbiB0aGlz
        CiAgbW9kZSB0aGUgY29tcHV0ZWQgcHJvcGVydHkgd2lsbCB0aHJvdyBhbiBl
        cnJvciB3aGVuIHNldC4KCiAgYGBgamF2YXNjcmlwdAogIE15QXBwLlBlcnNv
        biA9IEVtYmVyLk9iamVjdC5leHRlbmQoewogICAgZ3VpZDogZnVuY3Rpb24o
        KSB7CiAgICAgIHJldHVybiAnZ3VpZC1ndWlkLWd1aWQnOwogICAgfS5wcm9w
        ZXJ0eSgpLnJlYWRPbmx5KCkKICB9KTsKCiAgTXlBcHAucGVyc29uID0gTXlB
        cHAuUGVyc29uLmNyZWF0ZSgpOwoKICBNeUFwcC5wZXJzb24uc2V0KCdndWlk
        JywgJ25ldy1ndWlkJyk7IC8vIHdpbGwgdGhyb3cgYW4gZXhjZXB0aW9uCiAg
        YGBgCgogIEBtZXRob2QgcmVhZE9ubHkKICBAcmV0dXJuIHtFbWJlci5Db21w
        dXRlZFByb3BlcnR5fSB0aGlzCiAgQGNoYWluYWJsZQoqLwpDb21wdXRlZFBy
        b3BlcnR5UHJvdG90eXBlLnJlYWRPbmx5ID0gZnVuY3Rpb24ocmVhZE9ubHkp
        IHsKICB0aGlzLl9yZWFkT25seSA9IHJlYWRPbmx5ID09PSB1bmRlZmluZWQg
        fHwgISFyZWFkT25seTsKICByZXR1cm4gdGhpczsKfTsKCi8qKgogIFNldHMg
        dGhlIGRlcGVuZGVudCBrZXlzIG9uIHRoaXMgY29tcHV0ZWQgcHJvcGVydHku
        IFBhc3MgYW55IG51bWJlciBvZgogIGFyZ3VtZW50cyBjb250YWluaW5nIGtl
        eSBwYXRocyB0aGF0IHRoaXMgY29tcHV0ZWQgcHJvcGVydHkgZGVwZW5kcyBv
        bi4KCiAgYGBgamF2YXNjcmlwdAogIE15QXBwLlByZXNpZGVudCA9IEVtYmVy
        Lk9iamVjdC5leHRlbmQoewogICAgZnVsbE5hbWU6IEVtYmVyLmNvbXB1dGVk
        KGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gdGhpcy5nZXQoJ2ZpcnN0TmFt
        ZScpICsgJyAnICsgdGhpcy5nZXQoJ2xhc3ROYW1lJyk7CgogICAgICAvLyBU
        ZWxsIEVtYmVyIHRoYXQgdGhpcyBjb21wdXRlZCBwcm9wZXJ0eSBkZXBlbmRz
        IG9uIGZpcnN0TmFtZQogICAgICAvLyBhbmQgbGFzdE5hbWUKICAgIH0pLnBy
        b3BlcnR5KCdmaXJzdE5hbWUnLCAnbGFzdE5hbWUnKQogIH0pOwoKICBNeUFw
        cC5wcmVzaWRlbnQgPSBNeUFwcC5QcmVzaWRlbnQuY3JlYXRlKHsKICAgIGZp
        cnN0TmFtZTogJ0JhcmFjaycsCiAgICBsYXN0TmFtZTogJ09iYW1hJywKICB9
        KTsKICBNeUFwcC5wcmVzaWRlbnQuZ2V0KCdmdWxsTmFtZScpOyAvLyBCYXJh
        Y2sgT2JhbWEKICBgYGAKCiAgQG1ldGhvZCBwcm9wZXJ0eQogIEBwYXJhbSB7
        U3RyaW5nfSBwYXRoKiB6ZXJvIG9yIG1vcmUgcHJvcGVydHkgcGF0aHMKICBA
        cmV0dXJuIHtFbWJlci5Db21wdXRlZFByb3BlcnR5fSB0aGlzCiAgQGNoYWlu
        YWJsZQoqLwpDb21wdXRlZFByb3BlcnR5UHJvdG90eXBlLnByb3BlcnR5ID0g
        ZnVuY3Rpb24oKSB7CiAgdmFyIGFyZ3M7CgogIHZhciBhZGRBcmcgPSBmdW5j
        dGlvbiAocHJvcGVydHkpIHsKICAgIGFyZ3MucHVzaChwcm9wZXJ0eSk7CiAg
        fTsKCiAgYXJncyA9IFtdOwogIGZvciAodmFyIGkgPSAwLCBsID0gYXJndW1l
        bnRzLmxlbmd0aDsgaSA8IGw7IGkrKykgewogICAgZXhwYW5kUHJvcGVydGll
        cyhhcmd1bWVudHNbaV0sIGFkZEFyZyk7CiAgfQoKICBpZiAoRW1iZXIuRkVB
        VFVSRVMuaXNFbmFibGVkKCdjb21wb3NhYmxlLWNvbXB1dGVkLXByb3BlcnRp
        ZXMnKSkgewogICAgc2V0RGVwZW5kZW50S2V5cyh0aGlzLCBhcmdzKTsKICB9
        IGVsc2UgewogICAgdGhpcy5fZGVwZW5kZW50S2V5cyA9IGFyZ3M7CiAgfQoK
        ICByZXR1cm4gdGhpczsKfTsKCi8qKgogIEluIHNvbWUgY2FzZXMsIHlvdSBt
        YXkgd2FudCB0byBhbm5vdGF0ZSBjb21wdXRlZCBwcm9wZXJ0aWVzIHdpdGgg
        YWRkaXRpb25hbAogIG1ldGFkYXRhIGFib3V0IGhvdyB0aGV5IGZ1bmN0aW9u
        IG9yIHdoYXQgdmFsdWVzIHRoZXkgb3BlcmF0ZSBvbi4gRm9yIGV4YW1wbGUs
        CiAgY29tcHV0ZWQgcHJvcGVydHkgZnVuY3Rpb25zIG1heSBjbG9zZSBvdmVy
        IHZhcmlhYmxlcyB0aGF0IGFyZSB0aGVuIG5vIGxvbmdlcgogIGF2YWlsYWJs
        ZSBmb3IgaW50cm9zcGVjdGlvbi4KCiAgWW91IGNhbiBwYXNzIGEgaGFzaCBv
        ZiB0aGVzZSB2YWx1ZXMgdG8gYSBjb21wdXRlZCBwcm9wZXJ0eSBsaWtlIHRo
        aXM6CgogIGBgYAogIHBlcnNvbjogZnVuY3Rpb24oKSB7CiAgICB2YXIgcGVy
        c29uSWQgPSB0aGlzLmdldCgncGVyc29uSWQnKTsKICAgIHJldHVybiBBcHAu
        UGVyc29uLmNyZWF0ZSh7IGlkOiBwZXJzb25JZCB9KTsKICB9LnByb3BlcnR5
        KCkubWV0YSh7IHR5cGU6IEFwcC5QZXJzb24gfSkKICBgYGAKCiAgVGhlIGhh
        c2ggdGhhdCB5b3UgcGFzcyB0byB0aGUgYG1ldGEoKWAgZnVuY3Rpb24gd2ls
        bCBiZSBzYXZlZCBvbiB0aGUKICBjb21wdXRlZCBwcm9wZXJ0eSBkZXNjcmlw
        dG9yIHVuZGVyIHRoZSBgX21ldGFgIGtleS4gRW1iZXIgcnVudGltZQogIGV4
        cG9zZXMgYSBwdWJsaWMgQVBJIGZvciByZXRyaWV2aW5nIHRoZXNlIHZhbHVl
        cyBmcm9tIGNsYXNzZXMsCiAgdmlhIHRoZSBgbWV0YUZvclByb3BlcnR5KClg
        IGZ1bmN0aW9uLgoKICBAbWV0aG9kIG1ldGEKICBAcGFyYW0ge0hhc2h9IG1l
        dGEKICBAY2hhaW5hYmxlCiovCgpDb21wdXRlZFByb3BlcnR5UHJvdG90eXBl
        Lm1ldGEgPSBmdW5jdGlvbihtZXRhKSB7CiAgaWYgKGFyZ3VtZW50cy5sZW5n
        dGggPT09IDApIHsKICAgIHJldHVybiB0aGlzLl9tZXRhIHx8IHt9OwogIH0g
        ZWxzZSB7CiAgICB0aGlzLl9tZXRhID0gbWV0YTsKICAgIHJldHVybiB0aGlz
        OwogIH0KfTsKCi8qIGltcGwgZGVzY3JpcHRvciBBUEkgKi8KQ29tcHV0ZWRQ
        cm9wZXJ0eVByb3RvdHlwZS5kaWRDaGFuZ2UgPSBmdW5jdGlvbihvYmosIGtl
        eU5hbWUpIHsKICAvLyBfc3VzcGVuZGVkIGlzIHNldCB2aWEgYSBDUC5zZXQg
        dG8gZW5zdXJlIHdlIGRvbid0IGNsZWFyCiAgLy8gdGhlIGNhY2hlZCB2YWx1
        ZSBzZXQgYnkgdGhlIHNldHRlcgogIGlmICh0aGlzLl9jYWNoZWFibGUgJiYg
        dGhpcy5fc3VzcGVuZGVkICE9PSBvYmopIHsKICAgIHZhciBtZXRhID0gbWV0
        YUZvcihvYmopOwogICAgaWYgKGtleU5hbWUgaW4gbWV0YS5jYWNoZSkgewog
        ICAgICBkZWxldGUgbWV0YS5jYWNoZVtrZXlOYW1lXTsKICAgICAgcmVtb3Zl
        RGVwZW5kZW50S2V5cyh0aGlzLCBvYmosIGtleU5hbWUsIG1ldGEpOwogICAg
        fQogIH0KfTsKCmZ1bmN0aW9uIGZpbmlzaENoYWlucyhjaGFpbk5vZGVzKQp7
        CiAgZm9yICh2YXIgaT0wLCBsPWNoYWluTm9kZXMubGVuZ3RoOyBpPGw7IGkr
        KykgewogICAgY2hhaW5Ob2Rlc1tpXS5kaWRDaGFuZ2UobnVsbCk7CiAgfQp9
        CgovKioKICBBY2Nlc3MgdGhlIHZhbHVlIG9mIHRoZSBmdW5jdGlvbiBiYWNr
        aW5nIHRoZSBjb21wdXRlZCBwcm9wZXJ0eS4KICBJZiB0aGlzIHByb3BlcnR5
        IGhhcyBhbHJlYWR5IGJlZW4gY2FjaGVkLCByZXR1cm4gdGhlIGNhY2hlZCBy
        ZXN1bHQuCiAgT3RoZXJ3aXNlLCBjYWxsIHRoZSBmdW5jdGlvbiBwYXNzaW5n
        IHRoZSBwcm9wZXJ0eSBuYW1lIGFzIGFuIGFyZ3VtZW50LgoKICBgYGBqYXZh
        c2NyaXB0CiAgUGVyc29uID0gRW1iZXIuT2JqZWN0LmV4dGVuZCh7CiAgICBm
        dWxsTmFtZTogZnVuY3Rpb24oa2V5TmFtZSkgewogICAgICAvLyB0aGUga2V5
        TmFtZSBwYXJhbWV0ZXIgaXMgJ2Z1bGxOYW1lJyBpbiB0aGlzIGNhc2UuCgog
        ICAgICByZXR1cm4gdGhpcy5nZXQoJ2ZpcnN0TmFtZScpICsgJyAnICsgdGhp
        cy5nZXQoJ2xhc3ROYW1lJyk7CiAgICB9LnByb3BlcnR5KCdmaXJzdE5hbWUn
        LCAnbGFzdE5hbWUnKQogIH0pOwoKCiAgdmFyIHRvbSA9IFBlcnNvbi5jcmVh
        dGUoewogICAgZmlyc3ROYW1lOiAiVG9tIiwKICAgIGxhc3ROYW1lOiAiRGFs
        ZSIKICB9KTsKCiAgdG9tLmdldCgnZnVsbE5hbWUnKSAvLyAiVG9tIERhbGUi
        CiAgYGBgCgogIEBtZXRob2QgZ2V0CiAgQHBhcmFtIHtTdHJpbmd9IGtleU5h
        bWUgVGhlIGtleSBiZWluZyBhY2Nlc3NlZC4KICBAcmV0dXJuIHtPYmplY3R9
        IFRoZSByZXR1cm4gdmFsdWUgb2YgdGhlIGZ1bmN0aW9uIGJhY2tpbmcgdGhl
        IENQLgoqLwpDb21wdXRlZFByb3BlcnR5UHJvdG90eXBlLmdldCA9IGZ1bmN0
        aW9uKG9iaiwga2V5TmFtZSkgewogIHZhciByZXQsIGNhY2hlLCBtZXRhLCBj
        aGFpbk5vZGVzOwogIGlmICh0aGlzLl9jYWNoZWFibGUpIHsKICAgIG1ldGEg
        PSBtZXRhRm9yKG9iaik7CiAgICBjYWNoZSA9IG1ldGEuY2FjaGU7CiAgICBp
        ZiAoa2V5TmFtZSBpbiBjYWNoZSkgeyByZXR1cm4gY2FjaGVba2V5TmFtZV07
        IH0KICAgIHJldCA9IGNhY2hlW2tleU5hbWVdID0gdGhpcy5mdW5jLmNhbGwo
        b2JqLCBrZXlOYW1lKTsKICAgIGNoYWluTm9kZXMgPSBtZXRhLmNoYWluV2F0
        Y2hlcnMgJiYgbWV0YS5jaGFpbldhdGNoZXJzW2tleU5hbWVdOwogICAgaWYg
        KGNoYWluTm9kZXMpIHsgZmluaXNoQ2hhaW5zKGNoYWluTm9kZXMpOyB9CiAg
        ICBhZGREZXBlbmRlbnRLZXlzKHRoaXMsIG9iaiwga2V5TmFtZSwgbWV0YSk7
        CiAgfSBlbHNlIHsKICAgIHJldCA9IHRoaXMuZnVuYy5jYWxsKG9iaiwga2V5
        TmFtZSk7CiAgfQogIHJldHVybiByZXQ7Cn07CgovKioKICBTZXQgdGhlIHZh
        bHVlIG9mIGEgY29tcHV0ZWQgcHJvcGVydHkuIElmIHRoZSBmdW5jdGlvbiB0
        aGF0IGJhY2tzIHlvdXIKICBjb21wdXRlZCBwcm9wZXJ0eSBkb2VzIG5vdCBh
        Y2NlcHQgYXJndW1lbnRzIHRoZW4gdGhlIGRlZmF1bHQgYWN0aW9uIGZvcgog
        IHNldHRpbmcgd291bGQgYmUgdG8gZGVmaW5lIHRoZSBwcm9wZXJ0eSBvbiB0
        aGUgY3VycmVudCBvYmplY3QsIGFuZCBzZXQKICB0aGUgdmFsdWUgb2YgdGhl
        IHByb3BlcnR5IHRvIHRoZSB2YWx1ZSBiZWluZyBzZXQuCgogIEdlbmVyYWxs
        eSBzcGVha2luZyBpZiB5b3UgaW50ZW5kIGZvciB5b3VyIGNvbXB1dGVkIHBy
        b3BlcnR5IHRvIGJlIHNldAogIHlvdXIgYmFja2luZyBmdW5jdGlvbiBzaG91
        bGQgYWNjZXB0IGVpdGhlciB0d28gb3IgdGhyZWUgYXJndW1lbnRzLgoKICBA
        bWV0aG9kIHNldAogIEBwYXJhbSB7U3RyaW5nfSBrZXlOYW1lIFRoZSBrZXkg
        YmVpbmcgYWNjZXNzZWQuCiAgQHBhcmFtIHtPYmplY3R9IG5ld1ZhbHVlIFRo
        ZSBuZXcgdmFsdWUgYmVpbmcgYXNzaWduZWQuCiAgQHBhcmFtIHtTdHJpbmd9
        IG9sZFZhbHVlIFRoZSBvbGQgdmFsdWUgYmVpbmcgcmVwbGFjZWQuCiAgQHJl
        dHVybiB7T2JqZWN0fSBUaGUgcmV0dXJuIHZhbHVlIG9mIHRoZSBmdW5jdGlv
        biBiYWNraW5nIHRoZSBDUC4KKi8KQ29tcHV0ZWRQcm9wZXJ0eVByb3RvdHlw
        ZS5zZXQgPSBmdW5jdGlvbihvYmosIGtleU5hbWUsIHZhbHVlKSB7CiAgdmFy
        IGNhY2hlYWJsZSA9IHRoaXMuX2NhY2hlYWJsZSwKICAgICAgZnVuYyA9IHRo
        aXMuZnVuYywKICAgICAgbWV0YSA9IG1ldGFGb3Iob2JqLCBjYWNoZWFibGUp
        LAogICAgICB3YXRjaGVkID0gbWV0YS53YXRjaGluZ1trZXlOYW1lXSwKICAg
        ICAgb2xkU3VzcGVuZGVkID0gdGhpcy5fc3VzcGVuZGVkLAogICAgICBoYWRD
        YWNoZWRWYWx1ZSA9IGZhbHNlLAogICAgICBjYWNoZSA9IG1ldGEuY2FjaGUs
        CiAgICAgIGZ1bmNBcmdMZW5ndGgsIGNhY2hlZFZhbHVlLCByZXQ7CgogIGlm
        ICh0aGlzLl9yZWFkT25seSkgewogICAgdGhyb3cgbmV3IEVtYmVyLkVycm9y
        KCdDYW5ub3QgU2V0OiAnICsga2V5TmFtZSArICcgb246ICcgKyBFbWJlci5p
        bnNwZWN0KG9iaikpOwogIH0KCiAgdGhpcy5fc3VzcGVuZGVkID0gb2JqOwoK
        ICB0cnkgewoKICAgIGlmIChjYWNoZWFibGUgJiYgY2FjaGUuaGFzT3duUHJv
        cGVydHkoa2V5TmFtZSkpIHsKICAgICAgY2FjaGVkVmFsdWUgPSBjYWNoZVtr
        ZXlOYW1lXTsKICAgICAgaGFkQ2FjaGVkVmFsdWUgPSB0cnVlOwogICAgfQoK
        ICAgIC8vIENoZWNrIGlmIHRoZSBDUCBoYXMgYmVlbiB3cmFwcGVkLiBJZiBp
        ZiBoYXMsIHVzZSB0aGUKICAgIC8vIGxlbmd0aCBmcm9tIHRoZSB3cmFwcGVk
        IGZ1bmN0aW9uLgogICAgZnVuY0FyZ0xlbmd0aCA9IChmdW5jLndyYXBwZWRG
        dW5jdGlvbiA/IGZ1bmMud3JhcHBlZEZ1bmN0aW9uLmxlbmd0aCA6IGZ1bmMu
        bGVuZ3RoKTsKCiAgICAvLyBGb3IgYmFja3dhcmRzLWNvbXBhdGliaWxpdHkg
        d2l0aCBjb21wdXRlZCBwcm9wZXJ0aWVzCiAgICAvLyB0aGF0IGNoZWNrIGZv
        ciBhcmd1bWVudHMubGVuZ3RoID09PSAyIHRvIGRldGVybWluZSBpZgogICAg
        Ly8gdGhleSBhcmUgYmVpbmcgZ2V0IG9yIHNldCwgb25seSBwYXNzIHRoZSBv
        bGQgY2FjaGVkCiAgICAvLyB2YWx1ZSBpZiB0aGUgY29tcHV0ZWQgcHJvcGVy
        dHkgb3B0cyBpbnRvIGEgdGhpcmQKICAgIC8vIGFyZ3VtZW50LgogICAgaWYg
        KGZ1bmNBcmdMZW5ndGggPT09IDMpIHsKICAgICAgcmV0ID0gZnVuYy5jYWxs
        KG9iaiwga2V5TmFtZSwgdmFsdWUsIGNhY2hlZFZhbHVlKTsKICAgIH0gZWxz
        ZSBpZiAoZnVuY0FyZ0xlbmd0aCA9PT0gMikgewogICAgICByZXQgPSBmdW5j
        LmNhbGwob2JqLCBrZXlOYW1lLCB2YWx1ZSk7CiAgICB9IGVsc2UgewogICAg
        ICBFbWJlci5kZWZpbmVQcm9wZXJ0eShvYmosIGtleU5hbWUsIG51bGwsIGNh
        Y2hlZFZhbHVlKTsKICAgICAgRW1iZXIuc2V0KG9iaiwga2V5TmFtZSwgdmFs
        dWUpOwogICAgICByZXR1cm47CiAgICB9CgogICAgaWYgKGhhZENhY2hlZFZh
        bHVlICYmIGNhY2hlZFZhbHVlID09PSByZXQpIHsgcmV0dXJuOyB9CgogICAg
        aWYgKHdhdGNoZWQpIHsgRW1iZXIucHJvcGVydHlXaWxsQ2hhbmdlKG9iaiwg
        a2V5TmFtZSk7IH0KCiAgICBpZiAoaGFkQ2FjaGVkVmFsdWUpIHsKICAgICAg
        ZGVsZXRlIGNhY2hlW2tleU5hbWVdOwogICAgfQoKICAgIGlmIChjYWNoZWFi
        bGUpIHsKICAgICAgaWYgKCFoYWRDYWNoZWRWYWx1ZSkgewogICAgICAgIGFk
        ZERlcGVuZGVudEtleXModGhpcywgb2JqLCBrZXlOYW1lLCBtZXRhKTsKICAg
        ICAgfQogICAgICBjYWNoZVtrZXlOYW1lXSA9IHJldDsKICAgIH0KCiAgICBp
        ZiAod2F0Y2hlZCkgeyBFbWJlci5wcm9wZXJ0eURpZENoYW5nZShvYmosIGtl
        eU5hbWUpOyB9CiAgfSBmaW5hbGx5IHsKICAgIHRoaXMuX3N1c3BlbmRlZCA9
        IG9sZFN1c3BlbmRlZDsKICB9CiAgcmV0dXJuIHJldDsKfTsKCi8qIGNhbGxl
        ZCBiZWZvcmUgcHJvcGVydHkgaXMgb3ZlcnJpZGRlbiAqLwpDb21wdXRlZFBy
        b3BlcnR5UHJvdG90eXBlLnRlYXJkb3duID0gZnVuY3Rpb24ob2JqLCBrZXlO
        YW1lKSB7CiAgdmFyIG1ldGEgPSBtZXRhRm9yKG9iaik7CgogIGlmIChrZXlO
        YW1lIGluIG1ldGEuY2FjaGUpIHsKICAgIHJlbW92ZURlcGVuZGVudEtleXMo
        dGhpcywgb2JqLCBrZXlOYW1lLCBtZXRhKTsKICB9CgogIGlmICh0aGlzLl9j
        YWNoZWFibGUpIHsgZGVsZXRlIG1ldGEuY2FjaGVba2V5TmFtZV07IH0KCiAg
        cmV0dXJuIG51bGw7IC8vIG5vIHZhbHVlIHRvIHJlc3RvcmUKfTsKCgovKioK
        ICBUaGlzIGhlbHBlciByZXR1cm5zIGEgbmV3IHByb3BlcnR5IGRlc2NyaXB0
        b3IgdGhhdCB3cmFwcyB0aGUgcGFzc2VkCiAgY29tcHV0ZWQgcHJvcGVydHkg
        ZnVuY3Rpb24uIFlvdSBjYW4gdXNlIHRoaXMgaGVscGVyIHRvIGRlZmluZSBw
        cm9wZXJ0aWVzCiAgd2l0aCBtaXhpbnMgb3IgdmlhIGBFbWJlci5kZWZpbmVQ
        cm9wZXJ0eSgpYC4KCiAgVGhlIGZ1bmN0aW9uIHlvdSBwYXNzIHdpbGwgYmUg
        dXNlZCB0byBib3RoIGdldCBhbmQgc2V0IHByb3BlcnR5IHZhbHVlcy4KICBU
        aGUgZnVuY3Rpb24gc2hvdWxkIGFjY2VwdCB0d28gcGFyYW1ldGVycywga2V5
        IGFuZCB2YWx1ZS4gSWYgdmFsdWUgaXMgbm90CiAgdW5kZWZpbmVkIHlvdSBz
        aG91bGQgc2V0IHRoZSB2YWx1ZSBmaXJzdC4gSW4gZWl0aGVyIGNhc2UgcmV0
        dXJuIHRoZQogIGN1cnJlbnQgdmFsdWUgb2YgdGhlIHByb3BlcnR5LgogIEBt
        ZXRob2QgY29tcHV0ZWQKICBAZm9yIEVtYmVyCiAgQHBhcmFtIHtGdW5jdGlv
        bn0gZnVuYyBUaGUgY29tcHV0ZWQgcHJvcGVydHkgZnVuY3Rpb24uCiAgQHJl
        dHVybiB7RW1iZXIuQ29tcHV0ZWRQcm9wZXJ0eX0gcHJvcGVydHkgZGVzY3Jp
        cHRvciBpbnN0YW5jZQoqLwpFbWJlci5jb21wdXRlZCA9IGZ1bmN0aW9uKGZ1
        bmMpIHsKICB2YXIgYXJnczsKCiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAx
        KSB7CiAgICBhcmdzID0gYV9zbGljZS5jYWxsKGFyZ3VtZW50cywgMCwgLTEp
        OwogICAgZnVuYyA9IGFfc2xpY2UuY2FsbChhcmd1bWVudHMsIC0xKVswXTsK
        ICB9CgogIGlmICh0eXBlb2YgZnVuYyAhPT0gImZ1bmN0aW9uIikgewogICAg
        dGhyb3cgbmV3IEVtYmVyLkVycm9yKCJDb21wdXRlZCBQcm9wZXJ0eSBkZWNs
        YXJlZCB3aXRob3V0IGEgcHJvcGVydHkgZnVuY3Rpb24iKTsKICB9CgogIHZh
        ciBjcCA9IG5ldyBDb21wdXRlZFByb3BlcnR5KGZ1bmMpOwoKICBpZiAoYXJn
        cykgewogICAgY3AucHJvcGVydHkuYXBwbHkoY3AsIGFyZ3MpOwogIH0KCiAg
        cmV0dXJuIGNwOwp9OwoKLyoqCiAgUmV0dXJucyB0aGUgY2FjaGVkIHZhbHVl
        IGZvciBhIHByb3BlcnR5LCBpZiBvbmUgZXhpc3RzLgogIFRoaXMgY2FuIGJl
        IHVzZWZ1bCBmb3IgcGVla2luZyBhdCB0aGUgdmFsdWUgb2YgYSBjb21wdXRl
        ZAogIHByb3BlcnR5IHRoYXQgaXMgZ2VuZXJhdGVkIGxhemlseSwgd2l0aG91
        dCBhY2NpZGVudGFsbHkgY2F1c2luZwogIGl0IHRvIGJlIGNyZWF0ZWQuCgog
        IEBtZXRob2QgY2FjaGVGb3IKICBAZm9yIEVtYmVyCiAgQHBhcmFtIHtPYmpl
        Y3R9IG9iaiB0aGUgb2JqZWN0IHdob3NlIHByb3BlcnR5IHlvdSB3YW50IHRv
        IGNoZWNrCiAgQHBhcmFtIHtTdHJpbmd9IGtleSB0aGUgbmFtZSBvZiB0aGUg
        cHJvcGVydHkgd2hvc2UgY2FjaGVkIHZhbHVlIHlvdSB3YW50CiAgICB0byBy
        ZXR1cm4KICBAcmV0dXJuIHtPYmplY3R9IHRoZSBjYWNoZWQgdmFsdWUKKi8K
        RW1iZXIuY2FjaGVGb3IgPSBmdW5jdGlvbiBjYWNoZUZvcihvYmosIGtleSkg
        ewogIHZhciBtZXRhID0gb2JqW01FVEFfS0VZXSwKICAgICAgY2FjaGUgPSBt
        ZXRhICYmIG1ldGEuY2FjaGU7CgogIGlmIChjYWNoZSAmJiBrZXkgaW4gY2Fj
        aGUpIHsKICAgIHJldHVybiBjYWNoZVtrZXldOwogIH0KfTsKCmZ1bmN0aW9u
        IGdldFByb3BlcnRpZXMoc2VsZiwgcHJvcGVydHlOYW1lcykgewogIHZhciBy
        ZXQgPSB7fTsKICBmb3IodmFyIGkgPSAwOyBpIDwgcHJvcGVydHlOYW1lcy5s
        ZW5ndGg7IGkrKykgewogICAgcmV0W3Byb3BlcnR5TmFtZXNbaV1dID0gZ2V0
        KHNlbGYsIHByb3BlcnR5TmFtZXNbaV0pOwogIH0KICByZXR1cm4gcmV0Owp9
        Cgp2YXIgcmVnaXN0ZXJDb21wdXRlZCwgcmVnaXN0ZXJDb21wdXRlZFdpdGhQ
        cm9wZXJ0aWVzOwoKaWYgKEVtYmVyLkZFQVRVUkVTLmlzRW5hYmxlZCgnY29t
        cG9zYWJsZS1jb21wdXRlZC1wcm9wZXJ0aWVzJykpIHsKICB2YXIgZ3VpZEZv
        ciA9IEVtYmVyLmd1aWRGb3IsCiAgICAgIG1hcCA9IEVtYmVyLkVudW1lcmFi
        bGVVdGlscy5tYXAsCiAgICAgIGZpbHRlciA9IEVtYmVyLkVudW1lcmFibGVV
        dGlscy5maWx0ZXIsCiAgICAgIHR5cGVPZiA9IEVtYmVyLnR5cGVPZjsKCiAg
        dmFyIGltcGxpY2l0S2V5ID0gZnVuY3Rpb24gKGNwKSB7CiAgICByZXR1cm4g
        W2d1aWRGb3IoY3ApXS5jb25jYXQoY3AuX2RlcGVuZGVudEtleXMpLmpvaW4o
        J18nKS5yZXBsYWNlKC9cLi9nLCAnX0RPVF8nKTsKICB9OwoKICB2YXIgbm9y
        bWFsaXplRGVwZW5kZW50S2V5ID0gZnVuY3Rpb24gKGtleSkgewogICAgaWYg
        KGtleSBpbnN0YW5jZW9mIEVtYmVyLkNvbXB1dGVkUHJvcGVydHkpIHsKICAg
        ICAgcmV0dXJuIGltcGxpY2l0S2V5KGtleSk7CiAgICB9IGVsc2UgewogICAg
        ICByZXR1cm4ga2V5OwogICAgfQogIH07CgogIHZhciBub3JtYWxpemVEZXBl
        bmRlbnRLZXlzID0gZnVuY3Rpb24gKGtleXMpIHsKICAgIHJldHVybiBtYXAo
        a2V5cywgZnVuY3Rpb24gKGtleSkgewogICAgICByZXR1cm4gbm9ybWFsaXpl
        RGVwZW5kZW50S2V5KGtleSk7CiAgICB9KTsKICB9OwoKICB2YXIgc2VsZWN0
        RGVwZW5kZW50Q1BzID0gZnVuY3Rpb24gKGtleXMpIHsKICAgIHJldHVybiBm
        aWx0ZXIoa2V5cywgZnVuY3Rpb24gKGtleSkgewogICAgICByZXR1cm4ga2V5
        IGluc3RhbmNlb2YgRW1iZXIuQ29tcHV0ZWRQcm9wZXJ0eTsKICAgIH0pOwog
        IH07CgogIHZhciBzZXREZXBlbmRlbnRLZXlzID0gZnVuY3Rpb24oY3AsIGRl
        cGVuZGVudEtleXMpIHsKICAgIGlmIChkZXBlbmRlbnRLZXlzKSB7CiAgICAg
        IGNwLl9kZXBlbmRlbnRLZXlzID0gbm9ybWFsaXplRGVwZW5kZW50S2V5cyhk
        ZXBlbmRlbnRLZXlzKTsKICAgICAgY3AuX2RlcGVuZGVudENQcyA9IHNlbGVj
        dERlcGVuZGVudENQcyhkZXBlbmRlbnRLZXlzKTsKICAgIH0gZWxzZSB7CiAg
        ICAgIGNwLl9kZXBlbmRlbnRLZXlzID0gY3AuX2RlcGVuZGVudENQcyA9IFtd
        OwogICAgfQogICAgY3AuaW1wbGljaXRDUEtleSA9IGltcGxpY2l0S2V5KGNw
        KTsKICB9OwogIC8vIGV4cG9zZSBgbm9ybWFsaXplRGVwZW5kZW50S2V5W3Nd
        YCBzbyB1c2VyIENQIG1hY3JvcyBjYW4gZWFzaWx5IHN1cHBvcnQKICAvLyBj
        b21wb3NpdGlvbgogIEVtYmVyLmNvbXB1dGVkLm5vcm1hbGl6ZURlcGVuZGVu
        dEtleSA9IG5vcm1hbGl6ZURlcGVuZGVudEtleTsKICBFbWJlci5jb21wdXRl
        ZC5ub3JtYWxpemVEZXBlbmRlbnRLZXlzID0gbm9ybWFsaXplRGVwZW5kZW50
        S2V5czsKCiAgcmVnaXN0ZXJDb21wdXRlZCA9IGZ1bmN0aW9uIChuYW1lLCBt
        YWNybykgewogICAgRW1iZXIuY29tcHV0ZWRbbmFtZV0gPSBmdW5jdGlvbihk
        ZXBlbmRlbnRLZXkpIHsKICAgICAgdmFyIGFyZ3MgPSBub3JtYWxpemVEZXBl
        bmRlbnRLZXlzKGFfc2xpY2UuY2FsbChhcmd1bWVudHMpKTsKICAgICAgcmV0
        dXJuIEVtYmVyLmNvbXB1dGVkKGRlcGVuZGVudEtleSwgZnVuY3Rpb24oKSB7
        CiAgICAgICAgcmV0dXJuIG1hY3JvLmFwcGx5KHRoaXMsIGFyZ3MpOwogICAg
        ICB9KTsKICAgIH07CiAgfTsKfQoKaWYgKEVtYmVyLkZFQVRVUkVTLmlzRW5h
        YmxlZCgnY29tcG9zYWJsZS1jb21wdXRlZC1wcm9wZXJ0aWVzJykpIHsKICBy
        ZWdpc3RlckNvbXB1dGVkV2l0aFByb3BlcnRpZXMgPSBmdW5jdGlvbihuYW1l
        LCBtYWNybykgewogICAgRW1iZXIuY29tcHV0ZWRbbmFtZV0gPSBmdW5jdGlv
        bigpIHsKICAgICAgdmFyIGFyZ3MgPSBhX3NsaWNlLmNhbGwoYXJndW1lbnRz
        KTsKICAgICAgdmFyIHByb3BlcnRpZXMgPSBub3JtYWxpemVEZXBlbmRlbnRL
        ZXlzKGFyZ3MpOwoKICAgICAgdmFyIGNvbXB1dGVkID0gRW1iZXIuY29tcHV0
        ZWQoZnVuY3Rpb24oKSB7CiAgICAgICAgcmV0dXJuIG1hY3JvLmFwcGx5KHRo
        aXMsIFtnZXRQcm9wZXJ0aWVzKHRoaXMsIHByb3BlcnRpZXMpXSk7CiAgICAg
        IH0pOwoKICAgICAgcmV0dXJuIGNvbXB1dGVkLnByb3BlcnR5LmFwcGx5KGNv
        bXB1dGVkLCBhcmdzKTsKICAgIH07CiAgfTsKfSBlbHNlIHsKICByZWdpc3Rl
        ckNvbXB1dGVkID0gZnVuY3Rpb24gKG5hbWUsIG1hY3JvKSB7CiAgICBFbWJl
        ci5jb21wdXRlZFtuYW1lXSA9IGZ1bmN0aW9uKGRlcGVuZGVudEtleSkgewog
        ICAgICB2YXIgYXJncyA9IGFfc2xpY2UuY2FsbChhcmd1bWVudHMpOwogICAg
        ICByZXR1cm4gRW1iZXIuY29tcHV0ZWQoZGVwZW5kZW50S2V5LCBmdW5jdGlv
        bigpIHsKICAgICAgICByZXR1cm4gbWFjcm8uYXBwbHkodGhpcywgYXJncyk7
        CiAgICAgIH0pOwogICAgfTsKICB9OwoKICByZWdpc3RlckNvbXB1dGVkV2l0
        aFByb3BlcnRpZXMgPSBmdW5jdGlvbihuYW1lLCBtYWNybykgewogICAgRW1i
        ZXIuY29tcHV0ZWRbbmFtZV0gPSBmdW5jdGlvbigpIHsKICAgICAgdmFyIHBy
        b3BlcnRpZXMgPSBhX3NsaWNlLmNhbGwoYXJndW1lbnRzKTsKCiAgICAgIHZh
        ciBjb21wdXRlZCA9IEVtYmVyLmNvbXB1dGVkKGZ1bmN0aW9uKCkgewogICAg
        ICAgIHJldHVybiBtYWNyby5hcHBseSh0aGlzLCBbZ2V0UHJvcGVydGllcyh0
        aGlzLCBwcm9wZXJ0aWVzKV0pOwogICAgICB9KTsKCiAgICAgIHJldHVybiBj
        b21wdXRlZC5wcm9wZXJ0eS5hcHBseShjb21wdXRlZCwgcHJvcGVydGllcyk7
        CiAgICB9OwogIH07Cn0KCgppZiAoRW1iZXIuRkVBVFVSRVMuaXNFbmFibGVk
        KCdjb21wb3NhYmxlLWNvbXB1dGVkLXByb3BlcnRpZXMnKSkgewogIEVtYmVy
        LmNvbXB1dGVkLmxpdGVyYWwgPSBmdW5jdGlvbiAodmFsdWUpIHsKICAgIHJl
        dHVybiBFbWJlci5jb21wdXRlZChmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVy
        biB2YWx1ZTsKICAgIH0pOwogIH07Cn0KCgogIC8qKgogICAgQSBjb21wdXRl
        ZCBwcm9wZXJ0eSB0aGF0IHJldHVybnMgdHJ1ZSBpZiB0aGUgdmFsdWUgb2Yg
        dGhlIGRlcGVuZGVudAogICAgcHJvcGVydHkgaXMgbnVsbCwgYW4gZW1wdHkg
        c3RyaW5nLCBlbXB0eSBhcnJheSwgb3IgZW1wdHkgZnVuY3Rpb24uCgogICAg
        Tm90ZTogV2hlbiB1c2luZyBgRW1iZXIuY29tcHV0ZWQuZW1wdHlgIHRvIHdh
        dGNoIGFuIGFycmF5IG1ha2Ugc3VyZSB0bwogICAgdXNlIHRoZSBgYXJyYXku
        W11gIHN5bnRheCBzbyB0aGUgY29tcHV0ZWQgY2FuIHN1YnNjcmliZSB0byB0
        cmFuc2l0aW9ucwogICAgZnJvbSBlbXB0eSB0byBub24tZW1wdHkgc3RhdGVz
        LgoKICAgIEV4YW1wbGUKCiAgICBgYGBqYXZhc2NyaXB0CiAgICB2YXIgVG9E
        b0xpc3QgPSBFbWJlci5PYmplY3QuZXh0ZW5kKHsKICAgICAgZG9uZTogRW1i
        ZXIuY29tcHV0ZWQuZW1wdHkoJ3RvZG9zLltdJykgLy8gZGV0ZWN0IGFycmF5
        IGNoYW5nZXMKICAgIH0pOwogICAgdmFyIHRvZG9MaXN0ID0gVG9Eb0xpc3Qu
        Y3JlYXRlKHt0b2RvczogWydVbml0IFRlc3QnLCAnRG9jdW1lbnRhdGlvbics
        ICdSZWxlYXNlJ119KTsKICAgIHRvZG9MaXN0LmdldCgnZG9uZScpOyAvLyBm
        YWxzZQogICAgdG9kb0xpc3QuZ2V0KCd0b2RvcycpLmNsZWFyKCk7IC8vIFtd
        CiAgICB0b2RvTGlzdC5nZXQoJ2RvbmUnKTsgLy8gdHJ1ZQogICAgYGBgCgog
        ICAgQG1ldGhvZCBjb21wdXRlZC5lbXB0eQogICAgQGZvciBFbWJlcgogICAg
        QHBhcmFtIHtTdHJpbmd9IGRlcGVuZGVudEtleQogICAgQHJldHVybiB7RW1i
        ZXIuQ29tcHV0ZWRQcm9wZXJ0eX0gY29tcHV0ZWQgcHJvcGVydHkgd2hpY2gg
        bmVnYXRlCiAgICB0aGUgb3JpZ2luYWwgdmFsdWUgZm9yIHByb3BlcnR5CiAg
        Ki8KICByZWdpc3RlckNvbXB1dGVkKCdlbXB0eScsIGZ1bmN0aW9uKGRlcGVu
        ZGVudEtleSkgewogICAgcmV0dXJuIEVtYmVyLmlzRW1wdHkoZ2V0KHRoaXMs
        IGRlcGVuZGVudEtleSkpOwogIH0pOwoKCi8qKgogIEEgY29tcHV0ZWQgcHJv
        cGVydHkgdGhhdCByZXR1cm5zIHRydWUgaWYgdGhlIHZhbHVlIG9mIHRoZSBk
        ZXBlbmRlbnQKICBwcm9wZXJ0eSBpcyBOT1QgbnVsbCwgYW4gZW1wdHkgc3Ry
        aW5nLCBlbXB0eSBhcnJheSwgb3IgZW1wdHkgZnVuY3Rpb24uCgogIE5vdGU6
        IFdoZW4gdXNpbmcgYEVtYmVyLmNvbXB1dGVkLm5vdEVtcHR5YCB0byB3YXRj
        aCBhbiBhcnJheSBtYWtlIHN1cmUgdG8KICB1c2UgdGhlIGBhcnJheS5bXWAg
        c3ludGF4IHNvIHRoZSBjb21wdXRlZCBjYW4gc3Vic2NyaWJlIHRvIHRyYW5z
        aXRpb25zCiAgZnJvbSBlbXB0eSB0byBub24tZW1wdHkgc3RhdGVzLgoKICBF
        eGFtcGxlCgogIGBgYGphdmFzY3JpcHQKICB2YXIgSGFtc3RlciA9IEVtYmVy
        Lk9iamVjdC5leHRlbmQoewogICAgaGFzU3R1ZmY6IEVtYmVyLmNvbXB1dGVk
        Lm5vdEVtcHR5KCdiYWNrcGFjay5bXScpCiAgfSk7CiAgdmFyIGhhbXN0ZXIg
        PSBIYW1zdGVyLmNyZWF0ZSh7YmFja3BhY2s6IFsnRm9vZCcsICdTbGVlcGlu
        ZyBCYWcnLCAnVGVudCddfSk7CiAgaGFtc3Rlci5nZXQoJ2hhc1N0dWZmJyk7
        IC8vIHRydWUKICBoYW1zdGVyLmdldCgnYmFja3BhY2snKS5jbGVhcigpOyAv
        LyBbXQogIGhhbXN0ZXIuZ2V0KCdoYXNTdHVmZicpOyAvLyBmYWxzZQogIGBg
        YAoKICBAbWV0aG9kIGNvbXB1dGVkLm5vdEVtcHR5CiAgQGZvciBFbWJlcgog
        IEBwYXJhbSB7U3RyaW5nfSBkZXBlbmRlbnRLZXkKICBAcmV0dXJuIHtFbWJl
        ci5Db21wdXRlZFByb3BlcnR5fSBjb21wdXRlZCBwcm9wZXJ0eSB3aGljaCBy
        ZXR1cm5zIHRydWUgaWYKICBvcmlnaW5hbCB2YWx1ZSBmb3IgcHJvcGVydHkg
        aXMgbm90IGVtcHR5LgoqLwpyZWdpc3RlckNvbXB1dGVkKCdub3RFbXB0eScs
        IGZ1bmN0aW9uKGRlcGVuZGVudEtleSkgewogIHJldHVybiAhRW1iZXIuaXNF
        bXB0eShnZXQodGhpcywgZGVwZW5kZW50S2V5KSk7Cn0pOwoKLyoqCiAgQSBj
        b21wdXRlZCBwcm9wZXJ0eSB0aGF0IHJldHVybnMgdHJ1ZSBpZiB0aGUgdmFs
        dWUgb2YgdGhlIGRlcGVuZGVudAogIHByb3BlcnR5IGlzIG51bGwgb3IgdW5k
        ZWZpbmVkLiBUaGlzIGF2b2lkcyBlcnJvcnMgZnJvbSBKU0xpbnQgY29tcGxh
        aW5pbmcKICBhYm91dCB1c2Ugb2YgPT0sIHdoaWNoIGNhbiBiZSB0ZWNobmlj
        YWxseSBjb25mdXNpbmcuCgogIEV4YW1wbGUKCiAgYGBgamF2YXNjcmlwdAog
        IHZhciBIYW1zdGVyID0gRW1iZXIuT2JqZWN0LmV4dGVuZCh7CiAgICBpc0h1
        bmdyeTogRW1iZXIuY29tcHV0ZWQubm9uZSgnZm9vZCcpCiAgfSk7CiAgdmFy
        IGhhbXN0ZXIgPSBIYW1zdGVyLmNyZWF0ZSgpOwogIGhhbXN0ZXIuZ2V0KCdp
        c0h1bmdyeScpOyAvLyB0cnVlCiAgaGFtc3Rlci5zZXQoJ2Zvb2QnLCAnQmFu
        YW5hJyk7CiAgaGFtc3Rlci5nZXQoJ2lzSHVuZ3J5Jyk7IC8vIGZhbHNlCiAg
        aGFtc3Rlci5zZXQoJ2Zvb2QnLCBudWxsKTsKICBoYW1zdGVyLmdldCgnaXNI
        dW5ncnknKTsgLy8gdHJ1ZQogIGBgYAoKICBAbWV0aG9kIGNvbXB1dGVkLm5v
        bmUKICBAZm9yIEVtYmVyCiAgQHBhcmFtIHtTdHJpbmd9IGRlcGVuZGVudEtl
        eQogIEByZXR1cm4ge0VtYmVyLkNvbXB1dGVkUHJvcGVydHl9IGNvbXB1dGVk
        IHByb3BlcnR5IHdoaWNoCiAgcmV0dXJucyB0cnVlIGlmIG9yaWdpbmFsIHZh
        bHVlIGZvciBwcm9wZXJ0eSBpcyBudWxsIG9yIHVuZGVmaW5lZC4KKi8KcmVn
        aXN0ZXJDb21wdXRlZCgnbm9uZScsIGZ1bmN0aW9uKGRlcGVuZGVudEtleSkg
        ewogIHJldHVybiBFbWJlci5pc05vbmUoZ2V0KHRoaXMsIGRlcGVuZGVudEtl
        eSkpOwp9KTsKCi8qKgogIEEgY29tcHV0ZWQgcHJvcGVydHkgdGhhdCByZXR1
        cm5zIHRoZSBpbnZlcnNlIGJvb2xlYW4gdmFsdWUKICBvZiB0aGUgb3JpZ2lu
        YWwgdmFsdWUgZm9yIHRoZSBkZXBlbmRlbnQgcHJvcGVydHkuCgogIEV4YW1w
        bGUKCiAgYGBgamF2YXNjcmlwdAogIHZhciBVc2VyID0gRW1iZXIuT2JqZWN0
        LmV4dGVuZCh7CiAgICBpc0Fub255bW91czogRW1iZXIuY29tcHV0ZWQubm90
        KCdsb2dnZWRJbicpCiAgfSk7CiAgdmFyIHVzZXIgPSBVc2VyLmNyZWF0ZSh7
        bG9nZ2VkSW46IGZhbHNlfSk7CiAgdXNlci5nZXQoJ2lzQW5vbnltb3VzJyk7
        IC8vIHRydWUKICB1c2VyLnNldCgnbG9nZ2VkSW4nLCB0cnVlKTsKICB1c2Vy
        LmdldCgnaXNBbm9ueW1vdXMnKTsgLy8gZmFsc2UKICBgYGAKCiAgQG1ldGhv
        ZCBjb21wdXRlZC5ub3QKICBAZm9yIEVtYmVyCiAgQHBhcmFtIHtTdHJpbmd9
        IGRlcGVuZGVudEtleQogIEByZXR1cm4ge0VtYmVyLkNvbXB1dGVkUHJvcGVy
        dHl9IGNvbXB1dGVkIHByb3BlcnR5IHdoaWNoIHJldHVybnMKICBpbnZlcnNl
        IG9mIHRoZSBvcmlnaW5hbCB2YWx1ZSBmb3IgcHJvcGVydHkKKi8KcmVnaXN0
        ZXJDb21wdXRlZCgnbm90JywgZnVuY3Rpb24oZGVwZW5kZW50S2V5KSB7CiAg
        cmV0dXJuICFnZXQodGhpcywgZGVwZW5kZW50S2V5KTsKfSk7CgovKioKICBB
        IGNvbXB1dGVkIHByb3BlcnR5IHRoYXQgY29udmVydHMgdGhlIHByb3ZpZGVk
        IGRlcGVuZGVudCBwcm9wZXJ0eQogIGludG8gYSBib29sZWFuIHZhbHVlLgoK
        ICBgYGBqYXZhc2NyaXB0CiAgdmFyIEhhbXN0ZXIgPSBFbWJlci5PYmplY3Qu
        ZXh0ZW5kKHsKICAgIGhhc0JhbmFuYXM6IEVtYmVyLmNvbXB1dGVkLmJvb2wo
        J251bUJhbmFuYXMnKQogIH0pOwogIHZhciBoYW1zdGVyID0gSGFtc3Rlci5j
        cmVhdGUoKTsKICBoYW1zdGVyLmdldCgnaGFzQmFuYW5hcycpOyAvLyBmYWxz
        ZQogIGhhbXN0ZXIuc2V0KCdudW1CYW5hbmFzJywgMCk7CiAgaGFtc3Rlci5n
        ZXQoJ2hhc0JhbmFuYXMnKTsgLy8gZmFsc2UKICBoYW1zdGVyLnNldCgnbnVt
        QmFuYW5hcycsIDEpOwogIGhhbXN0ZXIuZ2V0KCdoYXNCYW5hbmFzJyk7IC8v
        IHRydWUKICBoYW1zdGVyLnNldCgnbnVtQmFuYW5hcycsIG51bGwpOwogIGhh
        bXN0ZXIuZ2V0KCdoYXNCYW5hbmFzJyk7IC8vIGZhbHNlCiAgYGBgCgogIEBt
        ZXRob2QgY29tcHV0ZWQuYm9vbAogIEBmb3IgRW1iZXIKICBAcGFyYW0ge1N0
        cmluZ30gZGVwZW5kZW50S2V5CiAgQHJldHVybiB7RW1iZXIuQ29tcHV0ZWRQ
        cm9wZXJ0eX0gY29tcHV0ZWQgcHJvcGVydHkgd2hpY2ggY29udmVydHMKICB0
        byBib29sZWFuIHRoZSBvcmlnaW5hbCB2YWx1ZSBmb3IgcHJvcGVydHkKKi8K
        cmVnaXN0ZXJDb21wdXRlZCgnYm9vbCcsIGZ1bmN0aW9uKGRlcGVuZGVudEtl
        eSkgewogIHJldHVybiAhIWdldCh0aGlzLCBkZXBlbmRlbnRLZXkpOwp9KTsK
        Ci8qKgogIEEgY29tcHV0ZWQgcHJvcGVydHkgd2hpY2ggbWF0Y2hlcyB0aGUg
        b3JpZ2luYWwgdmFsdWUgZm9yIHRoZQogIGRlcGVuZGVudCBwcm9wZXJ0eSBh
        Z2FpbnN0IGEgZ2l2ZW4gUmVnRXhwLCByZXR1cm5pbmcgYHRydWVgCiAgaWYg
        dGhleSB2YWx1ZXMgbWF0Y2hlcyB0aGUgUmVnRXhwIGFuZCBgZmFsc2VgIGlm
        IGl0IGRvZXMgbm90LgoKICBFeGFtcGxlCgogIGBgYGphdmFzY3JpcHQKICB2
        YXIgVXNlciA9IEVtYmVyLk9iamVjdC5leHRlbmQoewogICAgaGFzVmFsaWRF
        bWFpbDogRW1iZXIuY29tcHV0ZWQubWF0Y2goJ2VtYWlsJywgL14uK0AuK1wu
        LiskLykKICB9KTsKICB2YXIgdXNlciA9IFVzZXIuY3JlYXRlKHtsb2dnZWRJ
        bjogZmFsc2V9KTsKICB1c2VyLmdldCgnaGFzVmFsaWRFbWFpbCcpOyAvLyBm
        YWxzZQogIHVzZXIuc2V0KCdlbWFpbCcsICcnKTsKICB1c2VyLmdldCgnaGFz
        VmFsaWRFbWFpbCcpOyAvLyBmYWxzZQogIHVzZXIuc2V0KCdlbWFpbCcsICdl
        bWJlcl9oYW1zdGVyQGV4YW1wbGUuY29tJyk7CiAgdXNlci5nZXQoJ2hhc1Zh
        bGlkRW1haWwnKTsgLy8gdHJ1ZQogIGBgYAoKICBAbWV0aG9kIGNvbXB1dGVk
        Lm1hdGNoCiAgQGZvciBFbWJlcgogIEBwYXJhbSB7U3RyaW5nfSBkZXBlbmRl
        bnRLZXkKICBAcGFyYW0ge1JlZ0V4cH0gcmVnZXhwCiAgQHJldHVybiB7RW1i
        ZXIuQ29tcHV0ZWRQcm9wZXJ0eX0gY29tcHV0ZWQgcHJvcGVydHkgd2hpY2gg
        bWF0Y2gKICB0aGUgb3JpZ2luYWwgdmFsdWUgZm9yIHByb3BlcnR5IGFnYWlu
        c3QgYSBnaXZlbiBSZWdFeHAKKi8KcmVnaXN0ZXJDb21wdXRlZCgnbWF0Y2gn
        LCBmdW5jdGlvbihkZXBlbmRlbnRLZXksIHJlZ2V4cCkgewogIHZhciB2YWx1
        ZSA9IGdldCh0aGlzLCBkZXBlbmRlbnRLZXkpOwogIHJldHVybiB0eXBlb2Yg
        dmFsdWUgPT09ICdzdHJpbmcnID8gcmVnZXhwLnRlc3QodmFsdWUpIDogZmFs
        c2U7Cn0pOwoKLyoqCiAgQSBjb21wdXRlZCBwcm9wZXJ0eSB0aGF0IHJldHVy
        bnMgdHJ1ZSBpZiB0aGUgcHJvdmlkZWQgZGVwZW5kZW50IHByb3BlcnR5CiAg
        aXMgZXF1YWwgdG8gdGhlIGdpdmVuIHZhbHVlLgoKICBFeGFtcGxlCgogIGBg
        YGphdmFzY3JpcHQKICB2YXIgSGFtc3RlciA9IEVtYmVyLk9iamVjdC5leHRl
        bmQoewogICAgbmFwVGltZTogRW1iZXIuY29tcHV0ZWQuZXF1YWwoJ3N0YXRl
        JywgJ3NsZWVweScpCiAgfSk7CiAgdmFyIGhhbXN0ZXIgPSBIYW1zdGVyLmNy
        ZWF0ZSgpOwogIGhhbXN0ZXIuZ2V0KCduYXBUaW1lJyk7IC8vIGZhbHNlCiAg
        aGFtc3Rlci5zZXQoJ3N0YXRlJywgJ3NsZWVweScpOwogIGhhbXN0ZXIuZ2V0
        KCduYXBUaW1lJyk7IC8vIHRydWUKICBoYW1zdGVyLnNldCgnc3RhdGUnLCAn
        aHVuZ3J5Jyk7CiAgaGFtc3Rlci5nZXQoJ25hcFRpbWUnKTsgLy8gZmFsc2UK
        ICBgYGAKCiAgQG1ldGhvZCBjb21wdXRlZC5lcXVhbAogIEBmb3IgRW1iZXIK
        ICBAcGFyYW0ge1N0cmluZ30gZGVwZW5kZW50S2V5CiAgQHBhcmFtIHtTdHJp
        bmd8TnVtYmVyfE9iamVjdH0gdmFsdWUKICBAcmV0dXJuIHtFbWJlci5Db21w
        dXRlZFByb3BlcnR5fSBjb21wdXRlZCBwcm9wZXJ0eSB3aGljaCByZXR1cm5z
        IHRydWUgaWYKICB0aGUgb3JpZ2luYWwgdmFsdWUgZm9yIHByb3BlcnR5IGlz
        IGVxdWFsIHRvIHRoZSBnaXZlbiB2YWx1ZS4KKi8KcmVnaXN0ZXJDb21wdXRl
        ZCgnZXF1YWwnLCBmdW5jdGlvbihkZXBlbmRlbnRLZXksIHZhbHVlKSB7CiAg
        cmV0dXJuIGdldCh0aGlzLCBkZXBlbmRlbnRLZXkpID09PSB2YWx1ZTsKfSk7
        CgovKioKICBBIGNvbXB1dGVkIHByb3BlcnR5IHRoYXQgcmV0dXJucyB0cnVl
        IGlmIHRoZSBwcm92aWVkIGRlcGVuZGVudCBwcm9wZXJ0eQogIGlzIGdyZWF0
        ZXIgdGhhbiB0aGUgcHJvdmlkZWQgdmFsdWUuCgogIEV4YW1wbGUKCiAgYGBg
        amF2YXNjcmlwdAogIHZhciBIYW1zdGVyID0gRW1iZXIuT2JqZWN0LmV4dGVu
        ZCh7CiAgICBoYXNUb29NYW55QmFuYW5hczogRW1iZXIuY29tcHV0ZWQuZ3Qo
        J251bUJhbmFuYXMnLCAxMCkKICB9KTsKICB2YXIgaGFtc3RlciA9IEhhbXN0
        ZXIuY3JlYXRlKCk7CiAgaGFtc3Rlci5nZXQoJ2hhc1Rvb01hbnlCYW5hbmFz
        Jyk7IC8vIGZhbHNlCiAgaGFtc3Rlci5zZXQoJ251bUJhbmFuYXMnLCAzKTsK
        ICBoYW1zdGVyLmdldCgnaGFzVG9vTWFueUJhbmFuYXMnKTsgLy8gZmFsc2UK
        ICBoYW1zdGVyLnNldCgnbnVtQmFuYW5hcycsIDExKTsKICBoYW1zdGVyLmdl
        dCgnaGFzVG9vTWFueUJhbmFuYXMnKTsgLy8gdHJ1ZQogIGBgYAoKICBAbWV0
        aG9kIGNvbXB1dGVkLmd0CiAgQGZvciBFbWJlcgogIEBwYXJhbSB7U3RyaW5n
        fSBkZXBlbmRlbnRLZXkKICBAcGFyYW0ge051bWJlcn0gdmFsdWUKICBAcmV0
        dXJuIHtFbWJlci5Db21wdXRlZFByb3BlcnR5fSBjb21wdXRlZCBwcm9wZXJ0
        eSB3aGljaCByZXR1cm5zIHRydWUgaWYKICB0aGUgb3JpZ2luYWwgdmFsdWUg
        Zm9yIHByb3BlcnR5IGlzIGdyZWF0ZXIgdGhlbiBnaXZlbiB2YWx1ZS4KKi8K
        cmVnaXN0ZXJDb21wdXRlZCgnZ3QnLCBmdW5jdGlvbihkZXBlbmRlbnRLZXks
        IHZhbHVlKSB7CiAgcmV0dXJuIGdldCh0aGlzLCBkZXBlbmRlbnRLZXkpID4g
        dmFsdWU7Cn0pOwoKLyoqCiAgQSBjb21wdXRlZCBwcm9wZXJ0eSB0aGF0IHJl
        dHVybnMgdHJ1ZSBpZiB0aGUgcHJvdmlkZWQgZGVwZW5kZW50IHByb3BlcnR5
        CiAgaXMgZ3JlYXRlciB0aGFuIG9yIGVxdWFsIHRvIHRoZSBwcm92aWRlZCB2
        YWx1ZS4KCiAgRXhhbXBsZQoKICBgYGBqYXZhc2NyaXB0CiAgdmFyIEhhbXN0
        ZXIgPSBFbWJlci5PYmplY3QuZXh0ZW5kKHsKICAgIGhhc1Rvb01hbnlCYW5h
        bmFzOiBFbWJlci5jb21wdXRlZC5ndGUoJ251bUJhbmFuYXMnLCAxMCkKICB9
        KTsKICB2YXIgaGFtc3RlciA9IEhhbXN0ZXIuY3JlYXRlKCk7CiAgaGFtc3Rl
        ci5nZXQoJ2hhc1Rvb01hbnlCYW5hbmFzJyk7IC8vIGZhbHNlCiAgaGFtc3Rl
        ci5zZXQoJ251bUJhbmFuYXMnLCAzKTsKICBoYW1zdGVyLmdldCgnaGFzVG9v
        TWFueUJhbmFuYXMnKTsgLy8gZmFsc2UKICBoYW1zdGVyLnNldCgnbnVtQmFu
        YW5hcycsIDEwKTsKICBoYW1zdGVyLmdldCgnaGFzVG9vTWFueUJhbmFuYXMn
        KTsgLy8gdHJ1ZQogIGBgYAoKICBAbWV0aG9kIGNvbXB1dGVkLmd0ZQogIEBm
        b3IgRW1iZXIKICBAcGFyYW0ge1N0cmluZ30gZGVwZW5kZW50S2V5CiAgQHBh
        cmFtIHtOdW1iZXJ9IHZhbHVlCiAgQHJldHVybiB7RW1iZXIuQ29tcHV0ZWRQ
        cm9wZXJ0eX0gY29tcHV0ZWQgcHJvcGVydHkgd2hpY2ggcmV0dXJucyB0cnVl
        IGlmCiAgdGhlIG9yaWdpbmFsIHZhbHVlIGZvciBwcm9wZXJ0eSBpcyBncmVh
        dGVyIG9yIGVxdWFsIHRoZW4gZ2l2ZW4gdmFsdWUuCiovCnJlZ2lzdGVyQ29t
        cHV0ZWQoJ2d0ZScsIGZ1bmN0aW9uKGRlcGVuZGVudEtleSwgdmFsdWUpIHsK
        ICByZXR1cm4gZ2V0KHRoaXMsIGRlcGVuZGVudEtleSkgPj0gdmFsdWU7Cn0p
        OwoKLyoqCiAgQSBjb21wdXRlZCBwcm9wZXJ0eSB0aGF0IHJldHVybnMgdHJ1
        ZSBpZiB0aGUgcHJvdmlkZWQgZGVwZW5kZW50IHByb3BlcnR5CiAgaXMgbGVz
        cyB0aGFuIHRoZSBwcm92aWRlZCB2YWx1ZS4KCiAgRXhhbXBsZQoKICBgYGBq
        YXZhc2NyaXB0CiAgdmFyIEhhbXN0ZXIgPSBFbWJlci5PYmplY3QuZXh0ZW5k
        KHsKICAgIG5lZWRzTW9yZUJhbmFuYXM6IEVtYmVyLmNvbXB1dGVkLmx0KCdu
        dW1CYW5hbmFzJywgMykKICB9KTsKICB2YXIgaGFtc3RlciA9IEhhbXN0ZXIu
        Y3JlYXRlKCk7CiAgaGFtc3Rlci5nZXQoJ25lZWRzTW9yZUJhbmFuYXMnKTsg
        Ly8gdHJ1ZQogIGhhbXN0ZXIuc2V0KCdudW1CYW5hbmFzJywgMyk7CiAgaGFt
        c3Rlci5nZXQoJ25lZWRzTW9yZUJhbmFuYXMnKTsgLy8gZmFsc2UKICBoYW1z
        dGVyLnNldCgnbnVtQmFuYW5hcycsIDIpOwogIGhhbXN0ZXIuZ2V0KCduZWVk
        c01vcmVCYW5hbmFzJyk7IC8vIHRydWUKICBgYGAKCiAgQG1ldGhvZCBjb21w
        dXRlZC5sdAogIEBmb3IgRW1iZXIKICBAcGFyYW0ge1N0cmluZ30gZGVwZW5k
        ZW50S2V5CiAgQHBhcmFtIHtOdW1iZXJ9IHZhbHVlCiAgQHJldHVybiB7RW1i
        ZXIuQ29tcHV0ZWRQcm9wZXJ0eX0gY29tcHV0ZWQgcHJvcGVydHkgd2hpY2gg
        cmV0dXJucyB0cnVlIGlmCiAgdGhlIG9yaWdpbmFsIHZhbHVlIGZvciBwcm9w
        ZXJ0eSBpcyBsZXNzIHRoZW4gZ2l2ZW4gdmFsdWUuCiovCnJlZ2lzdGVyQ29t
        cHV0ZWQoJ2x0JywgZnVuY3Rpb24oZGVwZW5kZW50S2V5LCB2YWx1ZSkgewog
        IHJldHVybiBnZXQodGhpcywgZGVwZW5kZW50S2V5KSA8IHZhbHVlOwp9KTsK
        Ci8qKgogIEEgY29tcHV0ZWQgcHJvcGVydHkgdGhhdCByZXR1cm5zIHRydWUg
        aWYgdGhlIHByb3ZpZGVkIGRlcGVuZGVudCBwcm9wZXJ0eQogIGlzIGxlc3Mg
        dGhhbiBvciBlcXVhbCB0byB0aGUgcHJvdmlkZWQgdmFsdWUuCgogIEV4YW1w
        bGUKCiAgYGBgamF2YXNjcmlwdAogIHZhciBIYW1zdGVyID0gRW1iZXIuT2Jq
        ZWN0LmV4dGVuZCh7CiAgICBuZWVkc01vcmVCYW5hbmFzOiBFbWJlci5jb21w
        dXRlZC5sdGUoJ251bUJhbmFuYXMnLCAzKQogIH0pOwogIHZhciBoYW1zdGVy
        ID0gSGFtc3Rlci5jcmVhdGUoKTsKICBoYW1zdGVyLmdldCgnbmVlZHNNb3Jl
        QmFuYW5hcycpOyAvLyB0cnVlCiAgaGFtc3Rlci5zZXQoJ251bUJhbmFuYXMn
        LCA1KTsKICBoYW1zdGVyLmdldCgnbmVlZHNNb3JlQmFuYW5hcycpOyAvLyBm
        YWxzZQogIGhhbXN0ZXIuc2V0KCdudW1CYW5hbmFzJywgMyk7CiAgaGFtc3Rl
        ci5nZXQoJ25lZWRzTW9yZUJhbmFuYXMnKTsgLy8gdHJ1ZQogIGBgYAoKICBA
        bWV0aG9kIGNvbXB1dGVkLmx0ZQogIEBmb3IgRW1iZXIKICBAcGFyYW0ge1N0
        cmluZ30gZGVwZW5kZW50S2V5CiAgQHBhcmFtIHtOdW1iZXJ9IHZhbHVlCiAg
        QHJldHVybiB7RW1iZXIuQ29tcHV0ZWRQcm9wZXJ0eX0gY29tcHV0ZWQgcHJv
        cGVydHkgd2hpY2ggcmV0dXJucyB0cnVlIGlmCiAgdGhlIG9yaWdpbmFsIHZh
        bHVlIGZvciBwcm9wZXJ0eSBpcyBsZXNzIG9yIGVxdWFsIHRoZW4gZ2l2ZW4g
        dmFsdWUuCiovCnJlZ2lzdGVyQ29tcHV0ZWQoJ2x0ZScsIGZ1bmN0aW9uKGRl
        cGVuZGVudEtleSwgdmFsdWUpIHsKICByZXR1cm4gZ2V0KHRoaXMsIGRlcGVu
        ZGVudEtleSkgPD0gdmFsdWU7Cn0pOwoKLyoqCiAgQSBjb21wdXRlZCBwcm9w
        ZXJ0eSB0aGF0IHBlcmZvcm1zIGEgbG9naWNhbCBgYW5kYCBvbiB0aGUKICBv
        cmlnaW5hbCB2YWx1ZXMgZm9yIHRoZSBwcm92aWRlZCBkZXBlbmRlbnQgcHJv
        cGVydGllcy4KCiAgRXhhbXBsZQoKICBgYGBqYXZhc2NyaXB0CiAgdmFyIEhh
        bXN0ZXIgPSBFbWJlci5PYmplY3QuZXh0ZW5kKHsKICAgIHJlYWR5Rm9yQ2Ft
        cDogRW1iZXIuY29tcHV0ZWQuYW5kKCdoYXNUZW50JywgJ2hhc0JhY2twYWNr
        JykKICB9KTsKICB2YXIgaGFtc3RlciA9IEhhbXN0ZXIuY3JlYXRlKCk7CiAg
        aGFtc3Rlci5nZXQoJ3JlYWR5Rm9yQ2FtcCcpOyAvLyBmYWxzZQogIGhhbXN0
        ZXIuc2V0KCdoYXNUZW50JywgdHJ1ZSk7CiAgaGFtc3Rlci5nZXQoJ3JlYWR5
        Rm9yQ2FtcCcpOyAvLyBmYWxzZQogIGhhbXN0ZXIuc2V0KCdoYXNCYWNrcGFj
        aycsIHRydWUpOwogIGhhbXN0ZXIuZ2V0KCdyZWFkeUZvckNhbXAnKTsgLy8g
        dHJ1ZQogIGBgYAoKICBAbWV0aG9kIGNvbXB1dGVkLmFuZAogIEBmb3IgRW1i
        ZXIKICBAcGFyYW0ge1N0cmluZ30gZGVwZW5kZW50S2V5KgogIEByZXR1cm4g
        e0VtYmVyLkNvbXB1dGVkUHJvcGVydHl9IGNvbXB1dGVkIHByb3BlcnR5IHdo
        aWNoIHBlcmZvcm1zCiAgYSBsb2dpY2FsIGBhbmRgIG9uIHRoZSB2YWx1ZXMg
        b2YgYWxsIHRoZSBvcmlnaW5hbCB2YWx1ZXMgZm9yIHByb3BlcnRpZXMuCiov
        CnJlZ2lzdGVyQ29tcHV0ZWRXaXRoUHJvcGVydGllcygnYW5kJywgZnVuY3Rp
        b24ocHJvcGVydGllcykgewogIGZvciAodmFyIGtleSBpbiBwcm9wZXJ0aWVz
        KSB7CiAgICBpZiAocHJvcGVydGllcy5oYXNPd25Qcm9wZXJ0eShrZXkpICYm
        ICFwcm9wZXJ0aWVzW2tleV0pIHsKICAgICAgcmV0dXJuIGZhbHNlOwogICAg
        fQogIH0KICByZXR1cm4gdHJ1ZTsKfSk7CgovKioKICBBIGNvbXB1dGVkIHBy
        b3BlcnR5IHdoaWNoIHBlcmZvcm1zIGEgbG9naWNhbCBgb3JgIG9uIHRoZQog
        IG9yaWdpbmFsIHZhbHVlcyBmb3IgdGhlIHByb3ZpZGVkIGRlcGVuZGVudCBw
        cm9wZXJ0aWVzLgoKICBFeGFtcGxlCgogIGBgYGphdmFzY3JpcHQKICB2YXIg
        SGFtc3RlciA9IEVtYmVyLk9iamVjdC5leHRlbmQoewogICAgcmVhZHlGb3JS
        YWluOiBFbWJlci5jb21wdXRlZC5vcignaGFzSmFja2V0JywgJ2hhc1VtYnJl
        bGxhJykKICB9KTsKICB2YXIgaGFtc3RlciA9IEhhbXN0ZXIuY3JlYXRlKCk7
        CiAgaGFtc3Rlci5nZXQoJ3JlYWR5Rm9yUmFpbicpOyAvLyBmYWxzZQogIGhh
        bXN0ZXIuc2V0KCdoYXNKYWNrZXQnLCB0cnVlKTsKICBoYW1zdGVyLmdldCgn
        cmVhZHlGb3JSYWluJyk7IC8vIHRydWUKICBgYGAKCiAgQG1ldGhvZCBjb21w
        dXRlZC5vcgogIEBmb3IgRW1iZXIKICBAcGFyYW0ge1N0cmluZ30gZGVwZW5k
        ZW50S2V5KgogIEByZXR1cm4ge0VtYmVyLkNvbXB1dGVkUHJvcGVydHl9IGNv
        bXB1dGVkIHByb3BlcnR5IHdoaWNoIHBlcmZvcm1zCiAgYSBsb2dpY2FsIGBv
        cmAgb24gdGhlIHZhbHVlcyBvZiBhbGwgdGhlIG9yaWdpbmFsIHZhbHVlcyBm
        b3IgcHJvcGVydGllcy4KKi8KcmVnaXN0ZXJDb21wdXRlZFdpdGhQcm9wZXJ0
        aWVzKCdvcicsIGZ1bmN0aW9uKHByb3BlcnRpZXMpIHsKICBmb3IgKHZhciBr
        ZXkgaW4gcHJvcGVydGllcykgewogICAgaWYgKHByb3BlcnRpZXMuaGFzT3du
        UHJvcGVydHkoa2V5KSAmJiBwcm9wZXJ0aWVzW2tleV0pIHsKICAgICAgcmV0
        dXJuIHRydWU7CiAgICB9CiAgfQogIHJldHVybiBmYWxzZTsKfSk7CgovKioK
        ICBBIGNvbXB1dGVkIHByb3BlcnR5IHRoYXQgcmV0dXJucyB0aGUgZmlyc3Qg
        dHJ1dGh5IHZhbHVlCiAgZnJvbSBhIGxpc3Qgb2YgZGVwZW5kZW50IHByb3Bl
        cnRpZXMuCgogIEV4YW1wbGUKCiAgYGBgamF2YXNjcmlwdAogIHZhciBIYW1z
        dGVyID0gRW1iZXIuT2JqZWN0LmV4dGVuZCh7CiAgICBoYXNDbG90aGVzOiBF
        bWJlci5jb21wdXRlZC5hbnkoJ2hhdCcsICdzaGlydCcpCiAgfSk7CiAgdmFy
        IGhhbXN0ZXIgPSBIYW1zdGVyLmNyZWF0ZSgpOwogIGhhbXN0ZXIuZ2V0KCdo
        YXNDbG90aGVzJyk7IC8vIG51bGwKICBoYW1zdGVyLnNldCgnc2hpcnQnLCAn
        SGF3YWlpYW4gU2hpcnQnKTsKICBoYW1zdGVyLmdldCgnaGFzQ2xvdGhlcycp
        OyAvLyAnSGF3YWlpYW4gU2hpcnQnCiAgYGBgCgogIEBtZXRob2QgY29tcHV0
        ZWQuYW55CiAgQGZvciBFbWJlcgogIEBwYXJhbSB7U3RyaW5nfSBkZXBlbmRl
        bnRLZXkqCiAgQHJldHVybiB7RW1iZXIuQ29tcHV0ZWRQcm9wZXJ0eX0gY29t
        cHV0ZWQgcHJvcGVydHkgd2hpY2ggcmV0dXJucwogIHRoZSBmaXJzdCB0cnV0
        aHkgdmFsdWUgb2YgZ2l2ZW4gbGlzdCBvZiBwcm9wZXJ0aWVzLgoqLwpyZWdp
        c3RlckNvbXB1dGVkV2l0aFByb3BlcnRpZXMoJ2FueScsIGZ1bmN0aW9uKHBy
        b3BlcnRpZXMpIHsKICBmb3IgKHZhciBrZXkgaW4gcHJvcGVydGllcykgewog
        ICAgaWYgKHByb3BlcnRpZXMuaGFzT3duUHJvcGVydHkoa2V5KSAmJiBwcm9w
        ZXJ0aWVzW2tleV0pIHsKICAgICAgcmV0dXJuIHByb3BlcnRpZXNba2V5XTsK
        ICAgIH0KICB9CiAgcmV0dXJuIG51bGw7Cn0pOwoKLyoqCiAgQSBjb21wdXRl
        ZCBwcm9wZXJ0eSB0aGF0IHJldHVybnMgdGhlIGFycmF5IG9mIHZhbHVlcwog
        IGZvciB0aGUgcHJvdmlkZWQgZGVwZW5kZW50IHByb3BlcnRpZXMuCgogIEV4
        YW1wbGUKCiAgYGBgamF2YXNjcmlwdAogIHZhciBIYW1zdGVyID0gRW1iZXIu
        T2JqZWN0LmV4dGVuZCh7CiAgICBjbG90aGVzOiBFbWJlci5jb21wdXRlZC5j
        b2xsZWN0KCdoYXQnLCAnc2hpcnQnKQogIH0pOwogIHZhciBoYW1zdGVyID0g
        SGFtc3Rlci5jcmVhdGUoKTsKICBoYW1zdGVyLmdldCgnY2xvdGhlcycpOyAv
        LyBbbnVsbCwgbnVsbF0KICBoYW1zdGVyLnNldCgnaGF0JywgJ0NhbXAgSGF0
        Jyk7CiAgaGFtc3Rlci5zZXQoJ3NoaXJ0JywgJ0NhbXAgU2hpcnQnKTsKICBo
        YW1zdGVyLmdldCgnY2xvdGhlcycpOyAvLyBbJ0NhbXAgSGF0JywgJ0NhbXAg
        U2hpcnQnXQogIGBgYAoKICBAbWV0aG9kIGNvbXB1dGVkLmNvbGxlY3QKICBA
        Zm9yIEVtYmVyCiAgQHBhcmFtIHtTdHJpbmd9IGRlcGVuZGVudEtleSoKICBA
        cmV0dXJuIHtFbWJlci5Db21wdXRlZFByb3BlcnR5fSBjb21wdXRlZCBwcm9w
        ZXJ0eSB3aGljaCBtYXBzCiAgdmFsdWVzIG9mIGFsbCBwYXNzZWQgcHJvcGVy
        dGllcyBpbiB0byBhbiBhcnJheS4KKi8KcmVnaXN0ZXJDb21wdXRlZFdpdGhQ
        cm9wZXJ0aWVzKCdjb2xsZWN0JywgZnVuY3Rpb24ocHJvcGVydGllcykgewog
        IHZhciByZXMgPSBbXTsKICBmb3IgKHZhciBrZXkgaW4gcHJvcGVydGllcykg
        ewogICAgaWYgKHByb3BlcnRpZXMuaGFzT3duUHJvcGVydHkoa2V5KSkgewog
        ICAgICBpZiAoRW1iZXIuaXNOb25lKHByb3BlcnRpZXNba2V5XSkpIHsKICAg
        ICAgICByZXMucHVzaChudWxsKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBy
        ZXMucHVzaChwcm9wZXJ0aWVzW2tleV0pOwogICAgICB9CiAgICB9CiAgfQog
        IHJldHVybiByZXM7Cn0pOwoKLyoqCiAgQ3JlYXRlcyBhIG5ldyBwcm9wZXJ0
        eSB0aGF0IGlzIGFuIGFsaWFzIGZvciBhbm90aGVyIHByb3BlcnR5CiAgb24g
        YW4gb2JqZWN0LiBDYWxscyB0byBgZ2V0YCBvciBgc2V0YCB0aGlzIHByb3Bl
        cnR5IGJlaGF2ZSBhcwogIHRob3VnaCB0aGV5IHdlcmUgY2FsbGVkIG9uIHRo
        ZSBvcmlnaW5hbCBwcm9wZXJ0eS4KCiAgYGBgamF2YXNjcmlwdAogIFBlcnNv
        biA9IEVtYmVyLk9iamVjdC5leHRlbmQoewogICAgbmFtZTogJ0FsZXggTWF0
        Y2huZWVyJywKICAgIG5vbWVuOiBFbWJlci5jb21wdXRlZC5hbGlhcygnbmFt
        ZScpCiAgfSk7CgogIGFsZXggPSBQZXJzb24uY3JlYXRlKCk7CiAgYWxleC5n
        ZXQoJ25vbWVuJyk7IC8vICdBbGV4IE1hdGNobmVlcicKICBhbGV4LmdldCgn
        bmFtZScpOyAgLy8gJ0FsZXggTWF0Y2huZWVyJwoKICBhbGV4LnNldCgnbm9t
        ZW4nLCAnQG1hY2h0eScpOwogIGFsZXguZ2V0KCduYW1lJyk7ICAvLyAnQG1h
        Y2h0eScKICBgYGAKICBAbWV0aG9kIGNvbXB1dGVkLmFsaWFzCiAgQGZvciBF
        bWJlcgogIEBwYXJhbSB7U3RyaW5nfSBkZXBlbmRlbnRLZXkKICBAcmV0dXJu
        IHtFbWJlci5Db21wdXRlZFByb3BlcnR5fSBjb21wdXRlZCBwcm9wZXJ0eSB3
        aGljaCBjcmVhdGVzIGFuCiAgYWxpYXMgdG8gdGhlIG9yaWdpbmFsIHZhbHVl
        IGZvciBwcm9wZXJ0eS4KKi8KRW1iZXIuY29tcHV0ZWQuYWxpYXMgPSBmdW5j
        dGlvbihkZXBlbmRlbnRLZXkpIHsKICByZXR1cm4gRW1iZXIuY29tcHV0ZWQo
        ZGVwZW5kZW50S2V5LCBmdW5jdGlvbihrZXksIHZhbHVlKSB7CiAgICBpZiAo
        YXJndW1lbnRzLmxlbmd0aCA+IDEpIHsKICAgICAgc2V0KHRoaXMsIGRlcGVu
        ZGVudEtleSwgdmFsdWUpOwogICAgICByZXR1cm4gdmFsdWU7CiAgICB9IGVs
        c2UgewogICAgICByZXR1cm4gZ2V0KHRoaXMsIGRlcGVuZGVudEtleSk7CiAg
        ICB9CiAgfSk7Cn07CgovKioKICBXaGVyZSBgY29tcHV0ZWQuYWxpYXNgIGFs
        aWFzZXMgYGdldGAgYW5kIGBzZXRgLCBhbmQgYWxsb3dzIGZvciBiaWRpcmVj
        dGlvbmFsCiAgZGF0YSBmbG93LCBgY29tcHV0ZWQub25lV2F5YCBvbmx5IHBy
        b3ZpZGVzIGFuIGFsaWFzZWQgYGdldGAuIFRoZSBgc2V0YCB3aWxsCiAgbm90
        IG11dGF0ZSB0aGUgdXBzdHJlYW0gcHJvcGVydHksIHJhdGhlciBjYXVzZXMg
        dGhlIGN1cnJlbnQgcHJvcGVydHkgdG8KICBiZWNvbWUgdGhlIHZhbHVlIHNl
        dC4gVGhpcyBjYXVzZXMgdGhlIGRvd25zdHJlYW0gcHJvcGVydHkgdG8gcGVy
        bWVudGFudGx5CiAgZGl2ZXJnZSBmcm9tIHRoZSB1cHN0cmVhbSBwcm9wZXJ0
        eS4KCiAgRXhhbXBsZQoKICBgYGBqYXZhc2NyaXB0CiAgVXNlciA9IEVtYmVy
        Lk9iamVjdC5leHRlbmQoewogICAgZmlyc3ROYW1lOiBudWxsLAogICAgbGFz
        dE5hbWU6IG51bGwsCiAgICBuaWNrTmFtZTogRW1iZXIuY29tcHV0ZWQub25l
        V2F5KCdmaXJzdE5hbWUnKQogIH0pOwoKICB1c2VyID0gVXNlci5jcmVhdGUo
        ewogICAgZmlyc3ROYW1lOiAnVGVkZHknLAogICAgbGFzdE5hbWU6ICAnWmVl
        bm55JwogIH0pOwoKICB1c2VyLmdldCgnbmlja05hbWUnKTsKICAjICdUZWRk
        eScKCiAgdXNlci5zZXQoJ25pY2tOYW1lJywgJ1RlZGR5QmVhcicpOwogICMg
        J1RlZGR5QmVhcicKCiAgdXNlci5nZXQoJ2ZpcnN0TmFtZScpOwogICMgJ1Rl
        ZGR5JwogIGBgYAoKICBAbWV0aG9kIGNvbXB1dGVkLm9uZVdheQogIEBmb3Ig
        RW1iZXIKICBAcGFyYW0ge1N0cmluZ30gZGVwZW5kZW50S2V5CiAgQHJldHVy
        biB7RW1iZXIuQ29tcHV0ZWRQcm9wZXJ0eX0gY29tcHV0ZWQgcHJvcGVydHkg
        d2hpY2ggY3JlYXRlcyBhCiAgb25lIHdheSBjb21wdXRlZCBwcm9wZXJ0eSB0
        byB0aGUgb3JpZ2luYWwgdmFsdWUgZm9yIHByb3BlcnR5LgoqLwpFbWJlci5j
        b21wdXRlZC5vbmVXYXkgPSBmdW5jdGlvbihkZXBlbmRlbnRLZXkpIHsKICBy
        ZXR1cm4gRW1iZXIuY29tcHV0ZWQoZGVwZW5kZW50S2V5LCBmdW5jdGlvbigp
        IHsKICAgIHJldHVybiBnZXQodGhpcywgZGVwZW5kZW50S2V5KTsKICB9KTsK
        fTsKCgoKLyoqCiAgV2hlcmUgYGNvbXB1dGVkLm9uZVdheWAgcHJvdmlkZXMg
        b25lV2F5IGJpbmRpbmdzLCBgY29tcHV0ZWQucmVhZE9ubHlgIHByb3ZpZGVz
        CiAgYSByZWFkT25seSBvbmUgd2F5IGJpbmRpbmcuIFZlcnkgb2Z0ZW4gd2hl
        biB1c2luZyBgY29tcHV0ZWQub25lV2F5YCBvbmUgZG9lcwogIG5vdCBhbHNv
        IHdhbnQgY2hhbmdlcyB0byBwcm9wb2dhdGUgYmFjayB1cCwgYXMgdGhleSB3
        aWxsIHJlcGxhY2UgdGhlIHZhbHVlLgoKICBUaGlzIHByZXZlbnRzIHRoZSBy
        ZXZlcnNlIGZsb3csIGFuZCBhbHNvIHRocm93cyBhbiBleGNlcHRpb24gd2hl
        biBpdCBvY2N1cnMuCgogIEV4YW1wbGUKCiAgYGBgamF2YXNjcmlwdAogIFVz
        ZXIgPSBFbWJlci5PYmplY3QuZXh0ZW5kKHsKICAgIGZpcnN0TmFtZTogbnVs
        bCwKICAgIGxhc3ROYW1lOiBudWxsLAogICAgbmlja05hbWU6IEVtYmVyLmNv
        bXB1dGVkLnJlYWRPbmx5KCdmaXJzdE5hbWUnKQogIH0pOwoKICB1c2VyID0g
        VXNlci5jcmVhdGUoewogICAgZmlyc3ROYW1lOiAnVGVkZHknLAogICAgbGFz
        dE5hbWU6ICAnWmVlbm55JwogIH0pOwoKICB1c2VyLmdldCgnbmlja05hbWUn
        KTsKICAjICdUZWRkeScKCiAgdXNlci5zZXQoJ25pY2tOYW1lJywgJ1RlZGR5
        QmVhcicpOwogICMgdGhyb3dzIEV4Y2VwdGlvbgogICMgdGhyb3cgbmV3IEVt
        YmVyLkVycm9yKCdDYW5ub3QgU2V0OiBuaWNrTmFtZSBvbjogPFVzZXI6ZW1i
        ZXIyNzI4OD4nICk7YAoKICB1c2VyLmdldCgnZmlyc3ROYW1lJyk7CiAgIyAn
        VGVkZHknCiAgYGBgCgogIEBtZXRob2QgY29tcHV0ZWQucmVhZE9ubHkKICBA
        Zm9yIEVtYmVyCiAgQHBhcmFtIHtTdHJpbmd9IGRlcGVuZGVudEtleQogIEBy
        ZXR1cm4ge0VtYmVyLkNvbXB1dGVkUHJvcGVydHl9IGNvbXB1dGVkIHByb3Bl
        cnR5IHdoaWNoIGNyZWF0ZXMgYQogIG9uZSB3YXkgY29tcHV0ZWQgcHJvcGVy
        dHkgdG8gdGhlIG9yaWdpbmFsIHZhbHVlIGZvciBwcm9wZXJ0eS4KKi8KRW1i
        ZXIuY29tcHV0ZWQucmVhZE9ubHkgPSBmdW5jdGlvbihkZXBlbmRlbnRLZXkp
        IHsKICByZXR1cm4gRW1iZXIuY29tcHV0ZWQoZGVwZW5kZW50S2V5LCBmdW5j
        dGlvbigpIHsKICAgIHJldHVybiBnZXQodGhpcywgZGVwZW5kZW50S2V5KTsK
        ICB9KS5yZWFkT25seSgpOwp9OwoKLyoqCiAgQSBjb21wdXRlZCBwcm9wZXJ0
        eSB0aGF0IGFjdHMgbGlrZSBhIHN0YW5kYXJkIGdldHRlciBhbmQgc2V0dGVy
        LAogIGJ1dCByZXR1cm5zIHRoZSB2YWx1ZSBhdCB0aGUgcHJvdmlkZWQgYGRl
        ZmF1bHRQYXRoYCBpZiB0aGUKICBwcm9wZXJ0eSBpdHNlbGYgaGFzIG5vdCBi
        ZWVuIHNldCB0byBhIHZhbHVlCgogIEV4YW1wbGUKCiAgYGBgamF2YXNjcmlw
        dAogIHZhciBIYW1zdGVyID0gRW1iZXIuT2JqZWN0LmV4dGVuZCh7CiAgICB3
        aXNoTGlzdDogRW1iZXIuY29tcHV0ZWQuZGVmYXVsdFRvKCdmYXZvcml0ZUZv
        b2QnKQogIH0pOwogIHZhciBoYW1zdGVyID0gSGFtc3Rlci5jcmVhdGUoe2Zh
        dm9yaXRlRm9vZDogJ0JhbmFuYSd9KTsKICBoYW1zdGVyLmdldCgnd2lzaExp
        c3QnKTsgLy8gJ0JhbmFuYScKICBoYW1zdGVyLnNldCgnd2lzaExpc3QnLCAn
        TW9yZSBVbml0IFRlc3RzJyk7CiAgaGFtc3Rlci5nZXQoJ3dpc2hMaXN0Jyk7
        IC8vICdNb3JlIFVuaXQgVGVzdHMnCiAgaGFtc3Rlci5nZXQoJ2Zhdm9yaXRl
        Rm9vZCcpOyAvLyAnQmFuYW5hJwogIGBgYAoKICBAbWV0aG9kIGNvbXB1dGVk
        LmRlZmF1bHRUbwogIEBmb3IgRW1iZXIKICBAcGFyYW0ge1N0cmluZ30gZGVm
        YXVsdFBhdGgKICBAcmV0dXJuIHtFbWJlci5Db21wdXRlZFByb3BlcnR5fSBj
        b21wdXRlZCBwcm9wZXJ0eSB3aGljaCBhY3RzIGxpa2UKICBhIHN0YW5kYXJk
        IGdldHRlciBhbmQgc2V0dGVyLCBidXQgZGVmYXVsdHMgdG8gdGhlIHZhbHVl
        IGZyb20gYGRlZmF1bHRQYXRoYC4KKi8KRW1iZXIuY29tcHV0ZWQuZGVmYXVs
        dFRvID0gZnVuY3Rpb24oZGVmYXVsdFBhdGgpIHsKICByZXR1cm4gRW1iZXIu
        Y29tcHV0ZWQoZnVuY3Rpb24oa2V5LCBuZXdWYWx1ZSwgY2FjaGVkVmFsdWUp
        IHsKICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAxKSB7CiAgICAgIHJl
        dHVybiBjYWNoZWRWYWx1ZSAhPSBudWxsID8gY2FjaGVkVmFsdWUgOiBnZXQo
        dGhpcywgZGVmYXVsdFBhdGgpOwogICAgfQogICAgcmV0dXJuIG5ld1ZhbHVl
        ICE9IG51bGwgPyBuZXdWYWx1ZSA6IGdldCh0aGlzLCBkZWZhdWx0UGF0aCk7
        CiAgfSk7Cn07CgoKfSkoKTsKCgoKKGZ1bmN0aW9uKCkgewovLyBFbWJlci50
        cnlGaW5hbGx5Ci8qKgpAbW9kdWxlIGVtYmVyLW1ldGFsCiovCgp2YXIgQUZU
        RVJfT0JTRVJWRVJTID0gJzpjaGFuZ2UnLAogICAgQkVGT1JFX09CU0VSVkVS
        UyA9ICc6YmVmb3JlJzsKCmZ1bmN0aW9uIGNoYW5nZUV2ZW50KGtleU5hbWUp
        IHsKICByZXR1cm4ga2V5TmFtZStBRlRFUl9PQlNFUlZFUlM7Cn0KCmZ1bmN0
        aW9uIGJlZm9yZUV2ZW50KGtleU5hbWUpIHsKICByZXR1cm4ga2V5TmFtZStC
        RUZPUkVfT0JTRVJWRVJTOwp9CgovKioKICBAbWV0aG9kIGFkZE9ic2VydmVy
        CiAgQHBhcmFtIG9iagogIEBwYXJhbSB7U3RyaW5nfSBwYXRoCiAgQHBhcmFt
        IHtPYmplY3R8RnVuY3Rpb259IHRhcmdldE9yTWV0aG9kCiAgQHBhcmFtIHtG
        dW5jdGlvbnxTdHJpbmd9IFttZXRob2RdCiovCkVtYmVyLmFkZE9ic2VydmVy
        ID0gZnVuY3Rpb24ob2JqLCBfcGF0aCwgdGFyZ2V0LCBtZXRob2QpIHsKICBF
        bWJlci5hZGRMaXN0ZW5lcihvYmosIGNoYW5nZUV2ZW50KF9wYXRoKSwgdGFy
        Z2V0LCBtZXRob2QpOwogIEVtYmVyLndhdGNoKG9iaiwgX3BhdGgpOwoKICBy
        ZXR1cm4gdGhpczsKfTsKCkVtYmVyLm9ic2VydmVyc0ZvciA9IGZ1bmN0aW9u
        KG9iaiwgcGF0aCkgewogIHJldHVybiBFbWJlci5saXN0ZW5lcnNGb3Iob2Jq
        LCBjaGFuZ2VFdmVudChwYXRoKSk7Cn07CgovKioKICBAbWV0aG9kIHJlbW92
        ZU9ic2VydmVyCiAgQHBhcmFtIG9iagogIEBwYXJhbSB7U3RyaW5nfSBwYXRo
        CiAgQHBhcmFtIHtPYmplY3R8RnVuY3Rpb259IHRhcmdldE9yTWV0aG9kCiAg
        QHBhcmFtIHtGdW5jdGlvbnxTdHJpbmd9IFttZXRob2RdCiovCkVtYmVyLnJl
        bW92ZU9ic2VydmVyID0gZnVuY3Rpb24ob2JqLCBfcGF0aCwgdGFyZ2V0LCBt
        ZXRob2QpIHsKICBFbWJlci51bndhdGNoKG9iaiwgX3BhdGgpOwogIEVtYmVy
        LnJlbW92ZUxpc3RlbmVyKG9iaiwgY2hhbmdlRXZlbnQoX3BhdGgpLCB0YXJn
        ZXQsIG1ldGhvZCk7CgogIHJldHVybiB0aGlzOwp9OwoKLyoqCiAgQG1ldGhv
        ZCBhZGRCZWZvcmVPYnNlcnZlcgogIEBwYXJhbSBvYmoKICBAcGFyYW0ge1N0
        cmluZ30gcGF0aAogIEBwYXJhbSB7T2JqZWN0fEZ1bmN0aW9ufSB0YXJnZXRP
        ck1ldGhvZAogIEBwYXJhbSB7RnVuY3Rpb258U3RyaW5nfSBbbWV0aG9kXQoq
        LwpFbWJlci5hZGRCZWZvcmVPYnNlcnZlciA9IGZ1bmN0aW9uKG9iaiwgX3Bh
        dGgsIHRhcmdldCwgbWV0aG9kKSB7CiAgRW1iZXIuYWRkTGlzdGVuZXIob2Jq
        LCBiZWZvcmVFdmVudChfcGF0aCksIHRhcmdldCwgbWV0aG9kKTsKICBFbWJl
        ci53YXRjaChvYmosIF9wYXRoKTsKCiAgcmV0dXJuIHRoaXM7Cn07CgovLyBT
        dXNwZW5kIG9ic2VydmVyIGR1cmluZyBjYWxsYmFjay4KLy8KLy8gVGhpcyBz
        aG91bGQgb25seSBiZSB1c2VkIGJ5IHRoZSB0YXJnZXQgb2YgdGhlIG9ic2Vy
        dmVyCi8vIHdoaWxlIGl0IGlzIHNldHRpbmcgdGhlIG9ic2VydmVkIHBhdGgu
        CkVtYmVyLl9zdXNwZW5kQmVmb3JlT2JzZXJ2ZXIgPSBmdW5jdGlvbihvYmos
        IHBhdGgsIHRhcmdldCwgbWV0aG9kLCBjYWxsYmFjaykgewogIHJldHVybiBF
        bWJlci5fc3VzcGVuZExpc3RlbmVyKG9iaiwgYmVmb3JlRXZlbnQocGF0aCks
        IHRhcmdldCwgbWV0aG9kLCBjYWxsYmFjayk7Cn07CgpFbWJlci5fc3VzcGVu
        ZE9ic2VydmVyID0gZnVuY3Rpb24ob2JqLCBwYXRoLCB0YXJnZXQsIG1ldGhv
        ZCwgY2FsbGJhY2spIHsKICByZXR1cm4gRW1iZXIuX3N1c3BlbmRMaXN0ZW5l
        cihvYmosIGNoYW5nZUV2ZW50KHBhdGgpLCB0YXJnZXQsIG1ldGhvZCwgY2Fs
        bGJhY2spOwp9OwoKdmFyIG1hcCA9IEVtYmVyLkFycmF5UG9seWZpbGxzLm1h
        cDsKCkVtYmVyLl9zdXNwZW5kQmVmb3JlT2JzZXJ2ZXJzID0gZnVuY3Rpb24o
        b2JqLCBwYXRocywgdGFyZ2V0LCBtZXRob2QsIGNhbGxiYWNrKSB7CiAgdmFy
        IGV2ZW50cyA9IG1hcC5jYWxsKHBhdGhzLCBiZWZvcmVFdmVudCk7CiAgcmV0
        dXJuIEVtYmVyLl9zdXNwZW5kTGlzdGVuZXJzKG9iaiwgZXZlbnRzLCB0YXJn
        ZXQsIG1ldGhvZCwgY2FsbGJhY2spOwp9OwoKRW1iZXIuX3N1c3BlbmRPYnNl
        cnZlcnMgPSBmdW5jdGlvbihvYmosIHBhdGhzLCB0YXJnZXQsIG1ldGhvZCwg
        Y2FsbGJhY2spIHsKICB2YXIgZXZlbnRzID0gbWFwLmNhbGwocGF0aHMsIGNo
        YW5nZUV2ZW50KTsKICByZXR1cm4gRW1iZXIuX3N1c3BlbmRMaXN0ZW5lcnMo
        b2JqLCBldmVudHMsIHRhcmdldCwgbWV0aG9kLCBjYWxsYmFjayk7Cn07CgpF
        bWJlci5iZWZvcmVPYnNlcnZlcnNGb3IgPSBmdW5jdGlvbihvYmosIHBhdGgp
        IHsKICByZXR1cm4gRW1iZXIubGlzdGVuZXJzRm9yKG9iaiwgYmVmb3JlRXZl
        bnQocGF0aCkpOwp9OwoKLyoqCiAgQG1ldGhvZCByZW1vdmVCZWZvcmVPYnNl
        cnZlcgogIEBwYXJhbSBvYmoKICBAcGFyYW0ge1N0cmluZ30gcGF0aAogIEBw
        YXJhbSB7T2JqZWN0fEZ1bmN0aW9ufSB0YXJnZXRPck1ldGhvZAogIEBwYXJh
        bSB7RnVuY3Rpb258U3RyaW5nfSBbbWV0aG9kXQoqLwpFbWJlci5yZW1vdmVC
        ZWZvcmVPYnNlcnZlciA9IGZ1bmN0aW9uKG9iaiwgX3BhdGgsIHRhcmdldCwg
        bWV0aG9kKSB7CiAgRW1iZXIudW53YXRjaChvYmosIF9wYXRoKTsKICBFbWJl
        ci5yZW1vdmVMaXN0ZW5lcihvYmosIGJlZm9yZUV2ZW50KF9wYXRoKSwgdGFy
        Z2V0LCBtZXRob2QpOwoKICByZXR1cm4gdGhpczsKfTsKCn0pKCk7CgoKCihm
        dW5jdGlvbigpIHsKZGVmaW5lKCJiYWNrYnVybmVyL3F1ZXVlIiwgCiAgWyJl
        eHBvcnRzIl0sCiAgZnVuY3Rpb24oX19leHBvcnRzX18pIHsKICAgICJ1c2Ug
        c3RyaWN0IjsKICAgIGZ1bmN0aW9uIFF1ZXVlKGRhcSwgbmFtZSwgb3B0aW9u
        cykgewogICAgICB0aGlzLmRhcSA9IGRhcTsKICAgICAgdGhpcy5uYW1lID0g
        bmFtZTsKICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9uczsKICAgICAgdGhp
        cy5fcXVldWUgPSBbXTsKICAgIH0KCiAgICBRdWV1ZS5wcm90b3R5cGUgPSB7
        CiAgICAgIGRhcTogbnVsbCwKICAgICAgbmFtZTogbnVsbCwKICAgICAgb3B0
        aW9uczogbnVsbCwKICAgICAgX3F1ZXVlOiBudWxsLAoKICAgICAgcHVzaDog
        ZnVuY3Rpb24odGFyZ2V0LCBtZXRob2QsIGFyZ3MsIHN0YWNrKSB7CiAgICAg
        ICAgdmFyIHF1ZXVlID0gdGhpcy5fcXVldWU7CiAgICAgICAgcXVldWUucHVz
        aCh0YXJnZXQsIG1ldGhvZCwgYXJncywgc3RhY2spOwogICAgICAgIHJldHVy
        biB7cXVldWU6IHRoaXMsIHRhcmdldDogdGFyZ2V0LCBtZXRob2Q6IG1ldGhv
        ZH07CiAgICAgIH0sCgogICAgICBwdXNoVW5pcXVlOiBmdW5jdGlvbih0YXJn
        ZXQsIG1ldGhvZCwgYXJncywgc3RhY2spIHsKICAgICAgICB2YXIgcXVldWUg
        PSB0aGlzLl9xdWV1ZSwgY3VycmVudFRhcmdldCwgY3VycmVudE1ldGhvZCwg
        aSwgbDsKCiAgICAgICAgZm9yIChpID0gMCwgbCA9IHF1ZXVlLmxlbmd0aDsg
        aSA8IGw7IGkgKz0gNCkgewogICAgICAgICAgY3VycmVudFRhcmdldCA9IHF1
        ZXVlW2ldOwogICAgICAgICAgY3VycmVudE1ldGhvZCA9IHF1ZXVlW2krMV07
        CgogICAgICAgICAgaWYgKGN1cnJlbnRUYXJnZXQgPT09IHRhcmdldCAmJiBj
        dXJyZW50TWV0aG9kID09PSBtZXRob2QpIHsKICAgICAgICAgICAgcXVldWVb
        aSsyXSA9IGFyZ3M7IC8vIHJlcGxhY2UgYXJncwogICAgICAgICAgICBxdWV1
        ZVtpKzNdID0gc3RhY2s7IC8vIHJlcGxhY2Ugc3RhY2sKICAgICAgICAgICAg
        cmV0dXJuIHtxdWV1ZTogdGhpcywgdGFyZ2V0OiB0YXJnZXQsIG1ldGhvZDog
        bWV0aG9kfTsgLy8gVE9ETzogdGVzdCB0aGlzIGNvZGUgcGF0aAogICAgICAg
        ICAgfQogICAgICAgIH0KCiAgICAgICAgdGhpcy5fcXVldWUucHVzaCh0YXJn
        ZXQsIG1ldGhvZCwgYXJncywgc3RhY2spOwogICAgICAgIHJldHVybiB7cXVl
        dWU6IHRoaXMsIHRhcmdldDogdGFyZ2V0LCBtZXRob2Q6IG1ldGhvZH07CiAg
        ICAgIH0sCgogICAgICAvLyBUT0RPOiByZW1vdmUgbWUsIG9ubHkgYmVpbmcg
        dXNlZCBmb3IgRW1iZXIucnVuLnN5bmMKICAgICAgZmx1c2g6IGZ1bmN0aW9u
        KCkgewogICAgICAgIHZhciBxdWV1ZSA9IHRoaXMuX3F1ZXVlLAogICAgICAg
        ICAgICBvcHRpb25zID0gdGhpcy5vcHRpb25zLAogICAgICAgICAgICBiZWZv
        cmUgPSBvcHRpb25zICYmIG9wdGlvbnMuYmVmb3JlLAogICAgICAgICAgICBh
        ZnRlciA9IG9wdGlvbnMgJiYgb3B0aW9ucy5hZnRlciwKICAgICAgICAgICAg
        dGFyZ2V0LCBtZXRob2QsIGFyZ3MsIHN0YWNrLCBpLCBsID0gcXVldWUubGVu
        Z3RoOwoKICAgICAgICBpZiAobCAmJiBiZWZvcmUpIHsgYmVmb3JlKCk7IH0K
        ICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbDsgaSArPSA0KSB7CiAgICAgICAg
        ICB0YXJnZXQgPSBxdWV1ZVtpXTsKICAgICAgICAgIG1ldGhvZCA9IHF1ZXVl
        W2krMV07CiAgICAgICAgICBhcmdzICAgPSBxdWV1ZVtpKzJdOwogICAgICAg
        ICAgc3RhY2sgID0gcXVldWVbaSszXTsgLy8gRGVidWdnaW5nIGFzc2lzdGFu
        Y2UKCiAgICAgICAgICAvLyBUT0RPOiBlcnJvciBoYW5kbGluZwogICAgICAg
        ICAgaWYgKGFyZ3MgJiYgYXJncy5sZW5ndGggPiAwKSB7CiAgICAgICAgICAg
        IG1ldGhvZC5hcHBseSh0YXJnZXQsIGFyZ3MpOwogICAgICAgICAgfSBlbHNl
        IHsKICAgICAgICAgICAgbWV0aG9kLmNhbGwodGFyZ2V0KTsKICAgICAgICAg
        IH0KICAgICAgICB9CiAgICAgICAgaWYgKGwgJiYgYWZ0ZXIpIHsgYWZ0ZXIo
        KTsgfQoKICAgICAgICAvLyBjaGVjayBpZiBuZXcgaXRlbXMgaGF2ZSBiZWVu
        IGFkZGVkCiAgICAgICAgaWYgKHF1ZXVlLmxlbmd0aCA+IGwpIHsKICAgICAg
        ICAgIHRoaXMuX3F1ZXVlID0gcXVldWUuc2xpY2UobCk7CiAgICAgICAgICB0
        aGlzLmZsdXNoKCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMu
        X3F1ZXVlLmxlbmd0aCA9IDA7CiAgICAgICAgfQogICAgICB9LAoKICAgICAg
        Y2FuY2VsOiBmdW5jdGlvbihhY3Rpb25Ub0NhbmNlbCkgewogICAgICAgIHZh
        ciBxdWV1ZSA9IHRoaXMuX3F1ZXVlLCBjdXJyZW50VGFyZ2V0LCBjdXJyZW50
        TWV0aG9kLCBpLCBsOwoKICAgICAgICBmb3IgKGkgPSAwLCBsID0gcXVldWUu
        bGVuZ3RoOyBpIDwgbDsgaSArPSA0KSB7CiAgICAgICAgICBjdXJyZW50VGFy
        Z2V0ID0gcXVldWVbaV07CiAgICAgICAgICBjdXJyZW50TWV0aG9kID0gcXVl
        dWVbaSsxXTsKCiAgICAgICAgICBpZiAoY3VycmVudFRhcmdldCA9PT0gYWN0
        aW9uVG9DYW5jZWwudGFyZ2V0ICYmIGN1cnJlbnRNZXRob2QgPT09IGFjdGlv
        blRvQ2FuY2VsLm1ldGhvZCkgewogICAgICAgICAgICBxdWV1ZS5zcGxpY2Uo
        aSwgNCk7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgfQog
        ICAgICAgIH0KCiAgICAgICAgLy8gaWYgbm90IGZvdW5kIGluIGN1cnJlbnQg
        cXVldWUKICAgICAgICAvLyBjb3VsZCBiZSBpbiB0aGUgcXVldWUgdGhhdCBp
        cyBiZWluZyBmbHVzaGVkCiAgICAgICAgcXVldWUgPSB0aGlzLl9xdWV1ZUJl
        aW5nRmx1c2hlZDsKICAgICAgICBpZiAoIXF1ZXVlKSB7CiAgICAgICAgICBy
        ZXR1cm47CiAgICAgICAgfQogICAgICAgIGZvciAoaSA9IDAsIGwgPSBxdWV1
        ZS5sZW5ndGg7IGkgPCBsOyBpICs9IDQpIHsKICAgICAgICAgIGN1cnJlbnRU
        YXJnZXQgPSBxdWV1ZVtpXTsKICAgICAgICAgIGN1cnJlbnRNZXRob2QgPSBx
        dWV1ZVtpKzFdOwoKICAgICAgICAgIGlmIChjdXJyZW50VGFyZ2V0ID09PSBh
        Y3Rpb25Ub0NhbmNlbC50YXJnZXQgJiYgY3VycmVudE1ldGhvZCA9PT0gYWN0
        aW9uVG9DYW5jZWwubWV0aG9kKSB7CiAgICAgICAgICAgIC8vIGRvbid0IG1l
        c3Mgd2l0aCBhcnJheSBkdXJpbmcgZmx1c2gKICAgICAgICAgICAgLy8ganVz
        dCBudWxsaWZ5IHRoZSBtZXRob2QKICAgICAgICAgICAgcXVldWVbaSsxXSA9
        IG51bGw7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgfQog
        ICAgICAgIH0KICAgICAgfQogICAgfTsKCiAgICBfX2V4cG9ydHNfXy5RdWV1
        ZSA9IFF1ZXVlOwogIH0pOwoKZGVmaW5lKCJiYWNrYnVybmVyL2RlZmVycmVk
        X2FjdGlvbl9xdWV1ZXMiLCAKICBbImJhY2tidXJuZXIvcXVldWUiLCJleHBv
        cnRzIl0sCiAgZnVuY3Rpb24oX19kZXBlbmRlbmN5MV9fLCBfX2V4cG9ydHNf
        XykgewogICAgInVzZSBzdHJpY3QiOwogICAgdmFyIFF1ZXVlID0gX19kZXBl
        bmRlbmN5MV9fLlF1ZXVlOwoKICAgIGZ1bmN0aW9uIERlZmVycmVkQWN0aW9u
        UXVldWVzKHF1ZXVlTmFtZXMsIG9wdGlvbnMpIHsKICAgICAgdmFyIHF1ZXVl
        cyA9IHRoaXMucXVldWVzID0ge307CiAgICAgIHRoaXMucXVldWVOYW1lcyA9
        IHF1ZXVlTmFtZXMgPSBxdWV1ZU5hbWVzIHx8IFtdOwoKICAgICAgdmFyIHF1
        ZXVlTmFtZTsKICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBxdWV1ZU5hbWVz
        Lmxlbmd0aDsgaSA8IGw7IGkrKykgewogICAgICAgIHF1ZXVlTmFtZSA9IHF1
        ZXVlTmFtZXNbaV07CiAgICAgICAgcXVldWVzW3F1ZXVlTmFtZV0gPSBuZXcg
        UXVldWUodGhpcywgcXVldWVOYW1lLCBvcHRpb25zW3F1ZXVlTmFtZV0pOwog
        ICAgICB9CiAgICB9CgogICAgRGVmZXJyZWRBY3Rpb25RdWV1ZXMucHJvdG90
        eXBlID0gewogICAgICBxdWV1ZU5hbWVzOiBudWxsLAogICAgICBxdWV1ZXM6
        IG51bGwsCgogICAgICBzY2hlZHVsZTogZnVuY3Rpb24ocXVldWVOYW1lLCB0
        YXJnZXQsIG1ldGhvZCwgYXJncywgb25jZUZsYWcsIHN0YWNrKSB7CiAgICAg
        ICAgdmFyIHF1ZXVlcyA9IHRoaXMucXVldWVzLAogICAgICAgICAgICBxdWV1
        ZSA9IHF1ZXVlc1txdWV1ZU5hbWVdOwoKICAgICAgICBpZiAoIXF1ZXVlKSB7
        IHRocm93IG5ldyBFcnJvcigiWW91IGF0dGVtcHRlZCB0byBzY2hlZHVsZSBh
        biBhY3Rpb24gaW4gYSBxdWV1ZSAoIiArIHF1ZXVlTmFtZSArICIpIHRoYXQg
        ZG9lc24ndCBleGlzdCIpOyB9CgogICAgICAgIGlmIChvbmNlRmxhZykgewog
        ICAgICAgICAgcmV0dXJuIHF1ZXVlLnB1c2hVbmlxdWUodGFyZ2V0LCBtZXRo
        b2QsIGFyZ3MsIHN0YWNrKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAg
        cmV0dXJuIHF1ZXVlLnB1c2godGFyZ2V0LCBtZXRob2QsIGFyZ3MsIHN0YWNr
        KTsKICAgICAgICB9CiAgICAgIH0sCgogICAgICBmbHVzaDogZnVuY3Rpb24o
        KSB7CiAgICAgICAgdmFyIHF1ZXVlcyA9IHRoaXMucXVldWVzLAogICAgICAg
        ICAgICBxdWV1ZU5hbWVzID0gdGhpcy5xdWV1ZU5hbWVzLAogICAgICAgICAg
        ICBxdWV1ZU5hbWUsIHF1ZXVlLCBxdWV1ZUl0ZW1zLCBwcmlvclF1ZXVlTmFt
        ZUluZGV4LAogICAgICAgICAgICBxdWV1ZU5hbWVJbmRleCA9IDAsIG51bWJl
        ck9mUXVldWVzID0gcXVldWVOYW1lcy5sZW5ndGg7CgogICAgICAgIG91dGVy
        bG9vcDoKICAgICAgICB3aGlsZSAocXVldWVOYW1lSW5kZXggPCBudW1iZXJP
        ZlF1ZXVlcykgewogICAgICAgICAgcXVldWVOYW1lID0gcXVldWVOYW1lc1tx
        dWV1ZU5hbWVJbmRleF07CiAgICAgICAgICBxdWV1ZSA9IHF1ZXVlc1txdWV1
        ZU5hbWVdOwogICAgICAgICAgcXVldWVJdGVtcyA9IHF1ZXVlLl9xdWV1ZUJl
        aW5nRmx1c2hlZCA9IHF1ZXVlLl9xdWV1ZS5zbGljZSgpOwogICAgICAgICAg
        cXVldWUuX3F1ZXVlID0gW107CgogICAgICAgICAgdmFyIG9wdGlvbnMgPSBx
        dWV1ZS5vcHRpb25zLAogICAgICAgICAgICAgIGJlZm9yZSA9IG9wdGlvbnMg
        JiYgb3B0aW9ucy5iZWZvcmUsCiAgICAgICAgICAgICAgYWZ0ZXIgPSBvcHRp
        b25zICYmIG9wdGlvbnMuYWZ0ZXIsCiAgICAgICAgICAgICAgdGFyZ2V0LCBt
        ZXRob2QsIGFyZ3MsIHN0YWNrLAogICAgICAgICAgICAgIHF1ZXVlSW5kZXgg
        PSAwLCBudW1iZXJPZlF1ZXVlSXRlbXMgPSBxdWV1ZUl0ZW1zLmxlbmd0aDsK
        CiAgICAgICAgICBpZiAobnVtYmVyT2ZRdWV1ZUl0ZW1zICYmIGJlZm9yZSkg
        eyBiZWZvcmUoKTsgfQogICAgICAgICAgd2hpbGUgKHF1ZXVlSW5kZXggPCBu
        dW1iZXJPZlF1ZXVlSXRlbXMpIHsKICAgICAgICAgICAgdGFyZ2V0ID0gcXVl
        dWVJdGVtc1txdWV1ZUluZGV4XTsKICAgICAgICAgICAgbWV0aG9kID0gcXVl
        dWVJdGVtc1txdWV1ZUluZGV4KzFdOwogICAgICAgICAgICBhcmdzICAgPSBx
        dWV1ZUl0ZW1zW3F1ZXVlSW5kZXgrMl07CiAgICAgICAgICAgIHN0YWNrICA9
        IHF1ZXVlSXRlbXNbcXVldWVJbmRleCszXTsgLy8gRGVidWdnaW5nIGFzc2lz
        dGFuY2UKCiAgICAgICAgICAgIGlmICh0eXBlb2YgbWV0aG9kID09PSAnc3Ry
        aW5nJykgeyBtZXRob2QgPSB0YXJnZXRbbWV0aG9kXTsgfQoKICAgICAgICAg
        ICAgLy8gbWV0aG9kIGNvdWxkIGhhdmUgYmVlbiBudWxsaWZpZWQgLyBjYW5j
        ZWxlZCBkdXJpbmcgZmx1c2gKICAgICAgICAgICAgaWYgKG1ldGhvZCkgewog
        ICAgICAgICAgICAgIC8vIFRPRE86IGVycm9yIGhhbmRsaW5nCiAgICAgICAg
        ICAgICAgaWYgKGFyZ3MgJiYgYXJncy5sZW5ndGggPiAwKSB7CiAgICAgICAg
        ICAgICAgICBtZXRob2QuYXBwbHkodGFyZ2V0LCBhcmdzKTsKICAgICAgICAg
        ICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgbWV0aG9kLmNhbGwodGFy
        Z2V0KTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAg
        ICAgIHF1ZXVlSW5kZXggKz0gNDsKICAgICAgICAgIH0KICAgICAgICAgIHF1
        ZXVlLl9xdWV1ZUJlaW5nRmx1c2hlZCA9IG51bGw7CiAgICAgICAgICBpZiAo
        bnVtYmVyT2ZRdWV1ZUl0ZW1zICYmIGFmdGVyKSB7IGFmdGVyKCk7IH0KCiAg
        ICAgICAgICBpZiAoKHByaW9yUXVldWVOYW1lSW5kZXggPSBpbmRleE9mUHJp
        b3JRdWV1ZVdpdGhBY3Rpb25zKHRoaXMsIHF1ZXVlTmFtZUluZGV4KSkgIT09
        IC0xKSB7CiAgICAgICAgICAgIHF1ZXVlTmFtZUluZGV4ID0gcHJpb3JRdWV1
        ZU5hbWVJbmRleDsKICAgICAgICAgICAgY29udGludWUgb3V0ZXJsb29wOwog
        ICAgICAgICAgfQoKICAgICAgICAgIHF1ZXVlTmFtZUluZGV4Kys7CiAgICAg
        ICAgfQogICAgICB9CiAgICB9OwoKICAgIGZ1bmN0aW9uIGluZGV4T2ZQcmlv
        clF1ZXVlV2l0aEFjdGlvbnMoZGFxLCBjdXJyZW50UXVldWVJbmRleCkgewog
        ICAgICB2YXIgcXVldWVOYW1lLCBxdWV1ZTsKCiAgICAgIGZvciAodmFyIGkg
        PSAwLCBsID0gY3VycmVudFF1ZXVlSW5kZXg7IGkgPD0gbDsgaSsrKSB7CiAg
        ICAgICAgcXVldWVOYW1lID0gZGFxLnF1ZXVlTmFtZXNbaV07CiAgICAgICAg
        cXVldWUgPSBkYXEucXVldWVzW3F1ZXVlTmFtZV07CiAgICAgICAgaWYgKHF1
        ZXVlLl9xdWV1ZS5sZW5ndGgpIHsgcmV0dXJuIGk7IH0KICAgICAgfQoKICAg
        ICAgcmV0dXJuIC0xOwogICAgfQoKICAgIF9fZXhwb3J0c19fLkRlZmVycmVk
        QWN0aW9uUXVldWVzID0gRGVmZXJyZWRBY3Rpb25RdWV1ZXM7CiAgfSk7Cgpk
        ZWZpbmUoImJhY2tidXJuZXIiLCAKICBbImJhY2tidXJuZXIvZGVmZXJyZWRf
        YWN0aW9uX3F1ZXVlcyIsImV4cG9ydHMiXSwKICBmdW5jdGlvbihfX2RlcGVu
        ZGVuY3kxX18sIF9fZXhwb3J0c19fKSB7CiAgICAidXNlIHN0cmljdCI7CiAg
        ICB2YXIgRGVmZXJyZWRBY3Rpb25RdWV1ZXMgPSBfX2RlcGVuZGVuY3kxX18u
        RGVmZXJyZWRBY3Rpb25RdWV1ZXM7CgogICAgdmFyIHNsaWNlID0gW10uc2xp
        Y2UsCiAgICAgICAgcG9wID0gW10ucG9wLAogICAgICAgIHRocm90dGxlcnMg
        PSBbXSwKICAgICAgICBkZWJvdW5jZWVzID0gW10sCiAgICAgICAgdGltZXJz
        ID0gW10sCiAgICAgICAgYXV0b3J1biwgbGF0ZXJUaW1lciwgbGF0ZXJUaW1l
        ckV4cGlyZXNBdCwKICAgICAgICBnbG9iYWwgPSB0aGlzLAogICAgICAgIE5V
        TUJFUiA9IC9cZCsvOwoKICAgIGZ1bmN0aW9uIGlzQ29lcmNhYmxlTnVtYmVy
        KG51bWJlcikgewogICAgICByZXR1cm4gdHlwZW9mIG51bWJlciA9PT0gJ251
        bWJlcicgfHwgTlVNQkVSLnRlc3QobnVtYmVyKTsKICAgIH0KCiAgICBmdW5j
        dGlvbiBCYWNrYnVybmVyKHF1ZXVlTmFtZXMsIG9wdGlvbnMpIHsKICAgICAg
        dGhpcy5xdWV1ZU5hbWVzID0gcXVldWVOYW1lczsKICAgICAgdGhpcy5vcHRp
        b25zID0gb3B0aW9ucyB8fCB7fTsKICAgICAgaWYgKCF0aGlzLm9wdGlvbnMu
        ZGVmYXVsdFF1ZXVlKSB7CiAgICAgICAgdGhpcy5vcHRpb25zLmRlZmF1bHRR
        dWV1ZSA9IHF1ZXVlTmFtZXNbMF07CiAgICAgIH0KICAgICAgdGhpcy5pbnN0
        YW5jZVN0YWNrID0gW107CiAgICB9CgogICAgQmFja2J1cm5lci5wcm90b3R5
        cGUgPSB7CiAgICAgIHF1ZXVlTmFtZXM6IG51bGwsCiAgICAgIG9wdGlvbnM6
        IG51bGwsCiAgICAgIGN1cnJlbnRJbnN0YW5jZTogbnVsbCwKICAgICAgaW5z
        dGFuY2VTdGFjazogbnVsbCwKCiAgICAgIGJlZ2luOiBmdW5jdGlvbigpIHsK
        ICAgICAgICB2YXIgb25CZWdpbiA9IHRoaXMub3B0aW9ucyAmJiB0aGlzLm9w
        dGlvbnMub25CZWdpbiwKICAgICAgICAgICAgcHJldmlvdXNJbnN0YW5jZSA9
        IHRoaXMuY3VycmVudEluc3RhbmNlOwoKICAgICAgICBpZiAocHJldmlvdXNJ
        bnN0YW5jZSkgewogICAgICAgICAgdGhpcy5pbnN0YW5jZVN0YWNrLnB1c2go
        cHJldmlvdXNJbnN0YW5jZSk7CiAgICAgICAgfQoKICAgICAgICB0aGlzLmN1
        cnJlbnRJbnN0YW5jZSA9IG5ldyBEZWZlcnJlZEFjdGlvblF1ZXVlcyh0aGlz
        LnF1ZXVlTmFtZXMsIHRoaXMub3B0aW9ucyk7CiAgICAgICAgaWYgKG9uQmVn
        aW4pIHsKICAgICAgICAgIG9uQmVnaW4odGhpcy5jdXJyZW50SW5zdGFuY2Us
        IHByZXZpb3VzSW5zdGFuY2UpOwogICAgICAgIH0KICAgICAgfSwKCiAgICAg
        IGVuZDogZnVuY3Rpb24oKSB7CiAgICAgICAgdmFyIG9uRW5kID0gdGhpcy5v
        cHRpb25zICYmIHRoaXMub3B0aW9ucy5vbkVuZCwKICAgICAgICAgICAgY3Vy
        cmVudEluc3RhbmNlID0gdGhpcy5jdXJyZW50SW5zdGFuY2UsCiAgICAgICAg
        ICAgIG5leHRJbnN0YW5jZSA9IG51bGw7CgogICAgICAgIHRyeSB7CiAgICAg
        ICAgICBjdXJyZW50SW5zdGFuY2UuZmx1c2goKTsKICAgICAgICB9IGZpbmFs
        bHkgewogICAgICAgICAgdGhpcy5jdXJyZW50SW5zdGFuY2UgPSBudWxsOwoK
        ICAgICAgICAgIGlmICh0aGlzLmluc3RhbmNlU3RhY2subGVuZ3RoKSB7CiAg
        ICAgICAgICAgIG5leHRJbnN0YW5jZSA9IHRoaXMuaW5zdGFuY2VTdGFjay5w
        b3AoKTsKICAgICAgICAgICAgdGhpcy5jdXJyZW50SW5zdGFuY2UgPSBuZXh0
        SW5zdGFuY2U7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKG9uRW5kKSB7
        CiAgICAgICAgICAgIG9uRW5kKGN1cnJlbnRJbnN0YW5jZSwgbmV4dEluc3Rh
        bmNlKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sCgogICAgICBy
        dW46IGZ1bmN0aW9uKHRhcmdldCwgbWV0aG9kIC8qLCBhcmdzICovKSB7CiAg
        ICAgICAgdmFyIHJldDsKICAgICAgICB0aGlzLmJlZ2luKCk7CgogICAgICAg
        IGlmICghbWV0aG9kKSB7CiAgICAgICAgICBtZXRob2QgPSB0YXJnZXQ7CiAg
        ICAgICAgICB0YXJnZXQgPSBudWxsOwogICAgICAgIH0KCiAgICAgICAgaWYg
        KHR5cGVvZiBtZXRob2QgPT09ICdzdHJpbmcnKSB7CiAgICAgICAgICBtZXRo
        b2QgPSB0YXJnZXRbbWV0aG9kXTsKICAgICAgICB9CgogICAgICAgIC8vIFBy
        ZXZlbnQgU2FmYXJpIGRvdWJsZS1maW5hbGx5LgogICAgICAgIHZhciBmaW5h
        bGx5QWxyZWFkeUNhbGxlZCA9IGZhbHNlOwogICAgICAgIHRyeSB7CiAgICAg
        ICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDIpIHsKICAgICAgICAgICAg
        cmV0ID0gbWV0aG9kLmFwcGx5KHRhcmdldCwgc2xpY2UuY2FsbChhcmd1bWVu
        dHMsIDIpKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJldCA9
        IG1ldGhvZC5jYWxsKHRhcmdldCk7CiAgICAgICAgICB9CiAgICAgICAgfSBm
        aW5hbGx5IHsKICAgICAgICAgIGlmICghZmluYWxseUFscmVhZHlDYWxsZWQp
        IHsKICAgICAgICAgICAgZmluYWxseUFscmVhZHlDYWxsZWQgPSB0cnVlOwog
        ICAgICAgICAgICB0aGlzLmVuZCgpOwogICAgICAgICAgfQogICAgICAgIH0K
        ICAgICAgICByZXR1cm4gcmV0OwogICAgICB9LAoKICAgICAgZGVmZXI6IGZ1
        bmN0aW9uKHF1ZXVlTmFtZSwgdGFyZ2V0LCBtZXRob2QgLyogLCBhcmdzICov
        KSB7CiAgICAgICAgaWYgKCFtZXRob2QpIHsKICAgICAgICAgIG1ldGhvZCA9
        IHRhcmdldDsKICAgICAgICAgIHRhcmdldCA9IG51bGw7CiAgICAgICAgfQoK
        ICAgICAgICBpZiAodHlwZW9mIG1ldGhvZCA9PT0gJ3N0cmluZycpIHsKICAg
        ICAgICAgIG1ldGhvZCA9IHRhcmdldFttZXRob2RdOwogICAgICAgIH0KCiAg
        ICAgICAgdmFyIHN0YWNrID0gdGhpcy5ERUJVRyA/IG5ldyBFcnJvcigpIDog
        dW5kZWZpbmVkLAogICAgICAgICAgICBhcmdzID0gYXJndW1lbnRzLmxlbmd0
        aCA+IDMgPyBzbGljZS5jYWxsKGFyZ3VtZW50cywgMykgOiB1bmRlZmluZWQ7
        CiAgICAgICAgaWYgKCF0aGlzLmN1cnJlbnRJbnN0YW5jZSkgeyBjcmVhdGVB
        dXRvcnVuKHRoaXMpOyB9CiAgICAgICAgcmV0dXJuIHRoaXMuY3VycmVudElu
        c3RhbmNlLnNjaGVkdWxlKHF1ZXVlTmFtZSwgdGFyZ2V0LCBtZXRob2QsIGFy
        Z3MsIGZhbHNlLCBzdGFjayk7CiAgICAgIH0sCgogICAgICBkZWZlck9uY2U6
        IGZ1bmN0aW9uKHF1ZXVlTmFtZSwgdGFyZ2V0LCBtZXRob2QgLyogLCBhcmdz
        ICovKSB7CiAgICAgICAgaWYgKCFtZXRob2QpIHsKICAgICAgICAgIG1ldGhv
        ZCA9IHRhcmdldDsKICAgICAgICAgIHRhcmdldCA9IG51bGw7CiAgICAgICAg
        fQoKICAgICAgICBpZiAodHlwZW9mIG1ldGhvZCA9PT0gJ3N0cmluZycpIHsK
        ICAgICAgICAgIG1ldGhvZCA9IHRhcmdldFttZXRob2RdOwogICAgICAgIH0K
        CiAgICAgICAgdmFyIHN0YWNrID0gdGhpcy5ERUJVRyA/IG5ldyBFcnJvcigp
        IDogdW5kZWZpbmVkLAogICAgICAgICAgICBhcmdzID0gYXJndW1lbnRzLmxl
        bmd0aCA+IDMgPyBzbGljZS5jYWxsKGFyZ3VtZW50cywgMykgOiB1bmRlZmlu
        ZWQ7CiAgICAgICAgaWYgKCF0aGlzLmN1cnJlbnRJbnN0YW5jZSkgeyBjcmVh
        dGVBdXRvcnVuKHRoaXMpOyB9CiAgICAgICAgcmV0dXJuIHRoaXMuY3VycmVu
        dEluc3RhbmNlLnNjaGVkdWxlKHF1ZXVlTmFtZSwgdGFyZ2V0LCBtZXRob2Qs
        IGFyZ3MsIHRydWUsIHN0YWNrKTsKICAgICAgfSwKCiAgICAgIHNldFRpbWVv
        dXQ6IGZ1bmN0aW9uKCkgewogICAgICAgIHZhciBhcmdzID0gc2xpY2UuY2Fs
        bChhcmd1bWVudHMpOwogICAgICAgIHZhciBsZW5ndGggPSBhcmdzLmxlbmd0
        aDsKICAgICAgICB2YXIgbWV0aG9kLCB3YWl0LCB0YXJnZXQ7CiAgICAgICAg
        dmFyIHNlbGYgPSB0aGlzOwogICAgICAgIHZhciBtZXRob2RPclRhcmdldCwg
        bWV0aG9kT3JXYWl0LCBtZXRob2RPckFyZ3M7CgogICAgICAgIGlmIChsZW5n
        dGggPT09IDApIHsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9IGVsc2Ug
        aWYgKGxlbmd0aCA9PT0gMSkgewogICAgICAgICAgbWV0aG9kID0gYXJncy5z
        aGlmdCgpOwogICAgICAgICAgd2FpdCA9IDA7CiAgICAgICAgfSBlbHNlIGlm
        IChsZW5ndGggPT09IDIpIHsKICAgICAgICAgIG1ldGhvZE9yVGFyZ2V0ID0g
        YXJnc1swXTsKICAgICAgICAgIG1ldGhvZE9yV2FpdCA9IGFyZ3NbMV07Cgog
        ICAgICAgICAgaWYgKHR5cGVvZiBtZXRob2RPcldhaXQgPT09ICdmdW5jdGlv
        bicgfHwgdHlwZW9mICBtZXRob2RPclRhcmdldFttZXRob2RPcldhaXRdID09
        PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICAgIHRhcmdldCA9IGFyZ3Muc2hp
        ZnQoKTsKICAgICAgICAgICAgbWV0aG9kID0gYXJncy5zaGlmdCgpOwogICAg
        ICAgICAgICB3YWl0ID0gMDsKICAgICAgICAgIH0gZWxzZSBpZiAoaXNDb2Vy
        Y2FibGVOdW1iZXIobWV0aG9kT3JXYWl0KSkgewogICAgICAgICAgICBtZXRo
        b2QgPSBhcmdzLnNoaWZ0KCk7CiAgICAgICAgICAgIHdhaXQgPSBhcmdzLnNo
        aWZ0KCk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBtZXRob2Qg
        PSBhcmdzLnNoaWZ0KCk7CiAgICAgICAgICAgIHdhaXQgPSAgMDsKICAgICAg
        ICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgdmFyIGxhc3QgPSBh
        cmdzW2FyZ3MubGVuZ3RoIC0gMV07CgogICAgICAgICAgaWYgKGlzQ29lcmNh
        YmxlTnVtYmVyKGxhc3QpKSB7CiAgICAgICAgICAgIHdhaXQgPSBhcmdzLnBv
        cCgpOwogICAgICAgICAgfQoKICAgICAgICAgIG1ldGhvZE9yVGFyZ2V0ID0g
        YXJnc1swXTsKICAgICAgICAgIG1ldGhvZE9yQXJncyA9IGFyZ3NbMV07Cgog
        ICAgICAgICAgaWYgKHR5cGVvZiBtZXRob2RPckFyZ3MgPT09ICdmdW5jdGlv
        bicgfHwgKHR5cGVvZiBtZXRob2RPckFyZ3MgPT09ICdzdHJpbmcnICYmCiAg
        ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
        ICAgICAgbWV0aG9kT3JUYXJnZXQgIT09IG51bGwgJiYKICAgICAgICAgICAg
        ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRo
        b2RPckFyZ3MgaW4gbWV0aG9kT3JUYXJnZXQpKSB7CiAgICAgICAgICAgIHRh
        cmdldCA9IGFyZ3Muc2hpZnQoKTsKICAgICAgICAgICAgbWV0aG9kID0gYXJn
        cy5zaGlmdCgpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgbWV0
        aG9kID0gYXJncy5zaGlmdCgpOwogICAgICAgICAgfQogICAgICAgIH0KCiAg
        ICAgICAgdmFyIGV4ZWN1dGVBdCA9ICgrbmV3IERhdGUoKSkgKyBwYXJzZUlu
        dCh3YWl0LCAxMCk7CgogICAgICAgIGlmICh0eXBlb2YgbWV0aG9kID09PSAn
        c3RyaW5nJykgewogICAgICAgICAgbWV0aG9kID0gdGFyZ2V0W21ldGhvZF07
        CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBmbigpIHsKICAgICAgICAg
        IG1ldGhvZC5hcHBseSh0YXJnZXQsIGFyZ3MpOwogICAgICAgIH0KCiAgICAg
        ICAgLy8gZmluZCBwb3NpdGlvbiB0byBpbnNlcnQgLSBUT0RPOiBiaW5hcnkg
        c2VhcmNoCiAgICAgICAgdmFyIGksIGw7CiAgICAgICAgZm9yIChpID0gMCwg
        bCA9IHRpbWVycy5sZW5ndGg7IGkgPCBsOyBpICs9IDIpIHsKICAgICAgICAg
        IGlmIChleGVjdXRlQXQgPCB0aW1lcnNbaV0pIHsgYnJlYWs7IH0KICAgICAg
        ICB9CgogICAgICAgIHRpbWVycy5zcGxpY2UoaSwgMCwgZXhlY3V0ZUF0LCBm
        bik7CgogICAgICAgIHVwZGF0ZUxhdGVyVGltZXIoc2VsZiwgZXhlY3V0ZUF0
        LCB3YWl0KTsKCiAgICAgICAgcmV0dXJuIGZuOwogICAgICB9LAoKICAgICAg
        dGhyb3R0bGU6IGZ1bmN0aW9uKHRhcmdldCwgbWV0aG9kIC8qICwgYXJncywg
        d2FpdCwgW2ltbWVkaWF0ZV0gKi8pIHsKICAgICAgICB2YXIgc2VsZiA9IHRo
        aXMsCiAgICAgICAgICAgIGFyZ3MgPSBhcmd1bWVudHMsCiAgICAgICAgICAg
        IGltbWVkaWF0ZSA9IHBvcC5jYWxsKGFyZ3MpLAogICAgICAgICAgICB3YWl0
        LAogICAgICAgICAgICB0aHJvdHRsZXIsCiAgICAgICAgICAgIGluZGV4LAog
        ICAgICAgICAgICB0aW1lcjsKCiAgICAgICAgaWYgKHR5cGVvZiBpbW1lZGlh
        dGUgPT09ICJudW1iZXIiIHx8IHR5cGVvZiBpbW1lZGlhdGUgPT09ICJzdHJp
        bmciKSB7CiAgICAgICAgICB3YWl0ID0gaW1tZWRpYXRlOwogICAgICAgICAg
        aW1tZWRpYXRlID0gdHJ1ZTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAg
        d2FpdCA9IHBvcC5jYWxsKGFyZ3MpOwogICAgICAgIH0KCiAgICAgICAgd2Fp
        dCA9IHBhcnNlSW50KHdhaXQsIDEwKTsKCiAgICAgICAgaW5kZXggPSBmaW5k
        VGhyb3R0bGVyKHRhcmdldCwgbWV0aG9kKTsKICAgICAgICBpZiAoaW5kZXgg
        PiAtMSkgeyByZXR1cm4gdGhyb3R0bGVyc1tpbmRleF07IH0gLy8gdGhyb3R0
        bGVkCgogICAgICAgIHRpbWVyID0gZ2xvYmFsLnNldFRpbWVvdXQoZnVuY3Rp
        b24oKSB7CiAgICAgICAgICBpZiAoIWltbWVkaWF0ZSkgewogICAgICAgICAg
        ICBzZWxmLnJ1bi5hcHBseShzZWxmLCBhcmdzKTsKICAgICAgICAgIH0KICAg
        ICAgICAgIHZhciBpbmRleCA9IGZpbmRUaHJvdHRsZXIodGFyZ2V0LCBtZXRo
        b2QpOwogICAgICAgICAgaWYgKGluZGV4ID4gLTEpIHsgdGhyb3R0bGVycy5z
        cGxpY2UoaW5kZXgsIDEpOyB9CiAgICAgICAgfSwgd2FpdCk7CgogICAgICAg
        IGlmIChpbW1lZGlhdGUpIHsKICAgICAgICAgIHNlbGYucnVuLmFwcGx5KHNl
        bGYsIGFyZ3MpOwogICAgICAgIH0KCiAgICAgICAgdGhyb3R0bGVyID0gW3Rh
        cmdldCwgbWV0aG9kLCB0aW1lcl07CgogICAgICAgIHRocm90dGxlcnMucHVz
        aCh0aHJvdHRsZXIpOwoKICAgICAgICByZXR1cm4gdGhyb3R0bGVyOwogICAg
        ICB9LAoKICAgICAgZGVib3VuY2U6IGZ1bmN0aW9uKHRhcmdldCwgbWV0aG9k
        IC8qICwgYXJncywgd2FpdCwgW2ltbWVkaWF0ZV0gKi8pIHsKICAgICAgICB2
        YXIgc2VsZiA9IHRoaXMsCiAgICAgICAgICAgIGFyZ3MgPSBhcmd1bWVudHMs
        CiAgICAgICAgICAgIGltbWVkaWF0ZSA9IHBvcC5jYWxsKGFyZ3MpLAogICAg
        ICAgICAgICB3YWl0LAogICAgICAgICAgICBpbmRleCwKICAgICAgICAgICAg
        ZGVib3VuY2VlLAogICAgICAgICAgICB0aW1lcjsKCiAgICAgICAgaWYgKHR5
        cGVvZiBpbW1lZGlhdGUgPT09ICJudW1iZXIiIHx8IHR5cGVvZiBpbW1lZGlh
        dGUgPT09ICJzdHJpbmciKSB7CiAgICAgICAgICB3YWl0ID0gaW1tZWRpYXRl
        OwogICAgICAgICAgaW1tZWRpYXRlID0gZmFsc2U7CiAgICAgICAgfSBlbHNl
        IHsKICAgICAgICAgIHdhaXQgPSBwb3AuY2FsbChhcmdzKTsKICAgICAgICB9
        CgogICAgICAgIHdhaXQgPSBwYXJzZUludCh3YWl0LCAxMCk7CiAgICAgICAg
        Ly8gUmVtb3ZlIGRlYm91bmNlZQogICAgICAgIGluZGV4ID0gZmluZERlYm91
        bmNlZSh0YXJnZXQsIG1ldGhvZCk7CgogICAgICAgIGlmIChpbmRleCA+IC0x
        KSB7CiAgICAgICAgICBkZWJvdW5jZWUgPSBkZWJvdW5jZWVzW2luZGV4XTsK
        ICAgICAgICAgIGRlYm91bmNlZXMuc3BsaWNlKGluZGV4LCAxKTsKICAgICAg
        ICAgIGNsZWFyVGltZW91dChkZWJvdW5jZWVbMl0pOwogICAgICAgIH0KCiAg
        ICAgICAgdGltZXIgPSBnbG9iYWwuc2V0VGltZW91dChmdW5jdGlvbigpIHsK
        ICAgICAgICAgIGlmICghaW1tZWRpYXRlKSB7CiAgICAgICAgICAgIHNlbGYu
        cnVuLmFwcGx5KHNlbGYsIGFyZ3MpOwogICAgICAgICAgfQogICAgICAgICAg
        dmFyIGluZGV4ID0gZmluZERlYm91bmNlZSh0YXJnZXQsIG1ldGhvZCk7CiAg
        ICAgICAgICBpZiAoaW5kZXggPiAtMSkgewogICAgICAgICAgICBkZWJvdW5j
        ZWVzLnNwbGljZShpbmRleCwgMSk7CiAgICAgICAgICB9CiAgICAgICAgfSwg
        d2FpdCk7CgogICAgICAgIGlmIChpbW1lZGlhdGUgJiYgaW5kZXggPT09IC0x
        KSB7CiAgICAgICAgICBzZWxmLnJ1bi5hcHBseShzZWxmLCBhcmdzKTsKICAg
        ICAgICB9CgogICAgICAgIGRlYm91bmNlZSA9IFt0YXJnZXQsIG1ldGhvZCwg
        dGltZXJdOwoKICAgICAgICBkZWJvdW5jZWVzLnB1c2goZGVib3VuY2VlKTsK
        CiAgICAgICAgcmV0dXJuIGRlYm91bmNlZTsKICAgICAgfSwKCiAgICAgIGNh
        bmNlbFRpbWVyczogZnVuY3Rpb24oKSB7CiAgICAgICAgdmFyIGksIGxlbjsK
        CiAgICAgICAgZm9yIChpID0gMCwgbGVuID0gdGhyb3R0bGVycy5sZW5ndGg7
        IGkgPCBsZW47IGkrKykgewogICAgICAgICAgY2xlYXJUaW1lb3V0KHRocm90
        dGxlcnNbaV1bMl0pOwogICAgICAgIH0KICAgICAgICB0aHJvdHRsZXJzID0g
        W107CgogICAgICAgIGZvciAoaSA9IDAsIGxlbiA9IGRlYm91bmNlZXMubGVu
        Z3RoOyBpIDwgbGVuOyBpKyspIHsKICAgICAgICAgIGNsZWFyVGltZW91dChk
        ZWJvdW5jZWVzW2ldWzJdKTsKICAgICAgICB9CiAgICAgICAgZGVib3VuY2Vl
        cyA9IFtdOwoKICAgICAgICBpZiAobGF0ZXJUaW1lcikgewogICAgICAgICAg
        Y2xlYXJUaW1lb3V0KGxhdGVyVGltZXIpOwogICAgICAgICAgbGF0ZXJUaW1l
        ciA9IG51bGw7CiAgICAgICAgfQogICAgICAgIHRpbWVycyA9IFtdOwoKICAg
        ICAgICBpZiAoYXV0b3J1bikgewogICAgICAgICAgY2xlYXJUaW1lb3V0KGF1
        dG9ydW4pOwogICAgICAgICAgYXV0b3J1biA9IG51bGw7CiAgICAgICAgfQog
        ICAgICB9LAoKICAgICAgaGFzVGltZXJzOiBmdW5jdGlvbigpIHsKICAgICAg
        ICByZXR1cm4gISF0aW1lcnMubGVuZ3RoIHx8IGF1dG9ydW47CiAgICAgIH0s
        CgogICAgICBjYW5jZWw6IGZ1bmN0aW9uKHRpbWVyKSB7CiAgICAgICAgdmFy
        IHRpbWVyVHlwZSA9IHR5cGVvZiB0aW1lcjsKCiAgICAgICAgaWYgKHRpbWVy
        ICYmIHRpbWVyVHlwZSA9PT0gJ29iamVjdCcgJiYgdGltZXIucXVldWUgJiYg
        dGltZXIubWV0aG9kKSB7IC8vIHdlJ3JlIGNhbmNlbGxpbmcgYSBkZWZlck9u
        Y2UKICAgICAgICAgIHJldHVybiB0aW1lci5xdWV1ZS5jYW5jZWwodGltZXIp
        OwogICAgICAgIH0gZWxzZSBpZiAodGltZXJUeXBlID09PSAnZnVuY3Rpb24n
        KSB7IC8vIHdlJ3JlIGNhbmNlbGxpbmcgYSBzZXRUaW1lb3V0CiAgICAgICAg
        ICBmb3IgKHZhciBpID0gMCwgbCA9IHRpbWVycy5sZW5ndGg7IGkgPCBsOyBp
        ICs9IDIpIHsKICAgICAgICAgICAgaWYgKHRpbWVyc1tpICsgMV0gPT09IHRp
        bWVyKSB7CiAgICAgICAgICAgICAgdGltZXJzLnNwbGljZShpLCAyKTsgLy8g
        cmVtb3ZlIHRoZSB0d28gZWxlbWVudHMKICAgICAgICAgICAgICByZXR1cm4g
        dHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0gZWxz
        ZSBpZiAoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHRpbWVyKSA9
        PT0gIltvYmplY3QgQXJyYXldIil7IC8vIHdlJ3JlIGNhbmNlbGxpbmcgYSB0
        aHJvdHRsZSBvciBkZWJvdW5jZQogICAgICAgICAgcmV0dXJuIHRoaXMuX2Nh
        bmNlbEl0ZW0oZmluZFRocm90dGxlciwgdGhyb3R0bGVycywgdGltZXIpIHx8
        CiAgICAgICAgICAgICAgICAgICB0aGlzLl9jYW5jZWxJdGVtKGZpbmREZWJv
        dW5jZWUsIGRlYm91bmNlZXMsIHRpbWVyKTsKICAgICAgICB9IGVsc2Ugewog
        ICAgICAgICAgcmV0dXJuOyAvLyB0aW1lciB3YXMgbnVsbCBvciBub3QgYSB0
        aW1lcgogICAgICAgIH0KICAgICAgfSwKCiAgICAgIF9jYW5jZWxJdGVtOiBm
        dW5jdGlvbihmaW5kTWV0aG9kLCBhcnJheSwgdGltZXIpewogICAgICAgIHZh
        ciBpdGVtLAogICAgICAgICAgICBpbmRleDsKCiAgICAgICAgaWYgKHRpbWVy
        Lmxlbmd0aCA8IDMpIHsgcmV0dXJuIGZhbHNlOyB9CgogICAgICAgIGluZGV4
        ID0gZmluZE1ldGhvZCh0aW1lclswXSwgdGltZXJbMV0pOwoKICAgICAgICBp
        ZihpbmRleCA+IC0xKSB7CgogICAgICAgICAgaXRlbSA9IGFycmF5W2luZGV4
        XTsKCiAgICAgICAgICBpZihpdGVtWzJdID09PSB0aW1lclsyXSl7CiAgICAg
        ICAgICAgIGFycmF5LnNwbGljZShpbmRleCwgMSk7CiAgICAgICAgICAgIGNs
        ZWFyVGltZW91dCh0aW1lclsyXSk7CiAgICAgICAgICAgIHJldHVybiB0cnVl
        OwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIGZhbHNl
        OwogICAgICB9CgogICAgfTsKCiAgICBCYWNrYnVybmVyLnByb3RvdHlwZS5z
        Y2hlZHVsZSA9IEJhY2tidXJuZXIucHJvdG90eXBlLmRlZmVyOwogICAgQmFj
        a2J1cm5lci5wcm90b3R5cGUuc2NoZWR1bGVPbmNlID0gQmFja2J1cm5lci5w
        cm90b3R5cGUuZGVmZXJPbmNlOwogICAgQmFja2J1cm5lci5wcm90b3R5cGUu
        bGF0ZXIgPSBCYWNrYnVybmVyLnByb3RvdHlwZS5zZXRUaW1lb3V0OwoKICAg
        IGZ1bmN0aW9uIGNyZWF0ZUF1dG9ydW4oYmFja2J1cm5lcikgewogICAgICBi
        YWNrYnVybmVyLmJlZ2luKCk7CiAgICAgIGF1dG9ydW4gPSBnbG9iYWwuc2V0
        VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgICBhdXRvcnVuID0gbnVsbDsK
        ICAgICAgICBiYWNrYnVybmVyLmVuZCgpOwogICAgICB9KTsKICAgIH0KCiAg
        ICBmdW5jdGlvbiB1cGRhdGVMYXRlclRpbWVyKHNlbGYsIGV4ZWN1dGVBdCwg
        d2FpdCkgewogICAgICBpZiAoIWxhdGVyVGltZXIgfHwgZXhlY3V0ZUF0IDwg
        bGF0ZXJUaW1lckV4cGlyZXNBdCkgewogICAgICAgIGlmIChsYXRlclRpbWVy
        KSB7CiAgICAgICAgICBjbGVhclRpbWVvdXQobGF0ZXJUaW1lcik7CiAgICAg
        ICAgfQogICAgICAgIGxhdGVyVGltZXIgPSBnbG9iYWwuc2V0VGltZW91dChm
        dW5jdGlvbigpIHsKICAgICAgICAgIGxhdGVyVGltZXIgPSBudWxsOwogICAg
        ICAgICAgbGF0ZXJUaW1lckV4cGlyZXNBdCA9IG51bGw7CiAgICAgICAgICBl
        eGVjdXRlVGltZXJzKHNlbGYpOwogICAgICAgIH0sIHdhaXQpOwogICAgICAg
        IGxhdGVyVGltZXJFeHBpcmVzQXQgPSBleGVjdXRlQXQ7CiAgICAgIH0KICAg
        IH0KCiAgICBmdW5jdGlvbiBleGVjdXRlVGltZXJzKHNlbGYpIHsKICAgICAg
        dmFyIG5vdyA9ICtuZXcgRGF0ZSgpLAogICAgICAgICAgdGltZSwgZm5zLCBp
        LCBsOwoKICAgICAgc2VsZi5ydW4oZnVuY3Rpb24oKSB7CiAgICAgICAgLy8g
        VE9ETzogYmluYXJ5IHNlYXJjaAogICAgICAgIGZvciAoaSA9IDAsIGwgPSB0
        aW1lcnMubGVuZ3RoOyBpIDwgbDsgaSArPSAyKSB7CiAgICAgICAgICB0aW1l
        ID0gdGltZXJzW2ldOwogICAgICAgICAgaWYgKHRpbWUgPiBub3cpIHsgYnJl
        YWs7IH0KICAgICAgICB9CgogICAgICAgIGZucyA9IHRpbWVycy5zcGxpY2Uo
        MCwgaSk7CgogICAgICAgIGZvciAoaSA9IDEsIGwgPSBmbnMubGVuZ3RoOyBp
        IDwgbDsgaSArPSAyKSB7CiAgICAgICAgICBzZWxmLnNjaGVkdWxlKHNlbGYu
        b3B0aW9ucy5kZWZhdWx0UXVldWUsIG51bGwsIGZuc1tpXSk7CiAgICAgICAg
        fQogICAgICB9KTsKCiAgICAgIGlmICh0aW1lcnMubGVuZ3RoKSB7CiAgICAg
        ICAgdXBkYXRlTGF0ZXJUaW1lcihzZWxmLCB0aW1lcnNbMF0sIHRpbWVyc1sw
        XSAtIG5vdyk7CiAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBmaW5kRGVi
        b3VuY2VlKHRhcmdldCwgbWV0aG9kKSB7CiAgICAgIHZhciBkZWJvdW5jZWUs
        CiAgICAgICAgICBpbmRleCA9IC0xOwoKICAgICAgZm9yICh2YXIgaSA9IDAs
        IGwgPSBkZWJvdW5jZWVzLmxlbmd0aDsgaSA8IGw7IGkrKykgewogICAgICAg
        IGRlYm91bmNlZSA9IGRlYm91bmNlZXNbaV07CiAgICAgICAgaWYgKGRlYm91
        bmNlZVswXSA9PT0gdGFyZ2V0ICYmIGRlYm91bmNlZVsxXSA9PT0gbWV0aG9k
        KSB7CiAgICAgICAgICBpbmRleCA9IGk7CiAgICAgICAgICBicmVhazsKICAg
        ICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiBpbmRleDsKICAgIH0KCiAg
        ICBmdW5jdGlvbiBmaW5kVGhyb3R0bGVyKHRhcmdldCwgbWV0aG9kKSB7CiAg
        ICAgIHZhciB0aHJvdHRsZXIsCiAgICAgICAgICBpbmRleCA9IC0xOwoKICAg
        ICAgZm9yICh2YXIgaSA9IDAsIGwgPSB0aHJvdHRsZXJzLmxlbmd0aDsgaSA8
        IGw7IGkrKykgewogICAgICAgIHRocm90dGxlciA9IHRocm90dGxlcnNbaV07
        CiAgICAgICAgaWYgKHRocm90dGxlclswXSA9PT0gdGFyZ2V0ICYmIHRocm90
        dGxlclsxXSA9PT0gbWV0aG9kKSB7CiAgICAgICAgICBpbmRleCA9IGk7CiAg
        ICAgICAgICBicmVhazsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVy
        biBpbmRleDsKICAgIH0KCiAgICBfX2V4cG9ydHNfXy5CYWNrYnVybmVyID0g
        QmFja2J1cm5lcjsKICB9KTsKfSkoKTsKCgoKKGZ1bmN0aW9uKCkgewp2YXIg
        b25CZWdpbiA9IGZ1bmN0aW9uKGN1cnJlbnQpIHsKICBFbWJlci5ydW4uY3Vy
        cmVudFJ1bkxvb3AgPSBjdXJyZW50Owp9OwoKdmFyIG9uRW5kID0gZnVuY3Rp
        b24oY3VycmVudCwgbmV4dCkgewogIEVtYmVyLnJ1bi5jdXJyZW50UnVuTG9v
        cCA9IG5leHQ7Cn07Cgp2YXIgQmFja2J1cm5lciA9IHJlcXVpcmVNb2R1bGUo
        J2JhY2tidXJuZXInKS5CYWNrYnVybmVyLAogICAgYmFja2J1cm5lciA9IG5l
        dyBCYWNrYnVybmVyKFsnc3luYycsICdhY3Rpb25zJywgJ2Rlc3Ryb3knXSwg
        ewogICAgICBzeW5jOiB7CiAgICAgICAgYmVmb3JlOiBFbWJlci5iZWdpblBy
        b3BlcnR5Q2hhbmdlcywKICAgICAgICBhZnRlcjogRW1iZXIuZW5kUHJvcGVy
        dHlDaGFuZ2VzCiAgICAgIH0sCiAgICAgIGRlZmF1bHRRdWV1ZTogJ2FjdGlv
        bnMnLAogICAgICBvbkJlZ2luOiBvbkJlZ2luLAogICAgICBvbkVuZDogb25F
        bmQKICAgIH0pLAogICAgc2xpY2UgPSBbXS5zbGljZSwKICAgIGNvbmNhdCA9
        IFtdLmNvbmNhdDsKCi8vIC4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4u
        Li4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4KLy8gRW1iZXIucnVuIC0g
        dGhpcyBpcyBpZGVhbGx5IHRoZSBvbmx5IHB1YmxpYyBBUEkgdGhlIGRldiBz
        ZWVzCi8vCgovKioKICBSdW5zIHRoZSBwYXNzZWQgdGFyZ2V0IGFuZCBtZXRo
        b2QgaW5zaWRlIG9mIGEgUnVuTG9vcCwgZW5zdXJpbmcgYW55CiAgZGVmZXJy
        ZWQgYWN0aW9ucyBpbmNsdWRpbmcgYmluZGluZ3MgYW5kIHZpZXdzIHVwZGF0
        ZXMgYXJlIGZsdXNoZWQgYXQgdGhlCiAgZW5kLgoKICBOb3JtYWxseSB5b3Ug
        c2hvdWxkIG5vdCBuZWVkIHRvIGludm9rZSB0aGlzIG1ldGhvZCB5b3Vyc2Vs
        Zi4gSG93ZXZlciBpZgogIHlvdSBhcmUgaW1wbGVtZW50aW5nIHJhdyBldmVu
        dCBoYW5kbGVycyB3aGVuIGludGVyZmFjaW5nIHdpdGggb3RoZXIKICBsaWJy
        YXJpZXMgb3IgcGx1Z2lucywgeW91IHNob3VsZCBwcm9iYWJseSB3cmFwIGFs
        bCBvZiB5b3VyIGNvZGUgaW5zaWRlIHRoaXMKICBjYWxsLgoKICBgYGBqYXZh
        c2NyaXB0CiAgRW1iZXIucnVuKGZ1bmN0aW9uKCkgewogICAgLy8gY29kZSB0
        byBiZSBleGVjdXRlIHdpdGhpbiBhIFJ1bkxvb3AKICB9KTsKICBgYGAKCiAg
        QGNsYXNzIHJ1bgogIEBuYW1lc3BhY2UgRW1iZXIKICBAc3RhdGljCiAgQGNv
        bnN0cnVjdG9yCiAgQHBhcmFtIHtPYmplY3R9IFt0YXJnZXRdIHRhcmdldCBv
        ZiBtZXRob2QgdG8gY2FsbAogIEBwYXJhbSB7RnVuY3Rpb258U3RyaW5nfSBt
        ZXRob2QgTWV0aG9kIHRvIGludm9rZS4KICAgIE1heSBiZSBhIGZ1bmN0aW9u
        IG9yIGEgc3RyaW5nLiBJZiB5b3UgcGFzcyBhIHN0cmluZwogICAgdGhlbiBp
        dCB3aWxsIGJlIGxvb2tlZCB1cCBvbiB0aGUgcGFzc2VkIHRhcmdldC4KICBA
        cGFyYW0ge09iamVjdH0gW2FyZ3MqXSBBbnkgYWRkaXRpb25hbCBhcmd1bWVu
        dHMgeW91IHdpc2ggdG8gcGFzcyB0byB0aGUgbWV0aG9kLgogIEByZXR1cm4g
        e09iamVjdH0gcmV0dXJuIHZhbHVlIGZyb20gaW52b2tpbmcgdGhlIHBhc3Nl
        ZCBmdW5jdGlvbi4KKi8KRW1iZXIucnVuID0gZnVuY3Rpb24oKSB7CiAgaWYg
        KEVtYmVyLm9uZXJyb3IpIHsKICAgIHJldHVybiBvbmVycm9yKGFyZ3VtZW50
        cyk7CiAgfSBlbHNlIHsKICAgIHJldHVybiBiYWNrYnVybmVyLnJ1bi5hcHBs
        eShiYWNrYnVybmVyLCBhcmd1bWVudHMpOwogIH0KfTsKCmZ1bmN0aW9uIG9u
        ZXJyb3IoYXJncykgewogIHRyeSB7CiAgICByZXR1cm4gYmFja2J1cm5lci5y
        dW4uYXBwbHkoYmFja2J1cm5lciwgYXJncyk7CiAgfSBjYXRjaChlcnJvcikg
        ewogICAgRW1iZXIub25lcnJvcihlcnJvcik7CiAgfQp9Ci8qKgogIElmIG5v
        IHJ1bi1sb29wIGlzIHByZXNlbnQsIGl0IGNyZWF0ZXMgYSBuZXcgb25lLiBJ
        ZiBhIHJ1biBsb29wIGlzCiAgcHJlc2VudCBpdCB3aWxsIHF1ZXVlIGl0c2Vs
        ZiB0byBydW4gb24gdGhlIGV4aXN0aW5nIHJ1bi1sb29wcyBhY3Rpb24KICBx
        dWV1ZS4KCiAgUGxlYXNlIG5vdGU6IFRoaXMgaXMgbm90IGZvciBub3JtYWwg
        dXNhZ2UsIGFuZCBzaG91bGQgYmUgdXNlZCBzcGFyaW5nbHkuCgogIElmIGlu
        dm9rZWQgd2hlbiBub3Qgd2l0aGluIGEgcnVuIGxvb3A6CgogIGBgYGphdmFz
        Y3JpcHQKICBFbWJlci5ydW4uam9pbihmdW5jdGlvbigpIHsKICAgIC8vIGNy
        ZWF0ZXMgYSBuZXcgcnVuLWxvb3AKICB9KTsKICBgYGAKCiAgQWx0ZXJuYXRp
        dmVseSwgaWYgY2FsbGVkIHdpdGhpbiBhbiBleGlzdGluZyBydW4gbG9vcDoK
        CiAgYGBgamF2YXNjcmlwdAogIEVtYmVyLnJ1bihmdW5jdGlvbigpIHsKICAg
        IC8vIGNyZWF0ZXMgYSBuZXcgcnVuLWxvb3AKICAgIEVtYmVyLnJ1bi5qb2lu
        KGZ1bmN0aW9uKCkgewogICAgICAvLyBqb2lucyB3aXRoIHRoZSBleGlzdGlu
        ZyBydW4tbG9vcCwgYW5kIHF1ZXVlcyBmb3IgaW52b2NhdGlvbiBvbgogICAg
        ICAvLyB0aGUgZXhpc3RpbmcgcnVuLWxvb3BzIGFjdGlvbiBxdWV1ZS4KICAg
        IH0pOwogIH0pOwogIGBgYAoKICBAbWV0aG9kIGpvaW4KICBAbmFtZXNwYWNl
        IEVtYmVyCiAgQHBhcmFtIHtPYmplY3R9IFt0YXJnZXRdIHRhcmdldCBvZiBt
        ZXRob2QgdG8gY2FsbAogIEBwYXJhbSB7RnVuY3Rpb258U3RyaW5nfSBtZXRo
        b2QgTWV0aG9kIHRvIGludm9rZS4KICAgIE1heSBiZSBhIGZ1bmN0aW9uIG9y
        IGEgc3RyaW5nLiBJZiB5b3UgcGFzcyBhIHN0cmluZwogICAgdGhlbiBpdCB3
        aWxsIGJlIGxvb2tlZCB1cCBvbiB0aGUgcGFzc2VkIHRhcmdldC4KICBAcGFy
        YW0ge09iamVjdH0gW2FyZ3MqXSBBbnkgYWRkaXRpb25hbCBhcmd1bWVudHMg
        eW91IHdpc2ggdG8gcGFzcyB0byB0aGUgbWV0aG9kLgogIEByZXR1cm4ge09i
        amVjdH0gUmV0dXJuIHZhbHVlIGZyb20gaW52b2tpbmcgdGhlIHBhc3NlZCBm
        dW5jdGlvbi4gUGxlYXNlIG5vdGUsCiAgd2hlbiBjYWxsZWQgd2l0aGluIGFu
        IGV4aXN0aW5nIGxvb3AsIG5vIHJldHVybiB2YWx1ZSBpcyBwb3NzaWJsZS4K
        Ki8KRW1iZXIucnVuLmpvaW4gPSBmdW5jdGlvbih0YXJnZXQsIG1ldGhvZCAv
        KiBhcmdzICovKSB7CiAgaWYgKCFFbWJlci5ydW4uY3VycmVudFJ1bkxvb3Ap
        IHsKICAgIHJldHVybiBFbWJlci5ydW4uYXBwbHkoRW1iZXIucnVuLCBhcmd1
        bWVudHMpOwogIH0KCiAgdmFyIGFyZ3MgPSBzbGljZS5jYWxsKGFyZ3VtZW50
        cyk7CiAgYXJncy51bnNoaWZ0KCdhY3Rpb25zJyk7CiAgRW1iZXIucnVuLnNj
        aGVkdWxlLmFwcGx5KEVtYmVyLnJ1biwgYXJncyk7Cn07CgovKioKICBQcm92
        aWRlcyBhIHVzZWZ1bCB1dGlsaXR5IGZvciB3aGVuIGludGVncmF0aW5nIHdp
        dGggbm9uLUVtYmVyIGxpYnJhcmllcwogIHRoYXQgcHJvdmlkZSBhc3luY2hy
        b25vdXMgY2FsbGJhY2tzLgoKICBFbWJlciB1dGlsaXplcyBhIHJ1bi1sb29w
        IHRvIGJhdGNoIGFuZCBjb2FsZXNjZSBjaGFuZ2VzLiBUaGlzIHdvcmtzIGJ5
        CiAgbWFya2luZyB0aGUgc3RhcnQgYW5kIGVuZCBvZiBFbWJlci1yZWxhdGVk
        IEphdmFzY3JpcHQgZXhlY3V0aW9uLgoKICBXaGVuIHVzaW5nIGV2ZW50cyBz
        dWNoIGFzIGEgVmlldydzIGNsaWNrIGhhbmRsZXIsIEVtYmVyIHdyYXBzIHRo
        ZSBldmVudAogIGhhbmRsZXIgaW4gYSBydW4tbG9vcCwgYnV0IHdoZW4gaW50
        ZWdyYXRpbmcgd2l0aCBub24tRW1iZXIgbGlicmFyaWVzIHRoaXMKICBjYW4g
        YmUgdGVkaW91cy4KCiAgRm9yIGV4YW1wbGUsIHRoZSBmb2xsb3dpbmcgaXMg
        cmF0aGVyIHZlcmJvc2UgYnV0IGlzIHRoZSBjb3JyZWN0IHdheSB0byBjb21i
        aW5lCiAgdGhpcmQtcGFydHkgZXZlbnRzIGFuZCBFbWJlciBjb2RlLgoKICBg
        YGBqYXZhc2NyaXB0CiAgdmFyIHRoYXQgPSB0aGlzOwogIGpRdWVyeSh3aW5k
        b3cpLm9uKCdyZXNpemUnLCBmdW5jdGlvbigpewogICAgRW1iZXIucnVuKGZ1
        bmN0aW9uKCl7CiAgICAgIHRoYXQuaGFuZGxlUmVzaXplKCk7CiAgICB9KTsK
        ICB9KTsKICBgYGAKCiAgVG8gcmVkdWNlIHRoZSBib2lsZXJwbGF0ZSwgdGhl
        IGZvbGxvd2luZyBjYW4gYmUgdXNlZCB0byBjb25zdHJ1Y3QgYQogIHJ1bi1s
        b29wLXdyYXBwZWQgY2FsbGJhY2sgaGFuZGxlci4KCiAgYGBgamF2YXNjcmlw
        dAogIGpRdWVyeSh3aW5kb3cpLm9uKCdyZXNpemUnLCBFbWJlci5ydW4uYmlu
        ZCh0aGlzLCB0aGlzLmhhbmRsZVJlc2l6ZSkpOwogIGBgYAoKICBAbWV0aG9k
        IGJpbmQKICBAbmFtZXNwYWNlIEVtYmVyLnJ1bgogIEBwYXJhbSB7T2JqZWN0
        fSBbdGFyZ2V0XSB0YXJnZXQgb2YgbWV0aG9kIHRvIGNhbGwKICBAcGFyYW0g
        e0Z1bmN0aW9ufFN0cmluZ30gbWV0aG9kIE1ldGhvZCB0byBpbnZva2UuCiAg
        ICBNYXkgYmUgYSBmdW5jdGlvbiBvciBhIHN0cmluZy4gSWYgeW91IHBhc3Mg
        YSBzdHJpbmcKICAgIHRoZW4gaXQgd2lsbCBiZSBsb29rZWQgdXAgb24gdGhl
        IHBhc3NlZCB0YXJnZXQuCiAgQHBhcmFtIHtPYmplY3R9IFthcmdzKl0gQW55
        IGFkZGl0aW9uYWwgYXJndW1lbnRzIHlvdSB3aXNoIHRvIHBhc3MgdG8gdGhl
        IG1ldGhvZC4KICBAcmV0dXJuIHtPYmplY3R9IHJldHVybiB2YWx1ZSBmcm9t
        IGludm9raW5nIHRoZSBwYXNzZWQgZnVuY3Rpb24uIFBsZWFzZSBub3RlLAog
        IHdoZW4gY2FsbGVkIHdpdGhpbiBhbiBleGlzdGluZyBsb29wLCBubyByZXR1
        cm4gdmFsdWUgaXMgcG9zc2libGUuCiovCkVtYmVyLnJ1bi5iaW5kID0gZnVu
        Y3Rpb24odGFyZ2V0LCBtZXRob2QgLyogYXJncyovKSB7CiAgdmFyIGFyZ3Mg
        PSBhcmd1bWVudHM7CiAgcmV0dXJuIGZ1bmN0aW9uKCkgewogICAgcmV0dXJu
        IEVtYmVyLnJ1bi5qb2luLmFwcGx5KEVtYmVyLnJ1biwgYXJncyk7CiAgfTsK
        fTsKCkVtYmVyLnJ1bi5iYWNrYnVybmVyID0gYmFja2J1cm5lcjsKCnZhciBy
        dW4gPSBFbWJlci5ydW47CgpFbWJlci5ydW4uY3VycmVudFJ1bkxvb3AgPSBu
        dWxsOwoKRW1iZXIucnVuLnF1ZXVlcyA9IGJhY2tidXJuZXIucXVldWVOYW1l
        czsKCi8qKgogIEJlZ2lucyBhIG5ldyBSdW5Mb29wLiBBbnkgZGVmZXJyZWQg
        YWN0aW9ucyBpbnZva2VkIGFmdGVyIHRoZSBiZWdpbiB3aWxsCiAgYmUgYnVm
        ZmVyZWQgdW50aWwgeW91IGludm9rZSBhIG1hdGNoaW5nIGNhbGwgdG8gYEVt
        YmVyLnJ1bi5lbmQoKWAuIFRoaXMgaXMKICBhIGxvd2VyLWxldmVsIHdheSB0
        byB1c2UgYSBSdW5Mb29wIGluc3RlYWQgb2YgdXNpbmcgYEVtYmVyLnJ1bigp
        YC4KCiAgYGBgamF2YXNjcmlwdAogIEVtYmVyLnJ1bi5iZWdpbigpOwogIC8v
        IGNvZGUgdG8gYmUgZXhlY3V0ZSB3aXRoaW4gYSBSdW5Mb29wCiAgRW1iZXIu
        cnVuLmVuZCgpOwogIGBgYAoKICBAbWV0aG9kIGJlZ2luCiAgQHJldHVybiB7
        dm9pZH0KKi8KRW1iZXIucnVuLmJlZ2luID0gZnVuY3Rpb24oKSB7CiAgYmFj
        a2J1cm5lci5iZWdpbigpOwp9OwoKLyoqCiAgRW5kcyBhIFJ1bkxvb3AuIFRo
        aXMgbXVzdCBiZSBjYWxsZWQgc29tZXRpbWUgYWZ0ZXIgeW91IGNhbGwKICBg
        RW1iZXIucnVuLmJlZ2luKClgIHRvIGZsdXNoIGFueSBkZWZlcnJlZCBhY3Rp
        b25zLiBUaGlzIGlzIGEgbG93ZXItbGV2ZWwgd2F5CiAgdG8gdXNlIGEgUnVu
        TG9vcCBpbnN0ZWFkIG9mIHVzaW5nIGBFbWJlci5ydW4oKWAuCgogIGBgYGph
        dmFzY3JpcHQKICBFbWJlci5ydW4uYmVnaW4oKTsKICAvLyBjb2RlIHRvIGJl
        IGV4ZWN1dGUgd2l0aGluIGEgUnVuTG9vcAogIEVtYmVyLnJ1bi5lbmQoKTsK
        ICBgYGAKCiAgQG1ldGhvZCBlbmQKICBAcmV0dXJuIHt2b2lkfQoqLwpFbWJl
        ci5ydW4uZW5kID0gZnVuY3Rpb24oKSB7CiAgYmFja2J1cm5lci5lbmQoKTsK
        fTsKCi8qKgogIEFycmF5IG9mIG5hbWVkIHF1ZXVlcy4gVGhpcyBhcnJheSBk
        ZXRlcm1pbmVzIHRoZSBvcmRlciBpbiB3aGljaCBxdWV1ZXMKICBhcmUgZmx1
        c2hlZCBhdCB0aGUgZW5kIG9mIHRoZSBSdW5Mb29wLiBZb3UgY2FuIGRlZmlu
        ZSB5b3VyIG93biBxdWV1ZXMgYnkKICBzaW1wbHkgYWRkaW5nIHRoZSBxdWV1
        ZSBuYW1lIHRvIHRoaXMgYXJyYXkuIE5vcm1hbGx5IHlvdSBzaG91bGQgbm90
        IG5lZWQKICB0byBpbnNwZWN0IG9yIG1vZGlmeSB0aGlzIHByb3BlcnR5LgoK
        ICBAcHJvcGVydHkgcXVldWVzCiAgQHR5cGUgQXJyYXkKICBAZGVmYXVsdCBb
        J3N5bmMnLCAnYWN0aW9ucycsICdkZXN0cm95J10KKi8KCi8qKgogIEFkZHMg
        dGhlIHBhc3NlZCB0YXJnZXQvbWV0aG9kIGFuZCBhbnkgb3B0aW9uYWwgYXJn
        dW1lbnRzIHRvIHRoZSBuYW1lZAogIHF1ZXVlIHRvIGJlIGV4ZWN1dGVkIGF0
        IHRoZSBlbmQgb2YgdGhlIFJ1bkxvb3AuIElmIHlvdSBoYXZlIG5vdCBhbHJl
        YWR5CiAgc3RhcnRlZCBhIFJ1bkxvb3Agd2hlbiBjYWxsaW5nIHRoaXMgbWV0
        aG9kIG9uZSB3aWxsIGJlIHN0YXJ0ZWQgZm9yIHlvdQogIGF1dG9tYXRpY2Fs
        bHkuCgogIEF0IHRoZSBlbmQgb2YgYSBSdW5Mb29wLCBhbnkgbWV0aG9kcyBz
        Y2hlZHVsZWQgaW4gdGhpcyB3YXkgd2lsbCBiZSBpbnZva2VkLgogIE1ldGhv
        ZHMgd2lsbCBiZSBpbnZva2VkIGluIGFuIG9yZGVyIG1hdGNoaW5nIHRoZSBu
        YW1lZCBxdWV1ZXMgZGVmaW5lZCBpbgogIHRoZSBgRW1iZXIucnVuLnF1ZXVl
        c2AgcHJvcGVydHkuCgogIGBgYGphdmFzY3JpcHQKICBFbWJlci5ydW4uc2No
        ZWR1bGUoJ3N5bmMnLCB0aGlzLCBmdW5jdGlvbigpIHsKICAgIC8vIHRoaXMg
        d2lsbCBiZSBleGVjdXRlZCBpbiB0aGUgZmlyc3QgUnVuTG9vcCBxdWV1ZSwg
        d2hlbiBiaW5kaW5ncyBhcmUgc3luY2VkCiAgICBjb25zb2xlLmxvZygic2No
        ZWR1bGVkIG9uIHN5bmMgcXVldWUiKTsKICB9KTsKCiAgRW1iZXIucnVuLnNj
        aGVkdWxlKCdhY3Rpb25zJywgdGhpcywgZnVuY3Rpb24oKSB7CiAgICAvLyB0
        aGlzIHdpbGwgYmUgZXhlY3V0ZWQgaW4gdGhlICdhY3Rpb25zJyBxdWV1ZSwg
        YWZ0ZXIgYmluZGluZ3MgaGF2ZSBzeW5jZWQuCiAgICBjb25zb2xlLmxvZygi
        c2NoZWR1bGVkIG9uIGFjdGlvbnMgcXVldWUiKTsKICB9KTsKCiAgLy8gTm90
        ZSB0aGUgZnVuY3Rpb25zIHdpbGwgYmUgcnVuIGluIG9yZGVyIGJhc2VkIG9u
        IHRoZSBydW4gcXVldWVzIG9yZGVyLgogIC8vIE91dHB1dCB3b3VsZCBiZToK
        ICAvLyAgIHNjaGVkdWxlZCBvbiBzeW5jIHF1ZXVlCiAgLy8gICBzY2hlZHVs
        ZWQgb24gYWN0aW9ucyBxdWV1ZQogIGBgYAoKICBAbWV0aG9kIHNjaGVkdWxl
        CiAgQHBhcmFtIHtTdHJpbmd9IHF1ZXVlIFRoZSBuYW1lIG9mIHRoZSBxdWV1
        ZSB0byBzY2hlZHVsZSBhZ2FpbnN0LgogICAgRGVmYXVsdCBxdWV1ZXMgYXJl
        ICdzeW5jJyBhbmQgJ2FjdGlvbnMnCiAgQHBhcmFtIHtPYmplY3R9IFt0YXJn
        ZXRdIHRhcmdldCBvYmplY3QgdG8gdXNlIGFzIHRoZSBjb250ZXh0IHdoZW4g
        aW52b2tpbmcgYSBtZXRob2QuCiAgQHBhcmFtIHtTdHJpbmd8RnVuY3Rpb259
        IG1ldGhvZCBUaGUgbWV0aG9kIHRvIGludm9rZS4gSWYgeW91IHBhc3MgYSBz
        dHJpbmcgaXQKICAgIHdpbGwgYmUgcmVzb2x2ZWQgb24gdGhlIHRhcmdldCBv
        YmplY3QgYXQgdGhlIHRpbWUgdGhlIHNjaGVkdWxlZCBpdGVtIGlzCiAgICBp
        bnZva2VkIGFsbG93aW5nIHlvdSB0byBjaGFuZ2UgdGhlIHRhcmdldCBmdW5j
        dGlvbi4KICBAcGFyYW0ge09iamVjdH0gW2FyZ3VtZW50cypdIE9wdGlvbmFs
        IGFyZ3VtZW50cyB0byBiZSBwYXNzZWQgdG8gdGhlIHF1ZXVlZCBtZXRob2Qu
        CiAgQHJldHVybiB7dm9pZH0KKi8KRW1iZXIucnVuLnNjaGVkdWxlID0gZnVu
        Y3Rpb24ocXVldWUsIHRhcmdldCwgbWV0aG9kKSB7CiAgY2hlY2tBdXRvUnVu
        KCk7CiAgYmFja2J1cm5lci5zY2hlZHVsZS5hcHBseShiYWNrYnVybmVyLCBh
        cmd1bWVudHMpOwp9OwoKLy8gVXNlZCBieSBnbG9iYWwgdGVzdCB0ZWFyZG93
        bgpFbWJlci5ydW4uaGFzU2NoZWR1bGVkVGltZXJzID0gZnVuY3Rpb24oKSB7
        CiAgcmV0dXJuIGJhY2tidXJuZXIuaGFzVGltZXJzKCk7Cn07CgovLyBVc2Vk
        IGJ5IGdsb2JhbCB0ZXN0IHRlYXJkb3duCkVtYmVyLnJ1bi5jYW5jZWxUaW1l
        cnMgPSBmdW5jdGlvbiAoKSB7CiAgYmFja2J1cm5lci5jYW5jZWxUaW1lcnMo
        KTsKfTsKCi8qKgogIEltbWVkaWF0ZWx5IGZsdXNoZXMgYW55IGV2ZW50cyBz
        Y2hlZHVsZWQgaW4gdGhlICdzeW5jJyBxdWV1ZS4gQmluZGluZ3MKICB1c2Ug
        dGhpcyBxdWV1ZSBzbyB0aGlzIG1ldGhvZCBpcyBhIHVzZWZ1bCB3YXkgdG8g
        aW1tZWRpYXRlbHkgZm9yY2UgYWxsCiAgYmluZGluZ3MgaW4gdGhlIGFwcGxp
        Y2F0aW9uIHRvIHN5bmMuCgogIFlvdSBzaG91bGQgY2FsbCB0aGlzIG1ldGhv
        ZCBhbnl0aW1lIHlvdSBuZWVkIGFueSBjaGFuZ2VkIHN0YXRlIHRvIHByb3Bh
        Z2F0ZQogIHRocm91Z2hvdXQgdGhlIGFwcCBpbW1lZGlhdGVseSB3aXRob3V0
        IHJlcGFpbnRpbmcgdGhlIFVJICh3aGljaCBoYXBwZW5zCiAgaW4gdGhlIGxh
        dGVyICdyZW5kZXInIHF1ZXVlIGFkZGVkIGJ5IHRoZSBgZW1iZXItdmlld3Ng
        IHBhY2thZ2UpLgoKICBgYGBqYXZhc2NyaXB0CiAgRW1iZXIucnVuLnN5bmMo
        KTsKICBgYGAKCiAgQG1ldGhvZCBzeW5jCiAgQHJldHVybiB7dm9pZH0KKi8K
        RW1iZXIucnVuLnN5bmMgPSBmdW5jdGlvbigpIHsKICBpZiAoYmFja2J1cm5l
        ci5jdXJyZW50SW5zdGFuY2UpIHsKICAgIGJhY2tidXJuZXIuY3VycmVudElu
        c3RhbmNlLnF1ZXVlcy5zeW5jLmZsdXNoKCk7CiAgfQp9OwoKLyoqCiAgSW52
        b2tlcyB0aGUgcGFzc2VkIHRhcmdldC9tZXRob2QgYW5kIG9wdGlvbmFsIGFy
        Z3VtZW50cyBhZnRlciBhIHNwZWNpZmllZAogIHBlcmlvZCBpZiB0aW1lLiBU
        aGUgbGFzdCBwYXJhbWV0ZXIgb2YgdGhpcyBtZXRob2QgbXVzdCBhbHdheXMg
        YmUgYSBudW1iZXIKICBvZiBtaWxsaXNlY29uZHMuCgogIFlvdSBzaG91bGQg
        dXNlIHRoaXMgbWV0aG9kIHdoZW5ldmVyIHlvdSBuZWVkIHRvIHJ1biBzb21l
        IGFjdGlvbiBhZnRlciBhCiAgcGVyaW9kIG9mIHRpbWUgaW5zdGVhZCBvZiB1
        c2luZyBgc2V0VGltZW91dCgpYC4gVGhpcyBtZXRob2Qgd2lsbCBlbnN1cmUg
        dGhhdAogIGl0ZW1zIHRoYXQgZXhwaXJlIGR1cmluZyB0aGUgc2FtZSBzY3Jp
        cHQgZXhlY3V0aW9uIGN5Y2xlIGFsbCBleGVjdXRlCiAgdG9nZXRoZXIsIHdo
        aWNoIGlzIG9mdGVuIG1vcmUgZWZmaWNpZW50IHRoYW4gdXNpbmcgYSByZWFs
        IHNldFRpbWVvdXQuCgogIGBgYGphdmFzY3JpcHQKICBFbWJlci5ydW4ubGF0
        ZXIobXlDb250ZXh0LCBmdW5jdGlvbigpIHsKICAgIC8vIGNvZGUgaGVyZSB3
        aWxsIGV4ZWN1dGUgd2l0aGluIGEgUnVuTG9vcCBpbiBhYm91dCA1MDBtcyB3
        aXRoIHRoaXMgPT0gbXlDb250ZXh0CiAgfSwgNTAwKTsKICBgYGAKCiAgQG1l
        dGhvZCBsYXRlcgogIEBwYXJhbSB7T2JqZWN0fSBbdGFyZ2V0XSB0YXJnZXQg
        b2YgbWV0aG9kIHRvIGludm9rZQogIEBwYXJhbSB7RnVuY3Rpb258U3RyaW5n
        fSBtZXRob2QgVGhlIG1ldGhvZCB0byBpbnZva2UuCiAgICBJZiB5b3UgcGFz
        cyBhIHN0cmluZyBpdCB3aWxsIGJlIHJlc29sdmVkIG9uIHRoZQogICAgdGFy
        Z2V0IGF0IHRoZSB0aW1lIHRoZSBtZXRob2QgaXMgaW52b2tlZC4KICBAcGFy
        YW0ge09iamVjdH0gW2FyZ3MqXSBPcHRpb25hbCBhcmd1bWVudHMgdG8gcGFz
        cyB0byB0aGUgdGltZW91dC4KICBAcGFyYW0ge051bWJlcn0gd2FpdCBOdW1i
        ZXIgb2YgbWlsbGlzZWNvbmRzIHRvIHdhaXQuCiAgQHJldHVybiB7U3RyaW5n
        fSBhIHN0cmluZyB5b3UgY2FuIHVzZSB0byBjYW5jZWwgdGhlIHRpbWVyIGlu
        CiAgICBgRW1iZXIucnVuLmNhbmNlbGAgbGF0ZXIuCiovCkVtYmVyLnJ1bi5s
        YXRlciA9IGZ1bmN0aW9uKHRhcmdldCwgbWV0aG9kKSB7CiAgcmV0dXJuIGJh
        Y2tidXJuZXIubGF0ZXIuYXBwbHkoYmFja2J1cm5lciwgYXJndW1lbnRzKTsK
        fTsKCi8qKgogIFNjaGVkdWxlIGEgZnVuY3Rpb24gdG8gcnVuIG9uZSB0aW1l
        IGR1cmluZyB0aGUgY3VycmVudCBSdW5Mb29wLiBUaGlzIGlzIGVxdWl2YWxl
        bnQKICB0byBjYWxsaW5nIGBzY2hlZHVsZU9uY2VgIHdpdGggdGhlICJhY3Rp
        b25zIiBxdWV1ZS4KCiAgQG1ldGhvZCBvbmNlCiAgQHBhcmFtIHtPYmplY3R9
        IFt0YXJnZXRdIFRoZSB0YXJnZXQgb2YgdGhlIG1ldGhvZCB0byBpbnZva2Uu
        CiAgQHBhcmFtIHtGdW5jdGlvbnxTdHJpbmd9IG1ldGhvZCBUaGUgbWV0aG9k
        IHRvIGludm9rZS4KICAgIElmIHlvdSBwYXNzIGEgc3RyaW5nIGl0IHdpbGwg
        YmUgcmVzb2x2ZWQgb24gdGhlCiAgICB0YXJnZXQgYXQgdGhlIHRpbWUgdGhl
        IG1ldGhvZCBpcyBpbnZva2VkLgogIEBwYXJhbSB7T2JqZWN0fSBbYXJncypd
        IE9wdGlvbmFsIGFyZ3VtZW50cyB0byBwYXNzIHRvIHRoZSB0aW1lb3V0Lgog
        IEByZXR1cm4ge09iamVjdH0gVGltZXIgaW5mb3JtYXRpb24gZm9yIHVzZSBp
        biBjYW5jZWxsaW5nLCBzZWUgYEVtYmVyLnJ1bi5jYW5jZWxgLgoqLwpFbWJl
        ci5ydW4ub25jZSA9IGZ1bmN0aW9uKHRhcmdldCwgbWV0aG9kKSB7CiAgY2hl
        Y2tBdXRvUnVuKCk7CiAgdmFyIGFyZ3MgPSBzbGljZS5jYWxsKGFyZ3VtZW50
        cyk7CiAgYXJncy51bnNoaWZ0KCdhY3Rpb25zJyk7CiAgcmV0dXJuIGJhY2ti
        dXJuZXIuc2NoZWR1bGVPbmNlLmFwcGx5KGJhY2tidXJuZXIsIGFyZ3MpOwp9
        OwoKLyoqCiAgU2NoZWR1bGVzIGEgZnVuY3Rpb24gdG8gcnVuIG9uZSB0aW1l
        IGluIGEgZ2l2ZW4gcXVldWUgb2YgdGhlIGN1cnJlbnQgUnVuTG9vcC4KICBD
        YWxsaW5nIHRoaXMgbWV0aG9kIHdpdGggdGhlIHNhbWUgcXVldWUvdGFyZ2V0
        L21ldGhvZCBjb21iaW5hdGlvbiB3aWxsIGhhdmUKICBubyBlZmZlY3QgKHBh
        c3QgdGhlIGluaXRpYWwgY2FsbCkuCgogIE5vdGUgdGhhdCBhbHRob3VnaCB5
        b3UgY2FuIHBhc3Mgb3B0aW9uYWwgYXJndW1lbnRzIHRoZXNlIHdpbGwgbm90
        IGJlCiAgY29uc2lkZXJlZCB3aGVuIGxvb2tpbmcgZm9yIGR1cGxpY2F0ZXMu
        IE5ldyBhcmd1bWVudHMgd2lsbCByZXBsYWNlIHByZXZpb3VzCiAgY2FsbHMu
        CgogIGBgYGphdmFzY3JpcHQKICBFbWJlci5ydW4oZnVuY3Rpb24oKSB7CiAg
        ICB2YXIgc2F5SGkgPSBmdW5jdGlvbigpIHsgY29uc29sZS5sb2coJ2hpJyk7
        IH0KICAgIEVtYmVyLnJ1bi5zY2hlZHVsZU9uY2UoJ2FmdGVyUmVuZGVyJywg
        bXlDb250ZXh0LCBzYXlIaSk7CiAgICBFbWJlci5ydW4uc2NoZWR1bGVPbmNl
        KCdhZnRlclJlbmRlcicsIG15Q29udGV4dCwgc2F5SGkpOwogICAgLy8gc2F5
        SGkgd2lsbCBvbmx5IGJlIGV4ZWN1dGVkIG9uY2UsIGluIHRoZSBhZnRlclJl
        bmRlciBxdWV1ZSBvZiB0aGUgUnVuTG9vcAogIH0pOwogIGBgYAoKICBBbHNv
        IG5vdGUgdGhhdCBwYXNzaW5nIGFuIGFub255bW91cyBmdW5jdGlvbiB0byBg
        RW1iZXIucnVuLnNjaGVkdWxlT25jZWAgd2lsbAogIG5vdCBwcmV2ZW50IGFk
        ZGl0aW9uYWwgY2FsbHMgd2l0aCBhbiBpZGVudGljYWwgYW5vbnltb3VzIGZ1
        bmN0aW9uIGZyb20KICBzY2hlZHVsaW5nIHRoZSBpdGVtcyBtdWx0aXBsZSB0
        aW1lcywgZS5nLjoKCiAgYGBgamF2YXNjcmlwdAogIGZ1bmN0aW9uIHNjaGVk
        dWxlSXQoKSB7CiAgICBFbWJlci5ydW4uc2NoZWR1bGVPbmNlKCdhY3Rpb25z
        JywgbXlDb250ZXh0LCBmdW5jdGlvbigpIHsgY29uc29sZS5sb2coIkNsb3N1
        cmUiKTsgfSk7CiAgfQogIHNjaGVkdWxlSXQoKTsKICBzY2hlZHVsZUl0KCk7
        CiAgLy8gIkNsb3N1cmUiIHdpbGwgcHJpbnQgdHdpY2UsIGV2ZW4gdGhvdWdo
        IHdlJ3JlIHVzaW5nIGBFbWJlci5ydW4uc2NoZWR1bGVPbmNlYCwKICAvLyBi
        ZWNhdXNlIHRoZSBmdW5jdGlvbiB3ZSBwYXNzIHRvIGl0IGlzIGFub255bW91
        cyBhbmQgd29uJ3QgbWF0Y2ggdGhlCiAgLy8gcHJldmlvdXNseSBzY2hlZHVs
        ZWQgb3BlcmF0aW9uLgogIGBgYAoKICBBdmFpbGFibGUgcXVldWVzLCBhbmQg
        dGhlaXIgb3JkZXIsIGNhbiBiZSBmb3VuZCBhdCBgRW1iZXIucnVuLnF1ZXVl
        c2AKCiAgQG1ldGhvZCBzY2hlZHVsZU9uY2UKICBAcGFyYW0ge1N0cmluZ30g
        W3F1ZXVlXSBUaGUgbmFtZSBvZiB0aGUgcXVldWUgdG8gc2NoZWR1bGUgYWdh
        aW5zdC4gRGVmYXVsdCBxdWV1ZXMgYXJlICdzeW5jJyBhbmQgJ2FjdGlvbnMn
        LgogIEBwYXJhbSB7T2JqZWN0fSBbdGFyZ2V0XSBUaGUgdGFyZ2V0IG9mIHRo
        ZSBtZXRob2QgdG8gaW52b2tlLgogIEBwYXJhbSB7RnVuY3Rpb258U3RyaW5n
        fSBtZXRob2QgVGhlIG1ldGhvZCB0byBpbnZva2UuCiAgICBJZiB5b3UgcGFz
        cyBhIHN0cmluZyBpdCB3aWxsIGJlIHJlc29sdmVkIG9uIHRoZQogICAgdGFy
        Z2V0IGF0IHRoZSB0aW1lIHRoZSBtZXRob2QgaXMgaW52b2tlZC4KICBAcGFy
        YW0ge09iamVjdH0gW2FyZ3MqXSBPcHRpb25hbCBhcmd1bWVudHMgdG8gcGFz
        cyB0byB0aGUgdGltZW91dC4KICBAcmV0dXJuIHtPYmplY3R9IFRpbWVyIGlu
        Zm9ybWF0aW9uIGZvciB1c2UgaW4gY2FuY2VsbGluZywgc2VlIGBFbWJlci5y
        dW4uY2FuY2VsYC4KKi8KRW1iZXIucnVuLnNjaGVkdWxlT25jZSA9IGZ1bmN0
        aW9uKHF1ZXVlLCB0YXJnZXQsIG1ldGhvZCkgewogIGNoZWNrQXV0b1J1bigp
        OwogIHJldHVybiBiYWNrYnVybmVyLnNjaGVkdWxlT25jZS5hcHBseShiYWNr
        YnVybmVyLCBhcmd1bWVudHMpOwp9OwoKLyoqCiAgU2NoZWR1bGVzIGFuIGl0
        ZW0gdG8gcnVuIGZyb20gd2l0aGluIGEgc2VwYXJhdGUgcnVuIGxvb3AsIGFm
        dGVyCiAgY29udHJvbCBoYXMgYmVlbiByZXR1cm5lZCB0byB0aGUgc3lzdGVt
        LiBUaGlzIGlzIGVxdWl2YWxlbnQgdG8gY2FsbGluZwogIGBFbWJlci5ydW4u
        bGF0ZXJgIHdpdGggYSB3YWl0IHRpbWUgb2YgMW1zLgoKICBgYGBqYXZhc2Ny
        aXB0CiAgRW1iZXIucnVuLm5leHQobXlDb250ZXh0LCBmdW5jdGlvbigpIHsK
        ICAgIC8vIGNvZGUgdG8gYmUgZXhlY3V0ZWQgaW4gdGhlIG5leHQgcnVuIGxv
        b3AsCiAgICAvLyB3aGljaCB3aWxsIGJlIHNjaGVkdWxlZCBhZnRlciB0aGUg
        Y3VycmVudCBvbmUKICB9KTsKICBgYGAKCiAgTXVsdGlwbGUgb3BlcmF0aW9u
        cyBzY2hlZHVsZWQgd2l0aCBgRW1iZXIucnVuLm5leHRgIHdpbGwgY29hbGVz
        Y2UKICBpbnRvIHRoZSBzYW1lIGxhdGVyIHJ1biBsb29wLCBhbG9uZyB3aXRo
        IGFueSBvdGhlciBvcGVyYXRpb25zCiAgc2NoZWR1bGVkIGJ5IGBFbWJlci5y
        dW4ubGF0ZXJgIHRoYXQgZXhwaXJlIHJpZ2h0IGFyb3VuZCB0aGUgc2FtZQog
        IHRpbWUgdGhhdCBgRW1iZXIucnVuLm5leHRgIG9wZXJhdGlvbnMgd2lsbCBm
        aXJlLgoKICBOb3RlIHRoYXQgdGhlcmUgYXJlIG9mdGVuIGFsdGVybmF0aXZl
        cyB0byB1c2luZyBgRW1iZXIucnVuLm5leHRgLgogIEZvciBpbnN0YW5jZSwg
        aWYgeW91J2QgbGlrZSB0byBzY2hlZHVsZSBhbiBvcGVyYXRpb24gdG8gaGFw
        cGVuCiAgYWZ0ZXIgYWxsIERPTSBlbGVtZW50IG9wZXJhdGlvbnMgaGF2ZSBj
        b21wbGV0ZWQgd2l0aGluIHRoZSBjdXJyZW50CiAgcnVuIGxvb3AsIHlvdSBj
        YW4gbWFrZSB1c2Ugb2YgdGhlIGBhZnRlclJlbmRlcmAgcnVuIGxvb3AgcXVl
        dWUgKGFkZGVkCiAgYnkgdGhlIGBlbWJlci12aWV3c2AgcGFja2FnZSwgYWxv
        bmcgd2l0aCB0aGUgcHJlY2VkaW5nIGByZW5kZXJgIHF1ZXVlCiAgd2hlcmUg
        YWxsIHRoZSBET00gZWxlbWVudCBvcGVyYXRpb25zIGhhcHBlbikuIEV4YW1w
        bGU6CgogIGBgYGphdmFzY3JpcHQKICBBcHAuTXlDb2xsZWN0aW9uVmlldyA9
        IEVtYmVyLkNvbGxlY3Rpb25WaWV3LmV4dGVuZCh7CiAgICBkaWRJbnNlcnRF
        bGVtZW50OiBmdW5jdGlvbigpIHsKICAgICAgRW1iZXIucnVuLnNjaGVkdWxl
        T25jZSgnYWZ0ZXJSZW5kZXInLCB0aGlzLCAncHJvY2Vzc0NoaWxkRWxlbWVu
        dHMnKTsKICAgIH0sCiAgICBwcm9jZXNzQ2hpbGRFbGVtZW50czogZnVuY3Rp
        b24oKSB7CiAgICAgIC8vIC4uLiBkbyBzb21ldGhpbmcgd2l0aCBjb2xsZWN0
        aW9uVmlldydzIGNoaWxkIHZpZXcKICAgICAgLy8gZWxlbWVudHMgYWZ0ZXIg
        dGhleSd2ZSBmaW5pc2hlZCByZW5kZXJpbmcsIHdoaWNoCiAgICAgIC8vIGNh
        bid0IGJlIGRvbmUgd2l0aGluIHRoZSBDb2xsZWN0aW9uVmlldydzCiAgICAg
        IC8vIGBkaWRJbnNlcnRFbGVtZW50YCBob29rIGJlY2F1c2UgdGhhdCBnZXRz
        IHJ1bgogICAgICAvLyBiZWZvcmUgdGhlIGNoaWxkIGVsZW1lbnRzIGhhdmUg
        YmVlbiBhZGRlZCB0byB0aGUgRE9NLgogICAgfQogIH0pOwogIGBgYAoKICBP
        bmUgYmVuZWZpdCBvZiB0aGUgYWJvdmUgYXBwcm9hY2ggY29tcGFyZWQgdG8g
        dXNpbmcgYEVtYmVyLnJ1bi5uZXh0YCBpcwogIHRoYXQgeW91IHdpbGwgYmUg
        YWJsZSB0byBwZXJmb3JtIERPTS9DU1Mgb3BlcmF0aW9ucyBiZWZvcmUgdW5w
        cm9jZXNzZWQKICBlbGVtZW50cyBhcmUgcmVuZGVyZWQgdG8gdGhlIHNjcmVl
        biwgd2hpY2ggbWF5IHByZXZlbnQgZmxpY2tlcmluZyBvcgogIG90aGVyIGFy
        dGlmYWN0cyBjYXVzZWQgYnkgZGVsYXlpbmcgcHJvY2Vzc2luZyB1bnRpbCBh
        ZnRlciByZW5kZXJpbmcuCgogIFRoZSBvdGhlciBtYWpvciBiZW5lZml0IHRv
        IHRoZSBhYm92ZSBhcHByb2FjaCBpcyB0aGF0IGBFbWJlci5ydW4ubmV4dGAK
        ICBpbnRyb2R1Y2VzIGFuIGVsZW1lbnQgb2Ygbm9uLWRldGVybWluaXNtLCB3
        aGljaCBjYW4gbWFrZSB0aGluZ3MgbXVjaAogIGhhcmRlciB0byB0ZXN0LCBk
        dWUgdG8gaXRzIHJlbGlhbmNlIG9uIGBzZXRUaW1lb3V0YDsgaXQncyBtdWNo
        IGhhcmRlcgogIHRvIGd1YXJhbnRlZSB0aGUgb3JkZXIgb2Ygc2NoZWR1bGVk
        IG9wZXJhdGlvbnMgd2hlbiB0aGV5IGFyZSBzY2hlZHVsZWQKICBvdXRzaWRl
        IG9mIHRoZSBjdXJyZW50IHJ1biBsb29wLCBpLmUuIHdpdGggYEVtYmVyLnJ1
        bi5uZXh0YC4KCiAgQG1ldGhvZCBuZXh0CiAgQHBhcmFtIHtPYmplY3R9IFt0
        YXJnZXRdIHRhcmdldCBvZiBtZXRob2QgdG8gaW52b2tlCiAgQHBhcmFtIHtG
        dW5jdGlvbnxTdHJpbmd9IG1ldGhvZCBUaGUgbWV0aG9kIHRvIGludm9rZS4K
        ICAgIElmIHlvdSBwYXNzIGEgc3RyaW5nIGl0IHdpbGwgYmUgcmVzb2x2ZWQg
        b24gdGhlCiAgICB0YXJnZXQgYXQgdGhlIHRpbWUgdGhlIG1ldGhvZCBpcyBp
        bnZva2VkLgogIEBwYXJhbSB7T2JqZWN0fSBbYXJncypdIE9wdGlvbmFsIGFy
        Z3VtZW50cyB0byBwYXNzIHRvIHRoZSB0aW1lb3V0LgogIEByZXR1cm4ge09i
        amVjdH0gVGltZXIgaW5mb3JtYXRpb24gZm9yIHVzZSBpbiBjYW5jZWxsaW5n
        LCBzZWUgYEVtYmVyLnJ1bi5jYW5jZWxgLgoqLwpFbWJlci5ydW4ubmV4dCA9
        IGZ1bmN0aW9uKCkgewogIHZhciBhcmdzID0gc2xpY2UuY2FsbChhcmd1bWVu
        dHMpOwogIGFyZ3MucHVzaCgxKTsKICByZXR1cm4gYmFja2J1cm5lci5sYXRl
        ci5hcHBseShiYWNrYnVybmVyLCBhcmdzKTsKfTsKCi8qKgogIENhbmNlbHMg
        YSBzY2hlZHVsZWQgaXRlbS4gTXVzdCBiZSBhIHZhbHVlIHJldHVybmVkIGJ5
        IGBFbWJlci5ydW4ubGF0ZXIoKWAsCiAgYEVtYmVyLnJ1bi5vbmNlKClgLCBg
        RW1iZXIucnVuLm5leHQoKWAsIGBFbWJlci5ydW4uZGVib3VuY2UoKWAsIG9y
        CiAgYEVtYmVyLnJ1bi50aHJvdHRsZSgpYC4KCiAgYGBgamF2YXNjcmlwdAog
        IHZhciBydW5OZXh0ID0gRW1iZXIucnVuLm5leHQobXlDb250ZXh0LCBmdW5j
        dGlvbigpIHsKICAgIC8vIHdpbGwgbm90IGJlIGV4ZWN1dGVkCiAgfSk7CiAg
        RW1iZXIucnVuLmNhbmNlbChydW5OZXh0KTsKCiAgdmFyIHJ1bkxhdGVyID0g
        RW1iZXIucnVuLmxhdGVyKG15Q29udGV4dCwgZnVuY3Rpb24oKSB7CiAgICAv
        LyB3aWxsIG5vdCBiZSBleGVjdXRlZAogIH0sIDUwMCk7CiAgRW1iZXIucnVu
        LmNhbmNlbChydW5MYXRlcik7CgogIHZhciBydW5PbmNlID0gRW1iZXIucnVu
        Lm9uY2UobXlDb250ZXh0LCBmdW5jdGlvbigpIHsKICAgIC8vIHdpbGwgbm90
        IGJlIGV4ZWN1dGVkCiAgfSk7CiAgRW1iZXIucnVuLmNhbmNlbChydW5PbmNl
        KTsKCiAgdmFyIHRocm90dGxlID0gRW1iZXIucnVuLnRocm90dGxlKG15Q29u
        dGV4dCwgZnVuY3Rpb24oKSB7CiAgICAvLyB3aWxsIG5vdCBiZSBleGVjdXRl
        ZAogIH0sIDEsIGZhbHNlKTsKICBFbWJlci5ydW4uY2FuY2VsKHRocm90dGxl
        KTsKCiAgdmFyIGRlYm91bmNlID0gRW1iZXIucnVuLmRlYm91bmNlKG15Q29u
        dGV4dCwgZnVuY3Rpb24oKSB7CiAgICAvLyB3aWxsIG5vdCBiZSBleGVjdXRl
        ZAogIH0sIDEpOwogIEVtYmVyLnJ1bi5jYW5jZWwoZGVib3VuY2UpOwoKICB2
        YXIgZGVib3VuY2VJbW1lZGlhdGUgPSBFbWJlci5ydW4uZGVib3VuY2UobXlD
        b250ZXh0LCBmdW5jdGlvbigpIHsKICAgIC8vIHdpbGwgYmUgZXhlY3V0ZWQg
        c2luY2Ugd2UgcGFzc2VkIGluIHRydWUgKGltbWVkaWF0ZSkKICB9LCAxMDAs
        IHRydWUpOwogIC8vIHRoZSAxMDBtcyBkZWxheSB1bnRpbCB0aGlzIG1ldGhv
        ZCBjYW4gYmUgY2FsbGVkIGFnYWluIHdpbGwgYmUgY2FuY2VsbGVkCiAgRW1i
        ZXIucnVuLmNhbmNlbChkZWJvdW5jZUltbWVkaWF0ZSk7CiAgYGBgCiAgYGBg
        CiAgYGBgCgogIEBtZXRob2QgY2FuY2VsCiAgQHBhcmFtIHtPYmplY3R9IHRp
        bWVyIFRpbWVyIG9iamVjdCB0byBjYW5jZWwKICBAcmV0dXJuIHtCb29sZWFu
        fSB0cnVlIGlmIGNhbmNlbGxlZCBvciBmYWxzZS91bmRlZmluZWQgaWYgaXQg
        d2Fzbid0IGZvdW5kCiovCkVtYmVyLnJ1bi5jYW5jZWwgPSBmdW5jdGlvbih0
        aW1lcikgewogIHJldHVybiBiYWNrYnVybmVyLmNhbmNlbCh0aW1lcik7Cn07
        CgovKioKICBEZWxheSBjYWxsaW5nIHRoZSB0YXJnZXQgbWV0aG9kIHVudGls
        IHRoZSBkZWJvdW5jZSBwZXJpb2QgaGFzIGVsYXBzZWQKICB3aXRoIG5vIGFk
        ZGl0aW9uYWwgZGVib3VuY2UgY2FsbHMuIElmIGBkZWJvdW5jZWAgaXMgY2Fs
        bGVkIGFnYWluIGJlZm9yZQogIHRoZSBzcGVjaWZpZWQgdGltZSBoYXMgZWxh
        cHNlZCwgdGhlIHRpbWVyIGlzIHJlc2V0IGFuZCB0aGUgZW50aXJlIHBlcmlv
        ZAogIG11c3QgcGFzcyBhZ2FpbiBiZWZvcmUgdGhlIHRhcmdldCBtZXRob2Qg
        aXMgY2FsbGVkLgoKICBUaGlzIG1ldGhvZCBzaG91bGQgYmUgdXNlZCB3aGVu
        IGFuIGV2ZW50IG1heSBiZSBjYWxsZWQgbXVsdGlwbGUgdGltZXMKICBidXQg
        dGhlIGFjdGlvbiBzaG91bGQgb25seSBiZSBjYWxsZWQgb25jZSB3aGVuIHRo
        ZSBldmVudCBpcyBkb25lIGZpcmluZy4KICBBIGNvbW1vbiBleGFtcGxlIGlz
        IGZvciBzY3JvbGwgZXZlbnRzIHdoZXJlIHlvdSBvbmx5IHdhbnQgdXBkYXRl
        cyB0bwogIGhhcHBlbiBvbmNlIHNjcm9sbGluZyBoYXMgY2Vhc2VkLgoKICBg
        YGBqYXZhc2NyaXB0CiAgICB2YXIgbXlGdW5jID0gZnVuY3Rpb24oKSB7IGNv
        bnNvbGUubG9nKHRoaXMubmFtZSArICcgcmFuLicpOyB9OwogICAgdmFyIG15
        Q29udGV4dCA9IHtuYW1lOiAnZGVib3VuY2UnfTsKCiAgICBFbWJlci5ydW4u
        ZGVib3VuY2UobXlDb250ZXh0LCBteUZ1bmMsIDE1MCk7CgogICAgLy8gbGVz
        cyB0aGFuIDE1MG1zIHBhc3NlcwoKICAgIEVtYmVyLnJ1bi5kZWJvdW5jZSht
        eUNvbnRleHQsIG15RnVuYywgMTUwKTsKCiAgICAvLyAxNTBtcyBwYXNzZXMK
        ICAgIC8vIG15RnVuYyBpcyBpbnZva2VkIHdpdGggY29udGV4dCBteUNvbnRl
        eHQKICAgIC8vIGNvbnNvbGUgbG9ncyAnZGVib3VuY2UgcmFuLicgb25lIHRp
        bWUuCiAgYGBgCgogIEltbWVkaWF0ZSBhbGxvd3MgeW91IHRvIHJ1biB0aGUg
        ZnVuY3Rpb24gaW1tZWRpYXRlbHksIGJ1dCBkZWJvdW5jZQogIG90aGVyIGNh
        bGxzIGZvciB0aGlzIGZ1bmN0aW9uIHVudGlsIHRoZSB3YWl0IHRpbWUgaGFz
        IGVsYXBzZWQuIElmCiAgYGRlYm91bmNlYCBpcyBjYWxsZWQgYWdhaW4gYmVm
        b3JlIHRoZSBzcGVjaWZpZWQgdGltZSBoYXMgZWxhcHNlZCwKICB0aGUgdGlt
        ZXIgaXMgcmVzZXQgYW5kIHRoZSBlbnRpcmUgcGVyaW9kIG1zdXQgcGFzcyBh
        Z2FpbiBiZWZvcmUKICB0aGUgbWV0aG9kIGNhbiBiZSBjYWxsZWQgYWdhaW4u
        CgogIGBgYGphdmFzY3JpcHQKICAgIHZhciBteUZ1bmMgPSBmdW5jdGlvbigp
        IHsgY29uc29sZS5sb2codGhpcy5uYW1lICsgJyByYW4uJyk7IH07CiAgICB2
        YXIgbXlDb250ZXh0ID0ge25hbWU6ICdkZWJvdW5jZSd9OwoKICAgIEVtYmVy
        LnJ1bi5kZWJvdW5jZShteUNvbnRleHQsIG15RnVuYywgMTUwLCB0cnVlKTsK
        CiAgICAvLyBjb25zb2xlIGxvZ3MgJ2RlYm91bmNlIHJhbi4nIG9uZSB0aW1l
        IGltbWVkaWF0ZWx5LgogICAgLy8gMTAwbXMgcGFzc2VzCgogICAgRW1iZXIu
        cnVuLmRlYm91bmNlKG15Q29udGV4dCwgbXlGdW5jLCAxNTAsIHRydWUpOwoK
        ICAgIC8vIDE1MG1zIHBhc3NlcyBhbmQgbm90aGluZyBlbHNlIGlzIGxvZ2dl
        ZCB0byB0aGUgY29uc29sZSBhbmQKICAgIC8vIHRoZSBkZWJvdW5jZWUgaXMg
        bm8gbG9uZ2VyIGJlaW5nIHdhdGNoZWQKCiAgICBFbWJlci5ydW4uZGVib3Vu
        Y2UobXlDb250ZXh0LCBteUZ1bmMsIDE1MCwgdHJ1ZSk7CgogICAgLy8gY29u
        c29sZSBsb2dzICdkZWJvdW5jZSByYW4uJyBvbmUgdGltZSBpbW1lZGlhdGVs
        eS4KICAgIC8vIDE1MG1zIHBhc3NlcyBhbmQgbm90aGluZyBlbHNlIGlzIGxv
        Z2dlZCB0b3QgaGUgY29uc29sZSBhbmQKICAgIC8vIHRoZSBkZWJvdW5jZWUg
        aXMgbm8gbG9uZ2VyIGJlaW5nIHdhdGNoZWQKCiAgYGBgCgogIEBtZXRob2Qg
        ZGVib3VuY2UKICBAcGFyYW0ge09iamVjdH0gW3RhcmdldF0gdGFyZ2V0IG9m
        IG1ldGhvZCB0byBpbnZva2UKICBAcGFyYW0ge0Z1bmN0aW9ufFN0cmluZ30g
        bWV0aG9kIFRoZSBtZXRob2QgdG8gaW52b2tlLgogICAgTWF5IGJlIGEgZnVu
        Y3Rpb24gb3IgYSBzdHJpbmcuIElmIHlvdSBwYXNzIGEgc3RyaW5nCiAgICB0
        aGVuIGl0IHdpbGwgYmUgbG9va2VkIHVwIG9uIHRoZSBwYXNzZWQgdGFyZ2V0
        LgogIEBwYXJhbSB7T2JqZWN0fSBbYXJncypdIE9wdGlvbmFsIGFyZ3VtZW50
        cyB0byBwYXNzIHRvIHRoZSB0aW1lb3V0LgogIEBwYXJhbSB7TnVtYmVyfSB3
        YWl0IE51bWJlciBvZiBtaWxsaXNlY29uZHMgdG8gd2FpdC4KICBAcGFyYW0g
        e0Jvb2xlYW59IGltbWVkaWF0ZSBUcmlnZ2VyIHRoZSBmdW5jdGlvbiBvbiB0
        aGUgbGVhZGluZyBpbnN0ZWFkIAogICAgb2YgdGhlIHRyYWlsaW5nIGVkZ2Ug
        b2YgdGhlIHdhaXQgaW50ZXJ2YWwuIERlZmF1bHRzIHRvIGZhbHNlLgogIEBy
        ZXR1cm4ge0FycmF5fSBUaW1lciBpbmZvcm1hdGlvbiBmb3IgdXNlIGluIGNh
        bmNlbGxpbmcsIHNlZSBgRW1iZXIucnVuLmNhbmNlbGAuCiovCkVtYmVyLnJ1
        bi5kZWJvdW5jZSA9IGZ1bmN0aW9uKCkgewogIHJldHVybiBiYWNrYnVybmVy
        LmRlYm91bmNlLmFwcGx5KGJhY2tidXJuZXIsIGFyZ3VtZW50cyk7Cn07Cgov
        KioKICBFbnN1cmUgdGhhdCB0aGUgdGFyZ2V0IG1ldGhvZCBpcyBuZXZlciBj
        YWxsZWQgbW9yZSBmcmVxdWVudGx5IHRoYW4KICB0aGUgc3BlY2lmaWVkIHNw
        YWNpbmcgcGVyaW9kLgoKICBgYGBqYXZhc2NyaXB0CiAgICB2YXIgbXlGdW5j
        ID0gZnVuY3Rpb24oKSB7IGNvbnNvbGUubG9nKHRoaXMubmFtZSArICcgcmFu
        LicpOyB9OwogICAgdmFyIG15Q29udGV4dCA9IHtuYW1lOiAndGhyb3R0bGUn
        fTsKCiAgICBFbWJlci5ydW4udGhyb3R0bGUobXlDb250ZXh0LCBteUZ1bmMs
        IDE1MCk7CiAgICAvLyBteUZ1bmMgaXMgaW52b2tlZCB3aXRoIGNvbnRleHQg
        bXlDb250ZXh0CgogICAgLy8gNTBtcyBwYXNzZXMKICAgIEVtYmVyLnJ1bi50
        aHJvdHRsZShteUNvbnRleHQsIG15RnVuYywgMTUwKTsKCiAgICAvLyA1MG1z
        IHBhc3NlcwogICAgRW1iZXIucnVuLnRocm90dGxlKG15Q29udGV4dCwgbXlG
        dW5jLCAxNTApOwoKICAgIC8vIDE1MG1zIHBhc3NlcwogICAgRW1iZXIucnVu
        LnRocm90dGxlKG15Q29udGV4dCwgbXlGdW5jLCAxNTApOwogICAgLy8gbXlG
        dW5jIGlzIGludm9rZWQgd2l0aCBjb250ZXh0IG15Q29udGV4dAogICAgLy8g
        Y29uc29sZSBsb2dzICd0aHJvdHRsZSByYW4uJyB0d2ljZSwgMjUwbXMgYXBh
        cnQuCiAgYGBgCgogIEBtZXRob2QgdGhyb3R0bGUKICBAcGFyYW0ge09iamVj
        dH0gW3RhcmdldF0gdGFyZ2V0IG9mIG1ldGhvZCB0byBpbnZva2UKICBAcGFy
        YW0ge0Z1bmN0aW9ufFN0cmluZ30gbWV0aG9kIFRoZSBtZXRob2QgdG8gaW52
        b2tlLgogICAgTWF5IGJlIGEgZnVuY3Rpb24gb3IgYSBzdHJpbmcuIElmIHlv
        dSBwYXNzIGEgc3RyaW5nCiAgICB0aGVuIGl0IHdpbGwgYmUgbG9va2VkIHVw
        IG9uIHRoZSBwYXNzZWQgdGFyZ2V0LgogIEBwYXJhbSB7T2JqZWN0fSBbYXJn
        cypdIE9wdGlvbmFsIGFyZ3VtZW50cyB0byBwYXNzIHRvIHRoZSB0aW1lb3V0
        LgogIEBwYXJhbSB7TnVtYmVyfSBzcGFjaW5nIE51bWJlciBvZiBtaWxsaXNl
        Y29uZHMgdG8gc3BhY2Ugb3V0IHJlcXVlc3RzLgogIEByZXR1cm4ge0FycmF5
        fSBUaW1lciBpbmZvcm1hdGlvbiBmb3IgdXNlIGluIGNhbmNlbGxpbmcsIHNl
        ZSBgRW1iZXIucnVuLmNhbmNlbGAuCiovCkVtYmVyLnJ1bi50aHJvdHRsZSA9
        IGZ1bmN0aW9uKCkgewogIHJldHVybiBiYWNrYnVybmVyLnRocm90dGxlLmFw
        cGx5KGJhY2tidXJuZXIsIGFyZ3VtZW50cyk7Cn07CgovLyBNYWtlIHN1cmUg
        aXQncyBub3QgYW4gYXV0b3J1biBkdXJpbmcgdGVzdGluZwpmdW5jdGlvbiBj
        aGVja0F1dG9SdW4oKSB7CiAgaWYgKCFFbWJlci5ydW4uY3VycmVudFJ1bkxv
        b3ApIHsKICAgIEVtYmVyLmFzc2VydCgiWW91IGhhdmUgdHVybmVkIG9uIHRl
        c3RpbmcgbW9kZSwgd2hpY2ggZGlzYWJsZWQgdGhlIHJ1bi1sb29wJ3MgYXV0
        b3J1bi4gWW91IHdpbGwgbmVlZCB0byB3cmFwIGFueSBjb2RlIHdpdGggYXN5
        bmNocm9ub3VzIHNpZGUtZWZmZWN0cyBpbiBhbiBFbWJlci5ydW4iLCAhRW1i
        ZXIudGVzdGluZyk7CiAgfQp9Cgp9KSgpOwoKCgooZnVuY3Rpb24oKSB7Ci8v
        IEVtYmVyLkxvZ2dlcgovLyBnZXQKLy8gc2V0Ci8vIGd1aWRGb3IsIG1ldGEK
        Ly8gYWRkT2JzZXJ2ZXIsIHJlbW92ZU9ic2VydmVyCi8vIEVtYmVyLnJ1bi5z
        Y2hlZHVsZQovKioKQG1vZHVsZSBlbWJlci1tZXRhbAoqLwoKLy8gLi4uLi4u
        Li4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4u
        Li4uLi4uLgovLyBDT05TVEFOVFMKLy8KCi8qKgogIERlYnVnIHBhcmFtZXRl
        ciB5b3UgY2FuIHR1cm4gb24uIFRoaXMgd2lsbCBsb2cgYWxsIGJpbmRpbmdz
        IHRoYXQgZmlyZSB0bwogIHRoZSBjb25zb2xlLiBUaGlzIHNob3VsZCBiZSBk
        aXNhYmxlZCBpbiBwcm9kdWN0aW9uIGNvZGUuIE5vdGUgdGhhdCB5b3UKICBj
        YW4gYWxzbyBlbmFibGUgdGhpcyBmcm9tIHRoZSBjb25zb2xlIG9yIHRlbXBv
        cmFyaWx5LgoKICBAcHJvcGVydHkgTE9HX0JJTkRJTkdTCiAgQGZvciBFbWJl
        cgogIEB0eXBlIEJvb2xlYW4KICBAZGVmYXVsdCBmYWxzZQoqLwpFbWJlci5M
        T0dfQklORElOR1MgPSBmYWxzZSB8fCAhIUVtYmVyLkVOVi5MT0dfQklORElO
        R1M7Cgp2YXIgZ2V0ICAgICA9IEVtYmVyLmdldCwKICAgIHNldCAgICAgPSBF
        bWJlci5zZXQsCiAgICBndWlkRm9yID0gRW1iZXIuZ3VpZEZvciwKICAgIElT
        X0dMT0JBTCA9IC9eKFtBLVokXXwoWzAtOV1bQS1aJF0pKS87CgovKioKICBS
        ZXR1cm5zIHRydWUgaWYgdGhlIHByb3ZpZGVkIHBhdGggaXMgZ2xvYmFsIChl
        LmcuLCBgTXlBcHAuZm9vQ29udHJvbGxlci5iYXJgKQogIGluc3RlYWQgb2Yg
        bG9jYWwgKGBmb28uYmFyLmJhemApLgoKICBAbWV0aG9kIGlzR2xvYmFsUGF0
        aAogIEBmb3IgRW1iZXIKICBAcHJpdmF0ZQogIEBwYXJhbSB7U3RyaW5nfSBw
        YXRoCiAgQHJldHVybiBCb29sZWFuCiovCnZhciBpc0dsb2JhbFBhdGggPSBF
        bWJlci5pc0dsb2JhbFBhdGggPSBmdW5jdGlvbihwYXRoKSB7CiAgcmV0dXJu
        IElTX0dMT0JBTC50ZXN0KHBhdGgpOwp9OwoKZnVuY3Rpb24gZ2V0V2l0aEds
        b2JhbHMob2JqLCBwYXRoKSB7CiAgcmV0dXJuIGdldChpc0dsb2JhbFBhdGgo
        cGF0aCkgPyBFbWJlci5sb29rdXAgOiBvYmosIHBhdGgpOwp9CgovLyAuLi4u
        Li4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4u
        Li4uLi4uLi4uCi8vIEJJTkRJTkcKLy8KCnZhciBCaW5kaW5nID0gZnVuY3Rp
        b24odG9QYXRoLCBmcm9tUGF0aCkgewogIHRoaXMuX2RpcmVjdGlvbiA9ICdm
        d2QnOwogIHRoaXMuX2Zyb20gPSBmcm9tUGF0aDsKICB0aGlzLl90byAgID0g
        dG9QYXRoOwogIHRoaXMuX2RpcmVjdGlvbk1hcCA9IEVtYmVyLk1hcC5jcmVh
        dGUoKTsKfTsKCi8qKgpAY2xhc3MgQmluZGluZwpAbmFtZXNwYWNlIEVtYmVy
        CiovCgpCaW5kaW5nLnByb3RvdHlwZSA9IHsKICAvKioKICAgIFRoaXMgY29w
        aWVzIHRoZSBCaW5kaW5nIHNvIGl0IGNhbiBiZSBjb25uZWN0ZWQgdG8gYW5v
        dGhlciBvYmplY3QuCgogICAgQG1ldGhvZCBjb3B5CiAgICBAcmV0dXJuIHtF
        bWJlci5CaW5kaW5nfSBgdGhpc2AKICAqLwogIGNvcHk6IGZ1bmN0aW9uICgp
        IHsKICAgIHZhciBjb3B5ID0gbmV3IEJpbmRpbmcodGhpcy5fdG8sIHRoaXMu
        X2Zyb20pOwogICAgaWYgKHRoaXMuX29uZVdheSkgeyBjb3B5Ll9vbmVXYXkg
        PSB0cnVlOyB9CiAgICByZXR1cm4gY29weTsKICB9LAoKICAvLyAuLi4uLi4u
        Li4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4u
        Li4uLi4uCiAgLy8gQ09ORklHCiAgLy8KCiAgLyoqCiAgICBUaGlzIHdpbGwg
        c2V0IGBmcm9tYCBwcm9wZXJ0eSBwYXRoIHRvIHRoZSBzcGVjaWZpZWQgdmFs
        dWUuIEl0IHdpbGwgbm90CiAgICBhdHRlbXB0IHRvIHJlc29sdmUgdGhpcyBw
        cm9wZXJ0eSBwYXRoIHRvIGFuIGFjdHVhbCBvYmplY3QgdW50aWwgeW91CiAg
        ICBjb25uZWN0IHRoZSBiaW5kaW5nLgoKICAgIFRoZSBiaW5kaW5nIHdpbGwg
        c2VhcmNoIGZvciB0aGUgcHJvcGVydHkgcGF0aCBzdGFydGluZyBhdCB0aGUg
        cm9vdCBvYmplY3QKICAgIHlvdSBwYXNzIHdoZW4geW91IGBjb25uZWN0KClg
        IHRoZSBiaW5kaW5nLiBJdCBmb2xsb3dzIHRoZSBzYW1lIHJ1bGVzIGFzCiAg
        ICBgZ2V0KClgIC0gc2VlIHRoYXQgbWV0aG9kIGZvciBtb3JlIGluZm9ybWF0
        aW9uLgoKICAgIEBtZXRob2QgZnJvbQogICAgQHBhcmFtIHtTdHJpbmd9IHBh
        dGggdGhlIHByb3BlcnR5IHBhdGggdG8gY29ubmVjdCB0bwogICAgQHJldHVy
        biB7RW1iZXIuQmluZGluZ30gYHRoaXNgCiAgKi8KICBmcm9tOiBmdW5jdGlv
        bihwYXRoKSB7CiAgICB0aGlzLl9mcm9tID0gcGF0aDsKICAgIHJldHVybiB0
        aGlzOwogIH0sCgogIC8qKgogICAgVGhpcyB3aWxsIHNldCB0aGUgYHRvYCBw
        cm9wZXJ0eSBwYXRoIHRvIHRoZSBzcGVjaWZpZWQgdmFsdWUuIEl0IHdpbGwg
        bm90CiAgICBhdHRlbXB0IHRvIHJlc29sdmUgdGhpcyBwcm9wZXJ0eSBwYXRo
        IHRvIGFuIGFjdHVhbCBvYmplY3QgdW50aWwgeW91CiAgICBjb25uZWN0IHRo
        ZSBiaW5kaW5nLgoKICAgIFRoZSBiaW5kaW5nIHdpbGwgc2VhcmNoIGZvciB0
        aGUgcHJvcGVydHkgcGF0aCBzdGFydGluZyBhdCB0aGUgcm9vdCBvYmplY3QK
        ICAgIHlvdSBwYXNzIHdoZW4geW91IGBjb25uZWN0KClgIHRoZSBiaW5kaW5n
        LiBJdCBmb2xsb3dzIHRoZSBzYW1lIHJ1bGVzIGFzCiAgICBgZ2V0KClgIC0g
        c2VlIHRoYXQgbWV0aG9kIGZvciBtb3JlIGluZm9ybWF0aW9uLgoKICAgIEBt
        ZXRob2QgdG8KICAgIEBwYXJhbSB7U3RyaW5nfFR1cGxlfSBwYXRoIEEgcHJv
        cGVydHkgcGF0aCBvciB0dXBsZQogICAgQHJldHVybiB7RW1iZXIuQmluZGlu
        Z30gYHRoaXNgCiAgKi8KICB0bzogZnVuY3Rpb24ocGF0aCkgewogICAgdGhp
        cy5fdG8gPSBwYXRoOwogICAgcmV0dXJuIHRoaXM7CiAgfSwKCiAgLyoqCiAg
        ICBDb25maWd1cmVzIHRoZSBiaW5kaW5nIGFzIG9uZSB3YXkuIEEgb25lLXdh
        eSBiaW5kaW5nIHdpbGwgcmVsYXkgY2hhbmdlcwogICAgb24gdGhlIGBmcm9t
        YCBzaWRlIHRvIHRoZSBgdG9gIHNpZGUsIGJ1dCBub3QgdGhlIG90aGVyIHdh
        eSBhcm91bmQuIFRoaXMKICAgIG1lYW5zIHRoYXQgaWYgeW91IGNoYW5nZSB0
        aGUgYHRvYCBzaWRlIGRpcmVjdGx5LCB0aGUgYGZyb21gIHNpZGUgbWF5IGhh
        dmUKICAgIGEgZGlmZmVyZW50IHZhbHVlLgoKICAgIEBtZXRob2Qgb25lV2F5
        CiAgICBAcmV0dXJuIHtFbWJlci5CaW5kaW5nfSBgdGhpc2AKICAqLwogIG9u
        ZVdheTogZnVuY3Rpb24oKSB7CiAgICB0aGlzLl9vbmVXYXkgPSB0cnVlOwog
        ICAgcmV0dXJuIHRoaXM7CiAgfSwKCiAgLyoqCiAgICBAbWV0aG9kIHRvU3Ry
        aW5nCiAgICBAcmV0dXJuIHtTdHJpbmd9IHN0cmluZyByZXByZXNlbnRhdGlv
        biBvZiBiaW5kaW5nCiAgKi8KICB0b1N0cmluZzogZnVuY3Rpb24oKSB7CiAg
        ICB2YXIgb25lV2F5ID0gdGhpcy5fb25lV2F5ID8gJ1tvbmVXYXldJyA6ICcn
        OwogICAgcmV0dXJuICJFbWJlci5CaW5kaW5nPCIgKyBndWlkRm9yKHRoaXMp
        ICsgIj4oIiArIHRoaXMuX2Zyb20gKyAiIC0+ICIgKyB0aGlzLl90byArICIp
        IiArIG9uZVdheTsKICB9LAoKICAvLyAuLi4uLi4uLi4uLi4uLi4uLi4uLi4u
        Li4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uCiAgLy8gQ09O
        TkVDVCBBTkQgU1lOQwogIC8vCgogIC8qKgogICAgQXR0ZW1wdHMgdG8gY29u
        bmVjdCB0aGlzIGJpbmRpbmcgaW5zdGFuY2Ugc28gdGhhdCBpdCBjYW4gcmVj
        ZWl2ZSBhbmQgcmVsYXkKICAgIGNoYW5nZXMuIFRoaXMgbWV0aG9kIHdpbGwg
        cmFpc2UgYW4gZXhjZXB0aW9uIGlmIHlvdSBoYXZlIG5vdCBzZXQgdGhlCiAg
        ICBmcm9tL3RvIHByb3BlcnRpZXMgeWV0LgoKICAgIEBtZXRob2QgY29ubmVj
        dAogICAgQHBhcmFtIHtPYmplY3R9IG9iaiBUaGUgcm9vdCBvYmplY3QgZm9y
        IHRoaXMgYmluZGluZy4KICAgIEByZXR1cm4ge0VtYmVyLkJpbmRpbmd9IGB0
        aGlzYAogICovCiAgY29ubmVjdDogZnVuY3Rpb24ob2JqKSB7CiAgICBFbWJl
        ci5hc3NlcnQoJ011c3QgcGFzcyBhIHZhbGlkIG9iamVjdCB0byBFbWJlci5C
        aW5kaW5nLmNvbm5lY3QoKScsICEhb2JqKTsKCiAgICB2YXIgZnJvbVBhdGgg
        PSB0aGlzLl9mcm9tLCB0b1BhdGggPSB0aGlzLl90bzsKICAgIEVtYmVyLnRy
        eVNldChvYmosIHRvUGF0aCwgZ2V0V2l0aEdsb2JhbHMob2JqLCBmcm9tUGF0
        aCkpOwoKICAgIC8vIGFkZCBhbiBvYnNlcnZlciBvbiB0aGUgb2JqZWN0IHRv
        IGJlIG5vdGlmaWVkIHdoZW4gdGhlIGJpbmRpbmcgc2hvdWxkIGJlIHVwZGF0
        ZWQKICAgIEVtYmVyLmFkZE9ic2VydmVyKG9iaiwgZnJvbVBhdGgsIHRoaXMs
        IHRoaXMuZnJvbURpZENoYW5nZSk7CgogICAgLy8gaWYgdGhlIGJpbmRpbmcg
        aXMgYSB0d28td2F5IGJpbmRpbmcsIGFsc28gc2V0IHVwIGFuIG9ic2VydmVy
        IG9uIHRoZSB0YXJnZXQKICAgIGlmICghdGhpcy5fb25lV2F5KSB7IEVtYmVy
        LmFkZE9ic2VydmVyKG9iaiwgdG9QYXRoLCB0aGlzLCB0aGlzLnRvRGlkQ2hh
        bmdlKTsgfQoKICAgIHRoaXMuX3JlYWR5VG9TeW5jID0gdHJ1ZTsKCiAgICBy
        ZXR1cm4gdGhpczsKICB9LAoKICAvKioKICAgIERpc2Nvbm5lY3RzIHRoZSBi
        aW5kaW5nIGluc3RhbmNlLiBDaGFuZ2VzIHdpbGwgbm8gbG9uZ2VyIGJlIHJl
        bGF5ZWQuIFlvdQogICAgd2lsbCBub3QgdXN1YWxseSBuZWVkIHRvIGNhbGwg
        dGhpcyBtZXRob2QuCgogICAgQG1ldGhvZCBkaXNjb25uZWN0CiAgICBAcGFy
        YW0ge09iamVjdH0gb2JqIFRoZSByb290IG9iamVjdCB5b3UgcGFzc2VkIHdo
        ZW4gY29ubmVjdGluZyB0aGUgYmluZGluZy4KICAgIEByZXR1cm4ge0VtYmVy
        LkJpbmRpbmd9IGB0aGlzYAogICovCiAgZGlzY29ubmVjdDogZnVuY3Rpb24o
        b2JqKSB7CiAgICBFbWJlci5hc3NlcnQoJ011c3QgcGFzcyBhIHZhbGlkIG9i
        amVjdCB0byBFbWJlci5CaW5kaW5nLmRpc2Nvbm5lY3QoKScsICEhb2JqKTsK
        CiAgICB2YXIgdHdvV2F5ID0gIXRoaXMuX29uZVdheTsKCiAgICAvLyByZW1v
        dmUgYW4gb2JzZXJ2ZXIgb24gdGhlIG9iamVjdCBzbyB3ZSdyZSBubyBsb25n
        ZXIgbm90aWZpZWQgb2YKICAgIC8vIGNoYW5nZXMgdGhhdCBzaG91bGQgdXBk
        YXRlIGJpbmRpbmdzLgogICAgRW1iZXIucmVtb3ZlT2JzZXJ2ZXIob2JqLCB0
        aGlzLl9mcm9tLCB0aGlzLCB0aGlzLmZyb21EaWRDaGFuZ2UpOwoKICAgIC8v
        IGlmIHRoZSBiaW5kaW5nIGlzIHR3by13YXksIHJlbW92ZSB0aGUgb2JzZXJ2
        ZXIgZnJvbSB0aGUgdGFyZ2V0IGFzIHdlbGwKICAgIGlmICh0d29XYXkpIHsg
        RW1iZXIucmVtb3ZlT2JzZXJ2ZXIob2JqLCB0aGlzLl90bywgdGhpcywgdGhp
        cy50b0RpZENoYW5nZSk7IH0KCiAgICB0aGlzLl9yZWFkeVRvU3luYyA9IGZh
        bHNlOyAvLyBkaXNhYmxlIHNjaGVkdWxlZCBzeW5jcy4uLgogICAgcmV0dXJu
        IHRoaXM7CiAgfSwKCiAgLy8gLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4u
        Li4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLgogIC8vIFBSSVZBVEUK
        ICAvLwoKICAvKiBjYWxsZWQgd2hlbiB0aGUgZnJvbSBzaWRlIGNoYW5nZXMg
        Ki8KICBmcm9tRGlkQ2hhbmdlOiBmdW5jdGlvbih0YXJnZXQpIHsKICAgIHRo
        aXMuX3NjaGVkdWxlU3luYyh0YXJnZXQsICdmd2QnKTsKICB9LAoKICAvKiBj
        YWxsZWQgd2hlbiB0aGUgdG8gc2lkZSBjaGFuZ2VzICovCiAgdG9EaWRDaGFu
        Z2U6IGZ1bmN0aW9uKHRhcmdldCkgewogICAgdGhpcy5fc2NoZWR1bGVTeW5j
        KHRhcmdldCwgJ2JhY2snKTsKICB9LAoKICBfc2NoZWR1bGVTeW5jOiBmdW5j
        dGlvbihvYmosIGRpcikgewogICAgdmFyIGRpcmVjdGlvbk1hcCA9IHRoaXMu
        X2RpcmVjdGlvbk1hcDsKICAgIHZhciBleGlzdGluZ0RpciA9IGRpcmVjdGlv
        bk1hcC5nZXQob2JqKTsKCiAgICAvLyBpZiB3ZSBoYXZlbid0IHNjaGVkdWxl
        ZCB0aGUgYmluZGluZyB5ZXQsIHNjaGVkdWxlIGl0CiAgICBpZiAoIWV4aXN0
        aW5nRGlyKSB7CiAgICAgIEVtYmVyLnJ1bi5zY2hlZHVsZSgnc3luYycsIHRo
        aXMsIHRoaXMuX3N5bmMsIG9iaik7CiAgICAgIGRpcmVjdGlvbk1hcC5zZXQo
        b2JqLCBkaXIpOwogICAgfQoKICAgIC8vIElmIGJvdGggYSAnYmFjaycgYW5k
        ICdmd2QnIHN5bmMgaGF2ZSBiZWVuIHNjaGVkdWxlZCBvbiB0aGUgc2FtZSBv
        YmplY3QsCiAgICAvLyBkZWZhdWx0IHRvIGEgJ2Z3ZCcgc3luYyBzbyB0aGF0
        IGl0IHJlbWFpbnMgZGV0ZXJtaW5pc3RpYy4KICAgIGlmIChleGlzdGluZ0Rp
        ciA9PT0gJ2JhY2snICYmIGRpciA9PT0gJ2Z3ZCcpIHsKICAgICAgZGlyZWN0
        aW9uTWFwLnNldChvYmosICdmd2QnKTsKICAgIH0KICB9LAoKICBfc3luYzog
        ZnVuY3Rpb24ob2JqKSB7CiAgICB2YXIgbG9nID0gRW1iZXIuTE9HX0JJTkRJ
        TkdTOwoKICAgIC8vIGRvbid0IHN5bmNocm9uaXplIGRlc3Ryb3llZCBvYmpl
        Y3RzIG9yIGRpc2Nvbm5lY3RlZCBiaW5kaW5ncwogICAgaWYgKG9iai5pc0Rl
        c3Ryb3llZCB8fCAhdGhpcy5fcmVhZHlUb1N5bmMpIHsgcmV0dXJuOyB9Cgog
        ICAgLy8gZ2V0IHRoZSBkaXJlY3Rpb24gb2YgdGhlIGJpbmRpbmcgZm9yIHRo
        ZSBvYmplY3Qgd2UgYXJlCiAgICAvLyBzeW5jaHJvbml6aW5nIGZyb20KICAg
        IHZhciBkaXJlY3Rpb25NYXAgPSB0aGlzLl9kaXJlY3Rpb25NYXA7CiAgICB2
        YXIgZGlyZWN0aW9uID0gZGlyZWN0aW9uTWFwLmdldChvYmopOwoKICAgIHZh
        ciBmcm9tUGF0aCA9IHRoaXMuX2Zyb20sIHRvUGF0aCA9IHRoaXMuX3RvOwoK
        ICAgIGRpcmVjdGlvbk1hcC5yZW1vdmUob2JqKTsKCiAgICAvLyBpZiB3ZSdy
        ZSBzeW5jaHJvbml6aW5nIGZyb20gdGhlIHJlbW90ZSBvYmplY3QuLi4KICAg
        IGlmIChkaXJlY3Rpb24gPT09ICdmd2QnKSB7CiAgICAgIHZhciBmcm9tVmFs
        dWUgPSBnZXRXaXRoR2xvYmFscyhvYmosIHRoaXMuX2Zyb20pOwogICAgICBp
        ZiAobG9nKSB7CiAgICAgICAgRW1iZXIuTG9nZ2VyLmxvZygnICcsIHRoaXMu
        dG9TdHJpbmcoKSwgJy0+JywgZnJvbVZhbHVlLCBvYmopOwogICAgICB9CiAg
        ICAgIGlmICh0aGlzLl9vbmVXYXkpIHsKICAgICAgICBFbWJlci50cnlTZXQo
        b2JqLCB0b1BhdGgsIGZyb21WYWx1ZSk7CiAgICAgIH0gZWxzZSB7CiAgICAg
        ICAgRW1iZXIuX3N1c3BlbmRPYnNlcnZlcihvYmosIHRvUGF0aCwgdGhpcywg
        dGhpcy50b0RpZENoYW5nZSwgZnVuY3Rpb24gKCkgewogICAgICAgICAgRW1i
        ZXIudHJ5U2V0KG9iaiwgdG9QYXRoLCBmcm9tVmFsdWUpOwogICAgICAgIH0p
        OwogICAgICB9CiAgICAvLyBpZiB3ZSdyZSBzeW5jaHJvbml6aW5nICp0byog
        dGhlIHJlbW90ZSBvYmplY3QKICAgIH0gZWxzZSBpZiAoZGlyZWN0aW9uID09
        PSAnYmFjaycpIHsKICAgICAgdmFyIHRvVmFsdWUgPSBnZXQob2JqLCB0aGlz
        Ll90byk7CiAgICAgIGlmIChsb2cpIHsKICAgICAgICBFbWJlci5Mb2dnZXIu
        bG9nKCcgJywgdGhpcy50b1N0cmluZygpLCAnPC0nLCB0b1ZhbHVlLCBvYmop
        OwogICAgICB9CiAgICAgIEVtYmVyLl9zdXNwZW5kT2JzZXJ2ZXIob2JqLCBm
        cm9tUGF0aCwgdGhpcywgdGhpcy5mcm9tRGlkQ2hhbmdlLCBmdW5jdGlvbiAo
        KSB7CiAgICAgICAgRW1iZXIudHJ5U2V0KEVtYmVyLmlzR2xvYmFsUGF0aChm
        cm9tUGF0aCkgPyBFbWJlci5sb29rdXAgOiBvYmosIGZyb21QYXRoLCB0b1Zh
        bHVlKTsKICAgICAgfSk7CiAgICB9CiAgfQoKfTsKCmZ1bmN0aW9uIG1peGlu
        UHJvcGVydGllcyh0bywgZnJvbSkgewogIGZvciAodmFyIGtleSBpbiBmcm9t
        KSB7CiAgICBpZiAoZnJvbS5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7CiAgICAg
        IHRvW2tleV0gPSBmcm9tW2tleV07CiAgICB9CiAgfQp9CgptaXhpblByb3Bl
        cnRpZXMoQmluZGluZywgewoKICAvKgogICAgU2VlIGBFbWJlci5CaW5kaW5n
        LmZyb21gLgoKICAgIEBtZXRob2QgZnJvbQogICAgQHN0YXRpYwogICovCiAg
        ZnJvbTogZnVuY3Rpb24oKSB7CiAgICB2YXIgQyA9IHRoaXMsIGJpbmRpbmcg
        PSBuZXcgQygpOwogICAgcmV0dXJuIGJpbmRpbmcuZnJvbS5hcHBseShiaW5k
        aW5nLCBhcmd1bWVudHMpOwogIH0sCgogIC8qCiAgICBTZWUgYEVtYmVyLkJp
        bmRpbmcudG9gLgoKICAgIEBtZXRob2QgdG8KICAgIEBzdGF0aWMKICAqLwog
        IHRvOiBmdW5jdGlvbigpIHsKICAgIHZhciBDID0gdGhpcywgYmluZGluZyA9
        IG5ldyBDKCk7CiAgICByZXR1cm4gYmluZGluZy50by5hcHBseShiaW5kaW5n
        LCBhcmd1bWVudHMpOwogIH0sCgogIC8qKgogICAgQ3JlYXRlcyBhIG5ldyBC
        aW5kaW5nIGluc3RhbmNlIGFuZCBtYWtlcyBpdCBhcHBseSBpbiBhIHNpbmds
        ZSBkaXJlY3Rpb24uCiAgICBBIG9uZS13YXkgYmluZGluZyB3aWxsIHJlbGF5
        IGNoYW5nZXMgb24gdGhlIGBmcm9tYCBzaWRlIG9iamVjdCAoc3VwcGxpZWQK
        ICAgIGFzIHRoZSBgZnJvbWAgYXJndW1lbnQpIHRoZSBgdG9gIHNpZGUsIGJ1
        dCBub3QgdGhlIG90aGVyIHdheSBhcm91bmQuCiAgICBUaGlzIG1lYW5zIHRo
        YXQgaWYgeW91IGNoYW5nZSB0aGUgInRvIiBzaWRlIGRpcmVjdGx5LCB0aGUg
        ImZyb20iIHNpZGUgbWF5IGhhdmUKICAgIGEgZGlmZmVyZW50IHZhbHVlLgoK
        ICAgIFNlZSBgQmluZGluZy5vbmVXYXlgLgoKICAgIEBtZXRob2Qgb25lV2F5
        CiAgICBAcGFyYW0ge1N0cmluZ30gZnJvbSBmcm9tIHBhdGguCiAgICBAcGFy
        YW0ge0Jvb2xlYW59IFtmbGFnXSAoT3B0aW9uYWwpIHBhc3Npbmcgbm90aGlu
        ZyBoZXJlIHdpbGwgbWFrZSB0aGUKICAgICAgYmluZGluZyBgb25lV2F5YC4g
        WW91IGNhbiBpbnN0ZWFkIHBhc3MgYGZhbHNlYCB0byBkaXNhYmxlIGBvbmVX
        YXlgLCBtYWtpbmcgdGhlCiAgICAgIGJpbmRpbmcgdHdvIHdheSBhZ2Fpbi4K
        ICAgIEByZXR1cm4ge0VtYmVyLkJpbmRpbmd9IGB0aGlzYAogICovCiAgb25l
        V2F5OiBmdW5jdGlvbihmcm9tLCBmbGFnKSB7CiAgICB2YXIgQyA9IHRoaXMs
        IGJpbmRpbmcgPSBuZXcgQyhudWxsLCBmcm9tKTsKICAgIHJldHVybiBiaW5k
        aW5nLm9uZVdheShmbGFnKTsKICB9Cgp9KTsKCi8qKgogIEFuIGBFbWJlci5C
        aW5kaW5nYCBjb25uZWN0cyB0aGUgcHJvcGVydGllcyBvZiB0d28gb2JqZWN0
        cyBzbyB0aGF0IHdoZW5ldmVyCiAgdGhlIHZhbHVlIG9mIG9uZSBwcm9wZXJ0
        eSBjaGFuZ2VzLCB0aGUgb3RoZXIgcHJvcGVydHkgd2lsbCBiZSBjaGFuZ2Vk
        IGFsc28uCgogICMjIEF1dG9tYXRpYyBDcmVhdGlvbiBvZiBCaW5kaW5ncyB3
        aXRoIGAvXipCaW5kaW5nL2AtbmFtZWQgUHJvcGVydGllcwoKICBZb3UgZG8g
        bm90IHVzdWFsbHkgY3JlYXRlIEJpbmRpbmcgb2JqZWN0cyBkaXJlY3RseSBi
        dXQgaW5zdGVhZCBkZXNjcmliZQogIGJpbmRpbmdzIGluIHlvdXIgY2xhc3Mg
        b3Igb2JqZWN0IGRlZmluaXRpb24gdXNpbmcgYXV0b21hdGljIGJpbmRpbmcK
        ICBkZXRlY3Rpb24uCgogIFByb3BlcnRpZXMgZW5kaW5nIGluIGEgYEJpbmRp
        bmdgIHN1ZmZpeCB3aWxsIGJlIGNvbnZlcnRlZCB0byBgRW1iZXIuQmluZGlu
        Z2AKICBpbnN0YW5jZXMuIFRoZSB2YWx1ZSBvZiB0aGlzIHByb3BlcnR5IHNo
        b3VsZCBiZSBhIHN0cmluZyByZXByZXNlbnRpbmcgYSBwYXRoCiAgdG8gYW5v
        dGhlciBvYmplY3Qgb3IgYSBjdXN0b20gYmluZGluZyBpbnN0YW5jZWQgY3Jl
        YXRlZCB1c2luZyBCaW5kaW5nIGhlbHBlcnMKICAoc2VlICJPbmUgV2F5IEJp
        bmRpbmdzIik6CgogIGBgYAogIHZhbHVlQmluZGluZzogIk15QXBwLnNvbWVD
        b250cm9sbGVyLnRpdGxlIgogIGBgYAoKICBUaGlzIHdpbGwgY3JlYXRlIGEg
        YmluZGluZyBmcm9tIGBNeUFwcC5zb21lQ29udHJvbGxlci50aXRsZWAgdG8g
        dGhlIGB2YWx1ZWAKICBwcm9wZXJ0eSBvZiB5b3VyIG9iamVjdCBpbnN0YW5j
        ZSBhdXRvbWF0aWNhbGx5LiBOb3cgdGhlIHR3byB2YWx1ZXMgd2lsbCBiZQog
        IGtlcHQgaW4gc3luYy4KCiAgIyMgT25lIFdheSBCaW5kaW5ncwoKICBPbmUg
        ZXNwZWNpYWxseSB1c2VmdWwgYmluZGluZyBjdXN0b21pemF0aW9uIHlvdSBj
        YW4gdXNlIGlzIHRoZSBgb25lV2F5KClgCiAgaGVscGVyLiBUaGlzIGhlbHBl
        ciB0ZWxscyBFbWJlciB0aGF0IHlvdSBhcmUgb25seSBpbnRlcmVzdGVkIGlu
        CiAgcmVjZWl2aW5nIGNoYW5nZXMgb24gdGhlIG9iamVjdCB5b3UgYXJlIGJp
        bmRpbmcgZnJvbS4gRm9yIGV4YW1wbGUsIGlmIHlvdQogIGFyZSBiaW5kaW5n
        IHRvIGEgcHJlZmVyZW5jZSBhbmQgeW91IHdhbnQgdG8gYmUgbm90aWZpZWQg
        aWYgdGhlIHByZWZlcmVuY2UKICBoYXMgY2hhbmdlZCwgYnV0IHlvdXIgb2Jq
        ZWN0IHdpbGwgbm90IGJlIGNoYW5naW5nIHRoZSBwcmVmZXJlbmNlIGl0c2Vs
        ZiwgeW91CiAgY291bGQgZG86CgogIGBgYAogIGJpZ1RpdGxlc0JpbmRpbmc6
        IEVtYmVyLkJpbmRpbmcub25lV2F5KCJNeUFwcC5wcmVmZXJlbmNlc0NvbnRy
        b2xsZXIuYmlnVGl0bGVzIikKICBgYGAKCiAgVGhpcyB3YXkgaWYgdGhlIHZh
        bHVlIG9mIGBNeUFwcC5wcmVmZXJlbmNlc0NvbnRyb2xsZXIuYmlnVGl0bGVz
        YCBjaGFuZ2VzIHRoZQogIGBiaWdUaXRsZXNgIHByb3BlcnR5IG9mIHlvdXIg
        b2JqZWN0IHdpbGwgY2hhbmdlIGFsc28uIEhvd2V2ZXIsIGlmIHlvdQogIGNo
        YW5nZSB0aGUgdmFsdWUgb2YgeW91ciBgYmlnVGl0bGVzYCBwcm9wZXJ0eSwg
        aXQgd2lsbCBub3QgdXBkYXRlIHRoZQogIGBwcmVmZXJlbmNlc0NvbnRyb2xs
        ZXJgLgoKICBPbmUgd2F5IGJpbmRpbmdzIGFyZSBhbG1vc3QgdHdpY2UgYXMg
        ZmFzdCB0byBzZXR1cCBhbmQgdHdpY2UgYXMgZmFzdCB0bwogIGV4ZWN1dGUg
        YmVjYXVzZSB0aGUgYmluZGluZyBvbmx5IGhhcyB0byB3b3JyeSBhYm91dCBj
        aGFuZ2VzIHRvIG9uZSBzaWRlLgoKICBZb3Ugc2hvdWxkIGNvbnNpZGVyIHVz
        aW5nIG9uZSB3YXkgYmluZGluZ3MgYW55dGltZSB5b3UgaGF2ZSBhbiBvYmpl
        Y3QgdGhhdAogIG1heSBiZSBjcmVhdGVkIGZyZXF1ZW50bHkgYW5kIHlvdSBk
        byBub3QgaW50ZW5kIHRvIGNoYW5nZSBhIHByb3BlcnR5OyBvbmx5CiAgdG8g
        bW9uaXRvciBpdCBmb3IgY2hhbmdlcyAoc3VjaCBhcyBpbiB0aGUgZXhhbXBs
        ZSBhYm92ZSkuCgogICMjIEFkZGluZyBCaW5kaW5ncyBNYW51YWxseQoKICBB
        bGwgb2YgdGhlIGV4YW1wbGVzIGFib3ZlIHNob3cgeW91IGhvdyB0byBjb25m
        aWd1cmUgYSBjdXN0b20gYmluZGluZywgYnV0IHRoZQogIHJlc3VsdCBvZiB0
        aGVzZSBjdXN0b21pemF0aW9ucyB3aWxsIGJlIGEgYmluZGluZyB0ZW1wbGF0
        ZSwgbm90IGEgZnVsbHkgYWN0aXZlCiAgQmluZGluZyBpbnN0YW5jZS4gVGhl
        IGJpbmRpbmcgd2lsbCBhY3R1YWxseSBiZWNvbWUgYWN0aXZlIG9ubHkgd2hl
        biB5b3UKICBpbnN0YW50aWF0ZSB0aGUgb2JqZWN0IHRoZSBiaW5kaW5nIGJl
        bG9uZ3MgdG8uIEl0IGlzIHVzZWZ1bCBob3dldmVyLCB0bwogIHVuZGVyc3Rh
        bmQgd2hhdCBhY3R1YWxseSBoYXBwZW5zIHdoZW4gdGhlIGJpbmRpbmcgaXMg
        YWN0aXZhdGVkLgoKICBGb3IgYSBiaW5kaW5nIHRvIGZ1bmN0aW9uIGl0IG11
        c3QgaGF2ZSBhdCBsZWFzdCBhIGBmcm9tYCBwcm9wZXJ0eSBhbmQgYSBgdG9g
        CiAgcHJvcGVydHkuIFRoZSBgZnJvbWAgcHJvcGVydHkgcGF0aCBwb2ludHMg
        dG8gdGhlIG9iamVjdC9rZXkgdGhhdCB5b3Ugd2FudCB0bwogIGJpbmQgZnJv
        bSB3aGlsZSB0aGUgYHRvYCBwYXRoIHBvaW50cyB0byB0aGUgb2JqZWN0L2tl
        eSB5b3Ugd2FudCB0byBiaW5kIHRvLgoKICBXaGVuIHlvdSBkZWZpbmUgYSBj
        dXN0b20gYmluZGluZywgeW91IGFyZSB1c3VhbGx5IGRlc2NyaWJpbmcgdGhl
        IHByb3BlcnR5CiAgeW91IHdhbnQgdG8gYmluZCBmcm9tIChzdWNoIGFzIGBN
        eUFwcC5zb21lQ29udHJvbGxlci52YWx1ZWAgaW4gdGhlIGV4YW1wbGVzCiAg
        YWJvdmUpLiBXaGVuIHlvdXIgb2JqZWN0IGlzIGNyZWF0ZWQsIGl0IHdpbGwg
        YXV0b21hdGljYWxseSBhc3NpZ24gdGhlIHZhbHVlCiAgeW91IHdhbnQgdG8g
        YmluZCBgdG9gIGJhc2VkIG9uIHRoZSBuYW1lIG9mIHlvdXIgYmluZGluZyBr
        ZXkuIEluIHRoZQogIGV4YW1wbGVzIGFib3ZlLCBkdXJpbmcgaW5pdCwgRW1i
        ZXIgb2JqZWN0cyB3aWxsIGVmZmVjdGl2ZWx5IGNhbGwKICBzb21ldGhpbmcg
        bGlrZSB0aGlzIG9uIHlvdXIgYmluZGluZzoKCiAgYGBgamF2YXNjcmlwdAog
        IGJpbmRpbmcgPSBFbWJlci5CaW5kaW5nLmZyb20odGhpcy52YWx1ZUJpbmRp
        bmcpLnRvKCJ2YWx1ZSIpOwogIGBgYAoKICBUaGlzIGNyZWF0ZXMgYSBuZXcg
        YmluZGluZyBpbnN0YW5jZSBiYXNlZCBvbiB0aGUgdGVtcGxhdGUgeW91IHBy
        b3ZpZGUsIGFuZAogIHNldHMgdGhlIHRvIHBhdGggdG8gdGhlIGB2YWx1ZWAg
        cHJvcGVydHkgb2YgdGhlIG5ldyBvYmplY3QuIE5vdyB0aGF0IHRoZQogIGJp
        bmRpbmcgaXMgZnVsbHkgY29uZmlndXJlZCB3aXRoIGEgYGZyb21gIGFuZCBh
        IGB0b2AsIGl0IHNpbXBseSBuZWVkcyB0byBiZQogIGNvbm5lY3RlZCB0byBi
        ZWNvbWUgYWN0aXZlLiBUaGlzIGlzIGRvbmUgdGhyb3VnaCB0aGUgYGNvbm5l
        Y3QoKWAgbWV0aG9kOgoKICBgYGBqYXZhc2NyaXB0CiAgYmluZGluZy5jb25u
        ZWN0KHRoaXMpOwogIGBgYAoKICBOb3RlIHRoYXQgd2hlbiB5b3UgY29ubmVj
        dCBhIGJpbmRpbmcgeW91IHBhc3MgdGhlIG9iamVjdCB5b3Ugd2FudCBpdCB0
        byBiZQogIGNvbm5lY3RlZCB0by4gVGhpcyBvYmplY3Qgd2lsbCBiZSB1c2Vk
        IGFzIHRoZSByb290IGZvciBib3RoIHRoZSBmcm9tIGFuZAogIHRvIHNpZGUg
        b2YgdGhlIGJpbmRpbmcgd2hlbiBpbnNwZWN0aW5nIHJlbGF0aXZlIHBhdGhz
        LiBUaGlzIGFsbG93cyB0aGUKICBiaW5kaW5nIHRvIGJlIGF1dG9tYXRpY2Fs
        bHkgaW5oZXJpdGVkIGJ5IHN1YmNsYXNzZWQgb2JqZWN0cyBhcyB3ZWxsLgoK
        ICBOb3cgdGhhdCB0aGUgYmluZGluZyBpcyBjb25uZWN0ZWQsIGl0IHdpbGwg
        b2JzZXJ2ZSBib3RoIHRoZSBmcm9tIGFuZCB0byBzaWRlCiAgYW5kIHJlbGF5
        IGNoYW5nZXMuCgogIElmIHlvdSBldmVyIG5lZWRlZCB0byBkbyBzbyAoeW91
        IGFsbW9zdCBuZXZlciB3aWxsLCBidXQgaXQgaXMgdXNlZnVsIHRvCiAgdW5k
        ZXJzdGFuZCB0aGlzIGFueXdheSksIHlvdSBjb3VsZCBtYW51YWxseSBjcmVh
        dGUgYW4gYWN0aXZlIGJpbmRpbmcgYnkKICB1c2luZyB0aGUgYEVtYmVyLmJp
        bmQoKWAgaGVscGVyIG1ldGhvZC4gKFRoaXMgaXMgdGhlIHNhbWUgbWV0aG9k
        IHVzZWQgYnkKICB0byBzZXR1cCB5b3VyIGJpbmRpbmdzIG9uIG9iamVjdHMp
        OgoKICBgYGBqYXZhc2NyaXB0CiAgRW1iZXIuYmluZChNeUFwcC5hbm90aGVy
        T2JqZWN0LCAidmFsdWUiLCAiTXlBcHAuc29tZUNvbnRyb2xsZXIudmFsdWUi
        KTsKICBgYGAKCiAgQm90aCBvZiB0aGVzZSBjb2RlIGZyYWdtZW50cyBoYXZl
        IHRoZSBzYW1lIGVmZmVjdCBhcyBkb2luZyB0aGUgbW9zdCBmcmllbmRseQog
        IGZvcm0gb2YgYmluZGluZyBjcmVhdGlvbiBsaWtlIHNvOgoKICBgYGBqYXZh
        c2NyaXB0CiAgTXlBcHAuYW5vdGhlck9iamVjdCA9IEVtYmVyLk9iamVjdC5j
        cmVhdGUoewogICAgdmFsdWVCaW5kaW5nOiAiTXlBcHAuc29tZUNvbnRyb2xs
        ZXIudmFsdWUiLAoKICAgIC8vIE9USEVSIENPREUgRk9SIFRISVMgT0JKRUNU
        Li4uCiAgfSk7CiAgYGBgCgogIEVtYmVyJ3MgYnVpbHQgaW4gYmluZGluZyBj
        cmVhdGlvbiBtZXRob2QgbWFrZXMgaXQgZWFzeSB0byBhdXRvbWF0aWNhbGx5
        CiAgY3JlYXRlIGJpbmRpbmdzIGZvciB5b3UuIFlvdSBzaG91bGQgYWx3YXlz
        IHVzZSB0aGUgaGlnaGVzdC1sZXZlbCBBUElzCiAgYXZhaWxhYmxlLCBldmVu
        IGlmIHlvdSB1bmRlcnN0YW5kIGhvdyBpdCB3b3JrcyB1bmRlcm5lYXRoLgoK
        ICBAY2xhc3MgQmluZGluZwogIEBuYW1lc3BhY2UgRW1iZXIKICBAc2luY2Ug
        RW1iZXIgMC45CiovCkVtYmVyLkJpbmRpbmcgPSBCaW5kaW5nOwoKCi8qKgog
        IEdsb2JhbCBoZWxwZXIgbWV0aG9kIHRvIGNyZWF0ZSBhIG5ldyBiaW5kaW5n
        LiBKdXN0IHBhc3MgdGhlIHJvb3Qgb2JqZWN0CiAgYWxvbmcgd2l0aCBhIGB0
        b2AgYW5kIGBmcm9tYCBwYXRoIHRvIGNyZWF0ZSBhbmQgY29ubmVjdCB0aGUg
        YmluZGluZy4KCiAgQG1ldGhvZCBiaW5kCiAgQGZvciBFbWJlcgogIEBwYXJh
        bSB7T2JqZWN0fSBvYmogVGhlIHJvb3Qgb2JqZWN0IG9mIHRoZSB0cmFuc2Zv
        cm0uCiAgQHBhcmFtIHtTdHJpbmd9IHRvIFRoZSBwYXRoIHRvIHRoZSAndG8n
        IHNpZGUgb2YgdGhlIGJpbmRpbmcuCiAgICBNdXN0IGJlIHJlbGF0aXZlIHRv
        IG9iai4KICBAcGFyYW0ge1N0cmluZ30gZnJvbSBUaGUgcGF0aCB0byB0aGUg
        J2Zyb20nIHNpZGUgb2YgdGhlIGJpbmRpbmcuCiAgICBNdXN0IGJlIHJlbGF0
        aXZlIHRvIG9iaiBvciBhIGdsb2JhbCBwYXRoLgogIEByZXR1cm4ge0VtYmVy
        LkJpbmRpbmd9IGJpbmRpbmcgaW5zdGFuY2UKKi8KRW1iZXIuYmluZCA9IGZ1
        bmN0aW9uKG9iaiwgdG8sIGZyb20pIHsKICByZXR1cm4gbmV3IEVtYmVyLkJp
        bmRpbmcodG8sIGZyb20pLmNvbm5lY3Qob2JqKTsKfTsKCi8qKgogIEBtZXRo
        b2Qgb25lV2F5CiAgQGZvciBFbWJlcgogIEBwYXJhbSB7T2JqZWN0fSBvYmog
        VGhlIHJvb3Qgb2JqZWN0IG9mIHRoZSB0cmFuc2Zvcm0uCiAgQHBhcmFtIHtT
        dHJpbmd9IHRvIFRoZSBwYXRoIHRvIHRoZSAndG8nIHNpZGUgb2YgdGhlIGJp
        bmRpbmcuCiAgICBNdXN0IGJlIHJlbGF0aXZlIHRvIG9iai4KICBAcGFyYW0g
        e1N0cmluZ30gZnJvbSBUaGUgcGF0aCB0byB0aGUgJ2Zyb20nIHNpZGUgb2Yg
        dGhlIGJpbmRpbmcuCiAgICBNdXN0IGJlIHJlbGF0aXZlIHRvIG9iaiBvciBh
        IGdsb2JhbCBwYXRoLgogIEByZXR1cm4ge0VtYmVyLkJpbmRpbmd9IGJpbmRp
        bmcgaW5zdGFuY2UKKi8KRW1iZXIub25lV2F5ID0gZnVuY3Rpb24ob2JqLCB0
        bywgZnJvbSkgewogIHJldHVybiBuZXcgRW1iZXIuQmluZGluZyh0bywgZnJv
        bSkub25lV2F5KCkuY29ubmVjdChvYmopOwp9OwoKfSkoKTsKCgoKKGZ1bmN0
        aW9uKCkgewovKioKQG1vZHVsZSBlbWJlcgpAc3VibW9kdWxlIGVtYmVyLW1l
        dGFsCiovCgp2YXIgTWl4aW4sIFJFUVVJUkVELCBBbGlhcywKICAgIGFfbWFw
        ID0gRW1iZXIuQXJyYXlQb2x5ZmlsbHMubWFwLAogICAgYV9pbmRleE9mID0g
        RW1iZXIuQXJyYXlQb2x5ZmlsbHMuaW5kZXhPZiwKICAgIGFfZm9yRWFjaCA9
        IEVtYmVyLkFycmF5UG9seWZpbGxzLmZvckVhY2gsCiAgICBhX3NsaWNlID0g
        W10uc2xpY2UsCiAgICBvX2NyZWF0ZSA9IEVtYmVyLmNyZWF0ZSwKICAgIGRl
        ZmluZVByb3BlcnR5ID0gRW1iZXIuZGVmaW5lUHJvcGVydHksCiAgICBndWlk
        Rm9yID0gRW1iZXIuZ3VpZEZvciwKICAgIG1ldGFGb3IgPSBFbWJlci5tZXRh
        LAogICAgTUVUQV9LRVkgPSBFbWJlci5NRVRBX0tFWTsKCnZhciBleHBhbmRQ
        cm9wZXJ0aWVzID0gRW1iZXIuZXhwYW5kUHJvcGVydGllczsKCmZ1bmN0aW9u
        IHN1cGVyRnVuY3Rpb24oKXsKICB2YXIgcmV0LCBmdW5jID0gdGhpcy5fX25l
        eHRTdXBlcjsKICBpZiAoZnVuYykgewogICAgdGhpcy5fX25leHRTdXBlciA9
        IG51bGw7CiAgICByZXQgPSBmdW5jLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7
        CiAgICB0aGlzLl9fbmV4dFN1cGVyID0gZnVuYzsKICB9CiAgcmV0dXJuIHJl
        dDsKfQoKZnVuY3Rpb24gbWl4aW5zTWV0YShvYmopIHsKICB2YXIgbSA9IG1l
        dGFGb3Iob2JqLCB0cnVlKSwgcmV0ID0gbS5taXhpbnM7CiAgaWYgKCFyZXQp
        IHsKICAgIHJldCA9IG0ubWl4aW5zID0ge307CiAgfSBlbHNlIGlmICghbS5o
        YXNPd25Qcm9wZXJ0eSgnbWl4aW5zJykpIHsKICAgIHJldCA9IG0ubWl4aW5z
        ID0gb19jcmVhdGUocmV0KTsKICB9CiAgcmV0dXJuIHJldDsKfQoKZnVuY3Rp
        b24gaW5pdE1peGluKG1peGluLCBhcmdzKSB7CiAgaWYgKGFyZ3MgJiYgYXJn
        cy5sZW5ndGggPiAwKSB7CiAgICBtaXhpbi5taXhpbnMgPSBhX21hcC5jYWxs
        KGFyZ3MsIGZ1bmN0aW9uKHgpIHsKICAgICAgaWYgKHggaW5zdGFuY2VvZiBN
        aXhpbikgeyByZXR1cm4geDsgfQoKICAgICAgLy8gTm90ZTogTWFudWFsbHkg
        c2V0dXAgYSBwcmltaXRpdmUgbWl4aW4gaGVyZS4gVGhpcyBpcyB0aGUgb25s
        eQogICAgICAvLyB3YXkgdG8gYWN0dWFsbHkgZ2V0IGEgcHJpbWl0aXZlIG1p
        eGluLiBUaGlzIHdheSBub3JtYWwgY3JlYXRpb24KICAgICAgLy8gb2YgbWl4
        aW5zIHdpbGwgZ2l2ZSB5b3UgY29tYmluZWQgbWl4aW5zLi4uCiAgICAgIHZh
        ciBtaXhpbiA9IG5ldyBNaXhpbigpOwogICAgICBtaXhpbi5wcm9wZXJ0aWVz
        ID0geDsKICAgICAgcmV0dXJuIG1peGluOwogICAgfSk7CiAgfQogIHJldHVy
        biBtaXhpbjsKfQoKZnVuY3Rpb24gaXNNZXRob2Qob2JqKSB7CiAgcmV0dXJu
        ICdmdW5jdGlvbicgPT09IHR5cGVvZiBvYmogJiYKICAgICAgICAgb2JqLmlz
        TWV0aG9kICE9PSBmYWxzZSAmJgogICAgICAgICBvYmogIT09IEJvb2xlYW4g
        JiYgb2JqICE9PSBPYmplY3QgJiYgb2JqICE9PSBOdW1iZXIgJiYgb2JqICE9
        PSBBcnJheSAmJiBvYmogIT09IERhdGUgJiYgb2JqICE9PSBTdHJpbmc7Cn0K
        CnZhciBDT05USU5VRSA9IHt9OwoKZnVuY3Rpb24gbWl4aW5Qcm9wZXJ0aWVz
        KG1peGluc01ldGEsIG1peGluKSB7CiAgdmFyIGd1aWQ7CgogIGlmIChtaXhp
        biBpbnN0YW5jZW9mIE1peGluKSB7CiAgICBndWlkID0gZ3VpZEZvcihtaXhp
        bik7CiAgICBpZiAobWl4aW5zTWV0YVtndWlkXSkgeyByZXR1cm4gQ09OVElO
        VUU7IH0KICAgIG1peGluc01ldGFbZ3VpZF0gPSBtaXhpbjsKICAgIHJldHVy
        biBtaXhpbi5wcm9wZXJ0aWVzOwogIH0gZWxzZSB7CiAgICByZXR1cm4gbWl4
        aW47IC8vIGFwcGx5IGFub255bW91cyBtaXhpbiBwcm9wZXJ0aWVzCiAgfQp9
        CgpmdW5jdGlvbiBjb25jYXRlbmF0ZWRNaXhpblByb3BlcnRpZXMoY29uY2F0
        UHJvcCwgcHJvcHMsIHZhbHVlcywgYmFzZSkgewogIHZhciBjb25jYXRzOwoK
        ICAvLyByZXNldCBiZWZvcmUgYWRkaW5nIGVhY2ggbmV3IG1peGluIHRvIHBp
        Y2t1cCBjb25jYXRzIGZyb20gcHJldmlvdXMKICBjb25jYXRzID0gdmFsdWVz
        W2NvbmNhdFByb3BdIHx8IGJhc2VbY29uY2F0UHJvcF07CiAgaWYgKHByb3Bz
        W2NvbmNhdFByb3BdKSB7CiAgICBjb25jYXRzID0gY29uY2F0cyA/IGNvbmNh
        dHMuY29uY2F0KHByb3BzW2NvbmNhdFByb3BdKSA6IHByb3BzW2NvbmNhdFBy
        b3BdOwogIH0KCiAgcmV0dXJuIGNvbmNhdHM7Cn0KCmZ1bmN0aW9uIGdpdmVE
        ZXNjcmlwdG9yU3VwZXIobWV0YSwga2V5LCBwcm9wZXJ0eSwgdmFsdWVzLCBk
        ZXNjcykgewogIHZhciBzdXBlclByb3BlcnR5OwoKICAvLyBDb21wdXRlZCBw
        cm9wZXJ0aWVzIG92ZXJyaWRlIG1ldGhvZHMsIGFuZCBkbyBub3QgY2FsbCBz
        dXBlciB0byB0aGVtCiAgaWYgKHZhbHVlc1trZXldID09PSB1bmRlZmluZWQp
        IHsKICAgIC8vIEZpbmQgdGhlIG9yaWdpbmFsIGRlc2NyaXB0b3IgaW4gYSBw
        YXJlbnQgbWl4aW4KICAgIHN1cGVyUHJvcGVydHkgPSBkZXNjc1trZXldOwog
        IH0KCiAgLy8gSWYgd2UgZGlkbid0IGZpbmQgdGhlIG9yaWdpbmFsIGRlc2Ny
        aXB0b3IgaW4gYSBwYXJlbnQgbWl4aW4sIGZpbmQKICAvLyBpdCBvbiB0aGUg
        b3JpZ2luYWwgb2JqZWN0LgogIHN1cGVyUHJvcGVydHkgPSBzdXBlclByb3Bl
        cnR5IHx8IG1ldGEuZGVzY3Nba2V5XTsKCiAgaWYgKCFzdXBlclByb3BlcnR5
        IHx8ICEoc3VwZXJQcm9wZXJ0eSBpbnN0YW5jZW9mIEVtYmVyLkNvbXB1dGVk
        UHJvcGVydHkpKSB7CiAgICByZXR1cm4gcHJvcGVydHk7CiAgfQoKICAvLyBT
        aW5jZSBtdWx0aXBsZSBtaXhpbnMgbWF5IGluaGVyaXQgZnJvbSB0aGUgc2Ft
        ZSBwYXJlbnQsIHdlIG5lZWQKICAvLyB0byBjbG9uZSB0aGUgY29tcHV0ZWQg
        cHJvcGVydHkgc28gdGhhdCBvdGhlciBtaXhpbnMgZG8gbm90IHJlY2VpdmUK
        ICAvLyB0aGUgd3JhcHBlZCB2ZXJzaW9uLgogIHByb3BlcnR5ID0gb19jcmVh
        dGUocHJvcGVydHkpOwogIHByb3BlcnR5LmZ1bmMgPSBFbWJlci53cmFwKHBy
        b3BlcnR5LmZ1bmMsIHN1cGVyUHJvcGVydHkuZnVuYyk7CgogIHJldHVybiBw
        cm9wZXJ0eTsKfQoKZnVuY3Rpb24gZ2l2ZU1ldGhvZFN1cGVyKG9iaiwga2V5
        LCBtZXRob2QsIHZhbHVlcywgZGVzY3MpIHsKICB2YXIgc3VwZXJNZXRob2Q7
        CgogIC8vIE1ldGhvZHMgb3ZlcndyaXRlIGNvbXB1dGVkIHByb3BlcnRpZXMs
        IGFuZCBkbyBub3QgY2FsbCBzdXBlciB0byB0aGVtLgogIGlmIChkZXNjc1tr
        ZXldID09PSB1bmRlZmluZWQpIHsKICAgIC8vIEZpbmQgdGhlIG9yaWdpbmFs
        IG1ldGhvZCBpbiBhIHBhcmVudCBtaXhpbgogICAgc3VwZXJNZXRob2QgPSB2
        YWx1ZXNba2V5XTsKICB9CgogIC8vIElmIHdlIGRpZG4ndCBmaW5kIHRoZSBv
        cmlnaW5hbCB2YWx1ZSBpbiBhIHBhcmVudCBtaXhpbiwgZmluZCBpdCBpbgog
        IC8vIHRoZSBvcmlnaW5hbCBvYmplY3QKICBzdXBlck1ldGhvZCA9IHN1cGVy
        TWV0aG9kIHx8IG9ialtrZXldOwoKICAvLyBPbmx5IHdyYXAgdGhlIG5ldyBt
        ZXRob2QgaWYgdGhlIG9yaWdpbmFsIG1ldGhvZCB3YXMgYSBmdW5jdGlvbgog
        IGlmICgnZnVuY3Rpb24nICE9PSB0eXBlb2Ygc3VwZXJNZXRob2QpIHsKICAg
        IHJldHVybiBtZXRob2Q7CiAgfQoKICByZXR1cm4gRW1iZXIud3JhcChtZXRo
        b2QsIHN1cGVyTWV0aG9kKTsKfQoKZnVuY3Rpb24gYXBwbHlDb25jYXRlbmF0
        ZWRQcm9wZXJ0aWVzKG9iaiwga2V5LCB2YWx1ZSwgdmFsdWVzKSB7CiAgdmFy
        IGJhc2VWYWx1ZSA9IHZhbHVlc1trZXldIHx8IG9ialtrZXldOwoKICBpZiAo
        YmFzZVZhbHVlKSB7CiAgICBpZiAoJ2Z1bmN0aW9uJyA9PT0gdHlwZW9mIGJh
        c2VWYWx1ZS5jb25jYXQpIHsKICAgICAgcmV0dXJuIGJhc2VWYWx1ZS5jb25j
        YXQodmFsdWUpOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIEVtYmVyLm1h
        a2VBcnJheShiYXNlVmFsdWUpLmNvbmNhdCh2YWx1ZSk7CiAgICB9CiAgfSBl
        bHNlIHsKICAgIHJldHVybiBFbWJlci5tYWtlQXJyYXkodmFsdWUpOwogIH0K
        fQoKZnVuY3Rpb24gYXBwbHlNZXJnZWRQcm9wZXJ0aWVzKG9iaiwga2V5LCB2
        YWx1ZSwgdmFsdWVzKSB7CiAgdmFyIGJhc2VWYWx1ZSA9IHZhbHVlc1trZXld
        IHx8IG9ialtrZXldOwoKICBpZiAoIWJhc2VWYWx1ZSkgeyByZXR1cm4gdmFs
        dWU7IH0KCiAgdmFyIG5ld0Jhc2UgPSBFbWJlci5tZXJnZSh7fSwgYmFzZVZh
        bHVlKSwKICAgICAgaGFzRnVuY3Rpb24gPSBmYWxzZTsKCiAgZm9yICh2YXIg
        cHJvcCBpbiB2YWx1ZSkgewogICAgaWYgKCF2YWx1ZS5oYXNPd25Qcm9wZXJ0
        eShwcm9wKSkgeyBjb250aW51ZTsgfQoKICAgIHZhciBwcm9wVmFsdWUgPSB2
        YWx1ZVtwcm9wXTsKICAgIGlmIChpc01ldGhvZChwcm9wVmFsdWUpKSB7CiAg
        ICAgIC8vIFRPRE86IHN1cHBvcnQgZm9yIENvbXB1dGVkIFByb3BlcnRpZXMs
        IGV0Yz8KICAgICAgaGFzRnVuY3Rpb24gPSB0cnVlOwogICAgICBuZXdCYXNl
        W3Byb3BdID0gZ2l2ZU1ldGhvZFN1cGVyKG9iaiwgcHJvcCwgcHJvcFZhbHVl
        LCBiYXNlVmFsdWUsIHt9KTsKICAgIH0gZWxzZSB7CiAgICAgIG5ld0Jhc2Vb
        cHJvcF0gPSBwcm9wVmFsdWU7CiAgICB9CiAgfQoKICBpZiAoaGFzRnVuY3Rp
        b24pIHsKICAgIG5ld0Jhc2UuX3N1cGVyID0gc3VwZXJGdW5jdGlvbjsKICB9
        CgogIHJldHVybiBuZXdCYXNlOwp9CgpmdW5jdGlvbiBhZGROb3JtYWxpemVk
        UHJvcGVydHkoYmFzZSwga2V5LCB2YWx1ZSwgbWV0YSwgZGVzY3MsIHZhbHVl
        cywgY29uY2F0cywgbWVyZ2luZ3MpIHsKICBpZiAodmFsdWUgaW5zdGFuY2Vv
        ZiBFbWJlci5EZXNjcmlwdG9yKSB7CiAgICBpZiAodmFsdWUgPT09IFJFUVVJ
        UkVEICYmIGRlc2NzW2tleV0pIHsgcmV0dXJuIENPTlRJTlVFOyB9CgogICAg
        Ly8gV3JhcCBkZXNjcmlwdG9yIGZ1bmN0aW9uIHRvIGltcGxlbWVudAogICAg
        Ly8gX19uZXh0U3VwZXIoKSBpZiBuZWVkZWQKICAgIGlmICh2YWx1ZS5mdW5j
        KSB7CiAgICAgIHZhbHVlID0gZ2l2ZURlc2NyaXB0b3JTdXBlcihtZXRhLCBr
        ZXksIHZhbHVlLCB2YWx1ZXMsIGRlc2NzKTsKICAgIH0KCiAgICBkZXNjc1tr
        ZXldICA9IHZhbHVlOwogICAgdmFsdWVzW2tleV0gPSB1bmRlZmluZWQ7CiAg
        fSBlbHNlIHsKICAgIGlmICgoY29uY2F0cyAmJiBhX2luZGV4T2YuY2FsbChj
        b25jYXRzLCBrZXkpID49IDApIHx8CiAgICAgICAgICAgICAgICBrZXkgPT09
        ICdjb25jYXRlbmF0ZWRQcm9wZXJ0aWVzJyB8fAogICAgICAgICAgICAgICAg
        a2V5ID09PSAnbWVyZ2VkUHJvcGVydGllcycpIHsKICAgICAgdmFsdWUgPSBh
        cHBseUNvbmNhdGVuYXRlZFByb3BlcnRpZXMoYmFzZSwga2V5LCB2YWx1ZSwg
        dmFsdWVzKTsKICAgIH0gZWxzZSBpZiAoKG1lcmdpbmdzICYmIGFfaW5kZXhP
        Zi5jYWxsKG1lcmdpbmdzLCBrZXkpID49IDApKSB7CiAgICAgIHZhbHVlID0g
        YXBwbHlNZXJnZWRQcm9wZXJ0aWVzKGJhc2UsIGtleSwgdmFsdWUsIHZhbHVl
        cyk7CiAgICB9IGVsc2UgaWYgKGlzTWV0aG9kKHZhbHVlKSkgewogICAgICB2
        YWx1ZSA9IGdpdmVNZXRob2RTdXBlcihiYXNlLCBrZXksIHZhbHVlLCB2YWx1
        ZXMsIGRlc2NzKTsKICAgIH0KCiAgICBkZXNjc1trZXldID0gdW5kZWZpbmVk
        OwogICAgdmFsdWVzW2tleV0gPSB2YWx1ZTsKICB9Cn0KCmZ1bmN0aW9uIG1l
        cmdlTWl4aW5zKG1peGlucywgbSwgZGVzY3MsIHZhbHVlcywgYmFzZSwga2V5
        cykgewogIHZhciBtaXhpbiwgcHJvcHMsIGtleSwgY29uY2F0cywgbWVyZ2lu
        Z3MsIG1ldGE7CgogIGZ1bmN0aW9uIHJlbW92ZUtleXMoa2V5TmFtZSkgewog
        ICAgZGVsZXRlIGRlc2NzW2tleU5hbWVdOwogICAgZGVsZXRlIHZhbHVlc1tr
        ZXlOYW1lXTsKICB9CgogIGZvcih2YXIgaT0wLCBsPW1peGlucy5sZW5ndGg7
        IGk8bDsgaSsrKSB7CiAgICBtaXhpbiA9IG1peGluc1tpXTsKICAgIEVtYmVy
        LmFzc2VydCgnRXhwZWN0ZWQgaGFzaCBvciBNaXhpbiBpbnN0YW5jZSwgZ290
        ICcgKyBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobWl4aW4pLAog
        ICAgICAgICAgICAgICAgIHR5cGVvZiBtaXhpbiA9PT0gJ29iamVjdCcgJiYg
        bWl4aW4gIT09IG51bGwgJiYgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5j
        YWxsKG1peGluKSAhPT0gJ1tvYmplY3QgQXJyYXldJyk7CgogICAgcHJvcHMg
        PSBtaXhpblByb3BlcnRpZXMobSwgbWl4aW4pOwogICAgaWYgKHByb3BzID09
        PSBDT05USU5VRSkgeyBjb250aW51ZTsgfQoKICAgIGlmIChwcm9wcykgewog
        ICAgICBtZXRhID0gbWV0YUZvcihiYXNlKTsKICAgICAgaWYgKGJhc2Uud2ls
        bE1lcmdlTWl4aW4pIHsgYmFzZS53aWxsTWVyZ2VNaXhpbihwcm9wcyk7IH0K
        ICAgICAgY29uY2F0cyA9IGNvbmNhdGVuYXRlZE1peGluUHJvcGVydGllcygn
        Y29uY2F0ZW5hdGVkUHJvcGVydGllcycsIHByb3BzLCB2YWx1ZXMsIGJhc2Up
        OwogICAgICBtZXJnaW5ncyA9IGNvbmNhdGVuYXRlZE1peGluUHJvcGVydGll
        cygnbWVyZ2VkUHJvcGVydGllcycsIHByb3BzLCB2YWx1ZXMsIGJhc2UpOwoK
        ICAgICAgZm9yIChrZXkgaW4gcHJvcHMpIHsKICAgICAgICBpZiAoIXByb3Bz
        Lmhhc093blByb3BlcnR5KGtleSkpIHsgY29udGludWU7IH0KICAgICAgICBr
        ZXlzLnB1c2goa2V5KTsKICAgICAgICBhZGROb3JtYWxpemVkUHJvcGVydHko
        YmFzZSwga2V5LCBwcm9wc1trZXldLCBtZXRhLCBkZXNjcywgdmFsdWVzLCBj
        b25jYXRzLCBtZXJnaW5ncyk7CiAgICAgIH0KCiAgICAgIC8vIG1hbnVhbGx5
        IGNvcHkgdG9TdHJpbmcoKSBiZWNhdXNlIHNvbWUgSlMgZW5naW5lcyBkbyBu
        b3QgZW51bWVyYXRlIGl0CiAgICAgIGlmIChwcm9wcy5oYXNPd25Qcm9wZXJ0
        eSgndG9TdHJpbmcnKSkgeyBiYXNlLnRvU3RyaW5nID0gcHJvcHMudG9TdHJp
        bmc7IH0KICAgIH0gZWxzZSBpZiAobWl4aW4ubWl4aW5zKSB7CiAgICAgIG1l
        cmdlTWl4aW5zKG1peGluLm1peGlucywgbSwgZGVzY3MsIHZhbHVlcywgYmFz
        ZSwga2V5cyk7CiAgICAgIGlmIChtaXhpbi5fd2l0aG91dCkgeyBhX2ZvckVh
        Y2guY2FsbChtaXhpbi5fd2l0aG91dCwgcmVtb3ZlS2V5cyk7IH0KICAgIH0K
        ICB9Cn0KCnZhciBJU19CSU5ESU5HID0gRW1iZXIuSVNfQklORElORyA9IC9e
        LitCaW5kaW5nJC87CgpmdW5jdGlvbiBkZXRlY3RCaW5kaW5nKG9iaiwga2V5
        LCB2YWx1ZSwgbSkgewogIGlmIChJU19CSU5ESU5HLnRlc3Qoa2V5KSkgewog
        ICAgdmFyIGJpbmRpbmdzID0gbS5iaW5kaW5nczsKICAgIGlmICghYmluZGlu
        Z3MpIHsKICAgICAgYmluZGluZ3MgPSBtLmJpbmRpbmdzID0ge307CiAgICB9
        IGVsc2UgaWYgKCFtLmhhc093blByb3BlcnR5KCdiaW5kaW5ncycpKSB7CiAg
        ICAgIGJpbmRpbmdzID0gbS5iaW5kaW5ncyA9IG9fY3JlYXRlKG0uYmluZGlu
        Z3MpOwogICAgfQogICAgYmluZGluZ3Nba2V5XSA9IHZhbHVlOwogIH0KfQoK
        ZnVuY3Rpb24gY29ubmVjdEJpbmRpbmdzKG9iaiwgbSkgewogIC8vIFRPRE8g
        TWl4aW4uYXBwbHkoaW5zdGFuY2UpIHNob3VsZCBkaXNjb25uZWN0IGJpbmRp
        bmcgaWYgZXhpc3RzCiAgdmFyIGJpbmRpbmdzID0gbS5iaW5kaW5ncywga2V5
        LCBiaW5kaW5nLCB0bzsKICBpZiAoYmluZGluZ3MpIHsKICAgIGZvciAoa2V5
        IGluIGJpbmRpbmdzKSB7CiAgICAgIGJpbmRpbmcgPSBiaW5kaW5nc1trZXld
        OwogICAgICBpZiAoYmluZGluZykgewogICAgICAgIHRvID0ga2V5LnNsaWNl
        KDAsIC03KTsgLy8gc3RyaXAgQmluZGluZyBvZmYgZW5kCiAgICAgICAgaWYg
        KGJpbmRpbmcgaW5zdGFuY2VvZiBFbWJlci5CaW5kaW5nKSB7CiAgICAgICAg
        ICBiaW5kaW5nID0gYmluZGluZy5jb3B5KCk7IC8vIGNvcHkgcHJvdG90eXBl
        cycgaW5zdGFuY2UKICAgICAgICAgIGJpbmRpbmcudG8odG8pOwogICAgICAg
        IH0gZWxzZSB7IC8vIGJpbmRpbmcgaXMgc3RyaW5nIHBhdGgKICAgICAgICAg
        IGJpbmRpbmcgPSBuZXcgRW1iZXIuQmluZGluZyh0bywgYmluZGluZyk7CiAg
        ICAgICAgfQogICAgICAgIGJpbmRpbmcuY29ubmVjdChvYmopOwogICAgICAg
        IG9ialtrZXldID0gYmluZGluZzsKICAgICAgfQogICAgfQogICAgLy8gbWFy
        ayBhcyBhcHBsaWVkCiAgICBtLmJpbmRpbmdzID0ge307CiAgfQp9CgpmdW5j
        dGlvbiBmaW5pc2hQYXJ0aWFsKG9iaiwgbSkgewogIGNvbm5lY3RCaW5kaW5n
        cyhvYmosIG0gfHwgbWV0YUZvcihvYmopKTsKICByZXR1cm4gb2JqOwp9Cgpm
        dW5jdGlvbiBmb2xsb3dBbGlhcyhvYmosIGRlc2MsIG0sIGRlc2NzLCB2YWx1
        ZXMpIHsKICB2YXIgYWx0S2V5ID0gZGVzYy5tZXRob2ROYW1lLCB2YWx1ZTsK
        ICBpZiAoZGVzY3NbYWx0S2V5XSB8fCB2YWx1ZXNbYWx0S2V5XSkgewogICAg
        dmFsdWUgPSB2YWx1ZXNbYWx0S2V5XTsKICAgIGRlc2MgID0gZGVzY3NbYWx0
        S2V5XTsKICB9IGVsc2UgaWYgKG0uZGVzY3NbYWx0S2V5XSkgewogICAgZGVz
        YyAgPSBtLmRlc2NzW2FsdEtleV07CiAgICB2YWx1ZSA9IHVuZGVmaW5lZDsK
        ICB9IGVsc2UgewogICAgZGVzYyA9IHVuZGVmaW5lZDsKICAgIHZhbHVlID0g
        b2JqW2FsdEtleV07CiAgfQoKICByZXR1cm4geyBkZXNjOiBkZXNjLCB2YWx1
        ZTogdmFsdWUgfTsKfQoKZnVuY3Rpb24gdXBkYXRlT2JzZXJ2ZXJzQW5kTGlz
        dGVuZXJzKG9iaiwga2V5LCBvYnNlcnZlck9yTGlzdGVuZXIsIHBhdGhzS2V5
        LCB1cGRhdGVNZXRob2QpIHsKICB2YXIgcGF0aHMgPSBvYnNlcnZlck9yTGlz
        dGVuZXJbcGF0aHNLZXldOwoKICBpZiAocGF0aHMpIHsKICAgIGZvciAodmFy
        IGk9MCwgbD1wYXRocy5sZW5ndGg7IGk8bDsgaSsrKSB7CiAgICAgIEVtYmVy
        W3VwZGF0ZU1ldGhvZF0ob2JqLCBwYXRoc1tpXSwgbnVsbCwga2V5KTsKICAg
        IH0KICB9Cn0KCmZ1bmN0aW9uIHJlcGxhY2VPYnNlcnZlcnNBbmRMaXN0ZW5l
        cnMob2JqLCBrZXksIG9ic2VydmVyT3JMaXN0ZW5lcikgewogIHZhciBwcmV2
        ID0gb2JqW2tleV07CgogIGlmICgnZnVuY3Rpb24nID09PSB0eXBlb2YgcHJl
        dikgewogICAgdXBkYXRlT2JzZXJ2ZXJzQW5kTGlzdGVuZXJzKG9iaiwga2V5
        LCBwcmV2LCAnX19lbWJlcl9vYnNlcnZlc0JlZm9yZV9fJywgJ3JlbW92ZUJl
        Zm9yZU9ic2VydmVyJyk7CiAgICB1cGRhdGVPYnNlcnZlcnNBbmRMaXN0ZW5l
        cnMob2JqLCBrZXksIHByZXYsICdfX2VtYmVyX29ic2VydmVzX18nLCAncmVt
        b3ZlT2JzZXJ2ZXInKTsKICAgIHVwZGF0ZU9ic2VydmVyc0FuZExpc3RlbmVy
        cyhvYmosIGtleSwgcHJldiwgJ19fZW1iZXJfbGlzdGVuc19fJywgJ3JlbW92
        ZUxpc3RlbmVyJyk7CiAgfQoKICBpZiAoJ2Z1bmN0aW9uJyA9PT0gdHlwZW9m
        IG9ic2VydmVyT3JMaXN0ZW5lcikgewogICAgdXBkYXRlT2JzZXJ2ZXJzQW5k
        TGlzdGVuZXJzKG9iaiwga2V5LCBvYnNlcnZlck9yTGlzdGVuZXIsICdfX2Vt
        YmVyX29ic2VydmVzQmVmb3JlX18nLCAnYWRkQmVmb3JlT2JzZXJ2ZXInKTsK
        ICAgIHVwZGF0ZU9ic2VydmVyc0FuZExpc3RlbmVycyhvYmosIGtleSwgb2Jz
        ZXJ2ZXJPckxpc3RlbmVyLCAnX19lbWJlcl9vYnNlcnZlc19fJywgJ2FkZE9i
        c2VydmVyJyk7CiAgICB1cGRhdGVPYnNlcnZlcnNBbmRMaXN0ZW5lcnMob2Jq
        LCBrZXksIG9ic2VydmVyT3JMaXN0ZW5lciwgJ19fZW1iZXJfbGlzdGVuc19f
        JywgJ2FkZExpc3RlbmVyJyk7CiAgfQp9CgpmdW5jdGlvbiBhcHBseU1peGlu
        KG9iaiwgbWl4aW5zLCBwYXJ0aWFsKSB7CiAgdmFyIGRlc2NzID0ge30sIHZh
        bHVlcyA9IHt9LCBtID0gbWV0YUZvcihvYmopLAogICAgICBrZXksIHZhbHVl
        LCBkZXNjLCBrZXlzID0gW107CgogIG9iai5fc3VwZXIgPSBzdXBlckZ1bmN0
        aW9uOwoKICAvLyBHbyB0aHJvdWdoIGFsbCBtaXhpbnMgYW5kIGhhc2hlcyBw
        YXNzZWQgaW4sIGFuZDoKICAvLwogIC8vICogSGFuZGxlIGNvbmNhdGVuYXRl
        ZCBwcm9wZXJ0aWVzCiAgLy8gKiBIYW5kbGUgbWVyZ2VkIHByb3BlcnRpZXMK
        ICAvLyAqIFNldCB1cCBfc3VwZXIgd3JhcHBpbmcgaWYgbmVjZXNzYXJ5CiAg
        Ly8gKiBTZXQgdXAgY29tcHV0ZWQgcHJvcGVydHkgZGVzY3JpcHRvcnMKICAv
        LyAqIENvcHlpbmcgYHRvU3RyaW5nYCBpbiBicm9rZW4gYnJvd3NlcnMKICBt
        ZXJnZU1peGlucyhtaXhpbnMsIG1peGluc01ldGEob2JqKSwgZGVzY3MsIHZh
        bHVlcywgb2JqLCBrZXlzKTsKCiAgZm9yKHZhciBpID0gMCwgbCA9IGtleXMu
        bGVuZ3RoOyBpIDwgbDsgaSsrKSB7CiAgICBrZXkgPSBrZXlzW2ldOwogICAg
        aWYgKGtleSA9PT0gJ2NvbnN0cnVjdG9yJyB8fCAhdmFsdWVzLmhhc093blBy
        b3BlcnR5KGtleSkpIHsgY29udGludWU7IH0KCiAgICBkZXNjID0gZGVzY3Nb
        a2V5XTsKICAgIHZhbHVlID0gdmFsdWVzW2tleV07CgogICAgaWYgKGRlc2Mg
        PT09IFJFUVVJUkVEKSB7IGNvbnRpbnVlOyB9CgogICAgd2hpbGUgKGRlc2Mg
        JiYgZGVzYyBpbnN0YW5jZW9mIEFsaWFzKSB7CiAgICAgIHZhciBmb2xsb3dl
        ZCA9IGZvbGxvd0FsaWFzKG9iaiwgZGVzYywgbSwgZGVzY3MsIHZhbHVlcyk7
        CiAgICAgIGRlc2MgPSBmb2xsb3dlZC5kZXNjOwogICAgICB2YWx1ZSA9IGZv
        bGxvd2VkLnZhbHVlOwogICAgfQoKICAgIGlmIChkZXNjID09PSB1bmRlZmlu
        ZWQgJiYgdmFsdWUgPT09IHVuZGVmaW5lZCkgeyBjb250aW51ZTsgfQoKICAg
        IHJlcGxhY2VPYnNlcnZlcnNBbmRMaXN0ZW5lcnMob2JqLCBrZXksIHZhbHVl
        KTsKICAgIGRldGVjdEJpbmRpbmcob2JqLCBrZXksIHZhbHVlLCBtKTsKICAg
        IGRlZmluZVByb3BlcnR5KG9iaiwga2V5LCBkZXNjLCB2YWx1ZSwgbSk7CiAg
        fQoKICBpZiAoIXBhcnRpYWwpIHsgLy8gZG9uJ3QgYXBwbHkgdG8gcHJvdG90
        eXBlCiAgICBmaW5pc2hQYXJ0aWFsKG9iaiwgbSk7CiAgfQoKICByZXR1cm4g
        b2JqOwp9CgovKioKICBAbWV0aG9kIG1peGluCiAgQGZvciBFbWJlcgogIEBw
        YXJhbSBvYmoKICBAcGFyYW0gbWl4aW5zKgogIEByZXR1cm4gb2JqCiovCkVt
        YmVyLm1peGluID0gZnVuY3Rpb24ob2JqKSB7CiAgdmFyIGFyZ3MgPSBhX3Ns
        aWNlLmNhbGwoYXJndW1lbnRzLCAxKTsKICBhcHBseU1peGluKG9iaiwgYXJn
        cywgZmFsc2UpOwogIHJldHVybiBvYmo7Cn07CgovKioKICBUaGUgYEVtYmVy
        Lk1peGluYCBjbGFzcyBhbGxvd3MgeW91IHRvIGNyZWF0ZSBtaXhpbnMsIHdo
        b3NlIHByb3BlcnRpZXMgY2FuIGJlCiAgYWRkZWQgdG8gb3RoZXIgY2xhc3Nl
        cy4gRm9yIGluc3RhbmNlLAoKICBgYGBqYXZhc2NyaXB0CiAgQXBwLkVkaXRh
        YmxlID0gRW1iZXIuTWl4aW4uY3JlYXRlKHsKICAgIGVkaXQ6IGZ1bmN0aW9u
        KCkgewogICAgICBjb25zb2xlLmxvZygnc3RhcnRpbmcgdG8gZWRpdCcpOwog
        ICAgICB0aGlzLnNldCgnaXNFZGl0aW5nJywgdHJ1ZSk7CiAgICB9LAogICAg
        aXNFZGl0aW5nOiBmYWxzZQogIH0pOwoKICAvLyBNaXggbWl4aW5zIGludG8g
        Y2xhc3NlcyBieSBwYXNzaW5nIHRoZW0gYXMgdGhlIGZpcnN0IGFyZ3VtZW50
        cyB0bwogIC8vIC5leHRlbmQuCiAgQXBwLkNvbW1lbnRWaWV3ID0gRW1iZXIu
        Vmlldy5leHRlbmQoQXBwLkVkaXRhYmxlLCB7CiAgICB0ZW1wbGF0ZTogRW1i
        ZXIuSGFuZGxlYmFycy5jb21waWxlKCd7eyNpZiB2aWV3LmlzRWRpdGluZ319
        Li4ue3tlbHNlfX0uLi57ey9pZn19JykKICB9KTsKCiAgY29tbWVudFZpZXcg
        PSBBcHAuQ29tbWVudFZpZXcuY3JlYXRlKCk7CiAgY29tbWVudFZpZXcuZWRp
        dCgpOyAvLyBvdXRwdXRzICdzdGFydGluZyB0byBlZGl0JwogIGBgYAoKICBO
        b3RlIHRoYXQgTWl4aW5zIGFyZSBjcmVhdGVkIHdpdGggYEVtYmVyLk1peGlu
        LmNyZWF0ZWAsIG5vdAogIGBFbWJlci5NaXhpbi5leHRlbmRgLgoKICBOb3Rl
        IHRoYXQgbWl4aW5zIGV4dGVuZCBhIGNvbnN0cnVjdG9yJ3MgcHJvdG90eXBl
        IHNvIGFycmF5cyBhbmQgb2JqZWN0IGxpdGVyYWxzCiAgZGVmaW5lZCBhcyBw
        cm9wZXJ0aWVzIHdpbGwgYmUgc2hhcmVkIGFtb25nc3Qgb2JqZWN0cyB0aGF0
        IGltcGxlbWVudCB0aGUgbWl4aW4uCiAgSWYgeW91IHdhbnQgdG8gZGVmaW5l
        IGEgcHJvcGVydHkgaW4gYSBtaXhpbiB0aGF0IGlzIG5vdCBzaGFyZWQsIHlv
        dSBjYW4gZGVmaW5lCiAgaXQgZWl0aGVyIGFzIGEgY29tcHV0ZWQgcHJvcGVy
        dHkgb3IgaGF2ZSBpdCBiZSBjcmVhdGVkIG9uIGluaXRpYWxpemF0aW9uIG9m
        IHRoZSBvYmplY3QuCgogIGBgYGphdmFzY3JpcHQKICAvL2ZpbHRlcnMgYXJy
        YXkgd2lsbCBiZSBzaGFyZWQgYW1vbmdzdCBhbnkgb2JqZWN0IGltcGxlbWVu
        dGluZyBtaXhpbgogIEFwcC5GaWx0ZXJhYmxlID0gRW1iZXIuTWl4aW4uY3Jl
        YXRlKHsKICAgIGZpbHRlcnM6IEVtYmVyLkEoKQogIH0pOwoKICAvL2ZpbHRl
        cnMgd2lsbCBiZSBhIHNlcGFyYXRlICBhcnJheSBmb3IgZXZlcnkgb2JqZWN0
        IGltcGxlbWVudGluZyB0aGUgbWl4aW4KICBBcHAuRmlsdGVyYWJsZSA9IEVt
        YmVyLk1peGluLmNyZWF0ZSh7CiAgICBmaWx0ZXJzOiBFbWJlci5jb21wdXRl
        ZChmdW5jdGlvbigpe3JldHVybiBFbWJlci5BKCk7fSkKICB9KTsKCiAgLy9m
        aWx0ZXJzIHdpbGwgYmUgY3JlYXRlZCBhcyBhIHNlcGFyYXRlIGFycmF5IGR1
        cmluZyB0aGUgb2JqZWN0J3MgaW5pdGlhbGl6YXRpb24KICBBcHAuRmlsdGVy
        YWJsZSA9IEVtYmVyLk1peGluLmNyZWF0ZSh7CiAgICBpbml0OiBmdW5jdGlv
        bigpIHsKICAgICAgdGhpcy5fc3VwZXIoKTsKICAgICAgdGhpcy5zZXQoImZp
        bHRlcnMiLCBFbWJlci5BKCkpOwogICAgfQogIH0pOwogIGBgYAoKICBAY2xh
        c3MgTWl4aW4KICBAbmFtZXNwYWNlIEVtYmVyCiovCkVtYmVyLk1peGluID0g
        ZnVuY3Rpb24oKSB7IHJldHVybiBpbml0TWl4aW4odGhpcywgYXJndW1lbnRz
        KTsgfTsKCk1peGluID0gRW1iZXIuTWl4aW47CgpNaXhpbi5wcm90b3R5cGUg
        PSB7CiAgcHJvcGVydGllczogbnVsbCwKICBtaXhpbnM6IG51bGwsCiAgb3du
        ZXJDb25zdHJ1Y3RvcjogbnVsbAp9OwoKTWl4aW4uX2FwcGx5ID0gYXBwbHlN
        aXhpbjsKCk1peGluLmFwcGx5UGFydGlhbCA9IGZ1bmN0aW9uKG9iaikgewog
        IHZhciBhcmdzID0gYV9zbGljZS5jYWxsKGFyZ3VtZW50cywgMSk7CiAgcmV0
        dXJuIGFwcGx5TWl4aW4ob2JqLCBhcmdzLCB0cnVlKTsKfTsKCk1peGluLmZp
        bmlzaFBhcnRpYWwgPSBmaW5pc2hQYXJ0aWFsOwoKRW1iZXIuYW55VW5wcm9j
        ZXNzZWRNaXhpbnMgPSBmYWxzZTsKCi8qKgogIEBtZXRob2QgY3JlYXRlCiAg
        QHN0YXRpYwogIEBwYXJhbSBhcmd1bWVudHMqCiovCk1peGluLmNyZWF0ZSA9
        IGZ1bmN0aW9uKCkgewogIEVtYmVyLmFueVVucHJvY2Vzc2VkTWl4aW5zID0g
        dHJ1ZTsKICB2YXIgTSA9IHRoaXM7CiAgcmV0dXJuIGluaXRNaXhpbihuZXcg
        TSgpLCBhcmd1bWVudHMpOwp9OwoKdmFyIE1peGluUHJvdG90eXBlID0gTWl4
        aW4ucHJvdG90eXBlOwoKLyoqCiAgQG1ldGhvZCByZW9wZW4KICBAcGFyYW0g
        YXJndW1lbnRzKgoqLwpNaXhpblByb3RvdHlwZS5yZW9wZW4gPSBmdW5jdGlv
        bigpIHsKICB2YXIgbWl4aW4sIHRtcDsKCiAgaWYgKHRoaXMucHJvcGVydGll
        cykgewogICAgbWl4aW4gPSBNaXhpbi5jcmVhdGUoKTsKICAgIG1peGluLnBy
        b3BlcnRpZXMgPSB0aGlzLnByb3BlcnRpZXM7CiAgICBkZWxldGUgdGhpcy5w
        cm9wZXJ0aWVzOwogICAgdGhpcy5taXhpbnMgPSBbbWl4aW5dOwogIH0gZWxz
        ZSBpZiAoIXRoaXMubWl4aW5zKSB7CiAgICB0aGlzLm1peGlucyA9IFtdOwog
        IH0KCiAgdmFyIGxlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIG1peGlucyA9IHRo
        aXMubWl4aW5zLCBpZHg7CgogIGZvcihpZHg9MDsgaWR4IDwgbGVuOyBpZHgr
        KykgewogICAgbWl4aW4gPSBhcmd1bWVudHNbaWR4XTsKICAgIEVtYmVyLmFz
        c2VydCgnRXhwZWN0ZWQgaGFzaCBvciBNaXhpbiBpbnN0YW5jZSwgZ290ICcg
        KyBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobWl4aW4pLAogICAg
        ICAgICAgICAgICAgIHR5cGVvZiBtaXhpbiA9PT0gJ29iamVjdCcgJiYgbWl4
        aW4gIT09IG51bGwgJiYgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxs
        KG1peGluKSAhPT0gJ1tvYmplY3QgQXJyYXldJyk7CgogICAgaWYgKG1peGlu
        IGluc3RhbmNlb2YgTWl4aW4pIHsKICAgICAgbWl4aW5zLnB1c2gobWl4aW4p
        OwogICAgfSBlbHNlIHsKICAgICAgdG1wID0gTWl4aW4uY3JlYXRlKCk7CiAg
        ICAgIHRtcC5wcm9wZXJ0aWVzID0gbWl4aW47CiAgICAgIG1peGlucy5wdXNo
        KHRtcCk7CiAgICB9CiAgfQoKICByZXR1cm4gdGhpczsKfTsKCi8qKgogIEBt
        ZXRob2QgYXBwbHkKICBAcGFyYW0gb2JqCiAgQHJldHVybiBhcHBsaWVkIG9i
        amVjdAoqLwpNaXhpblByb3RvdHlwZS5hcHBseSA9IGZ1bmN0aW9uKG9iaikg
        ewogIHJldHVybiBhcHBseU1peGluKG9iaiwgW3RoaXNdLCBmYWxzZSk7Cn07
        CgpNaXhpblByb3RvdHlwZS5hcHBseVBhcnRpYWwgPSBmdW5jdGlvbihvYmop
        IHsKICByZXR1cm4gYXBwbHlNaXhpbihvYmosIFt0aGlzXSwgdHJ1ZSk7Cn07
        CgpmdW5jdGlvbiBfZGV0ZWN0KGN1ck1peGluLCB0YXJnZXRNaXhpbiwgc2Vl
        bikgewogIHZhciBndWlkID0gZ3VpZEZvcihjdXJNaXhpbik7CgogIGlmIChz
        ZWVuW2d1aWRdKSB7IHJldHVybiBmYWxzZTsgfQogIHNlZW5bZ3VpZF0gPSB0
        cnVlOwoKICBpZiAoY3VyTWl4aW4gPT09IHRhcmdldE1peGluKSB7IHJldHVy
        biB0cnVlOyB9CiAgdmFyIG1peGlucyA9IGN1ck1peGluLm1peGlucywgbG9j
        ID0gbWl4aW5zID8gbWl4aW5zLmxlbmd0aCA6IDA7CiAgd2hpbGUgKC0tbG9j
        ID49IDApIHsKICAgIGlmIChfZGV0ZWN0KG1peGluc1tsb2NdLCB0YXJnZXRN
        aXhpbiwgc2VlbikpIHsgcmV0dXJuIHRydWU7IH0KICB9CiAgcmV0dXJuIGZh
        bHNlOwp9CgovKioKICBAbWV0aG9kIGRldGVjdAogIEBwYXJhbSBvYmoKICBA
        cmV0dXJuIHtCb29sZWFufQoqLwpNaXhpblByb3RvdHlwZS5kZXRlY3QgPSBm
        dW5jdGlvbihvYmopIHsKICBpZiAoIW9iaikgeyByZXR1cm4gZmFsc2U7IH0K
        ICBpZiAob2JqIGluc3RhbmNlb2YgTWl4aW4pIHsgcmV0dXJuIF9kZXRlY3Qo
        b2JqLCB0aGlzLCB7fSk7IH0KICB2YXIgbSA9IG9ialtNRVRBX0tFWV0sCiAg
        ICAgIG1peGlucyA9IG0gJiYgbS5taXhpbnM7CiAgaWYgKG1peGlucykgewog
        ICAgcmV0dXJuICEhbWl4aW5zW2d1aWRGb3IodGhpcyldOwogIH0KICByZXR1
        cm4gZmFsc2U7Cn07CgpNaXhpblByb3RvdHlwZS53aXRob3V0ID0gZnVuY3Rp
        b24oKSB7CiAgdmFyIHJldCA9IG5ldyBNaXhpbih0aGlzKTsKICByZXQuX3dp
        dGhvdXQgPSBhX3NsaWNlLmNhbGwoYXJndW1lbnRzKTsKICByZXR1cm4gcmV0
        Owp9OwoKZnVuY3Rpb24gX2tleXMocmV0LCBtaXhpbiwgc2VlbikgewogIGlm
        IChzZWVuW2d1aWRGb3IobWl4aW4pXSkgeyByZXR1cm47IH0KICBzZWVuW2d1
        aWRGb3IobWl4aW4pXSA9IHRydWU7CgogIGlmIChtaXhpbi5wcm9wZXJ0aWVz
        KSB7CiAgICB2YXIgcHJvcHMgPSBtaXhpbi5wcm9wZXJ0aWVzOwogICAgZm9y
        ICh2YXIga2V5IGluIHByb3BzKSB7CiAgICAgIGlmIChwcm9wcy5oYXNPd25Q
        cm9wZXJ0eShrZXkpKSB7IHJldFtrZXldID0gdHJ1ZTsgfQogICAgfQogIH0g
        ZWxzZSBpZiAobWl4aW4ubWl4aW5zKSB7CiAgICBhX2ZvckVhY2guY2FsbCht
        aXhpbi5taXhpbnMsIGZ1bmN0aW9uKHgpIHsgX2tleXMocmV0LCB4LCBzZWVu
        KTsgfSk7CiAgfQp9CgpNaXhpblByb3RvdHlwZS5rZXlzID0gZnVuY3Rpb24o
        KSB7CiAgdmFyIGtleXMgPSB7fSwgc2VlbiA9IHt9LCByZXQgPSBbXTsKICBf
        a2V5cyhrZXlzLCB0aGlzLCBzZWVuKTsKICBmb3IodmFyIGtleSBpbiBrZXlz
        KSB7CiAgICBpZiAoa2V5cy5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7IHJldC5w
        dXNoKGtleSk7IH0KICB9CiAgcmV0dXJuIHJldDsKfTsKCi8vIHJldHVybnMg
        dGhlIG1peGlucyBjdXJyZW50bHkgYXBwbGllZCB0byB0aGUgc3BlY2lmaWVk
        IG9iamVjdAovLyBUT0RPOiBNYWtlIEVtYmVyLm1peGluCk1peGluLm1peGlu
        cyA9IGZ1bmN0aW9uKG9iaikgewogIHZhciBtID0gb2JqW01FVEFfS0VZXSwK
        ICAgICAgbWl4aW5zID0gbSAmJiBtLm1peGlucywgcmV0ID0gW107CgogIGlm
        ICghbWl4aW5zKSB7IHJldHVybiByZXQ7IH0KCiAgZm9yICh2YXIga2V5IGlu
        IG1peGlucykgewogICAgdmFyIG1peGluID0gbWl4aW5zW2tleV07CgogICAg
        Ly8gc2tpcCBwcmltaXRpdmUgbWl4aW5zIHNpbmNlIHRoZXNlIGFyZSBhbHdh
        eXMgYW5vbnltb3VzCiAgICBpZiAoIW1peGluLnByb3BlcnRpZXMpIHsgcmV0
        LnB1c2gobWl4aW4pOyB9CiAgfQoKICByZXR1cm4gcmV0Owp9OwoKUkVRVUlS
        RUQgPSBuZXcgRW1iZXIuRGVzY3JpcHRvcigpOwpSRVFVSVJFRC50b1N0cmlu
        ZyA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gJyhSZXF1aXJlZCBQcm9wZXJ0eSkn
        OyB9OwoKLyoqCiAgRGVub3RlcyBhIHJlcXVpcmVkIHByb3BlcnR5IGZvciBh
        IG1peGluCgogIEBtZXRob2QgcmVxdWlyZWQKICBAZm9yIEVtYmVyCiovCkVt
        YmVyLnJlcXVpcmVkID0gZnVuY3Rpb24oKSB7CiAgcmV0dXJuIFJFUVVJUkVE
        Owp9OwoKQWxpYXMgPSBmdW5jdGlvbihtZXRob2ROYW1lKSB7CiAgdGhpcy5t
        ZXRob2ROYW1lID0gbWV0aG9kTmFtZTsKfTsKQWxpYXMucHJvdG90eXBlID0g
        bmV3IEVtYmVyLkRlc2NyaXB0b3IoKTsKCi8qKgogIE1ha2VzIGEgbWV0aG9k
        IGF2YWlsYWJsZSB2aWEgYW4gYWRkaXRpb25hbCBuYW1lLgoKICBgYGBqYXZh
        c2NyaXB0CiAgQXBwLlBlcnNvbiA9IEVtYmVyLk9iamVjdC5leHRlbmQoewog
        ICAgbmFtZTogZnVuY3Rpb24oKSB7CiAgICAgIHJldHVybiAnVG9taHVkYSBL
        YXR6ZGFsZSc7CiAgICB9LAogICAgbW9uaWtlcjogRW1iZXIuYWxpYXNNZXRo
        b2QoJ25hbWUnKQogIH0pOwoKICB2YXIgZ29vZEd1eSA9IEFwcC5QZXJzb24u
        Y3JlYXRlKCkKICBgYGAKCiAgQG1ldGhvZCBhbGlhc01ldGhvZAogIEBmb3Ig
        RW1iZXIKICBAcGFyYW0ge1N0cmluZ30gbWV0aG9kTmFtZSBuYW1lIG9mIHRo
        ZSBtZXRob2QgdG8gYWxpYXMKICBAcmV0dXJuIHtFbWJlci5EZXNjcmlwdG9y
        fQoqLwpFbWJlci5hbGlhc01ldGhvZCA9IGZ1bmN0aW9uKG1ldGhvZE5hbWUp
        IHsKICByZXR1cm4gbmV3IEFsaWFzKG1ldGhvZE5hbWUpOwp9OwoKLy8gLi4u
        Li4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4u
        Li4uLi4uLi4uLgovLyBPQlNFUlZFUiBIRUxQRVIKLy8KCi8qKgogIFNwZWNp
        ZnkgYSBtZXRob2QgdGhhdCBvYnNlcnZlcyBwcm9wZXJ0eSBjaGFuZ2VzLgoK
        ICBgYGBqYXZhc2NyaXB0CiAgRW1iZXIuT2JqZWN0LmV4dGVuZCh7CiAgICB2
        YWx1ZU9ic2VydmVyOiBFbWJlci5vYnNlcnZlcigndmFsdWUnLCBmdW5jdGlv
        bigpIHsKICAgICAgLy8gRXhlY3V0ZXMgd2hlbmV2ZXIgdGhlICJ2YWx1ZSIg
        cHJvcGVydHkgY2hhbmdlcwogICAgfSkKICB9KTsKICBgYGAKCiAgSW4gdGhl
        IGZ1dHVyZSB0aGlzIG1ldGhvZCBtYXkgYmVjb21lIGFzeW5jaHJvbm91cy4g
        SWYgeW91IHdhbnQgdG8gZW5zdXJlCiAgc3luY2hyb25vdXMgYmVoYXZpb3Is
        IHVzZSBgaW1tZWRpYXRlT2JzZXJ2ZXJgLgoKICBBbHNvIGF2YWlsYWJsZSBh
        cyBgRnVuY3Rpb24ucHJvdG90eXBlLm9ic2VydmVzYCBpZiBwcm90b3R5cGUg
        ZXh0ZW5zaW9ucyBhcmUKICBlbmFibGVkLgoKICBAbWV0aG9kIG9ic2VydmVy
        CiAgQGZvciBFbWJlcgogIEBwYXJhbSB7U3RyaW5nfSBwcm9wZXJ0eU5hbWVz
        KgogIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMKICBAcmV0dXJuIGZ1bmMKKi8K
        RW1iZXIub2JzZXJ2ZXIgPSBmdW5jdGlvbigpIHsKICB2YXIgZnVuYyAgPSBh
        X3NsaWNlLmNhbGwoYXJndW1lbnRzLCAtMSlbMF07CiAgdmFyIHBhdGhzOwoK
        ICB2YXIgYWRkV2F0Y2hlZFByb3BlcnR5ID0gZnVuY3Rpb24gKHBhdGgpIHsg
        cGF0aHMucHVzaChwYXRoKTsgfTsKICB2YXIgX3BhdGhzID0gYV9zbGljZS5j
        YWxsKGFyZ3VtZW50cywgMCwgLTEpOwoKICBpZiAodHlwZW9mIGZ1bmMgIT09
        ICJmdW5jdGlvbiIpIHsKICAgIC8vIHJldmVydCB0byBvbGQsIHNvZnQtZGVw
        cmVjYXRlZCBhcmd1bWVudCBvcmRlcmluZwoKICAgIGZ1bmMgID0gYXJndW1l
        bnRzWzBdOwogICAgX3BhdGhzID0gYV9zbGljZS5jYWxsKGFyZ3VtZW50cywg
        MSk7CiAgfQoKICBwYXRocyA9IFtdOwoKICBmb3IgKHZhciBpPTA7IGk8X3Bh
        dGhzLmxlbmd0aDsgKytpKSB7CiAgICBleHBhbmRQcm9wZXJ0aWVzKF9wYXRo
        c1tpXSwgYWRkV2F0Y2hlZFByb3BlcnR5KTsKICB9CgogIGlmICh0eXBlb2Yg
        ZnVuYyAhPT0gImZ1bmN0aW9uIikgewogICAgdGhyb3cgbmV3IEVtYmVyLkVy
        cm9yKCJFbWJlci5vYnNlcnZlciBjYWxsZWQgd2l0aG91dCBhIGZ1bmN0aW9u
        Iik7CiAgfQoKICBmdW5jLl9fZW1iZXJfb2JzZXJ2ZXNfXyA9IHBhdGhzOwog
        IHJldHVybiBmdW5jOwp9OwoKLyoqCiAgU3BlY2lmeSBhIG1ldGhvZCB0aGF0
        IG9ic2VydmVzIHByb3BlcnR5IGNoYW5nZXMuCgogIGBgYGphdmFzY3JpcHQK
        ICBFbWJlci5PYmplY3QuZXh0ZW5kKHsKICAgIHZhbHVlT2JzZXJ2ZXI6IEVt
        YmVyLmltbWVkaWF0ZU9ic2VydmVyKCd2YWx1ZScsIGZ1bmN0aW9uKCkgewog
        ICAgICAvLyBFeGVjdXRlcyB3aGVuZXZlciB0aGUgInZhbHVlIiBwcm9wZXJ0
        eSBjaGFuZ2VzCiAgICB9KQogIH0pOwogIGBgYAoKICBJbiB0aGUgZnV0dXJl
        LCBgRW1iZXIub2JzZXJ2ZXJgIG1heSBiZWNvbWUgYXN5bmNocm9ub3VzLiBJ
        biB0aGlzIGV2ZW50LAogIGBFbWJlci5pbW1lZGlhdGVPYnNlcnZlcmAgd2ls
        bCBtYWludGFpbiB0aGUgc3luY2hyb25vdXMgYmVoYXZpb3IuCgogIEFsc28g
        YXZhaWxhYmxlIGFzIGBGdW5jdGlvbi5wcm90b3R5cGUub2JzZXJ2ZXNJbW1l
        ZGlhdGVseWAgaWYgcHJvdG90eXBlIGV4dGVuc2lvbnMgYXJlCiAgZW5hYmxl
        ZC4KCiAgQG1ldGhvZCBpbW1lZGlhdGVPYnNlcnZlcgogIEBmb3IgRW1iZXIK
        ICBAcGFyYW0ge1N0cmluZ30gcHJvcGVydHlOYW1lcyoKICBAcGFyYW0ge0Z1
        bmN0aW9ufSBmdW5jCiAgQHJldHVybiBmdW5jCiovCkVtYmVyLmltbWVkaWF0
        ZU9ic2VydmVyID0gZnVuY3Rpb24oKSB7CiAgZm9yICh2YXIgaT0wLCBsPWFy
        Z3VtZW50cy5sZW5ndGg7IGk8bDsgaSsrKSB7CiAgICB2YXIgYXJnID0gYXJn
        dW1lbnRzW2ldOwogICAgRW1iZXIuYXNzZXJ0KCJJbW1lZGlhdGUgb2JzZXJ2
        ZXJzIG11c3Qgb2JzZXJ2ZSBpbnRlcm5hbCBwcm9wZXJ0aWVzIG9ubHksIG5v
        dCBwcm9wZXJ0aWVzIG9uIG90aGVyIG9iamVjdHMuIiwgdHlwZW9mIGFyZyAh
        PT0gInN0cmluZyIgfHwgYXJnLmluZGV4T2YoJy4nKSA9PT0gLTEpOwogIH0K
        CiAgcmV0dXJuIEVtYmVyLm9ic2VydmVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50
        cyk7Cn07CgovKioKICBXaGVuIG9ic2VydmVycyBmaXJlLCB0aGV5IGFyZSBj
        YWxsZWQgd2l0aCB0aGUgYXJndW1lbnRzIGBvYmpgLCBga2V5TmFtZWAuCgog
        IE5vdGUsIGBAZWFjaC5wcm9wZXJ0eWAgb2JzZXJ2ZXIgaXMgY2FsbGVkIHBl
        ciBlYWNoIGFkZCBvciByZXBsYWNlIG9mIGFuIGVsZW1lbnQKICBhbmQgaXQn
        cyBub3QgY2FsbGVkIHdpdGggYSBzcGVjaWZpYyBlbnVtZXJhdGlvbiBpdGVt
        LgoKICBBIGBiZWZvcmVPYnNlcnZlcmAgZmlyZXMgYmVmb3JlIGEgcHJvcGVy
        dHkgY2hhbmdlcy4KCiAgQSBgYmVmb3JlT2JzZXJ2ZXJgIGlzIGFuIGFsdGVy
        bmF0aXZlIGZvcm0gb2YgYC5vYnNlcnZlc0JlZm9yZSgpYC4KCiAgYGBgamF2
        YXNjcmlwdAogIEFwcC5QZXJzb25WaWV3ID0gRW1iZXIuVmlldy5leHRlbmQo
        ewoKICAgIGZyaWVuZHM6IFt7IG5hbWU6ICdUb20nIH0sIHsgbmFtZTogJ1N0
        ZWZhbicgfSwgeyBuYW1lOiAnS3JpcycgfV0sCgogICAgdmFsdWVXaWxsQ2hh
        bmdlOiBFbWJlci5iZWZvcmVPYnNlcnZlcignY29udGVudC52YWx1ZScsIGZ1
        bmN0aW9uKG9iaiwga2V5TmFtZSkgewogICAgICB0aGlzLmNoYW5naW5nRnJv
        bSA9IG9iai5nZXQoa2V5TmFtZSk7CiAgICB9KSwKCiAgICB2YWx1ZURpZENo
        YW5nZTogRW1iZXIub2JzZXJ2ZXIoJ2NvbnRlbnQudmFsdWUnLCBmdW5jdGlv
        bihvYmosIGtleU5hbWUpIHsKICAgICAgICAvLyBvbmx5IHJ1biBpZiB1cGRh
        dGluZyBhIHZhbHVlIGFscmVhZHkgaW4gdGhlIERPTQogICAgICAgIGlmICh0
        aGlzLmdldCgnc3RhdGUnKSA9PT0gJ2luRE9NJykgewogICAgICAgICAgdmFy
        IGNvbG9yID0gb2JqLmdldChrZXlOYW1lKSA+IHRoaXMuY2hhbmdpbmdGcm9t
        ID8gJ2dyZWVuJyA6ICdyZWQnOwogICAgICAgICAgLy8gbG9naWMKICAgICAg
        ICB9CiAgICB9KSwKCiAgICBmcmllbmRzRGlkQ2hhbmdlOiBFbWJlci5vYnNl
        cnZlcignZnJpZW5kcy5AZWFjaC5uYW1lJywgZnVuY3Rpb24ob2JqLCBrZXlO
        YW1lKSB7CiAgICAgIC8vIHNvbWUgbG9naWMKICAgICAgLy8gb2JqLmdldChr
        ZXlOYW1lKSByZXR1cm5zIGZyaWVuZHMgYXJyYXkKICAgIH0pCiAgfSk7CiAg
        YGBgCgogIEFsc28gYXZhaWxhYmxlIGFzIGBGdW5jdGlvbi5wcm90b3R5cGUu
        b2JzZXJ2ZXNCZWZvcmVgIGlmIHByb3RvdHlwZSBleHRlbnNpb25zIGFyZQog
        IGVuYWJsZWQuCgogIEBtZXRob2QgYmVmb3JlT2JzZXJ2ZXIKICBAZm9yIEVt
        YmVyCiAgQHBhcmFtIHtTdHJpbmd9IHByb3BlcnR5TmFtZXMqCiAgQHBhcmFt
        IHtGdW5jdGlvbn0gZnVuYwogIEByZXR1cm4gZnVuYwoqLwpFbWJlci5iZWZv
        cmVPYnNlcnZlciA9IGZ1bmN0aW9uKCkgewogIHZhciBmdW5jICA9IGFfc2xp
        Y2UuY2FsbChhcmd1bWVudHMsIC0xKVswXTsKICB2YXIgcGF0aHM7CgogIHZh
        ciBhZGRXYXRjaGVkUHJvcGVydHkgPSBmdW5jdGlvbihwYXRoKSB7IHBhdGhz
        LnB1c2gocGF0aCk7IH07CgogIHZhciBfcGF0aHMgPSBhX3NsaWNlLmNhbGwo
        YXJndW1lbnRzLCAwLCAtMSk7CgogIGlmICh0eXBlb2YgZnVuYyAhPT0gImZ1
        bmN0aW9uIikgewogICAgLy8gcmV2ZXJ0IHRvIG9sZCwgc29mdC1kZXByZWNh
        dGVkIGFyZ3VtZW50IG9yZGVyaW5nCgogICAgZnVuYyAgPSBhcmd1bWVudHNb
        MF07CiAgICBfcGF0aHMgPSBhX3NsaWNlLmNhbGwoYXJndW1lbnRzLCAxKTsK
        ICB9CgogIHBhdGhzID0gW107CgogIGZvciAodmFyIGk9MDsgaTxfcGF0aHMu
        bGVuZ3RoOyArK2kpIHsKICAgIGV4cGFuZFByb3BlcnRpZXMoX3BhdGhzW2ld
        LCBhZGRXYXRjaGVkUHJvcGVydHkpOwogIH0KCiAgaWYgKHR5cGVvZiBmdW5j
        ICE9PSAiZnVuY3Rpb24iKSB7CiAgICB0aHJvdyBuZXcgRW1iZXIuRXJyb3Io
        IkVtYmVyLmJlZm9yZU9ic2VydmVyIGNhbGxlZCB3aXRob3V0IGEgZnVuY3Rp
        b24iKTsKICB9CgogIGZ1bmMuX19lbWJlcl9vYnNlcnZlc0JlZm9yZV9fID0g
        cGF0aHM7CiAgcmV0dXJuIGZ1bmM7Cn07Cgp9KSgpOwoKCgooZnVuY3Rpb24o
        KSB7Ci8vIFByb3ZpZGVzIGEgd2F5IHRvIHJlZ2lzdGVyIGxpYnJhcnkgdmVy
        c2lvbnMgd2l0aCBlbWJlci4KdmFyIGZvckVhY2ggPSBFbWJlci5FbnVtZXJh
        YmxlVXRpbHMuZm9yRWFjaCwKICAgIGluZGV4T2YgPSBFbWJlci5FbnVtZXJh
        YmxlVXRpbHMuaW5kZXhPZjsKCkVtYmVyLmxpYnJhcmllcyA9IGZ1bmN0aW9u
        KCkgewogIHZhciBsaWJyYXJpZXMgICAgPSBbXTsKICB2YXIgY29yZUxpYklu
        ZGV4ID0gMDsKCiAgdmFyIGdldExpYnJhcnkgPSBmdW5jdGlvbihuYW1lKSB7
        CiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxpYnJhcmllcy5sZW5ndGg7IGkr
        KykgewogICAgICBpZiAobGlicmFyaWVzW2ldLm5hbWUgPT09IG5hbWUpIHsK
        ICAgICAgICByZXR1cm4gbGlicmFyaWVzW2ldOwogICAgICB9CiAgICB9CiAg
        fTsKCiAgbGlicmFyaWVzLnJlZ2lzdGVyID0gZnVuY3Rpb24obmFtZSwgdmVy
        c2lvbikgewogICAgaWYgKCFnZXRMaWJyYXJ5KG5hbWUpKSB7CiAgICAgIGxp
        YnJhcmllcy5wdXNoKHtuYW1lOiBuYW1lLCB2ZXJzaW9uOiB2ZXJzaW9ufSk7
        CiAgICB9CiAgfTsKCiAgbGlicmFyaWVzLnJlZ2lzdGVyQ29yZUxpYnJhcnkg
        PSBmdW5jdGlvbihuYW1lLCB2ZXJzaW9uKSB7CiAgICBpZiAoIWdldExpYnJh
        cnkobmFtZSkpIHsKICAgICAgbGlicmFyaWVzLnNwbGljZShjb3JlTGliSW5k
        ZXgrKywgMCwge25hbWU6IG5hbWUsIHZlcnNpb246IHZlcnNpb259KTsKICAg
        IH0KICB9OwoKICBsaWJyYXJpZXMuZGVSZWdpc3RlciA9IGZ1bmN0aW9uKG5h
        bWUpIHsKICAgIHZhciBsaWIgPSBnZXRMaWJyYXJ5KG5hbWUpOwogICAgaWYg
        KGxpYikgbGlicmFyaWVzLnNwbGljZShpbmRleE9mKGxpYnJhcmllcywgbGli
        KSwgMSk7CiAgfTsKCiAgbGlicmFyaWVzLmVhY2ggPSBmdW5jdGlvbiAoY2Fs
        bGJhY2spIHsKICAgIGZvckVhY2gobGlicmFyaWVzLCBmdW5jdGlvbihsaWIp
        IHsKICAgICAgY2FsbGJhY2sobGliLm5hbWUsIGxpYi52ZXJzaW9uKTsKICAg
        IH0pOwogIH07CgogIHJldHVybiBsaWJyYXJpZXM7Cn0oKTsKCkVtYmVyLmxp
        YnJhcmllcy5yZWdpc3RlckNvcmVMaWJyYXJ5KCdFbWJlcicsIEVtYmVyLlZF
        UlNJT04pOwoKfSkoKTsKCgoKKGZ1bmN0aW9uKCkgewovKioKRW1iZXIgTWV0
        YWwKCkBtb2R1bGUgZW1iZXIKQHN1Ym1vZHVsZSBlbWJlci1tZXRhbAoqLwoK
        fSkoKTsKCihmdW5jdGlvbigpIHsKLyoqCiAgQGNsYXNzIFJTVlAKICBAbW9k
        dWxlIFJTVlAKICAqLwpkZWZpbmUoInJzdnAvYWxsIiwgCiAgWyIuL3Byb21p
        c2UiLCJleHBvcnRzIl0sCiAgZnVuY3Rpb24oX19kZXBlbmRlbmN5MV9fLCBf
        X2V4cG9ydHNfXykgewogICAgInVzZSBzdHJpY3QiOwogICAgdmFyIFByb21p
        c2UgPSBfX2RlcGVuZGVuY3kxX19bImRlZmF1bHQiXTsKCiAgICAvKioKICAg
        ICAgVGhpcyBpcyBhIGNvbnZlbmllbnQgYWxpYXMgZm9yIGBSU1ZQLlByb21p
        c2UuYWxsYC4KCiAgICAgIEBtZXRob2QgYWxsCiAgICAgIEBmb3IgUlNWUAog
        ICAgICBAcGFyYW0ge0FycmF5fSBhcnJheSBBcnJheSBvZiBwcm9taXNlcy4K
        ICAgICAgQHBhcmFtIHtTdHJpbmd9IGxhYmVsIEFuIG9wdGlvbmFsIGxhYmVs
        LiBUaGlzIGlzIHVzZWZ1bAogICAgICBmb3IgdG9vbGluZy4KICAgICAgQHN0
        YXRpYwogICAgKi8KICAgIF9fZXhwb3J0c19fWyJkZWZhdWx0Il0gPSBmdW5j
        dGlvbiBhbGwoYXJyYXksIGxhYmVsKSB7CiAgICAgIHJldHVybiBQcm9taXNl
        LmFsbChhcnJheSwgbGFiZWwpOwogICAgfTsKICB9KTsKZGVmaW5lKCJyc3Zw
        L2FsbF9zZXR0bGVkIiwgCiAgWyIuL3Byb21pc2UiLCIuL3V0aWxzIiwiZXhw
        b3J0cyJdLAogIGZ1bmN0aW9uKF9fZGVwZW5kZW5jeTFfXywgX19kZXBlbmRl
        bmN5Ml9fLCBfX2V4cG9ydHNfXykgewogICAgInVzZSBzdHJpY3QiOwogICAg
        dmFyIFByb21pc2UgPSBfX2RlcGVuZGVuY3kxX19bImRlZmF1bHQiXTsKICAg
        IHZhciBpc0FycmF5ID0gX19kZXBlbmRlbmN5Ml9fLmlzQXJyYXk7CiAgICB2
        YXIgaXNOb25UaGVuYWJsZSA9IF9fZGVwZW5kZW5jeTJfXy5pc05vblRoZW5h
        YmxlOwoKICAgIC8qKgogICAgICBgUlNWUC5hbGxTZXR0bGVkYCBpcyBzaW1p
        bGFyIHRvIGBSU1ZQLmFsbGAsIGJ1dCBpbnN0ZWFkIG9mIGltcGxlbWVudGlu
        ZwogICAgICBhIGZhaWwtZmFzdCBtZXRob2QsIGl0IHdhaXRzIHVudGlsIGFs
        bCB0aGUgcHJvbWlzZXMgaGF2ZSByZXR1cm5lZCBhbmQKICAgICAgc2hvd3Mg
        eW91IGFsbCB0aGUgcmVzdWx0cy4gVGhpcyBpcyB1c2VmdWwgaWYgeW91IHdh
        bnQgdG8gaGFuZGxlIG11bHRpcGxlCiAgICAgIHByb21pc2VzJyBmYWlsdXJl
        IHN0YXRlcyB0b2dldGhlciBhcyBhIHNldC4KCiAgICAgIFJldHVybnMgYSBw
        cm9taXNlIHRoYXQgaXMgZnVsZmlsbGVkIHdoZW4gYWxsIHRoZSBnaXZlbiBw
        cm9taXNlcyBoYXZlIGJlZW4KICAgICAgc2V0dGxlZC4gVGhlIHJldHVybiBw
        cm9taXNlIGlzIGZ1bGZpbGxlZCB3aXRoIGFuIGFycmF5IG9mIHRoZSBzdGF0
        ZXMgb2YKICAgICAgdGhlIHByb21pc2VzIHBhc3NlZCBpbnRvIHRoZSBgcHJv
        bWlzZXNgIGFycmF5IGFyZ3VtZW50LgoKICAgICAgRWFjaCBzdGF0ZSBvYmpl
        Y3Qgd2lsbCBlaXRoZXIgaW5kaWNhdGUgZnVsZmlsbG1lbnQgb3IgcmVqZWN0
        aW9uLCBhbmQKICAgICAgcHJvdmlkZSB0aGUgY29ycmVzcG9uZGluZyB2YWx1
        ZSBvciByZWFzb24uIFRoZSBzdGF0ZXMgd2lsbCB0YWtlIG9uZSBvZgogICAg
        ICB0aGUgZm9sbG93aW5nIGZvcm1hdHM6CgogICAgICBgYGBqYXZhc2NyaXB0
        CiAgICAgIHsgc3RhdGU6ICdmdWxmaWxsZWQnLCB2YWx1ZTogdmFsdWUgfQog
        ICAgICAgIG9yCiAgICAgIHsgc3RhdGU6ICdyZWplY3RlZCcsIHJlYXNvbjog
        cmVhc29uIH0KICAgICAgYGBgCgogICAgICBFeGFtcGxlOgoKICAgICAgYGBg
        amF2YXNjcmlwdAogICAgICB2YXIgcHJvbWlzZTEgPSBSU1ZQLlByb21pc2Uu
        cmVzb2x2ZSgxKTsKICAgICAgdmFyIHByb21pc2UyID0gUlNWUC5Qcm9taXNl
        LnJlamVjdChuZXcgRXJyb3IoJzInKSk7CiAgICAgIHZhciBwcm9taXNlMyA9
        IFJTVlAuUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKCczJykpOwogICAgICB2
        YXIgcHJvbWlzZXMgPSBbIHByb21pc2UxLCBwcm9taXNlMiwgcHJvbWlzZTMg
        XTsKCiAgICAgIFJTVlAuYWxsU2V0dGxlZChwcm9taXNlcykudGhlbihmdW5j
        dGlvbihhcnJheSl7CiAgICAgICAgLy8gYXJyYXkgPT0gWwogICAgICAgIC8v
        ICAgeyBzdGF0ZTogJ2Z1bGZpbGxlZCcsIHZhbHVlOiAxIH0sCiAgICAgICAg
        Ly8gICB7IHN0YXRlOiAncmVqZWN0ZWQnLCByZWFzb246IEVycm9yIH0sCiAg
        ICAgICAgLy8gICB7IHN0YXRlOiAncmVqZWN0ZWQnLCByZWFzb246IEVycm9y
        IH0KICAgICAgICAvLyBdCiAgICAgICAgLy8gTm90ZSB0aGF0IGZvciB0aGUg
        c2Vjb25kIGl0ZW0sIHJlYXNvbi5tZXNzYWdlIHdpbGwgYmUgIjIiLCBhbmQg
        Zm9yIHRoZQogICAgICAgIC8vIHRoaXJkIGl0ZW0sIHJlYXNvbi5tZXNzYWdl
        IHdpbGwgYmUgIjMiLgogICAgICB9LCBmdW5jdGlvbihlcnJvcikgewogICAg
        ICAgIC8vIE5vdCBydW4uIChUaGlzIGJsb2NrIHdvdWxkIG9ubHkgYmUgY2Fs
        bGVkIGlmIGFsbFNldHRsZWQgaGFkIGZhaWxlZCwKICAgICAgICAvLyBmb3Ig
        aW5zdGFuY2UgaWYgcGFzc2VkIGFuIGluY29ycmVjdCBhcmd1bWVudCB0eXBl
        LikKICAgICAgfSk7CiAgICAgIGBgYAoKICAgICAgQG1ldGhvZCBhbGxTZXR0
        bGVkCiAgICAgIEBmb3IgUlNWUAogICAgICBAcGFyYW0ge0FycmF5fSBwcm9t
        aXNlcwogICAgICBAcGFyYW0ge1N0cmluZ30gbGFiZWwgLSBvcHRpb25hbCBz
        dHJpbmcgdGhhdCBkZXNjcmliZXMgdGhlIHByb21pc2UuCiAgICAgIFVzZWZ1
        bCBmb3IgdG9vbGluZy4KICAgICAgQHJldHVybiB7UHJvbWlzZX0gcHJvbWlz
        ZSB0aGF0IGlzIGZ1bGZpbGxlZCB3aXRoIGFuIGFycmF5IG9mIHRoZSBzZXR0
        bGVkCiAgICAgIHN0YXRlcyBvZiB0aGUgY29uc3RpdHVlbnQgcHJvbWlzZXMu
        CiAgICAgIEBzdGF0aWMKICAgICovCgogICAgX19leHBvcnRzX19bImRlZmF1
        bHQiXSA9IGZ1bmN0aW9uIGFsbFNldHRsZWQoZW50cmllcywgbGFiZWwpIHsK
        ICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJl
        amVjdCkgewogICAgICAgIGlmICghaXNBcnJheShlbnRyaWVzKSkgewogICAg
        ICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignWW91IG11c3QgcGFzcyBhbiBh
        cnJheSB0byBhbGxTZXR0bGVkLicpOwogICAgICAgIH0KCiAgICAgICAgdmFy
        IHJlbWFpbmluZyA9IGVudHJpZXMubGVuZ3RoOwogICAgICAgIHZhciBlbnRy
        eTsKCiAgICAgICAgaWYgKHJlbWFpbmluZyA9PT0gMCkgewogICAgICAgICAg
        cmVzb2x2ZShbXSk7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAg
        ICAgICB2YXIgcmVzdWx0cyA9IG5ldyBBcnJheShyZW1haW5pbmcpOwoKICAg
        ICAgICBmdW5jdGlvbiBmdWxmaWxsZWRSZXNvbHZlcihpbmRleCkgewogICAg
        ICAgICAgcmV0dXJuIGZ1bmN0aW9uKHZhbHVlKSB7CiAgICAgICAgICAgIHJl
        c29sdmVBbGwoaW5kZXgsIGZ1bGZpbGxlZCh2YWx1ZSkpOwogICAgICAgICAg
        fTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkUmVzb2x2
        ZXIoaW5kZXgpIHsKICAgICAgICAgIHJldHVybiBmdW5jdGlvbihyZWFzb24p
        IHsKICAgICAgICAgICAgcmVzb2x2ZUFsbChpbmRleCwgcmVqZWN0ZWQocmVh
        c29uKSk7CiAgICAgICAgICB9OwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rp
        b24gcmVzb2x2ZUFsbChpbmRleCwgdmFsdWUpIHsKICAgICAgICAgIHJlc3Vs
        dHNbaW5kZXhdID0gdmFsdWU7CiAgICAgICAgICBpZiAoLS1yZW1haW5pbmcg
        PT09IDApIHsKICAgICAgICAgICAgcmVzb2x2ZShyZXN1bHRzKTsKICAgICAg
        ICAgIH0KICAgICAgICB9CgogICAgICAgIGZvciAodmFyIGluZGV4ID0gMDsg
        aW5kZXggPCBlbnRyaWVzLmxlbmd0aDsgaW5kZXgrKykgewogICAgICAgICAg
        ZW50cnkgPSBlbnRyaWVzW2luZGV4XTsKCiAgICAgICAgICBpZiAoaXNOb25U
        aGVuYWJsZShlbnRyeSkpIHsKICAgICAgICAgICAgcmVzb2x2ZUFsbChpbmRl
        eCwgZnVsZmlsbGVkKGVudHJ5KSk7CiAgICAgICAgICB9IGVsc2UgewogICAg
        ICAgICAgICBQcm9taXNlLmNhc3QoZW50cnkpLnRoZW4oZnVsZmlsbGVkUmVz
        b2x2ZXIoaW5kZXgpLCByZWplY3RlZFJlc29sdmVyKGluZGV4KSk7CiAgICAg
        ICAgICB9CiAgICAgICAgfQogICAgICB9LCBsYWJlbCk7CiAgICB9OwoKICAg
        IGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgewogICAgICByZXR1cm4geyBz
        dGF0ZTogJ2Z1bGZpbGxlZCcsIHZhbHVlOiB2YWx1ZSB9OwogICAgfQoKICAg
        IGZ1bmN0aW9uIHJlamVjdGVkKHJlYXNvbikgewogICAgICByZXR1cm4geyBz
        dGF0ZTogJ3JlamVjdGVkJywgcmVhc29uOiByZWFzb24gfTsKICAgIH0KICB9
        KTsKZGVmaW5lKCJyc3ZwL2NvbmZpZyIsIAogIFsiLi9ldmVudHMiLCJleHBv
        cnRzIl0sCiAgZnVuY3Rpb24oX19kZXBlbmRlbmN5MV9fLCBfX2V4cG9ydHNf
        XykgewogICAgInVzZSBzdHJpY3QiOwogICAgdmFyIEV2ZW50VGFyZ2V0ID0g
        X19kZXBlbmRlbmN5MV9fWyJkZWZhdWx0Il07CgogICAgdmFyIGNvbmZpZyA9
        IHsKICAgICAgaW5zdHJ1bWVudDogZmFsc2UKICAgIH07CgogICAgRXZlbnRU
        YXJnZXQubWl4aW4oY29uZmlnKTsKCiAgICBmdW5jdGlvbiBjb25maWd1cmUo
        bmFtZSwgdmFsdWUpIHsKICAgICAgaWYgKG5hbWUgPT09ICdvbmVycm9yJykg
        ewogICAgICAgIC8vIGhhbmRsZSBmb3IgbGVnYWN5IHVzZXJzIHRoYXQgZXhw
        ZWN0IHRoZSBhY3R1YWwKICAgICAgICAvLyBlcnJvciB0byBiZSBwYXNzZWQg
        dG8gdGhlaXIgZnVuY3Rpb24gYWRkZWQgdmlhCiAgICAgICAgLy8gYFJTVlAu
        Y29uZmlndXJlKCdvbmVycm9yJywgc29tZUZ1bmN0aW9uSGVyZSk7YAogICAg
        ICAgIGNvbmZpZy5vbignZXJyb3InLCB2YWx1ZSk7CiAgICAgICAgcmV0dXJu
        OwogICAgICB9CgogICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMikg
        ewogICAgICAgIGNvbmZpZ1tuYW1lXSA9IHZhbHVlOwogICAgICB9IGVsc2Ug
        ewogICAgICAgIHJldHVybiBjb25maWdbbmFtZV07CiAgICAgIH0KICAgIH0K
        CiAgICBfX2V4cG9ydHNfXy5jb25maWcgPSBjb25maWc7CiAgICBfX2V4cG9y
        dHNfXy5jb25maWd1cmUgPSBjb25maWd1cmU7CiAgfSk7CmRlZmluZSgicnN2
        cC9kZWZlciIsIAogIFsiLi9wcm9taXNlIiwiZXhwb3J0cyJdLAogIGZ1bmN0
        aW9uKF9fZGVwZW5kZW5jeTFfXywgX19leHBvcnRzX18pIHsKICAgICJ1c2Ug
        c3RyaWN0IjsKICAgIHZhciBQcm9taXNlID0gX19kZXBlbmRlbmN5MV9fWyJk
        ZWZhdWx0Il07CgogICAgLyoqCiAgICAgIGBSU1ZQLmRlZmVyYCByZXR1cm5z
        IGFuIG9iamVjdCBzaW1pbGFyIHRvIGpRdWVyeSdzIGAkLkRlZmVycmVkYC4K
        ICAgICAgYFJTVlAuZGVmZXJgIHNob3VsZCBiZSB1c2VkIHdoZW4gcG9ydGlu
        ZyBvdmVyIGNvZGUgcmVsaWFudCBvbiBgJC5EZWZlcnJlZGAncwogICAgICBp
        bnRlcmZhY2UuIE5ldyBjb2RlIHNob3VsZCB1c2UgdGhlIGBSU1ZQLlByb21p
        c2VgIGNvbnN0cnVjdG9yIGluc3RlYWQuCgogICAgICBUaGUgb2JqZWN0IHJl
        dHVybmVkIGZyb20gYFJTVlAuZGVmZXJgIGlzIGEgcGxhaW4gb2JqZWN0IHdp
        dGggdGhyZWUgcHJvcGVydGllczoKCiAgICAgICogcHJvbWlzZSAtIGFuIGBS
        U1ZQLlByb21pc2VgLgogICAgICAqIHJlamVjdCAtIGEgZnVuY3Rpb24gdGhh
        dCBjYXVzZXMgdGhlIGBwcm9taXNlYCBwcm9wZXJ0eSBvbiB0aGlzIG9iamVj
        dCB0bwogICAgICAgIGJlY29tZSByZWplY3RlZAogICAgICAqIHJlc29sdmUg
        LSBhIGZ1bmN0aW9uIHRoYXQgY2F1c2VzIHRoZSBgcHJvbWlzZWAgcHJvcGVy
        dHkgb24gdGhpcyBvYmplY3QgdG8KICAgICAgICBiZWNvbWUgZnVsZmlsbGVk
        LgoKICAgICAgRXhhbXBsZToKCiAgICAgICBgYGBqYXZhc2NyaXB0CiAgICAg
        ICB2YXIgZGVmZXJyZWQgPSBSU1ZQLmRlZmVyKCk7CgogICAgICAgZGVmZXJy
        ZWQucmVzb2x2ZSgiU3VjY2VzcyEiKTsKCiAgICAgICBkZWZlcmVkLnByb21p
        c2UudGhlbihmdW5jdGlvbih2YWx1ZSl7CiAgICAgICAgIC8vIHZhbHVlIGhl
        cmUgaXMgIlN1Y2Nlc3MhIgogICAgICAgfSk7CiAgICAgICBgYGAKCiAgICAg
        IEBtZXRob2QgZGVmZXIKICAgICAgQGZvciBSU1ZQCiAgICAgIEBwYXJhbSB7
        U3RyaW5nfSBsYWJlbCBvcHRpb25hbCBzdHJpbmcgZm9yIGxhYmVsaW5nIHRo
        ZSBwcm9taXNlLgogICAgICBVc2VmdWwgZm9yIHRvb2xpbmcuCiAgICAgIEBy
        ZXR1cm4ge09iamVjdH0KICAgICAqLwoKICAgIF9fZXhwb3J0c19fWyJkZWZh
        dWx0Il0gPSBmdW5jdGlvbiBkZWZlcihsYWJlbCkgewogICAgICB2YXIgZGVm
        ZXJyZWQgPSB7IH07CgogICAgICBkZWZlcnJlZC5wcm9taXNlID0gbmV3IFBy
        b21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgZGVm
        ZXJyZWQucmVzb2x2ZSA9IHJlc29sdmU7CiAgICAgICAgZGVmZXJyZWQucmVq
        ZWN0ID0gcmVqZWN0OwogICAgICB9LCBsYWJlbCk7CgogICAgICByZXR1cm4g
        ZGVmZXJyZWQ7CiAgICB9OwogIH0pOwpkZWZpbmUoInJzdnAvZXZlbnRzIiwg
        CiAgWyJleHBvcnRzIl0sCiAgZnVuY3Rpb24oX19leHBvcnRzX18pIHsKICAg
        ICJ1c2Ugc3RyaWN0IjsKICAgIHZhciBpbmRleE9mID0gZnVuY3Rpb24oY2Fs
        bGJhY2tzLCBjYWxsYmFjaykgewogICAgICBmb3IgKHZhciBpPTAsIGw9Y2Fs
        bGJhY2tzLmxlbmd0aDsgaTxsOyBpKyspIHsKICAgICAgICBpZiAoY2FsbGJh
        Y2tzW2ldID09PSBjYWxsYmFjaykgeyByZXR1cm4gaTsgfQogICAgICB9Cgog
        ICAgICByZXR1cm4gLTE7CiAgICB9OwoKICAgIHZhciBjYWxsYmFja3NGb3Ig
        PSBmdW5jdGlvbihvYmplY3QpIHsKICAgICAgdmFyIGNhbGxiYWNrcyA9IG9i
        amVjdC5fcHJvbWlzZUNhbGxiYWNrczsKCiAgICAgIGlmICghY2FsbGJhY2tz
        KSB7CiAgICAgICAgY2FsbGJhY2tzID0gb2JqZWN0Ll9wcm9taXNlQ2FsbGJh
        Y2tzID0ge307CiAgICAgIH0KCiAgICAgIHJldHVybiBjYWxsYmFja3M7CiAg
        ICB9OwoKICAgIC8qKgogICAgICBAY2xhc3MgUlNWUC5FdmVudFRhcmdldAog
        ICAgKi8KICAgIF9fZXhwb3J0c19fWyJkZWZhdWx0Il0gPSB7CgogICAgICAv
        KioKICAgICAgICBgUlNWUC5FdmVudFRhcmdldC5taXhpbmAgZXh0ZW5kcyBh
        biBvYmplY3Qgd2l0aCBFdmVudFRhcmdldCBtZXRob2RzLiBGb3IKICAgICAg
        ICBFeGFtcGxlOgoKICAgICAgICBgYGBqYXZhc2NyaXB0CiAgICAgICAgdmFy
        IG9iamVjdCA9IHt9OwoKICAgICAgICBSU1ZQLkV2ZW50VGFyZ2V0Lm1peGlu
        KG9iamVjdCk7CgogICAgICAgIG9iamVjdC5vbigiZmluaXNoZWQiLCBmdW5j
        dGlvbihldmVudCkgewogICAgICAgICAgLy8gaGFuZGxlIGV2ZW50CiAgICAg
        ICAgfSk7CgogICAgICAgIG9iamVjdC50cmlnZ2VyKCJmaW5pc2hlZCIsIHsg
        ZGV0YWlsOiB2YWx1ZSB9KTsKICAgICAgICBgYGAKCiAgICAgICAgYEV2ZW50
        VGFyZ2V0Lm1peGluYCBhbHNvIHdvcmtzIHdpdGggcHJvdG90eXBlczoKCiAg
        ICAgICAgYGBgamF2YXNjcmlwdAogICAgICAgIHZhciBQZXJzb24gPSBmdW5j
        dGlvbigpIHt9OwogICAgICAgIFJTVlAuRXZlbnRUYXJnZXQubWl4aW4oUGVy
        c29uLnByb3RvdHlwZSk7CgogICAgICAgIHZhciB5ZWh1ZGEgPSBuZXcgUGVy
        c29uKCk7CiAgICAgICAgdmFyIHRvbSA9IG5ldyBQZXJzb24oKTsKCiAgICAg
        ICAgeWVodWRhLm9uKCJwb2tlIiwgZnVuY3Rpb24oZXZlbnQpIHsKICAgICAg
        ICAgIGNvbnNvbGUubG9nKCJZZWh1ZGEgc2F5cyBPVyIpOwogICAgICAgIH0p
        OwoKICAgICAgICB0b20ub24oInBva2UiLCBmdW5jdGlvbihldmVudCkgewog
        ICAgICAgICAgY29uc29sZS5sb2coIlRvbSBzYXlzIE9XIik7CiAgICAgICAg
        fSk7CgogICAgICAgIHllaHVkYS50cmlnZ2VyKCJwb2tlIik7CiAgICAgICAg
        dG9tLnRyaWdnZXIoInBva2UiKTsKICAgICAgICBgYGAKCiAgICAgICAgQG1l
        dGhvZCBtaXhpbgogICAgICAgIEBwYXJhbSB7T2JqZWN0fSBvYmplY3Qgb2Jq
        ZWN0IHRvIGV4dGVuZCB3aXRoIEV2ZW50VGFyZ2V0IG1ldGhvZHMKICAgICAg
        ICBAcHJpdmF0ZQogICAgICAqLwogICAgICBtaXhpbjogZnVuY3Rpb24ob2Jq
        ZWN0KSB7CiAgICAgICAgb2JqZWN0Lm9uID0gdGhpcy5vbjsKICAgICAgICBv
        YmplY3Qub2ZmID0gdGhpcy5vZmY7CiAgICAgICAgb2JqZWN0LnRyaWdnZXIg
        PSB0aGlzLnRyaWdnZXI7CiAgICAgICAgb2JqZWN0Ll9wcm9taXNlQ2FsbGJh
        Y2tzID0gdW5kZWZpbmVkOwogICAgICAgIHJldHVybiBvYmplY3Q7CiAgICAg
        IH0sCgogICAgICAvKioKICAgICAgICBSZWdpc3RlcnMgYSBjYWxsYmFjayB0
        byBiZSBleGVjdXRlZCB3aGVuIGBldmVudE5hbWVgIGlzIHRyaWdnZXJlZAoK
        ICAgICAgICBgYGBqYXZhc2NyaXB0CiAgICAgICAgb2JqZWN0Lm9uKCdldmVu
        dCcsIGZ1bmN0aW9uKGV2ZW50SW5mbyl7CiAgICAgICAgICAvLyBoYW5kbGUg
        dGhlIGV2ZW50CiAgICAgICAgfSk7CgogICAgICAgIG9iamVjdC50cmlnZ2Vy
        KCdldmVudCcpOwogICAgICAgIGBgYAoKICAgICAgICBAbWV0aG9kIG9uCiAg
        ICAgICAgQHBhcmFtIHtTdHJpbmd9IGV2ZW50TmFtZSBuYW1lIG9mIHRoZSBl
        dmVudCB0byBsaXN0ZW4gZm9yCiAgICAgICAgQHBhcmFtIHtGdW5jdGlvbn0g
        Y2FsbGJhY2sgZnVuY3Rpb24gdG8gYmUgY2FsbGVkIHdoZW4gdGhlIGV2ZW50
        IGlzIHRyaWdnZXJlZC4KICAgICAgICBAcHJpdmF0ZQogICAgICAqLwogICAg
        ICBvbjogZnVuY3Rpb24oZXZlbnROYW1lLCBjYWxsYmFjaykgewogICAgICAg
        IHZhciBhbGxDYWxsYmFja3MgPSBjYWxsYmFja3NGb3IodGhpcyksIGNhbGxi
        YWNrczsKCiAgICAgICAgY2FsbGJhY2tzID0gYWxsQ2FsbGJhY2tzW2V2ZW50
        TmFtZV07CgogICAgICAgIGlmICghY2FsbGJhY2tzKSB7CiAgICAgICAgICBj
        YWxsYmFja3MgPSBhbGxDYWxsYmFja3NbZXZlbnROYW1lXSA9IFtdOwogICAg
        ICAgIH0KCiAgICAgICAgaWYgKGluZGV4T2YoY2FsbGJhY2tzLCBjYWxsYmFj
        aykgPT09IC0xKSB7CiAgICAgICAgICBjYWxsYmFja3MucHVzaChjYWxsYmFj
        ayk7CiAgICAgICAgfQogICAgICB9LAoKICAgICAgLyoqCiAgICAgICAgWW91
        IGNhbiB1c2UgYG9mZmAgdG8gc3RvcCBmaXJpbmcgYSBwYXJ0aWN1bGFyIGNh
        bGxiYWNrIGZvciBhbiBldmVudDoKCiAgICAgICAgYGBgamF2YXNjcmlwdAog
        ICAgICAgIGZ1bmN0aW9uIGRvU3R1ZmYoKSB7IC8vIGRvIHN0dWZmISB9CiAg
        ICAgICAgb2JqZWN0Lm9uKCdzdHVmZicsIGRvU3R1ZmYpOwoKICAgICAgICBv
        YmplY3QudHJpZ2dlcignc3R1ZmYnKTsgLy8gZG9TdHVmZiB3aWxsIGJlIGNh
        bGxlZAoKICAgICAgICAvLyBVbnJlZ2lzdGVyIE9OTFkgdGhlIGRvU3R1ZmYg
        Y2FsbGJhY2sKICAgICAgICBvYmplY3Qub2ZmKCdzdHVmZicsIGRvU3R1ZmYp
        OwogICAgICAgIG9iamVjdC50cmlnZ2VyKCdzdHVmZicpOyAvLyBkb1N0dWZm
        IHdpbGwgTk9UIGJlIGNhbGxlZAogICAgICAgIGBgYAoKICAgICAgICBJZiB5
        b3UgZG9uJ3QgcGFzcyBhIGBjYWxsYmFja2AgYXJndW1lbnQgdG8gYG9mZmAs
        IEFMTCBjYWxsYmFja3MgZm9yIHRoZQogICAgICAgIGV2ZW50IHdpbGwgbm90
        IGJlIGV4ZWN1dGVkIHdoZW4gdGhlIGV2ZW50IGZpcmVzLiBGb3IgZXhhbXBs
        ZToKCiAgICAgICAgYGBgamF2YXNjcmlwdAogICAgICAgIHZhciBjYWxsYmFj
        azEgPSBmdW5jdGlvbigpe307CiAgICAgICAgdmFyIGNhbGxiYWNrMiA9IGZ1
        bmN0aW9uKCl7fTsKCiAgICAgICAgb2JqZWN0Lm9uKCdzdHVmZicsIGNhbGxi
        YWNrMSk7CiAgICAgICAgb2JqZWN0Lm9uKCdzdHVmZicsIGNhbGxiYWNrMik7
        CgogICAgICAgIG9iamVjdC50cmlnZ2VyKCdzdHVmZicpOyAvLyBjYWxsYmFj
        azEgYW5kIGNhbGxiYWNrMiB3aWxsIGJlIGV4ZWN1dGVkLgoKICAgICAgICBv
        YmplY3Qub2ZmKCdzdHVmZicpOwogICAgICAgIG9iamVjdC50cmlnZ2VyKCdz
        dHVmZicpOyAvLyBjYWxsYmFjazEgYW5kIGNhbGxiYWNrMiB3aWxsIG5vdCBi
        ZSBleGVjdXRlZCEKICAgICAgICBgYGAKCiAgICAgICAgQG1ldGhvZCBvZmYK
        ICAgICAgICBAcGFyYW0ge1N0cmluZ30gZXZlbnROYW1lIGV2ZW50IHRvIHN0
        b3AgbGlzdGVuaW5nIHRvCiAgICAgICAgQHBhcmFtIHtGdW5jdGlvbn0gY2Fs
        bGJhY2sgb3B0aW9uYWwgYXJndW1lbnQuIElmIGdpdmVuLCBvbmx5IHRoZSBm
        dW5jdGlvbgogICAgICAgIGdpdmVuIHdpbGwgYmUgcmVtb3ZlZCBmcm9tIHRo
        ZSBldmVudCdzIGNhbGxiYWNrIHF1ZXVlLiBJZiBubyBgY2FsbGJhY2tgCiAg
        ICAgICAgYXJndW1lbnQgaXMgZ2l2ZW4sIGFsbCBjYWxsYmFja3Mgd2lsbCBi
        ZSByZW1vdmVkIGZyb20gdGhlIGV2ZW50J3MgY2FsbGJhY2sKICAgICAgICBx
        dWV1ZS4KICAgICAgICBAcHJpdmF0ZQoKICAgICAgKi8KICAgICAgb2ZmOiBm
        dW5jdGlvbihldmVudE5hbWUsIGNhbGxiYWNrKSB7CiAgICAgICAgdmFyIGFs
        bENhbGxiYWNrcyA9IGNhbGxiYWNrc0Zvcih0aGlzKSwgY2FsbGJhY2tzLCBp
        bmRleDsKCiAgICAgICAgaWYgKCFjYWxsYmFjaykgewogICAgICAgICAgYWxs
        Q2FsbGJhY2tzW2V2ZW50TmFtZV0gPSBbXTsKICAgICAgICAgIHJldHVybjsK
        ICAgICAgICB9CgogICAgICAgIGNhbGxiYWNrcyA9IGFsbENhbGxiYWNrc1tl
        dmVudE5hbWVdOwoKICAgICAgICBpbmRleCA9IGluZGV4T2YoY2FsbGJhY2tz
        LCBjYWxsYmFjayk7CgogICAgICAgIGlmIChpbmRleCAhPT0gLTEpIHsgY2Fs
        bGJhY2tzLnNwbGljZShpbmRleCwgMSk7IH0KICAgICAgfSwKCiAgICAgIC8q
        KgogICAgICAgIFVzZSBgdHJpZ2dlcmAgdG8gZmlyZSBjdXN0b20gZXZlbnRz
        LiBGb3IgZXhhbXBsZToKCiAgICAgICAgYGBgamF2YXNjcmlwdAogICAgICAg
        IG9iamVjdC5vbignZm9vJywgZnVuY3Rpb24oKXsKICAgICAgICAgIGNvbnNv
        bGUubG9nKCdmb28gZXZlbnQgaGFwcGVuZWQhJyk7CiAgICAgICAgfSk7CiAg
        ICAgICAgb2JqZWN0LnRyaWdnZXIoJ2ZvbycpOwogICAgICAgIC8vICdmb28g
        ZXZlbnQgaGFwcGVuZWQhJyBsb2dnZWQgdG8gdGhlIGNvbnNvbGUKICAgICAg
        ICBgYGAKCiAgICAgICAgWW91IGNhbiBhbHNvIHBhc3MgYSB2YWx1ZSBhcyBh
        IHNlY29uZCBhcmd1bWVudCB0byBgdHJpZ2dlcmAgdGhhdCB3aWxsIGJlCiAg
        ICAgICAgcGFzc2VkIGFzIGFuIGFyZ3VtZW50IHRvIGFsbCBldmVudCBsaXN0
        ZW5lcnMgZm9yIHRoZSBldmVudDoKCiAgICAgICAgYGBgamF2YXNjcmlwdAog
        ICAgICAgIG9iamVjdC5vbignZm9vJywgZnVuY3Rpb24odmFsdWUpewogICAg
        ICAgICAgY29uc29sZS5sb2codmFsdWUubmFtZSk7CiAgICAgICAgfSk7Cgog
        ICAgICAgIG9iamVjdC50cmlnZ2VyKCdmb28nLCB7IG5hbWU6ICdiYXInIH0p
        OwogICAgICAgIC8vICdiYXInIGxvZ2dlZCB0byB0aGUgY29uc29sZQogICAg
        ICAgIGBgYAoKICAgICAgICBAbWV0aG9kIHRyaWdnZXIKICAgICAgICBAcGFy
        YW0ge1N0cmluZ30gZXZlbnROYW1lIG5hbWUgb2YgdGhlIGV2ZW50IHRvIGJl
        IHRyaWdnZXJlZAogICAgICAgIEBwYXJhbSB7QW55fSBvcHRpb25zIG9wdGlv
        bmFsIHZhbHVlIHRvIGJlIHBhc3NlZCB0byBhbnkgZXZlbnQgaGFuZGxlcnMg
        Zm9yCiAgICAgICAgdGhlIGdpdmVuIGBldmVudE5hbWVgCiAgICAgICAgQHBy
        aXZhdGUKICAgICAgKi8KICAgICAgdHJpZ2dlcjogZnVuY3Rpb24oZXZlbnRO
        YW1lLCBvcHRpb25zKSB7CiAgICAgICAgdmFyIGFsbENhbGxiYWNrcyA9IGNh
        bGxiYWNrc0Zvcih0aGlzKSwKICAgICAgICAgICAgY2FsbGJhY2tzLCBjYWxs
        YmFja1R1cGxlLCBjYWxsYmFjaywgYmluZGluZzsKCiAgICAgICAgaWYgKGNh
        bGxiYWNrcyA9IGFsbENhbGxiYWNrc1tldmVudE5hbWVdKSB7CiAgICAgICAg
        ICAvLyBEb24ndCBjYWNoZSB0aGUgY2FsbGJhY2tzLmxlbmd0aCBzaW5jZSBp
        dCBtYXkgZ3JvdwogICAgICAgICAgZm9yICh2YXIgaT0wOyBpPGNhbGxiYWNr
        cy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICBjYWxsYmFjayA9IGNhbGxi
        YWNrc1tpXTsKCiAgICAgICAgICAgIGNhbGxiYWNrKG9wdGlvbnMpOwogICAg
        ICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfTsKICB9KTsKZGVmaW5l
        KCJyc3ZwL2ZpbHRlciIsIAogIFsiLi9hbGwiLCIuL21hcCIsIi4vdXRpbHMi
        LCJleHBvcnRzIl0sCiAgZnVuY3Rpb24oX19kZXBlbmRlbmN5MV9fLCBfX2Rl
        cGVuZGVuY3kyX18sIF9fZGVwZW5kZW5jeTNfXywgX19leHBvcnRzX18pIHsK
        ICAgICJ1c2Ugc3RyaWN0IjsKICAgIHZhciBhbGwgPSBfX2RlcGVuZGVuY3kx
        X19bImRlZmF1bHQiXTsKICAgIHZhciBtYXAgPSBfX2RlcGVuZGVuY3kyX19b
        ImRlZmF1bHQiXTsKICAgIHZhciBpc0Z1bmN0aW9uID0gX19kZXBlbmRlbmN5
        M19fLmlzRnVuY3Rpb247CiAgICB2YXIgaXNBcnJheSA9IF9fZGVwZW5kZW5j
        eTNfXy5pc0FycmF5OwoKICAgIC8qKgogICAgIGBSU1ZQLmZpbHRlcmAgaXMg
        c2ltaWxhciB0byBKYXZhU2NyaXB0J3MgbmF0aXZlIGBmaWx0ZXJgIG1ldGhv
        ZCwgZXhjZXB0IHRoYXQgaXQKICAgICAgd2FpdHMgZm9yIGFsbCBwcm9taXNl
        cyB0byBiZWNvbWUgZnVsZmlsbGVkIGJlZm9yZSBydW5uaW5nIHRoZSBgZmls
        dGVyRm5gIG9uCiAgICAgIGVhY2ggaXRlbSBpbiBnaXZlbiB0byBgcHJvbWlz
        ZXNgLiBgUlNWUC5maWx0ZXJgIHJldHVybnMgYSBwcm9taXNlIHRoYXQgd2ls
        bAogICAgICBiZWNvbWUgZnVsZmlsbGVkIHdpdGggdGhlIHJlc3VsdCBvZiBy
        dW5uaW5nIGBmaWx0ZXJGbmAgb24gdGhlIHZhbHVlcyB0aGUKICAgICAgcHJv
        bWlzZXMgYmVjb21lIGZ1bGZpbGxlZCB3aXRoLgoKICAgICAgRm9yIGV4YW1w
        bGU6CgogICAgICBgYGBqYXZhc2NyaXB0CgogICAgICB2YXIgcHJvbWlzZTEg
        PSBSU1ZQLnJlc29sdmUoMSk7CiAgICAgIHZhciBwcm9taXNlMiA9IFJTVlAu
        cmVzb2x2ZSgyKTsKICAgICAgdmFyIHByb21pc2UzID0gUlNWUC5yZXNvbHZl
        KDMpOwoKICAgICAgdmFyIGZpbHRlckZuID0gZnVuY3Rpb24oaXRlbSl7CiAg
        ICAgICAgcmV0dXJuIGl0ZW0gPiAxOwogICAgICB9OwoKICAgICAgUlNWUC5m
        aWx0ZXIocHJvbWlzZXMsIGZpbHRlckZuKS50aGVuKGZ1bmN0aW9uKHJlc3Vs
        dCl7CiAgICAgICAgLy8gcmVzdWx0IGlzIFsgMiwgMyBdCiAgICAgIH0pOwog
        ICAgICBgYGAKCiAgICAgIElmIGFueSBvZiB0aGUgYHByb21pc2VzYCBnaXZl
        biB0byBgUlNWUC5maWx0ZXJgIGFyZSByZWplY3RlZCwgdGhlIGZpcnN0IHBy
        b21pc2UKICAgICAgdGhhdCBpcyByZWplY3RlZCB3aWxsIGJlIGdpdmVuIGFz
        IGFuIGFyZ3VtZW50IHRvIHRoZSByZXR1cm5lZCBwcm9taXNlJ3MKICAgICAg
        cmVqZWN0aW9uIGhhbmRsZXIuIEZvciBleGFtcGxlOgoKICAgICAgYGBgamF2
        YXNjcmlwdAogICAgICB2YXIgcHJvbWlzZTEgPSBSU1ZQLnJlc29sdmUoMSk7
        CiAgICAgIHZhciBwcm9taXNlMiA9IFJTVlAucmVqZWN0KG5ldyBFcnJvcigi
        MiIpKTsKICAgICAgdmFyIHByb21pc2UzID0gUlNWUC5yZWplY3QobmV3IEVy
        cm9yKCIzIikpOwogICAgICB2YXIgcHJvbWlzZXMgPSBbIHByb21pc2UxLCBw
        cm9taXNlMiwgcHJvbWlzZTMgXTsKCiAgICAgIHZhciBmaWx0ZXJGbiA9IGZ1
        bmN0aW9uKGl0ZW0pewogICAgICAgIHJldHVybiBpdGVtID4gMTsKICAgICAg
        fTsKCiAgICAgIFJTVlAuZmlsdGVyKHByb21pc2VzLCBmaWx0ZXJGbikudGhl
        bihmdW5jdGlvbihhcnJheSl7CiAgICAgICAgLy8gQ29kZSBoZXJlIG5ldmVy
        IHJ1bnMgYmVjYXVzZSB0aGVyZSBhcmUgcmVqZWN0ZWQgcHJvbWlzZXMhCiAg
        ICAgIH0sIGZ1bmN0aW9uKHJlYXNvbikgewogICAgICAgIC8vIHJlYXNvbi5t
        ZXNzYWdlID09PSAiMiIKICAgICAgfSk7CiAgICAgIGBgYAoKICAgICAgYFJT
        VlAuZmlsdGVyYCB3aWxsIGFsc28gd2FpdCBmb3IgYW55IHByb21pc2VzIHJl
        dHVybmVkIGZyb20gYGZpbHRlckZuYC4KICAgICAgRm9yIGluc3RhbmNlLCB5
        b3UgbWF5IHdhbnQgdG8gZmV0Y2ggYSBsaXN0IG9mIHVzZXJzIHRoZW4gcmV0
        dXJuIGEgc3Vic2V0CiAgICAgIG9mIHRob3NlIHVzZXJzIGJhc2VkIG9uIHNv
        bWUgYXN5bmNocm9ub3VzIG9wZXJhdGlvbjoKCiAgICAgIGBgYGphdmFzY3Jp
        cHQKCiAgICAgIHZhciBhbGljZSA9IHsgbmFtZTogJ2FsaWNlJyB9OwogICAg
        ICB2YXIgYm9iICAgPSB7IG5hbWU6ICdib2InIH07CiAgICAgIHZhciB1c2Vy
        cyA9IFsgYWxpY2UsIGJvYiBdOwoKICAgICAgdmFyIHByb21pc2VzID0gdXNl
        cnMubWFwKGZ1bmN0aW9uKHVzZXIpewogICAgICAgIHJldHVybiBSU1ZQLnJl
        c29sdmUodXNlcik7CiAgICAgIH0pOwoKICAgICAgdmFyIGZpbHRlckZuID0g
        ZnVuY3Rpb24odXNlcil7CiAgICAgICAgLy8gSGVyZSwgQWxpY2UgaGFzIHBl
        cm1pc3Npb25zIHRvIGNyZWF0ZSBhIGJsb2cgcG9zdCwgYnV0IEJvYiBkb2Vz
        IG5vdC4KICAgICAgICByZXR1cm4gZ2V0UHJpdmlsZWdlc0ZvclVzZXIodXNl
        cikudGhlbihmdW5jdGlvbihwcml2cyl7CiAgICAgICAgICByZXR1cm4gcHJp
        dnMuY2FuX2NyZWF0ZV9ibG9nX3Bvc3QgPT09IHRydWU7CiAgICAgICAgfSk7
        CiAgICAgIH07CiAgICAgIFJTVlAuZmlsdGVyKHByb21pc2VzLCBmaWx0ZXJG
        bikudGhlbihmdW5jdGlvbih1c2Vycyl7CiAgICAgICAgLy8gdHJ1ZSwgYmVj
        YXVzZSB0aGUgc2VydmVyIHRvbGQgdXMgb25seSBBbGljZSBjYW4gY3JlYXRl
        IGEgYmxvZyBwb3N0LgogICAgICAgIHVzZXJzLmxlbmd0aCA9PT0gMTsKICAg
        ICAgICAvLyBmYWxzZSwgYmVjYXVzZSBBbGljZSBpcyB0aGUgb25seSB1c2Vy
        IHByZXNlbnQgaW4gYHVzZXJzYAogICAgICAgIHVzZXJzWzBdID09PSBib2I7
        CiAgICAgIH0pOwogICAgICBgYGAKCiAgICAgIEBtZXRob2QgZmlsdGVyCiAg
        ICAgIEBmb3IgUlNWUAogICAgICBAcGFyYW0ge0FycmF5fSBwcm9taXNlcwog
        ICAgICBAcGFyYW0ge0Z1bmN0aW9ufSBmaWx0ZXJGbiAtIGZ1bmN0aW9uIHRv
        IGJlIGNhbGxlZCBvbiBlYWNoIHJlc29sdmVkIHZhbHVlIHRvCiAgICAgIGZp
        bHRlciB0aGUgZmluYWwgcmVzdWx0cy4KICAgICAgQHBhcmFtIHtTdHJpbmd9
        IGxhYmVsIG9wdGlvbmFsIHN0cmluZyBkZXNjcmliaW5nIHRoZSBwcm9taXNl
        LiBVc2VmdWwgZm9yCiAgICAgIHRvb2xpbmcuCiAgICAgIEByZXR1cm4ge1By
        b21pc2V9CiAgICAqLwogICAgZnVuY3Rpb24gZmlsdGVyKHByb21pc2VzLCBm
        aWx0ZXJGbiwgbGFiZWwpIHsKICAgICAgcmV0dXJuIGFsbChwcm9taXNlcywg
        bGFiZWwpLnRoZW4oZnVuY3Rpb24odmFsdWVzKXsKICAgICAgICBpZiAoIWlz
        QXJyYXkocHJvbWlzZXMpKSB7CiAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVy
        cm9yKCdZb3UgbXVzdCBwYXNzIGFuIGFycmF5IHRvIGZpbHRlci4nKTsKICAg
        ICAgICB9CgogICAgICAgIGlmICghaXNGdW5jdGlvbihmaWx0ZXJGbikpewog
        ICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigiWW91IG11c3QgcGFzcyBh
        IGZ1bmN0aW9uIHRvIGZpbHRlcidzIHNlY29uZCBhcmd1bWVudC4iKTsKICAg
        ICAgICB9CgogICAgICAgIHJldHVybiBtYXAocHJvbWlzZXMsIGZpbHRlckZu
        LCBsYWJlbCkudGhlbihmdW5jdGlvbihmaWx0ZXJSZXN1bHRzKXsKICAgICAg
        ICAgICB2YXIgaSwKICAgICAgICAgICAgICAgdmFsdWVzTGVuID0gdmFsdWVz
        Lmxlbmd0aCwKICAgICAgICAgICAgICAgZmlsdGVyZWQgPSBbXTsKCiAgICAg
        ICAgICAgZm9yIChpID0gMDsgaSA8IHZhbHVlc0xlbjsgaSsrKXsKICAgICAg
        ICAgICAgIGlmKGZpbHRlclJlc3VsdHNbaV0pIGZpbHRlcmVkLnB1c2godmFs
        dWVzW2ldKTsKICAgICAgICAgICB9CiAgICAgICAgICAgcmV0dXJuIGZpbHRl
        cmVkOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0KCiAgICBfX2V4cG9y
        dHNfX1siZGVmYXVsdCJdID0gZmlsdGVyOwogIH0pOwpkZWZpbmUoInJzdnAv
        aGFzaCIsIAogIFsiLi9wcm9taXNlIiwiLi91dGlscyIsImV4cG9ydHMiXSwK
        ICBmdW5jdGlvbihfX2RlcGVuZGVuY3kxX18sIF9fZGVwZW5kZW5jeTJfXywg
        X19leHBvcnRzX18pIHsKICAgICJ1c2Ugc3RyaWN0IjsKICAgIHZhciBQcm9t
        aXNlID0gX19kZXBlbmRlbmN5MV9fWyJkZWZhdWx0Il07CiAgICB2YXIgaXNO
        b25UaGVuYWJsZSA9IF9fZGVwZW5kZW5jeTJfXy5pc05vblRoZW5hYmxlOwog
        ICAgdmFyIGtleXNPZiA9IF9fZGVwZW5kZW5jeTJfXy5rZXlzT2Y7CgogICAg
        LyoqCiAgICAgIGBSU1ZQLmhhc2hgIGlzIHNpbWlsYXIgdG8gYFJTVlAuYWxs
        YCwgYnV0IHRha2VzIGFuIG9iamVjdCBpbnN0ZWFkIG9mIGFuIGFycmF5CiAg
        ICAgIGZvciBpdHMgYHByb21pc2VzYCBhcmd1bWVudC4KCiAgICAgIFJldHVy
        bnMgYSBwcm9taXNlIHRoYXQgaXMgZnVsZmlsbGVkIHdoZW4gYWxsIHRoZSBn
        aXZlbiBwcm9taXNlcyBoYXZlIGJlZW4KICAgICAgZnVsZmlsbGVkLCBvciBy
        ZWplY3RlZCBpZiBhbnkgb2YgdGhlbSBiZWNvbWUgcmVqZWN0ZWQuIFRoZSBy
        ZXR1cm5lZCBwcm9taXNlCiAgICAgIGlzIGZ1bGZpbGxlZCB3aXRoIGEgaGFz
        aCB0aGF0IGhhcyB0aGUgc2FtZSBrZXkgbmFtZXMgYXMgdGhlIGBwcm9taXNl
        c2Agb2JqZWN0CiAgICAgIGFyZ3VtZW50LiBJZiBhbnkgb2YgdGhlIHZhbHVl
        cyBpbiB0aGUgb2JqZWN0IGFyZSBub3QgcHJvbWlzZXMsIHRoZXkgd2lsbAog
        ICAgICBzaW1wbHkgYmUgY29waWVkIG92ZXIgdG8gdGhlIGZ1bGZpbGxlZCBv
        YmplY3QuCgogICAgICBFeGFtcGxlOgoKICAgICAgYGBgamF2YXNjcmlwdAog
        ICAgICB2YXIgcHJvbWlzZXMgPSB7CiAgICAgICAgbXlQcm9taXNlOiBSU1ZQ
        LnJlc29sdmUoMSksCiAgICAgICAgeW91clByb21pc2U6IFJTVlAucmVzb2x2
        ZSgyKSwKICAgICAgICB0aGVpclByb21pc2U6IFJTVlAucmVzb2x2ZSgzKSwK
        ICAgICAgICBub3RBUHJvbWlzZTogNAogICAgICB9OwoKICAgICAgUlNWUC5o
        YXNoKHByb21pc2VzKS50aGVuKGZ1bmN0aW9uKGhhc2gpewogICAgICAgIC8v
        IGhhc2ggaGVyZSBpcyBhbiBvYmplY3QgdGhhdCBsb29rcyBsaWtlOgogICAg
        ICAgIC8vIHsKICAgICAgICAvLyAgIG15UHJvbWlzZTogMSwKICAgICAgICAv
        LyAgIHlvdXJQcm9taXNlOiAyLAogICAgICAgIC8vICAgdGhlaXJQcm9taXNl
        OiAzLAogICAgICAgIC8vICAgbm90QVByb21pc2U6IDQKICAgICAgICAvLyB9
        CiAgICAgIH0pOwogICAgICBgYGBgCgogICAgICBJZiBhbnkgb2YgdGhlIGBw
        cm9taXNlc2AgZ2l2ZW4gdG8gYFJTVlAuaGFzaGAgYXJlIHJlamVjdGVkLCB0
        aGUgZmlyc3QgcHJvbWlzZQogICAgICB0aGF0IGlzIHJlamVjdGVkIHdpbGwg
        YmUgZ2l2ZW4gYXMgdGhlIHJlYXNvbiB0byB0aGUgcmVqZWN0aW9uIGhhbmRs
        ZXIuCgogICAgICBFeGFtcGxlOgoKICAgICAgYGBgamF2YXNjcmlwdAogICAg
        ICB2YXIgcHJvbWlzZXMgPSB7CiAgICAgICAgbXlQcm9taXNlOiBSU1ZQLnJl
        c29sdmUoMSksCiAgICAgICAgcmVqZWN0ZWRQcm9taXNlOiBSU1ZQLnJlamVj
        dChuZXcgRXJyb3IoInJlamVjdGVkUHJvbWlzZSIpKSwKICAgICAgICBhbm90
        aGVyUmVqZWN0ZWRQcm9taXNlOiBSU1ZQLnJlamVjdChuZXcgRXJyb3IoImFu
        b3RoZXJSZWplY3RlZFByb21pc2UiKSksCiAgICAgIH07CgogICAgICBSU1ZQ
        Lmhhc2gocHJvbWlzZXMpLnRoZW4oZnVuY3Rpb24oaGFzaCl7CiAgICAgICAg
        Ly8gQ29kZSBoZXJlIG5ldmVyIHJ1bnMgYmVjYXVzZSB0aGVyZSBhcmUgcmVq
        ZWN0ZWQgcHJvbWlzZXMhCiAgICAgIH0sIGZ1bmN0aW9uKHJlYXNvbikgewog
        ICAgICAgIC8vIHJlYXNvbi5tZXNzYWdlID09PSAicmVqZWN0ZWRQcm9taXNl
        IgogICAgICB9KTsKICAgICAgYGBgCgogICAgICBBbiBpbXBvcnRhbnQgbm90
        ZTogYFJTVlAuaGFzaGAgaXMgaW50ZW5kZWQgZm9yIHBsYWluIEphdmFTY3Jp
        cHQgb2JqZWN0cyB0aGF0CiAgICAgIGFyZSBqdXN0IGEgc2V0IG9mIGtleXMg
        YW5kIHZhbHVlcy4gYFJTVlAuaGFzaGAgd2lsbCBOT1QgcHJlc2VydmUgcHJv
        dG90eXBlCiAgICAgIGNoYWlucy4KCiAgICAgIEV4YW1wbGU6CgogICAgICBg
        YGBqYXZhc2NyaXB0CiAgICAgIGZ1bmN0aW9uIE15Q29uc3RydWN0b3IoKXsK
        ICAgICAgICB0aGlzLmV4YW1wbGUgPSBSU1ZQLnJlc29sdmUoIkV4YW1wbGUi
        KTsKICAgICAgfQoKICAgICAgTXlDb25zdHJ1Y3Rvci5wcm90b3R5cGUgPSB7
        CiAgICAgICAgcHJvdG9Qcm9wZXJ0eTogUlNWUC5yZXNvbHZlKCJQcm90byBQ
        cm9wZXJ0eSIpCiAgICAgIH07CgogICAgICB2YXIgbXlPYmplY3QgPSBuZXcg
        TXlDb25zdHJ1Y3RvcigpOwoKICAgICAgUlNWUC5oYXNoKG15T2JqZWN0KS50
        aGVuKGZ1bmN0aW9uKGhhc2gpewogICAgICAgIC8vIHByb3RvUHJvcGVydHkg
        d2lsbCBub3QgYmUgcHJlc2VudCwgaW5zdGVhZCB5b3Ugd2lsbCBqdXN0IGhh
        dmUgYW4KICAgICAgICAvLyBvYmplY3QgdGhhdCBsb29rcyBsaWtlOgogICAg
        ICAgIC8vIHsKICAgICAgICAvLyAgIGV4YW1wbGU6ICJFeGFtcGxlIgogICAg
        ICAgIC8vIH0KICAgICAgICAvLwogICAgICAgIC8vIGhhc2guaGFzT3duUHJv
        cGVydHkoJ3Byb3RvUHJvcGVydHknKTsgLy8gZmFsc2UKICAgICAgICAvLyAn
        dW5kZWZpbmVkJyA9PT0gdHlwZW9mIGhhc2gucHJvdG9Qcm9wZXJ0eQogICAg
        ICB9KTsKICAgICAgYGBgCgogICAgICBAbWV0aG9kIGhhc2gKICAgICAgQGZv
        ciBSU1ZQCiAgICAgIEBwYXJhbSB7T2JqZWN0fSBwcm9taXNlcwogICAgICBA
        cGFyYW0ge1N0cmluZ30gbGFiZWwgb3B0aW9uYWwgc3RyaW5nIHRoYXQgZGVz
        Y3JpYmVzIHRoZSBwcm9taXNlLgogICAgICBVc2VmdWwgZm9yIHRvb2xpbmcu
        CiAgICAgIEByZXR1cm4ge1Byb21pc2V9IHByb21pc2UgdGhhdCBpcyBmdWxm
        aWxsZWQgd2hlbiBhbGwgcHJvcGVydGllcyBvZiBgcHJvbWlzZXNgCiAgICAg
        IGhhdmUgYmVlbiBmdWxmaWxsZWQsIG9yIHJlamVjdGVkIGlmIGFueSBvZiB0
        aGVtIGJlY29tZSByZWplY3RlZC4KICAgICAgQHN0YXRpYwogICAgKi8KICAg
        IF9fZXhwb3J0c19fWyJkZWZhdWx0Il0gPSBmdW5jdGlvbiBoYXNoKG9iamVj
        dCwgbGFiZWwpIHsKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9u
        KHJlc29sdmUsIHJlamVjdCl7CiAgICAgICAgdmFyIHJlc3VsdHMgPSB7fTsK
        ICAgICAgICB2YXIga2V5cyA9IGtleXNPZihvYmplY3QpOwogICAgICAgIHZh
        ciByZW1haW5pbmcgPSBrZXlzLmxlbmd0aDsKICAgICAgICB2YXIgZW50cnks
        IHByb3BlcnR5OwoKICAgICAgICBpZiAocmVtYWluaW5nID09PSAwKSB7CiAg
        ICAgICAgICByZXNvbHZlKHJlc3VsdHMpOwogICAgICAgICAgcmV0dXJuOwog
        ICAgICAgIH0KCiAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWRUbyhwcm9wZXJ0
        eSkgewogICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHZhbHVlKSB7CiAgICAg
        ICAgICAgIHJlc3VsdHNbcHJvcGVydHldID0gdmFsdWU7CiAgICAgICAgICAg
        IGlmICgtLXJlbWFpbmluZyA9PT0gMCkgewogICAgICAgICAgICAgIHJlc29s
        dmUocmVzdWx0cyk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH07CiAgICAg
        ICAgfQoKICAgICAgICBmdW5jdGlvbiBvblJlamVjdGlvbihyZWFzb24pIHsK
        ICAgICAgICAgIHJlbWFpbmluZyA9IDA7CiAgICAgICAgICByZWplY3QocmVh
        c29uKTsKICAgICAgICB9CgogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwg
        a2V5cy5sZW5ndGg7IGkrKykgewogICAgICAgICAgcHJvcGVydHkgPSBrZXlz
        W2ldOwogICAgICAgICAgZW50cnkgPSBvYmplY3RbcHJvcGVydHldOwoKICAg
        ICAgICAgIGlmIChpc05vblRoZW5hYmxlKGVudHJ5KSkgewogICAgICAgICAg
        ICByZXN1bHRzW3Byb3BlcnR5XSA9IGVudHJ5OwogICAgICAgICAgICBpZiAo
        LS1yZW1haW5pbmcgPT09IDApIHsKICAgICAgICAgICAgICByZXNvbHZlKHJl
        c3VsdHMpOwogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgewogICAg
        ICAgICAgICBQcm9taXNlLmNhc3QoZW50cnkpLnRoZW4oZnVsZmlsbGVkVG8o
        cHJvcGVydHkpLCBvblJlamVjdGlvbik7CiAgICAgICAgICB9CiAgICAgICAg
        fQogICAgICB9KTsKICAgIH07CiAgfSk7CmRlZmluZSgicnN2cC9pbnN0cnVt
        ZW50IiwgCiAgWyIuL2NvbmZpZyIsIi4vdXRpbHMiLCJleHBvcnRzIl0sCiAg
        ZnVuY3Rpb24oX19kZXBlbmRlbmN5MV9fLCBfX2RlcGVuZGVuY3kyX18sIF9f
        ZXhwb3J0c19fKSB7CiAgICAidXNlIHN0cmljdCI7CiAgICB2YXIgY29uZmln
        ID0gX19kZXBlbmRlbmN5MV9fLmNvbmZpZzsKICAgIHZhciBub3cgPSBfX2Rl
        cGVuZGVuY3kyX18ubm93OwoKICAgIF9fZXhwb3J0c19fWyJkZWZhdWx0Il0g
        PSBmdW5jdGlvbiBpbnN0cnVtZW50KGV2ZW50TmFtZSwgcHJvbWlzZSwgY2hp
        bGQpIHsKICAgICAgLy8gaW5zdHJ1bWVudGF0aW9uIHNob3VsZCBub3QgZGlz
        cnVwdCBub3JtYWwgdXNhZ2UuCiAgICAgIHRyeSB7CiAgICAgICAgY29uZmln
        LnRyaWdnZXIoZXZlbnROYW1lLCB7CiAgICAgICAgICBndWlkOiBwcm9taXNl
        Ll9ndWlkS2V5ICsgcHJvbWlzZS5faWQsCiAgICAgICAgICBldmVudE5hbWU6
        IGV2ZW50TmFtZSwKICAgICAgICAgIGRldGFpbDogcHJvbWlzZS5fZGV0YWls
        LAogICAgICAgICAgY2hpbGRHdWlkOiBjaGlsZCAmJiBwcm9taXNlLl9ndWlk
        S2V5ICsgY2hpbGQuX2lkLAogICAgICAgICAgbGFiZWw6IHByb21pc2UuX2xh
        YmVsLAogICAgICAgICAgdGltZVN0YW1wOiBub3coKSwKICAgICAgICAgIHN0
        YWNrOiBuZXcgRXJyb3IocHJvbWlzZS5fbGFiZWwpLnN0YWNrCiAgICAgICAg
        fSk7CiAgICAgIH0gY2F0Y2goZXJyb3IpIHsKICAgICAgICBzZXRUaW1lb3V0
        KGZ1bmN0aW9uKCl7CiAgICAgICAgICB0aHJvdyBlcnJvcjsKICAgICAgICB9
        LCAwKTsKICAgICAgfQogICAgfTsKICB9KTsKZGVmaW5lKCJyc3ZwL21hcCIs
        IAogIFsiLi9wcm9taXNlIiwiLi9hbGwiLCIuL3V0aWxzIiwiZXhwb3J0cyJd
        LAogIGZ1bmN0aW9uKF9fZGVwZW5kZW5jeTFfXywgX19kZXBlbmRlbmN5Ml9f
        LCBfX2RlcGVuZGVuY3kzX18sIF9fZXhwb3J0c19fKSB7CiAgICAidXNlIHN0
        cmljdCI7CiAgICB2YXIgUHJvbWlzZSA9IF9fZGVwZW5kZW5jeTFfX1siZGVm
        YXVsdCJdOwogICAgdmFyIGFsbCA9IF9fZGVwZW5kZW5jeTJfX1siZGVmYXVs
        dCJdOwogICAgdmFyIGlzQXJyYXkgPSBfX2RlcGVuZGVuY3kzX18uaXNBcnJh
        eTsKICAgIHZhciBpc0Z1bmN0aW9uID0gX19kZXBlbmRlbmN5M19fLmlzRnVu
        Y3Rpb247CgogICAgLyoqCiAgICAgYFJTVlAubWFwYCBpcyBzaW1pbGFyIHRv
        IEphdmFTY3JpcHQncyBuYXRpdmUgYG1hcGAgbWV0aG9kLCBleGNlcHQgdGhh
        dCBpdAogICAgICB3YWl0cyBmb3IgYWxsIHByb21pc2VzIHRvIGJlY29tZSBm
        dWxmaWxsZWQgYmVmb3JlIHJ1bm5pbmcgdGhlIGBtYXBGbmAgb24KICAgICAg
        ZWFjaCBpdGVtIGluIGdpdmVuIHRvIGBwcm9taXNlc2AuIGBSU1ZQLm1hcGAg
        cmV0dXJucyBhIHByb21pc2UgdGhhdCB3aWxsCiAgICAgIGJlY29tZSBmdWxm
        aWxsZWQgd2l0aCB0aGUgcmVzdWx0IG9mIHJ1bm5pbmcgYG1hcEZuYCBvbiB0
        aGUgdmFsdWVzIHRoZSBwcm9taXNlcwogICAgICBiZWNvbWUgZnVsZmlsbGVk
        IHdpdGguCgogICAgICBGb3IgZXhhbXBsZToKCiAgICAgIGBgYGphdmFzY3Jp
        cHQKCiAgICAgIHZhciBwcm9taXNlMSA9IFJTVlAucmVzb2x2ZSgxKTsKICAg
        ICAgdmFyIHByb21pc2UyID0gUlNWUC5yZXNvbHZlKDIpOwogICAgICB2YXIg
        cHJvbWlzZTMgPSBSU1ZQLnJlc29sdmUoMyk7CiAgICAgIHZhciBwcm9taXNl
        cyA9IFsgcHJvbWlzZTEsIHByb21pc2UyLCBwcm9taXNlMyBdOwoKICAgICAg
        dmFyIG1hcEZuID0gZnVuY3Rpb24oaXRlbSl7CiAgICAgICAgcmV0dXJuIGl0
        ZW0gKyAxOwogICAgICB9OwoKICAgICAgUlNWUC5tYXAocHJvbWlzZXMsIG1h
        cEZuKS50aGVuKGZ1bmN0aW9uKHJlc3VsdCl7CiAgICAgICAgLy8gcmVzdWx0
        IGlzIFsgMiwgMywgNCBdCiAgICAgIH0pOwogICAgICBgYGAKCiAgICAgIElm
        IGFueSBvZiB0aGUgYHByb21pc2VzYCBnaXZlbiB0byBgUlNWUC5tYXBgIGFy
        ZSByZWplY3RlZCwgdGhlIGZpcnN0IHByb21pc2UKICAgICAgdGhhdCBpcyBy
        ZWplY3RlZCB3aWxsIGJlIGdpdmVuIGFzIGFuIGFyZ3VtZW50IHRvIHRoZSBy
        ZXR1cm5lZCBwcm9taXNlJ3MKICAgICAgcmVqZWN0aW9uIGhhbmRsZXIuIEZv
        ciBleGFtcGxlOgoKICAgICAgYGBgamF2YXNjcmlwdAogICAgICB2YXIgcHJv
        bWlzZTEgPSBSU1ZQLnJlc29sdmUoMSk7CiAgICAgIHZhciBwcm9taXNlMiA9
        IFJTVlAucmVqZWN0KG5ldyBFcnJvcigiMiIpKTsKICAgICAgdmFyIHByb21p
        c2UzID0gUlNWUC5yZWplY3QobmV3IEVycm9yKCIzIikpOwogICAgICB2YXIg
        cHJvbWlzZXMgPSBbIHByb21pc2UxLCBwcm9taXNlMiwgcHJvbWlzZTMgXTsK
        CiAgICAgIHZhciBtYXBGbiA9IGZ1bmN0aW9uKGl0ZW0pewogICAgICAgIHJl
        dHVybiBpdGVtICsgMTsKICAgICAgfTsKCiAgICAgIFJTVlAubWFwKHByb21p
        c2VzLCBtYXBGbikudGhlbihmdW5jdGlvbihhcnJheSl7CiAgICAgICAgLy8g
        Q29kZSBoZXJlIG5ldmVyIHJ1bnMgYmVjYXVzZSB0aGVyZSBhcmUgcmVqZWN0
        ZWQgcHJvbWlzZXMhCiAgICAgIH0sIGZ1bmN0aW9uKHJlYXNvbikgewogICAg
        ICAgIC8vIHJlYXNvbi5tZXNzYWdlID09PSAiMiIKICAgICAgfSk7CiAgICAg
        IGBgYAoKICAgICAgYFJTVlAubWFwYCB3aWxsIGFsc28gd2FpdCBpZiBhIHBy
        b21pc2UgaXMgcmV0dXJuZWQgZnJvbSBgbWFwRm5gLiBGb3IgZXhhbXBsZSwK
        ICAgICAgc2F5IHlvdSB3YW50IHRvIGdldCBhbGwgY29tbWVudHMgZnJvbSBh
        IHNldCBvZiBibG9nIHBvc3RzLCBidXQgeW91IG5lZWQKICAgICAgdGhlIGJs
        b2cgcG9zdHMgZmlyc3QgYmVjdWFzZSB0aGV5IGNvbnRhaW4gYSB1cmwgdG8g
        dGhvc2UgY29tbWVudHMuCgogICAgICBgYGBqYXZzY3JpcHQKCiAgICAgIHZh
        ciBtYXBGbiA9IGZ1bmN0aW9uKGJsb2dQb3N0KXsKICAgICAgICAvLyBnZXRD
        b21tZW50cyBkb2VzIHNvbWUgYWpheCBhbmQgcmV0dXJucyBhbiBSU1ZQLlBy
        b21pc2UgdGhhdCBpcyBmdWxmaWxsZWQKICAgICAgICAvLyB3aXRoIHNvbWUg
        Y29tbWVudHMgZGF0YQogICAgICAgIHJldHVybiBnZXRDb21tZW50cyhibG9n
        UG9zdC5jb21tZW50c191cmwpOwogICAgICB9OwoKICAgICAgLy8gZ2V0Qmxv
        Z1Bvc3RzIGRvZXMgc29tZSBhamF4IGFuZCByZXR1cm5zIGFuIFJTVlAuUHJv
        bWlzZSB0aGF0IGlzIGZ1bGZpbGxlZAogICAgICAvLyB3aXRoIHNvbWUgYmxv
        ZyBwb3N0IGRhdGEKICAgICAgUlNWUC5tYXAoZ2V0QmxvZ1Bvc3RzKCksIG1h
        cEZuKS50aGVuKGZ1bmN0aW9uKGNvbW1lbnRzKXsKICAgICAgICAvLyBjb21t
        ZW50cyBpcyB0aGUgcmVzdWx0IG9mIGFza2luZyB0aGUgc2VydmVyIGZvciB0
        aGUgY29tbWVudHMKICAgICAgICAvLyBvZiBhbGwgYmxvZyBwb3N0cyByZXR1
        cm5lZCBmcm9tIGdldEJsb2dQb3N0cygpCiAgICAgIH0pOwogICAgICBgYGAK
        CiAgICAgIEBtZXRob2QgbWFwCiAgICAgIEBmb3IgUlNWUAogICAgICBAcGFy
        YW0ge0FycmF5fSBwcm9taXNlcwogICAgICBAcGFyYW0ge0Z1bmN0aW9ufSBt
        YXBGbiBmdW5jdGlvbiB0byBiZSBjYWxsZWQgb24gZWFjaCBmdWxmaWxsZWQg
        cHJvbWlzZS4KICAgICAgQHBhcmFtIHtTdHJpbmd9IGxhYmVsIG9wdGlvbmFs
        IHN0cmluZyBmb3IgbGFiZWxpbmcgdGhlIHByb21pc2UuCiAgICAgIFVzZWZ1
        bCBmb3IgdG9vbGluZy4KICAgICAgQHJldHVybiB7UHJvbWlzZX0gcHJvbWlz
        ZSB0aGF0IGlzIGZ1bGZpbGxlZCB3aXRoIHRoZSByZXN1bHQgb2YgY2FsbGlu
        ZwogICAgICBgbWFwRm5gIG9uIGVhY2ggZnVsZmlsbGVkIHByb21pc2Ugb3Ig
        dmFsdWUgd2hlbiB0aGV5IGJlY29tZSBmdWxmaWxsZWQuCiAgICAgICBUaGUg
        cHJvbWlzZSB3aWxsIGJlIHJlamVjdGVkIGlmIGFueSBvZiB0aGUgZ2l2ZW4g
        YHByb21pc2VzYCBiZWNvbWUgcmVqZWN0ZWQuCiAgICAgIEBzdGF0aWMKICAg
        ICovCiAgICBfX2V4cG9ydHNfX1siZGVmYXVsdCJdID0gZnVuY3Rpb24gbWFw
        KHByb21pc2VzLCBtYXBGbiwgbGFiZWwpIHsKICAgICAgcmV0dXJuIGFsbChw
        cm9taXNlcywgbGFiZWwpLnRoZW4oZnVuY3Rpb24ocmVzdWx0cyl7CiAgICAg
        ICAgaWYgKCFpc0FycmF5KHByb21pc2VzKSkgewogICAgICAgICAgdGhyb3cg
        bmV3IFR5cGVFcnJvcignWW91IG11c3QgcGFzcyBhbiBhcnJheSB0byBtYXAu
        Jyk7CiAgICAgICAgfQoKICAgICAgICBpZiAoIWlzRnVuY3Rpb24obWFwRm4p
        KXsKICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoIllvdSBtdXN0IHBh
        c3MgYSBmdW5jdGlvbiB0byBtYXAncyBzZWNvbmQgYXJndW1lbnQuIik7CiAg
        ICAgICAgfQoKCiAgICAgICAgdmFyIHJlc3VsdExlbiA9IHJlc3VsdHMubGVu
        Z3RoLAogICAgICAgICAgICBtYXBwZWRSZXN1bHRzID0gW10sCiAgICAgICAg
        ICAgIGk7CgogICAgICAgIGZvciAoaSA9IDA7IGkgPCByZXN1bHRMZW47IGkr
        Kyl7CiAgICAgICAgICBtYXBwZWRSZXN1bHRzLnB1c2gobWFwRm4ocmVzdWx0
        c1tpXSkpOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIGFsbChtYXBwZWRS
        ZXN1bHRzLCBsYWJlbCk7CiAgICAgIH0pOwogICAgfTsKICB9KTsKZGVmaW5l
        KCJyc3ZwL25vZGUiLCAKICBbIi4vcHJvbWlzZSIsImV4cG9ydHMiXSwKICBm
        dW5jdGlvbihfX2RlcGVuZGVuY3kxX18sIF9fZXhwb3J0c19fKSB7CiAgICAi
        dXNlIHN0cmljdCI7CiAgICB2YXIgUHJvbWlzZSA9IF9fZGVwZW5kZW5jeTFf
        X1siZGVmYXVsdCJdOwoKICAgIHZhciBzbGljZSA9IEFycmF5LnByb3RvdHlw
        ZS5zbGljZTsKCiAgICBmdW5jdGlvbiBtYWtlTm9kZUNhbGxiYWNrRm9yKHJl
        c29sdmUsIHJlamVjdCkgewogICAgICByZXR1cm4gZnVuY3Rpb24gKGVycm9y
        LCB2YWx1ZSkgewogICAgICAgIGlmIChlcnJvcikgewogICAgICAgICAgcmVq
        ZWN0KGVycm9yKTsKICAgICAgICB9IGVsc2UgaWYgKGFyZ3VtZW50cy5sZW5n
        dGggPiAyKSB7CiAgICAgICAgICByZXNvbHZlKHNsaWNlLmNhbGwoYXJndW1l
        bnRzLCAxKSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJlc29sdmUo
        dmFsdWUpOwogICAgICAgIH0KICAgICAgfTsKICAgIH0KCiAgICAvKioKICAg
        ICAgYFJTVlAuZGVub2RlaWZ5YCB0YWtlcyBhICJub2RlLXN0eWxlIiBmdW5j
        dGlvbiBhbmQgcmV0dXJucyBhIGZ1bmN0aW9uIHRoYXQKICAgICAgd2lsbCBy
        ZXR1cm4gYW4gYFJTVlAuUHJvbWlzZWAuIFlvdSBjYW4gdXNlIGBkZW5vZGVp
        ZnlgIGluIE5vZGUuanMgb3IgdGhlCiAgICAgIGJyb3dzZXIgd2hlbiB5b3Un
        ZCBwcmVmZXIgdG8gdXNlIHByb21pc2VzIG92ZXIgdXNpbmcgY2FsbGJhY2tz
        LiBGb3IgZXhhbXBsZSwKICAgICAgYGRlbm9kZWlmeWAgdHJhbnNmb3JtcyB0
        aGUgZm9sbG93aW5nOgoKICAgICAgYGBgamF2YXNjcmlwdAogICAgICB2YXIg
        ZnMgPSByZXF1aXJlKCdmcycpOwoKICAgICAgZnMucmVhZEZpbGUoJ215Zmls
        ZS50eHQnLCBmdW5jdGlvbihlcnIsIGRhdGEpewogICAgICAgIGlmIChlcnIp
        IHJldHVybiBoYW5kbGVFcnJvcihlcnIpOwogICAgICAgIGhhbmRsZURhdGEo
        ZGF0YSk7CiAgICAgIH0pOwogICAgICBgYGAKCiAgICAgIGludG86CgogICAg
        ICBgYGBqYXZhc2NyaXB0CiAgICAgIHZhciBmcyA9IHJlcXVpcmUoJ2ZzJyk7
        CgogICAgICB2YXIgcmVhZEZpbGUgPSBSU1ZQLmRlbm9kZWlmeShmcy5yZWFk
        RmlsZSk7CgogICAgICByZWFkRmlsZSgnbXlmaWxlLnR4dCcpLnRoZW4oaGFu
        ZGxlRGF0YSwgaGFuZGxlRXJyb3IpOwogICAgICBgYGAKCiAgICAgIFVzaW5n
        IGBkZW5vZGVpZnlgIG1ha2VzIGl0IGVhc2llciB0byBjb21wb3NlIGFzeW5j
        aHJvbm91cyBvcGVyYXRpb25zIGluc3RlYWQKICAgICAgb2YgdXNpbmcgY2Fs
        bGJhY2tzLiBGb3IgZXhhbXBsZSwgaW5zdGVhZCBvZjoKCiAgICAgIGBgYGph
        dmFzY3JpcHQKICAgICAgdmFyIGZzID0gcmVxdWlyZSgnZnMnKTsKICAgICAg
        dmFyIGxvZyA9IHJlcXVpcmUoJ3NvbWUtYXN5bmMtbG9nZ2VyJyk7CgogICAg
        ICBmcy5yZWFkRmlsZSgnbXlmaWxlLnR4dCcsIGZ1bmN0aW9uKGVyciwgZGF0
        YSl7CiAgICAgICAgaWYgKGVycikgcmV0dXJuIGhhbmRsZUVycm9yKGVycik7
        CiAgICAgICAgZnMud3JpdGVGaWxlKCdteWZpbGUyLnR4dCcsIGRhdGEsIGZ1
        bmN0aW9uKGVycil7CiAgICAgICAgICBpZiAoZXJyKSB0aHJvdyBlcnI7CiAg
        ICAgICAgICBsb2coJ3N1Y2Nlc3MnLCBmdW5jdGlvbihlcnIpIHsKICAgICAg
        ICAgICAgaWYgKGVycikgdGhyb3cgZXJyOwogICAgICAgICAgfSk7CiAgICAg
        ICAgfSk7CiAgICAgIH0pOwogICAgICBgYGAKCiAgICAgIFlvdSBjYW4gY2hh
        aW4gdGhlIG9wZXJhdGlvbnMgdG9nZXRoZXIgdXNpbmcgYHRoZW5gIGZyb20g
        dGhlIHJldHVybmVkIHByb21pc2U6CgogICAgICBgYGBqYXZhc2NyaXB0CiAg
        ICAgIHZhciBmcyA9IHJlcXVpcmUoJ2ZzJyk7CiAgICAgIHZhciBkZW5vZGVp
        ZnkgPSBSU1ZQLmRlbm9kZWlmeTsKICAgICAgdmFyIHJlYWRGaWxlID0gZGVu
        b2RlaWZ5KGZzLnJlYWRGaWxlKTsKICAgICAgdmFyIHdyaXRlRmlsZSA9IGRl
        bm9kZWlmeShmcy53cml0ZUZpbGUpOwogICAgICB2YXIgbG9nID0gZGVub2Rl
        aWZ5KHJlcXVpcmUoJ3NvbWUtYXN5bmMtbG9nZ2VyJykpOwoKICAgICAgcmVh
        ZEZpbGUoJ215ZmlsZS50eHQnKS50aGVuKGZ1bmN0aW9uKGRhdGEpewogICAg
        ICAgIHJldHVybiB3cml0ZUZpbGUoJ215ZmlsZTIudHh0JywgZGF0YSk7CiAg
        ICAgIH0pLnRoZW4oZnVuY3Rpb24oKXsKICAgICAgICByZXR1cm4gbG9nKCdT
        VUNDRVNTJyk7CiAgICAgIH0pLnRoZW4oZnVuY3Rpb24oKXsKICAgICAgICAv
        LyBzdWNjZXNzIGhhbmRsZXIKICAgICAgfSwgZnVuY3Rpb24ocmVhc29uKXsK
        ICAgICAgICAvLyByZWplY3Rpb24gaGFuZGxlcgogICAgICB9KTsKICAgICAg
        YGBgCgogICAgICBAbWV0aG9kIGRlbm9kZWlmeQogICAgICBAZm9yIFJTVlAK
        ICAgICAgQHBhcmFtIHtGdW5jdGlvbn0gbm9kZUZ1bmMgYSAibm9kZS1zdHls
        ZSIgZnVuY3Rpb24gdGhhdCB0YWtlcyBhIGNhbGxiYWNrIGFzCiAgICAgIGl0
        cyBsYXN0IGFyZ3VtZW50LiBUaGUgY2FsbGJhY2sgZXhwZWN0cyBhbiBlcnJv
        ciB0byBiZSBwYXNzZWQgYXMgaXRzIGZpcnN0CiAgICAgIGFyZ3VtZW50IChp
        ZiBhbiBlcnJvciBvY2N1cnJlZCwgb3RoZXJ3aXNlIG51bGwpLCBhbmQgdGhl
        IHZhbHVlIGZyb20gdGhlCiAgICAgIG9wZXJhdGlvbiBhcyBpdHMgc2Vjb25k
        IGFyZ3VtZW50ICgiZnVuY3Rpb24oZXJyLCB2YWx1ZSl7IH0iKS4KICAgICAg
        QHBhcmFtIHtBbnl9IGJpbmRpbmcgb3B0aW9uYWwgYXJndW1lbnQgZm9yIGJp
        bmRpbmcgdGhlICJ0aGlzIiB2YWx1ZSB3aGVuCiAgICAgIGNhbGxpbmcgdGhl
        IGBub2RlRnVuY2AgZnVuY3Rpb24uCiAgICAgIEByZXR1cm4ge0Z1bmN0aW9u
        fSBhIGZ1bmN0aW9uIHRoYXQgd3JhcHMgYG5vZGVGdW5jYCB0byByZXR1cm4g
        YW4KICAgICAgYFJTVlAuUHJvbWlzZWAKICAgICAgQHN0YXRpYwogICAgKi8K
        ICAgIF9fZXhwb3J0c19fWyJkZWZhdWx0Il0gPSBmdW5jdGlvbiBkZW5vZGVp
        Znkobm9kZUZ1bmMsIGJpbmRpbmcpIHsKICAgICAgcmV0dXJuIGZ1bmN0aW9u
        KCkgIHsKICAgICAgICB2YXIgbm9kZUFyZ3MgPSBzbGljZS5jYWxsKGFyZ3Vt
        ZW50cyksIHJlc29sdmUsIHJlamVjdDsKICAgICAgICB2YXIgdGhpc0FyZyA9
        IHRoaXMgfHwgYmluZGluZzsKCiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNl
        KGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgICAgUHJvbWlz
        ZS5hbGwobm9kZUFyZ3MpLnRoZW4oZnVuY3Rpb24obm9kZUFyZ3MpIHsKICAg
        ICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICBub2RlQXJncy5wdXNoKG1h
        a2VOb2RlQ2FsbGJhY2tGb3IocmVzb2x2ZSwgcmVqZWN0KSk7CiAgICAgICAg
        ICAgICAgbm9kZUZ1bmMuYXBwbHkodGhpc0FyZywgbm9kZUFyZ3MpOwogICAg
        ICAgICAgICB9IGNhdGNoKGUpIHsKICAgICAgICAgICAgICByZWplY3QoZSk7
        CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAg
        ICB9OwogICAgfTsKICB9KTsKZGVmaW5lKCJyc3ZwL3Byb21pc2UiLCAKICBb
        Ii4vY29uZmlnIiwiLi9ldmVudHMiLCIuL2luc3RydW1lbnQiLCIuL3V0aWxz
        IiwiLi9wcm9taXNlL2Nhc3QiLCIuL3Byb21pc2UvYWxsIiwiLi9wcm9taXNl
        L3JhY2UiLCIuL3Byb21pc2UvcmVzb2x2ZSIsIi4vcHJvbWlzZS9yZWplY3Qi
        LCJleHBvcnRzIl0sCiAgZnVuY3Rpb24oX19kZXBlbmRlbmN5MV9fLCBfX2Rl
        cGVuZGVuY3kyX18sIF9fZGVwZW5kZW5jeTNfXywgX19kZXBlbmRlbmN5NF9f
        LCBfX2RlcGVuZGVuY3k1X18sIF9fZGVwZW5kZW5jeTZfXywgX19kZXBlbmRl
        bmN5N19fLCBfX2RlcGVuZGVuY3k4X18sIF9fZGVwZW5kZW5jeTlfXywgX19l
        eHBvcnRzX18pIHsKICAgICJ1c2Ugc3RyaWN0IjsKICAgIHZhciBjb25maWcg
        PSBfX2RlcGVuZGVuY3kxX18uY29uZmlnOwogICAgdmFyIEV2ZW50VGFyZ2V0
        ID0gX19kZXBlbmRlbmN5Ml9fWyJkZWZhdWx0Il07CiAgICB2YXIgaW5zdHJ1
        bWVudCA9IF9fZGVwZW5kZW5jeTNfX1siZGVmYXVsdCJdOwogICAgdmFyIG9i
        amVjdE9yRnVuY3Rpb24gPSBfX2RlcGVuZGVuY3k0X18ub2JqZWN0T3JGdW5j
        dGlvbjsKICAgIHZhciBpc0Z1bmN0aW9uID0gX19kZXBlbmRlbmN5NF9fLmlz
        RnVuY3Rpb247CiAgICB2YXIgbm93ID0gX19kZXBlbmRlbmN5NF9fLm5vdzsK
        ICAgIHZhciBjYXN0ID0gX19kZXBlbmRlbmN5NV9fWyJkZWZhdWx0Il07CiAg
        ICB2YXIgYWxsID0gX19kZXBlbmRlbmN5Nl9fWyJkZWZhdWx0Il07CiAgICB2
        YXIgcmFjZSA9IF9fZGVwZW5kZW5jeTdfX1siZGVmYXVsdCJdOwogICAgdmFy
        IFJlc29sdmUgPSBfX2RlcGVuZGVuY3k4X19bImRlZmF1bHQiXTsKICAgIHZh
        ciBSZWplY3QgPSBfX2RlcGVuZGVuY3k5X19bImRlZmF1bHQiXTsKCiAgICB2
        YXIgZ3VpZEtleSA9ICdyc3ZwXycgKyBub3coKSArICctJzsKICAgIHZhciBj
        b3VudGVyID0gMDsKCiAgICBmdW5jdGlvbiBub29wKCkge30KCiAgICBfX2V4
        cG9ydHNfX1siZGVmYXVsdCJdID0gUHJvbWlzZTsKCgogICAgLyoqCiAgICAg
        IFByb21pc2Ugb2JqZWN0cyByZXByZXNlbnQgdGhlIGV2ZW50dWFsIHJlc3Vs
        dCBvZiBhbiBhc3luY2hyb25vdXMgb3BlcmF0aW9uLiBUaGUKICAgICAgcHJp
        bWFyeSB3YXkgb2YgaW50ZXJhY3Rpbmcgd2l0aCBhIHByb21pc2UgaXMgdGhy
        b3VnaCBpdHMgYHRoZW5gIG1ldGhvZCwgd2hpY2gKICAgICAgcmVnaXN0ZXJz
        IGNhbGxiYWNrcyB0byByZWNlaXZlIGVpdGhlciBhIHByb21pc2XigJlzIGV2
        ZW50dWFsIHZhbHVlIG9yIHRoZSByZWFzb24KICAgICAgd2h5IHRoZSBwcm9t
        aXNlIGNhbm5vdCBiZSBmdWxmaWxsZWQuCgogICAgICBUZXJtaW5vbG9neQog
        ICAgICAtLS0tLS0tLS0tLQoKICAgICAgLSBgcHJvbWlzZWAgaXMgYW4gb2Jq
        ZWN0IG9yIGZ1bmN0aW9uIHdpdGggYSBgdGhlbmAgbWV0aG9kIHdob3NlIGJl
        aGF2aW9yIGNvbmZvcm1zIHRvIHRoaXMgc3BlY2lmaWNhdGlvbi4KICAgICAg
        LSBgdGhlbmFibGVgIGlzIGFuIG9iamVjdCBvciBmdW5jdGlvbiB0aGF0IGRl
        ZmluZXMgYSBgdGhlbmAgbWV0aG9kLgogICAgICAtIGB2YWx1ZWAgaXMgYW55
        IGxlZ2FsIEphdmFTY3JpcHQgdmFsdWUgKGluY2x1ZGluZyB1bmRlZmluZWQs
        IGEgdGhlbmFibGUsIG9yIGEgcHJvbWlzZSkuCiAgICAgIC0gYGV4Y2VwdGlv
        bmAgaXMgYSB2YWx1ZSB0aGF0IGlzIHRocm93biB1c2luZyB0aGUgdGhyb3cg
        c3RhdGVtZW50LgogICAgICAtIGByZWFzb25gIGlzIGEgdmFsdWUgdGhhdCBp
        bmRpY2F0ZXMgd2h5IGEgcHJvbWlzZSB3YXMgcmVqZWN0ZWQuCiAgICAgIC0g
        YHNldHRsZWRgIHRoZSBmaW5hbCByZXN0aW5nIHN0YXRlIG9mIGEgcHJvbWlz
        ZSwgZnVsZmlsbGVkIG9yIHJlamVjdGVkLgoKICAgICAgQSBwcm9taXNlIGNh
        biBiZSBpbiBvbmUgb2YgdGhyZWUgc3RhdGVzOiBwZW5kaW5nLCBmdWxmaWxs
        ZWQsIG9yIHJlamVjdGVkLgoKICAgICAgUHJvbWlzZXMgdGhhdCBhcmUgZnVs
        ZmlsbGVkIGhhdmUgYSBmdWxmaWxsbWVudCB2YWx1ZSBhbmQgYXJlIGluIHRo
        ZSBmdWxmaWxsZWQKICAgICAgc3RhdGUuICBQcm9taXNlcyB0aGF0IGFyZSBy
        ZWplY3RlZCBoYXZlIGEgcmVqZWN0aW9uIHJlYXNvbiBhbmQgYXJlIGluIHRo
        ZQogICAgICByZWplY3RlZCBzdGF0ZS4gIEEgZnVsZmlsbG1lbnQgdmFsdWUg
        aXMgbmV2ZXIgYSB0aGVuYWJsZS4gIFNpbWlsYXJseSwgYQogICAgICByZWpl
        Y3Rpb24gcmVhc29uIGlzIG5ldmVyIGEgdGhlbmFibGUuCgogICAgICBQcm9t
        aXNlcyBjYW4gYWxzbyBiZSBzYWlkIHRvICpyZXNvbHZlKiBhIHZhbHVlLiAg
        SWYgdGhpcyB2YWx1ZSBpcyBhbHNvIGEKICAgICAgcHJvbWlzZSwgdGhlbiB0
        aGUgb3JpZ2luYWwgcHJvbWlzZSdzIHNldHRsZWQgc3RhdGUgd2lsbCBtYXRj
        aCB0aGUgdmFsdWUncwogICAgICBzZXR0bGVkIHN0YXRlLiAgU28gYSBwcm9t
        aXNlIHRoYXQgKnJlc29sdmVzKiBhIHByb21pc2UgdGhhdCByZWplY3RzIHdp
        bGwKICAgICAgaXRzZWxmIHJlamVjdCwgYW5kIGEgcHJvbWlzZSB0aGF0ICpy
        ZXNvbHZlcyogYSBwcm9taXNlIHRoYXQgZnVsZmlsbHMgd2lsbAogICAgICBp
        dHNlbGYgZnVsZmlsbC4KCgogICAgICBCYXNpYyBVc2FnZToKICAgICAgLS0t
        LS0tLS0tLS0tCgogICAgICBgYGBqcwogICAgICB2YXIgcHJvbWlzZSA9IG5l
        dyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkgewogICAgICAg
        IC8vIG9uIHN1Y2Nlc3MKICAgICAgICByZXNvbHZlKHZhbHVlKTsKCiAgICAg
        ICAgLy8gb24gZmFpbHVyZQogICAgICAgIHJlamVjdChyZWFzb24pOwogICAg
        ICB9KTsKCiAgICAgIHByb21pc2UudGhlbihmdW5jdGlvbih2YWx1ZSkgewog
        ICAgICAgIC8vIG9uIGZ1bGZpbGxtZW50CiAgICAgIH0sIGZ1bmN0aW9uKHJl
        YXNvbikgewogICAgICAgIC8vIG9uIHJlamVjdGlvbgogICAgICB9KTsKICAg
        ICAgYGBgCgogICAgICBBZHZhbmNlZCBVc2FnZToKICAgICAgLS0tLS0tLS0t
        LS0tLS0tCgogICAgICBQcm9taXNlcyBzaGluZSB3aGVuIGFic3RyYWN0aW5n
        IGF3YXkgYXN5bmNocm9ub3VzIGludGVyYWN0aW9ucyBzdWNoIGFzCiAgICAg
        IGBYTUxIdHRwUmVxdWVzdGBzLgoKICAgICAgYGBganMKICAgICAgZnVuY3Rp
        b24gZ2V0SlNPTih1cmwpIHsKICAgICAgICByZXR1cm4gbmV3IFByb21pc2Uo
        ZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KXsKICAgICAgICAgIHZhciB4aHIg
        PSBuZXcgWE1MSHR0cFJlcXVlc3QoKTsKCiAgICAgICAgICB4aHIub3Blbign
        R0VUJywgdXJsKTsKICAgICAgICAgIHhoci5vbnJlYWR5c3RhdGVjaGFuZ2Ug
        PSBoYW5kbGVyOwogICAgICAgICAgeGhyLnJlc3BvbnNlVHlwZSA9ICdqc29u
        JzsKICAgICAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKCdBY2NlcHQnLCAn
        YXBwbGljYXRpb24vanNvbicpOwogICAgICAgICAgeGhyLnNlbmQoKTsKCiAg
        ICAgICAgICBmdW5jdGlvbiBoYW5kbGVyKCkgewogICAgICAgICAgICBpZiAo
        dGhpcy5yZWFkeVN0YXRlID09PSB0aGlzLkRPTkUpIHsKICAgICAgICAgICAg
        ICBpZiAodGhpcy5zdGF0dXMgPT09IDIwMCkgewogICAgICAgICAgICAgICAg
        cmVzb2x2ZSh0aGlzLnJlc3BvbnNlKTsKICAgICAgICAgICAgICB9IGVsc2Ug
        ewogICAgICAgICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcigiZ2V0SlNPTjog
        YCIgKyB1cmwgKyAiYCBmYWlsZWQgd2l0aCBzdGF0dXM6IFsiICsgdGhpcy5z
        dGF0dXMgKyAiXSIpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQog
        ICAgICAgICAgfTsKICAgICAgICB9KTsKICAgICAgfQoKICAgICAgZ2V0SlNP
        TignL3Bvc3RzLmpzb24nKS50aGVuKGZ1bmN0aW9uKGpzb24pIHsKICAgICAg
        ICAvLyBvbiBmdWxmaWxsbWVudAogICAgICB9LCBmdW5jdGlvbihyZWFzb24p
        IHsKICAgICAgICAvLyBvbiByZWplY3Rpb24KICAgICAgfSk7CiAgICAgIGBg
        YAoKICAgICAgVW5saWtlIGNhbGxiYWNrcywgcHJvbWlzZXMgYXJlIGdyZWF0
        IGNvbXBvc2FibGUgcHJpbWl0aXZlcy4KCiAgICAgIGBgYGpzCiAgICAgIFBy
        b21pc2UuYWxsKFsKICAgICAgICBnZXRKU09OKCcvcG9zdHMnKSwKICAgICAg
        ICBnZXRKU09OKCcvY29tbWVudHMnKQogICAgICBdKS50aGVuKGZ1bmN0aW9u
        KHZhbHVlcyl7CiAgICAgICAgdmFsdWVzWzBdIC8vID0+IHBvc3RzSlNPTgog
        ICAgICAgIHZhbHVlc1sxXSAvLyA9PiBjb21tZW50c0pTT04KCiAgICAgICAg
        cmV0dXJuIHZhbHVlczsKICAgICAgfSk7CiAgICAgIGBgYAoKICAgICAgQGNs
        YXNzIFJTVlAuUHJvbWlzZQogICAgICBAcGFyYW0ge2Z1bmN0aW9ufQogICAg
        ICBAcGFyYW0ge1N0cmluZ30gbGFiZWwgb3B0aW9uYWwgc3RyaW5nIGZvciBs
        YWJlbGluZyB0aGUgcHJvbWlzZS4KICAgICAgVXNlZnVsIGZvciB0b29saW5n
        LgogICAgICBAY29uc3RydWN0b3IKICAgICovCiAgICBmdW5jdGlvbiBQcm9t
        aXNlKHJlc29sdmVyLCBsYWJlbCkgewogICAgICBpZiAoIWlzRnVuY3Rpb24o
        cmVzb2x2ZXIpKSB7CiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignWW91
        IG11c3QgcGFzcyBhIHJlc29sdmVyIGZ1bmN0aW9uIGFzIHRoZSBmaXJzdCBh
        cmd1bWVudCB0byB0aGUgcHJvbWlzZSBjb25zdHJ1Y3RvcicpOwogICAgICB9
        CgogICAgICBpZiAoISh0aGlzIGluc3RhbmNlb2YgUHJvbWlzZSkpIHsKICAg
        ICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCJGYWlsZWQgdG8gY29uc3RydWN0
        ICdQcm9taXNlJzogUGxlYXNlIHVzZSB0aGUgJ25ldycgb3BlcmF0b3IsIHRo
        aXMgb2JqZWN0IGNvbnN0cnVjdG9yIGNhbm5vdCBiZSBjYWxsZWQgYXMgYSBm
        dW5jdGlvbi4iKTsKICAgICAgfQoKICAgICAgdGhpcy5faWQgPSBjb3VudGVy
        Kys7CiAgICAgIHRoaXMuX2xhYmVsID0gbGFiZWw7CiAgICAgIHRoaXMuX3N1
        YnNjcmliZXJzID0gW107CgogICAgICBpZiAoY29uZmlnLmluc3RydW1lbnQp
        IHsKICAgICAgICBpbnN0cnVtZW50KCdjcmVhdGVkJywgdGhpcyk7CiAgICAg
        IH0KCiAgICAgIGlmIChub29wICE9PSByZXNvbHZlcikgewogICAgICAgIGlu
        dm9rZVJlc29sdmVyKHJlc29sdmVyLCB0aGlzKTsKICAgICAgfQogICAgfQoK
        ICAgIGZ1bmN0aW9uIGludm9rZVJlc29sdmVyKHJlc29sdmVyLCBwcm9taXNl
        KSB7CiAgICAgIGZ1bmN0aW9uIHJlc29sdmVQcm9taXNlKHZhbHVlKSB7CiAg
        ICAgICAgcmVzb2x2ZShwcm9taXNlLCB2YWx1ZSk7CiAgICAgIH0KCiAgICAg
        IGZ1bmN0aW9uIHJlamVjdFByb21pc2UocmVhc29uKSB7CiAgICAgICAgcmVq
        ZWN0KHByb21pc2UsIHJlYXNvbik7CiAgICAgIH0KCiAgICAgIHRyeSB7CiAg
        ICAgICAgcmVzb2x2ZXIocmVzb2x2ZVByb21pc2UsIHJlamVjdFByb21pc2Up
        OwogICAgICB9IGNhdGNoKGUpIHsKICAgICAgICByZWplY3RQcm9taXNlKGUp
        OwogICAgICB9CiAgICB9CgogICAgUHJvbWlzZS5jYXN0ID0gY2FzdDsKICAg
        IFByb21pc2UuYWxsID0gYWxsOwogICAgUHJvbWlzZS5yYWNlID0gcmFjZTsK
        ICAgIFByb21pc2UucmVzb2x2ZSA9IFJlc29sdmU7CiAgICBQcm9taXNlLnJl
        amVjdCA9IFJlamVjdDsKCiAgICB2YXIgUEVORElORyAgID0gdm9pZCAwOwog
        ICAgdmFyIFNFQUxFRCAgICA9IDA7CiAgICB2YXIgRlVMRklMTEVEID0gMTsK
        ICAgIHZhciBSRUpFQ1RFRCAgPSAyOwoKICAgIGZ1bmN0aW9uIHN1YnNjcmli
        ZShwYXJlbnQsIGNoaWxkLCBvbkZ1bGZpbGxtZW50LCBvblJlamVjdGlvbikg
        ewogICAgICB2YXIgc3Vic2NyaWJlcnMgPSBwYXJlbnQuX3N1YnNjcmliZXJz
        OwogICAgICB2YXIgbGVuZ3RoID0gc3Vic2NyaWJlcnMubGVuZ3RoOwoKICAg
        ICAgc3Vic2NyaWJlcnNbbGVuZ3RoXSA9IGNoaWxkOwogICAgICBzdWJzY3Jp
        YmVyc1tsZW5ndGggKyBGVUxGSUxMRURdID0gb25GdWxmaWxsbWVudDsKICAg
        ICAgc3Vic2NyaWJlcnNbbGVuZ3RoICsgUkVKRUNURURdICA9IG9uUmVqZWN0
        aW9uOwogICAgfQoKICAgIGZ1bmN0aW9uIHB1Ymxpc2gocHJvbWlzZSwgc2V0
        dGxlZCkgewogICAgICB2YXIgY2hpbGQsIGNhbGxiYWNrLCBzdWJzY3JpYmVy
        cyA9IHByb21pc2UuX3N1YnNjcmliZXJzLCBkZXRhaWwgPSBwcm9taXNlLl9k
        ZXRhaWw7CgogICAgICBpZiAoY29uZmlnLmluc3RydW1lbnQpIHsKICAgICAg
        ICBpbnN0cnVtZW50KHNldHRsZWQgPT09IEZVTEZJTExFRCA/ICdmdWxmaWxs
        ZWQnIDogJ3JlamVjdGVkJywgcHJvbWlzZSk7CiAgICAgIH0KCiAgICAgIGZv
        ciAodmFyIGkgPSAwOyBpIDwgc3Vic2NyaWJlcnMubGVuZ3RoOyBpICs9IDMp
        IHsKICAgICAgICBjaGlsZCA9IHN1YnNjcmliZXJzW2ldOwogICAgICAgIGNh
        bGxiYWNrID0gc3Vic2NyaWJlcnNbaSArIHNldHRsZWRdOwoKICAgICAgICBp
        bnZva2VDYWxsYmFjayhzZXR0bGVkLCBjaGlsZCwgY2FsbGJhY2ssIGRldGFp
        bCk7CiAgICAgIH0KCiAgICAgIHByb21pc2UuX3N1YnNjcmliZXJzID0gbnVs
        bDsKICAgIH0KCiAgICBQcm9taXNlLnByb3RvdHlwZSA9IHsKICAgICAgY29u
        c3RydWN0b3I6IFByb21pc2UsCgogICAgICBfaWQ6IHVuZGVmaW5lZCwKICAg
        ICAgX2d1aWRLZXk6IGd1aWRLZXksCiAgICAgIF9sYWJlbDogdW5kZWZpbmVk
        LAoKICAgICAgX3N0YXRlOiB1bmRlZmluZWQsCiAgICAgIF9kZXRhaWw6IHVu
        ZGVmaW5lZCwKICAgICAgX3N1YnNjcmliZXJzOiB1bmRlZmluZWQsCgogICAg
        ICBfb25lcnJvcjogZnVuY3Rpb24gKHJlYXNvbikgewogICAgICAgIGNvbmZp
        Zy50cmlnZ2VyKCdlcnJvcicsIHJlYXNvbik7CiAgICAgIH0sCgogICAgLyoq
        CiAgICAgIFRoZSBwcmltYXJ5IHdheSBvZiBpbnRlcmFjdGluZyB3aXRoIGEg
        cHJvbWlzZSBpcyB0aHJvdWdoIGl0cyBgdGhlbmAgbWV0aG9kLAogICAgICB3
        aGljaCByZWdpc3RlcnMgY2FsbGJhY2tzIHRvIHJlY2VpdmUgZWl0aGVyIGEg
        cHJvbWlzZSdzIGV2ZW50dWFsIHZhbHVlIG9yIHRoZQogICAgICByZWFzb24g
        d2h5IHRoZSBwcm9taXNlIGNhbm5vdCBiZSBmdWxmaWxsZWQuCgogICAgICBg
        YGBqcwogICAgICBmaW5kVXNlcigpLnRoZW4oZnVuY3Rpb24odXNlcil7CiAg
        ICAgICAgLy8gdXNlciBpcyBhdmFpbGFibGUKICAgICAgfSwgZnVuY3Rpb24o
        cmVhc29uKXsKICAgICAgICAvLyB1c2VyIGlzIHVuYXZhaWxhYmxlLCBhbmQg
        eW91IGFyZSBnaXZlbiB0aGUgcmVhc29uIHdoeQogICAgICB9KTsKICAgICAg
        YGBgCgogICAgICBDaGFpbmluZwogICAgICAtLS0tLS0tLQoKICAgICAgVGhl
        IHJldHVybiB2YWx1ZSBvZiBgdGhlbmAgaXMgaXRzZWxmIGEgcHJvbWlzZS4g
        IFRoaXMgc2Vjb25kLCAiZG93bnN0cmVhbSIKICAgICAgcHJvbWlzZSBpcyBy
        ZXNvbHZlZCB3aXRoIHRoZSByZXR1cm4gdmFsdWUgb2YgdGhlIGZpcnN0IHBy
        b21pc2UncyBmdWxmaWxsbWVudAogICAgICBvciByZWplY3Rpb24gaGFuZGxl
        ciwgb3IgcmVqZWN0ZWQgaWYgdGhlIGhhbmRsZXIgdGhyb3dzIGFuIGV4Y2Vw
        dGlvbi4KCiAgICAgIGBgYGpzCiAgICAgIGZpbmRVc2VyKCkudGhlbihmdW5j
        dGlvbiAodXNlcikgewogICAgICAgIHJldHVybiB1c2VyLm5hbWU7CiAgICAg
        IH0sIGZ1bmN0aW9uIChyZWFzb24pIHsKICAgICAgICByZXR1cm4gImRlZmF1
        bHQgbmFtZSI7CiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHVzZXJOYW1lKSB7
        CiAgICAgICAgLy8gSWYgYGZpbmRVc2VyYCBmdWxmaWxsZWQsIGB1c2VyTmFt
        ZWAgd2lsbCBiZSB0aGUgdXNlcidzIG5hbWUsIG90aGVyd2lzZSBpdAogICAg
        ICAgIC8vIHdpbGwgYmUgYCJkZWZhdWx0IG5hbWUiYAogICAgICB9KTsKCiAg
        ICAgIGZpbmRVc2VyKCkudGhlbihmdW5jdGlvbiAodXNlcikgewogICAgICAg
        IHRocm93IG5ldyBFcnJvcigiRm91bmQgdXNlciwgYnV0IHN0aWxsIHVuaGFw
        cHkiKTsKICAgICAgfSwgZnVuY3Rpb24gKHJlYXNvbikgewogICAgICAgIHRo
        cm93IG5ldyBFcnJvcigiYGZpbmRVc2VyYCByZWplY3RlZCBhbmQgd2UncmUg
        dW5oYXBweSIpOwogICAgICB9KS50aGVuKGZ1bmN0aW9uICh2YWx1ZSkgewog
        ICAgICAgIC8vIG5ldmVyIHJlYWNoZWQKICAgICAgfSwgZnVuY3Rpb24gKHJl
        YXNvbikgewogICAgICAgIC8vIGlmIGBmaW5kVXNlcmAgZnVsZmlsbGVkLCBg
        cmVhc29uYCB3aWxsIGJlICJGb3VuZCB1c2VyLCBidXQgc3RpbGwgdW5oYXBw
        eSIuCiAgICAgICAgLy8gSWYgYGZpbmRVc2VyYCByZWplY3RlZCwgYHJlYXNv
        bmAgd2lsbCBiZSAiYGZpbmRVc2VyYCByZWplY3RlZCBhbmQgd2UncmUgdW5o
        YXBweSIuCiAgICAgIH0pOwogICAgICBgYGAKICAgICAgSWYgdGhlIGRvd25z
        dHJlYW0gcHJvbWlzZSBkb2VzIG5vdCBzcGVjaWZ5IGEgcmVqZWN0aW9uIGhh
        bmRsZXIsIHJlamVjdGlvbiByZWFzb25zIHdpbGwgYmUgcHJvcGFnYXRlZCBm
        dXJ0aGVyIGRvd25zdHJlYW0uCgogICAgICBgYGBqcwogICAgICBmaW5kVXNl
        cigpLnRoZW4oZnVuY3Rpb24gKHVzZXIpIHsKICAgICAgICB0aHJvdyBuZXcg
        UGVkYWdvZ2ljYWxFeGNlcHRpb24oIlVwc3RyZWFtIGVycm9yIik7CiAgICAg
        IH0pLnRoZW4oZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgICAgLy8gbmV2ZXIg
        cmVhY2hlZAogICAgICB9KS50aGVuKGZ1bmN0aW9uICh2YWx1ZSkgewogICAg
        ICAgIC8vIG5ldmVyIHJlYWNoZWQKICAgICAgfSwgZnVuY3Rpb24gKHJlYXNv
        bikgewogICAgICAgIC8vIFRoZSBgUGVkZ2Fnb2NpYWxFeGNlcHRpb25gIGlz
        IHByb3BhZ2F0ZWQgYWxsIHRoZSB3YXkgZG93biB0byBoZXJlCiAgICAgIH0p
        OwogICAgICBgYGAKCiAgICAgIEFzc2ltaWxhdGlvbgogICAgICAtLS0tLS0t
        LS0tLS0KCiAgICAgIFNvbWV0aW1lcyB0aGUgdmFsdWUgeW91IHdhbnQgdG8g
        cHJvcGFnYXRlIHRvIGEgZG93bnN0cmVhbSBwcm9taXNlIGNhbiBvbmx5IGJl
        CiAgICAgIHJldHJpZXZlZCBhc3luY2hyb25vdXNseS4gVGhpcyBjYW4gYmUg
        YWNoaWV2ZWQgYnkgcmV0dXJuaW5nIGEgcHJvbWlzZSBpbiB0aGUKICAgICAg
        ZnVsZmlsbG1lbnQgb3IgcmVqZWN0aW9uIGhhbmRsZXIuIFRoZSBkb3duc3Ry
        ZWFtIHByb21pc2Ugd2lsbCB0aGVuIGJlIHBlbmRpbmcKICAgICAgdW50aWwg
        dGhlIHJldHVybmVkIHByb21pc2UgaXMgc2V0dGxlZC4gVGhpcyBpcyBjYWxs
        ZWQgKmFzc2ltaWxhdGlvbiouCgogICAgICBgYGBqcwogICAgICBmaW5kVXNl
        cigpLnRoZW4oZnVuY3Rpb24gKHVzZXIpIHsKICAgICAgICByZXR1cm4gZmlu
        ZENvbW1lbnRzQnlBdXRob3IodXNlcik7CiAgICAgIH0pLnRoZW4oZnVuY3Rp
        b24gKGNvbW1lbnRzKSB7CiAgICAgICAgLy8gVGhlIHVzZXIncyBjb21tZW50
        cyBhcmUgbm93IGF2YWlsYWJsZQogICAgICB9KTsKICAgICAgYGBgCgogICAg
        ICBJZiB0aGUgYXNzaW1saWF0ZWQgcHJvbWlzZSByZWplY3RzLCB0aGVuIHRo
        ZSBkb3duc3RyZWFtIHByb21pc2Ugd2lsbCBhbHNvIHJlamVjdC4KCiAgICAg
        IGBgYGpzCiAgICAgIGZpbmRVc2VyKCkudGhlbihmdW5jdGlvbiAodXNlcikg
        ewogICAgICAgIHJldHVybiBmaW5kQ29tbWVudHNCeUF1dGhvcih1c2VyKTsK
        ICAgICAgfSkudGhlbihmdW5jdGlvbiAoY29tbWVudHMpIHsKICAgICAgICAv
        LyBJZiBgZmluZENvbW1lbnRzQnlBdXRob3JgIGZ1bGZpbGxzLCB3ZSdsbCBo
        YXZlIHRoZSB2YWx1ZSBoZXJlCiAgICAgIH0sIGZ1bmN0aW9uIChyZWFzb24p
        IHsKICAgICAgICAvLyBJZiBgZmluZENvbW1lbnRzQnlBdXRob3JgIHJlamVj
        dHMsIHdlJ2xsIGhhdmUgdGhlIHJlYXNvbiBoZXJlCiAgICAgIH0pOwogICAg
        ICBgYGAKCiAgICAgIFNpbXBsZSBFeGFtcGxlCiAgICAgIC0tLS0tLS0tLS0t
        LS0tCgogICAgICBTeW5jaHJvbm91cyBFeGFtcGxlCgogICAgICBgYGBqYXZh
        c2NyaXB0CiAgICAgIHZhciByZXN1bHQ7CgogICAgICB0cnkgewogICAgICAg
        IHJlc3VsdCA9IGZpbmRSZXN1bHQoKTsKICAgICAgICAvLyBzdWNjZXNzCiAg
        ICAgIH0gY2F0Y2gocmVhc29uKSB7CiAgICAgICAgLy8gZmFpbHVyZQogICAg
        ICB9CiAgICAgIGBgYAoKICAgICAgRXJyYmFjayBFeGFtcGxlCgogICAgICBg
        YGBqcwogICAgICBmaW5kUmVzdWx0KGZ1bmN0aW9uKHJlc3VsdCwgZXJyKXsK
        ICAgICAgICBpZiAoZXJyKSB7CiAgICAgICAgICAvLyBmYWlsdXJlCiAgICAg
        ICAgfSBlbHNlIHsKICAgICAgICAgIC8vIHN1Y2Nlc3MKICAgICAgICB9CiAg
        ICAgIH0pOwogICAgICBgYGAKCiAgICAgIFByb21pc2UgRXhhbXBsZTsKCiAg
        ICAgIGBgYGphdmFzY3JpcHQKICAgICAgZmluZFJlc3VsdCgpLnRoZW4oZnVu
        Y3Rpb24ocmVzdWx0KXsKICAgICAgICAvLyBzdWNjZXNzCiAgICAgIH0sIGZ1
        bmN0aW9uKHJlYXNvbil7CiAgICAgICAgLy8gZmFpbHVyZQogICAgICB9KTsK
        ICAgICAgYGBgCgogICAgICBBZHZhbmNlZCBFeGFtcGxlCiAgICAgIC0tLS0t
        LS0tLS0tLS0tCgogICAgICBTeW5jaHJvbm91cyBFeGFtcGxlCgogICAgICBg
        YGBqYXZhc2NyaXB0CiAgICAgIHZhciBhdXRob3IsIGJvb2tzOwoKICAgICAg
        dHJ5IHsKICAgICAgICBhdXRob3IgPSBmaW5kQXV0aG9yKCk7CiAgICAgICAg
        Ym9va3MgID0gZmluZEJvb2tzQnlBdXRob3IoYXV0aG9yKTsKICAgICAgICAv
        LyBzdWNjZXNzCiAgICAgIH0gY2F0Y2gocmVhc29uKSB7CiAgICAgICAgLy8g
        ZmFpbHVyZQogICAgICB9CiAgICAgIGBgYAoKICAgICAgRXJyYmFjayBFeGFt
        cGxlCgogICAgICBgYGBqcwoKICAgICAgZnVuY3Rpb24gZm91bmRCb29rcyhi
        b29rcykgewoKICAgICAgfQoKICAgICAgZnVuY3Rpb24gZmFpbHVyZShyZWFz
        b24pIHsKCiAgICAgIH0KCiAgICAgIGZpbmRBdXRob3IoZnVuY3Rpb24oYXV0
        aG9yLCBlcnIpewogICAgICAgIGlmIChlcnIpIHsKICAgICAgICAgIGZhaWx1
        cmUoZXJyKTsKICAgICAgICAgIC8vIGZhaWx1cmUKICAgICAgICB9IGVsc2Ug
        ewogICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgZmluZEJvb29rc0J5QXV0
        aG9yKGF1dGhvciwgZnVuY3Rpb24oYm9va3MsIGVycikgewogICAgICAgICAg
        ICAgIGlmIChlcnIpIHsKICAgICAgICAgICAgICAgIGZhaWx1cmUoZXJyKTsK
        ICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgdHJ5IHsK
        ICAgICAgICAgICAgICAgICAgZm91bmRCb29rcyhib29rcyk7CiAgICAgICAg
        ICAgICAgICB9IGNhdGNoKHJlYXNvbikgewogICAgICAgICAgICAgICAgICBm
        YWlsdXJlKHJlYXNvbik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAg
        ICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0gY2F0Y2goZXJyb3Ip
        IHsKICAgICAgICAgICAgZmFpbHVyZShlcnIpOwogICAgICAgICAgfQogICAg
        ICAgICAgLy8gc3VjY2VzcwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIGBg
        YAoKICAgICAgUHJvbWlzZSBFeGFtcGxlOwoKICAgICAgYGBgamF2YXNjcmlw
        dAogICAgICBmaW5kQXV0aG9yKCkuCiAgICAgICAgdGhlbihmaW5kQm9va3NC
        eUF1dGhvcikuCiAgICAgICAgdGhlbihmdW5jdGlvbihib29rcyl7CiAgICAg
        ICAgICAvLyBmb3VuZCBib29rcwogICAgICB9KS5jYXRjaChmdW5jdGlvbihy
        ZWFzb24pewogICAgICAgIC8vIHNvbWV0aGluZyB3ZW50IHdyb25nCiAgICAg
        IH0pOwogICAgICBgYGAKCiAgICAgIEBtZXRob2QgdGhlbgogICAgICBAcGFy
        YW0ge0Z1bmN0aW9ufSBvbkZ1bGZpbGxlZAogICAgICBAcGFyYW0ge0Z1bmN0
        aW9ufSBvblJlamVjdGVkCiAgICAgIEBwYXJhbSB7U3RyaW5nfSBsYWJlbCBv
        cHRpb25hbCBzdHJpbmcgZm9yIGxhYmVsaW5nIHRoZSBwcm9taXNlLgogICAg
        ICBVc2VmdWwgZm9yIHRvb2xpbmcuCiAgICAgIEByZXR1cm4ge1Byb21pc2V9
        CiAgICAqLwogICAgICB0aGVuOiBmdW5jdGlvbihvbkZ1bGZpbGxtZW50LCBv
        blJlamVjdGlvbiwgbGFiZWwpIHsKICAgICAgICB2YXIgcHJvbWlzZSA9IHRo
        aXM7CiAgICAgICAgdGhpcy5fb25lcnJvciA9IG51bGw7CgogICAgICAgIHZh
        ciB0aGVuUHJvbWlzZSA9IG5ldyB0aGlzLmNvbnN0cnVjdG9yKG5vb3AsIGxh
        YmVsKTsKCiAgICAgICAgaWYgKHRoaXMuX3N0YXRlKSB7CiAgICAgICAgICB2
        YXIgY2FsbGJhY2tzID0gYXJndW1lbnRzOwogICAgICAgICAgY29uZmlnLmFz
        eW5jKGZ1bmN0aW9uIGludm9rZVByb21pc2VDYWxsYmFjaygpIHsKICAgICAg
        ICAgICAgaW52b2tlQ2FsbGJhY2socHJvbWlzZS5fc3RhdGUsIHRoZW5Qcm9t
        aXNlLCBjYWxsYmFja3NbcHJvbWlzZS5fc3RhdGUgLSAxXSwgcHJvbWlzZS5f
        ZGV0YWlsKTsKICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAg
        ICAgICBzdWJzY3JpYmUodGhpcywgdGhlblByb21pc2UsIG9uRnVsZmlsbG1l
        bnQsIG9uUmVqZWN0aW9uKTsKICAgICAgICB9CgogICAgICAgIGlmIChjb25m
        aWcuaW5zdHJ1bWVudCkgewogICAgICAgICAgaW5zdHJ1bWVudCgnY2hhaW5l
        ZCcsIHByb21pc2UsIHRoZW5Qcm9taXNlKTsKICAgICAgICB9CgogICAgICAg
        IHJldHVybiB0aGVuUHJvbWlzZTsKICAgICAgfSwKCiAgICAvKioKICAgICAg
        YGNhdGNoYCBpcyBzaW1wbHkgc3VnYXIgZm9yIGB0aGVuKHVuZGVmaW5lZCwg
        b25SZWplY3Rpb24pYCB3aGljaCBtYWtlcyBpdCB0aGUgc2FtZQogICAgICBh
        cyB0aGUgY2F0Y2ggYmxvY2sgb2YgYSB0cnkvY2F0Y2ggc3RhdGVtZW50LgoK
        ICAgICAgYGBganMKICAgICAgZnVuY3Rpb24gZmluZEF1dGhvcigpewogICAg
        ICAgIHRocm93IG5ldyBFcnJvcigiY291bGRuJ3QgZmluZCB0aGF0IGF1dGhv
        ciIpOwogICAgICB9CgogICAgICAvLyBzeW5jaHJvbm91cwogICAgICB0cnkg
        ewogICAgICAgIGZpbmRBdXRob3IoKTsKICAgICAgfSBjYXRjaChyZWFzb24p
        IHsKICAgICAgICAvLyBzb21ldGhpbmcgd2VudCB3cm9uZwogICAgICB9Cgog
        ICAgICAvLyBhc3luYyB3aXRoIHByb21pc2VzCiAgICAgIGZpbmRBdXRob3Io
        KS5jYXRjaChmdW5jdGlvbihyZWFzb24pewogICAgICAgIC8vIHNvbWV0aGlu
        ZyB3ZW50IHdyb25nCiAgICAgIH0pOwogICAgICBgYGAKCiAgICAgIEBtZXRo
        b2QgY2F0Y2gKICAgICAgQHBhcmFtIHtGdW5jdGlvbn0gb25SZWplY3Rpb24K
        ICAgICAgQHBhcmFtIHtTdHJpbmd9IGxhYmVsIG9wdGlvbmFsIHN0cmluZyBm
        b3IgbGFiZWxpbmcgdGhlIHByb21pc2UuCiAgICAgIFVzZWZ1bCBmb3IgdG9v
        bGluZy4KICAgICAgQHJldHVybiB7UHJvbWlzZX0KICAgICovCiAgICAgICdj
        YXRjaCc6IGZ1bmN0aW9uKG9uUmVqZWN0aW9uLCBsYWJlbCkgewogICAgICAg
        IHJldHVybiB0aGlzLnRoZW4obnVsbCwgb25SZWplY3Rpb24sIGxhYmVsKTsK
        ICAgICAgfSwKCiAgICAvKioKICAgICAgYGZpbmFsbHlgIHdpbGwgYmUgaW52
        b2tlZCByZWdhcmRsZXNzIG9mIHRoZSBwcm9taXNlJ3MgZmF0ZSBqdXN0IGFz
        IG5hdGl2ZQogICAgICB0cnkvY2F0Y2gvZmluYWxseSBiZWhhdmVzCgogICAg
        ICBTeW5jaHJvbm91cyBleGFtcGxlOgoKICAgICAgYGBganMKICAgICAgZmlu
        ZEF1dGhvcigpIHsKICAgICAgICBpZiAoTWF0aC5yYW5kb20oKSA+IDAuNSkg
        ewogICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCk7CiAgICAgICAgfQogICAg
        ICAgIHJldHVybiBuZXcgQXV0aG9yKCk7CiAgICAgIH0KCiAgICAgIHRyeSB7
        CiAgICAgICAgcmV0dXJuIGZpbmRBdXRob3IoKTsgLy8gc3VjY2VlZCBvciBm
        YWlsCiAgICAgIH0gY2F0Y2goZXJyb3IpIHsKICAgICAgICByZXR1cm4gZmlu
        ZE90aGVyQXV0aGVyKCk7CiAgICAgIH0gZmluYWxseSB7CiAgICAgICAgLy8g
        YWx3YXlzIHJ1bnMKICAgICAgICAvLyBkb2Vzbid0IGFmZmVjdCB0aGUgcmV0
        dXJuIHZhbHVlCiAgICAgIH0KICAgICAgYGBgCgogICAgICBBc3luY2hyb25v
        dXMgZXhhbXBsZToKCiAgICAgIGBgYGpzCiAgICAgIGZpbmRBdXRob3IoKS5j
        YXRjaChmdW5jdGlvbihyZWFzb24pewogICAgICAgIHJldHVybiBmaW5kT3Ro
        ZXJBdXRoZXIoKTsKICAgICAgfSkuZmluYWxseShmdW5jdGlvbigpewogICAg
        ICAgIC8vIGF1dGhvciB3YXMgZWl0aGVyIGZvdW5kLCBvciBub3QKICAgICAg
        fSk7CiAgICAgIGBgYAoKICAgICAgQG1ldGhvZCBmaW5hbGx5CiAgICAgIEBw
        YXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrCiAgICAgIEBwYXJhbSB7U3RyaW5n
        fSBsYWJlbCBvcHRpb25hbCBzdHJpbmcgZm9yIGxhYmVsaW5nIHRoZSBwcm9t
        aXNlLgogICAgICBVc2VmdWwgZm9yIHRvb2xpbmcuCiAgICAgIEByZXR1cm4g
        e1Byb21pc2V9CiAgICAqLwogICAgICAnZmluYWxseSc6IGZ1bmN0aW9uKGNh
        bGxiYWNrLCBsYWJlbCkgewogICAgICAgIHZhciBjb25zdHJ1Y3RvciA9IHRo
        aXMuY29uc3RydWN0b3I7CgogICAgICAgIHJldHVybiB0aGlzLnRoZW4oZnVu
        Y3Rpb24odmFsdWUpIHsKICAgICAgICAgIHJldHVybiBjb25zdHJ1Y3Rvci5j
        YXN0KGNhbGxiYWNrKCkpLnRoZW4oZnVuY3Rpb24oKXsKICAgICAgICAgICAg
        cmV0dXJuIHZhbHVlOwogICAgICAgICAgfSk7CiAgICAgICAgfSwgZnVuY3Rp
        b24ocmVhc29uKSB7CiAgICAgICAgICByZXR1cm4gY29uc3RydWN0b3IuY2Fz
        dChjYWxsYmFjaygpKS50aGVuKGZ1bmN0aW9uKCl7CiAgICAgICAgICAgIHRo
        cm93IHJlYXNvbjsKICAgICAgICAgIH0pOwogICAgICAgIH0sIGxhYmVsKTsK
        ICAgICAgfQogICAgfTsKCiAgICBmdW5jdGlvbiBpbnZva2VDYWxsYmFjayhz
        ZXR0bGVkLCBwcm9taXNlLCBjYWxsYmFjaywgZGV0YWlsKSB7CiAgICAgIHZh
        ciBoYXNDYWxsYmFjayA9IGlzRnVuY3Rpb24oY2FsbGJhY2spLAogICAgICAg
        ICAgdmFsdWUsIGVycm9yLCBzdWNjZWVkZWQsIGZhaWxlZDsKCiAgICAgIGlm
        IChoYXNDYWxsYmFjaykgewogICAgICAgIHRyeSB7CiAgICAgICAgICB2YWx1
        ZSA9IGNhbGxiYWNrKGRldGFpbCk7CiAgICAgICAgICBzdWNjZWVkZWQgPSB0
        cnVlOwogICAgICAgIH0gY2F0Y2goZSkgewogICAgICAgICAgZmFpbGVkID0g
        dHJ1ZTsKICAgICAgICAgIGVycm9yID0gZTsKICAgICAgICB9CiAgICAgIH0g
        ZWxzZSB7CiAgICAgICAgdmFsdWUgPSBkZXRhaWw7CiAgICAgICAgc3VjY2Vl
        ZGVkID0gdHJ1ZTsKICAgICAgfQoKICAgICAgaWYgKGhhbmRsZVRoZW5hYmxl
        KHByb21pc2UsIHZhbHVlKSkgewogICAgICAgIHJldHVybjsKICAgICAgfSBl
        bHNlIGlmIChoYXNDYWxsYmFjayAmJiBzdWNjZWVkZWQpIHsKICAgICAgICBy
        ZXNvbHZlKHByb21pc2UsIHZhbHVlKTsKICAgICAgfSBlbHNlIGlmIChmYWls
        ZWQpIHsKICAgICAgICByZWplY3QocHJvbWlzZSwgZXJyb3IpOwogICAgICB9
        IGVsc2UgaWYgKHNldHRsZWQgPT09IEZVTEZJTExFRCkgewogICAgICAgIHJl
        c29sdmUocHJvbWlzZSwgdmFsdWUpOwogICAgICB9IGVsc2UgaWYgKHNldHRs
        ZWQgPT09IFJFSkVDVEVEKSB7CiAgICAgICAgcmVqZWN0KHByb21pc2UsIHZh
        bHVlKTsKICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIGhhbmRsZVRoZW5h
        YmxlKHByb21pc2UsIHZhbHVlKSB7CiAgICAgIHZhciB0aGVuID0gbnVsbCwK
        ICAgICAgcmVzb2x2ZWQ7CgogICAgICB0cnkgewogICAgICAgIGlmIChwcm9t
        aXNlID09PSB2YWx1ZSkgewogICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJv
        cigiQSBwcm9taXNlcyBjYWxsYmFjayBjYW5ub3QgcmV0dXJuIHRoYXQgc2Ft
        ZSBwcm9taXNlLiIpOwogICAgICAgIH0KCiAgICAgICAgaWYgKG9iamVjdE9y
        RnVuY3Rpb24odmFsdWUpKSB7CiAgICAgICAgICB0aGVuID0gdmFsdWUudGhl
        bjsKCiAgICAgICAgICBpZiAoaXNGdW5jdGlvbih0aGVuKSkgewogICAgICAg
        ICAgICB0aGVuLmNhbGwodmFsdWUsIGZ1bmN0aW9uKHZhbCkgewogICAgICAg
        ICAgICAgIGlmIChyZXNvbHZlZCkgeyByZXR1cm4gdHJ1ZTsgfQogICAgICAg
        ICAgICAgIHJlc29sdmVkID0gdHJ1ZTsKCiAgICAgICAgICAgICAgaWYgKHZh
        bHVlICE9PSB2YWwpIHsKICAgICAgICAgICAgICAgIHJlc29sdmUocHJvbWlz
        ZSwgdmFsKTsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAg
        ICAgZnVsZmlsbChwcm9taXNlLCB2YWwpOwogICAgICAgICAgICAgIH0KICAg
        ICAgICAgICAgfSwgZnVuY3Rpb24odmFsKSB7CiAgICAgICAgICAgICAgaWYg
        KHJlc29sdmVkKSB7IHJldHVybiB0cnVlOyB9CiAgICAgICAgICAgICAgcmVz
        b2x2ZWQgPSB0cnVlOwoKICAgICAgICAgICAgICByZWplY3QocHJvbWlzZSwg
        dmFsKTsKICAgICAgICAgICAgfSwgJ2Rlcml2ZWQgZnJvbTogJyArIChwcm9t
        aXNlLl9sYWJlbCB8fCAnIHVua25vd24gcHJvbWlzZScpKTsKCiAgICAgICAg
        ICAgIHJldHVybiB0cnVlOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAg
        fSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICBpZiAocmVzb2x2ZWQpIHsgcmV0
        dXJuIHRydWU7IH0KICAgICAgICByZWplY3QocHJvbWlzZSwgZXJyb3IpOwog
        ICAgICAgIHJldHVybiB0cnVlOwogICAgICB9CgogICAgICByZXR1cm4gZmFs
        c2U7CiAgICB9CgogICAgZnVuY3Rpb24gcmVzb2x2ZShwcm9taXNlLCB2YWx1
        ZSkgewogICAgICBpZiAocHJvbWlzZSA9PT0gdmFsdWUpIHsKICAgICAgICBm
        dWxmaWxsKHByb21pc2UsIHZhbHVlKTsKICAgICAgfSBlbHNlIGlmICghaGFu
        ZGxlVGhlbmFibGUocHJvbWlzZSwgdmFsdWUpKSB7CiAgICAgICAgZnVsZmls
        bChwcm9taXNlLCB2YWx1ZSk7CiAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlv
        biBmdWxmaWxsKHByb21pc2UsIHZhbHVlKSB7CiAgICAgIGlmIChwcm9taXNl
        Ll9zdGF0ZSAhPT0gUEVORElORykgeyByZXR1cm47IH0KICAgICAgcHJvbWlz
        ZS5fc3RhdGUgPSBTRUFMRUQ7CiAgICAgIHByb21pc2UuX2RldGFpbCA9IHZh
        bHVlOwoKICAgICAgY29uZmlnLmFzeW5jKHB1Ymxpc2hGdWxmaWxsbWVudCwg
        cHJvbWlzZSk7CiAgICB9CgogICAgZnVuY3Rpb24gcmVqZWN0KHByb21pc2Us
        IHJlYXNvbikgewogICAgICBpZiAocHJvbWlzZS5fc3RhdGUgIT09IFBFTkRJ
        TkcpIHsgcmV0dXJuOyB9CiAgICAgIHByb21pc2UuX3N0YXRlID0gU0VBTEVE
        OwogICAgICBwcm9taXNlLl9kZXRhaWwgPSByZWFzb247CgogICAgICBjb25m
        aWcuYXN5bmMocHVibGlzaFJlamVjdGlvbiwgcHJvbWlzZSk7CiAgICB9Cgog
        ICAgZnVuY3Rpb24gcHVibGlzaEZ1bGZpbGxtZW50KHByb21pc2UpIHsKICAg
        ICAgcHVibGlzaChwcm9taXNlLCBwcm9taXNlLl9zdGF0ZSA9IEZVTEZJTExF
        RCk7CiAgICB9CgogICAgZnVuY3Rpb24gcHVibGlzaFJlamVjdGlvbihwcm9t
        aXNlKSB7CiAgICAgIGlmIChwcm9taXNlLl9vbmVycm9yKSB7CiAgICAgICAg
        cHJvbWlzZS5fb25lcnJvcihwcm9taXNlLl9kZXRhaWwpOwogICAgICB9Cgog
        ICAgICBwdWJsaXNoKHByb21pc2UsIHByb21pc2UuX3N0YXRlID0gUkVKRUNU
        RUQpOwogICAgfQogIH0pOwpkZWZpbmUoInJzdnAvcHJvbWlzZS9hbGwiLCAK
        ICBbIi4uL3V0aWxzIiwiZXhwb3J0cyJdLAogIGZ1bmN0aW9uKF9fZGVwZW5k
        ZW5jeTFfXywgX19leHBvcnRzX18pIHsKICAgICJ1c2Ugc3RyaWN0IjsKICAg
        IHZhciBpc0FycmF5ID0gX19kZXBlbmRlbmN5MV9fLmlzQXJyYXk7CiAgICB2
        YXIgaXNOb25UaGVuYWJsZSA9IF9fZGVwZW5kZW5jeTFfXy5pc05vblRoZW5h
        YmxlOwoKICAgIC8qKgogICAgICBgUlNWUC5Qcm9taXNlLmFsbGAgYWNjZXB0
        cyBhbiBhcnJheSBvZiBwcm9taXNlcywgYW5kIHJldHVybnMgYSBuZXcgcHJv
        bWlzZSB3aGljaAogICAgICBpcyBmdWxmaWxsZWQgd2l0aCBhbiBhcnJheSBv
        ZiBmdWxmaWxsbWVudCB2YWx1ZXMgZm9yIHRoZSBwYXNzZWQgcHJvbWlzZXMs
        IG9yCiAgICAgIHJlamVjdGVkIHdpdGggdGhlIHJlYXNvbiBvZiB0aGUgZmly
        c3QgcGFzc2VkIHByb21pc2UgdG8gYmUgcmVqZWN0ZWQuIEl0IGNhc3RzIGFs
        bAogICAgICBlbGVtZW50cyBvZiB0aGUgcGFzc2VkIGl0ZXJhYmxlIHRvIHBy
        b21pc2VzIGFzIGl0IHJ1bnMgdGhpcyBhbGdvcml0aG0uCgogICAgICBFeGFt
        cGxlOgoKICAgICAgYGBgamF2YXNjcmlwdAogICAgICB2YXIgcHJvbWlzZTEg
        PSBSU1ZQLnJlc29sdmUoMSk7CiAgICAgIHZhciBwcm9taXNlMiA9IFJTVlAu
        cmVzb2x2ZSgyKTsKICAgICAgdmFyIHByb21pc2UzID0gUlNWUC5yZXNvbHZl
        KDMpOwogICAgICB2YXIgcHJvbWlzZXMgPSBbIHByb21pc2UxLCBwcm9taXNl
        MiwgcHJvbWlzZTMgXTsKCiAgICAgIFJTVlAuUHJvbWlzZS5hbGwocHJvbWlz
        ZXMpLnRoZW4oZnVuY3Rpb24oYXJyYXkpewogICAgICAgIC8vIFRoZSBhcnJh
        eSBoZXJlIHdvdWxkIGJlIFsgMSwgMiwgMyBdOwogICAgICB9KTsKICAgICAg
        YGBgCgogICAgICBJZiBhbnkgb2YgdGhlIGBwcm9taXNlc2AgZ2l2ZW4gdG8g
        YFJTVlAuYWxsYCBhcmUgcmVqZWN0ZWQsIHRoZSBmaXJzdCBwcm9taXNlCiAg
        ICAgIHRoYXQgaXMgcmVqZWN0ZWQgd2lsbCBiZSBnaXZlbiBhcyBhbiBhcmd1
        bWVudCB0byB0aGUgcmV0dXJuZWQgcHJvbWlzZXMncwogICAgICByZWplY3Rp
        b24gaGFuZGxlci4gRm9yIGV4YW1wbGU6CgogICAgICBFeGFtcGxlOgoKICAg
        ICAgYGBgamF2YXNjcmlwdAogICAgICB2YXIgcHJvbWlzZTEgPSBSU1ZQLnJl
        c29sdmUoMSk7CiAgICAgIHZhciBwcm9taXNlMiA9IFJTVlAucmVqZWN0KG5l
        dyBFcnJvcigiMiIpKTsKICAgICAgdmFyIHByb21pc2UzID0gUlNWUC5yZWpl
        Y3QobmV3IEVycm9yKCIzIikpOwogICAgICB2YXIgcHJvbWlzZXMgPSBbIHBy
        b21pc2UxLCBwcm9taXNlMiwgcHJvbWlzZTMgXTsKCiAgICAgIFJTVlAuUHJv
        bWlzZS5hbGwocHJvbWlzZXMpLnRoZW4oZnVuY3Rpb24oYXJyYXkpewogICAg
        ICAgIC8vIENvZGUgaGVyZSBuZXZlciBydW5zIGJlY2F1c2UgdGhlcmUgYXJl
        IHJlamVjdGVkIHByb21pc2VzIQogICAgICB9LCBmdW5jdGlvbihlcnJvcikg
        ewogICAgICAgIC8vIGVycm9yLm1lc3NhZ2UgPT09ICIyIgogICAgICB9KTsK
        ICAgICAgYGBgCgogICAgICBAbWV0aG9kIGFsbAogICAgICBAZm9yIEVtYmVy
        LlJTVlAuUHJvbWlzZQogICAgICBAcGFyYW0ge0FycmF5fSBlbnRyaWVzIGFy
        cmF5IG9mIHByb21pc2VzCiAgICAgIEBwYXJhbSB7U3RyaW5nfSBsYWJlbCBv
        cHRpb25hbCBzdHJpbmcgZm9yIGxhYmVsaW5nIHRoZSBwcm9taXNlLgogICAg
        ICBVc2VmdWwgZm9yIHRvb2xpbmcuCiAgICAgIEByZXR1cm4ge1Byb21pc2V9
        IHByb21pc2UgdGhhdCBpcyBmdWxmaWxsZWQgd2hlbiBhbGwgYHByb21pc2Vz
        YCBoYXZlIGJlZW4KICAgICAgZnVsZmlsbGVkLCBvciByZWplY3RlZCBpZiBh
        bnkgb2YgdGhlbSBiZWNvbWUgcmVqZWN0ZWQuCiAgICAgIEBzdGF0aWMKICAg
        ICovCiAgICBfX2V4cG9ydHNfX1siZGVmYXVsdCJdID0gZnVuY3Rpb24gYWxs
        KGVudHJpZXMsIGxhYmVsKSB7CgogICAgICAvKmpzaGludCB2YWxpZHRoaXM6
        dHJ1ZSAqLwogICAgICB2YXIgQ29uc3RydWN0b3IgPSB0aGlzOwoKICAgICAg
        cmV0dXJuIG5ldyBDb25zdHJ1Y3RvcihmdW5jdGlvbihyZXNvbHZlLCByZWpl
        Y3QpIHsKICAgICAgICBpZiAoIWlzQXJyYXkoZW50cmllcykpIHsKICAgICAg
        ICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1lvdSBtdXN0IHBhc3MgYW4gYXJy
        YXkgdG8gYWxsLicpOwogICAgICAgIH0KCiAgICAgICAgdmFyIHJlbWFpbmlu
        ZyA9IGVudHJpZXMubGVuZ3RoOwogICAgICAgIHZhciByZXN1bHRzID0gbmV3
        IEFycmF5KHJlbWFpbmluZyk7CiAgICAgICAgdmFyIGVudHJ5LCBwZW5kaW5n
        ID0gdHJ1ZTsKCiAgICAgICAgaWYgKHJlbWFpbmluZyA9PT0gMCkgewogICAg
        ICAgICAgcmVzb2x2ZShyZXN1bHRzKTsKICAgICAgICAgIHJldHVybjsKICAg
        ICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxtZW50QXQoaW5kZXgp
        IHsKICAgICAgICAgIHJldHVybiBmdW5jdGlvbih2YWx1ZSkgewogICAgICAg
        ICAgICByZXN1bHRzW2luZGV4XSA9IHZhbHVlOwogICAgICAgICAgICBpZiAo
        LS1yZW1haW5pbmcgPT09IDApIHsKICAgICAgICAgICAgICByZXNvbHZlKHJl
        c3VsdHMpOwogICAgICAgICAgICB9CiAgICAgICAgICB9OwogICAgICAgIH0K
        CiAgICAgICAgZnVuY3Rpb24gb25SZWplY3Rpb24ocmVhc29uKSB7CiAgICAg
        ICAgICByZW1haW5pbmcgPSAwOwogICAgICAgICAgcmVqZWN0KHJlYXNvbik7
        CiAgICAgICAgfQoKICAgICAgICBmb3IgKHZhciBpbmRleCA9IDA7IGluZGV4
        IDwgZW50cmllcy5sZW5ndGg7IGluZGV4KyspIHsKICAgICAgICAgIGVudHJ5
        ID0gZW50cmllc1tpbmRleF07CiAgICAgICAgICBpZiAoaXNOb25UaGVuYWJs
        ZShlbnRyeSkpIHsKICAgICAgICAgICAgcmVzdWx0c1tpbmRleF0gPSBlbnRy
        eTsKICAgICAgICAgICAgaWYgKC0tcmVtYWluaW5nID09PSAwKSB7CiAgICAg
        ICAgICAgICAgcmVzb2x2ZShyZXN1bHRzKTsKICAgICAgICAgICAgfQogICAg
        ICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgQ29uc3RydWN0b3IuY2FzdChl
        bnRyeSkudGhlbihmdWxmaWxsbWVudEF0KGluZGV4KSwgb25SZWplY3Rpb24p
        OwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgbGFiZWwpOwogICAg
        fTsKICB9KTsKZGVmaW5lKCJyc3ZwL3Byb21pc2UvY2FzdCIsIAogIFsiZXhw
        b3J0cyJdLAogIGZ1bmN0aW9uKF9fZXhwb3J0c19fKSB7CiAgICAidXNlIHN0
        cmljdCI7CiAgICAvKioKICAgICAgYFJTVlAuUHJvbWlzZS5jYXN0YCBjb2Vy
        Y2VzIGl0cyBhcmd1bWVudCB0byBhIHByb21pc2UsIG9yIHJldHVybnMgdGhl
        CiAgICAgIGFyZ3VtZW50IGlmIGl0IGlzIGFscmVhZHkgYSBwcm9taXNlIHdo
        aWNoIHNoYXJlcyBhIGNvbnN0cnVjdG9yIHdpdGggdGhlIGNhc3Rlci4KCiAg
        ICAgIEV4YW1wbGU6CgogICAgICBgYGBqYXZhc2NyaXB0CiAgICAgIHZhciBw
        cm9taXNlID0gUlNWUC5Qcm9taXNlLnJlc29sdmUoMSk7CiAgICAgIHZhciBj
        YXN0ZWQgPSBSU1ZQLlByb21pc2UuY2FzdChwcm9taXNlKTsKCiAgICAgIGNv
        bnNvbGUubG9nKHByb21pc2UgPT09IGNhc3RlZCk7IC8vIHRydWUKICAgICAg
        YGBgCgogICAgICBJbiB0aGUgY2FzZSBvZiBhIHByb21pc2Ugd2hvc2UgY29u
        c3RydWN0b3IgZG9lcyBub3QgbWF0Y2gsIGl0IGlzIGFzc2ltaWxhdGVkLgog
        ICAgICBUaGUgcmVzdWx0aW5nIHByb21pc2Ugd2lsbCBmdWxmaWxsIG9yIHJl
        amVjdCBiYXNlZCBvbiB0aGUgb3V0Y29tZSBvZiB0aGUKICAgICAgcHJvbWlz
        ZSBiZWluZyBjYXN0ZWQuCgogICAgICBFeGFtcGxlOgoKICAgICAgYGBgamF2
        YXNjcmlwdAogICAgICB2YXIgdGhlbm5hYmxlID0gJC5nZXRKU09OKCcvYXBp
        L2ZvbycpOwogICAgICB2YXIgY2FzdGVkID0gUlNWUC5Qcm9taXNlLmNhc3Qo
        dGhlbm5hYmxlKTsKCiAgICAgIGNvbnNvbGUubG9nKHRoZW5uYWJsZSA9PT0g
        Y2FzdGVkKTsgLy8gZmFsc2UKICAgICAgY29uc29sZS5sb2coY2FzdGVkIGlu
        c3RhbmNlb2YgUlNWUC5Qcm9taXNlKSAvLyB0cnVlCgogICAgICBjYXN0ZWQu
        dGhlbihmdW5jdGlvbihkYXRhKSB7CiAgICAgICAgLy8gZGF0YSBpcyB0aGUg
        dmFsdWUgZ2V0SlNPTiBmdWxmaWxscyB3aXRoCiAgICAgIH0pOwogICAgICBg
        YGAKCiAgICAgIEluIHRoZSBjYXNlIG9mIGEgbm9uLXByb21pc2UsIGEgcHJv
        bWlzZSB3aGljaCB3aWxsIGZ1bGZpbGwgd2l0aCB0aGF0IHZhbHVlIGlzCiAg
        ICAgIHJldHVybmVkLgoKICAgICAgRXhhbXBsZToKCiAgICAgIGBgYGphdmFz
        Y3JpcHQKICAgICAgdmFyIHZhbHVlID0gMTsgLy8gY291bGQgYmUgYSBudW1i
        ZXIsIGJvb2xlYW4sIHN0cmluZywgdW5kZWZpbmVkLi4uCiAgICAgIHZhciBj
        YXN0ZWQgPSBSU1ZQLlByb21pc2UuY2FzdCh2YWx1ZSk7CgogICAgICBjb25z
        b2xlLmxvZyh2YWx1ZSA9PT0gY2FzdGVkKTsgLy8gZmFsc2UKICAgICAgY29u
        c29sZS5sb2coY2FzdGVkIGluc3RhbmNlb2YgUlNWUC5Qcm9taXNlKSAvLyB0
        cnVlCgogICAgICBjYXN0ZWQudGhlbihmdW5jdGlvbih2YWwpIHsKICAgICAg
        ICB2YWwgPT09IHZhbHVlIC8vID0+IHRydWUKICAgICAgfSk7CiAgICAgIGBg
        YAoKICAgICAgYFJTVlAuUHJvbWlzZS5jYXN0YCBpcyBzaW1pbGFyIHRvIGBS
        U1ZQLlByb21pc2UucmVzb2x2ZWAsIGJ1dCBgUlNWUC5Qcm9taXNlLmNhc3Rg
        IGRpZmZlcnMgaW4gdGhlCiAgICAgIGZvbGxvd2luZyB3YXlzOgoKICAgICAg
        KiBgUlNWUC5Qcm9taXNlLmNhc3RgIHNlcnZlcyBhcyBhIG1lbW9yeS1lZmZp
        Y2llbnQgd2F5IG9mIGdldHRpbmcgYSBwcm9taXNlLCB3aGVuIHlvdQogICAg
        ICBoYXZlIHNvbWV0aGluZyB0aGF0IGNvdWxkIGVpdGhlciBiZSBhIHByb21p
        c2Ugb3IgYSB2YWx1ZS4gUlNWUC5yZXNvbHZlCiAgICAgIHdpbGwgaGF2ZSB0
        aGUgc2FtZSBlZmZlY3QgYnV0IHdpbGwgY3JlYXRlIGEgbmV3IHByb21pc2Ug
        d3JhcHBlciBpZiB0aGUKICAgICAgYXJndW1lbnQgaXMgYSBwcm9taXNlLgog
        ICAgICAqIGBSU1ZQLlByb21pc2UuY2FzdGAgaXMgYSB3YXkgb2YgY2FzdGlu
        ZyBpbmNvbWluZyB0aGVuYWJsZXMgb3IgcHJvbWlzZSBzdWJjbGFzc2VzIHRv
        CiAgICAgIHByb21pc2VzIG9mIHRoZSBleGFjdCBjbGFzcyBzcGVjaWZpZWQs
        IHNvIHRoYXQgdGhlIHJlc3VsdGluZyBvYmplY3QncyBgdGhlbmAgaXMKICAg
        ICAgZW5zdXJlZCB0byBoYXZlIHRoZSBiZWhhdmlvciBvZiB0aGUgY29uc3Ry
        dWN0b3IgeW91IGFyZSBjYWxsaW5nIGNhc3Qgb24gKGkuZS4sIFJTVlAuUHJv
        bWlzZSkuCgogICAgICBAbWV0aG9kIGNhc3QKICAgICAgQHBhcmFtIHtPYmpl
        Y3R9IG9iamVjdCB0byBiZSBjYXN0ZWQKICAgICAgQHBhcmFtIHtTdHJpbmd9
        IGxhYmVsIG9wdGlvbmFsIHN0cmluZyBmb3IgbGFiZWxpbmcgdGhlIHByb21p
        c2UuCiAgICAgIFVzZWZ1bCBmb3IgdG9vbGluZy4KICAgICAgQHJldHVybiB7
        UHJvbWlzZX0gcHJvbWlzZQogICAgICBAc3RhdGljCiAgICAqLwoKICAgIF9f
        ZXhwb3J0c19fWyJkZWZhdWx0Il0gPSBmdW5jdGlvbiBjYXN0KG9iamVjdCwg
        bGFiZWwpIHsKICAgICAgLypqc2hpbnQgdmFsaWR0aGlzOnRydWUgKi8KICAg
        ICAgdmFyIENvbnN0cnVjdG9yID0gdGhpczsKCiAgICAgIGlmIChvYmplY3Qg
        JiYgdHlwZW9mIG9iamVjdCA9PT0gJ29iamVjdCcgJiYgb2JqZWN0LmNvbnN0
        cnVjdG9yID09PSBDb25zdHJ1Y3RvcikgewogICAgICAgIHJldHVybiBvYmpl
        Y3Q7CiAgICAgIH0KCiAgICAgIHJldHVybiBuZXcgQ29uc3RydWN0b3IoZnVu
        Y3Rpb24ocmVzb2x2ZSkgewogICAgICAgIHJlc29sdmUob2JqZWN0KTsKICAg
        ICAgfSwgbGFiZWwpOwogICAgfTsKICB9KTsKZGVmaW5lKCJyc3ZwL3Byb21p
        c2UvcmFjZSIsIAogIFsiLi4vdXRpbHMiLCJleHBvcnRzIl0sCiAgZnVuY3Rp
        b24oX19kZXBlbmRlbmN5MV9fLCBfX2V4cG9ydHNfXykgewogICAgInVzZSBz
        dHJpY3QiOwogICAgLyogZ2xvYmFsIHRvU3RyaW5nICovCgogICAgdmFyIGlz
        QXJyYXkgPSBfX2RlcGVuZGVuY3kxX18uaXNBcnJheTsKICAgIHZhciBpc0Z1
        bmN0aW9uID0gX19kZXBlbmRlbmN5MV9fLmlzRnVuY3Rpb247CiAgICB2YXIg
        aXNOb25UaGVuYWJsZSA9IF9fZGVwZW5kZW5jeTFfXy5pc05vblRoZW5hYmxl
        OwoKICAgIC8qKgogICAgICBgUlNWUC5Qcm9taXNlLnJhY2VgIHJldHVybnMg
        YSBuZXcgcHJvbWlzZSB3aGljaCBpcyBzZXR0bGVkIGluIHRoZSBzYW1lIHdh
        eSBhcyB0aGUKICAgICAgZmlyc3QgcGFzc2VkIHByb21pc2UgdG8gc2V0dGxl
        LgoKICAgICAgRXhhbXBsZToKCiAgICAgIGBgYGphdmFzY3JpcHQKICAgICAg
        dmFyIHByb21pc2UxID0gbmV3IFJTVlAuUHJvbWlzZShmdW5jdGlvbihyZXNv
        bHZlLCByZWplY3QpewogICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXsK
        ICAgICAgICAgIHJlc29sdmUoInByb21pc2UgMSIpOwogICAgICAgIH0sIDIw
        MCk7CiAgICAgIH0pOwoKICAgICAgdmFyIHByb21pc2UyID0gbmV3IFJTVlAu
        UHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpewogICAgICAgIHNl
        dFRpbWVvdXQoZnVuY3Rpb24oKXsKICAgICAgICAgIHJlc29sdmUoInByb21p
        c2UgMiIpOwogICAgICAgIH0sIDEwMCk7CiAgICAgIH0pOwoKICAgICAgUlNW
        UC5Qcm9taXNlLnJhY2UoW3Byb21pc2UxLCBwcm9taXNlMl0pLnRoZW4oZnVu
        Y3Rpb24ocmVzdWx0KXsKICAgICAgICAvLyByZXN1bHQgPT09ICJwcm9taXNl
        IDIiIGJlY2F1c2UgaXQgd2FzIHJlc29sdmVkIGJlZm9yZSBwcm9taXNlMQog
        ICAgICAgIC8vIHdhcyByZXNvbHZlZC4KICAgICAgfSk7CiAgICAgIGBgYAoK
        ICAgICAgYFJTVlAuUHJvbWlzZS5yYWNlYCBpcyBkZXRlcm1pbmlzdGljIGlu
        IHRoYXQgb25seSB0aGUgc3RhdGUgb2YgdGhlIGZpcnN0CiAgICAgIHNldHRs
        ZWQgcHJvbWlzZSBtYXR0ZXJzLiBGb3IgZXhhbXBsZSwgZXZlbiBpZiBvdGhl
        ciBwcm9taXNlcyBnaXZlbiB0byB0aGUKICAgICAgYHByb21pc2VzYCBhcnJh
        eSBhcmd1bWVudCBhcmUgcmVzb2x2ZWQsIGJ1dCB0aGUgZmlyc3Qgc2V0dGxl
        ZCBwcm9taXNlIGhhcwogICAgICBiZWNvbWUgcmVqZWN0ZWQgYmVmb3JlIHRo
        ZSBvdGhlciBwcm9taXNlcyBiZWNhbWUgZnVsZmlsbGVkLCB0aGUgcmV0dXJu
        ZWQKICAgICAgcHJvbWlzZSB3aWxsIGJlY29tZSByZWplY3RlZDoKCiAgICAg
        IGBgYGphdmFzY3JpcHQKICAgICAgdmFyIHByb21pc2UxID0gbmV3IFJTVlAu
        UHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpewogICAgICAgIHNl
        dFRpbWVvdXQoZnVuY3Rpb24oKXsKICAgICAgICAgIHJlc29sdmUoInByb21p
        c2UgMSIpOwogICAgICAgIH0sIDIwMCk7CiAgICAgIH0pOwoKICAgICAgdmFy
        IHByb21pc2UyID0gbmV3IFJTVlAuUHJvbWlzZShmdW5jdGlvbihyZXNvbHZl
        LCByZWplY3QpewogICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXsKICAg
        ICAgICAgIHJlamVjdChuZXcgRXJyb3IoInByb21pc2UgMiIpKTsKICAgICAg
        ICB9LCAxMDApOwogICAgICB9KTsKCiAgICAgIFJTVlAuUHJvbWlzZS5yYWNl
        KFtwcm9taXNlMSwgcHJvbWlzZTJdKS50aGVuKGZ1bmN0aW9uKHJlc3VsdCl7
        CiAgICAgICAgLy8gQ29kZSBoZXJlIG5ldmVyIHJ1bnMKICAgICAgfSwgZnVu
        Y3Rpb24ocmVhc29uKXsKICAgICAgICAvLyByZWFzb24ubWVzc2FnZSA9PT0g
        InByb21pc2UyIiBiZWNhdXNlIHByb21pc2UgMiBiZWNhbWUgcmVqZWN0ZWQg
        YmVmb3JlCiAgICAgICAgLy8gcHJvbWlzZSAxIGJlY2FtZSBmdWxmaWxsZWQK
        ICAgICAgfSk7CiAgICAgIGBgYAoKICAgICAgQW4gZXhhbXBsZSByZWFsLXdv
        cmxkIHVzZSBjYXNlIGlzIGltcGxlbWVudGluZyB0aW1lb3V0czoKCiAgICAg
        IGBgYGphdmFzY3JpcHQKICAgICAgUlNWUC5Qcm9taXNlLnJhY2UoW2FqYXgo
        J2Zvby5qc29uJyksIHRpbWVvdXQoNTAwMCldKQogICAgICBgYGAKCiAgICAg
        IEBtZXRob2QgcmFjZQogICAgICBAcGFyYW0ge0FycmF5fSBwcm9taXNlcyBh
        cnJheSBvZiBwcm9taXNlcyB0byBvYnNlcnZlCiAgICAgIEBwYXJhbSB7U3Ry
        aW5nfSBsYWJlbCBvcHRpb25hbCBzdHJpbmcgZm9yIGRlc2NyaWJpbmcgdGhl
        IHByb21pc2UgcmV0dXJuZWQuCiAgICAgIFVzZWZ1bCBmb3IgdG9vbGluZy4K
        ICAgICAgQHJldHVybiB7UHJvbWlzZX0gYSBwcm9taXNlIHdoaWNoIHNldHRs
        ZXMgaW4gdGhlIHNhbWUgd2F5IGFzIHRoZSBmaXJzdCBwYXNzZWQKICAgICAg
        cHJvbWlzZSB0byBzZXR0bGUuCiAgICAgIEBzdGF0aWMKICAgICovCiAgICBf
        X2V4cG9ydHNfX1siZGVmYXVsdCJdID0gZnVuY3Rpb24gcmFjZShlbnRyaWVz
        LCBsYWJlbCkgewogICAgICAvKmpzaGludCB2YWxpZHRoaXM6dHJ1ZSAqLwog
        ICAgICB2YXIgQ29uc3RydWN0b3IgPSB0aGlzLCBlbnRyeTsKCiAgICAgIHJl
        dHVybiBuZXcgQ29uc3RydWN0b3IoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0
        KSB7CiAgICAgICAgaWYgKCFpc0FycmF5KGVudHJpZXMpKSB7CiAgICAgICAg
        ICB0aHJvdyBuZXcgVHlwZUVycm9yKCdZb3UgbXVzdCBwYXNzIGFuIGFycmF5
        IHRvIHJhY2UuJyk7CiAgICAgICAgfQoKICAgICAgICB2YXIgcGVuZGluZyA9
        IHRydWU7CgogICAgICAgIGZ1bmN0aW9uIG9uRnVsZmlsbG1lbnQodmFsdWUp
        IHsgaWYgKHBlbmRpbmcpIHsgcGVuZGluZyA9IGZhbHNlOyByZXNvbHZlKHZh
        bHVlKTsgfSB9CiAgICAgICAgZnVuY3Rpb24gb25SZWplY3Rpb24ocmVhc29u
        KSAgeyBpZiAocGVuZGluZykgeyBwZW5kaW5nID0gZmFsc2U7IHJlamVjdChy
        ZWFzb24pOyB9IH0KCiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlbnRy
        aWVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICBlbnRyeSA9IGVudHJpZXNb
        aV07CiAgICAgICAgICBpZiAoaXNOb25UaGVuYWJsZShlbnRyeSkpIHsKICAg
        ICAgICAgICAgcGVuZGluZyA9IGZhbHNlOwogICAgICAgICAgICByZXNvbHZl
        KGVudHJ5KTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfSBlbHNl
        IHsKICAgICAgICAgICAgQ29uc3RydWN0b3IuY2FzdChlbnRyeSkudGhlbihv
        bkZ1bGZpbGxtZW50LCBvblJlamVjdGlvbik7CiAgICAgICAgICB9CiAgICAg
        ICAgfQogICAgICB9LCBsYWJlbCk7CiAgICB9OwogIH0pOwpkZWZpbmUoInJz
        dnAvcHJvbWlzZS9yZWplY3QiLCAKICBbImV4cG9ydHMiXSwKICBmdW5jdGlv
        bihfX2V4cG9ydHNfXykgewogICAgInVzZSBzdHJpY3QiOwogICAgLyoqCiAg
        ICAgIGBSU1ZQLlByb21pc2UucmVqZWN0YCByZXR1cm5zIGEgcHJvbWlzZSBy
        ZWplY3RlZCB3aXRoIHRoZSBwYXNzZWQgYHJlYXNvbmAuCiAgICAgIEl0IGlz
        IHNob3J0aGFuZCBmb3IgdGhlIGZvbGxvd2luZzoKCiAgICAgIGBgYGphdmFz
        Y3JpcHQKICAgICAgdmFyIHByb21pc2UgPSBuZXcgUlNWUC5Qcm9taXNlKGZ1
        bmN0aW9uKHJlc29sdmUsIHJlamVjdCl7CiAgICAgICAgcmVqZWN0KG5ldyBF
        cnJvcignV0hPT1BTJykpOwogICAgICB9KTsKCiAgICAgIHByb21pc2UudGhl
        bihmdW5jdGlvbih2YWx1ZSl7CiAgICAgICAgLy8gQ29kZSBoZXJlIGRvZXNu
        J3QgcnVuIGJlY2F1c2UgdGhlIHByb21pc2UgaXMgcmVqZWN0ZWQhCiAgICAg
        IH0sIGZ1bmN0aW9uKHJlYXNvbil7CiAgICAgICAgLy8gcmVhc29uLm1lc3Nh
        Z2UgPT09ICdXSE9PUFMnCiAgICAgIH0pOwogICAgICBgYGAKCiAgICAgIElu
        c3RlYWQgb2Ygd3JpdGluZyB0aGUgYWJvdmUsIHlvdXIgY29kZSBub3cgc2lt
        cGx5IGJlY29tZXMgdGhlIGZvbGxvd2luZzoKCiAgICAgIGBgYGphdmFzY3Jp
        cHQKICAgICAgdmFyIHByb21pc2UgPSBSU1ZQLlByb21pc2UucmVqZWN0KG5l
        dyBFcnJvcignV0hPT1BTJykpOwoKICAgICAgcHJvbWlzZS50aGVuKGZ1bmN0
        aW9uKHZhbHVlKXsKICAgICAgICAvLyBDb2RlIGhlcmUgZG9lc24ndCBydW4g
        YmVjYXVzZSB0aGUgcHJvbWlzZSBpcyByZWplY3RlZCEKICAgICAgfSwgZnVu
        Y3Rpb24ocmVhc29uKXsKICAgICAgICAvLyByZWFzb24ubWVzc2FnZSA9PT0g
        J1dIT09QUycKICAgICAgfSk7CiAgICAgIGBgYAoKICAgICAgQG1ldGhvZCBy
        ZWplY3QKICAgICAgQHBhcmFtIHtBbnl9IHJlYXNvbiB2YWx1ZSB0aGF0IHRo
        ZSByZXR1cm5lZCBwcm9taXNlIHdpbGwgYmUgcmVqZWN0ZWQgd2l0aC4KICAg
        ICAgQHBhcmFtIHtTdHJpbmd9IGxhYmVsIG9wdGlvbmFsIHN0cmluZyBmb3Ig
        aWRlbnRpZnlpbmcgdGhlIHJldHVybmVkIHByb21pc2UuCiAgICAgIFVzZWZ1
        bCBmb3IgdG9vbGluZy4KICAgICAgQHJldHVybiB7UHJvbWlzZX0gYSBwcm9t
        aXNlIHJlamVjdGVkIHdpdGggdGhlIGdpdmVuIGByZWFzb25gLgogICAgICBA
        c3RhdGljCiAgICAqLwogICAgX19leHBvcnRzX19bImRlZmF1bHQiXSA9IGZ1
        bmN0aW9uIHJlamVjdChyZWFzb24sIGxhYmVsKSB7CiAgICAgIC8qanNoaW50
        IHZhbGlkdGhpczp0cnVlICovCiAgICAgIHZhciBDb25zdHJ1Y3RvciA9IHRo
        aXM7CgogICAgICByZXR1cm4gbmV3IENvbnN0cnVjdG9yKGZ1bmN0aW9uIChy
        ZXNvbHZlLCByZWplY3QpIHsKICAgICAgICByZWplY3QocmVhc29uKTsKICAg
        ICAgfSwgbGFiZWwpOwogICAgfTsKICB9KTsKZGVmaW5lKCJyc3ZwL3Byb21p
        c2UvcmVzb2x2ZSIsIAogIFsiZXhwb3J0cyJdLAogIGZ1bmN0aW9uKF9fZXhw
        b3J0c19fKSB7CiAgICAidXNlIHN0cmljdCI7CiAgICAvKioKICAgICAgYFJT
        VlAuUHJvbWlzZS5yZXNvbHZlYCByZXR1cm5zIGEgcHJvbWlzZSB0aGF0IHdp
        bGwgYmVjb21lIHJlc29sdmVkIHdpdGggdGhlCiAgICAgIHBhc3NlZCBgdmFs
        dWVgLiBJdCBpcyBzaG9ydGhhbmQgZm9yIHRoZSBmb2xsb3dpbmc6CgogICAg
        ICBgYGBqYXZhc2NyaXB0CiAgICAgIHZhciBwcm9taXNlID0gbmV3IFJTVlAu
        UHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpewogICAgICAgIHJl
        c29sdmUoMSk7CiAgICAgIH0pOwoKICAgICAgcHJvbWlzZS50aGVuKGZ1bmN0
        aW9uKHZhbHVlKXsKICAgICAgICAvLyB2YWx1ZSA9PT0gMQogICAgICB9KTsK
        ICAgICAgYGBgCgogICAgICBJbnN0ZWFkIG9mIHdyaXRpbmcgdGhlIGFib3Zl
        LCB5b3VyIGNvZGUgbm93IHNpbXBseSBiZWNvbWVzIHRoZSBmb2xsb3dpbmc6
        CgogICAgICBgYGBqYXZhc2NyaXB0CiAgICAgIHZhciBwcm9taXNlID0gUlNW
        UC5Qcm9taXNlLnJlc29sdmUoMSk7CgogICAgICBwcm9taXNlLnRoZW4oZnVu
        Y3Rpb24odmFsdWUpewogICAgICAgIC8vIHZhbHVlID09PSAxCiAgICAgIH0p
        OwogICAgICBgYGAKCiAgICAgIEBtZXRob2QgcmVzb2x2ZQogICAgICBAcGFy
        YW0ge0FueX0gdmFsdWUgdmFsdWUgdGhhdCB0aGUgcmV0dXJuZWQgcHJvbWlz
        ZSB3aWxsIGJlIHJlc29sdmVkIHdpdGgKICAgICAgQHBhcmFtIHtTdHJpbmd9
        IGxhYmVsIG9wdGlvbmFsIHN0cmluZyBmb3IgaWRlbnRpZnlpbmcgdGhlIHJl
        dHVybmVkIHByb21pc2UuCiAgICAgIFVzZWZ1bCBmb3IgdG9vbGluZy4KICAg
        ICAgQHJldHVybiB7UHJvbWlzZX0gYSBwcm9taXNlIHRoYXQgd2lsbCBiZWNv
        bWUgZnVsZmlsbGVkIHdpdGggdGhlIGdpdmVuCiAgICAgIGB2YWx1ZWAKICAg
        ICAgQHN0YXRpYwogICAgKi8KICAgIF9fZXhwb3J0c19fWyJkZWZhdWx0Il0g
        PSBmdW5jdGlvbiByZXNvbHZlKHZhbHVlLCBsYWJlbCkgewogICAgICAvKmpz
        aGludCB2YWxpZHRoaXM6dHJ1ZSAqLwogICAgICB2YXIgQ29uc3RydWN0b3Ig
        PSB0aGlzOwoKICAgICAgcmV0dXJuIG5ldyBDb25zdHJ1Y3RvcihmdW5jdGlv
        bihyZXNvbHZlLCByZWplY3QpIHsKICAgICAgICByZXNvbHZlKHZhbHVlKTsK
        ICAgICAgfSwgbGFiZWwpOwogICAgfTsKICB9KTsKZGVmaW5lKCJyc3ZwL3Jh
        Y2UiLCAKICBbIi4vcHJvbWlzZSIsImV4cG9ydHMiXSwKICBmdW5jdGlvbihf
        X2RlcGVuZGVuY3kxX18sIF9fZXhwb3J0c19fKSB7CiAgICAidXNlIHN0cmlj
        dCI7CiAgICB2YXIgUHJvbWlzZSA9IF9fZGVwZW5kZW5jeTFfX1siZGVmYXVs
        dCJdOwoKICAgIC8qKgogICAgICBUaGlzIGlzIGEgY29udmVuaWVudCBhbGlh
        cyBmb3IgYFJTVlAuUHJvbWlzZS5yYWNlYC4KCiAgICAgIEBtZXRob2QgcmFj
        ZQogICAgICBAcGFyYW0ge0FycmF5fSBhcnJheSBBcnJheSBvZiBwcm9taXNl
        cy4KICAgICAgQHBhcmFtIHtTdHJpbmd9IGxhYmVsIEFuIG9wdGlvbmFsIGxh
        YmVsLiBUaGlzIGlzIHVzZWZ1bAogICAgICBmb3IgdG9vbGluZy4KICAgICAg
        QHN0YXRpYwogICAgKi8KICAgIF9fZXhwb3J0c19fWyJkZWZhdWx0Il0gPSBm
        dW5jdGlvbiByYWNlKGFycmF5LCBsYWJlbCkgewogICAgICByZXR1cm4gUHJv
        bWlzZS5yYWNlKGFycmF5LCBsYWJlbCk7CiAgICB9OwogIH0pOwpkZWZpbmUo
        InJzdnAvcmVqZWN0IiwgCiAgWyIuL3Byb21pc2UiLCJleHBvcnRzIl0sCiAg
        ZnVuY3Rpb24oX19kZXBlbmRlbmN5MV9fLCBfX2V4cG9ydHNfXykgewogICAg
        InVzZSBzdHJpY3QiOwogICAgdmFyIFByb21pc2UgPSBfX2RlcGVuZGVuY3kx
        X19bImRlZmF1bHQiXTsKCiAgICAvKioKICAgICAgVGhpcyBpcyBhIGNvbnZl
        bmllbnQgYWxpYXMgZm9yIGBSU1ZQLlByb21pc2UucmVqZWN0YC4KCiAgICAg
        IEBtZXRob2QgcmVqZWN0CiAgICAgIEBmb3IgUlNWUAogICAgICBAcGFyYW0g
        e0FueX0gcmVhc29uIHZhbHVlIHRoYXQgdGhlIHJldHVybmVkIHByb21pc2Ug
        d2lsbCBiZSByZWplY3RlZCB3aXRoLgogICAgICBAcGFyYW0ge1N0cmluZ30g
        bGFiZWwgb3B0aW9uYWwgc3RyaW5nIGZvciBpZGVudGlmeWluZyB0aGUgcmV0
        dXJuZWQgcHJvbWlzZS4KICAgICAgVXNlZnVsIGZvciB0b29saW5nLgogICAg
        ICBAcmV0dXJuIHtQcm9taXNlfSBhIHByb21pc2UgcmVqZWN0ZWQgd2l0aCB0
        aGUgZ2l2ZW4gYHJlYXNvbmAuCiAgICAgIEBzdGF0aWMKICAgICovCiAgICBf
        X2V4cG9ydHNfX1siZGVmYXVsdCJdID0gZnVuY3Rpb24gcmVqZWN0KHJlYXNv
        biwgbGFiZWwpIHsKICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KHJlYXNv
        biwgbGFiZWwpOwogICAgfTsKICB9KTsKZGVmaW5lKCJyc3ZwL3Jlc29sdmUi
        LCAKICBbIi4vcHJvbWlzZSIsImV4cG9ydHMiXSwKICBmdW5jdGlvbihfX2Rl
        cGVuZGVuY3kxX18sIF9fZXhwb3J0c19fKSB7CiAgICAidXNlIHN0cmljdCI7
        CiAgICB2YXIgUHJvbWlzZSA9IF9fZGVwZW5kZW5jeTFfX1siZGVmYXVsdCJd
        OwoKICAgIC8qKgogICAgICBUaGlzIGlzIGEgY29udmVuaWVudCBhbGlhcyBm
        b3IgYFJTVlAuUHJvbWlzZS5yZXNvbHZlYC4KCiAgICAgIEBtZXRob2QgcmVz
        b2x2ZQogICAgICBAZm9yIFJTVlAKICAgICAgQHBhcmFtIHtBbnl9IHZhbHVl
        IHZhbHVlIHRoYXQgdGhlIHJldHVybmVkIHByb21pc2Ugd2lsbCBiZSByZXNv
        bHZlZCB3aXRoCiAgICAgIEBwYXJhbSB7U3RyaW5nfSBsYWJlbCBvcHRpb25h
        bCBzdHJpbmcgZm9yIGlkZW50aWZ5aW5nIHRoZSByZXR1cm5lZCBwcm9taXNl
        LgogICAgICBVc2VmdWwgZm9yIHRvb2xpbmcuCiAgICAgIEByZXR1cm4ge1By
        b21pc2V9IGEgcHJvbWlzZSB0aGF0IHdpbGwgYmVjb21lIGZ1bGZpbGxlZCB3
        aXRoIHRoZSBnaXZlbgogICAgICBgdmFsdWVgCiAgICAgIEBzdGF0aWMKICAg
        ICovCiAgICBfX2V4cG9ydHNfX1siZGVmYXVsdCJdID0gZnVuY3Rpb24gcmVz
        b2x2ZSh2YWx1ZSwgbGFiZWwpIHsKICAgICAgcmV0dXJuIFByb21pc2UucmVz
        b2x2ZSh2YWx1ZSwgbGFiZWwpOwogICAgfTsKICB9KTsKZGVmaW5lKCJyc3Zw
        L3JldGhyb3ciLCAKICBbImV4cG9ydHMiXSwKICBmdW5jdGlvbihfX2V4cG9y
        dHNfXykgewogICAgInVzZSBzdHJpY3QiOwogICAgLyoqCiAgICAgIGBSU1ZQ
        LnJldGhyb3dgIHdpbGwgcmV0aHJvdyBhbiBlcnJvciBvbiB0aGUgbmV4dCB0
        dXJuIG9mIHRoZSBKYXZhU2NyaXB0IGV2ZW50CiAgICAgIGxvb3AgaW4gb3Jk
        ZXIgdG8gYWlkIGRlYnVnZ2luZy4KCiAgICAgIFByb21pc2VzIEErIHNwZWNp
        ZmllcyB0aGF0IGFueSBleGNlcHRpb25zIHRoYXQgb2NjdXIgd2l0aCBhIHBy
        b21pc2UgbXVzdCBiZQogICAgICBjYXVnaHQgYnkgdGhlIHByb21pc2VzIGlt
        cGxlbWVudGF0aW9uIGFuZCBidWJibGVkIHRvIHRoZSBsYXN0IGhhbmRsZXIu
        IEZvcgogICAgICB0aGlzIHJlYXNvbiwgaXQgaXMgcmVjb21tZW5kZWQgdGhh
        dCB5b3UgYWx3YXlzIHNwZWNpZnkgYSBzZWNvbmQgcmVqZWN0aW9uCiAgICAg
        IGhhbmRsZXIgZnVuY3Rpb24gdG8gYHRoZW5gLiBIb3dldmVyLCBgUlNWUC5y
        ZXRocm93YCB3aWxsIHRocm93IHRoZSBleGNlcHRpb24KICAgICAgb3V0c2lk
        ZSBvZiB0aGUgcHJvbWlzZSwgc28gaXQgYnViYmxlcyB1cCB0byB5b3VyIGNv
        bnNvbGUgaWYgaW4gdGhlIGJyb3dzZXIsCiAgICAgIG9yIGRvbWFpbi9jYXVz
        ZSB1bmNhdWdodCBleGNlcHRpb24gaW4gTm9kZS4gYHJldGhyb3dgIHdpbGwg
        YWxzbyB0aHJvdyB0aGUKICAgICAgZXJyb3IgYWdhaW4gc28gdGhlIGVycm9y
        IGNhbiBiZSBoYW5kbGVkIGJ5IHRoZSBwcm9taXNlIHBlciB0aGUgc3BlYy4K
        CiAgICAgIGBgYGphdmFzY3JpcHQKICAgICAgZnVuY3Rpb24gdGhyb3dzKCl7
        CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdXaG9vcHMhJyk7CiAgICAgIH0K
        CiAgICAgIHZhciBwcm9taXNlID0gbmV3IFJTVlAuUHJvbWlzZShmdW5jdGlv
        bihyZXNvbHZlLCByZWplY3QpewogICAgICAgIHRocm93cygpOwogICAgICB9
        KTsKCiAgICAgIHByb21pc2UuY2F0Y2goUlNWUC5yZXRocm93KS50aGVuKGZ1
        bmN0aW9uKCl7CiAgICAgICAgLy8gQ29kZSBoZXJlIGRvZXNuJ3QgcnVuIGJl
        Y2F1c2UgdGhlIHByb21pc2UgYmVjYW1lIHJlamVjdGVkIGR1ZSB0byBhbgog
        ICAgICAgIC8vIGVycm9yIQogICAgICB9LCBmdW5jdGlvbiAoZXJyKXsKICAg
        ICAgICAvLyBoYW5kbGUgdGhlIGVycm9yIGhlcmUKICAgICAgfSk7CiAgICAg
        IGBgYAoKICAgICAgVGhlICdXaG9vcHMnIGVycm9yIHdpbGwgYmUgdGhyb3du
        IG9uIHRoZSBuZXh0IHR1cm4gb2YgdGhlIGV2ZW50IGxvb3AKICAgICAgYW5k
        IHlvdSBjYW4gd2F0Y2ggZm9yIGl0IGluIHlvdXIgY29uc29sZS4gWW91IGNh
        biBhbHNvIGhhbmRsZSBpdCB1c2luZyBhCiAgICAgIHJlamVjdGlvbiBoYW5k
        bGVyIGdpdmVuIHRvIGAudGhlbmAgb3IgYC5jYXRjaGAgb24gdGhlIHJldHVy
        bmVkIHByb21pc2UuCgogICAgICBAbWV0aG9kIHJldGhyb3cKICAgICAgQGZv
        ciBSU1ZQCiAgICAgIEBwYXJhbSB7RXJyb3J9IHJlYXNvbiByZWFzb24gdGhl
        IHByb21pc2UgYmVjYW1lIHJlamVjdGVkLgogICAgICBAdGhyb3dzIEVycm9y
        CiAgICAgIEBzdGF0aWMKICAgICovCiAgICBfX2V4cG9ydHNfX1siZGVmYXVs
        dCJdID0gZnVuY3Rpb24gcmV0aHJvdyhyZWFzb24pIHsKICAgICAgc2V0VGlt
        ZW91dChmdW5jdGlvbigpIHsKICAgICAgICB0aHJvdyByZWFzb247CiAgICAg
        IH0pOwogICAgICB0aHJvdyByZWFzb247CiAgICB9OwogIH0pOwpkZWZpbmUo
        InJzdnAvdXRpbHMiLCAKICBbImV4cG9ydHMiXSwKICBmdW5jdGlvbihfX2V4
        cG9ydHNfXykgewogICAgInVzZSBzdHJpY3QiOwogICAgZnVuY3Rpb24gb2Jq
        ZWN0T3JGdW5jdGlvbih4KSB7CiAgICAgIHJldHVybiB0eXBlb2YgeCA9PT0g
        ImZ1bmN0aW9uIiB8fCAodHlwZW9mIHggPT09ICJvYmplY3QiICYmIHggIT09
        IG51bGwpOwogICAgfQoKICAgIF9fZXhwb3J0c19fLm9iamVjdE9yRnVuY3Rp
        b24gPSBvYmplY3RPckZ1bmN0aW9uO2Z1bmN0aW9uIGlzRnVuY3Rpb24oeCkg
        ewogICAgICByZXR1cm4gdHlwZW9mIHggPT09ICJmdW5jdGlvbiI7CiAgICB9
        CgogICAgX19leHBvcnRzX18uaXNGdW5jdGlvbiA9IGlzRnVuY3Rpb247ZnVu
        Y3Rpb24gaXNOb25UaGVuYWJsZSh4KSB7CiAgICAgIHJldHVybiAhb2JqZWN0
        T3JGdW5jdGlvbih4KTsKICAgIH0KCiAgICBfX2V4cG9ydHNfXy5pc05vblRo
        ZW5hYmxlID0gaXNOb25UaGVuYWJsZTtmdW5jdGlvbiBpc0FycmF5KHgpIHsK
        ICAgICAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh4
        KSA9PT0gIltvYmplY3QgQXJyYXldIjsKICAgIH0KCiAgICBfX2V4cG9ydHNf
        Xy5pc0FycmF5ID0gaXNBcnJheTsvLyBEYXRlLm5vdyBpcyBub3QgYXZhaWxh
        YmxlIGluIGJyb3dzZXJzIDwgSUU5CiAgICAvLyBodHRwczovL2RldmVsb3Bl
        ci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVy
        ZW5jZS9HbG9iYWxfT2JqZWN0cy9EYXRlL25vdyNDb21wYXRpYmlsaXR5CiAg
        ICB2YXIgbm93ID0gRGF0ZS5ub3cgfHwgZnVuY3Rpb24oKSB7IHJldHVybiBu
        ZXcgRGF0ZSgpLmdldFRpbWUoKTsgfTsKICAgIF9fZXhwb3J0c19fLm5vdyA9
        IG5vdzsKICAgIHZhciBrZXlzT2YgPSBPYmplY3Qua2V5cyB8fCBmdW5jdGlv
        bihvYmplY3QpIHsKICAgICAgdmFyIHJlc3VsdCA9IFtdOwoKICAgICAgZm9y
        ICh2YXIgcHJvcCBpbiBvYmplY3QpIHsKICAgICAgICByZXN1bHQucHVzaChw
        cm9wKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH07CiAg
        ICBfX2V4cG9ydHNfXy5rZXlzT2YgPSBrZXlzT2Y7CiAgfSk7CmRlZmluZSgi
        cnN2cCIsIAogIFsiLi9yc3ZwL3Byb21pc2UiLCIuL3JzdnAvZXZlbnRzIiwi
        Li9yc3ZwL25vZGUiLCIuL3JzdnAvYWxsIiwiLi9yc3ZwL2FsbF9zZXR0bGVk
        IiwiLi9yc3ZwL3JhY2UiLCIuL3JzdnAvaGFzaCIsIi4vcnN2cC9yZXRocm93
        IiwiLi9yc3ZwL2RlZmVyIiwiLi9yc3ZwL2NvbmZpZyIsIi4vcnN2cC9tYXAi
        LCIuL3JzdnAvcmVzb2x2ZSIsIi4vcnN2cC9yZWplY3QiLCIuL3JzdnAvZmls
        dGVyIiwiZXhwb3J0cyJdLAogIGZ1bmN0aW9uKF9fZGVwZW5kZW5jeTFfXywg
        X19kZXBlbmRlbmN5Ml9fLCBfX2RlcGVuZGVuY3kzX18sIF9fZGVwZW5kZW5j
        eTRfXywgX19kZXBlbmRlbmN5NV9fLCBfX2RlcGVuZGVuY3k2X18sIF9fZGVw
        ZW5kZW5jeTdfXywgX19kZXBlbmRlbmN5OF9fLCBfX2RlcGVuZGVuY3k5X18s
        IF9fZGVwZW5kZW5jeTEwX18sIF9fZGVwZW5kZW5jeTExX18sIF9fZGVwZW5k
        ZW5jeTEyX18sIF9fZGVwZW5kZW5jeTEzX18sIF9fZGVwZW5kZW5jeTE0X18s
        IF9fZXhwb3J0c19fKSB7CiAgICAidXNlIHN0cmljdCI7CiAgICB2YXIgUHJv
        bWlzZSA9IF9fZGVwZW5kZW5jeTFfX1siZGVmYXVsdCJdOwogICAgdmFyIEV2
        ZW50VGFyZ2V0ID0gX19kZXBlbmRlbmN5Ml9fWyJkZWZhdWx0Il07CiAgICB2
        YXIgZGVub2RlaWZ5ID0gX19kZXBlbmRlbmN5M19fWyJkZWZhdWx0Il07CiAg
        ICB2YXIgYWxsID0gX19kZXBlbmRlbmN5NF9fWyJkZWZhdWx0Il07CiAgICB2
        YXIgYWxsU2V0dGxlZCA9IF9fZGVwZW5kZW5jeTVfX1siZGVmYXVsdCJdOwog
        ICAgdmFyIHJhY2UgPSBfX2RlcGVuZGVuY3k2X19bImRlZmF1bHQiXTsKICAg
        IHZhciBoYXNoID0gX19kZXBlbmRlbmN5N19fWyJkZWZhdWx0Il07CiAgICB2
        YXIgcmV0aHJvdyA9IF9fZGVwZW5kZW5jeThfX1siZGVmYXVsdCJdOwogICAg
        dmFyIGRlZmVyID0gX19kZXBlbmRlbmN5OV9fWyJkZWZhdWx0Il07CiAgICB2
        YXIgY29uZmlnID0gX19kZXBlbmRlbmN5MTBfXy5jb25maWc7CiAgICB2YXIg
        Y29uZmlndXJlID0gX19kZXBlbmRlbmN5MTBfXy5jb25maWd1cmU7CiAgICB2
        YXIgbWFwID0gX19kZXBlbmRlbmN5MTFfX1siZGVmYXVsdCJdOwogICAgdmFy
        IHJlc29sdmUgPSBfX2RlcGVuZGVuY3kxMl9fWyJkZWZhdWx0Il07CiAgICB2
        YXIgcmVqZWN0ID0gX19kZXBlbmRlbmN5MTNfX1siZGVmYXVsdCJdOwogICAg
        dmFyIGZpbHRlciA9IF9fZGVwZW5kZW5jeTE0X19bImRlZmF1bHQiXTsKCiAg
        ICBmdW5jdGlvbiBhc3luYyhjYWxsYmFjaywgYXJnKSB7CiAgICAgIGNvbmZp
        Zy5hc3luYyhjYWxsYmFjaywgYXJnKTsKICAgIH0KCiAgICBmdW5jdGlvbiBv
        bigpIHsKICAgICAgY29uZmlnLm9uLmFwcGx5KGNvbmZpZywgYXJndW1lbnRz
        KTsKICAgIH0KCiAgICBmdW5jdGlvbiBvZmYoKSB7CiAgICAgIGNvbmZpZy5v
        ZmYuYXBwbHkoY29uZmlnLCBhcmd1bWVudHMpOwogICAgfQoKICAgIC8vIFNl
        dCB1cCBpbnN0cnVtZW50YXRpb24gdGhyb3VnaCBgd2luZG93Ll9fUFJPTUlT
        RV9JTlRSVU1FTlRBVElPTl9fYAogICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09
        ICd1bmRlZmluZWQnICYmIHR5cGVvZiB3aW5kb3cuX19QUk9NSVNFX0lOU1RS
        VU1FTlRBVElPTl9fID09PSAnb2JqZWN0JykgewogICAgICB2YXIgY2FsbGJh
        Y2tzID0gd2luZG93Ll9fUFJPTUlTRV9JTlNUUlVNRU5UQVRJT05fXzsKICAg
        ICAgY29uZmlndXJlKCdpbnN0cnVtZW50JywgdHJ1ZSk7CiAgICAgIGZvciAo
        dmFyIGV2ZW50TmFtZSBpbiBjYWxsYmFja3MpIHsKICAgICAgICBpZiAoY2Fs
        bGJhY2tzLmhhc093blByb3BlcnR5KGV2ZW50TmFtZSkpIHsKICAgICAgICAg
        IG9uKGV2ZW50TmFtZSwgY2FsbGJhY2tzW2V2ZW50TmFtZV0pOwogICAgICAg
        IH0KICAgICAgfQogICAgfQoKICAgIF9fZXhwb3J0c19fLlByb21pc2UgPSBQ
        cm9taXNlOwogICAgX19leHBvcnRzX18uRXZlbnRUYXJnZXQgPSBFdmVudFRh
        cmdldDsKICAgIF9fZXhwb3J0c19fLmFsbCA9IGFsbDsKICAgIF9fZXhwb3J0
        c19fLmFsbFNldHRsZWQgPSBhbGxTZXR0bGVkOwogICAgX19leHBvcnRzX18u
        cmFjZSA9IHJhY2U7CiAgICBfX2V4cG9ydHNfXy5oYXNoID0gaGFzaDsKICAg
        IF9fZXhwb3J0c19fLnJldGhyb3cgPSByZXRocm93OwogICAgX19leHBvcnRz
        X18uZGVmZXIgPSBkZWZlcjsKICAgIF9fZXhwb3J0c19fLmRlbm9kZWlmeSA9
        IGRlbm9kZWlmeTsKICAgIF9fZXhwb3J0c19fLmNvbmZpZ3VyZSA9IGNvbmZp
        Z3VyZTsKICAgIF9fZXhwb3J0c19fLm9uID0gb247CiAgICBfX2V4cG9ydHNf
        Xy5vZmYgPSBvZmY7CiAgICBfX2V4cG9ydHNfXy5yZXNvbHZlID0gcmVzb2x2
        ZTsKICAgIF9fZXhwb3J0c19fLnJlamVjdCA9IHJlamVjdDsKICAgIF9fZXhw
        b3J0c19fLmFzeW5jID0gYXN5bmM7CiAgICBfX2V4cG9ydHNfXy5tYXAgPSBt
        YXA7CiAgICBfX2V4cG9ydHNfXy5maWx0ZXIgPSBmaWx0ZXI7CiAgfSk7Cgp9
        KSgpOwoKKGZ1bmN0aW9uKCkgewpkZWZpbmUoImNvbnRhaW5lci9jb250YWlu
        ZXIiLCAKICBbImNvbnRhaW5lci9pbmhlcml0aW5nX2RpY3QiLCJleHBvcnRz
        Il0sCiAgZnVuY3Rpb24oX19kZXBlbmRlbmN5MV9fLCBfX2V4cG9ydHNfXykg
        ewogICAgInVzZSBzdHJpY3QiOwogICAgdmFyIEluaGVyaXRpbmdEaWN0ID0g
        X19kZXBlbmRlbmN5MV9fWyJkZWZhdWx0Il07CgogICAgLy8gQSBsaWdodHdl
        aWdodCBjb250YWluZXIgdGhhdCBoZWxwcyB0byBhc3NlbWJsZSBhbmQgZGVj
        b3VwbGUgY29tcG9uZW50cy4KICAgIC8vIFB1YmxpYyBhcGkgZm9yIHRoZSBj
        b250YWluZXIgaXMgc3RpbGwgaW4gZmx1eC4KICAgIC8vIFRoZSBwdWJsaWMg
        YXBpLCBzcGVjaWZpZWQgb24gdGhlIGFwcGxpY2F0aW9uIG5hbWVzcGFjZSBz
        aG91bGQgYmUgY29uc2lkZXJlZCB0aGUgc3RhYmxlIGFwaS4KICAgIGZ1bmN0
        aW9uIENvbnRhaW5lcihwYXJlbnQpIHsKICAgICAgdGhpcy5wYXJlbnQgPSBw
        YXJlbnQ7CiAgICAgIHRoaXMuY2hpbGRyZW4gPSBbXTsKCiAgICAgIHRoaXMu
        cmVzb2x2ZXIgPSBwYXJlbnQgJiYgcGFyZW50LnJlc29sdmVyIHx8IGZ1bmN0
        aW9uKCkge307CgogICAgICB0aGlzLnJlZ2lzdHJ5ID0gbmV3IEluaGVyaXRp
        bmdEaWN0KHBhcmVudCAmJiBwYXJlbnQucmVnaXN0cnkpOwogICAgICB0aGlz
        LmNhY2hlID0gbmV3IEluaGVyaXRpbmdEaWN0KHBhcmVudCAmJiBwYXJlbnQu
        Y2FjaGUpOwogICAgICB0aGlzLmZhY3RvcnlDYWNoZSA9IG5ldyBJbmhlcml0
        aW5nRGljdChwYXJlbnQgJiYgcGFyZW50LmZhY3RvcnlDYWNoZSk7CiAgICAg
        IHRoaXMucmVzb2x2ZUNhY2hlID0gbmV3IEluaGVyaXRpbmdEaWN0KHBhcmVu
        dCAmJiBwYXJlbnQucmVzb2x2ZUNhY2hlKTsKICAgICAgdGhpcy50eXBlSW5q
        ZWN0aW9ucyA9IG5ldyBJbmhlcml0aW5nRGljdChwYXJlbnQgJiYgcGFyZW50
        LnR5cGVJbmplY3Rpb25zKTsKICAgICAgdGhpcy5pbmplY3Rpb25zID0ge307
        CgogICAgICB0aGlzLmZhY3RvcnlUeXBlSW5qZWN0aW9ucyA9IG5ldyBJbmhl
        cml0aW5nRGljdChwYXJlbnQgJiYgcGFyZW50LmZhY3RvcnlUeXBlSW5qZWN0
        aW9ucyk7CiAgICAgIHRoaXMuZmFjdG9yeUluamVjdGlvbnMgPSB7fTsKCiAg
        ICAgIHRoaXMuX29wdGlvbnMgPSBuZXcgSW5oZXJpdGluZ0RpY3QocGFyZW50
        ICYmIHBhcmVudC5fb3B0aW9ucyk7CiAgICAgIHRoaXMuX3R5cGVPcHRpb25z
        ID0gbmV3IEluaGVyaXRpbmdEaWN0KHBhcmVudCAmJiBwYXJlbnQuX3R5cGVP
        cHRpb25zKTsKICAgIH0KCiAgICBDb250YWluZXIucHJvdG90eXBlID0gewoK
        ICAgICAgLyoqCiAgICAgICAgQHByb3BlcnR5IHBhcmVudAogICAgICAgIEB0
        eXBlIENvbnRhaW5lcgogICAgICAgIEBkZWZhdWx0IG51bGwKICAgICAgKi8K
        ICAgICAgcGFyZW50OiBudWxsLAoKICAgICAgLyoqCiAgICAgICAgQHByb3Bl
        cnR5IGNoaWxkcmVuCiAgICAgICAgQHR5cGUgQXJyYXkKICAgICAgICBAZGVm
        YXVsdCBbXQogICAgICAqLwogICAgICBjaGlsZHJlbjogbnVsbCwKCiAgICAg
        IC8qKgogICAgICAgIEBwcm9wZXJ0eSByZXNvbHZlcgogICAgICAgIEB0eXBl
        IGZ1bmN0aW9uCiAgICAgICovCiAgICAgIHJlc29sdmVyOiBudWxsLAoKICAg
        ICAgLyoqCiAgICAgICAgQHByb3BlcnR5IHJlZ2lzdHJ5CiAgICAgICAgQHR5
        cGUgSW5oZXJpdGluZ0RpY3QKICAgICAgKi8KICAgICAgcmVnaXN0cnk6IG51
        bGwsCgogICAgICAvKioKICAgICAgICBAcHJvcGVydHkgY2FjaGUKICAgICAg
        ICBAdHlwZSBJbmhlcml0aW5nRGljdAogICAgICAqLwogICAgICBjYWNoZTog
        bnVsbCwKCiAgICAgIC8qKgogICAgICAgIEBwcm9wZXJ0eSB0eXBlSW5qZWN0
        aW9ucwogICAgICAgIEB0eXBlIEluaGVyaXRpbmdEaWN0CiAgICAgICovCiAg
        ICAgIHR5cGVJbmplY3Rpb25zOiBudWxsLAoKICAgICAgLyoqCiAgICAgICAg
        QHByb3BlcnR5IGluamVjdGlvbnMKICAgICAgICBAdHlwZSBPYmplY3QKICAg
        ICAgICBAZGVmYXVsdCB7fQogICAgICAqLwogICAgICBpbmplY3Rpb25zOiBu
        dWxsLAoKICAgICAgLyoqCiAgICAgICAgQHByaXZhdGUKCiAgICAgICAgQHBy
        b3BlcnR5IF9vcHRpb25zCiAgICAgICAgQHR5cGUgSW5oZXJpdGluZ0RpY3QK
        ICAgICAgICBAZGVmYXVsdCBudWxsCiAgICAgICovCiAgICAgIF9vcHRpb25z
        OiBudWxsLAoKICAgICAgLyoqCiAgICAgICAgQHByaXZhdGUKCiAgICAgICAg
        QHByb3BlcnR5IF90eXBlT3B0aW9ucwogICAgICAgIEB0eXBlIEluaGVyaXRp
        bmdEaWN0CiAgICAgICovCiAgICAgIF90eXBlT3B0aW9uczogbnVsbCwKCiAg
        ICAgIC8qKgogICAgICAgIFJldHVybnMgYSBuZXcgY2hpbGQgb2YgdGhlIGN1
        cnJlbnQgY29udGFpbmVyLiBUaGVzZSBjaGlsZHJlbiBhcmUgY29uZmlndXJl
        ZAogICAgICAgIHRvIGNvcnJlY3RseSBpbmhlcml0IGZyb20gdGhlIGN1cnJl
        bnQgY29udGFpbmVyLgoKICAgICAgICBAbWV0aG9kIGNoaWxkCiAgICAgICAg
        QHJldHVybiB7Q29udGFpbmVyfQogICAgICAqLwogICAgICBjaGlsZDogZnVu
        Y3Rpb24oKSB7CiAgICAgICAgdmFyIGNvbnRhaW5lciA9IG5ldyBDb250YWlu
        ZXIodGhpcyk7CiAgICAgICAgdGhpcy5jaGlsZHJlbi5wdXNoKGNvbnRhaW5l
        cik7CiAgICAgICAgcmV0dXJuIGNvbnRhaW5lcjsKICAgICAgfSwKCiAgICAg
        IC8qKgogICAgICAgIFNldHMgYSBrZXktdmFsdWUgcGFpciBvbiB0aGUgY3Vy
        cmVudCBjb250YWluZXIuIElmIGEgcGFyZW50IGNvbnRhaW5lciwKICAgICAg
        ICBoYXMgdGhlIHNhbWUga2V5LCBvbmNlIHNldCBvbiBhIGNoaWxkLCB0aGUg
        cGFyZW50IGFuZCBjaGlsZCB3aWxsIGRpdmVyZ2UKICAgICAgICBhcyBleHBl
        Y3RlZC4KCiAgICAgICAgQG1ldGhvZCBzZXQKICAgICAgICBAcGFyYW0ge09i
        amVjdH0gb2JqZWN0CiAgICAgICAgQHBhcmFtIHtTdHJpbmd9IGtleQogICAg
        ICAgIEBwYXJhbSB7YW55fSB2YWx1ZQogICAgICAqLwogICAgICBzZXQ6IGZ1
        bmN0aW9uKG9iamVjdCwga2V5LCB2YWx1ZSkgewogICAgICAgIG9iamVjdFtr
        ZXldID0gdmFsdWU7CiAgICAgIH0sCgogICAgICAvKioKICAgICAgICBSZWdp
        c3RlcnMgYSBmYWN0b3J5IGZvciBsYXRlciBpbmplY3Rpb24uCgogICAgICAg
        IEV4YW1wbGU6CgogICAgICAgIGBgYGphdmFzY3JpcHQKICAgICAgICB2YXIg
        Y29udGFpbmVyID0gbmV3IENvbnRhaW5lcigpOwoKICAgICAgICBjb250YWlu
        ZXIucmVnaXN0ZXIoJ21vZGVsOnVzZXInLCBQZXJzb24sIHtzaW5nbGV0b246
        IGZhbHNlIH0pOwogICAgICAgIGNvbnRhaW5lci5yZWdpc3RlcignZnJ1aXQ6
        ZmF2b3JpdGUnLCBPcmFuZ2UpOwogICAgICAgIGNvbnRhaW5lci5yZWdpc3Rl
        cignY29tbXVuaWNhdGlvbjptYWluJywgRW1haWwsIHtzaW5nbGV0b246IGZh
        bHNlfSk7CiAgICAgICAgYGBgCgogICAgICAgIEBtZXRob2QgcmVnaXN0ZXIK
        ICAgICAgICBAcGFyYW0ge1N0cmluZ30gZnVsbE5hbWUKICAgICAgICBAcGFy
        YW0ge0Z1bmN0aW9ufSBmYWN0b3J5CiAgICAgICAgQHBhcmFtIHtPYmplY3R9
        IG9wdGlvbnMKICAgICAgKi8KICAgICAgcmVnaXN0ZXI6IGZ1bmN0aW9uKGZ1
        bGxOYW1lLCBmYWN0b3J5LCBvcHRpb25zKSB7CiAgICAgICAgdmFsaWRhdGVG
        dWxsTmFtZShmdWxsTmFtZSk7CgogICAgICAgIGlmIChmYWN0b3J5ID09PSB1
        bmRlZmluZWQpIHsKICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0F0
        dGVtcHRpbmcgdG8gcmVnaXN0ZXIgYW4gdW5rbm93biBmYWN0b3J5OiBgJyAr
        IGZ1bGxOYW1lICsgJ2AnKTsKICAgICAgICB9CgogICAgICAgIHZhciBub3Jt
        YWxpemVkTmFtZSA9IHRoaXMubm9ybWFsaXplKGZ1bGxOYW1lKTsKCiAgICAg
        ICAgaWYgKHRoaXMuY2FjaGUuaGFzKG5vcm1hbGl6ZWROYW1lKSkgewogICAg
        ICAgICAgdGhyb3cgbmV3IEVycm9yKCdDYW5ub3QgcmUtcmVnaXN0ZXI6IGAn
        ICsgZnVsbE5hbWUgKydgLCBhcyBpdCBoYXMgYWxyZWFkeSBiZWVuIGxvb2tl
        ZCB1cC4nKTsKICAgICAgICB9CgogICAgICAgIHRoaXMucmVnaXN0cnkuc2V0
        KG5vcm1hbGl6ZWROYW1lLCBmYWN0b3J5KTsKICAgICAgICB0aGlzLl9vcHRp
        b25zLnNldChub3JtYWxpemVkTmFtZSwgb3B0aW9ucyB8fCB7fSk7CiAgICAg
        IH0sCgogICAgICAvKioKICAgICAgICBVbnJlZ2lzdGVyIGEgZnVsbE5hbWUK
        CiAgICAgICAgYGBgamF2YXNjcmlwdAogICAgICAgIHZhciBjb250YWluZXIg
        PSBuZXcgQ29udGFpbmVyKCk7CiAgICAgICAgY29udGFpbmVyLnJlZ2lzdGVy
        KCdtb2RlbDp1c2VyJywgVXNlcik7CgogICAgICAgIGNvbnRhaW5lci5sb29r
        dXAoJ21vZGVsOnVzZXInKSBpbnN0YW5jZW9mIFVzZXIgLy89PiB0cnVlCgog
        ICAgICAgIGNvbnRhaW5lci51bnJlZ2lzdGVyKCdtb2RlbDp1c2VyJykKICAg
        ICAgICBjb250YWluZXIubG9va3VwKCdtb2RlbDp1c2VyJykgPT09IHVuZGVm
        aW5lZCAvLz0+IHRydWUKICAgICAgICBgYGAKCiAgICAgICAgQG1ldGhvZCB1
        bnJlZ2lzdGVyCiAgICAgICAgQHBhcmFtIHtTdHJpbmd9IGZ1bGxOYW1lCiAg
        ICAgICAqLwogICAgICB1bnJlZ2lzdGVyOiBmdW5jdGlvbihmdWxsTmFtZSkg
        ewogICAgICAgIHZhbGlkYXRlRnVsbE5hbWUoZnVsbE5hbWUpOwoKICAgICAg
        ICB2YXIgbm9ybWFsaXplZE5hbWUgPSB0aGlzLm5vcm1hbGl6ZShmdWxsTmFt
        ZSk7CgogICAgICAgIHRoaXMucmVnaXN0cnkucmVtb3ZlKG5vcm1hbGl6ZWRO
        YW1lKTsKICAgICAgICB0aGlzLmNhY2hlLnJlbW92ZShub3JtYWxpemVkTmFt
        ZSk7CiAgICAgICAgdGhpcy5mYWN0b3J5Q2FjaGUucmVtb3ZlKG5vcm1hbGl6
        ZWROYW1lKTsKICAgICAgICB0aGlzLnJlc29sdmVDYWNoZS5yZW1vdmUobm9y
        bWFsaXplZE5hbWUpOwogICAgICAgIHRoaXMuX29wdGlvbnMucmVtb3ZlKG5v
        cm1hbGl6ZWROYW1lKTsKICAgICAgfSwKCiAgICAgIC8qKgogICAgICAgIEdp
        dmVuIGEgZnVsbE5hbWUgcmV0dXJuIHRoZSBjb3JyZXNwb25kaW5nIGZhY3Rv
        cnkuCgogICAgICAgIEJ5IGRlZmF1bHQgYHJlc29sdmVgIHdpbGwgcmV0cmll
        dmUgdGhlIGZhY3RvcnkgZnJvbQogICAgICAgIGl0cyBjb250YWluZXIncyBy
        ZWdpc3RyeS4KCiAgICAgICAgYGBgamF2YXNjcmlwdAogICAgICAgIHZhciBj
        b250YWluZXIgPSBuZXcgQ29udGFpbmVyKCk7CiAgICAgICAgY29udGFpbmVy
        LnJlZ2lzdGVyKCdhcGk6dHdpdHRlcicsIFR3aXR0ZXIpOwoKICAgICAgICBj
        b250YWluZXIucmVzb2x2ZSgnYXBpOnR3aXR0ZXInKSAvLyA9PiBUd2l0dGVy
        CiAgICAgICAgYGBgCgogICAgICAgIE9wdGlvbmFsbHkgdGhlIGNvbnRhaW5l
        ciBjYW4gYmUgcHJvdmlkZWQgd2l0aCBhIGN1c3RvbSByZXNvbHZlci4KICAg
        ICAgICBJZiBwcm92aWRlZCwgYHJlc29sdmVgIHdpbGwgZmlyc3QgcHJvdmlk
        ZSB0aGUgY3VzdG9tIHJlc29sdmVyCiAgICAgICAgdGhlIG9wcGVydHVuaXR5
        IHRvIHJlc29sdmUgdGhlIGZ1bGxOYW1lLCBvdGhlcndpc2UgaXQgd2lsbCBm
        YWxsYmFjawogICAgICAgIHRvIHRoZSByZWdpc3RyeS4KCiAgICAgICAgYGBg
        amF2YXNjcmlwdAogICAgICAgIHZhciBjb250YWluZXIgPSBuZXcgQ29udGFp
        bmVyKCk7CiAgICAgICAgY29udGFpbmVyLnJlc29sdmVyID0gZnVuY3Rpb24o
        ZnVsbE5hbWUpIHsKICAgICAgICAgIC8vIGxvb2t1cCB2aWEgdGhlIG1vZHVs
        ZSBzeXN0ZW0gb2YgY2hvaWNlCiAgICAgICAgfTsKCiAgICAgICAgLy8gdGhl
        IHR3aXR0ZXIgZmFjdG9yeSBpcyBhZGRlZCB0byB0aGUgbW9kdWxlIHN5c3Rl
        bQogICAgICAgIGNvbnRhaW5lci5yZXNvbHZlKCdhcGk6dHdpdHRlcicpIC8v
        ID0+IFR3aXR0ZXIKICAgICAgICBgYGAKCiAgICAgICAgQG1ldGhvZCByZXNv
        bHZlCiAgICAgICAgQHBhcmFtIHtTdHJpbmd9IGZ1bGxOYW1lCiAgICAgICAg
        QHJldHVybiB7RnVuY3Rpb259IGZ1bGxOYW1lJ3MgZmFjdG9yeQogICAgICAq
        LwogICAgICByZXNvbHZlOiBmdW5jdGlvbihmdWxsTmFtZSkgewogICAgICAg
        IHZhbGlkYXRlRnVsbE5hbWUoZnVsbE5hbWUpOwoKICAgICAgICB2YXIgbm9y
        bWFsaXplZE5hbWUgPSB0aGlzLm5vcm1hbGl6ZShmdWxsTmFtZSk7CiAgICAg
        ICAgdmFyIGNhY2hlZCA9IHRoaXMucmVzb2x2ZUNhY2hlLmdldChub3JtYWxp
        emVkTmFtZSk7CgogICAgICAgIGlmIChjYWNoZWQpIHsgcmV0dXJuIGNhY2hl
        ZDsgfQoKICAgICAgICB2YXIgcmVzb2x2ZWQgPSB0aGlzLnJlc29sdmVyKG5v
        cm1hbGl6ZWROYW1lKSB8fCB0aGlzLnJlZ2lzdHJ5LmdldChub3JtYWxpemVk
        TmFtZSk7CgogICAgICAgIHRoaXMucmVzb2x2ZUNhY2hlLnNldChub3JtYWxp
        emVkTmFtZSwgcmVzb2x2ZWQpOwoKICAgICAgICByZXR1cm4gcmVzb2x2ZWQ7
        CiAgICAgIH0sCgogICAgICAvKioKICAgICAgICBBIGhvb2sgdGhhdCBjYW4g
        YmUgdXNlZCB0byBkZXNjcmliZSBob3cgdGhlIHJlc29sdmVyIHdpbGwKICAg
        ICAgICBhdHRlbXB0IHRvIGZpbmQgdGhlIGZhY3RvcnkuCgogICAgICAgIEZv
        ciBleGFtcGxlLCB0aGUgZGVmYXVsdCBFbWJlciBgLmRlc2NyaWJlYCByZXR1
        cm5zIHRoZSBmdWxsCiAgICAgICAgY2xhc3MgbmFtZSAoaW5jbHVkaW5nIG5h
        bWVzcGFjZSkgd2hlcmUgRW1iZXIncyByZXNvbHZlciBleHBlY3RzCiAgICAg
        ICAgdG8gZmluZCB0aGUgYGZ1bGxOYW1lYC4KCiAgICAgICAgQG1ldGhvZCBk
        ZXNjcmliZQogICAgICAgIEBwYXJhbSB7U3RyaW5nfSBmdWxsTmFtZQogICAg
        ICAgIEByZXR1cm4ge3N0cmluZ30gZGVzY3JpYmVkIGZ1bGxOYW1lCiAgICAg
        ICovCiAgICAgIGRlc2NyaWJlOiBmdW5jdGlvbihmdWxsTmFtZSkgewogICAg
        ICAgIHJldHVybiBmdWxsTmFtZTsKICAgICAgfSwKCiAgICAgIC8qKgogICAg
        ICAgIEEgaG9vayB0byBlbmFibGUgY3VzdG9tIGZ1bGxOYW1lIG5vcm1hbGl6
        YXRpb24gYmVoYXZpb3VyCgogICAgICAgIEBtZXRob2Qgbm9ybWFsaXplCiAg
        ICAgICAgQHBhcmFtIHtTdHJpbmd9IGZ1bGxOYW1lCiAgICAgICAgQHJldHVy
        biB7c3RyaW5nfSBub3JtYWxpemVkIGZ1bGxOYW1lCiAgICAgICovCiAgICAg
        IG5vcm1hbGl6ZTogZnVuY3Rpb24oZnVsbE5hbWUpIHsKICAgICAgICByZXR1
        cm4gZnVsbE5hbWU7CiAgICAgIH0sCgogICAgICAvKioKICAgICAgICBAbWV0
        aG9kIG1ha2VUb1N0cmluZwoKICAgICAgICBAcGFyYW0ge2FueX0gZmFjdG9y
        eQogICAgICAgIEBwYXJhbSB7c3RyaW5nfSBmdWxsTmFtZQogICAgICAgIEBy
        ZXR1cm4ge2Z1bmN0aW9ufSB0b1N0cmluZyBmdW5jdGlvbgogICAgICAqLwog
        ICAgICBtYWtlVG9TdHJpbmc6IGZ1bmN0aW9uKGZhY3RvcnksIGZ1bGxOYW1l
        KSB7CiAgICAgICAgcmV0dXJuIGZhY3RvcnkudG9TdHJpbmcoKTsKICAgICAg
        fSwKCiAgICAgIC8qKgogICAgICAgIEdpdmVuIGEgZnVsbE5hbWUgcmV0dXJu
        IGEgY29ycmVzcG9uZGluZyBpbnN0YW5jZS4KCiAgICAgICAgVGhlIGRlZmF1
        bHQgYmVoYXZpb3VyIGlzIGZvciBsb29rdXAgdG8gcmV0dXJuIGEgc2luZ2xl
        dG9uIGluc3RhbmNlLgogICAgICAgIFRoZSBzaW5nbGV0b24gaXMgc2NvcGVk
        IHRvIHRoZSBjb250YWluZXIsIGFsbG93aW5nIG11bHRpcGxlIGNvbnRhaW5l
        cnMKICAgICAgICB0byBhbGwgaGF2ZSB0aGVpciBvd24gbG9jYWxseSBzY29w
        ZWQgc2luZ2xldG9ucy4KCiAgICAgICAgYGBgamF2YXNjcmlwdAogICAgICAg
        IHZhciBjb250YWluZXIgPSBuZXcgQ29udGFpbmVyKCk7CiAgICAgICAgY29u
        dGFpbmVyLnJlZ2lzdGVyKCdhcGk6dHdpdHRlcicsIFR3aXR0ZXIpOwoKICAg
        ICAgICB2YXIgdHdpdHRlciA9IGNvbnRhaW5lci5sb29rdXAoJ2FwaTp0d2l0
        dGVyJyk7CgogICAgICAgIHR3aXR0ZXIgaW5zdGFuY2VvZiBUd2l0dGVyOyAv
        LyA9PiB0cnVlCgogICAgICAgIC8vIGJ5IGRlZmF1bHQgdGhlIGNvbnRhaW5l
        ciB3aWxsIHJldHVybiBzaW5nbGV0b25zCiAgICAgICAgdmFyIHR3aXR0ZXIy
        ID0gY29udGFpbmVyLmxvb2t1cCgnYXBpOnR3aXR0ZXInKTsKICAgICAgICB0
        d2l0dGVyIGluc3RhbmNlb2YgVHdpdHRlcjsgLy8gPT4gdHJ1ZQoKICAgICAg
        ICB0d2l0dGVyID09PSB0d2l0dGVyMjsgLy89PiB0cnVlCiAgICAgICAgYGBg
        CgogICAgICAgIElmIHNpbmdsZXRvbnMgYXJlIG5vdCB3YW50ZWQgYW4gb3B0
        aW9uYWwgZmxhZyBjYW4gYmUgcHJvdmlkZWQgYXQgbG9va3VwLgoKICAgICAg
        ICBgYGBqYXZhc2NyaXB0CiAgICAgICAgdmFyIGNvbnRhaW5lciA9IG5ldyBD
        b250YWluZXIoKTsKICAgICAgICBjb250YWluZXIucmVnaXN0ZXIoJ2FwaTp0
        d2l0dGVyJywgVHdpdHRlcik7CgogICAgICAgIHZhciB0d2l0dGVyID0gY29u
        dGFpbmVyLmxvb2t1cCgnYXBpOnR3aXR0ZXInLCB7IHNpbmdsZXRvbjogZmFs
        c2UgfSk7CiAgICAgICAgdmFyIHR3aXR0ZXIyID0gY29udGFpbmVyLmxvb2t1
        cCgnYXBpOnR3aXR0ZXInLCB7IHNpbmdsZXRvbjogZmFsc2UgfSk7CgogICAg
        ICAgIHR3aXR0ZXIgPT09IHR3aXR0ZXIyOyAvLz0+IGZhbHNlCiAgICAgICAg
        YGBgCgogICAgICAgIEBtZXRob2QgbG9va3VwCiAgICAgICAgQHBhcmFtIHtT
        dHJpbmd9IGZ1bGxOYW1lCiAgICAgICAgQHBhcmFtIHtPYmplY3R9IG9wdGlv
        bnMKICAgICAgICBAcmV0dXJuIHthbnl9CiAgICAgICovCiAgICAgIGxvb2t1
        cDogZnVuY3Rpb24oZnVsbE5hbWUsIG9wdGlvbnMpIHsKICAgICAgICB2YWxp
        ZGF0ZUZ1bGxOYW1lKGZ1bGxOYW1lKTsKICAgICAgICByZXR1cm4gbG9va3Vw
        KHRoaXMsIHRoaXMubm9ybWFsaXplKGZ1bGxOYW1lKSwgb3B0aW9ucyk7CiAg
        ICAgIH0sCgogICAgICAvKioKICAgICAgICBHaXZlbiBhIGZ1bGxOYW1lIHJl
        dHVybiB0aGUgY29ycmVzcG9uZGluZyBmYWN0b3J5LgoKICAgICAgICBAbWV0
        aG9kIGxvb2t1cEZhY3RvcnkKICAgICAgICBAcGFyYW0ge1N0cmluZ30gZnVs
        bE5hbWUKICAgICAgICBAcmV0dXJuIHthbnl9CiAgICAgICovCiAgICAgIGxv
        b2t1cEZhY3Rvcnk6IGZ1bmN0aW9uKGZ1bGxOYW1lKSB7CiAgICAgICAgdmFs
        aWRhdGVGdWxsTmFtZShmdWxsTmFtZSk7CiAgICAgICAgcmV0dXJuIGZhY3Rv
        cnlGb3IodGhpcywgdGhpcy5ub3JtYWxpemUoZnVsbE5hbWUpKTsKICAgICAg
        fSwKCiAgICAgIC8qKgogICAgICAgIEdpdmVuIGEgZnVsbE5hbWUgY2hlY2sg
        aWYgdGhlIGNvbnRhaW5lciBpcyBhd2FyZSBvZiBpdHMgZmFjdG9yeQogICAg
        ICAgIG9yIHNpbmdsZXRvbiBpbnN0YW5jZS4KCiAgICAgICAgQG1ldGhvZCBo
        YXMKICAgICAgICBAcGFyYW0ge1N0cmluZ30gZnVsbE5hbWUKICAgICAgICBA
        cmV0dXJuIHtCb29sZWFufQogICAgICAqLwogICAgICBoYXM6IGZ1bmN0aW9u
        KGZ1bGxOYW1lKSB7CiAgICAgICAgdmFsaWRhdGVGdWxsTmFtZShmdWxsTmFt
        ZSk7CiAgICAgICAgcmV0dXJuIGhhcyh0aGlzLCB0aGlzLm5vcm1hbGl6ZShm
        dWxsTmFtZSkpOwogICAgICB9LAoKICAgICAgLyoqCiAgICAgICAgQWxsb3cg
        cmVnaXN0ZXJpbmcgb3B0aW9ucyBmb3IgYWxsIGZhY3RvcmllcyBvZiBhIHR5
        cGUuCgogICAgICAgIGBgYGphdmFzY3JpcHQKICAgICAgICB2YXIgY29udGFp
        bmVyID0gbmV3IENvbnRhaW5lcigpOwoKICAgICAgICAvLyBpZiBhbGwgb2Yg
        dHlwZSBgY29ubmVjdGlvbmAgbXVzdCBub3QgYmUgc2luZ2xldG9ucwogICAg
        ICAgIGNvbnRhaW5lci5vcHRpb25zRm9yVHlwZSgnY29ubmVjdGlvbicsIHsg
        c2luZ2xldG9uOiBmYWxzZSB9KTsKCiAgICAgICAgY29udGFpbmVyLnJlZ2lz
        dGVyKCdjb25uZWN0aW9uOnR3aXR0ZXInLCBUd2l0dGVyQ29ubmVjdGlvbik7
        CiAgICAgICAgY29udGFpbmVyLnJlZ2lzdGVyKCdjb25uZWN0aW9uOmZhY2Vi
        b29rJywgRmFjZWJvb2tDb25uZWN0aW9uKTsKCiAgICAgICAgdmFyIHR3aXR0
        ZXIgPSBjb250YWluZXIubG9va3VwKCdjb25uZWN0aW9uOnR3aXR0ZXInKTsK
        ICAgICAgICB2YXIgdHdpdHRlcjIgPSBjb250YWluZXIubG9va3VwKCdjb25u
        ZWN0aW9uOnR3aXR0ZXInKTsKCiAgICAgICAgdHdpdHRlciA9PT0gdHdpdHRl
        cjI7IC8vID0+IGZhbHNlCgogICAgICAgIHZhciBmYWNlYm9vayA9IGNvbnRh
        aW5lci5sb29rdXAoJ2Nvbm5lY3Rpb246ZmFjZWJvb2snKTsKICAgICAgICB2
        YXIgZmFjZWJvb2syID0gY29udGFpbmVyLmxvb2t1cCgnY29ubmVjdGlvbjpm
        YWNlYm9vaycpOwoKICAgICAgICBmYWNlYm9vayA9PT0gZmFjZWJvb2syOyAv
        LyA9PiBmYWxzZQogICAgICAgIGBgYAoKICAgICAgICBAbWV0aG9kIG9wdGlv
        bnNGb3JUeXBlCiAgICAgICAgQHBhcmFtIHtTdHJpbmd9IHR5cGUKICAgICAg
        ICBAcGFyYW0ge09iamVjdH0gb3B0aW9ucwogICAgICAqLwogICAgICBvcHRp
        b25zRm9yVHlwZTogZnVuY3Rpb24odHlwZSwgb3B0aW9ucykgewogICAgICAg
        IGlmICh0aGlzLnBhcmVudCkgeyBpbGxlZ2FsQ2hpbGRPcGVyYXRpb24oJ29w
        dGlvbnNGb3JUeXBlJyk7IH0KCiAgICAgICAgdGhpcy5fdHlwZU9wdGlvbnMu
        c2V0KHR5cGUsIG9wdGlvbnMpOwogICAgICB9LAoKICAgICAgLyoqCiAgICAg
        ICAgQG1ldGhvZCBvcHRpb25zCiAgICAgICAgQHBhcmFtIHtTdHJpbmd9IHR5
        cGUKICAgICAgICBAcGFyYW0ge09iamVjdH0gb3B0aW9ucwogICAgICAqLwog
        ICAgICBvcHRpb25zOiBmdW5jdGlvbih0eXBlLCBvcHRpb25zKSB7CiAgICAg
        ICAgdGhpcy5vcHRpb25zRm9yVHlwZSh0eXBlLCBvcHRpb25zKTsKICAgICAg
        fSwKCiAgICAgIC8qKgogICAgICAgIFVzZWQgb25seSB2aWEgYGluamVjdGlv
        bmAuCgogICAgICAgIFByb3ZpZGVzIGEgc3BlY2lhbGl6ZWQgZm9ybSBvZiBp
        bmplY3Rpb24sIHNwZWNpZmljYWxseSBlbmFibGluZwogICAgICAgIGFsbCBv
        YmplY3RzIG9mIG9uZSB0eXBlIHRvIGJlIGluamVjdGVkIHdpdGggYSByZWZl
        cmVuY2UgdG8gYW5vdGhlcgogICAgICAgIG9iamVjdC4KCiAgICAgICAgRm9y
        IGV4YW1wbGUsIHByb3ZpZGVkIGVhY2ggb2JqZWN0IG9mIHR5cGUgYGNvbnRy
        b2xsZXJgIG5lZWRlZCBhIGByb3V0ZXJgLgogICAgICAgIG9uZSB3b3VsZCBk
        byB0aGUgZm9sbG93aW5nOgoKICAgICAgICBgYGBqYXZhc2NyaXB0CiAgICAg
        ICAgdmFyIGNvbnRhaW5lciA9IG5ldyBDb250YWluZXIoKTsKCiAgICAgICAg
        Y29udGFpbmVyLnJlZ2lzdGVyKCdyb3V0ZXI6bWFpbicsIFJvdXRlcik7CiAg
        ICAgICAgY29udGFpbmVyLnJlZ2lzdGVyKCdjb250cm9sbGVyOnVzZXInLCBV
        c2VyQ29udHJvbGxlcik7CiAgICAgICAgY29udGFpbmVyLnJlZ2lzdGVyKCdj
        b250cm9sbGVyOnBvc3QnLCBQb3N0Q29udHJvbGxlcik7CgogICAgICAgIGNv
        bnRhaW5lci50eXBlSW5qZWN0aW9uKCdjb250cm9sbGVyJywgJ3JvdXRlcics
        ICdyb3V0ZXI6bWFpbicpOwoKICAgICAgICB2YXIgdXNlciA9IGNvbnRhaW5l
        ci5sb29rdXAoJ2NvbnRyb2xsZXI6dXNlcicpOwogICAgICAgIHZhciBwb3N0
        ID0gY29udGFpbmVyLmxvb2t1cCgnY29udHJvbGxlcjpwb3N0Jyk7CgogICAg
        ICAgIHVzZXIucm91dGVyIGluc3RhbmNlb2YgUm91dGVyOyAvLz0+IHRydWUK
        ICAgICAgICBwb3N0LnJvdXRlciBpbnN0YW5jZW9mIFJvdXRlcjsgLy89PiB0
        cnVlCgogICAgICAgIC8vIGJvdGggY29udHJvbGxlcnMgc2hhcmUgdGhlIHNh
        bWUgcm91dGVyCiAgICAgICAgdXNlci5yb3V0ZXIgPT09IHBvc3Qucm91dGVy
        OyAvLz0+IHRydWUKICAgICAgICBgYGAKCiAgICAgICAgQHByaXZhdGUKICAg
        ICAgICBAbWV0aG9kIHR5cGVJbmplY3Rpb24KICAgICAgICBAcGFyYW0ge1N0
        cmluZ30gdHlwZQogICAgICAgIEBwYXJhbSB7U3RyaW5nfSBwcm9wZXJ0eQog
        ICAgICAgIEBwYXJhbSB7U3RyaW5nfSBmdWxsTmFtZQogICAgICAqLwogICAg
        ICB0eXBlSW5qZWN0aW9uOiBmdW5jdGlvbih0eXBlLCBwcm9wZXJ0eSwgZnVs
        bE5hbWUpIHsKICAgICAgICB2YWxpZGF0ZUZ1bGxOYW1lKGZ1bGxOYW1lKTsK
        ICAgICAgICBpZiAodGhpcy5wYXJlbnQpIHsgaWxsZWdhbENoaWxkT3BlcmF0
        aW9uKCd0eXBlSW5qZWN0aW9uJyk7IH0KCiAgICAgICAgYWRkVHlwZUluamVj
        dGlvbih0aGlzLnR5cGVJbmplY3Rpb25zLCB0eXBlLCBwcm9wZXJ0eSwgZnVs
        bE5hbWUpOwogICAgICB9LAoKICAgICAgLyoqCiAgICAgICAgRGVmaW5lcyBp
        bmplY3Rpb24gcnVsZXMuCgogICAgICAgIFRoZXNlIHJ1bGVzIGFyZSB1c2Vk
        IHRvIGluamVjdCBkZXBlbmRlbmNpZXMgb250byBvYmplY3RzIHdoZW4gdGhl
        eQogICAgICAgIGFyZSBpbnN0YW50aWF0ZWQuCgogICAgICAgIFR3byBmb3Jt
        cyBvZiBpbmplY3Rpb25zIGFyZSBwb3NzaWJsZToKCiAgICAgICAgKiBJbmpl
        Y3Rpbmcgb25lIGZ1bGxOYW1lIG9uIGFub3RoZXIgZnVsbE5hbWUKICAgICAg
        ICAqIEluamVjdGluZyBvbmUgZnVsbE5hbWUgb24gYSB0eXBlCgogICAgICAg
        IEV4YW1wbGU6CgogICAgICAgIGBgYGphdmFzY3JpcHQKICAgICAgICB2YXIg
        Y29udGFpbmVyID0gbmV3IENvbnRhaW5lcigpOwoKICAgICAgICBjb250YWlu
        ZXIucmVnaXN0ZXIoJ3NvdXJjZTptYWluJywgU291cmNlKTsKICAgICAgICBj
        b250YWluZXIucmVnaXN0ZXIoJ21vZGVsOnVzZXInLCBVc2VyKTsKICAgICAg
        ICBjb250YWluZXIucmVnaXN0ZXIoJ21vZGVsOnBvc3QnLCBQb3N0KTsKCiAg
        ICAgICAgLy8gaW5qZWN0aW5nIG9uZSBmdWxsTmFtZSBvbiBhbm90aGVyIGZ1
        bGxOYW1lCiAgICAgICAgLy8gZWcuIGVhY2ggdXNlciBtb2RlbCBnZXRzIGEg
        cG9zdCBtb2RlbAogICAgICAgIGNvbnRhaW5lci5pbmplY3Rpb24oJ21vZGVs
        OnVzZXInLCAncG9zdCcsICdtb2RlbDpwb3N0Jyk7CgogICAgICAgIC8vIGlu
        amVjdGluZyBvbmUgZnVsbE5hbWUgb24gYW5vdGhlciB0eXBlCiAgICAgICAg
        Y29udGFpbmVyLmluamVjdGlvbignbW9kZWwnLCAnc291cmNlJywgJ3NvdXJj
        ZTptYWluJyk7CgogICAgICAgIHZhciB1c2VyID0gY29udGFpbmVyLmxvb2t1
        cCgnbW9kZWw6dXNlcicpOwogICAgICAgIHZhciBwb3N0ID0gY29udGFpbmVy
        Lmxvb2t1cCgnbW9kZWw6cG9zdCcpOwoKICAgICAgICB1c2VyLnNvdXJjZSBp
        bnN0YW5jZW9mIFNvdXJjZTsgLy89PiB0cnVlCiAgICAgICAgcG9zdC5zb3Vy
        Y2UgaW5zdGFuY2VvZiBTb3VyY2U7IC8vPT4gdHJ1ZQoKICAgICAgICB1c2Vy
        LnBvc3QgaW5zdGFuY2VvZiBQb3N0OyAvLz0+IHRydWUKCiAgICAgICAgLy8g
        YW5kIGJvdGggbW9kZWxzIHNoYXJlIHRoZSBzYW1lIHNvdXJjZQogICAgICAg
        IHVzZXIuc291cmNlID09PSBwb3N0LnNvdXJjZTsgLy89PiB0cnVlCiAgICAg
        ICAgYGBgCgogICAgICAgIEBtZXRob2QgaW5qZWN0aW9uCiAgICAgICAgQHBh
        cmFtIHtTdHJpbmd9IGZhY3RvcnlOYW1lCiAgICAgICAgQHBhcmFtIHtTdHJp
        bmd9IHByb3BlcnR5CiAgICAgICAgQHBhcmFtIHtTdHJpbmd9IGluamVjdGlv
        bk5hbWUKICAgICAgKi8KICAgICAgaW5qZWN0aW9uOiBmdW5jdGlvbihmdWxs
        TmFtZSwgcHJvcGVydHksIGluamVjdGlvbk5hbWUpIHsKICAgICAgICBpZiAo
        dGhpcy5wYXJlbnQpIHsgaWxsZWdhbENoaWxkT3BlcmF0aW9uKCdpbmplY3Rp
        b24nKTsgfQoKICAgICAgICB2YWxpZGF0ZUZ1bGxOYW1lKGluamVjdGlvbk5h
        bWUpOwogICAgICAgIHZhciBub3JtYWxpemVkSW5qZWN0aW9uTmFtZSA9IHRo
        aXMubm9ybWFsaXplKGluamVjdGlvbk5hbWUpOwoKICAgICAgICBpZiAoZnVs
        bE5hbWUuaW5kZXhPZignOicpID09PSAtMSkgewogICAgICAgICAgcmV0dXJu
        IHRoaXMudHlwZUluamVjdGlvbihmdWxsTmFtZSwgcHJvcGVydHksIG5vcm1h
        bGl6ZWRJbmplY3Rpb25OYW1lKTsKICAgICAgICB9CgogICAgICAgIHZhbGlk
        YXRlRnVsbE5hbWUoZnVsbE5hbWUpOwogICAgICAgIHZhciBub3JtYWxpemVk
        TmFtZSA9IHRoaXMubm9ybWFsaXplKGZ1bGxOYW1lKTsKCiAgICAgICAgYWRk
        SW5qZWN0aW9uKHRoaXMuaW5qZWN0aW9ucywgbm9ybWFsaXplZE5hbWUsIHBy
        b3BlcnR5LCBub3JtYWxpemVkSW5qZWN0aW9uTmFtZSk7CiAgICAgIH0sCgoK
        ICAgICAgLyoqCiAgICAgICAgVXNlZCBvbmx5IHZpYSBgZmFjdG9yeUluamVj
        dGlvbmAuCgogICAgICAgIFByb3ZpZGVzIGEgc3BlY2lhbGl6ZWQgZm9ybSBv
        ZiBpbmplY3Rpb24sIHNwZWNpZmljYWxseSBlbmFibGluZwogICAgICAgIGFs
        bCBmYWN0b3J5IG9mIG9uZSB0eXBlIHRvIGJlIGluamVjdGVkIHdpdGggYSBy
        ZWZlcmVuY2UgdG8gYW5vdGhlcgogICAgICAgIG9iamVjdC4KCiAgICAgICAg
        Rm9yIGV4YW1wbGUsIHByb3ZpZGVkIGVhY2ggZmFjdG9yeSBvZiB0eXBlIGBt
        b2RlbGAgbmVlZGVkIGEgYHN0b3JlYC4KICAgICAgICBvbmUgd291bGQgZG8g
        dGhlIGZvbGxvd2luZzoKCiAgICAgICAgYGBgamF2YXNjcmlwdAogICAgICAg
        IHZhciBjb250YWluZXIgPSBuZXcgQ29udGFpbmVyKCk7CgogICAgICAgIGNv
        bnRhaW5lci5yZWdpc3Rlcignc3RvcmU6bWFpbicsIFNvbWVTdG9yZSk7Cgog
        ICAgICAgIGNvbnRhaW5lci5mYWN0b3J5VHlwZUluamVjdGlvbignbW9kZWwn
        LCAnc3RvcmUnLCAnc3RvcmU6bWFpbicpOwoKICAgICAgICB2YXIgc3RvcmUg
        PSBjb250YWluZXIubG9va3VwKCdzdG9yZTptYWluJyk7CiAgICAgICAgdmFy
        IFVzZXJGYWN0b3J5ID0gY29udGFpbmVyLmxvb2t1cEZhY3RvcnkoJ21vZGVs
        OnVzZXInKTsKCiAgICAgICAgVXNlckZhY3Rvcnkuc3RvcmUgaW5zdGFuY2Vv
        ZiBTb21lU3RvcmU7IC8vPT4gdHJ1ZQogICAgICAgIGBgYAoKICAgICAgICBA
        cHJpdmF0ZQogICAgICAgIEBtZXRob2QgZmFjdG9yeVR5cGVJbmplY3Rpb24K
        ICAgICAgICBAcGFyYW0ge1N0cmluZ30gdHlwZQogICAgICAgIEBwYXJhbSB7
        U3RyaW5nfSBwcm9wZXJ0eQogICAgICAgIEBwYXJhbSB7U3RyaW5nfSBmdWxs
        TmFtZQogICAgICAqLwogICAgICBmYWN0b3J5VHlwZUluamVjdGlvbjogZnVu
        Y3Rpb24odHlwZSwgcHJvcGVydHksIGZ1bGxOYW1lKSB7CiAgICAgICAgaWYg
        KHRoaXMucGFyZW50KSB7IGlsbGVnYWxDaGlsZE9wZXJhdGlvbignZmFjdG9y
        eVR5cGVJbmplY3Rpb24nKTsgfQoKICAgICAgICBhZGRUeXBlSW5qZWN0aW9u
        KHRoaXMuZmFjdG9yeVR5cGVJbmplY3Rpb25zLCB0eXBlLCBwcm9wZXJ0eSwg
        dGhpcy5ub3JtYWxpemUoZnVsbE5hbWUpKTsKICAgICAgfSwKCiAgICAgIC8q
        KgogICAgICAgIERlZmluZXMgZmFjdG9yeSBpbmplY3Rpb24gcnVsZXMuCgog
        ICAgICAgIFNpbWlsYXIgdG8gcmVndWxhciBpbmplY3Rpb24gcnVsZXMsIGJ1
        dCBhcmUgcnVuIGFnYWluc3QgZmFjdG9yaWVzLCB2aWEKICAgICAgICBgQ29u
        dGFpbmVyI2xvb2t1cEZhY3RvcnlgLgoKICAgICAgICBUaGVzZSBydWxlcyBh
        cmUgdXNlZCB0byBpbmplY3Qgb2JqZWN0cyBvbnRvIGZhY3RvcmllcyB3aGVu
        IHRoZXkKICAgICAgICBhcmUgbG9va2VkIHVwLgoKICAgICAgICBUd28gZm9y
        bXMgb2YgaW5qZWN0aW9ucyBhcmUgcG9zc2libGU6CgogICAgICAqIEluamVj
        dGluZyBvbmUgZnVsbE5hbWUgb24gYW5vdGhlciBmdWxsTmFtZQogICAgICAq
        IEluamVjdGluZyBvbmUgZnVsbE5hbWUgb24gYSB0eXBlCgogICAgICAgIEV4
        YW1wbGU6CgogICAgICAgIGBgYGphdmFzY3JpcHQKICAgICAgICB2YXIgY29u
        dGFpbmVyID0gbmV3IENvbnRhaW5lcigpOwoKICAgICAgICBjb250YWluZXIu
        cmVnaXN0ZXIoJ3N0b3JlOm1haW4nLCBTdG9yZSk7CiAgICAgICAgY29udGFp
        bmVyLnJlZ2lzdGVyKCdzdG9yZTpzZWNvbmRhcnknLCBPdGhlclN0b3JlKTsK
        ICAgICAgICBjb250YWluZXIucmVnaXN0ZXIoJ21vZGVsOnVzZXInLCBVc2Vy
        KTsKICAgICAgICBjb250YWluZXIucmVnaXN0ZXIoJ21vZGVsOnBvc3QnLCBQ
        b3N0KTsKCiAgICAgICAgLy8gaW5qZWN0aW5nIG9uZSBmdWxsTmFtZSBvbiBh
        bm90aGVyIHR5cGUKICAgICAgICBjb250YWluZXIuZmFjdG9yeUluamVjdGlv
        bignbW9kZWwnLCAnc3RvcmUnLCAnc3RvcmU6bWFpbicpOwoKICAgICAgICAv
        LyBpbmplY3Rpbmcgb25lIGZ1bGxOYW1lIG9uIGFub3RoZXIgZnVsbE5hbWUK
        ICAgICAgICBjb250YWluZXIuZmFjdG9yeUluamVjdGlvbignbW9kZWw6cG9z
        dCcsICdzZWNvbmRhcnlTdG9yZScsICdzdG9yZTpzZWNvbmRhcnknKTsKCiAg
        ICAgICAgdmFyIFVzZXJGYWN0b3J5ID0gY29udGFpbmVyLmxvb2t1cEZhY3Rv
        cnkoJ21vZGVsOnVzZXInKTsKICAgICAgICB2YXIgUG9zdEZhY3RvcnkgPSBj
        b250YWluZXIubG9va3VwRmFjdG9yeSgnbW9kZWw6cG9zdCcpOwogICAgICAg
        IHZhciBzdG9yZSA9IGNvbnRhaW5lci5sb29rdXAoJ3N0b3JlOm1haW4nKTsK
        CiAgICAgICAgVXNlckZhY3Rvcnkuc3RvcmUgaW5zdGFuY2VvZiBTdG9yZTsg
        Ly89PiB0cnVlCiAgICAgICAgVXNlckZhY3Rvcnkuc2Vjb25kYXJ5U3RvcmUg
        aW5zdGFuY2VvZiBPdGhlclN0b3JlOyAvLz0+IGZhbHNlCgogICAgICAgIFBv
        c3RGYWN0b3J5LnN0b3JlIGluc3RhbmNlb2YgU3RvcmU7IC8vPT4gdHJ1ZQog
        ICAgICAgIFBvc3RGYWN0b3J5LnNlY29uZGFyeVN0b3JlIGluc3RhbmNlb2Yg
        T3RoZXJTdG9yZTsgLy89PiB0cnVlCgogICAgICAgIC8vIGFuZCBib3RoIG1v
        ZGVscyBzaGFyZSB0aGUgc2FtZSBzb3VyY2UgaW5zdGFuY2UKICAgICAgICBV
        c2VyRmFjdG9yeS5zdG9yZSA9PT0gUG9zdEZhY3Rvcnkuc3RvcmU7IC8vPT4g
        dHJ1ZQogICAgICAgIGBgYAoKICAgICAgICBAbWV0aG9kIGZhY3RvcnlJbmpl
        Y3Rpb24KICAgICAgICBAcGFyYW0ge1N0cmluZ30gZmFjdG9yeU5hbWUKICAg
        ICAgICBAcGFyYW0ge1N0cmluZ30gcHJvcGVydHkKICAgICAgICBAcGFyYW0g
        e1N0cmluZ30gaW5qZWN0aW9uTmFtZQogICAgICAqLwogICAgICBmYWN0b3J5
        SW5qZWN0aW9uOiBmdW5jdGlvbihmdWxsTmFtZSwgcHJvcGVydHksIGluamVj
        dGlvbk5hbWUpIHsKICAgICAgICBpZiAodGhpcy5wYXJlbnQpIHsgaWxsZWdh
        bENoaWxkT3BlcmF0aW9uKCdpbmplY3Rpb24nKTsgfQoKICAgICAgICB2YXIg
        bm9ybWFsaXplZE5hbWUgPSB0aGlzLm5vcm1hbGl6ZShmdWxsTmFtZSk7CiAg
        ICAgICAgdmFyIG5vcm1hbGl6ZWRJbmplY3Rpb25OYW1lID0gdGhpcy5ub3Jt
        YWxpemUoaW5qZWN0aW9uTmFtZSk7CgogICAgICAgIHZhbGlkYXRlRnVsbE5h
        bWUoaW5qZWN0aW9uTmFtZSk7CgogICAgICAgIGlmIChmdWxsTmFtZS5pbmRl
        eE9mKCc6JykgPT09IC0xKSB7CiAgICAgICAgICByZXR1cm4gdGhpcy5mYWN0
        b3J5VHlwZUluamVjdGlvbihub3JtYWxpemVkTmFtZSwgcHJvcGVydHksIG5v
        cm1hbGl6ZWRJbmplY3Rpb25OYW1lKTsKICAgICAgICB9CgogICAgICAgIHZh
        bGlkYXRlRnVsbE5hbWUoZnVsbE5hbWUpOwoKICAgICAgICBhZGRJbmplY3Rp
        b24odGhpcy5mYWN0b3J5SW5qZWN0aW9ucywgbm9ybWFsaXplZE5hbWUsIHBy
        b3BlcnR5LCBub3JtYWxpemVkSW5qZWN0aW9uTmFtZSk7CiAgICAgIH0sCgog
        ICAgICAvKioKICAgICAgICBBIGRlcHRoIGZpcnN0IHRyYXZlcnNhbCwgZGVz
        dHJveWluZyB0aGUgY29udGFpbmVyLCBpdHMgZGVzY2VuZGFudCBjb250YWlu
        ZXJzIGFuZCBhbGwKICAgICAgICB0aGVpciBtYW5hZ2VkIG9iamVjdHMuCgog
        ICAgICAgIEBtZXRob2QgZGVzdHJveQogICAgICAqLwogICAgICBkZXN0cm95
        OiBmdW5jdGlvbigpIHsKICAgICAgICBmb3IgKHZhciBpPTAsIGw9dGhpcy5j
        aGlsZHJlbi5sZW5ndGg7IGk8bDsgaSsrKSB7CiAgICAgICAgICB0aGlzLmNo
        aWxkcmVuW2ldLmRlc3Ryb3koKTsKICAgICAgICB9CgogICAgICAgIHRoaXMu
        Y2hpbGRyZW4gPSBbXTsKCiAgICAgICAgZWFjaERlc3Ryb3lhYmxlKHRoaXMs
        IGZ1bmN0aW9uKGl0ZW0pIHsKICAgICAgICAgIGl0ZW0uZGVzdHJveSgpOwog
        ICAgICAgIH0pOwoKICAgICAgICB0aGlzLnBhcmVudCA9IHVuZGVmaW5lZDsK
        ICAgICAgICB0aGlzLmlzRGVzdHJveWVkID0gdHJ1ZTsKICAgICAgfSwKCiAg
        ICAgIC8qKgogICAgICAgIEBtZXRob2QgcmVzZXQKICAgICAgKi8KICAgICAg
        cmVzZXQ6IGZ1bmN0aW9uKCkgewogICAgICAgIGZvciAodmFyIGk9MCwgbD10
        aGlzLmNoaWxkcmVuLmxlbmd0aDsgaTxsOyBpKyspIHsKICAgICAgICAgIHJl
        c2V0Q2FjaGUodGhpcy5jaGlsZHJlbltpXSk7CiAgICAgICAgfQogICAgICAg
        IHJlc2V0Q2FjaGUodGhpcyk7CiAgICAgIH0KICAgIH07CgogICAgZnVuY3Rp
        b24gaGFzKGNvbnRhaW5lciwgZnVsbE5hbWUpewogICAgICBpZiAoY29udGFp
        bmVyLmNhY2hlLmhhcyhmdWxsTmFtZSkpIHsKICAgICAgICByZXR1cm4gdHJ1
        ZTsKICAgICAgfQoKICAgICAgcmV0dXJuICEhY29udGFpbmVyLnJlc29sdmUo
        ZnVsbE5hbWUpOwogICAgfQoKICAgIGZ1bmN0aW9uIGxvb2t1cChjb250YWlu
        ZXIsIGZ1bGxOYW1lLCBvcHRpb25zKSB7CiAgICAgIG9wdGlvbnMgPSBvcHRp
        b25zIHx8IHt9OwoKICAgICAgaWYgKGNvbnRhaW5lci5jYWNoZS5oYXMoZnVs
        bE5hbWUpICYmIG9wdGlvbnMuc2luZ2xldG9uICE9PSBmYWxzZSkgewogICAg
        ICAgIHJldHVybiBjb250YWluZXIuY2FjaGUuZ2V0KGZ1bGxOYW1lKTsKICAg
        ICAgfQoKICAgICAgdmFyIHZhbHVlID0gaW5zdGFudGlhdGUoY29udGFpbmVy
        LCBmdWxsTmFtZSk7CgogICAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkg
        eyByZXR1cm47IH0KCiAgICAgIGlmIChpc1NpbmdsZXRvbihjb250YWluZXIs
        IGZ1bGxOYW1lKSAmJiBvcHRpb25zLnNpbmdsZXRvbiAhPT0gZmFsc2UpIHsK
        ICAgICAgICBjb250YWluZXIuY2FjaGUuc2V0KGZ1bGxOYW1lLCB2YWx1ZSk7
        CiAgICAgIH0KCiAgICAgIHJldHVybiB2YWx1ZTsKICAgIH0KCiAgICBmdW5j
        dGlvbiBpbGxlZ2FsQ2hpbGRPcGVyYXRpb24ob3BlcmF0aW9uKSB7CiAgICAg
        IHRocm93IG5ldyBFcnJvcihvcGVyYXRpb24gKyAiIGlzIG5vdCBjdXJyZW50
        bHkgc3VwcG9ydGVkIG9uIGNoaWxkIGNvbnRhaW5lcnMiKTsKICAgIH0KCiAg
        ICBmdW5jdGlvbiBpc1NpbmdsZXRvbihjb250YWluZXIsIGZ1bGxOYW1lKSB7
        CiAgICAgIHZhciBzaW5nbGV0b24gPSBvcHRpb24oY29udGFpbmVyLCBmdWxs
        TmFtZSwgJ3NpbmdsZXRvbicpOwoKICAgICAgcmV0dXJuIHNpbmdsZXRvbiAh
        PT0gZmFsc2U7CiAgICB9CgogICAgZnVuY3Rpb24gYnVpbGRJbmplY3Rpb25z
        KGNvbnRhaW5lciwgaW5qZWN0aW9ucykgewogICAgICB2YXIgaGFzaCA9IHt9
        OwoKICAgICAgaWYgKCFpbmplY3Rpb25zKSB7IHJldHVybiBoYXNoOyB9Cgog
        ICAgICB2YXIgaW5qZWN0aW9uLCBpbmplY3RhYmxlOwoKICAgICAgZm9yICh2
        YXIgaT0wLCBsPWluamVjdGlvbnMubGVuZ3RoOyBpPGw7IGkrKykgewogICAg
        ICAgIGluamVjdGlvbiA9IGluamVjdGlvbnNbaV07CiAgICAgICAgaW5qZWN0
        YWJsZSA9IGxvb2t1cChjb250YWluZXIsIGluamVjdGlvbi5mdWxsTmFtZSk7
        CgogICAgICAgIGlmIChpbmplY3RhYmxlICE9PSB1bmRlZmluZWQpIHsKICAg
        ICAgICAgIGhhc2hbaW5qZWN0aW9uLnByb3BlcnR5XSA9IGluamVjdGFibGU7
        CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRocm93IG5ldyBFcnJvcign
        QXR0ZW1wdGluZyB0byBpbmplY3QgYW4gdW5rbm93biBpbmplY3Rpb246IGAn
        ICsgaW5qZWN0aW9uLmZ1bGxOYW1lICsgJ2AnKTsKICAgICAgICB9CiAgICAg
        IH0KCiAgICAgIHJldHVybiBoYXNoOwogICAgfQoKICAgIGZ1bmN0aW9uIG9w
        dGlvbihjb250YWluZXIsIGZ1bGxOYW1lLCBvcHRpb25OYW1lKSB7CiAgICAg
        IHZhciBvcHRpb25zID0gY29udGFpbmVyLl9vcHRpb25zLmdldChmdWxsTmFt
        ZSk7CgogICAgICBpZiAob3B0aW9ucyAmJiBvcHRpb25zW29wdGlvbk5hbWVd
        ICE9PSB1bmRlZmluZWQpIHsKICAgICAgICByZXR1cm4gb3B0aW9uc1tvcHRp
        b25OYW1lXTsKICAgICAgfQoKICAgICAgdmFyIHR5cGUgPSBmdWxsTmFtZS5z
        cGxpdCgiOiIpWzBdOwogICAgICBvcHRpb25zID0gY29udGFpbmVyLl90eXBl
        T3B0aW9ucy5nZXQodHlwZSk7CgogICAgICBpZiAob3B0aW9ucykgewogICAg
        ICAgIHJldHVybiBvcHRpb25zW29wdGlvbk5hbWVdOwogICAgICB9CiAgICB9
        CgogICAgZnVuY3Rpb24gZmFjdG9yeUZvcihjb250YWluZXIsIGZ1bGxOYW1l
        KSB7CiAgICAgIHZhciBuYW1lID0gZnVsbE5hbWU7CiAgICAgIHZhciBmYWN0
        b3J5ID0gY29udGFpbmVyLnJlc29sdmUobmFtZSk7CiAgICAgIHZhciBpbmpl
        Y3RlZEZhY3Rvcnk7CiAgICAgIHZhciBjYWNoZSA9IGNvbnRhaW5lci5mYWN0
        b3J5Q2FjaGU7CiAgICAgIHZhciB0eXBlID0gZnVsbE5hbWUuc3BsaXQoIjoi
        KVswXTsKCiAgICAgIGlmIChmYWN0b3J5ID09PSB1bmRlZmluZWQpIHsgcmV0
        dXJuOyB9CgogICAgICBpZiAoY2FjaGUuaGFzKGZ1bGxOYW1lKSkgewogICAg
        ICAgIHJldHVybiBjYWNoZS5nZXQoZnVsbE5hbWUpOwogICAgICB9CgogICAg
        ICBpZiAoIWZhY3RvcnkgfHwgdHlwZW9mIGZhY3RvcnkuZXh0ZW5kICE9PSAn
        ZnVuY3Rpb24nIHx8ICghRW1iZXIuTU9ERUxfRkFDVE9SWV9JTkpFQ1RJT05T
        ICYmIHR5cGUgPT09ICdtb2RlbCcpKSB7CiAgICAgICAgLy8gVE9ETzogdGhp
        bmsgYWJvdXQgYSAnc2FmZScgbWVyZ2Ugc3R5bGUgZXh0ZW5zaW9uCiAgICAg
        ICAgLy8gZm9yIG5vdyBqdXN0IGZhbGxiYWNrIHRvIGNyZWF0ZSB0aW1lIGlu
        amVjdGlvbgogICAgICAgIHJldHVybiBmYWN0b3J5OwogICAgICB9IGVsc2Ug
        ewoKICAgICAgICB2YXIgaW5qZWN0aW9ucyAgICAgICAgPSBpbmplY3Rpb25z
        Rm9yKGNvbnRhaW5lciwgZnVsbE5hbWUpOwogICAgICAgIHZhciBmYWN0b3J5
        SW5qZWN0aW9ucyA9IGZhY3RvcnlJbmplY3Rpb25zRm9yKGNvbnRhaW5lciwg
        ZnVsbE5hbWUpOwoKICAgICAgICBmYWN0b3J5SW5qZWN0aW9ucy5fdG9TdHJp
        bmcgPSBjb250YWluZXIubWFrZVRvU3RyaW5nKGZhY3RvcnksIGZ1bGxOYW1l
        KTsKCiAgICAgICAgaW5qZWN0ZWRGYWN0b3J5ID0gZmFjdG9yeS5leHRlbmQo
        aW5qZWN0aW9ucyk7CiAgICAgICAgaW5qZWN0ZWRGYWN0b3J5LnJlb3BlbkNs
        YXNzKGZhY3RvcnlJbmplY3Rpb25zKTsKCiAgICAgICAgY2FjaGUuc2V0KGZ1
        bGxOYW1lLCBpbmplY3RlZEZhY3RvcnkpOwoKICAgICAgICByZXR1cm4gaW5q
        ZWN0ZWRGYWN0b3J5OwogICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gaW5q
        ZWN0aW9uc0Zvcihjb250YWluZXIsIGZ1bGxOYW1lKSB7CiAgICAgIHZhciBz
        cGxpdE5hbWUgPSBmdWxsTmFtZS5zcGxpdCgiOiIpLAogICAgICAgIHR5cGUg
        PSBzcGxpdE5hbWVbMF0sCiAgICAgICAgaW5qZWN0aW9ucyA9IFtdOwoKICAg
        ICAgaW5qZWN0aW9ucyA9IGluamVjdGlvbnMuY29uY2F0KGNvbnRhaW5lci50
        eXBlSW5qZWN0aW9ucy5nZXQodHlwZSkgfHwgW10pOwogICAgICBpbmplY3Rp
        b25zID0gaW5qZWN0aW9ucy5jb25jYXQoY29udGFpbmVyLmluamVjdGlvbnNb
        ZnVsbE5hbWVdIHx8IFtdKTsKCiAgICAgIGluamVjdGlvbnMgPSBidWlsZElu
        amVjdGlvbnMoY29udGFpbmVyLCBpbmplY3Rpb25zKTsKICAgICAgaW5qZWN0
        aW9ucy5fZGVidWdDb250YWluZXJLZXkgPSBmdWxsTmFtZTsKICAgICAgaW5q
        ZWN0aW9ucy5jb250YWluZXIgPSBjb250YWluZXI7CgogICAgICByZXR1cm4g
        aW5qZWN0aW9uczsKICAgIH0KCiAgICBmdW5jdGlvbiBmYWN0b3J5SW5qZWN0
        aW9uc0Zvcihjb250YWluZXIsIGZ1bGxOYW1lKSB7CiAgICAgIHZhciBzcGxp
        dE5hbWUgPSBmdWxsTmFtZS5zcGxpdCgiOiIpLAogICAgICAgIHR5cGUgPSBz
        cGxpdE5hbWVbMF0sCiAgICAgICAgZmFjdG9yeUluamVjdGlvbnMgPSBbXTsK
        CiAgICAgIGZhY3RvcnlJbmplY3Rpb25zID0gZmFjdG9yeUluamVjdGlvbnMu
        Y29uY2F0KGNvbnRhaW5lci5mYWN0b3J5VHlwZUluamVjdGlvbnMuZ2V0KHR5
        cGUpIHx8IFtdKTsKICAgICAgZmFjdG9yeUluamVjdGlvbnMgPSBmYWN0b3J5
        SW5qZWN0aW9ucy5jb25jYXQoY29udGFpbmVyLmZhY3RvcnlJbmplY3Rpb25z
        W2Z1bGxOYW1lXSB8fCBbXSk7CgogICAgICBmYWN0b3J5SW5qZWN0aW9ucyA9
        IGJ1aWxkSW5qZWN0aW9ucyhjb250YWluZXIsIGZhY3RvcnlJbmplY3Rpb25z
        KTsKICAgICAgZmFjdG9yeUluamVjdGlvbnMuX2RlYnVnQ29udGFpbmVyS2V5
        ID0gZnVsbE5hbWU7CgogICAgICByZXR1cm4gZmFjdG9yeUluamVjdGlvbnM7
        CiAgICB9CgogICAgZnVuY3Rpb24gaW5zdGFudGlhdGUoY29udGFpbmVyLCBm
        dWxsTmFtZSkgewogICAgICB2YXIgZmFjdG9yeSA9IGZhY3RvcnlGb3IoY29u
        dGFpbmVyLCBmdWxsTmFtZSk7CgogICAgICBpZiAob3B0aW9uKGNvbnRhaW5l
        ciwgZnVsbE5hbWUsICdpbnN0YW50aWF0ZScpID09PSBmYWxzZSkgewogICAg
        ICAgIHJldHVybiBmYWN0b3J5OwogICAgICB9CgogICAgICBpZiAoZmFjdG9y
        eSkgewogICAgICAgIGlmICh0eXBlb2YgZmFjdG9yeS5leHRlbmQgPT09ICdm
        dW5jdGlvbicpIHsKICAgICAgICAgIC8vIGFzc3VtZSB0aGUgZmFjdG9yeSB3
        YXMgZXh0ZW5kYWJsZSBhbmQgaXMgYWxyZWFkeSBpbmplY3RlZAogICAgICAg
        ICAgcmV0dXJuIGZhY3RvcnkuY3JlYXRlKCk7CiAgICAgICAgfSBlbHNlIHsK
        ICAgICAgICAgIC8vIGFzc3VtZSB0aGUgZmFjdG9yeSB3YXMgZXh0ZW5kYWJs
        ZQogICAgICAgICAgLy8gdG8gY3JlYXRlIHRpbWUgaW5qZWN0aW9ucwogICAg
        ICAgICAgLy8gVE9ETzogc3VwcG9ydCBuZXcnaW5nIGZvciBpbnN0YW50aWF0
        aW9uIGFuZCBtZXJnZSBpbmplY3Rpb25zIGZvciBwdXJlIEpTIEZ1bmN0aW9u
        cwogICAgICAgICAgcmV0dXJuIGZhY3RvcnkuY3JlYXRlKGluamVjdGlvbnNG
        b3IoY29udGFpbmVyLCBmdWxsTmFtZSkpOwogICAgICAgIH0KICAgICAgfQog
        ICAgfQoKICAgIGZ1bmN0aW9uIGVhY2hEZXN0cm95YWJsZShjb250YWluZXIs
        IGNhbGxiYWNrKSB7CiAgICAgIGNvbnRhaW5lci5jYWNoZS5lYWNoTG9jYWwo
        ZnVuY3Rpb24oa2V5LCB2YWx1ZSkgewogICAgICAgIGlmIChvcHRpb24oY29u
        dGFpbmVyLCBrZXksICdpbnN0YW50aWF0ZScpID09PSBmYWxzZSkgeyByZXR1
        cm47IH0KICAgICAgICBjYWxsYmFjayh2YWx1ZSk7CiAgICAgIH0pOwogICAg
        fQoKICAgIGZ1bmN0aW9uIHJlc2V0Q2FjaGUoY29udGFpbmVyKSB7CiAgICAg
        IGNvbnRhaW5lci5jYWNoZS5lYWNoTG9jYWwoZnVuY3Rpb24oa2V5LCB2YWx1
        ZSkgewogICAgICAgIGlmIChvcHRpb24oY29udGFpbmVyLCBrZXksICdpbnN0
        YW50aWF0ZScpID09PSBmYWxzZSkgeyByZXR1cm47IH0KICAgICAgICB2YWx1
        ZS5kZXN0cm95KCk7CiAgICAgIH0pOwogICAgICBjb250YWluZXIuY2FjaGUu
        ZGljdCA9IHt9OwogICAgfQoKICAgIGZ1bmN0aW9uIGFkZFR5cGVJbmplY3Rp
        b24ocnVsZXMsIHR5cGUsIHByb3BlcnR5LCBmdWxsTmFtZSkgewogICAgICB2
        YXIgaW5qZWN0aW9ucyA9IHJ1bGVzLmdldCh0eXBlKTsKCiAgICAgIGlmICgh
        aW5qZWN0aW9ucykgewogICAgICAgIGluamVjdGlvbnMgPSBbXTsKICAgICAg
        ICBydWxlcy5zZXQodHlwZSwgaW5qZWN0aW9ucyk7CiAgICAgIH0KCiAgICAg
        IGluamVjdGlvbnMucHVzaCh7CiAgICAgICAgcHJvcGVydHk6IHByb3BlcnR5
        LAogICAgICAgIGZ1bGxOYW1lOiBmdWxsTmFtZQogICAgICB9KTsKICAgIH0K
        CiAgICB2YXIgVkFMSURfRlVMTF9OQU1FX1JFR0VYUCA9IC9eW146XSsuKzpb
        XjpdKyQvOwogICAgZnVuY3Rpb24gdmFsaWRhdGVGdWxsTmFtZShmdWxsTmFt
        ZSkgewogICAgICBpZiAoIVZBTElEX0ZVTExfTkFNRV9SRUdFWFAudGVzdChm
        dWxsTmFtZSkpIHsKICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdJbnZh
        bGlkIEZ1bGxuYW1lLCBleHBlY3RlZDogYHR5cGU6bmFtZWAgZ290OiAnICsg
        ZnVsbE5hbWUpOwogICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gYWRkSW5q
        ZWN0aW9uKHJ1bGVzLCBmYWN0b3J5TmFtZSwgcHJvcGVydHksIGluamVjdGlv
        bk5hbWUpIHsKICAgICAgdmFyIGluamVjdGlvbnMgPSBydWxlc1tmYWN0b3J5
        TmFtZV0gPSBydWxlc1tmYWN0b3J5TmFtZV0gfHwgW107CiAgICAgIGluamVj
        dGlvbnMucHVzaCh7IHByb3BlcnR5OiBwcm9wZXJ0eSwgZnVsbE5hbWU6IGlu
        amVjdGlvbk5hbWUgfSk7CiAgICB9CgogICAgX19leHBvcnRzX19bImRlZmF1
        bHQiXSA9IENvbnRhaW5lcjsKICB9KTsKZGVmaW5lKCJjb250YWluZXIvaW5o
        ZXJpdGluZ19kaWN0IiwgCiAgWyJleHBvcnRzIl0sCiAgZnVuY3Rpb24oX19l
        eHBvcnRzX18pIHsKICAgICJ1c2Ugc3RyaWN0IjsKICAgIC8vIEEgc2FmZSBh
        bmQgc2ltcGxlIGluaGVyaXRpbmcgb2JqZWN0LgogICAgZnVuY3Rpb24gSW5o
        ZXJpdGluZ0RpY3QocGFyZW50KSB7CiAgICAgIHRoaXMucGFyZW50ID0gcGFy
        ZW50OwogICAgICB0aGlzLmRpY3QgPSB7fTsKICAgIH0KCiAgICBJbmhlcml0
        aW5nRGljdC5wcm90b3R5cGUgPSB7CgogICAgICAvKioKICAgICAgICBAcHJv
        cGVydHkgcGFyZW50CiAgICAgICAgQHR5cGUgSW5oZXJpdGluZ0RpY3QKICAg
        ICAgICBAZGVmYXVsdCBudWxsCiAgICAgICovCgogICAgICBwYXJlbnQ6IG51
        bGwsCgogICAgICAvKioKICAgICAgICBPYmplY3QgdXNlZCB0byBzdG9yZSB0
        aGUgY3VycmVudCBub2RlcyBkYXRhLgoKICAgICAgICBAcHJvcGVydHkgZGlj
        dAogICAgICAgIEB0eXBlIE9iamVjdAogICAgICAgIEBkZWZhdWx0IE9iamVj
        dAogICAgICAqLwogICAgICBkaWN0OiBudWxsLAoKICAgICAgLyoqCiAgICAg
        ICAgUmV0cmlldmUgdGhlIHZhbHVlIGdpdmVuIGEga2V5LCBpZiB0aGUgdmFs
        dWUgaXMgcHJlc2VudCBhdCB0aGUgY3VycmVudAogICAgICAgIGxldmVsIHVz
        ZSBpdCwgb3RoZXJ3aXNlIHdhbGsgdXAgdGhlIHBhcmVudCBoaWVyYXJjaHkg
        YW5kIHRyeSBhZ2Fpbi4gSWYKICAgICAgICBubyBtYXRjaGluZyBrZXkgaXMg
        Zm91bmQsIHJldHVybiB1bmRlZmluZWQuCgogICAgICAgIEBtZXRob2QgZ2V0
        CiAgICAgICAgQHBhcmFtIHtTdHJpbmd9IGtleQogICAgICAgIEByZXR1cm4g
        e2FueX0KICAgICAgKi8KICAgICAgZ2V0OiBmdW5jdGlvbihrZXkpIHsKICAg
        ICAgICB2YXIgZGljdCA9IHRoaXMuZGljdDsKCiAgICAgICAgaWYgKGRpY3Qu
        aGFzT3duUHJvcGVydHkoa2V5KSkgewogICAgICAgICAgcmV0dXJuIGRpY3Rb
        a2V5XTsKICAgICAgICB9CgogICAgICAgIGlmICh0aGlzLnBhcmVudCkgewog
        ICAgICAgICAgcmV0dXJuIHRoaXMucGFyZW50LmdldChrZXkpOwogICAgICAg
        IH0KICAgICAgfSwKCiAgICAgIC8qKgogICAgICAgIFNldCB0aGUgZ2l2ZW4g
        dmFsdWUgZm9yIHRoZSBnaXZlbiBrZXksIGF0IHRoZSBjdXJyZW50IGxldmVs
        LgoKICAgICAgICBAbWV0aG9kIHNldAogICAgICAgIEBwYXJhbSB7U3RyaW5n
        fSBrZXkKICAgICAgICBAcGFyYW0ge0FueX0gdmFsdWUKICAgICAgKi8KICAg
        ICAgc2V0OiBmdW5jdGlvbihrZXksIHZhbHVlKSB7CiAgICAgICAgdGhpcy5k
        aWN0W2tleV0gPSB2YWx1ZTsKICAgICAgfSwKCiAgICAgIC8qKgogICAgICAg
        IERlbGV0ZSB0aGUgZ2l2ZW4ga2V5CgogICAgICAgIEBtZXRob2QgcmVtb3Zl
        CiAgICAgICAgQHBhcmFtIHtTdHJpbmd9IGtleQogICAgICAqLwogICAgICBy
        ZW1vdmU6IGZ1bmN0aW9uKGtleSkgewogICAgICAgIGRlbGV0ZSB0aGlzLmRp
        Y3Rba2V5XTsKICAgICAgfSwKCiAgICAgIC8qKgogICAgICAgIENoZWNrIGZv
        ciB0aGUgZXhpc3RlbmNlIG9mIGdpdmVuIGEga2V5LCBpZiB0aGUga2V5IGlz
        IHByZXNlbnQgYXQgdGhlIGN1cnJlbnQKICAgICAgICBsZXZlbCByZXR1cm4g
        dHJ1ZSwgb3RoZXJ3aXNlIHdhbGsgdXAgdGhlIHBhcmVudCBoaWVyYXJjaHkg
        YW5kIHRyeSBhZ2Fpbi4gSWYKICAgICAgICBubyBtYXRjaGluZyBrZXkgaXMg
        Zm91bmQsIHJldHVybiBmYWxzZS4KCiAgICAgICAgQG1ldGhvZCBoYXMKICAg
        ICAgICBAcGFyYW0ge1N0cmluZ30ga2V5CiAgICAgICAgQHJldHVybiB7Qm9v
        bGVhbn0KICAgICAgKi8KICAgICAgaGFzOiBmdW5jdGlvbihrZXkpIHsKICAg
        ICAgICB2YXIgZGljdCA9IHRoaXMuZGljdDsKCiAgICAgICAgaWYgKGRpY3Qu
        aGFzT3duUHJvcGVydHkoa2V5KSkgewogICAgICAgICAgcmV0dXJuIHRydWU7
        CiAgICAgICAgfQoKICAgICAgICBpZiAodGhpcy5wYXJlbnQpIHsKICAgICAg
        ICAgIHJldHVybiB0aGlzLnBhcmVudC5oYXMoa2V5KTsKICAgICAgICB9Cgog
        ICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfSwKCiAgICAgIC8qKgogICAg
        ICAgIEl0ZXJhdGUgYW5kIGludm9rZSBhIGNhbGxiYWNrIGZvciBlYWNoIGxv
        Y2FsIGtleS12YWx1ZSBwYWlyLgoKICAgICAgICBAbWV0aG9kIGVhY2hMb2Nh
        bAogICAgICAgIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrCiAgICAgICAg
        QHBhcmFtIHtPYmplY3R9IGJpbmRpbmcKICAgICAgKi8KICAgICAgZWFjaExv
        Y2FsOiBmdW5jdGlvbihjYWxsYmFjaywgYmluZGluZykgewogICAgICAgIHZh
        ciBkaWN0ID0gdGhpcy5kaWN0OwoKICAgICAgICBmb3IgKHZhciBwcm9wIGlu
        IGRpY3QpIHsKICAgICAgICAgIGlmIChkaWN0Lmhhc093blByb3BlcnR5KHBy
        b3ApKSB7CiAgICAgICAgICAgIGNhbGxiYWNrLmNhbGwoYmluZGluZywgcHJv
        cCwgZGljdFtwcm9wXSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9
        CiAgICB9OwoKICAgIF9fZXhwb3J0c19fWyJkZWZhdWx0Il0gPSBJbmhlcml0
        aW5nRGljdDsKICB9KTsKZGVmaW5lKCJjb250YWluZXIiLCAKICBbImNvbnRh
        aW5lci9jb250YWluZXIiLCJleHBvcnRzIl0sCiAgZnVuY3Rpb24oX19kZXBl
        bmRlbmN5MV9fLCBfX2V4cG9ydHNfXykgewogICAgInVzZSBzdHJpY3QiOwog
        ICAgLyoqCiAgICBQdWJsaWMgYXBpIGZvciB0aGUgY29udGFpbmVyIGlzIHN0
        aWxsIGluIGZsdXguCiAgICBUaGUgcHVibGljIGFwaSwgc3BlY2lmaWVkIG9u
        IHRoZSBhcHBsaWNhdGlvbiBuYW1lc3BhY2Ugc2hvdWxkIGJlIGNvbnNpZGVy
        ZWQgdGhlIHN0YWJsZSBhcGkuCiAgICAvLyBAbW9kdWxlIGNvbnRhaW5lcgog
        ICAgICBAcHJpdmF0ZQogICAgKi8KCiAgICAvKgogICAgIEZsYWcgdG8gZW5h
        YmxlL2Rpc2FibGUgbW9kZWwgZmFjdG9yeSBpbmplY3Rpb25zIChkaXNhYmxl
        ZCBieSBkZWZhdWx0KQogICAgIElmIG1vZGVsIGZhY3RvcnkgaW5qZWN0aW9u
        cyBhcmUgZW5hYmxlZCwgbW9kZWxzIHNob3VsZCBub3QgYmUKICAgICBhY2Nl
        c3NlZCBnbG9iYWxseSAob25seSB0aHJvdWdoIGBjb250YWluZXIubG9va3Vw
        RmFjdG9yeSgnbW9kZWw6bW9kZWxOYW1lJykpYCk7CiAgICAqLwogICAgRW1i
        ZXIuTU9ERUxfRkFDVE9SWV9JTkpFQ1RJT05TID0gZmFsc2UgfHwgISFFbWJl
        ci5FTlYuTU9ERUxfRkFDVE9SWV9JTkpFQ1RJT05TOwoKICAgIHZhciBDb250
        YWluZXIgPSBfX2RlcGVuZGVuY3kxX19bImRlZmF1bHQiXTsKCiAgICBfX2V4
        cG9ydHNfX1siZGVmYXVsdCJdID0gQ29udGFpbmVyOwogIH0pOwp9KSgpOwoK
        KGZ1bmN0aW9uKCkgewovKmdsb2JhbHMgRU5WICovCi8qKgpAbW9kdWxlIGVt
        YmVyCkBzdWJtb2R1bGUgZW1iZXItcnVudGltZQoqLwoKdmFyIGluZGV4T2Yg
        PSBFbWJlci5FbnVtZXJhYmxlVXRpbHMuaW5kZXhPZjsKCi8qKgogVGhpcyB3
        aWxsIGNvbXBhcmUgdHdvIGphdmFzY3JpcHQgdmFsdWVzIG9mIHBvc3NpYmx5
        IGRpZmZlcmVudCB0eXBlcy4KIEl0IHdpbGwgdGVsbCB5b3Ugd2hpY2ggb25l
        IGlzIGdyZWF0ZXIgdGhhbiB0aGUgb3RoZXIgYnkgcmV0dXJuaW5nOgoKICAt
        IC0xIGlmIHRoZSBmaXJzdCBpcyBzbWFsbGVyIHRoYW4gdGhlIHNlY29uZCwK
        ICAtIDAgaWYgYm90aCBhcmUgZXF1YWwsCiAgLSAxIGlmIHRoZSBmaXJzdCBp
        cyBncmVhdGVyIHRoYW4gdGhlIHNlY29uZC4KCiBUaGUgb3JkZXIgaXMgY2Fs
        Y3VsYXRlZCBiYXNlZCBvbiBgRW1iZXIuT1JERVJfREVGSU5JVElPTmAsIGlm
        IHR5cGVzIGFyZSBkaWZmZXJlbnQuCiBJbiBjYXNlIHRoZXkgaGF2ZSB0aGUg
        c2FtZSB0eXBlIGFuIGFwcHJvcHJpYXRlIGNvbXBhcmlzb24gZm9yIHRoaXMg
        dHlwZSBpcyBtYWRlLgoKICBgYGBqYXZhc2NyaXB0CiAgRW1iZXIuY29tcGFy
        ZSgnaGVsbG8nLCAnaGVsbG8nKTsgIC8vIDAKICBFbWJlci5jb21wYXJlKCdh
        YmMnLCAnZGZnJyk7ICAgICAgLy8gLTEKICBFbWJlci5jb21wYXJlKDIsIDEp
        OyAgICAgICAgICAgICAgLy8gMQogIGBgYAoKIEBtZXRob2QgY29tcGFyZQog
        QGZvciBFbWJlcgogQHBhcmFtIHtPYmplY3R9IHYgRmlyc3QgdmFsdWUgdG8g
        Y29tcGFyZQogQHBhcmFtIHtPYmplY3R9IHcgU2Vjb25kIHZhbHVlIHRvIGNv
        bXBhcmUKIEByZXR1cm4ge051bWJlcn0gLTEgaWYgdiA8IHcsIDAgaWYgdiA9
        IHcgYW5kIDEgaWYgdiA+IHcuCiovCkVtYmVyLmNvbXBhcmUgPSBmdW5jdGlv
        biBjb21wYXJlKHYsIHcpIHsKICBpZiAodiA9PT0gdykgeyByZXR1cm4gMDsg
        fQoKICB2YXIgdHlwZTEgPSBFbWJlci50eXBlT2Yodik7CiAgdmFyIHR5cGUy
        ID0gRW1iZXIudHlwZU9mKHcpOwoKICB2YXIgQ29tcGFyYWJsZSA9IEVtYmVy
        LkNvbXBhcmFibGU7CiAgaWYgKENvbXBhcmFibGUpIHsKICAgIGlmICh0eXBl
        MT09PSdpbnN0YW5jZScgJiYgQ29tcGFyYWJsZS5kZXRlY3Qodi5jb25zdHJ1
        Y3RvcikpIHsKICAgICAgcmV0dXJuIHYuY29uc3RydWN0b3IuY29tcGFyZSh2
        LCB3KTsKICAgIH0KCiAgICBpZiAodHlwZTIgPT09ICdpbnN0YW5jZScgJiYg
        Q29tcGFyYWJsZS5kZXRlY3Qody5jb25zdHJ1Y3RvcikpIHsKICAgICAgcmV0
        dXJuIDEtdy5jb25zdHJ1Y3Rvci5jb21wYXJlKHcsIHYpOwogICAgfQogIH0K
        CiAgLy8gSWYgd2UgaGF2ZW4ndCB5ZXQgZ2VuZXJhdGVkIGEgcmV2ZXJzZS1t
        YXBwaW5nIG9mIEVtYmVyLk9SREVSX0RFRklOSVRJT04sCiAgLy8gZG8gc28g
        bm93LgogIHZhciBtYXBwaW5nID0gRW1iZXIuT1JERVJfREVGSU5JVElPTl9N
        QVBQSU5HOwogIGlmICghbWFwcGluZykgewogICAgdmFyIG9yZGVyID0gRW1i
        ZXIuT1JERVJfREVGSU5JVElPTjsKICAgIG1hcHBpbmcgPSBFbWJlci5PUkRF
        Ul9ERUZJTklUSU9OX01BUFBJTkcgPSB7fTsKICAgIHZhciBpZHgsIGxlbjsK
        ICAgIGZvciAoaWR4ID0gMCwgbGVuID0gb3JkZXIubGVuZ3RoOyBpZHggPCBs
        ZW47ICArK2lkeCkgewogICAgICBtYXBwaW5nW29yZGVyW2lkeF1dID0gaWR4
        OwogICAgfQoKICAgIC8vIFdlIG5vIGxvbmdlciBuZWVkIEVtYmVyLk9SREVS
        X0RFRklOSVRJT04uCiAgICBkZWxldGUgRW1iZXIuT1JERVJfREVGSU5JVElP
        TjsKICB9CgogIHZhciB0eXBlMUluZGV4ID0gbWFwcGluZ1t0eXBlMV07CiAg
        dmFyIHR5cGUySW5kZXggPSBtYXBwaW5nW3R5cGUyXTsKCiAgaWYgKHR5cGUx
        SW5kZXggPCB0eXBlMkluZGV4KSB7IHJldHVybiAtMTsgfQogIGlmICh0eXBl
        MUluZGV4ID4gdHlwZTJJbmRleCkgeyByZXR1cm4gMTsgfQoKICAvLyB0eXBl
        cyBhcmUgZXF1YWwgLSBzbyB3ZSBoYXZlIHRvIGNoZWNrIHZhbHVlcyBub3cK
        ICBzd2l0Y2ggKHR5cGUxKSB7CiAgICBjYXNlICdib29sZWFuJzoKICAgIGNh
        c2UgJ251bWJlcic6CiAgICAgIGlmICh2IDwgdykgeyByZXR1cm4gLTE7IH0K
        ICAgICAgaWYgKHYgPiB3KSB7IHJldHVybiAxOyB9CiAgICAgIHJldHVybiAw
        OwoKICAgIGNhc2UgJ3N0cmluZyc6CiAgICAgIHZhciBjb21wID0gdi5sb2Nh
        bGVDb21wYXJlKHcpOwogICAgICBpZiAoY29tcCA8IDApIHsgcmV0dXJuIC0x
        OyB9CiAgICAgIGlmIChjb21wID4gMCkgeyByZXR1cm4gMTsgfQogICAgICBy
        ZXR1cm4gMDsKCiAgICBjYXNlICdhcnJheSc6CiAgICAgIHZhciB2TGVuID0g
        di5sZW5ndGg7CiAgICAgIHZhciB3TGVuID0gdy5sZW5ndGg7CiAgICAgIHZh
        ciBsID0gTWF0aC5taW4odkxlbiwgd0xlbik7CiAgICAgIHZhciByID0gMDsK
        ICAgICAgdmFyIGkgPSAwOwogICAgICB3aGlsZSAociA9PT0gMCAmJiBpIDwg
        bCkgewogICAgICAgIHIgPSBjb21wYXJlKHZbaV0sd1tpXSk7CiAgICAgICAg
        aSsrOwogICAgICB9CiAgICAgIGlmIChyICE9PSAwKSB7IHJldHVybiByOyB9
        CgogICAgICAvLyBhbGwgZWxlbWVudHMgYXJlIGVxdWFsIG5vdwogICAgICAv
        LyBzaG9ydGVyIGFycmF5IHNob3VsZCBiZSBvcmRlcmVkIGZpcnN0CiAgICAg
        IGlmICh2TGVuIDwgd0xlbikgeyByZXR1cm4gLTE7IH0KICAgICAgaWYgKHZM
        ZW4gPiB3TGVuKSB7IHJldHVybiAxOyB9CiAgICAgIC8vIGFycmF5cyBhcmUg
        ZXF1YWwgbm93CiAgICAgIHJldHVybiAwOwoKICAgIGNhc2UgJ2luc3RhbmNl
        JzoKICAgICAgaWYgKEVtYmVyLkNvbXBhcmFibGUgJiYgRW1iZXIuQ29tcGFy
        YWJsZS5kZXRlY3QodikpIHsKICAgICAgICByZXR1cm4gdi5jb21wYXJlKHYs
        IHcpOwogICAgICB9CiAgICAgIHJldHVybiAwOwoKICAgIGNhc2UgJ2RhdGUn
        OgogICAgICB2YXIgdk51bSA9IHYuZ2V0VGltZSgpOwogICAgICB2YXIgd051
        bSA9IHcuZ2V0VGltZSgpOwogICAgICBpZiAodk51bSA8IHdOdW0pIHsgcmV0
        dXJuIC0xOyB9CiAgICAgIGlmICh2TnVtID4gd051bSkgeyByZXR1cm4gMTsg
        fQogICAgICByZXR1cm4gMDsKCiAgICBkZWZhdWx0OgogICAgICByZXR1cm4g
        MDsKICB9Cn07CgpmdW5jdGlvbiBfY29weShvYmosIGRlZXAsIHNlZW4sIGNv
        cGllcykgewogIHZhciByZXQsIGxvYywga2V5OwoKICAvLyBwcmltaXRpdmUg
        ZGF0YSB0eXBlcyBhcmUgaW1tdXRhYmxlLCBqdXN0IHJldHVybiB0aGVtLgog
        IGlmICgnb2JqZWN0JyAhPT0gdHlwZW9mIG9iaiB8fCBvYmo9PT1udWxsKSBy
        ZXR1cm4gb2JqOwoKICAvLyBhdm9pZCBjeWNsaWNhbCBsb29wcwogIGlmIChk
        ZWVwICYmIChsb2M9aW5kZXhPZihzZWVuLCBvYmopKT49MCkgcmV0dXJuIGNv
        cGllc1tsb2NdOwoKICBFbWJlci5hc3NlcnQoJ0Nhbm5vdCBjbG9uZSBhbiBF
        bWJlci5PYmplY3QgdGhhdCBkb2VzIG5vdCBpbXBsZW1lbnQgRW1iZXIuQ29w
        eWFibGUnLCAhKG9iaiBpbnN0YW5jZW9mIEVtYmVyLk9iamVjdCkgfHwgKEVt
        YmVyLkNvcHlhYmxlICYmIEVtYmVyLkNvcHlhYmxlLmRldGVjdChvYmopKSk7
        CgogIC8vIElNUE9SVEFOVDogdGhpcyBzcGVjaWZpYyB0ZXN0IHdpbGwgZGV0
        ZWN0IGEgbmF0aXZlIGFycmF5IG9ubHkuIEFueSBvdGhlcgogIC8vIG9iamVj
        dCB3aWxsIG5lZWQgdG8gaW1wbGVtZW50IENvcHlhYmxlLgogIGlmIChFbWJl
        ci50eXBlT2Yob2JqKSA9PT0gJ2FycmF5JykgewogICAgcmV0ID0gb2JqLnNs
        aWNlKCk7CiAgICBpZiAoZGVlcCkgewogICAgICBsb2MgPSByZXQubGVuZ3Ro
        OwogICAgICB3aGlsZSgtLWxvYz49MCkgcmV0W2xvY10gPSBfY29weShyZXRb
        bG9jXSwgZGVlcCwgc2VlbiwgY29waWVzKTsKICAgIH0KICB9IGVsc2UgaWYg
        KEVtYmVyLkNvcHlhYmxlICYmIEVtYmVyLkNvcHlhYmxlLmRldGVjdChvYmop
        KSB7CiAgICByZXQgPSBvYmouY29weShkZWVwLCBzZWVuLCBjb3BpZXMpOwog
        IH0gZWxzZSB7CiAgICByZXQgPSB7fTsKICAgIGZvcihrZXkgaW4gb2JqKSB7
        CiAgICAgIGlmICghb2JqLmhhc093blByb3BlcnR5KGtleSkpIGNvbnRpbnVl
        OwoKICAgICAgLy8gUHJldmVudHMgYnJvd3NlcnMgdGhhdCBkb24ndCByZXNw
        ZWN0IG5vbi1lbnVtZXJhYmlsaXR5IGZyb20KICAgICAgLy8gY29weWluZyBp
        bnRlcm5hbCBFbWJlciBwcm9wZXJ0aWVzCiAgICAgIGlmIChrZXkuc3Vic3Ry
        aW5nKDAsMikgPT09ICdfXycpIGNvbnRpbnVlOwoKICAgICAgcmV0W2tleV0g
        PSBkZWVwID8gX2NvcHkob2JqW2tleV0sIGRlZXAsIHNlZW4sIGNvcGllcykg
        OiBvYmpba2V5XTsKICAgIH0KICB9CgogIGlmIChkZWVwKSB7CiAgICBzZWVu
        LnB1c2gob2JqKTsKICAgIGNvcGllcy5wdXNoKHJldCk7CiAgfQoKICByZXR1
        cm4gcmV0Owp9CgovKioKICBDcmVhdGVzIGEgY2xvbmUgb2YgdGhlIHBhc3Nl
        ZCBvYmplY3QuIFRoaXMgZnVuY3Rpb24gY2FuIHRha2UganVzdCBhYm91dAog
        IGFueSB0eXBlIG9mIG9iamVjdCBhbmQgY3JlYXRlIGEgY2xvbmUgb2YgaXQs
        IGluY2x1ZGluZyBwcmltaXRpdmUgdmFsdWVzCiAgKHdoaWNoIGFyZSBub3Qg
        YWN0dWFsbHkgY2xvbmVkIGJlY2F1c2UgdGhleSBhcmUgaW1tdXRhYmxlKS4K
        CiAgSWYgdGhlIHBhc3NlZCBvYmplY3QgaW1wbGVtZW50cyB0aGUgYGNsb25l
        KClgIG1ldGhvZCwgdGhlbiB0aGlzIGZ1bmN0aW9uCiAgd2lsbCBzaW1wbHkg
        Y2FsbCB0aGF0IG1ldGhvZCBhbmQgcmV0dXJuIHRoZSByZXN1bHQuCgogIEBt
        ZXRob2QgY29weQogIEBmb3IgRW1iZXIKICBAcGFyYW0ge09iamVjdH0gb2Jq
        IFRoZSBvYmplY3QgdG8gY2xvbmUKICBAcGFyYW0ge0Jvb2xlYW59IGRlZXAg
        SWYgdHJ1ZSwgYSBkZWVwIGNvcHkgb2YgdGhlIG9iamVjdCBpcyBtYWRlCiAg
        QHJldHVybiB7T2JqZWN0fSBUaGUgY2xvbmVkIG9iamVjdAoqLwpFbWJlci5j
        b3B5ID0gZnVuY3Rpb24ob2JqLCBkZWVwKSB7CiAgLy8gZmFzdCBwYXRocwog
        IGlmICgnb2JqZWN0JyAhPT0gdHlwZW9mIG9iaiB8fCBvYmo9PT1udWxsKSBy
        ZXR1cm4gb2JqOyAvLyBjYW4ndCBjb3B5IHByaW1pdGl2ZXMKICBpZiAoRW1i
        ZXIuQ29weWFibGUgJiYgRW1iZXIuQ29weWFibGUuZGV0ZWN0KG9iaikpIHJl
        dHVybiBvYmouY29weShkZWVwKTsKICByZXR1cm4gX2NvcHkob2JqLCBkZWVw
        LCBkZWVwID8gW10gOiBudWxsLCBkZWVwID8gW10gOiBudWxsKTsKfTsKCi8q
        KgogIENvbXBhcmVzIHR3byBvYmplY3RzLCByZXR1cm5pbmcgdHJ1ZSBpZiB0
        aGV5IGFyZSBsb2dpY2FsbHkgZXF1YWwuIFRoaXMgaXMKICBhIGRlZXBlciBj
        b21wYXJpc29uIHRoYW4gYSBzaW1wbGUgdHJpcGxlIGVxdWFsLiBGb3Igc2V0
        cyBpdCB3aWxsIGNvbXBhcmUgdGhlCiAgaW50ZXJuYWwgb2JqZWN0cy4gRm9y
        IGFueSBvdGhlciBvYmplY3QgdGhhdCBpbXBsZW1lbnRzIGBpc0VxdWFsKClg
        IGl0IHdpbGwKICByZXNwZWN0IHRoYXQgbWV0aG9kLgoKICBgYGBqYXZhc2Ny
        aXB0CiAgRW1iZXIuaXNFcXVhbCgnaGVsbG8nLCAnaGVsbG8nKTsgIC8vIHRy
        dWUKICBFbWJlci5pc0VxdWFsKDEsIDIpOyAgICAgICAgICAgICAgLy8gZmFs
        c2UKICBFbWJlci5pc0VxdWFsKFs0LDJdLCBbNCwyXSk7ICAgICAgLy8gZmFs
        c2UKICBgYGAKCiAgQG1ldGhvZCBpc0VxdWFsCiAgQGZvciBFbWJlcgogIEBw
        YXJhbSB7T2JqZWN0fSBhIGZpcnN0IG9iamVjdCB0byBjb21wYXJlCiAgQHBh
        cmFtIHtPYmplY3R9IGIgc2Vjb25kIG9iamVjdCB0byBjb21wYXJlCiAgQHJl
        dHVybiB7Qm9vbGVhbn0KKi8KRW1iZXIuaXNFcXVhbCA9IGZ1bmN0aW9uKGEs
        IGIpIHsKICBpZiAoYSAmJiAnZnVuY3Rpb24nPT09dHlwZW9mIGEuaXNFcXVh
        bCkgcmV0dXJuIGEuaXNFcXVhbChiKTsKICByZXR1cm4gYSA9PT0gYjsKfTsK
        Ci8vIFVzZWQgYnkgRW1iZXIuY29tcGFyZQpFbWJlci5PUkRFUl9ERUZJTklU
        SU9OID0gRW1iZXIuRU5WLk9SREVSX0RFRklOSVRJT04gfHwgWwogICd1bmRl
        ZmluZWQnLAogICdudWxsJywKICAnYm9vbGVhbicsCiAgJ251bWJlcicsCiAg
        J3N0cmluZycsCiAgJ2FycmF5JywKICAnb2JqZWN0JywKICAnaW5zdGFuY2Un
        LAogICdmdW5jdGlvbicsCiAgJ2NsYXNzJywKICAnZGF0ZScKXTsKCi8qKgog
        IFJldHVybnMgYWxsIG9mIHRoZSBrZXlzIGRlZmluZWQgb24gYW4gb2JqZWN0
        IG9yIGhhc2guIFRoaXMgaXMgdXNlZnVsCiAgd2hlbiBpbnNwZWN0aW5nIG9i
        amVjdHMgZm9yIGRlYnVnZ2luZy4gT24gYnJvd3NlcnMgdGhhdCBzdXBwb3J0
        IGl0LCB0aGlzCiAgdXNlcyB0aGUgbmF0aXZlIGBPYmplY3Qua2V5c2AgaW1w
        bGVtZW50YXRpb24uCgogIEBtZXRob2Qga2V5cwogIEBmb3IgRW1iZXIKICBA
        cGFyYW0ge09iamVjdH0gb2JqCiAgQHJldHVybiB7QXJyYXl9IEFycmF5IGNv
        bnRhaW5pbmcga2V5cyBvZiBvYmoKKi8KRW1iZXIua2V5cyA9IE9iamVjdC5r
        ZXlzOwoKaWYgKCFFbWJlci5rZXlzIHx8IEVtYmVyLmNyZWF0ZS5pc1NpbXVs
        YXRlZCkgewogIHZhciBwcm90b3R5cGVQcm9wZXJ0aWVzID0gWwogICAgJ2Nv
        bnN0cnVjdG9yJywKICAgICdoYXNPd25Qcm9wZXJ0eScsCiAgICAnaXNQcm90
        b3R5cGVPZicsCiAgICAncHJvcGVydHlJc0VudW1lcmFibGUnLAogICAgJ3Zh
        bHVlT2YnLAogICAgJ3RvTG9jYWxlU3RyaW5nJywKICAgICd0b1N0cmluZycK
        ICBdLAogIHB1c2hQcm9wZXJ0eU5hbWUgPSBmdW5jdGlvbihvYmosIGFycmF5
        LCBrZXkpIHsKICAgIC8vIFByZXZlbnRzIGJyb3dzZXJzIHRoYXQgZG9uJ3Qg
        cmVzcGVjdCBub24tZW51bWVyYWJpbGl0eSBmcm9tCiAgICAvLyBjb3B5aW5n
        IGludGVybmFsIEVtYmVyIHByb3BlcnRpZXMKICAgIGlmIChrZXkuc3Vic3Ry
        aW5nKDAsMikgPT09ICdfXycpIHJldHVybjsKICAgIGlmIChrZXkgPT09ICdf
        c3VwZXInKSByZXR1cm47CiAgICBpZiAoaW5kZXhPZihhcnJheSwga2V5KSA+
        PSAwKSByZXR1cm47CiAgICBpZiAoIW9iai5oYXNPd25Qcm9wZXJ0eShrZXkp
        KSByZXR1cm47CgogICAgYXJyYXkucHVzaChrZXkpOwogIH07CgogIEVtYmVy
        LmtleXMgPSBmdW5jdGlvbihvYmopIHsKICAgIHZhciByZXQgPSBbXSwga2V5
        OwogICAgZm9yIChrZXkgaW4gb2JqKSB7CiAgICAgIHB1c2hQcm9wZXJ0eU5h
        bWUob2JqLCByZXQsIGtleSk7CiAgICB9CgogICAgLy8gSUU4IGRvZXNuJ3Qg
        ZW51bWVyYXRlIHByb3BlcnR5IHRoYXQgbmFtZWQgdGhlIHNhbWUgYXMgcHJv
        dG90eXBlIHByb3BlcnRpZXMuCiAgICBmb3IgKHZhciBpID0gMCwgbCA9IHBy
        b3RvdHlwZVByb3BlcnRpZXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7CiAgICAg
        IGtleSA9IHByb3RvdHlwZVByb3BlcnRpZXNbaV07CgogICAgICBwdXNoUHJv
        cGVydHlOYW1lKG9iaiwgcmV0LCBrZXkpOwogICAgfQoKICAgIHJldHVybiBy
        ZXQ7CiAgfTsKfQoKfSkoKTsKCgoKKGZ1bmN0aW9uKCkgewovKioKQG1vZHVs
        ZSBlbWJlcgpAc3VibW9kdWxlIGVtYmVyLXJ1bnRpbWUKKi8KCnZhciBTVFJJ
        TkdfREFTSEVSSVpFX1JFR0VYUCA9ICgvWyBfXS9nKTsKdmFyIFNUUklOR19E
        QVNIRVJJWkVfQ0FDSEUgPSB7fTsKdmFyIFNUUklOR19ERUNBTUVMSVpFX1JF
        R0VYUCA9ICgvKFthLXpcZF0pKFtBLVpdKS9nKTsKdmFyIFNUUklOR19DQU1F
        TElaRV9SRUdFWFAgPSAoLyhcLXxffFwufFxzKSsoLik/L2cpOwp2YXIgU1RS
        SU5HX1VOREVSU0NPUkVfUkVHRVhQXzEgPSAoLyhbYS16XGRdKShbQS1aXSsp
        L2cpOwp2YXIgU1RSSU5HX1VOREVSU0NPUkVfUkVHRVhQXzIgPSAoL1wtfFxz
        Ky9nKTsKdmFyIFNUUklOR19QQVJBTUVURVJJWkVfUkVHRVhQXzEgPSAoL1tf
        fFwvfFxzXSsvZyk7CnZhciBTVFJJTkdfUEFSQU1FVEVSSVpFX1JFR0VYUF8y
        ID0gKC9bXmEtejAtOVwtXSsvZ2kpOwp2YXIgU1RSSU5HX1BBUkFNRVRFUkla
        RV9SRUdFWFBfMyA9ICgvW1wtXSsvZyk7CnZhciBTVFJJTkdfUEFSQU1FVEVS
        SVpFX1JFR0VYUF80ID0gKC9eLSt8LSskL2cpOwoKLyoqCiAgRGVmaW5lcyB0
        aGUgaGFzaCBvZiBsb2NhbGl6ZWQgc3RyaW5ncyBmb3IgdGhlIGN1cnJlbnQg
        bGFuZ3VhZ2UuIFVzZWQgYnkKICB0aGUgYEVtYmVyLlN0cmluZy5sb2MoKWAg
        aGVscGVyLiBUbyBsb2NhbGl6ZSwgYWRkIHN0cmluZyB2YWx1ZXMgdG8gdGhp
        cwogIGhhc2guCgogIEBwcm9wZXJ0eSBTVFJJTkdTCiAgQGZvciBFbWJlcgog
        IEB0eXBlIEhhc2gKKi8KRW1iZXIuU1RSSU5HUyA9IHt9OwoKLyoqCiAgRGVm
        aW5lcyBzdHJpbmcgaGVscGVyIG1ldGhvZHMgaW5jbHVkaW5nIHN0cmluZyBm
        b3JtYXR0aW5nIGFuZCBsb2NhbGl6YXRpb24uCiAgVW5sZXNzIGBFbWJlci5F
        WFRFTkRfUFJPVE9UWVBFUy5TdHJpbmdgIGlzIGBmYWxzZWAgdGhlc2UgbWV0
        aG9kcyB3aWxsIGFsc28gYmUKICBhZGRlZCB0byB0aGUgYFN0cmluZy5wcm90
        b3R5cGVgIGFzIHdlbGwuCgogIEBjbGFzcyBTdHJpbmcKICBAbmFtZXNwYWNl
        IEVtYmVyCiAgQHN0YXRpYwoqLwpFbWJlci5TdHJpbmcgPSB7CgogIC8qKgog
        ICAgQXBwbHkgZm9ybWF0dGluZyBvcHRpb25zIHRvIHRoZSBzdHJpbmcuIFRo
        aXMgd2lsbCBsb29rIGZvciBvY2N1cnJlbmNlcwogICAgb2YgIiVAIiBpbiB5
        b3VyIHN0cmluZyBhbmQgc3Vic3RpdHV0ZSB0aGVtIHdpdGggdGhlIGFyZ3Vt
        ZW50cyB5b3UgcGFzcyBpbnRvCiAgICB0aGlzIG1ldGhvZC4gSWYgeW91IHdh
        bnQgdG8gY29udHJvbCB0aGUgc3BlY2lmaWMgb3JkZXIgb2YgcmVwbGFjZW1l
        bnQsCiAgICB5b3UgY2FuIGFkZCBhIG51bWJlciBhZnRlciB0aGUga2V5IGFz
        IHdlbGwgdG8gaW5kaWNhdGUgd2hpY2ggYXJndW1lbnQKICAgIHlvdSB3YW50
        IHRvIGluc2VydC4KCiAgICBPcmRlcmVkIGluc2VydGlvbnMgYXJlIG1vc3Qg
        dXNlZnVsIHdoZW4gYnVpbGRpbmcgbG9jIHN0cmluZ3Mgd2hlcmUgdmFsdWVz
        CiAgICB5b3UgbmVlZCB0byBpbnNlcnQgbWF5IGFwcGVhciBpbiBkaWZmZXJl
        bnQgb3JkZXJzLgoKICAgIGBgYGphdmFzY3JpcHQKICAgICJIZWxsbyAlQCAl
        QCIuZm10KCdKb2huJywgJ0RvZScpOyAgICAgLy8gIkhlbGxvIEpvaG4gRG9l
        IgogICAgIkhlbGxvICVAMiwgJUAxIi5mbXQoJ0pvaG4nLCAnRG9lJyk7ICAv
        LyAiSGVsbG8gRG9lLCBKb2huIgogICAgYGBgCgogICAgQG1ldGhvZCBmbXQK
        ICAgIEBwYXJhbSB7U3RyaW5nfSBzdHIgVGhlIHN0cmluZyB0byBmb3JtYXQK
        ICAgIEBwYXJhbSB7QXJyYXl9IGZvcm1hdHMgQW4gYXJyYXkgb2YgcGFyYW1l
        dGVycyB0byBpbnRlcnBvbGF0ZSBpbnRvIHN0cmluZy4KICAgIEByZXR1cm4g
        e1N0cmluZ30gZm9ybWF0dGVkIHN0cmluZwogICovCiAgZm10OiBmdW5jdGlv
        bihzdHIsIGZvcm1hdHMpIHsKICAgIC8vIGZpcnN0LCByZXBsYWNlIGFueSBP
        UkRFUkVEIHJlcGxhY2VtZW50cy4KICAgIHZhciBpZHggID0gMDsgLy8gdGhl
        IGN1cnJlbnQgaW5kZXggZm9yIG5vbi1udW1lcmljYWwgcmVwbGFjZW1lbnRz
        CiAgICByZXR1cm4gc3RyLnJlcGxhY2UoLyVAKFswLTldKyk/L2csIGZ1bmN0
        aW9uKHMsIGFyZ0luZGV4KSB7CiAgICAgIGFyZ0luZGV4ID0gKGFyZ0luZGV4
        KSA/IHBhcnNlSW50KGFyZ0luZGV4LCAxMCkgLSAxIDogaWR4Kys7CiAgICAg
        IHMgPSBmb3JtYXRzW2FyZ0luZGV4XTsKICAgICAgcmV0dXJuIChzID09PSBu
        dWxsKSA/ICcobnVsbCknIDogKHMgPT09IHVuZGVmaW5lZCkgPyAnJyA6IEVt
        YmVyLmluc3BlY3Qocyk7CiAgICB9KSA7CiAgfSwKCiAgLyoqCiAgICBGb3Jt
        YXRzIHRoZSBwYXNzZWQgc3RyaW5nLCBidXQgZmlyc3QgbG9va3MgdXAgdGhl
        IHN0cmluZyBpbiB0aGUgbG9jYWxpemVkCiAgICBzdHJpbmdzIGhhc2guIFRo
        aXMgaXMgYSBjb252ZW5pZW50IHdheSB0byBsb2NhbGl6ZSB0ZXh0LiBTZWUK
        ICAgIGBFbWJlci5TdHJpbmcuZm10KClgIGZvciBtb3JlIGluZm9ybWF0aW9u
        IG9uIGZvcm1hdHRpbmcuCgogICAgTm90ZSB0aGF0IGl0IGlzIHRyYWRpdGlv
        bmFsIGJ1dCBub3QgcmVxdWlyZWQgdG8gcHJlZml4IGxvY2FsaXplZCBzdHJp
        bmcKICAgIGtleXMgd2l0aCBhbiB1bmRlcnNjb3JlIG9yIG90aGVyIGNoYXJh
        Y3RlciBzbyB5b3UgY2FuIGVhc2lseSBpZGVudGlmeQogICAgbG9jYWxpemVk
        IHN0cmluZ3MuCgogICAgYGBgamF2YXNjcmlwdAogICAgRW1iZXIuU1RSSU5H
        UyA9IHsKICAgICAgJ19IZWxsbyBXb3JsZCc6ICdCb25qb3VyIGxlIG1vbmRl
        JywKICAgICAgJ19IZWxsbyAlQCAlQCc6ICdCb25qb3VyICVAICVAJwogICAg
        fTsKCiAgICBFbWJlci5TdHJpbmcubG9jKCJfSGVsbG8gV29ybGQiKTsgIC8v
        ICdCb25qb3VyIGxlIG1vbmRlJzsKICAgIEVtYmVyLlN0cmluZy5sb2MoIl9I
        ZWxsbyAlQCAlQCIsIFsiSm9obiIsICJTbWl0aCJdKTsgIC8vICJCb25qb3Vy
        IEpvaG4gU21pdGgiOwogICAgYGBgCgogICAgQG1ldGhvZCBsb2MKICAgIEBw
        YXJhbSB7U3RyaW5nfSBzdHIgVGhlIHN0cmluZyB0byBmb3JtYXQKICAgIEBw
        YXJhbSB7QXJyYXl9IGZvcm1hdHMgT3B0aW9uYWwgYXJyYXkgb2YgcGFyYW1l
        dGVycyB0byBpbnRlcnBvbGF0ZSBpbnRvIHN0cmluZy4KICAgIEByZXR1cm4g
        e1N0cmluZ30gZm9ybWF0dGVkIHN0cmluZwogICovCiAgbG9jOiBmdW5jdGlv
        bihzdHIsIGZvcm1hdHMpIHsKICAgIHN0ciA9IEVtYmVyLlNUUklOR1Nbc3Ry
        XSB8fCBzdHI7CiAgICByZXR1cm4gRW1iZXIuU3RyaW5nLmZtdChzdHIsIGZv
        cm1hdHMpIDsKICB9LAoKICAvKioKICAgIFNwbGl0cyBhIHN0cmluZyBpbnRv
        IHNlcGFyYXRlIHVuaXRzIHNlcGFyYXRlZCBieSBzcGFjZXMsIGVsaW1pbmF0
        aW5nIGFueQogICAgZW1wdHkgc3RyaW5ncyBpbiB0aGUgcHJvY2Vzcy4gVGhp
        cyBpcyBhIGNvbnZlbmllbmNlIG1ldGhvZCBmb3Igc3BsaXQgdGhhdAogICAg
        aXMgbW9zdGx5IHVzZWZ1bCB3aGVuIGFwcGxpZWQgdG8gdGhlIGBTdHJpbmcu
        cHJvdG90eXBlYC4KCiAgICBgYGBqYXZhc2NyaXB0CiAgICBFbWJlci5TdHJp
        bmcudygiYWxwaGEgYmV0YSBnYW1tYSIpLmZvckVhY2goZnVuY3Rpb24oa2V5
        KSB7CiAgICAgIGNvbnNvbGUubG9nKGtleSk7CiAgICB9KTsKCiAgICAvLyA+
        IGFscGhhCiAgICAvLyA+IGJldGEKICAgIC8vID4gZ2FtbWEKICAgIGBgYAoK
        ICAgIEBtZXRob2QgdwogICAgQHBhcmFtIHtTdHJpbmd9IHN0ciBUaGUgc3Ry
        aW5nIHRvIHNwbGl0CiAgICBAcmV0dXJuIHtTdHJpbmd9IHNwbGl0IHN0cmlu
        ZwogICovCiAgdzogZnVuY3Rpb24oc3RyKSB7IHJldHVybiBzdHIuc3BsaXQo
        L1xzKy8pOyB9LAoKICAvKioKICAgIENvbnZlcnRzIGEgY2FtZWxpemVkIHN0
        cmluZyBpbnRvIGFsbCBsb3dlciBjYXNlIHNlcGFyYXRlZCBieSB1bmRlcnNj
        b3Jlcy4KCiAgICBgYGBqYXZhc2NyaXB0CiAgICAnaW5uZXJIVE1MJy5kZWNh
        bWVsaXplKCk7ICAgICAgICAgICAvLyAnaW5uZXJfaHRtbCcKICAgICdhY3Rp
        b25fbmFtZScuZGVjYW1lbGl6ZSgpOyAgICAgICAgLy8gJ2FjdGlvbl9uYW1l
        JwogICAgJ2Nzcy1jbGFzcy1uYW1lJy5kZWNhbWVsaXplKCk7ICAgICAvLyAn
        Y3NzLWNsYXNzLW5hbWUnCiAgICAnbXkgZmF2b3JpdGUgaXRlbXMnLmRlY2Ft
        ZWxpemUoKTsgIC8vICdteSBmYXZvcml0ZSBpdGVtcycKICAgIGBgYAoKICAg
        IEBtZXRob2QgZGVjYW1lbGl6ZQogICAgQHBhcmFtIHtTdHJpbmd9IHN0ciBU
        aGUgc3RyaW5nIHRvIGRlY2FtZWxpemUuCiAgICBAcmV0dXJuIHtTdHJpbmd9
        IHRoZSBkZWNhbWVsaXplZCBzdHJpbmcuCiAgKi8KICBkZWNhbWVsaXplOiBm
        dW5jdGlvbihzdHIpIHsKICAgIHJldHVybiBzdHIucmVwbGFjZShTVFJJTkdf
        REVDQU1FTElaRV9SRUdFWFAsICckMV8kMicpLnRvTG93ZXJDYXNlKCk7CiAg
        fSwKCiAgLyoqCiAgICBSZXBsYWNlcyB1bmRlcnNjb3Jlcywgc3BhY2VzLCBv
        ciBjYW1lbENhc2Ugd2l0aCBkYXNoZXMuCgogICAgYGBgamF2YXNjcmlwdAog
        ICAgJ2lubmVySFRNTCcuZGFzaGVyaXplKCk7ICAgICAgICAgIC8vICdpbm5l
        ci1odG1sJwogICAgJ2FjdGlvbl9uYW1lJy5kYXNoZXJpemUoKTsgICAgICAg
        IC8vICdhY3Rpb24tbmFtZScKICAgICdjc3MtY2xhc3MtbmFtZScuZGFzaGVy
        aXplKCk7ICAgICAvLyAnY3NzLWNsYXNzLW5hbWUnCiAgICAnbXkgZmF2b3Jp
        dGUgaXRlbXMnLmRhc2hlcml6ZSgpOyAgLy8gJ215LWZhdm9yaXRlLWl0ZW1z
        JwogICAgYGBgCgogICAgQG1ldGhvZCBkYXNoZXJpemUKICAgIEBwYXJhbSB7
        U3RyaW5nfSBzdHIgVGhlIHN0cmluZyB0byBkYXNoZXJpemUuCiAgICBAcmV0
        dXJuIHtTdHJpbmd9IHRoZSBkYXNoZXJpemVkIHN0cmluZy4KICAqLwogIGRh
        c2hlcml6ZTogZnVuY3Rpb24oc3RyKSB7CiAgICB2YXIgY2FjaGUgPSBTVFJJ
        TkdfREFTSEVSSVpFX0NBQ0hFLAogICAgICAgIGhpdCAgID0gY2FjaGUuaGFz
        T3duUHJvcGVydHkoc3RyKSwKICAgICAgICByZXQ7CgogICAgaWYgKGhpdCkg
        ewogICAgICByZXR1cm4gY2FjaGVbc3RyXTsKICAgIH0gZWxzZSB7CiAgICAg
        IHJldCA9IEVtYmVyLlN0cmluZy5kZWNhbWVsaXplKHN0cikucmVwbGFjZShT
        VFJJTkdfREFTSEVSSVpFX1JFR0VYUCwnLScpOwogICAgICBjYWNoZVtzdHJd
        ID0gcmV0OwogICAgfQoKICAgIHJldHVybiByZXQ7CiAgfSwKCiAgLyoqCiAg
        ICBSZXR1cm5zIHRoZSBsb3dlckNhbWVsQ2FzZSBmb3JtIG9mIGEgc3RyaW5n
        LgoKICAgIGBgYGphdmFzY3JpcHQKICAgICdpbm5lckhUTUwnLmNhbWVsaXpl
        KCk7ICAgICAgICAgIC8vICdpbm5lckhUTUwnCiAgICAnYWN0aW9uX25hbWUn
        LmNhbWVsaXplKCk7ICAgICAgICAvLyAnYWN0aW9uTmFtZScKICAgICdjc3Mt
        Y2xhc3MtbmFtZScuY2FtZWxpemUoKTsgICAgIC8vICdjc3NDbGFzc05hbWUn
        CiAgICAnbXkgZmF2b3JpdGUgaXRlbXMnLmNhbWVsaXplKCk7ICAvLyAnbXlG
        YXZvcml0ZUl0ZW1zJwogICAgJ015IEZhdm9yaXRlIEl0ZW1zJy5jYW1lbGl6
        ZSgpOyAgLy8gJ215RmF2b3JpdGVJdGVtcycKICAgIGBgYAoKICAgIEBtZXRo
        b2QgY2FtZWxpemUKICAgIEBwYXJhbSB7U3RyaW5nfSBzdHIgVGhlIHN0cmlu
        ZyB0byBjYW1lbGl6ZS4KICAgIEByZXR1cm4ge1N0cmluZ30gdGhlIGNhbWVs
        aXplZCBzdHJpbmcuCiAgKi8KICBjYW1lbGl6ZTogZnVuY3Rpb24oc3RyKSB7
        CiAgICByZXR1cm4gc3RyLnJlcGxhY2UoU1RSSU5HX0NBTUVMSVpFX1JFR0VY
        UCwgZnVuY3Rpb24obWF0Y2gsIHNlcGFyYXRvciwgY2hyKSB7CiAgICAgIHJl
        dHVybiBjaHIgPyBjaHIudG9VcHBlckNhc2UoKSA6ICcnOwogICAgfSkucmVw
        bGFjZSgvXihbQS1aXSkvLCBmdW5jdGlvbihtYXRjaCwgc2VwYXJhdG9yLCBj
        aHIpIHsKICAgICAgcmV0dXJuIG1hdGNoLnRvTG93ZXJDYXNlKCk7CiAgICB9
        KTsKICB9LAoKICAvKioKICAgIFJldHVybnMgdGhlIFVwcGVyQ2FtZWxDYXNl
        IGZvcm0gb2YgYSBzdHJpbmcuCgogICAgYGBgamF2YXNjcmlwdAogICAgJ2lu
        bmVySFRNTCcuY2xhc3NpZnkoKTsgICAgICAgICAgLy8gJ0lubmVySFRNTCcK
        ICAgICdhY3Rpb25fbmFtZScuY2xhc3NpZnkoKTsgICAgICAgIC8vICdBY3Rp
        b25OYW1lJwogICAgJ2Nzcy1jbGFzcy1uYW1lJy5jbGFzc2lmeSgpOyAgICAg
        Ly8gJ0Nzc0NsYXNzTmFtZScKICAgICdteSBmYXZvcml0ZSBpdGVtcycuY2xh
        c3NpZnkoKTsgIC8vICdNeUZhdm9yaXRlSXRlbXMnCiAgICBgYGAKCiAgICBA
        bWV0aG9kIGNsYXNzaWZ5CiAgICBAcGFyYW0ge1N0cmluZ30gc3RyIHRoZSBz
        dHJpbmcgdG8gY2xhc3NpZnkKICAgIEByZXR1cm4ge1N0cmluZ30gdGhlIGNs
        YXNzaWZpZWQgc3RyaW5nCiAgKi8KICBjbGFzc2lmeTogZnVuY3Rpb24oc3Ry
        KSB7CiAgICB2YXIgcGFydHMgPSBzdHIuc3BsaXQoIi4iKSwKICAgICAgICBv
        dXQgPSBbXTsKCiAgICBmb3IgKHZhciBpPTAsIGw9cGFydHMubGVuZ3RoOyBp
        PGw7IGkrKykgewogICAgICB2YXIgY2FtZWxpemVkID0gRW1iZXIuU3RyaW5n
        LmNhbWVsaXplKHBhcnRzW2ldKTsKICAgICAgb3V0LnB1c2goY2FtZWxpemVk
        LmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgY2FtZWxpemVkLnN1YnN0cigx
        KSk7CiAgICB9CgogICAgcmV0dXJuIG91dC5qb2luKCIuIik7CiAgfSwKCiAg
        LyoqCiAgICBNb3JlIGdlbmVyYWwgdGhhbiBkZWNhbWVsaXplLiBSZXR1cm5z
        IHRoZSBsb3dlclxfY2FzZVxfYW5kXF91bmRlcnNjb3JlZAogICAgZm9ybSBv
        ZiBhIHN0cmluZy4KCiAgICBgYGBqYXZhc2NyaXB0CiAgICAnaW5uZXJIVE1M
        Jy51bmRlcnNjb3JlKCk7ICAgICAgICAgIC8vICdpbm5lcl9odG1sJwogICAg
        J2FjdGlvbl9uYW1lJy51bmRlcnNjb3JlKCk7ICAgICAgICAvLyAnYWN0aW9u
        X25hbWUnCiAgICAnY3NzLWNsYXNzLW5hbWUnLnVuZGVyc2NvcmUoKTsgICAg
        IC8vICdjc3NfY2xhc3NfbmFtZScKICAgICdteSBmYXZvcml0ZSBpdGVtcycu
        dW5kZXJzY29yZSgpOyAgLy8gJ215X2Zhdm9yaXRlX2l0ZW1zJwogICAgYGBg
        CgogICAgQG1ldGhvZCB1bmRlcnNjb3JlCiAgICBAcGFyYW0ge1N0cmluZ30g
        c3RyIFRoZSBzdHJpbmcgdG8gdW5kZXJzY29yZS4KICAgIEByZXR1cm4ge1N0
        cmluZ30gdGhlIHVuZGVyc2NvcmVkIHN0cmluZy4KICAqLwogIHVuZGVyc2Nv
        cmU6IGZ1bmN0aW9uKHN0cikgewogICAgcmV0dXJuIHN0ci5yZXBsYWNlKFNU
        UklOR19VTkRFUlNDT1JFX1JFR0VYUF8xLCAnJDFfJDInKS4KICAgICAgcmVw
        bGFjZShTVFJJTkdfVU5ERVJTQ09SRV9SRUdFWFBfMiwgJ18nKS50b0xvd2Vy
        Q2FzZSgpOwogIH0sCgogIC8qKgogICAgUmV0dXJucyB0aGUgQ2FwaXRhbGl6
        ZWQgZm9ybSBvZiBhIHN0cmluZwoKICAgIGBgYGphdmFzY3JpcHQKICAgICdp
        bm5lckhUTUwnLmNhcGl0YWxpemUoKSAgICAgICAgIC8vICdJbm5lckhUTUwn
        CiAgICAnYWN0aW9uX25hbWUnLmNhcGl0YWxpemUoKSAgICAgICAvLyAnQWN0
        aW9uX25hbWUnCiAgICAnY3NzLWNsYXNzLW5hbWUnLmNhcGl0YWxpemUoKSAg
        ICAvLyAnQ3NzLWNsYXNzLW5hbWUnCiAgICAnbXkgZmF2b3JpdGUgaXRlbXMn
        LmNhcGl0YWxpemUoKSAvLyAnTXkgZmF2b3JpdGUgaXRlbXMnCiAgICBgYGAK
        CiAgICBAbWV0aG9kIGNhcGl0YWxpemUKICAgIEBwYXJhbSB7U3RyaW5nfSBz
        dHIgVGhlIHN0cmluZyB0byBjYXBpdGFsaXplLgogICAgQHJldHVybiB7U3Ry
        aW5nfSBUaGUgY2FwaXRhbGl6ZWQgc3RyaW5nLgogICovCiAgY2FwaXRhbGl6
        ZTogZnVuY3Rpb24oc3RyKSB7CiAgICByZXR1cm4gc3RyLmNoYXJBdCgwKS50
        b1VwcGVyQ2FzZSgpICsgc3RyLnN1YnN0cigxKTsKICB9Cn07CgoKCn0pKCk7
        CgoKCihmdW5jdGlvbigpIHsKLyoqCkBtb2R1bGUgZW1iZXIKQHN1Ym1vZHVs
        ZSBlbWJlci1ydW50aW1lCiovCgoKCnZhciBmbXQgPSBFbWJlci5TdHJpbmcu
        Zm10LAogICAgdyAgID0gRW1iZXIuU3RyaW5nLncsCiAgICBsb2MgPSBFbWJl
        ci5TdHJpbmcubG9jLAogICAgY2FtZWxpemUgPSBFbWJlci5TdHJpbmcuY2Ft
        ZWxpemUsCiAgICBkZWNhbWVsaXplID0gRW1iZXIuU3RyaW5nLmRlY2FtZWxp
        emUsCiAgICBkYXNoZXJpemUgPSBFbWJlci5TdHJpbmcuZGFzaGVyaXplLAog
        ICAgdW5kZXJzY29yZSA9IEVtYmVyLlN0cmluZy51bmRlcnNjb3JlLAogICAg
        Y2FwaXRhbGl6ZSA9IEVtYmVyLlN0cmluZy5jYXBpdGFsaXplLAogICAgY2xh
        c3NpZnkgPSBFbWJlci5TdHJpbmcuY2xhc3NpZnk7CgoKaWYgKEVtYmVyLkVY
        VEVORF9QUk9UT1RZUEVTID09PSB0cnVlIHx8IEVtYmVyLkVYVEVORF9QUk9U
        T1RZUEVTLlN0cmluZykgewoKICAvKioKICAgIFNlZSBbRW1iZXIuU3RyaW5n
        LmZtdF0oL2FwaS9jbGFzc2VzL0VtYmVyLlN0cmluZy5odG1sI21ldGhvZF9m
        bXQpLgoKICAgIEBtZXRob2QgZm10CiAgICBAZm9yIFN0cmluZwogICovCiAg
        U3RyaW5nLnByb3RvdHlwZS5mbXQgPSBmdW5jdGlvbigpIHsKICAgIHJldHVy
        biBmbXQodGhpcywgYXJndW1lbnRzKTsKICB9OwoKICAvKioKICAgIFNlZSBb
        RW1iZXIuU3RyaW5nLnddKC9hcGkvY2xhc3Nlcy9FbWJlci5TdHJpbmcuaHRt
        bCNtZXRob2RfdykuCgogICAgQG1ldGhvZCB3CiAgICBAZm9yIFN0cmluZwog
        ICovCiAgU3RyaW5nLnByb3RvdHlwZS53ID0gZnVuY3Rpb24oKSB7CiAgICBy
        ZXR1cm4gdyh0aGlzKTsKICB9OwoKICAvKioKICAgIFNlZSBbRW1iZXIuU3Ry
        aW5nLmxvY10oL2FwaS9jbGFzc2VzL0VtYmVyLlN0cmluZy5odG1sI21ldGhv
        ZF9sb2MpLgoKICAgIEBtZXRob2QgbG9jCiAgICBAZm9yIFN0cmluZwogICov
        CiAgU3RyaW5nLnByb3RvdHlwZS5sb2MgPSBmdW5jdGlvbigpIHsKICAgIHJl
        dHVybiBsb2ModGhpcywgYXJndW1lbnRzKTsKICB9OwoKICAvKioKICAgIFNl
        ZSBbRW1iZXIuU3RyaW5nLmNhbWVsaXplXSgvYXBpL2NsYXNzZXMvRW1iZXIu
        U3RyaW5nLmh0bWwjbWV0aG9kX2NhbWVsaXplKS4KCiAgICBAbWV0aG9kIGNh
        bWVsaXplCiAgICBAZm9yIFN0cmluZwogICovCiAgU3RyaW5nLnByb3RvdHlw
        ZS5jYW1lbGl6ZSA9IGZ1bmN0aW9uKCkgewogICAgcmV0dXJuIGNhbWVsaXpl
        KHRoaXMpOwogIH07CgogIC8qKgogICAgU2VlIFtFbWJlci5TdHJpbmcuZGVj
        YW1lbGl6ZV0oL2FwaS9jbGFzc2VzL0VtYmVyLlN0cmluZy5odG1sI21ldGhv
        ZF9kZWNhbWVsaXplKS4KCiAgICBAbWV0aG9kIGRlY2FtZWxpemUKICAgIEBm
        b3IgU3RyaW5nCiAgKi8KICBTdHJpbmcucHJvdG90eXBlLmRlY2FtZWxpemUg
        PSBmdW5jdGlvbigpIHsKICAgIHJldHVybiBkZWNhbWVsaXplKHRoaXMpOwog
        IH07CgogIC8qKgogICAgU2VlIFtFbWJlci5TdHJpbmcuZGFzaGVyaXplXSgv
        YXBpL2NsYXNzZXMvRW1iZXIuU3RyaW5nLmh0bWwjbWV0aG9kX2Rhc2hlcml6
        ZSkuCgogICAgQG1ldGhvZCBkYXNoZXJpemUKICAgIEBmb3IgU3RyaW5nCiAg
        Ki8KICBTdHJpbmcucHJvdG90eXBlLmRhc2hlcml6ZSA9IGZ1bmN0aW9uKCkg
        ewogICAgcmV0dXJuIGRhc2hlcml6ZSh0aGlzKTsKICB9OwoKICAvKioKICAg
        IFNlZSBbRW1iZXIuU3RyaW5nLnVuZGVyc2NvcmVdKC9hcGkvY2xhc3Nlcy9F
        bWJlci5TdHJpbmcuaHRtbCNtZXRob2RfdW5kZXJzY29yZSkuCgogICAgQG1l
        dGhvZCB1bmRlcnNjb3JlCiAgICBAZm9yIFN0cmluZwogICovCiAgU3RyaW5n
        LnByb3RvdHlwZS51bmRlcnNjb3JlID0gZnVuY3Rpb24oKSB7CiAgICByZXR1
        cm4gdW5kZXJzY29yZSh0aGlzKTsKICB9OwoKICAvKioKICAgIFNlZSBbRW1i
        ZXIuU3RyaW5nLmNsYXNzaWZ5XSgvYXBpL2NsYXNzZXMvRW1iZXIuU3RyaW5n
        Lmh0bWwjbWV0aG9kX2NsYXNzaWZ5KS4KCiAgICBAbWV0aG9kIGNsYXNzaWZ5
        CiAgICBAZm9yIFN0cmluZwogICovCiAgU3RyaW5nLnByb3RvdHlwZS5jbGFz
        c2lmeSA9IGZ1bmN0aW9uKCkgewogICAgcmV0dXJuIGNsYXNzaWZ5KHRoaXMp
        OwogIH07CgogIC8qKgogICAgU2VlIFtFbWJlci5TdHJpbmcuY2FwaXRhbGl6
        ZV0oL2FwaS9jbGFzc2VzL0VtYmVyLlN0cmluZy5odG1sI21ldGhvZF9jYXBp
        dGFsaXplKS4KCiAgICBAbWV0aG9kIGNhcGl0YWxpemUKICAgIEBmb3IgU3Ry
        aW5nCiAgKi8KICBTdHJpbmcucHJvdG90eXBlLmNhcGl0YWxpemUgPSBmdW5j
        dGlvbigpIHsKICAgIHJldHVybiBjYXBpdGFsaXplKHRoaXMpOwogIH07Cgog
        IAp9CgoKfSkoKTsKCgoKKGZ1bmN0aW9uKCkgewovKioKQG1vZHVsZSBlbWJl
        cgpAc3VibW9kdWxlIGVtYmVyLXJ1bnRpbWUKKi8KCnZhciBnZXQgPSBFbWJl
        ci5nZXQsCiAgICBzZXQgPSBFbWJlci5zZXQsCiAgICBzbGljZSA9IEFycmF5
        LnByb3RvdHlwZS5zbGljZSwKICAgIGdldFByb3BlcnRpZXMgPSBFbWJlci5n
        ZXRQcm9wZXJ0aWVzOwoKLyoqCiAgIyMgT3ZlcnZpZXcKCiAgVGhpcyBtaXhp
        biBwcm92aWRlcyBwcm9wZXJ0aWVzIGFuZCBwcm9wZXJ0eSBvYnNlcnZpbmcg
        ZnVuY3Rpb25hbGl0eSwgY29yZQogIGZlYXR1cmVzIG9mIHRoZSBFbWJlciBv
        YmplY3QgbW9kZWwuCgogIFByb3BlcnRpZXMgYW5kIG9ic2VydmVycyBhbGxv
        dyBvbmUgb2JqZWN0IHRvIG9ic2VydmUgY2hhbmdlcyB0byBhCiAgcHJvcGVy
        dHkgb24gYW5vdGhlciBvYmplY3QuIFRoaXMgaXMgb25lIG9mIHRoZSBmdW5k
        YW1lbnRhbCB3YXlzIHRoYXQKICBtb2RlbHMsIGNvbnRyb2xsZXJzIGFuZCB2
        aWV3cyBjb21tdW5pY2F0ZSB3aXRoIGVhY2ggb3RoZXIgaW4gYW4gRW1iZXIK
        ICBhcHBsaWNhdGlvbi4KCiAgQW55IG9iamVjdCB0aGF0IGhhcyB0aGlzIG1p
        eGluIGFwcGxpZWQgY2FuIGJlIHVzZWQgaW4gb2JzZXJ2ZXIKICBvcGVyYXRp
        b25zLiBUaGF0IGluY2x1ZGVzIGBFbWJlci5PYmplY3RgIGFuZCBtb3N0IG9i
        amVjdHMgeW91IHdpbGwKICBpbnRlcmFjdCB3aXRoIGFzIHlvdSB3cml0ZSB5
        b3VyIEVtYmVyIGFwcGxpY2F0aW9uLgoKICBOb3RlIHRoYXQgeW91IHdpbGwg
        bm90IGdlbmVyYWxseSBhcHBseSB0aGlzIG1peGluIHRvIGNsYXNzZXMgeW91
        cnNlbGYsCiAgYnV0IHlvdSB3aWxsIHVzZSB0aGUgZmVhdHVyZXMgcHJvdmlk
        ZWQgYnkgdGhpcyBtb2R1bGUgZnJlcXVlbnRseSwgc28gaXQKICBpcyBpbXBv
        cnRhbnQgdG8gdW5kZXJzdGFuZCBob3cgdG8gdXNlIGl0LgoKICAjIyBVc2lu
        ZyBgZ2V0KClgIGFuZCBgc2V0KClgCgogIEJlY2F1c2Ugb2YgRW1iZXIncyBz
        dXBwb3J0IGZvciBiaW5kaW5ncyBhbmQgb2JzZXJ2ZXJzLCB5b3Ugd2lsbCBh
        bHdheXMKICBhY2Nlc3MgcHJvcGVydGllcyB1c2luZyB0aGUgZ2V0IG1ldGhv
        ZCwgYW5kIHNldCBwcm9wZXJ0aWVzIHVzaW5nIHRoZQogIHNldCBtZXRob2Qu
        IFRoaXMgYWxsb3dzIHRoZSBvYnNlcnZpbmcgb2JqZWN0cyB0byBiZSBub3Rp
        ZmllZCBhbmQKICBjb21wdXRlZCBwcm9wZXJ0aWVzIHRvIGJlIGhhbmRsZWQg
        cHJvcGVybHkuCgogIE1vcmUgZG9jdW1lbnRhdGlvbiBhYm91dCBgZ2V0YCBh
        bmQgYHNldGAgYXJlIGJlbG93LgoKICAjIyBPYnNlcnZpbmcgUHJvcGVydHkg
        Q2hhbmdlcwoKICBZb3UgdHlwaWNhbGx5IG9ic2VydmUgcHJvcGVydHkgY2hh
        bmdlcyBzaW1wbHkgYnkgYWRkaW5nIHRoZSBgb2JzZXJ2ZXNgCiAgY2FsbCB0
        byB0aGUgZW5kIG9mIHlvdXIgbWV0aG9kIGRlY2xhcmF0aW9ucyBpbiBjbGFz
        c2VzIHRoYXQgeW91IHdyaXRlLgogIEZvciBleGFtcGxlOgoKICBgYGBqYXZh
        c2NyaXB0CiAgRW1iZXIuT2JqZWN0LmV4dGVuZCh7CiAgICB2YWx1ZU9ic2Vy
        dmVyOiBmdW5jdGlvbigpIHsKICAgICAgLy8gRXhlY3V0ZXMgd2hlbmV2ZXIg
        dGhlICJ2YWx1ZSIgcHJvcGVydHkgY2hhbmdlcwogICAgfS5vYnNlcnZlcygn
        dmFsdWUnKQogIH0pOwogIGBgYAoKICBBbHRob3VnaCB0aGlzIGlzIHRoZSBt
        b3N0IGNvbW1vbiB3YXkgdG8gYWRkIGFuIG9ic2VydmVyLCB0aGlzIGNhcGFi
        aWxpdHkKICBpcyBhY3R1YWxseSBidWlsdCBpbnRvIHRoZSBgRW1iZXIuT2Jq
        ZWN0YCBjbGFzcyBvbiB0b3Agb2YgdHdvIG1ldGhvZHMKICBkZWZpbmVkIGlu
        IHRoaXMgbWl4aW46IGBhZGRPYnNlcnZlcmAgYW5kIGByZW1vdmVPYnNlcnZl
        cmAuIFlvdSBjYW4gdXNlCiAgdGhlc2UgdHdvIG1ldGhvZHMgdG8gYWRkIGFu
        ZCByZW1vdmUgb2JzZXJ2ZXJzIHlvdXJzZWxmIGlmIHlvdSBuZWVkIHRvCiAg
        ZG8gc28gYXQgcnVudGltZS4KCiAgVG8gYWRkIGFuIG9ic2VydmVyIGZvciBh
        IHByb3BlcnR5LCBjYWxsOgoKICBgYGBqYXZhc2NyaXB0CiAgb2JqZWN0LmFk
        ZE9ic2VydmVyKCdwcm9wZXJ0eUtleScsIHRhcmdldE9iamVjdCwgdGFyZ2V0
        QWN0aW9uKQogIGBgYAoKICBUaGlzIHdpbGwgY2FsbCB0aGUgYHRhcmdldEFj
        dGlvbmAgbWV0aG9kIG9uIHRoZSBgdGFyZ2V0T2JqZWN0YCB3aGVuZXZlcgog
        IHRoZSB2YWx1ZSBvZiB0aGUgYHByb3BlcnR5S2V5YCBjaGFuZ2VzLgoKICBO
        b3RlIHRoYXQgaWYgYHByb3BlcnR5S2V5YCBpcyBhIGNvbXB1dGVkIHByb3Bl
        cnR5LCB0aGUgb2JzZXJ2ZXIgd2lsbCBiZQogIGNhbGxlZCB3aGVuIGFueSBv
        ZiB0aGUgcHJvcGVydHkgZGVwZW5kZW5jaWVzIGFyZSBjaGFuZ2VkLCBldmVu
        IGlmIHRoZQogIHJlc3VsdGluZyB2YWx1ZSBvZiB0aGUgY29tcHV0ZWQgcHJv
        cGVydHkgaXMgdW5jaGFuZ2VkLiBUaGlzIGlzIG5lY2Vzc2FyeQogIGJlY2F1
        c2UgY29tcHV0ZWQgcHJvcGVydGllcyBhcmUgbm90IGNvbXB1dGVkIHVudGls
        IGBnZXRgIGlzIGNhbGxlZC4KCiAgQGNsYXNzIE9ic2VydmFibGUKICBAbmFt
        ZXNwYWNlIEVtYmVyCiovCkVtYmVyLk9ic2VydmFibGUgPSBFbWJlci5NaXhp
        bi5jcmVhdGUoewoKICAvKioKICAgIFJldHJpZXZlcyB0aGUgdmFsdWUgb2Yg
        YSBwcm9wZXJ0eSBmcm9tIHRoZSBvYmplY3QuCgogICAgVGhpcyBtZXRob2Qg
        aXMgdXN1YWxseSBzaW1pbGFyIHRvIHVzaW5nIGBvYmplY3Rba2V5TmFtZV1g
        IG9yIGBvYmplY3Qua2V5TmFtZWAsCiAgICBob3dldmVyIGl0IHN1cHBvcnRz
        IGJvdGggY29tcHV0ZWQgcHJvcGVydGllcyBhbmQgdGhlIHVua25vd25Qcm9w
        ZXJ0eQogICAgaGFuZGxlci4KCiAgICBCZWNhdXNlIGBnZXRgIHVuaWZpZXMg
        dGhlIHN5bnRheCBmb3IgYWNjZXNzaW5nIGFsbCB0aGVzZSBraW5kcwogICAg
        b2YgcHJvcGVydGllcywgaXQgY2FuIG1ha2UgbWFueSByZWZhY3RvcmluZ3Mg
        ZWFzaWVyLCBzdWNoIGFzIHJlcGxhY2luZyBhCiAgICBzaW1wbGUgcHJvcGVy
        dHkgd2l0aCBhIGNvbXB1dGVkIHByb3BlcnR5LCBvciB2aWNlIHZlcnNhLgoK
        ICAgICMjIyBDb21wdXRlZCBQcm9wZXJ0aWVzCgogICAgQ29tcHV0ZWQgcHJv
        cGVydGllcyBhcmUgbWV0aG9kcyBkZWZpbmVkIHdpdGggdGhlIGBwcm9wZXJ0
        eWAgbW9kaWZpZXIKICAgIGRlY2xhcmVkIGF0IHRoZSBlbmQsIHN1Y2ggYXM6
        CgogICAgYGBgamF2YXNjcmlwdAogICAgZnVsbE5hbWU6IGZ1bmN0aW9uKCkg
        ewogICAgICByZXR1cm4gdGhpcy5nZXQoJ2ZpcnN0TmFtZScpICsgJyAnICsg
        dGhpcy5nZXQoJ2xhc3ROYW1lJyk7CiAgICB9LnByb3BlcnR5KCdmaXJzdE5h
        bWUnLCAnbGFzdE5hbWUnKQogICAgYGBgCgogICAgV2hlbiB5b3UgY2FsbCBg
        Z2V0YCBvbiBhIGNvbXB1dGVkIHByb3BlcnR5LCB0aGUgZnVuY3Rpb24gd2ls
        bCBiZQogICAgY2FsbGVkIGFuZCB0aGUgcmV0dXJuIHZhbHVlIHdpbGwgYmUg
        cmV0dXJuZWQgaW5zdGVhZCBvZiB0aGUgZnVuY3Rpb24KICAgIGl0c2VsZi4K
        CiAgICAjIyMgVW5rbm93biBQcm9wZXJ0aWVzCgogICAgTGlrZXdpc2UsIGlm
        IHlvdSB0cnkgdG8gY2FsbCBgZ2V0YCBvbiBhIHByb3BlcnR5IHdob3NlIHZh
        bHVlIGlzCiAgICBgdW5kZWZpbmVkYCwgdGhlIGB1bmtub3duUHJvcGVydHko
        KWAgbWV0aG9kIHdpbGwgYmUgY2FsbGVkIG9uIHRoZSBvYmplY3QuCiAgICBJ
        ZiB0aGlzIG1ldGhvZCByZXR1cm5zIGFueSB2YWx1ZSBvdGhlciB0aGFuIGB1
        bmRlZmluZWRgLCBpdCB3aWxsIGJlIHJldHVybmVkCiAgICBpbnN0ZWFkLiBU
        aGlzIGFsbG93cyB5b3UgdG8gaW1wbGVtZW50ICJ2aXJ0dWFsIiBwcm9wZXJ0
        aWVzIHRoYXQgYXJlCiAgICBub3QgZGVmaW5lZCB1cGZyb250LgoKICAgIEBt
        ZXRob2QgZ2V0CiAgICBAcGFyYW0ge1N0cmluZ30ga2V5TmFtZSBUaGUgcHJv
        cGVydHkgdG8gcmV0cmlldmUKICAgIEByZXR1cm4ge09iamVjdH0gVGhlIHBy
        b3BlcnR5IHZhbHVlIG9yIHVuZGVmaW5lZC4KICAqLwogIGdldDogZnVuY3Rp
        b24oa2V5TmFtZSkgewogICAgcmV0dXJuIGdldCh0aGlzLCBrZXlOYW1lKTsK
        ICB9LAoKICAvKioKICAgIFRvIGdldCBtdWx0aXBsZSBwcm9wZXJ0aWVzIGF0
        IG9uY2UsIGNhbGwgYGdldFByb3BlcnRpZXNgCiAgICB3aXRoIGEgbGlzdCBv
        ZiBzdHJpbmdzIG9yIGFuIGFycmF5OgoKICAgIGBgYGphdmFzY3JpcHQKICAg
        IHJlY29yZC5nZXRQcm9wZXJ0aWVzKCdmaXJzdE5hbWUnLCAnbGFzdE5hbWUn
        LCAnemlwQ29kZScpOyAgLy8geyBmaXJzdE5hbWU6ICdKb2huJywgbGFzdE5h
        bWU6ICdEb2UnLCB6aXBDb2RlOiAnMTAwMTEnIH0KICAgIGBgYAoKICAgIGlz
        IGVxdWl2YWxlbnQgdG86CgogICAgYGBgamF2YXNjcmlwdAogICAgcmVjb3Jk
        LmdldFByb3BlcnRpZXMoWydmaXJzdE5hbWUnLCAnbGFzdE5hbWUnLCAnemlw
        Q29kZSddKTsgIC8vIHsgZmlyc3ROYW1lOiAnSm9obicsIGxhc3ROYW1lOiAn
        RG9lJywgemlwQ29kZTogJzEwMDExJyB9CiAgICBgYGAKCiAgICBAbWV0aG9k
        IGdldFByb3BlcnRpZXMKICAgIEBwYXJhbSB7U3RyaW5nLi4ufEFycmF5fSBs
        aXN0IG9mIGtleXMgdG8gZ2V0CiAgICBAcmV0dXJuIHtIYXNofQogICovCiAg
        Z2V0UHJvcGVydGllczogZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gZ2V0UHJv
        cGVydGllcy5hcHBseShudWxsLCBbdGhpc10uY29uY2F0KHNsaWNlLmNhbGwo
        YXJndW1lbnRzKSkpOwogIH0sCgogIC8qKgogICAgU2V0cyB0aGUgcHJvdmlk
        ZWQga2V5IG9yIHBhdGggdG8gdGhlIHZhbHVlLgoKICAgIFRoaXMgbWV0aG9k
        IGlzIGdlbmVyYWxseSB2ZXJ5IHNpbWlsYXIgdG8gY2FsbGluZyBgb2JqZWN0
        W2tleV0gPSB2YWx1ZWAgb3IKICAgIGBvYmplY3Qua2V5ID0gdmFsdWVgLCBl
        eGNlcHQgdGhhdCBpdCBwcm92aWRlcyBzdXBwb3J0IGZvciBjb21wdXRlZAog
        ICAgcHJvcGVydGllcywgdGhlIGBzZXRVbmtub3duUHJvcGVydHkoKWAgbWV0
        aG9kIGFuZCBwcm9wZXJ0eSBvYnNlcnZlcnMuCgogICAgIyMjIENvbXB1dGVk
        IFByb3BlcnRpZXMKCiAgICBJZiB5b3UgdHJ5IHRvIHNldCBhIHZhbHVlIG9u
        IGEga2V5IHRoYXQgaGFzIGEgY29tcHV0ZWQgcHJvcGVydHkgaGFuZGxlcgog
        ICAgZGVmaW5lZCAoc2VlIHRoZSBgZ2V0KClgIG1ldGhvZCBmb3IgYW4gZXhh
        bXBsZSksIHRoZW4gYHNldCgpYCB3aWxsIGNhbGwKICAgIHRoYXQgbWV0aG9k
        LCBwYXNzaW5nIGJvdGggdGhlIHZhbHVlIGFuZCBrZXkgaW5zdGVhZCBvZiBz
        aW1wbHkgY2hhbmdpbmcKICAgIHRoZSB2YWx1ZSBpdHNlbGYuIFRoaXMgaXMg
        dXNlZnVsIGZvciB0aG9zZSB0aW1lcyB3aGVuIHlvdSBuZWVkIHRvCiAgICBp
        bXBsZW1lbnQgYSBwcm9wZXJ0eSB0aGF0IGlzIGNvbXBvc2VkIG9mIG9uZSBv
        ciBtb3JlIG1lbWJlcgogICAgcHJvcGVydGllcy4KCiAgICAjIyMgVW5rbm93
        biBQcm9wZXJ0aWVzCgogICAgSWYgeW91IHRyeSB0byBzZXQgYSB2YWx1ZSBv
        biBhIGtleSB0aGF0IGlzIHVuZGVmaW5lZCBpbiB0aGUgdGFyZ2V0CiAgICBv
        YmplY3QsIHRoZW4gdGhlIGBzZXRVbmtub3duUHJvcGVydHkoKWAgaGFuZGxl
        ciB3aWxsIGJlIGNhbGxlZCBpbnN0ZWFkLiBUaGlzCiAgICBnaXZlcyB5b3Ug
        YW4gb3Bwb3J0dW5pdHkgdG8gaW1wbGVtZW50IGNvbXBsZXggInZpcnR1YWwi
        IHByb3BlcnRpZXMgdGhhdAogICAgYXJlIG5vdCBwcmVkZWZpbmVkIG9uIHRo
        ZSBvYmplY3QuIElmIGBzZXRVbmtub3duUHJvcGVydHkoKWAgcmV0dXJucwog
        ICAgdW5kZWZpbmVkLCB0aGVuIGBzZXQoKWAgd2lsbCBzaW1wbHkgc2V0IHRo
        ZSB2YWx1ZSBvbiB0aGUgb2JqZWN0LgoKICAgICMjIyBQcm9wZXJ0eSBPYnNl
        cnZlcnMKCiAgICBJbiBhZGRpdGlvbiB0byBjaGFuZ2luZyB0aGUgcHJvcGVy
        dHksIGBzZXQoKWAgd2lsbCBhbHNvIHJlZ2lzdGVyIGEgcHJvcGVydHkKICAg
        IGNoYW5nZSB3aXRoIHRoZSBvYmplY3QuIFVubGVzcyB5b3UgaGF2ZSBwbGFj
        ZWQgdGhpcyBjYWxsIGluc2lkZSBvZiBhCiAgICBgYmVnaW5Qcm9wZXJ0eUNo
        YW5nZXMoKWAgYW5kIGBlbmRQcm9wZXJ0eUNoYW5nZXMoKSxgIGFueSAibG9j
        YWwiIG9ic2VydmVycwogICAgKGkuZS4gb2JzZXJ2ZXIgbWV0aG9kcyBkZWNs
        YXJlZCBvbiB0aGUgc2FtZSBvYmplY3QpLCB3aWxsIGJlIGNhbGxlZAogICAg
        aW1tZWRpYXRlbHkuIEFueSAicmVtb3RlIiBvYnNlcnZlcnMgKGkuZS4gb2Jz
        ZXJ2ZXIgbWV0aG9kcyBkZWNsYXJlZCBvbgogICAgYW5vdGhlciBvYmplY3Qp
        IHdpbGwgYmUgcGxhY2VkIGluIGEgcXVldWUgYW5kIGNhbGxlZCBhdCBhIGxh
        dGVyIHRpbWUgaW4gYQogICAgY29hbGVzY2VkIG1hbm5lci4KCiAgICAjIyMg
        Q2hhaW5pbmcKCiAgICBJbiBhZGRpdGlvbiB0byBwcm9wZXJ0eSBjaGFuZ2Vz
        LCBgc2V0KClgIHJldHVybnMgdGhlIHZhbHVlIG9mIHRoZSBvYmplY3QKICAg
        IGl0c2VsZiBzbyB5b3UgY2FuIGRvIGNoYWluaW5nIGxpa2UgdGhpczoKCiAg
        ICBgYGBqYXZhc2NyaXB0CiAgICByZWNvcmQuc2V0KCdmaXJzdE5hbWUnLCAn
        Q2hhcmxlcycpLnNldCgnbGFzdE5hbWUnLCAnSm9sbGV5Jyk7CiAgICBgYGAK
        CiAgICBAbWV0aG9kIHNldAogICAgQHBhcmFtIHtTdHJpbmd9IGtleU5hbWUg
        VGhlIHByb3BlcnR5IHRvIHNldAogICAgQHBhcmFtIHtPYmplY3R9IHZhbHVl
        IFRoZSB2YWx1ZSB0byBzZXQgb3IgYG51bGxgLgogICAgQHJldHVybiB7RW1i
        ZXIuT2JzZXJ2YWJsZX0KICAqLwogIHNldDogZnVuY3Rpb24oa2V5TmFtZSwg
        dmFsdWUpIHsKICAgIHNldCh0aGlzLCBrZXlOYW1lLCB2YWx1ZSk7CiAgICBy
        ZXR1cm4gdGhpczsKICB9LAoKCiAgLyoqCiAgICBTZXRzIGEgbGlzdCBvZiBw
        cm9wZXJ0aWVzIGF0IG9uY2UuIFRoZXNlIHByb3BlcnRpZXMgYXJlIHNldCBp
        bnNpZGUKICAgIGEgc2luZ2xlIGBiZWdpblByb3BlcnR5Q2hhbmdlc2AgYW5k
        IGBlbmRQcm9wZXJ0eUNoYW5nZXNgIGJhdGNoLCBzbwogICAgb2JzZXJ2ZXJz
        IHdpbGwgYmUgYnVmZmVyZWQuCgogICAgYGBgamF2YXNjcmlwdAogICAgcmVj
        b3JkLnNldFByb3BlcnRpZXMoeyBmaXJzdE5hbWU6ICdDaGFybGVzJywgbGFz
        dE5hbWU6ICdKb2xsZXknIH0pOwogICAgYGBgCgogICAgQG1ldGhvZCBzZXRQ
        cm9wZXJ0aWVzCiAgICBAcGFyYW0ge0hhc2h9IGhhc2ggdGhlIGhhc2ggb2Yg
        a2V5cyBhbmQgdmFsdWVzIHRvIHNldAogICAgQHJldHVybiB7RW1iZXIuT2Jz
        ZXJ2YWJsZX0KICAqLwogIHNldFByb3BlcnRpZXM6IGZ1bmN0aW9uKGhhc2gp
        IHsKICAgIHJldHVybiBFbWJlci5zZXRQcm9wZXJ0aWVzKHRoaXMsIGhhc2gp
        OwogIH0sCgogIC8qKgogICAgQmVnaW5zIGEgZ3JvdXBpbmcgb2YgcHJvcGVy
        dHkgY2hhbmdlcy4KCiAgICBZb3UgY2FuIHVzZSB0aGlzIG1ldGhvZCB0byBn
        cm91cCBwcm9wZXJ0eSBjaGFuZ2VzIHNvIHRoYXQgbm90aWZpY2F0aW9ucwog
        ICAgd2lsbCBub3QgYmUgc2VudCB1bnRpbCB0aGUgY2hhbmdlcyBhcmUgZmlu
        aXNoZWQuIElmIHlvdSBwbGFuIHRvIG1ha2UgYQogICAgbGFyZ2UgbnVtYmVy
        IG9mIGNoYW5nZXMgdG8gYW4gb2JqZWN0IGF0IG9uZSB0aW1lLCB5b3Ugc2hv
        dWxkIGNhbGwgdGhpcwogICAgbWV0aG9kIGF0IHRoZSBiZWdpbm5pbmcgb2Yg
        dGhlIGNoYW5nZXMgdG8gYmVnaW4gZGVmZXJyaW5nIGNoYW5nZQogICAgbm90
        aWZpY2F0aW9ucy4gV2hlbiB5b3UgYXJlIGRvbmUgbWFraW5nIGNoYW5nZXMs
        IGNhbGwKICAgIGBlbmRQcm9wZXJ0eUNoYW5nZXMoKWAgdG8gZGVsaXZlciB0
        aGUgZGVmZXJyZWQgY2hhbmdlIG5vdGlmaWNhdGlvbnMgYW5kIGVuZAogICAg
        ZGVmZXJyaW5nLgoKICAgIEBtZXRob2QgYmVnaW5Qcm9wZXJ0eUNoYW5nZXMK
        ICAgIEByZXR1cm4ge0VtYmVyLk9ic2VydmFibGV9CiAgKi8KICBiZWdpblBy
        b3BlcnR5Q2hhbmdlczogZnVuY3Rpb24oKSB7CiAgICBFbWJlci5iZWdpblBy
        b3BlcnR5Q2hhbmdlcygpOwogICAgcmV0dXJuIHRoaXM7CiAgfSwKCiAgLyoq
        CiAgICBFbmRzIGEgZ3JvdXBpbmcgb2YgcHJvcGVydHkgY2hhbmdlcy4KCiAg
        ICBZb3UgY2FuIHVzZSB0aGlzIG1ldGhvZCB0byBncm91cCBwcm9wZXJ0eSBj
        aGFuZ2VzIHNvIHRoYXQgbm90aWZpY2F0aW9ucwogICAgd2lsbCBub3QgYmUg
        c2VudCB1bnRpbCB0aGUgY2hhbmdlcyBhcmUgZmluaXNoZWQuIElmIHlvdSBw
        bGFuIHRvIG1ha2UgYQogICAgbGFyZ2UgbnVtYmVyIG9mIGNoYW5nZXMgdG8g
        YW4gb2JqZWN0IGF0IG9uZSB0aW1lLCB5b3Ugc2hvdWxkIGNhbGwKICAgIGBi
        ZWdpblByb3BlcnR5Q2hhbmdlcygpYCBhdCB0aGUgYmVnaW5uaW5nIG9mIHRo
        ZSBjaGFuZ2VzIHRvIGRlZmVyIGNoYW5nZQogICAgbm90aWZpY2F0aW9ucy4g
        V2hlbiB5b3UgYXJlIGRvbmUgbWFraW5nIGNoYW5nZXMsIGNhbGwgdGhpcyBt
        ZXRob2QgdG8KICAgIGRlbGl2ZXIgdGhlIGRlZmVycmVkIGNoYW5nZSBub3Rp
        ZmljYXRpb25zIGFuZCBlbmQgZGVmZXJyaW5nLgoKICAgIEBtZXRob2QgZW5k
        UHJvcGVydHlDaGFuZ2VzCiAgICBAcmV0dXJuIHtFbWJlci5PYnNlcnZhYmxl
        fQogICovCiAgZW5kUHJvcGVydHlDaGFuZ2VzOiBmdW5jdGlvbigpIHsKICAg
        IEVtYmVyLmVuZFByb3BlcnR5Q2hhbmdlcygpOwogICAgcmV0dXJuIHRoaXM7
        CiAgfSwKCiAgLyoqCiAgICBOb3RpZnkgdGhlIG9ic2VydmVyIHN5c3RlbSB0
        aGF0IGEgcHJvcGVydHkgaXMgYWJvdXQgdG8gY2hhbmdlLgoKICAgIFNvbWV0
        aW1lcyB5b3UgbmVlZCB0byBjaGFuZ2UgYSB2YWx1ZSBkaXJlY3RseSBvciBp
        bmRpcmVjdGx5IHdpdGhvdXQKICAgIGFjdHVhbGx5IGNhbGxpbmcgYGdldCgp
        YCBvciBgc2V0KClgIG9uIGl0LiBJbiB0aGlzIGNhc2UsIHlvdSBjYW4gdXNl
        IHRoaXMKICAgIG1ldGhvZCBhbmQgYHByb3BlcnR5RGlkQ2hhbmdlKClgIGlu
        c3RlYWQuIENhbGxpbmcgdGhlc2UgdHdvIG1ldGhvZHMKICAgIHRvZ2V0aGVy
        IHdpbGwgbm90aWZ5IGFsbCBvYnNlcnZlcnMgdGhhdCB0aGUgcHJvcGVydHkg
        aGFzIHBvdGVudGlhbGx5CiAgICBjaGFuZ2VkIHZhbHVlLgoKICAgIE5vdGUg
        dGhhdCB5b3UgbXVzdCBhbHdheXMgY2FsbCBgcHJvcGVydHlXaWxsQ2hhbmdl
        YCBhbmQgYHByb3BlcnR5RGlkQ2hhbmdlYAogICAgYXMgYSBwYWlyLiBJZiB5
        b3UgZG8gbm90LCBpdCBtYXkgZ2V0IHRoZSBwcm9wZXJ0eSBjaGFuZ2UgZ3Jv
        dXBzIG91dCBvZgogICAgb3JkZXIgYW5kIGNhdXNlIG5vdGlmaWNhdGlvbnMg
        dG8gYmUgZGVsaXZlcmVkIG1vcmUgb2Z0ZW4gdGhhbiB5b3Ugd291bGQKICAg
        IGxpa2UuCgogICAgQG1ldGhvZCBwcm9wZXJ0eVdpbGxDaGFuZ2UKICAgIEBw
        YXJhbSB7U3RyaW5nfSBrZXlOYW1lIFRoZSBwcm9wZXJ0eSBrZXkgdGhhdCBp
        cyBhYm91dCB0byBjaGFuZ2UuCiAgICBAcmV0dXJuIHtFbWJlci5PYnNlcnZh
        YmxlfQogICovCiAgcHJvcGVydHlXaWxsQ2hhbmdlOiBmdW5jdGlvbihrZXlO
        YW1lKSB7CiAgICBFbWJlci5wcm9wZXJ0eVdpbGxDaGFuZ2UodGhpcywga2V5
        TmFtZSk7CiAgICByZXR1cm4gdGhpczsKICB9LAoKICAvKioKICAgIE5vdGlm
        eSB0aGUgb2JzZXJ2ZXIgc3lzdGVtIHRoYXQgYSBwcm9wZXJ0eSBoYXMganVz
        dCBjaGFuZ2VkLgoKICAgIFNvbWV0aW1lcyB5b3UgbmVlZCB0byBjaGFuZ2Ug
        YSB2YWx1ZSBkaXJlY3RseSBvciBpbmRpcmVjdGx5IHdpdGhvdXQKICAgIGFj
        dHVhbGx5IGNhbGxpbmcgYGdldCgpYCBvciBgc2V0KClgIG9uIGl0LiBJbiB0
        aGlzIGNhc2UsIHlvdSBjYW4gdXNlIHRoaXMKICAgIG1ldGhvZCBhbmQgYHBy
        b3BlcnR5V2lsbENoYW5nZSgpYCBpbnN0ZWFkLiBDYWxsaW5nIHRoZXNlIHR3
        byBtZXRob2RzCiAgICB0b2dldGhlciB3aWxsIG5vdGlmeSBhbGwgb2JzZXJ2
        ZXJzIHRoYXQgdGhlIHByb3BlcnR5IGhhcyBwb3RlbnRpYWxseQogICAgY2hh
        bmdlZCB2YWx1ZS4KCiAgICBOb3RlIHRoYXQgeW91IG11c3QgYWx3YXlzIGNh
        bGwgYHByb3BlcnR5V2lsbENoYW5nZWAgYW5kIGBwcm9wZXJ0eURpZENoYW5n
        ZWAKICAgIGFzIGEgcGFpci4gSWYgeW91IGRvIG5vdCwgaXQgbWF5IGdldCB0
        aGUgcHJvcGVydHkgY2hhbmdlIGdyb3VwcyBvdXQgb2YKICAgIG9yZGVyIGFu
        ZCBjYXVzZSBub3RpZmljYXRpb25zIHRvIGJlIGRlbGl2ZXJlZCBtb3JlIG9m
        dGVuIHRoYW4geW91IHdvdWxkCiAgICBsaWtlLgoKICAgIEBtZXRob2QgcHJv
        cGVydHlEaWRDaGFuZ2UKICAgIEBwYXJhbSB7U3RyaW5nfSBrZXlOYW1lIFRo
        ZSBwcm9wZXJ0eSBrZXkgdGhhdCBoYXMganVzdCBjaGFuZ2VkLgogICAgQHJl
        dHVybiB7RW1iZXIuT2JzZXJ2YWJsZX0KICAqLwogIHByb3BlcnR5RGlkQ2hh
        bmdlOiBmdW5jdGlvbihrZXlOYW1lKSB7CiAgICBFbWJlci5wcm9wZXJ0eURp
        ZENoYW5nZSh0aGlzLCBrZXlOYW1lKTsKICAgIHJldHVybiB0aGlzOwogIH0s
        CgogIC8qKgogICAgQ29udmVuaWVuY2UgbWV0aG9kIHRvIGNhbGwgYHByb3Bl
        cnR5V2lsbENoYW5nZWAgYW5kIGBwcm9wZXJ0eURpZENoYW5nZWAgaW4KICAg
        IHN1Y2Nlc3Npb24uCgogICAgQG1ldGhvZCBub3RpZnlQcm9wZXJ0eUNoYW5n
        ZQogICAgQHBhcmFtIHtTdHJpbmd9IGtleU5hbWUgVGhlIHByb3BlcnR5IGtl
        eSB0byBiZSBub3RpZmllZCBhYm91dC4KICAgIEByZXR1cm4ge0VtYmVyLk9i
        c2VydmFibGV9CiAgKi8KICBub3RpZnlQcm9wZXJ0eUNoYW5nZTogZnVuY3Rp
        b24oa2V5TmFtZSkgewogICAgdGhpcy5wcm9wZXJ0eVdpbGxDaGFuZ2Uoa2V5
        TmFtZSk7CiAgICB0aGlzLnByb3BlcnR5RGlkQ2hhbmdlKGtleU5hbWUpOwog
        ICAgcmV0dXJuIHRoaXM7CiAgfSwKCiAgYWRkQmVmb3JlT2JzZXJ2ZXI6IGZ1
        bmN0aW9uKGtleSwgdGFyZ2V0LCBtZXRob2QpIHsKICAgIEVtYmVyLmFkZEJl
        Zm9yZU9ic2VydmVyKHRoaXMsIGtleSwgdGFyZ2V0LCBtZXRob2QpOwogIH0s
        CgogIC8qKgogICAgQWRkcyBhbiBvYnNlcnZlciBvbiBhIHByb3BlcnR5LgoK
        ICAgIFRoaXMgaXMgdGhlIGNvcmUgbWV0aG9kIHVzZWQgdG8gcmVnaXN0ZXIg
        YW4gb2JzZXJ2ZXIgZm9yIGEgcHJvcGVydHkuCgogICAgT25jZSB5b3UgY2Fs
        bCB0aGlzIG1ldGhvZCwgYW55IHRpbWUgdGhlIGtleSdzIHZhbHVlIGlzIHNl
        dCwgeW91ciBvYnNlcnZlcgogICAgd2lsbCBiZSBub3RpZmllZC4gTm90ZSB0
        aGF0IHRoZSBvYnNlcnZlcnMgYXJlIHRyaWdnZXJlZCBhbnkgdGltZSB0aGUK
        ICAgIHZhbHVlIGlzIHNldCwgcmVnYXJkbGVzcyBvZiB3aGV0aGVyIGl0IGhh
        cyBhY3R1YWxseSBjaGFuZ2VkLiBZb3VyCiAgICBvYnNlcnZlciBzaG91bGQg
        YmUgcHJlcGFyZWQgdG8gaGFuZGxlIHRoYXQuCgogICAgWW91IGNhbiBhbHNv
        IHBhc3MgYW4gb3B0aW9uYWwgY29udGV4dCBwYXJhbWV0ZXIgdG8gdGhpcyBt
        ZXRob2QuIFRoZQogICAgY29udGV4dCB3aWxsIGJlIHBhc3NlZCB0byB5b3Vy
        IG9ic2VydmVyIG1ldGhvZCB3aGVuZXZlciBpdCBpcyB0cmlnZ2VyZWQuCiAg
        ICBOb3RlIHRoYXQgaWYgeW91IGFkZCB0aGUgc2FtZSB0YXJnZXQvbWV0aG9k
        IHBhaXIgb24gYSBrZXkgbXVsdGlwbGUgdGltZXMKICAgIHdpdGggZGlmZmVy
        ZW50IGNvbnRleHQgcGFyYW1ldGVycywgeW91ciBvYnNlcnZlciB3aWxsIG9u
        bHkgYmUgY2FsbGVkIG9uY2UKICAgIHdpdGggdGhlIGxhc3QgY29udGV4dCB5
        b3UgcGFzc2VkLgoKICAgICMjIyBPYnNlcnZlciBNZXRob2RzCgogICAgT2Jz
        ZXJ2ZXIgbWV0aG9kcyB5b3UgcGFzcyBzaG91bGQgZ2VuZXJhbGx5IGhhdmUg
        dGhlIGZvbGxvd2luZyBzaWduYXR1cmUgaWYKICAgIHlvdSBkbyBub3QgcGFz
        cyBhIGBjb250ZXh0YCBwYXJhbWV0ZXI6CgogICAgYGBgamF2YXNjcmlwdAog
        ICAgZm9vRGlkQ2hhbmdlOiBmdW5jdGlvbihzZW5kZXIsIGtleSwgdmFsdWUs
        IHJldikgeyB9OwogICAgYGBgCgogICAgVGhlIHNlbmRlciBpcyB0aGUgb2Jq
        ZWN0IHRoYXQgY2hhbmdlZC4gVGhlIGtleSBpcyB0aGUgcHJvcGVydHkgdGhh
        dAogICAgY2hhbmdlcy4gVGhlIHZhbHVlIHByb3BlcnR5IGlzIGN1cnJlbnRs
        eSByZXNlcnZlZCBhbmQgdW51c2VkLiBUaGUgcmV2CiAgICBpcyB0aGUgbGFz
        dCBwcm9wZXJ0eSByZXZpc2lvbiBvZiB0aGUgb2JqZWN0IHdoZW4gaXQgY2hh
        bmdlZCwgd2hpY2ggeW91IGNhbgogICAgdXNlIHRvIGRldGVjdCBpZiB0aGUg
        a2V5IHZhbHVlIGhhcyByZWFsbHkgY2hhbmdlZCBvciBub3QuCgogICAgSWYg
        eW91IHBhc3MgYSBgY29udGV4dGAgcGFyYW1ldGVyLCB0aGUgY29udGV4dCB3
        aWxsIGJlIHBhc3NlZCBiZWZvcmUgdGhlCiAgICByZXZpc2lvbiBsaWtlIHNv
        OgoKICAgIGBgYGphdmFzY3JpcHQKICAgIGZvb0RpZENoYW5nZTogZnVuY3Rp
        b24oc2VuZGVyLCBrZXksIHZhbHVlLCBjb250ZXh0LCByZXYpIHsgfTsKICAg
        IGBgYAoKICAgIFVzdWFsbHkgeW91IHdpbGwgbm90IG5lZWQgdGhlIHZhbHVl
        LCBjb250ZXh0IG9yIHJldmlzaW9uIHBhcmFtZXRlcnMgYXQKICAgIHRoZSBl
        bmQuIEluIHRoaXMgY2FzZSwgaXQgaXMgY29tbW9uIHRvIHdyaXRlIG9ic2Vy
        dmVyIG1ldGhvZHMgdGhhdCB0YWtlCiAgICBvbmx5IGEgc2VuZGVyIGFuZCBr
        ZXkgdmFsdWUgYXMgcGFyYW1ldGVycyBvciwgaWYgeW91IGFyZW4ndCBpbnRl
        cmVzdGVkIGluCiAgICBhbnkgb2YgdGhlc2UgdmFsdWVzLCB0byB3cml0ZSBh
        biBvYnNlcnZlciB0aGF0IGhhcyBubyBwYXJhbWV0ZXJzIGF0IGFsbC4KCiAg
        ICBAbWV0aG9kIGFkZE9ic2VydmVyCiAgICBAcGFyYW0ge1N0cmluZ30ga2V5
        IFRoZSBrZXkgdG8gb2JzZXJ2ZXIKICAgIEBwYXJhbSB7T2JqZWN0fSB0YXJn
        ZXQgVGhlIHRhcmdldCBvYmplY3QgdG8gaW52b2tlCiAgICBAcGFyYW0ge1N0
        cmluZ3xGdW5jdGlvbn0gbWV0aG9kIFRoZSBtZXRob2QgdG8gaW52b2tlLgog
        ICAgQHJldHVybiB7RW1iZXIuT2JqZWN0fSBzZWxmCiAgKi8KICBhZGRPYnNl
        cnZlcjogZnVuY3Rpb24oa2V5LCB0YXJnZXQsIG1ldGhvZCkgewogICAgRW1i
        ZXIuYWRkT2JzZXJ2ZXIodGhpcywga2V5LCB0YXJnZXQsIG1ldGhvZCk7CiAg
        fSwKCiAgLyoqCiAgICBSZW1vdmUgYW4gb2JzZXJ2ZXIgeW91IGhhdmUgcHJl
        dmlvdXNseSByZWdpc3RlcmVkIG9uIHRoaXMgb2JqZWN0LiBQYXNzCiAgICB0
        aGUgc2FtZSBrZXksIHRhcmdldCwgYW5kIG1ldGhvZCB5b3UgcGFzc2VkIHRv
        IGBhZGRPYnNlcnZlcigpYCBhbmQgeW91cgogICAgdGFyZ2V0IHdpbGwgbm8g
        bG9uZ2VyIHJlY2VpdmUgbm90aWZpY2F0aW9ucy4KCiAgICBAbWV0aG9kIHJl
        bW92ZU9ic2VydmVyCiAgICBAcGFyYW0ge1N0cmluZ30ga2V5IFRoZSBrZXkg
        dG8gb2JzZXJ2ZXIKICAgIEBwYXJhbSB7T2JqZWN0fSB0YXJnZXQgVGhlIHRh
        cmdldCBvYmplY3QgdG8gaW52b2tlCiAgICBAcGFyYW0ge1N0cmluZ3xGdW5j
        dGlvbn0gbWV0aG9kIFRoZSBtZXRob2QgdG8gaW52b2tlLgogICAgQHJldHVy
        biB7RW1iZXIuT2JzZXJ2YWJsZX0gcmVjZWl2ZXIKICAqLwogIHJlbW92ZU9i
        c2VydmVyOiBmdW5jdGlvbihrZXksIHRhcmdldCwgbWV0aG9kKSB7CiAgICBF
        bWJlci5yZW1vdmVPYnNlcnZlcih0aGlzLCBrZXksIHRhcmdldCwgbWV0aG9k
        KTsKICB9LAoKICAvKioKICAgIFJldHVybnMgYHRydWVgIGlmIHRoZSBvYmpl
        Y3QgY3VycmVudGx5IGhhcyBvYnNlcnZlcnMgcmVnaXN0ZXJlZCBmb3IgYQog
        ICAgcGFydGljdWxhciBrZXkuIFlvdSBjYW4gdXNlIHRoaXMgbWV0aG9kIHRv
        IHBvdGVudGlhbGx5IGRlZmVyIHBlcmZvcm1pbmcKICAgIGFuIGV4cGVuc2l2
        ZSBhY3Rpb24gdW50aWwgc29tZW9uZSBiZWdpbnMgb2JzZXJ2aW5nIGEgcGFy
        dGljdWxhciBwcm9wZXJ0eQogICAgb24gdGhlIG9iamVjdC4KCiAgICBAbWV0
        aG9kIGhhc09ic2VydmVyRm9yCiAgICBAcGFyYW0ge1N0cmluZ30ga2V5IEtl
        eSB0byBjaGVjawogICAgQHJldHVybiB7Qm9vbGVhbn0KICAqLwogIGhhc09i
        c2VydmVyRm9yOiBmdW5jdGlvbihrZXkpIHsKICAgIHJldHVybiBFbWJlci5o
        YXNMaXN0ZW5lcnModGhpcywga2V5Kyc6Y2hhbmdlJyk7CiAgfSwKCiAgLyoq
        CiAgICBSZXRyaWV2ZXMgdGhlIHZhbHVlIG9mIGEgcHJvcGVydHksIG9yIGEg
        ZGVmYXVsdCB2YWx1ZSBpbiB0aGUgY2FzZSB0aGF0IHRoZQogICAgcHJvcGVy
        dHkgcmV0dXJucyBgdW5kZWZpbmVkYC4KCiAgICBgYGBqYXZhc2NyaXB0CiAg
        ICBwZXJzb24uZ2V0V2l0aERlZmF1bHQoJ2xhc3ROYW1lJywgJ0RvZScpOwog
        ICAgYGBgCgogICAgQG1ldGhvZCBnZXRXaXRoRGVmYXVsdAogICAgQHBhcmFt
        IHtTdHJpbmd9IGtleU5hbWUgVGhlIG5hbWUgb2YgdGhlIHByb3BlcnR5IHRv
        IHJldHJpZXZlCiAgICBAcGFyYW0ge09iamVjdH0gZGVmYXVsdFZhbHVlIFRo
        ZSB2YWx1ZSB0byByZXR1cm4gaWYgdGhlIHByb3BlcnR5IHZhbHVlIGlzIHVu
        ZGVmaW5lZAogICAgQHJldHVybiB7T2JqZWN0fSBUaGUgcHJvcGVydHkgdmFs
        dWUgb3IgdGhlIGRlZmF1bHRWYWx1ZS4KICAqLwogIGdldFdpdGhEZWZhdWx0
        OiBmdW5jdGlvbihrZXlOYW1lLCBkZWZhdWx0VmFsdWUpIHsKICAgIHJldHVy
        biBFbWJlci5nZXRXaXRoRGVmYXVsdCh0aGlzLCBrZXlOYW1lLCBkZWZhdWx0
        VmFsdWUpOwogIH0sCgogIC8qKgogICAgU2V0IHRoZSB2YWx1ZSBvZiBhIHBy
        b3BlcnR5IHRvIHRoZSBjdXJyZW50IHZhbHVlIHBsdXMgc29tZSBhbW91bnQu
        CgogICAgYGBgamF2YXNjcmlwdAogICAgcGVyc29uLmluY3JlbWVudFByb3Bl
        cnR5KCdhZ2UnKTsKICAgIHRlYW0uaW5jcmVtZW50UHJvcGVydHkoJ3Njb3Jl
        JywgMik7CiAgICBgYGAKCiAgICBAbWV0aG9kIGluY3JlbWVudFByb3BlcnR5
        CiAgICBAcGFyYW0ge1N0cmluZ30ga2V5TmFtZSBUaGUgbmFtZSBvZiB0aGUg
        cHJvcGVydHkgdG8gaW5jcmVtZW50CiAgICBAcGFyYW0ge051bWJlcn0gaW5j
        cmVtZW50IFRoZSBhbW91bnQgdG8gaW5jcmVtZW50IGJ5LiBEZWZhdWx0cyB0
        byAxCiAgICBAcmV0dXJuIHtOdW1iZXJ9IFRoZSBuZXcgcHJvcGVydHkgdmFs
        dWUKICAqLwogIGluY3JlbWVudFByb3BlcnR5OiBmdW5jdGlvbihrZXlOYW1l
        LCBpbmNyZW1lbnQpIHsKICAgIGlmIChFbWJlci5pc05vbmUoaW5jcmVtZW50
        KSkgeyBpbmNyZW1lbnQgPSAxOyB9CiAgICBFbWJlci5hc3NlcnQoIk11c3Qg
        cGFzcyBhIG51bWVyaWMgdmFsdWUgdG8gaW5jcmVtZW50UHJvcGVydHkiLCAo
        IWlzTmFOKHBhcnNlRmxvYXQoaW5jcmVtZW50KSkgJiYgaXNGaW5pdGUoaW5j
        cmVtZW50KSkpOwogICAgc2V0KHRoaXMsIGtleU5hbWUsIChnZXQodGhpcywg
        a2V5TmFtZSkgfHwgMCkgKyBpbmNyZW1lbnQpOwogICAgcmV0dXJuIGdldCh0
        aGlzLCBrZXlOYW1lKTsKICB9LAoKICAvKioKICAgIFNldCB0aGUgdmFsdWUg
        b2YgYSBwcm9wZXJ0eSB0byB0aGUgY3VycmVudCB2YWx1ZSBtaW51cyBzb21l
        IGFtb3VudC4KCiAgICBgYGBqYXZhc2NyaXB0CiAgICBwbGF5ZXIuZGVjcmVt
        ZW50UHJvcGVydHkoJ2xpdmVzJyk7CiAgICBvcmMuZGVjcmVtZW50UHJvcGVy
        dHkoJ2hlYWx0aCcsIDUpOwogICAgYGBgCgogICAgQG1ldGhvZCBkZWNyZW1l
        bnRQcm9wZXJ0eQogICAgQHBhcmFtIHtTdHJpbmd9IGtleU5hbWUgVGhlIG5h
        bWUgb2YgdGhlIHByb3BlcnR5IHRvIGRlY3JlbWVudAogICAgQHBhcmFtIHtO
        dW1iZXJ9IGRlY3JlbWVudCBUaGUgYW1vdW50IHRvIGRlY3JlbWVudCBieS4g
        RGVmYXVsdHMgdG8gMQogICAgQHJldHVybiB7TnVtYmVyfSBUaGUgbmV3IHBy
        b3BlcnR5IHZhbHVlCiAgKi8KICBkZWNyZW1lbnRQcm9wZXJ0eTogZnVuY3Rp
        b24oa2V5TmFtZSwgZGVjcmVtZW50KSB7CiAgICBpZiAoRW1iZXIuaXNOb25l
        KGRlY3JlbWVudCkpIHsgZGVjcmVtZW50ID0gMTsgfQogICAgRW1iZXIuYXNz
        ZXJ0KCJNdXN0IHBhc3MgYSBudW1lcmljIHZhbHVlIHRvIGRlY3JlbWVudFBy
        b3BlcnR5IiwgKCFpc05hTihwYXJzZUZsb2F0KGRlY3JlbWVudCkpICYmIGlz
        RmluaXRlKGRlY3JlbWVudCkpKTsKICAgIHNldCh0aGlzLCBrZXlOYW1lLCAo
        Z2V0KHRoaXMsIGtleU5hbWUpIHx8IDApIC0gZGVjcmVtZW50KTsKICAgIHJl
        dHVybiBnZXQodGhpcywga2V5TmFtZSk7CiAgfSwKCiAgLyoqCiAgICBTZXQg
        dGhlIHZhbHVlIG9mIGEgYm9vbGVhbiBwcm9wZXJ0eSB0byB0aGUgb3Bwb3Np
        dGUgb2YgaXQncwogICAgY3VycmVudCB2YWx1ZS4KCiAgICBgYGBqYXZhc2Ny
        aXB0CiAgICBzdGFyc2hpcC50b2dnbGVQcm9wZXJ0eSgnd2FycERyaXZlRW5n
        YWdlZCcpOwogICAgYGBgCgogICAgQG1ldGhvZCB0b2dnbGVQcm9wZXJ0eQog
        ICAgQHBhcmFtIHtTdHJpbmd9IGtleU5hbWUgVGhlIG5hbWUgb2YgdGhlIHBy
        b3BlcnR5IHRvIHRvZ2dsZQogICAgQHJldHVybiB7T2JqZWN0fSBUaGUgbmV3
        IHByb3BlcnR5IHZhbHVlCiAgKi8KICB0b2dnbGVQcm9wZXJ0eTogZnVuY3Rp
        b24oa2V5TmFtZSkgewogICAgc2V0KHRoaXMsIGtleU5hbWUsICFnZXQodGhp
        cywga2V5TmFtZSkpOwogICAgcmV0dXJuIGdldCh0aGlzLCBrZXlOYW1lKTsK
        ICB9LAoKICAvKioKICAgIFJldHVybnMgdGhlIGNhY2hlZCB2YWx1ZSBvZiBh
        IGNvbXB1dGVkIHByb3BlcnR5LCBpZiBpdCBleGlzdHMuCiAgICBUaGlzIGFs
        bG93cyB5b3UgdG8gaW5zcGVjdCB0aGUgdmFsdWUgb2YgYSBjb21wdXRlZCBw
        cm9wZXJ0eQogICAgd2l0aG91dCBhY2NpZGVudGFsbHkgaW52b2tpbmcgaXQg
        aWYgaXQgaXMgaW50ZW5kZWQgdG8gYmUKICAgIGdlbmVyYXRlZCBsYXppbHku
        CgogICAgQG1ldGhvZCBjYWNoZUZvcgogICAgQHBhcmFtIHtTdHJpbmd9IGtl
        eU5hbWUKICAgIEByZXR1cm4ge09iamVjdH0gVGhlIGNhY2hlZCB2YWx1ZSBv
        ZiB0aGUgY29tcHV0ZWQgcHJvcGVydHksIGlmIGFueQogICovCiAgY2FjaGVG
        b3I6IGZ1bmN0aW9uKGtleU5hbWUpIHsKICAgIHJldHVybiBFbWJlci5jYWNo
        ZUZvcih0aGlzLCBrZXlOYW1lKTsKICB9LAoKICAvLyBpbnRlbmRlZCBmb3Ig
        ZGVidWdnaW5nIHB1cnBvc2VzCiAgb2JzZXJ2ZXJzRm9yS2V5OiBmdW5jdGlv
        bihrZXlOYW1lKSB7CiAgICByZXR1cm4gRW1iZXIub2JzZXJ2ZXJzRm9yKHRo
        aXMsIGtleU5hbWUpOwogIH0KfSk7Cgp9KSgpOwoKCgooZnVuY3Rpb24oKSB7
        Ci8qKgogIEBtb2R1bGUgZW1iZXIKICBAc3VibW9kdWxlIGVtYmVyLXJ1bnRp
        bWUKKi8KCgovLyBOT1RFOiB0aGlzIG9iamVjdCBzaG91bGQgbmV2ZXIgYmUg
        aW5jbHVkZWQgZGlyZWN0bHkuIEluc3RlYWQgdXNlIGBFbWJlci5PYmplY3Rg
        LgovLyBXZSBvbmx5IGRlZmluZSB0aGlzIHNlcGFyYXRlbHkgc28gdGhhdCBg
        RW1iZXIuU2V0YCBjYW4gZGVwZW5kIG9uIGl0LgoKCnZhciBzZXQgPSBFbWJl
        ci5zZXQsIGdldCA9IEVtYmVyLmdldCwKICAgIG9fY3JlYXRlID0gRW1iZXIu
        Y3JlYXRlLAogICAgb19kZWZpbmVQcm9wZXJ0eSA9IEVtYmVyLnBsYXRmb3Jt
        LmRlZmluZVByb3BlcnR5LAogICAgR1VJRF9LRVkgPSBFbWJlci5HVUlEX0tF
        WSwKICAgIGd1aWRGb3IgPSBFbWJlci5ndWlkRm9yLAogICAgZ2VuZXJhdGVH
        dWlkID0gRW1iZXIuZ2VuZXJhdGVHdWlkLAogICAgbWV0YSA9IEVtYmVyLm1l
        dGEsCiAgICBNRVRBX0tFWSA9IEVtYmVyLk1FVEFfS0VZLAogICAgcmV3YXRj
        aCA9IEVtYmVyLnJld2F0Y2gsCiAgICBmaW5pc2hDaGFpbnMgPSBFbWJlci5m
        aW5pc2hDaGFpbnMsCiAgICBzZW5kRXZlbnQgPSBFbWJlci5zZW5kRXZlbnQs
        CiAgICBkZXN0cm95ID0gRW1iZXIuZGVzdHJveSwKICAgIHNjaGVkdWxlID0g
        RW1iZXIucnVuLnNjaGVkdWxlLAogICAgTWl4aW4gPSBFbWJlci5NaXhpbiwK
        ICAgIGFwcGx5TWl4aW4gPSBNaXhpbi5fYXBwbHksCiAgICBmaW5pc2hQYXJ0
        aWFsID0gTWl4aW4uZmluaXNoUGFydGlhbCwKICAgIHJlb3BlbiA9IE1peGlu
        LnByb3RvdHlwZS5yZW9wZW4sCiAgICBNQU5EQVRPUllfU0VUVEVSID0gRW1i
        ZXIuRU5WLk1BTkRBVE9SWV9TRVRURVIsCiAgICBpbmRleE9mID0gRW1iZXIu
        RW51bWVyYWJsZVV0aWxzLmluZGV4T2Y7Cgp2YXIgdW5kZWZpbmVkRGVzY3Jp
        cHRvciA9IHsKICBjb25maWd1cmFibGU6IHRydWUsCiAgd3JpdGFibGU6IHRy
        dWUsCiAgZW51bWVyYWJsZTogZmFsc2UsCiAgdmFsdWU6IHVuZGVmaW5lZAp9
        OwoKdmFyIG51bGxEZXNjcmlwdG9yID0gewogIGNvbmZpZ3VyYWJsZTogdHJ1
        ZSwKICB3cml0YWJsZTogdHJ1ZSwKICBlbnVtZXJhYmxlOiBmYWxzZSwKICB2
        YWx1ZTogbnVsbAp9OwoKZnVuY3Rpb24gbWFrZUN0b3IoKSB7CgogIC8vIE5v
        dGU6IGF2b2lkIGFjY2Vzc2luZyBhbnkgcHJvcGVydGllcyBvbiB0aGUgb2Jq
        ZWN0IHNpbmNlIGl0IG1ha2VzIHRoZQogIC8vIG1ldGhvZCBhIGxvdCBmYXN0
        ZXIuIFRoaXMgaXMgZ2x1ZSBjb2RlIHNvIHdlIHdhbnQgaXQgdG8gYmUgYXMg
        ZmFzdCBhcwogIC8vIHBvc3NpYmxlLgoKICB2YXIgd2FzQXBwbGllZCA9IGZh
        bHNlLCBpbml0TWl4aW5zLCBpbml0UHJvcGVydGllczsKCiAgdmFyIENsYXNz
        ID0gZnVuY3Rpb24oKSB7CiAgICBpZiAoIXdhc0FwcGxpZWQpIHsKICAgICAg
        Q2xhc3MucHJvdG8oKTsgLy8gcHJlcGFyZSBwcm90b3R5cGUuLi4KICAgIH0K
        ICAgIG9fZGVmaW5lUHJvcGVydHkodGhpcywgR1VJRF9LRVksIG51bGxEZXNj
        cmlwdG9yKTsKICAgIG9fZGVmaW5lUHJvcGVydHkodGhpcywgJ19fbmV4dFN1
        cGVyJywgdW5kZWZpbmVkRGVzY3JpcHRvcik7CiAgICB2YXIgbSA9IG1ldGEo
        dGhpcyksIHByb3RvID0gbS5wcm90bzsKICAgIG0ucHJvdG8gPSB0aGlzOwog
        ICAgaWYgKGluaXRNaXhpbnMpIHsKICAgICAgLy8gY2FwdHVyZSBsb2NhbGx5
        IHNvIHdlIGNhbiBjbGVhciB0aGUgY2xvc2VkIG92ZXIgdmFyaWFibGUKICAg
        ICAgdmFyIG1peGlucyA9IGluaXRNaXhpbnM7CiAgICAgIGluaXRNaXhpbnMg
        PSBudWxsOwogICAgICB0aGlzLnJlb3Blbi5hcHBseSh0aGlzLCBtaXhpbnMp
        OwogICAgfQogICAgaWYgKGluaXRQcm9wZXJ0aWVzKSB7CiAgICAgIC8vIGNh
        cHR1cmUgbG9jYWxseSBzbyB3ZSBjYW4gY2xlYXIgdGhlIGNsb3NlZCBvdmVy
        IHZhcmlhYmxlCiAgICAgIHZhciBwcm9wcyA9IGluaXRQcm9wZXJ0aWVzOwog
        ICAgICBpbml0UHJvcGVydGllcyA9IG51bGw7CgogICAgICB2YXIgY29uY2F0
        ZW5hdGVkUHJvcGVydGllcyA9IHRoaXMuY29uY2F0ZW5hdGVkUHJvcGVydGll
        czsKCiAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gcHJvcHMubGVuZ3RoOyBp
        IDwgbDsgaSsrKSB7CiAgICAgICAgdmFyIHByb3BlcnRpZXMgPSBwcm9wc1tp
        XTsKCiAgICAgICAgRW1iZXIuYXNzZXJ0KCJFbWJlci5PYmplY3QuY3JlYXRl
        IG5vIGxvbmdlciBzdXBwb3J0cyBtaXhpbmcgaW4gb3RoZXIgZGVmaW5pdGlv
        bnMsIHVzZSBjcmVhdGVXaXRoTWl4aW5zIGluc3RlYWQuIiwgIShwcm9wZXJ0
        aWVzIGluc3RhbmNlb2YgRW1iZXIuTWl4aW4pKTsKCiAgICAgICAgaWYgKHR5
        cGVvZiBwcm9wZXJ0aWVzICE9PSAnb2JqZWN0JyAmJiBwcm9wZXJ0aWVzICE9
        PSB1bmRlZmluZWQpIHsKICAgICAgICAgIHRocm93IG5ldyBFbWJlci5FcnJv
        cigiRW1iZXIuT2JqZWN0LmNyZWF0ZSBvbmx5IGFjY2VwdHMgb2JqZWN0cy4i
        KTsKICAgICAgICB9CgogICAgICAgIGlmICghcHJvcGVydGllcykgeyBjb250
        aW51ZTsgfQoKICAgICAgICB2YXIga2V5TmFtZXMgPSBFbWJlci5rZXlzKHBy
        b3BlcnRpZXMpOwoKICAgICAgICBmb3IgKHZhciBqID0gMCwgbGwgPSBrZXlO
        YW1lcy5sZW5ndGg7IGogPCBsbDsgaisrKSB7CiAgICAgICAgICB2YXIga2V5
        TmFtZSA9IGtleU5hbWVzW2pdOwogICAgICAgICAgaWYgKCFwcm9wZXJ0aWVz
        Lmhhc093blByb3BlcnR5KGtleU5hbWUpKSB7IGNvbnRpbnVlOyB9CgogICAg
        ICAgICAgdmFyIHZhbHVlID0gcHJvcGVydGllc1trZXlOYW1lXSwKICAgICAg
        ICAgICAgICBJU19CSU5ESU5HID0gRW1iZXIuSVNfQklORElORzsKCiAgICAg
        ICAgICBpZiAoSVNfQklORElORy50ZXN0KGtleU5hbWUpKSB7CiAgICAgICAg
        ICAgIHZhciBiaW5kaW5ncyA9IG0uYmluZGluZ3M7CiAgICAgICAgICAgIGlm
        ICghYmluZGluZ3MpIHsKICAgICAgICAgICAgICBiaW5kaW5ncyA9IG0uYmlu
        ZGluZ3MgPSB7fTsKICAgICAgICAgICAgfSBlbHNlIGlmICghbS5oYXNPd25Q
        cm9wZXJ0eSgnYmluZGluZ3MnKSkgewogICAgICAgICAgICAgIGJpbmRpbmdz
        ID0gbS5iaW5kaW5ncyA9IG9fY3JlYXRlKG0uYmluZGluZ3MpOwogICAgICAg
        ICAgICB9CiAgICAgICAgICAgIGJpbmRpbmdzW2tleU5hbWVdID0gdmFsdWU7
        CiAgICAgICAgICB9CgogICAgICAgICAgdmFyIGRlc2MgPSBtLmRlc2NzW2tl
        eU5hbWVdOwoKICAgICAgICAgIEVtYmVyLmFzc2VydCgiRW1iZXIuT2JqZWN0
        LmNyZWF0ZSBubyBsb25nZXIgc3VwcG9ydHMgZGVmaW5pbmcgY29tcHV0ZWQg
        cHJvcGVydGllcy4iLCAhKHZhbHVlIGluc3RhbmNlb2YgRW1iZXIuQ29tcHV0
        ZWRQcm9wZXJ0eSkpOwogICAgICAgICAgRW1iZXIuYXNzZXJ0KCJFbWJlci5P
        YmplY3QuY3JlYXRlIG5vIGxvbmdlciBzdXBwb3J0cyBkZWZpbmluZyBtZXRo
        b2RzIHRoYXQgY2FsbCBfc3VwZXIuIiwgISh0eXBlb2YgdmFsdWUgPT09ICdm
        dW5jdGlvbicgJiYgdmFsdWUudG9TdHJpbmcoKS5pbmRleE9mKCcuX3N1cGVy
        JykgIT09IC0xKSk7CiAgICAgICAgICBFbWJlci5hc3NlcnQoImBhY3Rpb25z
        YCBtdXN0IGJlIHByb3ZpZGVkIGF0IGV4dGVuZCB0aW1lLCBub3QgYXQgY3Jl
        YXRlICIgKwogICAgICAgICAgICAgICAgICAgICAgICJ0aW1lLCB3aGVuIEVt
        YmVyLkFjdGlvbkhhbmRsZXIgaXMgdXNlZCAoaS5lLiB2aWV3cywgIiArCiAg
        ICAgICAgICAgICAgICAgICAgICAgImNvbnRyb2xsZXJzICYgcm91dGVzKS4i
        LCAhKChrZXlOYW1lID09PSAnYWN0aW9ucycpICYmIEVtYmVyLkFjdGlvbkhh
        bmRsZXIuZGV0ZWN0KHRoaXMpKSk7CgogICAgICAgICAgaWYgKGNvbmNhdGVu
        YXRlZFByb3BlcnRpZXMgJiYgaW5kZXhPZihjb25jYXRlbmF0ZWRQcm9wZXJ0
        aWVzLCBrZXlOYW1lKSA+PSAwKSB7CiAgICAgICAgICAgIHZhciBiYXNlVmFs
        dWUgPSB0aGlzW2tleU5hbWVdOwoKICAgICAgICAgICAgaWYgKGJhc2VWYWx1
        ZSkgewogICAgICAgICAgICAgIGlmICgnZnVuY3Rpb24nID09PSB0eXBlb2Yg
        YmFzZVZhbHVlLmNvbmNhdCkgewogICAgICAgICAgICAgICAgdmFsdWUgPSBi
        YXNlVmFsdWUuY29uY2F0KHZhbHVlKTsKICAgICAgICAgICAgICB9IGVsc2Ug
        ewogICAgICAgICAgICAgICAgdmFsdWUgPSBFbWJlci5tYWtlQXJyYXkoYmFz
        ZVZhbHVlKS5jb25jYXQodmFsdWUpOwogICAgICAgICAgICAgIH0KICAgICAg
        ICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICB2YWx1ZSA9IEVtYmVyLm1h
        a2VBcnJheSh2YWx1ZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAg
        ICAgICAgICBpZiAoZGVzYykgewogICAgICAgICAgICBkZXNjLnNldCh0aGlz
        LCBrZXlOYW1lLCB2YWx1ZSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAg
        ICAgICBpZiAodHlwZW9mIHRoaXMuc2V0VW5rbm93blByb3BlcnR5ID09PSAn
        ZnVuY3Rpb24nICYmICEoa2V5TmFtZSBpbiB0aGlzKSkgewogICAgICAgICAg
        ICAgIHRoaXMuc2V0VW5rbm93blByb3BlcnR5KGtleU5hbWUsIHZhbHVlKTsK
        ICAgICAgICAgICAgfSBlbHNlIGlmIChNQU5EQVRPUllfU0VUVEVSKSB7CiAg
        ICAgICAgICAgICAgRW1iZXIuZGVmaW5lUHJvcGVydHkodGhpcywga2V5TmFt
        ZSwgbnVsbCwgdmFsdWUpOyAvLyBzZXR1cCBtYW5kYXRvcnkgc2V0dGVyCiAg
        ICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgdGhpc1trZXlOYW1l
        XSA9IHZhbHVlOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAg
        fQogICAgICB9CiAgICB9CiAgICBmaW5pc2hQYXJ0aWFsKHRoaXMsIG0pOwog
        ICAgdGhpcy5pbml0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICBtLnBy
        b3RvID0gcHJvdG87CiAgICBmaW5pc2hDaGFpbnModGhpcyk7CiAgICBzZW5k
        RXZlbnQodGhpcywgImluaXQiKTsKICB9OwoKICBDbGFzcy50b1N0cmluZyA9
        IE1peGluLnByb3RvdHlwZS50b1N0cmluZzsKICBDbGFzcy53aWxsUmVvcGVu
        ID0gZnVuY3Rpb24oKSB7CiAgICBpZiAod2FzQXBwbGllZCkgewogICAgICBD
        bGFzcy5Qcm90b3R5cGVNaXhpbiA9IE1peGluLmNyZWF0ZShDbGFzcy5Qcm90
        b3R5cGVNaXhpbik7CiAgICB9CgogICAgd2FzQXBwbGllZCA9IGZhbHNlOwog
        IH07CiAgQ2xhc3MuX2luaXRNaXhpbnMgPSBmdW5jdGlvbihhcmdzKSB7IGlu
        aXRNaXhpbnMgPSBhcmdzOyB9OwogIENsYXNzLl9pbml0UHJvcGVydGllcyA9
        IGZ1bmN0aW9uKGFyZ3MpIHsgaW5pdFByb3BlcnRpZXMgPSBhcmdzOyB9OwoK
        ICBDbGFzcy5wcm90byA9IGZ1bmN0aW9uKCkgewogICAgdmFyIHN1cGVyY2xh
        c3MgPSBDbGFzcy5zdXBlcmNsYXNzOwogICAgaWYgKHN1cGVyY2xhc3MpIHsg
        c3VwZXJjbGFzcy5wcm90bygpOyB9CgogICAgaWYgKCF3YXNBcHBsaWVkKSB7
        CiAgICAgIHdhc0FwcGxpZWQgPSB0cnVlOwogICAgICBDbGFzcy5Qcm90b3R5
        cGVNaXhpbi5hcHBseVBhcnRpYWwoQ2xhc3MucHJvdG90eXBlKTsKICAgICAg
        cmV3YXRjaChDbGFzcy5wcm90b3R5cGUpOwogICAgfQoKICAgIHJldHVybiB0
        aGlzLnByb3RvdHlwZTsKICB9OwoKICByZXR1cm4gQ2xhc3M7Cgp9CgovKioK
        ICBAY2xhc3MgQ29yZU9iamVjdAogIEBuYW1lc3BhY2UgRW1iZXIKKi8KdmFy
        IENvcmVPYmplY3QgPSBtYWtlQ3RvcigpOwpDb3JlT2JqZWN0LnRvU3RyaW5n
        ID0gZnVuY3Rpb24oKSB7IHJldHVybiAiRW1iZXIuQ29yZU9iamVjdCI7IH07
        CgpDb3JlT2JqZWN0LlByb3RvdHlwZU1peGluID0gTWl4aW4uY3JlYXRlKHsK
        ICByZW9wZW46IGZ1bmN0aW9uKCkgewogICAgYXBwbHlNaXhpbih0aGlzLCBh
        cmd1bWVudHMsIHRydWUpOwogICAgcmV0dXJuIHRoaXM7CiAgfSwKCiAgLyoq
        CiAgICBBbiBvdmVycmlkYWJsZSBtZXRob2QgY2FsbGVkIHdoZW4gb2JqZWN0
        cyBhcmUgaW5zdGFudGlhdGVkLiBCeSBkZWZhdWx0LAogICAgZG9lcyBub3Ro
        aW5nIHVubGVzcyBpdCBpcyBvdmVycmlkZGVuIGR1cmluZyBjbGFzcyBkZWZp
        bml0aW9uLgoKICAgIEV4YW1wbGU6CgogICAgYGBgamF2YXNjcmlwdAogICAg
        QXBwLlBlcnNvbiA9IEVtYmVyLk9iamVjdC5leHRlbmQoewogICAgICBpbml0
        OiBmdW5jdGlvbigpIHsKICAgICAgICBhbGVydCgnTmFtZSBpcyAnICsgdGhp
        cy5nZXQoJ25hbWUnKSk7CiAgICAgIH0KICAgIH0pOwoKICAgIHZhciBzdGV2
        ZSA9IEFwcC5QZXJzb24uY3JlYXRlKHsKICAgICAgbmFtZTogIlN0ZXZlIgog
        ICAgfSk7CgogICAgLy8gYWxlcnRzICdOYW1lIGlzIFN0ZXZlJy4KICAgIGBg
        YAoKICAgIE5PVEU6IElmIHlvdSBkbyBvdmVycmlkZSBgaW5pdGAgZm9yIGEg
        ZnJhbWV3b3JrIGNsYXNzIGxpa2UgYEVtYmVyLlZpZXdgIG9yCiAgICBgRW1i
        ZXIuQXJyYXlDb250cm9sbGVyYCwgYmUgc3VyZSB0byBjYWxsIGB0aGlzLl9z
        dXBlcigpYCBpbiB5b3VyCiAgICBgaW5pdGAgZGVjbGFyYXRpb24hIElmIHlv
        dSBkb24ndCwgRW1iZXIgbWF5IG5vdCBoYXZlIGFuIG9wcG9ydHVuaXR5IHRv
        CiAgICBkbyBpbXBvcnRhbnQgc2V0dXAgd29yaywgYW5kIHlvdSdsbCBzZWUg
        c3RyYW5nZSBiZWhhdmlvciBpbiB5b3VyCiAgICBhcHBsaWNhdGlvbi4KCiAg
        ICBAbWV0aG9kIGluaXQKICAqLwogIGluaXQ6IGZ1bmN0aW9uKCkge30sCgog
        IC8qKgogICAgRGVmaW5lcyB0aGUgcHJvcGVydGllcyB0aGF0IHdpbGwgYmUg
        Y29uY2F0ZW5hdGVkIGZyb20gdGhlIHN1cGVyY2xhc3MKICAgIChpbnN0ZWFk
        IG9mIG92ZXJyaWRkZW4pLgoKICAgIEJ5IGRlZmF1bHQsIHdoZW4geW91IGV4
        dGVuZCBhbiBFbWJlciBjbGFzcyBhIHByb3BlcnR5IGRlZmluZWQgaW4KICAg
        IHRoZSBzdWJjbGFzcyBvdmVycmlkZXMgYSBwcm9wZXJ0eSB3aXRoIHRoZSBz
        YW1lIG5hbWUgdGhhdCBpcyBkZWZpbmVkCiAgICBpbiB0aGUgc3VwZXJjbGFz
        cy4gSG93ZXZlciwgdGhlcmUgYXJlIHNvbWUgY2FzZXMgd2hlcmUgaXQgaXMg
        cHJlZmVyYWJsZQogICAgdG8gYnVpbGQgdXAgYSBwcm9wZXJ0eSdzIHZhbHVl
        IGJ5IGNvbWJpbmluZyB0aGUgc3VwZXJjbGFzcycgcHJvcGVydHkKICAgIHZh
        bHVlIHdpdGggdGhlIHN1YmNsYXNzJyB2YWx1ZS4gQW4gZXhhbXBsZSBvZiB0
        aGlzIGluIHVzZSB3aXRoaW4gRW1iZXIKICAgIGlzIHRoZSBgY2xhc3NOYW1l
        c2AgcHJvcGVydHkgb2YgYEVtYmVyLlZpZXdgLgoKICAgIEhlcmUgaXMgc29t
        ZSBzYW1wbGUgY29kZSBzaG93aW5nIHRoZSBkaWZmZXJlbmNlIGJldHdlZW4g
        YSBjb25jYXRlbmF0ZWQKICAgIHByb3BlcnR5IGFuZCBhIG5vcm1hbCBvbmU6
        CgogICAgYGBgamF2YXNjcmlwdAogICAgQXBwLkJhclZpZXcgPSBFbWJlci5W
        aWV3LmV4dGVuZCh7CiAgICAgIHNvbWVOb25Db25jYXRlbmF0ZWRQcm9wZXJ0
        eTogWydiYXInXSwKICAgICAgY2xhc3NOYW1lczogWydiYXInXQogICAgfSk7
        CgogICAgQXBwLkZvb0JhclZpZXcgPSBBcHAuQmFyVmlldy5leHRlbmQoewog
        ICAgICBzb21lTm9uQ29uY2F0ZW5hdGVkUHJvcGVydHk6IFsnZm9vJ10sCiAg
        ICAgIGNsYXNzTmFtZXM6IFsnZm9vJ10sCiAgICB9KTsKCiAgICB2YXIgZm9v
        QmFyVmlldyA9IEFwcC5Gb29CYXJWaWV3LmNyZWF0ZSgpOwogICAgZm9vQmFy
        Vmlldy5nZXQoJ3NvbWVOb25Db25jYXRlbmF0ZWRQcm9wZXJ0eScpOyAvLyBb
        J2ZvbyddCiAgICBmb29CYXJWaWV3LmdldCgnY2xhc3NOYW1lcycpOyAvLyBb
        J2VtYmVyLXZpZXcnLCAnYmFyJywgJ2ZvbyddCiAgICBgYGAKCiAgICBUaGlz
        IGJlaGF2aW9yIGV4dGVuZHMgdG8gb2JqZWN0IGNyZWF0aW9uIGFzIHdlbGwu
        IENvbnRpbnVpbmcgdGhlCiAgICBhYm92ZSBleGFtcGxlOgoKICAgIGBgYGph
        dmFzY3JpcHQKICAgIHZhciB2aWV3ID0gQXBwLkZvb0JhclZpZXcuY3JlYXRl
        KHsKICAgICAgc29tZU5vbkNvbmNhdGVuYXRlZFByb3BlcnR5OiBbJ2Jheidd
        LAogICAgICBjbGFzc05hbWVzOiBbJ2JheiddCiAgICB9KQogICAgdmlldy5n
        ZXQoJ3NvbWVOb25Db25jYXRlbmF0ZWRQcm9wZXJ0eScpOyAvLyBbJ2Jheidd
        CiAgICB2aWV3LmdldCgnY2xhc3NOYW1lcycpOyAvLyBbJ2VtYmVyLXZpZXcn
        LCAnYmFyJywgJ2ZvbycsICdiYXonXQogICAgYGBgCiAgICBBZGRpbmcgYSBz
        aW5nbGUgcHJvcGVydHkgdGhhdCBpcyBub3QgYW4gYXJyYXkgd2lsbCBqdXN0
        IGFkZCBpdCBpbiB0aGUgYXJyYXk6CgogICAgYGBgamF2YXNjcmlwdAogICAg
        dmFyIHZpZXcgPSBBcHAuRm9vQmFyVmlldy5jcmVhdGUoewogICAgICBjbGFz
        c05hbWVzOiAnYmF6JwogICAgfSkKICAgIHZpZXcuZ2V0KCdjbGFzc05hbWVz
        Jyk7IC8vIFsnZW1iZXItdmlldycsICdiYXInLCAnZm9vJywgJ2JheiddCiAg
        ICBgYGAKCiAgICBVc2luZyB0aGUgYGNvbmNhdGVuYXRlZFByb3BlcnRpZXNg
        IHByb3BlcnR5LCB3ZSBjYW4gdGVsbCB0byBFbWJlciB0aGF0IG1peAogICAg
        dGhlIGNvbnRlbnQgb2YgdGhlIHByb3BlcnRpZXMuCgogICAgSW4gYEVtYmVy
        LlZpZXdgIHRoZSBgY2xhc3NOYW1lQmluZGluZ3NgIGFuZCBgYXR0cmlidXRl
        QmluZGluZ3NgIHByb3BlcnRpZXMKICAgIGFyZSBhbHNvIGNvbmNhdGVuYXRl
        ZCwgaW4gYWRkaXRpb24gdG8gYGNsYXNzTmFtZXNgLgoKICAgIFRoaXMgZmVh
        dHVyZSBpcyBhdmFpbGFibGUgZm9yIHlvdSB0byB1c2UgdGhyb3VnaG91dCB0
        aGUgRW1iZXIgb2JqZWN0IG1vZGVsLAogICAgYWx0aG91Z2ggdHlwaWNhbCBh
        cHAgZGV2ZWxvcGVycyBhcmUgbGlrZWx5IHRvIHVzZSBpdCBpbmZyZXF1ZW50
        bHkuIFNpbmNlCiAgICBpdCBjaGFuZ2VzIGV4cGVjdGF0aW9ucyBhYm91dCBi
        ZWhhdmlvciBvZiBwcm9wZXJ0aWVzLCB5b3Ugc2hvdWxkIHByb3Blcmx5CiAg
        ICBkb2N1bWVudCBpdHMgdXNhZ2UgaW4gZWFjaCBpbmRpdmlkdWFsIGNvbmNh
        dGVuYXRlZCBwcm9wZXJ0eSAodG8gbm90CiAgICBtaXNsZWFkIHlvdXIgdXNl
        cnMgdG8gdGhpbmsgdGhleSBjYW4gb3ZlcnJpZGUgdGhlIHByb3BlcnR5IGlu
        IGEgc3ViY2xhc3MpLgoKICAgIEBwcm9wZXJ0eSBjb25jYXRlbmF0ZWRQcm9w
        ZXJ0aWVzCiAgICBAdHlwZSBBcnJheQogICAgQGRlZmF1bHQgbnVsbAogICov
        CiAgY29uY2F0ZW5hdGVkUHJvcGVydGllczogbnVsbCwKCiAgLyoqCiAgICBE
        ZXN0cm95ZWQgb2JqZWN0IHByb3BlcnR5IGZsYWcuCgogICAgaWYgdGhpcyBw
        cm9wZXJ0eSBpcyBgdHJ1ZWAgdGhlIG9ic2VydmVycyBhbmQgYmluZGluZ3Mg
        d2VyZSBhbHJlYWR5CiAgICByZW1vdmVkIGJ5IHRoZSBlZmZlY3Qgb2YgY2Fs
        bGluZyB0aGUgYGRlc3Ryb3koKWAgbWV0aG9kLgoKICAgIEBwcm9wZXJ0eSBp
        c0Rlc3Ryb3llZAogICAgQGRlZmF1bHQgZmFsc2UKICAqLwogIGlzRGVzdHJv
        eWVkOiBmYWxzZSwKCiAgLyoqCiAgICBEZXN0cnVjdGlvbiBzY2hlZHVsZWQg
        ZmxhZy4gVGhlIGBkZXN0cm95KClgIG1ldGhvZCBoYXMgYmVlbiBjYWxsZWQu
        CgogICAgVGhlIG9iamVjdCBzdGF5cyBpbnRhY3QgdW50aWwgdGhlIGVuZCBv
        ZiB0aGUgcnVuIGxvb3AgYXQgd2hpY2ggcG9pbnQKICAgIHRoZSBgaXNEZXN0
        cm95ZWRgIGZsYWcgaXMgc2V0LgoKICAgIEBwcm9wZXJ0eSBpc0Rlc3Ryb3lp
        bmcKICAgIEBkZWZhdWx0IGZhbHNlCiAgKi8KICBpc0Rlc3Ryb3lpbmc6IGZh
        bHNlLAoKICAvKioKICAgIERlc3Ryb3lzIGFuIG9iamVjdCBieSBzZXR0aW5n
        IHRoZSBgaXNEZXN0cm95ZWRgIGZsYWcgYW5kIHJlbW92aW5nIGl0cwogICAg
        bWV0YWRhdGEsIHdoaWNoIGVmZmVjdGl2ZWx5IGRlc3Ryb3lzIG9ic2VydmVy
        cyBhbmQgYmluZGluZ3MuCgogICAgSWYgeW91IHRyeSB0byBzZXQgYSBwcm9w
        ZXJ0eSBvbiBhIGRlc3Ryb3llZCBvYmplY3QsIGFuIGV4Y2VwdGlvbiB3aWxs
        IGJlCiAgICByYWlzZWQuCgogICAgTm90ZSB0aGF0IGRlc3RydWN0aW9uIGlz
        IHNjaGVkdWxlZCBmb3IgdGhlIGVuZCBvZiB0aGUgcnVuIGxvb3AgYW5kIGRv
        ZXMgbm90CiAgICBoYXBwZW4gaW1tZWRpYXRlbHkuICBJdCB3aWxsIHNldCBh
        biBpc0Rlc3Ryb3lpbmcgZmxhZyBpbW1lZGlhdGVseS4KCiAgICBAbWV0aG9k
        IGRlc3Ryb3kKICAgIEByZXR1cm4ge0VtYmVyLk9iamVjdH0gcmVjZWl2ZXIK
        ICAqLwogIGRlc3Ryb3k6IGZ1bmN0aW9uKCkgewogICAgaWYgKHRoaXMuaXNE
        ZXN0cm95aW5nKSB7IHJldHVybjsgfQogICAgdGhpcy5pc0Rlc3Ryb3lpbmcg
        PSB0cnVlOwoKICAgIHNjaGVkdWxlKCdhY3Rpb25zJywgdGhpcywgdGhpcy53
        aWxsRGVzdHJveSk7CiAgICBzY2hlZHVsZSgnZGVzdHJveScsIHRoaXMsIHRo
        aXMuX3NjaGVkdWxlZERlc3Ryb3kpOwogICAgcmV0dXJuIHRoaXM7CiAgfSwK
        CiAgLyoqCiAgICBPdmVycmlkZSB0byBpbXBsZW1lbnQgdGVhcmRvd24uCgog
        ICAgQG1ldGhvZCB3aWxsRGVzdHJveQogICAqLwogIHdpbGxEZXN0cm95OiBF
        bWJlci5LLAoKICAvKioKICAgIEludm9rZWQgYnkgdGhlIHJ1biBsb29wIHRv
        IGFjdHVhbGx5IGRlc3Ryb3kgdGhlIG9iamVjdC4gVGhpcyBpcwogICAgc2No
        ZWR1bGVkIGZvciBleGVjdXRpb24gYnkgdGhlIGBkZXN0cm95YCBtZXRob2Qu
        CgogICAgQHByaXZhdGUKICAgIEBtZXRob2QgX3NjaGVkdWxlZERlc3Ryb3kK
        ICAqLwogIF9zY2hlZHVsZWREZXN0cm95OiBmdW5jdGlvbigpIHsKICAgIGlm
        ICh0aGlzLmlzRGVzdHJveWVkKSB7IHJldHVybjsgfQogICAgZGVzdHJveSh0
        aGlzKTsKICAgIHRoaXMuaXNEZXN0cm95ZWQgPSB0cnVlOwogIH0sCgogIGJp
        bmQ6IGZ1bmN0aW9uKHRvLCBmcm9tKSB7CiAgICBpZiAoIShmcm9tIGluc3Rh
        bmNlb2YgRW1iZXIuQmluZGluZykpIHsgZnJvbSA9IEVtYmVyLkJpbmRpbmcu
        ZnJvbShmcm9tKTsgfQogICAgZnJvbS50byh0bykuY29ubmVjdCh0aGlzKTsK
        ICAgIHJldHVybiBmcm9tOwogIH0sCgogIC8qKgogICAgUmV0dXJucyBhIHN0
        cmluZyByZXByZXNlbnRhdGlvbiB3aGljaCBhdHRlbXB0cyB0byBwcm92aWRl
        IG1vcmUgaW5mb3JtYXRpb24KICAgIHRoYW4gSmF2YXNjcmlwdCdzIGB0b1N0
        cmluZ2AgdHlwaWNhbGx5IGRvZXMsIGluIGEgZ2VuZXJpYyB3YXkgZm9yIGFs
        bCBFbWJlcgogICAgb2JqZWN0cy4KCiAgICBgYGBqYXZhc2NyaXB0CiAgICBB
        cHAuUGVyc29uID0gRW0uT2JqZWN0LmV4dGVuZCgpCiAgICBwZXJzb24gPSBB
        cHAuUGVyc29uLmNyZWF0ZSgpCiAgICBwZXJzb24udG9TdHJpbmcoKSAvLz0+
        ICI8QXBwLlBlcnNvbjplbWJlcjEwMjQ+IgogICAgYGBgCgogICAgSWYgdGhl
        IG9iamVjdCdzIGNsYXNzIGlzIG5vdCBkZWZpbmVkIG9uIGFuIEVtYmVyIG5h
        bWVzcGFjZSwgaXQgd2lsbAogICAgaW5kaWNhdGUgaXQgaXMgYSBzdWJjbGFz
        cyBvZiB0aGUgcmVnaXN0ZXJlZCBzdXBlcmNsYXNzOgoKICAgYGBgamF2YXNj
        cmlwdAogICAgU3R1ZGVudCA9IEFwcC5QZXJzb24uZXh0ZW5kKCkKICAgIHN0
        dWRlbnQgPSBTdHVkZW50LmNyZWF0ZSgpCiAgICBzdHVkZW50LnRvU3RyaW5n
        KCkgLy89PiAiPChzdWJjbGFzcyBvZiBBcHAuUGVyc29uKTplbWJlcjEwMjU+
        IgogICAgYGBgCgogICAgSWYgdGhlIG1ldGhvZCBgdG9TdHJpbmdFeHRlbnNp
        b25gIGlzIGRlZmluZWQsIGl0cyByZXR1cm4gdmFsdWUgd2lsbCBiZQogICAg
        aW5jbHVkZWQgaW4gdGhlIG91dHB1dC4KCiAgICBgYGBqYXZhc2NyaXB0CiAg
        ICBBcHAuVGVhY2hlciA9IEFwcC5QZXJzb24uZXh0ZW5kKHsKICAgICAgdG9T
        dHJpbmdFeHRlbnNpb246IGZ1bmN0aW9uKCkgewogICAgICAgIHJldHVybiB0
        aGlzLmdldCgnZnVsbE5hbWUnKTsKICAgICAgfQogICAgfSk7CiAgICB0ZWFj
        aGVyID0gQXBwLlRlYWNoZXIuY3JlYXRlKCkKICAgIHRlYWNoZXIudG9TdHJp
        bmcoKTsgLy89PiAiPEFwcC5UZWFjaGVyOmVtYmVyMTAyNjpUb20gRGFsZT4i
        CiAgICBgYGAKCiAgICBAbWV0aG9kIHRvU3RyaW5nCiAgICBAcmV0dXJuIHtT
        dHJpbmd9IHN0cmluZyByZXByZXNlbnRhdGlvbgogICovCiAgdG9TdHJpbmc6
        IGZ1bmN0aW9uIHRvU3RyaW5nKCkgewogICAgdmFyIGhhc1RvU3RyaW5nRXh0
        ZW5zaW9uID0gdHlwZW9mIHRoaXMudG9TdHJpbmdFeHRlbnNpb24gPT09ICdm
        dW5jdGlvbicsCiAgICAgICAgZXh0ZW5zaW9uID0gaGFzVG9TdHJpbmdFeHRl
        bnNpb24gPyAiOiIgKyB0aGlzLnRvU3RyaW5nRXh0ZW5zaW9uKCkgOiAnJzsK
        ICAgIHZhciByZXQgPSAnPCcrdGhpcy5jb25zdHJ1Y3Rvci50b1N0cmluZygp
        Kyc6JytndWlkRm9yKHRoaXMpK2V4dGVuc2lvbisnPic7CiAgICB0aGlzLnRv
        U3RyaW5nID0gbWFrZVRvU3RyaW5nKHJldCk7CiAgICByZXR1cm4gcmV0Owog
        IH0KfSk7CgpDb3JlT2JqZWN0LlByb3RvdHlwZU1peGluLm93bmVyQ29uc3Ry
        dWN0b3IgPSBDb3JlT2JqZWN0OwoKZnVuY3Rpb24gbWFrZVRvU3RyaW5nKHJl
        dCkgewogIHJldHVybiBmdW5jdGlvbigpIHsgcmV0dXJuIHJldDsgfTsKfQoK
        aWYgKEVtYmVyLmNvbmZpZy5vdmVycmlkZVByb3RvdHlwZU1peGluKSB7CiAg
        RW1iZXIuY29uZmlnLm92ZXJyaWRlUHJvdG90eXBlTWl4aW4oQ29yZU9iamVj
        dC5Qcm90b3R5cGVNaXhpbik7Cn0KCkNvcmVPYmplY3QuX19zdXBlcl9fID0g
        bnVsbDsKCnZhciBDbGFzc01peGluID0gTWl4aW4uY3JlYXRlKHsKCiAgQ2xh
        c3NNaXhpbjogRW1iZXIucmVxdWlyZWQoKSwKCiAgUHJvdG90eXBlTWl4aW46
        IEVtYmVyLnJlcXVpcmVkKCksCgogIGlzQ2xhc3M6IHRydWUsCgogIGlzTWV0
        aG9kOiBmYWxzZSwKCiAgLyoqCiAgICBDcmVhdGVzIGEgbmV3IHN1YmNsYXNz
        LgoKICAgIGBgYGphdmFzY3JpcHQKICAgIEFwcC5QZXJzb24gPSBFbWJlci5P
        YmplY3QuZXh0ZW5kKHsKICAgICAgc2F5OiBmdW5jdGlvbih0aGluZykgewog
        ICAgICAgIGFsZXJ0KHRoaW5nKTsKICAgICAgIH0KICAgIH0pOwogICAgYGBg
        CgogICAgVGhpcyBkZWZpbmVzIGEgbmV3IHN1YmNsYXNzIG9mIEVtYmVyLk9i
        amVjdDogYEFwcC5QZXJzb25gLiBJdCBjb250YWlucyBvbmUgbWV0aG9kOiBg
        c2F5KClgLgoKICAgIFlvdSBjYW4gYWxzbyBjcmVhdGUgYSBzdWJjbGFzcyBm
        cm9tIGFueSBleGlzdGluZyBjbGFzcyBieSBjYWxsaW5nIGl0cyBgZXh0ZW5k
        KClgICBtZXRob2QuIEZvciBleGFtcGxlLCB5b3UgbWlnaHQgd2FudCB0byBj
        cmVhdGUgYSBzdWJjbGFzcyBvZiBFbWJlcidzIGJ1aWx0LWluIGBFbWJlci5W
        aWV3YCBjbGFzczoKCiAgICBgYGBqYXZhc2NyaXB0CiAgICBBcHAuUGVyc29u
        VmlldyA9IEVtYmVyLlZpZXcuZXh0ZW5kKHsKICAgICAgdGFnTmFtZTogJ2xp
        JywKICAgICAgY2xhc3NOYW1lQmluZGluZ3M6IFsnaXNBZG1pbmlzdHJhdG9y
        J10KICAgIH0pOwogICAgYGBgCgogICAgV2hlbiBkZWZpbmluZyBhIHN1YmNs
        YXNzLCB5b3UgY2FuIG92ZXJyaWRlIG1ldGhvZHMgYnV0IHN0aWxsIGFjY2Vz
        cyB0aGUgaW1wbGVtZW50YXRpb24gb2YgeW91ciBwYXJlbnQgY2xhc3MgYnkg
        Y2FsbGluZyB0aGUgc3BlY2lhbCBgX3N1cGVyKClgIG1ldGhvZDoKCiAgICBg
        YGBqYXZhc2NyaXB0CiAgICBBcHAuUGVyc29uID0gRW1iZXIuT2JqZWN0LmV4
        dGVuZCh7CiAgICAgIHNheTogZnVuY3Rpb24odGhpbmcpIHsKICAgICAgICB2
        YXIgbmFtZSA9IHRoaXMuZ2V0KCduYW1lJyk7CiAgICAgICAgYWxlcnQobmFt
        ZSArICcgc2F5czogJyArIHRoaW5nKTsKICAgICAgfQogICAgfSk7CgogICAg
        QXBwLlNvbGRpZXIgPSBBcHAuUGVyc29uLmV4dGVuZCh7CiAgICAgIHNheTog
        ZnVuY3Rpb24odGhpbmcpIHsKICAgICAgICB0aGlzLl9zdXBlcih0aGluZyAr
        ICIsIHNpciEiKTsKICAgICAgfSwKICAgICAgbWFyY2g6IGZ1bmN0aW9uKG51
        bWJlck9mSG91cnMpIHsKICAgICAgICBhbGVydCh0aGlzLmdldCgnbmFtZScp
        ICsgJyBtYXJjaGVzIGZvciAnICsgbnVtYmVyT2ZIb3VycyArICcgaG91cnMu
        JykKICAgICAgfQogICAgfSk7CgogICAgdmFyIHllaHVkYSA9IEFwcC5Tb2xk
        aWVyLmNyZWF0ZSh7CiAgICAgIG5hbWU6ICJZZWh1ZGEgS2F0eiIKICAgIH0p
        OwoKICAgIHllaHVkYS5zYXkoIlllcyIpOyAgLy8gYWxlcnRzICJZZWh1ZGEg
        S2F0eiBzYXlzOiBZZXMsIHNpciEiCiAgICBgYGAKCiAgICBUaGUgYGNyZWF0
        ZSgpYCBvbiBsaW5lICMxNyBjcmVhdGVzIGFuICppbnN0YW5jZSogb2YgdGhl
        IGBBcHAuU29sZGllcmAgY2xhc3MuIFRoZSBgZXh0ZW5kKClgIG9uIGxpbmUg
        IzggY3JlYXRlcyBhICpzdWJjbGFzcyogb2YgYEFwcC5QZXJzb25gLiBBbnkg
        aW5zdGFuY2Ugb2YgdGhlIGBBcHAuUGVyc29uYCBjbGFzcyB3aWxsICpub3Qq
        IGhhdmUgdGhlIGBtYXJjaCgpYCBtZXRob2QuCgogICAgWW91IGNhbiBhbHNv
        IHBhc3MgYEVtYmVyLk1peGluYCBjbGFzc2VzIHRvIGFkZCBhZGRpdGlvbmFs
        IHByb3BlcnRpZXMgdG8gdGhlIHN1YmNsYXNzLgoKICAgIGBgYGphdmFzY3Jp
        cHQKICAgIEFwcC5QZXJzb24gPSBFbWJlci5PYmplY3QuZXh0ZW5kKHsKICAg
        ICAgc2F5OiBmdW5jdGlvbih0aGluZykgewogICAgICAgIGFsZXJ0KHRoaXMu
        Z2V0KCduYW1lJykgKyAnIHNheXM6ICcgKyB0aGluZyk7CiAgICAgIH0KICAg
        IH0pOwoKICAgIEFwcC5TaW5naW5nTWl4aW4gPSBFbWJlci5NaXhpbi5jcmVh
        dGUoewogICAgICBzaW5nOiBmdW5jdGlvbih0aGluZyl7CiAgICAgICAgYWxl
        cnQodGhpcy5nZXQoJ25hbWUnKSArICcgc2luZ3M6IGxhIGxhIGxhICcgKyB0
        aGluZyk7CiAgICAgIH0KICAgIH0pOwoKICAgIEFwcC5Ccm9hZHdheVN0YXIg
        PSBBcHAuUGVyc29uLmV4dGVuZChBcHAuU2luZ2luZ01peGluLCB7CiAgICAg
        IGRhbmNlOiBmdW5jdGlvbigpIHsKICAgICAgICBhbGVydCh0aGlzLmdldCgn
        bmFtZScpICsgJyBkYW5jZXM6IHRhcCB0YXAgdGFwIHRhcCAnKTsKICAgICAg
        fQogICAgfSk7CiAgICBgYGAKCiAgICBUaGUgYEFwcC5Ccm9hZHdheVN0YXJg
        IGNsYXNzIGNvbnRhaW5zIHRocmVlIG1ldGhvZHM6IGBzYXkoKWAsIGBzaW5n
        KClgLCBhbmQgYGRhbmNlKClgLgoKICAgIEBtZXRob2QgZXh0ZW5kCiAgICBA
        c3RhdGljCgogICAgQHBhcmFtIHtFbWJlci5NaXhpbn0gW21peGluc10qIE9u
        ZSBvciBtb3JlIEVtYmVyLk1peGluIGNsYXNzZXMKICAgIEBwYXJhbSB7T2Jq
        ZWN0fSBbYXJndW1lbnRzXSogT2JqZWN0IGNvbnRhaW5pbmcgdmFsdWVzIHRv
        IHVzZSB3aXRoaW4gdGhlIG5ldyBjbGFzcwogICovCiAgZXh0ZW5kOiBmdW5j
        dGlvbigpIHsKICAgIHZhciBDbGFzcyA9IG1ha2VDdG9yKCksIHByb3RvOwog
        ICAgQ2xhc3MuQ2xhc3NNaXhpbiA9IE1peGluLmNyZWF0ZSh0aGlzLkNsYXNz
        TWl4aW4pOwogICAgQ2xhc3MuUHJvdG90eXBlTWl4aW4gPSBNaXhpbi5jcmVh
        dGUodGhpcy5Qcm90b3R5cGVNaXhpbik7CgogICAgQ2xhc3MuQ2xhc3NNaXhp
        bi5vd25lckNvbnN0cnVjdG9yID0gQ2xhc3M7CiAgICBDbGFzcy5Qcm90b3R5
        cGVNaXhpbi5vd25lckNvbnN0cnVjdG9yID0gQ2xhc3M7CgogICAgcmVvcGVu
        LmFwcGx5KENsYXNzLlByb3RvdHlwZU1peGluLCBhcmd1bWVudHMpOwoKICAg
        IENsYXNzLnN1cGVyY2xhc3MgPSB0aGlzOwogICAgQ2xhc3MuX19zdXBlcl9f
        ICA9IHRoaXMucHJvdG90eXBlOwoKICAgIHByb3RvID0gQ2xhc3MucHJvdG90
        eXBlID0gb19jcmVhdGUodGhpcy5wcm90b3R5cGUpOwogICAgcHJvdG8uY29u
        c3RydWN0b3IgPSBDbGFzczsKICAgIGdlbmVyYXRlR3VpZChwcm90byk7CiAg
        ICBtZXRhKHByb3RvKS5wcm90byA9IHByb3RvOyAvLyB0aGlzIHdpbGwgZGlz
        YWJsZSBvYnNlcnZlcnMgb24gcHJvdG90eXBlCgogICAgQ2xhc3MuQ2xhc3NN
        aXhpbi5hcHBseShDbGFzcyk7CiAgICByZXR1cm4gQ2xhc3M7CiAgfSwKCiAg
        LyoqCiAgICBFcXVpdmFsZW50IHRvIGRvaW5nIGBleHRlbmQoYXJndW1lbnRz
        KS5jcmVhdGUoKWAuCiAgICBJZiBwb3NzaWJsZSB1c2UgdGhlIG5vcm1hbCBg
        Y3JlYXRlYCBtZXRob2QgaW5zdGVhZC4KCiAgICBAbWV0aG9kIGNyZWF0ZVdp
        dGhNaXhpbnMKICAgIEBzdGF0aWMKICAgIEBwYXJhbSBbYXJndW1lbnRzXSoK
        ICAqLwogIGNyZWF0ZVdpdGhNaXhpbnM6IGZ1bmN0aW9uKCkgewogICAgdmFy
        IEMgPSB0aGlzOwogICAgaWYgKGFyZ3VtZW50cy5sZW5ndGg+MCkgeyB0aGlz
        Ll9pbml0TWl4aW5zKGFyZ3VtZW50cyk7IH0KICAgIHJldHVybiBuZXcgQygp
        OwogIH0sCgogIC8qKgogICAgQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiBhIGNs
        YXNzLiBBY2NlcHRzIGVpdGhlciBubyBhcmd1bWVudHMsIG9yIGFuIG9iamVj
        dAogICAgY29udGFpbmluZyB2YWx1ZXMgdG8gaW5pdGlhbGl6ZSB0aGUgbmV3
        bHkgaW5zdGFudGlhdGVkIG9iamVjdCB3aXRoLgoKICAgIGBgYGphdmFzY3Jp
        cHQKICAgIEFwcC5QZXJzb24gPSBFbWJlci5PYmplY3QuZXh0ZW5kKHsKICAg
        ICAgaGVsbG9Xb3JsZDogZnVuY3Rpb24oKSB7CiAgICAgICAgYWxlcnQoIkhp
        LCBteSBuYW1lIGlzICIgKyB0aGlzLmdldCgnbmFtZScpKTsKICAgICAgfQog
        ICAgfSk7CgogICAgdmFyIHRvbSA9IEFwcC5QZXJzb24uY3JlYXRlKHsKICAg
        ICAgbmFtZTogJ1RvbSBEYWxlJwogICAgfSk7CgogICAgdG9tLmhlbGxvV29y
        bGQoKTsgLy8gYWxlcnRzICJIaSwgbXkgbmFtZSBpcyBUb20gRGFsZSIuCiAg
        ICBgYGAKCiAgICBgY3JlYXRlYCB3aWxsIGNhbGwgdGhlIGBpbml0YCBmdW5j
        dGlvbiBpZiBkZWZpbmVkIGR1cmluZwogICAgYEVtYmVyLkFueU9iamVjdC5l
        eHRlbmRgCgogICAgSWYgbm8gYXJndW1lbnRzIGFyZSBwYXNzZWQgdG8gYGNy
        ZWF0ZWAsIGl0IHdpbGwgbm90IHNldCB2YWx1ZXMgdG8gdGhlIG5ldwogICAg
        aW5zdGFuY2UgZHVyaW5nIGluaXRpYWxpemF0aW9uOgoKICAgIGBgYGphdmFz
        Y3JpcHQKICAgIHZhciBub05hbWUgPSBBcHAuUGVyc29uLmNyZWF0ZSgpOwog
        ICAgbm9OYW1lLmhlbGxvV29ybGQoKTsgLy8gYWxlcnRzIHVuZGVmaW5lZAog
        ICAgYGBgCgogICAgTk9URTogRm9yIHBlcmZvcm1hbmNlIHJlYXNvbnMsIHlv
        dSBjYW5ub3QgZGVjbGFyZSBtZXRob2RzIG9yIGNvbXB1dGVkCiAgICBwcm9w
        ZXJ0aWVzIGR1cmluZyBgY3JlYXRlYC4gWW91IHNob3VsZCBpbnN0ZWFkIGRl
        Y2xhcmUgbWV0aG9kcyBhbmQgY29tcHV0ZWQKICAgIHByb3BlcnRpZXMgd2hl
        biB1c2luZyBgZXh0ZW5kYCBvciB1c2UgdGhlIGBjcmVhdGVXaXRoTWl4aW5z
        YCBzaG9ydGhhbmQuCgogICAgQG1ldGhvZCBjcmVhdGUKICAgIEBzdGF0aWMK
        ICAgIEBwYXJhbSBbYXJndW1lbnRzXSoKICAqLwogIGNyZWF0ZTogZnVuY3Rp
        b24oKSB7CiAgICB2YXIgQyA9IHRoaXM7CiAgICBpZiAoYXJndW1lbnRzLmxl
        bmd0aD4wKSB7IHRoaXMuX2luaXRQcm9wZXJ0aWVzKGFyZ3VtZW50cyk7IH0K
        ICAgIHJldHVybiBuZXcgQygpOwogIH0sCgogIC8qKgogICAgQXVnbWVudHMg
        YSBjb25zdHJ1Y3RvcidzIHByb3RvdHlwZSB3aXRoIGFkZGl0aW9uYWwKICAg
        IHByb3BlcnRpZXMgYW5kIGZ1bmN0aW9uczoKCiAgICBgYGBqYXZhc2NyaXB0
        CiAgICBNeU9iamVjdCA9IEVtYmVyLk9iamVjdC5leHRlbmQoewogICAgICBu
        YW1lOiAnYW4gb2JqZWN0JwogICAgfSk7CgogICAgbyA9IE15T2JqZWN0LmNy
        ZWF0ZSgpOwogICAgby5nZXQoJ25hbWUnKTsgLy8gJ2FuIG9iamVjdCcKCiAg
        ICBNeU9iamVjdC5yZW9wZW4oewogICAgICBzYXk6IGZ1bmN0aW9uKG1zZyl7
        CiAgICAgICAgY29uc29sZS5sb2cobXNnKTsKICAgICAgfQogICAgfSkKCiAg
        ICBvMiA9IE15T2JqZWN0LmNyZWF0ZSgpOwogICAgbzIuc2F5KCJoZWxsbyIp
        OyAvLyBsb2dzICJoZWxsbyIKCiAgICBvLnNheSgiZ29vZGJ5ZSIpOyAvLyBs
        b2dzICJnb29kYnllIgogICAgYGBgCgogICAgVG8gYWRkIGZ1bmN0aW9ucyBh
        bmQgcHJvcGVydGllcyB0byB0aGUgY29uc3RydWN0b3IgaXRzZWxmLAogICAg
        c2VlIGByZW9wZW5DbGFzc2AKCiAgICBAbWV0aG9kIHJlb3BlbgogICovCiAg
        cmVvcGVuOiBmdW5jdGlvbigpIHsKICAgIHRoaXMud2lsbFJlb3BlbigpOwog
        ICAgcmVvcGVuLmFwcGx5KHRoaXMuUHJvdG90eXBlTWl4aW4sIGFyZ3VtZW50
        cyk7CiAgICByZXR1cm4gdGhpczsKICB9LAoKICAvKioKICAgIEF1Z21lbnRz
        IGEgY29uc3RydWN0b3IncyBvd24gcHJvcGVydGllcyBhbmQgZnVuY3Rpb25z
        OgoKICAgIGBgYGphdmFzY3JpcHQKICAgIE15T2JqZWN0ID0gRW1iZXIuT2Jq
        ZWN0LmV4dGVuZCh7CiAgICAgIG5hbWU6ICdhbiBvYmplY3QnCiAgICB9KTsK
        CiAgICBNeU9iamVjdC5yZW9wZW5DbGFzcyh7CiAgICAgIGNhbkJ1aWxkOiBm
        YWxzZQogICAgfSk7CgogICAgTXlPYmplY3QuY2FuQnVpbGQ7IC8vIGZhbHNl
        CiAgICBvID0gTXlPYmplY3QuY3JlYXRlKCk7CiAgICBgYGAKCiAgICBJbiBv
        dGhlciB3b3JkcywgdGhpcyBjcmVhdGVzIHN0YXRpYyBwcm9wZXJ0aWVzIGFu
        ZCBmdW5jdGlvbnMgZm9yIHRoZSBjbGFzcy4gVGhlc2UgYXJlIG9ubHkgYXZh
        aWxhYmxlIG9uIHRoZSBjbGFzcwogICAgYW5kIG5vdCBvbiBhbnkgaW5zdGFu
        Y2Ugb2YgdGhhdCBjbGFzcy4KCiAgICBgYGBqYXZhc2NyaXB0CiAgICBBcHAu
        UGVyc29uID0gRW1iZXIuT2JqZWN0LmV4dGVuZCh7CiAgICAgIG5hbWUgOiAi
        IiwKICAgICAgc2F5SGVsbG8gOiBmdW5jdGlvbigpewogICAgICAgIGFsZXJ0
        KCJIZWxsby4gTXkgbmFtZSBpcyAiICsgdGhpcy5nZXQoJ25hbWUnKSk7CiAg
        ICAgIH0KICAgIH0pOwoKICAgIEFwcC5QZXJzb24ucmVvcGVuQ2xhc3Moewog
        ICAgICBzcGVjaWVzIDogIkhvbW8gc2FwaWVucyIsCiAgICAgIGNyZWF0ZVBl
        cnNvbjogZnVuY3Rpb24obmV3UGVyc29uc05hbWUpewogICAgICAgIHJldHVy
        biBBcHAuUGVyc29uLmNyZWF0ZSh7CiAgICAgICAgICBuYW1lOm5ld1BlcnNv
        bnNOYW1lCiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0pOwoKICAgIHZhciB0
        b20gPSBBcHAuUGVyc29uLmNyZWF0ZSh7CiAgICAgIG5hbWUgOiAiVG9tIERh
        bGUiCiAgICB9KTsKICAgIHZhciB5ZWh1ZGEgPSBBcHAuUGVyc29uLmNyZWF0
        ZVBlcnNvbigiWWVodWRhIEthdHoiKTsKCiAgICB0b20uc2F5SGVsbG8oKTsg
        Ly8gIkhlbGxvLiBNeSBuYW1lIGlzIFRvbSBEYWxlIgogICAgeWVodWRhLnNh
        eUhlbGxvKCk7IC8vICJIZWxsby4gTXkgbmFtZSBpcyBZZWh1ZGEgS2F0eiIK
        ICAgIGFsZXJ0KEFwcC5QZXJzb24uc3BlY2llcyk7IC8vICJIb21vIHNhcGll
        bnMiCiAgICBgYGAKCiAgICBOb3RlIHRoYXQgYHNwZWNpZXNgIGFuZCBgY3Jl
        YXRlUGVyc29uYCBhcmUgKm5vdCogdmFsaWQgb24gdGhlIGB0b21gIGFuZCBg
        eWVodWRhYAogICAgdmFyaWFibGVzLiBUaGV5IGFyZSBvbmx5IHZhbGlkIG9u
        IGBBcHAuUGVyc29uYC4KCiAgICBUbyBhZGQgZnVuY3Rpb25zIGFuZCBwcm9w
        ZXJ0aWVzIHRvIGluc3RhbmNlcyBvZgogICAgYSBjb25zdHJ1Y3RvciBieSBl
        eHRlbmRpbmcgdGhlIGNvbnN0cnVjdG9yJ3MgcHJvdG90eXBlCiAgICBzZWUg
        YHJlb3BlbmAKCiAgICBAbWV0aG9kIHJlb3BlbkNsYXNzCiAgKi8KICByZW9w
        ZW5DbGFzczogZnVuY3Rpb24oKSB7CiAgICByZW9wZW4uYXBwbHkodGhpcy5D
        bGFzc01peGluLCBhcmd1bWVudHMpOwogICAgYXBwbHlNaXhpbih0aGlzLCBh
        cmd1bWVudHMsIGZhbHNlKTsKICAgIHJldHVybiB0aGlzOwogIH0sCgogIGRl
        dGVjdDogZnVuY3Rpb24ob2JqKSB7CiAgICBpZiAoJ2Z1bmN0aW9uJyAhPT0g
        dHlwZW9mIG9iaikgeyByZXR1cm4gZmFsc2U7IH0KICAgIHdoaWxlKG9iaikg
        ewogICAgICBpZiAob2JqPT09dGhpcykgeyByZXR1cm4gdHJ1ZTsgfQogICAg
        ICBvYmogPSBvYmouc3VwZXJjbGFzczsKICAgIH0KICAgIHJldHVybiBmYWxz
        ZTsKICB9LAoKICBkZXRlY3RJbnN0YW5jZTogZnVuY3Rpb24ob2JqKSB7CiAg
        ICByZXR1cm4gb2JqIGluc3RhbmNlb2YgdGhpczsKICB9LAoKICAvKioKICAg
        IEluIHNvbWUgY2FzZXMsIHlvdSBtYXkgd2FudCB0byBhbm5vdGF0ZSBjb21w
        dXRlZCBwcm9wZXJ0aWVzIHdpdGggYWRkaXRpb25hbAogICAgbWV0YWRhdGEg
        YWJvdXQgaG93IHRoZXkgZnVuY3Rpb24gb3Igd2hhdCB2YWx1ZXMgdGhleSBv
        cGVyYXRlIG9uLiBGb3IKICAgIGV4YW1wbGUsIGNvbXB1dGVkIHByb3BlcnR5
        IGZ1bmN0aW9ucyBtYXkgY2xvc2Ugb3ZlciB2YXJpYWJsZXMgdGhhdCBhcmUg
        dGhlbgogICAgbm8gbG9uZ2VyIGF2YWlsYWJsZSBmb3IgaW50cm9zcGVjdGlv
        bi4KCiAgICBZb3UgY2FuIHBhc3MgYSBoYXNoIG9mIHRoZXNlIHZhbHVlcyB0
        byBhIGNvbXB1dGVkIHByb3BlcnR5IGxpa2UgdGhpczoKCiAgICBgYGBqYXZh
        c2NyaXB0CiAgICBwZXJzb246IGZ1bmN0aW9uKCkgewogICAgICB2YXIgcGVy
        c29uSWQgPSB0aGlzLmdldCgncGVyc29uSWQnKTsKICAgICAgcmV0dXJuIEFw
        cC5QZXJzb24uY3JlYXRlKHsgaWQ6IHBlcnNvbklkIH0pOwogICAgfS5wcm9w
        ZXJ0eSgpLm1ldGEoeyB0eXBlOiBBcHAuUGVyc29uIH0pCiAgICBgYGAKCiAg
        ICBPbmNlIHlvdSd2ZSBkb25lIHRoaXMsIHlvdSBjYW4gcmV0cmlldmUgdGhl
        IHZhbHVlcyBzYXZlZCB0byB0aGUgY29tcHV0ZWQKICAgIHByb3BlcnR5IGZy
        b20geW91ciBjbGFzcyBsaWtlIHRoaXM6CgogICAgYGBgamF2YXNjcmlwdAog
        ICAgTXlDbGFzcy5tZXRhRm9yUHJvcGVydHkoJ3BlcnNvbicpOwogICAgYGBg
        CgogICAgVGhpcyB3aWxsIHJldHVybiB0aGUgb3JpZ2luYWwgaGFzaCB0aGF0
        IHdhcyBwYXNzZWQgdG8gYG1ldGEoKWAuCgogICAgQG1ldGhvZCBtZXRhRm9y
        UHJvcGVydHkKICAgIEBwYXJhbSBrZXkge1N0cmluZ30gcHJvcGVydHkgbmFt
        ZQogICovCiAgbWV0YUZvclByb3BlcnR5OiBmdW5jdGlvbihrZXkpIHsKICAg
        IHZhciBtZXRhID0gdGhpcy5wcm90bygpW01FVEFfS0VZXSwKICAgICAgICBk
        ZXNjID0gbWV0YSAmJiBtZXRhLmRlc2NzW2tleV07CgogICAgRW1iZXIuYXNz
        ZXJ0KCJtZXRhRm9yUHJvcGVydHkoKSBjb3VsZCBub3QgZmluZCBhIGNvbXB1
        dGVkIHByb3BlcnR5IHdpdGgga2V5ICciK2tleSsiJy4iLCAhIWRlc2MgJiYg
        ZGVzYyBpbnN0YW5jZW9mIEVtYmVyLkNvbXB1dGVkUHJvcGVydHkpOwogICAg
        cmV0dXJuIGRlc2MuX21ldGEgfHwge307CiAgfSwKCiAgLyoqCiAgICBJdGVy
        YXRlIG92ZXIgZWFjaCBjb21wdXRlZCBwcm9wZXJ0eSBmb3IgdGhlIGNsYXNz
        LCBwYXNzaW5nIGl0cyBuYW1lCiAgICBhbmQgYW55IGFzc29jaWF0ZWQgbWV0
        YWRhdGEgKHNlZSBgbWV0YUZvclByb3BlcnR5YCkgdG8gdGhlIGNhbGxiYWNr
        LgoKICAgIEBtZXRob2QgZWFjaENvbXB1dGVkUHJvcGVydHkKICAgIEBwYXJh
        bSB7RnVuY3Rpb259IGNhbGxiYWNrCiAgICBAcGFyYW0ge09iamVjdH0gYmlu
        ZGluZwogICovCiAgZWFjaENvbXB1dGVkUHJvcGVydHk6IGZ1bmN0aW9uKGNh
        bGxiYWNrLCBiaW5kaW5nKSB7CiAgICB2YXIgcHJvdG8gPSB0aGlzLnByb3Rv
        KCksCiAgICAgICAgZGVzY3MgPSBtZXRhKHByb3RvKS5kZXNjcywKICAgICAg
        ICBlbXB0eSA9IHt9LAogICAgICAgIHByb3BlcnR5OwoKICAgIGZvciAodmFy
        IG5hbWUgaW4gZGVzY3MpIHsKICAgICAgcHJvcGVydHkgPSBkZXNjc1tuYW1l
        XTsKCiAgICAgIGlmIChwcm9wZXJ0eSBpbnN0YW5jZW9mIEVtYmVyLkNvbXB1
        dGVkUHJvcGVydHkpIHsKICAgICAgICBjYWxsYmFjay5jYWxsKGJpbmRpbmcg
        fHwgdGhpcywgbmFtZSwgcHJvcGVydHkuX21ldGEgfHwgZW1wdHkpOwogICAg
        ICB9CiAgICB9CiAgfQoKfSk7CgpDbGFzc01peGluLm93bmVyQ29uc3RydWN0
        b3IgPSBDb3JlT2JqZWN0OwoKaWYgKEVtYmVyLmNvbmZpZy5vdmVycmlkZUNs
        YXNzTWl4aW4pIHsKICBFbWJlci5jb25maWcub3ZlcnJpZGVDbGFzc01peGlu
        KENsYXNzTWl4aW4pOwp9CgpDb3JlT2JqZWN0LkNsYXNzTWl4aW4gPSBDbGFz
        c01peGluOwpDbGFzc01peGluLmFwcGx5KENvcmVPYmplY3QpOwoKRW1iZXIu
        Q29yZU9iamVjdCA9IENvcmVPYmplY3Q7Cgp9KSgpOwoKCgooZnVuY3Rpb24o
        KSB7Ci8qKgpAbW9kdWxlIGVtYmVyCkBzdWJtb2R1bGUgZW1iZXItcnVudGlt
        ZQoqLwoKLyoqCiAgYEVtYmVyLk9iamVjdGAgaXMgdGhlIG1haW4gYmFzZSBj
        bGFzcyBmb3IgYWxsIEVtYmVyIG9iamVjdHMuIEl0IGlzIGEgc3ViY2xhc3MK
        ICBvZiBgRW1iZXIuQ29yZU9iamVjdGAgd2l0aCB0aGUgYEVtYmVyLk9ic2Vy
        dmFibGVgIG1peGluIGFwcGxpZWQuIEZvciBkZXRhaWxzLAogIHNlZSB0aGUg
        ZG9jdW1lbnRhdGlvbiBmb3IgZWFjaCBvZiB0aGVzZS4KCiAgQGNsYXNzIE9i
        amVjdAogIEBuYW1lc3BhY2UgRW1iZXIKICBAZXh0ZW5kcyBFbWJlci5Db3Jl
        T2JqZWN0CiAgQHVzZXMgRW1iZXIuT2JzZXJ2YWJsZQoqLwpFbWJlci5PYmpl
        Y3QgPSBFbWJlci5Db3JlT2JqZWN0LmV4dGVuZChFbWJlci5PYnNlcnZhYmxl
        KTsKRW1iZXIuT2JqZWN0LnRvU3RyaW5nID0gZnVuY3Rpb24oKSB7IHJldHVy
        biAiRW1iZXIuT2JqZWN0IjsgfTsKCn0pKCk7CgoKCihmdW5jdGlvbigpIHsK
        LyoqCkBtb2R1bGUgZW1iZXIKQHN1Ym1vZHVsZSBlbWJlci1ydW50aW1lCiov
        Cgp2YXIgZ2V0ID0gRW1iZXIuZ2V0LCBpbmRleE9mID0gRW1iZXIuQXJyYXlQ
        b2x5ZmlsbHMuaW5kZXhPZjsKCi8qKgogIEEgTmFtZXNwYWNlIGlzIGFuIG9i
        amVjdCB1c3VhbGx5IHVzZWQgdG8gY29udGFpbiBvdGhlciBvYmplY3RzIG9y
        IG1ldGhvZHMKICBzdWNoIGFzIGFuIGFwcGxpY2F0aW9uIG9yIGZyYW1ld29y
        ay4gQ3JlYXRlIGEgbmFtZXNwYWNlIGFueXRpbWUgeW91IHdhbnQKICB0byBk
        ZWZpbmUgb25lIG9mIHRoZXNlIG5ldyBjb250YWluZXJzLgoKICAjIEV4YW1w
        bGUgVXNhZ2UKCiAgYGBgamF2YXNjcmlwdAogIE15RnJhbWV3b3JrID0gRW1i
        ZXIuTmFtZXNwYWNlLmNyZWF0ZSh7CiAgICBWRVJTSU9OOiAnMS4wLjAnCiAg
        fSk7CiAgYGBgCgogIEBjbGFzcyBOYW1lc3BhY2UKICBAbmFtZXNwYWNlIEVt
        YmVyCiAgQGV4dGVuZHMgRW1iZXIuT2JqZWN0CiovCnZhciBOYW1lc3BhY2Ug
        PSBFbWJlci5OYW1lc3BhY2UgPSBFbWJlci5PYmplY3QuZXh0ZW5kKHsKICBp
        c05hbWVzcGFjZTogdHJ1ZSwKCiAgaW5pdDogZnVuY3Rpb24oKSB7CiAgICBF
        bWJlci5OYW1lc3BhY2UuTkFNRVNQQUNFUy5wdXNoKHRoaXMpOwogICAgRW1i
        ZXIuTmFtZXNwYWNlLlBST0NFU1NFRCA9IGZhbHNlOwogIH0sCgogIHRvU3Ry
        aW5nOiBmdW5jdGlvbigpIHsKICAgIHZhciBuYW1lID0gZ2V0KHRoaXMsICdu
        YW1lJyk7CiAgICBpZiAobmFtZSkgeyByZXR1cm4gbmFtZTsgfQoKICAgIGZp
        bmROYW1lc3BhY2VzKCk7CiAgICByZXR1cm4gdGhpc1tFbWJlci5HVUlEX0tF
        WSsnX25hbWUnXTsKICB9LAoKICBuYW1lQ2xhc3NlczogZnVuY3Rpb24oKSB7
        CiAgICBwcm9jZXNzTmFtZXNwYWNlKFt0aGlzLnRvU3RyaW5nKCldLCB0aGlz
        LCB7fSk7CiAgfSwKCiAgZGVzdHJveTogZnVuY3Rpb24oKSB7CiAgICB2YXIg
        bmFtZXNwYWNlcyA9IEVtYmVyLk5hbWVzcGFjZS5OQU1FU1BBQ0VTOwogICAg
        RW1iZXIubG9va3VwW3RoaXMudG9TdHJpbmcoKV0gPSB1bmRlZmluZWQ7CiAg
        ICBuYW1lc3BhY2VzLnNwbGljZShpbmRleE9mLmNhbGwobmFtZXNwYWNlcywg
        dGhpcyksIDEpOwogICAgdGhpcy5fc3VwZXIoKTsKICB9Cn0pOwoKTmFtZXNw
        YWNlLnJlb3BlbkNsYXNzKHsKICBOQU1FU1BBQ0VTOiBbRW1iZXJdLAogIE5B
        TUVTUEFDRVNfQllfSUQ6IHt9LAogIFBST0NFU1NFRDogZmFsc2UsCiAgcHJv
        Y2Vzc0FsbDogcHJvY2Vzc0FsbE5hbWVzcGFjZXMsCiAgYnlOYW1lOiBmdW5j
        dGlvbihuYW1lKSB7CiAgICBpZiAoIUVtYmVyLkJPT1RFRCkgewogICAgICBw
        cm9jZXNzQWxsTmFtZXNwYWNlcygpOwogICAgfQoKICAgIHJldHVybiBOQU1F
        U1BBQ0VTX0JZX0lEW25hbWVdOwogIH0KfSk7Cgp2YXIgTkFNRVNQQUNFU19C
        WV9JRCA9IE5hbWVzcGFjZS5OQU1FU1BBQ0VTX0JZX0lEOwoKdmFyIGhhc093
        blByb3AgPSAoe30pLmhhc093blByb3BlcnR5LAogICAgZ3VpZEZvciA9IEVt
        YmVyLmd1aWRGb3I7CgpmdW5jdGlvbiBwcm9jZXNzTmFtZXNwYWNlKHBhdGhz
        LCByb290LCBzZWVuKSB7CiAgdmFyIGlkeCA9IHBhdGhzLmxlbmd0aDsKCiAg
        TkFNRVNQQUNFU19CWV9JRFtwYXRocy5qb2luKCcuJyldID0gcm9vdDsKCiAg
        Ly8gTG9vcCBvdmVyIGFsbCBvZiB0aGUga2V5cyBpbiB0aGUgbmFtZXNwYWNl
        LCBsb29raW5nIGZvciBjbGFzc2VzCiAgZm9yKHZhciBrZXkgaW4gcm9vdCkg
        ewogICAgaWYgKCFoYXNPd25Qcm9wLmNhbGwocm9vdCwga2V5KSkgeyBjb250
        aW51ZTsgfQogICAgdmFyIG9iaiA9IHJvb3Rba2V5XTsKCiAgICAvLyBJZiB3
        ZSBhcmUgcHJvY2Vzc2luZyB0aGUgYEVtYmVyYCBuYW1lc3BhY2UsIGZvciBl
        eGFtcGxlLCB0aGUKICAgIC8vIGBwYXRoc2Agd2lsbCBzdGFydCB3aXRoIGBb
        IkVtYmVyIl1gLiBFdmVyeSBpdGVyYXRpb24gdGhyb3VnaAogICAgLy8gdGhl
        IGxvb3Agd2lsbCB1cGRhdGUgdGhlICoqc2Vjb25kKiogZWxlbWVudCBvZiB0
        aGlzIGxpc3Qgd2l0aAogICAgLy8gdGhlIGtleSwgc28gcHJvY2Vzc2luZyBg
        RW1iZXIuVmlld2Agd2lsbCBtYWtlIHRoZSBBcnJheQogICAgLy8gYFsnRW1i
        ZXInLCAnVmlldyddYC4KICAgIHBhdGhzW2lkeF0gPSBrZXk7CgogICAgLy8g
        SWYgd2UgaGF2ZSBmb3VuZCBhbiB1bnByb2Nlc3NlZCBjbGFzcwogICAgaWYg
        KG9iaiAmJiBvYmoudG9TdHJpbmcgPT09IGNsYXNzVG9TdHJpbmcpIHsKICAg
        ICAgLy8gUmVwbGFjZSB0aGUgY2xhc3MnIGB0b1N0cmluZ2Agd2l0aCB0aGUg
        ZG90LXNlcGFyYXRlZCBwYXRoCiAgICAgIC8vIGFuZCBzZXQgaXRzIGBOQU1F
        X0tFWWAKICAgICAgb2JqLnRvU3RyaW5nID0gbWFrZVRvU3RyaW5nKHBhdGhz
        LmpvaW4oJy4nKSk7CiAgICAgIG9ialtOQU1FX0tFWV0gPSBwYXRocy5qb2lu
        KCcuJyk7CgogICAgLy8gU3VwcG9ydCBuZXN0ZWQgbmFtZXNwYWNlcwogICAg
        fSBlbHNlIGlmIChvYmogJiYgb2JqLmlzTmFtZXNwYWNlKSB7CiAgICAgIC8v
        IFNraXAgYWxpYXNlZCBuYW1lc3BhY2VzCiAgICAgIGlmIChzZWVuW2d1aWRG
        b3Iob2JqKV0pIHsgY29udGludWU7IH0KICAgICAgc2VlbltndWlkRm9yKG9i
        aildID0gdHJ1ZTsKCiAgICAgIC8vIFByb2Nlc3MgdGhlIGNoaWxkIG5hbWVz
        cGFjZQogICAgICBwcm9jZXNzTmFtZXNwYWNlKHBhdGhzLCBvYmosIHNlZW4p
        OwogICAgfQogIH0KCiAgcGF0aHMubGVuZ3RoID0gaWR4OyAvLyBjdXQgb3V0
        IGxhc3QgaXRlbQp9CgpmdW5jdGlvbiBmaW5kTmFtZXNwYWNlcygpIHsKICB2
        YXIgTmFtZXNwYWNlID0gRW1iZXIuTmFtZXNwYWNlLCBsb29rdXAgPSBFbWJl
        ci5sb29rdXAsIG9iaiwgaXNOYW1lc3BhY2U7CgogIGlmIChOYW1lc3BhY2Uu
        UFJPQ0VTU0VEKSB7IHJldHVybjsgfQoKICBmb3IgKHZhciBwcm9wIGluIGxv
        b2t1cCkgewogICAgLy8gVGhlc2UgZG9uJ3QgcmFpc2UgZXhjZXB0aW9ucyBi
        dXQgY2FuIGNhdXNlIHdhcm5pbmdzCiAgICBpZiAocHJvcCA9PT0gInBhcmVu
        dCIgfHwgcHJvcCA9PT0gInRvcCIgfHwgcHJvcCA9PT0gImZyYW1lRWxlbWVu
        dCIgfHwgcHJvcCA9PT0gIndlYmtpdFN0b3JhZ2VJbmZvIikgeyBjb250aW51
        ZTsgfQoKICAgIC8vICBnZXQod2luZG93Lmdsb2JhbFN0b3JhZ2UsICdpc05h
        bWVzcGFjZScpIHdvdWxkIHRyeSB0byByZWFkIHRoZSBzdG9yYWdlIGZvciBk
        b21haW4gaXNOYW1lc3BhY2UgYW5kIGNhdXNlIGV4Y2VwdGlvbiBpbiBGaXJl
        Zm94LgogICAgLy8gZ2xvYmFsU3RvcmFnZSBpcyBhIHN0b3JhZ2Ugb2Jzb2xl
        dGVkIGJ5IHRoZSBXaGF0V0cgc3RvcmFnZSBzcGVjaWZpY2F0aW9uLiBTZWUg
        aHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4vRE9NL1N0b3JhZ2Uj
        Z2xvYmFsU3RvcmFnZQogICAgaWYgKHByb3AgPT09ICJnbG9iYWxTdG9yYWdl
        IiAmJiBsb29rdXAuU3RvcmFnZUxpc3QgJiYgbG9va3VwLmdsb2JhbFN0b3Jh
        Z2UgaW5zdGFuY2VvZiBsb29rdXAuU3RvcmFnZUxpc3QpIHsgY29udGludWU7
        IH0KICAgIC8vIFVuZm9ydHVuYXRlbHksIHNvbWUgdmVyc2lvbnMgb2YgSUUg
        ZG9uJ3Qgc3VwcG9ydCB3aW5kb3cuaGFzT3duUHJvcGVydHkKICAgIGlmIChs
        b29rdXAuaGFzT3duUHJvcGVydHkgJiYgIWxvb2t1cC5oYXNPd25Qcm9wZXJ0
        eShwcm9wKSkgeyBjb250aW51ZTsgfQoKICAgIC8vIEF0IHRpbWVzIHdlIGFy
        ZSBub3QgYWxsb3dlZCB0byBhY2Nlc3MgY2VydGFpbiBwcm9wZXJ0aWVzIGZv
        ciBzZWN1cml0eSByZWFzb25zLgogICAgLy8gVGhlcmUgYXJlIGFsc28gdGlt
        ZXMgd2hlcmUgZXZlbiBpZiB3ZSBjYW4gYWNjZXNzIHRoZW0sIHdlIGFyZSBu
        b3QgYWxsb3dlZCB0byBhY2Nlc3MgdGhlaXIgcHJvcGVydGllcy4KICAgIHRy
        eSB7CiAgICAgIG9iaiA9IEVtYmVyLmxvb2t1cFtwcm9wXTsKICAgICAgaXNO
        YW1lc3BhY2UgPSBvYmogJiYgb2JqLmlzTmFtZXNwYWNlOwogICAgfSBjYXRj
        aCAoZSkgewogICAgICBjb250aW51ZTsKICAgIH0KCiAgICBpZiAoaXNOYW1l
        c3BhY2UpIHsKICAgICAgRW1iZXIuZGVwcmVjYXRlKCJOYW1lc3BhY2VzIHNo
        b3VsZCBub3QgYmVnaW4gd2l0aCBsb3dlcmNhc2UuIiwgL15bQS1aXS8udGVz
        dChwcm9wKSk7CiAgICAgIG9ialtOQU1FX0tFWV0gPSBwcm9wOwogICAgfQog
        IH0KfQoKdmFyIE5BTUVfS0VZID0gRW1iZXIuTkFNRV9LRVkgPSBFbWJlci5H
        VUlEX0tFWSArICdfbmFtZSc7CgpmdW5jdGlvbiBzdXBlckNsYXNzU3RyaW5n
        KG1peGluKSB7CiAgdmFyIHN1cGVyY2xhc3MgPSBtaXhpbi5zdXBlcmNsYXNz
        OwogIGlmIChzdXBlcmNsYXNzKSB7CiAgICBpZiAoc3VwZXJjbGFzc1tOQU1F
        X0tFWV0pIHsgcmV0dXJuIHN1cGVyY2xhc3NbTkFNRV9LRVldOyB9CiAgICBl
        bHNlIHsgcmV0dXJuIHN1cGVyQ2xhc3NTdHJpbmcoc3VwZXJjbGFzcyk7IH0K
        ICB9IGVsc2UgewogICAgcmV0dXJuOwogIH0KfQoKZnVuY3Rpb24gY2xhc3NU
        b1N0cmluZygpIHsKICBpZiAoIUVtYmVyLkJPT1RFRCAmJiAhdGhpc1tOQU1F
        X0tFWV0pIHsKICAgIHByb2Nlc3NBbGxOYW1lc3BhY2VzKCk7CiAgfQoKICB2
        YXIgcmV0OwoKICBpZiAodGhpc1tOQU1FX0tFWV0pIHsKICAgIHJldCA9IHRo
        aXNbTkFNRV9LRVldOwogIH0gZWxzZSBpZiAodGhpcy5fdG9TdHJpbmcpIHsK
        ICAgIHJldCA9IHRoaXMuX3RvU3RyaW5nOyAKICB9IGVsc2UgewogICAgdmFy
        IHN0ciA9IHN1cGVyQ2xhc3NTdHJpbmcodGhpcyk7CiAgICBpZiAoc3RyKSB7
        CiAgICAgIHJldCA9ICIoc3ViY2xhc3Mgb2YgIiArIHN0ciArICIpIjsKICAg
        IH0gZWxzZSB7CiAgICAgIHJldCA9ICIodW5rbm93biBtaXhpbikiOwogICAg
        fQogICAgdGhpcy50b1N0cmluZyA9IG1ha2VUb1N0cmluZyhyZXQpOwogIH0K
        CiAgcmV0dXJuIHJldDsKfQoKZnVuY3Rpb24gcHJvY2Vzc0FsbE5hbWVzcGFj
        ZXMoKSB7CiAgdmFyIHVucHJvY2Vzc2VkTmFtZXNwYWNlcyA9ICFOYW1lc3Bh
        Y2UuUFJPQ0VTU0VELAogICAgICB1bnByb2Nlc3NlZE1peGlucyA9IEVtYmVy
        LmFueVVucHJvY2Vzc2VkTWl4aW5zOwoKICBpZiAodW5wcm9jZXNzZWROYW1l
        c3BhY2VzKSB7CiAgICBmaW5kTmFtZXNwYWNlcygpOwogICAgTmFtZXNwYWNl
        LlBST0NFU1NFRCA9IHRydWU7CiAgfQoKICBpZiAodW5wcm9jZXNzZWROYW1l
        c3BhY2VzIHx8IHVucHJvY2Vzc2VkTWl4aW5zKSB7CiAgICB2YXIgbmFtZXNw
        YWNlcyA9IE5hbWVzcGFjZS5OQU1FU1BBQ0VTLCBuYW1lc3BhY2U7CiAgICBm
        b3IgKHZhciBpPTAsIGw9bmFtZXNwYWNlcy5sZW5ndGg7IGk8bDsgaSsrKSB7
        CiAgICAgIG5hbWVzcGFjZSA9IG5hbWVzcGFjZXNbaV07CiAgICAgIHByb2Nl
        c3NOYW1lc3BhY2UoW25hbWVzcGFjZS50b1N0cmluZygpXSwgbmFtZXNwYWNl
        LCB7fSk7CiAgICB9CgogICAgRW1iZXIuYW55VW5wcm9jZXNzZWRNaXhpbnMg
        PSBmYWxzZTsKICB9Cn0KCmZ1bmN0aW9uIG1ha2VUb1N0cmluZyhyZXQpIHsK
        ICByZXR1cm4gZnVuY3Rpb24oKSB7IHJldHVybiByZXQ7IH07Cn0KCkVtYmVy
        Lk1peGluLnByb3RvdHlwZS50b1N0cmluZyA9IGNsYXNzVG9TdHJpbmc7Cgp9
        KSgpOwoKCgooZnVuY3Rpb24oKSB7Ci8qKgpAbW9kdWxlIGVtYmVyCkBzdWJt
        b2R1bGUgZW1iZXItcnVudGltZQoqLwoKdmFyIGdldCA9IEVtYmVyLmdldCwK
        ICAgIHNldCA9IEVtYmVyLnNldCwKICAgIGZtdCA9IEVtYmVyLlN0cmluZy5m
        bXQsCiAgICBhZGRCZWZvcmVPYnNlcnZlciA9IEVtYmVyLmFkZEJlZm9yZU9i
        c2VydmVyLAogICAgYWRkT2JzZXJ2ZXIgPSBFbWJlci5hZGRPYnNlcnZlciwK
        ICAgIHJlbW92ZUJlZm9yZU9ic2VydmVyID0gRW1iZXIucmVtb3ZlQmVmb3Jl
        T2JzZXJ2ZXIsCiAgICByZW1vdmVPYnNlcnZlciA9IEVtYmVyLnJlbW92ZU9i
        c2VydmVyLAogICAgcHJvcGVydHlXaWxsQ2hhbmdlID0gRW1iZXIucHJvcGVy
        dHlXaWxsQ2hhbmdlLAogICAgcHJvcGVydHlEaWRDaGFuZ2UgPSBFbWJlci5w
        cm9wZXJ0eURpZENoYW5nZSwKICAgIG1ldGEgPSBFbWJlci5tZXRhLAogICAg
        ZGVmaW5lUHJvcGVydHkgPSBFbWJlci5kZWZpbmVQcm9wZXJ0eTsKCmZ1bmN0
        aW9uIGNvbnRlbnRQcm9wZXJ0eVdpbGxDaGFuZ2UoY29udGVudCwgY29udGVu
        dEtleSkgewogIHZhciBrZXkgPSBjb250ZW50S2V5LnNsaWNlKDgpOyAvLyBy
        ZW1vdmUgImNvbnRlbnQuIgogIGlmIChrZXkgaW4gdGhpcykgeyByZXR1cm47
        IH0gIC8vIGlmIHNoYWRvd2VkIGluIHByb3h5CiAgcHJvcGVydHlXaWxsQ2hh
        bmdlKHRoaXMsIGtleSk7Cn0KCmZ1bmN0aW9uIGNvbnRlbnRQcm9wZXJ0eURp
        ZENoYW5nZShjb250ZW50LCBjb250ZW50S2V5KSB7CiAgdmFyIGtleSA9IGNv
        bnRlbnRLZXkuc2xpY2UoOCk7IC8vIHJlbW92ZSAiY29udGVudC4iCiAgaWYg
        KGtleSBpbiB0aGlzKSB7IHJldHVybjsgfSAvLyBpZiBzaGFkb3dlZCBpbiBw
        cm94eQogIHByb3BlcnR5RGlkQ2hhbmdlKHRoaXMsIGtleSk7Cn0KCi8qKgog
        IGBFbWJlci5PYmplY3RQcm94eWAgZm9yd2FyZHMgYWxsIHByb3BlcnRpZXMg
        bm90IGRlZmluZWQgYnkgdGhlIHByb3h5IGl0c2VsZgogIHRvIGEgcHJveGll
        ZCBgY29udGVudGAgb2JqZWN0LgoKICBgYGBqYXZhc2NyaXB0CiAgb2JqZWN0
        ID0gRW1iZXIuT2JqZWN0LmNyZWF0ZSh7CiAgICBuYW1lOiAnRm9vJwogIH0p
        OwoKICBwcm94eSA9IEVtYmVyLk9iamVjdFByb3h5LmNyZWF0ZSh7CiAgICBj
        b250ZW50OiBvYmplY3QKICB9KTsKCiAgLy8gQWNjZXNzIGFuZCBjaGFuZ2Ug
        ZXhpc3RpbmcgcHJvcGVydGllcwogIHByb3h5LmdldCgnbmFtZScpICAgICAg
        ICAgIC8vICdGb28nCiAgcHJveHkuc2V0KCduYW1lJywgJ0JhcicpOwogIG9i
        amVjdC5nZXQoJ25hbWUnKSAgICAgICAgIC8vICdCYXInCgogIC8vIENyZWF0
        ZSBuZXcgJ2Rlc2NyaXB0aW9uJyBwcm9wZXJ0eSBvbiBgb2JqZWN0YAogIHBy
        b3h5LnNldCgnZGVzY3JpcHRpb24nLCAnRm9vIGlzIGEgd2hpemJvbyBiYXon
        KTsKICBvYmplY3QuZ2V0KCdkZXNjcmlwdGlvbicpICAvLyAnRm9vIGlzIGEg
        d2hpemJvbyBiYXonCiAgYGBgCgogIFdoaWxlIGBjb250ZW50YCBpcyB1bnNl
        dCwgc2V0dGluZyBhIHByb3BlcnR5IHRvIGJlIGRlbGVnYXRlZCB3aWxsIHRo
        cm93IGFuCiAgRXJyb3IuCgogIGBgYGphdmFzY3JpcHQKICBwcm94eSA9IEVt
        YmVyLk9iamVjdFByb3h5LmNyZWF0ZSh7CiAgICBjb250ZW50OiBudWxsLAog
        ICAgZmxhZzogbnVsbAogIH0pOwogIHByb3h5LnNldCgnZmxhZycsIHRydWUp
        OwogIHByb3h5LmdldCgnZmxhZycpOyAgICAgICAgIC8vIHRydWUKICBwcm94
        eS5nZXQoJ2ZvbycpOyAgICAgICAgICAvLyB1bmRlZmluZWQKICBwcm94eS5z
        ZXQoJ2ZvbycsICdkYXRhJyk7ICAvLyB0aHJvd3MgRXJyb3IKICBgYGAKCiAg
        RGVsZWdhdGVkIHByb3BlcnRpZXMgY2FuIGJlIGJvdW5kIHRvIGFuZCB3aWxs
        IGNoYW5nZSB3aGVuIGNvbnRlbnQgaXMgdXBkYXRlZC4KCiAgQ29tcHV0ZWQg
        cHJvcGVydGllcyBvbiB0aGUgcHJveHkgaXRzZWxmIGNhbiBkZXBlbmQgb24g
        ZGVsZWdhdGVkIHByb3BlcnRpZXMuCgogIGBgYGphdmFzY3JpcHQKICBQcm94
        eVdpdGhDb21wdXRlZFByb3BlcnR5ID0gRW1iZXIuT2JqZWN0UHJveHkuZXh0
        ZW5kKHsKICAgIGZ1bGxOYW1lOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBm
        aXJzdE5hbWUgPSB0aGlzLmdldCgnZmlyc3ROYW1lJyksCiAgICAgICAgICBs
        YXN0TmFtZSA9IHRoaXMuZ2V0KCdsYXN0TmFtZScpOwogICAgICBpZiAoZmly
        c3ROYW1lICYmIGxhc3ROYW1lKSB7CiAgICAgICAgcmV0dXJuIGZpcnN0TmFt
        ZSArICcgJyArIGxhc3ROYW1lOwogICAgICB9CiAgICAgIHJldHVybiBmaXJz
        dE5hbWUgfHwgbGFzdE5hbWU7CiAgICB9LnByb3BlcnR5KCdmaXJzdE5hbWUn
        LCAnbGFzdE5hbWUnKQogIH0pOwoKICBwcm94eSA9IFByb3h5V2l0aENvbXB1
        dGVkUHJvcGVydHkuY3JlYXRlKCk7CgogIHByb3h5LmdldCgnZnVsbE5hbWUn
        KTsgIC8vIHVuZGVmaW5lZAogIHByb3h5LnNldCgnY29udGVudCcsIHsKICAg
        IGZpcnN0TmFtZTogJ1RvbScsIGxhc3ROYW1lOiAnRGFsZScKICB9KTsgLy8g
        dHJpZ2dlcnMgcHJvcGVydHkgY2hhbmdlIGZvciBmdWxsTmFtZSBvbiBwcm94
        eQoKICBwcm94eS5nZXQoJ2Z1bGxOYW1lJyk7ICAvLyAnVG9tIERhbGUnCiAg
        YGBgCgogIEBjbGFzcyBPYmplY3RQcm94eQogIEBuYW1lc3BhY2UgRW1iZXIK
        ICBAZXh0ZW5kcyBFbWJlci5PYmplY3QKKi8KRW1iZXIuT2JqZWN0UHJveHkg
        PSBFbWJlci5PYmplY3QuZXh0ZW5kKHsKICAvKioKICAgIFRoZSBvYmplY3Qg
        d2hvc2UgcHJvcGVydGllcyB3aWxsIGJlIGZvcndhcmRlZC4KCiAgICBAcHJv
        cGVydHkgY29udGVudAogICAgQHR5cGUgRW1iZXIuT2JqZWN0CiAgICBAZGVm
        YXVsdCBudWxsCiAgKi8KICBjb250ZW50OiBudWxsLAogIF9jb250ZW50RGlk
        Q2hhbmdlOiBFbWJlci5vYnNlcnZlcignY29udGVudCcsIGZ1bmN0aW9uKCkg
        ewogICAgRW1iZXIuYXNzZXJ0KCJDYW4ndCBzZXQgT2JqZWN0UHJveHkncyBj
        b250ZW50IHRvIGl0c2VsZiIsIHRoaXMuZ2V0KCdjb250ZW50JykgIT09IHRo
        aXMpOwogIH0pLAoKICBpc1RydXRoeTogRW1iZXIuY29tcHV0ZWQuYm9vbCgn
        Y29udGVudCcpLAoKICBfZGVidWdDb250YWluZXJLZXk6IG51bGwsCgogIHdp
        bGxXYXRjaFByb3BlcnR5OiBmdW5jdGlvbiAoa2V5KSB7CiAgICB2YXIgY29u
        dGVudEtleSA9ICdjb250ZW50LicgKyBrZXk7CiAgICBhZGRCZWZvcmVPYnNl
        cnZlcih0aGlzLCBjb250ZW50S2V5LCBudWxsLCBjb250ZW50UHJvcGVydHlX
        aWxsQ2hhbmdlKTsKICAgIGFkZE9ic2VydmVyKHRoaXMsIGNvbnRlbnRLZXks
        IG51bGwsIGNvbnRlbnRQcm9wZXJ0eURpZENoYW5nZSk7CiAgfSwKCiAgZGlk
        VW53YXRjaFByb3BlcnR5OiBmdW5jdGlvbiAoa2V5KSB7CiAgICB2YXIgY29u
        dGVudEtleSA9ICdjb250ZW50LicgKyBrZXk7CiAgICByZW1vdmVCZWZvcmVP
        YnNlcnZlcih0aGlzLCBjb250ZW50S2V5LCBudWxsLCBjb250ZW50UHJvcGVy
        dHlXaWxsQ2hhbmdlKTsKICAgIHJlbW92ZU9ic2VydmVyKHRoaXMsIGNvbnRl
        bnRLZXksIG51bGwsIGNvbnRlbnRQcm9wZXJ0eURpZENoYW5nZSk7CiAgfSwK
        CiAgdW5rbm93blByb3BlcnR5OiBmdW5jdGlvbiAoa2V5KSB7CiAgICB2YXIg
        Y29udGVudCA9IGdldCh0aGlzLCAnY29udGVudCcpOwogICAgaWYgKGNvbnRl
        bnQpIHsKICAgICAgcmV0dXJuIGdldChjb250ZW50LCBrZXkpOwogICAgfQog
        IH0sCgogIHNldFVua25vd25Qcm9wZXJ0eTogZnVuY3Rpb24gKGtleSwgdmFs
        dWUpIHsKICAgIHZhciBtID0gbWV0YSh0aGlzKTsKICAgIGlmIChtLnByb3Rv
        ID09PSB0aGlzKSB7CiAgICAgIC8vIGlmIG1hcmtlZCBhcyBwcm90b3R5cGUg
        dGhlbiBqdXN0IGRlZmluZVByb3BlcnR5CiAgICAgIC8vIHJhdGhlciB0aGFu
        IGRlbGVnYXRlCiAgICAgIGRlZmluZVByb3BlcnR5KHRoaXMsIGtleSwgbnVs
        bCwgdmFsdWUpOwogICAgICByZXR1cm4gdmFsdWU7CiAgICB9CgogICAgdmFy
        IGNvbnRlbnQgPSBnZXQodGhpcywgJ2NvbnRlbnQnKTsKICAgIEVtYmVyLmFz
        c2VydChmbXQoIkNhbm5vdCBkZWxlZ2F0ZSBzZXQoJyVAJywgJUApIHRvIHRo
        ZSAnY29udGVudCcgcHJvcGVydHkgb2Ygb2JqZWN0IHByb3h5ICVAOiBpdHMg
        J2NvbnRlbnQnIGlzIHVuZGVmaW5lZC4iLCBba2V5LCB2YWx1ZSwgdGhpc10p
        LCBjb250ZW50KTsKICAgIHJldHVybiBzZXQoY29udGVudCwga2V5LCB2YWx1
        ZSk7CiAgfQoKfSk7Cgp9KSgpOwoKCgooZnVuY3Rpb24oKSB7Ci8qKgpAbW9k
        dWxlIGVtYmVyCkBzdWJtb2R1bGUgZW1iZXItcnVudGltZQoqLwoKLy8gLi4u
        Li4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4u
        Li4uLi4uLi4uLgovLyBIRUxQRVJTCi8vCgp2YXIgZ2V0ID0gRW1iZXIuZ2V0
        LCBzZXQgPSBFbWJlci5zZXQ7CnZhciBhX3NsaWNlID0gQXJyYXkucHJvdG90
        eXBlLnNsaWNlOwp2YXIgYV9pbmRleE9mID0gRW1iZXIuRW51bWVyYWJsZVV0
        aWxzLmluZGV4T2Y7Cgp2YXIgY29udGV4dHMgPSBbXTsKCmZ1bmN0aW9uIHBv
        cEN0eCgpIHsKICByZXR1cm4gY29udGV4dHMubGVuZ3RoPT09MCA/IHt9IDog
        Y29udGV4dHMucG9wKCk7Cn0KCmZ1bmN0aW9uIHB1c2hDdHgoY3R4KSB7CiAg
        Y29udGV4dHMucHVzaChjdHgpOwogIHJldHVybiBudWxsOwp9CgpmdW5jdGlv
        biBpdGVyKGtleSwgdmFsdWUpIHsKICB2YXIgdmFsdWVQcm92aWRlZCA9IGFy
        Z3VtZW50cy5sZW5ndGggPT09IDI7CgogIGZ1bmN0aW9uIGkoaXRlbSkgewog
        ICAgdmFyIGN1ciA9IGdldChpdGVtLCBrZXkpOwogICAgcmV0dXJuIHZhbHVl
        UHJvdmlkZWQgPyB2YWx1ZT09PWN1ciA6ICEhY3VyOwogIH0KICByZXR1cm4g
        aSA7Cn0KCi8qKgogIFRoaXMgbWl4aW4gZGVmaW5lcyB0aGUgY29tbW9uIGlu
        dGVyZmFjZSBpbXBsZW1lbnRlZCBieSBlbnVtZXJhYmxlIG9iamVjdHMKICBp
        biBFbWJlci4gTW9zdCBvZiB0aGVzZSBtZXRob2RzIGZvbGxvdyB0aGUgc3Rh
        bmRhcmQgQXJyYXkgaXRlcmF0aW9uCiAgQVBJIGRlZmluZWQgdXAgdG8gSmF2
        YVNjcmlwdCAxLjggKGV4Y2x1ZGluZyBsYW5ndWFnZS1zcGVjaWZpYyBmZWF0
        dXJlcyB0aGF0CiAgY2Fubm90IGJlIGVtdWxhdGVkIGluIG9sZGVyIHZlcnNp
        b25zIG9mIEphdmFTY3JpcHQpLgoKICBUaGlzIG1peGluIGlzIGFwcGxpZWQg
        YXV0b21hdGljYWxseSB0byB0aGUgQXJyYXkgY2xhc3Mgb24gcGFnZSBsb2Fk
        LCBzbyB5b3UKICBjYW4gdXNlIGFueSBvZiB0aGVzZSBtZXRob2RzIG9uIHNp
        bXBsZSBhcnJheXMuIElmIEFycmF5IGFscmVhZHkgaW1wbGVtZW50cwogIG9u
        ZSBvZiB0aGVzZSBtZXRob2RzLCB0aGUgbWl4aW4gd2lsbCBub3Qgb3ZlcnJp
        ZGUgdGhlbS4KCiAgIyMgV3JpdGluZyBZb3VyIE93biBFbnVtZXJhYmxlCgog
        IFRvIG1ha2UgeW91ciBvd24gY3VzdG9tIGNsYXNzIGVudW1lcmFibGUsIHlv
        dSBuZWVkIHR3byBpdGVtczoKCiAgMS4gWW91IG11c3QgaGF2ZSBhIGxlbmd0
        aCBwcm9wZXJ0eS4gVGhpcyBwcm9wZXJ0eSBzaG91bGQgY2hhbmdlIHdoZW5l
        dmVyCiAgICAgdGhlIG51bWJlciBvZiBpdGVtcyBpbiB5b3VyIGVudW1lcmFi
        bGUgb2JqZWN0IGNoYW5nZXMuIElmIHlvdSB1c2UgdGhpcwogICAgIHdpdGgg
        YW4gYEVtYmVyLk9iamVjdGAgc3ViY2xhc3MsIHlvdSBzaG91bGQgYmUgc3Vy
        ZSB0byBjaGFuZ2UgdGhlIGxlbmd0aAogICAgIHByb3BlcnR5IHVzaW5nIGBz
        ZXQoKS5gCgogIDIuIFlvdSBtdXN0IGltcGxlbWVudCBgbmV4dE9iamVjdCgp
        LmAgU2VlIGRvY3VtZW50YXRpb24uCgogIE9uY2UgeW91IGhhdmUgdGhlc2Ug
        dHdvIG1ldGhvZHMgaW1wbGVtZW50ZWQsIGFwcGx5IHRoZSBgRW1iZXIuRW51
        bWVyYWJsZWAgbWl4aW4KICB0byB5b3VyIGNsYXNzIGFuZCB5b3Ugd2lsbCBi
        ZSBhYmxlIHRvIGVudW1lcmF0ZSB0aGUgY29udGVudHMgb2YgeW91ciBvYmpl
        Y3QKICBsaWtlIGFueSBvdGhlciBjb2xsZWN0aW9uLgoKICAjIyBVc2luZyBF
        bWJlciBFbnVtZXJhdGlvbiB3aXRoIE90aGVyIExpYnJhcmllcwoKICBNYW55
        IG90aGVyIGxpYnJhcmllcyBwcm92aWRlIHNvbWUga2luZCBvZiBpdGVyYXRv
        ciBvciBlbnVtZXJhdGlvbiBsaWtlCiAgZmFjaWxpdHkuIFRoaXMgaXMgb2Z0
        ZW4gd2hlcmUgdGhlIG1vc3QgY29tbW9uIEFQSSBjb25mbGljdHMgb2NjdXIu
        CiAgRW1iZXIncyBBUEkgaXMgZGVzaWduZWQgdG8gYmUgYXMgZnJpZW5kbHkg
        YXMgcG9zc2libGUgd2l0aCBvdGhlcgogIGxpYnJhcmllcyBieSBpbXBsZW1l
        bnRpbmcgb25seSBtZXRob2RzIHRoYXQgbW9zdGx5IGNvcnJlc3BvbmQgdG8g
        dGhlCiAgSmF2YVNjcmlwdCAxLjggQVBJLgoKICBAY2xhc3MgRW51bWVyYWJs
        ZQogIEBuYW1lc3BhY2UgRW1iZXIKICBAc2luY2UgRW1iZXIgMC45CiovCkVt
        YmVyLkVudW1lcmFibGUgPSBFbWJlci5NaXhpbi5jcmVhdGUoewoKICAvKioK
        ICAgIEltcGxlbWVudCB0aGlzIG1ldGhvZCB0byBtYWtlIHlvdXIgY2xhc3Mg
        ZW51bWVyYWJsZS4KCiAgICBUaGlzIG1ldGhvZCB3aWxsIGJlIGNhbGwgcmVw
        ZWF0ZWRseSBkdXJpbmcgZW51bWVyYXRpb24uIFRoZSBpbmRleCB2YWx1ZQog
        ICAgd2lsbCBhbHdheXMgYmVnaW4gd2l0aCAwIGFuZCBpbmNyZW1lbnQgbW9u
        b3RvbmljYWxseS4gWW91IGRvbid0IGhhdmUgdG8KICAgIHJlbHkgb24gdGhl
        IGluZGV4IHZhbHVlIHRvIGRldGVybWluZSB3aGF0IG9iamVjdCB0byByZXR1
        cm4sIGJ1dCB5b3Ugc2hvdWxkCiAgICBhbHdheXMgY2hlY2sgdGhlIHZhbHVl
        IGFuZCBzdGFydCBmcm9tIHRoZSBiZWdpbm5pbmcgd2hlbiB5b3Ugc2VlIHRo
        ZQogICAgcmVxdWVzdGVkIGluZGV4IGlzIDAuCgogICAgVGhlIGBwcmV2aW91
        c09iamVjdGAgaXMgdGhlIG9iamVjdCB0aGF0IHdhcyByZXR1cm5lZCBmcm9t
        IHRoZSBsYXN0IGNhbGwKICAgIHRvIGBuZXh0T2JqZWN0YCBmb3IgdGhlIGN1
        cnJlbnQgaXRlcmF0aW9uLiBUaGlzIGlzIGEgdXNlZnVsIHdheSB0bwogICAg
        bWFuYWdlIGl0ZXJhdGlvbiBpZiB5b3UgYXJlIHRyYWNpbmcgYSBsaW5rZWQg
        bGlzdCwgZm9yIGV4YW1wbGUuCgogICAgRmluYWxseSB0aGUgY29udGV4dCBw
        YXJhbWV0ZXIgd2lsbCBhbHdheXMgY29udGFpbiBhIGhhc2ggeW91IGNhbiB1
        c2UgYXMKICAgIGEgInNjcmF0Y2hwYWQiIHRvIG1haW50YWluIGFueSBvdGhl
        ciBzdGF0ZSB5b3UgbmVlZCBpbiBvcmRlciB0byBpdGVyYXRlCiAgICBwcm9w
        ZXJseS4gVGhlIGNvbnRleHQgb2JqZWN0IGlzIHJldXNlZCBhbmQgaXMgbm90
        IHJlc2V0IGJldHdlZW4KICAgIGl0ZXJhdGlvbnMgc28gbWFrZSBzdXJlIHlv
        dSBzZXR1cCB0aGUgY29udGV4dCB3aXRoIGEgZnJlc2ggc3RhdGUgd2hlbmV2
        ZXIKICAgIHRoZSBpbmRleCBwYXJhbWV0ZXIgaXMgMC4KCiAgICBHZW5lcmFs
        bHkgaXRlcmF0b3JzIHdpbGwgY29udGludWUgdG8gY2FsbCBgbmV4dE9iamVj
        dGAgdW50aWwgdGhlIGluZGV4CiAgICByZWFjaGVzIHRoZSB5b3VyIGN1cnJl
        bnQgbGVuZ3RoLTEuIElmIHlvdSBydW4gb3V0IG9mIGRhdGEgYmVmb3JlIHRo
        aXMKICAgIHRpbWUgZm9yIHNvbWUgcmVhc29uLCB5b3Ugc2hvdWxkIHNpbXBs
        eSByZXR1cm4gdW5kZWZpbmVkLgoKICAgIFRoZSBkZWZhdWx0IGltcGxlbWVu
        dGF0aW9uIG9mIHRoaXMgbWV0aG9kIHNpbXBseSBsb29rcyB1cCB0aGUgaW5k
        ZXguCiAgICBUaGlzIHdvcmtzIGdyZWF0IG9uIGFueSBBcnJheS1saWtlIG9i
        amVjdHMuCgogICAgQG1ldGhvZCBuZXh0T2JqZWN0CiAgICBAcGFyYW0ge051
        bWJlcn0gaW5kZXggdGhlIGN1cnJlbnQgaW5kZXggb2YgdGhlIGl0ZXJhdGlv
        bgogICAgQHBhcmFtIHtPYmplY3R9IHByZXZpb3VzT2JqZWN0IHRoZSB2YWx1
        ZSByZXR1cm5lZCBieSB0aGUgbGFzdCBjYWxsIHRvCiAgICAgIGBuZXh0T2Jq
        ZWN0YC4KICAgIEBwYXJhbSB7T2JqZWN0fSBjb250ZXh0IGEgY29udGV4dCBv
        YmplY3QgeW91IGNhbiB1c2UgdG8gbWFpbnRhaW4gc3RhdGUuCiAgICBAcmV0
        dXJuIHtPYmplY3R9IHRoZSBuZXh0IG9iamVjdCBpbiB0aGUgaXRlcmF0aW9u
        IG9yIHVuZGVmaW5lZAogICovCiAgbmV4dE9iamVjdDogRW1iZXIucmVxdWly
        ZWQoRnVuY3Rpb24pLAoKICAvKioKICAgIEhlbHBlciBtZXRob2QgcmV0dXJu
        cyB0aGUgZmlyc3Qgb2JqZWN0IGZyb20gYSBjb2xsZWN0aW9uLiBUaGlzIGlz
        IHVzdWFsbHkKICAgIHVzZWQgYnkgYmluZGluZ3MgYW5kIG90aGVyIHBhcnRz
        IG9mIHRoZSBmcmFtZXdvcmsgdG8gZXh0cmFjdCBhIHNpbmdsZQogICAgb2Jq
        ZWN0IGlmIHRoZSBlbnVtZXJhYmxlIGNvbnRhaW5zIG9ubHkgb25lIGl0ZW0u
        CgogICAgSWYgeW91IG92ZXJyaWRlIHRoaXMgbWV0aG9kLCB5b3Ugc2hvdWxk
        IGltcGxlbWVudCBpdCBzbyB0aGF0IGl0IHdpbGwKICAgIGFsd2F5cyByZXR1
        cm4gdGhlIHNhbWUgdmFsdWUgZWFjaCB0aW1lIGl0IGlzIGNhbGxlZC4gSWYg
        eW91ciBlbnVtZXJhYmxlCiAgICBjb250YWlucyBvbmx5IG9uZSBvYmplY3Qs
        IHRoaXMgbWV0aG9kIHNob3VsZCBhbHdheXMgcmV0dXJuIHRoYXQgb2JqZWN0
        LgogICAgSWYgeW91ciBlbnVtZXJhYmxlIGlzIGVtcHR5LCB0aGlzIG1ldGhv
        ZCBzaG91bGQgcmV0dXJuIGB1bmRlZmluZWRgLgoKICAgIGBgYGphdmFzY3Jp
        cHQKICAgIHZhciBhcnIgPSBbImEiLCAiYiIsICJjIl07CiAgICBhcnIuZ2V0
        KCdmaXJzdE9iamVjdCcpOyAgLy8gImEiCgogICAgdmFyIGFyciA9IFtdOwog
        ICAgYXJyLmdldCgnZmlyc3RPYmplY3QnKTsgIC8vIHVuZGVmaW5lZAogICAg
        YGBgCgogICAgQHByb3BlcnR5IGZpcnN0T2JqZWN0CiAgICBAcmV0dXJuIHtP
        YmplY3R9IHRoZSBvYmplY3Qgb3IgdW5kZWZpbmVkCiAgKi8KICBmaXJzdE9i
        amVjdDogRW1iZXIuY29tcHV0ZWQoZnVuY3Rpb24oKSB7CiAgICBpZiAoZ2V0
        KHRoaXMsICdsZW5ndGgnKT09PTApIHJldHVybiB1bmRlZmluZWQgOwoKICAg
        IC8vIGhhbmRsZSBnZW5lcmljIGVudW1lcmFibGVzCiAgICB2YXIgY29udGV4
        dCA9IHBvcEN0eCgpLCByZXQ7CiAgICByZXQgPSB0aGlzLm5leHRPYmplY3Qo
        MCwgbnVsbCwgY29udGV4dCk7CiAgICBwdXNoQ3R4KGNvbnRleHQpOwogICAg
        cmV0dXJuIHJldCA7CiAgfSkucHJvcGVydHkoJ1tdJyksCgogIC8qKgogICAg
        SGVscGVyIG1ldGhvZCByZXR1cm5zIHRoZSBsYXN0IG9iamVjdCBmcm9tIGEg
        Y29sbGVjdGlvbi4gSWYgeW91ciBlbnVtZXJhYmxlCiAgICBjb250YWlucyBv
        bmx5IG9uZSBvYmplY3QsIHRoaXMgbWV0aG9kIHNob3VsZCBhbHdheXMgcmV0
        dXJuIHRoYXQgb2JqZWN0LgogICAgSWYgeW91ciBlbnVtZXJhYmxlIGlzIGVt
        cHR5LCB0aGlzIG1ldGhvZCBzaG91bGQgcmV0dXJuIGB1bmRlZmluZWRgLgoK
        ICAgIGBgYGphdmFzY3JpcHQKICAgIHZhciBhcnIgPSBbImEiLCAiYiIsICJj
        Il07CiAgICBhcnIuZ2V0KCdsYXN0T2JqZWN0Jyk7ICAvLyAiYyIKCiAgICB2
        YXIgYXJyID0gW107CiAgICBhcnIuZ2V0KCdsYXN0T2JqZWN0Jyk7ICAvLyB1
        bmRlZmluZWQKICAgIGBgYAoKICAgIEBwcm9wZXJ0eSBsYXN0T2JqZWN0CiAg
        ICBAcmV0dXJuIHtPYmplY3R9IHRoZSBsYXN0IG9iamVjdCBvciB1bmRlZmlu
        ZWQKICAqLwogIGxhc3RPYmplY3Q6IEVtYmVyLmNvbXB1dGVkKGZ1bmN0aW9u
        KCkgewogICAgdmFyIGxlbiA9IGdldCh0aGlzLCAnbGVuZ3RoJyk7CiAgICBp
        ZiAobGVuPT09MCkgcmV0dXJuIHVuZGVmaW5lZCA7CiAgICB2YXIgY29udGV4
        dCA9IHBvcEN0eCgpLCBpZHg9MCwgY3VyLCBsYXN0ID0gbnVsbDsKICAgIGRv
        IHsKICAgICAgbGFzdCA9IGN1cjsKICAgICAgY3VyID0gdGhpcy5uZXh0T2Jq
        ZWN0KGlkeCsrLCBsYXN0LCBjb250ZXh0KTsKICAgIH0gd2hpbGUgKGN1ciAh
        PT0gdW5kZWZpbmVkKTsKICAgIHB1c2hDdHgoY29udGV4dCk7CiAgICByZXR1
        cm4gbGFzdDsKICB9KS5wcm9wZXJ0eSgnW10nKSwKCiAgLyoqCiAgICBSZXR1
        cm5zIGB0cnVlYCBpZiB0aGUgcGFzc2VkIG9iamVjdCBjYW4gYmUgZm91bmQg
        aW4gdGhlIHJlY2VpdmVyLiBUaGUKICAgIGRlZmF1bHQgdmVyc2lvbiB3aWxs
        IGl0ZXJhdGUgdGhyb3VnaCB0aGUgZW51bWVyYWJsZSB1bnRpbCB0aGUgb2Jq
        ZWN0CiAgICBpcyBmb3VuZC4gWW91IG1heSB3YW50IHRvIG92ZXJyaWRlIHRo
        aXMgd2l0aCBhIG1vcmUgZWZmaWNpZW50IHZlcnNpb24uCgogICAgYGBgamF2
        YXNjcmlwdAogICAgdmFyIGFyciA9IFsiYSIsICJiIiwgImMiXTsKICAgIGFy
        ci5jb250YWlucygiYSIpOyAvLyB0cnVlCiAgICBhcnIuY29udGFpbnMoInoi
        KTsgLy8gZmFsc2UKICAgIGBgYAoKICAgIEBtZXRob2QgY29udGFpbnMKICAg
        IEBwYXJhbSB7T2JqZWN0fSBvYmogVGhlIG9iamVjdCB0byBzZWFyY2ggZm9y
        LgogICAgQHJldHVybiB7Qm9vbGVhbn0gYHRydWVgIGlmIG9iamVjdCBpcyBm
        b3VuZCBpbiBlbnVtZXJhYmxlLgogICovCiAgY29udGFpbnM6IGZ1bmN0aW9u
        KG9iaikgewogICAgcmV0dXJuIHRoaXMuZmluZChmdW5jdGlvbihpdGVtKSB7
        IHJldHVybiBpdGVtPT09b2JqOyB9KSAhPT0gdW5kZWZpbmVkOwogIH0sCgog
        IC8qKgogICAgSXRlcmF0ZXMgdGhyb3VnaCB0aGUgZW51bWVyYWJsZSwgY2Fs
        bGluZyB0aGUgcGFzc2VkIGZ1bmN0aW9uIG9uIGVhY2gKICAgIGl0ZW0uIFRo
        aXMgbWV0aG9kIGNvcnJlc3BvbmRzIHRvIHRoZSBgZm9yRWFjaCgpYCBtZXRo
        b2QgZGVmaW5lZCBpbgogICAgSmF2YVNjcmlwdCAxLjYuCgogICAgVGhlIGNh
        bGxiYWNrIG1ldGhvZCB5b3UgcHJvdmlkZSBzaG91bGQgaGF2ZSB0aGUgZm9s
        bG93aW5nIHNpZ25hdHVyZSAoYWxsCiAgICBwYXJhbWV0ZXJzIGFyZSBvcHRp
        b25hbCk6CgogICAgYGBgamF2YXNjcmlwdAogICAgZnVuY3Rpb24oaXRlbSwg
        aW5kZXgsIGVudW1lcmFibGUpOwogICAgYGBgCgogICAgLSBgaXRlbWAgaXMg
        dGhlIGN1cnJlbnQgaXRlbSBpbiB0aGUgaXRlcmF0aW9uLgogICAgLSBgaW5k
        ZXhgIGlzIHRoZSBjdXJyZW50IGluZGV4IGluIHRoZSBpdGVyYXRpb24uCiAg
        ICAtIGBlbnVtZXJhYmxlYCBpcyB0aGUgZW51bWVyYWJsZSBvYmplY3QgaXRz
        ZWxmLgoKICAgIE5vdGUgdGhhdCBpbiBhZGRpdGlvbiB0byBhIGNhbGxiYWNr
        LCB5b3UgY2FuIGFsc28gcGFzcyBhbiBvcHRpb25hbCB0YXJnZXQKICAgIG9i
        amVjdCB0aGF0IHdpbGwgYmUgc2V0IGFzIGB0aGlzYCBvbiB0aGUgY29udGV4
        dC4gVGhpcyBpcyBhIGdvb2Qgd2F5CiAgICB0byBnaXZlIHlvdXIgaXRlcmF0
        b3IgZnVuY3Rpb24gYWNjZXNzIHRvIHRoZSBjdXJyZW50IG9iamVjdC4KCiAg
        ICBAbWV0aG9kIGZvckVhY2gKICAgIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxi
        YWNrIFRoZSBjYWxsYmFjayB0byBleGVjdXRlCiAgICBAcGFyYW0ge09iamVj
        dH0gW3RhcmdldF0gVGhlIHRhcmdldCBvYmplY3QgdG8gdXNlCiAgICBAcmV0
        dXJuIHtPYmplY3R9IHJlY2VpdmVyCiAgKi8KICBmb3JFYWNoOiBmdW5jdGlv
        bihjYWxsYmFjaywgdGFyZ2V0KSB7CiAgICBpZiAodHlwZW9mIGNhbGxiYWNr
        ICE9PSAiZnVuY3Rpb24iKSB0aHJvdyBuZXcgVHlwZUVycm9yKCkgOwogICAg
        dmFyIGxlbiA9IGdldCh0aGlzLCAnbGVuZ3RoJyksIGxhc3QgPSBudWxsLCBj
        b250ZXh0ID0gcG9wQ3R4KCk7CgogICAgaWYgKHRhcmdldCA9PT0gdW5kZWZp
        bmVkKSB0YXJnZXQgPSBudWxsOwoKICAgIGZvcih2YXIgaWR4PTA7aWR4PGxl
        bjtpZHgrKykgewogICAgICB2YXIgbmV4dCA9IHRoaXMubmV4dE9iamVjdChp
        ZHgsIGxhc3QsIGNvbnRleHQpIDsKICAgICAgY2FsbGJhY2suY2FsbCh0YXJn
        ZXQsIG5leHQsIGlkeCwgdGhpcyk7CiAgICAgIGxhc3QgPSBuZXh0IDsKICAg
        IH0KICAgIGxhc3QgPSBudWxsIDsKICAgIGNvbnRleHQgPSBwdXNoQ3R4KGNv
        bnRleHQpOwogICAgcmV0dXJuIHRoaXMgOwogIH0sCgogIC8qKgogICAgQWxp
        YXMgZm9yIGBtYXBCeWAKCiAgICBAbWV0aG9kIGdldEVhY2gKICAgIEBwYXJh
        bSB7U3RyaW5nfSBrZXkgbmFtZSBvZiB0aGUgcHJvcGVydHkKICAgIEByZXR1
        cm4ge0FycmF5fSBUaGUgbWFwcGVkIGFycmF5LgogICovCiAgZ2V0RWFjaDog
        ZnVuY3Rpb24oa2V5KSB7CiAgICByZXR1cm4gdGhpcy5tYXBCeShrZXkpOwog
        IH0sCgogIC8qKgogICAgU2V0cyB0aGUgdmFsdWUgb24gdGhlIG5hbWVkIHBy
        b3BlcnR5IGZvciBlYWNoIG1lbWJlci4gVGhpcyBpcyBtb3JlCiAgICBlZmZp
        Y2llbnQgdGhhbiB1c2luZyBvdGhlciBtZXRob2RzIGRlZmluZWQgb24gdGhp
        cyBoZWxwZXIuIElmIHRoZSBvYmplY3QKICAgIGltcGxlbWVudHMgRW1iZXIu
        T2JzZXJ2YWJsZSwgdGhlIHZhbHVlIHdpbGwgYmUgY2hhbmdlZCB0byBgc2V0
        KCksYCBvdGhlcndpc2UKICAgIGl0IHdpbGwgYmUgc2V0IGRpcmVjdGx5LiBg
        bnVsbGAgb2JqZWN0cyBhcmUgc2tpcHBlZC4KCiAgICBAbWV0aG9kIHNldEVh
        Y2gKICAgIEBwYXJhbSB7U3RyaW5nfSBrZXkgVGhlIGtleSB0byBzZXQKICAg
        IEBwYXJhbSB7T2JqZWN0fSB2YWx1ZSBUaGUgb2JqZWN0IHRvIHNldAogICAg
        QHJldHVybiB7T2JqZWN0fSByZWNlaXZlcgogICovCiAgc2V0RWFjaDogZnVu
        Y3Rpb24oa2V5LCB2YWx1ZSkgewogICAgcmV0dXJuIHRoaXMuZm9yRWFjaChm
        dW5jdGlvbihpdGVtKSB7CiAgICAgIHNldChpdGVtLCBrZXksIHZhbHVlKTsK
        ICAgIH0pOwogIH0sCgogIC8qKgogICAgTWFwcyBhbGwgb2YgdGhlIGl0ZW1z
        IGluIHRoZSBlbnVtZXJhdGlvbiB0byBhbm90aGVyIHZhbHVlLCByZXR1cm5p
        bmcKICAgIGEgbmV3IGFycmF5LiBUaGlzIG1ldGhvZCBjb3JyZXNwb25kcyB0
        byBgbWFwKClgIGRlZmluZWQgaW4gSmF2YVNjcmlwdCAxLjYuCgogICAgVGhl
        IGNhbGxiYWNrIG1ldGhvZCB5b3UgcHJvdmlkZSBzaG91bGQgaGF2ZSB0aGUg
        Zm9sbG93aW5nIHNpZ25hdHVyZSAoYWxsCiAgICBwYXJhbWV0ZXJzIGFyZSBv
        cHRpb25hbCk6CgogICAgYGBgamF2YXNjcmlwdAogICAgZnVuY3Rpb24oaXRl
        bSwgaW5kZXgsIGVudW1lcmFibGUpOwogICAgYGBgCgogICAgLSBgaXRlbWAg
        aXMgdGhlIGN1cnJlbnQgaXRlbSBpbiB0aGUgaXRlcmF0aW9uLgogICAgLSBg
        aW5kZXhgIGlzIHRoZSBjdXJyZW50IGluZGV4IGluIHRoZSBpdGVyYXRpb24u
        CiAgICAtIGBlbnVtZXJhYmxlYCBpcyB0aGUgZW51bWVyYWJsZSBvYmplY3Qg
        aXRzZWxmLgoKICAgIEl0IHNob3VsZCByZXR1cm4gdGhlIG1hcHBlZCB2YWx1
        ZS4KCiAgICBOb3RlIHRoYXQgaW4gYWRkaXRpb24gdG8gYSBjYWxsYmFjaywg
        eW91IGNhbiBhbHNvIHBhc3MgYW4gb3B0aW9uYWwgdGFyZ2V0CiAgICBvYmpl
        Y3QgdGhhdCB3aWxsIGJlIHNldCBhcyBgdGhpc2Agb24gdGhlIGNvbnRleHQu
        IFRoaXMgaXMgYSBnb29kIHdheQogICAgdG8gZ2l2ZSB5b3VyIGl0ZXJhdG9y
        IGZ1bmN0aW9uIGFjY2VzcyB0byB0aGUgY3VycmVudCBvYmplY3QuCgogICAg
        QG1ldGhvZCBtYXAKICAgIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrIFRo
        ZSBjYWxsYmFjayB0byBleGVjdXRlCiAgICBAcGFyYW0ge09iamVjdH0gW3Rh
        cmdldF0gVGhlIHRhcmdldCBvYmplY3QgdG8gdXNlCiAgICBAcmV0dXJuIHtB
        cnJheX0gVGhlIG1hcHBlZCBhcnJheS4KICAqLwogIG1hcDogZnVuY3Rpb24o
        Y2FsbGJhY2ssIHRhcmdldCkgewogICAgdmFyIHJldCA9IEVtYmVyLkEoKTsK
        ICAgIHRoaXMuZm9yRWFjaChmdW5jdGlvbih4LCBpZHgsIGkpIHsKICAgICAg
        cmV0W2lkeF0gPSBjYWxsYmFjay5jYWxsKHRhcmdldCwgeCwgaWR4LGkpOwog
        ICAgfSk7CiAgICByZXR1cm4gcmV0IDsKICB9LAoKICAvKioKICAgIFNpbWls
        YXIgdG8gbWFwLCB0aGlzIHNwZWNpYWxpemVkIGZ1bmN0aW9uIHJldHVybnMg
        dGhlIHZhbHVlIG9mIHRoZSBuYW1lZAogICAgcHJvcGVydHkgb24gYWxsIGl0
        ZW1zIGluIHRoZSBlbnVtZXJhdGlvbi4KCiAgICBAbWV0aG9kIG1hcEJ5CiAg
        ICBAcGFyYW0ge1N0cmluZ30ga2V5IG5hbWUgb2YgdGhlIHByb3BlcnR5CiAg
        ICBAcmV0dXJuIHtBcnJheX0gVGhlIG1hcHBlZCBhcnJheS4KICAqLwogIG1h
        cEJ5OiBmdW5jdGlvbihrZXkpIHsKICAgIHJldHVybiB0aGlzLm1hcChmdW5j
        dGlvbihuZXh0KSB7CiAgICAgIHJldHVybiBnZXQobmV4dCwga2V5KTsKICAg
        IH0pOwogIH0sCgogIC8qKgogICAgU2ltaWxhciB0byBtYXAsIHRoaXMgc3Bl
        Y2lhbGl6ZWQgZnVuY3Rpb24gcmV0dXJucyB0aGUgdmFsdWUgb2YgdGhlIG5h
        bWVkCiAgICBwcm9wZXJ0eSBvbiBhbGwgaXRlbXMgaW4gdGhlIGVudW1lcmF0
        aW9uLgoKICAgIEBtZXRob2QgbWFwUHJvcGVydHkKICAgIEBwYXJhbSB7U3Ry
        aW5nfSBrZXkgbmFtZSBvZiB0aGUgcHJvcGVydHkKICAgIEByZXR1cm4ge0Fy
        cmF5fSBUaGUgbWFwcGVkIGFycmF5LgogICAgQGRlcHJlY2F0ZWQgVXNlIGBt
        YXBCeWAgaW5zdGVhZAogICovCgogIG1hcFByb3BlcnR5OiBFbWJlci5hbGlh
        c01ldGhvZCgnbWFwQnknKSwKCiAgLyoqCiAgICBSZXR1cm5zIGFuIGFycmF5
        IHdpdGggYWxsIG9mIHRoZSBpdGVtcyBpbiB0aGUgZW51bWVyYXRpb24gdGhh
        dCB0aGUgcGFzc2VkCiAgICBmdW5jdGlvbiByZXR1cm5zIHRydWUgZm9yLiBU
        aGlzIG1ldGhvZCBjb3JyZXNwb25kcyB0byBgZmlsdGVyKClgIGRlZmluZWQg
        aW4KICAgIEphdmFTY3JpcHQgMS42LgoKICAgIFRoZSBjYWxsYmFjayBtZXRo
        b2QgeW91IHByb3ZpZGUgc2hvdWxkIGhhdmUgdGhlIGZvbGxvd2luZyBzaWdu
        YXR1cmUgKGFsbAogICAgcGFyYW1ldGVycyBhcmUgb3B0aW9uYWwpOgoKICAg
        IGBgYGphdmFzY3JpcHQKICAgIGZ1bmN0aW9uKGl0ZW0sIGluZGV4LCBlbnVt
        ZXJhYmxlKTsKICAgIGBgYAoKICAgIC0gYGl0ZW1gIGlzIHRoZSBjdXJyZW50
        IGl0ZW0gaW4gdGhlIGl0ZXJhdGlvbi4KICAgIC0gYGluZGV4YCBpcyB0aGUg
        Y3VycmVudCBpbmRleCBpbiB0aGUgaXRlcmF0aW9uLgogICAgLSBgZW51bWVy
        YWJsZWAgaXMgdGhlIGVudW1lcmFibGUgb2JqZWN0IGl0c2VsZi4KCiAgICBJ
        dCBzaG91bGQgcmV0dXJuIHRoZSBgdHJ1ZWAgdG8gaW5jbHVkZSB0aGUgaXRl
        bSBpbiB0aGUgcmVzdWx0cywgYGZhbHNlYAogICAgb3RoZXJ3aXNlLgoKICAg
        IE5vdGUgdGhhdCBpbiBhZGRpdGlvbiB0byBhIGNhbGxiYWNrLCB5b3UgY2Fu
        IGFsc28gcGFzcyBhbiBvcHRpb25hbCB0YXJnZXQKICAgIG9iamVjdCB0aGF0
        IHdpbGwgYmUgc2V0IGFzIGB0aGlzYCBvbiB0aGUgY29udGV4dC4gVGhpcyBp
        cyBhIGdvb2Qgd2F5CiAgICB0byBnaXZlIHlvdXIgaXRlcmF0b3IgZnVuY3Rp
        b24gYWNjZXNzIHRvIHRoZSBjdXJyZW50IG9iamVjdC4KCiAgICBAbWV0aG9k
        IGZpbHRlcgogICAgQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2sgVGhlIGNh
        bGxiYWNrIHRvIGV4ZWN1dGUKICAgIEBwYXJhbSB7T2JqZWN0fSBbdGFyZ2V0
        XSBUaGUgdGFyZ2V0IG9iamVjdCB0byB1c2UKICAgIEByZXR1cm4ge0FycmF5
        fSBBIGZpbHRlcmVkIGFycmF5LgogICovCiAgZmlsdGVyOiBmdW5jdGlvbihj
        YWxsYmFjaywgdGFyZ2V0KSB7CiAgICB2YXIgcmV0ID0gRW1iZXIuQSgpOwog
        ICAgdGhpcy5mb3JFYWNoKGZ1bmN0aW9uKHgsIGlkeCwgaSkgewogICAgICBp
        ZiAoY2FsbGJhY2suY2FsbCh0YXJnZXQsIHgsIGlkeCwgaSkpIHJldC5wdXNo
        KHgpOwogICAgfSk7CiAgICByZXR1cm4gcmV0IDsKICB9LAoKICAvKioKICAg
        IFJldHVybnMgYW4gYXJyYXkgd2l0aCBhbGwgb2YgdGhlIGl0ZW1zIGluIHRo
        ZSBlbnVtZXJhdGlvbiB3aGVyZSB0aGUgcGFzc2VkCiAgICBmdW5jdGlvbiBy
        ZXR1cm5zIGZhbHNlIGZvci4gVGhpcyBtZXRob2QgaXMgdGhlIGludmVyc2Ug
        b2YgZmlsdGVyKCkuCgogICAgVGhlIGNhbGxiYWNrIG1ldGhvZCB5b3UgcHJv
        dmlkZSBzaG91bGQgaGF2ZSB0aGUgZm9sbG93aW5nIHNpZ25hdHVyZSAoYWxs
        CiAgICBwYXJhbWV0ZXJzIGFyZSBvcHRpb25hbCk6CgogICAgYGBgamF2YXNj
        cmlwdAogICAgZnVuY3Rpb24oaXRlbSwgaW5kZXgsIGVudW1lcmFibGUpOwog
        ICAgYGBgCgogICAgLSAqaXRlbSogaXMgdGhlIGN1cnJlbnQgaXRlbSBpbiB0
        aGUgaXRlcmF0aW9uLgogICAgLSAqaW5kZXgqIGlzIHRoZSBjdXJyZW50IGlu
        ZGV4IGluIHRoZSBpdGVyYXRpb24KICAgIC0gKmVudW1lcmFibGUqIGlzIHRo
        ZSBlbnVtZXJhYmxlIG9iamVjdCBpdHNlbGYuCgogICAgSXQgc2hvdWxkIHJl
        dHVybiB0aGUgYSBmYWxzZXkgdmFsdWUgdG8gaW5jbHVkZSB0aGUgaXRlbSBp
        biB0aGUgcmVzdWx0cy4KCiAgICBOb3RlIHRoYXQgaW4gYWRkaXRpb24gdG8g
        YSBjYWxsYmFjaywgeW91IGNhbiBhbHNvIHBhc3MgYW4gb3B0aW9uYWwgdGFy
        Z2V0CiAgICBvYmplY3QgdGhhdCB3aWxsIGJlIHNldCBhcyAidGhpcyIgb24g
        dGhlIGNvbnRleHQuIFRoaXMgaXMgYSBnb29kIHdheQogICAgdG8gZ2l2ZSB5
        b3VyIGl0ZXJhdG9yIGZ1bmN0aW9uIGFjY2VzcyB0byB0aGUgY3VycmVudCBv
        YmplY3QuCgogICAgQG1ldGhvZCByZWplY3QKICAgIEBwYXJhbSB7RnVuY3Rp
        b259IGNhbGxiYWNrIFRoZSBjYWxsYmFjayB0byBleGVjdXRlCiAgICBAcGFy
        YW0ge09iamVjdH0gW3RhcmdldF0gVGhlIHRhcmdldCBvYmplY3QgdG8gdXNl
        CiAgICBAcmV0dXJuIHtBcnJheX0gQSByZWplY3RlZCBhcnJheS4KICAgKi8K
        ICByZWplY3Q6IGZ1bmN0aW9uKGNhbGxiYWNrLCB0YXJnZXQpIHsKICAgIHJl
        dHVybiB0aGlzLmZpbHRlcihmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuICEo
        Y2FsbGJhY2suYXBwbHkodGFyZ2V0LCBhcmd1bWVudHMpKTsKICAgIH0pOwog
        IH0sCgogIC8qKgogICAgUmV0dXJucyBhbiBhcnJheSB3aXRoIGp1c3QgdGhl
        IGl0ZW1zIHdpdGggdGhlIG1hdGNoZWQgcHJvcGVydHkuIFlvdQogICAgY2Fu
        IHBhc3MgYW4gb3B0aW9uYWwgc2Vjb25kIGFyZ3VtZW50IHdpdGggdGhlIHRh
        cmdldCB2YWx1ZS4gT3RoZXJ3aXNlCiAgICB0aGlzIHdpbGwgbWF0Y2ggYW55
        IHByb3BlcnR5IHRoYXQgZXZhbHVhdGVzIHRvIGB0cnVlYC4KCiAgICBAbWV0
        aG9kIGZpbHRlckJ5CiAgICBAcGFyYW0ge1N0cmluZ30ga2V5IHRoZSBwcm9w
        ZXJ0eSB0byB0ZXN0CiAgICBAcGFyYW0ge1N0cmluZ30gW3ZhbHVlXSBvcHRp
        b25hbCB2YWx1ZSB0byB0ZXN0IGFnYWluc3QuCiAgICBAcmV0dXJuIHtBcnJh
        eX0gZmlsdGVyZWQgYXJyYXkKICAqLwogIGZpbHRlckJ5OiBmdW5jdGlvbihr
        ZXksIHZhbHVlKSB7CiAgICByZXR1cm4gdGhpcy5maWx0ZXIoaXRlci5hcHBs
        eSh0aGlzLCBhcmd1bWVudHMpKTsKICB9LAoKICAvKioKICAgIFJldHVybnMg
        YW4gYXJyYXkgd2l0aCBqdXN0IHRoZSBpdGVtcyB3aXRoIHRoZSBtYXRjaGVk
        IHByb3BlcnR5LiBZb3UKICAgIGNhbiBwYXNzIGFuIG9wdGlvbmFsIHNlY29u
        ZCBhcmd1bWVudCB3aXRoIHRoZSB0YXJnZXQgdmFsdWUuIE90aGVyd2lzZQog
        ICAgdGhpcyB3aWxsIG1hdGNoIGFueSBwcm9wZXJ0eSB0aGF0IGV2YWx1YXRl
        cyB0byBgdHJ1ZWAuCgogICAgQG1ldGhvZCBmaWx0ZXJQcm9wZXJ0eQogICAg
        QHBhcmFtIHtTdHJpbmd9IGtleSB0aGUgcHJvcGVydHkgdG8gdGVzdAogICAg
        QHBhcmFtIHtTdHJpbmd9IFt2YWx1ZV0gb3B0aW9uYWwgdmFsdWUgdG8gdGVz
        dCBhZ2FpbnN0LgogICAgQHJldHVybiB7QXJyYXl9IGZpbHRlcmVkIGFycmF5
        CiAgICBAZGVwcmVjYXRlZCBVc2UgYGZpbHRlckJ5YCBpbnN0ZWFkCiAgKi8K
        ICBmaWx0ZXJQcm9wZXJ0eTogRW1iZXIuYWxpYXNNZXRob2QoJ2ZpbHRlckJ5
        JyksCgogIC8qKgogICAgUmV0dXJucyBhbiBhcnJheSB3aXRoIHRoZSBpdGVt
        cyB0aGF0IGRvIG5vdCBoYXZlIHRydXRoeSB2YWx1ZXMgZm9yCiAgICBrZXku
        ICBZb3UgY2FuIHBhc3MgYW4gb3B0aW9uYWwgc2Vjb25kIGFyZ3VtZW50IHdp
        dGggdGhlIHRhcmdldCB2YWx1ZS4gIE90aGVyd2lzZQogICAgdGhpcyB3aWxs
        IG1hdGNoIGFueSBwcm9wZXJ0eSB0aGF0IGV2YWx1YXRlcyB0byBmYWxzZS4K
        CiAgICBAbWV0aG9kIHJlamVjdEJ5CiAgICBAcGFyYW0ge1N0cmluZ30ga2V5
        IHRoZSBwcm9wZXJ0eSB0byB0ZXN0CiAgICBAcGFyYW0ge1N0cmluZ30gW3Zh
        bHVlXSBvcHRpb25hbCB2YWx1ZSB0byB0ZXN0IGFnYWluc3QuCiAgICBAcmV0
        dXJuIHtBcnJheX0gcmVqZWN0ZWQgYXJyYXkKICAqLwogIHJlamVjdEJ5OiBm
        dW5jdGlvbihrZXksIHZhbHVlKSB7CiAgICB2YXIgZXhhY3RWYWx1ZSA9IGZ1
        bmN0aW9uKGl0ZW0pIHsgcmV0dXJuIGdldChpdGVtLCBrZXkpID09PSB2YWx1
        ZTsgfSwKICAgICAgICBoYXNWYWx1ZSA9IGZ1bmN0aW9uKGl0ZW0pIHsgcmV0
        dXJuICEhZ2V0KGl0ZW0sIGtleSk7IH0sCiAgICAgICAgdXNlID0gKGFyZ3Vt
        ZW50cy5sZW5ndGggPT09IDIgPyBleGFjdFZhbHVlIDogaGFzVmFsdWUpOwoK
        ICAgIHJldHVybiB0aGlzLnJlamVjdCh1c2UpOwogIH0sCgogIC8qKgogICAg
        UmV0dXJucyBhbiBhcnJheSB3aXRoIHRoZSBpdGVtcyB0aGF0IGRvIG5vdCBo
        YXZlIHRydXRoeSB2YWx1ZXMgZm9yCiAgICBrZXkuICBZb3UgY2FuIHBhc3Mg
        YW4gb3B0aW9uYWwgc2Vjb25kIGFyZ3VtZW50IHdpdGggdGhlIHRhcmdldCB2
        YWx1ZS4gIE90aGVyd2lzZQogICAgdGhpcyB3aWxsIG1hdGNoIGFueSBwcm9w
        ZXJ0eSB0aGF0IGV2YWx1YXRlcyB0byBmYWxzZS4KCiAgICBAbWV0aG9kIHJl
        amVjdFByb3BlcnR5CiAgICBAcGFyYW0ge1N0cmluZ30ga2V5IHRoZSBwcm9w
        ZXJ0eSB0byB0ZXN0CiAgICBAcGFyYW0ge1N0cmluZ30gW3ZhbHVlXSBvcHRp
        b25hbCB2YWx1ZSB0byB0ZXN0IGFnYWluc3QuCiAgICBAcmV0dXJuIHtBcnJh
        eX0gcmVqZWN0ZWQgYXJyYXkKICAgIEBkZXByZWNhdGVkIFVzZSBgcmVqZWN0
        QnlgIGluc3RlYWQKICAqLwogIHJlamVjdFByb3BlcnR5OiBFbWJlci5hbGlh
        c01ldGhvZCgncmVqZWN0QnknKSwKCiAgLyoqCiAgICBSZXR1cm5zIHRoZSBm
        aXJzdCBpdGVtIGluIHRoZSBhcnJheSBmb3Igd2hpY2ggdGhlIGNhbGxiYWNr
        IHJldHVybnMgdHJ1ZS4KICAgIFRoaXMgbWV0aG9kIHdvcmtzIHNpbWlsYXIg
        dG8gdGhlIGBmaWx0ZXIoKWAgbWV0aG9kIGRlZmluZWQgaW4gSmF2YVNjcmlw
        dCAxLjYKICAgIGV4Y2VwdCB0aGF0IGl0IHdpbGwgc3RvcCB3b3JraW5nIG9u
        IHRoZSBhcnJheSBvbmNlIGEgbWF0Y2ggaXMgZm91bmQuCgogICAgVGhlIGNh
        bGxiYWNrIG1ldGhvZCB5b3UgcHJvdmlkZSBzaG91bGQgaGF2ZSB0aGUgZm9s
        bG93aW5nIHNpZ25hdHVyZSAoYWxsCiAgICBwYXJhbWV0ZXJzIGFyZSBvcHRp
        b25hbCk6CgogICAgYGBgamF2YXNjcmlwdAogICAgZnVuY3Rpb24oaXRlbSwg
        aW5kZXgsIGVudW1lcmFibGUpOwogICAgYGBgCgogICAgLSBgaXRlbWAgaXMg
        dGhlIGN1cnJlbnQgaXRlbSBpbiB0aGUgaXRlcmF0aW9uLgogICAgLSBgaW5k
        ZXhgIGlzIHRoZSBjdXJyZW50IGluZGV4IGluIHRoZSBpdGVyYXRpb24uCiAg
        ICAtIGBlbnVtZXJhYmxlYCBpcyB0aGUgZW51bWVyYWJsZSBvYmplY3QgaXRz
        ZWxmLgoKICAgIEl0IHNob3VsZCByZXR1cm4gdGhlIGB0cnVlYCB0byBpbmNs
        dWRlIHRoZSBpdGVtIGluIHRoZSByZXN1bHRzLCBgZmFsc2VgCiAgICBvdGhl
        cndpc2UuCgogICAgTm90ZSB0aGF0IGluIGFkZGl0aW9uIHRvIGEgY2FsbGJh
        Y2ssIHlvdSBjYW4gYWxzbyBwYXNzIGFuIG9wdGlvbmFsIHRhcmdldAogICAg
        b2JqZWN0IHRoYXQgd2lsbCBiZSBzZXQgYXMgYHRoaXNgIG9uIHRoZSBjb250
        ZXh0LiBUaGlzIGlzIGEgZ29vZCB3YXkKICAgIHRvIGdpdmUgeW91ciBpdGVy
        YXRvciBmdW5jdGlvbiBhY2Nlc3MgdG8gdGhlIGN1cnJlbnQgb2JqZWN0LgoK
        ICAgIEBtZXRob2QgZmluZAogICAgQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJh
        Y2sgVGhlIGNhbGxiYWNrIHRvIGV4ZWN1dGUKICAgIEBwYXJhbSB7T2JqZWN0
        fSBbdGFyZ2V0XSBUaGUgdGFyZ2V0IG9iamVjdCB0byB1c2UKICAgIEByZXR1
        cm4ge09iamVjdH0gRm91bmQgaXRlbSBvciBgdW5kZWZpbmVkYC4KICAqLwog
        IGZpbmQ6IGZ1bmN0aW9uKGNhbGxiYWNrLCB0YXJnZXQpIHsKICAgIHZhciBs
        ZW4gPSBnZXQodGhpcywgJ2xlbmd0aCcpIDsKICAgIGlmICh0YXJnZXQgPT09
        IHVuZGVmaW5lZCkgdGFyZ2V0ID0gbnVsbDsKCiAgICB2YXIgbGFzdCA9IG51
        bGwsIG5leHQsIGZvdW5kID0gZmFsc2UsIHJldCA7CiAgICB2YXIgY29udGV4
        dCA9IHBvcEN0eCgpOwogICAgZm9yKHZhciBpZHg9MDtpZHg8bGVuICYmICFm
        b3VuZDtpZHgrKykgewogICAgICBuZXh0ID0gdGhpcy5uZXh0T2JqZWN0KGlk
        eCwgbGFzdCwgY29udGV4dCkgOwogICAgICBpZiAoZm91bmQgPSBjYWxsYmFj
        ay5jYWxsKHRhcmdldCwgbmV4dCwgaWR4LCB0aGlzKSkgcmV0ID0gbmV4dCA7
        CiAgICAgIGxhc3QgPSBuZXh0IDsKICAgIH0KICAgIG5leHQgPSBsYXN0ID0g
        bnVsbCA7CiAgICBjb250ZXh0ID0gcHVzaEN0eChjb250ZXh0KTsKICAgIHJl
        dHVybiByZXQgOwogIH0sCgogIC8qKgogICAgUmV0dXJucyB0aGUgZmlyc3Qg
        aXRlbSB3aXRoIGEgcHJvcGVydHkgbWF0Y2hpbmcgdGhlIHBhc3NlZCB2YWx1
        ZS4gWW91CiAgICBjYW4gcGFzcyBhbiBvcHRpb25hbCBzZWNvbmQgYXJndW1l
        bnQgd2l0aCB0aGUgdGFyZ2V0IHZhbHVlLiBPdGhlcndpc2UKICAgIHRoaXMg
        d2lsbCBtYXRjaCBhbnkgcHJvcGVydHkgdGhhdCBldmFsdWF0ZXMgdG8gYHRy
        dWVgLgoKICAgIFRoaXMgbWV0aG9kIHdvcmtzIG11Y2ggbGlrZSB0aGUgbW9y
        ZSBnZW5lcmljIGBmaW5kKClgIG1ldGhvZC4KCiAgICBAbWV0aG9kIGZpbmRC
        eQogICAgQHBhcmFtIHtTdHJpbmd9IGtleSB0aGUgcHJvcGVydHkgdG8gdGVz
        dAogICAgQHBhcmFtIHtTdHJpbmd9IFt2YWx1ZV0gb3B0aW9uYWwgdmFsdWUg
        dG8gdGVzdCBhZ2FpbnN0LgogICAgQHJldHVybiB7T2JqZWN0fSBmb3VuZCBp
        dGVtIG9yIGB1bmRlZmluZWRgCiAgKi8KICBmaW5kQnk6IGZ1bmN0aW9uKGtl
        eSwgdmFsdWUpIHsKICAgIHJldHVybiB0aGlzLmZpbmQoaXRlci5hcHBseSh0
        aGlzLCBhcmd1bWVudHMpKTsKICB9LAoKICAvKioKICAgIFJldHVybnMgdGhl
        IGZpcnN0IGl0ZW0gd2l0aCBhIHByb3BlcnR5IG1hdGNoaW5nIHRoZSBwYXNz
        ZWQgdmFsdWUuIFlvdQogICAgY2FuIHBhc3MgYW4gb3B0aW9uYWwgc2Vjb25k
        IGFyZ3VtZW50IHdpdGggdGhlIHRhcmdldCB2YWx1ZS4gT3RoZXJ3aXNlCiAg
        ICB0aGlzIHdpbGwgbWF0Y2ggYW55IHByb3BlcnR5IHRoYXQgZXZhbHVhdGVz
        IHRvIGB0cnVlYC4KCiAgICBUaGlzIG1ldGhvZCB3b3JrcyBtdWNoIGxpa2Ug
        dGhlIG1vcmUgZ2VuZXJpYyBgZmluZCgpYCBtZXRob2QuCgogICAgQG1ldGhv
        ZCBmaW5kUHJvcGVydHkKICAgIEBwYXJhbSB7U3RyaW5nfSBrZXkgdGhlIHBy
        b3BlcnR5IHRvIHRlc3QKICAgIEBwYXJhbSB7U3RyaW5nfSBbdmFsdWVdIG9w
        dGlvbmFsIHZhbHVlIHRvIHRlc3QgYWdhaW5zdC4KICAgIEByZXR1cm4ge09i
        amVjdH0gZm91bmQgaXRlbSBvciBgdW5kZWZpbmVkYAogICAgQGRlcHJlY2F0
        ZWQgVXNlIGBmaW5kQnlgIGluc3RlYWQKICAqLwogIGZpbmRQcm9wZXJ0eTog
        RW1iZXIuYWxpYXNNZXRob2QoJ2ZpbmRCeScpLAoKICAvKioKICAgIFJldHVy
        bnMgYHRydWVgIGlmIHRoZSBwYXNzZWQgZnVuY3Rpb24gcmV0dXJucyB0cnVl
        IGZvciBldmVyeSBpdGVtIGluIHRoZQogICAgZW51bWVyYXRpb24uIFRoaXMg
        Y29ycmVzcG9uZHMgd2l0aCB0aGUgYGV2ZXJ5KClgIG1ldGhvZCBpbiBKYXZh
        U2NyaXB0IDEuNi4KCiAgICBUaGUgY2FsbGJhY2sgbWV0aG9kIHlvdSBwcm92
        aWRlIHNob3VsZCBoYXZlIHRoZSBmb2xsb3dpbmcgc2lnbmF0dXJlIChhbGwK
        ICAgIHBhcmFtZXRlcnMgYXJlIG9wdGlvbmFsKToKCiAgICBgYGBqYXZhc2Ny
        aXB0CiAgICBmdW5jdGlvbihpdGVtLCBpbmRleCwgZW51bWVyYWJsZSk7CiAg
        ICBgYGAKCiAgICAtIGBpdGVtYCBpcyB0aGUgY3VycmVudCBpdGVtIGluIHRo
        ZSBpdGVyYXRpb24uCiAgICAtIGBpbmRleGAgaXMgdGhlIGN1cnJlbnQgaW5k
        ZXggaW4gdGhlIGl0ZXJhdGlvbi4KICAgIC0gYGVudW1lcmFibGVgIGlzIHRo
        ZSBlbnVtZXJhYmxlIG9iamVjdCBpdHNlbGYuCgogICAgSXQgc2hvdWxkIHJl
        dHVybiB0aGUgYHRydWVgIG9yIGBmYWxzZWAuCgogICAgTm90ZSB0aGF0IGlu
        IGFkZGl0aW9uIHRvIGEgY2FsbGJhY2ssIHlvdSBjYW4gYWxzbyBwYXNzIGFu
        IG9wdGlvbmFsIHRhcmdldAogICAgb2JqZWN0IHRoYXQgd2lsbCBiZSBzZXQg
        YXMgYHRoaXNgIG9uIHRoZSBjb250ZXh0LiBUaGlzIGlzIGEgZ29vZCB3YXkK
        ICAgIHRvIGdpdmUgeW91ciBpdGVyYXRvciBmdW5jdGlvbiBhY2Nlc3MgdG8g
        dGhlIGN1cnJlbnQgb2JqZWN0LgoKICAgIEV4YW1wbGUgVXNhZ2U6CgogICAg
        YGBgamF2YXNjcmlwdAogICAgaWYgKHBlb3BsZS5ldmVyeShpc0VuZ2luZWVy
        KSkgeyBQYXljaGVja3MuYWRkQmlnQm9udXMoKTsgfQogICAgYGBgCgogICAg
        QG1ldGhvZCBldmVyeQogICAgQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2sg
        VGhlIGNhbGxiYWNrIHRvIGV4ZWN1dGUKICAgIEBwYXJhbSB7T2JqZWN0fSBb
        dGFyZ2V0XSBUaGUgdGFyZ2V0IG9iamVjdCB0byB1c2UKICAgIEByZXR1cm4g
        e0Jvb2xlYW59CiAgKi8KICBldmVyeTogZnVuY3Rpb24oY2FsbGJhY2ssIHRh
        cmdldCkgewogICAgcmV0dXJuICF0aGlzLmZpbmQoZnVuY3Rpb24oeCwgaWR4
        LCBpKSB7CiAgICAgIHJldHVybiAhY2FsbGJhY2suY2FsbCh0YXJnZXQsIHgs
        IGlkeCwgaSk7CiAgICB9KTsKICB9LAoKICAvKioKICAgIEBtZXRob2QgZXZl
        cnlCeQogICAgQHBhcmFtIHtTdHJpbmd9IGtleSB0aGUgcHJvcGVydHkgdG8g
        dGVzdAogICAgQHBhcmFtIHtTdHJpbmd9IFt2YWx1ZV0gb3B0aW9uYWwgdmFs
        dWUgdG8gdGVzdCBhZ2FpbnN0LgogICAgQGRlcHJlY2F0ZWQgVXNlIGBpc0V2
        ZXJ5YCBpbnN0ZWFkCiAgICBAcmV0dXJuIHtCb29sZWFufQogICovCiAgZXZl
        cnlCeTogRW1iZXIuYWxpYXNNZXRob2QoJ2lzRXZlcnknKSwKCiAgLyoqCiAg
        ICBAbWV0aG9kIGV2ZXJ5UHJvcGVydHkKICAgIEBwYXJhbSB7U3RyaW5nfSBr
        ZXkgdGhlIHByb3BlcnR5IHRvIHRlc3QKICAgIEBwYXJhbSB7U3RyaW5nfSBb
        dmFsdWVdIG9wdGlvbmFsIHZhbHVlIHRvIHRlc3QgYWdhaW5zdC4KICAgIEBk
        ZXByZWNhdGVkIFVzZSBgaXNFdmVyeWAgaW5zdGVhZAogICAgQHJldHVybiB7
        Qm9vbGVhbn0KICAqLwogIGV2ZXJ5UHJvcGVydHk6IEVtYmVyLmFsaWFzTWV0
        aG9kKCdpc0V2ZXJ5JyksCgogIC8qKgogICAgUmV0dXJucyBgdHJ1ZWAgaWYg
        dGhlIHBhc3NlZCBwcm9wZXJ0eSByZXNvbHZlcyB0byBgdHJ1ZWAgZm9yIGFs
        bCBpdGVtcyBpbgogICAgdGhlIGVudW1lcmFibGUuIFRoaXMgbWV0aG9kIGlz
        IG9mdGVuIHNpbXBsZXIvZmFzdGVyIHRoYW4gdXNpbmcgYSBjYWxsYmFjay4K
        CiAgICBAbWV0aG9kIGlzRXZlcnkKICAgIEBwYXJhbSB7U3RyaW5nfSBrZXkg
        dGhlIHByb3BlcnR5IHRvIHRlc3QKICAgIEBwYXJhbSB7U3RyaW5nfSBbdmFs
        dWVdIG9wdGlvbmFsIHZhbHVlIHRvIHRlc3QgYWdhaW5zdC4KICAgIEByZXR1
        cm4ge0Jvb2xlYW59CiAgKi8KICBpc0V2ZXJ5OiBmdW5jdGlvbihrZXksIHZh
        bHVlKSB7CiAgICByZXR1cm4gdGhpcy5ldmVyeShpdGVyLmFwcGx5KHRoaXMs
        IGFyZ3VtZW50cykpOwogIH0sCgogIC8qKgogICAgUmV0dXJucyBgdHJ1ZWAg
        aWYgdGhlIHBhc3NlZCBmdW5jdGlvbiByZXR1cm5zIHRydWUgZm9yIGFueSBp
        dGVtIGluIHRoZQogICAgZW51bWVyYXRpb24uIFRoaXMgY29ycmVzcG9uZHMg
        d2l0aCB0aGUgYHNvbWUoKWAgbWV0aG9kIGluIEphdmFTY3JpcHQgMS42LgoK
        ICAgIFRoZSBjYWxsYmFjayBtZXRob2QgeW91IHByb3ZpZGUgc2hvdWxkIGhh
        dmUgdGhlIGZvbGxvd2luZyBzaWduYXR1cmUgKGFsbAogICAgcGFyYW1ldGVy
        cyBhcmUgb3B0aW9uYWwpOgoKICAgIGBgYGphdmFzY3JpcHQKICAgIGZ1bmN0
        aW9uKGl0ZW0sIGluZGV4LCBlbnVtZXJhYmxlKTsKICAgIGBgYAoKICAgIC0g
        YGl0ZW1gIGlzIHRoZSBjdXJyZW50IGl0ZW0gaW4gdGhlIGl0ZXJhdGlvbi4K
        ICAgIC0gYGluZGV4YCBpcyB0aGUgY3VycmVudCBpbmRleCBpbiB0aGUgaXRl
        cmF0aW9uLgogICAgLSBgZW51bWVyYWJsZWAgaXMgdGhlIGVudW1lcmFibGUg
        b2JqZWN0IGl0c2VsZi4KCiAgICBJdCBzaG91bGQgcmV0dXJuIHRoZSBgdHJ1
        ZWAgdG8gaW5jbHVkZSB0aGUgaXRlbSBpbiB0aGUgcmVzdWx0cywgYGZhbHNl
        YAogICAgb3RoZXJ3aXNlLgoKICAgIE5vdGUgdGhhdCBpbiBhZGRpdGlvbiB0
        byBhIGNhbGxiYWNrLCB5b3UgY2FuIGFsc28gcGFzcyBhbiBvcHRpb25hbCB0
        YXJnZXQKICAgIG9iamVjdCB0aGF0IHdpbGwgYmUgc2V0IGFzIGB0aGlzYCBv
        biB0aGUgY29udGV4dC4gVGhpcyBpcyBhIGdvb2Qgd2F5CiAgICB0byBnaXZl
        IHlvdXIgaXRlcmF0b3IgZnVuY3Rpb24gYWNjZXNzIHRvIHRoZSBjdXJyZW50
        IG9iamVjdC4KCiAgICBVc2FnZSBFeGFtcGxlOgoKICAgIGBgYGphdmFzY3Jp
        cHQKICAgIGlmIChwZW9wbGUuYW55KGlzTWFuYWdlcikpIHsgUGF5Y2hlY2tz
        LmFkZEJpZ2dlckJvbnVzKCk7IH0KICAgIGBgYAoKICAgIEBtZXRob2QgYW55
        CiAgICBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjayBUaGUgY2FsbGJhY2sg
        dG8gZXhlY3V0ZQogICAgQHBhcmFtIHtPYmplY3R9IFt0YXJnZXRdIFRoZSB0
        YXJnZXQgb2JqZWN0IHRvIHVzZQogICAgQHJldHVybiB7Qm9vbGVhbn0gYHRy
        dWVgIGlmIHRoZSBwYXNzZWQgZnVuY3Rpb24gcmV0dXJucyBgdHJ1ZWAgZm9y
        IGFueSBpdGVtCiAgKi8KICBhbnk6IGZ1bmN0aW9uKGNhbGxiYWNrLCB0YXJn
        ZXQpIHsKICAgIHZhciBsZW4gICAgID0gZ2V0KHRoaXMsICdsZW5ndGgnKSwK
        ICAgICAgICBjb250ZXh0ID0gcG9wQ3R4KCksCiAgICAgICAgZm91bmQgICA9
        IGZhbHNlLAogICAgICAgIGxhc3QgICAgPSBudWxsLAogICAgICAgIG5leHQs
        IGlkeDsKCiAgICBpZiAodGFyZ2V0ID09PSB1bmRlZmluZWQpIHsgdGFyZ2V0
        ID0gbnVsbDsgfQoKICAgIGZvciAoaWR4ID0gMDsgaWR4IDwgbGVuICYmICFm
        b3VuZDsgaWR4KyspIHsKICAgICAgbmV4dCAgPSB0aGlzLm5leHRPYmplY3Qo
        aWR4LCBsYXN0LCBjb250ZXh0KTsKICAgICAgZm91bmQgPSBjYWxsYmFjay5j
        YWxsKHRhcmdldCwgbmV4dCwgaWR4LCB0aGlzKTsKICAgICAgbGFzdCAgPSBu
        ZXh0OwogICAgfQoKICAgIG5leHQgPSBsYXN0ID0gbnVsbDsKICAgIGNvbnRl
        eHQgPSBwdXNoQ3R4KGNvbnRleHQpOwogICAgcmV0dXJuIGZvdW5kOwogIH0s
        CgogIC8qKgogICAgUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIHBhc3NlZCBmdW5j
        dGlvbiByZXR1cm5zIHRydWUgZm9yIGFueSBpdGVtIGluIHRoZQogICAgZW51
        bWVyYXRpb24uIFRoaXMgY29ycmVzcG9uZHMgd2l0aCB0aGUgYHNvbWUoKWAg
        bWV0aG9kIGluIEphdmFTY3JpcHQgMS42LgoKICAgIFRoZSBjYWxsYmFjayBt
        ZXRob2QgeW91IHByb3ZpZGUgc2hvdWxkIGhhdmUgdGhlIGZvbGxvd2luZyBz
        aWduYXR1cmUgKGFsbAogICAgcGFyYW1ldGVycyBhcmUgb3B0aW9uYWwpOgoK
        ICAgIGBgYGphdmFzY3JpcHQKICAgIGZ1bmN0aW9uKGl0ZW0sIGluZGV4LCBl
        bnVtZXJhYmxlKTsKICAgIGBgYAoKICAgIC0gYGl0ZW1gIGlzIHRoZSBjdXJy
        ZW50IGl0ZW0gaW4gdGhlIGl0ZXJhdGlvbi4KICAgIC0gYGluZGV4YCBpcyB0
        aGUgY3VycmVudCBpbmRleCBpbiB0aGUgaXRlcmF0aW9uLgogICAgLSBgZW51
        bWVyYWJsZWAgaXMgdGhlIGVudW1lcmFibGUgb2JqZWN0IGl0c2VsZi4KCiAg
        ICBJdCBzaG91bGQgcmV0dXJuIHRoZSBgdHJ1ZWAgdG8gaW5jbHVkZSB0aGUg
        aXRlbSBpbiB0aGUgcmVzdWx0cywgYGZhbHNlYAogICAgb3RoZXJ3aXNlLgoK
        ICAgIE5vdGUgdGhhdCBpbiBhZGRpdGlvbiB0byBhIGNhbGxiYWNrLCB5b3Ug
        Y2FuIGFsc28gcGFzcyBhbiBvcHRpb25hbCB0YXJnZXQKICAgIG9iamVjdCB0
        aGF0IHdpbGwgYmUgc2V0IGFzIGB0aGlzYCBvbiB0aGUgY29udGV4dC4gVGhp
        cyBpcyBhIGdvb2Qgd2F5CiAgICB0byBnaXZlIHlvdXIgaXRlcmF0b3IgZnVu
        Y3Rpb24gYWNjZXNzIHRvIHRoZSBjdXJyZW50IG9iamVjdC4KCiAgICBVc2Fn
        ZSBFeGFtcGxlOgoKICAgIGBgYGphdmFzY3JpcHQKICAgIGlmIChwZW9wbGUu
        c29tZShpc01hbmFnZXIpKSB7IFBheWNoZWNrcy5hZGRCaWdnZXJCb251cygp
        OyB9CiAgICBgYGAKCiAgICBAbWV0aG9kIHNvbWUKICAgIEBwYXJhbSB7RnVu
        Y3Rpb259IGNhbGxiYWNrIFRoZSBjYWxsYmFjayB0byBleGVjdXRlCiAgICBA
        cGFyYW0ge09iamVjdH0gW3RhcmdldF0gVGhlIHRhcmdldCBvYmplY3QgdG8g
        dXNlCiAgICBAcmV0dXJuIHtCb29sZWFufSBgdHJ1ZWAgaWYgdGhlIHBhc3Nl
        ZCBmdW5jdGlvbiByZXR1cm5zIGB0cnVlYCBmb3IgYW55IGl0ZW0KICAgIEBk
        ZXByZWNhdGVkIFVzZSBgYW55YCBpbnN0ZWFkCiAgKi8KICBzb21lOiBFbWJl
        ci5hbGlhc01ldGhvZCgnYW55JyksCgogIC8qKgogICAgUmV0dXJucyBgdHJ1
        ZWAgaWYgdGhlIHBhc3NlZCBwcm9wZXJ0eSByZXNvbHZlcyB0byBgdHJ1ZWAg
        Zm9yIGFueSBpdGVtIGluCiAgICB0aGUgZW51bWVyYWJsZS4gVGhpcyBtZXRo
        b2QgaXMgb2Z0ZW4gc2ltcGxlci9mYXN0ZXIgdGhhbiB1c2luZyBhIGNhbGxi
        YWNrLgoKICAgIEBtZXRob2QgaXNBbnkKICAgIEBwYXJhbSB7U3RyaW5nfSBr
        ZXkgdGhlIHByb3BlcnR5IHRvIHRlc3QKICAgIEBwYXJhbSB7U3RyaW5nfSBb
        dmFsdWVdIG9wdGlvbmFsIHZhbHVlIHRvIHRlc3QgYWdhaW5zdC4KICAgIEBy
        ZXR1cm4ge0Jvb2xlYW59IGB0cnVlYCBpZiB0aGUgcGFzc2VkIGZ1bmN0aW9u
        IHJldHVybnMgYHRydWVgIGZvciBhbnkgaXRlbQogICovCiAgaXNBbnk6IGZ1
        bmN0aW9uKGtleSwgdmFsdWUpIHsKICAgIHJldHVybiB0aGlzLmFueShpdGVy
        LmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpOwogIH0sCgogIC8qKgogICAgQG1l
        dGhvZCBhbnlCeQogICAgQHBhcmFtIHtTdHJpbmd9IGtleSB0aGUgcHJvcGVy
        dHkgdG8gdGVzdAogICAgQHBhcmFtIHtTdHJpbmd9IFt2YWx1ZV0gb3B0aW9u
        YWwgdmFsdWUgdG8gdGVzdCBhZ2FpbnN0LgogICAgQHJldHVybiB7Qm9vbGVh
        bn0gYHRydWVgIGlmIHRoZSBwYXNzZWQgZnVuY3Rpb24gcmV0dXJucyBgdHJ1
        ZWAgZm9yIGFueSBpdGVtCiAgICBAZGVwcmVjYXRlZCBVc2UgYGlzQW55YCBp
        bnN0ZWFkCiAgKi8KICBhbnlCeTogRW1iZXIuYWxpYXNNZXRob2QoJ2lzQW55
        JyksCgogIC8qKgogICAgQG1ldGhvZCBzb21lUHJvcGVydHkKICAgIEBwYXJh
        bSB7U3RyaW5nfSBrZXkgdGhlIHByb3BlcnR5IHRvIHRlc3QKICAgIEBwYXJh
        bSB7U3RyaW5nfSBbdmFsdWVdIG9wdGlvbmFsIHZhbHVlIHRvIHRlc3QgYWdh
        aW5zdC4KICAgIEByZXR1cm4ge0Jvb2xlYW59IGB0cnVlYCBpZiB0aGUgcGFz
        c2VkIGZ1bmN0aW9uIHJldHVybnMgYHRydWVgIGZvciBhbnkgaXRlbQogICAg
        QGRlcHJlY2F0ZWQgVXNlIGBpc0FueWAgaW5zdGVhZAogICovCiAgc29tZVBy
        b3BlcnR5OiBFbWJlci5hbGlhc01ldGhvZCgnaXNBbnknKSwKCiAgLyoqCiAg
        ICBUaGlzIHdpbGwgY29tYmluZSB0aGUgdmFsdWVzIG9mIHRoZSBlbnVtZXJh
        dG9yIGludG8gYSBzaW5nbGUgdmFsdWUuIEl0CiAgICBpcyBhIHVzZWZ1bCB3
        YXkgdG8gY29sbGVjdCBhIHN1bW1hcnkgdmFsdWUgZnJvbSBhbiBlbnVtZXJh
        dGlvbi4gVGhpcwogICAgY29ycmVzcG9uZHMgdG8gdGhlIGByZWR1Y2UoKWAg
        bWV0aG9kIGRlZmluZWQgaW4gSmF2YVNjcmlwdCAxLjguCgogICAgVGhlIGNh
        bGxiYWNrIG1ldGhvZCB5b3UgcHJvdmlkZSBzaG91bGQgaGF2ZSB0aGUgZm9s
        bG93aW5nIHNpZ25hdHVyZSAoYWxsCiAgICBwYXJhbWV0ZXJzIGFyZSBvcHRp
        b25hbCk6CgogICAgYGBgamF2YXNjcmlwdAogICAgZnVuY3Rpb24ocHJldmlv
        dXNWYWx1ZSwgaXRlbSwgaW5kZXgsIGVudW1lcmFibGUpOwogICAgYGBgCgog
        ICAgLSBgcHJldmlvdXNWYWx1ZWAgaXMgdGhlIHZhbHVlIHJldHVybmVkIGJ5
        IHRoZSBsYXN0IGNhbGwgdG8gdGhlIGl0ZXJhdG9yLgogICAgLSBgaXRlbWAg
        aXMgdGhlIGN1cnJlbnQgaXRlbSBpbiB0aGUgaXRlcmF0aW9uLgogICAgLSBg
        aW5kZXhgIGlzIHRoZSBjdXJyZW50IGluZGV4IGluIHRoZSBpdGVyYXRpb24u
        CiAgICAtIGBlbnVtZXJhYmxlYCBpcyB0aGUgZW51bWVyYWJsZSBvYmplY3Qg
        aXRzZWxmLgoKICAgIFJldHVybiB0aGUgbmV3IGN1bXVsYXRpdmUgdmFsdWUu
        CgogICAgSW4gYWRkaXRpb24gdG8gdGhlIGNhbGxiYWNrIHlvdSBjYW4gYWxz
        byBwYXNzIGFuIGBpbml0aWFsVmFsdWVgLiBBbiBlcnJvcgogICAgd2lsbCBi
        ZSByYWlzZWQgaWYgeW91IGRvIG5vdCBwYXNzIGFuIGluaXRpYWwgdmFsdWUg
        YW5kIHRoZSBlbnVtZXJhdG9yIGlzCiAgICBlbXB0eS4KCiAgICBOb3RlIHRo
        YXQgdW5saWtlIHRoZSBvdGhlciBtZXRob2RzLCB0aGlzIG1ldGhvZCBkb2Vz
        IG5vdCBhbGxvdyB5b3UgdG8KICAgIHBhc3MgYSB0YXJnZXQgb2JqZWN0IHRv
        IHNldCBhcyB0aGlzIGZvciB0aGUgY2FsbGJhY2suIEl0J3MgcGFydCBvZiB0
        aGUKICAgIHNwZWMuIFNvcnJ5LgoKICAgIEBtZXRob2QgcmVkdWNlCiAgICBA
        cGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjayBUaGUgY2FsbGJhY2sgdG8gZXhl
        Y3V0ZQogICAgQHBhcmFtIHtPYmplY3R9IGluaXRpYWxWYWx1ZSBJbml0aWFs
        IHZhbHVlIGZvciB0aGUgcmVkdWNlCiAgICBAcGFyYW0ge1N0cmluZ30gcmVk
        dWNlclByb3BlcnR5IGludGVybmFsIHVzZSBvbmx5LgogICAgQHJldHVybiB7
        T2JqZWN0fSBUaGUgcmVkdWNlZCB2YWx1ZS4KICAqLwogIHJlZHVjZTogZnVu
        Y3Rpb24oY2FsbGJhY2ssIGluaXRpYWxWYWx1ZSwgcmVkdWNlclByb3BlcnR5
        KSB7CiAgICBpZiAodHlwZW9mIGNhbGxiYWNrICE9PSAiZnVuY3Rpb24iKSB7
        IHRocm93IG5ldyBUeXBlRXJyb3IoKTsgfQoKICAgIHZhciByZXQgPSBpbml0
        aWFsVmFsdWU7CgogICAgdGhpcy5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0sIGkp
        IHsKICAgICAgcmV0ID0gY2FsbGJhY2socmV0LCBpdGVtLCBpLCB0aGlzLCBy
        ZWR1Y2VyUHJvcGVydHkpOwogICAgfSwgdGhpcyk7CgogICAgcmV0dXJuIHJl
        dDsKICB9LAoKICAvKioKICAgIEludm9rZXMgdGhlIG5hbWVkIG1ldGhvZCBv
        biBldmVyeSBvYmplY3QgaW4gdGhlIHJlY2VpdmVyIHRoYXQKICAgIGltcGxl
        bWVudHMgaXQuIFRoaXMgbWV0aG9kIGNvcnJlc3BvbmRzIHRvIHRoZSBpbXBs
        ZW1lbnRhdGlvbiBpbgogICAgUHJvdG90eXBlIDEuNi4KCiAgICBAbWV0aG9k
        IGludm9rZQogICAgQHBhcmFtIHtTdHJpbmd9IG1ldGhvZE5hbWUgdGhlIG5h
        bWUgb2YgdGhlIG1ldGhvZAogICAgQHBhcmFtIHtPYmplY3QuLi59IGFyZ3Mg
        b3B0aW9uYWwgYXJndW1lbnRzIHRvIHBhc3MgYXMgd2VsbC4KICAgIEByZXR1
        cm4ge0FycmF5fSByZXR1cm4gdmFsdWVzIGZyb20gY2FsbGluZyBpbnZva2Uu
        CiAgKi8KICBpbnZva2U6IGZ1bmN0aW9uKG1ldGhvZE5hbWUpIHsKICAgIHZh
        ciBhcmdzLCByZXQgPSBFbWJlci5BKCk7CiAgICBpZiAoYXJndW1lbnRzLmxl
        bmd0aD4xKSBhcmdzID0gYV9zbGljZS5jYWxsKGFyZ3VtZW50cywgMSk7Cgog
        ICAgdGhpcy5mb3JFYWNoKGZ1bmN0aW9uKHgsIGlkeCkgewogICAgICB2YXIg
        bWV0aG9kID0geCAmJiB4W21ldGhvZE5hbWVdOwogICAgICBpZiAoJ2Z1bmN0
        aW9uJyA9PT0gdHlwZW9mIG1ldGhvZCkgewogICAgICAgIHJldFtpZHhdID0g
        YXJncyA/IG1ldGhvZC5hcHBseSh4LCBhcmdzKSA6IHhbbWV0aG9kTmFtZV0o
        KTsKICAgICAgfQogICAgfSwgdGhpcyk7CgogICAgcmV0dXJuIHJldDsKICB9
        LAoKICAvKioKICAgIFNpbXBseSBjb252ZXJ0cyB0aGUgZW51bWVyYWJsZSBp
        bnRvIGEgZ2VudWluZSBhcnJheS4gVGhlIG9yZGVyIGlzIG5vdAogICAgZ3Vh
        cmFudGVlZC4gQ29ycmVzcG9uZHMgdG8gdGhlIG1ldGhvZCBpbXBsZW1lbnRl
        ZCBieSBQcm90b3R5cGUuCgogICAgQG1ldGhvZCB0b0FycmF5CiAgICBAcmV0
        dXJuIHtBcnJheX0gdGhlIGVudW1lcmFibGUgYXMgYW4gYXJyYXkuCiAgKi8K
        ICB0b0FycmF5OiBmdW5jdGlvbigpIHsKICAgIHZhciByZXQgPSBFbWJlci5B
        KCk7CiAgICB0aGlzLmZvckVhY2goZnVuY3Rpb24obywgaWR4KSB7IHJldFtp
        ZHhdID0gbzsgfSk7CiAgICByZXR1cm4gcmV0IDsKICB9LAoKICAvKioKICAg
        IFJldHVybnMgYSBjb3B5IG9mIHRoZSBhcnJheSB3aXRoIGFsbCBudWxsIGFu
        ZCB1bmRlZmluZWQgZWxlbWVudHMgcmVtb3ZlZC4KCiAgICBgYGBqYXZhc2Ny
        aXB0CiAgICB2YXIgYXJyID0gWyJhIiwgbnVsbCwgImMiLCB1bmRlZmluZWRd
        OwogICAgYXJyLmNvbXBhY3QoKTsgIC8vIFsiYSIsICJjIl0KICAgIGBgYAoK
        ICAgIEBtZXRob2QgY29tcGFjdAogICAgQHJldHVybiB7QXJyYXl9IHRoZSBh
        cnJheSB3aXRob3V0IG51bGwgYW5kIHVuZGVmaW5lZCBlbGVtZW50cy4KICAq
        LwogIGNvbXBhY3Q6IGZ1bmN0aW9uKCkgewogICAgcmV0dXJuIHRoaXMuZmls
        dGVyKGZ1bmN0aW9uKHZhbHVlKSB7IHJldHVybiB2YWx1ZSAhPSBudWxsOyB9
        KTsKICB9LAoKICAvKioKICAgIFJldHVybnMgYSBuZXcgZW51bWVyYWJsZSB0
        aGF0IGV4Y2x1ZGVzIHRoZSBwYXNzZWQgdmFsdWUuIFRoZSBkZWZhdWx0CiAg
        ICBpbXBsZW1lbnRhdGlvbiByZXR1cm5zIGFuIGFycmF5IHJlZ2FyZGxlc3Mg
        b2YgdGhlIHJlY2VpdmVyIHR5cGUgdW5sZXNzCiAgICB0aGUgcmVjZWl2ZXIg
        ZG9lcyBub3QgY29udGFpbiB0aGUgdmFsdWUuCgogICAgYGBgamF2YXNjcmlw
        dAogICAgdmFyIGFyciA9IFsiYSIsICJiIiwgImEiLCAiYyJdOwogICAgYXJy
        LndpdGhvdXQoImEiKTsgIC8vIFsiYiIsICJjIl0KICAgIGBgYAoKICAgIEBt
        ZXRob2Qgd2l0aG91dAogICAgQHBhcmFtIHtPYmplY3R9IHZhbHVlCiAgICBA
        cmV0dXJuIHtFbWJlci5FbnVtZXJhYmxlfQogICovCiAgd2l0aG91dDogZnVu
        Y3Rpb24odmFsdWUpIHsKICAgIGlmICghdGhpcy5jb250YWlucyh2YWx1ZSkp
        IHJldHVybiB0aGlzOyAvLyBub3RoaW5nIHRvIGRvCiAgICB2YXIgcmV0ID0g
        RW1iZXIuQSgpOwogICAgdGhpcy5mb3JFYWNoKGZ1bmN0aW9uKGspIHsKICAg
        ICAgaWYgKGsgIT09IHZhbHVlKSByZXRbcmV0Lmxlbmd0aF0gPSBrOwogICAg
        fSkgOwogICAgcmV0dXJuIHJldCA7CiAgfSwKCiAgLyoqCiAgICBSZXR1cm5z
        IGEgbmV3IGVudW1lcmFibGUgdGhhdCBjb250YWlucyBvbmx5IHVuaXF1ZSB2
        YWx1ZXMuIFRoZSBkZWZhdWx0CiAgICBpbXBsZW1lbnRhdGlvbiByZXR1cm5z
        IGFuIGFycmF5IHJlZ2FyZGxlc3Mgb2YgdGhlIHJlY2VpdmVyIHR5cGUuCgog
        ICAgYGBgamF2YXNjcmlwdAogICAgdmFyIGFyciA9IFsiYSIsICJhIiwgImIi
        LCAiYiJdOwogICAgYXJyLnVuaXEoKTsgIC8vIFsiYSIsICJiIl0KICAgIGBg
        YAoKICAgIEBtZXRob2QgdW5pcQogICAgQHJldHVybiB7RW1iZXIuRW51bWVy
        YWJsZX0KICAqLwogIHVuaXE6IGZ1bmN0aW9uKCkgewogICAgdmFyIHJldCA9
        IEVtYmVyLkEoKTsKICAgIHRoaXMuZm9yRWFjaChmdW5jdGlvbihrKSB7CiAg
        ICAgIGlmIChhX2luZGV4T2YocmV0LCBrKTwwKSByZXQucHVzaChrKTsKICAg
        IH0pOwogICAgcmV0dXJuIHJldDsKICB9LAoKICAvKioKICAgIFRoaXMgcHJv
        cGVydHkgd2lsbCB0cmlnZ2VyIGFueXRpbWUgdGhlIGVudW1lcmFibGUncyBj
        b250ZW50IGNoYW5nZXMuCiAgICBZb3UgY2FuIG9ic2VydmUgdGhpcyBwcm9w
        ZXJ0eSB0byBiZSBub3RpZmllZCBvZiBjaGFuZ2VzIHRvIHRoZSBlbnVtZXJh
        YmxlcwogICAgY29udGVudC4KCiAgICBGb3IgcGxhaW4gZW51bWVyYWJsZXMs
        IHRoaXMgcHJvcGVydHkgaXMgcmVhZCBvbmx5LiBgRW1iZXIuQXJyYXlgIG92
        ZXJyaWRlcwogICAgdGhpcyBtZXRob2QuCgogICAgQHByb3BlcnR5IFtdCiAg
        ICBAdHlwZSBFbWJlci5BcnJheQogICAgQHJldHVybiB0aGlzCiAgKi8KICAn
        W10nOiBFbWJlci5jb21wdXRlZChmdW5jdGlvbihrZXksIHZhbHVlKSB7CiAg
        ICByZXR1cm4gdGhpczsKICB9KSwKCiAgLy8gLi4uLi4uLi4uLi4uLi4uLi4u
        Li4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLgogIC8v
        IEVOVU1FUkFCTEUgT0JTRVJWRVJTCiAgLy8KCiAgLyoqCiAgICBSZWdpc3Rl
        cnMgYW4gZW51bWVyYWJsZSBvYnNlcnZlci4gTXVzdCBpbXBsZW1lbnQgYEVt
        YmVyLkVudW1lcmFibGVPYnNlcnZlcmAKICAgIG1peGluLgoKICAgIEBtZXRo
        b2QgYWRkRW51bWVyYWJsZU9ic2VydmVyCiAgICBAcGFyYW0ge09iamVjdH0g
        dGFyZ2V0CiAgICBAcGFyYW0ge0hhc2h9IFtvcHRzXQogICAgQHJldHVybiB0
        aGlzCiAgKi8KICBhZGRFbnVtZXJhYmxlT2JzZXJ2ZXI6IGZ1bmN0aW9uKHRh
        cmdldCwgb3B0cykgewogICAgdmFyIHdpbGxDaGFuZ2UgPSAob3B0cyAmJiBv
        cHRzLndpbGxDaGFuZ2UpIHx8ICdlbnVtZXJhYmxlV2lsbENoYW5nZScsCiAg
        ICAgICAgZGlkQ2hhbmdlICA9IChvcHRzICYmIG9wdHMuZGlkQ2hhbmdlKSB8
        fCAnZW51bWVyYWJsZURpZENoYW5nZSc7CgogICAgdmFyIGhhc09ic2VydmVy
        cyA9IGdldCh0aGlzLCAnaGFzRW51bWVyYWJsZU9ic2VydmVycycpOwogICAg
        aWYgKCFoYXNPYnNlcnZlcnMpIEVtYmVyLnByb3BlcnR5V2lsbENoYW5nZSh0
        aGlzLCAnaGFzRW51bWVyYWJsZU9ic2VydmVycycpOwogICAgRW1iZXIuYWRk
        TGlzdGVuZXIodGhpcywgJ0BlbnVtZXJhYmxlOmJlZm9yZScsIHRhcmdldCwg
        d2lsbENoYW5nZSk7CiAgICBFbWJlci5hZGRMaXN0ZW5lcih0aGlzLCAnQGVu
        dW1lcmFibGU6Y2hhbmdlJywgdGFyZ2V0LCBkaWRDaGFuZ2UpOwogICAgaWYg
        KCFoYXNPYnNlcnZlcnMpIEVtYmVyLnByb3BlcnR5RGlkQ2hhbmdlKHRoaXMs
        ICdoYXNFbnVtZXJhYmxlT2JzZXJ2ZXJzJyk7CiAgICByZXR1cm4gdGhpczsK
        ICB9LAoKICAvKioKICAgIFJlbW92ZXMgYSByZWdpc3RlcmVkIGVudW1lcmFi
        bGUgb2JzZXJ2ZXIuCgogICAgQG1ldGhvZCByZW1vdmVFbnVtZXJhYmxlT2Jz
        ZXJ2ZXIKICAgIEBwYXJhbSB7T2JqZWN0fSB0YXJnZXQKICAgIEBwYXJhbSB7
        SGFzaH0gW29wdHNdCiAgICBAcmV0dXJuIHRoaXMKICAqLwogIHJlbW92ZUVu
        dW1lcmFibGVPYnNlcnZlcjogZnVuY3Rpb24odGFyZ2V0LCBvcHRzKSB7CiAg
        ICB2YXIgd2lsbENoYW5nZSA9IChvcHRzICYmIG9wdHMud2lsbENoYW5nZSkg
        fHwgJ2VudW1lcmFibGVXaWxsQ2hhbmdlJywKICAgICAgICBkaWRDaGFuZ2Ug
        ID0gKG9wdHMgJiYgb3B0cy5kaWRDaGFuZ2UpIHx8ICdlbnVtZXJhYmxlRGlk
        Q2hhbmdlJzsKCiAgICB2YXIgaGFzT2JzZXJ2ZXJzID0gZ2V0KHRoaXMsICdo
        YXNFbnVtZXJhYmxlT2JzZXJ2ZXJzJyk7CiAgICBpZiAoaGFzT2JzZXJ2ZXJz
        KSBFbWJlci5wcm9wZXJ0eVdpbGxDaGFuZ2UodGhpcywgJ2hhc0VudW1lcmFi
        bGVPYnNlcnZlcnMnKTsKICAgIEVtYmVyLnJlbW92ZUxpc3RlbmVyKHRoaXMs
        ICdAZW51bWVyYWJsZTpiZWZvcmUnLCB0YXJnZXQsIHdpbGxDaGFuZ2UpOwog
        ICAgRW1iZXIucmVtb3ZlTGlzdGVuZXIodGhpcywgJ0BlbnVtZXJhYmxlOmNo
        YW5nZScsIHRhcmdldCwgZGlkQ2hhbmdlKTsKICAgIGlmIChoYXNPYnNlcnZl
        cnMpIEVtYmVyLnByb3BlcnR5RGlkQ2hhbmdlKHRoaXMsICdoYXNFbnVtZXJh
        YmxlT2JzZXJ2ZXJzJyk7CiAgICByZXR1cm4gdGhpczsKICB9LAoKICAvKioK
        ICAgIEJlY29tZXMgdHJ1ZSB3aGVuZXZlciB0aGUgYXJyYXkgY3VycmVudGx5
        IGhhcyBvYnNlcnZlcnMgd2F0Y2hpbmcgY2hhbmdlcwogICAgb24gdGhlIGFy
        cmF5LgoKICAgIEBwcm9wZXJ0eSBoYXNFbnVtZXJhYmxlT2JzZXJ2ZXJzCiAg
        ICBAdHlwZSBCb29sZWFuCiAgKi8KICBoYXNFbnVtZXJhYmxlT2JzZXJ2ZXJz
        OiBFbWJlci5jb21wdXRlZChmdW5jdGlvbigpIHsKICAgIHJldHVybiBFbWJl
        ci5oYXNMaXN0ZW5lcnModGhpcywgJ0BlbnVtZXJhYmxlOmNoYW5nZScpIHx8
        IEVtYmVyLmhhc0xpc3RlbmVycyh0aGlzLCAnQGVudW1lcmFibGU6YmVmb3Jl
        Jyk7CiAgfSksCgoKICAvKioKICAgIEludm9rZSB0aGlzIG1ldGhvZCBqdXN0
        IGJlZm9yZSB0aGUgY29udGVudHMgb2YgeW91ciBlbnVtZXJhYmxlIHdpbGwK
        ICAgIGNoYW5nZS4gWW91IGNhbiBlaXRoZXIgb21pdCB0aGUgcGFyYW1ldGVy
        cyBjb21wbGV0ZWx5IG9yIHBhc3MgdGhlIG9iamVjdHMKICAgIHRvIGJlIHJl
        bW92ZWQgb3IgYWRkZWQgaWYgYXZhaWxhYmxlIG9yIGp1c3QgYSBjb3VudC4K
        CiAgICBAbWV0aG9kIGVudW1lcmFibGVDb250ZW50V2lsbENoYW5nZQogICAg
        QHBhcmFtIHtFbWJlci5FbnVtZXJhYmxlfE51bWJlcn0gcmVtb3ZpbmcgQW4g
        ZW51bWVyYWJsZSBvZiB0aGUgb2JqZWN0cyB0bwogICAgICBiZSByZW1vdmVk
        IG9yIHRoZSBudW1iZXIgb2YgaXRlbXMgdG8gYmUgcmVtb3ZlZC4KICAgIEBw
        YXJhbSB7RW1iZXIuRW51bWVyYWJsZXxOdW1iZXJ9IGFkZGluZyBBbiBlbnVt
        ZXJhYmxlIG9mIHRoZSBvYmplY3RzIHRvIGJlCiAgICAgIGFkZGVkIG9yIHRo
        ZSBudW1iZXIgb2YgaXRlbXMgdG8gYmUgYWRkZWQuCiAgICBAY2hhaW5hYmxl
        CiAgKi8KICBlbnVtZXJhYmxlQ29udGVudFdpbGxDaGFuZ2U6IGZ1bmN0aW9u
        KHJlbW92aW5nLCBhZGRpbmcpIHsKCiAgICB2YXIgcmVtb3ZlQ250LCBhZGRD
        bnQsIGhhc0RlbHRhOwoKICAgIGlmICgnbnVtYmVyJyA9PT0gdHlwZW9mIHJl
        bW92aW5nKSByZW1vdmVDbnQgPSByZW1vdmluZzsKICAgIGVsc2UgaWYgKHJl
        bW92aW5nKSByZW1vdmVDbnQgPSBnZXQocmVtb3ZpbmcsICdsZW5ndGgnKTsK
        ICAgIGVsc2UgcmVtb3ZlQ250ID0gcmVtb3ZpbmcgPSAtMTsKCiAgICBpZiAo
        J251bWJlcicgPT09IHR5cGVvZiBhZGRpbmcpIGFkZENudCA9IGFkZGluZzsK
        ICAgIGVsc2UgaWYgKGFkZGluZykgYWRkQ250ID0gZ2V0KGFkZGluZywnbGVu
        Z3RoJyk7CiAgICBlbHNlIGFkZENudCA9IGFkZGluZyA9IC0xOwoKICAgIGhh
        c0RlbHRhID0gYWRkQ250PDAgfHwgcmVtb3ZlQ250PDAgfHwgYWRkQ250LXJl
        bW92ZUNudCE9PTA7CgogICAgaWYgKHJlbW92aW5nID09PSAtMSkgcmVtb3Zp
        bmcgPSBudWxsOwogICAgaWYgKGFkZGluZyAgID09PSAtMSkgYWRkaW5nICAg
        PSBudWxsOwoKICAgIEVtYmVyLnByb3BlcnR5V2lsbENoYW5nZSh0aGlzLCAn
        W10nKTsKICAgIGlmIChoYXNEZWx0YSkgRW1iZXIucHJvcGVydHlXaWxsQ2hh
        bmdlKHRoaXMsICdsZW5ndGgnKTsKICAgIEVtYmVyLnNlbmRFdmVudCh0aGlz
        LCAnQGVudW1lcmFibGU6YmVmb3JlJywgW3RoaXMsIHJlbW92aW5nLCBhZGRp
        bmddKTsKCiAgICByZXR1cm4gdGhpczsKICB9LAoKICAvKioKICAgIEludm9r
        ZSB0aGlzIG1ldGhvZCB3aGVuIHRoZSBjb250ZW50cyBvZiB5b3VyIGVudW1l
        cmFibGUgaGFzIGNoYW5nZWQuCiAgICBUaGlzIHdpbGwgbm90aWZ5IGFueSBv
        YnNlcnZlcnMgd2F0Y2hpbmcgZm9yIGNvbnRlbnQgY2hhbmdlcy4gSWYgeW91
        ciBhcmUKICAgIGltcGxlbWVudGluZyBhbiBvcmRlcmVkIGVudW1lcmFibGUg
        KHN1Y2ggYXMgYW4gYXJyYXkpLCBhbHNvIHBhc3MgdGhlCiAgICBzdGFydCBh
        bmQgZW5kIHZhbHVlcyB3aGVyZSB0aGUgY29udGVudCBjaGFuZ2VkIHNvIHRo
        YXQgaXQgY2FuIGJlIHVzZWQgdG8KICAgIG5vdGlmeSByYW5nZSBvYnNlcnZl
        cnMuCgogICAgQG1ldGhvZCBlbnVtZXJhYmxlQ29udGVudERpZENoYW5nZQog
        ICAgQHBhcmFtIHtFbWJlci5FbnVtZXJhYmxlfE51bWJlcn0gcmVtb3Zpbmcg
        QW4gZW51bWVyYWJsZSBvZiB0aGUgb2JqZWN0cyB0bwogICAgICBiZSByZW1v
        dmVkIG9yIHRoZSBudW1iZXIgb2YgaXRlbXMgdG8gYmUgcmVtb3ZlZC4KICAg
        IEBwYXJhbSB7RW1iZXIuRW51bWVyYWJsZXxOdW1iZXJ9IGFkZGluZyAgQW4g
        ZW51bWVyYWJsZSBvZiB0aGUgb2JqZWN0cyB0bwogICAgICBiZSBhZGRlZCBv
        ciB0aGUgbnVtYmVyIG9mIGl0ZW1zIHRvIGJlIGFkZGVkLgogICAgQGNoYWlu
        YWJsZQogICovCiAgZW51bWVyYWJsZUNvbnRlbnREaWRDaGFuZ2U6IGZ1bmN0
        aW9uKHJlbW92aW5nLCBhZGRpbmcpIHsKICAgIHZhciByZW1vdmVDbnQsIGFk
        ZENudCwgaGFzRGVsdGE7CgogICAgaWYgKCdudW1iZXInID09PSB0eXBlb2Yg
        cmVtb3ZpbmcpIHJlbW92ZUNudCA9IHJlbW92aW5nOwogICAgZWxzZSBpZiAo
        cmVtb3ZpbmcpIHJlbW92ZUNudCA9IGdldChyZW1vdmluZywgJ2xlbmd0aCcp
        OwogICAgZWxzZSByZW1vdmVDbnQgPSByZW1vdmluZyA9IC0xOwoKICAgIGlm
        ICgnbnVtYmVyJyA9PT0gdHlwZW9mIGFkZGluZykgYWRkQ250ID0gYWRkaW5n
        OwogICAgZWxzZSBpZiAoYWRkaW5nKSBhZGRDbnQgPSBnZXQoYWRkaW5nLCAn
        bGVuZ3RoJyk7CiAgICBlbHNlIGFkZENudCA9IGFkZGluZyA9IC0xOwoKICAg
        IGhhc0RlbHRhID0gYWRkQ250PDAgfHwgcmVtb3ZlQ250PDAgfHwgYWRkQ250
        LXJlbW92ZUNudCE9PTA7CgogICAgaWYgKHJlbW92aW5nID09PSAtMSkgcmVt
        b3ZpbmcgPSBudWxsOwogICAgaWYgKGFkZGluZyAgID09PSAtMSkgYWRkaW5n
        ICAgPSBudWxsOwoKICAgIEVtYmVyLnNlbmRFdmVudCh0aGlzLCAnQGVudW1l
        cmFibGU6Y2hhbmdlJywgW3RoaXMsIHJlbW92aW5nLCBhZGRpbmddKTsKICAg
        IGlmIChoYXNEZWx0YSkgRW1iZXIucHJvcGVydHlEaWRDaGFuZ2UodGhpcywg
        J2xlbmd0aCcpOwogICAgRW1iZXIucHJvcGVydHlEaWRDaGFuZ2UodGhpcywg
        J1tdJyk7CgogICAgcmV0dXJuIHRoaXMgOwogIH0sCgogIC8qKgogICAgQ29u
        dmVydHMgdGhlIGVudW1lcmFibGUgaW50byBhbiBhcnJheSBhbmQgc29ydHMg
        YnkgdGhlIGtleXMKICAgIHNwZWNpZmllZCBpbiB0aGUgYXJndW1lbnQuCgog
        ICAgWW91IG1heSBwcm92aWRlIG11bHRpcGxlIGFyZ3VtZW50cyB0byBzb3J0
        IGJ5IG11bHRpcGxlIHByb3BlcnRpZXMuCgogICAgQG1ldGhvZCBzb3J0QnkK
        ICAgIEBwYXJhbSB7U3RyaW5nfSBwcm9wZXJ0eSBuYW1lKHMpIHRvIHNvcnQg
        b24KICAgIEByZXR1cm4ge0FycmF5fSBUaGUgc29ydGVkIGFycmF5LgogICAg
        Ki8KICBzb3J0Qnk6IGZ1bmN0aW9uKCkgewogICAgdmFyIHNvcnRLZXlzID0g
        YXJndW1lbnRzOwogICAgcmV0dXJuIHRoaXMudG9BcnJheSgpLnNvcnQoZnVu
        Y3Rpb24oYSwgYil7CiAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBzb3J0S2V5
        cy5sZW5ndGg7IGkrKykgewogICAgICAgIHZhciBrZXkgPSBzb3J0S2V5c1tp
        XSwKICAgICAgICBwcm9wQSA9IGdldChhLCBrZXkpLAogICAgICAgIHByb3BC
        ID0gZ2V0KGIsIGtleSk7CiAgICAgICAgLy8gcmV0dXJuIDEgb3IgLTEgZWxz
        ZSBjb250aW51ZSB0byB0aGUgbmV4dCBzb3J0S2V5CiAgICAgICAgdmFyIGNv
        bXBhcmVWYWx1ZSA9IEVtYmVyLmNvbXBhcmUocHJvcEEsIHByb3BCKTsKICAg
        ICAgICBpZiAoY29tcGFyZVZhbHVlKSB7IHJldHVybiBjb21wYXJlVmFsdWU7
        IH0KICAgICAgfQogICAgICByZXR1cm4gMDsKICAgIH0pOwogIH0KfSk7Cgp9
        KSgpOwoKCgooZnVuY3Rpb24oKSB7Ci8qKgpAbW9kdWxlIGVtYmVyCkBzdWJt
        b2R1bGUgZW1iZXItcnVudGltZQoqLwoKLy8gLi4uLi4uLi4uLi4uLi4uLi4u
        Li4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLgovLyBI
        RUxQRVJTCi8vCgp2YXIgZ2V0ID0gRW1iZXIuZ2V0LCBzZXQgPSBFbWJlci5z
        ZXQsIGlzTm9uZSA9IEVtYmVyLmlzTm9uZSwgbWFwID0gRW1iZXIuRW51bWVy
        YWJsZVV0aWxzLm1hcCwgY2FjaGVGb3IgPSBFbWJlci5jYWNoZUZvcjsKCi8v
        IC4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4u
        Li4uLi4uLi4uLi4uLi4KLy8gQVJSQVkKLy8KLyoqCiAgVGhpcyBtb2R1bGUg
        aW1wbGVtZW50cyBPYnNlcnZlci1mcmllbmRseSBBcnJheS1saWtlIGJlaGF2
        aW9yLiBUaGlzIG1peGluIGlzCiAgcGlja2VkIHVwIGJ5IHRoZSBBcnJheSBj
        bGFzcyBhcyB3ZWxsIGFzIG90aGVyIGNvbnRyb2xsZXJzLCBldGMuIHRoYXQg
        d2FudCB0bwogIGFwcGVhciB0byBiZSBhcnJheXMuCgogIFVubGlrZSBgRW1i
        ZXIuRW51bWVyYWJsZSxgIHRoaXMgbWl4aW4gZGVmaW5lcyBtZXRob2RzIHNw
        ZWNpZmljYWxseSBmb3IKICBjb2xsZWN0aW9ucyB0aGF0IHByb3ZpZGUgaW5k
        ZXgtb3JkZXJlZCBhY2Nlc3MgdG8gdGhlaXIgY29udGVudHMuIFdoZW4geW91
        CiAgYXJlIGRlc2lnbmluZyBjb2RlIHRoYXQgbmVlZHMgdG8gYWNjZXB0IGFu
        eSBraW5kIG9mIEFycmF5LWxpa2Ugb2JqZWN0LCB5b3UKICBzaG91bGQgdXNl
        IHRoZXNlIG1ldGhvZHMgaW5zdGVhZCBvZiBBcnJheSBwcmltaXRpdmVzIGJl
        Y2F1c2UgdGhlc2Ugd2lsbAogIHByb3Blcmx5IG5vdGlmeSBvYnNlcnZlcnMg
        b2YgY2hhbmdlcyB0byB0aGUgYXJyYXkuCgogIEFsdGhvdWdoIHRoZXNlIG1l
        dGhvZHMgYXJlIGVmZmljaWVudCwgdGhleSBkbyBhZGQgYSBsYXllciBvZiBp
        bmRpcmVjdGlvbiB0bwogIHlvdXIgYXBwbGljYXRpb24gc28gaXQgaXMgYSBn
        b29kIGlkZWEgdG8gdXNlIHRoZW0gb25seSB3aGVuIHlvdSBuZWVkIHRoZQog
        IGZsZXhpYmlsaXR5IG9mIHVzaW5nIGJvdGggdHJ1ZSBKYXZhU2NyaXB0IGFy
        cmF5cyBhbmQgInZpcnR1YWwiIGFycmF5cyBzdWNoCiAgYXMgY29udHJvbGxl
        cnMgYW5kIGNvbGxlY3Rpb25zLgoKICBZb3UgY2FuIHVzZSB0aGUgbWV0aG9k
        cyBkZWZpbmVkIGluIHRoaXMgbW9kdWxlIHRvIGFjY2VzcyBhbmQgbW9kaWZ5
        IGFycmF5CiAgY29udGVudHMgaW4gYSBLVk8tZnJpZW5kbHkgd2F5LiBZb3Ug
        Y2FuIGFsc28gYmUgbm90aWZpZWQgd2hlbmV2ZXIgdGhlCiAgbWVtYmVyc2hp
        cCBvZiBhbiBhcnJheSBjaGFuZ2VzIGJ5IGNoYW5naW5nIHRoZSBzeW50YXgg
        b2YgdGhlIHByb3BlcnR5IHRvCiAgYC5vYnNlcnZlcygnKm15UHJvcGVydHku
        W10nKWAuCgogIFRvIHN1cHBvcnQgYEVtYmVyLkFycmF5YCBpbiB5b3VyIG93
        biBjbGFzcywgeW91IG11c3Qgb3ZlcnJpZGUgdHdvCiAgcHJpbWl0aXZlcyB0
        byB1c2UgaXQ6IGByZXBsYWNlKClgIGFuZCBgb2JqZWN0QXQoKWAuCgogIE5v
        dGUgdGhhdCB0aGUgRW1iZXIuQXJyYXkgbWl4aW4gYWxzbyBpbmNvcnBvcmF0
        ZXMgdGhlIGBFbWJlci5FbnVtZXJhYmxlYAogIG1peGluLiBBbGwgYEVtYmVy
        LkFycmF5YC1saWtlIG9iamVjdHMgYXJlIGFsc28gZW51bWVyYWJsZS4KCiAg
        QGNsYXNzIEFycmF5CiAgQG5hbWVzcGFjZSBFbWJlcgogIEB1c2VzIEVtYmVy
        LkVudW1lcmFibGUKICBAc2luY2UgRW1iZXIgMC45LjAKKi8KRW1iZXIuQXJy
        YXkgPSBFbWJlci5NaXhpbi5jcmVhdGUoRW1iZXIuRW51bWVyYWJsZSwgewoK
        ICAvKioKICAgIFlvdXIgYXJyYXkgbXVzdCBzdXBwb3J0IHRoZSBgbGVuZ3Ro
        YCBwcm9wZXJ0eS4gWW91ciByZXBsYWNlIG1ldGhvZHMgc2hvdWxkCiAgICBz
        ZXQgdGhpcyBwcm9wZXJ0eSB3aGVuZXZlciBpdCBjaGFuZ2VzLgoKICAgIEBw
        cm9wZXJ0eSB7TnVtYmVyfSBsZW5ndGgKICAqLwogIGxlbmd0aDogRW1iZXIu
        cmVxdWlyZWQoKSwKCiAgLyoqCiAgICBSZXR1cm5zIHRoZSBvYmplY3QgYXQg
        dGhlIGdpdmVuIGBpbmRleGAuIElmIHRoZSBnaXZlbiBgaW5kZXhgIGlzIG5l
        Z2F0aXZlCiAgICBvciBpcyBncmVhdGVyIG9yIGVxdWFsIHRoYW4gdGhlIGFy
        cmF5IGxlbmd0aCwgcmV0dXJucyBgdW5kZWZpbmVkYC4KCiAgICBUaGlzIGlz
        IG9uZSBvZiB0aGUgcHJpbWl0aXZlcyB5b3UgbXVzdCBpbXBsZW1lbnQgdG8g
        c3VwcG9ydCBgRW1iZXIuQXJyYXlgLgogICAgSWYgeW91ciBvYmplY3Qgc3Vw
        cG9ydHMgcmV0cmlldmluZyB0aGUgdmFsdWUgb2YgYW4gYXJyYXkgaXRlbSB1
        c2luZyBgZ2V0KClgCiAgICAoaS5lLiBgbXlBcnJheS5nZXQoMClgKSwgdGhl
        biB5b3UgZG8gbm90IG5lZWQgdG8gaW1wbGVtZW50IHRoaXMgbWV0aG9kCiAg
        ICB5b3Vyc2VsZi4KCiAgICBgYGBqYXZhc2NyaXB0CiAgICB2YXIgYXJyID0g
        WydhJywgJ2InLCAnYycsICdkJ107CiAgICBhcnIub2JqZWN0QXQoMCk7ICAg
        Ly8gImEiCiAgICBhcnIub2JqZWN0QXQoMyk7ICAgLy8gImQiCiAgICBhcnIu
        b2JqZWN0QXQoLTEpOyAgLy8gdW5kZWZpbmVkCiAgICBhcnIub2JqZWN0QXQo
        NCk7ICAgLy8gdW5kZWZpbmVkCiAgICBhcnIub2JqZWN0QXQoNSk7ICAgLy8g
        dW5kZWZpbmVkCiAgICBgYGAKCiAgICBAbWV0aG9kIG9iamVjdEF0CiAgICBA
        cGFyYW0ge051bWJlcn0gaWR4IFRoZSBpbmRleCBvZiB0aGUgaXRlbSB0byBy
        ZXR1cm4uCiAgICBAcmV0dXJuIHsqfSBpdGVtIGF0IGluZGV4IG9yIHVuZGVm
        aW5lZAogICovCiAgb2JqZWN0QXQ6IGZ1bmN0aW9uKGlkeCkgewogICAgaWYg
        KChpZHggPCAwKSB8fCAoaWR4Pj1nZXQodGhpcywgJ2xlbmd0aCcpKSkgcmV0
        dXJuIHVuZGVmaW5lZCA7CiAgICByZXR1cm4gZ2V0KHRoaXMsIGlkeCk7CiAg
        fSwKCiAgLyoqCiAgICBUaGlzIHJldHVybnMgdGhlIG9iamVjdHMgYXQgdGhl
        IHNwZWNpZmllZCBpbmRleGVzLCB1c2luZyBgb2JqZWN0QXRgLgoKICAgIGBg
        YGphdmFzY3JpcHQKICAgIHZhciBhcnIgPcKgWydhJywgJ2InLCAnYycsICdk
        J107CiAgICBhcnIub2JqZWN0c0F0KFswLCAxLCAyXSk7ICAvLyBbImEiLCAi
        YiIsICJjIl0KICAgIGFyci5vYmplY3RzQXQoWzIsIDMsIDRdKTsgIC8vIFsi
        YyIsICJkIiwgdW5kZWZpbmVkXQogICAgYGBgCgogICAgQG1ldGhvZCBvYmpl
        Y3RzQXQKICAgIEBwYXJhbSB7QXJyYXl9IGluZGV4ZXMgQW4gYXJyYXkgb2Yg
        aW5kZXhlcyBvZiBpdGVtcyB0byByZXR1cm4uCiAgICBAcmV0dXJuIHtBcnJh
        eX0KICAgKi8KICBvYmplY3RzQXQ6IGZ1bmN0aW9uKGluZGV4ZXMpIHsKICAg
        IHZhciBzZWxmID0gdGhpczsKICAgIHJldHVybiBtYXAoaW5kZXhlcywgZnVu
        Y3Rpb24oaWR4KSB7IHJldHVybiBzZWxmLm9iamVjdEF0KGlkeCk7IH0pOwog
        IH0sCgogIC8vIG92ZXJyaWRlcyBFbWJlci5FbnVtZXJhYmxlIHZlcnNpb24K
        ICBuZXh0T2JqZWN0OiBmdW5jdGlvbihpZHgpIHsKICAgIHJldHVybiB0aGlz
        Lm9iamVjdEF0KGlkeCk7CiAgfSwKCiAgLyoqCiAgICBUaGlzIGlzIHRoZSBo
        YW5kbGVyIGZvciB0aGUgc3BlY2lhbCBhcnJheSBjb250ZW50IHByb3BlcnR5
        LiBJZiB5b3UgZ2V0CiAgICB0aGlzIHByb3BlcnR5LCBpdCB3aWxsIHJldHVy
        biB0aGlzLiBJZiB5b3Ugc2V0IHRoaXMgcHJvcGVydHkgaXQgYSBuZXcKICAg
        IGFycmF5LCBpdCB3aWxsIHJlcGxhY2UgdGhlIGN1cnJlbnQgY29udGVudC4K
        CiAgICBUaGlzIHByb3BlcnR5IG92ZXJyaWRlcyB0aGUgZGVmYXVsdCBwcm9w
        ZXJ0eSBkZWZpbmVkIGluIGBFbWJlci5FbnVtZXJhYmxlYC4KCiAgICBAcHJv
        cGVydHkgW10KICAgIEByZXR1cm4gdGhpcwogICovCiAgJ1tdJzogRW1iZXIu
        Y29tcHV0ZWQoZnVuY3Rpb24oa2V5LCB2YWx1ZSkgewogICAgaWYgKHZhbHVl
        ICE9PSB1bmRlZmluZWQpIHRoaXMucmVwbGFjZSgwLCBnZXQodGhpcywgJ2xl
        bmd0aCcpLCB2YWx1ZSkgOwogICAgcmV0dXJuIHRoaXMgOwogIH0pLAoKICBm
        aXJzdE9iamVjdDogRW1iZXIuY29tcHV0ZWQoZnVuY3Rpb24oKSB7CiAgICBy
        ZXR1cm4gdGhpcy5vYmplY3RBdCgwKTsKICB9KSwKCiAgbGFzdE9iamVjdDog
        RW1iZXIuY29tcHV0ZWQoZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gdGhpcy5v
        YmplY3RBdChnZXQodGhpcywgJ2xlbmd0aCcpLTEpOwogIH0pLAoKICAvLyBv
        cHRpbWl6ZWQgdmVyc2lvbiBmcm9tIEVudW1lcmFibGUKICBjb250YWluczog
        ZnVuY3Rpb24ob2JqKSB7CiAgICByZXR1cm4gdGhpcy5pbmRleE9mKG9iaikg
        Pj0gMDsKICB9LAoKICAvLyBBZGQgYW55IGV4dHJhIG1ldGhvZHMgdG8gRW1i
        ZXIuQXJyYXkgdGhhdCBhcmUgbmF0aXZlIHRvIHRoZSBidWlsdC1pbiBBcnJh
        eS4KICAvKioKICAgIFJldHVybnMgYSBuZXcgYXJyYXkgdGhhdCBpcyBhIHNs
        aWNlIG9mIHRoZSByZWNlaXZlci4gVGhpcyBpbXBsZW1lbnRhdGlvbgogICAg
        dXNlcyB0aGUgb2JzZXJ2YWJsZSBhcnJheSBtZXRob2RzIHRvIHJldHJpZXZl
        IHRoZSBvYmplY3RzIGZvciB0aGUgbmV3CiAgICBzbGljZS4KCiAgICBgYGBq
        YXZhc2NyaXB0CiAgICB2YXIgYXJyID0gWydyZWQnLCAnZ3JlZW4nLCAnYmx1
        ZSddOwogICAgYXJyLnNsaWNlKDApOyAgICAgICAvLyBbJ3JlZCcsICdncmVl
        bicsICdibHVlJ10KICAgIGFyci5zbGljZSgwLCAyKTsgICAgLy8gWydyZWQn
        LCAnZ3JlZW4nXQogICAgYXJyLnNsaWNlKDEsIDEwMCk7ICAvLyBbJ2dyZWVu
        JywgJ2JsdWUnXQogICAgYGBgCgogICAgQG1ldGhvZCBzbGljZQogICAgQHBh
        cmFtIHtJbnRlZ2VyfSBiZWdpbkluZGV4IChPcHRpb25hbCkgaW5kZXggdG8g
        YmVnaW4gc2xpY2luZyBmcm9tLgogICAgQHBhcmFtIHtJbnRlZ2VyfSBlbmRJ
        bmRleCAoT3B0aW9uYWwpIGluZGV4IHRvIGVuZCB0aGUgc2xpY2UgYXQgKGJ1
        dCBub3QgaW5jbHVkZWQpLgogICAgQHJldHVybiB7QXJyYXl9IE5ldyBhcnJh
        eSB3aXRoIHNwZWNpZmllZCBzbGljZQogICovCiAgc2xpY2U6IGZ1bmN0aW9u
        KGJlZ2luSW5kZXgsIGVuZEluZGV4KSB7CiAgICB2YXIgcmV0ID0gRW1iZXIu
        QSgpOwogICAgdmFyIGxlbmd0aCA9IGdldCh0aGlzLCAnbGVuZ3RoJykgOwog
        ICAgaWYgKGlzTm9uZShiZWdpbkluZGV4KSkgYmVnaW5JbmRleCA9IDAgOwog
        ICAgaWYgKGlzTm9uZShlbmRJbmRleCkgfHwgKGVuZEluZGV4ID4gbGVuZ3Ro
        KSkgZW5kSW5kZXggPSBsZW5ndGggOwoKICAgIGlmIChiZWdpbkluZGV4IDwg
        MCkgYmVnaW5JbmRleCA9IGxlbmd0aCArIGJlZ2luSW5kZXg7CiAgICBpZiAo
        ZW5kSW5kZXggPCAwKSBlbmRJbmRleCA9IGxlbmd0aCArIGVuZEluZGV4OwoK
        ICAgIHdoaWxlKGJlZ2luSW5kZXggPCBlbmRJbmRleCkgewogICAgICByZXRb
        cmV0Lmxlbmd0aF0gPSB0aGlzLm9iamVjdEF0KGJlZ2luSW5kZXgrKykgOwog
        ICAgfQogICAgcmV0dXJuIHJldCA7CiAgfSwKCiAgLyoqCiAgICBSZXR1cm5z
        IHRoZSBpbmRleCBvZiB0aGUgZ2l2ZW4gb2JqZWN0J3MgZmlyc3Qgb2NjdXJy
        ZW5jZS4KICAgIElmIG5vIGBzdGFydEF0YCBhcmd1bWVudCBpcyBnaXZlbiwg
        dGhlIHN0YXJ0aW5nIGxvY2F0aW9uIHRvCiAgICBzZWFyY2ggaXMgMC4gSWYg
        aXQncyBuZWdhdGl2ZSwgd2lsbCBjb3VudCBiYWNrd2FyZCBmcm9tCiAgICB0
        aGUgZW5kIG9mIHRoZSBhcnJheS4gUmV0dXJucyAtMSBpZiBubyBtYXRjaCBp
        cyBmb3VuZC4KCiAgICBgYGBqYXZhc2NyaXB0CiAgICB2YXIgYXJyID0gWyJh
        IiwgImIiLCAiYyIsICJkIiwgImEiXTsKICAgIGFyci5pbmRleE9mKCJhIik7
        ICAgICAgIC8vICAwCiAgICBhcnIuaW5kZXhPZigieiIpOyAgICAgICAvLyAt
        MQogICAgYXJyLmluZGV4T2YoImEiLCAyKTsgICAgLy8gIDQKICAgIGFyci5p
        bmRleE9mKCJhIiwgLTEpOyAgIC8vICA0CiAgICBhcnIuaW5kZXhPZigiYiIs
        IDMpOyAgICAvLyAtMQogICAgYXJyLmluZGV4T2YoImEiLCAxMDApOyAgLy8g
        LTEKICAgIGBgYAoKICAgIEBtZXRob2QgaW5kZXhPZgogICAgQHBhcmFtIHtP
        YmplY3R9IG9iamVjdCB0aGUgaXRlbSB0byBzZWFyY2ggZm9yCiAgICBAcGFy
        YW0ge051bWJlcn0gc3RhcnRBdCBvcHRpb25hbCBzdGFydGluZyBsb2NhdGlv
        biB0byBzZWFyY2gsIGRlZmF1bHQgMAogICAgQHJldHVybiB7TnVtYmVyfSBp
        bmRleCBvciAtMSBpZiBub3QgZm91bmQKICAqLwogIGluZGV4T2Y6IGZ1bmN0
        aW9uKG9iamVjdCwgc3RhcnRBdCkgewogICAgdmFyIGlkeCwgbGVuID0gZ2V0
        KHRoaXMsICdsZW5ndGgnKTsKCiAgICBpZiAoc3RhcnRBdCA9PT0gdW5kZWZp
        bmVkKSBzdGFydEF0ID0gMDsKICAgIGlmIChzdGFydEF0IDwgMCkgc3RhcnRB
        dCArPSBsZW47CgogICAgZm9yKGlkeD1zdGFydEF0O2lkeDxsZW47aWR4Kysp
        IHsKICAgICAgaWYgKHRoaXMub2JqZWN0QXQoaWR4KSA9PT0gb2JqZWN0KSBy
        ZXR1cm4gaWR4IDsKICAgIH0KICAgIHJldHVybiAtMTsKICB9LAoKICAvKioK
        ICAgIFJldHVybnMgdGhlIGluZGV4IG9mIHRoZSBnaXZlbiBvYmplY3QncyBs
        YXN0IG9jY3VycmVuY2UuCiAgICBJZiBubyBgc3RhcnRBdGAgYXJndW1lbnQg
        aXMgZ2l2ZW4sIHRoZSBzZWFyY2ggc3RhcnRzIGZyb20KICAgIHRoZSBsYXN0
        IHBvc2l0aW9uLiBJZiBpdCdzIG5lZ2F0aXZlLCB3aWxsIGNvdW50IGJhY2t3
        YXJkCiAgICBmcm9tIHRoZSBlbmQgb2YgdGhlIGFycmF5LiBSZXR1cm5zIC0x
        IGlmIG5vIG1hdGNoIGlzIGZvdW5kLgoKICAgIGBgYGphdmFzY3JpcHQKICAg
        IHZhciBhcnIgPSBbImEiLCAiYiIsICJjIiwgImQiLCAiYSJdOwogICAgYXJy
        Lmxhc3RJbmRleE9mKCJhIik7ICAgICAgIC8vICA0CiAgICBhcnIubGFzdElu
        ZGV4T2YoInoiKTsgICAgICAgLy8gLTEKICAgIGFyci5sYXN0SW5kZXhPZigi
        YSIsIDIpOyAgICAvLyAgMAogICAgYXJyLmxhc3RJbmRleE9mKCJhIiwgLTEp
        OyAgIC8vICA0CiAgICBhcnIubGFzdEluZGV4T2YoImIiLCAzKTsgICAgLy8g
        IDEKICAgIGFyci5sYXN0SW5kZXhPZigiYSIsIDEwMCk7ICAvLyAgNAogICAg
        YGBgCgogICAgQG1ldGhvZCBsYXN0SW5kZXhPZgogICAgQHBhcmFtIHtPYmpl
        Y3R9IG9iamVjdCB0aGUgaXRlbSB0byBzZWFyY2ggZm9yCiAgICBAcGFyYW0g
        e051bWJlcn0gc3RhcnRBdCBvcHRpb25hbCBzdGFydGluZyBsb2NhdGlvbiB0
        byBzZWFyY2gsIGRlZmF1bHQgMAogICAgQHJldHVybiB7TnVtYmVyfSBpbmRl
        eCBvciAtMSBpZiBub3QgZm91bmQKICAqLwogIGxhc3RJbmRleE9mOiBmdW5j
        dGlvbihvYmplY3QsIHN0YXJ0QXQpIHsKICAgIHZhciBpZHgsIGxlbiA9IGdl
        dCh0aGlzLCAnbGVuZ3RoJyk7CgogICAgaWYgKHN0YXJ0QXQgPT09IHVuZGVm
        aW5lZCB8fCBzdGFydEF0ID49IGxlbikgc3RhcnRBdCA9IGxlbi0xOwogICAg
        aWYgKHN0YXJ0QXQgPCAwKSBzdGFydEF0ICs9IGxlbjsKCiAgICBmb3IoaWR4
        PXN0YXJ0QXQ7aWR4Pj0wO2lkeC0tKSB7CiAgICAgIGlmICh0aGlzLm9iamVj
        dEF0KGlkeCkgPT09IG9iamVjdCkgcmV0dXJuIGlkeCA7CiAgICB9CiAgICBy
        ZXR1cm4gLTE7CiAgfSwKCiAgLy8gLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4u
        Li4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLgogIC8vIEFSUkFZ
        IE9CU0VSVkVSUwogIC8vCgogIC8qKgogICAgQWRkcyBhbiBhcnJheSBvYnNl
        cnZlciB0byB0aGUgcmVjZWl2aW5nIGFycmF5LiBUaGUgYXJyYXkgb2JzZXJ2
        ZXIgb2JqZWN0CiAgICBub3JtYWxseSBtdXN0IGltcGxlbWVudCB0d28gbWV0
        aG9kczoKCiAgICAqIGBhcnJheVdpbGxDaGFuZ2Uob2JzZXJ2ZWRPYmosIHN0
        YXJ0LCByZW1vdmVDb3VudCwgYWRkQ291bnQpYCAtIFRoaXMgbWV0aG9kIHdp
        bGwgYmUKICAgICAgY2FsbGVkIGp1c3QgYmVmb3JlIHRoZSBhcnJheSBpcyBt
        b2RpZmllZC4KICAgICogYGFycmF5RGlkQ2hhbmdlKG9ic2VydmVkT2JqLCBz
        dGFydCwgcmVtb3ZlQ291bnQsIGFkZENvdW50KWAgLSBUaGlzIG1ldGhvZCB3
        aWxsIGJlCiAgICAgIGNhbGxlZCBqdXN0IGFmdGVyIHRoZSBhcnJheSBpcyBt
        b2RpZmllZC4KCiAgICBCb3RoIGNhbGxiYWNrcyB3aWxsIGJlIHBhc3NlZCB0
        aGUgb2JzZXJ2ZWQgb2JqZWN0LCBzdGFydGluZyBpbmRleCBvZiB0aGUKICAg
        IGNoYW5nZSBhcyB3ZWxsIGEgYSBjb3VudCBvZiB0aGUgaXRlbXMgdG8gYmUg
        cmVtb3ZlZCBhbmQgYWRkZWQuIFlvdSBjYW4gdXNlCiAgICB0aGVzZSBjYWxs
        YmFja3MgdG8gb3B0aW9uYWxseSBpbnNwZWN0IHRoZSBhcnJheSBkdXJpbmcg
        dGhlIGNoYW5nZSwgY2xlYXIKICAgIGNhY2hlcywgb3IgZG8gYW55IG90aGVy
        IGJvb2trZWVwaW5nIG5lY2Vzc2FyeS4KCiAgICBJbiBhZGRpdGlvbiB0byBw
        YXNzaW5nIGEgdGFyZ2V0LCB5b3UgY2FuIGFsc28gaW5jbHVkZSBhbiBvcHRp
        b25zIGhhc2gKICAgIHdoaWNoIHlvdSBjYW4gdXNlIHRvIG92ZXJyaWRlIHRo
        ZSBtZXRob2QgbmFtZXMgdGhhdCB3aWxsIGJlIGludm9rZWQgb24gdGhlCiAg
        ICB0YXJnZXQuCgogICAgQG1ldGhvZCBhZGRBcnJheU9ic2VydmVyCiAgICBA
        cGFyYW0ge09iamVjdH0gdGFyZ2V0IFRoZSBvYnNlcnZlciBvYmplY3QuCiAg
        ICBAcGFyYW0ge0hhc2h9IG9wdHMgT3B0aW9uYWwgaGFzaCBvZiBjb25maWd1
        cmF0aW9uIG9wdGlvbnMgaW5jbHVkaW5nCiAgICAgIGB3aWxsQ2hhbmdlYCBh
        bmQgYGRpZENoYW5nZWAgb3B0aW9uLgogICAgQHJldHVybiB7RW1iZXIuQXJy
        YXl9IHJlY2VpdmVyCiAgKi8KICBhZGRBcnJheU9ic2VydmVyOiBmdW5jdGlv
        bih0YXJnZXQsIG9wdHMpIHsKICAgIHZhciB3aWxsQ2hhbmdlID0gKG9wdHMg
        JiYgb3B0cy53aWxsQ2hhbmdlKSB8fCAnYXJyYXlXaWxsQ2hhbmdlJywKICAg
        ICAgICBkaWRDaGFuZ2UgID0gKG9wdHMgJiYgb3B0cy5kaWRDaGFuZ2UpIHx8
        ICdhcnJheURpZENoYW5nZSc7CgogICAgdmFyIGhhc09ic2VydmVycyA9IGdl
        dCh0aGlzLCAnaGFzQXJyYXlPYnNlcnZlcnMnKTsKICAgIGlmICghaGFzT2Jz
        ZXJ2ZXJzKSBFbWJlci5wcm9wZXJ0eVdpbGxDaGFuZ2UodGhpcywgJ2hhc0Fy
        cmF5T2JzZXJ2ZXJzJyk7CiAgICBFbWJlci5hZGRMaXN0ZW5lcih0aGlzLCAn
        QGFycmF5OmJlZm9yZScsIHRhcmdldCwgd2lsbENoYW5nZSk7CiAgICBFbWJl
        ci5hZGRMaXN0ZW5lcih0aGlzLCAnQGFycmF5OmNoYW5nZScsIHRhcmdldCwg
        ZGlkQ2hhbmdlKTsKICAgIGlmICghaGFzT2JzZXJ2ZXJzKSBFbWJlci5wcm9w
        ZXJ0eURpZENoYW5nZSh0aGlzLCAnaGFzQXJyYXlPYnNlcnZlcnMnKTsKICAg
        IHJldHVybiB0aGlzOwogIH0sCgogIC8qKgogICAgUmVtb3ZlcyBhbiBhcnJh
        eSBvYnNlcnZlciBmcm9tIHRoZSBvYmplY3QgaWYgdGhlIG9ic2VydmVyIGlz
        IGN1cnJlbnQKICAgIHJlZ2lzdGVyZWQuIENhbGxpbmcgdGhpcyBtZXRob2Qg
        bXVsdGlwbGUgdGltZXMgd2l0aCB0aGUgc2FtZSBvYmplY3Qgd2lsbAogICAg
        aGF2ZSBubyBlZmZlY3QuCgogICAgQG1ldGhvZCByZW1vdmVBcnJheU9ic2Vy
        dmVyCiAgICBAcGFyYW0ge09iamVjdH0gdGFyZ2V0IFRoZSBvYmplY3Qgb2Jz
        ZXJ2aW5nIHRoZSBhcnJheS4KICAgIEBwYXJhbSB7SGFzaH0gb3B0cyBPcHRp
        b25hbCBoYXNoIG9mIGNvbmZpZ3VyYXRpb24gb3B0aW9ucyBpbmNsdWRpbmcK
        ICAgICAgYHdpbGxDaGFuZ2VgIGFuZCBgZGlkQ2hhbmdlYCBvcHRpb24uCiAg
        ICBAcmV0dXJuIHtFbWJlci5BcnJheX0gcmVjZWl2ZXIKICAqLwogIHJlbW92
        ZUFycmF5T2JzZXJ2ZXI6IGZ1bmN0aW9uKHRhcmdldCwgb3B0cykgewogICAg
        dmFyIHdpbGxDaGFuZ2UgPSAob3B0cyAmJiBvcHRzLndpbGxDaGFuZ2UpIHx8
        ICdhcnJheVdpbGxDaGFuZ2UnLAogICAgICAgIGRpZENoYW5nZSAgPSAob3B0
        cyAmJiBvcHRzLmRpZENoYW5nZSkgfHwgJ2FycmF5RGlkQ2hhbmdlJzsKCiAg
        ICB2YXIgaGFzT2JzZXJ2ZXJzID0gZ2V0KHRoaXMsICdoYXNBcnJheU9ic2Vy
        dmVycycpOwogICAgaWYgKGhhc09ic2VydmVycykgRW1iZXIucHJvcGVydHlX
        aWxsQ2hhbmdlKHRoaXMsICdoYXNBcnJheU9ic2VydmVycycpOwogICAgRW1i
        ZXIucmVtb3ZlTGlzdGVuZXIodGhpcywgJ0BhcnJheTpiZWZvcmUnLCB0YXJn
        ZXQsIHdpbGxDaGFuZ2UpOwogICAgRW1iZXIucmVtb3ZlTGlzdGVuZXIodGhp
        cywgJ0BhcnJheTpjaGFuZ2UnLCB0YXJnZXQsIGRpZENoYW5nZSk7CiAgICBp
        ZiAoaGFzT2JzZXJ2ZXJzKSBFbWJlci5wcm9wZXJ0eURpZENoYW5nZSh0aGlz
        LCAnaGFzQXJyYXlPYnNlcnZlcnMnKTsKICAgIHJldHVybiB0aGlzOwogIH0s
        CgogIC8qKgogICAgQmVjb21lcyB0cnVlIHdoZW5ldmVyIHRoZSBhcnJheSBj
        dXJyZW50bHkgaGFzIG9ic2VydmVycyB3YXRjaGluZyBjaGFuZ2VzCiAgICBv
        biB0aGUgYXJyYXkuCgogICAgQHByb3BlcnR5IHtCb29sZWFufSBoYXNBcnJh
        eU9ic2VydmVycwogICovCiAgaGFzQXJyYXlPYnNlcnZlcnM6IEVtYmVyLmNv
        bXB1dGVkKGZ1bmN0aW9uKCkgewogICAgcmV0dXJuIEVtYmVyLmhhc0xpc3Rl
        bmVycyh0aGlzLCAnQGFycmF5OmNoYW5nZScpIHx8IEVtYmVyLmhhc0xpc3Rl
        bmVycyh0aGlzLCAnQGFycmF5OmJlZm9yZScpOwogIH0pLAoKICAvKioKICAg
        IElmIHlvdSBhcmUgaW1wbGVtZW50aW5nIGFuIG9iamVjdCB0aGF0IHN1cHBv
        cnRzIGBFbWJlci5BcnJheWAsIGNhbGwgdGhpcwogICAgbWV0aG9kIGp1c3Qg
        YmVmb3JlIHRoZSBhcnJheSBjb250ZW50IGNoYW5nZXMgdG8gbm90aWZ5IGFu
        eSBvYnNlcnZlcnMgYW5kCiAgICBpbnZhbGlkYXRlIGFueSByZWxhdGVkIHBy
        b3BlcnRpZXMuIFBhc3MgdGhlIHN0YXJ0aW5nIGluZGV4IG9mIHRoZSBjaGFu
        Z2UKICAgIGFzIHdlbGwgYXMgYSBkZWx0YSBvZiB0aGUgYW1vdW50cyB0byBj
        aGFuZ2UuCgogICAgQG1ldGhvZCBhcnJheUNvbnRlbnRXaWxsQ2hhbmdlCiAg
        ICBAcGFyYW0ge051bWJlcn0gc3RhcnRJZHggVGhlIHN0YXJ0aW5nIGluZGV4
        IGluIHRoZSBhcnJheSB0aGF0IHdpbGwgY2hhbmdlLgogICAgQHBhcmFtIHtO
        dW1iZXJ9IHJlbW92ZUFtdCBUaGUgbnVtYmVyIG9mIGl0ZW1zIHRoYXQgd2ls
        bCBiZSByZW1vdmVkLiBJZiB5b3UKICAgICAgcGFzcyBgbnVsbGAgYXNzdW1l
        cyAwCiAgICBAcGFyYW0ge051bWJlcn0gYWRkQW10IFRoZSBudW1iZXIgb2Yg
        aXRlbXMgdGhhdCB3aWxsIGJlIGFkZGVkLiBJZiB5b3UKICAgICAgcGFzcyBg
        bnVsbGAgYXNzdW1lcyAwLgogICAgQHJldHVybiB7RW1iZXIuQXJyYXl9IHJl
        Y2VpdmVyCiAgKi8KICBhcnJheUNvbnRlbnRXaWxsQ2hhbmdlOiBmdW5jdGlv
        bihzdGFydElkeCwgcmVtb3ZlQW10LCBhZGRBbXQpIHsKCiAgICAvLyBpZiBu
        byBhcmdzIGFyZSBwYXNzZWQgYXNzdW1lIGV2ZXJ5dGhpbmcgY2hhbmdlcwog
        ICAgaWYgKHN0YXJ0SWR4PT09dW5kZWZpbmVkKSB7CiAgICAgIHN0YXJ0SWR4
        ID0gMDsKICAgICAgcmVtb3ZlQW10ID0gYWRkQW10ID0gLTE7CiAgICB9IGVs
        c2UgewogICAgICBpZiAocmVtb3ZlQW10ID09PSB1bmRlZmluZWQpIHJlbW92
        ZUFtdD0tMTsKICAgICAgaWYgKGFkZEFtdCAgICA9PT0gdW5kZWZpbmVkKSBh
        ZGRBbXQ9LTE7CiAgICB9CgogICAgLy8gTWFrZSBzdXJlIHRoZSBAZWFjaCBw
        cm94eSBpcyBzZXQgdXAgaWYgYW55b25lIGlzIG9ic2VydmluZyBAZWFjaAog
        ICAgaWYgKEVtYmVyLmlzV2F0Y2hpbmcodGhpcywgJ0BlYWNoJykpIHsgZ2V0
        KHRoaXMsICdAZWFjaCcpOyB9CgogICAgRW1iZXIuc2VuZEV2ZW50KHRoaXMs
        ICdAYXJyYXk6YmVmb3JlJywgW3RoaXMsIHN0YXJ0SWR4LCByZW1vdmVBbXQs
        IGFkZEFtdF0pOwoKICAgIHZhciByZW1vdmluZywgbGltOwogICAgaWYgKHN0
        YXJ0SWR4Pj0wICYmIHJlbW92ZUFtdD49MCAmJiBnZXQodGhpcywgJ2hhc0Vu
        dW1lcmFibGVPYnNlcnZlcnMnKSkgewogICAgICByZW1vdmluZyA9IFtdOwog
        ICAgICBsaW0gPSBzdGFydElkeCtyZW1vdmVBbXQ7CiAgICAgIGZvcih2YXIg
        aWR4PXN0YXJ0SWR4O2lkeDxsaW07aWR4KyspIHJlbW92aW5nLnB1c2godGhp
        cy5vYmplY3RBdChpZHgpKTsKICAgIH0gZWxzZSB7CiAgICAgIHJlbW92aW5n
        ID0gcmVtb3ZlQW10OwogICAgfQoKICAgIHRoaXMuZW51bWVyYWJsZUNvbnRl
        bnRXaWxsQ2hhbmdlKHJlbW92aW5nLCBhZGRBbXQpOwoKICAgIHJldHVybiB0
        aGlzOwogIH0sCgogIC8qKgogICAgSWYgeW91IGFyZSBpbXBsZW1lbnRpbmcg
        YW4gb2JqZWN0IHRoYXQgc3VwcG9ydHMgYEVtYmVyLkFycmF5YCwgY2FsbCB0
        aGlzCiAgICBtZXRob2QganVzdCBhZnRlciB0aGUgYXJyYXkgY29udGVudCBj
        aGFuZ2VzIHRvIG5vdGlmeSBhbnkgb2JzZXJ2ZXJzIGFuZAogICAgaW52YWxp
        ZGF0ZSBhbnkgcmVsYXRlZCBwcm9wZXJ0aWVzLiBQYXNzIHRoZSBzdGFydGlu
        ZyBpbmRleCBvZiB0aGUgY2hhbmdlCiAgICBhcyB3ZWxsIGFzIGEgZGVsdGEg
        b2YgdGhlIGFtb3VudHMgdG8gY2hhbmdlLgoKICAgIEBtZXRob2QgYXJyYXlD
        b250ZW50RGlkQ2hhbmdlCiAgICBAcGFyYW0ge051bWJlcn0gc3RhcnRJZHgg
        VGhlIHN0YXJ0aW5nIGluZGV4IGluIHRoZSBhcnJheSB0aGF0IGRpZCBjaGFu
        Z2UuCiAgICBAcGFyYW0ge051bWJlcn0gcmVtb3ZlQW10IFRoZSBudW1iZXIg
        b2YgaXRlbXMgdGhhdCB3ZXJlIHJlbW92ZWQuIElmIHlvdQogICAgICBwYXNz
        IGBudWxsYCBhc3N1bWVzIDAKICAgIEBwYXJhbSB7TnVtYmVyfSBhZGRBbXQg
        VGhlIG51bWJlciBvZiBpdGVtcyB0aGF0IHdlcmUgYWRkZWQuIElmIHlvdQog
        ICAgICBwYXNzIGBudWxsYCBhc3N1bWVzIDAuCiAgICBAcmV0dXJuIHtFbWJl
        ci5BcnJheX0gcmVjZWl2ZXIKICAqLwogIGFycmF5Q29udGVudERpZENoYW5n
        ZTogZnVuY3Rpb24oc3RhcnRJZHgsIHJlbW92ZUFtdCwgYWRkQW10KSB7Cgog
        ICAgLy8gaWYgbm8gYXJncyBhcmUgcGFzc2VkIGFzc3VtZSBldmVyeXRoaW5n
        IGNoYW5nZXMKICAgIGlmIChzdGFydElkeD09PXVuZGVmaW5lZCkgewogICAg
        ICBzdGFydElkeCA9IDA7CiAgICAgIHJlbW92ZUFtdCA9IGFkZEFtdCA9IC0x
        OwogICAgfSBlbHNlIHsKICAgICAgaWYgKHJlbW92ZUFtdCA9PT0gdW5kZWZp
        bmVkKSByZW1vdmVBbXQ9LTE7CiAgICAgIGlmIChhZGRBbXQgICAgPT09IHVu
        ZGVmaW5lZCkgYWRkQW10PS0xOwogICAgfQoKICAgIHZhciBhZGRpbmcsIGxp
        bTsKICAgIGlmIChzdGFydElkeD49MCAmJiBhZGRBbXQ+PTAgJiYgZ2V0KHRo
        aXMsICdoYXNFbnVtZXJhYmxlT2JzZXJ2ZXJzJykpIHsKICAgICAgYWRkaW5n
        ID0gW107CiAgICAgIGxpbSA9IHN0YXJ0SWR4K2FkZEFtdDsKICAgICAgZm9y
        KHZhciBpZHg9c3RhcnRJZHg7aWR4PGxpbTtpZHgrKykgYWRkaW5nLnB1c2go
        dGhpcy5vYmplY3RBdChpZHgpKTsKICAgIH0gZWxzZSB7CiAgICAgIGFkZGlu
        ZyA9IGFkZEFtdDsKICAgIH0KCiAgICB0aGlzLmVudW1lcmFibGVDb250ZW50
        RGlkQ2hhbmdlKHJlbW92ZUFtdCwgYWRkaW5nKTsKICAgIEVtYmVyLnNlbmRF
        dmVudCh0aGlzLCAnQGFycmF5OmNoYW5nZScsIFt0aGlzLCBzdGFydElkeCwg
        cmVtb3ZlQW10LCBhZGRBbXRdKTsKCiAgICB2YXIgbGVuZ3RoICAgICAgPSBn
        ZXQodGhpcywgJ2xlbmd0aCcpLAogICAgICAgIGNhY2hlZEZpcnN0ID0gY2Fj
        aGVGb3IodGhpcywgJ2ZpcnN0T2JqZWN0JyksCiAgICAgICAgY2FjaGVkTGFz
        dCAgPSBjYWNoZUZvcih0aGlzLCAnbGFzdE9iamVjdCcpOwogICAgaWYgKHRo
        aXMub2JqZWN0QXQoMCkgIT09IGNhY2hlZEZpcnN0KSB7CiAgICAgIEVtYmVy
        LnByb3BlcnR5V2lsbENoYW5nZSh0aGlzLCAnZmlyc3RPYmplY3QnKTsKICAg
        ICAgRW1iZXIucHJvcGVydHlEaWRDaGFuZ2UodGhpcywgJ2ZpcnN0T2JqZWN0
        Jyk7CiAgICB9CiAgICBpZiAodGhpcy5vYmplY3RBdChsZW5ndGgtMSkgIT09
        IGNhY2hlZExhc3QpIHsKICAgICAgRW1iZXIucHJvcGVydHlXaWxsQ2hhbmdl
        KHRoaXMsICdsYXN0T2JqZWN0Jyk7CiAgICAgIEVtYmVyLnByb3BlcnR5RGlk
        Q2hhbmdlKHRoaXMsICdsYXN0T2JqZWN0Jyk7CiAgICB9CgogICAgcmV0dXJu
        IHRoaXM7CiAgfSwKCiAgLy8gLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4u
        Li4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLgogIC8vIEVOVU1FUkFU
        RUQgUFJPUEVSVElFUwogIC8vCgogIC8qKgogICAgUmV0dXJucyBhIHNwZWNp
        YWwgb2JqZWN0IHRoYXQgY2FuIGJlIHVzZWQgdG8gb2JzZXJ2ZSBpbmRpdmlk
        dWFsIHByb3BlcnRpZXMKICAgIG9uIHRoZSBhcnJheS4gSnVzdCBnZXQgYW4g
        ZXF1aXZhbGVudCBwcm9wZXJ0eSBvbiB0aGlzIG9iamVjdCBhbmQgaXQgd2ls
        bAogICAgcmV0dXJuIGFuIGVudW1lcmFibGUgdGhhdCBtYXBzIGF1dG9tYXRp
        Y2FsbHkgdG8gdGhlIG5hbWVkIGtleSBvbiB0aGUKICAgIG1lbWJlciBvYmpl
        Y3RzLgoKICAgIElmIHlvdSBtZXJlbHkgd2FudCB0byB3YXRjaCBmb3IgYW55
        IGl0ZW1zIGJlaW5nIGFkZGVkIG9yIHJlbW92ZWQgdG8gdGhlIGFycmF5LAog
        ICAgdXNlIHRoZSBgW11gIHByb3BlcnR5IGluc3RlYWQgb2YgYEBlYWNoYC4K
        CiAgICBAcHJvcGVydHkgQGVhY2gKICAqLwogICdAZWFjaCc6IEVtYmVyLmNv
        bXB1dGVkKGZ1bmN0aW9uKCkgewogICAgaWYgKCF0aGlzLl9fZWFjaCkgdGhp
        cy5fX2VhY2ggPSBuZXcgRW1iZXIuRWFjaFByb3h5KHRoaXMpOwogICAgcmV0
        dXJuIHRoaXMuX19lYWNoOwogIH0pCgp9KSA7Cgp9KSgpOwoKCgooZnVuY3Rp
        b24oKSB7CnZhciBlX2dldCA9IEVtYmVyLmdldCwKICAgIHNldCA9IEVtYmVy
        LnNldCwKICAgIGd1aWRGb3IgPSBFbWJlci5ndWlkRm9yLAogICAgbWV0YUZv
        ciA9IEVtYmVyLm1ldGEsCiAgICBwcm9wZXJ0eVdpbGxDaGFuZ2UgPSBFbWJl
        ci5wcm9wZXJ0eVdpbGxDaGFuZ2UsCiAgICBwcm9wZXJ0eURpZENoYW5nZSA9
        IEVtYmVyLnByb3BlcnR5RGlkQ2hhbmdlLAogICAgYWRkQmVmb3JlT2JzZXJ2
        ZXIgPSBFbWJlci5hZGRCZWZvcmVPYnNlcnZlciwKICAgIHJlbW92ZUJlZm9y
        ZU9ic2VydmVyID0gRW1iZXIucmVtb3ZlQmVmb3JlT2JzZXJ2ZXIsCiAgICBh
        ZGRPYnNlcnZlciA9IEVtYmVyLmFkZE9ic2VydmVyLAogICAgcmVtb3ZlT2Jz
        ZXJ2ZXIgPSBFbWJlci5yZW1vdmVPYnNlcnZlciwKICAgIENvbXB1dGVkUHJv
        cGVydHkgPSBFbWJlci5Db21wdXRlZFByb3BlcnR5LAogICAgYV9zbGljZSA9
        IFtdLnNsaWNlLAogICAgb19jcmVhdGUgPSBFbWJlci5jcmVhdGUsCiAgICBm
        b3JFYWNoID0gRW1iZXIuRW51bWVyYWJsZVV0aWxzLmZvckVhY2gsCiAgICAv
        LyBIZXJlIHdlIGV4cGxpY2l0bHkgZG9uJ3QgYWxsb3cgYEBlYWNoLmZvb2A7
        IGl0IHdvdWxkIHJlcXVpcmUgc29tZSBzcGVjaWFsCiAgICAvLyB0ZXN0aW5n
        LCBidXQgdGhlcmUncyBubyBwYXJ0aWN1bGFyIHJlYXNvbiB3aHkgaXQgc2hv
        dWxkIGJlIGRpc2FsbG93ZWQuCiAgICBlYWNoUHJvcGVydHlQYXR0ZXJuID0g
        L14oLiopXC5AZWFjaFwuKC4qKS8sCiAgICBkb3VibGVFYWNoUHJvcGVydHlQ
        YXR0ZXJuID0gLyguKlwuQGVhY2gpezIsfS8sCiAgICBhcnJheUJyYWNrZXRQ
        YXR0ZXJuID0gL1wuXFtcXSQvOwoKdmFyIGV4cGFuZFByb3BlcnRpZXMgPSBF
        bWJlci5leHBhbmRQcm9wZXJ0aWVzOwoKZnVuY3Rpb24gZ2V0KG9iaiwga2V5
        KSB7CiAgaWYgKGtleSA9PT0gJ0B0aGlzJykgewogICAgcmV0dXJuIG9iajsK
        ICB9CgogIHJldHVybiBlX2dldChvYmosIGtleSk7Cn0KCi8qCiAgVHJhY2tz
        IGNoYW5nZXMgdG8gZGVwZW5kZW50IGFycmF5cywgYXMgd2VsbCBhcyB0byBw
        cm9wZXJ0aWVzIG9mIGl0ZW1zIGluCiAgZGVwZW5kZW50IGFycmF5cy4KCiAg
        QGNsYXNzIERlcGVuZGVudEFycmF5c09ic2VydmVyCiovCmZ1bmN0aW9uIERl
        cGVuZGVudEFycmF5c09ic2VydmVyKGNhbGxiYWNrcywgY3AsIGluc3RhbmNl
        TWV0YSwgY29udGV4dCwgcHJvcGVydHlOYW1lLCBzdWdhck1ldGEpIHsKICAv
        LyB1c2VyIHNwZWNpZmllZCBjYWxsYmFja3MgZm9yIGBhZGRlZEl0ZW1gIGFu
        ZCBgcmVtb3ZlZEl0ZW1gCiAgdGhpcy5jYWxsYmFja3MgPSBjYWxsYmFja3M7
        CgogIC8vIHRoZSBjb21wdXRlZCBwcm9wZXJ0eTogcmVtZW1iZXIgdGhlc2Ug
        YXJlIHNoYXJlZCBhY3Jvc3MgaW5zdGFuY2VzCiAgdGhpcy5jcCA9IGNwOwoK
        ICAvLyB0aGUgUmVkdWNlQ29tcHV0ZWRQcm9wZXJ0eUluc3RhbmNlTWV0YSB0
        aGlzIERlcGVuZGVudEFycmF5c09ic2VydmVyIGlzCiAgLy8gYXNzb2NpYXRl
        ZCB3aXRoCiAgdGhpcy5pbnN0YW5jZU1ldGEgPSBpbnN0YW5jZU1ldGE7Cgog
        IC8vIEEgbWFwIG9mIGFycmF5IGd1aWRzIHRvIGRlcGVuZGVudEtleXMsIGZv
        ciB0aGUgZ2l2ZW4gY29udGV4dC4gIFdlIHRyYWNrCiAgLy8gdGhpcyBiZWNh
        dXNlIHdlIHdhbnQgdG8gc2V0IHVwIHRoZSBjb21wdXRlZCBwcm9wZXJ0eSBw
        b3RlbnRpYWxseSBiZWZvcmUgdGhlCiAgLy8gZGVwZW5kZW50IGFycmF5IGV2
        ZW4gZXhpc3RzLCBidXQgd2hlbiB0aGUgYXJyYXkgb2JzZXJ2ZXIgZmlyZXMs
        IHdlIGxhY2sKICAvLyBlbm91Z2ggY29udGV4dCB0byBrbm93IHdoYXQgdG8g
        dXBkYXRlOiB3ZSBjYW4gcmVjb3ZlciB0aGF0IGNvbnRleHQgYnkKICAvLyBn
        ZXR0aW5nIHRoZSBkZXBlbmRlbnRLZXkuCiAgdGhpcy5kZXBlbmRlbnRLZXlz
        QnlHdWlkID0ge307CgogIC8vIGEgbWFwIG9mIGRlcGVuZGVudCBhcnJheSBn
        dWlkcyAtPiBFbWJlci5UcmFja2VkQXJyYXkgaW5zdGFuY2VzLiAgV2UgdXNl
        CiAgLy8gdGhpcyB0byBsYXppbHkgcmVjb21wdXRlIGluZGV4ZXMgZm9yIGl0
        ZW0gcHJvcGVydHkgb2JzZXJ2ZXJzLgogIHRoaXMudHJhY2tlZEFycmF5c0J5
        R3VpZCA9IHt9OwoKICAvLyBXZSBzdXNwZW5kIG9ic2VydmVycyB0byBpZ25v
        cmUgcmVwbGFjZW1lbnRzIGZyb20gYHJlc2V0YCB3aGVuIHRvdGFsbHkKICAv
        LyByZWNvbXB1dGluZy4gIFVuZm9ydHVuYXRlbHkgd2UgY2Fubm90IHByb3Bl
        cmx5IHN1c3BlbmQgdGhlIG9ic2VydmVycwogIC8vIGJlY2F1c2Ugd2Ugb25s
        eSBoYXZlIHRoZSBrZXk7IGluc3RlYWQgd2UgbWFrZSB0aGUgb2JzZXJ2ZXJz
        IG5vLW9wcwogIHRoaXMuc3VzcGVuZGVkID0gZmFsc2U7CgogIC8vIFRoaXMg
        aXMgdXNlZCB0byBjb2FsZXNjZSBpdGVtIGNoYW5nZXMgZnJvbSBwcm9wZXJ0
        eSBvYnNlcnZlcnMuCiAgdGhpcy5jaGFuZ2VkSXRlbXMgPSB7fTsKfQoKZnVu
        Y3Rpb24gSXRlbVByb3BlcnR5T2JzZXJ2ZXJDb250ZXh0IChkZXBlbmRlbnRB
        cnJheSwgaW5kZXgsIHRyYWNrZWRBcnJheSkgewogIEVtYmVyLmFzc2VydCgi
        SW50ZXJuYWwgZXJyb3I6IHRyYWNrZWRBcnJheSBpcyBudWxsIG9yIHVuZGVm
        aW5lZCIsIHRyYWNrZWRBcnJheSk7CgogIHRoaXMuZGVwZW5kZW50QXJyYXkg
        PSBkZXBlbmRlbnRBcnJheTsKICB0aGlzLmluZGV4ID0gaW5kZXg7CiAgdGhp
        cy5pdGVtID0gZGVwZW5kZW50QXJyYXkub2JqZWN0QXQoaW5kZXgpOwogIHRo
        aXMudHJhY2tlZEFycmF5ID0gdHJhY2tlZEFycmF5OwogIHRoaXMuYmVmb3Jl
        T2JzZXJ2ZXIgPSBudWxsOwogIHRoaXMub2JzZXJ2ZXIgPSBudWxsOwoKICB0
        aGlzLmRlc3Ryb3llZCA9IGZhbHNlOwp9CgpEZXBlbmRlbnRBcnJheXNPYnNl
        cnZlci5wcm90b3R5cGUgPSB7CiAgc2V0VmFsdWU6IGZ1bmN0aW9uIChuZXdW
        YWx1ZSkgewogICAgdGhpcy5pbnN0YW5jZU1ldGEuc2V0VmFsdWUobmV3VmFs
        dWUsIHRydWUpOwogIH0sCiAgZ2V0VmFsdWU6IGZ1bmN0aW9uICgpIHsKICAg
        IHJldHVybiB0aGlzLmluc3RhbmNlTWV0YS5nZXRWYWx1ZSgpOwogIH0sCgog
        IHNldHVwT2JzZXJ2ZXJzOiBmdW5jdGlvbiAoZGVwZW5kZW50QXJyYXksIGRl
        cGVuZGVudEtleSkgewogICAgdGhpcy5kZXBlbmRlbnRLZXlzQnlHdWlkW2d1
        aWRGb3IoZGVwZW5kZW50QXJyYXkpXSA9IGRlcGVuZGVudEtleTsKCiAgICBk
        ZXBlbmRlbnRBcnJheS5hZGRBcnJheU9ic2VydmVyKHRoaXMsIHsKICAgICAg
        d2lsbENoYW5nZTogJ2RlcGVuZGVudEFycmF5V2lsbENoYW5nZScsCiAgICAg
        IGRpZENoYW5nZTogJ2RlcGVuZGVudEFycmF5RGlkQ2hhbmdlJwogICAgfSk7
        CgogICAgaWYgKHRoaXMuY3AuX2l0ZW1Qcm9wZXJ0eUtleXNbZGVwZW5kZW50
        S2V5XSkgewogICAgICB0aGlzLnNldHVwUHJvcGVydHlPYnNlcnZlcnMoZGVw
        ZW5kZW50S2V5LCB0aGlzLmNwLl9pdGVtUHJvcGVydHlLZXlzW2RlcGVuZGVu
        dEtleV0pOwogICAgfQogIH0sCgogIHRlYXJkb3duT2JzZXJ2ZXJzOiBmdW5j
        dGlvbiAoZGVwZW5kZW50QXJyYXksIGRlcGVuZGVudEtleSkgewogICAgdmFy
        IGl0ZW1Qcm9wZXJ0eUtleXMgPSB0aGlzLmNwLl9pdGVtUHJvcGVydHlLZXlz
        W2RlcGVuZGVudEtleV0gfHwgW107CgogICAgZGVsZXRlIHRoaXMuZGVwZW5k
        ZW50S2V5c0J5R3VpZFtndWlkRm9yKGRlcGVuZGVudEFycmF5KV07CgogICAg
        dGhpcy50ZWFyZG93blByb3BlcnR5T2JzZXJ2ZXJzKGRlcGVuZGVudEtleSwg
        aXRlbVByb3BlcnR5S2V5cyk7CgogICAgZGVwZW5kZW50QXJyYXkucmVtb3Zl
        QXJyYXlPYnNlcnZlcih0aGlzLCB7CiAgICAgIHdpbGxDaGFuZ2U6ICdkZXBl
        bmRlbnRBcnJheVdpbGxDaGFuZ2UnLAogICAgICBkaWRDaGFuZ2U6ICdkZXBl
        bmRlbnRBcnJheURpZENoYW5nZScKICAgIH0pOwogIH0sCgogIHN1c3BlbmRB
        cnJheU9ic2VydmVyczogZnVuY3Rpb24gKGNhbGxiYWNrLCBiaW5kaW5nKSB7
        CiAgICB2YXIgb2xkU3VzcGVuZGVkID0gdGhpcy5zdXNwZW5kZWQ7CiAgICB0
        aGlzLnN1c3BlbmRlZCA9IHRydWU7CiAgICBjYWxsYmFjay5jYWxsKGJpbmRp
        bmcpOwogICAgdGhpcy5zdXNwZW5kZWQgPSBvbGRTdXNwZW5kZWQ7CiAgfSwK
        CiAgc2V0dXBQcm9wZXJ0eU9ic2VydmVyczogZnVuY3Rpb24gKGRlcGVuZGVu
        dEtleSwgaXRlbVByb3BlcnR5S2V5cykgewogICAgdmFyIGRlcGVuZGVudEFy
        cmF5ID0gZ2V0KHRoaXMuaW5zdGFuY2VNZXRhLmNvbnRleHQsIGRlcGVuZGVu
        dEtleSksCiAgICAgICAgbGVuZ3RoID0gZ2V0KGRlcGVuZGVudEFycmF5LCAn
        bGVuZ3RoJyksCiAgICAgICAgb2JzZXJ2ZXJDb250ZXh0cyA9IG5ldyBBcnJh
        eShsZW5ndGgpOwoKICAgIHRoaXMucmVzZXRUcmFuc2Zvcm1hdGlvbnMoZGVw
        ZW5kZW50S2V5LCBvYnNlcnZlckNvbnRleHRzKTsKCiAgICBmb3JFYWNoKGRl
        cGVuZGVudEFycmF5LCBmdW5jdGlvbiAoaXRlbSwgaW5kZXgpIHsKICAgICAg
        dmFyIG9ic2VydmVyQ29udGV4dCA9IHRoaXMuY3JlYXRlUHJvcGVydHlPYnNl
        cnZlckNvbnRleHQoZGVwZW5kZW50QXJyYXksIGluZGV4LCB0aGlzLnRyYWNr
        ZWRBcnJheXNCeUd1aWRbZGVwZW5kZW50S2V5XSk7CiAgICAgIG9ic2VydmVy
        Q29udGV4dHNbaW5kZXhdID0gb2JzZXJ2ZXJDb250ZXh0OwoKICAgICAgZm9y
        RWFjaChpdGVtUHJvcGVydHlLZXlzLCBmdW5jdGlvbiAocHJvcGVydHlLZXkp
        IHsKICAgICAgICBhZGRCZWZvcmVPYnNlcnZlcihpdGVtLCBwcm9wZXJ0eUtl
        eSwgdGhpcywgb2JzZXJ2ZXJDb250ZXh0LmJlZm9yZU9ic2VydmVyKTsKICAg
        ICAgICBhZGRPYnNlcnZlcihpdGVtLCBwcm9wZXJ0eUtleSwgdGhpcywgb2Jz
        ZXJ2ZXJDb250ZXh0Lm9ic2VydmVyKTsKICAgICAgfSwgdGhpcyk7CiAgICB9
        LCB0aGlzKTsKICB9LAoKICB0ZWFyZG93blByb3BlcnR5T2JzZXJ2ZXJzOiBm
        dW5jdGlvbiAoZGVwZW5kZW50S2V5LCBpdGVtUHJvcGVydHlLZXlzKSB7CiAg
        ICB2YXIgZGVwZW5kZW50QXJyYXlPYnNlcnZlciA9IHRoaXMsCiAgICAgICAg
        dHJhY2tlZEFycmF5ID0gdGhpcy50cmFja2VkQXJyYXlzQnlHdWlkW2RlcGVu
        ZGVudEtleV0sCiAgICAgICAgYmVmb3JlT2JzZXJ2ZXIsCiAgICAgICAgb2Jz
        ZXJ2ZXIsCiAgICAgICAgaXRlbTsKCiAgICBpZiAoIXRyYWNrZWRBcnJheSkg
        eyByZXR1cm47IH0KCiAgICB0cmFja2VkQXJyYXkuYXBwbHkoZnVuY3Rpb24g
        KG9ic2VydmVyQ29udGV4dHMsIG9mZnNldCwgb3BlcmF0aW9uKSB7CiAgICAg
        IGlmIChvcGVyYXRpb24gPT09IEVtYmVyLlRyYWNrZWRBcnJheS5ERUxFVEUp
        IHsgcmV0dXJuOyB9CgogICAgICBmb3JFYWNoKG9ic2VydmVyQ29udGV4dHMs
        IGZ1bmN0aW9uIChvYnNlcnZlckNvbnRleHQpIHsKICAgICAgICBvYnNlcnZl
        ckNvbnRleHQuZGVzdHJveWVkID0gdHJ1ZTsKICAgICAgICBiZWZvcmVPYnNl
        cnZlciA9IG9ic2VydmVyQ29udGV4dC5iZWZvcmVPYnNlcnZlcjsKICAgICAg
        ICBvYnNlcnZlciA9IG9ic2VydmVyQ29udGV4dC5vYnNlcnZlcjsKICAgICAg
        ICBpdGVtID0gb2JzZXJ2ZXJDb250ZXh0Lml0ZW07CgogICAgICAgIGZvckVh
        Y2goaXRlbVByb3BlcnR5S2V5cywgZnVuY3Rpb24gKHByb3BlcnR5S2V5KSB7
        CiAgICAgICAgICByZW1vdmVCZWZvcmVPYnNlcnZlcihpdGVtLCBwcm9wZXJ0
        eUtleSwgZGVwZW5kZW50QXJyYXlPYnNlcnZlciwgYmVmb3JlT2JzZXJ2ZXIp
        OwogICAgICAgICAgcmVtb3ZlT2JzZXJ2ZXIoaXRlbSwgcHJvcGVydHlLZXks
        IGRlcGVuZGVudEFycmF5T2JzZXJ2ZXIsIG9ic2VydmVyKTsKICAgICAgICB9
        KTsKICAgICAgfSk7CiAgICB9KTsKICB9LAoKICBjcmVhdGVQcm9wZXJ0eU9i
        c2VydmVyQ29udGV4dDogZnVuY3Rpb24gKGRlcGVuZGVudEFycmF5LCBpbmRl
        eCwgdHJhY2tlZEFycmF5KSB7CiAgICB2YXIgb2JzZXJ2ZXJDb250ZXh0ID0g
        bmV3IEl0ZW1Qcm9wZXJ0eU9ic2VydmVyQ29udGV4dChkZXBlbmRlbnRBcnJh
        eSwgaW5kZXgsIHRyYWNrZWRBcnJheSk7CgogICAgdGhpcy5jcmVhdGVQcm9w
        ZXJ0eU9ic2VydmVyKG9ic2VydmVyQ29udGV4dCk7CgogICAgcmV0dXJuIG9i
        c2VydmVyQ29udGV4dDsKICB9LAoKICBjcmVhdGVQcm9wZXJ0eU9ic2VydmVy
        OiBmdW5jdGlvbiAob2JzZXJ2ZXJDb250ZXh0KSB7CiAgICB2YXIgZGVwZW5k
        ZW50QXJyYXlPYnNlcnZlciA9IHRoaXM7CgogICAgb2JzZXJ2ZXJDb250ZXh0
        LmJlZm9yZU9ic2VydmVyID0gZnVuY3Rpb24gKG9iaiwga2V5TmFtZSkgewog
        ICAgICByZXR1cm4gZGVwZW5kZW50QXJyYXlPYnNlcnZlci5pdGVtUHJvcGVy
        dHlXaWxsQ2hhbmdlKG9iaiwga2V5TmFtZSwgb2JzZXJ2ZXJDb250ZXh0LmRl
        cGVuZGVudEFycmF5LCBvYnNlcnZlckNvbnRleHQpOwogICAgfTsKICAgIG9i
        c2VydmVyQ29udGV4dC5vYnNlcnZlciA9IGZ1bmN0aW9uIChvYmosIGtleU5h
        bWUpIHsKICAgICAgcmV0dXJuIGRlcGVuZGVudEFycmF5T2JzZXJ2ZXIuaXRl
        bVByb3BlcnR5RGlkQ2hhbmdlKG9iaiwga2V5TmFtZSwgb2JzZXJ2ZXJDb250
        ZXh0LmRlcGVuZGVudEFycmF5LCBvYnNlcnZlckNvbnRleHQpOwogICAgfTsK
        ICB9LAoKICByZXNldFRyYW5zZm9ybWF0aW9uczogZnVuY3Rpb24gKGRlcGVu
        ZGVudEtleSwgb2JzZXJ2ZXJDb250ZXh0cykgewogICAgdGhpcy50cmFja2Vk
        QXJyYXlzQnlHdWlkW2RlcGVuZGVudEtleV0gPSBuZXcgRW1iZXIuVHJhY2tl
        ZEFycmF5KG9ic2VydmVyQ29udGV4dHMpOwogIH0sCgogIHRyYWNrQWRkOiBm
        dW5jdGlvbiAoZGVwZW5kZW50S2V5LCBpbmRleCwgbmV3SXRlbXMpIHsKICAg
        IHZhciB0cmFja2VkQXJyYXkgPSB0aGlzLnRyYWNrZWRBcnJheXNCeUd1aWRb
        ZGVwZW5kZW50S2V5XTsKICAgIGlmICh0cmFja2VkQXJyYXkpIHsKICAgICAg
        dHJhY2tlZEFycmF5LmFkZEl0ZW1zKGluZGV4LCBuZXdJdGVtcyk7CiAgICB9
        CiAgfSwKCiAgdHJhY2tSZW1vdmU6IGZ1bmN0aW9uIChkZXBlbmRlbnRLZXks
        IGluZGV4LCByZW1vdmVkQ291bnQpIHsKICAgIHZhciB0cmFja2VkQXJyYXkg
        PSB0aGlzLnRyYWNrZWRBcnJheXNCeUd1aWRbZGVwZW5kZW50S2V5XTsKCiAg
        ICBpZiAodHJhY2tlZEFycmF5KSB7CiAgICAgIHJldHVybiB0cmFja2VkQXJy
        YXkucmVtb3ZlSXRlbXMoaW5kZXgsIHJlbW92ZWRDb3VudCk7CiAgICB9Cgog
        ICAgcmV0dXJuIFtdOwogIH0sCgogIHVwZGF0ZUluZGV4ZXM6IGZ1bmN0aW9u
        ICh0cmFja2VkQXJyYXksIGFycmF5KSB7CiAgICB2YXIgbGVuZ3RoID0gZ2V0
        KGFycmF5LCAnbGVuZ3RoJyk7CiAgICAvLyBPUFRJTUlaRTogd2UgY291bGQg
        c3RvcCB1cGRhdGluZyBvbmNlIHdlIGhpdCB0aGUgb2JqZWN0IHdob3NlIG9i
        c2VydmVyCiAgICAvLyBmaXJlZDsgaWUgcGFydGlhbGx5IGFwcGx5IHRoZSB0
        cmFuc2Zvcm1hdGlvbnMKICAgIHRyYWNrZWRBcnJheS5hcHBseShmdW5jdGlv
        biAob2JzZXJ2ZXJDb250ZXh0cywgb2Zmc2V0LCBvcGVyYXRpb24pIHsKICAg
        ICAgLy8gd2UgZG9uJ3QgZXZlbiBoYXZlIG9ic2VydmVyIGNvbnRleHRzIGZv
        ciByZW1vdmVkIGl0ZW1zLCBldmVuIGlmIHdlIGRpZCwKICAgICAgLy8gdGhl
        eSBubyBsb25nZXIgaGF2ZSBhbnkgaW5kZXggaW4gdGhlIGFycmF5CiAgICAg
        IGlmIChvcGVyYXRpb24gPT09IEVtYmVyLlRyYWNrZWRBcnJheS5ERUxFVEUp
        IHsgcmV0dXJuOyB9CiAgICAgIGlmIChvcGVyYXRpb24gPT09IEVtYmVyLlRy
        YWNrZWRBcnJheS5SRVRBSU4gJiYgb2JzZXJ2ZXJDb250ZXh0cy5sZW5ndGgg
        PT09IGxlbmd0aCAmJiBvZmZzZXQgPT09IDApIHsKICAgICAgICAvLyBJZiB3
        ZSB1cGRhdGUgbWFueSBpdGVtcyB3ZSBkb24ndCB3YW50IHRvIHdhbGsgdGhl
        IGFycmF5IGVhY2ggdGltZTogd2UKICAgICAgICAvLyBvbmx5IG5lZWQgdG8g
        dXBkYXRlIHRoZSBpbmRleGVzIGF0IG1vc3Qgb25jZSBwZXIgcnVuIGxvb3Au
        CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBmb3JFYWNoKG9ic2Vy
        dmVyQ29udGV4dHMsIGZ1bmN0aW9uIChjb250ZXh0LCBpbmRleCkgewogICAg
        ICAgIGNvbnRleHQuaW5kZXggPSBpbmRleCArIG9mZnNldDsKICAgICAgfSk7
        CiAgICB9KTsKICB9LAoKICBkZXBlbmRlbnRBcnJheVdpbGxDaGFuZ2U6IGZ1
        bmN0aW9uIChkZXBlbmRlbnRBcnJheSwgaW5kZXgsIHJlbW92ZWRDb3VudCwg
        YWRkZWRDb3VudCkgewogICAgaWYgKHRoaXMuc3VzcGVuZGVkKSB7IHJldHVy
        bjsgfQoKICAgIHZhciByZW1vdmVkSXRlbSA9IHRoaXMuY2FsbGJhY2tzLnJl
        bW92ZWRJdGVtLAogICAgICAgIGNoYW5nZU1ldGEsCiAgICAgICAgZ3VpZCA9
        IGd1aWRGb3IoZGVwZW5kZW50QXJyYXkpLAogICAgICAgIGRlcGVuZGVudEtl
        eSA9IHRoaXMuZGVwZW5kZW50S2V5c0J5R3VpZFtndWlkXSwKICAgICAgICBp
        dGVtUHJvcGVydHlLZXlzID0gdGhpcy5jcC5faXRlbVByb3BlcnR5S2V5c1tk
        ZXBlbmRlbnRLZXldIHx8IFtdLAogICAgICAgIGxlbmd0aCA9IGdldChkZXBl
        bmRlbnRBcnJheSwgJ2xlbmd0aCcpLAogICAgICAgIG5vcm1hbGl6ZWRJbmRl
        eCA9IG5vcm1hbGl6ZUluZGV4KGluZGV4LCBsZW5ndGgsIDApLAogICAgICAg
        IG5vcm1hbGl6ZWRSZW1vdmVDb3VudCA9IG5vcm1hbGl6ZVJlbW92ZUNvdW50
        KG5vcm1hbGl6ZWRJbmRleCwgbGVuZ3RoLCByZW1vdmVkQ291bnQpLAogICAg
        ICAgIGl0ZW0sCiAgICAgICAgaXRlbUluZGV4LAogICAgICAgIHNsaWNlSW5k
        ZXgsCiAgICAgICAgb2JzZXJ2ZXJDb250ZXh0czsKCiAgICBvYnNlcnZlckNv
        bnRleHRzID0gdGhpcy50cmFja1JlbW92ZShkZXBlbmRlbnRLZXksIG5vcm1h
        bGl6ZWRJbmRleCwgbm9ybWFsaXplZFJlbW92ZUNvdW50KTsKCiAgICBmdW5j
        dGlvbiByZW1vdmVPYnNlcnZlcnMocHJvcGVydHlLZXkpIHsKICAgICAgb2Jz
        ZXJ2ZXJDb250ZXh0c1tzbGljZUluZGV4XS5kZXN0cm95ZWQgPSB0cnVlOwog
        ICAgICByZW1vdmVCZWZvcmVPYnNlcnZlcihpdGVtLCBwcm9wZXJ0eUtleSwg
        dGhpcywgb2JzZXJ2ZXJDb250ZXh0c1tzbGljZUluZGV4XS5iZWZvcmVPYnNl
        cnZlcik7CiAgICAgIHJlbW92ZU9ic2VydmVyKGl0ZW0sIHByb3BlcnR5S2V5
        LCB0aGlzLCBvYnNlcnZlckNvbnRleHRzW3NsaWNlSW5kZXhdLm9ic2VydmVy
        KTsKICAgIH0KCiAgICBmb3IgKHNsaWNlSW5kZXggPSBub3JtYWxpemVkUmVt
        b3ZlQ291bnQgLSAxOyBzbGljZUluZGV4ID49IDA7IC0tc2xpY2VJbmRleCkg
        ewogICAgICBpdGVtSW5kZXggPSBub3JtYWxpemVkSW5kZXggKyBzbGljZUlu
        ZGV4OwogICAgICBpZiAoaXRlbUluZGV4ID49IGxlbmd0aCkgeyBicmVhazsg
        fQoKICAgICAgaXRlbSA9IGRlcGVuZGVudEFycmF5Lm9iamVjdEF0KGl0ZW1J
        bmRleCk7CgogICAgICBmb3JFYWNoKGl0ZW1Qcm9wZXJ0eUtleXMsIHJlbW92
        ZU9ic2VydmVycywgdGhpcyk7CgogICAgICBjaGFuZ2VNZXRhID0gY3JlYXRl
        Q2hhbmdlTWV0YShkZXBlbmRlbnRBcnJheSwgaXRlbSwgaXRlbUluZGV4LCB0
        aGlzLmluc3RhbmNlTWV0YS5wcm9wZXJ0eU5hbWUsIHRoaXMuY3ApOwogICAg
        ICB0aGlzLnNldFZhbHVlKCByZW1vdmVkSXRlbS5jYWxsKAogICAgICAgIHRo
        aXMuaW5zdGFuY2VNZXRhLmNvbnRleHQsIHRoaXMuZ2V0VmFsdWUoKSwgaXRl
        bSwgY2hhbmdlTWV0YSwgdGhpcy5pbnN0YW5jZU1ldGEuc3VnYXJNZXRhKSk7
        CiAgICB9CiAgfSwKCiAgZGVwZW5kZW50QXJyYXlEaWRDaGFuZ2U6IGZ1bmN0
        aW9uIChkZXBlbmRlbnRBcnJheSwgaW5kZXgsIHJlbW92ZWRDb3VudCwgYWRk
        ZWRDb3VudCkgewogICAgaWYgKHRoaXMuc3VzcGVuZGVkKSB7IHJldHVybjsg
        fQoKICAgIHZhciBhZGRlZEl0ZW0gPSB0aGlzLmNhbGxiYWNrcy5hZGRlZEl0
        ZW0sCiAgICAgICAgZ3VpZCA9IGd1aWRGb3IoZGVwZW5kZW50QXJyYXkpLAog
        ICAgICAgIGRlcGVuZGVudEtleSA9IHRoaXMuZGVwZW5kZW50S2V5c0J5R3Vp
        ZFtndWlkXSwKICAgICAgICBvYnNlcnZlckNvbnRleHRzID0gbmV3IEFycmF5
        KGFkZGVkQ291bnQpLAogICAgICAgIGl0ZW1Qcm9wZXJ0eUtleXMgPSB0aGlz
        LmNwLl9pdGVtUHJvcGVydHlLZXlzW2RlcGVuZGVudEtleV0sCiAgICAgICAg
        bGVuZ3RoID0gZ2V0KGRlcGVuZGVudEFycmF5LCAnbGVuZ3RoJyksCiAgICAg
        ICAgbm9ybWFsaXplZEluZGV4ID0gbm9ybWFsaXplSW5kZXgoaW5kZXgsIGxl
        bmd0aCwgYWRkZWRDb3VudCksCiAgICAgICAgY2hhbmdlTWV0YSwKICAgICAg
        ICBvYnNlcnZlckNvbnRleHQ7CgogICAgZm9yRWFjaChkZXBlbmRlbnRBcnJh
        eS5zbGljZShub3JtYWxpemVkSW5kZXgsIG5vcm1hbGl6ZWRJbmRleCArIGFk
        ZGVkQ291bnQpLCBmdW5jdGlvbiAoaXRlbSwgc2xpY2VJbmRleCkgewogICAg
        ICBpZiAoaXRlbVByb3BlcnR5S2V5cykgewogICAgICAgIG9ic2VydmVyQ29u
        dGV4dCA9CiAgICAgICAgICBvYnNlcnZlckNvbnRleHRzW3NsaWNlSW5kZXhd
        ID0KICAgICAgICAgIHRoaXMuY3JlYXRlUHJvcGVydHlPYnNlcnZlckNvbnRl
        eHQoZGVwZW5kZW50QXJyYXksIG5vcm1hbGl6ZWRJbmRleCArIHNsaWNlSW5k
        ZXgsIHRoaXMudHJhY2tlZEFycmF5c0J5R3VpZFtkZXBlbmRlbnRLZXldKTsK
        ICAgICAgICBmb3JFYWNoKGl0ZW1Qcm9wZXJ0eUtleXMsIGZ1bmN0aW9uIChw
        cm9wZXJ0eUtleSkgewogICAgICAgICAgYWRkQmVmb3JlT2JzZXJ2ZXIoaXRl
        bSwgcHJvcGVydHlLZXksIHRoaXMsIG9ic2VydmVyQ29udGV4dC5iZWZvcmVP
        YnNlcnZlcik7CiAgICAgICAgICBhZGRPYnNlcnZlcihpdGVtLCBwcm9wZXJ0
        eUtleSwgdGhpcywgb2JzZXJ2ZXJDb250ZXh0Lm9ic2VydmVyKTsKICAgICAg
        ICB9LCB0aGlzKTsKICAgICAgfQoKICAgICAgY2hhbmdlTWV0YSA9IGNyZWF0
        ZUNoYW5nZU1ldGEoZGVwZW5kZW50QXJyYXksIGl0ZW0sIG5vcm1hbGl6ZWRJ
        bmRleCArIHNsaWNlSW5kZXgsIHRoaXMuaW5zdGFuY2VNZXRhLnByb3BlcnR5
        TmFtZSwgdGhpcy5jcCk7CiAgICAgIHRoaXMuc2V0VmFsdWUoIGFkZGVkSXRl
        bS5jYWxsKAogICAgICAgIHRoaXMuaW5zdGFuY2VNZXRhLmNvbnRleHQsIHRo
        aXMuZ2V0VmFsdWUoKSwgaXRlbSwgY2hhbmdlTWV0YSwgdGhpcy5pbnN0YW5j
        ZU1ldGEuc3VnYXJNZXRhKSk7CiAgICB9LCB0aGlzKTsKCiAgICB0aGlzLnRy
        YWNrQWRkKGRlcGVuZGVudEtleSwgbm9ybWFsaXplZEluZGV4LCBvYnNlcnZl
        ckNvbnRleHRzKTsKICB9LAoKICBpdGVtUHJvcGVydHlXaWxsQ2hhbmdlOiBm
        dW5jdGlvbiAob2JqLCBrZXlOYW1lLCBhcnJheSwgb2JzZXJ2ZXJDb250ZXh0
        KSB7CiAgICB2YXIgZ3VpZCA9IGd1aWRGb3Iob2JqKTsKCiAgICBpZiAoIXRo
        aXMuY2hhbmdlZEl0ZW1zW2d1aWRdKSB7CiAgICAgIHRoaXMuY2hhbmdlZEl0
        ZW1zW2d1aWRdID0gewogICAgICAgIGFycmF5OiAgICAgICAgICAgIGFycmF5
        LAogICAgICAgIG9ic2VydmVyQ29udGV4dDogIG9ic2VydmVyQ29udGV4dCwK
        ICAgICAgICBvYmo6ICAgICAgICAgICAgICBvYmosCiAgICAgICAgcHJldmlv
        dXNWYWx1ZXM6ICAge30KICAgICAgfTsKICAgIH0KCiAgICB0aGlzLmNoYW5n
        ZWRJdGVtc1tndWlkXS5wcmV2aW91c1ZhbHVlc1trZXlOYW1lXSA9IGdldChv
        YmosIGtleU5hbWUpOwogIH0sCgogIGl0ZW1Qcm9wZXJ0eURpZENoYW5nZTog
        ZnVuY3Rpb24ob2JqLCBrZXlOYW1lLCBhcnJheSwgb2JzZXJ2ZXJDb250ZXh0
        KSB7CiAgICB0aGlzLmZsdXNoQ2hhbmdlcygpOwogIH0sCgogIGZsdXNoQ2hh
        bmdlczogZnVuY3Rpb24oKSB7CiAgICB2YXIgY2hhbmdlZEl0ZW1zID0gdGhp
        cy5jaGFuZ2VkSXRlbXMsIGtleSwgYywgY2hhbmdlTWV0YTsKCiAgICBmb3Ig
        KGtleSBpbiBjaGFuZ2VkSXRlbXMpIHsKICAgICAgYyA9IGNoYW5nZWRJdGVt
        c1trZXldOwogICAgICBpZiAoYy5vYnNlcnZlckNvbnRleHQuZGVzdHJveWVk
        KSB7IGNvbnRpbnVlOyB9CgogICAgICB0aGlzLnVwZGF0ZUluZGV4ZXMoYy5v
        YnNlcnZlckNvbnRleHQudHJhY2tlZEFycmF5LCBjLm9ic2VydmVyQ29udGV4
        dC5kZXBlbmRlbnRBcnJheSk7CgogICAgICBjaGFuZ2VNZXRhID0gY3JlYXRl
        Q2hhbmdlTWV0YShjLmFycmF5LCBjLm9iaiwgYy5vYnNlcnZlckNvbnRleHQu
        aW5kZXgsIHRoaXMuaW5zdGFuY2VNZXRhLnByb3BlcnR5TmFtZSwgdGhpcy5j
        cCwgYy5wcmV2aW91c1ZhbHVlcyk7CiAgICAgIHRoaXMuc2V0VmFsdWUoCiAg
        ICAgICAgdGhpcy5jYWxsYmFja3MucmVtb3ZlZEl0ZW0uY2FsbCh0aGlzLmlu
        c3RhbmNlTWV0YS5jb250ZXh0LCB0aGlzLmdldFZhbHVlKCksIGMub2JqLCBj
        aGFuZ2VNZXRhLCB0aGlzLmluc3RhbmNlTWV0YS5zdWdhck1ldGEpKTsKICAg
        ICAgdGhpcy5zZXRWYWx1ZSgKICAgICAgICB0aGlzLmNhbGxiYWNrcy5hZGRl
        ZEl0ZW0uY2FsbCh0aGlzLmluc3RhbmNlTWV0YS5jb250ZXh0LCB0aGlzLmdl
        dFZhbHVlKCksIGMub2JqLCBjaGFuZ2VNZXRhLCB0aGlzLmluc3RhbmNlTWV0
        YS5zdWdhck1ldGEpKTsKICAgIH0KICAgIHRoaXMuY2hhbmdlZEl0ZW1zID0g
        e307CiAgfQp9OwoKZnVuY3Rpb24gbm9ybWFsaXplSW5kZXgoaW5kZXgsIGxl
        bmd0aCwgbmV3SXRlbXNPZmZzZXQpIHsKICBpZiAoaW5kZXggPCAwKSB7CiAg
        ICByZXR1cm4gTWF0aC5tYXgoMCwgbGVuZ3RoICsgaW5kZXgpOwogIH0gZWxz
        ZSBpZiAoaW5kZXggPCBsZW5ndGgpIHsKICAgIHJldHVybiBpbmRleDsKICB9
        IGVsc2UgLyogaW5kZXggPiBsZW5ndGggKi8gewogICAgcmV0dXJuIE1hdGgu
        bWluKGxlbmd0aCAtIG5ld0l0ZW1zT2Zmc2V0LCBpbmRleCk7CiAgfQp9Cgpm
        dW5jdGlvbiBub3JtYWxpemVSZW1vdmVDb3VudChpbmRleCwgbGVuZ3RoLCBy
        ZW1vdmVkQ291bnQpIHsKICByZXR1cm4gTWF0aC5taW4ocmVtb3ZlZENvdW50
        LCBsZW5ndGggLSBpbmRleCk7Cn0KCmZ1bmN0aW9uIGNyZWF0ZUNoYW5nZU1l
        dGEoZGVwZW5kZW50QXJyYXksIGl0ZW0sIGluZGV4LCBwcm9wZXJ0eU5hbWUs
        IHByb3BlcnR5LCBwcmV2aW91c1ZhbHVlcykgewogIHZhciBtZXRhID0gewog
        ICAgYXJyYXlDaGFuZ2VkOiBkZXBlbmRlbnRBcnJheSwKICAgIGluZGV4OiBp
        bmRleCwKICAgIGl0ZW06IGl0ZW0sCiAgICBwcm9wZXJ0eU5hbWU6IHByb3Bl
        cnR5TmFtZSwKICAgIHByb3BlcnR5OiBwcm9wZXJ0eQogIH07CgogIGlmIChw
        cmV2aW91c1ZhbHVlcykgewogICAgLy8gcHJldmlvdXMgdmFsdWVzIG9ubHkg
        YXZhaWxhYmxlIGZvciBpdGVtIHByb3BlcnR5IGNoYW5nZXMKICAgIG1ldGEu
        cHJldmlvdXNWYWx1ZXMgPSBwcmV2aW91c1ZhbHVlczsKICB9CgogIHJldHVy
        biBtZXRhOwp9CgpmdW5jdGlvbiBhZGRJdGVtcyAoZGVwZW5kZW50QXJyYXks
        IGNhbGxiYWNrcywgY3AsIHByb3BlcnR5TmFtZSwgbWV0YSkgewogIGZvckVh
        Y2goZGVwZW5kZW50QXJyYXksIGZ1bmN0aW9uIChpdGVtLCBpbmRleCkgewog
        ICAgbWV0YS5zZXRWYWx1ZSggY2FsbGJhY2tzLmFkZGVkSXRlbS5jYWxsKAog
        ICAgICB0aGlzLCBtZXRhLmdldFZhbHVlKCksIGl0ZW0sIGNyZWF0ZUNoYW5n
        ZU1ldGEoZGVwZW5kZW50QXJyYXksIGl0ZW0sIGluZGV4LCBwcm9wZXJ0eU5h
        bWUsIGNwKSwgbWV0YS5zdWdhck1ldGEpKTsKICB9LCB0aGlzKTsKfQoKZnVu
        Y3Rpb24gcmVzZXQoY3AsIHByb3BlcnR5TmFtZSkgewogIHZhciBjYWxsYmFj
        a3MgPSBjcC5fY2FsbGJhY2tzKCksCiAgICAgIG1ldGE7CgogIGlmIChjcC5f
        aGFzSW5zdGFuY2VNZXRhKHRoaXMsIHByb3BlcnR5TmFtZSkpIHsKICAgIG1l
        dGEgPSBjcC5faW5zdGFuY2VNZXRhKHRoaXMsIHByb3BlcnR5TmFtZSk7CiAg
        ICBtZXRhLnNldFZhbHVlKGNwLnJlc2V0VmFsdWUobWV0YS5nZXRWYWx1ZSgp
        KSk7CiAgfSBlbHNlIHsKICAgIG1ldGEgPSBjcC5faW5zdGFuY2VNZXRhKHRo
        aXMsIHByb3BlcnR5TmFtZSk7CiAgfQoKICBpZiAoY3Aub3B0aW9ucy5pbml0
        aWFsaXplKSB7CiAgICBjcC5vcHRpb25zLmluaXRpYWxpemUuY2FsbCh0aGlz
        LCBtZXRhLmdldFZhbHVlKCksIHsgcHJvcGVydHk6IGNwLCBwcm9wZXJ0eU5h
        bWU6IHByb3BlcnR5TmFtZSB9LCBtZXRhLnN1Z2FyTWV0YSk7CiAgfQp9Cgpm
        dW5jdGlvbiBwYXJ0aWFsbHlSZWNvbXB1dGVGb3Iob2JqLCBkZXBlbmRlbnRL
        ZXkpIHsKICBpZiAoYXJyYXlCcmFja2V0UGF0dGVybi50ZXN0KGRlcGVuZGVu
        dEtleSkpIHsKICAgIHJldHVybiBmYWxzZTsKICB9CgogIHZhciB2YWx1ZSA9
        IGdldChvYmosIGRlcGVuZGVudEtleSk7CiAgcmV0dXJuIEVtYmVyLkFycmF5
        LmRldGVjdCh2YWx1ZSk7Cn0KCmZ1bmN0aW9uIFJlZHVjZUNvbXB1dGVkUHJv
        cGVydHlJbnN0YW5jZU1ldGEoY29udGV4dCwgcHJvcGVydHlOYW1lLCBpbml0
        aWFsVmFsdWUpIHsKICB0aGlzLmNvbnRleHQgPSBjb250ZXh0OwogIHRoaXMu
        cHJvcGVydHlOYW1lID0gcHJvcGVydHlOYW1lOwogIHRoaXMuY2FjaGUgPSBt
        ZXRhRm9yKGNvbnRleHQpLmNhY2hlOwoKICB0aGlzLmRlcGVuZGVudEFycmF5
        cyA9IHt9OwogIHRoaXMuc3VnYXJNZXRhID0ge307CgogIHRoaXMuaW5pdGlh
        bFZhbHVlID0gaW5pdGlhbFZhbHVlOwp9CgpSZWR1Y2VDb21wdXRlZFByb3Bl
        cnR5SW5zdGFuY2VNZXRhLnByb3RvdHlwZSA9IHsKICBnZXRWYWx1ZTogZnVu
        Y3Rpb24gKCkgewogICAgaWYgKHRoaXMucHJvcGVydHlOYW1lIGluIHRoaXMu
        Y2FjaGUpIHsKICAgICAgcmV0dXJuIHRoaXMuY2FjaGVbdGhpcy5wcm9wZXJ0
        eU5hbWVdOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIHRoaXMuaW5pdGlh
        bFZhbHVlOwogICAgfQogIH0sCgogIHNldFZhbHVlOiBmdW5jdGlvbihuZXdW
        YWx1ZSwgdHJpZ2dlck9ic2VydmVycykgewogICAgLy8gVGhpcyBsZXRzIHN1
        Z2FycyBmb3JjZSBhIHJlY29tcHV0YXRpb24sIGhhbmR5IGZvciB2ZXJ5IHNp
        bXBsZQogICAgLy8gaW1wbGVtZW50YXRpb25zIG9mIGVnIG1heC4KICAgIGlm
        IChuZXdWYWx1ZSA9PT0gdGhpcy5jYWNoZVt0aGlzLnByb3BlcnR5TmFtZV0p
        IHsKICAgICAgcmV0dXJuOwogICAgfQoKICAgIGlmICh0cmlnZ2VyT2JzZXJ2
        ZXJzKSB7CiAgICAgIHByb3BlcnR5V2lsbENoYW5nZSh0aGlzLmNvbnRleHQs
        IHRoaXMucHJvcGVydHlOYW1lKTsKICAgIH0KCiAgICBpZiAobmV3VmFsdWUg
        PT09IHVuZGVmaW5lZCkgewogICAgICBkZWxldGUgdGhpcy5jYWNoZVt0aGlz
        LnByb3BlcnR5TmFtZV07CiAgICB9IGVsc2UgewogICAgICB0aGlzLmNhY2hl
        W3RoaXMucHJvcGVydHlOYW1lXSA9IG5ld1ZhbHVlOwogICAgfQoKICAgIGlm
        ICh0cmlnZ2VyT2JzZXJ2ZXJzKSB7CiAgICAgIHByb3BlcnR5RGlkQ2hhbmdl
        KHRoaXMuY29udGV4dCwgdGhpcy5wcm9wZXJ0eU5hbWUpOwogICAgfQogIH0K
        fTsKCi8qKgogIEEgY29tcHV0ZWQgcHJvcGVydHkgd2hvc2UgZGVwZW5kZW50
        IGtleXMgYXJlIGFycmF5cyBhbmQgd2hpY2ggaXMgdXBkYXRlZCB3aXRoCiAg
        Im9uZSBhdCBhIHRpbWUiIHNlbWFudGljcy4KCiAgQGNsYXNzIFJlZHVjZUNv
        bXB1dGVkUHJvcGVydHkKICBAbmFtZXNwYWNlIEVtYmVyCiAgQGV4dGVuZHMg
        RW1iZXIuQ29tcHV0ZWRQcm9wZXJ0eQogIEBjb25zdHJ1Y3RvcgoqLwpmdW5j
        dGlvbiBSZWR1Y2VDb21wdXRlZFByb3BlcnR5KG9wdGlvbnMpIHsKICB2YXIg
        Y3AgPSB0aGlzOwoKICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zOwogIHRoaXMu
        X2luc3RhbmNlTWV0YXMgPSB7fTsKCiAgdGhpcy5fZGVwZW5kZW50S2V5cyA9
        IG51bGw7CiAgLy8gQSBtYXAgb2YgZGVwZW5kZW50S2V5IC0+IFtpdGVtUHJv
        cGVydHksIC4uLl0gdGhhdCB0cmFja3Mgd2hhdCBwcm9wZXJ0aWVzIG9mCiAg
        Ly8gaXRlbXMgaW4gdGhlIGFycmF5IHdlIG11c3QgdHJhY2sgdG8gdXBkYXRl
        IHRoaXMgcHJvcGVydHkuCiAgdGhpcy5faXRlbVByb3BlcnR5S2V5cyA9IHt9
        OwogIHRoaXMuX3ByZXZpb3VzSXRlbVByb3BlcnR5S2V5cyA9IHt9OwoKICB0
        aGlzLnJlYWRPbmx5KCk7CiAgdGhpcy5jYWNoZWFibGUoKTsKCiAgdGhpcy5y
        ZWNvbXB1dGVPbmNlID0gZnVuY3Rpb24ocHJvcGVydHlOYW1lKSB7CiAgICAv
        LyBXaGF0IHdlIHJlYWxseSB3YW50IHRvIGRvIGlzIGNvYWxlc2NlIGJ5IDxj
        cCwgcHJvcGVydHlOYW1lPi4KICAgIC8vIFdlIG5lZWQgYSBmb3JtIG9mIGBz
        Y2hlZHVsZU9uY2VgIHRoYXQgYWNjZXB0cyBhbiBhcmJpdHJhcnkgdG9rZW4g
        dG8KICAgIC8vIGNvYWxlc2NlIGJ5LCBpbiBhZGRpdGlvbiB0byB0aGUgdGFy
        Z2V0IGFuZCBtZXRob2QuCiAgICBFbWJlci5ydW4ub25jZSh0aGlzLCByZWNv
        bXB1dGUsIHByb3BlcnR5TmFtZSk7CiAgfTsKICB2YXIgcmVjb21wdXRlID0g
        ZnVuY3Rpb24ocHJvcGVydHlOYW1lKSB7CiAgICB2YXIgZGVwZW5kZW50S2V5
        cyA9IGNwLl9kZXBlbmRlbnRLZXlzLAogICAgICAgIG1ldGEgPSBjcC5faW5z
        dGFuY2VNZXRhKHRoaXMsIHByb3BlcnR5TmFtZSksCiAgICAgICAgY2FsbGJh
        Y2tzID0gY3AuX2NhbGxiYWNrcygpOwoKICAgIHJlc2V0LmNhbGwodGhpcywg
        Y3AsIHByb3BlcnR5TmFtZSk7CgogICAgbWV0YS5kZXBlbmRlbnRBcnJheXNP
        YnNlcnZlci5zdXNwZW5kQXJyYXlPYnNlcnZlcnMoZnVuY3Rpb24gKCkgewog
        ICAgICBmb3JFYWNoKGNwLl9kZXBlbmRlbnRLZXlzLCBmdW5jdGlvbiAoZGVw
        ZW5kZW50S2V5KSB7CiAgICAgICAgRW1iZXIuYXNzZXJ0KAogICAgICAgICAg
        ImRlcGVuZGVudCBhcnJheSAiICsgZGVwZW5kZW50S2V5ICsgIiBtdXN0IGJl
        IGFuIGBFbWJlci5BcnJheWAuICAiICsKICAgICAgICAgICJJZiB5b3UgYXJl
        IG5vdCBleHRlbmRpbmcgYXJyYXlzLCB5b3Ugd2lsbCBuZWVkIHRvIHdyYXAg
        bmF0aXZlIGFycmF5cyB3aXRoIGBFbWJlci5BYCIsCiAgICAgICAgICAhKEVt
        YmVyLmlzQXJyYXkoZ2V0KHRoaXMsIGRlcGVuZGVudEtleSkpICYmICFFbWJl
        ci5BcnJheS5kZXRlY3QoZ2V0KHRoaXMsIGRlcGVuZGVudEtleSkpKSk7Cgog
        ICAgICAgIGlmICghcGFydGlhbGx5UmVjb21wdXRlRm9yKHRoaXMsIGRlcGVu
        ZGVudEtleSkpIHsgcmV0dXJuOyB9CgogICAgICAgIHZhciBkZXBlbmRlbnRB
        cnJheSA9IGdldCh0aGlzLCBkZXBlbmRlbnRLZXkpLAogICAgICAgICAgICBw
        cmV2aW91c0RlcGVuZGVudEFycmF5ID0gbWV0YS5kZXBlbmRlbnRBcnJheXNb
        ZGVwZW5kZW50S2V5XTsKCiAgICAgICAgaWYgKGRlcGVuZGVudEFycmF5ID09
        PSBwcmV2aW91c0RlcGVuZGVudEFycmF5KSB7CiAgICAgICAgICAvLyBUaGUg
        YXJyYXkgbWF5IGJlIHRoZSBzYW1lLCBidXQgb3VyIGl0ZW0gcHJvcGVydHkg
        a2V5cyBtYXkgaGF2ZQogICAgICAgICAgLy8gY2hhbmdlZCwgc28gd2Ugc2V0
        IHRoZW0gdXAgYWdhaW4uICBXZSBjYW4ndCBlYXNpbHkgdGVsbCBpZiB0aGV5
        J3ZlCiAgICAgICAgICAvLyBjaGFuZ2VkOiB0aGUgYXJyYXkgbWF5IGJlIHRo
        ZSBzYW1lIG9iamVjdCwgYnV0IHdpdGggZGlmZmVyZW50CiAgICAgICAgICAv
        LyBjb250ZW50cy4KICAgICAgICAgIGlmIChjcC5fcHJldmlvdXNJdGVtUHJv
        cGVydHlLZXlzW2RlcGVuZGVudEtleV0pIHsKICAgICAgICAgICAgZGVsZXRl
        IGNwLl9wcmV2aW91c0l0ZW1Qcm9wZXJ0eUtleXNbZGVwZW5kZW50S2V5XTsK
        ICAgICAgICAgICAgbWV0YS5kZXBlbmRlbnRBcnJheXNPYnNlcnZlci5zZXR1
        cFByb3BlcnR5T2JzZXJ2ZXJzKGRlcGVuZGVudEtleSwgY3AuX2l0ZW1Qcm9w
        ZXJ0eUtleXNbZGVwZW5kZW50S2V5XSk7CiAgICAgICAgICB9CiAgICAgICAg
        fSBlbHNlIHsKICAgICAgICAgIG1ldGEuZGVwZW5kZW50QXJyYXlzW2RlcGVu
        ZGVudEtleV0gPSBkZXBlbmRlbnRBcnJheTsKCiAgICAgICAgICBpZiAocHJl
        dmlvdXNEZXBlbmRlbnRBcnJheSkgewogICAgICAgICAgICBtZXRhLmRlcGVu
        ZGVudEFycmF5c09ic2VydmVyLnRlYXJkb3duT2JzZXJ2ZXJzKHByZXZpb3Vz
        RGVwZW5kZW50QXJyYXksIGRlcGVuZGVudEtleSk7CiAgICAgICAgICB9Cgog
        ICAgICAgICAgaWYgKGRlcGVuZGVudEFycmF5KSB7CiAgICAgICAgICAgIG1l
        dGEuZGVwZW5kZW50QXJyYXlzT2JzZXJ2ZXIuc2V0dXBPYnNlcnZlcnMoZGVw
        ZW5kZW50QXJyYXksIGRlcGVuZGVudEtleSk7CiAgICAgICAgICB9CiAgICAg
        ICAgfQogICAgICB9LCB0aGlzKTsKICAgIH0sIHRoaXMpOwoKICAgIGZvckVh
        Y2goY3AuX2RlcGVuZGVudEtleXMsIGZ1bmN0aW9uKGRlcGVuZGVudEtleSkg
        ewogICAgICBpZiAoIXBhcnRpYWxseVJlY29tcHV0ZUZvcih0aGlzLCBkZXBl
        bmRlbnRLZXkpKSB7IHJldHVybjsgfQoKICAgICAgdmFyIGRlcGVuZGVudEFy
        cmF5ID0gZ2V0KHRoaXMsIGRlcGVuZGVudEtleSk7CiAgICAgIGlmIChkZXBl
        bmRlbnRBcnJheSkgewogICAgICAgIGFkZEl0ZW1zLmNhbGwodGhpcywgZGVw
        ZW5kZW50QXJyYXksIGNhbGxiYWNrcywgY3AsIHByb3BlcnR5TmFtZSwgbWV0
        YSk7CiAgICAgIH0KICAgIH0sIHRoaXMpOwogIH07CgoKICB0aGlzLmZ1bmMg
        PSBmdW5jdGlvbiAocHJvcGVydHlOYW1lKSB7CiAgICBFbWJlci5hc3NlcnQo
        IkNvbXB1dGVkIHJlZHVjZSB2YWx1ZXMgcmVxdWlyZSBhdCBsZWFzdCBvbmUg
        ZGVwZW5kZW50IGtleSIsIGNwLl9kZXBlbmRlbnRLZXlzKTsKCiAgICByZWNv
        bXB1dGUuY2FsbCh0aGlzLCBwcm9wZXJ0eU5hbWUpOwoKICAgIHJldHVybiBj
        cC5faW5zdGFuY2VNZXRhKHRoaXMsIHByb3BlcnR5TmFtZSkuZ2V0VmFsdWUo
        KTsKICB9Owp9CgpFbWJlci5SZWR1Y2VDb21wdXRlZFByb3BlcnR5ID0gUmVk
        dWNlQ29tcHV0ZWRQcm9wZXJ0eTsKUmVkdWNlQ29tcHV0ZWRQcm9wZXJ0eS5w
        cm90b3R5cGUgPSBvX2NyZWF0ZShDb21wdXRlZFByb3BlcnR5LnByb3RvdHlw
        ZSk7CgpmdW5jdGlvbiBkZWZhdWx0Q2FsbGJhY2soY29tcHV0ZWRWYWx1ZSkg
        ewogIHJldHVybiBjb21wdXRlZFZhbHVlOwp9CgpSZWR1Y2VDb21wdXRlZFBy
        b3BlcnR5LnByb3RvdHlwZS5fY2FsbGJhY2tzID0gZnVuY3Rpb24gKCkgewog
        IGlmICghdGhpcy5jYWxsYmFja3MpIHsKICAgIHZhciBvcHRpb25zID0gdGhp
        cy5vcHRpb25zOwogICAgdGhpcy5jYWxsYmFja3MgPSB7CiAgICAgIHJlbW92
        ZWRJdGVtOiBvcHRpb25zLnJlbW92ZWRJdGVtIHx8IGRlZmF1bHRDYWxsYmFj
        aywKICAgICAgYWRkZWRJdGVtOiBvcHRpb25zLmFkZGVkSXRlbSB8fCBkZWZh
        dWx0Q2FsbGJhY2sKICAgIH07CiAgfQogIHJldHVybiB0aGlzLmNhbGxiYWNr
        czsKfTsKClJlZHVjZUNvbXB1dGVkUHJvcGVydHkucHJvdG90eXBlLl9oYXNJ
        bnN0YW5jZU1ldGEgPSBmdW5jdGlvbiAoY29udGV4dCwgcHJvcGVydHlOYW1l
        KSB7CiAgdmFyIGd1aWQgPSBndWlkRm9yKGNvbnRleHQpLAogICAgICBrZXkg
        PSBndWlkICsgJzonICsgcHJvcGVydHlOYW1lOwoKICByZXR1cm4gISF0aGlz
        Ll9pbnN0YW5jZU1ldGFzW2tleV07Cn07CgpSZWR1Y2VDb21wdXRlZFByb3Bl
        cnR5LnByb3RvdHlwZS5faW5zdGFuY2VNZXRhID0gZnVuY3Rpb24gKGNvbnRl
        eHQsIHByb3BlcnR5TmFtZSkgewogIHZhciBndWlkID0gZ3VpZEZvcihjb250
        ZXh0KSwKICAgICAga2V5ID0gZ3VpZCArICc6JyArIHByb3BlcnR5TmFtZSwK
        ICAgICAgbWV0YSA9IHRoaXMuX2luc3RhbmNlTWV0YXNba2V5XTsKCiAgaWYg
        KCFtZXRhKSB7CiAgICBtZXRhID0gdGhpcy5faW5zdGFuY2VNZXRhc1trZXld
        ID0gbmV3IFJlZHVjZUNvbXB1dGVkUHJvcGVydHlJbnN0YW5jZU1ldGEoY29u
        dGV4dCwgcHJvcGVydHlOYW1lLCB0aGlzLmluaXRpYWxWYWx1ZSgpKTsKICAg
        IG1ldGEuZGVwZW5kZW50QXJyYXlzT2JzZXJ2ZXIgPSBuZXcgRGVwZW5kZW50
        QXJyYXlzT2JzZXJ2ZXIodGhpcy5fY2FsbGJhY2tzKCksIHRoaXMsIG1ldGEs
        IGNvbnRleHQsIHByb3BlcnR5TmFtZSwgbWV0YS5zdWdhck1ldGEpOwogIH0K
        CiAgcmV0dXJuIG1ldGE7Cn07CgpSZWR1Y2VDb21wdXRlZFByb3BlcnR5LnBy
        b3RvdHlwZS5pbml0aWFsVmFsdWUgPSBmdW5jdGlvbiAoKSB7CiAgaWYgKHR5
        cGVvZiB0aGlzLm9wdGlvbnMuaW5pdGlhbFZhbHVlID09PSAnZnVuY3Rpb24n
        KSB7CiAgICByZXR1cm4gdGhpcy5vcHRpb25zLmluaXRpYWxWYWx1ZSgpOwog
        IH0KICBlbHNlIHsKICAgIHJldHVybiB0aGlzLm9wdGlvbnMuaW5pdGlhbFZh
        bHVlOwogIH0KfTsKClJlZHVjZUNvbXB1dGVkUHJvcGVydHkucHJvdG90eXBl
        LnJlc2V0VmFsdWUgPSBmdW5jdGlvbiAodmFsdWUpIHsKICByZXR1cm4gdGhp
        cy5pbml0aWFsVmFsdWUoKTsKfTsKClJlZHVjZUNvbXB1dGVkUHJvcGVydHku
        cHJvdG90eXBlLml0ZW1Qcm9wZXJ0eUtleSA9IGZ1bmN0aW9uIChkZXBlbmRl
        bnRBcnJheUtleSwgaXRlbVByb3BlcnR5S2V5KSB7CiAgdGhpcy5faXRlbVBy
        b3BlcnR5S2V5c1tkZXBlbmRlbnRBcnJheUtleV0gPSB0aGlzLl9pdGVtUHJv
        cGVydHlLZXlzW2RlcGVuZGVudEFycmF5S2V5XSB8fCBbXTsKICB0aGlzLl9p
        dGVtUHJvcGVydHlLZXlzW2RlcGVuZGVudEFycmF5S2V5XS5wdXNoKGl0ZW1Q
        cm9wZXJ0eUtleSk7Cn07CgpSZWR1Y2VDb21wdXRlZFByb3BlcnR5LnByb3Rv
        dHlwZS5jbGVhckl0ZW1Qcm9wZXJ0eUtleXMgPSBmdW5jdGlvbiAoZGVwZW5k
        ZW50QXJyYXlLZXkpIHsKICBpZiAodGhpcy5faXRlbVByb3BlcnR5S2V5c1tk
        ZXBlbmRlbnRBcnJheUtleV0pIHsKICAgIHRoaXMuX3ByZXZpb3VzSXRlbVBy
        b3BlcnR5S2V5c1tkZXBlbmRlbnRBcnJheUtleV0gPSB0aGlzLl9pdGVtUHJv
        cGVydHlLZXlzW2RlcGVuZGVudEFycmF5S2V5XTsKICAgIHRoaXMuX2l0ZW1Q
        cm9wZXJ0eUtleXNbZGVwZW5kZW50QXJyYXlLZXldID0gW107CiAgfQp9OwoK
        UmVkdWNlQ29tcHV0ZWRQcm9wZXJ0eS5wcm90b3R5cGUucHJvcGVydHkgPSBm
        dW5jdGlvbiAoKSB7CiAgdmFyIGNwID0gdGhpcywKICAgICAgYXJncyA9IGFf
        c2xpY2UuY2FsbChhcmd1bWVudHMpLAogICAgICBwcm9wZXJ0eUFyZ3MgPSBu
        ZXcgRW1iZXIuU2V0KCksCiAgICAgIG1hdGNoLAogICAgICBkZXBlbmRlbnRB
        cnJheUtleSwKICAgICAgaXRlbVByb3BlcnR5S2V5OwoKICBmb3JFYWNoKGFy
        Z3MsIGZ1bmN0aW9uIChkZXBlbmRlbnRLZXkpIHsKICAgIGlmIChkb3VibGVF
        YWNoUHJvcGVydHlQYXR0ZXJuLnRlc3QoZGVwZW5kZW50S2V5KSkgewogICAg
        ICB0aHJvdyBuZXcgRW1iZXIuRXJyb3IoIk5lc3RlZCBAZWFjaCBwcm9wZXJ0
        aWVzIG5vdCBzdXBwb3J0ZWQ6ICIgKyBkZXBlbmRlbnRLZXkpOwogICAgfSBl
        bHNlIGlmIChtYXRjaCA9IGVhY2hQcm9wZXJ0eVBhdHRlcm4uZXhlYyhkZXBl
        bmRlbnRLZXkpKSB7CiAgICAgIGRlcGVuZGVudEFycmF5S2V5ID0gbWF0Y2hb
        MV07CgogICAgICB2YXIgaXRlbVByb3BlcnR5S2V5UGF0dGVybiA9IG1hdGNo
        WzJdLAogICAgICAgICAgYWRkSXRlbVByb3BlcnR5S2V5ID0gZnVuY3Rpb24g
        KGl0ZW1Qcm9wZXJ0eUtleSkgewogICAgICAgICAgICBjcC5pdGVtUHJvcGVy
        dHlLZXkoZGVwZW5kZW50QXJyYXlLZXksIGl0ZW1Qcm9wZXJ0eUtleSk7CiAg
        ICAgICAgICB9OwoKICAgICAgZXhwYW5kUHJvcGVydGllcyhpdGVtUHJvcGVy
        dHlLZXlQYXR0ZXJuLCBhZGRJdGVtUHJvcGVydHlLZXkpOwogICAgICBwcm9w
        ZXJ0eUFyZ3MuYWRkKGRlcGVuZGVudEFycmF5S2V5KTsKICAgIH0gZWxzZSB7
        CiAgICAgIHByb3BlcnR5QXJncy5hZGQoZGVwZW5kZW50S2V5KTsKICAgIH0K
        ICB9KTsKCiAgcmV0dXJuIENvbXB1dGVkUHJvcGVydHkucHJvdG90eXBlLnBy
        b3BlcnR5LmFwcGx5KHRoaXMsIHByb3BlcnR5QXJncy50b0FycmF5KCkpOwoK
        fTsKCi8qKgogIENyZWF0ZXMgYSBjb21wdXRlZCBwcm9wZXJ0eSB3aGljaCBv
        cGVyYXRlcyBvbiBkZXBlbmRlbnQgYXJyYXlzIGFuZAogIGlzIHVwZGF0ZWQg
        d2l0aCAib25lIGF0IGEgdGltZSIgc2VtYW50aWNzLiBXaGVuIGl0ZW1zIGFy
        ZSBhZGRlZCBvcgogIHJlbW92ZWQgZnJvbSB0aGUgZGVwZW5kZW50IGFycmF5
        KHMpIGEgcmVkdWNlIGNvbXB1dGVkIG9ubHkgb3BlcmF0ZXMKICBvbiB0aGUg
        Y2hhbmdlIGluc3RlYWQgb2YgcmUtZXZhbHVhdGluZyB0aGUgZW50aXJlIGFy
        cmF5LgoKICBJZiB0aGVyZSBhcmUgbW9yZSB0aGFuIG9uZSBhcmd1bWVudHMg
        dGhlIGZpcnN0IGFyZ3VtZW50cyBhcmUKICBjb25zaWRlcmVkIHRvIGJlIGRl
        cGVuZGVudCBwcm9wZXJ0eSBrZXlzLiBUaGUgbGFzdCBhcmd1bWVudCBpcwog
        IHJlcXVpcmVkIHRvIGJlIGFuIG9wdGlvbnMgb2JqZWN0LiBUaGUgb3B0aW9u
        cyBvYmplY3QgY2FuIGhhdmUgdGhlCiAgZm9sbG93aW5nIGZvdXIgcHJvcGVy
        dGllczoKCiAgYGluaXRpYWxWYWx1ZWAgLSBBIHZhbHVlIG9yIGZ1bmN0aW9u
        IHRoYXQgd2lsbCBiZSB1c2VkIGFzIHRoZSBpbml0aWFsCiAgdmFsdWUgZm9y
        IHRoZSBjb21wdXRlZC4gSWYgdGhpcyBwcm9wZXJ0eSBpcyBhIGZ1bmN0aW9u
        IHRoZSByZXN1bHQgb2YgY2FsbGluZwogIHRoZSBmdW5jdGlvbiB3aWxsIGJl
        IHVzZWQgYXMgdGhlIGluaXRpYWwgdmFsdWUuIFRoaXMgcHJvcGVydHkgaXMg
        cmVxdWlyZWQuCgogIGBpbml0aWFsaXplYCAtIEFuIG9wdGlvbmFsIGluaXRp
        YWxpemUgZnVuY3Rpb24uIFR5cGljYWxseSB0aGlzIHdpbGwgYmUgdXNlZAog
        IHRvIHNldCB1cCBzdGF0ZSBvbiB0aGUgaW5zdGFuY2VNZXRhIG9iamVjdC4K
        CiAgYHJlbW92ZWRJdGVtYCAtIEEgZnVuY3Rpb24gdGhhdCBpcyBjYWxsZWQg
        ZWFjaCB0aW1lIGFuIGVsZW1lbnQgaXMgcmVtb3ZlZAogIGZyb20gdGhlIGFy
        cmF5LgoKICBgYWRkZWRJdGVtYCAtIEEgZnVuY3Rpb24gdGhhdCBpcyBjYWxs
        ZWQgZWFjaCB0aW1lIGFuIGVsZW1lbnQgaXMgYWRkZWQgdG8KICB0aGUgYXJy
        YXkuCgoKICBUaGUgYGluaXRpYWxpemVgIGZ1bmN0aW9uIGhhcyB0aGUgZm9s
        bG93aW5nIHNpZ25hdHVyZToKCiAgYGBgamF2YXNjcmlwdAogICBmdW5jdGlv
        biAoaW5pdGlhbFZhbHVlLCBjaGFuZ2VNZXRhLCBpbnN0YW5jZU1ldGEpCiAg
        YGBgCgogIGBpbml0aWFsVmFsdWVgIC0gVGhlIHZhbHVlIG9mIHRoZSBgaW5p
        dGlhbFZhbHVlYCBwcm9wZXJ0eSBmcm9tIHRoZQogIG9wdGlvbnMgb2JqZWN0
        LgoKICBgY2hhbmdlTWV0YWAgLSBBbiBvYmplY3Qgd2hpY2ggY29udGFpbnMg
        bWV0YSBpbmZvcm1hdGlvbiBhYm91dCB0aGUKICBjb21wdXRlZC4gSXQgY29u
        dGFpbnMgdGhlIGZvbGxvd2luZyBwcm9wZXJ0aWVzOgoKICAgICAtIGBwcm9w
        ZXJ0eWAgdGhlIGNvbXB1dGVkIHByb3BlcnR5CiAgICAgLSBgcHJvcGVydHlO
        YW1lYCB0aGUgbmFtZSBvZiB0aGUgcHJvcGVydHkgb24gdGhlIG9iamVjdAoK
        ICBgaW5zdGFuY2VNZXRhYCAtIEFuIG9iamVjdCB0aGF0IGNhbiBiZSB1c2Vk
        IHRvIHN0b3JlIG1ldGEKICBpbmZvcm1hdGlvbiBuZWVkZWQgZm9yIGNhbGN1
        bGF0aW5nIHlvdXIgY29tcHV0ZWQuIEZvciBleGFtcGxlIGEKICB1bmlxdWUg
        Y29tcHV0ZWQgbWlnaHQgdXNlIHRoaXMgdG8gc3RvcmUgdGhlIG51bWJlciBv
        ZiB0aW1lcyBhIGdpdmVuCiAgZWxlbWVudCBpcyBmb3VuZCBpbiB0aGUgZGVw
        ZW5kZW50IGFycmF5LgoKCiAgVGhlIGByZW1vdmVkSXRlbWAgYW5kIGBhZGRl
        ZEl0ZW1gIGZ1bmN0aW9ucyBib3RoIGhhdmUgdGhlIGZvbGxvd2luZyBzaWdu
        YXR1cmU6CgogIGBgYGphdmFzY3JpcHQKICBmdW5jdGlvbiAoYWNjdW11bGF0
        ZWRWYWx1ZSwgaXRlbSwgY2hhbmdlTWV0YSwgaW5zdGFuY2VNZXRhKQogIGBg
        YAoKICBgYWNjdW11bGF0ZWRWYWx1ZWAgLSBUaGUgdmFsdWUgcmV0dXJuZWQg
        ZnJvbSB0aGUgbGFzdCB0aW1lCiAgYHJlbW92ZWRJdGVtYCBvciBgYWRkZWRJ
        dGVtYCB3YXMgY2FsbGVkIG9yIGBpbml0aWFsVmFsdWVgLgoKICBgaXRlbWAg
        LSB0aGUgZWxlbWVudCBhZGRlZCBvciByZW1vdmVkIGZyb20gdGhlIGFycmF5
        CgogIGBjaGFuZ2VNZXRhYCAtIEFuIG9iamVjdCB3aGljaCBjb250YWlucyBt
        ZXRhIGluZm9ybWF0aW9uIGFib3V0IHRoZQogIGNoYW5nZS4gSXQgY29udGFp
        bnMgdGhlIGZvbGxvd2luZyBwcm9wZXJ0aWVzOgoKICAgIC0gYHByb3BlcnR5
        YCB0aGUgY29tcHV0ZWQgcHJvcGVydHkKICAgIC0gYHByb3BlcnR5TmFtZWAg
        dGhlIG5hbWUgb2YgdGhlIHByb3BlcnR5IG9uIHRoZSBvYmplY3QKICAgIC0g
        YGluZGV4YCB0aGUgaW5kZXggb2YgdGhlIGFkZGVkIG9yIHJlbW92ZWQgaXRl
        bQogICAgLSBgaXRlbWAgdGhlIGFkZGVkIG9yIHJlbW92ZWQgaXRlbTogdGhp
        cyBpcyBleGFjdGx5IHRoZSBzYW1lIGFzCiAgICAgIHRoZSBzZWNvbmQgYXJn
        CiAgICAtIGBhcnJheUNoYW5nZWRgIHRoZSBhcnJheSB0aGF0IHRyaWdnZXJl
        ZCB0aGUgY2hhbmdlLiBDYW4gYmUKICAgICAgdXNlZnVsIHdoZW4gZGVwZW5k
        aW5nIG9uIG11bHRpcGxlIGFycmF5cy4KCiAgRm9yIHByb3BlcnR5IGNoYW5n
        ZXMgdHJpZ2dlcmVkIG9uIGFuIGl0ZW0gcHJvcGVydHkgY2hhbmdlICh3aGVu
        CiAgZGVwS2V5IGlzIHNvbWV0aGluZyBsaWtlIGBzb21lQXJyYXkuQGVhY2gu
        c29tZVByb3BlcnR5YCksCiAgYGNoYW5nZU1ldGFgIHdpbGwgYWxzbyBjb250
        YWluIHRoZSBmb2xsb3dpbmcgcHJvcGVydHk6CgogICAgLSBgcHJldmlvdXNW
        YWx1ZXNgIGFuIG9iamVjdCB3aG9zZSBrZXlzIGFyZSB0aGUgcHJvcGVydGll
        cyB0aGF0IGNoYW5nZWQgb24KICAgIHRoZSBpdGVtLCBhbmQgd2hvc2UgdmFs
        dWVzIGFyZSB0aGUgaXRlbSdzIHByZXZpb3VzIHZhbHVlcy4KCiAgYHByZXZp
        b3VzVmFsdWVzYCBpcyBpbXBvcnRhbnQgRW1iZXIgY29hbGVzY2VzIGl0ZW0g
        cHJvcGVydHkgY2hhbmdlcyB2aWEKICBFbWJlci5ydW4ub25jZS4gVGhpcyBt
        ZWFucyB0aGF0IGJ5IHRoZSB0aW1lIHJlbW92ZWRJdGVtIGdldHMgY2FsbGVk
        LCBpdGVtIGhhcwogIHRoZSBuZXcgdmFsdWVzLCBidXQgeW91IG1heSBuZWVk
        IHRoZSBwcmV2aW91cyB2YWx1ZSAoZWcgZm9yIHNvcnRpbmcgJgogIGZpbHRl
        cmluZykuCgogIGBpbnN0YW5jZU1ldGFgIC0gQW4gb2JqZWN0IHRoYXQgY2Fu
        IGJlIHVzZWQgdG8gc3RvcmUgbWV0YQogIGluZm9ybWF0aW9uIG5lZWRlZCBm
        b3IgY2FsY3VsYXRpbmcgeW91ciBjb21wdXRlZC4gRm9yIGV4YW1wbGUgYQog
        IHVuaXF1ZSBjb21wdXRlZCBtaWdodCB1c2UgdGhpcyB0byBzdG9yZSB0aGUg
        bnVtYmVyIG9mIHRpbWVzIGEgZ2l2ZW4KICBlbGVtZW50IGlzIGZvdW5kIGlu
        IHRoZSBkZXBlbmRlbnQgYXJyYXkuCgogIFRoZSBgcmVtb3ZlZEl0ZW1gIGFu
        ZCBgYWRkZWRJdGVtYCBmdW5jdGlvbnMgc2hvdWxkIHJldHVybiB0aGUgYWNj
        dW11bGF0ZWQKICB2YWx1ZS4gSXQgaXMgYWNjZXB0YWJsZSB0byBub3QgcmV0
        dXJuIGFueXRoaW5nIChpZSByZXR1cm4gdW5kZWZpbmVkKQogIHRvIGludmFs
        aWRhdGUgdGhlIGNvbXB1dGF0aW9uLiBUaGlzIGlzIGdlbmVyYWxseSBub3Qg
        YSBnb29kIGlkZWEgZm9yCiAgYXJyYXlDb21wdXRlZCBidXQgaXQncyB1c2Vk
        IGluIGVnIG1heCBhbmQgbWluLgoKICBOb3RlIHRoYXQgb2JzZXJ2ZXJzIHdp
        bGwgYmUgZmlyZWQgaWYgZWl0aGVyIG9mIHRoZXNlIGZ1bmN0aW9ucyByZXR1
        cm4gYSB2YWx1ZQogIHRoYXQgZGlmZmVycyBmcm9tIHRoZSBhY2N1bXVsYXRl
        ZCB2YWx1ZS4gIFdoZW4gcmV0dXJuaW5nIGFuIG9iamVjdCB0aGF0CiAgbXV0
        YXRlcyBpbiByZXNwb25zZSB0byBhcnJheSBjaGFuZ2VzLCBmb3IgZXhhbXBs
        ZSBhbiBhcnJheSB0aGF0IG1hcHMKICBldmVyeXRoaW5nIGZyb20gc29tZSBv
        dGhlciBhcnJheSAoc2VlIGBFbWJlci5jb21wdXRlZC5tYXBgKSwgaXQgaXMg
        dXN1YWxseQogIGltcG9ydGFudCB0aGF0IHRoZSAqc2FtZSogYXJyYXkgYmUg
        cmV0dXJuZWQgdG8gYXZvaWQgYWNjaWRlbnRhbGx5IHRyaWdnZXJpbmcgb2Jz
        ZXJ2ZXJzLgoKICBFeGFtcGxlCgogIGBgYGphdmFzY3JpcHQKICBFbWJlci5j
        b21wdXRlZC5tYXggPSBmdW5jdGlvbiAoZGVwZW5kZW50S2V5KSB7CiAgICBy
        ZXR1cm4gRW1iZXIucmVkdWNlQ29tcHV0ZWQoZGVwZW5kZW50S2V5LCB7CiAg
        ICAgIGluaXRpYWxWYWx1ZTogLUluZmluaXR5LAoKICAgICAgYWRkZWRJdGVt
        OiBmdW5jdGlvbiAoYWNjdW11bGF0ZWRWYWx1ZSwgaXRlbSwgY2hhbmdlTWV0
        YSwgaW5zdGFuY2VNZXRhKSB7CiAgICAgICAgcmV0dXJuIE1hdGgubWF4KGFj
        Y3VtdWxhdGVkVmFsdWUsIGl0ZW0pOwogICAgICB9LAoKICAgICAgcmVtb3Zl
        ZEl0ZW06IGZ1bmN0aW9uIChhY2N1bXVsYXRlZFZhbHVlLCBpdGVtLCBjaGFu
        Z2VNZXRhLCBpbnN0YW5jZU1ldGEpIHsKICAgICAgICBpZiAoaXRlbSA8IGFj
        Y3VtdWxhdGVkVmFsdWUpIHsKICAgICAgICAgIHJldHVybiBhY2N1bXVsYXRl
        ZFZhbHVlOwogICAgICAgIH0KICAgICAgfQogICAgfSk7CiAgfTsKICBgYGAK
        CiAgRGVwZW5kZW50IGtleXMgbWF5IHJlZmVyIHRvIGBAdGhpc2AgdG8gb2Jz
        ZXJ2ZSBjaGFuZ2VzIHRvIHRoZSBvYmplY3QgaXRzZWxmLAogIHdoaWNoIG11
        c3QgYmUgYXJyYXktbGlrZSwgcmF0aGVyIHRoYW4gYSBwcm9wZXJ0eSBvZiB0
        aGUgb2JqZWN0LiAgVGhpcyBpcwogIG1vc3RseSB1c2VmdWwgZm9yIGFycmF5
        IHByb3hpZXMsIHRvIGVuc3VyZSBvYmplY3RzIGFyZSByZXRyaWV2ZWQgdmlh
        CiAgYG9iamVjdEF0Q29udGVudGAuICBUaGlzIGlzIGhvdyB5b3UgY291bGQg
        c29ydCBpdGVtcyBieSBwcm9wZXJ0aWVzIGRlZmluZWQgb24gYW4gaXRlbSBj
        b250cm9sbGVyLgoKICBFeGFtcGxlCgogIGBgYGphdmFzY3JpcHQKICBBcHAu
        UGVvcGxlQ29udHJvbGxlciA9IEVtYmVyLkFycmF5Q29udHJvbGxlci5leHRl
        bmQoewogICAgaXRlbUNvbnRyb2xsZXI6ICdwZXJzb24nLAoKICAgIHNvcnRl
        ZFBlb3BsZTogRW1iZXIuY29tcHV0ZWQuc29ydCgnQHRoaXMuQGVhY2gucmV2
        ZXJzZWROYW1lJywgZnVuY3Rpb24ocGVyc29uQSwgcGVyc29uQikgewogICAg
        ICAvLyBgcmV2ZXJzZWROYW1lYCBpc24ndCBkZWZpbmVkIG9uIFBlcnNvbiwg
        YnV0IHdlIGhhdmUgYWNjZXNzIHRvIGl0IHZpYQogICAgICAvLyB0aGUgaXRl
        bSBjb250cm9sbGVyIEFwcC5QZXJzb25Db250cm9sbGVyLiAgSWYgd2UnZCB1
        c2VkCiAgICAgIC8vIGBjb250ZW50LkBlYWNoLnJldmVyc2VkTmFtZWAgYWJv
        dmUsIHdlIHdvdWxkIGJlIGdldHRpbmcgdGhlIG9iamVjdHMKICAgICAgLy8g
        ZGlyZWN0bHkgYW5kIG5vdCBoYXZlIGFjY2VzcyB0byBgcmV2ZXJzZWROYW1l
        YC4KICAgICAgLy8KICAgICAgdmFyIHJldmVyc2VkTmFtZUEgPSBnZXQocGVy
        c29uQSwgJ3JldmVyc2VkTmFtZScpLAogICAgICAgICAgcmV2ZXJzZWROYW1l
        QiA9IGdldChwZXJzb25CLCAncmV2ZXJzZWROYW1lJyk7CgogICAgICByZXR1
        cm4gRW1iZXIuY29tcGFyZShyZXZlcnNlZE5hbWVBLCByZXZlcnNlZE5hbWVC
        KTsKICAgIH0pCiAgfSk7CgogIEFwcC5QZXJzb25Db250cm9sbGVyID0gRW1i
        ZXIuT2JqZWN0Q29udHJvbGxlci5leHRlbmQoewogICAgcmV2ZXJzZWROYW1l
        OiBmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiByZXZlcnNlKGdldCh0aGlz
        LCAnbmFtZScpKTsKICAgIH0ucHJvcGVydHkoJ25hbWUnKQogIH0pCiAgYGBg
        CgogIERlcGVuZGVudCBrZXlzIHdob3NlIHZhbHVlcyBhcmUgbm90IGFycmF5
        cyBhcmUgdHJlYXRlZCBhcyByZWd1bGFyCiAgZGVwZW5kZW5jaWVzOiB3aGVu
        IHRoZXkgY2hhbmdlLCB0aGUgY29tcHV0ZWQgcHJvcGVydHkgaXMgY29tcGxl
        dGVseQogIHJlY2FsY3VsYXRlZC4gIEl0IGlzIHNvbWV0aW1lcyB1c2VmdWwg
        dG8gaGF2ZSBkZXBlbmRlbnQgYXJyYXlzIHdpdGggc2ltaWxhcgogIHNlbWFu
        dGljcy4gIERlcGVuZGVudCBrZXlzIHdoaWNoIGVuZCBpbiBgLltdYCBkbyBu
        b3QgdXNlICJvbmUgYXQgYSB0aW1lIgogIHNlbWFudGljcy4gIFdoZW4gYW4g
        aXRlbSBpcyBhZGRlZCBvciByZW1vdmVkIGZyb20gc3VjaCBhIGRlcGVuZGVu
        Y3ksIHRoZQogIGNvbXB1dGVkIHByb3BlcnR5IGlzIGNvbXBsZXRlbHkgcmVj
        b21wdXRlZC4KCiAgRXhhbXBsZQoKICBgYGBqYXZhc2NyaXB0CiAgRW1iZXIu
        T2JqZWN0LmV4dGVuZCh7CiAgICAvLyBXaGVuIGBzdHJpbmdgIGlzIGNoYW5n
        ZWQsIGBjb21wdXRlZGAgaXMgY29tcGxldGVseSByZWNvbXB1dGVkLgogICAg
        c3RyaW5nOiAnYSBzdHJpbmcnLAoKICAgIC8vIFdoZW4gYW4gaXRlbSBpcyBh
        ZGRlZCB0byBgYXJyYXlgLCBgYWRkZWRJdGVtYCBpcyBjYWxsZWQuCiAgICBh
        cnJheTogW10sCgogICAgLy8gV2hlbiBhbiBpdGVtIGlzIGFkZGVkIHRvIGBh
        bm90aGVyQXJyYXlgLCBgY29tcHV0ZWRgIGlzIGNvbXBsZXRlbHkKICAgIC8v
        IHJlY29tcHV0ZWQuCiAgICBhbm90aGVyQXJyYXk6IFtdLAoKICAgIGNvbXB1
        dGVkOiBFbWJlci5yZWR1Y2VDb21wdXRlZCgnc3RyaW5nJywgJ2FycmF5Jywg
        J2Fub3RoZXJBcnJheS5bXScsIHsKICAgICAgYWRkZWRJdGVtOiBhZGRlZEl0
        ZW1DYWxsYmFjaywKICAgICAgcmVtb3ZlZEl0ZW06IHJlbW92ZWRJdGVtQ2Fs
        bGJhY2sKICAgIH0pCiAgfSk7CiAgYGBgCgogIEBtZXRob2QgcmVkdWNlQ29t
        cHV0ZWQKICBAZm9yIEVtYmVyCiAgQHBhcmFtIHtTdHJpbmd9IFtkZXBlbmRl
        bnRLZXlzKl0KICBAcGFyYW0ge09iamVjdH0gb3B0aW9ucwogIEByZXR1cm4g
        e0VtYmVyLkNvbXB1dGVkUHJvcGVydHl9CiovCkVtYmVyLnJlZHVjZUNvbXB1
        dGVkID0gZnVuY3Rpb24gKG9wdGlvbnMpIHsKICB2YXIgYXJnczsKCiAgaWYg
        KGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7CiAgICBhcmdzID0gYV9zbGljZS5j
        YWxsKGFyZ3VtZW50cywgMCwgLTEpOwogICAgb3B0aW9ucyA9IGFfc2xpY2Uu
        Y2FsbChhcmd1bWVudHMsIC0xKVswXTsKICB9CgogIGlmICh0eXBlb2Ygb3B0
        aW9ucyAhPT0gIm9iamVjdCIpIHsKICAgIHRocm93IG5ldyBFbWJlci5FcnJv
        cigiUmVkdWNlIENvbXB1dGVkIFByb3BlcnR5IGRlY2xhcmVkIHdpdGhvdXQg
        YW4gb3B0aW9ucyBoYXNoIik7CiAgfQoKICBpZiAoISgnaW5pdGlhbFZhbHVl
        JyBpbiBvcHRpb25zKSkgewogICAgdGhyb3cgbmV3IEVtYmVyLkVycm9yKCJS
        ZWR1Y2UgQ29tcHV0ZWQgUHJvcGVydHkgZGVjbGFyZWQgd2l0aG91dCBhbiBp
        bml0aWFsIHZhbHVlIik7CiAgfQoKICB2YXIgY3AgPSBuZXcgUmVkdWNlQ29t
        cHV0ZWRQcm9wZXJ0eShvcHRpb25zKTsKCiAgaWYgKGFyZ3MpIHsKICAgIGNw
        LnByb3BlcnR5LmFwcGx5KGNwLCBhcmdzKTsKICB9CgogIHJldHVybiBjcDsK
        fTsKCn0pKCk7CgoKCihmdW5jdGlvbigpIHsKdmFyIFJlZHVjZUNvbXB1dGVk
        UHJvcGVydHkgPSBFbWJlci5SZWR1Y2VDb21wdXRlZFByb3BlcnR5LAogICAg
        YV9zbGljZSA9IFtdLnNsaWNlLAogICAgb19jcmVhdGUgPSBFbWJlci5jcmVh
        dGUsCiAgICBmb3JFYWNoID0gRW1iZXIuRW51bWVyYWJsZVV0aWxzLmZvckVh
        Y2g7CgpmdW5jdGlvbiBBcnJheUNvbXB1dGVkUHJvcGVydHkoKSB7CiAgdmFy
        IGNwID0gdGhpczsKCiAgUmVkdWNlQ29tcHV0ZWRQcm9wZXJ0eS5hcHBseSh0
        aGlzLCBhcmd1bWVudHMpOwoKICB0aGlzLmZ1bmMgPSAoZnVuY3Rpb24ocmVk
        dWNlRnVuYykgewogICAgcmV0dXJuIGZ1bmN0aW9uIChwcm9wZXJ0eU5hbWUp
        IHsKICAgICAgaWYgKCFjcC5faGFzSW5zdGFuY2VNZXRhKHRoaXMsIHByb3Bl
        cnR5TmFtZSkpIHsKICAgICAgICAvLyBXaGVuIHdlIHJlY29tcHV0ZSBhbiBh
        cnJheSBjb21wdXRlZCBwcm9wZXJ0eSwgd2UgbmVlZCBhbHJlYWR5CiAgICAg
        ICAgLy8gcmV0cmlldmVkIGFycmF5cyB0byBiZSB1cGRhdGVkOyB3ZSBjYW4n
        dCBzaW1wbHkgZW1wdHkgdGhlIGNhY2hlIGFuZAogICAgICAgIC8vIGhvcGUg
        dGhlIGFycmF5IGlzIHJlLXJldHJpZXZlZC4KICAgICAgICBmb3JFYWNoKGNw
        Ll9kZXBlbmRlbnRLZXlzLCBmdW5jdGlvbihkZXBlbmRlbnRLZXkpIHsKICAg
        ICAgICAgIEVtYmVyLmFkZE9ic2VydmVyKHRoaXMsIGRlcGVuZGVudEtleSwg
        ZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIGNwLnJlY29tcHV0ZU9uY2UuY2Fs
        bCh0aGlzLCBwcm9wZXJ0eU5hbWUpOwogICAgICAgICAgfSk7CiAgICAgICAg
        fSwgdGhpcyk7CiAgICAgIH0KCiAgICAgIHJldHVybiByZWR1Y2VGdW5jLmFw
        cGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICB9OwogIH0pKHRoaXMuZnVuYyk7
        CgogIHJldHVybiB0aGlzOwp9CkVtYmVyLkFycmF5Q29tcHV0ZWRQcm9wZXJ0
        eSA9IEFycmF5Q29tcHV0ZWRQcm9wZXJ0eTsKQXJyYXlDb21wdXRlZFByb3Bl
        cnR5LnByb3RvdHlwZSA9IG9fY3JlYXRlKFJlZHVjZUNvbXB1dGVkUHJvcGVy
        dHkucHJvdG90eXBlKTsKQXJyYXlDb21wdXRlZFByb3BlcnR5LnByb3RvdHlw
        ZS5pbml0aWFsVmFsdWUgPSBmdW5jdGlvbiAoKSB7CiAgcmV0dXJuIEVtYmVy
        LkEoKTsKfTsKQXJyYXlDb21wdXRlZFByb3BlcnR5LnByb3RvdHlwZS5yZXNl
        dFZhbHVlID0gZnVuY3Rpb24gKGFycmF5KSB7CiAgYXJyYXkuY2xlYXIoKTsK
        ICByZXR1cm4gYXJyYXk7Cn07CgovLyBUaGlzIGlzIGEgc3RvcGdhcCB0byBr
        ZWVwIHRoZSByZWZlcmVuY2UgY291bnRzIGNvcnJlY3Qgd2l0aCBsYXp5IENQ
        cy4KQXJyYXlDb21wdXRlZFByb3BlcnR5LnByb3RvdHlwZS5kaWRDaGFuZ2Ug
        PSBmdW5jdGlvbiAob2JqLCBrZXlOYW1lKSB7CiAgcmV0dXJuOwp9OwoKLyoq
        CiAgQ3JlYXRlcyBhIGNvbXB1dGVkIHByb3BlcnR5IHdoaWNoIG9wZXJhdGVz
        IG9uIGRlcGVuZGVudCBhcnJheXMgYW5kCiAgaXMgdXBkYXRlZCB3aXRoICJv
        bmUgYXQgYSB0aW1lIiBzZW1hbnRpY3MuIFdoZW4gaXRlbXMgYXJlIGFkZGVk
        IG9yCiAgcmVtb3ZlZCBmcm9tIHRoZSBkZXBlbmRlbnQgYXJyYXkocykgYW4g
        YXJyYXkgY29tcHV0ZWQgb25seSBvcGVyYXRlcwogIG9uIHRoZSBjaGFuZ2Ug
        aW5zdGVhZCBvZiByZS1ldmFsdWF0aW5nIHRoZSBlbnRpcmUgYXJyYXkuIFRo
        aXMgc2hvdWxkCiAgcmV0dXJuIGFuIGFycmF5LCBpZiB5b3UnZCBsaWtlIHRv
        IHVzZSAib25lIGF0IGEgdGltZSIgc2VtYW50aWNzIGFuZAogIGNvbXB1dGUg
        c29tZSB2YWx1ZSBvdGhlciB0aGVuIGFuIGFycmF5IGxvb2sgYXQKICBgRW1i
        ZXIucmVkdWNlQ29tcHV0ZWRgLgoKICBJZiB0aGVyZSBhcmUgbW9yZSB0aGFu
        IG9uZSBhcmd1bWVudHMgdGhlIGZpcnN0IGFyZ3VtZW50cyBhcmUKICBjb25z
        aWRlcmVkIHRvIGJlIGRlcGVuZGVudCBwcm9wZXJ0eSBrZXlzLiBUaGUgbGFz
        dCBhcmd1bWVudCBpcwogIHJlcXVpcmVkIHRvIGJlIGFuIG9wdGlvbnMgb2Jq
        ZWN0LiBUaGUgb3B0aW9ucyBvYmplY3QgY2FuIGhhdmUgdGhlCiAgZm9sbG93
        aW5nIHRocmVlIHByb3BlcnRpZXMuCgogIGBpbml0aWFsaXplYCAtIEFuIG9w
        dGlvbmFsIGluaXRpYWxpemUgZnVuY3Rpb24uIFR5cGljYWxseSB0aGlzIHdp
        bGwgYmUgdXNlZAogIHRvIHNldCB1cCBzdGF0ZSBvbiB0aGUgaW5zdGFuY2VN
        ZXRhIG9iamVjdC4KCiAgYHJlbW92ZWRJdGVtYCAtIEEgZnVuY3Rpb24gdGhh
        dCBpcyBjYWxsZWQgZWFjaCB0aW1lIGFuIGVsZW1lbnQgaXMKICByZW1vdmVk
        IGZyb20gdGhlIGFycmF5LgoKICBgYWRkZWRJdGVtYCAtIEEgZnVuY3Rpb24g
        dGhhdCBpcyBjYWxsZWQgZWFjaCB0aW1lIGFuIGVsZW1lbnQgaXMKICBhZGRl
        ZCB0byB0aGUgYXJyYXkuCgoKICBUaGUgYGluaXRpYWxpemVgIGZ1bmN0aW9u
        IGhhcyB0aGUgZm9sbG93aW5nIHNpZ25hdHVyZToKCiAgYGBgamF2YXNjcmlw
        dAogICBmdW5jdGlvbiAoYXJyYXksIGNoYW5nZU1ldGEsIGluc3RhbmNlTWV0
        YSkKICBgYGAKCiAgYGFycmF5YCAtIFRoZSBpbml0aWFsIHZhbHVlIG9mIHRo
        ZSBhcnJheUNvbXB1dGVkLCBhbiBlbXB0eSBhcnJheS4KCiAgYGNoYW5nZU1l
        dGFgIC0gQW4gb2JqZWN0IHdoaWNoIGNvbnRhaW5zIG1ldGEgaW5mb3JtYXRp
        b24gYWJvdXQgdGhlCiAgY29tcHV0ZWQuIEl0IGNvbnRhaW5zIHRoZSBmb2xs
        b3dpbmcgcHJvcGVydGllczoKCiAgICAgLSBgcHJvcGVydHlgIHRoZSBjb21w
        dXRlZCBwcm9wZXJ0eQogICAgIC0gYHByb3BlcnR5TmFtZWAgdGhlIG5hbWUg
        b2YgdGhlIHByb3BlcnR5IG9uIHRoZSBvYmplY3QKCiAgYGluc3RhbmNlTWV0
        YWAgLSBBbiBvYmplY3QgdGhhdCBjYW4gYmUgdXNlZCB0byBzdG9yZSBtZXRh
        CiAgaW5mb3JtYXRpb24gbmVlZGVkIGZvciBjYWxjdWxhdGluZyB5b3VyIGNv
        bXB1dGVkLiBGb3IgZXhhbXBsZSBhCiAgdW5pcXVlIGNvbXB1dGVkIG1pZ2h0
        IHVzZSB0aGlzIHRvIHN0b3JlIHRoZSBudW1iZXIgb2YgdGltZXMgYSBnaXZl
        bgogIGVsZW1lbnQgaXMgZm91bmQgaW4gdGhlIGRlcGVuZGVudCBhcnJheS4K
        CgogIFRoZSBgcmVtb3ZlZEl0ZW1gIGFuZCBgYWRkZWRJdGVtYCBmdW5jdGlv
        bnMgYm90aCBoYXZlIHRoZSBmb2xsb3dpbmcgc2lnbmF0dXJlOgoKICBgYGBq
        YXZhc2NyaXB0CiAgZnVuY3Rpb24gKGFjY3VtdWxhdGVkVmFsdWUsIGl0ZW0s
        IGNoYW5nZU1ldGEsIGluc3RhbmNlTWV0YSkKICBgYGAKCiAgYGFjY3VtdWxh
        dGVkVmFsdWVgIC0gVGhlIHZhbHVlIHJldHVybmVkIGZyb20gdGhlIGxhc3Qg
        dGltZQogIGByZW1vdmVkSXRlbWAgb3IgYGFkZGVkSXRlbWAgd2FzIGNhbGxl
        ZCBvciBhbiBlbXB0eSBhcnJheS4KCiAgYGl0ZW1gIC0gdGhlIGVsZW1lbnQg
        YWRkZWQgb3IgcmVtb3ZlZCBmcm9tIHRoZSBhcnJheQoKICBgY2hhbmdlTWV0
        YWAgLSBBbiBvYmplY3Qgd2hpY2ggY29udGFpbnMgbWV0YSBpbmZvcm1hdGlv
        biBhYm91dCB0aGUKICBjaGFuZ2UuIEl0IGNvbnRhaW5zIHRoZSBmb2xsb3dp
        bmcgcHJvcGVydGllczoKCiAgICAtIGBwcm9wZXJ0eWAgdGhlIGNvbXB1dGVk
        IHByb3BlcnR5CiAgICAtIGBwcm9wZXJ0eU5hbWVgIHRoZSBuYW1lIG9mIHRo
        ZSBwcm9wZXJ0eSBvbiB0aGUgb2JqZWN0CiAgICAtIGBpbmRleGAgdGhlIGlu
        ZGV4IG9mIHRoZSBhZGRlZCBvciByZW1vdmVkIGl0ZW0KICAgIC0gYGl0ZW1g
        IHRoZSBhZGRlZCBvciByZW1vdmVkIGl0ZW06IHRoaXMgaXMgZXhhY3RseSB0
        aGUgc2FtZSBhcwogICAgICB0aGUgc2Vjb25kIGFyZwogICAgLSBgYXJyYXlD
        aGFuZ2VkYCB0aGUgYXJyYXkgdGhhdCB0cmlnZ2VyZWQgdGhlIGNoYW5nZS4g
        Q2FuIGJlCiAgICAgIHVzZWZ1bCB3aGVuIGRlcGVuZGluZyBvbiBtdWx0aXBs
        ZSBhcnJheXMuCgogIEZvciBwcm9wZXJ0eSBjaGFuZ2VzIHRyaWdnZXJlZCBv
        biBhbiBpdGVtIHByb3BlcnR5IGNoYW5nZSAod2hlbgogIGRlcEtleSBpcyBz
        b21ldGhpbmcgbGlrZSBgc29tZUFycmF5LkBlYWNoLnNvbWVQcm9wZXJ0eWAp
        LAogIGBjaGFuZ2VNZXRhYCB3aWxsIGFsc28gY29udGFpbiB0aGUgZm9sbG93
        aW5nIHByb3BlcnR5OgoKICAgIC0gYHByZXZpb3VzVmFsdWVzYCBhbiBvYmpl
        Y3Qgd2hvc2Uga2V5cyBhcmUgdGhlIHByb3BlcnRpZXMgdGhhdCBjaGFuZ2Vk
        IG9uCiAgICB0aGUgaXRlbSwgYW5kIHdob3NlIHZhbHVlcyBhcmUgdGhlIGl0
        ZW0ncyBwcmV2aW91cyB2YWx1ZXMuCgogIGBwcmV2aW91c1ZhbHVlc2AgaXMg
        aW1wb3J0YW50IEVtYmVyIGNvYWxlc2NlcyBpdGVtIHByb3BlcnR5IGNoYW5n
        ZXMgdmlhCiAgRW1iZXIucnVuLm9uY2UuIFRoaXMgbWVhbnMgdGhhdCBieSB0
        aGUgdGltZSByZW1vdmVkSXRlbSBnZXRzIGNhbGxlZCwgaXRlbSBoYXMKICB0
        aGUgbmV3IHZhbHVlcywgYnV0IHlvdSBtYXkgbmVlZCB0aGUgcHJldmlvdXMg
        dmFsdWUgKGVnIGZvciBzb3J0aW5nICYKICBmaWx0ZXJpbmcpLgoKICBgaW5z
        dGFuY2VNZXRhYCAtIEFuIG9iamVjdCB0aGF0IGNhbiBiZSB1c2VkIHRvIHN0
        b3JlIG1ldGEKICBpbmZvcm1hdGlvbiBuZWVkZWQgZm9yIGNhbGN1bGF0aW5n
        IHlvdXIgY29tcHV0ZWQuIEZvciBleGFtcGxlIGEKICB1bmlxdWUgY29tcHV0
        ZWQgbWlnaHQgdXNlIHRoaXMgdG8gc3RvcmUgdGhlIG51bWJlciBvZiB0aW1l
        cyBhIGdpdmVuCiAgZWxlbWVudCBpcyBmb3VuZCBpbiB0aGUgZGVwZW5kZW50
        IGFycmF5LgoKICBUaGUgYHJlbW92ZWRJdGVtYCBhbmQgYGFkZGVkSXRlbWAg
        ZnVuY3Rpb25zIHNob3VsZCByZXR1cm4gdGhlIGFjY3VtdWxhdGVkCiAgdmFs
        dWUuIEl0IGlzIGFjY2VwdGFibGUgdG8gbm90IHJldHVybiBhbnl0aGluZyAo
        aWUgcmV0dXJuIHVuZGVmaW5lZCkKICB0byBpbnZhbGlkYXRlIHRoZSBjb21w
        dXRhdGlvbi4gVGhpcyBpcyBnZW5lcmFsbHkgbm90IGEgZ29vZCBpZGVhIGZv
        cgogIGFycmF5Q29tcHV0ZWQgYnV0IGl0J3MgdXNlZCBpbiBlZyBtYXggYW5k
        IG1pbi4KCiAgRXhhbXBsZQoKICBgYGBqYXZhc2NyaXB0CiAgRW1iZXIuY29t
        cHV0ZWQubWFwID0gZnVuY3Rpb24oZGVwZW5kZW50S2V5LCBjYWxsYmFjaykg
        ewogICAgdmFyIG9wdGlvbnMgPSB7CiAgICAgIGFkZGVkSXRlbTogZnVuY3Rp
        b24oYXJyYXksIGl0ZW0sIGNoYW5nZU1ldGEsIGluc3RhbmNlTWV0YSkgewog
        ICAgICAgIHZhciBtYXBwZWQgPSBjYWxsYmFjayhpdGVtKTsKICAgICAgICBh
        cnJheS5pbnNlcnRBdChjaGFuZ2VNZXRhLmluZGV4LCBtYXBwZWQpOwogICAg
        ICAgIHJldHVybiBhcnJheTsKICAgICAgfSwKICAgICAgcmVtb3ZlZEl0ZW06
        IGZ1bmN0aW9uKGFycmF5LCBpdGVtLCBjaGFuZ2VNZXRhLCBpbnN0YW5jZU1l
        dGEpIHsKICAgICAgICBhcnJheS5yZW1vdmVBdChjaGFuZ2VNZXRhLmluZGV4
        LCAxKTsKICAgICAgICByZXR1cm4gYXJyYXk7CiAgICAgIH0KICAgIH07Cgog
        ICAgcmV0dXJuIEVtYmVyLmFycmF5Q29tcHV0ZWQoZGVwZW5kZW50S2V5LCBv
        cHRpb25zKTsKICB9OwogIGBgYAoKICBAbWV0aG9kIGFycmF5Q29tcHV0ZWQK
        ICBAZm9yIEVtYmVyCiAgQHBhcmFtIHtTdHJpbmd9IFtkZXBlbmRlbnRLZXlz
        Kl0KICBAcGFyYW0ge09iamVjdH0gb3B0aW9ucwogIEByZXR1cm4ge0VtYmVy
        LkNvbXB1dGVkUHJvcGVydHl9CiovCkVtYmVyLmFycmF5Q29tcHV0ZWQgPSBm
        dW5jdGlvbiAob3B0aW9ucykgewogIHZhciBhcmdzOwoKICBpZiAoYXJndW1l
        bnRzLmxlbmd0aCA+IDEpIHsKICAgIGFyZ3MgPSBhX3NsaWNlLmNhbGwoYXJn
        dW1lbnRzLCAwLCAtMSk7CiAgICBvcHRpb25zID0gYV9zbGljZS5jYWxsKGFy
        Z3VtZW50cywgLTEpWzBdOwogIH0KCiAgaWYgKHR5cGVvZiBvcHRpb25zICE9
        PSAib2JqZWN0IikgewogICAgdGhyb3cgbmV3IEVtYmVyLkVycm9yKCJBcnJh
        eSBDb21wdXRlZCBQcm9wZXJ0eSBkZWNsYXJlZCB3aXRob3V0IGFuIG9wdGlv
        bnMgaGFzaCIpOwogIH0KCiAgdmFyIGNwID0gbmV3IEFycmF5Q29tcHV0ZWRQ
        cm9wZXJ0eShvcHRpb25zKTsKCiAgaWYgKGFyZ3MpIHsKICAgIGNwLnByb3Bl
        cnR5LmFwcGx5KGNwLCBhcmdzKTsKICB9CgogIHJldHVybiBjcDsKfTsKCn0p
        KCk7CgoKCihmdW5jdGlvbigpIHsKLyoqCkBtb2R1bGUgZW1iZXIKQHN1Ym1v
        ZHVsZSBlbWJlci1ydW50aW1lCiovCgp2YXIgZ2V0ID0gRW1iZXIuZ2V0LAog
        ICAgc2V0ID0gRW1iZXIuc2V0LAogICAgZ3VpZEZvciA9IEVtYmVyLmd1aWRG
        b3IsCiAgICBtZXJnZSA9IEVtYmVyLm1lcmdlLAogICAgYV9zbGljZSA9IFtd
        LnNsaWNlLAogICAgZm9yRWFjaCA9IEVtYmVyLkVudW1lcmFibGVVdGlscy5m
        b3JFYWNoLAogICAgbWFwID0gRW1iZXIuRW51bWVyYWJsZVV0aWxzLm1hcCwK
        ICAgIFNlYXJjaFByb3h5OwoKLyoqCiBBIGNvbXB1dGVkIHByb3BlcnR5IHRo
        YXQgcmV0dXJucyB0aGUgc3VtIG9mIHRoZSB2YWx1ZQogaW4gdGhlIGRlcGVu
        ZGVudCBhcnJheS4KCiBAbWV0aG9kIGNvbXB1dGVkLnN1bQogQGZvciBFbWJl
        cgogQHBhcmFtIHtTdHJpbmd9IGRlcGVuZGVudEtleQogQHJldHVybiB7RW1i
        ZXIuQ29tcHV0ZWRQcm9wZXJ0eX0gY29tcHV0ZXMgdGhlIHN1bSBvZiBhbGwg
        dmFsdWVzIGluIHRoZSBkZXBlbmRlbnRLZXkncyBhcnJheQoqLwoKRW1iZXIu
        Y29tcHV0ZWQuc3VtID0gZnVuY3Rpb24oZGVwZW5kZW50S2V5KXsKICByZXR1
        cm4gRW1iZXIucmVkdWNlQ29tcHV0ZWQoZGVwZW5kZW50S2V5LCB7CiAgICBp
        bml0aWFsVmFsdWU6IDAsCgogICAgYWRkZWRJdGVtOiBmdW5jdGlvbihhY2N1
        bXVsYXRlZFZhbHVlLCBpdGVtLCBjaGFuZ2VNZXRhLCBpbnN0YW5jZU1ldGEp
        ewogICAgICByZXR1cm4gYWNjdW11bGF0ZWRWYWx1ZSArIGl0ZW07CiAgICB9
        LAoKICAgIHJlbW92ZWRJdGVtOiBmdW5jdGlvbihhY2N1bXVsYXRlZFZhbHVl
        LCBpdGVtLCBjaGFuZ2VNZXRhLCBpbnN0YW5jZU1ldGEpewogICAgICByZXR1
        cm4gYWNjdW11bGF0ZWRWYWx1ZSAtIGl0ZW07CiAgICB9CiAgfSk7Cn07Cgov
        KioKICBBIGNvbXB1dGVkIHByb3BlcnR5IHRoYXQgY2FsY3VsYXRlcyB0aGUg
        bWF4aW11bSB2YWx1ZSBpbiB0aGUKICBkZXBlbmRlbnQgYXJyYXkuIFRoaXMg
        d2lsbCByZXR1cm4gYC1JbmZpbml0eWAgd2hlbiB0aGUgZGVwZW5kZW50CiAg
        YXJyYXkgaXMgZW1wdHkuCgogIGBgYGphdmFzY3JpcHQKICBBcHAuUGVyc29u
        ID0gRW1iZXIuT2JqZWN0LmV4dGVuZCh7CiAgICBjaGlsZEFnZXM6IEVtYmVy
        LmNvbXB1dGVkLm1hcEJ5KCdjaGlsZHJlbicsICdhZ2UnKSwKICAgIG1heENo
        aWxkQWdlOiBFbWJlci5jb21wdXRlZC5tYXgoJ2NoaWxkQWdlcycpCiAgfSk7
        CgogIHZhciBsb3JkQnlyb24gPSBBcHAuUGVyc29uLmNyZWF0ZSh7Y2hpbGRy
        ZW46IFtdfSk7CiAgbG9yZEJ5cm9uLmdldCgnbWF4Q2hpbGRBZ2UnKTsgLy8g
        LUluZmluaXR5CiAgbG9yZEJ5cm9uLmdldCgnY2hpbGRyZW4nKS5wdXNoT2Jq
        ZWN0KHsKICAgIG5hbWU6ICdBdWd1c3RhIEFkYSBCeXJvbicsIGFnZTogNwog
        IH0pOwogIGxvcmRCeXJvbi5nZXQoJ21heENoaWxkQWdlJyk7IC8vIDcKICBs
        b3JkQnlyb24uZ2V0KCdjaGlsZHJlbicpLnB1c2hPYmplY3RzKFt7CiAgICBu
        YW1lOiAnQWxsZWdyYSBCeXJvbicsCiAgICBhZ2U6IDUKICB9LCB7CiAgICBu
        YW1lOiAnRWxpemFiZXRoIE1lZG9yYSBMZWlnaCcsCiAgICBhZ2U6IDgKICB9
        XSk7CiAgbG9yZEJ5cm9uLmdldCgnbWF4Q2hpbGRBZ2UnKTsgLy8gOAogIGBg
        YAoKICBAbWV0aG9kIGNvbXB1dGVkLm1heAogIEBmb3IgRW1iZXIKICBAcGFy
        YW0ge1N0cmluZ30gZGVwZW5kZW50S2V5CiAgQHJldHVybiB7RW1iZXIuQ29t
        cHV0ZWRQcm9wZXJ0eX0gY29tcHV0ZXMgdGhlIGxhcmdlc3QgdmFsdWUgaW4g
        dGhlIGRlcGVuZGVudEtleSdzIGFycmF5CiovCkVtYmVyLmNvbXB1dGVkLm1h
        eCA9IGZ1bmN0aW9uIChkZXBlbmRlbnRLZXkpIHsKICByZXR1cm4gRW1iZXIu
        cmVkdWNlQ29tcHV0ZWQoZGVwZW5kZW50S2V5LCB7CiAgICBpbml0aWFsVmFs
        dWU6IC1JbmZpbml0eSwKCiAgICBhZGRlZEl0ZW06IGZ1bmN0aW9uIChhY2N1
        bXVsYXRlZFZhbHVlLCBpdGVtLCBjaGFuZ2VNZXRhLCBpbnN0YW5jZU1ldGEp
        IHsKICAgICAgcmV0dXJuIE1hdGgubWF4KGFjY3VtdWxhdGVkVmFsdWUsIGl0
        ZW0pOwogICAgfSwKCiAgICByZW1vdmVkSXRlbTogZnVuY3Rpb24gKGFjY3Vt
        dWxhdGVkVmFsdWUsIGl0ZW0sIGNoYW5nZU1ldGEsIGluc3RhbmNlTWV0YSkg
        ewogICAgICBpZiAoaXRlbSA8IGFjY3VtdWxhdGVkVmFsdWUpIHsKICAgICAg
        ICByZXR1cm4gYWNjdW11bGF0ZWRWYWx1ZTsKICAgICAgfQogICAgfQogIH0p
        Owp9OwoKLyoqCiAgQSBjb21wdXRlZCBwcm9wZXJ0eSB0aGF0IGNhbGN1bGF0
        ZXMgdGhlIG1pbmltdW0gdmFsdWUgaW4gdGhlCiAgZGVwZW5kZW50IGFycmF5
        LiBUaGlzIHdpbGwgcmV0dXJuIGBJbmZpbml0eWAgd2hlbiB0aGUgZGVwZW5k
        ZW50CiAgYXJyYXkgaXMgZW1wdHkuCgogIGBgYGphdmFzY3JpcHQKICBBcHAu
        UGVyc29uID0gRW1iZXIuT2JqZWN0LmV4dGVuZCh7CiAgICBjaGlsZEFnZXM6
        IEVtYmVyLmNvbXB1dGVkLm1hcEJ5KCdjaGlsZHJlbicsICdhZ2UnKSwKICAg
        IG1pbkNoaWxkQWdlOiBFbWJlci5jb21wdXRlZC5taW4oJ2NoaWxkQWdlcycp
        CiAgfSk7CgogIHZhciBsb3JkQnlyb24gPSBBcHAuUGVyc29uLmNyZWF0ZSh7
        Y2hpbGRyZW46IFtdfSk7CiAgbG9yZEJ5cm9uLmdldCgnbWluQ2hpbGRBZ2Un
        KTsgLy8gSW5maW5pdHkKICBsb3JkQnlyb24uZ2V0KCdjaGlsZHJlbicpLnB1
        c2hPYmplY3QoewogICAgbmFtZTogJ0F1Z3VzdGEgQWRhIEJ5cm9uJywgYWdl
        OiA3CiAgfSk7CiAgbG9yZEJ5cm9uLmdldCgnbWluQ2hpbGRBZ2UnKTsgLy8g
        NwogIGxvcmRCeXJvbi5nZXQoJ2NoaWxkcmVuJykucHVzaE9iamVjdHMoW3sK
        ICAgIG5hbWU6ICdBbGxlZ3JhIEJ5cm9uJywKICAgIGFnZTogNQogIH0sIHsK
        ICAgIG5hbWU6ICdFbGl6YWJldGggTWVkb3JhIExlaWdoJywKICAgIGFnZTog
        OAogIH1dKTsKICBsb3JkQnlyb24uZ2V0KCdtaW5DaGlsZEFnZScpOyAvLyA1
        CiAgYGBgCgogIEBtZXRob2QgY29tcHV0ZWQubWluCiAgQGZvciBFbWJlcgog
        IEBwYXJhbSB7U3RyaW5nfSBkZXBlbmRlbnRLZXkKICBAcmV0dXJuIHtFbWJl
        ci5Db21wdXRlZFByb3BlcnR5fSBjb21wdXRlcyB0aGUgc21hbGxlc3QgdmFs
        dWUgaW4gdGhlIGRlcGVuZGVudEtleSdzIGFycmF5CiovCkVtYmVyLmNvbXB1
        dGVkLm1pbiA9IGZ1bmN0aW9uIChkZXBlbmRlbnRLZXkpIHsKICByZXR1cm4g
        RW1iZXIucmVkdWNlQ29tcHV0ZWQoZGVwZW5kZW50S2V5LCB7CiAgICBpbml0
        aWFsVmFsdWU6IEluZmluaXR5LAoKICAgIGFkZGVkSXRlbTogZnVuY3Rpb24g
        KGFjY3VtdWxhdGVkVmFsdWUsIGl0ZW0sIGNoYW5nZU1ldGEsIGluc3RhbmNl
        TWV0YSkgewogICAgICByZXR1cm4gTWF0aC5taW4oYWNjdW11bGF0ZWRWYWx1
        ZSwgaXRlbSk7CiAgICB9LAoKICAgIHJlbW92ZWRJdGVtOiBmdW5jdGlvbiAo
        YWNjdW11bGF0ZWRWYWx1ZSwgaXRlbSwgY2hhbmdlTWV0YSwgaW5zdGFuY2VN
        ZXRhKSB7CiAgICAgIGlmIChpdGVtID4gYWNjdW11bGF0ZWRWYWx1ZSkgewog
        ICAgICAgIHJldHVybiBhY2N1bXVsYXRlZFZhbHVlOwogICAgICB9CiAgICB9
        CiAgfSk7Cn07CgovKioKICBSZXR1cm5zIGFuIGFycmF5IG1hcHBlZCB2aWEg
        dGhlIGNhbGxiYWNrCgogIFRoZSBjYWxsYmFjayBtZXRob2QgeW91IHByb3Zp
        ZGUgc2hvdWxkIGhhdmUgdGhlIGZvbGxvd2luZyBzaWduYXR1cmUuCiAgYGl0
        ZW1gIGlzIHRoZSBjdXJyZW50IGl0ZW0gaW4gdGhlIGl0ZXJhdGlvbi4KCiAg
        YGBgamF2YXNjcmlwdAogIGZ1bmN0aW9uKGl0ZW0pOwogIGBgYAoKICBFeGFt
        cGxlCgogIGBgYGphdmFzY3JpcHQKICBBcHAuSGFtc3RlciA9IEVtYmVyLk9i
        amVjdC5leHRlbmQoewogICAgZXhjaXRpbmdDaG9yZXM6IEVtYmVyLmNvbXB1
        dGVkLm1hcCgnY2hvcmVzJywgZnVuY3Rpb24oY2hvcmUpIHsKICAgICAgcmV0
        dXJuIGNob3JlLnRvVXBwZXJDYXNlKCkgKyAnISc7CiAgICB9KQogIH0pOwoK
        ICB2YXIgaGFtc3RlciA9IEFwcC5IYW1zdGVyLmNyZWF0ZSh7CiAgICBjaG9y
        ZXM6IFsnY2xlYW4nLCAnd3JpdGUgbW9yZSB1bml0IHRlc3RzJ10KICB9KTsK
        ICBoYW1zdGVyLmdldCgnZXhjaXRpbmdDaG9yZXMnKTsgLy8gWydDTEVBTiEn
        LCAnV1JJVEUgTU9SRSBVTklUIFRFU1RTISddCiAgYGBgCgogIEBtZXRob2Qg
        Y29tcHV0ZWQubWFwCiAgQGZvciBFbWJlcgogIEBwYXJhbSB7U3RyaW5nfSBk
        ZXBlbmRlbnRLZXkKICBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjawogIEBy
        ZXR1cm4ge0VtYmVyLkNvbXB1dGVkUHJvcGVydHl9IGFuIGFycmF5IG1hcHBl
        ZCB2aWEgdGhlIGNhbGxiYWNrCiovCkVtYmVyLmNvbXB1dGVkLm1hcCA9IGZ1
        bmN0aW9uKGRlcGVuZGVudEtleSwgY2FsbGJhY2spIHsKICB2YXIgb3B0aW9u
        cyA9IHsKICAgIGFkZGVkSXRlbTogZnVuY3Rpb24oYXJyYXksIGl0ZW0sIGNo
        YW5nZU1ldGEsIGluc3RhbmNlTWV0YSkgewogICAgICB2YXIgbWFwcGVkID0g
        Y2FsbGJhY2suY2FsbCh0aGlzLCBpdGVtKTsKICAgICAgYXJyYXkuaW5zZXJ0
        QXQoY2hhbmdlTWV0YS5pbmRleCwgbWFwcGVkKTsKICAgICAgcmV0dXJuIGFy
        cmF5OwogICAgfSwKICAgIHJlbW92ZWRJdGVtOiBmdW5jdGlvbihhcnJheSwg
        aXRlbSwgY2hhbmdlTWV0YSwgaW5zdGFuY2VNZXRhKSB7CiAgICAgIGFycmF5
        LnJlbW92ZUF0KGNoYW5nZU1ldGEuaW5kZXgsIDEpOwogICAgICByZXR1cm4g
        YXJyYXk7CiAgICB9CiAgfTsKCiAgcmV0dXJuIEVtYmVyLmFycmF5Q29tcHV0
        ZWQoZGVwZW5kZW50S2V5LCBvcHRpb25zKTsKfTsKCi8qKgogIFJldHVybnMg
        YW4gYXJyYXkgbWFwcGVkIHRvIHRoZSBzcGVjaWZpZWQga2V5LgoKICBgYGBq
        YXZhc2NyaXB0CiAgQXBwLlBlcnNvbiA9IEVtYmVyLk9iamVjdC5leHRlbmQo
        ewogICAgY2hpbGRBZ2VzOiBFbWJlci5jb21wdXRlZC5tYXBCeSgnY2hpbGRy
        ZW4nLCAnYWdlJykKICB9KTsKCiAgdmFyIGxvcmRCeXJvbiA9IEFwcC5QZXJz
        b24uY3JlYXRlKHtjaGlsZHJlbjogW119KTsKICBsb3JkQnlyb24uZ2V0KCdj
        aGlsZEFnZXMnKTsgLy8gW10KICBsb3JkQnlyb24uZ2V0KCdjaGlsZHJlbicp
        LnB1c2hPYmplY3Qoe25hbWU6ICdBdWd1c3RhIEFkYSBCeXJvbicsIGFnZTog
        N30pOwogIGxvcmRCeXJvbi5nZXQoJ2NoaWxkQWdlcycpOyAvLyBbN10KICBs
        b3JkQnlyb24uZ2V0KCdjaGlsZHJlbicpLnB1c2hPYmplY3RzKFt7CiAgICBu
        YW1lOiAnQWxsZWdyYSBCeXJvbicsCiAgICBhZ2U6IDUKICB9LCB7CiAgICBu
        YW1lOiAnRWxpemFiZXRoIE1lZG9yYSBMZWlnaCcsCiAgICBhZ2U6IDgKICB9
        XSk7CiAgbG9yZEJ5cm9uLmdldCgnY2hpbGRBZ2VzJyk7IC8vIFs3LCA1LCA4
        XQogIGBgYAoKICBAbWV0aG9kIGNvbXB1dGVkLm1hcEJ5CiAgQGZvciBFbWJl
        cgogIEBwYXJhbSB7U3RyaW5nfSBkZXBlbmRlbnRLZXkKICBAcGFyYW0ge1N0
        cmluZ30gcHJvcGVydHlLZXkKICBAcmV0dXJuIHtFbWJlci5Db21wdXRlZFBy
        b3BlcnR5fSBhbiBhcnJheSBtYXBwZWQgdG8gdGhlIHNwZWNpZmllZCBrZXkK
        Ki8KRW1iZXIuY29tcHV0ZWQubWFwQnkgPSBmdW5jdGlvbihkZXBlbmRlbnRL
        ZXksIHByb3BlcnR5S2V5KSB7CiAgdmFyIGNhbGxiYWNrID0gZnVuY3Rpb24o
        aXRlbSkgeyByZXR1cm4gZ2V0KGl0ZW0sIHByb3BlcnR5S2V5KTsgfTsKICBy
        ZXR1cm4gRW1iZXIuY29tcHV0ZWQubWFwKGRlcGVuZGVudEtleSArICcuQGVh
        Y2guJyArIHByb3BlcnR5S2V5LCBjYWxsYmFjayk7Cn07CgovKioKICBAbWV0
        aG9kIGNvbXB1dGVkLm1hcFByb3BlcnR5CiAgQGZvciBFbWJlcgogIEBkZXBy
        ZWNhdGVkIFVzZSBgRW1iZXIuY29tcHV0ZWQubWFwQnlgIGluc3RlYWQKICBA
        cGFyYW0gZGVwZW5kZW50S2V5CiAgQHBhcmFtIHByb3BlcnR5S2V5CiovCkVt
        YmVyLmNvbXB1dGVkLm1hcFByb3BlcnR5ID0gRW1iZXIuY29tcHV0ZWQubWFw
        Qnk7CgovKioKICBGaWx0ZXJzIHRoZSBhcnJheSBieSB0aGUgY2FsbGJhY2su
        CgogIFRoZSBjYWxsYmFjayBtZXRob2QgeW91IHByb3ZpZGUgc2hvdWxkIGhh
        dmUgdGhlIGZvbGxvd2luZyBzaWduYXR1cmUuCiAgYGl0ZW1gIGlzIHRoZSBj
        dXJyZW50IGl0ZW0gaW4gdGhlIGl0ZXJhdGlvbi4KCiAgYGBgamF2YXNjcmlw
        dAogIGZ1bmN0aW9uKGl0ZW0pOwogIGBgYAoKICBgYGBqYXZhc2NyaXB0CiAg
        QXBwLkhhbXN0ZXIgPSBFbWJlci5PYmplY3QuZXh0ZW5kKHsKICAgIHJlbWFp
        bmluZ0Nob3JlczogRW1iZXIuY29tcHV0ZWQuZmlsdGVyKCdjaG9yZXMnLCBm
        dW5jdGlvbihjaG9yZSkgewogICAgICByZXR1cm4gIWNob3JlLmRvbmU7CiAg
        ICB9KQogIH0pOwoKICB2YXIgaGFtc3RlciA9IEFwcC5IYW1zdGVyLmNyZWF0
        ZSh7Y2hvcmVzOiBbCiAgICB7bmFtZTogJ2Nvb2snLCBkb25lOiB0cnVlfSwK
        ICAgIHtuYW1lOiAnY2xlYW4nLCBkb25lOiB0cnVlfSwKICAgIHtuYW1lOiAn
        d3JpdGUgbW9yZSB1bml0IHRlc3RzJywgZG9uZTogZmFsc2V9CiAgXX0pOwog
        IGhhbXN0ZXIuZ2V0KCdyZW1haW5pbmdDaG9yZXMnKTsgLy8gW3tuYW1lOiAn
        d3JpdGUgbW9yZSB1bml0IHRlc3RzJywgZG9uZTogZmFsc2V9XQogIGBgYAoK
        ICBAbWV0aG9kIGNvbXB1dGVkLmZpbHRlcgogIEBmb3IgRW1iZXIKICBAcGFy
        YW0ge1N0cmluZ30gZGVwZW5kZW50S2V5CiAgQHBhcmFtIHtGdW5jdGlvbn0g
        Y2FsbGJhY2sKICBAcmV0dXJuIHtFbWJlci5Db21wdXRlZFByb3BlcnR5fSB0
        aGUgZmlsdGVyZWQgYXJyYXkKKi8KRW1iZXIuY29tcHV0ZWQuZmlsdGVyID0g
        ZnVuY3Rpb24oZGVwZW5kZW50S2V5LCBjYWxsYmFjaykgewogIHZhciBvcHRp
        b25zID0gewogICAgaW5pdGlhbGl6ZTogZnVuY3Rpb24gKGFycmF5LCBjaGFu
        Z2VNZXRhLCBpbnN0YW5jZU1ldGEpIHsKICAgICAgaW5zdGFuY2VNZXRhLmZp
        bHRlcmVkQXJyYXlJbmRleGVzID0gbmV3IEVtYmVyLlN1YkFycmF5KCk7CiAg
        ICB9LAoKICAgIGFkZGVkSXRlbTogZnVuY3Rpb24oYXJyYXksIGl0ZW0sIGNo
        YW5nZU1ldGEsIGluc3RhbmNlTWV0YSkgewogICAgICB2YXIgbWF0Y2ggPSAh
        IWNhbGxiYWNrLmNhbGwodGhpcywgaXRlbSksCiAgICAgICAgICBmaWx0ZXJJ
        bmRleCA9IGluc3RhbmNlTWV0YS5maWx0ZXJlZEFycmF5SW5kZXhlcy5hZGRJ
        dGVtKGNoYW5nZU1ldGEuaW5kZXgsIG1hdGNoKTsKCiAgICAgIGlmIChtYXRj
        aCkgewogICAgICAgIGFycmF5Lmluc2VydEF0KGZpbHRlckluZGV4LCBpdGVt
        KTsKICAgICAgfQoKICAgICAgcmV0dXJuIGFycmF5OwogICAgfSwKCiAgICBy
        ZW1vdmVkSXRlbTogZnVuY3Rpb24oYXJyYXksIGl0ZW0sIGNoYW5nZU1ldGEs
        IGluc3RhbmNlTWV0YSkgewogICAgICB2YXIgZmlsdGVySW5kZXggPSBpbnN0
        YW5jZU1ldGEuZmlsdGVyZWRBcnJheUluZGV4ZXMucmVtb3ZlSXRlbShjaGFu
        Z2VNZXRhLmluZGV4KTsKCiAgICAgIGlmIChmaWx0ZXJJbmRleCA+IC0xKSB7
        CiAgICAgICAgYXJyYXkucmVtb3ZlQXQoZmlsdGVySW5kZXgpOwogICAgICB9
        CgogICAgICByZXR1cm4gYXJyYXk7CiAgICB9CiAgfTsKCiAgcmV0dXJuIEVt
        YmVyLmFycmF5Q29tcHV0ZWQoZGVwZW5kZW50S2V5LCBvcHRpb25zKTsKfTsK
        Ci8qKgogIEZpbHRlcnMgdGhlIGFycmF5IGJ5IHRoZSBwcm9wZXJ0eSBhbmQg
        dmFsdWUKCiAgYGBgamF2YXNjcmlwdAogIEFwcC5IYW1zdGVyID0gRW1iZXIu
        T2JqZWN0LmV4dGVuZCh7CiAgICByZW1haW5pbmdDaG9yZXM6IEVtYmVyLmNv
        bXB1dGVkLmZpbHRlckJ5KCdjaG9yZXMnLCAnZG9uZScsIGZhbHNlKQogIH0p
        OwoKICB2YXIgaGFtc3RlciA9IEFwcC5IYW1zdGVyLmNyZWF0ZSh7Y2hvcmVz
        OiBbCiAgICB7bmFtZTogJ2Nvb2snLCBkb25lOiB0cnVlfSwKICAgIHtuYW1l
        OiAnY2xlYW4nLCBkb25lOiB0cnVlfSwKICAgIHtuYW1lOiAnd3JpdGUgbW9y
        ZSB1bml0IHRlc3RzJywgZG9uZTogZmFsc2V9CiAgXX0pOwogIGhhbXN0ZXIu
        Z2V0KCdyZW1haW5pbmdDaG9yZXMnKTsgLy8gW3tuYW1lOiAnd3JpdGUgbW9y
        ZSB1bml0IHRlc3RzJywgZG9uZTogZmFsc2V9XQogIGBgYAoKICBAbWV0aG9k
        IGNvbXB1dGVkLmZpbHRlckJ5CiAgQGZvciBFbWJlcgogIEBwYXJhbSB7U3Ry
        aW5nfSBkZXBlbmRlbnRLZXkKICBAcGFyYW0ge1N0cmluZ30gcHJvcGVydHlL
        ZXkKICBAcGFyYW0ge1N0cmluZ30gdmFsdWUKICBAcmV0dXJuIHtFbWJlci5D
        b21wdXRlZFByb3BlcnR5fSB0aGUgZmlsdGVyZWQgYXJyYXkKKi8KRW1iZXIu
        Y29tcHV0ZWQuZmlsdGVyQnkgPSBmdW5jdGlvbihkZXBlbmRlbnRLZXksIHBy
        b3BlcnR5S2V5LCB2YWx1ZSkgewogIHZhciBjYWxsYmFjazsKCiAgaWYgKGFy
        Z3VtZW50cy5sZW5ndGggPT09IDIpIHsKICAgIGNhbGxiYWNrID0gZnVuY3Rp
        b24oaXRlbSkgewogICAgICByZXR1cm4gZ2V0KGl0ZW0sIHByb3BlcnR5S2V5
        KTsKICAgIH07CiAgfSBlbHNlIHsKICAgIGNhbGxiYWNrID0gZnVuY3Rpb24o
        aXRlbSkgewogICAgICByZXR1cm4gZ2V0KGl0ZW0sIHByb3BlcnR5S2V5KSA9
        PT0gdmFsdWU7CiAgICB9OwogIH0KCiAgcmV0dXJuIEVtYmVyLmNvbXB1dGVk
        LmZpbHRlcihkZXBlbmRlbnRLZXkgKyAnLkBlYWNoLicgKyBwcm9wZXJ0eUtl
        eSwgY2FsbGJhY2spOwp9OwoKLyoqCiAgQG1ldGhvZCBjb21wdXRlZC5maWx0
        ZXJQcm9wZXJ0eQogIEBmb3IgRW1iZXIKICBAcGFyYW0gZGVwZW5kZW50S2V5
        CiAgQHBhcmFtIHByb3BlcnR5S2V5CiAgQHBhcmFtIHZhbHVlCiAgQGRlcHJl
        Y2F0ZWQgVXNlIGBFbWJlci5jb21wdXRlZC5maWx0ZXJCeWAgaW5zdGVhZAoq
        LwpFbWJlci5jb21wdXRlZC5maWx0ZXJQcm9wZXJ0eSA9IEVtYmVyLmNvbXB1
        dGVkLmZpbHRlckJ5OwoKLyoqCiAgQSBjb21wdXRlZCBwcm9wZXJ0eSB3aGlj
        aCByZXR1cm5zIGEgbmV3IGFycmF5IHdpdGggYWxsIHRoZSB1bmlxdWUKICBl
        bGVtZW50cyBmcm9tIG9uZSBvciBtb3JlIGRlcGVuZGVudCBhcnJheXMuCgog
        IEV4YW1wbGUKCiAgYGBgamF2YXNjcmlwdAogIEFwcC5IYW1zdGVyID0gRW1i
        ZXIuT2JqZWN0LmV4dGVuZCh7CiAgICB1bmlxdWVGcnVpdHM6IEVtYmVyLmNv
        bXB1dGVkLnVuaXEoJ2ZydWl0cycpCiAgfSk7CgogIHZhciBoYW1zdGVyID0g
        QXBwLkhhbXN0ZXIuY3JlYXRlKHtmcnVpdHM6IFsKICAgICdiYW5hbmEnLAog
        ICAgJ2dyYXBlJywKICAgICdrYWxlJywKICAgICdiYW5hbmEnCiAgXX0pOwog
        IGhhbXN0ZXIuZ2V0KCd1bmlxdWVGcnVpdHMnKTsgLy8gWydiYW5hbmEnLCAn
        Z3JhcGUnLCAna2FsZSddCiAgYGBgCgogIEBtZXRob2QgY29tcHV0ZWQudW5p
        cQogIEBmb3IgRW1iZXIKICBAcGFyYW0ge1N0cmluZ30gcHJvcGVydHlLZXkq
        CiAgQHJldHVybiB7RW1iZXIuQ29tcHV0ZWRQcm9wZXJ0eX0gY29tcHV0ZXMg
        YSBuZXcgYXJyYXkgd2l0aCBhbGwgdGhlCiAgdW5pcXVlIGVsZW1lbnRzIGZy
        b20gdGhlIGRlcGVuZGVudCBhcnJheQoqLwpFbWJlci5jb21wdXRlZC51bmlx
        ID0gZnVuY3Rpb24oKSB7CiAgdmFyIGFyZ3MgPSBhX3NsaWNlLmNhbGwoYXJn
        dW1lbnRzKTsKICBhcmdzLnB1c2goewogICAgaW5pdGlhbGl6ZTogZnVuY3Rp
        b24oYXJyYXksIGNoYW5nZU1ldGEsIGluc3RhbmNlTWV0YSkgewogICAgICBp
        bnN0YW5jZU1ldGEuaXRlbUNvdW50cyA9IHt9OwogICAgfSwKCiAgICBhZGRl
        ZEl0ZW06IGZ1bmN0aW9uKGFycmF5LCBpdGVtLCBjaGFuZ2VNZXRhLCBpbnN0
        YW5jZU1ldGEpIHsKICAgICAgdmFyIGd1aWQgPSBndWlkRm9yKGl0ZW0pOwoK
        ICAgICAgaWYgKCFpbnN0YW5jZU1ldGEuaXRlbUNvdW50c1tndWlkXSkgewog
        ICAgICAgIGluc3RhbmNlTWV0YS5pdGVtQ291bnRzW2d1aWRdID0gMTsKICAg
        ICAgfSBlbHNlIHsKICAgICAgICArK2luc3RhbmNlTWV0YS5pdGVtQ291bnRz
        W2d1aWRdOwogICAgICB9CiAgICAgIGFycmF5LmFkZE9iamVjdChpdGVtKTsK
        ICAgICAgcmV0dXJuIGFycmF5OwogICAgfSwKICAgIHJlbW92ZWRJdGVtOiBm
        dW5jdGlvbihhcnJheSwgaXRlbSwgXywgaW5zdGFuY2VNZXRhKSB7CiAgICAg
        IHZhciBndWlkID0gZ3VpZEZvcihpdGVtKSwKICAgICAgICAgIGl0ZW1Db3Vu
        dHMgPSBpbnN0YW5jZU1ldGEuaXRlbUNvdW50czsKCiAgICAgIGlmICgtLWl0
        ZW1Db3VudHNbZ3VpZF0gPT09IDApIHsKICAgICAgICBhcnJheS5yZW1vdmVP
        YmplY3QoaXRlbSk7CiAgICAgIH0KICAgICAgcmV0dXJuIGFycmF5OwogICAg
        fQogIH0pOwogIHJldHVybiBFbWJlci5hcnJheUNvbXB1dGVkLmFwcGx5KG51
        bGwsIGFyZ3MpOwp9OwoKLyoqCiAgQWxpYXMgZm9yIFtFbWJlci5jb21wdXRl
        ZC51bmlxXSgvYXBpLyNtZXRob2RfY29tcHV0ZWRfdW5pcSkuCgogIEBtZXRo
        b2QgY29tcHV0ZWQudW5pb24KICBAZm9yIEVtYmVyCiAgQHBhcmFtIHtTdHJp
        bmd9IHByb3BlcnR5S2V5KgogIEByZXR1cm4ge0VtYmVyLkNvbXB1dGVkUHJv
        cGVydHl9IGNvbXB1dGVzIGEgbmV3IGFycmF5IHdpdGggYWxsIHRoZQogIHVu
        aXF1ZSBlbGVtZW50cyBmcm9tIHRoZSBkZXBlbmRlbnQgYXJyYXkKKi8KRW1i
        ZXIuY29tcHV0ZWQudW5pb24gPSBFbWJlci5jb21wdXRlZC51bmlxOwoKLyoq
        CiAgQSBjb21wdXRlZCBwcm9wZXJ0eSB3aGljaCByZXR1cm5zIGEgbmV3IGFy
        cmF5IHdpdGggYWxsIHRoZSBkdXBsaWNhdGVkCiAgZWxlbWVudHMgZnJvbSB0
        d28gb3IgbW9yZSBkZXBlbmRlbnQgYXJyYXlzLgoKICBFeGFtcGxlCgogIGBg
        YGphdmFzY3JpcHQKICB2YXIgb2JqID0gRW1iZXIuT2JqZWN0LmNyZWF0ZVdp
        dGhNaXhpbnMoewogICAgYWRhRnJpZW5kczogWydDaGFybGVzIEJhYmJhZ2Un
        LCAnSm9obiBIb2Job3VzZScsICdXaWxsaWFtIEtpbmcnLCAnTWFyeSBTb21l
        cnZpbGxlJ10sCiAgICBjaGFybGVzRnJpZW5kczogWydXaWxsaWFtIEtpbmcn
        LCAnTWFyeSBTb21lcnZpbGxlJywgJ0FkYSBMb3ZlbGFjZScsICdHZW9yZ2Ug
        UGVhY29jayddLAogICAgZnJpZW5kc0luQ29tbW9uOiBFbWJlci5jb21wdXRl
        ZC5pbnRlcnNlY3QoJ2FkYUZyaWVuZHMnLCAnY2hhcmxlc0ZyaWVuZHMnKQog
        IH0pOwoKICBvYmouZ2V0KCdmcmllbmRzSW5Db21tb24nKTsgLy8gWydXaWxs
        aWFtIEtpbmcnLCAnTWFyeSBTb21lcnZpbGxlJ10KICBgYGAKCiAgQG1ldGhv
        ZCBjb21wdXRlZC5pbnRlcnNlY3QKICBAZm9yIEVtYmVyCiAgQHBhcmFtIHtT
        dHJpbmd9IHByb3BlcnR5S2V5KgogIEByZXR1cm4ge0VtYmVyLkNvbXB1dGVk
        UHJvcGVydHl9IGNvbXB1dGVzIGEgbmV3IGFycmF5IHdpdGggYWxsIHRoZQog
        IGR1cGxpY2F0ZWQgZWxlbWVudHMgZnJvbSB0aGUgZGVwZW5kZW50IGFycmF5
        cwoqLwpFbWJlci5jb21wdXRlZC5pbnRlcnNlY3QgPSBmdW5jdGlvbiAoKSB7
        CiAgdmFyIGdldERlcGVuZGVudEtleUd1aWRzID0gZnVuY3Rpb24gKGNoYW5n
        ZU1ldGEpIHsKICAgIHJldHVybiBtYXAoY2hhbmdlTWV0YS5wcm9wZXJ0eS5f
        ZGVwZW5kZW50S2V5cywgZnVuY3Rpb24gKGRlcGVuZGVudEtleSkgewogICAg
        ICByZXR1cm4gZ3VpZEZvcihkZXBlbmRlbnRLZXkpOwogICAgfSk7CiAgfTsK
        CiAgdmFyIGFyZ3MgPSBhX3NsaWNlLmNhbGwoYXJndW1lbnRzKTsKICBhcmdz
        LnB1c2goewogICAgaW5pdGlhbGl6ZTogZnVuY3Rpb24gKGFycmF5LCBjaGFu
        Z2VNZXRhLCBpbnN0YW5jZU1ldGEpIHsKICAgICAgaW5zdGFuY2VNZXRhLml0
        ZW1Db3VudHMgPSB7fTsKICAgIH0sCgogICAgYWRkZWRJdGVtOiBmdW5jdGlv
        bihhcnJheSwgaXRlbSwgY2hhbmdlTWV0YSwgaW5zdGFuY2VNZXRhKSB7CiAg
        ICAgIHZhciBpdGVtR3VpZCA9IGd1aWRGb3IoaXRlbSksCiAgICAgICAgICBk
        ZXBlbmRlbnRHdWlkcyA9IGdldERlcGVuZGVudEtleUd1aWRzKGNoYW5nZU1l
        dGEpLAogICAgICAgICAgZGVwZW5kZW50R3VpZCA9IGd1aWRGb3IoY2hhbmdl
        TWV0YS5hcnJheUNoYW5nZWQpLAogICAgICAgICAgbnVtYmVyT2ZEZXBlbmRl
        bnRBcnJheXMgPSBjaGFuZ2VNZXRhLnByb3BlcnR5Ll9kZXBlbmRlbnRLZXlz
        Lmxlbmd0aCwKICAgICAgICAgIGl0ZW1Db3VudHMgPSBpbnN0YW5jZU1ldGEu
        aXRlbUNvdW50czsKCiAgICAgIGlmICghaXRlbUNvdW50c1tpdGVtR3VpZF0p
        IHsgaXRlbUNvdW50c1tpdGVtR3VpZF0gPSB7fTsgfQogICAgICBpZiAoaXRl
        bUNvdW50c1tpdGVtR3VpZF1bZGVwZW5kZW50R3VpZF0gPT09IHVuZGVmaW5l
        ZCkgeyBpdGVtQ291bnRzW2l0ZW1HdWlkXVtkZXBlbmRlbnRHdWlkXSA9IDA7
        IH0KCiAgICAgIGlmICgrK2l0ZW1Db3VudHNbaXRlbUd1aWRdW2RlcGVuZGVu
        dEd1aWRdID09PSAxICYmCiAgICAgICAgICBudW1iZXJPZkRlcGVuZGVudEFy
        cmF5cyA9PT0gRW1iZXIua2V5cyhpdGVtQ291bnRzW2l0ZW1HdWlkXSkubGVu
        Z3RoKSB7CgogICAgICAgIGFycmF5LmFkZE9iamVjdChpdGVtKTsKICAgICAg
        fQogICAgICByZXR1cm4gYXJyYXk7CiAgICB9LAogICAgcmVtb3ZlZEl0ZW06
        IGZ1bmN0aW9uKGFycmF5LCBpdGVtLCBjaGFuZ2VNZXRhLCBpbnN0YW5jZU1l
        dGEpIHsKICAgICAgdmFyIGl0ZW1HdWlkID0gZ3VpZEZvcihpdGVtKSwKICAg
        ICAgICAgIGRlcGVuZGVudEd1aWRzID0gZ2V0RGVwZW5kZW50S2V5R3VpZHMo
        Y2hhbmdlTWV0YSksCiAgICAgICAgICBkZXBlbmRlbnRHdWlkID0gZ3VpZEZv
        cihjaGFuZ2VNZXRhLmFycmF5Q2hhbmdlZCksCiAgICAgICAgICBudW1iZXJP
        ZkRlcGVuZGVudEFycmF5cyA9IGNoYW5nZU1ldGEucHJvcGVydHkuX2RlcGVu
        ZGVudEtleXMubGVuZ3RoLAogICAgICAgICAgbnVtYmVyT2ZBcnJheXNJdGVt
        QXBwZWFyc0luLAogICAgICAgICAgaXRlbUNvdW50cyA9IGluc3RhbmNlTWV0
        YS5pdGVtQ291bnRzOwoKICAgICAgaWYgKGl0ZW1Db3VudHNbaXRlbUd1aWRd
        W2RlcGVuZGVudEd1aWRdID09PSB1bmRlZmluZWQpIHsgaXRlbUNvdW50c1tp
        dGVtR3VpZF1bZGVwZW5kZW50R3VpZF0gPSAwOyB9CiAgICAgIGlmICgtLWl0
        ZW1Db3VudHNbaXRlbUd1aWRdW2RlcGVuZGVudEd1aWRdID09PSAwKSB7CiAg
        ICAgICAgZGVsZXRlIGl0ZW1Db3VudHNbaXRlbUd1aWRdW2RlcGVuZGVudEd1
        aWRdOwogICAgICAgIG51bWJlck9mQXJyYXlzSXRlbUFwcGVhcnNJbiA9IEVt
        YmVyLmtleXMoaXRlbUNvdW50c1tpdGVtR3VpZF0pLmxlbmd0aDsKCiAgICAg
        ICAgaWYgKG51bWJlck9mQXJyYXlzSXRlbUFwcGVhcnNJbiA9PT0gMCkgewog
        ICAgICAgICAgZGVsZXRlIGl0ZW1Db3VudHNbaXRlbUd1aWRdOwogICAgICAg
        IH0KICAgICAgICBhcnJheS5yZW1vdmVPYmplY3QoaXRlbSk7CiAgICAgIH0K
        ICAgICAgcmV0dXJuIGFycmF5OwogICAgfQogIH0pOwogIHJldHVybiBFbWJl
        ci5hcnJheUNvbXB1dGVkLmFwcGx5KG51bGwsIGFyZ3MpOwp9OwoKLyoqCiAg
        QSBjb21wdXRlZCBwcm9wZXJ0eSB3aGljaCByZXR1cm5zIGEgbmV3IGFycmF5
        IHdpdGggYWxsIHRoZQogIHByb3BlcnRpZXMgZnJvbSB0aGUgZmlyc3QgZGVw
        ZW5kZW50IGFycmF5IHRoYXQgYXJlIG5vdCBpbiB0aGUgc2Vjb25kCiAgZGVw
        ZW5kZW50IGFycmF5LgoKICBFeGFtcGxlCgogIGBgYGphdmFzY3JpcHQKICBB
        cHAuSGFtc3RlciA9IEVtYmVyLk9iamVjdC5leHRlbmQoewogICAgbGlrZXM6
        IFsnYmFuYW5hJywgJ2dyYXBlJywgJ2thbGUnXSwKICAgIHdhbnRzOiBFbWJl
        ci5jb21wdXRlZC5zZXREaWZmKCdsaWtlcycsICdmcnVpdHMnKQogIH0pOwoK
        ICB2YXIgaGFtc3RlciA9IEFwcC5IYW1zdGVyLmNyZWF0ZSh7ZnJ1aXRzOiBb
        CiAgICAnZ3JhcGUnLAogICAgJ2thbGUnLAogIF19KTsKICBoYW1zdGVyLmdl
        dCgnd2FudHMnKTsgLy8gWydiYW5hbmEnXQogIGBgYAoKICBAbWV0aG9kIGNv
        bXB1dGVkLnNldERpZmYKICBAZm9yIEVtYmVyCiAgQHBhcmFtIHtTdHJpbmd9
        IHNldEFQcm9wZXJ0eQogIEBwYXJhbSB7U3RyaW5nfSBzZXRCUHJvcGVydHkK
        ICBAcmV0dXJuIHtFbWJlci5Db21wdXRlZFByb3BlcnR5fSBjb21wdXRlcyBh
        IG5ldyBhcnJheSB3aXRoIGFsbCB0aGUKICBpdGVtcyBmcm9tIHRoZSBmaXJz
        dCBkZXBlbmRlbnQgYXJyYXkgdGhhdCBhcmUgbm90IGluIHRoZSBzZWNvbmQK
        ICBkZXBlbmRlbnQgYXJyYXkKKi8KRW1iZXIuY29tcHV0ZWQuc2V0RGlmZiA9
        IGZ1bmN0aW9uIChzZXRBUHJvcGVydHksIHNldEJQcm9wZXJ0eSkgewogIGlm
        IChhcmd1bWVudHMubGVuZ3RoICE9PSAyKSB7CiAgICB0aHJvdyBuZXcgRW1i
        ZXIuRXJyb3IoInNldERpZmYgcmVxdWlyZXMgZXhhY3RseSB0d28gZGVwZW5k
        ZW50IGFycmF5cy4iKTsKICB9CiAgcmV0dXJuIEVtYmVyLmFycmF5Q29tcHV0
        ZWQoc2V0QVByb3BlcnR5LCBzZXRCUHJvcGVydHksIHsKICAgIGFkZGVkSXRl
        bTogZnVuY3Rpb24gKGFycmF5LCBpdGVtLCBjaGFuZ2VNZXRhLCBpbnN0YW5j
        ZU1ldGEpIHsKICAgICAgdmFyIHNldEEgPSBnZXQodGhpcywgc2V0QVByb3Bl
        cnR5KSwKICAgICAgICAgIHNldEIgPSBnZXQodGhpcywgc2V0QlByb3BlcnR5
        KTsKCiAgICAgIGlmIChjaGFuZ2VNZXRhLmFycmF5Q2hhbmdlZCA9PT0gc2V0
        QSkgewogICAgICAgIGlmICghc2V0Qi5jb250YWlucyhpdGVtKSkgewogICAg
        ICAgICAgYXJyYXkuYWRkT2JqZWN0KGl0ZW0pOwogICAgICAgIH0KICAgICAg
        fSBlbHNlIHsKICAgICAgICBhcnJheS5yZW1vdmVPYmplY3QoaXRlbSk7CiAg
        ICAgIH0KICAgICAgcmV0dXJuIGFycmF5OwogICAgfSwKCiAgICByZW1vdmVk
        SXRlbTogZnVuY3Rpb24gKGFycmF5LCBpdGVtLCBjaGFuZ2VNZXRhLCBpbnN0
        YW5jZU1ldGEpIHsKICAgICAgdmFyIHNldEEgPSBnZXQodGhpcywgc2V0QVBy
        b3BlcnR5KSwKICAgICAgICAgIHNldEIgPSBnZXQodGhpcywgc2V0QlByb3Bl
        cnR5KTsKCiAgICAgIGlmIChjaGFuZ2VNZXRhLmFycmF5Q2hhbmdlZCA9PT0g
        c2V0QikgewogICAgICAgIGlmIChzZXRBLmNvbnRhaW5zKGl0ZW0pKSB7CiAg
        ICAgICAgICBhcnJheS5hZGRPYmplY3QoaXRlbSk7CiAgICAgICAgfQogICAg
        ICB9IGVsc2UgewogICAgICAgIGFycmF5LnJlbW92ZU9iamVjdChpdGVtKTsK
        ICAgICAgfQogICAgICByZXR1cm4gYXJyYXk7CiAgICB9CiAgfSk7Cn07Cgpm
        dW5jdGlvbiBiaW5hcnlTZWFyY2goYXJyYXksIGl0ZW0sIGxvdywgaGlnaCkg
        ewogIHZhciBtaWQsIG1pZEl0ZW0sIHJlcywgZ3VpZE1pZCwgZ3VpZEl0ZW07
        CgogIGlmIChhcmd1bWVudHMubGVuZ3RoIDwgNCkgeyBoaWdoID0gZ2V0KGFy
        cmF5LCAnbGVuZ3RoJyk7IH0KICBpZiAoYXJndW1lbnRzLmxlbmd0aCA8IDMp
        IHsgbG93ID0gMDsgfQoKICBpZiAobG93ID09PSBoaWdoKSB7CiAgICByZXR1
        cm4gbG93OwogIH0KCiAgbWlkID0gbG93ICsgTWF0aC5mbG9vcigoaGlnaCAt
        IGxvdykgLyAyKTsKICBtaWRJdGVtID0gYXJyYXkub2JqZWN0QXQobWlkKTsK
        CiAgZ3VpZE1pZCA9IF9ndWlkRm9yKG1pZEl0ZW0pOwogIGd1aWRJdGVtID0g
        X2d1aWRGb3IoaXRlbSk7CgogIGlmIChndWlkTWlkID09PSBndWlkSXRlbSkg
        ewogICAgcmV0dXJuIG1pZDsKICB9CgogIHJlcyA9IHRoaXMub3JkZXIobWlk
        SXRlbSwgaXRlbSk7CiAgaWYgKHJlcyA9PT0gMCkgewogICAgcmVzID0gZ3Vp
        ZE1pZCA8IGd1aWRJdGVtID8gLTEgOiAxOwogIH0KCgogIGlmIChyZXMgPCAw
        KSB7CiAgICByZXR1cm4gdGhpcy5iaW5hcnlTZWFyY2goYXJyYXksIGl0ZW0s
        IG1pZCsxLCBoaWdoKTsKICB9IGVsc2UgaWYgKHJlcyA+IDApIHsKICAgIHJl
        dHVybiB0aGlzLmJpbmFyeVNlYXJjaChhcnJheSwgaXRlbSwgbG93LCBtaWQp
        OwogIH0KCiAgcmV0dXJuIG1pZDsKCiAgZnVuY3Rpb24gX2d1aWRGb3IoaXRl
        bSkgewogICAgaWYgKFNlYXJjaFByb3h5LmRldGVjdEluc3RhbmNlKGl0ZW0p
        KSB7CiAgICAgIHJldHVybiBndWlkRm9yKGdldChpdGVtLCAnY29udGVudCcp
        KTsKICAgIH0KICAgIHJldHVybiBndWlkRm9yKGl0ZW0pOwogIH0KfQoKClNl
        YXJjaFByb3h5ID0gRW1iZXIuT2JqZWN0UHJveHkuZXh0ZW5kKCk7CgovKioK
        ICBBIGNvbXB1dGVkIHByb3BlcnR5IHdoaWNoIHJldHVybnMgYSBuZXcgYXJy
        YXkgd2l0aCBhbGwgdGhlCiAgcHJvcGVydGllcyBmcm9tIHRoZSBmaXJzdCBk
        ZXBlbmRlbnQgYXJyYXkgc29ydGVkIGJhc2VkIG9uIGEgcHJvcGVydHkKICBv
        ciBzb3J0IGZ1bmN0aW9uLgoKICBUaGUgY2FsbGJhY2sgbWV0aG9kIHlvdSBw
        cm92aWRlIHNob3VsZCBoYXZlIHRoZSBmb2xsb3dpbmcgc2lnbmF0dXJlOgoK
        ICBgYGBqYXZhc2NyaXB0CiAgZnVuY3Rpb24oaXRlbUEsIGl0ZW1CKTsKICBg
        YGAKCiAgLSBgaXRlbUFgIHRoZSBmaXJzdCBpdGVtIHRvIGNvbXBhcmUuCiAg
        LSBgaXRlbUJgIHRoZSBzZWNvbmQgaXRlbSB0byBjb21wYXJlLgoKICBUaGlz
        IGZ1bmN0aW9uIHNob3VsZCByZXR1cm4gYC0xYCB3aGVuIGBpdGVtQWAgc2hv
        dWxkIGNvbWUgYmVmb3JlCiAgYGl0ZW1CYC4gSXQgc2hvdWxkIHJldHVybiBg
        MWAgd2hlbiBgaXRlbUFgIHNob3VsZCBjb21lIGFmdGVyCiAgYGl0ZW1CYC4g
        SWYgdGhlIGBpdGVtQWAgYW5kIGBpdGVtQmAgYXJlIGVxdWFsIHRoaXMgZnVu
        Y3Rpb24gc2hvdWxkIHJldHVybiBgMGAuCgogIEV4YW1wbGUKCiAgYGBgamF2
        YXNjcmlwdAogIHZhciBUb0RvTGlzdCA9IEVtYmVyLk9iamVjdC5leHRlbmQo
        ewogICAgdG9kb3NTb3J0aW5nOiBbJ25hbWUnXSwKICAgIHNvcnRlZFRvZG9z
        OiBFbWJlci5jb21wdXRlZC5zb3J0KCd0b2RvcycsICd0b2Rvc1NvcnRpbmcn
        KSwKICAgIHByaW9yaXR5VG9kb3M6IEVtYmVyLmNvbXB1dGVkLnNvcnQoJ3Rv
        ZG9zJywgZnVuY3Rpb24oYSwgYil7CiAgICAgIGlmIChhLnByaW9yaXR5ID4g
        Yi5wcmlvcml0eSkgewogICAgICAgIHJldHVybiAxOwogICAgICB9IGVsc2Ug
        aWYgKGEucHJpb3JpdHkgPCBiLnByaW9yaXR5KSB7CiAgICAgICAgcmV0dXJu
        IC0xOwogICAgICB9CiAgICAgIHJldHVybiAwOwogICAgfSksCiAgfSk7CiAg
        dmFyIHRvZG9MaXN0ID0gVG9Eb0xpc3QuY3JlYXRlKHt0b2RvczogWwogICAg
        e25hbWU6ICdVbml0IFRlc3QnLCBwcmlvcml0eTogMn0sCiAgICB7bmFtZTog
        J0RvY3VtZW50YXRpb24nLCBwcmlvcml0eTogM30sCiAgICB7bmFtZTogJ1Jl
        bGVhc2UnLCBwcmlvcml0eTogMX0KICBdfSk7CgogIHRvZG9MaXN0LmdldCgn
        c29ydGVkVG9kb3MnKTsgLy8gW3tuYW1lOidEb2N1bWVudGF0aW9uJywgcHJp
        b3JpdHk6M30sIHtuYW1lOidSZWxlYXNlJywgcHJpb3JpdHk6MX0sIHtuYW1l
        OidVbml0IFRlc3QnLCBwcmlvcml0eToyfV0KICB0b2RvTGlzdC5nZXQoJ3By
        aW9yaXR5VG9kb3MnKTsgLy8gW3tuYW1lOidSZWxlYXNlJywgcHJpb3JpdHk6
        MX0sIHtuYW1lOidVbml0IFRlc3QnLCBwcmlvcml0eToyfSwge25hbWU6J0Rv
        Y3VtZW50YXRpb24nLCBwcmlvcml0eTozfV0KICBgYGAKCiAgQG1ldGhvZCBj
        b21wdXRlZC5zb3J0CiAgQGZvciBFbWJlcgogIEBwYXJhbSB7U3RyaW5nfSBk
        ZXBlbmRlbnRLZXkKICBAcGFyYW0ge1N0cmluZyBvciBGdW5jdGlvbn0gc29y
        dERlZmluaXRpb24gYSBkZXBlbmRlbnQga2V5IHRvIGFuCiAgYXJyYXkgb2Yg
        c29ydCBwcm9wZXJ0aWVzIG9yIGEgZnVuY3Rpb24gdG8gdXNlIHdoZW4gc29y
        dGluZwogIEByZXR1cm4ge0VtYmVyLkNvbXB1dGVkUHJvcGVydHl9IGNvbXB1
        dGVzIGEgbmV3IHNvcnRlZCBhcnJheSBiYXNlZAogIG9uIHRoZSBzb3J0IHBy
        b3BlcnR5IGFycmF5IG9yIGNhbGxiYWNrIGZ1bmN0aW9uCiovCkVtYmVyLmNv
        bXB1dGVkLnNvcnQgPSBmdW5jdGlvbiAoaXRlbXNLZXksIHNvcnREZWZpbml0
        aW9uKSB7CiAgRW1iZXIuYXNzZXJ0KCJFbWJlci5jb21wdXRlZC5zb3J0IHJl
        cXVpcmVzIHR3byBhcmd1bWVudHM6IGFuIGFycmF5IGtleSB0byBzb3J0IGFu
        ZCBlaXRoZXIgYSBzb3J0IHByb3BlcnRpZXMga2V5IG9yIHNvcnQgZnVuY3Rp
        b24iLCBhcmd1bWVudHMubGVuZ3RoID09PSAyKTsKCiAgdmFyIGluaXRGbiwg
        c29ydFByb3BlcnRpZXNLZXk7CgogIGlmICh0eXBlb2Ygc29ydERlZmluaXRp
        b24gPT09ICdmdW5jdGlvbicpIHsKICAgIGluaXRGbiA9IGZ1bmN0aW9uIChh
        cnJheSwgY2hhbmdlTWV0YSwgaW5zdGFuY2VNZXRhKSB7CiAgICAgIGluc3Rh
        bmNlTWV0YS5vcmRlciA9IHNvcnREZWZpbml0aW9uOwogICAgICBpbnN0YW5j
        ZU1ldGEuYmluYXJ5U2VhcmNoID0gYmluYXJ5U2VhcmNoOwogICAgfTsKICB9
        IGVsc2UgewogICAgc29ydFByb3BlcnRpZXNLZXkgPSBzb3J0RGVmaW5pdGlv
        bjsKICAgIGluaXRGbiA9IGZ1bmN0aW9uIChhcnJheSwgY2hhbmdlTWV0YSwg
        aW5zdGFuY2VNZXRhKSB7CiAgICAgIGZ1bmN0aW9uIHNldHVwU29ydFByb3Bl
        cnRpZXMoKSB7CiAgICAgICAgdmFyIHNvcnRQcm9wZXJ0eURlZmluaXRpb25z
        ID0gZ2V0KHRoaXMsIHNvcnRQcm9wZXJ0aWVzS2V5KSwKICAgICAgICAgICAg
        c29ydFByb3BlcnR5LAogICAgICAgICAgICBzb3J0UHJvcGVydGllcyA9IGlu
        c3RhbmNlTWV0YS5zb3J0UHJvcGVydGllcyA9IFtdLAogICAgICAgICAgICBz
        b3J0UHJvcGVydHlBc2NlbmRpbmcgPSBpbnN0YW5jZU1ldGEuc29ydFByb3Bl
        cnR5QXNjZW5kaW5nID0ge30sCiAgICAgICAgICAgIGlkeCwKICAgICAgICAg
        ICAgYXNjOwoKICAgICAgICBFbWJlci5hc3NlcnQoIkNhbm5vdCBzb3J0OiAn
        IiArIHNvcnRQcm9wZXJ0aWVzS2V5ICsgIicgaXMgbm90IGFuIGFycmF5LiIs
        IEVtYmVyLmlzQXJyYXkoc29ydFByb3BlcnR5RGVmaW5pdGlvbnMpKTsKCiAg
        ICAgICAgY2hhbmdlTWV0YS5wcm9wZXJ0eS5jbGVhckl0ZW1Qcm9wZXJ0eUtl
        eXMoaXRlbXNLZXkpOwoKICAgICAgICBmb3JFYWNoKHNvcnRQcm9wZXJ0eURl
        ZmluaXRpb25zLCBmdW5jdGlvbiAoc29ydFByb3BlcnR5RGVmaW5pdGlvbikg
        ewogICAgICAgICAgaWYgKChpZHggPSBzb3J0UHJvcGVydHlEZWZpbml0aW9u
        LmluZGV4T2YoJzonKSkgIT09IC0xKSB7CiAgICAgICAgICAgIHNvcnRQcm9w
        ZXJ0eSA9IHNvcnRQcm9wZXJ0eURlZmluaXRpb24uc3Vic3RyaW5nKDAsIGlk
        eCk7CiAgICAgICAgICAgIGFzYyA9IHNvcnRQcm9wZXJ0eURlZmluaXRpb24u
        c3Vic3RyaW5nKGlkeCsxKS50b0xvd2VyQ2FzZSgpICE9PSAnZGVzYyc7CiAg
        ICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBzb3J0UHJvcGVydHkgPSBz
        b3J0UHJvcGVydHlEZWZpbml0aW9uOwogICAgICAgICAgICBhc2MgPSB0cnVl
        OwogICAgICAgICAgfQoKICAgICAgICAgIHNvcnRQcm9wZXJ0aWVzLnB1c2go
        c29ydFByb3BlcnR5KTsKICAgICAgICAgIHNvcnRQcm9wZXJ0eUFzY2VuZGlu
        Z1tzb3J0UHJvcGVydHldID0gYXNjOwogICAgICAgICAgY2hhbmdlTWV0YS5w
        cm9wZXJ0eS5pdGVtUHJvcGVydHlLZXkoaXRlbXNLZXksIHNvcnRQcm9wZXJ0
        eSk7CiAgICAgICAgfSk7CgogICAgICAgIHNvcnRQcm9wZXJ0eURlZmluaXRp
        b25zLmFkZE9ic2VydmVyKCdAZWFjaCcsIHRoaXMsIHVwZGF0ZVNvcnRQcm9w
        ZXJ0aWVzT25jZSk7CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIHVwZGF0ZVNv
        cnRQcm9wZXJ0aWVzT25jZSgpIHsKICAgICAgICBFbWJlci5ydW4ub25jZSh0
        aGlzLCB1cGRhdGVTb3J0UHJvcGVydGllcywgY2hhbmdlTWV0YS5wcm9wZXJ0
        eU5hbWUpOwogICAgICB9CgogICAgICBmdW5jdGlvbiB1cGRhdGVTb3J0UHJv
        cGVydGllcyhwcm9wZXJ0eU5hbWUpIHsKICAgICAgICBzZXR1cFNvcnRQcm9w
        ZXJ0aWVzLmNhbGwodGhpcyk7CiAgICAgICAgY2hhbmdlTWV0YS5wcm9wZXJ0
        eS5yZWNvbXB1dGVPbmNlLmNhbGwodGhpcywgcHJvcGVydHlOYW1lKTsKICAg
        ICAgfQoKICAgICAgRW1iZXIuYWRkT2JzZXJ2ZXIodGhpcywgc29ydFByb3Bl
        cnRpZXNLZXksIHVwZGF0ZVNvcnRQcm9wZXJ0aWVzT25jZSk7CgogICAgICBz
        ZXR1cFNvcnRQcm9wZXJ0aWVzLmNhbGwodGhpcyk7CgoKICAgICAgaW5zdGFu
        Y2VNZXRhLm9yZGVyID0gZnVuY3Rpb24gKGl0ZW1BLCBpdGVtQikgewogICAg
        ICAgIHZhciBpc1Byb3h5ID0gaXRlbUIgaW5zdGFuY2VvZiBTZWFyY2hQcm94
        eSwKICAgICAgICAgICAgc29ydFByb3BlcnR5LCByZXN1bHQsIGFzYzsKCiAg
        ICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnNvcnRQcm9wZXJ0aWVz
        Lmxlbmd0aDsgKytpKSB7CiAgICAgICAgICBzb3J0UHJvcGVydHkgPSB0aGlz
        LnNvcnRQcm9wZXJ0aWVzW2ldOwogICAgICAgICAgcmVzdWx0ID0gRW1iZXIu
        Y29tcGFyZShnZXQoaXRlbUEsIHNvcnRQcm9wZXJ0eSksIGlzUHJveHkgPyBp
        dGVtQltzb3J0UHJvcGVydHldIDogZ2V0KGl0ZW1CLCBzb3J0UHJvcGVydHkp
        KTsKCiAgICAgICAgICBpZiAocmVzdWx0ICE9PSAwKSB7CiAgICAgICAgICAg
        IGFzYyA9IHRoaXMuc29ydFByb3BlcnR5QXNjZW5kaW5nW3NvcnRQcm9wZXJ0
        eV07CiAgICAgICAgICAgIHJldHVybiBhc2MgPyByZXN1bHQgOiAoLTEgKiBy
        ZXN1bHQpOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgcmV0dXJu
        IDA7CiAgICAgIH07CgogICAgICBpbnN0YW5jZU1ldGEuYmluYXJ5U2VhcmNo
        ID0gYmluYXJ5U2VhcmNoOwogICAgfTsKICB9CgogIHJldHVybiBFbWJlci5h
        cnJheUNvbXB1dGVkKGl0ZW1zS2V5LCB7CiAgICBpbml0aWFsaXplOiBpbml0
        Rm4sCgogICAgYWRkZWRJdGVtOiBmdW5jdGlvbiAoYXJyYXksIGl0ZW0sIGNo
        YW5nZU1ldGEsIGluc3RhbmNlTWV0YSkgewogICAgICB2YXIgaW5kZXggPSBp
        bnN0YW5jZU1ldGEuYmluYXJ5U2VhcmNoKGFycmF5LCBpdGVtKTsKICAgICAg
        YXJyYXkuaW5zZXJ0QXQoaW5kZXgsIGl0ZW0pOwogICAgICByZXR1cm4gYXJy
        YXk7CiAgICB9LAoKICAgIHJlbW92ZWRJdGVtOiBmdW5jdGlvbiAoYXJyYXks
        IGl0ZW0sIGNoYW5nZU1ldGEsIGluc3RhbmNlTWV0YSkgewogICAgICB2YXIg
        cHJveHlQcm9wZXJ0aWVzLCBpbmRleCwgc2VhcmNoSXRlbTsKCiAgICAgIGlm
        IChjaGFuZ2VNZXRhLnByZXZpb3VzVmFsdWVzKSB7CiAgICAgICAgcHJveHlQ
        cm9wZXJ0aWVzID0gbWVyZ2UoeyBjb250ZW50OiBpdGVtIH0sIGNoYW5nZU1l
        dGEucHJldmlvdXNWYWx1ZXMpOwoKICAgICAgICBzZWFyY2hJdGVtID0gU2Vh
        cmNoUHJveHkuY3JlYXRlKHByb3h5UHJvcGVydGllcyk7CiAgICAgIH0gZWxz
        ZSB7CiAgICAgICAgc2VhcmNoSXRlbSA9IGl0ZW07CiAgICAgIH0KCiAgICAg
        IGluZGV4ID0gaW5zdGFuY2VNZXRhLmJpbmFyeVNlYXJjaChhcnJheSwgc2Vh
        cmNoSXRlbSk7CiAgICAgIGFycmF5LnJlbW92ZUF0KGluZGV4KTsKICAgICAg
        cmV0dXJuIGFycmF5OwogICAgfQogIH0pOwp9OwoKfSkoKTsKCgoKKGZ1bmN0
        aW9uKCkgewpFbWJlci5SU1ZQID0gcmVxdWlyZU1vZHVsZSgncnN2cCcpOwoK
        RW1iZXIuUlNWUC5vbmVycm9yRGVmYXVsdCA9IGZ1bmN0aW9uKGVycm9yKSB7
        CiAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHsKICAgIGlmIChFbWJl
        ci50ZXN0aW5nKSB7CiAgICAgIGlmIChFbWJlci5UZXN0ICYmIEVtYmVyLlRl
        c3QuYWRhcHRlcikgewogICAgICAgIEVtYmVyLlRlc3QuYWRhcHRlci5leGNl
        cHRpb24oZXJyb3IpOwogICAgICB9IGVsc2UgewogICAgICAgIHRocm93IGVy
        cm9yOwogICAgICB9CiAgICB9IGVsc2UgewogICAgICBFbWJlci5Mb2dnZXIu
        ZXJyb3IoZXJyb3Iuc3RhY2spOwogICAgICBFbWJlci5hc3NlcnQoZXJyb3Is
        IGZhbHNlKTsKICAgIH0KICB9Cn07CgpFbWJlci5SU1ZQLm9uKCdlcnJvcics
        IEVtYmVyLlJTVlAub25lcnJvckRlZmF1bHQpOwoKfSkoKTsKCgoKKGZ1bmN0
        aW9uKCkgewovKioKQG1vZHVsZSBlbWJlcgpAc3VibW9kdWxlIGVtYmVyLXJ1
        bnRpbWUKKi8KCnZhciBhX3NsaWNlID0gQXJyYXkucHJvdG90eXBlLnNsaWNl
        OwoKdmFyIGV4cGFuZFByb3BlcnRpZXMgPSBFbWJlci5leHBhbmRQcm9wZXJ0
        aWVzOwoKaWYgKEVtYmVyLkVYVEVORF9QUk9UT1RZUEVTID09PSB0cnVlIHx8
        IEVtYmVyLkVYVEVORF9QUk9UT1RZUEVTLkZ1bmN0aW9uKSB7CgogIC8qKgog
        ICAgVGhlIGBwcm9wZXJ0eWAgZXh0ZW5zaW9uIG9mIEphdmFzY3JpcHQncyBG
        dW5jdGlvbiBwcm90b3R5cGUgaXMgYXZhaWxhYmxlCiAgICB3aGVuIGBFbWJl
        ci5FWFRFTkRfUFJPVE9UWVBFU2Agb3IgYEVtYmVyLkVYVEVORF9QUk9UT1RZ
        UEVTLkZ1bmN0aW9uYCBpcwogICAgYHRydWVgLCB3aGljaCBpcyB0aGUgZGVm
        YXVsdC4KCiAgICBDb21wdXRlZCBwcm9wZXJ0aWVzIGFsbG93IHlvdSB0byB0
        cmVhdCBhIGZ1bmN0aW9uIGxpa2UgYSBwcm9wZXJ0eToKCiAgICBgYGBqYXZh
        c2NyaXB0CiAgICBNeUFwcC5QcmVzaWRlbnQgPSBFbWJlci5PYmplY3QuZXh0
        ZW5kKHsKICAgICAgZmlyc3ROYW1lOiAnJywKICAgICAgbGFzdE5hbWU6ICAn
        JywKCiAgICAgIGZ1bGxOYW1lOiBmdW5jdGlvbigpIHsKICAgICAgICByZXR1
        cm4gdGhpcy5nZXQoJ2ZpcnN0TmFtZScpICsgJyAnICsgdGhpcy5nZXQoJ2xh
        c3ROYW1lJyk7CgogICAgICAgIC8vIENhbGwgdGhpcyBmbGFnIHRvIG1hcmsg
        dGhlIGZ1bmN0aW9uIGFzIGEgcHJvcGVydHkKICAgICAgfS5wcm9wZXJ0eSgp
        CiAgICB9KTsKCiAgICB2YXIgcHJlc2lkZW50ID0gTXlBcHAuUHJlc2lkZW50
        LmNyZWF0ZSh7CiAgICAgIGZpcnN0TmFtZTogIkJhcmFjayIsCiAgICAgIGxh
        c3ROYW1lOiAiT2JhbWEiCiAgICB9KTsKCiAgICBwcmVzaWRlbnQuZ2V0KCdm
        dWxsTmFtZScpOyAgICAvLyAiQmFyYWNrIE9iYW1hIgogICAgYGBgCgogICAg
        VHJlYXRpbmcgYSBmdW5jdGlvbiBsaWtlIGEgcHJvcGVydHkgaXMgdXNlZnVs
        IGJlY2F1c2UgdGhleSBjYW4gd29yayB3aXRoCiAgICBiaW5kaW5ncywganVz
        dCBsaWtlIGFueSBvdGhlciBwcm9wZXJ0eS4KCiAgICBNYW55IGNvbXB1dGVk
        IHByb3BlcnRpZXMgaGF2ZSBkZXBlbmRlbmNpZXMgb24gb3RoZXIgcHJvcGVy
        dGllcy4gRm9yCiAgICBleGFtcGxlLCBpbiB0aGUgYWJvdmUgZXhhbXBsZSwg
        dGhlIGBmdWxsTmFtZWAgcHJvcGVydHkgZGVwZW5kcyBvbgogICAgYGZpcnN0
        TmFtZWAgYW5kIGBsYXN0TmFtZWAgdG8gZGV0ZXJtaW5lIGl0cyB2YWx1ZS4g
        WW91IGNhbiB0ZWxsIEVtYmVyCiAgICBhYm91dCB0aGVzZSBkZXBlbmRlbmNp
        ZXMgbGlrZSB0aGlzOgoKICAgIGBgYGphdmFzY3JpcHQKICAgIE15QXBwLlBy
        ZXNpZGVudCA9IEVtYmVyLk9iamVjdC5leHRlbmQoewogICAgICBmaXJzdE5h
        bWU6ICcnLAogICAgICBsYXN0TmFtZTogICcnLAoKICAgICAgZnVsbE5hbWU6
        IGZ1bmN0aW9uKCkgewogICAgICAgIHJldHVybiB0aGlzLmdldCgnZmlyc3RO
        YW1lJykgKyAnICcgKyB0aGlzLmdldCgnbGFzdE5hbWUnKTsKCiAgICAgICAg
        Ly8gVGVsbCBFbWJlci5qcyB0aGF0IHRoaXMgY29tcHV0ZWQgcHJvcGVydHkg
        ZGVwZW5kcyBvbiBmaXJzdE5hbWUKICAgICAgICAvLyBhbmQgbGFzdE5hbWUK
        ICAgICAgfS5wcm9wZXJ0eSgnZmlyc3ROYW1lJywgJ2xhc3ROYW1lJykKICAg
        IH0pOwogICAgYGBgCgogICAgTWFrZSBzdXJlIHlvdSBsaXN0IHRoZXNlIGRl
        cGVuZGVuY2llcyBzbyBFbWJlciBrbm93cyB3aGVuIHRvIHVwZGF0ZQogICAg
        YmluZGluZ3MgdGhhdCBjb25uZWN0IHRvIGEgY29tcHV0ZWQgcHJvcGVydHku
        IENoYW5naW5nIGEgZGVwZW5kZW5jeQogICAgd2lsbCBub3QgaW1tZWRpYXRl
        bHkgdHJpZ2dlciBhbiB1cGRhdGUgb2YgdGhlIGNvbXB1dGVkIHByb3BlcnR5
        LCBidXQKICAgIHdpbGwgaW5zdGVhZCBjbGVhciB0aGUgY2FjaGUgc28gdGhh
        dCBpdCBpcyB1cGRhdGVkIHdoZW4gdGhlIG5leHQgYGdldGAKICAgIGlzIGNh
        bGxlZCBvbiB0aGUgcHJvcGVydHkuCgogICAgU2VlIFtFbWJlci5Db21wdXRl
        ZFByb3BlcnR5XSgvYXBpL2NsYXNzZXMvRW1iZXIuQ29tcHV0ZWRQcm9wZXJ0
        eS5odG1sKSwgW0VtYmVyLmNvbXB1dGVkXSgvYXBpLyNtZXRob2RfY29tcHV0
        ZWQpLgoKICAgIEBtZXRob2QgcHJvcGVydHkKICAgIEBmb3IgRnVuY3Rpb24K
        ICAqLwogIEZ1bmN0aW9uLnByb3RvdHlwZS5wcm9wZXJ0eSA9IGZ1bmN0aW9u
        KCkgewogICAgdmFyIHJldCA9IEVtYmVyLmNvbXB1dGVkKHRoaXMpOwogICAg
        Ly8gQ29tcHV0ZWRQcm9wZXJ0eS5wcm90b3R5cGUucHJvcGVydHkgZXhwYW5k
        cyBwcm9wZXJ0aWVzOyBubyBuZWVkIGZvciB1cyB0bwogICAgLy8gZG8gc28g
        aGVyZS4KICAgIHJldHVybiByZXQucHJvcGVydHkuYXBwbHkocmV0LCBhcmd1
        bWVudHMpOwogIH07CgogIC8qKgogICAgVGhlIGBvYnNlcnZlc2AgZXh0ZW5z
        aW9uIG9mIEphdmFzY3JpcHQncyBGdW5jdGlvbiBwcm90b3R5cGUgaXMgYXZh
        aWxhYmxlCiAgICB3aGVuIGBFbWJlci5FWFRFTkRfUFJPVE9UWVBFU2Agb3Ig
        YEVtYmVyLkVYVEVORF9QUk9UT1RZUEVTLkZ1bmN0aW9uYCBpcwogICAgdHJ1
        ZSwgd2hpY2ggaXMgdGhlIGRlZmF1bHQuCgogICAgWW91IGNhbiBvYnNlcnZl
        IHByb3BlcnR5IGNoYW5nZXMgc2ltcGx5IGJ5IGFkZGluZyB0aGUgYG9ic2Vy
        dmVzYAogICAgY2FsbCB0byB0aGUgZW5kIG9mIHlvdXIgbWV0aG9kIGRlY2xh
        cmF0aW9ucyBpbiBjbGFzc2VzIHRoYXQgeW91IHdyaXRlLgogICAgRm9yIGV4
        YW1wbGU6CgogICAgYGBgamF2YXNjcmlwdAogICAgRW1iZXIuT2JqZWN0LmV4
        dGVuZCh7CiAgICAgIHZhbHVlT2JzZXJ2ZXI6IGZ1bmN0aW9uKCkgewogICAg
        ICAgIC8vIEV4ZWN1dGVzIHdoZW5ldmVyIHRoZSAidmFsdWUiIHByb3BlcnR5
        IGNoYW5nZXMKICAgICAgfS5vYnNlcnZlcygndmFsdWUnKQogICAgfSk7CiAg
        ICBgYGAKCiAgICBJbiB0aGUgZnV0dXJlIHRoaXMgbWV0aG9kIG1heSBiZWNv
        bWUgYXN5bmNocm9ub3VzLiBJZiB5b3Ugd2FudCB0byBlbnN1cmUKICAgIHN5
        bmNocm9ub3VzIGJlaGF2aW9yLCB1c2UgYG9ic2VydmVzSW1tZWRpYXRlbHlg
        LgoKICAgIFNlZSBgRW1iZXIub2JzZXJ2ZXJgLgoKICAgIEBtZXRob2Qgb2Jz
        ZXJ2ZXMKICAgIEBmb3IgRnVuY3Rpb24KICAqLwogIEZ1bmN0aW9uLnByb3Rv
        dHlwZS5vYnNlcnZlcyA9IGZ1bmN0aW9uKCkgewogICAgdmFyIGFkZFdhdGNo
        ZWRQcm9wZXJ0eSA9IGZ1bmN0aW9uIChvYnMpIHsgd2F0Y2hlZC5wdXNoKG9i
        cyk7IH07CiAgICB2YXIgd2F0Y2hlZCA9IFtdOwoKICAgIGZvciAodmFyIGk9
        MDsgaTxhcmd1bWVudHMubGVuZ3RoOyArK2kpIHsKICAgICAgZXhwYW5kUHJv
        cGVydGllcyhhcmd1bWVudHNbaV0sIGFkZFdhdGNoZWRQcm9wZXJ0eSk7CiAg
        ICB9CgogICAgdGhpcy5fX2VtYmVyX29ic2VydmVzX18gPSB3YXRjaGVkOwoK
        ICAgIHJldHVybiB0aGlzOwogIH07CgogIC8qKgogICAgVGhlIGBvYnNlcnZl
        c0ltbWVkaWF0ZWx5YCBleHRlbnNpb24gb2YgSmF2YXNjcmlwdCdzIEZ1bmN0
        aW9uIHByb3RvdHlwZSBpcwogICAgYXZhaWxhYmxlIHdoZW4gYEVtYmVyLkVY
        VEVORF9QUk9UT1RZUEVTYCBvcgogICAgYEVtYmVyLkVYVEVORF9QUk9UT1RZ
        UEVTLkZ1bmN0aW9uYCBpcyB0cnVlLCB3aGljaCBpcyB0aGUgZGVmYXVsdC4K
        CiAgICBZb3UgY2FuIG9ic2VydmUgcHJvcGVydHkgY2hhbmdlcyBzaW1wbHkg
        YnkgYWRkaW5nIHRoZSBgb2JzZXJ2ZXNJbW1lZGlhdGVseWAKICAgIGNhbGwg
        dG8gdGhlIGVuZCBvZiB5b3VyIG1ldGhvZCBkZWNsYXJhdGlvbnMgaW4gY2xh
        c3NlcyB0aGF0IHlvdSB3cml0ZS4KICAgIEZvciBleGFtcGxlOgoKICAgIGBg
        YGphdmFzY3JpcHQKICAgIEVtYmVyLk9iamVjdC5leHRlbmQoewogICAgICB2
        YWx1ZU9ic2VydmVyOiBmdW5jdGlvbigpIHsKICAgICAgICAvLyBFeGVjdXRl
        cyBpbW1lZGlhdGVseSBhZnRlciB0aGUgInZhbHVlIiBwcm9wZXJ0eSBjaGFu
        Z2VzCiAgICAgIH0ub2JzZXJ2ZXNJbW1lZGlhdGVseSgndmFsdWUnKQogICAg
        fSk7CiAgICBgYGAKCiAgICBJbiB0aGUgZnV0dXJlLCBgb2JzZXJ2ZXNgIG1h
        eSBiZWNvbWUgYXN5bmNocm9ub3VzLiBJbiB0aGlzIGV2ZW50LAogICAgYG9i
        c2VydmVzSW1tZWRpYXRlbHlgIHdpbGwgbWFpbnRhaW4gdGhlIHN5bmNocm9u
        b3VzIGJlaGF2aW9yLgoKICAgIFNlZSBgRW1iZXIuaW1tZWRpYXRlT2JzZXJ2
        ZXJgLgoKICAgIEBtZXRob2Qgb2JzZXJ2ZXNJbW1lZGlhdGVseQogICAgQGZv
        ciBGdW5jdGlvbgogICovCiAgRnVuY3Rpb24ucHJvdG90eXBlLm9ic2VydmVz
        SW1tZWRpYXRlbHkgPSBmdW5jdGlvbigpIHsKICAgIGZvciAodmFyIGk9MCwg
        bD1hcmd1bWVudHMubGVuZ3RoOyBpPGw7IGkrKykgewogICAgICB2YXIgYXJn
        ID0gYXJndW1lbnRzW2ldOwogICAgICBFbWJlci5hc3NlcnQoIkltbWVkaWF0
        ZSBvYnNlcnZlcnMgbXVzdCBvYnNlcnZlIGludGVybmFsIHByb3BlcnRpZXMg
        b25seSwgbm90IHByb3BlcnRpZXMgb24gb3RoZXIgb2JqZWN0cy4iLCBhcmcu
        aW5kZXhPZignLicpID09PSAtMSk7CiAgICB9CgogICAgLy8gb2JzZXJ2ZXMg
        aGFuZGxlcyBwcm9wZXJ0eSBleHBhbnNpb24KICAgIHJldHVybiB0aGlzLm9i
        c2VydmVzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgfTsKCiAgLyoqCiAg
        ICBUaGUgYG9ic2VydmVzQmVmb3JlYCBleHRlbnNpb24gb2YgSmF2YXNjcmlw
        dCdzIEZ1bmN0aW9uIHByb3RvdHlwZSBpcwogICAgYXZhaWxhYmxlIHdoZW4g
        YEVtYmVyLkVYVEVORF9QUk9UT1RZUEVTYCBvcgogICAgYEVtYmVyLkVYVEVO
        RF9QUk9UT1RZUEVTLkZ1bmN0aW9uYCBpcyB0cnVlLCB3aGljaCBpcyB0aGUg
        ZGVmYXVsdC4KCiAgICBZb3UgY2FuIGdldCBub3RpZmllZCB3aGVuIGEgcHJv
        cGVydHkgY2hhbmdlIGlzIGFib3V0IHRvIGhhcHBlbiBieQogICAgYnkgYWRk
        aW5nIHRoZSBgb2JzZXJ2ZXNCZWZvcmVgIGNhbGwgdG8gdGhlIGVuZCBvZiB5
        b3VyIG1ldGhvZAogICAgZGVjbGFyYXRpb25zIGluIGNsYXNzZXMgdGhhdCB5
        b3Ugd3JpdGUuIEZvciBleGFtcGxlOgoKICAgIGBgYGphdmFzY3JpcHQKICAg
        IEVtYmVyLk9iamVjdC5leHRlbmQoewogICAgICB2YWx1ZU9ic2VydmVyOiBm
        dW5jdGlvbigpIHsKICAgICAgICAvLyBFeGVjdXRlcyB3aGVuZXZlciB0aGUg
        InZhbHVlIiBwcm9wZXJ0eSBpcyBhYm91dCB0byBjaGFuZ2UKICAgICAgfS5v
        YnNlcnZlc0JlZm9yZSgndmFsdWUnKQogICAgfSk7CiAgICBgYGAKCiAgICBT
        ZWUgYEVtYmVyLmJlZm9yZU9ic2VydmVyYC4KCiAgICBAbWV0aG9kIG9ic2Vy
        dmVzQmVmb3JlCiAgICBAZm9yIEZ1bmN0aW9uCiAgKi8KICBGdW5jdGlvbi5w
        cm90b3R5cGUub2JzZXJ2ZXNCZWZvcmUgPSBmdW5jdGlvbigpIHsKICAgIHZh
        ciBhZGRXYXRjaGVkUHJvcGVydHkgPSBmdW5jdGlvbiAob2JzKSB7IHdhdGNo
        ZWQucHVzaChvYnMpOyB9OwogICAgdmFyIHdhdGNoZWQgPSBbXTsKCiAgICBm
        b3IgKHZhciBpPTA7IGk8YXJndW1lbnRzLmxlbmd0aDsgKytpKSB7CiAgICAg
        IGV4cGFuZFByb3BlcnRpZXMoYXJndW1lbnRzW2ldLCBhZGRXYXRjaGVkUHJv
        cGVydHkpOwogICAgfQoKICAgIHRoaXMuX19lbWJlcl9vYnNlcnZlc0JlZm9y
        ZV9fID0gd2F0Y2hlZDsKCiAgICByZXR1cm4gdGhpczsKICB9OwoKICAvKioK
        ICAgIFRoZSBgb25gIGV4dGVuc2lvbiBvZiBKYXZhc2NyaXB0J3MgRnVuY3Rp
        b24gcHJvdG90eXBlIGlzIGF2YWlsYWJsZQogICAgd2hlbiBgRW1iZXIuRVhU
        RU5EX1BST1RPVFlQRVNgIG9yIGBFbWJlci5FWFRFTkRfUFJPVE9UWVBFUy5G
        dW5jdGlvbmAgaXMKICAgIHRydWUsIHdoaWNoIGlzIHRoZSBkZWZhdWx0LgoK
        ICAgIFlvdSBjYW4gbGlzdGVuIGZvciBldmVudHMgc2ltcGx5IGJ5IGFkZGlu
        ZyB0aGUgYG9uYCBjYWxsIHRvIHRoZSBlbmQgb2YKICAgIHlvdXIgbWV0aG9k
        IGRlY2xhcmF0aW9ucyBpbiBjbGFzc2VzIG9yIG1peGlucyB0aGF0IHlvdSB3
        cml0ZS4gRm9yIGV4YW1wbGU6CgogICAgYGBgamF2YXNjcmlwdAogICAgRW1i
        ZXIuTWl4aW4uY3JlYXRlKHsKICAgICAgZG9Tb21ldGhpbmdXaXRoRWxlbWVu
        dDogZnVuY3Rpb24oKSB7CiAgICAgICAgLy8gRXhlY3V0ZXMgd2hlbmV2ZXIg
        dGhlICJkaWRJbnNlcnRFbGVtZW50IiBldmVudCBmaXJlcwogICAgICB9Lm9u
        KCdkaWRJbnNlcnRFbGVtZW50JykKICAgIH0pOwogICAgYGBgCgogICAgU2Vl
        IGBFbWJlci5vbmAuCgogICAgQG1ldGhvZCBvbgogICAgQGZvciBGdW5jdGlv
        bgogICovCiAgRnVuY3Rpb24ucHJvdG90eXBlLm9uID0gZnVuY3Rpb24oKSB7
        CiAgICB2YXIgZXZlbnRzID0gYV9zbGljZS5jYWxsKGFyZ3VtZW50cyk7CiAg
        ICB0aGlzLl9fZW1iZXJfbGlzdGVuc19fID0gZXZlbnRzOwogICAgcmV0dXJu
        IHRoaXM7CiAgfTsKfQoKCn0pKCk7CgoKCihmdW5jdGlvbigpIHsKCn0pKCk7
        CgoKCihmdW5jdGlvbigpIHsKLyoqCkBtb2R1bGUgZW1iZXIKQHN1Ym1vZHVs
        ZSBlbWJlci1ydW50aW1lCiovCgoKLyoqCiAgSW1wbGVtZW50cyBzb21lIHN0
        YW5kYXJkIG1ldGhvZHMgZm9yIGNvbXBhcmluZyBvYmplY3RzLiBBZGQgdGhp
        cyBtaXhpbiB0bwogIGFueSBjbGFzcyB5b3UgY3JlYXRlIHRoYXQgY2FuIGNv
        bXBhcmUgaXRzIGluc3RhbmNlcy4KCiAgWW91IHNob3VsZCBpbXBsZW1lbnQg
        dGhlIGBjb21wYXJlKClgIG1ldGhvZC4KCiAgQGNsYXNzIENvbXBhcmFibGUK
        ICBAbmFtZXNwYWNlIEVtYmVyCiAgQHNpbmNlIEVtYmVyIDAuOQoqLwpFbWJl
        ci5Db21wYXJhYmxlID0gRW1iZXIuTWl4aW4uY3JlYXRlKHsKCiAgLyoqCiAg
        ICBPdmVycmlkZSB0byByZXR1cm4gdGhlIHJlc3VsdCBvZiB0aGUgY29tcGFy
        aXNvbiBvZiB0aGUgdHdvIHBhcmFtZXRlcnMuIFRoZQogICAgY29tcGFyZSBt
        ZXRob2Qgc2hvdWxkIHJldHVybjoKCiAgICAtIGAtMWAgaWYgYGEgPCBiYAog
        ICAgLSBgMGAgaWYgYGEgPT0gYmAKICAgIC0gYDFgIGlmIGBhID4gYmAKCiAg
        ICBEZWZhdWx0IGltcGxlbWVudGF0aW9uIHJhaXNlcyBhbiBleGNlcHRpb24u
        CgogICAgQG1ldGhvZCBjb21wYXJlCiAgICBAcGFyYW0gYSB7T2JqZWN0fSB0
        aGUgZmlyc3Qgb2JqZWN0IHRvIGNvbXBhcmUKICAgIEBwYXJhbSBiIHtPYmpl
        Y3R9IHRoZSBzZWNvbmQgb2JqZWN0IHRvIGNvbXBhcmUKICAgIEByZXR1cm4g
        e0ludGVnZXJ9IHRoZSByZXN1bHQgb2YgdGhlIGNvbXBhcmlzb24KICAqLwog
        IGNvbXBhcmU6IEVtYmVyLnJlcXVpcmVkKEZ1bmN0aW9uKQoKfSk7CgoKfSko
        KTsKCgoKKGZ1bmN0aW9uKCkgewovKioKQG1vZHVsZSBlbWJlcgpAc3VibW9k
        dWxlIGVtYmVyLXJ1bnRpbWUKKi8KCgoKdmFyIGdldCA9IEVtYmVyLmdldCwg
        c2V0ID0gRW1iZXIuc2V0OwoKLyoqCiAgSW1wbGVtZW50cyBzb21lIHN0YW5k
        YXJkIG1ldGhvZHMgZm9yIGNvcHlpbmcgYW4gb2JqZWN0LiBBZGQgdGhpcyBt
        aXhpbiB0bwogIGFueSBvYmplY3QgeW91IGNyZWF0ZSB0aGF0IGNhbiBjcmVh
        dGUgYSBjb3B5IG9mIGl0c2VsZi4gVGhpcyBtaXhpbiBpcwogIGFkZGVkIGF1
        dG9tYXRpY2FsbHkgdG8gdGhlIGJ1aWx0LWluIGFycmF5LgoKICBZb3Ugc2hv
        dWxkIGdlbmVyYWxseSBpbXBsZW1lbnQgdGhlIGBjb3B5KClgIG1ldGhvZCB0
        byByZXR1cm4gYSBjb3B5IG9mIHRoZQogIHJlY2VpdmVyLgoKICBOb3RlIHRo
        YXQgYGZyb3plbkNvcHkoKWAgd2lsbCBvbmx5IHdvcmsgaWYgeW91IGFsc28g
        aW1wbGVtZW50CiAgYEVtYmVyLkZyZWV6YWJsZWAuCgogIEBjbGFzcyBDb3B5
        YWJsZQogIEBuYW1lc3BhY2UgRW1iZXIKICBAc2luY2UgRW1iZXIgMC45Ciov
        CkVtYmVyLkNvcHlhYmxlID0gRW1iZXIuTWl4aW4uY3JlYXRlKHsKCiAgLyoq
        CiAgICBPdmVycmlkZSB0byByZXR1cm4gYSBjb3B5IG9mIHRoZSByZWNlaXZl
        ci4gRGVmYXVsdCBpbXBsZW1lbnRhdGlvbiByYWlzZXMKICAgIGFuIGV4Y2Vw
        dGlvbi4KCiAgICBAbWV0aG9kIGNvcHkKICAgIEBwYXJhbSB7Qm9vbGVhbn0g
        ZGVlcCBpZiBgdHJ1ZWAsIGEgZGVlcCBjb3B5IG9mIHRoZSBvYmplY3Qgc2hv
        dWxkIGJlIG1hZGUKICAgIEByZXR1cm4ge09iamVjdH0gY29weSBvZiByZWNl
        aXZlcgogICovCiAgY29weTogRW1iZXIucmVxdWlyZWQoRnVuY3Rpb24pLAoK
        ICAvKioKICAgIElmIHRoZSBvYmplY3QgaW1wbGVtZW50cyBgRW1iZXIuRnJl
        ZXphYmxlYCwgdGhlbiB0aGlzIHdpbGwgcmV0dXJuIGEgbmV3CiAgICBjb3B5
        IGlmIHRoZSBvYmplY3QgaXMgbm90IGZyb3plbiBhbmQgdGhlIHJlY2VpdmVy
        IGlmIHRoZSBvYmplY3QgaXMgZnJvemVuLgoKICAgIFJhaXNlcyBhbiBleGNl
        cHRpb24gaWYgeW91IHRyeSB0byBjYWxsIHRoaXMgbWV0aG9kIG9uIGEgb2Jq
        ZWN0IHRoYXQgZG9lcwogICAgbm90IHN1cHBvcnQgZnJlZXppbmcuCgogICAg
        WW91IHNob3VsZCB1c2UgdGhpcyBtZXRob2Qgd2hlbmV2ZXIgeW91IHdhbnQg
        YSBjb3B5IG9mIGEgZnJlZXphYmxlIG9iamVjdAogICAgc2luY2UgYSBmcmVl
        emFibGUgb2JqZWN0IGNhbiBzaW1wbHkgcmV0dXJuIGl0c2VsZiB3aXRob3V0
        IGFjdHVhbGx5CiAgICBjb25zdW1pbmcgbW9yZSBtZW1vcnkuCgogICAgQG1l
        dGhvZCBmcm96ZW5Db3B5CiAgICBAcmV0dXJuIHtPYmplY3R9IGNvcHkgb2Yg
        cmVjZWl2ZXIgb3IgcmVjZWl2ZXIKICAqLwogIGZyb3plbkNvcHk6IGZ1bmN0
        aW9uKCkgewogICAgaWYgKEVtYmVyLkZyZWV6YWJsZSAmJiBFbWJlci5GcmVl
        emFibGUuZGV0ZWN0KHRoaXMpKSB7CiAgICAgIHJldHVybiBnZXQodGhpcywg
        J2lzRnJvemVuJykgPyB0aGlzIDogdGhpcy5jb3B5KCkuZnJlZXplKCk7CiAg
        ICB9IGVsc2UgewogICAgICB0aHJvdyBuZXcgRW1iZXIuRXJyb3IoRW1iZXIu
        U3RyaW5nLmZtdCgiJUAgZG9lcyBub3Qgc3VwcG9ydCBmcmVlemluZyIsIFt0
        aGlzXSkpOwogICAgfQogIH0KfSk7Cgp9KSgpOwoKCgooZnVuY3Rpb24oKSB7
        Ci8qKgpAbW9kdWxlIGVtYmVyCkBzdWJtb2R1bGUgZW1iZXItcnVudGltZQoq
        LwoKCnZhciBnZXQgPSBFbWJlci5nZXQsIHNldCA9IEVtYmVyLnNldDsKCi8q
        KgogIFRoZSBgRW1iZXIuRnJlZXphYmxlYCBtaXhpbiBpbXBsZW1lbnRzIHNv
        bWUgYmFzaWMgbWV0aG9kcyBmb3IgbWFya2luZyBhbgogIG9iamVjdCBhcyBm
        cm96ZW4uIE9uY2UgYW4gb2JqZWN0IGlzIGZyb3plbiBpdCBzaG91bGQgYmUg
        cmVhZCBvbmx5LiBObyBjaGFuZ2VzCiAgbWF5IGJlIG1hZGUgdGhlIGludGVy
        bmFsIHN0YXRlIG9mIHRoZSBvYmplY3QuCgogICMjIEVuZm9yY2VtZW50Cgog
        IFRvIGZ1bGx5IHN1cHBvcnQgZnJlZXppbmcgaW4geW91ciBzdWJjbGFzcywg
        eW91IG11c3QgaW5jbHVkZSB0aGlzIG1peGluIGFuZAogIG92ZXJyaWRlIGFu
        eSBtZXRob2QgdGhhdCBtaWdodCBhbHRlciBhbnkgcHJvcGVydHkgb24gdGhl
        IG9iamVjdCB0byBpbnN0ZWFkCiAgcmFpc2UgYW4gZXhjZXB0aW9uLiBZb3Ug
        Y2FuIGNoZWNrIHRoZSBzdGF0ZSBvZiBhbiBvYmplY3QgYnkgY2hlY2tpbmcg
        dGhlCiAgYGlzRnJvemVuYCBwcm9wZXJ0eS4KCiAgQWx0aG91Z2ggZnV0dXJl
        IHZlcnNpb25zIG9mIEphdmFTY3JpcHQgbWF5IHN1cHBvcnQgbGFuZ3VhZ2Ut
        bGV2ZWwgZnJlZXppbmcKICBvYmplY3Qgb2JqZWN0cywgdGhhdCBpcyBub3Qg
        dGhlIGNhc2UgdG9kYXkuIEV2ZW4gaWYgYW4gb2JqZWN0IGlzIGZyZWV6YWJs
        ZSwKICBpdCBpcyBzdGlsbCB0ZWNobmljYWxseSBwb3NzaWJsZSB0byBtb2Rp
        ZnkgdGhlIG9iamVjdCwgZXZlbiB0aG91Z2ggaXQgY291bGQKICBicmVhayBv
        dGhlciBwYXJ0cyBvZiB5b3VyIGFwcGxpY2F0aW9uIHRoYXQgZG8gbm90IGV4
        cGVjdCBhIGZyb3plbiBvYmplY3QgdG8KICBjaGFuZ2UuIEl0IGlzLCB0aGVy
        ZWZvcmUsIHZlcnkgaW1wb3J0YW50IHRoYXQgeW91IGFsd2F5cyByZXNwZWN0
        IHRoZQogIGBpc0Zyb3plbmAgcHJvcGVydHkgb24gYWxsIGZyZWV6YWJsZSBv
        YmplY3RzLgoKICAjIyBFeGFtcGxlIFVzYWdlCgogIFRoZSBleGFtcGxlIGJl
        bG93IHNob3dzIGEgc2ltcGxlIG9iamVjdCB0aGF0IGltcGxlbWVudCB0aGUg
        YEVtYmVyLkZyZWV6YWJsZWAKICBwcm90b2NvbC4KCiAgYGBgamF2YXNjcmlw
        dAogIENvbnRhY3QgPSBFbWJlci5PYmplY3QuZXh0ZW5kKEVtYmVyLkZyZWV6
        YWJsZSwgewogICAgZmlyc3ROYW1lOiBudWxsLAogICAgbGFzdE5hbWU6IG51
        bGwsCgogICAgLy8gc3dhcHMgdGhlIG5hbWVzCiAgICBzd2FwTmFtZXM6IGZ1
        bmN0aW9uKCkgewogICAgICBpZiAodGhpcy5nZXQoJ2lzRnJvemVuJykpIHRo
        cm93IEVtYmVyLkZST1pFTl9FUlJPUjsKICAgICAgdmFyIHRtcCA9IHRoaXMu
        Z2V0KCdmaXJzdE5hbWUnKTsKICAgICAgdGhpcy5zZXQoJ2ZpcnN0TmFtZScs
        IHRoaXMuZ2V0KCdsYXN0TmFtZScpKTsKICAgICAgdGhpcy5zZXQoJ2xhc3RO
        YW1lJywgdG1wKTsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CgogIH0pOwoK
        ICBjID0gQ29udGFjdC5jcmVhdGUoeyBmaXJzdE5hbWU6ICJKb2huIiwgbGFz
        dE5hbWU6ICJEb2UiIH0pOwogIGMuc3dhcE5hbWVzKCk7ICAvLyByZXR1cm5z
        IGMKICBjLmZyZWV6ZSgpOwogIGMuc3dhcE5hbWVzKCk7ICAvLyBFWENFUFRJ
        T04KICBgYGAKCiAgIyMgQ29weWluZwoKICBVc3VhbGx5IHRoZSBgRW1iZXIu
        RnJlZXphYmxlYCBwcm90b2NvbCBpcyBpbXBsZW1lbnRlZCBpbiBjb29wZXJh
        dGlvbiB3aXRoIHRoZQogIGBFbWJlci5Db3B5YWJsZWAgcHJvdG9jb2wsIHdo
        aWNoIGRlZmluZXMgYSBgZnJvemVuQ29weSgpYCBtZXRob2QgdGhhdCB3aWxs
        CiAgcmV0dXJuIGEgZnJvemVuIG9iamVjdCwgaWYgdGhlIG9iamVjdCBpbXBs
        ZW1lbnRzIHRoaXMgbWV0aG9kIGFzIHdlbGwuCgogIEBjbGFzcyBGcmVlemFi
        bGUKICBAbmFtZXNwYWNlIEVtYmVyCiAgQHNpbmNlIEVtYmVyIDAuOQoqLwpF
        bWJlci5GcmVlemFibGUgPSBFbWJlci5NaXhpbi5jcmVhdGUoewoKICAvKioK
        ICAgIFNldCB0byBgdHJ1ZWAgd2hlbiB0aGUgb2JqZWN0IGlzIGZyb3plbi4g
        VXNlIHRoaXMgcHJvcGVydHkgdG8gZGV0ZWN0CiAgICB3aGV0aGVyIHlvdXIg
        b2JqZWN0IGlzIGZyb3plbiBvciBub3QuCgogICAgQHByb3BlcnR5IGlzRnJv
        emVuCiAgICBAdHlwZSBCb29sZWFuCiAgKi8KICBpc0Zyb3plbjogZmFsc2Us
        CgogIC8qKgogICAgRnJlZXplcyB0aGUgb2JqZWN0LiBPbmNlIHRoaXMgbWV0
        aG9kIGhhcyBiZWVuIGNhbGxlZCB0aGUgb2JqZWN0IHNob3VsZAogICAgbm8g
        bG9uZ2VyIGFsbG93IGFueSBwcm9wZXJ0aWVzIHRvIGJlIGVkaXRlZC4KCiAg
        ICBAbWV0aG9kIGZyZWV6ZQogICAgQHJldHVybiB7T2JqZWN0fSByZWNlaXZl
        cgogICovCiAgZnJlZXplOiBmdW5jdGlvbigpIHsKICAgIGlmIChnZXQodGhp
        cywgJ2lzRnJvemVuJykpIHJldHVybiB0aGlzOwogICAgc2V0KHRoaXMsICdp
        c0Zyb3plbicsIHRydWUpOwogICAgcmV0dXJuIHRoaXM7CiAgfQoKfSk7CgpF
        bWJlci5GUk9aRU5fRVJST1IgPSAiRnJvemVuIG9iamVjdCBjYW5ub3QgYmUg
        bW9kaWZpZWQuIjsKCn0pKCk7CgoKCihmdW5jdGlvbigpIHsKLyoqCkBtb2R1
        bGUgZW1iZXIKQHN1Ym1vZHVsZSBlbWJlci1ydW50aW1lCiovCgp2YXIgZm9y
        RWFjaCA9IEVtYmVyLkVudW1lcmFibGVVdGlscy5mb3JFYWNoOwoKLyoqCiAg
        VGhpcyBtaXhpbiBkZWZpbmVzIHRoZSBBUEkgZm9yIG1vZGlmeWluZyBnZW5l
        cmljIGVudW1lcmFibGVzLiBUaGVzZSBtZXRob2RzCiAgY2FuIGJlIGFwcGxp
        ZWQgdG8gYW4gb2JqZWN0IHJlZ2FyZGxlc3Mgb2Ygd2hldGhlciBpdCBpcyBv
        cmRlcmVkIG9yCiAgdW5vcmRlcmVkLgoKICBOb3RlIHRoYXQgYW4gRW51bWVy
        YWJsZSBjYW4gY2hhbmdlIGV2ZW4gaWYgaXQgZG9lcyBub3QgaW1wbGVtZW50
        IHRoaXMgbWl4aW4uCiAgRm9yIGV4YW1wbGUsIGEgTWFwcGVkRW51bWVyYWJs
        ZSBjYW5ub3QgYmUgZGlyZWN0bHkgbW9kaWZpZWQgYnV0IGlmIGl0cwogIHVu
        ZGVybHlpbmcgZW51bWVyYWJsZSBjaGFuZ2VzLCBpdCB3aWxsIGNoYW5nZSBh
        bHNvLgoKICAjIyBBZGRpbmcgT2JqZWN0cwoKICBUbyBhZGQgYW4gb2JqZWN0
        IHRvIGFuIGVudW1lcmFibGUsIHVzZSB0aGUgYGFkZE9iamVjdCgpYCBtZXRo
        b2QuIFRoaXMKICBtZXRob2Qgd2lsbCBvbmx5IGFkZCB0aGUgb2JqZWN0IHRv
        IHRoZSBlbnVtZXJhYmxlIGlmIHRoZSBvYmplY3QgaXMgbm90CiAgYWxyZWFk
        eSBwcmVzZW50IGFuZCBpcyBvZiBhIHR5cGUgc3VwcG9ydGVkIGJ5IHRoZSBl
        bnVtZXJhYmxlLgoKICBgYGBqYXZhc2NyaXB0CiAgc2V0LmFkZE9iamVjdChj
        b250YWN0KTsKICBgYGAKCiAgIyMgUmVtb3ZpbmcgT2JqZWN0cwoKICBUbyBy
        ZW1vdmUgYW4gb2JqZWN0IGZyb20gYW4gZW51bWVyYWJsZSwgdXNlIHRoZSBg
        cmVtb3ZlT2JqZWN0KClgIG1ldGhvZC4gVGhpcwogIHdpbGwgb25seSByZW1v
        dmUgdGhlIG9iamVjdCBpZiBpdCBpcyBwcmVzZW50IGluIHRoZSBlbnVtZXJh
        YmxlLCBvdGhlcndpc2UKICB0aGlzIG1ldGhvZCBoYXMgbm8gZWZmZWN0LgoK
        ICBgYGBqYXZhc2NyaXB0CiAgc2V0LnJlbW92ZU9iamVjdChjb250YWN0KTsK
        ICBgYGAKCiAgIyMgSW1wbGVtZW50aW5nIEluIFlvdXIgT3duIENvZGUKCiAg
        SWYgeW91IGFyZSBpbXBsZW1lbnRpbmcgYW4gb2JqZWN0IGFuZCB3YW50IHRv
        IHN1cHBvcnQgdGhpcyBBUEksIGp1c3QgaW5jbHVkZQogIHRoaXMgbWl4aW4g
        aW4geW91ciBjbGFzcyBhbmQgaW1wbGVtZW50IHRoZSByZXF1aXJlZCBtZXRo
        b2RzLiBJbiB5b3VyIHVuaXQKICB0ZXN0cywgYmUgc3VyZSB0byBhcHBseSB0
        aGUgRW1iZXIuTXV0YWJsZUVudW1lcmFibGVUZXN0cyB0byB5b3VyIG9iamVj
        dC4KCiAgQGNsYXNzIE11dGFibGVFbnVtZXJhYmxlCiAgQG5hbWVzcGFjZSBF
        bWJlcgogIEB1c2VzIEVtYmVyLkVudW1lcmFibGUKKi8KRW1iZXIuTXV0YWJs
        ZUVudW1lcmFibGUgPSBFbWJlci5NaXhpbi5jcmVhdGUoRW1iZXIuRW51bWVy
        YWJsZSwgewoKICAvKioKICAgIF9fUmVxdWlyZWQuX18gWW91IG11c3QgaW1w
        bGVtZW50IHRoaXMgbWV0aG9kIHRvIGFwcGx5IHRoaXMgbWl4aW4uCgogICAg
        QXR0ZW1wdHMgdG8gYWRkIHRoZSBwYXNzZWQgb2JqZWN0IHRvIHRoZSByZWNl
        aXZlciBpZiB0aGUgb2JqZWN0IGlzIG5vdAogICAgYWxyZWFkeSBwcmVzZW50
        IGluIHRoZSBjb2xsZWN0aW9uLiBJZiB0aGUgb2JqZWN0IGlzIHByZXNlbnQs
        IHRoaXMgbWV0aG9kCiAgICBoYXMgbm8gZWZmZWN0LgoKICAgIElmIHRoZSBw
        YXNzZWQgb2JqZWN0IGlzIG9mIGEgdHlwZSBub3Qgc3VwcG9ydGVkIGJ5IHRo
        ZSByZWNlaXZlciwKICAgIHRoZW4gdGhpcyBtZXRob2Qgc2hvdWxkIHJhaXNl
        IGFuIGV4Y2VwdGlvbi4KCiAgICBAbWV0aG9kIGFkZE9iamVjdAogICAgQHBh
        cmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIGFkZCB0byB0aGUg
        ZW51bWVyYWJsZS4KICAgIEByZXR1cm4ge09iamVjdH0gdGhlIHBhc3NlZCBv
        YmplY3QKICAqLwogIGFkZE9iamVjdDogRW1iZXIucmVxdWlyZWQoRnVuY3Rp
        b24pLAoKICAvKioKICAgIEFkZHMgZWFjaCBvYmplY3QgaW4gdGhlIHBhc3Nl
        ZCBlbnVtZXJhYmxlIHRvIHRoZSByZWNlaXZlci4KCiAgICBAbWV0aG9kIGFk
        ZE9iamVjdHMKICAgIEBwYXJhbSB7RW1iZXIuRW51bWVyYWJsZX0gb2JqZWN0
        cyB0aGUgb2JqZWN0cyB0byBhZGQuCiAgICBAcmV0dXJuIHtPYmplY3R9IHJl
        Y2VpdmVyCiAgKi8KICBhZGRPYmplY3RzOiBmdW5jdGlvbihvYmplY3RzKSB7
        CiAgICBFbWJlci5iZWdpblByb3BlcnR5Q2hhbmdlcyh0aGlzKTsKICAgIGZv
        ckVhY2gob2JqZWN0cywgZnVuY3Rpb24ob2JqKSB7IHRoaXMuYWRkT2JqZWN0
        KG9iaik7IH0sIHRoaXMpOwogICAgRW1iZXIuZW5kUHJvcGVydHlDaGFuZ2Vz
        KHRoaXMpOwogICAgcmV0dXJuIHRoaXM7CiAgfSwKCiAgLyoqCiAgICBfX1Jl
        cXVpcmVkLl9fIFlvdSBtdXN0IGltcGxlbWVudCB0aGlzIG1ldGhvZCB0byBh
        cHBseSB0aGlzIG1peGluLgoKICAgIEF0dGVtcHRzIHRvIHJlbW92ZSB0aGUg
        cGFzc2VkIG9iamVjdCBmcm9tIHRoZSByZWNlaXZlciBjb2xsZWN0aW9uIGlm
        IHRoZQogICAgb2JqZWN0IGlzIHByZXNlbnQgaW4gdGhlIGNvbGxlY3Rpb24u
        IElmIHRoZSBvYmplY3QgaXMgbm90IHByZXNlbnQsCiAgICB0aGlzIG1ldGhv
        ZCBoYXMgbm8gZWZmZWN0LgoKICAgIElmIHRoZSBwYXNzZWQgb2JqZWN0IGlz
        IG9mIGEgdHlwZSBub3Qgc3VwcG9ydGVkIGJ5IHRoZSByZWNlaXZlciwKICAg
        IHRoZW4gdGhpcyBtZXRob2Qgc2hvdWxkIHJhaXNlIGFuIGV4Y2VwdGlvbi4K
        CiAgICBAbWV0aG9kIHJlbW92ZU9iamVjdAogICAgQHBhcmFtIHtPYmplY3R9
        IG9iamVjdCBUaGUgb2JqZWN0IHRvIHJlbW92ZSBmcm9tIHRoZSBlbnVtZXJh
        YmxlLgogICAgQHJldHVybiB7T2JqZWN0fSB0aGUgcGFzc2VkIG9iamVjdAog
        ICovCiAgcmVtb3ZlT2JqZWN0OiBFbWJlci5yZXF1aXJlZChGdW5jdGlvbiks
        CgoKICAvKioKICAgIFJlbW92ZXMgZWFjaCBvYmplY3QgaW4gdGhlIHBhc3Nl
        ZCBlbnVtZXJhYmxlIGZyb20gdGhlIHJlY2VpdmVyLgoKICAgIEBtZXRob2Qg
        cmVtb3ZlT2JqZWN0cwogICAgQHBhcmFtIHtFbWJlci5FbnVtZXJhYmxlfSBv
        YmplY3RzIHRoZSBvYmplY3RzIHRvIHJlbW92ZQogICAgQHJldHVybiB7T2Jq
        ZWN0fSByZWNlaXZlcgogICovCiAgcmVtb3ZlT2JqZWN0czogZnVuY3Rpb24o
        b2JqZWN0cykgewogICAgRW1iZXIuYmVnaW5Qcm9wZXJ0eUNoYW5nZXModGhp
        cyk7CiAgICBmb3JFYWNoKG9iamVjdHMsIGZ1bmN0aW9uKG9iaikgeyB0aGlz
        LnJlbW92ZU9iamVjdChvYmopOyB9LCB0aGlzKTsKICAgIEVtYmVyLmVuZFBy
        b3BlcnR5Q2hhbmdlcyh0aGlzKTsKICAgIHJldHVybiB0aGlzOwogIH0KCn0p
        OwoKfSkoKTsKCgoKKGZ1bmN0aW9uKCkgewovKioKQG1vZHVsZSBlbWJlcgpA
        c3VibW9kdWxlIGVtYmVyLXJ1bnRpbWUKKi8KLy8gLi4uLi4uLi4uLi4uLi4u
        Li4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLgov
        LyBDT05TVEFOVFMKLy8KCnZhciBPVVRfT0ZfUkFOR0VfRVhDRVBUSU9OID0g
        IkluZGV4IG91dCBvZiByYW5nZSIgOwp2YXIgRU1QVFkgPSBbXTsKCi8vIC4u
        Li4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4u
        Li4uLi4uLi4uLi4KLy8gSEVMUEVSUwovLwoKdmFyIGdldCA9IEVtYmVyLmdl
        dCwgc2V0ID0gRW1iZXIuc2V0OwoKLyoqCiAgVGhpcyBtaXhpbiBkZWZpbmVz
        IHRoZSBBUEkgZm9yIG1vZGlmeWluZyBhcnJheS1saWtlIG9iamVjdHMuIFRo
        ZXNlIG1ldGhvZHMKICBjYW4gYmUgYXBwbGllZCBvbmx5IHRvIGEgY29sbGVj
        dGlvbiB0aGF0IGtlZXBzIGl0cyBpdGVtcyBpbiBhbiBvcmRlcmVkIHNldC4K
        CiAgTm90ZSB0aGF0IGFuIEFycmF5IGNhbiBjaGFuZ2UgZXZlbiBpZiBpdCBk
        b2VzIG5vdCBpbXBsZW1lbnQgdGhpcyBtaXhpbi4KICBGb3IgZXhhbXBsZSwg
        b25lIG1pZ2h0IGltcGxlbWVudCBhIFNwYXJzZUFycmF5IHRoYXQgY2Fubm90
        IGJlIGRpcmVjdGx5CiAgbW9kaWZpZWQsIGJ1dCBpZiBpdHMgdW5kZXJseWlu
        ZyBlbnVtZXJhYmxlIGNoYW5nZXMsIGl0IHdpbGwgY2hhbmdlIGFsc28uCgog
        IEBjbGFzcyBNdXRhYmxlQXJyYXkKICBAbmFtZXNwYWNlIEVtYmVyCiAgQHVz
        ZXMgRW1iZXIuQXJyYXkKICBAdXNlcyBFbWJlci5NdXRhYmxlRW51bWVyYWJs
        ZQoqLwpFbWJlci5NdXRhYmxlQXJyYXkgPSBFbWJlci5NaXhpbi5jcmVhdGUo
        RW1iZXIuQXJyYXksIEVtYmVyLk11dGFibGVFbnVtZXJhYmxlLCB7CgogIC8q
        KgogICAgX19SZXF1aXJlZC5fXyBZb3UgbXVzdCBpbXBsZW1lbnQgdGhpcyBt
        ZXRob2QgdG8gYXBwbHkgdGhpcyBtaXhpbi4KCiAgICBUaGlzIGlzIG9uZSBv
        ZiB0aGUgcHJpbWl0aXZlcyB5b3UgbXVzdCBpbXBsZW1lbnQgdG8gc3VwcG9y
        dCBgRW1iZXIuQXJyYXlgLgogICAgWW91IHNob3VsZCByZXBsYWNlIGFtdCBv
        YmplY3RzIHN0YXJ0ZWQgYXQgaWR4IHdpdGggdGhlIG9iamVjdHMgaW4gdGhl
        CiAgICBwYXNzZWQgYXJyYXkuIFlvdSBzaG91bGQgYWxzbyBjYWxsIGB0aGlz
        LmVudW1lcmFibGVDb250ZW50RGlkQ2hhbmdlKClgCgogICAgQG1ldGhvZCBy
        ZXBsYWNlCiAgICBAcGFyYW0ge051bWJlcn0gaWR4IFN0YXJ0aW5nIGluZGV4
        IGluIHRoZSBhcnJheSB0byByZXBsYWNlLiBJZgogICAgICBpZHggPj0gbGVu
        Z3RoLCB0aGVuIGFwcGVuZCB0byB0aGUgZW5kIG9mIHRoZSBhcnJheS4KICAg
        IEBwYXJhbSB7TnVtYmVyfSBhbXQgTnVtYmVyIG9mIGVsZW1lbnRzIHRoYXQg
        c2hvdWxkIGJlIHJlbW92ZWQgZnJvbQogICAgICB0aGUgYXJyYXksIHN0YXJ0
        aW5nIGF0ICppZHgqLgogICAgQHBhcmFtIHtBcnJheX0gb2JqZWN0cyBBbiBh
        cnJheSBvZiB6ZXJvIG9yIG1vcmUgb2JqZWN0cyB0aGF0IHNob3VsZCBiZQog
        ICAgICBpbnNlcnRlZCBpbnRvIHRoZSBhcnJheSBhdCAqaWR4KgogICovCiAg
        cmVwbGFjZTogRW1iZXIucmVxdWlyZWQoKSwKCiAgLyoqCiAgICBSZW1vdmUg
        YWxsIGVsZW1lbnRzIGZyb20gc2VsZi4gVGhpcyBpcyB1c2VmdWwgaWYgeW91
        CiAgICB3YW50IHRvIHJldXNlIGFuIGV4aXN0aW5nIGFycmF5IHdpdGhvdXQg
        aGF2aW5nIHRvIHJlY3JlYXRlIGl0LgoKICAgIGBgYGphdmFzY3JpcHQKICAg
        IHZhciBjb2xvcnMgPSBbInJlZCIsICJncmVlbiIsICJibHVlIl07CiAgICBj
        b2xvci5sZW5ndGgoKTsgICAvLyAgMwogICAgY29sb3JzLmNsZWFyKCk7ICAg
        Ly8gIFtdCiAgICBjb2xvcnMubGVuZ3RoKCk7ICAvLyAgMAogICAgYGBgCgog
        ICAgQG1ldGhvZCBjbGVhcgogICAgQHJldHVybiB7RW1iZXIuQXJyYXl9IEFu
        IGVtcHR5IEFycmF5LgogICovCiAgY2xlYXI6IGZ1bmN0aW9uICgpIHsKICAg
        IHZhciBsZW4gPSBnZXQodGhpcywgJ2xlbmd0aCcpOwogICAgaWYgKGxlbiA9
        PT0gMCkgcmV0dXJuIHRoaXM7CiAgICB0aGlzLnJlcGxhY2UoMCwgbGVuLCBF
        TVBUWSk7CiAgICByZXR1cm4gdGhpczsKICB9LAoKICAvKioKICAgIFRoaXMg
        d2lsbCB1c2UgdGhlIHByaW1pdGl2ZSBgcmVwbGFjZSgpYCBtZXRob2QgdG8g
        aW5zZXJ0IGFuIG9iamVjdCBhdCB0aGUKICAgIHNwZWNpZmllZCBpbmRleC4K
        CiAgICBgYGBqYXZhc2NyaXB0CiAgICB2YXIgY29sb3JzID0gWyJyZWQiLCAi
        Z3JlZW4iLCAiYmx1ZSJdOwogICAgY29sb3JzLmluc2VydEF0KDIsICJ5ZWxs
        b3ciKTsgIC8vIFsicmVkIiwgImdyZWVuIiwgInllbGxvdyIsICJibHVlIl0K
        ICAgIGNvbG9ycy5pbnNlcnRBdCg1LCAib3JhbmdlIik7ICAvLyBFcnJvcjog
        SW5kZXggb3V0IG9mIHJhbmdlCiAgICBgYGAKCiAgICBAbWV0aG9kIGluc2Vy
        dEF0CiAgICBAcGFyYW0ge051bWJlcn0gaWR4IGluZGV4IG9mIGluc2VydCB0
        aGUgb2JqZWN0IGF0LgogICAgQHBhcmFtIHtPYmplY3R9IG9iamVjdCBvYmpl
        Y3QgdG8gaW5zZXJ0CiAgICBAcmV0dXJuIHRoaXMKICAqLwogIGluc2VydEF0
        OiBmdW5jdGlvbihpZHgsIG9iamVjdCkgewogICAgaWYgKGlkeCA+IGdldCh0
        aGlzLCAnbGVuZ3RoJykpIHRocm93IG5ldyBFbWJlci5FcnJvcihPVVRfT0Zf
        UkFOR0VfRVhDRVBUSU9OKSA7CiAgICB0aGlzLnJlcGxhY2UoaWR4LCAwLCBb
        b2JqZWN0XSkgOwogICAgcmV0dXJuIHRoaXMgOwogIH0sCgogIC8qKgogICAg
        UmVtb3ZlIGFuIG9iamVjdCBhdCB0aGUgc3BlY2lmaWVkIGluZGV4IHVzaW5n
        IHRoZSBgcmVwbGFjZSgpYCBwcmltaXRpdmUKICAgIG1ldGhvZC4gWW91IGNh
        biBwYXNzIGVpdGhlciBhIHNpbmdsZSBpbmRleCwgb3IgYSBzdGFydCBhbmQg
        YSBsZW5ndGguCgogICAgSWYgeW91IHBhc3MgYSBzdGFydCBhbmQgbGVuZ3Ro
        IHRoYXQgaXMgYmV5b25kIHRoZQogICAgbGVuZ3RoIHRoaXMgbWV0aG9kIHdp
        bGwgdGhyb3cgYW4gYE9VVF9PRl9SQU5HRV9FWENFUFRJT05gLgoKICAgIGBg
        YGphdmFzY3JpcHQKICAgIHZhciBjb2xvcnMgPSBbInJlZCIsICJncmVlbiIs
        ICJibHVlIiwgInllbGxvdyIsICJvcmFuZ2UiXTsKICAgIGNvbG9ycy5yZW1v
        dmVBdCgwKTsgICAgIC8vIFsiZ3JlZW4iLCAiYmx1ZSIsICJ5ZWxsb3ciLCAi
        b3JhbmdlIl0KICAgIGNvbG9ycy5yZW1vdmVBdCgyLCAyKTsgIC8vIFsiZ3Jl
        ZW4iLCAiYmx1ZSJdCiAgICBjb2xvcnMucmVtb3ZlQXQoNCwgMik7ICAvLyBF
        cnJvcjogSW5kZXggb3V0IG9mIHJhbmdlCiAgICBgYGAKCiAgICBAbWV0aG9k
        IHJlbW92ZUF0CiAgICBAcGFyYW0ge051bWJlcn0gc3RhcnQgaW5kZXgsIHN0
        YXJ0IG9mIHJhbmdlCiAgICBAcGFyYW0ge051bWJlcn0gbGVuIGxlbmd0aCBv
        ZiBwYXNzaW5nIHJhbmdlCiAgICBAcmV0dXJuIHtPYmplY3R9IHJlY2VpdmVy
        CiAgKi8KICByZW1vdmVBdDogZnVuY3Rpb24oc3RhcnQsIGxlbikgewogICAg
        aWYgKCdudW1iZXInID09PSB0eXBlb2Ygc3RhcnQpIHsKCiAgICAgIGlmICgo
        c3RhcnQgPCAwKSB8fCAoc3RhcnQgPj0gZ2V0KHRoaXMsICdsZW5ndGgnKSkp
        IHsKICAgICAgICB0aHJvdyBuZXcgRW1iZXIuRXJyb3IoT1VUX09GX1JBTkdF
        X0VYQ0VQVElPTik7CiAgICAgIH0KCiAgICAgIC8vIGZhc3QgY2FzZQogICAg
        ICBpZiAobGVuID09PSB1bmRlZmluZWQpIGxlbiA9IDE7CiAgICAgIHRoaXMu
        cmVwbGFjZShzdGFydCwgbGVuLCBFTVBUWSk7CiAgICB9CgogICAgcmV0dXJu
        IHRoaXMgOwogIH0sCgogIC8qKgogICAgUHVzaCB0aGUgb2JqZWN0IG9udG8g
        dGhlIGVuZCBvZiB0aGUgYXJyYXkuIFdvcmtzIGp1c3QgbGlrZSBgcHVzaCgp
        YCBidXQgaXQKICAgIGlzIEtWTy1jb21wbGlhbnQuCgogICAgYGBgamF2YXNj
        cmlwdAogICAgdmFyIGNvbG9ycyA9IFsicmVkIiwgImdyZWVuIl07CiAgICBj
        b2xvcnMucHVzaE9iamVjdCgiYmxhY2siKTsgICAgIC8vIFsicmVkIiwgImdy
        ZWVuIiwgImJsYWNrIl0KICAgIGNvbG9ycy5wdXNoT2JqZWN0KFsieWVsbG93
        Il0pOyAgLy8gWyJyZWQiLCAiZ3JlZW4iLCBbInllbGxvdyJdXQogICAgYGBg
        CgogICAgQG1ldGhvZCBwdXNoT2JqZWN0CiAgICBAcGFyYW0geyp9IG9iaiBv
        YmplY3QgdG8gcHVzaAogICAgQHJldHVybiBUaGUgc2FtZSBvYmogcGFzc2Vk
        IGFzIHBhcmFtCiAgKi8KICBwdXNoT2JqZWN0OiBmdW5jdGlvbihvYmopIHsK
        ICAgIHRoaXMuaW5zZXJ0QXQoZ2V0KHRoaXMsICdsZW5ndGgnKSwgb2JqKSA7
        CiAgICByZXR1cm4gb2JqOwogIH0sCgogIC8qKgogICAgQWRkIHRoZSBvYmpl
        Y3RzIGluIHRoZSBwYXNzZWQgbnVtZXJhYmxlIHRvIHRoZSBlbmQgb2YgdGhl
        IGFycmF5LiBEZWZlcnMKICAgIG5vdGlmeWluZyBvYnNlcnZlcnMgb2YgdGhl
        IGNoYW5nZSB1bnRpbCBhbGwgb2JqZWN0cyBhcmUgYWRkZWQuCgogICAgYGBg
        amF2YXNjcmlwdAogICAgdmFyIGNvbG9ycyA9IFsicmVkIl07CiAgICBjb2xv
        cnMucHVzaE9iamVjdHMoWyJ5ZWxsb3ciLCAib3JhbmdlIl0pOyAgLy8gWyJy
        ZWQiLCAieWVsbG93IiwgIm9yYW5nZSJdCiAgICBgYGAKCiAgICBAbWV0aG9k
        IHB1c2hPYmplY3RzCiAgICBAcGFyYW0ge0VtYmVyLkVudW1lcmFibGV9IG9i
        amVjdHMgdGhlIG9iamVjdHMgdG8gYWRkCiAgICBAcmV0dXJuIHtFbWJlci5B
        cnJheX0gcmVjZWl2ZXIKICAqLwogIHB1c2hPYmplY3RzOiBmdW5jdGlvbihv
        YmplY3RzKSB7CiAgICBpZiAoIShFbWJlci5FbnVtZXJhYmxlLmRldGVjdChv
        YmplY3RzKSB8fCBFbWJlci5pc0FycmF5KG9iamVjdHMpKSkgewogICAgICB0
        aHJvdyBuZXcgVHlwZUVycm9yKCJNdXN0IHBhc3MgRW1iZXIuRW51bWVyYWJs
        ZSB0byBFbWJlci5NdXRhYmxlQXJyYXkjcHVzaE9iamVjdHMiKTsKICAgIH0K
        ICAgIHRoaXMucmVwbGFjZShnZXQodGhpcywgJ2xlbmd0aCcpLCAwLCBvYmpl
        Y3RzKTsKICAgIHJldHVybiB0aGlzOwogIH0sCgogIC8qKgogICAgUG9wIG9i
        amVjdCBmcm9tIGFycmF5IG9yIG5pbCBpZiBub25lIGFyZSBsZWZ0LiBXb3Jr
        cyBqdXN0IGxpa2UgYHBvcCgpYCBidXQKICAgIGl0IGlzIEtWTy1jb21wbGlh
        bnQuCgogICAgYGBgamF2YXNjcmlwdAogICAgdmFyIGNvbG9ycyA9IFsicmVk
        IiwgImdyZWVuIiwgImJsdWUiXTsKICAgIGNvbG9ycy5wb3BPYmplY3QoKTsg
        ICAvLyAiYmx1ZSIKICAgIGNvbnNvbGUubG9nKGNvbG9ycyk7ICAvLyBbInJl
        ZCIsICJncmVlbiJdCiAgICBgYGAKCiAgICBAbWV0aG9kIHBvcE9iamVjdAog
        ICAgQHJldHVybiBvYmplY3QKICAqLwogIHBvcE9iamVjdDogZnVuY3Rpb24o
        KSB7CiAgICB2YXIgbGVuID0gZ2V0KHRoaXMsICdsZW5ndGgnKSA7CiAgICBp
        ZiAobGVuID09PSAwKSByZXR1cm4gbnVsbCA7CgogICAgdmFyIHJldCA9IHRo
        aXMub2JqZWN0QXQobGVuLTEpIDsKICAgIHRoaXMucmVtb3ZlQXQobGVuLTEs
        IDEpIDsKICAgIHJldHVybiByZXQgOwogIH0sCgogIC8qKgogICAgU2hpZnQg
        YW4gb2JqZWN0IGZyb20gc3RhcnQgb2YgYXJyYXkgb3IgbmlsIGlmIG5vbmUg
        YXJlIGxlZnQuIFdvcmtzIGp1c3QKICAgIGxpa2UgYHNoaWZ0KClgIGJ1dCBp
        dCBpcyBLVk8tY29tcGxpYW50LgoKICAgIGBgYGphdmFzY3JpcHQKICAgIHZh
        ciBjb2xvcnMgPSBbInJlZCIsICJncmVlbiIsICJibHVlIl07CiAgICBjb2xv
        cnMuc2hpZnRPYmplY3QoKTsgIC8vICJyZWQiCiAgICBjb25zb2xlLmxvZyhj
        b2xvcnMpOyAgIC8vIFsiZ3JlZW4iLCAiYmx1ZSJdCiAgICBgYGAKCiAgICBA
        bWV0aG9kIHNoaWZ0T2JqZWN0CiAgICBAcmV0dXJuIG9iamVjdAogICovCiAg
        c2hpZnRPYmplY3Q6IGZ1bmN0aW9uKCkgewogICAgaWYgKGdldCh0aGlzLCAn
        bGVuZ3RoJykgPT09IDApIHJldHVybiBudWxsIDsKICAgIHZhciByZXQgPSB0
        aGlzLm9iamVjdEF0KDApIDsKICAgIHRoaXMucmVtb3ZlQXQoMCkgOwogICAg
        cmV0dXJuIHJldCA7CiAgfSwKCiAgLyoqCiAgICBVbnNoaWZ0IGFuIG9iamVj
        dCB0byBzdGFydCBvZiBhcnJheS4gV29ya3MganVzdCBsaWtlIGB1bnNoaWZ0
        KClgIGJ1dCBpdCBpcwogICAgS1ZPLWNvbXBsaWFudC4KCiAgICBgYGBqYXZh
        c2NyaXB0CiAgICB2YXIgY29sb3JzID0gWyJyZWQiXTsKICAgIGNvbG9ycy51
        bnNoaWZ0T2JqZWN0KCJ5ZWxsb3ciKTsgICAgLy8gWyJ5ZWxsb3ciLCAicmVk
        Il0KICAgIGNvbG9ycy51bnNoaWZ0T2JqZWN0KFsiYmxhY2siXSk7ICAgLy8g
        W1siYmxhY2siXSwgInllbGxvdyIsICJyZWQiXQogICAgYGBgCgogICAgQG1l
        dGhvZCB1bnNoaWZ0T2JqZWN0CiAgICBAcGFyYW0geyp9IG9iaiBvYmplY3Qg
        dG8gdW5zaGlmdAogICAgQHJldHVybiBUaGUgc2FtZSBvYmogcGFzc2VkIGFz
        IHBhcmFtCiAgKi8KICB1bnNoaWZ0T2JqZWN0OiBmdW5jdGlvbihvYmopIHsK
        ICAgIHRoaXMuaW5zZXJ0QXQoMCwgb2JqKSA7CiAgICByZXR1cm4gb2JqIDsK
        ICB9LAoKICAvKioKICAgIEFkZHMgdGhlIG5hbWVkIG9iamVjdHMgdG8gdGhl
        IGJlZ2lubmluZyBvZiB0aGUgYXJyYXkuIERlZmVycyBub3RpZnlpbmcKICAg
        IG9ic2VydmVycyB1bnRpbCBhbGwgb2JqZWN0cyBoYXZlIGJlZW4gYWRkZWQu
        CgogICAgYGBgamF2YXNjcmlwdAogICAgdmFyIGNvbG9ycyA9IFsicmVkIl07
        CiAgICBjb2xvcnMudW5zaGlmdE9iamVjdHMoWyJibGFjayIsICJ3aGl0ZSJd
        KTsgICAvLyBbImJsYWNrIiwgIndoaXRlIiwgInJlZCJdCiAgICBjb2xvcnMu
        dW5zaGlmdE9iamVjdHMoInllbGxvdyIpOyAvLyBUeXBlIEVycm9yOiAndW5k
        ZWZpbmVkJyBpcyBub3QgYSBmdW5jdGlvbgogICAgYGBgCgogICAgQG1ldGhv
        ZCB1bnNoaWZ0T2JqZWN0cwogICAgQHBhcmFtIHtFbWJlci5FbnVtZXJhYmxl
        fSBvYmplY3RzIHRoZSBvYmplY3RzIHRvIGFkZAogICAgQHJldHVybiB7RW1i
        ZXIuQXJyYXl9IHJlY2VpdmVyCiAgKi8KICB1bnNoaWZ0T2JqZWN0czogZnVu
        Y3Rpb24ob2JqZWN0cykgewogICAgdGhpcy5yZXBsYWNlKDAsIDAsIG9iamVj
        dHMpOwogICAgcmV0dXJuIHRoaXM7CiAgfSwKCiAgLyoqCiAgICBSZXZlcnNl
        IG9iamVjdHMgaW4gdGhlIGFycmF5LiBXb3JrcyBqdXN0IGxpa2UgYHJldmVy
        c2UoKWAgYnV0IGl0IGlzCiAgICBLVk8tY29tcGxpYW50LgoKICAgIEBtZXRo
        b2QgcmV2ZXJzZU9iamVjdHMKICAgIEByZXR1cm4ge0VtYmVyLkFycmF5fSBy
        ZWNlaXZlcgogICAqLwogIHJldmVyc2VPYmplY3RzOiBmdW5jdGlvbigpIHsK
        ICAgIHZhciBsZW4gPSBnZXQodGhpcywgJ2xlbmd0aCcpOwogICAgaWYgKGxl
        biA9PT0gMCkgcmV0dXJuIHRoaXM7CiAgICB2YXIgb2JqZWN0cyA9IHRoaXMu
        dG9BcnJheSgpLnJldmVyc2UoKTsKICAgIHRoaXMucmVwbGFjZSgwLCBsZW4s
        IG9iamVjdHMpOwogICAgcmV0dXJuIHRoaXM7CiAgfSwKCiAgLyoqCiAgICBS
        ZXBsYWNlIGFsbCB0aGUgdGhlIHJlY2VpdmVyJ3MgY29udGVudCB3aXRoIGNv
        bnRlbnQgb2YgdGhlIGFyZ3VtZW50LgogICAgSWYgYXJndW1lbnQgaXMgYW4g
        ZW1wdHkgYXJyYXkgcmVjZWl2ZXIgd2lsbCBiZSBjbGVhcmVkLgoKICAgIGBg
        YGphdmFzY3JpcHQKICAgIHZhciBjb2xvcnMgPSBbInJlZCIsICJncmVlbiIs
        ICJibHVlIl07CiAgICBjb2xvcnMuc2V0T2JqZWN0cyhbImJsYWNrIiwgIndo
        aXRlIl0pOyAgLy8gWyJibGFjayIsICJ3aGl0ZSJdCiAgICBjb2xvcnMuc2V0
        T2JqZWN0cyhbXSk7ICAgICAgICAgICAgICAgICAgLy8gW10KICAgIGBgYAoK
        ICAgIEBtZXRob2Qgc2V0T2JqZWN0cwogICAgQHBhcmFtIHtFbWJlci5BcnJh
        eX0gb2JqZWN0cyBhcnJheSB3aG9zZSBjb250ZW50IHdpbGwgYmUgdXNlZCBm
        b3IgcmVwbGFjaW5nCiAgICAgICAgdGhlIGNvbnRlbnQgb2YgdGhlIHJlY2Vp
        dmVyCiAgICBAcmV0dXJuIHtFbWJlci5BcnJheX0gcmVjZWl2ZXIgd2l0aCB0
        aGUgbmV3IGNvbnRlbnQKICAgKi8KICBzZXRPYmplY3RzOiBmdW5jdGlvbihv
        YmplY3RzKSB7CiAgICBpZiAob2JqZWN0cy5sZW5ndGggPT09IDApIHJldHVy
        biB0aGlzLmNsZWFyKCk7CgogICAgdmFyIGxlbiA9IGdldCh0aGlzLCAnbGVu
        Z3RoJyk7CiAgICB0aGlzLnJlcGxhY2UoMCwgbGVuLCBvYmplY3RzKTsKICAg
        IHJldHVybiB0aGlzOwogIH0sCgogIC8vIC4uLi4uLi4uLi4uLi4uLi4uLi4u
        Li4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4KICAvLyBJ
        TVBMRU1FTlQgRW1iZXIuTXV0YWJsZUVudW1lcmFibGUKICAvLwoKICByZW1v
        dmVPYmplY3Q6IGZ1bmN0aW9uKG9iaikgewogICAgdmFyIGxvYyA9IGdldCh0
        aGlzLCAnbGVuZ3RoJykgfHwgMDsKICAgIHdoaWxlKC0tbG9jID49IDApIHsK
        ICAgICAgdmFyIGN1ck9iamVjdCA9IHRoaXMub2JqZWN0QXQobG9jKSA7CiAg
        ICAgIGlmIChjdXJPYmplY3QgPT09IG9iaikgdGhpcy5yZW1vdmVBdChsb2Mp
        IDsKICAgIH0KICAgIHJldHVybiB0aGlzIDsKICB9LAoKICBhZGRPYmplY3Q6
        IGZ1bmN0aW9uKG9iaikgewogICAgaWYgKCF0aGlzLmNvbnRhaW5zKG9iaikp
        IHRoaXMucHVzaE9iamVjdChvYmopOwogICAgcmV0dXJuIHRoaXMgOwogIH0K
        Cn0pOwoKfSkoKTsKCgoKKGZ1bmN0aW9uKCkgewovKioKQG1vZHVsZSBlbWJl
        cgpAc3VibW9kdWxlIGVtYmVyLXJ1bnRpbWUKKi8KCnZhciBnZXQgPSBFbWJl
        ci5nZXQsIHNldCA9IEVtYmVyLnNldDsKCi8qKgpgRW1iZXIuVGFyZ2V0QWN0
        aW9uU3VwcG9ydGAgaXMgYSBtaXhpbiB0aGF0IGNhbiBiZSBpbmNsdWRlZCBp
        biBhIGNsYXNzCnRvIGFkZCBhIGB0cmlnZ2VyQWN0aW9uYCBtZXRob2Qgd2l0
        aCBzZW1hbnRpY3Mgc2ltaWxhciB0byB0aGUgSGFuZGxlYmFycwpge3thY3Rp
        b259fWAgaGVscGVyLiBJbiBub3JtYWwgRW1iZXIgdXNhZ2UsIHRoZSBge3th
        Y3Rpb259fWAgaGVscGVyIGlzCnVzdWFsbHkgdGhlIGJlc3QgY2hvaWNlLiBU
        aGlzIG1peGluIGlzIG1vc3Qgb2Z0ZW4gdXNlZnVsIHdoZW4geW91IGFyZQpk
        b2luZyBtb3JlIGNvbXBsZXggZXZlbnQgaGFuZGxpbmcgaW4gVmlldyBvYmpl
        Y3RzLgoKU2VlIGFsc28gYEVtYmVyLlZpZXdUYXJnZXRBY3Rpb25TdXBwb3J0
        YCwgd2hpY2ggaGFzCnZpZXctYXdhcmUgZGVmYXVsdHMgZm9yIHRhcmdldCBh
        bmQgYWN0aW9uQ29udGV4dC4KCkBjbGFzcyBUYXJnZXRBY3Rpb25TdXBwb3J0
        CkBuYW1lc3BhY2UgRW1iZXIKQGV4dGVuZHMgRW1iZXIuTWl4aW4KKi8KRW1i
        ZXIuVGFyZ2V0QWN0aW9uU3VwcG9ydCA9IEVtYmVyLk1peGluLmNyZWF0ZSh7
        CiAgdGFyZ2V0OiBudWxsLAogIGFjdGlvbjogbnVsbCwKICBhY3Rpb25Db250
        ZXh0OiBudWxsLAoKICB0YXJnZXRPYmplY3Q6IEVtYmVyLmNvbXB1dGVkKGZ1
        bmN0aW9uKCkgewogICAgdmFyIHRhcmdldCA9IGdldCh0aGlzLCAndGFyZ2V0
        Jyk7CgogICAgaWYgKEVtYmVyLnR5cGVPZih0YXJnZXQpID09PSAic3RyaW5n
        IikgewogICAgICB2YXIgdmFsdWUgPSBnZXQodGhpcywgdGFyZ2V0KTsKICAg
        ICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHsgdmFsdWUgPSBnZXQoRW1i
        ZXIubG9va3VwLCB0YXJnZXQpOyB9CiAgICAgIHJldHVybiB2YWx1ZTsKICAg
        IH0gZWxzZSB7CiAgICAgIHJldHVybiB0YXJnZXQ7CiAgICB9CiAgfSkucHJv
        cGVydHkoJ3RhcmdldCcpLAoKICBhY3Rpb25Db250ZXh0T2JqZWN0OiBFbWJl
        ci5jb21wdXRlZChmdW5jdGlvbigpIHsKICAgIHZhciBhY3Rpb25Db250ZXh0
        ID0gZ2V0KHRoaXMsICdhY3Rpb25Db250ZXh0Jyk7CgogICAgaWYgKEVtYmVy
        LnR5cGVPZihhY3Rpb25Db250ZXh0KSA9PT0gInN0cmluZyIpIHsKICAgICAg
        dmFyIHZhbHVlID0gZ2V0KHRoaXMsIGFjdGlvbkNvbnRleHQpOwogICAgICBp
        ZiAodmFsdWUgPT09IHVuZGVmaW5lZCkgeyB2YWx1ZSA9IGdldChFbWJlci5s
        b29rdXAsIGFjdGlvbkNvbnRleHQpOyB9CiAgICAgIHJldHVybiB2YWx1ZTsK
        ICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiBhY3Rpb25Db250ZXh0OwogICAg
        fQogIH0pLnByb3BlcnR5KCdhY3Rpb25Db250ZXh0JyksCgogIC8qKgogIFNl
        bmQgYW4gYGFjdGlvbmAgd2l0aCBhbiBgYWN0aW9uQ29udGV4dGAgdG8gYSBg
        dGFyZ2V0YC4gVGhlIGFjdGlvbiwgYWN0aW9uQ29udGV4dAogIGFuZCB0YXJn
        ZXQgd2lsbCBiZSByZXRyaWV2ZWQgZnJvbSBwcm9wZXJ0aWVzIG9mIHRoZSBv
        YmplY3QuIEZvciBleGFtcGxlOgoKICBgYGBqYXZhc2NyaXB0CiAgQXBwLlNh
        dmVCdXR0b25WaWV3ID0gRW1iZXIuVmlldy5leHRlbmQoRW1iZXIuVGFyZ2V0
        QWN0aW9uU3VwcG9ydCwgewogICAgdGFyZ2V0OiBFbWJlci5jb21wdXRlZC5h
        bGlhcygnY29udHJvbGxlcicpLAogICAgYWN0aW9uOiAnc2F2ZScsCiAgICBh
        Y3Rpb25Db250ZXh0OiBFbWJlci5jb21wdXRlZC5hbGlhcygnY29udGV4dCcp
        LAogICAgY2xpY2s6IGZ1bmN0aW9uKCkgewogICAgICB0aGlzLnRyaWdnZXJB
        Y3Rpb24oKTsgLy8gU2VuZHMgdGhlIGBzYXZlYCBhY3Rpb24sIGFsb25nIHdp
        dGggdGhlIGN1cnJlbnQgY29udGV4dAogICAgICAgICAgICAgICAgICAgICAg
        ICAgICAgLy8gdG8gdGhlIGN1cnJlbnQgY29udHJvbGxlcgogICAgfQogIH0p
        OwogIGBgYAoKICBUaGUgYHRhcmdldGAsIGBhY3Rpb25gLCBhbmQgYGFjdGlv
        bkNvbnRleHRgIGNhbiBiZSBwcm92aWRlZCBhcyBwcm9wZXJ0aWVzIG9mCiAg
        YW4gb3B0aW9uYWwgb2JqZWN0IGFyZ3VtZW50IHRvIGB0cmlnZ2VyQWN0aW9u
        YCBhcyB3ZWxsLgoKICBgYGBqYXZhc2NyaXB0CiAgQXBwLlNhdmVCdXR0b25W
        aWV3ID0gRW1iZXIuVmlldy5leHRlbmQoRW1iZXIuVGFyZ2V0QWN0aW9uU3Vw
        cG9ydCwgewogICAgY2xpY2s6IGZ1bmN0aW9uKCkgewogICAgICB0aGlzLnRy
        aWdnZXJBY3Rpb24oewogICAgICAgIGFjdGlvbjogJ3NhdmUnLAogICAgICAg
        IHRhcmdldDogdGhpcy5nZXQoJ2NvbnRyb2xsZXInKSwKICAgICAgICBhY3Rp
        b25Db250ZXh0OiB0aGlzLmdldCgnY29udGV4dCcpLAogICAgICB9KTsgLy8g
        U2VuZHMgdGhlIGBzYXZlYCBhY3Rpb24sIGFsb25nIHdpdGggdGhlIGN1cnJl
        bnQgY29udGV4dAogICAgICAgICAgLy8gdG8gdGhlIGN1cnJlbnQgY29udHJv
        bGxlcgogICAgfQogIH0pOwogIGBgYAoKICBUaGUgYGFjdGlvbkNvbnRleHRg
        IGRlZmF1bHRzIHRvIHRoZSBvYmplY3QgeW91IG1peGluZyBgVGFyZ2V0QWN0
        aW9uU3VwcG9ydGAgaW50by4KICBCdXQgYHRhcmdldGAgYW5kIGBhY3Rpb25g
        IG11c3QgYmUgc3BlY2lmaWVkIGVpdGhlciBhcyBwcm9wZXJ0aWVzIG9yIHdp
        dGggdGhlIGFyZ3VtZW50CiAgdG8gYHRyaWdnZXJBY3Rpb25gLCBvciBhIGNv
        bWJpbmF0aW9uOgoKICBgYGBqYXZhc2NyaXB0CiAgQXBwLlNhdmVCdXR0b25W
        aWV3ID0gRW1iZXIuVmlldy5leHRlbmQoRW1iZXIuVGFyZ2V0QWN0aW9uU3Vw
        cG9ydCwgewogICAgdGFyZ2V0OiBFbWJlci5jb21wdXRlZC5hbGlhcygnY29u
        dHJvbGxlcicpLAogICAgY2xpY2s6IGZ1bmN0aW9uKCkgewogICAgICB0aGlz
        LnRyaWdnZXJBY3Rpb24oewogICAgICAgIGFjdGlvbjogJ3NhdmUnCiAgICAg
        IH0pOyAvLyBTZW5kcyB0aGUgYHNhdmVgIGFjdGlvbiwgYWxvbmcgd2l0aCBh
        IHJlZmVyZW5jZSB0byBgdGhpc2AsCiAgICAgICAgICAvLyB0byB0aGUgY3Vy
        cmVudCBjb250cm9sbGVyCiAgICB9CiAgfSk7CiAgYGBgCgogIEBtZXRob2Qg
        dHJpZ2dlckFjdGlvbgogIEBwYXJhbSBvcHRzIHtIYXNofSAob3B0aW9uYWws
        IHdpdGggdGhlIG9wdGlvbmFsIGtleXMgYWN0aW9uLCB0YXJnZXQgYW5kL29y
        IGFjdGlvbkNvbnRleHQpCiAgQHJldHVybiB7Qm9vbGVhbn0gdHJ1ZSBpZiB0
        aGUgYWN0aW9uIHdhcyBzZW50IHN1Y2Nlc3NmdWxseSBhbmQgZGlkIG5vdCBy
        ZXR1cm4gZmFsc2UKICAqLwogIHRyaWdnZXJBY3Rpb246IGZ1bmN0aW9uKG9w
        dHMpIHsKICAgIG9wdHMgPSBvcHRzIHx8IHt9OwogICAgdmFyIGFjdGlvbiA9
        IG9wdHMuYWN0aW9uIHx8IGdldCh0aGlzLCAnYWN0aW9uJyksCiAgICAgICAg
        dGFyZ2V0ID0gb3B0cy50YXJnZXQgfHwgZ2V0KHRoaXMsICd0YXJnZXRPYmpl
        Y3QnKSwKICAgICAgICBhY3Rpb25Db250ZXh0ID0gb3B0cy5hY3Rpb25Db250
        ZXh0OwoKICAgIGZ1bmN0aW9uIGFyZ3Mob3B0aW9ucywgYWN0aW9uTmFtZSkg
        ewogICAgICB2YXIgcmV0ID0gW107CiAgICAgIGlmIChhY3Rpb25OYW1lKSB7
        IHJldC5wdXNoKGFjdGlvbk5hbWUpOyB9CgogICAgICByZXR1cm4gcmV0LmNv
        bmNhdChvcHRpb25zKTsKICAgIH0KCiAgICBpZiAodHlwZW9mIGFjdGlvbkNv
        bnRleHQgPT09ICd1bmRlZmluZWQnKSB7CiAgICAgIGFjdGlvbkNvbnRleHQg
        PSBnZXQodGhpcywgJ2FjdGlvbkNvbnRleHRPYmplY3QnKSB8fCB0aGlzOwog
        ICAgfQoKICAgIGlmICh0YXJnZXQgJiYgYWN0aW9uKSB7CiAgICAgIHZhciBy
        ZXQ7CgogICAgICBpZiAodGFyZ2V0LnNlbmQpIHsKICAgICAgICByZXQgPSB0
        YXJnZXQuc2VuZC5hcHBseSh0YXJnZXQsIGFyZ3MoYWN0aW9uQ29udGV4dCwg
        YWN0aW9uKSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgRW1iZXIuYXNzZXJ0
        KCJUaGUgYWN0aW9uICciICsgYWN0aW9uICsgIicgZGlkIG5vdCBleGlzdCBv
        biAiICsgdGFyZ2V0LCB0eXBlb2YgdGFyZ2V0W2FjdGlvbl0gPT09ICdmdW5j
        dGlvbicpOwogICAgICAgIHJldCA9IHRhcmdldFthY3Rpb25dLmFwcGx5KHRh
        cmdldCwgYXJncyhhY3Rpb25Db250ZXh0KSk7CiAgICAgIH0KCiAgICAgIGlm
        IChyZXQgIT09IGZhbHNlKSByZXQgPSB0cnVlOwoKICAgICAgcmV0dXJuIHJl
        dDsKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICB9
        Cn0pOwoKfSkoKTsKCgoKKGZ1bmN0aW9uKCkgewovKioKQG1vZHVsZSBlbWJl
        cgpAc3VibW9kdWxlIGVtYmVyLXJ1bnRpbWUKKi8KCi8qKgogIFRoaXMgbWl4
        aW4gYWxsb3dzIGZvciBFbWJlciBvYmplY3RzIHRvIHN1YnNjcmliZSB0byBh
        bmQgZW1pdCBldmVudHMuCgogIGBgYGphdmFzY3JpcHQKICBBcHAuUGVyc29u
        ID0gRW1iZXIuT2JqZWN0LmV4dGVuZChFbWJlci5FdmVudGVkLCB7CiAgICBn
        cmVldDogZnVuY3Rpb24oKSB7CiAgICAgIC8vIC4uLgogICAgICB0aGlzLnRy
        aWdnZXIoJ2dyZWV0Jyk7CiAgICB9CiAgfSk7CgogIHZhciBwZXJzb24gPSBB
        cHAuUGVyc29uLmNyZWF0ZSgpOwoKICBwZXJzb24ub24oJ2dyZWV0JywgZnVu
        Y3Rpb24oKSB7CiAgICBjb25zb2xlLmxvZygnT3VyIHBlcnNvbiBoYXMgZ3Jl
        ZXRlZCcpOwogIH0pOwoKICBwZXJzb24uZ3JlZXQoKTsKCiAgLy8gb3V0cHV0
        czogJ091ciBwZXJzb24gaGFzIGdyZWV0ZWQnCiAgYGBgCgogIFlvdSBjYW4g
        YWxzbyBjaGFpbiBtdWx0aXBsZSBldmVudCBzdWJzY3JpcHRpb25zOgoKICBg
        YGBqYXZhc2NyaXB0CiAgcGVyc29uLm9uKCdncmVldCcsIGZ1bmN0aW9uKCkg
        ewogICAgY29uc29sZS5sb2coJ091ciBwZXJzb24gaGFzIGdyZWV0ZWQnKTsK
        ICB9KS5vbmUoJ2dyZWV0JywgZnVuY3Rpb24oKSB7CiAgICBjb25zb2xlLmxv
        ZygnT2ZmZXIgb25lLXRpbWUgc3BlY2lhbCcpOwogIH0pLm9mZignZXZlbnQn
        LCB0aGlzLCBmb3JnZXRUaGlzKTsKICBgYGAKCiAgQGNsYXNzIEV2ZW50ZWQK
        ICBAbmFtZXNwYWNlIEVtYmVyCiAqLwpFbWJlci5FdmVudGVkID0gRW1iZXIu
        TWl4aW4uY3JlYXRlKHsKCiAgLyoqCiAgIFN1YnNjcmliZXMgdG8gYSBuYW1l
        ZCBldmVudCB3aXRoIGdpdmVuIGZ1bmN0aW9uLgoKICAgYGBgamF2YXNjcmlw
        dAogICBwZXJzb24ub24oJ2RpZExvYWQnLCBmdW5jdGlvbigpIHsKICAgICAv
        LyBmaXJlZCBvbmNlIHRoZSBwZXJzb24gaGFzIGxvYWRlZAogICB9KTsKICAg
        YGBgCgogICBBbiBvcHRpb25hbCB0YXJnZXQgY2FuIGJlIHBhc3NlZCBpbiBh
        cyB0aGUgMm5kIGFyZ3VtZW50IHRoYXQgd2lsbAogICBiZSBzZXQgYXMgdGhl
        ICJ0aGlzIiBmb3IgdGhlIGNhbGxiYWNrLiBUaGlzIGlzIGEgZ29vZCB3YXkg
        dG8gZ2l2ZSB5b3VyCiAgIGZ1bmN0aW9uIGFjY2VzcyB0byB0aGUgb2JqZWN0
        IHRyaWdnZXJpbmcgdGhlIGV2ZW50LiBXaGVuIHRoZSB0YXJnZXQKICAgcGFy
        YW1ldGVyIGlzIHVzZWQgdGhlIGNhbGxiYWNrIGJlY29tZXMgdGhlIHRoaXJk
        IGFyZ3VtZW50LgoKICAgQG1ldGhvZCBvbgogICBAcGFyYW0ge1N0cmluZ30g
        bmFtZSBUaGUgbmFtZSBvZiB0aGUgZXZlbnQKICAgQHBhcmFtIHtPYmplY3R9
        IFt0YXJnZXRdIFRoZSAidGhpcyIgYmluZGluZyBmb3IgdGhlIGNhbGxiYWNr
        CiAgIEBwYXJhbSB7RnVuY3Rpb259IG1ldGhvZCBUaGUgY2FsbGJhY2sgdG8g
        ZXhlY3V0ZQogICBAcmV0dXJuIHRoaXMKICAqLwogIG9uOiBmdW5jdGlvbihu
        YW1lLCB0YXJnZXQsIG1ldGhvZCkgewogICAgRW1iZXIuYWRkTGlzdGVuZXIo
        dGhpcywgbmFtZSwgdGFyZ2V0LCBtZXRob2QpOwogICAgcmV0dXJuIHRoaXM7
        CiAgfSwKCiAgLyoqCiAgICBTdWJzY3JpYmVzIGEgZnVuY3Rpb24gdG8gYSBu
        YW1lZCBldmVudCBhbmQgdGhlbiBjYW5jZWxzIHRoZSBzdWJzY3JpcHRpb24K
        ICAgIGFmdGVyIHRoZSBmaXJzdCB0aW1lIHRoZSBldmVudCBpcyB0cmlnZ2Vy
        ZWQuIEl0IGlzIGdvb2QgdG8gdXNlIGBgb25lYGAgd2hlbgogICAgeW91IG9u
        bHkgY2FyZSBhYm91dCB0aGUgZmlyc3QgdGltZSBhbiBldmVudCBoYXMgdGFr
        ZW4gcGxhY2UuCgogICAgVGhpcyBmdW5jdGlvbiB0YWtlcyBhbiBvcHRpb25h
        bCAybmQgYXJndW1lbnQgdGhhdCB3aWxsIGJlY29tZSB0aGUgInRoaXMiCiAg
        ICB2YWx1ZSBmb3IgdGhlIGNhbGxiYWNrLiBJZiB0aGlzIGFyZ3VtZW50IGlz
        IHBhc3NlZCB0aGVuIHRoZSAzcmQgYXJndW1lbnQKICAgIGJlY29tZXMgdGhl
        IGZ1bmN0aW9uLgoKICAgIEBtZXRob2Qgb25lCiAgICBAcGFyYW0ge1N0cmlu
        Z30gbmFtZSBUaGUgbmFtZSBvZiB0aGUgZXZlbnQKICAgIEBwYXJhbSB7T2Jq
        ZWN0fSBbdGFyZ2V0XSBUaGUgInRoaXMiIGJpbmRpbmcgZm9yIHRoZSBjYWxs
        YmFjawogICAgQHBhcmFtIHtGdW5jdGlvbn0gbWV0aG9kIFRoZSBjYWxsYmFj
        ayB0byBleGVjdXRlCiAgICBAcmV0dXJuIHRoaXMKICAqLwogIG9uZTogZnVu
        Y3Rpb24obmFtZSwgdGFyZ2V0LCBtZXRob2QpIHsKICAgIGlmICghbWV0aG9k
        KSB7CiAgICAgIG1ldGhvZCA9IHRhcmdldDsKICAgICAgdGFyZ2V0ID0gbnVs
        bDsKICAgIH0KCiAgICBFbWJlci5hZGRMaXN0ZW5lcih0aGlzLCBuYW1lLCB0
        YXJnZXQsIG1ldGhvZCwgdHJ1ZSk7CiAgICByZXR1cm4gdGhpczsKICB9LAoK
        ICAvKioKICAgIFRyaWdnZXJzIGEgbmFtZWQgZXZlbnQgZm9yIHRoZSBvYmpl
        Y3QuIEFueSBhZGRpdGlvbmFsIGFyZ3VtZW50cwogICAgd2lsbCBiZSBwYXNz
        ZWQgYXMgcGFyYW1ldGVycyB0byB0aGUgZnVuY3Rpb25zIHRoYXQgYXJlIHN1
        YnNjcmliZWQgdG8gdGhlCiAgICBldmVudC4KCiAgICBgYGBqYXZhc2NyaXB0
        CiAgICBwZXJzb24ub24oJ2RpZEVhdCcsIGZ1bmN0aW9uKGZvb2QpIHsKICAg
        ICAgY29uc29sZS5sb2coJ3BlcnNvbiBhdGUgc29tZSAnICsgZm9vZCk7CiAg
        ICB9KTsKCiAgICBwZXJzb24udHJpZ2dlcignZGlkRWF0JywgJ2Jyb2Njb2xp
        Jyk7CgogICAgLy8gb3V0cHV0czogcGVyc29uIGF0ZSBzb21lIGJyb2Njb2xp
        CiAgICBgYGAKICAgIEBtZXRob2QgdHJpZ2dlcgogICAgQHBhcmFtIHtTdHJp
        bmd9IG5hbWUgVGhlIG5hbWUgb2YgdGhlIGV2ZW50CiAgICBAcGFyYW0ge09i
        amVjdC4uLn0gYXJncyBPcHRpb25hbCBhcmd1bWVudHMgdG8gcGFzcyBvbgog
        ICovCiAgdHJpZ2dlcjogZnVuY3Rpb24obmFtZSkgewogICAgdmFyIGFyZ3Mg
        PSBbXSwgaSwgbDsKICAgIGZvciAoaSA9IDEsIGwgPSBhcmd1bWVudHMubGVu
        Z3RoOyBpIDwgbDsgaSsrKSB7CiAgICAgIGFyZ3MucHVzaChhcmd1bWVudHNb
        aV0pOwogICAgfQogICAgRW1iZXIuc2VuZEV2ZW50KHRoaXMsIG5hbWUsIGFy
        Z3MpOwogIH0sCgogIC8qKgogICAgQ2FuY2VscyBzdWJzY3JpcHRpb24gZm9y
        IGdpdmVuIG5hbWUsIHRhcmdldCwgYW5kIG1ldGhvZC4KCiAgICBAbWV0aG9k
        IG9mZgogICAgQHBhcmFtIHtTdHJpbmd9IG5hbWUgVGhlIG5hbWUgb2YgdGhl
        IGV2ZW50CiAgICBAcGFyYW0ge09iamVjdH0gdGFyZ2V0IFRoZSB0YXJnZXQg
        b2YgdGhlIHN1YnNjcmlwdGlvbgogICAgQHBhcmFtIHtGdW5jdGlvbn0gbWV0
        aG9kIFRoZSBmdW5jdGlvbiBvZiB0aGUgc3Vic2NyaXB0aW9uCiAgICBAcmV0
        dXJuIHRoaXMKICAqLwogIG9mZjogZnVuY3Rpb24obmFtZSwgdGFyZ2V0LCBt
        ZXRob2QpIHsKICAgIEVtYmVyLnJlbW92ZUxpc3RlbmVyKHRoaXMsIG5hbWUs
        IHRhcmdldCwgbWV0aG9kKTsKICAgIHJldHVybiB0aGlzOwogIH0sCgogIC8q
        KgogICAgQ2hlY2tzIHRvIHNlZSBpZiBvYmplY3QgaGFzIGFueSBzdWJzY3Jp
        cHRpb25zIGZvciBuYW1lZCBldmVudC4KCiAgICBAbWV0aG9kIGhhcwogICAg
        QHBhcmFtIHtTdHJpbmd9IG5hbWUgVGhlIG5hbWUgb2YgdGhlIGV2ZW50CiAg
        ICBAcmV0dXJuIHtCb29sZWFufSBkb2VzIHRoZSBvYmplY3QgaGF2ZSBhIHN1
        YnNjcmlwdGlvbiBmb3IgZXZlbnQKICAgKi8KICBoYXM6IGZ1bmN0aW9uKG5h
        bWUpIHsKICAgIHJldHVybiBFbWJlci5oYXNMaXN0ZW5lcnModGhpcywgbmFt
        ZSk7CiAgfQp9KTsKCn0pKCk7CgoKCihmdW5jdGlvbigpIHsKdmFyIFJTVlAg
        PSByZXF1aXJlTW9kdWxlKCJyc3ZwIik7CgppZiAoRW1iZXIuRkVBVFVSRVNb
        J2VtYmVyLXJ1bnRpbWUtdGVzdC1mcmllbmRseS1wcm9taXNlcyddKSB7Cgog
        IHZhciBhc3luY1N0YXJ0ID0gZnVuY3Rpb24oKSB7CiAgICBpZiAoRW1iZXIu
        VGVzdCAmJiBFbWJlci5UZXN0LmFkYXB0ZXIpIHsKICAgICAgRW1iZXIuVGVz
        dC5hZGFwdGVyLmFzeW5jU3RhcnQoKTsKICAgIH0KICB9OwoKICB2YXIgYXN5
        bmNFbmQgPSBmdW5jdGlvbigpIHsKICAgIGlmIChFbWJlci5UZXN0ICYmIEVt
        YmVyLlRlc3QuYWRhcHRlcikgewogICAgICBFbWJlci5UZXN0LmFkYXB0ZXIu
        YXN5bmNFbmQoKTsKICAgIH0KICB9OwoKICBSU1ZQLmNvbmZpZ3VyZSgnYXN5
        bmMnLCBmdW5jdGlvbihjYWxsYmFjaywgcHJvbWlzZSkgewogICAgdmFyIGFz
        eW5jID0gIUVtYmVyLnJ1bi5jdXJyZW50UnVuTG9vcDsKCiAgICBpZiAoRW1i
        ZXIudGVzdGluZyAmJiBhc3luYykgeyBhc3luY1N0YXJ0KCk7IH0KCiAgICBF
        bWJlci5ydW4uYmFja2J1cm5lci5zY2hlZHVsZSgnYWN0aW9ucycsIGZ1bmN0
        aW9uKCl7CiAgICAgIGlmIChFbWJlci50ZXN0aW5nICYmIGFzeW5jKSB7IGFz
        eW5jRW5kKCk7IH0KICAgICAgY2FsbGJhY2socHJvbWlzZSk7CiAgICB9KTsK
        ICB9KTsKfSBlbHNlIHsKICBSU1ZQLmNvbmZpZ3VyZSgnYXN5bmMnLCBmdW5j
        dGlvbihjYWxsYmFjaywgcHJvbWlzZSkgewogICAgRW1iZXIucnVuLmJhY2ti
        dXJuZXIuc2NoZWR1bGUoJ2FjdGlvbnMnLCBmdW5jdGlvbigpewogICAgICBj
        YWxsYmFjayhwcm9taXNlKTsKICAgIH0pOwogIH0pOwp9CgpSU1ZQLlByb21p
        c2UucHJvdG90eXBlLmZhaWwgPSBmdW5jdGlvbihjYWxsYmFjaywgbGFiZWwp
        ewogIEVtYmVyLmRlcHJlY2F0ZSgnUlNWUC5Qcm9taXNlLmZhaWwgaGFzIGJl
        ZW4gcmVuYW1lZCBhcyBSU1ZQLlByb21pc2UuY2F0Y2gnKTsKICByZXR1cm4g
        dGhpc1snY2F0Y2gnXShjYWxsYmFjaywgbGFiZWwpOwp9OwoKLyoqCkBtb2R1
        bGUgZW1iZXIKQHN1Ym1vZHVsZSBlbWJlci1ydW50aW1lCiovCgp2YXIgZ2V0
        ID0gRW1iZXIuZ2V0OwoKLyoqCiAgQGNsYXNzIERlZmVycmVkCiAgQG5hbWVz
        cGFjZSBFbWJlcgogKi8KRW1iZXIuRGVmZXJyZWRNaXhpbiA9IEVtYmVyLk1p
        eGluLmNyZWF0ZSh7CiAgLyoqCiAgICBBZGQgaGFuZGxlcnMgdG8gYmUgY2Fs
        bGVkIHdoZW4gdGhlIERlZmVycmVkIG9iamVjdCBpcyByZXNvbHZlZCBvciBy
        ZWplY3RlZC4KCiAgICBAbWV0aG9kIHRoZW4KICAgIEBwYXJhbSB7RnVuY3Rp
        b259IHJlc29sdmUgYSBjYWxsYmFjayBmdW5jdGlvbiB0byBiZSBjYWxsZWQg
        d2hlbiBkb25lCiAgICBAcGFyYW0ge0Z1bmN0aW9ufSByZWplY3QgIGEgY2Fs
        bGJhY2sgZnVuY3Rpb24gdG8gYmUgY2FsbGVkIHdoZW4gZmFpbGVkCiAgKi8K
        ICB0aGVuOiBmdW5jdGlvbihyZXNvbHZlLCByZWplY3QsIGxhYmVsKSB7CiAg
        ICB2YXIgZGVmZXJyZWQsIHByb21pc2UsIGVudGl0eTsKCiAgICBlbnRpdHkg
        PSB0aGlzOwogICAgZGVmZXJyZWQgPSBnZXQodGhpcywgJ19kZWZlcnJlZCcp
        OwogICAgcHJvbWlzZSA9IGRlZmVycmVkLnByb21pc2U7CgogICAgZnVuY3Rp
        b24gZnVsZmlsbG1lbnRIYW5kbGVyKGZ1bGZpbGxtZW50KSB7CiAgICAgIGlm
        IChmdWxmaWxsbWVudCA9PT0gcHJvbWlzZSkgewogICAgICAgIHJldHVybiBy
        ZXNvbHZlKGVudGl0eSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJu
        IHJlc29sdmUoZnVsZmlsbG1lbnQpOwogICAgICB9CiAgICB9CgogICAgcmV0
        dXJuIHByb21pc2UudGhlbihyZXNvbHZlICYmIGZ1bGZpbGxtZW50SGFuZGxl
        ciwgcmVqZWN0LCBsYWJlbCk7CiAgfSwKCiAgLyoqCiAgICBSZXNvbHZlIGEg
        RGVmZXJyZWQgb2JqZWN0IGFuZCBjYWxsIGFueSBgZG9uZUNhbGxiYWNrc2Ag
        d2l0aCB0aGUgZ2l2ZW4gYXJncy4KCiAgICBAbWV0aG9kIHJlc29sdmUKICAq
        LwogIHJlc29sdmU6IGZ1bmN0aW9uKHZhbHVlKSB7CiAgICB2YXIgZGVmZXJy
        ZWQsIHByb21pc2U7CgogICAgZGVmZXJyZWQgPSBnZXQodGhpcywgJ19kZWZl
        cnJlZCcpOwogICAgcHJvbWlzZSA9IGRlZmVycmVkLnByb21pc2U7CgogICAg
        aWYgKHZhbHVlID09PSB0aGlzKSB7CiAgICAgIGRlZmVycmVkLnJlc29sdmUo
        cHJvbWlzZSk7CiAgICB9IGVsc2UgewogICAgICBkZWZlcnJlZC5yZXNvbHZl
        KHZhbHVlKTsKICAgIH0KICB9LAoKICAvKioKICAgIFJlamVjdCBhIERlZmVy
        cmVkIG9iamVjdCBhbmQgY2FsbCBhbnkgYGZhaWxDYWxsYmFja3NgIHdpdGgg
        dGhlIGdpdmVuIGFyZ3MuCgogICAgQG1ldGhvZCByZWplY3QKICAqLwogIHJl
        amVjdDogZnVuY3Rpb24odmFsdWUpIHsKICAgIGdldCh0aGlzLCAnX2RlZmVy
        cmVkJykucmVqZWN0KHZhbHVlKTsKICB9LAoKICBfZGVmZXJyZWQ6IEVtYmVy
        LmNvbXB1dGVkKGZ1bmN0aW9uKCkgewogICAgcmV0dXJuIFJTVlAuZGVmZXIo
        J0VtYmVyOiBEZWZlcnJlZE1peGluIC0gJyArIHRoaXMpOwogIH0pCn0pOwoK
        Cn0pKCk7CgoKCihmdW5jdGlvbigpIHsKLyoqCkBtb2R1bGUgZW1iZXIKQHN1
        Ym1vZHVsZSBlbWJlci1ydW50aW1lCiovCgp2YXIgZ2V0ID0gRW1iZXIuZ2V0
        LCB0eXBlT2YgPSBFbWJlci50eXBlT2Y7CgovKioKICBUaGUgYEVtYmVyLkFj
        dGlvbkhhbmRsZXJgIG1peGluIGltcGxlbWVudHMgc3VwcG9ydCBmb3IgbW92
        aW5nIGFuIGBhY3Rpb25zYAogIHByb3BlcnR5IHRvIGFuIGBfYWN0aW9uc2Ag
        cHJvcGVydHkgYXQgZXh0ZW5kIHRpbWUsIGFuZCBhZGRpbmcgYF9hY3Rpb25z
        YAogIHRvIHRoZSBvYmplY3QncyBtZXJnZWRQcm9wZXJ0aWVzIGxpc3QuCgog
        IGBFbWJlci5BY3Rpb25IYW5kbGVyYCBpcyB1c2VkIGludGVybmFsbHkgYnkg
        RW1iZXIgaW4gIGBFbWJlci5WaWV3YCwKICBgRW1iZXIuQ29udHJvbGxlcmAs
        IGFuZCBgRW1iZXIuUm91dGVgLgoKICBAY2xhc3MgQWN0aW9uSGFuZGxlcgog
        IEBuYW1lc3BhY2UgRW1iZXIKKi8KRW1iZXIuQWN0aW9uSGFuZGxlciA9IEVt
        YmVyLk1peGluLmNyZWF0ZSh7CiAgbWVyZ2VkUHJvcGVydGllczogWydfYWN0
        aW9ucyddLAoKICAvKioKICAgIFRoZSBjb2xsZWN0aW9uIG9mIGZ1bmN0aW9u
        cywga2V5ZWQgYnkgbmFtZSwgYXZhaWxhYmxlIG9uIHRoaXMKICAgIGBBY3Rp
        b25IYW5kbGVyYCBhcyBhY3Rpb24gdGFyZ2V0cy4KCiAgICBUaGVzZSBmdW5j
        dGlvbnMgd2lsbCBiZSBpbnZva2VkIHdoZW4gYSBtYXRjaGluZyBge3thY3Rp
        b259fWAgaXMgdHJpZ2dlcmVkCiAgICBmcm9tIHdpdGhpbiBhIHRlbXBsYXRl
        IGFuZCB0aGUgYXBwbGljYXRpb24ncyBjdXJyZW50IHJvdXRlIGlzIHRoaXMg
        cm91dGUuCgogICAgQWN0aW9ucyBjYW4gYWxzbyBiZSBpbnZva2VkIGZyb20g
        b3RoZXIgcGFydHMgb2YgeW91ciBhcHBsaWNhdGlvbgogICAgdmlhIGBBY3Rp
        b25IYW5kbGVyI3NlbmRgLgoKICAgIFRoZSBgYWN0aW9uc2AgaGFzaCB3aWxs
        IGluaGVyaXQgYWN0aW9uIGhhbmRsZXJzIGZyb20KICAgIHRoZSBgYWN0aW9u
        c2AgaGFzaCBkZWZpbmVkIG9uIGV4dGVuZGVkIHBhcmVudCBjbGFzc2VzCiAg
        ICBvciBtaXhpbnMgcmF0aGVyIHRoYW4ganVzdCByZXBsYWNlIHRoZSBlbnRp
        cmUgaGFzaCwgZS5nLjoKCiAgICBgYGBqcwogICAgQXBwLkNhbkRpc3BsYXlC
        YW5uZXIgPSBFbWJlci5NaXhpbi5jcmVhdGUoewogICAgICBhY3Rpb25zOiB7
        CiAgICAgICAgZGlzcGxheUJhbm5lcjogZnVuY3Rpb24obXNnKSB7CiAgICAg
        ICAgICAvLyAuLi4KICAgICAgICB9CiAgICAgIH0KICAgIH0pOwoKICAgIEFw
        cC5XZWxjb21lUm91dGUgPSBFbWJlci5Sb3V0ZS5leHRlbmQoQXBwLkNhbkRp
        c3BsYXlCYW5uZXIsIHsKICAgICAgYWN0aW9uczogewogICAgICAgIHBsYXlN
        dXNpYzogZnVuY3Rpb24oKSB7CiAgICAgICAgICAvLyAuLi4KICAgICAgICB9
        CiAgICAgIH0KICAgIH0pOwoKICAgIC8vIGBXZWxjb21lUm91dGVgLCB3aGVu
        IGFjdGl2ZSwgd2lsbCBiZSBhYmxlIHRvIHJlc3BvbmQKICAgIC8vIHRvIGJv
        dGggYWN0aW9ucywgc2luY2UgdGhlIGFjdGlvbnMgaGFzaCBpcyBtZXJnZWQg
        cmF0aGVyCiAgICAvLyB0aGVuIHJlcGxhY2VkIHdoZW4gZXh0ZW5kaW5nIG1p
        eGlucyAvIHBhcmVudCBjbGFzc2VzLgogICAgdGhpcy5zZW5kKCdkaXNwbGF5
        QmFubmVyJyk7CiAgICB0aGlzLnNlbmQoJ3BsYXlNdXNpYycpOwogICAgYGBg
        CgogICAgV2l0aGluIGEgQ29udHJvbGxlciwgUm91dGUsIFZpZXcgb3IgQ29t
        cG9uZW50J3MgYWN0aW9uIGhhbmRsZXIsCiAgICB0aGUgdmFsdWUgb2YgdGhl
        IGB0aGlzYCBjb250ZXh0IGlzIHRoZSBDb250cm9sbGVyLCBSb3V0ZSwgVmll
        dyBvcgogICAgQ29tcG9uZW50IG9iamVjdDoKCiAgICBgYGBqcwogICAgQXBw
        LlNvbmdSb3V0ZSA9IEVtYmVyLlJvdXRlLmV4dGVuZCh7CiAgICAgIGFjdGlv
        bnM6IHsKICAgICAgICBteUFjdGlvbjogZnVuY3Rpb24oKSB7CiAgICAgICAg
        ICB0aGlzLmNvbnRyb2xsZXJGb3IoInNvbmciKTsKICAgICAgICAgIHRoaXMu
        dHJhbnNpdGlvblRvKCJvdGhlci5yb3V0ZSIpOwogICAgICAgICAgLi4uCiAg
        ICAgICAgfQogICAgICB9CiAgICB9KTsKICAgIGBgYAoKICAgIEl0IGlzIGFs
        c28gcG9zc2libGUgdG8gY2FsbCBgdGhpcy5fc3VwZXIoKWAgZnJvbSB3aXRo
        aW4gYW4KICAgIGFjdGlvbiBoYW5kbGVyIGlmIGl0IG92ZXJyaWRlcyBhIGhh
        bmRsZXIgZGVmaW5lZCBvbiBhIHBhcmVudAogICAgY2xhc3Mgb3IgbWl4aW46
        CgogICAgVGFrZSBmb3IgZXhhbXBsZSB0aGUgZm9sbG93aW5nIHJvdXRlczoK
        CiAgICBgYGBqcwogICAgQXBwLkRlYnVnUm91dGUgPSBFbWJlci5NaXhpbi5j
        cmVhdGUoewogICAgICBhY3Rpb25zOiB7CiAgICAgICAgZGVidWdSb3V0ZUlu
        Zm9ybWF0aW9uOiBmdW5jdGlvbigpIHsKICAgICAgICAgIGNvbnNvbGUuZGVi
        dWcoInRyb2xvbG8iKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0pOwoKICAg
        IEFwcC5Bbm5veWluZ0RlYnVnUm91dGUgPSBFbWJlci5Sb3V0ZS5leHRlbmQo
        QXBwLkRlYnVnUm91dGUsIHsKICAgICAgYWN0aW9uczogewogICAgICAgIGRl
        YnVnUm91dGVJbmZvcm1hdGlvbjogZnVuY3Rpb24oKSB7CiAgICAgICAgICAv
        LyBhbHNvIGNhbGwgdGhlIGRlYnVnUm91dGVJbmZvcm1hdGlvbiBvZiBtaXhl
        ZCBpbiBBcHAuRGVidWdSb3V0ZQogICAgICAgICAgdGhpcy5fc3VwZXIoKTsK
        CiAgICAgICAgICAvLyBzaG93IGFkZGl0aW9uYWwgYW5ub3lhbmNlCiAgICAg
        ICAgICB3aW5kb3cuYWxlcnQoLi4uKTsKICAgICAgICB9CiAgICAgIH0KICAg
        IH0pOwogICAgYGBgCgogICAgIyMgQnViYmxpbmcKCiAgICBCeSBkZWZhdWx0
        LCBhbiBhY3Rpb24gd2lsbCBzdG9wIGJ1YmJsaW5nIG9uY2UgYSBoYW5kbGVy
        IGRlZmluZWQKICAgIG9uIHRoZSBgYWN0aW9uc2AgaGFzaCBoYW5kbGVzIGl0
        LiBUbyBjb250aW51ZSBidWJibGluZyB0aGUgYWN0aW9uLAogICAgeW91IG11
        c3QgcmV0dXJuIGB0cnVlYCBmcm9tIHRoZSBoYW5kbGVyOgoKICAgIGBgYGpz
        CiAgICBBcHAuUm91dGVyLm1hcChmdW5jdGlvbigpIHsKICAgICAgdGhpcy5y
        ZXNvdXJjZSgiYWxidW0iLCBmdW5jdGlvbigpIHsKICAgICAgICB0aGlzLnJv
        dXRlKCJzb25nIik7CiAgICAgIH0pOwogICAgfSk7CgogICAgQXBwLkFsYnVt
        Um91dGUgPSBFbWJlci5Sb3V0ZS5leHRlbmQoewogICAgICBhY3Rpb25zOiB7
        CiAgICAgICAgc3RhcnRQbGF5aW5nOiBmdW5jdGlvbigpIHsKICAgICAgICB9
        CiAgICAgIH0KICAgIH0pOwoKICAgIEFwcC5BbGJ1bVNvbmdSb3V0ZSA9IEVt
        YmVyLlJvdXRlLmV4dGVuZCh7CiAgICAgIGFjdGlvbnM6IHsKICAgICAgICBz
        dGFydFBsYXlpbmc6IGZ1bmN0aW9uKCkgewogICAgICAgICAgLy8gLi4uCgog
        ICAgICAgICAgaWYgKGFjdGlvblNob3VsZEFsc29CZVRyaWdnZXJlZE9uUGFy
        ZW50Um91dGUpIHsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAg
        ICB9CiAgICAgICAgfQogICAgICB9CiAgICB9KTsKICAgIGBgYAoKICAgIEBw
        cm9wZXJ0eSBhY3Rpb25zCiAgICBAdHlwZSBIYXNoCiAgICBAZGVmYXVsdCBu
        dWxsCiAgKi8KCiAgLyoqCiAgICBNb3ZlcyBgYWN0aW9uc2AgdG8gYF9hY3Rp
        b25zYCBhdCBleHRlbmQgdGltZS4gTm90ZSB0aGF0IHRoaXMgY3VycmVudGx5
        CiAgICBtb2RpZmllcyB0aGUgbWl4aW4gdGhlbXNlbHZlcywgd2hpY2ggaXMg
        dGVjaG5pY2FsbHkgZHViaW91cyBidXQKICAgIGlzIHByYWN0aWNhbGx5IG9m
        IGxpdHRsZSBjb25zZXF1ZW5jZS4gVGhpcyBtYXkgY2hhbmdlIGluIHRoZSBm
        dXR1cmUuCgogICAgQHByaXZhdGUKICAgIEBtZXRob2Qgd2lsbE1lcmdlTWl4
        aW4KICAqLwogIHdpbGxNZXJnZU1peGluOiBmdW5jdGlvbihwcm9wcykgewog
        ICAgdmFyIGhhc2hOYW1lOwoKICAgIGlmICghcHJvcHMuX2FjdGlvbnMpIHsK
        ICAgICAgRW1iZXIuYXNzZXJ0KCInYWN0aW9ucycgc2hvdWxkIG5vdCBiZSBh
        IGZ1bmN0aW9uIiwgdHlwZW9mKHByb3BzLmFjdGlvbnMpICE9PSAnZnVuY3Rp
        b24nKTsKCiAgICAgIGlmICh0eXBlT2YocHJvcHMuYWN0aW9ucykgPT09ICdv
        YmplY3QnKSB7CiAgICAgICAgaGFzaE5hbWUgPSAnYWN0aW9ucyc7CiAgICAg
        IH0gZWxzZSBpZiAodHlwZU9mKHByb3BzLmV2ZW50cykgPT09ICdvYmplY3Qn
        KSB7CiAgICAgICAgRW1iZXIuZGVwcmVjYXRlKCdBY3Rpb24gaGFuZGxlcnMg
        Y29udGFpbmVkIGluIGFuIGBldmVudHNgIG9iamVjdCBhcmUgZGVwcmVjYXRl
        ZCBpbiBmYXZvciBvZiBwdXR0aW5nIHRoZW0gaW4gYW4gYGFjdGlvbnNgIG9i
        amVjdCcsIGZhbHNlKTsKICAgICAgICBoYXNoTmFtZSA9ICdldmVudHMnOwog
        ICAgICB9CgogICAgICBpZiAoaGFzaE5hbWUpIHsKICAgICAgICBwcm9wcy5f
        YWN0aW9ucyA9IEVtYmVyLm1lcmdlKHByb3BzLl9hY3Rpb25zIHx8IHt9LCBw
        cm9wc1toYXNoTmFtZV0pOwogICAgICB9CgogICAgICBkZWxldGUgcHJvcHNb
        aGFzaE5hbWVdOwogICAgfQogIH0sCgogIC8qKgogICAgVHJpZ2dlcnMgYSBu
        YW1lZCBhY3Rpb24gb24gdGhlIGBBY3Rpb25IYW5kbGVyYC4gQW55IHBhcmFt
        ZXRlcnMKICAgIHN1cHBsaWVkIGFmdGVyIHRoZSBgYWN0aW9uTmFtZWAgc3Ry
        aW5nIHdpbGwgYmUgcGFzc2VkIGFzIGFyZ3VtZW50cwogICAgdG8gdGhlIGFj
        dGlvbiB0YXJnZXQgZnVuY3Rpb24uCgogICAgSWYgdGhlIGBBY3Rpb25IYW5k
        bGVyYCBoYXMgaXRzIGB0YXJnZXRgIHByb3BlcnR5IHNldCwgYWN0aW9ucyBt
        YXkKICAgIGJ1YmJsZSB0byB0aGUgYHRhcmdldGAuIEJ1YmJsaW5nIGhhcHBl
        bnMgd2hlbiBhbiBgYWN0aW9uTmFtZWAgY2FuCiAgICBub3QgYmUgZm91bmQg
        aW4gdGhlIGBBY3Rpb25IYW5kbGVyYCdzIGBhY3Rpb25zYCBoYXNoIG9yIGlm
        IHRoZQogICAgYWN0aW9uIHRhcmdldCBmdW5jdGlvbiByZXR1cm5zIGB0cnVl
        YC4KCiAgICBFeGFtcGxlCgogICAgYGBganMKICAgIEFwcC5XZWxjb21lUm91
        dGUgPSBFbWJlci5Sb3V0ZS5leHRlbmQoewogICAgICBhY3Rpb25zOiB7CiAg
        ICAgICAgcGxheVRoZW1lOiBmdW5jdGlvbigpIHsKICAgICAgICAgICB0aGlz
        LnNlbmQoJ3BsYXlNdXNpYycsICd0aGVtZS5tcDMnKTsKICAgICAgICB9LAog
        ICAgICAgIHBsYXlNdXNpYzogZnVuY3Rpb24odHJhY2spIHsKICAgICAgICAg
        IC8vIC4uLgogICAgICAgIH0KICAgICAgfQogICAgfSk7CiAgICBgYGAKCiAg
        ICBAbWV0aG9kIHNlbmQKICAgIEBwYXJhbSB7U3RyaW5nfSBhY3Rpb25OYW1l
        IFRoZSBhY3Rpb24gdG8gdHJpZ2dlcgogICAgQHBhcmFtIHsqfSBjb250ZXh0
        IGEgY29udGV4dCB0byBzZW5kIHdpdGggdGhlIGFjdGlvbgogICovCiAgc2Vu
        ZDogZnVuY3Rpb24oYWN0aW9uTmFtZSkgewogICAgdmFyIGFyZ3MgPSBbXS5z
        bGljZS5jYWxsKGFyZ3VtZW50cywgMSksIHRhcmdldDsKCiAgICBpZiAodGhp
        cy5fYWN0aW9ucyAmJiB0aGlzLl9hY3Rpb25zW2FjdGlvbk5hbWVdKSB7CiAg
        ICAgIGlmICh0aGlzLl9hY3Rpb25zW2FjdGlvbk5hbWVdLmFwcGx5KHRoaXMs
        IGFyZ3MpID09PSB0cnVlKSB7CiAgICAgICAgLy8gaGFuZGxlciByZXR1cm5l
        ZCB0cnVlLCBzbyB0aGlzIGFjdGlvbiB3aWxsIGJ1YmJsZQogICAgICB9IGVs
        c2UgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgfSBlbHNlIGlmICgh
        RW1iZXIuRkVBVFVSRVMuaXNFbmFibGVkKCdlbWJlci1yb3V0aW5nLWRyb3At
        ZGVwcmVjYXRlZC1hY3Rpb24tc3R5bGUnKSAmJiB0aGlzLmRlcHJlY2F0ZWRT
        ZW5kICYmIHRoaXMuZGVwcmVjYXRlZFNlbmRIYW5kbGVzICYmIHRoaXMuZGVw
        cmVjYXRlZFNlbmRIYW5kbGVzKGFjdGlvbk5hbWUpKSB7CiAgICAgIEVtYmVy
        Lndhcm4oIlRoZSBjdXJyZW50IGRlZmF1bHQgaXMgZGVwcmVjYXRlZCBidXQg
        d2lsbCBwcmVmZXIgdG8gaGFuZGxlIGFjdGlvbnMgZGlyZWN0bHkgb24gdGhl
        IGNvbnRyb2xsZXIgaW5zdGVhZCBvZiBhIHNpbWlsYXJseSBuYW1lZCBhY3Rp
        b24gaW4gdGhlIGFjdGlvbnMgaGFzaC4gVG8gdHVybiBvZmYgdGhpcyBkZXBy
        ZWNhdGVkIGZlYXR1cmUgc2V0OiBFbWJlci5GRUFUVVJFU1snZW1iZXItcm91
        dGluZy1kcm9wLWRlcHJlY2F0ZWQtYWN0aW9uLXN0eWxlJ10gPSB0cnVlIik7
        CiAgICAgIGlmICh0aGlzLmRlcHJlY2F0ZWRTZW5kLmFwcGx5KHRoaXMsIFtd
        LnNsaWNlLmNhbGwoYXJndW1lbnRzKSkgPT09IHRydWUpIHsKICAgICAgICAv
        LyBoYW5kbGVyIHJldHVybiB0cnVlLCBzbyB0aGlzIGFjdGlvbiB3aWxsIGJ1
        YmJsZQogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybjsKICAgICAgfQog
        ICAgfQoKICAgIGlmICh0YXJnZXQgPSBnZXQodGhpcywgJ3RhcmdldCcpKSB7
        CiAgICAgIEVtYmVyLmFzc2VydCgiVGhlIGB0YXJnZXRgIGZvciAiICsgdGhp
        cyArICIgKCIgKyB0YXJnZXQgKyAiKSBkb2VzIG5vdCBoYXZlIGEgYHNlbmRg
        IG1ldGhvZCIsIHR5cGVvZiB0YXJnZXQuc2VuZCA9PT0gJ2Z1bmN0aW9uJyk7
        CiAgICAgIHRhcmdldC5zZW5kLmFwcGx5KHRhcmdldCwgYXJndW1lbnRzKTsK
        ICAgIH0KICB9Cgp9KTsKCn0pKCk7CgoKCihmdW5jdGlvbigpIHsKdmFyIHNl
        dCA9IEVtYmVyLnNldCwgZ2V0ID0gRW1iZXIuZ2V0LAogICAgbm90ID0gRW1i
        ZXIuY29tcHV0ZWQubm90LAogICAgb3IgPSBFbWJlci5jb21wdXRlZC5vcjsK
        Ci8qKgogIEBtb2R1bGUgZW1iZXIKICBAc3VibW9kdWxlIGVtYmVyLXJ1bnRp
        bWUKICovCgpmdW5jdGlvbiB0YXAocHJveHksIHByb21pc2UpIHsKICByZXR1
        cm4gcHJvbWlzZS50aGVuKGZ1bmN0aW9uKHZhbHVlKSB7CiAgICBzZXQocHJv
        eHksICdpc0Z1bGZpbGxlZCcsIHRydWUpOwogICAgc2V0KHByb3h5LCAnY29u
        dGVudCcsIHZhbHVlKTsKICAgIHJldHVybiB2YWx1ZTsKICB9LCBmdW5jdGlv
        bihyZWFzb24pIHsKICAgIHNldChwcm94eSwgJ2lzUmVqZWN0ZWQnLCB0cnVl
        KTsKICAgIHNldChwcm94eSwgJ3JlYXNvbicsIHJlYXNvbik7CiAgICB0aHJv
        dyByZWFzb247CiAgfSwgIkVtYmVyOiBQcm9taXNlUHJveHkiKTsKfQoKLyoq
        CiAgQSBsb3cgbGV2ZWwgbWl4aW4gbWFraW5nIE9iamVjdFByb3h5LCBPYmpl
        Y3RDb250cm9sbGVyIG9yIEFycmF5Q29udHJvbGxlcidzIHByb21pc2UgYXdh
        cmUuCgogIGBgYGphdmFzY3JpcHQKICB2YXIgT2JqZWN0UHJvbWlzZUNvbnRy
        b2xsZXIgPSBFbWJlci5PYmplY3RDb250cm9sbGVyLmV4dGVuZChFbWJlci5Q
        cm9taXNlUHJveHlNaXhpbik7CgogIHZhciBjb250cm9sbGVyID0gT2JqZWN0
        UHJvbWlzZUNvbnRyb2xsZXIuY3JlYXRlKHsKICAgIHByb21pc2U6ICQuZ2V0
        SlNPTignL3NvbWUvcmVtb3RlL2RhdGEuanNvbicpCiAgfSk7CgogIGNvbnRy
        b2xsZXIudGhlbihmdW5jdGlvbihqc29uKXsKICAgICAvLyB0aGUganNvbgog
        IH0sIGZ1bmN0aW9uKHJlYXNvbikgewogICAgIC8vIHRoZSByZWFzb24gd2h5
        IHlvdSBoYXZlIG5vIGpzb24KICB9KTsKICBgYGAKCiAgdGhlIGNvbnRyb2xs
        ZXIgaGFzIGJpbmRhYmxlIGF0dHJpYnV0ZXMgd2hpY2gKICB0cmFjayB0aGUg
        cHJvbWlzZXMgbGlmZSBjeWNsZQoKICBgYGBqYXZhc2NyaXB0CiAgY29udHJv
        bGxlci5nZXQoJ2lzUGVuZGluZycpICAgLy89PiB0cnVlCiAgY29udHJvbGxl
        ci5nZXQoJ2lzU2V0dGxlZCcpICAvLz0+IGZhbHNlCiAgY29udHJvbGxlci5n
        ZXQoJ2lzUmVqZWN0ZWQnKSAgLy89PiBmYWxzZQogIGNvbnRyb2xsZXIuZ2V0
        KCdpc0Z1bGZpbGxlZCcpIC8vPT4gZmFsc2UKICBgYGAKCiAgV2hlbiB0aGUg
        dGhlICQuZ2V0SlNPTiBjb21wbGV0ZXMsIGFuZCB0aGUgcHJvbWlzZSBpcyBm
        dWxmaWxsZWQKICB3aXRoIGpzb24sIHRoZSBsaWZlIGN5Y2xlIGF0dHJpYnV0
        ZXMgd2lsbCB1cGRhdGUgYWNjb3JkaW5nbHkuCgogIGBgYGphdmFzY3JpcHQK
        ICBjb250cm9sbGVyLmdldCgnaXNQZW5kaW5nJykgICAvLz0+IGZhbHNlCiAg
        Y29udHJvbGxlci5nZXQoJ2lzU2V0dGxlZCcpICAgLy89PiB0cnVlCiAgY29u
        dHJvbGxlci5nZXQoJ2lzUmVqZWN0ZWQnKSAgLy89PiBmYWxzZQogIGNvbnRy
        b2xsZXIuZ2V0KCdpc0Z1bGZpbGxlZCcpIC8vPT4gdHJ1ZQogIGBgYAoKICBB
        cyB0aGUgY29udHJvbGxlciBpcyBhbiBPYmplY3RDb250cm9sbGVyLCBhbmQg
        dGhlIGpzb24gbm93IGl0cyBjb250ZW50LAogIGFsbCB0aGUganNvbiBwcm9w
        ZXJ0aWVzIHdpbGwgYmUgYXZhaWxhYmxlIGRpcmVjdGx5IGZyb20gdGhlIGNv
        bnRyb2xsZXIuCgogIGBgYGphdmFzY3JpcHQKICAvLyBBc3N1bWluZyB0aGUg
        Zm9sbG93aW5nIGpzb246CiAgewogICAgZmlyc3ROYW1lOiAnU3RlZmFuJywK
        ICAgIGxhc3ROYW1lOiAnUGVubmVyJwogIH0KCiAgLy8gYm90aCBwcm9wZXJ0
        aWVzIHdpbGwgYWNjZXNzaWJsZSBvbiB0aGUgY29udHJvbGxlcgogIGNvbnRy
        b2xsZXIuZ2V0KCdmaXJzdE5hbWUnKSAvLz0+ICdTdGVmYW4nCiAgY29udHJv
        bGxlci5nZXQoJ2xhc3ROYW1lJykgIC8vPT4gJ1Blbm5lcicKICBgYGAKCiAg
        SWYgdGhlIGNvbnRyb2xsZXIgaXMgYmFja2luZyBhIHRlbXBsYXRlLCB0aGUg
        YXR0cmlidXRlcyBhcmUKICBiaW5kYWJsZSBmcm9tIHdpdGhpbiB0aGF0IHRl
        bXBsYXRlCgogIGBgYGhhbmRsZWJhcnMKICB7eyNpZiBpc1BlbmRpbmd9fQog
        ICAgbG9hZGluZy4uLgogIHt7ZWxzZX19CiAgICBmaXJzdE5hbWU6IHt7Zmly
        c3ROYW1lfX0KICAgIGxhc3ROYW1lOiB7e2xhc3ROYW1lfX0KICB7ey9pZn19
        CiAgYGBgCiAgQGNsYXNzIEVtYmVyLlByb21pc2VQcm94eU1peGluCiovCkVt
        YmVyLlByb21pc2VQcm94eU1peGluID0gRW1iZXIuTWl4aW4uY3JlYXRlKHsK
        ICAvKioKICAgIElmIHRoZSBwcm94aWVkIHByb21pc2UgaXMgcmVqZWN0ZWQg
        dGhpcyB3aWxsIGNvbnRhaW4gdGhlIHJlYXNvbgogICAgcHJvdmlkZWQuCgog
        ICAgQHByb3BlcnR5IHJlYXNvbgogICAgQGRlZmF1bHQgbnVsbAogICovCiAg
        cmVhc29uOiAgICBudWxsLAoKICAvKioKICAgIE9uY2UgdGhlIHByb3hpZWQg
        cHJvbWlzZSBoYXMgc2V0dGxlZCB0aGlzIHdpbGwgYmVjb21lIGBmYWxzZWAu
        CgogICAgQHByb3BlcnR5IGlzUGVuZGluZwogICAgQGRlZmF1bHQgdHJ1ZQog
        ICovCiAgaXNQZW5kaW5nOiAgbm90KCdpc1NldHRsZWQnKS5yZWFkT25seSgp
        LAoKICAvKioKICAgIE9uY2UgdGhlIHByb3hpZWQgcHJvbWlzZSBoYXMgc2V0
        dGxlZCB0aGlzIHdpbGwgYmVjb21lIGB0cnVlYC4KCiAgICBAcHJvcGVydHkg
        aXNTZXR0bGVkCiAgICBAZGVmYXVsdCBmYWxzZQogICovCiAgaXNTZXR0bGVk
        OiAgb3IoJ2lzUmVqZWN0ZWQnLCAnaXNGdWxmaWxsZWQnKS5yZWFkT25seSgp
        LAoKICAvKioKICAgIFdpbGwgYmVjb21lIGB0cnVlYCBpZiB0aGUgcHJveGll
        ZCBwcm9taXNlIGlzIHJlamVjdGVkLgoKICAgIEBwcm9wZXJ0eSBpc1JlamVj
        dGVkCiAgICBAZGVmYXVsdCBmYWxzZQogICovCiAgaXNSZWplY3RlZDogIGZh
        bHNlLAoKICAvKioKICAgIFdpbGwgYmVjb21lIGB0cnVlYCBpZiB0aGUgcHJv
        eGllZCBwcm9taXNlIGlzIGZ1bGZpbGxlZC4KCiAgICBAcHJvcGVydHkgaXNG
        dWxsZmlsbGVkCiAgICBAZGVmYXVsdCBmYWxzZQogICovCiAgaXNGdWxmaWxs
        ZWQ6IGZhbHNlLAoKICAvKioKICAgIFRoZSBwcm9taXNlIHdob3NlIGZ1bGZp
        bGxtZW50IHZhbHVlIGlzIGJlaW5nIHByb3hpZWQgYnkgdGhpcyBvYmplY3Qu
        CgogICAgVGhpcyBwcm9wZXJ0eSBtdXN0IGJlIHNwZWNpZmllZCB1cG9uIGNy
        ZWF0aW9uLCBhbmQgc2hvdWxkIG5vdCBiZQogICAgY2hhbmdlZCBvbmNlIGNy
        ZWF0ZWQuCgogICAgRXhhbXBsZToKCiAgICBgYGBqYXZhc2NyaXB0CiAgICBF
        bWJlci5PYmplY3RDb250cm9sbGVyLmV4dGVuZChFbWJlci5Qcm9taXNlUHJv
        eHlNaXhpbikuY3JlYXRlKHsKICAgICAgcHJvbWlzZTogPHRoZW5hYmxlPgog
        ICAgfSk7CiAgICBgYGAKCiAgICBAcHJvcGVydHkgcHJvbWlzZQogICovCiAg
        cHJvbWlzZTogRW1iZXIuY29tcHV0ZWQoZnVuY3Rpb24oa2V5LCBwcm9taXNl
        KSB7CiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMikgewogICAgICBy
        ZXR1cm4gdGFwKHRoaXMsIHByb21pc2UpOwogICAgfSBlbHNlIHsKICAgICAg
        dGhyb3cgbmV3IEVtYmVyLkVycm9yKCJQcm9taXNlUHJveHkncyBwcm9taXNl
        IG11c3QgYmUgc2V0Iik7CiAgICB9CiAgfSksCgogIC8qKgogICAgQW4gYWxp
        YXMgdG8gdGhlIHByb3hpZWQgcHJvbWlzZSdzIGB0aGVuYC4KCiAgICBTZWUg
        UlNWUC5Qcm9taXNlLnRoZW4uCgogICAgQG1ldGhvZCB0aGVuCiAgICBAcGFy
        YW0ge0Z1bmN0aW9ufSBjYWxsYmFjawogICAgQHJldHVybiB7UlNWUC5Qcm9t
        aXNlfQogICovCiAgdGhlbjogcHJvbWlzZUFsaWFzKCd0aGVuJyksCgogIC8q
        KgogICAgQW4gYWxpYXMgdG8gdGhlIHByb3hpZWQgcHJvbWlzZSdzIGBjYXRj
        aGAuCgogICAgU2VlIFJTVlAuUHJvbWlzZS5jYXRjaC4KCiAgICBAbWV0aG9k
        IGNhdGNoCiAgICBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjawogICAgQHJl
        dHVybiB7UlNWUC5Qcm9taXNlfQogICovCiAgJ2NhdGNoJzogcHJvbWlzZUFs
        aWFzKCdjYXRjaCcpLAoKICAvKioKICAgIEFuIGFsaWFzIHRvIHRoZSBwcm94
        aWVkIHByb21pc2UncyBgZmluYWxseWAuCgogICAgU2VlIFJTVlAuUHJvbWlz
        ZS5maW5hbGx5LgoKICAgIEBtZXRob2QgZmluYWxseQogICAgQHBhcmFtIHtG
        dW5jdGlvbn0gY2FsbGJhY2sKICAgIEByZXR1cm4ge1JTVlAuUHJvbWlzZX0K
        ICAqLwogICdmaW5hbGx5JzogcHJvbWlzZUFsaWFzKCdmaW5hbGx5JykKCn0p
        OwoKZnVuY3Rpb24gcHJvbWlzZUFsaWFzKG5hbWUpIHsKICByZXR1cm4gZnVu
        Y3Rpb24gKCkgewogICAgdmFyIHByb21pc2UgPSBnZXQodGhpcywgJ3Byb21p
        c2UnKTsKICAgIHJldHVybiBwcm9taXNlW25hbWVdLmFwcGx5KHByb21pc2Us
        IGFyZ3VtZW50cyk7CiAgfTsKfQoKfSkoKTsKCgoKKGZ1bmN0aW9uKCkgewoK
        fSkoKTsKCgoKKGZ1bmN0aW9uKCkgewp2YXIgZ2V0ID0gRW1iZXIuZ2V0LAog
        ICAgZm9yRWFjaCA9IEVtYmVyLkVudW1lcmFibGVVdGlscy5mb3JFYWNoLAog
        ICAgUkVUQUlOID0gJ3InLAogICAgSU5TRVJUID0gJ2knLAogICAgREVMRVRF
        ID0gJ2QnOwoKLyoqCiAgQW4gYEVtYmVyLlRyYWNrZWRBcnJheWAgdHJhY2tz
        IGFycmF5IG9wZXJhdGlvbnMuICBJdCdzIHVzZWZ1bCB3aGVuIHlvdSB3YW50
        IHRvCiAgbGF6aWx5IGNvbXB1dGUgdGhlIGluZGV4ZXMgb2YgaXRlbXMgaW4g
        YW4gYXJyYXkgYWZ0ZXIgdGhleSd2ZSBiZWVuIHNoaWZ0ZWQgYnkKICBzdWJz
        ZXF1ZW50IG9wZXJhdGlvbnMuCgogIEBjbGFzcyBUcmFja2VkQXJyYXkKICBA
        bmFtZXNwYWNlIEVtYmVyCiAgQHBhcmFtIHthcnJheX0gW2l0ZW1zPVtdXSBU
        aGUgYXJyYXkgdG8gYmUgdHJhY2tlZC4gIFRoaXMgaXMgdXNlZCBqdXN0IHRv
        IGdldAogIHRoZSBpbml0aWFsIGl0ZW1zIGZvciB0aGUgc3RhcnRpbmcgc3Rh
        dGUgb2YgcmV0YWluOm4uCiovCkVtYmVyLlRyYWNrZWRBcnJheSA9IGZ1bmN0
        aW9uIChpdGVtcykgewogIGlmIChhcmd1bWVudHMubGVuZ3RoIDwgMSkgeyBp
        dGVtcyA9IFtdOyB9CgogIHZhciBsZW5ndGggPSBnZXQoaXRlbXMsICdsZW5n
        dGgnKTsKCiAgaWYgKGxlbmd0aCkgewogICAgdGhpcy5fb3BlcmF0aW9ucyA9
        IFtuZXcgQXJyYXlPcGVyYXRpb24oUkVUQUlOLCBsZW5ndGgsIGl0ZW1zKV07
        CiAgfSBlbHNlIHsKICAgIHRoaXMuX29wZXJhdGlvbnMgPSBbXTsKICB9Cn07
        CgpFbWJlci5UcmFja2VkQXJyYXkuUkVUQUlOID0gUkVUQUlOOwpFbWJlci5U
        cmFja2VkQXJyYXkuSU5TRVJUID0gSU5TRVJUOwpFbWJlci5UcmFja2VkQXJy
        YXkuREVMRVRFID0gREVMRVRFOwoKRW1iZXIuVHJhY2tlZEFycmF5LnByb3Rv
        dHlwZSA9IHsKCiAgLyoqCiAgICBUcmFjayB0aGF0IGBuZXdJdGVtc2Agd2Vy
        ZSBhZGRlZCB0byB0aGUgdHJhY2tlZCBhcnJheSBhdCBgaW5kZXhgLgoKICAg
        IEBtZXRob2QgYWRkSXRlbXMKICAgIEBwYXJhbSBpbmRleAogICAgQHBhcmFt
        IG5ld0l0ZW1zCiAgKi8KICBhZGRJdGVtczogZnVuY3Rpb24gKGluZGV4LCBu
        ZXdJdGVtcykgewogICAgdmFyIGNvdW50ID0gZ2V0KG5ld0l0ZW1zLCAnbGVu
        Z3RoJyk7CiAgICBpZiAoY291bnQgPCAxKSB7IHJldHVybjsgfQoKICAgIHZh
        ciBtYXRjaCA9IHRoaXMuX2ZpbmRBcnJheU9wZXJhdGlvbihpbmRleCksCiAg
        ICAgICAgYXJyYXlPcGVyYXRpb24gPSBtYXRjaC5vcGVyYXRpb24sCiAgICAg
        ICAgYXJyYXlPcGVyYXRpb25JbmRleCA9IG1hdGNoLmluZGV4LAogICAgICAg
        IGFycmF5T3BlcmF0aW9uUmFuZ2VTdGFydCA9IG1hdGNoLnJhbmdlU3RhcnQs
        CiAgICAgICAgY29tcG9zZUluZGV4LAogICAgICAgIHNwbGl0SW5kZXgsCiAg
        ICAgICAgc3BsaXRJdGVtcywKICAgICAgICBzcGxpdEFycmF5T3BlcmF0aW9u
        LAogICAgICAgIG5ld0FycmF5T3BlcmF0aW9uOwoKICAgIG5ld0FycmF5T3Bl
        cmF0aW9uID0gbmV3IEFycmF5T3BlcmF0aW9uKElOU0VSVCwgY291bnQsIG5l
        d0l0ZW1zKTsKCiAgICBpZiAoYXJyYXlPcGVyYXRpb24pIHsKICAgICAgaWYg
        KCFtYXRjaC5zcGxpdCkgewogICAgICAgIC8vIGluc2VydCBsZWZ0IG9mIGFy
        cmF5T3BlcmF0aW9uCiAgICAgICAgdGhpcy5fb3BlcmF0aW9ucy5zcGxpY2Uo
        YXJyYXlPcGVyYXRpb25JbmRleCwgMCwgbmV3QXJyYXlPcGVyYXRpb24pOwog
        ICAgICAgIGNvbXBvc2VJbmRleCA9IGFycmF5T3BlcmF0aW9uSW5kZXg7CiAg
        ICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5fc3BsaXQoYXJyYXlPcGVyYXRp
        b25JbmRleCwgaW5kZXggLSBhcnJheU9wZXJhdGlvblJhbmdlU3RhcnQsIG5l
        d0FycmF5T3BlcmF0aW9uKTsKICAgICAgICBjb21wb3NlSW5kZXggPSBhcnJh
        eU9wZXJhdGlvbkluZGV4ICsgMTsKICAgICAgfQogICAgfSBlbHNlIHsKICAg
        ICAgLy8gaW5zZXJ0IGF0IGVuZAogICAgICB0aGlzLl9vcGVyYXRpb25zLnB1
        c2gobmV3QXJyYXlPcGVyYXRpb24pOwogICAgICBjb21wb3NlSW5kZXggPSBh
        cnJheU9wZXJhdGlvbkluZGV4OwogICAgfQoKICAgIHRoaXMuX2NvbXBvc2VJ
        bnNlcnQoY29tcG9zZUluZGV4KTsKICB9LAoKICAvKioKICAgIFRyYWNrIHRo
        YXQgYGNvdW50YCBpdGVtcyB3ZXJlIHJlbW92ZWQgYXQgYGluZGV4YC4KCiAg
        ICBAbWV0aG9kIHJlbW92ZUl0ZW1zCiAgICBAcGFyYW0gaW5kZXgKICAgIEBw
        YXJhbSBjb3VudAogICovCiAgcmVtb3ZlSXRlbXM6IGZ1bmN0aW9uIChpbmRl
        eCwgY291bnQpIHsKICAgIGlmIChjb3VudCA8IDEpIHsgcmV0dXJuOyB9Cgog
        ICAgdmFyIG1hdGNoID0gdGhpcy5fZmluZEFycmF5T3BlcmF0aW9uKGluZGV4
        KSwKICAgICAgICBhcnJheU9wZXJhdGlvbiA9IG1hdGNoLm9wZXJhdGlvbiwK
        ICAgICAgICBhcnJheU9wZXJhdGlvbkluZGV4ID0gbWF0Y2guaW5kZXgsCiAg
        ICAgICAgYXJyYXlPcGVyYXRpb25SYW5nZVN0YXJ0ID0gbWF0Y2gucmFuZ2VT
        dGFydCwKICAgICAgICBuZXdBcnJheU9wZXJhdGlvbiwKICAgICAgICBjb21w
        b3NlSW5kZXg7CgogICAgbmV3QXJyYXlPcGVyYXRpb24gPSBuZXcgQXJyYXlP
        cGVyYXRpb24oREVMRVRFLCBjb3VudCk7CiAgICBpZiAoIW1hdGNoLnNwbGl0
        KSB7CiAgICAgIC8vIGluc2VydCBsZWZ0IG9mIGFycmF5T3BlcmF0aW9uCiAg
        ICAgIHRoaXMuX29wZXJhdGlvbnMuc3BsaWNlKGFycmF5T3BlcmF0aW9uSW5k
        ZXgsIDAsIG5ld0FycmF5T3BlcmF0aW9uKTsKICAgICAgY29tcG9zZUluZGV4
        ID0gYXJyYXlPcGVyYXRpb25JbmRleDsKICAgIH0gZWxzZSB7CiAgICAgIHRo
        aXMuX3NwbGl0KGFycmF5T3BlcmF0aW9uSW5kZXgsIGluZGV4IC0gYXJyYXlP
        cGVyYXRpb25SYW5nZVN0YXJ0LCBuZXdBcnJheU9wZXJhdGlvbik7CiAgICAg
        IGNvbXBvc2VJbmRleCA9IGFycmF5T3BlcmF0aW9uSW5kZXggKyAxOwogICAg
        fQoKICAgIHJldHVybiB0aGlzLl9jb21wb3NlRGVsZXRlKGNvbXBvc2VJbmRl
        eCk7CiAgfSwKCiAgLyoqCiAgICBBcHBseSBhbGwgb3BlcmF0aW9ucywgcmVk
        dWNpbmcgdGhlbSB0byByZXRhaW46biwgZm9yIGBuYCwgdGhlIG51bWJlciBv
        ZgogICAgaXRlbXMgaW4gdGhlIGFycmF5LgoKICAgIGBjYWxsYmFja2Agd2ls
        bCBiZSBjYWxsZWQgZm9yIGVhY2ggb3BlcmF0aW9uIGFuZCB3aWxsIGJlIHBh
        c3NlZCB0aGUgZm9sbG93aW5nIGFyZ3VtZW50czoKCiAgICAqIHthcnJheX0g
        aXRlbXMgVGhlIGl0ZW1zIGZvciB0aGUgZ2l2ZW4gb3BlcmF0aW9uCiAgICAq
        IHtudW1iZXJ9IG9mZnNldCBUaGUgY29tcHV0ZWQgb2Zmc2V0IG9mIHRoZSBp
        dGVtcywgaWUgdGhlIGluZGV4IGluIHRoZQogICAgYXJyYXkgb2YgdGhlIGZp
        cnN0IGl0ZW0gZm9yIHRoaXMgb3BlcmF0aW9uLgogICAgKiB7c3RyaW5nfSBv
        cGVyYXRpb24gVGhlIHR5cGUgb2YgdGhlIG9wZXJhdGlvbi4gIE9uZSBvZgog
        ICAgYEVtYmVyLlRyYWNrZWRBcnJheS57UkVUQUlOLCBERUxFVEUsIElOU0VS
        VH1gCgogICAgQG1ldGhvZCBhcHBseQogICAgQHBhcmFtIHtmdW5jdGlvbn0g
        Y2FsbGJhY2sKICAqLwogIGFwcGx5OiBmdW5jdGlvbiAoY2FsbGJhY2spIHsK
        ICAgIHZhciBpdGVtcyA9IFtdLAogICAgICAgIG9mZnNldCA9IDA7CgogICAg
        Zm9yRWFjaCh0aGlzLl9vcGVyYXRpb25zLCBmdW5jdGlvbiAoYXJyYXlPcGVy
        YXRpb24pIHsKICAgICAgY2FsbGJhY2soYXJyYXlPcGVyYXRpb24uaXRlbXMs
        IG9mZnNldCwgYXJyYXlPcGVyYXRpb24udHlwZSk7CgogICAgICBpZiAoYXJy
        YXlPcGVyYXRpb24udHlwZSAhPT0gREVMRVRFKSB7CiAgICAgICAgb2Zmc2V0
        ICs9IGFycmF5T3BlcmF0aW9uLmNvdW50OwogICAgICAgIGl0ZW1zID0gaXRl
        bXMuY29uY2F0KGFycmF5T3BlcmF0aW9uLml0ZW1zKTsKICAgICAgfQogICAg
        fSk7CgogICAgdGhpcy5fb3BlcmF0aW9ucyA9IFtuZXcgQXJyYXlPcGVyYXRp
        b24oUkVUQUlOLCBpdGVtcy5sZW5ndGgsIGl0ZW1zKV07CiAgfSwKCiAgLyoq
        CiAgICBSZXR1cm4gYW4gYEFycmF5T3BlcmF0aW9uTWF0Y2hgIGZvciB0aGUg
        b3BlcmF0aW9uIHRoYXQgY29udGFpbnMgdGhlIGl0ZW0gYXQgYGluZGV4YC4K
        CiAgICBAbWV0aG9kIF9maW5kQXJyYXlPcGVyYXRpb24KCiAgICBAcGFyYW0g
        e251bWJlcn0gaW5kZXggdGhlIGluZGV4IG9mIHRoZSBpdGVtIHdob3NlIG9w
        ZXJhdGlvbiBpbmZvcm1hdGlvbgogICAgc2hvdWxkIGJlIHJldHVybmVkLgog
        ICAgQHByaXZhdGUKICAqLwogIF9maW5kQXJyYXlPcGVyYXRpb246IGZ1bmN0
        aW9uIChpbmRleCkgewogICAgdmFyIGFycmF5T3BlcmF0aW9uSW5kZXgsCiAg
        ICAgICAgbGVuLAogICAgICAgIHNwbGl0ID0gZmFsc2UsCiAgICAgICAgYXJy
        YXlPcGVyYXRpb24sCiAgICAgICAgYXJyYXlPcGVyYXRpb25SYW5nZVN0YXJ0
        LAogICAgICAgIGFycmF5T3BlcmF0aW9uUmFuZ2VFbmQ7CgogICAgLy8gT1BU
        SU1JWkU6IHdlIGNvdWxkIHNlYXJjaCB0aGVzZSBmYXN0ZXIgaWYgd2Uga2Vw
        dCBhIGJhbGFuY2VkIHRyZWUuCiAgICAvLyBmaW5kIGxlZnRtb3N0IGFycmF5
        T3BlcmF0aW9uIHRvIHRoZSByaWdodCBvZiBgaW5kZXhgCiAgICBmb3IgKGFy
        cmF5T3BlcmF0aW9uSW5kZXggPSBhcnJheU9wZXJhdGlvblJhbmdlU3RhcnQg
        PSAwLCBsZW4gPSB0aGlzLl9vcGVyYXRpb25zLmxlbmd0aDsgYXJyYXlPcGVy
        YXRpb25JbmRleCA8IGxlbjsgKythcnJheU9wZXJhdGlvbkluZGV4KSB7CiAg
        ICAgIGFycmF5T3BlcmF0aW9uID0gdGhpcy5fb3BlcmF0aW9uc1thcnJheU9w
        ZXJhdGlvbkluZGV4XTsKCiAgICAgIGlmIChhcnJheU9wZXJhdGlvbi50eXBl
        ID09PSBERUxFVEUpIHsgY29udGludWU7IH0KCiAgICAgIGFycmF5T3BlcmF0
        aW9uUmFuZ2VFbmQgPSBhcnJheU9wZXJhdGlvblJhbmdlU3RhcnQgKyBhcnJh
        eU9wZXJhdGlvbi5jb3VudCAtIDE7CgogICAgICBpZiAoaW5kZXggPT09IGFy
        cmF5T3BlcmF0aW9uUmFuZ2VTdGFydCkgewogICAgICAgIGJyZWFrOwogICAg
        ICB9IGVsc2UgaWYgKGluZGV4ID4gYXJyYXlPcGVyYXRpb25SYW5nZVN0YXJ0
        ICYmIGluZGV4IDw9IGFycmF5T3BlcmF0aW9uUmFuZ2VFbmQpIHsKICAgICAg
        ICBzcGxpdCA9IHRydWU7CiAgICAgICAgYnJlYWs7CiAgICAgIH0gZWxzZSB7
        CiAgICAgICAgYXJyYXlPcGVyYXRpb25SYW5nZVN0YXJ0ID0gYXJyYXlPcGVy
        YXRpb25SYW5nZUVuZCArIDE7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4g
        bmV3IEFycmF5T3BlcmF0aW9uTWF0Y2goYXJyYXlPcGVyYXRpb24sIGFycmF5
        T3BlcmF0aW9uSW5kZXgsIHNwbGl0LCBhcnJheU9wZXJhdGlvblJhbmdlU3Rh
        cnQpOwogIH0sCgogIF9zcGxpdDogZnVuY3Rpb24gKGFycmF5T3BlcmF0aW9u
        SW5kZXgsIHNwbGl0SW5kZXgsIG5ld0FycmF5T3BlcmF0aW9uKSB7CiAgICB2
        YXIgYXJyYXlPcGVyYXRpb24gPSB0aGlzLl9vcGVyYXRpb25zW2FycmF5T3Bl
        cmF0aW9uSW5kZXhdLAogICAgICAgIHNwbGl0SXRlbXMgPSBhcnJheU9wZXJh
        dGlvbi5pdGVtcy5zbGljZShzcGxpdEluZGV4KSwKICAgICAgICBzcGxpdEFy
        cmF5T3BlcmF0aW9uID0gbmV3IEFycmF5T3BlcmF0aW9uKGFycmF5T3BlcmF0
        aW9uLnR5cGUsIHNwbGl0SXRlbXMubGVuZ3RoLCBzcGxpdEl0ZW1zKTsKCiAg
        ICAvLyB0cnVuY2F0ZSBMSFMKICAgIGFycmF5T3BlcmF0aW9uLmNvdW50ID0g
        c3BsaXRJbmRleDsKICAgIGFycmF5T3BlcmF0aW9uLml0ZW1zID0gYXJyYXlP
        cGVyYXRpb24uaXRlbXMuc2xpY2UoMCwgc3BsaXRJbmRleCk7CgogICAgdGhp
        cy5fb3BlcmF0aW9ucy5zcGxpY2UoYXJyYXlPcGVyYXRpb25JbmRleCArIDEs
        IDAsIG5ld0FycmF5T3BlcmF0aW9uLCBzcGxpdEFycmF5T3BlcmF0aW9uKTsK
        ICB9LAoKICAvLyBzZWUgU3ViQXJyYXkgZm9yIGEgYmV0dGVyIGltcGxlbWVu
        dGF0aW9uLgogIF9jb21wb3NlSW5zZXJ0OiBmdW5jdGlvbiAoaW5kZXgpIHsK
        ICAgIHZhciBuZXdBcnJheU9wZXJhdGlvbiA9IHRoaXMuX29wZXJhdGlvbnNb
        aW5kZXhdLAogICAgICAgIGxlZnRBcnJheU9wZXJhdGlvbiA9IHRoaXMuX29w
        ZXJhdGlvbnNbaW5kZXgtMV0sIC8vIG1heSBiZSB1bmRlZmluZWQKICAgICAg
        ICByaWdodEFycmF5T3BlcmF0aW9uID0gdGhpcy5fb3BlcmF0aW9uc1tpbmRl
        eCsxXSwgLy8gbWF5IGJlIHVuZGVmaW5lZAogICAgICAgIGxlZnRPcCA9IGxl
        ZnRBcnJheU9wZXJhdGlvbiAmJiBsZWZ0QXJyYXlPcGVyYXRpb24udHlwZSwK
        ICAgICAgICByaWdodE9wID0gcmlnaHRBcnJheU9wZXJhdGlvbiAmJiByaWdo
        dEFycmF5T3BlcmF0aW9uLnR5cGU7CgogICAgaWYgKGxlZnRPcCA9PT0gSU5T
        RVJUKSB7CiAgICAgICAgLy8gbWVyZ2UgbGVmdAogICAgICAgIGxlZnRBcnJh
        eU9wZXJhdGlvbi5jb3VudCArPSBuZXdBcnJheU9wZXJhdGlvbi5jb3VudDsK
        ICAgICAgICBsZWZ0QXJyYXlPcGVyYXRpb24uaXRlbXMgPSBsZWZ0QXJyYXlP
        cGVyYXRpb24uaXRlbXMuY29uY2F0KG5ld0FycmF5T3BlcmF0aW9uLml0ZW1z
        KTsKCiAgICAgIGlmIChyaWdodE9wID09PSBJTlNFUlQpIHsKICAgICAgICAv
        LyBhbHNvIG1lcmdlIHJpZ2h0ICh3ZSBoYXZlIHNwbGl0IGFuIGluc2VydCB3
        aXRoIGFuIGluc2VydCkKICAgICAgICBsZWZ0QXJyYXlPcGVyYXRpb24uY291
        bnQgKz0gcmlnaHRBcnJheU9wZXJhdGlvbi5jb3VudDsKICAgICAgICBsZWZ0
        QXJyYXlPcGVyYXRpb24uaXRlbXMgPSBsZWZ0QXJyYXlPcGVyYXRpb24uaXRl
        bXMuY29uY2F0KHJpZ2h0QXJyYXlPcGVyYXRpb24uaXRlbXMpOwogICAgICAg
        IHRoaXMuX29wZXJhdGlvbnMuc3BsaWNlKGluZGV4LCAyKTsKICAgICAgfSBl
        bHNlIHsKICAgICAgICAvLyBvbmx5IG1lcmdlIGxlZnQKICAgICAgICB0aGlz
        Ll9vcGVyYXRpb25zLnNwbGljZShpbmRleCwgMSk7CiAgICAgIH0KICAgIH0g
        ZWxzZSBpZiAocmlnaHRPcCA9PT0gSU5TRVJUKSB7CiAgICAgIC8vIG1lcmdl
        IHJpZ2h0CiAgICAgIG5ld0FycmF5T3BlcmF0aW9uLmNvdW50ICs9IHJpZ2h0
        QXJyYXlPcGVyYXRpb24uY291bnQ7CiAgICAgIG5ld0FycmF5T3BlcmF0aW9u
        Lml0ZW1zID0gbmV3QXJyYXlPcGVyYXRpb24uaXRlbXMuY29uY2F0KHJpZ2h0
        QXJyYXlPcGVyYXRpb24uaXRlbXMpOwogICAgICB0aGlzLl9vcGVyYXRpb25z
        LnNwbGljZShpbmRleCArIDEsIDEpOwogICAgfQogIH0sCgogIF9jb21wb3Nl
        RGVsZXRlOiBmdW5jdGlvbiAoaW5kZXgpIHsKICAgIHZhciBhcnJheU9wZXJh
        dGlvbiA9IHRoaXMuX29wZXJhdGlvbnNbaW5kZXhdLAogICAgICAgIGRlbGV0
        ZXNUb0dvID0gYXJyYXlPcGVyYXRpb24uY291bnQsCiAgICAgICAgbGVmdEFy
        cmF5T3BlcmF0aW9uID0gdGhpcy5fb3BlcmF0aW9uc1tpbmRleC0xXSwgLy8g
        bWF5IGJlIHVuZGVmaW5lZAogICAgICAgIGxlZnRPcCA9IGxlZnRBcnJheU9w
        ZXJhdGlvbiAmJiBsZWZ0QXJyYXlPcGVyYXRpb24udHlwZSwKICAgICAgICBu
        ZXh0QXJyYXlPcGVyYXRpb24sCiAgICAgICAgbmV4dE9wLAogICAgICAgIG5l
        eHRDb3VudCwKICAgICAgICByZW1vdmVOZXdBbmROZXh0T3AgPSBmYWxzZSwK
        ICAgICAgICByZW1vdmVkSXRlbXMgPSBbXTsKCiAgICBpZiAobGVmdE9wID09
        PSBERUxFVEUpIHsKICAgICAgYXJyYXlPcGVyYXRpb24gPSBsZWZ0QXJyYXlP
        cGVyYXRpb247CiAgICAgIGluZGV4IC09IDE7CiAgICB9CgogICAgZm9yICh2
        YXIgaSA9IGluZGV4ICsgMTsgZGVsZXRlc1RvR28gPiAwOyArK2kpIHsKICAg
        ICAgbmV4dEFycmF5T3BlcmF0aW9uID0gdGhpcy5fb3BlcmF0aW9uc1tpXTsK
        ICAgICAgbmV4dE9wID0gbmV4dEFycmF5T3BlcmF0aW9uLnR5cGU7CiAgICAg
        IG5leHRDb3VudCA9IG5leHRBcnJheU9wZXJhdGlvbi5jb3VudDsKCiAgICAg
        IGlmIChuZXh0T3AgPT09IERFTEVURSkgewogICAgICAgIGFycmF5T3BlcmF0
        aW9uLmNvdW50ICs9IG5leHRDb3VudDsKICAgICAgICBjb250aW51ZTsKICAg
        ICAgfQoKICAgICAgaWYgKG5leHRDb3VudCA+IGRlbGV0ZXNUb0dvKSB7CiAg
        ICAgICAgLy8gZDoyIHtyLGl9OjUgIHdlIHJlZHVjZSB0aGUgcmV0YWluIG9y
        IGluc2VydCwgYnV0IGl0IHN0YXlzCiAgICAgICAgcmVtb3ZlZEl0ZW1zID0g
        cmVtb3ZlZEl0ZW1zLmNvbmNhdChuZXh0QXJyYXlPcGVyYXRpb24uaXRlbXMu
        c3BsaWNlKDAsIGRlbGV0ZXNUb0dvKSk7CiAgICAgICAgbmV4dEFycmF5T3Bl
        cmF0aW9uLmNvdW50IC09IGRlbGV0ZXNUb0dvOwoKICAgICAgICAvLyBJbiB0
        aGUgY2FzZSB3aGVyZSB3ZSB0cnVuY2F0ZSB0aGUgbGFzdCBhcnJheU9wZXJh
        dGlvbiwgd2UgZG9uJ3QgbmVlZCB0bwogICAgICAgIC8vIHJlbW92ZSBpdDsg
        YWxzbyB0aGUgZGVsZXRlc1RvR28gcmVkdWN0aW9uIGlzIG5vdCB0aGUgZW50
        aXJldHkgb2YKICAgICAgICAvLyBuZXh0Q291bnQKICAgICAgICBpIC09IDE7
        CiAgICAgICAgbmV4dENvdW50ID0gZGVsZXRlc1RvR287CgogICAgICAgIGRl
        bGV0ZXNUb0dvID0gMDsKICAgICAgfSBlbHNlIHsKICAgICAgICBpZiAobmV4
        dENvdW50ID09PSBkZWxldGVzVG9HbykgewogICAgICAgICAgLy8gSGFuZGxl
        IGVkZ2UgY2FzZSBvZiBkOjIgaToyIGluIHdoaWNoIGNhc2UgYm90aCBvcGVy
        YXRpb25zIGdvIGF3YXkKICAgICAgICAgIC8vIGR1cmluZyBjb21wb3NpdGlv
        bi4KICAgICAgICAgIHJlbW92ZU5ld0FuZE5leHRPcCA9IHRydWU7CiAgICAg
        ICAgfQogICAgICAgIHJlbW92ZWRJdGVtcyA9IHJlbW92ZWRJdGVtcy5jb25j
        YXQobmV4dEFycmF5T3BlcmF0aW9uLml0ZW1zKTsKICAgICAgICBkZWxldGVz
        VG9HbyAtPSBuZXh0Q291bnQ7CiAgICAgIH0KCiAgICAgIGlmIChuZXh0T3Ag
        PT09IElOU0VSVCkgewogICAgICAgIC8vIGQ6MiBpOjMgd2lsbCByZXN1bHQg
        aW4gZGVsZXRlIGdvaW5nIGF3YXkKICAgICAgICBhcnJheU9wZXJhdGlvbi5j
        b3VudCAtPSBuZXh0Q291bnQ7CiAgICAgIH0KICAgIH0KCiAgICBpZiAoYXJy
        YXlPcGVyYXRpb24uY291bnQgPiAwKSB7CiAgICAgIC8vIGNvbXBvc2Ugb3Vy
        IG5ldyBkZWxldGUgd2l0aCBwb3NzaWJseSBzZXZlcmFsIG9wZXJhdGlvbnMg
        dG8gdGhlIHJpZ2h0IG9mCiAgICAgIC8vIGRpc3BhcmF0ZSB0eXBlcwogICAg
        ICB0aGlzLl9vcGVyYXRpb25zLnNwbGljZShpbmRleCsxLCBpLTEtaW5kZXgp
        OwogICAgfSBlbHNlIHsKICAgICAgLy8gVGhlIGRlbGV0ZSBvcGVyYXRpb24g
        Y2FuIGdvIGF3YXk7IGl0IGhhcyBtZXJlbHkgcmVkdWNlZCBzb21lIG90aGVy
        CiAgICAgIC8vIG9wZXJhdGlvbiwgYXMgaW4gZDozIGk6NDsgaXQgbWF5IGFs
        c28gaGF2ZSBlbGltaW5hdGVkIHRoYXQgb3BlcmF0aW9uLAogICAgICAvLyBh
        cyBpbiBkOjMgaTozLgogICAgICB0aGlzLl9vcGVyYXRpb25zLnNwbGljZShp
        bmRleCwgcmVtb3ZlTmV3QW5kTmV4dE9wID8gMiA6IDEpOwogICAgfQoKICAg
        IHJldHVybiByZW1vdmVkSXRlbXM7CiAgfSwKCiAgdG9TdHJpbmc6IGZ1bmN0
        aW9uICgpIHsKICAgIHZhciBzdHIgPSAiIjsKICAgIGZvckVhY2godGhpcy5f
        b3BlcmF0aW9ucywgZnVuY3Rpb24gKG9wZXJhdGlvbikgewogICAgICBzdHIg
        Kz0gIiAiICsgb3BlcmF0aW9uLnR5cGUgKyAiOiIgKyBvcGVyYXRpb24uY291
        bnQ7CiAgICB9KTsKICAgIHJldHVybiBzdHIuc3Vic3RyaW5nKDEpOwogIH0K
        fTsKCi8qKgogIEludGVybmFsIGRhdGEgc3RydWN0dXJlIHRvIHJlcHJlc2Vu
        dCBhbiBhcnJheSBvcGVyYXRpb24uCgogIEBtZXRob2QgQXJyYXlPcGVyYXRp
        b24KICBAcHJpdmF0ZQogIEBwYXJhbSB7c3RyaW5nfSB0eXBlIFRoZSB0eXBl
        IG9mIHRoZSBvcGVyYXRpb24uICBPbmUgb2YKICBgRW1iZXIuVHJhY2tlZEFy
        cmF5LntSRVRBSU4sIElOU0VSVCwgREVMRVRFfWAKICBAcGFyYW0ge251bWJl
        cn0gY291bnQgVGhlIG51bWJlciBvZiBpdGVtcyBpbiB0aGlzIG9wZXJhdGlv
        bi4KICBAcGFyYW0ge2FycmF5fSBpdGVtcyBUaGUgaXRlbXMgb2YgdGhlIG9w
        ZXJhdGlvbiwgaWYgaW5jbHVkZWQuICBSRVRBSU4gYW5kCiAgSU5TRVJUIGlu
        Y2x1ZGUgdGhlaXIgaXRlbXMsIERFTEVURSBkb2VzIG5vdC4KKi8KZnVuY3Rp
        b24gQXJyYXlPcGVyYXRpb24gKG9wZXJhdGlvbiwgY291bnQsIGl0ZW1zKSB7
        CiAgdGhpcy50eXBlID0gb3BlcmF0aW9uOyAvLyBSRVRBSU4gfCBJTlNFUlQg
        fCBERUxFVEUKICB0aGlzLmNvdW50ID0gY291bnQ7CiAgdGhpcy5pdGVtcyA9
        IGl0ZW1zOwp9CgovKioKICBJbnRlcm5hbCBkYXRhIHN0cnVjdHVyZSB1c2Vk
        IHRvIGluY2x1ZGUgaW5mb3JtYXRpb24gd2hlbiBsb29raW5nIHVwIG9wZXJh
        dGlvbnMKICBieSBpdGVtIGluZGV4LgoKICBAbWV0aG9kIEFycmF5T3BlcmF0
        aW9uTWF0Y2gKICBAcHJpdmF0ZQogIEBwYXJhbSB7QXJyYXlPcGVyYXRpb259
        IG9wZXJhdGlvbgogIEBwYXJhbSB7bnVtYmVyfSBpbmRleCBUaGUgaW5kZXgg
        b2YgYG9wZXJhdGlvbmAgaW4gdGhlIGFycmF5IG9mIG9wZXJhdGlvbnMuCiAg
        QHBhcmFtIHtib29sZWFufSBzcGxpdCBXaGV0aGVyIG9yIG5vdCB0aGUgaXRl
        bSBpbmRleCBzZWFyY2hlZCBmb3Igd291bGQKICByZXF1aXJlIGEgc3BsaXQg
        Zm9yIGEgbmV3IG9wZXJhdGlvbiB0eXBlLgogIEBwYXJhbSB7bnVtYmVyfSBy
        YW5nZVN0YXJ0IFRoZSBpbmRleCBvZiB0aGUgZmlyc3QgaXRlbSBpbiB0aGUg
        b3BlcmF0aW9uLAogIHdpdGggcmVzcGVjdCB0byB0aGUgdHJhY2tlZCBhcnJh
        eS4gIFRoZSBpbmRleCBvZiB0aGUgbGFzdCBpdGVtIGNhbiBiZSBjb21wdXRl
        ZAogIGZyb20gYHJhbmdlU3RhcnRgIGFuZCBgb3BlcmF0aW9uLmNvdW50YC4K
        Ki8KZnVuY3Rpb24gQXJyYXlPcGVyYXRpb25NYXRjaChvcGVyYXRpb24sIGlu
        ZGV4LCBzcGxpdCwgcmFuZ2VTdGFydCkgewogIHRoaXMub3BlcmF0aW9uID0g
        b3BlcmF0aW9uOwogIHRoaXMuaW5kZXggPSBpbmRleDsKICB0aGlzLnNwbGl0
        ID0gc3BsaXQ7CiAgdGhpcy5yYW5nZVN0YXJ0ID0gcmFuZ2VTdGFydDsKfQoK
        fSkoKTsKCgoKKGZ1bmN0aW9uKCkgewp2YXIgZ2V0ID0gRW1iZXIuZ2V0LAog
        ICAgZm9yRWFjaCA9IEVtYmVyLkVudW1lcmFibGVVdGlscy5mb3JFYWNoLAog
        ICAgUkVUQUlOID0gJ3InLAogICAgRklMVEVSID0gJ2YnOwoKZnVuY3Rpb24g
        T3BlcmF0aW9uICh0eXBlLCBjb3VudCkgewogIHRoaXMudHlwZSA9IHR5cGU7
        CiAgdGhpcy5jb3VudCA9IGNvdW50Owp9CgovKioKICBBbiBgRW1iZXIuU3Vi
        QXJyYXlgIHRyYWNrcyBhbiBhcnJheSBpbiBhIHdheSBzaW1pbGFyIHRvLCBi
        dXQgbW9yZSBzcGVjaWFsaXplZAogIHRoYW4sIGBFbWJlci5UcmFja2VkQXJy
        YXlgLiAgSXQgaXMgdXNlZnVsIGZvciBrZWVwaW5nIHRyYWNrIG9mIHRoZSBp
        bmRleGVzIG9mCiAgaXRlbXMgd2l0aGluIGEgZmlsdGVyZWQgYXJyYXkuCgog
        IEBjbGFzcyBTdWJBcnJheQogIEBuYW1lc3BhY2UgRW1iZXIKKi8KRW1iZXIu
        U3ViQXJyYXkgPSBmdW5jdGlvbiAobGVuZ3RoKSB7CiAgaWYgKGFyZ3VtZW50
        cy5sZW5ndGggPCAxKSB7IGxlbmd0aCA9IDA7IH0KCiAgaWYgKGxlbmd0aCA+
        IDApIHsKICAgIHRoaXMuX29wZXJhdGlvbnMgPSBbbmV3IE9wZXJhdGlvbihS
        RVRBSU4sIGxlbmd0aCldOwogIH0gZWxzZSB7CiAgICB0aGlzLl9vcGVyYXRp
        b25zID0gW107CiAgfQp9OwoKRW1iZXIuU3ViQXJyYXkucHJvdG90eXBlID0g
        ewogIC8qKgogICAgVHJhY2sgdGhhdCBhbiBpdGVtIHdhcyBhZGRlZCB0byB0
        aGUgdHJhY2tlZCBhcnJheS4KCiAgICBAbWV0aG9kIGFkZEl0ZW0KCiAgICBA
        cGFyYW0ge251bWJlcn0gaW5kZXggVGhlIGluZGV4IG9mIHRoZSBpdGVtIGlu
        IHRoZSB0cmFja2VkIGFycmF5LgogICAgQHBhcmFtIHtib29sZWFufSBtYXRj
        aCBgdHJ1ZWAgaWZmIHRoZSBpdGVtIGlzIGluY2x1ZGVkIGluIHRoZSBzdWJh
        cnJheS4KCiAgICBAcmV0dXJuIHtudW1iZXJ9IFRoZSBpbmRleCBvZiB0aGUg
        aXRlbSBpbiB0aGUgc3ViYXJyYXkuCiAgKi8KICBhZGRJdGVtOiBmdW5jdGlv
        bihpbmRleCwgbWF0Y2gpIHsKICAgIHZhciByZXR1cm5WYWx1ZSA9IC0xLAog
        ICAgICAgIGl0ZW1UeXBlID0gbWF0Y2ggPyBSRVRBSU4gOiBGSUxURVIsCiAg
        ICAgICAgc2VsZiA9IHRoaXM7CgogICAgdGhpcy5fZmluZE9wZXJhdGlvbihp
        bmRleCwgZnVuY3Rpb24ob3BlcmF0aW9uLCBvcGVyYXRpb25JbmRleCwgcmFu
        Z2VTdGFydCwgcmFuZ2VFbmQsIHNlZW5JblN1YkFycmF5KSB7CiAgICAgIHZh
        ciBuZXdPcGVyYXRpb24sIHNwbGl0T3BlcmF0aW9uOwoKICAgICAgaWYgKGl0
        ZW1UeXBlID09PSBvcGVyYXRpb24udHlwZSkgewogICAgICAgICsrb3BlcmF0
        aW9uLmNvdW50OwogICAgICB9IGVsc2UgaWYgKGluZGV4ID09PSByYW5nZVN0
        YXJ0KSB7CiAgICAgICAgLy8gaW5zZXJ0IHRvIHRoZSBsZWZ0IG9mIGBvcGVy
        YXRpb25gCiAgICAgICAgc2VsZi5fb3BlcmF0aW9ucy5zcGxpY2Uob3BlcmF0
        aW9uSW5kZXgsIDAsIG5ldyBPcGVyYXRpb24oaXRlbVR5cGUsIDEpKTsKICAg
        ICAgfSBlbHNlIHsKICAgICAgICBuZXdPcGVyYXRpb24gPSBuZXcgT3BlcmF0
        aW9uKGl0ZW1UeXBlLCAxKTsKICAgICAgICBzcGxpdE9wZXJhdGlvbiA9IG5l
        dyBPcGVyYXRpb24ob3BlcmF0aW9uLnR5cGUsIHJhbmdlRW5kIC0gaW5kZXgg
        KyAxKTsKICAgICAgICBvcGVyYXRpb24uY291bnQgPSBpbmRleCAtIHJhbmdl
        U3RhcnQ7CgogICAgICAgIHNlbGYuX29wZXJhdGlvbnMuc3BsaWNlKG9wZXJh
        dGlvbkluZGV4ICsgMSwgMCwgbmV3T3BlcmF0aW9uLCBzcGxpdE9wZXJhdGlv
        bik7CiAgICAgIH0KCiAgICAgIGlmIChtYXRjaCkgewogICAgICAgIGlmIChv
        cGVyYXRpb24udHlwZSA9PT0gUkVUQUlOKSB7CiAgICAgICAgICByZXR1cm5W
        YWx1ZSA9IHNlZW5JblN1YkFycmF5ICsgKGluZGV4IC0gcmFuZ2VTdGFydCk7
        CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJldHVyblZhbHVlID0gc2Vl
        bkluU3ViQXJyYXk7CiAgICAgICAgfQogICAgICB9CgogICAgICBzZWxmLl9j
        b21wb3NlQXQob3BlcmF0aW9uSW5kZXgpOwogICAgfSwgZnVuY3Rpb24oc2Vl
        bkluU3ViQXJyYXkpIHsKICAgICAgc2VsZi5fb3BlcmF0aW9ucy5wdXNoKG5l
        dyBPcGVyYXRpb24oaXRlbVR5cGUsIDEpKTsKCiAgICAgIGlmIChtYXRjaCkg
        ewogICAgICAgIHJldHVyblZhbHVlID0gc2VlbkluU3ViQXJyYXk7CiAgICAg
        IH0KCiAgICAgIHNlbGYuX2NvbXBvc2VBdChzZWxmLl9vcGVyYXRpb25zLmxl
        bmd0aC0xKTsKICAgIH0pOwoKICAgIHJldHVybiByZXR1cm5WYWx1ZTsKICB9
        LAoKICAvKioKICAgIFRyYWNrIHRoYXQgYW4gaXRlbSB3YXMgcmVtb3ZlZCBm
        cm9tIHRoZSB0cmFja2VkIGFycmF5LgoKICAgIEBtZXRob2QgcmVtb3ZlSXRl
        bQoKICAgIEBwYXJhbSB7bnVtYmVyfSBpbmRleCBUaGUgaW5kZXggb2YgdGhl
        IGl0ZW0gaW4gdGhlIHRyYWNrZWQgYXJyYXkuCgogICAgQHJldHVybiB7bnVt
        YmVyfSBUaGUgaW5kZXggb2YgdGhlIGl0ZW0gaW4gdGhlIHN1YmFycmF5LCBv
        ciBgLTFgIGlmIHRoZSBpdGVtCiAgICB3YXMgbm90IGluIHRoZSBzdWJhcnJh
        eS4KICAqLwogIHJlbW92ZUl0ZW06IGZ1bmN0aW9uKGluZGV4KSB7CiAgICB2
        YXIgcmV0dXJuVmFsdWUgPSAtMSwKICAgICAgICBzZWxmID0gdGhpczsKCiAg
        ICB0aGlzLl9maW5kT3BlcmF0aW9uKGluZGV4LCBmdW5jdGlvbiAob3BlcmF0
        aW9uLCBvcGVyYXRpb25JbmRleCwgcmFuZ2VTdGFydCwgcmFuZ2VFbmQsIHNl
        ZW5JblN1YkFycmF5KSB7CiAgICAgIGlmIChvcGVyYXRpb24udHlwZSA9PT0g
        UkVUQUlOKSB7CiAgICAgICAgcmV0dXJuVmFsdWUgPSBzZWVuSW5TdWJBcnJh
        eSArIChpbmRleCAtIHJhbmdlU3RhcnQpOwogICAgICB9CgogICAgICBpZiAo
        b3BlcmF0aW9uLmNvdW50ID4gMSkgewogICAgICAgIC0tb3BlcmF0aW9uLmNv
        dW50OwogICAgICB9IGVsc2UgewogICAgICAgIHNlbGYuX29wZXJhdGlvbnMu
        c3BsaWNlKG9wZXJhdGlvbkluZGV4LCAxKTsKICAgICAgICBzZWxmLl9jb21w
        b3NlQXQob3BlcmF0aW9uSW5kZXgpOwogICAgICB9CiAgICB9LCBmdW5jdGlv
        bigpIHsKICAgICAgdGhyb3cgbmV3IEVtYmVyLkVycm9yKCJDYW4ndCByZW1v
        dmUgYW4gaXRlbSB0aGF0IGhhcyBuZXZlciBiZWVuIGFkZGVkLiIpOwogICAg
        fSk7CgogICAgcmV0dXJuIHJldHVyblZhbHVlOwogIH0sCgoKICBfZmluZE9w
        ZXJhdGlvbjogZnVuY3Rpb24gKGluZGV4LCBmb3VuZENhbGxiYWNrLCBub3RG
        b3VuZENhbGxiYWNrKSB7CiAgICB2YXIgb3BlcmF0aW9uSW5kZXgsCiAgICAg
        ICAgbGVuLAogICAgICAgIG9wZXJhdGlvbiwKICAgICAgICByYW5nZVN0YXJ0
        LAogICAgICAgIHJhbmdlRW5kLAogICAgICAgIHNlZW5JblN1YkFycmF5ID0g
        MDsKCiAgICAvLyBPUFRJTUlaRTogY2hhbmdlIHRvIGJhbGFuY2VkIHRyZWUK
        ICAgIC8vIGZpbmQgbGVmdG1vc3Qgb3BlcmF0aW9uIHRvIHRoZSByaWdodCBv
        ZiBgaW5kZXhgCiAgICBmb3IgKG9wZXJhdGlvbkluZGV4ID0gcmFuZ2VTdGFy
        dCA9IDAsIGxlbiA9IHRoaXMuX29wZXJhdGlvbnMubGVuZ3RoOyBvcGVyYXRp
        b25JbmRleCA8IGxlbjsgcmFuZ2VTdGFydCA9IHJhbmdlRW5kICsgMSwgKytv
        cGVyYXRpb25JbmRleCkgewogICAgICBvcGVyYXRpb24gPSB0aGlzLl9vcGVy
        YXRpb25zW29wZXJhdGlvbkluZGV4XTsKICAgICAgcmFuZ2VFbmQgPSByYW5n
        ZVN0YXJ0ICsgb3BlcmF0aW9uLmNvdW50IC0gMTsKCiAgICAgIGlmIChpbmRl
        eCA+PSByYW5nZVN0YXJ0ICYmIGluZGV4IDw9IHJhbmdlRW5kKSB7CiAgICAg
        ICAgZm91bmRDYWxsYmFjayhvcGVyYXRpb24sIG9wZXJhdGlvbkluZGV4LCBy
        YW5nZVN0YXJ0LCByYW5nZUVuZCwgc2VlbkluU3ViQXJyYXkpOwogICAgICAg
        IHJldHVybjsKICAgICAgfSBlbHNlIGlmIChvcGVyYXRpb24udHlwZSA9PT0g
        UkVUQUlOKSB7CiAgICAgICAgc2VlbkluU3ViQXJyYXkgKz0gb3BlcmF0aW9u
        LmNvdW50OwogICAgICB9CiAgICB9CgogICAgbm90Rm91bmRDYWxsYmFjayhz
        ZWVuSW5TdWJBcnJheSk7CiAgfSwKCiAgX2NvbXBvc2VBdDogZnVuY3Rpb24o
        aW5kZXgpIHsKICAgIHZhciBvcCA9IHRoaXMuX29wZXJhdGlvbnNbaW5kZXhd
        LAogICAgICAgIG90aGVyT3A7CgogICAgaWYgKCFvcCkgewogICAgICAvLyBD
        b21wb3Npbmcgb3V0IG9mIGJvdW5kcyBpcyBhIG5vLW9wLCBhcyB3aGVuIHJl
        bW92aW5nIHRoZSBsYXN0IG9wZXJhdGlvbgogICAgICAvLyBpbiB0aGUgbGlz
        dC4KICAgICAgcmV0dXJuOwogICAgfQoKICAgIGlmIChpbmRleCA+IDApIHsK
        ICAgICAgb3RoZXJPcCA9IHRoaXMuX29wZXJhdGlvbnNbaW5kZXgtMV07CiAg
        ICAgIGlmIChvdGhlck9wLnR5cGUgPT09IG9wLnR5cGUpIHsKICAgICAgICBv
        cC5jb3VudCArPSBvdGhlck9wLmNvdW50OwogICAgICAgIHRoaXMuX29wZXJh
        dGlvbnMuc3BsaWNlKGluZGV4LTEsIDEpOwogICAgICAgIC0taW5kZXg7CiAg
        ICAgIH0KICAgIH0KCiAgICBpZiAoaW5kZXggPCB0aGlzLl9vcGVyYXRpb25z
        Lmxlbmd0aC0xKSB7CiAgICAgIG90aGVyT3AgPSB0aGlzLl9vcGVyYXRpb25z
        W2luZGV4KzFdOwogICAgICBpZiAob3RoZXJPcC50eXBlID09PSBvcC50eXBl
        KSB7CiAgICAgICAgb3AuY291bnQgKz0gb3RoZXJPcC5jb3VudDsKICAgICAg
        ICB0aGlzLl9vcGVyYXRpb25zLnNwbGljZShpbmRleCsxLCAxKTsKICAgICAg
        fQogICAgfQogIH0sCgogIHRvU3RyaW5nOiBmdW5jdGlvbiAoKSB7CiAgICB2
        YXIgc3RyID0gIiI7CiAgICBmb3JFYWNoKHRoaXMuX29wZXJhdGlvbnMsIGZ1
        bmN0aW9uIChvcGVyYXRpb24pIHsKICAgICAgc3RyICs9ICIgIiArIG9wZXJh
        dGlvbi50eXBlICsgIjoiICsgb3BlcmF0aW9uLmNvdW50OwogICAgfSk7CiAg
        ICByZXR1cm4gc3RyLnN1YnN0cmluZygxKTsKICB9Cn07Cgp9KSgpOwoKCgoo
        ZnVuY3Rpb24oKSB7CkVtYmVyLkNvbnRhaW5lciA9IHJlcXVpcmVNb2R1bGUo
        J2NvbnRhaW5lcicpWydkZWZhdWx0J107CkVtYmVyLkNvbnRhaW5lci5zZXQg
        PSBFbWJlci5zZXQ7Cgp9KSgpOwoKCgooZnVuY3Rpb24oKSB7CkVtYmVyLkFw
        cGxpY2F0aW9uID0gRW1iZXIuTmFtZXNwYWNlLmV4dGVuZCgpOwoKfSkoKTsK
        CgoKKGZ1bmN0aW9uKCkgewovKioKQG1vZHVsZSBlbWJlcgpAc3VibW9kdWxl
        IGVtYmVyLXJ1bnRpbWUKKi8KCnZhciBPVVRfT0ZfUkFOR0VfRVhDRVBUSU9O
        ID0gIkluZGV4IG91dCBvZiByYW5nZSI7CnZhciBFTVBUWSA9IFtdOwoKdmFy
        IGdldCA9IEVtYmVyLmdldCwgc2V0ID0gRW1iZXIuc2V0OwoKLyoqCiAgQW4g
        QXJyYXlQcm94eSB3cmFwcyBhbnkgb3RoZXIgb2JqZWN0IHRoYXQgaW1wbGVt
        ZW50cyBgRW1iZXIuQXJyYXlgIGFuZC9vcgogIGBFbWJlci5NdXRhYmxlQXJy
        YXksYCBmb3J3YXJkaW5nIGFsbCByZXF1ZXN0cy4gVGhpcyBtYWtlcyBpdCB2
        ZXJ5IHVzZWZ1bCBmb3IKICBhIG51bWJlciBvZiBiaW5kaW5nIHVzZSBjYXNl
        cyBvciBvdGhlciBjYXNlcyB3aGVyZSBiZWluZyBhYmxlIHRvIHN3YXAKICBv
        dXQgdGhlIHVuZGVybHlpbmcgYXJyYXkgaXMgdXNlZnVsLgoKICBBIHNpbXBs
        ZSBleGFtcGxlIG9mIHVzYWdlOgoKICBgYGBqYXZhc2NyaXB0CiAgdmFyIHBl
        dHMgPSBbJ2RvZycsICdjYXQnLCAnZmlzaCddOwogIHZhciBhcCA9IEVtYmVy
        LkFycmF5UHJveHkuY3JlYXRlKHsgY29udGVudDogRW1iZXIuQShwZXRzKSB9
        KTsKCiAgYXAuZ2V0KCdmaXJzdE9iamVjdCcpOyAgICAgICAgICAgICAgICAg
        ICAgICAgIC8vICdkb2cnCiAgYXAuc2V0KCdjb250ZW50JywgWydhbW9lYmEn
        LCAncGFyYW1lY2l1bSddKTsKICBhcC5nZXQoJ2ZpcnN0T2JqZWN0Jyk7ICAg
        ICAgICAgICAgICAgICAgICAgICAgLy8gJ2Ftb2ViYScKICBgYGAKCiAgVGhp
        cyBjbGFzcyBjYW4gYWxzbyBiZSB1c2VmdWwgYXMgYSBsYXllciB0byB0cmFu
        c2Zvcm0gdGhlIGNvbnRlbnRzIG9mCiAgYW4gYXJyYXksIGFzIHRoZXkgYXJl
        IGFjY2Vzc2VkLiBUaGlzIGNhbiBiZSBkb25lIGJ5IG92ZXJyaWRpbmcKICBg
        b2JqZWN0QXRDb250ZW50YDoKCiAgYGBgamF2YXNjcmlwdAogIHZhciBwZXRz
        ID0gWydkb2cnLCAnY2F0JywgJ2Zpc2gnXTsKICB2YXIgYXAgPSBFbWJlci5B
        cnJheVByb3h5LmNyZWF0ZSh7CiAgICAgIGNvbnRlbnQ6IEVtYmVyLkEocGV0
        cyksCiAgICAgIG9iamVjdEF0Q29udGVudDogZnVuY3Rpb24oaWR4KSB7CiAg
        ICAgICAgICByZXR1cm4gdGhpcy5nZXQoJ2NvbnRlbnQnKS5vYmplY3RBdChp
        ZHgpLnRvVXBwZXJDYXNlKCk7CiAgICAgIH0KICB9KTsKCiAgYXAuZ2V0KCdm
        aXJzdE9iamVjdCcpOyAvLyAuICdET0cnCiAgYGBgCgogIEBjbGFzcyBBcnJh
        eVByb3h5CiAgQG5hbWVzcGFjZSBFbWJlcgogIEBleHRlbmRzIEVtYmVyLk9i
        amVjdAogIEB1c2VzIEVtYmVyLk11dGFibGVBcnJheQoqLwpFbWJlci5BcnJh
        eVByb3h5ID0gRW1iZXIuT2JqZWN0LmV4dGVuZChFbWJlci5NdXRhYmxlQXJy
        YXksIHsKCiAgLyoqCiAgICBUaGUgY29udGVudCBhcnJheS4gTXVzdCBiZSBh
        biBvYmplY3QgdGhhdCBpbXBsZW1lbnRzIGBFbWJlci5BcnJheWAgYW5kL29y
        CiAgICBgRW1iZXIuTXV0YWJsZUFycmF5LmAKCiAgICBAcHJvcGVydHkgY29u
        dGVudAogICAgQHR5cGUgRW1iZXIuQXJyYXkKICAqLwogIGNvbnRlbnQ6IG51
        bGwsCgogIC8qKgogICBUaGUgYXJyYXkgdGhhdCB0aGUgcHJveHkgcHJldGVu
        ZHMgdG8gYmUuIEluIHRoZSBkZWZhdWx0IGBBcnJheVByb3h5YAogICBpbXBs
        ZW1lbnRhdGlvbiwgdGhpcyBhbmQgYGNvbnRlbnRgIGFyZSB0aGUgc2FtZS4g
        U3ViY2xhc3NlcyBvZiBgQXJyYXlQcm94eWAKICAgY2FuIG92ZXJyaWRlIHRo
        aXMgcHJvcGVydHkgdG8gcHJvdmlkZSB0aGluZ3MgbGlrZSBzb3J0aW5nIGFu
        ZCBmaWx0ZXJpbmcuCgogICBAcHJvcGVydHkgYXJyYW5nZWRDb250ZW50CiAg
        Ki8KICBhcnJhbmdlZENvbnRlbnQ6IEVtYmVyLmNvbXB1dGVkLmFsaWFzKCdj
        b250ZW50JyksCgogIC8qKgogICAgU2hvdWxkIGFjdHVhbGx5IHJldHJpZXZl
        IHRoZSBvYmplY3QgYXQgdGhlIHNwZWNpZmllZCBpbmRleCBmcm9tIHRoZQog
        ICAgY29udGVudC4gWW91IGNhbiBvdmVycmlkZSB0aGlzIG1ldGhvZCBpbiBz
        dWJjbGFzc2VzIHRvIHRyYW5zZm9ybSB0aGUKICAgIGNvbnRlbnQgaXRlbSB0
        byBzb21ldGhpbmcgbmV3LgoKICAgIFRoaXMgbWV0aG9kIHdpbGwgb25seSBi
        ZSBjYWxsZWQgaWYgY29udGVudCBpcyBub24tYG51bGxgLgoKICAgIEBtZXRo
        b2Qgb2JqZWN0QXRDb250ZW50CiAgICBAcGFyYW0ge051bWJlcn0gaWR4IFRo
        ZSBpbmRleCB0byByZXRyaWV2ZS4KICAgIEByZXR1cm4ge09iamVjdH0gdGhl
        IHZhbHVlIG9yIHVuZGVmaW5lZCBpZiBub25lIGZvdW5kCiAgKi8KICBvYmpl
        Y3RBdENvbnRlbnQ6IGZ1bmN0aW9uKGlkeCkgewogICAgcmV0dXJuIGdldCh0
        aGlzLCAnYXJyYW5nZWRDb250ZW50Jykub2JqZWN0QXQoaWR4KTsKICB9LAoK
        ICAvKioKICAgIFNob3VsZCBhY3R1YWxseSByZXBsYWNlIHRoZSBzcGVjaWZp
        ZWQgb2JqZWN0cyBvbiB0aGUgY29udGVudCBhcnJheS4KICAgIFlvdSBjYW4g
        b3ZlcnJpZGUgdGhpcyBtZXRob2QgaW4gc3ViY2xhc3NlcyB0byB0cmFuc2Zv
        cm0gdGhlIGNvbnRlbnQgaXRlbQogICAgaW50byBzb21ldGhpbmcgbmV3LgoK
        ICAgIFRoaXMgbWV0aG9kIHdpbGwgb25seSBiZSBjYWxsZWQgaWYgY29udGVu
        dCBpcyBub24tYG51bGxgLgoKICAgIEBtZXRob2QgcmVwbGFjZUNvbnRlbnQK
        ICAgIEBwYXJhbSB7TnVtYmVyfSBpZHggVGhlIHN0YXJ0aW5nIGluZGV4CiAg
        ICBAcGFyYW0ge051bWJlcn0gYW10IFRoZSBudW1iZXIgb2YgaXRlbXMgdG8g
        cmVtb3ZlIGZyb20gdGhlIGNvbnRlbnQuCiAgICBAcGFyYW0ge0FycmF5fSBv
        YmplY3RzIE9wdGlvbmFsIGFycmF5IG9mIG9iamVjdHMgdG8gaW5zZXJ0IG9y
        IG51bGwgaWYgbm8KICAgICAgb2JqZWN0cy4KICAgIEByZXR1cm4ge3ZvaWR9
        CiAgKi8KICByZXBsYWNlQ29udGVudDogZnVuY3Rpb24oaWR4LCBhbXQsIG9i
        amVjdHMpIHsKICAgIGdldCh0aGlzLCAnY29udGVudCcpLnJlcGxhY2UoaWR4
        LCBhbXQsIG9iamVjdHMpOwogIH0sCgogIC8qKgogICAgSW52b2tlZCB3aGVu
        IHRoZSBjb250ZW50IHByb3BlcnR5IGlzIGFib3V0IHRvIGNoYW5nZS4gTm90
        aWZpZXMgb2JzZXJ2ZXJzIHRoYXQgdGhlCiAgICBlbnRpcmUgYXJyYXkgY29u
        dGVudCB3aWxsIGNoYW5nZS4KCiAgICBAcHJpdmF0ZQogICAgQG1ldGhvZCBf
        Y29udGVudFdpbGxDaGFuZ2UKICAqLwogIF9jb250ZW50V2lsbENoYW5nZTog
        RW1iZXIuYmVmb3JlT2JzZXJ2ZXIoJ2NvbnRlbnQnLCBmdW5jdGlvbigpIHsK
        ICAgIHRoaXMuX3RlYXJkb3duQ29udGVudCgpOwogIH0pLAoKICBfdGVhcmRv
        d25Db250ZW50OiBmdW5jdGlvbigpIHsKICAgIHZhciBjb250ZW50ID0gZ2V0
        KHRoaXMsICdjb250ZW50Jyk7CgogICAgaWYgKGNvbnRlbnQpIHsKICAgICAg
        Y29udGVudC5yZW1vdmVBcnJheU9ic2VydmVyKHRoaXMsIHsKICAgICAgICB3
        aWxsQ2hhbmdlOiAnY29udGVudEFycmF5V2lsbENoYW5nZScsCiAgICAgICAg
        ZGlkQ2hhbmdlOiAnY29udGVudEFycmF5RGlkQ2hhbmdlJwogICAgICB9KTsK
        ICAgIH0KICB9LAoKICBjb250ZW50QXJyYXlXaWxsQ2hhbmdlOiBFbWJlci5L
        LAogIGNvbnRlbnRBcnJheURpZENoYW5nZTogRW1iZXIuSywKCiAgLyoqCiAg
        ICBJbnZva2VkIHdoZW4gdGhlIGNvbnRlbnQgcHJvcGVydHkgY2hhbmdlcy4g
        Tm90aWZpZXMgb2JzZXJ2ZXJzIHRoYXQgdGhlCiAgICBlbnRpcmUgYXJyYXkg
        Y29udGVudCBoYXMgY2hhbmdlZC4KCiAgICBAcHJpdmF0ZQogICAgQG1ldGhv
        ZCBfY29udGVudERpZENoYW5nZQogICovCiAgX2NvbnRlbnREaWRDaGFuZ2U6
        IEVtYmVyLm9ic2VydmVyKCdjb250ZW50JywgZnVuY3Rpb24oKSB7CiAgICB2
        YXIgY29udGVudCA9IGdldCh0aGlzLCAnY29udGVudCcpOwoKICAgIEVtYmVy
        LmFzc2VydCgiQ2FuJ3Qgc2V0IEFycmF5UHJveHkncyBjb250ZW50IHRvIGl0
        c2VsZiIsIGNvbnRlbnQgIT09IHRoaXMpOwoKICAgIHRoaXMuX3NldHVwQ29u
        dGVudCgpOwogIH0pLAoKICBfc2V0dXBDb250ZW50OiBmdW5jdGlvbigpIHsK
        ICAgIHZhciBjb250ZW50ID0gZ2V0KHRoaXMsICdjb250ZW50Jyk7CgogICAg
        aWYgKGNvbnRlbnQpIHsKICAgICAgY29udGVudC5hZGRBcnJheU9ic2VydmVy
        KHRoaXMsIHsKICAgICAgICB3aWxsQ2hhbmdlOiAnY29udGVudEFycmF5V2ls
        bENoYW5nZScsCiAgICAgICAgZGlkQ2hhbmdlOiAnY29udGVudEFycmF5RGlk
        Q2hhbmdlJwogICAgICB9KTsKICAgIH0KICB9LAoKICBfYXJyYW5nZWRDb250
        ZW50V2lsbENoYW5nZTogRW1iZXIuYmVmb3JlT2JzZXJ2ZXIoJ2FycmFuZ2Vk
        Q29udGVudCcsIGZ1bmN0aW9uKCkgewogICAgdmFyIGFycmFuZ2VkQ29udGVu
        dCA9IGdldCh0aGlzLCAnYXJyYW5nZWRDb250ZW50JyksCiAgICAgICAgbGVu
        ID0gYXJyYW5nZWRDb250ZW50ID8gZ2V0KGFycmFuZ2VkQ29udGVudCwgJ2xl
        bmd0aCcpIDogMDsKCiAgICB0aGlzLmFycmFuZ2VkQ29udGVudEFycmF5V2ls
        bENoYW5nZSh0aGlzLCAwLCBsZW4sIHVuZGVmaW5lZCk7CiAgICB0aGlzLmFy
        cmFuZ2VkQ29udGVudFdpbGxDaGFuZ2UodGhpcyk7CgogICAgdGhpcy5fdGVh
        cmRvd25BcnJhbmdlZENvbnRlbnQoYXJyYW5nZWRDb250ZW50KTsKICB9KSwK
        CiAgX2FycmFuZ2VkQ29udGVudERpZENoYW5nZTogRW1iZXIub2JzZXJ2ZXIo
        J2FycmFuZ2VkQ29udGVudCcsIGZ1bmN0aW9uKCkgewogICAgdmFyIGFycmFu
        Z2VkQ29udGVudCA9IGdldCh0aGlzLCAnYXJyYW5nZWRDb250ZW50JyksCiAg
        ICAgICAgbGVuID0gYXJyYW5nZWRDb250ZW50ID8gZ2V0KGFycmFuZ2VkQ29u
        dGVudCwgJ2xlbmd0aCcpIDogMDsKCiAgICBFbWJlci5hc3NlcnQoIkNhbid0
        IHNldCBBcnJheVByb3h5J3MgY29udGVudCB0byBpdHNlbGYiLCBhcnJhbmdl
        ZENvbnRlbnQgIT09IHRoaXMpOwoKICAgIHRoaXMuX3NldHVwQXJyYW5nZWRD
        b250ZW50KCk7CgogICAgdGhpcy5hcnJhbmdlZENvbnRlbnREaWRDaGFuZ2Uo
        dGhpcyk7CiAgICB0aGlzLmFycmFuZ2VkQ29udGVudEFycmF5RGlkQ2hhbmdl
        KHRoaXMsIDAsIHVuZGVmaW5lZCwgbGVuKTsKICB9KSwKCiAgX3NldHVwQXJy
        YW5nZWRDb250ZW50OiBmdW5jdGlvbigpIHsKICAgIHZhciBhcnJhbmdlZENv
        bnRlbnQgPSBnZXQodGhpcywgJ2FycmFuZ2VkQ29udGVudCcpOwoKICAgIGlm
        IChhcnJhbmdlZENvbnRlbnQpIHsKICAgICAgYXJyYW5nZWRDb250ZW50LmFk
        ZEFycmF5T2JzZXJ2ZXIodGhpcywgewogICAgICAgIHdpbGxDaGFuZ2U6ICdh
        cnJhbmdlZENvbnRlbnRBcnJheVdpbGxDaGFuZ2UnLAogICAgICAgIGRpZENo
        YW5nZTogJ2FycmFuZ2VkQ29udGVudEFycmF5RGlkQ2hhbmdlJwogICAgICB9
        KTsKICAgIH0KICB9LAoKICBfdGVhcmRvd25BcnJhbmdlZENvbnRlbnQ6IGZ1
        bmN0aW9uKCkgewogICAgdmFyIGFycmFuZ2VkQ29udGVudCA9IGdldCh0aGlz
        LCAnYXJyYW5nZWRDb250ZW50Jyk7CgogICAgaWYgKGFycmFuZ2VkQ29udGVu
        dCkgewogICAgICBhcnJhbmdlZENvbnRlbnQucmVtb3ZlQXJyYXlPYnNlcnZl
        cih0aGlzLCB7CiAgICAgICAgd2lsbENoYW5nZTogJ2FycmFuZ2VkQ29udGVu
        dEFycmF5V2lsbENoYW5nZScsCiAgICAgICAgZGlkQ2hhbmdlOiAnYXJyYW5n
        ZWRDb250ZW50QXJyYXlEaWRDaGFuZ2UnCiAgICAgIH0pOwogICAgfQogIH0s
        CgogIGFycmFuZ2VkQ29udGVudFdpbGxDaGFuZ2U6IEVtYmVyLkssCiAgYXJy
        YW5nZWRDb250ZW50RGlkQ2hhbmdlOiBFbWJlci5LLAoKICBvYmplY3RBdDog
        ZnVuY3Rpb24oaWR4KSB7CiAgICByZXR1cm4gZ2V0KHRoaXMsICdjb250ZW50
        JykgJiYgdGhpcy5vYmplY3RBdENvbnRlbnQoaWR4KTsKICB9LAoKICBsZW5n
        dGg6IEVtYmVyLmNvbXB1dGVkKGZ1bmN0aW9uKCkgewogICAgdmFyIGFycmFu
        Z2VkQ29udGVudCA9IGdldCh0aGlzLCAnYXJyYW5nZWRDb250ZW50Jyk7CiAg
        ICByZXR1cm4gYXJyYW5nZWRDb250ZW50ID8gZ2V0KGFycmFuZ2VkQ29udGVu
        dCwgJ2xlbmd0aCcpIDogMDsKICAgIC8vIE5vIGRlcGVuZGVuY2llcyBzaW5j
        ZSBFbnVtZXJhYmxlIG5vdGlmaWVzIGxlbmd0aCBvZiBjaGFuZ2UKICB9KSwK
        CiAgX3JlcGxhY2U6IGZ1bmN0aW9uKGlkeCwgYW10LCBvYmplY3RzKSB7CiAg
        ICB2YXIgY29udGVudCA9IGdldCh0aGlzLCAnY29udGVudCcpOwogICAgRW1i
        ZXIuYXNzZXJ0KCdUaGUgY29udGVudCBwcm9wZXJ0eSBvZiAnKyB0aGlzLmNv
        bnN0cnVjdG9yICsgJyBzaG91bGQgYmUgc2V0IGJlZm9yZSBtb2RpZnlpbmcg
        aXQnLCBjb250ZW50KTsKICAgIGlmIChjb250ZW50KSB0aGlzLnJlcGxhY2VD
        b250ZW50KGlkeCwgYW10LCBvYmplY3RzKTsKICAgIHJldHVybiB0aGlzOwog
        IH0sCgogIHJlcGxhY2U6IGZ1bmN0aW9uKCkgewogICAgaWYgKGdldCh0aGlz
        LCAnYXJyYW5nZWRDb250ZW50JykgPT09IGdldCh0aGlzLCAnY29udGVudCcp
        KSB7CiAgICAgIHRoaXMuX3JlcGxhY2UuYXBwbHkodGhpcywgYXJndW1lbnRz
        KTsKICAgIH0gZWxzZSB7CiAgICAgIHRocm93IG5ldyBFbWJlci5FcnJvcigi
        VXNpbmcgcmVwbGFjZSBvbiBhbiBhcnJhbmdlZCBBcnJheVByb3h5IGlzIG5v
        dCBhbGxvd2VkLiIpOwogICAgfQogIH0sCgogIF9pbnNlcnRBdDogZnVuY3Rp
        b24oaWR4LCBvYmplY3QpIHsKICAgIGlmIChpZHggPiBnZXQodGhpcywgJ2Nv
        bnRlbnQubGVuZ3RoJykpIHRocm93IG5ldyBFbWJlci5FcnJvcihPVVRfT0Zf
        UkFOR0VfRVhDRVBUSU9OKTsKICAgIHRoaXMuX3JlcGxhY2UoaWR4LCAwLCBb
        b2JqZWN0XSk7CiAgICByZXR1cm4gdGhpczsKICB9LAoKICBpbnNlcnRBdDog
        ZnVuY3Rpb24oaWR4LCBvYmplY3QpIHsKICAgIGlmIChnZXQodGhpcywgJ2Fy
        cmFuZ2VkQ29udGVudCcpID09PSBnZXQodGhpcywgJ2NvbnRlbnQnKSkgewog
        ICAgICByZXR1cm4gdGhpcy5faW5zZXJ0QXQoaWR4LCBvYmplY3QpOwogICAg
        fSBlbHNlIHsKICAgICAgdGhyb3cgbmV3IEVtYmVyLkVycm9yKCJVc2luZyBp
        bnNlcnRBdCBvbiBhbiBhcnJhbmdlZCBBcnJheVByb3h5IGlzIG5vdCBhbGxv
        d2VkLiIpOwogICAgfQogIH0sCgogIHJlbW92ZUF0OiBmdW5jdGlvbihzdGFy
        dCwgbGVuKSB7CiAgICBpZiAoJ251bWJlcicgPT09IHR5cGVvZiBzdGFydCkg
        ewogICAgICB2YXIgY29udGVudCA9IGdldCh0aGlzLCAnY29udGVudCcpLAog
        ICAgICAgICAgYXJyYW5nZWRDb250ZW50ID0gZ2V0KHRoaXMsICdhcnJhbmdl
        ZENvbnRlbnQnKSwKICAgICAgICAgIGluZGljZXMgPSBbXSwgaTsKCiAgICAg
        IGlmICgoc3RhcnQgPCAwKSB8fCAoc3RhcnQgPj0gZ2V0KHRoaXMsICdsZW5n
        dGgnKSkpIHsKICAgICAgICB0aHJvdyBuZXcgRW1iZXIuRXJyb3IoT1VUX09G
        X1JBTkdFX0VYQ0VQVElPTik7CiAgICAgIH0KCiAgICAgIGlmIChsZW4gPT09
        IHVuZGVmaW5lZCkgbGVuID0gMTsKCiAgICAgIC8vIEdldCBhIGxpc3Qgb2Yg
        aW5kaWNlcyBpbiBvcmlnaW5hbCBjb250ZW50IHRvIHJlbW92ZQogICAgICBm
        b3IgKGk9c3RhcnQ7IGk8c3RhcnQrbGVuOyBpKyspIHsKICAgICAgICAvLyBV
        c2UgYXJyYW5nZWRDb250ZW50IGhlcmUgc28gd2UgYXZvaWQgY29uZnVzaW9u
        IHdpdGggb2JqZWN0cyB0cmFuc2Zvcm1lZCBieSBvYmplY3RBdENvbnRlbnQK
        ICAgICAgICBpbmRpY2VzLnB1c2goY29udGVudC5pbmRleE9mKGFycmFuZ2Vk
        Q29udGVudC5vYmplY3RBdChpKSkpOwogICAgICB9CgogICAgICAvLyBSZXBs
        YWNlIGluIHJldmVyc2Ugb3JkZXIgc2luY2UgaW5kaWNlcyB3aWxsIGNoYW5n
        ZQogICAgICBpbmRpY2VzLnNvcnQoZnVuY3Rpb24oYSxiKSB7IHJldHVybiBi
        IC0gYTsgfSk7CgogICAgICBFbWJlci5iZWdpblByb3BlcnR5Q2hhbmdlcygp
        OwogICAgICBmb3IgKGk9MDsgaTxpbmRpY2VzLmxlbmd0aDsgaSsrKSB7CiAg
        ICAgICAgdGhpcy5fcmVwbGFjZShpbmRpY2VzW2ldLCAxLCBFTVBUWSk7CiAg
        ICAgIH0KICAgICAgRW1iZXIuZW5kUHJvcGVydHlDaGFuZ2VzKCk7CiAgICB9
        CgogICAgcmV0dXJuIHRoaXMgOwogIH0sCgogIHB1c2hPYmplY3Q6IGZ1bmN0
        aW9uKG9iaikgewogICAgdGhpcy5faW5zZXJ0QXQoZ2V0KHRoaXMsICdjb250
        ZW50Lmxlbmd0aCcpLCBvYmopIDsKICAgIHJldHVybiBvYmogOwogIH0sCgog
        IHB1c2hPYmplY3RzOiBmdW5jdGlvbihvYmplY3RzKSB7CiAgICBpZiAoIShF
        bWJlci5FbnVtZXJhYmxlLmRldGVjdChvYmplY3RzKSB8fCBFbWJlci5pc0Fy
        cmF5KG9iamVjdHMpKSkgewogICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCJN
        dXN0IHBhc3MgRW1iZXIuRW51bWVyYWJsZSB0byBFbWJlci5NdXRhYmxlQXJy
        YXkjcHVzaE9iamVjdHMiKTsKICAgIH0KICAgIHRoaXMuX3JlcGxhY2UoZ2V0
        KHRoaXMsICdsZW5ndGgnKSwgMCwgb2JqZWN0cyk7CiAgICByZXR1cm4gdGhp
        czsKICB9LAoKICBzZXRPYmplY3RzOiBmdW5jdGlvbihvYmplY3RzKSB7CiAg
        ICBpZiAob2JqZWN0cy5sZW5ndGggPT09IDApIHJldHVybiB0aGlzLmNsZWFy
        KCk7CgogICAgdmFyIGxlbiA9IGdldCh0aGlzLCAnbGVuZ3RoJyk7CiAgICB0
        aGlzLl9yZXBsYWNlKDAsIGxlbiwgb2JqZWN0cyk7CiAgICByZXR1cm4gdGhp
        czsKICB9LAoKICB1bnNoaWZ0T2JqZWN0OiBmdW5jdGlvbihvYmopIHsKICAg
        IHRoaXMuX2luc2VydEF0KDAsIG9iaikgOwogICAgcmV0dXJuIG9iaiA7CiAg
        fSwKCiAgdW5zaGlmdE9iamVjdHM6IGZ1bmN0aW9uKG9iamVjdHMpIHsKICAg
        IHRoaXMuX3JlcGxhY2UoMCwgMCwgb2JqZWN0cyk7CiAgICByZXR1cm4gdGhp
        czsKICB9LAoKICBzbGljZTogZnVuY3Rpb24oKSB7CiAgICB2YXIgYXJyID0g
        dGhpcy50b0FycmF5KCk7CiAgICByZXR1cm4gYXJyLnNsaWNlLmFwcGx5KGFy
        ciwgYXJndW1lbnRzKTsKICB9LAoKICBhcnJhbmdlZENvbnRlbnRBcnJheVdp
        bGxDaGFuZ2U6IGZ1bmN0aW9uKGl0ZW0sIGlkeCwgcmVtb3ZlZENudCwgYWRk
        ZWRDbnQpIHsKICAgIHRoaXMuYXJyYXlDb250ZW50V2lsbENoYW5nZShpZHgs
        IHJlbW92ZWRDbnQsIGFkZGVkQ250KTsKICB9LAoKICBhcnJhbmdlZENvbnRl
        bnRBcnJheURpZENoYW5nZTogZnVuY3Rpb24oaXRlbSwgaWR4LCByZW1vdmVk
        Q250LCBhZGRlZENudCkgewogICAgdGhpcy5hcnJheUNvbnRlbnREaWRDaGFu
        Z2UoaWR4LCByZW1vdmVkQ250LCBhZGRlZENudCk7CiAgfSwKCiAgaW5pdDog
        ZnVuY3Rpb24oKSB7CiAgICB0aGlzLl9zdXBlcigpOwogICAgdGhpcy5fc2V0
        dXBDb250ZW50KCk7CiAgICB0aGlzLl9zZXR1cEFycmFuZ2VkQ29udGVudCgp
        OwogIH0sCgogIHdpbGxEZXN0cm95OiBmdW5jdGlvbigpIHsKICAgIHRoaXMu
        X3RlYXJkb3duQXJyYW5nZWRDb250ZW50KCk7CiAgICB0aGlzLl90ZWFyZG93
        bkNvbnRlbnQoKTsKICB9Cn0pOwoKfSkoKTsKCgoKKGZ1bmN0aW9uKCkgewov
        KioKQG1vZHVsZSBlbWJlcgpAc3VibW9kdWxlIGVtYmVyLXJ1bnRpbWUKKi8K
        Cgp2YXIgc2V0ID0gRW1iZXIuc2V0LCBnZXQgPSBFbWJlci5nZXQsIGd1aWRG
        b3IgPSBFbWJlci5ndWlkRm9yOwp2YXIgZm9yRWFjaCA9IEVtYmVyLkVudW1l
        cmFibGVVdGlscy5mb3JFYWNoLAogICAgaW5kZXhPZiA9IEVtYmVyLkFycmF5
        UG9seWZpbGxzLmluZGV4T2Y7Cgp2YXIgRWFjaEFycmF5ID0gRW1iZXIuT2Jq
        ZWN0LmV4dGVuZChFbWJlci5BcnJheSwgewoKICBpbml0OiBmdW5jdGlvbihj
        b250ZW50LCBrZXlOYW1lLCBvd25lcikgewogICAgdGhpcy5fc3VwZXIoKTsK
        ICAgIHRoaXMuX2tleU5hbWUgPSBrZXlOYW1lOwogICAgdGhpcy5fb3duZXIg
        ICA9IG93bmVyOwogICAgdGhpcy5fY29udGVudCA9IGNvbnRlbnQ7CiAgfSwK
        CiAgb2JqZWN0QXQ6IGZ1bmN0aW9uKGlkeCkgewogICAgdmFyIGl0ZW0gPSB0
        aGlzLl9jb250ZW50Lm9iamVjdEF0KGlkeCk7CiAgICByZXR1cm4gaXRlbSAm
        JiBnZXQoaXRlbSwgdGhpcy5fa2V5TmFtZSk7CiAgfSwKCiAgbGVuZ3RoOiBF
        bWJlci5jb21wdXRlZChmdW5jdGlvbigpIHsKICAgIHZhciBjb250ZW50ID0g
        dGhpcy5fY29udGVudDsKICAgIHJldHVybiBjb250ZW50ID8gZ2V0KGNvbnRl
        bnQsICdsZW5ndGgnKSA6IDA7CiAgfSkKCn0pOwoKdmFyIElTX09CU0VSVkVS
        ID0gL14uKzooYmVmb3JlfGNoYW5nZSkkLzsKCmZ1bmN0aW9uIGFkZE9ic2Vy
        dmVyRm9yQ29udGVudEtleShjb250ZW50LCBrZXlOYW1lLCBwcm94eSwgaWR4
        LCBsb2MpIHsKICB2YXIgb2JqZWN0cyA9IHByb3h5Ll9vYmplY3RzLCBndWlk
        OwogIGlmICghb2JqZWN0cykgb2JqZWN0cyA9IHByb3h5Ll9vYmplY3RzID0g
        e307CgogIHdoaWxlKC0tbG9jPj1pZHgpIHsKICAgIHZhciBpdGVtID0gY29u
        dGVudC5vYmplY3RBdChsb2MpOwogICAgaWYgKGl0ZW0pIHsKICAgICAgRW1i
        ZXIuYXNzZXJ0KCdXaGVuIHVzaW5nIEBlYWNoIHRvIG9ic2VydmUgdGhlIGFy
        cmF5ICcgKyBjb250ZW50ICsgJywgdGhlIGFycmF5IG11c3QgcmV0dXJuIGFu
        IG9iamVjdCcsIEVtYmVyLnR5cGVPZihpdGVtKSA9PT0gJ2luc3RhbmNlJyB8
        fCBFbWJlci50eXBlT2YoaXRlbSkgPT09ICdvYmplY3QnKTsKICAgICAgRW1i
        ZXIuYWRkQmVmb3JlT2JzZXJ2ZXIoaXRlbSwga2V5TmFtZSwgcHJveHksICdj
        b250ZW50S2V5V2lsbENoYW5nZScpOwogICAgICBFbWJlci5hZGRPYnNlcnZl
        cihpdGVtLCBrZXlOYW1lLCBwcm94eSwgJ2NvbnRlbnRLZXlEaWRDaGFuZ2Un
        KTsKCiAgICAgIC8vIGtlZXAgdHJhY2sgb2YgdGhlIGluZGV4IGVhY2ggaXRl
        bSB3YXMgZm91bmQgYXQgc28gd2UgY2FuIG1hcAogICAgICAvLyBpdCBiYWNr
        IHdoZW4gdGhlIG9iaiBjaGFuZ2VzLgogICAgICBndWlkID0gZ3VpZEZvcihp
        dGVtKTsKICAgICAgaWYgKCFvYmplY3RzW2d1aWRdKSBvYmplY3RzW2d1aWRd
        ID0gW107CiAgICAgIG9iamVjdHNbZ3VpZF0ucHVzaChsb2MpOwogICAgfQog
        IH0KfQoKZnVuY3Rpb24gcmVtb3ZlT2JzZXJ2ZXJGb3JDb250ZW50S2V5KGNv
        bnRlbnQsIGtleU5hbWUsIHByb3h5LCBpZHgsIGxvYykgewogIHZhciBvYmpl
        Y3RzID0gcHJveHkuX29iamVjdHM7CiAgaWYgKCFvYmplY3RzKSBvYmplY3Rz
        ID0gcHJveHkuX29iamVjdHMgPSB7fTsKICB2YXIgaW5kaWNpZXMsIGd1aWQ7
        CgogIHdoaWxlKC0tbG9jPj1pZHgpIHsKICAgIHZhciBpdGVtID0gY29udGVu
        dC5vYmplY3RBdChsb2MpOwogICAgaWYgKGl0ZW0pIHsKICAgICAgRW1iZXIu
        cmVtb3ZlQmVmb3JlT2JzZXJ2ZXIoaXRlbSwga2V5TmFtZSwgcHJveHksICdj
        b250ZW50S2V5V2lsbENoYW5nZScpOwogICAgICBFbWJlci5yZW1vdmVPYnNl
        cnZlcihpdGVtLCBrZXlOYW1lLCBwcm94eSwgJ2NvbnRlbnRLZXlEaWRDaGFu
        Z2UnKTsKCiAgICAgIGd1aWQgPSBndWlkRm9yKGl0ZW0pOwogICAgICBpbmRp
        Y2llcyA9IG9iamVjdHNbZ3VpZF07CiAgICAgIGluZGljaWVzW2luZGV4T2Yu
        Y2FsbChpbmRpY2llcywgbG9jKV0gPSBudWxsOwogICAgfQogIH0KfQoKLyoq
        CiAgVGhpcyBpcyB0aGUgb2JqZWN0IGluc3RhbmNlIHJldHVybmVkIHdoZW4g
        eW91IGdldCB0aGUgYEBlYWNoYCBwcm9wZXJ0eSBvbiBhbgogIGFycmF5LiBJ
        dCB1c2VzIHRoZSB1bmtub3duUHJvcGVydHkgaGFuZGxlciB0byBhdXRvbWF0
        aWNhbGx5IGNyZWF0ZQogIEVhY2hBcnJheSBpbnN0YW5jZXMgZm9yIHByb3Bl
        cnR5IG5hbWVzLgoKICBAcHJpdmF0ZQogIEBjbGFzcyBFYWNoUHJveHkKICBA
        bmFtZXNwYWNlIEVtYmVyCiAgQGV4dGVuZHMgRW1iZXIuT2JqZWN0CiovCkVt
        YmVyLkVhY2hQcm94eSA9IEVtYmVyLk9iamVjdC5leHRlbmQoewoKICBpbml0
        OiBmdW5jdGlvbihjb250ZW50KSB7CiAgICB0aGlzLl9zdXBlcigpOwogICAg
        dGhpcy5fY29udGVudCA9IGNvbnRlbnQ7CiAgICBjb250ZW50LmFkZEFycmF5
        T2JzZXJ2ZXIodGhpcyk7CgogICAgLy8gaW4gY2FzZSBzb21lb25lIGlzIGFs
        cmVhZHkgb2JzZXJ2aW5nIHNvbWUga2V5cyBtYWtlIHN1cmUgdGhleSBhcmUK
        ICAgIC8vIGFkZGVkCiAgICBmb3JFYWNoKEVtYmVyLndhdGNoZWRFdmVudHMo
        dGhpcyksIGZ1bmN0aW9uKGV2ZW50TmFtZSkgewogICAgICB0aGlzLmRpZEFk
        ZExpc3RlbmVyKGV2ZW50TmFtZSk7CiAgICB9LCB0aGlzKTsKICB9LAoKICAv
        KioKICAgIFlvdSBjYW4gZGlyZWN0bHkgYWNjZXNzIG1hcHBlZCBwcm9wZXJ0
        aWVzIGJ5IHNpbXBseSByZXF1ZXN0aW5nIHRoZW0uCiAgICBUaGUgYHVua25v
        d25Qcm9wZXJ0eWAgaGFuZGxlciB3aWxsIGdlbmVyYXRlIGFuIEVhY2hBcnJh
        eSBvZiBlYWNoIGl0ZW0uCgogICAgQG1ldGhvZCB1bmtub3duUHJvcGVydHkK
        ICAgIEBwYXJhbSBrZXlOYW1lIHtTdHJpbmd9CiAgICBAcGFyYW0gdmFsdWUg
        eyp9CiAgKi8KICB1bmtub3duUHJvcGVydHk6IGZ1bmN0aW9uKGtleU5hbWUs
        IHZhbHVlKSB7CiAgICB2YXIgcmV0OwogICAgcmV0ID0gbmV3IEVhY2hBcnJh
        eSh0aGlzLl9jb250ZW50LCBrZXlOYW1lLCB0aGlzKTsKICAgIEVtYmVyLmRl
        ZmluZVByb3BlcnR5KHRoaXMsIGtleU5hbWUsIG51bGwsIHJldCk7CiAgICB0
        aGlzLmJlZ2luT2JzZXJ2aW5nQ29udGVudEtleShrZXlOYW1lKTsKICAgIHJl
        dHVybiByZXQ7CiAgfSwKCiAgLy8gLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4u
        Li4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLgogIC8vIEFSUkFZ
        IENIQU5HRVMKICAvLyBJbnZva2VzIHdoZW5ldmVyIHRoZSBjb250ZW50IGFy
        cmF5IGl0c2VsZiBjaGFuZ2VzLgoKICBhcnJheVdpbGxDaGFuZ2U6IGZ1bmN0
        aW9uKGNvbnRlbnQsIGlkeCwgcmVtb3ZlZENudCwgYWRkZWRDbnQpIHsKICAg
        IHZhciBrZXlzID0gdGhpcy5fa2V5cywga2V5LCBsaW07CgogICAgbGltID0g
        cmVtb3ZlZENudD4wID8gaWR4K3JlbW92ZWRDbnQgOiAtMTsKICAgIEVtYmVy
        LmJlZ2luUHJvcGVydHlDaGFuZ2VzKHRoaXMpOwoKICAgIGZvcihrZXkgaW4g
        a2V5cykgewogICAgICBpZiAoIWtleXMuaGFzT3duUHJvcGVydHkoa2V5KSkg
        eyBjb250aW51ZTsgfQoKICAgICAgaWYgKGxpbT4wKSB7IHJlbW92ZU9ic2Vy
        dmVyRm9yQ29udGVudEtleShjb250ZW50LCBrZXksIHRoaXMsIGlkeCwgbGlt
        KTsgfQoKICAgICAgRW1iZXIucHJvcGVydHlXaWxsQ2hhbmdlKHRoaXMsIGtl
        eSk7CiAgICB9CgogICAgRW1iZXIucHJvcGVydHlXaWxsQ2hhbmdlKHRoaXMu
        X2NvbnRlbnQsICdAZWFjaCcpOwogICAgRW1iZXIuZW5kUHJvcGVydHlDaGFu
        Z2VzKHRoaXMpOwogIH0sCgogIGFycmF5RGlkQ2hhbmdlOiBmdW5jdGlvbihj
        b250ZW50LCBpZHgsIHJlbW92ZWRDbnQsIGFkZGVkQ250KSB7CiAgICB2YXIg
        a2V5cyA9IHRoaXMuX2tleXMsIGxpbTsKCiAgICBsaW0gPSBhZGRlZENudD4w
        ID8gaWR4K2FkZGVkQ250IDogLTE7CiAgICBFbWJlci5jaGFuZ2VQcm9wZXJ0
        aWVzKGZ1bmN0aW9uKCkgewogICAgICBmb3IodmFyIGtleSBpbiBrZXlzKSB7
        CiAgICAgICAgaWYgKCFrZXlzLmhhc093blByb3BlcnR5KGtleSkpIHsgY29u
        dGludWU7IH0KCiAgICAgICAgaWYgKGxpbT4wKSB7IGFkZE9ic2VydmVyRm9y
        Q29udGVudEtleShjb250ZW50LCBrZXksIHRoaXMsIGlkeCwgbGltKTsgfQoK
        ICAgICAgICBFbWJlci5wcm9wZXJ0eURpZENoYW5nZSh0aGlzLCBrZXkpOwog
        ICAgICB9CgogICAgICBFbWJlci5wcm9wZXJ0eURpZENoYW5nZSh0aGlzLl9j
        b250ZW50LCAnQGVhY2gnKTsKICAgIH0sIHRoaXMpOwogIH0sCgogIC8vIC4u
        Li4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4u
        Li4uLi4uLi4uLi4KICAvLyBMSVNURU4gRk9SIE5FVyBPQlNFUlZFUlMgQU5E
        IE9USEVSIEVWRU5UIExJU1RFTkVSUwogIC8vIFN0YXJ0IG1vbml0b3Jpbmcg
        a2V5cyBiYXNlZCBvbiB3aG8gaXMgbGlzdGVuaW5nLi4uCgogIGRpZEFkZExp
        c3RlbmVyOiBmdW5jdGlvbihldmVudE5hbWUpIHsKICAgIGlmIChJU19PQlNF
        UlZFUi50ZXN0KGV2ZW50TmFtZSkpIHsKICAgICAgdGhpcy5iZWdpbk9ic2Vy
        dmluZ0NvbnRlbnRLZXkoZXZlbnROYW1lLnNsaWNlKDAsIC03KSk7CiAgICB9
        CiAgfSwKCiAgZGlkUmVtb3ZlTGlzdGVuZXI6IGZ1bmN0aW9uKGV2ZW50TmFt
        ZSkgewogICAgaWYgKElTX09CU0VSVkVSLnRlc3QoZXZlbnROYW1lKSkgewog
        ICAgICB0aGlzLnN0b3BPYnNlcnZpbmdDb250ZW50S2V5KGV2ZW50TmFtZS5z
        bGljZSgwLCAtNykpOwogICAgfQogIH0sCgogIC8vIC4uLi4uLi4uLi4uLi4u
        Li4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4K
        ICAvLyBDT05URU5UIEtFWSBPQlNFUlZJTkcKICAvLyBBY3R1YWwgd2F0Y2gg
        a2V5cyBvbiB0aGUgc291cmNlIGNvbnRlbnQuCgogIGJlZ2luT2JzZXJ2aW5n
        Q29udGVudEtleTogZnVuY3Rpb24oa2V5TmFtZSkgewogICAgdmFyIGtleXMg
        PSB0aGlzLl9rZXlzOwogICAgaWYgKCFrZXlzKSBrZXlzID0gdGhpcy5fa2V5
        cyA9IHt9OwogICAgaWYgKCFrZXlzW2tleU5hbWVdKSB7CiAgICAgIGtleXNb
        a2V5TmFtZV0gPSAxOwogICAgICB2YXIgY29udGVudCA9IHRoaXMuX2NvbnRl
        bnQsCiAgICAgICAgICBsZW4gPSBnZXQoY29udGVudCwgJ2xlbmd0aCcpOwog
        ICAgICBhZGRPYnNlcnZlckZvckNvbnRlbnRLZXkoY29udGVudCwga2V5TmFt
        ZSwgdGhpcywgMCwgbGVuKTsKICAgIH0gZWxzZSB7CiAgICAgIGtleXNba2V5
        TmFtZV0rKzsKICAgIH0KICB9LAoKICBzdG9wT2JzZXJ2aW5nQ29udGVudEtl
        eTogZnVuY3Rpb24oa2V5TmFtZSkgewogICAgdmFyIGtleXMgPSB0aGlzLl9r
        ZXlzOwogICAgaWYgKGtleXMgJiYgKGtleXNba2V5TmFtZV0+MCkgJiYgKC0t
        a2V5c1trZXlOYW1lXTw9MCkpIHsKICAgICAgdmFyIGNvbnRlbnQgPSB0aGlz
        Ll9jb250ZW50LAogICAgICAgICAgbGVuICAgICA9IGdldChjb250ZW50LCAn
        bGVuZ3RoJyk7CiAgICAgIHJlbW92ZU9ic2VydmVyRm9yQ29udGVudEtleShj
        b250ZW50LCBrZXlOYW1lLCB0aGlzLCAwLCBsZW4pOwogICAgfQogIH0sCgog
        IGNvbnRlbnRLZXlXaWxsQ2hhbmdlOiBmdW5jdGlvbihvYmosIGtleU5hbWUp
        IHsKICAgIEVtYmVyLnByb3BlcnR5V2lsbENoYW5nZSh0aGlzLCBrZXlOYW1l
        KTsKICB9LAoKICBjb250ZW50S2V5RGlkQ2hhbmdlOiBmdW5jdGlvbihvYmos
        IGtleU5hbWUpIHsKICAgIEVtYmVyLnByb3BlcnR5RGlkQ2hhbmdlKHRoaXMs
        IGtleU5hbWUpOwogIH0KCn0pOwoKCgp9KSgpOwoKCgooZnVuY3Rpb24oKSB7
        Ci8qKgpAbW9kdWxlIGVtYmVyCkBzdWJtb2R1bGUgZW1iZXItcnVudGltZQoq
        LwoKCnZhciBnZXQgPSBFbWJlci5nZXQsIHNldCA9IEVtYmVyLnNldCwgcmVw
        bGFjZSA9IEVtYmVyLkVudW1lcmFibGVVdGlscy5fcmVwbGFjZTsKCi8vIEFk
        ZCBFbWJlci5BcnJheSB0byBBcnJheS5wcm90b3R5cGUuIFJlbW92ZSBtZXRo
        b2RzIHdpdGggbmF0aXZlCi8vIGltcGxlbWVudGF0aW9ucyBhbmQgc3VwcGx5
        IHNvbWUgbW9yZSBvcHRpbWl6ZWQgdmVyc2lvbnMgb2YgZ2VuZXJpYyBtZXRo
        b2RzCi8vIGJlY2F1c2UgdGhleSBhcmUgc28gY29tbW9uLgp2YXIgTmF0aXZl
        QXJyYXkgPSBFbWJlci5NaXhpbi5jcmVhdGUoRW1iZXIuTXV0YWJsZUFycmF5
        LCBFbWJlci5PYnNlcnZhYmxlLCBFbWJlci5Db3B5YWJsZSwgewoKICAvLyBi
        ZWNhdXNlIGxlbmd0aCBpcyBhIGJ1aWx0LWluIHByb3BlcnR5IHdlIG5lZWQg
        dG8ga25vdyB0byBqdXN0IGdldCB0aGUKICAvLyBvcmlnaW5hbCBwcm9wZXJ0
        eS4KICBnZXQ6IGZ1bmN0aW9uKGtleSkgewogICAgaWYgKGtleT09PSdsZW5n
        dGgnKSByZXR1cm4gdGhpcy5sZW5ndGg7CiAgICBlbHNlIGlmICgnbnVtYmVy
        JyA9PT0gdHlwZW9mIGtleSkgcmV0dXJuIHRoaXNba2V5XTsKICAgIGVsc2Ug
        cmV0dXJuIHRoaXMuX3N1cGVyKGtleSk7CiAgfSwKCiAgb2JqZWN0QXQ6IGZ1
        bmN0aW9uKGlkeCkgewogICAgcmV0dXJuIHRoaXNbaWR4XTsKICB9LAoKICAv
        LyBwcmltaXRpdmUgZm9yIGFycmF5IHN1cHBvcnQuCiAgcmVwbGFjZTogZnVu
        Y3Rpb24oaWR4LCBhbXQsIG9iamVjdHMpIHsKCiAgICBpZiAodGhpcy5pc0Zy
        b3plbikgdGhyb3cgRW1iZXIuRlJPWkVOX0VSUk9SOwoKICAgIC8vIGlmIHdl
        IHJlcGxhY2VkIGV4YWN0bHkgdGhlIHNhbWUgbnVtYmVyIG9mIGl0ZW1zLCB0
        aGVuIHBhc3Mgb25seSB0aGUKICAgIC8vIHJlcGxhY2VkIHJhbmdlLiBPdGhl
        cndpc2UsIHBhc3MgdGhlIGZ1bGwgcmVtYWluaW5nIGFycmF5IGxlbmd0aAog
        ICAgLy8gc2luY2UgZXZlcnl0aGluZyBoYXMgc2hpZnRlZAogICAgdmFyIGxl
        biA9IG9iamVjdHMgPyBnZXQob2JqZWN0cywgJ2xlbmd0aCcpIDogMDsKICAg
        IHRoaXMuYXJyYXlDb250ZW50V2lsbENoYW5nZShpZHgsIGFtdCwgbGVuKTsK
        CiAgICBpZiAobGVuID09PSAwKSB7CiAgICAgIHRoaXMuc3BsaWNlKGlkeCwg
        YW10KTsKICAgIH0gZWxzZSB7CiAgICAgIHJlcGxhY2UodGhpcywgaWR4LCBh
        bXQsIG9iamVjdHMpOwogICAgfQoKICAgIHRoaXMuYXJyYXlDb250ZW50RGlk
        Q2hhbmdlKGlkeCwgYW10LCBsZW4pOwogICAgcmV0dXJuIHRoaXM7CiAgfSwK
        CiAgLy8gSWYgeW91IGFzayBmb3IgYW4gdW5rbm93biBwcm9wZXJ0eSwgdGhl
        biB0cnkgdG8gY29sbGVjdCB0aGUgdmFsdWUKICAvLyBmcm9tIG1lbWJlciBp
        dGVtcy4KICB1bmtub3duUHJvcGVydHk6IGZ1bmN0aW9uKGtleSwgdmFsdWUp
        IHsKICAgIHZhciByZXQ7Ly8gPSB0aGlzLnJlZHVjZWRQcm9wZXJ0eShrZXks
        IHZhbHVlKSA7CiAgICBpZiAoKHZhbHVlICE9PSB1bmRlZmluZWQpICYmIHJl
        dCA9PT0gdW5kZWZpbmVkKSB7CiAgICAgIHJldCA9IHRoaXNba2V5XSA9IHZh
        bHVlOwogICAgfQogICAgcmV0dXJuIHJldCA7CiAgfSwKCiAgLy8gSWYgYnJv
        d3NlciBkaWQgbm90IGltcGxlbWVudCBpbmRleE9mIG5hdGl2ZWx5LCB0aGVu
        IG92ZXJyaWRlIHdpdGgKICAvLyBzcGVjaWFsaXplZCB2ZXJzaW9uCiAgaW5k
        ZXhPZjogZnVuY3Rpb24ob2JqZWN0LCBzdGFydEF0KSB7CiAgICB2YXIgaWR4
        LCBsZW4gPSB0aGlzLmxlbmd0aDsKCiAgICBpZiAoc3RhcnRBdCA9PT0gdW5k
        ZWZpbmVkKSBzdGFydEF0ID0gMDsKICAgIGVsc2Ugc3RhcnRBdCA9IChzdGFy
        dEF0IDwgMCkgPyBNYXRoLmNlaWwoc3RhcnRBdCkgOiBNYXRoLmZsb29yKHN0
        YXJ0QXQpOwogICAgaWYgKHN0YXJ0QXQgPCAwKSBzdGFydEF0ICs9IGxlbjsK
        CiAgICBmb3IoaWR4PXN0YXJ0QXQ7aWR4PGxlbjtpZHgrKykgewogICAgICBp
        ZiAodGhpc1tpZHhdID09PSBvYmplY3QpIHJldHVybiBpZHggOwogICAgfQog
        ICAgcmV0dXJuIC0xOwogIH0sCgogIGxhc3RJbmRleE9mOiBmdW5jdGlvbihv
        YmplY3QsIHN0YXJ0QXQpIHsKICAgIHZhciBpZHgsIGxlbiA9IHRoaXMubGVu
        Z3RoOwoKICAgIGlmIChzdGFydEF0ID09PSB1bmRlZmluZWQpIHN0YXJ0QXQg
        PSBsZW4tMTsKICAgIGVsc2Ugc3RhcnRBdCA9IChzdGFydEF0IDwgMCkgPyBN
        YXRoLmNlaWwoc3RhcnRBdCkgOiBNYXRoLmZsb29yKHN0YXJ0QXQpOwogICAg
        aWYgKHN0YXJ0QXQgPCAwKSBzdGFydEF0ICs9IGxlbjsKCiAgICBmb3IoaWR4
        PXN0YXJ0QXQ7aWR4Pj0wO2lkeC0tKSB7CiAgICAgIGlmICh0aGlzW2lkeF0g
        PT09IG9iamVjdCkgcmV0dXJuIGlkeCA7CiAgICB9CiAgICByZXR1cm4gLTE7
        CiAgfSwKCiAgY29weTogZnVuY3Rpb24oZGVlcCkgewogICAgaWYgKGRlZXAp
        IHsKICAgICAgcmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uKGl0ZW0pIHsgcmV0
        dXJuIEVtYmVyLmNvcHkoaXRlbSwgdHJ1ZSk7IH0pOwogICAgfQoKICAgIHJl
        dHVybiB0aGlzLnNsaWNlKCk7CiAgfQp9KTsKCi8vIFJlbW92ZSBhbnkgbWV0
        aG9kcyBpbXBsZW1lbnRlZCBuYXRpdmVseSBzbyB3ZSBkb24ndCBvdmVycmlk
        ZSB0aGVtCnZhciBpZ25vcmUgPSBbJ2xlbmd0aCddOwpFbWJlci5FbnVtZXJh
        YmxlVXRpbHMuZm9yRWFjaChOYXRpdmVBcnJheS5rZXlzKCksIGZ1bmN0aW9u
        KG1ldGhvZE5hbWUpIHsKICBpZiAoQXJyYXkucHJvdG90eXBlW21ldGhvZE5h
        bWVdKSBpZ25vcmUucHVzaChtZXRob2ROYW1lKTsKfSk7CgppZiAoaWdub3Jl
        Lmxlbmd0aD4wKSB7CiAgTmF0aXZlQXJyYXkgPSBOYXRpdmVBcnJheS53aXRo
        b3V0LmFwcGx5KE5hdGl2ZUFycmF5LCBpZ25vcmUpOwp9CgovKioKICBUaGUg
        TmF0aXZlQXJyYXkgbWl4aW4gY29udGFpbnMgdGhlIHByb3BlcnRpZXMgbmVl
        ZGVkIHRvIHRvIG1ha2UgdGhlIG5hdGl2ZQogIEFycmF5IHN1cHBvcnQgRW1i
        ZXIuTXV0YWJsZUFycmF5IGFuZCBhbGwgb2YgaXRzIGRlcGVuZGVudCBBUElz
        LiBVbmxlc3MgeW91CiAgaGF2ZSBgRW1iZXIuRVhURU5EX1BST1RPVFlQRVNg
        IG9yIGBFbWJlci5FWFRFTkRfUFJPVE9UWVBFUy5BcnJheWAgc2V0IHRvCiAg
        ZmFsc2UsIHRoaXMgd2lsbCBiZSBhcHBsaWVkIGF1dG9tYXRpY2FsbHkuIE90
        aGVyd2lzZSB5b3UgY2FuIGFwcGx5IHRoZSBtaXhpbgogIGF0IGFueXRpbWUg
        YnkgY2FsbGluZyBgRW1iZXIuTmF0aXZlQXJyYXkuYWN0aXZhdGVgLgoKICBA
        Y2xhc3MgTmF0aXZlQXJyYXkKICBAbmFtZXNwYWNlIEVtYmVyCiAgQHVzZXMg
        RW1iZXIuTXV0YWJsZUFycmF5CiAgQHVzZXMgRW1iZXIuT2JzZXJ2YWJsZQog
        IEB1c2VzIEVtYmVyLkNvcHlhYmxlCiovCkVtYmVyLk5hdGl2ZUFycmF5ID0g
        TmF0aXZlQXJyYXk7CgovKioKICBDcmVhdGVzIGFuIGBFbWJlci5OYXRpdmVB
        cnJheWAgZnJvbSBhbiBBcnJheSBsaWtlIG9iamVjdC4KICBEb2VzIG5vdCBt
        b2RpZnkgdGhlIG9yaWdpbmFsIG9iamVjdC4gRW1iZXIuQSBpcyBub3QgbmVl
        ZGVkIGlmCiAgYEVtYmVyLkVYVEVORF9QUk9UT1RZUEVTYCBpcyBgdHJ1ZWAg
        KHRoZSBkZWZhdWx0IHZhbHVlKS4gSG93ZXZlciwKICBpdCBpcyByZWNvbW1l
        bmRlZCB0aGF0IHlvdSB1c2UgRW1iZXIuQSB3aGVuIGNyZWF0aW5nIGFkZG9u
        cyBmb3IKICBlbWJlciBvciB3aGVuIHlvdSBjYW4gbm90IGd1YXJhbnRlZSB0
        aGF0IGBFbWJlci5FWFRFTkRfUFJPVE9UWVBFU2AKICB3aWxsIGJlIGB0cnVl
        YC4KCiAgRXhhbXBsZQoKICBgYGBqcwogIHZhciBQYWdpbmF0aW9uID0gRW1i
        ZXIuQ29sbGVjdGlvblZpZXcuZXh0ZW5kKHsKICAgIHRhZ05hbWU6ICd1bCcs
        CiAgICBjbGFzc05hbWVzOiBbJ3BhZ2luYXRpb24nXSwKICAgIGluaXQ6IGZ1
        bmN0aW9uKCkgewogICAgICB0aGlzLl9zdXBlcigpOwogICAgICBpZiAoIXRo
        aXMuZ2V0KCdjb250ZW50JykpIHsKICAgICAgICB0aGlzLnNldCgnY29udGVu
        dCcsIEVtYmVyLkEoW10pKTsKICAgICAgfQogICAgfQogIH0pOwogIGBgYAoK
        ICBAbWV0aG9kIEEKICBAZm9yIEVtYmVyCiAgQHJldHVybiB7RW1iZXIuTmF0
        aXZlQXJyYXl9CiovCkVtYmVyLkEgPSBmdW5jdGlvbihhcnIpIHsKICBpZiAo
        YXJyID09PSB1bmRlZmluZWQpIHsgYXJyID0gW107IH0KICByZXR1cm4gRW1i
        ZXIuQXJyYXkuZGV0ZWN0KGFycikgPyBhcnIgOiBFbWJlci5OYXRpdmVBcnJh
        eS5hcHBseShhcnIpOwp9OwoKLyoqCiAgQWN0aXZhdGVzIHRoZSBtaXhpbiBv
        biB0aGUgQXJyYXkucHJvdG90eXBlIGlmIG5vdCBhbHJlYWR5IGFwcGxpZWQu
        IENhbGxpbmcKICB0aGlzIG1ldGhvZCBtb3JlIHRoYW4gb25jZSBpcyBzYWZl
        LiBUaGlzIHdpbGwgYmUgY2FsbGVkIHdoZW4gZW1iZXIgaXMgbG9hZGVkCiAg
        dW5sZXNzIHlvdSBoYXZlIGBFbWJlci5FWFRFTkRfUFJPVE9UWVBFU2Agb3Ig
        YEVtYmVyLkVYVEVORF9QUk9UT1RZUEVTLkFycmF5YAogIHNldCB0byBgZmFs
        c2VgLgoKICBFeGFtcGxlCgogIGBgYGpzCiAgaWYgKEVtYmVyLkVYVEVORF9Q
        Uk9UT1RZUEVTID09PSB0cnVlIHx8IEVtYmVyLkVYVEVORF9QUk9UT1RZUEVT
        LkFycmF5KSB7CiAgICBFbWJlci5OYXRpdmVBcnJheS5hY3RpdmF0ZSgpOwog
        IH0KICBgYGAKCiAgQG1ldGhvZCBhY3RpdmF0ZQogIEBmb3IgRW1iZXIuTmF0
        aXZlQXJyYXkKICBAc3RhdGljCiAgQHJldHVybiB7dm9pZH0KKi8KRW1iZXIu
        TmF0aXZlQXJyYXkuYWN0aXZhdGUgPSBmdW5jdGlvbigpIHsKICBOYXRpdmVB
        cnJheS5hcHBseShBcnJheS5wcm90b3R5cGUpOwoKICBFbWJlci5BID0gZnVu
        Y3Rpb24oYXJyKSB7IHJldHVybiBhcnIgfHwgW107IH07Cn07CgppZiAoRW1i
        ZXIuRVhURU5EX1BST1RPVFlQRVMgPT09IHRydWUgfHwgRW1iZXIuRVhURU5E
        X1BST1RPVFlQRVMuQXJyYXkpIHsKICBFbWJlci5OYXRpdmVBcnJheS5hY3Rp
        dmF0ZSgpOwp9CgoKfSkoKTsKCgoKKGZ1bmN0aW9uKCkgewovKioKQG1vZHVs
        ZSBlbWJlcgpAc3VibW9kdWxlIGVtYmVyLXJ1bnRpbWUKKi8KCnZhciBnZXQg
        PSBFbWJlci5nZXQsIHNldCA9IEVtYmVyLnNldCwgZ3VpZEZvciA9IEVtYmVy
        Lmd1aWRGb3IsIGlzTm9uZSA9IEVtYmVyLmlzTm9uZSwgZm10ID0gRW1iZXIu
        U3RyaW5nLmZtdDsKCi8qKgogIEFuIHVub3JkZXJlZCBjb2xsZWN0aW9uIG9m
        IG9iamVjdHMuCgogIEEgU2V0IHdvcmtzIGEgYml0IGxpa2UgYW4gYXJyYXkg
        ZXhjZXB0IHRoYXQgaXRzIGl0ZW1zIGFyZSBub3Qgb3JkZXJlZC4gWW91CiAg
        Y2FuIGNyZWF0ZSBhIHNldCB0byBlZmZpY2llbnRseSB0ZXN0IGZvciBtZW1i
        ZXJzaGlwIGZvciBhbiBvYmplY3QuIFlvdSBjYW4KICBhbHNvIGl0ZXJhdGUg
        dGhyb3VnaCBhIHNldCBqdXN0IGxpa2UgYW4gYXJyYXksIGV2ZW4gYWNjZXNz
        aW5nIG9iamVjdHMgYnkKICBpbmRleCwgaG93ZXZlciB0aGVyZSBpcyBubyBn
        dWFyYW50ZWUgYXMgdG8gdGhlaXIgb3JkZXIuCgogIEFsbCBTZXRzIGFyZSBv
        YnNlcnZhYmxlIHZpYSB0aGUgRW51bWVyYWJsZSBPYnNlcnZlciBBUEkgLSB3
        aGljaCB3b3JrcwogIG9uIGFueSBlbnVtZXJhYmxlIG9iamVjdCBpbmNsdWRp
        bmcgYm90aCBTZXRzIGFuZCBBcnJheXMuCgogICMjIENyZWF0aW5nIGEgU2V0
        CgogIFlvdSBjYW4gY3JlYXRlIGEgc2V0IGxpa2UgeW91IHdvdWxkIG1vc3Qg
        b2JqZWN0cyB1c2luZwogIGBuZXcgRW1iZXIuU2V0KClgLiBNb3N0IG5ldyBz
        ZXRzIHlvdSBjcmVhdGUgd2lsbCBiZSBlbXB0eSwgYnV0IHlvdSBjYW4KICBh
        bHNvIGluaXRpYWxpemUgdGhlIHNldCB3aXRoIHNvbWUgY29udGVudCBieSBw
        YXNzaW5nIGFuIGFycmF5IG9yIG90aGVyCiAgZW51bWVyYWJsZSBvZiBvYmpl
        Y3RzIHRvIHRoZSBjb25zdHJ1Y3Rvci4KCiAgRmluYWxseSwgeW91IGNhbiBw
        YXNzIGluIGFuIGV4aXN0aW5nIHNldCBhbmQgdGhlIHNldCB3aWxsIGJlIGNv
        cGllZC4gWW91CiAgY2FuIGFsc28gY3JlYXRlIGEgY29weSBvZiBhIHNldCBi
        eSBjYWxsaW5nIGBFbWJlci5TZXQjY29weSgpYC4KCiAgYGBgamF2YXNjcmlw
        dAogIC8vIGNyZWF0ZXMgYSBuZXcgZW1wdHkgc2V0CiAgdmFyIGZvdW5kTmFt
        ZXMgPSBuZXcgRW1iZXIuU2V0KCk7CgogIC8vIGNyZWF0ZXMgYSBzZXQgd2l0
        aCBmb3VyIG5hbWVzIGluIGl0LgogIHZhciBuYW1lcyA9IG5ldyBFbWJlci5T
        ZXQoWyJDaGFybGVzIiwgIlRvbSIsICJKdWFuIiwgIkFsZXgiXSk7IC8vIDpQ
        CgogIC8vIGNyZWF0ZXMgYSBjb3B5IG9mIHRoZSBuYW1lcyBzZXQuCiAgdmFy
        IG5hbWVzQ29weSA9IG5ldyBFbWJlci5TZXQobmFtZXMpOwoKICAvLyBzYW1l
        IGFzIGFib3ZlLgogIHZhciBhbm90aGVyTmFtZXNDb3B5ID0gbmFtZXMuY29w
        eSgpOwogIGBgYAoKICAjIyBBZGRpbmcvUmVtb3ZpbmcgT2JqZWN0cwoKICBZ
        b3UgZ2VuZXJhbGx5IGFkZCBvciByZW1vdmUgb2JqZWN0cyBmcm9tIGEgc2V0
        IHVzaW5nIGBhZGQoKWAgb3IKICBgcmVtb3ZlKClgLiBZb3UgY2FuIGFkZCBh
        bnkgdHlwZSBvZiBvYmplY3QgaW5jbHVkaW5nIHByaW1pdGl2ZXMgc3VjaCBh
        cwogIG51bWJlcnMsIHN0cmluZ3MsIGFuZCBib29sZWFucy4KCiAgVW5saWtl
        IGFycmF5cywgb2JqZWN0cyBjYW4gb25seSBleGlzdCBvbmUgdGltZSBpbiBh
        IHNldC4gSWYgeW91IGNhbGwgYGFkZCgpYAogIG9uIGEgc2V0IHdpdGggdGhl
        IHNhbWUgb2JqZWN0IG11bHRpcGxlIHRpbWVzLCB0aGUgb2JqZWN0IHdpbGwg
        b25seSBiZSBhZGRlZAogIG9uY2UuIExpa2V3aXNlLCBjYWxsaW5nIGByZW1v
        dmUoKWAgd2l0aCB0aGUgc2FtZSBvYmplY3QgbXVsdGlwbGUgdGltZXMgd2ls
        bAogIHJlbW92ZSB0aGUgb2JqZWN0IHRoZSBmaXJzdCB0aW1lIGFuZCBoYXZl
        IG5vIGVmZmVjdCBvbiBmdXR1cmUgY2FsbHMgdW50aWwKICB5b3UgYWRkIHRo
        ZSBvYmplY3QgdG8gdGhlIHNldCBhZ2Fpbi4KCiAgTk9URTogWW91IGNhbm5v
        dCBhZGQvcmVtb3ZlIGBudWxsYCBvciBgdW5kZWZpbmVkYCB0byBhIHNldC4g
        QW55IGF0dGVtcHQgdG8gZG8KICBzbyB3aWxsIGJlIGlnbm9yZWQuCgogIElu
        IGFkZGl0aW9uIHRvIGFkZC9yZW1vdmUgeW91IGNhbiBhbHNvIGNhbGwgYHB1
        c2goKWAvYHBvcCgpYC4gUHVzaCBiZWhhdmVzCiAganVzdCBsaWtlIGBhZGQo
        KWAgYnV0IGBwb3AoKWAsIHVubGlrZSBgcmVtb3ZlKClgIHdpbGwgcGljayBh
        biBhcmJpdHJhcnkKICBvYmplY3QsIHJlbW92ZSBpdCBhbmQgcmV0dXJuIGl0
        LiBUaGlzIGlzIGEgZ29vZCB3YXkgdG8gdXNlIGEgc2V0IGFzIGEgam9iCiAg
        cXVldWUgd2hlbiB5b3UgZG9uJ3QgY2FyZSB3aGljaCBvcmRlciB0aGUgam9i
        cyBhcmUgZXhlY3V0ZWQgaW4uCgogICMjIFRlc3RpbmcgZm9yIGFuIE9iamVj
        dAoKICBUbyB0ZXN0IGZvciBhbiBvYmplY3QncyBwcmVzZW5jZSBpbiBhIHNl
        dCB5b3Ugc2ltcGx5IGNhbGwKICBgRW1iZXIuU2V0I2NvbnRhaW5zKClgLgoK
        ICAjIyBPYnNlcnZpbmcgY2hhbmdlcwoKICBXaGVuIHVzaW5nIGBFbWJlci5T
        ZXRgLCB5b3UgY2FuIG9ic2VydmUgdGhlIGAiW10iYCBwcm9wZXJ0eSB0byBi
        ZQogIGFsZXJ0ZWQgd2hlbmV2ZXIgdGhlIGNvbnRlbnQgY2hhbmdlcy4gWW91
        IGNhbiBhbHNvIGFkZCBhbiBlbnVtZXJhYmxlCiAgb2JzZXJ2ZXIgdG8gdGhl
        IHNldCB0byBiZSBub3RpZmllZCBvZiBzcGVjaWZpYyBvYmplY3RzIHRoYXQg
        YXJlIGFkZGVkIGFuZAogIHJlbW92ZWQgZnJvbSB0aGUgc2V0LiBTZWUgW0Vt
        YmVyLkVudW1lcmFibGVdKC9hcGkvY2xhc3Nlcy9FbWJlci5FbnVtZXJhYmxl
        Lmh0bWwpCiAgZm9yIG1vcmUgaW5mb3JtYXRpb24gb24gZW51bWVyYWJsZXMu
        CgogIFRoaXMgaXMgb2Z0ZW4gdW5oZWxwZnVsLiBJZiB5b3UgYXJlIGZpbHRl
        cmluZyBzZXRzIG9mIG9iamVjdHMsIGZvciBpbnN0YW5jZSwKICBpdCBpcyB2
        ZXJ5IGluZWZmaWNpZW50IHRvIHJlLWZpbHRlciBhbGwgb2YgdGhlIGl0ZW1z
        IGVhY2ggdGltZSB0aGUgc2V0CiAgY2hhbmdlcy4gSXQgd291bGQgYmUgYmV0
        dGVyIGlmIHlvdSBjb3VsZCBqdXN0IGFkanVzdCB0aGUgZmlsdGVyZWQgc2V0
        IGJhc2VkCiAgb24gd2hhdCB3YXMgY2hhbmdlZCBvbiB0aGUgb3JpZ2luYWwg
        c2V0LiBUaGUgc2FtZSBpc3N1ZSBhcHBsaWVzIHRvIG1lcmdpbmcKICBzZXRz
        LCBhcyB3ZWxsLgoKICAjIyBPdGhlciBNZXRob2RzCgogIGBFbWJlci5TZXRg
        IHByaW1hcnkgaW1wbGVtZW50cyBvdGhlciBtaXhpbiBBUElzLiBGb3IgYSBj
        b21wbGV0ZSByZWZlcmVuY2UKICBvbiB0aGUgbWV0aG9kcyB5b3Ugd2lsbCB1
        c2Ugd2l0aCBgRW1iZXIuU2V0YCwgcGxlYXNlIGNvbnN1bHQgdGhlc2UgbWl4
        aW5zLgogIFRoZSBtb3N0IHVzZWZ1bCBvbmVzIHdpbGwgYmUgYEVtYmVyLkVu
        dW1lcmFibGVgIGFuZAogIGBFbWJlci5NdXRhYmxlRW51bWVyYWJsZWAgd2hp
        Y2ggaW1wbGVtZW50IG1vc3Qgb2YgdGhlIGNvbW1vbiBpdGVyYXRvcgogIG1l
        dGhvZHMgeW91IGFyZSB1c2VkIHRvIG9uIEFycmF5LgoKICBOb3RlIHRoYXQg
        eW91IGNhbiBhbHNvIHVzZSB0aGUgYEVtYmVyLkNvcHlhYmxlYCBhbmQgYEVt
        YmVyLkZyZWV6YWJsZWAKICBBUElzIG9uIGBFbWJlci5TZXRgIGFzIHdlbGwu
        IE9uY2UgYSBzZXQgaXMgZnJvemVuIGl0IGNhbiBubyBsb25nZXIgYmUKICBt
        b2RpZmllZC4gVGhlIGJlbmVmaXQgb2YgdGhpcyBpcyB0aGF0IHdoZW4geW91
        IGNhbGwgYGZyb3plbkNvcHkoKWAgb24gaXQsCiAgRW1iZXIgd2lsbCBhdm9p
        ZCBtYWtpbmcgY29waWVzIG9mIHRoZSBzZXQuIFRoaXMgYWxsb3dzIHlvdSB0
        byB3cml0ZQogIGNvZGUgdGhhdCBjYW4ga25vdyB3aXRoIGNlcnRhaW50eSB3
        aGVuIHRoZSB1bmRlcmx5aW5nIHNldCBkYXRhIHdpbGwgb3IKICB3aWxsIG5v
        dCBiZSBtb2RpZmllZC4KCiAgQGNsYXNzIFNldAogIEBuYW1lc3BhY2UgRW1i
        ZXIKICBAZXh0ZW5kcyBFbWJlci5Db3JlT2JqZWN0CiAgQHVzZXMgRW1iZXIu
        TXV0YWJsZUVudW1lcmFibGUKICBAdXNlcyBFbWJlci5Db3B5YWJsZQogIEB1
        c2VzIEVtYmVyLkZyZWV6YWJsZQogIEBzaW5jZSBFbWJlciAwLjkKKi8KRW1i
        ZXIuU2V0ID0gRW1iZXIuQ29yZU9iamVjdC5leHRlbmQoRW1iZXIuTXV0YWJs
        ZUVudW1lcmFibGUsIEVtYmVyLkNvcHlhYmxlLCBFbWJlci5GcmVlemFibGUs
        CiAgewoKICAvLyAuLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4u
        Li4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uCiAgLy8gSU1QTEVNRU5UIEVOVU1F
        UkFCTEUgQVBJUwogIC8vCgogIC8qKgogICAgVGhpcyBwcm9wZXJ0eSB3aWxs
        IGNoYW5nZSBhcyB0aGUgbnVtYmVyIG9mIG9iamVjdHMgaW4gdGhlIHNldCBj
        aGFuZ2VzLgoKICAgIEBwcm9wZXJ0eSBsZW5ndGgKICAgIEB0eXBlIG51bWJl
        cgogICAgQGRlZmF1bHQgMAogICovCiAgbGVuZ3RoOiAwLAoKICAvKioKICAg
        IENsZWFycyB0aGUgc2V0LiBUaGlzIGlzIHVzZWZ1bCBpZiB5b3Ugd2FudCB0
        byByZXVzZSBhbiBleGlzdGluZyBzZXQKICAgIHdpdGhvdXQgaGF2aW5nIHRv
        IHJlY3JlYXRlIGl0LgoKICAgIGBgYGphdmFzY3JpcHQKICAgIHZhciBjb2xv
        cnMgPSBuZXcgRW1iZXIuU2V0KFsicmVkIiwgImdyZWVuIiwgImJsdWUiXSk7
        CiAgICBjb2xvcnMubGVuZ3RoOyAgLy8gMwogICAgY29sb3JzLmNsZWFyKCk7
        CiAgICBjb2xvcnMubGVuZ3RoOyAgLy8gMAogICAgYGBgCgogICAgQG1ldGhv
        ZCBjbGVhcgogICAgQHJldHVybiB7RW1iZXIuU2V0fSBBbiBlbXB0eSBTZXQK
        ICAqLwogIGNsZWFyOiBmdW5jdGlvbigpIHsKICAgIGlmICh0aGlzLmlzRnJv
        emVuKSB7IHRocm93IG5ldyBFbWJlci5FcnJvcihFbWJlci5GUk9aRU5fRVJS
        T1IpOyB9CgogICAgdmFyIGxlbiA9IGdldCh0aGlzLCAnbGVuZ3RoJyk7CiAg
        ICBpZiAobGVuID09PSAwKSB7IHJldHVybiB0aGlzOyB9CgogICAgdmFyIGd1
        aWQ7CgogICAgdGhpcy5lbnVtZXJhYmxlQ29udGVudFdpbGxDaGFuZ2UobGVu
        LCAwKTsKICAgIEVtYmVyLnByb3BlcnR5V2lsbENoYW5nZSh0aGlzLCAnZmly
        c3RPYmplY3QnKTsKICAgIEVtYmVyLnByb3BlcnR5V2lsbENoYW5nZSh0aGlz
        LCAnbGFzdE9iamVjdCcpOwoKICAgIGZvciAodmFyIGk9MDsgaSA8IGxlbjsg
        aSsrKSB7CiAgICAgIGd1aWQgPSBndWlkRm9yKHRoaXNbaV0pOwogICAgICBk
        ZWxldGUgdGhpc1tndWlkXTsKICAgICAgZGVsZXRlIHRoaXNbaV07CiAgICB9
        CgogICAgc2V0KHRoaXMsICdsZW5ndGgnLCAwKTsKCiAgICBFbWJlci5wcm9w
        ZXJ0eURpZENoYW5nZSh0aGlzLCAnZmlyc3RPYmplY3QnKTsKICAgIEVtYmVy
        LnByb3BlcnR5RGlkQ2hhbmdlKHRoaXMsICdsYXN0T2JqZWN0Jyk7CiAgICB0
        aGlzLmVudW1lcmFibGVDb250ZW50RGlkQ2hhbmdlKGxlbiwgMCk7CgogICAg
        cmV0dXJuIHRoaXM7CiAgfSwKCiAgLyoqCiAgICBSZXR1cm5zIHRydWUgaWYg
        dGhlIHBhc3NlZCBvYmplY3QgaXMgYWxzbyBhbiBlbnVtZXJhYmxlIHRoYXQg
        Y29udGFpbnMgdGhlCiAgICBzYW1lIG9iamVjdHMgYXMgdGhlIHJlY2VpdmVy
        LgoKICAgIGBgYGphdmFzY3JpcHQKICAgIHZhciBjb2xvcnMgPSBbInJlZCIs
        ICJncmVlbiIsICJibHVlIl0sCiAgICAgICAgc2FtZV9jb2xvcnMgPSBuZXcg
        RW1iZXIuU2V0KGNvbG9ycyk7CgogICAgc2FtZV9jb2xvcnMuaXNFcXVhbChj
        b2xvcnMpOyAgICAgICAgICAgICAgIC8vIHRydWUKICAgIHNhbWVfY29sb3Jz
        LmlzRXF1YWwoWyJwdXJwbGUiLCAiYnJvd24iXSk7ICAvLyBmYWxzZQogICAg
        YGBgCgogICAgQG1ldGhvZCBpc0VxdWFsCiAgICBAcGFyYW0ge0VtYmVyLlNl
        dH0gb2JqIHRoZSBvdGhlciBvYmplY3QuCiAgICBAcmV0dXJuIHtCb29sZWFu
        fQogICovCiAgaXNFcXVhbDogZnVuY3Rpb24ob2JqKSB7CiAgICAvLyBmYWls
        IGZhc3QKICAgIGlmICghRW1iZXIuRW51bWVyYWJsZS5kZXRlY3Qob2JqKSkg
        cmV0dXJuIGZhbHNlOwoKICAgIHZhciBsb2MgPSBnZXQodGhpcywgJ2xlbmd0
        aCcpOwogICAgaWYgKGdldChvYmosICdsZW5ndGgnKSAhPT0gbG9jKSByZXR1
        cm4gZmFsc2U7CgogICAgd2hpbGUoLS1sb2MgPj0gMCkgewogICAgICBpZiAo
        IW9iai5jb250YWlucyh0aGlzW2xvY10pKSByZXR1cm4gZmFsc2U7CiAgICB9
        CgogICAgcmV0dXJuIHRydWU7CiAgfSwKCiAgLyoqCiAgICBBZGRzIGFuIG9i
        amVjdCB0byB0aGUgc2V0LiBPbmx5IG5vbi1gbnVsbGAgb2JqZWN0cyBjYW4g
        YmUgYWRkZWQgdG8gYSBzZXQKICAgIGFuZCB0aG9zZSBjYW4gb25seSBiZSBh
        ZGRlZCBvbmNlLiBJZiB0aGUgb2JqZWN0IGlzIGFscmVhZHkgaW4gdGhlIHNl
        dCBvcgogICAgdGhlIHBhc3NlZCB2YWx1ZSBpcyBudWxsIHRoaXMgbWV0aG9k
        IHdpbGwgaGF2ZSBubyBlZmZlY3QuCgogICAgVGhpcyBpcyBhbiBhbGlhcyBm
        b3IgYEVtYmVyLk11dGFibGVFbnVtZXJhYmxlLmFkZE9iamVjdCgpYC4KCiAg
        ICBgYGBqYXZhc2NyaXB0CiAgICB2YXIgY29sb3JzID0gbmV3IEVtYmVyLlNl
        dCgpOwogICAgY29sb3JzLmFkZCgiYmx1ZSIpOyAgICAgLy8gWyJibHVlIl0K
        ICAgIGNvbG9ycy5hZGQoImJsdWUiKTsgICAgIC8vIFsiYmx1ZSJdCiAgICBj
        b2xvcnMuYWRkKCJyZWQiKTsgICAgICAvLyBbImJsdWUiLCAicmVkIl0KICAg
        IGNvbG9ycy5hZGQobnVsbCk7ICAgICAgIC8vIFsiYmx1ZSIsICJyZWQiXQog
        ICAgY29sb3JzLmFkZCh1bmRlZmluZWQpOyAgLy8gWyJibHVlIiwgInJlZCJd
        CiAgICBgYGAKCiAgICBAbWV0aG9kIGFkZAogICAgQHBhcmFtIHtPYmplY3R9
        IG9iaiBUaGUgb2JqZWN0IHRvIGFkZC4KICAgIEByZXR1cm4ge0VtYmVyLlNl
        dH0gVGhlIHNldCBpdHNlbGYuCiAgKi8KICBhZGQ6IEVtYmVyLmFsaWFzTWV0
        aG9kKCdhZGRPYmplY3QnKSwKCiAgLyoqCiAgICBSZW1vdmVzIHRoZSBvYmpl
        Y3QgZnJvbSB0aGUgc2V0IGlmIGl0IGlzIGZvdW5kLiBJZiB5b3UgcGFzcyBh
        IGBudWxsYCB2YWx1ZQogICAgb3IgYW4gb2JqZWN0IHRoYXQgaXMgYWxyZWFk
        eSBub3QgaW4gdGhlIHNldCwgdGhpcyBtZXRob2Qgd2lsbCBoYXZlIG5vCiAg
        ICBlZmZlY3QuIFRoaXMgaXMgYW4gYWxpYXMgZm9yIGBFbWJlci5NdXRhYmxl
        RW51bWVyYWJsZS5yZW1vdmVPYmplY3QoKWAuCgogICAgYGBgamF2YXNjcmlw
        dAogICAgdmFyIGNvbG9ycyA9IG5ldyBFbWJlci5TZXQoWyJyZWQiLCAiZ3Jl
        ZW4iLCAiYmx1ZSJdKTsKICAgIGNvbG9ycy5yZW1vdmUoInJlZCIpOyAgICAg
        Ly8gWyJibHVlIiwgImdyZWVuIl0KICAgIGNvbG9ycy5yZW1vdmUoInB1cnBs
        ZSIpOyAgLy8gWyJibHVlIiwgImdyZWVuIl0KICAgIGNvbG9ycy5yZW1vdmUo
        bnVsbCk7ICAgICAgLy8gWyJibHVlIiwgImdyZWVuIl0KICAgIGBgYAoKICAg
        IEBtZXRob2QgcmVtb3ZlCiAgICBAcGFyYW0ge09iamVjdH0gb2JqIFRoZSBv
        YmplY3QgdG8gcmVtb3ZlCiAgICBAcmV0dXJuIHtFbWJlci5TZXR9IFRoZSBz
        ZXQgaXRzZWxmLgogICovCiAgcmVtb3ZlOiBFbWJlci5hbGlhc01ldGhvZCgn
        cmVtb3ZlT2JqZWN0JyksCgogIC8qKgogICAgUmVtb3ZlcyB0aGUgbGFzdCBl
        bGVtZW50IGZyb20gdGhlIHNldCBhbmQgcmV0dXJucyBpdCwgb3IgYG51bGxg
        IGlmIGl0J3MgZW1wdHkuCgogICAgYGBgamF2YXNjcmlwdAogICAgdmFyIGNv
        bG9ycyA9IG5ldyBFbWJlci5TZXQoWyJncmVlbiIsICJibHVlIl0pOwogICAg
        Y29sb3JzLnBvcCgpOyAgLy8gImJsdWUiCiAgICBjb2xvcnMucG9wKCk7ICAv
        LyAiZ3JlZW4iCiAgICBjb2xvcnMucG9wKCk7ICAvLyBudWxsCiAgICBgYGAK
        CiAgICBAbWV0aG9kIHBvcAogICAgQHJldHVybiB7T2JqZWN0fSBUaGUgcmVt
        b3ZlZCBvYmplY3QgZnJvbSB0aGUgc2V0IG9yIG51bGwuCiAgKi8KICBwb3A6
        IGZ1bmN0aW9uKCkgewogICAgaWYgKGdldCh0aGlzLCAnaXNGcm96ZW4nKSkg
        dGhyb3cgbmV3IEVtYmVyLkVycm9yKEVtYmVyLkZST1pFTl9FUlJPUik7CiAg
        ICB2YXIgb2JqID0gdGhpcy5sZW5ndGggPiAwID8gdGhpc1t0aGlzLmxlbmd0
        aC0xXSA6IG51bGw7CiAgICB0aGlzLnJlbW92ZShvYmopOwogICAgcmV0dXJu
        IG9iajsKICB9LAoKICAvKioKICAgIEluc2VydHMgdGhlIGdpdmVuIG9iamVj
        dCBvbiB0byB0aGUgZW5kIG9mIHRoZSBzZXQuIEl0IHJldHVybnMKICAgIHRo
        ZSBzZXQgaXRzZWxmLgoKICAgIFRoaXMgaXMgYW4gYWxpYXMgZm9yIGBFbWJl
        ci5NdXRhYmxlRW51bWVyYWJsZS5hZGRPYmplY3QoKWAuCgogICAgYGBgamF2
        YXNjcmlwdAogICAgdmFyIGNvbG9ycyA9IG5ldyBFbWJlci5TZXQoKTsKICAg
        IGNvbG9ycy5wdXNoKCJyZWQiKTsgICAvLyBbInJlZCJdCiAgICBjb2xvcnMu
        cHVzaCgiZ3JlZW4iKTsgLy8gWyJyZWQiLCAiZ3JlZW4iXQogICAgY29sb3Jz
        LnB1c2goImJsdWUiKTsgIC8vIFsicmVkIiwgImdyZWVuIiwgImJsdWUiXQog
        ICAgYGBgCgogICAgQG1ldGhvZCBwdXNoCiAgICBAcmV0dXJuIHtFbWJlci5T
        ZXR9IFRoZSBzZXQgaXRzZWxmLgogICovCiAgcHVzaDogRW1iZXIuYWxpYXNN
        ZXRob2QoJ2FkZE9iamVjdCcpLAoKICAvKioKICAgIFJlbW92ZXMgdGhlIGxh
        c3QgZWxlbWVudCBmcm9tIHRoZSBzZXQgYW5kIHJldHVybnMgaXQsIG9yIGBu
        dWxsYCBpZiBpdCdzIGVtcHR5LgoKICAgIFRoaXMgaXMgYW4gYWxpYXMgZm9y
        IGBFbWJlci5TZXQucG9wKClgLgoKICAgIGBgYGphdmFzY3JpcHQKICAgIHZh
        ciBjb2xvcnMgPSBuZXcgRW1iZXIuU2V0KFsiZ3JlZW4iLCAiYmx1ZSJdKTsK
        ICAgIGNvbG9ycy5zaGlmdCgpOyAgLy8gImJsdWUiCiAgICBjb2xvcnMuc2hp
        ZnQoKTsgIC8vICJncmVlbiIKICAgIGNvbG9ycy5zaGlmdCgpOyAgLy8gbnVs
        bAogICAgYGBgCgogICAgQG1ldGhvZCBzaGlmdAogICAgQHJldHVybiB7T2Jq
        ZWN0fSBUaGUgcmVtb3ZlZCBvYmplY3QgZnJvbSB0aGUgc2V0IG9yIG51bGwu
        CiAgKi8KICBzaGlmdDogRW1iZXIuYWxpYXNNZXRob2QoJ3BvcCcpLAoKICAv
        KioKICAgIEluc2VydHMgdGhlIGdpdmVuIG9iamVjdCBvbiB0byB0aGUgZW5k
        IG9mIHRoZSBzZXQuIEl0IHJldHVybnMKICAgIHRoZSBzZXQgaXRzZWxmLgoK
        ICAgIFRoaXMgaXMgYW4gYWxpYXMgb2YgYEVtYmVyLlNldC5wdXNoKClgCgog
        ICAgYGBgamF2YXNjcmlwdAogICAgdmFyIGNvbG9ycyA9IG5ldyBFbWJlci5T
        ZXQoKTsKICAgIGNvbG9ycy51bnNoaWZ0KCJyZWQiKTsgICAgLy8gWyJyZWQi
        XQogICAgY29sb3JzLnVuc2hpZnQoImdyZWVuIik7ICAvLyBbInJlZCIsICJn
        cmVlbiJdCiAgICBjb2xvcnMudW5zaGlmdCgiYmx1ZSIpOyAgIC8vIFsicmVk
        IiwgImdyZWVuIiwgImJsdWUiXQogICAgYGBgCgogICAgQG1ldGhvZCB1bnNo
        aWZ0CiAgICBAcmV0dXJuIHtFbWJlci5TZXR9IFRoZSBzZXQgaXRzZWxmLgog
        ICovCiAgdW5zaGlmdDogRW1iZXIuYWxpYXNNZXRob2QoJ3B1c2gnKSwKCiAg
        LyoqCiAgICBBZGRzIGVhY2ggb2JqZWN0IGluIHRoZSBwYXNzZWQgZW51bWVy
        YWJsZSB0byB0aGUgc2V0LgoKICAgIFRoaXMgaXMgYW4gYWxpYXMgb2YgYEVt
        YmVyLk11dGFibGVFbnVtZXJhYmxlLmFkZE9iamVjdHMoKWAKCiAgICBgYGBq
        YXZhc2NyaXB0CiAgICB2YXIgY29sb3JzID0gbmV3IEVtYmVyLlNldCgpOwog
        ICAgY29sb3JzLmFkZEVhY2goWyJyZWQiLCAiZ3JlZW4iLCAiYmx1ZSJdKTsg
        IC8vIFsicmVkIiwgImdyZWVuIiwgImJsdWUiXQogICAgYGBgCgogICAgQG1l
        dGhvZCBhZGRFYWNoCiAgICBAcGFyYW0ge0VtYmVyLkVudW1lcmFibGV9IG9i
        amVjdHMgdGhlIG9iamVjdHMgdG8gYWRkLgogICAgQHJldHVybiB7RW1iZXIu
        U2V0fSBUaGUgc2V0IGl0c2VsZi4KICAqLwogIGFkZEVhY2g6IEVtYmVyLmFs
        aWFzTWV0aG9kKCdhZGRPYmplY3RzJyksCgogIC8qKgogICAgUmVtb3ZlcyBl
        YWNoIG9iamVjdCBpbiB0aGUgcGFzc2VkIGVudW1lcmFibGUgdG8gdGhlIHNl
        dC4KCiAgICBUaGlzIGlzIGFuIGFsaWFzIG9mIGBFbWJlci5NdXRhYmxlRW51
        bWVyYWJsZS5yZW1vdmVPYmplY3RzKClgCgogICAgYGBgamF2YXNjcmlwdAog
        ICAgdmFyIGNvbG9ycyA9IG5ldyBFbWJlci5TZXQoWyJyZWQiLCAiZ3JlZW4i
        LCAiYmx1ZSJdKTsKICAgIGNvbG9ycy5yZW1vdmVFYWNoKFsicmVkIiwgImJs
        dWUiXSk7ICAvLyAgWyJncmVlbiJdCiAgICBgYGAKCiAgICBAbWV0aG9kIHJl
        bW92ZUVhY2gKICAgIEBwYXJhbSB7RW1iZXIuRW51bWVyYWJsZX0gb2JqZWN0
        cyB0aGUgb2JqZWN0cyB0byByZW1vdmUuCiAgICBAcmV0dXJuIHtFbWJlci5T
        ZXR9IFRoZSBzZXQgaXRzZWxmLgogICovCiAgcmVtb3ZlRWFjaDogRW1iZXIu
        YWxpYXNNZXRob2QoJ3JlbW92ZU9iamVjdHMnKSwKCiAgLy8gLi4uLi4uLi4u
        Li4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4u
        Li4uLgogIC8vIFBSSVZBVEUgRU5VTUVSQUJMRSBTVVBQT1JUCiAgLy8KCiAg
        aW5pdDogZnVuY3Rpb24oaXRlbXMpIHsKICAgIHRoaXMuX3N1cGVyKCk7CiAg
        ICBpZiAoaXRlbXMpIHRoaXMuYWRkT2JqZWN0cyhpdGVtcyk7CiAgfSwKCiAg
        Ly8gaW1wbGVtZW50IEVtYmVyLkVudW1lcmFibGUKICBuZXh0T2JqZWN0OiBm
        dW5jdGlvbihpZHgpIHsKICAgIHJldHVybiB0aGlzW2lkeF07CiAgfSwKCiAg
        Ly8gbW9yZSBvcHRpbWl6ZWQgdmVyc2lvbgogIGZpcnN0T2JqZWN0OiBFbWJl
        ci5jb21wdXRlZChmdW5jdGlvbigpIHsKICAgIHJldHVybiB0aGlzLmxlbmd0
        aCA+IDAgPyB0aGlzWzBdIDogdW5kZWZpbmVkOwogIH0pLAoKICAvLyBtb3Jl
        IG9wdGltaXplZCB2ZXJzaW9uCiAgbGFzdE9iamVjdDogRW1iZXIuY29tcHV0
        ZWQoZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gdGhpcy5sZW5ndGggPiAwID8g
        dGhpc1t0aGlzLmxlbmd0aC0xXSA6IHVuZGVmaW5lZDsKICB9KSwKCiAgLy8g
        aW1wbGVtZW50cyBFbWJlci5NdXRhYmxlRW51bWVyYWJsZQogIGFkZE9iamVj
        dDogZnVuY3Rpb24ob2JqKSB7CiAgICBpZiAoZ2V0KHRoaXMsICdpc0Zyb3pl
        bicpKSB0aHJvdyBuZXcgRW1iZXIuRXJyb3IoRW1iZXIuRlJPWkVOX0VSUk9S
        KTsKICAgIGlmIChpc05vbmUob2JqKSkgcmV0dXJuIHRoaXM7IC8vIG5vdGhp
        bmcgdG8gZG8KCiAgICB2YXIgZ3VpZCA9IGd1aWRGb3Iob2JqKSwKICAgICAg
        ICBpZHggID0gdGhpc1tndWlkXSwKICAgICAgICBsZW4gID0gZ2V0KHRoaXMs
        ICdsZW5ndGgnKSwKICAgICAgICBhZGRlZCA7CgogICAgaWYgKGlkeD49MCAm
        JiBpZHg8bGVuICYmICh0aGlzW2lkeF0gPT09IG9iaikpIHJldHVybiB0aGlz
        OyAvLyBhZGRlZAoKICAgIGFkZGVkID0gW29ial07CgogICAgdGhpcy5lbnVt
        ZXJhYmxlQ29udGVudFdpbGxDaGFuZ2UobnVsbCwgYWRkZWQpOwogICAgRW1i
        ZXIucHJvcGVydHlXaWxsQ2hhbmdlKHRoaXMsICdsYXN0T2JqZWN0Jyk7Cgog
        ICAgbGVuID0gZ2V0KHRoaXMsICdsZW5ndGgnKTsKICAgIHRoaXNbZ3VpZF0g
        PSBsZW47CiAgICB0aGlzW2xlbl0gPSBvYmo7CiAgICBzZXQodGhpcywgJ2xl
        bmd0aCcsIGxlbisxKTsKCiAgICBFbWJlci5wcm9wZXJ0eURpZENoYW5nZSh0
        aGlzLCAnbGFzdE9iamVjdCcpOwogICAgdGhpcy5lbnVtZXJhYmxlQ29udGVu
        dERpZENoYW5nZShudWxsLCBhZGRlZCk7CgogICAgcmV0dXJuIHRoaXM7CiAg
        fSwKCiAgLy8gaW1wbGVtZW50cyBFbWJlci5NdXRhYmxlRW51bWVyYWJsZQog
        IHJlbW92ZU9iamVjdDogZnVuY3Rpb24ob2JqKSB7CiAgICBpZiAoZ2V0KHRo
        aXMsICdpc0Zyb3plbicpKSB0aHJvdyBuZXcgRW1iZXIuRXJyb3IoRW1iZXIu
        RlJPWkVOX0VSUk9SKTsKICAgIGlmIChpc05vbmUob2JqKSkgcmV0dXJuIHRo
        aXM7IC8vIG5vdGhpbmcgdG8gZG8KCiAgICB2YXIgZ3VpZCA9IGd1aWRGb3Io
        b2JqKSwKICAgICAgICBpZHggID0gdGhpc1tndWlkXSwKICAgICAgICBsZW4g
        PSBnZXQodGhpcywgJ2xlbmd0aCcpLAogICAgICAgIGlzRmlyc3QgPSBpZHgg
        PT09IDAsCiAgICAgICAgaXNMYXN0ID0gaWR4ID09PSBsZW4tMSwKICAgICAg
        ICBsYXN0LCByZW1vdmVkOwoKCiAgICBpZiAoaWR4Pj0wICYmIGlkeDxsZW4g
        JiYgKHRoaXNbaWR4XSA9PT0gb2JqKSkgewogICAgICByZW1vdmVkID0gW29i
        al07CgogICAgICB0aGlzLmVudW1lcmFibGVDb250ZW50V2lsbENoYW5nZShy
        ZW1vdmVkLCBudWxsKTsKICAgICAgaWYgKGlzRmlyc3QpIHsgRW1iZXIucHJv
        cGVydHlXaWxsQ2hhbmdlKHRoaXMsICdmaXJzdE9iamVjdCcpOyB9CiAgICAg
        IGlmIChpc0xhc3QpICB7IEVtYmVyLnByb3BlcnR5V2lsbENoYW5nZSh0aGlz
        LCAnbGFzdE9iamVjdCcpOyB9CgogICAgICAvLyBzd2FwIGl0ZW1zIC0gYmFz
        aWNhbGx5IG1vdmUgdGhlIGl0ZW0gdG8gdGhlIGVuZCBzbyBpdCBjYW4gYmUg
        cmVtb3ZlZAogICAgICBpZiAoaWR4IDwgbGVuLTEpIHsKICAgICAgICBsYXN0
        ID0gdGhpc1tsZW4tMV07CiAgICAgICAgdGhpc1tpZHhdID0gbGFzdDsKICAg
        ICAgICB0aGlzW2d1aWRGb3IobGFzdCldID0gaWR4OwogICAgICB9CgogICAg
        ICBkZWxldGUgdGhpc1tndWlkXTsKICAgICAgZGVsZXRlIHRoaXNbbGVuLTFd
        OwogICAgICBzZXQodGhpcywgJ2xlbmd0aCcsIGxlbi0xKTsKCiAgICAgIGlm
        IChpc0ZpcnN0KSB7IEVtYmVyLnByb3BlcnR5RGlkQ2hhbmdlKHRoaXMsICdm
        aXJzdE9iamVjdCcpOyB9CiAgICAgIGlmIChpc0xhc3QpICB7IEVtYmVyLnBy
        b3BlcnR5RGlkQ2hhbmdlKHRoaXMsICdsYXN0T2JqZWN0Jyk7IH0KICAgICAg
        dGhpcy5lbnVtZXJhYmxlQ29udGVudERpZENoYW5nZShyZW1vdmVkLCBudWxs
        KTsKICAgIH0KCiAgICByZXR1cm4gdGhpczsKICB9LAoKICAvLyBvcHRpbWl6
        ZWQgdmVyc2lvbgogIGNvbnRhaW5zOiBmdW5jdGlvbihvYmopIHsKICAgIHJl
        dHVybiB0aGlzW2d1aWRGb3Iob2JqKV0+PTA7CiAgfSwKCiAgY29weTogZnVu
        Y3Rpb24oKSB7CiAgICB2YXIgQyA9IHRoaXMuY29uc3RydWN0b3IsIHJldCA9
        IG5ldyBDKCksIGxvYyA9IGdldCh0aGlzLCAnbGVuZ3RoJyk7CiAgICBzZXQo
        cmV0LCAnbGVuZ3RoJywgbG9jKTsKICAgIHdoaWxlKC0tbG9jPj0wKSB7CiAg
        ICAgIHJldFtsb2NdID0gdGhpc1tsb2NdOwogICAgICByZXRbZ3VpZEZvcih0
        aGlzW2xvY10pXSA9IGxvYzsKICAgIH0KICAgIHJldHVybiByZXQ7CiAgfSwK
        CiAgdG9TdHJpbmc6IGZ1bmN0aW9uKCkgewogICAgdmFyIGxlbiA9IHRoaXMu
        bGVuZ3RoLCBpZHgsIGFycmF5ID0gW107CiAgICBmb3IoaWR4ID0gMDsgaWR4
        IDwgbGVuOyBpZHgrKykgewogICAgICBhcnJheVtpZHhdID0gdGhpc1tpZHhd
        OwogICAgfQogICAgcmV0dXJuIGZtdCgiRW1iZXIuU2V0PCVAPiIsIFthcnJh
        eS5qb2luKCcsJyldKTsKICB9Cgp9KTsKCn0pKCk7CgoKCihmdW5jdGlvbigp
        IHsKdmFyIERlZmVycmVkTWl4aW4gPSBFbWJlci5EZWZlcnJlZE1peGluLCAv
        LyBtaXhpbnMvZGVmZXJyZWQKICAgIGdldCA9IEVtYmVyLmdldDsKCnZhciBE
        ZWZlcnJlZCA9IEVtYmVyLk9iamVjdC5leHRlbmQoRGVmZXJyZWRNaXhpbik7
        CgpEZWZlcnJlZC5yZW9wZW5DbGFzcyh7CiAgcHJvbWlzZTogZnVuY3Rpb24o
        Y2FsbGJhY2ssIGJpbmRpbmcpIHsKICAgIHZhciBkZWZlcnJlZCA9IERlZmVy
        cmVkLmNyZWF0ZSgpOwogICAgY2FsbGJhY2suY2FsbChiaW5kaW5nLCBkZWZl
        cnJlZCk7CiAgICByZXR1cm4gZGVmZXJyZWQ7CiAgfQp9KTsKCkVtYmVyLkRl
        ZmVycmVkID0gRGVmZXJyZWQ7Cgp9KSgpOwoKCgooZnVuY3Rpb24oKSB7CnZh
        ciBmb3JFYWNoID0gRW1iZXIuQXJyYXlQb2x5ZmlsbHMuZm9yRWFjaDsKCi8q
        KgogIEBtb2R1bGUgZW1iZXIKICBAc3VibW9kdWxlIGVtYmVyLXJ1bnRpbWUK
        Ki8KCnZhciBsb2FkSG9va3MgPSBFbWJlci5FTlYuRU1CRVJfTE9BRF9IT09L
        UyB8fCB7fTsKdmFyIGxvYWRlZCA9IHt9OwoKLyoqCiAgRGV0ZWN0cyB3aGVu
        IGEgc3BlY2lmaWMgcGFja2FnZSBvZiBFbWJlciAoZS5nLiAnRW1iZXIuSGFu
        ZGxlYmFycycpCiAgaGFzIGZ1bGx5IGxvYWRlZCBhbmQgaXMgYXZhaWxhYmxl
        IGZvciBleHRlbnNpb24uCgogIFRoZSBwcm92aWRlZCBgY2FsbGJhY2tgIHdp
        bGwgYmUgY2FsbGVkIHdpdGggdGhlIGBuYW1lYCBwYXNzZWQKICByZXNvbHZl
        ZCBmcm9tIGEgc3RyaW5nIGludG8gdGhlIG9iamVjdDoKCiAgYGBgIGphdmFz
        Y3JpcHQKICBFbWJlci5vbkxvYWQoJ0VtYmVyLkhhbmRsZWJhcnMnIGZ1bmN0
        aW9uKGhiYXJzKXsKICAgIGhiYXJzLnJlZ2lzdGVySGVscGVyKC4uLik7CiAg
        fSk7CiAgYGBgCgogIEBtZXRob2Qgb25Mb2FkCiAgQGZvciBFbWJlcgogIEBw
        YXJhbSBuYW1lIHtTdHJpbmd9IG5hbWUgb2YgaG9vawogIEBwYXJhbSBjYWxs
        YmFjayB7RnVuY3Rpb259IGNhbGxiYWNrIHRvIGJlIGNhbGxlZAoqLwpFbWJl
        ci5vbkxvYWQgPSBmdW5jdGlvbihuYW1lLCBjYWxsYmFjaykgewogIHZhciBv
        YmplY3Q7CgogIGxvYWRIb29rc1tuYW1lXSA9IGxvYWRIb29rc1tuYW1lXSB8
        fCBFbWJlci5BKCk7CiAgbG9hZEhvb2tzW25hbWVdLnB1c2hPYmplY3QoY2Fs
        bGJhY2spOwoKICBpZiAob2JqZWN0ID0gbG9hZGVkW25hbWVdKSB7CiAgICBj
        YWxsYmFjayhvYmplY3QpOwogIH0KfTsKCi8qKgogIENhbGxlZCB3aGVuIGFu
        IEVtYmVyLmpzIHBhY2thZ2UgKGUuZyBFbWJlci5IYW5kbGViYXJzKSBoYXMg
        ZmluaXNoZWQKICBsb2FkaW5nLiBUcmlnZ2VycyBhbnkgY2FsbGJhY2tzIHJl
        Z2lzdGVyZWQgZm9yIHRoaXMgZXZlbnQuCgogIEBtZXRob2QgcnVuTG9hZEhv
        b2tzCiAgQGZvciBFbWJlcgogIEBwYXJhbSBuYW1lIHtTdHJpbmd9IG5hbWUg
        b2YgaG9vawogIEBwYXJhbSBvYmplY3Qge09iamVjdH0gb2JqZWN0IHRvIHBh
        c3MgdG8gY2FsbGJhY2tzCiovCkVtYmVyLnJ1bkxvYWRIb29rcyA9IGZ1bmN0
        aW9uKG5hbWUsIG9iamVjdCkgewogIGxvYWRlZFtuYW1lXSA9IG9iamVjdDsK
        CiAgaWYgKGxvYWRIb29rc1tuYW1lXSkgewogICAgZm9yRWFjaC5jYWxsKGxv
        YWRIb29rc1tuYW1lXSwgZnVuY3Rpb24oY2FsbGJhY2spIHsKICAgICAgY2Fs
        bGJhY2sob2JqZWN0KTsKICAgIH0pOwogIH0KfTsKCn0pKCk7CgoKCihmdW5j
        dGlvbigpIHsKCn0pKCk7CgoKCihmdW5jdGlvbigpIHsKdmFyIGdldCA9IEVt
        YmVyLmdldDsKCi8qKgpAbW9kdWxlIGVtYmVyCkBzdWJtb2R1bGUgZW1iZXIt
        cnVudGltZQoqLwoKLyoqCiAgYEVtYmVyLkNvbnRyb2xsZXJNaXhpbmAgcHJv
        dmlkZXMgYSBzdGFuZGFyZCBpbnRlcmZhY2UgZm9yIGFsbCBjbGFzc2VzIHRo
        YXQKICBjb21wb3NlIEVtYmVyJ3MgY29udHJvbGxlciBsYXllcjogYEVtYmVy
        LkNvbnRyb2xsZXJgLAogIGBFbWJlci5BcnJheUNvbnRyb2xsZXJgLCBhbmQg
        YEVtYmVyLk9iamVjdENvbnRyb2xsZXJgLgoKICBAY2xhc3MgQ29udHJvbGxl
        ck1peGluCiAgQG5hbWVzcGFjZSBFbWJlcgogIEB1c2VzIEVtYmVyLkFjdGlv
        bkhhbmRsZXIKKi8KRW1iZXIuQ29udHJvbGxlck1peGluID0gRW1iZXIuTWl4
        aW4uY3JlYXRlKEVtYmVyLkFjdGlvbkhhbmRsZXIsIHsKICAvKiBkdWNrdHlw
        ZSBhcyBhIGNvbnRyb2xsZXIgKi8KICBpc0NvbnRyb2xsZXI6IHRydWUsCgog
        IC8qKgogICAgVGhlIG9iamVjdCB0byB3aGljaCBhY3Rpb25zIGZyb20gdGhl
        IHZpZXcgc2hvdWxkIGJlIHNlbnQuCgogICAgRm9yIGV4YW1wbGUsIHdoZW4g
        YSBIYW5kbGViYXJzIHRlbXBsYXRlIHVzZXMgdGhlIGB7e2FjdGlvbn19YCBo
        ZWxwZXIsCiAgICBpdCB3aWxsIGF0dGVtcHQgdG8gc2VuZCB0aGUgYWN0aW9u
        IHRvIHRoZSB2aWV3J3MgY29udHJvbGxlcidzIGB0YXJnZXRgLgoKICAgIEJ5
        IGRlZmF1bHQsIGEgY29udHJvbGxlcidzIGB0YXJnZXRgIGlzIHNldCB0byB0
        aGUgcm91dGVyIGFmdGVyIGl0IGlzCiAgICBpbnN0YW50aWF0ZWQgYnkgYEVt
        YmVyLkFwcGxpY2F0aW9uI2luaXRpYWxpemVgLgoKICAgIEBwcm9wZXJ0eSB0
        YXJnZXQKICAgIEBkZWZhdWx0IG51bGwKICAqLwogIHRhcmdldDogbnVsbCwK
        CiAgY29udGFpbmVyOiBudWxsLAoKICBwYXJlbnRDb250cm9sbGVyOiBudWxs
        LAoKICBzdG9yZTogbnVsbCwKCiAgbW9kZWw6IEVtYmVyLmNvbXB1dGVkLmFs
        aWFzKCdjb250ZW50JyksCgogIGRlcHJlY2F0ZWRTZW5kSGFuZGxlczogZnVu
        Y3Rpb24oYWN0aW9uTmFtZSkgewogICAgcmV0dXJuICEhdGhpc1thY3Rpb25O
        YW1lXTsKICB9LAoKICBkZXByZWNhdGVkU2VuZDogZnVuY3Rpb24oYWN0aW9u
        TmFtZSkgewogICAgdmFyIGFyZ3MgPSBbXS5zbGljZS5jYWxsKGFyZ3VtZW50
        cywgMSk7CiAgICBFbWJlci5hc3NlcnQoJycgKyB0aGlzICsgIiBoYXMgdGhl
        IGFjdGlvbiAiICsgYWN0aW9uTmFtZSArICIgYnV0IGl0IGlzIG5vdCBhIGZ1
        bmN0aW9uIiwgdHlwZW9mIHRoaXNbYWN0aW9uTmFtZV0gPT09ICdmdW5jdGlv
        bicpOwogICAgRW1iZXIuZGVwcmVjYXRlKCdBY3Rpb24gaGFuZGxlcnMgaW1w
        bGVtZW50ZWQgZGlyZWN0bHkgb24gY29udHJvbGxlcnMgYXJlIGRlcHJlY2F0
        ZWQgaW4gZmF2b3Igb2YgYWN0aW9uIGhhbmRsZXJzIG9uIGFuIGBhY3Rpb25z
        YCBvYmplY3QgKCBhY3Rpb246IGAnICsgYWN0aW9uTmFtZSArICdgIG9uICcg
        KyB0aGlzICsgJyknLCBmYWxzZSk7CiAgICB0aGlzW2FjdGlvbk5hbWVdLmFw
        cGx5KHRoaXMsIGFyZ3MpOwogICAgcmV0dXJuOwogIH0KfSk7CgovKioKICBA
        Y2xhc3MgQ29udHJvbGxlcgogIEBuYW1lc3BhY2UgRW1iZXIKICBAZXh0ZW5k
        cyBFbWJlci5PYmplY3QKICBAdXNlcyBFbWJlci5Db250cm9sbGVyTWl4aW4K
        Ki8KRW1iZXIuQ29udHJvbGxlciA9IEVtYmVyLk9iamVjdC5leHRlbmQoRW1i
        ZXIuQ29udHJvbGxlck1peGluKTsKCn0pKCk7CgoKCihmdW5jdGlvbigpIHsK
        LyoqCkBtb2R1bGUgZW1iZXIKQHN1Ym1vZHVsZSBlbWJlci1ydW50aW1lCiov
        Cgp2YXIgZ2V0ID0gRW1iZXIuZ2V0LCBzZXQgPSBFbWJlci5zZXQsIGZvckVh
        Y2ggPSBFbWJlci5FbnVtZXJhYmxlVXRpbHMuZm9yRWFjaDsKCi8qKgogIGBF
        bWJlci5Tb3J0YWJsZU1peGluYCBwcm92aWRlcyBhIHN0YW5kYXJkIGludGVy
        ZmFjZSBmb3IgYXJyYXkgcHJveGllcwogIHRvIHNwZWNpZnkgYSBzb3J0IG9y
        ZGVyIGFuZCBtYWludGFpbiB0aGlzIHNvcnRpbmcgd2hlbiBvYmplY3RzIGFy
        ZSBhZGRlZCwKICByZW1vdmVkLCBvciB1cGRhdGVkIHdpdGhvdXQgY2hhbmdp
        bmcgdGhlIGltcGxpY2l0IG9yZGVyIG9mIHRoZWlyIHVuZGVybHlpbmcKICBj
        b250ZW50IGFycmF5OgoKICBgYGBqYXZhc2NyaXB0CiAgc29uZ3MgPSBbCiAg
        ICB7dHJhY2tOdW1iZXI6IDQsIHRpdGxlOiAnT2ItTGEtRGksIE9iLUxhLURh
        J30sCiAgICB7dHJhY2tOdW1iZXI6IDIsIHRpdGxlOiAnQmFjayBpbiB0aGUg
        VS5TLlMuUi4nfSwKICAgIHt0cmFja051bWJlcjogMywgdGl0bGU6ICdHbGFz
        cyBPbmlvbid9LAogIF07CgogIHNvbmdzQ29udHJvbGxlciA9IEVtYmVyLkFy
        cmF5Q29udHJvbGxlci5jcmVhdGUoewogICAgY29udGVudDogc29uZ3MsCiAg
        ICBzb3J0UHJvcGVydGllczogWyd0cmFja051bWJlciddLAogICAgc29ydEFz
        Y2VuZGluZzogdHJ1ZQogIH0pOwoKICBzb25nc0NvbnRyb2xsZXIuZ2V0KCdm
        aXJzdE9iamVjdCcpOyAgLy8ge3RyYWNrTnVtYmVyOiAyLCB0aXRsZTogJ0Jh
        Y2sgaW4gdGhlIFUuUy5TLlIuJ30KCiAgc29uZ3NDb250cm9sbGVyLmFkZE9i
        amVjdCh7dHJhY2tOdW1iZXI6IDEsIHRpdGxlOiAnRGVhciBQcnVkZW5jZSd9
        KTsKICBzb25nc0NvbnRyb2xsZXIuZ2V0KCdmaXJzdE9iamVjdCcpOyAgLy8g
        e3RyYWNrTnVtYmVyOiAxLCB0aXRsZTogJ0RlYXIgUHJ1ZGVuY2UnfQogIGBg
        YAoKICBJZiB5b3UgYWRkIG9yIHJlbW92ZSB0aGUgcHJvcGVydGllcyB0byBz
        b3J0IGJ5IG9yIGNoYW5nZSB0aGUgc29ydCBkaXJlY3Rpb24gdGhlIGNvbnRl
        bnQKICBzb3J0IG9yZGVyIHdpbGwgYmUgYXV0b21hdGljYWxseSB1cGRhdGVk
        LgoKICBgYGBqYXZhc2NyaXB0CiAgc29uZ3NDb250cm9sbGVyLnNldCgnc29y
        dFByb3BlcnRpZXMnLCBbJ3RpdGxlJ10pOwogIHNvbmdzQ29udHJvbGxlci5n
        ZXQoJ2ZpcnN0T2JqZWN0Jyk7IC8vIHt0cmFja051bWJlcjogMiwgdGl0bGU6
        ICdCYWNrIGluIHRoZSBVLlMuUy5SLid9CgogIHNvbmdzQ29udHJvbGxlci50
        b2dnbGVQcm9wZXJ0eSgnc29ydEFzY2VuZGluZycpOwogIHNvbmdzQ29udHJv
        bGxlci5nZXQoJ2ZpcnN0T2JqZWN0Jyk7IC8vIHt0cmFja051bWJlcjogNCwg
        dGl0bGU6ICdPYi1MYS1EaSwgT2ItTGEtRGEnfQogIGBgYAoKICBTb3J0YWJs
        ZU1peGluIHdvcmtzIGJ5IHNvcnRpbmcgdGhlIGFycmFuZ2VkQ29udGVudCBh
        cnJheSwgd2hpY2ggaXMgdGhlIGFycmF5IHRoYXQKICBhcnJheVByb3h5IGRp
        c3BsYXlzLiBEdWUgdG8gdGhlIGZhY3QgdGhhdCB0aGUgdW5kZXJseWluZyAn
        Y29udGVudCcgYXJyYXkgaXMgbm90IGNoYW5nZWQsIHRoYXQKICBhcnJheSB3
        aWxsIG5vdCBkaXNwbGF5IHRoZSBzb3J0ZWQgbGlzdDoKCiAgIGBgYGphdmFz
        Y3JpcHQKICBzb25nc0NvbnRyb2xsZXIuZ2V0KCdjb250ZW50JykuZ2V0KCdm
        aXJzdE9iamVjdCcpOyAvLyBSZXR1cm5zIHRoZSB1bnNvcnRlZCBvcmlnaW5h
        bCBjb250ZW50CiAgc29uZ3NDb250cm9sbGVyLmdldCgnZmlyc3RPYmplY3Qn
        KTsgLy8gUmV0dXJucyB0aGUgc29ydGVkIGNvbnRlbnQuCiAgYGBgIAogIAog
        IEFsdGhvdWdoIHRoZSBzb3J0ZWQgY29udGVudCBjYW4gYWxzbyBiZSBhY2Nl
        c3NlZCB0aHJvdWdoIHRoZSBhcnJhbmdlZENvbnRlbnQgcHJvcGVydHksCiAg
        aXQgaXMgcHJlZmVyYWJsZSB0byB1c2UgdGhlIHByb3hpZWQgY2xhc3MgYW5k
        IG5vdCB0aGUgYXJyYW5nZWRDb250ZW50IGFycmF5IGRpcmVjdGx5LgoKICBA
        Y2xhc3MgU29ydGFibGVNaXhpbgogIEBuYW1lc3BhY2UgRW1iZXIKICBAdXNl
        cyBFbWJlci5NdXRhYmxlRW51bWVyYWJsZQoqLwpFbWJlci5Tb3J0YWJsZU1p
        eGluID0gRW1iZXIuTWl4aW4uY3JlYXRlKEVtYmVyLk11dGFibGVFbnVtZXJh
        YmxlLCB7CgogIC8qKgogICAgU3BlY2lmaWVzIHdoaWNoIHByb3BlcnRpZXMg
        ZGljdGF0ZSB0aGUgYXJyYW5nZWRDb250ZW50J3Mgc29ydCBvcmRlci4KCiAg
        ICBXaGVuIHNwZWNpZnlpbmcgbXVsdGlwbGUgcHJvcGVydGllcyB0aGUgc29y
        dGluZyB3aWxsIHVzZSBwcm9wZXJ0aWVzCiAgICBmcm9tIHRoZSBgc29ydFBy
        b3BlcnRpZXNgIGFycmF5IHByaW9yaXRpemVkIGZyb20gZmlyc3QgdG8gbGFz
        dC4KCiAgICBAcHJvcGVydHkge0FycmF5fSBzb3J0UHJvcGVydGllcwogICov
        CiAgc29ydFByb3BlcnRpZXM6IG51bGwsCgogIC8qKgogICAgU3BlY2lmaWVz
        IHRoZSBhcnJhbmdlZENvbnRlbnQncyBzb3J0IGRpcmVjdGlvbgoKICAgIEBw
        cm9wZXJ0eSB7Qm9vbGVhbn0gc29ydEFzY2VuZGluZwogICovCiAgc29ydEFz
        Y2VuZGluZzogdHJ1ZSwKCiAgLyoqCiAgICBUaGUgZnVuY3Rpb24gdXNlZCB0
        byBjb21wYXJlIHR3byB2YWx1ZXMuIFlvdSBjYW4gb3ZlcnJpZGUgdGhpcyBp
        ZiB5b3UKICAgIHdhbnQgdG8gZG8gY3VzdG9tIGNvbXBhcmlzb25zLiBGdW5j
        dGlvbnMgbXVzdCBiZSBvZiB0aGUgdHlwZSBleHBlY3RlZCBieQogICAgQXJy
        YXkjc29ydCwgaS5lLgogICAgICByZXR1cm4gMCBpZiB0aGUgdHdvIHBhcmFt
        ZXRlcnMgYXJlIGVxdWFsLAogICAgICByZXR1cm4gYSBuZWdhdGl2ZSB2YWx1
        ZSBpZiB0aGUgZmlyc3QgcGFyYW1ldGVyIGlzIHNtYWxsZXIgdGhhbiB0aGUg
        c2Vjb25kIG9yCiAgICAgIHJldHVybiBhIHBvc2l0aXZlIHZhbHVlIG90aGVy
        d2lzZToKCiAgICBgYGBqYXZhc2NyaXB0CiAgICBmdW5jdGlvbih4LHkpIHsg
        Ly8gVGhlc2UgYXJlIGFzc3VtZWQgdG8gYmUgaW50ZWdlcnMKICAgICAgaWYg
        KHggPT09IHkpCiAgICAgICAgcmV0dXJuIDA7CiAgICAgIHJldHVybiB4IDwg
        eSA/IC0xIDogMTsKICAgIH0KICAgIGBgYAoKICAgIEBwcm9wZXJ0eSBzb3J0
        RnVuY3Rpb24KICAgIEB0eXBlIHtGdW5jdGlvbn0KICAgIEBkZWZhdWx0IEVt
        YmVyLmNvbXBhcmUKICAqLwogIHNvcnRGdW5jdGlvbjogRW1iZXIuY29tcGFy
        ZSwKCiAgb3JkZXJCeTogZnVuY3Rpb24oaXRlbTEsIGl0ZW0yKSB7CiAgICB2
        YXIgcmVzdWx0ID0gMCwKICAgICAgICBzb3J0UHJvcGVydGllcyA9IGdldCh0
        aGlzLCAnc29ydFByb3BlcnRpZXMnKSwKICAgICAgICBzb3J0QXNjZW5kaW5n
        ID0gZ2V0KHRoaXMsICdzb3J0QXNjZW5kaW5nJyksCiAgICAgICAgc29ydEZ1
        bmN0aW9uID0gZ2V0KHRoaXMsICdzb3J0RnVuY3Rpb24nKTsKCiAgICBFbWJl
        ci5hc3NlcnQoInlvdSBuZWVkIHRvIGRlZmluZSBgc29ydFByb3BlcnRpZXNg
        IiwgISFzb3J0UHJvcGVydGllcyk7CgogICAgZm9yRWFjaChzb3J0UHJvcGVy
        dGllcywgZnVuY3Rpb24ocHJvcGVydHlOYW1lKSB7CiAgICAgIGlmIChyZXN1
        bHQgPT09IDApIHsKICAgICAgICByZXN1bHQgPSBzb3J0RnVuY3Rpb24oZ2V0
        KGl0ZW0xLCBwcm9wZXJ0eU5hbWUpLCBnZXQoaXRlbTIsIHByb3BlcnR5TmFt
        ZSkpOwogICAgICAgIGlmICgocmVzdWx0ICE9PSAwKSAmJiAhc29ydEFzY2Vu
        ZGluZykgewogICAgICAgICAgcmVzdWx0ID0gKC0xKSAqIHJlc3VsdDsKICAg
        ICAgICB9CiAgICAgIH0KICAgIH0pOwoKICAgIHJldHVybiByZXN1bHQ7CiAg
        fSwKCiAgZGVzdHJveTogZnVuY3Rpb24oKSB7CiAgICB2YXIgY29udGVudCA9
        IGdldCh0aGlzLCAnY29udGVudCcpLAogICAgICAgIHNvcnRQcm9wZXJ0aWVz
        ID0gZ2V0KHRoaXMsICdzb3J0UHJvcGVydGllcycpOwoKICAgIGlmIChjb250
        ZW50ICYmIHNvcnRQcm9wZXJ0aWVzKSB7CiAgICAgIGZvckVhY2goY29udGVu
        dCwgZnVuY3Rpb24oaXRlbSkgewogICAgICAgIGZvckVhY2goc29ydFByb3Bl
        cnRpZXMsIGZ1bmN0aW9uKHNvcnRQcm9wZXJ0eSkgewogICAgICAgICAgRW1i
        ZXIucmVtb3ZlT2JzZXJ2ZXIoaXRlbSwgc29ydFByb3BlcnR5LCB0aGlzLCAn
        Y29udGVudEl0ZW1Tb3J0UHJvcGVydHlEaWRDaGFuZ2UnKTsKICAgICAgICB9
        LCB0aGlzKTsKICAgICAgfSwgdGhpcyk7CiAgICB9CgogICAgcmV0dXJuIHRo
        aXMuX3N1cGVyKCk7CiAgfSwKCiAgaXNTb3J0ZWQ6IEVtYmVyLmNvbXB1dGVk
        LmJvb2woJ3NvcnRQcm9wZXJ0aWVzJyksCgogIC8qKgogICAgT3ZlcnJpZGVz
        IHRoZSBkZWZhdWx0IGFycmFuZ2VkQ29udGVudCBmcm9tIGFycmF5UHJveHkg
        aW4gb3JkZXIgdG8gc29ydCBieSBzb3J0RnVuY3Rpb24uCiAgICBBbHNvIHNl
        dHMgdXAgb2JzZXJ2ZXJzIGZvciBlYWNoIHNvcnRQcm9wZXJ0eSBvbiBlYWNo
        IGl0ZW0gaW4gdGhlIGNvbnRlbnQgQXJyYXkuCiAgICAKICAgIEBwcm9wZXJ0
        eSBhcnJhbmdlZENvbnRlbnQKICAqLwoKICBhcnJhbmdlZENvbnRlbnQ6IEVt
        YmVyLmNvbXB1dGVkKCdjb250ZW50JywgJ3NvcnRQcm9wZXJ0aWVzLkBlYWNo
        JywgZnVuY3Rpb24oa2V5LCB2YWx1ZSkgewogICAgdmFyIGNvbnRlbnQgPSBn
        ZXQodGhpcywgJ2NvbnRlbnQnKSwKICAgICAgICBpc1NvcnRlZCA9IGdldCh0
        aGlzLCAnaXNTb3J0ZWQnKSwKICAgICAgICBzb3J0UHJvcGVydGllcyA9IGdl
        dCh0aGlzLCAnc29ydFByb3BlcnRpZXMnKSwKICAgICAgICBzZWxmID0gdGhp
        czsKCiAgICBpZiAoY29udGVudCAmJiBpc1NvcnRlZCkgewogICAgICBjb250
        ZW50ID0gY29udGVudC5zbGljZSgpOwogICAgICBjb250ZW50LnNvcnQoZnVu
        Y3Rpb24oaXRlbTEsIGl0ZW0yKSB7CiAgICAgICAgcmV0dXJuIHNlbGYub3Jk
        ZXJCeShpdGVtMSwgaXRlbTIpOwogICAgICB9KTsKICAgICAgZm9yRWFjaChj
        b250ZW50LCBmdW5jdGlvbihpdGVtKSB7CiAgICAgICAgZm9yRWFjaChzb3J0
        UHJvcGVydGllcywgZnVuY3Rpb24oc29ydFByb3BlcnR5KSB7CiAgICAgICAg
        ICBFbWJlci5hZGRPYnNlcnZlcihpdGVtLCBzb3J0UHJvcGVydHksIHRoaXMs
        ICdjb250ZW50SXRlbVNvcnRQcm9wZXJ0eURpZENoYW5nZScpOwogICAgICAg
        IH0sIHRoaXMpOwogICAgICB9LCB0aGlzKTsKICAgICAgcmV0dXJuIEVtYmVy
        LkEoY29udGVudCk7CiAgICB9CgogICAgcmV0dXJuIGNvbnRlbnQ7CiAgfSks
        CgogIF9jb250ZW50V2lsbENoYW5nZTogRW1iZXIuYmVmb3JlT2JzZXJ2ZXIo
        J2NvbnRlbnQnLCBmdW5jdGlvbigpIHsKICAgIHZhciBjb250ZW50ID0gZ2V0
        KHRoaXMsICdjb250ZW50JyksCiAgICAgICAgc29ydFByb3BlcnRpZXMgPSBn
        ZXQodGhpcywgJ3NvcnRQcm9wZXJ0aWVzJyk7CgogICAgaWYgKGNvbnRlbnQg
        JiYgc29ydFByb3BlcnRpZXMpIHsKICAgICAgZm9yRWFjaChjb250ZW50LCBm
        dW5jdGlvbihpdGVtKSB7CiAgICAgICAgZm9yRWFjaChzb3J0UHJvcGVydGll
        cywgZnVuY3Rpb24oc29ydFByb3BlcnR5KSB7CiAgICAgICAgICBFbWJlci5y
        ZW1vdmVPYnNlcnZlcihpdGVtLCBzb3J0UHJvcGVydHksIHRoaXMsICdjb250
        ZW50SXRlbVNvcnRQcm9wZXJ0eURpZENoYW5nZScpOwogICAgICAgIH0sIHRo
        aXMpOwogICAgICB9LCB0aGlzKTsKICAgIH0KCiAgICB0aGlzLl9zdXBlcigp
        OwogIH0pLAoKICBzb3J0QXNjZW5kaW5nV2lsbENoYW5nZTogRW1iZXIuYmVm
        b3JlT2JzZXJ2ZXIoJ3NvcnRBc2NlbmRpbmcnLCBmdW5jdGlvbigpIHsKICAg
        IHRoaXMuX2xhc3RTb3J0QXNjZW5kaW5nID0gZ2V0KHRoaXMsICdzb3J0QXNj
        ZW5kaW5nJyk7CiAgfSksCgogIHNvcnRBc2NlbmRpbmdEaWRDaGFuZ2U6IEVt
        YmVyLm9ic2VydmVyKCdzb3J0QXNjZW5kaW5nJywgZnVuY3Rpb24oKSB7CiAg
        ICBpZiAoZ2V0KHRoaXMsICdzb3J0QXNjZW5kaW5nJykgIT09IHRoaXMuX2xh
        c3RTb3J0QXNjZW5kaW5nKSB7CiAgICAgIHZhciBhcnJhbmdlZENvbnRlbnQg
        PSBnZXQodGhpcywgJ2FycmFuZ2VkQ29udGVudCcpOwogICAgICBhcnJhbmdl
        ZENvbnRlbnQucmV2ZXJzZU9iamVjdHMoKTsKICAgIH0KICB9KSwKCiAgY29u
        dGVudEFycmF5V2lsbENoYW5nZTogZnVuY3Rpb24oYXJyYXksIGlkeCwgcmVt
        b3ZlZENvdW50LCBhZGRlZENvdW50KSB7CiAgICB2YXIgaXNTb3J0ZWQgPSBn
        ZXQodGhpcywgJ2lzU29ydGVkJyk7CgogICAgaWYgKGlzU29ydGVkKSB7CiAg
        ICAgIHZhciBhcnJhbmdlZENvbnRlbnQgPSBnZXQodGhpcywgJ2FycmFuZ2Vk
        Q29udGVudCcpOwogICAgICB2YXIgcmVtb3ZlZE9iamVjdHMgPSBhcnJheS5z
        bGljZShpZHgsIGlkeCtyZW1vdmVkQ291bnQpOwogICAgICB2YXIgc29ydFBy
        b3BlcnRpZXMgPSBnZXQodGhpcywgJ3NvcnRQcm9wZXJ0aWVzJyk7CgogICAg
        ICBmb3JFYWNoKHJlbW92ZWRPYmplY3RzLCBmdW5jdGlvbihpdGVtKSB7CiAg
        ICAgICAgYXJyYW5nZWRDb250ZW50LnJlbW92ZU9iamVjdChpdGVtKTsKCiAg
        ICAgICAgZm9yRWFjaChzb3J0UHJvcGVydGllcywgZnVuY3Rpb24oc29ydFBy
        b3BlcnR5KSB7CiAgICAgICAgICBFbWJlci5yZW1vdmVPYnNlcnZlcihpdGVt
        LCBzb3J0UHJvcGVydHksIHRoaXMsICdjb250ZW50SXRlbVNvcnRQcm9wZXJ0
        eURpZENoYW5nZScpOwogICAgICAgIH0sIHRoaXMpOwogICAgICB9LCB0aGlz
        KTsKICAgIH0KCiAgICByZXR1cm4gdGhpcy5fc3VwZXIoYXJyYXksIGlkeCwg
        cmVtb3ZlZENvdW50LCBhZGRlZENvdW50KTsKICB9LAoKICBjb250ZW50QXJy
        YXlEaWRDaGFuZ2U6IGZ1bmN0aW9uKGFycmF5LCBpZHgsIHJlbW92ZWRDb3Vu
        dCwgYWRkZWRDb3VudCkgewogICAgdmFyIGlzU29ydGVkID0gZ2V0KHRoaXMs
        ICdpc1NvcnRlZCcpLAogICAgICAgIHNvcnRQcm9wZXJ0aWVzID0gZ2V0KHRo
        aXMsICdzb3J0UHJvcGVydGllcycpOwoKICAgIGlmIChpc1NvcnRlZCkgewog
        ICAgICB2YXIgYWRkZWRPYmplY3RzID0gYXJyYXkuc2xpY2UoaWR4LCBpZHgr
        YWRkZWRDb3VudCk7CgogICAgICBmb3JFYWNoKGFkZGVkT2JqZWN0cywgZnVu
        Y3Rpb24oaXRlbSkgewogICAgICAgIHRoaXMuaW5zZXJ0SXRlbVNvcnRlZChp
        dGVtKTsKCiAgICAgICAgZm9yRWFjaChzb3J0UHJvcGVydGllcywgZnVuY3Rp
        b24oc29ydFByb3BlcnR5KSB7CiAgICAgICAgICBFbWJlci5hZGRPYnNlcnZl
        cihpdGVtLCBzb3J0UHJvcGVydHksIHRoaXMsICdjb250ZW50SXRlbVNvcnRQ
        cm9wZXJ0eURpZENoYW5nZScpOwogICAgICAgIH0sIHRoaXMpOwogICAgICB9
        LCB0aGlzKTsKICAgIH0KCiAgICByZXR1cm4gdGhpcy5fc3VwZXIoYXJyYXks
        IGlkeCwgcmVtb3ZlZENvdW50LCBhZGRlZENvdW50KTsKICB9LAoKICBpbnNl
        cnRJdGVtU29ydGVkOiBmdW5jdGlvbihpdGVtKSB7CiAgICB2YXIgYXJyYW5n
        ZWRDb250ZW50ID0gZ2V0KHRoaXMsICdhcnJhbmdlZENvbnRlbnQnKTsKICAg
        IHZhciBsZW5ndGggPSBnZXQoYXJyYW5nZWRDb250ZW50LCAnbGVuZ3RoJyk7
        CgogICAgdmFyIGlkeCA9IHRoaXMuX2JpbmFyeVNlYXJjaChpdGVtLCAwLCBs
        ZW5ndGgpOwogICAgYXJyYW5nZWRDb250ZW50Lmluc2VydEF0KGlkeCwgaXRl
        bSk7CiAgfSwKCiAgY29udGVudEl0ZW1Tb3J0UHJvcGVydHlEaWRDaGFuZ2U6
        IGZ1bmN0aW9uKGl0ZW0pIHsKICAgIHZhciBhcnJhbmdlZENvbnRlbnQgPSBn
        ZXQodGhpcywgJ2FycmFuZ2VkQ29udGVudCcpLAogICAgICAgIG9sZEluZGV4
        ID0gYXJyYW5nZWRDb250ZW50LmluZGV4T2YoaXRlbSksCiAgICAgICAgbGVm
        dEl0ZW0gPSBhcnJhbmdlZENvbnRlbnQub2JqZWN0QXQob2xkSW5kZXggLSAx
        KSwKICAgICAgICByaWdodEl0ZW0gPSBhcnJhbmdlZENvbnRlbnQub2JqZWN0
        QXQob2xkSW5kZXggKyAxKSwKICAgICAgICBsZWZ0UmVzdWx0ID0gbGVmdEl0
        ZW0gJiYgdGhpcy5vcmRlckJ5KGl0ZW0sIGxlZnRJdGVtKSwKICAgICAgICBy
        aWdodFJlc3VsdCA9IHJpZ2h0SXRlbSAmJiB0aGlzLm9yZGVyQnkoaXRlbSwg
        cmlnaHRJdGVtKTsKCiAgICBpZiAobGVmdFJlc3VsdCA8IDAgfHwgcmlnaHRS
        ZXN1bHQgPiAwKSB7CiAgICAgIGFycmFuZ2VkQ29udGVudC5yZW1vdmVPYmpl
        Y3QoaXRlbSk7CiAgICAgIHRoaXMuaW5zZXJ0SXRlbVNvcnRlZChpdGVtKTsK
        ICAgIH0KICB9LAoKICBfYmluYXJ5U2VhcmNoOiBmdW5jdGlvbihpdGVtLCBs
        b3csIGhpZ2gpIHsKICAgIHZhciBtaWQsIG1pZEl0ZW0sIHJlcywgYXJyYW5n
        ZWRDb250ZW50OwoKICAgIGlmIChsb3cgPT09IGhpZ2gpIHsKICAgICAgcmV0
        dXJuIGxvdzsKICAgIH0KCiAgICBhcnJhbmdlZENvbnRlbnQgPSBnZXQodGhp
        cywgJ2FycmFuZ2VkQ29udGVudCcpOwoKICAgIG1pZCA9IGxvdyArIE1hdGgu
        Zmxvb3IoKGhpZ2ggLSBsb3cpIC8gMik7CiAgICBtaWRJdGVtID0gYXJyYW5n
        ZWRDb250ZW50Lm9iamVjdEF0KG1pZCk7CgogICAgcmVzID0gdGhpcy5vcmRl
        ckJ5KG1pZEl0ZW0sIGl0ZW0pOwoKICAgIGlmIChyZXMgPCAwKSB7CiAgICAg
        IHJldHVybiB0aGlzLl9iaW5hcnlTZWFyY2goaXRlbSwgbWlkKzEsIGhpZ2gp
        OwogICAgfSBlbHNlIGlmIChyZXMgPiAwKSB7CiAgICAgIHJldHVybiB0aGlz
        Ll9iaW5hcnlTZWFyY2goaXRlbSwgbG93LCBtaWQpOwogICAgfQoKICAgIHJl
        dHVybiBtaWQ7CiAgfQp9KTsKCn0pKCk7CgoKCihmdW5jdGlvbigpIHsKLyoq
        CkBtb2R1bGUgZW1iZXIKQHN1Ym1vZHVsZSBlbWJlci1ydW50aW1lCiovCgp2
        YXIgZ2V0ID0gRW1iZXIuZ2V0LCBzZXQgPSBFbWJlci5zZXQsIGZvckVhY2gg
        PSBFbWJlci5FbnVtZXJhYmxlVXRpbHMuZm9yRWFjaCwKICAgIHJlcGxhY2Ug
        PSBFbWJlci5FbnVtZXJhYmxlVXRpbHMucmVwbGFjZTsKCi8qKgogIGBFbWJl
        ci5BcnJheUNvbnRyb2xsZXJgIHByb3ZpZGVzIGEgd2F5IGZvciB5b3UgdG8g
        cHVibGlzaCBhIGNvbGxlY3Rpb24gb2YKICBvYmplY3RzIHNvIHRoYXQgeW91
        IGNhbiBlYXNpbHkgYmluZCB0byB0aGUgY29sbGVjdGlvbiBmcm9tIGEgSGFu
        ZGxlYmFycwogIGAjZWFjaGAgaGVscGVyLCBhbiBgRW1iZXIuQ29sbGVjdGlv
        blZpZXdgLCBvciBvdGhlciBjb250cm9sbGVycy4KCiAgVGhlIGFkdmFudGFn
        ZSBvZiB1c2luZyBhbiBgQXJyYXlDb250cm9sbGVyYCBpcyB0aGF0IHlvdSBv
        bmx5IGhhdmUgdG8gc2V0IHVwCiAgeW91ciB2aWV3IGJpbmRpbmdzIG9uY2U7
        IHRvIGNoYW5nZSB3aGF0J3MgZGlzcGxheWVkLCBzaW1wbHkgc3dhcCBvdXQg
        dGhlCiAgYGNvbnRlbnRgIHByb3BlcnR5IG9uIHRoZSBjb250cm9sbGVyLgoK
        ICBGb3IgZXhhbXBsZSwgaW1hZ2luZSB5b3Ugd2FudGVkIHRvIGRpc3BsYXkg
        YSBsaXN0IG9mIGl0ZW1zIGZldGNoZWQgdmlhIGFuIFhIUgogIHJlcXVlc3Qu
        IENyZWF0ZSBhbiBgRW1iZXIuQXJyYXlDb250cm9sbGVyYCBhbmQgc2V0IGl0
        cyBgY29udGVudGAgcHJvcGVydHk6CgogIGBgYGphdmFzY3JpcHQKICBNeUFw
        cC5saXN0Q29udHJvbGxlciA9IEVtYmVyLkFycmF5Q29udHJvbGxlci5jcmVh
        dGUoKTsKCiAgJC5nZXQoJ3Blb3BsZS5qc29uJywgZnVuY3Rpb24oZGF0YSkg
        ewogICAgTXlBcHAubGlzdENvbnRyb2xsZXIuc2V0KCdjb250ZW50JywgZGF0
        YSk7CiAgfSk7CiAgYGBgCgogIFRoZW4sIGNyZWF0ZSBhIHZpZXcgdGhhdCBi
        aW5kcyB0byB5b3VyIG5ldyBjb250cm9sbGVyOgoKICBgYGBoYW5kbGViYXJz
        CiAge3sjZWFjaCBNeUFwcC5saXN0Q29udHJvbGxlcn19CiAgICB7e2ZpcnN0
        TmFtZX19IHt7bGFzdE5hbWV9fQogIHt7L2VhY2h9fQogIGBgYAoKICBBbHRo
        b3VnaCB5b3UgYXJlIGJpbmRpbmcgdG8gdGhlIGNvbnRyb2xsZXIsIHRoZSBi
        ZWhhdmlvciBvZiB0aGlzIGNvbnRyb2xsZXIKICBpcyB0byBwYXNzIHRocm91
        Z2ggYW55IG1ldGhvZHMgb3IgcHJvcGVydGllcyB0byB0aGUgdW5kZXJseWlu
        ZyBhcnJheS4gVGhpcwogIGNhcGFiaWxpdHkgY29tZXMgZnJvbSBgRW1iZXIu
        QXJyYXlQcm94eWAsIHdoaWNoIHRoaXMgY2xhc3MgaW5oZXJpdHMgZnJvbS4K
        CiAgU29tZXRpbWVzIHlvdSB3YW50IHRvIGRpc3BsYXkgY29tcHV0ZWQgcHJv
        cGVydGllcyB3aXRoaW4gdGhlIGJvZHkgb2YgYW4KICBgI2VhY2hgIGhlbHBl
        ciB0aGF0IGRlcGVuZCBvbiB0aGUgdW5kZXJseWluZyBpdGVtcyBpbiBgY29u
        dGVudGAsIGJ1dCBhcmUgbm90CiAgcHJlc2VudCBvbiB0aG9zZSBpdGVtcy4g
        ICBUbyBkbyB0aGlzLCBzZXQgYGl0ZW1Db250cm9sbGVyYCB0byB0aGUgbmFt
        ZSBvZiBhCiAgY29udHJvbGxlciAocHJvYmFibHkgYW4gYE9iamVjdENvbnRy
        b2xsZXJgKSB0aGF0IHdpbGwgd3JhcCBlYWNoIGluZGl2aWR1YWwgaXRlbS4K
        CiAgRm9yIGV4YW1wbGU6CgogIGBgYGhhbmRsZWJhcnMKICAgIHt7I2VhY2gg
        cG9zdCBpbiBjb250cm9sbGVyfX0KICAgICAgPGxpPnt7dGl0bGV9fSAoe3t0
        aXRsZUxlbmd0aH19IGNoYXJhY3RlcnMpPC9saT4KICAgIHt7L2VhY2h9fQog
        IGBgYAoKICBgYGBqYXZhc2NyaXB0CiAgQXBwLlBvc3RzQ29udHJvbGxlciA9
        IEVtYmVyLkFycmF5Q29udHJvbGxlci5leHRlbmQoewogICAgaXRlbUNvbnRy
        b2xsZXI6ICdwb3N0JwogIH0pOwoKICBBcHAuUG9zdENvbnRyb2xsZXIgPSBF
        bWJlci5PYmplY3RDb250cm9sbGVyLmV4dGVuZCh7CiAgICAvLyB0aGUgYHRp
        dGxlYCBwcm9wZXJ0eSB3aWxsIGJlIHByb3hpZWQgdG8gdGhlIHVuZGVybHlp
        bmcgcG9zdC4KCiAgICB0aXRsZUxlbmd0aDogZnVuY3Rpb24oKSB7CiAgICAg
        IHJldHVybiB0aGlzLmdldCgndGl0bGUnKS5sZW5ndGg7CiAgICB9LnByb3Bl
        cnR5KCd0aXRsZScpCiAgfSk7CiAgYGBgCgogIEluIHNvbWUgY2FzZXMgaXQg
        aXMgaGVscGZ1bCB0byByZXR1cm4gYSBkaWZmZXJlbnQgYGl0ZW1Db250cm9s
        bGVyYCBkZXBlbmRpbmcKICBvbiB0aGUgcGFydGljdWxhciBpdGVtLiAgU3Vi
        Y2xhc3NlcyBjYW4gZG8gdGhpcyBieSBvdmVycmlkaW5nCiAgYGxvb2t1cEl0
        ZW1Db250cm9sbGVyYC4KCiAgRm9yIGV4YW1wbGU6CgogIGBgYGphdmFzY3Jp
        cHQKICBBcHAuTXlBcnJheUNvbnRyb2xsZXIgPSBFbWJlci5BcnJheUNvbnRy
        b2xsZXIuZXh0ZW5kKHsKICAgIGxvb2t1cEl0ZW1Db250cm9sbGVyOiBmdW5j
        dGlvbiggb2JqZWN0ICkgewogICAgICBpZiAob2JqZWN0LmdldCgnaXNTcGVj
        aWFsJykpIHsKICAgICAgICByZXR1cm4gInNwZWNpYWwiOyAvLyB1c2UgQXBw
        LlNwZWNpYWxDb250cm9sbGVyCiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0
        dXJuICJyZWd1bGFyIjsgLy8gdXNlIEFwcC5SZWd1bGFyQ29udHJvbGxlcgog
        ICAgICB9CiAgICB9CiAgfSk7CiAgYGBgCgogIFRoZSBpdGVtQ29udHJvbGxl
        ciBpbnN0YW5jZXMgd2lsbCBoYXZlIGEgYHBhcmVudENvbnRyb2xsZXJgIHBy
        b3BlcnR5IHNldCB0bwogIHRoZSBgQXJyYXlDb250cm9sbGVyYCBpbnN0YW5j
        ZS4KCiAgQGNsYXNzIEFycmF5Q29udHJvbGxlcgogIEBuYW1lc3BhY2UgRW1i
        ZXIKICBAZXh0ZW5kcyBFbWJlci5BcnJheVByb3h5CiAgQHVzZXMgRW1iZXIu
        U29ydGFibGVNaXhpbgogIEB1c2VzIEVtYmVyLkNvbnRyb2xsZXJNaXhpbgoq
        LwoKRW1iZXIuQXJyYXlDb250cm9sbGVyID0gRW1iZXIuQXJyYXlQcm94eS5l
        eHRlbmQoRW1iZXIuQ29udHJvbGxlck1peGluLAogIEVtYmVyLlNvcnRhYmxl
        TWl4aW4sIHsKCiAgLyoqCiAgICBUaGUgY29udHJvbGxlciB1c2VkIHRvIHdy
        YXAgaXRlbXMsIGlmIGFueS4KCiAgICBAcHJvcGVydHkgaXRlbUNvbnRyb2xs
        ZXIKICAgIEB0eXBlIFN0cmluZwogICAgQGRlZmF1bHQgbnVsbAogICovCiAg
        aXRlbUNvbnRyb2xsZXI6IG51bGwsCgogIC8qKgogICAgUmV0dXJuIHRoZSBu
        YW1lIG9mIHRoZSBjb250cm9sbGVyIHRvIHdyYXAgaXRlbXMsIG9yIGBudWxs
        YCBpZiBpdGVtcyBzaG91bGQKICAgIGJlIHJldHVybmVkIGRpcmVjdGx5LiAg
        VGhlIGRlZmF1bHQgaW1wbGVtZW50YXRpb24gc2ltcGx5IHJldHVybnMgdGhl
        CiAgICBgaXRlbUNvbnRyb2xsZXJgIHByb3BlcnR5LCBidXQgc3ViY2xhc3Nl
        cyBjYW4gb3ZlcnJpZGUgdGhpcyBtZXRob2QgdG8gcmV0dXJuCiAgICBkaWZm
        ZXJlbnQgY29udHJvbGxlcnMgZm9yIGRpZmZlcmVudCBvYmplY3RzLgoKICAg
        IEZvciBleGFtcGxlOgoKICAgIGBgYGphdmFzY3JpcHQKICAgIEFwcC5NeUFy
        cmF5Q29udHJvbGxlciA9IEVtYmVyLkFycmF5Q29udHJvbGxlci5leHRlbmQo
        ewogICAgICBsb29rdXBJdGVtQ29udHJvbGxlcjogZnVuY3Rpb24oIG9iamVj
        dCApIHsKICAgICAgICBpZiAob2JqZWN0LmdldCgnaXNTcGVjaWFsJykpIHsK
        ICAgICAgICAgIHJldHVybiAic3BlY2lhbCI7IC8vIHVzZSBBcHAuU3BlY2lh
        bENvbnRyb2xsZXIKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmV0dXJu
        ICJyZWd1bGFyIjsgLy8gdXNlIEFwcC5SZWd1bGFyQ29udHJvbGxlcgogICAg
        ICAgIH0KICAgICAgfQogICAgfSk7CiAgICBgYGAKCiAgICBAbWV0aG9kIGxv
        b2t1cEl0ZW1Db250cm9sbGVyCiAgICBAcGFyYW0ge09iamVjdH0gb2JqZWN0
        CiAgICBAcmV0dXJuIHtTdHJpbmd9CiAgKi8KICBsb29rdXBJdGVtQ29udHJv
        bGxlcjogZnVuY3Rpb24ob2JqZWN0KSB7CiAgICByZXR1cm4gZ2V0KHRoaXMs
        ICdpdGVtQ29udHJvbGxlcicpOwogIH0sCgogIG9iamVjdEF0Q29udGVudDog
        ZnVuY3Rpb24oaWR4KSB7CiAgICB2YXIgbGVuZ3RoID0gZ2V0KHRoaXMsICds
        ZW5ndGgnKSwKICAgICAgICBhcnJhbmdlZENvbnRlbnQgPSBnZXQodGhpcywn
        YXJyYW5nZWRDb250ZW50JyksCiAgICAgICAgb2JqZWN0ID0gYXJyYW5nZWRD
        b250ZW50ICYmIGFycmFuZ2VkQ29udGVudC5vYmplY3RBdChpZHgpOwoKICAg
        IGlmIChpZHggPj0gMCAmJiBpZHggPCBsZW5ndGgpIHsKICAgICAgdmFyIGNv
        bnRyb2xsZXJDbGFzcyA9IHRoaXMubG9va3VwSXRlbUNvbnRyb2xsZXIob2Jq
        ZWN0KTsKICAgICAgaWYgKGNvbnRyb2xsZXJDbGFzcykgewogICAgICAgIHJl
        dHVybiB0aGlzLmNvbnRyb2xsZXJBdChpZHgsIG9iamVjdCwgY29udHJvbGxl
        ckNsYXNzKTsKICAgICAgfQogICAgfQoKICAgIC8vIFdoZW4gYGNvbnRyb2xs
        ZXJDbGFzc2AgaXMgZmFsc3ksIHdlIGhhdmUgbm90IG9wdGVkIGluIHRvIHVz
        aW5nIGl0ZW0KICAgIC8vIGNvbnRyb2xsZXJzLCBzbyByZXR1cm4gdGhlIG9i
        amVjdCBkaXJlY3RseS4KCiAgICAvLyBXaGVuIHRoZSBpbmRleCBpcyBvdXQg
        b2YgcmFuZ2UsIHdlIHdhbnQgdG8gcmV0dXJuIHRoZSAib3V0IG9mIHJhbmdl
        IgogICAgLy8gdmFsdWUsIHdoYXRldmVyIHRoYXQgbWlnaHQgYmUuICBSYXRo
        ZXIgdGhhbiBtYWtlIGFzc3VtcHRpb25zCiAgICAvLyAoZS5nLiBndWVzc2lu
        ZyBgbnVsbGAgb3IgYHVuZGVmaW5lZGApIHdlIGRlZmVyIHRoaXMgdG8gYGFy
        cmFuZ2VkQ29udGVudGAuCiAgICByZXR1cm4gb2JqZWN0OwogIH0sCgogIGFy
        cmFuZ2VkQ29udGVudERpZENoYW5nZTogZnVuY3Rpb24oKSB7CiAgICB0aGlz
        Ll9zdXBlcigpOwogICAgdGhpcy5fcmVzZXRTdWJDb250cm9sbGVycygpOwog
        IH0sCgogIGFycmF5Q29udGVudERpZENoYW5nZTogZnVuY3Rpb24oaWR4LCBy
        ZW1vdmVkQ250LCBhZGRlZENudCkgewogICAgdmFyIHN1YkNvbnRyb2xsZXJz
        ID0gZ2V0KHRoaXMsICdfc3ViQ29udHJvbGxlcnMnKSwKICAgICAgICBzdWJD
        b250cm9sbGVyc1RvUmVtb3ZlID0gc3ViQ29udHJvbGxlcnMuc2xpY2UoaWR4
        LCBpZHgrcmVtb3ZlZENudCk7CgogICAgZm9yRWFjaChzdWJDb250cm9sbGVy
        c1RvUmVtb3ZlLCBmdW5jdGlvbihzdWJDb250cm9sbGVyKSB7CiAgICAgIGlm
        IChzdWJDb250cm9sbGVyKSB7IHN1YkNvbnRyb2xsZXIuZGVzdHJveSgpOyB9
        CiAgICB9KTsKCiAgICByZXBsYWNlKHN1YkNvbnRyb2xsZXJzLCBpZHgsIHJl
        bW92ZWRDbnQsIG5ldyBBcnJheShhZGRlZENudCkpOwoKICAgIC8vIFRoZSBz
        aGFkb3cgYXJyYXkgb2Ygc3ViY29udHJvbGxlcnMgbXVzdCBiZSB1cGRhdGVk
        IGJlZm9yZSB3ZSB0cmlnZ2VyCiAgICAvLyBvYnNlcnZlcnMsIG90aGVyd2lz
        ZSBvYnNlcnZlcnMgd2lsbCBnZXQgdGhlIHdyb25nIHN1YmNvbnRhaW5lciB3
        aGVuCiAgICAvLyBjYWxsaW5nIGBvYmplY3RBdGAKICAgIHRoaXMuX3N1cGVy
        KGlkeCwgcmVtb3ZlZENudCwgYWRkZWRDbnQpOwogIH0sCgogIGluaXQ6IGZ1
        bmN0aW9uKCkgewogICAgdGhpcy5fc3VwZXIoKTsKCiAgICB0aGlzLnNldCgn
        X3N1YkNvbnRyb2xsZXJzJywgRW1iZXIuQSgpKTsKICB9LAoKICBjb250ZW50
        OiBFbWJlci5jb21wdXRlZChmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gRW1i
        ZXIuQSgpOwogIH0pLAoKICAvKioKICAgKiBGbGFnIHRvIG1hcmsgYXMgYmVp
        bmcgInZpcnR1YWwiLiBVc2VkIHRvIGtlZXAgdGhpcyBpbnN0YW5jZQogICAq
        IGZyb20gcGFydGljaXBhdGluZyBpbiB0aGUgcGFyZW50Q29udHJvbGxlciBo
        aWVyYXJjaHkuCiAgICoKICAgKiBAcHJpdmF0ZQogICAqIEB0eXBlIEJvb2xl
        YW4KICAgKi8KICBfaXNWaXJ0dWFsOiBmYWxzZSwKCiAgY29udHJvbGxlckF0
        OiBmdW5jdGlvbihpZHgsIG9iamVjdCwgY29udHJvbGxlckNsYXNzKSB7CiAg
        ICB2YXIgY29udGFpbmVyID0gZ2V0KHRoaXMsICdjb250YWluZXInKSwKICAg
        ICAgICBzdWJDb250cm9sbGVycyA9IGdldCh0aGlzLCAnX3N1YkNvbnRyb2xs
        ZXJzJyksCiAgICAgICAgc3ViQ29udHJvbGxlciA9IHN1YkNvbnRyb2xsZXJz
        W2lkeF0sCiAgICAgICAgZnVsbE5hbWU7CgogICAgaWYgKHN1YkNvbnRyb2xs
        ZXIpIHsgcmV0dXJuIHN1YkNvbnRyb2xsZXI7IH0KCiAgICBmdWxsTmFtZSA9
        ICJjb250cm9sbGVyOiIgKyBjb250cm9sbGVyQ2xhc3M7CgogICAgaWYgKCFj
        b250YWluZXIuaGFzKGZ1bGxOYW1lKSkgewogICAgICB0aHJvdyBuZXcgRW1i
        ZXIuRXJyb3IoJ0NvdWxkIG5vdCByZXNvbHZlIGl0ZW1Db250cm9sbGVyOiAi
        JyArIGNvbnRyb2xsZXJDbGFzcyArICciJyk7CiAgICB9CiAgICB2YXIgcGFy
        ZW50Q29udHJvbGxlcjsKICAgIGlmICh0aGlzLl9pc1ZpcnR1YWwpIHsKICAg
        ICAgcGFyZW50Q29udHJvbGxlciA9IGdldCh0aGlzLCAncGFyZW50Q29udHJv
        bGxlcicpOwogICAgfQogICAgcGFyZW50Q29udHJvbGxlciA9IHBhcmVudENv
        bnRyb2xsZXIgfHwgdGhpczsKICAgIHN1YkNvbnRyb2xsZXIgPSBjb250YWlu
        ZXIubG9va3VwRmFjdG9yeShmdWxsTmFtZSkuY3JlYXRlKHsKICAgICAgdGFy
        Z2V0OiB0aGlzLAogICAgICBwYXJlbnRDb250cm9sbGVyOiBwYXJlbnRDb250
        cm9sbGVyLAogICAgICBjb250ZW50OiBvYmplY3QKICAgIH0pOwoKICAgIHN1
        YkNvbnRyb2xsZXJzW2lkeF0gPSBzdWJDb250cm9sbGVyOwoKICAgIHJldHVy
        biBzdWJDb250cm9sbGVyOwogIH0sCgogIF9zdWJDb250cm9sbGVyczogbnVs
        bCwKCiAgX3Jlc2V0U3ViQ29udHJvbGxlcnM6IGZ1bmN0aW9uKCkgewogICAg
        dmFyIHN1YkNvbnRyb2xsZXJzID0gZ2V0KHRoaXMsICdfc3ViQ29udHJvbGxl
        cnMnKTsKICAgIGlmIChzdWJDb250cm9sbGVycykgewogICAgICBmb3JFYWNo
        KHN1YkNvbnRyb2xsZXJzLCBmdW5jdGlvbihzdWJDb250cm9sbGVyKSB7CiAg
        ICAgICAgaWYgKHN1YkNvbnRyb2xsZXIpIHsgc3ViQ29udHJvbGxlci5kZXN0
        cm95KCk7IH0KICAgICAgfSk7CiAgICB9CgogICAgdGhpcy5zZXQoJ19zdWJD
        b250cm9sbGVycycsIEVtYmVyLkEoKSk7CiAgfQp9KTsKCn0pKCk7CgoKCihm
        dW5jdGlvbigpIHsKLyoqCkBtb2R1bGUgZW1iZXIKQHN1Ym1vZHVsZSBlbWJl
        ci1ydW50aW1lCiovCgovKioKICBgRW1iZXIuT2JqZWN0Q29udHJvbGxlcmAg
        aXMgcGFydCBvZiBFbWJlcidzIENvbnRyb2xsZXIgbGF5ZXIuIEl0IGlzIGlu
        dGVuZGVkCiAgdG8gd3JhcCBhIHNpbmdsZSBvYmplY3QsIHByb3h5aW5nIHVu
        aGFuZGxlZCBhdHRlbXB0cyB0byBgZ2V0YCBhbmQgYHNldGAgdG8gdGhlIHVu
        ZGVybHlpbmcKICBjb250ZW50IG9iamVjdCwgYW5kIHRvIGZvcndhcmQgdW5o
        YW5kbGVkIGFjdGlvbiBhdHRlbXB0cyB0byBpdHMgYHRhcmdldGAuCgogIGBF
        bWJlci5PYmplY3RDb250cm9sbGVyYCBkZXJpdmVzIHRoaXMgZnVuY3Rpb25h
        bGl0eSBmcm9tIGl0cyBzdXBlcmNsYXNzCiAgYEVtYmVyLk9iamVjdFByb3h5
        YCBhbmQgdGhlIGBFbWJlci5Db250cm9sbGVyTWl4aW5gIG1peGluLgoKICBA
        Y2xhc3MgT2JqZWN0Q29udHJvbGxlcgogIEBuYW1lc3BhY2UgRW1iZXIKICBA
        ZXh0ZW5kcyBFbWJlci5PYmplY3RQcm94eQogIEB1c2VzIEVtYmVyLkNvbnRy
        b2xsZXJNaXhpbgoqKi8KRW1iZXIuT2JqZWN0Q29udHJvbGxlciA9IEVtYmVy
        Lk9iamVjdFByb3h5LmV4dGVuZChFbWJlci5Db250cm9sbGVyTWl4aW4pOwoK
        fSkoKTsKCgoKKGZ1bmN0aW9uKCkgewoKfSkoKTsKCgoKKGZ1bmN0aW9uKCkg
        ewovKioKRW1iZXIgUnVudGltZQoKQG1vZHVsZSBlbWJlcgpAc3VibW9kdWxl
        IGVtYmVyLXJ1bnRpbWUKQHJlcXVpcmVzIGVtYmVyLW1ldGFsCiovCgp9KSgp
        OwoKKGZ1bmN0aW9uKCkgewovKioKQG1vZHVsZSBlbWJlcgpAc3VibW9kdWxl
        IGVtYmVyLXZpZXdzCiovCgp2YXIgalF1ZXJ5ID0gKHRoaXMgJiYgdGhpcy5q
        UXVlcnkpIHx8IChFbWJlci5pbXBvcnRzICYmIEVtYmVyLmltcG9ydHMualF1
        ZXJ5KTsKaWYgKCFqUXVlcnkgJiYgdHlwZW9mIHJlcXVpcmUgPT09ICdmdW5j
        dGlvbicpIHsKICBqUXVlcnkgPSByZXF1aXJlKCdqcXVlcnknKTsKfQoKRW1i
        ZXIuYXNzZXJ0KCJFbWJlciBWaWV3cyByZXF1aXJlIGpRdWVyeSBiZXR3ZWVu
        IDEuNyBhbmQgMi4xIiwgalF1ZXJ5ICYmIChqUXVlcnkoKS5qcXVlcnkubWF0
        Y2goL14oKDFcLig3fDh8OXwxMHwxMSkpfCgyXC4oMHwxKSkpKFwuXGQrKT8o
        cHJlfHJjXGQ/KT8vKSB8fCBFbWJlci5FTlYuRk9SQ0VfSlFVRVJZKSk7Cgov
        KioKICBBbGlhcyBmb3IgalF1ZXJ5CgogIEBtZXRob2QgJAogIEBmb3IgRW1i
        ZXIKKi8KRW1iZXIuJCA9IGpRdWVyeTsKCn0pKCk7CgoKCihmdW5jdGlvbigp
        IHsKLyoqCkBtb2R1bGUgZW1iZXIKQHN1Ym1vZHVsZSBlbWJlci12aWV3cwoq
        LwppZiAoRW1iZXIuJCkgewogIC8vIGh0dHA6Ly93d3cud2hhdHdnLm9yZy9z
        cGVjcy93ZWItYXBwcy9jdXJyZW50LXdvcmsvbXVsdGlwYWdlL2RuZC5odG1s
        I2RuZGV2ZW50cwogIHZhciBkcmFnRXZlbnRzID0gRW1iZXIuU3RyaW5nLnco
        J2RyYWdzdGFydCBkcmFnIGRyYWdlbnRlciBkcmFnbGVhdmUgZHJhZ292ZXIg
        ZHJvcCBkcmFnZW5kJyk7CgogIC8vIENvcGllcyB0aGUgYGRhdGFUcmFuc2Zl
        cmAgcHJvcGVydHkgZnJvbSBhIGJyb3dzZXIgZXZlbnQgb2JqZWN0IG9udG8g
        dGhlCiAgLy8galF1ZXJ5IGV2ZW50IG9iamVjdCBmb3IgdGhlIHNwZWNpZmll
        ZCBldmVudHMKICBFbWJlci5FbnVtZXJhYmxlVXRpbHMuZm9yRWFjaChkcmFn
        RXZlbnRzLCBmdW5jdGlvbihldmVudE5hbWUpIHsKICAgIEVtYmVyLiQuZXZl
        bnQuZml4SG9va3NbZXZlbnROYW1lXSA9IHsgcHJvcHM6IFsnZGF0YVRyYW5z
        ZmVyJ10gfTsKICB9KTsKfQoKfSkoKTsKCgoKKGZ1bmN0aW9uKCkgewovKioK
        QG1vZHVsZSBlbWJlcgpAc3VibW9kdWxlIGVtYmVyLXZpZXdzCiovCgovKiBC
        RUdJTiBNRVRBTU9SUEggSEVMUEVSUyAqLwoKLy8gSW50ZXJuZXQgRXhwbG9y
        ZXIgcHJpb3IgdG8gOSBkb2VzIG5vdCBhbGxvdyBzZXR0aW5nIGlubmVySFRN
        TCBpZiB0aGUgZmlyc3QgZWxlbWVudAovLyBpcyBhICJ6ZXJvLXNjb3BlIiBl
        bGVtZW50LiBUaGlzIHByb2JsZW0gY2FuIGJlIHdvcmtlZCBhcm91bmQgYnkg
        bWFraW5nCi8vIHRoZSBmaXJzdCBub2RlIGFuIGludmlzaWJsZSB0ZXh0IG5v
        ZGUuIFdlLCBsaWtlIE1vZGVybml6ciwgdXNlICZzaHk7Cgp2YXIgbmVlZHNT
        aHkgPSB0eXBlb2YgZG9jdW1lbnQgIT09ICd1bmRlZmluZWQnICYmIChmdW5j
        dGlvbigpIHsKICB2YXIgdGVzdEVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVu
        dCgnZGl2Jyk7CiAgdGVzdEVsLmlubmVySFRNTCA9ICI8ZGl2PjwvZGl2PiI7
        CiAgdGVzdEVsLmZpcnN0Q2hpbGQuaW5uZXJIVE1MID0gIjxzY3JpcHQ+PC9z
        Y3JpcHQ+IjsKICByZXR1cm4gdGVzdEVsLmZpcnN0Q2hpbGQuaW5uZXJIVE1M
        ID09PSAnJzsKfSkoKTsKCi8vIElFIDggKGFuZCBsaWtlbHkgZWFybGllcikg
        bGlrZXMgdG8gbW92ZSB3aGl0ZXNwYWNlIHByZWNlZWRpbmcKLy8gYSBzY3Jp
        cHQgdGFnIHRvIGFwcGVhciBhZnRlciBpdC4gVGhpcyBtZWFucyB0aGF0IHdl
        IGNhbgovLyBhY2NpZGVudGFsbHkgcmVtb3ZlIHdoaXRlc3BhY2Ugd2hlbiB1
        cGRhdGluZyBhIG1vcnBoLgp2YXIgbW92ZXNXaGl0ZXNwYWNlID0gdHlwZW9m
        IGRvY3VtZW50ICE9PSAndW5kZWZpbmVkJyAmJiAoZnVuY3Rpb24oKSB7CiAg
        dmFyIHRlc3RFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwog
        IHRlc3RFbC5pbm5lckhUTUwgPSAiVGVzdDogPHNjcmlwdCB0eXBlPSd0ZXh0
        L3gtcGxhY2Vob2xkZXInPjwvc2NyaXB0PlZhbHVlIjsKICByZXR1cm4gdGVz
        dEVsLmNoaWxkTm9kZXNbMF0ubm9kZVZhbHVlID09PSAnVGVzdDonICYmCiAg
        ICAgICAgICB0ZXN0RWwuY2hpbGROb2Rlc1syXS5ub2RlVmFsdWUgPT09ICcg
        VmFsdWUnOwp9KSgpOwoKLy8gVXNlIHRoaXMgdG8gZmluZCBjaGlsZHJlbiBi
        eSBJRCBpbnN0ZWFkIG9mIHVzaW5nIGpRdWVyeQp2YXIgZmluZENoaWxkQnlJ
        ZCA9IGZ1bmN0aW9uKGVsZW1lbnQsIGlkKSB7CiAgaWYgKGVsZW1lbnQuZ2V0
        QXR0cmlidXRlKCdpZCcpID09PSBpZCkgeyByZXR1cm4gZWxlbWVudDsgfQoK
        ICB2YXIgbGVuID0gZWxlbWVudC5jaGlsZE5vZGVzLmxlbmd0aCwgaWR4LCBu
        b2RlLCBmb3VuZDsKICBmb3IgKGlkeD0wOyBpZHg8bGVuOyBpZHgrKykgewog
        ICAgbm9kZSA9IGVsZW1lbnQuY2hpbGROb2Rlc1tpZHhdOwogICAgZm91bmQg
        PSBub2RlLm5vZGVUeXBlID09PSAxICYmIGZpbmRDaGlsZEJ5SWQobm9kZSwg
        aWQpOwogICAgaWYgKGZvdW5kKSB7IHJldHVybiBmb3VuZDsgfQogIH0KfTsK
        CnZhciBzZXRJbm5lckhUTUxXaXRob3V0Rml4ID0gZnVuY3Rpb24oZWxlbWVu
        dCwgaHRtbCkgewogIGlmIChuZWVkc1NoeSkgewogICAgaHRtbCA9ICcmc2h5
        OycgKyBodG1sOwogIH0KCiAgdmFyIG1hdGNoZXMgPSBbXTsKICBpZiAobW92
        ZXNXaGl0ZXNwYWNlKSB7CiAgICAvLyBSaWdodCBub3cgd2Ugb25seSBjaGVj
        ayBmb3Igc2NyaXB0IHRhZ3Mgd2l0aCBpZHMgd2l0aCB0aGUKICAgIC8vIGdv
        YWwgb2YgdGFyZ2V0aW5nIG1vcnBocy4KICAgIGh0bWwgPSBodG1sLnJlcGxh
        Y2UoLyhccyspKDxzY3JpcHQgaWQ9JyhbXiddKyknKS9nLCBmdW5jdGlvbiht
        YXRjaCwgc3BhY2VzLCB0YWcsIGlkKSB7CiAgICAgIG1hdGNoZXMucHVzaChb
        aWQsIHNwYWNlc10pOwogICAgICByZXR1cm4gdGFnOwogICAgfSk7CiAgfQoK
        ICBlbGVtZW50LmlubmVySFRNTCA9IGh0bWw7CgogIC8vIElmIHdlIGhhdmUg
        dG8gZG8gYW55IHdoaXRlc3BhY2UgYWRqdXN0bWVudHMgZG8gdGhlbSBub3cK
        ICBpZiAobWF0Y2hlcy5sZW5ndGggPiAwKSB7CiAgICB2YXIgbGVuID0gbWF0
        Y2hlcy5sZW5ndGgsIGlkeDsKICAgIGZvciAoaWR4PTA7IGlkeDxsZW47IGlk
        eCsrKSB7CiAgICAgIHZhciBzY3JpcHQgPSBmaW5kQ2hpbGRCeUlkKGVsZW1l
        bnQsIG1hdGNoZXNbaWR4XVswXSksCiAgICAgICAgICBub2RlID0gZG9jdW1l
        bnQuY3JlYXRlVGV4dE5vZGUobWF0Y2hlc1tpZHhdWzFdKTsKICAgICAgc2Ny
        aXB0LnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKG5vZGUsIHNjcmlwdCk7CiAg
        ICB9CiAgfQoKICBpZiAobmVlZHNTaHkpIHsKICAgIHZhciBzaHlFbGVtZW50
        ID0gZWxlbWVudC5maXJzdENoaWxkOwogICAgd2hpbGUgKHNoeUVsZW1lbnQu
        bm9kZVR5cGUgPT09IDEgJiYgIXNoeUVsZW1lbnQubm9kZU5hbWUpIHsKICAg
        ICAgc2h5RWxlbWVudCA9IHNoeUVsZW1lbnQuZmlyc3RDaGlsZDsKICAgIH0K
        ICAgIGlmIChzaHlFbGVtZW50Lm5vZGVUeXBlID09PSAzICYmIHNoeUVsZW1l
        bnQubm9kZVZhbHVlLmNoYXJBdCgwKSA9PT0gIlx1MDBBRCIpIHsKICAgICAg
        c2h5RWxlbWVudC5ub2RlVmFsdWUgPSBzaHlFbGVtZW50Lm5vZGVWYWx1ZS5z
        bGljZSgxKTsKICAgIH0KICB9Cn07CgovKiBFTkQgTUVUQU1PUlBIIEhFTFBF
        UlMgKi8KCgp2YXIgaW5uZXJIVE1MVGFncyA9IHt9Owp2YXIgY2FuU2V0SW5u
        ZXJIVE1MID0gZnVuY3Rpb24odGFnTmFtZSkgewogIGlmIChpbm5lckhUTUxU
        YWdzW3RhZ05hbWVdICE9PSB1bmRlZmluZWQpIHsKICAgIHJldHVybiBpbm5l
        ckhUTUxUYWdzW3RhZ05hbWVdOwogIH0KCiAgdmFyIGNhblNldCA9IHRydWU7
        CgogIC8vIElFIDggYW5kIGVhcmxpZXIgZG9uJ3QgYWxsb3cgdXMgdG8gZG8g
        aW5uZXJIVE1MIG9uIHNlbGVjdAogIGlmICh0YWdOYW1lLnRvTG93ZXJDYXNl
        KCkgPT09ICdzZWxlY3QnKSB7CiAgICB2YXIgZWwgPSBkb2N1bWVudC5jcmVh
        dGVFbGVtZW50KCdzZWxlY3QnKTsKICAgIHNldElubmVySFRNTFdpdGhvdXRG
        aXgoZWwsICc8b3B0aW9uIHZhbHVlPSJ0ZXN0Ij5UZXN0PC9vcHRpb24+Jyk7
        CiAgICBjYW5TZXQgPSBlbC5vcHRpb25zLmxlbmd0aCA9PT0gMTsKICB9Cgog
        IGlubmVySFRNTFRhZ3NbdGFnTmFtZV0gPSBjYW5TZXQ7CgogIHJldHVybiBj
        YW5TZXQ7Cn07Cgp2YXIgc2V0SW5uZXJIVE1MID0gZnVuY3Rpb24oZWxlbWVu
        dCwgaHRtbCkgewogIHZhciB0YWdOYW1lID0gZWxlbWVudC50YWdOYW1lOwoK
        ICBpZiAoY2FuU2V0SW5uZXJIVE1MKHRhZ05hbWUpKSB7CiAgICBzZXRJbm5l
        ckhUTUxXaXRob3V0Rml4KGVsZW1lbnQsIGh0bWwpOwogIH0gZWxzZSB7CiAg
        ICAvLyBGaXJlZm94IHZlcnNpb25zIDwgMTEgZG8gbm90IGhhdmUgc3VwcG9y
        dCBmb3IgZWxlbWVudC5vdXRlckhUTUwuCiAgICB2YXIgb3V0ZXJIVE1MID0g
        ZWxlbWVudC5vdXRlckhUTUwgfHwgbmV3IFhNTFNlcmlhbGl6ZXIoKS5zZXJp
        YWxpemVUb1N0cmluZyhlbGVtZW50KTsKICAgIEVtYmVyLmFzc2VydCgiQ2Fu
        J3Qgc2V0IGlubmVySFRNTCBvbiAiK2VsZW1lbnQudGFnTmFtZSsiIGluIHRo
        aXMgYnJvd3NlciIsIG91dGVySFRNTCk7CgogICAgdmFyIHN0YXJ0VGFnID0g
        b3V0ZXJIVE1MLm1hdGNoKG5ldyBSZWdFeHAoIjwiK3RhZ05hbWUrIihbXj5d
        Kik+IiwgJ2knKSlbMF0sCiAgICAgICAgZW5kVGFnID0gJzwvJyt0YWdOYW1l
        Kyc+JzsKCiAgICB2YXIgd3JhcHBlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1l
        bnQoJ2RpdicpOwogICAgc2V0SW5uZXJIVE1MV2l0aG91dEZpeCh3cmFwcGVy
        LCBzdGFydFRhZyArIGh0bWwgKyBlbmRUYWcpOwogICAgZWxlbWVudCA9IHdy
        YXBwZXIuZmlyc3RDaGlsZDsKICAgIHdoaWxlIChlbGVtZW50LnRhZ05hbWUg
        IT09IHRhZ05hbWUpIHsKICAgICAgZWxlbWVudCA9IGVsZW1lbnQubmV4dFNp
        Ymxpbmc7CiAgICB9CiAgfQoKICByZXR1cm4gZWxlbWVudDsKfTsKCmZ1bmN0
        aW9uIGlzU2ltcGxlQ2xpY2soZXZlbnQpIHsKICB2YXIgbW9kaWZpZXIgPSBl
        dmVudC5zaGlmdEtleSB8fCBldmVudC5tZXRhS2V5IHx8IGV2ZW50LmFsdEtl
        eSB8fCBldmVudC5jdHJsS2V5LAogICAgICBzZWNvbmRhcnlDbGljayA9IGV2
        ZW50LndoaWNoID4gMTsgLy8gSUU5IG1heSByZXR1cm4gdW5kZWZpbmVkCgog
        IHJldHVybiAhbW9kaWZpZXIgJiYgIXNlY29uZGFyeUNsaWNrOwp9CgpFbWJl
        ci5WaWV3VXRpbHMgPSB7CiAgc2V0SW5uZXJIVE1MOiBzZXRJbm5lckhUTUws
        CiAgaXNTaW1wbGVDbGljazogaXNTaW1wbGVDbGljawp9OwoKfSkoKTsKCgoK
        KGZ1bmN0aW9uKCkgewovKioKQG1vZHVsZSBlbWJlcgpAc3VibW9kdWxlIGVt
        YmVyLXZpZXdzCiovCgp2YXIgZ2V0ID0gRW1iZXIuZ2V0LCBzZXQgPSBFbWJl
        ci5zZXQ7Cgp2YXIgQ2xhc3NTZXQgPSBmdW5jdGlvbigpIHsKICB0aGlzLnNl
        ZW4gPSB7fTsKICB0aGlzLmxpc3QgPSBbXTsKfTsKCkNsYXNzU2V0LnByb3Rv
        dHlwZSA9IHsKICBhZGQ6IGZ1bmN0aW9uKHN0cmluZykgewogICAgaWYgKHN0
        cmluZyBpbiB0aGlzLnNlZW4pIHsgcmV0dXJuOyB9CiAgICB0aGlzLnNlZW5b
        c3RyaW5nXSA9IHRydWU7CgogICAgdGhpcy5saXN0LnB1c2goc3RyaW5nKTsK
        ICB9LAoKICB0b0RPTTogZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gdGhpcy5s
        aXN0LmpvaW4oIiAiKTsKICB9Cn07Cgp2YXIgQkFEX1RBR19OQU1FX1RFU1Rf
        UkVHRVhQID0gL1teYS16QS1aMC05XC1dLzsKdmFyIEJBRF9UQUdfTkFNRV9S
        RVBMQUNFX1JFR0VYUCA9IC9bXmEtekEtWjAtOVwtXS9nOwoKZnVuY3Rpb24g
        c3RyaXBUYWdOYW1lKHRhZ05hbWUpIHsKICBpZiAoIXRhZ05hbWUpIHsKICAg
        IHJldHVybiB0YWdOYW1lOwogIH0KCiAgaWYgKCFCQURfVEFHX05BTUVfVEVT
        VF9SRUdFWFAudGVzdCh0YWdOYW1lKSkgewogICAgcmV0dXJuIHRhZ05hbWU7
        CiAgfQoKICByZXR1cm4gdGFnTmFtZS5yZXBsYWNlKEJBRF9UQUdfTkFNRV9S
        RVBMQUNFX1JFR0VYUCwgJycpOwp9Cgp2YXIgQkFEX0NIQVJTX1JFR0VYUCA9
        IC8mKD8hXHcrOyl8Wzw+IidgXS9nOwp2YXIgUE9TU0lCTEVfQ0hBUlNfUkVH
        RVhQID0gL1smPD4iJ2BdLzsKCmZ1bmN0aW9uIGVzY2FwZUF0dHJpYnV0ZSh2
        YWx1ZSkgewogIC8vIFN0b2xlbiBzaGFtZWxlc3NseSBmcm9tIEhhbmRsZWJh
        cnMKCiAgdmFyIGVzY2FwZSA9IHsKICAgICI8IjogIiZsdDsiLAogICAgIj4i
        OiAiJmd0OyIsCiAgICAnIic6ICImcXVvdDsiLAogICAgIiciOiAiJiN4Mjc7
        IiwKICAgICJgIjogIiYjeDYwOyIKICB9OwoKICB2YXIgZXNjYXBlQ2hhciA9
        IGZ1bmN0aW9uKGNocikgewogICAgcmV0dXJuIGVzY2FwZVtjaHJdIHx8ICIm
        YW1wOyI7CiAgfTsKCiAgdmFyIHN0cmluZyA9IHZhbHVlLnRvU3RyaW5nKCk7
        CgogIGlmKCFQT1NTSUJMRV9DSEFSU19SRUdFWFAudGVzdChzdHJpbmcpKSB7
        IHJldHVybiBzdHJpbmc7IH0KICByZXR1cm4gc3RyaW5nLnJlcGxhY2UoQkFE
        X0NIQVJTX1JFR0VYUCwgZXNjYXBlQ2hhcik7Cn0KCi8vIElFIDYvNyBoYXZl
        IGJ1Z3MgYXJvdW5kIHNldHRpbmcgbmFtZXMgb24gaW5wdXRzIGR1cmluZyBj
        cmVhdGlvbi4KLy8gRnJvbSBodHRwOi8vbXNkbi5taWNyb3NvZnQuY29tL2Vu
        LXVzL2xpYnJhcnkvaWUvbXM1MzYzODkodj12cy44NSkuYXNweDoKLy8gIlRv
        IGluY2x1ZGUgdGhlIE5BTUUgYXR0cmlidXRlIGF0IHJ1biB0aW1lIG9uIG9i
        amVjdHMgY3JlYXRlZCB3aXRoIHRoZSBjcmVhdGVFbGVtZW50IG1ldGhvZCwg
        dXNlIHRoZSBlVGFnLiIKdmFyIGNhblNldE5hbWVPbklucHV0cyA9IChmdW5j
        dGlvbigpIHsKICB2YXIgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgn
        ZGl2JyksCiAgICAgIGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5w
        dXQnKTsKCiAgZWwuc2V0QXR0cmlidXRlKCduYW1lJywgJ2ZvbycpOwogIGRp
        di5hcHBlbmRDaGlsZChlbCk7CgogIHJldHVybiAhIWRpdi5pbm5lckhUTUwu
        bWF0Y2goJ2ZvbycpOwp9KSgpOwoKLyoqCiAgYEVtYmVyLlJlbmRlckJ1ZmZl
        cmAgZ2F0aGVycyBpbmZvcm1hdGlvbiByZWdhcmRpbmcgdGhlIGEgdmlldyBh
        bmQgZ2VuZXJhdGVzIHRoZQogIGZpbmFsIHJlcHJlc2VudGF0aW9uLiBgRW1i
        ZXIuUmVuZGVyQnVmZmVyYCB3aWxsIGdlbmVyYXRlIEhUTUwgd2hpY2ggY2Fu
        IGJlIHB1c2hlZAogIHRvIHRoZSBET00uCgogICBgYGBqYXZhc2NyaXB0CiAg
        IHZhciBidWZmZXIgPSBFbWJlci5SZW5kZXJCdWZmZXIoJ2RpdicpOwogIGBg
        YAoKICBAY2xhc3MgUmVuZGVyQnVmZmVyCiAgQG5hbWVzcGFjZSBFbWJlcgog
        IEBjb25zdHJ1Y3RvcgogIEBwYXJhbSB7U3RyaW5nfSB0YWdOYW1lIHRhZyBu
        YW1lIChzdWNoIGFzICdkaXYnIG9yICdwJykgdXNlZCBmb3IgdGhlIGJ1ZmZl
        cgoqLwpFbWJlci5SZW5kZXJCdWZmZXIgPSBmdW5jdGlvbih0YWdOYW1lKSB7
        CiAgcmV0dXJuIG5ldyBFbWJlci5fUmVuZGVyQnVmZmVyKHRhZ05hbWUpOwp9
        OwoKRW1iZXIuX1JlbmRlckJ1ZmZlciA9IGZ1bmN0aW9uKHRhZ05hbWUpIHsK
        ICB0aGlzLnRhZ05hbWVzID0gW3RhZ05hbWUgfHwgbnVsbF07CiAgdGhpcy5i
        dWZmZXIgPSAiIjsKfTsKCkVtYmVyLl9SZW5kZXJCdWZmZXIucHJvdG90eXBl
        ID0gewoKICAvLyBUaGUgcm9vdCB2aWV3J3MgZWxlbWVudAogIF9lbGVtZW50
        OiBudWxsLAoKICBfaGFzRWxlbWVudDogdHJ1ZSwKCiAgLyoqCiAgICBBbiBp
        bnRlcm5hbCBzZXQgdXNlZCB0byBkZS1kdXBlIGNsYXNzIG5hbWVzIHdoZW4g
        YGFkZENsYXNzKClgIGlzCiAgICB1c2VkLiBBZnRlciBlYWNoIGNhbGwgdG8g
        YGFkZENsYXNzKClgLCB0aGUgYGNsYXNzZXNgIHByb3BlcnR5CiAgICB3aWxs
        IGJlIHVwZGF0ZWQuCgogICAgQHByaXZhdGUKICAgIEBwcm9wZXJ0eSBlbGVt
        ZW50Q2xhc3NlcwogICAgQHR5cGUgQXJyYXkKICAgIEBkZWZhdWx0IFtdCiAg
        Ki8KICBlbGVtZW50Q2xhc3NlczogbnVsbCwKCiAgLyoqCiAgICBBcnJheSBv
        ZiBjbGFzcyBuYW1lcyB3aGljaCB3aWxsIGJlIGFwcGxpZWQgaW4gdGhlIGNs
        YXNzIGF0dHJpYnV0ZS4KCiAgICBZb3UgY2FuIHVzZSBgc2V0Q2xhc3Nlcygp
        YCB0byBzZXQgdGhpcyBwcm9wZXJ0eSBkaXJlY3RseS4gSWYgeW91CiAgICB1
        c2UgYGFkZENsYXNzKClgLCBpdCB3aWxsIGJlIG1haW50YWluZWQgZm9yIHlv
        dS4KCiAgICBAcHJvcGVydHkgY2xhc3NlcwogICAgQHR5cGUgQXJyYXkKICAg
        IEBkZWZhdWx0IFtdCiAgKi8KICBjbGFzc2VzOiBudWxsLAoKICAvKioKICAg
        IFRoZSBpZCBpbiBvZiB0aGUgZWxlbWVudCwgdG8gYmUgYXBwbGllZCBpbiB0
        aGUgaWQgYXR0cmlidXRlLgoKICAgIFlvdSBzaG91bGQgbm90IHNldCB0aGlz
        IHByb3BlcnR5IHlvdXJzZWxmLCByYXRoZXIsIHlvdSBzaG91bGQgdXNlCiAg
        ICB0aGUgYGlkKClgIG1ldGhvZCBvZiBgRW1iZXIuUmVuZGVyQnVmZmVyYC4K
        CiAgICBAcHJvcGVydHkgZWxlbWVudElkCiAgICBAdHlwZSBTdHJpbmcKICAg
        IEBkZWZhdWx0IG51bGwKICAqLwogIGVsZW1lbnRJZDogbnVsbCwKCiAgLyoq
        CiAgICBBIGhhc2gga2V5ZWQgb24gdGhlIG5hbWUgb2YgdGhlIGF0dHJpYnV0
        ZSBhbmQgd2hvc2UgdmFsdWUgd2lsbCBiZQogICAgYXBwbGllZCB0byB0aGF0
        IGF0dHJpYnV0ZS4gRm9yIGV4YW1wbGUsIGlmIHlvdSB3YW50ZWQgdG8gYXBw
        bHkgYQogICAgYGRhdGEtdmlldz0iRm9vLmJhciJgIHByb3BlcnR5IHRvIGFu
        IGVsZW1lbnQsIHlvdSB3b3VsZCBzZXQgdGhlCiAgICBlbGVtZW50QXR0cmli
        dXRlcyBoYXNoIHRvIGB7J2RhdGEtdmlldyc6J0Zvby5iYXInfWAuCgogICAg
        WW91IHNob3VsZCBub3QgbWFpbnRhaW4gdGhpcyBoYXNoIHlvdXJzZWxmLCBy
        YXRoZXIsIHlvdSBzaG91bGQgdXNlCiAgICB0aGUgYGF0dHIoKWAgbWV0aG9k
        IG9mIGBFbWJlci5SZW5kZXJCdWZmZXJgLgoKICAgIEBwcm9wZXJ0eSBlbGVt
        ZW50QXR0cmlidXRlcwogICAgQHR5cGUgSGFzaAogICAgQGRlZmF1bHQge30K
        ICAqLwogIGVsZW1lbnRBdHRyaWJ1dGVzOiBudWxsLAoKICAvKioKICAgIEEg
        aGFzaCBrZXllZCBvbiB0aGUgbmFtZSBvZiB0aGUgcHJvcGVydGllcyBhbmQg
        d2hvc2UgdmFsdWUgd2lsbCBiZQogICAgYXBwbGllZCB0byB0aGF0IHByb3Bl
        cnR5LiBGb3IgZXhhbXBsZSwgaWYgeW91IHdhbnRlZCB0byBhcHBseSBhCiAg
        ICBgY2hlY2tlZD10cnVlYCBwcm9wZXJ0eSB0byBhbiBlbGVtZW50LCB5b3Ug
        d291bGQgc2V0IHRoZQogICAgZWxlbWVudFByb3BlcnRpZXMgaGFzaCB0byBg
        eydjaGVja2VkJzp0cnVlfWAuCgogICAgWW91IHNob3VsZCBub3QgbWFpbnRh
        aW4gdGhpcyBoYXNoIHlvdXJzZWxmLCByYXRoZXIsIHlvdSBzaG91bGQgdXNl
        CiAgICB0aGUgYHByb3AoKWAgbWV0aG9kIG9mIGBFbWJlci5SZW5kZXJCdWZm
        ZXJgLgoKICAgIEBwcm9wZXJ0eSBlbGVtZW50UHJvcGVydGllcwogICAgQHR5
        cGUgSGFzaAogICAgQGRlZmF1bHQge30KICAqLwogIGVsZW1lbnRQcm9wZXJ0
        aWVzOiBudWxsLAoKICAvKioKICAgIFRoZSB0YWduYW1lIG9mIHRoZSBlbGVt
        ZW50IGFuIGluc3RhbmNlIG9mIGBFbWJlci5SZW5kZXJCdWZmZXJgIHJlcHJl
        c2VudHMuCgogICAgVXN1YWxseSwgdGhpcyBnZXRzIHNldCBhcyB0aGUgZmly
        c3QgcGFyYW1ldGVyIHRvIGBFbWJlci5SZW5kZXJCdWZmZXJgLiBGb3IKICAg
        IGV4YW1wbGUsIGlmIHlvdSB3YW50ZWQgdG8gY3JlYXRlIGEgYHBgIHRhZywg
        dGhlbiB5b3Ugd291bGQgY2FsbAoKICAgIGBgYGphdmFzY3JpcHQKICAgIEVt
        YmVyLlJlbmRlckJ1ZmZlcigncCcpCiAgICBgYGAKCiAgICBAcHJvcGVydHkg
        ZWxlbWVudFRhZwogICAgQHR5cGUgU3RyaW5nCiAgICBAZGVmYXVsdCBudWxs
        CiAgKi8KICBlbGVtZW50VGFnOiBudWxsLAoKICAvKioKICAgIEEgaGFzaCBr
        ZXllZCBvbiB0aGUgbmFtZSBvZiB0aGUgc3R5bGUgYXR0cmlidXRlIGFuZCB3
        aG9zZSB2YWx1ZSB3aWxsCiAgICBiZSBhcHBsaWVkIHRvIHRoYXQgYXR0cmli
        dXRlLiBGb3IgZXhhbXBsZSwgaWYgeW91IHdhbnRlZCB0byBhcHBseSBhCiAg
        ICBgYmFja2dyb3VuZC1jb2xvcjpibGFjaztgIHN0eWxlIHRvIGFuIGVsZW1l
        bnQsIHlvdSB3b3VsZCBzZXQgdGhlCiAgICBlbGVtZW50U3R5bGUgaGFzaCB0
        byBgeydiYWNrZ3JvdW5kLWNvbG9yJzonYmxhY2snfWAuCgogICAgWW91IHNo
        b3VsZCBub3QgbWFpbnRhaW4gdGhpcyBoYXNoIHlvdXJzZWxmLCByYXRoZXIs
        IHlvdSBzaG91bGQgdXNlCiAgICB0aGUgYHN0eWxlKClgIG1ldGhvZCBvZiBg
        RW1iZXIuUmVuZGVyQnVmZmVyYC4KCiAgICBAcHJvcGVydHkgZWxlbWVudFN0
        eWxlCiAgICBAdHlwZSBIYXNoCiAgICBAZGVmYXVsdCB7fQogICovCiAgZWxl
        bWVudFN0eWxlOiBudWxsLAoKICAvKioKICAgIE5lc3RlZCBgUmVuZGVyQnVm
        ZmVyc2Agd2lsbCBzZXQgdGhpcyB0byB0aGVpciBwYXJlbnQgYFJlbmRlckJ1
        ZmZlcmAKICAgIGluc3RhbmNlLgoKICAgIEBwcm9wZXJ0eSBwYXJlbnRCdWZm
        ZXIKICAgIEB0eXBlIEVtYmVyLl9SZW5kZXJCdWZmZXIKICAqLwogIHBhcmVu
        dEJ1ZmZlcjogbnVsbCwKCiAgLyoqCiAgICBBZGRzIGEgc3RyaW5nIG9mIEhU
        TUwgdG8gdGhlIGBSZW5kZXJCdWZmZXJgLgoKICAgIEBtZXRob2QgcHVzaAog
        ICAgQHBhcmFtIHtTdHJpbmd9IHN0cmluZyBIVE1MIHRvIHB1c2ggaW50byB0
        aGUgYnVmZmVyCiAgICBAY2hhaW5hYmxlCiAgKi8KICBwdXNoOiBmdW5jdGlv
        bihzdHJpbmcpIHsKICAgIHRoaXMuYnVmZmVyICs9IHN0cmluZzsKICAgIHJl
        dHVybiB0aGlzOwogIH0sCgogIC8qKgogICAgQWRkcyBhIGNsYXNzIHRvIHRo
        ZSBidWZmZXIsIHdoaWNoIHdpbGwgYmUgcmVuZGVyZWQgdG8gdGhlIGNsYXNz
        IGF0dHJpYnV0ZS4KCiAgICBAbWV0aG9kIGFkZENsYXNzCiAgICBAcGFyYW0g
        e1N0cmluZ30gY2xhc3NOYW1lIENsYXNzIG5hbWUgdG8gYWRkIHRvIHRoZSBi
        dWZmZXIKICAgIEBjaGFpbmFibGUKICAqLwogIGFkZENsYXNzOiBmdW5jdGlv
        bihjbGFzc05hbWUpIHsKICAgIC8vIGxhemlseSBjcmVhdGUgZWxlbWVudENs
        YXNzZXMKICAgIHRoaXMuZWxlbWVudENsYXNzZXMgPSAodGhpcy5lbGVtZW50
        Q2xhc3NlcyB8fCBuZXcgQ2xhc3NTZXQoKSk7CiAgICB0aGlzLmVsZW1lbnRD
        bGFzc2VzLmFkZChjbGFzc05hbWUpOwogICAgdGhpcy5jbGFzc2VzID0gdGhp
        cy5lbGVtZW50Q2xhc3Nlcy5saXN0OwoKICAgIHJldHVybiB0aGlzOwogIH0s
        CgogIHNldENsYXNzZXM6IGZ1bmN0aW9uKGNsYXNzTmFtZXMpIHsKICAgIHRo
        aXMuZWxlbWVudENsYXNzZXMgPSBudWxsOwogICAgdmFyIGxlbiA9IGNsYXNz
        TmFtZXMubGVuZ3RoLCBpOwogICAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSsr
        KSB7CiAgICAgIHRoaXMuYWRkQ2xhc3MoY2xhc3NOYW1lc1tpXSk7CiAgICB9
        CiAgfSwKCiAgLyoqCiAgICBTZXRzIHRoZSBlbGVtZW50SUQgdG8gYmUgdXNl
        ZCBmb3IgdGhlIGVsZW1lbnQuCgogICAgQG1ldGhvZCBpZAogICAgQHBhcmFt
        IHtTdHJpbmd9IGlkCiAgICBAY2hhaW5hYmxlCiAgKi8KICBpZDogZnVuY3Rp
        b24oaWQpIHsKICAgIHRoaXMuZWxlbWVudElkID0gaWQ7CiAgICByZXR1cm4g
        dGhpczsKICB9LAoKICAvLyBkdWNrIHR5cGUgYXR0cmlidXRlIGZ1bmN0aW9u
        YWxpdHkgbGlrZSBqUXVlcnkgc28gYSByZW5kZXIgYnVmZmVyCiAgLy8gY2Fu
        IGJlIHVzZWQgbGlrZSBhIGpRdWVyeSBvYmplY3QgaW4gYXR0cmlidXRlIGJp
        bmRpbmcgc2NlbmFyaW9zLgoKICAvKioKICAgIEFkZHMgYW4gYXR0cmlidXRl
        IHdoaWNoIHdpbGwgYmUgcmVuZGVyZWQgdG8gdGhlIGVsZW1lbnQuCgogICAg
        QG1ldGhvZCBhdHRyCiAgICBAcGFyYW0ge1N0cmluZ30gbmFtZSBUaGUgbmFt
        ZSBvZiB0aGUgYXR0cmlidXRlCiAgICBAcGFyYW0ge1N0cmluZ30gdmFsdWUg
        VGhlIHZhbHVlIHRvIGFkZCB0byB0aGUgYXR0cmlidXRlCiAgICBAY2hhaW5h
        YmxlCiAgICBAcmV0dXJuIHtFbWJlci5SZW5kZXJCdWZmZXJ8U3RyaW5nfSB0
        aGlzIG9yIHRoZSBjdXJyZW50IGF0dHJpYnV0ZSB2YWx1ZQogICovCiAgYXR0
        cjogZnVuY3Rpb24obmFtZSwgdmFsdWUpIHsKICAgIHZhciBhdHRyaWJ1dGVz
        ID0gdGhpcy5lbGVtZW50QXR0cmlidXRlcyA9ICh0aGlzLmVsZW1lbnRBdHRy
        aWJ1dGVzIHx8IHt9KTsKCiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0g
        MSkgewogICAgICByZXR1cm4gYXR0cmlidXRlc1tuYW1lXTsKICAgIH0gZWxz
        ZSB7CiAgICAgIGF0dHJpYnV0ZXNbbmFtZV0gPSB2YWx1ZTsKICAgIH0KCiAg
        ICByZXR1cm4gdGhpczsKICB9LAoKICAvKioKICAgIFJlbW92ZSBhbiBhdHRy
        aWJ1dGUgZnJvbSB0aGUgbGlzdCBvZiBhdHRyaWJ1dGVzIHRvIHJlbmRlci4K
        CiAgICBAbWV0aG9kIHJlbW92ZUF0dHIKICAgIEBwYXJhbSB7U3RyaW5nfSBu
        YW1lIFRoZSBuYW1lIG9mIHRoZSBhdHRyaWJ1dGUKICAgIEBjaGFpbmFibGUK
        ICAqLwogIHJlbW92ZUF0dHI6IGZ1bmN0aW9uKG5hbWUpIHsKICAgIHZhciBh
        dHRyaWJ1dGVzID0gdGhpcy5lbGVtZW50QXR0cmlidXRlczsKICAgIGlmIChh
        dHRyaWJ1dGVzKSB7IGRlbGV0ZSBhdHRyaWJ1dGVzW25hbWVdOyB9CgogICAg
        cmV0dXJuIHRoaXM7CiAgfSwKCiAgLyoqCiAgICBBZGRzIGEgcHJvcGVydHkg
        d2hpY2ggd2lsbCBiZSByZW5kZXJlZCB0byB0aGUgZWxlbWVudC4KCiAgICBA
        bWV0aG9kIHByb3AKICAgIEBwYXJhbSB7U3RyaW5nfSBuYW1lIFRoZSBuYW1l
        IG9mIHRoZSBwcm9wZXJ0eQogICAgQHBhcmFtIHtTdHJpbmd9IHZhbHVlIFRo
        ZSB2YWx1ZSB0byBhZGQgdG8gdGhlIHByb3BlcnR5CiAgICBAY2hhaW5hYmxl
        CiAgICBAcmV0dXJuIHtFbWJlci5SZW5kZXJCdWZmZXJ8U3RyaW5nfSB0aGlz
        IG9yIHRoZSBjdXJyZW50IHByb3BlcnR5IHZhbHVlCiAgKi8KICBwcm9wOiBm
        dW5jdGlvbihuYW1lLCB2YWx1ZSkgewogICAgdmFyIHByb3BlcnRpZXMgPSB0
        aGlzLmVsZW1lbnRQcm9wZXJ0aWVzID0gKHRoaXMuZWxlbWVudFByb3BlcnRp
        ZXMgfHwge30pOwoKICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAxKSB7
        CiAgICAgIHJldHVybiBwcm9wZXJ0aWVzW25hbWVdOwogICAgfSBlbHNlIHsK
        ICAgICAgcHJvcGVydGllc1tuYW1lXSA9IHZhbHVlOwogICAgfQoKICAgIHJl
        dHVybiB0aGlzOwogIH0sCgogIC8qKgogICAgUmVtb3ZlIGFuIHByb3BlcnR5
        IGZyb20gdGhlIGxpc3Qgb2YgcHJvcGVydGllcyB0byByZW5kZXIuCgogICAg
        QG1ldGhvZCByZW1vdmVQcm9wCiAgICBAcGFyYW0ge1N0cmluZ30gbmFtZSBU
        aGUgbmFtZSBvZiB0aGUgcHJvcGVydHkKICAgIEBjaGFpbmFibGUKICAqLwog
        IHJlbW92ZVByb3A6IGZ1bmN0aW9uKG5hbWUpIHsKICAgIHZhciBwcm9wZXJ0
        aWVzID0gdGhpcy5lbGVtZW50UHJvcGVydGllczsKICAgIGlmIChwcm9wZXJ0
        aWVzKSB7IGRlbGV0ZSBwcm9wZXJ0aWVzW25hbWVdOyB9CgogICAgcmV0dXJu
        IHRoaXM7CiAgfSwKCiAgLyoqCiAgICBBZGRzIGEgc3R5bGUgdG8gdGhlIHN0
        eWxlIGF0dHJpYnV0ZSB3aGljaCB3aWxsIGJlIHJlbmRlcmVkIHRvIHRoZSBl
        bGVtZW50LgoKICAgIEBtZXRob2Qgc3R5bGUKICAgIEBwYXJhbSB7U3RyaW5n
        fSBuYW1lIE5hbWUgb2YgdGhlIHN0eWxlCiAgICBAcGFyYW0ge1N0cmluZ30g
        dmFsdWUKICAgIEBjaGFpbmFibGUKICAqLwogIHN0eWxlOiBmdW5jdGlvbihu
        YW1lLCB2YWx1ZSkgewogICAgdGhpcy5lbGVtZW50U3R5bGUgPSAodGhpcy5l
        bGVtZW50U3R5bGUgfHwge30pOwoKICAgIHRoaXMuZWxlbWVudFN0eWxlW25h
        bWVdID0gdmFsdWU7CiAgICByZXR1cm4gdGhpczsKICB9LAoKICBiZWdpbjog
        ZnVuY3Rpb24odGFnTmFtZSkgewogICAgdGhpcy50YWdOYW1lcy5wdXNoKHRh
        Z05hbWUgfHwgbnVsbCk7CiAgICByZXR1cm4gdGhpczsKICB9LAoKICBwdXNo
        T3BlbmluZ1RhZzogZnVuY3Rpb24oKSB7CiAgICB2YXIgdGFnTmFtZSA9IHRo
        aXMuY3VycmVudFRhZ05hbWUoKTsKICAgIGlmICghdGFnTmFtZSkgeyByZXR1
        cm47IH0KCiAgICBpZiAodGhpcy5faGFzRWxlbWVudCAmJiAhdGhpcy5fZWxl
        bWVudCAmJiB0aGlzLmJ1ZmZlci5sZW5ndGggPT09IDApIHsKICAgICAgdGhp
        cy5fZWxlbWVudCA9IHRoaXMuZ2VuZXJhdGVFbGVtZW50KCk7CiAgICAgIHJl
        dHVybjsKICAgIH0KCiAgICB2YXIgYnVmZmVyID0gdGhpcy5idWZmZXIsCiAg
        ICAgICAgaWQgPSB0aGlzLmVsZW1lbnRJZCwKICAgICAgICBjbGFzc2VzID0g
        dGhpcy5jbGFzc2VzLAogICAgICAgIGF0dHJzID0gdGhpcy5lbGVtZW50QXR0
        cmlidXRlcywKICAgICAgICBwcm9wcyA9IHRoaXMuZWxlbWVudFByb3BlcnRp
        ZXMsCiAgICAgICAgc3R5bGUgPSB0aGlzLmVsZW1lbnRTdHlsZSwKICAgICAg
        ICBhdHRyLCBwcm9wOwoKICAgIGJ1ZmZlciArPSAnPCcgKyBzdHJpcFRhZ05h
        bWUodGFnTmFtZSk7CgogICAgaWYgKGlkKSB7CiAgICAgIGJ1ZmZlciArPSAn
        IGlkPSInICsgZXNjYXBlQXR0cmlidXRlKGlkKSArICciJzsKICAgICAgdGhp
        cy5lbGVtZW50SWQgPSBudWxsOwogICAgfQogICAgaWYgKGNsYXNzZXMpIHsK
        ICAgICAgYnVmZmVyICs9ICcgY2xhc3M9IicgKyBlc2NhcGVBdHRyaWJ1dGUo
        Y2xhc3Nlcy5qb2luKCcgJykpICsgJyInOwogICAgICB0aGlzLmNsYXNzZXMg
        PSBudWxsOwogICAgICB0aGlzLmVsZW1lbnRDbGFzc2VzID0gbnVsbDsKICAg
        IH0KCiAgICBpZiAoc3R5bGUpIHsKICAgICAgYnVmZmVyICs9ICcgc3R5bGU9
        Iic7CgogICAgICBmb3IgKHByb3AgaW4gc3R5bGUpIHsKICAgICAgICBpZiAo
        c3R5bGUuaGFzT3duUHJvcGVydHkocHJvcCkpIHsKICAgICAgICAgIGJ1ZmZl
        ciArPSBwcm9wICsgJzonICsgZXNjYXBlQXR0cmlidXRlKHN0eWxlW3Byb3Bd
        KSArICc7JzsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGJ1ZmZlciArPSAn
        Iic7CgogICAgICB0aGlzLmVsZW1lbnRTdHlsZSA9IG51bGw7CiAgICB9Cgog
        ICAgaWYgKGF0dHJzKSB7CiAgICAgIGZvciAoYXR0ciBpbiBhdHRycykgewog
        ICAgICAgIGlmIChhdHRycy5oYXNPd25Qcm9wZXJ0eShhdHRyKSkgewogICAg
        ICAgICAgYnVmZmVyICs9ICcgJyArIGF0dHIgKyAnPSInICsgZXNjYXBlQXR0
        cmlidXRlKGF0dHJzW2F0dHJdKSArICciJzsKICAgICAgICB9CiAgICAgIH0K
        CiAgICAgIHRoaXMuZWxlbWVudEF0dHJpYnV0ZXMgPSBudWxsOwogICAgfQoK
        ICAgIGlmIChwcm9wcykgewogICAgICBmb3IgKHByb3AgaW4gcHJvcHMpIHsK
        ICAgICAgICBpZiAocHJvcHMuaGFzT3duUHJvcGVydHkocHJvcCkpIHsKICAg
        ICAgICAgIHZhciB2YWx1ZSA9IHByb3BzW3Byb3BdOwogICAgICAgICAgaWYg
        KHZhbHVlIHx8IHR5cGVvZih2YWx1ZSkgPT09ICdudW1iZXInKSB7CiAgICAg
        ICAgICAgIGlmICh2YWx1ZSA9PT0gdHJ1ZSkgewogICAgICAgICAgICAgIGJ1
        ZmZlciArPSAnICcgKyBwcm9wICsgJz0iJyArIHByb3AgKyAnIic7CiAgICAg
        ICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgYnVmZmVyICs9ICcgJyAr
        IHByb3AgKyAnPSInICsgZXNjYXBlQXR0cmlidXRlKHByb3BzW3Byb3BdKSAr
        ICciJzsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAg
        ICAgfQoKICAgICAgdGhpcy5lbGVtZW50UHJvcGVydGllcyA9IG51bGw7CiAg
        ICB9CgogICAgYnVmZmVyICs9ICc+JzsKICAgIHRoaXMuYnVmZmVyID0gYnVm
        ZmVyOwogIH0sCgogIHB1c2hDbG9zaW5nVGFnOiBmdW5jdGlvbigpIHsKICAg
        IHZhciB0YWdOYW1lID0gdGhpcy50YWdOYW1lcy5wb3AoKTsKICAgIGlmICh0
        YWdOYW1lKSB7IHRoaXMuYnVmZmVyICs9ICc8LycgKyBzdHJpcFRhZ05hbWUo
        dGFnTmFtZSkgKyAnPic7IH0KICB9LAoKICBjdXJyZW50VGFnTmFtZTogZnVu
        Y3Rpb24oKSB7CiAgICByZXR1cm4gdGhpcy50YWdOYW1lc1t0aGlzLnRhZ05h
        bWVzLmxlbmd0aC0xXTsKICB9LAoKICBnZW5lcmF0ZUVsZW1lbnQ6IGZ1bmN0
        aW9uKCkgewogICAgdmFyIHRhZ05hbWUgPSB0aGlzLnRhZ05hbWVzLnBvcCgp
        LCAvLyBwb3Agc2luY2Ugd2UgZG9uJ3QgbmVlZCB0byBjbG9zZQogICAgICAg
        IGlkID0gdGhpcy5lbGVtZW50SWQsCiAgICAgICAgY2xhc3NlcyA9IHRoaXMu
        Y2xhc3NlcywKICAgICAgICBhdHRycyA9IHRoaXMuZWxlbWVudEF0dHJpYnV0
        ZXMsCiAgICAgICAgcHJvcHMgPSB0aGlzLmVsZW1lbnRQcm9wZXJ0aWVzLAog
        ICAgICAgIHN0eWxlID0gdGhpcy5lbGVtZW50U3R5bGUsCiAgICAgICAgc3R5
        bGVCdWZmZXIgPSAnJywgYXR0ciwgcHJvcCwgdGFnU3RyaW5nOwoKICAgIGlm
        IChhdHRycyAmJiBhdHRycy5uYW1lICYmICFjYW5TZXROYW1lT25JbnB1dHMp
        IHsKICAgICAgLy8gSUUgYWxsb3dzIHBhc3NpbmcgYSB0YWcgdG8gY3JlYXRl
        RWxlbWVudC4gU2VlIG5vdGUgb24gYGNhblNldE5hbWVPbklucHV0c2AgYWJv
        dmUgYXMgd2VsbC4KICAgICAgdGFnU3RyaW5nID0gJzwnK3N0cmlwVGFnTmFt
        ZSh0YWdOYW1lKSsnIG5hbWU9IicrZXNjYXBlQXR0cmlidXRlKGF0dHJzLm5h
        bWUpKyciPic7CiAgICB9IGVsc2UgewogICAgICB0YWdTdHJpbmcgPSB0YWdO
        YW1lOwogICAgfQoKICAgIHZhciBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRl
        RWxlbWVudCh0YWdTdHJpbmcpLAogICAgICAgICRlbGVtZW50ID0gRW1iZXIu
        JChlbGVtZW50KTsKCiAgICBpZiAoaWQpIHsKICAgICAgJGVsZW1lbnQuYXR0
        cignaWQnLCBpZCk7CiAgICAgIHRoaXMuZWxlbWVudElkID0gbnVsbDsKICAg
        IH0KICAgIGlmIChjbGFzc2VzKSB7CiAgICAgICRlbGVtZW50LmF0dHIoJ2Ns
        YXNzJywgY2xhc3Nlcy5qb2luKCcgJykpOwogICAgICB0aGlzLmNsYXNzZXMg
        PSBudWxsOwogICAgICB0aGlzLmVsZW1lbnRDbGFzc2VzID0gbnVsbDsKICAg
        IH0KCiAgICBpZiAoc3R5bGUpIHsKICAgICAgZm9yIChwcm9wIGluIHN0eWxl
        KSB7CiAgICAgICAgaWYgKHN0eWxlLmhhc093blByb3BlcnR5KHByb3ApKSB7
        CiAgICAgICAgICBzdHlsZUJ1ZmZlciArPSAocHJvcCArICc6JyArIHN0eWxl
        W3Byb3BdICsgJzsnKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgICRlbGVt
        ZW50LmF0dHIoJ3N0eWxlJywgc3R5bGVCdWZmZXIpOwoKICAgICAgdGhpcy5l
        bGVtZW50U3R5bGUgPSBudWxsOwogICAgfQoKICAgIGlmIChhdHRycykgewog
        ICAgICBmb3IgKGF0dHIgaW4gYXR0cnMpIHsKICAgICAgICBpZiAoYXR0cnMu
        aGFzT3duUHJvcGVydHkoYXR0cikpIHsKICAgICAgICAgICRlbGVtZW50LmF0
        dHIoYXR0ciwgYXR0cnNbYXR0cl0pOwogICAgICAgIH0KICAgICAgfQoKICAg
        ICAgdGhpcy5lbGVtZW50QXR0cmlidXRlcyA9IG51bGw7CiAgICB9CgogICAg
        aWYgKHByb3BzKSB7CiAgICAgIGZvciAocHJvcCBpbiBwcm9wcykgewogICAg
        ICAgIGlmIChwcm9wcy5oYXNPd25Qcm9wZXJ0eShwcm9wKSkgewogICAgICAg
        ICAgJGVsZW1lbnQucHJvcChwcm9wLCBwcm9wc1twcm9wXSk7CiAgICAgICAg
        fQogICAgICB9CgogICAgICB0aGlzLmVsZW1lbnRQcm9wZXJ0aWVzID0gbnVs
        bDsKICAgIH0KCiAgICByZXR1cm4gZWxlbWVudDsKICB9LAoKICAvKioKICAg
        IEBtZXRob2QgZWxlbWVudAogICAgQHJldHVybiB7RE9NRWxlbWVudH0gVGhl
        IGVsZW1lbnQgY29ycmVzcG9uZGluZyB0byB0aGUgZ2VuZXJhdGVkIEhUTUwK
        ICAgICAgb2YgdGhpcyBidWZmZXIKICAqLwogIGVsZW1lbnQ6IGZ1bmN0aW9u
        KCkgewogICAgdmFyIGh0bWwgPSB0aGlzLmlubmVyU3RyaW5nKCk7CgogICAg
        aWYgKGh0bWwpIHsKICAgICAgdGhpcy5fZWxlbWVudCA9IEVtYmVyLlZpZXdV
        dGlscy5zZXRJbm5lckhUTUwodGhpcy5fZWxlbWVudCwgaHRtbCk7CiAgICB9
        CgogICAgcmV0dXJuIHRoaXMuX2VsZW1lbnQ7CiAgfSwKCiAgLyoqCiAgICBH
        ZW5lcmF0ZXMgdGhlIEhUTUwgY29udGVudCBmb3IgdGhpcyBidWZmZXIuCgog
        ICAgQG1ldGhvZCBzdHJpbmcKICAgIEByZXR1cm4ge1N0cmluZ30gVGhlIGdl
        bmVyYXRlZCBIVE1MCiAgKi8KICBzdHJpbmc6IGZ1bmN0aW9uKCkgewogICAg
        aWYgKHRoaXMuX2hhc0VsZW1lbnQgJiYgdGhpcy5fZWxlbWVudCkgewogICAg
        ICAvLyBGaXJlZm94IHZlcnNpb25zIDwgMTEgZG8gbm90IGhhdmUgc3VwcG9y
        dCBmb3IgZWxlbWVudC5vdXRlckhUTUwuCiAgICAgIHZhciB0aGlzRWxlbWVu
        dCA9IHRoaXMuZWxlbWVudCgpLCBvdXRlckhUTUwgPSB0aGlzRWxlbWVudC5v
        dXRlckhUTUw7CiAgICAgIGlmICh0eXBlb2Ygb3V0ZXJIVE1MID09PSAndW5k
        ZWZpbmVkJykgewogICAgICAgIHJldHVybiBFbWJlci4kKCc8ZGl2Lz4nKS5h
        cHBlbmQodGhpc0VsZW1lbnQpLmh0bWwoKTsKICAgICAgfQogICAgICByZXR1
        cm4gb3V0ZXJIVE1MOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIHRoaXMu
        aW5uZXJTdHJpbmcoKTsKICAgIH0KICB9LAoKICBpbm5lclN0cmluZzogZnVu
        Y3Rpb24oKSB7CiAgICByZXR1cm4gdGhpcy5idWZmZXI7CiAgfQp9OwoKfSko
        KTsKCgoKKGZ1bmN0aW9uKCkgewovKioKQG1vZHVsZSBlbWJlcgpAc3VibW9k
        dWxlIGVtYmVyLXZpZXdzCiovCgp2YXIgZ2V0ID0gRW1iZXIuZ2V0LCBzZXQg
        PSBFbWJlci5zZXQsIGZtdCA9IEVtYmVyLlN0cmluZy5mbXQ7CgovKioKICBg
        RW1iZXIuRXZlbnREaXNwYXRjaGVyYCBoYW5kbGVzIGRlbGVnYXRpbmcgYnJv
        d3NlciBldmVudHMgdG8gdGhlaXIKICBjb3JyZXNwb25kaW5nIGBFbWJlci5W
        aWV3cy5gIEZvciBleGFtcGxlLCB3aGVuIHlvdSBjbGljayBvbiBhIHZpZXcs
        CiAgYEVtYmVyLkV2ZW50RGlzcGF0Y2hlcmAgZW5zdXJlcyB0aGF0IHRoYXQg
        dmlldydzIGBtb3VzZURvd25gIG1ldGhvZCBnZXRzCiAgY2FsbGVkLgoKICBA
        Y2xhc3MgRXZlbnREaXNwYXRjaGVyCiAgQG5hbWVzcGFjZSBFbWJlcgogIEBw
        cml2YXRlCiAgQGV4dGVuZHMgRW1iZXIuT2JqZWN0CiovCkVtYmVyLkV2ZW50
        RGlzcGF0Y2hlciA9IEVtYmVyLk9iamVjdC5leHRlbmQoewoKICAvKioKICAg
        IFRoZSBzZXQgb2YgZXZlbnRzIG5hbWVzIChhbmQgYXNzb2NpYXRlZCBoYW5k
        bGVyIGZ1bmN0aW9uIG5hbWVzKSB0byBiZSBzZXR1cAogICAgYW5kIGRpc3Bh
        dGNoZWQgYnkgdGhlIGBFdmVudERpc3BhdGNoZXJgLiBDdXN0b20gZXZlbnRz
        IGNhbiBhZGRlZCB0byB0aGlzIGxpc3QgYXQgc2V0dXAKICAgIHRpbWUsIGdl
        bmVyYWxseSB2aWEgdGhlIGBFbWJlci5BcHBsaWNhdGlvbi5jdXN0b21FdmVu
        dHNgIGhhc2guIE9ubHkgb3ZlcnJpZGUgdGhpcwogICAgZGVmYXVsdCBzZXQg
        dG8gcHJldmVudCB0aGUgRXZlbnREaXNwYXRjaGVyIGZyb20gbGlzdGVuaW5n
        IG9uIHNvbWUgZXZlbnRzIGFsbCB0b2dldGhlci4KCiAgICBUaGlzIHNldCB3
        aWxsIGJlIG1vZGlmaWVkIGJ5IGBzZXR1cGAgdG8gYWxzbyBpbmNsdWRlIGFu
        eSBldmVudHMgYWRkZWQgYXQgdGhhdCB0aW1lLgoKICAgIEBwcm9wZXJ0eSBl
        dmVudHMKICAgIEB0eXBlIE9iamVjdAogICovCiAgZXZlbnRzOiB7CiAgICB0
        b3VjaHN0YXJ0ICA6ICd0b3VjaFN0YXJ0JywKICAgIHRvdWNobW92ZSAgIDog
        J3RvdWNoTW92ZScsCiAgICB0b3VjaGVuZCAgICA6ICd0b3VjaEVuZCcsCiAg
        ICB0b3VjaGNhbmNlbCA6ICd0b3VjaENhbmNlbCcsCiAgICBrZXlkb3duICAg
        ICA6ICdrZXlEb3duJywKICAgIGtleXVwICAgICAgIDogJ2tleVVwJywKICAg
        IGtleXByZXNzICAgIDogJ2tleVByZXNzJywKICAgIG1vdXNlZG93biAgIDog
        J21vdXNlRG93bicsCiAgICBtb3VzZXVwICAgICA6ICdtb3VzZVVwJywKICAg
        IGNvbnRleHRtZW51IDogJ2NvbnRleHRNZW51JywKICAgIGNsaWNrICAgICAg
        IDogJ2NsaWNrJywKICAgIGRibGNsaWNrICAgIDogJ2RvdWJsZUNsaWNrJywK
        ICAgIG1vdXNlbW92ZSAgIDogJ21vdXNlTW92ZScsCiAgICBmb2N1c2luICAg
        ICA6ICdmb2N1c0luJywKICAgIGZvY3Vzb3V0ICAgIDogJ2ZvY3VzT3V0JywK
        ICAgIG1vdXNlZW50ZXIgIDogJ21vdXNlRW50ZXInLAogICAgbW91c2VsZWF2
        ZSAgOiAnbW91c2VMZWF2ZScsCiAgICBzdWJtaXQgICAgICA6ICdzdWJtaXQn
        LAogICAgaW5wdXQgICAgICAgOiAnaW5wdXQnLAogICAgY2hhbmdlICAgICAg
        OiAnY2hhbmdlJywKICAgIGRyYWdzdGFydCAgIDogJ2RyYWdTdGFydCcsCiAg
        ICBkcmFnICAgICAgICA6ICdkcmFnJywKICAgIGRyYWdlbnRlciAgIDogJ2Ry
        YWdFbnRlcicsCiAgICBkcmFnbGVhdmUgICA6ICdkcmFnTGVhdmUnLAogICAg
        ZHJhZ292ZXIgICAgOiAnZHJhZ092ZXInLAogICAgZHJvcCAgICAgICAgOiAn
        ZHJvcCcsCiAgICBkcmFnZW5kICAgICA6ICdkcmFnRW5kJwogIH0sCgogIC8q
        KgogICAgVGhlIHJvb3QgRE9NIGVsZW1lbnQgdG8gd2hpY2ggZXZlbnQgbGlz
        dGVuZXJzIHNob3VsZCBiZSBhdHRhY2hlZC4gRXZlbnQKICAgIGxpc3RlbmVy
        cyB3aWxsIGJlIGF0dGFjaGVkIHRvIHRoZSBkb2N1bWVudCB1bmxlc3MgdGhp
        cyBpcyBvdmVycmlkZGVuLgoKICAgIENhbiBiZSBzcGVjaWZpZWQgYXMgYSBE
        T01FbGVtZW50IG9yIGEgc2VsZWN0b3Igc3RyaW5nLgoKICAgIFRoZSBkZWZh
        dWx0IGJvZHkgaXMgYSBzdHJpbmcgc2luY2UgdGhpcyBtYXkgYmUgZXZhbHVh
        dGVkIGJlZm9yZSBkb2N1bWVudC5ib2R5CiAgICBleGlzdHMgaW4gdGhlIERP
        TS4KCiAgICBAcHJpdmF0ZQogICAgQHByb3BlcnR5IHJvb3RFbGVtZW50CiAg
        ICBAdHlwZSBET01FbGVtZW50CiAgICBAZGVmYXVsdCAnYm9keScKICAqLwog
        IHJvb3RFbGVtZW50OiAnYm9keScsCgogIC8qKgogICAgU2V0cyB1cCBldmVu
        dCBsaXN0ZW5lcnMgZm9yIHN0YW5kYXJkIGJyb3dzZXIgZXZlbnRzLgoKICAg
        IFRoaXMgd2lsbCBiZSBjYWxsZWQgYWZ0ZXIgdGhlIGJyb3dzZXIgc2VuZHMg
        YSBgRE9NQ29udGVudFJlYWR5YCBldmVudC4gQnkKICAgIGRlZmF1bHQsIGl0
        IHdpbGwgc2V0IHVwIGFsbCBvZiB0aGUgbGlzdGVuZXJzIG9uIHRoZSBkb2N1
        bWVudCBib2R5LiBJZiB5b3UKICAgIHdvdWxkIGxpa2UgdG8gcmVnaXN0ZXIg
        dGhlIGxpc3RlbmVycyBvbiBhIGRpZmZlcmVudCBlbGVtZW50LCBzZXQgdGhl
        IGV2ZW50CiAgICBkaXNwYXRjaGVyJ3MgYHJvb3RgIHByb3BlcnR5LgoKICAg
        IEBwcml2YXRlCiAgICBAbWV0aG9kIHNldHVwCiAgICBAcGFyYW0gYWRkZWRF
        dmVudHMge0hhc2h9CiAgKi8KICBzZXR1cDogZnVuY3Rpb24oYWRkZWRFdmVu
        dHMsIHJvb3RFbGVtZW50KSB7CiAgICB2YXIgZXZlbnQsIGV2ZW50cyA9IGdl
        dCh0aGlzLCAnZXZlbnRzJyk7CgogICAgRW1iZXIuJC5leHRlbmQoZXZlbnRz
        LCBhZGRlZEV2ZW50cyB8fCB7fSk7CgoKICAgIGlmICghRW1iZXIuaXNOb25l
        KHJvb3RFbGVtZW50KSkgewogICAgICBzZXQodGhpcywgJ3Jvb3RFbGVtZW50
        Jywgcm9vdEVsZW1lbnQpOwogICAgfQoKICAgIHJvb3RFbGVtZW50ID0gRW1i
        ZXIuJChnZXQodGhpcywgJ3Jvb3RFbGVtZW50JykpOwoKICAgIEVtYmVyLmFz
        c2VydChmbXQoJ1lvdSBjYW5ub3QgdXNlIHRoZSBzYW1lIHJvb3QgZWxlbWVu
        dCAoJUApIG11bHRpcGxlIHRpbWVzIGluIGFuIEVtYmVyLkFwcGxpY2F0aW9u
        JywgW3Jvb3RFbGVtZW50LnNlbGVjdG9yIHx8IHJvb3RFbGVtZW50WzBdLnRh
        Z05hbWVdKSwgIXJvb3RFbGVtZW50LmlzKCcuZW1iZXItYXBwbGljYXRpb24n
        KSk7CiAgICBFbWJlci5hc3NlcnQoJ1lvdSBjYW5ub3QgbWFrZSBhIG5ldyBF
        bWJlci5BcHBsaWNhdGlvbiB1c2luZyBhIHJvb3QgZWxlbWVudCB0aGF0IGlz
        IGEgZGVzY2VuZGVudCBvZiBhbiBleGlzdGluZyBFbWJlci5BcHBsaWNhdGlv
        bicsICFyb290RWxlbWVudC5jbG9zZXN0KCcuZW1iZXItYXBwbGljYXRpb24n
        KS5sZW5ndGgpOwogICAgRW1iZXIuYXNzZXJ0KCdZb3UgY2Fubm90IG1ha2Ug
        YSBuZXcgRW1iZXIuQXBwbGljYXRpb24gdXNpbmcgYSByb290IGVsZW1lbnQg
        dGhhdCBpcyBhbiBhbmNlc3RvciBvZiBhbiBleGlzdGluZyBFbWJlci5BcHBs
        aWNhdGlvbicsICFyb290RWxlbWVudC5maW5kKCcuZW1iZXItYXBwbGljYXRp
        b24nKS5sZW5ndGgpOwoKICAgIHJvb3RFbGVtZW50LmFkZENsYXNzKCdlbWJl
        ci1hcHBsaWNhdGlvbicpOwoKICAgIEVtYmVyLmFzc2VydCgnVW5hYmxlIHRv
        IGFkZCAiZW1iZXItYXBwbGljYXRpb24iIGNsYXNzIHRvIHJvb3RFbGVtZW50
        LiBNYWtlIHN1cmUgeW91IHNldCByb290RWxlbWVudCB0byB0aGUgYm9keSBv
        ciBhbiBlbGVtZW50IGluIHRoZSBib2R5LicsIHJvb3RFbGVtZW50LmlzKCcu
        ZW1iZXItYXBwbGljYXRpb24nKSk7CgogICAgZm9yIChldmVudCBpbiBldmVu
        dHMpIHsKICAgICAgaWYgKGV2ZW50cy5oYXNPd25Qcm9wZXJ0eShldmVudCkp
        IHsKICAgICAgICB0aGlzLnNldHVwSGFuZGxlcihyb290RWxlbWVudCwgZXZl
        bnQsIGV2ZW50c1tldmVudF0pOwogICAgICB9CiAgICB9CiAgfSwKCiAgLyoq
        CiAgICBSZWdpc3RlcnMgYW4gZXZlbnQgbGlzdGVuZXIgb24gdGhlIGRvY3Vt
        ZW50LiBJZiB0aGUgZ2l2ZW4gZXZlbnQgaXMKICAgIHRyaWdnZXJlZCwgdGhl
        IHByb3ZpZGVkIGV2ZW50IGhhbmRsZXIgd2lsbCBiZSB0cmlnZ2VyZWQgb24g
        dGhlIHRhcmdldCB2aWV3LgoKICAgIElmIHRoZSB0YXJnZXQgdmlldyBkb2Vz
        IG5vdCBpbXBsZW1lbnQgdGhlIGV2ZW50IGhhbmRsZXIsIG9yIGlmIHRoZSBo
        YW5kbGVyCiAgICByZXR1cm5zIGBmYWxzZWAsIHRoZSBwYXJlbnQgdmlldyB3
        aWxsIGJlIGNhbGxlZC4gVGhlIGV2ZW50IHdpbGwgY29udGludWUgdG8KICAg
        IGJ1YmJsZSB0byBlYWNoIHN1Y2Nlc3NpdmUgcGFyZW50IHZpZXcgdW50aWwg
        aXQgcmVhY2hlcyB0aGUgdG9wLgoKICAgIEZvciBleGFtcGxlLCB0byBoYXZl
        IHRoZSBgbW91c2VEb3duYCBtZXRob2QgY2FsbGVkIG9uIHRoZSB0YXJnZXQg
        dmlldyB3aGVuCiAgICBhIGBtb3VzZWRvd25gIGV2ZW50IGlzIHJlY2VpdmVk
        IGZyb20gdGhlIGJyb3dzZXIsIGRvIHRoZSBmb2xsb3dpbmc6CgogICAgYGBg
        amF2YXNjcmlwdAogICAgc2V0dXBIYW5kbGVyKCdtb3VzZWRvd24nLCAnbW91
        c2VEb3duJyk7CiAgICBgYGAKCiAgICBAcHJpdmF0ZQogICAgQG1ldGhvZCBz
        ZXR1cEhhbmRsZXIKICAgIEBwYXJhbSB7RWxlbWVudH0gcm9vdEVsZW1lbnQK
        ICAgIEBwYXJhbSB7U3RyaW5nfSBldmVudCB0aGUgYnJvd3Nlci1vcmlnaW5h
        dGVkIGV2ZW50IHRvIGxpc3RlbiB0bwogICAgQHBhcmFtIHtTdHJpbmd9IGV2
        ZW50TmFtZSB0aGUgbmFtZSBvZiB0aGUgbWV0aG9kIHRvIGNhbGwgb24gdGhl
        IHZpZXcKICAqLwogIHNldHVwSGFuZGxlcjogZnVuY3Rpb24ocm9vdEVsZW1l
        bnQsIGV2ZW50LCBldmVudE5hbWUpIHsKICAgIHZhciBzZWxmID0gdGhpczsK
        CiAgICByb290RWxlbWVudC5vbihldmVudCArICcuZW1iZXInLCAnLmVtYmVy
        LXZpZXcnLCBmdW5jdGlvbihldnQsIHRyaWdnZXJpbmdNYW5hZ2VyKSB7CiAg
        ICAgIHZhciB2aWV3ID0gRW1iZXIuVmlldy52aWV3c1t0aGlzLmlkXSwKICAg
        ICAgICAgIHJlc3VsdCA9IHRydWUsIG1hbmFnZXIgPSBudWxsOwoKICAgICAg
        bWFuYWdlciA9IHNlbGYuX2ZpbmROZWFyZXN0RXZlbnRNYW5hZ2VyKHZpZXcs
        IGV2ZW50TmFtZSk7CgogICAgICBpZiAobWFuYWdlciAmJiBtYW5hZ2VyICE9
        PSB0cmlnZ2VyaW5nTWFuYWdlcikgewogICAgICAgIHJlc3VsdCA9IHNlbGYu
        X2Rpc3BhdGNoRXZlbnQobWFuYWdlciwgZXZ0LCBldmVudE5hbWUsIHZpZXcp
        OwogICAgICB9IGVsc2UgaWYgKHZpZXcpIHsKICAgICAgICByZXN1bHQgPSBz
        ZWxmLl9idWJibGVFdmVudCh2aWV3LCBldnQsIGV2ZW50TmFtZSk7CiAgICAg
        IH0gZWxzZSB7CiAgICAgICAgZXZ0LnN0b3BQcm9wYWdhdGlvbigpOwogICAg
        ICB9CgogICAgICByZXR1cm4gcmVzdWx0OwogICAgfSk7CgogICAgcm9vdEVs
        ZW1lbnQub24oZXZlbnQgKyAnLmVtYmVyJywgJ1tkYXRhLWVtYmVyLWFjdGlv
        bl0nLCBmdW5jdGlvbihldnQpIHsKICAgICAgdmFyIGFjdGlvbklkID0gRW1i
        ZXIuJChldnQuY3VycmVudFRhcmdldCkuYXR0cignZGF0YS1lbWJlci1hY3Rp
        b24nKSwKICAgICAgICAgIGFjdGlvbiAgID0gRW1iZXIuSGFuZGxlYmFycy5B
        Y3Rpb25IZWxwZXIucmVnaXN0ZXJlZEFjdGlvbnNbYWN0aW9uSWRdOwoKICAg
        ICAgLy8gV2UgaGF2ZSB0byBjaGVjayBmb3IgYWN0aW9uIGhlcmUgc2luY2Ug
        aW4gc29tZSBjYXNlcywgalF1ZXJ5IHdpbGwgdHJpZ2dlcgogICAgICAvLyBh
        biBldmVudCBvbiBgcmVtb3ZlQ2hpbGRgIChpLmUuIGZvY3Vzb3V0KSBhZnRl
        ciB3ZSd2ZSBhbHJlYWR5IHRvcm4gZG93biB0aGUKICAgICAgLy8gYWN0aW9u
        IGhhbmRsZXJzIGZvciB0aGUgdmlldy4KICAgICAgaWYgKGFjdGlvbiAmJiBh
        Y3Rpb24uZXZlbnROYW1lID09PSBldmVudE5hbWUpIHsKICAgICAgICByZXR1
        cm4gYWN0aW9uLmhhbmRsZXIoZXZ0KTsKICAgICAgfQogICAgfSk7CiAgfSwK
        CiAgX2ZpbmROZWFyZXN0RXZlbnRNYW5hZ2VyOiBmdW5jdGlvbih2aWV3LCBl
        dmVudE5hbWUpIHsKICAgIHZhciBtYW5hZ2VyID0gbnVsbDsKCiAgICB3aGls
        ZSAodmlldykgewogICAgICBtYW5hZ2VyID0gZ2V0KHZpZXcsICdldmVudE1h
        bmFnZXInKTsKICAgICAgaWYgKG1hbmFnZXIgJiYgbWFuYWdlcltldmVudE5h
        bWVdKSB7IGJyZWFrOyB9CgogICAgICB2aWV3ID0gZ2V0KHZpZXcsICdwYXJl
        bnRWaWV3Jyk7CiAgICB9CgogICAgcmV0dXJuIG1hbmFnZXI7CiAgfSwKCiAg
        X2Rpc3BhdGNoRXZlbnQ6IGZ1bmN0aW9uKG9iamVjdCwgZXZ0LCBldmVudE5h
        bWUsIHZpZXcpIHsKICAgIHZhciByZXN1bHQgPSB0cnVlOwoKICAgIHZhciBo
        YW5kbGVyID0gb2JqZWN0W2V2ZW50TmFtZV07CiAgICBpZiAoRW1iZXIudHlw
        ZU9mKGhhbmRsZXIpID09PSAnZnVuY3Rpb24nKSB7CiAgICAgIHJlc3VsdCA9
        IEVtYmVyLnJ1bihvYmplY3QsIGhhbmRsZXIsIGV2dCwgdmlldyk7CiAgICAg
        IC8vIERvIG5vdCBwcmV2ZW50RGVmYXVsdCBpbiBldmVudE1hbmFnZXJzLgog
        ICAgICBldnQuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICB9CiAgICBlbHNlIHsK
        ICAgICAgcmVzdWx0ID0gdGhpcy5fYnViYmxlRXZlbnQodmlldywgZXZ0LCBl
        dmVudE5hbWUpOwogICAgfQoKICAgIHJldHVybiByZXN1bHQ7CiAgfSwKCiAg
        X2J1YmJsZUV2ZW50OiBmdW5jdGlvbih2aWV3LCBldnQsIGV2ZW50TmFtZSkg
        ewogICAgcmV0dXJuIEVtYmVyLnJ1bih2aWV3LCB2aWV3LmhhbmRsZUV2ZW50
        LCBldmVudE5hbWUsIGV2dCk7CiAgfSwKCiAgZGVzdHJveTogZnVuY3Rpb24o
        KSB7CiAgICB2YXIgcm9vdEVsZW1lbnQgPSBnZXQodGhpcywgJ3Jvb3RFbGVt
        ZW50Jyk7CiAgICBFbWJlci4kKHJvb3RFbGVtZW50KS5vZmYoJy5lbWJlcics
        ICcqKicpLnJlbW92ZUNsYXNzKCdlbWJlci1hcHBsaWNhdGlvbicpOwogICAg
        cmV0dXJuIHRoaXMuX3N1cGVyKCk7CiAgfQp9KTsKCn0pKCk7CgoKCihmdW5j
        dGlvbigpIHsKLyoqCkBtb2R1bGUgZW1iZXIKQHN1Ym1vZHVsZSBlbWJlci12
        aWV3cwoqLwoKLy8gQWRkIGEgbmV3IG5hbWVkIHF1ZXVlIGZvciByZW5kZXJp
        bmcgdmlld3MgdGhhdCBoYXBwZW5zCi8vIGFmdGVyIGJpbmRpbmdzIGhhdmUg
        c3luY2VkLCBhbmQgYSBxdWV1ZSBmb3Igc2NoZWR1bGluZyBhY3Rpb25zCi8v
        IHRoYXQgdGhhdCBzaG91bGQgb2NjdXIgYWZ0ZXIgdmlldyByZW5kZXJpbmcu
        CnZhciBxdWV1ZXMgPSBFbWJlci5ydW4ucXVldWVzLAogICAgaW5kZXhPZiA9
        IEVtYmVyLkFycmF5UG9seWZpbGxzLmluZGV4T2Y7CnF1ZXVlcy5zcGxpY2Uo
        aW5kZXhPZi5jYWxsKHF1ZXVlcywgJ2FjdGlvbnMnKSsxLCAwLCAncmVuZGVy
        JywgJ2FmdGVyUmVuZGVyJyk7Cgp9KSgpOwoKCgooZnVuY3Rpb24oKSB7Cgp9
        KSgpOwoKCgooZnVuY3Rpb24oKSB7CnZhciBzdGF0ZXMgPSB7fTsKCi8qKgpA
        bW9kdWxlIGVtYmVyCkBzdWJtb2R1bGUgZW1iZXItdmlld3MKKi8KCnZhciBn
        ZXQgPSBFbWJlci5nZXQsIHNldCA9IEVtYmVyLnNldCwKICAgIGd1aWRGb3Ig
        PSBFbWJlci5ndWlkRm9yLAogICAgYV9mb3JFYWNoID0gRW1iZXIuRW51bWVy
        YWJsZVV0aWxzLmZvckVhY2gsCiAgICBhX2FkZE9iamVjdCA9IEVtYmVyLkVu
        dW1lcmFibGVVdGlscy5hZGRPYmplY3QsCiAgICBtZXRhID0gRW1iZXIubWV0
        YSwKICAgIGRlZmluZVByb3BlcnR5ID0gRW1iZXIuZGVmaW5lUHJvcGVydHk7
        CgpmdW5jdGlvbiBudWxsVmlld3NCdWZmZXIodmlldykgewogIHZpZXcuYnVm
        ZmVyID0gbnVsbDsKfQoKdmFyIGNoaWxkVmlld3NQcm9wZXJ0eSA9IEVtYmVy
        LmNvbXB1dGVkKGZ1bmN0aW9uKCkgewogIHZhciBjaGlsZFZpZXdzID0gdGhp
        cy5fY2hpbGRWaWV3cywgcmV0ID0gRW1iZXIuQSgpLCB2aWV3ID0gdGhpczsK
        CiAgYV9mb3JFYWNoKGNoaWxkVmlld3MsIGZ1bmN0aW9uKHZpZXcpIHsKICAg
        IHZhciBjdXJyZW50Q2hpbGRWaWV3czsKICAgIGlmICh2aWV3LmlzVmlydHVh
        bCkgewogICAgICBpZiAoY3VycmVudENoaWxkVmlld3MgPSBnZXQodmlldywg
        J2NoaWxkVmlld3MnKSkgewogICAgICAgIHJldC5wdXNoT2JqZWN0cyhjdXJy
        ZW50Q2hpbGRWaWV3cyk7CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIHJl
        dC5wdXNoKHZpZXcpOwogICAgfQogIH0pOwoKICByZXQucmVwbGFjZSA9IGZ1
        bmN0aW9uIChpZHgsIHJlbW92ZWRDb3VudCwgYWRkZWRWaWV3cykgewogICAg
        aWYgKHZpZXcgaW5zdGFuY2VvZiBFbWJlci5Db250YWluZXJWaWV3KSB7CiAg
        ICAgIEVtYmVyLmRlcHJlY2F0ZSgiTWFuaXB1bGF0aW5nIGFuIEVtYmVyLkNv
        bnRhaW5lclZpZXcgdGhyb3VnaCBpdHMgY2hpbGRWaWV3cyBwcm9wZXJ0eSBp
        cyBkZXByZWNhdGVkLiBQbGVhc2UgdXNlIHRoZSBDb250YWluZXJWaWV3IGlu
        c3RhbmNlIGl0c2VsZiBhcyBhbiBFbWJlci5NdXRhYmxlQXJyYXkuIik7CiAg
        ICAgIHJldHVybiB2aWV3LnJlcGxhY2UoaWR4LCByZW1vdmVkQ291bnQsIGFk
        ZGVkVmlld3MpOwogICAgfQogICAgdGhyb3cgbmV3IEVtYmVyLkVycm9yKCJj
        aGlsZFZpZXdzIGlzIGltbXV0YWJsZSIpOwogIH07CgogIHJldHVybiByZXQ7
        Cn0pOwoKRW1iZXIud2FybigiVGhlIFZJRVdfUFJFU0VSVkVTX0NPTlRFWFQg
        ZmxhZyBoYXMgYmVlbiByZW1vdmVkIGFuZCB0aGUgZnVuY3Rpb25hbGl0eSBj
        YW4gbm8gbG9uZ2VyIGJlIGRpc2FibGVkLiIsIEVtYmVyLkVOVi5WSUVXX1BS
        RVNFUlZFU19DT05URVhUICE9PSBmYWxzZSk7CgovKioKICBHbG9iYWwgaGFz
        aCBvZiBzaGFyZWQgdGVtcGxhdGVzLiBUaGlzIHdpbGwgYXV0b21hdGljYWxs
        eSBiZSBwb3B1bGF0ZWQKICBieSB0aGUgYnVpbGQgdG9vbHMgc28gdGhhdCB5
        b3UgY2FuIHN0b3JlIHlvdXIgSGFuZGxlYmFycyB0ZW1wbGF0ZXMgaW4KICBz
        ZXBhcmF0ZSBmaWxlcyB0aGF0IGdldCBsb2FkZWQgaW50byBKYXZhU2NyaXB0
        IGF0IGJ1aWxkdGltZS4KCiAgQHByb3BlcnR5IFRFTVBMQVRFUwogIEBmb3Ig
        RW1iZXIKICBAdHlwZSBIYXNoCiovCkVtYmVyLlRFTVBMQVRFUyA9IHt9OwoK
        LyoqCiAgYEVtYmVyLkNvcmVWaWV3YCBpcyBhbiBhYnN0cmFjdCBjbGFzcyB0
        aGF0IGV4aXN0cyB0byBnaXZlIHZpZXctbGlrZSBiZWhhdmlvcgogIHRvIGJv
        dGggRW1iZXIncyBtYWluIHZpZXcgY2xhc3MgYEVtYmVyLlZpZXdgIGFuZCBv
        dGhlciBjbGFzc2VzIGxpa2UKICBgRW1iZXIuX1NpbXBsZU1ldGFtb3JwaFZp
        ZXdgIHRoYXQgZG9uJ3QgbmVlZCB0aGUgZnVsbHkgZnVuY3Rpb25hbHRpeSBv
        ZgogIGBFbWJlci5WaWV3YC4KCiAgVW5sZXNzIHlvdSBoYXZlIHNwZWNpZmlj
        IG5lZWRzIGZvciBgQ29yZVZpZXdgLCB5b3Ugd2lsbCB1c2UgYEVtYmVyLlZp
        ZXdgCiAgaW4geW91ciBhcHBsaWNhdGlvbnMuCgogIEBjbGFzcyBDb3JlVmll
        dwogIEBuYW1lc3BhY2UgRW1iZXIKICBAZXh0ZW5kcyBFbWJlci5PYmplY3QK
        ICBAdXNlcyBFbWJlci5FdmVudGVkCiAgQHVzZXMgRW1iZXIuQWN0aW9uSGFu
        ZGxlcgoqLwoKRW1iZXIuQ29yZVZpZXcgPSBFbWJlci5PYmplY3QuZXh0ZW5k
        KEVtYmVyLkV2ZW50ZWQsIEVtYmVyLkFjdGlvbkhhbmRsZXIsIHsKICBpc1Zp
        ZXc6IHRydWUsCgogIHN0YXRlczogc3RhdGVzLAoKICBpbml0OiBmdW5jdGlv
        bigpIHsKICAgIHRoaXMuX3N1cGVyKCk7CiAgICB0aGlzLnRyYW5zaXRpb25U
        bygncHJlUmVuZGVyJyk7CiAgICB0aGlzLl9pc1Zpc2libGUgPSBnZXQodGhp
        cywgJ2lzVmlzaWJsZScpOwogIH0sCgogIC8qKgogICAgSWYgdGhlIHZpZXcg
        aXMgY3VycmVudGx5IGluc2VydGVkIGludG8gdGhlIERPTSBvZiBhIHBhcmVu
        dCB2aWV3LCB0aGlzCiAgICBwcm9wZXJ0eSB3aWxsIHBvaW50IHRvIHRoZSBw
        YXJlbnQgb2YgdGhlIHZpZXcuCgogICAgQHByb3BlcnR5IHBhcmVudFZpZXcK
        ICAgIEB0eXBlIEVtYmVyLlZpZXcKICAgIEBkZWZhdWx0IG51bGwKICAqLwog
        IHBhcmVudFZpZXc6IEVtYmVyLmNvbXB1dGVkKCdfcGFyZW50VmlldycsIGZ1
        bmN0aW9uKCkgewogICAgdmFyIHBhcmVudCA9IHRoaXMuX3BhcmVudFZpZXc7
        CgogICAgaWYgKHBhcmVudCAmJiBwYXJlbnQuaXNWaXJ0dWFsKSB7CiAgICAg
        IHJldHVybiBnZXQocGFyZW50LCAncGFyZW50VmlldycpOwogICAgfSBlbHNl
        IHsKICAgICAgcmV0dXJuIHBhcmVudDsKICAgIH0KICB9KSwKCiAgc3RhdGU6
        IG51bGwsCgogIF9wYXJlbnRWaWV3OiBudWxsLAoKICAvLyByZXR1cm4gdGhl
        IGN1cnJlbnQgdmlldywgbm90IGluY2x1ZGluZyB2aXJ0dWFsIHZpZXdzCiAg
        Y29uY3JldGVWaWV3OiBFbWJlci5jb21wdXRlZCgncGFyZW50VmlldycsIGZ1
        bmN0aW9uKCkgewogICAgaWYgKCF0aGlzLmlzVmlydHVhbCkgeyByZXR1cm4g
        dGhpczsgfQogICAgZWxzZSB7IHJldHVybiBnZXQodGhpcywgJ3BhcmVudFZp
        ZXcnKTsgfQogIH0pLAoKICBpbnN0cnVtZW50TmFtZTogJ2NvcmVfdmlldycs
        CgogIGluc3RydW1lbnREZXRhaWxzOiBmdW5jdGlvbihoYXNoKSB7CiAgICBo
        YXNoLm9iamVjdCA9IHRoaXMudG9TdHJpbmcoKTsKICB9LAoKICAvKioKICAg
        IEludm9rZWQgYnkgdGhlIHZpZXcgc3lzdGVtIHdoZW4gdGhpcyB2aWV3IG5l
        ZWRzIHRvIHByb2R1Y2UgYW4gSFRNTAogICAgcmVwcmVzZW50YXRpb24uIFRo
        aXMgbWV0aG9kIHdpbGwgY3JlYXRlIGEgbmV3IHJlbmRlciBidWZmZXIsIGlm
        IG5lZWRlZCwKICAgIHRoZW4gYXBwbHkgYW55IGRlZmF1bHQgYXR0cmlidXRl
        cywgc3VjaCBhcyBjbGFzcyBuYW1lcyBhbmQgdmlzaWJpbGl0eS4KICAgIEZp
        bmFsbHksIHRoZSBgcmVuZGVyKClgIG1ldGhvZCBpcyBpbnZva2VkLCB3aGlj
        aCBpcyByZXNwb25zaWJsZSBmb3IKICAgIGRvaW5nIHRoZSBidWxrIG9mIHRo
        ZSByZW5kZXJpbmcuCgogICAgWW91IHNob3VsZCBub3QgbmVlZCB0byBvdmVy
        cmlkZSB0aGlzIG1ldGhvZDsgaW5zdGVhZCwgaW1wbGVtZW50IHRoZQogICAg
        YHRlbXBsYXRlYCBwcm9wZXJ0eSwgb3IgaWYgeW91IG5lZWQgbW9yZSBjb250
        cm9sLCBvdmVycmlkZSB0aGUgYHJlbmRlcmAKICAgIG1ldGhvZC4KCiAgICBA
        bWV0aG9kIHJlbmRlclRvQnVmZmVyCiAgICBAcGFyYW0ge0VtYmVyLlJlbmRl
        ckJ1ZmZlcn0gYnVmZmVyIHRoZSByZW5kZXIgYnVmZmVyLiBJZiBubyBidWZm
        ZXIgaXMKICAgICAgcGFzc2VkLCBhIGRlZmF1bHQgYnVmZmVyLCB1c2luZyB0
        aGUgY3VycmVudCB2aWV3J3MgYHRhZ05hbWVgLCB3aWxsCiAgICAgIGJlIHVz
        ZWQuCiAgICBAcHJpdmF0ZQogICovCiAgcmVuZGVyVG9CdWZmZXI6IGZ1bmN0
        aW9uKHBhcmVudEJ1ZmZlciwgYnVmZmVyT3BlcmF0aW9uKSB7CiAgICB2YXIg
        bmFtZSA9ICdyZW5kZXIuJyArIHRoaXMuaW5zdHJ1bWVudE5hbWUsCiAgICAg
        ICAgZGV0YWlscyA9IHt9OwoKICAgIHRoaXMuaW5zdHJ1bWVudERldGFpbHMo
        ZGV0YWlscyk7CgogICAgcmV0dXJuIEVtYmVyLmluc3RydW1lbnQobmFtZSwg
        ZGV0YWlscywgZnVuY3Rpb24gaW5zdHJ1bWVudFJlbmRlclRvQnVmZmVyKCkg
        ewogICAgICByZXR1cm4gdGhpcy5fcmVuZGVyVG9CdWZmZXIocGFyZW50QnVm
        ZmVyLCBidWZmZXJPcGVyYXRpb24pOwogICAgfSwgdGhpcyk7CiAgfSwKCiAg
        X3JlbmRlclRvQnVmZmVyOiBmdW5jdGlvbihwYXJlbnRCdWZmZXIsIGJ1ZmZl
        ck9wZXJhdGlvbikgewogICAgLy8gSWYgdGhpcyBpcyB0aGUgdG9wLW1vc3Qg
        dmlldywgc3RhcnQgYSBuZXcgYnVmZmVyLiBPdGhlcndpc2UsCiAgICAvLyBj
        cmVhdGUgYSBuZXcgYnVmZmVyIHJlbGF0aXZlIHRvIHRoZSBvcmlnaW5hbCB1
        c2luZyB0aGUKICAgIC8vIHByb3ZpZGVkIGJ1ZmZlciBvcGVyYXRpb24gKGZv
        ciBleGFtcGxlLCBgaW5zZXJ0QWZ0ZXJgIHdpbGwKICAgIC8vIGluc2VydCBh
        IG5ldyBidWZmZXIgYWZ0ZXIgdGhlICJwYXJlbnQgYnVmZmVyIikuCiAgICB2
        YXIgdGFnTmFtZSA9IHRoaXMudGFnTmFtZTsKCiAgICBpZiAodGFnTmFtZSA9
        PT0gbnVsbCB8fCB0YWdOYW1lID09PSB1bmRlZmluZWQpIHsKICAgICAgdGFn
        TmFtZSA9ICdkaXYnOwogICAgfQoKICAgIHZhciBidWZmZXIgPSB0aGlzLmJ1
        ZmZlciA9IHBhcmVudEJ1ZmZlciAmJiBwYXJlbnRCdWZmZXIuYmVnaW4odGFn
        TmFtZSkgfHwgRW1iZXIuUmVuZGVyQnVmZmVyKHRhZ05hbWUpOwogICAgdGhp
        cy50cmFuc2l0aW9uVG8oJ2luQnVmZmVyJywgZmFsc2UpOwoKICAgIHRoaXMu
        YmVmb3JlUmVuZGVyKGJ1ZmZlcik7CiAgICB0aGlzLnJlbmRlcihidWZmZXIp
        OwogICAgdGhpcy5hZnRlclJlbmRlcihidWZmZXIpOwoKICAgIHJldHVybiBi
        dWZmZXI7CiAgfSwKCiAgLyoqCiAgICBPdmVycmlkZSB0aGUgZGVmYXVsdCBl
        dmVudCBmaXJpbmcgZnJvbSBgRW1iZXIuRXZlbnRlZGAgdG8KICAgIGFsc28g
        Y2FsbCBtZXRob2RzIHdpdGggdGhlIGdpdmVuIG5hbWUuCgogICAgQG1ldGhv
        ZCB0cmlnZ2VyCiAgICBAcGFyYW0gbmFtZSB7U3RyaW5nfQogICAgQHByaXZh
        dGUKICAqLwogIHRyaWdnZXI6IGZ1bmN0aW9uKG5hbWUpIHsKICAgIHRoaXMu
        X3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICB2YXIgbWV0aG9k
        ID0gdGhpc1tuYW1lXTsKICAgIGlmIChtZXRob2QpIHsKICAgICAgdmFyIGFy
        Z3MgPSBbXSwgaSwgbDsKICAgICAgZm9yIChpID0gMSwgbCA9IGFyZ3VtZW50
        cy5sZW5ndGg7IGkgPCBsOyBpKyspIHsKICAgICAgICBhcmdzLnB1c2goYXJn
        dW1lbnRzW2ldKTsKICAgICAgfQogICAgICByZXR1cm4gbWV0aG9kLmFwcGx5
        KHRoaXMsIGFyZ3MpOwogICAgfQogIH0sCgogIGRlcHJlY2F0ZWRTZW5kSGFu
        ZGxlczogZnVuY3Rpb24oYWN0aW9uTmFtZSkgewogICAgcmV0dXJuICEhdGhp
        c1thY3Rpb25OYW1lXTsKICB9LAoKICBkZXByZWNhdGVkU2VuZDogZnVuY3Rp
        b24oYWN0aW9uTmFtZSkgewogICAgdmFyIGFyZ3MgPSBbXS5zbGljZS5jYWxs
        KGFyZ3VtZW50cywgMSk7CiAgICBFbWJlci5hc3NlcnQoJycgKyB0aGlzICsg
        IiBoYXMgdGhlIGFjdGlvbiAiICsgYWN0aW9uTmFtZSArICIgYnV0IGl0IGlz
        IG5vdCBhIGZ1bmN0aW9uIiwgdHlwZW9mIHRoaXNbYWN0aW9uTmFtZV0gPT09
        ICdmdW5jdGlvbicpOwogICAgRW1iZXIuZGVwcmVjYXRlKCdBY3Rpb24gaGFu
        ZGxlcnMgaW1wbGVtZW50ZWQgZGlyZWN0bHkgb24gdmlld3MgYXJlIGRlcHJl
        Y2F0ZWQgaW4gZmF2b3Igb2YgYWN0aW9uIGhhbmRsZXJzIG9uIGFuIGBhY3Rp
        b25zYCBvYmplY3QgKCBhY3Rpb246IGAnICsgYWN0aW9uTmFtZSArICdgIG9u
        ICcgKyB0aGlzICsgJyknLCBmYWxzZSk7CiAgICB0aGlzW2FjdGlvbk5hbWVd
        LmFwcGx5KHRoaXMsIGFyZ3MpOwogICAgcmV0dXJuOwogIH0sCgogIGhhczog
        ZnVuY3Rpb24obmFtZSkgewogICAgcmV0dXJuIEVtYmVyLnR5cGVPZih0aGlz
        W25hbWVdKSA9PT0gJ2Z1bmN0aW9uJyB8fCB0aGlzLl9zdXBlcihuYW1lKTsK
        ICB9LAoKICBkZXN0cm95OiBmdW5jdGlvbigpIHsKICAgIHZhciBwYXJlbnQg
        PSB0aGlzLl9wYXJlbnRWaWV3OwoKICAgIGlmICghdGhpcy5fc3VwZXIoKSkg
        eyByZXR1cm47IH0KCiAgICAvLyBkZXN0cm95IHRoZSBlbGVtZW50IC0tIHRo
        aXMgd2lsbCBhdm9pZCBlYWNoIGNoaWxkIHZpZXcgZGVzdHJveWluZwogICAg
        Ly8gdGhlIGVsZW1lbnQgb3ZlciBhbmQgb3ZlciBhZ2Fpbi4uLgogICAgaWYg
        KCF0aGlzLnJlbW92ZWRGcm9tRE9NKSB7IHRoaXMuZGVzdHJveUVsZW1lbnQo
        KTsgfQoKICAgIC8vIHJlbW92ZSBmcm9tIHBhcmVudCBpZiBmb3VuZC4gRG9u
        J3QgY2FsbCByZW1vdmVGcm9tUGFyZW50LAogICAgLy8gYXMgcmVtb3ZlRnJv
        bVBhcmVudCB3aWxsIHRyeSB0byByZW1vdmUgdGhlIGVsZW1lbnQgZnJvbQog
        ICAgLy8gdGhlIERPTSBhZ2Fpbi4KICAgIGlmIChwYXJlbnQpIHsgcGFyZW50
        LnJlbW92ZUNoaWxkKHRoaXMpOyB9CgogICAgdGhpcy50cmFuc2l0aW9uVG8o
        J2Rlc3Ryb3lpbmcnLCBmYWxzZSk7CgogICAgcmV0dXJuIHRoaXM7CiAgfSwK
        CiAgY2xlYXJSZW5kZXJlZENoaWxkcmVuOiBFbWJlci5LLAogIHRyaWdnZXJS
        ZWN1cnNpdmVseTogRW1iZXIuSywKICBpbnZva2VSZWN1cnNpdmVseTogRW1i
        ZXIuSywKICB0cmFuc2l0aW9uVG86IEVtYmVyLkssCiAgZGVzdHJveUVsZW1l
        bnQ6IEVtYmVyLksKfSk7Cgp2YXIgVmlld0NvbGxlY3Rpb24gPSBFbWJlci5f
        Vmlld0NvbGxlY3Rpb24gPSBmdW5jdGlvbihpbml0aWFsVmlld3MpIHsKICB2
        YXIgdmlld3MgPSB0aGlzLnZpZXdzID0gaW5pdGlhbFZpZXdzIHx8IFtdOwog
        IHRoaXMubGVuZ3RoID0gdmlld3MubGVuZ3RoOwp9OwoKVmlld0NvbGxlY3Rp
        b24ucHJvdG90eXBlID0gewogIGxlbmd0aDogMCwKCiAgdHJpZ2dlcjogZnVu
        Y3Rpb24oZXZlbnROYW1lKSB7CiAgICB2YXIgdmlld3MgPSB0aGlzLnZpZXdz
        LCB2aWV3OwogICAgZm9yICh2YXIgaSA9IDAsIGwgPSB2aWV3cy5sZW5ndGg7
        IGkgPCBsOyBpKyspIHsKICAgICAgdmlldyA9IHZpZXdzW2ldOwogICAgICBp
        ZiAodmlldy50cmlnZ2VyKSB7IHZpZXcudHJpZ2dlcihldmVudE5hbWUpOyB9
        CiAgICB9CiAgfSwKCiAgdHJpZ2dlclJlY3Vyc2l2ZWx5OiBmdW5jdGlvbihl
        dmVudE5hbWUpIHsKICAgIHZhciB2aWV3cyA9IHRoaXMudmlld3M7CiAgICBm
        b3IgKHZhciBpID0gMCwgbCA9IHZpZXdzLmxlbmd0aDsgaSA8IGw7IGkrKykg
        ewogICAgICB2aWV3c1tpXS50cmlnZ2VyUmVjdXJzaXZlbHkoZXZlbnROYW1l
        KTsKICAgIH0KICB9LAoKICBpbnZva2VSZWN1cnNpdmVseTogZnVuY3Rpb24o
        Zm4pIHsKICAgIHZhciB2aWV3cyA9IHRoaXMudmlld3MsIHZpZXc7CgogICAg
        Zm9yICh2YXIgaSA9IDAsIGwgPSB2aWV3cy5sZW5ndGg7IGkgPCBsOyBpKysp
        IHsKICAgICAgdmlldyA9IHZpZXdzW2ldOwogICAgICBmbih2aWV3KTsKICAg
        IH0KICB9LAoKICB0cmFuc2l0aW9uVG86IGZ1bmN0aW9uKHN0YXRlLCBjaGls
        ZHJlbikgewogICAgdmFyIHZpZXdzID0gdGhpcy52aWV3czsKICAgIGZvciAo
        dmFyIGkgPSAwLCBsID0gdmlld3MubGVuZ3RoOyBpIDwgbDsgaSsrKSB7CiAg
        ICAgIHZpZXdzW2ldLnRyYW5zaXRpb25UbyhzdGF0ZSwgY2hpbGRyZW4pOwog
        ICAgfQogIH0sCgogIHB1c2g6IGZ1bmN0aW9uKCkgewogICAgdGhpcy5sZW5n
        dGggKz0gYXJndW1lbnRzLmxlbmd0aDsKICAgIHZhciB2aWV3cyA9IHRoaXMu
        dmlld3M7CiAgICByZXR1cm4gdmlld3MucHVzaC5hcHBseSh2aWV3cywgYXJn
        dW1lbnRzKTsKICB9LAoKICBvYmplY3RBdDogZnVuY3Rpb24oaWR4KSB7CiAg
        ICByZXR1cm4gdGhpcy52aWV3c1tpZHhdOwogIH0sCgogIGZvckVhY2g6IGZ1
        bmN0aW9uKGNhbGxiYWNrKSB7CiAgICB2YXIgdmlld3MgPSB0aGlzLnZpZXdz
        OwogICAgcmV0dXJuIGFfZm9yRWFjaCh2aWV3cywgY2FsbGJhY2spOwogIH0s
        CgogIGNsZWFyOiBmdW5jdGlvbigpIHsKICAgIHRoaXMubGVuZ3RoID0gMDsK
        ICAgIHRoaXMudmlld3MubGVuZ3RoID0gMDsKICB9Cn07Cgp2YXIgRU1QVFlf
        QVJSQVkgPSBbXTsKCi8qKgogIGBFbWJlci5WaWV3YCBpcyB0aGUgY2xhc3Mg
        aW4gRW1iZXIgcmVzcG9uc2libGUgZm9yIGVuY2Fwc3VsYXRpbmcgdGVtcGxh
        dGVzIG9mCiAgSFRNTCBjb250ZW50LCBjb21iaW5pbmcgdGVtcGxhdGVzIHdp
        dGggZGF0YSB0byByZW5kZXIgYXMgc2VjdGlvbnMgb2YgYSBwYWdlJ3MKICBE
        T00sIGFuZCByZWdpc3RlcmluZyBhbmQgcmVzcG9uZGluZyB0byB1c2VyLWlu
        aXRpYXRlZCBldmVudHMuCgogICMjIEhUTUwgVGFnCgogIFRoZSBkZWZhdWx0
        IEhUTUwgdGFnIG5hbWUgdXNlZCBmb3IgYSB2aWV3J3MgRE9NIHJlcHJlc2Vu
        dGF0aW9uIGlzIGBkaXZgLiBUaGlzCiAgY2FuIGJlIGN1c3RvbWl6ZWQgYnkg
        c2V0dGluZyB0aGUgYHRhZ05hbWVgIHByb3BlcnR5LiBUaGUgZm9sbG93aW5n
        IHZpZXcKICBjbGFzczoKCiAgYGBgamF2YXNjcmlwdAogIFBhcmFncmFwaFZp
        ZXcgPSBFbWJlci5WaWV3LmV4dGVuZCh7CiAgICB0YWdOYW1lOiAnZW0nCiAg
        fSk7CiAgYGBgCgogIFdvdWxkIHJlc3VsdCBpbiBpbnN0YW5jZXMgd2l0aCB0
        aGUgZm9sbG93aW5nIEhUTUw6CgogIGBgYGh0bWwKICA8ZW0gaWQ9ImVtYmVy
        MSIgY2xhc3M9ImVtYmVyLXZpZXciPjwvZW0+CiAgYGBgCgogICMjIEhUTUwg
        YGNsYXNzYCBBdHRyaWJ1dGUKCiAgVGhlIEhUTUwgYGNsYXNzYCBhdHRyaWJ1
        dGUgb2YgYSB2aWV3J3MgdGFnIGNhbiBiZSBzZXQgYnkgcHJvdmlkaW5nIGEK
        ICBgY2xhc3NOYW1lc2AgcHJvcGVydHkgdGhhdCBpcyBzZXQgdG8gYW4gYXJy
        YXkgb2Ygc3RyaW5nczoKCiAgYGBgamF2YXNjcmlwdAogIE15VmlldyA9IEVt
        YmVyLlZpZXcuZXh0ZW5kKHsKICAgIGNsYXNzTmFtZXM6IFsnbXktY2xhc3Mn
        LCAnbXktb3RoZXItY2xhc3MnXQogIH0pOwogIGBgYAoKICBXaWxsIHJlc3Vs
        dCBpbiB2aWV3IGluc3RhbmNlcyB3aXRoIGFuIEhUTUwgcmVwcmVzZW50YXRp
        b24gb2Y6CgogIGBgYGh0bWwKICA8ZGl2IGlkPSJlbWJlcjEiIGNsYXNzPSJl
        bWJlci12aWV3IG15LWNsYXNzIG15LW90aGVyLWNsYXNzIj48L2Rpdj4KICBg
        YGAKCiAgYGNsYXNzYCBhdHRyaWJ1dGUgdmFsdWVzIGNhbiBhbHNvIGJlIHNl
        dCBieSBwcm92aWRpbmcgYSBgY2xhc3NOYW1lQmluZGluZ3NgCiAgcHJvcGVy
        dHkgc2V0IHRvIGFuIGFycmF5IG9mIHByb3BlcnRpZXMgbmFtZXMgZm9yIHRo
        ZSB2aWV3LiBUaGUgcmV0dXJuIHZhbHVlCiAgb2YgdGhlc2UgcHJvcGVydGll
        cyB3aWxsIGJlIGFkZGVkIGFzIHBhcnQgb2YgdGhlIHZhbHVlIGZvciB0aGUg
        dmlldydzIGBjbGFzc2AKICBhdHRyaWJ1dGUuIFRoZXNlIHByb3BlcnRpZXMg
        Y2FuIGJlIGNvbXB1dGVkIHByb3BlcnRpZXM6CgogIGBgYGphdmFzY3JpcHQK
        ICBNeVZpZXcgPSBFbWJlci5WaWV3LmV4dGVuZCh7CiAgICBjbGFzc05hbWVC
        aW5kaW5nczogWydwcm9wZXJ0eUEnLCAncHJvcGVydHlCJ10sCiAgICBwcm9w
        ZXJ0eUE6ICdmcm9tLWEnLAogICAgcHJvcGVydHlCOiBmdW5jdGlvbigpIHsK
        ICAgICAgaWYgKHNvbWVMb2dpYykgeyByZXR1cm4gJ2Zyb20tYic7IH0KICAg
        IH0ucHJvcGVydHkoKQogIH0pOwogIGBgYAoKICBXaWxsIHJlc3VsdCBpbiB2
        aWV3IGluc3RhbmNlcyB3aXRoIGFuIEhUTUwgcmVwcmVzZW50YXRpb24gb2Y6
        CgogIGBgYGh0bWwKICA8ZGl2IGlkPSJlbWJlcjEiIGNsYXNzPSJlbWJlci12
        aWV3IGZyb20tYSBmcm9tLWIiPjwvZGl2PgogIGBgYAoKICBJZiB0aGUgdmFs
        dWUgb2YgYSBjbGFzcyBuYW1lIGJpbmRpbmcgcmV0dXJucyBhIGJvb2xlYW4g
        dGhlIHByb3BlcnR5IG5hbWUKICBpdHNlbGYgd2lsbCBiZSB1c2VkIGFzIHRo
        ZSBjbGFzcyBuYW1lIGlmIHRoZSBwcm9wZXJ0eSBpcyB0cnVlLiBUaGUgY2xh
        c3MgbmFtZQogIHdpbGwgbm90IGJlIGFkZGVkIGlmIHRoZSB2YWx1ZSBpcyBg
        ZmFsc2VgIG9yIGB1bmRlZmluZWRgLgoKICBgYGBqYXZhc2NyaXB0CiAgTXlW
        aWV3ID0gRW1iZXIuVmlldy5leHRlbmQoewogICAgY2xhc3NOYW1lQmluZGlu
        Z3M6IFsnaG92ZXJlZCddLAogICAgaG92ZXJlZDogdHJ1ZQogIH0pOwogIGBg
        YAoKICBXaWxsIHJlc3VsdCBpbiB2aWV3IGluc3RhbmNlcyB3aXRoIGFuIEhU
        TUwgcmVwcmVzZW50YXRpb24gb2Y6CgogIGBgYGh0bWwKICA8ZGl2IGlkPSJl
        bWJlcjEiIGNsYXNzPSJlbWJlci12aWV3IGhvdmVyZWQiPjwvZGl2PgogIGBg
        YAoKICBXaGVuIHVzaW5nIGJvb2xlYW4gY2xhc3MgbmFtZSBiaW5kaW5ncyB5
        b3UgY2FuIHN1cHBseSBhIHN0cmluZyB2YWx1ZSBvdGhlcgogIHRoYW4gdGhl
        IHByb3BlcnR5IG5hbWUgZm9yIHVzZSBhcyB0aGUgYGNsYXNzYCBIVE1MIGF0
        dHJpYnV0ZSBieSBhcHBlbmRpbmcgdGhlCiAgcHJlZmVycmVkIHZhbHVlIGFm
        dGVyIGEgIjoiIGNoYXJhY3RlciB3aGVuIGRlZmluaW5nIHRoZSBiaW5kaW5n
        OgoKICBgYGBqYXZhc2NyaXB0CiAgTXlWaWV3ID0gRW1iZXIuVmlldy5leHRl
        bmQoewogICAgY2xhc3NOYW1lQmluZGluZ3M6IFsnYXdlc29tZTpzby12ZXJ5
        LWNvb2wnXSwKICAgIGF3ZXNvbWU6IHRydWUKICB9KTsKICBgYGAKCiAgV2ls
        bCByZXN1bHQgaW4gdmlldyBpbnN0YW5jZXMgd2l0aCBhbiBIVE1MIHJlcHJl
        c2VudGF0aW9uIG9mOgoKICBgYGBodG1sCiAgPGRpdiBpZD0iZW1iZXIxIiBj
        bGFzcz0iZW1iZXItdmlldyBzby12ZXJ5LWNvb2wiPjwvZGl2PgogIGBgYAoK
        ICBCb29sZWFuIHZhbHVlIGNsYXNzIG5hbWUgYmluZGluZ3Mgd2hvc2UgcHJv
        cGVydHkgbmFtZXMgYXJlIGluIGEKICBjYW1lbENhc2Utc3R5bGUgZm9ybWF0
        IHdpbGwgYmUgY29udmVydGVkIHRvIGEgZGFzaGVyaXplZCBmb3JtYXQ6Cgog
        IGBgYGphdmFzY3JpcHQKICBNeVZpZXcgPSBFbWJlci5WaWV3LmV4dGVuZCh7
        CiAgICBjbGFzc05hbWVCaW5kaW5nczogWydpc1VyZ2VudCddLAogICAgaXNV
        cmdlbnQ6IHRydWUKICB9KTsKICBgYGAKCiAgV2lsbCByZXN1bHQgaW4gdmll
        dyBpbnN0YW5jZXMgd2l0aCBhbiBIVE1MIHJlcHJlc2VudGF0aW9uIG9mOgoK
        ICBgYGBodG1sCiAgPGRpdiBpZD0iZW1iZXIxIiBjbGFzcz0iZW1iZXItdmll
        dyBpcy11cmdlbnQiPjwvZGl2PgogIGBgYAoKICBDbGFzcyBuYW1lIGJpbmRp
        bmdzIGNhbiBhbHNvIHJlZmVyIHRvIG9iamVjdCB2YWx1ZXMgdGhhdCBhcmUg
        Zm91bmQgYnkKICB0cmF2ZXJzaW5nIGEgcGF0aCByZWxhdGl2ZSB0byB0aGUg
        dmlldyBpdHNlbGY6CgogIGBgYGphdmFzY3JpcHQKICBNeVZpZXcgPSBFbWJl
        ci5WaWV3LmV4dGVuZCh7CiAgICBjbGFzc05hbWVCaW5kaW5nczogWydtZXNz
        YWdlcy5lbXB0eSddCiAgICBtZXNzYWdlczogRW1iZXIuT2JqZWN0LmNyZWF0
        ZSh7CiAgICAgIGVtcHR5OiB0cnVlCiAgICB9KQogIH0pOwogIGBgYAoKICBX
        aWxsIHJlc3VsdCBpbiB2aWV3IGluc3RhbmNlcyB3aXRoIGFuIEhUTUwgcmVw
        cmVzZW50YXRpb24gb2Y6CgogIGBgYGh0bWwKICA8ZGl2IGlkPSJlbWJlcjEi
        IGNsYXNzPSJlbWJlci12aWV3IGVtcHR5Ij48L2Rpdj4KICBgYGAKCiAgSWYg
        eW91IHdhbnQgdG8gYWRkIGEgY2xhc3MgbmFtZSBmb3IgYSBwcm9wZXJ0eSB3
        aGljaCBldmFsdWF0ZXMgdG8gdHJ1ZSBhbmQKICBhbmQgYSBkaWZmZXJlbnQg
        Y2xhc3MgbmFtZSBpZiBpdCBldmFsdWF0ZXMgdG8gZmFsc2UsIHlvdSBjYW4g
        cGFzcyBhIGJpbmRpbmcKICBsaWtlIHRoaXM6CgogIGBgYGphdmFzY3JpcHQK
        ICAvLyBBcHBsaWVzICdlbmFibGVkJyBjbGFzcyB3aGVuIGlzRW5hYmxlZCBp
        cyB0cnVlIGFuZCAnZGlzYWJsZWQnIHdoZW4gaXNFbmFibGVkIGlzIGZhbHNl
        CiAgRW1iZXIuVmlldy5leHRlbmQoewogICAgY2xhc3NOYW1lQmluZGluZ3M6
        IFsnaXNFbmFibGVkOmVuYWJsZWQ6ZGlzYWJsZWQnXQogICAgaXNFbmFibGVk
        OiB0cnVlCiAgfSk7CiAgYGBgCgogIFdpbGwgcmVzdWx0IGluIHZpZXcgaW5z
        dGFuY2VzIHdpdGggYW4gSFRNTCByZXByZXNlbnRhdGlvbiBvZjoKCiAgYGBg
        aHRtbAogIDxkaXYgaWQ9ImVtYmVyMSIgY2xhc3M9ImVtYmVyLXZpZXcgZW5h
        YmxlZCI+PC9kaXY+CiAgYGBgCgogIFdoZW4gaXNFbmFibGVkIGlzIGBmYWxz
        ZWAsIHRoZSByZXN1bHRpbmcgSFRNTCByZXByZW5zZW50YXRpb24gbG9va3Mg
        bGlrZQogIHRoaXM6CgogIGBgYGh0bWwKICA8ZGl2IGlkPSJlbWJlcjEiIGNs
        YXNzPSJlbWJlci12aWV3IGRpc2FibGVkIj48L2Rpdj4KICBgYGAKCiAgVGhp
        cyBzeW50YXggb2ZmZXJzIHRoZSBjb252ZW5pZW5jZSB0byBhZGQgYSBjbGFz
        cyBpZiBhIHByb3BlcnR5IGlzIGBmYWxzZWA6CgogIGBgYGphdmFzY3JpcHQK
        ICAvLyBBcHBsaWVzIG5vIGNsYXNzIHdoZW4gaXNFbmFibGVkIGlzIHRydWUg
        YW5kIGNsYXNzICdkaXNhYmxlZCcgd2hlbiBpc0VuYWJsZWQgaXMgZmFsc2UK
        ICBFbWJlci5WaWV3LmV4dGVuZCh7CiAgICBjbGFzc05hbWVCaW5kaW5nczog
        Wydpc0VuYWJsZWQ6OmRpc2FibGVkJ10KICAgIGlzRW5hYmxlZDogdHJ1ZQog
        IH0pOwogIGBgYAoKICBXaWxsIHJlc3VsdCBpbiB2aWV3IGluc3RhbmNlcyB3
        aXRoIGFuIEhUTUwgcmVwcmVzZW50YXRpb24gb2Y6CgogIGBgYGh0bWwKICA8
        ZGl2IGlkPSJlbWJlcjEiIGNsYXNzPSJlbWJlci12aWV3Ij48L2Rpdj4KICBg
        YGAKCiAgV2hlbiB0aGUgYGlzRW5hYmxlZGAgcHJvcGVydHkgb24gdGhlIHZp
        ZXcgaXMgc2V0IHRvIGBmYWxzZWAsIGl0IHdpbGwgcmVzdWx0CiAgaW4gdmll
        dyBpbnN0YW5jZXMgd2l0aCBhbiBIVE1MIHJlcHJlc2VudGF0aW9uIG9mOgoK
        ICBgYGBodG1sCiAgPGRpdiBpZD0iZW1iZXIxIiBjbGFzcz0iZW1iZXItdmll
        dyBkaXNhYmxlZCI+PC9kaXY+CiAgYGBgCgogIFVwZGF0ZXMgdG8gdGhlIHRo
        ZSB2YWx1ZSBvZiBhIGNsYXNzIG5hbWUgYmluZGluZyB3aWxsIHJlc3VsdCBp
        biBhdXRvbWF0aWMKICB1cGRhdGUgb2YgdGhlICBIVE1MIGBjbGFzc2AgYXR0
        cmlidXRlIGluIHRoZSB2aWV3J3MgcmVuZGVyZWQgSFRNTAogIHJlcHJlc2Vu
        dGF0aW9uLiBJZiB0aGUgdmFsdWUgYmVjb21lcyBgZmFsc2VgIG9yIGB1bmRl
        ZmluZWRgIHRoZSBjbGFzcyBuYW1lCiAgd2lsbCBiZSByZW1vdmVkLgoKICBC
        b3RoIGBjbGFzc05hbWVzYCBhbmQgYGNsYXNzTmFtZUJpbmRpbmdzYCBhcmUg
        Y29uY2F0ZW5hdGVkIHByb3BlcnRpZXMuIFNlZQogIFtFbWJlci5PYmplY3Rd
        KC9hcGkvY2xhc3Nlcy9FbWJlci5PYmplY3QuaHRtbCkgZG9jdW1lbnRhdGlv
        biBmb3IgbW9yZQogIGluZm9ybWF0aW9uIGFib3V0IGNvbmNhdGVuYXRlZCBw
        cm9wZXJ0aWVzLgoKICAjIyBIVE1MIEF0dHJpYnV0ZXMKCiAgVGhlIEhUTUwg
        YXR0cmlidXRlIHNlY3Rpb24gb2YgYSB2aWV3J3MgdGFnIGNhbiBiZSBzZXQg
        YnkgcHJvdmlkaW5nIGFuCiAgYGF0dHJpYnV0ZUJpbmRpbmdzYCBwcm9wZXJ0
        eSBzZXQgdG8gYW4gYXJyYXkgb2YgcHJvcGVydHkgbmFtZXMgb24gdGhlIHZp
        ZXcuCiAgVGhlIHJldHVybiB2YWx1ZSBvZiB0aGVzZSBwcm9wZXJ0aWVzIHdp
        bGwgYmUgdXNlZCBhcyB0aGUgdmFsdWUgb2YgdGhlIHZpZXcncwogIEhUTUwg
        YXNzb2NpYXRlZCBhdHRyaWJ1dGU6CgogIGBgYGphdmFzY3JpcHQKICBBbmNo
        b3JWaWV3ID0gRW1iZXIuVmlldy5leHRlbmQoewogICAgdGFnTmFtZTogJ2En
        LAogICAgYXR0cmlidXRlQmluZGluZ3M6IFsnaHJlZiddLAogICAgaHJlZjog
        J2h0dHA6Ly9nb29nbGUuY29tJwogIH0pOwogIGBgYAoKICBXaWxsIHJlc3Vs
        dCBpbiB2aWV3IGluc3RhbmNlcyB3aXRoIGFuIEhUTUwgcmVwcmVzZW50YXRp
        b24gb2Y6CgogIGBgYGh0bWwKICA8YSBpZD0iZW1iZXIxIiBjbGFzcz0iZW1i
        ZXItdmlldyIgaHJlZj0iaHR0cDovL2dvb2dsZS5jb20iPjwvYT4KICBgYGAK
        CiAgSWYgdGhlIHJldHVybiB2YWx1ZSBvZiBhbiBgYXR0cmlidXRlQmluZGlu
        Z3NgIG1vbml0b3JlZCBwcm9wZXJ0eSBpcyBhIGJvb2xlYW4KICB0aGUgcHJv
        cGVydHkgd2lsbCBmb2xsb3cgSFRNTCdzIHBhdHRlcm4gb2YgcmVwZWF0aW5n
        IHRoZSBhdHRyaWJ1dGUncyBuYW1lIGFzCiAgaXRzIHZhbHVlOgoKICBgYGBq
        YXZhc2NyaXB0CiAgTXlUZXh0SW5wdXQgPSBFbWJlci5WaWV3LmV4dGVuZCh7
        CiAgICB0YWdOYW1lOiAnaW5wdXQnLAogICAgYXR0cmlidXRlQmluZGluZ3M6
        IFsnZGlzYWJsZWQnXSwKICAgIGRpc2FibGVkOiB0cnVlCiAgfSk7CiAgYGBg
        CgogIFdpbGwgcmVzdWx0IGluIHZpZXcgaW5zdGFuY2VzIHdpdGggYW4gSFRN
        TCByZXByZXNlbnRhdGlvbiBvZjoKCiAgYGBgaHRtbAogIDxpbnB1dCBpZD0i
        ZW1iZXIxIiBjbGFzcz0iZW1iZXItdmlldyIgZGlzYWJsZWQ9ImRpc2FibGVk
        IiAvPgogIGBgYAoKICBgYXR0cmlidXRlQmluZGluZ3NgIGNhbiByZWZlciB0
        byBjb21wdXRlZCBwcm9wZXJ0aWVzOgoKICBgYGBqYXZhc2NyaXB0CiAgTXlU
        ZXh0SW5wdXQgPSBFbWJlci5WaWV3LmV4dGVuZCh7CiAgICB0YWdOYW1lOiAn
        aW5wdXQnLAogICAgYXR0cmlidXRlQmluZGluZ3M6IFsnZGlzYWJsZWQnXSwK
        ICAgIGRpc2FibGVkOiBmdW5jdGlvbigpIHsKICAgICAgaWYgKHNvbWVMb2dp
        YykgewogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9IGVsc2UgewogICAg
        ICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgfS5wcm9wZXJ0eSgpCiAg
        fSk7CiAgYGBgCgogIFVwZGF0ZXMgdG8gdGhlIHRoZSBwcm9wZXJ0eSBvZiBh
        biBhdHRyaWJ1dGUgYmluZGluZyB3aWxsIHJlc3VsdCBpbiBhdXRvbWF0aWMK
        ICB1cGRhdGUgb2YgdGhlICBIVE1MIGF0dHJpYnV0ZSBpbiB0aGUgdmlldydz
        IHJlbmRlcmVkIEhUTUwgcmVwcmVzZW50YXRpb24uCgogIGBhdHRyaWJ1dGVC
        aW5kaW5nc2AgaXMgYSBjb25jYXRlbmF0ZWQgcHJvcGVydHkuIFNlZSBbRW1i
        ZXIuT2JqZWN0XSgvYXBpL2NsYXNzZXMvRW1iZXIuT2JqZWN0Lmh0bWwpCiAg
        ZG9jdW1lbnRhdGlvbiBmb3IgbW9yZSBpbmZvcm1hdGlvbiBhYm91dCBjb25j
        YXRlbmF0ZWQgcHJvcGVydGllcy4KCiAgIyMgVGVtcGxhdGVzCgogIFRoZSBI
        VE1MIGNvbnRlbnRzIG9mIGEgdmlldydzIHJlbmRlcmVkIHJlcHJlc2VudGF0
        aW9uIGFyZSBkZXRlcm1pbmVkIGJ5IGl0cwogIHRlbXBsYXRlLiBUZW1wbGF0
        ZXMgY2FuIGJlIGFueSBmdW5jdGlvbiB0aGF0IGFjY2VwdHMgYW4gb3B0aW9u
        YWwgY29udGV4dAogIHBhcmFtZXRlciBhbmQgcmV0dXJucyBhIHN0cmluZyBv
        ZiBIVE1MIHRoYXQgd2lsbCBiZSBpbnNlcnRlZCB3aXRoaW4gdGhlCiAgdmll
        dydzIHRhZy4gTW9zdCB0eXBpY2FsbHkgaW4gRW1iZXIgdGhpcyBmdW5jdGlv
        biB3aWxsIGJlIGEgY29tcGlsZWQKICBgRW1iZXIuSGFuZGxlYmFyc2AgdGVt
        cGxhdGUuCgogIGBgYGphdmFzY3JpcHQKICBBVmlldyA9IEVtYmVyLlZpZXcu
        ZXh0ZW5kKHsKICAgIHRlbXBsYXRlOiBFbWJlci5IYW5kbGViYXJzLmNvbXBp
        bGUoJ0kgYW0gdGhlIHRlbXBsYXRlJykKICB9KTsKICBgYGAKCiAgV2lsbCBy
        ZXN1bHQgaW4gdmlldyBpbnN0YW5jZXMgd2l0aCBhbiBIVE1MIHJlcHJlc2Vu
        dGF0aW9uIG9mOgoKICBgYGBodG1sCiAgPGRpdiBpZD0iZW1iZXIxIiBjbGFz
        cz0iZW1iZXItdmlldyI+SSBhbSB0aGUgdGVtcGxhdGU8L2Rpdj4KICBgYGAK
        CiAgV2l0aGluIGFuIEVtYmVyIGFwcGxpY2F0aW9uIGlzIG1vcmUgY29tbW9u
        IHRvIGRlZmluZSBhIEhhbmRsZWJhcnMgdGVtcGxhdGVzIGFzCiAgcGFydCBv
        ZiBhIHBhZ2U6CgogIGBgYGh0bWwKICA8c2NyaXB0IHR5cGU9J3RleHQveC1o
        YW5kbGViYXJzJyBkYXRhLXRlbXBsYXRlLW5hbWU9J3NvbWUtdGVtcGxhdGUn
        PgogICAgSGVsbG8KICA8L3NjcmlwdD4KICBgYGAKCiAgQW5kIGFzc29jaWF0
        ZSBpdCBieSBuYW1lIHVzaW5nIGEgdmlldydzIGB0ZW1wbGF0ZU5hbWVgIHBy
        b3BlcnR5OgoKICBgYGBqYXZhc2NyaXB0CiAgQVZpZXcgPSBFbWJlci5WaWV3
        LmV4dGVuZCh7CiAgICB0ZW1wbGF0ZU5hbWU6ICdzb21lLXRlbXBsYXRlJwog
        IH0pOwogIGBgYAoKICBJZiB5b3UgaGF2ZSBuZXN0ZWQgcmVzb3VyY2VzLCB5
        b3VyIEhhbmRsZWJhcnMgdGVtcGxhdGUgd2lsbCBsb29rIGxpa2UgdGhpczoK
        CiAgYGBgaHRtbAogIDxzY3JpcHQgdHlwZT0ndGV4dC94LWhhbmRsZWJhcnMn
        IGRhdGEtdGVtcGxhdGUtbmFtZT0ncG9zdHMvbmV3Jz4KICAgIDxoMT5OZXcg
        UG9zdDwvaDE+CiAgPC9zY3JpcHQ+CiAgYGBgCgogIEFuZCBgdGVtcGxhdGVO
        YW1lYCBwcm9wZXJ0eToKCiAgYGBgamF2YXNjcmlwdAogIEFWaWV3ID0gRW1i
        ZXIuVmlldy5leHRlbmQoewogICAgdGVtcGxhdGVOYW1lOiAncG9zdHMvbmV3
        JwogIH0pOwogIGBgYAoKICBVc2luZyBhIHZhbHVlIGZvciBgdGVtcGxhdGVO
        YW1lYCB0aGF0IGRvZXMgbm90IGhhdmUgYSBIYW5kbGViYXJzIHRlbXBsYXRl
        CiAgd2l0aCBhIG1hdGNoaW5nIGBkYXRhLXRlbXBsYXRlLW5hbWVgIGF0dHJp
        YnV0ZSB3aWxsIHRocm93IGFuIGVycm9yLgoKICBGb3Igdmlld3MgY2xhc3Nl
        cyB0aGF0IG1heSBoYXZlIGEgdGVtcGxhdGUgbGF0ZXIgZGVmaW5lZCAoZS5n
        LiBhcyB0aGUgYmxvY2sKICBwb3J0aW9uIG9mIGEgYHt7dmlld319YCBIYW5k
        bGViYXJzIGhlbHBlciBjYWxsIGluIGFub3RoZXIgdGVtcGxhdGUgb3IgaW4K
        ICBhIHN1YmNsYXNzKSwgeW91IGNhbiBwcm92aWRlIGEgYGRlZmF1bHRUZW1w
        bGF0ZWAgcHJvcGVydHkgc2V0IHRvIGNvbXBpbGVkCiAgdGVtcGxhdGUgZnVu
        Y3Rpb24uIElmIGEgdGVtcGxhdGUgaXMgbm90IGxhdGVyIHByb3ZpZGVkIGZv
        ciB0aGUgdmlldyBpbnN0YW5jZQogIHRoZSBgZGVmYXVsdFRlbXBsYXRlYCB2
        YWx1ZSB3aWxsIGJlIHVzZWQ6CgogIGBgYGphdmFzY3JpcHQKICBBVmlldyA9
        IEVtYmVyLlZpZXcuZXh0ZW5kKHsKICAgIGRlZmF1bHRUZW1wbGF0ZTogRW1i
        ZXIuSGFuZGxlYmFycy5jb21waWxlKCdJIHdhcyB0aGUgZGVmYXVsdCcpLAog
        ICAgdGVtcGxhdGU6IG51bGwsCiAgICB0ZW1wbGF0ZU5hbWU6IG51bGwKICB9
        KTsKICBgYGAKCiAgV2lsbCByZXN1bHQgaW4gaW5zdGFuY2VzIHdpdGggYW4g
        SFRNTCByZXByZXNlbnRhdGlvbiBvZjoKCiAgYGBgaHRtbAogIDxkaXYgaWQ9
        ImVtYmVyMSIgY2xhc3M9ImVtYmVyLXZpZXciPkkgd2FzIHRoZSBkZWZhdWx0
        PC9kaXY+CiAgYGBgCgogIElmIGEgYHRlbXBsYXRlYCBvciBgdGVtcGxhdGVO
        YW1lYCBpcyBwcm92aWRlZCBpdCB3aWxsIHRha2UgcHJlY2VkZW5jZSBvdmVy
        CiAgYGRlZmF1bHRUZW1wbGF0ZWA6CgogIGBgYGphdmFzY3JpcHQKICBBVmll
        dyA9IEVtYmVyLlZpZXcuZXh0ZW5kKHsKICAgIGRlZmF1bHRUZW1wbGF0ZTog
        RW1iZXIuSGFuZGxlYmFycy5jb21waWxlKCdJIHdhcyB0aGUgZGVmYXVsdCcp
        CiAgfSk7CgogIGFWaWV3ID0gQVZpZXcuY3JlYXRlKHsKICAgIHRlbXBsYXRl
        OiBFbWJlci5IYW5kbGViYXJzLmNvbXBpbGUoJ0kgd2FzIHRoZSB0ZW1wbGF0
        ZSwgbm90IGRlZmF1bHQnKQogIH0pOwogIGBgYAoKICBXaWxsIHJlc3VsdCBp
        biB0aGUgZm9sbG93aW5nIEhUTUwgcmVwcmVzZW50YXRpb24gd2hlbiByZW5k
        ZXJlZDoKCiAgYGBgaHRtbAogIDxkaXYgaWQ9ImVtYmVyMSIgY2xhc3M9ImVt
        YmVyLXZpZXciPkkgd2FzIHRoZSB0ZW1wbGF0ZSwgbm90IGRlZmF1bHQ8L2Rp
        dj4KICBgYGAKCiAgIyMgVmlldyBDb250ZXh0CgogIFRoZSBkZWZhdWx0IGNv
        bnRleHQgb2YgdGhlIGNvbXBpbGVkIHRlbXBsYXRlIGlzIHRoZSB2aWV3J3Mg
        Y29udHJvbGxlcjoKCiAgYGBgamF2YXNjcmlwdAogIEFWaWV3ID0gRW1iZXIu
        Vmlldy5leHRlbmQoewogICAgdGVtcGxhdGU6IEVtYmVyLkhhbmRsZWJhcnMu
        Y29tcGlsZSgnSGVsbG8ge3tleGNpdGVkR3JlZXRpbmd9fScpCiAgfSk7Cgog
        IGFDb250cm9sbGVyID0gRW1iZXIuT2JqZWN0LmNyZWF0ZSh7CiAgICBmaXJz
        dE5hbWU6ICdCYXJyeScsCiAgICBleGNpdGVkR3JlZXRpbmc6IGZ1bmN0aW9u
        KCkgewogICAgICByZXR1cm4gdGhpcy5nZXQoImNvbnRlbnQuZmlyc3ROYW1l
        IikgKyAiISEhIgogICAgfS5wcm9wZXJ0eSgpCiAgfSk7CgogIGFWaWV3ID0g
        QVZpZXcuY3JlYXRlKHsKICAgIGNvbnRyb2xsZXI6IGFDb250cm9sbGVyLAog
        IH0pOwogIGBgYAoKICBXaWxsIHJlc3VsdCBpbiBhbiBIVE1MIHJlcHJlc2Vu
        dGF0aW9uIG9mOgoKICBgYGBodG1sCiAgPGRpdiBpZD0iZW1iZXIxIiBjbGFz
        cz0iZW1iZXItdmlldyI+SGVsbG8gQmFycnkhISE8L2Rpdj4KICBgYGAKCiAg
        QSBjb250ZXh0IGNhbiBhbHNvIGJlIGV4cGxpY2l0bHkgc3VwcGxpZWQgdGhy
        b3VnaCB0aGUgdmlldydzIGBjb250ZXh0YAogIHByb3BlcnR5LiBJZiB0aGUg
        dmlldyBoYXMgbmVpdGhlciBgY29udGV4dGAgbm9yIGBjb250cm9sbGVyYCBw
        cm9wZXJ0aWVzLCB0aGUKICBgcGFyZW50Vmlld2AncyBjb250ZXh0IHdpbGwg
        YmUgdXNlZC4KCiAgIyMgTGF5b3V0cwoKICBWaWV3cyBjYW4gaGF2ZSBhIHNl
        Y29uZGFyeSB0ZW1wbGF0ZSB0aGF0IHdyYXBzIHRoZWlyIG1haW4gdGVtcGxh
        dGUuIExpa2UKICBwcmltYXJ5IHRlbXBsYXRlcywgbGF5b3V0cyBjYW4gYmUg
        YW55IGZ1bmN0aW9uIHRoYXQgIGFjY2VwdHMgYW4gb3B0aW9uYWwKICBjb250
        ZXh0IHBhcmFtZXRlciBhbmQgcmV0dXJucyBhIHN0cmluZyBvZiBIVE1MIHRo
        YXQgd2lsbCBiZSBpbnNlcnRlZCBpbnNpZGUKICB2aWV3J3MgdGFnLiBWaWV3
        cyB3aG9zZSBIVE1MIGVsZW1lbnQgaXMgc2VsZiBjbG9zaW5nIChlLmcuIGA8
        aW5wdXQgLz5gKQogIGNhbm5vdCBoYXZlIGEgbGF5b3V0IGFuZCB0aGlzIHBy
        b3BlcnR5IHdpbGwgYmUgaWdub3JlZC4KCiAgTW9zdCB0eXBpY2FsbHkgaW4g
        RW1iZXIgYSBsYXlvdXQgd2lsbCBiZSBhIGNvbXBpbGVkIGBFbWJlci5IYW5k
        bGViYXJzYAogIHRlbXBsYXRlLgoKICBBIHZpZXcncyBsYXlvdXQgY2FuIGJl
        IHNldCBkaXJlY3RseSB3aXRoIHRoZSBgbGF5b3V0YCBwcm9wZXJ0eSBvciBy
        ZWZlcmVuY2UKICBhbiBleGlzdGluZyBIYW5kbGViYXJzIHRlbXBsYXRlIGJ5
        IG5hbWUgd2l0aCB0aGUgYGxheW91dE5hbWVgIHByb3BlcnR5LgoKICBBIHRl
        bXBsYXRlIHVzZWQgYXMgYSBsYXlvdXQgbXVzdCBjb250YWluIGEgc2luZ2xl
        IHVzZSBvZiB0aGUgSGFuZGxlYmFycwogIGB7e3lpZWxkfX1gIGhlbHBlci4g
        VGhlIEhUTUwgY29udGVudHMgb2YgYSB2aWV3J3MgcmVuZGVyZWQgYHRlbXBs
        YXRlYCB3aWxsIGJlCiAgaW5zZXJ0ZWQgYXQgdGhpcyBsb2NhdGlvbjoKCiAg
        YGBgamF2YXNjcmlwdAogIEFWaWV3V2l0aExheW91dCA9IEVtYmVyLlZpZXcu
        ZXh0ZW5kKHsKICAgIGxheW91dDogRW1iZXIuSGFuZGxlYmFycy5jb21waWxl
        KCI8ZGl2IGNsYXNzPSdteS1kZWNvcmF0aXZlLWNsYXNzJz57e3lpZWxkfX08
        L2Rpdj4iKQogICAgdGVtcGxhdGU6IEVtYmVyLkhhbmRsZWJhcnMuY29tcGls
        ZSgiSSBnb3Qgd3JhcHBlZCIpLAogIH0pOwogIGBgYAoKICBXaWxsIHJlc3Vs
        dCBpbiB2aWV3IGluc3RhbmNlcyB3aXRoIGFuIEhUTUwgcmVwcmVzZW50YXRp
        b24gb2Y6CgogIGBgYGh0bWwKICA8ZGl2IGlkPSJlbWJlcjEiIGNsYXNzPSJl
        bWJlci12aWV3Ij4KICAgIDxkaXYgY2xhc3M9Im15LWRlY29yYXRpdmUtY2xh
        c3MiPgogICAgICBJIGdvdCB3cmFwcGVkCiAgICA8L2Rpdj4KICA8L2Rpdj4K
        ICBgYGAKCiAgU2VlIFtFbWJlci5IYW5kbGViYXJzLmhlbHBlcnMueWllbGRd
        KC9hcGkvY2xhc3Nlcy9FbWJlci5IYW5kbGViYXJzLmhlbHBlcnMuaHRtbCNt
        ZXRob2RfeWllbGQpCiAgZm9yIG1vcmUgaW5mb3JtYXRpb24uCgogICMjIFJl
        c3BvbmRpbmcgdG8gQnJvd3NlciBFdmVudHMKCiAgVmlld3MgY2FuIHJlc3Bv
        bmQgdG8gdXNlci1pbml0aWF0ZWQgZXZlbnRzIGluIG9uZSBvZiB0aHJlZSB3
        YXlzOiBtZXRob2QKICBpbXBsZW1lbnRhdGlvbiwgdGhyb3VnaCBhbiBldmVu
        dCBtYW5hZ2VyLCBhbmQgdGhyb3VnaCBge3thY3Rpb259fWAgaGVscGVyIHVz
        ZQogIGluIHRoZWlyIHRlbXBsYXRlIG9yIGxheW91dC4KCiAgIyMjIE1ldGhv
        ZCBJbXBsZW1lbnRhdGlvbgoKICBWaWV3cyBjYW4gcmVzcG9uZCB0byB1c2Vy
        LWluaXRpYXRlZCBldmVudHMgYnkgaW1wbGVtZW50aW5nIGEgbWV0aG9kIHRo
        YXQKICBtYXRjaGVzIHRoZSBldmVudCBuYW1lLiBBIGBqUXVlcnkuRXZlbnRg
        IG9iamVjdCB3aWxsIGJlIHBhc3NlZCBhcyB0aGUKICBhcmd1bWVudCB0byB0
        aGlzIG1ldGhvZC4KCiAgYGBgamF2YXNjcmlwdAogIEFWaWV3ID0gRW1iZXIu
        Vmlldy5leHRlbmQoewogICAgY2xpY2s6IGZ1bmN0aW9uKGV2ZW50KSB7CiAg
        ICAgIC8vIHdpbGwgYmUgY2FsbGVkIHdoZW4gd2hlbiBhbiBpbnN0YW5jZSdz
        CiAgICAgIC8vIHJlbmRlcmVkIGVsZW1lbnQgaXMgY2xpY2tlZAogICAgfQog
        IH0pOwogIGBgYAoKICAjIyMgRXZlbnQgTWFuYWdlcnMKCiAgVmlld3MgY2Fu
        IGRlZmluZSBhbiBvYmplY3QgYXMgdGhlaXIgYGV2ZW50TWFuYWdlcmAgcHJv
        cGVydHkuIFRoaXMgb2JqZWN0IGNhbgogIHRoZW4gaW1wbGVtZW50IG1ldGhv
        ZHMgdGhhdCBtYXRjaCB0aGUgZGVzaXJlZCBldmVudCBuYW1lcy4gTWF0Y2hp
        bmcgZXZlbnRzCiAgdGhhdCBvY2N1ciBvbiB0aGUgdmlldydzIHJlbmRlcmVk
        IEhUTUwgb3IgdGhlIHJlbmRlcmVkIEhUTUwgb2YgYW55IG9mIGl0cyBET00K
        ICBkZXNjZW5kYW50cyB3aWxsIHRyaWdnZXIgdGhpcyBtZXRob2QuIEEgYGpR
        dWVyeS5FdmVudGAgb2JqZWN0IHdpbGwgYmUgcGFzc2VkCiAgYXMgdGhlIGZp
        cnN0IGFyZ3VtZW50IHRvIHRoZSBtZXRob2QgYW5kIGFuICBgRW1iZXIuVmll
        d2Agb2JqZWN0IGFzIHRoZQogIHNlY29uZC4gVGhlIGBFbWJlci5WaWV3YCB3
        aWxsIGJlIHRoZSB2aWV3IHdob3NlIHJlbmRlcmVkIEhUTUwgd2FzIGludGVy
        YWN0ZWQKICB3aXRoLiBUaGlzIG1heSBiZSB0aGUgdmlldyB3aXRoIHRoZSBg
        ZXZlbnRNYW5hZ2VyYCBwcm9wZXJ0eSBvciBvbmUgb2YgaXRzCiAgZGVzY2Vu
        ZGVudCB2aWV3cy4KCiAgYGBgamF2YXNjcmlwdAogIEFWaWV3ID0gRW1iZXIu
        Vmlldy5leHRlbmQoewogICAgZXZlbnRNYW5hZ2VyOiBFbWJlci5PYmplY3Qu
        Y3JlYXRlKHsKICAgICAgZG91YmxlQ2xpY2s6IGZ1bmN0aW9uKGV2ZW50LCB2
        aWV3KSB7CiAgICAgICAgLy8gd2lsbCBiZSBjYWxsZWQgd2hlbiB3aGVuIGFu
        IGluc3RhbmNlJ3MKICAgICAgICAvLyByZW5kZXJlZCBlbGVtZW50IG9yIGFu
        eSByZW5kZXJpbmcKICAgICAgICAvLyBvZiB0aGlzIHZpZXdzJ3MgZGVzY2Vu
        ZGVudAogICAgICAgIC8vIGVsZW1lbnRzIGlzIGNsaWNrZWQKICAgICAgfQog
        ICAgfSkKICB9KTsKICBgYGAKCiAgQW4gZXZlbnQgZGVmaW5lZCBmb3IgYW4g
        ZXZlbnQgbWFuYWdlciB0YWtlcyBwcmVjZWRlbmNlIG92ZXIgZXZlbnRzIG9m
        IHRoZQogIHNhbWUgbmFtZSBoYW5kbGVkIHRocm91Z2ggbWV0aG9kcyBvbiB0
        aGUgdmlldy4KCiAgYGBgamF2YXNjcmlwdAogIEFWaWV3ID0gRW1iZXIuVmll
        dy5leHRlbmQoewogICAgbW91c2VFbnRlcjogZnVuY3Rpb24oZXZlbnQpIHsK
        ICAgICAgLy8gd2lsbCBuZXZlciB0cmlnZ2VyLgogICAgfSwKICAgIGV2ZW50
        TWFuYWdlcjogRW1iZXIuT2JqZWN0LmNyZWF0ZSh7CiAgICAgIG1vdXNlRW50
        ZXI6IGZ1bmN0aW9uKGV2ZW50LCB2aWV3KSB7CiAgICAgICAgLy8gdGFrZXMg
        cHJlY2VkZW5jZSBvdmVyIEFWaWV3I21vdXNlRW50ZXIKICAgICAgfQogICAg
        fSkKICB9KTsKICBgYGAKCiAgU2ltaWxhcmx5IGEgdmlldydzIGV2ZW50IG1h
        bmFnZXIgd2lsbCB0YWtlIHByZWNlZGVuY2UgZm9yIGV2ZW50cyBvZiBhbnkg
        dmlld3MKICByZW5kZXJlZCBhcyBhIGRlc2NlbmRlbnQuIEEgbWV0aG9kIG5h
        bWUgdGhhdCBtYXRjaGVzIGFuIGV2ZW50IG5hbWUgd2lsbCBub3QKICBiZSBj
        YWxsZWQgaWYgdGhlIHZpZXcgaW5zdGFuY2Ugd2FzIHJlbmRlcmVkIGluc2lk
        ZSB0aGUgSFRNTCByZXByZXNlbnRhdGlvbiBvZgogIGEgdmlldyB0aGF0IGhh
        cyBhbiBgZXZlbnRNYW5hZ2VyYCBwcm9wZXJ0eSBkZWZpbmVkIHRoYXQgaGFu
        ZGxlcyBldmVudHMgb2YgdGhlCiAgbmFtZS4gRXZlbnRzIG5vdCBoYW5kbGVk
        IGJ5IHRoZSBldmVudCBtYW5hZ2VyIHdpbGwgc3RpbGwgdHJpZ2dlciBtZXRo
        b2QgY2FsbHMKICBvbiB0aGUgZGVzY2VuZGVudC4KCiAgYGBgamF2YXNjcmlw
        dAogIE91dGVyVmlldyA9IEVtYmVyLlZpZXcuZXh0ZW5kKHsKICAgIHRlbXBs
        YXRlOiBFbWJlci5IYW5kbGViYXJzLmNvbXBpbGUoIm91dGVyIHt7I3ZpZXcg
        SW5uZXJWaWV3fX1pbm5lcnt7L3ZpZXd9fSBvdXRlciIpLAogICAgZXZlbnRN
        YW5hZ2VyOiBFbWJlci5PYmplY3QuY3JlYXRlKHsKICAgICAgbW91c2VFbnRl
        cjogZnVuY3Rpb24oZXZlbnQsIHZpZXcpIHsKICAgICAgICAvLyB2aWV3IG1p
        Z2h0IGJlIGluc3RhbmNlIG9mIGVpdGhlcgogICAgICAgIC8vIE91dGVyVmll
        dyBvciBJbm5lclZpZXcgZGVwZW5kaW5nIG9uCiAgICAgICAgLy8gd2hlcmUg
        b24gdGhlIHBhZ2UgdGhlIHVzZXIgaW50ZXJhY3Rpb24gb2NjdXJlZAogICAg
        ICB9CiAgICB9KQogIH0pOwoKICBJbm5lclZpZXcgPSBFbWJlci5WaWV3LmV4
        dGVuZCh7CiAgICBjbGljazogZnVuY3Rpb24oZXZlbnQpIHsKICAgICAgLy8g
        d2lsbCBiZSBjYWxsZWQgaWYgcmVuZGVyZWQgaW5zaWRlCiAgICAgIC8vIGFu
        IE91dGVyVmlldyBiZWNhdXNlIE91dGVyVmlldydzCiAgICAgIC8vIGV2ZW50
        TWFuYWdlciBkb2Vzbid0IGhhbmRsZSBjbGljayBldmVudHMKICAgIH0sCiAg
        ICBtb3VzZUVudGVyOiBmdW5jdGlvbihldmVudCkgewogICAgICAvLyB3aWxs
        IG5ldmVyIGJlIGNhbGxlZCBpZiByZW5kZXJlZCBpbnNpZGUKICAgICAgLy8g
        YW4gT3V0ZXJWaWV3LgogICAgfQogIH0pOwogIGBgYAoKICAjIyMgSGFuZGxl
        YmFycyBge3thY3Rpb259fWAgSGVscGVyCgogIFNlZSBbSGFuZGxlYmFycy5o
        ZWxwZXJzLmFjdGlvbl0oL2FwaS9jbGFzc2VzL0VtYmVyLkhhbmRsZWJhcnMu
        aGVscGVycy5odG1sI21ldGhvZF9hY3Rpb24pLgoKICAjIyMgRXZlbnQgTmFt
        ZXMKCiAgQWxsIG9mIHRoZSBldmVudCBoYW5kbGluZyBhcHByb2FjaGVzIGRl
        c2NyaWJlZCBhYm92ZSByZXNwb25kIHRvIHRoZSBzYW1lIHNldAogIG9mIGV2
        ZW50cy4gVGhlIG5hbWVzIG9mIHRoZSBidWlsdC1pbiBldmVudHMgYXJlIGxp
        c3RlZCBiZWxvdy4gKFRoZSBoYXNoIG9mCiAgYnVpbHQtaW4gZXZlbnRzIGV4
        aXN0cyBpbiBgRW1iZXIuRXZlbnREaXNwYXRjaGVyYC4pIEFkZGl0aW9uYWws
        IGN1c3RvbSBldmVudHMKICBjYW4gYmUgcmVnaXN0ZXJlZCBieSB1c2luZyBg
        RW1iZXIuQXBwbGljYXRpb24uY3VzdG9tRXZlbnRzYC4KCiAgVG91Y2ggZXZl
        bnRzOgoKICAqIGB0b3VjaFN0YXJ0YAogICogYHRvdWNoTW92ZWAKICAqIGB0
        b3VjaEVuZGAKICAqIGB0b3VjaENhbmNlbGAKCiAgS2V5Ym9hcmQgZXZlbnRz
        CgogICogYGtleURvd25gCiAgKiBga2V5VXBgCiAgKiBga2V5UHJlc3NgCgog
        IE1vdXNlIGV2ZW50cwoKICAqIGBtb3VzZURvd25gCiAgKiBgbW91c2VVcGAK
        ICAqIGBjb250ZXh0TWVudWAKICAqIGBjbGlja2AKICAqIGBkb3VibGVDbGlj
        a2AKICAqIGBtb3VzZU1vdmVgCiAgKiBgZm9jdXNJbmAKICAqIGBmb2N1c091
        dGAKICAqIGBtb3VzZUVudGVyYAogICogYG1vdXNlTGVhdmVgCgogIEZvcm0g
        ZXZlbnRzOgoKICAqIGBzdWJtaXRgCiAgKiBgY2hhbmdlYAogICogYGZvY3Vz
        SW5gCiAgKiBgZm9jdXNPdXRgCiAgKiBgaW5wdXRgCgogIEhUTUw1IGRyYWcg
        YW5kIGRyb3AgZXZlbnRzOgoKICAqIGBkcmFnU3RhcnRgCiAgKiBgZHJhZ2AK
        ICAqIGBkcmFnRW50ZXJgCiAgKiBgZHJhZ0xlYXZlYAogICogYGRyb3BgCiAg
        KiBgZHJhZ0VuZGAKCiAgIyMgSGFuZGxlYmFycyBge3t2aWV3fX1gIEhlbHBl
        cgoKICBPdGhlciBgRW1iZXIuVmlld2AgaW5zdGFuY2VzIGNhbiBiZSBpbmNs
        dWRlZCBhcyBwYXJ0IG9mIGEgdmlldydzIHRlbXBsYXRlIGJ5CiAgdXNpbmcg
        dGhlIGB7e3ZpZXd9fWAgSGFuZGxlYmFycyBoZWxwZXIuIFNlZSBbRW1iZXIu
        SGFuZGxlYmFycy5oZWxwZXJzLnZpZXddKC9hcGkvY2xhc3Nlcy9FbWJlci5I
        YW5kbGViYXJzLmhlbHBlcnMuaHRtbCNtZXRob2RfdmlldykKICBmb3IgYWRk
        aXRpb25hbCBpbmZvcm1hdGlvbi4KCiAgQGNsYXNzIFZpZXcKICBAbmFtZXNw
        YWNlIEVtYmVyCiAgQGV4dGVuZHMgRW1iZXIuQ29yZVZpZXcKKi8KRW1iZXIu
        VmlldyA9IEVtYmVyLkNvcmVWaWV3LmV4dGVuZCh7CgogIGNvbmNhdGVuYXRl
        ZFByb3BlcnRpZXM6IFsnY2xhc3NOYW1lcycsICdjbGFzc05hbWVCaW5kaW5n
        cycsICdhdHRyaWJ1dGVCaW5kaW5ncyddLAoKICAvKioKICAgIEBwcm9wZXJ0
        eSBpc1ZpZXcKICAgIEB0eXBlIEJvb2xlYW4KICAgIEBkZWZhdWx0IHRydWUK
        ICAgIEBzdGF0aWMKICAqLwogIGlzVmlldzogdHJ1ZSwKCiAgLy8gLi4uLi4u
        Li4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4u
        Li4uLi4uLgogIC8vIFRFTVBMQVRFIFNVUFBPUlQKICAvLwoKICAvKioKICAg
        IFRoZSBuYW1lIG9mIHRoZSB0ZW1wbGF0ZSB0byBsb29rdXAgaWYgbm8gdGVt
        cGxhdGUgaXMgcHJvdmlkZWQuCgogICAgQnkgZGVmYXVsdCBgRW1iZXIuVmll
        d2Agd2lsbCBsb29rdXAgYSB0ZW1wbGF0ZSB3aXRoIHRoaXMgbmFtZSBpbgog
        ICAgYEVtYmVyLlRFTVBMQVRFU2AgKGEgc2hhcmVkIGdsb2JhbCBvYmplY3Qp
        LgoKICAgIEBwcm9wZXJ0eSB0ZW1wbGF0ZU5hbWUKICAgIEB0eXBlIFN0cmlu
        ZwogICAgQGRlZmF1bHQgbnVsbAogICovCiAgdGVtcGxhdGVOYW1lOiBudWxs
        LAoKICAvKioKICAgIFRoZSBuYW1lIG9mIHRoZSBsYXlvdXQgdG8gbG9va3Vw
        IGlmIG5vIGxheW91dCBpcyBwcm92aWRlZC4KCiAgICBCeSBkZWZhdWx0IGBF
        bWJlci5WaWV3YCB3aWxsIGxvb2t1cCBhIHRlbXBsYXRlIHdpdGggdGhpcyBu
        YW1lIGluCiAgICBgRW1iZXIuVEVNUExBVEVTYCAoYSBzaGFyZWQgZ2xvYmFs
        IG9iamVjdCkuCgogICAgQHByb3BlcnR5IGxheW91dE5hbWUKICAgIEB0eXBl
        IFN0cmluZwogICAgQGRlZmF1bHQgbnVsbAogICovCiAgbGF5b3V0TmFtZTog
        bnVsbCwKCiAgLyoqCiAgICBUaGUgdGVtcGxhdGUgdXNlZCB0byByZW5kZXIg
        dGhlIHZpZXcuIFRoaXMgc2hvdWxkIGJlIGEgZnVuY3Rpb24gdGhhdAogICAg
        YWNjZXB0cyBhbiBvcHRpb25hbCBjb250ZXh0IHBhcmFtZXRlciBhbmQgcmV0
        dXJucyBhIHN0cmluZyBvZiBIVE1MIHRoYXQKICAgIHdpbGwgYmUgaW5zZXJ0
        ZWQgaW50byB0aGUgRE9NIHJlbGF0aXZlIHRvIGl0cyBwYXJlbnQgdmlldy4K
        CiAgICBJbiBnZW5lcmFsLCB5b3Ugc2hvdWxkIHNldCB0aGUgYHRlbXBsYXRl
        TmFtZWAgcHJvcGVydHkgaW5zdGVhZCBvZiBzZXR0aW5nCiAgICB0aGUgdGVt
        cGxhdGUgeW91cnNlbGYuCgogICAgQHByb3BlcnR5IHRlbXBsYXRlCiAgICBA
        dHlwZSBGdW5jdGlvbgogICovCiAgdGVtcGxhdGU6IEVtYmVyLmNvbXB1dGVk
        KCd0ZW1wbGF0ZU5hbWUnLCBmdW5jdGlvbihrZXksIHZhbHVlKSB7CiAgICBp
        ZiAodmFsdWUgIT09IHVuZGVmaW5lZCkgeyByZXR1cm4gdmFsdWU7IH0KCiAg
        ICB2YXIgdGVtcGxhdGVOYW1lID0gZ2V0KHRoaXMsICd0ZW1wbGF0ZU5hbWUn
        KSwKICAgICAgICB0ZW1wbGF0ZSA9IHRoaXMudGVtcGxhdGVGb3JOYW1lKHRl
        bXBsYXRlTmFtZSwgJ3RlbXBsYXRlJyk7CgogICAgRW1iZXIuYXNzZXJ0KCJZ
        b3Ugc3BlY2lmaWVkIHRoZSB0ZW1wbGF0ZU5hbWUgIiArIHRlbXBsYXRlTmFt
        ZSArICIgZm9yICIgKyB0aGlzICsgIiwgYnV0IGl0IGRpZCBub3QgZXhpc3Qu
        IiwgIXRlbXBsYXRlTmFtZSB8fCB0ZW1wbGF0ZSk7CgogICAgcmV0dXJuIHRl
        bXBsYXRlIHx8IGdldCh0aGlzLCAnZGVmYXVsdFRlbXBsYXRlJyk7CiAgfSks
        CgogIC8qKgogICAgVGhlIGNvbnRyb2xsZXIgbWFuYWdpbmcgdGhpcyB2aWV3
        LiBJZiB0aGlzIHByb3BlcnR5IGlzIHNldCwgaXQgd2lsbCBiZQogICAgbWFk
        ZSBhdmFpbGFibGUgZm9yIHVzZSBieSB0aGUgdGVtcGxhdGUuCgogICAgQHBy
        b3BlcnR5IGNvbnRyb2xsZXIKICAgIEB0eXBlIE9iamVjdAogICovCiAgY29u
        dHJvbGxlcjogRW1iZXIuY29tcHV0ZWQoJ19wYXJlbnRWaWV3JywgZnVuY3Rp
        b24oa2V5KSB7CiAgICB2YXIgcGFyZW50VmlldyA9IGdldCh0aGlzLCAnX3Bh
        cmVudFZpZXcnKTsKICAgIHJldHVybiBwYXJlbnRWaWV3ID8gZ2V0KHBhcmVu
        dFZpZXcsICdjb250cm9sbGVyJykgOiBudWxsOwogIH0pLAoKICAvKioKICAg
        IEEgdmlldyBtYXkgY29udGFpbiBhIGxheW91dC4gQSBsYXlvdXQgaXMgYSBy
        ZWd1bGFyIHRlbXBsYXRlIGJ1dAogICAgc3VwZXJzZWRlcyB0aGUgYHRlbXBs
        YXRlYCBwcm9wZXJ0eSBkdXJpbmcgcmVuZGVyaW5nLiBJdCBpcyB0aGUKICAg
        IHJlc3BvbnNpYmlsaXR5IG9mIHRoZSBsYXlvdXQgdGVtcGxhdGUgdG8gcmV0
        cmlldmUgdGhlIGB0ZW1wbGF0ZWAKICAgIHByb3BlcnR5IGZyb20gdGhlIHZp
        ZXcgKG9yIGFsdGVybmF0aXZlbHksIGNhbGwgYEhhbmRsZWJhcnMuaGVscGVy
        cy55aWVsZGAsCiAgICBge3t5aWVsZH19YCkgdG8gcmVuZGVyIGl0IGluIHRo
        ZSBjb3JyZWN0IGxvY2F0aW9uLgoKICAgIFRoaXMgaXMgdXNlZnVsIGZvciBh
        IHZpZXcgdGhhdCBoYXMgYSBzaGFyZWQgd3JhcHBlciwgYnV0IHdoaWNoIGRl
        bGVnYXRlcwogICAgdGhlIHJlbmRlcmluZyBvZiB0aGUgY29udGVudHMgb2Yg
        dGhlIHdyYXBwZXIgdG8gdGhlIGB0ZW1wbGF0ZWAgcHJvcGVydHkKICAgIG9u
        IGEgc3ViY2xhc3MuCgogICAgQHByb3BlcnR5IGxheW91dAogICAgQHR5cGUg
        RnVuY3Rpb24KICAqLwogIGxheW91dDogRW1iZXIuY29tcHV0ZWQoZnVuY3Rp
        b24oa2V5KSB7CiAgICB2YXIgbGF5b3V0TmFtZSA9IGdldCh0aGlzLCAnbGF5
        b3V0TmFtZScpLAogICAgICAgIGxheW91dCA9IHRoaXMudGVtcGxhdGVGb3JO
        YW1lKGxheW91dE5hbWUsICdsYXlvdXQnKTsKCiAgICBFbWJlci5hc3NlcnQo
        IllvdSBzcGVjaWZpZWQgdGhlIGxheW91dE5hbWUgIiArIGxheW91dE5hbWUg
        KyAiIGZvciAiICsgdGhpcyArICIsIGJ1dCBpdCBkaWQgbm90IGV4aXN0LiIs
        ICFsYXlvdXROYW1lIHx8IGxheW91dCk7CgogICAgcmV0dXJuIGxheW91dCB8
        fCBnZXQodGhpcywgJ2RlZmF1bHRMYXlvdXQnKTsKICB9KS5wcm9wZXJ0eSgn
        bGF5b3V0TmFtZScpLAoKICBfeWllbGQ6IGZ1bmN0aW9uKGNvbnRleHQsIG9w
        dGlvbnMpIHsKICAgIHZhciB0ZW1wbGF0ZSA9IGdldCh0aGlzLCAndGVtcGxh
        dGUnKTsKICAgIGlmICh0ZW1wbGF0ZSkgeyB0ZW1wbGF0ZShjb250ZXh0LCBv
        cHRpb25zKTsgfQogIH0sCgogIHRlbXBsYXRlRm9yTmFtZTogZnVuY3Rpb24o
        bmFtZSwgdHlwZSkgewogICAgaWYgKCFuYW1lKSB7IHJldHVybjsgfQogICAg
        RW1iZXIuYXNzZXJ0KCJ0ZW1wbGF0ZU5hbWVzIGFyZSBub3QgYWxsb3dlZCB0
        byBjb250YWluIHBlcmlvZHM6ICIrbmFtZSwgbmFtZS5pbmRleE9mKCcuJykg
        PT09IC0xKTsKCiAgICAvLyB0aGUgZGVmYXVsdENvbnRhaW5lciBpcyBkZXBy
        ZWNhdGVkCiAgICB2YXIgY29udGFpbmVyID0gdGhpcy5jb250YWluZXIgfHwg
        KEVtYmVyLkNvbnRhaW5lciAmJiBFbWJlci5Db250YWluZXIuZGVmYXVsdENv
        bnRhaW5lcik7CiAgICByZXR1cm4gY29udGFpbmVyICYmIGNvbnRhaW5lci5s
        b29rdXAoJ3RlbXBsYXRlOicgKyBuYW1lKTsKICB9LAoKICAvKioKICAgIFRo
        ZSBvYmplY3QgZnJvbSB3aGljaCB0ZW1wbGF0ZXMgc2hvdWxkIGFjY2VzcyBw
        cm9wZXJ0aWVzLgoKICAgIFRoaXMgb2JqZWN0IHdpbGwgYmUgcGFzc2VkIHRv
        IHRoZSB0ZW1wbGF0ZSBmdW5jdGlvbiBlYWNoIHRpbWUgdGhlIHJlbmRlcgog
        ICAgbWV0aG9kIGlzIGNhbGxlZCwgYnV0IGl0IGlzIHVwIHRvIHRoZSBpbmRp
        dmlkdWFsIGZ1bmN0aW9uIHRvIGRlY2lkZSB3aGF0CiAgICB0byBkbyB3aXRo
        IGl0LgoKICAgIEJ5IGRlZmF1bHQsIHRoaXMgd2lsbCBiZSB0aGUgdmlldydz
        IGNvbnRyb2xsZXIuCgogICAgQHByb3BlcnR5IGNvbnRleHQKICAgIEB0eXBl
        IE9iamVjdAogICovCiAgY29udGV4dDogRW1iZXIuY29tcHV0ZWQoZnVuY3Rp
        b24oa2V5LCB2YWx1ZSkgewogICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09
        IDIpIHsKICAgICAgc2V0KHRoaXMsICdfY29udGV4dCcsIHZhbHVlKTsKICAg
        ICAgcmV0dXJuIHZhbHVlOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIGdl
        dCh0aGlzLCAnX2NvbnRleHQnKTsKICAgIH0KICB9KS52b2xhdGlsZSgpLAoK
        ICAvKioKICAgIFByaXZhdGUgY29weSBvZiB0aGUgdmlldydzIHRlbXBsYXRl
        IGNvbnRleHQuIFRoaXMgY2FuIGJlIHNldCBkaXJlY3RseQogICAgYnkgSGFu
        ZGxlYmFycyB3aXRob3V0IHRyaWdnZXJpbmcgdGhlIG9ic2VydmVyIHRoYXQg
        Y2F1c2VzIHRoZSB2aWV3CiAgICB0byBiZSByZS1yZW5kZXJlZC4KCiAgICBU
        aGUgY29udGV4dCBvZiBhIHZpZXcgaXMgbG9va2VkIHVwIGFzIGZvbGxvd3M6
        CgogICAgMS4gU3VwcGxpZWQgY29udGV4dCAodXN1YWxseSBieSBIYW5kbGVi
        YXJzKQogICAgMi4gU3BlY2lmaWVkIGNvbnRyb2xsZXIKICAgIDMuIGBwYXJl
        bnRWaWV3YCdzIGNvbnRleHQgKGZvciBhIGNoaWxkIG9mIGEgQ29udGFpbmVy
        VmlldykKCiAgICBUaGUgY29kZSBpbiBIYW5kbGViYXJzIHRoYXQgb3ZlcnJp
        ZGVzIHRoZSBgX2NvbnRleHRgIHByb3BlcnR5IGZpcnN0CiAgICBjaGVja3Mg
        dG8gc2VlIHdoZXRoZXIgdGhlIHZpZXcgaGFzIGEgc3BlY2lmaWVkIGNvbnRy
        b2xsZXIuIFRoaXMgaXMKICAgIHNvbWV0aGluZyBvZiBhIGhhY2sgYW5kIHNo
        b3VsZCBiZSByZXZpc2l0ZWQuCgogICAgQHByb3BlcnR5IF9jb250ZXh0CiAg
        ICBAcHJpdmF0ZQogICovCiAgX2NvbnRleHQ6IEVtYmVyLmNvbXB1dGVkKGZ1
        bmN0aW9uKGtleSkgewogICAgdmFyIHBhcmVudFZpZXcsIGNvbnRyb2xsZXI7
        CgogICAgaWYgKGNvbnRyb2xsZXIgPSBnZXQodGhpcywgJ2NvbnRyb2xsZXIn
        KSkgewogICAgICByZXR1cm4gY29udHJvbGxlcjsKICAgIH0KCiAgICBwYXJl
        bnRWaWV3ID0gdGhpcy5fcGFyZW50VmlldzsKICAgIGlmIChwYXJlbnRWaWV3
        KSB7CiAgICAgIHJldHVybiBnZXQocGFyZW50VmlldywgJ19jb250ZXh0Jyk7
        CiAgICB9CgogICAgcmV0dXJuIG51bGw7CiAgfSksCgogIC8qKgogICAgSWYg
        YSB2YWx1ZSB0aGF0IGFmZmVjdHMgdGVtcGxhdGUgcmVuZGVyaW5nIGNoYW5n
        ZXMsIHRoZSB2aWV3IHNob3VsZCBiZQogICAgcmUtcmVuZGVyZWQgdG8gcmVm
        bGVjdCB0aGUgbmV3IHZhbHVlLgoKICAgIEBtZXRob2QgX2NvbnRleHREaWRD
        aGFuZ2UKICAgIEBwcml2YXRlCiAgKi8KICBfY29udGV4dERpZENoYW5nZTog
        RW1iZXIub2JzZXJ2ZXIoJ2NvbnRleHQnLCBmdW5jdGlvbigpIHsKICAgIHRo
        aXMucmVyZW5kZXIoKTsKICB9KSwKCiAgLyoqCiAgICBJZiBgZmFsc2VgLCB0
        aGUgdmlldyB3aWxsIGFwcGVhciBoaWRkZW4gaW4gRE9NLgoKICAgIEBwcm9w
        ZXJ0eSBpc1Zpc2libGUKICAgIEB0eXBlIEJvb2xlYW4KICAgIEBkZWZhdWx0
        IG51bGwKICAqLwogIGlzVmlzaWJsZTogdHJ1ZSwKCiAgLyoqCiAgICBBcnJh
        eSBvZiBjaGlsZCB2aWV3cy4gWW91IHNob3VsZCBuZXZlciBlZGl0IHRoaXMg
        YXJyYXkgZGlyZWN0bHkuCiAgICBJbnN0ZWFkLCB1c2UgYGFwcGVuZENoaWxk
        YCBhbmQgYHJlbW92ZUZyb21QYXJlbnRgLgoKICAgIEBwcm9wZXJ0eSBjaGls
        ZFZpZXdzCiAgICBAdHlwZSBBcnJheQogICAgQGRlZmF1bHQgW10KICAgIEBw
        cml2YXRlCiAgKi8KICBjaGlsZFZpZXdzOiBjaGlsZFZpZXdzUHJvcGVydHks
        CgogIF9jaGlsZFZpZXdzOiBFTVBUWV9BUlJBWSwKCiAgLy8gV2hlbiBpdCdz
        IGEgdmlydHVhbCB2aWV3LCB3ZSBuZWVkIHRvIG5vdGlmeSB0aGUgcGFyZW50
        IHRoYXQgdGhlaXIKICAvLyBjaGlsZFZpZXdzIHdpbGwgY2hhbmdlLgogIF9j
        aGlsZFZpZXdzV2lsbENoYW5nZTogRW1iZXIuYmVmb3JlT2JzZXJ2ZXIoJ2No
        aWxkVmlld3MnLCBmdW5jdGlvbigpIHsKICAgIGlmICh0aGlzLmlzVmlydHVh
        bCkgewogICAgICB2YXIgcGFyZW50VmlldyA9IGdldCh0aGlzLCAncGFyZW50
        VmlldycpOwogICAgICBpZiAocGFyZW50VmlldykgeyBFbWJlci5wcm9wZXJ0
        eVdpbGxDaGFuZ2UocGFyZW50VmlldywgJ2NoaWxkVmlld3MnKTsgfQogICAg
        fQogIH0pLAoKICAvLyBXaGVuIGl0J3MgYSB2aXJ0dWFsIHZpZXcsIHdlIG5l
        ZWQgdG8gbm90aWZ5IHRoZSBwYXJlbnQgdGhhdCB0aGVpcgogIC8vIGNoaWxk
        Vmlld3MgZGlkIGNoYW5nZS4KICBfY2hpbGRWaWV3c0RpZENoYW5nZTogRW1i
        ZXIub2JzZXJ2ZXIoJ2NoaWxkVmlld3MnLCBmdW5jdGlvbigpIHsKICAgIGlm
        ICh0aGlzLmlzVmlydHVhbCkgewogICAgICB2YXIgcGFyZW50VmlldyA9IGdl
        dCh0aGlzLCAncGFyZW50VmlldycpOwogICAgICBpZiAocGFyZW50Vmlldykg
        eyBFbWJlci5wcm9wZXJ0eURpZENoYW5nZShwYXJlbnRWaWV3LCAnY2hpbGRW
        aWV3cycpOyB9CiAgICB9CiAgfSksCgogIC8qKgogICAgUmV0dXJuIHRoZSBu
        ZWFyZXN0IGFuY2VzdG9yIHRoYXQgaXMgYW4gaW5zdGFuY2Ugb2YgdGhlIHBy
        b3ZpZGVkCiAgICBjbGFzcy4KCiAgICBAcHJvcGVydHkgbmVhcmVzdEluc3Rh
        bmNlT2YKICAgIEBwYXJhbSB7Q2xhc3N9IGtsYXNzIFN1YmNsYXNzIG9mIEVt
        YmVyLlZpZXcgKG9yIEVtYmVyLlZpZXcgaXRzZWxmKQogICAgQHJldHVybiBF
        bWJlci5WaWV3CiAgICBAZGVwcmVjYXRlZAogICovCiAgbmVhcmVzdEluc3Rh
        bmNlT2Y6IGZ1bmN0aW9uKGtsYXNzKSB7CiAgICBFbWJlci5kZXByZWNhdGUo
        Im5lYXJlc3RJbnN0YW5jZU9mIGlzIGRlcHJlY2F0ZWQgYW5kIHdpbGwgYmUg
        cmVtb3ZlZCBmcm9tIGZ1dHVyZSByZWxlYXNlcy4gVXNlIG5lYXJlc3RPZlR5
        cGUuIik7CiAgICB2YXIgdmlldyA9IGdldCh0aGlzLCAncGFyZW50Vmlldycp
        OwoKICAgIHdoaWxlICh2aWV3KSB7CiAgICAgIGlmICh2aWV3IGluc3RhbmNl
        b2Yga2xhc3MpIHsgcmV0dXJuIHZpZXc7IH0KICAgICAgdmlldyA9IGdldCh2
        aWV3LCAncGFyZW50VmlldycpOwogICAgfQogIH0sCgogIC8qKgogICAgUmV0
        dXJuIHRoZSBuZWFyZXN0IGFuY2VzdG9yIHRoYXQgaXMgYW4gaW5zdGFuY2Ug
        b2YgdGhlIHByb3ZpZGVkCiAgICBjbGFzcyBvciBtaXhpbi4KCiAgICBAcHJv
        cGVydHkgbmVhcmVzdE9mVHlwZQogICAgQHBhcmFtIHtDbGFzcyxNaXhpbn0g
        a2xhc3MgU3ViY2xhc3Mgb2YgRW1iZXIuVmlldyAob3IgRW1iZXIuVmlldyBp
        dHNlbGYpLAogICAgICAgICAgIG9yIGFuIGluc3RhbmNlIG9mIEVtYmVyLk1p
        eGluLgogICAgQHJldHVybiBFbWJlci5WaWV3CiAgKi8KICBuZWFyZXN0T2ZU
        eXBlOiBmdW5jdGlvbihrbGFzcykgewogICAgdmFyIHZpZXcgPSBnZXQodGhp
        cywgJ3BhcmVudFZpZXcnKSwKICAgICAgICBpc09mVHlwZSA9IGtsYXNzIGlu
        c3RhbmNlb2YgRW1iZXIuTWl4aW4gPwogICAgICAgICAgICAgICAgICAgZnVu
        Y3Rpb24odmlldykgeyByZXR1cm4ga2xhc3MuZGV0ZWN0KHZpZXcpOyB9IDoK
        ICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKHZpZXcpIHsgcmV0dXJuIGts
        YXNzLmRldGVjdCh2aWV3LmNvbnN0cnVjdG9yKTsgfTsKCiAgICB3aGlsZSAo
        dmlldykgewogICAgICBpZiAoaXNPZlR5cGUodmlldykpIHsgcmV0dXJuIHZp
        ZXc7IH0KICAgICAgdmlldyA9IGdldCh2aWV3LCAncGFyZW50VmlldycpOwog
        ICAgfQogIH0sCgogIC8qKgogICAgUmV0dXJuIHRoZSBuZWFyZXN0IGFuY2Vz
        dG9yIHRoYXQgaGFzIGEgZ2l2ZW4gcHJvcGVydHkuCgogICAgQGZ1bmN0aW9u
        IG5lYXJlc3RXaXRoUHJvcGVydHkKICAgIEBwYXJhbSB7U3RyaW5nfSBwcm9w
        ZXJ0eSBBIHByb3BlcnR5IG5hbWUKICAgIEByZXR1cm4gRW1iZXIuVmlldwog
        ICovCiAgbmVhcmVzdFdpdGhQcm9wZXJ0eTogZnVuY3Rpb24ocHJvcGVydHkp
        IHsKICAgIHZhciB2aWV3ID0gZ2V0KHRoaXMsICdwYXJlbnRWaWV3Jyk7Cgog
        ICAgd2hpbGUgKHZpZXcpIHsKICAgICAgaWYgKHByb3BlcnR5IGluIHZpZXcp
        IHsgcmV0dXJuIHZpZXc7IH0KICAgICAgdmlldyA9IGdldCh2aWV3LCAncGFy
        ZW50VmlldycpOwogICAgfQogIH0sCgogIC8qKgogICAgUmV0dXJuIHRoZSBu
        ZWFyZXN0IGFuY2VzdG9yIHdob3NlIHBhcmVudCBpcyBhbiBpbnN0YW5jZSBv
        ZgogICAgYGtsYXNzYC4KCiAgICBAbWV0aG9kIG5lYXJlc3RDaGlsZE9mCiAg
        ICBAcGFyYW0ge0NsYXNzfSBrbGFzcyBTdWJjbGFzcyBvZiBFbWJlci5WaWV3
        IChvciBFbWJlci5WaWV3IGl0c2VsZikKICAgIEByZXR1cm4gRW1iZXIuVmll
        dwogICovCiAgbmVhcmVzdENoaWxkT2Y6IGZ1bmN0aW9uKGtsYXNzKSB7CiAg
        ICB2YXIgdmlldyA9IGdldCh0aGlzLCAncGFyZW50VmlldycpOwoKICAgIHdo
        aWxlICh2aWV3KSB7CiAgICAgIGlmIChnZXQodmlldywgJ3BhcmVudFZpZXcn
        KSBpbnN0YW5jZW9mIGtsYXNzKSB7IHJldHVybiB2aWV3OyB9CiAgICAgIHZp
        ZXcgPSBnZXQodmlldywgJ3BhcmVudFZpZXcnKTsKICAgIH0KICB9LAoKICAv
        KioKICAgIFdoZW4gdGhlIHBhcmVudCB2aWV3IGNoYW5nZXMsIHJlY3Vyc2l2
        ZWx5IGludmFsaWRhdGUgYGNvbnRyb2xsZXJgCgogICAgQG1ldGhvZCBfcGFy
        ZW50Vmlld0RpZENoYW5nZQogICAgQHByaXZhdGUKICAqLwogIF9wYXJlbnRW
        aWV3RGlkQ2hhbmdlOiBFbWJlci5vYnNlcnZlcignX3BhcmVudFZpZXcnLCBm
        dW5jdGlvbigpIHsKICAgIGlmICh0aGlzLmlzRGVzdHJveWluZykgeyByZXR1
        cm47IH0KCiAgICB0aGlzLnRyaWdnZXIoJ3BhcmVudFZpZXdEaWRDaGFuZ2Un
        KTsKCiAgICBpZiAoZ2V0KHRoaXMsICdwYXJlbnRWaWV3LmNvbnRyb2xsZXIn
        KSAmJiAhZ2V0KHRoaXMsICdjb250cm9sbGVyJykpIHsKICAgICAgdGhpcy5u
        b3RpZnlQcm9wZXJ0eUNoYW5nZSgnY29udHJvbGxlcicpOwogICAgfQogIH0p
        LAoKICBfY29udHJvbGxlckRpZENoYW5nZTogRW1iZXIub2JzZXJ2ZXIoJ2Nv
        bnRyb2xsZXInLCBmdW5jdGlvbigpIHsKICAgIGlmICh0aGlzLmlzRGVzdHJv
        eWluZykgeyByZXR1cm47IH0KCiAgICB0aGlzLnJlcmVuZGVyKCk7CgogICAg
        dGhpcy5mb3JFYWNoQ2hpbGRWaWV3KGZ1bmN0aW9uKHZpZXcpIHsKICAgICAg
        dmlldy5wcm9wZXJ0eURpZENoYW5nZSgnY29udHJvbGxlcicpOwogICAgfSk7
        CiAgfSksCgogIGNsb25lS2V5d29yZHM6IGZ1bmN0aW9uKCkgewogICAgdmFy
        IHRlbXBsYXRlRGF0YSA9IGdldCh0aGlzLCAndGVtcGxhdGVEYXRhJyk7Cgog
        ICAgdmFyIGtleXdvcmRzID0gdGVtcGxhdGVEYXRhID8gRW1iZXIuY29weSh0
        ZW1wbGF0ZURhdGEua2V5d29yZHMpIDoge307CiAgICBzZXQoa2V5d29yZHMs
        ICd2aWV3JywgZ2V0KHRoaXMsICdjb25jcmV0ZVZpZXcnKSk7CiAgICBzZXQo
        a2V5d29yZHMsICdfdmlldycsIHRoaXMpOwogICAgc2V0KGtleXdvcmRzLCAn
        Y29udHJvbGxlcicsIGdldCh0aGlzLCAnY29udHJvbGxlcicpKTsKCiAgICBy
        ZXR1cm4ga2V5d29yZHM7CiAgfSwKCiAgLyoqCiAgICBDYWxsZWQgb24geW91
        ciB2aWV3IHdoZW4gaXQgc2hvdWxkIHB1c2ggc3RyaW5ncyBvZiBIVE1MIGlu
        dG8gYQogICAgYEVtYmVyLlJlbmRlckJ1ZmZlcmAuIE1vc3QgdXNlcnMgd2ls
        bCB3YW50IHRvIG92ZXJyaWRlIHRoZSBgdGVtcGxhdGVgCiAgICBvciBgdGVt
        cGxhdGVOYW1lYCBwcm9wZXJ0aWVzIGluc3RlYWQgb2YgdGhpcyBtZXRob2Qu
        CgogICAgQnkgZGVmYXVsdCwgYEVtYmVyLlZpZXdgIHdpbGwgbG9vayBmb3Ig
        YSBmdW5jdGlvbiBpbiB0aGUgYHRlbXBsYXRlYAogICAgcHJvcGVydHkgYW5k
        IGludm9rZSBpdCB3aXRoIHRoZSB2YWx1ZSBvZiBgY29udGV4dGAuIFRoZSB2
        YWx1ZSBvZgogICAgYGNvbnRleHRgIHdpbGwgYmUgdGhlIHZpZXcncyBjb250
        cm9sbGVyIHVubGVzcyB5b3Ugb3ZlcnJpZGUgaXQuCgogICAgQG1ldGhvZCBy
        ZW5kZXIKICAgIEBwYXJhbSB7RW1iZXIuUmVuZGVyQnVmZmVyfSBidWZmZXIg
        VGhlIHJlbmRlciBidWZmZXIKICAqLwogIHJlbmRlcjogZnVuY3Rpb24oYnVm
        ZmVyKSB7CiAgICAvLyBJZiB0aGlzIHZpZXcgaGFzIGEgbGF5b3V0LCBpdCBp
        cyB0aGUgcmVzcG9uc2liaWxpdHkgb2YgdGhlCiAgICAvLyB0aGUgbGF5b3V0
        IHRvIHJlbmRlciB0aGUgdmlldydzIHRlbXBsYXRlLiBPdGhlcndpc2UsIHJl
        bmRlciB0aGUgdGVtcGxhdGUKICAgIC8vIGRpcmVjdGx5LgogICAgdmFyIHRl
        bXBsYXRlID0gZ2V0KHRoaXMsICdsYXlvdXQnKSB8fCBnZXQodGhpcywgJ3Rl
        bXBsYXRlJyk7CgogICAgaWYgKHRlbXBsYXRlKSB7CiAgICAgIHZhciBjb250
        ZXh0ID0gZ2V0KHRoaXMsICdjb250ZXh0Jyk7CiAgICAgIHZhciBrZXl3b3Jk
        cyA9IHRoaXMuY2xvbmVLZXl3b3JkcygpOwogICAgICB2YXIgb3V0cHV0OwoK
        ICAgICAgdmFyIGRhdGEgPSB7CiAgICAgICAgdmlldzogdGhpcywKICAgICAg
        ICBidWZmZXI6IGJ1ZmZlciwKICAgICAgICBpc1JlbmRlckRhdGE6IHRydWUs
        CiAgICAgICAga2V5d29yZHM6IGtleXdvcmRzLAogICAgICAgIGluc2lkZUdy
        b3VwOiBnZXQodGhpcywgJ3RlbXBsYXRlRGF0YS5pbnNpZGVHcm91cCcpCiAg
        ICAgIH07CgogICAgICAvLyBJbnZva2UgdGhlIHRlbXBsYXRlIHdpdGggdGhl
        IHByb3ZpZGVkIHRlbXBsYXRlIGNvbnRleHQsIHdoaWNoCiAgICAgIC8vIGlz
        IHRoZSB2aWV3J3MgY29udHJvbGxlciBieSBkZWZhdWx0LiBBIGhhc2ggb2Yg
        ZGF0YSBpcyBhbHNvIHBhc3NlZCB0aGF0IHByb3ZpZGVzCiAgICAgIC8vIHRo
        ZSB0ZW1wbGF0ZSB3aXRoIGFjY2VzcyB0byB0aGUgdmlldyBhbmQgcmVuZGVy
        IGJ1ZmZlci4KCiAgICAgIEVtYmVyLmFzc2VydCgndGVtcGxhdGUgbXVzdCBi
        ZSBhIGZ1bmN0aW9uLiBEaWQgeW91IG1lYW4gdG8gY2FsbCBFbWJlci5IYW5k
        bGViYXJzLmNvbXBpbGUoIi4uLiIpIG9yIHNwZWNpZnkgdGVtcGxhdGVOYW1l
        IGluc3RlYWQ/JywgdHlwZW9mIHRlbXBsYXRlID09PSAnZnVuY3Rpb24nKTsK
        ICAgICAgLy8gVGhlIHRlbXBsYXRlIHNob3VsZCB3cml0ZSBkaXJlY3RseSB0
        byB0aGUgcmVuZGVyIGJ1ZmZlciBpbnN0ZWFkCiAgICAgIC8vIG9mIHJldHVy
        bmluZyBhIHN0cmluZy4KICAgICAgb3V0cHV0ID0gdGVtcGxhdGUoY29udGV4
        dCwgeyBkYXRhOiBkYXRhIH0pOwoKICAgICAgLy8gSWYgdGhlIHRlbXBsYXRl
        IHJldHVybmVkIGEgc3RyaW5nIGluc3RlYWQgb2Ygd3JpdGluZyB0byB0aGUg
        YnVmZmVyLAogICAgICAvLyBwdXNoIHRoZSBzdHJpbmcgb250byB0aGUgYnVm
        ZmVyLgogICAgICBpZiAob3V0cHV0ICE9PSB1bmRlZmluZWQpIHsgYnVmZmVy
        LnB1c2gob3V0cHV0KTsgfQogICAgfQogIH0sCgogIC8qKgogICAgUmVuZGVy
        cyB0aGUgdmlldyBhZ2Fpbi4gVGhpcyB3aWxsIHdvcmsgcmVnYXJkbGVzcyBv
        ZiB3aGV0aGVyIHRoZQogICAgdmlldyBpcyBhbHJlYWR5IGluIHRoZSBET00g
        b3Igbm90LiBJZiB0aGUgdmlldyBpcyBpbiB0aGUgRE9NLCB0aGUKICAgIHJl
        bmRlcmluZyBwcm9jZXNzIHdpbGwgYmUgZGVmZXJyZWQgdG8gZ2l2ZSBiaW5k
        aW5ncyBhIGNoYW5jZQogICAgdG8gc3luY2hyb25pemUuCgogICAgSWYgY2hp
        bGRyZW4gd2VyZSBhZGRlZCBkdXJpbmcgdGhlIHJlbmRlcmluZyBwcm9jZXNz
        IHVzaW5nIGBhcHBlbmRDaGlsZGAsCiAgICBgcmVyZW5kZXJgIHdpbGwgcmVt
        b3ZlIHRoZW0sIGJlY2F1c2UgdGhleSB3aWxsIGJlIGFkZGVkIGFnYWluCiAg
        ICBpZiBuZWVkZWQgYnkgdGhlIG5leHQgYHJlbmRlcmAuCgogICAgSW4gZ2Vu
        ZXJhbCwgaWYgdGhlIGRpc3BsYXkgb2YgeW91ciB2aWV3IGNoYW5nZXMsIHlv
        dSBzaG91bGQgbW9kaWZ5CiAgICB0aGUgRE9NIGVsZW1lbnQgZGlyZWN0bHkg
        aW5zdGVhZCBvZiBtYW51YWxseSBjYWxsaW5nIGByZXJlbmRlcmAsIHdoaWNo
        IGNhbgogICAgYmUgc2xvdy4KCiAgICBAbWV0aG9kIHJlcmVuZGVyCiAgKi8K
        ICByZXJlbmRlcjogZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gdGhpcy5jdXJy
        ZW50U3RhdGUucmVyZW5kZXIodGhpcyk7CiAgfSwKCiAgY2xlYXJSZW5kZXJl
        ZENoaWxkcmVuOiBmdW5jdGlvbigpIHsKICAgIHZhciBsZW5ndGhCZWZvcmUg
        PSB0aGlzLmxlbmd0aEJlZm9yZVJlbmRlciwKICAgICAgICBsZW5ndGhBZnRl
        ciAgPSB0aGlzLmxlbmd0aEFmdGVyUmVuZGVyOwoKICAgIC8vIElmIHRoZXJl
        IHdlcmUgY2hpbGQgdmlld3MgY3JlYXRlZCBkdXJpbmcgdGhlIGxhc3QgY2Fs
        bCB0byByZW5kZXIoKSwKICAgIC8vIHJlbW92ZSB0aGVtIHVuZGVyIHRoZSBh
        c3N1bXB0aW9uIHRoYXQgdGhleSB3aWxsIGJlIHJlLWNyZWF0ZWQgd2hlbgog
        ICAgLy8gd2UgcmUtcmVuZGVyLgoKICAgIC8vIFZJRVctVE9ETzogVW5pdCB0
        ZXN0IHRoaXMgcGF0aC4KICAgIHZhciBjaGlsZFZpZXdzID0gdGhpcy5fY2hp
        bGRWaWV3czsKICAgIGZvciAodmFyIGk9bGVuZ3RoQWZ0ZXItMTsgaT49bGVu
        Z3RoQmVmb3JlOyBpLS0pIHsKICAgICAgaWYgKGNoaWxkVmlld3NbaV0pIHsg
        Y2hpbGRWaWV3c1tpXS5kZXN0cm95KCk7IH0KICAgIH0KICB9LAoKICAvKioK
        ICAgIEl0ZXJhdGVzIG92ZXIgdGhlIHZpZXcncyBgY2xhc3NOYW1lQmluZGlu
        Z3NgIGFycmF5LCBpbnNlcnRzIHRoZSB2YWx1ZQogICAgb2YgdGhlIHNwZWNp
        ZmllZCBwcm9wZXJ0eSBpbnRvIHRoZSBgY2xhc3NOYW1lc2AgYXJyYXksIHRo
        ZW4gY3JlYXRlcyBhbgogICAgb2JzZXJ2ZXIgdG8gdXBkYXRlIHRoZSB2aWV3
        J3MgZWxlbWVudCBpZiB0aGUgYm91bmQgcHJvcGVydHkgZXZlciBjaGFuZ2Vz
        CiAgICBpbiB0aGUgZnV0dXJlLgoKICAgIEBtZXRob2QgX2FwcGx5Q2xhc3NO
        YW1lQmluZGluZ3MKICAgIEBwcml2YXRlCiAgKi8KICBfYXBwbHlDbGFzc05h
        bWVCaW5kaW5nczogZnVuY3Rpb24oY2xhc3NCaW5kaW5ncykgewogICAgdmFy
        IGNsYXNzTmFtZXMgPSB0aGlzLmNsYXNzTmFtZXMsCiAgICBlbGVtLCBuZXdD
        bGFzcywgZGFzaGVyaXplZENsYXNzOwoKICAgIC8vIExvb3AgdGhyb3VnaCBh
        bGwgb2YgdGhlIGNvbmZpZ3VyZWQgYmluZGluZ3MuIFRoZXNlIHdpbGwgYmUg
        ZWl0aGVyCiAgICAvLyBwcm9wZXJ0eSBuYW1lcyAoJ2lzVXJnZW50Jykgb3Ig
        cHJvcGVydHkgcGF0aHMgcmVsYXRpdmUgdG8gdGhlIHZpZXcKICAgIC8vICgn
        Y29udGVudC5pc1VyZ2VudCcpCiAgICBhX2ZvckVhY2goY2xhc3NCaW5kaW5n
        cywgZnVuY3Rpb24oYmluZGluZykgewoKICAgICAgRW1iZXIuYXNzZXJ0KCJj
        bGFzc05hbWVCaW5kaW5ncyBtdXN0IG5vdCBoYXZlIHNwYWNlcyBpbiB0aGVt
        LiBNdWx0aXBsZSBjbGFzcyBuYW1lIGJpbmRpbmdzIGNhbiBiZSBwcm92aWRl
        ZCBhcyBlbGVtZW50cyBvZiBhbiBhcnJheSwgZS5nLiBbJ2ZvbycsICc6YmFy
        J10iLCBiaW5kaW5nLmluZGV4T2YoJyAnKSA9PT0gLTEpOwoKICAgICAgLy8g
        VmFyaWFibGUgaW4gd2hpY2ggdGhlIG9sZCBjbGFzcyB2YWx1ZSBpcyBzYXZl
        ZC4gVGhlIG9ic2VydmVyIGZ1bmN0aW9uCiAgICAgIC8vIGNsb3NlcyBvdmVy
        IHRoaXMgdmFyaWFibGUsIHNvIGl0IGtub3dzIHdoaWNoIHN0cmluZyB0byBy
        ZW1vdmUgd2hlbgogICAgICAvLyB0aGUgcHJvcGVydHkgY2hhbmdlcy4KICAg
        ICAgdmFyIG9sZENsYXNzOwogICAgICAvLyBFeHRyYWN0IGp1c3QgdGhlIHBy
        b3BlcnR5IG5hbWUgZnJvbSBiaW5kaW5ncyBsaWtlICdmb286YmFyJwogICAg
        ICB2YXIgcGFyc2VkUGF0aCA9IEVtYmVyLlZpZXcuX3BhcnNlUHJvcGVydHlQ
        YXRoKGJpbmRpbmcpOwoKICAgICAgLy8gU2V0IHVwIGFuIG9ic2VydmVyIG9u
        IHRoZSBjb250ZXh0LiBJZiB0aGUgcHJvcGVydHkgY2hhbmdlcywgdG9nZ2xl
        IHRoZQogICAgICAvLyBjbGFzcyBuYW1lLgogICAgICB2YXIgb2JzZXJ2ZXIg
        PSBmdW5jdGlvbigpIHsKICAgICAgICAvLyBHZXQgdGhlIGN1cnJlbnQgdmFs
        dWUgb2YgdGhlIHByb3BlcnR5CiAgICAgICAgbmV3Q2xhc3MgPSB0aGlzLl9j
        bGFzc1N0cmluZ0ZvclByb3BlcnR5KGJpbmRpbmcpOwogICAgICAgIGVsZW0g
        PSB0aGlzLiQoKTsKCiAgICAgICAgLy8gSWYgd2UgaGFkIHByZXZpb3VzbHkg
        YWRkZWQgYSBjbGFzcyB0byB0aGUgZWxlbWVudCwgcmVtb3ZlIGl0LgogICAg
        ICAgIGlmIChvbGRDbGFzcykgewogICAgICAgICAgZWxlbS5yZW1vdmVDbGFz
        cyhvbGRDbGFzcyk7CiAgICAgICAgICAvLyBBbHNvIHJlbW92ZSBmcm9tIGNs
        YXNzTmFtZXMgc28gdGhhdCBpZiB0aGUgdmlldyBnZXRzIHJlcmVuZGVyZWQs
        CiAgICAgICAgICAvLyB0aGUgY2xhc3MgZG9lc24ndCBnZXQgYWRkZWQgYmFj
        ayB0byB0aGUgRE9NLgogICAgICAgICAgY2xhc3NOYW1lcy5yZW1vdmVPYmpl
        Y3Qob2xkQ2xhc3MpOwogICAgICAgIH0KCiAgICAgICAgLy8gSWYgbmVjZXNz
        YXJ5LCBhZGQgYSBuZXcgY2xhc3MuIE1ha2Ugc3VyZSB3ZSBrZWVwIHRyYWNr
        IG9mIGl0IHNvCiAgICAgICAgLy8gaXQgY2FuIGJlIHJlbW92ZWQgaW4gdGhl
        IGZ1dHVyZS4KICAgICAgICBpZiAobmV3Q2xhc3MpIHsKICAgICAgICAgIGVs
        ZW0uYWRkQ2xhc3MobmV3Q2xhc3MpOwogICAgICAgICAgb2xkQ2xhc3MgPSBu
        ZXdDbGFzczsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgb2xkQ2xhc3Mg
        PSBudWxsOwogICAgICAgIH0KICAgICAgfTsKCiAgICAgIC8vIEdldCB0aGUg
        Y2xhc3MgbmFtZSBmb3IgdGhlIHByb3BlcnR5IGF0IGl0cyBjdXJyZW50IHZh
        bHVlCiAgICAgIGRhc2hlcml6ZWRDbGFzcyA9IHRoaXMuX2NsYXNzU3RyaW5n
        Rm9yUHJvcGVydHkoYmluZGluZyk7CgogICAgICBpZiAoZGFzaGVyaXplZENs
        YXNzKSB7CiAgICAgICAgLy8gRW5zdXJlIHRoYXQgaXQgZ2V0cyBpbnRvIHRo
        ZSBjbGFzc05hbWVzIGFycmF5CiAgICAgICAgLy8gc28gaXQgaXMgZGlzcGxh
        eWVkIHdoZW4gd2UgcmVuZGVyLgogICAgICAgIGFfYWRkT2JqZWN0KGNsYXNz
        TmFtZXMsIGRhc2hlcml6ZWRDbGFzcyk7CgogICAgICAgIC8vIFNhdmUgYSBy
        ZWZlcmVuY2UgdG8gdGhlIGNsYXNzIG5hbWUgc28gd2UgY2FuIHJlbW92ZSBp
        dAogICAgICAgIC8vIGlmIHRoZSBvYnNlcnZlciBmaXJlcy4gUmVtZW1iZXIg
        dGhhdCB0aGlzIHZhcmlhYmxlIGhhcwogICAgICAgIC8vIGJlZW4gY2xvc2Vk
        IG92ZXIgYnkgdGhlIG9ic2VydmVyLgogICAgICAgIG9sZENsYXNzID0gZGFz
        aGVyaXplZENsYXNzOwogICAgICB9CgogICAgICB0aGlzLnJlZ2lzdGVyT2Jz
        ZXJ2ZXIodGhpcywgcGFyc2VkUGF0aC5wYXRoLCBvYnNlcnZlcik7CiAgICAg
        IC8vIFJlbW92ZSBjbGFzc05hbWUgc28gd2hlbiB0aGUgdmlldyBpcyByZXJl
        bmRlcmVkLAogICAgICAvLyB0aGUgY2xhc3NOYW1lIGlzIGFkZGVkIGJhc2Vk
        IG9uIGJpbmRpbmcgcmVldmFsdWF0aW9uCiAgICAgIHRoaXMub25lKCd3aWxs
        Q2xlYXJSZW5kZXInLCBmdW5jdGlvbigpIHsKICAgICAgICBpZiAob2xkQ2xh
        c3MpIHsKICAgICAgICAgIGNsYXNzTmFtZXMucmVtb3ZlT2JqZWN0KG9sZENs
        YXNzKTsKICAgICAgICAgIG9sZENsYXNzID0gbnVsbDsKICAgICAgICB9CiAg
        ICAgIH0pOwoKICAgIH0sIHRoaXMpOwogIH0sCgogIF91bnNwZWNpZmllZEF0
        dHJpYnV0ZUJpbmRpbmdzOiBudWxsLAoKICAvKioKICAgIEl0ZXJhdGVzIHRo
        cm91Z2ggdGhlIHZpZXcncyBhdHRyaWJ1dGUgYmluZGluZ3MsIHNldHMgdXAg
        b2JzZXJ2ZXJzIGZvciBlYWNoLAogICAgdGhlbiBhcHBsaWVzIHRoZSBjdXJy
        ZW50IHZhbHVlIG9mIHRoZSBhdHRyaWJ1dGVzIHRvIHRoZSBwYXNzZWQgcmVu
        ZGVyIGJ1ZmZlci4KCiAgICBAbWV0aG9kIF9hcHBseUF0dHJpYnV0ZUJpbmRp
        bmdzCiAgICBAcGFyYW0ge0VtYmVyLlJlbmRlckJ1ZmZlcn0gYnVmZmVyCiAg
        ICBAcHJpdmF0ZQogICovCiAgX2FwcGx5QXR0cmlidXRlQmluZGluZ3M6IGZ1
        bmN0aW9uKGJ1ZmZlciwgYXR0cmlidXRlQmluZGluZ3MpIHsKICAgIHZhciBh
        dHRyaWJ1dGVWYWx1ZSwKICAgICAgICB1bnNwZWNpZmllZEF0dHJpYnV0ZUJp
        bmRpbmdzID0gdGhpcy5fdW5zcGVjaWZpZWRBdHRyaWJ1dGVCaW5kaW5ncyA9
        IHRoaXMuX3Vuc3BlY2lmaWVkQXR0cmlidXRlQmluZGluZ3MgfHwge307Cgog
        ICAgYV9mb3JFYWNoKGF0dHJpYnV0ZUJpbmRpbmdzLCBmdW5jdGlvbihiaW5k
        aW5nKSB7CiAgICAgIHZhciBzcGxpdCA9IGJpbmRpbmcuc3BsaXQoJzonKSwK
        ICAgICAgICAgIHByb3BlcnR5ID0gc3BsaXRbMF0sCiAgICAgICAgICBhdHRy
        aWJ1dGVOYW1lID0gc3BsaXRbMV0gfHwgcHJvcGVydHk7CgogICAgICBpZiAo
        cHJvcGVydHkgaW4gdGhpcykgewogICAgICAgIHRoaXMuX3NldHVwQXR0cmli
        dXRlQmluZGluZ09ic2VydmF0aW9uKHByb3BlcnR5LCBhdHRyaWJ1dGVOYW1l
        KTsKCiAgICAgICAgLy8gRGV0ZXJtaW5lIHRoZSBjdXJyZW50IHZhbHVlIGFu
        ZCBhZGQgaXQgdG8gdGhlIHJlbmRlciBidWZmZXIKICAgICAgICAvLyBpZiBu
        ZWNlc3NhcnkuCiAgICAgICAgYXR0cmlidXRlVmFsdWUgPSBnZXQodGhpcywg
        cHJvcGVydHkpOwogICAgICAgIEVtYmVyLlZpZXcuYXBwbHlBdHRyaWJ1dGVC
        aW5kaW5ncyhidWZmZXIsIGF0dHJpYnV0ZU5hbWUsIGF0dHJpYnV0ZVZhbHVl
        KTsKICAgICAgfSBlbHNlIHsKICAgICAgICB1bnNwZWNpZmllZEF0dHJpYnV0
        ZUJpbmRpbmdzW3Byb3BlcnR5XSA9IGF0dHJpYnV0ZU5hbWU7CiAgICAgIH0K
        ICAgIH0sIHRoaXMpOwoKICAgIC8vIExhemlseSBzZXR1cCBzZXRVbmtub3du
        UHJvcGVydHkgYWZ0ZXIgYXR0cmlidXRlQmluZGluZ3MgYXJlIGluaXRpYWxs
        eSBhcHBsaWVkCiAgICB0aGlzLnNldFVua25vd25Qcm9wZXJ0eSA9IHRoaXMu
        X3NldFVua25vd25Qcm9wZXJ0eTsKICB9LAoKICBfc2V0dXBBdHRyaWJ1dGVC
        aW5kaW5nT2JzZXJ2YXRpb246IGZ1bmN0aW9uKHByb3BlcnR5LCBhdHRyaWJ1
        dGVOYW1lKSB7CiAgICB2YXIgYXR0cmlidXRlVmFsdWUsIGVsZW07CgogICAg
        Ly8gQ3JlYXRlIGFuIG9ic2VydmVyIHRvIGFkZC9yZW1vdmUvY2hhbmdlIHRo
        ZSBhdHRyaWJ1dGUgaWYgdGhlCiAgICAvLyBKYXZhU2NyaXB0IHByb3BlcnR5
        IGNoYW5nZXMuCiAgICB2YXIgb2JzZXJ2ZXIgPSBmdW5jdGlvbigpIHsKICAg
        ICAgZWxlbSA9IHRoaXMuJCgpOwoKICAgICAgYXR0cmlidXRlVmFsdWUgPSBn
        ZXQodGhpcywgcHJvcGVydHkpOwoKICAgICAgRW1iZXIuVmlldy5hcHBseUF0
        dHJpYnV0ZUJpbmRpbmdzKGVsZW0sIGF0dHJpYnV0ZU5hbWUsIGF0dHJpYnV0
        ZVZhbHVlKTsKICAgIH07CgogICAgdGhpcy5yZWdpc3Rlck9ic2VydmVyKHRo
        aXMsIHByb3BlcnR5LCBvYnNlcnZlcik7CiAgfSwKCiAgLyoqCiAgICBXZSdy
        ZSB1c2luZyBzZXRVbmtub3duUHJvcGVydHkgYXMgYSBob29rIHRvIHNldHVw
        IGF0dHJpYnV0ZUJpbmRpbmcgb2JzZXJ2ZXJzIGZvcgogICAgcHJvcGVydGll
        cyB0aGF0IGFyZW4ndCBkZWZpbmVkIG9uIGEgdmlldyBhdCBpbml0aWFsaXph
        dGlvbiB0aW1lLgoKICAgIE5vdGU6IHNldFVua25vd25Qcm9wZXJ0eSB3aWxs
        IG9ubHkgYmUgY2FsbGVkIG9uY2UgZm9yIGVhY2ggcHJvcGVydHkuCgogICAg
        QG1ldGhvZCBzZXRVbmtub3duUHJvcGVydHkKICAgIEBwYXJhbSBrZXkKICAg
        IEBwYXJhbSB2YWx1ZQogICAgQHByaXZhdGUKICAqLwogIHNldFVua25vd25Q
        cm9wZXJ0eTogbnVsbCwgLy8gR2V0cyBkZWZpbmVkIGFmdGVyIGluaXRpYWxp
        emF0aW9uIGJ5IF9hcHBseUF0dHJpYnV0ZUJpbmRpbmdzCgogIF9zZXRVbmtu
        b3duUHJvcGVydHk6IGZ1bmN0aW9uKGtleSwgdmFsdWUpIHsKICAgIHZhciBh
        dHRyaWJ1dGVOYW1lID0gdGhpcy5fdW5zcGVjaWZpZWRBdHRyaWJ1dGVCaW5k
        aW5ncyAmJiB0aGlzLl91bnNwZWNpZmllZEF0dHJpYnV0ZUJpbmRpbmdzW2tl
        eV07CiAgICBpZiAoYXR0cmlidXRlTmFtZSkgewogICAgICB0aGlzLl9zZXR1
        cEF0dHJpYnV0ZUJpbmRpbmdPYnNlcnZhdGlvbihrZXksIGF0dHJpYnV0ZU5h
        bWUpOwogICAgfQoKICAgIGRlZmluZVByb3BlcnR5KHRoaXMsIGtleSk7CiAg
        ICByZXR1cm4gc2V0KHRoaXMsIGtleSwgdmFsdWUpOwogIH0sCgogIC8qKgog
        ICAgR2l2ZW4gYSBwcm9wZXJ0eSBuYW1lLCByZXR1cm5zIGEgZGFzaGVyaXpl
        ZCB2ZXJzaW9uIG9mIHRoYXQKICAgIHByb3BlcnR5IG5hbWUgaWYgdGhlIHBy
        b3BlcnR5IGV2YWx1YXRlcyB0byBhIG5vbi1mYWxzeSB2YWx1ZS4KCiAgICBG
        b3IgZXhhbXBsZSwgaWYgdGhlIHZpZXcgaGFzIHByb3BlcnR5IGBpc1VyZ2Vu
        dGAgdGhhdCBldmFsdWF0ZXMgdG8gdHJ1ZSwKICAgIHBhc3NpbmcgYGlzVXJn
        ZW50YCB0byB0aGlzIG1ldGhvZCB3aWxsIHJldHVybiBgImlzLXVyZ2VudCJg
        LgoKICAgIEBtZXRob2QgX2NsYXNzU3RyaW5nRm9yUHJvcGVydHkKICAgIEBw
        YXJhbSBwcm9wZXJ0eQogICAgQHByaXZhdGUKICAqLwogIF9jbGFzc1N0cmlu
        Z0ZvclByb3BlcnR5OiBmdW5jdGlvbihwcm9wZXJ0eSkgewogICAgdmFyIHBh
        cnNlZFBhdGggPSBFbWJlci5WaWV3Ll9wYXJzZVByb3BlcnR5UGF0aChwcm9w
        ZXJ0eSk7CiAgICB2YXIgcGF0aCA9IHBhcnNlZFBhdGgucGF0aDsKCiAgICB2
        YXIgdmFsID0gZ2V0KHRoaXMsIHBhdGgpOwogICAgaWYgKHZhbCA9PT0gdW5k
        ZWZpbmVkICYmIEVtYmVyLmlzR2xvYmFsUGF0aChwYXRoKSkgewogICAgICB2
        YWwgPSBnZXQoRW1iZXIubG9va3VwLCBwYXRoKTsKICAgIH0KCiAgICByZXR1
        cm4gRW1iZXIuVmlldy5fY2xhc3NTdHJpbmdGb3JWYWx1ZShwYXRoLCB2YWws
        IHBhcnNlZFBhdGguY2xhc3NOYW1lLCBwYXJzZWRQYXRoLmZhbHN5Q2xhc3NO
        YW1lKTsKICB9LAoKICAvLyAuLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4u
        Li4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uCiAgLy8gRUxFTUVOVCBT
        VVBQT1JUCiAgLy8KCiAgLyoqCiAgICBSZXR1cm5zIHRoZSBjdXJyZW50IERP
        TSBlbGVtZW50IGZvciB0aGUgdmlldy4KCiAgICBAcHJvcGVydHkgZWxlbWVu
        dAogICAgQHR5cGUgRE9NRWxlbWVudAogICovCiAgZWxlbWVudDogRW1iZXIu
        Y29tcHV0ZWQoJ19wYXJlbnRWaWV3JywgZnVuY3Rpb24oa2V5LCB2YWx1ZSkg
        ewogICAgaWYgKHZhbHVlICE9PSB1bmRlZmluZWQpIHsKICAgICAgcmV0dXJu
        IHRoaXMuY3VycmVudFN0YXRlLnNldEVsZW1lbnQodGhpcywgdmFsdWUpOwog
        ICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIHRoaXMuY3VycmVudFN0YXRlLmdl
        dEVsZW1lbnQodGhpcyk7CiAgICB9CiAgfSksCgogIC8qKgogICAgUmV0dXJu
        cyBhIGpRdWVyeSBvYmplY3QgZm9yIHRoaXMgdmlldydzIGVsZW1lbnQuIElm
        IHlvdSBwYXNzIGluIGEgc2VsZWN0b3IKICAgIHN0cmluZywgdGhpcyBtZXRo
        b2Qgd2lsbCByZXR1cm4gYSBqUXVlcnkgb2JqZWN0LCB1c2luZyB0aGUgY3Vy
        cmVudCBlbGVtZW50CiAgICBhcyBpdHMgYnVmZmVyLgoKICAgIEZvciBleGFt
        cGxlLCBjYWxsaW5nIGB2aWV3LiQoJ2xpJylgIHdpbGwgcmV0dXJuIGEgalF1
        ZXJ5IG9iamVjdCBjb250YWluaW5nCiAgICBhbGwgb2YgdGhlIGBsaWAgZWxl
        bWVudHMgaW5zaWRlIHRoZSBET00gZWxlbWVudCBvZiB0aGlzIHZpZXcuCgog
        ICAgQG1ldGhvZCAkCiAgICBAcGFyYW0ge1N0cmluZ30gW3NlbGVjdG9yXSBh
        IGpRdWVyeS1jb21wYXRpYmxlIHNlbGVjdG9yIHN0cmluZwogICAgQHJldHVy
        biB7alF1ZXJ5fSB0aGUgalF1ZXJ5IG9iamVjdCBmb3IgdGhlIERPTSBub2Rl
        CiAgKi8KICAkOiBmdW5jdGlvbihzZWwpIHsKICAgIHJldHVybiB0aGlzLmN1
        cnJlbnRTdGF0ZS4kKHRoaXMsIHNlbCk7CiAgfSwKCiAgbXV0YXRlQ2hpbGRW
        aWV3czogZnVuY3Rpb24oY2FsbGJhY2spIHsKICAgIHZhciBjaGlsZFZpZXdz
        ID0gdGhpcy5fY2hpbGRWaWV3cywKICAgICAgICBpZHggPSBjaGlsZFZpZXdz
        Lmxlbmd0aCwKICAgICAgICB2aWV3OwoKICAgIHdoaWxlKC0taWR4ID49IDAp
        IHsKICAgICAgdmlldyA9IGNoaWxkVmlld3NbaWR4XTsKICAgICAgY2FsbGJh
        Y2sodGhpcywgdmlldywgaWR4KTsKICAgIH0KCiAgICByZXR1cm4gdGhpczsK
        ICB9LAoKICBmb3JFYWNoQ2hpbGRWaWV3OiBmdW5jdGlvbihjYWxsYmFjaykg
        ewogICAgdmFyIGNoaWxkVmlld3MgPSB0aGlzLl9jaGlsZFZpZXdzOwoKICAg
        IGlmICghY2hpbGRWaWV3cykgeyByZXR1cm4gdGhpczsgfQoKICAgIHZhciBs
        ZW4gPSBjaGlsZFZpZXdzLmxlbmd0aCwKICAgICAgICB2aWV3LCBpZHg7Cgog
        ICAgZm9yIChpZHggPSAwOyBpZHggPCBsZW47IGlkeCsrKSB7CiAgICAgIHZp
        ZXcgPSBjaGlsZFZpZXdzW2lkeF07CiAgICAgIGNhbGxiYWNrKHZpZXcpOwog
        ICAgfQoKICAgIHJldHVybiB0aGlzOwogIH0sCgogIC8qKgogICAgQXBwZW5k
        cyB0aGUgdmlldydzIGVsZW1lbnQgdG8gdGhlIHNwZWNpZmllZCBwYXJlbnQg
        ZWxlbWVudC4KCiAgICBJZiB0aGUgdmlldyBkb2VzIG5vdCBoYXZlIGFuIEhU
        TUwgcmVwcmVzZW50YXRpb24geWV0LCBgY3JlYXRlRWxlbWVudCgpYAogICAg
        d2lsbCBiZSBjYWxsZWQgYXV0b21hdGljYWxseS4KCiAgICBOb3RlIHRoYXQg
        dGhpcyBtZXRob2QganVzdCBzY2hlZHVsZXMgdGhlIHZpZXcgdG8gYmUgYXBw
        ZW5kZWQ7IHRoZSBET00KICAgIGVsZW1lbnQgd2lsbCBub3QgYmUgYXBwZW5k
        ZWQgdG8gdGhlIGdpdmVuIGVsZW1lbnQgdW50aWwgYWxsIGJpbmRpbmdzIGhh
        dmUKICAgIGZpbmlzaGVkIHN5bmNocm9uaXppbmcuCgogICAgVGhpcyBpcyBu
        b3QgdHlwaWNhbGx5IGEgZnVuY3Rpb24gdGhhdCB5b3Ugd2lsbCBuZWVkIHRv
        IGNhbGwgZGlyZWN0bHkgd2hlbgogICAgYnVpbGRpbmcgeW91ciBhcHBsaWNh
        dGlvbi4gWW91IG1pZ2h0IGNvbnNpZGVyIHVzaW5nIGBFbWJlci5Db250YWlu
        ZXJWaWV3YAogICAgaW5zdGVhZC4gSWYgeW91IGRvIG5lZWQgdG8gdXNlIGBh
        cHBlbmRUb2AsIGJlIHN1cmUgdGhhdCB0aGUgdGFyZ2V0IGVsZW1lbnQKICAg
        IHlvdSBhcmUgcHJvdmlkaW5nIGlzIGFzc29jaWF0ZWQgd2l0aCBhbiBgRW1i
        ZXIuQXBwbGljYXRpb25gIGFuZCBkb2VzIG5vdAogICAgaGF2ZSBhbiBhbmNl
        c3RvciBlbGVtZW50IHRoYXQgaXMgYXNzb2NpYXRlZCB3aXRoIGFuIEVtYmVy
        IHZpZXcuCgogICAgQG1ldGhvZCBhcHBlbmRUbwogICAgQHBhcmFtIHtTdHJp
        bmd8RE9NRWxlbWVudHxqUXVlcnl9IEEgc2VsZWN0b3IsIGVsZW1lbnQsIEhU
        TUwgc3RyaW5nLCBvciBqUXVlcnkgb2JqZWN0CiAgICBAcmV0dXJuIHtFbWJl
        ci5WaWV3fSByZWNlaXZlcgogICovCiAgYXBwZW5kVG86IGZ1bmN0aW9uKHRh
        cmdldCkgewogICAgLy8gU2NoZWR1bGUgdGhlIERPTSBlbGVtZW50IHRvIGJl
        IGNyZWF0ZWQgYW5kIGFwcGVuZGVkIHRvIHRoZSBnaXZlbgogICAgLy8gZWxl
        bWVudCBhZnRlciBiaW5kaW5ncyBoYXZlIHN5bmNocm9uaXplZC4KICAgIHRo
        aXMuX2luc2VydEVsZW1lbnRMYXRlcihmdW5jdGlvbigpIHsKICAgICAgRW1i
        ZXIuYXNzZXJ0KCJZb3UgdHJpZWQgdG8gYXBwZW5kIHRvICgiICsgdGFyZ2V0
        ICsgIikgYnV0IHRoYXQgaXNuJ3QgaW4gdGhlIERPTSIsIEVtYmVyLiQodGFy
        Z2V0KS5sZW5ndGggPiAwKTsKICAgICAgRW1iZXIuYXNzZXJ0KCJZb3UgY2Fu
        bm90IGFwcGVuZCB0byBhbiBleGlzdGluZyBFbWJlci5WaWV3LiBDb25zaWRl
        ciB1c2luZyBFbWJlci5Db250YWluZXJWaWV3IGluc3RlYWQuIiwgIUVtYmVy
        LiQodGFyZ2V0KS5pcygnLmVtYmVyLXZpZXcnKSAmJiAhRW1iZXIuJCh0YXJn
        ZXQpLnBhcmVudHMoKS5pcygnLmVtYmVyLXZpZXcnKSk7CiAgICAgIHRoaXMu
        JCgpLmFwcGVuZFRvKHRhcmdldCk7CiAgICB9KTsKCiAgICByZXR1cm4gdGhp
        czsKICB9LAoKICAvKioKICAgIFJlcGxhY2VzIHRoZSBjb250ZW50IG9mIHRo
        ZSBzcGVjaWZpZWQgcGFyZW50IGVsZW1lbnQgd2l0aCB0aGlzIHZpZXcncwog
        ICAgZWxlbWVudC4gSWYgdGhlIHZpZXcgZG9lcyBub3QgaGF2ZSBhbiBIVE1M
        IHJlcHJlc2VudGF0aW9uIHlldCwKICAgIGBjcmVhdGVFbGVtZW50KClgIHdp
        bGwgYmUgY2FsbGVkIGF1dG9tYXRpY2FsbHkuCgogICAgTm90ZSB0aGF0IHRo
        aXMgbWV0aG9kIGp1c3Qgc2NoZWR1bGVzIHRoZSB2aWV3IHRvIGJlIGFwcGVu
        ZGVkOyB0aGUgRE9NCiAgICBlbGVtZW50IHdpbGwgbm90IGJlIGFwcGVuZGVk
        IHRvIHRoZSBnaXZlbiBlbGVtZW50IHVudGlsIGFsbCBiaW5kaW5ncyBoYXZl
        CiAgICBmaW5pc2hlZCBzeW5jaHJvbml6aW5nCgogICAgQG1ldGhvZCByZXBs
        YWNlSW4KICAgIEBwYXJhbSB7U3RyaW5nfERPTUVsZW1lbnR8alF1ZXJ5fSB0
        YXJnZXQgQSBzZWxlY3RvciwgZWxlbWVudCwgSFRNTCBzdHJpbmcsIG9yIGpR
        dWVyeSBvYmplY3QKICAgIEByZXR1cm4ge0VtYmVyLlZpZXd9IHJlY2VpdmVk
        CiAgKi8KICByZXBsYWNlSW46IGZ1bmN0aW9uKHRhcmdldCkgewogICAgRW1i
        ZXIuYXNzZXJ0KCJZb3UgdHJpZWQgdG8gcmVwbGFjZSBpbiAoIiArIHRhcmdl
        dCArICIpIGJ1dCB0aGF0IGlzbid0IGluIHRoZSBET00iLCBFbWJlci4kKHRh
        cmdldCkubGVuZ3RoID4gMCk7CiAgICBFbWJlci5hc3NlcnQoIllvdSBjYW5u
        b3QgcmVwbGFjZSBhbiBleGlzdGluZyBFbWJlci5WaWV3LiBDb25zaWRlciB1
        c2luZyBFbWJlci5Db250YWluZXJWaWV3IGluc3RlYWQuIiwgIUVtYmVyLiQo
        dGFyZ2V0KS5pcygnLmVtYmVyLXZpZXcnKSAmJiAhRW1iZXIuJCh0YXJnZXQp
        LnBhcmVudHMoKS5pcygnLmVtYmVyLXZpZXcnKSk7CgogICAgdGhpcy5faW5z
        ZXJ0RWxlbWVudExhdGVyKGZ1bmN0aW9uKCkgewogICAgICBFbWJlci4kKHRh
        cmdldCkuZW1wdHkoKTsKICAgICAgdGhpcy4kKCkuYXBwZW5kVG8odGFyZ2V0
        KTsKICAgIH0pOwoKICAgIHJldHVybiB0aGlzOwogIH0sCgogIC8qKgogICAg
        U2NoZWR1bGVzIGEgRE9NIG9wZXJhdGlvbiB0byBvY2N1ciBkdXJpbmcgdGhl
        IG5leHQgcmVuZGVyIHBoYXNlLiBUaGlzCiAgICBlbnN1cmVzIHRoYXQgYWxs
        IGJpbmRpbmdzIGhhdmUgZmluaXNoZWQgc3luY2hyb25pemluZyBiZWZvcmUg
        dGhlIHZpZXcgaXMKICAgIHJlbmRlcmVkLgoKICAgIFRvIHVzZSwgcGFzcyBh
        IGZ1bmN0aW9uIHRoYXQgcGVyZm9ybXMgYSBET00gb3BlcmF0aW9uLgoKICAg
        IEJlZm9yZSB5b3VyIGZ1bmN0aW9uIGlzIGNhbGxlZCwgdGhpcyB2aWV3IGFu
        ZCBhbGwgY2hpbGQgdmlld3Mgd2lsbCByZWNlaXZlCiAgICB0aGUgYHdpbGxJ
        bnNlcnRFbGVtZW50YCBldmVudC4gQWZ0ZXIgeW91ciBmdW5jdGlvbiBpcyBp
        bnZva2VkLCB0aGlzIHZpZXcKICAgIGFuZCBhbGwgb2YgaXRzIGNoaWxkIHZp
        ZXdzIHdpbGwgcmVjZWl2ZSB0aGUgYGRpZEluc2VydEVsZW1lbnRgIGV2ZW50
        LgoKICAgIGBgYGphdmFzY3JpcHQKICAgIHZpZXcuX2luc2VydEVsZW1lbnRM
        YXRlcihmdW5jdGlvbigpIHsKICAgICAgdGhpcy5jcmVhdGVFbGVtZW50KCk7
        CiAgICAgIHRoaXMuJCgpLmFwcGVuZFRvKCdib2R5Jyk7CiAgICB9KTsKICAg
        IGBgYAoKICAgIEBtZXRob2QgX2luc2VydEVsZW1lbnRMYXRlcgogICAgQHBh
        cmFtIHtGdW5jdGlvbn0gZm4gdGhlIGZ1bmN0aW9uIHRoYXQgaW5zZXJ0cyB0
        aGUgZWxlbWVudCBpbnRvIHRoZSBET00KICAgIEBwcml2YXRlCiAgKi8KICBf
        aW5zZXJ0RWxlbWVudExhdGVyOiBmdW5jdGlvbihmbikgewogICAgdGhpcy5f
        c2NoZWR1bGVkSW5zZXJ0ID0gRW1iZXIucnVuLnNjaGVkdWxlT25jZSgncmVu
        ZGVyJywgdGhpcywgJ19pbnNlcnRFbGVtZW50JywgZm4pOwogIH0sCgogIF9p
        bnNlcnRFbGVtZW50OiBmdW5jdGlvbiAoZm4pIHsKICAgIHRoaXMuX3NjaGVk
        dWxlZEluc2VydCA9IG51bGw7CiAgICB0aGlzLmN1cnJlbnRTdGF0ZS5pbnNl
        cnRFbGVtZW50KHRoaXMsIGZuKTsKICB9LAoKICAvKioKICAgIEFwcGVuZHMg
        dGhlIHZpZXcncyBlbGVtZW50IHRvIHRoZSBkb2N1bWVudCBib2R5LiBJZiB0
        aGUgdmlldyBkb2VzCiAgICBub3QgaGF2ZSBhbiBIVE1MIHJlcHJlc2VudGF0
        aW9uIHlldCwgYGNyZWF0ZUVsZW1lbnQoKWAgd2lsbCBiZSBjYWxsZWQKICAg
        IGF1dG9tYXRpY2FsbHkuCgogICAgSWYgeW91ciBhcHBsaWNhdGlvbiB1c2Vz
        IHRoZSBgcm9vdEVsZW1lbnRgIHByb3BlcnR5LCB5b3UgbXVzdCBhcHBlbmQK
        ICAgIHRoZSB2aWV3IHdpdGhpbiB0aGF0IGVsZW1lbnQuIFJlbmRlcmluZyB2
        aWV3cyBvdXRzaWRlIG9mIHRoZSBgcm9vdEVsZW1lbnRgCiAgICBpcyBub3Qg
        c3VwcG9ydGVkLgoKICAgIE5vdGUgdGhhdCB0aGlzIG1ldGhvZCBqdXN0IHNj
        aGVkdWxlcyB0aGUgdmlldyB0byBiZSBhcHBlbmRlZDsgdGhlIERPTQogICAg
        ZWxlbWVudCB3aWxsIG5vdCBiZSBhcHBlbmRlZCB0byB0aGUgZG9jdW1lbnQg
        Ym9keSB1bnRpbCBhbGwgYmluZGluZ3MgaGF2ZQogICAgZmluaXNoZWQgc3lu
        Y2hyb25pemluZy4KCiAgICBAbWV0aG9kIGFwcGVuZAogICAgQHJldHVybiB7
        RW1iZXIuVmlld30gcmVjZWl2ZXIKICAqLwogIGFwcGVuZDogZnVuY3Rpb24o
        KSB7CiAgICByZXR1cm4gdGhpcy5hcHBlbmRUbyhkb2N1bWVudC5ib2R5KTsK
        ICB9LAoKICAvKioKICAgIFJlbW92ZXMgdGhlIHZpZXcncyBlbGVtZW50IGZy
        b20gdGhlIGVsZW1lbnQgdG8gd2hpY2ggaXQgaXMgYXR0YWNoZWQuCgogICAg
        QG1ldGhvZCByZW1vdmUKICAgIEByZXR1cm4ge0VtYmVyLlZpZXd9IHJlY2Vp
        dmVyCiAgKi8KICByZW1vdmU6IGZ1bmN0aW9uKCkgewogICAgLy8gV2hhdCB3
        ZSBzaG91bGQgcmVhbGx5IGRvIGhlcmUgaXMgd2FpdCB1bnRpbCB0aGUgZW5k
        IG9mIHRoZSBydW4gbG9vcAogICAgLy8gdG8gZGV0ZXJtaW5lIGlmIHRoZSBl
        bGVtZW50IGhhcyBiZWVuIHJlLWFwcGVuZGVkIHRvIGEgZGlmZmVyZW50CiAg
        ICAvLyBlbGVtZW50LgogICAgLy8gSW4gdGhlIGludGVyaW0sIHdlIHdpbGwg
        anVzdCByZS1yZW5kZXIgaWYgdGhhdCBoYXBwZW5zLiBJdCBpcyBtb3JlCiAg
        ICAvLyBpbXBvcnRhbnQgdGhhbiBlbGVtZW50cyBnZXQgZ2FyYmFnZSBjb2xs
        ZWN0ZWQuCiAgICBpZiAoIXRoaXMucmVtb3ZlZEZyb21ET00pIHsgdGhpcy5k
        ZXN0cm95RWxlbWVudCgpOyB9CiAgICB0aGlzLmludm9rZVJlY3Vyc2l2ZWx5
        KGZ1bmN0aW9uKHZpZXcpIHsKICAgICAgaWYgKHZpZXcuY2xlYXJSZW5kZXJl
        ZENoaWxkcmVuKSB7IHZpZXcuY2xlYXJSZW5kZXJlZENoaWxkcmVuKCk7IH0K
        ICAgIH0pOwogIH0sCgogIGVsZW1lbnRJZDogbnVsbCwKCiAgLyoqCiAgICBB
        dHRlbXB0cyB0byBkaXNjb3ZlciB0aGUgZWxlbWVudCBpbiB0aGUgcGFyZW50
        IGVsZW1lbnQuIFRoZSBkZWZhdWx0CiAgICBpbXBsZW1lbnRhdGlvbiBsb29r
        cyBmb3IgYW4gZWxlbWVudCB3aXRoIGFuIElEIG9mIGBlbGVtZW50SWRgIChv
        ciB0aGUKICAgIHZpZXcncyBndWlkIGlmIGBlbGVtZW50SWRgIGlzIG51bGwp
        LiBZb3UgY2FuIG92ZXJyaWRlIHRoaXMgbWV0aG9kIHRvCiAgICBwcm92aWRl
        IHlvdXIgb3duIGZvcm0gb2YgbG9va3VwLiBGb3IgZXhhbXBsZSwgaWYgeW91
        IHdhbnQgdG8gZGlzY292ZXIgeW91cgogICAgZWxlbWVudCB1c2luZyBhIENT
        UyBjbGFzcyBuYW1lIGluc3RlYWQgb2YgYW4gSUQuCgogICAgQG1ldGhvZCBm
        aW5kRWxlbWVudEluUGFyZW50RWxlbWVudAogICAgQHBhcmFtIHtET01FbGVt
        ZW50fSBwYXJlbnRFbGVtZW50IFRoZSBwYXJlbnQncyBET00gZWxlbWVudAog
        ICAgQHJldHVybiB7RE9NRWxlbWVudH0gVGhlIGRpc2NvdmVyZWQgZWxlbWVu
        dAogICovCiAgZmluZEVsZW1lbnRJblBhcmVudEVsZW1lbnQ6IGZ1bmN0aW9u
        KHBhcmVudEVsZW0pIHsKICAgIHZhciBpZCA9ICIjIiArIHRoaXMuZWxlbWVu
        dElkOwogICAgcmV0dXJuIEVtYmVyLiQoaWQpWzBdIHx8IEVtYmVyLiQoaWQs
        IHBhcmVudEVsZW0pWzBdOwogIH0sCgogIC8qKgogICAgQ3JlYXRlcyBhIERP
        TSByZXByZXNlbnRhdGlvbiBvZiB0aGUgdmlldyBhbmQgYWxsIG9mIGl0cwog
        ICAgY2hpbGQgdmlld3MgYnkgcmVjdXJzaXZlbHkgY2FsbGluZyB0aGUgYHJl
        bmRlcigpYCBtZXRob2QuCgogICAgQWZ0ZXIgdGhlIGVsZW1lbnQgaGFzIGJl
        ZW4gY3JlYXRlZCwgYGRpZEluc2VydEVsZW1lbnRgIHdpbGwKICAgIGJlIGNh
        bGxlZCBvbiB0aGlzIHZpZXcgYW5kIGFsbCBvZiBpdHMgY2hpbGQgdmlld3Mu
        CgogICAgQG1ldGhvZCBjcmVhdGVFbGVtZW50CiAgICBAcmV0dXJuIHtFbWJl
        ci5WaWV3fSByZWNlaXZlcgogICovCiAgY3JlYXRlRWxlbWVudDogZnVuY3Rp
        b24oKSB7CiAgICBpZiAoZ2V0KHRoaXMsICdlbGVtZW50JykpIHsgcmV0dXJu
        IHRoaXM7IH0KCiAgICB2YXIgYnVmZmVyID0gdGhpcy5yZW5kZXJUb0J1ZmZl
        cigpOwogICAgc2V0KHRoaXMsICdlbGVtZW50JywgYnVmZmVyLmVsZW1lbnQo
        KSk7CgogICAgcmV0dXJuIHRoaXM7CiAgfSwKCiAgLyoqCiAgICBDYWxsZWQg
        d2hlbiBhIHZpZXcgaXMgZ29pbmcgdG8gaW5zZXJ0IGFuIGVsZW1lbnQgaW50
        byB0aGUgRE9NLgoKICAgIEBldmVudCB3aWxsSW5zZXJ0RWxlbWVudAogICov
        CiAgd2lsbEluc2VydEVsZW1lbnQ6IEVtYmVyLkssCgogIC8qKgogICAgQ2Fs
        bGVkIHdoZW4gdGhlIGVsZW1lbnQgb2YgdGhlIHZpZXcgaGFzIGJlZW4gaW5z
        ZXJ0ZWQgaW50byB0aGUgRE9NCiAgICBvciBhZnRlciB0aGUgdmlldyB3YXMg
        cmUtcmVuZGVyZWQuIE92ZXJyaWRlIHRoaXMgZnVuY3Rpb24gdG8gZG8gYW55
        CiAgICBzZXQgdXAgdGhhdCByZXF1aXJlcyBhbiBlbGVtZW50IGluIHRoZSBk
        b2N1bWVudCBib2R5LgoKICAgIEBldmVudCBkaWRJbnNlcnRFbGVtZW50CiAg
        Ki8KICBkaWRJbnNlcnRFbGVtZW50OiBFbWJlci5LLAoKICAvKioKICAgIENh
        bGxlZCB3aGVuIHRoZSB2aWV3IGlzIGFib3V0IHRvIHJlcmVuZGVyLCBidXQg
        YmVmb3JlIGFueXRoaW5nIGhhcwogICAgYmVlbiB0b3JuIGRvd24uIFRoaXMg
        aXMgYSBnb29kIG9wcG9ydHVuaXR5IHRvIHRlYXIgZG93biBhbnkgbWFudWFs
        CiAgICBvYnNlcnZlcnMgeW91IGhhdmUgaW5zdGFsbGVkIGJhc2VkIG9uIHRo
        ZSBET00gc3RhdGUKCiAgICBAZXZlbnQgd2lsbENsZWFyUmVuZGVyCiAgKi8K
        ICB3aWxsQ2xlYXJSZW5kZXI6IEVtYmVyLkssCgogIC8qKgogICAgUnVuIHRo
        aXMgY2FsbGJhY2sgb24gdGhlIGN1cnJlbnQgdmlldyAodW5sZXNzIGluY2x1
        ZGVTZWxmIGlzIGZhbHNlKSBhbmQgcmVjdXJzaXZlbHkgb24gY2hpbGQgdmll
        d3MuCgogICAgQG1ldGhvZCBpbnZva2VSZWN1cnNpdmVseQogICAgQHBhcmFt
        IGZuIHtGdW5jdGlvbn0KICAgIEBwYXJhbSBpbmNsdWRlU2VsZiB7Qm9vbGVh
        bn0gSW5jbHVkZXMgaXRzZWxmIGlmIHRydWUuCiAgICBAcHJpdmF0ZQogICov
        CiAgaW52b2tlUmVjdXJzaXZlbHk6IGZ1bmN0aW9uKGZuLCBpbmNsdWRlU2Vs
        ZikgewogICAgdmFyIGNoaWxkVmlld3MgPSAoaW5jbHVkZVNlbGYgPT09IGZh
        bHNlKSA/IHRoaXMuX2NoaWxkVmlld3MgOiBbdGhpc107CiAgICB2YXIgY3Vy
        cmVudFZpZXdzLCB2aWV3LCBjdXJyZW50Q2hpbGRWaWV3czsKCiAgICB3aGls
        ZSAoY2hpbGRWaWV3cy5sZW5ndGgpIHsKICAgICAgY3VycmVudFZpZXdzID0g
        Y2hpbGRWaWV3cy5zbGljZSgpOwogICAgICBjaGlsZFZpZXdzID0gW107Cgog
        ICAgICBmb3IgKHZhciBpPTAsIGw9Y3VycmVudFZpZXdzLmxlbmd0aDsgaTxs
        OyBpKyspIHsKICAgICAgICB2aWV3ID0gY3VycmVudFZpZXdzW2ldOwogICAg
        ICAgIGN1cnJlbnRDaGlsZFZpZXdzID0gdmlldy5fY2hpbGRWaWV3cyA/IHZp
        ZXcuX2NoaWxkVmlld3Muc2xpY2UoMCkgOiBudWxsOwogICAgICAgIGZuKHZp
        ZXcpOwogICAgICAgIGlmIChjdXJyZW50Q2hpbGRWaWV3cykgewogICAgICAg
        ICAgY2hpbGRWaWV3cy5wdXNoLmFwcGx5KGNoaWxkVmlld3MsIGN1cnJlbnRD
        aGlsZFZpZXdzKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9LAoKICB0
        cmlnZ2VyUmVjdXJzaXZlbHk6IGZ1bmN0aW9uKGV2ZW50TmFtZSkgewogICAg
        dmFyIGNoaWxkVmlld3MgPSBbdGhpc10sIGN1cnJlbnRWaWV3cywgdmlldywg
        Y3VycmVudENoaWxkVmlld3M7CgogICAgd2hpbGUgKGNoaWxkVmlld3MubGVu
        Z3RoKSB7CiAgICAgIGN1cnJlbnRWaWV3cyA9IGNoaWxkVmlld3Muc2xpY2Uo
        KTsKICAgICAgY2hpbGRWaWV3cyA9IFtdOwoKICAgICAgZm9yICh2YXIgaT0w
        LCBsPWN1cnJlbnRWaWV3cy5sZW5ndGg7IGk8bDsgaSsrKSB7CiAgICAgICAg
        dmlldyA9IGN1cnJlbnRWaWV3c1tpXTsKICAgICAgICBjdXJyZW50Q2hpbGRW
        aWV3cyA9IHZpZXcuX2NoaWxkVmlld3MgPyB2aWV3Ll9jaGlsZFZpZXdzLnNs
        aWNlKDApIDogbnVsbDsKICAgICAgICBpZiAodmlldy50cmlnZ2VyKSB7IHZp
        ZXcudHJpZ2dlcihldmVudE5hbWUpOyB9CiAgICAgICAgaWYgKGN1cnJlbnRD
        aGlsZFZpZXdzKSB7CiAgICAgICAgICBjaGlsZFZpZXdzLnB1c2guYXBwbHko
        Y2hpbGRWaWV3cywgY3VycmVudENoaWxkVmlld3MpOwogICAgICAgIH0KCiAg
        ICAgIH0KICAgIH0KICB9LAoKICB2aWV3SGllcmFyY2h5Q29sbGVjdGlvbjog
        ZnVuY3Rpb24oKSB7CiAgICB2YXIgY3VycmVudFZpZXcsIHZpZXdDb2xsZWN0
        aW9uID0gbmV3IFZpZXdDb2xsZWN0aW9uKFt0aGlzXSk7CgogICAgZm9yICh2
        YXIgaSA9IDA7IGkgPCB2aWV3Q29sbGVjdGlvbi5sZW5ndGg7IGkrKykgewog
        ICAgICBjdXJyZW50VmlldyA9IHZpZXdDb2xsZWN0aW9uLm9iamVjdEF0KGkp
        OwogICAgICBpZiAoY3VycmVudFZpZXcuX2NoaWxkVmlld3MpIHsKICAgICAg
        ICB2aWV3Q29sbGVjdGlvbi5wdXNoLmFwcGx5KHZpZXdDb2xsZWN0aW9uLCBj
        dXJyZW50Vmlldy5fY2hpbGRWaWV3cyk7CiAgICAgIH0KICAgIH0KCiAgICBy
        ZXR1cm4gdmlld0NvbGxlY3Rpb247CiAgfSwKCiAgLyoqCiAgICBEZXN0cm95
        cyBhbnkgZXhpc3RpbmcgZWxlbWVudCBhbG9uZyB3aXRoIHRoZSBlbGVtZW50
        IGZvciBhbnkgY2hpbGQgdmlld3MKICAgIGFzIHdlbGwuIElmIHRoZSB2aWV3
        IGRvZXMgbm90IGN1cnJlbnRseSBoYXZlIGEgZWxlbWVudCwgdGhlbiB0aGlz
        IG1ldGhvZAogICAgd2lsbCBkbyBub3RoaW5nLgoKICAgIElmIHlvdSBpbXBs
        ZW1lbnQgYHdpbGxEZXN0cm95RWxlbWVudCgpYCBvbiB5b3VyIHZpZXcsIHRo
        ZW4gdGhpcyBtZXRob2Qgd2lsbAogICAgYmUgaW52b2tlZCBvbiB5b3VyIHZp
        ZXcgYmVmb3JlIHlvdXIgZWxlbWVudCBpcyBkZXN0cm95ZWQgdG8gZ2l2ZSB5
        b3UgYQogICAgY2hhbmNlIHRvIGNsZWFuIHVwIGFueSBldmVudCBoYW5kbGVy
        cywgZXRjLgoKICAgIElmIHlvdSB3cml0ZSBhIGB3aWxsRGVzdHJveUVsZW1l
        bnQoKWAgaGFuZGxlciwgeW91IGNhbiBhc3N1bWUgdGhhdCB5b3VyCiAgICBg
        ZGlkSW5zZXJ0RWxlbWVudCgpYCBoYW5kbGVyIHdhcyBjYWxsZWQgZWFybGll
        ciBmb3IgdGhlIHNhbWUgZWxlbWVudC4KCiAgICBZb3Ugc2hvdWxkIG5vdCBj
        YWxsIG9yIG92ZXJyaWRlIHRoaXMgbWV0aG9kIHlvdXJzZWxmLCBidXQgeW91
        IG1heQogICAgd2FudCB0byBpbXBsZW1lbnQgdGhlIGFib3ZlIGNhbGxiYWNr
        cy4KCiAgICBAbWV0aG9kIGRlc3Ryb3lFbGVtZW50CiAgICBAcmV0dXJuIHtF
        bWJlci5WaWV3fSByZWNlaXZlcgogICovCiAgZGVzdHJveUVsZW1lbnQ6IGZ1
        bmN0aW9uKCkgewogICAgcmV0dXJuIHRoaXMuY3VycmVudFN0YXRlLmRlc3Ry
        b3lFbGVtZW50KHRoaXMpOwogIH0sCgogIC8qKgogICAgQ2FsbGVkIHdoZW4g
        dGhlIGVsZW1lbnQgb2YgdGhlIHZpZXcgaXMgZ29pbmcgdG8gYmUgZGVzdHJv
        eWVkLiBPdmVycmlkZQogICAgdGhpcyBmdW5jdGlvbiB0byBkbyBhbnkgdGVh
        cmRvd24gdGhhdCByZXF1aXJlcyBhbiBlbGVtZW50LCBsaWtlIHJlbW92aW5n
        CiAgICBldmVudCBsaXN0ZW5lcnMuCgogICAgQGV2ZW50IHdpbGxEZXN0cm95
        RWxlbWVudAogICovCiAgd2lsbERlc3Ryb3lFbGVtZW50OiBFbWJlci5LLAoK
        ICAvKioKICAgIFRyaWdnZXJzIHRoZSBgd2lsbERlc3Ryb3lFbGVtZW50YCBl
        dmVudCAod2hpY2ggaW52b2tlcyB0aGUKICAgIGB3aWxsRGVzdHJveUVsZW1l
        bnQoKWAgbWV0aG9kIGlmIGl0IGV4aXN0cykgb24gdGhpcyB2aWV3IGFuZCBh
        bGwgY2hpbGQKICAgIHZpZXdzLgoKICAgIEJlZm9yZSB0cmlnZ2VyaW5nIGB3
        aWxsRGVzdHJveUVsZW1lbnRgLCBpdCBmaXJzdCB0cmlnZ2VycyB0aGUKICAg
        IGB3aWxsQ2xlYXJSZW5kZXJgIGV2ZW50IHJlY3Vyc2l2ZWx5LgoKICAgIEBt
        ZXRob2QgX25vdGlmeVdpbGxEZXN0cm95RWxlbWVudAogICAgQHByaXZhdGUK
        ICAqLwogIF9ub3RpZnlXaWxsRGVzdHJveUVsZW1lbnQ6IGZ1bmN0aW9uKCkg
        ewogICAgdmFyIHZpZXdDb2xsZWN0aW9uID0gdGhpcy52aWV3SGllcmFyY2h5
        Q29sbGVjdGlvbigpOwogICAgdmlld0NvbGxlY3Rpb24udHJpZ2dlcignd2ls
        bENsZWFyUmVuZGVyJyk7CiAgICB2aWV3Q29sbGVjdGlvbi50cmlnZ2VyKCd3
        aWxsRGVzdHJveUVsZW1lbnQnKTsKICAgIHJldHVybiB2aWV3Q29sbGVjdGlv
        bjsKICB9LAoKICAvKioKICAgIElmIHRoaXMgdmlldydzIGVsZW1lbnQgY2hh
        bmdlcywgd2UgbmVlZCB0byBpbnZhbGlkYXRlIHRoZSBjYWNoZXMgb2Ygb3Vy
        CiAgICBjaGlsZCB2aWV3cyBzbyB0aGF0IHdlIGRvIG5vdCByZXRhaW4gcmVm
        ZXJlbmNlcyB0byBET00gZWxlbWVudHMgdGhhdCBhcmUKICAgIG5vIGxvbmdl
        ciBuZWVkZWQuCgogICAgQG1ldGhvZCBfZWxlbWVudERpZENoYW5nZQogICAg
        QHByaXZhdGUKICAqLwogIF9lbGVtZW50RGlkQ2hhbmdlOiBFbWJlci5vYnNl
        cnZlcignZWxlbWVudCcsIGZ1bmN0aW9uKCkgewogICAgdGhpcy5mb3JFYWNo
        Q2hpbGRWaWV3KGZ1bmN0aW9uKHZpZXcpIHsKICAgICAgZGVsZXRlIG1ldGEo
        dmlldykuY2FjaGUuZWxlbWVudDsKICAgIH0pOwogIH0pLAoKICAvKioKICAg
        IENhbGxlZCB3aGVuIHRoZSBwYXJlbnRWaWV3IHByb3BlcnR5IGhhcyBjaGFu
        Z2VkLgoKICAgIEBldmVudCBwYXJlbnRWaWV3RGlkQ2hhbmdlCiAgKi8KICBw
        YXJlbnRWaWV3RGlkQ2hhbmdlOiBFbWJlci5LLAoKICBpbnN0cnVtZW50TmFt
        ZTogJ3ZpZXcnLAoKICBpbnN0cnVtZW50RGV0YWlsczogZnVuY3Rpb24oaGFz
        aCkgewogICAgaGFzaC50ZW1wbGF0ZSA9IGdldCh0aGlzLCAndGVtcGxhdGVO
        YW1lJyk7CiAgICB0aGlzLl9zdXBlcihoYXNoKTsKICB9LAoKICBfcmVuZGVy
        VG9CdWZmZXI6IGZ1bmN0aW9uKHBhcmVudEJ1ZmZlciwgYnVmZmVyT3BlcmF0
        aW9uKSB7CiAgICB0aGlzLmxlbmd0aEJlZm9yZVJlbmRlciA9IHRoaXMuX2No
        aWxkVmlld3MubGVuZ3RoOwogICAgdmFyIGJ1ZmZlciA9IHRoaXMuX3N1cGVy
        KHBhcmVudEJ1ZmZlciwgYnVmZmVyT3BlcmF0aW9uKTsKICAgIHRoaXMubGVu
        Z3RoQWZ0ZXJSZW5kZXIgPSB0aGlzLl9jaGlsZFZpZXdzLmxlbmd0aDsKCiAg
        ICByZXR1cm4gYnVmZmVyOwogIH0sCgogIHJlbmRlclRvQnVmZmVySWZOZWVk
        ZWQ6IGZ1bmN0aW9uIChidWZmZXIpIHsKICAgIHJldHVybiB0aGlzLmN1cnJl
        bnRTdGF0ZS5yZW5kZXJUb0J1ZmZlcklmTmVlZGVkKHRoaXMsIGJ1ZmZlcik7
        CiAgfSwKCiAgYmVmb3JlUmVuZGVyOiBmdW5jdGlvbihidWZmZXIpIHsKICAg
        IHRoaXMuYXBwbHlBdHRyaWJ1dGVzVG9CdWZmZXIoYnVmZmVyKTsKICAgIGJ1
        ZmZlci5wdXNoT3BlbmluZ1RhZygpOwogIH0sCgogIGFmdGVyUmVuZGVyOiBm
        dW5jdGlvbihidWZmZXIpIHsKICAgIGJ1ZmZlci5wdXNoQ2xvc2luZ1RhZygp
        OwogIH0sCgogIGFwcGx5QXR0cmlidXRlc1RvQnVmZmVyOiBmdW5jdGlvbihi
        dWZmZXIpIHsKICAgIC8vIENyZWF0ZXMgb2JzZXJ2ZXJzIGZvciBhbGwgcmVn
        aXN0ZXJlZCBjbGFzcyBuYW1lIGFuZCBhdHRyaWJ1dGUgYmluZGluZ3MsCiAg
        ICAvLyB0aGVuIGFkZHMgdGhlbSB0byB0aGUgZWxlbWVudC4KICAgIHZhciBj
        bGFzc05hbWVCaW5kaW5ncyA9IGdldCh0aGlzLCAnY2xhc3NOYW1lQmluZGlu
        Z3MnKTsKICAgIGlmIChjbGFzc05hbWVCaW5kaW5ncy5sZW5ndGgpIHsKICAg
        ICAgdGhpcy5fYXBwbHlDbGFzc05hbWVCaW5kaW5ncyhjbGFzc05hbWVCaW5k
        aW5ncyk7CiAgICB9CgogICAgLy8gUGFzcyB0aGUgcmVuZGVyIGJ1ZmZlciBz
        byB0aGUgbWV0aG9kIGNhbiBhcHBseSBhdHRyaWJ1dGVzIGRpcmVjdGx5Lgog
        ICAgLy8gVGhpcyBpc24ndCBuZWVkZWQgZm9yIGNsYXNzIG5hbWUgYmluZGlu
        Z3MgYmVjYXVzZSB0aGV5IHVzZSB0aGUKICAgIC8vIGV4aXN0aW5nIGNsYXNz
        TmFtZXMgaW5mcmFzdHJ1Y3R1cmUuCiAgICB2YXIgYXR0cmlidXRlQmluZGlu
        Z3MgPSBnZXQodGhpcywgJ2F0dHJpYnV0ZUJpbmRpbmdzJyk7CiAgICBpZiAo
        YXR0cmlidXRlQmluZGluZ3MubGVuZ3RoKSB7CiAgICAgIHRoaXMuX2FwcGx5
        QXR0cmlidXRlQmluZGluZ3MoYnVmZmVyLCBhdHRyaWJ1dGVCaW5kaW5ncyk7
        CiAgICB9CgogICAgYnVmZmVyLnNldENsYXNzZXModGhpcy5jbGFzc05hbWVz
        KTsKICAgIGJ1ZmZlci5pZCh0aGlzLmVsZW1lbnRJZCk7CgogICAgdmFyIHJv
        bGUgPSBnZXQodGhpcywgJ2FyaWFSb2xlJyk7CiAgICBpZiAocm9sZSkgewog
        ICAgICBidWZmZXIuYXR0cigncm9sZScsIHJvbGUpOwogICAgfQoKICAgIGlm
        IChnZXQodGhpcywgJ2lzVmlzaWJsZScpID09PSBmYWxzZSkgewogICAgICBi
        dWZmZXIuc3R5bGUoJ2Rpc3BsYXknLCAnbm9uZScpOwogICAgfQogIH0sCgog
        IC8vIC4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4u
        Li4uLi4uLi4uLi4uLi4uLi4KICAvLyBTVEFOREFSRCBSRU5ERVIgUFJPUEVS
        VElFUwogIC8vCgogIC8qKgogICAgVGFnIG5hbWUgZm9yIHRoZSB2aWV3J3Mg
        b3V0ZXIgZWxlbWVudC4gVGhlIHRhZyBuYW1lIGlzIG9ubHkgdXNlZCB3aGVu
        IGFuCiAgICBlbGVtZW50IGlzIGZpcnN0IGNyZWF0ZWQuIElmIHlvdSBjaGFu
        Z2UgdGhlIGB0YWdOYW1lYCBmb3IgYW4gZWxlbWVudCwgeW91CiAgICBtdXN0
        IGRlc3Ryb3kgYW5kIHJlY3JlYXRlIHRoZSB2aWV3IGVsZW1lbnQuCgogICAg
        QnkgZGVmYXVsdCwgdGhlIHJlbmRlciBidWZmZXIgd2lsbCB1c2UgYSBgPGRp
        dj5gIHRhZyBmb3Igdmlld3MuCgogICAgQHByb3BlcnR5IHRhZ05hbWUKICAg
        IEB0eXBlIFN0cmluZwogICAgQGRlZmF1bHQgbnVsbAogICovCgogIC8vIFdl
        IGxlYXZlIHRoaXMgbnVsbCBieSBkZWZhdWx0IHNvIHdlIGNhbiB0ZWxsIHRo
        ZSBkaWZmZXJlbmNlIGJldHdlZW4KICAvLyB0aGUgZGVmYXVsdCBjYXNlIGFu
        ZCBhIHVzZXItc3BlY2lmaWVkIHRhZy4KICB0YWdOYW1lOiBudWxsLAoKICAv
        KioKICAgIFRoZSBXQUktQVJJQSByb2xlIG9mIHRoZSBjb250cm9sIHJlcHJl
        c2VudGVkIGJ5IHRoaXMgdmlldy4gRm9yIGV4YW1wbGUsIGEKICAgIGJ1dHRv
        biBtYXkgaGF2ZSBhIHJvbGUgb2YgdHlwZSAnYnV0dG9uJywgb3IgYSBwYW5l
        IG1heSBoYXZlIGEgcm9sZSBvZgogICAgdHlwZSAnYWxlcnRkaWFsb2cnLiBU
        aGlzIHByb3BlcnR5IGlzIHVzZWQgYnkgYXNzaXN0aXZlIHNvZnR3YXJlIHRv
        IGhlbHAKICAgIHZpc3VhbGx5IGNoYWxsZW5nZWQgdXNlcnMgbmF2aWdhdGUg
        cmljaCB3ZWIgYXBwbGljYXRpb25zLgoKICAgIFRoZSBmdWxsIGxpc3Qgb2Yg
        dmFsaWQgV0FJLUFSSUEgcm9sZXMgaXMgYXZhaWxhYmxlIGF0OgogICAgW2h0
        dHA6Ly93d3cudzMub3JnL1RSL3dhaS1hcmlhL3JvbGVzI3JvbGVzX2NhdGVn
        b3JpemF0aW9uXShodHRwOi8vd3d3LnczLm9yZy9UUi93YWktYXJpYS9yb2xl
        cyNyb2xlc19jYXRlZ29yaXphdGlvbikKCiAgICBAcHJvcGVydHkgYXJpYVJv
        bGUKICAgIEB0eXBlIFN0cmluZwogICAgQGRlZmF1bHQgbnVsbAogICovCiAg
        YXJpYVJvbGU6IG51bGwsCgogIC8qKgogICAgU3RhbmRhcmQgQ1NTIGNsYXNz
        IG5hbWVzIHRvIGFwcGx5IHRvIHRoZSB2aWV3J3Mgb3V0ZXIgZWxlbWVudC4g
        VGhpcwogICAgcHJvcGVydHkgYXV0b21hdGljYWxseSBpbmhlcml0cyBhbnkg
        Y2xhc3MgbmFtZXMgZGVmaW5lZCBieSB0aGUgdmlldydzCiAgICBzdXBlcmNs
        YXNzZXMgYXMgd2VsbC4KCiAgICBAcHJvcGVydHkgY2xhc3NOYW1lcwogICAg
        QHR5cGUgQXJyYXkKICAgIEBkZWZhdWx0IFsnZW1iZXItdmlldyddCiAgKi8K
        ICBjbGFzc05hbWVzOiBbJ2VtYmVyLXZpZXcnXSwKCiAgLyoqCiAgICBBIGxp
        c3Qgb2YgcHJvcGVydGllcyBvZiB0aGUgdmlldyB0byBhcHBseSBhcyBjbGFz
        cyBuYW1lcy4gSWYgdGhlIHByb3BlcnR5CiAgICBpcyBhIHN0cmluZyB2YWx1
        ZSwgdGhlIHZhbHVlIG9mIHRoYXQgc3RyaW5nIHdpbGwgYmUgYXBwbGllZCBh
        cyBhIGNsYXNzCiAgICBuYW1lLgoKICAgIGBgYGphdmFzY3JpcHQKICAgIC8v
        IEFwcGxpZXMgdGhlICdoaWdoJyBjbGFzcyB0byB0aGUgdmlldyBlbGVtZW50
        CiAgICBFbWJlci5WaWV3LmV4dGVuZCh7CiAgICAgIGNsYXNzTmFtZUJpbmRp
        bmdzOiBbJ3ByaW9yaXR5J10KICAgICAgcHJpb3JpdHk6ICdoaWdoJwogICAg
        fSk7CiAgICBgYGAKCiAgICBJZiB0aGUgdmFsdWUgb2YgdGhlIHByb3BlcnR5
        IGlzIGEgQm9vbGVhbiwgdGhlIG5hbWUgb2YgdGhhdCBwcm9wZXJ0eSBpcwog
        ICAgYWRkZWQgYXMgYSBkYXNoZXJpemVkIGNsYXNzIG5hbWUuCgogICAgYGBg
        amF2YXNjcmlwdAogICAgLy8gQXBwbGllcyB0aGUgJ2lzLXVyZ2VudCcgY2xh
        c3MgdG8gdGhlIHZpZXcgZWxlbWVudAogICAgRW1iZXIuVmlldy5leHRlbmQo
        ewogICAgICBjbGFzc05hbWVCaW5kaW5nczogWydpc1VyZ2VudCddCiAgICAg
        IGlzVXJnZW50OiB0cnVlCiAgICB9KTsKICAgIGBgYAoKICAgIElmIHlvdSB3
        b3VsZCBwcmVmZXIgdG8gdXNlIGEgY3VzdG9tIHZhbHVlIGluc3RlYWQgb2Yg
        dGhlIGRhc2hlcml6ZWQKICAgIHByb3BlcnR5IG5hbWUsIHlvdSBjYW4gcGFz
        cyBhIGJpbmRpbmcgbGlrZSB0aGlzOgoKICAgIGBgYGphdmFzY3JpcHQKICAg
        IC8vIEFwcGxpZXMgdGhlICd1cmdlbnQnIGNsYXNzIHRvIHRoZSB2aWV3IGVs
        ZW1lbnQKICAgIEVtYmVyLlZpZXcuZXh0ZW5kKHsKICAgICAgY2xhc3NOYW1l
        QmluZGluZ3M6IFsnaXNVcmdlbnQ6dXJnZW50J10KICAgICAgaXNVcmdlbnQ6
        IHRydWUKICAgIH0pOwogICAgYGBgCgogICAgVGhpcyBsaXN0IG9mIHByb3Bl
        cnRpZXMgaXMgaW5oZXJpdGVkIGZyb20gdGhlIHZpZXcncyBzdXBlcmNsYXNz
        ZXMgYXMgd2VsbC4KCiAgICBAcHJvcGVydHkgY2xhc3NOYW1lQmluZGluZ3MK
        ICAgIEB0eXBlIEFycmF5CiAgICBAZGVmYXVsdCBbXQogICovCiAgY2xhc3NO
        YW1lQmluZGluZ3M6IEVNUFRZX0FSUkFZLAoKICAvKioKICAgIEEgbGlzdCBv
        ZiBwcm9wZXJ0aWVzIG9mIHRoZSB2aWV3IHRvIGFwcGx5IGFzIGF0dHJpYnV0
        ZXMuIElmIHRoZSBwcm9wZXJ0eSBpcwogICAgYSBzdHJpbmcgdmFsdWUsIHRo
        ZSB2YWx1ZSBvZiB0aGF0IHN0cmluZyB3aWxsIGJlIGFwcGxpZWQgYXMgdGhl
        IGF0dHJpYnV0ZS4KCiAgICBgYGBqYXZhc2NyaXB0CiAgICAvLyBBcHBsaWVz
        IHRoZSB0eXBlIGF0dHJpYnV0ZSB0byB0aGUgZWxlbWVudAogICAgLy8gd2l0
        aCB0aGUgdmFsdWUgImJ1dHRvbiIsIGxpa2UgPGRpdiB0eXBlPSJidXR0b24i
        PgogICAgRW1iZXIuVmlldy5leHRlbmQoewogICAgICBhdHRyaWJ1dGVCaW5k
        aW5nczogWyd0eXBlJ10sCiAgICAgIHR5cGU6ICdidXR0b24nCiAgICB9KTsK
        ICAgIGBgYAoKICAgIElmIHRoZSB2YWx1ZSBvZiB0aGUgcHJvcGVydHkgaXMg
        YSBCb29sZWFuLCB0aGUgbmFtZSBvZiB0aGF0IHByb3BlcnR5IGlzCiAgICBh
        ZGRlZCBhcyBhbiBhdHRyaWJ1dGUuCgogICAgYGBgamF2YXNjcmlwdAogICAg
        Ly8gUmVuZGVycyBzb21ldGhpbmcgbGlrZSA8ZGl2IGVuYWJsZWQ9ImVuYWJs
        ZWQiPgogICAgRW1iZXIuVmlldy5leHRlbmQoewogICAgICBhdHRyaWJ1dGVC
        aW5kaW5nczogWydlbmFibGVkJ10sCiAgICAgIGVuYWJsZWQ6IHRydWUKICAg
        IH0pOwogICAgYGBgCgogICAgQHByb3BlcnR5IGF0dHJpYnV0ZUJpbmRpbmdz
        CiAgKi8KICBhdHRyaWJ1dGVCaW5kaW5nczogRU1QVFlfQVJSQVksCgogIC8v
        IC4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4u
        Li4uLi4uLi4uLi4KICAvLyBDT1JFIERJU1BMQVkgTUVUSE9EUwogIC8vCgog
        IC8qKgogICAgU2V0dXAgYSB2aWV3LCBidXQgZG8gbm90IGZpbmlzaCB3YWtp
        bmcgaXQgdXAuCgogICAgKiBjb25maWd1cmUgYGNoaWxkVmlld3NgCiAgICAq
        IHJlZ2lzdGVyIHRoZSB2aWV3IHdpdGggdGhlIGdsb2JhbCB2aWV3cyBoYXNo
        LCB3aGljaCBpcyB1c2VkIGZvciBldmVudAogICAgICBkaXNwYXRjaAoKICAg
        IEBtZXRob2QgaW5pdAogICAgQHByaXZhdGUKICAqLwogIGluaXQ6IGZ1bmN0
        aW9uKCkgewogICAgdGhpcy5lbGVtZW50SWQgPSB0aGlzLmVsZW1lbnRJZCB8
        fCBndWlkRm9yKHRoaXMpOwoKICAgIHRoaXMuX3N1cGVyKCk7CgogICAgLy8g
        c2V0dXAgY2hpbGQgdmlld3MuIGJlIHN1cmUgdG8gY2xvbmUgdGhlIGNoaWxk
        IHZpZXdzIGFycmF5IGZpcnN0CiAgICB0aGlzLl9jaGlsZFZpZXdzID0gdGhp
        cy5fY2hpbGRWaWV3cy5zbGljZSgpOwoKICAgIEVtYmVyLmFzc2VydCgiT25s
        eSBhcnJheXMgYXJlIGFsbG93ZWQgZm9yICdjbGFzc05hbWVCaW5kaW5ncyci
        LCBFbWJlci50eXBlT2YodGhpcy5jbGFzc05hbWVCaW5kaW5ncykgPT09ICdh
        cnJheScpOwogICAgdGhpcy5jbGFzc05hbWVCaW5kaW5ncyA9IEVtYmVyLkEo
        dGhpcy5jbGFzc05hbWVCaW5kaW5ncy5zbGljZSgpKTsKCiAgICBFbWJlci5h
        c3NlcnQoIk9ubHkgYXJyYXlzIGFyZSBhbGxvd2VkIGZvciAnY2xhc3NOYW1l
        cyciLCBFbWJlci50eXBlT2YodGhpcy5jbGFzc05hbWVzKSA9PT0gJ2FycmF5
        Jyk7CiAgICB0aGlzLmNsYXNzTmFtZXMgPSBFbWJlci5BKHRoaXMuY2xhc3NO
        YW1lcy5zbGljZSgpKTsKICB9LAoKICBhcHBlbmRDaGlsZDogZnVuY3Rpb24o
        dmlldywgb3B0aW9ucykgewogICAgcmV0dXJuIHRoaXMuY3VycmVudFN0YXRl
        LmFwcGVuZENoaWxkKHRoaXMsIHZpZXcsIG9wdGlvbnMpOwogIH0sCgogIC8q
        KgogICAgUmVtb3ZlcyB0aGUgY2hpbGQgdmlldyBmcm9tIHRoZSBwYXJlbnQg
        dmlldy4KCiAgICBAbWV0aG9kIHJlbW92ZUNoaWxkCiAgICBAcGFyYW0ge0Vt
        YmVyLlZpZXd9IHZpZXcKICAgIEByZXR1cm4ge0VtYmVyLlZpZXd9IHJlY2Vp
        dmVyCiAgKi8KICByZW1vdmVDaGlsZDogZnVuY3Rpb24odmlldykgewogICAg
        Ly8gSWYgd2UncmUgZGVzdHJveWluZywgdGhlIGVudGlyZSBzdWJ0cmVlIHdp
        bGwgYmUKICAgIC8vIGZyZWVkLCBhbmQgdGhlIERPTSB3aWxsIGJlIGhhbmRs
        ZWQgc2VwYXJhdGVseSwKICAgIC8vIHNvIG5vIG5lZWQgdG8gbWVzcyB3aXRo
        IGNoaWxkVmlld3MuCiAgICBpZiAodGhpcy5pc0Rlc3Ryb3lpbmcpIHsgcmV0
        dXJuOyB9CgogICAgLy8gdXBkYXRlIHBhcmVudCBub2RlCiAgICBzZXQodmll
        dywgJ19wYXJlbnRWaWV3JywgbnVsbCk7CgogICAgLy8gcmVtb3ZlIHZpZXcg
        ZnJvbSBjaGlsZFZpZXdzIGFycmF5LgogICAgdmFyIGNoaWxkVmlld3MgPSB0
        aGlzLl9jaGlsZFZpZXdzOwoKICAgIEVtYmVyLkVudW1lcmFibGVVdGlscy5y
        ZW1vdmVPYmplY3QoY2hpbGRWaWV3cywgdmlldyk7CgogICAgdGhpcy5wcm9w
        ZXJ0eURpZENoYW5nZSgnY2hpbGRWaWV3cycpOyAvLyBIVUg/ISB3aGF0IGhh
        cHBlbmVkIHRvIHdpbGwgY2hhbmdlPwoKICAgIHJldHVybiB0aGlzOwogIH0s
        CgogIC8qKgogICAgUmVtb3ZlcyBhbGwgY2hpbGRyZW4gZnJvbSB0aGUgYHBh
        cmVudFZpZXdgLgoKICAgIEBtZXRob2QgcmVtb3ZlQWxsQ2hpbGRyZW4KICAg
        IEByZXR1cm4ge0VtYmVyLlZpZXd9IHJlY2VpdmVyCiAgKi8KICByZW1vdmVB
        bGxDaGlsZHJlbjogZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gdGhpcy5tdXRh
        dGVDaGlsZFZpZXdzKGZ1bmN0aW9uKHBhcmVudFZpZXcsIHZpZXcpIHsKICAg
        ICAgcGFyZW50Vmlldy5yZW1vdmVDaGlsZCh2aWV3KTsKICAgIH0pOwogIH0s
        CgogIGRlc3Ryb3lBbGxDaGlsZHJlbjogZnVuY3Rpb24oKSB7CiAgICByZXR1
        cm4gdGhpcy5tdXRhdGVDaGlsZFZpZXdzKGZ1bmN0aW9uKHBhcmVudFZpZXcs
        IHZpZXcpIHsKICAgICAgdmlldy5kZXN0cm95KCk7CiAgICB9KTsKICB9LAoK
        ICAvKioKICAgIFJlbW92ZXMgdGhlIHZpZXcgZnJvbSBpdHMgYHBhcmVudFZp
        ZXdgLCBpZiBvbmUgaXMgZm91bmQuIE90aGVyd2lzZQogICAgZG9lcyBub3Ro
        aW5nLgoKICAgIEBtZXRob2QgcmVtb3ZlRnJvbVBhcmVudAogICAgQHJldHVy
        biB7RW1iZXIuVmlld30gcmVjZWl2ZXIKICAqLwogIHJlbW92ZUZyb21QYXJl
        bnQ6IGZ1bmN0aW9uKCkgewogICAgdmFyIHBhcmVudCA9IHRoaXMuX3BhcmVu
        dFZpZXc7CgogICAgLy8gUmVtb3ZlIERPTSBlbGVtZW50IGZyb20gcGFyZW50
        CiAgICB0aGlzLnJlbW92ZSgpOwoKICAgIGlmIChwYXJlbnQpIHsgcGFyZW50
        LnJlbW92ZUNoaWxkKHRoaXMpOyB9CiAgICByZXR1cm4gdGhpczsKICB9LAoK
        ICAvKioKICAgIFlvdSBtdXN0IGNhbGwgYGRlc3Ryb3lgIG9uIGEgdmlldyB0
        byBkZXN0cm95IHRoZSB2aWV3IChhbmQgYWxsIG9mIGl0cwogICAgY2hpbGQg
        dmlld3MpLiBUaGlzIHdpbGwgcmVtb3ZlIHRoZSB2aWV3IGZyb20gYW55IHBh
        cmVudCBub2RlLCB0aGVuIG1ha2UKICAgIHN1cmUgdGhhdCB0aGUgRE9NIGVs
        ZW1lbnQgbWFuYWdlZCBieSB0aGUgdmlldyBjYW4gYmUgcmVsZWFzZWQgYnkg
        dGhlCiAgICBtZW1vcnkgbWFuYWdlci4KCiAgICBAbWV0aG9kIGRlc3Ryb3kK
        ICAqLwogIGRlc3Ryb3k6IGZ1bmN0aW9uKCkgewogICAgdmFyIGNoaWxkVmll
        d3MgPSB0aGlzLl9jaGlsZFZpZXdzLAogICAgICAgIC8vIGdldCBwYXJlbnRW
        aWV3IGJlZm9yZSBjYWxsaW5nIHN1cGVyIGJlY2F1c2UgaXQnbGwgYmUgZGVz
        dHJveWVkCiAgICAgICAgbm9uVmlydHVhbFBhcmVudFZpZXcgPSBnZXQodGhp
        cywgJ3BhcmVudFZpZXcnKSwKICAgICAgICB2aWV3TmFtZSA9IHRoaXMudmll
        d05hbWUsCiAgICAgICAgY2hpbGRMZW4sIGk7CgogICAgaWYgKCF0aGlzLl9z
        dXBlcigpKSB7IHJldHVybjsgfQoKICAgIGNoaWxkTGVuID0gY2hpbGRWaWV3
        cy5sZW5ndGg7CiAgICBmb3IgKGk9Y2hpbGRMZW4tMTsgaT49MDsgaS0tKSB7
        CiAgICAgIGNoaWxkVmlld3NbaV0ucmVtb3ZlZEZyb21ET00gPSB0cnVlOwog
        ICAgfQoKICAgIC8vIHJlbW92ZSBmcm9tIG5vbi12aXJ0dWFsIHBhcmVudCB2
        aWV3IGlmIHZpZXdOYW1lIHdhcyBzcGVjaWZpZWQKICAgIGlmICh2aWV3TmFt
        ZSAmJiBub25WaXJ0dWFsUGFyZW50VmlldykgewogICAgICBub25WaXJ0dWFs
        UGFyZW50Vmlldy5zZXQodmlld05hbWUsIG51bGwpOwogICAgfQoKICAgIGNo
        aWxkTGVuID0gY2hpbGRWaWV3cy5sZW5ndGg7CiAgICBmb3IgKGk9Y2hpbGRM
        ZW4tMTsgaT49MDsgaS0tKSB7CiAgICAgIGNoaWxkVmlld3NbaV0uZGVzdHJv
        eSgpOwogICAgfQoKICAgIHJldHVybiB0aGlzOwogIH0sCgogIC8qKgogICAg
        SW5zdGFudGlhdGVzIGEgdmlldyB0byBiZSBhZGRlZCB0byB0aGUgY2hpbGRW
        aWV3cyBhcnJheSBkdXJpbmcgdmlldwogICAgaW5pdGlhbGl6YXRpb24uIFlv
        dSBnZW5lcmFsbHkgd2lsbCBub3QgY2FsbCB0aGlzIG1ldGhvZCBkaXJlY3Rs
        eSB1bmxlc3MKICAgIHlvdSBhcmUgb3ZlcnJpZGluZyBgY3JlYXRlQ2hpbGRW
        aWV3cygpYC4gTm90ZSB0aGF0IHRoaXMgbWV0aG9kIHdpbGwKICAgIGF1dG9t
        YXRpY2FsbHkgY29uZmlndXJlIHRoZSBjb3JyZWN0IHNldHRpbmdzIG9uIHRo
        ZSBuZXcgdmlldyBpbnN0YW5jZSB0bwogICAgYWN0IGFzIGEgY2hpbGQgb2Yg
        dGhlIHBhcmVudC4KCiAgICBAbWV0aG9kIGNyZWF0ZUNoaWxkVmlldwogICAg
        QHBhcmFtIHtDbGFzc3xTdHJpbmd9IHZpZXdDbGFzcwogICAgQHBhcmFtIHtI
        YXNofSBbYXR0cnNdIEF0dHJpYnV0ZXMgdG8gYWRkCiAgICBAcmV0dXJuIHtF
        bWJlci5WaWV3fSBuZXcgaW5zdGFuY2UKICAqLwogIGNyZWF0ZUNoaWxkVmll
        dzogZnVuY3Rpb24odmlldywgYXR0cnMpIHsKICAgIGlmICghdmlldykgewog
        ICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCJjcmVhdGVDaGlsZFZpZXdzIGZp
        cnN0IGFyZ3VtZW50IG11c3QgZXhpc3QiKTsKICAgIH0KCiAgICBpZiAodmll
        dy5pc1ZpZXcgJiYgdmlldy5fcGFyZW50VmlldyA9PT0gdGhpcyAmJiB2aWV3
        LmNvbnRhaW5lciA9PT0gdGhpcy5jb250YWluZXIpIHsKICAgICAgcmV0dXJu
        IHZpZXc7CiAgICB9CgogICAgYXR0cnMgPSBhdHRycyB8fCB7fTsKICAgIGF0
        dHJzLl9wYXJlbnRWaWV3ID0gdGhpczsKCiAgICBpZiAoRW1iZXIuQ29yZVZp
        ZXcuZGV0ZWN0KHZpZXcpKSB7CiAgICAgIGF0dHJzLnRlbXBsYXRlRGF0YSA9
        IGF0dHJzLnRlbXBsYXRlRGF0YSB8fCBnZXQodGhpcywgJ3RlbXBsYXRlRGF0
        YScpOwoKICAgICAgYXR0cnMuY29udGFpbmVyID0gdGhpcy5jb250YWluZXI7
        CiAgICAgIHZpZXcgPSB2aWV3LmNyZWF0ZShhdHRycyk7CgogICAgICAvLyBk
        b24ndCBzZXQgdGhlIHByb3BlcnR5IG9uIGEgdmlydHVhbCB2aWV3LCBhcyB0
        aGV5IGFyZSBpbnZpc2libGUgdG8KICAgICAgLy8gY29uc3VtZXJzIG9mIHRo
        ZSB2aWV3IEFQSQogICAgICBpZiAodmlldy52aWV3TmFtZSkgewogICAgICAg
        IHNldChnZXQodGhpcywgJ2NvbmNyZXRlVmlldycpLCB2aWV3LnZpZXdOYW1l
        LCB2aWV3KTsKICAgICAgfQogICAgfSBlbHNlIGlmICgnc3RyaW5nJyA9PT0g
        dHlwZW9mIHZpZXcpIHsKICAgICAgdmFyIGZ1bGxOYW1lID0gJ3ZpZXc6JyAr
        IHZpZXc7CiAgICAgIHZhciBWaWV3ID0gdGhpcy5jb250YWluZXIubG9va3Vw
        RmFjdG9yeShmdWxsTmFtZSk7CgogICAgICBFbWJlci5hc3NlcnQoIkNvdWxk
        IG5vdCBmaW5kIHZpZXc6ICciICsgZnVsbE5hbWUgKyAiJyIsICEhVmlldyk7
        CgogICAgICBhdHRycy50ZW1wbGF0ZURhdGEgPSBnZXQodGhpcywgJ3RlbXBs
        YXRlRGF0YScpOwogICAgICB2aWV3ID0gVmlldy5jcmVhdGUoYXR0cnMpOwog
        ICAgfSBlbHNlIHsKICAgICAgRW1iZXIuYXNzZXJ0KCdZb3UgbXVzdCBwYXNz
        IGluc3RhbmNlIG9yIHN1YmNsYXNzIG9mIFZpZXcnLCB2aWV3LmlzVmlldyk7
        CiAgICAgIGF0dHJzLmNvbnRhaW5lciA9IHRoaXMuY29udGFpbmVyOwoKICAg
        ICAgaWYgKCFnZXQodmlldywgJ3RlbXBsYXRlRGF0YScpKSB7CiAgICAgICAg
        YXR0cnMudGVtcGxhdGVEYXRhID0gZ2V0KHRoaXMsICd0ZW1wbGF0ZURhdGEn
        KTsKICAgICAgfQoKICAgICAgRW1iZXIuc2V0UHJvcGVydGllcyh2aWV3LCBh
        dHRycyk7CgogICAgfQoKICAgIHJldHVybiB2aWV3OwogIH0sCgogIGJlY2Ft
        ZVZpc2libGU6IEVtYmVyLkssCiAgYmVjYW1lSGlkZGVuOiBFbWJlci5LLAoK
        ICAvKioKICAgIFdoZW4gdGhlIHZpZXcncyBgaXNWaXNpYmxlYCBwcm9wZXJ0
        eSBjaGFuZ2VzLCB0b2dnbGUgdGhlIHZpc2liaWxpdHkKICAgIGVsZW1lbnQg
        b2YgdGhlIGFjdHVhbCBET00gZWxlbWVudC4KCiAgICBAbWV0aG9kIF9pc1Zp
        c2libGVEaWRDaGFuZ2UKICAgIEBwcml2YXRlCiAgKi8KICBfaXNWaXNpYmxl
        RGlkQ2hhbmdlOiBFbWJlci5vYnNlcnZlcignaXNWaXNpYmxlJywgZnVuY3Rp
        b24oKSB7CiAgICBpZiAodGhpcy5faXNWaXNpYmxlID09PSBnZXQodGhpcywg
        J2lzVmlzaWJsZScpKSB7IHJldHVybiA7IH0KICAgIEVtYmVyLnJ1bi5zY2hl
        ZHVsZU9uY2UoJ3JlbmRlcicsIHRoaXMsIHRoaXMuX3RvZ2dsZVZpc2liaWxp
        dHkpOwogIH0pLAoKICBfdG9nZ2xlVmlzaWJpbGl0eTogZnVuY3Rpb24oKSB7
        CiAgICB2YXIgJGVsID0gdGhpcy4kKCk7CiAgICBpZiAoISRlbCkgeyByZXR1
        cm47IH0KCiAgICB2YXIgaXNWaXNpYmxlID0gZ2V0KHRoaXMsICdpc1Zpc2li
        bGUnKTsKCiAgICBpZiAodGhpcy5faXNWaXNpYmxlID09PSBpc1Zpc2libGUp
        IHsgcmV0dXJuIDsgfQoKICAgICRlbC50b2dnbGUoaXNWaXNpYmxlKTsKCiAg
        ICB0aGlzLl9pc1Zpc2libGUgPSBpc1Zpc2libGU7CgogICAgaWYgKHRoaXMu
        X2lzQW5jZXN0b3JIaWRkZW4oKSkgeyByZXR1cm47IH0KCiAgICBpZiAoaXNW
        aXNpYmxlKSB7CiAgICAgIHRoaXMuX25vdGlmeUJlY2FtZVZpc2libGUoKTsK
        ICAgIH0gZWxzZSB7CiAgICAgIHRoaXMuX25vdGlmeUJlY2FtZUhpZGRlbigp
        OwogICAgfQogIH0sCgogIF9ub3RpZnlCZWNhbWVWaXNpYmxlOiBmdW5jdGlv
        bigpIHsKICAgIHRoaXMudHJpZ2dlcignYmVjYW1lVmlzaWJsZScpOwoKICAg
        IHRoaXMuZm9yRWFjaENoaWxkVmlldyhmdW5jdGlvbih2aWV3KSB7CiAgICAg
        IHZhciBpc1Zpc2libGUgPSBnZXQodmlldywgJ2lzVmlzaWJsZScpOwoKICAg
        ICAgaWYgKGlzVmlzaWJsZSB8fCBpc1Zpc2libGUgPT09IG51bGwpIHsKICAg
        ICAgICB2aWV3Ll9ub3RpZnlCZWNhbWVWaXNpYmxlKCk7CiAgICAgIH0KICAg
        IH0pOwogIH0sCgogIF9ub3RpZnlCZWNhbWVIaWRkZW46IGZ1bmN0aW9uKCkg
        ewogICAgdGhpcy50cmlnZ2VyKCdiZWNhbWVIaWRkZW4nKTsKICAgIHRoaXMu
        Zm9yRWFjaENoaWxkVmlldyhmdW5jdGlvbih2aWV3KSB7CiAgICAgIHZhciBp
        c1Zpc2libGUgPSBnZXQodmlldywgJ2lzVmlzaWJsZScpOwoKICAgICAgaWYg
        KGlzVmlzaWJsZSB8fCBpc1Zpc2libGUgPT09IG51bGwpIHsKICAgICAgICB2
        aWV3Ll9ub3RpZnlCZWNhbWVIaWRkZW4oKTsKICAgICAgfQogICAgfSk7CiAg
        fSwKCiAgX2lzQW5jZXN0b3JIaWRkZW46IGZ1bmN0aW9uKCkgewogICAgdmFy
        IHBhcmVudCA9IGdldCh0aGlzLCAncGFyZW50VmlldycpOwoKICAgIHdoaWxl
        IChwYXJlbnQpIHsKICAgICAgaWYgKGdldChwYXJlbnQsICdpc1Zpc2libGUn
        KSA9PT0gZmFsc2UpIHsgcmV0dXJuIHRydWU7IH0KCiAgICAgIHBhcmVudCA9
        IGdldChwYXJlbnQsICdwYXJlbnRWaWV3Jyk7CiAgICB9CgogICAgcmV0dXJu
        IGZhbHNlOwogIH0sCgogIGNsZWFyQnVmZmVyOiBmdW5jdGlvbigpIHsKICAg
        IHRoaXMuaW52b2tlUmVjdXJzaXZlbHkobnVsbFZpZXdzQnVmZmVyKTsKICB9
        LAoKICB0cmFuc2l0aW9uVG86IGZ1bmN0aW9uKHN0YXRlLCBjaGlsZHJlbikg
        ewogICAgdmFyIHByaW9yU3RhdGUgPSB0aGlzLmN1cnJlbnRTdGF0ZSwKICAg
        ICAgICBjdXJyZW50U3RhdGUgPSB0aGlzLmN1cnJlbnRTdGF0ZSA9IHRoaXMu
        c3RhdGVzW3N0YXRlXTsKICAgIHRoaXMuc3RhdGUgPSBzdGF0ZTsKCiAgICBp
        ZiAocHJpb3JTdGF0ZSAmJiBwcmlvclN0YXRlLmV4aXQpIHsgcHJpb3JTdGF0
        ZS5leGl0KHRoaXMpOyB9CiAgICBpZiAoY3VycmVudFN0YXRlLmVudGVyKSB7
        IGN1cnJlbnRTdGF0ZS5lbnRlcih0aGlzKTsgfQogICAgaWYgKHN0YXRlID09
        PSAnaW5ET00nKSB7IGRlbGV0ZSBFbWJlci5tZXRhKHRoaXMpLmNhY2hlLmVs
        ZW1lbnQ7IH0KCiAgICBpZiAoY2hpbGRyZW4gIT09IGZhbHNlKSB7CiAgICAg
        IHRoaXMuZm9yRWFjaENoaWxkVmlldyhmdW5jdGlvbih2aWV3KSB7CiAgICAg
        ICAgdmlldy50cmFuc2l0aW9uVG8oc3RhdGUpOwogICAgICB9KTsKICAgIH0K
        ICB9LAoKICAvLyAuLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4u
        Li4uLi4uLi4uLi4uLi4uLi4uLi4uCiAgLy8gRVZFTlQgSEFORExJTkcKICAv
        LwoKICAvKioKICAgIEhhbmRsZSBldmVudHMgZnJvbSBgRW1iZXIuRXZlbnRE
        aXNwYXRjaGVyYAoKICAgIEBtZXRob2QgaGFuZGxlRXZlbnQKICAgIEBwYXJh
        bSBldmVudE5hbWUge1N0cmluZ30KICAgIEBwYXJhbSBldnQge0V2ZW50fQog
        ICAgQHByaXZhdGUKICAqLwogIGhhbmRsZUV2ZW50OiBmdW5jdGlvbihldmVu
        dE5hbWUsIGV2dCkgewogICAgcmV0dXJuIHRoaXMuY3VycmVudFN0YXRlLmhh
        bmRsZUV2ZW50KHRoaXMsIGV2ZW50TmFtZSwgZXZ0KTsKICB9LAoKICByZWdp
        c3Rlck9ic2VydmVyOiBmdW5jdGlvbihyb290LCBwYXRoLCB0YXJnZXQsIG9i
        c2VydmVyKSB7CiAgICBpZiAoIW9ic2VydmVyICYmICdmdW5jdGlvbicgPT09
        IHR5cGVvZiB0YXJnZXQpIHsKICAgICAgb2JzZXJ2ZXIgPSB0YXJnZXQ7CiAg
        ICAgIHRhcmdldCA9IG51bGw7CiAgICB9CgogICAgaWYgKCFyb290IHx8IHR5
        cGVvZiByb290ICE9PSAnb2JqZWN0JykgewogICAgICByZXR1cm47CiAgICB9
        CgogICAgdmFyIHZpZXcgPSB0aGlzLAogICAgICAgIHN0YXRlQ2hlY2tlZE9i
        c2VydmVyID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICB2aWV3LmN1cnJlbnRT
        dGF0ZS5pbnZva2VPYnNlcnZlcih0aGlzLCBvYnNlcnZlcik7CiAgICAgICAg
        fSwKICAgICAgICBzY2hlZHVsZWRPYnNlcnZlciA9IGZ1bmN0aW9uKCkgewog
        ICAgICAgICAgRW1iZXIucnVuLnNjaGVkdWxlT25jZSgncmVuZGVyJywgdGhp
        cywgc3RhdGVDaGVja2VkT2JzZXJ2ZXIpOwogICAgICAgIH07CgogICAgRW1i
        ZXIuYWRkT2JzZXJ2ZXIocm9vdCwgcGF0aCwgdGFyZ2V0LCBzY2hlZHVsZWRP
        YnNlcnZlcik7CgogICAgdGhpcy5vbmUoJ3dpbGxDbGVhclJlbmRlcicsIGZ1
        bmN0aW9uKCkgewogICAgICBFbWJlci5yZW1vdmVPYnNlcnZlcihyb290LCBw
        YXRoLCB0YXJnZXQsIHNjaGVkdWxlZE9ic2VydmVyKTsKICAgIH0pOwogIH0K
        Cn0pOwoKLyoKICBEZXNjcmliZSBob3cgdGhlIHNwZWNpZmllZCBhY3Rpb25z
        IHNob3VsZCBiZWhhdmUgaW4gdGhlIHZhcmlvdXMKICBzdGF0ZXMgdGhhdCBh
        IHZpZXcgY2FuIGV4aXN0IGluLiBQb3NzaWJsZSBzdGF0ZXM6CgogICogcHJl
        UmVuZGVyOiB3aGVuIGEgdmlldyBpcyBmaXJzdCBpbnN0YW50aWF0ZWQsIGFu
        ZCBhZnRlciBpdHMKICAgIGVsZW1lbnQgd2FzIGRlc3Ryb3llZCwgaXQgaXMg
        aW4gdGhlIHByZVJlbmRlciBzdGF0ZQogICogaW5CdWZmZXI6IG9uY2UgYSB2
        aWV3IGhhcyBiZWVuIHJlbmRlcmVkLCBidXQgYmVmb3JlIGl0IGhhcwogICAg
        YmVlbiBpbnNlcnRlZCBpbnRvIHRoZSBET00sIGl0IGlzIGluIHRoZSBpbkJ1
        ZmZlciBzdGF0ZQogICogaGFzRWxlbWVudDogdGhlIERPTSByZXByZXNlbnRh
        dGlvbiBvZiB0aGUgdmlldyBpcyBjcmVhdGVkLAogICAgYW5kIGlzIHJlYWR5
        IHRvIGJlIGluc2VydGVkCiAgKiBpbkRPTTogb25jZSBhIHZpZXcgaGFzIGJl
        ZW4gaW5zZXJ0ZWQgaW50byB0aGUgRE9NIGl0IGlzIGluCiAgICB0aGUgaW5E
        T00gc3RhdGUuIEEgdmlldyBzcGVuZHMgdGhlIHZhc3QgbWFqb3JpdHkgb2Yg
        aXRzCiAgICBleGlzdGVuY2UgaW4gdGhpcyBzdGF0ZS4KICAqIGRlc3Ryb3ll
        ZDogb25jZSBhIHZpZXcgaGFzIGJlZW4gZGVzdHJveWVkICh1c2luZyB0aGUg
        ZGVzdHJveQogICAgbWV0aG9kKSwgaXQgaXMgaW4gdGhpcyBzdGF0ZS4gTm8g
        ZnVydGhlciBhY3Rpb25zIGNhbiBiZSBpbnZva2VkCiAgICBvbiBhIGRlc3Ry
        b3llZCB2aWV3LgoqLwoKICAvLyBpbiB0aGUgZGVzdHJveWVkIHN0YXRlLCBl
        dmVyeXRoaW5nIGlzIGlsbGVnYWwKCiAgLy8gYmVmb3JlIHJlbmRlcmluZyBo
        YXMgYmVndW4sIGFsbCBsZWdhbCBtYW5pcHVsYXRpb25zIGFyZSBub29wcy4K
        CiAgLy8gaW5zaWRlIHRoZSBidWZmZXIsIGxlZ2FsIG1hbmlwdWxhdGlvbnMg
        YXJlIGRvbmUgb24gdGhlIGJ1ZmZlcgoKICAvLyBvbmNlIHRoZSB2aWV3IGhh
        cyBiZWVuIGluc2VydGVkIGludG8gdGhlIERPTSwgbGVnYWwgbWFuaXB1bGF0
        aW9ucwogIC8vIGFyZSBkb25lIG9uIHRoZSBET00gZWxlbWVudC4KCmZ1bmN0
        aW9uIG5vdGlmeU11dGF0aW9uTGlzdGVuZXJzKCkgewogIEVtYmVyLnJ1bi5v
        bmNlKEVtYmVyLlZpZXcsICdub3RpZnlNdXRhdGlvbkxpc3RlbmVycycpOwp9
        Cgp2YXIgRE9NTWFuYWdlciA9IHsKICBwcmVwZW5kOiBmdW5jdGlvbih2aWV3
        LCBodG1sKSB7CiAgICB2aWV3LiQoKS5wcmVwZW5kKGh0bWwpOwogICAgbm90
        aWZ5TXV0YXRpb25MaXN0ZW5lcnMoKTsKICB9LAoKICBhZnRlcjogZnVuY3Rp
        b24odmlldywgaHRtbCkgewogICAgdmlldy4kKCkuYWZ0ZXIoaHRtbCk7CiAg
        ICBub3RpZnlNdXRhdGlvbkxpc3RlbmVycygpOwogIH0sCgogIGh0bWw6IGZ1
        bmN0aW9uKHZpZXcsIGh0bWwpIHsKICAgIHZpZXcuJCgpLmh0bWwoaHRtbCk7
        CiAgICBub3RpZnlNdXRhdGlvbkxpc3RlbmVycygpOwogIH0sCgogIHJlcGxh
        Y2U6IGZ1bmN0aW9uKHZpZXcpIHsKICAgIHZhciBlbGVtZW50ID0gZ2V0KHZp
        ZXcsICdlbGVtZW50Jyk7CgogICAgc2V0KHZpZXcsICdlbGVtZW50JywgbnVs
        bCk7CgogICAgdmlldy5faW5zZXJ0RWxlbWVudExhdGVyKGZ1bmN0aW9uKCkg
        ewogICAgICBFbWJlci4kKGVsZW1lbnQpLnJlcGxhY2VXaXRoKGdldCh2aWV3
        LCAnZWxlbWVudCcpKTsKICAgICAgbm90aWZ5TXV0YXRpb25MaXN0ZW5lcnMo
        KTsKICAgIH0pOwogIH0sCgogIHJlbW92ZTogZnVuY3Rpb24odmlldykgewog
        ICAgdmlldy4kKCkucmVtb3ZlKCk7CiAgICBub3RpZnlNdXRhdGlvbkxpc3Rl
        bmVycygpOwogIH0sCgogIGVtcHR5OiBmdW5jdGlvbih2aWV3KSB7CiAgICB2
        aWV3LiQoKS5lbXB0eSgpOwogICAgbm90aWZ5TXV0YXRpb25MaXN0ZW5lcnMo
        KTsKICB9Cn07CgpFbWJlci5WaWV3LnJlb3Blbih7CiAgZG9tTWFuYWdlcjog
        RE9NTWFuYWdlcgp9KTsKCkVtYmVyLlZpZXcucmVvcGVuQ2xhc3MoewoKICAv
        KioKICAgIFBhcnNlIGEgcGF0aCBhbmQgcmV0dXJuIGFuIG9iamVjdCB3aGlj
        aCBob2xkcyB0aGUgcGFyc2VkIHByb3BlcnRpZXMuCgogICAgRm9yIGV4YW1w
        bGUgYSBwYXRoIGxpa2UgImNvbnRlbnQuaXNFbmFibGVkOmVuYWJsZWQ6ZGlz
        YWJsZWQiIHdpbGwgcmV0dXJuIHRoZQogICAgZm9sbG93aW5nIG9iamVjdDoK
        CiAgICBgYGBqYXZhc2NyaXB0CiAgICB7CiAgICAgIHBhdGg6ICJjb250ZW50
        LmlzRW5hYmxlZCIsCiAgICAgIGNsYXNzTmFtZTogImVuYWJsZWQiLAogICAg
        ICBmYWxzeUNsYXNzTmFtZTogImRpc2FibGVkIiwKICAgICAgY2xhc3NOYW1l
        czogIjplbmFibGVkOmRpc2FibGVkIgogICAgfQogICAgYGBgCgogICAgQG1l
        dGhvZCBfcGFyc2VQcm9wZXJ0eVBhdGgKICAgIEBzdGF0aWMKICAgIEBwcml2
        YXRlCiAgKi8KICBfcGFyc2VQcm9wZXJ0eVBhdGg6IGZ1bmN0aW9uKHBhdGgp
        IHsKICAgIHZhciBzcGxpdCA9IHBhdGguc3BsaXQoJzonKSwKICAgICAgICBw
        cm9wZXJ0eVBhdGggPSBzcGxpdFswXSwKICAgICAgICBjbGFzc05hbWVzID0g
        IiIsCiAgICAgICAgY2xhc3NOYW1lLAogICAgICAgIGZhbHN5Q2xhc3NOYW1l
        OwoKICAgIC8vIGNoZWNrIGlmIHRoZSBwcm9wZXJ0eSBpcyBkZWZpbmVkIGFz
        IHByb3A6Y2xhc3Mgb3IgcHJvcDp0cnVlQ2xhc3M6ZmFsc2VDbGFzcwogICAg
        aWYgKHNwbGl0Lmxlbmd0aCA+IDEpIHsKICAgICAgY2xhc3NOYW1lID0gc3Bs
        aXRbMV07CiAgICAgIGlmIChzcGxpdC5sZW5ndGggPT09IDMpIHsgZmFsc3lD
        bGFzc05hbWUgPSBzcGxpdFsyXTsgfQoKICAgICAgY2xhc3NOYW1lcyA9ICc6
        JyArIGNsYXNzTmFtZTsKICAgICAgaWYgKGZhbHN5Q2xhc3NOYW1lKSB7IGNs
        YXNzTmFtZXMgKz0gIjoiICsgZmFsc3lDbGFzc05hbWU7IH0KICAgIH0KCiAg
        ICByZXR1cm4gewogICAgICBwYXRoOiBwcm9wZXJ0eVBhdGgsCiAgICAgIGNs
        YXNzTmFtZXM6IGNsYXNzTmFtZXMsCiAgICAgIGNsYXNzTmFtZTogKGNsYXNz
        TmFtZSA9PT0gJycpID8gdW5kZWZpbmVkIDogY2xhc3NOYW1lLAogICAgICBm
        YWxzeUNsYXNzTmFtZTogZmFsc3lDbGFzc05hbWUKICAgIH07CiAgfSwKCiAg
        LyoqCiAgICBHZXQgdGhlIGNsYXNzIG5hbWUgZm9yIGEgZ2l2ZW4gdmFsdWUs
        IGJhc2VkIG9uIHRoZSBwYXRoLCBvcHRpb25hbAogICAgYGNsYXNzTmFtZWAg
        YW5kIG9wdGlvbmFsIGBmYWxzeUNsYXNzTmFtZWAuCgogICAgLSBpZiBhIGBj
        bGFzc05hbWVgIG9yIGBmYWxzeUNsYXNzTmFtZWAgaGFzIGJlZW4gc3BlY2lm
        aWVkOgogICAgICAtIGlmIHRoZSB2YWx1ZSBpcyB0cnV0aHkgYW5kIGBjbGFz
        c05hbWVgIGhhcyBiZWVuIHNwZWNpZmllZCwKICAgICAgICBgY2xhc3NOYW1l
        YCBpcyByZXR1cm5lZAogICAgICAtIGlmIHRoZSB2YWx1ZSBpcyBmYWxzeSBh
        bmQgYGZhbHN5Q2xhc3NOYW1lYCBoYXMgYmVlbiBzcGVjaWZpZWQsCiAgICAg
        ICAgYGZhbHN5Q2xhc3NOYW1lYCBpcyByZXR1cm5lZAogICAgICAtIG90aGVy
        d2lzZSBgbnVsbGAgaXMgcmV0dXJuZWQKICAgIC0gaWYgdGhlIHZhbHVlIGlz
        IGB0cnVlYCwgdGhlIGRhc2hlcml6ZWQgbGFzdCBwYXJ0IG9mIHRoZSBzdXBw
        bGllZCBwYXRoCiAgICAgIGlzIHJldHVybmVkCiAgICAtIGlmIHRoZSB2YWx1
        ZSBpcyBub3QgYGZhbHNlYCwgYHVuZGVmaW5lZGAgb3IgYG51bGxgLCB0aGUg
        YHZhbHVlYAogICAgICBpcyByZXR1cm5lZAogICAgLSBpZiBub25lIG9mIHRo
        ZSBhYm92ZSBydWxlcyBhcHBseSwgYG51bGxgIGlzIHJldHVybmVkCgogICAg
        QG1ldGhvZCBfY2xhc3NTdHJpbmdGb3JWYWx1ZQogICAgQHBhcmFtIHBhdGgK
        ICAgIEBwYXJhbSB2YWwKICAgIEBwYXJhbSBjbGFzc05hbWUKICAgIEBwYXJh
        bSBmYWxzeUNsYXNzTmFtZQogICAgQHN0YXRpYwogICAgQHByaXZhdGUKICAq
        LwogIF9jbGFzc1N0cmluZ0ZvclZhbHVlOiBmdW5jdGlvbihwYXRoLCB2YWws
        IGNsYXNzTmFtZSwgZmFsc3lDbGFzc05hbWUpIHsKICAgIC8vIFdoZW4gdXNp
        bmcgdGhlIGNvbG9uIHN5bnRheCwgZXZhbHVhdGUgdGhlIHRydXRoaW5lc3Mg
        b3IgZmFsc2luZXNzCiAgICAvLyBvZiB0aGUgdmFsdWUgdG8gZGV0ZXJtaW5l
        IHdoaWNoIGNsYXNzTmFtZSB0byByZXR1cm4KICAgIGlmIChjbGFzc05hbWUg
        fHwgZmFsc3lDbGFzc05hbWUpIHsKICAgICAgaWYgKGNsYXNzTmFtZSAmJiAh
        IXZhbCkgewogICAgICAgIHJldHVybiBjbGFzc05hbWU7CgogICAgICB9IGVs
        c2UgaWYgKGZhbHN5Q2xhc3NOYW1lICYmICF2YWwpIHsKICAgICAgICByZXR1
        cm4gZmFsc3lDbGFzc05hbWU7CgogICAgICB9IGVsc2UgewogICAgICAgIHJl
        dHVybiBudWxsOwogICAgICB9CgogICAgLy8gSWYgdmFsdWUgaXMgYSBCb29s
        ZWFuIGFuZCB0cnVlLCByZXR1cm4gdGhlIGRhc2hlcml6ZWQgcHJvcGVydHkK
        ICAgIC8vIG5hbWUuCiAgICB9IGVsc2UgaWYgKHZhbCA9PT0gdHJ1ZSkgewog
        ICAgICAvLyBOb3JtYWxpemUgcHJvcGVydHkgcGF0aCB0byBiZSBzdWl0YWJs
        ZSBmb3IgdXNlCiAgICAgIC8vIGFzIGEgY2xhc3MgbmFtZS4gRm9yIGV4YXBs
        ZSwgY29udGVudC5mb28uYmFyQmF6CiAgICAgIC8vIGJlY29tZXMgYmFyLWJh
        ei4KICAgICAgdmFyIHBhcnRzID0gcGF0aC5zcGxpdCgnLicpOwogICAgICBy
        ZXR1cm4gRW1iZXIuU3RyaW5nLmRhc2hlcml6ZShwYXJ0c1twYXJ0cy5sZW5n
        dGgtMV0pOwoKICAgIC8vIElmIHRoZSB2YWx1ZSBpcyBub3QgZmFsc2UsIHVu
        ZGVmaW5lZCwgb3IgbnVsbCwgcmV0dXJuIHRoZSBjdXJyZW50CiAgICAvLyB2
        YWx1ZSBvZiB0aGUgcHJvcGVydHkuCiAgICB9IGVsc2UgaWYgKHZhbCAhPT0g
        ZmFsc2UgJiYgdmFsICE9IG51bGwpIHsKICAgICAgcmV0dXJuIHZhbDsKCiAg
        ICAvLyBOb3RoaW5nIHRvIGRpc3BsYXkuIFJldHVybiBudWxsIHNvIHRoYXQg
        dGhlIG9sZCBjbGFzcyBpcyByZW1vdmVkCiAgICAvLyBidXQgbm8gbmV3IGNs
        YXNzIGlzIGFkZGVkLgogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIG51bGw7
        CiAgICB9CiAgfQp9KTsKCnZhciBtdXRhdGlvbiA9IEVtYmVyLk9iamVjdC5l
        eHRlbmQoRW1iZXIuRXZlbnRlZCkuY3JlYXRlKCk7CgpFbWJlci5WaWV3LmFk
        ZE11dGF0aW9uTGlzdGVuZXIgPSBmdW5jdGlvbihjYWxsYmFjaykgewogIG11
        dGF0aW9uLm9uKCdjaGFuZ2UnLCBjYWxsYmFjayk7Cn07CgpFbWJlci5WaWV3
        LnJlbW92ZU11dGF0aW9uTGlzdGVuZXIgPSBmdW5jdGlvbihjYWxsYmFjaykg
        ewogIG11dGF0aW9uLm9mZignY2hhbmdlJywgY2FsbGJhY2spOwp9OwoKRW1i
        ZXIuVmlldy5ub3RpZnlNdXRhdGlvbkxpc3RlbmVycyA9IGZ1bmN0aW9uKCkg
        ewogIG11dGF0aW9uLnRyaWdnZXIoJ2NoYW5nZScpOwp9OwoKLyoqCiAgR2xv
        YmFsIHZpZXdzIGhhc2gKCiAgQHByb3BlcnR5IHZpZXdzCiAgQHN0YXRpYwog
        IEB0eXBlIEhhc2gKKi8KRW1iZXIuVmlldy52aWV3cyA9IHt9OwoKLy8gSWYg
        c29tZW9uZSBvdmVycmlkZXMgdGhlIGNoaWxkIHZpZXdzIGNvbXB1dGVkIHBy
        b3BlcnR5IHdoZW4KLy8gZGVmaW5pbmcgdGhlaXIgY2xhc3MsIHdlIHdhbnQg
        dG8gYmUgYWJsZSB0byBwcm9jZXNzIHRoZSB1c2VyJ3MKLy8gc3VwcGxpZWQg
        Y2hpbGRWaWV3cyBhbmQgdGhlbiByZXN0b3JlIHRoZSBvcmlnaW5hbCBjb21w
        dXRlZCBwcm9wZXJ0eQovLyBhdCB2aWV3IGluaXRpYWxpemF0aW9uIHRpbWUu
        IFRoaXMgaGFwcGVucyBpbiBFbWJlci5Db250YWluZXJWaWV3J3MgaW5pdAov
        LyBtZXRob2QuCkVtYmVyLlZpZXcuY2hpbGRWaWV3c1Byb3BlcnR5ID0gY2hp
        bGRWaWV3c1Byb3BlcnR5OwoKRW1iZXIuVmlldy5hcHBseUF0dHJpYnV0ZUJp
        bmRpbmdzID0gZnVuY3Rpb24oZWxlbSwgbmFtZSwgdmFsdWUpIHsKICB2YXIg
        dHlwZSA9IEVtYmVyLnR5cGVPZih2YWx1ZSk7CgogIC8vIGlmIHRoaXMgY2hh
        bmdlcywgYWxzbyBjaGFuZ2UgdGhlIGxvZ2ljIGluIGVtYmVyLWhhbmRsZWJh
        cnMvbGliL2hlbHBlcnMvYmluZGluZy5qcwogIGlmIChuYW1lICE9PSAndmFs
        dWUnICYmICh0eXBlID09PSAnc3RyaW5nJyB8fCAodHlwZSA9PT0gJ251bWJl
        cicgJiYgIWlzTmFOKHZhbHVlKSkpKSB7CiAgICBpZiAodmFsdWUgIT09IGVs
        ZW0uYXR0cihuYW1lKSkgewogICAgICBlbGVtLmF0dHIobmFtZSwgdmFsdWUp
        OwogICAgfQogIH0gZWxzZSBpZiAobmFtZSA9PT0gJ3ZhbHVlJyB8fCB0eXBl
        ID09PSAnYm9vbGVhbicpIHsKICAgIGlmIChFbWJlci5pc05vbmUodmFsdWUp
        IHx8IHZhbHVlID09PSBmYWxzZSkgewogICAgICAvLyBgbnVsbGAsIGB1bmRl
        ZmluZWRgIG9yIGBmYWxzZWAgc2hvdWxkIHJlbW92ZSBhdHRyaWJ1dGUKICAg
        ICAgZWxlbS5yZW1vdmVBdHRyKG5hbWUpOwogICAgICBlbGVtLnByb3AobmFt
        ZSwgJycpOwogICAgfSBlbHNlIGlmICh2YWx1ZSAhPT0gZWxlbS5wcm9wKG5h
        bWUpKSB7CiAgICAgIC8vIHZhbHVlIHNob3VsZCBhbHdheXMgYmUgcHJvcGVy
        dGllcwogICAgICBlbGVtLnByb3AobmFtZSwgdmFsdWUpOwogICAgfQogIH0g
        ZWxzZSBpZiAoIXZhbHVlKSB7CiAgICBlbGVtLnJlbW92ZUF0dHIobmFtZSk7
        CiAgfQp9OwoKRW1iZXIuVmlldy5zdGF0ZXMgPSBzdGF0ZXM7Cgp9KSgpOwoK
        CgooZnVuY3Rpb24oKSB7Ci8qKgpAbW9kdWxlIGVtYmVyCkBzdWJtb2R1bGUg
        ZW1iZXItdmlld3MKKi8KCnZhciBnZXQgPSBFbWJlci5nZXQsIHNldCA9IEVt
        YmVyLnNldDsKCkVtYmVyLlZpZXcuc3RhdGVzLl9kZWZhdWx0ID0gewogIC8v
        IGFwcGVuZENoaWxkIGlzIG9ubHkgbGVnYWwgd2hpbGUgcmVuZGVyaW5nIHRo
        ZSBidWZmZXIuCiAgYXBwZW5kQ2hpbGQ6IGZ1bmN0aW9uKCkgewogICAgdGhy
        b3cgIllvdSBjYW4ndCB1c2UgYXBwZW5kQ2hpbGQgb3V0c2lkZSBvZiB0aGUg
        cmVuZGVyaW5nIHByb2Nlc3MiOwogIH0sCgogICQ6IGZ1bmN0aW9uKCkgewog
        ICAgcmV0dXJuIHVuZGVmaW5lZDsKICB9LAoKICBnZXRFbGVtZW50OiBmdW5j
        dGlvbigpIHsKICAgIHJldHVybiBudWxsOwogIH0sCgogIC8vIEhhbmRsZSBl
        dmVudHMgZnJvbSBgRW1iZXIuRXZlbnREaXNwYXRjaGVyYAogIGhhbmRsZUV2
        ZW50OiBmdW5jdGlvbigpIHsKICAgIHJldHVybiB0cnVlOyAvLyBjb250aW51
        ZSBldmVudCBwcm9wYWdhdGlvbgogIH0sCgogIGRlc3Ryb3lFbGVtZW50OiBm
        dW5jdGlvbih2aWV3KSB7CiAgICBzZXQodmlldywgJ2VsZW1lbnQnLCBudWxs
        KTsKICAgIGlmICh2aWV3Ll9zY2hlZHVsZWRJbnNlcnQpIHsKICAgICAgRW1i
        ZXIucnVuLmNhbmNlbCh2aWV3Ll9zY2hlZHVsZWRJbnNlcnQpOwogICAgICB2
        aWV3Ll9zY2hlZHVsZWRJbnNlcnQgPSBudWxsOwogICAgfQogICAgcmV0dXJu
        IHZpZXc7CiAgfSwKCiAgcmVuZGVyVG9CdWZmZXJJZk5lZWRlZDogZnVuY3Rp
        b24gKCkgewogICAgcmV0dXJuIGZhbHNlOwogIH0sCgogIHJlcmVuZGVyOiBF
        bWJlci5LLAogIGludm9rZU9ic2VydmVyOiBFbWJlci5LCn07Cgp9KSgpOwoK
        CgooZnVuY3Rpb24oKSB7Ci8qKgpAbW9kdWxlIGVtYmVyCkBzdWJtb2R1bGUg
        ZW1iZXItdmlld3MKKi8KCnZhciBwcmVSZW5kZXIgPSBFbWJlci5WaWV3LnN0
        YXRlcy5wcmVSZW5kZXIgPSBFbWJlci5jcmVhdGUoRW1iZXIuVmlldy5zdGF0
        ZXMuX2RlZmF1bHQpOwoKRW1iZXIubWVyZ2UocHJlUmVuZGVyLCB7CiAgLy8g
        YSB2aWV3IGxlYXZlcyB0aGUgcHJlUmVuZGVyIHN0YXRlIG9uY2UgaXRzIGVs
        ZW1lbnQgaGFzIGJlZW4KICAvLyBjcmVhdGVkIChjcmVhdGVFbGVtZW50KS4K
        ICBpbnNlcnRFbGVtZW50OiBmdW5jdGlvbih2aWV3LCBmbikgewogICAgdmll
        dy5jcmVhdGVFbGVtZW50KCk7CiAgICB2YXIgdmlld0NvbGxlY3Rpb24gPSB2
        aWV3LnZpZXdIaWVyYXJjaHlDb2xsZWN0aW9uKCk7CgogICAgdmlld0NvbGxl
        Y3Rpb24udHJpZ2dlcignd2lsbEluc2VydEVsZW1lbnQnKTsKCiAgICBmbi5j
        YWxsKHZpZXcpOwoKICAgIC8vIFdlIHRyYW5zaXRpb24gdG8gYGluRE9NYCBp
        ZiB0aGUgZWxlbWVudCBleGlzdHMgaW4gdGhlIERPTQogICAgdmFyIGVsZW1l
        bnQgPSB2aWV3LmdldCgnZWxlbWVudCcpOwogICAgaWYgKGRvY3VtZW50LmJv
        ZHkuY29udGFpbnMoZWxlbWVudCkpIHsKICAgICAgdmlld0NvbGxlY3Rpb24u
        dHJhbnNpdGlvblRvKCdpbkRPTScsIGZhbHNlKTsKICAgICAgdmlld0NvbGxl
        Y3Rpb24udHJpZ2dlcignZGlkSW5zZXJ0RWxlbWVudCcpOwogICAgfQogIH0s
        CgogIHJlbmRlclRvQnVmZmVySWZOZWVkZWQ6IGZ1bmN0aW9uKHZpZXcsIGJ1
        ZmZlcikgewogICAgdmlldy5yZW5kZXJUb0J1ZmZlcihidWZmZXIpOwogICAg
        cmV0dXJuIHRydWU7CiAgfSwKCiAgZW1wdHk6IEVtYmVyLkssCgogIHNldEVs
        ZW1lbnQ6IGZ1bmN0aW9uKHZpZXcsIHZhbHVlKSB7CiAgICBpZiAodmFsdWUg
        IT09IG51bGwpIHsKICAgICAgdmlldy50cmFuc2l0aW9uVG8oJ2hhc0VsZW1l
        bnQnKTsKICAgIH0KICAgIHJldHVybiB2YWx1ZTsKICB9Cn0pOwoKfSkoKTsK
        CgoKKGZ1bmN0aW9uKCkgewovKioKQG1vZHVsZSBlbWJlcgpAc3VibW9kdWxl
        IGVtYmVyLXZpZXdzCiovCgp2YXIgZ2V0ID0gRW1iZXIuZ2V0LCBzZXQgPSBF
        bWJlci5zZXQ7Cgp2YXIgaW5CdWZmZXIgPSBFbWJlci5WaWV3LnN0YXRlcy5p
        bkJ1ZmZlciA9IEVtYmVyLmNyZWF0ZShFbWJlci5WaWV3LnN0YXRlcy5fZGVm
        YXVsdCk7CgpFbWJlci5tZXJnZShpbkJ1ZmZlciwgewogICQ6IGZ1bmN0aW9u
        KHZpZXcsIHNlbCkgewogICAgLy8gaWYgd2UgZG9uJ3QgaGF2ZSBhbiBlbGVt
        ZW50IHlldCwgc29tZW9uZSBjYWxsaW5nIHRoaXMuJCgpIGlzCiAgICAvLyB0
        cnlpbmcgdG8gdXBkYXRlIGFuIGVsZW1lbnQgdGhhdCBpc24ndCBpbiB0aGUg
        RE9NLiBJbnN0ZWFkLAogICAgLy8gcmVyZW5kZXIgdGhlIHZpZXcgdG8gYWxs
        b3cgdGhlIHJlbmRlciBtZXRob2QgdG8gcmVmbGVjdCB0aGUKICAgIC8vIGNo
        YW5nZXMuCiAgICB2aWV3LnJlcmVuZGVyKCk7CiAgICByZXR1cm4gRW1iZXIu
        JCgpOwogIH0sCgogIC8vIHdoZW4gYSB2aWV3IGlzIHJlbmRlcmVkIGluIGEg
        YnVmZmVyLCByZXJlbmRlcmluZyBpdCBzaW1wbHkKICAvLyByZXBsYWNlcyB0
        aGUgZXhpc3RpbmcgYnVmZmVyIHdpdGggYSBuZXcgb25lCiAgcmVyZW5kZXI6
        IGZ1bmN0aW9uKHZpZXcpIHsKICAgIHRocm93IG5ldyBFbWJlci5FcnJvcigi
        U29tZXRoaW5nIHlvdSBkaWQgY2F1c2VkIGEgdmlldyB0byByZS1yZW5kZXIg
        YWZ0ZXIgaXQgcmVuZGVyZWQgYnV0IGJlZm9yZSBpdCB3YXMgaW5zZXJ0ZWQg
        aW50byB0aGUgRE9NLiIpOwogIH0sCgogIC8vIHdoZW4gYSB2aWV3IGlzIHJl
        bmRlcmVkIGluIGEgYnVmZmVyLCBhcHBlbmRpbmcgYSBjaGlsZAogIC8vIHZp
        ZXcgd2lsbCByZW5kZXIgdGhhdCB2aWV3IGFuZCBhcHBlbmQgdGhlIHJlc3Vs
        dGluZwogIC8vIGJ1ZmZlciBpbnRvIGl0cyBidWZmZXIuCiAgYXBwZW5kQ2hp
        bGQ6IGZ1bmN0aW9uKHZpZXcsIGNoaWxkVmlldywgb3B0aW9ucykgewogICAg
        dmFyIGJ1ZmZlciA9IHZpZXcuYnVmZmVyLCBfY2hpbGRWaWV3cyA9IHZpZXcu
        X2NoaWxkVmlld3M7CgogICAgY2hpbGRWaWV3ID0gdmlldy5jcmVhdGVDaGls
        ZFZpZXcoY2hpbGRWaWV3LCBvcHRpb25zKTsKICAgIGlmICghX2NoaWxkVmll
        d3MubGVuZ3RoKSB7IF9jaGlsZFZpZXdzID0gdmlldy5fY2hpbGRWaWV3cyA9
        IF9jaGlsZFZpZXdzLnNsaWNlKCk7IH0KICAgIF9jaGlsZFZpZXdzLnB1c2go
        Y2hpbGRWaWV3KTsKCiAgICBjaGlsZFZpZXcucmVuZGVyVG9CdWZmZXIoYnVm
        ZmVyKTsKCiAgICB2aWV3LnByb3BlcnR5RGlkQ2hhbmdlKCdjaGlsZFZpZXdz
        Jyk7CgogICAgcmV0dXJuIGNoaWxkVmlldzsKICB9LAoKICAvLyB3aGVuIGEg
        dmlldyBpcyByZW5kZXJlZCBpbiBhIGJ1ZmZlciwgZGVzdHJveWluZyB0aGUK
        ICAvLyBlbGVtZW50IHdpbGwgc2ltcGx5IGRlc3Ryb3kgdGhlIGJ1ZmZlciBh
        bmQgcHV0IHRoZQogIC8vIHN0YXRlIGJhY2sgaW50byB0aGUgcHJlUmVuZGVy
        IHN0YXRlLgogIGRlc3Ryb3lFbGVtZW50OiBmdW5jdGlvbih2aWV3KSB7CiAg
        ICB2aWV3LmNsZWFyQnVmZmVyKCk7CiAgICB2YXIgdmlld0NvbGxlY3Rpb24g
        PSB2aWV3Ll9ub3RpZnlXaWxsRGVzdHJveUVsZW1lbnQoKTsKICAgIHZpZXdD
        b2xsZWN0aW9uLnRyYW5zaXRpb25UbygncHJlUmVuZGVyJywgZmFsc2UpOwoK
        ICAgIHJldHVybiB2aWV3OwogIH0sCgogIGVtcHR5OiBmdW5jdGlvbigpIHsK
        ICAgIEVtYmVyLmFzc2VydCgiRW1wdHlpbmcgYSB2aWV3IGluIHRoZSBpbkJ1
        ZmZlciBzdGF0ZSBpcyBub3QgYWxsb3dlZCBhbmQgIiArCiAgICAgICAgICAg
        ICAgICAgInNob3VsZCBub3QgaGFwcGVuIHVuZGVyIG5vcm1hbCBjaXJjdW1z
        dGFuY2VzLiBNb3N0IGxpa2VseSAiICsKICAgICAgICAgICAgICAgICAidGhl
        cmUgaXMgYSBidWcgaW4geW91ciBhcHBsaWNhdGlvbi4gVGhpcyBtYXkgYmUg
        ZHVlIHRvICIgKwogICAgICAgICAgICAgICAgICJleGNlc3NpdmUgcHJvcGVy
        dHkgY2hhbmdlIG5vdGlmaWNhdGlvbnMuIik7CiAgfSwKCiAgcmVuZGVyVG9C
        dWZmZXJJZk5lZWRlZDogZnVuY3Rpb24gKHZpZXcsIGJ1ZmZlcikgewogICAg
        cmV0dXJuIGZhbHNlOwogIH0sCgogIC8vIEl0IHNob3VsZCBiZSBpbXBvc3Np
        YmxlIGZvciBhIHJlbmRlcmVkIHZpZXcgdG8gYmUgc2NoZWR1bGVkIGZvcgog
        IC8vIGluc2VydGlvbi4KICBpbnNlcnRFbGVtZW50OiBmdW5jdGlvbigpIHsK
        ICAgIHRocm93ICJZb3UgY2FuJ3QgaW5zZXJ0IGFuIGVsZW1lbnQgdGhhdCBo
        YXMgYWxyZWFkeSBiZWVuIHJlbmRlcmVkIjsKICB9LAoKICBzZXRFbGVtZW50
        OiBmdW5jdGlvbih2aWV3LCB2YWx1ZSkgewogICAgaWYgKHZhbHVlID09PSBu
        dWxsKSB7CiAgICAgIHZpZXcudHJhbnNpdGlvblRvKCdwcmVSZW5kZXInKTsK
        ICAgIH0gZWxzZSB7CiAgICAgIHZpZXcuY2xlYXJCdWZmZXIoKTsKICAgICAg
        dmlldy50cmFuc2l0aW9uVG8oJ2hhc0VsZW1lbnQnKTsKICAgIH0KCiAgICBy
        ZXR1cm4gdmFsdWU7CiAgfSwKCiAgaW52b2tlT2JzZXJ2ZXI6IGZ1bmN0aW9u
        KHRhcmdldCwgb2JzZXJ2ZXIpIHsKICAgIG9ic2VydmVyLmNhbGwodGFyZ2V0
        KTsKICB9Cn0pOwoKCn0pKCk7CgoKCihmdW5jdGlvbigpIHsKLyoqCkBtb2R1
        bGUgZW1iZXIKQHN1Ym1vZHVsZSBlbWJlci12aWV3cwoqLwoKdmFyIGdldCA9
        IEVtYmVyLmdldCwgc2V0ID0gRW1iZXIuc2V0OwoKdmFyIGhhc0VsZW1lbnQg
        PSBFbWJlci5WaWV3LnN0YXRlcy5oYXNFbGVtZW50ID0gRW1iZXIuY3JlYXRl
        KEVtYmVyLlZpZXcuc3RhdGVzLl9kZWZhdWx0KTsKCkVtYmVyLm1lcmdlKGhh
        c0VsZW1lbnQsIHsKICAkOiBmdW5jdGlvbih2aWV3LCBzZWwpIHsKICAgIHZh
        ciBlbGVtID0gZ2V0KHZpZXcsICdlbGVtZW50Jyk7CiAgICByZXR1cm4gc2Vs
        ID8gRW1iZXIuJChzZWwsIGVsZW0pIDogRW1iZXIuJChlbGVtKTsKICB9LAoK
        ICBnZXRFbGVtZW50OiBmdW5jdGlvbih2aWV3KSB7CiAgICB2YXIgcGFyZW50
        ID0gZ2V0KHZpZXcsICdwYXJlbnRWaWV3Jyk7CiAgICBpZiAocGFyZW50KSB7
        IHBhcmVudCA9IGdldChwYXJlbnQsICdlbGVtZW50Jyk7IH0KICAgIGlmIChw
        YXJlbnQpIHsgcmV0dXJuIHZpZXcuZmluZEVsZW1lbnRJblBhcmVudEVsZW1l
        bnQocGFyZW50KTsgfQogICAgcmV0dXJuIEVtYmVyLiQoIiMiICsgZ2V0KHZp
        ZXcsICdlbGVtZW50SWQnKSlbMF07CiAgfSwKCiAgc2V0RWxlbWVudDogZnVu
        Y3Rpb24odmlldywgdmFsdWUpIHsKICAgIGlmICh2YWx1ZSA9PT0gbnVsbCkg
        ewogICAgICB2aWV3LnRyYW5zaXRpb25UbygncHJlUmVuZGVyJyk7CiAgICB9
        IGVsc2UgewogICAgICB0aHJvdyAiWW91IGNhbm5vdCBzZXQgYW4gZWxlbWVu
        dCB0byBhIG5vbi1udWxsIHZhbHVlIHdoZW4gdGhlIGVsZW1lbnQgaXMgYWxy
        ZWFkeSBpbiB0aGUgRE9NLiI7CiAgICB9CgogICAgcmV0dXJuIHZhbHVlOwog
        IH0sCgogIC8vIG9uY2UgdGhlIHZpZXcgaGFzIGJlZW4gaW5zZXJ0ZWQgaW50
        byB0aGUgRE9NLCByZXJlbmRlcmluZyBpcwogIC8vIGRlZmVycmVkIHRvIGFs
        bG93IGJpbmRpbmdzIHRvIHN5bmNocm9uaXplLgogIHJlcmVuZGVyOiBmdW5j
        dGlvbih2aWV3KSB7CiAgICB2aWV3LnRyaWdnZXJSZWN1cnNpdmVseSgnd2ls
        bENsZWFyUmVuZGVyJyk7CgogICAgdmlldy5jbGVhclJlbmRlcmVkQ2hpbGRy
        ZW4oKTsKCiAgICB2aWV3LmRvbU1hbmFnZXIucmVwbGFjZSh2aWV3KTsKICAg
        IHJldHVybiB2aWV3OwogIH0sCgogIC8vIG9uY2UgdGhlIHZpZXcgaXMgYWxy
        ZWFkeSBpbiB0aGUgRE9NLCBkZXN0cm95aW5nIGl0IHJlbW92ZXMgaXQKICAv
        LyBmcm9tIHRoZSBET00sIG51a2VzIGl0cyBlbGVtZW50LCBhbmQgcHV0cyBp
        dCBiYWNrIGludG8gdGhlCiAgLy8gcHJlUmVuZGVyIHN0YXRlIGlmIGluRE9N
        LgoKICBkZXN0cm95RWxlbWVudDogZnVuY3Rpb24odmlldykgewogICAgdmll
        dy5fbm90aWZ5V2lsbERlc3Ryb3lFbGVtZW50KCk7CiAgICB2aWV3LmRvbU1h
        bmFnZXIucmVtb3ZlKHZpZXcpOwogICAgc2V0KHZpZXcsICdlbGVtZW50Jywg
        bnVsbCk7CiAgICBpZiAodmlldy5fc2NoZWR1bGVkSW5zZXJ0KSB7CiAgICAg
        IEVtYmVyLnJ1bi5jYW5jZWwodmlldy5fc2NoZWR1bGVkSW5zZXJ0KTsKICAg
        ICAgdmlldy5fc2NoZWR1bGVkSW5zZXJ0ID0gbnVsbDsKICAgIH0KICAgIHJl
        dHVybiB2aWV3OwogIH0sCgogIGVtcHR5OiBmdW5jdGlvbih2aWV3KSB7CiAg
        ICB2YXIgX2NoaWxkVmlld3MgPSB2aWV3Ll9jaGlsZFZpZXdzLCBsZW4sIGlk
        eDsKICAgIGlmIChfY2hpbGRWaWV3cykgewogICAgICBsZW4gPSBfY2hpbGRW
        aWV3cy5sZW5ndGg7CiAgICAgIGZvciAoaWR4ID0gMDsgaWR4IDwgbGVuOyBp
        ZHgrKykgewogICAgICAgIF9jaGlsZFZpZXdzW2lkeF0uX25vdGlmeVdpbGxE
        ZXN0cm95RWxlbWVudCgpOwogICAgICB9CiAgICB9CiAgICB2aWV3LmRvbU1h
        bmFnZXIuZW1wdHkodmlldyk7CiAgfSwKCiAgLy8gSGFuZGxlIGV2ZW50cyBm
        cm9tIGBFbWJlci5FdmVudERpc3BhdGNoZXJgCiAgaGFuZGxlRXZlbnQ6IGZ1
        bmN0aW9uKHZpZXcsIGV2ZW50TmFtZSwgZXZ0KSB7CiAgICBpZiAodmlldy5o
        YXMoZXZlbnROYW1lKSkgewogICAgICAvLyBIYW5kbGVyIHNob3VsZCBiZSBh
        YmxlIHRvIHJlLWRpc3BhdGNoIGV2ZW50cywgc28gd2UgZG9uJ3QKICAgICAg
        Ly8gcHJldmVudERlZmF1bHQgb3Igc3RvcFByb3BhZ2F0aW9uLgogICAgICBy
        ZXR1cm4gdmlldy50cmlnZ2VyKGV2ZW50TmFtZSwgZXZ0KTsKICAgIH0gZWxz
        ZSB7CiAgICAgIHJldHVybiB0cnVlOyAvLyBjb250aW51ZSBldmVudCBwcm9w
        YWdhdGlvbgogICAgfQogIH0sCgogIGludm9rZU9ic2VydmVyOiBmdW5jdGlv
        bih0YXJnZXQsIG9ic2VydmVyKSB7CiAgICBvYnNlcnZlci5jYWxsKHRhcmdl
        dCk7CiAgfQp9KTsKfSkoKTsKCgoKKGZ1bmN0aW9uKCkgewovKioKQG1vZHVs
        ZSBlbWJlcgpAc3VibW9kdWxlIGVtYmVyLXZpZXdzCiovCgp2YXIgaGFzRWxl
        bWVudCA9IEVtYmVyLlZpZXcuc3RhdGVzLmhhc0VsZW1lbnQ7CnZhciBpbkRP
        TSA9IEVtYmVyLlZpZXcuc3RhdGVzLmluRE9NID0gRW1iZXIuY3JlYXRlKGhh
        c0VsZW1lbnQpOwoKRW1iZXIubWVyZ2UoaW5ET00sIHsKICBlbnRlcjogZnVu
        Y3Rpb24odmlldykgewogICAgLy8gUmVnaXN0ZXIgdGhlIHZpZXcgZm9yIGV2
        ZW50IGhhbmRsaW5nLiBUaGlzIGhhc2ggaXMgdXNlZCBieQogICAgLy8gRW1i
        ZXIuRXZlbnREaXNwYXRjaGVyIHRvIGRpc3BhdGNoIGluY29taW5nIGV2ZW50
        cy4KICAgIGlmICghdmlldy5pc1ZpcnR1YWwpIHsKICAgICAgRW1iZXIuYXNz
        ZXJ0KCJBdHRlbXB0ZWQgdG8gcmVnaXN0ZXIgYSB2aWV3IHdpdGggYW4gaWQg
        YWxyZWFkeSBpbiB1c2U6ICIrdmlldy5lbGVtZW50SWQsICFFbWJlci5WaWV3
        LnZpZXdzW3ZpZXcuZWxlbWVudElkXSk7CiAgICAgIEVtYmVyLlZpZXcudmll
        d3Nbdmlldy5lbGVtZW50SWRdID0gdmlldzsKICAgIH0KCiAgICB2aWV3LmFk
        ZEJlZm9yZU9ic2VydmVyKCdlbGVtZW50SWQnLCBmdW5jdGlvbigpIHsKICAg
        ICAgdGhyb3cgbmV3IEVtYmVyLkVycm9yKCJDaGFuZ2luZyBhIHZpZXcncyBl
        bGVtZW50SWQgYWZ0ZXIgY3JlYXRpb24gaXMgbm90IGFsbG93ZWQiKTsKICAg
        IH0pOwogIH0sCgogIGV4aXQ6IGZ1bmN0aW9uKHZpZXcpIHsKICAgIGlmICgh
        dGhpcy5pc1ZpcnR1YWwpIGRlbGV0ZSBFbWJlci5WaWV3LnZpZXdzW3ZpZXcu
        ZWxlbWVudElkXTsKICB9LAoKICBpbnNlcnRFbGVtZW50OiBmdW5jdGlvbih2
        aWV3LCBmbikgewogICAgdGhyb3cgIllvdSBjYW4ndCBpbnNlcnQgYW4gZWxl
        bWVudCBpbnRvIHRoZSBET00gdGhhdCBoYXMgYWxyZWFkeSBiZWVuIGluc2Vy
        dGVkIjsKICB9Cn0pOwoKfSkoKTsKCgoKKGZ1bmN0aW9uKCkgewovKioKQG1v
        ZHVsZSBlbWJlcgpAc3VibW9kdWxlIGVtYmVyLXZpZXdzCiovCgp2YXIgZGVz
        dHJveWluZ0Vycm9yID0gIllvdSBjYW4ndCBjYWxsICVAIG9uIGEgdmlldyBi
        ZWluZyBkZXN0cm95ZWQiLCBmbXQgPSBFbWJlci5TdHJpbmcuZm10OwoKdmFy
        IGRlc3Ryb3lpbmcgPSBFbWJlci5WaWV3LnN0YXRlcy5kZXN0cm95aW5nID0g
        RW1iZXIuY3JlYXRlKEVtYmVyLlZpZXcuc3RhdGVzLl9kZWZhdWx0KTsKCkVt
        YmVyLm1lcmdlKGRlc3Ryb3lpbmcsIHsKICBhcHBlbmRDaGlsZDogZnVuY3Rp
        b24oKSB7CiAgICB0aHJvdyBmbXQoZGVzdHJveWluZ0Vycm9yLCBbJ2FwcGVu
        ZENoaWxkJ10pOwogIH0sCiAgcmVyZW5kZXI6IGZ1bmN0aW9uKCkgewogICAg
        dGhyb3cgZm10KGRlc3Ryb3lpbmdFcnJvciwgWydyZXJlbmRlciddKTsKICB9
        LAogIGRlc3Ryb3lFbGVtZW50OiBmdW5jdGlvbigpIHsKICAgIHRocm93IGZt
        dChkZXN0cm95aW5nRXJyb3IsIFsnZGVzdHJveUVsZW1lbnQnXSk7CiAgfSwK
        ICBlbXB0eTogZnVuY3Rpb24oKSB7CiAgICB0aHJvdyBmbXQoZGVzdHJveWlu
        Z0Vycm9yLCBbJ2VtcHR5J10pOwogIH0sCgogIHNldEVsZW1lbnQ6IGZ1bmN0
        aW9uKCkgewogICAgdGhyb3cgZm10KGRlc3Ryb3lpbmdFcnJvciwgWyJzZXQo
        J2VsZW1lbnQnLCAuLi4pIl0pOwogIH0sCgogIHJlbmRlclRvQnVmZmVySWZO
        ZWVkZWQ6IGZ1bmN0aW9uKCkgewogICAgcmV0dXJuIGZhbHNlOwogIH0sCgog
        IC8vIFNpbmNlIGVsZW1lbnQgaW5zZXJ0aW9uIGlzIHNjaGVkdWxlZCwgZG9u
        J3QgZG8gYW55dGhpbmcgaWYKICAvLyB0aGUgdmlldyBoYXMgYmVlbiBkZXN0
        cm95ZWQgYmV0d2VlbiBzY2hlZHVsaW5nIGFuZCBleGVjdXRpb24KICBpbnNl
        cnRFbGVtZW50OiBFbWJlci5LCn0pOwoKCn0pKCk7CgoKCihmdW5jdGlvbigp
        IHsKRW1iZXIuVmlldy5jbG9uZVN0YXRlcyA9IGZ1bmN0aW9uKGZyb20pIHsK
        ICB2YXIgaW50byA9IHt9OwoKICBpbnRvLl9kZWZhdWx0ID0ge307CiAgaW50
        by5wcmVSZW5kZXIgPSBFbWJlci5jcmVhdGUoaW50by5fZGVmYXVsdCk7CiAg
        aW50by5kZXN0cm95aW5nID0gRW1iZXIuY3JlYXRlKGludG8uX2RlZmF1bHQp
        OwogIGludG8uaW5CdWZmZXIgPSBFbWJlci5jcmVhdGUoaW50by5fZGVmYXVs
        dCk7CiAgaW50by5oYXNFbGVtZW50ID0gRW1iZXIuY3JlYXRlKGludG8uX2Rl
        ZmF1bHQpOwogIGludG8uaW5ET00gPSBFbWJlci5jcmVhdGUoaW50by5oYXNF
        bGVtZW50KTsKCiAgZm9yICh2YXIgc3RhdGVOYW1lIGluIGZyb20pIHsKICAg
        IGlmICghZnJvbS5oYXNPd25Qcm9wZXJ0eShzdGF0ZU5hbWUpKSB7IGNvbnRp
        bnVlOyB9CiAgICBFbWJlci5tZXJnZShpbnRvW3N0YXRlTmFtZV0sIGZyb21b
        c3RhdGVOYW1lXSk7CiAgfQoKICByZXR1cm4gaW50bzsKfTsKCn0pKCk7CgoK
        CihmdW5jdGlvbigpIHsKdmFyIHN0YXRlcyA9IEVtYmVyLlZpZXcuY2xvbmVT
        dGF0ZXMoRW1iZXIuVmlldy5zdGF0ZXMpOwoKLyoqCkBtb2R1bGUgZW1iZXIK
        QHN1Ym1vZHVsZSBlbWJlci12aWV3cwoqLwoKdmFyIGdldCA9IEVtYmVyLmdl
        dCwgc2V0ID0gRW1iZXIuc2V0Owp2YXIgZm9yRWFjaCA9IEVtYmVyLkVudW1l
        cmFibGVVdGlscy5mb3JFYWNoOwp2YXIgVmlld0NvbGxlY3Rpb24gPSBFbWJl
        ci5fVmlld0NvbGxlY3Rpb247CgovKioKICBBIGBDb250YWluZXJWaWV3YCBp
        cyBhbiBgRW1iZXIuVmlld2Agc3ViY2xhc3MgdGhhdCBpbXBsZW1lbnRzIGBF
        bWJlci5NdXRhYmxlQXJyYXlgCiAgYWxsb3dpbmcgcHJvZ3JhbW1hdGljIG1h
        bmFnZW1lbnQgb2YgaXRzIGNoaWxkIHZpZXdzLgoKICAjIyBTZXR0aW5nIElu
        aXRpYWwgQ2hpbGQgVmlld3MKCiAgVGhlIGluaXRpYWwgYXJyYXkgb2YgY2hp
        bGQgdmlld3MgY2FuIGJlIHNldCBpbiBvbmUgb2YgdHdvIHdheXMuIFlvdSBj
        YW4KICBwcm92aWRlIGEgYGNoaWxkVmlld3NgIHByb3BlcnR5IGF0IGNyZWF0
        aW9uIHRpbWUgdGhhdCBjb250YWlucyBpbnN0YW5jZSBvZgogIGBFbWJlci5W
        aWV3YDoKCiAgYGBgamF2YXNjcmlwdAogIGFDb250YWluZXIgPSBFbWJlci5D
        b250YWluZXJWaWV3LmNyZWF0ZSh7CiAgICBjaGlsZFZpZXdzOiBbRW1iZXIu
        Vmlldy5jcmVhdGUoKSwgRW1iZXIuVmlldy5jcmVhdGUoKV0KICB9KTsKICBg
        YGAKCiAgWW91IGNhbiBhbHNvIHByb3ZpZGUgYSBsaXN0IG9mIHByb3BlcnR5
        IG5hbWVzIHdob3NlIHZhbHVlcyBhcmUgaW5zdGFuY2VzIG9mCiAgYEVtYmVy
        LlZpZXdgOgoKICBgYGBqYXZhc2NyaXB0CiAgYUNvbnRhaW5lciA9IEVtYmVy
        LkNvbnRhaW5lclZpZXcuY3JlYXRlKHsKICAgIGNoaWxkVmlld3M6IFsnYVZp
        ZXcnLCAnYlZpZXcnLCAnY1ZpZXcnXSwKICAgIGFWaWV3OiBFbWJlci5WaWV3
        LmNyZWF0ZSgpLAogICAgYlZpZXc6IEVtYmVyLlZpZXcuY3JlYXRlKCksCiAg
        ICBjVmlldzogRW1iZXIuVmlldy5jcmVhdGUoKQogIH0pOwogIGBgYAoKICBU
        aGUgdHdvIHN0cmF0ZWdpZXMgY2FuIGJlIGNvbWJpbmVkOgoKICBgYGBqYXZh
        c2NyaXB0CiAgYUNvbnRhaW5lciA9IEVtYmVyLkNvbnRhaW5lclZpZXcuY3Jl
        YXRlKHsKICAgIGNoaWxkVmlld3M6IFsnYVZpZXcnLCBFbWJlci5WaWV3LmNy
        ZWF0ZSgpXSwKICAgIGFWaWV3OiBFbWJlci5WaWV3LmNyZWF0ZSgpCiAgfSk7
        CiAgYGBgCgogIEVhY2ggY2hpbGQgdmlldydzIHJlbmRlcmluZyB3aWxsIGJl
        IGluc2VydGVkIGludG8gdGhlIGNvbnRhaW5lcidzIHJlbmRlcmVkCiAgSFRN
        TCBpbiB0aGUgc2FtZSBvcmRlciBhcyBpdHMgcG9zaXRpb24gaW4gdGhlIGBj
        aGlsZFZpZXdzYCBwcm9wZXJ0eS4KCiAgIyMgQWRkaW5nIGFuZCBSZW1vdmlu
        ZyBDaGlsZCBWaWV3cwoKICBUaGUgY29udGFpbmVyIHZpZXcgaW1wbGVtZW50
        cyBgRW1iZXIuTXV0YWJsZUFycmF5YCBhbGxvd2luZyBwcm9ncmFtbWF0aWMg
        bWFuYWdlbWVudCBvZiBpdHMgY2hpbGQgdmlld3MuCgogIFRvIHJlbW92ZSBh
        IHZpZXcsIHBhc3MgdGhhdCB2aWV3IGludG8gYSBgcmVtb3ZlT2JqZWN0YCBj
        YWxsIG9uIHRoZSBjb250YWluZXIgdmlldy4KCiAgR2l2ZW4gYW4gZW1wdHkg
        YDxib2R5PmAgdGhlIGZvbGxvd2luZyBjb2RlCgogIGBgYGphdmFzY3JpcHQK
        ICBhQ29udGFpbmVyID0gRW1iZXIuQ29udGFpbmVyVmlldy5jcmVhdGUoewog
        ICAgY2xhc3NOYW1lczogWyd0aGUtY29udGFpbmVyJ10sCiAgICBjaGlsZFZp
        ZXdzOiBbJ2FWaWV3JywgJ2JWaWV3J10sCiAgICBhVmlldzogRW1iZXIuVmll
        dy5jcmVhdGUoewogICAgICB0ZW1wbGF0ZTogRW1iZXIuSGFuZGxlYmFycy5j
        b21waWxlKCJBIikKICAgIH0pLAogICAgYlZpZXc6IEVtYmVyLlZpZXcuY3Jl
        YXRlKHsKICAgICAgdGVtcGxhdGU6IEVtYmVyLkhhbmRsZWJhcnMuY29tcGls
        ZSgiQiIpCiAgICB9KQogIH0pOwoKICBhQ29udGFpbmVyLmFwcGVuZFRvKCdi
        b2R5Jyk7CiAgYGBgCgogIFJlc3VsdHMgaW4gdGhlIEhUTUwKCiAgYGBgaHRt
        bAogIDxkaXYgY2xhc3M9ImVtYmVyLXZpZXcgdGhlLWNvbnRhaW5lciI+CiAg
        ICA8ZGl2IGNsYXNzPSJlbWJlci12aWV3Ij5BPC9kaXY+CiAgICA8ZGl2IGNs
        YXNzPSJlbWJlci12aWV3Ij5CPC9kaXY+CiAgPC9kaXY+CiAgYGBgCgogIFJl
        bW92aW5nIGEgdmlldwoKICBgYGBqYXZhc2NyaXB0CiAgYUNvbnRhaW5lci50
        b0FycmF5KCk7ICAvLyBbYUNvbnRhaW5lci5hVmlldywgYUNvbnRhaW5lci5i
        Vmlld10KICBhQ29udGFpbmVyLnJlbW92ZU9iamVjdChhQ29udGFpbmVyLmdl
        dCgnYlZpZXcnKSk7CiAgYUNvbnRhaW5lci50b0FycmF5KCk7ICAvLyBbYUNv
        bnRhaW5lci5hVmlld10KICBgYGAKCiAgV2lsbCByZXN1bHQgaW4gdGhlIGZv
        bGxvd2luZyBIVE1MCgogIGBgYGh0bWwKICA8ZGl2IGNsYXNzPSJlbWJlci12
        aWV3IHRoZS1jb250YWluZXIiPgogICAgPGRpdiBjbGFzcz0iZW1iZXItdmll
        dyI+QTwvZGl2PgogIDwvZGl2PgogIGBgYAoKICBTaW1pbGFybHksIGFkZGlu
        ZyBhIGNoaWxkIHZpZXcgaXMgYWNjb21wbGlzaGVkIGJ5IGFkZGluZyBgRW1i
        ZXIuVmlld2AgaW5zdGFuY2VzIHRvIHRoZQogIGNvbnRhaW5lciB2aWV3LgoK
        ICBHaXZlbiBhbiBlbXB0eSBgPGJvZHk+YCB0aGUgZm9sbG93aW5nIGNvZGUK
        CiAgYGBgamF2YXNjcmlwdAogIGFDb250YWluZXIgPSBFbWJlci5Db250YWlu
        ZXJWaWV3LmNyZWF0ZSh7CiAgICBjbGFzc05hbWVzOiBbJ3RoZS1jb250YWlu
        ZXInXSwKICAgIGNoaWxkVmlld3M6IFsnYVZpZXcnLCAnYlZpZXcnXSwKICAg
        IGFWaWV3OiBFbWJlci5WaWV3LmNyZWF0ZSh7CiAgICAgIHRlbXBsYXRlOiBF
        bWJlci5IYW5kbGViYXJzLmNvbXBpbGUoIkEiKQogICAgfSksCiAgICBiVmll
        dzogRW1iZXIuVmlldy5jcmVhdGUoewogICAgICB0ZW1wbGF0ZTogRW1iZXIu
        SGFuZGxlYmFycy5jb21waWxlKCJCIikKICAgIH0pCiAgfSk7CgogIGFDb250
        YWluZXIuYXBwZW5kVG8oJ2JvZHknKTsKICBgYGAKCiAgUmVzdWx0cyBpbiB0
        aGUgSFRNTAoKICBgYGBodG1sCiAgPGRpdiBjbGFzcz0iZW1iZXItdmlldyB0
        aGUtY29udGFpbmVyIj4KICAgIDxkaXYgY2xhc3M9ImVtYmVyLXZpZXciPkE8
        L2Rpdj4KICAgIDxkaXYgY2xhc3M9ImVtYmVyLXZpZXciPkI8L2Rpdj4KICA8
        L2Rpdj4KICBgYGAKCiAgQWRkaW5nIGEgdmlldwoKICBgYGBqYXZhc2NyaXB0
        CiAgQW5vdGhlclZpZXdDbGFzcyA9IEVtYmVyLlZpZXcuZXh0ZW5kKHsKICAg
        IHRlbXBsYXRlOiBFbWJlci5IYW5kbGViYXJzLmNvbXBpbGUoIkFub3RoZXIg
        dmlldyIpCiAgfSk7CgogIGFDb250YWluZXIudG9BcnJheSgpOyAgLy8gW2FD
        b250YWluZXIuYVZpZXcsIGFDb250YWluZXIuYlZpZXddCiAgYUNvbnRhaW5l
        ci5wdXNoT2JqZWN0KEFub3RoZXJWaWV3Q2xhc3MuY3JlYXRlKCkpOwogIGFD
        b250YWluZXIudG9BcnJheSgpOyAvLyBbYUNvbnRhaW5lci5hVmlldywgYUNv
        bnRhaW5lci5iVmlldywgPEFub3RoZXJWaWV3Q2xhc3MgaW5zdGFuY2U+XQog
        IGBgYAoKICBXaWxsIHJlc3VsdCBpbiB0aGUgZm9sbG93aW5nIEhUTUwKCiAg
        YGBgaHRtbAogIDxkaXYgY2xhc3M9ImVtYmVyLXZpZXcgdGhlLWNvbnRhaW5l
        ciI+CiAgICA8ZGl2IGNsYXNzPSJlbWJlci12aWV3Ij5BPC9kaXY+CiAgICA8
        ZGl2IGNsYXNzPSJlbWJlci12aWV3Ij5CPC9kaXY+CiAgICA8ZGl2IGNsYXNz
        PSJlbWJlci12aWV3Ij5Bbm90aGVyIHZpZXc8L2Rpdj4KICA8L2Rpdj4KICBg
        YGAKCiAgIyMgVGVtcGxhdGVzIGFuZCBMYXlvdXQKCiAgQSBgdGVtcGxhdGVg
        LCBgdGVtcGxhdGVOYW1lYCwgYGRlZmF1bHRUZW1wbGF0ZWAsIGBsYXlvdXRg
        LCBgbGF5b3V0TmFtZWAgb3IKICBgZGVmYXVsdExheW91dGAgcHJvcGVydHkg
        b24gYSBjb250YWluZXIgdmlldyB3aWxsIG5vdCByZXN1bHQgaW4gdGhlIHRl
        bXBsYXRlCiAgb3IgbGF5b3V0IGJlaW5nIHJlbmRlcmVkLiBUaGUgSFRNTCBj
        b250ZW50cyBvZiBhIGBFbWJlci5Db250YWluZXJWaWV3YCdzIERPTQogIHJl
        cHJlc2VudGF0aW9uIHdpbGwgb25seSBiZSB0aGUgcmVuZGVyZWQgSFRNTCBv
        ZiBpdHMgY2hpbGQgdmlld3MuCgogIEBjbGFzcyBDb250YWluZXJWaWV3CiAg
        QG5hbWVzcGFjZSBFbWJlcgogIEBleHRlbmRzIEVtYmVyLlZpZXcKKi8KRW1i
        ZXIuQ29udGFpbmVyVmlldyA9IEVtYmVyLlZpZXcuZXh0ZW5kKEVtYmVyLk11
        dGFibGVBcnJheSwgewogIHN0YXRlczogc3RhdGVzLAoKICBpbml0OiBmdW5j
        dGlvbigpIHsKICAgIHRoaXMuX3N1cGVyKCk7CgogICAgdmFyIGNoaWxkVmll
        d3MgPSBnZXQodGhpcywgJ2NoaWxkVmlld3MnKTsKCiAgICAvLyByZWRlZmlu
        ZSB2aWV3J3MgY2hpbGRWaWV3cyBwcm9wZXJ0eSB0aGF0IHdhcyBvYmxpdGVy
        YXRlZAogICAgRW1iZXIuZGVmaW5lUHJvcGVydHkodGhpcywgJ2NoaWxkVmll
        d3MnLCBFbWJlci5WaWV3LmNoaWxkVmlld3NQcm9wZXJ0eSk7CgogICAgdmFy
        IF9jaGlsZFZpZXdzID0gdGhpcy5fY2hpbGRWaWV3czsKCiAgICBmb3JFYWNo
        KGNoaWxkVmlld3MsIGZ1bmN0aW9uKHZpZXdOYW1lLCBpZHgpIHsKICAgICAg
        dmFyIHZpZXc7CgogICAgICBpZiAoJ3N0cmluZycgPT09IHR5cGVvZiB2aWV3
        TmFtZSkgewogICAgICAgIHZpZXcgPSBnZXQodGhpcywgdmlld05hbWUpOwog
        ICAgICAgIHZpZXcgPSB0aGlzLmNyZWF0ZUNoaWxkVmlldyh2aWV3KTsKICAg
        ICAgICBzZXQodGhpcywgdmlld05hbWUsIHZpZXcpOwogICAgICB9IGVsc2Ug
        ewogICAgICAgIHZpZXcgPSB0aGlzLmNyZWF0ZUNoaWxkVmlldyh2aWV3TmFt
        ZSk7CiAgICAgIH0KCiAgICAgIF9jaGlsZFZpZXdzW2lkeF0gPSB2aWV3Owog
        ICAgfSwgdGhpcyk7CgogICAgdmFyIGN1cnJlbnRWaWV3ID0gZ2V0KHRoaXMs
        ICdjdXJyZW50VmlldycpOwogICAgaWYgKGN1cnJlbnRWaWV3KSB7CiAgICAg
        IGlmICghX2NoaWxkVmlld3MubGVuZ3RoKSB7IF9jaGlsZFZpZXdzID0gdGhp
        cy5fY2hpbGRWaWV3cyA9IHRoaXMuX2NoaWxkVmlld3Muc2xpY2UoKTsgfQog
        ICAgICBfY2hpbGRWaWV3cy5wdXNoKHRoaXMuY3JlYXRlQ2hpbGRWaWV3KGN1
        cnJlbnRWaWV3KSk7CiAgICB9CiAgfSwKCiAgcmVwbGFjZTogZnVuY3Rpb24o
        aWR4LCByZW1vdmVkQ291bnQsIGFkZGVkVmlld3MpIHsKICAgIHZhciBhZGRl
        ZENvdW50ID0gYWRkZWRWaWV3cyA/IGdldChhZGRlZFZpZXdzLCAnbGVuZ3Ro
        JykgOiAwOwogICAgdmFyIHNlbGYgPSB0aGlzOwogICAgRW1iZXIuYXNzZXJ0
        KCJZb3UgY2FuJ3QgYWRkIGEgY2hpbGQgdG8gYSBjb250YWluZXIgdGhhdCBp
        cyBhbHJlYWR5IGEgY2hpbGQgb2YgYW5vdGhlciB2aWV3IiwgRW1iZXIuQShh
        ZGRlZFZpZXdzKS5ldmVyeShmdW5jdGlvbihpdGVtKSB7IHJldHVybiAhZ2V0
        KGl0ZW0sICdfcGFyZW50VmlldycpIHx8IGdldChpdGVtLCAnX3BhcmVudFZp
        ZXcnKSA9PT0gc2VsZjsgfSkpOwoKICAgIHRoaXMuYXJyYXlDb250ZW50V2ls
        bENoYW5nZShpZHgsIHJlbW92ZWRDb3VudCwgYWRkZWRDb3VudCk7CiAgICB0
        aGlzLmNoaWxkVmlld3NXaWxsQ2hhbmdlKHRoaXMuX2NoaWxkVmlld3MsIGlk
        eCwgcmVtb3ZlZENvdW50KTsKCiAgICBpZiAoYWRkZWRDb3VudCA9PT0gMCkg
        ewogICAgICB0aGlzLl9jaGlsZFZpZXdzLnNwbGljZShpZHgsIHJlbW92ZWRD
        b3VudCkgOwogICAgfSBlbHNlIHsKICAgICAgdmFyIGFyZ3MgPSBbaWR4LCBy
        ZW1vdmVkQ291bnRdLmNvbmNhdChhZGRlZFZpZXdzKTsKICAgICAgaWYgKGFk
        ZGVkVmlld3MubGVuZ3RoICYmICF0aGlzLl9jaGlsZFZpZXdzLmxlbmd0aCkg
        eyB0aGlzLl9jaGlsZFZpZXdzID0gdGhpcy5fY2hpbGRWaWV3cy5zbGljZSgp
        OyB9CiAgICAgIHRoaXMuX2NoaWxkVmlld3Muc3BsaWNlLmFwcGx5KHRoaXMu
        X2NoaWxkVmlld3MsIGFyZ3MpOwogICAgfQoKICAgIHRoaXMuYXJyYXlDb250
        ZW50RGlkQ2hhbmdlKGlkeCwgcmVtb3ZlZENvdW50LCBhZGRlZENvdW50KTsK
        ICAgIHRoaXMuY2hpbGRWaWV3c0RpZENoYW5nZSh0aGlzLl9jaGlsZFZpZXdz
        LCBpZHgsIHJlbW92ZWRDb3VudCwgYWRkZWRDb3VudCk7CgogICAgcmV0dXJu
        IHRoaXM7CiAgfSwKCiAgb2JqZWN0QXQ6IGZ1bmN0aW9uKGlkeCkgewogICAg
        cmV0dXJuIHRoaXMuX2NoaWxkVmlld3NbaWR4XTsKICB9LAoKICBsZW5ndGg6
        IEVtYmVyLmNvbXB1dGVkKGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiB0aGlz
        Ll9jaGlsZFZpZXdzLmxlbmd0aDsKICB9KS52b2xhdGlsZSgpLAoKICAvKioK
        ICAgIEluc3RydWN0cyBlYWNoIGNoaWxkIHZpZXcgdG8gcmVuZGVyIHRvIHRo
        ZSBwYXNzZWQgcmVuZGVyIGJ1ZmZlci4KCiAgICBAcHJpdmF0ZQogICAgQG1l
        dGhvZCByZW5kZXIKICAgIEBwYXJhbSB7RW1iZXIuUmVuZGVyQnVmZmVyfSBi
        dWZmZXIgdGhlIGJ1ZmZlciB0byByZW5kZXIgdG8KICAqLwogIHJlbmRlcjog
        ZnVuY3Rpb24oYnVmZmVyKSB7CiAgICB0aGlzLmZvckVhY2hDaGlsZFZpZXco
        ZnVuY3Rpb24odmlldykgewogICAgICB2aWV3LnJlbmRlclRvQnVmZmVyKGJ1
        ZmZlcik7CiAgICB9KTsKICB9LAoKICBpbnN0cnVtZW50TmFtZTogJ2NvbnRh
        aW5lcicsCgogIC8qKgogICAgV2hlbiBhIGNoaWxkIHZpZXcgaXMgcmVtb3Zl
        ZCwgZGVzdHJveSBpdHMgZWxlbWVudCBzbyB0aGF0CiAgICBpdCBpcyByZW1v
        dmVkIGZyb20gdGhlIERPTS4KCiAgICBUaGUgYXJyYXkgb2JzZXJ2ZXIgdGhh
        dCB0cmlnZ2VycyB0aGlzIGFjdGlvbiBpcyBzZXQgdXAgaW4gdGhlCiAgICBg
        cmVuZGVyVG9CdWZmZXJgIG1ldGhvZC4KCiAgICBAcHJpdmF0ZQogICAgQG1l
        dGhvZCBjaGlsZFZpZXdzV2lsbENoYW5nZQogICAgQHBhcmFtIHtFbWJlci5B
        cnJheX0gdmlld3MgdGhlIGNoaWxkIHZpZXdzIGFycmF5IGJlZm9yZSBtdXRh
        dGlvbgogICAgQHBhcmFtIHtOdW1iZXJ9IHN0YXJ0IHRoZSBzdGFydCBwb3Np
        dGlvbiBvZiB0aGUgbXV0YXRpb24KICAgIEBwYXJhbSB7TnVtYmVyfSByZW1v
        dmVkIHRoZSBudW1iZXIgb2YgY2hpbGQgdmlld3MgcmVtb3ZlZAogICoqLwog
        IGNoaWxkVmlld3NXaWxsQ2hhbmdlOiBmdW5jdGlvbih2aWV3cywgc3RhcnQs
        IHJlbW92ZWQpIHsKICAgIHRoaXMucHJvcGVydHlXaWxsQ2hhbmdlKCdjaGls
        ZFZpZXdzJyk7CgogICAgaWYgKHJlbW92ZWQgPiAwKSB7CiAgICAgIHZhciBj
        aGFuZ2VkVmlld3MgPSB2aWV3cy5zbGljZShzdGFydCwgc3RhcnQrcmVtb3Zl
        ZCk7CiAgICAgIC8vIHRyYW5zaXRpb24gdG8gcHJlUmVuZGVyIGJlZm9yZSBj
        bGVhcmluZyBwYXJlbnRWaWV3CiAgICAgIHRoaXMuY3VycmVudFN0YXRlLmNo
        aWxkVmlld3NXaWxsQ2hhbmdlKHRoaXMsIHZpZXdzLCBzdGFydCwgcmVtb3Zl
        ZCk7CiAgICAgIHRoaXMuaW5pdGlhbGl6ZVZpZXdzKGNoYW5nZWRWaWV3cywg
        bnVsbCwgbnVsbCk7CiAgICB9CiAgfSwKCiAgcmVtb3ZlQ2hpbGQ6IGZ1bmN0
        aW9uKGNoaWxkKSB7CiAgICB0aGlzLnJlbW92ZU9iamVjdChjaGlsZCk7CiAg
        ICByZXR1cm4gdGhpczsKICB9LAoKICAvKioKICAgIFdoZW4gYSBjaGlsZCB2
        aWV3IGlzIGFkZGVkLCBtYWtlIHN1cmUgdGhlIERPTSBnZXRzIHVwZGF0ZWQg
        YXBwcm9wcmlhdGVseS4KCiAgICBJZiB0aGUgdmlldyBoYXMgYWxyZWFkeSBy
        ZW5kZXJlZCBhbiBlbGVtZW50LCB3ZSB0ZWxsIHRoZSBjaGlsZCB2aWV3IHRv
        CiAgICBjcmVhdGUgYW4gZWxlbWVudCBhbmQgaW5zZXJ0IGl0IGludG8gdGhl
        IERPTS4gSWYgdGhlIGVuY2xvc2luZyBjb250YWluZXIKICAgIHZpZXcgaGFz
        IGFscmVhZHkgd3JpdHRlbiB0byBhIGJ1ZmZlciwgYnV0IG5vdCB5ZXQgY29u
        dmVydGVkIHRoYXQgYnVmZmVyCiAgICBpbnRvIGFuIGVsZW1lbnQsIHdlIGlu
        c2VydCB0aGUgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBjaGlsZCBp
        bnRvIHRoZQogICAgYXBwcm9wcmlhdGUgcGxhY2UgaW4gdGhlIGJ1ZmZlci4K
        CiAgICBAcHJpdmF0ZQogICAgQG1ldGhvZCBjaGlsZFZpZXdzRGlkQ2hhbmdl
        CiAgICBAcGFyYW0ge0VtYmVyLkFycmF5fSB2aWV3cyB0aGUgYXJyYXkgb2Yg
        Y2hpbGQgdmlld3MgYWZ0ZSB0aGUgbXV0YXRpb24gaGFzIG9jY3VycmVkCiAg
        ICBAcGFyYW0ge051bWJlcn0gc3RhcnQgdGhlIHN0YXJ0IHBvc2l0aW9uIG9m
        IHRoZSBtdXRhdGlvbgogICAgQHBhcmFtIHtOdW1iZXJ9IHJlbW92ZWQgdGhl
        IG51bWJlciBvZiBjaGlsZCB2aWV3cyByZW1vdmVkCiAgICBAcGFyYW0ge051
        bWJlcn0gdGhlIG51bWJlciBvZiBjaGlsZCB2aWV3cyBhZGRlZAogICovCiAg
        Y2hpbGRWaWV3c0RpZENoYW5nZTogZnVuY3Rpb24odmlld3MsIHN0YXJ0LCBy
        ZW1vdmVkLCBhZGRlZCkgewogICAgaWYgKGFkZGVkID4gMCkgewogICAgICB2
        YXIgY2hhbmdlZFZpZXdzID0gdmlld3Muc2xpY2Uoc3RhcnQsIHN0YXJ0K2Fk
        ZGVkKTsKICAgICAgdGhpcy5pbml0aWFsaXplVmlld3MoY2hhbmdlZFZpZXdz
        LCB0aGlzLCBnZXQodGhpcywgJ3RlbXBsYXRlRGF0YScpKTsKICAgICAgdGhp
        cy5jdXJyZW50U3RhdGUuY2hpbGRWaWV3c0RpZENoYW5nZSh0aGlzLCB2aWV3
        cywgc3RhcnQsIGFkZGVkKTsKICAgIH0KICAgIHRoaXMucHJvcGVydHlEaWRD
        aGFuZ2UoJ2NoaWxkVmlld3MnKTsKICB9LAoKICBpbml0aWFsaXplVmlld3M6
        IGZ1bmN0aW9uKHZpZXdzLCBwYXJlbnRWaWV3LCB0ZW1wbGF0ZURhdGEpIHsK
        ICAgIGZvckVhY2godmlld3MsIGZ1bmN0aW9uKHZpZXcpIHsKICAgICAgc2V0
        KHZpZXcsICdfcGFyZW50VmlldycsIHBhcmVudFZpZXcpOwoKICAgICAgaWYg
        KCF2aWV3LmNvbnRhaW5lciAmJiBwYXJlbnRWaWV3KSB7CiAgICAgICAgc2V0
        KHZpZXcsICdjb250YWluZXInLCBwYXJlbnRWaWV3LmNvbnRhaW5lcik7CiAg
        ICAgIH0KCiAgICAgIGlmICghZ2V0KHZpZXcsICd0ZW1wbGF0ZURhdGEnKSkg
        ewogICAgICAgIHNldCh2aWV3LCAndGVtcGxhdGVEYXRhJywgdGVtcGxhdGVE
        YXRhKTsKICAgICAgfQogICAgfSk7CiAgfSwKCiAgY3VycmVudFZpZXc6IG51
        bGwsCgogIF9jdXJyZW50Vmlld1dpbGxDaGFuZ2U6IEVtYmVyLmJlZm9yZU9i
        c2VydmVyKCdjdXJyZW50VmlldycsIGZ1bmN0aW9uKCkgewogICAgdmFyIGN1
        cnJlbnRWaWV3ID0gZ2V0KHRoaXMsICdjdXJyZW50VmlldycpOwogICAgaWYg
        KGN1cnJlbnRWaWV3KSB7CiAgICAgIGN1cnJlbnRWaWV3LmRlc3Ryb3koKTsK
        ICAgIH0KICB9KSwKCiAgX2N1cnJlbnRWaWV3RGlkQ2hhbmdlOiBFbWJlci5v
        YnNlcnZlcignY3VycmVudFZpZXcnLCBmdW5jdGlvbigpIHsKICAgIHZhciBj
        dXJyZW50VmlldyA9IGdldCh0aGlzLCAnY3VycmVudFZpZXcnKTsKICAgIGlm
        IChjdXJyZW50VmlldykgewogICAgICBFbWJlci5hc3NlcnQoIllvdSB0cmll
        ZCB0byBzZXQgYSBjdXJyZW50IHZpZXcgdGhhdCBhbHJlYWR5IGhhcyBhIHBh
        cmVudC4gTWFrZSBzdXJlIHlvdSBkb24ndCBoYXZlIG11bHRpcGxlIG91dGxl
        dHMgaW4gdGhlIHNhbWUgdmlldy4iLCAhZ2V0KGN1cnJlbnRWaWV3LCAnX3Bh
        cmVudFZpZXcnKSk7CiAgICAgIHRoaXMucHVzaE9iamVjdChjdXJyZW50Vmll
        dyk7CiAgICB9CiAgfSksCgogIF9lbnN1cmVDaGlsZHJlbkFyZUluRE9NOiBm
        dW5jdGlvbiAoKSB7CiAgICB0aGlzLmN1cnJlbnRTdGF0ZS5lbnN1cmVDaGls
        ZHJlbkFyZUluRE9NKHRoaXMpOwogIH0KfSk7CgpFbWJlci5tZXJnZShzdGF0
        ZXMuX2RlZmF1bHQsIHsKICBjaGlsZFZpZXdzV2lsbENoYW5nZTogRW1iZXIu
        SywKICBjaGlsZFZpZXdzRGlkQ2hhbmdlOiBFbWJlci5LLAogIGVuc3VyZUNo
        aWxkcmVuQXJlSW5ET006IEVtYmVyLksKfSk7CgpFbWJlci5tZXJnZShzdGF0
        ZXMuaW5CdWZmZXIsIHsKICBjaGlsZFZpZXdzRGlkQ2hhbmdlOiBmdW5jdGlv
        bihwYXJlbnRWaWV3LCB2aWV3cywgc3RhcnQsIGFkZGVkKSB7CiAgICB0aHJv
        dyBuZXcgRW1iZXIuRXJyb3IoJ1lvdSBjYW5ub3QgbW9kaWZ5IGNoaWxkIHZp
        ZXdzIHdoaWxlIGluIHRoZSBpbkJ1ZmZlciBzdGF0ZScpOwogIH0KfSk7CgpF
        bWJlci5tZXJnZShzdGF0ZXMuaGFzRWxlbWVudCwgewogIGNoaWxkVmlld3NX
        aWxsQ2hhbmdlOiBmdW5jdGlvbih2aWV3LCB2aWV3cywgc3RhcnQsIHJlbW92
        ZWQpIHsKICAgIGZvciAodmFyIGk9c3RhcnQ7IGk8c3RhcnQrcmVtb3ZlZDsg
        aSsrKSB7CiAgICAgIHZpZXdzW2ldLnJlbW92ZSgpOwogICAgfQogIH0sCgog
        IGNoaWxkVmlld3NEaWRDaGFuZ2U6IGZ1bmN0aW9uKHZpZXcsIHZpZXdzLCBz
        dGFydCwgYWRkZWQpIHsKICAgIEVtYmVyLnJ1bi5zY2hlZHVsZU9uY2UoJ3Jl
        bmRlcicsIHZpZXcsICdfZW5zdXJlQ2hpbGRyZW5BcmVJbkRPTScpOwogIH0s
        CgogIGVuc3VyZUNoaWxkcmVuQXJlSW5ET006IGZ1bmN0aW9uKHZpZXcpIHsK
        ICAgIHZhciBjaGlsZFZpZXdzID0gdmlldy5fY2hpbGRWaWV3cywgaSwgbGVu
        LCBjaGlsZFZpZXcsIHByZXZpb3VzLCBidWZmZXIsIHZpZXdDb2xsZWN0aW9u
        ID0gbmV3IFZpZXdDb2xsZWN0aW9uKCk7CgogICAgZm9yIChpID0gMCwgbGVu
        ID0gY2hpbGRWaWV3cy5sZW5ndGg7IGkgPCBsZW47IGkrKykgewogICAgICBj
        aGlsZFZpZXcgPSBjaGlsZFZpZXdzW2ldOwoKICAgICAgaWYgKCFidWZmZXIp
        IHsgYnVmZmVyID0gRW1iZXIuUmVuZGVyQnVmZmVyKCk7IGJ1ZmZlci5faGFz
        RWxlbWVudCA9IGZhbHNlOyB9CgogICAgICBpZiAoY2hpbGRWaWV3LnJlbmRl
        clRvQnVmZmVySWZOZWVkZWQoYnVmZmVyKSkgewogICAgICAgIHZpZXdDb2xs
        ZWN0aW9uLnB1c2goY2hpbGRWaWV3KTsKICAgICAgfSBlbHNlIGlmICh2aWV3
        Q29sbGVjdGlvbi5sZW5ndGgpIHsKICAgICAgICBpbnNlcnRWaWV3Q29sbGVj
        dGlvbih2aWV3LCB2aWV3Q29sbGVjdGlvbiwgcHJldmlvdXMsIGJ1ZmZlcik7
        CiAgICAgICAgYnVmZmVyID0gbnVsbDsKICAgICAgICBwcmV2aW91cyA9IGNo
        aWxkVmlldzsKICAgICAgICB2aWV3Q29sbGVjdGlvbi5jbGVhcigpOwogICAg
        ICB9IGVsc2UgewogICAgICAgIHByZXZpb3VzID0gY2hpbGRWaWV3OwogICAg
        ICB9CiAgICB9CgogICAgaWYgKHZpZXdDb2xsZWN0aW9uLmxlbmd0aCkgewog
        ICAgICBpbnNlcnRWaWV3Q29sbGVjdGlvbih2aWV3LCB2aWV3Q29sbGVjdGlv
        biwgcHJldmlvdXMsIGJ1ZmZlcik7CiAgICB9CiAgfQp9KTsKCmZ1bmN0aW9u
        IGluc2VydFZpZXdDb2xsZWN0aW9uKHZpZXcsIHZpZXdDb2xsZWN0aW9uLCBw
        cmV2aW91cywgYnVmZmVyKSB7CiAgdmlld0NvbGxlY3Rpb24udHJpZ2dlclJl
        Y3Vyc2l2ZWx5KCd3aWxsSW5zZXJ0RWxlbWVudCcpOwoKICBpZiAocHJldmlv
        dXMpIHsKICAgIHByZXZpb3VzLmRvbU1hbmFnZXIuYWZ0ZXIocHJldmlvdXMs
        IGJ1ZmZlci5zdHJpbmcoKSk7CiAgfSBlbHNlIHsKICAgIHZpZXcuZG9tTWFu
        YWdlci5wcmVwZW5kKHZpZXcsIGJ1ZmZlci5zdHJpbmcoKSk7CiAgfQoKICB2
        aWV3Q29sbGVjdGlvbi5mb3JFYWNoKGZ1bmN0aW9uKHYpIHsKICAgIHYudHJh
        bnNpdGlvblRvKCdpbkRPTScpOwogICAgdi5wcm9wZXJ0eURpZENoYW5nZSgn
        ZWxlbWVudCcpOwogICAgdi50cmlnZ2VyUmVjdXJzaXZlbHkoJ2RpZEluc2Vy
        dEVsZW1lbnQnKTsKICB9KTsKfQoKCn0pKCk7CgoKCihmdW5jdGlvbigpIHsK
        LyoqCkBtb2R1bGUgZW1iZXIKQHN1Ym1vZHVsZSBlbWJlci12aWV3cwoqLwoK
        dmFyIGdldCA9IEVtYmVyLmdldCwgc2V0ID0gRW1iZXIuc2V0LCBmbXQgPSBF
        bWJlci5TdHJpbmcuZm10OwoKLyoqCiAgYEVtYmVyLkNvbGxlY3Rpb25WaWV3
        YCBpcyBhbiBgRW1iZXIuVmlld2AgZGVzY2VuZGVudCByZXNwb25zaWJsZSBm
        b3IgbWFuYWdpbmcKICBhIGNvbGxlY3Rpb24gKGFuIGFycmF5IG9yIGFycmF5
        LWxpa2Ugb2JqZWN0KSBieSBtYWludGFpbmluZyBhIGNoaWxkIHZpZXcgb2Jq
        ZWN0CiAgYW5kIGFzc29jaWF0ZWQgRE9NIHJlcHJlc2VudGF0aW9uIGZvciBl
        YWNoIGl0ZW0gaW4gdGhlIGFycmF5IGFuZCBlbnN1cmluZwogIHRoYXQgY2hp
        bGQgdmlld3MgYW5kIHRoZWlyIGFzc29jaWF0ZWQgcmVuZGVyZWQgSFRNTCBh
        cmUgdXBkYXRlZCB3aGVuIGl0ZW1zIGluCiAgdGhlIGFycmF5IGFyZSBhZGRl
        ZCwgcmVtb3ZlZCwgb3IgcmVwbGFjZWQuCgogICMjIFNldHRpbmcgY29udGVu
        dAoKICBUaGUgbWFuYWdlZCBjb2xsZWN0aW9uIG9mIG9iamVjdHMgaXMgcmVm
        ZXJlbmNlZCBhcyB0aGUgYEVtYmVyLkNvbGxlY3Rpb25WaWV3YAogIGluc3Rh
        bmNlJ3MgYGNvbnRlbnRgIHByb3BlcnR5LgoKICBgYGBqYXZhc2NyaXB0CiAg
        c29tZUl0ZW1zVmlldyA9IEVtYmVyLkNvbGxlY3Rpb25WaWV3LmNyZWF0ZSh7
        CiAgICBjb250ZW50OiBbJ0EnLCAnQicsJ0MnXQogIH0pCiAgYGBgCgogIFRo
        ZSB2aWV3IGZvciBlYWNoIGl0ZW0gaW4gdGhlIGNvbGxlY3Rpb24gd2lsbCBo
        YXZlIGl0cyBgY29udGVudGAgcHJvcGVydHkgc2V0CiAgdG8gdGhlIGl0ZW0u
        CgogICMjIFNwZWNpZnlpbmcgaXRlbVZpZXdDbGFzcwoKICBCeSBkZWZhdWx0
        IHRoZSB2aWV3IGNsYXNzIGZvciBlYWNoIGl0ZW0gaW4gdGhlIG1hbmFnZWQg
        Y29sbGVjdGlvbiB3aWxsIGJlIGFuCiAgaW5zdGFuY2Ugb2YgYEVtYmVyLlZp
        ZXdgLiBZb3UgY2FuIHN1cHBseSBhIGRpZmZlcmVudCBjbGFzcyBieSBzZXR0
        aW5nIHRoZQogIGBDb2xsZWN0aW9uVmlld2AncyBgaXRlbVZpZXdDbGFzc2Ag
        cHJvcGVydHkuCgogIEdpdmVuIGFuIGVtcHR5IGA8Ym9keT5gIGFuZCB0aGUg
        Zm9sbG93aW5nIGNvZGU6CgogIGBgYGphdmFzY3JpcHQKICBzb21lSXRlbXNW
        aWV3ID0gRW1iZXIuQ29sbGVjdGlvblZpZXcuY3JlYXRlKHsKICAgIGNsYXNz
        TmFtZXM6IFsnYS1jb2xsZWN0aW9uJ10sCiAgICBjb250ZW50OiBbJ0EnLCdC
        JywnQyddLAogICAgaXRlbVZpZXdDbGFzczogRW1iZXIuVmlldy5leHRlbmQo
        ewogICAgICB0ZW1wbGF0ZTogRW1iZXIuSGFuZGxlYmFycy5jb21waWxlKCJ0
        aGUgbGV0dGVyOiB7e3ZpZXcuY29udGVudH19IikKICAgIH0pCiAgfSk7Cgog
        IHNvbWVJdGVtc1ZpZXcuYXBwZW5kVG8oJ2JvZHknKTsKICBgYGAKCiAgV2ls
        bCByZXN1bHQgaW4gdGhlIGZvbGxvd2luZyBIVE1MIHN0cnVjdHVyZQoKICBg
        YGBodG1sCiAgPGRpdiBjbGFzcz0iZW1iZXItdmlldyBhLWNvbGxlY3Rpb24i
        PgogICAgPGRpdiBjbGFzcz0iZW1iZXItdmlldyI+dGhlIGxldHRlcjogQTwv
        ZGl2PgogICAgPGRpdiBjbGFzcz0iZW1iZXItdmlldyI+dGhlIGxldHRlcjog
        QjwvZGl2PgogICAgPGRpdiBjbGFzcz0iZW1iZXItdmlldyI+dGhlIGxldHRl
        cjogQzwvZGl2PgogIDwvZGl2PgogIGBgYAoKICAjIyBBdXRvbWF0aWMgbWF0
        Y2hpbmcgb2YgcGFyZW50L2NoaWxkIHRhZ05hbWVzCgogIFNldHRpbmcgdGhl
        IGB0YWdOYW1lYCBwcm9wZXJ0eSBvZiBhIGBDb2xsZWN0aW9uVmlld2AgdG8g
        YW55IG9mCiAgInVsIiwgIm9sIiwgInRhYmxlIiwgInRoZWFkIiwgInRib2R5
        IiwgInRmb290IiwgInRyIiwgb3IgInNlbGVjdCIgd2lsbCByZXN1bHQKICBp
        biB0aGUgaXRlbSB2aWV3cyByZWNlaXZpbmcgYW4gYXBwcm9wcmlhdGVseSBt
        YXRjaGVkIGB0YWdOYW1lYCBwcm9wZXJ0eS4KCiAgR2l2ZW4gYW4gZW1wdHkg
        YDxib2R5PmAgYW5kIHRoZSBmb2xsb3dpbmcgY29kZToKCiAgYGBgamF2YXNj
        cmlwdAogIGFuVW5vcmRlcmVkTGlzdFZpZXcgPSBFbWJlci5Db2xsZWN0aW9u
        Vmlldy5jcmVhdGUoewogICAgdGFnTmFtZTogJ3VsJywKICAgIGNvbnRlbnQ6
        IFsnQScsJ0InLCdDJ10sCiAgICBpdGVtVmlld0NsYXNzOiBFbWJlci5WaWV3
        LmV4dGVuZCh7CiAgICAgIHRlbXBsYXRlOiBFbWJlci5IYW5kbGViYXJzLmNv
        bXBpbGUoInRoZSBsZXR0ZXI6IHt7dmlldy5jb250ZW50fX0iKQogICAgfSkK
        ICB9KTsKCiAgYW5Vbm9yZGVyZWRMaXN0Vmlldy5hcHBlbmRUbygnYm9keScp
        OwogIGBgYAoKICBXaWxsIHJlc3VsdCBpbiB0aGUgZm9sbG93aW5nIEhUTUwg
        c3RydWN0dXJlCgogIGBgYGh0bWwKICA8dWwgY2xhc3M9ImVtYmVyLXZpZXcg
        YS1jb2xsZWN0aW9uIj4KICAgIDxsaSBjbGFzcz0iZW1iZXItdmlldyI+dGhl
        IGxldHRlcjogQTwvbGk+CiAgICA8bGkgY2xhc3M9ImVtYmVyLXZpZXciPnRo
        ZSBsZXR0ZXI6IEI8L2xpPgogICAgPGxpIGNsYXNzPSJlbWJlci12aWV3Ij50
        aGUgbGV0dGVyOiBDPC9saT4KICA8L3VsPgogIGBgYAoKICBBZGRpdGlvbmFs
        IGB0YWdOYW1lYCBwYWlycyBjYW4gYmUgcHJvdmlkZWQgYnkgYWRkaW5nIHRv
        CiAgYEVtYmVyLkNvbGxlY3Rpb25WaWV3LkNPTlRBSU5FUl9NQVAgYAoKICBg
        YGBqYXZhc2NyaXB0CiAgRW1iZXIuQ29sbGVjdGlvblZpZXcuQ09OVEFJTkVS
        X01BUFsnYXJ0aWNsZSddID0gJ3NlY3Rpb24nCiAgYGBgCgogICMjIFByb2dy
        YW1tYXRpYyBjcmVhdGlvbiBvZiBjaGlsZCB2aWV3cwoKICBGb3IgY2FzZXMg
        d2hlcmUgYWRkaXRpb25hbCBjdXN0b21pemF0aW9uIGJleW9uZCB0aGUgdXNl
        IG9mIGEgc2luZ2xlCiAgYGl0ZW1WaWV3Q2xhc3NgIG9yIGB0YWdOYW1lYCBt
        YXRjaGluZyBpcyByZXF1aXJlZCBDb2xsZWN0aW9uVmlldydzCiAgYGNyZWF0
        ZUNoaWxkVmlld2AgbWV0aG9kIGNhbiBiZSBvdmVyaWRkZW46CgogIGBgYGph
        dmFzY3JpcHQKICBDdXN0b21Db2xsZWN0aW9uVmlldyA9IEVtYmVyLkNvbGxl
        Y3Rpb25WaWV3LmV4dGVuZCh7CiAgICBjcmVhdGVDaGlsZFZpZXc6IGZ1bmN0
        aW9uKHZpZXdDbGFzcywgYXR0cnMpIHsKICAgICAgaWYgKGF0dHJzLmNvbnRl
        bnQua2luZCA9PSAnYWxidW0nKSB7CiAgICAgICAgdmlld0NsYXNzID0gQXBw
        LkFsYnVtVmlldzsKICAgICAgfSBlbHNlIHsKICAgICAgICB2aWV3Q2xhc3Mg
        PSBBcHAuU29uZ1ZpZXc7CiAgICAgIH0KICAgICAgcmV0dXJuIHRoaXMuX3N1
        cGVyKHZpZXdDbGFzcywgYXR0cnMpOwogICAgfQogIH0pOwogIGBgYAoKICAj
        IyBFbXB0eSBWaWV3CgogIFlvdSBjYW4gcHJvdmlkZSBhbiBgRW1iZXIuVmll
        d2Agc3ViY2xhc3MgdG8gdGhlIGBFbWJlci5Db2xsZWN0aW9uVmlld2AKICBp
        bnN0YW5jZSBhcyBpdHMgYGVtcHR5Vmlld2AgcHJvcGVydHkuIElmIHRoZSBg
        Y29udGVudGAgcHJvcGVydHkgb2YgYQogIGBDb2xsZWN0aW9uVmlld2AgaXMg
        c2V0IHRvIGBudWxsYCBvciBhbiBlbXB0eSBhcnJheSwgYW4gaW5zdGFuY2Ug
        b2YgdGhpcyB2aWV3CiAgd2lsbCBiZSB0aGUgYENvbGxlY3Rpb25WaWV3YHMg
        b25seSBjaGlsZC4KCiAgYGBgamF2YXNjcmlwdAogIGFMaXN0V2l0aE5vdGhp
        bmcgPSBFbWJlci5Db2xsZWN0aW9uVmlldy5jcmVhdGUoewogICAgY2xhc3NO
        YW1lczogWydub3RoaW5nJ10KICAgIGNvbnRlbnQ6IG51bGwsCiAgICBlbXB0
        eVZpZXc6IEVtYmVyLlZpZXcuZXh0ZW5kKHsKICAgICAgdGVtcGxhdGU6IEVt
        YmVyLkhhbmRsZWJhcnMuY29tcGlsZSgiVGhlIGNvbGxlY3Rpb24gaXMgZW1w
        dHkiKQogICAgfSkKICB9KTsKCiAgYUxpc3RXaXRoTm90aGluZy5hcHBlbmRU
        bygnYm9keScpOwogIGBgYAoKICBXaWxsIHJlc3VsdCBpbiB0aGUgZm9sbG93
        aW5nIEhUTUwgc3RydWN0dXJlCgogIGBgYGh0bWwKICA8ZGl2IGNsYXNzPSJl
        bWJlci12aWV3IG5vdGhpbmciPgogICAgPGRpdiBjbGFzcz0iZW1iZXItdmll
        dyI+CiAgICAgIFRoZSBjb2xsZWN0aW9uIGlzIGVtcHR5CiAgICA8L2Rpdj4K
        ICA8L2Rpdj4KICBgYGAKCiAgIyMgQWRkaW5nIGFuZCBSZW1vdmluZyBpdGVt
        cwoKICBUaGUgYGNoaWxkVmlld3NgIHByb3BlcnR5IG9mIGEgYENvbGxlY3Rp
        b25WaWV3YCBzaG91bGQgbm90IGJlIGRpcmVjdGx5CiAgbWFuaXB1bGF0ZWQu
        IEluc3RlYWQsIGFkZCwgcmVtb3ZlLCByZXBsYWNlIGl0ZW1zIGZyb20gaXRz
        IGBjb250ZW50YCBwcm9wZXJ0eS4KICBUaGlzIHdpbGwgdHJpZ2dlciBhcHBy
        b3ByaWF0ZSBjaGFuZ2VzIHRvIGl0cyByZW5kZXJlZCBIVE1MLgoKCiAgQGNs
        YXNzIENvbGxlY3Rpb25WaWV3CiAgQG5hbWVzcGFjZSBFbWJlcgogIEBleHRl
        bmRzIEVtYmVyLkNvbnRhaW5lclZpZXcKICBAc2luY2UgRW1iZXIgMC45Ciov
        CkVtYmVyLkNvbGxlY3Rpb25WaWV3ID0gRW1iZXIuQ29udGFpbmVyVmlldy5l
        eHRlbmQoewoKICAvKioKICAgIEEgbGlzdCBvZiBpdGVtcyB0byBiZSBkaXNw
        bGF5ZWQgYnkgdGhlIGBFbWJlci5Db2xsZWN0aW9uVmlld2AuCgogICAgQHBy
        b3BlcnR5IGNvbnRlbnQKICAgIEB0eXBlIEVtYmVyLkFycmF5CiAgICBAZGVm
        YXVsdCBudWxsCiAgKi8KICBjb250ZW50OiBudWxsLAoKICAvKioKICAgIFRo
        aXMgcHJvdmlkZXMgbWV0YWRhdGEgYWJvdXQgd2hhdCBraW5kIG9mIGVtcHR5
        IHZpZXcgY2xhc3MgdGhpcwogICAgY29sbGVjdGlvbiB3b3VsZCBsaWtlIGlm
        IGl0IGlzIGJlaW5nIGluc3RhbnRpYXRlZCBmcm9tIGFub3RoZXIKICAgIHN5
        c3RlbSAobGlrZSBIYW5kbGViYXJzKQoKICAgIEBwcml2YXRlCiAgICBAcHJv
        cGVydHkgZW1wdHlWaWV3Q2xhc3MKICAqLwogIGVtcHR5Vmlld0NsYXNzOiBF
        bWJlci5WaWV3LAoKICAvKioKICAgIEFuIG9wdGlvbmFsIHZpZXcgdG8gZGlz
        cGxheSBpZiBjb250ZW50IGlzIHNldCB0byBhbiBlbXB0eSBhcnJheS4KCiAg
        ICBAcHJvcGVydHkgZW1wdHlWaWV3CiAgICBAdHlwZSBFbWJlci5WaWV3CiAg
        ICBAZGVmYXVsdCBudWxsCiAgKi8KICBlbXB0eVZpZXc6IG51bGwsCgogIC8q
        KgogICAgQHByb3BlcnR5IGl0ZW1WaWV3Q2xhc3MKICAgIEB0eXBlIEVtYmVy
        LlZpZXcKICAgIEBkZWZhdWx0IEVtYmVyLlZpZXcKICAqLwogIGl0ZW1WaWV3
        Q2xhc3M6IEVtYmVyLlZpZXcsCgogIC8qKgogICAgU2V0dXAgYSBDb2xsZWN0
        aW9uVmlldwoKICAgIEBtZXRob2QgaW5pdAogICovCiAgaW5pdDogZnVuY3Rp
        b24oKSB7CiAgICB2YXIgcmV0ID0gdGhpcy5fc3VwZXIoKTsKICAgIHRoaXMu
        X2NvbnRlbnREaWRDaGFuZ2UoKTsKICAgIHJldHVybiByZXQ7CiAgfSwKCiAg
        LyoqCiAgICBJbnZva2VkIHdoZW4gdGhlIGNvbnRlbnQgcHJvcGVydHkgaXMg
        YWJvdXQgdG8gY2hhbmdlLiBOb3RpZmllcyBvYnNlcnZlcnMgdGhhdCB0aGUK
        ICAgIGVudGlyZSBhcnJheSBjb250ZW50IHdpbGwgY2hhbmdlLgoKICAgIEBw
        cml2YXRlCiAgICBAbWV0aG9kIF9jb250ZW50V2lsbENoYW5nZQogICovCiAg
        X2NvbnRlbnRXaWxsQ2hhbmdlOiBFbWJlci5iZWZvcmVPYnNlcnZlcignY29u
        dGVudCcsIGZ1bmN0aW9uKCkgewogICAgdmFyIGNvbnRlbnQgPSB0aGlzLmdl
        dCgnY29udGVudCcpOwoKICAgIGlmIChjb250ZW50KSB7IGNvbnRlbnQucmVt
        b3ZlQXJyYXlPYnNlcnZlcih0aGlzKTsgfQogICAgdmFyIGxlbiA9IGNvbnRl
        bnQgPyBnZXQoY29udGVudCwgJ2xlbmd0aCcpIDogMDsKICAgIHRoaXMuYXJy
        YXlXaWxsQ2hhbmdlKGNvbnRlbnQsIDAsIGxlbik7CiAgfSksCgogIC8qKgog
        ICAgQ2hlY2sgdG8gbWFrZSBzdXJlIHRoYXQgdGhlIGNvbnRlbnQgaGFzIGNo
        YW5nZWQsIGFuZCBpZiBzbywKICAgIHVwZGF0ZSB0aGUgY2hpbGRyZW4gZGly
        ZWN0bHkuIFRoaXMgaXMgYWx3YXlzIHNjaGVkdWxlZAogICAgYXN5bmNocm9u
        b3VzbHksIHRvIGFsbG93IHRoZSBlbGVtZW50IHRvIGJlIGNyZWF0ZWQgYmVm
        b3JlCiAgICBiaW5kaW5ncyBoYXZlIHN5bmNocm9uaXplZCBhbmQgdmljZSB2
        ZXJzYS4KCiAgICBAcHJpdmF0ZQogICAgQG1ldGhvZCBfY29udGVudERpZENo
        YW5nZQogICovCiAgX2NvbnRlbnREaWRDaGFuZ2U6IEVtYmVyLm9ic2VydmVy
        KCdjb250ZW50JywgZnVuY3Rpb24oKSB7CiAgICB2YXIgY29udGVudCA9IGdl
        dCh0aGlzLCAnY29udGVudCcpOwoKICAgIGlmIChjb250ZW50KSB7CiAgICAg
        IHRoaXMuX2Fzc2VydEFycmF5TGlrZShjb250ZW50KTsKICAgICAgY29udGVu
        dC5hZGRBcnJheU9ic2VydmVyKHRoaXMpOwogICAgfQoKICAgIHZhciBsZW4g
        PSBjb250ZW50ID8gZ2V0KGNvbnRlbnQsICdsZW5ndGgnKSA6IDA7CiAgICB0
        aGlzLmFycmF5RGlkQ2hhbmdlKGNvbnRlbnQsIDAsIG51bGwsIGxlbik7CiAg
        fSksCgogIC8qKgogICAgRW5zdXJlIHRoYXQgdGhlIGNvbnRlbnQgaW1wbGVt
        ZW50cyBFbWJlci5BcnJheQoKICAgIEBwcml2YXRlCiAgICBAbWV0aG9kIF9h
        c3NlcnRBcnJheUxpa2UKICAqLwogIF9hc3NlcnRBcnJheUxpa2U6IGZ1bmN0
        aW9uKGNvbnRlbnQpIHsKICAgIEVtYmVyLmFzc2VydChmbXQoImFuIEVtYmVy
        LkNvbGxlY3Rpb25WaWV3J3MgY29udGVudCBtdXN0IGltcGxlbWVudCBFbWJl
        ci5BcnJheS4gWW91IHBhc3NlZCAlQCIsIFtjb250ZW50XSksIEVtYmVyLkFy
        cmF5LmRldGVjdChjb250ZW50KSk7CiAgfSwKCiAgLyoqCiAgICBSZW1vdmVz
        IHRoZSBjb250ZW50IGFuZCBjb250ZW50IG9ic2VydmVycy4KCiAgICBAbWV0
        aG9kIGRlc3Ryb3kKICAqLwogIGRlc3Ryb3k6IGZ1bmN0aW9uKCkgewogICAg
        aWYgKCF0aGlzLl9zdXBlcigpKSB7IHJldHVybjsgfQoKICAgIHZhciBjb250
        ZW50ID0gZ2V0KHRoaXMsICdjb250ZW50Jyk7CiAgICBpZiAoY29udGVudCkg
        eyBjb250ZW50LnJlbW92ZUFycmF5T2JzZXJ2ZXIodGhpcyk7IH0KCiAgICBp
        ZiAodGhpcy5fY3JlYXRlZEVtcHR5VmlldykgewogICAgICB0aGlzLl9jcmVh
        dGVkRW1wdHlWaWV3LmRlc3Ryb3koKTsKICAgIH0KCiAgICByZXR1cm4gdGhp
        czsKICB9LAoKICAvKioKICAgIENhbGxlZCB3aGVuIGEgbXV0YXRpb24gdG8g
        dGhlIHVuZGVybHlpbmcgY29udGVudCBhcnJheSB3aWxsIG9jY3VyLgoKICAg
        IFRoaXMgbWV0aG9kIHdpbGwgcmVtb3ZlIGFueSB2aWV3cyB0aGF0IGFyZSBu
        byBsb25nZXIgaW4gdGhlIHVuZGVybHlpbmcKICAgIGNvbnRlbnQgYXJyYXku
        CgogICAgSW52b2tlcyB3aGVuZXZlciB0aGUgY29udGVudCBhcnJheSBpdHNl
        bGYgd2lsbCBjaGFuZ2UuCgogICAgQG1ldGhvZCBhcnJheVdpbGxDaGFuZ2UK
        ICAgIEBwYXJhbSB7QXJyYXl9IGNvbnRlbnQgdGhlIG1hbmFnZWQgY29sbGVj
        dGlvbiBvZiBvYmplY3RzCiAgICBAcGFyYW0ge051bWJlcn0gc3RhcnQgdGhl
        IGluZGV4IGF0IHdoaWNoIHRoZSBjaGFuZ2VzIHdpbGwgb2NjdXJyCiAgICBA
        cGFyYW0ge051bWJlcn0gcmVtb3ZlZCBudW1iZXIgb2Ygb2JqZWN0IHRvIGJl
        IHJlbW92ZWQgZnJvbSBjb250ZW50CiAgKi8KICBhcnJheVdpbGxDaGFuZ2U6
        IGZ1bmN0aW9uKGNvbnRlbnQsIHN0YXJ0LCByZW1vdmVkQ291bnQpIHsKICAg
        IC8vIElmIHRoZSBjb250ZW50cyB3ZXJlIGVtcHR5IGJlZm9yZSBhbmQgdGhp
        cyB0ZW1wbGF0ZSBjb2xsZWN0aW9uIGhhcyBhbgogICAgLy8gZW1wdHkgdmll
        dyByZW1vdmUgaXQgbm93LgogICAgdmFyIGVtcHR5VmlldyA9IGdldCh0aGlz
        LCAnZW1wdHlWaWV3Jyk7CiAgICBpZiAoZW1wdHlWaWV3ICYmIGVtcHR5Vmll
        dyBpbnN0YW5jZW9mIEVtYmVyLlZpZXcpIHsKICAgICAgZW1wdHlWaWV3LnJl
        bW92ZUZyb21QYXJlbnQoKTsKICAgIH0KCiAgICAvLyBMb29wIHRocm91Z2gg
        Y2hpbGQgdmlld3MgdGhhdCBjb3JyZXNwb25kIHdpdGggdGhlIHJlbW92ZWQg
        aXRlbXMuCiAgICAvLyBOb3RlIHRoYXQgd2UgbG9vcCBmcm9tIHRoZSBlbmQg
        b2YgdGhlIGFycmF5IHRvIHRoZSBiZWdpbm5pbmcgYmVjYXVzZQogICAgLy8g
        d2UgYXJlIG11dGF0aW5nIGl0IGFzIHdlIGdvLgogICAgdmFyIGNoaWxkVmll
        d3MgPSB0aGlzLl9jaGlsZFZpZXdzLCBjaGlsZFZpZXcsIGlkeCwgbGVuOwoK
        ICAgIGxlbiA9IHRoaXMuX2NoaWxkVmlld3MubGVuZ3RoOwoKICAgIHZhciBy
        ZW1vdmluZ0FsbCA9IHJlbW92ZWRDb3VudCA9PT0gbGVuOwoKICAgIGlmIChy
        ZW1vdmluZ0FsbCkgewogICAgICB0aGlzLmN1cnJlbnRTdGF0ZS5lbXB0eSh0
        aGlzKTsKICAgICAgdGhpcy5pbnZva2VSZWN1cnNpdmVseShmdW5jdGlvbih2
        aWV3KSB7CiAgICAgICAgdmlldy5yZW1vdmVkRnJvbURPTSA9IHRydWU7CiAg
        ICAgIH0sIGZhbHNlKTsKICAgIH0KCiAgICBmb3IgKGlkeCA9IHN0YXJ0ICsg
        cmVtb3ZlZENvdW50IC0gMTsgaWR4ID49IHN0YXJ0OyBpZHgtLSkgewogICAg
        ICBjaGlsZFZpZXcgPSBjaGlsZFZpZXdzW2lkeF07CiAgICAgIGNoaWxkVmll
        dy5kZXN0cm95KCk7CiAgICB9CiAgfSwKCiAgLyoqCiAgICBDYWxsZWQgd2hl
        biBhIG11dGF0aW9uIHRvIHRoZSB1bmRlcmx5aW5nIGNvbnRlbnQgYXJyYXkg
        b2NjdXJzLgoKICAgIFRoaXMgbWV0aG9kIHdpbGwgcmVwbGF5IHRoYXQgbXV0
        YXRpb24gYWdhaW5zdCB0aGUgdmlld3MgdGhhdCBjb21wb3NlIHRoZQogICAg
        YEVtYmVyLkNvbGxlY3Rpb25WaWV3YCwgZW5zdXJpbmcgdGhhdCB0aGUgdmll
        dyByZWZsZWN0cyB0aGUgbW9kZWwuCgogICAgVGhpcyBhcnJheSBvYnNlcnZl
        ciBpcyBhZGRlZCBpbiBgY29udGVudERpZENoYW5nZWAuCgogICAgQG1ldGhv
        ZCBhcnJheURpZENoYW5nZQogICAgQHBhcmFtIHtBcnJheX0gY29udGVudCB0
        aGUgbWFuYWdlZCBjb2xsZWN0aW9uIG9mIG9iamVjdHMKICAgIEBwYXJhbSB7
        TnVtYmVyfSBzdGFydCB0aGUgaW5kZXggYXQgd2hpY2ggdGhlIGNoYW5nZXMg
        b2NjdXJyZWQKICAgIEBwYXJhbSB7TnVtYmVyfSByZW1vdmVkIG51bWJlciBv
        ZiBvYmplY3QgcmVtb3ZlZCBmcm9tIGNvbnRlbnQKICAgIEBwYXJhbSB7TnVt
        YmVyfSBhZGRlZCBudW1iZXIgb2Ygb2JqZWN0IGFkZGVkIHRvIGNvbnRlbnQK
        ICAqLwogIGFycmF5RGlkQ2hhbmdlOiBmdW5jdGlvbihjb250ZW50LCBzdGFy
        dCwgcmVtb3ZlZCwgYWRkZWQpIHsKICAgIHZhciBhZGRlZFZpZXdzID0gW10s
        IHZpZXcsIGl0ZW0sIGlkeCwgbGVuLCBpdGVtVmlld0NsYXNzLAogICAgICBl
        bXB0eVZpZXc7CgogICAgbGVuID0gY29udGVudCA/IGdldChjb250ZW50LCAn
        bGVuZ3RoJykgOiAwOwoKICAgIGlmIChsZW4pIHsKICAgICAgaXRlbVZpZXdD
        bGFzcyA9IGdldCh0aGlzLCAnaXRlbVZpZXdDbGFzcycpOwoKICAgICAgaWYg
        KCdzdHJpbmcnID09PSB0eXBlb2YgaXRlbVZpZXdDbGFzcykgewogICAgICAg
        IGl0ZW1WaWV3Q2xhc3MgPSBnZXQoaXRlbVZpZXdDbGFzcykgfHwgaXRlbVZp
        ZXdDbGFzczsKICAgICAgfQoKICAgICAgRW1iZXIuYXNzZXJ0KGZtdCgiaXRl
        bVZpZXdDbGFzcyBtdXN0IGJlIGEgc3ViY2xhc3Mgb2YgRW1iZXIuVmlldywg
        bm90ICVAIiwKICAgICAgICAgICAgICAgICAgICAgICBbaXRlbVZpZXdDbGFz
        c10pLAogICAgICAgICAgICAgICAgICAgICAgICdzdHJpbmcnID09PSB0eXBl
        b2YgaXRlbVZpZXdDbGFzcyB8fCBFbWJlci5WaWV3LmRldGVjdChpdGVtVmll
        d0NsYXNzKSk7CgogICAgICBmb3IgKGlkeCA9IHN0YXJ0OyBpZHggPCBzdGFy
        dCthZGRlZDsgaWR4KyspIHsKICAgICAgICBpdGVtID0gY29udGVudC5vYmpl
        Y3RBdChpZHgpOwoKICAgICAgICB2aWV3ID0gdGhpcy5jcmVhdGVDaGlsZFZp
        ZXcoaXRlbVZpZXdDbGFzcywgewogICAgICAgICAgY29udGVudDogaXRlbSwK
        ICAgICAgICAgIGNvbnRlbnRJbmRleDogaWR4CiAgICAgICAgfSk7CgogICAg
        ICAgIGFkZGVkVmlld3MucHVzaCh2aWV3KTsKICAgICAgfQogICAgfSBlbHNl
        IHsKICAgICAgZW1wdHlWaWV3ID0gZ2V0KHRoaXMsICdlbXB0eVZpZXcnKTsK
        CiAgICAgIGlmICghZW1wdHlWaWV3KSB7IHJldHVybjsgfQoKICAgICAgaWYg
        KCdzdHJpbmcnID09PSB0eXBlb2YgZW1wdHlWaWV3KSB7CiAgICAgICAgZW1w
        dHlWaWV3ID0gZ2V0KGVtcHR5VmlldykgfHwgZW1wdHlWaWV3OwogICAgICB9
        CgogICAgICBlbXB0eVZpZXcgPSB0aGlzLmNyZWF0ZUNoaWxkVmlldyhlbXB0
        eVZpZXcpOwogICAgICBhZGRlZFZpZXdzLnB1c2goZW1wdHlWaWV3KTsKICAg
        ICAgc2V0KHRoaXMsICdlbXB0eVZpZXcnLCBlbXB0eVZpZXcpOwoKICAgICAg
        aWYgKEVtYmVyLkNvcmVWaWV3LmRldGVjdChlbXB0eVZpZXcpKSB7CiAgICAg
        ICAgdGhpcy5fY3JlYXRlZEVtcHR5VmlldyA9IGVtcHR5VmlldzsKICAgICAg
        fQogICAgfQoKICAgIHRoaXMucmVwbGFjZShzdGFydCwgMCwgYWRkZWRWaWV3
        cyk7CiAgfSwKCiAgLyoqCiAgICBJbnN0YW50aWF0ZXMgYSB2aWV3IHRvIGJl
        IGFkZGVkIHRvIHRoZSBjaGlsZFZpZXdzIGFycmF5IGR1cmluZyB2aWV3CiAg
        ICBpbml0aWFsaXphdGlvbi4gWW91IGdlbmVyYWxseSB3aWxsIG5vdCBjYWxs
        IHRoaXMgbWV0aG9kIGRpcmVjdGx5IHVubGVzcwogICAgeW91IGFyZSBvdmVy
        cmlkaW5nIGBjcmVhdGVDaGlsZFZpZXdzKClgLiBOb3RlIHRoYXQgdGhpcyBt
        ZXRob2Qgd2lsbAogICAgYXV0b21hdGljYWxseSBjb25maWd1cmUgdGhlIGNv
        cnJlY3Qgc2V0dGluZ3Mgb24gdGhlIG5ldyB2aWV3IGluc3RhbmNlIHRvCiAg
        ICBhY3QgYXMgYSBjaGlsZCBvZiB0aGUgcGFyZW50LgoKICAgIFRoZSB0YWcg
        bmFtZSBmb3IgdGhlIHZpZXcgd2lsbCBiZSBzZXQgdG8gdGhlIHRhZ05hbWUg
        b2YgdGhlIHZpZXdDbGFzcwogICAgcGFzc2VkIGluLgoKICAgIEBtZXRob2Qg
        Y3JlYXRlQ2hpbGRWaWV3CiAgICBAcGFyYW0ge0NsYXNzfSB2aWV3Q2xhc3MK
        ICAgIEBwYXJhbSB7SGFzaH0gW2F0dHJzXSBBdHRyaWJ1dGVzIHRvIGFkZAog
        ICAgQHJldHVybiB7RW1iZXIuVmlld30gbmV3IGluc3RhbmNlCiAgKi8KICBj
        cmVhdGVDaGlsZFZpZXc6IGZ1bmN0aW9uKHZpZXcsIGF0dHJzKSB7CiAgICB2
        aWV3ID0gdGhpcy5fc3VwZXIodmlldywgYXR0cnMpOwoKICAgIHZhciBpdGVt
        VGFnTmFtZSA9IGdldCh2aWV3LCAndGFnTmFtZScpOwoKICAgIGlmIChpdGVt
        VGFnTmFtZSA9PT0gbnVsbCB8fCBpdGVtVGFnTmFtZSA9PT0gdW5kZWZpbmVk
        KSB7CiAgICAgIGl0ZW1UYWdOYW1lID0gRW1iZXIuQ29sbGVjdGlvblZpZXcu
        Q09OVEFJTkVSX01BUFtnZXQodGhpcywgJ3RhZ05hbWUnKV07CiAgICAgIHNl
        dCh2aWV3LCAndGFnTmFtZScsIGl0ZW1UYWdOYW1lKTsKICAgIH0KCiAgICBy
        ZXR1cm4gdmlldzsKICB9Cn0pOwoKLyoqCiAgQSBtYXAgb2YgcGFyZW50IHRh
        Z3MgdG8gdGhlaXIgZGVmYXVsdCBjaGlsZCB0YWdzLiBZb3UgY2FuIGFkZAog
        IGFkZGl0aW9uYWwgcGFyZW50IHRhZ3MgaWYgeW91IHdhbnQgY29sbGVjdGlv
        biB2aWV3cyB0aGF0IHVzZQogIGEgcGFydGljdWxhciBwYXJlbnQgdGFnIHRv
        IGRlZmF1bHQgdG8gYSBjaGlsZCB0YWcuCgogIEBwcm9wZXJ0eSBDT05UQUlO
        RVJfTUFQCiAgQHR5cGUgSGFzaAogIEBzdGF0aWMKICBAZmluYWwKKi8KRW1i
        ZXIuQ29sbGVjdGlvblZpZXcuQ09OVEFJTkVSX01BUCA9IHsKICB1bDogJ2xp
        JywKICBvbDogJ2xpJywKICB0YWJsZTogJ3RyJywKICB0aGVhZDogJ3RyJywK
        ICB0Ym9keTogJ3RyJywKICB0Zm9vdDogJ3RyJywKICB0cjogJ3RkJywKICBz
        ZWxlY3Q6ICdvcHRpb24nCn07Cgp9KSgpOwoKCgooZnVuY3Rpb24oKSB7Ci8q
        KgogIFRoZSBDb21wb25lbnRUZW1wbGF0ZURlcHJlY2F0aW9uIG1peGluIGlz
        IHVzZWQgdG8gcHJvdmlkZSBhIHVzZWZ1bAogIGRlcHJlY2F0aW9uIHdhcm5p
        bmcgd2hlbiB1c2luZyBlaXRoZXIgYHRlbXBsYXRlYCBvciBgdGVtcGxhdGVO
        YW1lYCB3aXRoCiAgYSBjb21wb25lbnQuIFRoZSBgdGVtcGxhdGVgIGFuZCBg
        dGVtcGxhdGVOYW1lYCBwcm9wZXJ0aWVzIHNwZWNpZmllZCBhdAogIGV4dGVu
        ZCB0aW1lIGFyZSBtb3ZlZCB0byBgbGF5b3V0YCBhbmQgYGxheW91dE5hbWVg
        IHJlc3BlY3RpdmVseS4KCiAgYEVtYmVyLkNvbXBvbmVudFRlbXBsYXRlRGVw
        cmVjYXRpb25gIGlzIHVzZWQgaW50ZXJuYWxseSBieSBFbWJlciBpbgogIGBF
        bWJlci5Db21wb25lbnRgLgoKICBAY2xhc3MgQ29tcG9uZW50VGVtcGxhdGVE
        ZXByZWNhdGlvbgogIEBuYW1lc3BhY2UgRW1iZXIKKi8KRW1iZXIuQ29tcG9u
        ZW50VGVtcGxhdGVEZXByZWNhdGlvbiA9IEVtYmVyLk1peGluLmNyZWF0ZSh7
        CiAgLyoqCiAgICBAcHJpdmF0ZQoKICAgIE1vdmVzIGB0ZW1wbGF0ZU5hbWVg
        IHRvIGBsYXlvdXROYW1lYCBhbmQgYHRlbXBsYXRlYCB0byBgbGF5b3V0YCBh
        dCBleHRlbmQKICAgIHRpbWUgaWYgYSBsYXlvdXQgaXMgbm90IGFsc28gc3Bl
        Y2lmaWVkLgoKICAgIE5vdGUgdGhhdCB0aGlzIGN1cnJlbnRseSBtb2RpZmll
        cyB0aGUgbWl4aW4gdGhlbXNlbHZlcywgd2hpY2ggaXMgdGVjaG5pY2FsbHkK
        ICAgIGR1YmlvdXMgYnV0IGlzIHByYWN0aWNhbGx5IG9mIGxpdHRsZSBjb25z
        ZXF1ZW5jZS4gVGhpcyBtYXkgY2hhbmdlIGluIHRoZQogICAgZnV0dXJlLgoK
        ICAgIEBtZXRob2Qgd2lsbE1lcmdlTWl4aW4KICAqLwogIHdpbGxNZXJnZU1p
        eGluOiBmdW5jdGlvbihwcm9wcykgewogICAgLy8gbXVzdCBjYWxsIF9zdXBl
        ciBoZXJlIHRvIGVuc3VyZSB0aGF0IHRoZSBBY3Rpb25IYW5kbGVyCiAgICAv
        LyBtaXhpbiBpcyBzZXR1cCBwcm9wZXJseSAobW92ZXMgYWN0aW9ucyAtPiBf
        YWN0aW9ucykKICAgIC8vCiAgICAvLyBDYWxsaW5nIHN1cGVyIGlzIG9ubHkg
        T0sgaGVyZSBzaW5jZSB3ZSBLTk9XIHRoYXQKICAgIC8vIHRoZXJlIGlzIGFu
        b3RoZXIgTWl4aW4gbG9hZGVkIGZpcnN0LgogICAgdGhpcy5fc3VwZXIuYXBw
        bHkodGhpcywgYXJndW1lbnRzKTsKCiAgICB2YXIgZGVwcmVjYXRlZFByb3Bl
        cnR5LCByZXBsYWNlbWVudFByb3BlcnR5LAogICAgICAgIGxheW91dFNwZWNp
        ZmllZCA9IChwcm9wcy5sYXlvdXROYW1lIHx8IHByb3BzLmxheW91dCk7Cgog
        ICAgaWYgKHByb3BzLnRlbXBsYXRlTmFtZSAmJiAhbGF5b3V0U3BlY2lmaWVk
        KSB7CiAgICAgIGRlcHJlY2F0ZWRQcm9wZXJ0eSA9ICd0ZW1wbGF0ZU5hbWUn
        OwogICAgICByZXBsYWNlbWVudFByb3BlcnR5ID0gJ2xheW91dE5hbWUnOwoK
        ICAgICAgcHJvcHMubGF5b3V0TmFtZSA9IHByb3BzLnRlbXBsYXRlTmFtZTsK
        ICAgICAgZGVsZXRlIHByb3BzWyd0ZW1wbGF0ZU5hbWUnXTsKICAgIH0KCiAg
        ICBpZiAocHJvcHMudGVtcGxhdGUgJiYgIWxheW91dFNwZWNpZmllZCkgewog
        ICAgICBkZXByZWNhdGVkUHJvcGVydHkgPSAndGVtcGxhdGUnOwogICAgICBy
        ZXBsYWNlbWVudFByb3BlcnR5ID0gJ2xheW91dCc7CgogICAgICBwcm9wcy5s
        YXlvdXQgPSBwcm9wcy50ZW1wbGF0ZTsKICAgICAgZGVsZXRlIHByb3BzWyd0
        ZW1wbGF0ZSddOwogICAgfQoKICAgIGlmIChkZXByZWNhdGVkUHJvcGVydHkp
        IHsKICAgICAgRW1iZXIuZGVwcmVjYXRlKCdEbyBub3Qgc3BlY2lmeSAnICsg
        ZGVwcmVjYXRlZFByb3BlcnR5ICsgJyBvbiBhIENvbXBvbmVudCwgdXNlICcg
        KyByZXBsYWNlbWVudFByb3BlcnR5ICsgJyBpbnN0ZWFkLicsIGZhbHNlKTsK
        ICAgIH0KICB9Cn0pOwoKCn0pKCk7CgoKCihmdW5jdGlvbigpIHsKdmFyIGdl
        dCA9IEVtYmVyLmdldCwgc2V0ID0gRW1iZXIuc2V0LCBpc05vbmUgPSBFbWJl
        ci5pc05vbmUsCiAgICBhX3NsaWNlID0gQXJyYXkucHJvdG90eXBlLnNsaWNl
        OwoKCi8qKgpAbW9kdWxlIGVtYmVyCkBzdWJtb2R1bGUgZW1iZXItdmlld3MK
        Ki8KCi8qKgogIEFuIGBFbWJlci5Db21wb25lbnRgIGlzIGEgdmlldyB0aGF0
        IGlzIGNvbXBsZXRlbHkKICBpc29sYXRlZC4gUHJvcGVydHkgYWNjZXNzIGlu
        IGl0cyB0ZW1wbGF0ZXMgZ28KICB0byB0aGUgdmlldyBvYmplY3QgYW5kIGFj
        dGlvbnMgYXJlIHRhcmdldGVkIGF0CiAgdGhlIHZpZXcgb2JqZWN0LiBUaGVy
        ZSBpcyBubyBhY2Nlc3MgdG8gdGhlCiAgc3Vycm91bmRpbmcgY29udGV4dCBv
        ciBvdXRlciBjb250cm9sbGVyOyBhbGwKICBjb250ZXh0dWFsIGluZm9ybWF0
        aW9uIG11c3QgYmUgcGFzc2VkIGluLgoKICBUaGUgZWFzaWVzdCB3YXkgdG8g
        Y3JlYXRlIGFuIGBFbWJlci5Db21wb25lbnRgIGlzIHZpYQogIGEgdGVtcGxh
        dGUuIElmIHlvdSBuYW1lIGEgdGVtcGxhdGUKICBgY29tcG9uZW50cy9teS1m
        b29gLCB5b3Ugd2lsbCBiZSBhYmxlIHRvIHVzZQogIGB7e215LWZvb319YCBp
        biBvdGhlciB0ZW1wbGF0ZXMsIHdoaWNoIHdpbGwgbWFrZQogIGFuIGluc3Rh
        bmNlIG9mIHRoZSBpc29sYXRlZCBjb21wb25lbnQuCgogIGBgYGhhbmRsZWJh
        cnMKICB7e2FwcC1wcm9maWxlIHBlcnNvbj1jdXJyZW50VXNlcn19CiAgYGBg
        CgogIGBgYGhhbmRsZWJhcnMKICA8IS0tIGFwcC1wcm9maWxlIHRlbXBsYXRl
        IC0tPgogIDxoMT57e3BlcnNvbi50aXRsZX19PC9oMT4KICA8aW1nIHt7Ymlu
        ZC1hdHRyIHNyYz1wZXJzb24uYXZhdGFyfX0+CiAgPHAgY2xhc3M9J3NpZ25h
        dHVyZSc+e3twZXJzb24uc2lnbmF0dXJlfX08L3A+CiAgYGBgCgogIFlvdSBj
        YW4gdXNlIGB5aWVsZGAgaW5zaWRlIGEgdGVtcGxhdGUgdG8KICBpbmNsdWRl
        IHRoZSAqKmNvbnRlbnRzKiogb2YgYW55IGJsb2NrIGF0dGFjaGVkIHRvCiAg
        dGhlIGNvbXBvbmVudC4gVGhlIGJsb2NrIHdpbGwgYmUgZXhlY3V0ZWQgaW4g
        dGhlCiAgY29udGV4dCBvZiB0aGUgc3Vycm91bmRpbmcgY29udGV4dCBvciBv
        dXRlciBjb250cm9sbGVyOgoKICBgYGBoYW5kbGViYXJzCiAge3sjYXBwLXBy
        b2ZpbGUgcGVyc29uPWN1cnJlbnRVc2VyfX0KICAgIDxwPkFkbWluIG1vZGU8
        L3A+CiAgICB7eyEgRXhlY3V0ZWQgaW4gdGhlIGNvbnRyb2xsZXIncyBjb250
        ZXh0LiB9fQogIHt7L2FwcC1wcm9maWxlfX0KICBgYGAKCiAgYGBgaGFuZGxl
        YmFycwogIDwhLS0gYXBwLXByb2ZpbGUgdGVtcGxhdGUgLS0+CiAgPGgxPnt7
        cGVyc29uLnRpdGxlfX08L2gxPgogIHt7ISBFeGVjdXRlZCBpbiB0aGUgY29t
        cG9uZW50cyBjb250ZXh0LiB9fQogIHt7eWllbGR9fSB7eyEgYmxvY2sgY29u
        dGVudHMgfX0KICBgYGAKCiAgSWYgeW91IHdhbnQgdG8gY3VzdG9taXplIHRo
        ZSBjb21wb25lbnQsIGluIG9yZGVyIHRvCiAgaGFuZGxlIGV2ZW50cyBvciBh
        Y3Rpb25zLCB5b3UgaW1wbGVtZW50IGEgc3ViY2xhc3MKICBvZiBgRW1iZXIu
        Q29tcG9uZW50YCBuYW1lZCBhZnRlciB0aGUgbmFtZSBvZiB0aGUKICBjb21w
        b25lbnQuIE5vdGUgdGhhdCBgQ29tcG9uZW50YCBuZWVkcyB0byBiZSBhcHBl
        bmRlZCB0byB0aGUgbmFtZSBvZgogIHlvdXIgc3ViY2xhc3MgbGlrZSBgQXBw
        UHJvZmlsZUNvbXBvbmVudGAuCgogIEZvciBleGFtcGxlLCB5b3UgY291bGQg
        aW1wbGVtZW50IHRoZSBhY3Rpb24KICBgaGVsbG9gIGZvciB0aGUgYGFwcC1w
        cm9maWxlYCBjb21wb25lbnQ6CgogIGBgYGphdmFzY3JpcHQKICBBcHAuQXBw
        UHJvZmlsZUNvbXBvbmVudCA9IEVtYmVyLkNvbXBvbmVudC5leHRlbmQoewog
        ICAgYWN0aW9uczogewogICAgICBoZWxsbzogZnVuY3Rpb24obmFtZSkgewog
        ICAgICAgIGNvbnNvbGUubG9nKCJIZWxsbyIsIG5hbWUpOwogICAgICB9CiAg
        ICB9CiAgfSk7CiAgYGBgCgogIEFuZCB0aGVuIHVzZSBpdCBpbiB0aGUgY29t
        cG9uZW50J3MgdGVtcGxhdGU6CgogIGBgYGhhbmRsZWJhcnMKICA8IS0tIGFw
        cC1wcm9maWxlIHRlbXBsYXRlIC0tPgoKICA8aDE+e3twZXJzb24udGl0bGV9
        fTwvaDE+CiAge3t5aWVsZH19IDwhLS0gYmxvY2sgY29udGVudHMgLS0+Cgog
        IDxidXR0b24ge3thY3Rpb24gJ2hlbGxvJyBwZXJzb24ubmFtZX19PgogICAg
        U2F5IEhlbGxvIHRvIHt7cGVyc29uLm5hbWV9fQogIDwvYnV0dG9uPgogIGBg
        YAoKICBDb21wb25lbnRzIG11c3QgaGF2ZSBhIGAtYCBpbiB0aGVpciBuYW1l
        IHRvIGF2b2lkCiAgY29uZmxpY3RzIHdpdGggYnVpbHQtaW4gY29udHJvbHMg
        dGhhdCB3cmFwIEhUTUwKICBlbGVtZW50cy4gVGhpcyBpcyBjb25zaXN0ZW50
        IHdpdGggdGhlIHNhbWUKICByZXF1aXJlbWVudCBpbiB3ZWIgY29tcG9uZW50
        cy4KCiAgQGNsYXNzIENvbXBvbmVudAogIEBuYW1lc3BhY2UgRW1iZXIKICBA
        ZXh0ZW5kcyBFbWJlci5WaWV3CiovCkVtYmVyLkNvbXBvbmVudCA9IEVtYmVy
        LlZpZXcuZXh0ZW5kKEVtYmVyLlRhcmdldEFjdGlvblN1cHBvcnQsIEVtYmVy
        LkNvbXBvbmVudFRlbXBsYXRlRGVwcmVjYXRpb24sIHsKICBpbml0OiBmdW5j
        dGlvbigpIHsKICAgIHRoaXMuX3N1cGVyKCk7CiAgICBzZXQodGhpcywgJ2Nv
        bnRleHQnLCB0aGlzKTsKICAgIHNldCh0aGlzLCAnY29udHJvbGxlcicsIHRo
        aXMpOwogIH0sCgogIGRlZmF1bHRMYXlvdXQ6IGZ1bmN0aW9uKGNvbnRleHQs
        IG9wdGlvbnMpewogICAgRW1iZXIuSGFuZGxlYmFycy5oZWxwZXJzWyd5aWVs
        ZCddLmNhbGwoY29udGV4dCwgb3B0aW9ucyk7CiAgfSwKCiAgLyoqCiAgQSBj
        b21wb25lbnRzIHRlbXBsYXRlIHByb3BlcnR5IGlzIHNldCBieSBwYXNzaW5n
        IGEgYmxvY2sKICBkdXJpbmcgaXRzIGludm9jYXRpb24uIEl0IGlzIGV4ZWN1
        dGVkIHdpdGhpbiB0aGUgcGFyZW50IGNvbnRleHQuCgogIEV4YW1wbGU6Cgog
        IGBgYGhhbmRsZWJhcnMKICB7eyNteS1jb21wb25lbnR9fQogICAgLy8gc29t
        ZXRoaW5nIHRoYXQgaXMgcnVuIGluIHRoZSBjb250ZXh0CiAgICAvLyBvZiB0
        aGUgcGFyZW50IGNvbnRleHQKICB7ey9teS1jb21wb25lbnR9fQogIGBgYAoK
        ICBTcGVjaWZ5aW5nIGEgdGVtcGxhdGUgZGlyZWN0bHkgdG8gYSBjb21wb25l
        bnQgaXMgZGVwcmVjYXRlZCB3aXRob3V0CiAgYWxzbyBzcGVjaWZ5aW5nIHRo
        ZSBsYXlvdXQgcHJvcGVydHkuCgogIEBkZXByZWNhdGVkCiAgQHByb3BlcnR5
        IHRlbXBsYXRlCiAgKi8KICB0ZW1wbGF0ZTogRW1iZXIuY29tcHV0ZWQoZnVu
        Y3Rpb24oa2V5LCB2YWx1ZSkgewogICAgaWYgKHZhbHVlICE9PSB1bmRlZmlu
        ZWQpIHsgcmV0dXJuIHZhbHVlOyB9CgogICAgdmFyIHRlbXBsYXRlTmFtZSA9
        IGdldCh0aGlzLCAndGVtcGxhdGVOYW1lJyksCiAgICAgICAgdGVtcGxhdGUg
        PSB0aGlzLnRlbXBsYXRlRm9yTmFtZSh0ZW1wbGF0ZU5hbWUsICd0ZW1wbGF0
        ZScpOwoKICAgIEVtYmVyLmFzc2VydCgiWW91IHNwZWNpZmllZCB0aGUgdGVt
        cGxhdGVOYW1lICIgKyB0ZW1wbGF0ZU5hbWUgKyAiIGZvciAiICsgdGhpcyAr
        ICIsIGJ1dCBpdCBkaWQgbm90IGV4aXN0LiIsICF0ZW1wbGF0ZU5hbWUgfHwg
        dGVtcGxhdGUpOwoKICAgIHJldHVybiB0ZW1wbGF0ZSB8fCBnZXQodGhpcywg
        J2RlZmF1bHRUZW1wbGF0ZScpOwogIH0pLnByb3BlcnR5KCd0ZW1wbGF0ZU5h
        bWUnKSwKCiAgLyoqCiAgU3BlY2lmeWluZyBhIGNvbXBvbmVudHMgYHRlbXBs
        YXRlTmFtZWAgaXMgZGVwcmVjYXRlZCB3aXRob3V0IGFsc28KICBwcm92aWRp
        bmcgdGhlIGBsYXlvdXRgIG9yIGBsYXlvdXROYW1lYCBwcm9wZXJ0aWVzLgoK
        ICBAZGVwcmVjYXRlZAogIEBwcm9wZXJ0eSB0ZW1wbGF0ZU5hbWUKICAqLwog
        IHRlbXBsYXRlTmFtZTogbnVsbCwKCiAgLy8gZHVyaW5nIHJlbmRlciwgaXNv
        bGF0ZSBrZXl3b3JkcwogIGNsb25lS2V5d29yZHM6IGZ1bmN0aW9uKCkgewog
        ICAgcmV0dXJuIHsKICAgICAgdmlldzogdGhpcywKICAgICAgY29udHJvbGxl
        cjogdGhpcwogICAgfTsKICB9LAoKICBfeWllbGQ6IGZ1bmN0aW9uKGNvbnRl
        eHQsIG9wdGlvbnMpIHsKICAgIHZhciB2aWV3ID0gb3B0aW9ucy5kYXRhLnZp
        ZXcsCiAgICAgICAgcGFyZW50VmlldyA9IHRoaXMuX3BhcmVudFZpZXcsCiAg
        ICAgICAgdGVtcGxhdGUgPSBnZXQodGhpcywgJ3RlbXBsYXRlJyk7CgogICAg
        aWYgKHRlbXBsYXRlKSB7CiAgICAgIEVtYmVyLmFzc2VydCgiQSBDb21wb25l
        bnQgbXVzdCBoYXZlIGEgcGFyZW50IHZpZXcgaW4gb3JkZXIgdG8geWllbGQu
        IiwgcGFyZW50Vmlldyk7CgogICAgICB2aWV3LmFwcGVuZENoaWxkKEVtYmVy
        LlZpZXcsIHsKICAgICAgICBpc1ZpcnR1YWw6IHRydWUsCiAgICAgICAgdGFn
        TmFtZTogJycsCiAgICAgICAgX2NvbnRleHRWaWV3OiBwYXJlbnRWaWV3LAog
        ICAgICAgIHRlbXBsYXRlOiB0ZW1wbGF0ZSwKICAgICAgICBjb250ZXh0OiBn
        ZXQocGFyZW50VmlldywgJ2NvbnRleHQnKSwKICAgICAgICBjb250cm9sbGVy
        OiBnZXQocGFyZW50VmlldywgJ2NvbnRyb2xsZXInKSwKICAgICAgICB0ZW1w
        bGF0ZURhdGE6IHsga2V5d29yZHM6IHBhcmVudFZpZXcuY2xvbmVLZXl3b3Jk
        cygpIH0KICAgICAgfSk7CiAgICB9CiAgfSwKCiAgLyoqCiAgICBJZiB0aGUg
        Y29tcG9uZW50IGlzIGN1cnJlbnRseSBpbnNlcnRlZCBpbnRvIHRoZSBET00g
        b2YgYSBwYXJlbnQgdmlldywgdGhpcwogICAgcHJvcGVydHkgd2lsbCBwb2lu
        dCB0byB0aGUgY29udHJvbGxlciBvZiB0aGUgcGFyZW50IHZpZXcuCgogICAg
        QHByb3BlcnR5IHRhcmdldE9iamVjdAogICAgQHR5cGUgRW1iZXIuQ29udHJv
        bGxlcgogICAgQGRlZmF1bHQgbnVsbAogICovCiAgdGFyZ2V0T2JqZWN0OiBF
        bWJlci5jb21wdXRlZChmdW5jdGlvbihrZXkpIHsKICAgIHZhciBwYXJlbnRW
        aWV3ID0gZ2V0KHRoaXMsICdfcGFyZW50VmlldycpOwogICAgcmV0dXJuIHBh
        cmVudFZpZXcgPyBnZXQocGFyZW50VmlldywgJ2NvbnRyb2xsZXInKSA6IG51
        bGw7CiAgfSkucHJvcGVydHkoJ19wYXJlbnRWaWV3JyksCgogIC8qKgogICAg
        VHJpZ2dlcnMgYSBuYW1lZCBhY3Rpb24gb24gdGhlIGNvbnRyb2xsZXIgY29u
        dGV4dCB3aGVyZSB0aGUgY29tcG9uZW50IGlzIHVzZWQgaWYKICAgIHRoaXMg
        Y29udHJvbGxlciBoYXMgcmVnaXN0ZXJlZCBmb3Igbm90aWZpY2F0aW9ucyBv
        ZiB0aGUgYWN0aW9uLgoKICAgIEZvciBleGFtcGxlIGEgY29tcG9uZW50IGZv
        ciBwbGF5aW5nIG9yIHBhdXNpbmcgbXVzaWMgbWF5IHRyYW5zbGF0ZSBjbGlj
        ayBldmVudHMKICAgIGludG8gYWN0aW9uIG5vdGlmaWNhdGlvbnMgb2YgInBs
        YXkiIG9yICJzdG9wIiBkZXBlbmRpbmcgb24gc29tZSBpbnRlcm5hbCBzdGF0
        ZQogICAgb2YgdGhlIGNvbXBvbmVudDoKCgogICAgYGBgamF2YXNjcmlwdAog
        ICAgQXBwLlBsYXlCdXR0b25Db21wb25lbnQgPSBFbWJlci5Db21wb25lbnQu
        ZXh0ZW5kKHsKICAgICAgY2xpY2s6IGZ1bmN0aW9uKCl7CiAgICAgICAgaWYg
        KHRoaXMuZ2V0KCdpc1BsYXlpbmcnKSkgewogICAgICAgICAgdGhpcy5zZW5k
        QWN0aW9uKCdwbGF5Jyk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRo
        aXMuc2VuZEFjdGlvbignc3RvcCcpOwogICAgICAgIH0KICAgICAgfQogICAg
        fSk7CiAgICBgYGAKCiAgICBXaGVuIHVzZWQgaW5zaWRlIGEgdGVtcGxhdGUg
        dGhlc2UgY29tcG9uZW50IGFjdGlvbnMgYXJlIGNvbmZpZ3VyZWQgdG8KICAg
        IHRyaWdnZXIgYWN0aW9ucyBpbiB0aGUgb3V0ZXIgYXBwbGljYXRpb24gY29u
        dGV4dDoKCiAgICBgYGBoYW5kbGViYXJzCiAgICB7eyEgYXBwbGljYXRpb24u
        aGJzIH19CiAgICB7e3BsYXktYnV0dG9uIHBsYXk9Im11c2ljU3RhcnRlZCIg
        c3RvcD0ibXVzaWNTdG9wcGVkIn19CiAgICBgYGAKCiAgICBXaGVuIHRoZSBj
        b21wb25lbnQgcmVjZWl2ZXMgYSBicm93c2VyIGBjbGlja2AgZXZlbnQgaXQg
        dHJhbnNsYXRlIHRoaXMKICAgIGludGVyYWN0aW9uIGludG8gYXBwbGljYXRp
        b24tc3BlY2lmaWMgc2VtYW50aWNzICgicGxheSIgb3IgInN0b3AiKSBhbmQK
        ICAgIHRyaWdnZXJzIHRoZSBzcGVjaWZpZWQgYWN0aW9uIG5hbWUgb24gdGhl
        IGNvbnRyb2xsZXIgZm9yIHRoZSB0ZW1wbGF0ZQogICAgd2hlcmUgdGhlIGNv
        bXBvbmVudCBpcyB1c2VkOiAKCgogICAgYGBgamF2YXNjcmlwdAogICAgQXBw
        LkFwcGxpY2F0aW9uQ29udHJvbGxlciA9IEVtYmVyLkNvbnRyb2xsZXIuZXh0
        ZW5kKHsKICAgICAgYWN0aW9uczogewogICAgICAgIG11c2ljU3RhcnRlZDog
        ZnVuY3Rpb24oKXsKICAgICAgICAgIC8vIGNhbGxlZCB3aGVuIHRoZSBwbGF5
        IGJ1dHRvbiBpcyBjbGlja2VkCiAgICAgICAgICAvLyBhbmQgdGhlIG11c2lj
        IHN0YXJ0ZWQgcGxheWluZwogICAgICAgIH0sCiAgICAgICAgbXVzaWNTdG9w
        cGVkOiBmdW5jdGlvbigpewogICAgICAgICAgLy8gY2FsbGVkIHdoZW4gdGhl
        IHBsYXkgYnV0dG9uIGlzIGNsaWNrZWQKICAgICAgICAgIC8vIGFuZCB0aGUg
        bXVzaWMgc3RvcHBlZCBwbGF5aW5nCiAgICAgICAgfQogICAgICB9CiAgICB9
        KTsKICAgIGBgYAoKICAgIElmIG5vIGFjdGlvbiBuYW1lIGlzIHBhc3NlZCB0
        byBgc2VuZEFjdGlvbmAgYSBkZWZhdWx0IG5hbWUgb2YgImFjdGlvbiIKICAg
        IGlzIGFzc3VtZWQuCgogICAgYGBgamF2YXNjcmlwdAogICAgQXBwLk5leHRC
        dXR0b25Db21wb25lbnQgPSBFbWJlci5Db21wb25lbnQuZXh0ZW5kKHsKICAg
        ICAgY2xpY2s6IGZ1bmN0aW9uKCl7CiAgICAgICAgdGhpcy5zZW5kQWN0aW9u
        KCk7CiAgICAgIH0KICAgIH0pOwogICAgYGBgCgogICAgYGBgaGFuZGxlYmFy
        cwogICAge3shIGFwcGxpY2F0aW9uLmhicyB9fQogICAge3tuZXh0LWJ1dHRv
        biBhY3Rpb249InBsYXlOZXh0U29uZ0luQWxidW0ifX0KICAgIGBgYAoKICAg
        IGBgYGphdmFzY3JpcHQKICAgIEFwcC5BcHBsaWNhdGlvbkNvbnRyb2xsZXIg
        PSBFbWJlci5Db250cm9sbGVyLmV4dGVuZCh7CiAgICAgIGFjdGlvbnM6IHsK
        ICAgICAgICBwbGF5TmV4dFNvbmdJbkFsYnVtOiBmdW5jdGlvbigpewogICAg
        ICAgICAgLi4uCiAgICAgICAgfQogICAgICB9CiAgICB9KTsKICAgIGBgYAoK
        ICAgIEBtZXRob2Qgc2VuZEFjdGlvbgogICAgQHBhcmFtIFthY3Rpb25dIHtT
        dHJpbmd9IHRoZSBhY3Rpb24gdG8gdHJpZ2dlcgogICAgQHBhcmFtIFtjb250
        ZXh0XSB7Kn0gYSBjb250ZXh0IHRvIHNlbmQgd2l0aCB0aGUgYWN0aW9uCiAg
        Ki8KICBzZW5kQWN0aW9uOiBmdW5jdGlvbihhY3Rpb24pIHsKICAgIHZhciBh
        Y3Rpb25OYW1lLAogICAgICAgIGNvbnRleHRzID0gYV9zbGljZS5jYWxsKGFy
        Z3VtZW50cywgMSk7CgogICAgLy8gU2VuZCB0aGUgZGVmYXVsdCBhY3Rpb24K
        ICAgIGlmIChhY3Rpb24gPT09IHVuZGVmaW5lZCkgewogICAgICBhY3Rpb25O
        YW1lID0gZ2V0KHRoaXMsICdhY3Rpb24nKTsKICAgICAgRW1iZXIuYXNzZXJ0
        KCJUaGUgZGVmYXVsdCBhY3Rpb24gd2FzIHRyaWdnZXJlZCBvbiB0aGUgY29t
        cG9uZW50ICIgKyB0aGlzLnRvU3RyaW5nKCkgKwogICAgICAgICAgICAgICAg
        ICAgIiwgYnV0IHRoZSBhY3Rpb24gbmFtZSAoIiArIGFjdGlvbk5hbWUgKyAi
        KSB3YXMgbm90IGEgc3RyaW5nLiIsCiAgICAgICAgICAgICAgICAgICBpc05v
        bmUoYWN0aW9uTmFtZSkgfHwgdHlwZW9mIGFjdGlvbk5hbWUgPT09ICdzdHJp
        bmcnKTsKICAgIH0gZWxzZSB7CiAgICAgIGFjdGlvbk5hbWUgPSBnZXQodGhp
        cywgYWN0aW9uKTsKICAgICAgRW1iZXIuYXNzZXJ0KCJUaGUgIiArIGFjdGlv
        biArICIgYWN0aW9uIHdhcyB0cmlnZ2VyZWQgb24gdGhlIGNvbXBvbmVudCAi
        ICsKICAgICAgICAgICAgICAgICAgIHRoaXMudG9TdHJpbmcoKSArICIsIGJ1
        dCB0aGUgYWN0aW9uIG5hbWUgKCIgKyBhY3Rpb25OYW1lICsKICAgICAgICAg
        ICAgICAgICAgICIpIHdhcyBub3QgYSBzdHJpbmcuIiwKICAgICAgICAgICAg
        ICAgICAgIGlzTm9uZShhY3Rpb25OYW1lKSB8fCB0eXBlb2YgYWN0aW9uTmFt
        ZSA9PT0gJ3N0cmluZycpOwogICAgfQoKICAgIC8vIElmIG5vIGFjdGlvbiBu
        YW1lIGZvciB0aGF0IGFjdGlvbiBjb3VsZCBiZSBmb3VuZCwganVzdCBhYm9y
        dC4KICAgIGlmIChhY3Rpb25OYW1lID09PSB1bmRlZmluZWQpIHsgcmV0dXJu
        OyB9CgogICAgdGhpcy50cmlnZ2VyQWN0aW9uKHsKICAgICAgYWN0aW9uOiBh
        Y3Rpb25OYW1lLAogICAgICBhY3Rpb25Db250ZXh0OiBjb250ZXh0cwogICAg
        fSk7CiAgfQp9KTsKCn0pKCk7CgoKCihmdW5jdGlvbigpIHsKCn0pKCk7CgoK
        CihmdW5jdGlvbigpIHsKLyoqCmBFbWJlci5WaWV3VGFyZ2V0QWN0aW9uU3Vw
        cG9ydGAgaXMgYSBtaXhpbiB0aGF0IGNhbiBiZSBpbmNsdWRlZCBpbiBhCnZp
        ZXcgY2xhc3MgdG8gYWRkIGEgYHRyaWdnZXJBY3Rpb25gIG1ldGhvZCB3aXRo
        IHNlbWFudGljcyBzaW1pbGFyIHRvCnRoZSBIYW5kbGViYXJzIGB7e2FjdGlv
        bn19YCBoZWxwZXIuIEl0IHByb3ZpZGVzIGludGVsbGlnZW50IGRlZmF1bHRz
        CmZvciB0aGUgYWN0aW9uJ3MgdGFyZ2V0OiB0aGUgdmlldydzIGNvbnRyb2xs
        ZXI7IGFuZCB0aGUgY29udGV4dCB0aGF0IGlzCnNlbnQgd2l0aCB0aGUgYWN0
        aW9uOiB0aGUgdmlldydzIGNvbnRleHQuCgpOb3RlOiBJbiBub3JtYWwgRW1i
        ZXIgdXNhZ2UsIHRoZSBge3thY3Rpb259fWAgaGVscGVyIGlzIHVzdWFsbHkg
        dGhlIGJlc3QKY2hvaWNlLiBUaGlzIG1peGluIGlzIG1vc3Qgb2Z0ZW4gdXNl
        ZnVsIHdoZW4geW91IGFyZSBkb2luZyBtb3JlIGNvbXBsZXgKZXZlbnQgaGFu
        ZGxpbmcgaW4gY3VzdG9tIFZpZXcgc3ViY2xhc3Nlcy4KCkZvciBleGFtcGxl
        OgoKYGBgamF2YXNjcmlwdApBcHAuU2F2ZUJ1dHRvblZpZXcgPSBFbWJlci5W
        aWV3LmV4dGVuZChFbWJlci5WaWV3VGFyZ2V0QWN0aW9uU3VwcG9ydCwgewog
        IGFjdGlvbjogJ3NhdmUnLAogIGNsaWNrOiBmdW5jdGlvbigpIHsKICAgIHRo
        aXMudHJpZ2dlckFjdGlvbigpOyAvLyBTZW5kcyB0aGUgYHNhdmVgIGFjdGlv
        biwgYWxvbmcgd2l0aCB0aGUgY3VycmVudCBjb250ZXh0CiAgICAgICAgICAg
        ICAgICAgICAgICAgICAgLy8gdG8gdGhlIGN1cnJlbnQgY29udHJvbGxlcgog
        IH0KfSk7CmBgYAoKVGhlIGBhY3Rpb25gIGNhbiBiZSBwcm92aWRlZCBhcyBw
        cm9wZXJ0aWVzIG9mIGFuIG9wdGlvbmFsIG9iamVjdCBhcmd1bWVudAp0byBg
        dHJpZ2dlckFjdGlvbmAgYXMgd2VsbC4KCmBgYGphdmFzY3JpcHQKQXBwLlNh
        dmVCdXR0b25WaWV3ID0gRW1iZXIuVmlldy5leHRlbmQoRW1iZXIuVmlld1Rh
        cmdldEFjdGlvblN1cHBvcnQsIHsKICBjbGljazogZnVuY3Rpb24oKSB7CiAg
        ICB0aGlzLnRyaWdnZXJBY3Rpb24oewogICAgICBhY3Rpb246ICdzYXZlJwog
        ICAgfSk7IC8vIFNlbmRzIHRoZSBgc2F2ZWAgYWN0aW9uLCBhbG9uZyB3aXRo
        IHRoZSBjdXJyZW50IGNvbnRleHQKICAgICAgICAvLyB0byB0aGUgY3VycmVu
        dCBjb250cm9sbGVyCiAgfQp9KTsKYGBgCgpAY2xhc3MgVmlld1RhcmdldEFj
        dGlvblN1cHBvcnQKQG5hbWVzcGFjZSBFbWJlcgpAZXh0ZW5kcyBFbWJlci5U
        YXJnZXRBY3Rpb25TdXBwb3J0CiovCkVtYmVyLlZpZXdUYXJnZXRBY3Rpb25T
        dXBwb3J0ID0gRW1iZXIuTWl4aW4uY3JlYXRlKEVtYmVyLlRhcmdldEFjdGlv
        blN1cHBvcnQsIHsKICAvKioKICBAcHJvcGVydHkgdGFyZ2V0CiAgKi8KICB0
        YXJnZXQ6IEVtYmVyLmNvbXB1dGVkLmFsaWFzKCdjb250cm9sbGVyJyksCiAg
        LyoqCiAgQHByb3BlcnR5IGFjdGlvbkNvbnRleHQKICAqLwogIGFjdGlvbkNv
        bnRleHQ6IEVtYmVyLmNvbXB1dGVkLmFsaWFzKCdjb250ZXh0JykKfSk7Cgp9
        KSgpOwoKCgooZnVuY3Rpb24oKSB7Cgp9KSgpOwoKCgooZnVuY3Rpb24oKSB7
        Ci8qKgpFbWJlciBWaWV3cwoKQG1vZHVsZSBlbWJlcgpAc3VibW9kdWxlIGVt
        YmVyLXZpZXdzCkByZXF1aXJlcyBlbWJlci1ydW50aW1lCkBtYWluIGVtYmVy
        LXZpZXdzCiovCgp9KSgpOwoKKGZ1bmN0aW9uKCkgewpkZWZpbmUoIm1ldGFt
        b3JwaCIsCiAgW10sCiAgZnVuY3Rpb24oKSB7CiAgICAidXNlIHN0cmljdCI7
        CiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
        PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogICAgLy8g
        UHJvamVjdDogICBtZXRhbW9ycGgKICAgIC8vIENvcHlyaWdodDogwqkyMDE0
        IFRpbGRlLCBJbmMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuCiAgICAvLyA9PT09
        PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
        PT09PT09PT09PT09PT09PT09PT09PT09PQoKICAgIHZhciBLID0gZnVuY3Rp
        b24oKSB7fSwKICAgICAgICBndWlkID0gMCwKICAgICAgICBkaXNhYmxlUmFu
        Z2UgPSAoZnVuY3Rpb24oKXsKICAgICAgICAgIGlmICgndW5kZWZpbmVkJyAh
        PT0gdHlwZW9mIE1ldGFtb3JwaEVOVikgewogICAgICAgICAgICByZXR1cm4g
        TWV0YW1vcnBoRU5WLkRJU0FCTEVfUkFOR0VfQVBJOwogICAgICAgICAgfSBl
        bHNlIGlmICgndW5kZWZpbmVkJyAhPT0gRU5WKSB7CiAgICAgICAgICAgIHJl
        dHVybiBFTlYuRElTQUJMRV9SQU5HRV9BUEk7CiAgICAgICAgICB9IGVsc2Ug
        ewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICB9CiAgICAg
        ICAgfSkoKSwKCiAgICAgICAgLy8gRmVhdHVyZS1kZXRlY3QgdGhlIFczQyBy
        YW5nZSBBUEksIHRoZSBleHRlbmRlZCBjaGVjayBpcyBmb3IgSUU5IHdoaWNo
        IG9ubHkgcGFydGlhbGx5IHN1cHBvcnRzIHJhbmdlcwogICAgICAgIHN1cHBv
        cnRzUmFuZ2UgPSAoIWRpc2FibGVSYW5nZSkgJiYgdHlwZW9mIGRvY3VtZW50
        ICE9PSAndW5kZWZpbmVkJyAmJiAoJ2NyZWF0ZVJhbmdlJyBpbiBkb2N1bWVu
        dCkgJiYgKHR5cGVvZiBSYW5nZSAhPT0gJ3VuZGVmaW5lZCcpICYmIFJhbmdl
        LnByb3RvdHlwZS5jcmVhdGVDb250ZXh0dWFsRnJhZ21lbnQsCgogICAgICAg
        IC8vIEludGVybmV0IEV4cGxvcmVyIHByaW9yIHRvIDkgZG9lcyBub3QgYWxs
        b3cgc2V0dGluZyBpbm5lckhUTUwgaWYgdGhlIGZpcnN0IGVsZW1lbnQKICAg
        ICAgICAvLyBpcyBhICJ6ZXJvLXNjb3BlIiBlbGVtZW50LiBUaGlzIHByb2Js
        ZW0gY2FuIGJlIHdvcmtlZCBhcm91bmQgYnkgbWFraW5nCiAgICAgICAgLy8g
        dGhlIGZpcnN0IG5vZGUgYW4gaW52aXNpYmxlIHRleHQgbm9kZS4gV2UsIGxp
        a2UgTW9kZXJuaXpyLCB1c2UgJnNoeTsKICAgICAgICBuZWVkc1NoeSA9IHR5
        cGVvZiBkb2N1bWVudCAhPT0gJ3VuZGVmaW5lZCcgJiYgKGZ1bmN0aW9uKCkg
        ewogICAgICAgICAgdmFyIHRlc3RFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1l
        bnQoJ2RpdicpOwogICAgICAgICAgdGVzdEVsLmlubmVySFRNTCA9ICI8ZGl2
        PjwvZGl2PiI7CiAgICAgICAgICB0ZXN0RWwuZmlyc3RDaGlsZC5pbm5lckhU
        TUwgPSAiPHNjcmlwdD48L3NjcmlwdD4iOwogICAgICAgICAgcmV0dXJuIHRl
        c3RFbC5maXJzdENoaWxkLmlubmVySFRNTCA9PT0gJyc7CiAgICAgICAgfSko
        KSwKCgogICAgICAgIC8vIElFIDggKGFuZCBsaWtlbHkgZWFybGllcikgbGlr
        ZXMgdG8gbW92ZSB3aGl0ZXNwYWNlIHByZWNlZWRpbmcKICAgICAgICAvLyBh
        IHNjcmlwdCB0YWcgdG8gYXBwZWFyIGFmdGVyIGl0LiBUaGlzIG1lYW5zIHRo
        YXQgd2UgY2FuCiAgICAgICAgLy8gYWNjaWRlbnRhbGx5IHJlbW92ZSB3aGl0
        ZXNwYWNlIHdoZW4gdXBkYXRpbmcgYSBtb3JwaC4KICAgICAgICBtb3Zlc1do
        aXRlc3BhY2UgPSBkb2N1bWVudCAmJiAoZnVuY3Rpb24oKSB7CiAgICAgICAg
        ICB2YXIgdGVzdEVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7
        CiAgICAgICAgICB0ZXN0RWwuaW5uZXJIVE1MID0gIlRlc3Q6IDxzY3JpcHQg
        dHlwZT0ndGV4dC94LXBsYWNlaG9sZGVyJz48L3NjcmlwdD5WYWx1ZSI7CiAg
        ICAgICAgICByZXR1cm4gdGVzdEVsLmNoaWxkTm9kZXNbMF0ubm9kZVZhbHVl
        ID09PSAnVGVzdDonICYmCiAgICAgICAgICAgICAgICAgIHRlc3RFbC5jaGls
        ZE5vZGVzWzJdLm5vZGVWYWx1ZSA9PT0gJyBWYWx1ZSc7CiAgICAgICAgfSko
        KTsKCiAgICAvLyBDb25zdHJ1Y3RvciB0aGF0IHN1cHBvcnRzIGVpdGhlciBN
        ZXRhbW9ycGgoJ2ZvbycpIG9yIG5ldwogICAgLy8gTWV0YW1vcnBoKCdmb28n
        KTsKICAgIC8vCiAgICAvLyBUYWtlcyBhIHN0cmluZyBvZiBIVE1MIGFzIHRo
        ZSBhcmd1bWVudC4KCiAgICB2YXIgTWV0YW1vcnBoID0gZnVuY3Rpb24oaHRt
        bCkgewogICAgICB2YXIgc2VsZjsKCiAgICAgIGlmICh0aGlzIGluc3RhbmNl
        b2YgTWV0YW1vcnBoKSB7CiAgICAgICAgc2VsZiA9IHRoaXM7CiAgICAgIH0g
        ZWxzZSB7CiAgICAgICAgc2VsZiA9IG5ldyBLKCk7CiAgICAgIH0KCiAgICAg
        IHNlbGYuaW5uZXJIVE1MID0gaHRtbDsKICAgICAgdmFyIG15R3VpZCA9ICdt
        ZXRhbW9ycGgtJysoZ3VpZCsrKTsKICAgICAgc2VsZi5zdGFydCA9IG15R3Vp
        ZCArICctc3RhcnQnOwogICAgICBzZWxmLmVuZCA9IG15R3VpZCArICctZW5k
        JzsKCiAgICAgIHJldHVybiBzZWxmOwogICAgfTsKCiAgICBLLnByb3RvdHlw
        ZSA9IE1ldGFtb3JwaC5wcm90b3R5cGU7CgogICAgdmFyIHJhbmdlRm9yLCBo
        dG1sRnVuYywgcmVtb3ZlRnVuYywgb3V0ZXJIVE1MRnVuYywgYXBwZW5kVG9G
        dW5jLCBhZnRlckZ1bmMsIHByZXBlbmRGdW5jLCBzdGFydFRhZ0Z1bmMsIGVu
        ZFRhZ0Z1bmM7CgogICAgb3V0ZXJIVE1MRnVuYyA9IGZ1bmN0aW9uKCkgewog
        ICAgICByZXR1cm4gdGhpcy5zdGFydFRhZygpICsgdGhpcy5pbm5lckhUTUwg
        KyB0aGlzLmVuZFRhZygpOwogICAgfTsKCiAgICBzdGFydFRhZ0Z1bmMgPSBm
        dW5jdGlvbigpIHsKICAgICAgLyoKICAgICAgICogV2UgcmVwbGFjZSBjaGV2
        cm9uIGJ5IGl0cyBoZXggY29kZSBpbiBvcmRlciB0byBwcmV2ZW50IGVzY2Fw
        aW5nIHByb2JsZW1zLgogICAgICAgKiBDaGVjayB0aGlzIHRocmVhZCBmb3Ig
        bW9yZSBleHBsYWluYXRpb246CiAgICAgICAqIGh0dHA6Ly9zdGFja292ZXJm
        bG93LmNvbS9xdWVzdGlvbnMvODIzMTA0OC93aHktdXNlLXgzYy1pbnN0ZWFk
        LW9mLXdoZW4tZ2VuZXJhdGluZy1odG1sLWZyb20tamF2YXNjcmlwdAogICAg
        ICAgKi8KICAgICAgcmV0dXJuICI8c2NyaXB0IGlkPSciICsgdGhpcy5zdGFy
        dCArICInIHR5cGU9J3RleHQveC1wbGFjZWhvbGRlcic+XHgzQy9zY3JpcHQ+
        IjsKICAgIH07CgogICAgZW5kVGFnRnVuYyA9IGZ1bmN0aW9uKCkgewogICAg
        ICAvKgogICAgICAgKiBXZSByZXBsYWNlIGNoZXZyb24gYnkgaXRzIGhleCBj
        b2RlIGluIG9yZGVyIHRvIHByZXZlbnQgZXNjYXBpbmcgcHJvYmxlbXMuCiAg
        ICAgICAqIENoZWNrIHRoaXMgdGhyZWFkIGZvciBtb3JlIGV4cGxhaW5hdGlv
        bjoKICAgICAgICogaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9u
        cy84MjMxMDQ4L3doeS11c2UteDNjLWluc3RlYWQtb2Ytd2hlbi1nZW5lcmF0
        aW5nLWh0bWwtZnJvbS1qYXZhc2NyaXB0CiAgICAgICAqLwogICAgICByZXR1
        cm4gIjxzY3JpcHQgaWQ9JyIgKyB0aGlzLmVuZCArICInIHR5cGU9J3RleHQv
        eC1wbGFjZWhvbGRlcic+XHgzQy9zY3JpcHQ+IjsKICAgIH07CgogICAgLy8g
        SWYgd2UgaGF2ZSB0aGUgVzNDIHJhbmdlIEFQSSwgdGhpcyBwcm9jZXNzIGlz
        IHJlbGF0aXZlbHkgc3RyYWlnaHQgZm9yd2FyZC4KICAgIGlmIChzdXBwb3J0
        c1JhbmdlKSB7CgogICAgICAvLyBHZXQgYSByYW5nZSBmb3IgdGhlIGN1cnJl
        bnQgbW9ycGguIE9wdGlvbmFsbHkgaW5jbHVkZSB0aGUgc3RhcnRpbmcgYW5k
        CiAgICAgIC8vIGVuZGluZyBwbGFjZWhvbGRlcnMuCiAgICAgIHJhbmdlRm9y
        ID0gZnVuY3Rpb24obW9ycGgsIG91dGVyVG9vKSB7CiAgICAgICAgdmFyIHJh
        bmdlID0gZG9jdW1lbnQuY3JlYXRlUmFuZ2UoKTsKICAgICAgICB2YXIgYmVm
        b3JlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQobW9ycGguc3RhcnQpOwog
        ICAgICAgIHZhciBhZnRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKG1v
        cnBoLmVuZCk7CgogICAgICAgIGlmIChvdXRlclRvbykgewogICAgICAgICAg
        cmFuZ2Uuc2V0U3RhcnRCZWZvcmUoYmVmb3JlKTsKICAgICAgICAgIHJhbmdl
        LnNldEVuZEFmdGVyKGFmdGVyKTsKICAgICAgICB9IGVsc2UgewogICAgICAg
        ICAgcmFuZ2Uuc2V0U3RhcnRBZnRlcihiZWZvcmUpOwogICAgICAgICAgcmFu
        Z2Uuc2V0RW5kQmVmb3JlKGFmdGVyKTsKICAgICAgICB9CgogICAgICAgIHJl
        dHVybiByYW5nZTsKICAgICAgfTsKCiAgICAgIGh0bWxGdW5jID0gZnVuY3Rp
        b24oaHRtbCwgb3V0ZXJUb28pIHsKICAgICAgICAvLyBnZXQgYSByYW5nZSBm
        b3IgdGhlIGN1cnJlbnQgbWV0YW1vcnBoIG9iamVjdAogICAgICAgIHZhciBy
        YW5nZSA9IHJhbmdlRm9yKHRoaXMsIG91dGVyVG9vKTsKCiAgICAgICAgLy8g
        ZGVsZXRlIHRoZSBjb250ZW50cyBvZiB0aGUgcmFuZ2UsIHdoaWNoIHdpbGwg
        YmUgdGhlCiAgICAgICAgLy8gbm9kZXMgYmV0d2VlbiB0aGUgc3RhcnRpbmcg
        YW5kIGVuZGluZyBwbGFjZWhvbGRlci4KICAgICAgICByYW5nZS5kZWxldGVD
        b250ZW50cygpOwoKICAgICAgICAvLyBjcmVhdGUgYSBuZXcgZG9jdW1lbnQg
        ZnJhZ21lbnQgZm9yIHRoZSBIVE1MCiAgICAgICAgdmFyIGZyYWdtZW50ID0g
        cmFuZ2UuY3JlYXRlQ29udGV4dHVhbEZyYWdtZW50KGh0bWwpOwoKICAgICAg
        ICAvLyBpbnNlcnQgdGhlIGZyYWdtZW50IGludG8gdGhlIHJhbmdlCiAgICAg
        ICAgcmFuZ2UuaW5zZXJ0Tm9kZShmcmFnbWVudCk7CiAgICAgIH07CgogICAg
        ICAvKioKICAgICAgKiBAcHVibGljCiAgICAgICoKICAgICAgKiBSZW1vdmUg
        dGhpcyBvYmplY3QgKGluY2x1ZGluZyBzdGFydGluZyBhbmQgZW5kaW5nCiAg
        ICAgICogcGxhY2Vob2xkZXJzKS4KICAgICAgKgogICAgICAqIEBtZXRob2Qg
        cmVtb3ZlCiAgICAgICovCiAgICAgIHJlbW92ZUZ1bmMgPSBmdW5jdGlvbigp
        IHsKICAgICAgICAvLyBnZXQgYSByYW5nZSBmb3IgdGhlIGN1cnJlbnQgbWV0
        YW1vcnBoIG9iamVjdCBpbmNsdWRpbmcKICAgICAgICAvLyB0aGUgc3RhcnRp
        bmcgYW5kIGVuZGluZyBwbGFjZWhvbGRlcnMuCiAgICAgICAgdmFyIHJhbmdl
        ID0gcmFuZ2VGb3IodGhpcywgdHJ1ZSk7CgogICAgICAgIC8vIGRlbGV0ZSB0
        aGUgZW50aXJlIHJhbmdlLgogICAgICAgIHJhbmdlLmRlbGV0ZUNvbnRlbnRz
        KCk7CiAgICAgIH07CgogICAgICBhcHBlbmRUb0Z1bmMgPSBmdW5jdGlvbihu
        b2RlKSB7CiAgICAgICAgdmFyIHJhbmdlID0gZG9jdW1lbnQuY3JlYXRlUmFu
        Z2UoKTsKICAgICAgICByYW5nZS5zZXRTdGFydChub2RlKTsKICAgICAgICBy
        YW5nZS5jb2xsYXBzZShmYWxzZSk7CiAgICAgICAgdmFyIGZyYWcgPSByYW5n
        ZS5jcmVhdGVDb250ZXh0dWFsRnJhZ21lbnQodGhpcy5vdXRlckhUTUwoKSk7
        CiAgICAgICAgbm9kZS5hcHBlbmRDaGlsZChmcmFnKTsKICAgICAgfTsKCiAg
        ICAgIGFmdGVyRnVuYyA9IGZ1bmN0aW9uKGh0bWwpIHsKICAgICAgICB2YXIg
        cmFuZ2UgPSBkb2N1bWVudC5jcmVhdGVSYW5nZSgpOwogICAgICAgIHZhciBh
        ZnRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuZW5kKTsKCiAg
        ICAgICAgcmFuZ2Uuc2V0U3RhcnRBZnRlcihhZnRlcik7CiAgICAgICAgcmFu
        Z2Uuc2V0RW5kQWZ0ZXIoYWZ0ZXIpOwoKICAgICAgICB2YXIgZnJhZ21lbnQg
        PSByYW5nZS5jcmVhdGVDb250ZXh0dWFsRnJhZ21lbnQoaHRtbCk7CiAgICAg
        ICAgcmFuZ2UuaW5zZXJ0Tm9kZShmcmFnbWVudCk7CiAgICAgIH07CgogICAg
        ICBwcmVwZW5kRnVuYyA9IGZ1bmN0aW9uKGh0bWwpIHsKICAgICAgICB2YXIg
        cmFuZ2UgPSBkb2N1bWVudC5jcmVhdGVSYW5nZSgpOwogICAgICAgIHZhciBz
        dGFydCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuc3RhcnQpOwoK
        ICAgICAgICByYW5nZS5zZXRTdGFydEFmdGVyKHN0YXJ0KTsKICAgICAgICBy
        YW5nZS5zZXRFbmRBZnRlcihzdGFydCk7CgogICAgICAgIHZhciBmcmFnbWVu
        dCA9IHJhbmdlLmNyZWF0ZUNvbnRleHR1YWxGcmFnbWVudChodG1sKTsKICAg
        ICAgICByYW5nZS5pbnNlcnROb2RlKGZyYWdtZW50KTsKICAgICAgfTsKCiAg
        ICB9IGVsc2UgewogICAgICAvKgogICAgICAgKiBUaGlzIGNvZGUgaXMgbW9z
        dGx5IHRha2VuIGZyb20galF1ZXJ5LCB3aXRoIG9uZSBleGNlcHRpb24uIElu
        IGpRdWVyeSdzIGNhc2UsIHdlCiAgICAgICAqIGhhdmUgc29tZSBIVE1MIGFu
        ZCB3ZSBuZWVkIHRvIGZpZ3VyZSBvdXQgaG93IHRvIGNvbnZlcnQgaXQgaW50
        byBzb21lIG5vZGVzLgogICAgICAgKgogICAgICAgKiBJbiB0aGlzIGNhc2Us
        IGpRdWVyeSBuZWVkcyB0byBzY2FuIHRoZSBIVE1MIGxvb2tpbmcgZm9yIGFu
        IG9wZW5pbmcgdGFnIGFuZCB1c2UKICAgICAgICogdGhhdCBhcyB0aGUga2V5
        IGZvciB0aGUgd3JhcCBtYXAuIEluIG91ciBjYXNlLCB3ZSBrbm93IHRoZSBw
        YXJlbnQgbm9kZSwgYW5kCiAgICAgICAqIGNhbiB1c2UgaXRzIHR5cGUgYXMg
        dGhlIGtleSBmb3IgdGhlIHdyYXAgbWFwLgogICAgICAgKiovCiAgICAgIHZh
        ciB3cmFwTWFwID0gewogICAgICAgIHNlbGVjdDogWyAxLCAiPHNlbGVjdCBt
        dWx0aXBsZT0nbXVsdGlwbGUnPiIsICI8L3NlbGVjdD4iIF0sCiAgICAgICAg
        ZmllbGRzZXQ6IFsgMSwgIjxmaWVsZHNldD4iLCAiPC9maWVsZHNldD4iIF0s
        CiAgICAgICAgdGFibGU6IFsgMSwgIjx0YWJsZT4iLCAiPC90YWJsZT4iIF0s
        CiAgICAgICAgdGJvZHk6IFsgMiwgIjx0YWJsZT48dGJvZHk+IiwgIjwvdGJv
        ZHk+PC90YWJsZT4iIF0sCiAgICAgICAgdHI6IFsgMywgIjx0YWJsZT48dGJv
        ZHk+PHRyPiIsICI8L3RyPjwvdGJvZHk+PC90YWJsZT4iIF0sCiAgICAgICAg
        Y29sZ3JvdXA6IFsgMiwgIjx0YWJsZT48dGJvZHk+PC90Ym9keT48Y29sZ3Jv
        dXA+IiwgIjwvY29sZ3JvdXA+PC90YWJsZT4iIF0sCiAgICAgICAgbWFwOiBb
        IDEsICI8bWFwPiIsICI8L21hcD4iIF0sCiAgICAgICAgX2RlZmF1bHQ6IFsg
        MCwgIiIsICIiIF0KICAgICAgfTsKCiAgICAgIHZhciBmaW5kQ2hpbGRCeUlk
        ID0gZnVuY3Rpb24oZWxlbWVudCwgaWQpIHsKICAgICAgICBpZiAoZWxlbWVu
        dC5nZXRBdHRyaWJ1dGUoJ2lkJykgPT09IGlkKSB7IHJldHVybiBlbGVtZW50
        OyB9CgogICAgICAgIHZhciBsZW4gPSBlbGVtZW50LmNoaWxkTm9kZXMubGVu
        Z3RoLCBpZHgsIG5vZGUsIGZvdW5kOwogICAgICAgIGZvciAoaWR4PTA7IGlk
        eDxsZW47IGlkeCsrKSB7CiAgICAgICAgICBub2RlID0gZWxlbWVudC5jaGls
        ZE5vZGVzW2lkeF07CiAgICAgICAgICBmb3VuZCA9IG5vZGUubm9kZVR5cGUg
        PT09IDEgJiYgZmluZENoaWxkQnlJZChub2RlLCBpZCk7CiAgICAgICAgICBp
        ZiAoZm91bmQpIHsgcmV0dXJuIGZvdW5kOyB9CiAgICAgICAgfQogICAgICB9
        OwoKICAgICAgdmFyIHNldElubmVySFRNTCA9IGZ1bmN0aW9uKGVsZW1lbnQs
        IGh0bWwpIHsKICAgICAgICB2YXIgbWF0Y2hlcyA9IFtdOwogICAgICAgIGlm
        IChtb3Zlc1doaXRlc3BhY2UpIHsKICAgICAgICAgIC8vIFJpZ2h0IG5vdyB3
        ZSBvbmx5IGNoZWNrIGZvciBzY3JpcHQgdGFncyB3aXRoIGlkcyB3aXRoIHRo
        ZQogICAgICAgICAgLy8gZ29hbCBvZiB0YXJnZXRpbmcgbW9ycGhzLgogICAg
        ICAgICAgaHRtbCA9IGh0bWwucmVwbGFjZSgvKFxzKykoPHNjcmlwdCBpZD0n
        KFteJ10rKScpL2csIGZ1bmN0aW9uKG1hdGNoLCBzcGFjZXMsIHRhZywgaWQp
        IHsKICAgICAgICAgICAgbWF0Y2hlcy5wdXNoKFtpZCwgc3BhY2VzXSk7CiAg
        ICAgICAgICAgIHJldHVybiB0YWc7CiAgICAgICAgICB9KTsKICAgICAgICB9
        CgogICAgICAgIGVsZW1lbnQuaW5uZXJIVE1MID0gaHRtbDsKCiAgICAgICAg
        Ly8gSWYgd2UgaGF2ZSB0byBkbyBhbnkgd2hpdGVzcGFjZSBhZGp1c3RtZW50
        cyBkbyB0aGVtIG5vdwogICAgICAgIGlmIChtYXRjaGVzLmxlbmd0aCA+IDAp
        IHsKICAgICAgICAgIHZhciBsZW4gPSBtYXRjaGVzLmxlbmd0aCwgaWR4Owog
        ICAgICAgICAgZm9yIChpZHg9MDsgaWR4PGxlbjsgaWR4KyspIHsKICAgICAg
        ICAgICAgdmFyIHNjcmlwdCA9IGZpbmRDaGlsZEJ5SWQoZWxlbWVudCwgbWF0
        Y2hlc1tpZHhdWzBdKSwKICAgICAgICAgICAgICAgIG5vZGUgPSBkb2N1bWVu
        dC5jcmVhdGVUZXh0Tm9kZShtYXRjaGVzW2lkeF1bMV0pOwogICAgICAgICAg
        ICBzY3JpcHQucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUobm9kZSwgc2NyaXB0
        KTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH07CgogICAgICAvKgog
        ICAgICAgKiBHaXZlbiBhIHBhcmVudCBub2RlIGFuZCBzb21lIEhUTUwsIGdl
        bmVyYXRlIGEgc2V0IG9mIG5vZGVzLiBSZXR1cm4gdGhlIGZpcnN0CiAgICAg
        ICAqIG5vZGUsIHdoaWNoIHdpbGwgYWxsb3cgdXMgdG8gdHJhdmVyc2UgdGhl
        IHJlc3QgdXNpbmcgbmV4dFNpYmxpbmcuCiAgICAgICAqCiAgICAgICAqIFdl
        IG5lZWQgdG8gZG8gdGhpcyBiZWNhdXNlIGlubmVySFRNTCBpbiBJRSBkb2Vz
        IG5vdCByZWFsbHkgcGFyc2UgdGhlIG5vZGVzLgogICAgICAgKi8KICAgICAg
        dmFyIGZpcnN0Tm9kZUZvciA9IGZ1bmN0aW9uKHBhcmVudE5vZGUsIGh0bWwp
        IHsKICAgICAgICB2YXIgYXJyID0gd3JhcE1hcFtwYXJlbnROb2RlLnRhZ05h
        bWUudG9Mb3dlckNhc2UoKV0gfHwgd3JhcE1hcC5fZGVmYXVsdDsKICAgICAg
        ICB2YXIgZGVwdGggPSBhcnJbMF0sIHN0YXJ0ID0gYXJyWzFdLCBlbmQgPSBh
        cnJbMl07CgogICAgICAgIGlmIChuZWVkc1NoeSkgeyBodG1sID0gJyZzaHk7
        JytodG1sOyB9CgogICAgICAgIHZhciBlbGVtZW50ID0gZG9jdW1lbnQuY3Jl
        YXRlRWxlbWVudCgnZGl2Jyk7CgogICAgICAgIHNldElubmVySFRNTChlbGVt
        ZW50LCBzdGFydCArIGh0bWwgKyBlbmQpOwoKICAgICAgICBmb3IgKHZhciBp
        PTA7IGk8PWRlcHRoOyBpKyspIHsKICAgICAgICAgIGVsZW1lbnQgPSBlbGVt
        ZW50LmZpcnN0Q2hpbGQ7CiAgICAgICAgfQoKICAgICAgICAvLyBMb29rIGZv
        ciAmc2h5OyB0byByZW1vdmUgaXQuCiAgICAgICAgaWYgKG5lZWRzU2h5KSB7
        CiAgICAgICAgICB2YXIgc2h5RWxlbWVudCA9IGVsZW1lbnQ7CgogICAgICAg
        ICAgLy8gU29tZXRpbWVzIHdlIGdldCBuYW1lbGVzcyBlbGVtZW50cyB3aXRo
        IHRoZSBzaHkgaW5zaWRlCiAgICAgICAgICB3aGlsZSAoc2h5RWxlbWVudC5u
        b2RlVHlwZSA9PT0gMSAmJiAhc2h5RWxlbWVudC5ub2RlTmFtZSkgewogICAg
        ICAgICAgICBzaHlFbGVtZW50ID0gc2h5RWxlbWVudC5maXJzdENoaWxkOwog
        ICAgICAgICAgfQoKICAgICAgICAgIC8vIEF0IHRoaXMgcG9pbnQgaXQncyB0
        aGUgYWN0dWFsIHVuaWNvZGUgY2hhcmFjdGVyLgogICAgICAgICAgaWYgKHNo
        eUVsZW1lbnQubm9kZVR5cGUgPT09IDMgJiYgc2h5RWxlbWVudC5ub2RlVmFs
        dWUuY2hhckF0KDApID09PSAiXHUwMEFEIikgewogICAgICAgICAgICBzaHlF
        bGVtZW50Lm5vZGVWYWx1ZSA9IHNoeUVsZW1lbnQubm9kZVZhbHVlLnNsaWNl
        KDEpOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIGVs
        ZW1lbnQ7CiAgICAgIH07CgogICAgICAvKgogICAgICAgKiBJbiBzb21lIGNh
        c2VzLCBJbnRlcm5ldCBFeHBsb3JlciBjYW4gY3JlYXRlIGFuIGFub255bW91
        cyBub2RlIGluCiAgICAgICAqIHRoZSBoaWVyYXJjaHkgd2l0aCBubyB0YWdO
        YW1lLiBZb3UgY2FuIGNyZWF0ZSB0aGlzIHNjZW5hcmlvIHZpYToKICAgICAg
        ICoKICAgICAgICogICAgIGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQo
        ImRpdiIpOwogICAgICAgKiAgICAgZGl2LmlubmVySFRNTCA9ICI8dGFibGU+
        JnNoeTxzY3JpcHQ+PC9zY3JpcHQ+PHRyPjx0ZD5oaTwvdGQ+PC90cj48L3Rh
        YmxlPiI7CiAgICAgICAqICAgICBkaXYuZmlyc3RDaGlsZC5maXJzdENoaWxk
        LnRhZ05hbWUgLy89PiAiIgogICAgICAgKgogICAgICAgKiBJZiBvdXIgc2Ny
        aXB0IG1hcmtlcnMgYXJlIGluc2lkZSBzdWNoIGEgbm9kZSwgd2UgbmVlZCB0
        byBmaW5kIHRoYXQKICAgICAgICogbm9kZSBhbmQgdXNlICppdCogYXMgdGhl
        IG1hcmtlci4KICAgICAgICovCiAgICAgIHZhciByZWFsTm9kZSA9IGZ1bmN0
        aW9uKHN0YXJ0KSB7CiAgICAgICAgd2hpbGUgKHN0YXJ0LnBhcmVudE5vZGUu
        dGFnTmFtZSA9PT0gIiIpIHsKICAgICAgICAgIHN0YXJ0ID0gc3RhcnQucGFy
        ZW50Tm9kZTsKICAgICAgICB9CgogICAgICAgIHJldHVybiBzdGFydDsKICAg
        ICAgfTsKCiAgICAgIC8qCiAgICAgICAqIFdoZW4gYXV0b21hdGljYWxseSBh
        ZGRpbmcgYSB0Ym9keSwgSW50ZXJuZXQgRXhwbG9yZXIgaW5zZXJ0cyB0aGUK
        ICAgICAgICogdGJvZHkgaW1tZWRpYXRlbHkgYmVmb3JlIHRoZSBmaXJzdCA8
        dHI+LiBPdGhlciBicm93c2VycyBjcmVhdGUgaXQKICAgICAgICogYmVmb3Jl
        IHRoZSBmaXJzdCBub2RlLCBubyBtYXR0ZXIgd2hhdC4KICAgICAgICoKICAg
        ICAgICogVGhpcyBtZWFucyB0aGUgdGhlIGZvbGxvd2luZyBjb2RlOgogICAg
        ICAgKgogICAgICAgKiAgICAgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVu
        dCgiZGl2Iik7CiAgICAgICAqICAgICBkaXYuaW5uZXJIVE1MID0gIjx0YWJs
        ZT48c2NyaXB0IGlkPSdmaXJzdCc+PC9zY3JpcHQ+PHRyPjx0ZD5oaTwvdGQ+
        PC90cj48c2NyaXB0IGlkPSdsYXN0Jz48L3NjcmlwdD48L3RhYmxlPgogICAg
        ICAgKgogICAgICAgKiBHZW5lcmF0ZXMgdGhlIGZvbGxvd2luZyBET00gaW4g
        SUU6CiAgICAgICAqCiAgICAgICAqICAgICArIGRpdgogICAgICAgKiAgICAg
        ICArIHRhYmxlCiAgICAgICAqICAgICAgICAgLSBzY3JpcHQgaWQ9J2ZpcnN0
        JwogICAgICAgKiAgICAgICAgICsgdGJvZHkKICAgICAgICogICAgICAgICAg
        ICsgdHIKICAgICAgICogICAgICAgICAgICAgKyB0ZAogICAgICAgKiAgICAg
        ICAgICAgICAgIC0gImhpIgogICAgICAgKiAgICAgICAgICAgLSBzY3JpcHQg
        aWQ9J2xhc3QnCiAgICAgICAqCiAgICAgICAqIFdoaWNoIG1lYW5zIHRoYXQg
        dGhlIHR3byBzY3JpcHQgdGFncywgZXZlbiB0aG91Z2ggdGhleSB3ZXJlCiAg
        ICAgICAqIGluc2VydGVkIGF0IHRoZSBzYW1lIHBvaW50IGluIHRoZSBoaWVy
        YXJjaHkgaW4gdGhlIG9yaWdpbmFsCiAgICAgICAqIEhUTUwsIG5vdyBoYXZl
        IGRpZmZlcmVudCBwYXJlbnRzLgogICAgICAgKgogICAgICAgKiBUaGlzIGNv
        ZGUgcmVwYXJlbnRzIHRoZSBmaXJzdCBzY3JpcHQgdGFnIGJ5IG1ha2luZyBp
        dCB0aGUgdGJvZHkncwogICAgICAgKiBmaXJzdCBjaGlsZC4KICAgICAgICoK
        ICAgICAgICovCiAgICAgIHZhciBmaXhQYXJlbnRhZ2UgPSBmdW5jdGlvbihz
        dGFydCwgZW5kKSB7CiAgICAgICAgaWYgKHN0YXJ0LnBhcmVudE5vZGUgIT09
        IGVuZC5wYXJlbnROb2RlKSB7CiAgICAgICAgICBlbmQucGFyZW50Tm9kZS5p
        bnNlcnRCZWZvcmUoc3RhcnQsIGVuZC5wYXJlbnROb2RlLmZpcnN0Q2hpbGQp
        OwogICAgICAgIH0KICAgICAgfTsKCiAgICAgIGh0bWxGdW5jID0gZnVuY3Rp
        b24oaHRtbCwgb3V0ZXJUb28pIHsKICAgICAgICAvLyBnZXQgdGhlIHJlYWwg
        c3RhcnRpbmcgbm9kZS4gc2VlIHJlYWxOb2RlIGZvciBkZXRhaWxzLgogICAg
        ICAgIHZhciBzdGFydCA9IHJlYWxOb2RlKGRvY3VtZW50LmdldEVsZW1lbnRC
        eUlkKHRoaXMuc3RhcnQpKTsKICAgICAgICB2YXIgZW5kID0gZG9jdW1lbnQu
        Z2V0RWxlbWVudEJ5SWQodGhpcy5lbmQpOwogICAgICAgIHZhciBwYXJlbnRO
        b2RlID0gZW5kLnBhcmVudE5vZGU7CiAgICAgICAgdmFyIG5vZGUsIG5leHRT
        aWJsaW5nLCBsYXN0OwoKICAgICAgICAvLyBtYWtlIHN1cmUgdGhhdCB0aGUg
        c3RhcnQgYW5kIGVuZCBub2RlcyBzaGFyZSB0aGUgc2FtZQogICAgICAgIC8v
        IHBhcmVudC4gSWYgbm90LCBmaXggaXQuCiAgICAgICAgZml4UGFyZW50YWdl
        KHN0YXJ0LCBlbmQpOwoKICAgICAgICAvLyByZW1vdmUgYWxsIG9mIHRoZSBu
        b2RlcyBhZnRlciB0aGUgc3RhcnRpbmcgcGxhY2Vob2xkZXIgYW5kCiAgICAg
        ICAgLy8gYmVmb3JlIHRoZSBlbmRpbmcgcGxhY2Vob2xkZXIuCiAgICAgICAg
        bm9kZSA9IHN0YXJ0Lm5leHRTaWJsaW5nOwogICAgICAgIHdoaWxlIChub2Rl
        KSB7CiAgICAgICAgICBuZXh0U2libGluZyA9IG5vZGUubmV4dFNpYmxpbmc7
        CiAgICAgICAgICBsYXN0ID0gbm9kZSA9PT0gZW5kOwoKICAgICAgICAgIC8v
        IGlmIHRoaXMgaXMgdGhlIGxhc3Qgbm9kZSwgYW5kIHdlIHdhbnQgdG8gcmVt
        b3ZlIGl0IGFzIHdlbGwsCiAgICAgICAgICAvLyBzZXQgdGhlIGBlbmRgIG5v
        ZGUgdG8gdGhlIG5leHQgc2libGluZy4gVGhpcyBpcyBiZWNhdXNlCiAgICAg
        ICAgICAvLyBmb3IgdGhlIHJlc3Qgb2YgdGhlIGZ1bmN0aW9uLCB3ZSBpbnNl
        cnQgdGhlIG5ldyBub2RlcwogICAgICAgICAgLy8gYmVmb3JlIHRoZSBlbmQg
        KG5vdGUgdGhhdCBpbnNlcnRCZWZvcmUobm9kZSwgbnVsbCkgaXMKICAgICAg
        ICAgIC8vIHRoZSBzYW1lIGFzIGFwcGVuZENoaWxkKG5vZGUpKS4KICAgICAg
        ICAgIC8vCiAgICAgICAgICAvLyBpZiB3ZSBkbyBub3Qgd2FudCB0byByZW1v
        dmUgaXQsIGp1c3QgYnJlYWsuCiAgICAgICAgICBpZiAobGFzdCkgewogICAg
        ICAgICAgICBpZiAob3V0ZXJUb28pIHsgZW5kID0gbm9kZS5uZXh0U2libGlu
        ZzsgfSBlbHNlIHsgYnJlYWs7IH0KICAgICAgICAgIH0KCiAgICAgICAgICBu
        b2RlLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQobm9kZSk7CgogICAgICAgICAg
        Ly8gaWYgdGhpcyBpcyB0aGUgbGFzdCBub2RlIGFuZCB3ZSBkaWRuJ3QgYnJl
        YWsgYmVmb3JlCiAgICAgICAgICAvLyAoYmVjYXVzZSB3ZSB3YW50ZWQgdG8g
        cmVtb3ZlIHRoZSBvdXRlciBub2RlcyksIGJyZWFrCiAgICAgICAgICAvLyBu
        b3cuCiAgICAgICAgICBpZiAobGFzdCkgeyBicmVhazsgfQoKICAgICAgICAg
        IG5vZGUgPSBuZXh0U2libGluZzsKICAgICAgICB9CgogICAgICAgIC8vIGdl
        dCB0aGUgZmlyc3Qgbm9kZSBmb3IgdGhlIEhUTUwgc3RyaW5nLCBldmVuIGlu
        IGNhc2VzIGxpa2UKICAgICAgICAvLyB0YWJsZXMgYW5kIGxpc3RzIHdoZXJl
        IGEgc2ltcGxlIGlubmVySFRNTCBvbiBhIGRpdiB3b3VsZAogICAgICAgIC8v
        IHN3YWxsb3cgc29tZSBvZiB0aGUgY29udGVudC4KICAgICAgICBub2RlID0g
        Zmlyc3ROb2RlRm9yKHN0YXJ0LnBhcmVudE5vZGUsIGh0bWwpOwoKICAgICAg
        ICBpZiAob3V0ZXJUb28pIHsKICAgICAgICAgIHN0YXJ0LnBhcmVudE5vZGUu
        cmVtb3ZlQ2hpbGQoc3RhcnQpOwogICAgICAgIH0KCiAgICAgICAgLy8gY29w
        eSB0aGUgbm9kZXMgZm9yIHRoZSBIVE1MIGJldHdlZW4gdGhlIHN0YXJ0aW5n
        IGFuZCBlbmRpbmcKICAgICAgICAvLyBwbGFjZWhvbGRlci4KICAgICAgICB3
        aGlsZSAobm9kZSkgewogICAgICAgICAgbmV4dFNpYmxpbmcgPSBub2RlLm5l
        eHRTaWJsaW5nOwogICAgICAgICAgcGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUo
        bm9kZSwgZW5kKTsKICAgICAgICAgIG5vZGUgPSBuZXh0U2libGluZzsKICAg
        ICAgICB9CiAgICAgIH07CgogICAgICAvLyByZW1vdmUgdGhlIG5vZGVzIGlu
        IHRoZSBET00gcmVwcmVzZW50aW5nIHRoaXMgbWV0YW1vcnBoLgogICAgICAv
        LwogICAgICAvLyB0aGlzIGluY2x1ZGVzIHRoZSBzdGFydGluZyBhbmQgZW5k
        aW5nIHBsYWNlaG9sZGVycy4KICAgICAgcmVtb3ZlRnVuYyA9IGZ1bmN0aW9u
        KCkgewogICAgICAgIHZhciBzdGFydCA9IHJlYWxOb2RlKGRvY3VtZW50Lmdl
        dEVsZW1lbnRCeUlkKHRoaXMuc3RhcnQpKTsKICAgICAgICB2YXIgZW5kID0g
        ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5lbmQpOwoKICAgICAgICB0
        aGlzLmh0bWwoJycpOwogICAgICAgIHN0YXJ0LnBhcmVudE5vZGUucmVtb3Zl
        Q2hpbGQoc3RhcnQpOwogICAgICAgIGVuZC5wYXJlbnROb2RlLnJlbW92ZUNo
        aWxkKGVuZCk7CiAgICAgIH07CgogICAgICBhcHBlbmRUb0Z1bmMgPSBmdW5j
        dGlvbihwYXJlbnROb2RlKSB7CiAgICAgICAgdmFyIG5vZGUgPSBmaXJzdE5v
        ZGVGb3IocGFyZW50Tm9kZSwgdGhpcy5vdXRlckhUTUwoKSk7CiAgICAgICAg
        dmFyIG5leHRTaWJsaW5nOwoKICAgICAgICB3aGlsZSAobm9kZSkgewogICAg
        ICAgICAgbmV4dFNpYmxpbmcgPSBub2RlLm5leHRTaWJsaW5nOwogICAgICAg
        ICAgcGFyZW50Tm9kZS5hcHBlbmRDaGlsZChub2RlKTsKICAgICAgICAgIG5v
        ZGUgPSBuZXh0U2libGluZzsKICAgICAgICB9CiAgICAgIH07CgogICAgICBh
        ZnRlckZ1bmMgPSBmdW5jdGlvbihodG1sKSB7CiAgICAgICAgLy8gZ2V0IHRo
        ZSByZWFsIHN0YXJ0aW5nIG5vZGUuIHNlZSByZWFsTm9kZSBmb3IgZGV0YWls
        cy4KICAgICAgICB2YXIgZW5kID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQo
        dGhpcy5lbmQpOwogICAgICAgIHZhciBpbnNlcnRCZWZvcmUgPSBlbmQubmV4
        dFNpYmxpbmc7CiAgICAgICAgdmFyIHBhcmVudE5vZGUgPSBlbmQucGFyZW50
        Tm9kZTsKICAgICAgICB2YXIgbmV4dFNpYmxpbmc7CiAgICAgICAgdmFyIG5v
        ZGU7CgogICAgICAgIC8vIGdldCB0aGUgZmlyc3Qgbm9kZSBmb3IgdGhlIEhU
        TUwgc3RyaW5nLCBldmVuIGluIGNhc2VzIGxpa2UKICAgICAgICAvLyB0YWJs
        ZXMgYW5kIGxpc3RzIHdoZXJlIGEgc2ltcGxlIGlubmVySFRNTCBvbiBhIGRp
        diB3b3VsZAogICAgICAgIC8vIHN3YWxsb3cgc29tZSBvZiB0aGUgY29udGVu
        dC4KICAgICAgICBub2RlID0gZmlyc3ROb2RlRm9yKHBhcmVudE5vZGUsIGh0
        bWwpOwoKICAgICAgICAvLyBjb3B5IHRoZSBub2RlcyBmb3IgdGhlIEhUTUwg
        YmV0d2VlbiB0aGUgc3RhcnRpbmcgYW5kIGVuZGluZwogICAgICAgIC8vIHBs
        YWNlaG9sZGVyLgogICAgICAgIHdoaWxlIChub2RlKSB7CiAgICAgICAgICBu
        ZXh0U2libGluZyA9IG5vZGUubmV4dFNpYmxpbmc7CiAgICAgICAgICBwYXJl
        bnROb2RlLmluc2VydEJlZm9yZShub2RlLCBpbnNlcnRCZWZvcmUpOwogICAg
        ICAgICAgbm9kZSA9IG5leHRTaWJsaW5nOwogICAgICAgIH0KICAgICAgfTsK
        CiAgICAgIHByZXBlbmRGdW5jID0gZnVuY3Rpb24oaHRtbCkgewogICAgICAg
        IHZhciBzdGFydCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuc3Rh
        cnQpOwogICAgICAgIHZhciBwYXJlbnROb2RlID0gc3RhcnQucGFyZW50Tm9k
        ZTsKICAgICAgICB2YXIgbmV4dFNpYmxpbmc7CiAgICAgICAgdmFyIG5vZGU7
        CgogICAgICAgIG5vZGUgPSBmaXJzdE5vZGVGb3IocGFyZW50Tm9kZSwgaHRt
        bCk7CiAgICAgICAgdmFyIGluc2VydEJlZm9yZSA9IHN0YXJ0Lm5leHRTaWJs
        aW5nOwoKICAgICAgICB3aGlsZSAobm9kZSkgewogICAgICAgICAgbmV4dFNp
        YmxpbmcgPSBub2RlLm5leHRTaWJsaW5nOwogICAgICAgICAgcGFyZW50Tm9k
        ZS5pbnNlcnRCZWZvcmUobm9kZSwgaW5zZXJ0QmVmb3JlKTsKICAgICAgICAg
        IG5vZGUgPSBuZXh0U2libGluZzsKICAgICAgICB9CiAgICAgIH07CiAgICB9
        CgogICAgTWV0YW1vcnBoLnByb3RvdHlwZS5odG1sID0gZnVuY3Rpb24oaHRt
        bCkgewogICAgICB0aGlzLmNoZWNrUmVtb3ZlZCgpOwogICAgICBpZiAoaHRt
        bCA9PT0gdW5kZWZpbmVkKSB7IHJldHVybiB0aGlzLmlubmVySFRNTDsgfQoK
        ICAgICAgaHRtbEZ1bmMuY2FsbCh0aGlzLCBodG1sKTsKCiAgICAgIHRoaXMu
        aW5uZXJIVE1MID0gaHRtbDsKICAgIH07CgogICAgTWV0YW1vcnBoLnByb3Rv
        dHlwZS5yZXBsYWNlV2l0aCA9IGZ1bmN0aW9uKGh0bWwpIHsKICAgICAgdGhp
        cy5jaGVja1JlbW92ZWQoKTsKICAgICAgaHRtbEZ1bmMuY2FsbCh0aGlzLCBo
        dG1sLCB0cnVlKTsKICAgIH07CgogICAgTWV0YW1vcnBoLnByb3RvdHlwZS5y
        ZW1vdmUgPSByZW1vdmVGdW5jOwogICAgTWV0YW1vcnBoLnByb3RvdHlwZS5v
        dXRlckhUTUwgPSBvdXRlckhUTUxGdW5jOwogICAgTWV0YW1vcnBoLnByb3Rv
        dHlwZS5hcHBlbmRUbyA9IGFwcGVuZFRvRnVuYzsKICAgIE1ldGFtb3JwaC5w
        cm90b3R5cGUuYWZ0ZXIgPSBhZnRlckZ1bmM7CiAgICBNZXRhbW9ycGgucHJv
        dG90eXBlLnByZXBlbmQgPSBwcmVwZW5kRnVuYzsKICAgIE1ldGFtb3JwaC5w
        cm90b3R5cGUuc3RhcnRUYWcgPSBzdGFydFRhZ0Z1bmM7CiAgICBNZXRhbW9y
        cGgucHJvdG90eXBlLmVuZFRhZyA9IGVuZFRhZ0Z1bmM7CgogICAgTWV0YW1v
        cnBoLnByb3RvdHlwZS5pc1JlbW92ZWQgPSBmdW5jdGlvbigpIHsKICAgICAg
        dmFyIGJlZm9yZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuc3Rh
        cnQpOwogICAgICB2YXIgYWZ0ZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJ
        ZCh0aGlzLmVuZCk7CgogICAgICByZXR1cm4gIWJlZm9yZSB8fCAhYWZ0ZXI7
        CiAgICB9OwoKICAgIE1ldGFtb3JwaC5wcm90b3R5cGUuY2hlY2tSZW1vdmVk
        ID0gZnVuY3Rpb24oKSB7CiAgICAgIGlmICh0aGlzLmlzUmVtb3ZlZCgpKSB7
        CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJDYW5ub3QgcGVyZm9ybSBvcGVy
        YXRpb25zIG9uIGEgTWV0YW1vcnBoIHRoYXQgaXMgbm90IGluIHRoZSBET00u
        Iik7CiAgICAgIH0KICAgIH07CgogICAgcmV0dXJuIE1ldGFtb3JwaDsKICB9
        KTsKCn0pKCk7CgooZnVuY3Rpb24oKSB7Ci8qKgpAbW9kdWxlIGVtYmVyCkBz
        dWJtb2R1bGUgZW1iZXItaGFuZGxlYmFycy1jb21waWxlcgoqLwoKLy8gRWxp
        bWluYXRlIGRlcGVuZGVuY3kgb24gYW55IEVtYmVyIHRvIHNpbXBsaWZ5IHBy
        ZWNvbXBpbGF0aW9uIHdvcmtmbG93CnZhciBvYmplY3RDcmVhdGUgPSBPYmpl
        Y3QuY3JlYXRlIHx8IGZ1bmN0aW9uKHBhcmVudCkgewogIGZ1bmN0aW9uIEYo
        KSB7fQogIEYucHJvdG90eXBlID0gcGFyZW50OwogIHJldHVybiBuZXcgRigp
        Owp9OwoKdmFyIEhhbmRsZWJhcnMgPSAoRW1iZXIuaW1wb3J0cyAmJiBFbWJl
        ci5pbXBvcnRzLkhhbmRsZWJhcnMpIHx8ICh0aGlzICYmIHRoaXMuSGFuZGxl
        YmFycyk7CmlmICghSGFuZGxlYmFycyAmJiB0eXBlb2YgcmVxdWlyZSA9PT0g
        J2Z1bmN0aW9uJykgewogIEhhbmRsZWJhcnMgPSByZXF1aXJlKCdoYW5kbGVi
        YXJzJyk7Cn0KCkVtYmVyLmFzc2VydCgiRW1iZXIgSGFuZGxlYmFycyByZXF1
        aXJlcyBIYW5kbGViYXJzIHZlcnNpb24gMS4wIG9yIDEuMS4gSW5jbHVkZSAi
        ICsKICAgICAgICAgICAgICJhIFNDUklQVCB0YWcgaW4gdGhlIEhUTUwgSEVB
        RCBsaW5raW5nIHRvIHRoZSBIYW5kbGViYXJzIGZpbGUgIiArCiAgICAgICAg
        ICAgICAiYmVmb3JlIHlvdSBsaW5rIHRvIEVtYmVyLiIsIEhhbmRsZWJhcnMp
        OwoKRW1iZXIuYXNzZXJ0KCJFbWJlciBIYW5kbGViYXJzIHJlcXVpcmVzIEhh
        bmRsZWJhcnMgdmVyc2lvbiAxLjAgb3IgMS4xLCAiICsKICAgICAgICAgICAg
        ICJDT01QSUxFUl9SRVZJU0lPTiBleHBlY3RlZDogNCwgZ290OiAiICsgIEhh
        bmRsZWJhcnMuQ09NUElMRVJfUkVWSVNJT04gKwogICAgICAgICAgICAgIiAt
        IFBsZWFzZSBub3RlOiBCdWlsZHMgb2YgbWFzdGVyIG1heSBoYXZlIG90aGVy
        IENPTVBJTEVSX1JFVklTSU9OIHZhbHVlcy4iLAogICAgICAgICAgICAgSGFu
        ZGxlYmFycy5DT01QSUxFUl9SRVZJU0lPTiA9PT0gNCk7CgovKioKICBQcmVw
        YXJlcyB0aGUgSGFuZGxlYmFycyB0ZW1wbGF0aW5nIGxpYnJhcnkgZm9yIHVz
        ZSBpbnNpZGUgRW1iZXIncyB2aWV3CiAgc3lzdGVtLgoKICBUaGUgYEVtYmVy
        LkhhbmRsZWJhcnNgIG9iamVjdCBpcyB0aGUgc3RhbmRhcmQgSGFuZGxlYmFy
        cyBsaWJyYXJ5LCBleHRlbmRlZCB0bwogIHVzZSBFbWJlcidzIGBnZXQoKWAg
        bWV0aG9kIGluc3RlYWQgb2YgZGlyZWN0IHByb3BlcnR5IGFjY2Vzcywgd2hp
        Y2ggYWxsb3dzCiAgY29tcHV0ZWQgcHJvcGVydGllcyB0byBiZSB1c2VkIGlu
        c2lkZSB0ZW1wbGF0ZXMuCgogIFRvIGNyZWF0ZSBhbiBgRW1iZXIuSGFuZGxl
        YmFyc2AgdGVtcGxhdGUsIGNhbGwgYEVtYmVyLkhhbmRsZWJhcnMuY29tcGls
        ZSgpYC4KICBUaGlzIHdpbGwgcmV0dXJuIGEgZnVuY3Rpb24gdGhhdCBjYW4g
        YmUgdXNlZCBieSBgRW1iZXIuVmlld2AgZm9yIHJlbmRlcmluZy4KCiAgQGNs
        YXNzIEhhbmRsZWJhcnMKICBAbmFtZXNwYWNlIEVtYmVyCiovCkVtYmVyLkhh
        bmRsZWJhcnMgPSBvYmplY3RDcmVhdGUoSGFuZGxlYmFycyk7CgovKioKICBS
        ZWdpc3RlciBhIGJvdW5kIGhlbHBlciBvciBjdXN0b20gdmlldyBoZWxwZXIu
        CgogICMjIFNpbXBsZSBib3VuZCBoZWxwZXIgZXhhbXBsZQoKICBgYGBqYXZh
        c2NyaXB0CiAgRW1iZXIuSGFuZGxlYmFycy5oZWxwZXIoJ2NhcGl0YWxpemUn
        LCBmdW5jdGlvbih2YWx1ZSkgewogICAgcmV0dXJuIHZhbHVlLnRvVXBwZXJD
        YXNlKCk7CiAgfSk7CiAgYGBgCgogIFRoZSBhYm92ZSBib3VuZCBoZWxwZXIg
        Y2FuIGJlIHVzZWQgaW5zaWRlIG9mIHRlbXBsYXRlcyBhcyBmb2xsb3dzOgoK
        ICBgYGBoYW5kbGViYXJzCiAge3tjYXBpdGFsaXplIG5hbWV9fQogIGBgYAoK
        ICBJbiB0aGlzIGNhc2UsIHdoZW4gdGhlIGBuYW1lYCBwcm9wZXJ0eSBvZiB0
        aGUgdGVtcGxhdGUncyBjb250ZXh0IGNoYW5nZXMsCiAgdGhlIHJlbmRlcmVk
        IHZhbHVlIG9mIHRoZSBoZWxwZXIgd2lsbCB1cGRhdGUgdG8gcmVmbGVjdCB0
        aGlzIGNoYW5nZS4KCiAgRm9yIG1vcmUgZXhhbXBsZXMgb2YgYm91bmQgaGVs
        cGVycywgc2VlIGRvY3VtZW50YXRpb24gZm9yCiAgYEVtYmVyLkhhbmRsZWJh
        cnMucmVnaXN0ZXJCb3VuZEhlbHBlcmAuCgogICMjIEN1c3RvbSB2aWV3IGhl
        bHBlciBleGFtcGxlCgogIEFzc3VtaW5nIGEgdmlldyBzdWJjbGFzcyBuYW1l
        ZCBgQXBwLkNhbGVuZGFyVmlld2Agd2VyZSBkZWZpbmVkLCBhIGhlbHBlcgog
        IGZvciByZW5kZXJpbmcgaW5zdGFuY2VzIG9mIHRoaXMgdmlldyBjb3VsZCBi
        ZSByZWdpc3RlcmVkIGFzIGZvbGxvd3M6CgogIGBgYGphdmFzY3JpcHQKICBF
        bWJlci5IYW5kbGViYXJzLmhlbHBlcignY2FsZW5kYXInLCBBcHAuQ2FsZW5k
        YXJWaWV3KToKICBgYGAKCiAgVGhlIGFib3ZlIGJvdW5kIGhlbHBlciBjYW4g
        YmUgdXNlZCBpbnNpZGUgb2YgdGVtcGxhdGVzIGFzIGZvbGxvd3M6CgogIGBg
        YGhhbmRsZWJhcnMKICB7e2NhbGVuZGFyfX0KICBgYGAKCiAgV2hpY2ggaXMg
        ZnVuY3Rpb25hbGx5IGVxdWl2YWxlbnQgdG86CgogIGBgYGhhbmRsZWJhcnMK
        ICB7e3ZpZXcgQXBwLkNhbGVuZGFyVmlld319CiAgYGBgCgogIE9wdGlvbnMg
        aW4gdGhlIGhlbHBlciB3aWxsIGJlIHBhc3NlZCB0byB0aGUgdmlldyBpbiBl
        eGFjdGx5IHRoZSBzYW1lCiAgbWFubmVyIGFzIHdpdGggdGhlIGB2aWV3YCBo
        ZWxwZXIuCgogIEBtZXRob2QgaGVscGVyCiAgQGZvciBFbWJlci5IYW5kbGVi
        YXJzCiAgQHBhcmFtIHtTdHJpbmd9IG5hbWUKICBAcGFyYW0ge0Z1bmN0aW9u
        fEVtYmVyLlZpZXd9IGZ1bmN0aW9uIG9yIHZpZXcgY2xhc3MgY29uc3RydWN0
        b3IKICBAcGFyYW0ge1N0cmluZ30gZGVwZW5kZW50S2V5cyoKKi8KRW1iZXIu
        SGFuZGxlYmFycy5oZWxwZXIgPSBmdW5jdGlvbihuYW1lLCB2YWx1ZSkgewog
        IEVtYmVyLmFzc2VydCgiWW91IHRyaWVkIHRvIHJlZ2lzdGVyIGEgY29tcG9u
        ZW50IG5hbWVkICciICsgbmFtZSArICInLCBidXQgY29tcG9uZW50IG5hbWVz
        IG11c3QgaW5jbHVkZSBhICctJyIsICFFbWJlci5Db21wb25lbnQuZGV0ZWN0
        KHZhbHVlKSB8fCBuYW1lLm1hdGNoKC8tLykpOwoKICBpZiAoRW1iZXIuVmll
        dy5kZXRlY3QodmFsdWUpKSB7CiAgICBFbWJlci5IYW5kbGViYXJzLnJlZ2lz
        dGVySGVscGVyKG5hbWUsIEVtYmVyLkhhbmRsZWJhcnMubWFrZVZpZXdIZWxw
        ZXIodmFsdWUpKTsKICB9IGVsc2UgewogICAgRW1iZXIuSGFuZGxlYmFycy5y
        ZWdpc3RlckJvdW5kSGVscGVyLmFwcGx5KG51bGwsIGFyZ3VtZW50cyk7CiAg
        fQp9OwoKLyoqCiAgUmV0dXJucyBhIGhlbHBlciBmdW5jdGlvbiB0aGF0IHJl
        bmRlcnMgdGhlIHByb3ZpZGVkIFZpZXdDbGFzcy4KCiAgVXNlZCBpbnRlcm5h
        bGx5IGJ5IEVtYmVyLkhhbmRsZWJhcnMuaGVscGVyIGFuZCBvdGhlciBtZXRo
        b2RzCiAgaW52b2x2aW5nIGhlbHBlci9jb21wb25lbnQgcmVnaXN0cmF0aW9u
        LgoKICBAcHJpdmF0ZQogIEBtZXRob2QgaGVscGVyCiAgQGZvciBFbWJlci5I
        YW5kbGViYXJzCiAgQHBhcmFtIHtGdW5jdGlvbn0gVmlld0NsYXNzIHZpZXcg
        Y2xhc3MgY29uc3RydWN0b3IKKi8KRW1iZXIuSGFuZGxlYmFycy5tYWtlVmll
        d0hlbHBlciA9IGZ1bmN0aW9uKFZpZXdDbGFzcykgewogIHJldHVybiBmdW5j
        dGlvbihvcHRpb25zKSB7CiAgICBFbWJlci5hc3NlcnQoIllvdSBjYW4gb25s
        eSBwYXNzIGF0dHJpYnV0ZXMgKHN1Y2ggYXMgbmFtZT12YWx1ZSkgbm90IGJh
        cmUgdmFsdWVzIHRvIGEgaGVscGVyIGZvciBhIFZpZXcgZm91bmQgaW4gJyIg
        KyBWaWV3Q2xhc3MudG9TdHJpbmcoKSArICInIiwgYXJndW1lbnRzLmxlbmd0
        aCA8IDIpOwogICAgcmV0dXJuIEVtYmVyLkhhbmRsZWJhcnMuaGVscGVycy52
        aWV3LmNhbGwodGhpcywgVmlld0NsYXNzLCBvcHRpb25zKTsKICB9Owp9OwoK
        LyoqCkBjbGFzcyBoZWxwZXJzCkBuYW1lc3BhY2UgRW1iZXIuSGFuZGxlYmFy
        cwoqLwpFbWJlci5IYW5kbGViYXJzLmhlbHBlcnMgPSBvYmplY3RDcmVhdGUo
        SGFuZGxlYmFycy5oZWxwZXJzKTsKCi8qKgogIE92ZXJyaWRlIHRoZSB0aGUg
        b3Bjb2RlIGNvbXBpbGVyIGFuZCBKYXZhU2NyaXB0IGNvbXBpbGVyIGZvciBI
        YW5kbGViYXJzLgoKICBAY2xhc3MgQ29tcGlsZXIKICBAbmFtZXNwYWNlIEVt
        YmVyLkhhbmRsZWJhcnMKICBAcHJpdmF0ZQogIEBjb25zdHJ1Y3RvcgoqLwpF
        bWJlci5IYW5kbGViYXJzLkNvbXBpbGVyID0gZnVuY3Rpb24oKSB7fTsKCi8v
        IEhhbmRsZWJhcnMuQ29tcGlsZXIgZG9lc24ndCBleGlzdCBpbiBydW50aW1l
        LW9ubHkKaWYgKEhhbmRsZWJhcnMuQ29tcGlsZXIpIHsKICBFbWJlci5IYW5k
        bGViYXJzLkNvbXBpbGVyLnByb3RvdHlwZSA9IG9iamVjdENyZWF0ZShIYW5k
        bGViYXJzLkNvbXBpbGVyLnByb3RvdHlwZSk7Cn0KCkVtYmVyLkhhbmRsZWJh
        cnMuQ29tcGlsZXIucHJvdG90eXBlLmNvbXBpbGVyID0gRW1iZXIuSGFuZGxl
        YmFycy5Db21waWxlcjsKCi8qKgogIEBjbGFzcyBKYXZhU2NyaXB0Q29tcGls
        ZXIKICBAbmFtZXNwYWNlIEVtYmVyLkhhbmRsZWJhcnMKICBAcHJpdmF0ZQog
        IEBjb25zdHJ1Y3RvcgoqLwpFbWJlci5IYW5kbGViYXJzLkphdmFTY3JpcHRD
        b21waWxlciA9IGZ1bmN0aW9uKCkge307CgovLyBIYW5kbGViYXJzLkphdmFT
        Y3JpcHRDb21waWxlciBkb2Vzbid0IGV4aXN0IGluIHJ1bnRpbWUtb25seQpp
        ZiAoSGFuZGxlYmFycy5KYXZhU2NyaXB0Q29tcGlsZXIpIHsKICBFbWJlci5I
        YW5kbGViYXJzLkphdmFTY3JpcHRDb21waWxlci5wcm90b3R5cGUgPSBvYmpl
        Y3RDcmVhdGUoSGFuZGxlYmFycy5KYXZhU2NyaXB0Q29tcGlsZXIucHJvdG90
        eXBlKTsKICBFbWJlci5IYW5kbGViYXJzLkphdmFTY3JpcHRDb21waWxlci5w
        cm90b3R5cGUuY29tcGlsZXIgPSBFbWJlci5IYW5kbGViYXJzLkphdmFTY3Jp
        cHRDb21waWxlcjsKfQoKCkVtYmVyLkhhbmRsZWJhcnMuSmF2YVNjcmlwdENv
        bXBpbGVyLnByb3RvdHlwZS5uYW1lc3BhY2UgPSAiRW1iZXIuSGFuZGxlYmFy
        cyI7CgpFbWJlci5IYW5kbGViYXJzLkphdmFTY3JpcHRDb21waWxlci5wcm90
        b3R5cGUuaW5pdGlhbGl6ZUJ1ZmZlciA9IGZ1bmN0aW9uKCkgewogIHJldHVy
        biAiJyciOwp9OwoKLyoqCiAgT3ZlcnJpZGUgdGhlIGRlZmF1bHQgYnVmZmVy
        IGZvciBFbWJlciBIYW5kbGViYXJzLiBCeSBkZWZhdWx0LCBIYW5kbGViYXJz
        CiAgY3JlYXRlcyBhbiBlbXB0eSBTdHJpbmcgYXQgdGhlIGJlZ2lubmluZyBv
        ZiBlYWNoIGludm9jYXRpb24gYW5kIGFwcGVuZHMgdG8KICBpdC4gRW1iZXIn
        cyBIYW5kbGViYXJzIG92ZXJyaWRlcyB0aGlzIHRvIGFwcGVuZCB0byBhIHNp
        bmdsZSBzaGFyZWQgYnVmZmVyLgoKICBAcHJpdmF0ZQogIEBtZXRob2QgYXBw
        ZW5kVG9CdWZmZXIKICBAcGFyYW0gc3RyaW5nIHtTdHJpbmd9CiovCkVtYmVy
        LkhhbmRsZWJhcnMuSmF2YVNjcmlwdENvbXBpbGVyLnByb3RvdHlwZS5hcHBl
        bmRUb0J1ZmZlciA9IGZ1bmN0aW9uKHN0cmluZykgewogIHJldHVybiAiZGF0
        YS5idWZmZXIucHVzaCgiK3N0cmluZysiKTsiOwp9OwoKLy8gSGFja3MgYWhl
        YWQ6Ci8vIEhhbmRsZWJhcnMgcHJlc2VudGx5IGhhcyBhIGJ1ZyB3aGVyZSB0
        aGUgYGJsb2NrSGVscGVyTWlzc2luZ2AgaG9vawovLyBkb2Vzbid0IGdldCBw
        YXNzZWQgdGhlIG5hbWUgb2YgdGhlIG1pc3NpbmcgaGVscGVyIG5hbWUsIGJ1
        dCByYXRoZXIKLy8gZ2V0cyBwYXNzZWQgdGhlIHZhbHVlIG9mIHRoYXQgbWlz
        c2luZyBoZWxwZXIgZXZhbHVhdGVkIG9uIHRoZSBjdXJyZW50Ci8vIGNvbnRl
        eHQsIHdoaWNoIGlzIG1vc3QgbGlrZWx5IGB1bmRlZmluZWRgIGFuZCB0b3Rh
        bGx5IHVzZWxlc3MuCi8vCi8vIFNvIHdlIGFsdGVyIHRoZSBjb21waWxlZCB0
        ZW1wbGF0ZSBmdW5jdGlvbiB0byBwYXNzIHRoZSBuYW1lIG9mIHRoZSBoZWxw
        ZXIKLy8gaW5zdGVhZCwgYXMgZXhwZWN0ZWQuCi8vCi8vIFRoaXMgY2FuIGdv
        IGF3YXkgb25jZSB0aGUgZm9sbG93aW5nIGlzIGNsb3NlZDoKLy8gaHR0cHM6
        Ly9naXRodWIuY29tL3d5Y2F0cy9oYW5kbGViYXJzLmpzL2lzc3Vlcy82MzQK
        CnZhciBET1RfTE9PS1VQX1JFR0VYID0gL2hlbHBlcnNcLiguKj8pXCkvLAog
        ICAgQlJBQ0tFVF9TVFJJTkdfTE9PS1VQX1JFR0VYID0gL2hlbHBlcnNcWyco
        Lio/KScvLAogICAgSU5WT0NBVElPTl9TUExJVFRJTkdfUkVHRVggPSAvKC4q
        YmxvY2tIZWxwZXJNaXNzaW5nXC5jYWxsXCguKikoc3RhY2tbMC05XSspKCwu
        KikvOwoKRW1iZXIuSGFuZGxlYmFycy5KYXZhU2NyaXB0Q29tcGlsZXIuc3Ry
        aW5naWZ5TGFzdEJsb2NrSGVscGVyTWlzc2luZ0ludm9jYXRpb24gPSBmdW5j
        dGlvbihzb3VyY2UpIHsKICB2YXIgaGVscGVySW52b2NhdGlvbiA9IHNvdXJj
        ZVtzb3VyY2UubGVuZ3RoIC0gMV0sCiAgICAgIGhlbHBlck5hbWUgPSAoRE9U
        X0xPT0tVUF9SRUdFWC5leGVjKGhlbHBlckludm9jYXRpb24pIHx8IEJSQUNL
        RVRfU1RSSU5HX0xPT0tVUF9SRUdFWC5leGVjKGhlbHBlckludm9jYXRpb24p
        KVsxXSwKICAgICAgbWF0Y2hlcyA9IElOVk9DQVRJT05fU1BMSVRUSU5HX1JF
        R0VYLmV4ZWMoaGVscGVySW52b2NhdGlvbik7CgogIHNvdXJjZVtzb3VyY2Uu
        bGVuZ3RoIC0gMV0gPSBtYXRjaGVzWzFdICsgIiciICsgaGVscGVyTmFtZSAr
        ICInIiArIG1hdGNoZXNbM107Cn0KdmFyIHN0cmluZ2lmeUJsb2NrSGVscGVy
        TWlzc2luZyA9IEVtYmVyLkhhbmRsZWJhcnMuSmF2YVNjcmlwdENvbXBpbGVy
        LnN0cmluZ2lmeUxhc3RCbG9ja0hlbHBlck1pc3NpbmdJbnZvY2F0aW9uOwoK
        dmFyIG9yaWdpbmFsQmxvY2tWYWx1ZSA9IEVtYmVyLkhhbmRsZWJhcnMuSmF2
        YVNjcmlwdENvbXBpbGVyLnByb3RvdHlwZS5ibG9ja1ZhbHVlOwpFbWJlci5I
        YW5kbGViYXJzLkphdmFTY3JpcHRDb21waWxlci5wcm90b3R5cGUuYmxvY2tW
        YWx1ZSA9IGZ1bmN0aW9uKCkgewogIG9yaWdpbmFsQmxvY2tWYWx1ZS5hcHBs
        eSh0aGlzLCBhcmd1bWVudHMpOwogIHN0cmluZ2lmeUJsb2NrSGVscGVyTWlz
        c2luZyh0aGlzLnNvdXJjZSk7Cn07Cgp2YXIgb3JpZ2luYWxBbWJpZ3VvdXNC
        bG9ja1ZhbHVlID0gRW1iZXIuSGFuZGxlYmFycy5KYXZhU2NyaXB0Q29tcGls
        ZXIucHJvdG90eXBlLmFtYmlndW91c0Jsb2NrVmFsdWU7CkVtYmVyLkhhbmRs
        ZWJhcnMuSmF2YVNjcmlwdENvbXBpbGVyLnByb3RvdHlwZS5hbWJpZ3VvdXNC
        bG9ja1ZhbHVlID0gZnVuY3Rpb24oKSB7CiAgb3JpZ2luYWxBbWJpZ3VvdXNC
        bG9ja1ZhbHVlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgc3RyaW5naWZ5
        QmxvY2tIZWxwZXJNaXNzaW5nKHRoaXMuc291cmNlKTsKfTsKCi8qKgogIFJl
        d3JpdGUgc2ltcGxlIG11c3RhY2hlcyBmcm9tIGB7e2Zvb319YCB0byBge3ti
        aW5kICJmb28ifX1gLiBUaGlzIG1lYW5zIHRoYXQKICBhbGwgc2ltcGxlIG11
        c3RhY2hlcyBpbiBFbWJlcidzIEhhbmRsZWJhcnMgd2lsbCBhbHNvIHNldCB1
        cCBhbiBvYnNlcnZlciB0bwogIGtlZXAgdGhlIERPTSB1cCB0byBkYXRlIHdo
        ZW4gdGhlIHVuZGVybHlpbmcgcHJvcGVydHkgY2hhbmdlcy4KCiAgQHByaXZh
        dGUKICBAbWV0aG9kIG11c3RhY2hlCiAgQGZvciBFbWJlci5IYW5kbGViYXJz
        LkNvbXBpbGVyCiAgQHBhcmFtIG11c3RhY2hlCiovCkVtYmVyLkhhbmRsZWJh
        cnMuQ29tcGlsZXIucHJvdG90eXBlLm11c3RhY2hlID0gZnVuY3Rpb24obXVz
        dGFjaGUpIHsKICBpZiAoIShtdXN0YWNoZS5wYXJhbXMubGVuZ3RoIHx8IG11
        c3RhY2hlLmhhc2gpKSB7CiAgICB2YXIgaWQgPSBuZXcgSGFuZGxlYmFycy5B
        U1QuSWROb2RlKFt7IHBhcnQ6ICdfdHJpYWdlTXVzdGFjaGUnIH1dKTsKCiAg
        ICAvLyBVcGRhdGUgdGhlIG11c3RhY2hlIG5vZGUgdG8gaW5jbHVkZSBhIGhh
        c2ggdmFsdWUgaW5kaWNhdGluZyB3aGV0aGVyIHRoZSBvcmlnaW5hbCBub2Rl
        CiAgICAvLyB3YXMgZXNjYXBlZC4gVGhpcyB3aWxsIGFsbG93IHVzIHRvIHBy
        b3Blcmx5IGVzY2FwZSB2YWx1ZXMgd2hlbiB0aGUgdW5kZXJseWluZyB2YWx1
        ZQogICAgLy8gY2hhbmdlcyBhbmQgd2UgbmVlZCB0byByZS1yZW5kZXIgdGhl
        IHZhbHVlLgogICAgaWYgKCFtdXN0YWNoZS5lc2NhcGVkKSB7CiAgICAgIG11
        c3RhY2hlLmhhc2ggPSBtdXN0YWNoZS5oYXNoIHx8IG5ldyBIYW5kbGViYXJz
        LkFTVC5IYXNoTm9kZShbXSk7CiAgICAgIG11c3RhY2hlLmhhc2gucGFpcnMu
        cHVzaChbInVuZXNjYXBlZCIsIG5ldyBIYW5kbGViYXJzLkFTVC5TdHJpbmdO
        b2RlKCJ0cnVlIildKTsKICAgIH0KICAgIG11c3RhY2hlID0gbmV3IEhhbmRs
        ZWJhcnMuQVNULk11c3RhY2hlTm9kZShbaWRdLmNvbmNhdChbbXVzdGFjaGUu
        aWRdKSwgbXVzdGFjaGUuaGFzaCwgIW11c3RhY2hlLmVzY2FwZWQpOwogIH0K
        CiAgcmV0dXJuIEhhbmRsZWJhcnMuQ29tcGlsZXIucHJvdG90eXBlLm11c3Rh
        Y2hlLmNhbGwodGhpcywgbXVzdGFjaGUpOwp9OwoKLyoqCiAgVXNlZCBmb3Ig
        cHJlY29tcGlsYXRpb24gb2YgRW1iZXIgSGFuZGxlYmFycyB0ZW1wbGF0ZXMu
        IFRoaXMgd2lsbCBub3QgYmUgdXNlZAogIGR1cmluZyBub3JtYWwgYXBwIGV4
        ZWN1dGlvbi4KCiAgQG1ldGhvZCBwcmVjb21waWxlCiAgQGZvciBFbWJlci5I
        YW5kbGViYXJzCiAgQHN0YXRpYwogIEBwYXJhbSB7U3RyaW5nfSBzdHJpbmcg
        VGhlIHRlbXBsYXRlIHRvIHByZWNvbXBpbGUKKi8KRW1iZXIuSGFuZGxlYmFy
        cy5wcmVjb21waWxlID0gZnVuY3Rpb24oc3RyaW5nKSB7CiAgdmFyIGFzdCA9
        IEhhbmRsZWJhcnMucGFyc2Uoc3RyaW5nKTsKCiAgdmFyIG9wdGlvbnMgPSB7
        CiAgICBrbm93bkhlbHBlcnM6IHsKICAgICAgYWN0aW9uOiB0cnVlLAogICAg
        ICB1bmJvdW5kOiB0cnVlLAogICAgICAnYmluZC1hdHRyJzogdHJ1ZSwKICAg
        ICAgdGVtcGxhdGU6IHRydWUsCiAgICAgIHZpZXc6IHRydWUsCiAgICAgIF90
        cmlhZ2VNdXN0YWNoZTogdHJ1ZQogICAgfSwKICAgIGRhdGE6IHRydWUsCiAg
        ICBzdHJpbmdQYXJhbXM6IHRydWUKICB9OwoKICB2YXIgZW52aXJvbm1lbnQg
        PSBuZXcgRW1iZXIuSGFuZGxlYmFycy5Db21waWxlcigpLmNvbXBpbGUoYXN0
        LCBvcHRpb25zKTsKICByZXR1cm4gbmV3IEVtYmVyLkhhbmRsZWJhcnMuSmF2
        YVNjcmlwdENvbXBpbGVyKCkuY29tcGlsZShlbnZpcm9ubWVudCwgb3B0aW9u
        cywgdW5kZWZpbmVkLCB0cnVlKTsKfTsKCi8vIFdlIGRvbid0IHN1cHBvcnQg
        dGhpcyBmb3IgSGFuZGxlYmFycyBydW50aW1lLW9ubHkKaWYgKEhhbmRsZWJh
        cnMuY29tcGlsZSkgewogIC8qKgogICAgVGhlIGVudHJ5IHBvaW50IGZvciBF
        bWJlciBIYW5kbGViYXJzLiBUaGlzIHJlcGxhY2VzIHRoZSBkZWZhdWx0CiAg
        ICBgSGFuZGxlYmFycy5jb21waWxlYCBhbmQgdHVybnMgb24gdGVtcGxhdGUt
        bG9jYWwgZGF0YSBhbmQgU3RyaW5nCiAgICBwYXJhbWV0ZXJzLgoKICAgIEBt
        ZXRob2QgY29tcGlsZQogICAgQGZvciBFbWJlci5IYW5kbGViYXJzCiAgICBA
        c3RhdGljCiAgICBAcGFyYW0ge1N0cmluZ30gc3RyaW5nIFRoZSB0ZW1wbGF0
        ZSB0byBjb21waWxlCiAgICBAcmV0dXJuIHtGdW5jdGlvbn0KICAqLwogIEVt
        YmVyLkhhbmRsZWJhcnMuY29tcGlsZSA9IGZ1bmN0aW9uKHN0cmluZykgewog
        ICAgdmFyIGFzdCA9IEhhbmRsZWJhcnMucGFyc2Uoc3RyaW5nKTsKICAgIHZh
        ciBvcHRpb25zID0geyBkYXRhOiB0cnVlLCBzdHJpbmdQYXJhbXM6IHRydWUg
        fTsKICAgIHZhciBlbnZpcm9ubWVudCA9IG5ldyBFbWJlci5IYW5kbGViYXJz
        LkNvbXBpbGVyKCkuY29tcGlsZShhc3QsIG9wdGlvbnMpOwogICAgdmFyIHRl
        bXBsYXRlU3BlYyA9IG5ldyBFbWJlci5IYW5kbGViYXJzLkphdmFTY3JpcHRD
        b21waWxlcigpLmNvbXBpbGUoZW52aXJvbm1lbnQsIG9wdGlvbnMsIHVuZGVm
        aW5lZCwgdHJ1ZSk7CgogICAgdmFyIHRlbXBsYXRlID0gRW1iZXIuSGFuZGxl
        YmFycy50ZW1wbGF0ZSh0ZW1wbGF0ZVNwZWMpOwogICAgdGVtcGxhdGUuaXNN
        ZXRob2QgPSBmYWxzZTsgLy9NYWtlIHN1cmUgd2UgZG9uJ3Qgd3JhcCB0ZW1w
        bGF0ZXMgd2l0aCAuX3N1cGVyCgogICAgcmV0dXJuIHRlbXBsYXRlOwogIH07
        Cn0KCgp9KSgpOwoKKGZ1bmN0aW9uKCkgewp2YXIgc2xpY2UgPSBBcnJheS5w
        cm90b3R5cGUuc2xpY2UsCiAgICBvcmlnaW5hbFRlbXBsYXRlID0gRW1iZXIu
        SGFuZGxlYmFycy50ZW1wbGF0ZTsKCi8qKgogIElmIGEgcGF0aCBzdGFydHMg
        d2l0aCBhIHJlc2VydmVkIGtleXdvcmQsIHJldHVybnMgdGhlIHJvb3QKICB0
        aGF0IHNob3VsZCBiZSB1c2VkLgoKICBAcHJpdmF0ZQogIEBtZXRob2Qgbm9y
        bWFsaXplUGF0aAogIEBmb3IgRW1iZXIKICBAcGFyYW0gcm9vdCB7T2JqZWN0
        fQogIEBwYXJhbSBwYXRoIHtTdHJpbmd9CiAgQHBhcmFtIGRhdGEge0hhc2h9
        CiovCnZhciBub3JtYWxpemVQYXRoID0gRW1iZXIuSGFuZGxlYmFycy5ub3Jt
        YWxpemVQYXRoID0gZnVuY3Rpb24ocm9vdCwgcGF0aCwgZGF0YSkgewogIHZh
        ciBrZXl3b3JkcyA9IChkYXRhICYmIGRhdGEua2V5d29yZHMpIHx8IHt9LAog
        ICAgICBrZXl3b3JkLCBpc0tleXdvcmQ7CgogIC8vIEdldCB0aGUgZmlyc3Qg
        c2VnbWVudCBvZiB0aGUgcGF0aC4gRm9yIGV4YW1wbGUsIGlmIHRoZQogIC8v
        IHBhdGggaXMgImZvby5iYXIuYmF6IiwgcmV0dXJucyAiZm9vIi4KICBrZXl3
        b3JkID0gcGF0aC5zcGxpdCgnLicsIDEpWzBdOwoKICAvLyBUZXN0IHRvIHNl
        ZSBpZiB0aGUgZmlyc3QgcGF0aCBpcyBhIGtleXdvcmQgdGhhdCBoYXMgYmVl
        bgogIC8vIHBhc3NlZCBhbG9uZyBpbiB0aGUgdmlldydzIGRhdGEgaGFzaC4g
        SWYgc28sIHdlIHdpbGwgdHJlYXQKICAvLyB0aGF0IG9iamVjdCBhcyB0aGUg
        bmV3IHJvb3QuCiAgaWYgKGtleXdvcmRzLmhhc093blByb3BlcnR5KGtleXdv
        cmQpKSB7CiAgICAvLyBMb29rIHVwIHRoZSB2YWx1ZSBpbiB0aGUgdGVtcGxh
        dGUncyBkYXRhIGhhc2guCiAgICByb290ID0ga2V5d29yZHNba2V5d29yZF07
        CiAgICBpc0tleXdvcmQgPSB0cnVlOwoKICAgIC8vIEhhbmRsZSBjYXNlcyB3
        aGVyZSB0aGUgZW50aXJlIHBhdGggaXMgdGhlIHJlc2VydmVkCiAgICAvLyB3
        b3JkLiBJbiB0aGF0IGNhc2UsIHJldHVybiB0aGUgb2JqZWN0IGl0c2VsZi4K
        ICAgIGlmIChwYXRoID09PSBrZXl3b3JkKSB7CiAgICAgIHBhdGggPSAnJzsK
        ICAgIH0gZWxzZSB7CiAgICAgIC8vIFN0cmlwIHRoZSBrZXl3b3JkIGZyb20g
        dGhlIHBhdGggYW5kIGxvb2sgdXAKICAgICAgLy8gdGhlIHJlbWFpbmRlciBm
        cm9tIHRoZSBuZXdseSBmb3VuZCByb290LgogICAgICBwYXRoID0gcGF0aC5z
        dWJzdHIoa2V5d29yZC5sZW5ndGgrMSk7CiAgICB9CiAgfQoKICByZXR1cm4g
        eyByb290OiByb290LCBwYXRoOiBwYXRoLCBpc0tleXdvcmQ6IGlzS2V5d29y
        ZCB9Owp9OwoKCi8qKgogIExvb2t1cCBib3RoIG9uIHJvb3QgYW5kIG9uIHdp
        bmRvdy4gSWYgdGhlIHBhdGggc3RhcnRzIHdpdGgKICBhIGtleXdvcmQsIHRo
        ZSBjb3JyZXNwb25kaW5nIG9iamVjdCB3aWxsIGJlIGxvb2tlZCB1cCBpbiB0
        aGUKICB0ZW1wbGF0ZSdzIGRhdGEgaGFzaCBhbmQgdXNlZCB0byByZXNvbHZl
        IHRoZSBwYXRoLgoKICBAbWV0aG9kIGdldAogIEBmb3IgRW1iZXIuSGFuZGxl
        YmFycwogIEBwYXJhbSB7T2JqZWN0fSByb290IFRoZSBvYmplY3QgdG8gbG9v
        ayB1cCB0aGUgcHJvcGVydHkgb24KICBAcGFyYW0ge1N0cmluZ30gcGF0aCBU
        aGUgcGF0aCB0byBiZSBsb29rZWR1cAogIEBwYXJhbSB7T2JqZWN0fSBvcHRp
        b25zIFRoZSB0ZW1wbGF0ZSdzIG9wdGlvbiBoYXNoCiovCnZhciBoYW5kbGVi
        YXJzR2V0ID0gRW1iZXIuSGFuZGxlYmFycy5nZXQgPSBmdW5jdGlvbihyb290
        LCBwYXRoLCBvcHRpb25zKSB7CiAgdmFyIGRhdGEgPSBvcHRpb25zICYmIG9w
        dGlvbnMuZGF0YSwKICAgICAgbm9ybWFsaXplZFBhdGggPSBub3JtYWxpemVQ
        YXRoKHJvb3QsIHBhdGgsIGRhdGEpLAogICAgICB2YWx1ZTsKCiAgCiAgICBy
        b290ID0gbm9ybWFsaXplZFBhdGgucm9vdDsKICAgIHBhdGggPSBub3JtYWxp
        emVkUGF0aC5wYXRoOwoKICAgIHZhbHVlID0gRW1iZXIuZ2V0KHJvb3QsIHBh
        dGgpOwoKICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkICYmIHJvb3QgIT09
        IEVtYmVyLmxvb2t1cCAmJiBFbWJlci5pc0dsb2JhbFBhdGgocGF0aCkpIHsK
        ICAgICAgdmFsdWUgPSBFbWJlci5nZXQoRW1iZXIubG9va3VwLCBwYXRoKTsK
        ICAgIH0KICAKCiAgcmV0dXJuIHZhbHVlOwp9OwoKLyoqCiAgVGhpcyBtZXRo
        b2QgdXNlcyBgRW1iZXIuSGFuZGxlYmFycy5nZXRgIHRvIGxvb2t1cCBhIHZh
        bHVlLCB0aGVuIGVuc3VyZXMKICB0aGF0IHRoZSB2YWx1ZSBpcyBlc2NhcGVk
        IHByb3Blcmx5LgoKICBJZiBgdW5lc2NhcGVkYCBpcyBhIHRydXRoeSB2YWx1
        ZSB0aGVuIHRoZSBlc2NhcGluZyB3aWxsIG5vdCBiZSBwZXJmb3JtZWQuCgog
        IEBtZXRob2QgZ2V0RXNjYXBlZAogIEBmb3IgRW1iZXIuSGFuZGxlYmFycwog
        IEBwYXJhbSB7T2JqZWN0fSByb290IFRoZSBvYmplY3QgdG8gbG9vayB1cCB0
        aGUgcHJvcGVydHkgb24KICBAcGFyYW0ge1N0cmluZ30gcGF0aCBUaGUgcGF0
        aCB0byBiZSBsb29rZWR1cAogIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIFRo
        ZSB0ZW1wbGF0ZSdzIG9wdGlvbiBoYXNoCiovCkVtYmVyLkhhbmRsZWJhcnMu
        Z2V0RXNjYXBlZCA9IGZ1bmN0aW9uKHJvb3QsIHBhdGgsIG9wdGlvbnMpIHsK
        ICB2YXIgcmVzdWx0ID0gaGFuZGxlYmFyc0dldChyb290LCBwYXRoLCBvcHRp
        b25zKTsKCiAgaWYgKHJlc3VsdCA9PT0gbnVsbCB8fCByZXN1bHQgPT09IHVu
        ZGVmaW5lZCkgewogICAgcmVzdWx0ID0gIiI7CiAgfSBlbHNlIGlmICghKHJl
        c3VsdCBpbnN0YW5jZW9mIEhhbmRsZWJhcnMuU2FmZVN0cmluZykpIHsKICAg
        IHJlc3VsdCA9IFN0cmluZyhyZXN1bHQpOwogIH0KICBpZiAoIW9wdGlvbnMu
        aGFzaC51bmVzY2FwZWQpewogICAgcmVzdWx0ID0gSGFuZGxlYmFycy5VdGls
        cy5lc2NhcGVFeHByZXNzaW9uKHJlc3VsdCk7CiAgfQoKICByZXR1cm4gcmVz
        dWx0Owp9OwoKRW1iZXIuSGFuZGxlYmFycy5yZXNvbHZlUGFyYW1zID0gZnVu
        Y3Rpb24oY29udGV4dCwgcGFyYW1zLCBvcHRpb25zKSB7CiAgdmFyIHJlc29s
        dmVkUGFyYW1zID0gW10sIHR5cGVzID0gb3B0aW9ucy50eXBlcywgcGFyYW0s
        IHR5cGU7CgogIGZvciAodmFyIGk9MCwgbD1wYXJhbXMubGVuZ3RoOyBpPGw7
        IGkrKykgewogICAgcGFyYW0gPSBwYXJhbXNbaV07CiAgICB0eXBlID0gdHlw
        ZXNbaV07CgogICAgaWYgKHR5cGUgPT09ICdJRCcpIHsKICAgICAgcmVzb2x2
        ZWRQYXJhbXMucHVzaChoYW5kbGViYXJzR2V0KGNvbnRleHQsIHBhcmFtLCBv
        cHRpb25zKSk7CiAgICB9IGVsc2UgewogICAgICByZXNvbHZlZFBhcmFtcy5w
        dXNoKHBhcmFtKTsKICAgIH0KICB9CgogIHJldHVybiByZXNvbHZlZFBhcmFt
        czsKfTsKCkVtYmVyLkhhbmRsZWJhcnMucmVzb2x2ZUhhc2ggPSBmdW5jdGlv
        bihjb250ZXh0LCBoYXNoLCBvcHRpb25zKSB7CiAgdmFyIHJlc29sdmVkSGFz
        aCA9IHt9LCB0eXBlcyA9IG9wdGlvbnMuaGFzaFR5cGVzLCB0eXBlOwoKICBm
        b3IgKHZhciBrZXkgaW4gaGFzaCkgewogICAgaWYgKCFoYXNoLmhhc093blBy
        b3BlcnR5KGtleSkpIHsgY29udGludWU7IH0KCiAgICB0eXBlID0gdHlwZXNb
        a2V5XTsKCiAgICBpZiAodHlwZSA9PT0gJ0lEJykgewogICAgICByZXNvbHZl
        ZEhhc2hba2V5XSA9IGhhbmRsZWJhcnNHZXQoY29udGV4dCwgaGFzaFtrZXld
        LCBvcHRpb25zKTsKICAgIH0gZWxzZSB7CiAgICAgIHJlc29sdmVkSGFzaFtr
        ZXldID0gaGFzaFtrZXldOwogICAgfQogIH0KCiAgcmV0dXJuIHJlc29sdmVk
        SGFzaDsKfTsKCi8qKgogIFJlZ2lzdGVycyBhIGhlbHBlciBpbiBIYW5kbGVi
        YXJzIHRoYXQgd2lsbCBiZSBjYWxsZWQgaWYgbm8gcHJvcGVydHkgd2l0aCB0
        aGUKICBnaXZlbiBuYW1lIGNhbiBiZSBmb3VuZCBvbiB0aGUgY3VycmVudCBj
        b250ZXh0IG9iamVjdCwgYW5kIG5vIGhlbHBlciB3aXRoCiAgdGhhdCBuYW1l
        IGlzIHJlZ2lzdGVyZWQuCgogIFRoaXMgdGhyb3dzIGFuIGV4Y2VwdGlvbiB3
        aXRoIGEgbW9yZSBoZWxwZnVsIGVycm9yIG1lc3NhZ2Ugc28gdGhlIHVzZXIg
        Y2FuCiAgdHJhY2sgZG93biB3aGVyZSB0aGUgcHJvYmxlbSBpcyBoYXBwZW5p
        bmcuCgogIEBwcml2YXRlCiAgQG1ldGhvZCBoZWxwZXJNaXNzaW5nCiAgQGZv
        ciBFbWJlci5IYW5kbGViYXJzLmhlbHBlcnMKICBAcGFyYW0ge1N0cmluZ30g
        cGF0aAogIEBwYXJhbSB7SGFzaH0gb3B0aW9ucwoqLwpFbWJlci5IYW5kbGVi
        YXJzLnJlZ2lzdGVySGVscGVyKCdoZWxwZXJNaXNzaW5nJywgZnVuY3Rpb24o
        cGF0aCkgewogIHZhciBlcnJvciwgdmlldyA9ICIiOwoKICB2YXIgb3B0aW9u
        cyA9IGFyZ3VtZW50c1thcmd1bWVudHMubGVuZ3RoIC0gMV07CgogIHZhciBo
        ZWxwZXIgPSBFbWJlci5IYW5kbGViYXJzLnJlc29sdmVIZWxwZXIob3B0aW9u
        cy5kYXRhLnZpZXcuY29udGFpbmVyLCBwYXRoKTsKCiAgaWYgKGhlbHBlcikg
        ewogICAgcmV0dXJuIGhlbHBlci5hcHBseSh0aGlzLCBzbGljZS5jYWxsKGFy
        Z3VtZW50cywgMSkpOwogIH0KCiAgZXJyb3IgPSAiJUAgSGFuZGxlYmFycyBl
        cnJvcjogQ291bGQgbm90IGZpbmQgcHJvcGVydHkgJyVAJyBvbiBvYmplY3Qg
        JUAuIjsKICBpZiAob3B0aW9ucy5kYXRhKSB7CiAgICB2aWV3ID0gb3B0aW9u
        cy5kYXRhLnZpZXc7CiAgfQogIHRocm93IG5ldyBFbWJlci5FcnJvcihFbWJl
        ci5TdHJpbmcuZm10KGVycm9yLCBbdmlldywgcGF0aCwgdGhpc10pKTsKfSk7
        CgovKioKICBSZWdpc3RlcnMgYSBoZWxwZXIgaW4gSGFuZGxlYmFycyB0aGF0
        IHdpbGwgYmUgY2FsbGVkIGlmIG5vIHByb3BlcnR5IHdpdGggdGhlCiAgZ2l2
        ZW4gbmFtZSBjYW4gYmUgZm91bmQgb24gdGhlIGN1cnJlbnQgY29udGV4dCBv
        YmplY3QsIGFuZCBubyBoZWxwZXIgd2l0aAogIHRoYXQgbmFtZSBpcyByZWdp
        c3RlcmVkLgoKICBUaGlzIHRocm93cyBhbiBleGNlcHRpb24gd2l0aCBhIG1v
        cmUgaGVscGZ1bCBlcnJvciBtZXNzYWdlIHNvIHRoZSB1c2VyIGNhbgogIHRy
        YWNrIGRvd24gd2hlcmUgdGhlIHByb2JsZW0gaXMgaGFwcGVuaW5nLgoKICBA
        cHJpdmF0ZQogIEBtZXRob2QgaGVscGVyTWlzc2luZwogIEBmb3IgRW1iZXIu
        SGFuZGxlYmFycy5oZWxwZXJzCiAgQHBhcmFtIHtTdHJpbmd9IHBhdGgKICBA
        cGFyYW0ge0hhc2h9IG9wdGlvbnMKKi8KRW1iZXIuSGFuZGxlYmFycy5yZWdp
        c3RlckhlbHBlcignYmxvY2tIZWxwZXJNaXNzaW5nJywgZnVuY3Rpb24ocGF0
        aCkgewoKICB2YXIgb3B0aW9ucyA9IGFyZ3VtZW50c1thcmd1bWVudHMubGVu
        Z3RoIC0gMV07CgogIEVtYmVyLmFzc2VydCgiYGJsb2NrSGVscGVyTWlzc2lu
        Z2Agd2FzIGludm9rZWQgd2l0aG91dCBhIGhlbHBlciBuYW1lLCB3aGljaCAi
        ICsKICAgICAgICAgICAgICAgImlzIG1vc3QgbGlrZWx5IGR1ZSB0byBhIG1p
        c21hdGNoIGJldHdlZW4gdGhlIHZlcnNpb24gb2YgIiArCiAgICAgICAgICAg
        ICAgICJFbWJlci5qcyB5b3UncmUgcnVubmluZyBub3cgYW5kIHRoZSBvbmUg
        dXNlZCB0byBwcmVjb21waWxlIHlvdXIgIiArCiAgICAgICAgICAgICAgICJ0
        ZW1wbGF0ZXMuIFBsZWFzZSBtYWtlIHN1cmUgdGhlIHZlcnNpb24gb2YgIiAr
        CiAgICAgICAgICAgICAgICJgZW1iZXItaGFuZGxlYmFycy1jb21waWxlcmAg
        eW91J3JlIHVzaW5nIGlzIHVwIHRvIGRhdGUuIiwgcGF0aCk7CgogIHZhciBo
        ZWxwZXIgPSBFbWJlci5IYW5kbGViYXJzLnJlc29sdmVIZWxwZXIob3B0aW9u
        cy5kYXRhLnZpZXcuY29udGFpbmVyLCBwYXRoKTsKCiAgaWYgKGhlbHBlcikg
        ewogICAgcmV0dXJuIGhlbHBlci5hcHBseSh0aGlzLCBzbGljZS5jYWxsKGFy
        Z3VtZW50cywgMSkpOwogIH0gZWxzZSB7CiAgICByZXR1cm4gSGFuZGxlYmFy
        cy5oZWxwZXJzLmhlbHBlck1pc3NpbmcuY2FsbCh0aGlzLCBwYXRoKTsKICB9
        CgogIHJldHVybiBIYW5kbGViYXJzLmhlbHBlcnMuYmxvY2tIZWxwZXJNaXNz
        aW5nLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0pOwoKLyoqCiAgUmVnaXN0
        ZXIgYSBib3VuZCBoYW5kbGViYXJzIGhlbHBlci4gQm91bmQgaGVscGVycyBi
        ZWhhdmUgc2ltaWxhcmx5IHRvIHJlZ3VsYXIKICBoYW5kbGViYXJzIGhlbHBl
        cnMsIHdpdGggdGhlIGFkZGVkIGFiaWxpdHkgdG8gcmUtcmVuZGVyIHdoZW4g
        dGhlIHVuZGVybHlpbmcgZGF0YQogIGNoYW5nZXMuCgogICMjIFNpbXBsZSBl
        eGFtcGxlCgogIGBgYGphdmFzY3JpcHQKICBFbWJlci5IYW5kbGViYXJzLnJl
        Z2lzdGVyQm91bmRIZWxwZXIoJ2NhcGl0YWxpemUnLCBmdW5jdGlvbih2YWx1
        ZSkgewogICAgcmV0dXJuIHZhbHVlLnRvVXBwZXJDYXNlKCk7CiAgfSk7CiAg
        YGBgCgogIFRoZSBhYm92ZSBib3VuZCBoZWxwZXIgY2FuIGJlIHVzZWQgaW5z
        aWRlIG9mIHRlbXBsYXRlcyBhcyBmb2xsb3dzOgoKICBgYGBoYW5kbGViYXJz
        CiAge3tjYXBpdGFsaXplIG5hbWV9fQogIGBgYAoKICBJbiB0aGlzIGNhc2Us
        IHdoZW4gdGhlIGBuYW1lYCBwcm9wZXJ0eSBvZiB0aGUgdGVtcGxhdGUncyBj
        b250ZXh0IGNoYW5nZXMsCiAgdGhlIHJlbmRlcmVkIHZhbHVlIG9mIHRoZSBo
        ZWxwZXIgd2lsbCB1cGRhdGUgdG8gcmVmbGVjdCB0aGlzIGNoYW5nZS4KCiAg
        IyMgRXhhbXBsZSB3aXRoIG9wdGlvbnMKCiAgTGlrZSBub3JtYWwgaGFuZGxl
        YmFycyBoZWxwZXJzLCBib3VuZCBoZWxwZXJzIGhhdmUgYWNjZXNzIHRvIHRo
        ZSBvcHRpb25zCiAgcGFzc2VkIGludG8gdGhlIGhlbHBlciBjYWxsLgoKICBg
        YGBqYXZhc2NyaXB0CiAgRW1iZXIuSGFuZGxlYmFycy5yZWdpc3RlckJvdW5k
        SGVscGVyKCdyZXBlYXQnLCBmdW5jdGlvbih2YWx1ZSwgb3B0aW9ucykgewog
        ICAgdmFyIGNvdW50ID0gb3B0aW9ucy5oYXNoLmNvdW50OwogICAgdmFyIGEg
        PSBbXTsKICAgIHdoaWxlKGEubGVuZ3RoIDwgY291bnQpIHsKICAgICAgICBh
        LnB1c2godmFsdWUpOwogICAgfQogICAgcmV0dXJuIGEuam9pbignJyk7CiAg
        fSk7CiAgYGBgCgogIFRoaXMgaGVscGVyIGNvdWxkIGJlIHVzZWQgaW4gYSB0
        ZW1wbGF0ZSBhcyBmb2xsb3dzOgoKICBgYGBoYW5kbGViYXJzCiAge3tyZXBl
        YXQgdGV4dCBjb3VudD0zfX0KICBgYGAKCiAgIyMgRXhhbXBsZSB3aXRoIGJv
        dW5kIG9wdGlvbnMKCiAgQm91bmQgaGFzaCBvcHRpb25zIGFyZSBhbHNvIHN1
        cHBvcnRlZC4gRXhhbXBsZToKCiAgYGBgaGFuZGxlYmFycwogIHt7cmVwZWF0
        IHRleHQgY291bnRCaW5kaW5nPSJudW1SZXBlYXRzIn19CiAgYGBgCgogIElu
        IHRoaXMgZXhhbXBsZSwgY291bnQgd2lsbCBiZSBib3VuZCB0byB0aGUgdmFs
        dWUgb2YKICB0aGUgYG51bVJlcGVhdHNgIHByb3BlcnR5IG9uIHRoZSBjb250
        ZXh0LiBJZiB0aGF0IHByb3BlcnR5CiAgY2hhbmdlcywgdGhlIGhlbHBlciB3
        aWxsIGJlIHJlLXJlbmRlcmVkLgoKICAjIyBFeGFtcGxlIHdpdGggZXh0cmEg
        ZGVwZW5kZW5jaWVzCgogIFRoZSBgRW1iZXIuSGFuZGxlYmFycy5yZWdpc3Rl
        ckJvdW5kSGVscGVyYCBtZXRob2QgdGFrZXMgYSB2YXJpYWJsZSBsZW5ndGgK
        ICB0aGlyZCBwYXJhbWV0ZXIgd2hpY2ggaW5kaWNhdGVzIGV4dHJhIGRlcGVu
        ZGVuY2llcyBvbiB0aGUgcGFzc2VkIGluIHZhbHVlLgogIFRoaXMgYWxsb3dz
        IHRoZSBoYW5kbGViYXJzIGhlbHBlciB0byB1cGRhdGUgd2hlbiB0aGVzZSBk
        ZXBlbmRlbmNpZXMgY2hhbmdlLgoKICBgYGBqYXZhc2NyaXB0CiAgRW1iZXIu
        SGFuZGxlYmFycy5yZWdpc3RlckJvdW5kSGVscGVyKCdjYXBpdGFsaXplTmFt
        ZScsIGZ1bmN0aW9uKHZhbHVlKSB7CiAgICByZXR1cm4gdmFsdWUuZ2V0KCdu
        YW1lJykudG9VcHBlckNhc2UoKTsKICB9LCAnbmFtZScpOwogIGBgYAoKICAj
        IyBFeGFtcGxlIHdpdGggbXVsdGlwbGUgYm91bmQgcHJvcGVydGllcwoKICBg
        RW1iZXIuSGFuZGxlYmFycy5yZWdpc3RlckJvdW5kSGVscGVyYCBzdXBwb3J0
        cyBiaW5kaW5nIHRvCiAgbXVsdGlwbGUgcHJvcGVydGllcywgZS5nLjoKCiAg
        YGBgamF2YXNjcmlwdAogIEVtYmVyLkhhbmRsZWJhcnMucmVnaXN0ZXJCb3Vu
        ZEhlbHBlcignY29uY2F0ZW5hdGUnLCBmdW5jdGlvbigpIHsKICAgIHZhciB2
        YWx1ZXMgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMs
        IDAsIC0xKTsKICAgIHJldHVybiB2YWx1ZXMuam9pbignfHwnKTsKICB9KTsK
        ICBgYGAKCiAgV2hpY2ggYWxsb3dzIGZvciB0ZW1wbGF0ZSBzeW50YXggc3Vj
        aCBhcyBge3tjb25jYXRlbmF0ZSBwcm9wMSBwcm9wMn19YCBvcgogIGB7e2Nv
        bmNhdGVuYXRlIHByb3AxIHByb3AyIHByb3AzfX1gLiBJZiBhbnkgb2YgdGhl
        IHByb3BlcnRpZXMgY2hhbmdlLAogIHRoZSBoZWxwciB3aWxsIHJlLXJlbmRl
        ci4gIE5vdGUgdGhhdCBkZXBlbmRlbmN5IGtleXMgY2Fubm90IGJlCiAgdXNp
        bmcgaW4gY29uanVuY3Rpb24gd2l0aCBtdWx0aS1wcm9wZXJ0eSBoZWxwZXJz
        LCBzaW5jZSBpdCBpcyBhbWJpZ3VvdXMKICB3aGljaCBwcm9wZXJ0eSB0aGUg
        ZGVwZW5kZW50IGtleXMgd291bGQgYmVsb25nIHRvLgoKICAjIyBVc2Ugd2l0
        aCB1bmJvdW5kIGhlbHBlcgoKICBUaGUgYHt7dW5ib3VuZH19YCBoZWxwZXIg
        Y2FuIGJlIHVzZWQgd2l0aCBib3VuZCBoZWxwZXIgaW52b2NhdGlvbnMKICB0
        byByZW5kZXIgdGhlbSBpbiB0aGVpciB1bmJvdW5kIGZvcm0sIGUuZy4KCiAg
        YGBgaGFuZGxlYmFycwogIHt7dW5ib3VuZCBjYXBpdGFsaXplIG5hbWV9fQog
        IGBgYAoKICBJbiB0aGlzIGV4YW1wbGUsIGlmIHRoZSBuYW1lIHByb3BlcnR5
        IGNoYW5nZXMsIHRoZSBoZWxwZXIKICB3aWxsIG5vdCByZS1yZW5kZXIuCgog
        ICMjIFVzZSB3aXRoIGJsb2NrcyBub3Qgc3VwcG9ydGVkCgogIEJvdW5kIGhl
        bHBlcnMgZG8gbm90IHN1cHBvcnQgdXNlIHdpdGggSGFuZGxlYmFycyBibG9j
        a3Mgb3IKICB0aGUgYWRkaXRpb24gb2YgY2hpbGQgdmlld3Mgb2YgYW55IGtp
        bmQuCgogIEBtZXRob2QgcmVnaXN0ZXJCb3VuZEhlbHBlcgogIEBmb3IgRW1i
        ZXIuSGFuZGxlYmFycwogIEBwYXJhbSB7U3RyaW5nfSBuYW1lCiAgQHBhcmFt
        IHtGdW5jdGlvbn0gZnVuY3Rpb24KICBAcGFyYW0ge1N0cmluZ30gZGVwZW5k
        ZW50S2V5cyoKKi8KRW1iZXIuSGFuZGxlYmFycy5yZWdpc3RlckJvdW5kSGVs
        cGVyID0gZnVuY3Rpb24obmFtZSwgZm4pIHsKICB2YXIgYm91bmRIZWxwZXJB
        cmdzID0gc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpLAogICAgICBib3VuZEZu
        ID0gRW1iZXIuSGFuZGxlYmFycy5tYWtlQm91bmRIZWxwZXIuYXBwbHkodGhp
        cywgYm91bmRIZWxwZXJBcmdzKTsKICBFbWJlci5IYW5kbGViYXJzLnJlZ2lz
        dGVySGVscGVyKG5hbWUsIGJvdW5kRm4pOwp9OwoKLyoqCiAgQSAobW9zdGx5
        KSBwcml2YXRlIGhlbHBlciBmdW5jdGlvbiB0byBgcmVnaXN0ZXJCb3VuZEhl
        bHBlcmAuIFRha2VzIHRoZQogIHByb3ZpZGVkIEhhbmRsZWJhcnMgaGVscGVy
        IGZ1bmN0aW9uIGZuIGFuZCByZXR1cm5zIGl0IGluIHdyYXBwZWQKICBib3Vu
        ZCBoZWxwZXIgZm9ybS4KCiAgVGhlIG1haW4gdXNlIGNhc2UgZm9yIHVzaW5n
        IHRoaXMgb3V0c2lkZSBvZiBgcmVnaXN0ZXJCb3VuZEhlbHBlcmAKICBpcyBm
        b3IgcmVnaXN0ZXJpbmcgaGVscGVycyBvbiB0aGUgY29udGFpbmVyOgoKICBg
        YGBqcwogIHZhciBib3VuZEhlbHBlckZuID0gRW1iZXIuSGFuZGxlYmFycy5t
        YWtlQm91bmRIZWxwZXIoZnVuY3Rpb24od29yZCkgewogICAgcmV0dXJuIHdv
        cmQudG9VcHBlckNhc2UoKTsKICB9KTsKCiAgY29udGFpbmVyLnJlZ2lzdGVy
        KCdoZWxwZXI6bXktYm91bmQtaGVscGVyJywgYm91bmRIZWxwZXJGbik7CiAg
        YGBgCgogIEluIHRoZSBhYm92ZSBleGFtcGxlLCBpZiB0aGUgaGVscGVyIGZ1
        bmN0aW9uIGhhZG4ndCBiZWVuIHdyYXBwZWQgaW4KICBgbWFrZUJvdW5kSGVs
        cGVyYCwgdGhlIHJlZ2lzdGVyZWQgaGVscGVyIHdvdWxkIGJlIHVuYm91bmQu
        CgogIEBwcml2YXRlCiAgQG1ldGhvZCBtYWtlQm91bmRIZWxwZXIKICBAZm9y
        IEVtYmVyLkhhbmRsZWJhcnMKICBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jdGlv
        bgogIEBwYXJhbSB7U3RyaW5nfSBkZXBlbmRlbnRLZXlzKgoqLwpFbWJlci5I
        YW5kbGViYXJzLm1ha2VCb3VuZEhlbHBlciA9IGZ1bmN0aW9uKGZuKSB7CiAg
        dmFyIGRlcGVuZGVudEtleXMgPSBzbGljZS5jYWxsKGFyZ3VtZW50cywgMSk7
        CgogIGZ1bmN0aW9uIGhlbHBlcigpIHsKICAgIHZhciBwcm9wZXJ0aWVzID0g
        c2xpY2UuY2FsbChhcmd1bWVudHMsIDAsIC0xKSwKICAgICAgbnVtUHJvcGVy
        dGllcyA9IHByb3BlcnRpZXMubGVuZ3RoLAogICAgICBvcHRpb25zID0gYXJn
        dW1lbnRzW2FyZ3VtZW50cy5sZW5ndGggLSAxXSwKICAgICAgbm9ybWFsaXpl
        ZFByb3BlcnRpZXMgPSBbXSwKICAgICAgZGF0YSA9IG9wdGlvbnMuZGF0YSwK
        ICAgICAgdHlwZXMgPSBkYXRhLmlzVW5ib3VuZCA/IHNsaWNlLmNhbGwob3B0
        aW9ucy50eXBlcywgMSkgOiBvcHRpb25zLnR5cGVzLAogICAgICBoYXNoID0g
        b3B0aW9ucy5oYXNoLAogICAgICB2aWV3ID0gZGF0YS52aWV3LAogICAgICBj
        b250ZXh0cyA9IG9wdGlvbnMuY29udGV4dHMsCiAgICAgIGN1cnJlbnRDb250
        ZXh0ID0gKGNvbnRleHRzICYmIGNvbnRleHRzLmxlbmd0aCkgPyBjb250ZXh0
        c1swXSA6IHRoaXMsCiAgICAgIHByZWZpeFBhdGhGb3JEZXBlbmRlbnRLZXlz
        ID0gJycsCiAgICAgIGxvYywgbGVuLCBoYXNoT3B0aW9uLAogICAgICBib3Vu
        ZE9wdGlvbiwgcHJvcGVydHksCiAgICAgIG5vcm1hbGl6ZWRWYWx1ZSA9IEVt
        YmVyLl9TaW1wbGVIYW5kbGViYXJzVmlldy5wcm90b3R5cGUubm9ybWFsaXpl
        ZFZhbHVlOwoKICAgIEVtYmVyLmFzc2VydCgicmVnaXN0ZXJCb3VuZEhlbHBl
        ci1nZW5lcmF0ZWQgaGVscGVycyBkbyBub3Qgc3VwcG9ydCB1c2Ugd2l0aCBI
        YW5kbGViYXJzIGJsb2Nrcy4iLCAhb3B0aW9ucy5mbik7CgogICAgLy8gRGV0
        ZWN0IGJvdW5kIG9wdGlvbnMgKGUuZy4gY291bnRCaW5kaW5nPSJvdGhlckNv
        dW50IikKICAgIHZhciBib3VuZE9wdGlvbnMgPSBoYXNoLmJvdW5kT3B0aW9u
        cyA9IHt9OwogICAgZm9yIChoYXNoT3B0aW9uIGluIGhhc2gpIHsKICAgICAg
        aWYgKEVtYmVyLklTX0JJTkRJTkcudGVzdChoYXNoT3B0aW9uKSkgewogICAg
        ICAgIC8vIExvcCBvZmYgJ0JpbmRpbmcnIHN1ZmZpeC4KICAgICAgICBib3Vu
        ZE9wdGlvbnNbaGFzaE9wdGlvbi5zbGljZSgwLCAtNyldID0gaGFzaFtoYXNo
        T3B0aW9uXTsKICAgICAgfQogICAgfQoKICAgIC8vIEV4cG9zZSBwcm9wZXJ0
        eSBuYW1lcyBvbiBkYXRhLnByb3BlcnRpZXMgb2JqZWN0LgogICAgdmFyIHdh
        dGNoZWRQcm9wZXJ0aWVzID0gW107CiAgICBkYXRhLnByb3BlcnRpZXMgPSBb
        XTsKICAgIGZvciAobG9jID0gMDsgbG9jIDwgbnVtUHJvcGVydGllczsgKyts
        b2MpIHsKICAgICAgZGF0YS5wcm9wZXJ0aWVzLnB1c2gocHJvcGVydGllc1ts
        b2NdKTsKICAgICAgaWYgKHR5cGVzW2xvY10gPT09ICdJRCcpIHsKICAgICAg
        ICB2YXIgbm9ybWFsaXplZFByb3AgPSBub3JtYWxpemVQYXRoKGN1cnJlbnRD
        b250ZXh0LCBwcm9wZXJ0aWVzW2xvY10sIGRhdGEpOwogICAgICAgIG5vcm1h
        bGl6ZWRQcm9wZXJ0aWVzLnB1c2gobm9ybWFsaXplZFByb3ApOwogICAgICAg
        IHdhdGNoZWRQcm9wZXJ0aWVzLnB1c2gobm9ybWFsaXplZFByb3ApOwogICAg
        ICB9IGVsc2UgewogICAgICAgIGlmKGRhdGEuaXNVbmJvdW5kKSB7CiAgICAg
        ICAgICBub3JtYWxpemVkUHJvcGVydGllcy5wdXNoKHtwYXRoOiBwcm9wZXJ0
        aWVzW2xvY119KTsKICAgICAgICB9ZWxzZSB7CiAgICAgICAgICBub3JtYWxp
        emVkUHJvcGVydGllcy5wdXNoKG51bGwpOwogICAgICAgIH0KICAgICAgfQog
        ICAgfQoKICAgIC8vIEhhbmRsZSBjYXNlIHdoZW4gaGVscGVyIGludm9jYXRp
        b24gaXMgcHJlY2VkZWQgYnkgYHVuYm91bmRgLCBlLmcuCiAgICAvLyB7e3Vu
        Ym91bmQgbXlIZWxwZXIgZm9vfX0KICAgIGlmIChkYXRhLmlzVW5ib3VuZCkg
        ewogICAgICByZXR1cm4gZXZhbHVhdGVVbmJvdW5kSGVscGVyKHRoaXMsIGZu
        LCBub3JtYWxpemVkUHJvcGVydGllcywgb3B0aW9ucyk7CiAgICB9CgogICAg
        dmFyIGJpbmRWaWV3ID0gbmV3IEVtYmVyLl9TaW1wbGVIYW5kbGViYXJzVmll
        dyhudWxsLCBudWxsLCAhb3B0aW9ucy5oYXNoLnVuZXNjYXBlZCwgb3B0aW9u
        cy5kYXRhKTsKCiAgICAvLyBPdmVycmlkZSBTaW1wbGVIYW5kbGViYXJzVmll
        dydzIG1ldGhvZCBmb3IgZ2VuZXJhdGluZyB0aGUgdmlldydzIGNvbnRlbnQu
        CiAgICBiaW5kVmlldy5ub3JtYWxpemVkVmFsdWUgPSBmdW5jdGlvbigpIHsK
        ICAgICAgdmFyIGFyZ3MgPSBbXSwgYm91bmRPcHRpb247CgogICAgICAvLyBD
        b3B5IG92ZXIgYm91bmQgaGFzaCBvcHRpb25zLgogICAgICBmb3IgKGJvdW5k
        T3B0aW9uIGluIGJvdW5kT3B0aW9ucykgewogICAgICAgIGlmICghYm91bmRP
        cHRpb25zLmhhc093blByb3BlcnR5KGJvdW5kT3B0aW9uKSkgeyBjb250aW51
        ZTsgfQogICAgICAgIHByb3BlcnR5ID0gbm9ybWFsaXplUGF0aChjdXJyZW50
        Q29udGV4dCwgYm91bmRPcHRpb25zW2JvdW5kT3B0aW9uXSwgZGF0YSk7CiAg
        ICAgICAgYmluZFZpZXcucGF0aCA9IHByb3BlcnR5LnBhdGg7CiAgICAgICAg
        YmluZFZpZXcucGF0aFJvb3QgPSBwcm9wZXJ0eS5yb290OwogICAgICAgIGhh
        c2hbYm91bmRPcHRpb25dID0gbm9ybWFsaXplZFZhbHVlLmNhbGwoYmluZFZp
        ZXcpOwogICAgICB9CgogICAgICBmb3IgKGxvYyA9IDA7IGxvYyA8IG51bVBy
        b3BlcnRpZXM7ICsrbG9jKSB7CiAgICAgICAgcHJvcGVydHkgPSBub3JtYWxp
        emVkUHJvcGVydGllc1tsb2NdOwogICAgICAgIGlmIChwcm9wZXJ0eSkgewog
        ICAgICAgICAgYmluZFZpZXcucGF0aCA9IHByb3BlcnR5LnBhdGg7CiAgICAg
        ICAgICBiaW5kVmlldy5wYXRoUm9vdCA9IHByb3BlcnR5LnJvb3Q7CiAgICAg
        ICAgICBhcmdzLnB1c2gobm9ybWFsaXplZFZhbHVlLmNhbGwoYmluZFZpZXcp
        KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgYXJncy5wdXNoKHByb3Bl
        cnRpZXNbbG9jXSk7CiAgICAgICAgfQogICAgICB9CiAgICAgIGFyZ3MucHVz
        aChvcHRpb25zKTsKCiAgICAgIC8vIFJ1biB0aGUgc3VwcGxpZWQgaGVscGVy
        IGZ1bmN0aW9uLgogICAgICByZXR1cm4gZm4uYXBwbHkoY3VycmVudENvbnRl
        eHQsIGFyZ3MpOwogICAgfTsKCiAgICB2aWV3LmFwcGVuZENoaWxkKGJpbmRW
        aWV3KTsKCiAgICAvLyBBc3NlbWJsZSBsaXN0IG9mIHdhdGNoZWQgcHJvcGVy
        dGllcyB0aGF0J2xsIHJlLXJlbmRlciB0aGlzIGhlbHBlci4KICAgIGZvciAo
        Ym91bmRPcHRpb24gaW4gYm91bmRPcHRpb25zKSB7CiAgICAgIGlmIChib3Vu
        ZE9wdGlvbnMuaGFzT3duUHJvcGVydHkoYm91bmRPcHRpb24pKSB7CiAgICAg
        ICAgd2F0Y2hlZFByb3BlcnRpZXMucHVzaChub3JtYWxpemVQYXRoKGN1cnJl
        bnRDb250ZXh0LCBib3VuZE9wdGlvbnNbYm91bmRPcHRpb25dLCBkYXRhKSk7
        CiAgICAgIH0KICAgIH0KCiAgICAvLyBPYnNlcnZlIGVhY2ggcHJvcGVydHku
        CiAgICBmb3IgKGxvYyA9IDAsIGxlbiA9IHdhdGNoZWRQcm9wZXJ0aWVzLmxl
        bmd0aDsgbG9jIDwgbGVuOyArK2xvYykgewogICAgICBwcm9wZXJ0eSA9IHdh
        dGNoZWRQcm9wZXJ0aWVzW2xvY107CiAgICAgIHZpZXcucmVnaXN0ZXJPYnNl
        cnZlcihwcm9wZXJ0eS5yb290LCBwcm9wZXJ0eS5wYXRoLCBiaW5kVmlldywg
        YmluZFZpZXcucmVyZW5kZXIpOwogICAgfQoKICAgIGlmICh0eXBlc1swXSAh
        PT0gJ0lEJyB8fCBub3JtYWxpemVkUHJvcGVydGllcy5sZW5ndGggPT09IDAp
        IHsKICAgICAgcmV0dXJuOwogICAgfQoKICAgIC8vIEFkZCBkZXBlbmRlbnQg
        a2V5IG9ic2VydmVycyB0byB0aGUgZmlyc3QgcGFyYW0KICAgIHZhciBub3Jt
        YWxpemVkID0gbm9ybWFsaXplZFByb3BlcnRpZXNbMF0sCiAgICAgICAgcGF0
        aFJvb3QgPSBub3JtYWxpemVkLnJvb3QsCiAgICAgICAgcGF0aCA9IG5vcm1h
        bGl6ZWQucGF0aDsKCiAgICBpZighRW1iZXIuaXNFbXB0eShwYXRoKSkgewog
        ICAgICBwcmVmaXhQYXRoRm9yRGVwZW5kZW50S2V5cyA9IHBhdGggKyAnLic7
        CiAgICB9CiAgICBmb3IgKHZhciBpPTAsIGw9ZGVwZW5kZW50S2V5cy5sZW5n
        dGg7IGk8bDsgaSsrKSB7CiAgICAgIHZpZXcucmVnaXN0ZXJPYnNlcnZlcihw
        YXRoUm9vdCwgcHJlZml4UGF0aEZvckRlcGVuZGVudEtleXMgKyBkZXBlbmRl
        bnRLZXlzW2ldLCBiaW5kVmlldywgYmluZFZpZXcucmVyZW5kZXIpOwogICAg
        fQogIH0KCiAgaGVscGVyLl9yYXdGdW5jdGlvbiA9IGZuOwogIHJldHVybiBo
        ZWxwZXI7Cn07CgovKioKICBSZW5kZXJzIHRoZSB1bmJvdW5kIGZvcm0gb2Yg
        YW4gb3RoZXJ3aXNlIGJvdW5kIGhlbHBlciBmdW5jdGlvbi4KCiAgQHByaXZh
        dGUKICBAbWV0aG9kIGV2YWx1YXRlVW5ib3VuZEhlbHBlcgogIEBwYXJhbSB7
        RnVuY3Rpb259IGZuCiAgQHBhcmFtIHtPYmplY3R9IGNvbnRleHQKICBAcGFy
        YW0ge0FycmF5fSBub3JtYWxpemVkUHJvcGVydGllcwogIEBwYXJhbSB7U3Ry
        aW5nfSBvcHRpb25zCiovCmZ1bmN0aW9uIGV2YWx1YXRlVW5ib3VuZEhlbHBl
        cihjb250ZXh0LCBmbiwgbm9ybWFsaXplZFByb3BlcnRpZXMsIG9wdGlvbnMp
        IHsKICB2YXIgYXJncyA9IFtdLAogICBoYXNoID0gb3B0aW9ucy5oYXNoLAog
        ICBib3VuZE9wdGlvbnMgPSBoYXNoLmJvdW5kT3B0aW9ucywKICAgdHlwZXMg
        PSBzbGljZS5jYWxsKG9wdGlvbnMudHlwZXMsIDEpLAogICBsb2MsCiAgIGxl
        biwKICAgcHJvcGVydHksCiAgIHByb3BlcnR5VHlwZSwKICAgYm91bmRPcHRp
        b247CgogIGZvciAoYm91bmRPcHRpb24gaW4gYm91bmRPcHRpb25zKSB7CiAg
        ICBpZiAoIWJvdW5kT3B0aW9ucy5oYXNPd25Qcm9wZXJ0eShib3VuZE9wdGlv
        bikpIHsgY29udGludWU7IH0KICAgIGhhc2hbYm91bmRPcHRpb25dID0gRW1i
        ZXIuSGFuZGxlYmFycy5nZXQoY29udGV4dCwgYm91bmRPcHRpb25zW2JvdW5k
        T3B0aW9uXSwgb3B0aW9ucyk7CiAgfQoKICBmb3IobG9jID0gMCwgbGVuID0g
        bm9ybWFsaXplZFByb3BlcnRpZXMubGVuZ3RoOyBsb2MgPCBsZW47ICsrbG9j
        KSB7CiAgICBwcm9wZXJ0eSA9IG5vcm1hbGl6ZWRQcm9wZXJ0aWVzW2xvY107
        CiAgICBwcm9wZXJ0eVR5cGUgPSB0eXBlc1tsb2NdOwogICAgaWYocHJvcGVy
        dHlUeXBlID09PSAiSUQiKSB7CiAgICAgIGFyZ3MucHVzaChFbWJlci5IYW5k
        bGViYXJzLmdldChwcm9wZXJ0eS5yb290LCBwcm9wZXJ0eS5wYXRoLCBvcHRp
        b25zKSk7CiAgICB9IGVsc2UgewogICAgICBhcmdzLnB1c2gocHJvcGVydHku
        cGF0aCk7CiAgICB9CiAgfQogIGFyZ3MucHVzaChvcHRpb25zKTsKICByZXR1
        cm4gZm4uYXBwbHkoY29udGV4dCwgYXJncyk7Cn0KCi8qKgogIE92ZXJyaWRl
        cyBIYW5kbGViYXJzLnRlbXBsYXRlIHNvIHRoYXQgd2UgY2FuIGRpc3Rpbmd1
        aXNoCiAgdXNlci1jcmVhdGVkLCB0b3AtbGV2ZWwgdGVtcGxhdGVzIGZyb20g
        aW5uZXIgY29udGV4dHMuCgogIEBwcml2YXRlCiAgQG1ldGhvZCB0ZW1wbGF0
        ZQogIEBmb3IgRW1iZXIuSGFuZGxlYmFycwogIEBwYXJhbSB7U3RyaW5nfSBz
        cGVjCiovCkVtYmVyLkhhbmRsZWJhcnMudGVtcGxhdGUgPSBmdW5jdGlvbihz
        cGVjKSB7CiAgdmFyIHQgPSBvcmlnaW5hbFRlbXBsYXRlKHNwZWMpOwogIHQu
        aXNUb3AgPSB0cnVlOwogIHJldHVybiB0Owp9OwoKfSkoKTsKCgoKKGZ1bmN0
        aW9uKCkgewovKioKICBNYXJrIGEgc3RyaW5nIGFzIHNhZmUgZm9yIHVuZXNj
        YXBlZCBvdXRwdXQgd2l0aCBIYW5kbGViYXJzLiBJZiB5b3UKICByZXR1cm4g
        SFRNTCBmcm9tIGEgSGFuZGxlYmFycyBoZWxwZXIsIHVzZSB0aGlzIGZ1bmN0
        aW9uIHRvCiAgZW5zdXJlIEhhbmRsZWJhcnMgZG9lcyBub3QgZXNjYXBlIHRo
        ZSBIVE1MLgoKICBgYGBqYXZhc2NyaXB0CiAgRW1iZXIuU3RyaW5nLmh0bWxT
        YWZlKCc8ZGl2PnNvbWVTdHJpbmc8L2Rpdj4nKQogIGBgYAoKICBAbWV0aG9k
        IGh0bWxTYWZlCiAgQGZvciBFbWJlci5TdHJpbmcKICBAc3RhdGljCiAgQHJl
        dHVybiB7SGFuZGxlYmFycy5TYWZlU3RyaW5nfSBhIHN0cmluZyB0aGF0IHdp
        bGwgbm90IGJlIGh0bWwgZXNjYXBlZCBieSBIYW5kbGViYXJzCiovCkVtYmVy
        LlN0cmluZy5odG1sU2FmZSA9IGZ1bmN0aW9uKHN0cikgewogIHJldHVybiBu
        ZXcgSGFuZGxlYmFycy5TYWZlU3RyaW5nKHN0cik7Cn07Cgp2YXIgaHRtbFNh
        ZmUgPSBFbWJlci5TdHJpbmcuaHRtbFNhZmU7CgppZiAoRW1iZXIuRVhURU5E
        X1BST1RPVFlQRVMgPT09IHRydWUgfHwgRW1iZXIuRVhURU5EX1BST1RPVFlQ
        RVMuU3RyaW5nKSB7CgogIC8qKgogICAgTWFyayBhIHN0cmluZyBhcyBiZWlu
        ZyBzYWZlIGZvciB1bmVzY2FwZWQgb3V0cHV0IHdpdGggSGFuZGxlYmFycy4K
        CiAgICBgYGBqYXZhc2NyaXB0CiAgICAnPGRpdj5zb21lU3RyaW5nPC9kaXY+
        Jy5odG1sU2FmZSgpCiAgICBgYGAKCiAgICBTZWUgW0VtYmVyLlN0cmluZy5o
        dG1sU2FmZV0oL2FwaS9jbGFzc2VzL0VtYmVyLlN0cmluZy5odG1sI21ldGhv
        ZF9odG1sU2FmZSkuCgogICAgQG1ldGhvZCBodG1sU2FmZQogICAgQGZvciBT
        dHJpbmcKICAgIEByZXR1cm4ge0hhbmRsZWJhcnMuU2FmZVN0cmluZ30gYSBz
        dHJpbmcgdGhhdCB3aWxsIG5vdCBiZSBodG1sIGVzY2FwZWQgYnkgSGFuZGxl
        YmFycwogICovCiAgU3RyaW5nLnByb3RvdHlwZS5odG1sU2FmZSA9IGZ1bmN0
        aW9uKCkgewogICAgcmV0dXJuIGh0bWxTYWZlKHRoaXMpOwogIH07Cn0KCn0p
        KCk7CgoKCihmdW5jdGlvbigpIHsKRW1iZXIuSGFuZGxlYmFycy5yZXNvbHZl
        UGF0aHMgPSBmdW5jdGlvbihvcHRpb25zKSB7CiAgdmFyIHJldCA9IFtdLAog
        ICAgICBjb250ZXh0cyA9IG9wdGlvbnMuY29udGV4dHMsCiAgICAgIHJvb3Rz
        ID0gb3B0aW9ucy5yb290cywKICAgICAgZGF0YSA9IG9wdGlvbnMuZGF0YTsK
        CiAgZm9yICh2YXIgaT0wLCBsPWNvbnRleHRzLmxlbmd0aDsgaTxsOyBpKysp
        IHsKICAgIHJldC5wdXNoKCBFbWJlci5IYW5kbGViYXJzLmdldChyb290c1tp
        XSwgY29udGV4dHNbaV0sIHsgZGF0YTogZGF0YSB9KSApOwogIH0KCiAgcmV0
        dXJuIHJldDsKfTsKCn0pKCk7CgoKCihmdW5jdGlvbigpIHsKLypqc2hpbnQg
        bmV3Y2FwOmZhbHNlKi8KLyoqCkBtb2R1bGUgZW1iZXIKQHN1Ym1vZHVsZSBl
        bWJlci1oYW5kbGViYXJzCiovCgp2YXIgc2V0ID0gRW1iZXIuc2V0LCBnZXQg
        PSBFbWJlci5nZXQ7CnZhciBNZXRhbW9ycGggPSByZXF1aXJlTW9kdWxlKCdt
        ZXRhbW9ycGgnKTsKCmZ1bmN0aW9uIG5vdGlmeU11dGF0aW9uTGlzdGVuZXJz
        KCkgewogIEVtYmVyLnJ1bi5vbmNlKEVtYmVyLlZpZXcsICdub3RpZnlNdXRh
        dGlvbkxpc3RlbmVycycpOwp9CgovLyBET01NYW5hZ2VyIHNob3VsZCBqdXN0
        IGFic3RyYWN0IGRvbSBtYW5pcHVsYXRpb24gYmV0d2VlbiBqcXVlcnkgYW5k
        IG1ldGFtb3JwaAp2YXIgRE9NTWFuYWdlciA9IHsKICByZW1vdmU6IGZ1bmN0
        aW9uKHZpZXcpIHsKICAgIHZpZXcubW9ycGgucmVtb3ZlKCk7CiAgICBub3Rp
        ZnlNdXRhdGlvbkxpc3RlbmVycygpOwogIH0sCgogIHByZXBlbmQ6IGZ1bmN0
        aW9uKHZpZXcsIGh0bWwpIHsKICAgIHZpZXcubW9ycGgucHJlcGVuZChodG1s
        KTsKICAgIG5vdGlmeU11dGF0aW9uTGlzdGVuZXJzKCk7CiAgfSwKCiAgYWZ0
        ZXI6IGZ1bmN0aW9uKHZpZXcsIGh0bWwpIHsKICAgIHZpZXcubW9ycGguYWZ0
        ZXIoaHRtbCk7CiAgICBub3RpZnlNdXRhdGlvbkxpc3RlbmVycygpOwogIH0s
        CgogIGh0bWw6IGZ1bmN0aW9uKHZpZXcsIGh0bWwpIHsKICAgIHZpZXcubW9y
        cGguaHRtbChodG1sKTsKICAgIG5vdGlmeU11dGF0aW9uTGlzdGVuZXJzKCk7
        CiAgfSwKCiAgLy8gVGhpcyBpcyBtZXNzZWQgdXAuCiAgcmVwbGFjZTogZnVu
        Y3Rpb24odmlldykgewogICAgdmFyIG1vcnBoID0gdmlldy5tb3JwaDsKCiAg
        ICB2aWV3LnRyYW5zaXRpb25UbygncHJlUmVuZGVyJyk7CgogICAgRW1iZXIu
        cnVuLnNjaGVkdWxlKCdyZW5kZXInLCB0aGlzLCBmdW5jdGlvbiByZW5kZXJN
        ZXRhbW9ycGhWaWV3KCkgewogICAgICBpZiAodmlldy5pc0Rlc3Ryb3lpbmcp
        IHsgcmV0dXJuOyB9CgogICAgICB2aWV3LmNsZWFyUmVuZGVyZWRDaGlsZHJl
        bigpOwogICAgICB2YXIgYnVmZmVyID0gdmlldy5yZW5kZXJUb0J1ZmZlcigp
        OwoKICAgICAgdmlldy5pbnZva2VSZWN1cnNpdmVseShmdW5jdGlvbih2aWV3
        KSB7CiAgICAgICAgdmlldy5wcm9wZXJ0eVdpbGxDaGFuZ2UoJ2VsZW1lbnQn
        KTsKICAgICAgfSk7CiAgICAgIHZpZXcudHJpZ2dlclJlY3Vyc2l2ZWx5KCd3
        aWxsSW5zZXJ0RWxlbWVudCcpOwoKICAgICAgbW9ycGgucmVwbGFjZVdpdGgo
        YnVmZmVyLnN0cmluZygpKTsKICAgICAgdmlldy50cmFuc2l0aW9uVG8oJ2lu
        RE9NJyk7CgogICAgICB2aWV3Lmludm9rZVJlY3Vyc2l2ZWx5KGZ1bmN0aW9u
        KHZpZXcpIHsKICAgICAgICB2aWV3LnByb3BlcnR5RGlkQ2hhbmdlKCdlbGVt
        ZW50Jyk7CiAgICAgIH0pOwogICAgICB2aWV3LnRyaWdnZXJSZWN1cnNpdmVs
        eSgnZGlkSW5zZXJ0RWxlbWVudCcpOwoKICAgICAgbm90aWZ5TXV0YXRpb25M
        aXN0ZW5lcnMoKTsKICAgIH0pOwogIH0sCgogIGVtcHR5OiBmdW5jdGlvbih2
        aWV3KSB7CiAgICB2aWV3Lm1vcnBoLmh0bWwoIiIpOwogICAgbm90aWZ5TXV0
        YXRpb25MaXN0ZW5lcnMoKTsKICB9Cn07CgovLyBUaGUgYG1vcnBoYCBhbmQg
        YG91dGVySFRNTGAgcHJvcGVydGllcyBhcmUgaW50ZXJuYWwgb25seQovLyBh
        bmQgbm90IG9ic2VydmFibGUuCgovKioKICBAY2xhc3MgX01ldGFtb3JwaAog
        IEBuYW1lc3BhY2UgRW1iZXIKICBAcHJpdmF0ZQoqLwpFbWJlci5fTWV0YW1v
        cnBoID0gRW1iZXIuTWl4aW4uY3JlYXRlKHsKICBpc1ZpcnR1YWw6IHRydWUs
        CiAgdGFnTmFtZTogJycsCgogIGluc3RydW1lbnROYW1lOiAnbWV0YW1vcnBo
        JywKCiAgaW5pdDogZnVuY3Rpb24oKSB7CiAgICB0aGlzLl9zdXBlcigpOwog
        ICAgdGhpcy5tb3JwaCA9IE1ldGFtb3JwaCgpOwogICAgRW1iZXIuZGVwcmVj
        YXRlKCdTdXBwbHlpbmcgYSB0YWdOYW1lIHRvIE1ldGFtb3JwaCB2aWV3cyBp
        cyB1bnJlbGlhYmxlIGFuZCBpcyBkZXByZWNhdGVkLiBZb3UgbWF5IGJlIHNl
        dHRpbmcgdGhlIHRhZ05hbWUgb24gYSBIYW5kbGViYXJzIGhlbHBlciB0aGF0
        IGNyZWF0ZXMgYSBNZXRhbW9ycGguJywgIXRoaXMudGFnTmFtZSk7CiAgfSwK
        CiAgYmVmb3JlUmVuZGVyOiBmdW5jdGlvbihidWZmZXIpIHsKICAgIGJ1ZmZl
        ci5wdXNoKHRoaXMubW9ycGguc3RhcnRUYWcoKSk7CiAgICBidWZmZXIucHVz
        aE9wZW5pbmdUYWcoKTsKICB9LAoKICBhZnRlclJlbmRlcjogZnVuY3Rpb24o
        YnVmZmVyKSB7CiAgICBidWZmZXIucHVzaENsb3NpbmdUYWcoKTsKICAgIGJ1
        ZmZlci5wdXNoKHRoaXMubW9ycGguZW5kVGFnKCkpOwogIH0sCgogIGNyZWF0
        ZUVsZW1lbnQ6IGZ1bmN0aW9uKCkgewogICAgdmFyIGJ1ZmZlciA9IHRoaXMu
        cmVuZGVyVG9CdWZmZXIoKTsKICAgIHRoaXMub3V0ZXJIVE1MID0gYnVmZmVy
        LnN0cmluZygpOwogICAgdGhpcy5jbGVhckJ1ZmZlcigpOwogIH0sCgogIGRv
        bU1hbmFnZXI6IERPTU1hbmFnZXIKfSk7CgovKioKICBAY2xhc3MgX01ldGFt
        b3JwaFZpZXcKICBAbmFtZXNwYWNlIEVtYmVyCiAgQGV4dGVuZHMgRW1iZXIu
        VmlldwogIEB1c2VzIEVtYmVyLl9NZXRhbW9ycGgKICBAcHJpdmF0ZQoqLwpF
        bWJlci5fTWV0YW1vcnBoVmlldyA9IEVtYmVyLlZpZXcuZXh0ZW5kKEVtYmVy
        Ll9NZXRhbW9ycGgpOwoKLyoqCiAgQGNsYXNzIF9TaW1wbGVNZXRhbW9ycGhW
        aWV3CiAgQG5hbWVzcGFjZSBFbWJlcgogIEBleHRlbmRzIEVtYmVyLkNvcmVW
        aWV3CiAgQHVzZXMgRW1iZXIuX01ldGFtb3JwaAogIEBwcml2YXRlCiovCkVt
        YmVyLl9TaW1wbGVNZXRhbW9ycGhWaWV3ID0gRW1iZXIuQ29yZVZpZXcuZXh0
        ZW5kKEVtYmVyLl9NZXRhbW9ycGgpOwoKCn0pKCk7CgoKCihmdW5jdGlvbigp
        IHsKLypnbG9iYWxzIEhhbmRsZWJhcnMgKi8KLypqc2hpbnQgbmV3Y2FwOmZh
        bHNlKi8KLyoqCkBtb2R1bGUgZW1iZXIKQHN1Ym1vZHVsZSBlbWJlci1oYW5k
        bGViYXJzCiovCgp2YXIgZ2V0ID0gRW1iZXIuZ2V0LCBzZXQgPSBFbWJlci5z
        ZXQsIGhhbmRsZWJhcnNHZXQgPSBFbWJlci5IYW5kbGViYXJzLmdldDsKdmFy
        IE1ldGFtb3JwaCA9IHJlcXVpcmVNb2R1bGUoJ21ldGFtb3JwaCcpOwpmdW5j
        dGlvbiBTaW1wbGVIYW5kbGViYXJzVmlldyhwYXRoLCBwYXRoUm9vdCwgaXNF
        c2NhcGVkLCB0ZW1wbGF0ZURhdGEpIHsKICB0aGlzLnBhdGggPSBwYXRoOwog
        IHRoaXMucGF0aFJvb3QgPSBwYXRoUm9vdDsKICB0aGlzLmlzRXNjYXBlZCA9
        IGlzRXNjYXBlZDsKICB0aGlzLnRlbXBsYXRlRGF0YSA9IHRlbXBsYXRlRGF0
        YTsKCiAgdGhpcy5tb3JwaCA9IE1ldGFtb3JwaCgpOwogIHRoaXMuc3RhdGUg
        PSAncHJlUmVuZGVyJzsKICB0aGlzLnVwZGF0ZUlkID0gbnVsbDsKICB0aGlz
        Ll9wYXJlbnRWaWV3ID0gbnVsbDsKICB0aGlzLmJ1ZmZlciA9IG51bGw7Cn0K
        CkVtYmVyLl9TaW1wbGVIYW5kbGViYXJzVmlldyA9IFNpbXBsZUhhbmRsZWJh
        cnNWaWV3OwoKU2ltcGxlSGFuZGxlYmFyc1ZpZXcucHJvdG90eXBlID0gewog
        IGlzVmlydHVhbDogdHJ1ZSwKICBpc1ZpZXc6IHRydWUsCgogIGRlc3Ryb3k6
        IGZ1bmN0aW9uICgpIHsKICAgIGlmICh0aGlzLnVwZGF0ZUlkKSB7CiAgICAg
        IEVtYmVyLnJ1bi5jYW5jZWwodGhpcy51cGRhdGVJZCk7CiAgICAgIHRoaXMu
        dXBkYXRlSWQgPSBudWxsOwogICAgfQogICAgaWYgKHRoaXMuX3BhcmVudFZp
        ZXcpIHsKICAgICAgdGhpcy5fcGFyZW50Vmlldy5yZW1vdmVDaGlsZCh0aGlz
        KTsKICAgIH0KICAgIHRoaXMubW9ycGggPSBudWxsOwogICAgdGhpcy5zdGF0
        ZSA9ICdkZXN0cm95ZWQnOwogIH0sCgogIHByb3BlcnR5V2lsbENoYW5nZTog
        RW1iZXIuSywKCiAgcHJvcGVydHlEaWRDaGFuZ2U6IEVtYmVyLkssCgogIG5v
        cm1hbGl6ZWRWYWx1ZTogZnVuY3Rpb24oKSB7CiAgICB2YXIgcGF0aCA9IHRo
        aXMucGF0aCwKICAgICAgICBwYXRoUm9vdCA9IHRoaXMucGF0aFJvb3QsCiAg
        ICAgICAgcmVzdWx0LCB0ZW1wbGF0ZURhdGE7CgogICAgLy8gVXNlIHRoZSBw
        YXRoUm9vdCBhcyB0aGUgcmVzdWx0IGlmIG5vIHBhdGggaXMgcHJvdmlkZWQu
        IFRoaXMKICAgIC8vIGhhcHBlbnMgaWYgdGhlIHBhdGggaXMgYHRoaXNgLCB3
        aGljaCBnZXRzIG5vcm1hbGl6ZWQgaW50bwogICAgLy8gYSBgcGF0aFJvb3Rg
        IG9mIHRoZSBjdXJyZW50IEhhbmRsZWJhcnMgY29udGV4dCBhbmQgYSBwYXRo
        CiAgICAvLyBvZiBgJydgLgogICAgaWYgKHBhdGggPT09ICcnKSB7CiAgICAg
        IHJlc3VsdCA9IHBhdGhSb290OwogICAgfSBlbHNlIHsKICAgICAgdGVtcGxh
        dGVEYXRhID0gdGhpcy50ZW1wbGF0ZURhdGE7CiAgICAgIHJlc3VsdCA9IGhh
        bmRsZWJhcnNHZXQocGF0aFJvb3QsIHBhdGgsIHsgZGF0YTogdGVtcGxhdGVE
        YXRhIH0pOwogICAgfQoKICAgIHJldHVybiByZXN1bHQ7CiAgfSwKCiAgcmVu
        ZGVyVG9CdWZmZXI6IGZ1bmN0aW9uKGJ1ZmZlcikgewogICAgdmFyIHN0cmlu
        ZyA9ICcnOwoKICAgIHN0cmluZyArPSB0aGlzLm1vcnBoLnN0YXJ0VGFnKCk7
        CiAgICBzdHJpbmcgKz0gdGhpcy5yZW5kZXIoKTsKICAgIHN0cmluZyArPSB0
        aGlzLm1vcnBoLmVuZFRhZygpOwoKICAgIGJ1ZmZlci5wdXNoKHN0cmluZyk7
        CiAgfSwKCiAgcmVuZGVyOiBmdW5jdGlvbigpIHsKICAgIC8vIElmIG5vdCBp
        bnZva2VkIHZpYSBhIHRyaXBsZS1tdXN0YWNoZSAoe3t7Zm9vfX19KSwgZXNj
        YXBlCiAgICAvLyB0aGUgY29udGVudCBvZiB0aGUgdGVtcGxhdGUuCiAgICB2
        YXIgZXNjYXBlID0gdGhpcy5pc0VzY2FwZWQ7CiAgICB2YXIgcmVzdWx0ID0g
        dGhpcy5ub3JtYWxpemVkVmFsdWUoKTsKCiAgICBpZiAocmVzdWx0ID09PSBu
        dWxsIHx8IHJlc3VsdCA9PT0gdW5kZWZpbmVkKSB7CiAgICAgIHJlc3VsdCA9
        ICIiOwogICAgfSBlbHNlIGlmICghKHJlc3VsdCBpbnN0YW5jZW9mIEhhbmRs
        ZWJhcnMuU2FmZVN0cmluZykpIHsKICAgICAgcmVzdWx0ID0gU3RyaW5nKHJl
        c3VsdCk7CiAgICB9CgogICAgaWYgKGVzY2FwZSkgeyByZXN1bHQgPSBIYW5k
        bGViYXJzLlV0aWxzLmVzY2FwZUV4cHJlc3Npb24ocmVzdWx0KTsgfQogICAg
        cmV0dXJuIHJlc3VsdDsKICB9LAoKICByZXJlbmRlcjogZnVuY3Rpb24oKSB7
        CiAgICBzd2l0Y2godGhpcy5zdGF0ZSkgewogICAgICBjYXNlICdwcmVSZW5k
        ZXInOgogICAgICBjYXNlICdkZXN0cm95ZWQnOgogICAgICAgIGJyZWFrOwog
        ICAgICBjYXNlICdpbkJ1ZmZlcic6CiAgICAgICAgdGhyb3cgbmV3IEVtYmVy
        LkVycm9yKCJTb21ldGhpbmcgeW91IGRpZCB0cmllZCB0byByZXBsYWNlIGFu
        IHt7ZXhwcmVzc2lvbn19IGJlZm9yZSBpdCB3YXMgaW5zZXJ0ZWQgaW50byB0
        aGUgRE9NLiIpOwogICAgICBjYXNlICdoYXNFbGVtZW50JzoKICAgICAgY2Fz
        ZSAnaW5ET00nOgogICAgICAgIHRoaXMudXBkYXRlSWQgPSBFbWJlci5ydW4u
        c2NoZWR1bGVPbmNlKCdyZW5kZXInLCB0aGlzLCAndXBkYXRlJyk7CiAgICAg
        ICAgYnJlYWs7CiAgICB9CgogICAgcmV0dXJuIHRoaXM7CiAgfSwKCiAgdXBk
        YXRlOiBmdW5jdGlvbiAoKSB7CiAgICB0aGlzLnVwZGF0ZUlkID0gbnVsbDsK
        ICAgIHRoaXMubW9ycGguaHRtbCh0aGlzLnJlbmRlcigpKTsKICB9LAoKICB0
        cmFuc2l0aW9uVG86IGZ1bmN0aW9uKHN0YXRlKSB7CiAgICB0aGlzLnN0YXRl
        ID0gc3RhdGU7CiAgfQp9OwoKdmFyIHN0YXRlcyA9IEVtYmVyLlZpZXcuY2xv
        bmVTdGF0ZXMoRW1iZXIuVmlldy5zdGF0ZXMpLCBtZXJnZSA9IEVtYmVyLm1l
        cmdlOwoKbWVyZ2Uoc3RhdGVzLl9kZWZhdWx0LCB7CiAgcmVyZW5kZXJJZk5l
        ZWRlZDogRW1iZXIuSwp9KTsKCm1lcmdlKHN0YXRlcy5pbkRPTSwgewogIHJl
        cmVuZGVySWZOZWVkZWQ6IGZ1bmN0aW9uKHZpZXcpIHsKICAgIGlmICh2aWV3
        Lm5vcm1hbGl6ZWRWYWx1ZSgpICE9PSB2aWV3Ll9sYXN0Tm9ybWFsaXplZFZh
        bHVlKSB7CiAgICAgIHZpZXcucmVyZW5kZXIoKTsKICAgIH0KICB9Cn0pOwoK
        LyoqCiAgYEVtYmVyLl9IYW5kbGViYXJzQm91bmRWaWV3YCBpcyBhIHByaXZh
        dGUgdmlldyBjcmVhdGVkIGJ5IHRoZSBIYW5kbGViYXJzCiAgYHt7YmluZH19
        YCBoZWxwZXJzIHRoYXQgaXMgdXNlZCB0byBrZWVwIHRyYWNrIG9mIGJvdW5k
        IHByb3BlcnRpZXMuCgogIEV2ZXJ5IHRpbWUgYSBwcm9wZXJ0eSBpcyBib3Vu
        ZCB1c2luZyBhIGB7e211c3RhY2hlfX1gLCBhbiBhbm9ueW1vdXMgc3ViY2xh
        c3MKICBvZiBgRW1iZXIuX0hhbmRsZWJhcnNCb3VuZFZpZXdgIGlzIGNyZWF0
        ZWQgd2l0aCB0aGUgYXBwcm9wcmlhdGUgc3ViLXRlbXBsYXRlCiAgYW5kIGNv
        bnRleHQgc2V0IHVwLiBXaGVuIHRoZSBhc3NvY2lhdGVkIHByb3BlcnR5IGNo
        YW5nZXMsIGp1c3QgdGhlIHRlbXBsYXRlCiAgZm9yIHRoaXMgdmlldyB3aWxs
        IHJlLXJlbmRlci4KCiAgQGNsYXNzIF9IYW5kbGViYXJzQm91bmRWaWV3CiAg
        QG5hbWVzcGFjZSBFbWJlcgogIEBleHRlbmRzIEVtYmVyLl9NZXRhbW9ycGhW
        aWV3CiAgQHByaXZhdGUKKi8KRW1iZXIuX0hhbmRsZWJhcnNCb3VuZFZpZXcg
        PSBFbWJlci5fTWV0YW1vcnBoVmlldy5leHRlbmQoewogIGluc3RydW1lbnRO
        YW1lOiAnYm91bmRIYW5kbGViYXJzJywKICBzdGF0ZXM6IHN0YXRlcywKCiAg
        LyoqCiAgICBUaGUgZnVuY3Rpb24gdXNlZCB0byBkZXRlcm1pbmUgaWYgdGhl
        IGBkaXNwbGF5VGVtcGxhdGVgIG9yCiAgICBgaW52ZXJzZVRlbXBsYXRlYCBz
        aG91bGQgYmUgcmVuZGVyZWQuIFRoaXMgc2hvdWxkIGJlIGEgZnVuY3Rpb24g
        dGhhdCB0YWtlcwogICAgYSB2YWx1ZSBhbmQgcmV0dXJucyBhIEJvb2xlYW4u
        CgogICAgQHByb3BlcnR5IHNob3VsZERpc3BsYXlGdW5jCiAgICBAdHlwZSBG
        dW5jdGlvbgogICAgQGRlZmF1bHQgbnVsbAogICovCiAgc2hvdWxkRGlzcGxh
        eUZ1bmM6IG51bGwsCgogIC8qKgogICAgV2hldGhlciB0aGUgdGVtcGxhdGUg
        cmVuZGVyZWQgYnkgdGhpcyB2aWV3IGdldHMgcGFzc2VkIHRoZSBjb250ZXh0
        IG9iamVjdAogICAgb2YgaXRzIHBhcmVudCB0ZW1wbGF0ZSwgb3IgZ2V0cyBw
        YXNzZWQgdGhlIHZhbHVlIG9mIHJldHJpZXZpbmcgYHBhdGhgCiAgICBmcm9t
        IHRoZSBgcGF0aFJvb3RgLgoKICAgIEZvciBleGFtcGxlLCB0aGlzIGlzIHRy
        dWUgd2hlbiB1c2luZyB0aGUgYHt7I2lmfX1gIGhlbHBlciwgYmVjYXVzZSB0
        aGUKICAgIHRlbXBsYXRlIGluc2lkZSB0aGUgaGVscGVyIHNob3VsZCBsb29r
        IHVwIHByb3BlcnRpZXMgcmVsYXRpdmUgdG8gdGhlIHNhbWUKICAgIG9iamVj
        dCBhcyBvdXRzaWRlIHRoZSBibG9jay4gVGhpcyB3b3VsZCBiZSBgZmFsc2Vg
        IHdoZW4gdXNlZCB3aXRoIGB7eyN3aXRoCiAgICBmb299fWAgYmVjYXVzZSB0
        aGUgdGVtcGxhdGUgc2hvdWxkIHJlY2VpdmUgdGhlIG9iamVjdCBmb3VuZCBi
        eSBldmFsdWF0aW5nCiAgICBgZm9vYC4KCiAgICBAcHJvcGVydHkgcHJlc2Vy
        dmVDb250ZXh0CiAgICBAdHlwZSBCb29sZWFuCiAgICBAZGVmYXVsdCBmYWxz
        ZQogICovCiAgcHJlc2VydmVDb250ZXh0OiBmYWxzZSwKCiAgLyoqCiAgICBJ
        ZiBgcHJlc2VydmVDb250ZXh0YCBpcyB0cnVlLCB0aGlzIGlzIHRoZSBvYmpl
        Y3QgdGhhdCB3aWxsIGJlIHVzZWQKICAgIHRvIHJlbmRlciB0aGUgdGVtcGxh
        dGUuCgogICAgQHByb3BlcnR5IHByZXZpb3VzQ29udGV4dAogICAgQHR5cGUg
        T2JqZWN0CiAgKi8KICBwcmV2aW91c0NvbnRleHQ6IG51bGwsCgogIC8qKgog
        ICAgVGhlIHRlbXBsYXRlIHRvIHJlbmRlciB3aGVuIGBzaG91bGREaXNwbGF5
        RnVuY2AgZXZhbHVhdGVzIHRvIGB0cnVlYC4KCiAgICBAcHJvcGVydHkgZGlz
        cGxheVRlbXBsYXRlCiAgICBAdHlwZSBGdW5jdGlvbgogICAgQGRlZmF1bHQg
        bnVsbAogICovCiAgZGlzcGxheVRlbXBsYXRlOiBudWxsLAoKICAvKioKICAg
        IFRoZSB0ZW1wbGF0ZSB0byByZW5kZXIgd2hlbiBgc2hvdWxkRGlzcGxheUZ1
        bmNgIGV2YWx1YXRlcyB0byBgZmFsc2VgLgoKICAgIEBwcm9wZXJ0eSBpbnZl
        cnNlVGVtcGxhdGUKICAgIEB0eXBlIEZ1bmN0aW9uCiAgICBAZGVmYXVsdCBu
        dWxsCiAgKi8KICBpbnZlcnNlVGVtcGxhdGU6IG51bGwsCgoKICAvKioKICAg
        IFRoZSBwYXRoIHRvIGxvb2sgdXAgb24gYHBhdGhSb290YCB0aGF0IGlzIHBh
        c3NlZCB0bwogICAgYHNob3VsZERpc3BsYXlGdW5jYCB0byBkZXRlcm1pbmUg
        d2hpY2ggdGVtcGxhdGUgdG8gcmVuZGVyLgoKICAgIEluIGFkZGl0aW9uLCBp
        ZiBgcHJlc2VydmVDb250ZXh0YCBpcyBgZmFsc2UsYCB0aGUgb2JqZWN0IGF0
        IHRoaXMgcGF0aCB3aWxsCiAgICBiZSBwYXNzZWQgdG8gdGhlIHRlbXBsYXRl
        IHdoZW4gcmVuZGVyaW5nLgoKICAgIEBwcm9wZXJ0eSBwYXRoCiAgICBAdHlw
        ZSBTdHJpbmcKICAgIEBkZWZhdWx0IG51bGwKICAqLwogIHBhdGg6IG51bGws
        CgogIC8qKgogICAgVGhlIG9iamVjdCBmcm9tIHdoaWNoIHRoZSBgcGF0aGAg
        d2lsbCBiZSBsb29rZWQgdXAuIFNvbWV0aW1lcyB0aGlzIGlzIHRoZQogICAg
        c2FtZSBhcyB0aGUgYHByZXZpb3VzQ29udGV4dGAsIGJ1dCBpbiBjYXNlcyB3
        aGVyZSB0aGlzIHZpZXcgaGFzIGJlZW4KICAgIGdlbmVyYXRlZCBmb3IgcGF0
        aHMgdGhhdCBzdGFydCB3aXRoIGEga2V5d29yZCBzdWNoIGFzIGB2aWV3YCBv
        cgogICAgYGNvbnRyb2xsZXJgLCB0aGUgcGF0aCByb290IHdpbGwgYmUgdGhh
        dCByZXNvbHZlZCBvYmplY3QuCgogICAgQHByb3BlcnR5IHBhdGhSb290CiAg
        ICBAdHlwZSBPYmplY3QKICAqLwogIHBhdGhSb290OiBudWxsLAoKICBub3Jt
        YWxpemVkVmFsdWU6IGZ1bmN0aW9uKCkgewogICAgdmFyIHBhdGggPSBnZXQo
        dGhpcywgJ3BhdGgnKSwKICAgICAgICBwYXRoUm9vdCAgPSBnZXQodGhpcywg
        J3BhdGhSb290JyksCiAgICAgICAgdmFsdWVOb3JtYWxpemVyID0gZ2V0KHRo
        aXMsICd2YWx1ZU5vcm1hbGl6ZXJGdW5jJyksCiAgICAgICAgcmVzdWx0LCB0
        ZW1wbGF0ZURhdGE7CgogICAgLy8gVXNlIHRoZSBwYXRoUm9vdCBhcyB0aGUg
        cmVzdWx0IGlmIG5vIHBhdGggaXMgcHJvdmlkZWQuIFRoaXMKICAgIC8vIGhh
        cHBlbnMgaWYgdGhlIHBhdGggaXMgYHRoaXNgLCB3aGljaCBnZXRzIG5vcm1h
        bGl6ZWQgaW50bwogICAgLy8gYSBgcGF0aFJvb3RgIG9mIHRoZSBjdXJyZW50
        IEhhbmRsZWJhcnMgY29udGV4dCBhbmQgYSBwYXRoCiAgICAvLyBvZiBgJydg
        LgogICAgaWYgKHBhdGggPT09ICcnKSB7CiAgICAgIHJlc3VsdCA9IHBhdGhS
        b290OwogICAgfSBlbHNlIHsKICAgICAgdGVtcGxhdGVEYXRhID0gZ2V0KHRo
        aXMsICd0ZW1wbGF0ZURhdGEnKTsKICAgICAgcmVzdWx0ID0gaGFuZGxlYmFy
        c0dldChwYXRoUm9vdCwgcGF0aCwgeyBkYXRhOiB0ZW1wbGF0ZURhdGEgfSk7
        CiAgICB9CgogICAgcmV0dXJuIHZhbHVlTm9ybWFsaXplciA/IHZhbHVlTm9y
        bWFsaXplcihyZXN1bHQpIDogcmVzdWx0OwogIH0sCgogIHJlcmVuZGVySWZO
        ZWVkZWQ6IGZ1bmN0aW9uKCkgewogICAgdGhpcy5jdXJyZW50U3RhdGUucmVy
        ZW5kZXJJZk5lZWRlZCh0aGlzKTsKICB9LAoKICAvKioKICAgIERldGVybWlu
        ZXMgd2hpY2ggdGVtcGxhdGUgdG8gaW52b2tlLCBzZXRzIHVwIHRoZSBjb3Jy
        ZWN0IHN0YXRlIGJhc2VkIG9uCiAgICB0aGF0IGxvZ2ljLCB0aGVuIGludm9r
        ZXMgdGhlIGRlZmF1bHQgYEVtYmVyLlZpZXdgIGByZW5kZXJgIGltcGxlbWVu
        dGF0aW9uLgoKICAgIFRoaXMgbWV0aG9kIHdpbGwgZmlyc3QgbG9vayB1cCB0
        aGUgYHBhdGhgIGtleSBvbiBgcGF0aFJvb3RgLAogICAgdGhlbiBwYXNzIHRo
        YXQgdmFsdWUgdG8gdGhlIGBzaG91bGREaXNwbGF5RnVuY2AgZnVuY3Rpb24u
        IElmIHRoYXQgcmV0dXJucwogICAgYHRydWUsYCB0aGUgYGRpc3BsYXlUZW1w
        bGF0ZWAgZnVuY3Rpb24gd2lsbCBiZSByZW5kZXJlZCB0byBET00uIE90aGVy
        d2lzZSwKICAgIGBpbnZlcnNlVGVtcGxhdGVgLCBpZiBzcGVjaWZpZWQsIHdp
        bGwgYmUgcmVuZGVyZWQuCgogICAgRm9yIGV4YW1wbGUsIGlmIHRoaXMgYEVt
        YmVyLl9IYW5kbGViYXJzQm91bmRWaWV3YCByZXByZXNlbnRlZCB0aGUgYHt7
        I3dpdGgKICAgIGZvb319YCBoZWxwZXIsIGl0IHdvdWxkIGxvb2sgdXAgdGhl
        IGBmb29gIHByb3BlcnR5IG9mIGl0cyBjb250ZXh0LCBhbmQKICAgIGBzaG91
        bGREaXNwbGF5RnVuY2Agd291bGQgYWx3YXlzIHJldHVybiB0cnVlLiBUaGUg
        b2JqZWN0IGZvdW5kIGJ5IGxvb2tpbmcKICAgIHVwIGBmb29gIHdvdWxkIGJl
        IHBhc3NlZCB0byBgZGlzcGxheVRlbXBsYXRlYC4KCiAgICBAbWV0aG9kIHJl
        bmRlcgogICAgQHBhcmFtIHtFbWJlci5SZW5kZXJCdWZmZXJ9IGJ1ZmZlcgog
        ICovCiAgcmVuZGVyOiBmdW5jdGlvbihidWZmZXIpIHsKICAgIC8vIElmIG5v
        dCBpbnZva2VkIHZpYSBhIHRyaXBsZS1tdXN0YWNoZSAoe3t7Zm9vfX19KSwg
        ZXNjYXBlCiAgICAvLyB0aGUgY29udGVudCBvZiB0aGUgdGVtcGxhdGUuCiAg
        ICB2YXIgZXNjYXBlID0gZ2V0KHRoaXMsICdpc0VzY2FwZWQnKTsKCiAgICB2
        YXIgc2hvdWxkRGlzcGxheSA9IGdldCh0aGlzLCAnc2hvdWxkRGlzcGxheUZ1
        bmMnKSwKICAgICAgICBwcmVzZXJ2ZUNvbnRleHQgPSBnZXQodGhpcywgJ3By
        ZXNlcnZlQ29udGV4dCcpLAogICAgICAgIGNvbnRleHQgPSBnZXQodGhpcywg
        J3ByZXZpb3VzQ29udGV4dCcpOwoKICAgIHZhciBfY29udGV4dENvbnRyb2xs
        ZXIgPSBnZXQodGhpcywgJ19jb250ZXh0Q29udHJvbGxlcicpOwoKICAgIHZh
        ciBpbnZlcnNlVGVtcGxhdGUgPSBnZXQodGhpcywgJ2ludmVyc2VUZW1wbGF0
        ZScpLAogICAgICAgIGRpc3BsYXlUZW1wbGF0ZSA9IGdldCh0aGlzLCAnZGlz
        cGxheVRlbXBsYXRlJyk7CgogICAgdmFyIHJlc3VsdCA9IHRoaXMubm9ybWFs
        aXplZFZhbHVlKCk7CiAgICB0aGlzLl9sYXN0Tm9ybWFsaXplZFZhbHVlID0g
        cmVzdWx0OwoKICAgIC8vIEZpcnN0LCB0ZXN0IHRoZSBjb25kaXRpb25hbCB0
        byBzZWUgaWYgd2Ugc2hvdWxkCiAgICAvLyByZW5kZXIgdGhlIHRlbXBsYXRl
        IG9yIG5vdC4KICAgIGlmIChzaG91bGREaXNwbGF5KHJlc3VsdCkpIHsKICAg
        ICAgc2V0KHRoaXMsICd0ZW1wbGF0ZScsIGRpc3BsYXlUZW1wbGF0ZSk7Cgog
        ICAgICAvLyBJZiB3ZSBhcmUgcHJlc2VydmluZyB0aGUgY29udGV4dCAoZm9y
        IGV4YW1wbGUsIGlmIHRoaXMKICAgICAgLy8gaXMgYW4gI2lmIGJsb2NrLCBj
        YWxsIHRoZSB0ZW1wbGF0ZSB3aXRoIHRoZSBzYW1lIG9iamVjdC4KICAgICAg
        aWYgKHByZXNlcnZlQ29udGV4dCkgewogICAgICAgIHNldCh0aGlzLCAnX2Nv
        bnRleHQnLCBjb250ZXh0KTsKICAgICAgfSBlbHNlIHsKICAgICAgLy8gT3Ro
        ZXJ3aXNlLCBkZXRlcm1pbmUgaWYgdGhpcyBpcyBhIGJsb2NrIGJpbmQgb3Ig
        bm90LgogICAgICAvLyBJZiBzbywgcGFzcyB0aGUgc3BlY2lmaWVkIG9iamVj
        dCB0byB0aGUgdGVtcGxhdGUKICAgICAgICBpZiAoZGlzcGxheVRlbXBsYXRl
        KSB7CiAgICAgICAgICBpZiAoX2NvbnRleHRDb250cm9sbGVyKSB7CiAgICAg
        ICAgICAgIHNldChfY29udGV4dENvbnRyb2xsZXIsICdjb250ZW50JywgcmVz
        dWx0KTsKICAgICAgICAgICAgcmVzdWx0ID0gX2NvbnRleHRDb250cm9sbGVy
        OwogICAgICAgICAgfQogICAgICAgICAgc2V0KHRoaXMsICdfY29udGV4dCcs
        IHJlc3VsdCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAvLyBUaGlzIGlz
        IG5vdCBhIGJpbmQgYmxvY2ssIGp1c3QgcHVzaCB0aGUgcmVzdWx0IG9mIHRo
        ZQogICAgICAgIC8vIGV4cHJlc3Npb24gdG8gdGhlIHJlbmRlciBjb250ZXh0
        IGFuZCByZXR1cm4uCiAgICAgICAgICBpZiAocmVzdWx0ID09PSBudWxsIHx8
        IHJlc3VsdCA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgIHJlc3VsdCA9
        ICIiOwogICAgICAgICAgfSBlbHNlIGlmICghKHJlc3VsdCBpbnN0YW5jZW9m
        IEhhbmRsZWJhcnMuU2FmZVN0cmluZykpIHsKICAgICAgICAgICAgcmVzdWx0
        ID0gU3RyaW5nKHJlc3VsdCk7CiAgICAgICAgICB9CgogICAgICAgICAgaWYg
        KGVzY2FwZSkgeyByZXN1bHQgPSBIYW5kbGViYXJzLlV0aWxzLmVzY2FwZUV4
        cHJlc3Npb24ocmVzdWx0KTsgfQogICAgICAgICAgYnVmZmVyLnB1c2gocmVz
        dWx0KTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgIH0KICAg
        IH0gZWxzZSBpZiAoaW52ZXJzZVRlbXBsYXRlKSB7CiAgICAgIHNldCh0aGlz
        LCAndGVtcGxhdGUnLCBpbnZlcnNlVGVtcGxhdGUpOwoKICAgICAgaWYgKHBy
        ZXNlcnZlQ29udGV4dCkgewogICAgICAgIHNldCh0aGlzLCAnX2NvbnRleHQn
        LCBjb250ZXh0KTsKICAgICAgfSBlbHNlIHsKICAgICAgICBzZXQodGhpcywg
        J19jb250ZXh0JywgcmVzdWx0KTsKICAgICAgfQogICAgfSBlbHNlIHsKICAg
        ICAgc2V0KHRoaXMsICd0ZW1wbGF0ZScsIGZ1bmN0aW9uKCkgeyByZXR1cm4g
        Jyc7IH0pOwogICAgfQoKICAgIHJldHVybiB0aGlzLl9zdXBlcihidWZmZXIp
        OwogIH0KfSk7Cgp9KSgpOwoKCgooZnVuY3Rpb24oKSB7Ci8qKgpAbW9kdWxl
        IGVtYmVyCkBzdWJtb2R1bGUgZW1iZXItaGFuZGxlYmFycwoqLwoKdmFyIGdl
        dCA9IEVtYmVyLmdldCwgc2V0ID0gRW1iZXIuc2V0LCBmbXQgPSBFbWJlci5T
        dHJpbmcuZm10Owp2YXIgaGFuZGxlYmFyc0dldCA9IEVtYmVyLkhhbmRsZWJh
        cnMuZ2V0LCBub3JtYWxpemVQYXRoID0gRW1iZXIuSGFuZGxlYmFycy5ub3Jt
        YWxpemVQYXRoOwp2YXIgaGFuZGxlYmFyc0dldEVzY2FwZWQgPSBFbWJlci5I
        YW5kbGViYXJzLmdldEVzY2FwZWQ7CnZhciBmb3JFYWNoID0gRW1iZXIuQXJy
        YXlQb2x5ZmlsbHMuZm9yRWFjaDsKdmFyIG9fY3JlYXRlID0gRW1iZXIuY3Jl
        YXRlOwoKdmFyIEVtYmVySGFuZGxlYmFycyA9IEVtYmVyLkhhbmRsZWJhcnMs
        IGhlbHBlcnMgPSBFbWJlckhhbmRsZWJhcnMuaGVscGVyczsKCmZ1bmN0aW9u
        IGV4aXN0cyh2YWx1ZSkgewogIHJldHVybiAhRW1iZXIuaXNOb25lKHZhbHVl
        KTsKfQoKLy8gQmluZHMgYSBwcm9wZXJ0eSBpbnRvIHRoZSBET00uIFRoaXMg
        d2lsbCBjcmVhdGUgYSBob29rIGluIERPTSB0aGF0IHRoZQovLyBLVk8gc3lz
        dGVtIHdpbGwgbG9vayBmb3IgYW5kIHVwZGF0ZSBpZiB0aGUgcHJvcGVydHkg
        Y2hhbmdlcy4KZnVuY3Rpb24gYmluZChwcm9wZXJ0eSwgb3B0aW9ucywgcHJl
        c2VydmVDb250ZXh0LCBzaG91bGREaXNwbGF5LCB2YWx1ZU5vcm1hbGl6ZXIs
        IGNoaWxkUHJvcGVydGllcykgewogIHZhciBkYXRhID0gb3B0aW9ucy5kYXRh
        LAogICAgICBmbiA9IG9wdGlvbnMuZm4sCiAgICAgIGludmVyc2UgPSBvcHRp
        b25zLmludmVyc2UsCiAgICAgIHZpZXcgPSBkYXRhLnZpZXcsCiAgICAgIGN1
        cnJlbnRDb250ZXh0ID0gdGhpcywKICAgICAgbm9ybWFsaXplZCwgb2JzZXJ2
        ZXIsIGk7CgogIG5vcm1hbGl6ZWQgPSBub3JtYWxpemVQYXRoKGN1cnJlbnRD
        b250ZXh0LCBwcm9wZXJ0eSwgZGF0YSk7CgogIC8vIFNldCB1cCBvYnNlcnZl
        cnMgZm9yIG9ic2VydmFibGUgb2JqZWN0cwogIGlmICgnb2JqZWN0JyA9PT0g
        dHlwZW9mIHRoaXMpIHsKICAgIGlmIChkYXRhLmluc2lkZUdyb3VwKSB7CiAg
        ICAgIG9ic2VydmVyID0gZnVuY3Rpb24oKSB7CiAgICAgICAgRW1iZXIucnVu
        Lm9uY2UodmlldywgJ3JlcmVuZGVyJyk7CiAgICAgIH07CgogICAgICB2YXIg
        dGVtcGxhdGUsIGNvbnRleHQsIHJlc3VsdCA9IGhhbmRsZWJhcnNHZXQoY3Vy
        cmVudENvbnRleHQsIHByb3BlcnR5LCBvcHRpb25zKTsKCiAgICAgIHJlc3Vs
        dCA9IHZhbHVlTm9ybWFsaXplciA/IHZhbHVlTm9ybWFsaXplcihyZXN1bHQp
        IDogcmVzdWx0OwoKICAgICAgY29udGV4dCA9IHByZXNlcnZlQ29udGV4dCA/
        IGN1cnJlbnRDb250ZXh0IDogcmVzdWx0OwogICAgICBpZiAoc2hvdWxkRGlz
        cGxheShyZXN1bHQpKSB7CiAgICAgICAgdGVtcGxhdGUgPSBmbjsKICAgICAg
        fSBlbHNlIGlmIChpbnZlcnNlKSB7CiAgICAgICAgdGVtcGxhdGUgPSBpbnZl
        cnNlOwogICAgICB9CgogICAgICB0ZW1wbGF0ZShjb250ZXh0LCB7IGRhdGE6
        IG9wdGlvbnMuZGF0YSB9KTsKICAgIH0gZWxzZSB7CiAgICAgIC8vIENyZWF0
        ZSB0aGUgdmlldyB0aGF0IHdpbGwgd3JhcCB0aGUgb3V0cHV0IG9mIHRoaXMg
        dGVtcGxhdGUvcHJvcGVydHkKICAgICAgLy8gYW5kIGFkZCBpdCB0byB0aGUg
        bmVhcmVzdCB2aWV3J3MgY2hpbGRWaWV3cyBhcnJheS4KICAgICAgLy8gU2Vl
        IHRoZSBkb2N1bWVudGF0aW9uIG9mIEVtYmVyLl9IYW5kbGViYXJzQm91bmRW
        aWV3IGZvciBtb3JlLgogICAgICB2YXIgYmluZFZpZXcgPSB2aWV3LmNyZWF0
        ZUNoaWxkVmlldyhFbWJlci5fSGFuZGxlYmFyc0JvdW5kVmlldywgewogICAg
        ICAgIHByZXNlcnZlQ29udGV4dDogcHJlc2VydmVDb250ZXh0LAogICAgICAg
        IHNob3VsZERpc3BsYXlGdW5jOiBzaG91bGREaXNwbGF5LAogICAgICAgIHZh
        bHVlTm9ybWFsaXplckZ1bmM6IHZhbHVlTm9ybWFsaXplciwKICAgICAgICBk
        aXNwbGF5VGVtcGxhdGU6IGZuLAogICAgICAgIGludmVyc2VUZW1wbGF0ZTog
        aW52ZXJzZSwKICAgICAgICBwYXRoOiBwcm9wZXJ0eSwKICAgICAgICBwYXRo
        Um9vdDogY3VycmVudENvbnRleHQsCiAgICAgICAgcHJldmlvdXNDb250ZXh0
        OiBjdXJyZW50Q29udGV4dCwKICAgICAgICBpc0VzY2FwZWQ6ICFvcHRpb25z
        Lmhhc2gudW5lc2NhcGVkLAogICAgICAgIHRlbXBsYXRlRGF0YTogb3B0aW9u
        cy5kYXRhCiAgICAgIH0pOwoKICAgICAgaWYgKG9wdGlvbnMuaGFzaC5jb250
        cm9sbGVyKSB7CiAgICAgICAgYmluZFZpZXcuc2V0KCdfY29udGV4dENvbnRy
        b2xsZXInLCB0aGlzLmNvbnRhaW5lci5sb29rdXBGYWN0b3J5KCdjb250cm9s
        bGVyOicrb3B0aW9ucy5oYXNoLmNvbnRyb2xsZXIpLmNyZWF0ZSh7CiAgICAg
        ICAgICBjb250YWluZXI6IGN1cnJlbnRDb250ZXh0LmNvbnRhaW5lciwKICAg
        ICAgICAgIHBhcmVudENvbnRyb2xsZXI6IGN1cnJlbnRDb250ZXh0LAogICAg
        ICAgICAgdGFyZ2V0OiBjdXJyZW50Q29udGV4dAogICAgICAgIH0pKTsKICAg
        ICAgfQoKICAgICAgdmlldy5hcHBlbmRDaGlsZChiaW5kVmlldyk7CgogICAg
        ICBvYnNlcnZlciA9IGZ1bmN0aW9uKCkgewogICAgICAgIEVtYmVyLnJ1bi5z
        Y2hlZHVsZU9uY2UoJ3JlbmRlcicsIGJpbmRWaWV3LCAncmVyZW5kZXJJZk5l
        ZWRlZCcpOwogICAgICB9OwogICAgfQoKICAgIC8vIE9ic2VydmVzIHRoZSBn
        aXZlbiBwcm9wZXJ0eSBvbiB0aGUgY29udGV4dCBhbmQKICAgIC8vIHRlbGxz
        IHRoZSBFbWJlci5fSGFuZGxlYmFyc0JvdW5kVmlldyB0byByZS1yZW5kZXIu
        IElmIHByb3BlcnR5CiAgICAvLyBpcyBhbiBlbXB0eSBzdHJpbmcsIHdlIGFy
        ZSBwcmludGluZyB0aGUgY3VycmVudCBjb250ZXh0CiAgICAvLyBvYmplY3Qg
        KHt7dGhpc319KSBzbyB1cGRhdGluZyBpdCBpcyBub3Qgb3VyIHJlc3BvbnNp
        YmlsaXR5LgogICAgaWYgKG5vcm1hbGl6ZWQucGF0aCAhPT0gJycpIHsKICAg
        ICAgdmlldy5yZWdpc3Rlck9ic2VydmVyKG5vcm1hbGl6ZWQucm9vdCwgbm9y
        bWFsaXplZC5wYXRoLCBvYnNlcnZlcik7CiAgICAgIGlmIChjaGlsZFByb3Bl
        cnRpZXMpIHsKICAgICAgICBmb3IgKGk9MDsgaTxjaGlsZFByb3BlcnRpZXMu
        bGVuZ3RoOyBpKyspIHsKICAgICAgICAgIHZpZXcucmVnaXN0ZXJPYnNlcnZl
        cihub3JtYWxpemVkLnJvb3QsIG5vcm1hbGl6ZWQucGF0aCsnLicrY2hpbGRQ
        cm9wZXJ0aWVzW2ldLCBvYnNlcnZlcik7CiAgICAgICAgfQogICAgICB9CiAg
        ICB9CiAgfSBlbHNlIHsKICAgIC8vIFRoZSBvYmplY3QgaXMgbm90IG9ic2Vy
        dmFibGUsIHNvIGp1c3QgcmVuZGVyIGl0IG91dCBhbmQKICAgIC8vIGJlIGRv
        bmUgd2l0aCBpdC4KICAgIGRhdGEuYnVmZmVyLnB1c2goaGFuZGxlYmFyc0dl
        dEVzY2FwZWQoY3VycmVudENvbnRleHQsIHByb3BlcnR5LCBvcHRpb25zKSk7
        CiAgfQp9CgpFbWJlckhhbmRsZWJhcnMuYmluZCA9IGJpbmQ7CgpmdW5jdGlv
        biBzaW1wbGVCaW5kKGN1cnJlbnRDb250ZXh0LCBwcm9wZXJ0eSwgb3B0aW9u
        cykgewogIHZhciBkYXRhID0gb3B0aW9ucy5kYXRhLAogICAgICB2aWV3ID0g
        ZGF0YS52aWV3LAogICAgICBub3JtYWxpemVkLCBvYnNlcnZlciwgcGF0aFJv
        b3QsIG91dHB1dDsKCiAgbm9ybWFsaXplZCA9IG5vcm1hbGl6ZVBhdGgoY3Vy
        cmVudENvbnRleHQsIHByb3BlcnR5LCBkYXRhKTsKICBwYXRoUm9vdCA9IG5v
        cm1hbGl6ZWQucm9vdDsKCiAgLy8gU2V0IHVwIG9ic2VydmVycyBmb3Igb2Jz
        ZXJ2YWJsZSBvYmplY3RzCiAgaWYgKHBhdGhSb290ICYmICgnb2JqZWN0JyA9
        PT0gdHlwZW9mIHBhdGhSb290KSkgewogICAgaWYgKGRhdGEuaW5zaWRlR3Jv
        dXApIHsKICAgICAgb2JzZXJ2ZXIgPSBmdW5jdGlvbigpIHsKICAgICAgICBF
        bWJlci5ydW4ub25jZSh2aWV3LCAncmVyZW5kZXInKTsKICAgICAgfTsKCiAg
        ICAgIG91dHB1dCA9IGhhbmRsZWJhcnNHZXRFc2NhcGVkKGN1cnJlbnRDb250
        ZXh0LCBwcm9wZXJ0eSwgb3B0aW9ucyk7CgogICAgICBkYXRhLmJ1ZmZlci5w
        dXNoKG91dHB1dCk7CiAgICB9IGVsc2UgewogICAgICB2YXIgYmluZFZpZXcg
        PSBuZXcgRW1iZXIuX1NpbXBsZUhhbmRsZWJhcnNWaWV3KAogICAgICAgIHBy
        b3BlcnR5LCBjdXJyZW50Q29udGV4dCwgIW9wdGlvbnMuaGFzaC51bmVzY2Fw
        ZWQsIG9wdGlvbnMuZGF0YQogICAgICApOwoKICAgICAgYmluZFZpZXcuX3Bh
        cmVudFZpZXcgPSB2aWV3OwogICAgICB2aWV3LmFwcGVuZENoaWxkKGJpbmRW
        aWV3KTsKCiAgICAgIG9ic2VydmVyID0gZnVuY3Rpb24oKSB7CiAgICAgICAg
        RW1iZXIucnVuLnNjaGVkdWxlT25jZSgncmVuZGVyJywgYmluZFZpZXcsICdy
        ZXJlbmRlcicpOwogICAgICB9OwogICAgfQoKICAgIC8vIE9ic2VydmVzIHRo
        ZSBnaXZlbiBwcm9wZXJ0eSBvbiB0aGUgY29udGV4dCBhbmQKICAgIC8vIHRl
        bGxzIHRoZSBFbWJlci5fSGFuZGxlYmFyc0JvdW5kVmlldyB0byByZS1yZW5k
        ZXIuIElmIHByb3BlcnR5CiAgICAvLyBpcyBhbiBlbXB0eSBzdHJpbmcsIHdl
        IGFyZSBwcmludGluZyB0aGUgY3VycmVudCBjb250ZXh0CiAgICAvLyBvYmpl
        Y3QgKHt7dGhpc319KSBzbyB1cGRhdGluZyBpdCBpcyBub3Qgb3VyIHJlc3Bv
        bnNpYmlsaXR5LgogICAgaWYgKG5vcm1hbGl6ZWQucGF0aCAhPT0gJycpIHsK
        ICAgICAgdmlldy5yZWdpc3Rlck9ic2VydmVyKG5vcm1hbGl6ZWQucm9vdCwg
        bm9ybWFsaXplZC5wYXRoLCBvYnNlcnZlcik7CiAgICB9CiAgfSBlbHNlIHsK
        ICAgIC8vIFRoZSBvYmplY3QgaXMgbm90IG9ic2VydmFibGUsIHNvIGp1c3Qg
        cmVuZGVyIGl0IG91dCBhbmQKICAgIC8vIGJlIGRvbmUgd2l0aCBpdC4KICAg
        IG91dHB1dCA9IGhhbmRsZWJhcnNHZXRFc2NhcGVkKGN1cnJlbnRDb250ZXh0
        LCBwcm9wZXJ0eSwgb3B0aW9ucyk7CiAgICBkYXRhLmJ1ZmZlci5wdXNoKG91
        dHB1dCk7CiAgfQp9CgpmdW5jdGlvbiBzaG91bGREaXNwbGF5SWZIZWxwZXJD
        b250ZW50KHJlc3VsdCkgewogIHZhciB0cnV0aHkgPSByZXN1bHQgJiYgZ2V0
        KHJlc3VsdCwgJ2lzVHJ1dGh5Jyk7CiAgaWYgKHR5cGVvZiB0cnV0aHkgPT09
        ICdib29sZWFuJykgeyByZXR1cm4gdHJ1dGh5OyB9CgogIGlmIChFbWJlci5p
        c0FycmF5KHJlc3VsdCkpIHsKICAgIHJldHVybiBnZXQocmVzdWx0LCAnbGVu
        Z3RoJykgIT09IDA7CiAgfSBlbHNlIHsKICAgIHJldHVybiAhIXJlc3VsdDsK
        ICB9Cn0KCi8qKgogICdfdHJpYWdlTXVzdGFjaGUnIGlzIHVzZWQgaW50ZXJu
        YWxseSBzZWxlY3QgYmV0d2VlbiBhIGJpbmRpbmcsIGhlbHBlciwgb3IgY29t
        cG9uZW50IGZvcgogIHRoZSBnaXZlbiBjb250ZXh0LiBVbnRpbCB0aGlzIHBv
        aW50LCBpdCB3b3VsZCBiZSBoYXJkIHRvIGRldGVybWluZSBpZiB0aGUKICBt
        dXN0YWNoZSBpcyBhIHByb3BlcnR5IHJlZmVyZW5jZSBvciBhIHJlZ3VsYXIg
        aGVscGVyIHJlZmVyZW5jZS4gVGhpcyB0cmlhZ2UKICBoZWxwZXIgcmVzb2x2
        ZXMgdGhhdC4KCiAgVGhpcyB3b3VsZCBub3QgYmUgdHlwaWNhbGx5IGludm9r
        ZWQgYnkgZGlyZWN0bHkuCgogIEBwcml2YXRlCiAgQG1ldGhvZCBfdHJpYWdl
        TXVzdGFjaGUKICBAZm9yIEVtYmVyLkhhbmRsZWJhcnMuaGVscGVycwogIEBw
        YXJhbSB7U3RyaW5nfSBwcm9wZXJ0eSBQcm9wZXJ0eS9oZWxwZXJJRCB0byB0
        cmlhZ2UKICBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyBoYXNoIG9mIHRlbXBs
        YXRlL3JlbmRlcmluZyBvcHRpb25zCiAgQHJldHVybiB7U3RyaW5nfSBIVE1M
        IHN0cmluZwoqLwpFbWJlckhhbmRsZWJhcnMucmVnaXN0ZXJIZWxwZXIoJ190
        cmlhZ2VNdXN0YWNoZScsIGZ1bmN0aW9uKHByb3BlcnR5LCBvcHRpb25zKSB7
        CiAgRW1iZXIuYXNzZXJ0KCJZb3UgY2Fubm90IHBhc3MgbW9yZSB0aGFuIG9u
        ZSBhcmd1bWVudCB0byB0aGUgX3RyaWFnZU11c3RhY2hlIGhlbHBlciIsIGFy
        Z3VtZW50cy5sZW5ndGggPD0gMik7CgogIGlmIChoZWxwZXJzW3Byb3BlcnR5
        XSkgewogICAgcmV0dXJuIGhlbHBlcnNbcHJvcGVydHldLmNhbGwodGhpcywg
        b3B0aW9ucyk7CiAgfQoKICB2YXIgaGVscGVyID0gRW1iZXIuSGFuZGxlYmFy
        cy5yZXNvbHZlSGVscGVyKG9wdGlvbnMuZGF0YS52aWV3LmNvbnRhaW5lciwg
        cHJvcGVydHkpOwogIGlmIChoZWxwZXIpIHsKICAgIHJldHVybiBoZWxwZXIu
        Y2FsbCh0aGlzLCBvcHRpb25zKTsKICB9CgogIHJldHVybiBoZWxwZXJzLmJp
        bmQuY2FsbCh0aGlzLCBwcm9wZXJ0eSwgb3B0aW9ucyk7Cn0pOwoKRW1iZXIu
        SGFuZGxlYmFycy5yZXNvbHZlSGVscGVyID0gZnVuY3Rpb24oY29udGFpbmVy
        LCBuYW1lKSB7CgogIGlmICghY29udGFpbmVyIHx8IG5hbWUuaW5kZXhPZign
        LScpID09PSAtMSkgewogICAgcmV0dXJuOwogIH0KCiAgdmFyIGhlbHBlciA9
        IGNvbnRhaW5lci5sb29rdXAoJ2hlbHBlcjonICsgbmFtZSk7CiAgaWYgKCFo
        ZWxwZXIpIHsKICAgIHZhciBjb21wb25lbnRMb29rdXAgPSBjb250YWluZXIu
        bG9va3VwKCdjb21wb25lbnQtbG9va3VwOm1haW4nKTsKICAgIEVtYmVyLmFz
        c2VydCgiQ291bGQgbm90IGZpbmQgJ2NvbXBvbmVudC1sb29rdXA6bWFpbicg
        b24gdGhlIHByb3ZpZGVkIGNvbnRhaW5lciwgd2hpY2ggaXMgbmVjZXNzYXJ5
        IGZvciBwZXJmb3JtaW5nIGNvbXBvbmVudCBsb29rdXBzIiwgY29tcG9uZW50
        TG9va3VwKTsKCiAgICB2YXIgQ29tcG9uZW50ID0gY29tcG9uZW50TG9va3Vw
        Lmxvb2t1cEZhY3RvcnkobmFtZSwgY29udGFpbmVyKTsKICAgIGlmIChDb21w
        b25lbnQpIHsKICAgICAgaGVscGVyID0gRW1iZXJIYW5kbGViYXJzLm1ha2VW
        aWV3SGVscGVyKENvbXBvbmVudCk7CiAgICAgIGNvbnRhaW5lci5yZWdpc3Rl
        cignaGVscGVyOicgKyBuYW1lLCBoZWxwZXIpOwogICAgfQogIH0KICByZXR1
        cm4gaGVscGVyOwp9OwoKLyoqCiAgYGJpbmRgIGNhbiBiZSB1c2VkIHRvIGRp
        c3BsYXkgYSB2YWx1ZSwgdGhlbiB1cGRhdGUgdGhhdCB2YWx1ZSBpZiBpdAog
        IGNoYW5nZXMuIEZvciBleGFtcGxlLCBpZiB5b3Ugd2FudGVkIHRvIHByaW50
        IHRoZSBgdGl0bGVgIHByb3BlcnR5IG9mCiAgYGNvbnRlbnRgOgoKICBgYGBo
        YW5kbGViYXJzCiAge3tiaW5kICJjb250ZW50LnRpdGxlIn19CiAgYGBgCgog
        IFRoaXMgd2lsbCByZXR1cm4gdGhlIGB0aXRsZWAgcHJvcGVydHkgYXMgYSBz
        dHJpbmcsIHRoZW4gY3JlYXRlIGEgbmV3IG9ic2VydmVyCiAgYXQgdGhlIHNw
        ZWNpZmllZCBwYXRoLiBJZiBpdCBjaGFuZ2VzLCBpdCB3aWxsIHVwZGF0ZSB0
        aGUgdmFsdWUgaW4gRE9NLiBOb3RlCiAgdGhhdCBpZiB5b3UgbmVlZCB0byBz
        dXBwb3J0IElFNyBhbmQgSUU4IHlvdSBtdXN0IG1vZGlmeSB0aGUgbW9kZWwg
        b2JqZWN0cwogIHByb3BlcnRpZXMgdXNpbmcgYEVtYmVyLmdldCgpYCBhbmQg
        YEVtYmVyLnNldCgpYCBmb3IgdGhpcyB0byB3b3JrIGFzIGl0CiAgcmVsaWVz
        IG9uIEVtYmVyJ3MgS1ZPIHN5c3RlbS4gRm9yIGFsbCBvdGhlciBicm93c2Vy
        cyB0aGlzIHdpbGwgYmUgaGFuZGxlZCBmb3IKICB5b3UgYXV0b21hdGljYWxs
        eS4KCiAgQHByaXZhdGUKICBAbWV0aG9kIGJpbmQKICBAZm9yIEVtYmVyLkhh
        bmRsZWJhcnMuaGVscGVycwogIEBwYXJhbSB7U3RyaW5nfSBwcm9wZXJ0eSBQ
        cm9wZXJ0eSB0byBiaW5kCiAgQHBhcmFtIHtGdW5jdGlvbn0gZm4gQ29udGV4
        dCB0byBwcm92aWRlIGZvciByZW5kZXJpbmcKICBAcmV0dXJuIHtTdHJpbmd9
        IEhUTUwgc3RyaW5nCiovCkVtYmVySGFuZGxlYmFycy5yZWdpc3RlckhlbHBl
        cignYmluZCcsIGZ1bmN0aW9uIGJpbmRIZWxwZXIocHJvcGVydHksIG9wdGlv
        bnMpIHsKICBFbWJlci5hc3NlcnQoIllvdSBjYW5ub3QgcGFzcyBtb3JlIHRo
        YW4gb25lIGFyZ3VtZW50IHRvIHRoZSBiaW5kIGhlbHBlciIsIGFyZ3VtZW50
        cy5sZW5ndGggPD0gMik7CgogIHZhciBjb250ZXh0ID0gKG9wdGlvbnMuY29u
        dGV4dHMgJiYgb3B0aW9ucy5jb250ZXh0cy5sZW5ndGgpID8gb3B0aW9ucy5j
        b250ZXh0c1swXSA6IHRoaXM7CgogIGlmICghb3B0aW9ucy5mbikgewogICAg
        cmV0dXJuIHNpbXBsZUJpbmQoY29udGV4dCwgcHJvcGVydHksIG9wdGlvbnMp
        OwogIH0KCiAgcmV0dXJuIGJpbmQuY2FsbChjb250ZXh0LCBwcm9wZXJ0eSwg
        b3B0aW9ucywgZmFsc2UsIGV4aXN0cyk7Cn0pOwoKLyoqCiAgVXNlIHRoZSBg
        Ym91bmRJZmAgaGVscGVyIHRvIGNyZWF0ZSBhIGNvbmRpdGlvbmFsIHRoYXQg
        cmUtZXZhbHVhdGVzCiAgd2hlbmV2ZXIgdGhlIHRydXRoaW5lc3Mgb2YgdGhl
        IGJvdW5kIHZhbHVlIGNoYW5nZXMuCgogIGBgYGhhbmRsZWJhcnMKICB7eyNi
        b3VuZElmICJjb250ZW50LnNob3VsZERpc3BsYXlUaXRsZSJ9fQogICAge3tj
        b250ZW50LnRpdGxlfX0KICB7ey9ib3VuZElmfX0KICBgYGAKCiAgQHByaXZh
        dGUKICBAbWV0aG9kIGJvdW5kSWYKICBAZm9yIEVtYmVyLkhhbmRsZWJhcnMu
        aGVscGVycwogIEBwYXJhbSB7U3RyaW5nfSBwcm9wZXJ0eSBQcm9wZXJ0eSB0
        byBiaW5kCiAgQHBhcmFtIHtGdW5jdGlvbn0gZm4gQ29udGV4dCB0byBwcm92
        aWRlIGZvciByZW5kZXJpbmcKICBAcmV0dXJuIHtTdHJpbmd9IEhUTUwgc3Ry
        aW5nCiovCkVtYmVySGFuZGxlYmFycy5yZWdpc3RlckhlbHBlcignYm91bmRJ
        ZicsIGZ1bmN0aW9uIGJvdW5kSWZIZWxwZXIocHJvcGVydHksIGZuKSB7CiAg
        dmFyIGNvbnRleHQgPSAoZm4uY29udGV4dHMgJiYgZm4uY29udGV4dHMubGVu
        Z3RoKSA/IGZuLmNvbnRleHRzWzBdIDogdGhpczsKCiAgcmV0dXJuIGJpbmQu
        Y2FsbChjb250ZXh0LCBwcm9wZXJ0eSwgZm4sIHRydWUsIHNob3VsZERpc3Bs
        YXlJZkhlbHBlckNvbnRlbnQsIHNob3VsZERpc3BsYXlJZkhlbHBlckNvbnRl
        bnQsIFsnaXNUcnV0aHknLCAnbGVuZ3RoJ10pOwp9KTsKCgovKioKICBAcHJp
        dmF0ZQoKICBVc2UgdGhlIGB1bmJvdW5kSWZgIGhlbHBlciB0byBjcmVhdGUg
        YSBjb25kaXRpb25hbCB0aGF0IGV2YWx1YXRlcyBvbmNlLgoKICBgYGBoYW5k
        bGViYXJzCiAge3sjdW5ib3VuZElmICJjb250ZW50LnNob3VsZERpc3BsYXlU
        aXRsZSJ9fQogICAge3tjb250ZW50LnRpdGxlfX0KICB7ey91bmJvdW5kSWZ9
        fQogIGBgYAoKICBAbWV0aG9kIHVuYm91bmRJZgogIEBmb3IgRW1iZXIuSGFu
        ZGxlYmFycy5oZWxwZXJzCiAgQHBhcmFtIHtTdHJpbmd9IHByb3BlcnR5IFBy
        b3BlcnR5IHRvIGJpbmQKICBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBDb250ZXh0
        IHRvIHByb3ZpZGUgZm9yIHJlbmRlcmluZwogIEByZXR1cm4ge1N0cmluZ30g
        SFRNTCBzdHJpbmcKKi8KRW1iZXJIYW5kbGViYXJzLnJlZ2lzdGVySGVscGVy
        KCd1bmJvdW5kSWYnLCBmdW5jdGlvbiB1bmJvdW5kSWZIZWxwZXIocHJvcGVy
        dHksIGZuKSB7CiAgdmFyIGNvbnRleHQgPSAoZm4uY29udGV4dHMgJiYgZm4u
        Y29udGV4dHMubGVuZ3RoKSA/IGZuLmNvbnRleHRzWzBdIDogdGhpcywKICAg
        ICAgZGF0YSA9IGZuLmRhdGEsCiAgICAgIHRlbXBsYXRlID0gZm4uZm4sCiAg
        ICAgIGludmVyc2UgPSBmbi5pbnZlcnNlLAogICAgICBub3JtYWxpemVkLCBw
        cm9wZXJ0eVZhbHVlLCByZXN1bHQ7CgogIG5vcm1hbGl6ZWQgPSBub3JtYWxp
        emVQYXRoKGNvbnRleHQsIHByb3BlcnR5LCBkYXRhKTsKICBwcm9wZXJ0eVZh
        bHVlID0gaGFuZGxlYmFyc0dldChjb250ZXh0LCBwcm9wZXJ0eSwgZm4pOwoK
        ICBpZiAoIXNob3VsZERpc3BsYXlJZkhlbHBlckNvbnRlbnQocHJvcGVydHlW
        YWx1ZSkpIHsKICAgIHRlbXBsYXRlID0gaW52ZXJzZTsKICB9CgogIHRlbXBs
        YXRlKGNvbnRleHQsIHsgZGF0YTogZGF0YSB9KTsKfSk7CgovKioKICBVc2Ug
        dGhlIGB7e3dpdGh9fWAgaGVscGVyIHdoZW4geW91IHdhbnQgdG8gc2NvcGUg
        Y29udGV4dC4gVGFrZSB0aGUgZm9sbG93aW5nIGNvZGUgYXMgYW4gZXhhbXBs
        ZToKCiAgYGBgaGFuZGxlYmFycwogIDxoNT57e3VzZXIubmFtZX19PC9oNT4K
        CiAgPGRpdiBjbGFzcz0icm9sZSI+CiAgICA8aDY+e3t1c2VyLnJvbGUubGFi
        ZWx9fTwvaDY+CiAgICA8c3BhbiBjbGFzcz0icm9sZS1pZCI+e3t1c2VyLnJv
        bGUuaWR9fTwvc3Bhbj4KCiAgICA8cCBjbGFzcz0icm9sZS1kZXNjIj57e3Vz
        ZXIucm9sZS5kZXNjcmlwdGlvbn19PC9wPgogIDwvZGl2PgogIGBgYAoKICBg
        e3t3aXRofX1gIGNhbiBiZSBvdXIgYmVzdCBmcmllbmQgaW4gdGhlc2UgY2Fz
        ZXMsIAogIGluc3RlYWQgb2Ygd3JpdGluZyBgdXNlci5yb2xlLipgIG92ZXIg
        YW5kIG92ZXIsIHdlIHVzZSBge3sjd2l0aCB1c2VyLnJvbGV9fWAuCiAgTm93
        IHRoZSBjb250ZXh0IHdpdGhpbiB0aGUgYHt7I3dpdGh9fSAuLiB7ey93aXRo
        fX1gIGJsb2NrIGlzIGB1c2VyLnJvbGVgIHNvIHlvdSBjYW4gZG8gdGhlIGZv
        bGxvd2luZzoKCiAgYGBgaGFuZGxlYmFycwogIDxoNT57e3VzZXIubmFtZX19
        PC9oNT4KCiAgPGRpdiBjbGFzcz0icm9sZSI+CiAgICB7eyN3aXRoIHVzZXIu
        cm9sZX19CiAgICAgIDxoNj57e2xhYmVsfX08L2g2PgogICAgICA8c3BhbiBj
        bGFzcz0icm9sZS1pZCI+e3tpZH19PC9zcGFuPgoKICAgICAgPHAgY2xhc3M9
        InJvbGUtZGVzYyI+e3tkZXNjcmlwdGlvbn19PC9wPgogICAge3svd2l0aH19
        CiAgPC9kaXY+CiAgYGBgCgogICMjIyBgYXNgIG9wZXJhdG9yCgogIFRoaXMg
        b3BlcmF0b3IgYWxpYXNlcyB0aGUgc2NvcGUgdG8gYSBuZXcgbmFtZS4gSXQn
        cyBoZWxwZnVsIGZvciBzZW1hbnRpYyBjbGFyaXR5IGFuZCB0byByZXRhaW4g
        CiAgZGVmYXVsdCBzY29wZSBvciB0byByZWZlcmVuY2UgZnJvbSBhbm90aGVy
        IGB7e3dpdGh9fWAgYmxvY2suCgogIGBgYGhhbmRsZWJhcnMKICAvLyBwb3N0
        cyBtaWdodCBub3QgYmUKICB7eyN3aXRoIHVzZXIucG9zdHMgYXMgYmxvZ1Bv
        c3RzfX0KICAgIDxkaXYgY2xhc3M9Im5vdGljZSI+CiAgICAgIFRoZXJlIGFy
        ZSB7e2Jsb2dQb3N0cy5sZW5ndGh9fSBibG9nIHBvc3RzIHdyaXR0ZW4gYnkg
        e3t1c2VyLm5hbWV9fS4KICAgIDwvZGl2PgoKICAgIHt7I2VhY2ggcG9zdCBp
        biBibG9nUG9zdHN9fQogICAgICA8bGk+e3twb3N0LnRpdGxlfX08L2xpPgog
        ICAge3svZWFjaH19CiAge3svd2l0aH19CiAgYGBgCgogIFdpdGhvdXQgdGhl
        IGBhc2Agb3BlcmF0b3IsIGl0IHdvdWxkIGJlIGltcG9zc2libGUgdG8gcmVm
        ZXJlbmNlIGB1c2VyLm5hbWVgIGluIHRoZSBleGFtcGxlIGFib3ZlLgoKICAj
        IyMgYGNvbnRyb2xsZXJgIG9wdGlvbgoKICBBZGRpbmcgYGNvbnRyb2xsZXI9
        J3NvbWV0aGluZydgIGluc3RydWN0cyB0aGUgYHt7d2l0aH19YCBoZWxwZXIg
        dG8gY3JlYXRlIGFuZCB1c2UgYW4gaW5zdGFuY2Ugb2YKICB0aGUgc3BlY2lm
        aWVkIGNvbnRyb2xsZXIgd2l0aCB0aGUgbmV3IGNvbnRleHQgYXMgaXRzIGNv
        bnRlbnQuCgogIFRoaXMgaXMgdmVyeSBzaW1pbGFyIHRvIHVzaW5nIGFuIGBp
        dGVtQ29udHJvbGxlcmAgb3B0aW9uIHdpdGggdGhlIGB7e2VhY2h9fWAgaGVs
        cGVyLgoKICBgYGBoYW5kbGViYXJzCiAge3sjd2l0aCB1c2Vycy5wb3N0cyBj
        b250cm9sbGVyPSd1c2VyQmxvZ1Bvc3RzJ319CiAgICB7eyEtIFRoZSBjdXJy
        ZW50IGNvbnRleHQgaXMgd3JhcHBlZCBpbiBvdXIgY29udHJvbGxlciBpbnN0
        YW5jZSB9fQogIHt7L3dpdGh9fQogIGBgYAoKICBJbiB0aGUgYWJvdmUgZXhh
        bXBsZSwgdGhlIHRlbXBsYXRlIHByb3ZpZGVkIHRvIHRoZSBge3t3aXRofX1g
        IGJsb2NrIGlzIG5vdyB3cmFwcGVkIGluIHRoZQogIGB1c2VyQmxvZ1Bvc3Rg
        IGNvbnRyb2xsZXIsIHdoaWNoIHByb3ZpZGVzIGEgdmVyeSBlbGVnYW50IHdh
        eSB0byBkZWNvcmF0ZSB0aGUgY29udGV4dCB3aXRoIGN1c3RvbQogIGZ1bmN0
        aW9ucy9wcm9wZXJ0aWVzLgoKICBAbWV0aG9kIHdpdGgKICBAZm9yIEVtYmVy
        LkhhbmRsZWJhcnMuaGVscGVycwogIEBwYXJhbSB7RnVuY3Rpb259IGNvbnRl
        eHQKICBAcGFyYW0ge0hhc2h9IG9wdGlvbnMKICBAcmV0dXJuIHtTdHJpbmd9
        IEhUTUwgc3RyaW5nCiovCkVtYmVySGFuZGxlYmFycy5yZWdpc3RlckhlbHBl
        cignd2l0aCcsIGZ1bmN0aW9uIHdpdGhIZWxwZXIoY29udGV4dCwgb3B0aW9u
        cykgewogIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSA0KSB7CiAgICB2YXIg
        a2V5d29yZE5hbWUsIHBhdGgsIHJvb3RQYXRoLCBub3JtYWxpemVkLCBjb250
        ZXh0UGF0aDsKCiAgICBFbWJlci5hc3NlcnQoIklmIHlvdSBwYXNzIG1vcmUg
        dGhhbiBvbmUgYXJndW1lbnQgdG8gdGhlIHdpdGggaGVscGVyLCBpdCBtdXN0
        IGJlIGluIHRoZSBmb3JtICN3aXRoIGZvbyBhcyBiYXIiLCBhcmd1bWVudHNb
        MV0gPT09ICJhcyIpOwogICAgb3B0aW9ucyA9IGFyZ3VtZW50c1szXTsKICAg
        IGtleXdvcmROYW1lID0gYXJndW1lbnRzWzJdOwogICAgcGF0aCA9IGFyZ3Vt
        ZW50c1swXTsKCiAgICBFbWJlci5hc3NlcnQoIllvdSBtdXN0IHBhc3MgYSBi
        bG9jayB0byB0aGUgd2l0aCBoZWxwZXIiLCBvcHRpb25zLmZuICYmIG9wdGlv
        bnMuZm4gIT09IEhhbmRsZWJhcnMuVk0ubm9vcCk7CgogICAgdmFyIGxvY2Fs
        aXplZE9wdGlvbnMgPSBvX2NyZWF0ZShvcHRpb25zKTsKICAgIGxvY2FsaXpl
        ZE9wdGlvbnMuZGF0YSA9IG9fY3JlYXRlKG9wdGlvbnMuZGF0YSk7CiAgICBs
        b2NhbGl6ZWRPcHRpb25zLmRhdGEua2V5d29yZHMgPSBvX2NyZWF0ZShvcHRp
        b25zLmRhdGEua2V5d29yZHMgfHwge30pOwoKICAgIGlmIChFbWJlci5pc0ds
        b2JhbFBhdGgocGF0aCkpIHsKICAgICAgY29udGV4dFBhdGggPSBwYXRoOwog
        ICAgfSBlbHNlIHsKICAgICAgbm9ybWFsaXplZCA9IG5vcm1hbGl6ZVBhdGgo
        dGhpcywgcGF0aCwgb3B0aW9ucy5kYXRhKTsKICAgICAgcGF0aCA9IG5vcm1h
        bGl6ZWQucGF0aDsKICAgICAgcm9vdFBhdGggPSBub3JtYWxpemVkLnJvb3Q7
        CgogICAgICAvLyBUaGlzIGlzIGEgd29ya2Fyb3VuZCBmb3IgdGhlIGZhY3Qg
        dGhhdCB5b3UgY2Fubm90IGJpbmQgc2VwYXJhdGUgb2JqZWN0cwogICAgICAv
        LyB0b2dldGhlci4gV2hlbiB3ZSBpbXBsZW1lbnQgdGhhdCBmdW5jdGlvbmFs
        aXR5LCB3ZSBzaG91bGQgdXNlIGl0IGhlcmUuCiAgICAgIHZhciBjb250ZXh0
        S2V5ID0gRW1iZXIuJC5leHBhbmRvICsgRW1iZXIuZ3VpZEZvcihyb290UGF0
        aCk7CiAgICAgIGxvY2FsaXplZE9wdGlvbnMuZGF0YS5rZXl3b3Jkc1tjb250
        ZXh0S2V5XSA9IHJvb3RQYXRoOwogICAgICAvLyBpZiB0aGUgcGF0aCBpcyAn
        JyAoInRoaXMiKSwganVzdCBiaW5kIGRpcmVjdGx5IHRvIHRoZSBjdXJyZW50
        IGNvbnRleHQKICAgICAgY29udGV4dFBhdGggPSBwYXRoID8gY29udGV4dEtl
        eSArICcuJyArIHBhdGggOiBjb250ZXh0S2V5OwogICAgfQoKICAgIEVtYmVy
        LmJpbmQobG9jYWxpemVkT3B0aW9ucy5kYXRhLmtleXdvcmRzLCBrZXl3b3Jk
        TmFtZSwgY29udGV4dFBhdGgpOwoKICAgIHJldHVybiBiaW5kLmNhbGwodGhp
        cywgcGF0aCwgbG9jYWxpemVkT3B0aW9ucywgdHJ1ZSwgZXhpc3RzKTsKICB9
        IGVsc2UgewogICAgRW1iZXIuYXNzZXJ0KCJZb3UgbXVzdCBwYXNzIGV4YWN0
        bHkgb25lIGFyZ3VtZW50IHRvIHRoZSB3aXRoIGhlbHBlciIsIGFyZ3VtZW50
        cy5sZW5ndGggPT09IDIpOwogICAgRW1iZXIuYXNzZXJ0KCJZb3UgbXVzdCBw
        YXNzIGEgYmxvY2sgdG8gdGhlIHdpdGggaGVscGVyIiwgb3B0aW9ucy5mbiAm
        JiBvcHRpb25zLmZuICE9PSBIYW5kbGViYXJzLlZNLm5vb3ApOwogICAgcmV0
        dXJuIGhlbHBlcnMuYmluZC5jYWxsKG9wdGlvbnMuY29udGV4dHNbMF0sIGNv
        bnRleHQsIG9wdGlvbnMpOwogIH0KfSk7CgoKLyoqCiAgU2VlIFtib3VuZElm
        XSgvYXBpL2NsYXNzZXMvRW1iZXIuSGFuZGxlYmFycy5oZWxwZXJzLmh0bWwj
        bWV0aG9kX2JvdW5kSWYpCiAgYW5kIFt1bmJvdW5kSWZdKC9hcGkvY2xhc3Nl
        cy9FbWJlci5IYW5kbGViYXJzLmhlbHBlcnMuaHRtbCNtZXRob2RfdW5ib3Vu
        ZElmKQoKICBAbWV0aG9kIGlmCiAgQGZvciBFbWJlci5IYW5kbGViYXJzLmhl
        bHBlcnMKICBAcGFyYW0ge0Z1bmN0aW9ufSBjb250ZXh0CiAgQHBhcmFtIHtI
        YXNofSBvcHRpb25zCiAgQHJldHVybiB7U3RyaW5nfSBIVE1MIHN0cmluZwoq
        LwpFbWJlckhhbmRsZWJhcnMucmVnaXN0ZXJIZWxwZXIoJ2lmJywgZnVuY3Rp
        b24gaWZIZWxwZXIoY29udGV4dCwgb3B0aW9ucykgewogIEVtYmVyLmFzc2Vy
        dCgiWW91IG11c3QgcGFzcyBleGFjdGx5IG9uZSBhcmd1bWVudCB0byB0aGUg
        aWYgaGVscGVyIiwgYXJndW1lbnRzLmxlbmd0aCA9PT0gMik7CiAgRW1iZXIu
        YXNzZXJ0KCJZb3UgbXVzdCBwYXNzIGEgYmxvY2sgdG8gdGhlIGlmIGhlbHBl
        ciIsIG9wdGlvbnMuZm4gJiYgb3B0aW9ucy5mbiAhPT0gSGFuZGxlYmFycy5W
        TS5ub29wKTsKICBpZiAob3B0aW9ucy5kYXRhLmlzVW5ib3VuZCkgewogICAg
        cmV0dXJuIGhlbHBlcnMudW5ib3VuZElmLmNhbGwob3B0aW9ucy5jb250ZXh0
        c1swXSwgY29udGV4dCwgb3B0aW9ucyk7CiAgfSBlbHNlIHsKICAgIHJldHVy
        biBoZWxwZXJzLmJvdW5kSWYuY2FsbChvcHRpb25zLmNvbnRleHRzWzBdLCBj
        b250ZXh0LCBvcHRpb25zKTsKICB9Cn0pOwoKLyoqCiAgQG1ldGhvZCB1bmxl
        c3MKICBAZm9yIEVtYmVyLkhhbmRsZWJhcnMuaGVscGVycwogIEBwYXJhbSB7
        RnVuY3Rpb259IGNvbnRleHQKICBAcGFyYW0ge0hhc2h9IG9wdGlvbnMKICBA
        cmV0dXJuIHtTdHJpbmd9IEhUTUwgc3RyaW5nCiovCkVtYmVySGFuZGxlYmFy
        cy5yZWdpc3RlckhlbHBlcigndW5sZXNzJywgZnVuY3Rpb24gdW5sZXNzSGVs
        cGVyKGNvbnRleHQsIG9wdGlvbnMpIHsKICBFbWJlci5hc3NlcnQoIllvdSBt
        dXN0IHBhc3MgZXhhY3RseSBvbmUgYXJndW1lbnQgdG8gdGhlIHVubGVzcyBo
        ZWxwZXIiLCBhcmd1bWVudHMubGVuZ3RoID09PSAyKTsKICBFbWJlci5hc3Nl
        cnQoIllvdSBtdXN0IHBhc3MgYSBibG9jayB0byB0aGUgdW5sZXNzIGhlbHBl
        ciIsIG9wdGlvbnMuZm4gJiYgb3B0aW9ucy5mbiAhPT0gSGFuZGxlYmFycy5W
        TS5ub29wKTsKCiAgdmFyIGZuID0gb3B0aW9ucy5mbiwgaW52ZXJzZSA9IG9w
        dGlvbnMuaW52ZXJzZTsKCiAgb3B0aW9ucy5mbiA9IGludmVyc2U7CiAgb3B0
        aW9ucy5pbnZlcnNlID0gZm47CgogIGlmIChvcHRpb25zLmRhdGEuaXNVbmJv
        dW5kKSB7CiAgICByZXR1cm4gaGVscGVycy51bmJvdW5kSWYuY2FsbChvcHRp
        b25zLmNvbnRleHRzWzBdLCBjb250ZXh0LCBvcHRpb25zKTsKICB9IGVsc2Ug
        ewogICAgcmV0dXJuIGhlbHBlcnMuYm91bmRJZi5jYWxsKG9wdGlvbnMuY29u
        dGV4dHNbMF0sIGNvbnRleHQsIG9wdGlvbnMpOwogIH0KfSk7CgovKioKICBg
        YmluZC1hdHRyYCBhbGxvd3MgeW91IHRvIGNyZWF0ZSBhIGJpbmRpbmcgYmV0
        d2VlbiBET00gZWxlbWVudCBhdHRyaWJ1dGVzIGFuZAogIEVtYmVyIG9iamVj
        dHMuIEZvciBleGFtcGxlOgoKICBgYGBoYW5kbGViYXJzCiAgPGltZyB7e2Jp
        bmQtYXR0ciBzcmM9ImltYWdlVXJsIiBhbHQ9ImltYWdlVGl0bGUifX0+CiAg
        YGBgCgogIFRoZSBhYm92ZSBoYW5kbGViYXJzIHRlbXBsYXRlIHdpbGwgZmls
        bCB0aGUgYDxpbWc+YCdzIGBzcmNgIGF0dHJpYnV0ZSB3aWxsCiAgdGhlIHZh
        bHVlIG9mIHRoZSBwcm9wZXJ0eSByZWZlcmVuY2VkIHdpdGggYCJpbWFnZVVy
        bCJgIGFuZCBpdHMgYGFsdGAKICBhdHRyaWJ1dGUgd2l0aCB0aGUgdmFsdWUg
        b2YgdGhlIHByb3BlcnR5IHJlZmVyZW5jZWQgd2l0aCBgImltYWdlVGl0bGUi
        YC4KCiAgSWYgdGhlIHJlbmRlcmluZyBjb250ZXh0IG9mIHRoaXMgdGVtcGxh
        dGUgaXMgdGhlIGZvbGxvd2luZyBvYmplY3Q6CgogIGBgYGphdmFzY3JpcHQK
        ICB7CiAgICBpbWFnZVVybDogJ2h0dHA6Ly9sb2xjYXRzLmluZm8vaGF6LWEt
        ZnVubnknLAogICAgaW1hZ2VUaXRsZTogJ0EgaHVtb3JvdXMgaW1hZ2Ugb2Yg
        YSBjYXQnCiAgfQogIGBgYAoKICBUaGUgcmVzdWx0aW5nIEhUTUwgb3V0cHV0
        IHdpbGwgYmU6CgogIGBgYGh0bWwKICA8aW1nIHNyYz0iaHR0cDovL2xvbGNh
        dHMuaW5mby9oYXotYS1mdW5ueSIgYWx0PSJBIGh1bW9yb3VzIGltYWdlIG9m
        IGEgY2F0Ij4KICBgYGAKCiAgYGJpbmQtYXR0cmAgY2Fubm90IHJlZGVjbGFy
        ZSBleGlzdGluZyBET00gZWxlbWVudCBhdHRyaWJ1dGVzLiBUaGUgdXNlIG9m
        IGBzcmNgCiAgaW4gdGhlIGZvbGxvd2luZyBgYmluZC1hdHRyYCBleGFtcGxl
        IHdpbGwgYmUgaWdub3JlZCBhbmQgdGhlIGhhcmQgY29kZWQgdmFsdWUKICBv
        ZiBgc3JjPSIvZmFpbHdoYWxlLmdpZiJgIHdpbGwgdGFrZSBwcmVjZWRlbmNl
        OgoKICBgYGBoYW5kbGViYXJzCiAgPGltZyBzcmM9Ii9mYWlsd2hhbGUuZ2lm
        IiB7e2JpbmQtYXR0ciBzcmM9ImltYWdlVXJsIiBhbHQ9ImltYWdlVGl0bGUi
        fX0+CiAgYGBgCgogICMjIyBgYmluZC1hdHRyYCBhbmQgdGhlIGBjbGFzc2Ag
        YXR0cmlidXRlCgogIGBiaW5kLWF0dHJgIHN1cHBvcnRzIGEgc3BlY2lhbCBz
        eW50YXggZm9yIGhhbmRsaW5nIGEgbnVtYmVyIG9mIGNhc2VzIHVuaXF1ZQog
        IHRvIHRoZSBgY2xhc3NgIERPTSBlbGVtZW50IGF0dHJpYnV0ZS4gVGhlIGBj
        bGFzc2AgYXR0cmlidXRlIGNvbWJpbmVzCiAgbXVsdGlwbGUgZGlzY3JldGUg
        dmFsdWVzIGludG8gYSBzaW5nbGUgYXR0cmlidXRlIGFzIGEgc3BhY2UtZGVs
        aW1pdGVkCiAgbGlzdCBvZiBzdHJpbmdzLiBFYWNoIHN0cmluZyBjYW4gYmU6
        CgogICogYSBzdHJpbmcgcmV0dXJuIHZhbHVlIG9mIGFuIG9iamVjdCdzIHBy
        b3BlcnR5LgogICogYSBib29sZWFuIHJldHVybiB2YWx1ZSBvZiBhbiBvYmpl
        Y3QncyBwcm9wZXJ0eQogICogYSBoYXJkLWNvZGVkIHZhbHVlCgogIEEgc3Ry
        aW5nIHJldHVybiB2YWx1ZSB3b3JrcyBpZGVudGljYWxseSB0byBvdGhlciB1
        c2VzIG9mIGBiaW5kLWF0dHJgLiBUaGUKICByZXR1cm4gdmFsdWUgb2YgdGhl
        IHByb3BlcnR5IHdpbGwgYmVjb21lIHRoZSB2YWx1ZSBvZiB0aGUgYXR0cmli
        dXRlLiBGb3IKICBleGFtcGxlLCB0aGUgZm9sbG93aW5nIHZpZXcgYW5kIHRl
        bXBsYXRlOgoKICBgYGBqYXZhc2NyaXB0CiAgICBBVmlldyA9IEVtYmVyLlZp
        ZXcuZXh0ZW5kKHsKICAgICAgc29tZVByb3BlcnR5OiBmdW5jdGlvbigpIHsK
        ICAgICAgICByZXR1cm4gImFWYWx1ZSI7CiAgICAgIH0ucHJvcGVydHkoKQog
        ICAgfSkKICBgYGAKCiAgYGBgaGFuZGxlYmFycwogIDxpbWcge3tiaW5kLWF0
        dHIgY2xhc3M9InZpZXcuc29tZVByb3BlcnR5fX0+CiAgYGBgCgogIFJlc3Vs
        dCBpbiB0aGUgZm9sbG93aW5nIHJlbmRlcmVkIG91dHB1dDoKCiAgYGBgaHRt
        bAogIDxpbWcgY2xhc3M9ImFWYWx1ZSI+CiAgYGBgCgogIEEgYm9vbGVhbiBy
        ZXR1cm4gdmFsdWUgd2lsbCBpbnNlcnQgYSBzcGVjaWZpZWQgY2xhc3MgbmFt
        ZSBpZiB0aGUgcHJvcGVydHkKICByZXR1cm5zIGB0cnVlYCBhbmQgcmVtb3Zl
        IHRoZSBjbGFzcyBuYW1lIGlmIHRoZSBwcm9wZXJ0eSByZXR1cm5zIGBmYWxz
        ZWAuCgogIEEgY2xhc3MgbmFtZSBpcyBwcm92aWRlZCB2aWEgdGhlIHN5bnRh
        eAogIGBzb21lUHJvcGVydHlOYW1lOmNsYXNzLW5hbWUtaWYtdHJ1ZWAuCgog
        IGBgYGphdmFzY3JpcHQKICBBVmlldyA9IEVtYmVyLlZpZXcuZXh0ZW5kKHsK
        ICAgIHNvbWVCb29sOiB0cnVlCiAgfSkKICBgYGAKCiAgYGBgaGFuZGxlYmFy
        cwogIDxpbWcge3tiaW5kLWF0dHIgY2xhc3M9InZpZXcuc29tZUJvb2w6Y2xh
        c3MtbmFtZS1pZi10cnVlIn19PgogIGBgYAoKICBSZXN1bHQgaW4gdGhlIGZv
        bGxvd2luZyByZW5kZXJlZCBvdXRwdXQ6CgogIGBgYGh0bWwKICA8aW1nIGNs
        YXNzPSJjbGFzcy1uYW1lLWlmLXRydWUiPgogIGBgYAoKICBBbiBhZGRpdGlv
        bmFsIHNlY3Rpb24gb2YgdGhlIGJpbmRpbmcgY2FuIGJlIHByb3ZpZGVkIGlm
        IHlvdSB3YW50IHRvCiAgcmVwbGFjZSB0aGUgZXhpc3RpbmcgY2xhc3MgaW5z
        dGVhZCBvZiByZW1vdmluZyBpdCB3aGVuIHRoZSBib29sZWFuCiAgdmFsdWUg
        Y2hhbmdlczoKCiAgYGBgaGFuZGxlYmFycwogIDxpbWcge3tiaW5kLWF0dHIg
        Y2xhc3M9InZpZXcuc29tZUJvb2w6Y2xhc3MtbmFtZS1pZi10cnVlOmNsYXNz
        LW5hbWUtaWYtZmFsc2UifX0+CiAgYGBgCgogIEEgaGFyZC1jb2RlZCB2YWx1
        ZSBjYW4gYmUgdXNlZCBieSBwcmVwZW5kaW5nIGA6YCB0byB0aGUgZGVzaXJl
        ZAogIGNsYXNzIG5hbWU6IGA6Y2xhc3MtbmFtZS10by1hbHdheXMtYXBwbHlg
        LgoKICBgYGBoYW5kbGViYXJzCiAgPGltZyB7e2JpbmQtYXR0ciBjbGFzcz0i
        OmNsYXNzLW5hbWUtdG8tYWx3YXlzLWFwcGx5In19PgogIGBgYAoKICBSZXN1
        bHRzIGluIHRoZSBmb2xsb3dpbmcgcmVuZGVyZWQgb3V0cHV0OgoKICBgYGBo
        dG1sCiAgPGltZyBjbGFzcz0iY2xhc3MtbmFtZS10by1hbHdheXMtYXBwbHki
        PgogIGBgYAoKICBBbGwgdGhyZWUgc3RyYXRlZ2llcyAtIHN0cmluZyByZXR1
        cm4gdmFsdWUsIGJvb2xlYW4gcmV0dXJuIHZhbHVlLCBhbmQKICBoYXJkLWNv
        ZGVkIHZhbHVlIOKAkyBjYW4gYmUgY29tYmluZWQgaW4gYSBzaW5nbGUgZGVj
        bGFyYXRpb246CgogIGBgYGhhbmRsZWJhcnMKICA8aW1nIHt7YmluZC1hdHRy
        IGNsYXNzPSI6Y2xhc3MtbmFtZS10by1hbHdheXMtYXBwbHkgdmlldy5zb21l
        Qm9vbDpjbGFzcy1uYW1lLWlmLXRydWUgdmlldy5zb21lUHJvcGVydHkifX0+
        CiAgYGBgCgogIEBtZXRob2QgYmluZC1hdHRyCiAgQGZvciBFbWJlci5IYW5k
        bGViYXJzLmhlbHBlcnMKICBAcGFyYW0ge0hhc2h9IG9wdGlvbnMKICBAcmV0
        dXJuIHtTdHJpbmd9IEhUTUwgc3RyaW5nCiovCkVtYmVySGFuZGxlYmFycy5y
        ZWdpc3RlckhlbHBlcignYmluZC1hdHRyJywgZnVuY3Rpb24gYmluZEF0dHJI
        ZWxwZXIob3B0aW9ucykgewoKICB2YXIgYXR0cnMgPSBvcHRpb25zLmhhc2g7
        CgogIEVtYmVyLmFzc2VydCgiWW91IG11c3Qgc3BlY2lmeSBhdCBsZWFzdCBv
        bmUgaGFzaCBhcmd1bWVudCB0byBiaW5kLWF0dHIiLCAhIUVtYmVyLmtleXMo
        YXR0cnMpLmxlbmd0aCk7CgogIHZhciB2aWV3ID0gb3B0aW9ucy5kYXRhLnZp
        ZXc7CiAgdmFyIHJldCA9IFtdOwogIHZhciBjdHggPSB0aGlzOwoKICAvLyBH
        ZW5lcmF0ZSBhIHVuaXF1ZSBpZCBmb3IgdGhpcyBlbGVtZW50LiBUaGlzIHdp
        bGwgYmUgYWRkZWQgYXMgYQogIC8vIGRhdGEgYXR0cmlidXRlIHRvIHRoZSBl
        bGVtZW50IHNvIGl0IGNhbiBiZSBsb29rZWQgdXAgd2hlbgogIC8vIHRoZSBi
        b3VuZCBwcm9wZXJ0eSBjaGFuZ2VzLgogIHZhciBkYXRhSWQgPSArK0VtYmVy
        LnV1aWQ7CgogIC8vIEhhbmRsZSBjbGFzc2VzIGRpZmZlcmVudGx5LCBhcyB3
        ZSBjYW4gYmluZCBtdWx0aXBsZSBjbGFzc2VzCiAgdmFyIGNsYXNzQmluZGlu
        Z3MgPSBhdHRyc1snY2xhc3MnXTsKICBpZiAoY2xhc3NCaW5kaW5ncyAhPSBu
        dWxsKSB7CiAgICB2YXIgY2xhc3NSZXN1bHRzID0gRW1iZXJIYW5kbGViYXJz
        LmJpbmRDbGFzc2VzKHRoaXMsIGNsYXNzQmluZGluZ3MsIHZpZXcsIGRhdGFJ
        ZCwgb3B0aW9ucyk7CgogICAgcmV0LnB1c2goJ2NsYXNzPSInICsgSGFuZGxl
        YmFycy5VdGlscy5lc2NhcGVFeHByZXNzaW9uKGNsYXNzUmVzdWx0cy5qb2lu
        KCcgJykpICsgJyInKTsKICAgIGRlbGV0ZSBhdHRyc1snY2xhc3MnXTsKICB9
        CgogIHZhciBhdHRyS2V5cyA9IEVtYmVyLmtleXMoYXR0cnMpOwoKICAvLyBG
        b3IgZWFjaCBhdHRyaWJ1dGUgcGFzc2VkLCBjcmVhdGUgYW4gb2JzZXJ2ZXIg
        YW5kIGVtaXQgdGhlCiAgLy8gY3VycmVudCB2YWx1ZSBvZiB0aGUgcHJvcGVy
        dHkgYXMgYW4gYXR0cmlidXRlLgogIGZvckVhY2guY2FsbChhdHRyS2V5cywg
        ZnVuY3Rpb24oYXR0cikgewogICAgdmFyIHBhdGggPSBhdHRyc1thdHRyXSwK
        ICAgICAgICBub3JtYWxpemVkOwoKICAgIEVtYmVyLmFzc2VydChmbXQoIllv
        dSBtdXN0IHByb3ZpZGUgYW4gZXhwcmVzc2lvbiBhcyB0aGUgdmFsdWUgb2Yg
        Ym91bmQgYXR0cmlidXRlLiBZb3Ugc3BlY2lmaWVkOiAlQD0lQCIsIFthdHRy
        LCBwYXRoXSksIHR5cGVvZiBwYXRoID09PSAnc3RyaW5nJyk7CgogICAgbm9y
        bWFsaXplZCA9IG5vcm1hbGl6ZVBhdGgoY3R4LCBwYXRoLCBvcHRpb25zLmRh
        dGEpOwoKICAgIHZhciB2YWx1ZSA9IChwYXRoID09PSAndGhpcycpID8gbm9y
        bWFsaXplZC5yb290IDogaGFuZGxlYmFyc0dldChjdHgsIHBhdGgsIG9wdGlv
        bnMpLAogICAgICAgIHR5cGUgPSBFbWJlci50eXBlT2YodmFsdWUpOwoKICAg
        IEVtYmVyLmFzc2VydChmbXQoIkF0dHJpYnV0ZXMgbXVzdCBiZSBudW1iZXJz
        LCBzdHJpbmdzIG9yIGJvb2xlYW5zLCBub3QgJUAiLCBbdmFsdWVdKSwgdmFs
        dWUgPT09IG51bGwgfHwgdmFsdWUgPT09IHVuZGVmaW5lZCB8fCB0eXBlID09
        PSAnbnVtYmVyJyB8fCB0eXBlID09PSAnc3RyaW5nJyB8fCB0eXBlID09PSAn
        Ym9vbGVhbicpOwoKICAgIHZhciBvYnNlcnZlciwgaW52b2tlcjsKCiAgICBv
        YnNlcnZlciA9IGZ1bmN0aW9uIG9ic2VydmVyKCkgewogICAgICB2YXIgcmVz
        dWx0ID0gaGFuZGxlYmFyc0dldChjdHgsIHBhdGgsIG9wdGlvbnMpOwoKICAg
        ICAgRW1iZXIuYXNzZXJ0KGZtdCgiQXR0cmlidXRlcyBtdXN0IGJlIG51bWJl
        cnMsIHN0cmluZ3Mgb3IgYm9vbGVhbnMsIG5vdCAlQCIsIFtyZXN1bHRdKSwK
        ICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9PT0gbnVsbCB8fCByZXN1bHQg
        PT09IHVuZGVmaW5lZCB8fCB0eXBlb2YgcmVzdWx0ID09PSAnbnVtYmVyJyB8
        fAogICAgICAgICAgICAgICAgICAgICB0eXBlb2YgcmVzdWx0ID09PSAnc3Ry
        aW5nJyB8fCB0eXBlb2YgcmVzdWx0ID09PSAnYm9vbGVhbicpOwoKICAgICAg
        dmFyIGVsZW0gPSB2aWV3LiQoIltkYXRhLWJpbmRhdHRyLSIgKyBkYXRhSWQg
        KyAiPSciICsgZGF0YUlkICsgIiddIik7CgogICAgICAvLyBJZiB3ZSBhcmVu
        J3QgYWJsZSB0byBmaW5kIHRoZSBlbGVtZW50LCBpdCBtZWFucyB0aGUgZWxl
        bWVudAogICAgICAvLyB0byB3aGljaCB3ZSB3ZXJlIGJvdW5kIGhhcyBiZWVu
        IHJlbW92ZWQgZnJvbSB0aGUgdmlldy4KICAgICAgLy8gSW4gdGhhdCBjYXNl
        LCB3ZSBjYW4gYXNzdW1lIHRoZSB0ZW1wbGF0ZSBoYXMgYmVlbiByZS1yZW5k
        ZXJlZAogICAgICAvLyBhbmQgd2UgbmVlZCB0byBjbGVhbiB1cCB0aGUgb2Jz
        ZXJ2ZXIuCiAgICAgIGlmICghZWxlbSB8fCBlbGVtLmxlbmd0aCA9PT0gMCkg
        ewogICAgICAgIEVtYmVyLnJlbW92ZU9ic2VydmVyKG5vcm1hbGl6ZWQucm9v
        dCwgbm9ybWFsaXplZC5wYXRoLCBpbnZva2VyKTsKICAgICAgICByZXR1cm47
        CiAgICAgIH0KCiAgICAgIEVtYmVyLlZpZXcuYXBwbHlBdHRyaWJ1dGVCaW5k
        aW5ncyhlbGVtLCBhdHRyLCByZXN1bHQpOwogICAgfTsKCiAgICAvLyBBZGQg
        YW4gb2JzZXJ2ZXIgdG8gdGhlIHZpZXcgZm9yIHdoZW4gdGhlIHByb3BlcnR5
        IGNoYW5nZXMuCiAgICAvLyBXaGVuIHRoZSBvYnNlcnZlciBmaXJlcywgZmlu
        ZCB0aGUgZWxlbWVudCB1c2luZyB0aGUKICAgIC8vIHVuaXF1ZSBkYXRhIGlk
        IGFuZCB1cGRhdGUgdGhlIGF0dHJpYnV0ZSB0byB0aGUgbmV3IHZhbHVlLgog
        ICAgLy8gTm90ZTogZG9uJ3QgYWRkIG9ic2VydmVyIHdoZW4gcGF0aCBpcyAn
        dGhpcycgb3IgcGF0aAogICAgLy8gaXMgd2hvbGUga2V5d29yZCBlLmcuIHt7
        I2VhY2ggeCBpbiBsaXN0fX0gLi4uIHt7YmluZC1hdHRyIGF0dHI9IngifX0K
        ICAgIGlmIChwYXRoICE9PSAndGhpcycgJiYgIShub3JtYWxpemVkLmlzS2V5
        d29yZCAmJiBub3JtYWxpemVkLnBhdGggPT09ICcnICkpIHsKICAgICAgdmll
        dy5yZWdpc3Rlck9ic2VydmVyKG5vcm1hbGl6ZWQucm9vdCwgbm9ybWFsaXpl
        ZC5wYXRoLCBvYnNlcnZlcik7CiAgICB9CgogICAgLy8gaWYgdGhpcyBjaGFu
        Z2VzLCBhbHNvIGNoYW5nZSB0aGUgbG9naWMgaW4gZW1iZXItdmlld3MvbGli
        L3ZpZXdzL3ZpZXcuanMKICAgIGlmICgodHlwZSA9PT0gJ3N0cmluZycgfHwg
        KHR5cGUgPT09ICdudW1iZXInICYmICFpc05hTih2YWx1ZSkpKSkgewogICAg
        ICByZXQucHVzaChhdHRyICsgJz0iJyArIEhhbmRsZWJhcnMuVXRpbHMuZXNj
        YXBlRXhwcmVzc2lvbih2YWx1ZSkgKyAnIicpOwogICAgfSBlbHNlIGlmICh2
        YWx1ZSAmJiB0eXBlID09PSAnYm9vbGVhbicpIHsKICAgICAgLy8gVGhlIGRl
        dmVsb3BlciBjb250cm9scyB0aGUgYXR0ciBuYW1lLCBzbyBpdCBzaG91bGQg
        YWx3YXlzIGJlIHNhZmUKICAgICAgcmV0LnB1c2goYXR0ciArICc9IicgKyBh
        dHRyICsgJyInKTsKICAgIH0KICB9LCB0aGlzKTsKCiAgLy8gQWRkIHRoZSB1
        bmlxdWUgaWRlbnRpZmllcgogIC8vIE5PVEU6IFdlIHVzZSBhbGwgbG93ZXIt
        Y2FzZSBzaW5jZSBGaXJlZm94IGhhcyBwcm9ibGVtcyB3aXRoIG1peGVkIGNh
        c2UgaW4gU1ZHCiAgcmV0LnB1c2goJ2RhdGEtYmluZGF0dHItJyArIGRhdGFJ
        ZCArICc9IicgKyBkYXRhSWQgKyAnIicpOwogIHJldHVybiBuZXcgRW1iZXJI
        YW5kbGViYXJzLlNhZmVTdHJpbmcocmV0LmpvaW4oJyAnKSk7Cn0pOwoKLyoq
        CiAgU2VlIGBiaW5kLWF0dHJgCgogIEBtZXRob2QgYmluZEF0dHIKICBAZm9y
        IEVtYmVyLkhhbmRsZWJhcnMuaGVscGVycwogIEBkZXByZWNhdGVkCiAgQHBh
        cmFtIHtGdW5jdGlvbn0gY29udGV4dAogIEBwYXJhbSB7SGFzaH0gb3B0aW9u
        cwogIEByZXR1cm4ge1N0cmluZ30gSFRNTCBzdHJpbmcKKi8KRW1iZXJIYW5k
        bGViYXJzLnJlZ2lzdGVySGVscGVyKCdiaW5kQXR0cicsIGZ1bmN0aW9uIGJp
        bmRBdHRySGVscGVyKCkgewogIEVtYmVyLndhcm4oIlRoZSAnYmluZEF0dHIn
        IHZpZXcgaGVscGVyIGlzIGRlcHJlY2F0ZWQgaW4gZmF2b3Igb2YgJ2JpbmQt
        YXR0ciciKTsKICByZXR1cm4gRW1iZXJIYW5kbGViYXJzLmhlbHBlcnNbJ2Jp
        bmQtYXR0ciddLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0pOwoKLyoqCiAg
        SGVscGVyIHRoYXQsIGdpdmVuIGEgc3BhY2Utc2VwYXJhdGVkIHN0cmluZyBv
        ZiBwcm9wZXJ0eSBwYXRocyBhbmQgYSBjb250ZXh0LAogIHJldHVybnMgYW4g
        YXJyYXkgb2YgY2xhc3MgbmFtZXMuIENhbGxpbmcgdGhpcyBtZXRob2QgYWxz
        byBoYXMgdGhlIHNpZGUKICBlZmZlY3Qgb2Ygc2V0dGluZyB1cCBvYnNlcnZl
        cnMgYXQgdGhvc2UgcHJvcGVydHkgcGF0aHMsIHN1Y2ggdGhhdCBpZiB0aGV5
        CiAgY2hhbmdlLCB0aGUgY29ycmVjdCBjbGFzcyBuYW1lIHdpbGwgYmUgcmVh
        cHBsaWVkIHRvIHRoZSBET00gZWxlbWVudC4KCiAgRm9yIGV4YW1wbGUsIGlm
        IHlvdSBwYXNzIHRoZSBzdHJpbmcgImZvb0JhciIsIGl0IHdpbGwgZmlyc3Qg
        bG9vayB1cCB0aGUKICAiZm9vQmFyIiB2YWx1ZSBvZiB0aGUgY29udGV4dC4g
        SWYgdGhhdCB2YWx1ZSBpcyB0cnVlLCBpdCB3aWxsIGFkZCB0aGUKICAiZm9v
        LWJhciIgY2xhc3MgdG8gdGhlIGN1cnJlbnQgZWxlbWVudCAoaS5lLiwgdGhl
        IGRhc2hlcml6ZWQgZm9ybSBvZgogICJmb29CYXIiKS4gSWYgdGhlIHZhbHVl
        IGlzIGEgc3RyaW5nLCBpdCB3aWxsIGFkZCB0aGF0IHN0cmluZyBhcyB0aGUg
        Y2xhc3MuCiAgT3RoZXJ3aXNlLCBpdCB3aWxsIG5vdCBhZGQgYW55IG5ldyBj
        bGFzcyBuYW1lLgoKICBAcHJpdmF0ZQogIEBtZXRob2QgYmluZENsYXNzZXMK
        ICBAZm9yIEVtYmVyLkhhbmRsZWJhcnMKICBAcGFyYW0ge0VtYmVyLk9iamVj
        dH0gY29udGV4dCBUaGUgY29udGV4dCBmcm9tIHdoaWNoIHRvIGxvb2t1cCBw
        cm9wZXJ0aWVzCiAgQHBhcmFtIHtTdHJpbmd9IGNsYXNzQmluZGluZ3MgQSBz
        dHJpbmcsIHNwYWNlLXNlcGFyYXRlZCwgb2YgY2xhc3MgYmluZGluZ3MKICAg
        IHRvIHVzZQogIEBwYXJhbSB7RW1iZXIuVmlld30gdmlldyBUaGUgdmlldyBp
        biB3aGljaCBvYnNlcnZlcnMgc2hvdWxkIGxvb2sgZm9yIHRoZQogICAgZWxl
        bWVudCB0byB1cGRhdGUKICBAcGFyYW0ge1NydGluZ30gYmluZEF0dHJJZCBP
        cHRpb25hbCBiaW5kQXR0ciBpZCB1c2VkIHRvIGxvb2t1cCBlbGVtZW50cwog
        IEByZXR1cm4ge0FycmF5fSBBbiBhcnJheSBvZiBjbGFzcyBuYW1lcyB0byBh
        ZGQKKi8KRW1iZXJIYW5kbGViYXJzLmJpbmRDbGFzc2VzID0gZnVuY3Rpb24o
        Y29udGV4dCwgY2xhc3NCaW5kaW5ncywgdmlldywgYmluZEF0dHJJZCwgb3B0
        aW9ucykgewogIHZhciByZXQgPSBbXSwgbmV3Q2xhc3MsIHZhbHVlLCBlbGVt
        OwoKICAvLyBIZWxwZXIgbWV0aG9kIHRvIHJldHJpZXZlIHRoZSBwcm9wZXJ0
        eSBmcm9tIHRoZSBjb250ZXh0IGFuZAogIC8vIGRldGVybWluZSB3aGljaCBj
        bGFzcyBzdHJpbmcgdG8gcmV0dXJuLCBiYXNlZCBvbiB3aGV0aGVyIGl0IGlz
        CiAgLy8gYSBCb29sZWFuIG9yIG5vdC4KICB2YXIgY2xhc3NTdHJpbmdGb3JQ
        YXRoID0gZnVuY3Rpb24ocm9vdCwgcGFyc2VkUGF0aCwgb3B0aW9ucykgewog
        ICAgdmFyIHZhbCwKICAgICAgICBwYXRoID0gcGFyc2VkUGF0aC5wYXRoOwoK
        ICAgIGlmIChwYXRoID09PSAndGhpcycpIHsKICAgICAgdmFsID0gcm9vdDsK
        ICAgIH0gZWxzZSBpZiAocGF0aCA9PT0gJycpIHsKICAgICAgdmFsID0gdHJ1
        ZTsKICAgIH0gZWxzZSB7CiAgICAgIHZhbCA9IGhhbmRsZWJhcnNHZXQocm9v
        dCwgcGF0aCwgb3B0aW9ucyk7CiAgICB9CgogICAgcmV0dXJuIEVtYmVyLlZp
        ZXcuX2NsYXNzU3RyaW5nRm9yVmFsdWUocGF0aCwgdmFsLCBwYXJzZWRQYXRo
        LmNsYXNzTmFtZSwgcGFyc2VkUGF0aC5mYWxzeUNsYXNzTmFtZSk7CiAgfTsK
        CiAgLy8gRm9yIGVhY2ggcHJvcGVydHkgcGFzc2VkLCBsb29wIHRocm91Z2gg
        YW5kIHNldHVwCiAgLy8gYW4gb2JzZXJ2ZXIuCiAgZm9yRWFjaC5jYWxsKGNs
        YXNzQmluZGluZ3Muc3BsaXQoJyAnKSwgZnVuY3Rpb24oYmluZGluZykgewoK
        ICAgIC8vIFZhcmlhYmxlIGluIHdoaWNoIHRoZSBvbGQgY2xhc3MgdmFsdWUg
        aXMgc2F2ZWQuIFRoZSBvYnNlcnZlciBmdW5jdGlvbgogICAgLy8gY2xvc2Vz
        IG92ZXIgdGhpcyB2YXJpYWJsZSwgc28gaXQga25vd3Mgd2hpY2ggc3RyaW5n
        IHRvIHJlbW92ZSB3aGVuCiAgICAvLyB0aGUgcHJvcGVydHkgY2hhbmdlcy4K
        ICAgIHZhciBvbGRDbGFzczsKCiAgICB2YXIgb2JzZXJ2ZXIsIGludm9rZXI7
        CgogICAgdmFyIHBhcnNlZFBhdGggPSBFbWJlci5WaWV3Ll9wYXJzZVByb3Bl
        cnR5UGF0aChiaW5kaW5nKSwKICAgICAgICBwYXRoID0gcGFyc2VkUGF0aC5w
        YXRoLAogICAgICAgIHBhdGhSb290ID0gY29udGV4dCwKICAgICAgICBub3Jt
        YWxpemVkOwoKICAgIGlmIChwYXRoICE9PSAnJyAmJiBwYXRoICE9PSAndGhp
        cycpIHsKICAgICAgbm9ybWFsaXplZCA9IG5vcm1hbGl6ZVBhdGgoY29udGV4
        dCwgcGF0aCwgb3B0aW9ucy5kYXRhKTsKCiAgICAgIHBhdGhSb290ID0gbm9y
        bWFsaXplZC5yb290OwogICAgICBwYXRoID0gbm9ybWFsaXplZC5wYXRoOwog
        ICAgfQoKICAgIC8vIFNldCB1cCBhbiBvYnNlcnZlciBvbiB0aGUgY29udGV4
        dC4gSWYgdGhlIHByb3BlcnR5IGNoYW5nZXMsIHRvZ2dsZSB0aGUKICAgIC8v
        IGNsYXNzIG5hbWUuCiAgICBvYnNlcnZlciA9IGZ1bmN0aW9uKCkgewogICAg
        ICAvLyBHZXQgdGhlIGN1cnJlbnQgdmFsdWUgb2YgdGhlIHByb3BlcnR5CiAg
        ICAgIG5ld0NsYXNzID0gY2xhc3NTdHJpbmdGb3JQYXRoKGNvbnRleHQsIHBh
        cnNlZFBhdGgsIG9wdGlvbnMpOwogICAgICBlbGVtID0gYmluZEF0dHJJZCA/
        IHZpZXcuJCgiW2RhdGEtYmluZGF0dHItIiArIGJpbmRBdHRySWQgKyAiPSci
        ICsgYmluZEF0dHJJZCArICInXSIpIDogdmlldy4kKCk7CgogICAgICAvLyBJ
        ZiB3ZSBjYW4ndCBmaW5kIHRoZSBlbGVtZW50IGFueW1vcmUsIGEgcGFyZW50
        IHRlbXBsYXRlIGhhcyBiZWVuCiAgICAgIC8vIHJlLXJlbmRlcmVkIGFuZCB3
        ZSd2ZSBiZWVuIG51a2VkLiBSZW1vdmUgdGhlIG9ic2VydmVyLgogICAgICBp
        ZiAoIWVsZW0gfHwgZWxlbS5sZW5ndGggPT09IDApIHsKICAgICAgICBFbWJl
        ci5yZW1vdmVPYnNlcnZlcihwYXRoUm9vdCwgcGF0aCwgaW52b2tlcik7CiAg
        ICAgIH0gZWxzZSB7CiAgICAgICAgLy8gSWYgd2UgaGFkIHByZXZpb3VzbHkg
        YWRkZWQgYSBjbGFzcyB0byB0aGUgZWxlbWVudCwgcmVtb3ZlIGl0LgogICAg
        ICAgIGlmIChvbGRDbGFzcykgewogICAgICAgICAgZWxlbS5yZW1vdmVDbGFz
        cyhvbGRDbGFzcyk7CiAgICAgICAgfQoKICAgICAgICAvLyBJZiBuZWNlc3Nh
        cnksIGFkZCBhIG5ldyBjbGFzcy4gTWFrZSBzdXJlIHdlIGtlZXAgdHJhY2sg
        b2YgaXQgc28KICAgICAgICAvLyBpdCBjYW4gYmUgcmVtb3ZlZCBpbiB0aGUg
        ZnV0dXJlLgogICAgICAgIGlmIChuZXdDbGFzcykgewogICAgICAgICAgZWxl
        bS5hZGRDbGFzcyhuZXdDbGFzcyk7CiAgICAgICAgICBvbGRDbGFzcyA9IG5l
        d0NsYXNzOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBvbGRDbGFzcyA9
        IG51bGw7CiAgICAgICAgfQogICAgICB9CiAgICB9OwoKICAgIGlmIChwYXRo
        ICE9PSAnJyAmJiBwYXRoICE9PSAndGhpcycpIHsKICAgICAgdmlldy5yZWdp
        c3Rlck9ic2VydmVyKHBhdGhSb290LCBwYXRoLCBvYnNlcnZlcik7CiAgICB9
        CgogICAgLy8gV2UndmUgYWxyZWFkeSBzZXR1cCB0aGUgb2JzZXJ2ZXI7IG5v
        dyB3ZSBqdXN0IG5lZWQgdG8gZmlndXJlIG91dCB0aGUKICAgIC8vIGNvcnJl
        Y3QgYmVoYXZpb3IgcmlnaHQgbm93IG9uIHRoZSBmaXJzdCBwYXNzIHRocm91
        Z2guCiAgICB2YWx1ZSA9IGNsYXNzU3RyaW5nRm9yUGF0aChjb250ZXh0LCBw
        YXJzZWRQYXRoLCBvcHRpb25zKTsKCiAgICBpZiAodmFsdWUpIHsKICAgICAg
        cmV0LnB1c2godmFsdWUpOwoKICAgICAgLy8gTWFrZSBzdXJlIHdlIHNhdmUg
        dGhlIGN1cnJlbnQgdmFsdWUgc28gdGhhdCBpdCBjYW4gYmUgcmVtb3ZlZCBp
        ZiB0aGUKICAgICAgLy8gb2JzZXJ2ZXIgZmlyZXMuCiAgICAgIG9sZENsYXNz
        ID0gdmFsdWU7CiAgICB9CiAgfSk7CgogIHJldHVybiByZXQ7Cn07CgoKfSko
        KTsKCgoKKGZ1bmN0aW9uKCkgewovKmdsb2JhbHMgSGFuZGxlYmFycyAqLwoK
        Ly8gVE9ETzogRG9uJ3QgcmVxdWlyZSB0aGUgZW50aXJlIG1vZHVsZQovKioK
        QG1vZHVsZSBlbWJlcgpAc3VibW9kdWxlIGVtYmVyLWhhbmRsZWJhcnMKKi8K
        CnZhciBnZXQgPSBFbWJlci5nZXQsIHNldCA9IEVtYmVyLnNldDsKdmFyIEVt
        YmVySGFuZGxlYmFycyA9IEVtYmVyLkhhbmRsZWJhcnM7CnZhciBMT1dFUkNB
        U0VfQV9aID0gL15bYS16XS87CnZhciBWSUVXX1BSRUZJWCA9IC9edmlld1wu
        LzsKCmZ1bmN0aW9uIG1ha2VCaW5kaW5ncyh0aGlzQ29udGV4dCwgb3B0aW9u
        cykgewogIHZhciBoYXNoID0gb3B0aW9ucy5oYXNoLAogICAgICBoYXNoVHlw
        ZSA9IG9wdGlvbnMuaGFzaFR5cGVzOwoKICBmb3IgKHZhciBwcm9wIGluIGhh
        c2gpIHsKICAgIGlmIChoYXNoVHlwZVtwcm9wXSA9PT0gJ0lEJykgewoKICAg
        ICAgdmFyIHZhbHVlID0gaGFzaFtwcm9wXTsKCiAgICAgIGlmIChFbWJlci5J
        U19CSU5ESU5HLnRlc3QocHJvcCkpIHsKICAgICAgICBFbWJlci53YXJuKCJZ
        b3UncmUgYXR0ZW1wdGluZyB0byByZW5kZXIgYSB2aWV3IGJ5IHBhc3Npbmcg
        IiArIHByb3AgKyAiPSIgKyB2YWx1ZSArICIgdG8gYSB2aWV3IGhlbHBlciwg
        YnV0IHRoaXMgc3ludGF4IGlzIGFtYmlndW91cy4gWW91IHNob3VsZCBlaXRo
        ZXIgc3Vycm91bmQgIiArIHZhbHVlICsgIiBpbiBxdW90ZXMgb3IgcmVtb3Zl
        IGBCaW5kaW5nYCBmcm9tICIgKyBwcm9wICsgIi4iKTsKICAgICAgfSBlbHNl
        IHsKICAgICAgICBoYXNoW3Byb3AgKyAnQmluZGluZyddID0gdmFsdWU7CiAg
        ICAgICAgaGFzaFR5cGVbcHJvcCArICdCaW5kaW5nJ10gPSAnU1RSSU5HJzsK
        ICAgICAgICBkZWxldGUgaGFzaFtwcm9wXTsKICAgICAgICBkZWxldGUgaGFz
        aFR5cGVbcHJvcF07CiAgICAgIH0KICAgIH0KICB9CgogIGlmIChoYXNoLmhh
        c093blByb3BlcnR5KCdpZEJpbmRpbmcnKSkgewogICAgLy8gaWQgY2FuJ3Qg
        YmUgYm91bmQsIHNvIGp1c3QgcGVyZm9ybSBvbmUtdGltZSBsb29rdXAuCiAg
        ICBoYXNoLmlkID0gRW1iZXJIYW5kbGViYXJzLmdldCh0aGlzQ29udGV4dCwg
        aGFzaC5pZEJpbmRpbmcsIG9wdGlvbnMpOwogICAgaGFzaFR5cGUuaWQgPSAn
        U1RSSU5HJzsKICAgIGRlbGV0ZSBoYXNoLmlkQmluZGluZzsKICAgIGRlbGV0
        ZSBoYXNoVHlwZS5pZEJpbmRpbmc7CiAgfQp9CgpFbWJlckhhbmRsZWJhcnMu
        Vmlld0hlbHBlciA9IEVtYmVyLk9iamVjdC5jcmVhdGUoewoKICBwcm9wZXJ0
        aWVzRnJvbUhUTUxPcHRpb25zOiBmdW5jdGlvbihvcHRpb25zKSB7CiAgICB2
        YXIgaGFzaCA9IG9wdGlvbnMuaGFzaCwgZGF0YSA9IG9wdGlvbnMuZGF0YTsK
        ICAgIHZhciBleHRlbnNpb25zID0ge30sCiAgICAgICAgY2xhc3NlcyA9IGhh
        c2hbJ2NsYXNzJ10sCiAgICAgICAgZHVwID0gZmFsc2U7CgogICAgaWYgKGhh
        c2guaWQpIHsKICAgICAgZXh0ZW5zaW9ucy5lbGVtZW50SWQgPSBoYXNoLmlk
        OwogICAgICBkdXAgPSB0cnVlOwogICAgfQoKICAgIGlmIChoYXNoLnRhZykg
        ewogICAgICBleHRlbnNpb25zLnRhZ05hbWUgPSBoYXNoLnRhZzsKICAgICAg
        ZHVwID0gdHJ1ZTsKICAgIH0KCiAgICBpZiAoY2xhc3NlcykgewogICAgICBj
        bGFzc2VzID0gY2xhc3Nlcy5zcGxpdCgnICcpOwogICAgICBleHRlbnNpb25z
        LmNsYXNzTmFtZXMgPSBjbGFzc2VzOwogICAgICBkdXAgPSB0cnVlOwogICAg
        fQoKICAgIGlmIChoYXNoLmNsYXNzQmluZGluZykgewogICAgICBleHRlbnNp
        b25zLmNsYXNzTmFtZUJpbmRpbmdzID0gaGFzaC5jbGFzc0JpbmRpbmcuc3Bs
        aXQoJyAnKTsKICAgICAgZHVwID0gdHJ1ZTsKICAgIH0KCiAgICBpZiAoaGFz
        aC5jbGFzc05hbWVCaW5kaW5ncykgewogICAgICBpZiAoZXh0ZW5zaW9ucy5j
        bGFzc05hbWVCaW5kaW5ncyA9PT0gdW5kZWZpbmVkKSBleHRlbnNpb25zLmNs
        YXNzTmFtZUJpbmRpbmdzID0gW107CiAgICAgIGV4dGVuc2lvbnMuY2xhc3NO
        YW1lQmluZGluZ3MgPSBleHRlbnNpb25zLmNsYXNzTmFtZUJpbmRpbmdzLmNv
        bmNhdChoYXNoLmNsYXNzTmFtZUJpbmRpbmdzLnNwbGl0KCcgJykpOwogICAg
        ICBkdXAgPSB0cnVlOwogICAgfQoKICAgIGlmIChoYXNoLmF0dHJpYnV0ZUJp
        bmRpbmdzKSB7CiAgICAgIEVtYmVyLmFzc2VydCgiU2V0dGluZyAnYXR0cmli
        dXRlQmluZGluZ3MnIHZpYSBIYW5kbGViYXJzIGlzIG5vdCBhbGxvd2VkLiBQ
        bGVhc2Ugc3ViY2xhc3MgRW1iZXIuVmlldyBhbmQgc2V0IGl0IHRoZXJlIGlu
        c3RlYWQuIik7CiAgICAgIGV4dGVuc2lvbnMuYXR0cmlidXRlQmluZGluZ3Mg
        PSBudWxsOwogICAgICBkdXAgPSB0cnVlOwogICAgfQoKICAgIGlmIChkdXAp
        IHsKICAgICAgaGFzaCA9IEVtYmVyLiQuZXh0ZW5kKHt9LCBoYXNoKTsKICAg
        ICAgZGVsZXRlIGhhc2guaWQ7CiAgICAgIGRlbGV0ZSBoYXNoLnRhZzsKICAg
        ICAgZGVsZXRlIGhhc2hbJ2NsYXNzJ107CiAgICAgIGRlbGV0ZSBoYXNoLmNs
        YXNzQmluZGluZzsKICAgIH0KCiAgICAvLyBTZXQgdGhlIHByb3BlciBjb250
        ZXh0IGZvciBhbGwgYmluZGluZ3MgcGFzc2VkIHRvIHRoZSBoZWxwZXIuIFRo
        aXMgYXBwbGllcyB0byByZWd1bGFyIGF0dHJpYnV0ZSBiaW5kaW5ncwogICAg
        Ly8gYXMgd2VsbCBhcyBjbGFzcyBuYW1lIGJpbmRpbmdzLiBJZiB0aGUgYmlu
        ZGluZ3MgYXJlIGxvY2FsLCBtYWtlIHRoZW0gcmVsYXRpdmUgdG8gdGhlIGN1
        cnJlbnQgY29udGV4dAogICAgLy8gaW5zdGVhZCBvZiB0aGUgdmlldy4KICAg
        IHZhciBwYXRoOwoKICAgIC8vIEV2YWx1YXRlIHRoZSBjb250ZXh0IG9mIHJl
        Z3VsYXIgYXR0cmlidXRlIGJpbmRpbmdzOgogICAgZm9yICh2YXIgcHJvcCBp
        biBoYXNoKSB7CiAgICAgIGlmICghaGFzaC5oYXNPd25Qcm9wZXJ0eShwcm9w
        KSkgeyBjb250aW51ZTsgfQoKICAgICAgLy8gVGVzdCBpZiB0aGUgcHJvcGVy
        dHkgZW5kcyBpbiAiQmluZGluZyIKICAgICAgaWYgKEVtYmVyLklTX0JJTkRJ
        TkcudGVzdChwcm9wKSAmJiB0eXBlb2YgaGFzaFtwcm9wXSA9PT0gJ3N0cmlu
        ZycpIHsKICAgICAgICBwYXRoID0gdGhpcy5jb250ZXh0dWFsaXplQmluZGlu
        Z1BhdGgoaGFzaFtwcm9wXSwgZGF0YSk7CiAgICAgICAgaWYgKHBhdGgpIHsg
        aGFzaFtwcm9wXSA9IHBhdGg7IH0KICAgICAgfQogICAgfQoKICAgIC8vIEV2
        YWx1YXRlIHRoZSBjb250ZXh0IG9mIGNsYXNzIG5hbWUgYmluZGluZ3M6CiAg
        ICBpZiAoZXh0ZW5zaW9ucy5jbGFzc05hbWVCaW5kaW5ncykgewogICAgICBm
        b3IgKHZhciBiIGluIGV4dGVuc2lvbnMuY2xhc3NOYW1lQmluZGluZ3MpIHsK
        ICAgICAgICB2YXIgZnVsbCA9IGV4dGVuc2lvbnMuY2xhc3NOYW1lQmluZGlu
        Z3NbYl07CiAgICAgICAgaWYgKHR5cGVvZiBmdWxsID09PSAnc3RyaW5nJykg
        ewogICAgICAgICAgLy8gQ29udGV4dHVhbGl6ZSB0aGUgcGF0aCBvZiBjbGFz
        c05hbWVCaW5kaW5nIHNvIHRoaXM6CiAgICAgICAgICAvLwogICAgICAgICAg
        Ly8gICAgIGNsYXNzTmFtZUJpbmRpbmc9ImlzR3JlZW46Z3JlZW4iCiAgICAg
        ICAgICAvLwogICAgICAgICAgLy8gaXMgY29udmVydGVkIHRvIHRoaXM6CiAg
        ICAgICAgICAvLwogICAgICAgICAgLy8gICAgIGNsYXNzTmFtZUJpbmRpbmc9
        Il9wYXJlbnRWaWV3LmNvbnRleHQuaXNHcmVlbjpncmVlbiIKICAgICAgICAg
        IHZhciBwYXJzZWRQYXRoID0gRW1iZXIuVmlldy5fcGFyc2VQcm9wZXJ0eVBh
        dGgoZnVsbCk7CiAgICAgICAgICBwYXRoID0gdGhpcy5jb250ZXh0dWFsaXpl
        QmluZGluZ1BhdGgocGFyc2VkUGF0aC5wYXRoLCBkYXRhKTsKICAgICAgICAg
        IGlmIChwYXRoKSB7IGV4dGVuc2lvbnMuY2xhc3NOYW1lQmluZGluZ3NbYl0g
        PSBwYXRoICsgcGFyc2VkUGF0aC5jbGFzc05hbWVzOyB9CiAgICAgICAgfQog
        ICAgICB9CiAgICB9CgogICAgcmV0dXJuIEVtYmVyLiQuZXh0ZW5kKGhhc2gs
        IGV4dGVuc2lvbnMpOwogIH0sCgogIC8vIFRyYW5zZm9ybSBiaW5kaW5ncyBm
        cm9tIHRoZSBjdXJyZW50IGNvbnRleHQgdG8gYSBjb250ZXh0IHRoYXQgY2Fu
        IGJlIGV2YWx1YXRlZCB3aXRoaW4gdGhlIHZpZXcuCiAgLy8gUmV0dXJucyBu
        dWxsIGlmIHRoZSBwYXRoIHNob3VsZG4ndCBiZSBjaGFuZ2VkLgogIC8vCiAg
        Ly8gVE9ETzogY29uc2lkZXIgdGhlIGFkZGl0aW9uIG9mIGEgcHJlZml4IHRo
        YXQgd291bGQgYWxsb3cgdGhpcyBtZXRob2QgdG8gcmV0dXJuIGBwYXRoYC4K
        ICBjb250ZXh0dWFsaXplQmluZGluZ1BhdGg6IGZ1bmN0aW9uKHBhdGgsIGRh
        dGEpIHsKICAgIHZhciBub3JtYWxpemVkID0gRW1iZXIuSGFuZGxlYmFycy5u
        b3JtYWxpemVQYXRoKG51bGwsIHBhdGgsIGRhdGEpOwogICAgaWYgKG5vcm1h
        bGl6ZWQuaXNLZXl3b3JkKSB7CiAgICAgIHJldHVybiAndGVtcGxhdGVEYXRh
        LmtleXdvcmRzLicgKyBwYXRoOwogICAgfSBlbHNlIGlmIChFbWJlci5pc0ds
        b2JhbFBhdGgocGF0aCkpIHsKICAgICAgcmV0dXJuIG51bGw7CiAgICB9IGVs
        c2UgaWYgKHBhdGggPT09ICd0aGlzJyB8fCBwYXRoID09PSAnJykgewogICAg
        ICByZXR1cm4gJ19wYXJlbnRWaWV3LmNvbnRleHQnOwogICAgfSBlbHNlIHsK
        ICAgICAgcmV0dXJuICdfcGFyZW50Vmlldy5jb250ZXh0LicgKyBwYXRoOwog
        ICAgfQogIH0sCgogIGhlbHBlcjogZnVuY3Rpb24odGhpc0NvbnRleHQsIHBh
        dGgsIG9wdGlvbnMpIHsKICAgIHZhciBkYXRhID0gb3B0aW9ucy5kYXRhLAog
        ICAgICAgIGZuID0gb3B0aW9ucy5mbiwKICAgICAgICBuZXdWaWV3OwoKICAg
        IG1ha2VCaW5kaW5ncyh0aGlzQ29udGV4dCwgb3B0aW9ucyk7CgogICAgaWYg
        KCdzdHJpbmcnID09PSB0eXBlb2YgcGF0aCkgewoKICAgICAgLy8gVE9ETzog
        dGhpcyBpcyBhIGxhbWUgY29uZGl0aW9uYWwsIHRoaXMgc2hvdWxkIGxpa2Vs
        eSBjaGFuZ2UKICAgICAgLy8gYnV0IHNvbWV0aGluZyBhbG9uZyB0aGVzZSBs
        aW5lcyB3aWxsIGxpa2VseSBuZWVkIHRvIGJlIGFkZGVkCiAgICAgIC8vIGFz
        IGRlcHJlY2F0aW9uIHdhcm5pbmdzCiAgICAgIC8vCiAgICAgIGlmIChvcHRp
        b25zLnR5cGVzWzBdID09PSAnU1RSSU5HJyAmJiBMT1dFUkNBU0VfQV9aLnRl
        c3QocGF0aCkgJiYgIVZJRVdfUFJFRklYLnRlc3QocGF0aCkpIHsKICAgICAg
        ICBFbWJlci5hc3NlcnQoIlZpZXcgcmVxdWlyZXMgYSBjb250YWluZXIiLCAh
        IWRhdGEudmlldy5jb250YWluZXIpOwogICAgICAgIG5ld1ZpZXcgPSBkYXRh
        LnZpZXcuY29udGFpbmVyLmxvb2t1cEZhY3RvcnkoJ3ZpZXc6JyArIHBhdGgp
        OwogICAgICB9IGVsc2UgewogICAgICAgIG5ld1ZpZXcgPSBFbWJlckhhbmRs
        ZWJhcnMuZ2V0KHRoaXNDb250ZXh0LCBwYXRoLCBvcHRpb25zKTsKICAgICAg
        fQoKICAgICAgRW1iZXIuYXNzZXJ0KCJVbmFibGUgdG8gZmluZCB2aWV3IGF0
        IHBhdGggJyIgKyBwYXRoICsgIiciLCAhIW5ld1ZpZXcpOwogICAgfSBlbHNl
        IHsKICAgICAgbmV3VmlldyA9IHBhdGg7CiAgICB9CgogICAgRW1iZXIuYXNz
        ZXJ0KEVtYmVyLlN0cmluZy5mbXQoJ1lvdSBtdXN0IHBhc3MgYSB2aWV3IHRv
        IHRoZSAjdmlldyBoZWxwZXIsIG5vdCAlQCAoJUApJywgW3BhdGgsIG5ld1Zp
        ZXddKSwgRW1iZXIuVmlldy5kZXRlY3QobmV3VmlldykgfHwgRW1iZXIuVmll
        dy5kZXRlY3RJbnN0YW5jZShuZXdWaWV3KSk7CgogICAgdmFyIHZpZXdPcHRp
        b25zID0gdGhpcy5wcm9wZXJ0aWVzRnJvbUhUTUxPcHRpb25zKG9wdGlvbnMs
        IHRoaXNDb250ZXh0KTsKICAgIHZhciBjdXJyZW50VmlldyA9IGRhdGEudmll
        dzsKICAgIHZpZXdPcHRpb25zLnRlbXBsYXRlRGF0YSA9IGRhdGE7CiAgICB2
        YXIgbmV3Vmlld1Byb3RvID0gbmV3Vmlldy5wcm90byA/IG5ld1ZpZXcucHJv
        dG8oKSA6IG5ld1ZpZXc7CgogICAgaWYgKGZuKSB7CiAgICAgIEVtYmVyLmFz
        c2VydCgiWW91IGNhbm5vdCBwcm92aWRlIGEgdGVtcGxhdGUgYmxvY2sgaWYg
        eW91IGFsc28gc3BlY2lmaWVkIGEgdGVtcGxhdGVOYW1lIiwgIWdldCh2aWV3
        T3B0aW9ucywgJ3RlbXBsYXRlTmFtZScpICYmICFnZXQobmV3Vmlld1Byb3Rv
        LCAndGVtcGxhdGVOYW1lJykpOwogICAgICB2aWV3T3B0aW9ucy50ZW1wbGF0
        ZSA9IGZuOwogICAgfQoKICAgIC8vIFdlIG9ubHkgd2FudCB0byBvdmVycmlk
        ZSB0aGUgYF9jb250ZXh0YCBjb21wdXRlZCBwcm9wZXJ0eSBpZiB0aGVyZSBp
        cwogICAgLy8gbm8gc3BlY2lmaWVkIGNvbnRyb2xsZXIuIFNlZSBWaWV3I19j
        b250ZXh0IGZvciBtb3JlIGluZm9ybWF0aW9uLgogICAgaWYgKCFuZXdWaWV3
        UHJvdG8uY29udHJvbGxlciAmJiAhbmV3Vmlld1Byb3RvLmNvbnRyb2xsZXJC
        aW5kaW5nICYmICF2aWV3T3B0aW9ucy5jb250cm9sbGVyICYmICF2aWV3T3B0
        aW9ucy5jb250cm9sbGVyQmluZGluZykgewogICAgICB2aWV3T3B0aW9ucy5f
        Y29udGV4dCA9IHRoaXNDb250ZXh0OwogICAgfQoKICAgIGN1cnJlbnRWaWV3
        LmFwcGVuZENoaWxkKG5ld1ZpZXcsIHZpZXdPcHRpb25zKTsKICB9Cn0pOwoK
        LyoqCiAgYHt7dmlld319YCBpbnNlcnRzIGEgbmV3IGluc3RhbmNlIG9mIGBF
        bWJlci5WaWV3YCBpbnRvIGEgdGVtcGxhdGUgcGFzc2luZyBpdHMKICBvcHRp
        b25zIHRvIHRoZSBgRW1iZXIuVmlld2AncyBgY3JlYXRlYCBtZXRob2QgYW5k
        IHVzaW5nIHRoZSBzdXBwbGllZCBibG9jayBhcwogIHRoZSB2aWV3J3Mgb3du
        IHRlbXBsYXRlLgoKICBBbiBlbXB0eSBgPGJvZHk+YCBhbmQgdGhlIGZvbGxv
        d2luZyB0ZW1wbGF0ZToKCiAgYGBgaGFuZGxlYmFycwogIEEgc3BhbjoKICB7
        eyN2aWV3IHRhZ05hbWU9InNwYW4ifX0KICAgIGhlbGxvLgogIHt7L3ZpZXd9
        fQogIGBgYAoKICBXaWxsIHJlc3VsdCBpbiBIVE1MIHN0cnVjdHVyZToKCiAg
        YGBgaHRtbAogIDxib2R5PgogICAgPCEtLSBOb3RlOiB0aGUgaGFuZGxlYmFy
        cyB0ZW1wbGF0ZSBzY3JpcHQKICAgICAgICAgYWxzbyByZXN1bHRzIGluIGEg
        cmVuZGVyZWQgRW1iZXIuVmlldwogICAgICAgICB3aGljaCBpcyB0aGUgb3V0
        ZXIgPGRpdj4gaGVyZSAtLT4KCiAgICA8ZGl2IGNsYXNzPSJlbWJlci12aWV3
        Ij4KICAgICAgQSBzcGFuOgogICAgICA8c3BhbiBpZD0iZW1iZXIxIiBjbGFz
        cz0iZW1iZXItdmlldyI+CiAgICAgICAgSGVsbG8uCiAgICAgIDwvc3Bhbj4K
        ICAgIDwvZGl2PgogIDwvYm9keT4KICBgYGAKCiAgIyMjIGBwYXJlbnRWaWV3
        YCBzZXR0aW5nCgogIFRoZSBgcGFyZW50Vmlld2AgcHJvcGVydHkgb2YgdGhl
        IG5ldyBgRW1iZXIuVmlld2AgaW5zdGFuY2UgY3JlYXRlZCB0aHJvdWdoCiAg
        YHt7dmlld319YCB3aWxsIGJlIHNldCB0byB0aGUgYEVtYmVyLlZpZXdgIGlu
        c3RhbmNlIG9mIHRoZSB0ZW1wbGF0ZSB3aGVyZQogIGB7e3ZpZXd9fWAgd2Fz
        IGNhbGxlZC4KCiAgYGBgamF2YXNjcmlwdAogIGFWaWV3ID0gRW1iZXIuVmll
        dy5jcmVhdGUoewogICAgdGVtcGxhdGU6IEVtYmVyLkhhbmRsZWJhcnMuY29t
        cGlsZSgie3sjdmlld319IG15IHBhcmVudDoge3twYXJlbnRWaWV3LmVsZW1l
        bnRJZH19IHt7L3ZpZXd9fSIpCiAgfSk7CgogIGFWaWV3LmFwcGVuZFRvKCdi
        b2R5Jyk7CiAgYGBgCgogIFdpbGwgcmVzdWx0IGluIEhUTUwgc3RydWN0dXJl
        OgoKICBgYGBodG1sCiAgPGRpdiBpZD0iZW1iZXIxIiBjbGFzcz0iZW1iZXIt
        dmlldyI+CiAgICA8ZGl2IGlkPSJlbWJlcjIiIGNsYXNzPSJlbWJlci12aWV3
        Ij4KICAgICAgbXkgcGFyZW50OiBlbWJlcjEKICAgIDwvZGl2PgogIDwvZGl2
        PgogIGBgYAoKICAjIyMgU2V0dGluZyBDU1MgaWQgYW5kIGNsYXNzIGF0dHJp
        YnV0ZXMKCiAgVGhlIEhUTUwgYGlkYCBhdHRyaWJ1dGUgY2FuIGJlIHNldCBv
        biB0aGUgYHt7dmlld319YCdzIHJlc3VsdGluZyBlbGVtZW50IHdpdGgKICB0
        aGUgYGlkYCBvcHRpb24uIFRoaXMgb3B0aW9uIHdpbGwgX25vdF8gYmUgcGFz
        c2VkIHRvIGBFbWJlci5WaWV3LmNyZWF0ZWAuCgogIGBgYGhhbmRsZWJhcnMK
        ICB7eyN2aWV3IHRhZ05hbWU9InNwYW4iIGlkPSJhLWN1c3RvbS1pZCJ9fQog
        ICAgaGVsbG8uCiAge3svdmlld319CiAgYGBgCgogIFJlc3VsdHMgaW4gdGhl
        IGZvbGxvd2luZyBIVE1MIHN0cnVjdHVyZToKCiAgYGBgaHRtbAogIDxkaXYg
        Y2xhc3M9ImVtYmVyLXZpZXciPgogICAgPHNwYW4gaWQ9ImEtY3VzdG9tLWlk
        IiBjbGFzcz0iZW1iZXItdmlldyI+CiAgICAgIGhlbGxvLgogICAgPC9zcGFu
        PgogIDwvZGl2PgogIGBgYAoKICBUaGUgSFRNTCBgY2xhc3NgIGF0dHJpYnV0
        ZSBjYW4gYmUgc2V0IG9uIHRoZSBge3t2aWV3fX1gJ3MgcmVzdWx0aW5nIGVs
        ZW1lbnQKICB3aXRoIHRoZSBgY2xhc3NgIG9yIGBjbGFzc05hbWVCaW5kaW5n
        c2Agb3B0aW9ucy4gVGhlIGBjbGFzc2Agb3B0aW9uIHdpbGwKICBkaXJlY3Rs
        eSBzZXQgdGhlIENTUyBgY2xhc3NgIGF0dHJpYnV0ZSBhbmQgd2lsbCBub3Qg
        YmUgcGFzc2VkIHRvCiAgYEVtYmVyLlZpZXcuY3JlYXRlYC4gYGNsYXNzTmFt
        ZUJpbmRpbmdzYCB3aWxsIGJlIHBhc3NlZCB0byBgY3JlYXRlYCBhbmQgdXNl
        CiAgYEVtYmVyLlZpZXdgJ3MgY2xhc3MgbmFtZSBiaW5kaW5nIGZ1bmN0aW9u
        YWxpdHk6CgogIGBgYGhhbmRsZWJhcnMKICB7eyN2aWV3IHRhZ05hbWU9InNw
        YW4iIGNsYXNzPSJhLWN1c3RvbS1jbGFzcyJ9fQogICAgaGVsbG8uCiAge3sv
        dmlld319CiAgYGBgCgogIFJlc3VsdHMgaW4gdGhlIGZvbGxvd2luZyBIVE1M
        IHN0cnVjdHVyZToKCiAgYGBgaHRtbAogIDxkaXYgY2xhc3M9ImVtYmVyLXZp
        ZXciPgogICAgPHNwYW4gaWQ9ImVtYmVyMiIgY2xhc3M9ImVtYmVyLXZpZXcg
        YS1jdXN0b20tY2xhc3MiPgogICAgICBoZWxsby4KICAgIDwvc3Bhbj4KICA8
        L2Rpdj4KICBgYGAKCiAgIyMjIFN1cHBseWluZyBhIGRpZmZlcmVudCB2aWV3
        IGNsYXNzCgogIGB7e3ZpZXd9fWAgY2FuIHRha2UgYW4gb3B0aW9uYWwgZmly
        c3QgYXJndW1lbnQgYmVmb3JlIGl0cyBzdXBwbGllZCBvcHRpb25zIHRvCiAg
        c3BlY2lmeSBhIHBhdGggdG8gYSBjdXN0b20gdmlldyBjbGFzcy4KCiAgYGBg
        aGFuZGxlYmFycwogIHt7I3ZpZXcgIk15QXBwLkN1c3RvbVZpZXcifX0KICAg
        IGhlbGxvLgogIHt7L3ZpZXd9fQogIGBgYAoKICBUaGUgZmlyc3QgYXJndW1l
        bnQgY2FuIGFsc28gYmUgYSByZWxhdGl2ZSBwYXRoIGFjY2Vzc2libGUgZnJv
        bSB0aGUgY3VycmVudAogIGNvbnRleHQuCgogIGBgYGphdmFzY3JpcHQKICBN
        eUFwcCA9IEVtYmVyLkFwcGxpY2F0aW9uLmNyZWF0ZSh7fSk7CiAgTXlBcHAu
        T3V0ZXJWaWV3ID0gRW1iZXIuVmlldy5leHRlbmQoewogICAgaW5uZXJWaWV3
        Q2xhc3M6IEVtYmVyLlZpZXcuZXh0ZW5kKHsKICAgICAgY2xhc3NOYW1lczog
        WydhLWN1c3RvbS12aWV3LWNsYXNzLWFzLXByb3BlcnR5J10KICAgIH0pLAog
        ICAgdGVtcGxhdGU6IEVtYmVyLkhhbmRsZWJhcnMuY29tcGlsZSgne3sjdmll
        dyAidmlldy5pbm5lclZpZXdDbGFzcyJ9fSBoaSB7ey92aWV3fX0nKQogIH0p
        OwoKICBNeUFwcC5PdXRlclZpZXcuY3JlYXRlKCkuYXBwZW5kVG8oJ2JvZHkn
        KTsKICBgYGAKCiAgV2lsbCByZXN1bHQgaW4gdGhlIGZvbGxvd2luZyBIVE1M
        OgoKICBgYGBodG1sCiAgPGRpdiBpZD0iZW1iZXIxIiBjbGFzcz0iZW1iZXIt
        dmlldyI+CiAgICA8ZGl2IGlkPSJlbWJlcjIiIGNsYXNzPSJlbWJlci12aWV3
        IGEtY3VzdG9tLXZpZXctY2xhc3MtYXMtcHJvcGVydHkiPgogICAgICBoaQog
        ICAgPC9kaXY+CiAgPC9kaXY+CiAgYGBgCgogICMjIyBCbG9ja2xlc3MgdXNl
        CgogIElmIHlvdSBzdXBwbHkgYSBjdXN0b20gYEVtYmVyLlZpZXdgIHN1YmNs
        YXNzIHRoYXQgc3BlY2lmaWVzIGl0cyBvd24gdGVtcGxhdGUKICBvciBwcm92
        aWRlIGEgYHRlbXBsYXRlTmFtZWAgb3B0aW9uIHRvIGB7e3ZpZXd9fWAgaXQg
        Y2FuIGJlIHVzZWQgd2l0aG91dAogIHN1cHBseWluZyBhIGJsb2NrLiBBdHRl
        bXB0cyB0byB1c2UgYm90aCBhIGB0ZW1wbGF0ZU5hbWVgIG9wdGlvbiBhbmQg
        c3VwcGx5IGEKICBibG9jayB3aWxsIHRocm93IGFuIGVycm9yLgoKICBgYGBo
        YW5kbGViYXJzCiAge3t2aWV3ICJNeUFwcC5WaWV3V2l0aEFUZW1wbGF0ZURl
        ZmluZWQifX0KICBgYGAKCiAgIyMjIGB2aWV3TmFtZWAgcHJvcGVydHkKCiAg
        WW91IGNhbiBzdXBwbHkgYSBgdmlld05hbWVgIG9wdGlvbiB0byBge3t2aWV3
        fX1gLiBUaGUgYEVtYmVyLlZpZXdgIGluc3RhbmNlCiAgd2lsbCBiZSByZWZl
        cmVuY2VkIGFzIGEgcHJvcGVydHkgb2YgaXRzIHBhcmVudCB2aWV3IGJ5IHRo
        aXMgbmFtZS4KCiAgYGBgamF2YXNjcmlwdAogIGFWaWV3ID0gRW1iZXIuVmll
        dy5jcmVhdGUoewogICAgdGVtcGxhdGU6IEVtYmVyLkhhbmRsZWJhcnMuY29t
        cGlsZSgne3sjdmlldyB2aWV3TmFtZT0iYUNoaWxkQnlOYW1lIn19IGhpIHt7
        L3ZpZXd9fScpCiAgfSk7CgogIGFWaWV3LmFwcGVuZFRvKCdib2R5Jyk7CiAg
        YVZpZXcuZ2V0KCdhQ2hpbGRCeU5hbWUnKSAvLyB0aGUgaW5zdGFuY2Ugb2Yg
        RW1iZXIuVmlldyBjcmVhdGVkIGJ5IHt7dmlld319IGhlbHBlcgogIGBgYAoK
        ICBAbWV0aG9kIHZpZXcKICBAZm9yIEVtYmVyLkhhbmRsZWJhcnMuaGVscGVy
        cwogIEBwYXJhbSB7U3RyaW5nfSBwYXRoCiAgQHBhcmFtIHtIYXNofSBvcHRp
        b25zCiAgQHJldHVybiB7U3RyaW5nfSBIVE1MIHN0cmluZwoqLwpFbWJlckhh
        bmRsZWJhcnMucmVnaXN0ZXJIZWxwZXIoJ3ZpZXcnLCBmdW5jdGlvbiB2aWV3
        SGVscGVyKHBhdGgsIG9wdGlvbnMpIHsKICBFbWJlci5hc3NlcnQoIlRoZSB2
        aWV3IGhlbHBlciBvbmx5IHRha2VzIGEgc2luZ2xlIGFyZ3VtZW50IiwgYXJn
        dW1lbnRzLmxlbmd0aCA8PSAyKTsKCiAgLy8gSWYgbm8gcGF0aCBpcyBwcm92
        aWRlZCwgdHJlYXQgcGF0aCBwYXJhbSBhcyBvcHRpb25zLgogIGlmIChwYXRo
        ICYmIHBhdGguZGF0YSAmJiBwYXRoLmRhdGEuaXNSZW5kZXJEYXRhKSB7CiAg
        ICBvcHRpb25zID0gcGF0aDsKICAgIHBhdGggPSAiRW1iZXIuVmlldyI7CiAg
        fQoKICByZXR1cm4gRW1iZXJIYW5kbGViYXJzLlZpZXdIZWxwZXIuaGVscGVy
        KHRoaXMsIHBhdGgsIG9wdGlvbnMpOwp9KTsKCgp9KSgpOwoKCgooZnVuY3Rp
        b24oKSB7Ci8vIFRPRE86IERvbid0IHJlcXVpcmUgYWxsIG9mIHRoaXMgbW9k
        dWxlCi8qKgpAbW9kdWxlIGVtYmVyCkBzdWJtb2R1bGUgZW1iZXItaGFuZGxl
        YmFycwoqLwoKdmFyIGdldCA9IEVtYmVyLmdldCwgaGFuZGxlYmFyc0dldCA9
        IEVtYmVyLkhhbmRsZWJhcnMuZ2V0LCBmbXQgPSBFbWJlci5TdHJpbmcuZm10
        OwoKLyoqCiAgYHt7Y29sbGVjdGlvbn19YCBpcyBhIGBFbWJlci5IYW5kbGVi
        YXJzYCBoZWxwZXIgZm9yIGFkZGluZyBpbnN0YW5jZXMgb2YKICBgRW1iZXIu
        Q29sbGVjdGlvblZpZXdgIHRvIGEgdGVtcGxhdGUuIFNlZSBbRW1iZXIuQ29s
        bGVjdGlvblZpZXddKC9hcGkvY2xhc3Nlcy9FbWJlci5Db2xsZWN0aW9uVmll
        dy5odG1sKQogICBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvbiBvbiBob3cg
        YSBgQ29sbGVjdGlvblZpZXdgIGZ1bmN0aW9ucy4KCiAgYHt7Y29sbGVjdGlv
        bn19YCdzIHByaW1hcnkgdXNlIGlzIGFzIGEgYmxvY2sgaGVscGVyIHdpdGgg
        YSBgY29udGVudEJpbmRpbmdgCiAgb3B0aW9uIHBvaW50aW5nIHRvd2FyZHMg
        YW4gYEVtYmVyLkFycmF5YC1jb21wYXRpYmxlIG9iamVjdC4gQW4gYEVtYmVy
        LlZpZXdgCiAgaW5zdGFuY2Ugd2lsbCBiZSBjcmVhdGVkIGZvciBlYWNoIGl0
        ZW0gaW4gaXRzIGBjb250ZW50YCBwcm9wZXJ0eS4gRWFjaCB2aWV3CiAgd2ls
        bCBoYXZlIGl0cyBvd24gYGNvbnRlbnRgIHByb3BlcnR5IHNldCB0byB0aGUg
        YXBwcm9wcmlhdGUgaXRlbSBpbiB0aGUKICBjb2xsZWN0aW9uLgoKICBUaGUg
        cHJvdmlkZWQgYmxvY2sgd2lsbCBiZSBhcHBsaWVkIGFzIHRoZSB0ZW1wbGF0
        ZSBmb3IgZWFjaCBpdGVtJ3Mgdmlldy4KCiAgR2l2ZW4gYW4gZW1wdHkgYDxi
        b2R5PmAgdGhlIGZvbGxvd2luZyB0ZW1wbGF0ZToKCiAgYGBgaGFuZGxlYmFy
        cwogIHt7I2NvbGxlY3Rpb24gY29udGVudEJpbmRpbmc9IkFwcC5pdGVtcyJ9
        fQogICAgSGkge3t2aWV3LmNvbnRlbnQubmFtZX19CiAge3svY29sbGVjdGlv
        bn19CiAgYGBgCgogIEFuZCB0aGUgZm9sbG93aW5nIGFwcGxpY2F0aW9uIGNv
        ZGUKCiAgYGBgamF2YXNjcmlwdAogIEFwcCA9IEVtYmVyLkFwcGxpY2F0aW9u
        LmNyZWF0ZSgpCiAgQXBwLml0ZW1zID0gWwogICAgRW1iZXIuT2JqZWN0LmNy
        ZWF0ZSh7bmFtZTogJ0RhdmUnfSksCiAgICBFbWJlci5PYmplY3QuY3JlYXRl
        KHtuYW1lOiAnTWFyeSd9KSwKICAgIEVtYmVyLk9iamVjdC5jcmVhdGUoe25h
        bWU6ICdTYXJhJ30pCiAgXQogIGBgYAoKICBXaWxsIHJlc3VsdCBpbiB0aGUg
        SFRNTCBzdHJ1Y3R1cmUgYmVsb3cKCiAgYGBgaHRtbAogIDxkaXYgY2xhc3M9
        ImVtYmVyLXZpZXciPgogICAgPGRpdiBjbGFzcz0iZW1iZXItdmlldyI+SGkg
        RGF2ZTwvZGl2PgogICAgPGRpdiBjbGFzcz0iZW1iZXItdmlldyI+SGkgTWFy
        eTwvZGl2PgogICAgPGRpdiBjbGFzcz0iZW1iZXItdmlldyI+SGkgU2FyYTwv
        ZGl2PgogIDwvZGl2PgogIGBgYAoKICAjIyMgQmxvY2tsZXNzIHVzZSBpbiBh
        IGNvbGxlY3Rpb24KCiAgSWYgeW91IHByb3ZpZGUgYW4gYGl0ZW1WaWV3Q2xh
        c3NgIG9wdGlvbiB0aGF0IGhhcyBpdHMgb3duIGB0ZW1wbGF0ZWAgeW91IGNh
        bgogIG9taXQgdGhlIGJsb2NrLgoKICBUaGUgZm9sbG93aW5nIHRlbXBsYXRl
        OgoKICBgYGBoYW5kbGViYXJzCiAge3tjb2xsZWN0aW9uIGNvbnRlbnRCaW5k
        aW5nPSJBcHAuaXRlbXMiIGl0ZW1WaWV3Q2xhc3M9IkFwcC5Bbkl0ZW1WaWV3
        In19CiAgYGBgCgogIEFuZCBhcHBsaWNhdGlvbiBjb2RlCgogIGBgYGphdmFz
        Y3JpcHQKICBBcHAgPSBFbWJlci5BcHBsaWNhdGlvbi5jcmVhdGUoKTsKICBB
        cHAuaXRlbXMgPSBbCiAgICBFbWJlci5PYmplY3QuY3JlYXRlKHtuYW1lOiAn
        RGF2ZSd9KSwKICAgIEVtYmVyLk9iamVjdC5jcmVhdGUoe25hbWU6ICdNYXJ5
        J30pLAogICAgRW1iZXIuT2JqZWN0LmNyZWF0ZSh7bmFtZTogJ1NhcmEnfSkK
        ICBdOwoKICBBcHAuQW5JdGVtVmlldyA9IEVtYmVyLlZpZXcuZXh0ZW5kKHsK
        ICAgIHRlbXBsYXRlOiBFbWJlci5IYW5kbGViYXJzLmNvbXBpbGUoIkdyZWV0
        aW5ncyB7e3ZpZXcuY29udGVudC5uYW1lfX0iKQogIH0pOwogIGBgYAoKICBX
        aWxsIHJlc3VsdCBpbiB0aGUgSFRNTCBzdHJ1Y3R1cmUgYmVsb3cKCiAgYGBg
        aHRtbAogIDxkaXYgY2xhc3M9ImVtYmVyLXZpZXciPgogICAgPGRpdiBjbGFz
        cz0iZW1iZXItdmlldyI+R3JlZXRpbmdzIERhdmU8L2Rpdj4KICAgIDxkaXYg
        Y2xhc3M9ImVtYmVyLXZpZXciPkdyZWV0aW5ncyBNYXJ5PC9kaXY+CiAgICA8
        ZGl2IGNsYXNzPSJlbWJlci12aWV3Ij5HcmVldGluZ3MgU2FyYTwvZGl2Pgog
        IDwvZGl2PgogIGBgYAoKICAjIyMgU3BlY2lmeWluZyBhIENvbGxlY3Rpb25W
        aWV3IHN1YmNsYXNzCgogIEJ5IGRlZmF1bHQgdGhlIGB7e2NvbGxlY3Rpb259
        fWAgaGVscGVyIHdpbGwgY3JlYXRlIGFuIGluc3RhbmNlIG9mCiAgYEVtYmVy
        LkNvbGxlY3Rpb25WaWV3YC4gWW91IGNhbiBzdXBwbHkgYSBgRW1iZXIuQ29s
        bGVjdGlvblZpZXdgIHN1YmNsYXNzIHRvCiAgdGhlIGhlbHBlciBieSBwYXNz
        aW5nIGl0IGFzIHRoZSBmaXJzdCBhcmd1bWVudDoKCiAgYGBgaGFuZGxlYmFy
        cwogIHt7I2NvbGxlY3Rpb24gQXBwLk15Q3VzdG9tQ29sbGVjdGlvbkNsYXNz
        IGNvbnRlbnRCaW5kaW5nPSJBcHAuaXRlbXMifX0KICAgIEhpIHt7dmlldy5j
        b250ZW50Lm5hbWV9fQogIHt7L2NvbGxlY3Rpb259fQogIGBgYAoKICAjIyMg
        Rm9yd2FyZGVkIGBpdGVtLipgLW5hbWVkIE9wdGlvbnMKCiAgQXMgd2l0aCB0
        aGUgYHt7dmlld319YCwgaGVscGVyIG9wdGlvbnMgcGFzc2VkIHRvIHRoZSBg
        e3tjb2xsZWN0aW9ufX1gIHdpbGwgYmUKICBzZXQgb24gdGhlIHJlc3VsdGlu
        ZyBgRW1iZXIuQ29sbGVjdGlvblZpZXdgIGFzIHByb3BlcnRpZXMuIEFkZGl0
        aW9uYWxseSwKICBvcHRpb25zIHByZWZpeGVkIHdpdGggYGl0ZW1gIHdpbGwg
        YmUgYXBwbGllZCB0byB0aGUgdmlld3MgcmVuZGVyZWQgZm9yIGVhY2gKICBp
        dGVtIChub3RlIHRoZSBjYW1lbGNhc2luZyk6CgogIGBgYGhhbmRsZWJhcnMK
        ICB7eyNjb2xsZWN0aW9uIGNvbnRlbnRCaW5kaW5nPSJBcHAuaXRlbXMiCiAg
        ICAgICAgICAgICAgICBpdGVtVGFnTmFtZT0icCIKICAgICAgICAgICAgICAg
        IGl0ZW1DbGFzc05hbWVzPSJncmVldGluZyJ9fQogICAgSG93ZHkge3t2aWV3
        LmNvbnRlbnQubmFtZX19CiAge3svY29sbGVjdGlvbn19CiAgYGBgCgogIFdp
        bGwgcmVzdWx0IGluIHRoZSBmb2xsb3dpbmcgSFRNTCBzdHJ1Y3R1cmU6Cgog
        IGBgYGh0bWwKICA8ZGl2IGNsYXNzPSJlbWJlci12aWV3Ij4KICAgIDxwIGNs
        YXNzPSJlbWJlci12aWV3IGdyZWV0aW5nIj5Ib3dkeSBEYXZlPC9wPgogICAg
        PHAgY2xhc3M9ImVtYmVyLXZpZXcgZ3JlZXRpbmciPkhvd2R5IE1hcnk8L3A+
        CiAgICA8cCBjbGFzcz0iZW1iZXItdmlldyBncmVldGluZyI+SG93ZHkgU2Fy
        YTwvcD4KICA8L2Rpdj4KICBgYGAKCiAgQG1ldGhvZCBjb2xsZWN0aW9uCiAg
        QGZvciBFbWJlci5IYW5kbGViYXJzLmhlbHBlcnMKICBAcGFyYW0ge1N0cmlu
        Z30gcGF0aAogIEBwYXJhbSB7SGFzaH0gb3B0aW9ucwogIEByZXR1cm4ge1N0
        cmluZ30gSFRNTCBzdHJpbmcKICBAZGVwcmVjYXRlZCBVc2UgYHt7ZWFjaH19
        YCBoZWxwZXIgaW5zdGVhZC4KKi8KRW1iZXIuSGFuZGxlYmFycy5yZWdpc3Rl
        ckhlbHBlcignY29sbGVjdGlvbicsIGZ1bmN0aW9uIGNvbGxlY3Rpb25IZWxw
        ZXIocGF0aCwgb3B0aW9ucykgewogIEVtYmVyLmRlcHJlY2F0ZSgiVXNpbmcg
        dGhlIHt7Y29sbGVjdGlvbn19IGhlbHBlciB3aXRob3V0IHNwZWNpZnlpbmcg
        YSBjbGFzcyBoYXMgYmVlbiBkZXByZWNhdGVkIGFzIHRoZSB7e2VhY2h9fSBo
        ZWxwZXIgbm93IHN1cHBvcnRzIHRoZSBzYW1lIGZ1bmN0aW9uYWxpdHkuIiwg
        cGF0aCAhPT0gJ2NvbGxlY3Rpb24nKTsKCiAgLy8gSWYgbm8gcGF0aCBpcyBw
        cm92aWRlZCwgdHJlYXQgcGF0aCBwYXJhbSBhcyBvcHRpb25zLgogIGlmIChw
        YXRoICYmIHBhdGguZGF0YSAmJiBwYXRoLmRhdGEuaXNSZW5kZXJEYXRhKSB7
        CiAgICBvcHRpb25zID0gcGF0aDsKICAgIHBhdGggPSB1bmRlZmluZWQ7CiAg
        ICBFbWJlci5hc3NlcnQoIllvdSBjYW5ub3QgcGFzcyBtb3JlIHRoYW4gb25l
        IGFyZ3VtZW50IHRvIHRoZSBjb2xsZWN0aW9uIGhlbHBlciIsIGFyZ3VtZW50
        cy5sZW5ndGggPT09IDEpOwogIH0gZWxzZSB7CiAgICBFbWJlci5hc3NlcnQo
        IllvdSBjYW5ub3QgcGFzcyBtb3JlIHRoYW4gb25lIGFyZ3VtZW50IHRvIHRo
        ZSBjb2xsZWN0aW9uIGhlbHBlciIsIGFyZ3VtZW50cy5sZW5ndGggPT09IDIp
        OwogIH0KCiAgdmFyIGZuID0gb3B0aW9ucy5mbjsKICB2YXIgZGF0YSA9IG9w
        dGlvbnMuZGF0YTsKICB2YXIgaW52ZXJzZSA9IG9wdGlvbnMuaW52ZXJzZTsK
        ICB2YXIgdmlldyA9IG9wdGlvbnMuZGF0YS52aWV3OwoKCiAgdmFyIGNvbnRy
        b2xsZXIsIGNvbnRhaW5lcjsKICAvLyBJZiBwYXNzZWQgYSBwYXRoIHN0cmlu
        ZywgY29udmVydCB0aGF0IGludG8gYW4gb2JqZWN0LgogIC8vIE90aGVyd2lz
        ZSwganVzdCBkZWZhdWx0IHRvIHRoZSBzdGFuZGFyZCBjbGFzcy4KICB2YXIg
        Y29sbGVjdGlvbkNsYXNzOwogIGlmIChwYXRoKSB7CiAgICBjb250cm9sbGVy
        ID0gZGF0YS5rZXl3b3Jkcy5jb250cm9sbGVyOwogICAgY29udGFpbmVyID0g
        Y29udHJvbGxlciAmJiBjb250cm9sbGVyLmNvbnRhaW5lcjsKICAgIGNvbGxl
        Y3Rpb25DbGFzcyA9IGhhbmRsZWJhcnNHZXQodGhpcywgcGF0aCwgb3B0aW9u
        cykgfHwgY29udGFpbmVyLmxvb2t1cEZhY3RvcnkoJ3ZpZXc6JyArIHBhdGgp
        OyAKICAgIEVtYmVyLmFzc2VydChmbXQoIiVAICNjb2xsZWN0aW9uOiBDb3Vs
        ZCBub3QgZmluZCBjb2xsZWN0aW9uIGNsYXNzICVAIiwgW2RhdGEudmlldywg
        cGF0aF0pLCAhIWNvbGxlY3Rpb25DbGFzcyk7CiAgfQogIGVsc2UgewogICAg
        Y29sbGVjdGlvbkNsYXNzID0gRW1iZXIuQ29sbGVjdGlvblZpZXc7CiAgfQoK
        ICB2YXIgaGFzaCA9IG9wdGlvbnMuaGFzaCwgaXRlbUhhc2ggPSB7fSwgbWF0
        Y2g7CgogIC8vIEV4dHJhY3QgaXRlbSB2aWV3IGNsYXNzIGlmIHByb3ZpZGVk
        IGVsc2UgZGVmYXVsdCB0byB0aGUgc3RhbmRhcmQgY2xhc3MKICB2YXIgY29s
        bGVjdGlvblByb3RvdHlwZSA9IGNvbGxlY3Rpb25DbGFzcy5wcm90bygpLAog
        ICAgICBpdGVtVmlld0NsYXNzOwoKICBpZiAoaGFzaC5pdGVtVmlldykgewog
        ICAgY29udHJvbGxlciA9IGRhdGEua2V5d29yZHMuY29udHJvbGxlcjsKICAg
        IEVtYmVyLmFzc2VydCgnWW91IHNwZWNpZmllZCBhbiBpdGVtVmlldywgYnV0
        IHRoZSBjdXJyZW50IGNvbnRleHQgaGFzIG5vICcgKwogICAgICAgICAgICAg
        ICAgICdjb250YWluZXIgdG8gbG9vayB0aGUgaXRlbVZpZXcgdXAgaW4uIFRo
        aXMgcHJvYmFibHkgbWVhbnMgJyArCiAgICAgICAgICAgICAgICAgJ3RoYXQg
        eW91IGNyZWF0ZWQgYSB2aWV3IG1hbnVhbGx5LCBpbnN0ZWFkIG9mIHRocm91
        Z2ggdGhlICcgKwogICAgICAgICAgICAgICAgICdjb250YWluZXIuIEluc3Rl
        YWQsIHVzZSBjb250YWluZXIubG9va3VwKCJ2aWV3OnZpZXdOYW1lIiksICcg
        KwogICAgICAgICAgICAgICAgICd3aGljaCB3aWxsIHByb3Blcmx5IGluc3Rh
        bnRpYXRlIHlvdXIgdmlldy4nLAogICAgICAgICAgICAgICAgIGNvbnRyb2xs
        ZXIgJiYgY29udHJvbGxlci5jb250YWluZXIpOwogICAgY29udGFpbmVyID0g
        Y29udHJvbGxlci5jb250YWluZXI7CiAgICBpdGVtVmlld0NsYXNzID0gY29u
        dGFpbmVyLmxvb2t1cEZhY3RvcnkoJ3ZpZXc6JyArIGhhc2guaXRlbVZpZXcp
        OwogICAgRW1iZXIuYXNzZXJ0KCdZb3Ugc3BlY2lmaWVkIHRoZSBpdGVtVmll
        dyAnICsgaGFzaC5pdGVtVmlldyArICIsIGJ1dCBpdCB3YXMgIiArCiAgICAg
        ICAgICAgICAgICAgIm5vdCBmb3VuZCBhdCAiICsgY29udGFpbmVyLmRlc2Ny
        aWJlKCJ2aWV3OiIgKyBoYXNoLml0ZW1WaWV3KSArCiAgICAgICAgICAgICAg
        ICAgIiAoYW5kIGl0IHdhcyBub3QgcmVnaXN0ZXJlZCBpbiB0aGUgY29udGFp
        bmVyKSIsICEhaXRlbVZpZXdDbGFzcyk7CiAgfSBlbHNlIGlmIChoYXNoLml0
        ZW1WaWV3Q2xhc3MpIHsKICAgIGl0ZW1WaWV3Q2xhc3MgPSBoYW5kbGViYXJz
        R2V0KGNvbGxlY3Rpb25Qcm90b3R5cGUsIGhhc2guaXRlbVZpZXdDbGFzcywg
        b3B0aW9ucyk7CiAgfSBlbHNlIHsKICAgIGl0ZW1WaWV3Q2xhc3MgPSBjb2xs
        ZWN0aW9uUHJvdG90eXBlLml0ZW1WaWV3Q2xhc3M7CiAgfQoKICBFbWJlci5h
        c3NlcnQoZm10KCIlQCAjY29sbGVjdGlvbjogQ291bGQgbm90IGZpbmQgaXRl
        bVZpZXdDbGFzcyAlQCIsIFtkYXRhLnZpZXcsIGl0ZW1WaWV3Q2xhc3NdKSwg
        ISFpdGVtVmlld0NsYXNzKTsKCiAgZGVsZXRlIGhhc2guaXRlbVZpZXdDbGFz
        czsKICBkZWxldGUgaGFzaC5pdGVtVmlldzsKCiAgLy8gR28gdGhyb3VnaCBv
        cHRpb25zIHBhc3NlZCB0byB0aGUge3tjb2xsZWN0aW9ufX0gaGVscGVyIGFu
        ZCBleHRyYWN0IG9wdGlvbnMKICAvLyB0aGF0IGNvbmZpZ3VyZSBpdGVtIHZp
        ZXdzIGluc3RlYWQgb2YgdGhlIGNvbGxlY3Rpb24gaXRzZWxmLgogIGZvciAo
        dmFyIHByb3AgaW4gaGFzaCkgewogICAgaWYgKGhhc2guaGFzT3duUHJvcGVy
        dHkocHJvcCkpIHsKICAgICAgbWF0Y2ggPSBwcm9wLm1hdGNoKC9eaXRlbSgu
        KSguKikkLyk7CgogICAgICBpZiAobWF0Y2ggJiYgcHJvcCAhPT0gJ2l0ZW1D
        b250cm9sbGVyJykgewogICAgICAgIC8vIENvbnZlcnQgaXRlbVNob3VsZEZv
        byAtPiBzaG91bGRGb28KICAgICAgICBpdGVtSGFzaFttYXRjaFsxXS50b0xv
        d2VyQ2FzZSgpICsgbWF0Y2hbMl1dID0gaGFzaFtwcm9wXTsKICAgICAgICAv
        LyBEZWxldGUgZnJvbSBoYXNoIGFzIHRoaXMgd2lsbCBlbmQgdXAgZ2V0dGlu
        ZyBwYXNzZWQgdG8gdGhlCiAgICAgICAgLy8ge3t2aWV3fX0gaGVscGVyIG1l
        dGhvZC4KICAgICAgICBkZWxldGUgaGFzaFtwcm9wXTsKICAgICAgfQogICAg
        fQogIH0KCiAgaWYgKGZuKSB7CiAgICBpdGVtSGFzaC50ZW1wbGF0ZSA9IGZu
        OwogICAgZGVsZXRlIG9wdGlvbnMuZm47CiAgfQoKICB2YXIgZW1wdHlWaWV3
        Q2xhc3M7CiAgaWYgKGludmVyc2UgJiYgaW52ZXJzZSAhPT0gRW1iZXIuSGFu
        ZGxlYmFycy5WTS5ub29wKSB7CiAgICBlbXB0eVZpZXdDbGFzcyA9IGdldChj
        b2xsZWN0aW9uUHJvdG90eXBlLCAnZW1wdHlWaWV3Q2xhc3MnKTsKICAgIGVt
        cHR5Vmlld0NsYXNzID0gZW1wdHlWaWV3Q2xhc3MuZXh0ZW5kKHsKICAgICAg
        ICAgIHRlbXBsYXRlOiBpbnZlcnNlLAogICAgICAgICAgdGFnTmFtZTogaXRl
        bUhhc2gudGFnTmFtZQogICAgfSk7CiAgfSBlbHNlIGlmIChoYXNoLmVtcHR5
        Vmlld0NsYXNzKSB7CiAgICBlbXB0eVZpZXdDbGFzcyA9IGhhbmRsZWJhcnNH
        ZXQodGhpcywgaGFzaC5lbXB0eVZpZXdDbGFzcywgb3B0aW9ucyk7CiAgfQog
        IGlmIChlbXB0eVZpZXdDbGFzcykgeyBoYXNoLmVtcHR5VmlldyA9IGVtcHR5
        Vmlld0NsYXNzOyB9CgogIGlmICghaGFzaC5rZXl3b3JkKSB7CiAgICBpdGVt
        SGFzaC5fY29udGV4dCA9IEVtYmVyLmNvbXB1dGVkLmFsaWFzKCdjb250ZW50
        Jyk7CiAgfQoKICB2YXIgdmlld09wdGlvbnMgPSBFbWJlci5IYW5kbGViYXJz
        LlZpZXdIZWxwZXIucHJvcGVydGllc0Zyb21IVE1MT3B0aW9ucyh7IGRhdGE6
        IGRhdGEsIGhhc2g6IGl0ZW1IYXNoIH0sIHRoaXMpOwogIGhhc2guaXRlbVZp
        ZXdDbGFzcyA9IGl0ZW1WaWV3Q2xhc3MuZXh0ZW5kKHZpZXdPcHRpb25zKTsK
        CiAgcmV0dXJuIEVtYmVyLkhhbmRsZWJhcnMuaGVscGVycy52aWV3LmNhbGwo
        dGhpcywgY29sbGVjdGlvbkNsYXNzLCBvcHRpb25zKTsKfSk7CgoKfSkoKTsK
        CgoKKGZ1bmN0aW9uKCkgewovKmdsb2JhbHMgSGFuZGxlYmFycyAqLwovKioK
        QG1vZHVsZSBlbWJlcgpAc3VibW9kdWxlIGVtYmVyLWhhbmRsZWJhcnMKKi8K
        CnZhciBoYW5kbGViYXJzR2V0ID0gRW1iZXIuSGFuZGxlYmFycy5nZXQ7Cgov
        KioKICBgdW5ib3VuZGAgYWxsb3dzIHlvdSB0byBvdXRwdXQgYSBwcm9wZXJ0
        eSB3aXRob3V0IGJpbmRpbmcuICpJbXBvcnRhbnQ6KiBUaGUKICBvdXRwdXQg
        d2lsbCBub3QgYmUgdXBkYXRlZCBpZiB0aGUgcHJvcGVydHkgY2hhbmdlcy4g
        VXNlIHdpdGggY2F1dGlvbi4KCiAgYGBgaGFuZGxlYmFycwogIDxkaXY+e3t1
        bmJvdW5kIHNvbWVQcm9wZXJ0eVRoYXREb2VzbnRDaGFuZ2V9fTwvZGl2Pgog
        IGBgYAoKICBgdW5ib3VuZGAgY2FuIGFsc28gYmUgdXNlZCBpbiBjb25qdW5j
        dGlvbiB3aXRoIGEgYm91bmQgaGVscGVyIHRvCiAgcmVuZGVyIGl0IGluIGl0
        cyB1bmJvdW5kIGZvcm06CgogIGBgYGhhbmRsZWJhcnMKICA8ZGl2Pnt7dW5i
        b3VuZCBoZWxwZXJOYW1lIHNvbWVQcm9wZXJ0eVRoYXREb2VzbnRDaGFuZ2V9
        fTwvZGl2PgogIGBgYAoKICBAbWV0aG9kIHVuYm91bmQKICBAZm9yIEVtYmVy
        LkhhbmRsZWJhcnMuaGVscGVycwogIEBwYXJhbSB7U3RyaW5nfSBwcm9wZXJ0
        eQogIEByZXR1cm4ge1N0cmluZ30gSFRNTCBzdHJpbmcKKi8KRW1iZXIuSGFu
        ZGxlYmFycy5yZWdpc3RlckhlbHBlcigndW5ib3VuZCcsIGZ1bmN0aW9uIHVu
        Ym91bmRIZWxwZXIocHJvcGVydHksIGZuKSB7CiAgdmFyIG9wdGlvbnMgPSBh
        cmd1bWVudHNbYXJndW1lbnRzLmxlbmd0aCAtIDFdLCBoZWxwZXIsIGNvbnRl
        eHQsIG91dDsKCiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAyKSB7CiAgICAv
        LyBVbmJvdW5kIGhlbHBlciBjYWxsLgogICAgb3B0aW9ucy5kYXRhLmlzVW5i
        b3VuZCA9IHRydWU7CiAgICBoZWxwZXIgPSBFbWJlci5IYW5kbGViYXJzLmhl
        bHBlcnNbYXJndW1lbnRzWzBdXSB8fCBFbWJlci5IYW5kbGViYXJzLmhlbHBl
        cnMuaGVscGVyTWlzc2luZzsKICAgIG91dCA9IGhlbHBlci5hcHBseSh0aGlz
        LCBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpKTsK
        ICAgIGRlbGV0ZSBvcHRpb25zLmRhdGEuaXNVbmJvdW5kOwogICAgcmV0dXJu
        IG91dDsKICB9CgogIGNvbnRleHQgPSAoZm4uY29udGV4dHMgJiYgZm4uY29u
        dGV4dHMubGVuZ3RoKSA/IGZuLmNvbnRleHRzWzBdIDogdGhpczsKICByZXR1
        cm4gaGFuZGxlYmFyc0dldChjb250ZXh0LCBwcm9wZXJ0eSwgZm4pOwp9KTsK
        Cn0pKCk7CgoKCihmdW5jdGlvbigpIHsKLypqc2hpbnQgZGVidWc6dHJ1ZSov
        Ci8qKgpAbW9kdWxlIGVtYmVyCkBzdWJtb2R1bGUgZW1iZXItaGFuZGxlYmFy
        cwoqLwoKdmFyIGdldCA9IEVtYmVyLmdldDsKdmFyIGhhbmRsZWJhcnNHZXQg
        PSBFbWJlci5IYW5kbGViYXJzLmdldCwgbm9ybWFsaXplUGF0aCA9IEVtYmVy
        LkhhbmRsZWJhcnMubm9ybWFsaXplUGF0aDsKdmFyIGFfc2xpY2UgPSBbXS5z
        bGljZTsKCi8qKgogIGBsb2dgIGFsbG93cyB5b3UgdG8gb3V0cHV0IHRoZSB2
        YWx1ZSBvZiB2YXJpYWJsZXMgaW4gdGhlIGN1cnJlbnQgcmVuZGVyaW5nCiAg
        Y29udGV4dC4gYGxvZ2AgYWxzbyBhY2NlcHRzIHByaW1pdGl2ZSB0eXBlcyBz
        dWNoIGFzIHN0cmluZ3Mgb3IgbnVtYmVycy4KCiAgYGBgaGFuZGxlYmFycwog
        IHt7bG9nICJteVZhcmlhYmxlOiIgbXlWYXJpYWJsZSB9fQogIGBgYAoKICBA
        bWV0aG9kIGxvZwogIEBmb3IgRW1iZXIuSGFuZGxlYmFycy5oZWxwZXJzCiAg
        QHBhcmFtIHtTdHJpbmd9IHByb3BlcnR5CiovCkVtYmVyLkhhbmRsZWJhcnMu
        cmVnaXN0ZXJIZWxwZXIoJ2xvZycsIGZ1bmN0aW9uIGxvZ0hlbHBlcigpIHsK
        ICB2YXIgcGFyYW1zID0gYV9zbGljZS5jYWxsKGFyZ3VtZW50cywgMCwgLTEp
        LAogICAgICBvcHRpb25zID0gYXJndW1lbnRzW2FyZ3VtZW50cy5sZW5ndGgg
        LSAxXSwKICAgICAgbG9nZ2VyID0gRW1iZXIuTG9nZ2VyLmxvZywKICAgICAg
        dmFsdWVzID0gW10sCiAgICAgIGFsbG93UHJpbWl0aXZlcyA9IGZhbHNlOwoK
        ICAKICAgIGFsbG93UHJpbWl0aXZlcyA9IHRydWU7CiAgCgogIGZvciAodmFy
        IGkgPSAwOyBpIDwgcGFyYW1zLmxlbmd0aDsgaSsrKSB7CiAgICB2YXIgdHlw
        ZSA9IG9wdGlvbnMudHlwZXNbaV07CgogICAgaWYgKHR5cGUgPT09ICdJRCcg
        fHwgIWFsbG93UHJpbWl0aXZlcykgewogICAgICB2YXIgY29udGV4dCA9IChv
        cHRpb25zLmNvbnRleHRzICYmIG9wdGlvbnMuY29udGV4dHNbaV0pIHx8IHRo
        aXMsCiAgICAgICAgICBub3JtYWxpemVkID0gbm9ybWFsaXplUGF0aChjb250
        ZXh0LCBwYXJhbXNbaV0sIG9wdGlvbnMuZGF0YSk7CgogICAgICBpZiAobm9y
        bWFsaXplZC5wYXRoID09PSAndGhpcycpIHsKICAgICAgICB2YWx1ZXMucHVz
        aChub3JtYWxpemVkLnJvb3QpOwogICAgICB9IGVsc2UgewogICAgICAgIHZh
        bHVlcy5wdXNoKGhhbmRsZWJhcnNHZXQobm9ybWFsaXplZC5yb290LCBub3Jt
        YWxpemVkLnBhdGgsIG9wdGlvbnMpKTsKICAgICAgfQogICAgfSBlbHNlIHsK
        ICAgICAgdmFsdWVzLnB1c2gocGFyYW1zW2ldKTsKICAgIH0KICB9CgogIGxv
        Z2dlci5hcHBseShsb2dnZXIsIHZhbHVlcyk7Cn0pOwoKLyoqCiAgRXhlY3V0
        ZSB0aGUgYGRlYnVnZ2VyYCBzdGF0ZW1lbnQgaW4gdGhlIGN1cnJlbnQgY29u
        dGV4dC4KCiAgYGBgaGFuZGxlYmFycwogIHt7ZGVidWdnZXJ9fQogIGBgYAoK
        ICBCZWZvcmUgaW52b2tpbmcgdGhlIGBkZWJ1Z2dlcmAgc3RhdGVtZW50LCB0
        aGVyZQogIGFyZSBhIGZldyBoZWxwZnVsIHZhcmlhYmxlcyBkZWZpbmVkIGlu
        IHRoZQogIGJvZHkgb2YgdGhpcyBoZWxwZXIgdGhhdCB5b3UgY2FuIGluc3Bl
        Y3Qgd2hpbGUKICBkZWJ1Z2dpbmcgdGhhdCBkZXNjcmliZSBob3cgYW5kIHdo
        ZXJlIHRoaXMKICBoZWxwZXIgd2FzIGludm9rZWQ6CgogIC0gdGVtcGxhdGVD
        b250ZXh0OiB0aGlzIGlzIG1vc3QgbGlrZWx5IGEgY29udHJvbGxlcgogICAg
        ZnJvbSB3aGljaCB0aGlzIHRlbXBsYXRlIGxvb2tzIHVwIC8gZGlzcGxheXMg
        cHJvcGVydGllcwogIC0gdHlwZU9mVGVtcGxhdGVDb250ZXh0OiBhIHN0cmlu
        ZyBkZXNjcmlwdGlvbiBvZgogICAgd2hhdCB0aGUgdGVtcGxhdGVDb250ZXh0
        IGlzCgogIEZvciBleGFtcGxlLCBpZiB5b3UncmUgd29uZGVyaW5nIHdoeSBh
        IHZhbHVlIGB7e2Zvb319YAogIGlzbid0IHJlbmRlcmluZyBhcyBleHBlY3Rl
        ZCB3aXRoaW4gYSB0ZW1wbGF0ZSwgeW91CiAgY291bGQgcGxhY2UgYSBge3tk
        ZWJ1Z2dlcn19YCBzdGF0ZW1lbnQsIGFuZCB3aGVuCiAgdGhlIGBkZWJ1Z2dl
        cjtgIGJyZWFrcG9pbnQgaXMgaGl0LCB5b3UgY2FuIGluc3BlY3QKICBgdGVt
        cGxhdGVDb250ZXh0YCwgZGV0ZXJtaW5lIGlmIGl0J3MgdGhlIG9iamVjdCB5
        b3UKICBleHBlY3QsIGFuZC9vciBldmFsdWF0ZSBleHByZXNzaW9ucyBpbiB0
        aGUgY29uc29sZQogIHRvIHBlcmZvcm0gcHJvcGVydHkgbG9va3VwcyBvbiB0
        aGUgYHRlbXBsYXRlQ29udGV4dGA6CgogIGBgYAogICAgPiB0ZW1wbGF0ZUNv
        bnRleHQuZ2V0KCdmb28nKSAvLyAtPiAiPHZhbHVlIG9mIHt7Zm9vfX0+Igog
        IGBgYAoKICBAbWV0aG9kIGRlYnVnZ2VyCiAgQGZvciBFbWJlci5IYW5kbGVi
        YXJzLmhlbHBlcnMKICBAcGFyYW0ge1N0cmluZ30gcHJvcGVydHkKKi8KRW1i
        ZXIuSGFuZGxlYmFycy5yZWdpc3RlckhlbHBlcignZGVidWdnZXInLCBmdW5j
        dGlvbiBkZWJ1Z2dlckhlbHBlcihvcHRpb25zKSB7CgogIC8vIFRoZXNlIGFy
        ZSBoZWxwZnVsIHZhbHVlcyB5b3UgY2FuIGluc3BlY3Qgd2hpbGUgZGVidWdn
        aW5nLgogIHZhciB0ZW1wbGF0ZUNvbnRleHQgPSB0aGlzOwogIHZhciB0eXBl
        T2ZUZW1wbGF0ZUNvbnRleHQgPSBFbWJlci5pbnNwZWN0KHRlbXBsYXRlQ29u
        dGV4dCk7CgogIGRlYnVnZ2VyOwp9KTsKCgoKfSkoKTsKCgoKKGZ1bmN0aW9u
        KCkgewovKioKQG1vZHVsZSBlbWJlcgpAc3VibW9kdWxlIGVtYmVyLWhhbmRs
        ZWJhcnMKKi8KCnZhciBnZXQgPSBFbWJlci5nZXQsIHNldCA9IEVtYmVyLnNl
        dDsKdmFyIGZtdCA9IEVtYmVyLlN0cmluZy5mbXQ7CgpFbWJlci5IYW5kbGVi
        YXJzLkVhY2hWaWV3ID0gRW1iZXIuQ29sbGVjdGlvblZpZXcuZXh0ZW5kKEVt
        YmVyLl9NZXRhbW9ycGgsIHsKICBpbml0OiBmdW5jdGlvbigpIHsKICAgIHZh
        ciBpdGVtQ29udHJvbGxlciA9IGdldCh0aGlzLCAnaXRlbUNvbnRyb2xsZXIn
        KTsKICAgIHZhciBiaW5kaW5nOwoKICAgIGlmIChpdGVtQ29udHJvbGxlcikg
        ewogICAgICB2YXIgY29udHJvbGxlciA9IGdldCh0aGlzLCAnY29udHJvbGxl
        ci5jb250YWluZXInKS5sb29rdXBGYWN0b3J5KCdjb250cm9sbGVyOmFycmF5
        JykuY3JlYXRlKHsKICAgICAgICBfaXNWaXJ0dWFsOiB0cnVlLAogICAgICAg
        IHBhcmVudENvbnRyb2xsZXI6IGdldCh0aGlzLCAnY29udHJvbGxlcicpLAog
        ICAgICAgIGl0ZW1Db250cm9sbGVyOiBpdGVtQ29udHJvbGxlciwKICAgICAg
        ICB0YXJnZXQ6IGdldCh0aGlzLCAnY29udHJvbGxlcicpLAogICAgICAgIF9l
        YWNoVmlldzogdGhpcwogICAgICB9KTsKCiAgICAgIHRoaXMuZGlzYWJsZUNv
        bnRlbnRPYnNlcnZlcnMoZnVuY3Rpb24oKSB7CiAgICAgICAgc2V0KHRoaXMs
        ICdjb250ZW50JywgY29udHJvbGxlcik7CiAgICAgICAgYmluZGluZyA9IG5l
        dyBFbWJlci5CaW5kaW5nKCdjb250ZW50JywgJ19lYWNoVmlldy5kYXRhU291
        cmNlJykub25lV2F5KCk7CiAgICAgICAgYmluZGluZy5jb25uZWN0KGNvbnRy
        b2xsZXIpOwogICAgICB9KTsKCiAgICAgIHNldCh0aGlzLCAnX2FycmF5Q29u
        dHJvbGxlcicsIGNvbnRyb2xsZXIpOwogICAgfSBlbHNlIHsKICAgICAgdGhp
        cy5kaXNhYmxlQ29udGVudE9ic2VydmVycyhmdW5jdGlvbigpIHsKICAgICAg
        ICBiaW5kaW5nID0gbmV3IEVtYmVyLkJpbmRpbmcoJ2NvbnRlbnQnLCAnZGF0
        YVNvdXJjZScpLm9uZVdheSgpOwogICAgICAgIGJpbmRpbmcuY29ubmVjdCh0
        aGlzKTsKICAgICAgfSk7CiAgICB9CgogICAgcmV0dXJuIHRoaXMuX3N1cGVy
        KCk7CiAgfSwKCiAgX2Fzc2VydEFycmF5TGlrZTogZnVuY3Rpb24oY29udGVu
        dCkgewogICAgRW1iZXIuYXNzZXJ0KGZtdCgiVGhlIHZhbHVlIHRoYXQgI2Vh
        Y2ggbG9vcHMgb3ZlciBtdXN0IGJlIGFuIEFycmF5LiBZb3UgIiArCiAgICAg
        ICAgICAgICAgICAgICAgICJwYXNzZWQgJUAsIGJ1dCBpdCBzaG91bGQgaGF2
        ZSBiZWVuIGFuIEFycmF5Q29udHJvbGxlciIsCiAgICAgICAgICAgICAgICAg
        ICAgIFtjb250ZW50LmNvbnN0cnVjdG9yXSksCiAgICAgICAgICAgICAgICAg
        ICAgICFFbWJlci5Db250cm9sbGVyTWl4aW4uZGV0ZWN0KGNvbnRlbnQpIHx8
        CiAgICAgICAgICAgICAgICAgICAgICAgKGNvbnRlbnQgJiYgY29udGVudC5p
        c0dlbmVyYXRlZCkgfHwKICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50
        IGluc3RhbmNlb2YgRW1iZXIuQXJyYXlDb250cm9sbGVyKTsKICAgIEVtYmVy
        LmFzc2VydChmbXQoIlRoZSB2YWx1ZSB0aGF0ICNlYWNoIGxvb3BzIG92ZXIg
        bXVzdCBiZSBhbiBBcnJheS4gWW91IHBhc3NlZCAlQCIsIFsoRW1iZXIuQ29u
        dHJvbGxlck1peGluLmRldGVjdChjb250ZW50KSAmJiBjb250ZW50LmdldCgn
        bW9kZWwnKSAhPT0gdW5kZWZpbmVkKSA/IGZtdCgiJyVAJyAod3JhcHBlZCBp
        biAlQCkiLCBbY29udGVudC5nZXQoJ21vZGVsJyksIGNvbnRlbnRdKSA6IGNv
        bnRlbnRdKSwgRW1iZXIuQXJyYXkuZGV0ZWN0KGNvbnRlbnQpKTsKICB9LAoK
        ICBkaXNhYmxlQ29udGVudE9ic2VydmVyczogZnVuY3Rpb24oY2FsbGJhY2sp
        IHsKICAgIEVtYmVyLnJlbW92ZUJlZm9yZU9ic2VydmVyKHRoaXMsICdjb250
        ZW50JywgbnVsbCwgJ19jb250ZW50V2lsbENoYW5nZScpOwogICAgRW1iZXIu
        cmVtb3ZlT2JzZXJ2ZXIodGhpcywgJ2NvbnRlbnQnLCBudWxsLCAnX2NvbnRl
        bnREaWRDaGFuZ2UnKTsKCiAgICBjYWxsYmFjay5jYWxsKHRoaXMpOwoKICAg
        IEVtYmVyLmFkZEJlZm9yZU9ic2VydmVyKHRoaXMsICdjb250ZW50JywgbnVs
        bCwgJ19jb250ZW50V2lsbENoYW5nZScpOwogICAgRW1iZXIuYWRkT2JzZXJ2
        ZXIodGhpcywgJ2NvbnRlbnQnLCBudWxsLCAnX2NvbnRlbnREaWRDaGFuZ2Un
        KTsKICB9LAoKICBpdGVtVmlld0NsYXNzOiBFbWJlci5fTWV0YW1vcnBoVmll
        dywKICBlbXB0eVZpZXdDbGFzczogRW1iZXIuX01ldGFtb3JwaFZpZXcsCgog
        IGNyZWF0ZUNoaWxkVmlldzogZnVuY3Rpb24odmlldywgYXR0cnMpIHsKICAg
        IHZpZXcgPSB0aGlzLl9zdXBlcih2aWV3LCBhdHRycyk7CgogICAgLy8gQXQg
        dGhlIG1vbWVudCwgaWYgYSBjb250YWluZXIgdmlldyBzdWJjbGFzcyB3YW50
        cwogICAgLy8gdG8gaW5zZXJ0IGtleXdvcmRzLCBpdCBpcyByZXNwb25zaWJs
        ZSBmb3IgY2xvbmluZwogICAgLy8gdGhlIGtleXdvcmRzIGhhc2guIFRoaXMg
        d2lsbCBiZSBmaXhlZCBtb21lbnRhcmlseS4KICAgIHZhciBrZXl3b3JkID0g
        Z2V0KHRoaXMsICdrZXl3b3JkJyk7CiAgICB2YXIgY29udGVudCA9IGdldCh2
        aWV3LCAnY29udGVudCcpOwoKICAgIGlmIChrZXl3b3JkKSB7CiAgICAgIHZh
        ciBkYXRhID0gZ2V0KHZpZXcsICd0ZW1wbGF0ZURhdGEnKTsKCiAgICAgIGRh
        dGEgPSBFbWJlci5jb3B5KGRhdGEpOwogICAgICBkYXRhLmtleXdvcmRzID0g
        dmlldy5jbG9uZUtleXdvcmRzKCk7CiAgICAgIHNldCh2aWV3LCAndGVtcGxh
        dGVEYXRhJywgZGF0YSk7CgogICAgICAvLyBJbiB0aGlzIGNhc2UsIHdlIGRv
        IG5vdCBiaW5kLCBiZWNhdXNlIHRoZSBgY29udGVudGAgb2YKICAgICAgLy8g
        YSAjZWFjaCBpdGVtIGNhbm5vdCBjaGFuZ2UuCiAgICAgIGRhdGEua2V5d29y
        ZHNba2V5d29yZF0gPSBjb250ZW50OwogICAgfQoKICAgIC8vIElmIHt7I2Vh
        Y2h9fSBpcyBsb29waW5nIG92ZXIgYW4gYXJyYXkgb2YgY29udHJvbGxlcnMs
        CiAgICAvLyBwb2ludCBlYWNoIGNoaWxkIHZpZXcgYXQgdGhlaXIgcmVzcGVj
        dGl2ZSBjb250cm9sbGVyLgogICAgaWYgKGNvbnRlbnQgJiYgY29udGVudC5p
        c0NvbnRyb2xsZXIpIHsKICAgICAgc2V0KHZpZXcsICdjb250cm9sbGVyJywg
        Y29udGVudCk7CiAgICB9CgogICAgcmV0dXJuIHZpZXc7CiAgfSwKCiAgZGVz
        dHJveTogZnVuY3Rpb24oKSB7CiAgICBpZiAoIXRoaXMuX3N1cGVyKCkpIHsg
        cmV0dXJuOyB9CgogICAgdmFyIGFycmF5Q29udHJvbGxlciA9IGdldCh0aGlz
        LCAnX2FycmF5Q29udHJvbGxlcicpOwoKICAgIGlmIChhcnJheUNvbnRyb2xs
        ZXIpIHsKICAgICAgYXJyYXlDb250cm9sbGVyLmRlc3Ryb3koKTsKICAgIH0K
        CiAgICByZXR1cm4gdGhpczsKICB9Cn0pOwoKdmFyIEdyb3VwZWRFYWNoID0g
        RW1iZXIuSGFuZGxlYmFycy5Hcm91cGVkRWFjaCA9IGZ1bmN0aW9uKGNvbnRl
        eHQsIHBhdGgsIG9wdGlvbnMpIHsKICB2YXIgc2VsZiA9IHRoaXMsCiAgICAg
        IG5vcm1hbGl6ZWQgPSBFbWJlci5IYW5kbGViYXJzLm5vcm1hbGl6ZVBhdGgo
        Y29udGV4dCwgcGF0aCwgb3B0aW9ucy5kYXRhKTsKCiAgdGhpcy5jb250ZXh0
        ID0gY29udGV4dDsKICB0aGlzLnBhdGggPSBwYXRoOwogIHRoaXMub3B0aW9u
        cyA9IG9wdGlvbnM7CiAgdGhpcy50ZW1wbGF0ZSA9IG9wdGlvbnMuZm47CiAg
        dGhpcy5jb250YWluaW5nVmlldyA9IG9wdGlvbnMuZGF0YS52aWV3OwogIHRo
        aXMubm9ybWFsaXplZFJvb3QgPSBub3JtYWxpemVkLnJvb3Q7CiAgdGhpcy5u
        b3JtYWxpemVkUGF0aCA9IG5vcm1hbGl6ZWQucGF0aDsKICB0aGlzLmNvbnRl
        bnQgPSB0aGlzLmxvb2t1cENvbnRlbnQoKTsKCiAgdGhpcy5hZGRDb250ZW50
        T2JzZXJ2ZXJzKCk7CiAgdGhpcy5hZGRBcnJheU9ic2VydmVycygpOwoKICB0
        aGlzLmNvbnRhaW5pbmdWaWV3Lm9uKCd3aWxsQ2xlYXJSZW5kZXInLCBmdW5j
        dGlvbigpIHsKICAgIHNlbGYuZGVzdHJveSgpOwogIH0pOwp9OwoKR3JvdXBl
        ZEVhY2gucHJvdG90eXBlID0gewogIGNvbnRlbnRXaWxsQ2hhbmdlOiBmdW5j
        dGlvbigpIHsKICAgIHRoaXMucmVtb3ZlQXJyYXlPYnNlcnZlcnMoKTsKICB9
        LAoKICBjb250ZW50RGlkQ2hhbmdlOiBmdW5jdGlvbigpIHsKICAgIHRoaXMu
        Y29udGVudCA9IHRoaXMubG9va3VwQ29udGVudCgpOwogICAgdGhpcy5hZGRB
        cnJheU9ic2VydmVycygpOwogICAgdGhpcy5yZXJlbmRlckNvbnRhaW5pbmdW
        aWV3KCk7CiAgfSwKCiAgY29udGVudEFycmF5V2lsbENoYW5nZTogRW1iZXIu
        SywKCiAgY29udGVudEFycmF5RGlkQ2hhbmdlOiBmdW5jdGlvbigpIHsKICAg
        IHRoaXMucmVyZW5kZXJDb250YWluaW5nVmlldygpOwogIH0sCgogIGxvb2t1
        cENvbnRlbnQ6IGZ1bmN0aW9uKCkgewogICAgcmV0dXJuIEVtYmVyLkhhbmRs
        ZWJhcnMuZ2V0KHRoaXMubm9ybWFsaXplZFJvb3QsIHRoaXMubm9ybWFsaXpl
        ZFBhdGgsIHRoaXMub3B0aW9ucyk7CiAgfSwKCiAgYWRkQXJyYXlPYnNlcnZl
        cnM6IGZ1bmN0aW9uKCkgewogICAgaWYgKCF0aGlzLmNvbnRlbnQpIHsgcmV0
        dXJuOyB9CgogICAgdGhpcy5jb250ZW50LmFkZEFycmF5T2JzZXJ2ZXIodGhp
        cywgewogICAgICB3aWxsQ2hhbmdlOiAnY29udGVudEFycmF5V2lsbENoYW5n
        ZScsCiAgICAgIGRpZENoYW5nZTogJ2NvbnRlbnRBcnJheURpZENoYW5nZScK
        ICAgIH0pOwogIH0sCgogIHJlbW92ZUFycmF5T2JzZXJ2ZXJzOiBmdW5jdGlv
        bigpIHsKICAgIGlmICghdGhpcy5jb250ZW50KSB7IHJldHVybjsgfQoKICAg
        IHRoaXMuY29udGVudC5yZW1vdmVBcnJheU9ic2VydmVyKHRoaXMsIHsKICAg
        ICAgd2lsbENoYW5nZTogJ2NvbnRlbnRBcnJheVdpbGxDaGFuZ2UnLAogICAg
        ICBkaWRDaGFuZ2U6ICdjb250ZW50QXJyYXlEaWRDaGFuZ2UnCiAgICB9KTsK
        ICB9LAoKICBhZGRDb250ZW50T2JzZXJ2ZXJzOiBmdW5jdGlvbigpIHsKICAg
        IEVtYmVyLmFkZEJlZm9yZU9ic2VydmVyKHRoaXMubm9ybWFsaXplZFJvb3Qs
        IHRoaXMubm9ybWFsaXplZFBhdGgsIHRoaXMsIHRoaXMuY29udGVudFdpbGxD
        aGFuZ2UpOwogICAgRW1iZXIuYWRkT2JzZXJ2ZXIodGhpcy5ub3JtYWxpemVk
        Um9vdCwgdGhpcy5ub3JtYWxpemVkUGF0aCwgdGhpcywgdGhpcy5jb250ZW50
        RGlkQ2hhbmdlKTsKICB9LAoKICByZW1vdmVDb250ZW50T2JzZXJ2ZXJzOiBm
        dW5jdGlvbigpIHsKICAgIEVtYmVyLnJlbW92ZUJlZm9yZU9ic2VydmVyKHRo
        aXMubm9ybWFsaXplZFJvb3QsIHRoaXMubm9ybWFsaXplZFBhdGgsIHRoaXMu
        Y29udGVudFdpbGxDaGFuZ2UpOwogICAgRW1iZXIucmVtb3ZlT2JzZXJ2ZXIo
        dGhpcy5ub3JtYWxpemVkUm9vdCwgdGhpcy5ub3JtYWxpemVkUGF0aCwgdGhp
        cy5jb250ZW50RGlkQ2hhbmdlKTsKICB9LAoKICByZW5kZXI6IGZ1bmN0aW9u
        KCkgewogICAgaWYgKCF0aGlzLmNvbnRlbnQpIHsgcmV0dXJuOyB9CgogICAg
        dmFyIGNvbnRlbnQgPSB0aGlzLmNvbnRlbnQsCiAgICAgICAgY29udGVudExl
        bmd0aCA9IGdldChjb250ZW50LCAnbGVuZ3RoJyksCiAgICAgICAgZGF0YSA9
        IHRoaXMub3B0aW9ucy5kYXRhLAogICAgICAgIHRlbXBsYXRlID0gdGhpcy50
        ZW1wbGF0ZTsKCiAgICBkYXRhLmluc2lkZUVhY2ggPSB0cnVlOwogICAgZm9y
        ICh2YXIgaSA9IDA7IGkgPCBjb250ZW50TGVuZ3RoOyBpKyspIHsKICAgICAg
        dGVtcGxhdGUoY29udGVudC5vYmplY3RBdChpKSwgeyBkYXRhOiBkYXRhIH0p
        OwogICAgfQogIH0sCgogIHJlcmVuZGVyQ29udGFpbmluZ1ZpZXc6IGZ1bmN0
        aW9uKCkgewogICAgdmFyIHNlbGYgPSB0aGlzOwogICAgRW1iZXIucnVuLnNj
        aGVkdWxlT25jZSgncmVuZGVyJywgdGhpcywgZnVuY3Rpb24oKSB7CiAgICAg
        IC8vIEl0J3MgcG9zc2libGUgaXQncyBiZWVuIGRlc3Ryb3llZCBhZnRlciB3
        ZSBlbnF1ZXVlZCBhIHJlLXJlbmRlciBjYWxsLgogICAgICBpZiAoIXNlbGYu
        ZGVzdHJveWVkKSB7CiAgICAgICAgc2VsZi5jb250YWluaW5nVmlldy5yZXJl
        bmRlcigpOwogICAgICB9CiAgICB9KTsKICB9LAoKICBkZXN0cm95OiBmdW5j
        dGlvbigpIHsKICAgIHRoaXMucmVtb3ZlQ29udGVudE9ic2VydmVycygpOwog
        ICAgaWYgKHRoaXMuY29udGVudCkgewogICAgICB0aGlzLnJlbW92ZUFycmF5
        T2JzZXJ2ZXJzKCk7CiAgICB9CiAgICB0aGlzLmRlc3Ryb3llZCA9IHRydWU7
        CiAgfQp9OwoKLyoqCiAgVGhlIGB7eyNlYWNofX1gIGhlbHBlciBsb29wcyBv
        dmVyIGVsZW1lbnRzIGluIGEgY29sbGVjdGlvbiwgcmVuZGVyaW5nIGl0cwog
        IGJsb2NrIG9uY2UgZm9yIGVhY2ggaXRlbS4gSXQgaXMgYW4gZXh0ZW5zaW9u
        IG9mIHRoZSBiYXNlIEhhbmRsZWJhcnMgYHt7I2VhY2h9fWAKICBoZWxwZXI6
        CgogIGBgYGphdmFzY3JpcHQKICBEZXZlbG9wZXJzID0gW3tuYW1lOiAnWWVo
        dWRhJ30se25hbWU6ICdUb20nfSwge25hbWU6ICdQYXVsJ31dOwogIGBgYAoK
        ICBgYGBoYW5kbGViYXJzCiAge3sjZWFjaCBEZXZlbG9wZXJzfX0KICAgIHt7
        bmFtZX19CiAge3svZWFjaH19CiAgYGBgCgogIGB7e2VhY2h9fWAgc3VwcG9y
        dHMgYW4gYWx0ZXJuYXRpdmUgc3ludGF4IHdpdGggZWxlbWVudCBuYW1pbmc6
        CgogIGBgYGhhbmRsZWJhcnMKICB7eyNlYWNoIHBlcnNvbiBpbiBEZXZlbG9w
        ZXJzfX0KICAgIHt7cGVyc29uLm5hbWV9fQogIHt7L2VhY2h9fQogIGBgYAoK
        ICBXaGVuIGxvb3Bpbmcgb3ZlciBvYmplY3RzIHRoYXQgZG8gbm90IGhhdmUg
        cHJvcGVydGllcywgYHt7dGhpc319YCBjYW4gYmUgdXNlZAogIHRvIHJlbmRl
        ciB0aGUgb2JqZWN0OgoKICBgYGBqYXZhc2NyaXB0CiAgRGV2ZWxvcGVyTmFt
        ZXMgPSBbJ1llaHVkYScsICdUb20nLCAnUGF1bCddCiAgYGBgCgogIGBgYGhh
        bmRsZWJhcnMKICB7eyNlYWNoIERldmVsb3Blck5hbWVzfX0KICAgIHt7dGhp
        c319CiAge3svZWFjaH19CiAgYGBgCiAgIyMjIHt7ZWxzZX19IGNvbmRpdGlv
        bgogIGB7eyNlYWNofX1gIGNhbiBoYXZlIGEgbWF0Y2hpbmcgYHt7ZWxzZX19
        YC4gVGhlIGNvbnRlbnRzIG9mIHRoaXMgYmxvY2sgd2lsbCByZW5kZXIKICBp
        ZiB0aGUgY29sbGVjdGlvbiBpcyBlbXB0eS4KCiAgYGBgCiAge3sjZWFjaCBw
        ZXJzb24gaW4gRGV2ZWxvcGVyc319CiAgICB7e3BlcnNvbi5uYW1lfX0KICB7
        e2Vsc2V9fQogICAgPHA+U29ycnksIG5vYm9keSBpcyBhdmFpbGFibGUgZm9y
        IHRoaXMgdGFzay48L3A+CiAge3svZWFjaH19CiAgYGBgCiAgIyMjIFNwZWNp
        ZnlpbmcgYSBWaWV3IGNsYXNzIGZvciBpdGVtcwogIElmIHlvdSBwcm92aWRl
        IGFuIGBpdGVtVmlld0NsYXNzYCBvcHRpb24gdGhhdCByZWZlcmVuY2VzIGEg
        dmlldyBjbGFzcwogIHdpdGggaXRzIG93biBgdGVtcGxhdGVgIHlvdSBjYW4g
        b21pdCB0aGUgYmxvY2suCgogIFRoZSBmb2xsb3dpbmcgdGVtcGxhdGU6Cgog
        IGBgYGhhbmRsZWJhcnMKICB7eyN2aWV3IEFwcC5NeVZpZXcgfX0KICAgIHt7
        ZWFjaCB2aWV3Lml0ZW1zIGl0ZW1WaWV3Q2xhc3M9IkFwcC5Bbkl0ZW1WaWV3
        In19CiAge3svdmlld319CiAgYGBgCgogIEFuZCBhcHBsaWNhdGlvbiBjb2Rl
        CgogIGBgYGphdmFzY3JpcHQKICBBcHAgPSBFbWJlci5BcHBsaWNhdGlvbi5j
        cmVhdGUoewogICAgTXlWaWV3OiBFbWJlci5WaWV3LmV4dGVuZCh7CiAgICAg
        IGl0ZW1zOiBbCiAgICAgICAgRW1iZXIuT2JqZWN0LmNyZWF0ZSh7bmFtZTog
        J0RhdmUnfSksCiAgICAgICAgRW1iZXIuT2JqZWN0LmNyZWF0ZSh7bmFtZTog
        J01hcnknfSksCiAgICAgICAgRW1iZXIuT2JqZWN0LmNyZWF0ZSh7bmFtZTog
        J1NhcmEnfSkKICAgICAgXQogICAgfSkKICB9KTsKCiAgQXBwLkFuSXRlbVZp
        ZXcgPSBFbWJlci5WaWV3LmV4dGVuZCh7CiAgICB0ZW1wbGF0ZTogRW1iZXIu
        SGFuZGxlYmFycy5jb21waWxlKCJHcmVldGluZ3Mge3tuYW1lfX0iKQogIH0p
        OwogIGBgYAoKICBXaWxsIHJlc3VsdCBpbiB0aGUgSFRNTCBzdHJ1Y3R1cmUg
        YmVsb3cKCiAgYGBgaHRtbAogIDxkaXYgY2xhc3M9ImVtYmVyLXZpZXciPgog
        ICAgPGRpdiBjbGFzcz0iZW1iZXItdmlldyI+R3JlZXRpbmdzIERhdmU8L2Rp
        dj4KICAgIDxkaXYgY2xhc3M9ImVtYmVyLXZpZXciPkdyZWV0aW5ncyBNYXJ5
        PC9kaXY+CiAgICA8ZGl2IGNsYXNzPSJlbWJlci12aWV3Ij5HcmVldGluZ3Mg
        U2FyYTwvZGl2PgogIDwvZGl2PgogIGBgYAoKICBJZiBhbiBgaXRlbVZpZXdD
        bGFzc2AgaXMgZGVmaW5lZCBvbiB0aGUgaGVscGVyLCBhbmQgdGhlcmVmb3Jl
        IHRoZSBoZWxwZXIgaXMgbm90CiAgYmVpbmcgdXNlZCBhcyBhIGJsb2NrLCBh
        biBgZW1wdHlWaWV3Q2xhc3NgIGNhbiBhbHNvIGJlIHByb3ZpZGVkIG9wdGlv
        bmFsbHkuCiAgVGhlIGBlbXB0eVZpZXdDbGFzc2Agd2lsbCBtYXRjaCB0aGUg
        YmVoYXZpb3Igb2YgdGhlIGB7e2Vsc2V9fWAgY29uZGl0aW9uCiAgZGVzY3Jp
        YmVkIGFib3ZlLiBUaGF0IGlzLCB0aGUgYGVtcHR5Vmlld0NsYXNzYCB3aWxs
        IHJlbmRlciBpZiB0aGUgY29sbGVjdGlvbgogIGlzIGVtcHR5LgoKICAjIyMg
        UmVwcmVzZW50aW5nIGVhY2ggaXRlbSB3aXRoIGEgQ29udHJvbGxlci4KICBC
        eSBkZWZhdWx0IHRoZSBjb250cm9sbGVyIGxvb2t1cCB3aXRoaW4gYW4gYHt7
        I2VhY2h9fWAgYmxvY2sgd2lsbCBiZQogIHRoZSBjb250cm9sbGVyIG9mIHRo
        ZSB0ZW1wbGF0ZSB3aGVyZSB0aGUgYHt7I2VhY2h9fWAgd2FzIHVzZWQuIElm
        IGVhY2gKICBpdGVtIG5lZWRzIHRvIGJlIHByZXNlbnRlZCBieSBhIGN1c3Rv
        bSBjb250cm9sbGVyIHlvdSBjYW4gcHJvdmlkZSBhCiAgYGl0ZW1Db250cm9s
        bGVyYCBvcHRpb24gd2hpY2ggcmVmZXJlbmNlcyBhIGNvbnRyb2xsZXIgYnkg
        bG9va3VwIG5hbWUuCiAgRWFjaCBpdGVtIGluIHRoZSBsb29wIHdpbGwgYmUg
        d3JhcHBlZCBpbiBhbiBpbnN0YW5jZSBvZiB0aGlzIGNvbnRyb2xsZXIKICBh
        bmQgdGhlIGl0ZW0gaXRzZWxmIHdpbGwgYmUgc2V0IHRvIHRoZSBgY29udGVu
        dGAgcHJvcGVydHkgb2YgdGhhdCBjb250cm9sbGVyLgoKICBUaGlzIGlzIHVz
        ZWZ1bCBpbiBjYXNlcyB3aGVyZSBwcm9wZXJ0aWVzIG9mIG1vZGVsIG9iamVj
        dHMgbmVlZCB0cmFuc2Zvcm1hdGlvbgogIG9yIHN5bnRoZXNpcyBmb3IgZGlz
        cGxheToKCiAgYGBgamF2YXNjcmlwdAogIEFwcC5EZXZlbG9wZXJDb250cm9s
        bGVyID0gRW1iZXIuT2JqZWN0Q29udHJvbGxlci5leHRlbmQoewogICAgaXNB
        dmFpbGFibGVGb3JIaXJlOiBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuICF0
        aGlzLmdldCgnY29udGVudC5pc0VtcGxveWVkJykgJiYgdGhpcy5nZXQoJ2Nv
        bnRlbnQuaXNTZWVraW5nV29yaycpOwogICAgfS5wcm9wZXJ0eSgnaXNFbXBs
        b3llZCcsICdpc1NlZWtpbmdXb3JrJykKICB9KQogIGBgYAoKICBgYGBoYW5k
        bGViYXJzCiAge3sjZWFjaCBwZXJzb24gaW4gZGV2ZWxvcGVycyBpdGVtQ29u
        dHJvbGxlcj0iZGV2ZWxvcGVyIn19CiAgICB7e3BlcnNvbi5uYW1lfX0ge3sj
        aWYgcGVyc29uLmlzQXZhaWxhYmxlRm9ySGlyZX19SGlyZSBtZSF7ey9pZn19
        CiAge3svZWFjaH19CiAgYGBgCgogIEVhY2ggaXRlbUNvbnRyb2xsZXIgd2ls
        bCByZWNlaXZlIGEgcmVmZXJlbmNlIHRvIHRoZSBjdXJyZW50IGNvbnRyb2xs
        ZXIgYXMKICBhIGBwYXJlbnRDb250cm9sbGVyYCBwcm9wZXJ0eS4KCiAgIyMj
        IChFeHBlcmltZW50YWwpIEdyb3VwZWQgRWFjaAoKICBXaGVuIHVzZWQgaW4g
        Y29uanVuY3Rpb24gd2l0aCB0aGUgZXhwZXJpbWVudGFsIFtncm91cCBoZWxw
        ZXJdKGh0dHBzOi8vZ2l0aHViLmNvbS9lbWJlcmpzL2dyb3VwLWhlbHBlciks
        CiAgeW91IGNhbiBpbmZvcm0gSGFuZGxlYmFycyB0byByZS1yZW5kZXIgYW4g
        ZW50aXJlIGdyb3VwIG9mIGl0ZW1zIGluc3RlYWQgb2YKICByZS1yZW5kZXJp
        bmcgdGhlbSBvbmUgYXQgYSB0aW1lIChpbiB0aGUgZXZlbnQgdGhhdCB0aGV5
        IGFyZSBjaGFuZ2VkIGVuIG1hc3NlCiAgb3IgYW4gaXRlbSBpcyBhZGRlZC9y
        ZW1vdmVkKS4KCiAgYGBgaGFuZGxlYmFycwogIHt7I2dyb3VwfX0KICAgIHt7
        I2VhY2ggcGVvcGxlfX0KICAgICAge3tmaXJzdE5hbWV9fSB7e2xhc3ROYW1l
        fX0KICAgIHt7L2VhY2h9fQogIHt7L2dyb3VwfX0KICBgYGAKCiAgVGhpcyBj
        YW4gYmUgZmFzdGVyIHRoYW4gdGhlIG5vcm1hbCB3YXkgdGhhdCBIYW5kbGVi
        YXJzIHJlLXJlbmRlcnMgaXRlbXMKICBpbiBzb21lIGNhc2VzLgoKICBJZiBm
        b3Igc29tZSByZWFzb24geW91IGhhdmUgYSBncm91cCB3aXRoIG1vcmUgdGhh
        biBvbmUgYCNlYWNoYCwgeW91IGNhbiBtYWtlCiAgb25lIG9mIHRoZSBjb2xs
        ZWN0aW9ucyBiZSB1cGRhdGVkIGluIG5vcm1hbCAobm9uLWdyb3VwZWQpIGZh
        c2hpb24gYnkgc2V0dGluZwogIHRoZSBvcHRpb24gYGdyb3VwZWRSb3dzPXRy
        dWVgIChjb3VudGVyLWludHVpdGl2ZSwgSSBrbm93KS4KCiAgRm9yIGV4YW1w
        bGUsCgogIGBgYGhhbmRsZWJhcnMKICB7e2RlYWxlcnNoaXBOYW1lfX0KCiAg
        e3sjZ3JvdXB9fQogICAge3sjZWFjaCBkZWFsZXJzfX0KICAgICAge3tmaXJz
        dE5hbWV9fSB7e2xhc3ROYW1lfX0KICAgIHt7L2VhY2h9fQoKICAgIHt7I2Vh
        Y2ggY2FyIGluIGNhcnMgZ3JvdXBlZFJvd3M9dHJ1ZX19CiAgICAgIHt7Y2Fy
        Lm1ha2V9fSB7e2Nhci5tb2RlbH19IHt7Y2FyLmNvbG9yfX0KICAgIHt7L2Vh
        Y2h9fQogIHt7L2dyb3VwfX0KICBgYGAKICBBbnkgY2hhbmdlIHRvIGBkZWFs
        ZXJzaGlwTmFtZWAgb3IgdGhlIGBkZWFsZXJzYCBjb2xsZWN0aW9uIHdpbGwg
        Y2F1c2UgdGhlCiAgZW50aXJlIGdyb3VwIHRvIGJlIHJlLXJlbmRlcmVkLiBI
        b3dldmVyLCBjaGFuZ2VzIHRvIHRoZSBgY2Fyc2AgY29sbGVjdGlvbgogIHdp
        bGwgYmUgcmUtcmVuZGVyZWQgaW5kaXZpZHVhbGx5IChhcyBub3JtYWwpLgoK
        ICBOb3RlIHRoYXQgYGdyb3VwYCBiZWhhdmlvciBpcyBhbHNvIGRpc2FibGVk
        IGJ5IHNwZWNpZnlpbmcgYW4gYGl0ZW1WaWV3Q2xhc3NgLgoKICBAbWV0aG9k
        IGVhY2gKICBAZm9yIEVtYmVyLkhhbmRsZWJhcnMuaGVscGVycwogIEBwYXJh
        bSBbbmFtZV0ge1N0cmluZ30gbmFtZSBmb3IgaXRlbSAodXNlZCB3aXRoIGBp
        bmApCiAgQHBhcmFtIFtwYXRoXSB7U3RyaW5nfSBwYXRoCiAgQHBhcmFtIFtv
        cHRpb25zXSB7T2JqZWN0fSBIYW5kbGViYXJzIGtleS92YWx1ZSBwYWlycyBv
        ZiBvcHRpb25zCiAgQHBhcmFtIFtvcHRpb25zLml0ZW1WaWV3Q2xhc3NdIHtT
        dHJpbmd9IGEgcGF0aCB0byBhIHZpZXcgY2xhc3MgdXNlZCBmb3IgZWFjaCBp
        dGVtCiAgQHBhcmFtIFtvcHRpb25zLml0ZW1Db250cm9sbGVyXSB7U3RyaW5n
        fSBuYW1lIG9mIGEgY29udHJvbGxlciB0byBiZSBjcmVhdGVkIGZvciBlYWNo
        IGl0ZW0KICBAcGFyYW0gW29wdGlvbnMuZ3JvdXBlZFJvd3NdIHtib29sZWFu
        fSBlbmFibGUgbm9ybWFsIGl0ZW0tYnktaXRlbSByZW5kZXJpbmcgd2hlbiBp
        bnNpZGUgYSBgI2dyb3VwYCBoZWxwZXIKKi8KRW1iZXIuSGFuZGxlYmFycy5y
        ZWdpc3RlckhlbHBlcignZWFjaCcsIGZ1bmN0aW9uIGVhY2hIZWxwZXIocGF0
        aCwgb3B0aW9ucykgewogIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSA0KSB7
        CiAgICBFbWJlci5hc3NlcnQoIklmIHlvdSBwYXNzIG1vcmUgdGhhbiBvbmUg
        YXJndW1lbnQgdG8gdGhlIGVhY2ggaGVscGVyLCBpdCBtdXN0IGJlIGluIHRo
        ZSBmb3JtICNlYWNoIGZvbyBpbiBiYXIiLCBhcmd1bWVudHNbMV0gPT09ICJp
        biIpOwoKICAgIHZhciBrZXl3b3JkTmFtZSA9IGFyZ3VtZW50c1swXTsKCiAg
        ICBvcHRpb25zID0gYXJndW1lbnRzWzNdOwogICAgcGF0aCA9IGFyZ3VtZW50
        c1syXTsKICAgIGlmIChwYXRoID09PSAnJykgeyBwYXRoID0gInRoaXMiOyB9
        CgogICAgb3B0aW9ucy5oYXNoLmtleXdvcmQgPSBrZXl3b3JkTmFtZTsKICB9
        CgogIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAxKSB7CiAgICBvcHRpb25z
        ID0gcGF0aDsKICAgIHBhdGggPSAndGhpcyc7CiAgfQoKICBvcHRpb25zLmhh
        c2guZGF0YVNvdXJjZUJpbmRpbmcgPSBwYXRoOwogIC8vIFNldCB1cCBlbXB0
        eVZpZXcgYXMgYSBtZXRhbW9ycGggd2l0aCBubyB0YWcKICAvL29wdGlvbnMu
        aGFzaC5lbXB0eVZpZXdDbGFzcyA9IEVtYmVyLl9NZXRhbW9ycGhWaWV3OwoK
        ICBpZiAob3B0aW9ucy5kYXRhLmluc2lkZUdyb3VwICYmICFvcHRpb25zLmhh
        c2guZ3JvdXBlZFJvd3MgJiYgIW9wdGlvbnMuaGFzaC5pdGVtVmlld0NsYXNz
        KSB7CiAgICBuZXcgRW1iZXIuSGFuZGxlYmFycy5Hcm91cGVkRWFjaCh0aGlz
        LCBwYXRoLCBvcHRpb25zKS5yZW5kZXIoKTsKICB9IGVsc2UgewogICAgcmV0
        dXJuIEVtYmVyLkhhbmRsZWJhcnMuaGVscGVycy5jb2xsZWN0aW9uLmNhbGwo
        dGhpcywgJ0VtYmVyLkhhbmRsZWJhcnMuRWFjaFZpZXcnLCBvcHRpb25zKTsK
        ICB9Cn0pOwoKfSkoKTsKCgoKKGZ1bmN0aW9uKCkgewovKioKQG1vZHVsZSBl
        bWJlcgpAc3VibW9kdWxlIGVtYmVyLWhhbmRsZWJhcnMKKi8KCi8qKgogIGB0
        ZW1wbGF0ZWAgYWxsb3dzIHlvdSB0byByZW5kZXIgYSB0ZW1wbGF0ZSBmcm9t
        IGluc2lkZSBhbm90aGVyIHRlbXBsYXRlLgogIFRoaXMgYWxsb3dzIHlvdSB0
        byByZS11c2UgdGhlIHNhbWUgdGVtcGxhdGUgaW4gbXVsdGlwbGUgcGxhY2Vz
        LiBGb3IgZXhhbXBsZToKCiAgYGBgaHRtbAogIDxzY3JpcHQgdHlwZT0idGV4
        dC94LWhhbmRsZWJhcnMiIGRhdGEtdGVtcGxhdGUtbmFtZT0ibG9nZ2VkX2lu
        X3VzZXIiPgogICAge3sjd2l0aCBsb2dnZWRJblVzZXJ9fQogICAgICBMYXN0
        IExvZ2luOiB7e2xhc3RMb2dpbn19CiAgICAgIFVzZXIgSW5mbzoge3t0ZW1w
        bGF0ZSAidXNlcl9pbmZvIn19CiAgICB7ey93aXRofX0KICA8L3NjcmlwdD4K
        ICBgYGAKCiAgYGBgaHRtbAogIDxzY3JpcHQgdHlwZT0idGV4dC94LWhhbmRs
        ZWJhcnMiIGRhdGEtdGVtcGxhdGUtbmFtZT0idXNlcl9pbmZvIj4KICAgIE5h
        bWU6IDxlbT57e25hbWV9fTwvZW0+CiAgICBLYXJtYTogPGVtPnt7a2FybWF9
        fTwvZW0+CiAgPC9zY3JpcHQ+CiAgYGBgCgogIGBgYGhhbmRsZWJhcnMKICB7
        eyNpZiBpc1VzZXJ9fQogICAge3t0ZW1wbGF0ZSAidXNlcl9pbmZvIn19CiAg
        e3tlbHNlfX0KICAgIHt7dGVtcGxhdGUgInVubG9nZ2VkX3VzZXJfaW5mbyJ9
        fQogIHt7L2lmfX0KICBgYGAKCiAgVGhpcyBoZWxwZXIgbG9va3MgZm9yIHRl
        bXBsYXRlcyBpbiB0aGUgZ2xvYmFsIGBFbWJlci5URU1QTEFURVNgIGhhc2gu
        IElmIHlvdQogIGFkZCBgPHNjcmlwdD5gIHRhZ3MgdG8geW91ciBwYWdlIHdp
        dGggdGhlIGBkYXRhLXRlbXBsYXRlLW5hbWVgIGF0dHJpYnV0ZSBzZXQsCiAg
        dGhleSB3aWxsIGJlIGNvbXBpbGVkIGFuZCBwbGFjZWQgaW4gdGhpcyBoYXNo
        IGF1dG9tYXRpY2FsbHkuCgogIFlvdSBjYW4gYWxzbyBtYW51YWxseSByZWdp
        c3RlciB0ZW1wbGF0ZXMgYnkgYWRkaW5nIHRoZW0gdG8gdGhlIGhhc2g6Cgog
        IGBgYGphdmFzY3JpcHQKICBFbWJlci5URU1QTEFURVNbIm15X2Nvb2xfdGVt
        cGxhdGUiXSA9IEVtYmVyLkhhbmRsZWJhcnMuY29tcGlsZSgnPGI+e3t1c2Vy
        fX08L2I+Jyk7CiAgYGBgCgogIEBkZXByZWNhdGVkCiAgQG1ldGhvZCB0ZW1w
        bGF0ZQogIEBmb3IgRW1iZXIuSGFuZGxlYmFycy5oZWxwZXJzCiAgQHBhcmFt
        IHtTdHJpbmd9IHRlbXBsYXRlTmFtZSB0aGUgdGVtcGxhdGUgdG8gcmVuZGVy
        CiovCgpFbWJlci5IYW5kbGViYXJzLnJlZ2lzdGVySGVscGVyKCd0ZW1wbGF0
        ZScsIGZ1bmN0aW9uKG5hbWUsIG9wdGlvbnMpIHsKICBFbWJlci5kZXByZWNh
        dGUoIlRoZSBgdGVtcGxhdGVgIGhlbHBlciBoYXMgYmVlbiBkZXByZWNhdGVk
        IGluIGZhdm9yIG9mIHRoZSBgcGFydGlhbGAgaGVscGVyLiBQbGVhc2UgdXNl
        IGBwYXJ0aWFsYCBpbnN0ZWFkLCB3aGljaCB3aWxsIHdvcmsgdGhlIHNhbWUg
        d2F5LiIpOwogIHJldHVybiBFbWJlci5IYW5kbGViYXJzLmhlbHBlcnMucGFy
        dGlhbC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwp9KTsKCn0pKCk7CgoKCihm
        dW5jdGlvbigpIHsKLyoqCkBtb2R1bGUgZW1iZXIKQHN1Ym1vZHVsZSBlbWJl
        ci1oYW5kbGViYXJzCiovCgovKioKICBUaGUgYHBhcnRpYWxgIGhlbHBlciBy
        ZW5kZXJzIGFub3RoZXIgdGVtcGxhdGUgd2l0aG91dAogIGNoYW5naW5nIHRo
        ZSB0ZW1wbGF0ZSBjb250ZXh0OgoKICBgYGBoYW5kbGViYXJzCiAge3tmb299
        fQogIHt7cGFydGlhbCAibmF2In19CiAgYGBgCgogIFRoZSBhYm92ZSBleGFt
        cGxlIHRlbXBsYXRlIHdpbGwgcmVuZGVyIGEgdGVtcGxhdGUgbmFtZWQKICAi
        X25hdiIsIHdoaWNoIGhhcyB0aGUgc2FtZSBjb250ZXh0IGFzIHRoZSBwYXJl
        bnQgdGVtcGxhdGUKICBpdCdzIHJlbmRlcmVkIGludG8sIHNvIGlmIHRoZSAi
        X25hdiIgdGVtcGxhdGUgYWxzbyByZWZlcmVuY2VkCiAgYHt7Zm9vfX1gLCBp
        dCB3b3VsZCBwcmludCB0aGUgc2FtZSB0aGluZyBhcyB0aGUgYHt7Zm9vfX1g
        CiAgaW4gdGhlIGFib3ZlIGV4YW1wbGUuCgogIElmIGEgIl9uYXYiIHRlbXBs
        YXRlIGlzbid0IGZvdW5kLCB0aGUgYHBhcnRpYWxgIGhlbHBlciB3aWxsCiAg
        ZmFsbCBiYWNrIHRvIGEgdGVtcGxhdGUgbmFtZWQgIm5hdiIuCgogICMjIEJv
        dW5kIHRlbXBsYXRlIG5hbWVzCgogIFRoZSBwYXJhbWV0ZXIgc3VwcGxpZWQg
        dG8gYHBhcnRpYWxgIGNhbiBhbHNvIGJlIGEgcGF0aAogIHRvIGEgcHJvcGVy
        dHkgY29udGFpbmluZyBhIHRlbXBsYXRlIG5hbWUsIGUuZy46CgogIGBgYGhh
        bmRsZWJhcnMKICB7e3BhcnRpYWwgc29tZVRlbXBsYXRlTmFtZX19CiAgYGBg
        CgogIFRoZSBhYm92ZSBleGFtcGxlIHdpbGwgbG9vayB1cCB0aGUgdmFsdWUg
        b2YgYHNvbWVUZW1wbGF0ZU5hbWVgCiAgb24gdGhlIHRlbXBsYXRlIGNvbnRl
        eHQgKGUuZy4gYSBjb250cm9sbGVyKSBhbmQgdXNlIHRoYXQKICB2YWx1ZSBh
        cyB0aGUgbmFtZSBvZiB0aGUgdGVtcGxhdGUgdG8gcmVuZGVyLiBJZiB0aGUg
        cmVzb2x2ZWQKICB2YWx1ZSBpcyBmYWxzeSwgbm90aGluZyB3aWxsIGJlIHJl
        bmRlcmVkLiBJZiBgc29tZVRlbXBsYXRlTmFtZWAKICBjaGFuZ2VzLCB0aGUg
        cGFydGlhbCB3aWxsIGJlIHJlLXJlbmRlcmVkIHVzaW5nIHRoZSBuZXcgdGVt
        cGxhdGUKICBuYW1lLgoKICAjIyBTZXR0aW5nIHRoZSBwYXJ0aWFsJ3MgY29u
        dGV4dCB3aXRoIGB3aXRoYAoKICBUaGUgYHBhcnRpYWxgIGhlbHBlciBjYW4g
        YmUgdXNlZCBpbiBjb25qdW5jdGlvbiB3aXRoIHRoZSBgd2l0aGAKICBoZWxw
        ZXIgdG8gc2V0IGEgY29udGV4dCB0aGF0IHdpbGwgYmUgdXNlZCBieSB0aGUg
        cGFydGlhbDoKCiAgYGBgaGFuZGxlYmFycwogIHt7I3dpdGggY3VycmVudFVz
        ZXJ9fQogICAge3twYXJ0aWFsICJ1c2VyX2luZm8ifX0KICB7ey93aXRofX0K
        ICBgYGAKCiAgQG1ldGhvZCBwYXJ0aWFsCiAgQGZvciBFbWJlci5IYW5kbGVi
        YXJzLmhlbHBlcnMKICBAcGFyYW0ge1N0cmluZ30gcGFydGlhbE5hbWUgdGhl
        IG5hbWUgb2YgdGhlIHRlbXBsYXRlIHRvIHJlbmRlciBtaW51cyB0aGUgbGVh
        ZGluZyB1bmRlcnNjb3JlCiovCgpFbWJlci5IYW5kbGViYXJzLnJlZ2lzdGVy
        SGVscGVyKCdwYXJ0aWFsJywgZnVuY3Rpb24gcGFydGlhbEhlbHBlcihuYW1l
        LCBvcHRpb25zKSB7CgogIHZhciBjb250ZXh0ID0gKG9wdGlvbnMuY29udGV4
        dHMgJiYgb3B0aW9ucy5jb250ZXh0cy5sZW5ndGgpID8gb3B0aW9ucy5jb250
        ZXh0c1swXSA6IHRoaXM7CgogIGlmIChvcHRpb25zLnR5cGVzWzBdID09PSAi
        SUQiKSB7CiAgICAvLyBIZWxwZXIgd2FzIHBhc3NlZCBhIHByb3BlcnR5IHBh
        dGg7IHdlIG5lZWQgdG8KICAgIC8vIGNyZWF0ZSBhIGJpbmRpbmcgdGhhdCB3
        aWxsIHJlLXJlbmRlciB3aGVuZXZlcgogICAgLy8gdGhpcyBwcm9wZXJ0eSBj
        aGFuZ2VzLgogICAgb3B0aW9ucy5mbiA9IGZ1bmN0aW9uKGNvbnRleHQsIGZu
        T3B0aW9ucykgewogICAgICB2YXIgcGFydGlhbE5hbWUgPSBFbWJlci5IYW5k
        bGViYXJzLmdldChjb250ZXh0LCBuYW1lLCBmbk9wdGlvbnMpOwogICAgICBy
        ZW5kZXJQYXJ0aWFsKGNvbnRleHQsIHBhcnRpYWxOYW1lLCBmbk9wdGlvbnMp
        OwogICAgfTsKCiAgICByZXR1cm4gRW1iZXIuSGFuZGxlYmFycy5iaW5kLmNh
        bGwoY29udGV4dCwgbmFtZSwgb3B0aW9ucywgdHJ1ZSwgZXhpc3RzKTsKICB9
        IGVsc2UgewogICAgLy8gUmVuZGVyIHRoZSBwYXJ0aWFsIHJpZ2h0IGludG8g
        cGFyZW50IHRlbXBsYXRlLgogICAgcmVuZGVyUGFydGlhbChjb250ZXh0LCBu
        YW1lLCBvcHRpb25zKTsKICB9Cn0pOwoKZnVuY3Rpb24gZXhpc3RzKHZhbHVl
        KSB7CiAgcmV0dXJuICFFbWJlci5pc05vbmUodmFsdWUpOwp9CgpmdW5jdGlv
        biByZW5kZXJQYXJ0aWFsKGNvbnRleHQsIG5hbWUsIG9wdGlvbnMpIHsKICB2
        YXIgbmFtZVBhcnRzID0gbmFtZS5zcGxpdCgiLyIpLAogICAgICBsYXN0UGFy
        dCA9IG5hbWVQYXJ0c1tuYW1lUGFydHMubGVuZ3RoIC0gMV07CgogIG5hbWVQ
        YXJ0c1tuYW1lUGFydHMubGVuZ3RoIC0gMV0gPSAiXyIgKyBsYXN0UGFydDsK
        CiAgdmFyIHZpZXcgPSBvcHRpb25zLmRhdGEudmlldywKICAgICAgdW5kZXJz
        Y29yZWROYW1lID0gbmFtZVBhcnRzLmpvaW4oIi8iKSwKICAgICAgdGVtcGxh
        dGUgPSB2aWV3LnRlbXBsYXRlRm9yTmFtZSh1bmRlcnNjb3JlZE5hbWUpLAog
        ICAgICBkZXByZWNhdGVkVGVtcGxhdGUgPSAhdGVtcGxhdGUgJiYgdmlldy50
        ZW1wbGF0ZUZvck5hbWUobmFtZSk7CgogIEVtYmVyLmFzc2VydCgiVW5hYmxl
        IHRvIGZpbmQgcGFydGlhbCB3aXRoIG5hbWUgJyIrbmFtZSsiJy4iLCB0ZW1w
        bGF0ZSB8fCBkZXByZWNhdGVkVGVtcGxhdGUpOwoKICB0ZW1wbGF0ZSA9IHRl
        bXBsYXRlIHx8IGRlcHJlY2F0ZWRUZW1wbGF0ZTsKCiAgdGVtcGxhdGUoY29u
        dGV4dCwgeyBkYXRhOiBvcHRpb25zLmRhdGEgfSk7Cn0KCn0pKCk7CgoKCihm
        dW5jdGlvbigpIHsKLyoqCkBtb2R1bGUgZW1iZXIKQHN1Ym1vZHVsZSBlbWJl
        ci1oYW5kbGViYXJzCiovCgp2YXIgZ2V0ID0gRW1iZXIuZ2V0LCBzZXQgPSBF
        bWJlci5zZXQ7CgovKioKICBge3t5aWVsZH19YCBkZW5vdGVzIGFuIGFyZWEg
        b2YgYSB0ZW1wbGF0ZSB0aGF0IHdpbGwgYmUgcmVuZGVyZWQgaW5zaWRlCiAg
        b2YgYW5vdGhlciB0ZW1wbGF0ZS4gSXQgaGFzIHR3byBtYWluIHVzZXM6Cgog
        ICMjIyBVc2Ugd2l0aCBgbGF5b3V0YAogIFdoZW4gdXNlZCBpbiBhIEhhbmRs
        ZWJhcnMgdGVtcGxhdGUgdGhhdCBpcyBhc3NpZ25lZCB0byBhbiBgRW1iZXIu
        Vmlld2AKICBpbnN0YW5jZSdzIGBsYXlvdXRgIHByb3BlcnR5IEVtYmVyIHdp
        bGwgcmVuZGVyIHRoZSBsYXlvdXQgdGVtcGxhdGUgZmlyc3QsCiAgaW5zZXJ0
        aW5nIHRoZSB2aWV3J3Mgb3duIHJlbmRlcmVkIG91dHB1dCBhdCB0aGUgYHt7
        eWllbGR9fWAgbG9jYXRpb24uCgogIEFuIGVtcHR5IGA8Ym9keT5gIGFuZCB0
        aGUgZm9sbG93aW5nIGFwcGxpY2F0aW9uIGNvZGU6CgogIGBgYGphdmFzY3Jp
        cHQKICBBVmlldyA9IEVtYmVyLlZpZXcuZXh0ZW5kKHsKICAgIGNsYXNzTmFt
        ZXM6IFsnYS12aWV3LXdpdGgtbGF5b3V0J10sCiAgICBsYXlvdXQ6IEVtYmVy
        LkhhbmRsZWJhcnMuY29tcGlsZSgnPGRpdiBjbGFzcz0id3JhcHBlciI+e3t5
        aWVsZH19PC9kaXY+JyksCiAgICB0ZW1wbGF0ZTogRW1iZXIuSGFuZGxlYmFy
        cy5jb21waWxlKCc8c3Bhbj5JIGFtIHdyYXBwZWQ8L3NwYW4+JykKICB9KTsK
        CiAgYVZpZXcgPSBBVmlldy5jcmVhdGUoKTsKICBhVmlldy5hcHBlbmRUbygn
        Ym9keScpOwogIGBgYAoKICBXaWxsIHJlc3VsdCBpbiB0aGUgZm9sbG93aW5n
        IEhUTUwgb3V0cHV0OgoKICBgYGBodG1sCiAgPGJvZHk+CiAgICA8ZGl2IGNs
        YXNzPSdlbWJlci12aWV3IGEtdmlldy13aXRoLWxheW91dCc+CiAgICAgIDxk
        aXYgY2xhc3M9IndyYXBwZXIiPgogICAgICAgIDxzcGFuPkkgYW0gd3JhcHBl
        ZDwvc3Bhbj4KICAgICAgPC9kaXY+CiAgICA8L2Rpdj4KICA8L2JvZHk+CiAg
        YGBgCgogIFRoZSBgeWllbGRgIGhlbHBlciBjYW5ub3QgYmUgdXNlZCBvdXRz
        aWRlIG9mIGEgdGVtcGxhdGUgYXNzaWduZWQgdG8gYW4KICBgRW1iZXIuVmll
        d2AncyBgbGF5b3V0YCBwcm9wZXJ0eSBhbmQgd2lsbCB0aHJvdyBhbiBlcnJv
        ciBpZiBhdHRlbXB0ZWQuCgogIGBgYGphdmFzY3JpcHQKICBCVmlldyA9IEVt
        YmVyLlZpZXcuZXh0ZW5kKHsKICAgIGNsYXNzTmFtZXM6IFsnYS12aWV3LXdp
        dGgtbGF5b3V0J10sCiAgICB0ZW1wbGF0ZTogRW1iZXIuSGFuZGxlYmFycy5j
        b21waWxlKCd7e3lpZWxkfX0nKQogIH0pOwoKICBiVmlldyA9IEJWaWV3LmNy
        ZWF0ZSgpOwogIGJWaWV3LmFwcGVuZFRvKCdib2R5Jyk7CgogIC8vIHRocm93
        cwogIC8vIFVuY2F1Z2h0IEVycm9yOiBhc3NlcnRpb24gZmFpbGVkOgogIC8v
        IFlvdSBjYWxsZWQgeWllbGQgaW4gYSB0ZW1wbGF0ZSB0aGF0IHdhcyBub3Qg
        YSBsYXlvdXQKICBgYGAKCiAgIyMjIFVzZSB3aXRoIEVtYmVyLkNvbXBvbmVu
        dAogIFdoZW4gZGVzaWduaW5nIGNvbXBvbmVudHMgYHt7eWllbGR9fWAgaXMg
        dXNlZCB0byBkZW5vdGUgd2hlcmUsIGluc2lkZSB0aGUgY29tcG9uZW50J3MK
        ICB0ZW1wbGF0ZSwgYW4gb3B0aW9uYWwgYmxvY2sgcGFzc2VkIHRvIHRoZSBj
        b21wb25lbnQgc2hvdWxkIHJlbmRlcjoKCiAgYGBgaGFuZGxlYmFycwogIDwh
        LS0gYXBwbGljYXRpb24uaGJzIC0tPgogIHt7I2xhYmVsZWQtdGV4dGZpZWxk
        IHZhbHVlPXNvbWVQcm9wZXJ0eX19CiAgICBGaXJzdCBuYW1lOgogIHt7L2xh
        YmVsZWQtdGV4dGZpZWxkfX0KICBgYGAKCiAgYGBgaGFuZGxlYmFycwogIDwh
        LS0gY29tcG9uZW50cy9sYWJlbGVkLXRleHRmaWVsZC5oYnMgLS0+CiAgPGxh
        YmVsPgogICAge3t5aWVsZH19IHt7aW5wdXQgdmFsdWU9dmFsdWV9fQogIDwv
        bGFiZWw+CiAgYGBgCgogIFJlc3VsdDoKCiAgYGBgaHRtbAogIDxsYWJlbD4K
        ICAgIEZpcnN0IG5hbWU6IDxpbnB1dCB0eXBlPSJ0ZXh0IiAvPgogIDxsYWJl
        bD4KICBgYGAKCiAgQG1ldGhvZCB5aWVsZAogIEBmb3IgRW1iZXIuSGFuZGxl
        YmFycy5oZWxwZXJzCiAgQHBhcmFtIHtIYXNofSBvcHRpb25zCiAgQHJldHVy
        biB7U3RyaW5nfSBIVE1MIHN0cmluZwoqLwpFbWJlci5IYW5kbGViYXJzLnJl
        Z2lzdGVySGVscGVyKCd5aWVsZCcsIGZ1bmN0aW9uIHlpZWxkSGVscGVyKG9w
        dGlvbnMpIHsKICB2YXIgdmlldyA9IG9wdGlvbnMuZGF0YS52aWV3OwoKICB3
        aGlsZSAodmlldyAmJiAhZ2V0KHZpZXcsICdsYXlvdXQnKSkgewogICAgaWYg
        KHZpZXcuX2NvbnRleHRWaWV3KSB7CiAgICAgIHZpZXcgPSB2aWV3Ll9jb250
        ZXh0VmlldzsKICAgIH0gZWxzZSB7CiAgICAgIHZpZXcgPSBnZXQodmlldywg
        J3BhcmVudFZpZXcnKTsKICAgIH0KICB9CgogIEVtYmVyLmFzc2VydCgiWW91
        IGNhbGxlZCB5aWVsZCBpbiBhIHRlbXBsYXRlIHRoYXQgd2FzIG5vdCBhIGxh
        eW91dCIsICEhdmlldyk7CgogIHZpZXcuX3lpZWxkKHRoaXMsIG9wdGlvbnMp
        Owp9KTsKCn0pKCk7CgoKCihmdW5jdGlvbigpIHsKLyoqCkBtb2R1bGUgZW1i
        ZXIKQHN1Ym1vZHVsZSBlbWJlci1oYW5kbGViYXJzCiovCgovKioKICBgbG9j
        YCBsb29rcyB1cCB0aGUgc3RyaW5nIGluIHRoZSBsb2NhbGl6ZWQgc3RyaW5n
        cyBoYXNoLgogIFRoaXMgaXMgYSBjb252ZW5pZW50IHdheSB0byBsb2NhbGl6
        ZSB0ZXh0LiBGb3IgZXhhbXBsZToKCiAgYGBgaHRtbAogIDxzY3JpcHQgdHlw
        ZT0idGV4dC94LWhhbmRsZWJhcnMiIGRhdGEtdGVtcGxhdGUtbmFtZT0iaG9t
        ZSI+CiAgICB7e2xvYyAid2VsY29tZSJ9fQogIDwvc2NyaXB0PgogIGBgYAoK
        ICBUYWtlIG5vdGUgdGhhdCBgIndlbGNvbWUiYCBpcyBhIHN0cmluZyBhbmQg
        bm90IGFuIG9iamVjdAogIHJlZmVyZW5jZS4KCiAgQG1ldGhvZCBsb2MKICBA
        Zm9yIEVtYmVyLkhhbmRsZWJhcnMuaGVscGVycwogIEBwYXJhbSB7U3RyaW5n
        fSBzdHIgVGhlIHN0cmluZyB0byBmb3JtYXQKKi8KCkVtYmVyLkhhbmRsZWJh
        cnMucmVnaXN0ZXJIZWxwZXIoJ2xvYycsIGZ1bmN0aW9uIGxvY0hlbHBlcihz
        dHIpIHsKICByZXR1cm4gRW1iZXIuU3RyaW5nLmxvYyhzdHIpOwp9KTsKCn0p
        KCk7CgoKCihmdW5jdGlvbigpIHsKCn0pKCk7CgoKCihmdW5jdGlvbigpIHsK
        Cn0pKCk7CgoKCihmdW5jdGlvbigpIHsKLyoqCkBtb2R1bGUgZW1iZXIKQHN1
        Ym1vZHVsZSBlbWJlci1oYW5kbGViYXJzCiovCgp2YXIgc2V0ID0gRW1iZXIu
        c2V0LCBnZXQgPSBFbWJlci5nZXQ7CgovKioKICBUaGUgaW50ZXJuYWwgY2xh
        c3MgdXNlZCB0byBjcmVhdGUgdGV4dCBpbnB1dHMgd2hlbiB0aGUgYHt7aW5w
        dXR9fWAKICBoZWxwZXIgaXMgdXNlZCB3aXRoIGB0eXBlYCBvZiBgY2hlY2ti
        b3hgLgoKICBTZWUgW2hhbmRsZWJhcnMuaGVscGVycy5pbnB1dF0oL2FwaS9j
        bGFzc2VzL0VtYmVyLkhhbmRsZWJhcnMuaGVscGVycy5odG1sI21ldGhvZF9p
        bnB1dCkgIGZvciB1c2FnZSBkZXRhaWxzLgoKICAjIyBEaXJlY3QgbWFuaXB1
        bGF0aW9uIG9mIGBjaGVja2VkYAoKICBUaGUgYGNoZWNrZWRgIGF0dHJpYnV0
        ZSBvZiBhbiBgRW1iZXIuQ2hlY2tib3hgIG9iamVjdCBzaG91bGQgYWx3YXlz
        IGJlIHNldAogIHRocm91Z2ggdGhlIEVtYmVyIG9iamVjdCBvciBieSBpbnRl
        cmFjdGluZyB3aXRoIGl0cyByZW5kZXJlZCBlbGVtZW50CiAgcmVwcmVzZW50
        YXRpb24gdmlhIHRoZSBtb3VzZSwga2V5Ym9hcmQsIG9yIHRvdWNoLiBVcGRh
        dGluZyB0aGUgdmFsdWUgb2YgdGhlCiAgY2hlY2tib3ggdmlhIGpRdWVyeSB3
        aWxsIHJlc3VsdCBpbiB0aGUgY2hlY2tlZCB2YWx1ZSBvZiB0aGUgb2JqZWN0
        IGFuZCBpdHMKICBlbGVtZW50IGxvc2luZyBzeW5jaHJvbml6YXRpb24uCgog
        ICMjIExheW91dCBhbmQgTGF5b3V0TmFtZSBwcm9wZXJ0aWVzCgogIEJlY2F1
        c2UgSFRNTCBgaW5wdXRgIGVsZW1lbnRzIGFyZSBzZWxmIGNsb3NpbmcgYGxh
        eW91dGAgYW5kIGBsYXlvdXROYW1lYAogIHByb3BlcnRpZXMgd2lsbCBub3Qg
        YmUgYXBwbGllZC4gU2VlIFtFbWJlci5WaWV3XSgvYXBpL2NsYXNzZXMvRW1i
        ZXIuVmlldy5odG1sKSdzCiAgbGF5b3V0IHNlY3Rpb24gZm9yIG1vcmUgaW5m
        b3JtYXRpb24uCgogIEBjbGFzcyBDaGVja2JveAogIEBuYW1lc3BhY2UgRW1i
        ZXIKICBAZXh0ZW5kcyBFbWJlci5WaWV3CiovCkVtYmVyLkNoZWNrYm94ID0g
        RW1iZXIuVmlldy5leHRlbmQoewogIGNsYXNzTmFtZXM6IFsnZW1iZXItY2hl
        Y2tib3gnXSwKCiAgdGFnTmFtZTogJ2lucHV0JywKCiAgYXR0cmlidXRlQmlu
        ZGluZ3M6IFsndHlwZScsICdjaGVja2VkJywgJ2luZGV0ZXJtaW5hdGUnLCAn
        ZGlzYWJsZWQnLCAndGFiaW5kZXgnLCAnbmFtZScsCiAgICAgICAgICAgICAg
        ICAgICAgICAnYXV0b2ZvY3VzJywgJ2Zvcm0nXSwKCiAgdHlwZTogImNoZWNr
        Ym94IiwKICBjaGVja2VkOiBmYWxzZSwKICBkaXNhYmxlZDogZmFsc2UsCiAg
        aW5kZXRlcm1pbmF0ZTogZmFsc2UsCgogIGluaXQ6IGZ1bmN0aW9uKCkgewog
        ICAgdGhpcy5fc3VwZXIoKTsKICAgIHRoaXMub24oImNoYW5nZSIsIHRoaXMs
        IHRoaXMuX3VwZGF0ZUVsZW1lbnRWYWx1ZSk7CiAgfSwKCiAgZGlkSW5zZXJ0
        RWxlbWVudDogZnVuY3Rpb24oKSB7CiAgICB0aGlzLl9zdXBlcigpOwogICAg
        dGhpcy5nZXQoJ2VsZW1lbnQnKS5pbmRldGVybWluYXRlID0gISF0aGlzLmdl
        dCgnaW5kZXRlcm1pbmF0ZScpOwogIH0sCgogIF91cGRhdGVFbGVtZW50VmFs
        dWU6IGZ1bmN0aW9uKCkgewogICAgc2V0KHRoaXMsICdjaGVja2VkJywgdGhp
        cy4kKCkucHJvcCgnY2hlY2tlZCcpKTsKICB9Cn0pOwoKfSkoKTsKCgoKKGZ1
        bmN0aW9uKCkgewovKioKQG1vZHVsZSBlbWJlcgpAc3VibW9kdWxlIGVtYmVy
        LWhhbmRsZWJhcnMKKi8KCnZhciBnZXQgPSBFbWJlci5nZXQsIHNldCA9IEVt
        YmVyLnNldDsKCi8qKgogIFNoYXJlZCBtaXhpbiB1c2VkIGJ5IGBFbWJlci5U
        ZXh0RmllbGRgIGFuZCBgRW1iZXIuVGV4dEFyZWFgLgoKICBAY2xhc3MgVGV4
        dFN1cHBvcnQKICBAbmFtZXNwYWNlIEVtYmVyCiAgQHVzZXMgRW1iZXIuVGFy
        Z2V0QWN0aW9uU3VwcG9ydAogIEBleHRlbmRzIEVtYmVyLk1peGluCiAgQHBy
        aXZhdGUKKi8KRW1iZXIuVGV4dFN1cHBvcnQgPSBFbWJlci5NaXhpbi5jcmVh
        dGUoRW1iZXIuVGFyZ2V0QWN0aW9uU3VwcG9ydCwgewogIHZhbHVlOiAiIiwK
        CiAgYXR0cmlidXRlQmluZGluZ3M6IFsncGxhY2Vob2xkZXInLCAnZGlzYWJs
        ZWQnLCAnbWF4bGVuZ3RoJywgJ3RhYmluZGV4JywgJ3JlYWRvbmx5JywKICAg
        ICAgICAgICAgICAgICAgICAgICdhdXRvZm9jdXMnLCAnZm9ybScsICdzZWxl
        Y3Rpb25EaXJlY3Rpb24nLCAnc3BlbGxjaGVjaycsICdyZXF1aXJlZCddLAog
        IHBsYWNlaG9sZGVyOiBudWxsLAogIGRpc2FibGVkOiBmYWxzZSwKICBtYXhs
        ZW5ndGg6IG51bGwsCgogIGluaXQ6IGZ1bmN0aW9uKCkgewogICAgdGhpcy5f
        c3VwZXIoKTsKICAgIHRoaXMub24oImZvY3VzT3V0IiwgdGhpcywgdGhpcy5f
        ZWxlbWVudFZhbHVlRGlkQ2hhbmdlKTsKICAgIHRoaXMub24oImNoYW5nZSIs
        IHRoaXMsIHRoaXMuX2VsZW1lbnRWYWx1ZURpZENoYW5nZSk7CiAgICB0aGlz
        Lm9uKCJwYXN0ZSIsIHRoaXMsIHRoaXMuX2VsZW1lbnRWYWx1ZURpZENoYW5n
        ZSk7CiAgICB0aGlzLm9uKCJjdXQiLCB0aGlzLCB0aGlzLl9lbGVtZW50VmFs
        dWVEaWRDaGFuZ2UpOwogICAgdGhpcy5vbigiaW5wdXQiLCB0aGlzLCB0aGlz
        Ll9lbGVtZW50VmFsdWVEaWRDaGFuZ2UpOwogICAgdGhpcy5vbigia2V5VXAi
        LCB0aGlzLCB0aGlzLmludGVycHJldEtleUV2ZW50cyk7CiAgfSwKCiAgLyoq
        CiAgICBUaGUgYWN0aW9uIHRvIGJlIHNlbnQgd2hlbiB0aGUgdXNlciBwcmVz
        c2VzIHRoZSByZXR1cm4ga2V5LgoKICAgIFRoaXMgaXMgc2ltaWxhciB0byB0
        aGUgYHt7YWN0aW9ufX1gIGhlbHBlciwgYnV0IGlzIGZpcmVkIHdoZW4KICAg
        IHRoZSB1c2VyIHByZXNzZXMgdGhlIHJldHVybiBrZXkgd2hlbiBlZGl0aW5n
        IGEgdGV4dCBmaWVsZCwgYW5kIHNlbmRzCiAgICB0aGUgdmFsdWUgb2YgdGhl
        IGZpZWxkIGFzIHRoZSBjb250ZXh0LgoKICAgIEBwcm9wZXJ0eSBhY3Rpb24K
        ICAgIEB0eXBlIFN0cmluZwogICAgQGRlZmF1bHQgbnVsbAogICovCiAgYWN0
        aW9uOiBudWxsLAoKICAvKioKICAgIFRoZSBldmVudCB0aGF0IHNob3VsZCBz
        ZW5kIHRoZSBhY3Rpb24uCgogICAgT3B0aW9ucyBhcmU6CgogICAgKiBgZW50
        ZXJgOiB0aGUgdXNlciBwcmVzc2VkIGVudGVyCiAgICAqIGBrZXlQcmVzc2A6
        IHRoZSB1c2VyIHByZXNzZWQgYSBrZXkKCiAgICBAcHJvcGVydHkgb25FdmVu
        dAogICAgQHR5cGUgU3RyaW5nCiAgICBAZGVmYXVsdCBlbnRlcgogICovCiAg
        b25FdmVudDogJ2VudGVyJywKCiAgLyoqCiAgICBXaGV0aGVyIHRoZXkgYGtl
        eVVwYCBldmVudCB0aGF0IHRyaWdnZXJzIGFuIGBhY3Rpb25gIHRvIGJlIHNl
        bnQgY29udGludWVzCiAgICBwcm9wYWdhdGluZyB0byBvdGhlciB2aWV3cy4K
        CiAgICBCeSBkZWZhdWx0LCB3aGVuIHRoZSB1c2VyIHByZXNzZXMgdGhlIHJl
        dHVybiBrZXkgb24gdGhlaXIga2V5Ym9hcmQgYW5kCiAgICB0aGUgdGV4dCBm
        aWVsZCBoYXMgYW4gYGFjdGlvbmAgc2V0LCB0aGUgYWN0aW9uIHdpbGwgYmUg
        c2VudCB0byB0aGUgdmlldydzCiAgICBjb250cm9sbGVyIGFuZCB0aGUga2V5
        IGV2ZW50IHdpbGwgc3RvcCBwcm9wYWdhdGluZy4KCiAgICBJZiB5b3Ugd291
        bGQgbGlrZSBwYXJlbnQgdmlld3MgdG8gcmVjZWl2ZSB0aGUgYGtleVVwYCBl
        dmVudCBldmVuIGFmdGVyIGFuCiAgICBhY3Rpb24gaGFzIGJlZW4gZGlzcGF0
        Y2hlZCwgc2V0IGBidWJibGVzYCB0byB0cnVlLgoKICAgIEBwcm9wZXJ0eSBi
        dWJibGVzCiAgICBAdHlwZSBCb29sZWFuCiAgICBAZGVmYXVsdCBmYWxzZQog
        ICovCiAgYnViYmxlczogZmFsc2UsCgogIGludGVycHJldEtleUV2ZW50czog
        ZnVuY3Rpb24oZXZlbnQpIHsKICAgIHZhciBtYXAgPSBFbWJlci5UZXh0U3Vw
        cG9ydC5LRVlfRVZFTlRTOwogICAgdmFyIG1ldGhvZCA9IG1hcFtldmVudC5r
        ZXlDb2RlXTsKCiAgICB0aGlzLl9lbGVtZW50VmFsdWVEaWRDaGFuZ2UoKTsK
        ICAgIGlmIChtZXRob2QpIHsgcmV0dXJuIHRoaXNbbWV0aG9kXShldmVudCk7
        IH0KICB9LAoKICBfZWxlbWVudFZhbHVlRGlkQ2hhbmdlOiBmdW5jdGlvbigp
        IHsKICAgIHNldCh0aGlzLCAndmFsdWUnLCB0aGlzLiQoKS52YWwoKSk7CiAg
        fSwKCiAgLyoqCiAgICBUaGUgYWN0aW9uIHRvIGJlIHNlbnQgd2hlbiB0aGUg
        dXNlciBpbnNlcnRzIGEgbmV3IGxpbmUuCgogICAgQ2FsbGVkIGJ5IHRoZSBg
        RW1iZXIuVGV4dFN1cHBvcnRgIG1peGluIG9uIGtleVVwIGlmIGtleWNvZGUg
        bWF0Y2hlcyAxMy4KICAgIFVzZXMgc2VuZEFjdGlvbiB0byBzZW5kIHRoZSBg
        ZW50ZXJgIGFjdGlvbiB0byB0aGUgY29udHJvbGxlci4KCiAgICBAbWV0aG9k
        IGluc2VydE5ld2xpbmUKICAgIEBwYXJhbSB7RXZlbnR9IGV2ZW50CiAgKi8K
        ICBpbnNlcnROZXdsaW5lOiBmdW5jdGlvbihldmVudCkgewogICAgc2VuZEFj
        dGlvbignZW50ZXInLCB0aGlzLCBldmVudCk7CiAgICBzZW5kQWN0aW9uKCdp
        bnNlcnQtbmV3bGluZScsIHRoaXMsIGV2ZW50KTsKICB9LAoKICAvKioKICAg
        IENhbGxlZCB3aGVuIHRoZSB1c2VyIGhpdHMgZXNjYXBlLgoKICAgIENhbGxl
        ZCBieSB0aGUgYEVtYmVyLlRleHRTdXBwb3J0YCBtaXhpbiBvbiBrZXlVcCBp
        ZiBrZXljb2RlIG1hdGNoZXMgMjcuCiAgICBVc2VzIHNlbmRBY3Rpb24gdG8g
        c2VuZCB0aGUgYGVzY2FwZS1wcmVzc2AgYWN0aW9uIHRvIHRoZSBjb250cm9s
        bGVyLgoKICAgIEBtZXRob2QgY2FuY2VsCiAgICBAcGFyYW0ge0V2ZW50fSBl
        dmVudAogICovCiAgY2FuY2VsOiBmdW5jdGlvbihldmVudCkgewogICAgc2Vu
        ZEFjdGlvbignZXNjYXBlLXByZXNzJywgdGhpcywgZXZlbnQpOwogIH0sCgog
        IC8qKgogICAgQ2FsbGVkIHdoZW4gdGhlIHRleHQgYXJlYSBpcyBmb2N1c2Vk
        LgoKICAgIEBtZXRob2QgZm9jdXNJbgogICAgQHBhcmFtIHtFdmVudH0gZXZl
        bnQKICAqLwogIGZvY3VzSW46IGZ1bmN0aW9uKGV2ZW50KSB7CiAgICBzZW5k
        QWN0aW9uKCdmb2N1cy1pbicsIHRoaXMsIGV2ZW50KTsKICB9LAoKICAvKioK
        ICAgIENhbGxlZCB3aGVuIHRoZSB0ZXh0IGFyZWEgaXMgYmx1cnJlZC4KCiAg
        ICBAbWV0aG9kIGZvY3VzT3V0CiAgICBAcGFyYW0ge0V2ZW50fSBldmVudAog
        ICovCiAgZm9jdXNPdXQ6IGZ1bmN0aW9uKGV2ZW50KSB7CiAgICBzZW5kQWN0
        aW9uKCdmb2N1cy1vdXQnLCB0aGlzLCBldmVudCk7CiAgfSwKCiAgLyoqCiAg
        ICBUaGUgYWN0aW9uIHRvIGJlIHNlbnQgd2hlbiB0aGUgdXNlciBwcmVzc2Vz
        IGEga2V5LiBFbmFibGVkIGJ5IHNldHRpbmcKICAgIHRoZSBgb25FdmVudGAg
        cHJvcGVydHkgdG8gYGtleVByZXNzYC4KCiAgICBVc2VzIHNlbmRBY3Rpb24g
        dG8gc2VuZCB0aGUgYGtleVByZXNzYCBhY3Rpb24gdG8gdGhlIGNvbnRyb2xs
        ZXIuCgogICAgQG1ldGhvZCBrZXlQcmVzcwogICAgQHBhcmFtIHtFdmVudH0g
        ZXZlbnQKICAqLwogIGtleVByZXNzOiBmdW5jdGlvbihldmVudCkgewogICAg
        c2VuZEFjdGlvbigna2V5LXByZXNzJywgdGhpcywgZXZlbnQpOwogIH0KCn0p
        OwoKRW1iZXIuVGV4dFN1cHBvcnQuS0VZX0VWRU5UUyA9IHsKICAxMzogJ2lu
        c2VydE5ld2xpbmUnLAogIDI3OiAnY2FuY2VsJwp9OwoKLy8gSW4gcHJpbmNp
        cGxlLCB0aGlzIHNob3VsZG4ndCBiZSBuZWNlc3NhcnksIGJ1dCB0aGUgbGVn
        YWN5Ci8vIHNlY3Rpb25BY3Rpb24gc2VtYW50aWNzIGZvciBUZXh0RmllbGQg
        YXJlIGRpZmZlcmVudCBmcm9tCi8vIHRoZSBjb21wb25lbnQgc2VtYW50aWNz
        IHNvIHRoaXMgbWV0aG9kIG5vcm1hbGl6ZXMgdGhlbS4KZnVuY3Rpb24gc2Vu
        ZEFjdGlvbihldmVudE5hbWUsIHZpZXcsIGV2ZW50KSB7CiAgdmFyIGFjdGlv
        biA9IGdldCh2aWV3LCBldmVudE5hbWUpLAogICAgICBvbiA9IGdldCh2aWV3
        LCAnb25FdmVudCcpLAogICAgICB2YWx1ZSA9IGdldCh2aWV3LCAndmFsdWUn
        KTsKCiAgLy8gYmFjay1jb21wYXQgc3VwcG9ydCBmb3Iga2V5UHJlc3MgYXMg
        YW4gZXZlbnQgbmFtZSBldmVuIHRob3VnaAogIC8vIGl0J3MgYWxzbyBhIG1l
        dGhvZCBuYW1lIHRoYXQgY29uc3VtZXMgdGhlIGV2ZW50IChhbmQgdGhlcmVm
        b3JlCiAgLy8gaW5jb21wYXRpYmxlIHdpdGggc2VuZEFjdGlvbiBzZW1hbnRp
        Y3MpLgogIGlmIChvbiA9PT0gZXZlbnROYW1lIHx8IChvbiA9PT0gJ2tleVBy
        ZXNzJyAmJiBldmVudE5hbWUgPT09ICdrZXktcHJlc3MnKSkgewogICAgdmll
        dy5zZW5kQWN0aW9uKCdhY3Rpb24nLCB2YWx1ZSk7CiAgfQoKICB2aWV3LnNl
        bmRBY3Rpb24oZXZlbnROYW1lLCB2YWx1ZSk7CgogIGlmIChhY3Rpb24gfHwg
        b24gPT09IGV2ZW50TmFtZSkgewogICAgaWYoIWdldCh2aWV3LCAnYnViYmxl
        cycpKSB7CiAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpOwogICAgfQog
        IH0KfQoKfSkoKTsKCgoKKGZ1bmN0aW9uKCkgewovKioKQG1vZHVsZSBlbWJl
        cgpAc3VibW9kdWxlIGVtYmVyLWhhbmRsZWJhcnMKKi8KCnZhciBnZXQgPSBF
        bWJlci5nZXQsIHNldCA9IEVtYmVyLnNldDsKCi8qKgoKICBUaGUgaW50ZXJu
        YWwgY2xhc3MgdXNlZCB0byBjcmVhdGUgdGV4dCBpbnB1dHMgd2hlbiB0aGUg
        YHt7aW5wdXR9fWAKICBoZWxwZXIgaXMgdXNlZCB3aXRoIGB0eXBlYCBvZiBg
        dGV4dGAuCgogIFNlZSBbSGFuZGxlYmFycy5oZWxwZXJzLmlucHV0XSgvYXBp
        L2NsYXNzZXMvRW1iZXIuSGFuZGxlYmFycy5oZWxwZXJzLmh0bWwjbWV0aG9k
        X2lucHV0KSAgZm9yIHVzYWdlIGRldGFpbHMuCgogICMjIExheW91dCBhbmQg
        TGF5b3V0TmFtZSBwcm9wZXJ0aWVzCgogIEJlY2F1c2UgSFRNTCBgaW5wdXRg
        IGVsZW1lbnRzIGFyZSBzZWxmIGNsb3NpbmcgYGxheW91dGAgYW5kIGBsYXlv
        dXROYW1lYAogIHByb3BlcnRpZXMgd2lsbCBub3QgYmUgYXBwbGllZC4gU2Vl
        IFtFbWJlci5WaWV3XSgvYXBpL2NsYXNzZXMvRW1iZXIuVmlldy5odG1sKSdz
        CiAgbGF5b3V0IHNlY3Rpb24gZm9yIG1vcmUgaW5mb3JtYXRpb24uCgogIEBj
        bGFzcyBUZXh0RmllbGQKICBAbmFtZXNwYWNlIEVtYmVyCiAgQGV4dGVuZHMg
        RW1iZXIuQ29tcG9uZW50CiAgQHVzZXMgRW1iZXIuVGV4dFN1cHBvcnQKKi8K
        RW1iZXIuVGV4dEZpZWxkID0gRW1iZXIuQ29tcG9uZW50LmV4dGVuZChFbWJl
        ci5UZXh0U3VwcG9ydCwgewoKICBjbGFzc05hbWVzOiBbJ2VtYmVyLXRleHQt
        ZmllbGQnXSwKICB0YWdOYW1lOiAiaW5wdXQiLAogIGF0dHJpYnV0ZUJpbmRp
        bmdzOiBbJ3R5cGUnLCAndmFsdWUnLCAnc2l6ZScsICdwYXR0ZXJuJywgJ25h
        bWUnLCAnbWluJywgJ21heCcsCiAgICAgICAgICAgICAgICAgICAgICAnYWNj
        ZXB0JywgJ2F1dG9jb21wbGV0ZScsICdhdXRvc2F2ZScsICdmb3JtYWN0aW9u
        JywKICAgICAgICAgICAgICAgICAgICAgICdmb3JtZW5jdHlwZScsICdmb3Jt
        bWV0aG9kJywgJ2Zvcm1ub3ZhbGlkYXRlJywgJ2Zvcm10YXJnZXQnLAogICAg
        ICAgICAgICAgICAgICAgICAgJ2hlaWdodCcsICdpbnB1dG1vZGUnLCAnbGlz
        dCcsICdtdWx0aXBsZScsICdwYXR0ZXJuJywgJ3N0ZXAnLAogICAgICAgICAg
        ICAgICAgICAgICAgJ3dpZHRoJ10sCgogIC8qKgogICAgVGhlIGB2YWx1ZWAg
        YXR0cmlidXRlIG9mIHRoZSBpbnB1dCBlbGVtZW50LiBBcyB0aGUgdXNlciBp
        bnB1dHMgdGV4dCwgdGhpcwogICAgcHJvcGVydHkgaXMgdXBkYXRlZCBsaXZl
        LgoKICAgIEBwcm9wZXJ0eSB2YWx1ZQogICAgQHR5cGUgU3RyaW5nCiAgICBA
        ZGVmYXVsdCAiIgogICovCiAgdmFsdWU6ICIiLAoKICAvKioKICAgIFRoZSBg
        dHlwZWAgYXR0cmlidXRlIG9mIHRoZSBpbnB1dCBlbGVtZW50LgoKICAgIEBw
        cm9wZXJ0eSB0eXBlCiAgICBAdHlwZSBTdHJpbmcKICAgIEBkZWZhdWx0ICJ0
        ZXh0IgogICovCiAgdHlwZTogInRleHQiLAoKICAvKioKICAgIFRoZSBgc2l6
        ZWAgb2YgdGhlIHRleHQgZmllbGQgaW4gY2hhcmFjdGVycy4KCiAgICBAcHJv
        cGVydHkgc2l6ZQogICAgQHR5cGUgU3RyaW5nCiAgICBAZGVmYXVsdCBudWxs
        CiAgKi8KICBzaXplOiBudWxsLAoKICAvKioKICAgIFRoZSBgcGF0dGVybmAg
        YXR0cmlidXRlIG9mIGlucHV0IGVsZW1lbnQuCgogICAgQHByb3BlcnR5IHBh
        dHRlcm4KICAgIEB0eXBlIFN0cmluZwogICAgQGRlZmF1bHQgbnVsbAogICov
        CiAgcGF0dGVybjogbnVsbCwKCiAgLyoqCiAgICBUaGUgYG1pbmAgYXR0cmli
        dXRlIG9mIGlucHV0IGVsZW1lbnQgdXNlZCB3aXRoIGB0eXBlPSJudW1iZXIi
        YCBvciBgdHlwZT0icmFuZ2UiYC4KCiAgICBAcHJvcGVydHkgbWluIAogICAg
        QHR5cGUgU3RyaW5nCiAgICBAZGVmYXVsdCBudWxsCiAgKi8KICBtaW46IG51
        bGwsCgogIC8qKgogICAgVGhlIGBtYXhgIGF0dHJpYnV0ZSBvZiBpbnB1dCBl
        bGVtZW50IHVzZWQgd2l0aCBgdHlwZT0ibnVtYmVyImAgb3IgYHR5cGU9InJh
        bmdlImAuCgogICAgQHByb3BlcnR5IG1heCAKICAgIEB0eXBlIFN0cmluZwog
        ICAgQGRlZmF1bHQgbnVsbAogICovCiAgbWF4OiBudWxsCn0pOwoKfSkoKTsK
        CgoKKGZ1bmN0aW9uKCkgewovKioKQG1vZHVsZSBlbWJlcgpAc3VibW9kdWxl
        IGVtYmVyLWhhbmRsZWJhcnMKKi8KCnZhciBnZXQgPSBFbWJlci5nZXQsIHNl
        dCA9IEVtYmVyLnNldDsKCi8qKgogIFRoZSBpbnRlcm5hbCBjbGFzcyB1c2Vk
        IHRvIGNyZWF0ZSB0ZXh0YXJlYSBlbGVtZW50IHdoZW4gdGhlIGB7e3RleHRh
        cmVhfX1gCiAgaGVscGVyIGlzIHVzZWQuCgogIFNlZSBbaGFuZGxlYmFycy5o
        ZWxwZXJzLnRleHRhcmVhXSgvYXBpL2NsYXNzZXMvRW1iZXIuSGFuZGxlYmFy
        cy5oZWxwZXJzLmh0bWwjbWV0aG9kX3RleHRhcmVhKSAgZm9yIHVzYWdlIGRl
        dGFpbHMuCgogICMjIExheW91dCBhbmQgTGF5b3V0TmFtZSBwcm9wZXJ0aWVz
        CgogIEJlY2F1c2UgSFRNTCBgdGV4dGFyZWFgIGVsZW1lbnRzIGRvIG5vdCBj
        b250YWluIGlubmVyIEhUTUwgdGhlIGBsYXlvdXRgIGFuZAogIGBsYXlvdXRO
        YW1lYCBwcm9wZXJ0aWVzIHdpbGwgbm90IGJlIGFwcGxpZWQuIFNlZSBbRW1i
        ZXIuVmlld10oL2FwaS9jbGFzc2VzL0VtYmVyLlZpZXcuaHRtbCkncwogIGxh
        eW91dCBzZWN0aW9uIGZvciBtb3JlIGluZm9ybWF0aW9uLgoKICBAY2xhc3Mg
        VGV4dEFyZWEKICBAbmFtZXNwYWNlIEVtYmVyCiAgQGV4dGVuZHMgRW1iZXIu
        Q29tcG9uZW50CiAgQHVzZXMgRW1iZXIuVGV4dFN1cHBvcnQKKi8KRW1iZXIu
        VGV4dEFyZWEgPSBFbWJlci5Db21wb25lbnQuZXh0ZW5kKEVtYmVyLlRleHRT
        dXBwb3J0LCB7CiAgY2xhc3NOYW1lczogWydlbWJlci10ZXh0LWFyZWEnXSwK
        CiAgdGFnTmFtZTogInRleHRhcmVhIiwKICBhdHRyaWJ1dGVCaW5kaW5nczog
        Wydyb3dzJywgJ2NvbHMnLCAnbmFtZScsICdzZWxlY3Rpb25FbmQnLCAnc2Vs
        ZWN0aW9uU3RhcnQnLCAnd3JhcCddLAogIHJvd3M6IG51bGwsCiAgY29sczog
        bnVsbCwKCiAgX3VwZGF0ZUVsZW1lbnRWYWx1ZTogRW1iZXIub2JzZXJ2ZXIo
        J3ZhbHVlJywgZnVuY3Rpb24oKSB7CiAgICAvLyBXZSBkbyB0aGlzIGNoZWNr
        IHNvIGN1cnNvciBwb3NpdGlvbiBkb2Vzbid0IGdldCBhZmZlY3RlZCBpbiBJ
        RQogICAgdmFyIHZhbHVlID0gZ2V0KHRoaXMsICd2YWx1ZScpLAogICAgICAg
        ICRlbCA9IHRoaXMuJCgpOwogICAgaWYgKCRlbCAmJiB2YWx1ZSAhPT0gJGVs
        LnZhbCgpKSB7CiAgICAgICRlbC52YWwodmFsdWUpOwogICAgfQogIH0pLAoK
        ICBpbml0OiBmdW5jdGlvbigpIHsKICAgIHRoaXMuX3N1cGVyKCk7CiAgICB0
        aGlzLm9uKCJkaWRJbnNlcnRFbGVtZW50IiwgdGhpcywgdGhpcy5fdXBkYXRl
        RWxlbWVudFZhbHVlKTsKICB9Cgp9KTsKCn0pKCk7CgoKCihmdW5jdGlvbigp
        IHsKLypqc2hpbnQgZXFlcWVxOmZhbHNlICovCgovKioKQG1vZHVsZSBlbWJl
        cgpAc3VibW9kdWxlIGVtYmVyLWhhbmRsZWJhcnMKKi8KCnZhciBzZXQgPSBF
        bWJlci5zZXQsCiAgICBnZXQgPSBFbWJlci5nZXQsCiAgICBpbmRleE9mID0g
        RW1iZXIuRW51bWVyYWJsZVV0aWxzLmluZGV4T2YsCiAgICBpbmRleGVzT2Yg
        PSBFbWJlci5FbnVtZXJhYmxlVXRpbHMuaW5kZXhlc09mLAogICAgZm9yRWFj
        aCA9IEVtYmVyLkVudW1lcmFibGVVdGlscy5mb3JFYWNoLAogICAgcmVwbGFj
        ZSA9IEVtYmVyLkVudW1lcmFibGVVdGlscy5yZXBsYWNlLAogICAgaXNBcnJh
        eSA9IEVtYmVyLmlzQXJyYXksCiAgICBwcmVjb21waWxlVGVtcGxhdGUgPSBF
        bWJlci5IYW5kbGViYXJzLmNvbXBpbGU7CgpFbWJlci5TZWxlY3RPcHRpb24g
        PSBFbWJlci5WaWV3LmV4dGVuZCh7CiAgdGFnTmFtZTogJ29wdGlvbicsCiAg
        YXR0cmlidXRlQmluZGluZ3M6IFsndmFsdWUnLCAnc2VsZWN0ZWQnXSwKCiAg
        ZGVmYXVsdFRlbXBsYXRlOiBmdW5jdGlvbihjb250ZXh0LCBvcHRpb25zKSB7
        CiAgICBvcHRpb25zID0geyBkYXRhOiBvcHRpb25zLmRhdGEsIGhhc2g6IHt9
        IH07CiAgICBFbWJlci5IYW5kbGViYXJzLmhlbHBlcnMuYmluZC5jYWxsKGNv
        bnRleHQsICJ2aWV3LmxhYmVsIiwgb3B0aW9ucyk7CiAgfSwKCiAgaW5pdDog
        ZnVuY3Rpb24oKSB7CiAgICB0aGlzLmxhYmVsUGF0aERpZENoYW5nZSgpOwog
        ICAgdGhpcy52YWx1ZVBhdGhEaWRDaGFuZ2UoKTsKCiAgICB0aGlzLl9zdXBl
        cigpOwogIH0sCgogIHNlbGVjdGVkOiBFbWJlci5jb21wdXRlZChmdW5jdGlv
        bigpIHsKICAgIHZhciBjb250ZW50ID0gZ2V0KHRoaXMsICdjb250ZW50Jyks
        CiAgICAgICAgc2VsZWN0aW9uID0gZ2V0KHRoaXMsICdwYXJlbnRWaWV3LnNl
        bGVjdGlvbicpOwogICAgaWYgKGdldCh0aGlzLCAncGFyZW50Vmlldy5tdWx0
        aXBsZScpKSB7CiAgICAgIHJldHVybiBzZWxlY3Rpb24gJiYgaW5kZXhPZihz
        ZWxlY3Rpb24sIGNvbnRlbnQudmFsdWVPZigpKSA+IC0xOwogICAgfSBlbHNl
        IHsKICAgICAgLy8gUHJpbWl0aXZlcyBnZXQgcGFzc2VkIHRocm91Z2ggYmlu
        ZGluZ3MgYXMgb2JqZWN0cy4uLiBzaW5jZQogICAgICAvLyBgbmV3IE51bWJl
        cig0KSAhPT0gNGAsIHdlIHVzZSBgPT1gIGJlbG93CiAgICAgIHJldHVybiBj
        b250ZW50ID09IHNlbGVjdGlvbjsKICAgIH0KICB9KS5wcm9wZXJ0eSgnY29u
        dGVudCcsICdwYXJlbnRWaWV3LnNlbGVjdGlvbicpLAoKICBsYWJlbFBhdGhE
        aWRDaGFuZ2U6IEVtYmVyLm9ic2VydmVyKCdwYXJlbnRWaWV3Lm9wdGlvbkxh
        YmVsUGF0aCcsIGZ1bmN0aW9uKCkgewogICAgdmFyIGxhYmVsUGF0aCA9IGdl
        dCh0aGlzLCAncGFyZW50Vmlldy5vcHRpb25MYWJlbFBhdGgnKTsKCiAgICBp
        ZiAoIWxhYmVsUGF0aCkgeyByZXR1cm47IH0KCiAgICBFbWJlci5kZWZpbmVQ
        cm9wZXJ0eSh0aGlzLCAnbGFiZWwnLCBFbWJlci5jb21wdXRlZChmdW5jdGlv
        bigpIHsKICAgICAgcmV0dXJuIGdldCh0aGlzLCBsYWJlbFBhdGgpOwogICAg
        fSkucHJvcGVydHkobGFiZWxQYXRoKSk7CiAgfSksCgogIHZhbHVlUGF0aERp
        ZENoYW5nZTogRW1iZXIub2JzZXJ2ZXIoJ3BhcmVudFZpZXcub3B0aW9uVmFs
        dWVQYXRoJywgZnVuY3Rpb24oKSB7CiAgICB2YXIgdmFsdWVQYXRoID0gZ2V0
        KHRoaXMsICdwYXJlbnRWaWV3Lm9wdGlvblZhbHVlUGF0aCcpOwoKICAgIGlm
        ICghdmFsdWVQYXRoKSB7IHJldHVybjsgfQoKICAgIEVtYmVyLmRlZmluZVBy
        b3BlcnR5KHRoaXMsICd2YWx1ZScsIEVtYmVyLmNvbXB1dGVkKGZ1bmN0aW9u
        KCkgewogICAgICByZXR1cm4gZ2V0KHRoaXMsIHZhbHVlUGF0aCk7CiAgICB9
        KS5wcm9wZXJ0eSh2YWx1ZVBhdGgpKTsKICB9KQp9KTsKCkVtYmVyLlNlbGVj
        dE9wdGdyb3VwID0gRW1iZXIuQ29sbGVjdGlvblZpZXcuZXh0ZW5kKHsKICB0
        YWdOYW1lOiAnb3B0Z3JvdXAnLAogIGF0dHJpYnV0ZUJpbmRpbmdzOiBbJ2xh
        YmVsJ10sCgogIHNlbGVjdGlvbkJpbmRpbmc6ICdwYXJlbnRWaWV3LnNlbGVj
        dGlvbicsCiAgbXVsdGlwbGVCaW5kaW5nOiAncGFyZW50Vmlldy5tdWx0aXBs
        ZScsCiAgb3B0aW9uTGFiZWxQYXRoQmluZGluZzogJ3BhcmVudFZpZXcub3B0
        aW9uTGFiZWxQYXRoJywKICBvcHRpb25WYWx1ZVBhdGhCaW5kaW5nOiAncGFy
        ZW50Vmlldy5vcHRpb25WYWx1ZVBhdGgnLAoKICBpdGVtVmlld0NsYXNzQmlu
        ZGluZzogJ3BhcmVudFZpZXcub3B0aW9uVmlldycKfSk7CgovKioKICBUaGUg
        YEVtYmVyLlNlbGVjdGAgdmlldyBjbGFzcyByZW5kZXJzIGEKICBbc2VsZWN0
        XShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi9IVE1ML0VsZW1l
        bnQvc2VsZWN0KSBIVE1MIGVsZW1lbnQsCiAgYWxsb3dpbmcgdGhlIHVzZXIg
        dG8gY2hvb3NlIGZyb20gYSBsaXN0IG9mIG9wdGlvbnMuCgogIFRoZSB0ZXh0
        IGFuZCBgdmFsdWVgIHByb3BlcnR5IG9mIGVhY2ggYDxvcHRpb24+YCBlbGVt
        ZW50IHdpdGhpbiB0aGUKICBgPHNlbGVjdD5gIGVsZW1lbnQgYXJlIHBvcHVs
        YXRlZCBmcm9tIHRoZSBvYmplY3RzIGluIHRoZSBgRWxlbWVudC5TZWxlY3Rg
        J3MKICBgY29udGVudGAgcHJvcGVydHkuIFRoZSB1bmRlcmx5aW5nIGRhdGEg
        b2JqZWN0IG9mIHRoZSBzZWxlY3RlZCBgPG9wdGlvbj5gIGlzCiAgc3RvcmVk
        IGluIHRoZSBgRWxlbWVudC5TZWxlY3RgJ3MgYHZhbHVlYCBwcm9wZXJ0eS4K
        CiAgIyMgVGhlIENvbnRlbnQgUHJvcGVydHkgKGFycmF5IG9mIHN0cmluZ3Mp
        CgogIFRoZSBzaW1wbGVzdCB2ZXJzaW9uIG9mIGFuIGBFbWJlci5TZWxlY3Rg
        IHRha2VzIGFuIGFycmF5IG9mIHN0cmluZ3MgYXMgaXRzCiAgYGNvbnRlbnRg
        IHByb3BlcnR5LiBUaGUgc3RyaW5nIHdpbGwgYmUgdXNlZCBhcyBib3RoIHRo
        ZSBgdmFsdWVgIHByb3BlcnR5IGFuZAogIHRoZSBpbm5lciB0ZXh0IG9mIGVh
        Y2ggYDxvcHRpb24+YCBlbGVtZW50IGluc2lkZSB0aGUgcmVuZGVyZWQgYDxz
        ZWxlY3Q+YC4KCiAgRXhhbXBsZToKCiAgYGBgamF2YXNjcmlwdAogIEFwcC5B
        cHBsaWNhdGlvbkNvbnRyb2xsZXIgPSBFbWJlci5Db250cm9sbGVyLmV4dGVu
        ZCh7CiAgICBuYW1lczogWyJZZWh1ZGEiLCAiVG9tIl0KICB9KTsKICBgYGAK
        CiAgYGBgaGFuZGxlYmFycwogIHt7dmlldyBFbWJlci5TZWxlY3QgY29udGVu
        dD1uYW1lc319CiAgYGBgCgogIFdvdWxkIHJlc3VsdCBpbiB0aGUgZm9sbG93
        aW5nIEhUTUw6CgogIGBgYGh0bWwKICA8c2VsZWN0IGNsYXNzPSJlbWJlci1z
        ZWxlY3QiPgogICAgPG9wdGlvbiB2YWx1ZT0iWWVodWRhIj5ZZWh1ZGE8L29w
        dGlvbj4KICAgIDxvcHRpb24gdmFsdWU9IlRvbSI+VG9tPC9vcHRpb24+CiAg
        PC9zZWxlY3Q+CiAgYGBgCgogIFlvdSBjYW4gY29udHJvbCB3aGljaCBgPG9w
        dGlvbj5gIGlzIHNlbGVjdGVkIHRocm91Z2ggdGhlIGBFbWJlci5TZWxlY3Rg
        J3MKICBgdmFsdWVgIHByb3BlcnR5OgoKICBgYGBqYXZhc2NyaXB0CiAgQXBw
        LkFwcGxpY2F0aW9uQ29udHJvbGxlciA9IEVtYmVyLkNvbnRyb2xsZXIuZXh0
        ZW5kKHsKICAgIHNlbGVjdGVkTmFtZTogJ1RvbScsCiAgICBuYW1lczogWyJZ
        ZWh1ZGEiLCAiVG9tIl0KICB9KTsKICBgYGAKCiAgYGBgaGFuZGxlYmFycwog
        IHt7dmlldyBFbWJlci5TZWxlY3QKICAgICAgICAgY29udGVudD1uYW1lcwog
        ICAgICAgICB2YWx1ZT1zZWxlY3RlZE5hbWUKICB9fQogIGBgYAoKICBXb3Vs
        ZCByZXN1bHQgaW4gdGhlIGZvbGxvd2luZyBIVE1MIHdpdGggdGhlIGA8b3B0
        aW9uPmAgZm9yICdUb20nIHNlbGVjdGVkOgoKICBgYGBodG1sCiAgPHNlbGVj
        dCBjbGFzcz0iZW1iZXItc2VsZWN0Ij4KICAgIDxvcHRpb24gdmFsdWU9Illl
        aHVkYSI+WWVodWRhPC9vcHRpb24+CiAgICA8b3B0aW9uIHZhbHVlPSJUb20i
        IHNlbGVjdGVkPSJzZWxlY3RlZCI+VG9tPC9vcHRpb24+CiAgPC9zZWxlY3Q+
        CiAgYGBgCgogIEEgdXNlciBpbnRlcmFjdGluZyB3aXRoIHRoZSByZW5kZXJl
        ZCBgPHNlbGVjdD5gIHRvIGNob29zZSAiWWVodWRhIiB3b3VsZAogIHVwZGF0
        ZSB0aGUgdmFsdWUgb2YgYHNlbGVjdGVkTmFtZWAgdG8gIlllaHVkYSIuCgog
        ICMjIFRoZSBDb250ZW50IFByb3BlcnR5IChhcnJheSBvZiBPYmplY3RzKQoK
        ICBBbiBgRW1iZXIuU2VsZWN0YCBjYW4gYWxzbyB0YWtlIGFuIGFycmF5IG9m
        IEphdmFTY3JpcHQgb3IgRW1iZXIgb2JqZWN0cyBhcwogIGl0cyBgY29udGVu
        dGAgcHJvcGVydHkuCgogIFdoZW4gdXNpbmcgb2JqZWN0cyB5b3UgbmVlZCB0
        byB0ZWxsIHRoZSBgRW1iZXIuU2VsZWN0YCB3aGljaCBwcm9wZXJ0eSBzaG91
        bGQKICBiZSBhY2Nlc3NlZCBvbiBlYWNoIG9iamVjdCB0byBzdXBwbHkgdGhl
        IGB2YWx1ZWAgYXR0cmlidXRlIG9mIHRoZSBgPG9wdGlvbj5gCiAgYW5kIHdo
        aWNoIHByb3BlcnR5IHNob3VsZCBiZSB1c2VkIHRvIHN1cHBseSB0aGUgZWxl
        bWVudCB0ZXh0LgoKICBUaGUgYG9wdGlvblZhbHVlUGF0aGAgb3B0aW9uIGlz
        IHVzZWQgdG8gc3BlY2lmeSB0aGUgcGF0aCBvbiBlYWNoIG9iamVjdCB0bwog
        IHRoZSBkZXNpcmVkIHByb3BlcnR5IGZvciB0aGUgYHZhbHVlYCBhdHRyaWJ1
        dGUuIFRoZSBgb3B0aW9uTGFiZWxQYXRoYAogIHNwZWNpZmllcyB0aGUgcGF0
        aCBvbiBlYWNoIG9iamVjdCB0byB0aGUgZGVzaXJlZCBwcm9wZXJ0eSBmb3Ig
        dGhlCiAgZWxlbWVudCdzIHRleHQuIEJvdGggcGF0aHMgbXVzdCByZWZlcmVu
        Y2UgZWFjaCBvYmplY3QgaXRzZWxmIGFzIGBjb250ZW50YDoKCiAgYGBgamF2
        YXNjcmlwdAogIEFwcC5BcHBsaWNhdGlvbkNvbnRyb2xsZXIgPSBFbWJlci5D
        b250cm9sbGVyLmV4dGVuZCh7CiAgICBwcm9ncmFtbWVyczogWwogICAgICB7
        Zmlyc3ROYW1lOiAiWWVodWRhIiwgaWQ6IDF9LAogICAgICB7Zmlyc3ROYW1l
        OiAiVG9tIiwgICAgaWQ6IDJ9CiAgICBdCiAgfSk7CiAgYGBgCgogIGBgYGhh
        bmRsZWJhcnMKICB7e3ZpZXcgRW1iZXIuU2VsZWN0CiAgICAgICAgIGNvbnRl
        bnQ9cHJvZ3JhbW1lcnMKICAgICAgICAgb3B0aW9uVmFsdWVQYXRoPSJjb250
        ZW50LmlkIgogICAgICAgICBvcHRpb25MYWJlbFBhdGg9ImNvbnRlbnQuZmly
        c3ROYW1lIn19CiAgYGBgCgogIFdvdWxkIHJlc3VsdCBpbiB0aGUgZm9sbG93
        aW5nIEhUTUw6CgogIGBgYGh0bWwKICA8c2VsZWN0IGNsYXNzPSJlbWJlci1z
        ZWxlY3QiPgogICAgPG9wdGlvbiB2YWx1ZT0iMSI+WWVodWRhPC9vcHRpb24+
        CiAgICA8b3B0aW9uIHZhbHVlPSIyIj5Ub208L29wdGlvbj4KICA8L3NlbGVj
        dD4KICBgYGAKCiAgVGhlIGB2YWx1ZWAgYXR0cmlidXRlIG9mIHRoZSBzZWxl
        Y3RlZCBgPG9wdGlvbj5gIHdpdGhpbiBhbiBgRW1iZXIuU2VsZWN0YAogIGNh
        biBiZSBib3VuZCB0byBhIHByb3BlcnR5IG9uIGFub3RoZXIgb2JqZWN0OgoK
        ICBgYGBqYXZhc2NyaXB0CiAgQXBwLkFwcGxpY2F0aW9uQ29udHJvbGxlciA9
        IEVtYmVyLkNvbnRyb2xsZXIuZXh0ZW5kKHsKICAgIHByb2dyYW1tZXJzOiBb
        CiAgICAgIHtmaXJzdE5hbWU6ICJZZWh1ZGEiLCBpZDogMX0sCiAgICAgIHtm
        aXJzdE5hbWU6ICJUb20iLCAgICBpZDogMn0KICAgIF0sCiAgICBjdXJyZW50
        UHJvZ3JhbW1lcjogewogICAgICBpZDogMgogICAgfQogIH0pOwogIGBgYAoK
        ICBgYGBoYW5kbGViYXJzCiAge3t2aWV3IEVtYmVyLlNlbGVjdAogICAgICAg
        ICBjb250ZW50PXByb2dyYW1tZXJzCiAgICAgICAgIG9wdGlvblZhbHVlUGF0
        aD0iY29udGVudC5pZCIKICAgICAgICAgb3B0aW9uTGFiZWxQYXRoPSJjb250
        ZW50LmZpcnN0TmFtZSIKICAgICAgICAgdmFsdWU9Y3VycmVudFByb2dyYW1t
        ZXIuaWR9fQogIGBgYAoKICBXb3VsZCByZXN1bHQgaW4gdGhlIGZvbGxvd2lu
        ZyBIVE1MIHdpdGggYSBzZWxlY3RlZCBvcHRpb246CgogIGBgYGh0bWwKICA8
        c2VsZWN0IGNsYXNzPSJlbWJlci1zZWxlY3QiPgogICAgPG9wdGlvbiB2YWx1
        ZT0iMSI+WWVodWRhPC9vcHRpb24+CiAgICA8b3B0aW9uIHZhbHVlPSIyIiBz
        ZWxlY3RlZD0ic2VsZWN0ZWQiPlRvbTwvb3B0aW9uPgogIDwvc2VsZWN0Pgog
        IGBgYAoKICBJbnRlcmFjdGluZyB3aXRoIHRoZSByZW5kZXJlZCBlbGVtZW50
        IGJ5IHNlbGVjdGluZyB0aGUgZmlyc3Qgb3B0aW9uCiAgKCdZZWh1ZGEnKSB3
        aWxsIHVwZGF0ZSB0aGUgYGlkYCBvZiBgY3VycmVudFByb2dyYW1tZXJgCiAg
        dG8gbWF0Y2ggdGhlIGB2YWx1ZWAgcHJvcGVydHkgb2YgdGhlIG5ld2x5IHNl
        bGVjdGVkIGA8b3B0aW9uPmAuCgogIEFsdGVybmF0aXZlbHksIHlvdSBjYW4g
        Y29udHJvbCBzZWxlY3Rpb24gdGhyb3VnaCB0aGUgdW5kZXJseWluZyBvYmpl
        Y3RzCiAgdXNlZCB0byByZW5kZXIgZWFjaCBvYmplY3QgYnkgYmluZGluZyB0
        aGUgYHNlbGVjdGlvbmAgb3B0aW9uLiBXaGVuIHRoZSBzZWxlY3RlZAogIGA8
        b3B0aW9uPmAgaXMgY2hhbmdlZCwgdGhlIHByb3BlcnR5IHBhdGggcHJvdmlk
        ZWQgdG8gYHNlbGVjdGlvbmAKICB3aWxsIGJlIHVwZGF0ZWQgdG8gbWF0Y2gg
        dGhlIGNvbnRlbnQgb2JqZWN0IG9mIHRoZSByZW5kZXJlZCBgPG9wdGlvbj5g
        CiAgZWxlbWVudDoKCiAgYGBgamF2YXNjcmlwdAogIEFwcC5BcHBsaWNhdGlv
        bkNvbnRyb2xsZXIgPSBFbWJlci5Db250cm9sbGVyLmV4dGVuZCh7CiAgICBz
        ZWxlY3RlZFBlcnNvbjogbnVsbCwKICAgIHByb2dyYW1tZXJzOiBbCiAgICAg
        IHtmaXJzdE5hbWU6ICJZZWh1ZGEiLCBpZDogMX0sCiAgICAgIHtmaXJzdE5h
        bWU6ICJUb20iLCAgICBpZDogMn0KICAgIF0KICB9KTsKICBgYGAKCiAgYGBg
        aGFuZGxlYmFycwogIHt7dmlldyBFbWJlci5TZWxlY3QKICAgICAgICAgY29u
        dGVudD1wcm9ncmFtbWVycwogICAgICAgICBvcHRpb25WYWx1ZVBhdGg9ImNv
        bnRlbnQuaWQiCiAgICAgICAgIG9wdGlvbkxhYmVsUGF0aD0iY29udGVudC5m
        aXJzdE5hbWUiCiAgICAgICAgIHNlbGVjdGlvbj1zZWxlY3RlZFBlcnNvbn19
        CiAgYGBgCgogIFdvdWxkIHJlc3VsdCBpbiB0aGUgZm9sbG93aW5nIEhUTUwg
        d2l0aCBhIHNlbGVjdGVkIG9wdGlvbjoKCiAgYGBgaHRtbAogIDxzZWxlY3Qg
        Y2xhc3M9ImVtYmVyLXNlbGVjdCI+CiAgICA8b3B0aW9uIHZhbHVlPSIxIj5Z
        ZWh1ZGE8L29wdGlvbj4KICAgIDxvcHRpb24gdmFsdWU9IjIiIHNlbGVjdGVk
        PSJzZWxlY3RlZCI+VG9tPC9vcHRpb24+CiAgPC9zZWxlY3Q+CiAgYGBgCgog
        IEludGVyYWN0aW5nIHdpdGggdGhlIHJlbmRlcmVkIGVsZW1lbnQgYnkgc2Vs
        ZWN0aW5nIHRoZSBmaXJzdCBvcHRpb24KICAoJ1llaHVkYScpIHdpbGwgdXBk
        YXRlIHRoZSBgc2VsZWN0ZWRQZXJzb25gIHRvIG1hdGNoIHRoZSBvYmplY3Qg
        b2YKICB0aGUgbmV3bHkgc2VsZWN0ZWQgYDxvcHRpb24+YC4gSW4gdGhpcyBj
        YXNlIGl0IGlzIHRoZSBmaXJzdCBvYmplY3QKICBpbiB0aGUgYHByb2dyYW1t
        ZXJzYAoKICAjIyBTdXBwbHlpbmcgYSBQcm9tcHQKCiAgQSBgbnVsbGAgdmFs
        dWUgZm9yIHRoZSBgRW1iZXIuU2VsZWN0YCdzIGB2YWx1ZWAgb3IgYHNlbGVj
        dGlvbmAgcHJvcGVydHkKICByZXN1bHRzIGluIHRoZXJlIGJlaW5nIG5vIGA8
        b3B0aW9uPmAgd2l0aCBhIGBzZWxlY3RlZGAgYXR0cmlidXRlOgoKICBgYGBq
        YXZhc2NyaXB0CiAgQXBwLkFwcGxpY2F0aW9uQ29udHJvbGxlciA9IEVtYmVy
        LkNvbnRyb2xsZXIuZXh0ZW5kKHsKICAgIHNlbGVjdGVkUHJvZ3JhbW1lcjog
        bnVsbCwKICAgIHByb2dyYW1tZXJzOiBbCiAgICAgICJZZWh1ZGEiLAogICAg
        ICAiVG9tIgogICAgXQogIH0pOwogIGBgYAoKICBgYGAgaGFuZGxlYmFycwog
        IHt7dmlldyBFbWJlci5TZWxlY3QKICAgICAgICAgY29udGVudD1wcm9ncmFt
        bWVycwogICAgICAgICB2YWx1ZT1zZWxlY3RlZFByb2dyYW1tZXIKICB9fQog
        IGBgYAoKICBXb3VsZCByZXN1bHQgaW4gdGhlIGZvbGxvd2luZyBIVE1MOgoK
        ICBgYGBodG1sCiAgPHNlbGVjdCBjbGFzcz0iZW1iZXItc2VsZWN0Ij4KICAg
        IDxvcHRpb24gdmFsdWU9IlllaHVkYSI+WWVodWRhPC9vcHRpb24+CiAgICA8
        b3B0aW9uIHZhbHVlPSJUb20iPlRvbTwvb3B0aW9uPgogIDwvc2VsZWN0Pgog
        IGBgYAoKICBBbHRob3VnaCBgc2VsZWN0ZWRQcm9ncmFtbWVyYCBpcyBgbnVs
        bGAgYW5kIG5vIGA8b3B0aW9uPmAKICBoYXMgYSBgc2VsZWN0ZWRgIGF0dHJp
        YnV0ZSB0aGUgcmVuZGVyZWQgSFRNTCB3aWxsIGRpc3BsYXkgdGhlCiAgZmly
        c3QgaXRlbSBhcyB0aG91Z2ggaXQgd2VyZSBzZWxlY3RlZC4gWW91IGNhbiBz
        dXBwbHkgYSBzdHJpbmcKICB2YWx1ZSBmb3IgdGhlIGBFbWJlci5TZWxlY3Rg
        IHRvIGRpc3BsYXkgd2hlbiB0aGVyZSBpcyBubyBzZWxlY3Rpb24KICB3aXRo
        IHRoZSBgcHJvbXB0YCBvcHRpb246CgogIGBgYGphdmFzY3JpcHQKICBBcHAu
        QXBwbGljYXRpb25Db250cm9sbGVyID0gRW1iZXIuQ29udHJvbGxlci5leHRl
        bmQoewogICAgc2VsZWN0ZWRQcm9ncmFtbWVyOiBudWxsLAogICAgcHJvZ3Jh
        bW1lcnM6IFsKICAgICAgIlllaHVkYSIsCiAgICAgICJUb20iCiAgICBdCiAg
        fSk7CiAgYGBgCgogIGBgYGhhbmRsZWJhcnMKICB7e3ZpZXcgRW1iZXIuU2Vs
        ZWN0CiAgICAgICAgIGNvbnRlbnQ9cHJvZ3JhbW1lcnMKICAgICAgICAgdmFs
        dWU9c2VsZWN0ZWRQcm9ncmFtbWVyCiAgICAgICAgIHByb21wdD0iUGxlYXNl
        IHNlbGVjdCBhIG5hbWUiCiAgfX0KICBgYGAKCiAgV291bGQgcmVzdWx0IGlu
        IHRoZSBmb2xsb3dpbmcgSFRNTDoKCiAgYGBgaHRtbAogIDxzZWxlY3QgY2xh
        c3M9ImVtYmVyLXNlbGVjdCI+CiAgICA8b3B0aW9uPlBsZWFzZSBzZWxlY3Qg
        YSBuYW1lPC9vcHRpb24+CiAgICA8b3B0aW9uIHZhbHVlPSJZZWh1ZGEiPlll
        aHVkYTwvb3B0aW9uPgogICAgPG9wdGlvbiB2YWx1ZT0iVG9tIj5Ub208L29w
        dGlvbj4KICA8L3NlbGVjdD4KICBgYGAKCiAgQGNsYXNzIFNlbGVjdAogIEBu
        YW1lc3BhY2UgRW1iZXIKICBAZXh0ZW5kcyBFbWJlci5WaWV3CiovCkVtYmVy
        LlNlbGVjdCA9IEVtYmVyLlZpZXcuZXh0ZW5kKHsKICB0YWdOYW1lOiAnc2Vs
        ZWN0JywKICBjbGFzc05hbWVzOiBbJ2VtYmVyLXNlbGVjdCddLAogIGRlZmF1
        bHRUZW1wbGF0ZTogRW1iZXIuSGFuZGxlYmFycy50ZW1wbGF0ZShmdW5jdGlv
        biBhbm9ueW1vdXMoSGFuZGxlYmFycyxkZXB0aDAsaGVscGVycyxwYXJ0aWFs
        cyxkYXRhKSB7CnRoaXMuY29tcGlsZXJJbmZvID0gWzQsJz49IDEuMC4wJ107
        CmhlbHBlcnMgPSB0aGlzLm1lcmdlKGhlbHBlcnMsIEVtYmVyLkhhbmRsZWJh
        cnMuaGVscGVycyk7IGRhdGEgPSBkYXRhIHx8IHt9OwogIHZhciBidWZmZXIg
        PSAnJywgc3RhY2sxLCBlc2NhcGVFeHByZXNzaW9uPXRoaXMuZXNjYXBlRXhw
        cmVzc2lvbiwgc2VsZj10aGlzOwoKZnVuY3Rpb24gcHJvZ3JhbTEoZGVwdGgw
        LGRhdGEpIHsKICAKICB2YXIgYnVmZmVyID0gJycsIHN0YWNrMTsKICBkYXRh
        LmJ1ZmZlci5wdXNoKCI8b3B0aW9uIHZhbHVlPVwiXCI+Iik7CiAgc3RhY2sx
        ID0gaGVscGVycy5fdHJpYWdlTXVzdGFjaGUuY2FsbChkZXB0aDAsICJ2aWV3
        LnByb21wdCIsIHtoYXNoOnt9LGhhc2hUeXBlczp7fSxoYXNoQ29udGV4dHM6
        e30sY29udGV4dHM6W2RlcHRoMF0sdHlwZXM6WyJJRCJdLGRhdGE6ZGF0YX0p
        OwogIGlmKHN0YWNrMSB8fCBzdGFjazEgPT09IDApIHsgZGF0YS5idWZmZXIu
        cHVzaChzdGFjazEpOyB9CiAgZGF0YS5idWZmZXIucHVzaCgiPC9vcHRpb24+
        Iik7CiAgcmV0dXJuIGJ1ZmZlcjsKICB9CgpmdW5jdGlvbiBwcm9ncmFtMyhk
        ZXB0aDAsZGF0YSkgewogIAogIHZhciBzdGFjazE7CiAgc3RhY2sxID0gaGVs
        cGVycy5lYWNoLmNhbGwoZGVwdGgwLCAidmlldy5ncm91cGVkQ29udGVudCIs
        IHtoYXNoOnt9LGhhc2hUeXBlczp7fSxoYXNoQ29udGV4dHM6e30saW52ZXJz
        ZTpzZWxmLm5vb3AsZm46c2VsZi5wcm9ncmFtKDQsIHByb2dyYW00LCBkYXRh
        KSxjb250ZXh0czpbZGVwdGgwXSx0eXBlczpbIklEIl0sZGF0YTpkYXRhfSk7
        CiAgaWYoc3RhY2sxIHx8IHN0YWNrMSA9PT0gMCkgeyBkYXRhLmJ1ZmZlci5w
        dXNoKHN0YWNrMSk7IH0KICBlbHNlIHsgZGF0YS5idWZmZXIucHVzaCgnJyk7
        IH0KICB9CmZ1bmN0aW9uIHByb2dyYW00KGRlcHRoMCxkYXRhKSB7CiAgCiAg
        CiAgZGF0YS5idWZmZXIucHVzaChlc2NhcGVFeHByZXNzaW9uKGhlbHBlcnMu
        dmlldy5jYWxsKGRlcHRoMCwgInZpZXcuZ3JvdXBWaWV3Iiwge2hhc2g6ewog
        ICAgJ2NvbnRlbnQnOiAoImNvbnRlbnQiKSwKICAgICdsYWJlbCc6ICgibGFi
        ZWwiKQogIH0saGFzaFR5cGVzOnsnY29udGVudCc6ICJJRCIsJ2xhYmVsJzog
        IklEIn0saGFzaENvbnRleHRzOnsnY29udGVudCc6IGRlcHRoMCwnbGFiZWwn
        OiBkZXB0aDB9LGNvbnRleHRzOltkZXB0aDBdLHR5cGVzOlsiSUQiXSxkYXRh
        OmRhdGF9KSkpOwogIH0KCmZ1bmN0aW9uIHByb2dyYW02KGRlcHRoMCxkYXRh
        KSB7CiAgCiAgdmFyIHN0YWNrMTsKICBzdGFjazEgPSBoZWxwZXJzLmVhY2gu
        Y2FsbChkZXB0aDAsICJ2aWV3LmNvbnRlbnQiLCB7aGFzaDp7fSxoYXNoVHlw
        ZXM6e30saGFzaENvbnRleHRzOnt9LGludmVyc2U6c2VsZi5ub29wLGZuOnNl
        bGYucHJvZ3JhbSg3LCBwcm9ncmFtNywgZGF0YSksY29udGV4dHM6W2RlcHRo
        MF0sdHlwZXM6WyJJRCJdLGRhdGE6ZGF0YX0pOwogIGlmKHN0YWNrMSB8fCBz
        dGFjazEgPT09IDApIHsgZGF0YS5idWZmZXIucHVzaChzdGFjazEpOyB9CiAg
        ZWxzZSB7IGRhdGEuYnVmZmVyLnB1c2goJycpOyB9CiAgfQpmdW5jdGlvbiBw
        cm9ncmFtNyhkZXB0aDAsZGF0YSkgewogIAogIAogIGRhdGEuYnVmZmVyLnB1
        c2goZXNjYXBlRXhwcmVzc2lvbihoZWxwZXJzLnZpZXcuY2FsbChkZXB0aDAs
        ICJ2aWV3Lm9wdGlvblZpZXciLCB7aGFzaDp7CiAgICAnY29udGVudCc6ICgi
        IikKICB9LGhhc2hUeXBlczp7J2NvbnRlbnQnOiAiSUQifSxoYXNoQ29udGV4
        dHM6eydjb250ZW50JzogZGVwdGgwfSxjb250ZXh0czpbZGVwdGgwXSx0eXBl
        czpbIklEIl0sZGF0YTpkYXRhfSkpKTsKICB9CgogIHN0YWNrMSA9IGhlbHBl
        cnNbJ2lmJ10uY2FsbChkZXB0aDAsICJ2aWV3LnByb21wdCIsIHtoYXNoOnt9
        LGhhc2hUeXBlczp7fSxoYXNoQ29udGV4dHM6e30saW52ZXJzZTpzZWxmLm5v
        b3AsZm46c2VsZi5wcm9ncmFtKDEsIHByb2dyYW0xLCBkYXRhKSxjb250ZXh0
        czpbZGVwdGgwXSx0eXBlczpbIklEIl0sZGF0YTpkYXRhfSk7CiAgaWYoc3Rh
        Y2sxIHx8IHN0YWNrMSA9PT0gMCkgeyBkYXRhLmJ1ZmZlci5wdXNoKHN0YWNr
        MSk7IH0KICBzdGFjazEgPSBoZWxwZXJzWydpZiddLmNhbGwoZGVwdGgwLCAi
        dmlldy5vcHRpb25Hcm91cFBhdGgiLCB7aGFzaDp7fSxoYXNoVHlwZXM6e30s
        aGFzaENvbnRleHRzOnt9LGludmVyc2U6c2VsZi5wcm9ncmFtKDYsIHByb2dy
        YW02LCBkYXRhKSxmbjpzZWxmLnByb2dyYW0oMywgcHJvZ3JhbTMsIGRhdGEp
        LGNvbnRleHRzOltkZXB0aDBdLHR5cGVzOlsiSUQiXSxkYXRhOmRhdGF9KTsK
        ICBpZihzdGFjazEgfHwgc3RhY2sxID09PSAwKSB7IGRhdGEuYnVmZmVyLnB1
        c2goc3RhY2sxKTsgfQogIHJldHVybiBidWZmZXI7CiAgCn0pLAogIGF0dHJp
        YnV0ZUJpbmRpbmdzOiBbJ211bHRpcGxlJywgJ2Rpc2FibGVkJywgJ3RhYmlu
        ZGV4JywgJ25hbWUnLCAncmVxdWlyZWQnLCAnYXV0b2ZvY3VzJywKICAgICAg
        ICAgICAgICAgICAgICAgICdmb3JtJywgJ3NpemUnXSwKCiAgLyoqCiAgICBU
        aGUgYG11bHRpcGxlYCBhdHRyaWJ1dGUgb2YgdGhlIHNlbGVjdCBlbGVtZW50
        LiBJbmRpY2F0ZXMgd2hldGhlciBtdWx0aXBsZQogICAgb3B0aW9ucyBjYW4g
        YmUgc2VsZWN0ZWQuCgogICAgQHByb3BlcnR5IG11bHRpcGxlCiAgICBAdHlw
        ZSBCb29sZWFuCiAgICBAZGVmYXVsdCBmYWxzZQogICovCiAgbXVsdGlwbGU6
        IGZhbHNlLAoKICAvKioKICAgIFRoZSBgZGlzYWJsZWRgIGF0dHJpYnV0ZSBv
        ZiB0aGUgc2VsZWN0IGVsZW1lbnQuIEluZGljYXRlcyB3aGV0aGVyCiAgICB0
        aGUgZWxlbWVudCBpcyBkaXNhYmxlZCBmcm9tIGludGVyYWN0aW9ucy4KCiAg
        ICBAcHJvcGVydHkgZGlzYWJsZWQKICAgIEB0eXBlIEJvb2xlYW4KICAgIEBk
        ZWZhdWx0IGZhbHNlCiAgKi8KICBkaXNhYmxlZDogZmFsc2UsCgogIC8qKgog
        ICAgVGhlIGByZXF1aXJlZGAgYXR0cmlidXRlIG9mIHRoZSBzZWxlY3QgZWxl
        bWVudC4gSW5kaWNhdGVzIHdoZXRoZXIKICAgIGEgc2VsZWN0ZWQgb3B0aW9u
        IGlzIHJlcXVpcmVkIGZvciBmb3JtIHZhbGlkYXRpb24uCgogICAgQHByb3Bl
        cnR5IHJlcXVpcmVkCiAgICBAdHlwZSBCb29sZWFuCiAgICBAZGVmYXVsdCBm
        YWxzZQogICovCiAgcmVxdWlyZWQ6IGZhbHNlLAoKICAvKioKICAgIFRoZSBs
        aXN0IG9mIG9wdGlvbnMuCgogICAgSWYgYG9wdGlvbkxhYmVsUGF0aGAgYW5k
        IGBvcHRpb25WYWx1ZVBhdGhgIGFyZSBub3Qgb3ZlcnJpZGRlbiwgdGhpcyBz
        aG91bGQKICAgIGJlIGEgbGlzdCBvZiBzdHJpbmdzLCB3aGljaCB3aWxsIHNl
        cnZlIHNpbXVsdGFuZW91c2x5IGFzIGxhYmVscyBhbmQgdmFsdWVzLgoKICAg
        IE90aGVyd2lzZSwgdGhpcyBzaG91bGQgYmUgYSBsaXN0IG9mIG9iamVjdHMu
        IEZvciBpbnN0YW5jZToKCiAgICBgYGBqYXZhc2NyaXB0CiAgICBFbWJlci5T
        ZWxlY3QuY3JlYXRlKHsKICAgICAgY29udGVudDogRW1iZXIuQShbCiAgICAg
        ICAgICB7IGlkOiAxLCBmaXJzdE5hbWU6ICdZZWh1ZGEnIH0sCiAgICAgICAg
        ICB7IGlkOiAyLCBmaXJzdE5hbWU6ICdUb20nIH0KICAgICAgICBdKSwKICAg
        ICAgb3B0aW9uTGFiZWxQYXRoOiAnY29udGVudC5maXJzdE5hbWUnLAogICAg
        ICBvcHRpb25WYWx1ZVBhdGg6ICdjb250ZW50LmlkJwogICAgfSk7CiAgICBg
        YGAKCiAgICBAcHJvcGVydHkgY29udGVudAogICAgQHR5cGUgQXJyYXkKICAg
        IEBkZWZhdWx0IG51bGwKICAqLwogIGNvbnRlbnQ6IG51bGwsCgogIC8qKgog
        ICAgV2hlbiBgbXVsdGlwbGVgIGlzIGBmYWxzZWAsIHRoZSBlbGVtZW50IG9m
        IGBjb250ZW50YCB0aGF0IGlzIGN1cnJlbnRseQogICAgc2VsZWN0ZWQsIGlm
        IGFueS4KCiAgICBXaGVuIGBtdWx0aXBsZWAgaXMgYHRydWVgLCBhbiBhcnJh
        eSBvZiBzdWNoIGVsZW1lbnRzLgoKICAgIEBwcm9wZXJ0eSBzZWxlY3Rpb24K
        ICAgIEB0eXBlIE9iamVjdCBvciBBcnJheQogICAgQGRlZmF1bHQgbnVsbAog
        ICovCiAgc2VsZWN0aW9uOiBudWxsLAoKICAvKioKICAgIEluIHNpbmdsZSBz
        ZWxlY3Rpb24gbW9kZSAod2hlbiBgbXVsdGlwbGVgIGlzIGBmYWxzZWApLCB2
        YWx1ZSBjYW4gYmUgdXNlZCB0bwogICAgZ2V0IHRoZSBjdXJyZW50IHNlbGVj
        dGlvbidzIHZhbHVlIG9yIHNldCB0aGUgc2VsZWN0aW9uIGJ5IGl0J3MgdmFs
        dWUuCgogICAgSXQgaXMgbm90IGN1cnJlbnRseSBzdXBwb3J0ZWQgaW4gbXVs
        dGlwbGUgc2VsZWN0aW9uIG1vZGUuCgogICAgQHByb3BlcnR5IHZhbHVlCiAg
        ICBAdHlwZSBTdHJpbmcKICAgIEBkZWZhdWx0IG51bGwKICAqLwogIHZhbHVl
        OiBFbWJlci5jb21wdXRlZChmdW5jdGlvbihrZXksIHZhbHVlKSB7CiAgICBp
        ZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMikgeyByZXR1cm4gdmFsdWU7IH0K
        ICAgIHZhciB2YWx1ZVBhdGggPSBnZXQodGhpcywgJ29wdGlvblZhbHVlUGF0
        aCcpLnJlcGxhY2UoL15jb250ZW50XC4/LywgJycpOwogICAgcmV0dXJuIHZh
        bHVlUGF0aCA/IGdldCh0aGlzLCAnc2VsZWN0aW9uLicgKyB2YWx1ZVBhdGgp
        IDogZ2V0KHRoaXMsICdzZWxlY3Rpb24nKTsKICB9KS5wcm9wZXJ0eSgnc2Vs
        ZWN0aW9uJyksCgogIC8qKgogICAgSWYgZ2l2ZW4sIGEgdG9wLW1vc3QgZHVt
        bXkgb3B0aW9uIHdpbGwgYmUgcmVuZGVyZWQgdG8gc2VydmUgYXMgYSB1c2Vy
        CiAgICBwcm9tcHQuCgogICAgQHByb3BlcnR5IHByb21wdAogICAgQHR5cGUg
        U3RyaW5nCiAgICBAZGVmYXVsdCBudWxsCiAgKi8KICBwcm9tcHQ6IG51bGws
        CgogIC8qKgogICAgVGhlIHBhdGggb2YgdGhlIG9wdGlvbiBsYWJlbHMuIFNl
        ZSBbY29udGVudF0oL2FwaS9jbGFzc2VzL0VtYmVyLlNlbGVjdC5odG1sI3By
        b3BlcnR5X2NvbnRlbnQpLgoKICAgIEBwcm9wZXJ0eSBvcHRpb25MYWJlbFBh
        dGgKICAgIEB0eXBlIFN0cmluZwogICAgQGRlZmF1bHQgJ2NvbnRlbnQnCiAg
        Ki8KICBvcHRpb25MYWJlbFBhdGg6ICdjb250ZW50JywKCiAgLyoqCiAgICBU
        aGUgcGF0aCBvZiB0aGUgb3B0aW9uIHZhbHVlcy4gU2VlIFtjb250ZW50XSgv
        YXBpL2NsYXNzZXMvRW1iZXIuU2VsZWN0Lmh0bWwjcHJvcGVydHlfY29udGVu
        dCkuCgogICAgQHByb3BlcnR5IG9wdGlvblZhbHVlUGF0aAogICAgQHR5cGUg
        U3RyaW5nCiAgICBAZGVmYXVsdCAnY29udGVudCcKICAqLwogIG9wdGlvblZh
        bHVlUGF0aDogJ2NvbnRlbnQnLAoKICAvKioKICAgIFRoZSBwYXRoIG9mIHRo
        ZSBvcHRpb24gZ3JvdXAuCiAgICBXaGVuIHRoaXMgcHJvcGVydHkgaXMgdXNl
        ZCwgYGNvbnRlbnRgIHNob3VsZCBiZSBzb3J0ZWQgYnkgYG9wdGlvbkdyb3Vw
        UGF0aGAuCgogICAgQHByb3BlcnR5IG9wdGlvbkdyb3VwUGF0aAogICAgQHR5
        cGUgU3RyaW5nCiAgICBAZGVmYXVsdCBudWxsCiAgKi8KICBvcHRpb25Hcm91
        cFBhdGg6IG51bGwsCgogIC8qKgogICAgVGhlIHZpZXcgY2xhc3MgZm9yIG9w
        dGdyb3VwLgoKICAgIEBwcm9wZXJ0eSBncm91cFZpZXcKICAgIEB0eXBlIEVt
        YmVyLlZpZXcKICAgIEBkZWZhdWx0IEVtYmVyLlNlbGVjdE9wdGdyb3VwCiAg
        Ki8KICBncm91cFZpZXc6IEVtYmVyLlNlbGVjdE9wdGdyb3VwLAoKICBncm91
        cGVkQ29udGVudDogRW1iZXIuY29tcHV0ZWQoZnVuY3Rpb24oKSB7CiAgICB2
        YXIgZ3JvdXBQYXRoID0gZ2V0KHRoaXMsICdvcHRpb25Hcm91cFBhdGgnKTsK
        ICAgIHZhciBncm91cGVkQ29udGVudCA9IEVtYmVyLkEoKTsKICAgIHZhciBj
        b250ZW50ID0gZ2V0KHRoaXMsICdjb250ZW50JykgfHwgW107CgogICAgZm9y
        RWFjaChjb250ZW50LCBmdW5jdGlvbihpdGVtKSB7CiAgICAgIHZhciBsYWJl
        bCA9IGdldChpdGVtLCBncm91cFBhdGgpOwoKICAgICAgaWYgKGdldChncm91
        cGVkQ29udGVudCwgJ2xhc3RPYmplY3QubGFiZWwnKSAhPT0gbGFiZWwpIHsK
        ICAgICAgICBncm91cGVkQ29udGVudC5wdXNoT2JqZWN0KHsKICAgICAgICAg
        IGxhYmVsOiBsYWJlbCwKICAgICAgICAgIGNvbnRlbnQ6IEVtYmVyLkEoKQog
        ICAgICAgIH0pOwogICAgICB9CgogICAgICBnZXQoZ3JvdXBlZENvbnRlbnQs
        ICdsYXN0T2JqZWN0LmNvbnRlbnQnKS5wdXNoKGl0ZW0pOwogICAgfSk7Cgog
        ICAgcmV0dXJuIGdyb3VwZWRDb250ZW50OwogIH0pLnByb3BlcnR5KCdvcHRp
        b25Hcm91cFBhdGgnLCAnY29udGVudC5AZWFjaCcpLAoKICAvKioKICAgIFRo
        ZSB2aWV3IGNsYXNzIGZvciBvcHRpb24uCgogICAgQHByb3BlcnR5IG9wdGlv
        blZpZXcKICAgIEB0eXBlIEVtYmVyLlZpZXcKICAgIEBkZWZhdWx0IEVtYmVy
        LlNlbGVjdE9wdGlvbgogICovCiAgb3B0aW9uVmlldzogRW1iZXIuU2VsZWN0
        T3B0aW9uLAoKICBfY2hhbmdlOiBmdW5jdGlvbigpIHsKICAgIGlmIChnZXQo
        dGhpcywgJ211bHRpcGxlJykpIHsKICAgICAgdGhpcy5fY2hhbmdlTXVsdGlw
        bGUoKTsKICAgIH0gZWxzZSB7CiAgICAgIHRoaXMuX2NoYW5nZVNpbmdsZSgp
        OwogICAgfQogIH0sCgogIHNlbGVjdGlvbkRpZENoYW5nZTogRW1iZXIub2Jz
        ZXJ2ZXIoJ3NlbGVjdGlvbi5AZWFjaCcsIGZ1bmN0aW9uKCkgewogICAgdmFy
        IHNlbGVjdGlvbiA9IGdldCh0aGlzLCAnc2VsZWN0aW9uJyk7CiAgICBpZiAo
        Z2V0KHRoaXMsICdtdWx0aXBsZScpKSB7CiAgICAgIGlmICghaXNBcnJheShz
        ZWxlY3Rpb24pKSB7CiAgICAgICAgc2V0KHRoaXMsICdzZWxlY3Rpb24nLCBF
        bWJlci5BKFtzZWxlY3Rpb25dKSk7CiAgICAgICAgcmV0dXJuOwogICAgICB9
        CiAgICAgIHRoaXMuX3NlbGVjdGlvbkRpZENoYW5nZU11bHRpcGxlKCk7CiAg
        ICB9IGVsc2UgewogICAgICB0aGlzLl9zZWxlY3Rpb25EaWRDaGFuZ2VTaW5n
        bGUoKTsKICAgIH0KICB9KSwKCiAgdmFsdWVEaWRDaGFuZ2U6IEVtYmVyLm9i
        c2VydmVyKCd2YWx1ZScsIGZ1bmN0aW9uKCkgewogICAgdmFyIGNvbnRlbnQg
        PSBnZXQodGhpcywgJ2NvbnRlbnQnKSwKICAgICAgICB2YWx1ZSA9IGdldCh0
        aGlzLCAndmFsdWUnKSwKICAgICAgICB2YWx1ZVBhdGggPSBnZXQodGhpcywg
        J29wdGlvblZhbHVlUGF0aCcpLnJlcGxhY2UoL15jb250ZW50XC4/LywgJycp
        LAogICAgICAgIHNlbGVjdGVkVmFsdWUgPSAodmFsdWVQYXRoID8gZ2V0KHRo
        aXMsICdzZWxlY3Rpb24uJyArIHZhbHVlUGF0aCkgOiBnZXQodGhpcywgJ3Nl
        bGVjdGlvbicpKSwKICAgICAgICBzZWxlY3Rpb247CgogICAgaWYgKHZhbHVl
        ICE9PSBzZWxlY3RlZFZhbHVlKSB7CiAgICAgIHNlbGVjdGlvbiA9IGNvbnRl
        bnQgPyBjb250ZW50LmZpbmQoZnVuY3Rpb24ob2JqKSB7CiAgICAgICAgcmV0
        dXJuIHZhbHVlID09PSAodmFsdWVQYXRoID8gZ2V0KG9iaiwgdmFsdWVQYXRo
        KSA6IG9iaik7CiAgICAgIH0pIDogbnVsbDsKCiAgICAgIHRoaXMuc2V0KCdz
        ZWxlY3Rpb24nLCBzZWxlY3Rpb24pOwogICAgfQogIH0pLAoKCiAgX3RyaWdn
        ZXJDaGFuZ2U6IGZ1bmN0aW9uKCkgewogICAgdmFyIHNlbGVjdGlvbiA9IGdl
        dCh0aGlzLCAnc2VsZWN0aW9uJyk7CiAgICB2YXIgdmFsdWUgPSBnZXQodGhp
        cywgJ3ZhbHVlJyk7CgogICAgaWYgKCFFbWJlci5pc05vbmUoc2VsZWN0aW9u
        KSkgeyB0aGlzLnNlbGVjdGlvbkRpZENoYW5nZSgpOyB9CiAgICBpZiAoIUVt
        YmVyLmlzTm9uZSh2YWx1ZSkpIHsgdGhpcy52YWx1ZURpZENoYW5nZSgpOyB9
        CgogICAgdGhpcy5fY2hhbmdlKCk7CiAgfSwKCiAgX2NoYW5nZVNpbmdsZTog
        ZnVuY3Rpb24oKSB7CiAgICB2YXIgc2VsZWN0ZWRJbmRleCA9IHRoaXMuJCgp
        WzBdLnNlbGVjdGVkSW5kZXgsCiAgICAgICAgY29udGVudCA9IGdldCh0aGlz
        LCAnY29udGVudCcpLAogICAgICAgIHByb21wdCA9IGdldCh0aGlzLCAncHJv
        bXB0Jyk7CgogICAgaWYgKCFjb250ZW50IHx8ICFnZXQoY29udGVudCwgJ2xl
        bmd0aCcpKSB7IHJldHVybjsgfQogICAgaWYgKHByb21wdCAmJiBzZWxlY3Rl
        ZEluZGV4ID09PSAwKSB7IHNldCh0aGlzLCAnc2VsZWN0aW9uJywgbnVsbCk7
        IHJldHVybjsgfQoKICAgIGlmIChwcm9tcHQpIHsgc2VsZWN0ZWRJbmRleCAt
        PSAxOyB9CiAgICBzZXQodGhpcywgJ3NlbGVjdGlvbicsIGNvbnRlbnQub2Jq
        ZWN0QXQoc2VsZWN0ZWRJbmRleCkpOwogIH0sCgoKICBfY2hhbmdlTXVsdGlw
        bGU6IGZ1bmN0aW9uKCkgewogICAgdmFyIG9wdGlvbnMgPSB0aGlzLiQoJ29w
        dGlvbjpzZWxlY3RlZCcpLAogICAgICAgIHByb21wdCA9IGdldCh0aGlzLCAn
        cHJvbXB0JyksCiAgICAgICAgb2Zmc2V0ID0gcHJvbXB0ID8gMSA6IDAsCiAg
        ICAgICAgY29udGVudCA9IGdldCh0aGlzLCAnY29udGVudCcpLAogICAgICAg
        IHNlbGVjdGlvbiA9IGdldCh0aGlzLCAnc2VsZWN0aW9uJyk7CgogICAgaWYg
        KCFjb250ZW50KSB7IHJldHVybjsgfQogICAgaWYgKG9wdGlvbnMpIHsKICAg
        ICAgdmFyIHNlbGVjdGVkSW5kZXhlcyA9IG9wdGlvbnMubWFwKGZ1bmN0aW9u
        KCkgewogICAgICAgIHJldHVybiB0aGlzLmluZGV4IC0gb2Zmc2V0OwogICAg
        ICB9KS50b0FycmF5KCk7CiAgICAgIHZhciBuZXdTZWxlY3Rpb24gPSBjb250
        ZW50Lm9iamVjdHNBdChzZWxlY3RlZEluZGV4ZXMpOwoKICAgICAgaWYgKGlz
        QXJyYXkoc2VsZWN0aW9uKSkgewogICAgICAgIHJlcGxhY2Uoc2VsZWN0aW9u
        LCAwLCBnZXQoc2VsZWN0aW9uLCAnbGVuZ3RoJyksIG5ld1NlbGVjdGlvbik7
        CiAgICAgIH0gZWxzZSB7CiAgICAgICAgc2V0KHRoaXMsICdzZWxlY3Rpb24n
        LCBuZXdTZWxlY3Rpb24pOwogICAgICB9CiAgICB9CiAgfSwKCiAgX3NlbGVj
        dGlvbkRpZENoYW5nZVNpbmdsZTogZnVuY3Rpb24oKSB7CiAgICB2YXIgZWwg
        PSB0aGlzLmdldCgnZWxlbWVudCcpOwogICAgaWYgKCFlbCkgeyByZXR1cm47
        IH0KCiAgICB2YXIgY29udGVudCA9IGdldCh0aGlzLCAnY29udGVudCcpLAog
        ICAgICAgIHNlbGVjdGlvbiA9IGdldCh0aGlzLCAnc2VsZWN0aW9uJyksCiAg
        ICAgICAgc2VsZWN0aW9uSW5kZXggPSBjb250ZW50ID8gaW5kZXhPZihjb250
        ZW50LCBzZWxlY3Rpb24pIDogLTEsCiAgICAgICAgcHJvbXB0ID0gZ2V0KHRo
        aXMsICdwcm9tcHQnKTsKCiAgICBpZiAocHJvbXB0KSB7IHNlbGVjdGlvbklu
        ZGV4ICs9IDE7IH0KICAgIGlmIChlbCkgeyBlbC5zZWxlY3RlZEluZGV4ID0g
        c2VsZWN0aW9uSW5kZXg7IH0KICB9LAoKICBfc2VsZWN0aW9uRGlkQ2hhbmdl
        TXVsdGlwbGU6IGZ1bmN0aW9uKCkgewogICAgdmFyIGNvbnRlbnQgPSBnZXQo
        dGhpcywgJ2NvbnRlbnQnKSwKICAgICAgICBzZWxlY3Rpb24gPSBnZXQodGhp
        cywgJ3NlbGVjdGlvbicpLAogICAgICAgIHNlbGVjdGVkSW5kZXhlcyA9IGNv
        bnRlbnQgPyBpbmRleGVzT2YoY29udGVudCwgc2VsZWN0aW9uKSA6IFstMV0s
        CiAgICAgICAgcHJvbXB0ID0gZ2V0KHRoaXMsICdwcm9tcHQnKSwKICAgICAg
        ICBvZmZzZXQgPSBwcm9tcHQgPyAxIDogMCwKICAgICAgICBvcHRpb25zID0g
        dGhpcy4kKCdvcHRpb24nKSwKICAgICAgICBhZGp1c3RlZDsKCiAgICBpZiAo
        b3B0aW9ucykgewogICAgICBvcHRpb25zLmVhY2goZnVuY3Rpb24oKSB7CiAg
        ICAgICAgYWRqdXN0ZWQgPSB0aGlzLmluZGV4ID4gLTEgPyB0aGlzLmluZGV4
        IC0gb2Zmc2V0IDogLTE7CiAgICAgICAgdGhpcy5zZWxlY3RlZCA9IGluZGV4
        T2Yoc2VsZWN0ZWRJbmRleGVzLCBhZGp1c3RlZCkgPiAtMTsKICAgICAgfSk7
        CiAgICB9CiAgfSwKCiAgaW5pdDogZnVuY3Rpb24oKSB7CiAgICB0aGlzLl9z
        dXBlcigpOwogICAgdGhpcy5vbigiZGlkSW5zZXJ0RWxlbWVudCIsIHRoaXMs
        IHRoaXMuX3RyaWdnZXJDaGFuZ2UpOwogICAgdGhpcy5vbigiY2hhbmdlIiwg
        dGhpcywgdGhpcy5fY2hhbmdlKTsKICB9Cn0pOwoKfSkoKTsKCgoKKGZ1bmN0
        aW9uKCkgewovKioKQG1vZHVsZSBlbWJlcgpAc3VibW9kdWxlIGVtYmVyLWhh
        bmRsZWJhcnMtY29tcGlsZXIKKi8KCi8qKgoKICBUaGUgYHt7aW5wdXR9fWAg
        aGVscGVyIGluc2VydHMgYW4gSFRNTCBgPGlucHV0PmAgdGFnIGludG8gdGhl
        IHRlbXBsYXRlLAogIHdpdGggYSBgdHlwZWAgdmFsdWUgb2YgZWl0aGVyIGB0
        ZXh0YCBvciBgY2hlY2tib3hgLiBJZiBubyBgdHlwZWAgaXMgcHJvdmlkZWQs
        CiAgYHRleHRgIHdpbGwgYmUgdGhlIGRlZmF1bHQgdmFsdWUgYXBwbGllZC4g
        VGhlIGF0dHJpYnV0ZXMgb2YgYHt7aW5wdXR9fWAKICBtYXRjaCB0aG9zZSBv
        ZiB0aGUgbmF0aXZlIEhUTUwgdGFnIGFzIGNsb3NlbHkgYXMgcG9zc2libGUg
        Zm9yIHRoZXNlIHR3byB0eXBlcy4KCiAgIyMgVXNlIGFzIHRleHQgZmllbGQK
        ICBBbiBge3tpbnB1dH19YCB3aXRoIG5vIGB0eXBlYCBvciBhIGB0eXBlYCBv
        ZiBgdGV4dGAgd2lsbCByZW5kZXIgYW4gSFRNTCB0ZXh0IGlucHV0LgogIFRo
        ZSBmb2xsb3dpbmcgSFRNTCBhdHRyaWJ1dGVzIGNhbiBiZSBzZXQgdmlhIHRo
        ZSBoZWxwZXI6CgogPHRhYmxlPgogIDx0cj48dGQ+YHJlYWRvbmx5YDwvdGQ+
        PHRkPmByZXF1aXJlZGA8L3RkPjx0ZD5gYXV0b2ZvY3VzYDwvdGQ+PC90cj4K
        ICA8dHI+PHRkPmB2YWx1ZWA8L3RkPjx0ZD5gcGxhY2Vob2xkZXJgPC90ZD48
        dGQ+YGRpc2FibGVkYDwvdGQ+PC90cj4KICA8dHI+PHRkPmBzaXplYDwvdGQ+
        PHRkPmB0YWJpbmRleGA8L3RkPjx0ZD5gbWF4bGVuZ3RoYDwvdGQ+PC90cj4K
        ICA8dHI+PHRkPmBuYW1lYDwvdGQ+PHRkPmBtaW5gPC90ZD48dGQ+YG1heGA8
        L3RkPjwvdHI+CiAgPHRyPjx0ZD5gcGF0dGVybmA8L3RkPjx0ZD5gYWNjZXB0
        YDwvdGQ+PHRkPmBhdXRvY29tcGxldGVgPC90ZD48L3RyPgogIDx0cj48dGQ+
        YGF1dG9zYXZlYDwvdGQ+PHRkPmBmb3JtYWN0aW9uYDwvdGQ+PHRkPmBmb3Jt
        ZW5jdHlwZWA8L3RkPjwvdHI+CiAgPHRyPjx0ZD5gZm9ybW1ldGhvZGA8L3Rk
        Pjx0ZD5gZm9ybW5vdmFsaWRhdGVgPC90ZD48dGQ+YGZvcm10YXJnZXRgPC90
        ZD48L3RyPgogIDx0cj48dGQ+YGhlaWdodGA8L3RkPjx0ZD5gaW5wdXRtb2Rl
        YDwvdGQ+PHRkPmBtdWx0aXBsZWA8L3RkPjwvdHI+CiAgPHRyPjx0ZD5gc3Rl
        cGA8L3RkPjx0ZD5gd2lkdGhgPC90ZD48dGQ+YGZvcm1gPC90ZD48L3RyPgog
        IDx0cj48dGQ+YHNlbGVjdGlvbkRpcmVjdGlvbmA8L3RkPjx0ZD5gc3BlbGxj
        aGVja2A8L3RkPjx0ZD4mbmJzcDs8L3RkPjwvdHI+CiA8L3RhYmxlPgoKCiAg
        V2hlbiBzZXQgdG8gYSBxdW90ZWQgc3RyaW5nLCB0aGVzZSB2YWx1ZXMgd2ls
        bCBiZSBkaXJlY3RseSBhcHBsaWVkIHRvIHRoZSBIVE1MCiAgZWxlbWVudC4g
        V2hlbiBsZWZ0IHVucXVvdGVkLCB0aGVzZSB2YWx1ZXMgd2lsbCBiZSBib3Vu
        ZCB0byBhIHByb3BlcnR5IG9uIHRoZQogIHRlbXBsYXRlJ3MgY3VycmVudCBy
        ZW5kZXJpbmcgY29udGV4dCAobW9zdCB0eXBpY2FsbHkgYSBjb250cm9sbGVy
        IGluc3RhbmNlKS4KCiAgIyMgVW5ib3VuZDoKCiAgYGBgaGFuZGxlYmFycwog
        IHt7aW5wdXQgdmFsdWU9Imh0dHA6Ly93d3cuZmFjZWJvb2suY29tIn19CiAg
        YGBgCgoKICBgYGBodG1sCiAgPGlucHV0IHR5cGU9InRleHQiIHZhbHVlPSJo
        dHRwOi8vd3d3LmZhY2Vib29rLmNvbSIvPgogIGBgYAoKICAjIyBCb3VuZDoK
        CiAgYGBgamF2YXNjcmlwdAogIEFwcC5BcHBsaWNhdGlvbkNvbnRyb2xsZXIg
        PSBFbWJlci5Db250cm9sbGVyLmV4dGVuZCh7CiAgICBmaXJzdE5hbWU6ICJT
        dGFubGV5IiwKICAgIGVudHJ5Tm90QWxsb3dlZDogdHJ1ZQogIH0pOwogIGBg
        YAoKCiAgYGBgaGFuZGxlYmFycwogIHt7aW5wdXQgdHlwZT0idGV4dCIgdmFs
        dWU9Zmlyc3ROYW1lIGRpc2FibGVkPWVudHJ5Tm90QWxsb3dlZCBzaXplPSI1
        MCJ9fQogIGBgYAoKCiAgYGBgaHRtbAogIDxpbnB1dCB0eXBlPSJ0ZXh0IiB2
        YWx1ZT0iU3RhbmxleSIgZGlzYWJsZWQ9ImRpc2FibGVkIiBzaXplPSI1MCIv
        PgogIGBgYAoKICAjIyBFeHRlbnNpb24KCiAgSW50ZXJuYWxseSwgYHt7aW5w
        dXQgdHlwZT0idGV4dCJ9fWAgY3JlYXRlcyBhbiBpbnN0YW5jZSBvZiBgRW1i
        ZXIuVGV4dEZpZWxkYCwgcGFzc2luZwogIGFyZ3VtZW50cyBmcm9tIHRoZSBo
        ZWxwZXIgdG8gYEVtYmVyLlRleHRGaWVsZGAncyBgY3JlYXRlYCBtZXRob2Qu
        IFlvdSBjYW4gZXh0ZW5kIHRoZQogIGNhcGFibGlsdGllcyBvZiB0ZXh0IGlu
        cHV0cyBpbiB5b3VyIGFwcGxpY2F0aW9ucyBieSByZW9wZW5pbmcgdGhpcyBj
        bGFzcy4gRm9yIGV4YW1wbGUsCiAgaWYgeW91IGFyZSBkZXBsb3lpbmcgdG8g
        YnJvd3NlcnMgd2hlcmUgdGhlIGByZXF1aXJlZGAgYXR0cmlidXRlIGlzIHVz
        ZWQsIHlvdQogIGNhbiBhZGQgdGhpcyB0byB0aGUgYFRleHRGaWVsZGAncyBg
        YXR0cmlidXRlQmluZGluZ3NgIHByb3BlcnR5OgoKCiAgYGBgamF2YXNjcmlw
        dAogIEVtYmVyLlRleHRGaWVsZC5yZW9wZW4oewogICAgYXR0cmlidXRlQmlu
        ZGluZ3M6IFsncmVxdWlyZWQnXQogIH0pOwogIGBgYAoKICBLZWVwIGluIG1p
        bmQgd2hlbiB3cml0aW5nIGBFbWJlci5UZXh0RmllbGRgIHN1YmNsYXNzZXMg
        dGhhdCBgRW1iZXIuVGV4dEZpZWxkYAogIGl0c2VsZiBleHRlbmRzIGBFbWJl
        ci5Db21wb25lbnRgLCBtZWFuaW5nIHRoYXQgaXQgZG9lcyBOT1QgaW5oZXJp
        dAogIHRoZSBgY29udHJvbGxlcmAgb2YgdGhlIHBhcmVudCB2aWV3LgoKICBT
        ZWUgbW9yZSBhYm91dCBbRW1iZXIgY29tcG9uZW50c10oYXBpL2NsYXNzZXMv
        RW1iZXIuQ29tcG9uZW50Lmh0bWwpCgoKICAjIyBVc2UgYXMgY2hlY2tib3gK
        CiAgQW4gYHt7aW5wdXR9fWAgd2l0aCBhIGB0eXBlYCBvZiBgY2hlY2tib3hg
        IHdpbGwgcmVuZGVyIGFuIEhUTUwgY2hlY2tib3ggaW5wdXQuCiAgVGhlIGZv
        bGxvd2luZyBIVE1MIGF0dHJpYnV0ZXMgY2FuIGJlIHNldCB2aWEgdGhlIGhl
        bHBlcjoKCiogYGNoZWNrZWRgCiogYGRpc2FibGVkYAoqIGB0YWJpbmRleGAK
        KiBgaW5kZXRlcm1pbmF0ZWAKKiBgbmFtZWAKKiBgYXV0b2ZvY3VzYAoqIGBm
        b3JtYAoKCiAgV2hlbiBzZXQgdG8gYSBxdW90ZWQgc3RyaW5nLCB0aGVzZSB2
        YWx1ZXMgd2lsbCBiZSBkaXJlY3RseSBhcHBsaWVkIHRvIHRoZSBIVE1MCiAg
        ZWxlbWVudC4gV2hlbiBsZWZ0IHVucXVvdGVkLCB0aGVzZSB2YWx1ZXMgd2ls
        bCBiZSBib3VuZCB0byBhIHByb3BlcnR5IG9uIHRoZQogIHRlbXBsYXRlJ3Mg
        Y3VycmVudCByZW5kZXJpbmcgY29udGV4dCAobW9zdCB0eXBpY2FsbHkgYSBj
        b250cm9sbGVyIGluc3RhbmNlKS4KCiAgIyMgVW5ib3VuZDoKCiAgYGBgaGFu
        ZGxlYmFycwogIHt7aW5wdXQgdHlwZT0iY2hlY2tib3giIG5hbWU9ImlzQWRt
        aW4ifX0KICBgYGAKCiAgYGBgaHRtbAogIDxpbnB1dCB0eXBlPSJjaGVja2Jv
        eCIgbmFtZT0iaXNBZG1pbiIgLz4KICBgYGAKCiAgIyMgQm91bmQ6CgogIGBg
        YGphdmFzY3JpcHQKICBBcHAuQXBwbGljYXRpb25Db250cm9sbGVyID0gRW1i
        ZXIuQ29udHJvbGxlci5leHRlbmQoewogICAgaXNBZG1pbjogdHJ1ZQogIH0p
        OwogIGBgYAoKCiAgYGBgaGFuZGxlYmFycwogIHt7aW5wdXQgdHlwZT0iY2hl
        Y2tib3giIGNoZWNrZWQ9aXNBZG1pbiB9fQogIGBgYAoKCiAgYGBgaHRtbAog
        IDxpbnB1dCB0eXBlPSJjaGVja2JveCIgY2hlY2tlZD0iY2hlY2tlZCIgLz4K
        ICBgYGAKCiAgIyMgRXh0ZW5zaW9uCgogIEludGVybmFsbHksIGB7e2lucHV0
        IHR5cGU9ImNoZWNrYm94In19YCBjcmVhdGVzIGFuIGluc3RhbmNlIG9mIGBF
        bWJlci5DaGVja2JveGAsIHBhc3NpbmcKICBhcmd1bWVudHMgZnJvbSB0aGUg
        aGVscGVyIHRvIGBFbWJlci5DaGVja2JveGAncyBgY3JlYXRlYCBtZXRob2Qu
        IFlvdSBjYW4gZXh0ZW5kIHRoZQogIGNhcGFibGlsdGllcyBvZiBjaGVja2Jv
        eCBpbnB1dHMgaW4geW91ciBhcHBsaWNhdGlvbnMgYnkgcmVvcGVuaW5nIHRo
        aXMgY2xhc3MuIEZvciBleGFtcGxlLAogIGlmIHlvdSB3YW50ZWQgdG8gYWRk
        IGEgY3NzIGNsYXNzIHRvIGFsbCBjaGVja2JveGVzIGluIHlvdXIgYXBwbGlj
        YXRpb246CgoKICBgYGBqYXZhc2NyaXB0CiAgRW1iZXIuQ2hlY2tib3gucmVv
        cGVuKHsKICAgIGNsYXNzTmFtZXM6IFsnbXktYXBwLWNoZWNrYm94J10KICB9
        KTsKICBgYGAKCgogIEBtZXRob2QgaW5wdXQKICBAZm9yIEVtYmVyLkhhbmRs
        ZWJhcnMuaGVscGVycwogIEBwYXJhbSB7SGFzaH0gb3B0aW9ucwoqLwpFbWJl
        ci5IYW5kbGViYXJzLnJlZ2lzdGVySGVscGVyKCdpbnB1dCcsIGZ1bmN0aW9u
        KG9wdGlvbnMpIHsKICBFbWJlci5hc3NlcnQoJ1lvdSBjYW4gb25seSBwYXNz
        IGF0dHJpYnV0ZXMgdG8gdGhlIGBpbnB1dGAgaGVscGVyLCBub3QgYXJndW1l
        bnRzJywgYXJndW1lbnRzLmxlbmd0aCA8IDIpOwoKICB2YXIgaGFzaCA9IG9w
        dGlvbnMuaGFzaCwKICAgICAgdHlwZXMgPSBvcHRpb25zLmhhc2hUeXBlcywK
        ICAgICAgaW5wdXRUeXBlID0gaGFzaC50eXBlLAogICAgICBvbkV2ZW50ID0g
        aGFzaC5vbjsKCiAgZGVsZXRlIGhhc2gudHlwZTsKICBkZWxldGUgaGFzaC5v
        bjsKCiAgaWYgKGlucHV0VHlwZSA9PT0gJ2NoZWNrYm94JykgewogICAgRW1i
        ZXIuYXNzZXJ0KCJ7e2lucHV0IHR5cGU9J2NoZWNrYm94J319IGRvZXMgbm90
        IHN1cHBvcnQgc2V0dGluZyBgdmFsdWU9c29tZUJvb2xlYW5WYWx1ZWA7IHlv
        dSBtdXN0IHVzZSBgY2hlY2tlZD1zb21lQm9vbGVhblZhbHVlYCBpbnN0ZWFk
        LiIsIG9wdGlvbnMuaGFzaFR5cGVzLnZhbHVlICE9PSAnSUQnKTsKICAgIHJl
        dHVybiBFbWJlci5IYW5kbGViYXJzLmhlbHBlcnMudmlldy5jYWxsKHRoaXMs
        IEVtYmVyLkNoZWNrYm94LCBvcHRpb25zKTsKICB9IGVsc2UgewogICAgaWYg
        KGlucHV0VHlwZSkgeyBoYXNoLnR5cGUgPSBpbnB1dFR5cGU7IH0KICAgIGhh
        c2gub25FdmVudCA9IG9uRXZlbnQgfHwgJ2VudGVyJzsKICAgIHJldHVybiBF
        bWJlci5IYW5kbGViYXJzLmhlbHBlcnMudmlldy5jYWxsKHRoaXMsIEVtYmVy
        LlRleHRGaWVsZCwgb3B0aW9ucyk7CiAgfQp9KTsKCi8qKgogIGB7e3RleHRh
        cmVhfX1gIGluc2VydHMgYSBuZXcgaW5zdGFuY2Ugb2YgYDx0ZXh0YXJlYT5g
        IHRhZyBpbnRvIHRoZSB0ZW1wbGF0ZS4KICBUaGUgYXR0cmlidXRlcyBvZiBg
        e3t0ZXh0YXJlYX19YCBtYXRjaCB0aG9zZSBvZiB0aGUgbmF0aXZlIEhUTUwg
        dGFncyBhcwogIGNsb3NlbHkgYXMgcG9zc2libGUuCgogIFRoZSBmb2xsb3dp
        bmcgSFRNTCBhdHRyaWJ1dGVzIGNhbiBiZSBzZXQ6CgogICAgKiBgdmFsdWVg
        CiAgICAqIGBuYW1lYAogICAgKiBgcm93c2AKICAgICogYGNvbHNgCiAgICAq
        IGBwbGFjZWhvbGRlcmAKICAgICogYGRpc2FibGVkYAogICAgKiBgbWF4bGVu
        Z3RoYAogICAgKiBgdGFiaW5kZXhgCiAgICAqIGBzZWxlY3Rpb25FbmRgCiAg
        ICAqIGBzZWxlY3Rpb25TdGFydGAKICAgICogYHNlbGVjdGlvbkRpcmVjdGlv
        bmAKICAgICogYHdyYXBgCiAgICAqIGByZWFkb25seWAKICAgICogYGF1dG9m
        b2N1c2AKICAgICogYGZvcm1gCiAgICAqIGBzcGVsbGNoZWNrYAogICAgKiBg
        cmVxdWlyZWRgCgogIFdoZW4gc2V0IHRvIGEgcXVvdGVkIHN0cmluZywgdGhl
        c2UgdmFsdWUgd2lsbCBiZSBkaXJlY3RseSBhcHBsaWVkIHRvIHRoZSBIVE1M
        CiAgZWxlbWVudC4gV2hlbiBsZWZ0IHVucXVvdGVkLCB0aGVzZSB2YWx1ZXMg
        d2lsbCBiZSBib3VuZCB0byBhIHByb3BlcnR5IG9uIHRoZQogIHRlbXBsYXRl
        J3MgY3VycmVudCByZW5kZXJpbmcgY29udGV4dCAobW9zdCB0eXBpY2FsbHkg
        YSBjb250cm9sbGVyIGluc3RhbmNlKS4KCiAgVW5ib3VuZDoKCiAgYGBgaGFu
        ZGxlYmFycwogIHt7dGV4dGFyZWEgdmFsdWU9IkxvdHMgb2Ygc3RhdGljIHRl
        eHQgdGhhdCBJU04nVCBib3VuZCJ9fQogIGBgYAoKICBXb3VsZCByZXN1bHQg
        aW4gdGhlIGZvbGxvd2luZyBIVE1MOgoKICBgYGBodG1sCiAgPHRleHRhcmVh
        IGNsYXNzPSJlbWJlci10ZXh0LWFyZWEiPgogICAgTG90cyBvZiBzdGF0aWMg
        dGV4dCB0aGF0IElTTidUIGJvdW5kCiAgPC90ZXh0YXJlYT4KICBgYGAKCiAg
        Qm91bmQ6CgogIEluIHRoZSBmb2xsb3dpbmcgZXhhbXBsZSwgdGhlIGB3cml0
        dGVuV29yZHNgIHByb3BlcnR5IG9uIGBBcHAuQXBwbGljYXRpb25Db250cm9s
        bGVyYAogIHdpbGwgYmUgdXBkYXRlZCBsaXZlIGFzIHRoZSB1c2VyIHR5cGVz
        ICdMb3RzIG9mIHRleHQgdGhhdCBJUyBib3VuZCcgaW50bwogIHRoZSB0ZXh0
        IGFyZWEgb2YgdGhlaXIgYnJvd3NlcidzIHdpbmRvdy4KCiAgYGBgamF2YXNj
        cmlwdAogIEFwcC5BcHBsaWNhdGlvbkNvbnRyb2xsZXIgPSBFbWJlci5Db250
        cm9sbGVyLmV4dGVuZCh7CiAgICB3cml0dGVuV29yZHM6ICJMb3RzIG9mIHRl
        eHQgdGhhdCBJUyBib3VuZCIKICB9KTsKICBgYGAKCiAgYGBgaGFuZGxlYmFy
        cwogIHt7dGV4dGFyZWEgdmFsdWU9d3JpdHRlbldvcmRzfX0KICBgYGAKCiAg
        IFdvdWxkIHJlc3VsdCBpbiB0aGUgZm9sbG93aW5nIEhUTUw6CgogIGBgYGh0
        bWwKICA8dGV4dGFyZWEgY2xhc3M9ImVtYmVyLXRleHQtYXJlYSI+CiAgICBM
        b3RzIG9mIHRleHQgdGhhdCBJUyBib3VuZAogIDwvdGV4dGFyZWE+CiAgYGBg
        CgogIElmIHlvdSB3YW50ZWQgYSBvbmUgd2F5IGJpbmRpbmcgYmV0d2VlbiB0
        aGUgdGV4dCBhcmVhIGFuZCBhIGRpdiB0YWcKICBzb21ld2hlcmUgZWxzZSBv
        biB5b3VyIHNjcmVlbiwgeW91IGNvdWxkIHVzZSBgRW1iZXIuY29tcHV0ZWQu
        b25lV2F5YDoKCiAgYGBgamF2YXNjcmlwdAogIEFwcC5BcHBsaWNhdGlvbkNv
        bnRyb2xsZXIgPSBFbWJlci5Db250cm9sbGVyLmV4dGVuZCh7CiAgICB3cml0
        dGVuV29yZHM6ICJMb3RzIG9mIHRleHQgdGhhdCBJUyBib3VuZCIsCiAgICBv
        dXRwdXRXcml0dGVuV29yZHM6IEVtYmVyLmNvbXB1dGVkLm9uZVdheSgid3Jp
        dHRlbldvcmRzIikKICB9KTsKICBgYGAKCiAgYGBgaGFuZGxlYmFycwogIHt7
        dGV4dGFyZWEgdmFsdWU9d3JpdHRlbldvcmRzfX0KCiAgPGRpdj4KICAgIHt7
        b3V0cHV0V3JpdHRlbldvcmRzfX0KICA8L2Rpdj4KICBgYGAKCiAgV291bGQg
        cmVzdWx0IGluIHRoZSBmb2xsb3dpbmcgSFRNTDoKCiAgYGBgaHRtbAogIDx0
        ZXh0YXJlYSBjbGFzcz0iZW1iZXItdGV4dC1hcmVhIj4KICAgIExvdHMgb2Yg
        dGV4dCB0aGF0IElTIGJvdW5kCiAgPC90ZXh0YXJlYT4KCiAgPC0tIHRoZSBm
        b2xsb3dpbmcgZGl2IHdpbGwgYmUgdXBkYXRlZCBpbiByZWFsIHRpbWUgYXMg
        eW91IHR5cGUgLS0+CgogIDxkaXY+CiAgICBMb3RzIG9mIHRleHQgdGhhdCBJ
        UyBib3VuZAogIDwvZGl2PgogIGBgYAoKICBGaW5hbGx5LCB0aGlzIGV4YW1w
        bGUgcmVhbGx5IHNob3dzIHRoZSBwb3dlciBhbmQgZWFzZSBvZiBFbWJlciB3
        aGVuIHR3bwogIHByb3BlcnRpZXMgYXJlIGJvdW5kIHRvIGVhY2hvdGhlciB2
        aWEgYEVtYmVyLmNvbXB1dGVkLmFsaWFzYC4gVHlwZSBpbnRvCiAgZWl0aGVy
        IHRleHQgYXJlYSBib3ggYW5kIHRoZXknbGwgYm90aCBzdGF5IGluIHN5bmMu
        IE5vdGUgdGhhdAogIGBFbWJlci5jb21wdXRlZC5hbGlhc2AgY29zdHMgbW9y
        ZSBpbiB0ZXJtcyBvZiBwZXJmb3JtYW5jZSwgc28gb25seSB1c2UgaXQgd2hl
        bgogIHlvdXIgcmVhbGx5IGJpbmRpbmcgaW4gYm90aCBkaXJlY3Rpb25zOgoK
        ICBgYGBqYXZhc2NyaXB0CiAgQXBwLkFwcGxpY2F0aW9uQ29udHJvbGxlciA9
        IEVtYmVyLkNvbnRyb2xsZXIuZXh0ZW5kKHsKICAgIHdyaXR0ZW5Xb3Jkczog
        IkxvdHMgb2YgdGV4dCB0aGF0IElTIGJvdW5kIiwKICAgIHR3b1dheVdyaXR0
        ZW5Xb3JkczogRW1iZXIuY29tcHV0ZWQuYWxpYXMoIndyaXR0ZW5Xb3JkcyIp
        CiAgfSk7CiAgYGBgCgogIGBgYGhhbmRsZWJhcnMKICB7e3RleHRhcmVhIHZh
        bHVlPXdyaXR0ZW5Xb3Jkc319CiAge3t0ZXh0YXJlYSB2YWx1ZT10d29XYXlX
        cml0dGVuV29yZHN9fQogIGBgYAoKICBgYGBodG1sCiAgPHRleHRhcmVhIGlk
        PSJlbWJlcjEiIGNsYXNzPSJlbWJlci10ZXh0LWFyZWEiPgogICAgTG90cyBv
        ZiB0ZXh0IHRoYXQgSVMgYm91bmQKICA8L3RleHRhcmVhPgoKICA8LS0gYm90
        aCB1cGRhdGVkIGluIHJlYWwgdGltZSAtLT4KCiAgPHRleHRhcmVhIGlkPSJl
        bWJlcjIiIGNsYXNzPSJlbWJlci10ZXh0LWFyZWEiPgogICAgTG90cyBvZiB0
        ZXh0IHRoYXQgSVMgYm91bmQKICA8L3RleHRhcmVhPgogIGBgYAoKICAjIyBF
        eHRlbnNpb24KCiAgSW50ZXJuYWxseSwgYHt7dGV4dGFyZWF9fWAgY3JlYXRl
        cyBhbiBpbnN0YW5jZSBvZiBgRW1iZXIuVGV4dEFyZWFgLCBwYXNzaW5nCiAg
        YXJndW1lbnRzIGZyb20gdGhlIGhlbHBlciB0byBgRW1iZXIuVGV4dEFyZWFg
        J3MgYGNyZWF0ZWAgbWV0aG9kLiBZb3UgY2FuCiAgZXh0ZW5kIHRoZSBjYXBh
        YmlsaXRpZXMgb2YgdGV4dCBhcmVhcyBpbiB5b3VyIGFwcGxpY2F0aW9uIGJ5
        IHJlb3BlbmluZyB0aGlzCiAgY2xhc3MuIEZvciBleGFtcGxlLCBpZiB5b3Ug
        YXJlIGRlcGxveWluZyB0byBicm93c2VycyB3aGVyZSB0aGUgYHJlcXVpcmVk
        YAogIGF0dHJpYnV0ZSBpcyB1c2VkLCB5b3UgY2FuIGdsb2JhbGx5IGFkZCBz
        dXBwb3J0IGZvciB0aGUgYHJlcXVpcmVkYCBhdHRyaWJ1dGUKICBvbiBhbGwg
        YHt7dGV4dGFyZWF9fWBzJyBpbiB5b3VyIGFwcCBieSByZW9wZW5pbmcgYEVt
        YmVyLlRleHRBcmVhYCBvcgogIGBFbWJlci5UZXh0U3VwcG9ydGAgYW5kIGFk
        ZGluZyBpdCB0byB0aGUgYGF0dHJpYnV0ZUJpbmRpbmdzYCBjb25jYXRlbmF0
        ZWQKICBwcm9wZXJ0eToKCiAgYGBgamF2YXNjcmlwdAogIEVtYmVyLlRleHRB
        cmVhLnJlb3Blbih7CiAgICBhdHRyaWJ1dGVCaW5kaW5nczogWydyZXF1aXJl
        ZCddCiAgfSk7CiAgYGBgCgogIEtlZXAgaW4gbWluZCB3aGVuIHdyaXRpbmcg
        YEVtYmVyLlRleHRBcmVhYCBzdWJjbGFzc2VzIHRoYXQgYEVtYmVyLlRleHRB
        cmVhYAogIGl0c2VsZiBleHRlbmRzIGBFbWJlci5Db21wb25lbnRgLCBtZWFu
        aW5nIHRoYXQgaXQgZG9lcyBOT1QgaW5oZXJpdAogIHRoZSBgY29udHJvbGxl
        cmAgb2YgdGhlIHBhcmVudCB2aWV3LgoKICBTZWUgbW9yZSBhYm91dCBbRW1i
        ZXIgY29tcG9uZW50c10oYXBpL2NsYXNzZXMvRW1iZXIuQ29tcG9uZW50Lmh0
        bWwpCgogIEBtZXRob2QgdGV4dGFyZWEKICBAZm9yIEVtYmVyLkhhbmRsZWJh
        cnMuaGVscGVycwogIEBwYXJhbSB7SGFzaH0gb3B0aW9ucwoqLwpFbWJlci5I
        YW5kbGViYXJzLnJlZ2lzdGVySGVscGVyKCd0ZXh0YXJlYScsIGZ1bmN0aW9u
        KG9wdGlvbnMpIHsKICBFbWJlci5hc3NlcnQoJ1lvdSBjYW4gb25seSBwYXNz
        IGF0dHJpYnV0ZXMgdG8gdGhlIGB0ZXh0YXJlYWAgaGVscGVyLCBub3QgYXJn
        dW1lbnRzJywgYXJndW1lbnRzLmxlbmd0aCA8IDIpOwoKICB2YXIgaGFzaCA9
        IG9wdGlvbnMuaGFzaCwKICAgICAgdHlwZXMgPSBvcHRpb25zLmhhc2hUeXBl
        czsKCiAgcmV0dXJuIEVtYmVyLkhhbmRsZWJhcnMuaGVscGVycy52aWV3LmNh
        bGwodGhpcywgRW1iZXIuVGV4dEFyZWEsIG9wdGlvbnMpOwp9KTsKCn0pKCk7
        CgoKCihmdW5jdGlvbigpIHsKRW1iZXIuQ29tcG9uZW50TG9va3VwID0gRW1i
        ZXIuT2JqZWN0LmV4dGVuZCh7CiAgbG9va3VwRmFjdG9yeTogZnVuY3Rpb24o
        bmFtZSwgY29udGFpbmVyKSB7CgogICAgY29udGFpbmVyID0gY29udGFpbmVy
        IHx8IHRoaXMuY29udGFpbmVyOwoKICAgIHZhciBmdWxsTmFtZSA9ICdjb21w
        b25lbnQ6JyArIG5hbWUsCiAgICAgICAgdGVtcGxhdGVGdWxsTmFtZSA9ICd0
        ZW1wbGF0ZTpjb21wb25lbnRzLycgKyBuYW1lLAogICAgICAgIHRlbXBsYXRl
        UmVnaXN0ZXJlZCA9IGNvbnRhaW5lciAmJiBjb250YWluZXIuaGFzKHRlbXBs
        YXRlRnVsbE5hbWUpOwoKICAgIGlmICh0ZW1wbGF0ZVJlZ2lzdGVyZWQpIHsK
        ICAgICAgY29udGFpbmVyLmluamVjdGlvbihmdWxsTmFtZSwgJ2xheW91dCcs
        IHRlbXBsYXRlRnVsbE5hbWUpOwogICAgfQoKICAgIHZhciBDb21wb25lbnQg
        PSBjb250YWluZXIubG9va3VwRmFjdG9yeShmdWxsTmFtZSk7CgogICAgLy8g
        T25seSB0cmVhdCBhcyBhIGNvbXBvbmVudCBpZiBlaXRoZXIgdGhlIGNvbXBv
        bmVudAogICAgLy8gb3IgYSB0ZW1wbGF0ZSBoYXMgYmVlbiByZWdpc3RlcmVk
        LgogICAgaWYgKHRlbXBsYXRlUmVnaXN0ZXJlZCB8fCBDb21wb25lbnQpIHsK
        ICAgICAgaWYgKCFDb21wb25lbnQpIHsKICAgICAgICBjb250YWluZXIucmVn
        aXN0ZXIoZnVsbE5hbWUsIEVtYmVyLkNvbXBvbmVudCk7CiAgICAgICAgQ29t
        cG9uZW50ID0gY29udGFpbmVyLmxvb2t1cEZhY3RvcnkoZnVsbE5hbWUpOwog
        ICAgICB9CiAgICAgIHJldHVybiBDb21wb25lbnQ7CiAgICB9CiAgfQp9KTsK
        Cn0pKCk7CgoKCihmdW5jdGlvbigpIHsKLypnbG9iYWxzIEhhbmRsZWJhcnMg
        Ki8KLyoqCkBtb2R1bGUgZW1iZXIKQHN1Ym1vZHVsZSBlbWJlci1oYW5kbGVi
        YXJzCiovCgovKioKICBGaW5kIHRlbXBsYXRlcyBzdG9yZWQgaW4gdGhlIGhl
        YWQgdGFnIGFzIHNjcmlwdCB0YWdzIGFuZCBtYWtlIHRoZW0gYXZhaWxhYmxl
        CiAgdG8gYEVtYmVyLkNvcmVWaWV3YCBpbiB0aGUgZ2xvYmFsIGBFbWJlci5U
        RU1QTEFURVNgIG9iamVjdC4gVGhpcyB3aWxsIGJlIHJ1bgogIGFzIGFzIGpR
        dWVyeSBET00tcmVhZHkgY2FsbGJhY2suCgogIFNjcmlwdCB0YWdzIHdpdGgg
        YHRleHQveC1oYW5kbGViYXJzYCB3aWxsIGJlIGNvbXBpbGVkCiAgd2l0aCBF
        bWJlcidzIEhhbmRsZWJhcnMgYW5kIGFyZSBzdWl0YWJsZSBmb3IgdXNlIGFz
        IGEgdmlldydzIHRlbXBsYXRlLgogIFRob3NlIHdpdGggdHlwZSBgdGV4dC94
        LXJhdy1oYW5kbGViYXJzYCB3aWxsIGJlIGNvbXBpbGVkIHdpdGggcmVndWxh
        cgogIEhhbmRsZWJhcnMgYW5kIGFyZSBzdWl0YWJsZSBmb3IgdXNlIGluIHZp
        ZXdzJyBjb21wdXRlZCBwcm9wZXJ0aWVzLgoKICBAcHJpdmF0ZQogIEBtZXRo
        b2QgYm9vdHN0cmFwCiAgQGZvciBFbWJlci5IYW5kbGViYXJzCiAgQHN0YXRp
        YwogIEBwYXJhbSBjdHgKKi8KRW1iZXIuSGFuZGxlYmFycy5ib290c3RyYXAg
        PSBmdW5jdGlvbihjdHgpIHsKICB2YXIgc2VsZWN0b3JzID0gJ3NjcmlwdFt0
        eXBlPSJ0ZXh0L3gtaGFuZGxlYmFycyJdLCBzY3JpcHRbdHlwZT0idGV4dC94
        LXJhdy1oYW5kbGViYXJzIl0nOwoKICBFbWJlci4kKHNlbGVjdG9ycywgY3R4
        KQogICAgLmVhY2goZnVuY3Rpb24oKSB7CiAgICAvLyBHZXQgYSByZWZlcmVu
        Y2UgdG8gdGhlIHNjcmlwdCB0YWcKICAgIHZhciBzY3JpcHQgPSBFbWJlci4k
        KHRoaXMpOwoKICAgIHZhciBjb21waWxlID0gKHNjcmlwdC5hdHRyKCd0eXBl
        JykgPT09ICd0ZXh0L3gtcmF3LWhhbmRsZWJhcnMnKSA/CiAgICAgICAgICAg
        ICAgICAgIEVtYmVyLiQucHJveHkoSGFuZGxlYmFycy5jb21waWxlLCBIYW5k
        bGViYXJzKSA6CiAgICAgICAgICAgICAgICAgIEVtYmVyLiQucHJveHkoRW1i
        ZXIuSGFuZGxlYmFycy5jb21waWxlLCBFbWJlci5IYW5kbGViYXJzKSwKICAg
        ICAgLy8gR2V0IHRoZSBuYW1lIG9mIHRoZSBzY3JpcHQsIHVzZWQgYnkgRW1i
        ZXIuVmlldydzIHRlbXBsYXRlTmFtZSBwcm9wZXJ0eS4KICAgICAgLy8gRmly
        c3QgbG9vayBmb3IgZGF0YS10ZW1wbGF0ZS1uYW1lIGF0dHJpYnV0ZSwgdGhl
        biBmYWxsIGJhY2sgdG8gaXRzCiAgICAgIC8vIGlkIGlmIG5vIG5hbWUgaXMg
        Zm91bmQuCiAgICAgIHRlbXBsYXRlTmFtZSA9IHNjcmlwdC5hdHRyKCdkYXRh
        LXRlbXBsYXRlLW5hbWUnKSB8fCBzY3JpcHQuYXR0cignaWQnKSB8fCAnYXBw
        bGljYXRpb24nLAogICAgICB0ZW1wbGF0ZSA9IGNvbXBpbGUoc2NyaXB0Lmh0
        bWwoKSk7CgogICAgLy8gQ2hlY2sgaWYgdGVtcGxhdGUgb2Ygc2FtZSBuYW1l
        IGFscmVhZHkgZXhpc3RzCiAgICBpZiAoRW1iZXIuVEVNUExBVEVTW3RlbXBs
        YXRlTmFtZV0gIT09IHVuZGVmaW5lZCkgewogICAgICB0aHJvdyBuZXcgRW1i
        ZXIuRXJyb3IoJ1RlbXBsYXRlIG5hbWVkICInICsgdGVtcGxhdGVOYW1lICAr
        ICciIGFscmVhZHkgZXhpc3RzLicpOwogICAgfQoKICAgIC8vIEZvciB0ZW1w
        bGF0ZXMgd2hpY2ggaGF2ZSBhIG5hbWUsIHdlIHNhdmUgdGhlbSBhbmQgdGhl
        biByZW1vdmUgdGhlbSBmcm9tIHRoZSBET00KICAgIEVtYmVyLlRFTVBMQVRF
        U1t0ZW1wbGF0ZU5hbWVdID0gdGVtcGxhdGU7CgogICAgLy8gUmVtb3ZlIHNj
        cmlwdCB0YWcgZnJvbSBET00KICAgIHNjcmlwdC5yZW1vdmUoKTsKICB9KTsK
        fTsKCmZ1bmN0aW9uIGJvb3RzdHJhcCgpIHsKICBFbWJlci5IYW5kbGViYXJz
        LmJvb3RzdHJhcCggRW1iZXIuJChkb2N1bWVudCkgKTsKfQoKZnVuY3Rpb24g
        cmVnaXN0ZXJDb21wb25lbnRMb29rdXAoY29udGFpbmVyKSB7CiAgY29udGFp
        bmVyLnJlZ2lzdGVyKCdjb21wb25lbnQtbG9va3VwOm1haW4nLCBFbWJlci5D
        b21wb25lbnRMb29rdXApOwp9CgovKgogIFdlIHRpZSB0aGlzIHRvIGFwcGxp
        Y2F0aW9uLmxvYWQgdG8gZW5zdXJlIHRoYXQgd2UndmUgYXQgbGVhc3QKICBh
        dHRlbXB0ZWQgdG8gYm9vdHN0cmFwIGF0IHRoZSBwb2ludCB0aGF0IHRoZSBh
        cHBsaWNhdGlvbiBpcyBsb2FkZWQuCgogIFdlIGFsc28gdGllIHRoaXMgdG8g
        ZG9jdW1lbnQgcmVhZHkgc2luY2Ugd2UncmUgZ3VhcmFudGVlZCB0aGF0IGFs
        bAogIHRoZSBpbmxpbmUgdGVtcGxhdGVzIGFyZSBwcmVzZW50IGF0IHRoaXMg
        cG9pbnQuCgogIFRoZXJlJ3Mgbm8gaGFybSB0byBydW5uaW5nIHRoaXMgdHdp
        Y2UsIHNpbmNlIHdlIHJlbW92ZSB0aGUgdGVtcGxhdGVzCiAgZnJvbSB0aGUg
        RE9NIGFmdGVyIHByb2Nlc3NpbmcuCiovCgpFbWJlci5vbkxvYWQoJ0VtYmVy
        LkFwcGxpY2F0aW9uJywgZnVuY3Rpb24oQXBwbGljYXRpb24pIHsKICBBcHBs
        aWNhdGlvbi5pbml0aWFsaXplcih7CiAgICBuYW1lOiAnZG9tVGVtcGxhdGVz
        JywKICAgIGluaXRpYWxpemU6IGJvb3RzdHJhcAogIH0pOwoKICBBcHBsaWNh
        dGlvbi5pbml0aWFsaXplcih7CiAgICBuYW1lOiAncmVnaXN0ZXJDb21wb25l
        bnRMb29rdXAnLAogICAgYWZ0ZXI6ICdkb21UZW1wbGF0ZXMnLAogICAgaW5p
        dGlhbGl6ZTogcmVnaXN0ZXJDb21wb25lbnRMb29rdXAKICB9KTsKfSk7Cgp9
        KSgpOwoKCgooZnVuY3Rpb24oKSB7Ci8qKgpFbWJlciBIYW5kbGViYXJzCgpA
        bW9kdWxlIGVtYmVyCkBzdWJtb2R1bGUgZW1iZXItaGFuZGxlYmFycwpAcmVx
        dWlyZXMgZW1iZXItdmlld3MKKi8KCkVtYmVyLnJ1bkxvYWRIb29rcygnRW1i
        ZXIuSGFuZGxlYmFycycsIEVtYmVyLkhhbmRsZWJhcnMpOwoKfSkoKTsKCihm
        dW5jdGlvbigpIHsKZGVmaW5lKCJyb3V0ZS1yZWNvZ25pemVyIiwKICBbImV4
        cG9ydHMiXSwKICBmdW5jdGlvbihfX2V4cG9ydHNfXykgewogICAgInVzZSBz
        dHJpY3QiOwogICAgdmFyIHNwZWNpYWxzID0gWwogICAgICAnLycsICcuJywg
        JyonLCAnKycsICc/JywgJ3wnLAogICAgICAnKCcsICcpJywgJ1snLCAnXScs
        ICd7JywgJ30nLCAnXFwnCiAgICBdOwoKICAgIHZhciBlc2NhcGVSZWdleCA9
        IG5ldyBSZWdFeHAoJyhcXCcgKyBzcGVjaWFscy5qb2luKCd8XFwnKSArICcp
        JywgJ2cnKTsKCiAgICBmdW5jdGlvbiBpc0FycmF5KHRlc3QpIHsKICAgICAg
        cmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh0ZXN0KSA9
        PT0gIltvYmplY3QgQXJyYXldIjsKICAgIH0KCiAgICAvLyBBIFNlZ21lbnQg
        cmVwcmVzZW50cyBhIHNlZ21lbnQgaW4gdGhlIG9yaWdpbmFsIHJvdXRlIGRl
        c2NyaXB0aW9uLgogICAgLy8gRWFjaCBTZWdtZW50IHR5cGUgcHJvdmlkZXMg
        YW4gYGVhY2hDaGFyYCBhbmQgYHJlZ2V4YCBtZXRob2QuCiAgICAvLwogICAg
        Ly8gVGhlIGBlYWNoQ2hhcmAgbWV0aG9kIGludm9rZXMgdGhlIGNhbGxiYWNr
        IHdpdGggb25lIG9yIG1vcmUgY2hhcmFjdGVyCiAgICAvLyBzcGVjaWZpY2F0
        aW9ucy4gQSBjaGFyYWN0ZXIgc3BlY2lmaWNhdGlvbiBjb25zdW1lcyBvbmUg
        b3IgbW9yZSBpbnB1dAogICAgLy8gY2hhcmFjdGVycy4KICAgIC8vCiAgICAv
        LyBUaGUgYHJlZ2V4YCBtZXRob2QgcmV0dXJucyBhIHJlZ2V4IGZyYWdtZW50
        IGZvciB0aGUgc2VnbWVudC4gSWYgdGhlCiAgICAvLyBzZWdtZW50IGlzIGEg
        ZHluYW1pYyBvZiBzdGFyIHNlZ21lbnQsIHRoZSByZWdleCBmcmFnbWVudCBh
        bHNvIGluY2x1ZGVzCiAgICAvLyBhIGNhcHR1cmUuCiAgICAvLwogICAgLy8g
        QSBjaGFyYWN0ZXIgc3BlY2lmaWNhdGlvbiBjb250YWluczoKICAgIC8vCiAg
        ICAvLyAqIGB2YWxpZENoYXJzYDogYSBTdHJpbmcgd2l0aCBhIGxpc3Qgb2Yg
        YWxsIHZhbGlkIGNoYXJhY3RlcnMsIG9yCiAgICAvLyAqIGBpbnZhbGlkQ2hh
        cnNgOiBhIFN0cmluZyB3aXRoIGEgbGlzdCBvZiBhbGwgaW52YWxpZCBjaGFy
        YWN0ZXJzCiAgICAvLyAqIGByZXBlYXRgOiB0cnVlIGlmIHRoZSBjaGFyYWN0
        ZXIgc3BlY2lmaWNhdGlvbiBjYW4gcmVwZWF0CgogICAgZnVuY3Rpb24gU3Rh
        dGljU2VnbWVudChzdHJpbmcpIHsgdGhpcy5zdHJpbmcgPSBzdHJpbmc7IH0K
        ICAgIFN0YXRpY1NlZ21lbnQucHJvdG90eXBlID0gewogICAgICBlYWNoQ2hh
        cjogZnVuY3Rpb24oY2FsbGJhY2spIHsKICAgICAgICB2YXIgc3RyaW5nID0g
        dGhpcy5zdHJpbmcsIGNoOwoKICAgICAgICBmb3IgKHZhciBpPTAsIGw9c3Ry
        aW5nLmxlbmd0aDsgaTxsOyBpKyspIHsKICAgICAgICAgIGNoID0gc3RyaW5n
        LmNoYXJBdChpKTsKICAgICAgICAgIGNhbGxiYWNrKHsgdmFsaWRDaGFyczog
        Y2ggfSk7CiAgICAgICAgfQogICAgICB9LAoKICAgICAgcmVnZXg6IGZ1bmN0
        aW9uKCkgewogICAgICAgIHJldHVybiB0aGlzLnN0cmluZy5yZXBsYWNlKGVz
        Y2FwZVJlZ2V4LCAnXFwkMScpOwogICAgICB9LAoKICAgICAgZ2VuZXJhdGU6
        IGZ1bmN0aW9uKCkgewogICAgICAgIHJldHVybiB0aGlzLnN0cmluZzsKICAg
        ICAgfQogICAgfTsKCiAgICBmdW5jdGlvbiBEeW5hbWljU2VnbWVudChuYW1l
        KSB7IHRoaXMubmFtZSA9IG5hbWU7IH0KICAgIER5bmFtaWNTZWdtZW50LnBy
        b3RvdHlwZSA9IHsKICAgICAgZWFjaENoYXI6IGZ1bmN0aW9uKGNhbGxiYWNr
        KSB7CiAgICAgICAgY2FsbGJhY2soeyBpbnZhbGlkQ2hhcnM6ICIvIiwgcmVw
        ZWF0OiB0cnVlIH0pOwogICAgICB9LAoKICAgICAgcmVnZXg6IGZ1bmN0aW9u
        KCkgewogICAgICAgIHJldHVybiAiKFteL10rKSI7CiAgICAgIH0sCgogICAg
        ICBnZW5lcmF0ZTogZnVuY3Rpb24ocGFyYW1zKSB7CiAgICAgICAgcmV0dXJu
        IHBhcmFtc1t0aGlzLm5hbWVdOwogICAgICB9CiAgICB9OwoKICAgIGZ1bmN0
        aW9uIFN0YXJTZWdtZW50KG5hbWUpIHsgdGhpcy5uYW1lID0gbmFtZTsgfQog
        ICAgU3RhclNlZ21lbnQucHJvdG90eXBlID0gewogICAgICBlYWNoQ2hhcjog
        ZnVuY3Rpb24oY2FsbGJhY2spIHsKICAgICAgICBjYWxsYmFjayh7IGludmFs
        aWRDaGFyczogIiIsIHJlcGVhdDogdHJ1ZSB9KTsKICAgICAgfSwKCiAgICAg
        IHJlZ2V4OiBmdW5jdGlvbigpIHsKICAgICAgICByZXR1cm4gIiguKykiOwog
        ICAgICB9LAoKICAgICAgZ2VuZXJhdGU6IGZ1bmN0aW9uKHBhcmFtcykgewog
        ICAgICAgIHJldHVybiBwYXJhbXNbdGhpcy5uYW1lXTsKICAgICAgfQogICAg
        fTsKCiAgICBmdW5jdGlvbiBFcHNpbG9uU2VnbWVudCgpIHt9CiAgICBFcHNp
        bG9uU2VnbWVudC5wcm90b3R5cGUgPSB7CiAgICAgIGVhY2hDaGFyOiBmdW5j
        dGlvbigpIHt9LAogICAgICByZWdleDogZnVuY3Rpb24oKSB7IHJldHVybiAi
        IjsgfSwKICAgICAgZ2VuZXJhdGU6IGZ1bmN0aW9uKCkgeyByZXR1cm4gIiI7
        IH0KICAgIH07CgogICAgZnVuY3Rpb24gcGFyc2Uocm91dGUsIG5hbWVzLCB0
        eXBlcykgewogICAgICAvLyBub3JtYWxpemUgcm91dGUgYXMgbm90IHN0YXJ0
        aW5nIHdpdGggYSAiLyIuIFJlY29nbml0aW9uIHdpbGwKICAgICAgLy8gYWxz
        byBub3JtYWxpemUuCiAgICAgIGlmIChyb3V0ZS5jaGFyQXQoMCkgPT09ICIv
        IikgeyByb3V0ZSA9IHJvdXRlLnN1YnN0cigxKTsgfQoKICAgICAgdmFyIHNl
        Z21lbnRzID0gcm91dGUuc3BsaXQoIi8iKSwgcmVzdWx0cyA9IFtdOwoKICAg
        ICAgZm9yICh2YXIgaT0wLCBsPXNlZ21lbnRzLmxlbmd0aDsgaTxsOyBpKysp
        IHsKICAgICAgICB2YXIgc2VnbWVudCA9IHNlZ21lbnRzW2ldLCBtYXRjaDsK
        CiAgICAgICAgaWYgKG1hdGNoID0gc2VnbWVudC5tYXRjaCgvXjooW15cL10r
        KSQvKSkgewogICAgICAgICAgcmVzdWx0cy5wdXNoKG5ldyBEeW5hbWljU2Vn
        bWVudChtYXRjaFsxXSkpOwogICAgICAgICAgbmFtZXMucHVzaChtYXRjaFsx
        XSk7CiAgICAgICAgICB0eXBlcy5keW5hbWljcysrOwogICAgICAgIH0gZWxz
        ZSBpZiAobWF0Y2ggPSBzZWdtZW50Lm1hdGNoKC9eXCooW15cL10rKSQvKSkg
        ewogICAgICAgICAgcmVzdWx0cy5wdXNoKG5ldyBTdGFyU2VnbWVudChtYXRj
        aFsxXSkpOwogICAgICAgICAgbmFtZXMucHVzaChtYXRjaFsxXSk7CiAgICAg
        ICAgICB0eXBlcy5zdGFycysrOwogICAgICAgIH0gZWxzZSBpZihzZWdtZW50
        ID09PSAiIikgewogICAgICAgICAgcmVzdWx0cy5wdXNoKG5ldyBFcHNpbG9u
        U2VnbWVudCgpKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmVzdWx0
        cy5wdXNoKG5ldyBTdGF0aWNTZWdtZW50KHNlZ21lbnQpKTsKICAgICAgICAg
        IHR5cGVzLnN0YXRpY3MrKzsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJl
        dHVybiByZXN1bHRzOwogICAgfQoKICAgIC8vIEEgU3RhdGUgaGFzIGEgY2hh
        cmFjdGVyIHNwZWNpZmljYXRpb24gYW5kIChgY2hhclNwZWNgKSBhbmQgYSBs
        aXN0IG9mIHBvc3NpYmxlCiAgICAvLyBzdWJzZXF1ZW50IHN0YXRlcyAoYG5l
        eHRTdGF0ZXNgKS4KICAgIC8vCiAgICAvLyBJZiBhIFN0YXRlIGlzIGFuIGFj
        Y2VwdGluZyBzdGF0ZSwgaXQgd2lsbCBhbHNvIGhhdmUgc2V2ZXJhbCBhZGRp
        dGlvbmFsCiAgICAvLyBwcm9wZXJ0aWVzOgogICAgLy8KICAgIC8vICogYHJl
        Z2V4YDogQSByZWd1bGFyIGV4cHJlc3Npb24gdGhhdCBpcyB1c2VkIHRvIGV4
        dHJhY3QgcGFyYW1ldGVycyBmcm9tIHBhdGhzCiAgICAvLyAgIHRoYXQgcmVh
        Y2hlZCB0aGlzIGFjY2VwdGluZyBzdGF0ZS4KICAgIC8vICogYGhhbmRsZXJz
        YDogSW5mb3JtYXRpb24gb24gaG93IHRvIGNvbnZlcnQgdGhlIGxpc3Qgb2Yg
        Y2FwdHVyZXMgaW50byBjYWxscwogICAgLy8gICB0byByZWdpc3RlcmVkIGhh
        bmRsZXJzIHdpdGggdGhlIHNwZWNpZmllZCBwYXJhbWV0ZXJzCiAgICAvLyAq
        IGB0eXBlc2A6IEhvdyBtYW55IHN0YXRpYywgZHluYW1pYyBvciBzdGFyIHNl
        Z21lbnRzIGluIHRoaXMgcm91dGUuIFVzZWQgdG8KICAgIC8vICAgZGVjaWRl
        IHdoaWNoIHJvdXRlIHRvIHVzZSBpZiBtdWx0aXBsZSByZWdpc3RlcmVkIHJv
        dXRlcyBtYXRjaCBhIHBhdGguCiAgICAvLwogICAgLy8gQ3VycmVudGx5LCBT
        dGF0ZSBpcyBpbXBsZW1lbnRlZCBuYWl2ZWx5IGJ5IGxvb3Bpbmcgb3ZlciBg
        bmV4dFN0YXRlc2AgYW5kCiAgICAvLyBjb21wYXJpbmcgYSBjaGFyYWN0ZXIg
        c3BlY2lmaWNhdGlvbiBhZ2FpbnN0IGEgY2hhcmFjdGVyLiBBIG1vcmUgZWZm
        aWNpZW50CiAgICAvLyBpbXBsZW1lbnRhdGlvbiB3b3VsZCB1c2UgYSBoYXNo
        IG9mIGtleXMgcG9pbnRpbmcgYXQgb25lIG9yIG1vcmUgbmV4dCBzdGF0ZXMu
        CgogICAgZnVuY3Rpb24gU3RhdGUoY2hhclNwZWMpIHsKICAgICAgdGhpcy5j
        aGFyU3BlYyA9IGNoYXJTcGVjOwogICAgICB0aGlzLm5leHRTdGF0ZXMgPSBb
        XTsKICAgIH0KCiAgICBTdGF0ZS5wcm90b3R5cGUgPSB7CiAgICAgIGdldDog
        ZnVuY3Rpb24oY2hhclNwZWMpIHsKICAgICAgICB2YXIgbmV4dFN0YXRlcyA9
        IHRoaXMubmV4dFN0YXRlczsKCiAgICAgICAgZm9yICh2YXIgaT0wLCBsPW5l
        eHRTdGF0ZXMubGVuZ3RoOyBpPGw7IGkrKykgewogICAgICAgICAgdmFyIGNo
        aWxkID0gbmV4dFN0YXRlc1tpXTsKCiAgICAgICAgICB2YXIgaXNFcXVhbCA9
        IGNoaWxkLmNoYXJTcGVjLnZhbGlkQ2hhcnMgPT09IGNoYXJTcGVjLnZhbGlk
        Q2hhcnM7CiAgICAgICAgICBpc0VxdWFsID0gaXNFcXVhbCAmJiBjaGlsZC5j
        aGFyU3BlYy5pbnZhbGlkQ2hhcnMgPT09IGNoYXJTcGVjLmludmFsaWRDaGFy
        czsKCiAgICAgICAgICBpZiAoaXNFcXVhbCkgeyByZXR1cm4gY2hpbGQ7IH0K
        ICAgICAgICB9CiAgICAgIH0sCgogICAgICBwdXQ6IGZ1bmN0aW9uKGNoYXJT
        cGVjKSB7CiAgICAgICAgdmFyIHN0YXRlOwoKICAgICAgICAvLyBJZiB0aGUg
        Y2hhcmFjdGVyIHNwZWNpZmljYXRpb24gYWxyZWFkeSBleGlzdHMgaW4gYSBj
        aGlsZCBvZiB0aGUgY3VycmVudAogICAgICAgIC8vIHN0YXRlLCBqdXN0IHJl
        dHVybiB0aGF0IHN0YXRlLgogICAgICAgIGlmIChzdGF0ZSA9IHRoaXMuZ2V0
        KGNoYXJTcGVjKSkgeyByZXR1cm4gc3RhdGU7IH0KCiAgICAgICAgLy8gTWFr
        ZSBhIG5ldyBzdGF0ZSBmb3IgdGhlIGNoYXJhY3RlciBzcGVjCiAgICAgICAg
        c3RhdGUgPSBuZXcgU3RhdGUoY2hhclNwZWMpOwoKICAgICAgICAvLyBJbnNl
        cnQgdGhlIG5ldyBzdGF0ZSBhcyBhIGNoaWxkIG9mIHRoZSBjdXJyZW50IHN0
        YXRlCiAgICAgICAgdGhpcy5uZXh0U3RhdGVzLnB1c2goc3RhdGUpOwoKICAg
        ICAgICAvLyBJZiB0aGlzIGNoYXJhY3RlciBzcGVjaWZpY2F0aW9uIHJlcGVh
        dHMsIGluc2VydCB0aGUgbmV3IHN0YXRlIGFzIGEgY2hpbGQKICAgICAgICAv
        LyBvZiBpdHNlbGYuIE5vdGUgdGhhdCB0aGlzIHdpbGwgbm90IHRyaWdnZXIg
        YW4gaW5maW5pdGUgbG9vcCBiZWNhdXNlIGVhY2gKICAgICAgICAvLyB0cmFu
        c2l0aW9uIGR1cmluZyByZWNvZ25pdGlvbiBjb25zdW1lcyBhIGNoYXJhY3Rl
        ci4KICAgICAgICBpZiAoY2hhclNwZWMucmVwZWF0KSB7CiAgICAgICAgICBz
        dGF0ZS5uZXh0U3RhdGVzLnB1c2goc3RhdGUpOwogICAgICAgIH0KCiAgICAg
        ICAgLy8gUmV0dXJuIHRoZSBuZXcgc3RhdGUKICAgICAgICByZXR1cm4gc3Rh
        dGU7CiAgICAgIH0sCgogICAgICAvLyBGaW5kIGEgbGlzdCBvZiBjaGlsZCBz
        dGF0ZXMgbWF0Y2hpbmcgdGhlIG5leHQgY2hhcmFjdGVyCiAgICAgIG1hdGNo
        OiBmdW5jdGlvbihjaCkgewogICAgICAgIC8vIERFQlVHICJQcm9jZXNzaW5n
        IGAiICsgY2ggKyAiYDoiCiAgICAgICAgdmFyIG5leHRTdGF0ZXMgPSB0aGlz
        Lm5leHRTdGF0ZXMsCiAgICAgICAgICAgIGNoaWxkLCBjaGFyU3BlYywgY2hh
        cnM7CgogICAgICAgIC8vIERFQlVHICIgICIgKyBkZWJ1Z1N0YXRlKHRoaXMp
        CiAgICAgICAgdmFyIHJldHVybmVkID0gW107CgogICAgICAgIGZvciAodmFy
        IGk9MCwgbD1uZXh0U3RhdGVzLmxlbmd0aDsgaTxsOyBpKyspIHsKICAgICAg
        ICAgIGNoaWxkID0gbmV4dFN0YXRlc1tpXTsKCiAgICAgICAgICBjaGFyU3Bl
        YyA9IGNoaWxkLmNoYXJTcGVjOwoKICAgICAgICAgIGlmICh0eXBlb2YgKGNo
        YXJzID0gY2hhclNwZWMudmFsaWRDaGFycykgIT09ICd1bmRlZmluZWQnKSB7
        CiAgICAgICAgICAgIGlmIChjaGFycy5pbmRleE9mKGNoKSAhPT0gLTEpIHsg
        cmV0dXJuZWQucHVzaChjaGlsZCk7IH0KICAgICAgICAgIH0gZWxzZSBpZiAo
        dHlwZW9mIChjaGFycyA9IGNoYXJTcGVjLmludmFsaWRDaGFycykgIT09ICd1
        bmRlZmluZWQnKSB7CiAgICAgICAgICAgIGlmIChjaGFycy5pbmRleE9mKGNo
        KSA9PT0gLTEpIHsgcmV0dXJuZWQucHVzaChjaGlsZCk7IH0KICAgICAgICAg
        IH0KICAgICAgICB9CgogICAgICAgIHJldHVybiByZXR1cm5lZDsKICAgICAg
        fQoKICAgICAgLyoqIElGIERFQlVHCiAgICAgICwgZGVidWc6IGZ1bmN0aW9u
        KCkgewogICAgICAgIHZhciBjaGFyU3BlYyA9IHRoaXMuY2hhclNwZWMsCiAg
        ICAgICAgICAgIGRlYnVnID0gIlsiLAogICAgICAgICAgICBjaGFycyA9IGNo
        YXJTcGVjLnZhbGlkQ2hhcnMgfHwgY2hhclNwZWMuaW52YWxpZENoYXJzOwoK
        ICAgICAgICBpZiAoY2hhclNwZWMuaW52YWxpZENoYXJzKSB7IGRlYnVnICs9
        ICJeIjsgfQogICAgICAgIGRlYnVnICs9IGNoYXJzOwogICAgICAgIGRlYnVn
        ICs9ICJdIjsKCiAgICAgICAgaWYgKGNoYXJTcGVjLnJlcGVhdCkgeyBkZWJ1
        ZyArPSAiKyI7IH0KCiAgICAgICAgcmV0dXJuIGRlYnVnOwogICAgICB9CiAg
        ICAgIEVORCBJRiAqKi8KICAgIH07CgogICAgLyoqIElGIERFQlVHCiAgICBm
        dW5jdGlvbiBkZWJ1Zyhsb2cpIHsKICAgICAgY29uc29sZS5sb2cobG9nKTsK
        ICAgIH0KCiAgICBmdW5jdGlvbiBkZWJ1Z1N0YXRlKHN0YXRlKSB7CiAgICAg
        IHJldHVybiBzdGF0ZS5uZXh0U3RhdGVzLm1hcChmdW5jdGlvbihuKSB7CiAg
        ICAgICAgaWYgKG4ubmV4dFN0YXRlcy5sZW5ndGggPT09IDApIHsgcmV0dXJu
        ICIoICIgKyBuLmRlYnVnKCkgKyAiIFthY2NlcHRpbmddICkiOyB9CiAgICAg
        ICAgcmV0dXJuICIoICIgKyBuLmRlYnVnKCkgKyAiIDx0aGVuPiAiICsgbi5u
        ZXh0U3RhdGVzLm1hcChmdW5jdGlvbihzKSB7IHJldHVybiBzLmRlYnVnKCkg
        fSkuam9pbigiIG9yICIpICsgIiApIjsKICAgICAgfSkuam9pbigiLCAiKQog
        ICAgfQogICAgRU5EIElGICoqLwoKICAgIC8vIFRoaXMgaXMgYSBzb21ld2hh
        dCBuYWl2ZSBzdHJhdGVneSwgYnV0IHNob3VsZCB3b3JrIGluIGEgbG90IG9m
        IGNhc2VzCiAgICAvLyBBIGJldHRlciBzdHJhdGVneSB3b3VsZCBwcm9wZXJs
        eSByZXNvbHZlIC9wb3N0cy86aWQvbmV3IGFuZCAvcG9zdHMvZWRpdC86aWQu
        CiAgICAvLwogICAgLy8gVGhpcyBzdHJhdGVneSBnZW5lcmFsbHkgcHJlZmVy
        cyBtb3JlIHN0YXRpYyBhbmQgbGVzcyBkeW5hbWljIG1hdGNoaW5nLgogICAg
        Ly8gU3BlY2lmaWNhbGx5LCBpdAogICAgLy8KICAgIC8vICAqIHByZWZlcnMg
        ZmV3ZXIgc3RhcnMgdG8gbW9yZSwgdGhlbgogICAgLy8gICogcHJlZmVycyB1
        c2luZyBzdGFycyBmb3IgbGVzcyBvZiB0aGUgbWF0Y2ggdG8gbW9yZSwgdGhl
        bgogICAgLy8gICogcHJlZmVycyBmZXdlciBkeW5hbWljIHNlZ21lbnRzIHRv
        IG1vcmUsIHRoZW4KICAgIC8vICAqIHByZWZlcnMgbW9yZSBzdGF0aWMgc2Vn
        bWVudHMgdG8gbW9yZQogICAgZnVuY3Rpb24gc29ydFNvbHV0aW9ucyhzdGF0
        ZXMpIHsKICAgICAgcmV0dXJuIHN0YXRlcy5zb3J0KGZ1bmN0aW9uKGEsIGIp
        IHsKICAgICAgICBpZiAoYS50eXBlcy5zdGFycyAhPT0gYi50eXBlcy5zdGFy
        cykgeyByZXR1cm4gYS50eXBlcy5zdGFycyAtIGIudHlwZXMuc3RhcnM7IH0K
        CiAgICAgICAgaWYgKGEudHlwZXMuc3RhcnMpIHsKICAgICAgICAgIGlmIChh
        LnR5cGVzLnN0YXRpY3MgIT09IGIudHlwZXMuc3RhdGljcykgeyByZXR1cm4g
        Yi50eXBlcy5zdGF0aWNzIC0gYS50eXBlcy5zdGF0aWNzOyB9CiAgICAgICAg
        ICBpZiAoYS50eXBlcy5keW5hbWljcyAhPT0gYi50eXBlcy5keW5hbWljcykg
        eyByZXR1cm4gYi50eXBlcy5keW5hbWljcyAtIGEudHlwZXMuZHluYW1pY3M7
        IH0KICAgICAgICB9CgogICAgICAgIGlmIChhLnR5cGVzLmR5bmFtaWNzICE9
        PSBiLnR5cGVzLmR5bmFtaWNzKSB7IHJldHVybiBhLnR5cGVzLmR5bmFtaWNz
        IC0gYi50eXBlcy5keW5hbWljczsgfQogICAgICAgIGlmIChhLnR5cGVzLnN0
        YXRpY3MgIT09IGIudHlwZXMuc3RhdGljcykgeyByZXR1cm4gYi50eXBlcy5z
        dGF0aWNzIC0gYS50eXBlcy5zdGF0aWNzOyB9CgogICAgICAgIHJldHVybiAw
        OwogICAgICB9KTsKICAgIH0KCiAgICBmdW5jdGlvbiByZWNvZ25pemVDaGFy
        KHN0YXRlcywgY2gpIHsKICAgICAgdmFyIG5leHRTdGF0ZXMgPSBbXTsKCiAg
        ICAgIGZvciAodmFyIGk9MCwgbD1zdGF0ZXMubGVuZ3RoOyBpPGw7IGkrKykg
        ewogICAgICAgIHZhciBzdGF0ZSA9IHN0YXRlc1tpXTsKCiAgICAgICAgbmV4
        dFN0YXRlcyA9IG5leHRTdGF0ZXMuY29uY2F0KHN0YXRlLm1hdGNoKGNoKSk7
        CiAgICAgIH0KCiAgICAgIHJldHVybiBuZXh0U3RhdGVzOwogICAgfQoKICAg
        IHZhciBvQ3JlYXRlID0gT2JqZWN0LmNyZWF0ZSB8fCBmdW5jdGlvbihwcm90
        bykgewogICAgICBmdW5jdGlvbiBGKCkge30KICAgICAgRi5wcm90b3R5cGUg
        PSBwcm90bzsKICAgICAgcmV0dXJuIG5ldyBGKCk7CiAgICB9OwoKICAgIGZ1
        bmN0aW9uIFJlY29nbml6ZVJlc3VsdHMocXVlcnlQYXJhbXMpIHsKICAgICAg
        dGhpcy5xdWVyeVBhcmFtcyA9IHF1ZXJ5UGFyYW1zIHx8IHt9OwogICAgfQog
        ICAgUmVjb2duaXplUmVzdWx0cy5wcm90b3R5cGUgPSBvQ3JlYXRlKHsKICAg
        ICAgc3BsaWNlOiBBcnJheS5wcm90b3R5cGUuc3BsaWNlLAogICAgICBzbGlj
        ZTogIEFycmF5LnByb3RvdHlwZS5zbGljZSwKICAgICAgcHVzaDogICBBcnJh
        eS5wcm90b3R5cGUucHVzaCwKICAgICAgbGVuZ3RoOiAwLAogICAgICBxdWVy
        eVBhcmFtczogbnVsbAogICAgfSk7CgogICAgZnVuY3Rpb24gZmluZEhhbmRs
        ZXIoc3RhdGUsIHBhdGgsIHF1ZXJ5UGFyYW1zKSB7CiAgICAgIHZhciBoYW5k
        bGVycyA9IHN0YXRlLmhhbmRsZXJzLCByZWdleCA9IHN0YXRlLnJlZ2V4Owog
        ICAgICB2YXIgY2FwdHVyZXMgPSBwYXRoLm1hdGNoKHJlZ2V4KSwgY3VycmVu
        dENhcHR1cmUgPSAxOwogICAgICB2YXIgcmVzdWx0ID0gbmV3IFJlY29nbml6
        ZVJlc3VsdHMocXVlcnlQYXJhbXMpOwoKICAgICAgZm9yICh2YXIgaT0wLCBs
        PWhhbmRsZXJzLmxlbmd0aDsgaTxsOyBpKyspIHsKICAgICAgICB2YXIgaGFu
        ZGxlciA9IGhhbmRsZXJzW2ldLCBuYW1lcyA9IGhhbmRsZXIubmFtZXMsIHBh
        cmFtcyA9IHt9OwoKICAgICAgICBmb3IgKHZhciBqPTAsIG09bmFtZXMubGVu
        Z3RoOyBqPG07IGorKykgewogICAgICAgICAgcGFyYW1zW25hbWVzW2pdXSA9
        IGNhcHR1cmVzW2N1cnJlbnRDYXB0dXJlKytdOwogICAgICAgIH0KCiAgICAg
        ICAgcmVzdWx0LnB1c2goeyBoYW5kbGVyOiBoYW5kbGVyLmhhbmRsZXIsIHBh
        cmFtczogcGFyYW1zLCBpc0R5bmFtaWM6ICEhbmFtZXMubGVuZ3RoIH0pOwog
        ICAgICB9CgogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQoKICAgIGZ1bmN0
        aW9uIGFkZFNlZ21lbnQoY3VycmVudFN0YXRlLCBzZWdtZW50KSB7CiAgICAg
        IHNlZ21lbnQuZWFjaENoYXIoZnVuY3Rpb24oY2gpIHsKICAgICAgICB2YXIg
        c3RhdGU7CgogICAgICAgIGN1cnJlbnRTdGF0ZSA9IGN1cnJlbnRTdGF0ZS5w
        dXQoY2gpOwogICAgICB9KTsKCiAgICAgIHJldHVybiBjdXJyZW50U3RhdGU7
        CiAgICB9CgogICAgLy8gVGhlIG1haW4gaW50ZXJmYWNlCgogICAgdmFyIFJv
        dXRlUmVjb2duaXplciA9IGZ1bmN0aW9uKCkgewogICAgICB0aGlzLnJvb3RT
        dGF0ZSA9IG5ldyBTdGF0ZSgpOwogICAgICB0aGlzLm5hbWVzID0ge307CiAg
        ICB9OwoKCiAgICBSb3V0ZVJlY29nbml6ZXIucHJvdG90eXBlID0gewogICAg
        ICBhZGQ6IGZ1bmN0aW9uKHJvdXRlcywgb3B0aW9ucykgewogICAgICAgIHZh
        ciBjdXJyZW50U3RhdGUgPSB0aGlzLnJvb3RTdGF0ZSwgcmVnZXggPSAiXiIs
        CiAgICAgICAgICAgIHR5cGVzID0geyBzdGF0aWNzOiAwLCBkeW5hbWljczog
        MCwgc3RhcnM6IDAgfSwKICAgICAgICAgICAgaGFuZGxlcnMgPSBbXSwgYWxs
        U2VnbWVudHMgPSBbXSwgbmFtZTsKCiAgICAgICAgdmFyIGlzRW1wdHkgPSB0
        cnVlOwoKICAgICAgICBmb3IgKHZhciBpPTAsIGw9cm91dGVzLmxlbmd0aDsg
        aTxsOyBpKyspIHsKICAgICAgICAgIHZhciByb3V0ZSA9IHJvdXRlc1tpXSwg
        bmFtZXMgPSBbXTsKCiAgICAgICAgICB2YXIgc2VnbWVudHMgPSBwYXJzZShy
        b3V0ZS5wYXRoLCBuYW1lcywgdHlwZXMpOwoKICAgICAgICAgIGFsbFNlZ21l
        bnRzID0gYWxsU2VnbWVudHMuY29uY2F0KHNlZ21lbnRzKTsKCiAgICAgICAg
        ICBmb3IgKHZhciBqPTAsIG09c2VnbWVudHMubGVuZ3RoOyBqPG07IGorKykg
        ewogICAgICAgICAgICB2YXIgc2VnbWVudCA9IHNlZ21lbnRzW2pdOwoKICAg
        ICAgICAgICAgaWYgKHNlZ21lbnQgaW5zdGFuY2VvZiBFcHNpbG9uU2VnbWVu
        dCkgeyBjb250aW51ZTsgfQoKICAgICAgICAgICAgaXNFbXB0eSA9IGZhbHNl
        OwoKICAgICAgICAgICAgLy8gQWRkIGEgIi8iIGZvciB0aGUgbmV3IHNlZ21l
        bnQKICAgICAgICAgICAgY3VycmVudFN0YXRlID0gY3VycmVudFN0YXRlLnB1
        dCh7IHZhbGlkQ2hhcnM6ICIvIiB9KTsKICAgICAgICAgICAgcmVnZXggKz0g
        Ii8iOwoKICAgICAgICAgICAgLy8gQWRkIGEgcmVwcmVzZW50YXRpb24gb2Yg
        dGhlIHNlZ21lbnQgdG8gdGhlIE5GQSBhbmQgcmVnZXgKICAgICAgICAgICAg
        Y3VycmVudFN0YXRlID0gYWRkU2VnbWVudChjdXJyZW50U3RhdGUsIHNlZ21l
        bnQpOwogICAgICAgICAgICByZWdleCArPSBzZWdtZW50LnJlZ2V4KCk7CiAg
        ICAgICAgICB9CgogICAgICAgICAgdmFyIGhhbmRsZXIgPSB7IGhhbmRsZXI6
        IHJvdXRlLmhhbmRsZXIsIG5hbWVzOiBuYW1lcyB9OwogICAgICAgICAgaGFu
        ZGxlcnMucHVzaChoYW5kbGVyKTsKICAgICAgICB9CgogICAgICAgIGlmIChp
        c0VtcHR5KSB7CiAgICAgICAgICBjdXJyZW50U3RhdGUgPSBjdXJyZW50U3Rh
        dGUucHV0KHsgdmFsaWRDaGFyczogIi8iIH0pOwogICAgICAgICAgcmVnZXgg
        Kz0gIi8iOwogICAgICAgIH0KCiAgICAgICAgY3VycmVudFN0YXRlLmhhbmRs
        ZXJzID0gaGFuZGxlcnM7CiAgICAgICAgY3VycmVudFN0YXRlLnJlZ2V4ID0g
        bmV3IFJlZ0V4cChyZWdleCArICIkIik7CiAgICAgICAgY3VycmVudFN0YXRl
        LnR5cGVzID0gdHlwZXM7CgogICAgICAgIGlmIChuYW1lID0gb3B0aW9ucyAm
        JiBvcHRpb25zLmFzKSB7CiAgICAgICAgICB0aGlzLm5hbWVzW25hbWVdID0g
        ewogICAgICAgICAgICBzZWdtZW50czogYWxsU2VnbWVudHMsCiAgICAgICAg
        ICAgIGhhbmRsZXJzOiBoYW5kbGVycwogICAgICAgICAgfTsKICAgICAgICB9
        CiAgICAgIH0sCgogICAgICBoYW5kbGVyc0ZvcjogZnVuY3Rpb24obmFtZSkg
        ewogICAgICAgIHZhciByb3V0ZSA9IHRoaXMubmFtZXNbbmFtZV0sIHJlc3Vs
        dCA9IFtdOwogICAgICAgIGlmICghcm91dGUpIHsgdGhyb3cgbmV3IEVycm9y
        KCJUaGVyZSBpcyBubyByb3V0ZSBuYW1lZCAiICsgbmFtZSk7IH0KCiAgICAg
        ICAgZm9yICh2YXIgaT0wLCBsPXJvdXRlLmhhbmRsZXJzLmxlbmd0aDsgaTxs
        OyBpKyspIHsKICAgICAgICAgIHJlc3VsdC5wdXNoKHJvdXRlLmhhbmRsZXJz
        W2ldKTsKICAgICAgICB9CgogICAgICAgIHJldHVybiByZXN1bHQ7CiAgICAg
        IH0sCgogICAgICBoYXNSb3V0ZTogZnVuY3Rpb24obmFtZSkgewogICAgICAg
        IHJldHVybiAhIXRoaXMubmFtZXNbbmFtZV07CiAgICAgIH0sCgogICAgICBn
        ZW5lcmF0ZTogZnVuY3Rpb24obmFtZSwgcGFyYW1zKSB7CiAgICAgICAgdmFy
        IHJvdXRlID0gdGhpcy5uYW1lc1tuYW1lXSwgb3V0cHV0ID0gIiI7CiAgICAg
        ICAgaWYgKCFyb3V0ZSkgeyB0aHJvdyBuZXcgRXJyb3IoIlRoZXJlIGlzIG5v
        IHJvdXRlIG5hbWVkICIgKyBuYW1lKTsgfQoKICAgICAgICB2YXIgc2VnbWVu
        dHMgPSByb3V0ZS5zZWdtZW50czsKCiAgICAgICAgZm9yICh2YXIgaT0wLCBs
        PXNlZ21lbnRzLmxlbmd0aDsgaTxsOyBpKyspIHsKICAgICAgICAgIHZhciBz
        ZWdtZW50ID0gc2VnbWVudHNbaV07CgogICAgICAgICAgaWYgKHNlZ21lbnQg
        aW5zdGFuY2VvZiBFcHNpbG9uU2VnbWVudCkgeyBjb250aW51ZTsgfQoKICAg
        ICAgICAgIG91dHB1dCArPSAiLyI7CiAgICAgICAgICBvdXRwdXQgKz0gc2Vn
        bWVudC5nZW5lcmF0ZShwYXJhbXMpOwogICAgICAgIH0KCiAgICAgICAgaWYg
        KG91dHB1dC5jaGFyQXQoMCkgIT09ICcvJykgeyBvdXRwdXQgPSAnLycgKyBv
        dXRwdXQ7IH0KCiAgICAgICAgaWYgKHBhcmFtcyAmJiBwYXJhbXMucXVlcnlQ
        YXJhbXMpIHsKICAgICAgICAgIG91dHB1dCArPSB0aGlzLmdlbmVyYXRlUXVl
        cnlTdHJpbmcocGFyYW1zLnF1ZXJ5UGFyYW1zLCByb3V0ZS5oYW5kbGVycyk7
        CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gb3V0cHV0OwogICAgICB9LAoK
        ICAgICAgZ2VuZXJhdGVRdWVyeVN0cmluZzogZnVuY3Rpb24ocGFyYW1zLCBo
        YW5kbGVycykgewogICAgICAgIHZhciBwYWlycyA9IFtdOwogICAgICAgIHZh
        ciBrZXlzID0gW107CiAgICAgICAgZm9yKHZhciBrZXkgaW4gcGFyYW1zKSB7
        CiAgICAgICAgICBpZiAocGFyYW1zLmhhc093blByb3BlcnR5KGtleSkpIHsK
        ICAgICAgICAgICAga2V5cy5wdXNoKGtleSk7CiAgICAgICAgICB9CiAgICAg
        ICAgfQogICAgICAgIGtleXMuc29ydCgpOwogICAgICAgIGZvciAodmFyIGkg
        PSAwLCBsZW4gPSBrZXlzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7CiAgICAg
        ICAgICBrZXkgPSBrZXlzW2ldOwogICAgICAgICAgdmFyIHZhbHVlID0gcGFy
        YW1zW2tleV07CiAgICAgICAgICBpZiAodmFsdWUgPT09IGZhbHNlIHx8IHZh
        bHVlID09IG51bGwpIHsKICAgICAgICAgICAgY29udGludWU7CiAgICAgICAg
        ICB9CiAgICAgICAgICB2YXIgcGFpciA9IGtleTsKICAgICAgICAgIGlmIChp
        c0FycmF5KHZhbHVlKSkgewogICAgICAgICAgICBmb3IgKHZhciBqID0gMCwg
        bCA9IHZhbHVlLmxlbmd0aDsgaiA8IGw7IGorKykgewogICAgICAgICAgICAg
        IHZhciBhcnJheVBhaXIgPSBrZXkgKyAnW10nICsgJz0nICsgZW5jb2RlVVJJ
        Q29tcG9uZW50KHZhbHVlW2pdKTsKICAgICAgICAgICAgICBwYWlycy5wdXNo
        KGFycmF5UGFpcik7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAg
        ICAgIGVsc2UgaWYgKHZhbHVlICE9PSB0cnVlKSB7CiAgICAgICAgICAgIHBh
        aXIgKz0gIj0iICsgZW5jb2RlVVJJQ29tcG9uZW50KHZhbHVlKTsKICAgICAg
        ICAgICAgcGFpcnMucHVzaChwYWlyKTsKICAgICAgICAgIH0gZWxzZSB7CiAg
        ICAgICAgICAgIHBhaXJzLnB1c2gocGFpcik7CiAgICAgICAgICB9CiAgICAg
        ICAgfQoKICAgICAgICBpZiAocGFpcnMubGVuZ3RoID09PSAwKSB7IHJldHVy
        biAnJzsgfQoKICAgICAgICByZXR1cm4gIj8iICsgcGFpcnMuam9pbigiJiIp
        OwogICAgICB9LAoKICAgICAgcGFyc2VRdWVyeVN0cmluZzogZnVuY3Rpb24o
        cXVlcnlTdHJpbmcpIHsKICAgICAgICB2YXIgcGFpcnMgPSBxdWVyeVN0cmlu
        Zy5zcGxpdCgiJiIpLCBxdWVyeVBhcmFtcyA9IHt9OwogICAgICAgIGZvcih2
        YXIgaT0wOyBpIDwgcGFpcnMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIHZh
        ciBwYWlyICAgICAgPSBwYWlyc1tpXS5zcGxpdCgnPScpLAogICAgICAgICAg
        ICAgIGtleSAgICAgICA9IGRlY29kZVVSSUNvbXBvbmVudChwYWlyWzBdKSwK
        ICAgICAgICAgICAgICBrZXlMZW5ndGggPSBrZXkubGVuZ3RoLAogICAgICAg
        ICAgICAgIGlzQXJyYXkgPSBmYWxzZSwKICAgICAgICAgICAgICB2YWx1ZTsK
        ICAgICAgICAgIGlmIChwYWlyLmxlbmd0aCA9PT0gMSkgewogICAgICAgICAg
        ICB2YWx1ZSA9IHRydWU7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAg
        ICAvL0hhbmRsZSBhcnJheXMKICAgICAgICAgICAgaWYgKGtleUxlbmd0aCA+
        IDIgJiYga2V5LnNsaWNlKGtleUxlbmd0aCAtMikgPT09ICdbXScpIHsKICAg
        ICAgICAgICAgICBpc0FycmF5ID0gdHJ1ZTsKICAgICAgICAgICAgICBrZXkg
        PSBrZXkuc2xpY2UoMCwga2V5TGVuZ3RoIC0gMik7CiAgICAgICAgICAgICAg
        aWYoIXF1ZXJ5UGFyYW1zW2tleV0pIHsKICAgICAgICAgICAgICAgIHF1ZXJ5
        UGFyYW1zW2tleV0gPSBbXTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAg
        IH0KICAgICAgICAgICAgdmFsdWUgPSBwYWlyWzFdID8gZGVjb2RlVVJJQ29t
        cG9uZW50KHBhaXJbMV0pIDogJyc7CiAgICAgICAgICB9CiAgICAgICAgICBp
        ZiAoaXNBcnJheSkgewogICAgICAgICAgICBxdWVyeVBhcmFtc1trZXldLnB1
        c2godmFsdWUpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcXVl
        cnlQYXJhbXNba2V5XSA9IHZhbHVlOwogICAgICAgICAgfQoKICAgICAgICB9
        CiAgICAgICAgcmV0dXJuIHF1ZXJ5UGFyYW1zOwogICAgICB9LAoKICAgICAg
        cmVjb2duaXplOiBmdW5jdGlvbihwYXRoKSB7CiAgICAgICAgdmFyIHN0YXRl
        cyA9IFsgdGhpcy5yb290U3RhdGUgXSwKICAgICAgICAgICAgcGF0aExlbiwg
        aSwgbCwgcXVlcnlTdGFydCwgcXVlcnlQYXJhbXMgPSB7fSwKICAgICAgICAg
        ICAgaXNTbGFzaERyb3BwZWQgPSBmYWxzZTsKCiAgICAgICAgcGF0aCA9IGRl
        Y29kZVVSSShwYXRoKTsKCiAgICAgICAgcXVlcnlTdGFydCA9IHBhdGguaW5k
        ZXhPZignPycpOwogICAgICAgIGlmIChxdWVyeVN0YXJ0ICE9PSAtMSkgewog
        ICAgICAgICAgdmFyIHF1ZXJ5U3RyaW5nID0gcGF0aC5zdWJzdHIocXVlcnlT
        dGFydCArIDEsIHBhdGgubGVuZ3RoKTsKICAgICAgICAgIHBhdGggPSBwYXRo
        LnN1YnN0cigwLCBxdWVyeVN0YXJ0KTsKICAgICAgICAgIHF1ZXJ5UGFyYW1z
        ID0gdGhpcy5wYXJzZVF1ZXJ5U3RyaW5nKHF1ZXJ5U3RyaW5nKTsKICAgICAg
        ICB9CgogICAgICAgIC8vIERFQlVHIEdST1VQIHBhdGgKCiAgICAgICAgaWYg
        KHBhdGguY2hhckF0KDApICE9PSAiLyIpIHsgcGF0aCA9ICIvIiArIHBhdGg7
        IH0KCiAgICAgICAgcGF0aExlbiA9IHBhdGgubGVuZ3RoOwogICAgICAgIGlm
        IChwYXRoTGVuID4gMSAmJiBwYXRoLmNoYXJBdChwYXRoTGVuIC0gMSkgPT09
        ICIvIikgewogICAgICAgICAgcGF0aCA9IHBhdGguc3Vic3RyKDAsIHBhdGhM
        ZW4gLSAxKTsKICAgICAgICAgIGlzU2xhc2hEcm9wcGVkID0gdHJ1ZTsKICAg
        ICAgICB9CgogICAgICAgIGZvciAoaT0wLCBsPXBhdGgubGVuZ3RoOyBpPGw7
        IGkrKykgewogICAgICAgICAgc3RhdGVzID0gcmVjb2duaXplQ2hhcihzdGF0
        ZXMsIHBhdGguY2hhckF0KGkpKTsKICAgICAgICAgIGlmICghc3RhdGVzLmxl
        bmd0aCkgeyBicmVhazsgfQogICAgICAgIH0KCiAgICAgICAgLy8gRU5EIERF
        QlVHIEdST1VQCgogICAgICAgIHZhciBzb2x1dGlvbnMgPSBbXTsKICAgICAg
        ICBmb3IgKGk9MCwgbD1zdGF0ZXMubGVuZ3RoOyBpPGw7IGkrKykgewogICAg
        ICAgICAgaWYgKHN0YXRlc1tpXS5oYW5kbGVycykgeyBzb2x1dGlvbnMucHVz
        aChzdGF0ZXNbaV0pOyB9CiAgICAgICAgfQoKICAgICAgICBzdGF0ZXMgPSBz
        b3J0U29sdXRpb25zKHNvbHV0aW9ucyk7CgogICAgICAgIHZhciBzdGF0ZSA9
        IHNvbHV0aW9uc1swXTsKCiAgICAgICAgaWYgKHN0YXRlICYmIHN0YXRlLmhh
        bmRsZXJzKSB7CiAgICAgICAgICAvLyBpZiBhIHRyYWlsaW5nIHNsYXNoIHdh
        cyBkcm9wcGVkIGFuZCBhIHN0YXIgc2VnbWVudCBpcyB0aGUgbGFzdCBzZWdt
        ZW50CiAgICAgICAgICAvLyBzcGVjaWZpZWQsIHB1dCB0aGUgdHJhaWxpbmcg
        c2xhc2ggYmFjawogICAgICAgICAgaWYgKGlzU2xhc2hEcm9wcGVkICYmIHN0
        YXRlLnJlZ2V4LnNvdXJjZS5zbGljZSgtNSkgPT09ICIoLispJCIpIHsKICAg
        ICAgICAgICAgcGF0aCA9IHBhdGggKyAiLyI7CiAgICAgICAgICB9CiAgICAg
        ICAgICByZXR1cm4gZmluZEhhbmRsZXIoc3RhdGUsIHBhdGgsIHF1ZXJ5UGFy
        YW1zKTsKICAgICAgICB9CiAgICAgIH0KICAgIH07CgogICAgX19leHBvcnRz
        X19bImRlZmF1bHQiXSA9IFJvdXRlUmVjb2duaXplcjsKCiAgICBmdW5jdGlv
        biBUYXJnZXQocGF0aCwgbWF0Y2hlciwgZGVsZWdhdGUpIHsKICAgICAgdGhp
        cy5wYXRoID0gcGF0aDsKICAgICAgdGhpcy5tYXRjaGVyID0gbWF0Y2hlcjsK
        ICAgICAgdGhpcy5kZWxlZ2F0ZSA9IGRlbGVnYXRlOwogICAgfQoKICAgIFRh
        cmdldC5wcm90b3R5cGUgPSB7CiAgICAgIHRvOiBmdW5jdGlvbih0YXJnZXQs
        IGNhbGxiYWNrKSB7CiAgICAgICAgdmFyIGRlbGVnYXRlID0gdGhpcy5kZWxl
        Z2F0ZTsKCiAgICAgICAgaWYgKGRlbGVnYXRlICYmIGRlbGVnYXRlLndpbGxB
        ZGRSb3V0ZSkgewogICAgICAgICAgdGFyZ2V0ID0gZGVsZWdhdGUud2lsbEFk
        ZFJvdXRlKHRoaXMubWF0Y2hlci50YXJnZXQsIHRhcmdldCk7CiAgICAgICAg
        fQoKICAgICAgICB0aGlzLm1hdGNoZXIuYWRkKHRoaXMucGF0aCwgdGFyZ2V0
        KTsKCiAgICAgICAgaWYgKGNhbGxiYWNrKSB7CiAgICAgICAgICBpZiAoY2Fs
        bGJhY2subGVuZ3RoID09PSAwKSB7IHRocm93IG5ldyBFcnJvcigiWW91IG11
        c3QgaGF2ZSBhbiBhcmd1bWVudCBpbiB0aGUgZnVuY3Rpb24gcGFzc2VkIHRv
        IGB0b2AiKTsgfQogICAgICAgICAgdGhpcy5tYXRjaGVyLmFkZENoaWxkKHRo
        aXMucGF0aCwgdGFyZ2V0LCBjYWxsYmFjaywgdGhpcy5kZWxlZ2F0ZSk7CiAg
        ICAgICAgfQogICAgICAgIHJldHVybiB0aGlzOwogICAgICB9CiAgICB9OwoK
        ICAgIGZ1bmN0aW9uIE1hdGNoZXIodGFyZ2V0KSB7CiAgICAgIHRoaXMucm91
        dGVzID0ge307CiAgICAgIHRoaXMuY2hpbGRyZW4gPSB7fTsKICAgICAgdGhp
        cy50YXJnZXQgPSB0YXJnZXQ7CiAgICB9CgogICAgTWF0Y2hlci5wcm90b3R5
        cGUgPSB7CiAgICAgIGFkZDogZnVuY3Rpb24ocGF0aCwgaGFuZGxlcikgewog
        ICAgICAgIHRoaXMucm91dGVzW3BhdGhdID0gaGFuZGxlcjsKICAgICAgfSwK
        CiAgICAgIGFkZENoaWxkOiBmdW5jdGlvbihwYXRoLCB0YXJnZXQsIGNhbGxi
        YWNrLCBkZWxlZ2F0ZSkgewogICAgICAgIHZhciBtYXRjaGVyID0gbmV3IE1h
        dGNoZXIodGFyZ2V0KTsKICAgICAgICB0aGlzLmNoaWxkcmVuW3BhdGhdID0g
        bWF0Y2hlcjsKCiAgICAgICAgdmFyIG1hdGNoID0gZ2VuZXJhdGVNYXRjaChw
        YXRoLCBtYXRjaGVyLCBkZWxlZ2F0ZSk7CgogICAgICAgIGlmIChkZWxlZ2F0
        ZSAmJiBkZWxlZ2F0ZS5jb250ZXh0RW50ZXJlZCkgewogICAgICAgICAgZGVs
        ZWdhdGUuY29udGV4dEVudGVyZWQodGFyZ2V0LCBtYXRjaCk7CiAgICAgICAg
        fQoKICAgICAgICBjYWxsYmFjayhtYXRjaCk7CiAgICAgIH0KICAgIH07Cgog
        ICAgZnVuY3Rpb24gZ2VuZXJhdGVNYXRjaChzdGFydGluZ1BhdGgsIG1hdGNo
        ZXIsIGRlbGVnYXRlKSB7CiAgICAgIHJldHVybiBmdW5jdGlvbihwYXRoLCBu
        ZXN0ZWRDYWxsYmFjaykgewogICAgICAgIHZhciBmdWxsUGF0aCA9IHN0YXJ0
        aW5nUGF0aCArIHBhdGg7CgogICAgICAgIGlmIChuZXN0ZWRDYWxsYmFjaykg
        ewogICAgICAgICAgbmVzdGVkQ2FsbGJhY2soZ2VuZXJhdGVNYXRjaChmdWxs
        UGF0aCwgbWF0Y2hlciwgZGVsZWdhdGUpKTsKICAgICAgICB9IGVsc2Ugewog
        ICAgICAgICAgcmV0dXJuIG5ldyBUYXJnZXQoc3RhcnRpbmdQYXRoICsgcGF0
        aCwgbWF0Y2hlciwgZGVsZWdhdGUpOwogICAgICAgIH0KICAgICAgfTsKICAg
        IH0KCiAgICBmdW5jdGlvbiBhZGRSb3V0ZShyb3V0ZUFycmF5LCBwYXRoLCBo
        YW5kbGVyKSB7CiAgICAgIHZhciBsZW4gPSAwOwogICAgICBmb3IgKHZhciBp
        PTAsIGw9cm91dGVBcnJheS5sZW5ndGg7IGk8bDsgaSsrKSB7CiAgICAgICAg
        bGVuICs9IHJvdXRlQXJyYXlbaV0ucGF0aC5sZW5ndGg7CiAgICAgIH0KCiAg
        ICAgIHBhdGggPSBwYXRoLnN1YnN0cihsZW4pOwogICAgICB2YXIgcm91dGUg
        PSB7IHBhdGg6IHBhdGgsIGhhbmRsZXI6IGhhbmRsZXIgfTsKICAgICAgcm91
        dGVBcnJheS5wdXNoKHJvdXRlKTsKICAgIH0KCiAgICBmdW5jdGlvbiBlYWNo
        Um91dGUoYmFzZVJvdXRlLCBtYXRjaGVyLCBjYWxsYmFjaywgYmluZGluZykg
        ewogICAgICB2YXIgcm91dGVzID0gbWF0Y2hlci5yb3V0ZXM7CgogICAgICBm
        b3IgKHZhciBwYXRoIGluIHJvdXRlcykgewogICAgICAgIGlmIChyb3V0ZXMu
        aGFzT3duUHJvcGVydHkocGF0aCkpIHsKICAgICAgICAgIHZhciByb3V0ZUFy
        cmF5ID0gYmFzZVJvdXRlLnNsaWNlKCk7CiAgICAgICAgICBhZGRSb3V0ZShy
        b3V0ZUFycmF5LCBwYXRoLCByb3V0ZXNbcGF0aF0pOwoKICAgICAgICAgIGlm
        IChtYXRjaGVyLmNoaWxkcmVuW3BhdGhdKSB7CiAgICAgICAgICAgIGVhY2hS
        b3V0ZShyb3V0ZUFycmF5LCBtYXRjaGVyLmNoaWxkcmVuW3BhdGhdLCBjYWxs
        YmFjaywgYmluZGluZyk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAg
        ICBjYWxsYmFjay5jYWxsKGJpbmRpbmcsIHJvdXRlQXJyYXkpOwogICAgICAg
        ICAgfQogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIFJvdXRlUmVjb2du
        aXplci5wcm90b3R5cGUubWFwID0gZnVuY3Rpb24oY2FsbGJhY2ssIGFkZFJv
        dXRlQ2FsbGJhY2spIHsKICAgICAgdmFyIG1hdGNoZXIgPSBuZXcgTWF0Y2hl
        cigpOwoKICAgICAgY2FsbGJhY2soZ2VuZXJhdGVNYXRjaCgiIiwgbWF0Y2hl
        ciwgdGhpcy5kZWxlZ2F0ZSkpOwoKICAgICAgZWFjaFJvdXRlKFtdLCBtYXRj
        aGVyLCBmdW5jdGlvbihyb3V0ZSkgewogICAgICAgIGlmIChhZGRSb3V0ZUNh
        bGxiYWNrKSB7IGFkZFJvdXRlQ2FsbGJhY2sodGhpcywgcm91dGUpOyB9CiAg
        ICAgICAgZWxzZSB7IHRoaXMuYWRkKHJvdXRlKTsgfQogICAgICB9LCB0aGlz
        KTsKICAgIH07CiAgfSk7Cgp9KSgpOwoKCgooZnVuY3Rpb24oKSB7CmRlZmlu
        ZSgicm91dGVyL2hhbmRsZXItaW5mbyIsIAogIFsiLi91dGlscyIsInJzdnAi
        LCJleHBvcnRzIl0sCiAgZnVuY3Rpb24oX19kZXBlbmRlbmN5MV9fLCBfX2Rl
        cGVuZGVuY3kyX18sIF9fZXhwb3J0c19fKSB7CiAgICAidXNlIHN0cmljdCI7
        CiAgICB2YXIgYmluZCA9IF9fZGVwZW5kZW5jeTFfXy5iaW5kOwogICAgdmFy
        IG1lcmdlID0gX19kZXBlbmRlbmN5MV9fLm1lcmdlOwogICAgdmFyIG9DcmVh
        dGUgPSBfX2RlcGVuZGVuY3kxX18ub0NyZWF0ZTsKICAgIHZhciBzZXJpYWxp
        emUgPSBfX2RlcGVuZGVuY3kxX18uc2VyaWFsaXplOwogICAgdmFyIHByb21p
        c2VMYWJlbCA9IF9fZGVwZW5kZW5jeTFfXy5wcm9taXNlTGFiZWw7CiAgICB2
        YXIgcmVzb2x2ZSA9IF9fZGVwZW5kZW5jeTJfXy5yZXNvbHZlOwoKICAgIGZ1
        bmN0aW9uIEhhbmRsZXJJbmZvKHByb3BzKSB7CiAgICAgIGlmIChwcm9wcykg
        ewogICAgICAgIG1lcmdlKHRoaXMsIHByb3BzKTsKICAgICAgfQogICAgfQoK
        ICAgIEhhbmRsZXJJbmZvLnByb3RvdHlwZSA9IHsKICAgICAgbmFtZTogbnVs
        bCwKICAgICAgaGFuZGxlcjogbnVsbCwKICAgICAgcGFyYW1zOiBudWxsLAog
        ICAgICBjb250ZXh0OiBudWxsLAoKICAgICAgbG9nOiBmdW5jdGlvbihwYXls
        b2FkLCBtZXNzYWdlKSB7CiAgICAgICAgaWYgKHBheWxvYWQubG9nKSB7CiAg
        ICAgICAgICBwYXlsb2FkLmxvZyh0aGlzLm5hbWUgKyAnOiAnICsgbWVzc2Fn
        ZSk7CiAgICAgICAgfQogICAgICB9LAoKICAgICAgcHJvbWlzZUxhYmVsOiBm
        dW5jdGlvbihsYWJlbCkgewogICAgICAgIHJldHVybiBwcm9taXNlTGFiZWwo
        IiciICsgdGhpcy5uYW1lICsgIicgIiArIGxhYmVsKTsKICAgICAgfSwKCiAg
        ICAgIHJlc29sdmU6IGZ1bmN0aW9uKGFzeW5jLCBzaG91bGRDb250aW51ZSwg
        cGF5bG9hZCkgewogICAgICAgIHZhciBjaGVja0ZvckFib3J0ICA9IGJpbmQo
        dGhpcy5jaGVja0ZvckFib3J0LCAgICAgIHRoaXMsIHNob3VsZENvbnRpbnVl
        KSwKICAgICAgICAgICAgYmVmb3JlTW9kZWwgICAgPSBiaW5kKHRoaXMucnVu
        QmVmb3JlTW9kZWxIb29rLCB0aGlzLCBhc3luYywgcGF5bG9hZCksCiAgICAg
        ICAgICAgIG1vZGVsICAgICAgICAgID0gYmluZCh0aGlzLmdldE1vZGVsLCAg
        ICAgICAgICAgdGhpcywgYXN5bmMsIHBheWxvYWQpLAogICAgICAgICAgICBh
        ZnRlck1vZGVsICAgICA9IGJpbmQodGhpcy5ydW5BZnRlck1vZGVsSG9vaywg
        IHRoaXMsIGFzeW5jLCBwYXlsb2FkKSwKICAgICAgICAgICAgYmVjb21lUmVz
        b2x2ZWQgPSBiaW5kKHRoaXMuYmVjb21lUmVzb2x2ZWQsICAgICB0aGlzLCBw
        YXlsb2FkKTsKCiAgICAgICAgcmV0dXJuIHJlc29sdmUodW5kZWZpbmVkLCB0
        aGlzLnByb21pc2VMYWJlbCgiU3RhcnQgaGFuZGxlciIpKQogICAgICAgICAg
        ICAgICAudGhlbihjaGVja0ZvckFib3J0LCBudWxsLCB0aGlzLnByb21pc2VM
        YWJlbCgiQ2hlY2sgZm9yIGFib3J0IikpCiAgICAgICAgICAgICAgIC50aGVu
        KGJlZm9yZU1vZGVsLCBudWxsLCB0aGlzLnByb21pc2VMYWJlbCgiQmVmb3Jl
        IG1vZGVsIikpCiAgICAgICAgICAgICAgIC50aGVuKGNoZWNrRm9yQWJvcnQs
        IG51bGwsIHRoaXMucHJvbWlzZUxhYmVsKCJDaGVjayBpZiBhYm9ydGVkIGR1
        cmluZyAnYmVmb3JlTW9kZWwnIGhvb2siKSkKICAgICAgICAgICAgICAgLnRo
        ZW4obW9kZWwsIG51bGwsIHRoaXMucHJvbWlzZUxhYmVsKCJNb2RlbCIpKQog
        ICAgICAgICAgICAgICAudGhlbihjaGVja0ZvckFib3J0LCBudWxsLCB0aGlz
        LnByb21pc2VMYWJlbCgiQ2hlY2sgaWYgYWJvcnRlZCBpbiAnbW9kZWwnIGhv
        b2siKSkKICAgICAgICAgICAgICAgLnRoZW4oYWZ0ZXJNb2RlbCwgbnVsbCwg
        dGhpcy5wcm9taXNlTGFiZWwoIkFmdGVyIG1vZGVsIikpCiAgICAgICAgICAg
        ICAgIC50aGVuKGNoZWNrRm9yQWJvcnQsIG51bGwsIHRoaXMucHJvbWlzZUxh
        YmVsKCJDaGVjayBpZiBhYm9ydGVkIGluICdhZnRlck1vZGVsJyBob29rIikp
        CiAgICAgICAgICAgICAgIC50aGVuKGJlY29tZVJlc29sdmVkLCBudWxsLCB0
        aGlzLnByb21pc2VMYWJlbCgiQmVjb21lIHJlc29sdmVkIikpOwogICAgICB9
        LAoKICAgICAgcnVuQmVmb3JlTW9kZWxIb29rOiBmdW5jdGlvbihhc3luYywg
        cGF5bG9hZCkgewogICAgICAgIGlmIChwYXlsb2FkLnRyaWdnZXIpIHsKICAg
        ICAgICAgIHBheWxvYWQudHJpZ2dlcih0cnVlLCAnd2lsbFJlc29sdmVNb2Rl
        bCcsIHBheWxvYWQsIHRoaXMuaGFuZGxlcik7CiAgICAgICAgfQogICAgICAg
        IHJldHVybiB0aGlzLnJ1blNoYXJlZE1vZGVsSG9vayhhc3luYywgcGF5bG9h
        ZCwgJ2JlZm9yZU1vZGVsJywgW10pOwogICAgICB9LAoKICAgICAgcnVuQWZ0
        ZXJNb2RlbEhvb2s6IGZ1bmN0aW9uKGFzeW5jLCBwYXlsb2FkLCByZXNvbHZl
        ZE1vZGVsKSB7CiAgICAgICAgLy8gU3Rhc2ggdGhlIHJlc29sdmVkIG1vZGVs
        IG9uIHRoZSBwYXlsb2FkLgogICAgICAgIC8vIFRoaXMgbWFrZXMgaXQgcG9z
        c2libGUgZm9yIHVzZXJzIHRvIHN3YXAgb3V0CiAgICAgICAgLy8gdGhlIHJl
        c29sdmVkIG1vZGVsIGluIGFmdGVyTW9kZWwuCiAgICAgICAgdmFyIG5hbWUg
        PSB0aGlzLm5hbWU7CiAgICAgICAgdGhpcy5zdGFzaFJlc29sdmVkTW9kZWwo
        cGF5bG9hZCwgcmVzb2x2ZWRNb2RlbCk7CgogICAgICAgIHJldHVybiB0aGlz
        LnJ1blNoYXJlZE1vZGVsSG9vayhhc3luYywgcGF5bG9hZCwgJ2FmdGVyTW9k
        ZWwnLCBbcmVzb2x2ZWRNb2RlbF0pCiAgICAgICAgICAgICAgICAgICAudGhl
        bihmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgLy8gSWdub3Jl
        IHRoZSBmdWxmaWxsZWQgdmFsdWUgcmV0dXJuZWQgZnJvbSBhZnRlck1vZGVs
        LgogICAgICAgICAgICAgICAgICAgICAvLyBSZXR1cm4gdGhlIHZhbHVlIHN0
        YXNoZWQgaW4gcmVzb2x2ZWRNb2RlbHMsIHdoaWNoCiAgICAgICAgICAgICAg
        ICAgICAgIC8vIG1pZ2h0IGhhdmUgYmVlbiBzd2FwcGVkIG91dCBpbiBhZnRl
        ck1vZGVsLgogICAgICAgICAgICAgICAgICAgICByZXR1cm4gcGF5bG9hZC5y
        ZXNvbHZlZE1vZGVsc1tuYW1lXTsKICAgICAgICAgICAgICAgICAgIH0sIG51
        bGwsIHRoaXMucHJvbWlzZUxhYmVsKCJJZ25vcmUgZnVsZmlsbG1lbnQgdmFs
        dWUgYW5kIHJldHVybiBtb2RlbCB2YWx1ZSIpKTsKICAgICAgfSwKCiAgICAg
        IHJ1blNoYXJlZE1vZGVsSG9vazogZnVuY3Rpb24oYXN5bmMsIHBheWxvYWQs
        IGhvb2tOYW1lLCBhcmdzKSB7CiAgICAgICAgdGhpcy5sb2cocGF5bG9hZCwg
        ImNhbGxpbmcgIiArIGhvb2tOYW1lICsgIiBob29rIik7CgogICAgICAgIGlm
        ICh0aGlzLnF1ZXJ5UGFyYW1zKSB7CiAgICAgICAgICBhcmdzLnB1c2godGhp
        cy5xdWVyeVBhcmFtcyk7CiAgICAgICAgfQogICAgICAgIGFyZ3MucHVzaChw
        YXlsb2FkKTsKCiAgICAgICAgdmFyIGhhbmRsZXIgPSB0aGlzLmhhbmRsZXI7
        CiAgICAgICAgcmV0dXJuIGFzeW5jKGZ1bmN0aW9uKCkgewogICAgICAgICAg
        cmV0dXJuIGhhbmRsZXJbaG9va05hbWVdICYmIGhhbmRsZXJbaG9va05hbWVd
        LmFwcGx5KGhhbmRsZXIsIGFyZ3MpOwogICAgICAgIH0sIHRoaXMucHJvbWlz
        ZUxhYmVsKCJIYW5kbGUgIiArIGhvb2tOYW1lKSk7CiAgICAgIH0sCgogICAg
        ICBnZXRNb2RlbDogZnVuY3Rpb24ocGF5bG9hZCkgewogICAgICAgIHRocm93
        IG5ldyBFcnJvcigiVGhpcyBzaG91bGQgYmUgb3ZlcnJpZGRlbiBieSBhIHN1
        YmNsYXNzIG9mIEhhbmRsZXJJbmZvIik7CiAgICAgIH0sCgogICAgICBjaGVj
        a0ZvckFib3J0OiBmdW5jdGlvbihzaG91bGRDb250aW51ZSwgcHJvbWlzZVZh
        bHVlKSB7CiAgICAgICAgcmV0dXJuIHJlc29sdmUoc2hvdWxkQ29udGludWUo
        KSwgdGhpcy5wcm9taXNlTGFiZWwoIkNoZWNrIGZvciBhYm9ydCIpKS50aGVu
        KGZ1bmN0aW9uKCkgewogICAgICAgICAgLy8gV2UgZG9uJ3QgY2FyZSBhYm91
        dCBzaG91bGRDb250aW51ZSdzIHJlc29sdmUgdmFsdWU7CiAgICAgICAgICAv
        LyBwYXNzIGFsb25nIHRoZSBvcmlnaW5hbCB2YWx1ZSBwYXNzZWQgdG8gdGhp
        cyBmbi4KICAgICAgICAgIHJldHVybiBwcm9taXNlVmFsdWU7CiAgICAgICAg
        fSwgbnVsbCwgdGhpcy5wcm9taXNlTGFiZWwoIklnbm9yZSBmdWxmaWxsbWVu
        dCB2YWx1ZSBhbmQgY29udGludWUiKSk7CiAgICAgIH0sCgogICAgICBzdGFz
        aFJlc29sdmVkTW9kZWw6IGZ1bmN0aW9uKHBheWxvYWQsIHJlc29sdmVkTW9k
        ZWwpIHsKICAgICAgICBwYXlsb2FkLnJlc29sdmVkTW9kZWxzID0gcGF5bG9h
        ZC5yZXNvbHZlZE1vZGVscyB8fCB7fTsKICAgICAgICBwYXlsb2FkLnJlc29s
        dmVkTW9kZWxzW3RoaXMubmFtZV0gPSByZXNvbHZlZE1vZGVsOwogICAgICB9
        LAoKICAgICAgYmVjb21lUmVzb2x2ZWQ6IGZ1bmN0aW9uKHBheWxvYWQsIHJl
        c29sdmVkQ29udGV4dCkgewogICAgICAgIHZhciBwYXJhbXMgPSB0aGlzLnBh
        cmFtcyB8fCBzZXJpYWxpemUodGhpcy5oYW5kbGVyLCByZXNvbHZlZENvbnRl
        eHQsIHRoaXMubmFtZXMpOwoKICAgICAgICBpZiAocGF5bG9hZCkgewogICAg
        ICAgICAgdGhpcy5zdGFzaFJlc29sdmVkTW9kZWwocGF5bG9hZCwgcmVzb2x2
        ZWRDb250ZXh0KTsKICAgICAgICAgIHBheWxvYWQucGFyYW1zID0gcGF5bG9h
        ZC5wYXJhbXMgfHwge307CiAgICAgICAgICBwYXlsb2FkLnBhcmFtc1t0aGlz
        Lm5hbWVdID0gcGFyYW1zOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIG5l
        dyBSZXNvbHZlZEhhbmRsZXJJbmZvKHsKICAgICAgICAgIGNvbnRleHQ6IHJl
        c29sdmVkQ29udGV4dCwKICAgICAgICAgIG5hbWU6IHRoaXMubmFtZSwKICAg
        ICAgICAgIGhhbmRsZXI6IHRoaXMuaGFuZGxlciwKICAgICAgICAgIHBhcmFt
        czogcGFyYW1zCiAgICAgICAgfSk7CiAgICAgIH0sCgogICAgICBzaG91bGRT
        dXBlcmNlZGU6IGZ1bmN0aW9uKG90aGVyKSB7CiAgICAgICAgLy8gUHJlZmVy
        IHRoaXMgbmV3ZXIgaGFuZGxlckluZm8gb3ZlciBgb3RoZXJgIGlmOgogICAg
        ICAgIC8vIDEpIFRoZSBvdGhlciBvbmUgZG9lc24ndCBleGlzdAogICAgICAg
        IC8vIDIpIFRoZSBuYW1lcyBkb24ndCBtYXRjaAogICAgICAgIC8vIDMpIFRo
        aXMgaGFuZGxlciBoYXMgYSBjb250ZXh0IHRoYXQgZG9lc24ndCBtYXRjaAog
        ICAgICAgIC8vICAgIHRoZSBvdGhlciBvbmUgKG9yIHRoZSBvdGhlciBvbmUg
        ZG9lc24ndCBoYXZlIG9uZSkuCiAgICAgICAgLy8gNCkgVGhpcyBoYW5kbGVy
        IGhhcyBwYXJhbWV0ZXJzIHRoYXQgZG9uJ3QgbWF0Y2ggdGhlIG90aGVyLgog
        ICAgICAgIGlmICghb3RoZXIpIHsgcmV0dXJuIHRydWU7IH0KCiAgICAgICAg
        dmFyIGNvbnRleHRzTWF0Y2ggPSAob3RoZXIuY29udGV4dCA9PT0gdGhpcy5j
        b250ZXh0KTsKICAgICAgICByZXR1cm4gb3RoZXIubmFtZSAhPT0gdGhpcy5u
        YW1lIHx8CiAgICAgICAgICAgICAgICh0aGlzLmhhc093blByb3BlcnR5KCdj
        b250ZXh0JykgJiYgIWNvbnRleHRzTWF0Y2gpIHx8CiAgICAgICAgICAgICAg
        ICh0aGlzLmhhc093blByb3BlcnR5KCdwYXJhbXMnKSAmJiAhcGFyYW1zTWF0
        Y2godGhpcy5wYXJhbXMsIG90aGVyLnBhcmFtcykpOwogICAgICB9CiAgICB9
        OwoKICAgIGZ1bmN0aW9uIFJlc29sdmVkSGFuZGxlckluZm8ocHJvcHMpIHsK
        ICAgICAgSGFuZGxlckluZm8uY2FsbCh0aGlzLCBwcm9wcyk7CiAgICB9Cgog
        ICAgUmVzb2x2ZWRIYW5kbGVySW5mby5wcm90b3R5cGUgPSBvQ3JlYXRlKEhh
        bmRsZXJJbmZvLnByb3RvdHlwZSk7CiAgICBSZXNvbHZlZEhhbmRsZXJJbmZv
        LnByb3RvdHlwZS5yZXNvbHZlID0gZnVuY3Rpb24oYXN5bmMsIHNob3VsZENv
        bnRpbnVlLCBwYXlsb2FkKSB7CiAgICAgIC8vIEEgUmVzb2x2ZWRIYW5kbGVy
        SW5mbyBqdXN0IHJlc29sdmVkIHdpdGggaXRzZWxmLgogICAgICBpZiAocGF5
        bG9hZCAmJiBwYXlsb2FkLnJlc29sdmVkTW9kZWxzKSB7CiAgICAgICAgcGF5
        bG9hZC5yZXNvbHZlZE1vZGVsc1t0aGlzLm5hbWVdID0gdGhpcy5jb250ZXh0
        OwogICAgICB9CiAgICAgIHJldHVybiByZXNvbHZlKHRoaXMsIHRoaXMucHJv
        bWlzZUxhYmVsKCJSZXNvbHZlIikpOwogICAgfTsKCiAgICAvLyBUaGVzZSBh
        cmUgZ2VuZXJhdGVkIGJ5IFVSTCB0cmFuc2l0aW9ucyBhbmQKICAgIC8vIG5h
        bWVkIHRyYW5zaXRpb25zIGZvciBub24tZHluYW1pYyByb3V0ZSBzZWdtZW50
        cy4KICAgIGZ1bmN0aW9uIFVucmVzb2x2ZWRIYW5kbGVySW5mb0J5UGFyYW0o
        cHJvcHMpIHsKICAgICAgSGFuZGxlckluZm8uY2FsbCh0aGlzLCBwcm9wcyk7
        CiAgICAgIHRoaXMucGFyYW1zID0gdGhpcy5wYXJhbXMgfHwge307CiAgICB9
        CgogICAgVW5yZXNvbHZlZEhhbmRsZXJJbmZvQnlQYXJhbS5wcm90b3R5cGUg
        PSBvQ3JlYXRlKEhhbmRsZXJJbmZvLnByb3RvdHlwZSk7CiAgICBVbnJlc29s
        dmVkSGFuZGxlckluZm9CeVBhcmFtLnByb3RvdHlwZS5nZXRNb2RlbCA9IGZ1
        bmN0aW9uKGFzeW5jLCBwYXlsb2FkKSB7CiAgICAgIHZhciBmdWxsUGFyYW1z
        ID0gdGhpcy5wYXJhbXM7CiAgICAgIGlmIChwYXlsb2FkICYmIHBheWxvYWQu
        cXVlcnlQYXJhbXMpIHsKICAgICAgICBmdWxsUGFyYW1zID0ge307CiAgICAg
        ICAgbWVyZ2UoZnVsbFBhcmFtcywgdGhpcy5wYXJhbXMpOwogICAgICAgIGZ1
        bGxQYXJhbXMucXVlcnlQYXJhbXMgPSBwYXlsb2FkLnF1ZXJ5UGFyYW1zOwog
        ICAgICB9CgogICAgICB2YXIgaG9va05hbWUgPSB0eXBlb2YgdGhpcy5oYW5k
        bGVyLmRlc2VyaWFsaXplID09PSAnZnVuY3Rpb24nID8KICAgICAgICAgICAg
        ICAgICAgICAgJ2Rlc2VyaWFsaXplJyA6ICdtb2RlbCc7CgogICAgICByZXR1
        cm4gdGhpcy5ydW5TaGFyZWRNb2RlbEhvb2soYXN5bmMsIHBheWxvYWQsIGhv
        b2tOYW1lLCBbZnVsbFBhcmFtc10pOwogICAgfTsKCgogICAgLy8gVGhlc2Ug
        YXJlIGdlbmVyYXRlZCBvbmx5IGZvciBuYW1lZCB0cmFuc2l0aW9ucwogICAg
        Ly8gd2l0aCBkeW5hbWljIHJvdXRlIHNlZ21lbnRzLgogICAgZnVuY3Rpb24g
        VW5yZXNvbHZlZEhhbmRsZXJJbmZvQnlPYmplY3QocHJvcHMpIHsKICAgICAg
        SGFuZGxlckluZm8uY2FsbCh0aGlzLCBwcm9wcyk7CiAgICB9CgogICAgVW5y
        ZXNvbHZlZEhhbmRsZXJJbmZvQnlPYmplY3QucHJvdG90eXBlID0gb0NyZWF0
        ZShIYW5kbGVySW5mby5wcm90b3R5cGUpOwogICAgVW5yZXNvbHZlZEhhbmRs
        ZXJJbmZvQnlPYmplY3QucHJvdG90eXBlLmdldE1vZGVsID0gZnVuY3Rpb24o
        YXN5bmMsIHBheWxvYWQpIHsKICAgICAgdGhpcy5sb2cocGF5bG9hZCwgdGhp
        cy5uYW1lICsgIjogcmVzb2x2aW5nIHByb3ZpZGVkIG1vZGVsIik7CiAgICAg
        IHJldHVybiByZXNvbHZlKHRoaXMuY29udGV4dCk7CiAgICB9OwoKICAgIGZ1
        bmN0aW9uIHBhcmFtc01hdGNoKGEsIGIpIHsKICAgICAgaWYgKCghYSkgXiAo
        IWIpKSB7CiAgICAgICAgLy8gT25seSBvbmUgaXMgbnVsbC4KICAgICAgICBy
        ZXR1cm4gZmFsc2U7CiAgICAgIH0KCiAgICAgIGlmICghYSkgewogICAgICAg
        IC8vIEJvdGggbXVzdCBiZSBudWxsLgogICAgICAgIHJldHVybiB0cnVlOwog
        ICAgICB9CgogICAgICAvLyBOb3RlOiB0aGlzIGFzc3VtZXMgdGhhdCBib3Ro
        IHBhcmFtcyBoYXZlIHRoZSBzYW1lCiAgICAgIC8vIG51bWJlciBvZiBrZXlz
        LCBidXQgc2luY2Ugd2UncmUgY29tcGFyaW5nIHRoZQogICAgICAvLyBzYW1l
        IGhhbmRsZXJzLCB0aGV5IHNob3VsZC4KICAgICAgZm9yICh2YXIgayBpbiBh
        KSB7CiAgICAgICAgaWYgKGEuaGFzT3duUHJvcGVydHkoaykgJiYgYVtrXSAh
        PT0gYltrXSkgewogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0K
        ICAgICAgfQogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBfX2V4cG9y
        dHNfXy5IYW5kbGVySW5mbyA9IEhhbmRsZXJJbmZvOwogICAgX19leHBvcnRz
        X18uUmVzb2x2ZWRIYW5kbGVySW5mbyA9IFJlc29sdmVkSGFuZGxlckluZm87
        CiAgICBfX2V4cG9ydHNfXy5VbnJlc29sdmVkSGFuZGxlckluZm9CeVBhcmFt
        ID0gVW5yZXNvbHZlZEhhbmRsZXJJbmZvQnlQYXJhbTsKICAgIF9fZXhwb3J0
        c19fLlVucmVzb2x2ZWRIYW5kbGVySW5mb0J5T2JqZWN0ID0gVW5yZXNvbHZl
        ZEhhbmRsZXJJbmZvQnlPYmplY3Q7CiAgfSk7CmRlZmluZSgicm91dGVyL3Jv
        dXRlciIsIAogIFsicm91dGUtcmVjb2duaXplciIsInJzdnAiLCIuL3V0aWxz
        IiwiLi90cmFuc2l0aW9uLXN0YXRlIiwiLi90cmFuc2l0aW9uIiwiLi90cmFu
        c2l0aW9uLWludGVudC9uYW1lZC10cmFuc2l0aW9uLWludGVudCIsIi4vdHJh
        bnNpdGlvbi1pbnRlbnQvdXJsLXRyYW5zaXRpb24taW50ZW50IiwiZXhwb3J0
        cyJdLAogIGZ1bmN0aW9uKF9fZGVwZW5kZW5jeTFfXywgX19kZXBlbmRlbmN5
        Ml9fLCBfX2RlcGVuZGVuY3kzX18sIF9fZGVwZW5kZW5jeTRfXywgX19kZXBl
        bmRlbmN5NV9fLCBfX2RlcGVuZGVuY3k2X18sIF9fZGVwZW5kZW5jeTdfXywg
        X19leHBvcnRzX18pIHsKICAgICJ1c2Ugc3RyaWN0IjsKICAgIHZhciBSb3V0
        ZVJlY29nbml6ZXIgPSBfX2RlcGVuZGVuY3kxX19bImRlZmF1bHQiXTsKICAg
        IHZhciByZXNvbHZlID0gX19kZXBlbmRlbmN5Ml9fLnJlc29sdmU7CiAgICB2
        YXIgcmVqZWN0ID0gX19kZXBlbmRlbmN5Ml9fLnJlamVjdDsKICAgIHZhciBh
        c3luYyA9IF9fZGVwZW5kZW5jeTJfXy5hc3luYzsKICAgIHZhciBQcm9taXNl
        ID0gX19kZXBlbmRlbmN5Ml9fLlByb21pc2U7CiAgICB2YXIgdHJpZ2dlciA9
        IF9fZGVwZW5kZW5jeTNfXy50cmlnZ2VyOwogICAgdmFyIGxvZyA9IF9fZGVw
        ZW5kZW5jeTNfXy5sb2c7CiAgICB2YXIgc2xpY2UgPSBfX2RlcGVuZGVuY3kz
        X18uc2xpY2U7CiAgICB2YXIgZm9yRWFjaCA9IF9fZGVwZW5kZW5jeTNfXy5m
        b3JFYWNoOwogICAgdmFyIG1lcmdlID0gX19kZXBlbmRlbmN5M19fLm1lcmdl
        OwogICAgdmFyIHNlcmlhbGl6ZSA9IF9fZGVwZW5kZW5jeTNfXy5zZXJpYWxp
        emU7CiAgICB2YXIgZXh0cmFjdFF1ZXJ5UGFyYW1zID0gX19kZXBlbmRlbmN5
        M19fLmV4dHJhY3RRdWVyeVBhcmFtczsKICAgIHZhciBnZXRDaGFuZ2VsaXN0
        ID0gX19kZXBlbmRlbmN5M19fLmdldENoYW5nZWxpc3Q7CiAgICB2YXIgcHJv
        bWlzZUxhYmVsID0gX19kZXBlbmRlbmN5M19fLnByb21pc2VMYWJlbDsKICAg
        IHZhciBUcmFuc2l0aW9uU3RhdGUgPSBfX2RlcGVuZGVuY3k0X18uVHJhbnNp
        dGlvblN0YXRlOwogICAgdmFyIGxvZ0Fib3J0ID0gX19kZXBlbmRlbmN5NV9f
        LmxvZ0Fib3J0OwogICAgdmFyIFRyYW5zaXRpb24gPSBfX2RlcGVuZGVuY3k1
        X18uVHJhbnNpdGlvbjsKICAgIHZhciBUcmFuc2l0aW9uQWJvcnRlZCA9IF9f
        ZGVwZW5kZW5jeTVfXy5UcmFuc2l0aW9uQWJvcnRlZDsKICAgIHZhciBOYW1l
        ZFRyYW5zaXRpb25JbnRlbnQgPSBfX2RlcGVuZGVuY3k2X18uTmFtZWRUcmFu
        c2l0aW9uSW50ZW50OwogICAgdmFyIFVSTFRyYW5zaXRpb25JbnRlbnQgPSBf
        X2RlcGVuZGVuY3k3X18uVVJMVHJhbnNpdGlvbkludGVudDsKCiAgICB2YXIg
        cG9wID0gQXJyYXkucHJvdG90eXBlLnBvcDsKCiAgICBmdW5jdGlvbiBSb3V0
        ZXIoKSB7CiAgICAgIHRoaXMucmVjb2duaXplciA9IG5ldyBSb3V0ZVJlY29n
        bml6ZXIoKTsKICAgICAgdGhpcy5yZXNldCgpOwogICAgfQoKICAgIFJvdXRl
        ci5wcm90b3R5cGUgPSB7CgogICAgICAvKioKICAgICAgICBUaGUgbWFpbiBl
        bnRyeSBwb2ludCBpbnRvIHRoZSByb3V0ZXIuIFRoZSBBUEkgaXMgZXNzZW50
        aWFsbHkKICAgICAgICB0aGUgc2FtZSBhcyB0aGUgYG1hcGAgbWV0aG9kIGlu
        IGByb3V0ZS1yZWNvZ25pemVyYC4KCiAgICAgICAgVGhpcyBtZXRob2QgZXh0
        cmFjdHMgdGhlIFN0cmluZyBoYW5kbGVyIGF0IHRoZSBsYXN0IGAudG8oKWAK
        ICAgICAgICBjYWxsIGFuZCB1c2VzIGl0IGFzIHRoZSBuYW1lIG9mIHRoZSB3
        aG9sZSByb3V0ZS4KCiAgICAgICAgQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJh
        Y2sKICAgICAgKi8KICAgICAgbWFwOiBmdW5jdGlvbihjYWxsYmFjaykgewog
        ICAgICAgIHRoaXMucmVjb2duaXplci5kZWxlZ2F0ZSA9IHRoaXMuZGVsZWdh
        dGU7CgogICAgICAgIHRoaXMucmVjb2duaXplci5tYXAoY2FsbGJhY2ssIGZ1
        bmN0aW9uKHJlY29nbml6ZXIsIHJvdXRlcykgewogICAgICAgICAgZm9yICh2
        YXIgaSA9IHJvdXRlcy5sZW5ndGggLSAxLCBwcm9jZWVkID0gdHJ1ZTsgaSA+
        PSAwICYmIHByb2NlZWQ7IC0taSkgewogICAgICAgICAgICB2YXIgcm91dGUg
        PSByb3V0ZXNbaV07CiAgICAgICAgICAgIHJlY29nbml6ZXIuYWRkKHJvdXRl
        cywgeyBhczogcm91dGUuaGFuZGxlciB9KTsKICAgICAgICAgICAgcHJvY2Vl
        ZCA9IHJvdXRlLnBhdGggPT09ICcvJyB8fCByb3V0ZS5wYXRoID09PSAnJyB8
        fCByb3V0ZS5oYW5kbGVyLnNsaWNlKC02KSA9PT0gJy5pbmRleCc7CiAgICAg
        ICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0sCgogICAgICBoYXNSb3V0ZTog
        ZnVuY3Rpb24ocm91dGUpIHsKICAgICAgICByZXR1cm4gdGhpcy5yZWNvZ25p
        emVyLmhhc1JvdXRlKHJvdXRlKTsKICAgICAgfSwKCiAgICAgIC8vIE5PVEU6
        IHRoaXMgZG9lc24ndCByZWFsbHkgYmVsb25nIGhlcmUsIGJ1dCBoZXJlCiAg
        ICAgIC8vIGl0IHNoYWxsIHJlbWFpbiB1bnRpbCBvdXIgRVM2IHRyYW5zcGls
        ZXIgY2FuCiAgICAgIC8vIGhhbmRsZSBjeWNsaWNhbCBkZXBzLgogICAgICB0
        cmFuc2l0aW9uQnlJbnRlbnQ6IGZ1bmN0aW9uKGludGVudCwgaXNJbnRlcm1l
        ZGlhdGUpIHsKCiAgICAgICAgdmFyIHdhc1RyYW5zaXRpb25pbmcgPSAhIXRo
        aXMuYWN0aXZlVHJhbnNpdGlvbjsKICAgICAgICB2YXIgb2xkU3RhdGUgPSB3
        YXNUcmFuc2l0aW9uaW5nID8gdGhpcy5hY3RpdmVUcmFuc2l0aW9uLnN0YXRl
        IDogdGhpcy5zdGF0ZTsKICAgICAgICB2YXIgbmV3VHJhbnNpdGlvbjsKICAg
        ICAgICB2YXIgcm91dGVyID0gdGhpczsKCiAgICAgICAgdHJ5IHsKICAgICAg
        ICAgIHZhciBuZXdTdGF0ZSA9IGludGVudC5hcHBseVRvU3RhdGUob2xkU3Rh
        dGUsIHRoaXMucmVjb2duaXplciwgdGhpcy5nZXRIYW5kbGVyLCBpc0ludGVy
        bWVkaWF0ZSk7CgogICAgICAgICAgaWYgKGhhbmRsZXJJbmZvc0VxdWFsKG5l
        d1N0YXRlLmhhbmRsZXJJbmZvcywgb2xkU3RhdGUuaGFuZGxlckluZm9zKSkg
        ewoKICAgICAgICAgICAgLy8gVGhpcyBpcyBhIG5vLW9wIHRyYW5zaXRpb24u
        IFNlZSBpZiBxdWVyeSBwYXJhbXMgY2hhbmdlZC4KICAgICAgICAgICAgdmFy
        IHF1ZXJ5UGFyYW1DaGFuZ2VsaXN0ID0gZ2V0Q2hhbmdlbGlzdChvbGRTdGF0
        ZS5xdWVyeVBhcmFtcywgbmV3U3RhdGUucXVlcnlQYXJhbXMpOwogICAgICAg
        ICAgICBpZiAocXVlcnlQYXJhbUNoYW5nZWxpc3QpIHsKCiAgICAgICAgICAg
        ICAgLy8gVGhpcyBpcyBhIGxpdHRsZSBoYWNreSBidXQgd2UgbmVlZCBzb21l
        IHdheSBvZiBzdG9yaW5nCiAgICAgICAgICAgICAgLy8gY2hhbmdlZCBxdWVy
        eSBwYXJhbXMgZ2l2ZW4gdGhhdCBubyBhY3RpdmVUcmFuc2l0aW9uCiAgICAg
        ICAgICAgICAgLy8gaXMgZ3VhcmFudGVlZCB0byBoYXZlIG9jY3VycmVkLgog
        ICAgICAgICAgICAgIHRoaXMuX2NoYW5nZWRRdWVyeVBhcmFtcyA9IHF1ZXJ5
        UGFyYW1DaGFuZ2VsaXN0LmNoYW5nZWQ7CiAgICAgICAgICAgICAgdHJpZ2dl
        cih0aGlzLCBuZXdTdGF0ZS5oYW5kbGVySW5mb3MsIHRydWUsIFsncXVlcnlQ
        YXJhbXNEaWRDaGFuZ2UnLCBxdWVyeVBhcmFtQ2hhbmdlbGlzdC5jaGFuZ2Vk
        LCBxdWVyeVBhcmFtQ2hhbmdlbGlzdC5hbGwsIHF1ZXJ5UGFyYW1DaGFuZ2Vs
        aXN0LnJlbW92ZWRdKTsKICAgICAgICAgICAgICB0aGlzLl9jaGFuZ2VkUXVl
        cnlQYXJhbXMgPSBudWxsOwoKICAgICAgICAgICAgICBpZiAoIXdhc1RyYW5z
        aXRpb25pbmcgJiYgdGhpcy5hY3RpdmVUcmFuc2l0aW9uKSB7CiAgICAgICAg
        ICAgICAgICAvLyBPbmUgb2YgdGhlIGhhbmRsZXJzIGluIHF1ZXJ5UGFyYW1z
        RGlkQ2hhbmdlCiAgICAgICAgICAgICAgICAvLyBjYXVzZWQgYSB0cmFuc2l0
        aW9uLiBKdXN0IHJldHVybiB0aGF0IHRyYW5zaXRpb24uCiAgICAgICAgICAg
        ICAgICByZXR1cm4gdGhpcy5hY3RpdmVUcmFuc2l0aW9uOwogICAgICAgICAg
        ICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAvLyBSdW5uaW5nIHF1ZXJ5
        UGFyYW1zRGlkQ2hhbmdlIGRpZG4ndCBjaGFuZ2UgYW55dGhpbmcuCiAgICAg
        ICAgICAgICAgICAvLyBKdXN0IHVwZGF0ZSBxdWVyeSBwYXJhbXMgYW5kIGJl
        IG9uIG91ciB3YXkuCiAgICAgICAgICAgICAgICBvbGRTdGF0ZS5xdWVyeVBh
        cmFtcyA9IGZpbmFsaXplUXVlcnlQYXJhbUNoYW5nZSh0aGlzLCBuZXdTdGF0
        ZS5oYW5kbGVySW5mb3MsIG5ld1N0YXRlLnF1ZXJ5UGFyYW1zKTsKCiAgICAg
        ICAgICAgICAgICAvLyBXZSBoYXZlIHRvIHJldHVybiBhIG5vb3AgdHJhbnNp
        dGlvbiB0aGF0IHdpbGwKICAgICAgICAgICAgICAgIC8vIHBlcmZvcm0gYSBV
        UkwgdXBkYXRlIGF0IHRoZSBlbmQuIFRoaXMgZ2l2ZXMKICAgICAgICAgICAg
        ICAgIC8vIHRoZSB1c2VyIHRoZSBhYmlsaXR5IHRvIHNldCB0aGUgdXJsIHVw
        ZGF0ZQogICAgICAgICAgICAgICAgLy8gbWV0aG9kIChkZWZhdWx0IGlzIHJl
        cGxhY2VTdGF0ZSkuCiAgICAgICAgICAgICAgICBuZXdUcmFuc2l0aW9uID0g
        bmV3IFRyYW5zaXRpb24odGhpcyk7CiAgICAgICAgICAgICAgICBuZXdUcmFu
        c2l0aW9uLnVybE1ldGhvZCA9ICdyZXBsYWNlJzsKICAgICAgICAgICAgICAg
        IG5ld1RyYW5zaXRpb24ucHJvbWlzZSA9IG5ld1RyYW5zaXRpb24ucHJvbWlz
        ZS50aGVuKGZ1bmN0aW9uKHJlc3VsdCkgewogICAgICAgICAgICAgICAgICB1
        cGRhdGVVUkwobmV3VHJhbnNpdGlvbiwgb2xkU3RhdGUsIHRydWUpOwogICAg
        ICAgICAgICAgICAgICBpZiAocm91dGVyLmRpZFRyYW5zaXRpb24pIHsKICAg
        ICAgICAgICAgICAgICAgICByb3V0ZXIuZGlkVHJhbnNpdGlvbihyb3V0ZXIu
        Y3VycmVudEhhbmRsZXJJbmZvcyk7CiAgICAgICAgICAgICAgICAgIH0KICAg
        ICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgICAgICAgICAgICAg
        IH0sIG51bGwsIHByb21pc2VMYWJlbCgiVHJhbnNpdGlvbiBjb21wbGV0ZSIp
        KTsKICAgICAgICAgICAgICAgIHJldHVybiBuZXdUcmFuc2l0aW9uOwogICAg
        ICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8gTm8t
        b3AuIE5vIG5lZWQgdG8gY3JlYXRlIGEgbmV3IHRyYW5zaXRpb24uCiAgICAg
        ICAgICAgIHJldHVybiBuZXcgVHJhbnNpdGlvbih0aGlzKTsKICAgICAgICAg
        IH0KCiAgICAgICAgICBpZiAoaXNJbnRlcm1lZGlhdGUpIHsKICAgICAgICAg
        ICAgc2V0dXBDb250ZXh0cyh0aGlzLCBuZXdTdGF0ZSk7CiAgICAgICAgICAg
        IHJldHVybjsKICAgICAgICAgIH0KCiAgICAgICAgICAvLyBDcmVhdGUgYSBu
        ZXcgdHJhbnNpdGlvbiB0byB0aGUgZGVzdGluYXRpb24gcm91dGUuCiAgICAg
        ICAgICBuZXdUcmFuc2l0aW9uID0gbmV3IFRyYW5zaXRpb24odGhpcywgaW50
        ZW50LCBuZXdTdGF0ZSk7CgogICAgICAgICAgLy8gQWJvcnQgYW5kIHVzdXJw
        IGFueSBwcmV2aW91c2x5IGFjdGl2ZSB0cmFuc2l0aW9uLgogICAgICAgICAg
        aWYgKHRoaXMuYWN0aXZlVHJhbnNpdGlvbikgewogICAgICAgICAgICB0aGlz
        LmFjdGl2ZVRyYW5zaXRpb24uYWJvcnQoKTsKICAgICAgICAgIH0KICAgICAg
        ICAgIHRoaXMuYWN0aXZlVHJhbnNpdGlvbiA9IG5ld1RyYW5zaXRpb247Cgog
        ICAgICAgICAgLy8gVHJhbnNpdGlvbiBwcm9taXNlcyBieSBkZWZhdWx0IHJl
        c29sdmUgd2l0aCByZXNvbHZlZCBzdGF0ZS4KICAgICAgICAgIC8vIEZvciBv
        dXIgcHVycG9zZXMsIHN3YXAgb3V0IHRoZSBwcm9taXNlIHRvIHJlc29sdmUK
        ICAgICAgICAgIC8vIGFmdGVyIHRoZSB0cmFuc2l0aW9uIGhhcyBiZWVuIGZp
        bmFsaXplZC4KICAgICAgICAgIG5ld1RyYW5zaXRpb24ucHJvbWlzZSA9IG5l
        d1RyYW5zaXRpb24ucHJvbWlzZS50aGVuKGZ1bmN0aW9uKHJlc3VsdCkgewog
        ICAgICAgICAgICByZXR1cm4gcm91dGVyLmFzeW5jKGZ1bmN0aW9uKCkgewog
        ICAgICAgICAgICAgIHJldHVybiBmaW5hbGl6ZVRyYW5zaXRpb24obmV3VHJh
        bnNpdGlvbiwgcmVzdWx0LnN0YXRlKTsKICAgICAgICAgICAgfSwgIkZpbmFs
        aXplIHRyYW5zaXRpb24iKTsKICAgICAgICAgIH0sIG51bGwsIHByb21pc2VM
        YWJlbCgiU2V0dGxlIHRyYW5zaXRpb24gcHJvbWlzZSB3aGVuIHRyYW5zaXRp
        b24gaXMgZmluYWxpemVkIikpOwoKICAgICAgICAgIGlmICghd2FzVHJhbnNp
        dGlvbmluZykgewogICAgICAgICAgICB0cmlnZ2VyKHRoaXMsIHRoaXMuc3Rh
        dGUuaGFuZGxlckluZm9zLCB0cnVlLCBbJ3dpbGxUcmFuc2l0aW9uJywgbmV3
        VHJhbnNpdGlvbl0pOwogICAgICAgICAgfQoKICAgICAgICAgIHJldHVybiBu
        ZXdUcmFuc2l0aW9uOwogICAgICAgIH0gY2F0Y2goZSkgewogICAgICAgICAg
        cmV0dXJuIG5ldyBUcmFuc2l0aW9uKHRoaXMsIGludGVudCwgbnVsbCwgZSk7
        CiAgICAgICAgfQogICAgICB9LAoKICAgICAgLyoqCiAgICAgICAgQ2xlYXJz
        IHRoZSBjdXJyZW50IGFuZCB0YXJnZXQgcm91dGUgaGFuZGxlcnMgYW5kIHRy
        aWdnZXJzIGV4aXQKICAgICAgICBvbiBlYWNoIG9mIHRoZW0gc3RhcnRpbmcg
        YXQgdGhlIGxlYWYgYW5kIHRyYXZlcnNpbmcgdXAgdGhyb3VnaAogICAgICAg
        IGl0cyBhbmNlc3RvcnMuCiAgICAgICovCiAgICAgIHJlc2V0OiBmdW5jdGlv
        bigpIHsKICAgICAgICBpZiAodGhpcy5zdGF0ZSkgewogICAgICAgICAgZm9y
        RWFjaCh0aGlzLnN0YXRlLmhhbmRsZXJJbmZvcywgZnVuY3Rpb24oaGFuZGxl
        ckluZm8pIHsKICAgICAgICAgICAgdmFyIGhhbmRsZXIgPSBoYW5kbGVySW5m
        by5oYW5kbGVyOwogICAgICAgICAgICBpZiAoaGFuZGxlci5leGl0KSB7CiAg
        ICAgICAgICAgICAgaGFuZGxlci5leGl0KCk7CiAgICAgICAgICAgIH0KICAg
        ICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgdGhpcy5zdGF0ZSA9IG5l
        dyBUcmFuc2l0aW9uU3RhdGUoKTsKICAgICAgICB0aGlzLmN1cnJlbnRIYW5k
        bGVySW5mb3MgPSBudWxsOwogICAgICB9LAoKICAgICAgYWN0aXZlVHJhbnNp
        dGlvbjogbnVsbCwKCiAgICAgIC8qKgogICAgICAgIHZhciBoYW5kbGVyID0g
        aGFuZGxlckluZm8uaGFuZGxlcjsKICAgICAgICBUaGUgZW50cnkgcG9pbnQg
        Zm9yIGhhbmRsaW5nIGEgY2hhbmdlIHRvIHRoZSBVUkwgKHVzdWFsbHkKICAg
        ICAgICB2aWEgdGhlIGJhY2sgYW5kIGZvcndhcmQgYnV0dG9uKS4KCiAgICAg
        ICAgUmV0dXJucyBhbiBBcnJheSBvZiBoYW5kbGVycyBhbmQgdGhlIHBhcmFt
        ZXRlcnMgYXNzb2NpYXRlZAogICAgICAgIHdpdGggdGhvc2UgcGFyYW1ldGVy
        cy4KCiAgICAgICAgQHBhcmFtIHtTdHJpbmd9IHVybCBhIFVSTCB0byBwcm9j
        ZXNzCgogICAgICAgIEByZXR1cm4ge0FycmF5fSBhbiBBcnJheSBvZiBgW2hh
        bmRsZXIsIHBhcmFtZXRlcl1gIHR1cGxlcwogICAgICAqLwogICAgICBoYW5k
        bGVVUkw6IGZ1bmN0aW9uKHVybCkgewogICAgICAgIC8vIFBlcmZvcm0gYSBV
        UkwtYmFzZWQgdHJhbnNpdGlvbiwgYnV0IGRvbid0IGNoYW5nZQogICAgICAg
        IC8vIHRoZSBVUkwgYWZ0ZXJ3YXJkLCBzaW5jZSBpdCBhbHJlYWR5IGhhcHBl
        bmVkLgogICAgICAgIHZhciBhcmdzID0gc2xpY2UuY2FsbChhcmd1bWVudHMp
        OwogICAgICAgIGlmICh1cmwuY2hhckF0KDApICE9PSAnLycpIHsgYXJnc1sw
        XSA9ICcvJyArIHVybDsgfQoKICAgICAgICByZXR1cm4gZG9UcmFuc2l0aW9u
        KHRoaXMsIGFyZ3MpLm1ldGhvZCgncmVwbGFjZVF1ZXJ5Jyk7CiAgICAgIH0s
        CgogICAgICAvKioKICAgICAgICBIb29rIHBvaW50IGZvciB1cGRhdGluZyB0
        aGUgVVJMLgoKICAgICAgICBAcGFyYW0ge1N0cmluZ30gdXJsIGEgVVJMIHRv
        IHVwZGF0ZSB0bwogICAgICAqLwogICAgICB1cGRhdGVVUkw6IGZ1bmN0aW9u
        KCkgewogICAgICAgIHRocm93IG5ldyBFcnJvcigidXBkYXRlVVJMIGlzIG5v
        dCBpbXBsZW1lbnRlZCIpOwogICAgICB9LAoKICAgICAgLyoqCiAgICAgICAg
        SG9vayBwb2ludCBmb3IgcmVwbGFjaW5nIHRoZSBjdXJyZW50IFVSTCwgaS5l
        LiB3aXRoIHJlcGxhY2VTdGF0ZQoKICAgICAgICBCeSBkZWZhdWx0IHRoaXMg
        YmVoYXZlcyB0aGUgc2FtZSBhcyBgdXBkYXRlVVJMYAoKICAgICAgICBAcGFy
        YW0ge1N0cmluZ30gdXJsIGEgVVJMIHRvIHVwZGF0ZSB0bwogICAgICAqLwog
        ICAgICByZXBsYWNlVVJMOiBmdW5jdGlvbih1cmwpIHsKICAgICAgICB0aGlz
        LnVwZGF0ZVVSTCh1cmwpOwogICAgICB9LAoKICAgICAgLyoqCiAgICAgICAg
        VHJhbnNpdGlvbiBpbnRvIHRoZSBzcGVjaWZpZWQgbmFtZWQgcm91dGUuCgog
        ICAgICAgIElmIG5lY2Vzc2FyeSwgdHJpZ2dlciB0aGUgZXhpdCBjYWxsYmFj
        ayBvbiBhbnkgaGFuZGxlcnMKICAgICAgICB0aGF0IGFyZSBubyBsb25nZXIg
        cmVwcmVzZW50ZWQgYnkgdGhlIHRhcmdldCByb3V0ZS4KCiAgICAgICAgQHBh
        cmFtIHtTdHJpbmd9IG5hbWUgdGhlIG5hbWUgb2YgdGhlIHJvdXRlCiAgICAg
        ICovCiAgICAgIHRyYW5zaXRpb25UbzogZnVuY3Rpb24obmFtZSkgewogICAg
        ICAgIHJldHVybiBkb1RyYW5zaXRpb24odGhpcywgYXJndW1lbnRzKTsKICAg
        ICAgfSwKCiAgICAgIGludGVybWVkaWF0ZVRyYW5zaXRpb25UbzogZnVuY3Rp
        b24obmFtZSkgewogICAgICAgIGRvVHJhbnNpdGlvbih0aGlzLCBhcmd1bWVu
        dHMsIHRydWUpOwogICAgICB9LAoKICAgICAgcmVmcmVzaDogZnVuY3Rpb24o
        cGl2b3RIYW5kbGVyKSB7CgoKICAgICAgICB2YXIgc3RhdGUgPSB0aGlzLmFj
        dGl2ZVRyYW5zaXRpb24gPyB0aGlzLmFjdGl2ZVRyYW5zaXRpb24uc3RhdGUg
        OiB0aGlzLnN0YXRlOwogICAgICAgIHZhciBoYW5kbGVySW5mb3MgPSBzdGF0
        ZS5oYW5kbGVySW5mb3M7CiAgICAgICAgdmFyIHBhcmFtcyA9IHt9OwogICAg
        ICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBoYW5kbGVySW5mb3MubGVuZ3Ro
        OyBpIDwgbGVuOyArK2kpIHsKICAgICAgICAgIHZhciBoYW5kbGVySW5mbyA9
        IGhhbmRsZXJJbmZvc1tpXTsKICAgICAgICAgIHBhcmFtc1toYW5kbGVySW5m
        by5uYW1lXSA9IGhhbmRsZXJJbmZvLnBhcmFtcyB8fCB7fTsKICAgICAgICB9
        CgogICAgICAgIGxvZyh0aGlzLCAiU3RhcnRpbmcgYSByZWZyZXNoIHRyYW5z
        aXRpb24iKTsKICAgICAgICB2YXIgaW50ZW50ID0gbmV3IE5hbWVkVHJhbnNp
        dGlvbkludGVudCh7CiAgICAgICAgICBuYW1lOiBoYW5kbGVySW5mb3NbaGFu
        ZGxlckluZm9zLmxlbmd0aCAtIDFdLm5hbWUsCiAgICAgICAgICBwaXZvdEhh
        bmRsZXI6IHBpdm90SGFuZGxlciB8fCBoYW5kbGVySW5mb3NbMF0uaGFuZGxl
        ciwKICAgICAgICAgIGNvbnRleHRzOiBbXSwgLy8gVE9ETyBjb2xsZWN0IGNv
        bnRleHRzLi4uPwogICAgICAgICAgcXVlcnlQYXJhbXM6IHRoaXMuX2NoYW5n
        ZWRRdWVyeVBhcmFtcyB8fCBzdGF0ZS5xdWVyeVBhcmFtcyB8fCB7fQogICAg
        ICAgIH0pOwoKICAgICAgICByZXR1cm4gdGhpcy50cmFuc2l0aW9uQnlJbnRl
        bnQoaW50ZW50LCBmYWxzZSk7CiAgICAgIH0sCgogICAgICAvKioKICAgICAg
        ICBJZGVudGljYWwgdG8gYHRyYW5zaXRpb25Ub2AgZXhjZXB0IHRoYXQgdGhl
        IGN1cnJlbnQgVVJMIHdpbGwgYmUgcmVwbGFjZWQKICAgICAgICBpZiBwb3Nz
        aWJsZS4KCiAgICAgICAgVGhpcyBtZXRob2QgaXMgaW50ZW5kZWQgcHJpbWFy
        aWx5IGZvciB1c2Ugd2l0aCBgcmVwbGFjZVN0YXRlYC4KCiAgICAgICAgQHBh
        cmFtIHtTdHJpbmd9IG5hbWUgdGhlIG5hbWUgb2YgdGhlIHJvdXRlCiAgICAg
        ICovCiAgICAgIHJlcGxhY2VXaXRoOiBmdW5jdGlvbihuYW1lKSB7CiAgICAg
        ICAgcmV0dXJuIGRvVHJhbnNpdGlvbih0aGlzLCBhcmd1bWVudHMpLm1ldGhv
        ZCgncmVwbGFjZScpOwogICAgICB9LAoKICAgICAgLyoqCiAgICAgICAgVGFr
        ZSBhIG5hbWVkIHJvdXRlIGFuZCBjb250ZXh0IG9iamVjdHMgYW5kIGdlbmVy
        YXRlIGEKICAgICAgICBVUkwuCgogICAgICAgIEBwYXJhbSB7U3RyaW5nfSBu
        YW1lIHRoZSBuYW1lIG9mIHRoZSByb3V0ZSB0byBnZW5lcmF0ZQogICAgICAg
        ICAgYSBVUkwgZm9yCiAgICAgICAgQHBhcmFtIHsuLi5PYmplY3R9IG9iamVj
        dHMgYSBsaXN0IG9mIG9iamVjdHMgdG8gc2VyaWFsaXplCgogICAgICAgIEBy
        ZXR1cm4ge1N0cmluZ30gYSBVUkwKICAgICAgKi8KICAgICAgZ2VuZXJhdGU6
        IGZ1bmN0aW9uKGhhbmRsZXJOYW1lKSB7CgogICAgICAgIHZhciBwYXJ0aXRp
        b25lZEFyZ3MgPSBleHRyYWN0UXVlcnlQYXJhbXMoc2xpY2UuY2FsbChhcmd1
        bWVudHMsIDEpKSwKICAgICAgICAgIHN1cHBsaWVkUGFyYW1zID0gcGFydGl0
        aW9uZWRBcmdzWzBdLAogICAgICAgICAgcXVlcnlQYXJhbXMgPSBwYXJ0aXRp
        b25lZEFyZ3NbMV07CgogICAgICAgIC8vIENvbnN0cnVjdCBhIFRyYW5zaXRp
        b25JbnRlbnQgd2l0aCB0aGUgcHJvdmlkZWQgcGFyYW1zCiAgICAgICAgLy8g
        YW5kIGFwcGx5IGl0IHRvIHRoZSBwcmVzZW50IHN0YXRlIG9mIHRoZSByb3V0
        ZXIuCiAgICAgICAgdmFyIGludGVudCA9IG5ldyBOYW1lZFRyYW5zaXRpb25J
        bnRlbnQoeyBuYW1lOiBoYW5kbGVyTmFtZSwgY29udGV4dHM6IHN1cHBsaWVk
        UGFyYW1zIH0pOwogICAgICAgIHZhciBzdGF0ZSA9IGludGVudC5hcHBseVRv
        U3RhdGUodGhpcy5zdGF0ZSwgdGhpcy5yZWNvZ25pemVyLCB0aGlzLmdldEhh
        bmRsZXIpOwogICAgICAgIHZhciBwYXJhbXMgPSB7fTsKCiAgICAgICAgZm9y
        ICh2YXIgaSA9IDAsIGxlbiA9IHN0YXRlLmhhbmRsZXJJbmZvcy5sZW5ndGg7
        IGkgPCBsZW47ICsraSkgewogICAgICAgICAgdmFyIGhhbmRsZXJJbmZvID0g
        c3RhdGUuaGFuZGxlckluZm9zW2ldOwogICAgICAgICAgdmFyIGhhbmRsZXJQ
        YXJhbXMgPSBoYW5kbGVySW5mby5wYXJhbXMgfHwKICAgICAgICAgICAgICAg
        ICAgICAgICAgICAgICAgc2VyaWFsaXplKGhhbmRsZXJJbmZvLmhhbmRsZXIs
        IGhhbmRsZXJJbmZvLmNvbnRleHQsIGhhbmRsZXJJbmZvLm5hbWVzKTsKICAg
        ICAgICAgIG1lcmdlKHBhcmFtcywgaGFuZGxlclBhcmFtcyk7CiAgICAgICAg
        fQogICAgICAgIHBhcmFtcy5xdWVyeVBhcmFtcyA9IHF1ZXJ5UGFyYW1zOwoK
        ICAgICAgICByZXR1cm4gdGhpcy5yZWNvZ25pemVyLmdlbmVyYXRlKGhhbmRs
        ZXJOYW1lLCBwYXJhbXMpOwogICAgICB9LAoKICAgICAgaXNBY3RpdmU6IGZ1
        bmN0aW9uKGhhbmRsZXJOYW1lKSB7CgogICAgICAgIHZhciBwYXJ0aXRpb25l
        ZEFyZ3MgICA9IGV4dHJhY3RRdWVyeVBhcmFtcyhzbGljZS5jYWxsKGFyZ3Vt
        ZW50cywgMSkpLAogICAgICAgICAgICBjb250ZXh0cyAgICAgICAgICA9IHBh
        cnRpdGlvbmVkQXJnc1swXSwKICAgICAgICAgICAgcXVlcnlQYXJhbXMgICAg
        ICAgPSBwYXJ0aXRpb25lZEFyZ3NbMV0sCiAgICAgICAgICAgIGFjdGl2ZVF1
        ZXJ5UGFyYW1zICA9IHRoaXMuc3RhdGUucXVlcnlQYXJhbXM7CgogICAgICAg
        IHZhciB0YXJnZXRIYW5kbGVySW5mb3MgPSB0aGlzLnN0YXRlLmhhbmRsZXJJ
        bmZvcywKICAgICAgICAgICAgZm91bmQgPSBmYWxzZSwgbmFtZXMsIG9iamVj
        dCwgaGFuZGxlckluZm8sIGhhbmRsZXJPYmosIGksIGxlbjsKCiAgICAgICAg
        aWYgKCF0YXJnZXRIYW5kbGVySW5mb3MubGVuZ3RoKSB7IHJldHVybiBmYWxz
        ZTsgfQoKICAgICAgICB2YXIgdGFyZ2V0SGFuZGxlciA9IHRhcmdldEhhbmRs
        ZXJJbmZvc1t0YXJnZXRIYW5kbGVySW5mb3MubGVuZ3RoIC0gMV0ubmFtZTsK
        ICAgICAgICB2YXIgcmVjb2dIYW5kbGVycyA9IHRoaXMucmVjb2duaXplci5o
        YW5kbGVyc0Zvcih0YXJnZXRIYW5kbGVyKTsKCiAgICAgICAgdmFyIGluZGV4
        ID0gMDsKICAgICAgICBmb3IgKGxlbiA9IHJlY29nSGFuZGxlcnMubGVuZ3Ro
        OyBpbmRleCA8IGxlbjsgKytpbmRleCkgewogICAgICAgICAgaGFuZGxlcklu
        Zm8gPSB0YXJnZXRIYW5kbGVySW5mb3NbaW5kZXhdOwogICAgICAgICAgaWYg
        KGhhbmRsZXJJbmZvLm5hbWUgPT09IGhhbmRsZXJOYW1lKSB7IGJyZWFrOyB9
        CiAgICAgICAgfQoKICAgICAgICBpZiAoaW5kZXggPT09IHJlY29nSGFuZGxl
        cnMubGVuZ3RoKSB7CiAgICAgICAgICAvLyBUaGUgcHJvdmlkZWQgcm91dGUg
        bmFtZSBpc24ndCBldmVuIGluIHRoZSByb3V0ZSBoaWVyYXJjaHkuCiAgICAg
        ICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQoKICAgICAgICB2YXIgc3Rh
        dGUgPSBuZXcgVHJhbnNpdGlvblN0YXRlKCk7CiAgICAgICAgc3RhdGUuaGFu
        ZGxlckluZm9zID0gdGFyZ2V0SGFuZGxlckluZm9zLnNsaWNlKDAsIGluZGV4
        ICsgMSk7CiAgICAgICAgcmVjb2dIYW5kbGVycyA9IHJlY29nSGFuZGxlcnMu
        c2xpY2UoMCwgaW5kZXggKyAxKTsKCiAgICAgICAgdmFyIGludGVudCA9IG5l
        dyBOYW1lZFRyYW5zaXRpb25JbnRlbnQoewogICAgICAgICAgbmFtZTogdGFy
        Z2V0SGFuZGxlciwKICAgICAgICAgIGNvbnRleHRzOiBjb250ZXh0cwogICAg
        ICAgIH0pOwoKICAgICAgICB2YXIgbmV3U3RhdGUgPSBpbnRlbnQuYXBwbHlU
        b0hhbmRsZXJzKHN0YXRlLCByZWNvZ0hhbmRsZXJzLCB0aGlzLmdldEhhbmRs
        ZXIsIHRhcmdldEhhbmRsZXIsIHRydWUsIHRydWUpOwoKICAgICAgICAvLyBH
        ZXQgYSBoYXNoIG9mIFFQcyB0aGF0IHdpbGwgc3RpbGwgYmUgYWN0aXZlIG9u
        IG5ldyByb3V0ZQogICAgICAgIHZhciBhY3RpdmVRUHNPbk5ld0hhbmRsZXIg
        PSB7fTsKICAgICAgICBtZXJnZShhY3RpdmVRUHNPbk5ld0hhbmRsZXIsIHF1
        ZXJ5UGFyYW1zKTsKICAgICAgICBmb3IgKHZhciBrZXkgaW4gYWN0aXZlUXVl
        cnlQYXJhbXMpIHsKICAgICAgICAgIGlmIChhY3RpdmVRdWVyeVBhcmFtcy5o
        YXNPd25Qcm9wZXJ0eShrZXkpICYmCiAgICAgICAgICAgICAgYWN0aXZlUVBz
        T25OZXdIYW5kbGVyLmhhc093blByb3BlcnR5KGtleSkpIHsKICAgICAgICAg
        ICAgYWN0aXZlUVBzT25OZXdIYW5kbGVyW2tleV0gPSBhY3RpdmVRdWVyeVBh
        cmFtc1trZXldOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgcmV0
        dXJuIGhhbmRsZXJJbmZvc0VxdWFsKG5ld1N0YXRlLmhhbmRsZXJJbmZvcywg
        c3RhdGUuaGFuZGxlckluZm9zKSAmJgogICAgICAgICAgICAgICAhZ2V0Q2hh
        bmdlbGlzdChhY3RpdmVRUHNPbk5ld0hhbmRsZXIsIHF1ZXJ5UGFyYW1zKTsK
        ICAgICAgfSwKCiAgICAgIHRyaWdnZXI6IGZ1bmN0aW9uKG5hbWUpIHsKICAg
        ICAgICB2YXIgYXJncyA9IHNsaWNlLmNhbGwoYXJndW1lbnRzKTsKICAgICAg
        ICB0cmlnZ2VyKHRoaXMsIHRoaXMuY3VycmVudEhhbmRsZXJJbmZvcywgZmFs
        c2UsIGFyZ3MpOwogICAgICB9LAoKICAgICAgLyoqCiAgICAgICAgQHByaXZh
        dGUKCiAgICAgICAgUGx1Z2dhYmxlIGhvb2sgZm9yIHBvc3NpYmx5IHJ1bm5p
        bmcgcm91dGUgaG9va3MKICAgICAgICBpbiBhIHRyeS1jYXRjaCBlc2NhcGlu
        ZyBtYW5uZXIuCgogICAgICAgIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNr
        IHRoZSBjYWxsYmFjayB0aGF0IHdpbGwKICAgICAgICAgICAgICAgICAgICAg
        ICAgICBiZSBhc3luY2hyb25vdXNseSBjYWxsZWQKCiAgICAgICAgQHJldHVy
        biB7UHJvbWlzZX0gYSBwcm9taXNlIHRoYXQgZnVsZmlsbHMgd2l0aCB0aGUK
        ICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSByZXR1cm5lZCBmcm9t
        IHRoZSBjYWxsYmFjawogICAgICAgKi8KICAgICAgYXN5bmM6IGZ1bmN0aW9u
        KGNhbGxiYWNrLCBsYWJlbCkgewogICAgICAgIHJldHVybiBuZXcgUHJvbWlz
        ZShmdW5jdGlvbihyZXNvbHZlKSB7CiAgICAgICAgICByZXNvbHZlKGNhbGxi
        YWNrKCkpOwogICAgICAgIH0sIGxhYmVsKTsKICAgICAgfSwKCiAgICAgIC8q
        KgogICAgICAgIEhvb2sgcG9pbnQgZm9yIGxvZ2dpbmcgdHJhbnNpdGlvbiBz
        dGF0dXMgdXBkYXRlcy4KCiAgICAgICAgQHBhcmFtIHtTdHJpbmd9IG1lc3Nh
        Z2UgVGhlIG1lc3NhZ2UgdG8gbG9nLgogICAgICAqLwogICAgICBsb2c6IG51
        bGwKICAgIH07CgogICAgLyoqCiAgICAgIEBwcml2YXRlCgogICAgICBUYWtl
        cyBhbiBBcnJheSBvZiBgSGFuZGxlckluZm9gcywgZmlndXJlcyBvdXQgd2hp
        Y2ggb25lcyBhcmUKICAgICAgZXhpdGluZywgZW50ZXJpbmcsIG9yIGNoYW5n
        aW5nIGNvbnRleHRzLCBhbmQgY2FsbHMgdGhlCiAgICAgIHByb3BlciBoYW5k
        bGVyIGhvb2tzLgoKICAgICAgRm9yIGV4YW1wbGUsIGNvbnNpZGVyIHRoZSBm
        b2xsb3dpbmcgdHJlZSBvZiBoYW5kbGVycy4gRWFjaCBoYW5kbGVyIGlzCiAg
        ICAgIGZvbGxvd2VkIGJ5IHRoZSBVUkwgc2VnbWVudCBpdCBoYW5kbGVzLgoK
        ICAgICAgYGBgCiAgICAgIHx+aW5kZXggKCIvIikKICAgICAgfCB8fnBvc3Rz
        ICgiL3Bvc3RzIikKICAgICAgfCB8IHwtc2hvd1Bvc3QgKCIvOmlkIikKICAg
        ICAgfCB8IHwtbmV3UG9zdCAoIi9uZXciKQogICAgICB8IHwgfC1lZGl0UG9z
        dCAoIi9lZGl0IikKICAgICAgfCB8fmFib3V0ICgiL2Fib3V0LzppZCIpCiAg
        ICAgIGBgYAoKICAgICAgQ29uc2lkZXIgdGhlIGZvbGxvd2luZyB0cmFuc2l0
        aW9uczoKCiAgICAgIDEuIEEgVVJMIHRyYW5zaXRpb24gdG8gYC9wb3N0cy8x
        YC4KICAgICAgICAgMS4gVHJpZ2dlcnMgdGhlIGAqbW9kZWxgIGNhbGxiYWNr
        cyBvbiB0aGUKICAgICAgICAgICAgYGluZGV4YCwgYHBvc3RzYCwgYW5kIGBz
        aG93UG9zdGAgaGFuZGxlcnMKICAgICAgICAgMi4gVHJpZ2dlcnMgdGhlIGBl
        bnRlcmAgY2FsbGJhY2sgb24gdGhlIHNhbWUKICAgICAgICAgMy4gVHJpZ2dl
        cnMgdGhlIGBzZXR1cGAgY2FsbGJhY2sgb24gdGhlIHNhbWUKICAgICAgMi4g
        QSBkaXJlY3QgdHJhbnNpdGlvbiB0byBgbmV3UG9zdGAKICAgICAgICAgMS4g
        VHJpZ2dlcnMgdGhlIGBleGl0YCBjYWxsYmFjayBvbiBgc2hvd1Bvc3RgCiAg
        ICAgICAgIDIuIFRyaWdnZXJzIHRoZSBgZW50ZXJgIGNhbGxiYWNrIG9uIGBu
        ZXdQb3N0YAogICAgICAgICAzLiBUcmlnZ2VycyB0aGUgYHNldHVwYCBjYWxs
        YmFjayBvbiBgbmV3UG9zdGAKICAgICAgMy4gQSBkaXJlY3QgdHJhbnNpdGlv
        biB0byBgYWJvdXRgIHdpdGggYSBzcGVjaWZpZWQKICAgICAgICAgY29udGV4
        dCBvYmplY3QKICAgICAgICAgMS4gVHJpZ2dlcnMgdGhlIGBleGl0YCBjYWxs
        YmFjayBvbiBgbmV3UG9zdGAKICAgICAgICAgICAgYW5kIGBwb3N0c2AKICAg
        ICAgICAgMi4gVHJpZ2dlcnMgdGhlIGBzZXJpYWxpemVgIGNhbGxiYWNrIG9u
        IGBhYm91dGAKICAgICAgICAgMy4gVHJpZ2dlcnMgdGhlIGBlbnRlcmAgY2Fs
        bGJhY2sgb24gYGFib3V0YAogICAgICAgICA0LiBUcmlnZ2VycyB0aGUgYHNl
        dHVwYCBjYWxsYmFjayBvbiBgYWJvdXRgCgogICAgICBAcGFyYW0ge1JvdXRl
        cn0gdHJhbnNpdGlvbgogICAgICBAcGFyYW0ge1RyYW5zaXRpb25TdGF0ZX0g
        bmV3U3RhdGUKICAgICovCiAgICBmdW5jdGlvbiBzZXR1cENvbnRleHRzKHJv
        dXRlciwgbmV3U3RhdGUsIHRyYW5zaXRpb24pIHsKICAgICAgdmFyIHBhcnRp
        dGlvbiA9IHBhcnRpdGlvbkhhbmRsZXJzKHJvdXRlci5zdGF0ZSwgbmV3U3Rh
        dGUpOwoKICAgICAgZm9yRWFjaChwYXJ0aXRpb24uZXhpdGVkLCBmdW5jdGlv
        bihoYW5kbGVySW5mbykgewogICAgICAgIHZhciBoYW5kbGVyID0gaGFuZGxl
        ckluZm8uaGFuZGxlcjsKICAgICAgICBkZWxldGUgaGFuZGxlci5jb250ZXh0
        OwogICAgICAgIGlmIChoYW5kbGVyLmV4aXQpIHsgaGFuZGxlci5leGl0KCk7
        IH0KICAgICAgfSk7CgogICAgICB2YXIgb2xkU3RhdGUgPSByb3V0ZXIub2xk
        U3RhdGUgPSByb3V0ZXIuc3RhdGU7CiAgICAgIHJvdXRlci5zdGF0ZSA9IG5l
        d1N0YXRlOwogICAgICB2YXIgY3VycmVudEhhbmRsZXJJbmZvcyA9IHJvdXRl
        ci5jdXJyZW50SGFuZGxlckluZm9zID0gcGFydGl0aW9uLnVuY2hhbmdlZC5z
        bGljZSgpOwoKICAgICAgdHJ5IHsKICAgICAgICBmb3JFYWNoKHBhcnRpdGlv
        bi51cGRhdGVkQ29udGV4dCwgZnVuY3Rpb24oaGFuZGxlckluZm8pIHsKICAg
        ICAgICAgIHJldHVybiBoYW5kbGVyRW50ZXJlZE9yVXBkYXRlZChjdXJyZW50
        SGFuZGxlckluZm9zLCBoYW5kbGVySW5mbywgZmFsc2UsIHRyYW5zaXRpb24p
        OwogICAgICAgIH0pOwoKICAgICAgICBmb3JFYWNoKHBhcnRpdGlvbi5lbnRl
        cmVkLCBmdW5jdGlvbihoYW5kbGVySW5mbykgewogICAgICAgICAgcmV0dXJu
        IGhhbmRsZXJFbnRlcmVkT3JVcGRhdGVkKGN1cnJlbnRIYW5kbGVySW5mb3Ms
        IGhhbmRsZXJJbmZvLCB0cnVlLCB0cmFuc2l0aW9uKTsKICAgICAgICB9KTsK
        ICAgICAgfSBjYXRjaChlKSB7CiAgICAgICAgcm91dGVyLnN0YXRlID0gb2xk
        U3RhdGU7CiAgICAgICAgcm91dGVyLmN1cnJlbnRIYW5kbGVySW5mb3MgPSBv
        bGRTdGF0ZS5oYW5kbGVySW5mb3M7CiAgICAgICAgdGhyb3cgZTsKICAgICAg
        fQoKICAgICAgcm91dGVyLnN0YXRlLnF1ZXJ5UGFyYW1zID0gZmluYWxpemVR
        dWVyeVBhcmFtQ2hhbmdlKHJvdXRlciwgY3VycmVudEhhbmRsZXJJbmZvcywg
        bmV3U3RhdGUucXVlcnlQYXJhbXMpOwogICAgfQoKCiAgICAvKioKICAgICAg
        QHByaXZhdGUKCiAgICAgIEhlbHBlciBtZXRob2QgdXNlZCBieSBzZXR1cENv
        bnRleHRzLiBIYW5kbGVzIGVycm9ycyBvciByZWRpcmVjdHMKICAgICAgdGhh
        dCBtYXkgaGFwcGVuIGluIGVudGVyL3NldHVwLgogICAgKi8KICAgIGZ1bmN0
        aW9uIGhhbmRsZXJFbnRlcmVkT3JVcGRhdGVkKGN1cnJlbnRIYW5kbGVySW5m
        b3MsIGhhbmRsZXJJbmZvLCBlbnRlciwgdHJhbnNpdGlvbikgewoKICAgICAg
        dmFyIGhhbmRsZXIgPSBoYW5kbGVySW5mby5oYW5kbGVyLAogICAgICAgICAg
        Y29udGV4dCA9IGhhbmRsZXJJbmZvLmNvbnRleHQ7CgogICAgICBpZiAoZW50
        ZXIgJiYgaGFuZGxlci5lbnRlcikgeyBoYW5kbGVyLmVudGVyKHRyYW5zaXRp
        b24pOyB9CiAgICAgIGlmICh0cmFuc2l0aW9uICYmIHRyYW5zaXRpb24uaXNB
        Ym9ydGVkKSB7CiAgICAgICAgdGhyb3cgbmV3IFRyYW5zaXRpb25BYm9ydGVk
        KCk7CiAgICAgIH0KCiAgICAgIGhhbmRsZXIuY29udGV4dCA9IGNvbnRleHQ7
        CiAgICAgIGlmIChoYW5kbGVyLmNvbnRleHREaWRDaGFuZ2UpIHsgaGFuZGxl
        ci5jb250ZXh0RGlkQ2hhbmdlKCk7IH0KCiAgICAgIGlmIChoYW5kbGVyLnNl
        dHVwKSB7IGhhbmRsZXIuc2V0dXAoY29udGV4dCwgdHJhbnNpdGlvbik7IH0K
        ICAgICAgaWYgKHRyYW5zaXRpb24gJiYgdHJhbnNpdGlvbi5pc0Fib3J0ZWQp
        IHsKICAgICAgICB0aHJvdyBuZXcgVHJhbnNpdGlvbkFib3J0ZWQoKTsKICAg
        ICAgfQoKICAgICAgY3VycmVudEhhbmRsZXJJbmZvcy5wdXNoKGhhbmRsZXJJ
        bmZvKTsKCiAgICAgIHJldHVybiB0cnVlOwogICAgfQoKCiAgICAvKioKICAg
        ICAgQHByaXZhdGUKCiAgICAgIFRoaXMgZnVuY3Rpb24gaXMgY2FsbGVkIHdo
        ZW4gdHJhbnNpdGlvbmluZyBmcm9tIG9uZSBVUkwgdG8KICAgICAgYW5vdGhl
        ciB0byBkZXRlcm1pbmUgd2hpY2ggaGFuZGxlcnMgYXJlIG5vIGxvbmdlciBh
        Y3RpdmUsCiAgICAgIHdoaWNoIGhhbmRsZXJzIGFyZSBuZXdseSBhY3RpdmUs
        IGFuZCB3aGljaCBoYW5kbGVycyByZW1haW4KICAgICAgYWN0aXZlIGJ1dCBo
        YXZlIHRoZWlyIGNvbnRleHQgY2hhbmdlZC4KCiAgICAgIFRha2UgYSBsaXN0
        IG9mIG9sZCBoYW5kbGVycyBhbmQgbmV3IGhhbmRsZXJzIGFuZCBwYXJ0aXRp
        b24KICAgICAgdGhlbSBpbnRvIGZvdXIgYnVja2V0czoKCiAgICAgICogdW5j
        aGFuZ2VkOiB0aGUgaGFuZGxlciB3YXMgYWN0aXZlIGluIGJvdGggdGhlIG9s
        ZCBhbmQKICAgICAgICBuZXcgVVJMLCBhbmQgaXRzIGNvbnRleHQgcmVtYWlu
        cyB0aGUgc2FtZQogICAgICAqIHVwZGF0ZWQgY29udGV4dDogdGhlIGhhbmRs
        ZXIgd2FzIGFjdGl2ZSBpbiBib3RoIHRoZQogICAgICAgIG9sZCBhbmQgbmV3
        IFVSTCwgYnV0IGl0cyBjb250ZXh0IGNoYW5nZWQuIFRoZSBoYW5kbGVyJ3MK
        ICAgICAgICBgc2V0dXBgIG1ldGhvZCwgaWYgYW55LCB3aWxsIGJlIGNhbGxl
        ZCB3aXRoIHRoZSBuZXcKICAgICAgICBjb250ZXh0LgogICAgICAqIGV4aXRl
        ZDogdGhlIGhhbmRsZXIgd2FzIGFjdGl2ZSBpbiB0aGUgb2xkIFVSTCwgYnV0
        IGlzCiAgICAgICAgbm8gbG9uZ2VyIGFjdGl2ZS4KICAgICAgKiBlbnRlcmVk
        OiB0aGUgaGFuZGxlciB3YXMgbm90IGFjdGl2ZSBpbiB0aGUgb2xkIFVSTCwg
        YnV0CiAgICAgICAgaXMgbm93IGFjdGl2ZS4KCiAgICAgIFRoZSBQYXJ0aXRp
        b25lZEhhbmRsZXJzIHN0cnVjdHVyZSBoYXMgZm91ciBmaWVsZHM6CgogICAg
        ICAqIGB1cGRhdGVkQ29udGV4dGA6IGEgbGlzdCBvZiBgSGFuZGxlckluZm9g
        IG9iamVjdHMgdGhhdAogICAgICAgIHJlcHJlc2VudCBoYW5kbGVycyB0aGF0
        IHJlbWFpbiBhY3RpdmUgYnV0IGhhdmUgYSBjaGFuZ2VkCiAgICAgICAgY29u
        dGV4dAogICAgICAqIGBlbnRlcmVkYDogYSBsaXN0IG9mIGBIYW5kbGVySW5m
        b2Agb2JqZWN0cyB0aGF0IHJlcHJlc2VudAogICAgICAgIGhhbmRsZXJzIHRo
        YXQgYXJlIG5ld2x5IGFjdGl2ZQogICAgICAqIGBleGl0ZWRgOiBhIGxpc3Qg
        b2YgYEhhbmRsZXJJbmZvYCBvYmplY3RzIHRoYXQgYXJlIG5vCiAgICAgICAg
        bG9uZ2VyIGFjdGl2ZS4KICAgICAgKiBgdW5jaGFuZ2VkYDogYSBsaXN0IG9m
        IGBIYW5kZXJJbmZvYCBvYmplY3RzIHRoYXQgcmVtYWluIGFjdGl2ZS4KCiAg
        ICAgIEBwYXJhbSB7QXJyYXlbSGFuZGxlckluZm9dfSBvbGRIYW5kbGVycyBh
        IGxpc3Qgb2YgdGhlIGhhbmRsZXIKICAgICAgICBpbmZvcm1hdGlvbiBmb3Ig
        dGhlIHByZXZpb3VzIFVSTCAob3IgYFtdYCBpZiB0aGlzIGlzIHRoZQogICAg
        ICAgIGZpcnN0IGhhbmRsZWQgdHJhbnNpdGlvbikKICAgICAgQHBhcmFtIHtB
        cnJheVtIYW5kbGVySW5mb119IG5ld0hhbmRsZXJzIGEgbGlzdCBvZiB0aGUg
        aGFuZGxlcgogICAgICAgIGluZm9ybWF0aW9uIGZvciB0aGUgbmV3IFVSTAoK
        ICAgICAgQHJldHVybiB7UGFydGl0aW9ufQogICAgKi8KICAgIGZ1bmN0aW9u
        IHBhcnRpdGlvbkhhbmRsZXJzKG9sZFN0YXRlLCBuZXdTdGF0ZSkgewogICAg
        ICB2YXIgb2xkSGFuZGxlcnMgPSBvbGRTdGF0ZS5oYW5kbGVySW5mb3M7CiAg
        ICAgIHZhciBuZXdIYW5kbGVycyA9IG5ld1N0YXRlLmhhbmRsZXJJbmZvczsK
        CiAgICAgIHZhciBoYW5kbGVycyA9IHsKICAgICAgICAgICAgdXBkYXRlZENv
        bnRleHQ6IFtdLAogICAgICAgICAgICBleGl0ZWQ6IFtdLAogICAgICAgICAg
        ICBlbnRlcmVkOiBbXSwKICAgICAgICAgICAgdW5jaGFuZ2VkOiBbXQogICAg
        ICAgICAgfTsKCiAgICAgIHZhciBoYW5kbGVyQ2hhbmdlZCwgY29udGV4dENo
        YW5nZWQsIHF1ZXJ5UGFyYW1zQ2hhbmdlZCwgaSwgbDsKCiAgICAgIGZvciAo
        aT0wLCBsPW5ld0hhbmRsZXJzLmxlbmd0aDsgaTxsOyBpKyspIHsKICAgICAg
        ICB2YXIgb2xkSGFuZGxlciA9IG9sZEhhbmRsZXJzW2ldLCBuZXdIYW5kbGVy
        ID0gbmV3SGFuZGxlcnNbaV07CgogICAgICAgIGlmICghb2xkSGFuZGxlciB8
        fCBvbGRIYW5kbGVyLmhhbmRsZXIgIT09IG5ld0hhbmRsZXIuaGFuZGxlcikg
        ewogICAgICAgICAgaGFuZGxlckNoYW5nZWQgPSB0cnVlOwogICAgICAgIH0K
        CiAgICAgICAgaWYgKGhhbmRsZXJDaGFuZ2VkKSB7CiAgICAgICAgICBoYW5k
        bGVycy5lbnRlcmVkLnB1c2gobmV3SGFuZGxlcik7CiAgICAgICAgICBpZiAo
        b2xkSGFuZGxlcikgeyBoYW5kbGVycy5leGl0ZWQudW5zaGlmdChvbGRIYW5k
        bGVyKTsgfQogICAgICAgIH0gZWxzZSBpZiAoY29udGV4dENoYW5nZWQgfHwg
        b2xkSGFuZGxlci5jb250ZXh0ICE9PSBuZXdIYW5kbGVyLmNvbnRleHQgfHwg
        cXVlcnlQYXJhbXNDaGFuZ2VkKSB7CiAgICAgICAgICBjb250ZXh0Q2hhbmdl
        ZCA9IHRydWU7CiAgICAgICAgICBoYW5kbGVycy51cGRhdGVkQ29udGV4dC5w
        dXNoKG5ld0hhbmRsZXIpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBo
        YW5kbGVycy51bmNoYW5nZWQucHVzaChvbGRIYW5kbGVyKTsKICAgICAgICB9
        CiAgICAgIH0KCiAgICAgIGZvciAoaT1uZXdIYW5kbGVycy5sZW5ndGgsIGw9
        b2xkSGFuZGxlcnMubGVuZ3RoOyBpPGw7IGkrKykgewogICAgICAgIGhhbmRs
        ZXJzLmV4aXRlZC51bnNoaWZ0KG9sZEhhbmRsZXJzW2ldKTsKICAgICAgfQoK
        ICAgICAgcmV0dXJuIGhhbmRsZXJzOwogICAgfQoKICAgIGZ1bmN0aW9uIHVw
        ZGF0ZVVSTCh0cmFuc2l0aW9uLCBzdGF0ZSwgaW5wdXRVcmwpIHsKICAgICAg
        dmFyIHVybE1ldGhvZCA9IHRyYW5zaXRpb24udXJsTWV0aG9kOwoKICAgICAg
        aWYgKCF1cmxNZXRob2QpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAg
        ICAgIHZhciByb3V0ZXIgPSB0cmFuc2l0aW9uLnJvdXRlciwKICAgICAgICAg
        IGhhbmRsZXJJbmZvcyA9IHN0YXRlLmhhbmRsZXJJbmZvcywKICAgICAgICAg
        IGhhbmRsZXJOYW1lID0gaGFuZGxlckluZm9zW2hhbmRsZXJJbmZvcy5sZW5n
        dGggLSAxXS5uYW1lLAogICAgICAgICAgcGFyYW1zID0ge307CgogICAgICBm
        b3IgKHZhciBpID0gaGFuZGxlckluZm9zLmxlbmd0aCAtIDE7IGkgPj0gMDsg
        LS1pKSB7CiAgICAgICAgdmFyIGhhbmRsZXJJbmZvID0gaGFuZGxlckluZm9z
        W2ldOwogICAgICAgIG1lcmdlKHBhcmFtcywgaGFuZGxlckluZm8ucGFyYW1z
        KTsKICAgICAgICBpZiAoaGFuZGxlckluZm8uaGFuZGxlci5pbmFjY2Vzc2li
        bGVCeVVSTCkgewogICAgICAgICAgdXJsTWV0aG9kID0gbnVsbDsKICAgICAg
        ICB9CiAgICAgIH0KCiAgICAgIGlmICh1cmxNZXRob2QpIHsKICAgICAgICBw
        YXJhbXMucXVlcnlQYXJhbXMgPSBzdGF0ZS5xdWVyeVBhcmFtczsKICAgICAg
        ICB2YXIgdXJsID0gcm91dGVyLnJlY29nbml6ZXIuZ2VuZXJhdGUoaGFuZGxl
        ck5hbWUsIHBhcmFtcyk7CgogICAgICAgIGlmICh1cmxNZXRob2QgPT09ICdy
        ZXBsYWNlUXVlcnknKSB7CiAgICAgICAgICBpZiAodXJsICE9PSBpbnB1dFVy
        bCkgewogICAgICAgICAgICByb3V0ZXIucmVwbGFjZVVSTCh1cmwpOwogICAg
        ICAgICAgfQogICAgICAgIH0gZWxzZSBpZiAodXJsTWV0aG9kID09PSAncmVw
        bGFjZScpIHsKICAgICAgICAgIHJvdXRlci5yZXBsYWNlVVJMKHVybCk7CiAg
        ICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJvdXRlci51cGRhdGVVUkwodXJs
        KTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAgQHBy
        aXZhdGUKCiAgICAgIFVwZGF0ZXMgdGhlIFVSTCAoaWYgbmVjZXNzYXJ5KSBh
        bmQgY2FsbHMgYHNldHVwQ29udGV4dHNgCiAgICAgIHRvIHVwZGF0ZSB0aGUg
        cm91dGVyJ3MgYXJyYXkgb2YgYGN1cnJlbnRIYW5kbGVySW5mb3NgLgogICAg
        ICovCiAgICBmdW5jdGlvbiBmaW5hbGl6ZVRyYW5zaXRpb24odHJhbnNpdGlv
        biwgbmV3U3RhdGUpIHsKCiAgICAgIHRyeSB7CiAgICAgICAgbG9nKHRyYW5z
        aXRpb24ucm91dGVyLCB0cmFuc2l0aW9uLnNlcXVlbmNlLCAiUmVzb2x2ZWQg
        YWxsIG1vZGVscyBvbiBkZXN0aW5hdGlvbiByb3V0ZTsgZmluYWxpemluZyB0
        cmFuc2l0aW9uLiIpOwoKICAgICAgICB2YXIgcm91dGVyID0gdHJhbnNpdGlv
        bi5yb3V0ZXIsCiAgICAgICAgICAgIGhhbmRsZXJJbmZvcyA9IG5ld1N0YXRl
        LmhhbmRsZXJJbmZvcywKICAgICAgICAgICAgc2VxID0gdHJhbnNpdGlvbi5z
        ZXF1ZW5jZTsKCiAgICAgICAgLy8gUnVuIGFsbCB0aGUgbmVjZXNzYXJ5IGVu
        dGVyL3NldHVwL2V4aXQgaG9va3MKICAgICAgICBzZXR1cENvbnRleHRzKHJv
        dXRlciwgbmV3U3RhdGUsIHRyYW5zaXRpb24pOwoKICAgICAgICAvLyBDaGVj
        ayBpZiBhIHJlZGlyZWN0IG9jY3VycmVkIGluIGVudGVyL3NldHVwCiAgICAg
        ICAgaWYgKHRyYW5zaXRpb24uaXNBYm9ydGVkKSB7CiAgICAgICAgICAvLyBU
        T0RPOiBjbGVhbmVyIHdheT8gZGlzdGluZ3Vpc2ggYi93IHRhcmdldEhhbmRs
        ZXJJbmZvcz8KICAgICAgICAgIHJvdXRlci5zdGF0ZS5oYW5kbGVySW5mb3Mg
        PSByb3V0ZXIuY3VycmVudEhhbmRsZXJJbmZvczsKICAgICAgICAgIHJldHVy
        biByZWplY3QobG9nQWJvcnQodHJhbnNpdGlvbikpOwogICAgICAgIH0KCiAg
        ICAgICAgdXBkYXRlVVJMKHRyYW5zaXRpb24sIG5ld1N0YXRlLCB0cmFuc2l0
        aW9uLmludGVudC51cmwpOwoKICAgICAgICB0cmFuc2l0aW9uLmlzQWN0aXZl
        ID0gZmFsc2U7CiAgICAgICAgcm91dGVyLmFjdGl2ZVRyYW5zaXRpb24gPSBu
        dWxsOwoKICAgICAgICB0cmlnZ2VyKHJvdXRlciwgcm91dGVyLmN1cnJlbnRI
        YW5kbGVySW5mb3MsIHRydWUsIFsnZGlkVHJhbnNpdGlvbiddKTsKCiAgICAg
        ICAgaWYgKHJvdXRlci5kaWRUcmFuc2l0aW9uKSB7CiAgICAgICAgICByb3V0
        ZXIuZGlkVHJhbnNpdGlvbihyb3V0ZXIuY3VycmVudEhhbmRsZXJJbmZvcyk7
        CiAgICAgICAgfQoKICAgICAgICBsb2cocm91dGVyLCB0cmFuc2l0aW9uLnNl
        cXVlbmNlLCAiVFJBTlNJVElPTiBDT01QTEVURS4iKTsKCiAgICAgICAgLy8g
        UmVzb2x2ZSB3aXRoIHRoZSBmaW5hbCBoYW5kbGVyLgogICAgICAgIHJldHVy
        biBoYW5kbGVySW5mb3NbaGFuZGxlckluZm9zLmxlbmd0aCAtIDFdLmhhbmRs
        ZXI7CiAgICAgIH0gY2F0Y2goZSkgewogICAgICAgIGlmICghKGUgaW5zdGFu
        Y2VvZiBUcmFuc2l0aW9uQWJvcnRlZCkpIHsKICAgICAgICAgIC8vdmFyIGVy
        cm9uZW91c0hhbmRsZXIgPSBoYW5kbGVySW5mb3MucG9wKCk7CiAgICAgICAg
        ICB2YXIgaW5mb3MgPSB0cmFuc2l0aW9uLnN0YXRlLmhhbmRsZXJJbmZvczsK
        ICAgICAgICAgIHRyYW5zaXRpb24udHJpZ2dlcih0cnVlLCAnZXJyb3InLCBl
        LCB0cmFuc2l0aW9uLCBpbmZvc1tpbmZvcy5sZW5ndGgtMV0uaGFuZGxlcik7
        CiAgICAgICAgICB0cmFuc2l0aW9uLmFib3J0KCk7CiAgICAgICAgfQoKICAg
        ICAgICB0aHJvdyBlOwogICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgIEBw
        cml2YXRlCgogICAgICBCZWdpbnMgYW5kIHJldHVybnMgYSBUcmFuc2l0aW9u
        IGJhc2VkIG9uIHRoZSBwcm92aWRlZAogICAgICBhcmd1bWVudHMuIEFjY2Vw
        dHMgYXJndW1lbnRzIGluIHRoZSBmb3JtIG9mIGJvdGggVVJMCiAgICAgIHRy
        YW5zaXRpb25zIGFuZCBuYW1lZCB0cmFuc2l0aW9ucy4KCiAgICAgIEBwYXJh
        bSB7Um91dGVyfSByb3V0ZXIKICAgICAgQHBhcmFtIHtBcnJheVtPYmplY3Rd
        fSBhcmdzIGFyZ3VtZW50cyBwYXNzZWQgdG8gdHJhbnNpdGlvblRvLAogICAg
        ICAgIHJlcGxhY2VXaXRoLCBvciBoYW5kbGVVUkwKICAgICovCiAgICBmdW5j
        dGlvbiBkb1RyYW5zaXRpb24ocm91dGVyLCBhcmdzLCBpc0ludGVybWVkaWF0
        ZSkgewogICAgICAvLyBOb3JtYWxpemUgYmxhbmsgdHJhbnNpdGlvbnMgdG8g
        cm9vdCBVUkwgdHJhbnNpdGlvbnMuCiAgICAgIHZhciBuYW1lID0gYXJnc1sw
        XSB8fCAnLyc7CgogICAgICB2YXIgbGFzdEFyZyA9IGFyZ3NbYXJncy5sZW5n
        dGgtMV07CiAgICAgIHZhciBxdWVyeVBhcmFtcyA9IHt9OwogICAgICBpZiAo
        bGFzdEFyZyAmJiBsYXN0QXJnLmhhc093blByb3BlcnR5KCdxdWVyeVBhcmFt
        cycpKSB7CiAgICAgICAgcXVlcnlQYXJhbXMgPSBwb3AuY2FsbChhcmdzKS5x
        dWVyeVBhcmFtczsKICAgICAgfQoKICAgICAgdmFyIGludGVudDsKICAgICAg
        aWYgKGFyZ3MubGVuZ3RoID09PSAwKSB7CgogICAgICAgIGxvZyhyb3V0ZXIs
        ICJVcGRhdGluZyBxdWVyeSBwYXJhbXMiKTsKCiAgICAgICAgLy8gQSBxdWVy
        eSBwYXJhbSB1cGRhdGUgaXMgcmVhbGx5IGp1c3QgYSB0cmFuc2l0aW9uCiAg
        ICAgICAgLy8gaW50byB0aGUgcm91dGUgeW91J3JlIGFscmVhZHkgb24uCiAg
        ICAgICAgdmFyIGhhbmRsZXJJbmZvcyA9IHJvdXRlci5zdGF0ZS5oYW5kbGVy
        SW5mb3M7CiAgICAgICAgaW50ZW50ID0gbmV3IE5hbWVkVHJhbnNpdGlvbklu
        dGVudCh7CiAgICAgICAgICBuYW1lOiBoYW5kbGVySW5mb3NbaGFuZGxlcklu
        Zm9zLmxlbmd0aCAtIDFdLm5hbWUsCiAgICAgICAgICBjb250ZXh0czogW10s
        CiAgICAgICAgICBxdWVyeVBhcmFtczogcXVlcnlQYXJhbXMKICAgICAgICB9
        KTsKCiAgICAgIH0gZWxzZSBpZiAobmFtZS5jaGFyQXQoMCkgPT09ICcvJykg
        ewoKICAgICAgICBsb2cocm91dGVyLCAiQXR0ZW1wdGluZyBVUkwgdHJhbnNp
        dGlvbiB0byAiICsgbmFtZSk7CiAgICAgICAgaW50ZW50ID0gbmV3IFVSTFRy
        YW5zaXRpb25JbnRlbnQoeyB1cmw6IG5hbWUgfSk7CgogICAgICB9IGVsc2Ug
        ewoKICAgICAgICBsb2cocm91dGVyLCAiQXR0ZW1wdGluZyB0cmFuc2l0aW9u
        IHRvICIgKyBuYW1lKTsKICAgICAgICBpbnRlbnQgPSBuZXcgTmFtZWRUcmFu
        c2l0aW9uSW50ZW50KHsKICAgICAgICAgIG5hbWU6IGFyZ3NbMF0sCiAgICAg
        ICAgICBjb250ZXh0czogc2xpY2UuY2FsbChhcmdzLCAxKSwKICAgICAgICAg
        IHF1ZXJ5UGFyYW1zOiBxdWVyeVBhcmFtcwogICAgICAgIH0pOwogICAgICB9
        CgogICAgICByZXR1cm4gcm91dGVyLnRyYW5zaXRpb25CeUludGVudChpbnRl
        bnQsIGlzSW50ZXJtZWRpYXRlKTsKICAgIH0KCiAgICBmdW5jdGlvbiBoYW5k
        bGVySW5mb3NFcXVhbChoYW5kbGVySW5mb3MsIG90aGVySGFuZGxlckluZm9z
        KSB7CiAgICAgIGlmIChoYW5kbGVySW5mb3MubGVuZ3RoICE9PSBvdGhlckhh
        bmRsZXJJbmZvcy5sZW5ndGgpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAg
        ICAgIH0KCiAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBoYW5kbGVySW5m
        b3MubGVuZ3RoOyBpIDwgbGVuOyArK2kpIHsKICAgICAgICBpZiAoaGFuZGxl
        ckluZm9zW2ldICE9PSBvdGhlckhhbmRsZXJJbmZvc1tpXSkgewogICAgICAg
        ICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgfQogICAgICByZXR1
        cm4gdHJ1ZTsKICAgIH0KCiAgICBmdW5jdGlvbiBmaW5hbGl6ZVF1ZXJ5UGFy
        YW1DaGFuZ2Uocm91dGVyLCByZXNvbHZlZEhhbmRsZXJzLCBuZXdRdWVyeVBh
        cmFtcykgewogICAgICAvLyBXZSBmaXJlIGEgZmluYWxpemVRdWVyeVBhcmFt
        Q2hhbmdlIGV2ZW50IHdoaWNoCiAgICAgIC8vIGdpdmVzIHRoZSBuZXcgcm91
        dGUgaGllcmFyY2h5IGEgY2hhbmNlIHRvIHRlbGwKICAgICAgLy8gdXMgd2hp
        Y2ggcXVlcnkgcGFyYW1zIGl0J3MgY29uc3VtaW5nIGFuZCB3aGF0CiAgICAg
        IC8vIHRoZWlyIGZpbmFsIHZhbHVlcyBhcmUuIElmIGEgcXVlcnkgcGFyYW0g
        aXMKICAgICAgLy8gbm8gbG9uZ2VyIGNvbnN1bWVkIGluIHRoZSBmaW5hbCBy
        b3V0ZSBoaWVyYXJjaHksCiAgICAgIC8vIGl0cyBzZXJpYWxpemVkIHNlZ21l
        bnQgd2lsbCBiZSByZW1vdmVkCiAgICAgIC8vIGZyb20gdGhlIFVSTC4KICAg
        ICAgdmFyIGZpbmFsUXVlcnlQYXJhbXNBcnJheSA9IFtdOwogICAgICB0cmln
        Z2VyKHJvdXRlciwgcmVzb2x2ZWRIYW5kbGVycywgdHJ1ZSwgWydmaW5hbGl6
        ZVF1ZXJ5UGFyYW1DaGFuZ2UnLCBuZXdRdWVyeVBhcmFtcywgZmluYWxRdWVy
        eVBhcmFtc0FycmF5XSk7CgogICAgICB2YXIgZmluYWxRdWVyeVBhcmFtcyA9
        IHt9OwogICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gZmluYWxRdWVyeVBh
        cmFtc0FycmF5Lmxlbmd0aDsgaSA8IGxlbjsgKytpKSB7CiAgICAgICAgdmFy
        IHFwID0gZmluYWxRdWVyeVBhcmFtc0FycmF5W2ldOwogICAgICAgIGZpbmFs
        UXVlcnlQYXJhbXNbcXAua2V5XSA9IHFwLnZhbHVlOwogICAgICB9CiAgICAg
        IHJldHVybiBmaW5hbFF1ZXJ5UGFyYW1zOwogICAgfQoKICAgIF9fZXhwb3J0
        c19fLlJvdXRlciA9IFJvdXRlcjsKICB9KTsKZGVmaW5lKCJyb3V0ZXIvdHJh
        bnNpdGlvbi1pbnRlbnQiLCAKICBbIi4vdXRpbHMiLCJleHBvcnRzIl0sCiAg
        ZnVuY3Rpb24oX19kZXBlbmRlbmN5MV9fLCBfX2V4cG9ydHNfXykgewogICAg
        InVzZSBzdHJpY3QiOwogICAgdmFyIG1lcmdlID0gX19kZXBlbmRlbmN5MV9f
        Lm1lcmdlOwoKICAgIGZ1bmN0aW9uIFRyYW5zaXRpb25JbnRlbnQocHJvcHMp
        IHsKICAgICAgaWYgKHByb3BzKSB7CiAgICAgICAgbWVyZ2UodGhpcywgcHJv
        cHMpOwogICAgICB9CiAgICAgIHRoaXMuZGF0YSA9IHRoaXMuZGF0YSB8fCB7
        fTsKICAgIH0KCiAgICBUcmFuc2l0aW9uSW50ZW50LnByb3RvdHlwZS5hcHBs
        eVRvU3RhdGUgPSBmdW5jdGlvbihvbGRTdGF0ZSkgewogICAgICAvLyBEZWZh
        dWx0IFRyYW5zaXRpb25JbnRlbnQgaXMgYSBuby1vcC4KICAgICAgcmV0dXJu
        IG9sZFN0YXRlOwogICAgfTsKCiAgICBfX2V4cG9ydHNfXy5UcmFuc2l0aW9u
        SW50ZW50ID0gVHJhbnNpdGlvbkludGVudDsKICB9KTsKZGVmaW5lKCJyb3V0
        ZXIvdHJhbnNpdGlvbi1pbnRlbnQvbmFtZWQtdHJhbnNpdGlvbi1pbnRlbnQi
        LCAKICBbIi4uL3RyYW5zaXRpb24taW50ZW50IiwiLi4vdHJhbnNpdGlvbi1z
        dGF0ZSIsIi4uL2hhbmRsZXItaW5mbyIsIi4uL3V0aWxzIiwiZXhwb3J0cyJd
        LAogIGZ1bmN0aW9uKF9fZGVwZW5kZW5jeTFfXywgX19kZXBlbmRlbmN5Ml9f
        LCBfX2RlcGVuZGVuY3kzX18sIF9fZGVwZW5kZW5jeTRfXywgX19leHBvcnRz
        X18pIHsKICAgICJ1c2Ugc3RyaWN0IjsKICAgIHZhciBUcmFuc2l0aW9uSW50
        ZW50ID0gX19kZXBlbmRlbmN5MV9fLlRyYW5zaXRpb25JbnRlbnQ7CiAgICB2
        YXIgVHJhbnNpdGlvblN0YXRlID0gX19kZXBlbmRlbmN5Ml9fLlRyYW5zaXRp
        b25TdGF0ZTsKICAgIHZhciBVbnJlc29sdmVkSGFuZGxlckluZm9CeVBhcmFt
        ID0gX19kZXBlbmRlbmN5M19fLlVucmVzb2x2ZWRIYW5kbGVySW5mb0J5UGFy
        YW07CiAgICB2YXIgVW5yZXNvbHZlZEhhbmRsZXJJbmZvQnlPYmplY3QgPSBf
        X2RlcGVuZGVuY3kzX18uVW5yZXNvbHZlZEhhbmRsZXJJbmZvQnlPYmplY3Q7
        CiAgICB2YXIgaXNQYXJhbSA9IF9fZGVwZW5kZW5jeTRfXy5pc1BhcmFtOwog
        ICAgdmFyIGZvckVhY2ggPSBfX2RlcGVuZGVuY3k0X18uZm9yRWFjaDsKICAg
        IHZhciBleHRyYWN0UXVlcnlQYXJhbXMgPSBfX2RlcGVuZGVuY3k0X18uZXh0
        cmFjdFF1ZXJ5UGFyYW1zOwogICAgdmFyIG9DcmVhdGUgPSBfX2RlcGVuZGVu
        Y3k0X18ub0NyZWF0ZTsKICAgIHZhciBtZXJnZSA9IF9fZGVwZW5kZW5jeTRf
        Xy5tZXJnZTsKCiAgICBmdW5jdGlvbiBOYW1lZFRyYW5zaXRpb25JbnRlbnQo
        cHJvcHMpIHsKICAgICAgVHJhbnNpdGlvbkludGVudC5jYWxsKHRoaXMsIHBy
        b3BzKTsKICAgIH0KCiAgICBOYW1lZFRyYW5zaXRpb25JbnRlbnQucHJvdG90
        eXBlID0gb0NyZWF0ZShUcmFuc2l0aW9uSW50ZW50LnByb3RvdHlwZSk7CiAg
        ICBOYW1lZFRyYW5zaXRpb25JbnRlbnQucHJvdG90eXBlLmFwcGx5VG9TdGF0
        ZSA9IGZ1bmN0aW9uKG9sZFN0YXRlLCByZWNvZ25pemVyLCBnZXRIYW5kbGVy
        LCBpc0ludGVybWVkaWF0ZSkgewoKICAgICAgdmFyIHBhcnRpdGlvbmVkQXJn
        cyAgICAgPSBleHRyYWN0UXVlcnlQYXJhbXMoW3RoaXMubmFtZV0uY29uY2F0
        KHRoaXMuY29udGV4dHMpKSwKICAgICAgICBwdXJlQXJncyAgICAgICAgICAg
        ICAgPSBwYXJ0aXRpb25lZEFyZ3NbMF0sCiAgICAgICAgcXVlcnlQYXJhbXMg
        ICAgICAgICAgID0gcGFydGl0aW9uZWRBcmdzWzFdLAogICAgICAgIGhhbmRs
        ZXJzICAgICAgICAgICAgICA9IHJlY29nbml6ZXIuaGFuZGxlcnNGb3IocHVy
        ZUFyZ3NbMF0pOwoKICAgICAgdmFyIHRhcmdldFJvdXRlTmFtZSA9IGhhbmRs
        ZXJzW2hhbmRsZXJzLmxlbmd0aC0xXS5oYW5kbGVyOwoKICAgICAgcmV0dXJu
        IHRoaXMuYXBwbHlUb0hhbmRsZXJzKG9sZFN0YXRlLCBoYW5kbGVycywgZ2V0
        SGFuZGxlciwgdGFyZ2V0Um91dGVOYW1lLCBpc0ludGVybWVkaWF0ZSk7CiAg
        ICB9OwoKICAgIE5hbWVkVHJhbnNpdGlvbkludGVudC5wcm90b3R5cGUuYXBw
        bHlUb0hhbmRsZXJzID0gZnVuY3Rpb24ob2xkU3RhdGUsIGhhbmRsZXJzLCBn
        ZXRIYW5kbGVyLCB0YXJnZXRSb3V0ZU5hbWUsIGlzSW50ZXJtZWRpYXRlLCBj
        aGVja2luZ0lmQWN0aXZlKSB7CgogICAgICB2YXIgaTsKICAgICAgdmFyIG5l
        d1N0YXRlID0gbmV3IFRyYW5zaXRpb25TdGF0ZSgpOwogICAgICB2YXIgb2Jq
        ZWN0cyA9IHRoaXMuY29udGV4dHMuc2xpY2UoMCk7CgogICAgICB2YXIgaW52
        YWxpZGF0ZUluZGV4ID0gaGFuZGxlcnMubGVuZ3RoOwogICAgICB2YXIgbm9u
        RHluYW1pY0luZGV4ZXMgPSBbXTsKCiAgICAgIC8vIFBpdm90IGhhbmRsZXJz
        IGFyZSBwcm92aWRlZCBmb3IgcmVmcmVzaCB0cmFuc2l0aW9ucwogICAgICBp
        ZiAodGhpcy5waXZvdEhhbmRsZXIpIHsKICAgICAgICBmb3IgKGkgPSAwOyBp
        IDwgaGFuZGxlcnMubGVuZ3RoOyArK2kpIHsKICAgICAgICAgIGlmIChnZXRI
        YW5kbGVyKGhhbmRsZXJzW2ldLmhhbmRsZXIpID09PSB0aGlzLnBpdm90SGFu
        ZGxlcikgewogICAgICAgICAgICBpbnZhbGlkYXRlSW5kZXggPSBpOwogICAg
        ICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0K
        CiAgICAgIHZhciBwaXZvdEhhbmRsZXJGb3VuZCA9ICF0aGlzLnBpdm90SGFu
        ZGxlcjsKCiAgICAgIGZvciAoaSA9IGhhbmRsZXJzLmxlbmd0aCAtIDE7IGkg
        Pj0gMDsgLS1pKSB7CiAgICAgICAgdmFyIHJlc3VsdCA9IGhhbmRsZXJzW2ld
        OwogICAgICAgIHZhciBuYW1lID0gcmVzdWx0LmhhbmRsZXI7CiAgICAgICAg
        dmFyIGhhbmRsZXIgPSBnZXRIYW5kbGVyKG5hbWUpOwoKICAgICAgICB2YXIg
        b2xkSGFuZGxlckluZm8gPSBvbGRTdGF0ZS5oYW5kbGVySW5mb3NbaV07CiAg
        ICAgICAgdmFyIG5ld0hhbmRsZXJJbmZvID0gbnVsbDsKCiAgICAgICAgaWYg
        KHJlc3VsdC5uYW1lcy5sZW5ndGggPiAwKSB7CiAgICAgICAgICBpZiAoaSA+
        PSBpbnZhbGlkYXRlSW5kZXgpIHsKICAgICAgICAgICAgbmV3SGFuZGxlcklu
        Zm8gPSB0aGlzLmNyZWF0ZVBhcmFtSGFuZGxlckluZm8obmFtZSwgaGFuZGxl
        ciwgcmVzdWx0Lm5hbWVzLCBvYmplY3RzLCBvbGRIYW5kbGVySW5mbyk7CiAg
        ICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBuZXdIYW5kbGVySW5mbyA9
        IHRoaXMuZ2V0SGFuZGxlckluZm9Gb3JEeW5hbWljU2VnbWVudChuYW1lLCBo
        YW5kbGVyLCByZXN1bHQubmFtZXMsIG9iamVjdHMsIG9sZEhhbmRsZXJJbmZv
        LCB0YXJnZXRSb3V0ZU5hbWUpOwogICAgICAgICAgfQogICAgICAgIH0gZWxz
        ZSB7CiAgICAgICAgICAvLyBUaGlzIHJvdXRlIGhhcyBubyBkeW5hbWljIHNl
        Z21lbnQuCiAgICAgICAgICAvLyBUaGVyZWZvcmUgdHJlYXQgYXMgYSBwYXJh
        bS1iYXNlZCBoYW5kbGVySW5mbwogICAgICAgICAgLy8gd2l0aCBlbXB0eSBw
        YXJhbXMuIFRoaXMgd2lsbCBjYXVzZSB0aGUgYG1vZGVsYAogICAgICAgICAg
        Ly8gaG9vayB0byBiZSBjYWxsZWQgd2l0aCBlbXB0eSBwYXJhbXMsIHdoaWNo
        IGlzIGRlc2lyYWJsZS4KICAgICAgICAgIG5ld0hhbmRsZXJJbmZvID0gdGhp
        cy5jcmVhdGVQYXJhbUhhbmRsZXJJbmZvKG5hbWUsIGhhbmRsZXIsIHJlc3Vs
        dC5uYW1lcywgb2JqZWN0cywgb2xkSGFuZGxlckluZm8pOwogICAgICAgICAg
        bm9uRHluYW1pY0luZGV4ZXMudW5zaGlmdChpKTsKICAgICAgICB9CgogICAg
        ICAgIGlmIChjaGVja2luZ0lmQWN0aXZlKSB7CiAgICAgICAgICAvLyBJZiB3
        ZSdyZSBwZXJmb3JtaW5nIGFuIGlzQWN0aXZlIGNoZWNrLCB3ZSB3YW50IHRv
        CiAgICAgICAgICAvLyBzZXJpYWxpemUgVVJMIHBhcmFtcyB3aXRoIHRoZSBw
        cm92aWRlZCBjb250ZXh0LCBidXQKICAgICAgICAgIC8vIGlnbm9yZSBtaXNt
        YXRjaGVzIGJldHdlZW4gb2xkIGFuZCBuZXcgY29udGV4dC4KICAgICAgICAg
        IG5ld0hhbmRsZXJJbmZvID0gbmV3SGFuZGxlckluZm8uYmVjb21lUmVzb2x2
        ZWQobnVsbCwgbmV3SGFuZGxlckluZm8uY29udGV4dCk7CiAgICAgICAgICB2
        YXIgb2xkQ29udGV4dCA9IG9sZEhhbmRsZXJJbmZvICYmIG9sZEhhbmRsZXJJ
        bmZvLmNvbnRleHQ7CiAgICAgICAgICBpZiAocmVzdWx0Lm5hbWVzLmxlbmd0
        aCA+IDAgJiYgbmV3SGFuZGxlckluZm8uY29udGV4dCA9PT0gb2xkQ29udGV4
        dCkgewogICAgICAgICAgICAvLyBJZiBjb250ZXh0cyBtYXRjaCBpbiBpc0Fj
        dGl2ZSB0ZXN0LCBhc3N1bWUgcGFyYW1zIGFsc28gbWF0Y2guCiAgICAgICAg
        ICAgIC8vIFRoaXMgYWxsb3dzIGZvciBmbGV4aWJpbGl0eSBpbiBub3QgcmVx
        dWlyaW5nIHRoYXQgZXZlcnkgbGFzdAogICAgICAgICAgICAvLyBoYW5kbGVy
        IHByb3ZpZGUgYSBgc2VyaWFsaXplYCBtZXRob2QKICAgICAgICAgICAgbmV3
        SGFuZGxlckluZm8ucGFyYW1zID0gb2xkSGFuZGxlckluZm8gJiYgb2xkSGFu
        ZGxlckluZm8ucGFyYW1zOwogICAgICAgICAgfQogICAgICAgICAgbmV3SGFu
        ZGxlckluZm8uY29udGV4dCA9IG9sZENvbnRleHQ7CiAgICAgICAgfQoKICAg
        ICAgICB2YXIgaGFuZGxlclRvVXNlID0gb2xkSGFuZGxlckluZm87CiAgICAg
        ICAgaWYgKGkgPj0gaW52YWxpZGF0ZUluZGV4IHx8IG5ld0hhbmRsZXJJbmZv
        LnNob3VsZFN1cGVyY2VkZShvbGRIYW5kbGVySW5mbykpIHsKICAgICAgICAg
        IGludmFsaWRhdGVJbmRleCA9IE1hdGgubWluKGksIGludmFsaWRhdGVJbmRl
        eCk7CiAgICAgICAgICBoYW5kbGVyVG9Vc2UgPSBuZXdIYW5kbGVySW5mbzsK
        ICAgICAgICB9CgogICAgICAgIGlmIChpc0ludGVybWVkaWF0ZSAmJiAhY2hl
        Y2tpbmdJZkFjdGl2ZSkgewogICAgICAgICAgaGFuZGxlclRvVXNlID0gaGFu
        ZGxlclRvVXNlLmJlY29tZVJlc29sdmVkKG51bGwsIGhhbmRsZXJUb1VzZS5j
        b250ZXh0KTsKICAgICAgICB9CgogICAgICAgIG5ld1N0YXRlLmhhbmRsZXJJ
        bmZvcy51bnNoaWZ0KGhhbmRsZXJUb1VzZSk7CiAgICAgIH0KCiAgICAgIGlm
        IChvYmplY3RzLmxlbmd0aCA+IDApIHsKICAgICAgICB0aHJvdyBuZXcgRXJy
        b3IoIk1vcmUgY29udGV4dCBvYmplY3RzIHdlcmUgcGFzc2VkIHRoYW4gdGhl
        cmUgYXJlIGR5bmFtaWMgc2VnbWVudHMgZm9yIHRoZSByb3V0ZTogIiArIHRh
        cmdldFJvdXRlTmFtZSk7CiAgICAgIH0KCiAgICAgIGlmICghaXNJbnRlcm1l
        ZGlhdGUpIHsKICAgICAgICB0aGlzLmludmFsaWRhdGVOb25EeW5hbWljSGFu
        ZGxlcnMobmV3U3RhdGUuaGFuZGxlckluZm9zLCBub25EeW5hbWljSW5kZXhl
        cywgaW52YWxpZGF0ZUluZGV4KTsKICAgICAgfQoKICAgICAgbWVyZ2UobmV3
        U3RhdGUucXVlcnlQYXJhbXMsIG9sZFN0YXRlLnF1ZXJ5UGFyYW1zKTsKICAg
        ICAgbWVyZ2UobmV3U3RhdGUucXVlcnlQYXJhbXMsIHRoaXMucXVlcnlQYXJh
        bXMgfHwge30pOwoKICAgICAgcmV0dXJuIG5ld1N0YXRlOwogICAgfTsKCiAg
        ICBOYW1lZFRyYW5zaXRpb25JbnRlbnQucHJvdG90eXBlLmludmFsaWRhdGVO
        b25EeW5hbWljSGFuZGxlcnMgPSBmdW5jdGlvbihoYW5kbGVySW5mb3MsIGlu
        ZGV4ZXMsIGludmFsaWRhdGVJbmRleCkgewogICAgICBmb3JFYWNoKGluZGV4
        ZXMsIGZ1bmN0aW9uKGkpIHsKICAgICAgICBpZiAoaSA+PSBpbnZhbGlkYXRl
        SW5kZXgpIHsKICAgICAgICAgIHZhciBoYW5kbGVySW5mbyA9IGhhbmRsZXJJ
        bmZvc1tpXTsKICAgICAgICAgIGhhbmRsZXJJbmZvc1tpXSA9IG5ldyBVbnJl
        c29sdmVkSGFuZGxlckluZm9CeVBhcmFtKHsKICAgICAgICAgICAgbmFtZTog
        aGFuZGxlckluZm8ubmFtZSwKICAgICAgICAgICAgaGFuZGxlcjogaGFuZGxl
        ckluZm8uaGFuZGxlciwKICAgICAgICAgICAgcGFyYW1zOiB7fQogICAgICAg
        ICAgfSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH07CgogICAgTmFtZWRU
        cmFuc2l0aW9uSW50ZW50LnByb3RvdHlwZS5nZXRIYW5kbGVySW5mb0ZvckR5
        bmFtaWNTZWdtZW50ID0gZnVuY3Rpb24obmFtZSwgaGFuZGxlciwgbmFtZXMs
        IG9iamVjdHMsIG9sZEhhbmRsZXJJbmZvLCB0YXJnZXRSb3V0ZU5hbWUpIHsK
        CiAgICAgIHZhciBudW1OYW1lcyA9IG5hbWVzLmxlbmd0aDsKICAgICAgdmFy
        IG9iamVjdFRvVXNlOwogICAgICBpZiAob2JqZWN0cy5sZW5ndGggPiAwKSB7
        CgogICAgICAgIC8vIFVzZSB0aGUgb2JqZWN0cyBwcm92aWRlZCBmb3IgdGhp
        cyB0cmFuc2l0aW9uLgogICAgICAgIG9iamVjdFRvVXNlID0gb2JqZWN0c1tv
        YmplY3RzLmxlbmd0aCAtIDFdOwogICAgICAgIGlmIChpc1BhcmFtKG9iamVj
        dFRvVXNlKSkgewogICAgICAgICAgcmV0dXJuIHRoaXMuY3JlYXRlUGFyYW1I
        YW5kbGVySW5mbyhuYW1lLCBoYW5kbGVyLCBuYW1lcywgb2JqZWN0cywgb2xk
        SGFuZGxlckluZm8pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBvYmpl
        Y3RzLnBvcCgpOwogICAgICAgIH0KICAgICAgfSBlbHNlIGlmIChvbGRIYW5k
        bGVySW5mbyAmJiBvbGRIYW5kbGVySW5mby5uYW1lID09PSBuYW1lKSB7CiAg
        ICAgICAgLy8gUmV1c2UgdGhlIG1hdGNoaW5nIG9sZEhhbmRsZXJJbmZvCiAg
        ICAgICAgcmV0dXJuIG9sZEhhbmRsZXJJbmZvOwogICAgICB9IGVsc2Ugewog
        ICAgICAgIC8vIElkZWFsbHkgd2Ugc2hvdWxkIHRocm93IHRoaXMgZXJyb3Ig
        dG8gcHJvdmlkZSBtYXhpbWFsCiAgICAgICAgLy8gaW5mb3JtYXRpb24gdG8g
        dGhlIHVzZXIgdGhhdCBub3QgZW5vdWdoIGNvbnRleHQgb2JqZWN0cwogICAg
        ICAgIC8vIHdlcmUgcHJvdmlkZWQsIGJ1dCB0aGlzIHByb3ZlcyB0b28gY3Vt
        YmVyc29tZSBpbiBFbWJlcgogICAgICAgIC8vIGluIGNhc2VzIHdoZXJlIGlu
        bmVyIHRlbXBsYXRlIGhlbHBlcnMgYXJlIGV2YWx1YXRlZAogICAgICAgIC8v
        IGJlZm9yZSBwYXJlbnQgaGVscGVycyB1bi1yZW5kZXIsIGluIHdoaWNoIGNh
        c2VzIHRoaXMKICAgICAgICAvLyBlcnJvciBzb21ld2hhdCBwcmVtYXR1cmVs
        eSBmaXJlcy4KICAgICAgICAvL3Rocm93IG5ldyBFcnJvcigiTm90IGVub3Vn
        aCBjb250ZXh0IG9iamVjdHMgd2VyZSBwcm92aWRlZCB0byBjb21wbGV0ZSBh
        IHRyYW5zaXRpb24gdG8gIiArIHRhcmdldFJvdXRlTmFtZSArICIuIFNwZWNp
        ZmljYWxseSwgdGhlICIgKyBuYW1lICsgIiByb3V0ZSBuZWVkcyBhbiBvYmpl
        Y3QgdGhhdCBjYW4gYmUgc2VyaWFsaXplZCBpbnRvIGl0cyBkeW5hbWljIFVS
        TCBzZWdtZW50cyBbIiArIG5hbWVzLmpvaW4oJywgJykgKyAiXSIpOwogICAg
        ICAgIHJldHVybiBvbGRIYW5kbGVySW5mbzsKICAgICAgfQoKICAgICAgcmV0
        dXJuIG5ldyBVbnJlc29sdmVkSGFuZGxlckluZm9CeU9iamVjdCh7CiAgICAg
        ICAgbmFtZTogbmFtZSwKICAgICAgICBoYW5kbGVyOiBoYW5kbGVyLAogICAg
        ICAgIGNvbnRleHQ6IG9iamVjdFRvVXNlLAogICAgICAgIG5hbWVzOiBuYW1l
        cwogICAgICB9KTsKICAgIH07CgogICAgTmFtZWRUcmFuc2l0aW9uSW50ZW50
        LnByb3RvdHlwZS5jcmVhdGVQYXJhbUhhbmRsZXJJbmZvID0gZnVuY3Rpb24o
        bmFtZSwgaGFuZGxlciwgbmFtZXMsIG9iamVjdHMsIG9sZEhhbmRsZXJJbmZv
        KSB7CiAgICAgIHZhciBwYXJhbXMgPSB7fTsKCiAgICAgIC8vIFNvYWsgdXAg
        YWxsIHRoZSBwcm92aWRlZCBzdHJpbmcvbnVtYmVycwogICAgICB2YXIgbnVt
        TmFtZXMgPSBuYW1lcy5sZW5ndGg7CiAgICAgIHdoaWxlIChudW1OYW1lcy0t
        KSB7CgogICAgICAgIC8vIE9ubHkgdXNlIG9sZCBwYXJhbXMgaWYgdGhlIG5h
        bWVzIG1hdGNoIHdpdGggdGhlIG5ldyBoYW5kbGVyCiAgICAgICAgdmFyIG9s
        ZFBhcmFtcyA9IChvbGRIYW5kbGVySW5mbyAmJiBuYW1lID09PSBvbGRIYW5k
        bGVySW5mby5uYW1lICYmIG9sZEhhbmRsZXJJbmZvLnBhcmFtcykgfHwge307
        CgogICAgICAgIHZhciBwZWVrID0gb2JqZWN0c1tvYmplY3RzLmxlbmd0aCAt
        IDFdOwogICAgICAgIHZhciBwYXJhbU5hbWUgPSBuYW1lc1tudW1OYW1lc107
        CiAgICAgICAgaWYgKGlzUGFyYW0ocGVlaykpIHsKICAgICAgICAgIHBhcmFt
        c1twYXJhbU5hbWVdID0gIiIgKyBvYmplY3RzLnBvcCgpOwogICAgICAgIH0g
        ZWxzZSB7CiAgICAgICAgICAvLyBJZiB3ZSdyZSBoZXJlLCB0aGlzIG1lYW5z
        IG9ubHkgc29tZSBvZiB0aGUgcGFyYW1zCiAgICAgICAgICAvLyB3ZXJlIHN0
        cmluZy9udW1iZXIgcGFyYW1zLCBzbyB0cnkgYW5kIHVzZSBhIHBhcmFtCiAg
        ICAgICAgICAvLyB2YWx1ZSBmcm9tIGEgcHJldmlvdXMgaGFuZGxlci4KICAg
        ICAgICAgIGlmIChvbGRQYXJhbXMuaGFzT3duUHJvcGVydHkocGFyYW1OYW1l
        KSkgewogICAgICAgICAgICBwYXJhbXNbcGFyYW1OYW1lXSA9IG9sZFBhcmFt
        c1twYXJhbU5hbWVdOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAg
        dGhyb3cgbmV3IEVycm9yKCJZb3UgZGlkbid0IHByb3ZpZGUgZW5vdWdoIHN0
        cmluZy9udW1lcmljIHBhcmFtZXRlcnMgdG8gc2F0aXNmeSBhbGwgb2YgdGhl
        IGR5bmFtaWMgc2VnbWVudHMgZm9yIHJvdXRlICIgKyBuYW1lKTsKICAgICAg
        ICAgIH0KICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiBuZXcgVW5y
        ZXNvbHZlZEhhbmRsZXJJbmZvQnlQYXJhbSh7CiAgICAgICAgbmFtZTogbmFt
        ZSwKICAgICAgICBoYW5kbGVyOiBoYW5kbGVyLAogICAgICAgIHBhcmFtczog
        cGFyYW1zCiAgICAgIH0pOwogICAgfTsKCiAgICBfX2V4cG9ydHNfXy5OYW1l
        ZFRyYW5zaXRpb25JbnRlbnQgPSBOYW1lZFRyYW5zaXRpb25JbnRlbnQ7CiAg
        fSk7CmRlZmluZSgicm91dGVyL3RyYW5zaXRpb24taW50ZW50L3VybC10cmFu
        c2l0aW9uLWludGVudCIsIAogIFsiLi4vdHJhbnNpdGlvbi1pbnRlbnQiLCIu
        Li90cmFuc2l0aW9uLXN0YXRlIiwiLi4vaGFuZGxlci1pbmZvIiwiLi4vdXRp
        bHMiLCJleHBvcnRzIl0sCiAgZnVuY3Rpb24oX19kZXBlbmRlbmN5MV9fLCBf
        X2RlcGVuZGVuY3kyX18sIF9fZGVwZW5kZW5jeTNfXywgX19kZXBlbmRlbmN5
        NF9fLCBfX2V4cG9ydHNfXykgewogICAgInVzZSBzdHJpY3QiOwogICAgdmFy
        IFRyYW5zaXRpb25JbnRlbnQgPSBfX2RlcGVuZGVuY3kxX18uVHJhbnNpdGlv
        bkludGVudDsKICAgIHZhciBUcmFuc2l0aW9uU3RhdGUgPSBfX2RlcGVuZGVu
        Y3kyX18uVHJhbnNpdGlvblN0YXRlOwogICAgdmFyIFVucmVzb2x2ZWRIYW5k
        bGVySW5mb0J5UGFyYW0gPSBfX2RlcGVuZGVuY3kzX18uVW5yZXNvbHZlZEhh
        bmRsZXJJbmZvQnlQYXJhbTsKICAgIHZhciBvQ3JlYXRlID0gX19kZXBlbmRl
        bmN5NF9fLm9DcmVhdGU7CiAgICB2YXIgbWVyZ2UgPSBfX2RlcGVuZGVuY3k0
        X18ubWVyZ2U7CgogICAgZnVuY3Rpb24gVVJMVHJhbnNpdGlvbkludGVudChw
        cm9wcykgewogICAgICBUcmFuc2l0aW9uSW50ZW50LmNhbGwodGhpcywgcHJv
        cHMpOwogICAgfQoKICAgIFVSTFRyYW5zaXRpb25JbnRlbnQucHJvdG90eXBl
        ID0gb0NyZWF0ZShUcmFuc2l0aW9uSW50ZW50LnByb3RvdHlwZSk7CiAgICBV
        UkxUcmFuc2l0aW9uSW50ZW50LnByb3RvdHlwZS5hcHBseVRvU3RhdGUgPSBm
        dW5jdGlvbihvbGRTdGF0ZSwgcmVjb2duaXplciwgZ2V0SGFuZGxlcikgewog
        ICAgICB2YXIgbmV3U3RhdGUgPSBuZXcgVHJhbnNpdGlvblN0YXRlKCk7Cgog
        ICAgICB2YXIgcmVzdWx0cyA9IHJlY29nbml6ZXIucmVjb2duaXplKHRoaXMu
        dXJsKSwKICAgICAgICAgIHF1ZXJ5UGFyYW1zID0ge30sCiAgICAgICAgICBp
        LCBsZW47CgogICAgICBpZiAoIXJlc3VsdHMpIHsKICAgICAgICB0aHJvdyBu
        ZXcgVW5yZWNvZ25pemVkVVJMRXJyb3IodGhpcy51cmwpOwogICAgICB9Cgog
        ICAgICB2YXIgc3RhdGVzRGlmZmVyID0gZmFsc2U7CgogICAgICBmb3IgKGkg
        PSAwLCBsZW4gPSByZXN1bHRzLmxlbmd0aDsgaSA8IGxlbjsgKytpKSB7CiAg
        ICAgICAgdmFyIHJlc3VsdCA9IHJlc3VsdHNbaV07CiAgICAgICAgdmFyIG5h
        bWUgPSByZXN1bHQuaGFuZGxlcjsKICAgICAgICB2YXIgaGFuZGxlciA9IGdl
        dEhhbmRsZXIobmFtZSk7CgogICAgICAgIGlmIChoYW5kbGVyLmluYWNjZXNz
        aWJsZUJ5VVJMKSB7CiAgICAgICAgICB0aHJvdyBuZXcgVW5yZWNvZ25pemVk
        VVJMRXJyb3IodGhpcy51cmwpOwogICAgICAgIH0KCiAgICAgICAgdmFyIG5l
        d0hhbmRsZXJJbmZvID0gbmV3IFVucmVzb2x2ZWRIYW5kbGVySW5mb0J5UGFy
        YW0oewogICAgICAgICAgbmFtZTogbmFtZSwKICAgICAgICAgIGhhbmRsZXI6
        IGhhbmRsZXIsCiAgICAgICAgICBwYXJhbXM6IHJlc3VsdC5wYXJhbXMKICAg
        ICAgICB9KTsKCiAgICAgICAgdmFyIG9sZEhhbmRsZXJJbmZvID0gb2xkU3Rh
        dGUuaGFuZGxlckluZm9zW2ldOwogICAgICAgIGlmIChzdGF0ZXNEaWZmZXIg
        fHwgbmV3SGFuZGxlckluZm8uc2hvdWxkU3VwZXJjZWRlKG9sZEhhbmRsZXJJ
        bmZvKSkgewogICAgICAgICAgc3RhdGVzRGlmZmVyID0gdHJ1ZTsKICAgICAg
        ICAgIG5ld1N0YXRlLmhhbmRsZXJJbmZvc1tpXSA9IG5ld0hhbmRsZXJJbmZv
        OwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBuZXdTdGF0ZS5oYW5kbGVy
        SW5mb3NbaV0gPSBvbGRIYW5kbGVySW5mbzsKICAgICAgICB9CiAgICAgIH0K
        CiAgICAgIG1lcmdlKG5ld1N0YXRlLnF1ZXJ5UGFyYW1zLCByZXN1bHRzLnF1
        ZXJ5UGFyYW1zKTsKCiAgICAgIHJldHVybiBuZXdTdGF0ZTsKICAgIH07Cgog
        ICAgLyoqCiAgICAgIFByb21pc2UgcmVqZWN0IHJlYXNvbnMgcGFzc2VkIHRv
        IHByb21pc2UgcmVqZWN0aW9uCiAgICAgIGhhbmRsZXJzIGZvciBmYWlsZWQg
        dHJhbnNpdGlvbnMuCiAgICAgKi8KICAgIGZ1bmN0aW9uIFVucmVjb2duaXpl
        ZFVSTEVycm9yKG1lc3NhZ2UpIHsKICAgICAgdGhpcy5tZXNzYWdlID0gKG1l
        c3NhZ2UgfHwgIlVucmVjb2duaXplZFVSTEVycm9yIik7CiAgICAgIHRoaXMu
        bmFtZSA9ICJVbnJlY29nbml6ZWRVUkxFcnJvciI7CiAgICB9CgogICAgX19l
        eHBvcnRzX18uVVJMVHJhbnNpdGlvbkludGVudCA9IFVSTFRyYW5zaXRpb25J
        bnRlbnQ7CiAgfSk7CmRlZmluZSgicm91dGVyL3RyYW5zaXRpb24tc3RhdGUi
        LCAKICBbIi4vaGFuZGxlci1pbmZvIiwiLi91dGlscyIsInJzdnAiLCJleHBv
        cnRzIl0sCiAgZnVuY3Rpb24oX19kZXBlbmRlbmN5MV9fLCBfX2RlcGVuZGVu
        Y3kyX18sIF9fZGVwZW5kZW5jeTNfXywgX19leHBvcnRzX18pIHsKICAgICJ1
        c2Ugc3RyaWN0IjsKICAgIHZhciBSZXNvbHZlZEhhbmRsZXJJbmZvID0gX19k
        ZXBlbmRlbmN5MV9fLlJlc29sdmVkSGFuZGxlckluZm87CiAgICB2YXIgZm9y
        RWFjaCA9IF9fZGVwZW5kZW5jeTJfXy5mb3JFYWNoOwogICAgdmFyIHByb21p
        c2VMYWJlbCA9IF9fZGVwZW5kZW5jeTJfXy5wcm9taXNlTGFiZWw7CiAgICB2
        YXIgcmVzb2x2ZSA9IF9fZGVwZW5kZW5jeTNfXy5yZXNvbHZlOwogICAgdmFy
        IHJlamVjdCA9IF9fZGVwZW5kZW5jeTNfXy5yZWplY3Q7CgogICAgZnVuY3Rp
        b24gVHJhbnNpdGlvblN0YXRlKG90aGVyKSB7CiAgICAgIHRoaXMuaGFuZGxl
        ckluZm9zID0gW107CiAgICAgIHRoaXMucXVlcnlQYXJhbXMgPSB7fTsKICAg
        ICAgdGhpcy5wYXJhbXMgPSB7fTsKICAgIH0KCiAgICBUcmFuc2l0aW9uU3Rh
        dGUucHJvdG90eXBlID0gewogICAgICBoYW5kbGVySW5mb3M6IG51bGwsCiAg
        ICAgIHF1ZXJ5UGFyYW1zOiBudWxsLAogICAgICBwYXJhbXM6IG51bGwsCgog
        ICAgICBwcm9taXNlTGFiZWw6IGZ1bmN0aW9uKGxhYmVsKSB7CiAgICAgICAg
        dmFyIHRhcmdldE5hbWUgPSAnJzsKICAgICAgICBmb3JFYWNoKHRoaXMuaGFu
        ZGxlckluZm9zLCBmdW5jdGlvbihoYW5kbGVySW5mbykgewogICAgICAgICAg
        aWYgKHRhcmdldE5hbWUgIT09ICcnKSB7CiAgICAgICAgICAgIHRhcmdldE5h
        bWUgKz0gJy4nOwogICAgICAgICAgfQogICAgICAgICAgdGFyZ2V0TmFtZSAr
        PSBoYW5kbGVySW5mby5uYW1lOwogICAgICAgIH0pOwogICAgICAgIHJldHVy
        biBwcm9taXNlTGFiZWwoIiciICsgdGFyZ2V0TmFtZSArICInOiAiICsgbGFi
        ZWwpOwogICAgICB9LAoKICAgICAgcmVzb2x2ZTogZnVuY3Rpb24oYXN5bmMs
        IHNob3VsZENvbnRpbnVlLCBwYXlsb2FkKSB7CiAgICAgICAgdmFyIHNlbGYg
        PSB0aGlzOwogICAgICAgIC8vIEZpcnN0LCBjYWxjdWxhdGUgcGFyYW1zIGZv
        ciB0aGlzIHN0YXRlLiBUaGlzIGlzIHVzZWZ1bAogICAgICAgIC8vIGluZm9y
        bWF0aW9uIHRvIHByb3ZpZGUgdG8gdGhlIHZhcmlvdXMgcm91dGUgaG9va3Mu
        CiAgICAgICAgdmFyIHBhcmFtcyA9IHRoaXMucGFyYW1zOwogICAgICAgIGZv
        ckVhY2godGhpcy5oYW5kbGVySW5mb3MsIGZ1bmN0aW9uKGhhbmRsZXJJbmZv
        KSB7CiAgICAgICAgICBwYXJhbXNbaGFuZGxlckluZm8ubmFtZV0gPSBoYW5k
        bGVySW5mby5wYXJhbXMgfHwge307CiAgICAgICAgfSk7CgogICAgICAgIHBh
        eWxvYWQgPSBwYXlsb2FkIHx8IHt9OwogICAgICAgIHBheWxvYWQucmVzb2x2
        ZUluZGV4ID0gMDsKCiAgICAgICAgdmFyIGN1cnJlbnRTdGF0ZSA9IHRoaXM7
        CiAgICAgICAgdmFyIHdhc0Fib3J0ZWQgPSBmYWxzZTsKCiAgICAgICAgLy8g
        VGhlIHByZWx1ZGUgUlNWUC5yZXNvbHZlKCkgYXN5bmNzIHVzIGludG8gdGhl
        IHByb21pc2UgbGFuZC4KICAgICAgICByZXR1cm4gcmVzb2x2ZShudWxsLCB0
        aGlzLnByb21pc2VMYWJlbCgiU3RhcnQgdHJhbnNpdGlvbiIpKQogICAgICAg
        IC50aGVuKHJlc29sdmVPbmVIYW5kbGVySW5mbywgbnVsbCwgdGhpcy5wcm9t
        aXNlTGFiZWwoJ1Jlc29sdmUgaGFuZGxlcicpKVsnY2F0Y2gnXShoYW5kbGVF
        cnJvciwgdGhpcy5wcm9taXNlTGFiZWwoJ0hhbmRsZSBlcnJvcicpKTsKCiAg
        ICAgICAgZnVuY3Rpb24gaW5uZXJTaG91bGRDb250aW51ZSgpIHsKICAgICAg
        ICAgIHJldHVybiByZXNvbHZlKHNob3VsZENvbnRpbnVlKCksIHByb21pc2VM
        YWJlbCgiQ2hlY2sgaWYgc2hvdWxkIGNvbnRpbnVlIikpWydjYXRjaCddKGZ1
        bmN0aW9uKHJlYXNvbikgewogICAgICAgICAgICAvLyBXZSBkaXN0aW5ndWlz
        aCBiZXR3ZWVuIGVycm9ycyB0aGF0IG9jY3VycmVkCiAgICAgICAgICAgIC8v
        IGR1cmluZyByZXNvbHV0aW9uIChlLmcuIGJlZm9yZU1vZGVsL21vZGVsL2Fm
        dGVyTW9kZWwpLAogICAgICAgICAgICAvLyBhbmQgYWJvcnRzIGR1ZSB0byBh
        IHJlamVjdGluZyBwcm9taXNlIGZyb20gc2hvdWxkQ29udGludWUoKS4KICAg
        ICAgICAgICAgd2FzQWJvcnRlZCA9IHRydWU7CiAgICAgICAgICAgIHJldHVy
        biByZWplY3QocmVhc29uKTsKICAgICAgICAgIH0sIHByb21pc2VMYWJlbCgi
        SGFuZGxlIGFib3J0IikpOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24g
        aGFuZGxlRXJyb3IoZXJyb3IpIHsKICAgICAgICAgIC8vIFRoaXMgaXMgdGhl
        IG9ubHkgcG9zc2libGUKICAgICAgICAgIC8vIHJlamVjdCB2YWx1ZSBvZiBU
        cmFuc2l0aW9uU3RhdGUjcmVzb2x2ZQogICAgICAgICAgdmFyIGhhbmRsZXJJ
        bmZvcyA9IGN1cnJlbnRTdGF0ZS5oYW5kbGVySW5mb3M7CiAgICAgICAgICB2
        YXIgZXJyb3JIYW5kbGVySW5kZXggPSBwYXlsb2FkLnJlc29sdmVJbmRleCA+
        PSBoYW5kbGVySW5mb3MubGVuZ3RoID8KICAgICAgICAgICAgICAgICAgICAg
        ICAgICAgICAgICAgIGhhbmRsZXJJbmZvcy5sZW5ndGggLSAxIDogcGF5bG9h
        ZC5yZXNvbHZlSW5kZXg7CiAgICAgICAgICByZXR1cm4gcmVqZWN0KHsKICAg
        ICAgICAgICAgZXJyb3I6IGVycm9yLAogICAgICAgICAgICBoYW5kbGVyV2l0
        aEVycm9yOiBjdXJyZW50U3RhdGUuaGFuZGxlckluZm9zW2Vycm9ySGFuZGxl
        ckluZGV4XS5oYW5kbGVyLAogICAgICAgICAgICB3YXNBYm9ydGVkOiB3YXNB
        Ym9ydGVkLAogICAgICAgICAgICBzdGF0ZTogY3VycmVudFN0YXRlCiAgICAg
        ICAgICB9KTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHByb2NlZWQo
        cmVzb2x2ZWRIYW5kbGVySW5mbykgewogICAgICAgICAgLy8gU3dhcCB0aGUg
        cHJldmlvdXNseSB1bnJlc29sdmVkIGhhbmRsZXJJbmZvIHdpdGgKICAgICAg
        ICAgIC8vIHRoZSByZXNvbHZlZCBoYW5kbGVySW5mbwogICAgICAgICAgY3Vy
        cmVudFN0YXRlLmhhbmRsZXJJbmZvc1twYXlsb2FkLnJlc29sdmVJbmRleCsr
        XSA9IHJlc29sdmVkSGFuZGxlckluZm87CgogICAgICAgICAgLy8gQ2FsbCB0
        aGUgcmVkaXJlY3QgaG9vay4gVGhlIHJlYXNvbiB3ZSBjYWxsIGl0IGhlcmUK
        ICAgICAgICAgIC8vIHZzLiBhZnRlck1vZGVsIGlzIHNvIHRoYXQgcmVkaXJl
        Y3RzIGludG8gY2hpbGQKICAgICAgICAgIC8vIHJvdXRlcyBkb24ndCByZS1y
        dW4gdGhlIG1vZGVsIGhvb2tzIGZvciB0aGlzCiAgICAgICAgICAvLyBhbHJl
        YWR5LXJlc29sdmVkIHJvdXRlLgogICAgICAgICAgdmFyIGhhbmRsZXIgPSBy
        ZXNvbHZlZEhhbmRsZXJJbmZvLmhhbmRsZXI7CiAgICAgICAgICBpZiAoaGFu
        ZGxlciAmJiBoYW5kbGVyLnJlZGlyZWN0KSB7CiAgICAgICAgICAgIGhhbmRs
        ZXIucmVkaXJlY3QocmVzb2x2ZWRIYW5kbGVySW5mby5jb250ZXh0LCBwYXls
        b2FkKTsKICAgICAgICAgIH0KCiAgICAgICAgICAvLyBQcm9jZWVkIGFmdGVy
        IGVuc3VyaW5nIHRoYXQgdGhlIHJlZGlyZWN0IGhvb2sKICAgICAgICAgIC8v
        IGRpZG4ndCBhYm9ydCB0aGlzIHRyYW5zaXRpb24gYnkgdHJhbnNpdGlvbmlu
        ZyBlbHNld2hlcmUuCiAgICAgICAgICByZXR1cm4gaW5uZXJTaG91bGRDb250
        aW51ZSgpLnRoZW4ocmVzb2x2ZU9uZUhhbmRsZXJJbmZvLCBudWxsLCBwcm9t
        aXNlTGFiZWwoJ1Jlc29sdmUgaGFuZGxlcicpKTsKICAgICAgICB9CgogICAg
        ICAgIGZ1bmN0aW9uIHJlc29sdmVPbmVIYW5kbGVySW5mbygpIHsKICAgICAg
        ICAgIGlmIChwYXlsb2FkLnJlc29sdmVJbmRleCA9PT0gY3VycmVudFN0YXRl
        LmhhbmRsZXJJbmZvcy5sZW5ndGgpIHsKICAgICAgICAgICAgLy8gVGhpcyBp
        cyBpcyB0aGUgb25seSBwb3NzaWJsZQogICAgICAgICAgICAvLyBmdWxmaWxs
        IHZhbHVlIG9mIFRyYW5zaXRpb25TdGF0ZSNyZXNvbHZlCiAgICAgICAgICAg
        IHJldHVybiB7CiAgICAgICAgICAgICAgZXJyb3I6IG51bGwsCiAgICAgICAg
        ICAgICAgc3RhdGU6IGN1cnJlbnRTdGF0ZQogICAgICAgICAgICB9OwogICAg
        ICAgICAgfQoKICAgICAgICAgIHZhciBoYW5kbGVySW5mbyA9IGN1cnJlbnRT
        dGF0ZS5oYW5kbGVySW5mb3NbcGF5bG9hZC5yZXNvbHZlSW5kZXhdOwoKICAg
        ICAgICAgIHJldHVybiBoYW5kbGVySW5mby5yZXNvbHZlKGFzeW5jLCBpbm5l
        clNob3VsZENvbnRpbnVlLCBwYXlsb2FkKQogICAgICAgICAgICAgICAgICAg
        ICAgICAgICAgLnRoZW4ocHJvY2VlZCwgbnVsbCwgcHJvbWlzZUxhYmVsKCdQ
        cm9jZWVkJykpOwogICAgICAgIH0KICAgICAgfQogICAgfTsKCiAgICBfX2V4
        cG9ydHNfXy5UcmFuc2l0aW9uU3RhdGUgPSBUcmFuc2l0aW9uU3RhdGU7CiAg
        fSk7CmRlZmluZSgicm91dGVyL3RyYW5zaXRpb24iLCAKICBbInJzdnAiLCIu
        L2hhbmRsZXItaW5mbyIsIi4vdXRpbHMiLCJleHBvcnRzIl0sCiAgZnVuY3Rp
        b24oX19kZXBlbmRlbmN5MV9fLCBfX2RlcGVuZGVuY3kyX18sIF9fZGVwZW5k
        ZW5jeTNfXywgX19leHBvcnRzX18pIHsKICAgICJ1c2Ugc3RyaWN0IjsKICAg
        IHZhciByZWplY3QgPSBfX2RlcGVuZGVuY3kxX18ucmVqZWN0OwogICAgdmFy
        IHJlc29sdmUgPSBfX2RlcGVuZGVuY3kxX18ucmVzb2x2ZTsKICAgIHZhciBS
        ZXNvbHZlZEhhbmRsZXJJbmZvID0gX19kZXBlbmRlbmN5Ml9fLlJlc29sdmVk
        SGFuZGxlckluZm87CiAgICB2YXIgdHJpZ2dlciA9IF9fZGVwZW5kZW5jeTNf
        Xy50cmlnZ2VyOwogICAgdmFyIHNsaWNlID0gX19kZXBlbmRlbmN5M19fLnNs
        aWNlOwogICAgdmFyIGxvZyA9IF9fZGVwZW5kZW5jeTNfXy5sb2c7CiAgICB2
        YXIgcHJvbWlzZUxhYmVsID0gX19kZXBlbmRlbmN5M19fLnByb21pc2VMYWJl
        bDsKCiAgICAvKioKICAgICAgQHByaXZhdGUKCiAgICAgIEEgVHJhbnNpdGlv
        biBpcyBhIHRoZW5uYWJsZSAoYSBwcm9taXNlLWxpa2Ugb2JqZWN0KSB0aGF0
        IHJlcHJlc2VudHMKICAgICAgYW4gYXR0ZW1wdCB0byB0cmFuc2l0aW9uIHRv
        IGFub3RoZXIgcm91dGUuIEl0IGNhbiBiZSBhYm9ydGVkLCBlaXRoZXIKICAg
        ICAgZXhwbGljaXRseSB2aWEgYGFib3J0YCBvciBieSBhdHRlbXB0aW5nIGFu
        b3RoZXIgdHJhbnNpdGlvbiB3aGlsZSBhCiAgICAgIHByZXZpb3VzIG9uZSBp
        cyBzdGlsbCB1bmRlcndheS4gQW4gYWJvcnRlZCB0cmFuc2l0aW9uIGNhbiBh
        bHNvCiAgICAgIGJlIGByZXRyeSgpYGQgbGF0ZXIuCiAgICAgKi8KICAgIGZ1
        bmN0aW9uIFRyYW5zaXRpb24ocm91dGVyLCBpbnRlbnQsIHN0YXRlLCBlcnJv
        cikgewogICAgICB2YXIgdHJhbnNpdGlvbiA9IHRoaXM7CiAgICAgIHRoaXMu
        c3RhdGUgPSBzdGF0ZSB8fCByb3V0ZXIuc3RhdGU7CiAgICAgIHRoaXMuaW50
        ZW50ID0gaW50ZW50OwogICAgICB0aGlzLnJvdXRlciA9IHJvdXRlcjsKICAg
        ICAgdGhpcy5kYXRhID0gdGhpcy5pbnRlbnQgJiYgdGhpcy5pbnRlbnQuZGF0
        YSB8fCB7fTsKICAgICAgdGhpcy5yZXNvbHZlZE1vZGVscyA9IHt9OwogICAg
        ICB0aGlzLnF1ZXJ5UGFyYW1zID0ge307CgogICAgICBpZiAoZXJyb3IpIHsK
        ICAgICAgICB0aGlzLnByb21pc2UgPSByZWplY3QoZXJyb3IpOwogICAgICAg
        IHJldHVybjsKICAgICAgfQoKICAgICAgaWYgKHN0YXRlKSB7CiAgICAgICAg
        dGhpcy5wYXJhbXMgPSBzdGF0ZS5wYXJhbXM7CiAgICAgICAgdGhpcy5xdWVy
        eVBhcmFtcyA9IHN0YXRlLnF1ZXJ5UGFyYW1zOwoKICAgICAgICB2YXIgbGVu
        ID0gc3RhdGUuaGFuZGxlckluZm9zLmxlbmd0aDsKICAgICAgICBpZiAobGVu
        KSB7CiAgICAgICAgICB0aGlzLnRhcmdldE5hbWUgPSBzdGF0ZS5oYW5kbGVy
        SW5mb3Nbc3RhdGUuaGFuZGxlckluZm9zLmxlbmd0aC0xXS5uYW1lOwogICAg
        ICAgIH0KCiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47ICsraSkg
        ewogICAgICAgICAgdmFyIGhhbmRsZXJJbmZvID0gc3RhdGUuaGFuZGxlcklu
        Zm9zW2ldOwogICAgICAgICAgaWYgKCEoaGFuZGxlckluZm8gaW5zdGFuY2Vv
        ZiBSZXNvbHZlZEhhbmRsZXJJbmZvKSkgewogICAgICAgICAgICBicmVhazsK
        ICAgICAgICAgIH0KICAgICAgICAgIHRoaXMucGl2b3RIYW5kbGVyID0gaGFu
        ZGxlckluZm8uaGFuZGxlcjsKICAgICAgICB9CgogICAgICAgIHRoaXMuc2Vx
        dWVuY2UgPSBUcmFuc2l0aW9uLmN1cnJlbnRTZXF1ZW5jZSsrOwogICAgICAg
        IHRoaXMucHJvbWlzZSA9IHN0YXRlLnJlc29sdmUocm91dGVyLmFzeW5jLCBj
        aGVja0ZvckFib3J0LCB0aGlzKVsnY2F0Y2gnXShmdW5jdGlvbihyZXN1bHQp
        IHsKICAgICAgICAgIGlmIChyZXN1bHQud2FzQWJvcnRlZCkgewogICAgICAg
        ICAgICByZXR1cm4gcmVqZWN0KGxvZ0Fib3J0KHRyYW5zaXRpb24pKTsKICAg
        ICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRyYW5zaXRpb24udHJpZ2dl
        cignZXJyb3InLCByZXN1bHQuZXJyb3IsIHRyYW5zaXRpb24sIHJlc3VsdC5o
        YW5kbGVyV2l0aEVycm9yKTsKICAgICAgICAgICAgdHJhbnNpdGlvbi5hYm9y
        dCgpOwogICAgICAgICAgICByZXR1cm4gcmVqZWN0KHJlc3VsdC5lcnJvcik7
        CiAgICAgICAgICB9CiAgICAgICAgfSwgcHJvbWlzZUxhYmVsKCdIYW5kbGUg
        QWJvcnQnKSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5wcm9taXNl
        ID0gcmVzb2x2ZSh0aGlzLnN0YXRlKTsKICAgICAgICB0aGlzLnBhcmFtcyA9
        IHt9OwogICAgICB9CgogICAgICBmdW5jdGlvbiBjaGVja0ZvckFib3J0KCkg
        ewogICAgICAgIGlmICh0cmFuc2l0aW9uLmlzQWJvcnRlZCkgewogICAgICAg
        ICAgcmV0dXJuIHJlamVjdCh1bmRlZmluZWQsIHByb21pc2VMYWJlbCgiVHJh
        bnNpdGlvbiBhYm9ydGVkIC0gcmVqZWN0IikpOwogICAgICAgIH0KICAgICAg
        fQogICAgfQoKICAgIFRyYW5zaXRpb24uY3VycmVudFNlcXVlbmNlID0gMDsK
        CiAgICBUcmFuc2l0aW9uLnByb3RvdHlwZSA9IHsKICAgICAgdGFyZ2V0TmFt
        ZTogbnVsbCwKICAgICAgdXJsTWV0aG9kOiAndXBkYXRlJywKICAgICAgaW50
        ZW50OiBudWxsLAogICAgICBwYXJhbXM6IG51bGwsCiAgICAgIHBpdm90SGFu
        ZGxlcjogbnVsbCwKICAgICAgcmVzb2x2ZUluZGV4OiAwLAogICAgICBoYW5k
        bGVySW5mb3M6IG51bGwsCiAgICAgIHJlc29sdmVkTW9kZWxzOiBudWxsLAog
        ICAgICBpc0FjdGl2ZTogdHJ1ZSwKICAgICAgc3RhdGU6IG51bGwsCgogICAg
        ICAvKioKICAgICAgICBAcHVibGljCgogICAgICAgIFRoZSBUcmFuc2l0aW9u
        J3MgaW50ZXJuYWwgcHJvbWlzZS4gQ2FsbGluZyBgLnRoZW5gIG9uIHRoaXMg
        cHJvcGVydHkKICAgICAgICBpcyB0aGF0IHNhbWUgYXMgY2FsbGluZyBgLnRo
        ZW5gIG9uIHRoZSBUcmFuc2l0aW9uIG9iamVjdCBpdHNlbGYsIGJ1dAogICAg
        ICAgIHRoaXMgcHJvcGVydHkgaXMgZXhwb3NlZCBmb3Igd2hlbiB5b3Ugd2Fu
        dCB0byBwYXNzIGFyb3VuZCBhCiAgICAgICAgVHJhbnNpdGlvbidzIHByb21p
        c2UsIGJ1dCBub3QgdGhlIFRyYW5zaXRpb24gb2JqZWN0IGl0c2VsZiwgc2lu
        Y2UKICAgICAgICBUcmFuc2l0aW9uIG9iamVjdCBjYW4gYmUgZXh0ZXJuYWxs
        eSBgYWJvcnRgZWQsIHdoaWxlIHRoZSBwcm9taXNlCiAgICAgICAgY2Fubm90
        LgogICAgICAgKi8KICAgICAgcHJvbWlzZTogbnVsbCwKCiAgICAgIC8qKgog
        ICAgICAgIEBwdWJsaWMKCiAgICAgICAgQ3VzdG9tIHN0YXRlIGNhbiBiZSBz
        dG9yZWQgb24gYSBUcmFuc2l0aW9uJ3MgYGRhdGFgIG9iamVjdC4KICAgICAg
        ICBUaGlzIGNhbiBiZSB1c2VmdWwgZm9yIGRlY29yYXRpbmcgYSBUcmFuc2l0
        aW9uIHdpdGhpbiBhbiBlYXJsaWVyCiAgICAgICAgaG9vayBhbmQgc2hhcmVk
        IHdpdGggYSBsYXRlciBob29rLiBQcm9wZXJ0aWVzIHNldCBvbiBgZGF0YWAg
        d2lsbAogICAgICAgIGJlIGNvcGllZCB0byBuZXcgdHJhbnNpdGlvbnMgZ2Vu
        ZXJhdGVkIGJ5IGNhbGxpbmcgYHJldHJ5YCBvbiB0aGlzCiAgICAgICAgdHJh
        bnNpdGlvbi4KICAgICAgICovCiAgICAgIGRhdGE6IG51bGwsCgogICAgICAv
        KioKICAgICAgICBAcHVibGljCgogICAgICAgIEEgc3RhbmRhcmQgcHJvbWlz
        ZSBob29rIHRoYXQgcmVzb2x2ZXMgaWYgdGhlIHRyYW5zaXRpb24KICAgICAg
        ICBzdWNjZWVkcyBhbmQgcmVqZWN0cyBpZiBpdCBmYWlscy9yZWRpcmVjdHMv
        YWJvcnRzLgoKICAgICAgICBGb3J3YXJkcyB0byB0aGUgaW50ZXJuYWwgYHBy
        b21pc2VgIHByb3BlcnR5IHdoaWNoIHlvdSBjYW4KICAgICAgICB1c2UgaW4g
        c2l0dWF0aW9ucyB3aGVyZSB5b3Ugd2FudCB0byBwYXNzIGFyb3VuZCBhIHRo
        ZW5uYWJsZSwKICAgICAgICBidXQgbm90IHRoZSBUcmFuc2l0aW9uIGl0c2Vs
        Zi4KCiAgICAgICAgQHBhcmFtIHtGdW5jdGlvbn0gc3VjY2VzcwogICAgICAg
        IEBwYXJhbSB7RnVuY3Rpb259IGZhaWx1cmUKICAgICAgICovCiAgICAgIHRo
        ZW46IGZ1bmN0aW9uKHN1Y2Nlc3MsIGZhaWx1cmUpIHsKICAgICAgICByZXR1
        cm4gdGhpcy5wcm9taXNlLnRoZW4oc3VjY2VzcywgZmFpbHVyZSk7CiAgICAg
        IH0sCgogICAgICAvKioKICAgICAgICBAcHVibGljCgogICAgICAgIEFib3J0
        cyB0aGUgVHJhbnNpdGlvbi4gTm90ZSB5b3UgY2FuIGFsc28gaW1wbGljaXRs
        eSBhYm9ydCBhIHRyYW5zaXRpb24KICAgICAgICBieSBpbml0aWF0aW5nIGFu
        b3RoZXIgdHJhbnNpdGlvbiB3aGlsZSBhIHByZXZpb3VzIG9uZSBpcyB1bmRl
        cndheS4KICAgICAgICovCiAgICAgIGFib3J0OiBmdW5jdGlvbigpIHsKICAg
        ICAgICBpZiAodGhpcy5pc0Fib3J0ZWQpIHsgcmV0dXJuIHRoaXM7IH0KICAg
        ICAgICBsb2codGhpcy5yb3V0ZXIsIHRoaXMuc2VxdWVuY2UsIHRoaXMudGFy
        Z2V0TmFtZSArICI6IHRyYW5zaXRpb24gd2FzIGFib3J0ZWQiKTsKICAgICAg
        ICB0aGlzLmlzQWJvcnRlZCA9IHRydWU7CiAgICAgICAgdGhpcy5pc0FjdGl2
        ZSA9IGZhbHNlOwogICAgICAgIHRoaXMucm91dGVyLmFjdGl2ZVRyYW5zaXRp
        b24gPSBudWxsOwogICAgICAgIHJldHVybiB0aGlzOwogICAgICB9LAoKICAg
        ICAgLyoqCiAgICAgICAgQHB1YmxpYwoKICAgICAgICBSZXRyaWVzIGEgcHJl
        dmlvdXNseS1hYm9ydGVkIHRyYW5zaXRpb24gKG1ha2luZyBzdXJlIHRvIGFi
        b3J0IHRoZQogICAgICAgIHRyYW5zaXRpb24gaWYgaXQncyBzdGlsbCBhY3Rp
        dmUpLiBSZXR1cm5zIGEgbmV3IHRyYW5zaXRpb24gdGhhdAogICAgICAgIHJl
        cHJlc2VudHMgdGhlIG5ldyBhdHRlbXB0IHRvIHRyYW5zaXRpb24uCiAgICAg
        ICAqLwogICAgICByZXRyeTogZnVuY3Rpb24oKSB7CiAgICAgICAgLy8gVE9E
        TzogYWRkIHRlc3RzIGZvciBtZXJnZWQgc3RhdGUgcmV0cnkoKXMKICAgICAg
        ICB0aGlzLmFib3J0KCk7CiAgICAgICAgcmV0dXJuIHRoaXMucm91dGVyLnRy
        YW5zaXRpb25CeUludGVudCh0aGlzLmludGVudCwgZmFsc2UpOwogICAgICB9
        LAoKICAgICAgLyoqCiAgICAgICAgQHB1YmxpYwoKICAgICAgICBTZXRzIHRo
        ZSBVUkwtY2hhbmdpbmcgbWV0aG9kIHRvIGJlIGVtcGxveWVkIGF0IHRoZSBl
        bmQgb2YgYQogICAgICAgIHN1Y2Nlc3NmdWwgdHJhbnNpdGlvbi4gQnkgZGVm
        YXVsdCwgYSBuZXcgVHJhbnNpdGlvbiB3aWxsIGp1c3QKICAgICAgICB1c2Ug
        YHVwZGF0ZVVSTGAsIGJ1dCBwYXNzaW5nICdyZXBsYWNlJyB0byB0aGlzIG1l
        dGhvZCB3aWxsCiAgICAgICAgY2F1c2UgdGhlIFVSTCB0byB1cGRhdGUgdXNp
        bmcgJ3JlcGxhY2VXaXRoJyBpbnN0ZWFkLiBPbWl0dGluZwogICAgICAgIGEg
        cGFyYW1ldGVyIHdpbGwgZGlzYWJsZSB0aGUgVVJMIGNoYW5nZSwgYWxsb3dp
        bmcgZm9yIHRyYW5zaXRpb25zCiAgICAgICAgdGhhdCBkb24ndCB1cGRhdGUg
        dGhlIFVSTCBhdCBjb21wbGV0aW9uICh0aGlzIGlzIGFsc28gdXNlZCBmb3IK
        ICAgICAgICBoYW5kbGVVUkwsIHNpbmNlIHRoZSBVUkwgaGFzIGFscmVhZHkg
        Y2hhbmdlZCBiZWZvcmUgdGhlCiAgICAgICAgdHJhbnNpdGlvbiB0b29rIHBs
        YWNlKS4KCiAgICAgICAgQHBhcmFtIHtTdHJpbmd9IG1ldGhvZCB0aGUgdHlw
        ZSBvZiBVUkwtY2hhbmdpbmcgbWV0aG9kIHRvIHVzZQogICAgICAgICAgYXQg
        dGhlIGVuZCBvZiBhIHRyYW5zaXRpb24uIEFjY2VwdGVkIHZhbHVlcyBhcmUg
        J3JlcGxhY2UnLAogICAgICAgICAgZmFsc3kgdmFsdWVzLCBvciBhbnkgb3Ro
        ZXIgbm9uLWZhbHN5IHZhbHVlICh3aGljaCBpcwogICAgICAgICAgaW50ZXJw
        cmV0ZWQgYXMgYW4gdXBkYXRlVVJMIHRyYW5zaXRpb24pLgoKICAgICAgICBA
        cmV0dXJuIHtUcmFuc2l0aW9ufSB0aGlzIHRyYW5zaXRpb24KICAgICAgICov
        CiAgICAgIG1ldGhvZDogZnVuY3Rpb24obWV0aG9kKSB7CiAgICAgICAgdGhp
        cy51cmxNZXRob2QgPSBtZXRob2Q7CiAgICAgICAgcmV0dXJuIHRoaXM7CiAg
        ICAgIH0sCgogICAgICAvKioKICAgICAgICBAcHVibGljCgogICAgICAgIEZp
        cmVzIGFuIGV2ZW50IG9uIHRoZSBjdXJyZW50IGxpc3Qgb2YgcmVzb2x2ZWQv
        cmVzb2x2aW5nCiAgICAgICAgaGFuZGxlcnMgd2l0aGluIHRoaXMgdHJhbnNp
        dGlvbi4gVXNlZnVsIGZvciBmaXJpbmcgZXZlbnRzCiAgICAgICAgb24gcm91
        dGUgaGllcmFyY2hpZXMgdGhhdCBoYXZlbid0IGZ1bGx5IGJlZW4gZW50ZXJl
        ZCB5ZXQuCgogICAgICAgIE5vdGU6IFRoaXMgbWV0aG9kIGlzIGFsc28gYWxp
        YXNlZCBhcyBgc2VuZGAKCiAgICAgICAgQHBhcmFtIHtCb29sZWFufSBbaWdu
        b3JlRmFpbHVyZT1mYWxzZV0gYSBib29sZWFuIHNwZWNpZnlpbmcgd2hldGhl
        ciB1bmhhbmRsZWQgZXZlbnRzIHRocm93IGFuIGVycm9yCiAgICAgICAgQHBh
        cmFtIHtTdHJpbmd9IG5hbWUgdGhlIG5hbWUgb2YgdGhlIGV2ZW50IHRvIGZp
        cmUKICAgICAgICovCiAgICAgIHRyaWdnZXI6IGZ1bmN0aW9uIChpZ25vcmVG
        YWlsdXJlKSB7CiAgICAgICAgdmFyIGFyZ3MgPSBzbGljZS5jYWxsKGFyZ3Vt
        ZW50cyk7CiAgICAgICAgaWYgKHR5cGVvZiBpZ25vcmVGYWlsdXJlID09PSAn
        Ym9vbGVhbicpIHsKICAgICAgICAgIGFyZ3Muc2hpZnQoKTsKICAgICAgICB9
        IGVsc2UgewogICAgICAgICAgLy8gVGhyb3cgZXJyb3JzIG9uIHVuaGFuZGxl
        ZCB0cmlnZ2VyIGV2ZW50cyBieSBkZWZhdWx0CiAgICAgICAgICBpZ25vcmVG
        YWlsdXJlID0gZmFsc2U7CiAgICAgICAgfQogICAgICAgIHRyaWdnZXIodGhp
        cy5yb3V0ZXIsIHRoaXMuc3RhdGUuaGFuZGxlckluZm9zLnNsaWNlKDAsIHRo
        aXMucmVzb2x2ZUluZGV4ICsgMSksIGlnbm9yZUZhaWx1cmUsIGFyZ3MpOwog
        ICAgICB9LAoKICAgICAgLyoqCiAgICAgICAgQHB1YmxpYwoKICAgICAgICBU
        cmFuc2l0aW9ucyBhcmUgYWJvcnRlZCBhbmQgdGhlaXIgcHJvbWlzZXMgcmVq
        ZWN0ZWQKICAgICAgICB3aGVuIHJlZGlyZWN0cyBvY2N1cjsgdGhpcyBtZXRo
        b2QgcmV0dXJucyBhIHByb21pc2UKICAgICAgICB0aGF0IHdpbGwgZm9sbG93
        IGFueSByZWRpcmVjdHMgdGhhdCBvY2N1ciBhbmQgZnVsZmlsbAogICAgICAg
        IHdpdGggdGhlIHZhbHVlIGZ1bGZpbGxlZCBieSBhbnkgcmVkaXJlY3Rpbmcg
        dHJhbnNpdGlvbnMKICAgICAgICB0aGF0IG9jY3VyLgoKICAgICAgICBAcmV0
        dXJuIHtQcm9taXNlfSBhIHByb21pc2UgdGhhdCBmdWxmaWxscyB3aXRoIHRo
        ZSBzYW1lCiAgICAgICAgICB2YWx1ZSB0aGF0IHRoZSBmaW5hbCByZWRpcmVj
        dGluZyB0cmFuc2l0aW9uIGZ1bGZpbGxzIHdpdGgKICAgICAgICovCiAgICAg
        IGZvbGxvd1JlZGlyZWN0czogZnVuY3Rpb24oKSB7CiAgICAgICAgdmFyIHJv
        dXRlciA9IHRoaXMucm91dGVyOwogICAgICAgIHJldHVybiB0aGlzLnByb21p
        c2VbJ2NhdGNoJ10oZnVuY3Rpb24ocmVhc29uKSB7CiAgICAgICAgICBpZiAo
        cm91dGVyLmFjdGl2ZVRyYW5zaXRpb24pIHsKICAgICAgICAgICAgcmV0dXJu
        IHJvdXRlci5hY3RpdmVUcmFuc2l0aW9uLmZvbGxvd1JlZGlyZWN0cygpOwog
        ICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIHJlamVjdChyZWFzb24pOwog
        ICAgICAgIH0pOwogICAgICB9LAoKICAgICAgdG9TdHJpbmc6IGZ1bmN0aW9u
        KCkgewogICAgICAgIHJldHVybiAiVHJhbnNpdGlvbiAoc2VxdWVuY2UgIiAr
        IHRoaXMuc2VxdWVuY2UgKyAiKSI7CiAgICAgIH0sCgogICAgICAvKioKICAg
        ICAgICBAcHJpdmF0ZQogICAgICAgKi8KICAgICAgbG9nOiBmdW5jdGlvbiht
        ZXNzYWdlKSB7CiAgICAgICAgbG9nKHRoaXMucm91dGVyLCB0aGlzLnNlcXVl
        bmNlLCBtZXNzYWdlKTsKICAgICAgfQogICAgfTsKCiAgICAvLyBBbGlhcyAn
        dHJpZ2dlcicgYXMgJ3NlbmQnCiAgICBUcmFuc2l0aW9uLnByb3RvdHlwZS5z
        ZW5kID0gVHJhbnNpdGlvbi5wcm90b3R5cGUudHJpZ2dlcjsKCiAgICAvKioK
        ICAgICAgQHByaXZhdGUKCiAgICAgIExvZ3MgYW5kIHJldHVybnMgYSBUcmFu
        c2l0aW9uQWJvcnRlZCBlcnJvci4KICAgICAqLwogICAgZnVuY3Rpb24gbG9n
        QWJvcnQodHJhbnNpdGlvbikgewogICAgICBsb2codHJhbnNpdGlvbi5yb3V0
        ZXIsIHRyYW5zaXRpb24uc2VxdWVuY2UsICJkZXRlY3RlZCBhYm9ydC4iKTsK
        ICAgICAgcmV0dXJuIG5ldyBUcmFuc2l0aW9uQWJvcnRlZCgpOwogICAgfQoK
        ICAgIGZ1bmN0aW9uIFRyYW5zaXRpb25BYm9ydGVkKG1lc3NhZ2UpIHsKICAg
        ICAgdGhpcy5tZXNzYWdlID0gKG1lc3NhZ2UgfHwgIlRyYW5zaXRpb25BYm9y
        dGVkIik7CiAgICAgIHRoaXMubmFtZSA9ICJUcmFuc2l0aW9uQWJvcnRlZCI7
        CiAgICB9CgogICAgX19leHBvcnRzX18uVHJhbnNpdGlvbiA9IFRyYW5zaXRp
        b247CiAgICBfX2V4cG9ydHNfXy5sb2dBYm9ydCA9IGxvZ0Fib3J0OwogICAg
        X19leHBvcnRzX18uVHJhbnNpdGlvbkFib3J0ZWQgPSBUcmFuc2l0aW9uQWJv
        cnRlZDsKICB9KTsKZGVmaW5lKCJyb3V0ZXIvdXRpbHMiLCAKICBbImV4cG9y
        dHMiXSwKICBmdW5jdGlvbihfX2V4cG9ydHNfXykgewogICAgInVzZSBzdHJp
        Y3QiOwogICAgdmFyIHNsaWNlID0gQXJyYXkucHJvdG90eXBlLnNsaWNlOwoK
        ICAgIGZ1bmN0aW9uIGlzQXJyYXkodGVzdCkgewogICAgICByZXR1cm4gT2Jq
        ZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHRlc3QpID09PSAiW29iamVj
        dCBBcnJheV0iOwogICAgfQoKICAgIGZ1bmN0aW9uIG1lcmdlKGhhc2gsIG90
        aGVyKSB7CiAgICAgIGZvciAodmFyIHByb3AgaW4gb3RoZXIpIHsKICAgICAg
        ICBpZiAob3RoZXIuaGFzT3duUHJvcGVydHkocHJvcCkpIHsgaGFzaFtwcm9w
        XSA9IG90aGVyW3Byb3BdOyB9CiAgICAgIH0KICAgIH0KCiAgICB2YXIgb0Ny
        ZWF0ZSA9IE9iamVjdC5jcmVhdGUgfHwgZnVuY3Rpb24ocHJvdG8pIHsKICAg
        ICAgZnVuY3Rpb24gRigpIHt9CiAgICAgIEYucHJvdG90eXBlID0gcHJvdG87
        CiAgICAgIHJldHVybiBuZXcgRigpOwogICAgfTsKCiAgICAvKioKICAgICAg
        QHByaXZhdGUKCiAgICAgIEV4dHJhY3RzIHF1ZXJ5IHBhcmFtcyBmcm9tIHRo
        ZSBlbmQgb2YgYW4gYXJyYXkKICAgICoqLwogICAgZnVuY3Rpb24gZXh0cmFj
        dFF1ZXJ5UGFyYW1zKGFycmF5KSB7CiAgICAgIHZhciBsZW4gPSAoYXJyYXkg
        JiYgYXJyYXkubGVuZ3RoKSwgaGVhZCwgcXVlcnlQYXJhbXM7CgogICAgICBp
        ZihsZW4gJiYgbGVuID4gMCAmJiBhcnJheVtsZW4gLSAxXSAmJiBhcnJheVts
        ZW4gLSAxXS5oYXNPd25Qcm9wZXJ0eSgncXVlcnlQYXJhbXMnKSkgewogICAg
        ICAgIHF1ZXJ5UGFyYW1zID0gYXJyYXlbbGVuIC0gMV0ucXVlcnlQYXJhbXM7
        CiAgICAgICAgaGVhZCA9IHNsaWNlLmNhbGwoYXJyYXksIDAsIGxlbiAtIDEp
        OwogICAgICAgIHJldHVybiBbaGVhZCwgcXVlcnlQYXJhbXNdOwogICAgICB9
        IGVsc2UgewogICAgICAgIHJldHVybiBbYXJyYXksIG51bGxdOwogICAgICB9
        CiAgICB9CgogICAgLyoqCiAgICAgIEBwcml2YXRlCgogICAgICBDb2VyY2Vz
        IHF1ZXJ5IHBhcmFtIHByb3BlcnRpZXMgYW5kIGFycmF5IGVsZW1lbnRzIGlu
        dG8gc3RyaW5ncy4KICAgICoqLwogICAgZnVuY3Rpb24gY29lcmNlUXVlcnlQ
        YXJhbXNUb1N0cmluZyhxdWVyeVBhcmFtcykgewogICAgICBmb3IgKHZhciBr
        ZXkgaW4gcXVlcnlQYXJhbXMpIHsKICAgICAgICBpZiAodHlwZW9mIHF1ZXJ5
        UGFyYW1zW2tleV0gPT09ICdudW1iZXInKSB7CiAgICAgICAgICBxdWVyeVBh
        cmFtc1trZXldID0gJycgKyBxdWVyeVBhcmFtc1trZXldOwogICAgICAgIH0g
        ZWxzZSBpZiAoaXNBcnJheShxdWVyeVBhcmFtc1trZXldKSkgewogICAgICAg
        ICAgZm9yICh2YXIgaSA9IDAsIGwgPSBxdWVyeVBhcmFtc1trZXldLmxlbmd0
        aDsgaSA8IGw7IGkrKykgewogICAgICAgICAgICBxdWVyeVBhcmFtc1trZXld
        W2ldID0gJycgKyBxdWVyeVBhcmFtc1trZXldW2ldOwogICAgICAgICAgfQog
        ICAgICAgIH0KICAgICAgfQogICAgfQogICAgLyoqCiAgICAgIEBwcml2YXRl
        CiAgICAgKi8KICAgIGZ1bmN0aW9uIGxvZyhyb3V0ZXIsIHNlcXVlbmNlLCBt
        c2cpIHsKICAgICAgaWYgKCFyb3V0ZXIubG9nKSB7IHJldHVybjsgfQoKICAg
        ICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDMpIHsKICAgICAgICByb3V0
        ZXIubG9nKCJUcmFuc2l0aW9uICMiICsgc2VxdWVuY2UgKyAiOiAiICsgbXNn
        KTsKICAgICAgfSBlbHNlIHsKICAgICAgICBtc2cgPSBzZXF1ZW5jZTsKICAg
        ICAgICByb3V0ZXIubG9nKG1zZyk7CiAgICAgIH0KICAgIH0KCiAgICBmdW5j
        dGlvbiBiaW5kKGZuLCBjb250ZXh0KSB7CiAgICAgIHZhciBib3VuZEFyZ3Mg
        PSBhcmd1bWVudHM7CiAgICAgIHJldHVybiBmdW5jdGlvbih2YWx1ZSkgewog
        ICAgICAgIHZhciBhcmdzID0gc2xpY2UuY2FsbChib3VuZEFyZ3MsIDIpOwog
        ICAgICAgIGFyZ3MucHVzaCh2YWx1ZSk7CiAgICAgICAgcmV0dXJuIGZuLmFw
        cGx5KGNvbnRleHQsIGFyZ3MpOwogICAgICB9OwogICAgfQoKICAgIGZ1bmN0
        aW9uIGlzUGFyYW0ob2JqZWN0KSB7CiAgICAgIHJldHVybiAodHlwZW9mIG9i
        amVjdCA9PT0gInN0cmluZyIgfHwgb2JqZWN0IGluc3RhbmNlb2YgU3RyaW5n
        IHx8IHR5cGVvZiBvYmplY3QgPT09ICJudW1iZXIiIHx8IG9iamVjdCBpbnN0
        YW5jZW9mIE51bWJlcik7CiAgICB9CgoKICAgIGZ1bmN0aW9uIGZvckVhY2go
        YXJyYXksIGNhbGxiYWNrKSB7CiAgICAgIGZvciAodmFyIGk9MCwgbD1hcnJh
        eS5sZW5ndGg7IGk8bCAmJiBmYWxzZSAhPT0gY2FsbGJhY2soYXJyYXlbaV0p
        OyBpKyspIHsgfQogICAgfQoKICAgIC8qKgogICAgICBAcHJpdmF0ZQoKICAg
        ICAgU2VyaWFsaXplcyBhIGhhbmRsZXIgdXNpbmcgaXRzIGN1c3RvbSBgc2Vy
        aWFsaXplYCBtZXRob2Qgb3IKICAgICAgYnkgYSBkZWZhdWx0IHRoYXQgbG9v
        a3MgdXAgdGhlIGV4cGVjdGVkIHByb3BlcnR5IG5hbWUgZnJvbQogICAgICB0
        aGUgZHluYW1pYyBzZWdtZW50LgoKICAgICAgQHBhcmFtIHtPYmplY3R9IGhh
        bmRsZXIgYSByb3V0ZXIgaGFuZGxlcgogICAgICBAcGFyYW0ge09iamVjdH0g
        bW9kZWwgdGhlIG1vZGVsIHRvIGJlIHNlcmlhbGl6ZWQgZm9yIHRoaXMgaGFu
        ZGxlcgogICAgICBAcGFyYW0ge0FycmF5W09iamVjdF19IG5hbWVzIHRoZSBu
        YW1lcyBhcnJheSBhdHRhY2hlZCB0byBhbgogICAgICAgIGhhbmRsZXIgb2Jq
        ZWN0IHJldHVybmVkIGZyb20gcm91dGVyLnJlY29nbml6ZXIuaGFuZGxlcnNG
        b3IoKQogICAgKi8KICAgIGZ1bmN0aW9uIHNlcmlhbGl6ZShoYW5kbGVyLCBt
        b2RlbCwgbmFtZXMpIHsKICAgICAgdmFyIG9iamVjdCA9IHt9OwogICAgICBp
        ZiAoaXNQYXJhbShtb2RlbCkpIHsKICAgICAgICBvYmplY3RbbmFtZXNbMF1d
        ID0gbW9kZWw7CiAgICAgICAgcmV0dXJuIG9iamVjdDsKICAgICAgfQoKICAg
        ICAgLy8gVXNlIGN1c3RvbSBzZXJpYWxpemUgaWYgaXQgZXhpc3RzLgogICAg
        ICBpZiAoaGFuZGxlci5zZXJpYWxpemUpIHsKICAgICAgICByZXR1cm4gaGFu
        ZGxlci5zZXJpYWxpemUobW9kZWwsIG5hbWVzKTsKICAgICAgfQoKICAgICAg
        aWYgKG5hbWVzLmxlbmd0aCAhPT0gMSkgeyByZXR1cm47IH0KCiAgICAgIHZh
        ciBuYW1lID0gbmFtZXNbMF07CgogICAgICBpZiAoL19pZCQvLnRlc3QobmFt
        ZSkpIHsKICAgICAgICBvYmplY3RbbmFtZV0gPSBtb2RlbC5pZDsKICAgICAg
        fSBlbHNlIHsKICAgICAgICBvYmplY3RbbmFtZV0gPSBtb2RlbDsKICAgICAg
        fQogICAgICByZXR1cm4gb2JqZWN0OwogICAgfQoKICAgIGZ1bmN0aW9uIHRy
        aWdnZXIocm91dGVyLCBoYW5kbGVySW5mb3MsIGlnbm9yZUZhaWx1cmUsIGFy
        Z3MpIHsKICAgICAgaWYgKHJvdXRlci50cmlnZ2VyRXZlbnQpIHsKICAgICAg
        ICByb3V0ZXIudHJpZ2dlckV2ZW50KGhhbmRsZXJJbmZvcywgaWdub3JlRmFp
        bHVyZSwgYXJncyk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB2
        YXIgbmFtZSA9IGFyZ3Muc2hpZnQoKTsKCiAgICAgIGlmICghaGFuZGxlcklu
        Zm9zKSB7CiAgICAgICAgaWYgKGlnbm9yZUZhaWx1cmUpIHsgcmV0dXJuOyB9
        CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJDb3VsZCBub3QgdHJpZ2dlciBl
        dmVudCAnIiArIG5hbWUgKyAiJy4gVGhlcmUgYXJlIG5vIGFjdGl2ZSBoYW5k
        bGVycyIpOwogICAgICB9CgogICAgICB2YXIgZXZlbnRXYXNIYW5kbGVkID0g
        ZmFsc2U7CgogICAgICBmb3IgKHZhciBpPWhhbmRsZXJJbmZvcy5sZW5ndGgt
        MTsgaT49MDsgaS0tKSB7CiAgICAgICAgdmFyIGhhbmRsZXJJbmZvID0gaGFu
        ZGxlckluZm9zW2ldLAogICAgICAgICAgICBoYW5kbGVyID0gaGFuZGxlcklu
        Zm8uaGFuZGxlcjsKCiAgICAgICAgaWYgKGhhbmRsZXIuZXZlbnRzICYmIGhh
        bmRsZXIuZXZlbnRzW25hbWVdKSB7CiAgICAgICAgICBpZiAoaGFuZGxlci5l
        dmVudHNbbmFtZV0uYXBwbHkoaGFuZGxlciwgYXJncykgPT09IHRydWUpIHsK
        ICAgICAgICAgICAgZXZlbnRXYXNIYW5kbGVkID0gdHJ1ZTsKICAgICAgICAg
        IH0gZWxzZSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KICAg
        ICAgICB9CiAgICAgIH0KCiAgICAgIGlmICghZXZlbnRXYXNIYW5kbGVkICYm
        ICFpZ25vcmVGYWlsdXJlKSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJO
        b3RoaW5nIGhhbmRsZWQgdGhlIGV2ZW50ICciICsgbmFtZSArICInLiIpOwog
        ICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0Q2hhbmdlbGlzdChvbGRP
        YmplY3QsIG5ld09iamVjdCkgewogICAgICB2YXIga2V5OwogICAgICB2YXIg
        cmVzdWx0cyA9IHsKICAgICAgICBhbGw6IHt9LAogICAgICAgIGNoYW5nZWQ6
        IHt9LAogICAgICAgIHJlbW92ZWQ6IHt9CiAgICAgIH07CgogICAgICBtZXJn
        ZShyZXN1bHRzLmFsbCwgbmV3T2JqZWN0KTsKCiAgICAgIHZhciBkaWRDaGFu
        Z2UgPSBmYWxzZTsKICAgICAgY29lcmNlUXVlcnlQYXJhbXNUb1N0cmluZyhv
        bGRPYmplY3QpOwogICAgICBjb2VyY2VRdWVyeVBhcmFtc1RvU3RyaW5nKG5l
        d09iamVjdCk7CgogICAgICAvLyBDYWxjdWxhdGUgcmVtb3ZhbHMKICAgICAg
        Zm9yIChrZXkgaW4gb2xkT2JqZWN0KSB7CiAgICAgICAgaWYgKG9sZE9iamVj
        dC5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7CiAgICAgICAgICBpZiAoIW5ld09i
        amVjdC5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7CiAgICAgICAgICAgIGRpZENo
        YW5nZSA9IHRydWU7CiAgICAgICAgICAgIHJlc3VsdHMucmVtb3ZlZFtrZXld
        ID0gb2xkT2JqZWN0W2tleV07CiAgICAgICAgICB9CiAgICAgICAgfQogICAg
        ICB9CgogICAgICAvLyBDYWxjdWxhdGUgY2hhbmdlcwogICAgICBmb3IgKGtl
        eSBpbiBuZXdPYmplY3QpIHsKICAgICAgICBpZiAobmV3T2JqZWN0Lmhhc093
        blByb3BlcnR5KGtleSkpIHsKICAgICAgICAgIGlmIChpc0FycmF5KG9sZE9i
        amVjdFtrZXldKSAmJiBpc0FycmF5KG5ld09iamVjdFtrZXldKSkgewogICAg
        ICAgICAgICBpZiAob2xkT2JqZWN0W2tleV0ubGVuZ3RoICE9PSBuZXdPYmpl
        Y3Rba2V5XS5sZW5ndGgpIHsKICAgICAgICAgICAgICByZXN1bHRzLmNoYW5n
        ZWRba2V5XSA9IG5ld09iamVjdFtrZXldOwogICAgICAgICAgICAgIGRpZENo
        YW5nZSA9IHRydWU7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAg
        ICAgZm9yICh2YXIgaSA9IDAsIGwgPSBvbGRPYmplY3Rba2V5XS5sZW5ndGg7
        IGkgPCBsOyBpKyspIHsKICAgICAgICAgICAgICAgIGlmIChvbGRPYmplY3Rb
        a2V5XVtpXSAhPT0gbmV3T2JqZWN0W2tleV1baV0pIHsKICAgICAgICAgICAg
        ICAgICAgcmVzdWx0cy5jaGFuZ2VkW2tleV0gPSBuZXdPYmplY3Rba2V5XTsK
        ICAgICAgICAgICAgICAgICAgZGlkQ2hhbmdlID0gdHJ1ZTsKICAgICAgICAg
        ICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAg
        ICAgIH0KICAgICAgICAgIGVsc2UgewogICAgICAgICAgICBpZiAob2xkT2Jq
        ZWN0W2tleV0gIT09IG5ld09iamVjdFtrZXldKSB7CiAgICAgICAgICAgICAg
        cmVzdWx0cy5jaGFuZ2VkW2tleV0gPSBuZXdPYmplY3Rba2V5XTsKICAgICAg
        ICAgICAgICBkaWRDaGFuZ2UgPSB0cnVlOwogICAgICAgICAgICB9CiAgICAg
        ICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gZGlkQ2hh
        bmdlICYmIHJlc3VsdHM7CiAgICB9CgogICAgZnVuY3Rpb24gcHJvbWlzZUxh
        YmVsKGxhYmVsKSB7CiAgICAgIHJldHVybiAnUm91dGVyOiAnICsgbGFiZWw7
        CiAgICB9CgogICAgX19leHBvcnRzX18udHJpZ2dlciA9IHRyaWdnZXI7CiAg
        ICBfX2V4cG9ydHNfXy5sb2cgPSBsb2c7CiAgICBfX2V4cG9ydHNfXy5vQ3Jl
        YXRlID0gb0NyZWF0ZTsKICAgIF9fZXhwb3J0c19fLm1lcmdlID0gbWVyZ2U7
        CiAgICBfX2V4cG9ydHNfXy5leHRyYWN0UXVlcnlQYXJhbXMgPSBleHRyYWN0
        UXVlcnlQYXJhbXM7CiAgICBfX2V4cG9ydHNfXy5iaW5kID0gYmluZDsKICAg
        IF9fZXhwb3J0c19fLmlzUGFyYW0gPSBpc1BhcmFtOwogICAgX19leHBvcnRz
        X18uZm9yRWFjaCA9IGZvckVhY2g7CiAgICBfX2V4cG9ydHNfXy5zbGljZSA9
        IHNsaWNlOwogICAgX19leHBvcnRzX18uc2VyaWFsaXplID0gc2VyaWFsaXpl
        OwogICAgX19leHBvcnRzX18uZ2V0Q2hhbmdlbGlzdCA9IGdldENoYW5nZWxp
        c3Q7CiAgICBfX2V4cG9ydHNfXy5jb2VyY2VRdWVyeVBhcmFtc1RvU3RyaW5n
        ID0gY29lcmNlUXVlcnlQYXJhbXNUb1N0cmluZzsKICAgIF9fZXhwb3J0c19f
        LnByb21pc2VMYWJlbCA9IHByb21pc2VMYWJlbDsKICB9KTsKZGVmaW5lKCJy
        b3V0ZXIiLCAKICBbIi4vcm91dGVyL3JvdXRlciIsImV4cG9ydHMiXSwKICBm
        dW5jdGlvbihfX2RlcGVuZGVuY3kxX18sIF9fZXhwb3J0c19fKSB7CiAgICAi
        dXNlIHN0cmljdCI7CiAgICB2YXIgUm91dGVyID0gX19kZXBlbmRlbmN5MV9f
        LlJvdXRlcjsKCiAgICBfX2V4cG9ydHNfXy5Sb3V0ZXIgPSBSb3V0ZXI7CiAg
        fSk7Cn0pKCk7CgoKCihmdW5jdGlvbigpIHsKLyoqCkBtb2R1bGUgZW1iZXIK
        QHN1Ym1vZHVsZSBlbWJlci1yb3V0aW5nCiovCgpmdW5jdGlvbiBEU0wobmFt
        ZSkgewogIHRoaXMucGFyZW50ID0gbmFtZTsKICB0aGlzLm1hdGNoZXMgPSBb
        XTsKfQoKRFNMLnByb3RvdHlwZSA9IHsKICByZXNvdXJjZTogZnVuY3Rpb24o
        bmFtZSwgb3B0aW9ucywgY2FsbGJhY2spIHsKICAgIGlmIChhcmd1bWVudHMu
        bGVuZ3RoID09PSAyICYmIHR5cGVvZiBvcHRpb25zID09PSAnZnVuY3Rpb24n
        KSB7CiAgICAgIGNhbGxiYWNrID0gb3B0aW9uczsKICAgICAgb3B0aW9ucyA9
        IHt9OwogICAgfQoKICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAxKSB7
        CiAgICAgIG9wdGlvbnMgPSB7fTsKICAgIH0KCiAgICBpZiAodHlwZW9mIG9w
        dGlvbnMucGF0aCAhPT0gJ3N0cmluZycpIHsKICAgICAgb3B0aW9ucy5wYXRo
        ID0gIi8iICsgbmFtZTsKICAgIH0KCiAgICBpZiAoY2FsbGJhY2spIHsKICAg
        ICAgdmFyIGRzbCA9IG5ldyBEU0wobmFtZSk7CiAgICAgIHJvdXRlKGRzbCwg
        J2xvYWRpbmcnKTsKICAgICAgcm91dGUoZHNsLCAnZXJyb3InLCB7IHBhdGg6
        ICIvX3VudXNlZF9kdW1teV9lcnJvcl9wYXRoX3JvdXRlXyIgKyBuYW1lICsg
        Ii86ZXJyb3IiIH0pOwogICAgICBjYWxsYmFjay5jYWxsKGRzbCk7CiAgICAg
        IHRoaXMucHVzaChvcHRpb25zLnBhdGgsIG5hbWUsIGRzbC5nZW5lcmF0ZSgp
        KTsKICAgIH0gZWxzZSB7CiAgICAgIHRoaXMucHVzaChvcHRpb25zLnBhdGgs
        IG5hbWUsIG51bGwpOwogICAgfQoKCiAgICAgIH0sCgogIHB1c2g6IGZ1bmN0
        aW9uKHVybCwgbmFtZSwgY2FsbGJhY2spIHsKICAgIHZhciBwYXJ0cyA9IG5h
        bWUuc3BsaXQoJy4nKTsKICAgIGlmICh1cmwgPT09ICIiIHx8IHVybCA9PT0g
        Ii8iIHx8IHBhcnRzW3BhcnRzLmxlbmd0aC0xXSA9PT0gImluZGV4IikgeyB0
        aGlzLmV4cGxpY2l0SW5kZXggPSB0cnVlOyB9CgogICAgdGhpcy5tYXRjaGVz
        LnB1c2goW3VybCwgbmFtZSwgY2FsbGJhY2tdKTsKICB9LAoKICByb3V0ZTog
        ZnVuY3Rpb24obmFtZSwgb3B0aW9ucykgewogICAgcm91dGUodGhpcywgbmFt
        ZSwgb3B0aW9ucyk7CiAgICAgIH0sCgogIGdlbmVyYXRlOiBmdW5jdGlvbigp
        IHsKICAgIHZhciBkc2xNYXRjaGVzID0gdGhpcy5tYXRjaGVzOwoKICAgIGlm
        ICghdGhpcy5leHBsaWNpdEluZGV4KSB7CiAgICAgIHRoaXMucm91dGUoImlu
        ZGV4IiwgeyBwYXRoOiAiLyIgfSk7CiAgICB9CgogICAgcmV0dXJuIGZ1bmN0
        aW9uKG1hdGNoKSB7CiAgICAgIGZvciAodmFyIGk9MCwgbD1kc2xNYXRjaGVz
        Lmxlbmd0aDsgaTxsOyBpKyspIHsKICAgICAgICB2YXIgZHNsTWF0Y2ggPSBk
        c2xNYXRjaGVzW2ldOwogICAgICAgIHZhciBtYXRjaE9iaiA9IG1hdGNoKGRz
        bE1hdGNoWzBdKS50byhkc2xNYXRjaFsxXSwgZHNsTWF0Y2hbMl0pOwogICAg
        ICB9CiAgICB9OwogIH0KfTsKCmZ1bmN0aW9uIHJvdXRlKGRzbCwgbmFtZSwg
        b3B0aW9ucykgewogIEVtYmVyLmFzc2VydCgiWW91IG11c3QgdXNlIGB0aGlz
        LnJlc291cmNlYCB0byBuZXN0IiwgdHlwZW9mIG9wdGlvbnMgIT09ICdmdW5j
        dGlvbicpOwoKICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTsKCiAgaWYgKHR5
        cGVvZiBvcHRpb25zLnBhdGggIT09ICdzdHJpbmcnKSB7CiAgICBvcHRpb25z
        LnBhdGggPSAiLyIgKyBuYW1lOwogIH0KCiAgaWYgKGRzbC5wYXJlbnQgJiYg
        ZHNsLnBhcmVudCAhPT0gJ2FwcGxpY2F0aW9uJykgewogICAgbmFtZSA9IGRz
        bC5wYXJlbnQgKyAiLiIgKyBuYW1lOwogIH0KCiAgZHNsLnB1c2gob3B0aW9u
        cy5wYXRoLCBuYW1lLCBudWxsKTsKfQoKRFNMLm1hcCA9IGZ1bmN0aW9uKGNh
        bGxiYWNrKSB7CiAgdmFyIGRzbCA9IG5ldyBEU0woKTsKICBjYWxsYmFjay5j
        YWxsKGRzbCk7CiAgcmV0dXJuIGRzbDsKfTsKCkVtYmVyLlJvdXRlckRTTCA9
        IERTTDsKCn0pKCk7CgoKCihmdW5jdGlvbigpIHsKdmFyIGdldCA9IEVtYmVy
        LmdldDsKCi8qKgpAbW9kdWxlIGVtYmVyCkBzdWJtb2R1bGUgZW1iZXItcm91
        dGluZwoqLwoKLyoqCgogIEZpbmRzIGEgY29udHJvbGxlciBpbnN0YW5jZS4K
        CiAgQGZvciBFbWJlcgogIEBtZXRob2QgY29udHJvbGxlckZvcgogIEBwcml2
        YXRlCiovCkVtYmVyLmNvbnRyb2xsZXJGb3IgPSBmdW5jdGlvbihjb250YWlu
        ZXIsIGNvbnRyb2xsZXJOYW1lLCBsb29rdXBPcHRpb25zKSB7CiAgcmV0dXJu
        IGNvbnRhaW5lci5sb29rdXAoJ2NvbnRyb2xsZXI6JyArIGNvbnRyb2xsZXJO
        YW1lLCBsb29rdXBPcHRpb25zKTsKfTsKCi8qKgogIEdlbmVyYXRlcyBhIGNv
        bnRyb2xsZXIgZmFjdG9yeQoKICBUaGUgdHlwZSBvZiB0aGUgZ2VuZXJhdGVk
        IGNvbnRyb2xsZXIgZmFjdG9yeSBpcyBkZXJpdmVkCiAgZnJvbSB0aGUgY29u
        dGV4dC4gSWYgdGhlIGNvbnRleHQgaXMgYW4gYXJyYXkgYW4gYXJyYXkgY29u
        dHJvbGxlcgogIGlzIGdlbmVyYXRlZCwgaWYgYW4gb2JqZWN0LCBhbiBvYmpl
        Y3QgY29udHJvbGxlciBvdGhlcndpc2UsIGEgYmFzaWMKICBjb250cm9sbGVy
        IGlzIGdlbmVyYXRlZC4KCiAgWW91IGNhbiBjdXN0b21pemUgeW91ciBnZW5l
        cmF0ZWQgY29udHJvbGxlcnMgYnkgZGVmaW5pbmcKICBgQXBwLk9iamVjdENv
        bnRyb2xsZXJgIG9yIGBBcHAuQXJyYXlDb250cm9sbGVyYC4KCiAgQGZvciBF
        bWJlcgogIEBtZXRob2QgZ2VuZXJhdGVDb250cm9sbGVyRmFjdG9yeQogIEBw
        cml2YXRlCiovCkVtYmVyLmdlbmVyYXRlQ29udHJvbGxlckZhY3RvcnkgPSBm
        dW5jdGlvbihjb250YWluZXIsIGNvbnRyb2xsZXJOYW1lLCBjb250ZXh0KSB7
        CiAgdmFyIEZhY3RvcnksIGZ1bGxOYW1lLCBpbnN0YW5jZSwgbmFtZSwgZmFj
        dG9yeU5hbWUsIGNvbnRyb2xsZXJUeXBlOwoKICBpZiAoY29udGV4dCAmJiBF
        bWJlci5pc0FycmF5KGNvbnRleHQpKSB7CiAgICBjb250cm9sbGVyVHlwZSA9
        ICdhcnJheSc7CiAgfSBlbHNlIGlmIChjb250ZXh0KSB7CiAgICBjb250cm9s
        bGVyVHlwZSA9ICdvYmplY3QnOwogIH0gZWxzZSB7CiAgICBjb250cm9sbGVy
        VHlwZSA9ICdiYXNpYyc7CiAgfQoKICBmYWN0b3J5TmFtZSA9ICdjb250cm9s
        bGVyOicgKyBjb250cm9sbGVyVHlwZTsKCiAgRmFjdG9yeSA9IGNvbnRhaW5l
        ci5sb29rdXBGYWN0b3J5KGZhY3RvcnlOYW1lKS5leHRlbmQoewogICAgaXNH
        ZW5lcmF0ZWQ6IHRydWUsCiAgICB0b1N0cmluZzogZnVuY3Rpb24oKSB7CiAg
        ICAgIHJldHVybiAiKGdlbmVyYXRlZCAiICsgY29udHJvbGxlck5hbWUgKyAi
        IGNvbnRyb2xsZXIpIjsKICAgIH0KICB9KTsKCiAgZnVsbE5hbWUgPSAnY29u
        dHJvbGxlcjonICsgY29udHJvbGxlck5hbWU7CgogIGNvbnRhaW5lci5yZWdp
        c3RlcihmdWxsTmFtZSwgIEZhY3RvcnkpOwoKICByZXR1cm4gRmFjdG9yeTsK
        fTsKCi8qKgogIEdlbmVyYXRlcyBhbmQgaW5zdGFudGlhdGVzIGEgY29udHJv
        bGxlci4KCiAgVGhlIHR5cGUgb2YgdGhlIGdlbmVyYXRlZCBjb250cm9sbGVy
        IGZhY3RvcnkgaXMgZGVyaXZlZAogIGZyb20gdGhlIGNvbnRleHQuIElmIHRo
        ZSBjb250ZXh0IGlzIGFuIGFycmF5IGFuIGFycmF5IGNvbnRyb2xsZXIKICBp
        cyBnZW5lcmF0ZWQsIGlmIGFuIG9iamVjdCwgYW4gb2JqZWN0IGNvbnRyb2xs
        ZXIgb3RoZXJ3aXNlLCBhIGJhc2ljCiAgY29udHJvbGxlciBpcyBnZW5lcmF0
        ZWQuCgogIEBmb3IgRW1iZXIKICBAbWV0aG9kIGdlbmVyYXRlQ29udHJvbGxl
        cgogIEBwcml2YXRlCiovCkVtYmVyLmdlbmVyYXRlQ29udHJvbGxlciA9IGZ1
        bmN0aW9uKGNvbnRhaW5lciwgY29udHJvbGxlck5hbWUsIGNvbnRleHQpIHsK
        ICBFbWJlci5nZW5lcmF0ZUNvbnRyb2xsZXJGYWN0b3J5KGNvbnRhaW5lciwg
        Y29udHJvbGxlck5hbWUsIGNvbnRleHQpOwogIHZhciBmdWxsTmFtZSA9ICdj
        b250cm9sbGVyOicgKyBjb250cm9sbGVyTmFtZTsKICB2YXIgaW5zdGFuY2Ug
        PSBjb250YWluZXIubG9va3VwKGZ1bGxOYW1lKTsKCiAgaWYgKGdldChpbnN0
        YW5jZSwgJ25hbWVzcGFjZS5MT0dfQUNUSVZFX0dFTkVSQVRJT04nKSkgewog
        ICAgRW1iZXIuTG9nZ2VyLmluZm8oImdlbmVyYXRlZCAtPiAiICsgZnVsbE5h
        bWUsIHsgZnVsbE5hbWU6IGZ1bGxOYW1lIH0pOwogIH0KCiAgcmV0dXJuIGlu
        c3RhbmNlOwp9OwoKfSkoKTsKCgoKKGZ1bmN0aW9uKCkgewovKioKQG1vZHVs
        ZSBlbWJlcgpAc3VibW9kdWxlIGVtYmVyLXJvdXRpbmcKKi8KCnZhciByb3V0
        ZXJKc01vZHVsZSA9IHJlcXVpcmVNb2R1bGUoInJvdXRlciIpOwp2YXIgUm91
        dGVyID0gcm91dGVySnNNb2R1bGUuUm91dGVyOwp2YXIgVHJhbnNpdGlvbiA9
        IHJvdXRlckpzTW9kdWxlLlRyYW5zaXRpb247CnZhciBnZXQgPSBFbWJlci5n
        ZXQsIHNldCA9IEVtYmVyLnNldCwgZm10ID0gRW1iZXIuU3RyaW5nLmZtdDsK
        dmFyIGRlZmluZVByb3BlcnR5ID0gRW1iZXIuZGVmaW5lUHJvcGVydHk7CnZh
        ciBzbGljZSA9IEFycmF5LnByb3RvdHlwZS5zbGljZTsKdmFyIGZvckVhY2gg
        PSBFbWJlci5FbnVtZXJhYmxlVXRpbHMuZm9yRWFjaDsKCnZhciBEZWZhdWx0
        VmlldyA9IEVtYmVyLl9NZXRhbW9ycGhWaWV3OwovKioKICBUaGUgYEVtYmVy
        LlJvdXRlcmAgY2xhc3MgbWFuYWdlcyB0aGUgYXBwbGljYXRpb24gc3RhdGUg
        YW5kIFVSTHMuIFJlZmVyIHRvCiAgdGhlIFtyb3V0aW5nIGd1aWRlXShodHRw
        Oi8vZW1iZXJqcy5jb20vZ3VpZGVzL3JvdXRpbmcvKSBmb3IgZG9jdW1lbnRh
        dGlvbi4KCiAgQGNsYXNzIFJvdXRlcgogIEBuYW1lc3BhY2UgRW1iZXIKICBA
        ZXh0ZW5kcyBFbWJlci5PYmplY3QKKi8KRW1iZXIuUm91dGVyID0gRW1iZXIu
        T2JqZWN0LmV4dGVuZChFbWJlci5FdmVudGVkLCB7CiAgLyoqCiAgICBUaGUg
        YGxvY2F0aW9uYCBwcm9wZXJ0eSBkZXRlcm1pbmVzIHRoZSB0eXBlIG9mIFVS
        TCdzIHRoYXQgeW91cgogICAgYXBwbGljYXRpb24gd2lsbCB1c2UuCgogICAg
        VGhlIGZvbGxvd2luZyBsb2NhdGlvbiB0eXBlcyBhcmUgY3VycmVudGx5IGF2
        YWlsYWJsZToKCiAgICAqIGBoYXNoYAogICAgKiBgaGlzdG9yeWAKICAgICog
        YG5vbmVgCgogICAgQHByb3BlcnR5IGxvY2F0aW9uCiAgICBAZGVmYXVsdCAn
        aGFzaCcKICAgIEBzZWUge0VtYmVyLkxvY2F0aW9ufQogICovCiAgbG9jYXRp
        b246ICdoYXNoJywKCiAgaW5pdDogZnVuY3Rpb24oKSB7CiAgICB0aGlzLnJv
        dXRlciA9IHRoaXMuY29uc3RydWN0b3Iucm91dGVyIHx8IHRoaXMuY29uc3Ry
        dWN0b3IubWFwKEVtYmVyLkspOwogICAgdGhpcy5fYWN0aXZlVmlld3MgPSB7
        fTsKICAgIHRoaXMuX3NldHVwTG9jYXRpb24oKTsKCiAgICBpZiAoZ2V0KHRo
        aXMsICduYW1lc3BhY2UuTE9HX1RSQU5TSVRJT05TX0lOVEVSTkFMJykpIHsK
        ICAgICAgdGhpcy5yb3V0ZXIubG9nID0gRW1iZXIuTG9nZ2VyLmRlYnVnOwog
        ICAgfQogIH0sCgogIC8qKgogICAgUmVwcmVzZW50cyB0aGUgY3VycmVudCBV
        UkwuCgogICAgQG1ldGhvZCB1cmwKICAgIEByZXR1cm5zIHtTdHJpbmd9IFRo
        ZSBjdXJyZW50IFVSTC4KICAqLwogIHVybDogRW1iZXIuY29tcHV0ZWQoZnVu
        Y3Rpb24oKSB7CiAgICByZXR1cm4gZ2V0KHRoaXMsICdsb2NhdGlvbicpLmdl
        dFVSTCgpOwogIH0pLAoKICAvKioKICAgIEluaXRpYWxpemVzIHRoZSBjdXJy
        ZW50IHJvdXRlciBpbnN0YW5jZSBhbmQgc2V0cyB1cCB0aGUgY2hhbmdlIGhh
        bmRsaW5nCiAgICBldmVudCBsaXN0ZW5lcnMgdXNlZCBieSB0aGUgaW5zdGFu
        Y2VzIGBsb2NhdGlvbmAgaW1wbGVtZW50YXRpb24uCgogICAgQSBwcm9wZXJ0
        eSBuYW1lZCBgaW5pdGlhbFVSTGAgd2lsbCBiZSB1c2VkIHRvIGRldGVybWlu
        ZSB0aGUgaW5pdGlhbCBVUkwuCiAgICBJZiBubyB2YWx1ZSBpcyBmb3VuZCBg
        L2Agd2lsbCBiZSB1c2VkLgoKICAgIEBtZXRob2Qgc3RhcnRSb3V0aW5nCiAg
        ICBAcHJpdmF0ZQogICovCiAgc3RhcnRSb3V0aW5nOiBmdW5jdGlvbigpIHsK
        ICAgIHRoaXMucm91dGVyID0gdGhpcy5yb3V0ZXIgfHwgdGhpcy5jb25zdHJ1
        Y3Rvci5tYXAoRW1iZXIuSyk7CgogICAgdmFyIHJvdXRlciA9IHRoaXMucm91
        dGVyLAogICAgICAgIGxvY2F0aW9uID0gZ2V0KHRoaXMsICdsb2NhdGlvbicp
        LAogICAgICAgIGNvbnRhaW5lciA9IHRoaXMuY29udGFpbmVyLAogICAgICAg
        IHNlbGYgPSB0aGlzLAogICAgICAgIGluaXRpYWxVUkwgPSBnZXQodGhpcywg
        J2luaXRpYWxVUkwnKTsKCiAgICAKICAgICAgLy8gQWxsb3cgdGhlIExvY2F0
        aW9uIGNsYXNzIHRvIGNhbmNlbCB0aGUgcm91dGVyIHNldHVwIHdoaWxlIGl0
        IHJlZnJlc2hlcwogICAgICAvLyB0aGUgcGFnZQogICAgICBpZiAoZ2V0KGxv
        Y2F0aW9uLCAnY2FuY2VsUm91dGVyU2V0dXAnKSkgewogICAgICAgIHJldHVy
        bjsKICAgICAgfQogICAgCgogICAgdGhpcy5fc2V0dXBSb3V0ZXIocm91dGVy
        LCBsb2NhdGlvbik7CgogICAgY29udGFpbmVyLnJlZ2lzdGVyKCd2aWV3OmRl
        ZmF1bHQnLCBEZWZhdWx0Vmlldyk7CiAgICBjb250YWluZXIucmVnaXN0ZXIo
        J3ZpZXc6dG9wbGV2ZWwnLCBFbWJlci5WaWV3LmV4dGVuZCgpKTsKCiAgICBs
        b2NhdGlvbi5vblVwZGF0ZVVSTChmdW5jdGlvbih1cmwpIHsKICAgICAgc2Vs
        Zi5oYW5kbGVVUkwodXJsKTsKICAgIH0pOwoKICAgIGlmICh0eXBlb2YgaW5p
        dGlhbFVSTCA9PT0gInVuZGVmaW5lZCIpIHsKICAgICAgaW5pdGlhbFVSTCA9
        IGxvY2F0aW9uLmdldFVSTCgpOwogICAgfQoKICAgIHRoaXMuaGFuZGxlVVJM
        KGluaXRpYWxVUkwpOwogIH0sCgogIC8qKgogICAgSGFuZGxlcyB1cGRhdGlu
        ZyB0aGUgcGF0aHMgYW5kIG5vdGlmeWluZyBhbnkgbGlzdGVuZXJzIG9mIHRo
        ZSBVUkwKICAgIGNoYW5nZS4KCiAgICBUcmlnZ2VycyB0aGUgcm91dGVyIGxl
        dmVsIGBkaWRUcmFuc2l0aW9uYCBob29rLgoKICAgIEBtZXRob2QgZGlkVHJh
        bnNpdGlvbgogICAgQHByaXZhdGUKICAqLwogIGRpZFRyYW5zaXRpb246IGZ1
        bmN0aW9uKGluZm9zKSB7CiAgICB1cGRhdGVQYXRocyh0aGlzKTsKCiAgICB0
        aGlzLl9jYW5jZWxMb2FkaW5nRXZlbnQoKTsKCiAgICB0aGlzLm5vdGlmeVBy
        b3BlcnR5Q2hhbmdlKCd1cmwnKTsKCiAgICAvLyBQdXQgdGhpcyBpbiB0aGUg
        cnVubG9vcCBzbyB1cmwgd2lsbCBiZSBhY2N1cmF0ZS4gU2VlbXMKICAgIC8v
        IGxlc3Mgc3VycHJpc2luZyB0aGFuIGRpZFRyYW5zaXRpb24gYmVpbmcgb3V0
        IG9mIHN5bmMuCiAgICBFbWJlci5ydW4ub25jZSh0aGlzLCB0aGlzLnRyaWdn
        ZXIsICdkaWRUcmFuc2l0aW9uJyk7CgogICAgaWYgKGdldCh0aGlzLCAnbmFt
        ZXNwYWNlJykuTE9HX1RSQU5TSVRJT05TKSB7CiAgICAgIEVtYmVyLkxvZ2dl
        ci5sb2coIlRyYW5zaXRpb25lZCBpbnRvICciICsgRW1iZXIuUm91dGVyLl9y
        b3V0ZVBhdGgoaW5mb3MpICsgIiciKTsKICAgIH0KICB9LAoKICBoYW5kbGVV
        Ukw6IGZ1bmN0aW9uKHVybCkgewogICAgcmV0dXJuIHRoaXMuX2RvVHJhbnNp
        dGlvbignaGFuZGxlVVJMJywgW3VybF0pOwogIH0sCgogIHRyYW5zaXRpb25U
        bzogZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gdGhpcy5fZG9UcmFuc2l0aW9u
        KCd0cmFuc2l0aW9uVG8nLCBhcmd1bWVudHMpOwogIH0sCgogIGludGVybWVk
        aWF0ZVRyYW5zaXRpb25UbzogZnVuY3Rpb24oKSB7CiAgICB0aGlzLnJvdXRl
        ci5pbnRlcm1lZGlhdGVUcmFuc2l0aW9uVG8uYXBwbHkodGhpcy5yb3V0ZXIs
        IGFyZ3VtZW50cyk7CgogICAgdXBkYXRlUGF0aHModGhpcyk7CgogICAgdmFy
        IGluZm9zID0gdGhpcy5yb3V0ZXIuY3VycmVudEhhbmRsZXJJbmZvczsKICAg
        IGlmIChnZXQodGhpcywgJ25hbWVzcGFjZScpLkxPR19UUkFOU0lUSU9OUykg
        ewogICAgICBFbWJlci5Mb2dnZXIubG9nKCJJbnRlcm1lZGlhdGUtdHJhbnNp
        dGlvbmVkIGludG8gJyIgKyBFbWJlci5Sb3V0ZXIuX3JvdXRlUGF0aChpbmZv
        cykgKyAiJyIpOwogICAgfQogIH0sCgogIHJlcGxhY2VXaXRoOiBmdW5jdGlv
        bigpIHsKICAgIHJldHVybiB0aGlzLl9kb1RyYW5zaXRpb24oJ3JlcGxhY2VX
        aXRoJywgYXJndW1lbnRzKTsKICB9LAoKICBnZW5lcmF0ZTogZnVuY3Rpb24o
        KSB7CiAgICB2YXIgdXJsID0gdGhpcy5yb3V0ZXIuZ2VuZXJhdGUuYXBwbHko
        dGhpcy5yb3V0ZXIsIGFyZ3VtZW50cyk7CiAgICByZXR1cm4gdGhpcy5sb2Nh
        dGlvbi5mb3JtYXRVUkwodXJsKTsKICB9LAoKICAvKioKICAgIERldGVybWlu
        ZXMgaWYgdGhlIHN1cHBsaWVkIHJvdXRlIGlzIGN1cnJlbnRseSBhY3RpdmUu
        CgogICAgQG1ldGhvZCBpc0FjdGl2ZQogICAgQHBhcmFtIHJvdXRlTmFtZQog
        ICAgQHJldHVybnMge0Jvb2xlYW59CiAgICBAcHJpdmF0ZQogICovCiAgaXNB
        Y3RpdmU6IGZ1bmN0aW9uKHJvdXRlTmFtZSkgewogICAgdmFyIHJvdXRlciA9
        IHRoaXMucm91dGVyOwogICAgcmV0dXJuIHJvdXRlci5pc0FjdGl2ZS5hcHBs
        eShyb3V0ZXIsIGFyZ3VtZW50cyk7CiAgfSwKCiAgc2VuZDogZnVuY3Rpb24o
        bmFtZSwgY29udGV4dCkgewogICAgdGhpcy5yb3V0ZXIudHJpZ2dlci5hcHBs
        eSh0aGlzLnJvdXRlciwgYXJndW1lbnRzKTsKICB9LAoKICAvKioKICAgIERv
        ZXMgdGhpcyByb3V0ZXIgaW5zdGFuY2UgaGF2ZSB0aGUgZ2l2ZW4gcm91dGUu
        CgogICAgQG1ldGhvZCBoYXNSb3V0ZQogICAgQHJldHVybnMge0Jvb2xlYW59
        CiAgICBAcHJpdmF0ZQogICovCiAgaGFzUm91dGU6IGZ1bmN0aW9uKHJvdXRl
        KSB7CiAgICByZXR1cm4gdGhpcy5yb3V0ZXIuaGFzUm91dGUocm91dGUpOwog
        IH0sCgogIC8qKgogICAgUmVzZXRzIHRoZSBzdGF0ZSBvZiB0aGUgcm91dGVy
        IGJ5IGNsZWFyaW5nIHRoZSBjdXJyZW50IHJvdXRlCiAgICBoYW5kbGVycyBh
        bmQgZGVhY3RpdmF0aW5nIHRoZW0uCgogICAgQHByaXZhdGUKICAgIEBtZXRo
        b2QgcmVzZXQKICAgKi8KICByZXNldDogZnVuY3Rpb24oKSB7CiAgICB0aGlz
        LnJvdXRlci5yZXNldCgpOwogIH0sCgogIF9sb29rdXBBY3RpdmVWaWV3OiBm
        dW5jdGlvbih0ZW1wbGF0ZU5hbWUpIHsKICAgIHZhciBhY3RpdmUgPSB0aGlz
        Ll9hY3RpdmVWaWV3c1t0ZW1wbGF0ZU5hbWVdOwogICAgcmV0dXJuIGFjdGl2
        ZSAmJiBhY3RpdmVbMF07CiAgfSwKCiAgX2Nvbm5lY3RBY3RpdmVWaWV3OiBm
        dW5jdGlvbih0ZW1wbGF0ZU5hbWUsIHZpZXcpIHsKICAgIHZhciBleGlzdGlu
        ZyA9IHRoaXMuX2FjdGl2ZVZpZXdzW3RlbXBsYXRlTmFtZV07CgogICAgaWYg
        KGV4aXN0aW5nKSB7CiAgICAgIGV4aXN0aW5nWzBdLm9mZignd2lsbERlc3Ry
        b3lFbGVtZW50JywgdGhpcywgZXhpc3RpbmdbMV0pOwogICAgfQoKICAgIHZh
        ciBkaXNjb25uZWN0ID0gZnVuY3Rpb24oKSB7CiAgICAgIGRlbGV0ZSB0aGlz
        Ll9hY3RpdmVWaWV3c1t0ZW1wbGF0ZU5hbWVdOwogICAgfTsKCiAgICB0aGlz
        Ll9hY3RpdmVWaWV3c1t0ZW1wbGF0ZU5hbWVdID0gW3ZpZXcsIGRpc2Nvbm5l
        Y3RdOwogICAgdmlldy5vbmUoJ3dpbGxEZXN0cm95RWxlbWVudCcsIHRoaXMs
        IGRpc2Nvbm5lY3QpOwogIH0sCgogIF9zZXR1cExvY2F0aW9uOiBmdW5jdGlv
        bigpIHsKICAgIHZhciBsb2NhdGlvbiA9IGdldCh0aGlzLCAnbG9jYXRpb24n
        KSwKICAgICAgICByb290VVJMID0gZ2V0KHRoaXMsICdyb290VVJMJyk7Cgog
        ICAgaWYgKCdzdHJpbmcnID09PSB0eXBlb2YgbG9jYXRpb24gJiYgdGhpcy5j
        b250YWluZXIpIHsKICAgICAgdmFyIHJlc29sdmVkTG9jYXRpb24gPSB0aGlz
        LmNvbnRhaW5lci5sb29rdXAoJ2xvY2F0aW9uOicgKyBsb2NhdGlvbik7Cgog
        ICAgICBpZiAoJ3VuZGVmaW5lZCcgIT09IHR5cGVvZiByZXNvbHZlZExvY2F0
        aW9uKSB7CiAgICAgICAgbG9jYXRpb24gPSBzZXQodGhpcywgJ2xvY2F0aW9u
        JywgcmVzb2x2ZWRMb2NhdGlvbik7CiAgICAgIH0gZWxzZSB7CiAgICAgICAg
        Ly8gQWxsb3cgZm9yIGRlcHJlY2F0ZWQgcmVnaXN0cmF0aW9uIG9mIGN1c3Rv
        bSBsb2NhdGlvbiBBUEkncwogICAgICAgIHZhciBvcHRpb25zID0ge2ltcGxl
        bWVudGF0aW9uOiBsb2NhdGlvbn07CgogICAgICAgIGxvY2F0aW9uID0gc2V0
        KHRoaXMsICdsb2NhdGlvbicsIEVtYmVyLkxvY2F0aW9uLmNyZWF0ZShvcHRp
        b25zKSk7CiAgICAgIH0KICAgIH0KCiAgICBpZiAodHlwZW9mIHJvb3RVUkwg
        PT09ICdzdHJpbmcnKSB7CiAgICAgIGxvY2F0aW9uLnJvb3RVUkwgPSByb290
        VVJMOwogICAgfQoKICAgIC8vIGVuc3VyZSB0aGF0IGluaXRTdGF0ZSBpcyBj
        YWxsZWQgQUZURVIgdGhlIHJvb3RVUkwgaXMgc2V0IG9uCiAgICAvLyB0aGUg
        bG9jYXRpb24gaW5zdGFuY2UKICAgIGlmICh0eXBlb2YgbG9jYXRpb24uaW5p
        dFN0YXRlID09PSAnZnVuY3Rpb24nKSB7IGxvY2F0aW9uLmluaXRTdGF0ZSgp
        OyB9CiAgfSwKCiAgX2dldEhhbmRsZXJGdW5jdGlvbjogZnVuY3Rpb24oKSB7
        CiAgICB2YXIgc2VlbiA9IHt9LCBjb250YWluZXIgPSB0aGlzLmNvbnRhaW5l
        ciwKICAgICAgICBEZWZhdWx0Um91dGUgPSBjb250YWluZXIubG9va3VwRmFj
        dG9yeSgncm91dGU6YmFzaWMnKSwKICAgICAgICBzZWxmID0gdGhpczsKCiAg
        ICByZXR1cm4gZnVuY3Rpb24obmFtZSkgewogICAgICB2YXIgcm91dGVOYW1l
        ID0gJ3JvdXRlOicgKyBuYW1lLAogICAgICAgICAgaGFuZGxlciA9IGNvbnRh
        aW5lci5sb29rdXAocm91dGVOYW1lKTsKCiAgICAgIGlmIChzZWVuW25hbWVd
        KSB7IHJldHVybiBoYW5kbGVyOyB9CgogICAgICBzZWVuW25hbWVdID0gdHJ1
        ZTsKCiAgICAgIGlmICghaGFuZGxlcikgewogICAgICAgIGNvbnRhaW5lci5y
        ZWdpc3Rlcihyb3V0ZU5hbWUsIERlZmF1bHRSb3V0ZS5leHRlbmQoKSk7CiAg
        ICAgICAgaGFuZGxlciA9IGNvbnRhaW5lci5sb29rdXAocm91dGVOYW1lKTsK
        CiAgICAgICAgaWYgKGdldChzZWxmLCAnbmFtZXNwYWNlLkxPR19BQ1RJVkVf
        R0VORVJBVElPTicpKSB7CiAgICAgICAgICBFbWJlci5Mb2dnZXIuaW5mbygi
        Z2VuZXJhdGVkIC0+ICIgKyByb3V0ZU5hbWUsIHsgZnVsbE5hbWU6IHJvdXRl
        TmFtZSB9KTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGhhbmRsZXIucm91
        dGVOYW1lID0gbmFtZTsKICAgICAgcmV0dXJuIGhhbmRsZXI7CiAgICB9Owog
        IH0sCgogIF9zZXR1cFJvdXRlcjogZnVuY3Rpb24ocm91dGVyLCBsb2NhdGlv
        bikgewogICAgdmFyIGxhc3RVUkwsIGVtYmVyUm91dGVyID0gdGhpczsKCiAg
        ICByb3V0ZXIuZ2V0SGFuZGxlciA9IHRoaXMuX2dldEhhbmRsZXJGdW5jdGlv
        bigpOwoKICAgIHZhciBkb1VwZGF0ZVVSTCA9IGZ1bmN0aW9uKCkgewogICAg
        ICBsb2NhdGlvbi5zZXRVUkwobGFzdFVSTCk7CiAgICB9OwoKICAgIHJvdXRl
        ci51cGRhdGVVUkwgPSBmdW5jdGlvbihwYXRoKSB7CiAgICAgIGxhc3RVUkwg
        PSBwYXRoOwogICAgICBFbWJlci5ydW4ub25jZShkb1VwZGF0ZVVSTCk7CiAg
        ICB9OwoKICAgIGlmIChsb2NhdGlvbi5yZXBsYWNlVVJMKSB7CiAgICAgIHZh
        ciBkb1JlcGxhY2VVUkwgPSBmdW5jdGlvbigpIHsKICAgICAgICBsb2NhdGlv
        bi5yZXBsYWNlVVJMKGxhc3RVUkwpOwogICAgICB9OwoKICAgICAgcm91dGVy
        LnJlcGxhY2VVUkwgPSBmdW5jdGlvbihwYXRoKSB7CiAgICAgICAgbGFzdFVS
        TCA9IHBhdGg7CiAgICAgICAgRW1iZXIucnVuLm9uY2UoZG9SZXBsYWNlVVJM
        KTsKICAgICAgfTsKICAgIH0KCiAgICByb3V0ZXIuZGlkVHJhbnNpdGlvbiA9
        IGZ1bmN0aW9uKGluZm9zKSB7CiAgICAgIGVtYmVyUm91dGVyLmRpZFRyYW5z
        aXRpb24oaW5mb3MpOwogICAgfTsKICB9LAoKICBfZG9UcmFuc2l0aW9uOiBm
        dW5jdGlvbihtZXRob2QsIGFyZ3MpIHsKICAgIC8vIE5vcm1hbGl6ZSBibGFu
        ayByb3V0ZSB0byByb290IFVSTC4KICAgIGFyZ3MgPSBzbGljZS5jYWxsKGFy
        Z3MpOwogICAgYXJnc1swXSA9IGFyZ3NbMF0gfHwgJy8nOwoKICAgIHZhciBu
        YW1lID0gYXJnc1swXSwgc2VsZiA9IHRoaXMsCiAgICAgIGlzUXVlcnlQYXJh
        bXNPbmx5ID0gZmFsc2UsIHF1ZXJ5UGFyYW1zOwoKICAgIAogICAgaWYgKCFp
        c1F1ZXJ5UGFyYW1zT25seSAmJiBuYW1lLmNoYXJBdCgwKSAhPT0gJy8nKSB7
        CiAgICAgIEVtYmVyLmFzc2VydCgiVGhlIHJvdXRlICIgKyBuYW1lICsgIiB3
        YXMgbm90IGZvdW5kIiwgdGhpcy5yb3V0ZXIuaGFzUm91dGUobmFtZSkpOwog
        ICAgfQoKICAgIGlmIChxdWVyeVBhcmFtcykgewogICAgICAvLyByb3V0ZXIu
        anMgZXhwZWN0cyBxdWVyeVBhcmFtcyB0byBiZSBwYXNzZWQgaW4gaW4KICAg
        ICAgLy8gdGhlaXIgZmluYWwgc2VyaWFsaXplZCBmb3JtLCBzbyB3ZSBuZWVk
        IHRvIHRyYW5zbGF0ZS4KCiAgICAgIGlmICghbmFtZSkgewogICAgICAgIC8v
        IE5lZWQgdG8gZGV0ZXJtaW5lIGRlc3RpbmF0aW9uIHJvdXRlIG5hbWUuCiAg
        ICAgICAgdmFyIGhhbmRsZXJJbmZvcyA9IHRoaXMucm91dGVyLmFjdGl2ZVRy
        YW5zaXRpb24gPwogICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJv
        dXRlci5hY3RpdmVUcmFuc2l0aW9uLnN0YXRlLmhhbmRsZXJJbmZvcyA6CiAg
        ICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucm91dGVyLnN0YXRlLmhh
        bmRsZXJJbmZvczsKICAgICAgICBuYW1lID0gaGFuZGxlckluZm9zW2hhbmRs
        ZXJJbmZvcy5sZW5ndGggLSAxXS5uYW1lOwogICAgICAgIGFyZ3MudW5zaGlm
        dChuYW1lKTsKICAgICAgfQoKICAgICAgdmFyIHFwTWFwcGluZ3MgPSB0aGlz
        Ll9xdWVyeVBhcmFtTmFtZXNGb3IobmFtZSk7CgoKICAgICAgRW1iZXIuUm91
        dGVyLl90cmFuc2xhdGVRdWVyeVBhcmFtcyhxdWVyeVBhcmFtcywgcXBNYXBw
        aW5ncy50cmFuc2xhdGlvbnMsIG5hbWUpOwogICAgICB2YXIgdmFsdWU7CiAg
        ICAgIGZvciAodmFyIGtleSBpbiBxdWVyeVBhcmFtcykgewogICAgICAgIHZh
        ciBkZXNjb3BlZFBhcmFtID0gRW1iZXIuUm91dGVyLl9kZXNjb3BlUXVlcnlQ
        YXJhbShrZXkpOwogICAgICAgIGlmIChrZXkgaW4gcXBNYXBwaW5ncy5xdWVy
        eVBhcmFtcykgewogICAgICAgICAgdmFsdWUgPSBxdWVyeVBhcmFtc1trZXld
        OwogICAgICAgICAgZGVsZXRlIHF1ZXJ5UGFyYW1zW2tleV07CiAgICAgICAg
        ICBxdWVyeVBhcmFtc1txcE1hcHBpbmdzLnF1ZXJ5UGFyYW1zW2tleV1dID0g
        dmFsdWU7CiAgICAgICAgfSBlbHNlIGlmIChkZXNjb3BlZFBhcmFtIGluIHFw
        TWFwcGluZ3MudmFsaWRRdWVyeVBhcmFtcykgewogICAgICAgICAgdmFsdWUg
        PSBxdWVyeVBhcmFtc1trZXldOwogICAgICAgICAgZGVsZXRlIHF1ZXJ5UGFy
        YW1zW2tleV07CiAgICAgICAgICBxdWVyeVBhcmFtc1tkZXNjb3BlZFBhcmFt
        XSA9IHZhbHVlOwogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIHZhciB0
        cmFuc2l0aW9uUHJvbWlzZSA9IHRoaXMucm91dGVyW21ldGhvZF0uYXBwbHko
        dGhpcy5yb3V0ZXIsIGFyZ3MpOwoKICAgIHRyYW5zaXRpb25Qcm9taXNlLnRo
        ZW4obnVsbCwgZnVuY3Rpb24oZXJyb3IpIHsKICAgICAgaWYgKGVycm9yICYm
        IGVycm9yLm5hbWUgPT09ICJVbnJlY29nbml6ZWRVUkxFcnJvciIpIHsKICAg
        ICAgICBFbWJlci5hc3NlcnQoIlRoZSBVUkwgJyIgKyBlcnJvci5tZXNzYWdl
        ICsgIicgZGlkIG5vdCBtYXRjaCBhbnkgcm91dGVzIGluIHlvdXIgYXBwbGlj
        YXRpb24iKTsKICAgICAgfQogICAgfSwgJ0VtYmVyOiBDaGVjayBmb3IgUm91
        dGVyIHVucmVjb2duaXplZCBVUkwgZXJyb3InKTsKCiAgICAvLyBXZSB3YW50
        IHRvIHJldHVybiB0aGUgY29uZmlndXJhYmxlIHByb21pc2Ugb2JqZWN0CiAg
        ICAvLyBzbyB0aGF0IGNhbGxlcnMgb2YgdGhpcyBmdW5jdGlvbiBjYW4gdXNl
        IGAubWV0aG9kKClgIG9uIGl0LAogICAgLy8gd2hpY2ggb2J2aW91c2x5IGRv
        ZXNuJ3QgZXhpc3QgZm9yIG5vcm1hbCBSU1ZQIHByb21pc2VzLgogICAgcmV0
        dXJuIHRyYW5zaXRpb25Qcm9taXNlOwogIH0sCgogIF9zY2hlZHVsZUxvYWRp
        bmdFdmVudDogZnVuY3Rpb24odHJhbnNpdGlvbiwgb3JpZ2luUm91dGUpIHsK
        ICAgIHRoaXMuX2NhbmNlbExvYWRpbmdFdmVudCgpOwogICAgdGhpcy5fbG9h
        ZGluZ1N0YXRlVGltZXIgPSBFbWJlci5ydW4uc2NoZWR1bGVPbmNlKCdyb3V0
        ZXJUcmFuc2l0aW9ucycsIHRoaXMsICdfZmlyZUxvYWRpbmdFdmVudCcsIHRy
        YW5zaXRpb24sIG9yaWdpblJvdXRlKTsKICB9LAoKICBfZmlyZUxvYWRpbmdF
        dmVudDogZnVuY3Rpb24odHJhbnNpdGlvbiwgb3JpZ2luUm91dGUpIHsKICAg
        IGlmICghdGhpcy5yb3V0ZXIuYWN0aXZlVHJhbnNpdGlvbikgewogICAgICAv
        LyBEb24ndCBmaXJlIGFuIGV2ZW50IGlmIHdlJ3ZlIHNpbmNlIG1vdmVkIG9u
        IGZyb20KICAgICAgLy8gdGhlIHRyYW5zaXRpb24gdGhhdCBwdXQgdXMgaW4g
        YSBsb2FkaW5nIHN0YXRlLgogICAgICByZXR1cm47CiAgICB9CgogICAgdHJh
        bnNpdGlvbi50cmlnZ2VyKHRydWUsICdsb2FkaW5nJywgdHJhbnNpdGlvbiwg
        b3JpZ2luUm91dGUpOwogIH0sCgogIF9jYW5jZWxMb2FkaW5nRXZlbnQ6IGZ1
        bmN0aW9uICgpIHsKICAgIGlmICh0aGlzLl9sb2FkaW5nU3RhdGVUaW1lcikg
        ewogICAgICBFbWJlci5ydW4uY2FuY2VsKHRoaXMuX2xvYWRpbmdTdGF0ZVRp
        bWVyKTsKICAgIH0KICAgIHRoaXMuX2xvYWRpbmdTdGF0ZVRpbWVyID0gbnVs
        bDsKICB9LAoKICBfcXVlcnlQYXJhbU5hbWVzRm9yOiBmdW5jdGlvbihyb3V0
        ZU5hbWUpIHsKCiAgICAvLyBUT0RPOiBhZGQgY2FjaGluZwoKICAgIHZhciBo
        YW5kbGVySW5mb3MgPSB0aGlzLnJvdXRlci5yZWNvZ25pemVyLmhhbmRsZXJz
        Rm9yKHJvdXRlTmFtZSk7CiAgICB2YXIgcmVzdWx0ID0geyBxdWVyeVBhcmFt
        czogRW1iZXIuY3JlYXRlKG51bGwpLCB0cmFuc2xhdGlvbnM6IEVtYmVyLmNy
        ZWF0ZShudWxsKSwgdmFsaWRRdWVyeVBhcmFtczogRW1iZXIuY3JlYXRlKG51
        bGwpIH07CiAgICB2YXIgcm91dGVyanMgPSB0aGlzLnJvdXRlcjsKICAgIGZv
        ckVhY2goaGFuZGxlckluZm9zLCBmdW5jdGlvbihyZWNvZ0hhbmRsZXIpIHsK
        ICAgICAgdmFyIHJvdXRlID0gcm91dGVyanMuZ2V0SGFuZGxlcihyZWNvZ0hh
        bmRsZXIuaGFuZGxlcik7CiAgICAgIGdldFF1ZXJ5UGFyYW1zRm9yUm91dGUo
        cm91dGUsIHJlc3VsdCk7CiAgICB9KTsKCiAgICBkZXNjb3BlUXVlcnlQYXJh
        bXMocmVzdWx0LnF1ZXJ5UGFyYW1zKTsKCiAgICBmb3IgKHZhciBrIGluIHJl
        c3VsdC5xdWVyeVBhcmFtcykgewogICAgICByZXN1bHQudmFsaWRRdWVyeVBh
        cmFtc1tyZXN1bHQucXVlcnlQYXJhbXNba11dID0gdHJ1ZTsKICAgIH0KICAg
        IHJldHVybiByZXN1bHQ7CiAgfSwKCiAgX3F1ZXJ5UGFyYW1OYW1lc0ZvclNp
        bmdsZTogZnVuY3Rpb24ocm91dGVOYW1lKSB7CgogICAgLy8gVE9ETzogYWRk
        IGNhY2hpbmcKCiAgICB2YXIgcmVzdWx0ID0geyBxdWVyeVBhcmFtczogRW1i
        ZXIuY3JlYXRlKG51bGwpLCB0cmFuc2xhdGlvbnM6IEVtYmVyLmNyZWF0ZShu
        dWxsKSB9OwogICAgdmFyIHJvdXRlID0gdGhpcy5yb3V0ZXIuZ2V0SGFuZGxl
        cihyb3V0ZU5hbWUpOwoKICAgIGdldFF1ZXJ5UGFyYW1zRm9yUm91dGUocm91
        dGUsIHJlc3VsdCk7CgogICAgLy8gRGVzY29wZSBub24gZHVwbGljYXRlIHBh
        cmFtcy4KICAgIGlmIChyb3V0ZU5hbWUgIT09ICdhcHBsaWNhdGlvbicpIHsK
        ICAgICAgdmFyIGFsbFBhcmFtcyA9IHRoaXMuX3F1ZXJ5UGFyYW1OYW1lc0Zv
        cihyb3V0ZU5hbWUpOwogICAgICBmb3IgKHZhciBrIGluIHJlc3VsdC5xdWVy
        eVBhcmFtcykgewogICAgICAgIHJlc3VsdC5xdWVyeVBhcmFtc1trXSA9IGFs
        bFBhcmFtcy5xdWVyeVBhcmFtc1trXTsKICAgICAgfQogICAgfQoKICAgIHJl
        dHVybiByZXN1bHQ7CiAgfSwKCiAgLyoqCiAgICBAcHJpdmF0ZQoKICAgIFV0
        aWxpdHkgZnVuY3Rpb24gZm9yIGZldGNoaW5nIGFsbCB0aGUgY3VycmVudCBx
        dWVyeSBwYXJhbXMKICAgIHZhbHVlcyBmcm9tIGEgY29udHJvbGxlci4KICAg
        Ki8KICBfcXVlcnlQYXJhbU92ZXJyaWRlczogZnVuY3Rpb24ocmVzdWx0cywg
        cXVlcnlQYXJhbXMsIGNhbGxiYWNrKSB7CiAgICBmb3IgKHZhciBuYW1lIGlu
        IHF1ZXJ5UGFyYW1zKSB7CiAgICAgIHZhciBwYXJ0cyA9IG5hbWUuc3BsaXQo
        JzonKTsKCiAgICAgIHZhciBjb250cm9sbGVyID0gY29udHJvbGxlck9yUHJv
        dG9Gb3IocGFydHNbMF0sIHRoaXMuY29udGFpbmVyKTsKICAgICAgRW1iZXIu
        YXNzZXJ0KGZtdCgiQ291bGQgbm90IGxvb2t1cCBjb250cm9sbGVyICclQCcg
        d2hpbGUgc2V0dGluZyB1cCBxdWVyeSBwYXJhbXMiLCBbY29udHJvbGxlcl0p
        LCBjb250cm9sbGVyKTsKCiAgICAgIC8vIE5vdyBhc3NpZ24gdGhlIGZpbmFs
        IFVSTC1zZXJpYWxpemVkIGtleS12YWx1ZSBwYWlyLAogICAgICAvLyBlLmcu
        ICJmb29bcHJvcE5hbWVdIjogInZhbHVlIgogICAgICByZXN1bHRzW3F1ZXJ5
        UGFyYW1zW25hbWVdXSA9IGdldChjb250cm9sbGVyLCBwYXJ0c1sxXSk7Cgog
        ICAgICBpZiAoY2FsbGJhY2spIHsKICAgICAgICAvLyBHaXZlIGNhbGxiYWNr
        IGEgY2hhbmNlIHRvIG92ZXJyaWRlLgogICAgICAgIGNhbGxiYWNrKG5hbWUs
        IHF1ZXJ5UGFyYW1zW25hbWVdLCBuYW1lKTsKICAgICAgfQogICAgfQogIH0K
        fSk7CgovKioKICBAcHJpdmF0ZQogKi8KZnVuY3Rpb24gZ2V0UXVlcnlQYXJh
        bXNGb3JSb3V0ZShyb3V0ZSwgcmVzdWx0KSB7CiAgdmFyIGNvbnRyb2xsZXJO
        YW1lID0gcm91dGUuY29udHJvbGxlck5hbWUgfHwgcm91dGUucm91dGVOYW1l
        LAogICAgICBjb250cm9sbGVyID0gY29udHJvbGxlck9yUHJvdG9Gb3IoY29u
        dHJvbGxlck5hbWUsIHJvdXRlLmNvbnRhaW5lciksCiAgICAgIHF1ZXJ5UGFy
        YW1zID0gZ2V0KGNvbnRyb2xsZXIsICdxdWVyeVBhcmFtcycpOwoKICBpZiAo
        cXVlcnlQYXJhbXMpIHsKICAgIGZvckVhY2gocXVlcnlQYXJhbXMsIGZ1bmN0
        aW9uKHByb3BOYW1lKSB7CgogICAgICB2YXIgcGFydHMgPSBwcm9wTmFtZS5z
        cGxpdCgnOicpOwoKICAgICAgdmFyIHVybEtleU5hbWU7CiAgICAgIGlmIChw
        YXJ0cy5sZW5ndGggPiAxKSB7CiAgICAgICAgdXJsS2V5TmFtZSA9IHBhcnRz
        WzFdOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIFRPRE86IHVzZSBfcXVl
        cnlQYXJhbVNjb3BlIGhlcmU/CiAgICAgICAgaWYgKGNvbnRyb2xsZXJOYW1l
        ICE9PSAnYXBwbGljYXRpb24nKSB7CiAgICAgICAgICB1cmxLZXlOYW1lID0g
        Y29udHJvbGxlck5hbWUgKyAnWycgKyBwcm9wTmFtZSArICddJzsKICAgICAg
        ICB9IGVsc2UgewogICAgICAgICAgdXJsS2V5TmFtZSA9IHByb3BOYW1lOwog
        ICAgICAgIH0KICAgICAgfQoKICAgICAgdmFyIGNvbnRyb2xsZXJGdWxsbmFt
        ZSA9IGNvbnRyb2xsZXJOYW1lICsgJzonICsgcHJvcE5hbWU7CgogICAgICBy
        ZXN1bHQucXVlcnlQYXJhbXNbY29udHJvbGxlckZ1bGxuYW1lXSA9IHVybEtl
        eU5hbWU7CiAgICAgIHJlc3VsdC50cmFuc2xhdGlvbnNbcGFydHNbMF1dID0g
        Y29udHJvbGxlckZ1bGxuYW1lOwogICAgfSk7CiAgfQp9CgpmdW5jdGlvbiBj
        b250cm9sbGVyT3JQcm90b0Zvcihjb250cm9sbGVyTmFtZSwgY29udGFpbmVy
        KSB7CiAgdmFyIGZ1bGxOYW1lID0gJ2NvbnRyb2xsZXI6JyArIGNvbnRyb2xs
        ZXJOYW1lOwogIGlmIChjb250YWluZXIuY2FjaGUuaGFzKGZ1bGxOYW1lKSkg
        ewogICAgcmV0dXJuIGNvbnRhaW5lci5sb29rdXAoZnVsbE5hbWUpOwogIH0g
        ZWxzZSB7CiAgICAvLyBDb250cm9sbGVyIGhhc24ndCBiZWVuIGluc3RhbnRp
        YXRlZCB5ZXQ7IGp1c3QgcmV0dXJuIGl0cyBwcm90by4KICAgIHZhciBjb250
        cm9sbGVyQ2xhc3MgPSBjb250YWluZXIubG9va3VwRmFjdG9yeShmdWxsTmFt
        ZSk7CiAgICBpZiAoY29udHJvbGxlckNsYXNzICYmIHR5cGVvZiBjb250cm9s
        bGVyQ2xhc3MucHJvdG8gPT09ICdmdW5jdGlvbicpIHsKICAgICAgcmV0dXJu
        IGNvbnRyb2xsZXJDbGFzcy5wcm90bygpOwogICAgfSBlbHNlIHsKICAgICAg
        cmV0dXJuIHt9OwogICAgfQogIH0KfQoKZnVuY3Rpb24gZGVzY29wZVF1ZXJ5
        UGFyYW1zKHBhcmFtcykgewogIHZhciBwYXJhbUNvdW50cyA9IHt9LAogICAg
        ICBkZXNjb3BlZFBhcmFtLAogICAgICBrOwoKICAvLyBMb29wIHRocm91Z2gg
        cGFyYW1zIGFuZCBjb3VudCB0aGUgb2NjdXJhbmNlIG9mIGRlc2NvcGVkIHBh
        cmFtCiAgZm9yIChrIGluIHBhcmFtcykgewogICAgZGVzY29wZWRQYXJhbSA9
        IEVtYmVyLlJvdXRlci5fZGVzY29wZVF1ZXJ5UGFyYW0ocGFyYW1zW2tdKTsK
        CiAgICBpZiAoIXBhcmFtQ291bnRzW2Rlc2NvcGVkUGFyYW1dKSB7CiAgICAg
        IHBhcmFtQ291bnRzW2Rlc2NvcGVkUGFyYW1dID0gMTsKICAgIH0gZWxzZSB7
        CiAgICAgIHBhcmFtQ291bnRzW2Rlc2NvcGVkUGFyYW1dID0gcGFyYW1Db3Vu
        dHNbZGVzY29wZWRQYXJhbV0gKyAxOwogICAgfQogIH0KCiAgLy8gTG9vcCB0
        aHJvdWdoIGFnYWluIGRlc2NvcGluZyBwYXJhbXMgaWYgdGhlIGRlc2NvcGVk
        IGtleSBvbmx5IG9jY3VycyBvbmNlCiAgZm9yIChrIGluIHBhcmFtcykgewog
        ICAgZGVzY29wZWRQYXJhbSA9IEVtYmVyLlJvdXRlci5fZGVzY29wZVF1ZXJ5
        UGFyYW0ocGFyYW1zW2tdKTsKCiAgICBpZiAocGFyYW1Db3VudHNbZGVzY29w
        ZWRQYXJhbV0gPT09IDEpIHsKICAgICAgcGFyYW1zW2tdID0gZGVzY29wZWRQ
        YXJhbTsKICAgIH0KICB9Cn0KCi8qKgogIEhlbHBlciBmdW5jdGlvbiBmb3Ig
        aXRlcmF0aW5nIHJvb3Qtd2FyZCwgc3RhcnRpbmcKICBmcm9tIChidXQgbm90
        IGluY2x1ZGluZykgdGhlIHByb3ZpZGVkIGBvcmlnaW5Sb3V0ZWAuCgogIFJl
        dHVybnMgdHJ1ZSBpZiB0aGUgbGFzdCBjYWxsYmFjayBmaXJlZCByZXF1ZXN0
        ZWQKICB0byBidWJibGUgdXB3YXJkLgoKICBAcHJpdmF0ZQogKi8KZnVuY3Rp
        b24gZm9yRWFjaFJvdXRlQWJvdmUob3JpZ2luUm91dGUsIHRyYW5zaXRpb24s
        IGNhbGxiYWNrKSB7CiAgdmFyIGhhbmRsZXJJbmZvcyA9IHRyYW5zaXRpb24u
        c3RhdGUuaGFuZGxlckluZm9zLAogICAgICBvcmlnaW5Sb3V0ZUZvdW5kID0g
        ZmFsc2U7CgogIGZvciAodmFyIGkgPSBoYW5kbGVySW5mb3MubGVuZ3RoIC0g
        MTsgaSA+PSAwOyAtLWkpIHsKICAgIHZhciBoYW5kbGVySW5mbyA9IGhhbmRs
        ZXJJbmZvc1tpXSwKICAgICAgICByb3V0ZSA9IGhhbmRsZXJJbmZvLmhhbmRs
        ZXI7CgogICAgaWYgKCFvcmlnaW5Sb3V0ZUZvdW5kKSB7CiAgICAgIGlmIChv
        cmlnaW5Sb3V0ZSA9PT0gcm91dGUpIHsKICAgICAgICBvcmlnaW5Sb3V0ZUZv
        dW5kID0gdHJ1ZTsKICAgICAgfQogICAgICBjb250aW51ZTsKICAgIH0KCiAg
        ICBpZiAoY2FsbGJhY2socm91dGUsIGhhbmRsZXJJbmZvc1tpICsgMV0uaGFu
        ZGxlcikgIT09IHRydWUpIHsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQog
        IH0KICByZXR1cm4gdHJ1ZTsKfQoKLy8gVGhlc2UgZ2V0IGludm9rZWQgd2hl
        biBhbiBhY3Rpb24gYnViYmxlcyBhYm92ZSBBcHBsaWNhdGlvblJvdXRlCi8v
        IGFuZCBhcmUgbm90IG1lYW50IHRvIGJlIG92ZXJyaWRhYmxlLgp2YXIgZGVm
        YXVsdEFjdGlvbkhhbmRsZXJzID0gewoKICB3aWxsUmVzb2x2ZU1vZGVsOiBm
        dW5jdGlvbih0cmFuc2l0aW9uLCBvcmlnaW5Sb3V0ZSkgewogICAgb3JpZ2lu
        Um91dGUucm91dGVyLl9zY2hlZHVsZUxvYWRpbmdFdmVudCh0cmFuc2l0aW9u
        LCBvcmlnaW5Sb3V0ZSk7CiAgfSwKCiAgZXJyb3I6IGZ1bmN0aW9uKGVycm9y
        LCB0cmFuc2l0aW9uLCBvcmlnaW5Sb3V0ZSkgewogICAgLy8gQXR0ZW1wdCB0
        byBmaW5kIGFuIGFwcHJvcHJpYXRlIGVycm9yIHN1YnN0YXRlIHRvIGVudGVy
        LgogICAgdmFyIHJvdXRlciA9IG9yaWdpblJvdXRlLnJvdXRlcjsKCiAgICB2
        YXIgdHJ5VG9wTGV2ZWwgPSBmb3JFYWNoUm91dGVBYm92ZShvcmlnaW5Sb3V0
        ZSwgdHJhbnNpdGlvbiwgZnVuY3Rpb24ocm91dGUsIGNoaWxkUm91dGUpIHsK
        ICAgICAgdmFyIGNoaWxkRXJyb3JSb3V0ZU5hbWUgPSBmaW5kQ2hpbGRSb3V0
        ZU5hbWUocm91dGUsIGNoaWxkUm91dGUsICdlcnJvcicpOwogICAgICBpZiAo
        Y2hpbGRFcnJvclJvdXRlTmFtZSkgewogICAgICAgIHJvdXRlci5pbnRlcm1l
        ZGlhdGVUcmFuc2l0aW9uVG8oY2hpbGRFcnJvclJvdXRlTmFtZSwgZXJyb3Ip
        OwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICByZXR1cm4gdHJ1ZTsK
        ICAgIH0pOwoKICAgIGlmICh0cnlUb3BMZXZlbCkgewogICAgICAvLyBDaGVj
        ayBmb3IgdG9wLWxldmVsIGVycm9yIHN0YXRlIHRvIGVudGVyLgogICAgICBp
        ZiAocm91dGVIYXNCZWVuRGVmaW5lZChvcmlnaW5Sb3V0ZS5yb3V0ZXIsICdh
        cHBsaWNhdGlvbl9lcnJvcicpKSB7CiAgICAgICAgcm91dGVyLmludGVybWVk
        aWF0ZVRyYW5zaXRpb25UbygnYXBwbGljYXRpb25fZXJyb3InLCBlcnJvcik7
        CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICB9IGVsc2UgewogICAgICAv
        LyBEb24ndCBmaXJlIGFuIGFzc2VydGlvbiBpZiB3ZSBmb3VuZCBhbiBlcnJv
        ciBzdWJzdGF0ZS4KICAgICAgcmV0dXJuOwogICAgfQoKICAgIEVtYmVyLkxv
        Z2dlci5lcnJvcignRXJyb3Igd2hpbGUgbG9hZGluZyByb3V0ZTogJyArIChl
        cnJvciAmJiBlcnJvci5zdGFjaykpOwogIH0sCgogIGxvYWRpbmc6IGZ1bmN0
        aW9uKHRyYW5zaXRpb24sIG9yaWdpblJvdXRlKSB7CiAgICAvLyBBdHRlbXB0
        IHRvIGZpbmQgYW4gYXBwcm9wcmlhdGUgbG9hZGluZyBzdWJzdGF0ZSB0byBl
        bnRlci4KICAgIHZhciByb3V0ZXIgPSBvcmlnaW5Sb3V0ZS5yb3V0ZXI7Cgog
        ICAgdmFyIHRyeVRvcExldmVsID0gZm9yRWFjaFJvdXRlQWJvdmUob3JpZ2lu
        Um91dGUsIHRyYW5zaXRpb24sIGZ1bmN0aW9uKHJvdXRlLCBjaGlsZFJvdXRl
        KSB7CiAgICAgIHZhciBjaGlsZExvYWRpbmdSb3V0ZU5hbWUgPSBmaW5kQ2hp
        bGRSb3V0ZU5hbWUocm91dGUsIGNoaWxkUm91dGUsICdsb2FkaW5nJyk7Cgog
        ICAgICBpZiAoY2hpbGRMb2FkaW5nUm91dGVOYW1lKSB7CiAgICAgICAgcm91
        dGVyLmludGVybWVkaWF0ZVRyYW5zaXRpb25UbyhjaGlsZExvYWRpbmdSb3V0
        ZU5hbWUpOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgLy8gRG9u
        J3QgYnViYmxlIGFib3ZlIHBpdm90IHJvdXRlLgogICAgICBpZiAodHJhbnNp
        dGlvbi5waXZvdEhhbmRsZXIgIT09IHJvdXRlKSB7CiAgICAgICAgcmV0dXJu
        IHRydWU7CiAgICAgIH0KICAgIH0pOwoKICAgIGlmICh0cnlUb3BMZXZlbCkg
        ewogICAgICAvLyBDaGVjayBmb3IgdG9wLWxldmVsIGxvYWRpbmcgc3RhdGUg
        dG8gZW50ZXIuCiAgICAgIGlmIChyb3V0ZUhhc0JlZW5EZWZpbmVkKG9yaWdp
        blJvdXRlLnJvdXRlciwgJ2FwcGxpY2F0aW9uX2xvYWRpbmcnKSkgewogICAg
        ICAgIHJvdXRlci5pbnRlcm1lZGlhdGVUcmFuc2l0aW9uVG8oJ2FwcGxpY2F0
        aW9uX2xvYWRpbmcnKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgIH0K
        ICB9Cn07CgpmdW5jdGlvbiBmaW5kQ2hpbGRSb3V0ZU5hbWUocGFyZW50Um91
        dGUsIG9yaWdpbmF0aW5nQ2hpbGRSb3V0ZSwgbmFtZSkgewogIHZhciByb3V0
        ZXIgPSBwYXJlbnRSb3V0ZS5yb3V0ZXIsCiAgICAgIGNoaWxkTmFtZSwKICAg
        ICAgdGFyZ2V0Q2hpbGRSb3V0ZU5hbWUgPSBvcmlnaW5hdGluZ0NoaWxkUm91
        dGUucm91dGVOYW1lLnNwbGl0KCcuJykucG9wKCksCiAgICAgIG5hbWVzcGFj
        ZSA9IHBhcmVudFJvdXRlLnJvdXRlTmFtZSA9PT0gJ2FwcGxpY2F0aW9uJyA/
        ICcnIDogcGFyZW50Um91dGUucm91dGVOYW1lICsgJy4nOwoKICAKICAvLyBT
        ZWNvbmQsIHRyeSBnZW5lcmFsIGxvYWRpbmcgc3RhdGUsIGUuZy4gJ2xvYWRp
        bmcnCiAgY2hpbGROYW1lID0gbmFtZXNwYWNlICsgbmFtZTsKICBpZiAocm91
        dGVIYXNCZWVuRGVmaW5lZChyb3V0ZXIsIGNoaWxkTmFtZSkpIHsKICAgIHJl
        dHVybiBjaGlsZE5hbWU7CiAgfQp9CgpmdW5jdGlvbiByb3V0ZUhhc0JlZW5E
        ZWZpbmVkKHJvdXRlciwgbmFtZSkgewogIHZhciBjb250YWluZXIgPSByb3V0
        ZXIuY29udGFpbmVyOwogIHJldHVybiByb3V0ZXIuaGFzUm91dGUobmFtZSkg
        JiYKICAgICAgICAgKGNvbnRhaW5lci5oYXMoJ3RlbXBsYXRlOicgKyBuYW1l
        KSB8fCBjb250YWluZXIuaGFzKCdyb3V0ZTonICsgbmFtZSkpOwp9CgpmdW5j
        dGlvbiB0cmlnZ2VyRXZlbnQoaGFuZGxlckluZm9zLCBpZ25vcmVGYWlsdXJl
        LCBhcmdzKSB7CiAgdmFyIG5hbWUgPSBhcmdzLnNoaWZ0KCk7CgogIGlmICgh
        aGFuZGxlckluZm9zKSB7CiAgICBpZiAoaWdub3JlRmFpbHVyZSkgeyByZXR1
        cm47IH0KICAgIHRocm93IG5ldyBFbWJlci5FcnJvcigiQ2FuJ3QgdHJpZ2dl
        ciBhY3Rpb24gJyIgKyBuYW1lICsgIicgYmVjYXVzZSB5b3VyIGFwcCBoYXNu
        J3QgZmluaXNoZWQgdHJhbnNpdGlvbmluZyBpbnRvIGl0cyBmaXJzdCByb3V0
        ZS4gVG8gdHJpZ2dlciBhbiBhY3Rpb24gb24gZGVzdGluYXRpb24gcm91dGVz
        IGR1cmluZyBhIHRyYW5zaXRpb24sIHlvdSBjYW4gY2FsbCBgLnNlbmQoKWAg
        b24gdGhlIGBUcmFuc2l0aW9uYCBvYmplY3QgcGFzc2VkIHRvIHRoZSBgbW9k
        ZWwvYmVmb3JlTW9kZWwvYWZ0ZXJNb2RlbGAgaG9va3MuIik7CiAgfQoKICB2
        YXIgZXZlbnRXYXNIYW5kbGVkID0gZmFsc2U7CgogIGZvciAodmFyIGkgPSBo
        YW5kbGVySW5mb3MubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHsKICAgIHZh
        ciBoYW5kbGVySW5mbyA9IGhhbmRsZXJJbmZvc1tpXSwKICAgICAgICBoYW5k
        bGVyID0gaGFuZGxlckluZm8uaGFuZGxlcjsKCiAgICBpZiAoaGFuZGxlci5f
        YWN0aW9ucyAmJiBoYW5kbGVyLl9hY3Rpb25zW25hbWVdKSB7CiAgICAgIGlm
        IChoYW5kbGVyLl9hY3Rpb25zW25hbWVdLmFwcGx5KGhhbmRsZXIsIGFyZ3Mp
        ID09PSB0cnVlKSB7CiAgICAgICAgZXZlbnRXYXNIYW5kbGVkID0gdHJ1ZTsK
        ICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgIH0K
        ICB9CgogIGlmIChkZWZhdWx0QWN0aW9uSGFuZGxlcnNbbmFtZV0pIHsKICAg
        IGRlZmF1bHRBY3Rpb25IYW5kbGVyc1tuYW1lXS5hcHBseShudWxsLCBhcmdz
        KTsKICAgIHJldHVybjsKICB9CgogIGlmICghZXZlbnRXYXNIYW5kbGVkICYm
        ICFpZ25vcmVGYWlsdXJlKSB7CiAgICB0aHJvdyBuZXcgRW1iZXIuRXJyb3Io
        Ik5vdGhpbmcgaGFuZGxlZCB0aGUgYWN0aW9uICciICsgbmFtZSArICInLiBJ
        ZiB5b3UgZGlkIGhhbmRsZSB0aGUgYWN0aW9uLCB0aGlzIGVycm9yIGNhbiBi
        ZSBjYXVzZWQgYnkgcmV0dXJuaW5nIHRydWUgZnJvbSBhbiBhY3Rpb24gaGFu
        ZGxlciBpbiBhIGNvbnRyb2xsZXIsIGNhdXNpbmcgdGhlIGFjdGlvbiB0byBi
        dWJibGUuIik7CiAgfQp9CgpmdW5jdGlvbiB1cGRhdGVQYXRocyhyb3V0ZXIp
        IHsKICB2YXIgYXBwQ29udHJvbGxlciA9IHJvdXRlci5jb250YWluZXIubG9v
        a3VwKCdjb250cm9sbGVyOmFwcGxpY2F0aW9uJyk7CgogIGlmICghYXBwQ29u
        dHJvbGxlcikgewogICAgLy8gYXBwQ29udHJvbGxlciBtaWdodCBub3QgZXhp
        c3Qgd2hlbiB0b3AtbGV2ZWwgbG9hZGluZy9lcnJvcgogICAgLy8gc3Vic3Rh
        dGVzIGhhdmUgYmVlbiBlbnRlcmVkIHNpbmNlIEFwcGxpY2F0aW9uUm91dGUg
        aGFzbid0CiAgICAvLyBhY3R1YWxseSBiZWVuIGVudGVyZWQgYXQgdGhhdCBw
        b2ludC4KICAgIHJldHVybjsKICB9CgogIHZhciBpbmZvcyA9IHJvdXRlci5y
        b3V0ZXIuY3VycmVudEhhbmRsZXJJbmZvcywKICAgICAgcGF0aCA9IEVtYmVy
        LlJvdXRlci5fcm91dGVQYXRoKGluZm9zKTsKCiAgaWYgKCEoJ2N1cnJlbnRQ
        YXRoJyBpbiBhcHBDb250cm9sbGVyKSkgewogICAgZGVmaW5lUHJvcGVydHko
        YXBwQ29udHJvbGxlciwgJ2N1cnJlbnRQYXRoJyk7CiAgfQoKICBzZXQoYXBw
        Q29udHJvbGxlciwgJ2N1cnJlbnRQYXRoJywgcGF0aCk7CgogIGlmICghKCdj
        dXJyZW50Um91dGVOYW1lJyBpbiBhcHBDb250cm9sbGVyKSkgewogICAgZGVm
        aW5lUHJvcGVydHkoYXBwQ29udHJvbGxlciwgJ2N1cnJlbnRSb3V0ZU5hbWUn
        KTsKICB9CgogIHNldChhcHBDb250cm9sbGVyLCAnY3VycmVudFJvdXRlTmFt
        ZScsIGluZm9zW2luZm9zLmxlbmd0aCAtIDFdLm5hbWUpOwp9CgpFbWJlci5S
        b3V0ZXIucmVvcGVuQ2xhc3MoewogIHJvdXRlcjogbnVsbCwKICBtYXA6IGZ1
        bmN0aW9uKGNhbGxiYWNrKSB7CiAgICB2YXIgcm91dGVyID0gdGhpcy5yb3V0
        ZXI7CiAgICBpZiAoIXJvdXRlcikgewogICAgICByb3V0ZXIgPSBuZXcgUm91
        dGVyKCk7CiAgICAgIHJvdXRlci5jYWxsYmFja3MgPSBbXTsKICAgICAgcm91
        dGVyLnRyaWdnZXJFdmVudCA9IHRyaWdnZXJFdmVudDsKICAgICAgdGhpcy5y
        ZW9wZW5DbGFzcyh7IHJvdXRlcjogcm91dGVyIH0pOwogICAgfQoKICAgIHZh
        ciBkc2wgPSBFbWJlci5Sb3V0ZXJEU0wubWFwKGZ1bmN0aW9uKCkgewogICAg
        ICB0aGlzLnJlc291cmNlKCdhcHBsaWNhdGlvbicsIHsgcGF0aDogIi8iIH0s
        IGZ1bmN0aW9uKCkgewogICAgICAgIGZvciAodmFyIGk9MDsgaSA8IHJvdXRl
        ci5jYWxsYmFja3MubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIHJvdXRlci5j
        YWxsYmFja3NbaV0uY2FsbCh0aGlzKTsKICAgICAgICB9CiAgICAgICAgY2Fs
        bGJhY2suY2FsbCh0aGlzKTsKICAgICAgfSk7CiAgICB9KTsKCiAgICByb3V0
        ZXIuY2FsbGJhY2tzLnB1c2goY2FsbGJhY2spOwogICAgcm91dGVyLm1hcChk
        c2wuZ2VuZXJhdGUoKSk7CiAgICByZXR1cm4gcm91dGVyOwogIH0sCgogIF9y
        b3V0ZVBhdGg6IGZ1bmN0aW9uKGhhbmRsZXJJbmZvcykgewogICAgdmFyIHBh
        dGggPSBbXTsKCiAgICAvLyBXZSBoYXZlIHRvIGhhbmRsZSBjb2FsZXNjaW5n
        IHJlc291cmNlIG5hbWVzIHRoYXQKICAgIC8vIGFyZSBwcmVmaXhlZCB3aXRo
        IHRoZWlyIHBhcmVudCdzIG5hbWVzLCBlLmcuCiAgICAvLyBbJ2ZvbycsICdm
        b28uYmFyLmJheiddID0+ICdmb28uYmFyLmJheicsIG5vdCAnZm9vLmZvby5i
        YXIuYmF6JwoKICAgIGZ1bmN0aW9uIGludGVyc2VjdGlvbk1hdGNoZXMoYTEs
        IGEyKSB7CiAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBhMS5sZW5ndGg7
        IGkgPCBsZW47ICsraSkgewogICAgICAgIGlmIChhMVtpXSAhPT0gYTJbaV0p
        IHsKICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgIH0K
        ICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgZm9yICh2YXIgaT0xLCBs
        PWhhbmRsZXJJbmZvcy5sZW5ndGg7IGk8bDsgaSsrKSB7CiAgICAgIHZhciBu
        YW1lID0gaGFuZGxlckluZm9zW2ldLm5hbWUsCiAgICAgICAgICBuYW1lUGFy
        dHMgPSBuYW1lLnNwbGl0KCIuIiksCiAgICAgICAgICBvbGROYW1lUGFydHMg
        PSBzbGljZS5jYWxsKHBhdGgpOwoKICAgICAgd2hpbGUgKG9sZE5hbWVQYXJ0
        cy5sZW5ndGgpIHsKICAgICAgICBpZiAoaW50ZXJzZWN0aW9uTWF0Y2hlcyhv
        bGROYW1lUGFydHMsIG5hbWVQYXJ0cykpIHsKICAgICAgICAgIGJyZWFrOwog
        ICAgICAgIH0KICAgICAgICBvbGROYW1lUGFydHMuc2hpZnQoKTsKICAgICAg
        fQoKICAgICAgcGF0aC5wdXNoLmFwcGx5KHBhdGgsIG5hbWVQYXJ0cy5zbGlj
        ZShvbGROYW1lUGFydHMubGVuZ3RoKSk7CiAgICB9CgogICAgcmV0dXJuIHBh
        dGguam9pbigiLiIpOwogIH0sCgogIF90cmFuc2xhdGVRdWVyeVBhcmFtczog
        ZnVuY3Rpb24ocXVlcnlQYXJhbXMsIHRyYW5zbGF0aW9ucywgcm91dGVOYW1l
        KSB7CiAgICBmb3IgKHZhciBuYW1lIGluIHF1ZXJ5UGFyYW1zKSB7CiAgICAg
        IGlmICghcXVlcnlQYXJhbXMuaGFzT3duUHJvcGVydHkobmFtZSkpIHsgY29u
        dGludWU7IH0KCiAgICAgIGlmIChuYW1lIGluIHRyYW5zbGF0aW9ucykgewog
        ICAgICAgIHF1ZXJ5UGFyYW1zW3RyYW5zbGF0aW9uc1tuYW1lXV0gPSBxdWVy
        eVBhcmFtc1tuYW1lXTsKICAgICAgICBkZWxldGUgcXVlcnlQYXJhbXNbbmFt
        ZV07CiAgICAgIH0gZWxzZSB7CiAgICAgICAgRW1iZXIuYXNzZXJ0KGZtdCgi
        WW91IHN1cHBsaWVkIGFuIHVua25vd24gcXVlcnkgcGFyYW0gY29udHJvbGxl
        ciBwcm9wZXJ0eSAnJUAnIGZvciByb3V0ZSAnJUAnLiBPbmx5IHRoZSBmb2xs
        b3dpbmcgcXVlcnkgcGFyYW0gcHJvcGVydGllcyBjYW4gYmUgc2V0IGZvciB0
        aGlzIHJvdXRlOiAlQCIsIFtuYW1lLCByb3V0ZU5hbWUsIEVtYmVyLmtleXMo
        dHJhbnNsYXRpb25zKV0pLCBuYW1lIGluIHF1ZXJ5UGFyYW1zKTsKICAgICAg
        fQogICAgfQogIH0sCgogIF9kZXNjb3BlUXVlcnlQYXJhbTogZnVuY3Rpb24o
        cGFyYW0pIHsKICAgIHZhciByZWdleCA9IC9cWyguKylcXS8sCiAgICAgICAg
        cmVzdWx0ID0gcGFyYW0ubWF0Y2gocmVnZXgpOwoKICAgIGlmICghcmVzdWx0
        KSB7CiAgICAgIHJlc3VsdCA9IHBhcmFtOwogICAgfSBlbHNlIHsKICAgICAg
        cmVzdWx0ID0gcmVzdWx0WzFdOwogICAgfQoKICAgIHJldHVybiByZXN1bHQ7
        CiAgfQp9KTsKCgoKfSkoKTsKCgoKKGZ1bmN0aW9uKCkgewovKioKQG1vZHVs
        ZSBlbWJlcgpAc3VibW9kdWxlIGVtYmVyLXJvdXRpbmcKKi8KCnZhciBnZXQg
        PSBFbWJlci5nZXQsIHNldCA9IEVtYmVyLnNldCwKICAgIGdldFByb3BlcnRp
        ZXMgPSBFbWJlci5nZXRQcm9wZXJ0aWVzLAogICAgY2xhc3NpZnkgPSBFbWJl
        ci5TdHJpbmcuY2xhc3NpZnksCiAgICBmbXQgPSBFbWJlci5TdHJpbmcuZm10
        LAogICAgYV9mb3JFYWNoID0gRW1iZXIuRW51bWVyYWJsZVV0aWxzLmZvckVh
        Y2gsCiAgICBhX3JlcGxhY2UgPSBFbWJlci5FbnVtZXJhYmxlVXRpbHMucmVw
        bGFjZTsKCgovKioKICBUaGUgYEVtYmVyLlJvdXRlYCBjbGFzcyBpcyB1c2Vk
        IHRvIGRlZmluZSBpbmRpdmlkdWFsIHJvdXRlcy4gUmVmZXIgdG8KICB0aGUg
        W3JvdXRpbmcgZ3VpZGVdKGh0dHA6Ly9lbWJlcmpzLmNvbS9ndWlkZXMvcm91
        dGluZy8pIGZvciBkb2N1bWVudGF0aW9uLgoKICBAY2xhc3MgUm91dGUKICBA
        bmFtZXNwYWNlIEVtYmVyCiAgQGV4dGVuZHMgRW1iZXIuT2JqZWN0CiAgQHVz
        ZXMgRW1iZXIuQWN0aW9uSGFuZGxlcgoqLwpFbWJlci5Sb3V0ZSA9IEVtYmVy
        Lk9iamVjdC5leHRlbmQoRW1iZXIuQWN0aW9uSGFuZGxlciwgewoKICAvKioK
        ICAgIEBwcml2YXRlCgogICAgQG1ldGhvZCBleGl0CiAgKi8KICBleGl0OiBm
        dW5jdGlvbigpIHsKICAgICAgICB0aGlzLmRlYWN0aXZhdGUoKTsKICAgIHRo
        aXMudGVhcmRvd25WaWV3cygpOwogIH0sCgogIC8qKgogICAgQHByaXZhdGUK
        CiAgICBAbWV0aG9kIGVudGVyCiAgKi8KICBlbnRlcjogZnVuY3Rpb24oKSB7
        CiAgICB0aGlzLmFjdGl2YXRlKCk7CiAgfSwKCiAgLyoqCiAgICBUaGUgbmFt
        ZSBvZiB0aGUgdmlldyB0byB1c2UgYnkgZGVmYXVsdCB3aGVuIHJlbmRlcmlu
        ZyB0aGlzIHJvdXRlcyB0ZW1wbGF0ZS4KCiAgICBXaGVuIHJlbmRlcmluZyBh
        IHRlbXBsYXRlLCB0aGUgcm91dGUgd2lsbCwgYnkgZGVmYXVsdCwgZGV0ZXJt
        aW5lIHRoZQogICAgdGVtcGxhdGUgYW5kIHZpZXcgdG8gdXNlIGZyb20gdGhl
        IG5hbWUgb2YgdGhlIHJvdXRlIGl0c2VsZi4gSWYgeW91IG5lZWQgdG8KICAg
        IGRlZmluZSBhIHNwZWNpZmljIHZpZXcsIHNldCB0aGlzIHByb3BlcnR5LgoK
        ICAgIFRoaXMgaXMgdXNlZnVsIHdoZW4gbXVsdGlwbGUgcm91dGVzIHdvdWxk
        IGJlbmVmaXQgZnJvbSB1c2luZyB0aGUgc2FtZSB2aWV3CiAgICBiZWNhdXNl
        IGl0IGRvZXNuJ3QgcmVxdWlyZSBhIGN1c3RvbSBgcmVuZGVyVGVtcGxhdGVg
        IG1ldGhvZC4gRm9yIGV4YW1wbGUsCiAgICB0aGUgZm9sbG93aW5nIHJvdXRl
        cyB3aWxsIGFsbCByZW5kZXIgdXNpbmcgdGhlIGBBcHAuUG9zdHNMaXN0Vmll
        d2AgdmlldzoKCiAgICBgYGBqcwogICAgdmFyIFBvc3RzTGlzdCA9IEVtYmVy
        LlJvdXRlLmV4dGVuZCh7CiAgICAgIHZpZXdOYW1lOiAncG9zdHNMaXN0JywK
        ICAgIH0pOwoKICAgIEFwcC5Qb3N0c0luZGV4Um91dGUgPSBQb3N0c0xpc3Qu
        ZXh0ZW5kKCk7CiAgICBBcHAuUG9zdHNBcmNoaXZlZFJvdXRlID0gUG9zdHNM
        aXN0LmV4dGVuZCgpOwogICAgYGBgCgogICAgQHByb3BlcnR5IHZpZXdOYW1l
        CiAgICBAdHlwZSBTdHJpbmcKICAgIEBkZWZhdWx0IG51bGwKICAqLwogIHZp
        ZXdOYW1lOiBudWxsLAoKICAvKioKICAgIFRoZSBuYW1lIG9mIHRoZSB0ZW1w
        bGF0ZSB0byB1c2UgYnkgZGVmYXVsdCB3aGVuIHJlbmRlcmluZyB0aGlzIHJv
        dXRlcwogICAgdGVtcGxhdGUuCgogICAgVGhpcyBpcyBzaW1pbGFyIHdpdGgg
        YHZpZXdOYW1lYCwgYnV0IGlzIHVzZWZ1bCB3aGVuIHlvdSBqdXN0IHdhbnQg
        YSBjdXN0b20KICAgIHRlbXBsYXRlIHdpdGhvdXQgYSB2aWV3LgoKICAgIGBg
        YGpzCiAgICB2YXIgUG9zdHNMaXN0ID0gRW1iZXIuUm91dGUuZXh0ZW5kKHsK
        ICAgICAgdGVtcGxhdGVOYW1lOiAncG9zdHMvbGlzdCcKICAgIH0pOwoKICAg
        IEFwcC5Qb3N0c0luZGV4Um91dGUgPSBQb3N0c0xpc3QuZXh0ZW5kKCk7CiAg
        ICBBcHAuUG9zdHNBcmNoaXZlZFJvdXRlID0gUG9zdHNMaXN0LmV4dGVuZCgp
        OwogICAgYGBgCgogICAgQHByb3BlcnR5IHRlbXBsYXRlTmFtZQogICAgQHR5
        cGUgU3RyaW5nCiAgICBAZGVmYXVsdCBudWxsCiAgKi8KICB0ZW1wbGF0ZU5h
        bWU6IG51bGwsCgogIC8qKgogICAgVGhlIG5hbWUgb2YgdGhlIGNvbnRyb2xs
        ZXIgdG8gYXNzb2NpYXRlIHdpdGggdGhpcyByb3V0ZS4KCiAgICBCeSBkZWZh
        dWx0LCBFbWJlciB3aWxsIGxvb2t1cCBhIHJvdXRlJ3MgY29udHJvbGxlciB0
        aGF0IG1hdGNoZXMgdGhlIG5hbWUKICAgIG9mIHRoZSByb3V0ZSAoaS5lLiBg
        QXBwLlBvc3RDb250cm9sbGVyYCBmb3IgYEFwcC5Qb3N0Um91dGVgKS4gSG93
        ZXZlciwKICAgIGlmIHlvdSB3b3VsZCBsaWtlIHRvIGRlZmluZSBhIHNwZWNp
        ZmljIGNvbnRyb2xsZXIgdG8gdXNlLCB5b3UgY2FuIGRvIHNvCiAgICB1c2lu
        ZyB0aGlzIHByb3BlcnR5LgoKICAgIFRoaXMgaXMgdXNlZnVsIGluIG1hbnkg
        d2F5cywgYXMgdGhlIGNvbnRyb2xsZXIgc3BlY2lmaWVkIHdpbGwgYmU6Cgog
        ICAgKiBwYXNzZWQgdG8gdGhlIGBzZXR1cENvbnRyb2xsZXJgIG1ldGhvZC4K
        ICAgICogdXNlZCBhcyB0aGUgY29udHJvbGxlciBmb3IgdGhlIHZpZXcgYmVp
        bmcgcmVuZGVyZWQgYnkgdGhlIHJvdXRlLgogICAgKiByZXR1cm5lZCBmcm9t
        IGEgY2FsbCB0byBgY29udHJvbGxlckZvcmAgZm9yIHRoZSByb3V0ZS4KCiAg
        ICBAcHJvcGVydHkgY29udHJvbGxlck5hbWUKICAgIEB0eXBlIFN0cmluZwog
        ICAgQGRlZmF1bHQgbnVsbAogICovCiAgY29udHJvbGxlck5hbWU6IG51bGws
        CgogIC8qKgogICAgVGhlIGNvbGxlY3Rpb24gb2YgZnVuY3Rpb25zLCBrZXll
        ZCBieSBuYW1lLCBhdmFpbGFibGUgb24gdGhpcyByb3V0ZSBhcwogICAgYWN0
        aW9uIHRhcmdldHMuCgogICAgVGhlc2UgZnVuY3Rpb25zIHdpbGwgYmUgaW52
        b2tlZCB3aGVuIGEgbWF0Y2hpbmcgYHt7YWN0aW9ufX1gIGlzIHRyaWdnZXJl
        ZAogICAgZnJvbSB3aXRoaW4gYSB0ZW1wbGF0ZSBhbmQgdGhlIGFwcGxpY2F0
        aW9uJ3MgY3VycmVudCByb3V0ZSBpcyB0aGlzIHJvdXRlLgoKICAgIEFjdGlv
        bnMgY2FuIGFsc28gYmUgaW52b2tlZCBmcm9tIG90aGVyIHBhcnRzIG9mIHlv
        dXIgYXBwbGljYXRpb24gdmlhIGBSb3V0ZSNzZW5kYAogICAgb3IgYENvbnRy
        b2xsZXIjc2VuZGAuCgogICAgVGhlIGBhY3Rpb25zYCBoYXNoIHdpbGwgaW5o
        ZXJpdCBhY3Rpb24gaGFuZGxlcnMgZnJvbQogICAgdGhlIGBhY3Rpb25zYCBo
        YXNoIGRlZmluZWQgb24gZXh0ZW5kZWQgUm91dGUgcGFyZW50IGNsYXNzZXMK
        ICAgIG9yIG1peGlucyByYXRoZXIgdGhhbiBqdXN0IHJlcGxhY2UgdGhlIGVu
        dGlyZSBoYXNoLCBlLmcuOgoKICAgIGBgYGpzCiAgICBBcHAuQ2FuRGlzcGxh
        eUJhbm5lciA9IEVtYmVyLk1peGluLmNyZWF0ZSh7CiAgICAgIGFjdGlvbnM6
        IHsKICAgICAgICBkaXNwbGF5QmFubmVyOiBmdW5jdGlvbihtc2cpIHsKICAg
        ICAgICAgIC8vIC4uLgogICAgICAgIH0KICAgICAgfQogICAgfSk7CgogICAg
        QXBwLldlbGNvbWVSb3V0ZSA9IEVtYmVyLlJvdXRlLmV4dGVuZChBcHAuQ2Fu
        RGlzcGxheUJhbm5lciwgewogICAgICBhY3Rpb25zOiB7CiAgICAgICAgcGxh
        eU11c2ljOiBmdW5jdGlvbigpIHsKICAgICAgICAgIC8vIC4uLgogICAgICAg
        IH0KICAgICAgfQogICAgfSk7CgogICAgLy8gYFdlbGNvbWVSb3V0ZWAsIHdo
        ZW4gYWN0aXZlLCB3aWxsIGJlIGFibGUgdG8gcmVzcG9uZAogICAgLy8gdG8g
        Ym90aCBhY3Rpb25zLCBzaW5jZSB0aGUgYWN0aW9ucyBoYXNoIGlzIG1lcmdl
        ZCByYXRoZXIKICAgIC8vIHRoZW4gcmVwbGFjZWQgd2hlbiBleHRlbmRpbmcg
        bWl4aW5zIC8gcGFyZW50IGNsYXNzZXMuCiAgICB0aGlzLnNlbmQoJ2Rpc3Bs
        YXlCYW5uZXInKTsKICAgIHRoaXMuc2VuZCgncGxheU11c2ljJyk7CiAgICBg
        YGAKCiAgICBXaXRoaW4gYSByb3V0ZSdzIGFjdGlvbiBoYW5kbGVyLCB0aGUg
        dmFsdWUgb2YgdGhlIGB0aGlzYCBjb250ZXh0CiAgICBpcyB0aGUgUm91dGUg
        b2JqZWN0OgoKICAgIGBgYGpzCiAgICBBcHAuU29uZ1JvdXRlID0gRW1iZXIu
        Um91dGUuZXh0ZW5kKHsKICAgICAgYWN0aW9uczogewogICAgICAgIG15QWN0
        aW9uOiBmdW5jdGlvbigpIHsKICAgICAgICAgIHRoaXMuY29udHJvbGxlckZv
        cigic29uZyIpOwogICAgICAgICAgdGhpcy50cmFuc2l0aW9uVG8oIm90aGVy
        LnJvdXRlIik7CiAgICAgICAgICAuLi4KICAgICAgICB9CiAgICAgIH0KICAg
        IH0pOwogICAgYGBgCgogICAgSXQgaXMgYWxzbyBwb3NzaWJsZSB0byBjYWxs
        IGB0aGlzLl9zdXBlcigpYCBmcm9tIHdpdGhpbiBhbgogICAgYWN0aW9uIGhh
        bmRsZXIgaWYgaXQgb3ZlcnJpZGVzIGEgaGFuZGxlciBkZWZpbmVkIG9uIGEg
        cGFyZW50CiAgICBjbGFzcyBvciBtaXhpbjoKCiAgICBUYWtlIGZvciBleGFt
        cGxlIHRoZSBmb2xsb3dpbmcgcm91dGVzOgoKICAgIGBgYGpzCiAgICBBcHAu
        RGVidWdSb3V0ZSA9IEVtYmVyLk1peGluLmNyZWF0ZSh7CiAgICAgIGFjdGlv
        bnM6IHsKICAgICAgICBkZWJ1Z1JvdXRlSW5mb3JtYXRpb246IGZ1bmN0aW9u
        KCkgewogICAgICAgICAgY29uc29sZS5kZWJ1ZygidHJvbG9sbyIpOwogICAg
        ICAgIH0KICAgICAgfQogICAgfSk7CgogICAgQXBwLkFubm95aW5nRGVidWdS
        b3V0ZSA9IEVtYmVyLlJvdXRlLmV4dGVuZChBcHAuRGVidWdSb3V0ZSwgewog
        ICAgICBhY3Rpb25zOiB7CiAgICAgICAgZGVidWdSb3V0ZUluZm9ybWF0aW9u
        OiBmdW5jdGlvbigpIHsKICAgICAgICAgIC8vIGFsc28gY2FsbCB0aGUgZGVi
        dWdSb3V0ZUluZm9ybWF0aW9uIG9mIG1peGVkIGluIEFwcC5EZWJ1Z1JvdXRl
        CiAgICAgICAgICB0aGlzLl9zdXBlcigpOwoKICAgICAgICAgIC8vIHNob3cg
        YWRkaXRpb25hbCBhbm5veWFuY2UKICAgICAgICAgIHdpbmRvdy5hbGVydCgu
        Li4pOwogICAgICAgIH0KICAgICAgfQogICAgfSk7CiAgICBgYGAKCiAgICAj
        IyBCdWJibGluZwoKICAgIEJ5IGRlZmF1bHQsIGFuIGFjdGlvbiB3aWxsIHN0
        b3AgYnViYmxpbmcgb25jZSBhIGhhbmRsZXIgZGVmaW5lZAogICAgb24gdGhl
        IGBhY3Rpb25zYCBoYXNoIGhhbmRsZXMgaXQuIFRvIGNvbnRpbnVlIGJ1YmJs
        aW5nIHRoZSBhY3Rpb24sCiAgICB5b3UgbXVzdCByZXR1cm4gYHRydWVgIGZy
        b20gdGhlIGhhbmRsZXI6CgogICAgYGBganMKICAgIEFwcC5Sb3V0ZXIubWFw
        KGZ1bmN0aW9uKCkgewogICAgICB0aGlzLnJlc291cmNlKCJhbGJ1bSIsIGZ1
        bmN0aW9uKCkgewogICAgICAgIHRoaXMucm91dGUoInNvbmciKTsKICAgICAg
        fSk7CiAgICB9KTsKCiAgICBBcHAuQWxidW1Sb3V0ZSA9IEVtYmVyLlJvdXRl
        LmV4dGVuZCh7CiAgICAgIGFjdGlvbnM6IHsKICAgICAgICBzdGFydFBsYXlp
        bmc6IGZ1bmN0aW9uKCkgewogICAgICAgIH0KICAgICAgfQogICAgfSk7Cgog
        ICAgQXBwLkFsYnVtU29uZ1JvdXRlID0gRW1iZXIuUm91dGUuZXh0ZW5kKHsK
        ICAgICAgYWN0aW9uczogewogICAgICAgIHN0YXJ0UGxheWluZzogZnVuY3Rp
        b24oKSB7CiAgICAgICAgICAvLyAuLi4KCiAgICAgICAgICBpZiAoYWN0aW9u
        U2hvdWxkQWxzb0JlVHJpZ2dlcmVkT25QYXJlbnRSb3V0ZSkgewogICAgICAg
        ICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAg
        IH0KICAgIH0pOwogICAgYGBgCgogICAgIyMgQnVpbHQtaW4gYWN0aW9ucwoK
        ICAgIFRoZXJlIGFyZSBhIGZldyBidWlsdC1pbiBhY3Rpb25zIHBlcnRhaW5p
        bmcgdG8gdHJhbnNpdGlvbnMgdGhhdCB5b3UKICAgIGNhbiB1c2UgdG8gY3Vz
        dG9taXplIHRyYW5zaXRpb24gYmVoYXZpb3I6IGB3aWxsVHJhbnNpdGlvbmAg
        YW5kCiAgICBgZXJyb3JgLgoKICAgICMjIyBgd2lsbFRyYW5zaXRpb25gCgog
        ICAgVGhlIGB3aWxsVHJhbnNpdGlvbmAgYWN0aW9uIGlzIGZpcmVkIGF0IHRo
        ZSBiZWdpbm5pbmcgb2YgYW55CiAgICBhdHRlbXB0ZWQgdHJhbnNpdGlvbiB3
        aXRoIGEgYFRyYW5zaXRpb25gIG9iamVjdCBhcyB0aGUgc29sZQogICAgYXJn
        dW1lbnQuIFRoaXMgYWN0aW9uIGNhbiBiZSB1c2VkIGZvciBhYm9ydGluZywg
        cmVkaXJlY3RpbmcsCiAgICBvciBkZWNvcmF0aW5nIHRoZSB0cmFuc2l0aW9u
        IGZyb20gdGhlIGN1cnJlbnRseSBhY3RpdmUgcm91dGVzLgoKICAgIEEgZ29v
        ZCBleGFtcGxlIGlzIHByZXZlbnRpbmcgbmF2aWdhdGlvbiB3aGVuIGEgZm9y
        bSBpcwogICAgaGFsZi1maWxsZWQgb3V0OgoKICAgIGBgYGpzCiAgICBBcHAu
        Q29udGFjdEZvcm1Sb3V0ZSA9IEVtYmVyLlJvdXRlLmV4dGVuZCh7CiAgICAg
        IGFjdGlvbnM6IHsKICAgICAgICB3aWxsVHJhbnNpdGlvbjogZnVuY3Rpb24o
        dHJhbnNpdGlvbikgewogICAgICAgICAgaWYgKHRoaXMuY29udHJvbGxlci5n
        ZXQoJ3VzZXJIYXNFbnRlcmVkRGF0YScpKSB7CiAgICAgICAgICAgIHRoaXMu
        Y29udHJvbGxlci5kaXNwbGF5TmF2aWdhdGlvbkNvbmZpcm0oKTsKICAgICAg
        ICAgICAgdHJhbnNpdGlvbi5hYm9ydCgpOwogICAgICAgICAgfQogICAgICAg
        IH0KICAgICAgfQogICAgfSk7CiAgICBgYGAKCiAgICBZb3UgY2FuIGFsc28g
        cmVkaXJlY3QgZWxzZXdoZXJlIGJ5IGNhbGxpbmcKICAgIGB0aGlzLnRyYW5z
        aXRpb25UbygnZWxzZXdoZXJlJylgIGZyb20gd2l0aGluIGB3aWxsVHJhbnNp
        dGlvbmAuCiAgICBOb3RlIHRoYXQgYHdpbGxUcmFuc2l0aW9uYCB3aWxsIG5v
        dCBiZSBmaXJlZCBmb3IgdGhlCiAgICByZWRpcmVjdGluZyBgdHJhbnNpdGlv
        blRvYCwgc2luY2UgYHdpbGxUcmFuc2l0aW9uYCBkb2Vzbid0CiAgICBmaXJl
        IHdoZW4gdGhlcmUgaXMgYWxyZWFkeSBhIHRyYW5zaXRpb24gdW5kZXJ3YXku
        IElmIHlvdSB3YW50CiAgICBzdWJzZXF1ZW50IGB3aWxsVHJhbnNpdGlvbmAg
        YWN0aW9ucyB0byBmaXJlIGZvciB0aGUgcmVkaXJlY3RpbmcKICAgIHRyYW5z
        aXRpb24sIHlvdSBtdXN0IGZpcnN0IGV4cGxpY2l0bHkgY2FsbAogICAgYHRy
        YW5zaXRpb24uYWJvcnQoKWAuCgogICAgIyMjIGBlcnJvcmAKCiAgICBXaGVu
        IGF0dGVtcHRpbmcgdG8gdHJhbnNpdGlvbiBpbnRvIGEgcm91dGUsIGFueSBv
        ZiB0aGUgaG9va3MKICAgIG1heSByZXR1cm4gYSBwcm9taXNlIHRoYXQgcmVq
        ZWN0cywgYXQgd2hpY2ggcG9pbnQgYW4gYGVycm9yYAogICAgYWN0aW9uIHdp
        bGwgYmUgZmlyZWQgb24gdGhlIHBhcnRpYWxseS1lbnRlcmVkIHJvdXRlcywg
        YWxsb3dpbmcKICAgIGZvciBwZXItcm91dGUgZXJyb3IgaGFuZGxpbmcgbG9n
        aWMsIG9yIHNoYXJlZCBlcnJvciBoYW5kbGluZwogICAgbG9naWMgZGVmaW5l
        ZCBvbiBhIHBhcmVudCByb3V0ZS4KCiAgICBIZXJlIGlzIGFuIGV4YW1wbGUg
        b2YgYW4gZXJyb3IgaGFuZGxlciB0aGF0IHdpbGwgYmUgaW52b2tlZAogICAg
        Zm9yIHJlamVjdGVkIHByb21pc2VzIGZyb20gdGhlIHZhcmlvdXMgaG9va3Mg
        b24gdGhlIHJvdXRlLAogICAgYXMgd2VsbCBhcyBhbnkgdW5oYW5kbGVkIGVy
        cm9ycyBmcm9tIGNoaWxkIHJvdXRlczoKCiAgICBgYGBqcwogICAgQXBwLkFk
        bWluUm91dGUgPSBFbWJlci5Sb3V0ZS5leHRlbmQoewogICAgICBiZWZvcmVN
        b2RlbDogZnVuY3Rpb24oKSB7CiAgICAgICAgcmV0dXJuIEVtYmVyLlJTVlAu
        cmVqZWN0KCJiYWQgdGhpbmdzISIpOwogICAgICB9LAoKICAgICAgYWN0aW9u
        czogewogICAgICAgIGVycm9yOiBmdW5jdGlvbihlcnJvciwgdHJhbnNpdGlv
        bikgewogICAgICAgICAgLy8gQXNzdW1pbmcgd2UgZ290IGhlcmUgZHVlIHRv
        IHRoZSBlcnJvciBpbiBgYmVmb3JlTW9kZWxgLAogICAgICAgICAgLy8gd2Ug
        Y2FuIGV4cGVjdCB0aGF0IGVycm9yID09PSAiYmFkIHRoaW5ncyEiLAogICAg
        ICAgICAgLy8gYnV0IGEgcHJvbWlzZSBtb2RlbCByZWplY3Rpbmcgd291bGQg
        YWxzbwogICAgICAgICAgLy8gY2FsbCB0aGlzIGhvb2ssIGFzIHdvdWxkIGFu
        eSBlcnJvcnMgZW5jb3VudGVyZWQKICAgICAgICAgIC8vIGluIGBhZnRlck1v
        ZGVsYC4KCiAgICAgICAgICAvLyBUaGUgYGVycm9yYCBob29rIGlzIGFsc28g
        cHJvdmlkZWQgdGhlIGZhaWxlZAogICAgICAgICAgLy8gYHRyYW5zaXRpb25g
        LCB3aGljaCBjYW4gYmUgc3RvcmVkIGFuZCBsYXRlcgogICAgICAgICAgLy8g
        YC5yZXRyeSgpYGQgaWYgZGVzaXJlZC4KCiAgICAgICAgICB0aGlzLnRyYW5z
        aXRpb25UbygnbG9naW4nKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0pOwog
        ICAgYGBgCgogICAgYGVycm9yYCBhY3Rpb25zIHRoYXQgYnViYmxlIHVwIGFs
        bCB0aGUgd2F5IHRvIGBBcHBsaWNhdGlvblJvdXRlYAogICAgd2lsbCBmaXJl
        IGEgZGVmYXVsdCBlcnJvciBoYW5kbGVyIHRoYXQgbG9ncyB0aGUgZXJyb3Iu
        IFlvdSBjYW4KICAgIHNwZWNpZnkgeW91ciBvd24gZ2xvYmFsIGRlZmF1bHQg
        ZXJyb3IgaGFuZGxlciBieSBvdmVycmlkaW5nIHRoZQogICAgYGVycm9yYCBo
        YW5kbGVyIG9uIGBBcHBsaWNhdGlvblJvdXRlYDoKCiAgICBgYGBqcwogICAg
        QXBwLkFwcGxpY2F0aW9uUm91dGUgPSBFbWJlci5Sb3V0ZS5leHRlbmQoewog
        ICAgICBhY3Rpb25zOiB7CiAgICAgICAgZXJyb3I6IGZ1bmN0aW9uKGVycm9y
        LCB0cmFuc2l0aW9uKSB7CiAgICAgICAgICB0aGlzLmNvbnRyb2xsZXJGb3Io
        J2Jhbm5lcicpLmRpc3BsYXlFcnJvcihlcnJvci5tZXNzYWdlKTsKICAgICAg
        ICB9CiAgICAgIH0KICAgIH0pOwogICAgYGBgCgogICAgQHByb3BlcnR5IGFj
        dGlvbnMKICAgIEB0eXBlIEhhc2gKICAgIEBkZWZhdWx0IG51bGwKICAqLwog
        IF9hY3Rpb25zOiB7CiAgICBmaW5hbGl6ZVF1ZXJ5UGFyYW1DaGFuZ2U6IGZ1
        bmN0aW9uKHBhcmFtcywgZmluYWxQYXJhbXMpIHsKICAgICAgICAgIH0KICB9
        LAoKICAvKioKICAgIEBkZXByZWNhdGVkCgogICAgUGxlYXNlIHVzZSBgYWN0
        aW9uc2AgaW5zdGVhZC4KICAgIEBtZXRob2QgZXZlbnRzCiAgKi8KICBldmVu
        dHM6IG51bGwsCgogIG1lcmdlZFByb3BlcnRpZXM6IFsnZXZlbnRzJ10sCgog
        IC8qKgogICAgVGhpcyBob29rIGlzIGV4ZWN1dGVkIHdoZW4gdGhlIHJvdXRl
        ciBjb21wbGV0ZWx5IGV4aXRzIHRoaXMgcm91dGUuIEl0IGlzCiAgICBub3Qg
        ZXhlY3V0ZWQgd2hlbiB0aGUgbW9kZWwgZm9yIHRoZSByb3V0ZSBjaGFuZ2Vz
        LgoKICAgIEBtZXRob2QgZGVhY3RpdmF0ZQogICovCiAgZGVhY3RpdmF0ZTog
        RW1iZXIuSywKCiAgLyoqCiAgICBUaGlzIGhvb2sgaXMgZXhlY3V0ZWQgd2hl
        biB0aGUgcm91dGVyIGVudGVycyB0aGUgcm91dGUuIEl0IGlzIG5vdCBleGVj
        dXRlZAogICAgd2hlbiB0aGUgbW9kZWwgZm9yIHRoZSByb3V0ZSBjaGFuZ2Vz
        LgoKICAgIEBtZXRob2QgYWN0aXZhdGUKICAqLwogIGFjdGl2YXRlOiBFbWJl
        ci5LLAoKICAvKioKICAgIFRyYW5zaXRpb24gaW50byBhbm90aGVyIHJvdXRl
        LiBPcHRpb25hbGx5IHN1cHBseSBtb2RlbChzKSBmb3IgdGhlCiAgICByb3V0
        ZSBpbiBxdWVzdGlvbi4gSWYgbXVsdGlwbGUgbW9kZWxzIGFyZSBzdXBwbGll
        ZCB0aGV5IHdpbGwgYmUgYXBwbGllZAogICAgbGFzdCB0byBmaXJzdCByZWN1
        cnNpdmVseSB1cCB0aGUgcmVzb3VyY2UgdHJlZSAoc2VlIE11bHRpcGxlIE1v
        ZGVscyBFeGFtcGxlCiAgICBiZWxvdykuIFRoZSBtb2RlbChzKSB3aWxsIGJl
        IHNlcmlhbGl6ZWQgaW50byB0aGUgVVJMIHVzaW5nIHRoZSBhcHByb3ByaWF0
        ZQogICAgcm91dGUncyBgc2VyaWFsaXplYCBob29rLiBTZWUgYWxzbyAncmVw
        bGFjZVdpdGgnLgoKICAgIFNpbXBsZSBUcmFuc2l0aW9uIEV4YW1wbGUKCiAg
        ICBgYGBqYXZhc2NyaXB0CiAgICBBcHAuUm91dGVyLm1hcChmdW5jdGlvbigp
        IHsKICAgICAgdGhpcy5yb3V0ZSgiaW5kZXgiKTsKICAgICAgdGhpcy5yb3V0
        ZSgic2VjcmV0Iik7CiAgICAgIHRoaXMucm91dGUoImZvdXJPaEZvdXIiLCB7
        IHBhdGg6ICIqOiJ9KTsKICAgIH0pOwoKICAgIEFwcC5JbmRleFJvdXRlID0g
        RW1iZXIuUm91dGUuZXh0ZW5kKHsKICAgICAgYWN0aW9uczogewogICAgICAg
        IG1vdmVUb1NlY3JldDogZnVuY3Rpb24oY29udGV4dCl7CiAgICAgICAgICBp
        ZiAoYXV0aG9yaXplZCgpKXsKICAgICAgICAgICAgdGhpcy50cmFuc2l0aW9u
        VG8oJ3NlY3JldCcsIGNvbnRleHQpOwogICAgICAgICAgfQogICAgICAgICAg
        ICB0aGlzLnRyYW5zaXRpb25UbygnZm91ck9oRm91cicpOwogICAgICAgIH0K
        ICAgICAgfQogICAgfSk7CiAgICBgYGAKCiAgIFRyYW5zaXRpb24gdG8gYSBu
        ZXN0ZWQgcm91dGUKCiAgIGBgYGphdmFzY3JpcHQKICAgQXBwLlJvdXRlci5t
        YXAoZnVuY3Rpb24oKSB7CiAgICAgdGhpcy5yZXNvdXJjZSgnYXJ0aWNsZXMn
        LCB7IHBhdGg6ICcvYXJ0aWNsZXMnIH0sIGZ1bmN0aW9uKCkgewogICAgICAg
        dGhpcy5yb3V0ZSgnbmV3Jyk7CiAgICAgfSk7CiAgIH0pOwoKICAgQXBwLklu
        ZGV4Um91dGUgPSBFbWJlci5Sb3V0ZS5leHRlbmQoewogICAgIGFjdGlvbnM6
        IHsKICAgICAgIHRyYW5zaXRpb25Ub05ld0FydGljbGU6IGZ1bmN0aW9uKCkg
        ewogICAgICAgICB0aGlzLnRyYW5zaXRpb25UbygnYXJ0aWNsZXMubmV3Jyk7
        CiAgICAgICB9CiAgICAgfQogICB9KTsKICAgYGBgCgogICAgTXVsdGlwbGUg
        TW9kZWxzIEV4YW1wbGUKCiAgICBgYGBqYXZhc2NyaXB0CiAgICBBcHAuUm91
        dGVyLm1hcChmdW5jdGlvbigpIHsKICAgICAgdGhpcy5yb3V0ZSgiaW5kZXgi
        KTsKICAgICAgdGhpcy5yZXNvdXJjZSgnYnJlYWtmYXN0Jywge3BhdGg6Jzpi
        cmVha2Zhc3RJZCd9LCBmdW5jdGlvbigpewogICAgICAgIHRoaXMucmVzb3Vy
        Y2UoJ2NlcmVhbCcsIHtwYXRoOiAnOmNlcmVhbElkJ30pOwogICAgICB9KTsK
        ICAgIH0pOwoKICAgIEFwcC5JbmRleFJvdXRlID0gRW1iZXIuUm91dGUuZXh0
        ZW5kKHsKICAgICAgYWN0aW9uczogewogICAgICAgIG1vdmVUb0Nob2NvbGF0
        ZUNlcmVhbDogZnVuY3Rpb24oKXsKICAgICAgICAgIHZhciBjZXJlYWwgPSB7
        IGNlcmVhbElkOiAiQ2hvY29sYXRlWXVtbWluZXNzIn0sCiAgICAgICAgICAg
        ICAgYnJlYWtmYXN0ID0ge2JyZWFrZmFzdElkOiAiQ2VyZWFsQW5kTWlsayJ9
        OwoKICAgICAgICAgIHRoaXMudHJhbnNpdGlvblRvKCdjZXJlYWwnLCBicmVh
        a2Zhc3QsIGNlcmVhbCk7CiAgICAgICAgfQogICAgICB9CiAgICB9KTsKCiAg
        ICBAbWV0aG9kIHRyYW5zaXRpb25UbwogICAgQHBhcmFtIHtTdHJpbmd9IG5h
        bWUgdGhlIG5hbWUgb2YgdGhlIHJvdXRlCiAgICBAcGFyYW0gey4uLk9iamVj
        dH0gbW9kZWxzIHRoZSBtb2RlbChzKSB0byBiZSB1c2VkIHdoaWxlIHRyYW5z
        aXRpb25pbmcKICAgIHRvIHRoZSByb3V0ZS4KICAgIEByZXR1cm4ge1RyYW5z
        aXRpb259IHRoZSB0cmFuc2l0aW9uIG9iamVjdCBhc3NvY2lhdGVkIHdpdGgg
        dGhpcwogICAgICBhdHRlbXB0ZWQgdHJhbnNpdGlvbgogICovCiAgdHJhbnNp
        dGlvblRvOiBmdW5jdGlvbihuYW1lLCBjb250ZXh0KSB7CiAgICB2YXIgcm91
        dGVyID0gdGhpcy5yb3V0ZXI7CiAgICByZXR1cm4gcm91dGVyLnRyYW5zaXRp
        b25Uby5hcHBseShyb3V0ZXIsIGFyZ3VtZW50cyk7CiAgfSwKCiAgLyoqCiAg
        ICBQZXJmb3JtIGEgc3luY2hyb25vdXMgdHJhbnNpdGlvbiBpbnRvIGFub3Ro
        ZXIgcm91dGUgd2l0aG91dCBhdHRlbXB0aW5nCiAgICB0byByZXNvbHZlIHBy
        b21pc2VzLCB1cGRhdGUgdGhlIFVSTCwgb3IgYWJvcnQgYW55IGN1cnJlbnRs
        eSBhY3RpdmUKICAgIGFzeW5jaHJvbm91cyB0cmFuc2l0aW9ucyAoaS5lLiBy
        ZWd1bGFyIHRyYW5zaXRpb25zIGNhdXNlZCBieQogICAgYHRyYW5zaXRpb25U
        b2Agb3IgVVJMIGNoYW5nZXMpLgoKICAgIFRoaXMgbWV0aG9kIGlzIGhhbmR5
        IGZvciBwZXJmb3JtaW5nIGludGVybWVkaWF0ZSB0cmFuc2l0aW9ucyBvbiB0
        aGUKICAgIHdheSB0byBhIGZpbmFsIGRlc3RpbmF0aW9uIHJvdXRlLCBhbmQg
        aXMgY2FsbGVkIGludGVybmFsbHkgYnkgdGhlCiAgICBkZWZhdWx0IGltcGxl
        bWVudGF0aW9ucyBvZiB0aGUgYGVycm9yYCBhbmQgYGxvYWRpbmdgIGhhbmRs
        ZXJzLgoKICAgIEBtZXRob2QgaW50ZXJtZWRpYXRlVHJhbnNpdGlvblRvCiAg
        ICBAcGFyYW0ge1N0cmluZ30gbmFtZSB0aGUgbmFtZSBvZiB0aGUgcm91dGUK
        ICAgIEBwYXJhbSB7Li4uT2JqZWN0fSBtb2RlbHMgdGhlIG1vZGVsKHMpIHRv
        IGJlIHVzZWQgd2hpbGUgdHJhbnNpdGlvbmluZwogICAgdG8gdGhlIHJvdXRl
        LgogICAqLwogIGludGVybWVkaWF0ZVRyYW5zaXRpb25UbzogZnVuY3Rpb24o
        KSB7CiAgICB2YXIgcm91dGVyID0gdGhpcy5yb3V0ZXI7CiAgICByb3V0ZXIu
        aW50ZXJtZWRpYXRlVHJhbnNpdGlvblRvLmFwcGx5KHJvdXRlciwgYXJndW1l
        bnRzKTsKICB9LAoKICAvKioKICAgIFJlZnJlc2ggdGhlIG1vZGVsIG9uIHRo
        aXMgcm91dGUgYW5kIGFueSBjaGlsZCByb3V0ZXMsIGZpcmluZyB0aGUKICAg
        IGBiZWZvcmVNb2RlbGAsIGBtb2RlbGAsIGFuZCBgYWZ0ZXJNb2RlbGAgaG9v
        a3MgaW4gYSBzaW1pbGFyIGZhc2hpb24KICAgIHRvIGhvdyByb3V0ZXMgYXJl
        IGVudGVyZWQgd2hlbiB0cmFuc2l0aW9uaW5nIGluIGZyb20gb3RoZXIgcm91
        dGUuCiAgICBUaGUgY3VycmVudCByb3V0ZSBwYXJhbXMgKGUuZy4gYGFydGlj
        bGVfaWRgKSB3aWxsIGJlIHBhc3NlZCBpbgogICAgdG8gdGhlIHJlc3BlY3Rp
        dmUgbW9kZWwgaG9va3MsIGFuZCBpZiBhIGRpZmZlcmVudCBtb2RlbCBpcyBy
        ZXR1cm5lZCwKICAgIGBzZXR1cENvbnRyb2xsZXJgIGFuZCBhc3NvY2lhdGVk
        IHJvdXRlIGhvb2tzIHdpbGwgcmUtZmlyZSBhcyB3ZWxsLgoKICAgIEFuIGV4
        YW1wbGUgdXNhZ2Ugb2YgdGhpcyBtZXRob2QgaXMgcmUtcXVlcnlpbmcgdGhl
        IHNlcnZlciBmb3IgdGhlCiAgICBsYXRlc3QgaW5mb3JtYXRpb24gdXNpbmcg
        dGhlIHNhbWUgcGFyYW1ldGVycyBhcyB3aGVuIHRoZSByb3V0ZQogICAgd2Fz
        IGZpcnN0IGVudGVyZWQuCgogICAgTm90ZSB0aGF0IHRoaXMgd2lsbCBjYXVz
        ZSBgbW9kZWxgIGhvb2tzIHRvIGZpcmUgZXZlbiBvbiByb3V0ZXMKICAgIHRo
        YXQgd2VyZSBwcm92aWRlZCBhIG1vZGVsIG9iamVjdCB3aGVuIHRoZSByb3V0
        ZSB3YXMgaW5pdGlhbGx5CiAgICBlbnRlcmVkLgoKICAgIEBtZXRob2QgcmVm
        cmVzaAogICAgQHJldHVybiB7VHJhbnNpdGlvbn0gdGhlIHRyYW5zaXRpb24g
        b2JqZWN0IGFzc29jaWF0ZWQgd2l0aCB0aGlzCiAgICAgIGF0dGVtcHRlZCB0
        cmFuc2l0aW9uCiAgICovCiAgcmVmcmVzaDogZnVuY3Rpb24oKSB7CiAgICBy
        ZXR1cm4gdGhpcy5yb3V0ZXIucm91dGVyLnJlZnJlc2godGhpcykubWV0aG9k
        KCdyZXBsYWNlJyk7CiAgfSwKCiAgLyoqCiAgICBUcmFuc2l0aW9uIGludG8g
        YW5vdGhlciByb3V0ZSB3aGlsZSByZXBsYWNpbmcgdGhlIGN1cnJlbnQgVVJM
        LCBpZiBwb3NzaWJsZS4KICAgIFRoaXMgd2lsbCByZXBsYWNlIHRoZSBjdXJy
        ZW50IGhpc3RvcnkgZW50cnkgaW5zdGVhZCBvZiBhZGRpbmcgYSBuZXcgb25l
        LgogICAgQmVzaWRlIHRoYXQsIGl0IGlzIGlkZW50aWNhbCB0byBgdHJhbnNp
        dGlvblRvYCBpbiBhbGwgb3RoZXIgcmVzcGVjdHMuIFNlZQogICAgJ3RyYW5z
        aXRpb25UbycgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb24gcmVnYXJkaW5n
        IG11bHRpcGxlIG1vZGVscy4KCiAgICBFeGFtcGxlCgogICAgYGBgamF2YXNj
        cmlwdAogICAgQXBwLlJvdXRlci5tYXAoZnVuY3Rpb24oKSB7CiAgICAgIHRo
        aXMucm91dGUoImluZGV4Iik7CiAgICAgIHRoaXMucm91dGUoInNlY3JldCIp
        OwogICAgfSk7CgogICAgQXBwLlNlY3JldFJvdXRlID0gRW1iZXIuUm91dGUu
        ZXh0ZW5kKHsKICAgICAgYWZ0ZXJNb2RlbDogZnVuY3Rpb24oKSB7CiAgICAg
        ICAgaWYgKCFhdXRob3JpemVkKCkpewogICAgICAgICAgdGhpcy5yZXBsYWNl
        V2l0aCgnaW5kZXgnKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0pOwogICAg
        YGBgCgogICAgQG1ldGhvZCByZXBsYWNlV2l0aAogICAgQHBhcmFtIHtTdHJp
        bmd9IG5hbWUgdGhlIG5hbWUgb2YgdGhlIHJvdXRlCiAgICBAcGFyYW0gey4u
        Lk9iamVjdH0gbW9kZWxzIHRoZSBtb2RlbChzKSB0byBiZSB1c2VkIHdoaWxl
        IHRyYW5zaXRpb25pbmcKICAgIHRvIHRoZSByb3V0ZS4KICAgIEByZXR1cm4g
        e1RyYW5zaXRpb259IHRoZSB0cmFuc2l0aW9uIG9iamVjdCBhc3NvY2lhdGVk
        IHdpdGggdGhpcwogICAgICBhdHRlbXB0ZWQgdHJhbnNpdGlvbgogICovCiAg
        cmVwbGFjZVdpdGg6IGZ1bmN0aW9uKCkgewogICAgdmFyIHJvdXRlciA9IHRo
        aXMucm91dGVyOwogICAgcmV0dXJuIHJvdXRlci5yZXBsYWNlV2l0aC5hcHBs
        eShyb3V0ZXIsIGFyZ3VtZW50cyk7CiAgfSwKCiAgLyoqCiAgICBTZW5kcyBh
        biBhY3Rpb24gdG8gdGhlIHJvdXRlciwgd2hpY2ggd2lsbCBkZWxlZ2F0ZSBp
        dCB0byB0aGUgY3VycmVudGx5CiAgICBhY3RpdmUgcm91dGUgaGllcmFyY2h5
        IHBlciB0aGUgYnViYmxpbmcgcnVsZXMgZXhwbGFpbmVkIHVuZGVyIGBhY3Rp
        b25zYC4KCiAgICBFeGFtcGxlCgogICAgYGBgamF2YXNjcmlwdAogICAgQXBw
        LlJvdXRlci5tYXAoZnVuY3Rpb24oKSB7CiAgICAgIHRoaXMucm91dGUoImlu
        ZGV4Iik7CiAgICB9KTsKCiAgICBBcHAuQXBwbGljYXRpb25Sb3V0ZSA9IEVt
        YmVyLlJvdXRlLmV4dGVuZCh7CiAgICAgIGFjdGlvbnM6IHsKICAgICAgICB0
        cmFjazogZnVuY3Rpb24oYXJnKSB7CiAgICAgICAgICBjb25zb2xlLmxvZyhh
        cmcsICd3YXMgY2xpY2tlZCcpOwogICAgICAgIH0KICAgICAgfQogICAgfSk7
        CgogICAgQXBwLkluZGV4Um91dGUgPSBFbWJlci5Sb3V0ZS5leHRlbmQoewog
        ICAgICBhY3Rpb25zOiB7CiAgICAgICAgdHJhY2tJZkRlYnVnOiBmdW5jdGlv
        bihhcmcpIHsKICAgICAgICAgIGlmIChkZWJ1ZykgewogICAgICAgICAgICB0
        aGlzLnNlbmQoJ3RyYWNrJywgYXJnKTsKICAgICAgICAgIH0KICAgICAgICB9
        CiAgICAgIH0KICAgIH0pOwogICAgYGBgCgogICAgQG1ldGhvZCBzZW5kCiAg
        ICBAcGFyYW0ge1N0cmluZ30gbmFtZSB0aGUgbmFtZSBvZiB0aGUgYWN0aW9u
        IHRvIHRyaWdnZXIKICAgIEBwYXJhbSB7Li4uKn0gYXJncwogICovCiAgc2Vu
        ZDogZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gdGhpcy5yb3V0ZXIuc2VuZC5h
        cHBseSh0aGlzLnJvdXRlciwgYXJndW1lbnRzKTsKICB9LAoKICAvKioKICAg
        IFRoaXMgaG9vayBpcyB0aGUgZW50cnkgcG9pbnQgZm9yIHJvdXRlci5qcwoK
        ICAgIEBwcml2YXRlCiAgICBAbWV0aG9kIHNldHVwCiAgKi8KICBzZXR1cDog
        ZnVuY3Rpb24oY29udGV4dCwgdHJhbnNpdGlvbikgewogICAgdmFyIGNvbnRy
        b2xsZXJOYW1lID0gdGhpcy5jb250cm9sbGVyTmFtZSB8fCB0aGlzLnJvdXRl
        TmFtZSwKICAgICAgICBjb250cm9sbGVyID0gdGhpcy5jb250cm9sbGVyRm9y
        KGNvbnRyb2xsZXJOYW1lLCB0cnVlKTsKICAgIGlmICghY29udHJvbGxlcikg
        ewogICAgICBjb250cm9sbGVyID0gIHRoaXMuZ2VuZXJhdGVDb250cm9sbGVy
        KGNvbnRyb2xsZXJOYW1lLCBjb250ZXh0KTsKICAgIH0KCiAgICAvLyBBc3Np
        Z24gdGhlIHJvdXRlJ3MgY29udHJvbGxlciBzbyB0aGF0IGl0IGNhbiBtb3Jl
        IGVhc2lseSBiZQogICAgLy8gcmVmZXJlbmNlZCBpbiBhY3Rpb24gaGFuZGxl
        cnMKICAgIHRoaXMuY29udHJvbGxlciA9IGNvbnRyb2xsZXI7CgogICAgCiAg
        ICBpZiAodGhpcy5zZXR1cENvbnRyb2xsZXJzKSB7CiAgICAgIEVtYmVyLmRl
        cHJlY2F0ZSgiRW1iZXIuUm91dGUuc2V0dXBDb250cm9sbGVycyBpcyBkZXBy
        ZWNhdGVkLiBQbGVhc2UgdXNlIEVtYmVyLlJvdXRlLnNldHVwQ29udHJvbGxl
        cihjb250cm9sbGVyLCBtb2RlbCkgaW5zdGVhZC4iKTsKICAgICAgdGhpcy5z
        ZXR1cENvbnRyb2xsZXJzKGNvbnRyb2xsZXIsIGNvbnRleHQpOwogICAgfSBl
        bHNlIHsKCiAgICAgIAogICAgICAgIHRoaXMuc2V0dXBDb250cm9sbGVyKGNv
        bnRyb2xsZXIsIGNvbnRleHQpOwogICAgICAKICAgIH0KCiAgICBpZiAodGhp
        cy5yZW5kZXJUZW1wbGF0ZXMpIHsKICAgICAgRW1iZXIuZGVwcmVjYXRlKCJF
        bWJlci5Sb3V0ZS5yZW5kZXJUZW1wbGF0ZXMgaXMgZGVwcmVjYXRlZC4gUGxl
        YXNlIHVzZSBFbWJlci5Sb3V0ZS5yZW5kZXJUZW1wbGF0ZShjb250cm9sbGVy
        LCBtb2RlbCkgaW5zdGVhZC4iKTsKICAgICAgdGhpcy5yZW5kZXJUZW1wbGF0
        ZXMoY29udGV4dCk7CiAgICB9IGVsc2UgewogICAgICB0aGlzLnJlbmRlclRl
        bXBsYXRlKGNvbnRyb2xsZXIsIGNvbnRleHQpOwogICAgfQogIH0sCgogIC8q
        KgogICAgVGhpcyBob29rIGlzIHRoZSBmaXJzdCBvZiB0aGUgcm91dGUgZW50
        cnkgdmFsaWRhdGlvbiBob29rcwogICAgY2FsbGVkIHdoZW4gYW4gYXR0ZW1w
        dCBpcyBtYWRlIHRvIHRyYW5zaXRpb24gaW50byBhIHJvdXRlCiAgICBvciBv
        bmUgb2YgaXRzIGNoaWxkcmVuLiBJdCBpcyBjYWxsZWQgYmVmb3JlIGBtb2Rl
        bGAgYW5kCiAgICBgYWZ0ZXJNb2RlbGAsIGFuZCBpcyBhcHByb3ByaWF0ZSBm
        b3IgY2FzZXMgd2hlbjoKCiAgICAxKSBBIGRlY2lzaW9uIGNhbiBiZSBtYWRl
        IHRvIHJlZGlyZWN0IGVsc2V3aGVyZSB3aXRob3V0CiAgICAgICBuZWVkaW5n
        IHRvIHJlc29sdmUgdGhlIG1vZGVsIGZpcnN0LgogICAgMikgQW55IGFzeW5j
        IG9wZXJhdGlvbnMgbmVlZCB0byBvY2N1ciBmaXJzdCBiZWZvcmUgdGhlCiAg
        ICAgICBtb2RlbCBpcyBhdHRlbXB0ZWQgdG8gYmUgcmVzb2x2ZWQuCgogICAg
        VGhpcyBob29rIGlzIHByb3ZpZGVkIHRoZSBjdXJyZW50IGB0cmFuc2l0aW9u
        YCBhdHRlbXB0CiAgICBhcyBhIHBhcmFtZXRlciwgd2hpY2ggY2FuIGJlIHVz
        ZWQgdG8gYC5hYm9ydCgpYCB0aGUgdHJhbnNpdGlvbiwKICAgIHNhdmUgaXQg
        Zm9yIGEgbGF0ZXIgYC5yZXRyeSgpYCwgb3IgcmV0cmlldmUgdmFsdWVzIHNl
        dAogICAgb24gaXQgZnJvbSBhIHByZXZpb3VzIGhvb2suIFlvdSBjYW4gYWxz
        byBqdXN0IGNhbGwKICAgIGB0aGlzLnRyYW5zaXRpb25Ub2AgdG8gYW5vdGhl
        ciByb3V0ZSB0byBpbXBsaWNpdGx5CiAgICBhYm9ydCB0aGUgYHRyYW5zaXRp
        b25gLgoKICAgIFlvdSBjYW4gcmV0dXJuIGEgcHJvbWlzZSBmcm9tIHRoaXMg
        aG9vayB0byBwYXVzZSB0aGUKICAgIHRyYW5zaXRpb24gdW50aWwgdGhlIHBy
        b21pc2UgcmVzb2x2ZXMgKG9yIHJlamVjdHMpLiBUaGlzIGNvdWxkCiAgICBi
        ZSB1c2VmdWwsIGZvciBpbnN0YW5jZSwgZm9yIHJldHJpZXZpbmcgYXN5bmMg
        Y29kZSBmcm9tCiAgICB0aGUgc2VydmVyIHRoYXQgaXMgcmVxdWlyZWQgdG8g
        ZW50ZXIgYSByb3V0ZS4KCiAgICBgYGBqcwogICAgQXBwLlBvc3RSb3V0ZSA9
        IEVtYmVyLlJvdXRlLmV4dGVuZCh7CiAgICAgIGJlZm9yZU1vZGVsOiBmdW5j
        dGlvbih0cmFuc2l0aW9uKSB7CiAgICAgICAgaWYgKCFBcHAuUG9zdCkgewog
        ICAgICAgICAgcmV0dXJuIEVtYmVyLiQuZ2V0U2NyaXB0KCcvbW9kZWxzL3Bv
        c3QuanMnKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0pOwogICAgYGBgCgog
        ICAgSWYgYEFwcC5Qb3N0YCBkb2Vzbid0IGV4aXN0IGluIHRoZSBhYm92ZSBl
        eGFtcGxlLAogICAgYGJlZm9yZU1vZGVsYCB3aWxsIHVzZSBqUXVlcnkncyBg
        Z2V0U2NyaXB0YCwgd2hpY2gKICAgIHJldHVybnMgYSBwcm9taXNlIHRoYXQg
        cmVzb2x2ZXMgYWZ0ZXIgdGhlIHNlcnZlciBoYXMKICAgIHN1Y2Nlc3NmdWxs
        eSByZXRyaWV2ZWQgYW5kIGV4ZWN1dGVkIHRoZSBjb2RlIGZyb20gdGhlCiAg
        ICBzZXJ2ZXIuIE5vdGUgdGhhdCBpZiBhbiBlcnJvciB3ZXJlIHRvIG9jY3Vy
        LCBpdCB3b3VsZAogICAgYmUgcGFzc2VkIHRvIHRoZSBgZXJyb3JgIGhvb2sg
        b24gYEVtYmVyLlJvdXRlYCwgYnV0CiAgICBpdCdzIGFsc28gcG9zc2libGUg
        dG8gaGFuZGxlIGVycm9ycyBzcGVjaWZpYyB0bwogICAgYGJlZm9yZU1vZGVs
        YCByaWdodCBmcm9tIHdpdGhpbiB0aGUgaG9vayAodG8gZGlzdGluZ3Vpc2gK
        ICAgIGZyb20gdGhlIHNoYXJlZCBlcnJvciBoYW5kbGluZyBiZWhhdmlvciBv
        ZiB0aGUgYGVycm9yYAogICAgaG9vayk6CgogICAgYGBganMKICAgIEFwcC5Q
        b3N0Um91dGUgPSBFbWJlci5Sb3V0ZS5leHRlbmQoewogICAgICBiZWZvcmVN
        b2RlbDogZnVuY3Rpb24odHJhbnNpdGlvbikgewogICAgICAgIGlmICghQXBw
        LlBvc3QpIHsKICAgICAgICAgIHZhciBzZWxmID0gdGhpczsKICAgICAgICAg
        IHJldHVybiBFbWJlci4kLmdldFNjcmlwdCgncG9zdC5qcycpLnRoZW4obnVs
        bCwgZnVuY3Rpb24oZSkgewogICAgICAgICAgICBzZWxmLnRyYW5zaXRpb25U
        bygnaGVscCcpOwoKICAgICAgICAgICAgLy8gTm90ZSB0aGF0IHRoZSBhYm92
        ZSB0cmFuc2l0aW9uVG8gd2lsbCBpbXBsaWNpdGx5CiAgICAgICAgICAgIC8v
        IGhhbHQgdGhlIHRyYW5zaXRpb24uIElmIHlvdSB3ZXJlIHRvIHJldHVybgog
        ICAgICAgICAgICAvLyBub3RoaW5nIGZyb20gdGhpcyBwcm9taXNlIHJlamVj
        dCBoYW5kbGVyLAogICAgICAgICAgICAvLyBhY2NvcmRpbmcgdG8gcHJvbWlz
        ZSBzZW1hbnRpY3MsIHRoYXQgd291bGQKICAgICAgICAgICAgLy8gY29udmVy
        dCB0aGUgcmVqZWN0IGludG8gYSByZXNvbHZlIGFuZCB0aGUKICAgICAgICAg
        ICAgLy8gdHJhbnNpdGlvbiB3b3VsZCBjb250aW51ZS4gVG8gcHJvcGFnYXRl
        IHRoZQogICAgICAgICAgICAvLyBlcnJvciBzbyB0aGF0IGl0J2QgYmUgaGFu
        ZGxlZCBieSB0aGUgYGVycm9yYAogICAgICAgICAgICAvLyBob29rLCB5b3Ug
        d291bGQgaGF2ZSB0byBlaXRoZXIKICAgICAgICAgICAgcmV0dXJuIEVtYmVy
        LlJTVlAucmVqZWN0KGUpOwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAg
        ICB9CiAgICB9KTsKICAgIGBgYAoKICAgIEBtZXRob2QgYmVmb3JlTW9kZWwK
        ICAgIEBwYXJhbSB7VHJhbnNpdGlvbn0gdHJhbnNpdGlvbgogICAgQHBhcmFt
        IHtPYmplY3R9IHF1ZXJ5UGFyYW1zIHRoZSBhY3RpdmUgcXVlcnkgcGFyYW1z
        IGZvciB0aGlzIHJvdXRlCiAgICBAcmV0dXJuIHtQcm9taXNlfSBpZiB0aGUg
        dmFsdWUgcmV0dXJuZWQgZnJvbSB0aGlzIGhvb2sgaXMKICAgICAgYSBwcm9t
        aXNlLCB0aGUgdHJhbnNpdGlvbiB3aWxsIHBhdXNlIHVudGlsIHRoZSB0cmFu
        c2l0aW9uCiAgICAgIHJlc29sdmVzLiBPdGhlcndpc2UsIG5vbi1wcm9taXNl
        IHJldHVybiB2YWx1ZXMgYXJlIG5vdAogICAgICB1dGlsaXplZCBpbiBhbnkg
        d2F5LgogICovCiAgYmVmb3JlTW9kZWw6IEVtYmVyLkssCgogIC8qKgogICAg
        VGhpcyBob29rIGlzIGNhbGxlZCBhZnRlciB0aGlzIHJvdXRlJ3MgbW9kZWwg
        aGFzIHJlc29sdmVkLgogICAgSXQgZm9sbG93cyBpZGVudGljYWwgYXN5bmMv
        cHJvbWlzZSBzZW1hbnRpY3MgdG8gYGJlZm9yZU1vZGVsYAogICAgYnV0IGlz
        IHByb3ZpZGVkIHRoZSByb3V0ZSdzIHJlc29sdmVkIG1vZGVsIGluIGFkZGl0
        aW9uIHRvCiAgICB0aGUgYHRyYW5zaXRpb25gLCBhbmQgaXMgdGhlcmVmb3Jl
        IHN1aXRlZCB0byBwZXJmb3JtaW5nCiAgICBsb2dpYyB0aGF0IGNhbiBvbmx5
        IHRha2UgcGxhY2UgYWZ0ZXIgdGhlIG1vZGVsIGhhcyBhbHJlYWR5CiAgICBy
        ZXNvbHZlZC4KCiAgICBgYGBqcwogICAgQXBwLlBvc3RzUm91dGUgPSBFbWJl
        ci5Sb3V0ZS5leHRlbmQoewogICAgICBhZnRlck1vZGVsOiBmdW5jdGlvbihw
        b3N0cywgdHJhbnNpdGlvbikgewogICAgICAgIGlmIChwb3N0cy5sZW5ndGgg
        PT09IDEpIHsKICAgICAgICAgIHRoaXMudHJhbnNpdGlvblRvKCdwb3N0LnNo
        b3cnLCBwb3N0c1swXSk7CiAgICAgICAgfQogICAgICB9CiAgICB9KTsKICAg
        IGBgYAoKICAgIFJlZmVyIHRvIGRvY3VtZW50YXRpb24gZm9yIGBiZWZvcmVN
        b2RlbGAgZm9yIGEgZGVzY3JpcHRpb24KICAgIG9mIHRyYW5zaXRpb24tcGF1
        c2luZyBzZW1hbnRpY3Mgd2hlbiBhIHByb21pc2UgaXMgcmV0dXJuZWQKICAg
        IGZyb20gdGhpcyBob29rLgoKICAgIEBtZXRob2QgYWZ0ZXJNb2RlbAogICAg
        QHBhcmFtIHtPYmplY3R9IHJlc29sdmVkTW9kZWwgdGhlIHZhbHVlIHJldHVy
        bmVkIGZyb20gYG1vZGVsYCwKICAgICAgb3IgaXRzIHJlc29sdmVkIHZhbHVl
        IGlmIGl0IHdhcyBhIHByb21pc2UKICAgIEBwYXJhbSB7VHJhbnNpdGlvbn0g
        dHJhbnNpdGlvbgogICAgQHBhcmFtIHtPYmplY3R9IHF1ZXJ5UGFyYW1zIHRo
        ZSBhY3RpdmUgcXVlcnkgcGFyYW1zIGZvciB0aGlzIGhhbmRsZXIKICAgIEBy
        ZXR1cm4ge1Byb21pc2V9IGlmIHRoZSB2YWx1ZSByZXR1cm5lZCBmcm9tIHRo
        aXMgaG9vayBpcwogICAgICBhIHByb21pc2UsIHRoZSB0cmFuc2l0aW9uIHdp
        bGwgcGF1c2UgdW50aWwgdGhlIHRyYW5zaXRpb24KICAgICAgcmVzb2x2ZXMu
        IE90aGVyd2lzZSwgbm9uLXByb21pc2UgcmV0dXJuIHZhbHVlcyBhcmUgbm90
        CiAgICAgIHV0aWxpemVkIGluIGFueSB3YXkuCiAgICovCiAgYWZ0ZXJNb2Rl
        bDogRW1iZXIuSywKCiAgLyoqCiAgICBBIGhvb2sgeW91IGNhbiBpbXBsZW1l
        bnQgdG8gb3B0aW9uYWxseSByZWRpcmVjdCB0byBhbm90aGVyIHJvdXRlLgoK
        ICAgIElmIHlvdSBjYWxsIGB0aGlzLnRyYW5zaXRpb25Ub2AgZnJvbSBpbnNp
        ZGUgb2YgdGhpcyBob29rLCB0aGlzIHJvdXRlCiAgICB3aWxsIG5vdCBiZSBl
        bnRlcmVkIGluIGZhdm9yIG9mIHRoZSBvdGhlciBob29rLgoKICAgIGByZWRp
        cmVjdGAgYW5kIGBhZnRlck1vZGVsYCBiZWhhdmUgdmVyeSBzaW1pbGFybHkg
        YW5kIGFyZQogICAgY2FsbGVkIGFsbW9zdCBhdCB0aGUgc2FtZSB0aW1lLCBi
        dXQgdGhleSBoYXZlIGFuIGltcG9ydGFudAogICAgZGlzdGluY3Rpb24gaW4g
        dGhlIGNhc2UgdGhhdCwgZnJvbSBvbmUgb2YgdGhlc2UgaG9va3MsIGEKICAg
        IHJlZGlyZWN0IGludG8gYSBjaGlsZCByb3V0ZSBvZiB0aGlzIHJvdXRlIG9j
        Y3VyczogcmVkaXJlY3RzCiAgICBmcm9tIGBhZnRlck1vZGVsYCBlc3NlbnRp
        YWxseSBpbnZhbGlkYXRlIHRoZSBjdXJyZW50IGF0dGVtcHQKICAgIHRvIGVu
        dGVyIHRoaXMgcm91dGUsIGFuZCB3aWxsIHJlc3VsdCBpbiB0aGlzIHJvdXRl
        J3MgYGJlZm9yZU1vZGVsYCwKICAgIGBtb2RlbGAsIGFuZCBgYWZ0ZXJNb2Rl
        bGAgaG9va3MgYmVpbmcgZmlyZWQgYWdhaW4gd2l0aGluCiAgICB0aGUgbmV3
        LCByZWRpcmVjdGluZyB0cmFuc2l0aW9uLiBSZWRpcmVjdHMgdGhhdCBvY2N1
        ciB3aXRoaW4KICAgIHRoZSBgcmVkaXJlY3RgIGhvb2ssIG9uIHRoZSBvdGhl
        ciBoYW5kLCB3aWxsIF9ub3RfIGNhdXNlCiAgICB0aGVzZSBob29rcyB0byBi
        ZSBmaXJlZCBhZ2FpbiB0aGUgc2Vjb25kIHRpbWUgYXJvdW5kOyBpbgogICAg
        b3RoZXIgd29yZHMsIGJ5IHRoZSB0aW1lIHRoZSBgcmVkaXJlY3RgIGhvb2sg
        aGFzIGJlZW4gY2FsbGVkLAogICAgYm90aCB0aGUgcmVzb2x2ZWQgbW9kZWwg
        YW5kIGF0dGVtcHRlZCBlbnRyeSBpbnRvIHRoaXMgcm91dGUKICAgIGFyZSBj
        b25zaWRlcmVkIHRvIGJlIGZ1bGx5IHZhbGlkYXRlZC4KCiAgICBAbWV0aG9k
        IHJlZGlyZWN0CiAgICBAcGFyYW0ge09iamVjdH0gbW9kZWwgdGhlIG1vZGVs
        IGZvciB0aGlzIHJvdXRlCiAgKi8KICByZWRpcmVjdDogRW1iZXIuSywKCiAg
        LyoqCiAgICBDYWxsZWQgd2hlbiB0aGUgY29udGV4dCBpcyBjaGFuZ2VkIGJ5
        IHJvdXRlci5qcy4KCiAgICBAcHJpdmF0ZQogICAgQG1ldGhvZCBjb250ZXh0
        RGlkQ2hhbmdlCiAgKi8KICBjb250ZXh0RGlkQ2hhbmdlOiBmdW5jdGlvbigp
        IHsKICAgIHRoaXMuY3VycmVudE1vZGVsID0gdGhpcy5jb250ZXh0OwogIH0s
        CgogIC8qKgogICAgQSBob29rIHlvdSBjYW4gaW1wbGVtZW50IHRvIGNvbnZl
        cnQgdGhlIFVSTCBpbnRvIHRoZSBtb2RlbCBmb3IKICAgIHRoaXMgcm91dGUu
        CgogICAgYGBganMKICAgIEFwcC5Sb3V0ZXIubWFwKGZ1bmN0aW9uKCkgewog
        ICAgICB0aGlzLnJlc291cmNlKCdwb3N0Jywge3BhdGg6ICcvcG9zdHMvOnBv
        c3RfaWQnfSk7CiAgICB9KTsKICAgIGBgYAoKICAgIFRoZSBtb2RlbCBmb3Ig
        dGhlIGBwb3N0YCByb3V0ZSBpcyBgQXBwLlBvc3QuZmluZChwYXJhbXMucG9z
        dF9pZClgLgoKICAgIEJ5IGRlZmF1bHQsIGlmIHlvdXIgcm91dGUgaGFzIGEg
        ZHluYW1pYyBzZWdtZW50IGVuZGluZyBpbiBgX2lkYDoKCiAgICAqIFRoZSBt
        b2RlbCBjbGFzcyBpcyBkZXRlcm1pbmVkIGZyb20gdGhlIHNlZ21lbnQgKGBw
        b3N0X2lkYCdzCiAgICAgIGNsYXNzIGlzIGBBcHAuUG9zdGApCiAgICAqIFRo
        ZSBmaW5kIG1ldGhvZCBpcyBjYWxsZWQgb24gdGhlIG1vZGVsIGNsYXNzIHdp
        dGggdGhlIHZhbHVlIG9mCiAgICAgIHRoZSBkeW5hbWljIHNlZ21lbnQuCgog
        ICAgTm90ZSB0aGF0IGZvciByb3V0ZXMgd2l0aCBkeW5hbWljIHNlZ21lbnRz
        LCB0aGlzIGhvb2sgaXMgb25seQogICAgZXhlY3V0ZWQgd2hlbiBlbnRlcmVk
        IHZpYSB0aGUgVVJMLiBJZiB0aGUgcm91dGUgaXMgZW50ZXJlZAogICAgdGhy
        b3VnaCBhIHRyYW5zaXRpb24gKGUuZy4gd2hlbiB1c2luZyB0aGUgYGxpbmst
        dG9gIEhhbmRsZWJhcnMKICAgIGhlbHBlciksIHRoZW4gYSBtb2RlbCBjb250
        ZXh0IGlzIGFscmVhZHkgcHJvdmlkZWQgYW5kIHRoaXMgaG9vawogICAgaXMg
        bm90IGNhbGxlZC4gUm91dGVzIHdpdGhvdXQgZHluYW1pYyBzZWdtZW50cyB3
        aWxsIGFsd2F5cwogICAgZXhlY3V0ZSB0aGUgbW9kZWwgaG9vay4KCiAgICBU
        aGlzIGhvb2sgZm9sbG93cyB0aGUgYXN5bmNocm9ub3VzL3Byb21pc2Ugc2Vt
        YW50aWNzCiAgICBkZXNjcmliZWQgaW4gdGhlIGRvY3VtZW50YXRpb24gZm9y
        IGBiZWZvcmVNb2RlbGAuIEluIHBhcnRpY3VsYXIsCiAgICBpZiBhIHByb21p
        c2UgcmV0dXJuZWQgZnJvbSBgbW9kZWxgIGZhaWxzLCB0aGUgZXJyb3Igd2ls
        bCBiZQogICAgaGFuZGxlZCBieSB0aGUgYGVycm9yYCBob29rIG9uIGBFbWJl
        ci5Sb3V0ZWAuCgogICAgRXhhbXBsZQoKICAgIGBgYGpzCiAgICBBcHAuUG9z
        dFJvdXRlID0gRW1iZXIuUm91dGUuZXh0ZW5kKHsKICAgICAgbW9kZWw6IGZ1
        bmN0aW9uKHBhcmFtcykgewogICAgICAgIHJldHVybiBBcHAuUG9zdC5maW5k
        KHBhcmFtcy5wb3N0X2lkKTsKICAgICAgfQogICAgfSk7CiAgICBgYGAKCiAg
        ICBAbWV0aG9kIG1vZGVsCiAgICBAcGFyYW0ge09iamVjdH0gcGFyYW1zIHRo
        ZSBwYXJhbWV0ZXJzIGV4dHJhY3RlZCBmcm9tIHRoZSBVUkwKICAgIEBwYXJh
        bSB7VHJhbnNpdGlvbn0gdHJhbnNpdGlvbgogICAgQHBhcmFtIHtPYmplY3R9
        IHF1ZXJ5UGFyYW1zIHRoZSBxdWVyeSBwYXJhbXMgZm9yIHRoaXMgcm91dGUK
        ICAgIEByZXR1cm4ge09iamVjdHxQcm9taXNlfSB0aGUgbW9kZWwgZm9yIHRo
        aXMgcm91dGUuIElmCiAgICAgIGEgcHJvbWlzZSBpcyByZXR1cm5lZCwgdGhl
        IHRyYW5zaXRpb24gd2lsbCBwYXVzZSB1bnRpbAogICAgICB0aGUgcHJvbWlz
        ZSByZXNvbHZlcywgYW5kIHRoZSByZXNvbHZlZCB2YWx1ZSBvZiB0aGUgcHJv
        bWlzZQogICAgICB3aWxsIGJlIHVzZWQgYXMgdGhlIG1vZGVsIGZvciB0aGlz
        IHJvdXRlLgogICovCiAgbW9kZWw6IGZ1bmN0aW9uKHBhcmFtcywgdHJhbnNp
        dGlvbikgewogICAgdmFyIG1hdGNoLCBuYW1lLCBzYXdQYXJhbXMsIHZhbHVl
        OwoKICAgIGZvciAodmFyIHByb3AgaW4gcGFyYW1zKSB7CiAgICAgIGlmIChw
        cm9wID09PSAncXVlcnlQYXJhbXMnKSB7IGNvbnRpbnVlOyB9CgogICAgICBp
        ZiAobWF0Y2ggPSBwcm9wLm1hdGNoKC9eKC4qKV9pZCQvKSkgewogICAgICAg
        IG5hbWUgPSBtYXRjaFsxXTsKICAgICAgICB2YWx1ZSA9IHBhcmFtc1twcm9w
        XTsKICAgICAgfQogICAgICBzYXdQYXJhbXMgPSB0cnVlOwogICAgfQoKICAg
        IGlmICghbmFtZSAmJiBzYXdQYXJhbXMpIHsgcmV0dXJuIEVtYmVyLmNvcHko
        cGFyYW1zKTsgfQogICAgZWxzZSBpZiAoIW5hbWUpIHsKICAgICAgCiAgICAg
        ICAgaWYgKHRyYW5zaXRpb24ucmVzb2x2ZUluZGV4ICE9PSB0cmFuc2l0aW9u
        LnN0YXRlLmhhbmRsZXJJbmZvcy5sZW5ndGgtMSkgeyByZXR1cm47IH0KCiAg
        ICAgICAgdmFyIHBhcmVudE1vZGVsID0gdHJhbnNpdGlvbi5zdGF0ZS5oYW5k
        bGVySW5mb3NbdHJhbnNpdGlvbi5yZXNvbHZlSW5kZXgtMV0uY29udGV4dDsK
        CiAgICAgICAgcmV0dXJuIHBhcmVudE1vZGVsOwogICAgICAgICAgfQoKICAg
        IHJldHVybiB0aGlzLmZpbmRNb2RlbChuYW1lLCB2YWx1ZSk7CiAgfSwKCiAg
        LyoqCiAgICBAcHJpdmF0ZQoKICAgIFJvdXRlci5qcyBob29rLgogICAqLwog
        IGRlc2VyaWFsaXplOiBmdW5jdGlvbihwYXJhbXMsIHRyYW5zaXRpb24pIHsK
        ICAgIAogICAgICByZXR1cm4gdGhpcy5tb2RlbChwYXJhbXMsIHRyYW5zaXRp
        b24pOwogICAgCiAgfSwKCiAgLyoqCgogICAgQG1ldGhvZCBmaW5kTW9kZWwK
        ICAgIEBwYXJhbSB7U3RyaW5nfSB0eXBlIHRoZSBtb2RlbCB0eXBlCiAgICBA
        cGFyYW0ge09iamVjdH0gdmFsdWUgdGhlIHZhbHVlIHBhc3NlZCB0byBmaW5k
        CiAgKi8KICBmaW5kTW9kZWw6IGZ1bmN0aW9uKCl7CiAgICB2YXIgc3RvcmUg
        PSBnZXQodGhpcywgJ3N0b3JlJyk7CiAgICByZXR1cm4gc3RvcmUuZmluZC5h
        cHBseShzdG9yZSwgYXJndW1lbnRzKTsKICB9LAoKICAvKioKICAgIFN0b3Jl
        IHByb3BlcnR5IHByb3ZpZGVzIGEgaG9vayBmb3IgZGF0YSBwZXJzaXN0ZW5j
        ZSBsaWJyYXJpZXMgdG8gaW5qZWN0IHRoZW1zZWx2ZXMuCgogICAgQnkgZGVm
        YXVsdCwgdGhpcyBzdG9yZSBwcm9wZXJ0eSBwcm92aWRlcyB0aGUgZXhhY3Qg
        c2FtZSBmdW5jdGlvbmFsaXR5IHByZXZpb3VzbHkKICAgIGluIHRoZSBtb2Rl
        bCBob29rLgoKICAgIEN1cnJlbnRseSwgdGhlIHJlcXVpcmVkIGludGVyZmFj
        ZSBpczoKCiAgICBgc3RvcmUuZmluZChtb2RlbE5hbWUsIGZpbmRBcmd1bWVu
        dHMpYAoKICAgIEBtZXRob2Qgc3RvcmUKICAgIEBwYXJhbSB7T2JqZWN0fSBz
        dG9yZQogICovCiAgc3RvcmU6IEVtYmVyLmNvbXB1dGVkKGZ1bmN0aW9uKCl7
        CiAgICB2YXIgY29udGFpbmVyID0gdGhpcy5jb250YWluZXI7CiAgICB2YXIg
        cm91dGVOYW1lID0gdGhpcy5yb3V0ZU5hbWU7CiAgICB2YXIgbmFtZXNwYWNl
        ID0gZ2V0KHRoaXMsICdyb3V0ZXIubmFtZXNwYWNlJyk7CgogICAgcmV0dXJu
        IHsKICAgICAgZmluZDogZnVuY3Rpb24obmFtZSwgdmFsdWUpIHsKICAgICAg
        ICB2YXIgbW9kZWxDbGFzcyA9IGNvbnRhaW5lci5sb29rdXBGYWN0b3J5KCdt
        b2RlbDonICsgbmFtZSk7CgogICAgICAgIEVtYmVyLmFzc2VydCgiWW91IHVz
        ZWQgdGhlIGR5bmFtaWMgc2VnbWVudCAiICsgbmFtZSArICJfaWQgaW4geW91
        ciByb3V0ZSAiICsKICAgICAgICAgICAgICAgICAgICAgcm91dGVOYW1lICsg
        IiwgYnV0ICIgKyBuYW1lc3BhY2UgKyAiLiIgKyBjbGFzc2lmeShuYW1lKSAr
        CiAgICAgICAgICAgICAgICAgICAgICIgZGlkIG5vdCBleGlzdCBhbmQgeW91
        IGRpZCBub3Qgb3ZlcnJpZGUgeW91ciByb3V0ZSdzIGBtb2RlbGAgIiArCiAg
        ICAgICAgICAgICAgICAgICAgICJob29rLiIsIG1vZGVsQ2xhc3MpOwoKICAg
        ICAgICBpZiAoIW1vZGVsQ2xhc3MpIHsgcmV0dXJuOyB9CgogICAgICAgIHJl
        dHVybiBtb2RlbENsYXNzLmZpbmQodmFsdWUpOwogICAgICB9CiAgICB9Owog
        IH0pLAoKICAvKioKICAgIEEgaG9vayB5b3UgY2FuIGltcGxlbWVudCB0byBj
        b252ZXJ0IHRoZSByb3V0ZSdzIG1vZGVsIGludG8gcGFyYW1ldGVycwogICAg
        Zm9yIHRoZSBVUkwuCgogICAgYGBganMKICAgIEFwcC5Sb3V0ZXIubWFwKGZ1
        bmN0aW9uKCkgewogICAgICB0aGlzLnJlc291cmNlKCdwb3N0Jywge3BhdGg6
        ICcvcG9zdHMvOnBvc3RfaWQnfSk7CiAgICB9KTsKCiAgICBBcHAuUG9zdFJv
        dXRlID0gRW1iZXIuUm91dGUuZXh0ZW5kKHsKICAgICAgbW9kZWw6IGZ1bmN0
        aW9uKHBhcmFtcykgewogICAgICAgIC8vIHRoZSBzZXJ2ZXIgcmV0dXJucyBg
        eyBpZDogMTIgfWAKICAgICAgICByZXR1cm4galF1ZXJ5LmdldEpTT04oIi9w
        b3N0cy8iICsgcGFyYW1zLnBvc3RfaWQpOwogICAgICB9LAoKICAgICAgc2Vy
        aWFsaXplOiBmdW5jdGlvbihtb2RlbCkgewogICAgICAgIC8vIHRoaXMgd2ls
        bCBtYWtlIHRoZSBVUkwgYC9wb3N0cy8xMmAKICAgICAgICByZXR1cm4geyBw
        b3N0X2lkOiBtb2RlbC5pZCB9OwogICAgICB9CiAgICB9KTsKICAgIGBgYAoK
        ICAgIFRoZSBkZWZhdWx0IGBzZXJpYWxpemVgIG1ldGhvZCB3aWxsIGluc2Vy
        dCB0aGUgbW9kZWwncyBgaWRgIGludG8gdGhlCiAgICByb3V0ZSdzIGR5bmFt
        aWMgc2VnbWVudCAoaW4gdGhpcyBjYXNlLCBgOnBvc3RfaWRgKSBpZiB0aGUg
        c2VnbWVudCBjb250YWlucyAnX2lkJy4KICAgIElmIHRoZSByb3V0ZSBoYXMg
        bXVsdGlwbGUgZHluYW1pYyBzZWdtZW50cyBvciBkb2VzIG5vdCBjb250YWlu
        ICdfaWQnLCBgc2VyaWFsaXplYAogICAgd2lsbCByZXR1cm4gYEVtYmVyLmdl
        dFByb3BlcnRpZXMobW9kZWwsIHBhcmFtcylgCgogICAgVGhpcyBtZXRob2Qg
        aXMgY2FsbGVkIHdoZW4gYHRyYW5zaXRpb25Ub2AgaXMgY2FsbGVkIHdpdGgg
        YSBjb250ZXh0CiAgICBpbiBvcmRlciB0byBwb3B1bGF0ZSB0aGUgVVJMLgoK
        ICAgIEBtZXRob2Qgc2VyaWFsaXplCiAgICBAcGFyYW0ge09iamVjdH0gbW9k
        ZWwgdGhlIHJvdXRlJ3MgbW9kZWwKICAgIEBwYXJhbSB7QXJyYXl9IHBhcmFt
        cyBhbiBBcnJheSBvZiBwYXJhbWV0ZXIgbmFtZXMgZm9yIHRoZSBjdXJyZW50
        CiAgICAgIHJvdXRlIChpbiB0aGUgZXhhbXBsZSwgYFsncG9zdF9pZCddYC4K
        ICAgIEByZXR1cm4ge09iamVjdH0gdGhlIHNlcmlhbGl6ZWQgcGFyYW1ldGVy
        cwogICovCiAgc2VyaWFsaXplOiBmdW5jdGlvbihtb2RlbCwgcGFyYW1zKSB7
        CiAgICBpZiAocGFyYW1zLmxlbmd0aCA8IDEpIHsgcmV0dXJuOyB9CiAgICBp
        ZiAoIW1vZGVsKSB7IHJldHVybjsgfQoKICAgIHZhciBuYW1lID0gcGFyYW1z
        WzBdLCBvYmplY3QgPSB7fTsKCiAgICBpZiAoL19pZCQvLnRlc3QobmFtZSkg
        JiYgcGFyYW1zLmxlbmd0aCA9PT0gMSkgewogICAgICBvYmplY3RbbmFtZV0g
        PSBnZXQobW9kZWwsICJpZCIpOwogICAgfSBlbHNlIHsKICAgICAgb2JqZWN0
        ID0gZ2V0UHJvcGVydGllcyhtb2RlbCwgcGFyYW1zKTsKICAgIH0KCiAgICBy
        ZXR1cm4gb2JqZWN0OwogIH0sCgogIC8qKgogICAgQSBob29rIHlvdSBjYW4g
        dXNlIHRvIHNldHVwIHRoZSBjb250cm9sbGVyIGZvciB0aGUgY3VycmVudCBy
        b3V0ZS4KCiAgICBUaGlzIG1ldGhvZCBpcyBjYWxsZWQgd2l0aCB0aGUgY29u
        dHJvbGxlciBmb3IgdGhlIGN1cnJlbnQgcm91dGUgYW5kIHRoZQogICAgbW9k
        ZWwgc3VwcGxpZWQgYnkgdGhlIGBtb2RlbGAgaG9vay4KCiAgICBCeSBkZWZh
        dWx0LCB0aGUgYHNldHVwQ29udHJvbGxlcmAgaG9vayBzZXRzIHRoZSBgY29u
        dGVudGAgcHJvcGVydHkgb2YKICAgIHRoZSBjb250cm9sbGVyIHRvIHRoZSBg
        bW9kZWxgLgoKICAgIFRoaXMgbWVhbnMgdGhhdCB5b3VyIHRlbXBsYXRlIHdp
        bGwgZ2V0IGEgcHJveHkgZm9yIHRoZSBtb2RlbCBhcyBpdHMKICAgIGNvbnRl
        eHQsIGFuZCB5b3UgY2FuIGFjdCBhcyB0aG91Z2ggdGhlIG1vZGVsIGl0c2Vs
        ZiB3YXMgdGhlIGNvbnRleHQuCgogICAgVGhlIHByb3ZpZGVkIGNvbnRyb2xs
        ZXIgd2lsbCBiZSBvbmUgcmVzb2x2ZWQgYmFzZWQgb24gdGhlIG5hbWUKICAg
        IG9mIHRoaXMgcm91dGUuCgogICAgSWYgbm8gZXhwbGljaXQgY29udHJvbGxl
        ciBpcyBkZWZpbmVkLCBFbWJlciB3aWxsIGF1dG9tYXRpY2FsbHkgY3JlYXRl
        CiAgICBhbiBhcHByb3ByaWF0ZSBjb250cm9sbGVyIGZvciB0aGUgbW9kZWwu
        CgogICAgKiBpZiB0aGUgbW9kZWwgaXMgYW4gYEVtYmVyLkFycmF5YCAoaW5j
        bHVkaW5nIHJlY29yZCBhcnJheXMgZnJvbSBFbWJlcgogICAgICBEYXRhKSwg
        dGhlIGNvbnRyb2xsZXIgaXMgYW4gYEVtYmVyLkFycmF5Q29udHJvbGxlcmAu
        CiAgICAqIG90aGVyd2lzZSwgdGhlIGNvbnRyb2xsZXIgaXMgYW4gYEVtYmVy
        Lk9iamVjdENvbnRyb2xsZXJgLgoKICAgIEFzIGFuIGV4YW1wbGUsIGNvbnNp
        ZGVyIHRoZSByb3V0ZXI6CgogICAgYGBganMKICAgIEFwcC5Sb3V0ZXIubWFw
        KGZ1bmN0aW9uKCkgewogICAgICB0aGlzLnJlc291cmNlKCdwb3N0Jywge3Bh
        dGg6ICcvcG9zdHMvOnBvc3RfaWQnfSk7CiAgICB9KTsKICAgIGBgYAoKICAg
        IEZvciB0aGUgYHBvc3RgIHJvdXRlLCBhIGNvbnRyb2xsZXIgbmFtZWQgYEFw
        cC5Qb3N0Q29udHJvbGxlcmAgd291bGQKICAgIGJlIHVzZWQgaWYgaXQgaXMg
        ZGVmaW5lZC4gSWYgaXQgaXMgbm90IGRlZmluZWQsIGFuIGBFbWJlci5PYmpl
        Y3RDb250cm9sbGVyYAogICAgaW5zdGFuY2Ugd291bGQgYmUgdXNlZC4KCiAg
        ICBFeGFtcGxlCgogICAgYGBganMKICAgIEFwcC5Qb3N0Um91dGUgPSBFbWJl
        ci5Sb3V0ZS5leHRlbmQoewogICAgICBzZXR1cENvbnRyb2xsZXI6IGZ1bmN0
        aW9uKGNvbnRyb2xsZXIsIG1vZGVsKSB7CiAgICAgICAgY29udHJvbGxlci5z
        ZXQoJ21vZGVsJywgbW9kZWwpOwogICAgICB9CiAgICB9KTsKICAgIGBgYAoK
        ICAgIEBtZXRob2Qgc2V0dXBDb250cm9sbGVyCiAgICBAcGFyYW0ge0NvbnRy
        b2xsZXJ9IGNvbnRyb2xsZXIgaW5zdGFuY2UKICAgIEBwYXJhbSB7T2JqZWN0
        fSBtb2RlbAogICovCiAgc2V0dXBDb250cm9sbGVyOiBmdW5jdGlvbihjb250
        cm9sbGVyLCBjb250ZXh0LCB0cmFuc2l0aW9uKSB7CiAgICBpZiAoY29udHJv
        bGxlciAmJiAoY29udGV4dCAhPT0gdW5kZWZpbmVkKSkgewogICAgICBzZXQo
        Y29udHJvbGxlciwgJ21vZGVsJywgY29udGV4dCk7CiAgICB9CiAgfSwKCiAg
        LyoqCiAgICBSZXR1cm5zIHRoZSBjb250cm9sbGVyIGZvciBhIHBhcnRpY3Vs
        YXIgcm91dGUgb3IgbmFtZS4KCiAgICBUaGUgY29udHJvbGxlciBpbnN0YW5j
        ZSBtdXN0IGFscmVhZHkgaGF2ZSBiZWVuIGNyZWF0ZWQsIGVpdGhlciB0aHJv
        dWdoIGVudGVyaW5nIHRoZQogICAgYXNzb2NpYXRlZCByb3V0ZSBvciB1c2lu
        ZyBgZ2VuZXJhdGVDb250cm9sbGVyYC4KCiAgICBgYGBqcwogICAgQXBwLlBv
        c3RSb3V0ZSA9IEVtYmVyLlJvdXRlLmV4dGVuZCh7CiAgICAgIHNldHVwQ29u
        dHJvbGxlcjogZnVuY3Rpb24oY29udHJvbGxlciwgcG9zdCkgewogICAgICAg
        IHRoaXMuX3N1cGVyKGNvbnRyb2xsZXIsIHBvc3QpOwogICAgICAgIHRoaXMu
        Y29udHJvbGxlckZvcigncG9zdHMnKS5zZXQoJ2N1cnJlbnRQb3N0JywgcG9z
        dCk7CiAgICAgIH0KICAgIH0pOwogICAgYGBgCgogICAgQG1ldGhvZCBjb250
        cm9sbGVyRm9yCiAgICBAcGFyYW0ge1N0cmluZ30gbmFtZSB0aGUgbmFtZSBv
        ZiB0aGUgcm91dGUgb3IgY29udHJvbGxlcgogICAgQHJldHVybiB7RW1iZXIu
        Q29udHJvbGxlcn0KICAqLwogIGNvbnRyb2xsZXJGb3I6IGZ1bmN0aW9uKG5h
        bWUsIF9za2lwQXNzZXJ0KSB7CiAgICB2YXIgY29udGFpbmVyID0gdGhpcy5j
        b250YWluZXIsCiAgICAgICAgcm91dGUgPSBjb250YWluZXIubG9va3VwKCdy
        b3V0ZTonK25hbWUpLAogICAgICAgIGNvbnRyb2xsZXI7CgogICAgaWYgKHJv
        dXRlICYmIHJvdXRlLmNvbnRyb2xsZXJOYW1lKSB7CiAgICAgIG5hbWUgPSBy
        b3V0ZS5jb250cm9sbGVyTmFtZTsKICAgIH0KCiAgICBjb250cm9sbGVyID0g
        Y29udGFpbmVyLmxvb2t1cCgnY29udHJvbGxlcjonICsgbmFtZSk7CgogICAg
        Ly8gTk9URTogV2UncmUgc3BlY2lmaWNhbGx5IGNoZWNraW5nIHRoYXQgc2tp
        cEFzc2VydCBpcyB0cnVlLCBiZWNhdXNlIGFjY29yZGluZwogICAgLy8gICB0
        byB0aGUgb2xkIEFQSSB0aGUgc2Vjb25kIHBhcmFtZXRlciB3YXMgbW9kZWwu
        IFdlIGRvIG5vdCB3YW50IHBlb3BsZSB3aG8KICAgIC8vICAgcGFzc2VkIGEg
        bW9kZWwgdG8gc2tpcCB0aGUgYXNzZXJ0aW9uLgogICAgRW1iZXIuYXNzZXJ0
        KCJUaGUgY29udHJvbGxlciBuYW1lZCAnIituYW1lKyInIGNvdWxkIG5vdCBi
        ZSBmb3VuZC4gTWFrZSBzdXJlICIgKwogICAgICAgICAgICAgICAgICJ0aGF0
        IHRoaXMgcm91dGUgZXhpc3RzIGFuZCBoYXMgYWxyZWFkeSBiZWVuIGVudGVy
        ZWQgYXQgbGVhc3QgIiArCiAgICAgICAgICAgICAgICAgIm9uY2UuIElmIHlv
        dSBhcmUgYWNjZXNzaW5nIGEgY29udHJvbGxlciBub3QgYXNzb2NpYXRlZCB3
        aXRoIGEgIiArCiAgICAgICAgICAgICAgICAgInJvdXRlLCBtYWtlIHN1cmUg
        dGhlIGNvbnRyb2xsZXIgY2xhc3MgaXMgZXhwbGljaXRseSBkZWZpbmVkLiIs
        CiAgICAgICAgICAgICAgICAgY29udHJvbGxlciB8fCBfc2tpcEFzc2VydCA9
        PT0gdHJ1ZSk7CgogICAgcmV0dXJuIGNvbnRyb2xsZXI7CiAgfSwKCiAgLyoq
        CiAgICBHZW5lcmF0ZXMgYSBjb250cm9sbGVyIGZvciBhIHJvdXRlLgoKICAg
        IElmIHRoZSBvcHRpb25hbCBtb2RlbCBpcyBwYXNzZWQgdGhlbiB0aGUgY29u
        dHJvbGxlciB0eXBlIGlzIGRldGVybWluZWQgYXV0b21hdGljYWxseSwKICAg
        IGUuZy4sIGFuIEFycmF5Q29udHJvbGxlciBmb3IgYXJyYXlzLgoKICAgIEV4
        YW1wbGUKCiAgICBgYGBqcwogICAgQXBwLlBvc3RSb3V0ZSA9IEVtYmVyLlJv
        dXRlLmV4dGVuZCh7CiAgICAgIHNldHVwQ29udHJvbGxlcjogZnVuY3Rpb24o
        Y29udHJvbGxlciwgcG9zdCkgewogICAgICAgIHRoaXMuX3N1cGVyKGNvbnRy
        b2xsZXIsIHBvc3QpOwogICAgICAgIHRoaXMuZ2VuZXJhdGVDb250cm9sbGVy
        KCdwb3N0cycsIHBvc3QpOwogICAgICB9CiAgICB9KTsKICAgIGBgYAoKICAg
        IEBtZXRob2QgZ2VuZXJhdGVDb250cm9sbGVyCiAgICBAcGFyYW0ge1N0cmlu
        Z30gbmFtZSB0aGUgbmFtZSBvZiB0aGUgY29udHJvbGxlcgogICAgQHBhcmFt
        IHtPYmplY3R9IG1vZGVsIHRoZSBtb2RlbCB0byBpbmZlciB0aGUgdHlwZSBv
        ZiB0aGUgY29udHJvbGxlciAob3B0aW9uYWwpCiAgKi8KICBnZW5lcmF0ZUNv
        bnRyb2xsZXI6IGZ1bmN0aW9uKG5hbWUsIG1vZGVsKSB7CiAgICB2YXIgY29u
        dGFpbmVyID0gdGhpcy5jb250YWluZXI7CgogICAgbW9kZWwgPSBtb2RlbCB8
        fCB0aGlzLm1vZGVsRm9yKG5hbWUpOwoKICAgIHJldHVybiBFbWJlci5nZW5l
        cmF0ZUNvbnRyb2xsZXIoY29udGFpbmVyLCBuYW1lLCBtb2RlbCk7CiAgfSwK
        CiAgLyoqCiAgICBSZXR1cm5zIHRoZSBtb2RlbCBvZiBhIHBhcmVudCAob3Ig
        YW55IGFuY2VzdG9yKSByb3V0ZQogICAgaW4gYSByb3V0ZSBoaWVyYXJjaHku
        ICBEdXJpbmcgYSB0cmFuc2l0aW9uLCBhbGwgcm91dGVzCiAgICBtdXN0IHJl
        c29sdmUgYSBtb2RlbCBvYmplY3QsIGFuZCBpZiBhIHJvdXRlCiAgICBuZWVk
        cyBhY2Nlc3MgdG8gYSBwYXJlbnQgcm91dGUncyBtb2RlbCBpbiBvcmRlciB0
        bwogICAgcmVzb2x2ZSBhIG1vZGVsIChvciBqdXN0IHJldXNlIHRoZSBtb2Rl
        bCBmcm9tIGEgcGFyZW50KSwKICAgIGl0IGNhbiBjYWxsIGB0aGlzLm1vZGVs
        Rm9yKHRoZU5hbWVPZlBhcmVudFJvdXRlKWAgdG8KICAgIHJldHJpZXZlIGl0
        LgoKICAgIEV4YW1wbGUKCiAgICBgYGBqcwogICAgQXBwLlJvdXRlci5tYXAo
        ZnVuY3Rpb24oKSB7CiAgICAgICAgdGhpcy5yZXNvdXJjZSgncG9zdCcsIHsg
        cGF0aDogJy9wb3N0Lzpwb3N0X2lkJyB9LCBmdW5jdGlvbigpIHsKICAgICAg
        ICAgICAgdGhpcy5yZXNvdXJjZSgnY29tbWVudHMnKTsKICAgICAgICB9KTsK
        ICAgIH0pOwoKICAgIEFwcC5Db21tZW50c1JvdXRlID0gRW1iZXIuUm91dGUu
        ZXh0ZW5kKHsKICAgICAgICBhZnRlck1vZGVsOiBmdW5jdGlvbigpIHsKICAg
        ICAgICAgICAgdGhpcy5zZXQoJ3Bvc3QnLCB0aGlzLm1vZGVsRm9yKCdwb3N0
        JykpOwogICAgICAgIH0KICAgIH0pOwogICAgYGBgCgogICAgQG1ldGhvZCBt
        b2RlbEZvcgogICAgQHBhcmFtIHtTdHJpbmd9IG5hbWUgdGhlIG5hbWUgb2Yg
        dGhlIHJvdXRlCiAgICBAcmV0dXJuIHtPYmplY3R9IHRoZSBtb2RlbCBvYmpl
        Y3QKICAqLwogIG1vZGVsRm9yOiBmdW5jdGlvbihuYW1lKSB7CgogICAgdmFy
        IHJvdXRlID0gdGhpcy5jb250YWluZXIubG9va3VwKCdyb3V0ZTonICsgbmFt
        ZSksCiAgICAgICAgdHJhbnNpdGlvbiA9IHRoaXMucm91dGVyLnJvdXRlci5h
        Y3RpdmVUcmFuc2l0aW9uOwoKICAgIC8vIElmIHdlIGFyZSBtaWQtdHJhbnNp
        dGlvbiwgd2Ugd2FudCB0byB0cnkgYW5kIGxvb2sgdXAKICAgIC8vIHJlc29s
        dmVkIHBhcmVudCBjb250ZXh0cyBvbiB0aGUgY3VycmVudCB0cmFuc2l0aW9u
        RXZlbnQuCiAgICBpZiAodHJhbnNpdGlvbikgewogICAgICB2YXIgbW9kZWxM
        b29rdXBOYW1lID0gKHJvdXRlICYmIHJvdXRlLnJvdXRlTmFtZSkgfHwgbmFt
        ZTsKICAgICAgaWYgKHRyYW5zaXRpb24ucmVzb2x2ZWRNb2RlbHMuaGFzT3du
        UHJvcGVydHkobW9kZWxMb29rdXBOYW1lKSkgewogICAgICAgIHJldHVybiB0
        cmFuc2l0aW9uLnJlc29sdmVkTW9kZWxzW21vZGVsTG9va3VwTmFtZV07CiAg
        ICAgIH0KICAgIH0KCiAgICByZXR1cm4gcm91dGUgJiYgcm91dGUuY3VycmVu
        dE1vZGVsOwogIH0sCgogIC8qKgogICAgQSBob29rIHlvdSBjYW4gdXNlIHRv
        IHJlbmRlciB0aGUgdGVtcGxhdGUgZm9yIHRoZSBjdXJyZW50IHJvdXRlLgoK
        ICAgIFRoaXMgbWV0aG9kIGlzIGNhbGxlZCB3aXRoIHRoZSBjb250cm9sbGVy
        IGZvciB0aGUgY3VycmVudCByb3V0ZSBhbmQgdGhlCiAgICBtb2RlbCBzdXBw
        bGllZCBieSB0aGUgYG1vZGVsYCBob29rLiBCeSBkZWZhdWx0LCBpdCByZW5k
        ZXJzIHRoZSByb3V0ZSdzCiAgICB0ZW1wbGF0ZSwgY29uZmlndXJlZCB3aXRo
        IHRoZSBjb250cm9sbGVyIGZvciB0aGUgcm91dGUuCgogICAgVGhpcyBtZXRo
        b2QgY2FuIGJlIG92ZXJyaWRkZW4gdG8gc2V0IHVwIGFuZCByZW5kZXIgYWRk
        aXRpb25hbCBvcgogICAgYWx0ZXJuYXRpdmUgdGVtcGxhdGVzLgoKICAgIGBg
        YGpzCiAgICBBcHAuUG9zdHNSb3V0ZSA9IEVtYmVyLlJvdXRlLmV4dGVuZCh7
        CiAgICAgIHJlbmRlclRlbXBsYXRlOiBmdW5jdGlvbihjb250cm9sbGVyLCBt
        b2RlbCkgewogICAgICAgIHZhciBmYXZDb250cm9sbGVyID0gdGhpcy5jb250
        cm9sbGVyRm9yKCdmYXZvcml0ZVBvc3QnKTsKCiAgICAgICAgLy8gUmVuZGVy
        IHRoZSBgZmF2b3JpdGVQb3N0YCB0ZW1wbGF0ZSBpbnRvCiAgICAgICAgLy8g
        dGhlIG91dGxldCBgcG9zdHNgLCBhbmQgZGlzcGxheSB0aGUgYGZhdm9yaXRl
        UG9zdGAKICAgICAgICAvLyBjb250cm9sbGVyLgogICAgICAgIHRoaXMucmVu
        ZGVyKCdmYXZvcml0ZVBvc3QnLCB7CiAgICAgICAgICBvdXRsZXQ6ICdwb3N0
        cycsCiAgICAgICAgICBjb250cm9sbGVyOiBmYXZDb250cm9sbGVyCiAgICAg
        ICAgfSk7CiAgICAgIH0KICAgIH0pOwogICAgYGBgCgogICAgQG1ldGhvZCBy
        ZW5kZXJUZW1wbGF0ZQogICAgQHBhcmFtIHtPYmplY3R9IGNvbnRyb2xsZXIg
        dGhlIHJvdXRlJ3MgY29udHJvbGxlcgogICAgQHBhcmFtIHtPYmplY3R9IG1v
        ZGVsIHRoZSByb3V0ZSdzIG1vZGVsCiAgKi8KICByZW5kZXJUZW1wbGF0ZTog
        ZnVuY3Rpb24oY29udHJvbGxlciwgbW9kZWwpIHsKICAgIHRoaXMucmVuZGVy
        KCk7CiAgfSwKCiAgLyoqCiAgICBSZW5kZXJzIGEgdGVtcGxhdGUgaW50byBh
        biBvdXRsZXQuCgogICAgVGhpcyBtZXRob2QgaGFzIGEgbnVtYmVyIG9mIGRl
        ZmF1bHRzLCBiYXNlZCBvbiB0aGUgbmFtZSBvZiB0aGUKICAgIHJvdXRlIHNw
        ZWNpZmllZCBpbiB0aGUgcm91dGVyLgoKICAgIEZvciBleGFtcGxlOgoKICAg
        IGBgYGpzCiAgICBBcHAuUm91dGVyLm1hcChmdW5jdGlvbigpIHsKICAgICAg
        dGhpcy5yb3V0ZSgnaW5kZXgnKTsKICAgICAgdGhpcy5yZXNvdXJjZSgncG9z
        dCcsIHtwYXRoOiAnL3Bvc3RzLzpwb3N0X2lkJ30pOwogICAgfSk7CgogICAg
        QXBwLlBvc3RSb3V0ZSA9IEFwcC5Sb3V0ZS5leHRlbmQoewogICAgICByZW5k
        ZXJUZW1wbGF0ZTogZnVuY3Rpb24oKSB7CiAgICAgICAgdGhpcy5yZW5kZXIo
        KTsKICAgICAgfQogICAgfSk7CiAgICBgYGAKCiAgICBUaGUgbmFtZSBvZiB0
        aGUgYFBvc3RSb3V0ZWAsIGFzIGRlZmluZWQgYnkgdGhlIHJvdXRlciwgaXMg
        YHBvc3RgLgoKICAgIEJ5IGRlZmF1bHQsIHJlbmRlciB3aWxsOgoKICAgICog
        cmVuZGVyIHRoZSBgcG9zdGAgdGVtcGxhdGUKICAgICogd2l0aCB0aGUgYHBv
        c3RgIHZpZXcgKGBQb3N0Vmlld2ApIGZvciBldmVudCBoYW5kbGluZywgaWYg
        b25lIGV4aXN0cwogICAgKiBhbmQgdGhlIGBwb3N0YCBjb250cm9sbGVyIChg
        UG9zdENvbnRyb2xsZXJgKSwgaWYgb25lIGV4aXN0cwogICAgKiBpbnRvIHRo
        ZSBgbWFpbmAgb3V0bGV0IG9mIHRoZSBgYXBwbGljYXRpb25gIHRlbXBsYXRl
        CgogICAgWW91IGNhbiBvdmVycmlkZSB0aGlzIGJlaGF2aW9yOgoKICAgIGBg
        YGpzCiAgICBBcHAuUG9zdFJvdXRlID0gQXBwLlJvdXRlLmV4dGVuZCh7CiAg
        ICAgIHJlbmRlclRlbXBsYXRlOiBmdW5jdGlvbigpIHsKICAgICAgICB0aGlz
        LnJlbmRlcignbXlQb3N0JywgeyAgIC8vIHRoZSB0ZW1wbGF0ZSB0byByZW5k
        ZXIKICAgICAgICAgIGludG86ICdpbmRleCcsICAgICAgICAgIC8vIHRoZSB0
        ZW1wbGF0ZSB0byByZW5kZXIgaW50bwogICAgICAgICAgb3V0bGV0OiAnZGV0
        YWlsJywgICAgICAgLy8gdGhlIG5hbWUgb2YgdGhlIG91dGxldCBpbiB0aGF0
        IHRlbXBsYXRlCiAgICAgICAgICBjb250cm9sbGVyOiAnYmxvZ1Bvc3QnICAv
        LyB0aGUgY29udHJvbGxlciB0byB1c2UgZm9yIHRoZSB0ZW1wbGF0ZQogICAg
        ICAgIH0pOwogICAgICB9CiAgICB9KTsKICAgIGBgYAoKICAgIFJlbWVtYmVy
        IHRoYXQgdGhlIGNvbnRyb2xsZXIncyBgY29udGVudGAgd2lsbCBiZSB0aGUg
        cm91dGUncyBtb2RlbC4gSW4KICAgIHRoaXMgY2FzZSwgdGhlIGRlZmF1bHQg
        bW9kZWwgd2lsbCBiZSBgQXBwLlBvc3QuZmluZChwYXJhbXMucG9zdF9pZClg
        LgoKICAgIEBtZXRob2QgcmVuZGVyCiAgICBAcGFyYW0ge1N0cmluZ30gbmFt
        ZSB0aGUgbmFtZSBvZiB0aGUgdGVtcGxhdGUgdG8gcmVuZGVyCiAgICBAcGFy
        YW0ge09iamVjdH0gb3B0aW9ucyB0aGUgb3B0aW9ucwogICovCiAgcmVuZGVy
        OiBmdW5jdGlvbihuYW1lLCBvcHRpb25zKSB7CiAgICBFbWJlci5hc3NlcnQo
        IlRoZSBuYW1lIGluIHRoZSBnaXZlbiBhcmd1bWVudHMgaXMgdW5kZWZpbmVk
        IiwgYXJndW1lbnRzLmxlbmd0aCA+IDAgPyAhRW1iZXIuaXNOb25lKGFyZ3Vt
        ZW50c1swXSkgOiB0cnVlKTsKCiAgICB2YXIgbmFtZVBhc3NlZCA9ICEhbmFt
        ZTsKCiAgICBpZiAodHlwZW9mIG5hbWUgPT09ICdvYmplY3QnICYmICFvcHRp
        b25zKSB7CiAgICAgIG9wdGlvbnMgPSBuYW1lOwogICAgICBuYW1lID0gdGhp
        cy5yb3V0ZU5hbWU7CiAgICB9CgogICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwg
        e307CgogICAgdmFyIHRlbXBsYXRlTmFtZTsKCiAgICBpZiAobmFtZSkgewog
        ICAgICBuYW1lID0gbmFtZS5yZXBsYWNlKC9cLy9nLCAnLicpOwogICAgICB0
        ZW1wbGF0ZU5hbWUgPSBuYW1lOwogICAgfSBlbHNlIHsKICAgICAgbmFtZSA9
        IHRoaXMucm91dGVOYW1lOwogICAgICB0ZW1wbGF0ZU5hbWUgPSB0aGlzLnRl
        bXBsYXRlTmFtZSB8fCBuYW1lOwogICAgfQoKICAgIHZhciB2aWV3TmFtZSA9
        IG9wdGlvbnMudmlldyB8fCB0aGlzLnZpZXdOYW1lIHx8IG5hbWU7CgogICAg
        dmFyIGNvbnRhaW5lciA9IHRoaXMuY29udGFpbmVyLAogICAgICAgIHZpZXcg
        PSBjb250YWluZXIubG9va3VwKCd2aWV3OicgKyB2aWV3TmFtZSksCiAgICAg
        ICAgdGVtcGxhdGUgPSB2aWV3ID8gdmlldy5nZXQoJ3RlbXBsYXRlJykgOiBu
        dWxsOwoKICAgIGlmICghdGVtcGxhdGUpIHsKICAgICAgdGVtcGxhdGUgPSBj
        b250YWluZXIubG9va3VwKCd0ZW1wbGF0ZTonICsgdGVtcGxhdGVOYW1lKTsK
        ICAgIH0KCiAgICBpZiAoIXZpZXcgJiYgIXRlbXBsYXRlKSB7CiAgICAgIEVt
        YmVyLmFzc2VydCgiQ291bGQgbm90IGZpbmQgXCIiICsgbmFtZSArICJcIiB0
        ZW1wbGF0ZSBvciB2aWV3LiIsICFuYW1lUGFzc2VkKTsKICAgICAgaWYgKGdl
        dCh0aGlzLnJvdXRlciwgJ25hbWVzcGFjZS5MT0dfVklFV19MT09LVVBTJykp
        IHsKICAgICAgICBFbWJlci5Mb2dnZXIuaW5mbygiQ291bGQgbm90IGZpbmQg
        XCIiICsgbmFtZSArICJcIiB0ZW1wbGF0ZSBvciB2aWV3LiBOb3RoaW5nIHdp
        bGwgYmUgcmVuZGVyZWQiLCB7IGZ1bGxOYW1lOiAndGVtcGxhdGU6JyArIG5h
        bWUgfSk7CiAgICAgIH0KICAgICAgcmV0dXJuOwogICAgfQoKICAgIG9wdGlv
        bnMgPSBub3JtYWxpemVPcHRpb25zKHRoaXMsIG5hbWUsIHRlbXBsYXRlLCBv
        cHRpb25zKTsKICAgIHZpZXcgPSBzZXR1cFZpZXcodmlldywgY29udGFpbmVy
        LCBvcHRpb25zKTsKCiAgICBpZiAob3B0aW9ucy5vdXRsZXQgPT09ICdtYWlu
        JykgeyB0aGlzLmxhc3RSZW5kZXJlZFRlbXBsYXRlID0gbmFtZTsgfQoKICAg
        IGFwcGVuZFZpZXcodGhpcywgdmlldywgb3B0aW9ucyk7CiAgfSwKCiAgLyoq
        CiAgICBEaXNjb25uZWN0cyBhIHZpZXcgdGhhdCBoYXMgYmVlbiByZW5kZXJl
        ZCBpbnRvIGFuIG91dGxldC4KCiAgICBZb3UgbWF5IHBhc3MgYW55IG9yIGFs
        bCBvZiB0aGUgZm9sbG93aW5nIG9wdGlvbnMgdG8gYGRpc2Nvbm5lY3RPdXRs
        ZXRgOgoKICAgICogYG91dGxldGA6IHRoZSBuYW1lIG9mIHRoZSBvdXRsZXQg
        dG8gY2xlYXIgKGRlZmF1bHQ6ICdtYWluJykKICAgICogYHBhcmVudFZpZXdg
        OiB0aGUgbmFtZSBvZiB0aGUgdmlldyBjb250YWluaW5nIHRoZSBvdXRsZXQg
        dG8gY2xlYXIKICAgICAgIChkZWZhdWx0OiB0aGUgdmlldyByZW5kZXJlZCBi
        eSB0aGUgcGFyZW50IHJvdXRlKQoKICAgIEV4YW1wbGU6CgogICAgYGBganMK
        ICAgIEFwcC5BcHBsaWNhdGlvblJvdXRlID0gQXBwLlJvdXRlLmV4dGVuZCh7
        CiAgICAgIGFjdGlvbnM6IHsKICAgICAgICBzaG93TW9kYWw6IGZ1bmN0aW9u
        KGV2dCkgewogICAgICAgICAgdGhpcy5yZW5kZXIoZXZ0Lm1vZGFsTmFtZSwg
        ewogICAgICAgICAgICBvdXRsZXQ6ICdtb2RhbCcsCiAgICAgICAgICAgIGlu
        dG86ICdhcHBsaWNhdGlvbicKICAgICAgICAgIH0pOwogICAgICAgIH0sCiAg
        ICAgICAgaGlkZU1vZGFsOiBmdW5jdGlvbihldnQpIHsKICAgICAgICAgIHRo
        aXMuZGlzY29ubmVjdE91dGxldCh7CiAgICAgICAgICAgIG91dGxldDogJ21v
        ZGFsJywKICAgICAgICAgICAgcGFyZW50VmlldzogJ2FwcGxpY2F0aW9uJwog
        ICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9CiAgICB9KTsKICAgIGBg
        YAoKICAgIEFsdGVybmF0aXZlbHksIHlvdSBjYW4gcGFzcyB0aGUgYG91dGxl
        dGAgbmFtZSBkaXJlY3RseSBhcyBhIHN0cmluZy4KCiAgICBFeGFtcGxlOgoK
        ICAgIGBgYGpzCiAgICBoaWRlTW9kYWw6IGZ1bmN0aW9uKGV2dCkgewogICAg
        ICB0aGlzLmRpc2Nvbm5lY3RPdXRsZXQoJ21vZGFsJyk7CiAgICB9CiAgICBg
        YGAKCiAgICBAbWV0aG9kIGRpc2Nvbm5lY3RPdXRsZXQKICAgIEBwYXJhbSB7
        T2JqZWN0fFN0cmluZ30gb3B0aW9ucyB0aGUgb3B0aW9ucyBoYXNoIG9yIG91
        dGxldCBuYW1lCiAgKi8KICBkaXNjb25uZWN0T3V0bGV0OiBmdW5jdGlvbihv
        cHRpb25zKSB7CiAgICBpZiAoIW9wdGlvbnMgfHwgdHlwZW9mIG9wdGlvbnMg
        PT09ICJzdHJpbmciKSB7CiAgICAgIHZhciBvdXRsZXROYW1lID0gb3B0aW9u
        czsKICAgICAgb3B0aW9ucyA9IHt9OwogICAgICBvcHRpb25zLm91dGxldCA9
        IG91dGxldE5hbWU7CiAgICB9CiAgICBvcHRpb25zLnBhcmVudFZpZXcgPSBv
        cHRpb25zLnBhcmVudFZpZXcgPyBvcHRpb25zLnBhcmVudFZpZXcucmVwbGFj
        ZSgvXC8vZywgJy4nKSA6IHBhcmVudFRlbXBsYXRlKHRoaXMpOwogICAgb3B0
        aW9ucy5vdXRsZXQgPSBvcHRpb25zLm91dGxldCB8fCAnbWFpbic7CgogICAg
        dmFyIHBhcmVudFZpZXcgPSB0aGlzLnJvdXRlci5fbG9va3VwQWN0aXZlVmll
        dyhvcHRpb25zLnBhcmVudFZpZXcpOwogICAgaWYgKHBhcmVudFZpZXcpIHsg
        cGFyZW50Vmlldy5kaXNjb25uZWN0T3V0bGV0KG9wdGlvbnMub3V0bGV0KTsg
        fQogIH0sCgogIHdpbGxEZXN0cm95OiBmdW5jdGlvbigpIHsKICAgIHRoaXMu
        dGVhcmRvd25WaWV3cygpOwogIH0sCgogIC8qKgogICAgQHByaXZhdGUKCiAg
        ICBAbWV0aG9kIHRlYXJkb3duVmlld3MKICAqLwogIHRlYXJkb3duVmlld3M6
        IGZ1bmN0aW9uKCkgewogICAgLy8gVGVhciBkb3duIHRoZSB0b3AgbGV2ZWwg
        dmlldwogICAgaWYgKHRoaXMudGVhcmRvd25Ub3BMZXZlbFZpZXcpIHsgdGhp
        cy50ZWFyZG93blRvcExldmVsVmlldygpOyB9CgogICAgLy8gVGVhciBkb3du
        IGFueSBvdXRsZXRzIHJlbmRlcmVkIHdpdGggJ2ludG8nCiAgICB2YXIgdGVh
        cmRvd25PdXRsZXRWaWV3cyA9IHRoaXMudGVhcmRvd25PdXRsZXRWaWV3cyB8
        fCBbXTsKICAgIGFfZm9yRWFjaCh0ZWFyZG93bk91dGxldFZpZXdzLCBmdW5j
        dGlvbih0ZWFyZG93bk91dGxldFZpZXcpIHsKICAgICAgdGVhcmRvd25PdXRs
        ZXRWaWV3KCk7CiAgICB9KTsKCiAgICBkZWxldGUgdGhpcy50ZWFyZG93blRv
        cExldmVsVmlldzsKICAgIGRlbGV0ZSB0aGlzLnRlYXJkb3duT3V0bGV0Vmll
        d3M7CiAgICBkZWxldGUgdGhpcy5sYXN0UmVuZGVyZWRUZW1wbGF0ZTsKICB9
        Cn0pOwoKCgpmdW5jdGlvbiBwYXJlbnRSb3V0ZShyb3V0ZSkgewogIHZhciBo
        YW5kbGVySW5mb3MgPSByb3V0ZS5yb3V0ZXIucm91dGVyLnN0YXRlLmhhbmRs
        ZXJJbmZvczsKCiAgaWYgKCFoYW5kbGVySW5mb3MpIHsgcmV0dXJuOyB9Cgog
        IHZhciBwYXJlbnQsIGN1cnJlbnQ7CgogIGZvciAodmFyIGk9MCwgbD1oYW5k
        bGVySW5mb3MubGVuZ3RoOyBpPGw7IGkrKykgewogICAgY3VycmVudCA9IGhh
        bmRsZXJJbmZvc1tpXS5oYW5kbGVyOwogICAgaWYgKGN1cnJlbnQgPT09IHJv
        dXRlKSB7IHJldHVybiBwYXJlbnQ7IH0KICAgIHBhcmVudCA9IGN1cnJlbnQ7
        CiAgfQp9CgpmdW5jdGlvbiBwYXJlbnRUZW1wbGF0ZShyb3V0ZSkgewogIHZh
        ciBwYXJlbnQgPSBwYXJlbnRSb3V0ZShyb3V0ZSksIHRlbXBsYXRlOwoKICBp
        ZiAoIXBhcmVudCkgeyByZXR1cm47IH0KCiAgaWYgKHRlbXBsYXRlID0gcGFy
        ZW50Lmxhc3RSZW5kZXJlZFRlbXBsYXRlKSB7CiAgICByZXR1cm4gdGVtcGxh
        dGU7CiAgfSBlbHNlIHsKICAgIHJldHVybiBwYXJlbnRUZW1wbGF0ZShwYXJl
        bnQpOwogIH0KfQoKZnVuY3Rpb24gbm9ybWFsaXplT3B0aW9ucyhyb3V0ZSwg
        bmFtZSwgdGVtcGxhdGUsIG9wdGlvbnMpIHsKICBvcHRpb25zID0gb3B0aW9u
        cyB8fCB7fTsKICBvcHRpb25zLmludG8gPSBvcHRpb25zLmludG8gPyBvcHRp
        b25zLmludG8ucmVwbGFjZSgvXC8vZywgJy4nKSA6IHBhcmVudFRlbXBsYXRl
        KHJvdXRlKTsKICBvcHRpb25zLm91dGxldCA9IG9wdGlvbnMub3V0bGV0IHx8
        ICdtYWluJzsKICBvcHRpb25zLm5hbWUgPSBuYW1lOwogIG9wdGlvbnMudGVt
        cGxhdGUgPSB0ZW1wbGF0ZTsKICBvcHRpb25zLkxPR19WSUVXX0xPT0tVUFMg
        PSBnZXQocm91dGUucm91dGVyLCAnbmFtZXNwYWNlLkxPR19WSUVXX0xPT0tV
        UFMnKTsKCiAgRW1iZXIuYXNzZXJ0KCJBbiBvdXRsZXQgKCIrb3B0aW9ucy5v
        dXRsZXQrIikgd2FzIHNwZWNpZmllZCBidXQgd2FzIG5vdCBmb3VuZC4iLCBv
        cHRpb25zLm91dGxldCA9PT0gJ21haW4nIHx8IG9wdGlvbnMuaW50byk7Cgog
        IHZhciBjb250cm9sbGVyID0gb3B0aW9ucy5jb250cm9sbGVyLCBuYW1lZENv
        bnRyb2xsZXI7CgogIGlmIChvcHRpb25zLmNvbnRyb2xsZXIpIHsKICAgIGNv
        bnRyb2xsZXIgPSBvcHRpb25zLmNvbnRyb2xsZXI7CiAgfSBlbHNlIGlmIChu
        YW1lZENvbnRyb2xsZXIgPSByb3V0ZS5jb250YWluZXIubG9va3VwKCdjb250
        cm9sbGVyOicgKyBuYW1lKSkgewogICAgY29udHJvbGxlciA9IG5hbWVkQ29u
        dHJvbGxlcjsKICB9IGVsc2UgewogICAgY29udHJvbGxlciA9IHJvdXRlLmNv
        bnRyb2xsZXJOYW1lIHx8IHJvdXRlLnJvdXRlTmFtZTsKICB9CgogIGlmICh0
        eXBlb2YgY29udHJvbGxlciA9PT0gJ3N0cmluZycpIHsKICAgIHZhciBjb250
        cm9sbGVyTmFtZSA9IGNvbnRyb2xsZXI7CiAgICBjb250cm9sbGVyID0gcm91
        dGUuY29udGFpbmVyLmxvb2t1cCgnY29udHJvbGxlcjonICsgY29udHJvbGxl
        ck5hbWUpOwogICAgaWYgKCFjb250cm9sbGVyKSB7CiAgICAgIHRocm93IG5l
        dyBFbWJlci5FcnJvcigiWW91IHBhc3NlZCBgY29udHJvbGxlcjogJyIgKyBj
        b250cm9sbGVyTmFtZSArICInYCBpbnRvIHRoZSBgcmVuZGVyYCBtZXRob2Qs
        IGJ1dCBubyBzdWNoIGNvbnRyb2xsZXIgY291bGQgYmUgZm91bmQuIik7CiAg
        ICB9CiAgfQoKICBvcHRpb25zLmNvbnRyb2xsZXIgPSBjb250cm9sbGVyOwoK
        ICByZXR1cm4gb3B0aW9uczsKfQoKZnVuY3Rpb24gc2V0dXBWaWV3KHZpZXcs
        IGNvbnRhaW5lciwgb3B0aW9ucykgewogIGlmICh2aWV3KSB7CiAgICBpZiAo
        b3B0aW9ucy5MT0dfVklFV19MT09LVVBTKSB7CiAgICAgIEVtYmVyLkxvZ2dl
        ci5pbmZvKCJSZW5kZXJpbmcgIiArIG9wdGlvbnMubmFtZSArICIgd2l0aCAi
        ICsgdmlldywgeyBmdWxsTmFtZTogJ3ZpZXc6JyArIG9wdGlvbnMubmFtZSB9
        KTsKICAgIH0KICB9IGVsc2UgewogICAgdmFyIGRlZmF1bHRWaWV3ID0gb3B0
        aW9ucy5pbnRvID8gJ3ZpZXc6ZGVmYXVsdCcgOiAndmlldzp0b3BsZXZlbCc7
        CiAgICB2aWV3ID0gY29udGFpbmVyLmxvb2t1cChkZWZhdWx0Vmlldyk7CiAg
        ICBpZiAob3B0aW9ucy5MT0dfVklFV19MT09LVVBTKSB7CiAgICAgIEVtYmVy
        LkxvZ2dlci5pbmZvKCJSZW5kZXJpbmcgIiArIG9wdGlvbnMubmFtZSArICIg
        d2l0aCBkZWZhdWx0IHZpZXcgIiArIHZpZXcsIHsgZnVsbE5hbWU6ICd2aWV3
        OicgKyBvcHRpb25zLm5hbWUgfSk7CiAgICB9CiAgfQoKICBpZiAoIWdldCh2
        aWV3LCAndGVtcGxhdGVOYW1lJykpIHsKICAgIHNldCh2aWV3LCAndGVtcGxh
        dGUnLCBvcHRpb25zLnRlbXBsYXRlKTsKCiAgICBzZXQodmlldywgJ19kZWJ1
        Z1RlbXBsYXRlTmFtZScsIG9wdGlvbnMubmFtZSk7CiAgfQoKICBzZXQodmll
        dywgJ3JlbmRlcmVkTmFtZScsIG9wdGlvbnMubmFtZSk7CiAgc2V0KHZpZXcs
        ICdjb250cm9sbGVyJywgb3B0aW9ucy5jb250cm9sbGVyKTsKCiAgcmV0dXJu
        IHZpZXc7Cn0KCmZ1bmN0aW9uIGFwcGVuZFZpZXcocm91dGUsIHZpZXcsIG9w
        dGlvbnMpIHsKICBpZiAob3B0aW9ucy5pbnRvKSB7CiAgICB2YXIgcGFyZW50
        VmlldyA9IHJvdXRlLnJvdXRlci5fbG9va3VwQWN0aXZlVmlldyhvcHRpb25z
        LmludG8pOwogICAgdmFyIHRlYXJkb3duT3V0bGV0VmlldyA9IGdlbmVyYXRl
        T3V0bGV0VGVhcmRvd24ocGFyZW50Vmlldywgb3B0aW9ucy5vdXRsZXQpOwog
        ICAgaWYgKCFyb3V0ZS50ZWFyZG93bk91dGxldFZpZXdzKSB7IHJvdXRlLnRl
        YXJkb3duT3V0bGV0Vmlld3MgPSBbXTsgfQogICAgYV9yZXBsYWNlKHJvdXRl
        LnRlYXJkb3duT3V0bGV0Vmlld3MsIDAsIDAsIFt0ZWFyZG93bk91dGxldFZp
        ZXddKTsKICAgIHBhcmVudFZpZXcuY29ubmVjdE91dGxldChvcHRpb25zLm91
        dGxldCwgdmlldyk7CiAgfSBlbHNlIHsKICAgIHZhciByb290RWxlbWVudCA9
        IGdldChyb3V0ZSwgJ3JvdXRlci5uYW1lc3BhY2Uucm9vdEVsZW1lbnQnKTsK
        ICAgIC8vIHRlYXIgZG93biB2aWV3IGlmIG9uZSBpcyBhbHJlYWR5IHJlbmRl
        cmVkCiAgICBpZiAocm91dGUudGVhcmRvd25Ub3BMZXZlbFZpZXcpIHsKICAg
        ICAgcm91dGUudGVhcmRvd25Ub3BMZXZlbFZpZXcoKTsKICAgIH0KICAgIHJv
        dXRlLnJvdXRlci5fY29ubmVjdEFjdGl2ZVZpZXcob3B0aW9ucy5uYW1lLCB2
        aWV3KTsKICAgIHJvdXRlLnRlYXJkb3duVG9wTGV2ZWxWaWV3ID0gZ2VuZXJh
        dGVUb3BMZXZlbFRlYXJkb3duKHZpZXcpOwogICAgdmlldy5hcHBlbmRUbyhy
        b290RWxlbWVudCk7CiAgfQp9CgpmdW5jdGlvbiBnZW5lcmF0ZVRvcExldmVs
        VGVhcmRvd24odmlldykgewogIHJldHVybiBmdW5jdGlvbigpIHsgdmlldy5k
        ZXN0cm95KCk7IH07Cn0KCmZ1bmN0aW9uIGdlbmVyYXRlT3V0bGV0VGVhcmRv
        d24ocGFyZW50Vmlldywgb3V0bGV0KSB7CiAgcmV0dXJuIGZ1bmN0aW9uKCkg
        eyBwYXJlbnRWaWV3LmRpc2Nvbm5lY3RPdXRsZXQob3V0bGV0KTsgfTsKfQoK
        fSkoKTsKCgoKKGZ1bmN0aW9uKCkgewoKfSkoKTsKCgoKKGZ1bmN0aW9uKCkg
        ewpFbWJlci5vbkxvYWQoJ0VtYmVyLkhhbmRsZWJhcnMnLCBmdW5jdGlvbigp
        IHsKICB2YXIgaGFuZGxlYmFyc1Jlc29sdmUgPSBFbWJlci5IYW5kbGViYXJz
        LnJlc29sdmVQYXJhbXMsCiAgICAgIG1hcCA9IEVtYmVyLkFycmF5UG9seWZp
        bGxzLm1hcCwKICAgICAgZ2V0ID0gRW1iZXIuZ2V0LAogICAgICBoYW5kbGVi
        YXJzR2V0ID0gRW1iZXIuSGFuZGxlYmFycy5nZXQ7CgogIGZ1bmN0aW9uIHJl
        c29sdmVQYXJhbXMoY29udGV4dCwgcGFyYW1zLCBvcHRpb25zKSB7CiAgICBy
        ZXR1cm4gbWFwLmNhbGwocmVzb2x2ZVBhdGhzKGNvbnRleHQsIHBhcmFtcywg
        b3B0aW9ucyksIGZ1bmN0aW9uKHBhdGgsIGkpIHsKICAgICAgaWYgKG51bGwg
        PT09IHBhdGgpIHsKICAgICAgICAvLyBQYXJhbSB3YXMgc3RyaW5nL251bWJl
        ciwgbm90IGEgcGF0aCwgc28ganVzdCByZXR1cm4gcmF3IHN0cmluZy9udW1i
        ZXIuCiAgICAgICAgcmV0dXJuIHBhcmFtc1tpXTsKICAgICAgfSBlbHNlIHsK
        ICAgICAgICByZXR1cm4gaGFuZGxlYmFyc0dldChjb250ZXh0LCBwYXRoLCBv
        cHRpb25zKTsKICAgICAgfQogICAgfSk7CiAgfQoKICBmdW5jdGlvbiByZXNv
        bHZlUGF0aHMoY29udGV4dCwgcGFyYW1zLCBvcHRpb25zKSB7CiAgICB2YXIg
        cmVzb2x2ZWQgPSBoYW5kbGViYXJzUmVzb2x2ZShjb250ZXh0LCBwYXJhbXMs
        IG9wdGlvbnMpLAogICAgICAgIHR5cGVzID0gb3B0aW9ucy50eXBlczsKCiAg
        ICByZXR1cm4gbWFwLmNhbGwocmVzb2x2ZWQsIGZ1bmN0aW9uKG9iamVjdCwg
        aSkgewogICAgICBpZiAodHlwZXNbaV0gPT09ICdJRCcpIHsKICAgICAgICBy
        ZXR1cm4gdW53cmFwKG9iamVjdCwgcGFyYW1zW2ldKTsKICAgICAgfSBlbHNl
        IHsKICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgfQogICAgfSk7CgogICAg
        ZnVuY3Rpb24gdW53cmFwKG9iamVjdCwgcGF0aCkgewogICAgICBpZiAocGF0
        aCA9PT0gJ2NvbnRyb2xsZXInKSB7IHJldHVybiBwYXRoOyB9CgogICAgICBp
        ZiAoRW1iZXIuQ29udHJvbGxlck1peGluLmRldGVjdChvYmplY3QpKSB7CiAg
        ICAgICAgcmV0dXJuIHVud3JhcChnZXQob2JqZWN0LCAnbW9kZWwnKSwgcGF0
        aCA/IHBhdGggKyAnLm1vZGVsJyA6ICdtb2RlbCcpOwogICAgICB9IGVsc2Ug
        ewogICAgICAgIHJldHVybiBwYXRoOwogICAgICB9CiAgICB9CiAgfQoKICBF
        bWJlci5Sb3V0ZXIucmVzb2x2ZVBhcmFtcyA9IHJlc29sdmVQYXJhbXM7CiAg
        RW1iZXIuUm91dGVyLnJlc29sdmVQYXRocyA9IHJlc29sdmVQYXRoczsKfSk7
        Cgp9KSgpOwoKCgooZnVuY3Rpb24oKSB7Ci8qKgpAbW9kdWxlIGVtYmVyCkBz
        dWJtb2R1bGUgZW1iZXItcm91dGluZwoqLwoKdmFyIGdldCA9IEVtYmVyLmdl
        dCwgc2V0ID0gRW1iZXIuc2V0LCBmbXQgPSBFbWJlci5TdHJpbmcuZm10OwoK
        dmFyIHNsaWNlID0gQXJyYXkucHJvdG90eXBlLnNsaWNlOwpFbWJlci5vbkxv
        YWQoJ0VtYmVyLkhhbmRsZWJhcnMnLCBmdW5jdGlvbihIYW5kbGViYXJzKSB7
        CgogIHZhciBRdWVyeVBhcmFtcyA9IEVtYmVyLk9iamVjdC5leHRlbmQoewog
        ICAgdmFsdWVzOiBudWxsCiAgfSk7CgogIHZhciByZXNvbHZlUGFyYW1zID0g
        RW1iZXIuUm91dGVyLnJlc29sdmVQYXJhbXMsCiAgICAgIHRyYW5zbGF0ZVF1
        ZXJ5UGFyYW1zID0gRW1iZXIuUm91dGVyLl90cmFuc2xhdGVRdWVyeVBhcmFt
        cywKICAgICAgcmVzb2x2ZVBhdGhzICA9IEVtYmVyLlJvdXRlci5yZXNvbHZl
        UGF0aHMsCiAgICAgIGlzU2ltcGxlQ2xpY2sgPSBFbWJlci5WaWV3VXRpbHMu
        aXNTaW1wbGVDbGljazsKCiAgZnVuY3Rpb24gZ2V0UmVzb2x2ZWRQYXRocyhv
        cHRpb25zKSB7CgogICAgdmFyIHR5cGVzID0gb3B0aW9ucy5vcHRpb25zLnR5
        cGVzLAogICAgICAgIGRhdGEgPSBvcHRpb25zLm9wdGlvbnMuZGF0YTsKCiAg
        ICByZXR1cm4gcmVzb2x2ZVBhdGhzKG9wdGlvbnMuY29udGV4dCwgb3B0aW9u
        cy5wYXJhbXMsIHsgdHlwZXM6IHR5cGVzLCBkYXRhOiBkYXRhIH0pOwogIH0K
        CiAgLyoqCiAgICBgRW1iZXIuTGlua1ZpZXdgIHJlbmRlcnMgYW4gZWxlbWVu
        dCB3aG9zZSBgY2xpY2tgIGV2ZW50IHRyaWdnZXJzIGEKICAgIHRyYW5zaXRp
        b24gb2YgdGhlIGFwcGxpY2F0aW9uJ3MgaW5zdGFuY2Ugb2YgYEVtYmVyLlJv
        dXRlcmAgdG8KICAgIGEgc3VwcGxpZWQgcm91dGUgYnkgbmFtZS4KCiAgICBJ
        bnN0YW5jZXMgb2YgYExpbmtWaWV3YCB3aWxsIG1vc3QgbGlrZWx5IGJlIGNy
        ZWF0ZWQgdGhyb3VnaAogICAgdGhlIGBsaW5rLXRvYCBIYW5kbGViYXJzIGhl
        bHBlciwgYnV0IHByb3BlcnRpZXMgb2YgdGhpcyBjbGFzcwogICAgY2FuIGJl
        IG92ZXJyaWRkZW4gdG8gY3VzdG9taXplIGFwcGxpY2F0aW9uLXdpZGUgYmVo
        YXZpb3IuCgogICAgQGNsYXNzIExpbmtWaWV3CiAgICBAbmFtZXNwYWNlIEVt
        YmVyCiAgICBAZXh0ZW5kcyBFbWJlci5WaWV3CiAgICBAc2VlIHtIYW5kbGVi
        YXJzLmhlbHBlcnMubGluay10b30KICAqKi8KICB2YXIgTGlua1ZpZXcgPSBF
        bWJlci5MaW5rVmlldyA9IEVtYmVyLlZpZXcuZXh0ZW5kKHsKICAgIHRhZ05h
        bWU6ICdhJywKICAgIGN1cnJlbnRXaGVuOiBudWxsLAoKICAgIC8qKgogICAg
        ICBTZXRzIHRoZSBgdGl0bGVgIGF0dHJpYnV0ZSBvZiB0aGUgYExpbmtWaWV3
        YCdzIEhUTUwgZWxlbWVudC4KCiAgICAgIEBwcm9wZXJ0eSB0aXRsZQogICAg
        ICBAZGVmYXVsdCBudWxsCiAgICAqKi8KICAgIHRpdGxlOiBudWxsLAoKICAg
        IC8qKgogICAgICBTZXRzIHRoZSBgcmVsYCBhdHRyaWJ1dGUgb2YgdGhlIGBM
        aW5rVmlld2AncyBIVE1MIGVsZW1lbnQuCgogICAgICBAcHJvcGVydHkgcmVs
        CiAgICAgIEBkZWZhdWx0IG51bGwKICAgICoqLwogICAgcmVsOiBudWxsLAoK
        ICAgIC8qKgogICAgICBUaGUgQ1NTIGNsYXNzIHRvIGFwcGx5IHRvIGBMaW5r
        Vmlld2AncyBlbGVtZW50IHdoZW4gaXRzIGBhY3RpdmVgCiAgICAgIHByb3Bl
        cnR5IGlzIGB0cnVlYC4KCiAgICAgIEBwcm9wZXJ0eSBhY3RpdmVDbGFzcwog
        ICAgICBAdHlwZSBTdHJpbmcKICAgICAgQGRlZmF1bHQgYWN0aXZlCiAgICAq
        Ki8KICAgIGFjdGl2ZUNsYXNzOiAnYWN0aXZlJywKCiAgICAvKioKICAgICAg
        VGhlIENTUyBjbGFzcyB0byBhcHBseSB0byBgTGlua1ZpZXdgJ3MgZWxlbWVu
        dCB3aGVuIGl0cyBgbG9hZGluZ2AKICAgICAgcHJvcGVydHkgaXMgYHRydWVg
        LgoKICAgICAgQHByb3BlcnR5IGxvYWRpbmdDbGFzcwogICAgICBAdHlwZSBT
        dHJpbmcKICAgICAgQGRlZmF1bHQgbG9hZGluZwogICAgKiovCiAgICBsb2Fk
        aW5nQ2xhc3M6ICdsb2FkaW5nJywKCiAgICAvKioKICAgICAgVGhlIENTUyBj
        bGFzcyB0byBhcHBseSB0byBhIGBMaW5rVmlld2AncyBlbGVtZW50IHdoZW4g
        aXRzIGBkaXNhYmxlZGAKICAgICAgcHJvcGVydHkgaXMgYHRydWVgLgoKICAg
        ICAgQHByb3BlcnR5IGRpc2FibGVkQ2xhc3MKICAgICAgQHR5cGUgU3RyaW5n
        CiAgICAgIEBkZWZhdWx0IGRpc2FibGVkCiAgICAqKi8KICAgIGRpc2FibGVk
        Q2xhc3M6ICdkaXNhYmxlZCcsCiAgICBfaXNEaXNhYmxlZDogZmFsc2UsCgog
        ICAgLyoqCiAgICAgIERldGVybWluZXMgd2hldGhlciB0aGUgYExpbmtWaWV3
        YCB3aWxsIHRyaWdnZXIgcm91dGluZyB2aWEKICAgICAgdGhlIGByZXBsYWNl
        V2l0aGAgcm91dGluZyBzdHJhdGVneS4KCiAgICAgIEBwcm9wZXJ0eSByZXBs
        YWNlCiAgICAgIEB0eXBlIEJvb2xlYW4KICAgICAgQGRlZmF1bHQgZmFsc2UK
        ICAgICoqLwogICAgcmVwbGFjZTogZmFsc2UsCgogICAgLyoqCiAgICAgIEJ5
        IGRlZmF1bHQgdGhlIGB7e2xpbmstdG99fWAgaGVscGVyIHdpbGwgYmluZCB0
        byB0aGUgYGhyZWZgIGFuZAogICAgICBgdGl0bGVgIGF0dHJpYnV0ZXMuIEl0
        J3MgZGlzY291cmFnZSB0aGF0IHlvdSBvdmVycmlkZSB0aGVzZSBkZWZhdWx0
        cywKICAgICAgaG93ZXZlciB5b3UgY2FuIHB1c2ggb250byB0aGUgYXJyYXkg
        aWYgbmVlZGVkLgoKICAgICAgQHByb3BlcnR5IGF0dHJpYnV0ZUJpbmRpbmdz
        CiAgICAgIEB0eXBlIEFycmF5IHwgU3RyaW5nCiAgICAgIEBkZWZhdWx0IFsn
        aHJlZicsICd0aXRsZScsICdyZWwnXQogICAgICoqLwogICAgYXR0cmlidXRl
        QmluZGluZ3M6IFsnaHJlZicsICd0aXRsZScsICdyZWwnXSwKCiAgICAvKioK
        ICAgICAgQnkgZGVmYXVsdCB0aGUgYHt7bGluay10b319YCBoZWxwZXIgd2ls
        bCBiaW5kIHRvIHRoZSBgYWN0aXZlYCwgYGxvYWRpbmdgLCBhbmQKICAgICAg
        YGRpc2FibGVkYCBjbGFzc2VzLiBJdCBpcyBkaXNjb3VyYWdlZCB0byBvdmVy
        cmlkZSB0aGVzZSBkaXJlY3RseS4KCiAgICAgIEBwcm9wZXJ0eSBjbGFzc05h
        bWVCaW5kaW5ncwogICAgICBAdHlwZSBBcnJheQogICAgICBAZGVmYXVsdCBb
        J2FjdGl2ZScsICdsb2FkaW5nJywgJ2Rpc2FibGVkJ10KICAgICAqKi8KICAg
        IGNsYXNzTmFtZUJpbmRpbmdzOiBbJ2FjdGl2ZScsICdsb2FkaW5nJywgJ2Rp
        c2FibGVkJ10sCgogICAgLyoqCiAgICAgIEJ5IGRlZmF1bHQgdGhlIGB7e2xp
        bmstdG99fWAgaGVscGVyIHJlc3BvbmRzIHRvIHRoZSBgY2xpY2tgIGV2ZW50
        LiBZb3UKICAgICAgY2FuIG92ZXJyaWRlIHRoaXMgZ2xvYmFsbHkgYnkgc2V0
        dGluZyB0aGlzIHByb3BlcnR5IHRvIHlvdXIgY3VzdG9tCiAgICAgIGV2ZW50
        IG5hbWUuCgogICAgICBUaGlzIGlzIHBhcnRpY3VsYXJseSB1c2VmdWwgb24g
        bW9iaWxlIHdoZW4gb25lIHdhbnRzIHRvIGF2b2lkIHRoZSAzMDBtcwogICAg
        ICBjbGljayBkZWxheSB1c2luZyBzb21lIHNvcnQgb2YgY3VzdG9tIGB0YXBg
        IGV2ZW50LgoKICAgICAgQHByb3BlcnR5IGV2ZW50TmFtZQogICAgICBAdHlw
        ZSBTdHJpbmcKICAgICAgQGRlZmF1bHQgY2xpY2sKICAgICovCiAgICBldmVu
        dE5hbWU6ICdjbGljaycsCgogICAgLy8gdGhpcyBpcyBkb2MnZWQgaGVyZSBz
        byBpdCBzaG93cyB1cCBpbiB0aGUgZXZlbnRzCiAgICAvLyBzZWN0aW9uIG9m
        IHRoZSBBUEkgZG9jdW1lbnRhdGlvbiwgd2hpY2ggaXMgd2hlcmUKICAgIC8v
        IHBlb3BsZSB3aWxsIGxpa2VseSBnbyBsb29raW5nIGZvciBpdC4KICAgIC8q
        KgogICAgICBUcmlnZ2VycyB0aGUgYExpbmtWaWV3YCdzIHJvdXRpbmcgYmVo
        YXZpb3IuIElmCiAgICAgIGBldmVudE5hbWVgIGlzIGNoYW5nZWQgdG8gYSB2
        YWx1ZSBvdGhlciB0aGFuIGBjbGlja2AKICAgICAgdGhlIHJvdXRpbmcgYmVo
        YXZpb3Igd2lsbCB0cmlnZ2VyIG9uIHRoYXQgY3VzdG9tIGV2ZW50CiAgICAg
        IGluc3RlYWQuCgogICAgICBAZXZlbnQgY2xpY2sKICAgICoqLwoKICAgIC8q
        KgogICAgICBBbiBvdmVycmlkYWJsZSBtZXRob2QgY2FsbGVkIHdoZW4gTGlu
        a1ZpZXcgb2JqZWN0cyBhcmUgaW5zdGFudGlhdGVkLgoKICAgICAgRXhhbXBs
        ZToKCiAgICAgIGBgYGphdmFzY3JpcHQKICAgICAgQXBwLk15TGlua1ZpZXcg
        PSBFbWJlci5MaW5rVmlldy5leHRlbmQoewogICAgICAgIGluaXQ6IGZ1bmN0
        aW9uKCkgewogICAgICAgICAgdGhpcy5fc3VwZXIoKTsKICAgICAgICAgIEVt
        YmVyLkxvZ2dlci5sb2coJ0V2ZW50IGlzICcgKyB0aGlzLmdldCgnZXZlbnRO
        YW1lJykpOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIGBgYAoKICAgICAg
        Tk9URTogSWYgeW91IGRvIG92ZXJyaWRlIGBpbml0YCBmb3IgYSBmcmFtZXdv
        cmsgY2xhc3MgbGlrZSBgRW1iZXIuVmlld2Agb3IKICAgICAgYEVtYmVyLkFy
        cmF5Q29udHJvbGxlcmAsIGJlIHN1cmUgdG8gY2FsbCBgdGhpcy5fc3VwZXIo
        KWAgaW4geW91cgogICAgICBgaW5pdGAgZGVjbGFyYXRpb24hIElmIHlvdSBk
        b24ndCwgRW1iZXIgbWF5IG5vdCBoYXZlIGFuIG9wcG9ydHVuaXR5IHRvCiAg
        ICAgIGRvIGltcG9ydGFudCBzZXR1cCB3b3JrLCBhbmQgeW91J2xsIHNlZSBz
        dHJhbmdlIGJlaGF2aW9yIGluIHlvdXIKICAgICAgYXBwbGljYXRpb24uCgog
        ICAgICBAbWV0aG9kIGluaXQKICAgICovCiAgICBpbml0OiBmdW5jdGlvbigp
        IHsKICAgICAgdGhpcy5fc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsK
        CiAgICAgIC8vIE1hcCBkZXNpcmVkIGV2ZW50IG5hbWUgdG8gaW52b2tlIGZ1
        bmN0aW9uCiAgICAgIHZhciBldmVudE5hbWUgPSBnZXQodGhpcywgJ2V2ZW50
        TmFtZScpLCBpOwogICAgICB0aGlzLm9uKGV2ZW50TmFtZSwgdGhpcywgdGhp
        cy5faW52b2tlKTsKICAgIH0sCgogICAgLyoqCiAgICAgIFRoaXMgbWV0aG9k
        IGlzIGludm9rZWQgYnkgb2JzZXJ2ZXJzIGluc3RhbGxlZCBkdXJpbmcgYGlu
        aXRgIHRoYXQgZmlyZQogICAgICB3aGVuZXZlciB0aGUgcGFyYW1zIGNoYW5n
        ZQoKICAgICAgQHByaXZhdGUKICAgICAgQG1ldGhvZCBfcGFyYW1zQ2hhbmdl
        ZAogICAgICovCiAgICBfcGFyYW1zQ2hhbmdlZDogZnVuY3Rpb24oKSB7CiAg
        ICAgIHRoaXMubm90aWZ5UHJvcGVydHlDaGFuZ2UoJ3Jlc29sdmVkUGFyYW1z
        Jyk7CiAgICB9LAoKICAgIC8qKgogICAgIFRoaXMgaXMgY2FsbGVkIHRvIHNl
        dHVwIG9ic2VydmVycyB0aGF0IHdpbGwgdHJpZ2dlciBhIHJlcmVuZGVyLgoK
        ICAgICBAcHJpdmF0ZQogICAgIEBtZXRob2QgX3NldHVwUGF0aE9ic2VydmVy
        cwogICAgKiovCiAgICBfc2V0dXBQYXRoT2JzZXJ2ZXJzOiBmdW5jdGlvbigp
        ewogICAgICB2YXIgaGVscGVyUGFyYW1ldGVycyA9IHRoaXMucGFyYW1ldGVy
        cywKICAgICAgICAgIGxpbmtUZXh0UGF0aCAgICAgPSBoZWxwZXJQYXJhbWV0
        ZXJzLm9wdGlvbnMubGlua1RleHRQYXRoLAogICAgICAgICAgcGF0aHMgPSBn
        ZXRSZXNvbHZlZFBhdGhzKGhlbHBlclBhcmFtZXRlcnMpLAogICAgICAgICAg
        bGVuZ3RoID0gcGF0aHMubGVuZ3RoLAogICAgICAgICAgcGF0aCwgaSwgbm9y
        bWFsaXplZFBhdGg7CgogICAgICBpZiAobGlua1RleHRQYXRoKSB7CiAgICAg
        ICAgbm9ybWFsaXplZFBhdGggPSBFbWJlci5IYW5kbGViYXJzLm5vcm1hbGl6
        ZVBhdGgoaGVscGVyUGFyYW1ldGVycy5jb250ZXh0LCBsaW5rVGV4dFBhdGgs
        IGhlbHBlclBhcmFtZXRlcnMub3B0aW9ucy5kYXRhKTsKICAgICAgICB0aGlz
        LnJlZ2lzdGVyT2JzZXJ2ZXIobm9ybWFsaXplZFBhdGgucm9vdCwgbm9ybWFs
        aXplZFBhdGgucGF0aCwgdGhpcywgdGhpcy5yZXJlbmRlcik7CiAgICAgIH0K
        CiAgICAgIGZvcihpPTA7IGkgPCBsZW5ndGg7IGkrKykgewogICAgICAgIHBh
        dGggPSBwYXRoc1tpXTsKICAgICAgICBpZiAobnVsbCA9PT0gcGF0aCkgewog
        ICAgICAgICAgLy8gQSBsaXRlcmFsIHZhbHVlIHdhcyBwcm92aWRlZCwgbm90
        IGEgcGF0aCwgc28gbm90aGluZyB0byBvYnNlcnZlLgogICAgICAgICAgY29u
        dGludWU7CiAgICAgICAgfQoKICAgICAgICBub3JtYWxpemVkUGF0aCA9IEVt
        YmVyLkhhbmRsZWJhcnMubm9ybWFsaXplUGF0aChoZWxwZXJQYXJhbWV0ZXJz
        LmNvbnRleHQsIHBhdGgsIGhlbHBlclBhcmFtZXRlcnMub3B0aW9ucy5kYXRh
        KTsKICAgICAgICB0aGlzLnJlZ2lzdGVyT2JzZXJ2ZXIobm9ybWFsaXplZFBh
        dGgucm9vdCwgbm9ybWFsaXplZFBhdGgucGF0aCwgdGhpcywgdGhpcy5fcGFy
        YW1zQ2hhbmdlZCk7CiAgICAgIH0KCiAgICAgIHZhciBxdWVyeVBhcmFtc09i
        amVjdCA9IHRoaXMucXVlcnlQYXJhbXNPYmplY3Q7CiAgICAgIGlmIChxdWVy
        eVBhcmFtc09iamVjdCkgewogICAgICAgIHZhciB2YWx1ZXMgPSBxdWVyeVBh
        cmFtc09iamVjdC52YWx1ZXM7CgogICAgICAgIC8vIEluc3RhbGwgb2JzZXJ2
        ZXJzIGZvciBhbGwgb2YgdGhlIGhhc2ggb3B0aW9ucwogICAgICAgIC8vIHBy
        b3ZpZGVkIGluIHRoZSAocXVlcnktcGFyYW1zKSBzdWJleHByZXNzaW9uLgog
        ICAgICAgIGZvciAodmFyIGsgaW4gdmFsdWVzKSB7CiAgICAgICAgICBpZiAo
        IXZhbHVlcy5oYXNPd25Qcm9wZXJ0eShrKSkgeyBjb250aW51ZTsgfQoKICAg
        ICAgICAgIGlmIChxdWVyeVBhcmFtc09iamVjdC50eXBlc1trXSA9PT0gJ0lE
        JykgewogICAgICAgICAgICBub3JtYWxpemVkUGF0aCA9IEVtYmVyLkhhbmRs
        ZWJhcnMubm9ybWFsaXplUGF0aChoZWxwZXJQYXJhbWV0ZXJzLmNvbnRleHQs
        IHZhbHVlc1trXSwgaGVscGVyUGFyYW1ldGVycy5vcHRpb25zLmRhdGEpOwog
        ICAgICAgICAgICB0aGlzLnJlZ2lzdGVyT2JzZXJ2ZXIobm9ybWFsaXplZFBh
        dGgucm9vdCwgbm9ybWFsaXplZFBhdGgucGF0aCwgdGhpcywgdGhpcy5fcGFy
        YW1zQ2hhbmdlZCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAg
        ICB9LAoKICAgIGFmdGVyUmVuZGVyOiBmdW5jdGlvbigpewogICAgICB0aGlz
        Ll9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB0aGlzLl9z
        ZXR1cFBhdGhPYnNlcnZlcnMoKTsKICAgIH0sCgogICAgLyoqCiAgICAgIEV2
        ZW4gdGhvdWdoIHRoaXMgaXNuJ3QgYSB2aXJ0dWFsIHZpZXcsIHdlIHdhbnQg
        dG8gdHJlYXQgaXQgYXMgaWYgaXQgaXMKICAgICAgc28gdGhhdCB5b3UgY2Fu
        IGFjY2VzcyB0aGUgcGFyZW50IHdpdGgge3t2aWV3LnByb3B9fQoKICAgICAg
        QHByaXZhdGUKICAgICAgQG1ldGhvZCBjb25jcmV0ZVZpZXcKICAgICoqLwog
        ICAgY29uY3JldGVWaWV3OiBFbWJlci5jb21wdXRlZChmdW5jdGlvbigpIHsK
        ICAgICAgcmV0dXJuIGdldCh0aGlzLCAncGFyZW50VmlldycpOwogICAgfSku
        cHJvcGVydHkoJ3BhcmVudFZpZXcnKSwKCiAgICAvKioKCiAgICAgIEFjY2Vz
        c2VkIGFzIGEgY2xhc3NuYW1lIGJpbmRpbmcgdG8gYXBwbHkgdGhlIGBMaW5r
        Vmlld2AncyBgZGlzYWJsZWRDbGFzc2AKICAgICAgQ1NTIGBjbGFzc2AgdG8g
        dGhlIGVsZW1lbnQgd2hlbiB0aGUgbGluayBpcyBkaXNhYmxlZC4KCiAgICAg
        IFdoZW4gYHRydWVgIGludGVyYWN0aW9ucyB3aXRoIHRoZSBlbGVtZW50IHdp
        bGwgbm90IHRyaWdnZXIgcm91dGUgY2hhbmdlcy4KICAgICAgQHByb3BlcnR5
        IGRpc2FibGVkCiAgICAqLwogICAgZGlzYWJsZWQ6IEVtYmVyLmNvbXB1dGVk
        KGZ1bmN0aW9uIGNvbXB1dGVMaW5rVmlld0Rpc2FibGVkKGtleSwgdmFsdWUp
        IHsKICAgICAgaWYgKHZhbHVlICE9PSB1bmRlZmluZWQpIHsgdGhpcy5zZXQo
        J19pc0Rpc2FibGVkJywgdmFsdWUpOyB9CgogICAgICByZXR1cm4gdmFsdWUg
        PyBnZXQodGhpcywgJ2Rpc2FibGVkQ2xhc3MnKSA6IGZhbHNlOwogICAgfSks
        CgogICAgLyoqCiAgICAgIEFjY2Vzc2VkIGFzIGEgY2xhc3NuYW1lIGJpbmRp
        bmcgdG8gYXBwbHkgdGhlIGBMaW5rVmlld2AncyBgYWN0aXZlQ2xhc3NgCiAg
        ICAgIENTUyBgY2xhc3NgIHRvIHRoZSBlbGVtZW50IHdoZW4gdGhlIGxpbmsg
        aXMgYWN0aXZlLgoKICAgICAgQSBgTGlua1ZpZXdgIGlzIGNvbnNpZGVyZWQg
        YWN0aXZlIHdoZW4gaXRzIGBjdXJyZW50V2hlbmAgcHJvcGVydHkgaXMgYHRy
        dWVgCiAgICAgIG9yIHRoZSBhcHBsaWNhdGlvbidzIGN1cnJlbnQgcm91dGUg
        aXMgdGhlIHJvdXRlIHRoZSBgTGlua1ZpZXdgIHdvdWxkIHRyaWdnZXIKICAg
        ICAgdHJhbnNpdGlvbnMgaW50by4KCiAgICAgIEBwcm9wZXJ0eSBhY3RpdmUK
        ICAgICoqLwogICAgYWN0aXZlOiBFbWJlci5jb21wdXRlZChmdW5jdGlvbiBj
        b21wdXRlTGlua1ZpZXdBY3RpdmUoKSB7CiAgICAgIGlmIChnZXQodGhpcywg
        J2xvYWRpbmcnKSkgeyByZXR1cm4gZmFsc2U7IH0KCiAgICAgIHZhciByb3V0
        ZXIgPSBnZXQodGhpcywgJ3JvdXRlcicpLAogICAgICAgICAgcm91dGVBcmdz
        ID0gZ2V0KHRoaXMsICdyb3V0ZUFyZ3MnKSwKICAgICAgICAgIGNvbnRleHRz
        ID0gcm91dGVBcmdzLnNsaWNlKDEpLAogICAgICAgICAgcmVzb2x2ZWRQYXJh
        bXMgPSBnZXQodGhpcywgJ3Jlc29sdmVkUGFyYW1zJyksCiAgICAgICAgICBj
        dXJyZW50V2hlbiA9IHRoaXMuY3VycmVudFdoZW4gfHwgcm91dGVBcmdzWzBd
        OwoKICAgICAgLy8gaWYgb3ZlcnJpZGluZyBhY3RpdmUgdy8gY3VycmVudFdo
        ZW4gdGhlbiBkb24ndCBhcHBseSBjb250ZXh0cyBzaW5jZSB0aGV5IHdvbid0
        IG1hdGNoCiAgICAgIGlmICh0aGlzLmN1cnJlbnRXaGVuKSB7CiAgICAgICAg
        Y29udGV4dHMgPSBbXTsKICAgICAgICAgICAgICB9CgogICAgICB2YXIgaXNB
        Y3RpdmUgPSByb3V0ZXIuaXNBY3RpdmUuYXBwbHkocm91dGVyLCBbY3VycmVu
        dFdoZW5dLmNvbmNhdChjb250ZXh0cykpOwoKICAgICAgaWYgKGlzQWN0aXZl
        KSB7IHJldHVybiBnZXQodGhpcywgJ2FjdGl2ZUNsYXNzJyk7IH0KICAgIH0p
        LnByb3BlcnR5KCdyZXNvbHZlZFBhcmFtcycsICdyb3V0ZUFyZ3MnKSwKCiAg
        ICAvKioKICAgICAgQWNjZXNzZWQgYXMgYSBjbGFzc25hbWUgYmluZGluZyB0
        byBhcHBseSB0aGUgYExpbmtWaWV3YCdzIGBsb2FkaW5nQ2xhc3NgCiAgICAg
        IENTUyBgY2xhc3NgIHRvIHRoZSBlbGVtZW50IHdoZW4gdGhlIGxpbmsgaXMg
        bG9hZGluZy4KCiAgICAgIEEgYExpbmtWaWV3YCBpcyBjb25zaWRlcmVkIGxv
        YWRpbmcgd2hlbiBpdCBoYXMgYXQgbGVhc3Qgb25lCiAgICAgIHBhcmFtZXRl
        ciB3aG9zZSB2YWx1ZSBpcyBjdXJyZW50bHkgbnVsbCBvciB1bmRlZmluZWQu
        IER1cmluZwogICAgICB0aGlzIHRpbWUsIGNsaWNraW5nIHRoZSBsaW5rIHdp
        bGwgcGVyZm9ybSBubyB0cmFuc2l0aW9uIGFuZAogICAgICBlbWl0IGEgd2Fy
        bmluZyB0aGF0IHRoZSBsaW5rIGlzIHN0aWxsIGluIGEgbG9hZGluZyBzdGF0
        ZS4KCiAgICAgIEBwcm9wZXJ0eSBsb2FkaW5nCiAgICAqKi8KICAgIGxvYWRp
        bmc6IEVtYmVyLmNvbXB1dGVkKGZ1bmN0aW9uIGNvbXB1dGVMaW5rVmlld0xv
        YWRpbmcoKSB7CiAgICAgIGlmICghZ2V0KHRoaXMsICdyb3V0ZUFyZ3MnKSkg
        eyByZXR1cm4gZ2V0KHRoaXMsICdsb2FkaW5nQ2xhc3MnKTsgfQogICAgfSku
        cHJvcGVydHkoJ3JvdXRlQXJncycpLAoKICAgIC8qKgogICAgICBSZXR1cm5z
        IHRoZSBhcHBsaWNhdGlvbidzIG1haW4gcm91dGVyIGZyb20gdGhlIGNvbnRh
        aW5lci4KCiAgICAgIEBwcml2YXRlCiAgICAgIEBwcm9wZXJ0eSByb3V0ZXIK
        ICAgICoqLwogICAgcm91dGVyOiBFbWJlci5jb21wdXRlZChmdW5jdGlvbigp
        IHsKICAgICAgcmV0dXJuIGdldCh0aGlzLCAnY29udHJvbGxlcicpLmNvbnRh
        aW5lci5sb29rdXAoJ3JvdXRlcjptYWluJyk7CiAgICB9KSwKCiAgICAvKioK
        ICAgICAgRXZlbnQgaGFuZGxlciB0aGF0IGludm9rZXMgdGhlIGxpbmssIGFj
        dGl2YXRpbmcgdGhlIGFzc29jaWF0ZWQgcm91dGUuCgogICAgICBAcHJpdmF0
        ZQogICAgICBAbWV0aG9kIF9pbnZva2UKICAgICAgQHBhcmFtIHtFdmVudH0g
        ZXZlbnQKICAgICovCiAgICBfaW52b2tlOiBmdW5jdGlvbihldmVudCkgewog
        ICAgICBpZiAoIWlzU2ltcGxlQ2xpY2soZXZlbnQpKSB7IHJldHVybiB0cnVl
        OyB9CgogICAgICBpZiAodGhpcy5wcmV2ZW50RGVmYXVsdCAhPT0gZmFsc2Up
        IHsgZXZlbnQucHJldmVudERlZmF1bHQoKTsgfQogICAgICBpZiAodGhpcy5i
        dWJibGVzID09PSBmYWxzZSkgeyBldmVudC5zdG9wUHJvcGFnYXRpb24oKTsg
        fQoKICAgICAgaWYgKGdldCh0aGlzLCAnX2lzRGlzYWJsZWQnKSkgeyByZXR1
        cm4gZmFsc2U7IH0KCiAgICAgIGlmIChnZXQodGhpcywgJ2xvYWRpbmcnKSkg
        ewogICAgICAgIEVtYmVyLkxvZ2dlci53YXJuKCJUaGlzIGxpbmstdG8gaXMg
        aW4gYW4gaW5hY3RpdmUgbG9hZGluZyBzdGF0ZSBiZWNhdXNlIGF0IGxlYXN0
        IG9uZSBvZiBpdHMgcGFyYW1ldGVycyBwcmVzZW50bHkgaGFzIGEgbnVsbC91
        bmRlZmluZWQgdmFsdWUsIG9yIHRoZSBwcm92aWRlZCByb3V0ZSBuYW1lIGlz
        IGludmFsaWQuIik7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9Cgog
        ICAgICB2YXIgcm91dGVyID0gZ2V0KHRoaXMsICdyb3V0ZXInKSwKICAgICAg
        ICAgIHJvdXRlQXJncyA9IGdldCh0aGlzLCAncm91dGVBcmdzJyk7CgogICAg
        ICB2YXIgdHJhbnNpdGlvbjsKICAgICAgaWYgKGdldCh0aGlzLCAncmVwbGFj
        ZScpKSB7CiAgICAgICAgdHJhbnNpdGlvbiA9IHJvdXRlci5yZXBsYWNlV2l0
        aC5hcHBseShyb3V0ZXIsIHJvdXRlQXJncyk7CiAgICAgIH0gZWxzZSB7CiAg
        ICAgICAgdHJhbnNpdGlvbiA9IHJvdXRlci50cmFuc2l0aW9uVG8uYXBwbHko
        cm91dGVyLCByb3V0ZUFyZ3MpOwogICAgICB9CgogICAgICAvLyBTY2hlZHVs
        ZSBlYWdlciBVUkwgdXBkYXRlLCBidXQgYWZ0ZXIgd2UndmUgZ2l2ZW4gdGhl
        IHRyYW5zaXRpb24KICAgICAgLy8gYSBjaGFuY2UgdG8gc3luY2hyb25vdXNs
        eSByZWRpcmVjdC4KICAgICAgCiAgICAgICAgLy8gV2UgbmVlZCB0byBhbHdh
        eXMgZ2VuZXJhdGUgdGhlIFVSTCBpbnN0ZWFkIG9mIHVzaW5nIHRoZSBocmVm
        IGJlY2F1c2UKICAgICAgICAvLyB0aGUgaHJlZiB3aWxsIGluY2x1ZGUgYW55
        IHJvb3RVUkwgc2V0LCBidXQgdGhlIHJvdXRlciBleHBlY3RzIGEgVVJMCiAg
        ICAgICAgLy8gd2l0aG91dCBpdCEgTm90ZSB0aGF0IHdlIGRvbid0IHVzZSB0
        aGUgZmlyc3QgbGV2ZWwgcm91dGVyIGJlY2F1c2UgaXQKICAgICAgICAvLyBj
        YWxscyBsb2NhdGlvbi5mb3JtYXRVUkwoKSwgd2hpY2ggYWxzbyB3b3VsZCBh
        ZGQgdGhlIHJvb3RVUkwhCiAgICAgICAgdmFyIHVybCA9IHJvdXRlci5yb3V0
        ZXIuZ2VuZXJhdGUuYXBwbHkocm91dGVyLnJvdXRlciwgZ2V0KHRoaXMsICdy
        b3V0ZUFyZ3MnKSk7CiAgICAgICAgRW1iZXIucnVuLnNjaGVkdWxlT25jZSgn
        cm91dGVyVHJhbnNpdGlvbnMnLCB0aGlzLCB0aGlzLl9lYWdlclVwZGF0ZVVy
        bCwgdHJhbnNpdGlvbiwgdXJsKTsKICAgICAgCiAgICB9LAoKICAgIC8qKgog
        ICAgICBAcHJpdmF0ZQogICAgICovCiAgICBfZWFnZXJVcGRhdGVVcmw6IGZ1
        bmN0aW9uKHRyYW5zaXRpb24sIGhyZWYpIHsKICAgICAgaWYgKCF0cmFuc2l0
        aW9uLmlzQWN0aXZlIHx8ICF0cmFuc2l0aW9uLnVybE1ldGhvZCkgewogICAg
        ICAgIC8vIHRyYW5zaXRpb24gd2FzIGFib3J0ZWQsIGFscmVhZHkgcmFuIHRv
        IGNvbXBsZXRpb24sCiAgICAgICAgLy8gb3IgaXQgaGFzIGEgbnVsbCB1cmwt
        dXBkYXRlZCBtZXRob2QuCiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAg
        ICBpZiAoaHJlZi5pbmRleE9mKCcjJykgPT09IDApIHsKICAgICAgICBocmVm
        ID0gaHJlZi5zbGljZSgxKTsKICAgICAgfQoKICAgICAgLy8gUmUtdXNlIHRo
        ZSByb3V0ZXJqcyBob29rcyBzZXQgdXAgYnkgdGhlIEVtYmVyIHJvdXRlci4K
        ICAgICAgdmFyIHJvdXRlcmpzID0gZ2V0KHRoaXMsICdyb3V0ZXIucm91dGVy
        Jyk7CiAgICAgIGlmICh0cmFuc2l0aW9uLnVybE1ldGhvZCA9PT0gJ3VwZGF0
        ZScpIHsKICAgICAgICByb3V0ZXJqcy51cGRhdGVVUkwoaHJlZik7CiAgICAg
        IH0gZWxzZSBpZiAodHJhbnNpdGlvbi51cmxNZXRob2QgPT09ICdyZXBsYWNl
        JykgewogICAgICAgIHJvdXRlcmpzLnJlcGxhY2VVUkwoaHJlZik7CiAgICAg
        IH0KCiAgICAgIC8vIFByZXZlbnQgbGF0ZXIgdXBkYXRlIHVybCByZWZpcmUu
        CiAgICAgIHRyYW5zaXRpb24ubWV0aG9kKG51bGwpOwogICAgfSwKCiAgICAv
        KioKICAgICAgQ29tcHV0ZWQgcHJvcGVydHkgdGhhdCByZXR1cm5zIGFuIGFy
        cmF5IG9mIHRoZQogICAgICByZXNvbHZlZCBwYXJhbWV0ZXJzIHBhc3NlZCB0
        byB0aGUgYGxpbmstdG9gIGhlbHBlciwKICAgICAgZS5nLjoKCiAgICAgIGBg
        YGhicwogICAgICB7e2xpbmstdG8gYSBiICcxMjMnIGN9fQogICAgICBgYGAK
        CiAgICAgIHdpbGwgZ2VuZXJhdGUgYSBgcmVzb2x2ZWRQYXJhbXNgIG9mOgoK
        ICAgICAgYGBganMKICAgICAgW2FPYmplY3QsIGJPYmplY3QsICcxMjMnLCBj
        T2JqZWN0XQogICAgICBgYGAKCiAgICAgIEBwcml2YXRlCiAgICAgIEBwcm9w
        ZXJ0eQogICAgICBAcmV0dXJuIHtBcnJheX0KICAgICAqLwogICAgcmVzb2x2
        ZWRQYXJhbXM6IEVtYmVyLmNvbXB1dGVkKGZ1bmN0aW9uKCkgewogICAgICB2
        YXIgcGFyYW1ldGVycyA9IHRoaXMucGFyYW1ldGVycywKICAgICAgICAgIG9w
        dGlvbnMgPSBwYXJhbWV0ZXJzLm9wdGlvbnMsCiAgICAgICAgICB0eXBlcyA9
        IG9wdGlvbnMudHlwZXMsCiAgICAgICAgICBkYXRhID0gb3B0aW9ucy5kYXRh
        OwoKICAgICAgaWYgKHBhcmFtZXRlcnMucGFyYW1zLmxlbmd0aCA9PT0gMCkg
        ewogICAgICAgIHZhciBhcHBDb250cm9sbGVyID0gdGhpcy5jb250YWluZXIu
        bG9va3VwKCdjb250cm9sbGVyOmFwcGxpY2F0aW9uJyk7CiAgICAgICAgcmV0
        dXJuIFtnZXQoYXBwQ29udHJvbGxlciwgJ2N1cnJlbnRSb3V0ZU5hbWUnKV07
        CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIHJlc29sdmVQYXJhbXMo
        cGFyYW1ldGVycy5jb250ZXh0LCBwYXJhbWV0ZXJzLnBhcmFtcywgeyB0eXBl
        czogdHlwZXMsIGRhdGE6IGRhdGEgfSk7CiAgICAgIH0KCiAgICAgIC8vIE9y
        aWdpbmFsIGltcGxlbWVudGF0aW9uIGlmIHF1ZXJ5IHBhcmFtcyBub3QgZW5h
        YmxlZAogICAgICByZXR1cm4gcmVzb2x2ZVBhcmFtcyhwYXJhbWV0ZXJzLmNv
        bnRleHQsIHBhcmFtZXRlcnMucGFyYW1zLCB7IHR5cGVzOiB0eXBlcywgZGF0
        YTogZGF0YSB9KTsKICAgIH0pLnByb3BlcnR5KCdyb3V0ZXIudXJsJyksCgog
        ICAgLyoqCiAgICAgIENvbXB1dGVkIHByb3BlcnR5IHRoYXQgcmV0dXJucyB0
        aGUgY3VycmVudCByb3V0ZSBuYW1lIGFuZAogICAgICBhbnkgZHluYW1pYyBz
        ZWdtZW50cy4KCiAgICAgIEBwcml2YXRlCiAgICAgIEBwcm9wZXJ0eQogICAg
        ICBAcmV0dXJuIHtBcnJheX0gQW4gYXJyYXkgd2l0aCB0aGUgcm91dGUgbmFt
        ZSBhbmQgYW55IGR5bmFtaWMgc2VnbWVudHMKICAgICAqLwogICAgcm91dGVB
        cmdzOiBFbWJlci5jb21wdXRlZChmdW5jdGlvbiBjb21wdXRlTGlua1ZpZXdS
        b3V0ZUFyZ3MoKSB7CiAgICAgIHZhciByZXNvbHZlZFBhcmFtcyA9IGdldCh0
        aGlzLCAncmVzb2x2ZWRQYXJhbXMnKS5zbGljZSgwKSwKICAgICAgICAgIHJv
        dXRlciA9IGdldCh0aGlzLCAncm91dGVyJyksCiAgICAgICAgICBuYW1lZFJv
        dXRlID0gcmVzb2x2ZWRQYXJhbXNbMF07CgogICAgICBpZiAoIW5hbWVkUm91
        dGUpIHsgcmV0dXJuOyB9CgogICAgICBFbWJlci5hc3NlcnQoZm10KCJUaGUg
        YXR0ZW1wdCB0byBsaW5rLXRvIHJvdXRlICclQCcgZmFpbGVkLiAiICsKICAg
        ICAgICAgICAgICAgICAgICAgICAiVGhlIHJvdXRlciBkaWQgbm90IGZpbmQg
        JyVAJyBpbiBpdHMgcG9zc2libGUgcm91dGVzOiAnJUAnIiwKICAgICAgICAg
        ICAgICAgICAgICAgICBbbmFtZWRSb3V0ZSwgbmFtZWRSb3V0ZSwgRW1iZXIu
        a2V5cyhyb3V0ZXIucm91dGVyLnJlY29nbml6ZXIubmFtZXMpLmpvaW4oIics
        ICciKV0pLAogICAgICAgICAgICAgICAgICAgICAgIHJvdXRlci5oYXNSb3V0
        ZShuYW1lZFJvdXRlKSk7CgogICAgICAvL25vcm1hbGl6ZSByb3V0ZSBuYW1l
        CiAgICAgIHZhciBoYW5kbGVycyA9IHJvdXRlci5yb3V0ZXIucmVjb2duaXpl
        ci5oYW5kbGVyc0ZvcihuYW1lZFJvdXRlKTsKICAgICAgdmFyIG5vcm1hbGl6
        ZWRQYXRoID0gaGFuZGxlcnNbaGFuZGxlcnMubGVuZ3RoIC0gMV0uaGFuZGxl
        cjsKICAgICAgaWYgKG5hbWVkUm91dGUgIT09IG5vcm1hbGl6ZWRQYXRoKSB7
        CiAgICAgICAgdGhpcy5zZXQoJ2N1cnJlbnRXaGVuJywgbmFtZWRSb3V0ZSk7
        CiAgICAgICAgbmFtZWRSb3V0ZSA9IGhhbmRsZXJzW2hhbmRsZXJzLmxlbmd0
        aCAtIDFdLmhhbmRsZXI7CiAgICAgICAgcmVzb2x2ZWRQYXJhbXNbMF0gPSBu
        YW1lZFJvdXRlOwogICAgICB9CgogICAgICBmb3IgKHZhciBpID0gMSwgbGVu
        ID0gcmVzb2x2ZWRQYXJhbXMubGVuZ3RoOyBpIDwgbGVuOyArK2kpIHsKICAg
        ICAgICB2YXIgcGFyYW0gPSByZXNvbHZlZFBhcmFtc1tpXTsKICAgICAgICBp
        ZiAocGFyYW0gPT09IG51bGwgfHwgdHlwZW9mIHBhcmFtID09PSAndW5kZWZp
        bmVkJykgewogICAgICAgICAgLy8gSWYgY29udGV4dHMgYXJlbid0IHByZXNl
        bnQsIGNvbnNpZGVyIHRoZSBsaW5rVmlldyB1bmxvYWRlZC4KICAgICAgICAg
        IHJldHVybjsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIAogICAgICByZXR1
        cm4gcmVzb2x2ZWRQYXJhbXM7CiAgICB9KS5wcm9wZXJ0eSgncmVzb2x2ZWRQ
        YXJhbXMnLCAncXVlcnlQYXJhbXMnKSwKCiAgICBxdWVyeVBhcmFtc09iamVj
        dDogbnVsbCwKICAgIHF1ZXJ5UGFyYW1zOiBFbWJlci5jb21wdXRlZChmdW5j
        dGlvbiBjb21wdXRlTGlua1ZpZXdRdWVyeVBhcmFtcygpIHsKCiAgICAgIHZh
        ciBxdWVyeVBhcmFtc09iamVjdCA9IGdldCh0aGlzLCAncXVlcnlQYXJhbXNP
        YmplY3QnKSwKICAgICAgICAgIHN1cHBsaWVkUGFyYW1zID0ge307CgogICAg
        ICBpZiAocXVlcnlQYXJhbXNPYmplY3QpIHsKICAgICAgICBFbWJlci5tZXJn
        ZShzdXBwbGllZFBhcmFtcywgcXVlcnlQYXJhbXNPYmplY3QudmFsdWVzKTsK
        ICAgICAgfQoKICAgICAgdmFyIHJlc29sdmVkUGFyYW1zID0gZ2V0KHRoaXMs
        ICdyZXNvbHZlZFBhcmFtcycpLAogICAgICAgICAgcm91dGVyID0gZ2V0KHRo
        aXMsICdyb3V0ZXInKSwKICAgICAgICAgIHJvdXRlTmFtZSA9IHJlc29sdmVk
        UGFyYW1zWzBdLAogICAgICAgICAgcGFyYW1zRm9yUm91dGUgPSByb3V0ZXIu
        X3F1ZXJ5UGFyYW1OYW1lc0Zvcihyb3V0ZU5hbWUpLAogICAgICAgICAgcXVl
        cnlQYXJhbXMgPSBwYXJhbXNGb3JSb3V0ZS5xdWVyeVBhcmFtcywKICAgICAg
        ICAgIHRyYW5zbGF0aW9ucyA9IHBhcmFtc0ZvclJvdXRlLnRyYW5zbGF0aW9u
        cywKICAgICAgICAgIHBhcmFtc0ZvclJlY29nbml6ZXIgPSB7fTsKCiAgICAg
        IC8vIE5vcm1hbGl6ZSBzdXBwbGllZCBwYXJhbXMgaW50byB0aGVpciBsb25n
        LWZvcm0gbmFtZQogICAgICAvLyBlLmcuICdmb28nIC0+ICdjb250cm9sbGVy
        bmFtZTpmb28nCiAgICAgIHRyYW5zbGF0ZVF1ZXJ5UGFyYW1zKHN1cHBsaWVk
        UGFyYW1zLCB0cmFuc2xhdGlvbnMsIHJvdXRlTmFtZSk7CgogICAgICB2YXIg
        aGVscGVyUGFyYW1ldGVycyA9IHRoaXMucGFyYW1ldGVyczsKICAgICAgcm91
        dGVyLl9xdWVyeVBhcmFtT3ZlcnJpZGVzKHBhcmFtc0ZvclJlY29nbml6ZXIs
        IHF1ZXJ5UGFyYW1zLCBmdW5jdGlvbihuYW1lLCByZXN1bHRzTmFtZSkgewog
        ICAgICAgIGlmICghKG5hbWUgaW4gc3VwcGxpZWRQYXJhbXMpKSB7IHJldHVy
        bjsgfQoKICAgICAgICB2YXIgcGFydHMgPSBuYW1lLnNwbGl0KCc6Jyk7Cgog
        ICAgICAgIHZhciB0eXBlID0gcXVlcnlQYXJhbXNPYmplY3QudHlwZXNbcGFy
        dHNbMV1dOwoKICAgICAgICB2YXIgdmFsdWU7CiAgICAgICAgaWYgKHR5cGUg
        PT09ICdJRCcpIHsKICAgICAgICAgIHZhciBub3JtYWxpemVkUGF0aCA9IEVt
        YmVyLkhhbmRsZWJhcnMubm9ybWFsaXplUGF0aChoZWxwZXJQYXJhbWV0ZXJz
        LmNvbnRleHQsIHN1cHBsaWVkUGFyYW1zW25hbWVdLCBoZWxwZXJQYXJhbWV0
        ZXJzLm9wdGlvbnMuZGF0YSk7CiAgICAgICAgICB2YWx1ZSA9IEVtYmVyLkhh
        bmRsZWJhcnMuZ2V0KG5vcm1hbGl6ZWRQYXRoLnJvb3QsIG5vcm1hbGl6ZWRQ
        YXRoLnBhdGgsIGhlbHBlclBhcmFtZXRlcnMub3B0aW9ucyk7CiAgICAgICAg
        fSBlbHNlIHsKICAgICAgICAgIHZhbHVlID0gc3VwcGxpZWRQYXJhbXNbbmFt
        ZV07CiAgICAgICAgfQoKICAgICAgICBkZWxldGUgc3VwcGxpZWRQYXJhbXNb
        bmFtZV07CgogICAgICAgIHBhcmFtc0ZvclJlY29nbml6ZXJbcmVzdWx0c05h
        bWVdID0gdmFsdWU7CiAgICAgIH0pOwoKICAgICAgcmV0dXJuIHBhcmFtc0Zv
        clJlY29nbml6ZXI7CiAgICB9KS5wcm9wZXJ0eSgncmVzb2x2ZWRQYXJhbXMu
        W10nKSwKCiAgICAvKioKICAgICAgU2V0cyB0aGUgZWxlbWVudCdzIGBocmVm
        YCBhdHRyaWJ1dGUgdG8gdGhlIHVybCBmb3IKICAgICAgdGhlIGBMaW5rVmll
        d2AncyB0YXJnZXRlZCByb3V0ZS4KCiAgICAgIElmIHRoZSBgTGlua1ZpZXdg
        J3MgYHRhZ05hbWVgIGlzIGNoYW5nZWQgdG8gYSB2YWx1ZSBvdGhlcgogICAg
        ICB0aGFuIGBhYCwgdGhpcyBwcm9wZXJ0eSB3aWxsIGJlIGlnbm9yZWQuCgog
        ICAgICBAcHJvcGVydHkgaHJlZgogICAgKiovCiAgICBocmVmOiBFbWJlci5j
        b21wdXRlZChmdW5jdGlvbiBjb21wdXRlTGlua1ZpZXdIcmVmKCkgewogICAg
        ICBpZiAoZ2V0KHRoaXMsICd0YWdOYW1lJykgIT09ICdhJykgeyByZXR1cm47
        IH0KCiAgICAgIHZhciByb3V0ZXIgPSBnZXQodGhpcywgJ3JvdXRlcicpLAog
        ICAgICAgICAgcm91dGVBcmdzID0gZ2V0KHRoaXMsICdyb3V0ZUFyZ3MnKTsK
        CiAgICAgIHJldHVybiByb3V0ZUFyZ3MgPyByb3V0ZXIuZ2VuZXJhdGUuYXBw
        bHkocm91dGVyLCByb3V0ZUFyZ3MpIDogZ2V0KHRoaXMsICdsb2FkaW5nSHJl
        ZicpOwogICAgfSkucHJvcGVydHkoJ3JvdXRlQXJncycpLAoKICAgIC8qKgog
        ICAgICBUaGUgZGVmYXVsdCBocmVmIHZhbHVlIHRvIHVzZSB3aGlsZSBhIGxp
        bmstdG8gaXMgbG9hZGluZy4KICAgICAgT25seSBhcHBsaWVzIHdoZW4gdGFn
        TmFtZSBpcyAnYScKCiAgICAgIEBwcm9wZXJ0eSBsb2FkaW5nSHJlZgogICAg
        ICBAdHlwZSBTdHJpbmcKICAgICAgQGRlZmF1bHQgIwogICAgKi8KICAgIGxv
        YWRpbmdIcmVmOiAnIycKICB9KTsKCiAgTGlua1ZpZXcudG9TdHJpbmcgPSBm
        dW5jdGlvbigpIHsgcmV0dXJuICJMaW5rVmlldyI7IH07CgogIC8qKgogICAg
        VGhlIGB7e2xpbmstdG99fWAgaGVscGVyIHJlbmRlcnMgYSBsaW5rIHRvIHRo
        ZSBzdXBwbGllZAogICAgYHJvdXRlTmFtZWAgcGFzc2luZyBhbiBvcHRpb25h
        bGx5IHN1cHBsaWVkIG1vZGVsIHRvIHRoZQogICAgcm91dGUgYXMgaXRzIGBt
        b2RlbGAgY29udGV4dCBvZiB0aGUgcm91dGUuIFRoZSBibG9jawogICAgZm9y
        IGB7e2xpbmstdG99fWAgYmVjb21lcyB0aGUgaW5uZXJIVE1MIG9mIHRoZSBy
        ZW5kZXJlZAogICAgZWxlbWVudDoKCiAgICBgYGBoYW5kbGViYXJzCiAgICB7
        eyNsaW5rLXRvICdwaG90b0dhbGxlcnknfX0KICAgICAgR3JlYXQgSGFtc3Rl
        ciBQaG90b3MKICAgIHt7L2xpbmstdG99fQogICAgYGBgCgogICAgYGBgaHRt
        bAogICAgPGEgaHJlZj0iL2hhbXN0ZXItcGhvdG9zIj4KICAgICAgR3JlYXQg
        SGFtc3RlciBQaG90b3MKICAgIDwvYT4KICAgIGBgYAoKICAgICMjIyBTdXBw
        bHlpbmcgYSB0YWdOYW1lCiAgICBCeSBkZWZhdWx0IGB7e2xpbmstdG99fWAg
        cmVuZGVycyBhbiBgPGE+YCBlbGVtZW50LiBUaGlzIGNhbgogICAgYmUgb3Zl
        cnJpZGRlbiBmb3IgYSBzaW5nbGUgdXNlIG9mIGB7e2xpbmstdG99fWAgYnkg
        c3VwcGx5aW5nCiAgICBhIGB0YWdOYW1lYCBvcHRpb246CgogICAgYGBgaGFu
        ZGxlYmFycwogICAge3sjbGluay10byAncGhvdG9HYWxsZXJ5JyB0YWdOYW1l
        PSJsaSJ9fQogICAgICBHcmVhdCBIYW1zdGVyIFBob3RvcwogICAge3svbGlu
        ay10b319CiAgICBgYGAKCiAgICBgYGBodG1sCiAgICA8bGk+CiAgICAgIEdy
        ZWF0IEhhbXN0ZXIgUGhvdG9zCiAgICA8L2xpPgogICAgYGBgCgogICAgVG8g
        b3ZlcnJpZGUgdGhpcyBvcHRpb24gZm9yIHlvdXIgZW50aXJlIGFwcGxpY2F0
        aW9uLCBzZWUKICAgICJPdmVycmlkaW5nIEFwcGxpY2F0aW9uLXdpZGUgRGVm
        YXVsdHMiLgoKICAgICMjIyBEaXNhYmxpbmcgdGhlIGBsaW5rLXRvYCBoZWxw
        ZXIKICAgIEJ5IGRlZmF1bHQgYHt7bGluay10b319YCBpcyBlbmFibGVkLgog
        ICAgYW55IHBhc3NlZCB2YWx1ZSB0byBgZGlzYWJsZWRgIGhlbHBlciBwcm9w
        ZXJ0eSB3aWxsIGRpc2FibGUgdGhlIGBsaW5rLXRvYCBoZWxwZXIuCgogICAg
        c3RhdGljIHVzZTogdGhlIGBkaXNhYmxlZGAgb3B0aW9uOgoKICAgIGBgYGhh
        bmRsZWJhcnMKICAgIHt7I2xpbmstdG8gJ3Bob3RvR2FsbGVyeScgZGlzYWJs
        ZWQ9dHJ1ZX19CiAgICAgIEdyZWF0IEhhbXN0ZXIgUGhvdG9zCiAgICB7ey9s
        aW5rLXRvfX0KICAgIGBgYAoKICAgIGR5bmFtaWMgdXNlOiB0aGUgYGRpc2Fi
        bGVkV2hlbmAgb3B0aW9uOgoKICAgIGBgYGhhbmRsZWJhcnMKICAgIHt7I2xp
        bmstdG8gJ3Bob3RvR2FsbGVyeScgZGlzYWJsZWRXaGVuPWNvbnRyb2xsZXIu
        c29tZVByb3BlcnR5fX0KICAgICAgR3JlYXQgSGFtc3RlciBQaG90b3MKICAg
        IHt7L2xpbmstdG99fQogICAgYGBgCgogICAgYW55IHBhc3NlZCB2YWx1ZSB0
        byBgZGlzYWJsZWRgIHdpbGwgZGlzYWJsZSBpdCBleGNlcHQgYHVuZGVmaW5l
        ZGAuCiAgICB0byBlbnN1cmUgdGhhdCBvbmx5IGB0cnVlYCBkaXNhYmxlIHRo
        ZSBgbGluay10b2AgaGVscGVyIHlvdSBjYW4KICAgIG92ZXJyaWRlIHRoZSBn
        bG9iYWwgYmVoYXZpb3VyIG9mIGBFbWJlci5MaW5rVmlld2AuCgogICAgYGBg
        amF2YXNjcmlwdAogICAgRW1iZXIuTGlua1ZpZXcucmVvcGVuKHsKICAgICAg
        ZGlzYWJsZWQ6IEVtYmVyLmNvbXB1dGVkKGZ1bmN0aW9uKGtleSwgdmFsdWUp
        IHsKICAgICAgICBpZiAodmFsdWUgIT09IHVuZGVmaW5lZCkgewogICAgICAg
        ICAgdGhpcy5zZXQoJ19pc0Rpc2FibGVkJywgdmFsdWUgPT09IHRydWUpOwog
        ICAgICAgIH0KICAgICAgICByZXR1cm4gdmFsdWUgPT09IHRydWUgPyBnZXQo
        dGhpcywgJ2Rpc2FibGVkQ2xhc3MnKSA6IGZhbHNlOwogICAgICB9KQogICAg
        fSk7CiAgICBgYGAKCiAgICBzZWUgIk92ZXJyaWRpbmcgQXBwbGljYXRpb24t
        d2lkZSBEZWZhdWx0cyIgZm9yIG1vcmUuCgogICAgIyMjIEhhbmRsaW5nIGBo
        cmVmYAogICAgYHt7bGluay10b319YCB3aWxsIHVzZSB5b3VyIGFwcGxpY2F0
        aW9uJ3MgUm91dGVyIHRvCiAgICBmaWxsIHRoZSBlbGVtZW50J3MgYGhyZWZg
        IHByb3BlcnR5IHdpdGggYSB1cmwgdGhhdAogICAgbWF0Y2hlcyB0aGUgcGF0
        aCB0byB0aGUgc3VwcGxpZWQgYHJvdXRlTmFtZWAgZm9yIHlvdXIKICAgIHJv
        dXRlcnMncyBjb25maWd1cmVkIGBMb2NhdGlvbmAgc2NoZW1lLCB3aGljaCBk
        ZWZhdWx0cwogICAgdG8gRW1iZXIuSGFzaExvY2F0aW9uLgoKICAgICMjIyBI
        YW5kbGluZyBjdXJyZW50IHJvdXRlCiAgICBge3tsaW5rLXRvfX1gIHdpbGwg
        YXBwbHkgYSBDU1MgY2xhc3MgbmFtZSBvZiAnYWN0aXZlJwogICAgd2hlbiB0
        aGUgYXBwbGljYXRpb24ncyBjdXJyZW50IHJvdXRlIG1hdGNoZXMKICAgIHRo
        ZSBzdXBwbGllZCByb3V0ZU5hbWUuIEZvciBleGFtcGxlLCBpZiB0aGUgYXBw
        bGljYXRpb24ncwogICAgY3VycmVudCByb3V0ZSBpcyAncGhvdG9HYWxsZXJ5
        LnJlY2VudCcgdGhlIGZvbGxvd2luZwogICAgdXNlIG9mIGB7e2xpbmstdG99
        fWA6CgogICAgYGBgaGFuZGxlYmFycwogICAge3sjbGluay10byAncGhvdG9H
        YWxsZXJ5LnJlY2VudCd9fQogICAgICBHcmVhdCBIYW1zdGVyIFBob3RvcyBm
        cm9tIHRoZSBsYXN0IHdlZWsKICAgIHt7L2xpbmstdG99fQogICAgYGBgCgog
        ICAgd2lsbCByZXN1bHQgaW4KCiAgICBgYGBodG1sCiAgICA8YSBocmVmPSIv
        aGFtc3Rlci1waG90b3MvdGhpcy13ZWVrIiBjbGFzcz0iYWN0aXZlIj4KICAg
        ICAgR3JlYXQgSGFtc3RlciBQaG90b3MKICAgIDwvYT4KICAgIGBgYAoKICAg
        IFRoZSBDU1MgY2xhc3MgbmFtZSB1c2VkIGZvciBhY3RpdmUgY2xhc3NlcyBj
        YW4gYmUgY3VzdG9taXplZAogICAgZm9yIGEgc2luZ2xlIHVzZSBvZiBge3ts
        aW5rLXRvfX1gIGJ5IHBhc3NpbmcgYW4gYGFjdGl2ZUNsYXNzYAogICAgb3B0
        aW9uOgoKICAgIGBgYGhhbmRsZWJhcnMKICAgIHt7I2xpbmstdG8gJ3Bob3Rv
        R2FsbGVyeS5yZWNlbnQnIGFjdGl2ZUNsYXNzPSJjdXJyZW50LXVybCJ9fQog
        ICAgICBHcmVhdCBIYW1zdGVyIFBob3RvcyBmcm9tIHRoZSBsYXN0IHdlZWsK
        ICAgIHt7L2xpbmstdG99fQogICAgYGBgCgogICAgYGBgaHRtbAogICAgPGEg
        aHJlZj0iL2hhbXN0ZXItcGhvdG9zL3RoaXMtd2VlayIgY2xhc3M9ImN1cnJl
        bnQtdXJsIj4KICAgICAgR3JlYXQgSGFtc3RlciBQaG90b3MKICAgIDwvYT4K
        ICAgIGBgYAoKICAgIFRvIG92ZXJyaWRlIHRoaXMgb3B0aW9uIGZvciB5b3Vy
        IGVudGlyZSBhcHBsaWNhdGlvbiwgc2VlCiAgICAiT3ZlcnJpZGluZyBBcHBs
        aWNhdGlvbi13aWRlIERlZmF1bHRzIi4KCiAgICAjIyMgU3VwcGx5aW5nIGEg
        bW9kZWwKICAgIEFuIG9wdGlvbmFsIG1vZGVsIGFyZ3VtZW50IGNhbiBiZSB1
        c2VkIGZvciByb3V0ZXMgd2hvc2UKICAgIHBhdGhzIGNvbnRhaW4gZHluYW1p
        YyBzZWdtZW50cy4gVGhpcyBhcmd1bWVudCB3aWxsIGJlY29tZQogICAgdGhl
        IG1vZGVsIGNvbnRleHQgb2YgdGhlIGxpbmtlZCByb3V0ZToKCiAgICBgYGBq
        YXZhc2NyaXB0CiAgICBBcHAuUm91dGVyLm1hcChmdW5jdGlvbigpIHsKICAg
        ICAgdGhpcy5yZXNvdXJjZSgicGhvdG9HYWxsZXJ5Iiwge3BhdGg6ICJoYW1z
        dGVyLXBob3Rvcy86cGhvdG9faWQifSk7CiAgICB9KTsKICAgIGBgYAoKICAg
        IGBgYGhhbmRsZWJhcnMKICAgIHt7I2xpbmstdG8gJ3Bob3RvR2FsbGVyeScg
        YVBob3RvfX0KICAgICAge3thUGhvdG8udGl0bGV9fQogICAge3svbGluay10
        b319CiAgICBgYGAKCiAgICBgYGBodG1sCiAgICA8YSBocmVmPSIvaGFtc3Rl
        ci1waG90b3MvNDIiPgogICAgICBUb21zdGVyCiAgICA8L2E+CiAgICBgYGAK
        CiAgICAjIyMgU3VwcGx5aW5nIG11bHRpcGxlIG1vZGVscwogICAgRm9yIGRl
        ZXAtbGlua2luZyB0byByb3V0ZSBwYXRocyB0aGF0IGNvbnRhaW4gbXVsdGlw
        bGUKICAgIGR5bmFtaWMgc2VnbWVudHMsIG11bHRpcGxlIG1vZGVsIGFyZ3Vt
        ZW50cyBjYW4gYmUgdXNlZC4KICAgIEFzIHRoZSByb3V0ZXIgdHJhbnNpdGlv
        bnMgdGhyb3VnaCB0aGUgcm91dGUgcGF0aCwgZWFjaAogICAgc3VwcGxpZWQg
        bW9kZWwgYXJndW1lbnQgd2lsbCBiZWNvbWUgdGhlIGNvbnRleHQgZm9yIHRo
        ZQogICAgcm91dGUgd2l0aCB0aGUgZHluYW1pYyBzZWdtZW50czoKCiAgICBg
        YGBqYXZhc2NyaXB0CiAgICBBcHAuUm91dGVyLm1hcChmdW5jdGlvbigpIHsK
        ICAgICAgdGhpcy5yZXNvdXJjZSgicGhvdG9HYWxsZXJ5Iiwge3BhdGg6ICJo
        YW1zdGVyLXBob3Rvcy86cGhvdG9faWQifSwgZnVuY3Rpb24oKSB7CiAgICAg
        ICAgdGhpcy5yb3V0ZSgiY29tbWVudCIsIHtwYXRoOiAiY29tbWVudHMvOmNv
        bW1lbnRfaWQifSk7CiAgICAgIH0pOwogICAgfSk7CiAgICBgYGAKICAgIFRo
        aXMgYXJndW1lbnQgd2lsbCBiZWNvbWUgdGhlIG1vZGVsIGNvbnRleHQgb2Yg
        dGhlIGxpbmtlZCByb3V0ZToKCiAgICBgYGBoYW5kbGViYXJzCiAgICB7eyNs
        aW5rLXRvICdwaG90b0dhbGxlcnkuY29tbWVudCcgYVBob3RvIGNvbW1lbnR9
        fQogICAgICB7e2NvbW1lbnQuYm9keX19CiAgICB7ey9saW5rLXRvfX0KICAg
        IGBgYAoKICAgIGBgYGh0bWwKICAgIDxhIGhyZWY9Ii9oYW1zdGVyLXBob3Rv
        cy80Mi9jb21tZW50LzcxOCI+CiAgICAgIEErKysgd291bGQgc251Z2dsZSBh
        Z2Fpbi4KICAgIDwvYT4KICAgIGBgYAoKICAgICMjIyBTdXBwbHlpbmcgYW4g
        ZXhwbGljaXQgZHluYW1pYyBzZWdtZW50IHZhbHVlCiAgICBJZiB5b3UgZG9u
        J3QgaGF2ZSBhIG1vZGVsIG9iamVjdCBhdmFpbGFibGUgdG8gcGFzcyB0byBg
        e3tsaW5rLXRvfX1gLAogICAgYW4gb3B0aW9uYWwgc3RyaW5nIG9yIGludGVn
        ZXIgYXJndW1lbnQgY2FuIGJlIHBhc3NlZCBmb3Igcm91dGVzIHdob3NlCiAg
        ICBwYXRocyBjb250YWluIGR5bmFtaWMgc2VnbWVudHMuIFRoaXMgYXJndW1l
        bnQgd2lsbCBiZWNvbWUgdGhlIHZhbHVlCiAgICBvZiB0aGUgZHluYW1pYyBz
        ZWdtZW50OgoKICAgIGBgYGphdmFzY3JpcHQKICAgIEFwcC5Sb3V0ZXIubWFw
        KGZ1bmN0aW9uKCkgewogICAgICB0aGlzLnJlc291cmNlKCJwaG90b0dhbGxl
        cnkiLCB7cGF0aDogImhhbXN0ZXItcGhvdG9zLzpwaG90b19pZCJ9KTsKICAg
        IH0pOwogICAgYGBgCgogICAgYGBgaGFuZGxlYmFycwogICAge3sjbGluay10
        byAncGhvdG9HYWxsZXJ5JyBhUGhvdG9JZH19CiAgICAgIHt7YVBob3RvLnRp
        dGxlfX0KICAgIHt7L2xpbmstdG99fQogICAgYGBgCgogICAgYGBgaHRtbAog
        ICAgPGEgaHJlZj0iL2hhbXN0ZXItcGhvdG9zLzQyIj4KICAgICAgVG9tc3Rl
        cgogICAgPC9hPgogICAgYGBgCgogICAgV2hlbiB0cmFuc2l0aW9uaW5nIGlu
        dG8gdGhlIGxpbmtlZCByb3V0ZSwgdGhlIGBtb2RlbGAgaG9vayB3aWxsCiAg
        ICBiZSB0cmlnZ2VyZWQgd2l0aCBwYXJhbWV0ZXJzIGluY2x1ZGluZyB0aGlz
        IHBhc3NlZCBpZGVudGlmaWVyLgoKICAgICMjIyBBbGxvd2luZyBEZWZhdWx0
        IEFjdGlvbgoKICAgQnkgZGVmYXVsdCB0aGUgYHt7bGluay10b319YCBoZWxw
        ZXIgcHJldmVudHMgdGhlIGRlZmF1bHQgYnJvd3NlciBhY3Rpb24KICAgYnkg
        Y2FsbGluZyBgcHJldmVudERlZmF1bHQoKWAgYXMgdGhpcyBzb3J0IG9mIGFj
        dGlvbiBidWJibGluZyBpcyBub3JtYWxseQogICBoYW5kbGVkIGludGVybmFs
        bHkgYW5kIHdlIGRvIG5vdCB3YW50IHRvIHRha2UgdGhlIGJyb3dzZXIgdG8g
        YSBuZXcgVVJMIChmb3IKICAgZXhhbXBsZSkuCgogICBJZiB5b3UgbmVlZCB0
        byBvdmVycmlkZSB0aGlzIGJlaGF2aW9yIHNwZWNpZnkgYHByZXZlbnREZWZh
        dWx0PWZhbHNlYCBpbgogICB5b3VyIHRlbXBsYXRlOgoKICAgIGBgYGhhbmRs
        ZWJhcnMKICAgIHt7I2xpbmstdG8gJ3Bob3RvR2FsbGVyeScgYVBob3RvSWQg
        cHJldmVudERlZmF1bHQ9ZmFsc2V9fQogICAgICB7e2FQaG90b0lkLnRpdGxl
        fX0KICAgIHt7L2xpbmstdG99fQogICAgYGBgCgogICAgIyMjIE92ZXJyaWRp
        bmcgYXR0cmlidXRlcwogICAgWW91IGNhbiBvdmVycmlkZSBhbnkgZ2l2ZW4g
        cHJvcGVydHkgb2YgdGhlIEVtYmVyLkxpbmtWaWV3CiAgICB0aGF0IGlzIGdl
        bmVyYXRlZCBieSB0aGUgYHt7bGluay10b319YCBoZWxwZXIgYnkgcGFzc2lu
        ZwogICAga2V5L3ZhbHVlIHBhaXJzLCBsaWtlIHNvOgoKICAgIGBgYGhhbmRs
        ZWJhcnMKICAgIHt7I2xpbmstdG8gIGFQaG90byB0YWdOYW1lPSdsaScgdGl0
        bGU9J0ZvbGxvd2luZyB0aGlzIGxpbmsgd2lsbCBjaGFuZ2UgeW91ciBsaWZl
        JyBjbGFzc05hbWVzPSdwaWMgc3dlZXQnfX0KICAgICAgVWgtbWF6aW5nIQog
        ICAge3svbGluay10b319CiAgICBgYGAKCiAgICBTZWUgW0VtYmVyLkxpbmtW
        aWV3XSgvYXBpL2NsYXNzZXMvRW1iZXIuTGlua1ZpZXcuaHRtbCkgZm9yIGEK
        ICAgIGNvbXBsZXRlIGxpc3Qgb2Ygb3ZlcnJpZGVhYmxlIHByb3BlcnRpZXMu
        IEJlIHN1cmUgdG8gYWxzbwogICAgY2hlY2sgb3V0IGluaGVyaXRlZCBwcm9w
        ZXJ0aWVzIG9mIGBMaW5rVmlld2AuCgogICAgIyMjIE92ZXJyaWRpbmcgQXBw
        bGljYXRpb24td2lkZSBEZWZhdWx0cwogICAgYGB7e2xpbmstdG99fWBgIGNy
        ZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgRW1iZXIuTGlua1ZpZXcKICAgIGZvciBy
        ZW5kZXJpbmcuIFRvIG92ZXJyaWRlIG9wdGlvbnMgZm9yIHlvdXIgZW50aXJl
        CiAgICBhcHBsaWNhdGlvbiwgcmVvcGVuIEVtYmVyLkxpbmtWaWV3IGFuZCBz
        dXBwbHkgdGhlCiAgICBkZXNpcmVkIHZhbHVlczoKCiAgICBgYGAgamF2YXNj
        cmlwdAogICAgRW1iZXIuTGlua1ZpZXcucmVvcGVuKHsKICAgICAgYWN0aXZl
        Q2xhc3M6ICJpcy1hY3RpdmUiLAogICAgICB0YWdOYW1lOiAnbGknCiAgICB9
        KQogICAgYGBgCgogICAgSXQgaXMgYWxzbyBwb3NzaWJsZSB0byBvdmVycmlk
        ZSB0aGUgZGVmYXVsdCBldmVudCBpbgogICAgdGhpcyBtYW5uZXI6CgogICAg
        YGBgIGphdmFzY3JpcHQKICAgIEVtYmVyLkxpbmtWaWV3LnJlb3Blbih7CiAg
        ICAgIGV2ZW50TmFtZTogJ2N1c3RvbUV2ZW50TmFtZScKICAgIH0pOwogICAg
        YGBgCgogICAgQG1ldGhvZCBsaW5rLXRvCiAgICBAZm9yIEVtYmVyLkhhbmRs
        ZWJhcnMuaGVscGVycwogICAgQHBhcmFtIHtTdHJpbmd9IHJvdXRlTmFtZQog
        ICAgQHBhcmFtIHtPYmplY3R9IFtjb250ZXh0XSoKICAgIEBwYXJhbSBbb3B0
        aW9uc10ge09iamVjdH0gSGFuZGxlYmFycyBrZXkvdmFsdWUgcGFpcnMgb2Yg
        b3B0aW9ucywgeW91IGNhbiBvdmVycmlkZSBhbnkgcHJvcGVydHkgb2YgRW1i
        ZXIuTGlua1ZpZXcKICAgIEByZXR1cm4ge1N0cmluZ30gSFRNTCBzdHJpbmcK
        ICAgIEBzZWUge0VtYmVyLkxpbmtWaWV3fQogICovCiAgRW1iZXIuSGFuZGxl
        YmFycy5yZWdpc3RlckhlbHBlcignbGluay10bycsIGZ1bmN0aW9uIGxpbmtU
        b0hlbHBlcihuYW1lKSB7CiAgICB2YXIgb3B0aW9ucyA9IHNsaWNlLmNhbGwo
        YXJndW1lbnRzLCAtMSlbMF0sCiAgICAgICAgcGFyYW1zID0gc2xpY2UuY2Fs
        bChhcmd1bWVudHMsIDAsIC0xKSwKICAgICAgICBoYXNoID0gb3B0aW9ucy5o
        YXNoOwoKICAgIGlmIChwYXJhbXNbcGFyYW1zLmxlbmd0aCAtIDFdIGluc3Rh
        bmNlb2YgUXVlcnlQYXJhbXMpIHsKICAgICAgaGFzaC5xdWVyeVBhcmFtc09i
        amVjdCA9IHBhcmFtcy5wb3AoKTsKICAgIH0KCiAgICBoYXNoLmRpc2FibGVk
        QmluZGluZyA9IGhhc2guZGlzYWJsZWRXaGVuOwoKICAgIGlmICghb3B0aW9u
        cy5mbikgewogICAgICB2YXIgbGlua1RpdGxlID0gcGFyYW1zLnNoaWZ0KCk7
        CiAgICAgIHZhciBsaW5rVHlwZSA9IG9wdGlvbnMudHlwZXMuc2hpZnQoKTsK
        ICAgICAgdmFyIGNvbnRleHQgPSB0aGlzOwogICAgICBpZiAobGlua1R5cGUg
        PT09ICdJRCcpIHsKICAgICAgICBvcHRpb25zLmxpbmtUZXh0UGF0aCA9IGxp
        bmtUaXRsZTsKICAgICAgICBvcHRpb25zLmZuID0gZnVuY3Rpb24oKSB7CiAg
        ICAgICAgICByZXR1cm4gRW1iZXIuSGFuZGxlYmFycy5nZXRFc2NhcGVkKGNv
        bnRleHQsIGxpbmtUaXRsZSwgb3B0aW9ucyk7CiAgICAgICAgfTsKICAgICAg
        fSBlbHNlIHsKICAgICAgICBvcHRpb25zLmZuID0gZnVuY3Rpb24oKSB7CiAg
        ICAgICAgICByZXR1cm4gbGlua1RpdGxlOwogICAgICAgIH07CiAgICAgIH0K
        ICAgIH0KCiAgICBoYXNoLnBhcmFtZXRlcnMgPSB7CiAgICAgIGNvbnRleHQ6
        IHRoaXMsCiAgICAgIG9wdGlvbnM6IG9wdGlvbnMsCiAgICAgIHBhcmFtczog
        cGFyYW1zCiAgICB9OwoKICAgIHJldHVybiBFbWJlci5IYW5kbGViYXJzLmhl
        bHBlcnMudmlldy5jYWxsKHRoaXMsIExpbmtWaWV3LCBvcHRpb25zKTsKICB9
        KTsKCgogIAogIC8qKgogICAgU2VlIFtsaW5rLXRvXSgvYXBpL2NsYXNzZXMv
        RW1iZXIuSGFuZGxlYmFycy5oZWxwZXJzLmh0bWwjbWV0aG9kX2xpbmstdG8p
        CgogICAgQG1ldGhvZCBsaW5rVG8KICAgIEBmb3IgRW1iZXIuSGFuZGxlYmFy
        cy5oZWxwZXJzCiAgICBAZGVwcmVjYXRlZAogICAgQHBhcmFtIHtTdHJpbmd9
        IHJvdXRlTmFtZQogICAgQHBhcmFtIHtPYmplY3R9IFtjb250ZXh0XSoKICAg
        IEByZXR1cm4ge1N0cmluZ30gSFRNTCBzdHJpbmcKICAqLwogIEVtYmVyLkhh
        bmRsZWJhcnMucmVnaXN0ZXJIZWxwZXIoJ2xpbmtUbycsIGZ1bmN0aW9uIGxp
        bmtUb0hlbHBlcigpIHsKICAgIEVtYmVyLndhcm4oIlRoZSAnbGlua1RvJyB2
        aWV3IGhlbHBlciBpcyBkZXByZWNhdGVkIGluIGZhdm9yIG9mICdsaW5rLXRv
        JyIpOwogICAgcmV0dXJuIEVtYmVyLkhhbmRsZWJhcnMuaGVscGVyc1snbGlu
        ay10byddLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgfSk7Cn0pOwoKCgp9
        KSgpOwoKCgooZnVuY3Rpb24oKSB7Ci8qKgpAbW9kdWxlIGVtYmVyCkBzdWJt
        b2R1bGUgZW1iZXItcm91dGluZwoqLwoKdmFyIGdldCA9IEVtYmVyLmdldCwg
        c2V0ID0gRW1iZXIuc2V0OwpFbWJlci5vbkxvYWQoJ0VtYmVyLkhhbmRsZWJh
        cnMnLCBmdW5jdGlvbihIYW5kbGViYXJzKSB7CiAgLyoqCiAgQG1vZHVsZSBl
        bWJlcgogIEBzdWJtb2R1bGUgZW1iZXItcm91dGluZwogICovCgogIEhhbmRs
        ZWJhcnMuT3V0bGV0VmlldyA9IEVtYmVyLkNvbnRhaW5lclZpZXcuZXh0ZW5k
        KEVtYmVyLl9NZXRhbW9ycGgpOwoKICAvKioKICAgIFRoZSBgb3V0bGV0YCBo
        ZWxwZXIgaXMgYSBwbGFjZWhvbGRlciB0aGF0IHRoZSByb3V0ZXIgd2lsbCBm
        aWxsIGluIHdpdGgKICAgIHRoZSBhcHByb3ByaWF0ZSB0ZW1wbGF0ZSBiYXNl
        ZCBvbiB0aGUgY3VycmVudCBzdGF0ZSBvZiB0aGUgYXBwbGljYXRpb24uCgog
        ICAgYGBgIGhhbmRsZWJhcnMKICAgIHt7b3V0bGV0fX0KICAgIGBgYAoKICAg
        IEJ5IGRlZmF1bHQsIGEgdGVtcGxhdGUgYmFzZWQgb24gRW1iZXIncyBuYW1p
        bmcgY29udmVudGlvbnMgd2lsbCBiZSByZW5kZXJlZAogICAgaW50byB0aGUg
        YG91dGxldGAgKGUuZy4gYEFwcC5Qb3N0c1JvdXRlYCB3aWxsIHJlbmRlciB0
        aGUgYHBvc3RzYCB0ZW1wbGF0ZSkuCgogICAgWW91IGNhbiByZW5kZXIgYSBk
        aWZmZXJlbnQgdGVtcGxhdGUgYnkgdXNpbmcgdGhlIGByZW5kZXIoKWAgbWV0
        aG9kIGluIHRoZQogICAgcm91dGUncyBgcmVuZGVyVGVtcGxhdGVgIGhvb2su
        IFRoZSBmb2xsb3dpbmcgd2lsbCByZW5kZXIgdGhlIGBmYXZvcml0ZVBvc3Rg
        CiAgICB0ZW1wbGF0ZSBpbnRvIHRoZSBgb3V0bGV0YC4KCiAgICBgYGAgamF2
        YXNjcmlwdAogICAgQXBwLlBvc3RzUm91dGUgPSBFbWJlci5Sb3V0ZS5leHRl
        bmQoewogICAgICByZW5kZXJUZW1wbGF0ZTogZnVuY3Rpb24oKSB7CiAgICAg
        ICAgdGhpcy5yZW5kZXIoJ2Zhdm9yaXRlUG9zdCcpOwogICAgICB9CiAgICB9
        KTsKICAgIGBgYAoKICAgIFlvdSBjYW4gY3JlYXRlIGN1c3RvbSBuYW1lZCBv
        dXRsZXRzIGZvciBtb3JlIGNvbnRyb2wuCgogICAgYGBgIGhhbmRsZWJhcnMK
        ICAgIHt7b3V0bGV0ICdmYXZvcml0ZVBvc3QnfX0KICAgIHt7b3V0bGV0ICdw
        b3N0cyd9fQogICAgYGBgCgogICAgVGhlbiB5b3UgY2FuIGRlZmluZSB3aGF0
        IHRlbXBsYXRlIGlzIHJlbmRlcmVkIGludG8gZWFjaCBvdXRsZXQgaW4geW91
        cgogICAgcm91dGUuCgoKICAgIGBgYCBqYXZhc2NyaXB0CiAgICBBcHAuUG9z
        dHNSb3V0ZSA9IEVtYmVyLlJvdXRlLmV4dGVuZCh7CiAgICAgIHJlbmRlclRl
        bXBsYXRlOiBmdW5jdGlvbigpIHsKICAgICAgICB0aGlzLnJlbmRlcignZmF2
        b3JpdGVQb3N0JywgeyBvdXRsZXQ6ICdmYXZvcml0ZVBvc3QnIH0pOwogICAg
        ICAgIHRoaXMucmVuZGVyKCdwb3N0cycsIHsgb3V0bGV0OiAncG9zdHMnIH0p
        OwogICAgICB9CiAgICB9KTsKICAgIGBgYAoKICAgIFlvdSBjYW4gc3BlY2lm
        eSB0aGUgdmlldyB0aGF0IHRoZSBvdXRsZXQgdXNlcyB0byBjb250YWluIGFu
        ZCBtYW5hZ2UgdGhlCiAgICB0ZW1wbGF0ZXMgcmVuZGVyZWQgaW50byBpdC4K
        CiAgICBgYGAgaGFuZGxlYmFycwogICAge3tvdXRsZXQgdmlldz0nc2VjdGlv
        bkNvbnRhaW5lcid9fQogICAgYGBgCgogICAgYGBgIGphdmFzY3JpcHQKICAg
        IEFwcC5TZWN0aW9uQ29udGFpbmVyID0gRW1iZXIuQ29udGFpbmVyVmlldy5l
        eHRlbmQoewogICAgICB0YWdOYW1lOiAnc2VjdGlvbicsCiAgICAgIGNsYXNz
        TmFtZXM6IFsnc3BlY2lhbCddCiAgICB9KTsKICAgIGBgYAoKICAgIEBtZXRo
        b2Qgb3V0bGV0CiAgICBAZm9yIEVtYmVyLkhhbmRsZWJhcnMuaGVscGVycwog
        ICAgQHBhcmFtIHtTdHJpbmd9IHByb3BlcnR5IHRoZSBwcm9wZXJ0eSBvbiB0
        aGUgY29udHJvbGxlcgogICAgICB0aGF0IGhvbGRzIHRoZSB2aWV3IGZvciB0
        aGlzIG91dGxldAogICAgQHJldHVybiB7U3RyaW5nfSBIVE1MIHN0cmluZwog
        ICovCiAgSGFuZGxlYmFycy5yZWdpc3RlckhlbHBlcignb3V0bGV0JywgZnVu
        Y3Rpb24gb3V0bGV0SGVscGVyKHByb3BlcnR5LCBvcHRpb25zKSB7CiAgIAog
        ICAgdmFyIG91dGxldFNvdXJjZSwKICAgICAgICBjb250YWluZXIsCiAgICAg
        ICAgdmlld05hbWUsCiAgICAgICAgdmlld0NsYXNzLAogICAgICAgIHZpZXdG
        dWxsTmFtZTsKCiAgICBpZiAocHJvcGVydHkgJiYgcHJvcGVydHkuZGF0YSAm
        JiBwcm9wZXJ0eS5kYXRhLmlzUmVuZGVyRGF0YSkgewogICAgICBvcHRpb25z
        ID0gcHJvcGVydHk7CiAgICAgIHByb3BlcnR5ID0gJ21haW4nOwogICAgfQoK
        ICAgIGNvbnRhaW5lciA9IG9wdGlvbnMuZGF0YS52aWV3LmNvbnRhaW5lcjsK
        CiAgICBvdXRsZXRTb3VyY2UgPSBvcHRpb25zLmRhdGEudmlldzsKICAgIHdo
        aWxlICghb3V0bGV0U291cmNlLmdldCgndGVtcGxhdGUuaXNUb3AnKSkgewog
        ICAgICBvdXRsZXRTb3VyY2UgPSBvdXRsZXRTb3VyY2UuZ2V0KCdfcGFyZW50
        VmlldycpOwogICAgfQoKICAgIC8vIHByb3ZpZGUgY29udHJvbGxlciBvdmVy
        cmlkZQogICAgdmlld05hbWUgPSBvcHRpb25zLmhhc2gudmlldzsKCiAgICBp
        ZiAodmlld05hbWUpIHsKICAgICAgdmlld0Z1bGxOYW1lID0gJ3ZpZXc6JyAr
        IHZpZXdOYW1lOwogICAgICBFbWJlci5hc3NlcnQoIlVzaW5nIGEgcXVvdGVs
        ZXNzIHZpZXcgcGFyYW1ldGVyIHdpdGgge3tvdXRsZXR9fSBpcyBub3Qgc3Vw
        cG9ydGVkLiBQbGVhc2UgdXBkYXRlIHRvIHF1b3RlZCB1c2FnZSAne3tvdXRs
        ZXQgXCIiICsgdmlld05hbWUgKyAiXCJ9fS4iLCBvcHRpb25zLmhhc2hUeXBl
        cy52aWV3ICE9PSAnSUQnKTsKICAgICAgRW1iZXIuYXNzZXJ0KCJUaGUgdmll
        dyBuYW1lIHlvdSBzdXBwbGllZCAnIiArIHZpZXdOYW1lICsgIicgZGlkIG5v
        dCByZXNvbHZlIHRvIGEgdmlldy4iLCBjb250YWluZXIuaGFzKHZpZXdGdWxs
        TmFtZSkpOwogICAgfQoKICAgIHZpZXdDbGFzcyA9IHZpZXdOYW1lID8gY29u
        dGFpbmVyLmxvb2t1cEZhY3Rvcnkodmlld0Z1bGxOYW1lKSA6IG9wdGlvbnMu
        aGFzaC52aWV3Q2xhc3MgfHwgSGFuZGxlYmFycy5PdXRsZXRWaWV3OwoKICAg
        IG9wdGlvbnMuZGF0YS52aWV3LnNldCgnb3V0bGV0U291cmNlJywgb3V0bGV0
        U291cmNlKTsKICAgIG9wdGlvbnMuaGFzaC5jdXJyZW50Vmlld0JpbmRpbmcg
        PSAnX3ZpZXcub3V0bGV0U291cmNlLl9vdXRsZXRzLicgKyBwcm9wZXJ0eTsK
        CiAgICByZXR1cm4gSGFuZGxlYmFycy5oZWxwZXJzLnZpZXcuY2FsbCh0aGlz
        LCB2aWV3Q2xhc3MsIG9wdGlvbnMpOwogIH0pOwp9KTsKCn0pKCk7CgoKCihm
        dW5jdGlvbigpIHsKLyoqCkBtb2R1bGUgZW1iZXIKQHN1Ym1vZHVsZSBlbWJl
        ci1yb3V0aW5nCiovCgp2YXIgZ2V0ID0gRW1iZXIuZ2V0LCBzZXQgPSBFbWJl
        ci5zZXQ7CkVtYmVyLm9uTG9hZCgnRW1iZXIuSGFuZGxlYmFycycsIGZ1bmN0
        aW9uKEhhbmRsZWJhcnMpIHsKCiAgLyoqCiAgICBDYWxsaW5nIGBge3tyZW5k
        ZXJ9fWBgIGZyb20gd2l0aGluIGEgdGVtcGxhdGUgd2lsbCBpbnNlcnQgYW5v
        dGhlcgogICAgdGVtcGxhdGUgdGhhdCBtYXRjaGVzIHRoZSBwcm92aWRlZCBu
        YW1lLiBUaGUgaW5zZXJ0ZWQgdGVtcGxhdGUgd2lsbAogICAgYWNjZXNzIGl0
        cyBwcm9wZXJ0aWVzIG9uIGl0cyBvd24gY29udHJvbGxlciAocmF0aGVyIHRo
        YW4gdGhlIGNvbnRyb2xsZXIKICAgIG9mIHRoZSBwYXJlbnQgdGVtcGxhdGUp
        LgoKICAgIElmIGEgdmlldyBjbGFzcyB3aXRoIHRoZSBzYW1lIG5hbWUgZXhp
        c3RzLCB0aGUgdmlldyBjbGFzcyBhbHNvIHdpbGwgYmUgdXNlZC4KCiAgICBO
        b3RlOiBBIGdpdmVuIGNvbnRyb2xsZXIgbWF5IG9ubHkgYmUgdXNlZCAqb25j
        ZSogaW4geW91ciBhcHAgaW4gdGhpcyBtYW5uZXIuCiAgICBBIHNpbmdsZXRv
        biBpbnN0YW5jZSBvZiB0aGUgY29udHJvbGxlciB3aWxsIGJlIGNyZWF0ZWQg
        Zm9yIHlvdS4KCiAgICBFeGFtcGxlOgoKICAgIGBgYGphdmFzY3JpcHQKICAg
        IEFwcC5OYXZpZ2F0aW9uQ29udHJvbGxlciA9IEVtYmVyLkNvbnRyb2xsZXIu
        ZXh0ZW5kKHsKICAgICAgd2hvOiAid29ybGQiCiAgICB9KTsKICAgIGBgYAoK
        ICAgIGBgYGhhbmRsZWJhcnMKICAgIDwhLS0gbmF2aWdhdGlvbi5oYnMgLS0+
        CiAgICBIZWxsbywge3t3aG99fS4KICAgIGBgYAoKICAgIGBgYGhhbmRlbGJh
        cnMKICAgIDwhLS0gYXBwbGljYXRpb24uaGJzIC0tPgogICAgPGgxPk15IGdy
        ZWF0IGFwcDwvaDE+CiAgICB7e3JlbmRlciAibmF2aWdhdGlvbiJ9fQogICAg
        YGBgCgogICAgYGBgaHRtbAogICAgPGgxPk15IGdyZWF0IGFwcDwvaDE+CiAg
        ICA8ZGl2IGNsYXNzPSdlbWJlci12aWV3Jz4KICAgICAgSGVsbG8sIHdvcmxk
        LgogICAgPC9kaXY+CiAgICBgYGAKCiAgICBPcHRpb25hbGx5IHlvdSBtYXkg
        cHJvdmlkZSBhIHNlY29uZCBhcmd1bWVudDogYSBwcm9wZXJ0eSBwYXRoCiAg
        ICB0aGF0IHdpbGwgYmUgYm91bmQgdG8gdGhlIGBtb2RlbGAgcHJvcGVydHkg
        b2YgdGhlIGNvbnRyb2xsZXIuCgogICAgSWYgYSBgbW9kZWxgIHByb3BlcnR5
        IHBhdGggaXMgc3BlY2lmaWVkLCB0aGVuIGEgbmV3IGluc3RhbmNlIG9mIHRo
        ZQogICAgY29udHJvbGxlciB3aWxsIGJlIGNyZWF0ZWQgYW5kIGB7e3JlbmRl
        cn19YCBjYW4gYmUgdXNlZCBtdWx0aXBsZSB0aW1lcwogICAgd2l0aCB0aGUg
        c2FtZSBuYW1lLgoKICAgRm9yIGV4YW1wbGUgaWYgeW91IGhhZCB0aGlzIGBh
        dXRob3JgIHRlbXBsYXRlLgoKICAgYGBgaGFuZGxlYmFycwo8ZGl2IGNsYXNz
        PSJhdXRob3IiPgogIFdyaXR0ZW4gYnkge3tmaXJzdE5hbWV9fSB7e2xhc3RO
        YW1lfX0uCiAgVG90YWwgUG9zdHM6IHt7cG9zdENvdW50fX0KPC9kaXY+CiAg
        YGBgCgogIFlvdSBjb3VsZCByZW5kZXIgaXQgaW5zaWRlIHRoZSBgcG9zdGAg
        dGVtcGxhdGUgdXNpbmcgdGhlIGByZW5kZXJgIGhlbHBlci4KCiAgYGBgaGFu
        ZGxlYmFycwo8ZGl2IGNsYXNzPSJwb3N0Ij4KICA8aDE+e3t0aXRsZX19PC9o
        MT4KICA8ZGl2Pnt7Ym9keX19PC9kaXY+CiAge3tyZW5kZXIgImF1dGhvciIg
        YXV0aG9yfX0KPC9kaXY+CiAgIGBgYAoKICAgIEBtZXRob2QgcmVuZGVyCiAg
        ICBAZm9yIEVtYmVyLkhhbmRsZWJhcnMuaGVscGVycwogICAgQHBhcmFtIHtT
        dHJpbmd9IG5hbWUKICAgIEBwYXJhbSB7T2JqZWN0P30gY29udGV4dFN0cmlu
        ZwogICAgQHBhcmFtIHtIYXNofSBvcHRpb25zCiAgICBAcmV0dXJuIHtTdHJp
        bmd9IEhUTUwgc3RyaW5nCiAgKi8KICBFbWJlci5IYW5kbGViYXJzLnJlZ2lz
        dGVySGVscGVyKCdyZW5kZXInLCBmdW5jdGlvbiByZW5kZXJIZWxwZXIobmFt
        ZSwgY29udGV4dFN0cmluZywgb3B0aW9ucykgewogICAgdmFyIGxlbmd0aCA9
        IGFyZ3VtZW50cy5sZW5ndGg7CgogICAgdmFyIGNvbnRleHRQcm92aWRlZCA9
        IGxlbmd0aCA9PT0gMywKICAgICAgICBjb250YWluZXIsIHJvdXRlciwgY29u
        dHJvbGxlciwgdmlldywgY29udGV4dCwgbG9va3VwT3B0aW9uczsKCiAgICBj
        b250YWluZXIgPSAob3B0aW9ucyB8fCBjb250ZXh0U3RyaW5nKS5kYXRhLmtl
        eXdvcmRzLmNvbnRyb2xsZXIuY29udGFpbmVyOwogICAgcm91dGVyID0gY29u
        dGFpbmVyLmxvb2t1cCgncm91dGVyOm1haW4nKTsKCiAgICBpZiAobGVuZ3Ro
        ID09PSAyKSB7CiAgICAgIC8vIHVzZSB0aGUgc2luZ2xldG9uIGNvbnRyb2xs
        ZXIKICAgICAgb3B0aW9ucyA9IGNvbnRleHRTdHJpbmc7CiAgICAgIGNvbnRl
        eHRTdHJpbmcgPSB1bmRlZmluZWQ7CiAgICAgIEVtYmVyLmFzc2VydCgiWW91
        IGNhbiBvbmx5IHVzZSB0aGUge3tyZW5kZXJ9fSBoZWxwZXIgb25jZSB3aXRo
        b3V0IGEgbW9kZWwgb2JqZWN0IGFzIGl0cyBzZWNvbmQgYXJndW1lbnQsIGFz
        IGluIHt7cmVuZGVyIFwicG9zdFwiIHBvc3R9fS4iLCAhcm91dGVyIHx8ICFy
        b3V0ZXIuX2xvb2t1cEFjdGl2ZVZpZXcobmFtZSkpOwogICAgfSBlbHNlIGlm
        IChsZW5ndGggPT09IDMpIHsKICAgICAgLy8gY3JlYXRlIGEgbmV3IGNvbnRy
        b2xsZXIKICAgICAgY29udGV4dCA9IEVtYmVyLkhhbmRsZWJhcnMuZ2V0KG9w
        dGlvbnMuY29udGV4dHNbMV0sIGNvbnRleHRTdHJpbmcsIG9wdGlvbnMpOwog
        ICAgfSBlbHNlIHsKICAgICAgdGhyb3cgRW1iZXIuRXJyb3IoIllvdSBtdXN0
        IHBhc3MgYSB0ZW1wbGF0ZU5hbWUgdG8gcmVuZGVyIik7CiAgICB9CgogICAg
        RW1iZXIuZGVwcmVjYXRlKCJVc2luZyBhIHF1b3RlbGVzcyBwYXJhbWV0ZXIg
        d2l0aCB7e3JlbmRlcn19IGlzIGRlcHJlY2F0ZWQuIFBsZWFzZSB1cGRhdGUg
        dG8gcXVvdGVkIHVzYWdlICd7e3JlbmRlciBcIiIgKyBuYW1lICsgIlwifX0u
        Iiwgb3B0aW9ucy50eXBlc1swXSAhPT0gJ0lEJyk7CgogICAgLy8gIyBsZWdh
        Y3kgbmFtZXNwYWNlCiAgICBuYW1lID0gbmFtZS5yZXBsYWNlKC9cLy9nLCAn
        LicpOwogICAgLy8gXCBsZWdhY3kgc2xhc2ggYXMgbmFtZXNwYWNlIHN1cHBv
        cnQKCgogICAgdmlldyA9IGNvbnRhaW5lci5sb29rdXAoJ3ZpZXc6JyArIG5h
        bWUpIHx8IGNvbnRhaW5lci5sb29rdXAoJ3ZpZXc6ZGVmYXVsdCcpOwoKICAg
        IC8vIHByb3ZpZGUgY29udHJvbGxlciBvdmVycmlkZQogICAgdmFyIGNvbnRy
        b2xsZXJOYW1lID0gb3B0aW9ucy5oYXNoLmNvbnRyb2xsZXIgfHwgbmFtZTsK
        ICAgIHZhciBjb250cm9sbGVyRnVsbE5hbWUgPSAnY29udHJvbGxlcjonICsg
        Y29udHJvbGxlck5hbWU7CgogICAgaWYgKG9wdGlvbnMuaGFzaC5jb250cm9s
        bGVyKSB7CiAgICAgIEVtYmVyLmFzc2VydCgiVGhlIGNvbnRyb2xsZXIgbmFt
        ZSB5b3Ugc3VwcGxpZWQgJyIgKyBjb250cm9sbGVyTmFtZSArICInIGRpZCBu
        b3QgcmVzb2x2ZSB0byBhIGNvbnRyb2xsZXIuIiwgY29udGFpbmVyLmhhcyhj
        b250cm9sbGVyRnVsbE5hbWUpKTsKICAgIH0KCiAgICB2YXIgcGFyZW50Q29u
        dHJvbGxlciA9IG9wdGlvbnMuZGF0YS5rZXl3b3Jkcy5jb250cm9sbGVyOwoK
        ICAgIC8vIGNob29zZSBuYW1lCiAgICBpZiAobGVuZ3RoID4gMikgewogICAg
        ICB2YXIgZmFjdG9yeSA9IGNvbnRhaW5lci5sb29rdXBGYWN0b3J5KGNvbnRy
        b2xsZXJGdWxsTmFtZSkgfHwKICAgICAgICAgICAgICAgICAgICBFbWJlci5n
        ZW5lcmF0ZUNvbnRyb2xsZXJGYWN0b3J5KGNvbnRhaW5lciwgY29udHJvbGxl
        ck5hbWUsIGNvbnRleHQpOwoKICAgICAgY29udHJvbGxlciA9IGZhY3Rvcnku
        Y3JlYXRlKHsKICAgICAgICBtb2RlbDogY29udGV4dCwKICAgICAgICBwYXJl
        bnRDb250cm9sbGVyOiBwYXJlbnRDb250cm9sbGVyLAogICAgICAgIHRhcmdl
        dDogcGFyZW50Q29udHJvbGxlcgogICAgICB9KTsKCiAgICB9IGVsc2Ugewog
        ICAgICBjb250cm9sbGVyID0gY29udGFpbmVyLmxvb2t1cChjb250cm9sbGVy
        RnVsbE5hbWUpIHx8CiAgICAgICAgICAgICAgICAgICBFbWJlci5nZW5lcmF0
        ZUNvbnRyb2xsZXIoY29udGFpbmVyLCBjb250cm9sbGVyTmFtZSk7CgogICAg
        ICBjb250cm9sbGVyLnNldFByb3BlcnRpZXMoewogICAgICAgIHRhcmdldDog
        cGFyZW50Q29udHJvbGxlciwKICAgICAgICBwYXJlbnRDb250cm9sbGVyOiBw
        YXJlbnRDb250cm9sbGVyCiAgICAgIH0pOwogICAgfQoKICAgIHZhciByb290
        ID0gb3B0aW9ucy5jb250ZXh0c1sxXTsKCiAgICBpZiAocm9vdCkgewogICAg
        ICB2aWV3LnJlZ2lzdGVyT2JzZXJ2ZXIocm9vdCwgY29udGV4dFN0cmluZywg
        ZnVuY3Rpb24oKSB7CiAgICAgICAgY29udHJvbGxlci5zZXQoJ21vZGVsJywg
        RW1iZXIuSGFuZGxlYmFycy5nZXQocm9vdCwgY29udGV4dFN0cmluZywgb3B0
        aW9ucykpOwogICAgICB9KTsKICAgIH0KCiAgICBvcHRpb25zLmhhc2gudmll
        d05hbWUgPSBFbWJlci5TdHJpbmcuY2FtZWxpemUobmFtZSk7CgogICAgdmFy
        IHRlbXBsYXRlTmFtZSA9ICd0ZW1wbGF0ZTonICsgbmFtZTsKICAgIEVtYmVy
        LmFzc2VydCgiWW91IHVzZWQgYHt7cmVuZGVyICciICsgbmFtZSArICInfX1g
        LCBidXQgJyIgKyBuYW1lICsgIicgY2FuIG5vdCBiZSBmb3VuZCBhcyBlaXRo
        ZXIgYSB0ZW1wbGF0ZSBvciBhIHZpZXcuIiwgY29udGFpbmVyLmhhcygidmll
        dzoiICsgbmFtZSkgfHwgY29udGFpbmVyLmhhcyh0ZW1wbGF0ZU5hbWUpIHx8
        IG9wdGlvbnMuZm4pOwogICAgb3B0aW9ucy5oYXNoLnRlbXBsYXRlID0gY29u
        dGFpbmVyLmxvb2t1cCh0ZW1wbGF0ZU5hbWUpOwoKICAgIG9wdGlvbnMuaGFz
        aC5jb250cm9sbGVyID0gY29udHJvbGxlcjsKCiAgICBpZiAocm91dGVyICYm
        ICFjb250ZXh0KSB7CiAgICAgIHJvdXRlci5fY29ubmVjdEFjdGl2ZVZpZXco
        bmFtZSwgdmlldyk7CiAgICB9CgogICAgRW1iZXIuSGFuZGxlYmFycy5oZWxw
        ZXJzLnZpZXcuY2FsbCh0aGlzLCB2aWV3LCBvcHRpb25zKTsKICB9KTsKfSk7
        Cgp9KSgpOwoKCgooZnVuY3Rpb24oKSB7Ci8qKgpAbW9kdWxlIGVtYmVyCkBz
        dWJtb2R1bGUgZW1iZXItcm91dGluZwoqLwpFbWJlci5vbkxvYWQoJ0VtYmVy
        LkhhbmRsZWJhcnMnLCBmdW5jdGlvbihIYW5kbGViYXJzKSB7CgogIHZhciBy
        ZXNvbHZlUGFyYW1zID0gRW1iZXIuUm91dGVyLnJlc29sdmVQYXJhbXMsCiAg
        ICAgIGlzU2ltcGxlQ2xpY2sgPSBFbWJlci5WaWV3VXRpbHMuaXNTaW1wbGVD
        bGljazsKCiAgdmFyIEVtYmVySGFuZGxlYmFycyA9IEVtYmVyLkhhbmRsZWJh
        cnMsCiAgICAgIGhhbmRsZWJhcnNHZXQgPSBFbWJlckhhbmRsZWJhcnMuZ2V0
        LAogICAgICBTYWZlU3RyaW5nID0gRW1iZXJIYW5kbGViYXJzLlNhZmVTdHJp
        bmcsCiAgICAgIGZvckVhY2ggPSBFbWJlci5BcnJheVBvbHlmaWxscy5mb3JF
        YWNoLAogICAgICBnZXQgPSBFbWJlci5nZXQsCiAgICAgIGFfc2xpY2UgPSBB
        cnJheS5wcm90b3R5cGUuc2xpY2U7CgogIGZ1bmN0aW9uIGFyZ3Mob3B0aW9u
        cywgYWN0aW9uTmFtZSkgewogICAgdmFyIHJldCA9IFtdOwogICAgaWYgKGFj
        dGlvbk5hbWUpIHsgcmV0LnB1c2goYWN0aW9uTmFtZSk7IH0KCiAgICB2YXIg
        dHlwZXMgPSBvcHRpb25zLm9wdGlvbnMudHlwZXMuc2xpY2UoMSksCiAgICAg
        ICAgZGF0YSA9IG9wdGlvbnMub3B0aW9ucy5kYXRhOwoKICAgIHJldHVybiBy
        ZXQuY29uY2F0KHJlc29sdmVQYXJhbXMob3B0aW9ucy5jb250ZXh0LCBvcHRp
        b25zLnBhcmFtcywgeyB0eXBlczogdHlwZXMsIGRhdGE6IGRhdGEgfSkpOwog
        IH0KCiAgdmFyIEFjdGlvbkhlbHBlciA9IEVtYmVySGFuZGxlYmFycy5BY3Rp
        b25IZWxwZXIgPSB7CiAgICByZWdpc3RlcmVkQWN0aW9uczoge30KICB9OwoK
        ICB2YXIga2V5cyA9IFsiYWx0IiwgInNoaWZ0IiwgIm1ldGEiLCAiY3RybCJd
        OwoKICB2YXIgUE9JTlRFUl9FVkVOVF9UWVBFX1JFR0VYID0gL15jbGlja3xt
        b3VzZXx0b3VjaC87CgogIHZhciBpc0FsbG93ZWRFdmVudCA9IGZ1bmN0aW9u
        KGV2ZW50LCBhbGxvd2VkS2V5cykgewogICAgaWYgKHR5cGVvZiBhbGxvd2Vk
        S2V5cyA9PT0gInVuZGVmaW5lZCIpIHsKICAgICAgaWYgKFBPSU5URVJfRVZF
        TlRfVFlQRV9SRUdFWC50ZXN0KGV2ZW50LnR5cGUpKSB7CiAgICAgICAgcmV0
        dXJuIGlzU2ltcGxlQ2xpY2soZXZlbnQpOwogICAgICB9IGVsc2UgewogICAg
        ICAgIGFsbG93ZWRLZXlzID0gJyc7CiAgICAgIH0KICAgIH0KCiAgICBpZiAo
        YWxsb3dlZEtleXMuaW5kZXhPZigiYW55IikgPj0gMCkgewogICAgICByZXR1
        cm4gdHJ1ZTsKICAgIH0KCiAgICB2YXIgYWxsb3dlZCA9IHRydWU7CgogICAg
        Zm9yRWFjaC5jYWxsKGtleXMsIGZ1bmN0aW9uKGtleSkgewogICAgICBpZiAo
        ZXZlbnRba2V5ICsgIktleSJdICYmIGFsbG93ZWRLZXlzLmluZGV4T2Yoa2V5
        KSA9PT0gLTEpIHsKICAgICAgICBhbGxvd2VkID0gZmFsc2U7CiAgICAgIH0K
        ICAgIH0pOwoKICAgIHJldHVybiBhbGxvd2VkOwogIH07CgogIEFjdGlvbkhl
        bHBlci5yZWdpc3RlckFjdGlvbiA9IGZ1bmN0aW9uKGFjdGlvbk5hbWVPclBh
        dGgsIG9wdGlvbnMsIGFsbG93ZWRLZXlzKSB7CiAgICB2YXIgYWN0aW9uSWQg
        PSArK0VtYmVyLnV1aWQ7CgogICAgQWN0aW9uSGVscGVyLnJlZ2lzdGVyZWRB
        Y3Rpb25zW2FjdGlvbklkXSA9IHsKICAgICAgZXZlbnROYW1lOiBvcHRpb25z
        LmV2ZW50TmFtZSwKICAgICAgaGFuZGxlcjogZnVuY3Rpb24gaGFuZGxlUmVn
        aXN0ZXJlZEFjdGlvbihldmVudCkgewogICAgICAgIGlmICghaXNBbGxvd2Vk
        RXZlbnQoZXZlbnQsIGFsbG93ZWRLZXlzKSkgeyByZXR1cm4gdHJ1ZTsgfQoK
        ICAgICAgICBpZiAob3B0aW9ucy5wcmV2ZW50RGVmYXVsdCAhPT0gZmFsc2Up
        IHsKICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAg
        fQoKICAgICAgICBpZiAob3B0aW9ucy5idWJibGVzID09PSBmYWxzZSkgewog
        ICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgfQoK
        ICAgICAgICB2YXIgdGFyZ2V0ID0gb3B0aW9ucy50YXJnZXQsCiAgICAgICAg
        ICAgIGFjdGlvbk5hbWU7CgogICAgICAgIGlmICh0YXJnZXQudGFyZ2V0KSB7
        CiAgICAgICAgICB0YXJnZXQgPSBoYW5kbGViYXJzR2V0KHRhcmdldC5yb290
        LCB0YXJnZXQudGFyZ2V0LCB0YXJnZXQub3B0aW9ucyk7CiAgICAgICAgfSBl
        bHNlIHsKICAgICAgICAgIHRhcmdldCA9IHRhcmdldC5yb290OwogICAgICAg
        IH0KCiAgICAgICAgCiAgICAgICAgICBpZiAob3B0aW9ucy5ib3VuZFByb3Bl
        cnR5KSB7CiAgICAgICAgICAgIGFjdGlvbk5hbWUgPSBoYW5kbGViYXJzR2V0
        KHRhcmdldCwgYWN0aW9uTmFtZU9yUGF0aCwgb3B0aW9ucy5vcHRpb25zKTsK
        CiAgICAgICAgICAgIGlmKHR5cGVvZiBhY3Rpb25OYW1lID09PSAndW5kZWZp
        bmVkJyB8fCB0eXBlb2YgYWN0aW9uTmFtZSA9PT0gJ2Z1bmN0aW9uJykgewog
        ICAgICAgICAgICAgIEVtYmVyLmFzc2VydCgiWW91IHNwZWNpZmllZCBhIHF1
        b3RlbGVzcyBwYXRoIHRvIHRoZSB7e2FjdGlvbn19IGhlbHBlciAnIiArIGFj
        dGlvbk5hbWVPclBhdGggKyAiJyB3aGljaCBkaWQgbm90IHJlc29sdmUgdG8g
        YW4gYWN0aW9uTmFtZS4gUGVyaGFwcyB5b3UgbWVhbnQgdG8gdXNlIGEgcXVv
        dGVkIGFjdGlvbk5hbWU/IChlLmcuIHt7YWN0aW9uICciICsgYWN0aW9uTmFt
        ZU9yUGF0aCArICInfX0pLiIsIHRydWUpOwogICAgICAgICAgICAgIGFjdGlv
        bk5hbWUgPSBhY3Rpb25OYW1lT3JQYXRoOwogICAgICAgICAgICB9CiAgICAg
        ICAgICB9CiAgICAgICAgCiAgICAgICAgaWYgKCFhY3Rpb25OYW1lKSB7CiAg
        ICAgICAgICBhY3Rpb25OYW1lID0gYWN0aW9uTmFtZU9yUGF0aDsKICAgICAg
        ICB9CgogICAgICAgIEVtYmVyLnJ1bihmdW5jdGlvbiBydW5SZWdpc3RlcmVk
        QWN0aW9uKCkgewogICAgICAgICAgaWYgKHRhcmdldC5zZW5kKSB7CiAgICAg
        ICAgICAgIHRhcmdldC5zZW5kLmFwcGx5KHRhcmdldCwgYXJncyhvcHRpb25z
        LnBhcmFtZXRlcnMsIGFjdGlvbk5hbWUpKTsKICAgICAgICAgIH0gZWxzZSB7
        CiAgICAgICAgICAgIEVtYmVyLmFzc2VydCgiVGhlIGFjdGlvbiAnIiArIGFj
        dGlvbk5hbWUgKyAiJyBkaWQgbm90IGV4aXN0IG9uICIgKyB0YXJnZXQsIHR5
        cGVvZiB0YXJnZXRbYWN0aW9uTmFtZV0gPT09ICdmdW5jdGlvbicpOwogICAg
        ICAgICAgICB0YXJnZXRbYWN0aW9uTmFtZV0uYXBwbHkodGFyZ2V0LCBhcmdz
        KG9wdGlvbnMucGFyYW1ldGVycykpOwogICAgICAgICAgfQogICAgICAgIH0p
        OwogICAgICB9CiAgICB9OwoKICAgIG9wdGlvbnMudmlldy5vbignd2lsbENs
        ZWFyUmVuZGVyJywgZnVuY3Rpb24oKSB7CiAgICAgIGRlbGV0ZSBBY3Rpb25I
        ZWxwZXIucmVnaXN0ZXJlZEFjdGlvbnNbYWN0aW9uSWRdOwogICAgfSk7Cgog
        ICAgcmV0dXJuIGFjdGlvbklkOwogIH07CgogIC8qKgogICAgVGhlIGB7e2Fj
        dGlvbn19YCBoZWxwZXIgcmVnaXN0ZXJzIGFuIEhUTUwgZWxlbWVudCB3aXRo
        aW4gYSB0ZW1wbGF0ZSBmb3IgRE9NCiAgICBldmVudCBoYW5kbGluZyBhbmQg
        Zm9yd2FyZHMgdGhhdCBpbnRlcmFjdGlvbiB0byB0aGUgdGVtcGxhdGVzJ3Mg
        Y29udHJvbGxlcgogICAgb3Igc3VwcGxpZWQgYHRhcmdldGAgb3B0aW9uIChz
        ZWUgJ1NwZWNpZnlpbmcgYSBUYXJnZXQnKS4KCiAgICBJZiB0aGUgY29udHJv
        bGxlciBkb2VzIG5vdCBpbXBsZW1lbnQgdGhlIGV2ZW50LCB0aGUgZXZlbnQg
        aXMgc2VudAogICAgdG8gdGhlIGN1cnJlbnQgcm91dGUsIGFuZCBpdCBidWJi
        bGVzIHVwIHRoZSByb3V0ZSBoaWVyYXJjaHkgZnJvbSB0aGVyZS4KCiAgICBV
        c2VyIGludGVyYWN0aW9uIHdpdGggdGhhdCBlbGVtZW50IHdpbGwgaW52b2tl
        IHRoZSBzdXBwbGllZCBhY3Rpb24gbmFtZSBvbgogICAgdGhlIGFwcHJvcHJp
        YXRlIHRhcmdldC4gU3BlY2lmeWluZyBhIG5vbi1xdW90ZWQgYWN0aW9uIG5h
        bWUgd2lsbCByZXN1bHQgaW4KICAgIGEgYm91bmQgcHJvcGVydHkgbG9va3Vw
        IGF0IHRoZSB0aW1lIHRoZSBldmVudCB3aWxsIGJlIHRyaWdnZXJlZC4KCiAg
        ICBHaXZlbiB0aGUgZm9sbG93aW5nIGFwcGxpY2F0aW9uIEhhbmRsZWJhcnMg
        dGVtcGxhdGUgb24gdGhlIHBhZ2UKCiAgICBgYGBoYW5kbGViYXJzCiAgICA8
        ZGl2IHt7YWN0aW9uICdhbkFjdGlvbk5hbWUnfX0+CiAgICAgIGNsaWNrIG1l
        CiAgICA8L2Rpdj4KICAgIGBgYAoKICAgIEFuZCBhcHBsaWNhdGlvbiBjb2Rl
        CgogICAgYGBgamF2YXNjcmlwdAogICAgQXBwLkFwcGxpY2F0aW9uQ29udHJv
        bGxlciA9IEVtYmVyLkNvbnRyb2xsZXIuZXh0ZW5kKHsKICAgICAgYWN0aW9u
        czogewogICAgICAgIGFuQWN0aW9uTmFtZTogZnVuY3Rpb24oKSB7CiAgICAg
        ICAgfQogICAgICB9CiAgICB9KTsKICAgIGBgYAoKICAgIFdpbGwgcmVzdWx0
        IGluIHRoZSBmb2xsb3dpbmcgcmVuZGVyZWQgSFRNTAoKICAgIGBgYGh0bWwK
        ICAgIDxkaXYgY2xhc3M9ImVtYmVyLXZpZXciPgogICAgICA8ZGl2IGRhdGEt
        ZW1iZXItYWN0aW9uPSIxIj4KICAgICAgICBjbGljayBtZQogICAgICA8L2Rp
        dj4KICAgIDwvZGl2PgogICAgYGBgCgogICAgQ2xpY2tpbmcgImNsaWNrIG1l
        IiB3aWxsIHRyaWdnZXIgdGhlIGBhbkFjdGlvbk5hbWVgIGFjdGlvbiBvZiB0
        aGUKICAgIGBBcHAuQXBwbGljYXRpb25Db250cm9sbGVyYC4gSW4gdGhpcyBj
        YXNlLCBubyBhZGRpdGlvbmFsIHBhcmFtZXRlcnMgd2lsbCBiZSBwYXNzZWQu
        CgogICAgSWYgeW91IHByb3ZpZGUgYWRkaXRpb25hbCBwYXJhbWV0ZXJzIHRv
        IHRoZSBoZWxwZXI6CgogICAgYGBgaGFuZGxlYmFycwogICAgPGJ1dHRvbiB7
        e2FjdGlvbiAnZWRpdCcgcG9zdH19PkVkaXQ8L2J1dHRvbj4KICAgIGBgYAoK
        ICAgIFRob3NlIHBhcmFtZXRlcnMgd2lsbCBiZSBwYXNzZWQgYWxvbmcgYXMg
        YXJndW1lbnRzIHRvIHRoZSBKYXZhU2NyaXB0CiAgICBmdW5jdGlvbiBpbXBs
        ZW1lbnRpbmcgdGhlIGFjdGlvbi4KCiAgICAjIyMgRXZlbnQgUHJvcGFnYXRp
        b24KCiAgICBFdmVudHMgdHJpZ2dlcmVkIHRocm91Z2ggdGhlIGFjdGlvbiBo
        ZWxwZXIgd2lsbCBhdXRvbWF0aWNhbGx5IGhhdmUKICAgIGAucHJldmVudERl
        ZmF1bHQoKWAgY2FsbGVkIG9uIHRoZW0uIFlvdSBkbyBub3QgbmVlZCB0byBk
        byBzbyBpbiB5b3VyIGV2ZW50CiAgICBoYW5kbGVycy4gSWYgeW91IG5lZWQg
        dG8gYWxsb3cgZXZlbnQgcHJvcGFnYXRpb24gKHRvIGhhbmRsZSBmaWxlIGlu
        cHV0cyBmb3IKICAgIGV4YW1wbGUpIHlvdSBjYW4gc3VwcGx5IHRoZSBgcHJl
        dmVudERlZmF1bHQ9ZmFsc2VgIG9wdGlvbiB0byB0aGUgYHt7YWN0aW9ufX1g
        IGhlbHBlcjoKCiAgICBgYGBoYW5kbGViYXJzCiAgICA8ZGl2IHt7YWN0aW9u
        ICJzYXlIZWxsbyIgcHJldmVudERlZmF1bHQ9ZmFsc2V9fT4KICAgICAgPGlu
        cHV0IHR5cGU9ImZpbGUiIC8+CiAgICAgIDxpbnB1dCB0eXBlPSJjaGVja2Jv
        eCIgLz4KICAgIDwvZGl2PgogICAgYGBgCgogICAgVG8gZGlzYWJsZSBidWJi
        bGluZywgcGFzcyBgYnViYmxlcz1mYWxzZWAgdG8gdGhlIGhlbHBlcjoKCiAg
        ICBgYGBoYW5kbGViYXJzCiAgICA8YnV0dG9uIHt7YWN0aW9uICdlZGl0JyBw
        b3N0IGJ1YmJsZXM9ZmFsc2V9fT5FZGl0PC9idXR0b24+CiAgICBgYGAKCiAg
        ICBJZiB5b3UgbmVlZCB0aGUgZGVmYXVsdCBoYW5kbGVyIHRvIHRyaWdnZXIg
        eW91IHNob3VsZCBlaXRoZXIgcmVnaXN0ZXIgeW91cgogICAgb3duIGV2ZW50
        IGhhbmRsZXIsIG9yIHVzZSBldmVudCBtZXRob2RzIG9uIHlvdXIgdmlldyBj
        bGFzcy4gU2VlIFtFbWJlci5WaWV3XSgvYXBpL2NsYXNzZXMvRW1iZXIuVmll
        dy5odG1sKQogICAgJ1Jlc3BvbmRpbmcgdG8gQnJvd3NlciBFdmVudHMnIGZv
        ciBtb3JlIGluZm9ybWF0aW9uLgoKICAgICMjIyBTcGVjaWZ5aW5nIERPTSBl
        dmVudCB0eXBlCgogICAgQnkgZGVmYXVsdCB0aGUgYHt7YWN0aW9ufX1gIGhl
        bHBlciByZWdpc3RlcnMgZm9yIERPTSBgY2xpY2tgIGV2ZW50cy4gWW91IGNh
        bgogICAgc3VwcGx5IGFuIGBvbmAgb3B0aW9uIHRvIHRoZSBoZWxwZXIgdG8g
        c3BlY2lmeSBhIGRpZmZlcmVudCBET00gZXZlbnQgbmFtZToKCiAgICBgYGBo
        YW5kbGViYXJzCiAgICA8ZGl2IHt7YWN0aW9uICJhbkFjdGlvbk5hbWUiIG9u
        PSJkb3VibGVDbGljayJ9fT4KICAgICAgY2xpY2sgbWUKICAgIDwvZGl2Pgog
        ICAgYGBgCgogICAgU2VlIGBFbWJlci5WaWV3YCAnUmVzcG9uZGluZyB0byBC
        cm93c2VyIEV2ZW50cycgZm9yIGEgbGlzdCBvZgogICAgYWNjZXB0YWJsZSBE
        T00gZXZlbnQgbmFtZXMuCgogICAgTk9URTogQmVjYXVzZSBge3thY3Rpb259
        fWAgZGVwZW5kcyBvbiBFbWJlcidzIGV2ZW50IGRpc3BhdGNoIHN5c3RlbSBp
        dCB3aWxsCiAgICBvbmx5IGZ1bmN0aW9uIGlmIGFuIGBFbWJlci5FdmVudERp
        c3BhdGNoZXJgIGluc3RhbmNlIGlzIGF2YWlsYWJsZS4gQW4KICAgIGBFbWJl
        ci5FdmVudERpc3BhdGNoZXJgIGluc3RhbmNlIHdpbGwgYmUgY3JlYXRlZCB3
        aGVuIGEgbmV3IGBFbWJlci5BcHBsaWNhdGlvbmAKICAgIGlzIGNyZWF0ZWQu
        IEhhdmluZyBhbiBpbnN0YW5jZSBvZiBgRW1iZXIuQXBwbGljYXRpb25gIHdp
        bGwgc2F0aXNmeSB0aGlzCiAgICByZXF1aXJlbWVudC4KCiAgICAjIyMgU3Bl
        Y2lmeWluZyB3aGl0ZWxpc3RlZCBtb2RpZmllciBrZXlzCgogICAgQnkgZGVm
        YXVsdCB0aGUgYHt7YWN0aW9ufX1gIGhlbHBlciB3aWxsIGlnbm9yZSBjbGlj
        ayBldmVudCB3aXRoIHByZXNzZWQgbW9kaWZpZXIKICAgIGtleXMuIFlvdSBj
        YW4gc3VwcGx5IGFuIGBhbGxvd2VkS2V5c2Agb3B0aW9uIHRvIHNwZWNpZnkg
        d2hpY2gga2V5cyBzaG91bGQgbm90IGJlIGlnbm9yZWQuCgogICAgYGBgaGFu
        ZGxlYmFycwogICAgPGRpdiB7e2FjdGlvbiAiYW5BY3Rpb25OYW1lIiBhbGxv
        d2VkS2V5cz0iYWx0In19PgogICAgICBjbGljayBtZQogICAgPC9kaXY+CiAg
        ICBgYGAKCiAgICBUaGlzIHdheSB0aGUgYHt7YWN0aW9ufX1gIHdpbGwgZmly
        ZSB3aGVuIGNsaWNraW5nIHdpdGggdGhlIGFsdCBrZXkgcHJlc3NlZCBkb3du
        LgoKICAgIEFsdGVybmF0aXZlbHksIHN1cHBseSAiYW55IiB0byB0aGUgYGFs
        bG93ZWRLZXlzYCBvcHRpb24gdG8gYWNjZXB0IGFueSBjb21iaW5hdGlvbiBv
        ZiBtb2RpZmllciBrZXlzLgoKICAgIGBgYGhhbmRsZWJhcnMKICAgIDxkaXYg
        e3thY3Rpb24gImFuQWN0aW9uTmFtZSIgYWxsb3dlZEtleXM9ImFueSJ9fT4K
        ICAgICAgY2xpY2sgbWUgd2l0aCBhbnkga2V5IHByZXNzZWQKICAgIDwvZGl2
        PgogICAgYGBgCgogICAgIyMjIFNwZWNpZnlpbmcgYSBUYXJnZXQKCiAgICBU
        aGVyZSBhcmUgc2V2ZXJhbCBwb3NzaWJsZSB0YXJnZXQgb2JqZWN0cyBmb3Ig
        YHt7YWN0aW9ufX1gIGhlbHBlcnM6CgogICAgSW4gYSB0eXBpY2FsIEVtYmVy
        IGFwcGxpY2F0aW9uLCB3aGVyZSB2aWV3cyBhcmUgbWFuYWdlZCB0aHJvdWdo
        IHVzZSBvZiB0aGUKICAgIGB7e291dGxldH19YCBoZWxwZXIsIGFjdGlvbnMg
        d2lsbCBidWJibGUgdG8gdGhlIGN1cnJlbnQgY29udHJvbGxlciwgdGhlbgog
        ICAgdG8gdGhlIGN1cnJlbnQgcm91dGUsIGFuZCB0aGVuIHVwIHRoZSByb3V0
        ZSBoaWVyYXJjaHkuCgogICAgQWx0ZXJuYXRpdmVseSwgYSBgdGFyZ2V0YCBv
        cHRpb24gY2FuIGJlIHByb3ZpZGVkIHRvIHRoZSBoZWxwZXIgdG8gY2hhbmdl
        CiAgICB3aGljaCBvYmplY3Qgd2lsbCByZWNlaXZlIHRoZSBtZXRob2QgY2Fs
        bC4gVGhpcyBvcHRpb24gbXVzdCBiZSBhIHBhdGgKICAgIHRvIGFuIG9iamVj
        dCwgYWNjZXNzaWJsZSBpbiB0aGUgY3VycmVudCBjb250ZXh0OgoKICAgIGBg
        YGhhbmRsZWJhcnMKICAgIHt7ISB0aGUgYXBwbGljYXRpb24gdGVtcGxhdGUg
        fX0KICAgIDxkaXYge3thY3Rpb24gImFuQWN0aW9uTmFtZSIgdGFyZ2V0PXZp
        ZXd9fT4KICAgICAgY2xpY2sgbWUKICAgIDwvZGl2PgogICAgYGBgCgogICAg
        YGBgamF2YXNjcmlwdAogICAgQXBwLkFwcGxpY2F0aW9uVmlldyA9IEVtYmVy
        LlZpZXcuZXh0ZW5kKHsKICAgICAgYWN0aW9uczogewogICAgICAgIGFuQWN0
        aW9uTmFtZTogZnVuY3Rpb24oKXt9CiAgICAgIH0KICAgIH0pOwoKICAgIGBg
        YAoKICAgICMjIyBBZGRpdGlvbmFsIFBhcmFtZXRlcnMKCiAgICBZb3UgbWF5
        IHNwZWNpZnkgYWRkaXRpb25hbCBwYXJhbWV0ZXJzIHRvIHRoZSBge3thY3Rp
        b259fWAgaGVscGVyLiBUaGVzZQogICAgcGFyYW1ldGVycyBhcmUgcGFzc2Vk
        IGFsb25nIGFzIHRoZSBhcmd1bWVudHMgdG8gdGhlIEphdmFTY3JpcHQgZnVu
        Y3Rpb24KICAgIGltcGxlbWVudGluZyB0aGUgYWN0aW9uLgoKICAgIGBgYGhh
        bmRsZWJhcnMKICAgIHt7I2VhY2ggcGVyc29uIGluIHBlb3BsZX19CiAgICAg
        IDxkaXYge3thY3Rpb24gImVkaXQiIHBlcnNvbn19PgogICAgICAgIGNsaWNr
        IG1lCiAgICAgIDwvZGl2PgogICAge3svZWFjaH19CiAgICBgYGAKCiAgICBD
        bGlja2luZyAiY2xpY2sgbWUiIHdpbGwgdHJpZ2dlciB0aGUgYGVkaXRgIG1l
        dGhvZCBvbiB0aGUgY3VycmVudCBjb250cm9sbGVyCiAgICB3aXRoIHRoZSB2
        YWx1ZSBvZiBgcGVyc29uYCBhcyBhIHBhcmFtZXRlci4KCiAgICBAbWV0aG9k
        IGFjdGlvbgogICAgQGZvciBFbWJlci5IYW5kbGViYXJzLmhlbHBlcnMKICAg
        IEBwYXJhbSB7U3RyaW5nfSBhY3Rpb25OYW1lCiAgICBAcGFyYW0ge09iamVj
        dH0gW2NvbnRleHRdKgogICAgQHBhcmFtIHtIYXNofSBvcHRpb25zCiAgKi8K
        ICBFbWJlckhhbmRsZWJhcnMucmVnaXN0ZXJIZWxwZXIoJ2FjdGlvbicsIGZ1
        bmN0aW9uIGFjdGlvbkhlbHBlcihhY3Rpb25OYW1lKSB7CiAgICB2YXIgb3B0
        aW9ucyA9IGFyZ3VtZW50c1thcmd1bWVudHMubGVuZ3RoIC0gMV0sCiAgICAg
        ICAgY29udGV4dHMgPSBhX3NsaWNlLmNhbGwoYXJndW1lbnRzLCAxLCAtMSk7
        CgogICAgdmFyIGhhc2ggPSBvcHRpb25zLmhhc2gsCiAgICAgICAgY29udHJv
        bGxlciA9IG9wdGlvbnMuZGF0YS5rZXl3b3Jkcy5jb250cm9sbGVyOwoKICAg
        IC8vIGNyZWF0ZSBhIGhhc2ggdG8gcGFzcyBhbG9uZyB0byByZWdpc3RlckFj
        dGlvbgogICAgdmFyIGFjdGlvbiA9IHsKICAgICAgZXZlbnROYW1lOiBoYXNo
        Lm9uIHx8ICJjbGljayIsCiAgICAgIHBhcmFtZXRlcnM6IHsKICAgICAgICBj
        b250ZXh0OiB0aGlzLAogICAgICAgIG9wdGlvbnM6IG9wdGlvbnMsCiAgICAg
        ICAgcGFyYW1zOiBjb250ZXh0cwogICAgICB9LAogICAgICB2aWV3OiBvcHRp
        b25zLmRhdGEudmlldywKICAgICAgYnViYmxlczogaGFzaC5idWJibGVzLAog
        ICAgICBwcmV2ZW50RGVmYXVsdDogaGFzaC5wcmV2ZW50RGVmYXVsdCwKICAg
        ICAgdGFyZ2V0OiB7IG9wdGlvbnM6IG9wdGlvbnMgfSwKICAgICAgYm91bmRQ
        cm9wZXJ0eTogb3B0aW9ucy50eXBlc1swXSA9PT0gIklEIgogICAgfTsKCiAg
        ICBpZiAoaGFzaC50YXJnZXQpIHsKICAgICAgYWN0aW9uLnRhcmdldC5yb290
        ID0gdGhpczsKICAgICAgYWN0aW9uLnRhcmdldC50YXJnZXQgPSBoYXNoLnRh
        cmdldDsKICAgIH0gZWxzZSBpZiAoY29udHJvbGxlcikgewogICAgICBhY3Rp
        b24udGFyZ2V0LnJvb3QgPSBjb250cm9sbGVyOwogICAgfQoKICAgIHZhciBh
        Y3Rpb25JZCA9IEFjdGlvbkhlbHBlci5yZWdpc3RlckFjdGlvbihhY3Rpb25O
        YW1lLCBhY3Rpb24sIGhhc2guYWxsb3dlZEtleXMpOwogICAgcmV0dXJuIG5l
        dyBTYWZlU3RyaW5nKCdkYXRhLWVtYmVyLWFjdGlvbj0iJyArIGFjdGlvbklk
        ICsgJyInKTsKICB9KTsKfSk7Cgp9KSgpOwoKCgooZnVuY3Rpb24oKSB7Cgp9
        KSgpOwoKCgooZnVuY3Rpb24oKSB7Ci8qKgpAbW9kdWxlIGVtYmVyCkBzdWJt
        b2R1bGUgZW1iZXItcm91dGluZwoqLwoKdmFyIGdldCA9IEVtYmVyLmdldCwg
        c2V0ID0gRW1iZXIuc2V0LAogICAgbWFwID0gRW1iZXIuRW51bWVyYWJsZVV0
        aWxzLm1hcDsKCnZhciBxdWV1ZWRRdWVyeVBhcmFtQ2hhbmdlcyA9IHt9OwoK
        RW1iZXIuQ29udHJvbGxlck1peGluLnJlb3Blbih7CiAgLyoqCiAgICBUcmFu
        c2l0aW9uIHRoZSBhcHBsaWNhdGlvbiBpbnRvIGFub3RoZXIgcm91dGUuIFRo
        ZSByb3V0ZSBtYXkKICAgIGJlIGVpdGhlciBhIHNpbmdsZSByb3V0ZSBvciBy
        b3V0ZSBwYXRoOgoKICAgIGBgYGphdmFzY3JpcHQKICAgIGFDb250cm9sbGVy
        LnRyYW5zaXRpb25Ub1JvdXRlKCdibG9nUG9zdHMnKTsKICAgIGFDb250cm9s
        bGVyLnRyYW5zaXRpb25Ub1JvdXRlKCdibG9nUG9zdHMucmVjZW50RW50cmll
        cycpOwogICAgYGBgCgogICAgT3B0aW9uYWxseSBzdXBwbHkgYSBtb2RlbCBm
        b3IgdGhlIHJvdXRlIGluIHF1ZXN0aW9uLiBUaGUgbW9kZWwKICAgIHdpbGwg
        YmUgc2VyaWFsaXplZCBpbnRvIHRoZSBVUkwgdXNpbmcgdGhlIGBzZXJpYWxp
        emVgIGhvb2sgb2YKICAgIHRoZSByb3V0ZToKCiAgICBgYGBqYXZhc2NyaXB0
        CiAgICBhQ29udHJvbGxlci50cmFuc2l0aW9uVG9Sb3V0ZSgnYmxvZ1Bvc3Qn
        LCBhUG9zdCk7CiAgICBgYGAKCiAgICBNdWx0aXBsZSBtb2RlbHMgd2lsbCBi
        ZSBhcHBsaWVkIGxhc3QgdG8gZmlyc3QgcmVjdXJzaXZlbHkgdXAgdGhlCiAg
        ICByZXNvdXJjZSB0cmVlLgoKICAgIGBgYGphdmFzY3JpcHQKICAgIHRoaXMu
        cmVzb3VyY2UoJ2Jsb2dQb3N0Jywge3BhdGg6JzpibG9nUG9zdElkJ30sIGZ1
        bmN0aW9uKCl7CiAgICAgIHRoaXMucmVzb3VyY2UoJ2Jsb2dDb21tZW50Jywg
        e3BhdGg6ICc6YmxvZ0NvbW1lbnRJZCd9KTsKICAgIH0pOwoKICAgIGFDb250
        cm9sbGVyLnRyYW5zaXRpb25Ub1JvdXRlKCdibG9nQ29tbWVudCcsIGFQb3N0
        LCBhQ29tbWVudCk7CiAgICBgYGAKCiAgICBTZWUgYWxzbyAncmVwbGFjZVJv
        dXRlJy4KCiAgICBAcGFyYW0ge1N0cmluZ30gbmFtZSB0aGUgbmFtZSBvZiB0
        aGUgcm91dGUKICAgIEBwYXJhbSB7Li4uT2JqZWN0fSBtb2RlbHMgdGhlIG1v
        ZGVsKHMpIHRvIGJlIHVzZWQgd2hpbGUgdHJhbnNpdGlvbmluZwogICAgdG8g
        dGhlIHJvdXRlLgogICAgQGZvciBFbWJlci5Db250cm9sbGVyTWl4aW4KICAg
        IEBtZXRob2QgdHJhbnNpdGlvblRvUm91dGUKICAqLwogIHRyYW5zaXRpb25U
        b1JvdXRlOiBmdW5jdGlvbigpIHsKICAgIC8vIHRhcmdldCBtYXkgYmUgZWl0
        aGVyIGFub3RoZXIgY29udHJvbGxlciBvciBhIHJvdXRlcgogICAgdmFyIHRh
        cmdldCA9IGdldCh0aGlzLCAndGFyZ2V0JyksCiAgICAgICAgbWV0aG9kID0g
        dGFyZ2V0LnRyYW5zaXRpb25Ub1JvdXRlIHx8IHRhcmdldC50cmFuc2l0aW9u
        VG87CiAgICByZXR1cm4gbWV0aG9kLmFwcGx5KHRhcmdldCwgYXJndW1lbnRz
        KTsKICB9LAoKICAvKioKICAgIEBkZXByZWNhdGVkCiAgICBAZm9yIEVtYmVy
        LkNvbnRyb2xsZXJNaXhpbgogICAgQG1ldGhvZCB0cmFuc2l0aW9uVG8KICAq
        LwogIHRyYW5zaXRpb25UbzogZnVuY3Rpb24oKSB7CiAgICBFbWJlci5kZXBy
        ZWNhdGUoInRyYW5zaXRpb25UbyBpcyBkZXByZWNhdGVkLiBQbGVhc2UgdXNl
        IHRyYW5zaXRpb25Ub1JvdXRlLiIpOwogICAgcmV0dXJuIHRoaXMudHJhbnNp
        dGlvblRvUm91dGUuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICB9LAoKICAv
        KioKICAgIFRyYW5zaXRpb24gaW50byBhbm90aGVyIHJvdXRlIHdoaWxlIHJl
        cGxhY2luZyB0aGUgY3VycmVudCBVUkwsIGlmIHBvc3NpYmxlLgogICAgVGhp
        cyB3aWxsIHJlcGxhY2UgdGhlIGN1cnJlbnQgaGlzdG9yeSBlbnRyeSBpbnN0
        ZWFkIG9mIGFkZGluZyBhIG5ldyBvbmUuCiAgICBCZXNpZGUgdGhhdCwgaXQg
        aXMgaWRlbnRpY2FsIHRvIGB0cmFuc2l0aW9uVG9Sb3V0ZWAgaW4gYWxsIG90
        aGVyIHJlc3BlY3RzLgoKICAgIGBgYGphdmFzY3JpcHQKICAgIGFDb250cm9s
        bGVyLnJlcGxhY2VSb3V0ZSgnYmxvZ1Bvc3RzJyk7CiAgICBhQ29udHJvbGxl
        ci5yZXBsYWNlUm91dGUoJ2Jsb2dQb3N0cy5yZWNlbnRFbnRyaWVzJyk7CiAg
        ICBgYGAKCiAgICBPcHRpb25hbGx5IHN1cHBseSBhIG1vZGVsIGZvciB0aGUg
        cm91dGUgaW4gcXVlc3Rpb24uIFRoZSBtb2RlbAogICAgd2lsbCBiZSBzZXJp
        YWxpemVkIGludG8gdGhlIFVSTCB1c2luZyB0aGUgYHNlcmlhbGl6ZWAgaG9v
        ayBvZgogICAgdGhlIHJvdXRlOgoKICAgIGBgYGphdmFzY3JpcHQKICAgIGFD
        b250cm9sbGVyLnJlcGxhY2VSb3V0ZSgnYmxvZ1Bvc3QnLCBhUG9zdCk7CiAg
        ICBgYGAKCiAgICBNdWx0aXBsZSBtb2RlbHMgd2lsbCBiZSBhcHBsaWVkIGxh
        c3QgdG8gZmlyc3QgcmVjdXJzaXZlbHkgdXAgdGhlCiAgICByZXNvdXJjZSB0
        cmVlLgoKICAgIGBgYGphdmFzY3JpcHQKICAgIHRoaXMucmVzb3VyY2UoJ2Js
        b2dQb3N0Jywge3BhdGg6JzpibG9nUG9zdElkJ30sIGZ1bmN0aW9uKCl7CiAg
        ICAgIHRoaXMucmVzb3VyY2UoJ2Jsb2dDb21tZW50Jywge3BhdGg6ICc6Ymxv
        Z0NvbW1lbnRJZCd9KTsKICAgIH0pOwoKICAgIGFDb250cm9sbGVyLnJlcGxh
        Y2VSb3V0ZSgnYmxvZ0NvbW1lbnQnLCBhUG9zdCwgYUNvbW1lbnQpOwogICAg
        YGBgCgogICAgQHBhcmFtIHtTdHJpbmd9IG5hbWUgdGhlIG5hbWUgb2YgdGhl
        IHJvdXRlCiAgICBAcGFyYW0gey4uLk9iamVjdH0gbW9kZWxzIHRoZSBtb2Rl
        bChzKSB0byBiZSB1c2VkIHdoaWxlIHRyYW5zaXRpb25pbmcKICAgIHRvIHRo
        ZSByb3V0ZS4KICAgIEBmb3IgRW1iZXIuQ29udHJvbGxlck1peGluCiAgICBA
        bWV0aG9kIHJlcGxhY2VSb3V0ZQogICovCiAgcmVwbGFjZVJvdXRlOiBmdW5j
        dGlvbigpIHsKICAgIC8vIHRhcmdldCBtYXkgYmUgZWl0aGVyIGFub3RoZXIg
        Y29udHJvbGxlciBvciBhIHJvdXRlcgogICAgdmFyIHRhcmdldCA9IGdldCh0
        aGlzLCAndGFyZ2V0JyksCiAgICAgICAgbWV0aG9kID0gdGFyZ2V0LnJlcGxh
        Y2VSb3V0ZSB8fCB0YXJnZXQucmVwbGFjZVdpdGg7CiAgICByZXR1cm4gbWV0
        aG9kLmFwcGx5KHRhcmdldCwgYXJndW1lbnRzKTsKICB9LAoKICAvKioKICAg
        IEBkZXByZWNhdGVkCiAgICBAZm9yIEVtYmVyLkNvbnRyb2xsZXJNaXhpbgog
        ICAgQG1ldGhvZCByZXBsYWNlV2l0aAogICovCiAgcmVwbGFjZVdpdGg6IGZ1
        bmN0aW9uKCkgewogICAgRW1iZXIuZGVwcmVjYXRlKCJyZXBsYWNlV2l0aCBp
        cyBkZXByZWNhdGVkLiBQbGVhc2UgdXNlIHJlcGxhY2VSb3V0ZS4iKTsKICAg
        IHJldHVybiB0aGlzLnJlcGxhY2VSb3V0ZS5hcHBseSh0aGlzLCBhcmd1bWVu
        dHMpOwogIH0KfSk7CgoKfSkoKTsKCgoKKGZ1bmN0aW9uKCkgewovKioKQG1v
        ZHVsZSBlbWJlcgpAc3VibW9kdWxlIGVtYmVyLXJvdXRpbmcKKi8KCnZhciBn
        ZXQgPSBFbWJlci5nZXQsIHNldCA9IEVtYmVyLnNldDsKCkVtYmVyLlZpZXcu
        cmVvcGVuKHsKCiAgLyoqCiAgICBTZXRzIHRoZSBwcml2YXRlIGBfb3V0bGV0
        c2Agb2JqZWN0IG9uIHRoZSB2aWV3LgoKICAgIEBtZXRob2QgaW5pdAogICAq
        LwogIGluaXQ6IGZ1bmN0aW9uKCkgewogICAgc2V0KHRoaXMsICdfb3V0bGV0
        cycsIHt9KTsKICAgIHRoaXMuX3N1cGVyKCk7CiAgfSwKCiAgLyoqCiAgICBN
        YW51YWxseSBmaWxsIGFueSBvZiBhIHZpZXcncyBge3tvdXRsZXR9fWAgYXJl
        YXMgd2l0aCB0aGUKICAgIHN1cHBsaWVkIHZpZXcuCgogICAgRXhhbXBsZQoK
        ICAgIGBgYGphdmFzY3JpcHQKICAgIHZhciBNeVZpZXcgPSBFbWJlci5WaWV3
        LmV4dGVuZCh7CiAgICAgIHRlbXBsYXRlOiBFbWJlci5IYW5kbGViYXJzLmNv
        bXBpbGUoJ0NoaWxkIHZpZXc6IHt7b3V0bGV0ICJtYWluIn19ICcpCiAgICB9
        KTsKICAgIHZhciBteVZpZXcgPSBNeVZpZXcuY3JlYXRlKCk7CiAgICBteVZp
        ZXcuYXBwZW5kVG8oJ2JvZHknKTsKICAgIC8vIFRoZSBodG1sIGZvciBteVZp
        ZXcgbm93IGxvb2tzIGxpa2U6CiAgICAvLyA8ZGl2IGlkPSJlbWJlcjIyOCIg
        Y2xhc3M9ImVtYmVyLXZpZXciPkNoaWxkIHZpZXc6IDwvZGl2PgoKICAgIHZh
        ciBGb29WaWV3ID0gRW1iZXIuVmlldy5leHRlbmQoewogICAgICB0ZW1wbGF0
        ZTogRW1iZXIuSGFuZGxlYmFycy5jb21waWxlKCc8aDE+Rm9vPC9oMT4gJykK
        ICAgIH0pOwogICAgdmFyIGZvb1ZpZXcgPSBGb29WaWV3LmNyZWF0ZSgpOwog
        ICAgbXlWaWV3LmNvbm5lY3RPdXRsZXQoJ21haW4nLCBmb29WaWV3KTsKICAg
        IC8vIFRoZSBodG1sIGZvciBteVZpZXcgbm93IGxvb2tzIGxpa2U6CiAgICAv
        LyA8ZGl2IGlkPSJlbWJlcjIyOCIgY2xhc3M9ImVtYmVyLXZpZXciPkNoaWxk
        IHZpZXc6CiAgICAvLyAgIDxkaXYgaWQ9ImVtYmVyMjM0IiBjbGFzcz0iZW1i
        ZXItdmlldyI+PGgxPkZvbzwvaDE+IDwvZGl2PgogICAgLy8gPC9kaXY+CiAg
        ICBgYGAKICAgIEBtZXRob2QgY29ubmVjdE91dGxldAogICAgQHBhcmFtICB7
        U3RyaW5nfSBvdXRsZXROYW1lIEEgdW5pcXVlIG5hbWUgZm9yIHRoZSBvdXRs
        ZXQKICAgIEBwYXJhbSAge09iamVjdH0gdmlldyAgICAgICBBbiBFbWJlci5W
        aWV3CiAgICovCiAgY29ubmVjdE91dGxldDogZnVuY3Rpb24ob3V0bGV0TmFt
        ZSwgdmlldykgewogICAgaWYgKHRoaXMuX3BlbmRpbmdEaXNjb25uZWN0aW9u
        cykgewogICAgICBkZWxldGUgdGhpcy5fcGVuZGluZ0Rpc2Nvbm5lY3Rpb25z
        W291dGxldE5hbWVdOwogICAgfQoKICAgIGlmICh0aGlzLl9oYXNFcXVpdmFs
        ZW50VmlldyhvdXRsZXROYW1lLCB2aWV3KSkgewogICAgICB2aWV3LmRlc3Ry
        b3koKTsKICAgICAgcmV0dXJuOwogICAgfQoKICAgIHZhciBvdXRsZXRzID0g
        Z2V0KHRoaXMsICdfb3V0bGV0cycpLAogICAgICAgIGNvbnRhaW5lciA9IGdl
        dCh0aGlzLCAnY29udGFpbmVyJyksCiAgICAgICAgcm91dGVyID0gY29udGFp
        bmVyICYmIGNvbnRhaW5lci5sb29rdXAoJ3JvdXRlcjptYWluJyksCiAgICAg
        ICAgcmVuZGVyZWROYW1lID0gZ2V0KHZpZXcsICdyZW5kZXJlZE5hbWUnKTsK
        CiAgICBzZXQob3V0bGV0cywgb3V0bGV0TmFtZSwgdmlldyk7CgogICAgaWYg
        KHJvdXRlciAmJiByZW5kZXJlZE5hbWUpIHsKICAgICAgcm91dGVyLl9jb25u
        ZWN0QWN0aXZlVmlldyhyZW5kZXJlZE5hbWUsIHZpZXcpOwogICAgfQogIH0s
        CgogIC8qKgogICAgRGV0ZXJtaW5lcyBpZiB0aGUgdmlldyBoYXMgYWxyZWFk
        eSBiZWVuIGNyZWF0ZWQgYnkgY2hlY2tpbmcgaWYKICAgIHRoZSB2aWV3IGhh
        cyB0aGUgc2FtZSBjb25zdHJ1Y3RvciwgdGVtcGxhdGUsIGFuZCBjb250ZXh0
        IGFzIHRoZQogICAgdmlldyBpbiB0aGUgYF9vdXRsZXRzYCBvYmplY3QuCgog
        ICAgQHByaXZhdGUKICAgIEBtZXRob2QgX2hhc0VxdWl2YWxlbnRWaWV3CiAg
        ICBAcGFyYW0gIHtTdHJpbmd9IG91dGxldE5hbWUgVGhlIG5hbWUgb2YgdGhl
        IG91dGxldCB3ZSBhcmUgY2hlY2tpbmcKICAgIEBwYXJhbSAge09iamVjdH0g
        dmlldyAgICAgICBBbiBFbWJlci5WaWV3CiAgICBAcmV0dXJuIHtCb29sZWFu
        fQogICAqLwogIF9oYXNFcXVpdmFsZW50VmlldzogZnVuY3Rpb24ob3V0bGV0
        TmFtZSwgdmlldykgewogICAgdmFyIGV4aXN0aW5nVmlldyA9IGdldCh0aGlz
        LCAnX291dGxldHMuJytvdXRsZXROYW1lKTsKICAgIHJldHVybiBleGlzdGlu
        Z1ZpZXcgJiYKICAgICAgZXhpc3RpbmdWaWV3LmNvbnN0cnVjdG9yID09PSB2
        aWV3LmNvbnN0cnVjdG9yICYmCiAgICAgIGV4aXN0aW5nVmlldy5nZXQoJ3Rl
        bXBsYXRlJykgPT09IHZpZXcuZ2V0KCd0ZW1wbGF0ZScpICYmCiAgICAgIGV4
        aXN0aW5nVmlldy5nZXQoJ2NvbnRleHQnKSA9PT0gdmlldy5nZXQoJ2NvbnRl
        eHQnKTsKICB9LAoKICAvKioKICAgIFJlbW92ZXMgYW4gb3V0bGV0IGZyb20g
        dGhlIHZpZXcuCgogICAgRXhhbXBsZQoKICAgIGBgYGphdmFzY3JpcHQKICAg
        IHZhciBNeVZpZXcgPSBFbWJlci5WaWV3LmV4dGVuZCh7CiAgICAgIHRlbXBs
        YXRlOiBFbWJlci5IYW5kbGViYXJzLmNvbXBpbGUoJ0NoaWxkIHZpZXc6IHt7
        b3V0bGV0ICJtYWluIn19ICcpCiAgICB9KTsKICAgIHZhciBteVZpZXcgPSBN
        eVZpZXcuY3JlYXRlKCk7CiAgICBteVZpZXcuYXBwZW5kVG8oJ2JvZHknKTsK
        ICAgIC8vIG15VmlldydzIGh0bWw6CiAgICAvLyA8ZGl2IGlkPSJlbWJlcjIy
        OCIgY2xhc3M9ImVtYmVyLXZpZXciPkNoaWxkIHZpZXc6IDwvZGl2PgoKICAg
        IHZhciBGb29WaWV3ID0gRW1iZXIuVmlldy5leHRlbmQoewogICAgICB0ZW1w
        bGF0ZTogRW1iZXIuSGFuZGxlYmFycy5jb21waWxlKCc8aDE+Rm9vPC9oMT4g
        JykKICAgIH0pOwogICAgdmFyIGZvb1ZpZXcgPSBGb29WaWV3LmNyZWF0ZSgp
        OwogICAgbXlWaWV3LmNvbm5lY3RPdXRsZXQoJ21haW4nLCBmb29WaWV3KTsK
        ICAgIC8vIG15VmlldydzIGh0bWw6CiAgICAvLyA8ZGl2IGlkPSJlbWJlcjIy
        OCIgY2xhc3M9ImVtYmVyLXZpZXciPkNoaWxkIHZpZXc6CiAgICAvLyAgIDxk
        aXYgaWQ9ImVtYmVyMjM0IiBjbGFzcz0iZW1iZXItdmlldyI+PGgxPkZvbzwv
        aDE+IDwvZGl2PgogICAgLy8gPC9kaXY+CgogICAgbXlWaWV3LmRpc2Nvbm5l
        Y3RPdXRsZXQoJ21haW4nKTsKICAgIC8vIG15VmlldydzIGh0bWw6CiAgICAv
        LyA8ZGl2IGlkPSJlbWJlcjIyOCIgY2xhc3M9ImVtYmVyLXZpZXciPkNoaWxk
        IHZpZXc6IDwvZGl2PgogICAgYGBgCgogICAgQG1ldGhvZCBkaXNjb25uZWN0
        T3V0bGV0CiAgICBAcGFyYW0gIHtTdHJpbmd9IG91dGxldE5hbWUgVGhlIG5h
        bWUgb2YgdGhlIG91dGxldCB0byBiZSByZW1vdmVkCiAgICovCiAgZGlzY29u
        bmVjdE91dGxldDogZnVuY3Rpb24ob3V0bGV0TmFtZSkgewogICAgaWYgKCF0
        aGlzLl9wZW5kaW5nRGlzY29ubmVjdGlvbnMpIHsKICAgICAgdGhpcy5fcGVu
        ZGluZ0Rpc2Nvbm5lY3Rpb25zID0ge307CiAgICB9CiAgICB0aGlzLl9wZW5k
        aW5nRGlzY29ubmVjdGlvbnNbb3V0bGV0TmFtZV0gPSB0cnVlOwogICAgRW1i
        ZXIucnVuLm9uY2UodGhpcywgJ19maW5pc2hEaXNjb25uZWN0aW9ucycpOwog
        IH0sCgogIC8qKgogICAgR2V0cyBhbiBvdXRsZXQgdGhhdCBpcyBwZW5kaW5n
        IGRpc2Nvbm5lY3Rpb24gYW5kIHRoZW4KICAgIG51bGxpZnlzIHRoZSBvYmpl
        Y3Qgb24gdGhlIGBfb3V0bGV0YCBvYmplY3QuCgogICAgQHByaXZhdGUKICAg
        IEBtZXRob2QgX2ZpbmlzaERpc2Nvbm5lY3Rpb25zCiAgICovCiAgX2Zpbmlz
        aERpc2Nvbm5lY3Rpb25zOiBmdW5jdGlvbigpIHsKICAgIGlmICh0aGlzLmlz
        RGVzdHJveWVkKSByZXR1cm47IC8vIF9vdXRsZXRzIHdpbGwgYmUgZ29uZSBh
        bnl3YXkKICAgIHZhciBvdXRsZXRzID0gZ2V0KHRoaXMsICdfb3V0bGV0cycp
        OwogICAgdmFyIHBlbmRpbmdEaXNjb25uZWN0aW9ucyA9IHRoaXMuX3BlbmRp
        bmdEaXNjb25uZWN0aW9uczsKICAgIHRoaXMuX3BlbmRpbmdEaXNjb25uZWN0
        aW9ucyA9IG51bGw7CgogICAgZm9yICh2YXIgb3V0bGV0TmFtZSBpbiBwZW5k
        aW5nRGlzY29ubmVjdGlvbnMpIHsKICAgICAgc2V0KG91dGxldHMsIG91dGxl
        dE5hbWUsIG51bGwpOwogICAgfQogIH0KfSk7Cgp9KSgpOwoKCgooZnVuY3Rp
        b24oKSB7Ci8qKgpAbW9kdWxlIGVtYmVyCkBzdWJtb2R1bGUgZW1iZXItdmll
        d3MKKi8KCi8vIEFkZCBhIG5ldyBuYW1lZCBxdWV1ZSBhZnRlciB0aGUgJ2Fj
        dGlvbnMnIHF1ZXVlICh3aGVyZSBSU1ZQIHByb21pc2VzCi8vIHJlc29sdmUp
        LCB3aGljaCBpcyB1c2VkIGluIHJvdXRlciB0cmFuc2l0aW9ucyB0byBwcmV2
        ZW50IHVubmVjZXNzYXJ5Ci8vIGxvYWRpbmcgc3RhdGUgZW50cnkgaWYgYWxs
        IGNvbnRleHQgcHJvbWlzZXMgcmVzb2x2ZSBvbiB0aGUgCi8vICdhY3Rpb25z
        JyBxdWV1ZSBmaXJzdC4KCnZhciBxdWV1ZXMgPSBFbWJlci5ydW4ucXVldWVz
        LAogICAgaW5kZXhPZiA9IEVtYmVyLkFycmF5UG9seWZpbGxzLmluZGV4T2Y7
        CnF1ZXVlcy5zcGxpY2UoaW5kZXhPZi5jYWxsKHF1ZXVlcywgJ2FjdGlvbnMn
        KSArIDEsIDAsICdyb3V0ZXJUcmFuc2l0aW9ucycpOwoKfSkoKTsKCgoKKGZ1
        bmN0aW9uKCkgewovKioKQG1vZHVsZSBlbWJlcgpAc3VibW9kdWxlIGVtYmVy
        LXJvdXRpbmcKKi8KCnZhciBnZXQgPSBFbWJlci5nZXQsIHNldCA9IEVtYmVy
        LnNldDsKCi8qKgogIEVtYmVyLkxvY2F0aW9uIHJldHVybnMgYW4gaW5zdGFu
        Y2Ugb2YgdGhlIGNvcnJlY3QgaW1wbGVtZW50YXRpb24gb2YKICB0aGUgYGxv
        Y2F0aW9uYCBBUEkuCgogICMjIEltcGxlbWVudGF0aW9ucwoKICBZb3UgY2Fu
        IHBhc3MgYW4gaW1wbGVtZW50YXRpb24gbmFtZSAoYGhhc2hgLCBgaGlzdG9y
        eWAsIGBub25lYCkgdG8gZm9yY2UgYQogIHBhcnRpY3VsYXIgaW1wbGVtZW50
        YXRpb24gdG8gYmUgdXNlZCBpbiB5b3VyIGFwcGxpY2F0aW9uLgoKICAjIyMg
        SGFzaExvY2F0aW9uCgogIFVzaW5nIGBIYXNoTG9jYXRpb25gIHJlc3VsdHMg
        aW4gVVJMcyB3aXRoIGEgYCNgIChoYXNoIHNpZ24pIHNlcGFyYXRpbmcgdGhl
        CiAgc2VydmVyIHNpZGUgVVJMIHBvcnRpb24gb2YgdGhlIFVSTCBmcm9tIHRo
        ZSBwb3J0aW9uIHRoYXQgaXMgdXNlZCBieSBFbWJlci4KICBUaGlzIHJlbGll
        cyB1cG9uIHRoZSBgaGFzaGNoYW5nZWAgZXZlbnQgZXhpc3RpbmcgaW4gdGhl
        IGJyb3dzZXIuCgogIEV4YW1wbGU6CgogIGBgYGphdmFzY3JpcHQKICBBcHAu
        Um91dGVyLm1hcChmdW5jdGlvbigpIHsKICAgIHRoaXMucmVzb3VyY2UoJ3Bv
        c3RzJywgZnVuY3Rpb24oKSB7CiAgICAgIHRoaXMucm91dGUoJ25ldycpOwog
        ICAgfSk7CiAgfSk7CgogIEFwcC5Sb3V0ZXIucmVvcGVuKHsKICAgIGxvY2F0
        aW9uOiAnaGFzaCcKICB9KTsKICBgYGAKCiAgVGhpcyB3aWxsIHJlc3VsdCBp
        biBhIHBvc3RzLm5ldyB1cmwgb2YgYC8jL3Bvc3RzL25ld2AuCgogICMjIyBI
        aXN0b3J5TG9jYXRpb24KCiAgVXNpbmcgYEhpc3RvcnlMb2NhdGlvbmAgcmVz
        dWx0cyBpbiBVUkxzIHRoYXQgYXJlIGluZGlzdGluZ3Vpc2hhYmxlIGZyb20g
        YQogIHN0YW5kYXJkIFVSTC4gVGhpcyByZWxpZXMgdXBvbiB0aGUgYnJvd3Nl
        cidzIGBoaXN0b3J5YCBBUEkuCgogIEV4YW1wbGU6CgogIGBgYGphdmFzY3Jp
        cHQKICBBcHAuUm91dGVyLm1hcChmdW5jdGlvbigpIHsKICAgIHRoaXMucmVz
        b3VyY2UoJ3Bvc3RzJywgZnVuY3Rpb24oKSB7CiAgICAgIHRoaXMucm91dGUo
        J25ldycpOwogICAgfSk7CiAgfSk7CgogIEFwcC5Sb3V0ZXIucmVvcGVuKHsK
        ICAgIGxvY2F0aW9uOiAnaGlzdG9yeScKICB9KTsKICBgYGAKCiAgVGhpcyB3
        aWxsIHJlc3VsdCBpbiBhIHBvc3RzLm5ldyB1cmwgb2YgYC9wb3N0cy9uZXdg
        LgoKICBLZWVwIGluIG1pbmQgdGhhdCB5b3VyIHNlcnZlciBtdXN0IHNlcnZl
        IHRoZSBFbWJlciBhcHAgYXQgYWxsIHRoZSByb3V0ZXMgeW91CiAgZGVmaW5l
        LgoKICAjIyMgQXV0b0xvY2F0aW9uCgogIFVzaW5nIGBBdXRvTG9jYXRpb25g
        LCB0aGUgcm91dGVyIHdpbGwgdXNlIHRoZSBiZXN0IExvY2F0aW9uIGNsYXNz
        IHN1cHBvcnRlZCBieQogIHRoZSBicm93c2VyIGl0IGlzIHJ1bm5pbmcgaW4u
        CgogIEJyb3dzZXJzIHRoYXQgc3VwcG9ydCB0aGUgYGhpc3RvcnlgIEFQSSB3
        aWxsIHVzZSBgSGlzdG9yeUxvY2F0aW9uYCwgdGhvc2UgdGhhdAogIGRvIG5v
        dCwgYnV0IHN0aWxsIHN1cHBvcnQgdGhlIGBoYXNoY2hhbmdlYCBldmVudCB3
        aWxsIHVzZSBgSGFzaExvY2F0aW9uYCwgYW5kCiAgaW4gdGhlIHJhcmUgY2Fz
        ZSBuZWl0aGVyIGlzIHN1cHBvcnRlZCB3aWxsIHVzZSBgTm9uZUxvY2F0aW9u
        YC4KCiAgRXhhbXBsZToKCiAgYGBgamF2YXNjcmlwdAogIEFwcC5Sb3V0ZXIu
        bWFwKGZ1bmN0aW9uKCkgewogICAgdGhpcy5yZXNvdXJjZSgncG9zdHMnLCBm
        dW5jdGlvbigpIHsKICAgICAgdGhpcy5yb3V0ZSgnbmV3Jyk7CiAgICB9KTsK
        ICB9KTsKCiAgQXBwLlJvdXRlci5yZW9wZW4oewogICAgbG9jYXRpb246ICdh
        dXRvJwogIH0pOwogIGBgYAoKICBUaGlzIHdpbGwgcmVzdWx0IGluIGEgcG9z
        dHMubmV3IHVybCBvZiBgL3Bvc3RzL25ld2AgZm9yIG1vZGVybiBicm93c2Vy
        cyB0aGF0CiAgc3VwcG9ydCB0aGUgYGhpc3RvcnlgIGFwaSBvciBgLyMvcG9z
        dHMvbmV3YCBmb3Igb2xkZXIgb25lcywgbGlrZSBJbnRlcm5ldAogIEV4cGxv
        cmVyIDkgYW5kIGJlbG93LgoKICBXaGVuIGEgdXNlciB2aXNpdHMgYSBsaW5r
        IHRvIHlvdXIgYXBwbGljYXRpb24sIHRoZXkgd2lsbCBiZSBhdXRvbWF0aWNh
        bGx5CiAgdXBncmFkZWQgb3IgZG93bmdyYWRlZCB0byB0aGUgYXBwcm9wcmlh
        dGUgYExvY2F0aW9uYCBjbGFzcywgd2l0aCB0aGUgVVJMCiAgdHJhbnNmb3Jt
        ZWQgYWNjb3JkaW5nbHksIGlmIG5lZWRlZC4KCiAgS2VlcCBpbiBtaW5kIHRo
        YXQgc2luY2Ugc29tZSBvZiB5b3VyIHVzZXJzIHdpbGwgdXNlIGBIaXN0b3J5
        TG9jYXRpb25gLCB5b3VyCiAgc2VydmVyIG11c3Qgc2VydmUgdGhlIEVtYmVy
        IGFwcCBhdCBhbGwgdGhlIHJvdXRlcyB5b3UgZGVmaW5lLgoKICAjIyMgTm9u
        ZUxvY2F0aW9uCgogIFVzaW5nIGBOb25lTG9jYXRpb25gIGNhdXNlcyBFbWJl
        ciB0byBub3Qgc3RvcmUgdGhlIGFwcGxpY2F0aW9ucyBVUkwgc3RhdGUKICBp
        biB0aGUgYWN0dWFsIFVSTC4gVGhpcyBpcyBnZW5lcmFsbHkgdXNlZCBmb3Ig
        dGVzdGluZyBwdXJwb3NlcywgYW5kIGlzIG9uZQogIG9mIHRoZSBjaGFuZ2Vz
        IG1hZGUgd2hlbiBjYWxsaW5nIGBBcHAuc2V0dXBGb3JUZXN0aW5nKClgLgoK
        ICAjIyBMb2NhdGlvbiBBUEkKCiAgRWFjaCBsb2NhdGlvbiBpbXBsZW1lbnRh
        dGlvbiBtdXN0IHByb3ZpZGUgdGhlIGZvbGxvd2luZyBtZXRob2RzOgoKICAq
        IGltcGxlbWVudGF0aW9uOiByZXR1cm5zIHRoZSBzdHJpbmcgbmFtZSB1c2Vk
        IHRvIHJlZmVyZW5jZSB0aGUgaW1wbGVtZW50YXRpb24uCiAgKiBnZXRVUkw6
        IHJldHVybnMgdGhlIGN1cnJlbnQgVVJMLgogICogc2V0VVJMKHBhdGgpOiBz
        ZXRzIHRoZSBjdXJyZW50IFVSTC4KICAqIHJlcGxhY2VVUkwocGF0aCk6IHJl
        cGxhY2UgdGhlIGN1cnJlbnQgVVJMIChvcHRpb25hbCkuCiAgKiBvblVwZGF0
        ZVVSTChjYWxsYmFjayk6IHRyaWdnZXJzIHRoZSBjYWxsYmFjayB3aGVuIHRo
        ZSBVUkwgY2hhbmdlcy4KICAqIGZvcm1hdFVSTCh1cmwpOiBmb3JtYXRzIGB1
        cmxgIHRvIGJlIHBsYWNlZCBpbnRvIGBocmVmYCBhdHRyaWJ1dGUuCgogIENh
        bGxpbmcgc2V0VVJMIG9yIHJlcGxhY2VVUkwgd2lsbCBub3QgdHJpZ2dlciBv
        blVwZGF0ZVVSTCBjYWxsYmFja3MuCgogIEBjbGFzcyBMb2NhdGlvbgogIEBu
        YW1lc3BhY2UgRW1iZXIKICBAc3RhdGljCiovCkVtYmVyLkxvY2F0aW9uID0g
        ewogIC8qKgogICBUaGlzIGlzIGRlcHJlY2F0ZWQgaW4gZmF2b3Igb2YgdXNp
        bmcgdGhlIGNvbnRhaW5lciB0byBsb29rdXAgdGhlIGxvY2F0aW9uCiAgIGlt
        cGxlbWVudGF0aW9uIGFzIGRlc2lyZWQuCgogICBGb3IgZXhhbXBsZToKCiAg
        IGBgYGphdmFzY3JpcHQKICAgLy8gR2l2ZW4gYSBsb2NhdGlvbiByZWdpc3Rl
        cmVkIGFzIGZvbGxvd3M6CiAgIGNvbnRhaW5lci5yZWdpc3RlcignbG9jYXRp
        b246aGlzdG9yeS10ZXN0JywgSGlzdG9yeVRlc3RMb2NhdGlvbik7CgogICAv
        LyBZb3UgY291bGQgY3JlYXRlIGEgbmV3IGluc3RhbmNlIHZpYToKICAgY29u
        dGFpbmVyLmxvb2t1cCgnbG9jYXRpb246aGlzdG9yeS10ZXN0Jyk7CiAgIGBg
        YAoKICAgIEBtZXRob2QgY3JlYXRlCiAgICBAcGFyYW0ge09iamVjdH0gb3B0
        aW9ucwogICAgQHJldHVybiB7T2JqZWN0fSBhbiBpbnN0YW5jZSBvZiBhbiBp
        bXBsZW1lbnRhdGlvbiBvZiB0aGUgYGxvY2F0aW9uYCBBUEkKICAgIEBkZXBy
        ZWNhdGVkIFVzZSB0aGUgY29udGFpbmVyIHRvIGxvb2t1cCB0aGUgbG9jYXRp
        b24gaW1wbGVtZW50YXRpb24gdGhhdCB5b3UKICAgIG5lZWQuCiAgKi8KICBj
        cmVhdGU6IGZ1bmN0aW9uKG9wdGlvbnMpIHsKICAgIHZhciBpbXBsZW1lbnRh
        dGlvbiA9IG9wdGlvbnMgJiYgb3B0aW9ucy5pbXBsZW1lbnRhdGlvbjsKICAg
        IEVtYmVyLmFzc2VydCgiRW1iZXIuTG9jYXRpb24uY3JlYXRlOiB5b3UgbXVz
        dCBzcGVjaWZ5IGEgJ2ltcGxlbWVudGF0aW9uJyBvcHRpb24iLCAhIWltcGxl
        bWVudGF0aW9uKTsKCiAgICB2YXIgaW1wbGVtZW50YXRpb25DbGFzcyA9IHRo
        aXMuaW1wbGVtZW50YXRpb25zW2ltcGxlbWVudGF0aW9uXTsKICAgIEVtYmVy
        LmFzc2VydCgiRW1iZXIuTG9jYXRpb24uY3JlYXRlOiAiICsgaW1wbGVtZW50
        YXRpb24gKyAiIGlzIG5vdCBhIHZhbGlkIGltcGxlbWVudGF0aW9uIiwgISFp
        bXBsZW1lbnRhdGlvbkNsYXNzKTsKCiAgICByZXR1cm4gaW1wbGVtZW50YXRp
        b25DbGFzcy5jcmVhdGUuYXBwbHkoaW1wbGVtZW50YXRpb25DbGFzcywgYXJn
        dW1lbnRzKTsKICB9LAoKICAvKioKICAgVGhpcyBpcyBkZXByZWNhdGVkIGlu
        IGZhdm9yIG9mIHVzaW5nIHRoZSBjb250YWluZXIgdG8gcmVnaXN0ZXIgdGhl
        CiAgIGxvY2F0aW9uIGltcGxlbWVudGF0aW9uIGFzIGRlc2lyZWQuCgogICBF
        eGFtcGxlOgoKICAgYGBgamF2YXNjcmlwdAogICBBcHBsaWNhdGlvbi5pbml0
        aWFsaXplcih7CiAgICBuYW1lOiAiaGlzdG9yeS10ZXN0LWxvY2F0aW9uIiwK
        CiAgICBpbml0aWFsaXplOiBmdW5jdGlvbihjb250YWluZXIsIGFwcGxpY2F0
        aW9uKSB7CiAgICAgIGFwcGxpY2F0aW9uLnJlZ2lzdGVyKCdsb2NhdGlvbjpo
        aXN0b3J5LXRlc3QnLCBIaXN0b3J5VGVzdExvY2F0aW9uKTsKICAgIH0KICAg
        fSk7CiAgIGBgYAoKICAgQG1ldGhvZCByZWdpc3RlckltcGxlbWVudGF0aW9u
        CiAgIEBwYXJhbSB7U3RyaW5nfSBuYW1lCiAgIEBwYXJhbSB7T2JqZWN0fSBp
        bXBsZW1lbnRhdGlvbiBvZiB0aGUgYGxvY2F0aW9uYCBBUEkKICAgQGRlcHJl
        Y2F0ZWQgUmVnaXN0ZXIgeW91ciBjdXN0b20gbG9jYXRpb24gaW1wbGVtZW50
        YXRpb24gd2l0aCB0aGUKICAgY29udGFpbmVyIGRpcmVjdGx5LgogICovCiAg
        cmVnaXN0ZXJJbXBsZW1lbnRhdGlvbjogZnVuY3Rpb24obmFtZSwgaW1wbGVt
        ZW50YXRpb24pIHsKICAgIEVtYmVyLmRlcHJlY2F0ZSgnVXNpbmcgdGhlIEVt
        YmVyLkxvY2F0aW9uLnJlZ2lzdGVySW1wbGVtZW50YXRpb24gaXMgbm8gbG9u
        Z2VyIHN1cHBvcnRlZC4gUmVnaXN0ZXIgeW91ciBjdXN0b20gbG9jYXRpb24g
        aW1wbGVtZW50YXRpb24gd2l0aCB0aGUgY29udGFpbmVyIGluc3RlYWQuJywg
        ZmFsc2UpOwoKICAgIHRoaXMuaW1wbGVtZW50YXRpb25zW25hbWVdID0gaW1w
        bGVtZW50YXRpb247CiAgfSwKCiAgaW1wbGVtZW50YXRpb25zOiB7fSwKCiAg
        LyoqCiAgICBSZXR1cm5zIHRoZSBjdXJyZW50IGBsb2NhdGlvbi5oYXNoYCBi
        eSBwYXJzaW5nIGxvY2F0aW9uLmhyZWYgc2luY2UgYnJvd3NlcnMKICAgIGlu
        Y29uc2lzdGVudGx5IFVSTC1kZWNvZGUgYGxvY2F0aW9uLmhhc2hgLgogIAog
        ICAgaHR0cHM6Ly9idWd6aWxsYS5tb3ppbGxhLm9yZy9zaG93X2J1Zy5jZ2k/
        aWQ9NDgzMzA0CgogICAgQHByaXZhdGUKICAgIEBtZXRob2QgZ2V0SGFzaAog
        ICovCiAgZ2V0SGFzaDogZnVuY3Rpb24gKCkgewogICAgdmFyIGhyZWYgPSB3
        aW5kb3cubG9jYXRpb24uaHJlZiwKICAgICAgICBoYXNoSW5kZXggPSBocmVm
        LmluZGV4T2YoJyMnKTsKCiAgICBpZiAoaGFzaEluZGV4ID09PSAtMSkgewog
        ICAgICByZXR1cm4gJyc7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gaHJl
        Zi5zdWJzdHIoaGFzaEluZGV4KTsKICAgIH0KICB9Cn07Cgp9KSgpOwoKCgoo
        ZnVuY3Rpb24oKSB7Ci8qKgpAbW9kdWxlIGVtYmVyCkBzdWJtb2R1bGUgZW1i
        ZXItcm91dGluZwoqLwoKdmFyIGdldCA9IEVtYmVyLmdldCwgc2V0ID0gRW1i
        ZXIuc2V0OwoKLyoqCiAgRW1iZXIuTm9uZUxvY2F0aW9uIGRvZXMgbm90IGlu
        dGVyYWN0IHdpdGggdGhlIGJyb3dzZXIuIEl0IGlzIHVzZWZ1bCBmb3IKICB0
        ZXN0aW5nLCBvciB3aGVuIHlvdSBuZWVkIHRvIG1hbmFnZSBzdGF0ZSB3aXRo
        IHlvdXIgUm91dGVyLCBidXQgdGVtcG9yYXJpbHkKICBkb24ndCB3YW50IGl0
        IHRvIG11Y2sgd2l0aCB0aGUgVVJMIChmb3IgZXhhbXBsZSB3aGVuIHlvdSBl
        bWJlZCB5b3VyCiAgYXBwbGljYXRpb24gaW4gYSBsYXJnZXIgcGFnZSkuCgog
        IEBjbGFzcyBOb25lTG9jYXRpb24KICBAbmFtZXNwYWNlIEVtYmVyCiAgQGV4
        dGVuZHMgRW1iZXIuT2JqZWN0CiovCkVtYmVyLk5vbmVMb2NhdGlvbiA9IEVt
        YmVyLk9iamVjdC5leHRlbmQoewogIGltcGxlbWVudGF0aW9uOiAnbm9uZScs
        CiAgcGF0aDogJycsCgogIC8qKgogICAgUmV0dXJucyB0aGUgY3VycmVudCBw
        YXRoLgoKICAgIEBwcml2YXRlCiAgICBAbWV0aG9kIGdldFVSTAogICAgQHJl
        dHVybiB7U3RyaW5nfSBwYXRoCiAgKi8KICBnZXRVUkw6IGZ1bmN0aW9uKCkg
        ewogICAgcmV0dXJuIGdldCh0aGlzLCAncGF0aCcpOwogIH0sCgogIC8qKgog
        ICAgU2V0IHRoZSBwYXRoIGFuZCByZW1lbWJlcnMgd2hhdCB3YXMgc2V0LiBV
        c2luZyB0aGlzIG1ldGhvZAogICAgdG8gY2hhbmdlIHRoZSBwYXRoIHdpbGwg
        bm90IGludm9rZSB0aGUgYHVwZGF0ZVVSTGAgY2FsbGJhY2suCgogICAgQHBy
        aXZhdGUKICAgIEBtZXRob2Qgc2V0VVJMCiAgICBAcGFyYW0gcGF0aCB7U3Ry
        aW5nfQogICovCiAgc2V0VVJMOiBmdW5jdGlvbihwYXRoKSB7CiAgICBzZXQo
        dGhpcywgJ3BhdGgnLCBwYXRoKTsKICB9LAoKICAvKioKICAgIFJlZ2lzdGVy
        IGEgY2FsbGJhY2sgdG8gYmUgaW52b2tlZCB3aGVuIHRoZSBwYXRoIGNoYW5n
        ZXMuIFRoZXNlCiAgICBjYWxsYmFja3Mgd2lsbCBleGVjdXRlIHdoZW4gdGhl
        IHVzZXIgcHJlc3NlcyB0aGUgYmFjayBvciBmb3J3YXJkCiAgICBidXR0b24s
        IGJ1dCBub3QgYWZ0ZXIgYHNldFVSTGAgaXMgaW52b2tlZC4KCiAgICBAcHJp
        dmF0ZQogICAgQG1ldGhvZCBvblVwZGF0ZVVSTAogICAgQHBhcmFtIGNhbGxi
        YWNrIHtGdW5jdGlvbn0KICAqLwogIG9uVXBkYXRlVVJMOiBmdW5jdGlvbihj
        YWxsYmFjaykgewogICAgdGhpcy51cGRhdGVDYWxsYmFjayA9IGNhbGxiYWNr
        OwogIH0sCgogIC8qKgogICAgU2V0cyB0aGUgcGF0aCBhbmQgY2FsbHMgdGhl
        IGB1cGRhdGVVUkxgIGNhbGxiYWNrLgoKICAgIEBwcml2YXRlCiAgICBAbWV0
        aG9kIGhhbmRsZVVSTAogICAgQHBhcmFtIGNhbGxiYWNrIHtGdW5jdGlvbn0K
        ICAqLwogIGhhbmRsZVVSTDogZnVuY3Rpb24odXJsKSB7CiAgICBzZXQodGhp
        cywgJ3BhdGgnLCB1cmwpOwogICAgdGhpcy51cGRhdGVDYWxsYmFjayh1cmwp
        OwogIH0sCgogIC8qKgogICAgR2l2ZW4gYSBVUkwsIGZvcm1hdHMgaXQgdG8g
        YmUgcGxhY2VkIGludG8gdGhlIHBhZ2UgYXMgcGFydAogICAgb2YgYW4gZWxl
        bWVudCdzIGBocmVmYCBhdHRyaWJ1dGUuCgogICAgVGhpcyBpcyB1c2VkLCBm
        b3IgZXhhbXBsZSwgd2hlbiB1c2luZyB0aGUge3thY3Rpb259fSBoZWxwZXIK
        ICAgIHRvIGdlbmVyYXRlIGEgVVJMIGJhc2VkIG9uIGFuIGV2ZW50LgoKICAg
        IEBwcml2YXRlCiAgICBAbWV0aG9kIGZvcm1hdFVSTAogICAgQHBhcmFtIHVy
        bCB7U3RyaW5nfQogICAgQHJldHVybiB7U3RyaW5nfSB1cmwKICAqLwogIGZv
        cm1hdFVSTDogZnVuY3Rpb24odXJsKSB7CiAgICAvLyBUaGUgcmV0dXJuIHZh
        bHVlIGlzIG5vdCBvdmVybHkgbWVhbmluZ2Z1bCwgYnV0IHdlIGRvIG5vdCB3
        YW50IHRvIHRocm93CiAgICAvLyBlcnJvcnMgd2hlbiB0ZXN0IGNvZGUgcmVu
        ZGVycyB0ZW1wbGF0ZXMgY29udGFpbmluZyB7e2FjdGlvbiBocmVmPXRydWV9
        fQogICAgLy8gaGVscGVycy4KICAgIHJldHVybiB1cmw7CiAgfQp9KTsKCn0p
        KCk7CgoKCihmdW5jdGlvbigpIHsKLyoqCkBtb2R1bGUgZW1iZXIKQHN1Ym1v
        ZHVsZSBlbWJlci1yb3V0aW5nCiovCgp2YXIgZ2V0ID0gRW1iZXIuZ2V0LCBz
        ZXQgPSBFbWJlci5zZXQsCiAgICBnZXRIYXNoID0gRW1iZXIuTG9jYXRpb24u
        Z2V0SGFzaDsKCi8qKgogIGBFbWJlci5IYXNoTG9jYXRpb25gIGltcGxlbWVu
        dHMgdGhlIGxvY2F0aW9uIEFQSSB1c2luZyB0aGUgYnJvd3NlcidzCiAgaGFz
        aC4gQXQgcHJlc2VudCwgaXQgcmVsaWVzIG9uIGEgYGhhc2hjaGFuZ2VgIGV2
        ZW50IGV4aXN0aW5nIGluIHRoZQogIGJyb3dzZXIuCgogIEBjbGFzcyBIYXNo
        TG9jYXRpb24KICBAbmFtZXNwYWNlIEVtYmVyCiAgQGV4dGVuZHMgRW1iZXIu
        T2JqZWN0CiovCkVtYmVyLkhhc2hMb2NhdGlvbiA9IEVtYmVyLk9iamVjdC5l
        eHRlbmQoewogIGltcGxlbWVudGF0aW9uOiAnaGFzaCcsCgogIGluaXQ6IGZ1
        bmN0aW9uKCkgewogICAgc2V0KHRoaXMsICdsb2NhdGlvbicsIGdldCh0aGlz
        LCAnbG9jYXRpb24nKSB8fCB3aW5kb3cubG9jYXRpb24pOwogIH0sCgogIC8q
        KgogICAgUmV0dXJucyB0aGUgY3VycmVudCBgbG9jYXRpb24uaGFzaGAsIG1p
        bnVzIHRoZSAnIycgYXQgdGhlIGZyb250LgoKICAgIEBwcml2YXRlCiAgICBA
        bWV0aG9kIGdldFVSTAogICovCiAgZ2V0VVJMOiBmdW5jdGlvbigpIHsKICAg
        IHJldHVybiBnZXRIYXNoKCkuc3Vic3RyKDEpOwogIH0sCgogIC8qKgogICAg
        U2V0IHRoZSBgbG9jYXRpb24uaGFzaGAgYW5kIHJlbWVtYmVycyB3aGF0IHdh
        cyBzZXQuIFRoaXMgcHJldmVudHMKICAgIGBvblVwZGF0ZVVSTGAgY2FsbGJh
        Y2tzIGZyb20gdHJpZ2dlcmluZyB3aGVuIHRoZSBoYXNoIHdhcyBzZXQgYnkK
        ICAgIGBIYXNoTG9jYXRpb25gLgoKICAgIEBwcml2YXRlCiAgICBAbWV0aG9k
        IHNldFVSTAogICAgQHBhcmFtIHBhdGgge1N0cmluZ30KICAqLwogIHNldFVS
        TDogZnVuY3Rpb24ocGF0aCkgewogICAgZ2V0KHRoaXMsICdsb2NhdGlvbicp
        Lmhhc2ggPSBwYXRoOwogICAgc2V0KHRoaXMsICdsYXN0U2V0VVJMJywgcGF0
        aCk7CiAgfSwKCiAgLyoqCiAgICBVc2VzIGxvY2F0aW9uLnJlcGxhY2UgdG8g
        dXBkYXRlIHRoZSB1cmwgd2l0aG91dCBhIHBhZ2UgcmVsb2FkCiAgICBvciBo
        aXN0b3J5IG1vZGlmaWNhdGlvbi4KCiAgICBAcHJpdmF0ZQogICAgQG1ldGhv
        ZCByZXBsYWNlVVJMCiAgICBAcGFyYW0gcGF0aCB7U3RyaW5nfQogICovCiAg
        cmVwbGFjZVVSTDogZnVuY3Rpb24ocGF0aCkgewogICAgZ2V0KHRoaXMsICds
        b2NhdGlvbicpLnJlcGxhY2UoJyMnICsgcGF0aCk7CiAgICBzZXQodGhpcywg
        J2xhc3RTZXRVUkwnLCBwYXRoKTsKICB9LAoKICAvKioKICAgIFJlZ2lzdGVy
        IGEgY2FsbGJhY2sgdG8gYmUgaW52b2tlZCB3aGVuIHRoZSBoYXNoIGNoYW5n
        ZXMuIFRoZXNlCiAgICBjYWxsYmFja3Mgd2lsbCBleGVjdXRlIHdoZW4gdGhl
        IHVzZXIgcHJlc3NlcyB0aGUgYmFjayBvciBmb3J3YXJkCiAgICBidXR0b24s
        IGJ1dCBub3QgYWZ0ZXIgYHNldFVSTGAgaXMgaW52b2tlZC4KCiAgICBAcHJp
        dmF0ZQogICAgQG1ldGhvZCBvblVwZGF0ZVVSTAogICAgQHBhcmFtIGNhbGxi
        YWNrIHtGdW5jdGlvbn0KICAqLwogIG9uVXBkYXRlVVJMOiBmdW5jdGlvbihj
        YWxsYmFjaykgewogICAgdmFyIHNlbGYgPSB0aGlzOwogICAgdmFyIGd1aWQg
        PSBFbWJlci5ndWlkRm9yKHRoaXMpOwoKICAgIEVtYmVyLiQod2luZG93KS5v
        bignaGFzaGNoYW5nZS5lbWJlci1sb2NhdGlvbi0nK2d1aWQsIGZ1bmN0aW9u
        KCkgewogICAgICBFbWJlci5ydW4oZnVuY3Rpb24oKSB7CiAgICAgICAgdmFy
        IHBhdGggPSBzZWxmLmdldFVSTCgpOwogICAgICAgIGlmIChnZXQoc2VsZiwg
        J2xhc3RTZXRVUkwnKSA9PT0gcGF0aCkgeyByZXR1cm47IH0KCiAgICAgICAg
        c2V0KHNlbGYsICdsYXN0U2V0VVJMJywgbnVsbCk7CgogICAgICAgIGNhbGxi
        YWNrKHBhdGgpOwogICAgICB9KTsKICAgIH0pOwogIH0sCgogIC8qKgogICAg
        R2l2ZW4gYSBVUkwsIGZvcm1hdHMgaXQgdG8gYmUgcGxhY2VkIGludG8gdGhl
        IHBhZ2UgYXMgcGFydAogICAgb2YgYW4gZWxlbWVudCdzIGBocmVmYCBhdHRy
        aWJ1dGUuCgogICAgVGhpcyBpcyB1c2VkLCBmb3IgZXhhbXBsZSwgd2hlbiB1
        c2luZyB0aGUge3thY3Rpb259fSBoZWxwZXIKICAgIHRvIGdlbmVyYXRlIGEg
        VVJMIGJhc2VkIG9uIGFuIGV2ZW50LgoKICAgIEBwcml2YXRlCiAgICBAbWV0
        aG9kIGZvcm1hdFVSTAogICAgQHBhcmFtIHVybCB7U3RyaW5nfQogICovCiAg
        Zm9ybWF0VVJMOiBmdW5jdGlvbih1cmwpIHsKICAgIHJldHVybiAnIycrdXJs
        OwogIH0sCgogIC8qKgogICAgQ2xlYW5zIHVwIHRoZSBIYXNoTG9jYXRpb24g
        ZXZlbnQgbGlzdGVuZXIuCgogICAgQHByaXZhdGUKICAgIEBtZXRob2Qgd2ls
        bERlc3Ryb3kKICAqLwogIHdpbGxEZXN0cm95OiBmdW5jdGlvbigpIHsKICAg
        IHZhciBndWlkID0gRW1iZXIuZ3VpZEZvcih0aGlzKTsKCiAgICBFbWJlci4k
        KHdpbmRvdykub2ZmKCdoYXNoY2hhbmdlLmVtYmVyLWxvY2F0aW9uLScrZ3Vp
        ZCk7CiAgfQp9KTsKCn0pKCk7CgoKCihmdW5jdGlvbigpIHsKLyoqCkBtb2R1
        bGUgZW1iZXIKQHN1Ym1vZHVsZSBlbWJlci1yb3V0aW5nCiovCgp2YXIgZ2V0
        ID0gRW1iZXIuZ2V0LCBzZXQgPSBFbWJlci5zZXQ7CnZhciBwb3BzdGF0ZUZp
        cmVkID0gZmFsc2U7CnZhciBzdXBwb3J0c0hpc3RvcnlTdGF0ZSA9IHdpbmRv
        dy5oaXN0b3J5ICYmICdzdGF0ZScgaW4gd2luZG93Lmhpc3Rvcnk7CgovKioK
        ICBFbWJlci5IaXN0b3J5TG9jYXRpb24gaW1wbGVtZW50cyB0aGUgbG9jYXRp
        b24gQVBJIHVzaW5nIHRoZSBicm93c2VyJ3MKICBoaXN0b3J5LnB1c2hTdGF0
        ZSBBUEkuCgogIEBjbGFzcyBIaXN0b3J5TG9jYXRpb24KICBAbmFtZXNwYWNl
        IEVtYmVyCiAgQGV4dGVuZHMgRW1iZXIuT2JqZWN0CiovCkVtYmVyLkhpc3Rv
        cnlMb2NhdGlvbiA9IEVtYmVyLk9iamVjdC5leHRlbmQoewogIGltcGxlbWVu
        dGF0aW9uOiAnaGlzdG9yeScsCgogIGluaXQ6IGZ1bmN0aW9uKCkgewogICAg
        c2V0KHRoaXMsICdsb2NhdGlvbicsIGdldCh0aGlzLCAnbG9jYXRpb24nKSB8
        fCB3aW5kb3cubG9jYXRpb24pOwogICAgc2V0KHRoaXMsICdiYXNlVVJMJywg
        RW1iZXIuJCgnYmFzZScpLmF0dHIoJ2hyZWYnKSB8fCAnJyk7CiAgfSwKCiAg
        LyoqCiAgICBVc2VkIHRvIHNldCBzdGF0ZSBvbiBmaXJzdCBjYWxsIHRvIHNl
        dFVSTAoKICAgIEBwcml2YXRlCiAgICBAbWV0aG9kIGluaXRTdGF0ZQogICov
        CiAgaW5pdFN0YXRlOiBmdW5jdGlvbigpIHsKICAgIHNldCh0aGlzLCAnaGlz
        dG9yeScsIGdldCh0aGlzLCAnaGlzdG9yeScpIHx8IHdpbmRvdy5oaXN0b3J5
        KTsKICAgIHRoaXMucmVwbGFjZVN0YXRlKHRoaXMuZm9ybWF0VVJMKHRoaXMu
        Z2V0VVJMKCkpKTsKICB9LAoKICAvKioKICAgIFdpbGwgYmUgcHJlLXBlbmRl
        ZCB0byBwYXRoIHVwb24gc3RhdGUgY2hhbmdlCgogICAgQHByb3BlcnR5IHJv
        b3RVUkwKICAgIEBkZWZhdWx0ICcvJwogICovCiAgcm9vdFVSTDogJy8nLAoK
        ICAvKioKICAgIFJldHVybnMgdGhlIGN1cnJlbnQgYGxvY2F0aW9uLnBhdGhu
        YW1lYCB3aXRob3V0IGByb290VVJMYC4KCiAgICBAcHJpdmF0ZQogICAgQG1l
        dGhvZCBnZXRVUkwKICAgIEByZXR1cm4gdXJsIHtTdHJpbmd9CiAgKi8KICBn
        ZXRVUkw6IGZ1bmN0aW9uKCkgewogICAgdmFyIHJvb3RVUkwgPSBnZXQodGhp
        cywgJ3Jvb3RVUkwnKSwKICAgICAgICBsb2NhdGlvbiA9IGdldCh0aGlzLCAn
        bG9jYXRpb24nKSwKICAgICAgICBwYXRoID0gbG9jYXRpb24ucGF0aG5hbWUs
        CiAgICAgICAgYmFzZVVSTCA9IGdldCh0aGlzLCAnYmFzZVVSTCcpOwoKICAg
        IHJvb3RVUkwgPSByb290VVJMLnJlcGxhY2UoL1wvJC8sICcnKTsKICAgIGJh
        c2VVUkwgPSBiYXNlVVJMLnJlcGxhY2UoL1wvJC8sICcnKTsKICAgIHZhciB1
        cmwgPSBwYXRoLnJlcGxhY2UoYmFzZVVSTCwgJycpLnJlcGxhY2Uocm9vdFVS
        TCwgJycpOwoKICAgIAogICAgcmV0dXJuIHVybDsKICB9LAoKICAvKioKICAg
        IFVzZXMgYGhpc3RvcnkucHVzaFN0YXRlYCB0byB1cGRhdGUgdGhlIHVybCB3
        aXRob3V0IGEgcGFnZSByZWxvYWQuCgogICAgQHByaXZhdGUKICAgIEBtZXRo
        b2Qgc2V0VVJMCiAgICBAcGFyYW0gcGF0aCB7U3RyaW5nfQogICovCiAgc2V0
        VVJMOiBmdW5jdGlvbihwYXRoKSB7CiAgICB2YXIgc3RhdGUgPSB0aGlzLmdl
        dFN0YXRlKCk7CiAgICBwYXRoID0gdGhpcy5mb3JtYXRVUkwocGF0aCk7Cgog
        ICAgaWYgKHN0YXRlICYmIHN0YXRlLnBhdGggIT09IHBhdGgpIHsKICAgICAg
        dGhpcy5wdXNoU3RhdGUocGF0aCk7CiAgICB9CiAgfSwKCiAgLyoqCiAgICBV
        c2VzIGBoaXN0b3J5LnJlcGxhY2VTdGF0ZWAgdG8gdXBkYXRlIHRoZSB1cmwg
        d2l0aG91dCBhIHBhZ2UgcmVsb2FkCiAgICBvciBoaXN0b3J5IG1vZGlmaWNh
        dGlvbi4KCiAgICBAcHJpdmF0ZQogICAgQG1ldGhvZCByZXBsYWNlVVJMCiAg
        ICBAcGFyYW0gcGF0aCB7U3RyaW5nfQogICovCiAgcmVwbGFjZVVSTDogZnVu
        Y3Rpb24ocGF0aCkgewogICAgdmFyIHN0YXRlID0gdGhpcy5nZXRTdGF0ZSgp
        OwogICAgcGF0aCA9IHRoaXMuZm9ybWF0VVJMKHBhdGgpOwoKICAgIGlmIChz
        dGF0ZSAmJiBzdGF0ZS5wYXRoICE9PSBwYXRoKSB7CiAgICAgIHRoaXMucmVw
        bGFjZVN0YXRlKHBhdGgpOwogICAgfQogIH0sCgogIC8qKgogICBHZXQgdGhl
        IGN1cnJlbnQgYGhpc3Rvcnkuc3RhdGVgCiAgIFBvbHlmaWxsIGNoZWNrcyBm
        b3IgbmF0aXZlIGJyb3dzZXIgc3VwcG9ydCBhbmQgZmFsbHMgYmFjayB0byBy
        ZXRyaWV2aW5nCiAgIGZyb20gYSBwcml2YXRlIF9oaXN0b3J5U3RhdGUgdmFy
        aWFibGUKCiAgIEBwcml2YXRlCiAgIEBtZXRob2QgZ2V0U3RhdGUKICAgQHJl
        dHVybiBzdGF0ZSB7T2JqZWN0fQogICovCiAgZ2V0U3RhdGU6IGZ1bmN0aW9u
        KCkgewogICAgcmV0dXJuIHN1cHBvcnRzSGlzdG9yeVN0YXRlID8gZ2V0KHRo
        aXMsICdoaXN0b3J5Jykuc3RhdGUgOiB0aGlzLl9oaXN0b3J5U3RhdGU7CiAg
        fSwKCiAgLyoqCiAgIFB1c2hlcyBhIG5ldyBzdGF0ZS4KCiAgIEBwcml2YXRl
        CiAgIEBtZXRob2QgcHVzaFN0YXRlCiAgIEBwYXJhbSBwYXRoIHtTdHJpbmd9
        CiAgKi8KICBwdXNoU3RhdGU6IGZ1bmN0aW9uKHBhdGgpIHsKICAgIHZhciBz
        dGF0ZSA9IHsgcGF0aDogcGF0aCB9OwoKICAgIGdldCh0aGlzLCAnaGlzdG9y
        eScpLnB1c2hTdGF0ZShzdGF0ZSwgbnVsbCwgcGF0aCk7CgogICAgLy8gc3Rv
        cmUgc3RhdGUgaWYgYnJvd3NlciBkb2Vzbid0IHN1cHBvcnQgYGhpc3Rvcnku
        c3RhdGVgCiAgICBpZiAoIXN1cHBvcnRzSGlzdG9yeVN0YXRlKSB7CiAgICAg
        IHRoaXMuX2hpc3RvcnlTdGF0ZSA9IHN0YXRlOwogICAgfQoKICAgIC8vIHVz
        ZWQgZm9yIHdlYmtpdCB3b3JrYXJvdW5kCiAgICB0aGlzLl9wcmV2aW91c1VS
        TCA9IHRoaXMuZ2V0VVJMKCk7CiAgfSwKCiAgLyoqCiAgIFJlcGxhY2VzIHRo
        ZSBjdXJyZW50IHN0YXRlLgoKICAgQHByaXZhdGUKICAgQG1ldGhvZCByZXBs
        YWNlU3RhdGUKICAgQHBhcmFtIHBhdGgge1N0cmluZ30KICAqLwogIHJlcGxh
        Y2VTdGF0ZTogZnVuY3Rpb24ocGF0aCkgewogICAgdmFyIHN0YXRlID0geyBw
        YXRoOiBwYXRoIH07CgogICAgZ2V0KHRoaXMsICdoaXN0b3J5JykucmVwbGFj
        ZVN0YXRlKHN0YXRlLCBudWxsLCBwYXRoKTsKCiAgICAvLyBzdG9yZSBzdGF0
        ZSBpZiBicm93c2VyIGRvZXNuJ3Qgc3VwcG9ydCBgaGlzdG9yeS5zdGF0ZWAK
        ICAgIGlmICghc3VwcG9ydHNIaXN0b3J5U3RhdGUpIHsKICAgICAgdGhpcy5f
        aGlzdG9yeVN0YXRlID0gc3RhdGU7CiAgICB9CgogICAgLy8gdXNlZCBmb3Ig
        d2Via2l0IHdvcmthcm91bmQKICAgIHRoaXMuX3ByZXZpb3VzVVJMID0gdGhp
        cy5nZXRVUkwoKTsKICB9LAoKICAvKioKICAgIFJlZ2lzdGVyIGEgY2FsbGJh
        Y2sgdG8gYmUgaW52b2tlZCB3aGVuZXZlciB0aGUgYnJvd3NlcgogICAgaGlz
        dG9yeSBjaGFuZ2VzLCBpbmNsdWRpbmcgdXNpbmcgZm9yd2FyZCBhbmQgYmFj
        ayBidXR0b25zLgoKICAgIEBwcml2YXRlCiAgICBAbWV0aG9kIG9uVXBkYXRl
        VVJMCiAgICBAcGFyYW0gY2FsbGJhY2sge0Z1bmN0aW9ufQogICovCiAgb25V
        cGRhdGVVUkw6IGZ1bmN0aW9uKGNhbGxiYWNrKSB7CiAgICB2YXIgZ3VpZCA9
        IEVtYmVyLmd1aWRGb3IodGhpcyksCiAgICAgICAgc2VsZiA9IHRoaXM7Cgog
        ICAgRW1iZXIuJCh3aW5kb3cpLm9uKCdwb3BzdGF0ZS5lbWJlci1sb2NhdGlv
        bi0nK2d1aWQsIGZ1bmN0aW9uKGUpIHsKICAgICAgLy8gSWdub3JlIGluaXRp
        YWwgcGFnZSBsb2FkIHBvcHN0YXRlIGV2ZW50IGluIENocm9tZQogICAgICBp
        ZiAoIXBvcHN0YXRlRmlyZWQpIHsKICAgICAgICBwb3BzdGF0ZUZpcmVkID0g
        dHJ1ZTsKICAgICAgICBpZiAoc2VsZi5nZXRVUkwoKSA9PT0gc2VsZi5fcHJl
        dmlvdXNVUkwpIHsgcmV0dXJuOyB9CiAgICAgIH0KICAgICAgY2FsbGJhY2so
        c2VsZi5nZXRVUkwoKSk7CiAgICB9KTsKICB9LAoKICAvKioKICAgIFVzZWQg
        d2hlbiB1c2luZyBge3thY3Rpb259fWAgaGVscGVyLiAgVGhlIHVybCBpcyBh
        bHdheXMgYXBwZW5kZWQgdG8gdGhlIHJvb3RVUkwuCgogICAgQHByaXZhdGUK
        ICAgIEBtZXRob2QgZm9ybWF0VVJMCiAgICBAcGFyYW0gdXJsIHtTdHJpbmd9
        CiAgICBAcmV0dXJuIGZvcm1hdHRlZCB1cmwge1N0cmluZ30KICAqLwogIGZv
        cm1hdFVSTDogZnVuY3Rpb24odXJsKSB7CiAgICB2YXIgcm9vdFVSTCA9IGdl
        dCh0aGlzLCAncm9vdFVSTCcpLAogICAgICAgIGJhc2VVUkwgPSBnZXQodGhp
        cywgJ2Jhc2VVUkwnKTsKCiAgICBpZiAodXJsICE9PSAnJykgewogICAgICBy
        b290VVJMID0gcm9vdFVSTC5yZXBsYWNlKC9cLyQvLCAnJyk7CiAgICAgIGJh
        c2VVUkwgPSBiYXNlVVJMLnJlcGxhY2UoL1wvJC8sICcnKTsKICAgIH0gZWxz
        ZSBpZihiYXNlVVJMLm1hdGNoKC9eXC8vKSAmJiByb290VVJMLm1hdGNoKC9e
        XC8vKSkgewogICAgICBiYXNlVVJMID0gYmFzZVVSTC5yZXBsYWNlKC9cLyQv
        LCAnJyk7CiAgICB9CgogICAgcmV0dXJuIGJhc2VVUkwgKyByb290VVJMICsg
        dXJsOwogIH0sCgogIC8qKgogICAgQ2xlYW5zIHVwIHRoZSBIaXN0b3J5TG9j
        YXRpb24gZXZlbnQgbGlzdGVuZXIuCgogICAgQHByaXZhdGUKICAgIEBtZXRo
        b2Qgd2lsbERlc3Ryb3kKICAqLwogIHdpbGxEZXN0cm95OiBmdW5jdGlvbigp
        IHsKICAgIHZhciBndWlkID0gRW1iZXIuZ3VpZEZvcih0aGlzKTsKCiAgICBF
        bWJlci4kKHdpbmRvdykub2ZmKCdwb3BzdGF0ZS5lbWJlci1sb2NhdGlvbi0n
        K2d1aWQpOwogIH0KfSk7Cgp9KSgpOwoKCgooZnVuY3Rpb24oKSB7CgogIC8q
        KgogIEBtb2R1bGUgZW1iZXIKICBAc3VibW9kdWxlIGVtYmVyLXJvdXRpbmcK
        ICAqLwoKICB2YXIgZ2V0ID0gRW1iZXIuZ2V0LCBzZXQgPSBFbWJlci5zZXQ7
        CiAgdmFyIGRvY3VtZW50TW9kZSA9IGRvY3VtZW50LmRvY3VtZW50TW9kZSwK
        ICAgICAgaGlzdG9yeSA9IHdpbmRvdy5oaXN0b3J5LAogICAgICBsb2NhdGlv
        biA9IHdpbmRvdy5sb2NhdGlvbiwKICAgICAgZ2V0SGFzaCA9IEVtYmVyLkxv
        Y2F0aW9uLmdldEhhc2g7CgogIC8qKgogICAgRW1iZXIuQXV0b0xvY2F0aW9u
        IHdpbGwgc2VsZWN0IHRoZSBiZXN0IGxvY2F0aW9uIG9wdGlvbiBiYXNlZCBv
        ZmYgYnJvd3NlcgogICAgc3VwcG9ydCB3aXRoIHRoZSBwcmlvcml0eSBvcmRl
        cjogaGlzdG9yeSwgaGFzaCwgbm9uZS4KCiAgICBDbGVhbiBwdXNoU3RhdGUg
        cGF0aHMgYWNjZXNzZWQgYnkgaGFzaGNoYW5nZS1vbmx5IGJyb3dzZXJzIHdp
        bGwgYmUgcmVkaXJlY3RlZAogICAgdG8gdGhlIGhhc2gtZXF1aXZhbGVudCBh
        bmQgdmljZSB2ZXJzYSBzbyBmdXR1cmUgdHJhbnNpdGlvbnMgYXJlIGNvbnNp
        c3RlbnQuCgogICAgS2VlcCBpbiBtaW5kIHRoYXQgc2luY2Ugc29tZSBvZiB5
        b3VyIHVzZXJzIHdpbGwgdXNlIGBIaXN0b3J5TG9jYXRpb25gLCB5b3VyCiAg
        ICBzZXJ2ZXIgbXVzdCBzZXJ2ZSB0aGUgRW1iZXIgYXBwIGF0IGFsbCB0aGUg
        cm91dGVzIHlvdSBkZWZpbmUuCgogICAgQGNsYXNzIEF1dG9Mb2NhdGlvbgog
        ICAgQG5hbWVzcGFjZSBFbWJlcgogICAgQHN0YXRpYwogICovCiAgdmFyIEF1
        dG9Mb2NhdGlvbiA9IEVtYmVyLkF1dG9Mb2NhdGlvbiA9IHsKCiAgICAvKioK
        ICAgICAgV2lsbCBiZSBwcmUtcGVuZGVkIHRvIHBhdGggdXBvbiBzdGF0ZSBj
        aGFuZ2UuCgogICAgICBAcHJvcGVydHkgcm9vdFVSTAogICAgICBAZGVmYXVs
        dCAnLycKICAgICovCiAgICByb290VVJMOiAnLycsCgogICAgLyoqCiAgICAg
        IEBwcml2YXRlCgogICAgICBXZSBhc3N1bWUgdGhhdCBpZiB0aGUgaGlzdG9y
        eSBvYmplY3QgaGFzIGEgcHVzaFN0YXRlIG1ldGhvZCwgdGhlIGhvc3Qgc2hv
        dWxkCiAgICAgIHN1cHBvcnQgSGlzdG9yeUxvY2F0aW9uLgoKICAgICAgQHBy
        b3BlcnR5IHN1cHBvcnRzSGlzdG9yeQogICAgKi8KICAgIHN1cHBvcnRzSGlz
        dG9yeTogKGZ1bmN0aW9uICgpIHsKICAgICAgLy8gQm9vc3RlZCBmcm9tIE1v
        ZGVybml6cjogaHR0cHM6Ly9naXRodWIuY29tL01vZGVybml6ci9Nb2Rlcm5p
        enIvYmxvYi9tYXN0ZXIvZmVhdHVyZS1kZXRlY3RzL2hpc3RvcnkuanMKICAg
        ICAgLy8gVGhlIHN0b2NrIGJyb3dzZXIgb24gQW5kcm9pZCAyLjIgJiAyLjMg
        cmV0dXJucyBwb3NpdGl2ZSBvbiBoaXN0b3J5IHN1cHBvcnQKICAgICAgLy8g
        VW5mb3J0dW5hdGVseSBzdXBwb3J0IGlzIHJlYWxseSBidWdneSBhbmQgdGhl
        cmUgaXMgbm8gY2xlYW4gd2F5IHRvIGRldGVjdAogICAgICAvLyB0aGVzZSBi
        dWdzLCBzbyB3ZSBmYWxsIGJhY2sgdG8gYSB1c2VyIGFnZW50IHNuaWZmIDoo
        CiAgICAgIHZhciB1c2VyQWdlbnQgPSB3aW5kb3cubmF2aWdhdG9yLnVzZXJB
        Z2VudDsKCiAgICAgIC8vIFdlIG9ubHkgd2FudCBBbmRyb2lkIDIsIHN0b2Nr
        IGJyb3dzZXIsIGFuZCBub3QgQ2hyb21lIHdoaWNoIGlkZW50aWZpZXMKICAg
        ICAgLy8gaXRzZWxmIGFzICdNb2JpbGUgU2FmYXJpJyBhcyB3ZWxsCiAgICAg
        IGlmICh1c2VyQWdlbnQuaW5kZXhPZignQW5kcm9pZCAyJykgIT09IC0xICYm
        CiAgICAgICAgICB1c2VyQWdlbnQuaW5kZXhPZignTW9iaWxlIFNhZmFyaScp
        ICE9PSAtMSAmJgogICAgICAgICAgdXNlckFnZW50LmluZGV4T2YoJ0Nocm9t
        ZScpID09PSAtMSkgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQoK
        ICAgICAgcmV0dXJuICEhKGhpc3RvcnkgJiYgJ3B1c2hTdGF0ZScgaW4gaGlz
        dG9yeSk7CiAgICB9KSgpLAoKICAgIC8qKgogICAgICBAcHJpdmF0ZQoKICAg
        ICAgSUU4IHJ1bm5pbmcgaW4gSUU3IGNvbXBhdGliaWxpdHkgbW9kZSBnaXZl
        cyBmYWxzZSBwb3NpdGl2ZSwgc28gd2UgbXVzdCBhbHNvCiAgICAgIGNoZWNr
        IGRvY3VtZW50TW9kZS4KCiAgICAgIEBwcm9wZXJ0eSBzdXBwb3J0c0hhc2hD
        aGFuZ2UKICAgICovCiAgICBzdXBwb3J0c0hhc2hDaGFuZ2U6ICgnb25oYXNo
        Y2hhbmdlJyBpbiB3aW5kb3cgJiYgKGRvY3VtZW50TW9kZSA9PT0gdW5kZWZp
        bmVkIHx8IGRvY3VtZW50TW9kZSA+IDcgKSksCgogICAgY3JlYXRlOiBmdW5j
        dGlvbiAob3B0aW9ucykgewogICAgICBpZiAob3B0aW9ucyAmJiBvcHRpb25z
        LnJvb3RVUkwpIHsKICAgICAgICB0aGlzLnJvb3RVUkwgPSBvcHRpb25zLnJv
        b3RVUkw7CiAgICAgIH0KCiAgICAgIHZhciBpbXBsZW1lbnRhdGlvbkNsYXNz
        LCBoaXN0b3J5UGF0aCwgaGFzaFBhdGgsCiAgICAgICAgICBjYW5jZWxSb3V0
        ZXJTZXR1cCA9IGZhbHNlLAogICAgICAgICAgY3VycmVudFBhdGggPSB0aGlz
        LmdldEZ1bGxQYXRoKCk7CgogICAgICBpZiAodGhpcy5zdXBwb3J0c0hpc3Rv
        cnkpIHsKICAgICAgICBoaXN0b3J5UGF0aCA9IHRoaXMuZ2V0SGlzdG9yeVBh
        dGgoKTsKCiAgICAgICAgLy8gU2luY2Ugd2Ugc3VwcG9ydCBoaXN0b3J5IHBh
        dGhzLCBsZXQncyBiZSBzdXJlIHdlJ3JlIHVzaW5nIHRoZW0gZWxzZSAKICAg
        ICAgICAvLyBzd2l0Y2ggdGhlIGxvY2F0aW9uIG92ZXIgdG8gaXQuCiAgICAg
        ICAgaWYgKGN1cnJlbnRQYXRoID09PSBoaXN0b3J5UGF0aCkgewogICAgICAg
        ICAgaW1wbGVtZW50YXRpb25DbGFzcyA9IEVtYmVyLkhpc3RvcnlMb2NhdGlv
        bjsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgY2FuY2VsUm91dGVyU2V0
        dXAgPSB0cnVlOwogICAgICAgICAgbG9jYXRpb24ucmVwbGFjZShoaXN0b3J5
        UGF0aCk7CiAgICAgICAgfQoKICAgICAgfSBlbHNlIGlmICh0aGlzLnN1cHBv
        cnRzSGFzaENoYW5nZSkgewogICAgICAgIGhhc2hQYXRoID0gdGhpcy5nZXRI
        YXNoUGF0aCgpOwoKICAgICAgICAvLyBCZSBzdXJlIHdlJ3JlIHVzaW5nIGEg
        aGFzaGVkIHBhdGgsIG90aGVyd2lzZSBsZXQncyBzd2l0Y2ggb3ZlciBpdCB0
        byBzbwogICAgICAgIC8vIHdlIHN0YXJ0IG9mZiBjbGVhbiBhbmQgY29uc2lz
        dGVudC4KICAgICAgICBpZiAoY3VycmVudFBhdGggPT09IGhhc2hQYXRoKSB7
        CiAgICAgICAgICBpbXBsZW1lbnRhdGlvbkNsYXNzID0gRW1iZXIuSGFzaExv
        Y2F0aW9uOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjYW5jZWxSb3V0
        ZXJTZXR1cCA9IHRydWU7CiAgICAgICAgICBsb2NhdGlvbi5yZXBsYWNlKGhh
        c2hQYXRoKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIC8vIElmIG5vbmUg
        aGFzIGJlZW4gc2V0CiAgICAgIGlmICghaW1wbGVtZW50YXRpb25DbGFzcykg
        ewogICAgICAgIGltcGxlbWVudGF0aW9uQ2xhc3MgPSBFbWJlci5Ob25lTG9j
        YXRpb247CiAgICAgIH0KCiAgICAgIHZhciBpbXBsZW1lbnRhdGlvbiA9IGlt
        cGxlbWVudGF0aW9uQ2xhc3MuY3JlYXRlLmFwcGx5KGltcGxlbWVudGF0aW9u
        Q2xhc3MsIGFyZ3VtZW50cyk7CgogICAgICBpZiAoY2FuY2VsUm91dGVyU2V0
        dXApIHsKICAgICAgICBzZXQoaW1wbGVtZW50YXRpb24sICdjYW5jZWxSb3V0
        ZXJTZXR1cCcsIHRydWUpOwogICAgICB9CiAgICAgIAogICAgICByZXR1cm4g
        aW1wbGVtZW50YXRpb247CiAgICB9LAoKICAgIC8qKgogICAgICBAcHJpdmF0
        ZQoKICAgICAgUmV0dXJucyB0aGUgY3VycmVudCBgbG9jYXRpb24ucGF0aG5h
        bWVgLCBub3JtYWxpemVkIGZvciBJRSBpbmNvbnNpc3RlbmNpZXMuCgogICAg
        ICBAbWV0aG9kIGdldFBhdGgKICAgICovCiAgICBnZXRQYXRoOiBmdW5jdGlv
        biAoKSB7CiAgICAgIHZhciBwYXRobmFtZSA9IGxvY2F0aW9uLnBhdGhuYW1l
        OwogICAgICAvLyBWYXJpb3VzIHZlcnNpb25zIG9mIElFL09wZXJhIGRvbid0
        IGFsd2F5cyByZXR1cm4gYSBsZWFkaW5nIHNsYXNoCiAgICAgIGlmIChwYXRo
        bmFtZS5jaGFyQXQoMCkgIT09ICcvJykgewogICAgICAgIHBhdGhuYW1lID0g
        Jy8nICsgcGF0aG5hbWU7CiAgICAgIH0KCiAgICAgIHJldHVybiBwYXRobmFt
        ZTsKICAgIH0sCgogICAgLyoqCiAgICAgIEBwcml2YXRlCgogICAgICBSZXR1
        cm5zIHRoZSBmdWxsIHBhdGhuYW1lIGluY2x1ZGluZyB0aGUgaGFzaCBzdHJp
        bmcuCgogICAgICBAbWV0aG9kIGdldEZ1bGxQYXRoCiAgICAqLwogICAgZ2V0
        RnVsbFBhdGg6IGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIHRoaXMuZ2V0
        UGF0aCgpICsgZ2V0SGFzaCgpLnN1YnN0cigxKTsKICAgIH0sCgogICAgLyoq
        CiAgICAgIEBwcml2YXRlCgogICAgICBSZXR1cm5zIHRoZSBjdXJyZW50IHBh
        dGggYXMgaXQgc2hvdWxkIGFwcGVhciBmb3IgSGlzdG9yeUxvY2F0aW9uIHN1
        cHBvcnRlZAogICAgICBicm93c2Vycy4gVGhpcyBtYXkgdmVyeSB3ZWxsIGRp
        ZmZlciBmcm9tIHRoZSByZWFsIGN1cnJlbnQgcGF0aCAoZS5nLiBpZiBpdCAK
        ICAgICAgc3RhcnRzIG9mZiBhcyBhIGhhc2hlZCBVUkwpCgogICAgICBAbWV0
        aG9kIGdldEhpc3RvcnlQYXRoCiAgICAqLwogICAgZ2V0SGlzdG9yeVBhdGg6
        IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIHBhdGggPSB0aGlzLmdldFBhdGgo
        KSwgIAogICAgICAgICAgaGFzaFBhdGggPSBnZXRIYXNoKCkuc3Vic3RyKDEp
        LAogICAgICAgICAgdXJsID0gcGF0aCArIGhhc2hQYXRoOwoKICAgICAgLy8g
        UmVtb3ZlcyBhbnkgc3RhY2tlZCBkb3VibGUgc3Rhc2hlcwogICAgICByZXR1
        cm4gdXJsLnJlcGxhY2UoL1wvXC8vLCAnLycpOwogICAgfSwKCiAgICAvKioK
        ICAgICAgQHByaXZhdGUKCiAgICAgIFJldHVybnMgdGhlIGN1cnJlbnQgcGF0
        aCBhcyBpdCBzaG91bGQgYXBwZWFyIGZvciBIYXNoTG9jYXRpb24gc3VwcG9y
        dGVkCiAgICAgIGJyb3dzZXJzLiBUaGlzIG1heSB2ZXJ5IHdlbGwgZGlmZmVy
        IGZyb20gdGhlIHJlYWwgY3VycmVudCBwYXRoLgoKICAgICAgQG1ldGhvZCBn
        ZXRIYXNoUGF0aAogICAgKi8KICAgIGdldEhhc2hQYXRoOiBmdW5jdGlvbiAo
        KSB7CiAgICAgIHZhciBoaXN0b3J5UGF0aCA9IHRoaXMuZ2V0SGlzdG9yeVBh
        dGgoKSwKICAgICAgICAgIGV4cCA9IG5ldyBSZWdFeHAoJygnICsgdGhpcy5y
        b290VVJMICsgJykoLispJyksCiAgICAgICAgICB1cmwgPSBoaXN0b3J5UGF0
        aC5yZXBsYWNlKGV4cCwgJyQxIy8kMicpOwoKICAgICAgLy8gUmVtb3ZlIGFu
        eSBzdGFja2VkIGRvdWJsZSBzdGFzaGVzCiAgICAgIHVybCA9IHVybC5yZXBs
        YWNlKC9cL1wvLywgJy8nKTsKCiAgICAgIHJldHVybiB1cmw7CiAgICB9Cgog
        IH07Cgp9KSgpOwoKCgooZnVuY3Rpb24oKSB7Cgp9KSgpOwoKCgooZnVuY3Rp
        b24oKSB7Ci8qKgpFbWJlciBSb3V0aW5nCgpAbW9kdWxlIGVtYmVyCkBzdWJt
        b2R1bGUgZW1iZXItcm91dGluZwpAcmVxdWlyZXMgZW1iZXItdmlld3MKKi8K
        Cn0pKCk7CgooZnVuY3Rpb24oKSB7CmZ1bmN0aW9uIHZpc2l0KHZlcnRleCwg
        Zm4sIHZpc2l0ZWQsIHBhdGgpIHsKICB2YXIgbmFtZSA9IHZlcnRleC5uYW1l
        LAogICAgdmVydGljZXMgPSB2ZXJ0ZXguaW5jb21pbmcsCiAgICBuYW1lcyA9
        IHZlcnRleC5pbmNvbWluZ05hbWVzLAogICAgbGVuID0gbmFtZXMubGVuZ3Ro
        LAogICAgaTsKICBpZiAoIXZpc2l0ZWQpIHsKICAgIHZpc2l0ZWQgPSB7fTsK
        ICB9CiAgaWYgKCFwYXRoKSB7CiAgICBwYXRoID0gW107CiAgfQogIGlmICh2
        aXNpdGVkLmhhc093blByb3BlcnR5KG5hbWUpKSB7CiAgICByZXR1cm47CiAg
        fQogIHBhdGgucHVzaChuYW1lKTsKICB2aXNpdGVkW25hbWVdID0gdHJ1ZTsK
        ICBmb3IgKGkgPSAwOyBpIDwgbGVuOyBpKyspIHsKICAgIHZpc2l0KHZlcnRp
        Y2VzW25hbWVzW2ldXSwgZm4sIHZpc2l0ZWQsIHBhdGgpOwogIH0KICBmbih2
        ZXJ0ZXgsIHBhdGgpOwogIHBhdGgucG9wKCk7Cn0KCmZ1bmN0aW9uIERBRygp
        IHsKICB0aGlzLm5hbWVzID0gW107CiAgdGhpcy52ZXJ0aWNlcyA9IHt9Owp9
        CgpEQUcucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uKG5hbWUpIHsKICBpZiAo
        IW5hbWUpIHsgcmV0dXJuOyB9CiAgaWYgKHRoaXMudmVydGljZXMuaGFzT3du
        UHJvcGVydHkobmFtZSkpIHsKICAgIHJldHVybiB0aGlzLnZlcnRpY2VzW25h
        bWVdOwogIH0KICB2YXIgdmVydGV4ID0gewogICAgbmFtZTogbmFtZSwgaW5j
        b21pbmc6IHt9LCBpbmNvbWluZ05hbWVzOiBbXSwgaGFzT3V0Z29pbmc6IGZh
        bHNlLCB2YWx1ZTogbnVsbAogIH07CiAgdGhpcy52ZXJ0aWNlc1tuYW1lXSA9
        IHZlcnRleDsKICB0aGlzLm5hbWVzLnB1c2gobmFtZSk7CiAgcmV0dXJuIHZl
        cnRleDsKfTsKCkRBRy5wcm90b3R5cGUubWFwID0gZnVuY3Rpb24obmFtZSwg
        dmFsdWUpIHsKICB0aGlzLmFkZChuYW1lKS52YWx1ZSA9IHZhbHVlOwp9OwoK
        REFHLnByb3RvdHlwZS5hZGRFZGdlID0gZnVuY3Rpb24oZnJvbU5hbWUsIHRv
        TmFtZSkgewogIGlmICghZnJvbU5hbWUgfHwgIXRvTmFtZSB8fCBmcm9tTmFt
        ZSA9PT0gdG9OYW1lKSB7CiAgICByZXR1cm47CiAgfQogIHZhciBmcm9tID0g
        dGhpcy5hZGQoZnJvbU5hbWUpLCB0byA9IHRoaXMuYWRkKHRvTmFtZSk7CiAg
        aWYgKHRvLmluY29taW5nLmhhc093blByb3BlcnR5KGZyb21OYW1lKSkgewog
        ICAgcmV0dXJuOwogIH0KICBmdW5jdGlvbiBjaGVja0N5Y2xlKHZlcnRleCwg
        cGF0aCkgewogICAgaWYgKHZlcnRleC5uYW1lID09PSB0b05hbWUpIHsKICAg
        ICAgdGhyb3cgbmV3IEVtYmVyLkVycm9yKCJjeWNsZSBkZXRlY3RlZDogIiAr
        IHRvTmFtZSArICIgPC0gIiArIHBhdGguam9pbigiIDwtICIpKTsKICAgIH0K
        ICB9CiAgdmlzaXQoZnJvbSwgY2hlY2tDeWNsZSk7CiAgZnJvbS5oYXNPdXRn
        b2luZyA9IHRydWU7CiAgdG8uaW5jb21pbmdbZnJvbU5hbWVdID0gZnJvbTsK
        ICB0by5pbmNvbWluZ05hbWVzLnB1c2goZnJvbU5hbWUpOwp9OwoKREFHLnBy
        b3RvdHlwZS50b3Bzb3J0ID0gZnVuY3Rpb24oZm4pIHsKICB2YXIgdmlzaXRl
        ZCA9IHt9LAogICAgdmVydGljZXMgPSB0aGlzLnZlcnRpY2VzLAogICAgbmFt
        ZXMgPSB0aGlzLm5hbWVzLAogICAgbGVuID0gbmFtZXMubGVuZ3RoLAogICAg
        aSwgdmVydGV4OwogIGZvciAoaSA9IDA7IGkgPCBsZW47IGkrKykgewogICAg
        dmVydGV4ID0gdmVydGljZXNbbmFtZXNbaV1dOwogICAgaWYgKCF2ZXJ0ZXgu
        aGFzT3V0Z29pbmcpIHsKICAgICAgdmlzaXQodmVydGV4LCBmbiwgdmlzaXRl
        ZCk7CiAgICB9CiAgfQp9OwoKREFHLnByb3RvdHlwZS5hZGRFZGdlcyA9IGZ1
        bmN0aW9uKG5hbWUsIHZhbHVlLCBiZWZvcmUsIGFmdGVyKSB7CiAgdmFyIGk7
        CiAgdGhpcy5tYXAobmFtZSwgdmFsdWUpOwogIGlmIChiZWZvcmUpIHsKICAg
        IGlmICh0eXBlb2YgYmVmb3JlID09PSAnc3RyaW5nJykgewogICAgICB0aGlz
        LmFkZEVkZ2UobmFtZSwgYmVmb3JlKTsKICAgIH0gZWxzZSB7CiAgICAgIGZv
        ciAoaSA9IDA7IGkgPCBiZWZvcmUubGVuZ3RoOyBpKyspIHsKICAgICAgICB0
        aGlzLmFkZEVkZ2UobmFtZSwgYmVmb3JlW2ldKTsKICAgICAgfQogICAgfQog
        IH0KICBpZiAoYWZ0ZXIpIHsKICAgIGlmICh0eXBlb2YgYWZ0ZXIgPT09ICdz
        dHJpbmcnKSB7CiAgICAgIHRoaXMuYWRkRWRnZShhZnRlciwgbmFtZSk7CiAg
        ICB9IGVsc2UgewogICAgICBmb3IgKGkgPSAwOyBpIDwgYWZ0ZXIubGVuZ3Ro
        OyBpKyspIHsKICAgICAgICB0aGlzLmFkZEVkZ2UoYWZ0ZXJbaV0sIG5hbWUp
        OwogICAgICB9CiAgICB9CiAgfQp9OwoKRW1iZXIuREFHID0gREFHOwoKfSko
        KTsKCgoKKGZ1bmN0aW9uKCkgewovKioKQG1vZHVsZSBlbWJlcgpAc3VibW9k
        dWxlIGVtYmVyLWFwcGxpY2F0aW9uCiovCgp2YXIgZ2V0ID0gRW1iZXIuZ2V0
        LAogICAgY2xhc3NpZnkgPSBFbWJlci5TdHJpbmcuY2xhc3NpZnksCiAgICBj
        YXBpdGFsaXplID0gRW1iZXIuU3RyaW5nLmNhcGl0YWxpemUsCiAgICBkZWNh
        bWVsaXplID0gRW1iZXIuU3RyaW5nLmRlY2FtZWxpemU7CgovKioKICBUaGUg
        RGVmYXVsdFJlc29sdmVyIGRlZmluZXMgdGhlIGRlZmF1bHQgbG9va3VwIHJ1
        bGVzIHRvIHJlc29sdmUKICBjb250YWluZXIgbG9va3VwcyBiZWZvcmUgY29u
        c3VsdGluZyB0aGUgY29udGFpbmVyIGZvciByZWdpc3RlcmVkCiAgaXRlbXM6
        CgoqIHRlbXBsYXRlcyBhcmUgbG9va2VkIHVwIG9uIGBFbWJlci5URU1QTEFU
        RVNgCiogb3RoZXIgbmFtZXMgYXJlIGxvb2tlZCB1cCBvbiB0aGUgYXBwbGlj
        YXRpb24gYWZ0ZXIgY29udmVydGluZwogIHRoZSBuYW1lLiBGb3IgZXhhbXBs
        ZSwgYGNvbnRyb2xsZXI6cG9zdGAgbG9va3MgdXAKICBgQXBwLlBvc3RDb250
        cm9sbGVyYCBieSBkZWZhdWx0LgoqIHRoZXJlIGFyZSBzb21lIG51YW5jZXMg
        KHNlZSBleGFtcGxlcyBiZWxvdykKCiAgIyMjIEhvdyBSZXNvbHZpbmcgV29y
        a3MKCiAgVGhlIGNvbnRhaW5lciBjYWxscyB0aGlzIG9iamVjdCdzIGByZXNv
        bHZlYCBtZXRob2Qgd2l0aCB0aGUKICBgZnVsbE5hbWVgIGFyZ3VtZW50LgoK
        ICBJdCBmaXJzdCBwYXJzZXMgdGhlIGZ1bGxOYW1lIGludG8gYW4gb2JqZWN0
        IHVzaW5nIGBwYXJzZU5hbWVgLgoKICBUaGVuIGl0IGNoZWNrcyBmb3IgdGhl
        IHByZXNlbmNlIG9mIGEgdHlwZS1zcGVjaWZpYyBpbnN0YW5jZQogIG1ldGhv
        ZCBvZiB0aGUgZm9ybSBgcmVzb2x2ZVtUeXBlXWAgYW5kIGNhbGxzIGl0IGlm
        IGl0IGV4aXN0cy4KICBGb3IgZXhhbXBsZSBpZiBpdCB3YXMgcmVzb2x2aW5n
        ICd0ZW1wbGF0ZTpwb3N0JywgaXQgd291bGQgY2FsbAogIHRoZSBgcmVzb2x2
        ZVRlbXBsYXRlYCBtZXRob2QuCgogIEl0cyBsYXN0IHJlc29ydCBpcyB0byBj
        YWxsIHRoZSBgcmVzb2x2ZU90aGVyYCBtZXRob2QuCgogIFRoZSBtZXRob2Rz
        IG9mIHRoaXMgb2JqZWN0IGFyZSBkZXNpZ25lZCB0byBiZSBlYXN5IHRvIG92
        ZXJyaWRlCiAgaW4gYSBzdWJjbGFzcy4gRm9yIGV4YW1wbGUsIHlvdSBjb3Vs
        ZCBlbmhhbmNlIGhvdyBhIHRlbXBsYXRlCiAgaXMgcmVzb2x2ZWQgbGlrZSBz
        bzoKCiAgYGBgamF2YXNjcmlwdAogIEFwcCA9IEVtYmVyLkFwcGxpY2F0aW9u
        LmNyZWF0ZSh7CiAgICBSZXNvbHZlcjogRW1iZXIuRGVmYXVsdFJlc29sdmVy
        LmV4dGVuZCh7CiAgICAgIHJlc29sdmVUZW1wbGF0ZTogZnVuY3Rpb24ocGFy
        c2VkTmFtZSkgewogICAgICAgIHZhciByZXNvbHZlZFRlbXBsYXRlID0gdGhp
        cy5fc3VwZXIocGFyc2VkTmFtZSk7CiAgICAgICAgaWYgKHJlc29sdmVkVGVt
        cGxhdGUpIHsgcmV0dXJuIHJlc29sdmVkVGVtcGxhdGU7IH0KICAgICAgICBy
        ZXR1cm4gRW1iZXIuVEVNUExBVEVTWydub3RfZm91bmQnXTsKICAgICAgfQog
        ICAgfSkKICB9KTsKICBgYGAKCiAgU29tZSBleGFtcGxlcyBvZiBob3cgbmFt
        ZXMgYXJlIHJlc29sdmVkOgoKICBgYGAKICAndGVtcGxhdGU6cG9zdCcgLy89
        PiBFbWJlci5URU1QTEFURVNbJ3Bvc3QnXQogICd0ZW1wbGF0ZTpwb3N0cy9i
        eWxpbmUnIC8vPT4gRW1iZXIuVEVNUExBVEVTWydwb3N0cy9ieWxpbmUnXQog
        ICd0ZW1wbGF0ZTpwb3N0cy5ieWxpbmUnIC8vPT4gRW1iZXIuVEVNUExBVEVT
        Wydwb3N0cy9ieWxpbmUnXQogICd0ZW1wbGF0ZTpibG9nUG9zdCcgLy89PiBF
        bWJlci5URU1QTEFURVNbJ2Jsb2dQb3N0J10KICAgICAgICAgICAgICAgICAg
        ICAgIC8vICAgT1IKICAgICAgICAgICAgICAgICAgICAgIC8vICAgRW1iZXIu
        VEVNUExBVEVTWydibG9nX3Bvc3QnXQogICdjb250cm9sbGVyOnBvc3QnIC8v
        PT4gQXBwLlBvc3RDb250cm9sbGVyCiAgJ2NvbnRyb2xsZXI6cG9zdHMuaW5k
        ZXgnIC8vPT4gQXBwLlBvc3RzSW5kZXhDb250cm9sbGVyCiAgJ2NvbnRyb2xs
        ZXI6YmxvZy9wb3N0JyAvLz0+IEJsb2cuUG9zdENvbnRyb2xsZXIKICAnY29u
        dHJvbGxlcjpiYXNpYycgLy89PiBFbWJlci5Db250cm9sbGVyCiAgJ3JvdXRl
        OnBvc3QnIC8vPT4gQXBwLlBvc3RSb3V0ZQogICdyb3V0ZTpwb3N0cy5pbmRl
        eCcgLy89PiBBcHAuUG9zdHNJbmRleFJvdXRlCiAgJ3JvdXRlOmJsb2cvcG9z
        dCcgLy89PiBCbG9nLlBvc3RSb3V0ZQogICdyb3V0ZTpiYXNpYycgLy89PiBF
        bWJlci5Sb3V0ZQogICd2aWV3OnBvc3QnIC8vPT4gQXBwLlBvc3RWaWV3CiAg
        J3ZpZXc6cG9zdHMuaW5kZXgnIC8vPT4gQXBwLlBvc3RzSW5kZXhWaWV3CiAg
        J3ZpZXc6YmxvZy9wb3N0JyAvLz0+IEJsb2cuUG9zdFZpZXcKICAndmlldzpi
        YXNpYycgLy89PiBFbWJlci5WaWV3CiAgJ2Zvbzpwb3N0JyAvLz0+IEFwcC5Q
        b3N0Rm9vCiAgJ21vZGVsOnBvc3QnIC8vPT4gQXBwLlBvc3QKICBgYGAKCiAg
        QGNsYXNzIERlZmF1bHRSZXNvbHZlcgogIEBuYW1lc3BhY2UgRW1iZXIKICBA
        ZXh0ZW5kcyBFbWJlci5PYmplY3QKKi8KRW1iZXIuRGVmYXVsdFJlc29sdmVy
        ID0gRW1iZXIuT2JqZWN0LmV4dGVuZCh7CiAgLyoqCiAgICBUaGlzIHdpbGwg
        YmUgc2V0IHRvIHRoZSBBcHBsaWNhdGlvbiBpbnN0YW5jZSB3aGVuIGl0IGlz
        CiAgICBjcmVhdGVkLgoKICAgIEBwcm9wZXJ0eSBuYW1lc3BhY2UKICAqLwog
        IG5hbWVzcGFjZTogbnVsbCwKCiAgbm9ybWFsaXplOiBmdW5jdGlvbihmdWxs
        TmFtZSkgewogICAgdmFyIHNwbGl0ID0gZnVsbE5hbWUuc3BsaXQoJzonLCAy
        KSwKICAgICAgICB0eXBlID0gc3BsaXRbMF0sCiAgICAgICAgbmFtZSA9IHNw
        bGl0WzFdOwoKICAgIEVtYmVyLmFzc2VydCgiVHJpZWQgdG8gbm9ybWFsaXpl
        IGEgY29udGFpbmVyIG5hbWUgd2l0aG91dCBhIGNvbG9uICg6KSBpbiAiICsK
        ICAgICAgICAgICAgICAgICAiaXQuIFlvdSBwcm9iYWJseSB0cmllZCB0byBs
        b29rdXAgYSBuYW1lIHRoYXQgZGlkIG5vdCBjb250YWluICIgKwogICAgICAg
        ICAgICAgICAgICJhIHR5cGUsIGEgY29sb24sIGFuZCBhIG5hbWUuIEEgcHJv
        cGVyIGxvb2t1cCBuYW1lIHdvdWxkIGJlICIgKwogICAgICAgICAgICAgICAg
        ICJgdmlldzpwb3N0YC4iLCBzcGxpdC5sZW5ndGggPT09IDIpOwoKICAgIGlm
        ICh0eXBlICE9PSAndGVtcGxhdGUnKSB7CiAgICAgIHZhciByZXN1bHQgPSBu
        YW1lOwoKICAgICAgaWYgKHJlc3VsdC5pbmRleE9mKCcuJykgPiAtMSkgewog
        ICAgICAgIHJlc3VsdCA9IHJlc3VsdC5yZXBsYWNlKC9cLiguKS9nLCBmdW5j
        dGlvbihtKSB7IHJldHVybiBtLmNoYXJBdCgxKS50b1VwcGVyQ2FzZSgpOyB9
        KTsKICAgICAgfQoKICAgICAgaWYgKG5hbWUuaW5kZXhPZignXycpID4gLTEp
        IHsKICAgICAgICByZXN1bHQgPSByZXN1bHQucmVwbGFjZSgvXyguKS9nLCBm
        dW5jdGlvbihtKSB7IHJldHVybiBtLmNoYXJBdCgxKS50b1VwcGVyQ2FzZSgp
        OyB9KTsKICAgICAgfQoKICAgICAgcmV0dXJuIHR5cGUgKyAnOicgKyByZXN1
        bHQ7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gZnVsbE5hbWU7CiAgICB9
        CiAgfSwKCgogIC8qKgogICAgVGhpcyBtZXRob2QgaXMgY2FsbGVkIHZpYSB0
        aGUgY29udGFpbmVyJ3MgcmVzb2x2ZXIgbWV0aG9kLgogICAgSXQgcGFyc2Vz
        IHRoZSBwcm92aWRlZCBgZnVsbE5hbWVgIGFuZCB0aGVuIGxvb2tzIHVwIGFu
        ZAogICAgcmV0dXJucyB0aGUgYXBwcm9wcmlhdGUgdGVtcGxhdGUgb3IgY2xh
        c3MuCgogICAgQG1ldGhvZCByZXNvbHZlCiAgICBAcGFyYW0ge1N0cmluZ30g
        ZnVsbE5hbWUgdGhlIGxvb2t1cCBzdHJpbmcKICAgIEByZXR1cm4ge09iamVj
        dH0gdGhlIHJlc29sdmVkIGZhY3RvcnkKICAqLwogIHJlc29sdmU6IGZ1bmN0
        aW9uKGZ1bGxOYW1lKSB7CiAgICB2YXIgcGFyc2VkTmFtZSA9IHRoaXMucGFy
        c2VOYW1lKGZ1bGxOYW1lKSwKICAgICAgICByZXNvbHZlTWV0aG9kTmFtZSA9
        IHBhcnNlZE5hbWUucmVzb2x2ZU1ldGhvZE5hbWU7CgogICAgaWYgKCEocGFy
        c2VkTmFtZS5uYW1lICYmIHBhcnNlZE5hbWUudHlwZSkpIHsKICAgICAgdGhy
        b3cgbmV3IFR5cGVFcnJvcigiSW52YWxpZCBmdWxsTmFtZTogYCIgKyBmdWxs
        TmFtZSArICJgLCBtdXN0IGJlIG9mIHRoZSBmb3JtIGB0eXBlOm5hbWVgICIp
        OwogICAgfQoKICAgIGlmICh0aGlzW3Jlc29sdmVNZXRob2ROYW1lXSkgewog
        ICAgICB2YXIgcmVzb2x2ZWQgPSB0aGlzW3Jlc29sdmVNZXRob2ROYW1lXShw
        YXJzZWROYW1lKTsKICAgICAgaWYgKHJlc29sdmVkKSB7IHJldHVybiByZXNv
        bHZlZDsgfQogICAgfQogICAgcmV0dXJuIHRoaXMucmVzb2x2ZU90aGVyKHBh
        cnNlZE5hbWUpOwogIH0sCiAgLyoqCiAgICBDb252ZXJ0IHRoZSBzdHJpbmcg
        bmFtZSBvZiB0aGUgZm9ybSAidHlwZTpuYW1lIiB0bwogICAgYSBKYXZhc2Ny
        aXB0IG9iamVjdCB3aXRoIHRoZSBwYXJzZWQgYXNwZWN0cyBvZiB0aGUgbmFt
        ZQogICAgYnJva2VuIG91dC4KCiAgICBAcHJvdGVjdGVkCiAgICBAcGFyYW0g
        e1N0cmluZ30gZnVsbE5hbWUgdGhlIGxvb2t1cCBzdHJpbmcKICAgIEBtZXRo
        b2QgcGFyc2VOYW1lCiAgKi8KICBwYXJzZU5hbWU6IGZ1bmN0aW9uKGZ1bGxO
        YW1lKSB7CiAgICB2YXIgbmFtZVBhcnRzID0gZnVsbE5hbWUuc3BsaXQoIjoi
        KSwKICAgICAgICB0eXBlID0gbmFtZVBhcnRzWzBdLCBmdWxsTmFtZVdpdGhv
        dXRUeXBlID0gbmFtZVBhcnRzWzFdLAogICAgICAgIG5hbWUgPSBmdWxsTmFt
        ZVdpdGhvdXRUeXBlLAogICAgICAgIG5hbWVzcGFjZSA9IGdldCh0aGlzLCAn
        bmFtZXNwYWNlJyksCiAgICAgICAgcm9vdCA9IG5hbWVzcGFjZTsKCiAgICBp
        ZiAodHlwZSAhPT0gJ3RlbXBsYXRlJyAmJiBuYW1lLmluZGV4T2YoJy8nKSAh
        PT0gLTEpIHsKICAgICAgdmFyIHBhcnRzID0gbmFtZS5zcGxpdCgnLycpOwog
        ICAgICBuYW1lID0gcGFydHNbcGFydHMubGVuZ3RoIC0gMV07CiAgICAgIHZh
        ciBuYW1lc3BhY2VOYW1lID0gY2FwaXRhbGl6ZShwYXJ0cy5zbGljZSgwLCAt
        MSkuam9pbignLicpKTsKICAgICAgcm9vdCA9IEVtYmVyLk5hbWVzcGFjZS5i
        eU5hbWUobmFtZXNwYWNlTmFtZSk7CgogICAgICBFbWJlci5hc3NlcnQoJ1lv
        dSBhcmUgbG9va2luZyBmb3IgYSAnICsgbmFtZSArICcgJyArIHR5cGUgKyAn
        IGluIHRoZSAnICsgbmFtZXNwYWNlTmFtZSArICcgbmFtZXNwYWNlLCBidXQg
        dGhlIG5hbWVzcGFjZSBjb3VsZCBub3QgYmUgZm91bmQnLCByb290KTsKICAg
        IH0KCiAgICByZXR1cm4gewogICAgICBmdWxsTmFtZTogZnVsbE5hbWUsCiAg
        ICAgIHR5cGU6IHR5cGUsCiAgICAgIGZ1bGxOYW1lV2l0aG91dFR5cGU6IGZ1
        bGxOYW1lV2l0aG91dFR5cGUsCiAgICAgIG5hbWU6IG5hbWUsCiAgICAgIHJv
        b3Q6IHJvb3QsCiAgICAgIHJlc29sdmVNZXRob2ROYW1lOiAicmVzb2x2ZSIg
        KyBjbGFzc2lmeSh0eXBlKQogICAgfTsKICB9LAogIC8qKgogICAgTG9vayB1
        cCB0aGUgdGVtcGxhdGUgaW4gRW1iZXIuVEVNUExBVEVTCgogICAgQHByb3Rl
        Y3RlZAogICAgQHBhcmFtIHtPYmplY3R9IHBhcnNlZE5hbWUgYSBwYXJzZU5h
        bWUgb2JqZWN0IHdpdGggdGhlIHBhcnNlZAogICAgICBmdWxsTmFtZSBsb29r
        dXAgc3RyaW5nCiAgICBAbWV0aG9kIHJlc29sdmVUZW1wbGF0ZQogICovCiAg
        cmVzb2x2ZVRlbXBsYXRlOiBmdW5jdGlvbihwYXJzZWROYW1lKSB7CiAgICB2
        YXIgdGVtcGxhdGVOYW1lID0gcGFyc2VkTmFtZS5mdWxsTmFtZVdpdGhvdXRU
        eXBlLnJlcGxhY2UoL1wuL2csICcvJyk7CgogICAgaWYgKEVtYmVyLlRFTVBM
        QVRFU1t0ZW1wbGF0ZU5hbWVdKSB7CiAgICAgIHJldHVybiBFbWJlci5URU1Q
        TEFURVNbdGVtcGxhdGVOYW1lXTsKICAgIH0KCiAgICB0ZW1wbGF0ZU5hbWUg
        PSBkZWNhbWVsaXplKHRlbXBsYXRlTmFtZSk7CiAgICBpZiAoRW1iZXIuVEVN
        UExBVEVTW3RlbXBsYXRlTmFtZV0pIHsKICAgICAgcmV0dXJuIEVtYmVyLlRF
        TVBMQVRFU1t0ZW1wbGF0ZU5hbWVdOwogICAgfQogIH0sCiAgLyoqCiAgICBH
        aXZlbiBhIHBhcnNlTmFtZSBvYmplY3QgKG91dHB1dCBmcm9tIGBwYXJzZU5h
        bWVgKSwgYXBwbHkKICAgIHRoZSBjb252ZW50aW9ucyBleHBlY3RlZCBieSBg
        RW1iZXIuUm91dGVyYAoKICAgIEBwcm90ZWN0ZWQKICAgIEBwYXJhbSB7T2Jq
        ZWN0fSBwYXJzZWROYW1lIGEgcGFyc2VOYW1lIG9iamVjdCB3aXRoIHRoZSBw
        YXJzZWQKICAgICAgZnVsbE5hbWUgbG9va3VwIHN0cmluZwogICAgQG1ldGhv
        ZCB1c2VSb3V0ZXJOYW1pbmcKICAqLwogIHVzZVJvdXRlck5hbWluZzogZnVu
        Y3Rpb24ocGFyc2VkTmFtZSkgewogICAgcGFyc2VkTmFtZS5uYW1lID0gcGFy
        c2VkTmFtZS5uYW1lLnJlcGxhY2UoL1wuL2csICdfJyk7CiAgICBpZiAocGFy
        c2VkTmFtZS5uYW1lID09PSAnYmFzaWMnKSB7CiAgICAgIHBhcnNlZE5hbWUu
        bmFtZSA9ICcnOwogICAgfQogIH0sCiAgLyoqCiAgICBMb29rdXAgdGhlIGNv
        bnRyb2xsZXIgdXNpbmcgYHJlc29sdmVPdGhlcmAKCiAgICBAcHJvdGVjdGVk
        CiAgICBAcGFyYW0ge09iamVjdH0gcGFyc2VkTmFtZSBhIHBhcnNlTmFtZSBv
        YmplY3Qgd2l0aCB0aGUgcGFyc2VkCiAgICAgIGZ1bGxOYW1lIGxvb2t1cCBz
        dHJpbmcKICAgIEBtZXRob2QgcmVzb2x2ZUNvbnRyb2xsZXIKICAqLwogIHJl
        c29sdmVDb250cm9sbGVyOiBmdW5jdGlvbihwYXJzZWROYW1lKSB7CiAgICB0
        aGlzLnVzZVJvdXRlck5hbWluZyhwYXJzZWROYW1lKTsKICAgIHJldHVybiB0
        aGlzLnJlc29sdmVPdGhlcihwYXJzZWROYW1lKTsKICB9LAogIC8qKgogICAg
        TG9va3VwIHRoZSByb3V0ZSB1c2luZyBgcmVzb2x2ZU90aGVyYAoKICAgIEBw
        cm90ZWN0ZWQKICAgIEBwYXJhbSB7T2JqZWN0fSBwYXJzZWROYW1lIGEgcGFy
        c2VOYW1lIG9iamVjdCB3aXRoIHRoZSBwYXJzZWQKICAgICAgZnVsbE5hbWUg
        bG9va3VwIHN0cmluZwogICAgQG1ldGhvZCByZXNvbHZlUm91dGUKICAqLwog
        IHJlc29sdmVSb3V0ZTogZnVuY3Rpb24ocGFyc2VkTmFtZSkgewogICAgdGhp
        cy51c2VSb3V0ZXJOYW1pbmcocGFyc2VkTmFtZSk7CiAgICByZXR1cm4gdGhp
        cy5yZXNvbHZlT3RoZXIocGFyc2VkTmFtZSk7CiAgfSwKICAvKioKICAgIExv
        b2t1cCB0aGUgdmlldyB1c2luZyBgcmVzb2x2ZU90aGVyYAoKICAgIEBwcm90
        ZWN0ZWQKICAgIEBwYXJhbSB7T2JqZWN0fSBwYXJzZWROYW1lIGEgcGFyc2VO
        YW1lIG9iamVjdCB3aXRoIHRoZSBwYXJzZWQKICAgICAgZnVsbE5hbWUgbG9v
        a3VwIHN0cmluZwogICAgQG1ldGhvZCByZXNvbHZlVmlldwogICovCiAgcmVz
        b2x2ZVZpZXc6IGZ1bmN0aW9uKHBhcnNlZE5hbWUpIHsKICAgIHRoaXMudXNl
        Um91dGVyTmFtaW5nKHBhcnNlZE5hbWUpOwogICAgcmV0dXJuIHRoaXMucmVz
        b2x2ZU90aGVyKHBhcnNlZE5hbWUpOwogIH0sCgogIHJlc29sdmVIZWxwZXI6
        IGZ1bmN0aW9uKHBhcnNlZE5hbWUpIHsKICAgIHJldHVybiB0aGlzLnJlc29s
        dmVPdGhlcihwYXJzZWROYW1lKSB8fCBFbWJlci5IYW5kbGViYXJzLmhlbHBl
        cnNbcGFyc2VkTmFtZS5mdWxsTmFtZVdpdGhvdXRUeXBlXTsKICB9LAoKICAv
        KioKICAgIExvb2t1cCB0aGUgbW9kZWwgb24gdGhlIEFwcGxpY2F0aW9uIG5h
        bWVzcGFjZQoKICAgIEBwcm90ZWN0ZWQKICAgIEBwYXJhbSB7T2JqZWN0fSBw
        YXJzZWROYW1lIGEgcGFyc2VOYW1lIG9iamVjdCB3aXRoIHRoZSBwYXJzZWQK
        ICAgICAgZnVsbE5hbWUgbG9va3VwIHN0cmluZwogICAgQG1ldGhvZCByZXNv
        bHZlTW9kZWwKICAqLwogIHJlc29sdmVNb2RlbDogZnVuY3Rpb24ocGFyc2Vk
        TmFtZSkgewogICAgdmFyIGNsYXNzTmFtZSA9IGNsYXNzaWZ5KHBhcnNlZE5h
        bWUubmFtZSksCiAgICAgICAgZmFjdG9yeSA9IGdldChwYXJzZWROYW1lLnJv
        b3QsIGNsYXNzTmFtZSk7CgogICAgIGlmIChmYWN0b3J5KSB7IHJldHVybiBm
        YWN0b3J5OyB9CiAgfSwKICAvKioKICAgIExvb2sgdXAgdGhlIHNwZWNpZmll
        ZCBvYmplY3QgKGZyb20gcGFyc2VkTmFtZSkgb24gdGhlIGFwcHJvcHJpYXRl
        CiAgICBuYW1lc3BhY2UgKHVzdWFsbHkgb24gdGhlIEFwcGxpY2F0aW9uKQoK
        ICAgIEBwcm90ZWN0ZWQKICAgIEBwYXJhbSB7T2JqZWN0fSBwYXJzZWROYW1l
        IGEgcGFyc2VOYW1lIG9iamVjdCB3aXRoIHRoZSBwYXJzZWQKICAgICAgZnVs
        bE5hbWUgbG9va3VwIHN0cmluZwogICAgQG1ldGhvZCByZXNvbHZlT3RoZXIK
        ICAqLwogIHJlc29sdmVPdGhlcjogZnVuY3Rpb24ocGFyc2VkTmFtZSkgewog
        ICAgdmFyIGNsYXNzTmFtZSA9IGNsYXNzaWZ5KHBhcnNlZE5hbWUubmFtZSkg
        KyBjbGFzc2lmeShwYXJzZWROYW1lLnR5cGUpLAogICAgICAgIGZhY3Rvcnkg
        PSBnZXQocGFyc2VkTmFtZS5yb290LCBjbGFzc05hbWUpOwogICAgaWYgKGZh
        Y3RvcnkpIHsgcmV0dXJuIGZhY3Rvcnk7IH0KICB9LAoKICAvKioKICAgIFJl
        dHVybnMgYSBodW1hbi1yZWFkYWJsZSBkZXNjcmlwdGlvbiBmb3IgYSBmdWxs
        TmFtZS4gVXNlZCBieSB0aGUKICAgIEFwcGxpY2F0aW9uIG5hbWVzcGFjZSBp
        biBhc3NlcnRpb25zIHRvIGRlc2NyaWJlIHRoZQogICAgcHJlY2lzZSBuYW1l
        IG9mIHRoZSBjbGFzcyB0aGF0IEVtYmVyIGlzIGxvb2tpbmcgZm9yLCByYXRo
        ZXIgdGhhbgogICAgY29udGFpbmVyIGtleXMuCgogICAgQHByb3RlY3RlZAog
        ICAgQHBhcmFtIHtTdHJpbmd9IGZ1bGxOYW1lIHRoZSBsb29rdXAgc3RyaW5n
        CiAgICBAbWV0aG9kIGxvb2t1cERlc2NyaXB0aW9uCiAgKi8KICBsb29rdXBE
        ZXNjcmlwdGlvbjogZnVuY3Rpb24oZnVsbE5hbWUpIHsKICAgIHZhciBwYXJz
        ZWROYW1lID0gdGhpcy5wYXJzZU5hbWUoZnVsbE5hbWUpOwoKICAgIGlmIChw
        YXJzZWROYW1lLnR5cGUgPT09ICd0ZW1wbGF0ZScpIHsKICAgICAgcmV0dXJu
        ICJ0ZW1wbGF0ZSBhdCAiICsgcGFyc2VkTmFtZS5mdWxsTmFtZVdpdGhvdXRU
        eXBlLnJlcGxhY2UoL1wuL2csICcvJyk7CiAgICB9CgogICAgdmFyIGRlc2Ny
        aXB0aW9uID0gcGFyc2VkTmFtZS5yb290ICsgIi4iICsgY2xhc3NpZnkocGFy
        c2VkTmFtZS5uYW1lKTsKICAgIGlmIChwYXJzZWROYW1lLnR5cGUgIT09ICdt
        b2RlbCcpIHsgZGVzY3JpcHRpb24gKz0gY2xhc3NpZnkocGFyc2VkTmFtZS50
        eXBlKTsgfQoKICAgIHJldHVybiBkZXNjcmlwdGlvbjsKICB9LAoKICBtYWtl
        VG9TdHJpbmc6IGZ1bmN0aW9uKGZhY3RvcnksIGZ1bGxOYW1lKSB7CiAgICBy
        ZXR1cm4gZmFjdG9yeS50b1N0cmluZygpOwogIH0KfSk7Cgp9KSgpOwoKCgoo
        ZnVuY3Rpb24oKSB7Ci8qKgpAbW9kdWxlIGVtYmVyCkBzdWJtb2R1bGUgZW1i
        ZXItYXBwbGljYXRpb24KKi8KCnZhciBnZXQgPSBFbWJlci5nZXQsIHNldCA9
        IEVtYmVyLnNldDsKCmZ1bmN0aW9uIERlcHJlY2F0ZWRDb250YWluZXIoY29u
        dGFpbmVyKSB7CiAgdGhpcy5fY29udGFpbmVyID0gY29udGFpbmVyOwp9CgpE
        ZXByZWNhdGVkQ29udGFpbmVyLmRlcHJlY2F0ZSA9IGZ1bmN0aW9uKG1ldGhv
        ZCkgewogIHJldHVybiBmdW5jdGlvbigpIHsKICAgIHZhciBjb250YWluZXIg
        PSB0aGlzLl9jb250YWluZXI7CgogICAgRW1iZXIuZGVwcmVjYXRlKCdVc2lu
        ZyB0aGUgZGVmYXVsdENvbnRhaW5lciBpcyBubyBsb25nZXIgc3VwcG9ydGVk
        LiBbZGVmYXVsdENvbnRhaW5lciMnICsgbWV0aG9kICsgJ10gc2VlOiBodHRw
        Oi8vZ2l0LmlvL0VLUHBuQScsIGZhbHNlKTsKICAgIHJldHVybiBjb250YWlu
        ZXJbbWV0aG9kXS5hcHBseShjb250YWluZXIsIGFyZ3VtZW50cyk7CiAgfTsK
        fTsKCkRlcHJlY2F0ZWRDb250YWluZXIucHJvdG90eXBlID0gewogIF9jb250
        YWluZXI6IG51bGwsCiAgbG9va3VwOiBEZXByZWNhdGVkQ29udGFpbmVyLmRl
        cHJlY2F0ZSgnbG9va3VwJyksCiAgcmVzb2x2ZTogRGVwcmVjYXRlZENvbnRh
        aW5lci5kZXByZWNhdGUoJ3Jlc29sdmUnKSwKICByZWdpc3RlcjogRGVwcmVj
        YXRlZENvbnRhaW5lci5kZXByZWNhdGUoJ3JlZ2lzdGVyJykKfTsKCi8qKgog
        IEFuIGluc3RhbmNlIG9mIGBFbWJlci5BcHBsaWNhdGlvbmAgaXMgdGhlIHN0
        YXJ0aW5nIHBvaW50IGZvciBldmVyeSBFbWJlcgogIGFwcGxpY2F0aW9uLiBJ
        dCBoZWxwcyB0byBpbnN0YW50aWF0ZSwgaW5pdGlhbGl6ZSBhbmQgY29vcmRp
        bmF0ZSB0aGUgbWFueQogIG9iamVjdHMgdGhhdCBtYWtlIHVwIHlvdXIgYXBw
        LgoKICBFYWNoIEVtYmVyIGFwcCBoYXMgb25lIGFuZCBvbmx5IG9uZSBgRW1i
        ZXIuQXBwbGljYXRpb25gIG9iamVjdC4gSW4gZmFjdCwgdGhlCiAgdmVyeSBm
        aXJzdCB0aGluZyB5b3Ugc2hvdWxkIGRvIGluIHlvdXIgYXBwbGljYXRpb24g
        aXMgY3JlYXRlIHRoZSBpbnN0YW5jZToKCiAgYGBgamF2YXNjcmlwdAogIHdp
        bmRvdy5BcHAgPSBFbWJlci5BcHBsaWNhdGlvbi5jcmVhdGUoKTsKICBgYGAK
        CiAgVHlwaWNhbGx5LCB0aGUgYXBwbGljYXRpb24gb2JqZWN0IGlzIHRoZSBv
        bmx5IGdsb2JhbCB2YXJpYWJsZS4gQWxsIG90aGVyCiAgY2xhc3NlcyBpbiB5
        b3VyIGFwcCBzaG91bGQgYmUgcHJvcGVydGllcyBvbiB0aGUgYEVtYmVyLkFw
        cGxpY2F0aW9uYCBpbnN0YW5jZSwKICB3aGljaCBoaWdobGlnaHRzIGl0cyBm
        aXJzdCByb2xlOiBhIGdsb2JhbCBuYW1lc3BhY2UuCgogIEZvciBleGFtcGxl
        LCBpZiB5b3UgZGVmaW5lIGEgdmlldyBjbGFzcywgaXQgbWlnaHQgbG9vayBs
        aWtlIHRoaXM6CgogIGBgYGphdmFzY3JpcHQKICBBcHAuTXlWaWV3ID0gRW1i
        ZXIuVmlldy5leHRlbmQoKTsKICBgYGAKCiAgQnkgZGVmYXVsdCwgY2FsbGlu
        ZyBgRW1iZXIuQXBwbGljYXRpb24uY3JlYXRlKClgIHdpbGwgYXV0b21hdGlj
        YWxseSBpbml0aWFsaXplCiAgeW91ciBhcHBsaWNhdGlvbiBieSBjYWxsaW5n
        IHRoZSBgRW1iZXIuQXBwbGljYXRpb24uaW5pdGlhbGl6ZSgpYCBtZXRob2Qu
        IElmCiAgeW91IG5lZWQgdG8gZGVsYXkgaW5pdGlhbGl6YXRpb24sIHlvdSBj
        YW4gY2FsbCB5b3VyIGFwcCdzIGBkZWZlclJlYWRpbmVzcygpYAogIG1ldGhv
        ZC4gV2hlbiB5b3UgYXJlIHJlYWR5IGZvciB5b3VyIGFwcCB0byBiZSBpbml0
        aWFsaXplZCwgY2FsbCBpdHMKICBgYWR2YW5jZVJlYWRpbmVzcygpYCBtZXRo
        b2QuCgogIFlvdSBjYW4gZGVmaW5lIGEgYHJlYWR5YCBtZXRob2Qgb24gdGhl
        IGBFbWJlci5BcHBsaWNhdGlvbmAgaW5zdGFuY2UsIHdoaWNoCiAgd2lsbCBi
        ZSBydW4gYnkgRW1iZXIgd2hlbiB0aGUgYXBwbGljYXRpb24gaXMgaW5pdGlh
        bGl6ZWQuCgogIEJlY2F1c2UgYEVtYmVyLkFwcGxpY2F0aW9uYCBpbmhlcml0
        cyBmcm9tIGBFbWJlci5OYW1lc3BhY2VgLCBhbnkgY2xhc3NlcwogIHlvdSBj
        cmVhdGUgd2lsbCBoYXZlIHVzZWZ1bCBzdHJpbmcgcmVwcmVzZW50YXRpb25z
        IHdoZW4gY2FsbGluZyBgdG9TdHJpbmcoKWAuCiAgU2VlIHRoZSBgRW1iZXIu
        TmFtZXNwYWNlYCBkb2N1bWVudGF0aW9uIGZvciBtb3JlIGluZm9ybWF0aW9u
        LgoKICBXaGlsZSB5b3UgY2FuIHRoaW5rIG9mIHlvdXIgYEVtYmVyLkFwcGxp
        Y2F0aW9uYCBhcyBhIGNvbnRhaW5lciB0aGF0IGhvbGRzIHRoZQogIG90aGVy
        IGNsYXNzZXMgaW4geW91ciBhcHBsaWNhdGlvbiwgdGhlcmUgYXJlIHNldmVy
        YWwgb3RoZXIgcmVzcG9uc2liaWxpdGllcwogIGdvaW5nIG9uIHVuZGVyLXRo
        ZS1ob29kIHRoYXQgeW91IG1heSB3YW50IHRvIHVuZGVyc3RhbmQuCgogICMj
        IyBFdmVudCBEZWxlZ2F0aW9uCgogIEVtYmVyIHVzZXMgYSB0ZWNobmlxdWUg
        Y2FsbGVkIF9ldmVudCBkZWxlZ2F0aW9uXy4gVGhpcyBhbGxvd3MgdGhlIGZy
        YW1ld29yawogIHRvIHNldCB1cCBhIGdsb2JhbCwgc2hhcmVkIGV2ZW50IGxp
        c3RlbmVyIGluc3RlYWQgb2YgcmVxdWlyaW5nIGVhY2ggdmlldyB0bwogIGRv
        IGl0IG1hbnVhbGx5LiBGb3IgZXhhbXBsZSwgaW5zdGVhZCBvZiBlYWNoIHZp
        ZXcgcmVnaXN0ZXJpbmcgaXRzIG93bgogIGBtb3VzZWRvd25gIGxpc3RlbmVy
        IG9uIGl0cyBhc3NvY2lhdGVkIGVsZW1lbnQsIEVtYmVyIHNldHMgdXAgYSBg
        bW91c2Vkb3duYAogIGxpc3RlbmVyIG9uIHRoZSBgYm9keWAuCgogIElmIGEg
        YG1vdXNlZG93bmAgZXZlbnQgb2NjdXJzLCBFbWJlciB3aWxsIGxvb2sgYXQg
        dGhlIHRhcmdldCBvZiB0aGUgZXZlbnQgYW5kCiAgc3RhcnQgd2Fsa2luZyB1
        cCB0aGUgRE9NIG5vZGUgdHJlZSwgZmluZGluZyBjb3JyZXNwb25kaW5nIHZp
        ZXdzIGFuZCBpbnZva2luZwogIHRoZWlyIGBtb3VzZURvd25gIG1ldGhvZCBh
        cyBpdCBnb2VzLgoKICBgRW1iZXIuQXBwbGljYXRpb25gIGhhcyBhIG51bWJl
        ciBvZiBkZWZhdWx0IGV2ZW50cyB0aGF0IGl0IGxpc3RlbnMgZm9yLCBhcwog
        IHdlbGwgYXMgYSBtYXBwaW5nIGZyb20gbG93ZXJjYXNlIGV2ZW50cyB0byBj
        YW1lbC1jYXNlZCB2aWV3IG1ldGhvZCBuYW1lcy4gRm9yCiAgZXhhbXBsZSwg
        dGhlIGBrZXlwcmVzc2AgZXZlbnQgY2F1c2VzIHRoZSBga2V5UHJlc3NgIG1l
        dGhvZCBvbiB0aGUgdmlldyB0byBiZQogIGNhbGxlZCwgdGhlIGBkYmxjbGlj
        a2AgZXZlbnQgY2F1c2VzIGBkb3VibGVDbGlja2AgdG8gYmUgY2FsbGVkLCBh
        bmQgc28gb24uCgogIElmIHRoZXJlIGlzIGEgYnViYmxpbmcgYnJvd3NlciBl
        dmVudCB0aGF0IEVtYmVyIGRvZXMgbm90IGxpc3RlbiBmb3IgYnkKICBkZWZh
        dWx0LCB5b3UgY2FuIHNwZWNpZnkgY3VzdG9tIGV2ZW50cyBhbmQgdGhlaXIg
        Y29ycmVzcG9uZGluZyB2aWV3IG1ldGhvZAogIG5hbWVzIGJ5IHNldHRpbmcg
        dGhlIGFwcGxpY2F0aW9uJ3MgYGN1c3RvbUV2ZW50c2AgcHJvcGVydHk6Cgog
        IGBgYGphdmFzY3JpcHQKICBBcHAgPSBFbWJlci5BcHBsaWNhdGlvbi5jcmVh
        dGUoewogICAgY3VzdG9tRXZlbnRzOiB7CiAgICAgIC8vIGFkZCBzdXBwb3J0
        IGZvciB0aGUgcGFzdGUgZXZlbnQKICAgICAgcGFzdGU6ICJwYXN0ZSIKICAg
        IH0KICB9KTsKICBgYGAKCiAgQnkgZGVmYXVsdCwgdGhlIGFwcGxpY2F0aW9u
        IHNldHMgdXAgdGhlc2UgZXZlbnQgbGlzdGVuZXJzIG9uIHRoZSBkb2N1bWVu
        dAogIGJvZHkuIEhvd2V2ZXIsIGluIGNhc2VzIHdoZXJlIHlvdSBhcmUgZW1i
        ZWRkaW5nIGFuIEVtYmVyIGFwcGxpY2F0aW9uIGluc2lkZQogIGFuIGV4aXN0
        aW5nIHBhZ2UsIHlvdSBtYXkgd2FudCBpdCB0byBzZXQgdXAgdGhlIGxpc3Rl
        bmVycyBvbiBhbiBlbGVtZW50CiAgaW5zaWRlIHRoZSBib2R5LgoKICBGb3Ig
        ZXhhbXBsZSwgaWYgb25seSBldmVudHMgaW5zaWRlIGEgRE9NIGVsZW1lbnQg
        d2l0aCB0aGUgSUQgb2YgYGVtYmVyLWFwcGAKICBzaG91bGQgYmUgZGVsZWdh
        dGVkLCBzZXQgeW91ciBhcHBsaWNhdGlvbidzIGByb290RWxlbWVudGAgcHJv
        cGVydHk6CgogIGBgYGphdmFzY3JpcHQKICB3aW5kb3cuQXBwID0gRW1iZXIu
        QXBwbGljYXRpb24uY3JlYXRlKHsKICAgIHJvb3RFbGVtZW50OiAnI2VtYmVy
        LWFwcCcKICB9KTsKICBgYGAKCiAgVGhlIGByb290RWxlbWVudGAgY2FuIGJl
        IGVpdGhlciBhIERPTSBlbGVtZW50IG9yIGEgalF1ZXJ5LWNvbXBhdGlibGUg
        c2VsZWN0b3IKICBzdHJpbmcuIE5vdGUgdGhhdCAqdmlld3MgYXBwZW5kZWQg
        dG8gdGhlIERPTSBvdXRzaWRlIHRoZSByb290IGVsZW1lbnQgd2lsbAogIG5v
        dCByZWNlaXZlIGV2ZW50cy4qIElmIHlvdSBzcGVjaWZ5IGEgY3VzdG9tIHJv
        b3QgZWxlbWVudCwgbWFrZSBzdXJlIHlvdSBvbmx5CiAgYXBwZW5kIHZpZXdz
        IGluc2lkZSBpdCEKCiAgVG8gbGVhcm4gbW9yZSBhYm91dCB0aGUgYWR2YW50
        YWdlcyBvZiBldmVudCBkZWxlZ2F0aW9uIGFuZCB0aGUgRW1iZXIgdmlldwog
        IGxheWVyLCBhbmQgYSBsaXN0IG9mIHRoZSBldmVudCBsaXN0ZW5lcnMgdGhh
        dCBhcmUgc2V0dXAgYnkgZGVmYXVsdCwgdmlzaXQgdGhlCiAgW0VtYmVyIFZp
        ZXcgTGF5ZXIgZ3VpZGVdKGh0dHA6Ly9lbWJlcmpzLmNvbS9ndWlkZXMvdW5k
        ZXJzdGFuZGluZy1lbWJlci90aGUtdmlldy1sYXllci8jdG9jX2V2ZW50LWRl
        bGVnYXRpb24pLgoKICAjIyMgSW5pdGlhbGl6ZXJzCgogIExpYnJhcmllcyBv
        biB0b3Agb2YgRW1iZXIgY2FuIHJlZ2lzdGVyIGFkZGl0aW9uYWwgaW5pdGlh
        bGl6ZXJzLCBsaWtlIHNvOgoKICBgYGBqYXZhc2NyaXB0CiAgRW1iZXIuQXBw
        bGljYXRpb24uaW5pdGlhbGl6ZXIoewogICAgbmFtZTogInN0b3JlIiwKCiAg
        ICBpbml0aWFsaXplOiBmdW5jdGlvbihjb250YWluZXIsIGFwcGxpY2F0aW9u
        KSB7CiAgICAgIGNvbnRhaW5lci5yZWdpc3Rlcignc3RvcmU6bWFpbicsIGFw
        cGxpY2F0aW9uLlN0b3JlKTsKICAgIH0KICB9KTsKICBgYGAKCiAgIyMjIFJv
        dXRpbmcKCiAgSW4gYWRkaXRpb24gdG8gY3JlYXRpbmcgeW91ciBhcHBsaWNh
        dGlvbidzIHJvdXRlciwgYEVtYmVyLkFwcGxpY2F0aW9uYCBpcwogIGFsc28g
        cmVzcG9uc2libGUgZm9yIHRlbGxpbmcgdGhlIHJvdXRlciB3aGVuIHRvIHN0
        YXJ0IHJvdXRpbmcuIFRyYW5zaXRpb25zCiAgYmV0d2VlbiByb3V0ZXMgY2Fu
        IGJlIGxvZ2dlZCB3aXRoIHRoZSBgTE9HX1RSQU5TSVRJT05TYCBmbGFnLCBh
        bmQgbW9yZQogIGRldGFpbGVkIGludHJhLXRyYW5zaXRpb24gbG9nZ2luZyBj
        YW4gYmUgbG9nZ2VkIHdpdGgKICB0aGUgYExPR19UUkFOU0lUSU9OU19JTlRF
        Uk5BTGAgZmxhZzoKCiAgYGBgamF2YXNjcmlwdAogIHdpbmRvdy5BcHAgPSBF
        bWJlci5BcHBsaWNhdGlvbi5jcmVhdGUoewogICAgTE9HX1RSQU5TSVRJT05T
        OiB0cnVlLCAvLyBiYXNpYyBsb2dnaW5nIG9mIHN1Y2Nlc3NmdWwgdHJhbnNp
        dGlvbnMKICAgIExPR19UUkFOU0lUSU9OU19JTlRFUk5BTDogdHJ1ZSAvLyBk
        ZXRhaWxlZCBsb2dnaW5nIG9mIGFsbCByb3V0aW5nIHN0ZXBzCiAgfSk7CiAg
        YGBgCgogIEJ5IGRlZmF1bHQsIHRoZSByb3V0ZXIgd2lsbCBiZWdpbiB0cnlp
        bmcgdG8gdHJhbnNsYXRlIHRoZSBjdXJyZW50IFVSTCBpbnRvCiAgYXBwbGlj
        YXRpb24gc3RhdGUgb25jZSB0aGUgYnJvd3NlciBlbWl0cyB0aGUgYERPTUNv
        bnRlbnRSZWFkeWAgZXZlbnQuIElmIHlvdQogIG5lZWQgdG8gZGVmZXIgcm91
        dGluZywgeW91IGNhbiBjYWxsIHRoZSBhcHBsaWNhdGlvbidzIGBkZWZlclJl
        YWRpbmVzcygpYAogIG1ldGhvZC4gT25jZSByb3V0aW5nIGNhbiBiZWdpbiwg
        Y2FsbCB0aGUgYGFkdmFuY2VSZWFkaW5lc3MoKWAgbWV0aG9kLgoKICBJZiB0
        aGVyZSBpcyBhbnkgc2V0dXAgcmVxdWlyZWQgYmVmb3JlIHJvdXRpbmcgYmVn
        aW5zLCB5b3UgY2FuIGltcGxlbWVudCBhCiAgYHJlYWR5KClgIG1ldGhvZCBv
        biB5b3VyIGFwcCB0aGF0IHdpbGwgYmUgaW52b2tlZCBpbW1lZGlhdGVseSBi
        ZWZvcmUgcm91dGluZwogIGJlZ2lucy4KICBgYGAKCiAgQGNsYXNzIEFwcGxp
        Y2F0aW9uCiAgQG5hbWVzcGFjZSBFbWJlcgogIEBleHRlbmRzIEVtYmVyLk5h
        bWVzcGFjZQoqLwoKdmFyIEFwcGxpY2F0aW9uID0gRW1iZXIuQXBwbGljYXRp
        b24gPSBFbWJlci5OYW1lc3BhY2UuZXh0ZW5kKEVtYmVyLkRlZmVycmVkTWl4
        aW4sIHsKCiAgLyoqCiAgICBUaGUgcm9vdCBET00gZWxlbWVudCBvZiB0aGUg
        QXBwbGljYXRpb24uIFRoaXMgY2FuIGJlIHNwZWNpZmllZCBhcyBhbgogICAg
        ZWxlbWVudCBvciBhCiAgICBbalF1ZXJ5LWNvbXBhdGlibGUgc2VsZWN0b3Ig
        c3RyaW5nXShodHRwOi8vYXBpLmpxdWVyeS5jb20vY2F0ZWdvcnkvc2VsZWN0
        b3JzLykuCgogICAgVGhpcyBpcyB0aGUgZWxlbWVudCB0aGF0IHdpbGwgYmUg
        cGFzc2VkIHRvIHRoZSBBcHBsaWNhdGlvbidzLAogICAgYGV2ZW50RGlzcGF0
        Y2hlcmAsIHdoaWNoIHNldHMgdXAgdGhlIGxpc3RlbmVycyBmb3IgZXZlbnQg
        ZGVsZWdhdGlvbi4gRXZlcnkKICAgIHZpZXcgaW4geW91ciBhcHBsaWNhdGlv
        biBzaG91bGQgYmUgYSBjaGlsZCBvZiB0aGUgZWxlbWVudCB5b3Ugc3BlY2lm
        eSBoZXJlLgoKICAgIEBwcm9wZXJ0eSByb290RWxlbWVudAogICAgQHR5cGUg
        RE9NRWxlbWVudAogICAgQGRlZmF1bHQgJ2JvZHknCiAgKi8KICByb290RWxl
        bWVudDogJ2JvZHknLAoKICAvKioKICAgIFRoZSBgRW1iZXIuRXZlbnREaXNw
        YXRjaGVyYCByZXNwb25zaWJsZSBmb3IgZGVsZWdhdGluZyBldmVudHMgdG8g
        dGhpcwogICAgYXBwbGljYXRpb24ncyB2aWV3cy4KCiAgICBUaGUgZXZlbnQg
        ZGlzcGF0Y2hlciBpcyBjcmVhdGVkIGJ5IHRoZSBhcHBsaWNhdGlvbiBhdCBp
        bml0aWFsaXphdGlvbiB0aW1lCiAgICBhbmQgc2V0cyB1cCBldmVudCBsaXN0
        ZW5lcnMgb24gdGhlIERPTSBlbGVtZW50IGRlc2NyaWJlZCBieSB0aGUKICAg
        IGFwcGxpY2F0aW9uJ3MgYHJvb3RFbGVtZW50YCBwcm9wZXJ0eS4KCiAgICBT
        ZWUgdGhlIGRvY3VtZW50YXRpb24gZm9yIGBFbWJlci5FdmVudERpc3BhdGNo
        ZXJgIGZvciBtb3JlIGluZm9ybWF0aW9uLgoKICAgIEBwcm9wZXJ0eSBldmVu
        dERpc3BhdGNoZXIKICAgIEB0eXBlIEVtYmVyLkV2ZW50RGlzcGF0Y2hlcgog
        ICAgQGRlZmF1bHQgbnVsbAogICovCiAgZXZlbnREaXNwYXRjaGVyOiBudWxs
        LAoKICAvKioKICAgIFRoZSBET00gZXZlbnRzIGZvciB3aGljaCB0aGUgZXZl
        bnQgZGlzcGF0Y2hlciBzaG91bGQgbGlzdGVuLgoKICAgIEJ5IGRlZmF1bHQs
        IHRoZSBhcHBsaWNhdGlvbidzIGBFbWJlci5FdmVudERpc3BhdGNoZXJgIGxp
        c3RlbnMKICAgIGZvciBhIHNldCBvZiBzdGFuZGFyZCBET00gZXZlbnRzLCBz
        dWNoIGFzIGBtb3VzZWRvd25gIGFuZAogICAgYGtleXVwYCwgYW5kIGRlbGVn
        YXRlcyB0aGVtIHRvIHlvdXIgYXBwbGljYXRpb24ncyBgRW1iZXIuVmlld2AK
        ICAgIGluc3RhbmNlcy4KCiAgICBJZiB5b3Ugd291bGQgbGlrZSBhZGRpdGlv
        bmFsIGJ1YmJsaW5nIGV2ZW50cyB0byBiZSBkZWxlZ2F0ZWQgdG8geW91cgog
        ICAgdmlld3MsIHNldCB5b3VyIGBFbWJlci5BcHBsaWNhdGlvbmAncyBgY3Vz
        dG9tRXZlbnRzYCBwcm9wZXJ0eQogICAgdG8gYSBoYXNoIGNvbnRhaW5pbmcg
        dGhlIERPTSBldmVudCBuYW1lIGFzIHRoZSBrZXkgYW5kIHRoZQogICAgY29y
        cmVzcG9uZGluZyB2aWV3IG1ldGhvZCBuYW1lIGFzIHRoZSB2YWx1ZS4gRm9y
        IGV4YW1wbGU6CgogICAgYGBgamF2YXNjcmlwdAogICAgQXBwID0gRW1iZXIu
        QXBwbGljYXRpb24uY3JlYXRlKHsKICAgICAgY3VzdG9tRXZlbnRzOiB7CiAg
        ICAgICAgLy8gYWRkIHN1cHBvcnQgZm9yIHRoZSBwYXN0ZSBldmVudAogICAg
        ICAgIHBhc3RlOiAicGFzdGUiCiAgICAgIH0KICAgIH0pOwogICAgYGBgCgog
        ICAgQHByb3BlcnR5IGN1c3RvbUV2ZW50cwogICAgQHR5cGUgT2JqZWN0CiAg
        ICBAZGVmYXVsdCBudWxsCiAgKi8KICBjdXN0b21FdmVudHM6IG51bGwsCgog
        IC8vIFN0YXJ0IG9mZiB0aGUgbnVtYmVyIG9mIGRlZmVycmFscyBhdCAxLiBU
        aGlzIHdpbGwgYmUKICAvLyBkZWNyZW1lbnRlZCBieSB0aGUgQXBwbGljYXRp
        b24ncyBvd24gYGluaXRpYWxpemVgIG1ldGhvZC4KICBfcmVhZGluZXNzRGVm
        ZXJyYWxzOiAxLAoKICBpbml0OiBmdW5jdGlvbigpIHsKICAgIGlmICghdGhp
        cy4kKSB7IHRoaXMuJCA9IEVtYmVyLiQ7IH0KICAgIHRoaXMuX19jb250YWlu
        ZXJfXyA9IHRoaXMuYnVpbGRDb250YWluZXIoKTsKCiAgICB0aGlzLlJvdXRl
        ciA9IHRoaXMuZGVmYXVsdFJvdXRlcigpOwoKICAgIHRoaXMuX3N1cGVyKCk7
        CgogICAgdGhpcy5zY2hlZHVsZUluaXRpYWxpemUoKTsKCiAgICBFbWJlci5s
        aWJyYXJpZXMucmVnaXN0ZXJDb3JlTGlicmFyeSgnSGFuZGxlYmFycycsIEVt
        YmVyLkhhbmRsZWJhcnMuVkVSU0lPTik7CiAgICBFbWJlci5saWJyYXJpZXMu
        cmVnaXN0ZXJDb3JlTGlicmFyeSgnalF1ZXJ5JywgRW1iZXIuJCgpLmpxdWVy
        eSk7CgogICAgaWYgKCBFbWJlci5MT0dfVkVSU0lPTiApIHsKICAgICAgRW1i
        ZXIuTE9HX1ZFUlNJT04gPSBmYWxzZTsgLy8gd2Ugb25seSBuZWVkIHRvIHNl
        ZSB0aGlzIG9uY2UgcGVyIEFwcGxpY2F0aW9uI2luaXQKICAgICAgdmFyIG1h
        eE5hbWVMZW5ndGggPSBNYXRoLm1heC5hcHBseSh0aGlzLCBFbWJlci5BKEVt
        YmVyLmxpYnJhcmllcykubWFwQnkoIm5hbWUubGVuZ3RoIikpOwoKICAgICAg
        RW1iZXIuZGVidWcoJy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0n
        KTsKICAgICAgRW1iZXIubGlicmFyaWVzLmVhY2goZnVuY3Rpb24obmFtZSwg
        dmVyc2lvbikgewogICAgICAgIHZhciBzcGFjZXMgPSBuZXcgQXJyYXkobWF4
        TmFtZUxlbmd0aCAtIG5hbWUubGVuZ3RoICsgMSkuam9pbigiICIpOwogICAg
        ICAgIEVtYmVyLmRlYnVnKFtuYW1lLCBzcGFjZXMsICcgOiAnLCB2ZXJzaW9u
        XS5qb2luKCIiKSk7CiAgICAgIH0pOwogICAgICBFbWJlci5kZWJ1ZygnLS0t
        LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLScpOwogICAgfQogIH0sCgog
        IC8qKgogICAgQnVpbGQgdGhlIGNvbnRhaW5lciBmb3IgdGhlIGN1cnJlbnQg
        YXBwbGljYXRpb24uCgogICAgQWxzbyByZWdpc3RlciBhIGRlZmF1bHQgYXBw
        bGljYXRpb24gdmlldyBpbiBjYXNlIHRoZSBhcHBsaWNhdGlvbgogICAgaXRz
        ZWxmIGRvZXMgbm90LgoKICAgIEBwcml2YXRlCiAgICBAbWV0aG9kIGJ1aWxk
        Q29udGFpbmVyCiAgICBAcmV0dXJuIHtFbWJlci5Db250YWluZXJ9IHRoZSBj
        b25maWd1cmVkIGNvbnRhaW5lcgogICovCiAgYnVpbGRDb250YWluZXI6IGZ1
        bmN0aW9uKCkgewogICAgdmFyIGNvbnRhaW5lciA9IHRoaXMuX19jb250YWlu
        ZXJfXyA9IEFwcGxpY2F0aW9uLmJ1aWxkQ29udGFpbmVyKHRoaXMpOwoKICAg
        IHJldHVybiBjb250YWluZXI7CiAgfSwKCiAgLyoqCiAgICBJZiB0aGUgYXBw
        bGljYXRpb24gaGFzIG5vdCBvcHRlZCBvdXQgb2Ygcm91dGluZyBhbmQgaGFz
        IG5vdCBleHBsaWNpdGx5CiAgICBkZWZpbmVkIGEgcm91dGVyLCBzdXBwbHkg
        YSBkZWZhdWx0IHJvdXRlciBmb3IgdGhlIGFwcGxpY2F0aW9uIGF1dGhvcgog
        ICAgdG8gY29uZmlndXJlLgoKICAgIFRoaXMgYWxsb3dzIGFwcGxpY2F0aW9u
        IGRldmVsb3BlcnMgdG8gZG86CgogICAgYGBgamF2YXNjcmlwdAogICAgdmFy
        IEFwcCA9IEVtYmVyLkFwcGxpY2F0aW9uLmNyZWF0ZSgpOwoKICAgIEFwcC5S
        b3V0ZXIubWFwKGZ1bmN0aW9uKCkgewogICAgICB0aGlzLnJlc291cmNlKCdw
        b3N0cycpOwogICAgfSk7CiAgICBgYGAKCiAgICBAcHJpdmF0ZQogICAgQG1l
        dGhvZCBkZWZhdWx0Um91dGVyCiAgICBAcmV0dXJuIHtFbWJlci5Sb3V0ZXJ9
        IHRoZSBkZWZhdWx0IHJvdXRlcgogICovCgogIGRlZmF1bHRSb3V0ZXI6IGZ1
        bmN0aW9uKCkgewogICAgaWYgKHRoaXMuUm91dGVyID09PSBmYWxzZSkgeyBy
        ZXR1cm47IH0KICAgIHZhciBjb250YWluZXIgPSB0aGlzLl9fY29udGFpbmVy
        X187CgogICAgaWYgKHRoaXMuUm91dGVyKSB7CiAgICAgIGNvbnRhaW5lci51
        bnJlZ2lzdGVyKCdyb3V0ZXI6bWFpbicpOwogICAgICBjb250YWluZXIucmVn
        aXN0ZXIoJ3JvdXRlcjptYWluJywgdGhpcy5Sb3V0ZXIpOwogICAgfQoKICAg
        IHJldHVybiBjb250YWluZXIubG9va3VwRmFjdG9yeSgncm91dGVyOm1haW4n
        KTsKICB9LAoKICAvKioKICAgIEF1dG9tYXRpY2FsbHkgaW5pdGlhbGl6ZSB0
        aGUgYXBwbGljYXRpb24gb25jZSB0aGUgRE9NIGhhcwogICAgYmVjb21lIHJl
        YWR5LgoKICAgIFRoZSBpbml0aWFsaXphdGlvbiBpdHNlbGYgaXMgc2NoZWR1
        bGVkIG9uIHRoZSBhY3Rpb25zIHF1ZXVlCiAgICB3aGljaCBlbnN1cmVzIHRo
        YXQgYXBwbGljYXRpb24gbG9hZGluZyBmaW5pc2hlcyBiZWZvcmUKICAgIGJv
        b3RpbmcuCgogICAgSWYgeW91IGFyZSBhc3luY2hyb25vdXNseSBsb2FkaW5n
        IGNvZGUsIHlvdSBzaG91bGQgY2FsbAogICAgYGRlZmVyUmVhZGluZXNzKClg
        IHRvIGRlZmVyIGJvb3RpbmcsIGFuZCB0aGVuIGNhbGwKICAgIGBhZHZhbmNl
        UmVhZGluZXNzKClgIG9uY2UgYWxsIG9mIHlvdXIgY29kZSBoYXMgZmluaXNo
        ZWQKICAgIGxvYWRpbmcuCgogICAgQHByaXZhdGUKICAgIEBtZXRob2Qgc2No
        ZWR1bGVJbml0aWFsaXplCiAgKi8KICBzY2hlZHVsZUluaXRpYWxpemU6IGZ1
        bmN0aW9uKCkgewogICAgdmFyIHNlbGYgPSB0aGlzOwoKICAgIGlmICghdGhp
        cy4kIHx8IHRoaXMuJC5pc1JlYWR5KSB7CiAgICAgIEVtYmVyLnJ1bi5zY2hl
        ZHVsZSgnYWN0aW9ucycsIHNlbGYsICdfaW5pdGlhbGl6ZScpOwogICAgfSBl
        bHNlIHsKICAgICAgdGhpcy4kKCkucmVhZHkoZnVuY3Rpb24gcnVuSW5pdGlh
        bGl6ZSgpIHsKICAgICAgICBFbWJlci5ydW4oc2VsZiwgJ19pbml0aWFsaXpl
        Jyk7CiAgICAgIH0pOwogICAgfQogIH0sCgogIC8qKgogICAgVXNlIHRoaXMg
        dG8gZGVmZXIgcmVhZGluZXNzIHVudGlsIHNvbWUgY29uZGl0aW9uIGlzIHRy
        dWUuCgogICAgRXhhbXBsZToKCiAgICBgYGBqYXZhc2NyaXB0CiAgICBBcHAg
        PSBFbWJlci5BcHBsaWNhdGlvbi5jcmVhdGUoKTsKICAgIEFwcC5kZWZlclJl
        YWRpbmVzcygpOwoKICAgIGpRdWVyeS5nZXRKU09OKCIvYXV0aC10b2tlbiIs
        IGZ1bmN0aW9uKHRva2VuKSB7CiAgICAgIEFwcC50b2tlbiA9IHRva2VuOwog
        ICAgICBBcHAuYWR2YW5jZVJlYWRpbmVzcygpOwogICAgfSk7CiAgICBgYGAK
        CiAgICBUaGlzIGFsbG93cyB5b3UgdG8gcGVyZm9ybSBhc3luY2hyb25vdXMg
        c2V0dXAgbG9naWMgYW5kIGRlZmVyCiAgICBib290aW5nIHlvdXIgYXBwbGlj
        YXRpb24gdW50aWwgdGhlIHNldHVwIGhhcyBmaW5pc2hlZC4KCiAgICBIb3dl
        dmVyLCBpZiB0aGUgc2V0dXAgcmVxdWlyZXMgYSBsb2FkaW5nIFVJLCBpdCBt
        aWdodCBiZSBiZXR0ZXIKICAgIHRvIHVzZSB0aGUgcm91dGVyIGZvciB0aGlz
        IHB1cnBvc2UuCgogICAgQG1ldGhvZCBkZWZlclJlYWRpbmVzcwogICovCiAg
        ZGVmZXJSZWFkaW5lc3M6IGZ1bmN0aW9uKCkgewogICAgRW1iZXIuYXNzZXJ0
        KCJZb3UgbXVzdCBjYWxsIGRlZmVyUmVhZGluZXNzIG9uIGFuIGluc3RhbmNl
        IG9mIEVtYmVyLkFwcGxpY2F0aW9uIiwgdGhpcyBpbnN0YW5jZW9mIEVtYmVy
        LkFwcGxpY2F0aW9uKTsKICAgIEVtYmVyLmFzc2VydCgiWW91IGNhbm5vdCBk
        ZWZlciByZWFkaW5lc3Mgc2luY2UgdGhlIGByZWFkeSgpYCBob29rIGhhcyBh
        bHJlYWR5IGJlZW4gY2FsbGVkLiIsIHRoaXMuX3JlYWRpbmVzc0RlZmVycmFs
        cyA+IDApOwogICAgdGhpcy5fcmVhZGluZXNzRGVmZXJyYWxzKys7CiAgfSwK
        CiAgLyoqCiAgICBDYWxsIGBhZHZhbmNlUmVhZGluZXNzYCBhZnRlciBhbnkg
        YXN5bmNocm9ub3VzIHNldHVwIGxvZ2ljIGhhcyBjb21wbGV0ZWQuCiAgICBF
        YWNoIGNhbGwgdG8gYGRlZmVyUmVhZGluZXNzYCBtdXN0IGJlIG1hdGNoZWQg
        YnkgYSBjYWxsIHRvIGBhZHZhbmNlUmVhZGluZXNzYAogICAgb3IgdGhlIGFw
        cGxpY2F0aW9uIHdpbGwgbmV2ZXIgYmVjb21lIHJlYWR5IGFuZCByb3V0aW5n
        IHdpbGwgbm90IGJlZ2luLgoKICAgIEBtZXRob2QgYWR2YW5jZVJlYWRpbmVz
        cwogICAgQHNlZSB7RW1iZXIuQXBwbGljYXRpb24jZGVmZXJSZWFkaW5lc3N9
        CiAgKi8KICBhZHZhbmNlUmVhZGluZXNzOiBmdW5jdGlvbigpIHsKICAgIEVt
        YmVyLmFzc2VydCgiWW91IG11c3QgY2FsbCBhZHZhbmNlUmVhZGluZXNzIG9u
        IGFuIGluc3RhbmNlIG9mIEVtYmVyLkFwcGxpY2F0aW9uIiwgdGhpcyBpbnN0
        YW5jZW9mIEVtYmVyLkFwcGxpY2F0aW9uKTsKICAgIHRoaXMuX3JlYWRpbmVz
        c0RlZmVycmFscy0tOwoKICAgIGlmICh0aGlzLl9yZWFkaW5lc3NEZWZlcnJh
        bHMgPT09IDApIHsKICAgICAgRW1iZXIucnVuLm9uY2UodGhpcywgdGhpcy5k
        aWRCZWNvbWVSZWFkeSk7CiAgICB9CiAgfSwKCiAgLyoqCiAgICByZWdpc3Rl
        cnMgYSBmYWN0b3J5IGZvciBsYXRlciBpbmplY3Rpb24KCiAgICBFeGFtcGxl
        OgoKICAgIGBgYGphdmFzY3JpcHQKICAgIEFwcCA9IEVtYmVyLkFwcGxpY2F0
        aW9uLmNyZWF0ZSgpOwoKICAgIEFwcC5QZXJzb24gID0gRW1iZXIuT2JqZWN0
        LmV4dGVuZCh7fSk7CiAgICBBcHAuT3JhbmdlICA9IEVtYmVyLk9iamVjdC5l
        eHRlbmQoe30pOwogICAgQXBwLkVtYWlsICAgPSBFbWJlci5PYmplY3QuZXh0
        ZW5kKHt9KTsKICAgIEFwcC5zZXNzaW9uID0gRW1iZXIuT2JqZWN0LmNyZWF0
        ZSh7fSk7CgogICAgQXBwLnJlZ2lzdGVyKCdtb2RlbDp1c2VyJywgQXBwLlBl
        cnNvbiwge3NpbmdsZXRvbjogZmFsc2UgfSk7CiAgICBBcHAucmVnaXN0ZXIo
        J2ZydWl0OmZhdm9yaXRlJywgQXBwLk9yYW5nZSk7CiAgICBBcHAucmVnaXN0
        ZXIoJ2NvbW11bmljYXRpb246bWFpbicsIEFwcC5FbWFpbCwge3NpbmdsZXRv
        bjogZmFsc2V9KTsKICAgIEFwcC5yZWdpc3Rlcignc2Vzc2lvbicsIEFwcC5z
        ZXNzaW9uLCB7aW5zdGFudGlhdGU6IGZhbHNlfSk7CiAgICBgYGAKCiAgICBA
        bWV0aG9kIHJlZ2lzdGVyCiAgICBAcGFyYW0gIGZ1bGxOYW1lIHtTdHJpbmd9
        IHR5cGU6bmFtZSAoZS5nLiwgJ21vZGVsOnVzZXInKQogICAgQHBhcmFtICBm
        YWN0b3J5IHtGdW5jdGlvbn0gKGUuZy4sIEFwcC5QZXJzb24pCiAgICBAcGFy
        YW0gIG9wdGlvbnMge1N0cmluZ30gKG9wdGlvbmFsKQogICoqLwogIHJlZ2lz
        dGVyOiBmdW5jdGlvbigpIHsKICAgIHZhciBjb250YWluZXIgPSB0aGlzLl9f
        Y29udGFpbmVyX187CiAgICBjb250YWluZXIucmVnaXN0ZXIuYXBwbHkoY29u
        dGFpbmVyLCBhcmd1bWVudHMpOwogIH0sCiAgLyoqCiAgICBkZWZpbmVzIGFu
        IGluamVjdGlvbiBvciB0eXBlSW5qZWN0aW9uCgogICAgRXhhbXBsZToKCiAg
        ICBgYGBqYXZhc2NyaXB0CiAgICBBcHAuaW5qZWN0KDxmdWxsX25hbWUgb3Ig
        dHlwZT4sIDxwcm9wZXJ0eSBuYW1lPiwgPGZ1bGxfbmFtZT4pCiAgICBBcHAu
        aW5qZWN0KCdjb250cm9sbGVyOmFwcGxpY2F0aW9uJywgJ2VtYWlsJywgJ21v
        ZGVsOmVtYWlsJykKICAgIEFwcC5pbmplY3QoJ2NvbnRyb2xsZXInLCAnc291
        cmNlJywgJ3NvdXJjZTptYWluJykKICAgIGBgYAogICAgUGxlYXNlIG5vdGUg
        dGhhdCBpbmplY3Rpb25zIG9uIG1vZGVscyBhcmUgY3VycmVudGx5IGRpc2Fi
        bGVkLiAKICAgIFRoaXMgd2FzIGRvbmUgYmVjYXVzZSBlbWJlci1kYXRhIHdh
        cyBub3QgcmVhZHkgZm9yIGZ1bGx5IGEgY29udGFpbmVyIGF3YXJlIGVjb3N5
        c3RlbS4KICAgIAogICAgWW91IGNhbiBlbmFibGUgaW5qZWN0aW9ucyBvbiBt
        b2RlbHMgYnkgc2V0dGluZyBgRW1iZXIuTU9ERUxfRkFDVE9SWV9JTkpFQ1RJ
        T05TYCBmbGFnIHRvIGB0cnVlYAogICAgSWYgbW9kZWwgZmFjdG9yeSBpbmpl
        Y3Rpb25zIGFyZSBlbmFibGVkLCBtb2RlbHMgc2hvdWxkIG5vdCBiZQogICAg
        YWNjZXNzZWQgZ2xvYmFsbHkgKG9ubHkgdGhyb3VnaCBgY29udGFpbmVyLmxv
        b2t1cEZhY3RvcnkoJ21vZGVsOm1vZGVsTmFtZScpKWApOwoKICAgIEBtZXRo
        b2QgaW5qZWN0CiAgICBAcGFyYW0gIGZhY3RvcnlOYW1lT3JUeXBlIHtTdHJp
        bmd9CiAgICBAcGFyYW0gIHByb3BlcnR5IHtTdHJpbmd9CiAgICBAcGFyYW0g
        IGluamVjdGlvbk5hbWUge1N0cmluZ30KICAqKi8KICBpbmplY3Q6IGZ1bmN0
        aW9uKCkgewogICAgdmFyIGNvbnRhaW5lciA9IHRoaXMuX19jb250YWluZXJf
        XzsKICAgIGNvbnRhaW5lci5pbmplY3Rpb24uYXBwbHkoY29udGFpbmVyLCBh
        cmd1bWVudHMpOwogIH0sCgogIC8qKgogICAgQ2FsbGluZyBpbml0aWFsaXpl
        IG1hbnVhbGx5IGlzIG5vdCBzdXBwb3J0ZWQuCgogICAgUGxlYXNlIHNlZSBF
        bWJlci5BcHBsaWNhdGlvbiNhZHZhbmNlUmVhZGluZXNzIGFuZAogICAgRW1i
        ZXIuQXBwbGljYXRpb24jZGVmZXJSZWFkaW5lc3MuCgogICAgQHByaXZhdGUK
        ICAgIEBkZXByZWNhdGVkCiAgICBAbWV0aG9kIGluaXRpYWxpemUKICAgKiov
        CiAgaW5pdGlhbGl6ZTogZnVuY3Rpb24oKSB7CiAgICBFbWJlci5kZXByZWNh
        dGUoJ0NhbGxpbmcgaW5pdGlhbGl6ZSBtYW51YWxseSBpcyBub3Qgc3VwcG9y
        dGVkLiBQbGVhc2Ugc2VlIEVtYmVyLkFwcGxpY2F0aW9uI2FkdmFuY2VSZWFk
        aW5lc3MgYW5kIEVtYmVyLkFwcGxpY2F0aW9uI2RlZmVyUmVhZGluZXNzJyk7
        CiAgfSwKICAvKioKICAgIEluaXRpYWxpemUgdGhlIGFwcGxpY2F0aW9uLiBU
        aGlzIGhhcHBlbnMgYXV0b21hdGljYWxseS4KCiAgICBSdW4gYW55IGluaXRp
        YWxpemVycyBhbmQgcnVuIHRoZSBhcHBsaWNhdGlvbiBsb2FkIGhvb2suIFRo
        ZXNlIGhvb2tzIG1heQogICAgY2hvb3NlIHRvIGRlZmVyIHJlYWRpbmVzcy4g
        Rm9yIGV4YW1wbGUsIGFuIGF1dGhlbnRpY2F0aW9uIGhvb2sgbWlnaHQgd2Fu
        dAogICAgdG8gZGVmZXIgcmVhZGluZXNzIHVudGlsIHRoZSBhdXRoIHRva2Vu
        IGhhcyBiZWVuIHJldHJpZXZlZC4KCiAgICBAcHJpdmF0ZQogICAgQG1ldGhv
        ZCBfaW5pdGlhbGl6ZQogICovCiAgX2luaXRpYWxpemU6IGZ1bmN0aW9uKCkg
        ewogICAgaWYgKHRoaXMuaXNEZXN0cm95ZWQpIHsgcmV0dXJuOyB9CgogICAg
        Ly8gQXQgdGhpcyBwb2ludCwgdGhlIEFwcC5Sb3V0ZXIgbXVzdCBhbHJlYWR5
        IGJlIGFzc2lnbmVkCiAgICBpZiAodGhpcy5Sb3V0ZXIpIHsKICAgICAgdmFy
        IGNvbnRhaW5lciA9IHRoaXMuX19jb250YWluZXJfXzsKICAgICAgY29udGFp
        bmVyLnVucmVnaXN0ZXIoJ3JvdXRlcjptYWluJyk7CiAgICAgIGNvbnRhaW5l
        ci5yZWdpc3Rlcigncm91dGVyOm1haW4nLCB0aGlzLlJvdXRlcik7CiAgICB9
        CgogICAgdGhpcy5ydW5Jbml0aWFsaXplcnMoKTsKICAgIEVtYmVyLnJ1bkxv
        YWRIb29rcygnYXBwbGljYXRpb24nLCB0aGlzKTsKCiAgICAvLyBBdCB0aGlz
        IHBvaW50LCBhbnkgaW5pdGlhbGl6ZXJzIG9yIGxvYWQgaG9va3MgdGhhdCB3
        b3VsZCBoYXZlIHdhbnRlZAogICAgLy8gdG8gZGVmZXIgcmVhZGluZXNzIGhh
        dmUgZmlyZWQuIEluIGdlbmVyYWwsIGFkdmFuY2luZyByZWFkaW5lc3MgaGVy
        ZQogICAgLy8gd2lsbCBwcm9jZWVkIHRvIGRpZEJlY29tZVJlYWR5LgogICAg
        dGhpcy5hZHZhbmNlUmVhZGluZXNzKCk7CgogICAgcmV0dXJuIHRoaXM7CiAg
        fSwKCiAgLyoqCiAgICBSZXNldCB0aGUgYXBwbGljYXRpb24uIFRoaXMgaXMg
        dHlwaWNhbGx5IHVzZWQgb25seSBpbiB0ZXN0cy4gSXQgY2xlYW5zIHVwCiAg
        ICB0aGUgYXBwbGljYXRpb24gaW4gdGhlIGZvbGxvd2luZyBvcmRlcjoKCiAg
        ICAxLiBEZWFjdGl2YXRlIGV4aXN0aW5nIHJvdXRlcwogICAgMi4gRGVzdHJv
        eSBhbGwgb2JqZWN0cyBpbiB0aGUgY29udGFpbmVyCiAgICAzLiBDcmVhdGUg
        YSBuZXcgYXBwbGljYXRpb24gY29udGFpbmVyCiAgICA0LiBSZS1yb3V0ZSB0
        byB0aGUgZXhpc3RpbmcgdXJsCgogICAgVHlwaWNhbCBFeGFtcGxlOgoKICAg
        IGBgYGphdmFzY3JpcHQKCiAgICB2YXIgQXBwOwoKICAgIEVtYmVyLnJ1bihm
        dW5jdGlvbigpIHsKICAgICAgQXBwID0gRW1iZXIuQXBwbGljYXRpb24uY3Jl
        YXRlKCk7CiAgICB9KTsKCiAgICBtb2R1bGUoImFjY2VwdGFuY2UgdGVzdCIs
        IHsKICAgICAgc2V0dXA6IGZ1bmN0aW9uKCkgewogICAgICAgIEFwcC5yZXNl
        dCgpOwogICAgICB9CiAgICB9KTsKCiAgICB0ZXN0KCJmaXJzdCB0ZXN0Iiwg
        ZnVuY3Rpb24oKSB7CiAgICAgIC8vIEFwcCBpcyBmcmVzaGx5IHJlc2V0CiAg
        ICB9KTsKCiAgICB0ZXN0KCJmaXJzdCB0ZXN0IiwgZnVuY3Rpb24oKSB7CiAg
        ICAgIC8vIEFwcCBpcyBhZ2FpbiBmcmVzaGx5IHJlc2V0CiAgICB9KTsKICAg
        IGBgYAoKICAgIEFkdmFuY2VkIEV4YW1wbGU6CgogICAgT2NjYXNpb25hbGx5
        IHlvdSBtYXkgd2FudCB0byBwcmV2ZW50IHRoZSBhcHAgZnJvbSBpbml0aWFs
        aXppbmcgZHVyaW5nCiAgICBzZXR1cC4gVGhpcyBjb3VsZCBlbmFibGUgZXh0
        cmEgY29uZmlndXJhdGlvbiwgb3IgZW5hYmxlIGFzc2VydGluZyBwcmlvcgog
        ICAgdG8gdGhlIGFwcCBiZWNvbWluZyByZWFkeS4KCiAgICBgYGBqYXZhc2Ny
        aXB0CgogICAgdmFyIEFwcDsKCiAgICBFbWJlci5ydW4oZnVuY3Rpb24oKSB7
        CiAgICAgIEFwcCA9IEVtYmVyLkFwcGxpY2F0aW9uLmNyZWF0ZSgpOwogICAg
        fSk7CgogICAgbW9kdWxlKCJhY2NlcHRhbmNlIHRlc3QiLCB7CiAgICAgIHNl
        dHVwOiBmdW5jdGlvbigpIHsKICAgICAgICBFbWJlci5ydW4oZnVuY3Rpb24o
        KSB7CiAgICAgICAgICBBcHAucmVzZXQoKTsKICAgICAgICAgIEFwcC5kZWZl
        clJlYWRpbmVzcygpOwogICAgICAgIH0pOwogICAgICB9CiAgICB9KTsKCiAg
        ICB0ZXN0KCJmaXJzdCB0ZXN0IiwgZnVuY3Rpb24oKSB7CiAgICAgIG9rKHRy
        dWUsICdzb21ldGhpbmcgYmVmb3JlIGFwcCBpcyBpbml0aWFsaXplZCcpOwoK
        ICAgICAgRW1iZXIucnVuKGZ1bmN0aW9uKCkgewogICAgICAgIEFwcC5hZHZh
        bmNlUmVhZGluZXNzKCk7CiAgICAgIH0pOwogICAgICBvayh0cnVlLCAnc29t
        ZXRoaW5nIGFmdGVyIGFwcCBpcyBpbml0aWFsaXplZCcpOwogICAgfSk7CiAg
        ICBgYGAKCiAgICBAbWV0aG9kIHJlc2V0CiAgKiovCiAgcmVzZXQ6IGZ1bmN0
        aW9uKCkgewogICAgdGhpcy5fcmVhZGluZXNzRGVmZXJyYWxzID0gMTsKCiAg
        ICBmdW5jdGlvbiBoYW5kbGVSZXNldCgpIHsKICAgICAgdmFyIHJvdXRlciA9
        IHRoaXMuX19jb250YWluZXJfXy5sb29rdXAoJ3JvdXRlcjptYWluJyk7CiAg
        ICAgIHJvdXRlci5yZXNldCgpOwoKICAgICAgRW1iZXIucnVuKHRoaXMuX19j
        b250YWluZXJfXywgJ2Rlc3Ryb3knKTsKCiAgICAgIHRoaXMuYnVpbGRDb250
        YWluZXIoKTsKCiAgICAgIEVtYmVyLnJ1bi5zY2hlZHVsZSgnYWN0aW9ucycs
        IHRoaXMsIGZ1bmN0aW9uKCkgewogICAgICAgIHRoaXMuX2luaXRpYWxpemUo
        KTsKICAgICAgfSk7CiAgICB9CgogICAgRW1iZXIucnVuLmpvaW4odGhpcywg
        aGFuZGxlUmVzZXQpOwogIH0sCgogIC8qKgogICAgQHByaXZhdGUKICAgIEBt
        ZXRob2QgcnVuSW5pdGlhbGl6ZXJzCiAgKi8KICBydW5Jbml0aWFsaXplcnM6
        IGZ1bmN0aW9uKCkgewogICAgdmFyIGluaXRpYWxpemVycyA9IGdldCh0aGlz
        LmNvbnN0cnVjdG9yLCAnaW5pdGlhbGl6ZXJzJyksCiAgICAgICAgY29udGFp
        bmVyID0gdGhpcy5fX2NvbnRhaW5lcl9fLAogICAgICAgIGdyYXBoID0gbmV3
        IEVtYmVyLkRBRygpLAogICAgICAgIG5hbWVzcGFjZSA9IHRoaXMsCiAgICAg
        ICAgbmFtZSwgaW5pdGlhbGl6ZXI7CgogICAgZm9yIChuYW1lIGluIGluaXRp
        YWxpemVycykgewogICAgICBpbml0aWFsaXplciA9IGluaXRpYWxpemVyc1tu
        YW1lXTsKICAgICAgZ3JhcGguYWRkRWRnZXMoaW5pdGlhbGl6ZXIubmFtZSwg
        aW5pdGlhbGl6ZXIuaW5pdGlhbGl6ZSwgaW5pdGlhbGl6ZXIuYmVmb3JlLCBp
        bml0aWFsaXplci5hZnRlcik7CiAgICB9CgogICAgZ3JhcGgudG9wc29ydChm
        dW5jdGlvbiAodmVydGV4KSB7CiAgICAgIHZhciBpbml0aWFsaXplciA9IHZl
        cnRleC52YWx1ZTsKICAgICAgRW1iZXIuYXNzZXJ0KCJObyBhcHBsaWNhdGlv
        biBpbml0aWFsaXplciBuYW1lZCAnIit2ZXJ0ZXgubmFtZSsiJyIsIGluaXRp
        YWxpemVyKTsKICAgICAgaW5pdGlhbGl6ZXIoY29udGFpbmVyLCBuYW1lc3Bh
        Y2UpOwogICAgfSk7CiAgfSwKCiAgLyoqCiAgICBAcHJpdmF0ZQogICAgQG1l
        dGhvZCBkaWRCZWNvbWVSZWFkeQogICovCiAgZGlkQmVjb21lUmVhZHk6IGZ1
        bmN0aW9uKCkgewogICAgdGhpcy5zZXR1cEV2ZW50RGlzcGF0Y2hlcigpOwog
        ICAgdGhpcy5yZWFkeSgpOyAvLyB1c2VyIGhvb2sKICAgIHRoaXMuc3RhcnRS
        b3V0aW5nKCk7CgogICAgaWYgKCFFbWJlci50ZXN0aW5nKSB7CiAgICAgIC8v
        IEVhZ2VybHkgbmFtZSBhbGwgY2xhc3NlcyB0aGF0IGFyZSBhbHJlYWR5IGxv
        YWRlZAogICAgICBFbWJlci5OYW1lc3BhY2UucHJvY2Vzc0FsbCgpOwogICAg
        ICBFbWJlci5CT09URUQgPSB0cnVlOwogICAgfQoKICAgIHRoaXMucmVzb2x2
        ZSh0aGlzKTsKICB9LAoKICAvKioKICAgIFNldHVwIHVwIHRoZSBldmVudCBk
        aXNwYXRjaGVyIHRvIHJlY2VpdmUgZXZlbnRzIG9uIHRoZQogICAgYXBwbGlj
        YXRpb24ncyBgcm9vdEVsZW1lbnRgIHdpdGggYW55IHJlZ2lzdGVyZWQKICAg
        IGBjdXN0b21FdmVudHNgLgoKICAgIEBwcml2YXRlCiAgICBAbWV0aG9kIHNl
        dHVwRXZlbnREaXNwYXRjaGVyCiAgKi8KICBzZXR1cEV2ZW50RGlzcGF0Y2hl
        cjogZnVuY3Rpb24oKSB7CiAgICB2YXIgY3VzdG9tRXZlbnRzID0gZ2V0KHRo
        aXMsICdjdXN0b21FdmVudHMnKSwKICAgICAgICByb290RWxlbWVudCA9IGdl
        dCh0aGlzLCAncm9vdEVsZW1lbnQnKSwKICAgICAgICBkaXNwYXRjaGVyID0g
        dGhpcy5fX2NvbnRhaW5lcl9fLmxvb2t1cCgnZXZlbnRfZGlzcGF0Y2hlcjpt
        YWluJyk7CgogICAgc2V0KHRoaXMsICdldmVudERpc3BhdGNoZXInLCBkaXNw
        YXRjaGVyKTsKICAgIGRpc3BhdGNoZXIuc2V0dXAoY3VzdG9tRXZlbnRzLCBy
        b290RWxlbWVudCk7CiAgfSwKCiAgLyoqCiAgICB0cmlnZ2VyIGEgbmV3IGNh
        bGwgdG8gYHJvdXRlYCB3aGVuZXZlciB0aGUgVVJMIGNoYW5nZXMuCiAgICBJ
        ZiB0aGUgYXBwbGljYXRpb24gaGFzIGEgcm91dGVyLCB1c2UgaXQgdG8gcm91
        dGUgdG8gdGhlIGN1cnJlbnQgVVJMLCBhbmQKCiAgICBAcHJpdmF0ZQogICAg
        QG1ldGhvZCBzdGFydFJvdXRpbmcKICAgIEBwcm9wZXJ0eSByb3V0ZXIge0Vt
        YmVyLlJvdXRlcn0KICAqLwogIHN0YXJ0Um91dGluZzogZnVuY3Rpb24oKSB7
        CiAgICB2YXIgcm91dGVyID0gdGhpcy5fX2NvbnRhaW5lcl9fLmxvb2t1cCgn
        cm91dGVyOm1haW4nKTsKICAgIGlmICghcm91dGVyKSB7IHJldHVybjsgfQoK
        ICAgIHJvdXRlci5zdGFydFJvdXRpbmcoKTsKICB9LAoKICBoYW5kbGVVUkw6
        IGZ1bmN0aW9uKHVybCkgewogICAgdmFyIHJvdXRlciA9IHRoaXMuX19jb250
        YWluZXJfXy5sb29rdXAoJ3JvdXRlcjptYWluJyk7CgogICAgcm91dGVyLmhh
        bmRsZVVSTCh1cmwpOwogIH0sCgogIC8qKgogICAgQ2FsbGVkIHdoZW4gdGhl
        IEFwcGxpY2F0aW9uIGhhcyBiZWNvbWUgcmVhZHkuCiAgICBUaGUgY2FsbCB3
        aWxsIGJlIGRlbGF5ZWQgdW50aWwgdGhlIERPTSBoYXMgYmVjb21lIHJlYWR5
        LgoKICAgIEBldmVudCByZWFkeQogICovCiAgcmVhZHk6IEVtYmVyLkssCgog
        IC8qKgogICAgQGRlcHJlY2F0ZWQgVXNlICdSZXNvbHZlcicgaW5zdGVhZAog
        ICAgU2V0IHRoaXMgdG8gcHJvdmlkZSBhbiBhbHRlcm5hdGUgY2xhc3MgdG8g
        YEVtYmVyLkRlZmF1bHRSZXNvbHZlcmAKCgogICAgQHByb3BlcnR5IHJlc29s
        dmVyCiAgKi8KICByZXNvbHZlcjogbnVsbCwKCiAgLyoqCiAgICBTZXQgdGhp
        cyB0byBwcm92aWRlIGFuIGFsdGVybmF0ZSBjbGFzcyB0byBgRW1iZXIuRGVm
        YXVsdFJlc29sdmVyYAoKICAgIEBwcm9wZXJ0eSByZXNvbHZlcgogICovCiAg
        UmVzb2x2ZXI6IG51bGwsCgogIHdpbGxEZXN0cm95OiBmdW5jdGlvbigpIHsK
        ICAgIEVtYmVyLkJPT1RFRCA9IGZhbHNlOwogICAgLy8gRW5zdXJlIGRlYWN0
        aXZhdGlvbiBvZiByb3V0ZXMgYmVmb3JlIG9iamVjdHMgYXJlIGRlc3Ryb3ll
        ZAogICAgdGhpcy5fX2NvbnRhaW5lcl9fLmxvb2t1cCgncm91dGVyOm1haW4n
        KS5yZXNldCgpOwoKICAgIHRoaXMuX19jb250YWluZXJfXy5kZXN0cm95KCk7
        CiAgfSwKCiAgaW5pdGlhbGl6ZXI6IGZ1bmN0aW9uKG9wdGlvbnMpIHsKICAg
        IHRoaXMuY29uc3RydWN0b3IuaW5pdGlhbGl6ZXIob3B0aW9ucyk7CiAgfQp9
        KTsKCkVtYmVyLkFwcGxpY2F0aW9uLnJlb3BlbkNsYXNzKHsKICBpbml0aWFs
        aXplcnM6IHt9LAogIGluaXRpYWxpemVyOiBmdW5jdGlvbihpbml0aWFsaXpl
        cikgewogICAgLy8gSWYgdGhpcyBpcyB0aGUgZmlyc3QgaW5pdGlhbGl6ZXIg
        YmVpbmcgYWRkZWQgdG8gYSBzdWJjbGFzcywgd2UgYXJlIGdvaW5nIHRvIHJl
        b3BlbiB0aGUgY2xhc3MKICAgIC8vIHRvIG1ha2Ugc3VyZSB3ZSBoYXZlIGEg
        bmV3IGBpbml0aWFsaXplcnNgIG9iamVjdCwgd2hpY2ggZXh0ZW5kcyBmcm9t
        IHRoZSBwYXJlbnQgY2xhc3MnIHVzaW5nCiAgICAvLyBwcm90b3R5cGFsIGlu
        aGVyaXRhbmNlLiBXaXRob3V0IHRoaXMsIGF0dGVtcHRpbmcgdG8gYWRkIGlu
        aXRpYWxpemVycyB0byB0aGUgc3ViY2xhc3Mgd291bGQKICAgIC8vIHBvbGx1
        dGUgdGhlIHBhcmVudCBjbGFzcyBhcyB3ZWxsIGFzIG90aGVyIHN1YmNsYXNz
        ZXMuCiAgICBpZiAodGhpcy5zdXBlcmNsYXNzLmluaXRpYWxpemVycyAhPT0g
        dW5kZWZpbmVkICYmIHRoaXMuc3VwZXJjbGFzcy5pbml0aWFsaXplcnMgPT09
        IHRoaXMuaW5pdGlhbGl6ZXJzKSB7CiAgICAgIHRoaXMucmVvcGVuQ2xhc3Mo
        ewogICAgICAgIGluaXRpYWxpemVyczogRW1iZXIuY3JlYXRlKHRoaXMuaW5p
        dGlhbGl6ZXJzKQogICAgICB9KTsKICAgIH0KCiAgICBFbWJlci5hc3NlcnQo
        IlRoZSBpbml0aWFsaXplciAnIiArIGluaXRpYWxpemVyLm5hbWUgKyAiJyBo
        YXMgYWxyZWFkeSBiZWVuIHJlZ2lzdGVyZWQiLCAhdGhpcy5pbml0aWFsaXpl
        cnNbaW5pdGlhbGl6ZXIubmFtZV0pOwogICAgRW1iZXIuYXNzZXJ0KCJBbiBp
        bml0aWFsaXplciBjYW5ub3QgYmUgcmVnaXN0ZXJlZCB3aXRoIGJvdGggYSBi
        ZWZvcmUgYW5kIGFuIGFmdGVyIiwgIShpbml0aWFsaXplci5iZWZvcmUgJiYg
        aW5pdGlhbGl6ZXIuYWZ0ZXIpKTsKICAgIEVtYmVyLmFzc2VydCgiQW4gaW5p
        dGlhbGl6ZXIgY2Fubm90IGJlIHJlZ2lzdGVyZWQgd2l0aG91dCBhbiBpbml0
        aWFsaXplIGZ1bmN0aW9uIiwgRW1iZXIuY2FuSW52b2tlKGluaXRpYWxpemVy
        LCAnaW5pdGlhbGl6ZScpKTsKCiAgICB0aGlzLmluaXRpYWxpemVyc1tpbml0
        aWFsaXplci5uYW1lXSA9IGluaXRpYWxpemVyOwogIH0sCgogIC8qKgogICAg
        VGhpcyBjcmVhdGVzIGEgY29udGFpbmVyIHdpdGggdGhlIGRlZmF1bHQgRW1i
        ZXIgbmFtaW5nIGNvbnZlbnRpb25zLgoKICAgIEl0IGFsc28gY29uZmlndXJl
        cyB0aGUgY29udGFpbmVyOgoKICAgICogcmVnaXN0ZXJlZCB2aWV3cyBhcmUg
        Y3JlYXRlZCBldmVyeSB0aW1lIHRoZXkgYXJlIGxvb2tlZCB1cCAodGhleSBh
        cmUKICAgICAgbm90IHNpbmdsZXRvbnMpCiAgICAqIHJlZ2lzdGVyZWQgdGVt
        cGxhdGVzIGFyZSBub3QgZmFjdG9yaWVzOyB0aGUgcmVnaXN0ZXJlZCB2YWx1
        ZSBpcwogICAgICByZXR1cm5lZCBkaXJlY3RseS4KICAgICogdGhlIHJvdXRl
        ciByZWNlaXZlcyB0aGUgYXBwbGljYXRpb24gYXMgaXRzIGBuYW1lc3BhY2Vg
        IHByb3BlcnR5CiAgICAqIGFsbCBjb250cm9sbGVycyByZWNlaXZlIHRoZSBy
        b3V0ZXIgYXMgdGhlaXIgYHRhcmdldGAgYW5kIGBjb250cm9sbGVyc2AKICAg
        ICAgcHJvcGVydGllcwogICAgKiBhbGwgY29udHJvbGxlcnMgcmVjZWl2ZSB0
        aGUgYXBwbGljYXRpb24gYXMgdGhlaXIgYG5hbWVzcGFjZWAgcHJvcGVydHkK
        ICAgICogdGhlIGFwcGxpY2F0aW9uIHZpZXcgcmVjZWl2ZXMgdGhlIGFwcGxp
        Y2F0aW9uIGNvbnRyb2xsZXIgYXMgaXRzCiAgICAgIGBjb250cm9sbGVyYCBw
        cm9wZXJ0eQogICAgKiB0aGUgYXBwbGljYXRpb24gdmlldyByZWNlaXZlcyB0
        aGUgYXBwbGljYXRpb24gdGVtcGxhdGUgYXMgaXRzCiAgICAgIGBkZWZhdWx0
        VGVtcGxhdGVgIHByb3BlcnR5CgogICAgQHByaXZhdGUKICAgIEBtZXRob2Qg
        YnVpbGRDb250YWluZXIKICAgIEBzdGF0aWMKICAgIEBwYXJhbSB7RW1iZXIu
        QXBwbGljYXRpb259IG5hbWVzcGFjZSB0aGUgYXBwbGljYXRpb24gdG8gYnVp
        bGQgdGhlCiAgICAgIGNvbnRhaW5lciBmb3IuCiAgICBAcmV0dXJuIHtFbWJl
        ci5Db250YWluZXJ9IHRoZSBidWlsdCBjb250YWluZXIKICAqLwogIGJ1aWxk
        Q29udGFpbmVyOiBmdW5jdGlvbihuYW1lc3BhY2UpIHsKICAgIHZhciBjb250
        YWluZXIgPSBuZXcgRW1iZXIuQ29udGFpbmVyKCk7CgogICAgRW1iZXIuQ29u
        dGFpbmVyLmRlZmF1bHRDb250YWluZXIgPSBuZXcgRGVwcmVjYXRlZENvbnRh
        aW5lcihjb250YWluZXIpOwoKICAgIGNvbnRhaW5lci5zZXQgPSBFbWJlci5z
        ZXQ7CiAgICBjb250YWluZXIucmVzb2x2ZXIgID0gcmVzb2x2ZXJGb3IobmFt
        ZXNwYWNlKTsKICAgIGNvbnRhaW5lci5ub3JtYWxpemUgPSBjb250YWluZXIu
        cmVzb2x2ZXIubm9ybWFsaXplOwogICAgY29udGFpbmVyLmRlc2NyaWJlICA9
        IGNvbnRhaW5lci5yZXNvbHZlci5kZXNjcmliZTsKICAgIGNvbnRhaW5lci5t
        YWtlVG9TdHJpbmcgPSBjb250YWluZXIucmVzb2x2ZXIubWFrZVRvU3RyaW5n
        OwoKICAgIGNvbnRhaW5lci5vcHRpb25zRm9yVHlwZSgnY29tcG9uZW50Jywg
        eyBzaW5nbGV0b246IGZhbHNlIH0pOwogICAgY29udGFpbmVyLm9wdGlvbnNG
        b3JUeXBlKCd2aWV3JywgeyBzaW5nbGV0b246IGZhbHNlIH0pOwogICAgY29u
        dGFpbmVyLm9wdGlvbnNGb3JUeXBlKCd0ZW1wbGF0ZScsIHsgaW5zdGFudGlh
        dGU6IGZhbHNlIH0pOwogICAgY29udGFpbmVyLm9wdGlvbnNGb3JUeXBlKCdo
        ZWxwZXInLCB7IGluc3RhbnRpYXRlOiBmYWxzZSB9KTsKCiAgICBjb250YWlu
        ZXIucmVnaXN0ZXIoJ2FwcGxpY2F0aW9uOm1haW4nLCBuYW1lc3BhY2UsIHsg
        aW5zdGFudGlhdGU6IGZhbHNlIH0pOwoKICAgIGNvbnRhaW5lci5yZWdpc3Rl
        cignY29udHJvbGxlcjpiYXNpYycsIEVtYmVyLkNvbnRyb2xsZXIsIHsgaW5z
        dGFudGlhdGU6IGZhbHNlIH0pOwogICAgY29udGFpbmVyLnJlZ2lzdGVyKCdj
        b250cm9sbGVyOm9iamVjdCcsIEVtYmVyLk9iamVjdENvbnRyb2xsZXIsIHsg
        aW5zdGFudGlhdGU6IGZhbHNlIH0pOwogICAgY29udGFpbmVyLnJlZ2lzdGVy
        KCdjb250cm9sbGVyOmFycmF5JywgRW1iZXIuQXJyYXlDb250cm9sbGVyLCB7
        IGluc3RhbnRpYXRlOiBmYWxzZSB9KTsKICAgIGNvbnRhaW5lci5yZWdpc3Rl
        cigncm91dGU6YmFzaWMnLCBFbWJlci5Sb3V0ZSwgeyBpbnN0YW50aWF0ZTog
        ZmFsc2UgfSk7CiAgICBjb250YWluZXIucmVnaXN0ZXIoJ2V2ZW50X2Rpc3Bh
        dGNoZXI6bWFpbicsIEVtYmVyLkV2ZW50RGlzcGF0Y2hlcik7CgogICAgY29u
        dGFpbmVyLnJlZ2lzdGVyKCdyb3V0ZXI6bWFpbicsICBFbWJlci5Sb3V0ZXIp
        OwogICAgY29udGFpbmVyLmluamVjdGlvbigncm91dGVyOm1haW4nLCAnbmFt
        ZXNwYWNlJywgJ2FwcGxpY2F0aW9uOm1haW4nKTsKCiAgICAKICAgICAgY29u
        dGFpbmVyLnJlZ2lzdGVyKCdsb2NhdGlvbjphdXRvJywgRW1iZXIuQXV0b0xv
        Y2F0aW9uKTsKICAgIAogICAgCiAgICBjb250YWluZXIucmVnaXN0ZXIoJ2xv
        Y2F0aW9uOmhhc2gnLCBFbWJlci5IYXNoTG9jYXRpb24pOwogICAgY29udGFp
        bmVyLnJlZ2lzdGVyKCdsb2NhdGlvbjpoaXN0b3J5JywgRW1iZXIuSGlzdG9y
        eUxvY2F0aW9uKTsKICAgIGNvbnRhaW5lci5yZWdpc3RlcignbG9jYXRpb246
        bm9uZScsIEVtYmVyLk5vbmVMb2NhdGlvbik7CgogICAgY29udGFpbmVyLmlu
        amVjdGlvbignY29udHJvbGxlcicsICd0YXJnZXQnLCAncm91dGVyOm1haW4n
        KTsKICAgIGNvbnRhaW5lci5pbmplY3Rpb24oJ2NvbnRyb2xsZXInLCAnbmFt
        ZXNwYWNlJywgJ2FwcGxpY2F0aW9uOm1haW4nKTsKCiAgICBjb250YWluZXIu
        aW5qZWN0aW9uKCdyb3V0ZScsICdyb3V0ZXInLCAncm91dGVyOm1haW4nKTsK
        CiAgICByZXR1cm4gY29udGFpbmVyOwogIH0KfSk7CgovKioKICBUaGlzIGZ1
        bmN0aW9uIGRlZmluZXMgdGhlIGRlZmF1bHQgbG9va3VwIHJ1bGVzIGZvciBj
        b250YWluZXIgbG9va3VwczoKCiAgKiB0ZW1wbGF0ZXMgYXJlIGxvb2tlZCB1
        cCBvbiBgRW1iZXIuVEVNUExBVEVTYAogICogb3RoZXIgbmFtZXMgYXJlIGxv
        b2tlZCB1cCBvbiB0aGUgYXBwbGljYXRpb24gYWZ0ZXIgY2xhc3NpZnlpbmcg
        dGhlIG5hbWUuCiAgICBGb3IgZXhhbXBsZSwgYGNvbnRyb2xsZXI6cG9zdGAg
        bG9va3MgdXAgYEFwcC5Qb3N0Q29udHJvbGxlcmAgYnkgZGVmYXVsdC4KICAq
        IGlmIHRoZSBkZWZhdWx0IGxvb2t1cCBmYWlscywgbG9vayBmb3IgcmVnaXN0
        ZXJlZCBjbGFzc2VzIG9uIHRoZSBjb250YWluZXIKCiAgVGhpcyBhbGxvd3Mg
        dGhlIGFwcGxpY2F0aW9uIHRvIHJlZ2lzdGVyIGRlZmF1bHQgaW5qZWN0aW9u
        cyBpbiB0aGUgY29udGFpbmVyCiAgdGhhdCBjb3VsZCBiZSBvdmVycmlkZGVu
        IGJ5IHRoZSBub3JtYWwgbmFtaW5nIGNvbnZlbnRpb24uCgogIEBwcml2YXRl
        CiAgQG1ldGhvZCByZXNvbHZlckZvcgogIEBwYXJhbSB7RW1iZXIuTmFtZXNw
        YWNlfSBuYW1lc3BhY2UgdGhlIG5hbWVzcGFjZSB0byBsb29rIGZvciBjbGFz
        c2VzCiAgQHJldHVybiB7Kn0gdGhlIHJlc29sdmVkIHZhbHVlIGZvciBhIGdp
        dmVuIGxvb2t1cAoqLwpmdW5jdGlvbiByZXNvbHZlckZvcihuYW1lc3BhY2Up
        IHsKICBpZiAobmFtZXNwYWNlLmdldCgncmVzb2x2ZXInKSkgewogICAgRW1i
        ZXIuZGVwcmVjYXRlKCdBcHBsaWNhdGlvbi5yZXNvbHZlciBpcyBkZXByZWNh
        dGVkIGluIGZhdm9yIG9mIEFwcGxpY2F0aW9uLlJlc29sdmVyJywgZmFsc2Up
        OwogIH0KCiAgdmFyIFJlc29sdmVyQ2xhc3MgPSBuYW1lc3BhY2UuZ2V0KCdy
        ZXNvbHZlcicpIHx8IG5hbWVzcGFjZS5nZXQoJ1Jlc29sdmVyJykgfHwgRW1i
        ZXIuRGVmYXVsdFJlc29sdmVyOwogIHZhciByZXNvbHZlciA9IFJlc29sdmVy
        Q2xhc3MuY3JlYXRlKHsKICAgIG5hbWVzcGFjZTogbmFtZXNwYWNlCiAgfSk7
        CgogIGZ1bmN0aW9uIHJlc29sdmUoZnVsbE5hbWUpIHsKICAgIHJldHVybiBy
        ZXNvbHZlci5yZXNvbHZlKGZ1bGxOYW1lKTsKICB9CgogIHJlc29sdmUuZGVz
        Y3JpYmUgPSBmdW5jdGlvbihmdWxsTmFtZSkgewogICAgcmV0dXJuIHJlc29s
        dmVyLmxvb2t1cERlc2NyaXB0aW9uKGZ1bGxOYW1lKTsKICB9OwoKICByZXNv
        bHZlLm1ha2VUb1N0cmluZyA9IGZ1bmN0aW9uKGZhY3RvcnksIGZ1bGxOYW1l
        KSB7CiAgICByZXR1cm4gcmVzb2x2ZXIubWFrZVRvU3RyaW5nKGZhY3Rvcnks
        IGZ1bGxOYW1lKTsKICB9OwoKICByZXNvbHZlLm5vcm1hbGl6ZSA9IGZ1bmN0
        aW9uKGZ1bGxOYW1lKSB7CiAgICBpZiAocmVzb2x2ZXIubm9ybWFsaXplKSB7
        CiAgICAgIHJldHVybiByZXNvbHZlci5ub3JtYWxpemUoZnVsbE5hbWUpOwog
        ICAgfSBlbHNlIHsKICAgICAgRW1iZXIuZGVwcmVjYXRlKCdUaGUgUmVzb2x2
        ZXIgc2hvdWxkIG5vdyBwcm92aWRlIGEgXCdub3JtYWxpemVcJyBmdW5jdGlv
        bicsIGZhbHNlKTsKICAgICAgcmV0dXJuIGZ1bGxOYW1lOwogICAgfQogIH07
        CgogIHJldHVybiByZXNvbHZlOwp9CgpFbWJlci5ydW5Mb2FkSG9va3MoJ0Vt
        YmVyLkFwcGxpY2F0aW9uJywgRW1iZXIuQXBwbGljYXRpb24pOwoKfSkoKTsK
        CgoKKGZ1bmN0aW9uKCkgewoKfSkoKTsKCgoKKGZ1bmN0aW9uKCkgewovKioK
        QG1vZHVsZSBlbWJlcgpAc3VibW9kdWxlIGVtYmVyLWFwcGxpY2F0aW9uCiov
        Cgp2YXIgZ2V0ID0gRW1iZXIuZ2V0LCBzZXQgPSBFbWJlci5zZXQ7CgpmdW5j
        dGlvbiB2ZXJpZnlOZWVkc0RlcGVuZGVuY2llcyhjb250cm9sbGVyLCBjb250
        YWluZXIsIG5lZWRzKSB7CiAgdmFyIGRlcGVuZGVuY3ksIGksIGwsIG1pc3Np
        bmcgPSBbXTsKCiAgZm9yIChpPTAsIGw9bmVlZHMubGVuZ3RoOyBpPGw7IGkr
        KykgewogICAgZGVwZW5kZW5jeSA9IG5lZWRzW2ldOwoKICAgIEVtYmVyLmFz
        c2VydChFbWJlci5pbnNwZWN0KGNvbnRyb2xsZXIpICsgIiNuZWVkcyBtdXN0
        IG5vdCBzcGVjaWZ5IGRlcGVuZGVuY2llcyB3aXRoIHBlcmlvZHMgaW4gdGhl
        aXIgbmFtZXMgKCIgKyBkZXBlbmRlbmN5ICsgIikiLCBkZXBlbmRlbmN5Lmlu
        ZGV4T2YoJy4nKSA9PT0gLTEpOwoKICAgIGlmIChkZXBlbmRlbmN5LmluZGV4
        T2YoJzonKSA9PT0gLTEpIHsKICAgICAgZGVwZW5kZW5jeSA9ICJjb250cm9s
        bGVyOiIgKyBkZXBlbmRlbmN5OwogICAgfQoKICAgIC8vIFN0cnVjdHVyZSBh
        c3NlcnQgdG8gc3RpbGwgZG8gdmVyaWZpY2F0aW9uIGJ1dCBub3Qgc3RyaW5n
        IGNvbmNhdCBpbiBwcm9kdWN0aW9uCiAgICBpZiAoIWNvbnRhaW5lci5oYXMo
        ZGVwZW5kZW5jeSkpIHsKICAgICAgbWlzc2luZy5wdXNoKGRlcGVuZGVuY3kp
        OwogICAgfQogIH0KICBpZiAobWlzc2luZy5sZW5ndGgpIHsKICAgIHRocm93
        IG5ldyBFbWJlci5FcnJvcihFbWJlci5pbnNwZWN0KGNvbnRyb2xsZXIpICsg
        IiBuZWVkcyBbICIgKyBtaXNzaW5nLmpvaW4oJywgJykgKyAiIF0gYnV0ICIg
        KyAobWlzc2luZy5sZW5ndGggPiAxID8gJ3RoZXknIDogJ2l0JykgKyAiIGNv
        dWxkIG5vdCBiZSBmb3VuZCIpOwogIH0KfQoKdmFyIGRlZmF1bHRDb250cm9s
        bGVyc0NvbXB1dGVkUHJvcGVydHkgPSBFbWJlci5jb21wdXRlZChmdW5jdGlv
        bigpIHsKICB2YXIgY29udHJvbGxlciA9IHRoaXM7CgogIHJldHVybiB7CiAg
        ICBuZWVkczogZ2V0KGNvbnRyb2xsZXIsICduZWVkcycpLAogICAgY29udGFp
        bmVyOiBnZXQoY29udHJvbGxlciwgJ2NvbnRhaW5lcicpLAogICAgdW5rbm93
        blByb3BlcnR5OiBmdW5jdGlvbihjb250cm9sbGVyTmFtZSkgewogICAgICB2
        YXIgbmVlZHMgPSB0aGlzLm5lZWRzLAogICAgICAgIGRlcGVuZGVuY3ksIGks
        IGw7CiAgICAgIGZvciAoaT0wLCBsPW5lZWRzLmxlbmd0aDsgaTxsOyBpKysp
        IHsKICAgICAgICBkZXBlbmRlbmN5ID0gbmVlZHNbaV07CiAgICAgICAgaWYg
        KGRlcGVuZGVuY3kgPT09IGNvbnRyb2xsZXJOYW1lKSB7CiAgICAgICAgICBy
        ZXR1cm4gdGhpcy5jb250YWluZXIubG9va3VwKCdjb250cm9sbGVyOicgKyBj
        b250cm9sbGVyTmFtZSk7CiAgICAgICAgfQogICAgICB9CgogICAgICB2YXIg
        ZXJyb3JNZXNzYWdlID0gRW1iZXIuaW5zcGVjdChjb250cm9sbGVyKSArICcj
        bmVlZHMgZG9lcyBub3QgaW5jbHVkZSBgJyArIGNvbnRyb2xsZXJOYW1lICsg
        J2AuIFRvIGFjY2VzcyB0aGUgJyArIGNvbnRyb2xsZXJOYW1lICsgJyBjb250
        cm9sbGVyIGZyb20gJyArIEVtYmVyLmluc3BlY3QoY29udHJvbGxlcikgKyAn
        LCAnICsgRW1iZXIuaW5zcGVjdChjb250cm9sbGVyKSArICcgc2hvdWxkIGhh
        dmUgYSBgbmVlZHNgIHByb3BlcnR5IHRoYXQgaXMgYW4gYXJyYXkgb2YgdGhl
        IGNvbnRyb2xsZXJzIGl0IGhhcyBhY2Nlc3MgdG8uJzsKICAgICAgdGhyb3cg
        bmV3IFJlZmVyZW5jZUVycm9yKGVycm9yTWVzc2FnZSk7CiAgICB9LAogICAg
        c2V0VW5rbm93blByb3BlcnR5OiBmdW5jdGlvbiAoa2V5LCB2YWx1ZSkgewog
        ICAgICB0aHJvdyBuZXcgRXJyb3IoIllvdSBjYW5ub3Qgb3ZlcndyaXRlIHRo
        ZSB2YWx1ZSBvZiBgY29udHJvbGxlcnMuIiArIGtleSArICJgIG9mICIgKyBF
        bWJlci5pbnNwZWN0KGNvbnRyb2xsZXIpKTsKICAgIH0KICB9Owp9KTsKCi8q
        KgogIEBjbGFzcyBDb250cm9sbGVyTWl4aW4KICBAbmFtZXNwYWNlIEVtYmVy
        CiovCkVtYmVyLkNvbnRyb2xsZXJNaXhpbi5yZW9wZW4oewogIGNvbmNhdGVu
        YXRlZFByb3BlcnRpZXM6IFsnbmVlZHMnXSwKCiAgLyoqCiAgICBBbiBhcnJh
        eSBvZiBvdGhlciBjb250cm9sbGVyIG9iamVjdHMgYXZhaWxhYmxlIGluc2lk
        ZQogICAgaW5zdGFuY2VzIG9mIHRoaXMgY29udHJvbGxlciB2aWEgdGhlIGBj
        b250cm9sbGVyc2AKICAgIHByb3BlcnR5OgoKICAgIEZvciBleGFtcGxlLCB3
        aGVuIHlvdSBkZWZpbmUgYSBjb250cm9sbGVyOgoKICAgIGBgYGphdmFzY3Jp
        cHQKICAgIEFwcC5Db21tZW50c0NvbnRyb2xsZXIgPSBFbWJlci5BcnJheUNv
        bnRyb2xsZXIuZXh0ZW5kKHsKICAgICAgbmVlZHM6IFsncG9zdCddCiAgICB9
        KTsKICAgIGBgYAoKICAgIFRoZSBhcHBsaWNhdGlvbidzIHNpbmdsZSBpbnN0
        YW5jZSBvZiB0aGVzZSBvdGhlcgogICAgY29udHJvbGxlcnMgYXJlIGFjY2Vz
        c2libGUgYnkgbmFtZSB0aHJvdWdoIHRoZQogICAgYGNvbnRyb2xsZXJzYCBw
        cm9wZXJ0eToKCiAgICBgYGBqYXZhc2NyaXB0CiAgICB0aGlzLmdldCgnY29u
        dHJvbGxlcnMucG9zdCcpOyAvLyBpbnN0YW5jZSBvZiBBcHAuUG9zdENvbnRy
        b2xsZXIKICAgIGBgYAoKICAgIEdpdmVuIHRoYXQgeW91IGhhdmUgYSBuZXN0
        ZWQgY29udHJvbGxlciAobmVzdGVkIHJlc291cmNlKToKCiAgICBgYGBqYXZh
        c2NyaXB0CiAgICBBcHAuQ29tbWVudHNOZXdDb250cm9sbGVyID0gRW1iZXIu
        T2JqZWN0Q29udHJvbGxlci5leHRlbmQoewogICAgfSk7CiAgICBgYGAKCiAg
        ICBXaGVuIHlvdSBkZWZpbmUgYSBjb250cm9sbGVyIHRoYXQgcmVxdWlyZXMg
        YWNjZXNzIHRvIGEgbmVzdGVkIG9uZToKCiAgICBgYGBqYXZhc2NyaXB0CiAg
        ICBBcHAuSW5kZXhDb250cm9sbGVyID0gRW1iZXIuT2JqZWN0Q29udHJvbGxl
        ci5leHRlbmQoewogICAgICBuZWVkczogWydjb21tZW50c05ldyddCiAgICB9
        KTsKICAgIGBgYAoKICAgIFlvdSB3aWxsIGJlIGFibGUgdG8gZ2V0IGFjY2Vz
        cyB0byBpdDoKCiAgICBgYGBqYXZhc2NyaXB0CiAgICB0aGlzLmdldCgnY29u
        dHJvbGxlcnMuY29tbWVudHNOZXcnKTsgLy8gaW5zdGFuY2Ugb2YgQXBwLkNv
        bW1lbnRzTmV3Q29udHJvbGxlcgogICAgYGBgCgogICAgVGhpcyBpcyBvbmx5
        IGF2YWlsYWJsZSBmb3Igc2luZ2xldG9uIGNvbnRyb2xsZXJzLgoKICAgIEBw
        cm9wZXJ0eSB7QXJyYXl9IG5lZWRzCiAgICBAZGVmYXVsdCBbXQogICovCiAg
        bmVlZHM6IFtdLAoKICBpbml0OiBmdW5jdGlvbigpIHsKICAgIHZhciBuZWVk
        cyA9IGdldCh0aGlzLCAnbmVlZHMnKSwKICAgIGxlbmd0aCA9IGdldChuZWVk
        cywgJ2xlbmd0aCcpOwoKICAgIGlmIChsZW5ndGggPiAwKSB7CiAgICAgIEVt
        YmVyLmFzc2VydCgnIGAnICsgRW1iZXIuaW5zcGVjdCh0aGlzKSArICcgc3Bl
        Y2lmaWVzIGBuZWVkc2AsIGJ1dCBkb2VzICcgKwogICAgICAgICAgICAgICAg
        ICAgIm5vdCBoYXZlIGEgY29udGFpbmVyLiBQbGVhc2UgZW5zdXJlIHRoaXMg
        Y29udHJvbGxlciB3YXMgIiArCiAgICAgICAgICAgICAgICAgICAiaW5zdGFu
        dGlhdGVkIHdpdGggYSBjb250YWluZXIuIiwKICAgICAgICAgICAgICAgICAg
        IHRoaXMuY29udGFpbmVyIHx8IEVtYmVyLm1ldGEodGhpcywgZmFsc2UpLmRl
        c2NzLmNvbnRyb2xsZXJzICE9PSBkZWZhdWx0Q29udHJvbGxlcnNDb21wdXRl
        ZFByb3BlcnR5KTsKCiAgICAgIGlmICh0aGlzLmNvbnRhaW5lcikgewogICAg
        ICAgIHZlcmlmeU5lZWRzRGVwZW5kZW5jaWVzKHRoaXMsIHRoaXMuY29udGFp
        bmVyLCBuZWVkcyk7CiAgICAgIH0KCiAgICAgIC8vIGlmIG5lZWRzIHRoZW4g
        aW5pdGlhbGl6ZSBjb250cm9sbGVycyBwcm94eQogICAgICBnZXQodGhpcywg
        J2NvbnRyb2xsZXJzJyk7CiAgICB9CgogICAgdGhpcy5fc3VwZXIuYXBwbHko
        dGhpcywgYXJndW1lbnRzKTsKICB9LAoKICAvKioKICAgIEBtZXRob2QgY29u
        dHJvbGxlckZvcgogICAgQHNlZSB7RW1iZXIuUm91dGUjY29udHJvbGxlckZv
        cn0KICAgIEBkZXByZWNhdGVkIFVzZSBgbmVlZHNgIGluc3RlYWQKICAqLwog
        IGNvbnRyb2xsZXJGb3I6IGZ1bmN0aW9uKGNvbnRyb2xsZXJOYW1lKSB7CiAg
        ICBFbWJlci5kZXByZWNhdGUoIkNvbnRyb2xsZXIjY29udHJvbGxlckZvciBp
        cyBkZXByZWNhdGVkLCBwbGVhc2UgdXNlIENvbnRyb2xsZXIjbmVlZHMgaW5z
        dGVhZCIpOwogICAgcmV0dXJuIEVtYmVyLmNvbnRyb2xsZXJGb3IoZ2V0KHRo
        aXMsICdjb250YWluZXInKSwgY29udHJvbGxlck5hbWUpOwogIH0sCgogIC8q
        KgogICAgU3RvcmVzIHRoZSBpbnN0YW5jZXMgb2Ygb3RoZXIgY29udHJvbGxl
        cnMgYXZhaWxhYmxlIGZyb20gd2l0aGluCiAgICB0aGlzIGNvbnRyb2xsZXIu
        IEFueSBjb250cm9sbGVyIGxpc3RlZCBieSBuYW1lIGluIHRoZSBgbmVlZHNg
        CiAgICBwcm9wZXJ0eSB3aWxsIGJlIGFjY2Vzc2libGUgYnkgbmFtZSB0aHJv
        dWdoIHRoaXMgcHJvcGVydHkuCgogICAgYGBgamF2YXNjcmlwdAogICAgQXBw
        LkNvbW1lbnRzQ29udHJvbGxlciA9IEVtYmVyLkFycmF5Q29udHJvbGxlci5l
        eHRlbmQoewogICAgICBuZWVkczogWydwb3N0J10sCiAgICAgIHBvc3RUaXRs
        ZTogZnVuY3Rpb24oKXsKICAgICAgICB2YXIgY3VycmVudFBvc3QgPSB0aGlz
        LmdldCgnY29udHJvbGxlcnMucG9zdCcpOyAvLyBpbnN0YW5jZSBvZiBBcHAu
        UG9zdENvbnRyb2xsZXIKICAgICAgICByZXR1cm4gY3VycmVudFBvc3QuZ2V0
        KCd0aXRsZScpOwogICAgICB9LnByb3BlcnR5KCdjb250cm9sbGVycy5wb3N0
        LnRpdGxlJykKICAgIH0pOwogICAgYGBgCgogICAgQHNlZSB7RW1iZXIuQ29u
        dHJvbGxlck1peGluI25lZWRzfQogICAgQHByb3BlcnR5IHtPYmplY3R9IGNv
        bnRyb2xsZXJzCiAgICBAZGVmYXVsdCBudWxsCiAgKi8KICBjb250cm9sbGVy
        czogZGVmYXVsdENvbnRyb2xsZXJzQ29tcHV0ZWRQcm9wZXJ0eQp9KTsKCn0p
        KCk7CgoKCihmdW5jdGlvbigpIHsKCn0pKCk7CgoKCihmdW5jdGlvbigpIHsK
        LyoqCkVtYmVyIEFwcGxpY2F0aW9uCgpAbW9kdWxlIGVtYmVyCkBzdWJtb2R1
        bGUgZW1iZXItYXBwbGljYXRpb24KQHJlcXVpcmVzIGVtYmVyLXZpZXdzLCBl
        bWJlci1yb3V0aW5nCiovCgp9KSgpOwoKKGZ1bmN0aW9uKCkgewovKioKQG1v
        ZHVsZSBlbWJlcgpAc3VibW9kdWxlIGVtYmVyLWV4dGVuc2lvbi1zdXBwb3J0
        CiovCi8qKgogIFRoZSBgRGF0YUFkYXB0ZXJgIGhlbHBzIGEgZGF0YSBwZXJz
        aXN0ZW5jZSBsaWJyYXJ5CiAgaW50ZXJmYWNlIHdpdGggdG9vbHMgdGhhdCBk
        ZWJ1ZyBFbWJlciBzdWNoCiAgYXMgdGhlIFtFbWJlciBFeHRlbnNpb25dKGh0
        dHBzOi8vZ2l0aHViLmNvbS90aWxkZWlvL2VtYmVyLWV4dGVuc2lvbikKICBm
        b3IgQ2hyb21lIGFuZCBGaXJlZm94LgoKICBUaGlzIGNsYXNzIHdpbGwgYmUg
        ZXh0ZW5kZWQgYnkgYSBwZXJzaXN0ZW5jZSBsaWJyYXJ5CiAgd2hpY2ggd2ls
        bCBvdmVycmlkZSBzb21lIG9mIHRoZSBtZXRob2RzIHdpdGgKICBsaWJyYXJ5
        LXNwZWNpZmljIGNvZGUuCgogIFRoZSBtZXRob2RzIGxpa2VseSB0byBiZSBv
        dmVycmlkZGVuIGFyZToKCiAgKiBgZ2V0RmlsdGVyc2AKICAqIGBkZXRlY3Rg
        CiAgKiBgY29sdW1uc0ZvclR5cGVgCiAgKiBgZ2V0UmVjb3Jkc2AKICAqIGBn
        ZXRSZWNvcmRDb2x1bW5WYWx1ZXNgCiAgKiBgZ2V0UmVjb3JkS2V5d29yZHNg
        CiAgKiBgZ2V0UmVjb3JkRmlsdGVyVmFsdWVzYAogICogYGdldFJlY29yZENv
        bG9yYAogICogYG9ic2VydmVSZWNvcmRgCgogIFRoZSBhZGFwdGVyIHdpbGwg
        bmVlZCB0byBiZSByZWdpc3RlcmVkCiAgaW4gdGhlIGFwcGxpY2F0aW9uJ3Mg
        Y29udGFpbmVyIGFzIGBkYXRhQWRhcHRlcjptYWluYAoKICBFeGFtcGxlOgoK
        ICBgYGBqYXZhc2NyaXB0CiAgQXBwbGljYXRpb24uaW5pdGlhbGl6ZXIoewog
        ICAgbmFtZTogImRhdGFBZGFwdGVyIiwKCiAgICBpbml0aWFsaXplOiBmdW5j
        dGlvbihjb250YWluZXIsIGFwcGxpY2F0aW9uKSB7CiAgICAgIGFwcGxpY2F0
        aW9uLnJlZ2lzdGVyKCdkYXRhQWRhcHRlcjptYWluJywgRFMuRGF0YUFkYXB0
        ZXIpOwogICAgfQogIH0pOwogIGBgYAoKICBAY2xhc3MgRGF0YUFkYXB0ZXIK
        ICBAbmFtZXNwYWNlIEVtYmVyCiAgQGV4dGVuZHMgRW1iZXIuT2JqZWN0Ciov
        CkVtYmVyLkRhdGFBZGFwdGVyID0gRW1iZXIuT2JqZWN0LmV4dGVuZCh7CiAg
        aW5pdDogZnVuY3Rpb24oKSB7CiAgICB0aGlzLl9zdXBlcigpOwogICAgdGhp
        cy5yZWxlYXNlTWV0aG9kcyA9IEVtYmVyLkEoKTsKICB9LAoKICAvKioKICAg
        IFRoZSBjb250YWluZXIgb2YgdGhlIGFwcGxpY2F0aW9uIGJlaW5nIGRlYnVn
        Z2VkLgogICAgVGhpcyBwcm9wZXJ0eSB3aWxsIGJlIGluamVjdGVkCiAgICBv
        biBjcmVhdGlvbi4KCiAgICBAcHJvcGVydHkgY29udGFpbmVyCiAgICBAZGVm
        YXVsdCBudWxsCiAgKi8KICBjb250YWluZXI6IG51bGwsCgogIC8qKgogICAg
        TnVtYmVyIG9mIGF0dHJpYnV0ZXMgdG8gc2VuZAogICAgYXMgY29sdW1ucy4g
        KEVub3VnaCB0byBtYWtlIHRoZSByZWNvcmQKICAgIGlkZW50aWZpYWJsZSku
        CgogICAgQHByaXZhdGUKICAgIEBwcm9wZXJ0eSBhdHRyaWJ1dGVMaW1pdAog
        ICAgQGRlZmF1bHQgMwogICovCiAgYXR0cmlidXRlTGltaXQ6IDMsCgogIC8q
        KgogICAgU3RvcmVzIGFsbCBtZXRob2RzIHRoYXQgY2xlYXIgb2JzZXJ2ZXJz
        LgogICAgVGhlc2UgbWV0aG9kcyB3aWxsIGJlIGNhbGxlZCBvbiBkZXN0cnVj
        dGlvbi4KCiAgICBAcHJpdmF0ZQogICAgQHByb3BlcnR5IHJlbGVhc2VNZXRo
        b2RzCiAgKi8KICByZWxlYXNlTWV0aG9kczogRW1iZXIuQSgpLAoKICAvKioK
        ICAgIFNwZWNpZmllcyBob3cgcmVjb3JkcyBjYW4gYmUgZmlsdGVyZWQuCiAg
        ICBSZWNvcmRzIHJldHVybmVkIHdpbGwgbmVlZCB0byBoYXZlIGEgYGZpbHRl
        clZhbHVlc2AKICAgIHByb3BlcnR5IHdpdGggYSBrZXkgZm9yIGV2ZXJ5IG5h
        bWUgaW4gdGhlIHJldHVybmVkIGFycmF5LgoKICAgIEBwdWJsaWMKICAgIEBt
        ZXRob2QgZ2V0RmlsdGVycwogICAgQHJldHVybiB7QXJyYXl9IExpc3Qgb2Yg
        b2JqZWN0cyBkZWZpbmluZyBmaWx0ZXJzLgogICAgIFRoZSBvYmplY3Qgc2hv
        dWxkIGhhdmUgYSBgbmFtZWAgYW5kIGBkZXNjYCBwcm9wZXJ0eS4KICAqLwog
        IGdldEZpbHRlcnM6IGZ1bmN0aW9uKCkgewogICAgcmV0dXJuIEVtYmVyLkEo
        KTsKICB9LAoKICAvKioKICAgIEZldGNoIHRoZSBtb2RlbCB0eXBlcyBhbmQg
        b2JzZXJ2ZSB0aGVtIGZvciBjaGFuZ2VzLgoKICAgIEBwdWJsaWMKICAgIEBt
        ZXRob2Qgd2F0Y2hNb2RlbFR5cGVzCgogICAgQHBhcmFtIHtGdW5jdGlvbn0g
        dHlwZXNBZGRlZCBDYWxsYmFjayB0byBjYWxsIHRvIGFkZCB0eXBlcy4KICAg
        IFRha2VzIGFuIGFycmF5IG9mIG9iamVjdHMgY29udGFpbmluZyB3cmFwcGVk
        IHR5cGVzIChyZXR1cm5lZCBmcm9tIGB3cmFwTW9kZWxUeXBlYCkuCgogICAg
        QHBhcmFtIHtGdW5jdGlvbn0gdHlwZXNVcGRhdGVkIENhbGxiYWNrIHRvIGNh
        bGwgd2hlbiBhIHR5cGUgaGFzIGNoYW5nZWQuCiAgICBUYWtlcyBhbiBhcnJh
        eSBvZiBvYmplY3RzIGNvbnRhaW5pbmcgd3JhcHBlZCB0eXBlcy4KCiAgICBA
        cmV0dXJuIHtGdW5jdGlvbn0gTWV0aG9kIHRvIGNhbGwgdG8gcmVtb3ZlIGFs
        bCBvYnNlcnZlcnMKICAqLwogIHdhdGNoTW9kZWxUeXBlczogZnVuY3Rpb24o
        dHlwZXNBZGRlZCwgdHlwZXNVcGRhdGVkKSB7CiAgICB2YXIgbW9kZWxUeXBl
        cyA9IHRoaXMuZ2V0TW9kZWxUeXBlcygpLAogICAgICAgIHNlbGYgPSB0aGlz
        LCB0eXBlc1RvU2VuZCwgcmVsZWFzZU1ldGhvZHMgPSBFbWJlci5BKCk7Cgog
        ICAgdHlwZXNUb1NlbmQgPSBtb2RlbFR5cGVzLm1hcChmdW5jdGlvbih0eXBl
        KSB7CiAgICAgIHZhciB3cmFwcGVkID0gc2VsZi53cmFwTW9kZWxUeXBlKHR5
        cGUpOwogICAgICByZWxlYXNlTWV0aG9kcy5wdXNoKHNlbGYub2JzZXJ2ZU1v
        ZGVsVHlwZSh0eXBlLCB0eXBlc1VwZGF0ZWQpKTsKICAgICAgcmV0dXJuIHdy
        YXBwZWQ7CiAgICB9KTsKCiAgICB0eXBlc0FkZGVkKHR5cGVzVG9TZW5kKTsK
        CiAgICB2YXIgcmVsZWFzZSA9IGZ1bmN0aW9uKCkgewogICAgICByZWxlYXNl
        TWV0aG9kcy5mb3JFYWNoKGZ1bmN0aW9uKGZuKSB7IGZuKCk7IH0pOwogICAg
        ICBzZWxmLnJlbGVhc2VNZXRob2RzLnJlbW92ZU9iamVjdChyZWxlYXNlKTsK
        ICAgIH07CiAgICB0aGlzLnJlbGVhc2VNZXRob2RzLnB1c2hPYmplY3QocmVs
        ZWFzZSk7CiAgICByZXR1cm4gcmVsZWFzZTsKICB9LAoKICAvKioKICAgIEZl
        dGNoIHRoZSByZWNvcmRzIG9mIGEgZ2l2ZW4gdHlwZSBhbmQgb2JzZXJ2ZSB0
        aGVtIGZvciBjaGFuZ2VzLgoKICAgIEBwdWJsaWMKICAgIEBtZXRob2Qgd2F0
        Y2hSZWNvcmRzCgogICAgQHBhcmFtIHtGdW5jdGlvbn0gcmVjb3Jkc0FkZGVk
        IENhbGxiYWNrIHRvIGNhbGwgdG8gYWRkIHJlY29yZHMuCiAgICBUYWtlcyBh
        biBhcnJheSBvZiBvYmplY3RzIGNvbnRhaW5pbmcgd3JhcHBlZCByZWNvcmRz
        LgogICAgVGhlIG9iamVjdCBzaG91bGQgaGF2ZSB0aGUgZm9sbG93aW5nIHBy
        b3BlcnRpZXM6CiAgICAgIGNvbHVtblZhbHVlczoge09iamVjdH0ga2V5IGFu
        ZCB2YWx1ZSBvZiBhIHRhYmxlIGNlbGwKICAgICAgb2JqZWN0OiB7T2JqZWN0
        fSB0aGUgYWN0dWFsIHJlY29yZCBvYmplY3QKCiAgICBAcGFyYW0ge0Z1bmN0
        aW9ufSByZWNvcmRzVXBkYXRlZCBDYWxsYmFjayB0byBjYWxsIHdoZW4gYSBy
        ZWNvcmQgaGFzIGNoYW5nZWQuCiAgICBUYWtlcyBhbiBhcnJheSBvZiBvYmpl
        Y3RzIGNvbnRhaW5pbmcgd3JhcHBlZCByZWNvcmRzLgoKICAgIEBwYXJhbSB7
        RnVuY3Rpb259IHJlY29yZHNSZW1vdmVkIENhbGxiYWNrIHRvIGNhbGwgd2hl
        biBhIHJlY29yZCBoYXMgcmVtb3ZlZC4KICAgIFRha2VzIHRoZSBmb2xsb3dp
        bmcgcGFyYW1ldGVyczoKICAgICAgaW5kZXg6IHRoZSBhcnJheSBpbmRleCB3
        aGVyZSB0aGUgcmVjb3JkcyB3ZXJlIHJlbW92ZWQKICAgICAgY291bnQ6IHRo
        ZSBudW1iZXIgb2YgcmVjb3JkcyByZW1vdmVkCgogICAgQHJldHVybiB7RnVu
        Y3Rpb259IE1ldGhvZCB0byBjYWxsIHRvIHJlbW92ZSBhbGwgb2JzZXJ2ZXJz
        CiAgKi8KICB3YXRjaFJlY29yZHM6IGZ1bmN0aW9uKHR5cGUsIHJlY29yZHNB
        ZGRlZCwgcmVjb3Jkc1VwZGF0ZWQsIHJlY29yZHNSZW1vdmVkKSB7CiAgICB2
        YXIgc2VsZiA9IHRoaXMsIHJlbGVhc2VNZXRob2RzID0gRW1iZXIuQSgpLCBy
        ZWNvcmRzID0gdGhpcy5nZXRSZWNvcmRzKHR5cGUpLCByZWxlYXNlOwoKICAg
        IHZhciByZWNvcmRVcGRhdGVkID0gZnVuY3Rpb24odXBkYXRlZFJlY29yZCkg
        ewogICAgICByZWNvcmRzVXBkYXRlZChbdXBkYXRlZFJlY29yZF0pOwogICAg
        fTsKCiAgICB2YXIgcmVjb3Jkc1RvU2VuZCA9IHJlY29yZHMubWFwKGZ1bmN0
        aW9uKHJlY29yZCkgewogICAgICByZWxlYXNlTWV0aG9kcy5wdXNoKHNlbGYu
        b2JzZXJ2ZVJlY29yZChyZWNvcmQsIHJlY29yZFVwZGF0ZWQpKTsKICAgICAg
        cmV0dXJuIHNlbGYud3JhcFJlY29yZChyZWNvcmQpOwogICAgfSk7CgoKICAg
        IHZhciBjb250ZW50RGlkQ2hhbmdlID0gZnVuY3Rpb24oYXJyYXksIGlkeCwg
        cmVtb3ZlZENvdW50LCBhZGRlZENvdW50KSB7CiAgICAgIGZvciAodmFyIGkg
        PSBpZHg7IGkgPCBpZHggKyBhZGRlZENvdW50OyBpKyspIHsKICAgICAgICB2
        YXIgcmVjb3JkID0gYXJyYXkub2JqZWN0QXQoaSk7CiAgICAgICAgdmFyIHdy
        YXBwZWQgPSBzZWxmLndyYXBSZWNvcmQocmVjb3JkKTsKICAgICAgICByZWxl
        YXNlTWV0aG9kcy5wdXNoKHNlbGYub2JzZXJ2ZVJlY29yZChyZWNvcmQsIHJl
        Y29yZFVwZGF0ZWQpKTsKICAgICAgICByZWNvcmRzQWRkZWQoW3dyYXBwZWRd
        KTsKICAgICAgfQoKICAgICAgaWYgKHJlbW92ZWRDb3VudCkgewogICAgICAg
        IHJlY29yZHNSZW1vdmVkKGlkeCwgcmVtb3ZlZENvdW50KTsKICAgICAgfQog
        ICAgfTsKCiAgICB2YXIgb2JzZXJ2ZXIgPSB7IGRpZENoYW5nZTogY29udGVu
        dERpZENoYW5nZSwgd2lsbENoYW5nZTogRW1iZXIuSyB9OwogICAgcmVjb3Jk
        cy5hZGRBcnJheU9ic2VydmVyKHNlbGYsIG9ic2VydmVyKTsKCiAgICByZWxl
        YXNlID0gZnVuY3Rpb24oKSB7CiAgICAgIHJlbGVhc2VNZXRob2RzLmZvckVh
        Y2goZnVuY3Rpb24oZm4pIHsgZm4oKTsgfSk7CiAgICAgIHJlY29yZHMucmVt
        b3ZlQXJyYXlPYnNlcnZlcihzZWxmLCBvYnNlcnZlcik7CiAgICAgIHNlbGYu
        cmVsZWFzZU1ldGhvZHMucmVtb3ZlT2JqZWN0KHJlbGVhc2UpOwogICAgfTsK
        CiAgICByZWNvcmRzQWRkZWQocmVjb3Jkc1RvU2VuZCk7CgogICAgdGhpcy5y
        ZWxlYXNlTWV0aG9kcy5wdXNoT2JqZWN0KHJlbGVhc2UpOwogICAgcmV0dXJu
        IHJlbGVhc2U7CiAgfSwKCiAgLyoqCiAgICBDbGVhciBhbGwgb2JzZXJ2ZXJz
        IGJlZm9yZSBkZXN0cnVjdGlvbgogICAgQHByaXZhdGUKICAqLwogIHdpbGxE
        ZXN0cm95OiBmdW5jdGlvbigpIHsKICAgIHRoaXMuX3N1cGVyKCk7CiAgICB0
        aGlzLnJlbGVhc2VNZXRob2RzLmZvckVhY2goZnVuY3Rpb24oZm4pIHsKICAg
        ICAgZm4oKTsKICAgIH0pOwogIH0sCgogIC8qKgogICAgRGV0ZWN0IHdoZXRo
        ZXIgYSBjbGFzcyBpcyBhIG1vZGVsLgoKICAgIFRlc3QgdGhhdCBhZ2FpbnN0
        IHRoZSBtb2RlbCBjbGFzcwogICAgb2YgeW91ciBwZXJzaXN0ZW5jZSBsaWJy
        YXJ5CgogICAgQHByaXZhdGUKICAgIEBtZXRob2QgZGV0ZWN0CiAgICBAcGFy
        YW0ge0NsYXNzfSBrbGFzcyBUaGUgY2xhc3MgdG8gdGVzdAogICAgQHJldHVy
        biBib29sZWFuIFdoZXRoZXIgdGhlIGNsYXNzIGlzIGEgbW9kZWwgY2xhc3Mg
        b3Igbm90CiAgKi8KICBkZXRlY3Q6IGZ1bmN0aW9uKGtsYXNzKSB7CiAgICBy
        ZXR1cm4gZmFsc2U7CiAgfSwKCiAgLyoqCiAgICBHZXQgdGhlIGNvbHVtbnMg
        Zm9yIGEgZ2l2ZW4gbW9kZWwgdHlwZS4KCiAgICBAcHJpdmF0ZQogICAgQG1l
        dGhvZCBjb2x1bW5zRm9yVHlwZQogICAgQHBhcmFtIHtDbGFzc30gdHlwZSBU
        aGUgbW9kZWwgdHlwZQogICAgQHJldHVybiB7QXJyYXl9IEFuIGFycmF5IG9m
        IGNvbHVtbnMgb2YgdGhlIGZvbGxvd2luZyBmb3JtYXQ6CiAgICAgbmFtZTog
        e1N0cmluZ30gbmFtZSBvZiB0aGUgY29sdW1uCiAgICAgZGVzYzoge1N0cmlu
        Z30gSHVtYW5pemVkIGRlc2NyaXB0aW9uICh3aGF0IHdvdWxkIHNob3cgaW4g
        YSB0YWJsZSBjb2x1bW4gbmFtZSkKICAqLwogIGNvbHVtbnNGb3JUeXBlOiBm
        dW5jdGlvbih0eXBlKSB7CiAgICByZXR1cm4gRW1iZXIuQSgpOwogIH0sCgog
        IC8qKgogICAgQWRkcyBvYnNlcnZlcnMgdG8gYSBtb2RlbCB0eXBlIGNsYXNz
        LgoKICAgIEBwcml2YXRlCiAgICBAbWV0aG9kIG9ic2VydmVNb2RlbFR5cGUK
        ICAgIEBwYXJhbSB7Q2xhc3N9IHR5cGUgVGhlIG1vZGVsIHR5cGUgY2xhc3MK
        ICAgIEBwYXJhbSB7RnVuY3Rpb259IHR5cGVzVXBkYXRlZCBDYWxsZWQgd2hl
        biBhIHR5cGUgaXMgbW9kaWZpZWQuCiAgICBAcmV0dXJuIHtGdW5jdGlvbn0g
        VGhlIGZ1bmN0aW9uIHRvIGNhbGwgdG8gcmVtb3ZlIG9ic2VydmVycwogICov
        CgogIG9ic2VydmVNb2RlbFR5cGU6IGZ1bmN0aW9uKHR5cGUsIHR5cGVzVXBk
        YXRlZCkgewogICAgdmFyIHNlbGYgPSB0aGlzLCByZWNvcmRzID0gdGhpcy5n
        ZXRSZWNvcmRzKHR5cGUpOwoKICAgIHZhciBvbkNoYW5nZSA9IGZ1bmN0aW9u
        KCkgewogICAgICB0eXBlc1VwZGF0ZWQoW3NlbGYud3JhcE1vZGVsVHlwZSh0
        eXBlKV0pOwogICAgfTsKICAgIHZhciBvYnNlcnZlciA9IHsKICAgICAgZGlk
        Q2hhbmdlOiBmdW5jdGlvbigpIHsKICAgICAgICBFbWJlci5ydW4uc2NoZWR1
        bGVPbmNlKCdhY3Rpb25zJywgdGhpcywgb25DaGFuZ2UpOwogICAgICB9LAog
        ICAgICB3aWxsQ2hhbmdlOiBFbWJlci5LCiAgICB9OwoKICAgIHJlY29yZHMu
        YWRkQXJyYXlPYnNlcnZlcih0aGlzLCBvYnNlcnZlcik7CgogICAgdmFyIHJl
        bGVhc2UgPSBmdW5jdGlvbigpIHsKICAgICAgcmVjb3Jkcy5yZW1vdmVBcnJh
        eU9ic2VydmVyKHNlbGYsIG9ic2VydmVyKTsKICAgIH07CgogICAgcmV0dXJu
        IHJlbGVhc2U7CiAgfSwKCgogIC8qKgogICAgV3JhcHMgYSBnaXZlbiBtb2Rl
        bCB0eXBlIGFuZCBvYnNlcnZlcyBjaGFuZ2VzIHRvIGl0LgoKICAgIEBwcml2
        YXRlCiAgICBAbWV0aG9kIHdyYXBNb2RlbFR5cGUKICAgIEBwYXJhbSB7Q2xh
        c3N9IHR5cGUgQSBtb2RlbCBjbGFzcwogICAgQHBhcmFtIHtGdW5jdGlvbn0g
        dHlwZXNVcGRhdGVkIGNhbGxiYWNrIHRvIGNhbGwgd2hlbiB0aGUgdHlwZSBj
        aGFuZ2VzCiAgICBAcmV0dXJuIHtPYmplY3R9IGNvbnRhaW5zIHRoZSB3cmFw
        cGVkIHR5cGUgYW5kIHRoZSBmdW5jdGlvbiB0byByZW1vdmUgb2JzZXJ2ZXJz
        CiAgICBGb3JtYXQ6CiAgICAgIHR5cGU6IHtPYmplY3R9IHRoZSB3cmFwcGVk
        IHR5cGUKICAgICAgICBUaGUgd3JhcHBlZCB0eXBlIGhhcyB0aGUgZm9sbG93
        aW5nIGZvcm1hdDoKICAgICAgICAgIG5hbWU6IHtTdHJpbmd9IG5hbWUgb2Yg
        dGhlIHR5cGUKICAgICAgICAgIGNvdW50OiB7SW50ZWdlcn0gbnVtYmVyIG9m
        IHJlY29yZHMgYXZhaWxhYmxlCiAgICAgICAgICBjb2x1bW5zOiB7Q29sdW1u
        c30gYXJyYXkgb2YgY29sdW1ucyB0byBkZXNjcmliZSB0aGUgcmVjb3JkCiAg
        ICAgICAgICBvYmplY3Q6IHtDbGFzc30gdGhlIGFjdHVhbCBNb2RlbCB0eXBl
        IGNsYXNzCiAgICAgIHJlbGVhc2U6IHtGdW5jdGlvbn0gVGhlIGZ1bmN0aW9u
        IHRvIHJlbW92ZSBvYnNlcnZlcnMKICAqLwogIHdyYXBNb2RlbFR5cGU6IGZ1
        bmN0aW9uKHR5cGUsIHR5cGVzVXBkYXRlZCkgewogICAgdmFyIHJlbGVhc2Us
        IHJlY29yZHMgPSB0aGlzLmdldFJlY29yZHModHlwZSksCiAgICAgICAgdHlw
        ZVRvU2VuZCwgc2VsZiA9IHRoaXM7CgogICAgdHlwZVRvU2VuZCA9IHsKICAg
        ICAgbmFtZTogdHlwZS50b1N0cmluZygpLAogICAgICBjb3VudDogRW1iZXIu
        Z2V0KHJlY29yZHMsICdsZW5ndGgnKSwKICAgICAgY29sdW1uczogdGhpcy5j
        b2x1bW5zRm9yVHlwZSh0eXBlKSwKICAgICAgb2JqZWN0OiB0eXBlCiAgICB9
        OwoKCiAgICByZXR1cm4gdHlwZVRvU2VuZDsKICB9LAoKCiAgLyoqCiAgICBG
        ZXRjaGVzIGFsbCBtb2RlbHMgZGVmaW5lZCBpbiB0aGUgYXBwbGljYXRpb24u
        CgogICAgQHByaXZhdGUKICAgIEBtZXRob2QgZ2V0TW9kZWxUeXBlcwogICAg
        QHJldHVybiB7QXJyYXl9IEFycmF5IG9mIG1vZGVsIHR5cGVzCiAgKi8KCiAv
        LyBUT0RPOiBVc2UgdGhlIHJlc29sdmVyIGluc3RlYWQgb2YgbG9vcGluZyBv
        dmVyIG5hbWVzcGFjZXMuCiAgZ2V0TW9kZWxUeXBlczogZnVuY3Rpb24oKSB7
        CiAgICB2YXIgbmFtZXNwYWNlcyA9IEVtYmVyLkEoRW1iZXIuTmFtZXNwYWNl
        Lk5BTUVTUEFDRVMpLCB0eXBlcyA9IEVtYmVyLkEoKSwgc2VsZiA9IHRoaXM7
        CgogICAgbmFtZXNwYWNlcy5mb3JFYWNoKGZ1bmN0aW9uKG5hbWVzcGFjZSkg
        ewogICAgICBmb3IgKHZhciBrZXkgaW4gbmFtZXNwYWNlKSB7CiAgICAgICAg
        aWYgKCFuYW1lc3BhY2UuaGFzT3duUHJvcGVydHkoa2V5KSkgeyBjb250aW51
        ZTsgfQogICAgICAgIHZhciBrbGFzcyA9IG5hbWVzcGFjZVtrZXldOwogICAg
        ICAgIGlmIChzZWxmLmRldGVjdChrbGFzcykpIHsKICAgICAgICAgIHR5cGVz
        LnB1c2goa2xhc3MpOwogICAgICAgIH0KICAgICAgfQogICAgfSk7CiAgICBy
        ZXR1cm4gdHlwZXM7CiAgfSwKCiAgLyoqCiAgICBGZXRjaGVzIGFsbCBsb2Fk
        ZWQgcmVjb3JkcyBmb3IgYSBnaXZlbiB0eXBlLgoKICAgIEBwcml2YXRlCiAg
        ICBAbWV0aG9kIGdldFJlY29yZHMKICAgIEByZXR1cm4ge0FycmF5fSBBbiBh
        cnJheSBvZiByZWNvcmRzLgogICAgIFRoaXMgYXJyYXkgd2lsbCBiZSBvYnNl
        cnZlZCBmb3IgY2hhbmdlcywKICAgICBzbyBpdCBzaG91bGQgdXBkYXRlIHdo
        ZW4gbmV3IHJlY29yZHMgYXJlIGFkZGVkL3JlbW92ZWQuCiAgKi8KICBnZXRS
        ZWNvcmRzOiBmdW5jdGlvbih0eXBlKSB7CiAgICByZXR1cm4gRW1iZXIuQSgp
        OwogIH0sCgogIC8qKgogICAgV3JhcHMgYSByZWNvcmQgYW5kIG9ic2VydmVy
        cyBjaGFuZ2VzIHRvIGl0LgoKICAgIEBwcml2YXRlCiAgICBAbWV0aG9kIHdy
        YXBSZWNvcmQKICAgIEBwYXJhbSB7T2JqZWN0fSByZWNvcmQgVGhlIHJlY29y
        ZCBpbnN0YW5jZS4KICAgIEByZXR1cm4ge09iamVjdH0gVGhlIHdyYXBwZWQg
        cmVjb3JkLiBGb3JtYXQ6CiAgICBjb2x1bW5WYWx1ZXM6IHtBcnJheX0KICAg
        IHNlYXJjaEtleXdvcmRzOiB7QXJyYXl9CiAgKi8KICB3cmFwUmVjb3JkOiBm
        dW5jdGlvbihyZWNvcmQpIHsKICAgIHZhciByZWNvcmRUb1NlbmQgPSB7IG9i
        amVjdDogcmVjb3JkIH0sIGNvbHVtblZhbHVlcyA9IHt9LCBzZWxmID0gdGhp
        czsKCiAgICByZWNvcmRUb1NlbmQuY29sdW1uVmFsdWVzID0gdGhpcy5nZXRS
        ZWNvcmRDb2x1bW5WYWx1ZXMocmVjb3JkKTsKICAgIHJlY29yZFRvU2VuZC5z
        ZWFyY2hLZXl3b3JkcyA9IHRoaXMuZ2V0UmVjb3JkS2V5d29yZHMocmVjb3Jk
        KTsKICAgIHJlY29yZFRvU2VuZC5maWx0ZXJWYWx1ZXMgPSB0aGlzLmdldFJl
        Y29yZEZpbHRlclZhbHVlcyhyZWNvcmQpOwogICAgcmVjb3JkVG9TZW5kLmNv
        bG9yID0gdGhpcy5nZXRSZWNvcmRDb2xvcihyZWNvcmQpOwoKICAgIHJldHVy
        biByZWNvcmRUb1NlbmQ7CiAgfSwKCiAgLyoqCiAgICBHZXRzIHRoZSB2YWx1
        ZXMgZm9yIGVhY2ggY29sdW1uLgoKICAgIEBwcml2YXRlCiAgICBAbWV0aG9k
        IGdldFJlY29yZENvbHVtblZhbHVlcwogICAgQHJldHVybiB7T2JqZWN0fSBL
        ZXlzIHNob3VsZCBtYXRjaCBjb2x1bW4gbmFtZXMgZGVmaW5lZAogICAgYnkg
        dGhlIG1vZGVsIHR5cGUuCiAgKi8KICBnZXRSZWNvcmRDb2x1bW5WYWx1ZXM6
        IGZ1bmN0aW9uKHJlY29yZCkgewogICAgcmV0dXJuIHt9OwogIH0sCgogIC8q
        KgogICAgUmV0dXJucyBrZXl3b3JkcyB0byBtYXRjaCB3aGVuIHNlYXJjaGlu
        ZyByZWNvcmRzLgoKICAgIEBwcml2YXRlCiAgICBAbWV0aG9kIGdldFJlY29y
        ZEtleXdvcmRzCiAgICBAcmV0dXJuIHtBcnJheX0gUmVsZXZhbnQga2V5d29y
        ZHMgZm9yIHNlYXJjaC4KICAqLwogIGdldFJlY29yZEtleXdvcmRzOiBmdW5j
        dGlvbihyZWNvcmQpIHsKICAgIHJldHVybiBFbWJlci5BKCk7CiAgfSwKCiAg
        LyoqCiAgICBSZXR1cm5zIHRoZSB2YWx1ZXMgb2YgZmlsdGVycyBkZWZpbmVk
        IGJ5IGBnZXRGaWx0ZXJzYC4KCiAgICBAcHJpdmF0ZQogICAgQG1ldGhvZCBn
        ZXRSZWNvcmRGaWx0ZXJWYWx1ZXMKICAgIEBwYXJhbSB7T2JqZWN0fSByZWNv
        cmQgVGhlIHJlY29yZCBpbnN0YW5jZQogICAgQHJldHVybiB7T2JqZWN0fSBU
        aGUgZmlsdGVyIHZhbHVlcwogICovCiAgZ2V0UmVjb3JkRmlsdGVyVmFsdWVz
        OiBmdW5jdGlvbihyZWNvcmQpIHsKICAgIHJldHVybiB7fTsKICB9LAoKICAv
        KioKICAgIEVhY2ggcmVjb3JkIGNhbiBoYXZlIGEgY29sb3IgdGhhdCByZXBy
        ZXNlbnRzIGl0cyBzdGF0ZS4KCiAgICBAcHJpdmF0ZQogICAgQG1ldGhvZCBn
        ZXRSZWNvcmRDb2xvcgogICAgQHBhcmFtIHtPYmplY3R9IHJlY29yZCBUaGUg
        cmVjb3JkIGluc3RhbmNlCiAgICBAcmV0dXJuIHtTdHJpbmd9IFRoZSByZWNv
        cmQncyBjb2xvcgogICAgICBQb3NzaWJsZSBvcHRpb25zOiBibGFjaywgcmVk
        LCBibHVlLCBncmVlbgogICovCiAgZ2V0UmVjb3JkQ29sb3I6IGZ1bmN0aW9u
        KHJlY29yZCkgewogICAgcmV0dXJuIG51bGw7CiAgfSwKCiAgLyoqCiAgICBP
        YnNlcnZlcyBhbGwgcmVsZXZhbnQgcHJvcGVydGllcyBhbmQgcmUtc2VuZHMg
        dGhlIHdyYXBwZWQgcmVjb3JkCiAgICB3aGVuIGEgY2hhbmdlIG9jY3Vycy4K
        CiAgICBAcHJpdmF0ZQogICAgQG1ldGhvZCBvYnNlcnZlclJlY29yZAogICAg
        QHBhcmFtIHtPYmplY3R9IHJlY29yZCBUaGUgcmVjb3JkIGluc3RhbmNlCiAg
        ICBAcGFyYW0ge0Z1bmN0aW9ufSByZWNvcmRVcGRhdGVkIFRoZSBjYWxsYmFj
        ayB0byBjYWxsIHdoZW4gYSByZWNvcmQgaXMgdXBkYXRlZC4KICAgIEByZXR1
        cm4ge0Z1bmN0aW9ufSBUaGUgZnVuY3Rpb24gdG8gY2FsbCB0byByZW1vdmUg
        YWxsIG9ic2VydmVycy4KICAqLwogIG9ic2VydmVSZWNvcmQ6IGZ1bmN0aW9u
        KHJlY29yZCwgcmVjb3JkVXBkYXRlZCkgewogICAgcmV0dXJuIGZ1bmN0aW9u
        KCl7fTsKICB9Cgp9KTsKCgp9KSgpOwoKCgooZnVuY3Rpb24oKSB7Ci8qKgpF
        bWJlciBFeHRlbnNpb24gU3VwcG9ydAoKQG1vZHVsZSBlbWJlcgpAc3VibW9k
        dWxlIGVtYmVyLWV4dGVuc2lvbi1zdXBwb3J0CkByZXF1aXJlcyBlbWJlci1h
        cHBsaWNhdGlvbgoqLwoKfSkoKTsKCihmdW5jdGlvbigpIHsKLyoqCiAgU2V0
        cyBFbWJlciB1cCBmb3IgdGVzdGluZy4gVGhpcyBpcyB1c2VmdWwgdG8gcGVy
        Zm9ybQogIGJhc2ljIHNldHVwIHN0ZXBzIGluIG9yZGVyIHRvIHVuaXQgdGVz
        dC4KICAKICBVc2UgYEFwcC5zZXR1cEZvclRlc3RpbmdgIHRvIHBlcmZvcm0g
        aW50ZWdyYXRpb24gdGVzdHMgKGZ1bGwKICBhcHBsaWNhdGlvbiB0ZXN0aW5n
        KS4KCiAgQG1ldGhvZCBzZXR1cEZvclRlc3RpbmcKICBAbmFtZXNwYWNlIEVt
        YmVyCiovCkVtYmVyLnNldHVwRm9yVGVzdGluZyA9IGZ1bmN0aW9uKCkgewog
        IEVtYmVyLnRlc3RpbmcgPSB0cnVlOwoKICAvLyBpZiBhZGFwdGVyIGlzIG5v
        dCBtYW51YWxseSBzZXQgZGVmYXVsdCB0byBRVW5pdAogIGlmICghRW1iZXIu
        VGVzdC5hZGFwdGVyKSB7CiAgICBFbWJlci5UZXN0LmFkYXB0ZXIgPSBFbWJl
        ci5UZXN0LlFVbml0QWRhcHRlci5jcmVhdGUoKTsKICB9Cn07Cgp9KSgpOwoK
        CgooZnVuY3Rpb24oKSB7Ci8qKgogIEBtb2R1bGUgZW1iZXIKICBAc3VibW9k
        dWxlIGVtYmVyLXRlc3RpbmcKICovCnZhciBzbGljZSA9IFtdLnNsaWNlLAog
        ICAgaGVscGVycyA9IHt9LAogICAgaW5qZWN0SGVscGVyc0NhbGxiYWNrcyA9
        IFtdOwoKLyoqCiAgVGhpcyBpcyBhIGNvbnRhaW5lciBmb3IgYW4gYXNzb3J0
        bWVudCBvZiB0ZXN0aW5nIHJlbGF0ZWQgZnVuY3Rpb25hbGl0eToKCiAgKiBD
        aG9vc2UgeW91ciBkZWZhdWx0IHRlc3QgYWRhcHRlciAoZm9yIHlvdXIgZnJh
        bWV3b3JrIG9mIGNob2ljZSkuCiAgKiBSZWdpc3Rlci9VbnJlZ2lzdGVyIGFk
        ZGl0aW9uYWwgdGVzdCBoZWxwZXJzLgogICogU2V0dXAgY2FsbGJhY2tzIHRv
        IGJlIGZpcmVkIHdoZW4gdGhlIHRlc3QgaGVscGVycyBhcmUgaW5qZWN0ZWQg
        aW50bwogICAgeW91ciBhcHBsaWNhdGlvbi4KCiAgQGNsYXNzIFRlc3QKICBA
        bmFtZXNwYWNlIEVtYmVyCiovCkVtYmVyLlRlc3QgPSB7CgogIC8qKgogICAg
        YHJlZ2lzdGVySGVscGVyYCBpcyB1c2VkIHRvIHJlZ2lzdGVyIGEgdGVzdCBo
        ZWxwZXIgdGhhdCB3aWxsIGJlIGluamVjdGVkCiAgICB3aGVuIGBBcHAuaW5q
        ZWN0VGVzdEhlbHBlcnNgIGlzIGNhbGxlZC4KCiAgICBUaGUgaGVscGVyIG1l
        dGhvZCB3aWxsIGFsd2F5cyBiZSBjYWxsZWQgd2l0aCB0aGUgY3VycmVudCBB
        cHBsaWNhdGlvbiBhcwogICAgdGhlIGZpcnN0IHBhcmFtZXRlci4KCiAgICBG
        b3IgZXhhbXBsZToKCiAgICBgYGBqYXZhc2NyaXB0CiAgICBFbWJlci5UZXN0
        LnJlZ2lzdGVySGVscGVyKCdib290JywgZnVuY3Rpb24oYXBwKSB7CiAgICAg
        IEVtYmVyLnJ1bihhcHAsIGFwcC5hZHZhbmNlUmVhZGluZXNzKTsKICAgIH0p
        OwogICAgYGBgCgogICAgVGhpcyBoZWxwZXIgY2FuIGxhdGVyIGJlIGNhbGxl
        ZCB3aXRob3V0IGFyZ3VtZW50cyBiZWNhdXNlIGl0IHdpbGwgYmUKICAgIGNh
        bGxlZCB3aXRoIGBhcHBgIGFzIHRoZSBmaXJzdCBwYXJhbWV0ZXIuCgogICAg
        YGBgamF2YXNjcmlwdAogICAgQXBwID0gRW1iZXIuQXBwbGljYXRpb24uY3Jl
        YXRlKCk7CiAgICBBcHAuaW5qZWN0VGVzdEhlbHBlcnMoKTsKICAgIGJvb3Qo
        KTsKICAgIGBgYAoKICAgIEBwdWJsaWMKICAgIEBtZXRob2QgcmVnaXN0ZXJI
        ZWxwZXIKICAgIEBwYXJhbSB7U3RyaW5nfSBuYW1lIFRoZSBuYW1lIG9mIHRo
        ZSBoZWxwZXIgbWV0aG9kIHRvIGFkZC4KICAgIEBwYXJhbSB7RnVuY3Rpb259
        IGhlbHBlck1ldGhvZAogICAgQHBhcmFtIG9wdGlvbnMge09iamVjdH0KICAq
        LwogIHJlZ2lzdGVySGVscGVyOiBmdW5jdGlvbihuYW1lLCBoZWxwZXJNZXRo
        b2QpIHsKICAgIGhlbHBlcnNbbmFtZV0gPSB7CiAgICAgIG1ldGhvZDogaGVs
        cGVyTWV0aG9kLAogICAgICBtZXRhOiB7IHdhaXQ6IGZhbHNlIH0KICAgIH07
        CiAgfSwKCiAgLyoqCiAgICBgcmVnaXN0ZXJBc3luY0hlbHBlcmAgaXMgdXNl
        ZCB0byByZWdpc3RlciBhbiBhc3luYyB0ZXN0IGhlbHBlciB0aGF0IHdpbGwg
        YmUgaW5qZWN0ZWQKICAgIHdoZW4gYEFwcC5pbmplY3RUZXN0SGVscGVyc2Ag
        aXMgY2FsbGVkLgoKICAgIFRoZSBoZWxwZXIgbWV0aG9kIHdpbGwgYWx3YXlz
        IGJlIGNhbGxlZCB3aXRoIHRoZSBjdXJyZW50IEFwcGxpY2F0aW9uIGFzCiAg
        ICB0aGUgZmlyc3QgcGFyYW1ldGVyLgoKICAgIEZvciBleGFtcGxlOgoKICAg
        IGBgYGphdmFzY3JpcHQKICAgIEVtYmVyLlRlc3QucmVnaXN0ZXJBc3luY0hl
        bHBlcignYm9vdCcsIGZ1bmN0aW9uKGFwcCkgewogICAgICBFbWJlci5ydW4o
        YXBwLCBhcHAuYWR2YW5jZVJlYWRpbmVzcyk7CiAgICB9KTsKICAgIGBgYAoK
        ICAgIFRoZSBhZHZhbnRhZ2Ugb2YgYW4gYXN5bmMgaGVscGVyIGlzIHRoYXQg
        aXQgd2lsbCBub3QgcnVuCiAgICB1bnRpbCB0aGUgbGFzdCBhc3luYyBoZWxw
        ZXIgaGFzIGNvbXBsZXRlZC4gIEFsbCBhc3luYyBoZWxwZXJzCiAgICBhZnRl
        ciBpdCB3aWxsIHdhaXQgZm9yIGl0IGNvbXBsZXRlIGJlZm9yZSBydW5uaW5n
        LgoKCiAgICBGb3IgZXhhbXBsZToKCiAgICBgYGBqYXZhc2NyaXB0CiAgICBF
        bWJlci5UZXN0LnJlZ2lzdGVyQXN5bmNIZWxwZXIoJ2RlbGV0ZVBvc3QnLCBm
        dW5jdGlvbihhcHAsIHBvc3RJZCkgewogICAgICBjbGljaygnLmRlbGV0ZS0n
        ICsgcG9zdElkKTsKICAgIH0pOwoKICAgIC8vIC4uLiBpbiB5b3VyIHRlc3QK
        ICAgIHZpc2l0KCcvcG9zdC8yJyk7CiAgICBkZWxldGVQb3N0KDIpOwogICAg
        dmlzaXQoJy9wb3N0LzMnKTsKICAgIGRlbGV0ZVBvc3QoMyk7CiAgICBgYGAK
        CiAgICBAcHVibGljCiAgICBAbWV0aG9kIHJlZ2lzdGVyQXN5bmNIZWxwZXIK
        ICAgIEBwYXJhbSB7U3RyaW5nfSBuYW1lIFRoZSBuYW1lIG9mIHRoZSBoZWxw
        ZXIgbWV0aG9kIHRvIGFkZC4KICAgIEBwYXJhbSB7RnVuY3Rpb259IGhlbHBl
        ck1ldGhvZAogICovCiAgcmVnaXN0ZXJBc3luY0hlbHBlcjogZnVuY3Rpb24o
        bmFtZSwgaGVscGVyTWV0aG9kKSB7CiAgICBoZWxwZXJzW25hbWVdID0gewog
        ICAgICBtZXRob2Q6IGhlbHBlck1ldGhvZCwKICAgICAgbWV0YTogeyB3YWl0
        OiB0cnVlIH0KICAgIH07CiAgfSwKCiAgLyoqCiAgICBSZW1vdmUgYSBwcmV2
        aW91c2x5IGFkZGVkIGhlbHBlciBtZXRob2QuCgogICAgRXhhbXBsZToKCiAg
        ICBgYGBqYXZhc2NyaXB0CiAgICBFbWJlci5UZXN0LnVucmVnaXN0ZXJIZWxw
        ZXIoJ3dhaXQnKTsKICAgIGBgYAoKICAgIEBwdWJsaWMKICAgIEBtZXRob2Qg
        dW5yZWdpc3RlckhlbHBlcgogICAgQHBhcmFtIHtTdHJpbmd9IG5hbWUgVGhl
        IGhlbHBlciB0byByZW1vdmUuCiAgKi8KICB1bnJlZ2lzdGVySGVscGVyOiBm
        dW5jdGlvbihuYW1lKSB7CiAgICBkZWxldGUgaGVscGVyc1tuYW1lXTsKICAg
        IGRlbGV0ZSBFbWJlci5UZXN0LlByb21pc2UucHJvdG90eXBlW25hbWVdOwog
        IH0sCgogIC8qKgogICAgVXNlZCB0byByZWdpc3RlciBjYWxsYmFja3MgdG8g
        YmUgZmlyZWQgd2hlbmV2ZXIgYEFwcC5pbmplY3RUZXN0SGVscGVyc2AKICAg
        IGlzIGNhbGxlZC4KCiAgICBUaGUgY2FsbGJhY2sgd2lsbCByZWNlaXZlIHRo
        ZSBjdXJyZW50IGFwcGxpY2F0aW9uIGFzIGFuIGFyZ3VtZW50LgoKICAgIEV4
        YW1wbGU6CgogICAgYGBgamF2YXNjcmlwdAogICAgRW1iZXIuVGVzdC5vbklu
        amVjdEhlbHBlcnMoZnVuY3Rpb24oKSB7CiAgICAgIEVtYmVyLiQoZG9jdW1l
        bnQpLmFqYXhTdGFydChmdW5jdGlvbigpIHsKICAgICAgICBUZXN0LnBlbmRp
        bmdBamF4UmVxdWVzdHMrKzsKICAgICAgfSk7CgogICAgICBFbWJlci4kKGRv
        Y3VtZW50KS5hamF4U3RvcChmdW5jdGlvbigpIHsKICAgICAgICBUZXN0LnBl
        bmRpbmdBamF4UmVxdWVzdHMtLTsKICAgICAgfSk7CiAgICB9KTsKICAgIGBg
        YAoKICAgIEBwdWJsaWMKICAgIEBtZXRob2Qgb25JbmplY3RIZWxwZXJzCiAg
        ICBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjayBUaGUgZnVuY3Rpb24gdG8g
        YmUgY2FsbGVkLgogICovCiAgb25JbmplY3RIZWxwZXJzOiBmdW5jdGlvbihj
        YWxsYmFjaykgewogICAgaW5qZWN0SGVscGVyc0NhbGxiYWNrcy5wdXNoKGNh
        bGxiYWNrKTsKICB9LAoKICAvKioKICAgIFRoaXMgcmV0dXJucyBhIHRoZW5h
        YmxlIHRhaWxvcmVkIGZvciB0ZXN0aW5nLiAgSXQgY2F0Y2hlcyBmYWlsZWQK
        ICAgIGBvblN1Y2Nlc3NgIGNhbGxiYWNrcyBhbmQgaW52b2tlcyB0aGUgYEVt
        YmVyLlRlc3QuYWRhcHRlci5leGNlcHRpb25gCiAgICBjYWxsYmFjayBpbiB0
        aGUgbGFzdCBjaGFpbmVkIHRoZW4uCgogICAgVGhpcyBtZXRob2Qgc2hvdWxk
        IGJlIHJldHVybmVkIGJ5IGFzeW5jIGhlbHBlcnMgc3VjaCBhcyBgd2FpdGAu
        CgogICAgQHB1YmxpYwogICAgQG1ldGhvZCBwcm9taXNlCiAgICBAcGFyYW0g
        e0Z1bmN0aW9ufSByZXNvbHZlciBUaGUgZnVuY3Rpb24gdXNlZCB0byByZXNv
        bHZlIHRoZSBwcm9taXNlLgogICovCiAgcHJvbWlzZTogZnVuY3Rpb24ocmVz
        b2x2ZXIpIHsKICAgIHJldHVybiBuZXcgRW1iZXIuVGVzdC5Qcm9taXNlKHJl
        c29sdmVyKTsKICB9LAoKICAvKioKICAgVXNlZCB0byBhbGxvdyBlbWJlci10
        ZXN0aW5nIHRvIGNvbW11bmljYXRlIHdpdGggYSBzcGVjaWZpYyB0ZXN0aW5n
        CiAgIGZyYW1ld29yay4KCiAgIFlvdSBjYW4gbWFudWFsbHkgc2V0IGl0IGJl
        Zm9yZSBjYWxsaW5nIGBBcHAuc2V0dXBGb3JUZXN0aW5nKClgLgoKICAgRXhh
        bXBsZToKCiAgIGBgYGphdmFzY3JpcHQKICAgRW1iZXIuVGVzdC5hZGFwdGVy
        ID0gTXlDdXN0b21BZGFwdGVyLmNyZWF0ZSgpCiAgIGBgYAoKICAgSWYgeW91
        IGRvIG5vdCBzZXQgaXQsIGVtYmVyLXRlc3Rpbmcgd2lsbCBkZWZhdWx0IHRv
        IGBFbWJlci5UZXN0LlFVbml0QWRhcHRlcmAuCgogICBAcHVibGljCiAgIEBw
        cm9wZXJ0eSBhZGFwdGVyCiAgIEB0eXBlIHtDbGFzc30gVGhlIGFkYXB0ZXIg
        dG8gYmUgdXNlZC4KICAgQGRlZmF1bHQgRW1iZXIuVGVzdC5RVW5pdEFkYXB0
        ZXIKICAqLwogIGFkYXB0ZXI6IG51bGwsCgogIC8qKgogICAgUmVwbGFjZW1l
        bnQgZm9yIGBFbWJlci5SU1ZQLnJlc29sdmVgCiAgICBUaGUgb25seSBkaWZm
        ZXJlbmNlIGlzIHRoaXMgdXNlcwogICAgYW5kIGluc3RhbmNlIG9mIGBFbWJl
        ci5UZXN0LlByb21pc2VgCgogICAgQHB1YmxpYwogICAgQG1ldGhvZCByZXNv
        bHZlCiAgICBAcGFyYW0ge01peGVkfSBUaGUgdmFsdWUgdG8gcmVzb2x2ZQog
        ICovCiAgcmVzb2x2ZTogZnVuY3Rpb24odmFsKSB7CiAgICByZXR1cm4gRW1i
        ZXIuVGVzdC5wcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUpIHsKICAgICAgcmV0
        dXJuIHJlc29sdmUodmFsKTsKICAgIH0pOwogIH0sCgogIC8qKgogICAgIFRo
        aXMgYWxsb3dzIGVtYmVyLXRlc3RpbmcgdG8gcGxheSBuaWNlbHkgd2l0aCBv
        dGhlciBhc3luY2hyb25vdXMKICAgICBldmVudHMsIHN1Y2ggYXMgYW4gYXBw
        bGljYXRpb24gdGhhdCBpcyB3YWl0aW5nIGZvciBhIENTUzMKICAgICB0cmFu
        c2l0aW9uIG9yIGFuIEluZGV4REIgdHJhbnNhY3Rpb24uCgogICAgIEZvciBl
        eGFtcGxlOgoKICAgICBgYGBqYXZhc2NyaXB0CiAgICAgRW1iZXIuVGVzdC5y
        ZWdpc3RlcldhaXRlcihmdW5jdGlvbigpIHsKICAgICAgIHJldHVybiBteVBl
        bmRpbmdUcmFuc2FjdGlvbnMoKSA9PSAwOwogICAgIH0pOwogICAgIGBgYAog
        ICAgIFRoZSBgY29udGV4dGAgYXJndW1lbnQgYWxsb3dzIHlvdSB0byBvcHRp
        b25hbGx5IHNwZWNpZnkgdGhlIGB0aGlzYAogICAgIHdpdGggd2hpY2ggeW91
        ciBjYWxsYmFjayB3aWxsIGJlIGludm9rZWQuCgogICAgIEZvciBleGFtcGxl
        OgoKICAgICBgYGBqYXZhc2NyaXB0CiAgICAgRW1iZXIuVGVzdC5yZWdpc3Rl
        cldhaXRlcihNeURCLCBNeURCLmhhc1BlbmRpbmdUcmFuc2FjdGlvbnMpOwog
        ICAgIGBgYAoKICAgICBAcHVibGljCiAgICAgQG1ldGhvZCByZWdpc3Rlcldh
        aXRlcgogICAgIEBwYXJhbSB7T2JqZWN0fSBjb250ZXh0IChvcHRpb25hbCkK
        ICAgICBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjawogICovCiAgcmVnaXN0
        ZXJXYWl0ZXI6IGZ1bmN0aW9uKGNvbnRleHQsIGNhbGxiYWNrKSB7CiAgICBp
        ZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMSkgewogICAgICBjYWxsYmFjayA9
        IGNvbnRleHQ7CiAgICAgIGNvbnRleHQgPSBudWxsOwogICAgfQogICAgaWYg
        KCF0aGlzLndhaXRlcnMpIHsKICAgICAgdGhpcy53YWl0ZXJzID0gRW1iZXIu
        QSgpOwogICAgfQogICAgdGhpcy53YWl0ZXJzLnB1c2goW2NvbnRleHQsIGNh
        bGxiYWNrXSk7CiAgfSwKICAvKioKICAgICBgdW5yZWdpc3RlcldhaXRlcmAg
        aXMgdXNlZCB0byB1bnJlZ2lzdGVyIGEgY2FsbGJhY2sgdGhhdCB3YXMKICAg
        ICByZWdpc3RlcmVkIHdpdGggYHJlZ2lzdGVyV2FpdGVyYC4KCiAgICAgQHB1
        YmxpYwogICAgIEBtZXRob2QgdW5yZWdpc3RlcldhaXRlcgogICAgIEBwYXJh
        bSB7T2JqZWN0fSBjb250ZXh0IChvcHRpb25hbCkKICAgICBAcGFyYW0ge0Z1
        bmN0aW9ufSBjYWxsYmFjawogICovCiAgdW5yZWdpc3RlcldhaXRlcjogZnVu
        Y3Rpb24oY29udGV4dCwgY2FsbGJhY2spIHsKICAgIHZhciBwYWlyOwogICAg
        aWYgKCF0aGlzLndhaXRlcnMpIHsgcmV0dXJuOyB9CiAgICBpZiAoYXJndW1l
        bnRzLmxlbmd0aCA9PT0gMSkgewogICAgICBjYWxsYmFjayA9IGNvbnRleHQ7
        CiAgICAgIGNvbnRleHQgPSBudWxsOwogICAgfQogICAgcGFpciA9IFtjb250
        ZXh0LCBjYWxsYmFja107CiAgICB0aGlzLndhaXRlcnMgPSBFbWJlci5BKHRo
        aXMud2FpdGVycy5maWx0ZXIoZnVuY3Rpb24oZWx0KSB7CiAgICAgIHJldHVy
        biBFbWJlci5jb21wYXJlKGVsdCwgcGFpcikhPT0wOwogICAgfSkpOwogIH0K
        fTsKCmZ1bmN0aW9uIGhlbHBlcihhcHAsIG5hbWUpIHsKICB2YXIgZm4gPSBo
        ZWxwZXJzW25hbWVdLm1ldGhvZCwKICAgICAgbWV0YSA9IGhlbHBlcnNbbmFt
        ZV0ubWV0YTsKCiAgcmV0dXJuIGZ1bmN0aW9uKCkgewogICAgdmFyIGFyZ3Mg
        PSBzbGljZS5jYWxsKGFyZ3VtZW50cyksCiAgICAgICAgbGFzdFByb21pc2Ug
        PSBFbWJlci5UZXN0Lmxhc3RQcm9taXNlOwoKICAgIGFyZ3MudW5zaGlmdChh
        cHApOwoKICAgIC8vIHNvbWUgaGVscGVycyBhcmUgbm90IGFzeW5jIGFuZAog
        ICAgLy8gbmVlZCB0byByZXR1cm4gYSB2YWx1ZSBpbW1lZGlhdGVseS4KICAg
        IC8vIGV4YW1wbGU6IGBmaW5kYAogICAgaWYgKCFtZXRhLndhaXQpIHsKICAg
        ICAgcmV0dXJuIGZuLmFwcGx5KGFwcCwgYXJncyk7CiAgICB9CgogICAgaWYg
        KCFsYXN0UHJvbWlzZSkgewogICAgICAvLyBJdCdzIHRoZSBmaXJzdCBhc3lu
        YyBoZWxwZXIgaW4gY3VycmVudCBjb250ZXh0CiAgICAgIGxhc3RQcm9taXNl
        ID0gZm4uYXBwbHkoYXBwLCBhcmdzKTsKICAgIH0gZWxzZSB7CiAgICAgIC8v
        IHdhaXQgZm9yIGxhc3QgaGVscGVyJ3MgcHJvbWlzZSB0byByZXNvbHZlCiAg
        ICAgIC8vIGFuZCB0aGVuIGV4ZWN1dGUKICAgICAgcnVuKGZ1bmN0aW9uKCkg
        ewogICAgICAgIGxhc3RQcm9taXNlID0gRW1iZXIuVGVzdC5yZXNvbHZlKGxh
        c3RQcm9taXNlKS50aGVuKGZ1bmN0aW9uKCkgewogICAgICAgICAgcmV0dXJu
        IGZuLmFwcGx5KGFwcCwgYXJncyk7CiAgICAgICAgfSk7CiAgICAgIH0pOwog
        ICAgfQoKICAgIHJldHVybiBsYXN0UHJvbWlzZTsKICB9Owp9CgpmdW5jdGlv
        biBydW4oZm4pIHsKICBpZiAoIUVtYmVyLnJ1bi5jdXJyZW50UnVuTG9vcCkg
        ewogICAgRW1iZXIucnVuKGZuKTsKICB9IGVsc2UgewogICAgZm4oKTsKICB9
        Cn0KCkVtYmVyLkFwcGxpY2F0aW9uLnJlb3Blbih7CiAgLyoqCiAgIFRoaXMg
        cHJvcGVydHkgY29udGFpbnMgdGhlIHRlc3RpbmcgaGVscGVycyBmb3IgdGhl
        IGN1cnJlbnQgYXBwbGljYXRpb24uIFRoZXNlCiAgIGFyZSBjcmVhdGVkIG9u
        Y2UgeW91IGNhbGwgYGluamVjdFRlc3RIZWxwZXJzYCBvbiB5b3VyIGBFbWJl
        ci5BcHBsaWNhdGlvbmAKICAgaW5zdGFuY2UuIFRoZSBpbmNsdWRlZCBoZWxw
        ZXJzIGFyZSBhbHNvIGF2YWlsYWJsZSBvbiB0aGUgYHdpbmRvd2Agb2JqZWN0
        IGJ5CiAgIGRlZmF1bHQsIGJ1dCBjYW4gYmUgdXNlZCBmcm9tIHRoaXMgb2Jq
        ZWN0IG9uIHRoZSBpbmRpdmlkdWFsIGFwcGxpY2F0aW9uIGFsc28uCgogICAg
        QHByb3BlcnR5IHRlc3RIZWxwZXJzCiAgICBAdHlwZSB7T2JqZWN0fQogICAg
        QGRlZmF1bHQge30KICAqLwogIHRlc3RIZWxwZXJzOiB7fSwKCiAgLyoqCiAg
        IFRoaXMgcHJvcGVydHkgd2lsbCBjb250YWluIHRoZSBvcmlnaW5hbCBtZXRo
        b2RzIHRoYXQgd2VyZSByZWdpc3RlcmVkCiAgIG9uIHRoZSBgaGVscGVyQ29u
        dGFpbmVyYCBiZWZvcmUgYGluamVjdFRlc3RIZWxwZXJzYCBpcyBjYWxsZWQu
        CgogICBXaGVuIGByZW1vdmVUZXN0SGVscGVyc2AgaXMgY2FsbGVkLCB0aGVz
        ZSBtZXRob2RzIGFyZSByZXN0b3JlZCB0byB0aGUKICAgYGhlbHBlckNvbnRh
        aW5lcmAuCgogICAgQHByb3BlcnR5IG9yaWdpbmFsTWV0aG9kcwogICAgQHR5
        cGUge09iamVjdH0KICAgIEBkZWZhdWx0IHt9CiAgICBAcHJpdmF0ZQogICov
        CiAgb3JpZ2luYWxNZXRob2RzOiB7fSwKCgogIC8qKgogIFRoaXMgcHJvcGVy
        dHkgaW5kaWNhdGVzIHdoZXRoZXIgb3Igbm90IHRoaXMgYXBwbGljYXRpb24g
        aXMgY3VycmVudGx5IGluCiAgdGVzdGluZyBtb2RlLiBUaGlzIGlzIHNldCB3
        aGVuIGBzZXR1cEZvclRlc3RpbmdgIGlzIGNhbGxlZCBvbiB0aGUgY3VycmVu
        dAogIGFwcGxpY2F0aW9uLgoKICBAcHJvcGVydHkgdGVzdGluZwogIEB0eXBl
        IHtCb29sZWFufQogIEBkZWZhdWx0IGZhbHNlCiAgKi8KICB0ZXN0aW5nOiBm
        YWxzZSwKCiAgLyoqCiAgIFRoaXMgaG9vayBkZWZlcnMgdGhlIHJlYWRpbmVz
        cyBvZiB0aGUgYXBwbGljYXRpb24sIHNvIHRoYXQgeW91IGNhbiBzdGFydAog
        ICB0aGUgYXBwIHdoZW4geW91ciB0ZXN0cyBhcmUgcmVhZHkgdG8gcnVuLiBJ
        dCBhbHNvIHNldHMgdGhlIHJvdXRlcidzCiAgIGxvY2F0aW9uIHRvICdub25l
        Jywgc28gdGhhdCB0aGUgd2luZG93J3MgbG9jYXRpb24gd2lsbCBub3QgYmUg
        bW9kaWZpZWQKICAgKHByZXZlbnRpbmcgYm90aCBhY2NpZGVudGFsIGxlYWtp
        bmcgb2Ygc3RhdGUgYmV0d2VlbiB0ZXN0cyBhbmQgaW50ZXJmZXJlbmNlCiAg
        IHdpdGggeW91ciB0ZXN0aW5nIGZyYW1ld29yaykuCgogICBFeGFtcGxlOgoK
        ICBgYGAKICBBcHAuc2V0dXBGb3JUZXN0aW5nKCk7CiAgYGBgCgogICAgQG1l
        dGhvZCBzZXR1cEZvclRlc3RpbmcKICAqLwogIHNldHVwRm9yVGVzdGluZzog
        ZnVuY3Rpb24oKSB7CiAgICBFbWJlci5zZXR1cEZvclRlc3RpbmcoKTsKCiAg
        ICB0aGlzLnRlc3RpbmcgPSB0cnVlOwoKICAgIHRoaXMuUm91dGVyLnJlb3Bl
        bih7CiAgICAgIGxvY2F0aW9uOiAnbm9uZScKICAgIH0pOwoKICAgICAgfSwK
        CiAgLyoqCiAgICBUaGlzIHdpbGwgYmUgdXNlZCBhcyB0aGUgY29udGFpbmVy
        IHRvIGluamVjdCB0aGUgdGVzdCBoZWxwZXJzIGludG8uIEJ5CiAgICBkZWZh
        dWx0IHRoZSBoZWxwZXJzIGFyZSBpbmplY3RlZCBpbnRvIGB3aW5kb3dgLgoK
        ICAgIEBwcm9wZXJ0eSBoZWxwZXJDb250YWluZXIKICAgQHR5cGUge09iamVj
        dH0gVGhlIG9iamVjdCB0byBiZSB1c2VkIGZvciB0ZXN0IGhlbHBlcnMuCiAg
        IEBkZWZhdWx0IHdpbmRvdwogICovCiAgaGVscGVyQ29udGFpbmVyOiB3aW5k
        b3csCgogIC8qKgogICAgVGhpcyBpbmplY3RzIHRoZSB0ZXN0IGhlbHBlcnMg
        aW50byB0aGUgYGhlbHBlckNvbnRhaW5lcmAgb2JqZWN0LiBJZiBhbiBvYmpl
        Y3QgaXMgcHJvdmlkZWQKICAgIGl0IHdpbGwgYmUgdXNlZCBhcyB0aGUgaGVs
        cGVyQ29udGFpbmVyLiBJZiBgaGVscGVyQ29udGFpbmVyYCBpcyBub3Qgc2V0
        IGl0IHdpbGwgZGVmYXVsdAogICAgdG8gYHdpbmRvd2AuIElmIGEgZnVuY3Rp
        b24gb2YgdGhlIHNhbWUgbmFtZSBoYXMgYWxyZWFkeSBiZWVuIGRlZmluZWQg
        aXQgd2lsbCBiZSBjYWNoZWQKICAgIChzbyB0aGF0IGl0IGNhbiBiZSByZXNl
        dCBpZiB0aGUgaGVscGVyIGlzIHJlbW92ZWQgd2l0aCBgdW5yZWdpc3Rlckhl
        bHBlcmAgb3IKICAgIGByZW1vdmVUZXN0SGVscGVyc2ApLgoKICAgQW55IGNh
        bGxiYWNrcyByZWdpc3RlcmVkIHdpdGggYG9uSW5qZWN0SGVscGVyc2Agd2ls
        bCBiZSBjYWxsZWQgb25jZSB0aGUKICAgaGVscGVycyBoYXZlIGJlZW4gaW5q
        ZWN0ZWQuCgogIEV4YW1wbGU6CiAgYGBgCiAgQXBwLmluamVjdFRlc3RIZWxw
        ZXJzKCk7CiAgYGBgCgogICAgQG1ldGhvZCBpbmplY3RUZXN0SGVscGVycwog
        ICovCiAgaW5qZWN0VGVzdEhlbHBlcnM6IGZ1bmN0aW9uKGhlbHBlckNvbnRh
        aW5lcikgewogICAgaWYgKGhlbHBlckNvbnRhaW5lcikgeyB0aGlzLmhlbHBl
        ckNvbnRhaW5lciA9IGhlbHBlckNvbnRhaW5lcjsgfQoKICAgIHRoaXMudGVz
        dEhlbHBlcnMgPSB7fTsKICAgIGZvciAodmFyIG5hbWUgaW4gaGVscGVycykg
        ewogICAgICB0aGlzLm9yaWdpbmFsTWV0aG9kc1tuYW1lXSA9IHRoaXMuaGVs
        cGVyQ29udGFpbmVyW25hbWVdOwogICAgICB0aGlzLnRlc3RIZWxwZXJzW25h
        bWVdID0gdGhpcy5oZWxwZXJDb250YWluZXJbbmFtZV0gPSBoZWxwZXIodGhp
        cywgbmFtZSk7CiAgICAgIHByb3RvV3JhcChFbWJlci5UZXN0LlByb21pc2Uu
        cHJvdG90eXBlLCBuYW1lLCBoZWxwZXIodGhpcywgbmFtZSksIGhlbHBlcnNb
        bmFtZV0ubWV0YS53YWl0KTsKICAgIH0KCiAgICBmb3IodmFyIGkgPSAwLCBs
        ID0gaW5qZWN0SGVscGVyc0NhbGxiYWNrcy5sZW5ndGg7IGkgPCBsOyBpKysp
        IHsKICAgICAgaW5qZWN0SGVscGVyc0NhbGxiYWNrc1tpXSh0aGlzKTsKICAg
        IH0KICB9LAoKICAvKioKICAgIFRoaXMgcmVtb3ZlcyBhbGwgaGVscGVycyB0
        aGF0IGhhdmUgYmVlbiByZWdpc3RlcmVkLCBhbmQgcmVzZXRzIGFuZCBmdW5j
        dGlvbnMKICAgIHRoYXQgd2VyZSBvdmVycmlkZGVuIGJ5IHRoZSBoZWxwZXJz
        LgoKICAgIEV4YW1wbGU6CgogICAgYGBgamF2YXNjcmlwdAogICAgQXBwLnJl
        bW92ZVRlc3RIZWxwZXJzKCk7CiAgICBgYGAKCiAgICBAcHVibGljCiAgICBA
        bWV0aG9kIHJlbW92ZVRlc3RIZWxwZXJzCiAgKi8KICByZW1vdmVUZXN0SGVs
        cGVyczogZnVuY3Rpb24oKSB7CiAgICBmb3IgKHZhciBuYW1lIGluIGhlbHBl
        cnMpIHsKICAgICAgdGhpcy5oZWxwZXJDb250YWluZXJbbmFtZV0gPSB0aGlz
        Lm9yaWdpbmFsTWV0aG9kc1tuYW1lXTsKICAgICAgZGVsZXRlIHRoaXMudGVz
        dEhlbHBlcnNbbmFtZV07CiAgICAgIGRlbGV0ZSB0aGlzLm9yaWdpbmFsTWV0
        aG9kc1tuYW1lXTsKICAgIH0KICB9Cn0pOwoKLy8gVGhpcyBtZXRob2QgaXMg
        bm8gbG9uZ2VyIG5lZWRlZAovLyBCdXQgc3RpbGwgaGVyZSBmb3IgYmFja3dh
        cmRzIGNvbXBhdGliaWxpdHkKLy8gb2YgaGVscGVyIGNoYWluaW5nCmZ1bmN0
        aW9uIHByb3RvV3JhcChwcm90bywgbmFtZSwgY2FsbGJhY2ssIGlzQXN5bmMp
        IHsKICBwcm90b1tuYW1lXSA9IGZ1bmN0aW9uKCkgewogICAgdmFyIGFyZ3Mg
        PSBhcmd1bWVudHM7CiAgICBpZiAoaXNBc3luYykgewogICAgICByZXR1cm4g
        Y2FsbGJhY2suYXBwbHkodGhpcywgYXJncyk7CiAgICB9IGVsc2UgewogICAg
        ICByZXR1cm4gdGhpcy50aGVuKGZ1bmN0aW9uKCkgewogICAgICAgIHJldHVy
        biBjYWxsYmFjay5hcHBseSh0aGlzLCBhcmdzKTsKICAgICAgfSk7CiAgICB9
        CiAgfTsKfQoKRW1iZXIuVGVzdC5Qcm9taXNlID0gZnVuY3Rpb24oKSB7CiAg
        RW1iZXIuUlNWUC5Qcm9taXNlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAg
        RW1iZXIuVGVzdC5sYXN0UHJvbWlzZSA9IHRoaXM7Cn07CgpFbWJlci5UZXN0
        LlByb21pc2UucHJvdG90eXBlID0gRW1iZXIuY3JlYXRlKEVtYmVyLlJTVlAu
        UHJvbWlzZS5wcm90b3R5cGUpOwpFbWJlci5UZXN0LlByb21pc2UucHJvdG90
        eXBlLmNvbnN0cnVjdG9yID0gRW1iZXIuVGVzdC5Qcm9taXNlOwoKLy8gUGF0
        Y2ggYHRoZW5gIHRvIGlzb2xhdGUgYXN5bmMgbWV0aG9kcwovLyBzcGVjaWZp
        Y2FsbHkgYEVtYmVyLlRlc3QubGFzdFByb21pc2VgCnZhciBvcmlnaW5hbFRo
        ZW4gPSBFbWJlci5SU1ZQLlByb21pc2UucHJvdG90eXBlLnRoZW47CkVtYmVy
        LlRlc3QuUHJvbWlzZS5wcm90b3R5cGUudGhlbiA9IGZ1bmN0aW9uKG9uU3Vj
        Y2Vzcywgb25GYWlsdXJlKSB7CiAgcmV0dXJuIG9yaWdpbmFsVGhlbi5jYWxs
        KHRoaXMsIGZ1bmN0aW9uKHZhbCkgewogICAgcmV0dXJuIGlzb2xhdGUob25T
        dWNjZXNzLCB2YWwpOwogIH0sIG9uRmFpbHVyZSk7Cn07CgovLyBUaGlzIG1l
        dGhvZCBpc29sYXRlcyBuZXN0ZWQgYXN5bmMgbWV0aG9kcwovLyBzbyB0aGF0
        IHRoZXkgZG9uJ3QgY29uZmxpY3Qgd2l0aCBvdGhlciBsYXN0IHByb21pc2Vz
        LgovLwovLyAxLiBTZXQgYEVtYmVyLlRlc3QubGFzdFByb21pc2VgIHRvIG51
        bGwKLy8gMi4gSW52b2tlIG1ldGhvZAovLyAzLiBSZXR1cm4gdGhlIGxhc3Qg
        cHJvbWlzZSBjcmVhdGVkIGR1cmluZyBtZXRob2QKLy8gNC4gUmVzdG9yZSBg
        RW1iZXIuVGVzdC5sYXN0UHJvbWlzZWAgdG8gb3JpZ2luYWwgdmFsdWUKZnVu
        Y3Rpb24gaXNvbGF0ZShmbiwgdmFsKSB7CiAgdmFyIHZhbHVlLCBsYXN0UHJv
        bWlzZTsKCiAgLy8gUmVzZXQgbGFzdFByb21pc2UgZm9yIG5lc3RlZCBoZWxw
        ZXJzCiAgRW1iZXIuVGVzdC5sYXN0UHJvbWlzZSA9IG51bGw7CgogIHZhbHVl
        ID0gZm4odmFsKTsKCiAgbGFzdFByb21pc2UgPSBFbWJlci5UZXN0Lmxhc3RQ
        cm9taXNlOwoKICAvLyBJZiB0aGUgbWV0aG9kIHJldHVybmVkIGEgcHJvbWlz
        ZQogIC8vIHJldHVybiB0aGF0IHByb21pc2UuIElmIG5vdCwKICAvLyByZXR1
        cm4gdGhlIGxhc3QgYXN5bmMgaGVscGVyJ3MgcHJvbWlzZQogIGlmICgodmFs
        dWUgJiYgKHZhbHVlIGluc3RhbmNlb2YgRW1iZXIuVGVzdC5Qcm9taXNlKSkg
        fHwgIWxhc3RQcm9taXNlKSB7CiAgICByZXR1cm4gdmFsdWU7CiAgfSBlbHNl
        IHsKICAgIHJ1bihmdW5jdGlvbigpIHsKICAgICAgbGFzdFByb21pc2UgPSBF
        bWJlci5UZXN0LnJlc29sdmUobGFzdFByb21pc2UpLnRoZW4oZnVuY3Rpb24o
        KSB7CiAgICAgICAgcmV0dXJuIHZhbHVlOwogICAgICB9KTsKICAgIH0pOwog
        ICAgcmV0dXJuIGxhc3RQcm9taXNlOwogIH0KfQoKfSkoKTsKCgoKKGZ1bmN0
        aW9uKCkgewpFbWJlci5vbkxvYWQoJ0VtYmVyLkFwcGxpY2F0aW9uJywgZnVu
        Y3Rpb24oQXBwbGljYXRpb24pIHsKICBBcHBsaWNhdGlvbi5pbml0aWFsaXpl
        cih7CiAgICBuYW1lOiAnZGVmZXJSZWFkaW5lc3MgaW4gYHRlc3RpbmdgIG1v
        ZGUnLAoKICAgIGluaXRpYWxpemU6IGZ1bmN0aW9uKGNvbnRhaW5lciwgYXBw
        bGljYXRpb24pewogICAgICBpZiAoYXBwbGljYXRpb24udGVzdGluZykgewog
        ICAgICAgIGFwcGxpY2F0aW9uLmRlZmVyUmVhZGluZXNzKCk7CiAgICAgIH0K
        ICAgIH0KICB9KTsKCiAgfSk7Cgp9KSgpOwoKCgooZnVuY3Rpb24oKSB7Ci8q
        KgogIEBtb2R1bGUgZW1iZXIKICBAc3VibW9kdWxlIGVtYmVyLXRlc3RpbmcK
        ICovCgp2YXIgJCA9IEVtYmVyLiQ7CgovKioKICBUaGlzIG1ldGhvZCBjcmVh
        dGVzIGEgY2hlY2tib3ggYW5kIHRyaWdnZXJzIHRoZSBjbGljayBldmVudCB0
        byBmaXJlIHRoZQogIHBhc3NlZCBpbiBoYW5kbGVyLiBJdCBpcyB1c2VkIHRv
        IGNvcnJlY3QgZm9yIGEgYnVnIGluIG9sZGVyIHZlcnNpb25zCiAgb2YgalF1
        ZXJ5IChlLmcgMS44LjMpLgoKICBAcHJpdmF0ZQogIEBtZXRob2QgdGVzdENo
        ZWNrYm94Q2xpY2sKKi8KZnVuY3Rpb24gdGVzdENoZWNrYm94Q2xpY2soaGFu
        ZGxlcikgewogICQoJzxpbnB1dCB0eXBlPSJjaGVja2JveCI+JykKICAgIC5j
        c3MoeyBwb3NpdGlvbjogJ2Fic29sdXRlJywgbGVmdDogJy0xMDAwcHgnLCB0
        b3A6ICctMTAwMHB4JyB9KQogICAgLmFwcGVuZFRvKCdib2R5JykKICAgIC5v
        bignY2xpY2snLCBoYW5kbGVyKQogICAgLnRyaWdnZXIoJ2NsaWNrJykKICAg
        IC5yZW1vdmUoKTsKfQoKJChmdW5jdGlvbigpIHsKICAvKgogICAgRGV0ZXJt
        aW5lIHdoZXRoZXIgYSBjaGVja2JveCBjaGVja2VkIHVzaW5nIGpRdWVyeSdz
        ICJjbGljayIgbWV0aG9kIHdpbGwgaGF2ZQogICAgdGhlIGNvcnJlY3QgdmFs
        dWUgZm9yIGl0cyBjaGVja2VkIHByb3BlcnR5LgoKICAgIElmIHdlIGRldGVy
        bWluZSB0aGF0IHRoZSBjdXJyZW50IGpRdWVyeSB2ZXJzaW9uIGV4aGliaXRz
        IHRoaXMgYmVoYXZpb3IsCiAgICBwYXRjaCBpdCB0byB3b3JrIGNvcnJlY3Rs
        eSBhcyBpbiB0aGUgY29tbWl0IGZvciB0aGUgYWN0dWFsIGZpeDoKICAgIGh0
        dHBzOi8vZ2l0aHViLmNvbS9qcXVlcnkvanF1ZXJ5L2NvbW1pdC8xZmIyZjky
        LgogICovCiAgdGVzdENoZWNrYm94Q2xpY2soZnVuY3Rpb24oKSB7CiAgICBp
        ZiAoIXRoaXMuY2hlY2tlZCAmJiAhJC5ldmVudC5zcGVjaWFsLmNsaWNrKSB7
        CiAgICAgICQuZXZlbnQuc3BlY2lhbC5jbGljayA9IHsKICAgICAgICAvLyBG
        b3IgY2hlY2tib3gsIGZpcmUgbmF0aXZlIGV2ZW50IHNvIGNoZWNrZWQgc3Rh
        dGUgd2lsbCBiZSByaWdodAogICAgICAgIHRyaWdnZXI6IGZ1bmN0aW9uKCkg
        ewogICAgICAgICAgaWYgKCQubm9kZU5hbWUoIHRoaXMsICJpbnB1dCIgKSAm
        JiB0aGlzLnR5cGUgPT09ICJjaGVja2JveCIgJiYgdGhpcy5jbGljaykgewog
        ICAgICAgICAgICB0aGlzLmNsaWNrKCk7CiAgICAgICAgICAgIHJldHVybiBm
        YWxzZTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH07CiAgICB9CiAg
        fSk7CgogIC8vIFRyeSBhZ2FpbiB0byB2ZXJpZnkgdGhhdCB0aGUgcGF0Y2gg
        dG9vayBlZmZlY3Qgb3IgYmxvdyB1cC4KICB0ZXN0Q2hlY2tib3hDbGljayhm
        dW5jdGlvbigpIHsKICAgIEVtYmVyLndhcm4oImNsaWNrZWQgY2hlY2tib3hl
        cyBzaG91bGQgYmUgY2hlY2tlZCEgdGhlIGpRdWVyeSBwYXRjaCBkaWRuJ3Qg
        d29yayIsIHRoaXMuY2hlY2tlZCk7CiAgfSk7Cn0pOwoKfSkoKTsKCgoKKGZ1
        bmN0aW9uKCkgewovKioKIEBtb2R1bGUgZW1iZXIKIEBzdWJtb2R1bGUgZW1i
        ZXItdGVzdGluZwoqLwoKdmFyIFRlc3QgPSBFbWJlci5UZXN0OwoKLyoqCiAg
        VGhlIHByaW1hcnkgcHVycG9zZSBvZiB0aGlzIGNsYXNzIGlzIHRvIGNyZWF0
        ZSBob29rcyB0aGF0IGNhbiBiZSBpbXBsZW1lbnRlZAogIGJ5IGFuIGFkYXB0
        ZXIgZm9yIHZhcmlvdXMgdGVzdCBmcmFtZXdvcmtzLgoKICBAY2xhc3MgQWRh
        cHRlcgogIEBuYW1lc3BhY2UgRW1iZXIuVGVzdAoqLwpUZXN0LkFkYXB0ZXIg
        PSBFbWJlci5PYmplY3QuZXh0ZW5kKHsKICAvKioKICAgIFRoaXMgY2FsbGJh
        Y2sgd2lsbCBiZSBjYWxsZWQgd2hlbmV2ZXIgYW4gYXN5bmMgb3BlcmF0aW9u
        IGlzIGFib3V0IHRvIHN0YXJ0LgoKICAgIE92ZXJyaWRlIHRoaXMgdG8gY2Fs
        bCB5b3VyIGZyYW1ld29yaydzIG1ldGhvZHMgdGhhdCBoYW5kbGUgYXN5bmMK
        ICAgIG9wZXJhdGlvbnMuCgogICAgQHB1YmxpYwogICAgQG1ldGhvZCBhc3lu
        Y1N0YXJ0CiAgKi8KICBhc3luY1N0YXJ0OiBFbWJlci5LLAoKICAvKioKICAg
        IFRoaXMgY2FsbGJhY2sgd2lsbCBiZSBjYWxsZWQgd2hlbmV2ZXIgYW4gYXN5
        bmMgb3BlcmF0aW9uIGhhcyBjb21wbGV0ZWQuCgogICAgQHB1YmxpYwogICAg
        QG1ldGhvZCBhc3luY0VuZAogICovCiAgYXN5bmNFbmQ6IEVtYmVyLkssCgog
        IC8qKgogICAgT3ZlcnJpZGUgdGhpcyBtZXRob2Qgd2l0aCB5b3VyIHRlc3Rp
        bmcgZnJhbWV3b3JrJ3MgZmFsc2UgYXNzZXJ0aW9uLgogICAgVGhpcyBmdW5j
        dGlvbiBpcyBjYWxsZWQgd2hlbmV2ZXIgYW4gZXhjZXB0aW9uIG9jY3VycyBj
        YXVzaW5nIHRoZSB0ZXN0aW5nCiAgICBwcm9taXNlIHRvIGZhaWwuCgogICAg
        UVVuaXQgZXhhbXBsZToKCiAgICBgYGBqYXZhc2NyaXB0CiAgICAgIGV4Y2Vw
        dGlvbjogZnVuY3Rpb24oZXJyb3IpIHsKICAgICAgICBvayhmYWxzZSwgZXJy
        b3IpOwogICAgICB9OwogICAgYGBgCgogICAgQHB1YmxpYwogICAgQG1ldGhv
        ZCBleGNlcHRpb24KICAgIEBwYXJhbSB7U3RyaW5nfSBlcnJvciBUaGUgZXhj
        ZXB0aW9uIHRvIGJlIHJhaXNlZC4KICAqLwogIGV4Y2VwdGlvbjogZnVuY3Rp
        b24oZXJyb3IpIHsKICAgIHRocm93IGVycm9yOwogIH0KfSk7CgovKioKICBU
        aGlzIGNsYXNzIGltcGxlbWVudHMgdGhlIG1ldGhvZHMgZGVmaW5lZCBieSBF
        bWJlci5UZXN0LkFkYXB0ZXIgZm9yIHRoZQogIFFVbml0IHRlc3RpbmcgZnJh
        bWV3b3JrLgoKICBAY2xhc3MgUVVuaXRBZGFwdGVyCiAgQG5hbWVzcGFjZSBF
        bWJlci5UZXN0CiAgQGV4dGVuZHMgRW1iZXIuVGVzdC5BZGFwdGVyCiovClRl
        c3QuUVVuaXRBZGFwdGVyID0gVGVzdC5BZGFwdGVyLmV4dGVuZCh7CiAgYXN5
        bmNTdGFydDogZnVuY3Rpb24oKSB7CiAgICBzdG9wKCk7CiAgfSwKICBhc3lu
        Y0VuZDogZnVuY3Rpb24oKSB7CiAgICBzdGFydCgpOwogIH0sCiAgZXhjZXB0
        aW9uOiBmdW5jdGlvbihlcnJvcikgewogICAgb2soZmFsc2UsIEVtYmVyLmlu
        c3BlY3QoZXJyb3IpKTsKICB9Cn0pOwoKfSkoKTsKCgoKKGZ1bmN0aW9uKCkg
        ewovKioKKiBAbW9kdWxlIGVtYmVyCiogQHN1Ym1vZHVsZSBlbWJlci10ZXN0
        aW5nCiovCgp2YXIgZ2V0ID0gRW1iZXIuZ2V0LAogICAgVGVzdCA9IEVtYmVy
        LlRlc3QsCiAgICBoZWxwZXIgPSBUZXN0LnJlZ2lzdGVySGVscGVyLAogICAg
        YXN5bmNIZWxwZXIgPSBUZXN0LnJlZ2lzdGVyQXN5bmNIZWxwZXIsCiAgICBj
        b3VudEFzeW5jID0gMDsKClRlc3QucGVuZGluZ0FqYXhSZXF1ZXN0cyA9IDA7
        CgpUZXN0Lm9uSW5qZWN0SGVscGVycyhmdW5jdGlvbigpIHsKICBFbWJlci4k
        KGRvY3VtZW50KS5hamF4U3RhcnQoZnVuY3Rpb24oKSB7CiAgICBUZXN0LnBl
        bmRpbmdBamF4UmVxdWVzdHMrKzsKICB9KTsKCiAgRW1iZXIuJChkb2N1bWVu
        dCkuYWpheFN0b3AoZnVuY3Rpb24oKSB7CiAgICBFbWJlci5hc3NlcnQoIkFu
        IGFqYXhTdG9wIGV2ZW50IHdoaWNoIHdvdWxkIGNhdXNlIHRoZSBudW1iZXIg
        b2YgcGVuZGluZyBBSkFYICIgKwogICAgICAgICAgICAgICAgICJyZXF1ZXN0
        cyB0byBiZSBuZWdhdGl2ZSBoYXMgYmVlbiB0cmlnZ2VyZWQuIFRoaXMgaXMg
        bW9zdCBsaWtlbHkgIiArCiAgICAgICAgICAgICAgICAgImNhdXNlZCBieSBB
        SkFYIGV2ZW50cyB0aGF0IHdlcmUgc3RhcnRlZCBiZWZvcmUgY2FsbGluZyAi
        ICsKICAgICAgICAgICAgICAgICAiYGluamVjdFRlc3RIZWxwZXJzKClgLiIs
        IFRlc3QucGVuZGluZ0FqYXhSZXF1ZXN0cyAhPT0gMCk7CiAgICBUZXN0LnBl
        bmRpbmdBamF4UmVxdWVzdHMtLTsKICB9KTsKfSk7CgpmdW5jdGlvbiBjdXJy
        ZW50Um91dGVOYW1lKGFwcCl7CiAgdmFyIGFwcENvbnRyb2xsZXIgPSBhcHAu
        X19jb250YWluZXJfXy5sb29rdXAoJ2NvbnRyb2xsZXI6YXBwbGljYXRpb24n
        KTsKCiAgcmV0dXJuIGdldChhcHBDb250cm9sbGVyLCAnY3VycmVudFJvdXRl
        TmFtZScpOwp9CgpmdW5jdGlvbiBjdXJyZW50UGF0aChhcHApewogIHZhciBh
        cHBDb250cm9sbGVyID0gYXBwLl9fY29udGFpbmVyX18ubG9va3VwKCdjb250
        cm9sbGVyOmFwcGxpY2F0aW9uJyk7CgogIHJldHVybiBnZXQoYXBwQ29udHJv
        bGxlciwgJ2N1cnJlbnRQYXRoJyk7Cn0KCmZ1bmN0aW9uIGN1cnJlbnRVUkwo
        YXBwKXsKICB2YXIgcm91dGVyID0gYXBwLl9fY29udGFpbmVyX18ubG9va3Vw
        KCdyb3V0ZXI6bWFpbicpOwoKICByZXR1cm4gZ2V0KHJvdXRlciwgJ2xvY2F0
        aW9uJykuZ2V0VVJMKCk7Cn0KCmZ1bmN0aW9uIHZpc2l0KGFwcCwgdXJsKSB7
        CiAgdmFyIHJvdXRlciA9IGFwcC5fX2NvbnRhaW5lcl9fLmxvb2t1cCgncm91
        dGVyOm1haW4nKTsKICByb3V0ZXIubG9jYXRpb24uc2V0VVJMKHVybCk7Cgog
        IGlmIChhcHAuX3JlYWRpbmVzc0RlZmVycmFscyA+IDApIHsKICAgIHJvdXRl
        clsnaW5pdGlhbFVSTCddID0gdXJsOwogICAgRW1iZXIucnVuKGFwcCwgJ2Fk
        dmFuY2VSZWFkaW5lc3MnKTsKICAgIGRlbGV0ZSByb3V0ZXJbJ2luaXRpYWxV
        UkwnXTsKICB9IGVsc2UgewogICAgRW1iZXIucnVuKGFwcCwgYXBwLmhhbmRs
        ZVVSTCwgdXJsKTsKICB9CgogIHJldHVybiB3YWl0KGFwcCk7Cn0KCmZ1bmN0
        aW9uIGNsaWNrKGFwcCwgc2VsZWN0b3IsIGNvbnRleHQpIHsKICB2YXIgJGVs
        ID0gZmluZFdpdGhBc3NlcnQoYXBwLCBzZWxlY3RvciwgY29udGV4dCk7CiAg
        RW1iZXIucnVuKCRlbCwgJ21vdXNlZG93bicpOwoKICBpZiAoJGVsLmlzKCc6
        aW5wdXQnKSkgewogICAgdmFyIHR5cGUgPSAkZWwucHJvcCgndHlwZScpOwog
        ICAgaWYgKHR5cGUgIT09ICdjaGVja2JveCcgJiYgdHlwZSAhPT0gJ3JhZGlv
        JyAmJiB0eXBlICE9PSAnaGlkZGVuJykgewogICAgICBFbWJlci5ydW4oJGVs
        LCBmdW5jdGlvbigpewogICAgICAgIC8vIEZpcmVmb3ggZG9lcyBub3QgdHJp
        Z2dlciB0aGUgYGZvY3VzaW5gIGV2ZW50IGlmIHRoZSB3aW5kb3cKICAgICAg
        ICAvLyBkb2VzIG5vdCBoYXZlIGZvY3VzLiBJZiB0aGUgZG9jdW1lbnQgZG9l
        c24ndCBoYXZlIGZvY3VzIGp1c3QKICAgICAgICAvLyB1c2UgdHJpZ2dlcign
        Zm9jdXNpbicpIGluc3RlYWQuCiAgICAgICAgaWYgKCFkb2N1bWVudC5oYXNG
        b2N1cyB8fCBkb2N1bWVudC5oYXNGb2N1cygpKSB7CiAgICAgICAgICB0aGlz
        LmZvY3VzKCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMudHJp
        Z2dlcignZm9jdXNpbicpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAg
        fQoKICBFbWJlci5ydW4oJGVsLCAnbW91c2V1cCcpOwogIEVtYmVyLnJ1bigk
        ZWwsICdjbGljaycpOwoKICByZXR1cm4gd2FpdChhcHApOwp9CgpmdW5jdGlv
        biB0cmlnZ2VyRXZlbnQoYXBwLCBzZWxlY3RvciwgY29udGV4dCwgdHlwZSwg
        b3B0aW9ucyl7CiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDMpIHsKICAg
        IHR5cGUgPSBjb250ZXh0OwogICAgY29udGV4dCA9IG51bGw7CiAgfQoKICBp
        ZiAodHlwZW9mIG9wdGlvbnMgPT09ICd1bmRlZmluZWQnKSB7CiAgICBvcHRp
        b25zID0ge307CiAgfQoKICB2YXIgJGVsID0gZmluZFdpdGhBc3NlcnQoYXBw
        LCBzZWxlY3RvciwgY29udGV4dCk7CgogIHZhciBldmVudCA9IEVtYmVyLiQu
        RXZlbnQodHlwZSwgb3B0aW9ucyk7CgogIEVtYmVyLnJ1bigkZWwsICd0cmln
        Z2VyJywgZXZlbnQpOwoKICByZXR1cm4gd2FpdChhcHApOwp9CgpmdW5jdGlv
        biBrZXlFdmVudChhcHAsIHNlbGVjdG9yLCBjb250ZXh0LCB0eXBlLCBrZXlD
        b2RlKSB7CiAgaWYgKHR5cGVvZiBrZXlDb2RlID09PSAndW5kZWZpbmVkJykg
        ewogICAga2V5Q29kZSA9IHR5cGU7CiAgICB0eXBlID0gY29udGV4dDsKICAg
        IGNvbnRleHQgPSBudWxsOwogIH0KCiAgcmV0dXJuIHRyaWdnZXJFdmVudChh
        cHAsIHNlbGVjdG9yLCBjb250ZXh0LCB0eXBlLCB7IGtleUNvZGU6IGtleUNv
        ZGUgfSk7Cn0KCmZ1bmN0aW9uIGZpbGxJbihhcHAsIHNlbGVjdG9yLCBjb250
        ZXh0LCB0ZXh0KSB7CiAgdmFyICRlbDsKICBpZiAodHlwZW9mIHRleHQgPT09
        ICd1bmRlZmluZWQnKSB7CiAgICB0ZXh0ID0gY29udGV4dDsKICAgIGNvbnRl
        eHQgPSBudWxsOwogIH0KICAkZWwgPSBmaW5kV2l0aEFzc2VydChhcHAsIHNl
        bGVjdG9yLCBjb250ZXh0KTsKICBFbWJlci5ydW4oZnVuY3Rpb24oKSB7CiAg
        ICAkZWwudmFsKHRleHQpLmNoYW5nZSgpOwogIH0pOwogIHJldHVybiB3YWl0
        KGFwcCk7Cn0KCmZ1bmN0aW9uIGZpbmRXaXRoQXNzZXJ0KGFwcCwgc2VsZWN0
        b3IsIGNvbnRleHQpIHsKICB2YXIgJGVsID0gZmluZChhcHAsIHNlbGVjdG9y
        LCBjb250ZXh0KTsKICBpZiAoJGVsLmxlbmd0aCA9PT0gMCkgewogICAgdGhy
        b3cgbmV3IEVtYmVyLkVycm9yKCJFbGVtZW50ICIgKyBzZWxlY3RvciArICIg
        bm90IGZvdW5kLiIpOwogIH0KICByZXR1cm4gJGVsOwp9CgpmdW5jdGlvbiBm
        aW5kKGFwcCwgc2VsZWN0b3IsIGNvbnRleHQpIHsKICB2YXIgJGVsOwogIGNv
        bnRleHQgPSBjb250ZXh0IHx8IGdldChhcHAsICdyb290RWxlbWVudCcpOwog
        ICRlbCA9IGFwcC4kKHNlbGVjdG9yLCBjb250ZXh0KTsKCiAgcmV0dXJuICRl
        bDsKfQoKZnVuY3Rpb24gYW5kVGhlbihhcHAsIGNhbGxiYWNrKSB7CiAgcmV0
        dXJuIHdhaXQoYXBwLCBjYWxsYmFjayhhcHApKTsKfQoKZnVuY3Rpb24gd2Fp
        dChhcHAsIHZhbHVlKSB7CiAgcmV0dXJuIFRlc3QucHJvbWlzZShmdW5jdGlv
        bihyZXNvbHZlKSB7CiAgICAvLyBJZiB0aGlzIGlzIHRoZSBmaXJzdCBhc3lu
        YyBwcm9taXNlLCBraWNrIG9mZiB0aGUgYXN5bmMgdGVzdAogICAgaWYgKCsr
        Y291bnRBc3luYyA9PT0gMSkgewogICAgICBUZXN0LmFkYXB0ZXIuYXN5bmNT
        dGFydCgpOwogICAgfQoKICAgIC8vIEV2ZXJ5IDEwbXMsIHBvbGwgZm9yIHRo
        ZSBhc3luYyB0aGluZyB0byBoYXZlIGZpbmlzaGVkCiAgICB2YXIgd2F0Y2hl
        ciA9IHNldEludGVydmFsKGZ1bmN0aW9uKCkgewogICAgICAvLyAxLiBJZiB0
        aGUgcm91dGVyIGlzIGxvYWRpbmcsIGtlZXAgcG9sbGluZwogICAgICB2YXIg
        cm91dGVySXNMb2FkaW5nID0gISFhcHAuX19jb250YWluZXJfXy5sb29rdXAo
        J3JvdXRlcjptYWluJykucm91dGVyLmFjdGl2ZVRyYW5zaXRpb247CiAgICAg
        IGlmIChyb3V0ZXJJc0xvYWRpbmcpIHsgcmV0dXJuOyB9CgogICAgICAvLyAy
        LiBJZiB0aGVyZSBhcmUgcGVuZGluZyBBamF4IHJlcXVlc3RzLCBrZWVwIHBv
        bGxpbmcKICAgICAgaWYgKFRlc3QucGVuZGluZ0FqYXhSZXF1ZXN0cykgeyBy
        ZXR1cm47IH0KCiAgICAgIC8vIDMuIElmIHRoZXJlIGFyZSBzY2hlZHVsZWQg
        dGltZXJzIG9yIHdlIGFyZSBpbnNpZGUgb2YgYSBydW4gbG9vcCwga2VlcCBw
        b2xsaW5nCiAgICAgIGlmIChFbWJlci5ydW4uaGFzU2NoZWR1bGVkVGltZXJz
        KCkgfHwgRW1iZXIucnVuLmN1cnJlbnRSdW5Mb29wKSB7IHJldHVybjsgfQog
        ICAgICBpZiAoVGVzdC53YWl0ZXJzICYmIFRlc3Qud2FpdGVycy5hbnkoZnVu
        Y3Rpb24od2FpdGVyKSB7CiAgICAgICAgdmFyIGNvbnRleHQgPSB3YWl0ZXJb
        MF07CiAgICAgICAgdmFyIGNhbGxiYWNrID0gd2FpdGVyWzFdOwogICAgICAg
        IHJldHVybiAhY2FsbGJhY2suY2FsbChjb250ZXh0KTsKICAgICAgfSkpIHsg
        cmV0dXJuOyB9CiAgICAgIC8vIFN0b3AgcG9sbGluZwogICAgICBjbGVhcklu
        dGVydmFsKHdhdGNoZXIpOwoKICAgICAgLy8gSWYgdGhpcyBpcyB0aGUgbGFz
        dCBhc3luYyBwcm9taXNlLCBlbmQgdGhlIGFzeW5jIHRlc3QKICAgICAgaWYg
        KC0tY291bnRBc3luYyA9PT0gMCkgewogICAgICAgIFRlc3QuYWRhcHRlci5h
        c3luY0VuZCgpOwogICAgICB9CgogICAgICAvLyBTeW5jaHJvbm91c2x5IHJl
        c29sdmUgdGhlIHByb21pc2UKICAgICAgRW1iZXIucnVuKG51bGwsIHJlc29s
        dmUsIHZhbHVlKTsKICAgIH0sIDEwKTsKICB9KTsKCn0KCgovKioKKiBMb2Fk
        cyBhIHJvdXRlLCBzZXRzIHVwIGFueSBjb250cm9sbGVycywgYW5kIHJlbmRl
        cnMgYW55IHRlbXBsYXRlcyBhc3NvY2lhdGVkCiogd2l0aCB0aGUgcm91dGUg
        YXMgdGhvdWdoIGEgcmVhbCB1c2VyIGhhZCB0cmlnZ2VyZWQgdGhlIHJvdXRl
        IGNoYW5nZSB3aGlsZQoqIHVzaW5nIHlvdXIgYXBwLgoqCiogRXhhbXBsZToK
        KgoqIGBgYGphdmFzY3JpcHQKKiB2aXNpdCgncG9zdHMvaW5kZXgnKS50aGVu
        KGZ1bmN0aW9uKCkgewoqICAgLy8gYXNzZXJ0IHNvbWV0aGluZwoqIH0pOwoq
        IGBgYAoqCiogQG1ldGhvZCB2aXNpdAoqIEBwYXJhbSB7U3RyaW5nfSB1cmwg
        dGhlIG5hbWUgb2YgdGhlIHJvdXRlCiogQHJldHVybiB7UlNWUC5Qcm9taXNl
        fQoqLwphc3luY0hlbHBlcigndmlzaXQnLCB2aXNpdCk7CgovKioKKiBDbGlj
        a3MgYW4gZWxlbWVudCBhbmQgdHJpZ2dlcnMgYW55IGFjdGlvbnMgdHJpZ2dl
        cmVkIGJ5IHRoZSBlbGVtZW50J3MgYGNsaWNrYAoqIGV2ZW50LgoqCiogRXhh
        bXBsZToKKgoqIGBgYGphdmFzY3JpcHQKKiBjbGljaygnLnNvbWUtalF1ZXJ5
        LXNlbGVjdG9yJykudGhlbihmdW5jdGlvbigpIHsKKiAgIC8vIGFzc2VydCBz
        b21ldGhpbmcKKiB9KTsKKiBgYGAKKgoqIEBtZXRob2QgY2xpY2sKKiBAcGFy
        YW0ge1N0cmluZ30gc2VsZWN0b3IgalF1ZXJ5IHNlbGVjdG9yIGZvciBmaW5k
        aW5nIGVsZW1lbnQgb24gdGhlIERPTQoqIEByZXR1cm4ge1JTVlAuUHJvbWlz
        ZX0KKi8KYXN5bmNIZWxwZXIoJ2NsaWNrJywgY2xpY2spOwoKLyoqCiogU2lt
        dWxhdGVzIGEga2V5IGV2ZW50LCBlLmcuIGBrZXlwcmVzc2AsIGBrZXlkb3du
        YCwgYGtleXVwYCB3aXRoIHRoZSBkZXNpcmVkIGtleUNvZGUKKgoqIEV4YW1w
        bGU6CioKKiBgYGBqYXZhc2NyaXB0Cioga2V5RXZlbnQoJy5zb21lLWpRdWVy
        eS1zZWxlY3RvcicsICdrZXlwcmVzcycsIDEzKS50aGVuKGZ1bmN0aW9uKCkg
        ewoqICAvLyBhc3NlcnQgc29tZXRoaW5nCiogfSk7CiogYGBgCioKKiBAbWV0
        aG9kIGtleUV2ZW50CiogQHBhcmFtIHtTdHJpbmd9IHNlbGVjdG9yIGpRdWVy
        eSBzZWxlY3RvciBmb3IgZmluZGluZyBlbGVtZW50IG9uIHRoZSBET00KKiBA
        cGFyYW0ge1N0cmluZ30gdHlwZSB0aGUgdHlwZSBvZiBrZXkgZXZlbnQsIGUu
        Zy4gYGtleXByZXNzYCwgYGtleWRvd25gLCBga2V5dXBgCiogQHBhcmFtIHtO
        dW1iZXJ9IGtleUNvZGUgdGhlIGtleUNvZGUgb2YgdGhlIHNpbXVsYXRlZCBr
        ZXkgZXZlbnQKKiBAcmV0dXJuIHtSU1ZQLlByb21pc2V9CiovCmFzeW5jSGVs
        cGVyKCdrZXlFdmVudCcsIGtleUV2ZW50KTsKCi8qKgoqIEZpbGxzIGluIGFu
        IGlucHV0IGVsZW1lbnQgd2l0aCBzb21lIHRleHQuCioKKiBFeGFtcGxlOgoq
        CiogYGBgamF2YXNjcmlwdAoqIGZpbGxJbignI2VtYWlsJywgJ3lvdUBleGFt
        cGxlLmNvbScpLnRoZW4oZnVuY3Rpb24oKSB7CiogICAvLyBhc3NlcnQgc29t
        ZXRoaW5nCiogfSk7CiogYGBgCioKKiBAbWV0aG9kIGZpbGxJbgoqIEBwYXJh
        bSB7U3RyaW5nfSBzZWxlY3RvciBqUXVlcnkgc2VsZWN0b3IgZmluZGluZyBh
        biBpbnB1dCBlbGVtZW50IG9uIHRoZSBET00KKiB0byBmaWxsIHRleHQgd2l0
        aAoqIEBwYXJhbSB7U3RyaW5nfSB0ZXh0IHRleHQgdG8gcGxhY2UgaW5zaWRl
        IHRoZSBpbnB1dCBlbGVtZW50CiogQHJldHVybiB7UlNWUC5Qcm9taXNlfQoq
        Lwphc3luY0hlbHBlcignZmlsbEluJywgZmlsbEluKTsKCi8qKgoqIEZpbmRz
        IGFuIGVsZW1lbnQgaW4gdGhlIGNvbnRleHQgb2YgdGhlIGFwcCdzIGNvbnRh
        aW5lciBlbGVtZW50LiBBIHNpbXBsZSBhbGlhcwoqIGZvciBgYXBwLiQoc2Vs
        ZWN0b3IpYC4KKgoqIEV4YW1wbGU6CioKKiBgYGBqYXZhc2NyaXB0CiogdmFy
        ICRlbCA9IGZpbmQoJy5teS1zZWxlY3RvcicpOwoqIGBgYAoqCiogQG1ldGhv
        ZCBmaW5kCiogQHBhcmFtIHtTdHJpbmd9IHNlbGVjdG9yIGpRdWVyeSBzdHJp
        bmcgc2VsZWN0b3IgZm9yIGVsZW1lbnQgbG9va3VwCiogQHJldHVybiB7T2Jq
        ZWN0fSBqUXVlcnkgb2JqZWN0IHJlcHJlc2VudGluZyB0aGUgcmVzdWx0cyBv
        ZiB0aGUgcXVlcnkKKi8KaGVscGVyKCdmaW5kJywgZmluZCk7CgovKioKKiBM
        aWtlIGBmaW5kYCwgYnV0IHRocm93cyBhbiBlcnJvciBpZiB0aGUgZWxlbWVu
        dCBzZWxlY3RvciByZXR1cm5zIG5vIHJlc3VsdHMuCioKKiBFeGFtcGxlOgoq
        CiogYGBgamF2YXNjcmlwdAoqIHZhciAkZWwgPSBmaW5kV2l0aEFzc2VydCgn
        LmRvZXNudC1leGlzdCcpOyAvLyB0aHJvd3MgZXJyb3IKKiBgYGAKKgoqIEBt
        ZXRob2QgZmluZFdpdGhBc3NlcnQKKiBAcGFyYW0ge1N0cmluZ30gc2VsZWN0
        b3IgalF1ZXJ5IHNlbGVjdG9yIHN0cmluZyBmb3IgZmluZGluZyBhbiBlbGVt
        ZW50IHdpdGhpbgoqIHRoZSBET00KKiBAcmV0dXJuIHtPYmplY3R9IGpRdWVy
        eSBvYmplY3QgcmVwcmVzZW50aW5nIHRoZSByZXN1bHRzIG9mIHRoZSBxdWVy
        eQoqIEB0aHJvd3Mge0Vycm9yfSB0aHJvd3MgZXJyb3IgaWYgalF1ZXJ5IG9i
        amVjdCByZXR1cm5lZCBoYXMgYSBsZW5ndGggb2YgMAoqLwpoZWxwZXIoJ2Zp
        bmRXaXRoQXNzZXJ0JywgZmluZFdpdGhBc3NlcnQpOwoKLyoqCiAgQ2F1c2Vz
        IHRoZSBydW4gbG9vcCB0byBwcm9jZXNzIGFueSBwZW5kaW5nIGV2ZW50cy4g
        VGhpcyBpcyB1c2VkIHRvIGVuc3VyZSB0aGF0CiAgYW55IGFzeW5jIG9wZXJh
        dGlvbnMgZnJvbSBvdGhlciBoZWxwZXJzIChvciB5b3VyIGFzc2VydGlvbnMp
        IGhhdmUgYmVlbiBwcm9jZXNzZWQuCgogIFRoaXMgaXMgbW9zdCBvZnRlbiB1
        c2VkIGFzIHRoZSByZXR1cm4gdmFsdWUgZm9yIHRoZSBoZWxwZXIgZnVuY3Rp
        b25zIChzZWUgJ2NsaWNrJywKICAnZmlsbEluJywndmlzaXQnLGV0YykuCgog
        IEV4YW1wbGU6CgogIGBgYGphdmFzY3JpcHQKICBFbWJlci5UZXN0LnJlZ2lz
        dGVyQXN5bmNIZWxwZXIoJ2xvZ2luVXNlcicsIGZ1bmN0aW9uKGFwcCwgdXNl
        cm5hbWUsIHBhc3N3b3JkKSB7CiAgICB2aXNpdCgnc2VjdXJlZC9wYXRoL2hl
        cmUnKQogICAgLmZpbGxJbignI3VzZXJuYW1lJywgdXNlcm5hbWUpCiAgICAu
        ZmlsbEluKCcjcGFzc3dvcmQnLCB1c2VybmFtZSkKICAgIC5jbGljaygnLnN1
        Ym1pdCcpCgogICAgcmV0dXJuIHdhaXQoKTsKICB9KTsKCiAgQG1ldGhvZCB3
        YWl0CiAgQHBhcmFtIHtPYmplY3R9IHZhbHVlIFRoZSB2YWx1ZSB0byBiZSBy
        ZXR1cm5lZC4KICBAcmV0dXJuIHtSU1ZQLlByb21pc2V9CiovCmFzeW5jSGVs
        cGVyKCd3YWl0Jywgd2FpdCk7CmFzeW5jSGVscGVyKCdhbmRUaGVuJywgYW5k
        VGhlbik7CgoKCiAgLyoqCiAgICBSZXR1cm5zIHRoZSBjdXJyZW50bHkgYWN0
        aXZlIHJvdXRlIG5hbWUuCgogICAgRXhhbXBsZToKCiAgICBgYGBqYXZhc2Ny
        aXB0CiAgICBmdW5jdGlvbiB2YWxpZGF0ZVJvdXRlTmFtZSgpewogICAgICBl
        cXVhbChjdXJyZW50Um91dGVOYW1lKCksICdzb21lLnBhdGgnLCAiY29ycmVj
        dCByb3V0ZSB3YXMgdHJhbnNpdGlvbmVkIGludG8uIik7CiAgICB9CgogICAg
        dmlzaXQoJy9zb21lL3BhdGgnKS50aGVuKHZhbGlkYXRlUm91dGVOYW1lKQog
        ICAgYGBgCgogICAgQG1ldGhvZCBjdXJyZW50Um91dGVOYW1lCiAgICBAcmV0
        dXJuIHtPYmplY3R9IFRoZSBuYW1lIG9mIHRoZSBjdXJyZW50bHkgYWN0aXZl
        IHJvdXRlLgogICovCiAgaGVscGVyKCdjdXJyZW50Um91dGVOYW1lJywgY3Vy
        cmVudFJvdXRlTmFtZSk7CgogIC8qKgogICAgUmV0dXJucyB0aGUgY3VycmVu
        dCBwYXRoLgoKICAgIEV4YW1wbGU6CgogICAgYGBgamF2YXNjcmlwdAogICAg
        ZnVuY3Rpb24gdmFsaWRhdGVVUkwoKXsKICAgICAgZXF1YWwoY3VycmVudFBh
        dGgoKSwgJ3NvbWUucGF0aC5pbmRleCcsICJjb3JyZWN0IHBhdGggd2FzIHRy
        YW5zaXRpb25lZCBpbnRvLiIpOwogICAgfQoKICAgIGNsaWNrKCcjc29tZS1s
        aW5rLWlkJykudGhlbih2YWxpZGF0ZVVSTCk7CiAgICBgYGAKCiAgICBAbWV0
        aG9kIGN1cnJlbnRQYXRoCiAgICBAcmV0dXJuIHtPYmplY3R9IFRoZSBjdXJy
        ZW50bHkgYWN0aXZlIHBhdGguCiAgKi8KICBoZWxwZXIoJ2N1cnJlbnRQYXRo
        JywgY3VycmVudFBhdGgpOwoKICAvKioKICAgIFJldHVybnMgdGhlIGN1cnJl
        bnQgVVJMLgoKICAgIEV4YW1wbGU6CgogICAgYGBgamF2YXNjcmlwdAogICAg
        ZnVuY3Rpb24gdmFsaWRhdGVVUkwoKXsKICAgICAgZXF1YWwoY3VycmVudFVS
        TCgpLCAnL3NvbWUvcGF0aCcsICJjb3JyZWN0IFVSTCB3YXMgdHJhbnNpdGlv
        bmVkIGludG8uIik7CiAgICB9CgogICAgY2xpY2soJyNzb21lLWxpbmstaWQn
        KS50aGVuKHZhbGlkYXRlVVJMKTsKICAgIGBgYAoKICAgIEBtZXRob2QgY3Vy
        cmVudFVSTAogICAgQHJldHVybiB7T2JqZWN0fSBUaGUgY3VycmVudGx5IGFj
        dGl2ZSBVUkwuCiAgKi8KICBoZWxwZXIoJ2N1cnJlbnRVUkwnLCBjdXJyZW50
        VVJMKTsKCgoKICAvKioKICAgIFRyaWdnZXJzIHRoZSBnaXZlbiBldmVudCBv
        biB0aGUgZWxlbWVudCBpZGVudGlmaWVkIGJ5IHRoZSBwcm92aWRlZCBzZWxl
        Y3Rvci4KCiAgICBFeGFtcGxlOgoKICAgIGBgYGphdmFzY3JpcHQKICAgIHRy
        aWdnZXJFdmVudCgnI3NvbWUtZWxlbS1pZCcsICdibHVyJyk7CiAgICBgYGAK
        CiAgICBUaGlzIGlzIGFjdHVhbGx5IHVzZWQgaW50ZXJuYWxseSBieSB0aGUg
        YGtleUV2ZW50YCBoZWxwZXIgbGlrZSBzbzoKCiAgICBgYGBqYXZhc2NyaXB0
        CiAgICB0cmlnZ2VyRXZlbnQoJyNzb21lLWVsZW0taWQnLCAna2V5cHJlc3Mn
        LCB7IGtleUNvZGU6IDEzIH0pOwogICAgYGBgCgogICBAbWV0aG9kIHRyaWdn
        ZXJFdmVudAogICBAcGFyYW0ge1N0cmluZ30gc2VsZWN0b3IgalF1ZXJ5IHNl
        bGVjdG9yIGZvciBmaW5kaW5nIGVsZW1lbnQgb24gdGhlIERPTQogICBAcGFy
        YW0ge1N0cmluZ30gdHlwZSBUaGUgZXZlbnQgdHlwZSB0byBiZSB0cmlnZ2Vy
        ZWQuCiAgIEBwYXJhbSB7U3RyaW5nfSBvcHRpb25zIFRoZSBvcHRpb25zIHRv
        IGJlIHBhc3NlZCB0byBqUXVlcnkuRXZlbnQuCiAgIEByZXR1cm4ge1JTVlAu
        UHJvbWlzZX0KICAqLwogIGFzeW5jSGVscGVyKCd0cmlnZ2VyRXZlbnQnLCB0
        cmlnZ2VyRXZlbnQpOwoKCn0pKCk7CgoKCihmdW5jdGlvbigpIHsKLyoqCiAg
        RW1iZXIgVGVzdGluZwoKICBAbW9kdWxlIGVtYmVyCiAgQHN1Ym1vZHVsZSBl
        bWJlci10ZXN0aW5nCiAgQHJlcXVpcmVzIGVtYmVyLWFwcGxpY2F0aW9uCiov
        Cgp9KSgpOwoKKGZ1bmN0aW9uKCkgewovKioKRW1iZXIKCkBtb2R1bGUgZW1i
        ZXIKKi8KCmZ1bmN0aW9uIHRocm93V2l0aE1lc3NhZ2UobXNnKSB7CiAgcmV0
        dXJuIGZ1bmN0aW9uKCkgewogICAgdGhyb3cgbmV3IEVtYmVyLkVycm9yKG1z
        Zyk7CiAgfTsKfQoKZnVuY3Rpb24gZ2VuZXJhdGVSZW1vdmVkQ2xhc3MoY2xh
        c3NOYW1lKSB7CiAgdmFyIG1zZyA9ICIgaGFzIGJlZW4gbW92ZWQgaW50byBh
        IHBsdWdpbjogaHR0cHM6Ly9naXRodWIuY29tL2VtYmVyanMvZW1iZXItc3Rh
        dGVzIjsKCiAgcmV0dXJuIHsKICAgIGV4dGVuZDogdGhyb3dXaXRoTWVzc2Fn
        ZShjbGFzc05hbWUgKyBtc2cpLAogICAgY3JlYXRlOiB0aHJvd1dpdGhNZXNz
        YWdlKGNsYXNzTmFtZSArIG1zZykKICB9Owp9CgpFbWJlci5TdGF0ZU1hbmFn
        ZXIgPSBnZW5lcmF0ZVJlbW92ZWRDbGFzcygiRW1iZXIuU3RhdGVNYW5hZ2Vy
        Iik7CgovKioKICBUaGlzIHdhcyBleHBvcnRlZCB0byBlbWJlci1zdGF0ZXMg
        cGx1Z2luIGZvciB2IDEuMC4wIHJlbGVhc2UuIFNlZTogaHR0cHM6Ly9naXRo
        dWIuY29tL2VtYmVyanMvZW1iZXItc3RhdGVzCiAgCiAgQGNsYXNzIFN0YXRl
        TWFuYWdlcgogIEBuYW1lc3BhY2UgRW1iZXIKKi8KCkVtYmVyLlN0YXRlID0g
        Z2VuZXJhdGVSZW1vdmVkQ2xhc3MoIkVtYmVyLlN0YXRlIik7CgovKioKICBU
        aGlzIHdhcyBleHBvcnRlZCB0byBlbWJlci1zdGF0ZXMgcGx1Z2luIGZvciB2
        IDEuMC4wIHJlbGVhc2UuIFNlZTogaHR0cHM6Ly9naXRodWIuY29tL2VtYmVy
        anMvZW1iZXItc3RhdGVzCiAgCiAgQGNsYXNzIFN0YXRlCiAgQG5hbWVzcGFj
        ZSBFbWJlcgoqLwoKfSkoKTsKCgp9KSgpOwo=
    http_version: 
  recorded_at: Mon, 17 Feb 2014 11:45:32 GMT
- request:
    method: get
    uri: http://builds.emberjs.com/beta/ember.min.js
    body:
      encoding: US-ASCII
      string: ''
    headers:
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - '*/*'
      User-Agent:
      - Ruby
      Host:
      - builds.emberjs.com
  response:
    status:
      code: 200
      message: OK
    headers:
      X-Amz-Id-2:
      - vmFYSDC3xmix7unI9Dn+qykjzRSDkwiAjuKmwrtQa8XLu++WG324EBz3BSzhaXGk
      X-Amz-Request-Id:
      - 02C06AB32FD68411
      Date:
      - Mon, 17 Feb 2014 11:45:33 GMT
      Last-Modified:
      - Sun, 16 Feb 2014 02:41:59 GMT
      Etag:
      - '"f830b8670f3324a8b840bd32b237bbe5"'
      Content-Type:
      - text/javascript
      Content-Length:
      - '272434'
      Server:
      - AmazonS3
    body:
      encoding: ASCII-8BIT
      string: !binary |-
        LyohCiAqIEBvdmVydmlldyAgRW1iZXIgLSBKYXZhU2NyaXB0IEFwcGxpY2F0
        aW9uIEZyYW1ld29yawogKiBAY29weXJpZ2h0IENvcHlyaWdodCAyMDExLTIw
        MTQgVGlsZGUgSW5jLiBhbmQgY29udHJpYnV0b3JzCiAqICAgICAgICAgICAg
        UG9ydGlvbnMgQ29weXJpZ2h0IDIwMDYtMjAxMSBTdHJvYmUgSW5jLgogKiAg
        ICAgICAgICAgIFBvcnRpb25zIENvcHlyaWdodCAyMDA4LTIwMTEgQXBwbGUg
        SW5jLiBBbGwgcmlnaHRzIHJlc2VydmVkLgogKiBAbGljZW5zZSAgIExpY2Vu
        c2VkIHVuZGVyIE1JVCBsaWNlbnNlCiAqICAgICAgICAgICAgU2VlIGh0dHBz
        Oi8vcmF3LmdpdGh1Yi5jb20vZW1iZXJqcy9lbWJlci5qcy9tYXN0ZXIvTElD
        RU5TRQogKiBAdmVyc2lvbiAgIDEuNS4wLWJldGEuMitwcmUuM2NlOGY5YWMK
        ICovCiFmdW5jdGlvbigpe3ZhciBlLHQscixuOyFmdW5jdGlvbigpe3ZhciBp
        PXt9LG89e307ZT1mdW5jdGlvbihlLHQscil7aVtlXT17ZGVwczp0LGNhbGxi
        YWNrOnJ9fSxuPXI9dD1mdW5jdGlvbihlKXtmdW5jdGlvbiByKHQpe2lmKCIu
        IiE9PXQuY2hhckF0KDApKXJldHVybiB0O2Zvcih2YXIgcj10LnNwbGl0KCIv
        Iiksbj1lLnNwbGl0KCIvIikuc2xpY2UoMCwtMSksaT0wLG89ci5sZW5ndGg7
        bz5pO2krKyl7dmFyIGE9cltpXTtpZigiLi4iPT09YSluLnBvcCgpO2Vsc2V7
        aWYoIi4iPT09YSljb250aW51ZTtuLnB1c2goYSl9fXJldHVybiBuLmpvaW4o
        Ii8iKX1pZihuLl9lYWtfc2Vlbj1pLG9bZV0pcmV0dXJuIG9bZV07aWYob1tl
        XT17fSwhaVtlXSl0aHJvdyBuZXcgRXJyb3IoIkNvdWxkIG5vdCBmaW5kIG1v
        ZHVsZSAiK2UpO2Zvcih2YXIgYSxzPWlbZV0sdT1zLmRlcHMsbD1zLmNhbGxi
        YWNrLGM9W10saD0wLG09dS5sZW5ndGg7bT5oO2grKykiZXhwb3J0cyI9PT11
        W2hdP2MucHVzaChhPXt9KTpjLnB1c2godChyKHVbaF0pKSk7dmFyIHA9bC5h
        cHBseSh0aGlzLGMpO3JldHVybiBvW2VdPWF8fHB9fSgpLGZ1bmN0aW9uKCl7
        InVuZGVmaW5lZCI9PXR5cGVvZiBFbWJlciYmKEVtYmVyPXt9KTt7dmFyIGU9
        KEVtYmVyLmltcG9ydHM9RW1iZXIuaW1wb3J0c3x8dGhpcyxFbWJlci5leHBv
        cnRzPUVtYmVyLmV4cG9ydHN8fHRoaXMpO0VtYmVyLmxvb2t1cD1FbWJlci5s
        b29rdXB8fHRoaXN9ZS5FbT1lLkVtYmVyPUVtPUVtYmVyLEVtYmVyLmlzTmFt
        ZXNwYWNlPSEwLEVtYmVyLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIkVt
        YmVyIn0sRW1iZXIuVkVSU0lPTj0iMS41LjAtYmV0YS4yK3ByZS4zY2U4Zjlh
        YyIsRW1iZXIuRU5WfHwoRW1iZXIuRU5WPSJ1bmRlZmluZWQiIT10eXBlb2Yg
        RW1iZXJFTlY/RW1iZXJFTlY6InVuZGVmaW5lZCIhPXR5cGVvZiBFTlY/RU5W
        Ont9KSxFbWJlci5jb25maWc9RW1iZXIuY29uZmlnfHx7fSwidW5kZWZpbmVk
        Ij09dHlwZW9mIEVtYmVyLkVOVi5ESVNBQkxFX1JBTkdFX0FQSSYmKEVtYmVy
        LkVOVi5ESVNBQkxFX1JBTkdFX0FQST0hMCksInVuZGVmaW5lZCI9PXR5cGVv
        ZiBNZXRhbW9ycGhFTlYmJihlLk1ldGFtb3JwaEVOVj17fSksTWV0YW1vcnBo
        RU5WLkRJU0FCTEVfUkFOR0VfQVBJPUVtYmVyLkVOVi5ESVNBQkxFX1JBTkdF
        X0FQSSxFbWJlci5GRUFUVVJFUz1FbWJlci5FTlYuRkVBVFVSRVN8fHt9LEVt
        YmVyLkZFQVRVUkVTLmlzRW5hYmxlZD1mdW5jdGlvbihlKXt2YXIgdD1FbWJl
        ci5GRUFUVVJFU1tlXTtyZXR1cm4gRW1iZXIuRU5WLkVOQUJMRV9BTExfRkVB
        VFVSRVM/ITA6dD09PSEwfHx0PT09ITF8fHZvaWQgMD09PXQ/dDpFbWJlci5F
        TlYuRU5BQkxFX09QVElPTkFMX0ZFQVRVUkVTPyEwOiExfSxFbWJlci5FWFRF
        TkRfUFJPVE9UWVBFUz1FbWJlci5FTlYuRVhURU5EX1BST1RPVFlQRVMsInVu
        ZGVmaW5lZCI9PXR5cGVvZiBFbWJlci5FWFRFTkRfUFJPVE9UWVBFUyYmKEVt
        YmVyLkVYVEVORF9QUk9UT1RZUEVTPSEwKSxFbWJlci5MT0dfU1RBQ0tUUkFD
        RV9PTl9ERVBSRUNBVElPTj1FbWJlci5FTlYuTE9HX1NUQUNLVFJBQ0VfT05f
        REVQUkVDQVRJT04hPT0hMSxFbWJlci5TSElNX0VTNT1FbWJlci5FTlYuU0hJ
        TV9FUzU9PT0hMT8hMTpFbWJlci5FWFRFTkRfUFJPVE9UWVBFUyxFbWJlci5M
        T0dfVkVSU0lPTj1FbWJlci5FTlYuTE9HX1ZFUlNJT049PT0hMT8hMTohMCxF
        bWJlci5LPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9LCJ1bmRlZmluZWQiPT10
        eXBlb2YgRW1iZXIuYXNzZXJ0JiYoRW1iZXIuYXNzZXJ0PUVtYmVyLkspLCJ1
        bmRlZmluZWQiPT10eXBlb2YgRW1iZXIud2FybiYmKEVtYmVyLndhcm49RW1i
        ZXIuSyksInVuZGVmaW5lZCI9PXR5cGVvZiBFbWJlci5kZWJ1ZyYmKEVtYmVy
        LmRlYnVnPUVtYmVyLkspLCJ1bmRlZmluZWQiPT10eXBlb2YgRW1iZXIuZGVw
        cmVjYXRlJiYoRW1iZXIuZGVwcmVjYXRlPUVtYmVyLkspLCJ1bmRlZmluZWQi
        PT10eXBlb2YgRW1iZXIuZGVwcmVjYXRlRnVuYyYmKEVtYmVyLmRlcHJlY2F0
        ZUZ1bmM9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdH0pLEVtYmVyLnV1aWQ9MCxF
        bWJlci5tZXJnZT1mdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KXQuaGFz
        T3duUHJvcGVydHkocikmJihlW3JdPXRbcl0pO3JldHVybiBlfSxFbWJlci5p
        c05vbmU9ZnVuY3Rpb24oZSl7cmV0dXJuIG51bGw9PT1lfHx2b2lkIDA9PT1l
        fSxFbWJlci5ub25lPUVtYmVyLmRlcHJlY2F0ZUZ1bmMoIkVtYmVyLm5vbmUg
        aXMgZGVwcmVjYXRlZC4gUGxlYXNlIHVzZSBFbWJlci5pc05vbmUgaW5zdGVh
        ZC4iLEVtYmVyLmlzTm9uZSksRW1iZXIuaXNFbXB0eT1mdW5jdGlvbihlKXty
        ZXR1cm4gRW1iZXIuaXNOb25lKGUpfHwwPT09ZS5sZW5ndGgmJiJmdW5jdGlv
        biIhPXR5cGVvZiBlfHwib2JqZWN0Ij09dHlwZW9mIGUmJjA9PT1FbWJlci5n
        ZXQoZSwibGVuZ3RoIil9LEVtYmVyLmVtcHR5PUVtYmVyLmRlcHJlY2F0ZUZ1
        bmMoIkVtYmVyLmVtcHR5IGlzIGRlcHJlY2F0ZWQuIFBsZWFzZSB1c2UgRW1i
        ZXIuaXNFbXB0eSBpbnN0ZWFkLiIsRW1iZXIuaXNFbXB0eSksRW1iZXIuaXNC
        bGFuaz1mdW5jdGlvbihlKXtyZXR1cm4gRW1iZXIuaXNFbXB0eShlKXx8InN0
        cmluZyI9PXR5cGVvZiBlJiZudWxsPT09ZS5tYXRjaCgvXFMvKX19KCksZnVu
        Y3Rpb24oKXt2YXIgZT1FbWJlci5wbGF0Zm9ybT17fTtpZihFbWJlci5jcmVh
        dGU9T2JqZWN0LmNyZWF0ZSxFbWJlci5jcmVhdGUmJjIhPT1FbWJlci5jcmVh
        dGUoe2E6MX0se2E6e3ZhbHVlOjJ9fSkuYSYmKEVtYmVyLmNyZWF0ZT1udWxs
        KSwhRW1iZXIuY3JlYXRlfHxFbWJlci5FTlYuU1RVQl9PQkpFQ1RfQ1JFQVRF
        KXt2YXIgdD1mdW5jdGlvbigpe307RW1iZXIuY3JlYXRlPWZ1bmN0aW9uKGUs
        cil7aWYodC5wcm90b3R5cGU9ZSxlPW5ldyB0LHIpe3QucHJvdG90eXBlPWU7
        Zm9yKHZhciBuIGluIHIpdC5wcm90b3R5cGVbbl09cltuXS52YWx1ZTtlPW5l
        dyB0fXJldHVybiB0LnByb3RvdHlwZT1udWxsLGV9LEVtYmVyLmNyZWF0ZS5p
        c1NpbXVsYXRlZD0hMH12YXIgcixuLGk9T2JqZWN0LmRlZmluZVByb3BlcnR5
        O2lmKGkpdHJ5e2koe30sImEiLHtnZXQ6ZnVuY3Rpb24oKXt9fSl9Y2F0Y2go
        byl7aT1udWxsfWkmJihyPWZ1bmN0aW9uKCl7dmFyIGU9e307cmV0dXJuIGko
        ZSwiYSIse2NvbmZpZ3VyYWJsZTohMCxlbnVtZXJhYmxlOiEwLGdldDpmdW5j
        dGlvbigpe30sc2V0OmZ1bmN0aW9uKCl7fX0pLGkoZSwiYSIse2NvbmZpZ3Vy
        YWJsZTohMCxlbnVtZXJhYmxlOiEwLHdyaXRhYmxlOiEwLHZhbHVlOiEwfSks
        ZS5hPT09ITB9KCksbj1mdW5jdGlvbigpe3RyeXtyZXR1cm4gaShkb2N1bWVu
        dC5jcmVhdGVFbGVtZW50KCJkaXYiKSwiZGVmaW5lUHJvcGVydHlPbkRPTSIs
        e30pLCEwfWNhdGNoKGUpe31yZXR1cm4hMX0oKSxyP258fChpPWZ1bmN0aW9u
        KGUsdCxyKXt2YXIgbjtyZXR1cm4gbj0ib2JqZWN0Ij09dHlwZW9mIE5vZGU/
        ZSBpbnN0YW5jZW9mIE5vZGU6Im9iamVjdCI9PXR5cGVvZiBlJiYibnVtYmVy
        Ij09dHlwZW9mIGUubm9kZVR5cGUmJiJzdHJpbmciPT10eXBlb2YgZS5ub2Rl
        TmFtZSxuP2VbdF09ci52YWx1ZTpPYmplY3QuZGVmaW5lUHJvcGVydHkoZSx0
        LHIpfSk6aT1udWxsKSxlLmRlZmluZVByb3BlcnR5PWksZS5oYXNQcm9wZXJ0
        eUFjY2Vzc29ycz0hMCxlLmRlZmluZVByb3BlcnR5fHwoZS5oYXNQcm9wZXJ0
        eUFjY2Vzc29ycz0hMSxlLmRlZmluZVByb3BlcnR5PWZ1bmN0aW9uKGUsdCxy
        KXtyLmdldHx8KGVbdF09ci52YWx1ZSl9LGUuZGVmaW5lUHJvcGVydHkuaXNT
        aW11bGF0ZWQ9ITApLEVtYmVyLkVOVi5NQU5EQVRPUllfU0VUVEVSJiYhZS5o
        YXNQcm9wZXJ0eUFjY2Vzc29ycyYmKEVtYmVyLkVOVi5NQU5EQVRPUllfU0VU
        VEVSPSExKX0oKSxmdW5jdGlvbigpe3ZhciBlPWZ1bmN0aW9uKGUpe3JldHVy
        biBlJiZGdW5jdGlvbi5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChlKS5pbmRl
        eE9mKCJbbmF0aXZlIGNvZGVdIik+LTF9LHQ9ZShBcnJheS5wcm90b3R5cGUu
        bWFwKT9BcnJheS5wcm90b3R5cGUubWFwOmZ1bmN0aW9uKGUpe2lmKHZvaWQg
        MD09PXRoaXN8fG51bGw9PT10aGlzKXRocm93IG5ldyBUeXBlRXJyb3I7dmFy
        IHQ9T2JqZWN0KHRoaXMpLHI9dC5sZW5ndGg+Pj4wO2lmKCJmdW5jdGlvbiIh
        PXR5cGVvZiBlKXRocm93IG5ldyBUeXBlRXJyb3I7Zm9yKHZhciBuPW5ldyBB
        cnJheShyKSxpPWFyZ3VtZW50c1sxXSxvPTA7cj5vO28rKylvIGluIHQmJihu
        W29dPWUuY2FsbChpLHRbb10sbyx0KSk7cmV0dXJuIG59LHI9ZShBcnJheS5w
        cm90b3R5cGUuZm9yRWFjaCk/QXJyYXkucHJvdG90eXBlLmZvckVhY2g6ZnVu
        Y3Rpb24oZSl7aWYodm9pZCAwPT09dGhpc3x8bnVsbD09PXRoaXMpdGhyb3cg
        bmV3IFR5cGVFcnJvcjt2YXIgdD1PYmplY3QodGhpcykscj10Lmxlbmd0aD4+
        PjA7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIGUpdGhyb3cgbmV3IFR5cGVFcnJv
        cjtmb3IodmFyIG49YXJndW1lbnRzWzFdLGk9MDtyPmk7aSsrKWkgaW4gdCYm
        ZS5jYWxsKG4sdFtpXSxpLHQpfSxuPWUoQXJyYXkucHJvdG90eXBlLmluZGV4
        T2YpP0FycmF5LnByb3RvdHlwZS5pbmRleE9mOmZ1bmN0aW9uKGUsdCl7bnVs
        bD09PXR8fHZvaWQgMD09PXQ/dD0wOjA+dCYmKHQ9TWF0aC5tYXgoMCx0aGlz
        Lmxlbmd0aCt0KSk7Zm9yKHZhciByPXQsbj10aGlzLmxlbmd0aDtuPnI7cisr
        KWlmKHRoaXNbcl09PT1lKXJldHVybiByO3JldHVybi0xfSxpPWUoQXJyYXku
        cHJvdG90eXBlLmZpbHRlcik/QXJyYXkucHJvdG90eXBlLmZpbHRlcjpmdW5j
        dGlvbihlLHQpe3ZhciByLG4saT1bXSxvPXRoaXMubGVuZ3RoO2ZvcihyPTA7
        bz5yO3IrKyl0aGlzLmhhc093blByb3BlcnR5KHIpJiYobj10aGlzW3JdLGUu
        Y2FsbCh0LG4scix0aGlzKSYmaS5wdXNoKG4pKTtyZXR1cm4gaX07RW1iZXIu
        QXJyYXlQb2x5ZmlsbHM9e21hcDp0LGZvckVhY2g6cixmaWx0ZXI6aSxpbmRl
        eE9mOm59LEVtYmVyLlNISU1fRVM1JiYoQXJyYXkucHJvdG90eXBlLm1hcHx8
        KEFycmF5LnByb3RvdHlwZS5tYXA9dCksQXJyYXkucHJvdG90eXBlLmZvckVh
        Y2h8fChBcnJheS5wcm90b3R5cGUuZm9yRWFjaD1yKSxBcnJheS5wcm90b3R5
        cGUuZmlsdGVyfHwoQXJyYXkucHJvdG90eXBlLmZpbHRlcj1pKSxBcnJheS5w
        cm90b3R5cGUuaW5kZXhPZnx8KEFycmF5LnByb3RvdHlwZS5pbmRleE9mPW4p
        KX0oKSxmdW5jdGlvbigpe3ZhciBlPVsiZGVzY3JpcHRpb24iLCJmaWxlTmFt
        ZSIsImxpbmVOdW1iZXIiLCJtZXNzYWdlIiwibmFtZSIsIm51bWJlciIsInN0
        YWNrIl07RW1iZXIuRXJyb3I9ZnVuY3Rpb24oKXt2YXIgdD1FcnJvci5hcHBs
        eSh0aGlzLGFyZ3VtZW50cyk7RXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UmJkVy
        cm9yLmNhcHR1cmVTdGFja1RyYWNlKHRoaXMsRW1iZXIuRXJyb3IpO2Zvcih2
        YXIgcj0wO3I8ZS5sZW5ndGg7cisrKXRoaXNbZVtyXV09dFtlW3JdXX0sRW1i
        ZXIuRXJyb3IucHJvdG90eXBlPUVtYmVyLmNyZWF0ZShFcnJvci5wcm90b3R5
        cGUpLEVtYmVyLm9uZXJyb3I9bnVsbH0oKSxmdW5jdGlvbigpe2Z1bmN0aW9u
        IGUoZSl7dGhpcy5kZXNjcz17fSx0aGlzLndhdGNoaW5nPXt9LHRoaXMuY2Fj
        aGU9e30sdGhpcy5zb3VyY2U9ZX1mdW5jdGlvbiB0KGUsdCl7cmV0dXJuISgh
        ZXx8ImZ1bmN0aW9uIiE9dHlwZW9mIGVbdF0pfUVtYmVyLkdVSURfUFJFRklY
        PSJlbWJlciI7dmFyIHI9RW1iZXIucGxhdGZvcm0uZGVmaW5lUHJvcGVydHks
        bj1FbWJlci5jcmVhdGUsaT0iX19lbWJlciIrICtuZXcgRGF0ZSxvPVtdLGE9
        e30scz0wLHU9RW1iZXIuRU5WLk1BTkRBVE9SWV9TRVRURVI7RW1iZXIuR1VJ
        RF9LRVk9aTt2YXIgbD17d3JpdGFibGU6ITEsY29uZmlndXJhYmxlOiExLGVu
        dW1lcmFibGU6ITEsdmFsdWU6bnVsbH07RW1iZXIuZ2VuZXJhdGVHdWlkPWZ1
        bmN0aW9uKGUsdCl7dHx8KHQ9RW1iZXIuR1VJRF9QUkVGSVgpO3ZhciBuPXQr
        cysrO3JldHVybiBlJiYobnVsbD09PWVbaV0/ZVtpXT1uOihsLnZhbHVlPW4s
        cihlLGksbCkpKSxufSxFbWJlci5ndWlkRm9yPWZ1bmN0aW9uKGUpe2lmKHZv
        aWQgMD09PWUpcmV0dXJuIih1bmRlZmluZWQpIjtpZihudWxsPT09ZSlyZXR1
        cm4iKG51bGwpIjt2YXIgdCxuPXR5cGVvZiBlO3N3aXRjaChuKXtjYXNlIm51
        bWJlciI6cmV0dXJuIHQ9b1tlXSx0fHwodD1vW2VdPSJudSIrZSksdDtjYXNl
        InN0cmluZyI6cmV0dXJuIHQ9YVtlXSx0fHwodD1hW2VdPSJzdCIrcysrKSx0
        O2Nhc2UiYm9vbGVhbiI6cmV0dXJuIGU/Iih0cnVlKSI6IihmYWxzZSkiO2Rl
        ZmF1bHQ6cmV0dXJuIGVbaV0/ZVtpXTplPT09T2JqZWN0PyIoT2JqZWN0KSI6
        ZT09PUFycmF5PyIoQXJyYXkpIjoodD0iZW1iZXIiK3MrKyxudWxsPT09ZVtp
        XT9lW2ldPXQ6KGwudmFsdWU9dCxyKGUsaSxsKSksdCl9fTt2YXIgYz1FbWJl
        ci5NRVRBX0RFU0M9e3dyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMSxlbnVt
        ZXJhYmxlOiExLHZhbHVlOm51bGx9LGg9RW1iZXIuR1VJRF9LRVkrIl9tZXRh
        IjtFbWJlci5NRVRBX0tFWT1oO3ZhciBtPUVtYmVyLnBsYXRmb3JtLmRlZmlu
        ZVByb3BlcnR5LmlzU2ltdWxhdGVkO2UucHJvdG90eXBlPXtkZXNjczpudWxs
        LGRlcHM6bnVsbCx3YXRjaGluZzpudWxsLGxpc3RlbmVyczpudWxsLGNhY2hl
        Om51bGwsc291cmNlOm51bGwsbWl4aW5zOm51bGwsYmluZGluZ3M6bnVsbCxj
        aGFpbnM6bnVsbCxjaGFpbldhdGNoZXJzOm51bGwsdmFsdWVzOm51bGwscHJv
        dG86bnVsbH0sbSYmKGUucHJvdG90eXBlLl9fcHJldmVudFBsYWluT2JqZWN0
        X189ITAsZS5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7fSk7dmFyIHA9
        bmV3IGUobnVsbCk7dSYmKHAudmFsdWVzPXt9KSxFbWJlci5FTVBUWV9NRVRB
        PXAsRW1iZXIubWV0YT1mdW5jdGlvbih0LGkpe3ZhciBvPXRbaF07cmV0dXJu
        IGk9PT0hMT9vfHxwOihvP28uc291cmNlIT09dCYmKG18fHIodCxoLGMpLG89
        bihvKSxvLmRlc2NzPW4oby5kZXNjcyksby53YXRjaGluZz1uKG8ud2F0Y2hp
        bmcpLG8uY2FjaGU9e30sby5zb3VyY2U9dCx1JiYoby52YWx1ZXM9bihvLnZh
        bHVlcykpLHRbaF09byk6KG18fHIodCxoLGMpLG89bmV3IGUodCksdSYmKG8u
        dmFsdWVzPXt9KSx0W2hdPW8sby5kZXNjcy5jb25zdHJ1Y3Rvcj1udWxsKSxv
        KX0sRW1iZXIuZ2V0TWV0YT1mdW5jdGlvbihlLHQpe3ZhciByPUVtYmVyLm1l
        dGEoZSwhMSk7cmV0dXJuIHJbdF19LEVtYmVyLnNldE1ldGE9ZnVuY3Rpb24o
        ZSx0LHIpe3ZhciBuPUVtYmVyLm1ldGEoZSwhMCk7cmV0dXJuIG5bdF09cixy
        fSxFbWJlci5tZXRhUGF0aD1mdW5jdGlvbihlLHQscil7Zm9yKHZhciBpLG8s
        YT1FbWJlci5tZXRhKGUscikscz0wLHU9dC5sZW5ndGg7dT5zO3MrKyl7aWYo
        aT10W3NdLG89YVtpXSl7aWYoby5fX2VtYmVyX3NvdXJjZV9fIT09ZSl7aWYo
        IXIpcmV0dXJuIHZvaWQgMDtvPWFbaV09bihvKSxvLl9fZW1iZXJfc291cmNl
        X189ZX19ZWxzZXtpZighcilyZXR1cm4gdm9pZCAwO289YVtpXT17X19lbWJl
        cl9zb3VyY2VfXzplfX1hPW99cmV0dXJuIG99LEVtYmVyLndyYXA9ZnVuY3Rp
        b24oZSx0KXtmdW5jdGlvbiByKCl7dmFyIHIsbj10aGlzLl9fbmV4dFN1cGVy
        O3JldHVybiB0aGlzLl9fbmV4dFN1cGVyPXQscj1lLmFwcGx5KHRoaXMsYXJn
        dW1lbnRzKSx0aGlzLl9fbmV4dFN1cGVyPW4scn1yZXR1cm4gci53cmFwcGVk
        RnVuY3Rpb249ZSxyLl9fZW1iZXJfb2JzZXJ2ZXNfXz1lLl9fZW1iZXJfb2Jz
        ZXJ2ZXNfXyxyLl9fZW1iZXJfb2JzZXJ2ZXNCZWZvcmVfXz1lLl9fZW1iZXJf
        b2JzZXJ2ZXNCZWZvcmVfXyxyLl9fZW1iZXJfbGlzdGVuc19fPWUuX19lbWJl
        cl9saXN0ZW5zX18scn0sRW1iZXIuaXNBcnJheT1mdW5jdGlvbihlKXtyZXR1
        cm4hZXx8ZS5zZXRJbnRlcnZhbD8hMTpBcnJheS5pc0FycmF5JiZBcnJheS5p
        c0FycmF5KGUpPyEwOkVtYmVyLkFycmF5JiZFbWJlci5BcnJheS5kZXRlY3Qo
        ZSk/ITA6dm9pZCAwIT09ZS5sZW5ndGgmJiJvYmplY3QiPT10eXBlb2YgZT8h
        MDohMX0sRW1iZXIubWFrZUFycmF5PWZ1bmN0aW9uKGUpe3JldHVybiBudWxs
        PT09ZXx8dm9pZCAwPT09ZT9bXTpFbWJlci5pc0FycmF5KGUpP2U6W2VdfSxF
        bWJlci5jYW5JbnZva2U9dCxFbWJlci50cnlJbnZva2U9ZnVuY3Rpb24oZSxy
        LG4pe3JldHVybiB0KGUscik/ZVtyXS5hcHBseShlLG58fFtdKTp2b2lkIDB9
        O3ZhciBmPWZ1bmN0aW9uKCl7dmFyIGU9MDt0cnl7dHJ5e31maW5hbGx5e3Ro
        cm93IGUrKyxuZXcgRXJyb3IoIm5lZWRzRmluYWxseUZpeFRlc3QiKX19Y2F0
        Y2godCl7fXJldHVybiAxIT09ZX0oKTtFbWJlci50cnlGaW5hbGx5PWY/ZnVu
        Y3Rpb24oZSx0LHIpe3ZhciBuLGksbztyPXJ8fHRoaXM7dHJ5e249ZS5jYWxs
        KHIpfWZpbmFsbHl7dHJ5e2k9dC5jYWxsKHIpfWNhdGNoKGEpe289YX19aWYo
        byl0aHJvdyBvO3JldHVybiB2b2lkIDA9PT1pP246aX06ZnVuY3Rpb24oZSx0
        LHIpe3ZhciBuLGk7cj1yfHx0aGlzO3RyeXtuPWUuY2FsbChyKX1maW5hbGx5
        e2k9dC5jYWxsKHIpfXJldHVybiB2b2lkIDA9PT1pP246aX0sRW1iZXIudHJ5
        Q2F0Y2hGaW5hbGx5PWY/ZnVuY3Rpb24oZSx0LHIsbil7dmFyIGksbyxhO249
        bnx8dGhpczt0cnl7aT1lLmNhbGwobil9Y2F0Y2gocyl7aT10LmNhbGwobixz
        KX1maW5hbGx5e3RyeXtvPXIuY2FsbChuKX1jYXRjaCh1KXthPXV9fWlmKGEp
        dGhyb3cgYTtyZXR1cm4gdm9pZCAwPT09bz9pOm99OmZ1bmN0aW9uKGUsdCxy
        LG4pe3ZhciBpLG87bj1ufHx0aGlzO3RyeXtpPWUuY2FsbChuKX1jYXRjaChh
        KXtpPXQuY2FsbChuLGEpfWZpbmFsbHl7bz1yLmNhbGwobil9cmV0dXJuIHZv
        aWQgMD09PW8/aTpvfTt2YXIgZD17fSxiPSJCb29sZWFuIE51bWJlciBTdHJp
        bmcgRnVuY3Rpb24gQXJyYXkgRGF0ZSBSZWdFeHAgT2JqZWN0Ii5zcGxpdCgi
        ICIpO0VtYmVyLkFycmF5UG9seWZpbGxzLmZvckVhY2guY2FsbChiLGZ1bmN0
        aW9uKGUpe2RbIltvYmplY3QgIitlKyJdIl09ZS50b0xvd2VyQ2FzZSgpfSk7
        dmFyIHY9T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZztFbWJlci50eXBlT2Y9
        ZnVuY3Rpb24oZSl7dmFyIHQ7cmV0dXJuIHQ9bnVsbD09PWV8fHZvaWQgMD09
        PWU/U3RyaW5nKGUpOmRbdi5jYWxsKGUpXXx8Im9iamVjdCIsImZ1bmN0aW9u
        Ij09PXQ/RW1iZXIuT2JqZWN0JiZFbWJlci5PYmplY3QuZGV0ZWN0KGUpJiYo
        dD0iY2xhc3MiKToib2JqZWN0Ij09PXQmJihlIGluc3RhbmNlb2YgRXJyb3I/
        dD0iZXJyb3IiOkVtYmVyLk9iamVjdCYmZSBpbnN0YW5jZW9mIEVtYmVyLk9i
        amVjdD90PSJpbnN0YW5jZSI6ZSBpbnN0YW5jZW9mIERhdGUmJih0PSJkYXRl
        IikpLHR9LEVtYmVyLmluc3BlY3Q9ZnVuY3Rpb24oZSl7dmFyIHQ9RW1iZXIu
        dHlwZU9mKGUpO2lmKCJhcnJheSI9PT10KXJldHVybiJbIitlKyJdIjtpZigi
        b2JqZWN0IiE9PXQpcmV0dXJuIGUrIiI7dmFyIHIsbj1bXTtmb3IodmFyIGkg
        aW4gZSlpZihlLmhhc093blByb3BlcnR5KGkpKXtpZihyPWVbaV0sInRvU3Ry
        aW5nIj09PXIpY29udGludWU7ImZ1bmN0aW9uIj09PUVtYmVyLnR5cGVPZihy
        KSYmKHI9ImZ1bmN0aW9uKCkgeyAuLi4gfSIpLG4ucHVzaChpKyI6ICIrcil9
        cmV0dXJuInsiK24uam9pbigiLCAiKSsifSJ9fSgpLGZ1bmN0aW9uKCl7RW1i
        ZXIuSW5zdHJ1bWVudGF0aW9uPXt9O3ZhciBlPVtdLHQ9e30scj1mdW5jdGlv
        bihyKXtmb3IodmFyIG4saT1bXSxvPTAsYT1lLmxlbmd0aDthPm87bysrKW49
        ZVtvXSxuLnJlZ2V4LnRlc3QocikmJmkucHVzaChuLm9iamVjdCk7cmV0dXJu
        IHRbcl09aSxpfSxuPWZ1bmN0aW9uKCl7dmFyIGU9InVuZGVmaW5lZCIhPXR5
        cGVvZiB3aW5kb3c/d2luZG93LnBlcmZvcm1hbmNlfHx7fTp7fSx0PWUubm93
        fHxlLm1vek5vd3x8ZS53ZWJraXROb3d8fGUubXNOb3d8fGUub05vdztyZXR1
        cm4gdD90LmJpbmQoZSk6ZnVuY3Rpb24oKXtyZXR1cm4rbmV3IERhdGV9fSgp
        O0VtYmVyLkluc3RydW1lbnRhdGlvbi5pbnN0cnVtZW50PWZ1bmN0aW9uKGUs
        aSxvLGEpe2Z1bmN0aW9uIHMoKXtmb3IoZj0wLGQ9bS5sZW5ndGg7ZD5mO2Yr
        KylwPW1bZl0sYltmXT1wLmJlZm9yZShlLG4oKSxpKTtyZXR1cm4gby5jYWxs
        KGEpfWZ1bmN0aW9uIHUoZSl7aT1pfHx7fSxpLmV4Y2VwdGlvbj1lfWZ1bmN0
        aW9uIGwoKXtmb3IoZj0wLGQ9bS5sZW5ndGg7ZD5mO2YrKylwPW1bZl0scC5h
        ZnRlcihlLG4oKSxpLGJbZl0pO0VtYmVyLlNUUlVDVFVSRURfUFJPRklMRSYm
        Y29uc29sZS50aW1lRW5kKGMpfXZhciBjLGgsbT10W2VdO2lmKEVtYmVyLlNU
        UlVDVFVSRURfUFJPRklMRSYmKGM9ZSsiOiAiK2kub2JqZWN0LGNvbnNvbGUu
        dGltZShjKSksbXx8KG09cihlKSksMD09PW0ubGVuZ3RoKXJldHVybiBoPW8u
        Y2FsbChhKSxFbWJlci5TVFJVQ1RVUkVEX1BST0ZJTEUmJmNvbnNvbGUudGlt
        ZUVuZChjKSxoO3ZhciBwLGYsZCxiPVtdO3JldHVybiBFbWJlci50cnlDYXRj
        aEZpbmFsbHkocyx1LGwpfSxFbWJlci5JbnN0cnVtZW50YXRpb24uc3Vic2Ny
        aWJlPWZ1bmN0aW9uKHIsbil7Zm9yKHZhciBpLG89ci5zcGxpdCgiLiIpLGE9
        W10scz0wLHU9by5sZW5ndGg7dT5zO3MrKylpPW9bc10sIioiPT09aT9hLnB1
        c2goIlteXFwuXSoiKTphLnB1c2goaSk7YT1hLmpvaW4oIlxcLiIpLGErPSIo
        XFwuLiopPyI7dmFyIGw9e3BhdHRlcm46cixyZWdleDpuZXcgUmVnRXhwKCJe
        IithKyIkIiksb2JqZWN0Om59O3JldHVybiBlLnB1c2gobCksdD17fSxsfSxF
        bWJlci5JbnN0cnVtZW50YXRpb24udW5zdWJzY3JpYmU9ZnVuY3Rpb24ocil7
        Zm9yKHZhciBuLGk9MCxvPWUubGVuZ3RoO28+aTtpKyspZVtpXT09PXImJihu
        PWkpO2Uuc3BsaWNlKG4sMSksdD17fX0sRW1iZXIuSW5zdHJ1bWVudGF0aW9u
        LnJlc2V0PWZ1bmN0aW9uKCl7ZT1bXSx0PXt9fSxFbWJlci5pbnN0cnVtZW50
        PUVtYmVyLkluc3RydW1lbnRhdGlvbi5pbnN0cnVtZW50LEVtYmVyLnN1YnNj
        cmliZT1FbWJlci5JbnN0cnVtZW50YXRpb24uc3Vic2NyaWJlfSgpLGZ1bmN0
        aW9uKCl7dmFyIGUsdCxyLG4saTtlPUFycmF5LnByb3RvdHlwZS5tYXB8fEVt
        YmVyLkFycmF5UG9seWZpbGxzLm1hcCx0PUFycmF5LnByb3RvdHlwZS5mb3JF
        YWNofHxFbWJlci5BcnJheVBvbHlmaWxscy5mb3JFYWNoLHI9QXJyYXkucHJv
        dG90eXBlLmluZGV4T2Z8fEVtYmVyLkFycmF5UG9seWZpbGxzLmluZGV4T2Ys
        aT1BcnJheS5wcm90b3R5cGUuZmlsdGVyfHxFbWJlci5BcnJheVBvbHlmaWxs
        cy5maWx0ZXIsbj1BcnJheS5wcm90b3R5cGUuc3BsaWNlO3ZhciBvPUVtYmVy
        LkVudW1lcmFibGVVdGlscz17bWFwOmZ1bmN0aW9uKHQscixuKXtyZXR1cm4g
        dC5tYXA/dC5tYXAuY2FsbCh0LHIsbik6ZS5jYWxsKHQscixuKX0sZm9yRWFj
        aDpmdW5jdGlvbihlLHIsbil7cmV0dXJuIGUuZm9yRWFjaD9lLmZvckVhY2gu
        Y2FsbChlLHIsbik6dC5jYWxsKGUscixuKX0sZmlsdGVyOmZ1bmN0aW9uKGUs
        dCxyKXtyZXR1cm4gZS5maWx0ZXI/ZS5maWx0ZXIuY2FsbChlLHQscik6aS5j
        YWxsKGUsdCxyKX0saW5kZXhPZjpmdW5jdGlvbihlLHQsbil7cmV0dXJuIGUu
        aW5kZXhPZj9lLmluZGV4T2YuY2FsbChlLHQsbik6ci5jYWxsKGUsdCxuKX0s
        aW5kZXhlc09mOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHZvaWQgMD09PXQ/W106
        by5tYXAodCxmdW5jdGlvbih0KXtyZXR1cm4gby5pbmRleE9mKGUsdCl9KX0s
        YWRkT2JqZWN0OmZ1bmN0aW9uKGUsdCl7dmFyIHI9by5pbmRleE9mKGUsdCk7
        LTE9PT1yJiZlLnB1c2godCl9LHJlbW92ZU9iamVjdDpmdW5jdGlvbihlLHQp
        e3ZhciByPW8uaW5kZXhPZihlLHQpOy0xIT09ciYmZS5zcGxpY2UociwxKX0s
        X3JlcGxhY2U6ZnVuY3Rpb24oZSx0LHIsaSl7Zm9yKHZhciBvLGEscz1bXS5j
        b25jYXQoaSksdT1bXSxsPTZlNCxjPXQsaD1yO3MubGVuZ3RoOylhPWg+bD9s
        OmgsMD49YSYmKGE9MCksbz1zLnNwbGljZSgwLGwpLG89W2MsYV0uY29uY2F0
        KG8pLGMrPWwsaC09YSx1PXUuY29uY2F0KG4uYXBwbHkoZSxvKSk7cmV0dXJu
        IHV9LHJlcGxhY2U6ZnVuY3Rpb24oZSx0LHIsbil7cmV0dXJuIGUucmVwbGFj
        ZT9lLnJlcGxhY2UodCxyLG4pOm8uX3JlcGxhY2UoZSx0LHIsbil9LGludGVy
        c2VjdGlvbjpmdW5jdGlvbihlLHQpe3ZhciByPVtdO3JldHVybiBvLmZvckVh
        Y2goZSxmdW5jdGlvbihlKXtvLmluZGV4T2YodCxlKT49MCYmci5wdXNoKGUp
        fSkscn19fSgpLGZ1bmN0aW9uKCl7dmFyIGUsdD1FbWJlci5NRVRBX0tFWSxy
        PUVtYmVyLkVOVi5NQU5EQVRPUllfU0VUVEVSLG49L14oW0EtWiRdfChbMC05
        XVtBLVokXSkpLipbXC5cKl0vLGk9L150aGlzW1wuXCpdLyxvPS9eKFteXC5c
        Kl0rKS87ZT1mdW5jdGlvbihlLG4pe2lmKCIiPT09bilyZXR1cm4gZTtpZihu
        fHwic3RyaW5nIiE9dHlwZW9mIGV8fChuPWUsZT1udWxsKSxudWxsPT09ZXx8
        LTEhPT1uLmluZGV4T2YoIi4iKSlyZXR1cm4gcyhlLG4pO3ZhciBpLG89ZVt0
        XSxhPW8mJm8uZGVzY3Nbbl07cmV0dXJuIGE/YS5nZXQoZSxuKTooaT1yJiZv
        JiZvLndhdGNoaW5nW25dPjA/by52YWx1ZXNbbl06ZVtuXSx2b2lkIDAhPT1p
        fHwib2JqZWN0IiE9dHlwZW9mIGV8fG4gaW4gZXx8ImZ1bmN0aW9uIiE9dHlw
        ZW9mIGUudW5rbm93blByb3BlcnR5P2k6ZS51bmtub3duUHJvcGVydHkobikp
        fSxFbWJlci5jb25maWcub3ZlcnJpZGVBY2Nlc3NvcnMmJihFbWJlci5nZXQ9
        ZSxFbWJlci5jb25maWcub3ZlcnJpZGVBY2Nlc3NvcnMoKSxlPUVtYmVyLmdl
        dCk7dmFyIGE9RW1iZXIubm9ybWFsaXplVHVwbGU9ZnVuY3Rpb24odCxyKXt2
        YXIgYSxzPWkudGVzdChyKSx1PSFzJiZuLnRlc3Qocik7aWYoKCF0fHx1KSYm
        KHQ9RW1iZXIubG9va3VwKSxzJiYocj1yLnNsaWNlKDUpKSx0PT09RW1iZXIu
        bG9va3VwJiYoYT1yLm1hdGNoKG8pWzBdLHQ9ZSh0LGEpLHI9ci5zbGljZShh
        Lmxlbmd0aCsxKSksIXJ8fDA9PT1yLmxlbmd0aCl0aHJvdyBuZXcgRW1iZXIu
        RXJyb3IoIlBhdGggY2Fubm90IGJlIGVtcHR5Iik7cmV0dXJuW3Qscl19LHM9
        RW1iZXIuX2dldFBhdGg9ZnVuY3Rpb24odCxyKXt2YXIgbixvLHMsdSxsO2lm
        KG51bGw9PT10JiYtMT09PXIuaW5kZXhPZigiLiIpKXJldHVybiBlKEVtYmVy
        Lmxvb2t1cCxyKTtmb3Iobj1pLnRlc3QociksKCF0fHxuKSYmKHM9YSh0LHIp
        LHQ9c1swXSxyPXNbMV0scy5sZW5ndGg9MCksbz1yLnNwbGl0KCIuIiksbD1v
        Lmxlbmd0aCx1PTA7bnVsbCE9dCYmbD51O3UrKylpZih0PWUodCxvW3VdLCEw
        KSx0JiZ0LmlzRGVzdHJveWVkKXJldHVybiB2b2lkIDA7cmV0dXJuIHR9O0Vt
        YmVyLmdldFdpdGhEZWZhdWx0PWZ1bmN0aW9uKHQscixuKXt2YXIgaT1lKHQs
        cik7cmV0dXJuIHZvaWQgMD09PWk/bjppfSxFbWJlci5nZXQ9ZX0oKSxmdW5j
        dGlvbigpe2Z1bmN0aW9uIGUoZSx0LHIpe2Zvcih2YXIgbj0tMSxpPWUubGVu
        Z3RoLTM7aT49MDtpLT0zKWlmKHQ9PT1lW2ldJiZyPT09ZVtpKzFdKXtuPWk7
        YnJlYWt9cmV0dXJuIG59ZnVuY3Rpb24gdChlLHQpe3ZhciByLG49cChlLCEw
        KTtyZXR1cm4gbi5saXN0ZW5lcnN8fChuLmxpc3RlbmVycz17fSksbi5oYXNP
        d25Qcm9wZXJ0eSgibGlzdGVuZXJzIil8fChuLmxpc3RlbmVycz1tKG4ubGlz
        dGVuZXJzKSkscj1uLmxpc3RlbmVyc1t0XSxyJiYhbi5saXN0ZW5lcnMuaGFz
        T3duUHJvcGVydHkodCk/cj1uLmxpc3RlbmVyc1t0XT1uLmxpc3RlbmVyc1t0
        XS5zbGljZSgpOnJ8fChyPW4ubGlzdGVuZXJzW3RdPVtdKSxyfWZ1bmN0aW9u
        IHIodCxyLG4pe3ZhciBpPXRbZl0sbz1pJiZpLmxpc3RlbmVycyYmaS5saXN0
        ZW5lcnNbcl07aWYobylmb3IodmFyIGE9by5sZW5ndGgtMzthPj0wO2EtPTMp
        e3ZhciBzPW9bYV0sdT1vW2ErMV0sbD1vW2ErMl0sYz1lKG4scyx1KTstMT09
        PWMmJm4ucHVzaChzLHUsbCl9fWZ1bmN0aW9uIG4odCxyLG4pe3ZhciBpPXRb
        Zl0sbz1pJiZpLmxpc3RlbmVycyYmaS5saXN0ZW5lcnNbcl0sYT1bXTtpZihv
        KXtmb3IodmFyIHM9by5sZW5ndGgtMztzPj0wO3MtPTMpe3ZhciB1PW9bc10s
        bD1vW3MrMV0sYz1vW3MrMl0saD1lKG4sdSxsKTstMT09PWgmJihuLnB1c2go
        dSxsLGMpLGEucHVzaCh1LGwsYykpfXJldHVybiBhfX1mdW5jdGlvbiBpKHIs
        bixpLG8sYSl7b3x8ImZ1bmN0aW9uIiE9dHlwZW9mIGl8fChvPWksaT1udWxs
        KTt2YXIgcz10KHIsbiksdT1lKHMsaSxvKSxsPTA7YSYmKGx8PWIpLC0xPT09
        dSYmKHMucHVzaChpLG8sbCksImZ1bmN0aW9uIj09dHlwZW9mIHIuZGlkQWRk
        TGlzdGVuZXImJnIuZGlkQWRkTGlzdGVuZXIobixpLG8pKX1mdW5jdGlvbiBv
        KHIsbixpLG8pe2Z1bmN0aW9uIGEoaSxvKXt2YXIgYT10KHIsbikscz1lKGEs
        aSxvKTstMSE9PXMmJihhLnNwbGljZShzLDMpLCJmdW5jdGlvbiI9PXR5cGVv
        ZiByLmRpZFJlbW92ZUxpc3RlbmVyJiZyLmRpZFJlbW92ZUxpc3RlbmVyKG4s
        aSxvKSl9aWYob3x8ImZ1bmN0aW9uIiE9dHlwZW9mIGl8fChvPWksaT1udWxs
        KSxvKWEoaSxvKTtlbHNle3ZhciBzPXJbZl0sdT1zJiZzLmxpc3RlbmVycyYm
        cy5saXN0ZW5lcnNbbl07aWYoIXUpcmV0dXJuO2Zvcih2YXIgbD11Lmxlbmd0
        aC0zO2w+PTA7bC09MylhKHVbbF0sdVtsKzFdKX19ZnVuY3Rpb24gYShyLG4s
        aSxvLGEpe2Z1bmN0aW9uIHMoKXtyZXR1cm4gYS5jYWxsKGkpfWZ1bmN0aW9u
        IHUoKXstMSE9PWMmJihsW2MrMl0mPX52KX1vfHwiZnVuY3Rpb24iIT10eXBl
        b2YgaXx8KG89aSxpPW51bGwpO3ZhciBsPXQocixuKSxjPWUobCxpLG8pO3Jl
        dHVybi0xIT09YyYmKGxbYysyXXw9diksRW1iZXIudHJ5RmluYWxseShzLHUp
        fWZ1bmN0aW9uIHMocixuLGksbyxhKXtmdW5jdGlvbiBzKCl7cmV0dXJuIGEu
        Y2FsbChpKX1mdW5jdGlvbiB1KCl7Zm9yKHZhciBlPTAsdD1wLmxlbmd0aDt0
        PmU7ZSsrKXt2YXIgcj1wW2VdO2ZbZV1bcisyXSY9fnZ9fW98fCJmdW5jdGlv
        biIhPXR5cGVvZiBpfHwobz1pLGk9bnVsbCk7dmFyIGwsYyxoLG0scD1bXSxm
        PVtdO2ZvcihoPTAsbT1uLmxlbmd0aDttPmg7aCsrKXtsPW5baF0sYz10KHIs
        bCk7dmFyIGQ9ZShjLGksbyk7LTEhPT1kJiYoY1tkKzJdfD12LHAucHVzaChk
        KSxmLnB1c2goYykpfXJldHVybiBFbWJlci50cnlGaW5hbGx5KHMsdSl9ZnVu
        Y3Rpb24gdShlKXt2YXIgdD1lW2ZdLmxpc3RlbmVycyxyPVtdO2lmKHQpZm9y
        KHZhciBuIGluIHQpdFtuXSYmci5wdXNoKG4pO3JldHVybiByfWZ1bmN0aW9u
        IGwoZSx0LHIsbil7aWYoZSE9PUVtYmVyJiYiZnVuY3Rpb24iPT10eXBlb2Yg
        ZS5zZW5kRXZlbnQmJmUuc2VuZEV2ZW50KHQsciksIW4pe3ZhciBpPWVbZl07
        bj1pJiZpLmxpc3RlbmVycyYmaS5saXN0ZW5lcnNbdF19aWYobil7Zm9yKHZh
        ciBhPW4ubGVuZ3RoLTM7YT49MDthLT0zKXt2YXIgcz1uW2FdLHU9blthKzFd
        LGw9blthKzJdO3UmJihsJnZ8fChsJmImJm8oZSx0LHMsdSksc3x8KHM9ZSks
        InN0cmluZyI9PXR5cGVvZiB1JiYodT1zW3VdKSxyP3UuYXBwbHkocyxyKTp1
        LmNhbGwocykpKX1yZXR1cm4hMH19ZnVuY3Rpb24gYyhlLHQpe3ZhciByPWVb
        Zl0sbj1yJiZyLmxpc3RlbmVycyYmci5saXN0ZW5lcnNbdF07cmV0dXJuISgh
        bnx8IW4ubGVuZ3RoKX1mdW5jdGlvbiBoKGUsdCl7dmFyIHI9W10sbj1lW2Zd
        LGk9biYmbi5saXN0ZW5lcnMmJm4ubGlzdGVuZXJzW3RdO2lmKCFpKXJldHVy
        biByO2Zvcih2YXIgbz0wLGE9aS5sZW5ndGg7YT5vO28rPTMpe3ZhciBzPWlb
        b10sdT1pW28rMV07ci5wdXNoKFtzLHVdKX1yZXR1cm4gcn12YXIgbT1FbWJl
        ci5jcmVhdGUscD1FbWJlci5tZXRhLGY9RW1iZXIuTUVUQV9LRVksZD1bXS5z
        bGljZSxiPTEsdj0yO0VtYmVyLm9uPWZ1bmN0aW9uKCl7dmFyIGU9ZC5jYWxs
        KGFyZ3VtZW50cywtMSlbMF0sdD1kLmNhbGwoYXJndW1lbnRzLDAsLTEpO3Jl
        dHVybiBlLl9fZW1iZXJfbGlzdGVuc19fPXQsZX0sRW1iZXIuYWRkTGlzdGVu
        ZXI9aSxFbWJlci5yZW1vdmVMaXN0ZW5lcj1vLEVtYmVyLl9zdXNwZW5kTGlz
        dGVuZXI9YSxFbWJlci5fc3VzcGVuZExpc3RlbmVycz1zLEVtYmVyLnNlbmRF
        dmVudD1sLEVtYmVyLmhhc0xpc3RlbmVycz1jLEVtYmVyLndhdGNoZWRFdmVu
        dHM9dSxFbWJlci5saXN0ZW5lcnNGb3I9aCxFbWJlci5saXN0ZW5lcnNEaWZm
        PW4sRW1iZXIubGlzdGVuZXJzVW5pb249cn0oKSxmdW5jdGlvbigpe3ZhciBl
        PUVtYmVyLmd1aWRGb3IsdD1FbWJlci5zZW5kRXZlbnQscj1FbWJlci5fT2Jz
        ZXJ2ZXJTZXQ9ZnVuY3Rpb24oKXt0aGlzLmNsZWFyKCl9O3IucHJvdG90eXBl
        LmFkZD1mdW5jdGlvbih0LHIsbil7dmFyIGksbz10aGlzLm9ic2VydmVyU2V0
        LGE9dGhpcy5vYnNlcnZlcnMscz1lKHQpLHU9b1tzXTtyZXR1cm4gdXx8KG9b
        c109dT17fSksaT11W3JdLHZvaWQgMD09PWkmJihpPWEucHVzaCh7c2VuZGVy
        OnQsa2V5TmFtZTpyLGV2ZW50TmFtZTpuLGxpc3RlbmVyczpbXX0pLTEsdVty
        XT1pKSxhW2ldLmxpc3RlbmVyc30sci5wcm90b3R5cGUuZmx1c2g9ZnVuY3Rp
        b24oKXt2YXIgZSxyLG4saSxvPXRoaXMub2JzZXJ2ZXJzO2Zvcih0aGlzLmNs
        ZWFyKCksZT0wLHI9by5sZW5ndGg7cj5lOysrZSluPW9bZV0saT1uLnNlbmRl
        cixpLmlzRGVzdHJveWluZ3x8aS5pc0Rlc3Ryb3llZHx8dChpLG4uZXZlbnRO
        YW1lLFtpLG4ua2V5TmFtZV0sbi5saXN0ZW5lcnMpfSxyLnByb3RvdHlwZS5j
        bGVhcj1mdW5jdGlvbigpe3RoaXMub2JzZXJ2ZXJTZXQ9e30sdGhpcy5vYnNl
        cnZlcnM9W119fSgpLGZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQpe3ZhciBu
        PWVbaF0saT1uJiZuLndhdGNoaW5nW3RdPjB8fCJsZW5ndGgiPT09dCxhPW4m
        Jm4ucHJvdG8scz1uJiZuLmRlc2NzW3RdO2kmJmEhPT1lJiYocyYmcy53aWxs
        Q2hhbmdlJiZzLndpbGxDaGFuZ2UoZSx0KSxyKGUsdCxuKSxvKGUsdCxuKSxs
        KGUsdCkpfWZ1bmN0aW9uIHQoZSx0KXt2YXIgcj1lW2hdLGk9ciYmci53YXRj
        aGluZ1t0XT4wfHwibGVuZ3RoIj09PXQsbz1yJiZyLnByb3RvLHM9ciYmci5k
        ZXNjc1t0XTtvIT09ZSYmKHMmJnMuZGlkQ2hhbmdlJiZzLmRpZENoYW5nZShl
        LHQpLChpfHwibGVuZ3RoIj09PXQpJiYobihlLHQsciksYShlLHQsciwhMSks
        YyhlLHQpKSl9ZnVuY3Rpb24gcih0LHIsbil7aWYoIXQuaXNEZXN0cm95aW5n
        KXt2YXIgbz1fLGE9IW87YSYmKG89Xz17fSksaShlLHQscixvLG4pLGEmJihf
        PW51bGwpfX1mdW5jdGlvbiBuKGUscixuKXtpZighZS5pc0Rlc3Ryb3lpbmcp
        e3ZhciBvPXcsYT0hbzthJiYobz13PXt9KSxpKHQsZSxyLG8sbiksYSYmKHc9
        bnVsbCl9fWZ1bmN0aW9uIGkoZSx0LHIsbixpKXt2YXIgbz1tKHQpO2lmKG5b
        b118fChuW29dPXt9KSwhbltvXVtyXSl7bltvXVtyXT0hMDt2YXIgYT1pLmRl
        cHM7aWYoYT1hJiZhW3JdKWZvcih2YXIgcyBpbiBhKXt2YXIgdT1pLmRlc2Nz
        W3NdO3UmJnUuX3N1c3BlbmRlZD09PXR8fGUodCxzKX19fWZ1bmN0aW9uIG8o
        dCxyLG4pe2lmKG4uaGFzT3duUHJvcGVydHkoImNoYWluV2F0Y2hlcnMiKSYm
        bi5jaGFpbldhdGNoZXJzW3JdKXt2YXIgaSxvLGE9bi5jaGFpbldhdGNoZXJz
        W3JdLHM9W107Zm9yKGk9MCxvPWEubGVuZ3RoO28+aTtpKyspYVtpXS53aWxs
        Q2hhbmdlKHMpO2ZvcihpPTAsbz1zLmxlbmd0aDtvPmk7aSs9MillKHNbaV0s
        c1tpKzFdKX19ZnVuY3Rpb24gYShlLHIsbixpKXtpZihuJiZuLmhhc093blBy
        b3BlcnR5KCJjaGFpbldhdGNoZXJzIikmJm4uY2hhaW5XYXRjaGVyc1tyXSl7
        dmFyIG8sYSxzPW4uY2hhaW5XYXRjaGVyc1tyXSx1PWk/bnVsbDpbXTtmb3Io
        bz0wLGE9cy5sZW5ndGg7YT5vO28rKylzW29dLmRpZENoYW5nZSh1KTtpZigh
        aSlmb3Iobz0wLGE9dS5sZW5ndGg7YT5vO28rPTIpdCh1W29dLHVbbysxXSl9
        fWZ1bmN0aW9uIHMoKXt5Kyt9ZnVuY3Rpb24gdSgpe3ktLSwwPj15JiYoRS5j
        bGVhcigpLGcuZmx1c2goKSl9ZnVuY3Rpb24gbChlLHQpe2lmKCFlLmlzRGVz
        dHJveWluZyl7dmFyIHIsbixpPXQrIjpiZWZvcmUiO3k/KHI9RS5hZGQoZSx0
        LGkpLG49YihlLGksciksZihlLGksW2UsdF0sbikpOmYoZSxpLFtlLHRdKX19
        ZnVuY3Rpb24gYyhlLHQpe2lmKCFlLmlzRGVzdHJveWluZyl7dmFyIHIsbj10
        KyI6Y2hhbmdlIjt5PyhyPWcuYWRkKGUsdCxuKSxkKGUsbixyKSk6ZihlLG4s
        W2UsdF0pfX12YXIgaD1FbWJlci5NRVRBX0tFWSxtPUVtYmVyLmd1aWRGb3Is
        cD1FbWJlci50cnlGaW5hbGx5LGY9RW1iZXIuc2VuZEV2ZW50LGQ9RW1iZXIu
        bGlzdGVuZXJzVW5pb24sYj1FbWJlci5saXN0ZW5lcnNEaWZmLHY9RW1iZXIu
        X09ic2VydmVyU2V0LEU9bmV3IHYsZz1uZXcgdix5PTA7RW1iZXIucHJvcGVy
        dHlXaWxsQ2hhbmdlPWUsRW1iZXIucHJvcGVydHlEaWRDaGFuZ2U9dDt2YXIg
        Xyx3O0VtYmVyLm92ZXJyaWRlQ2hhaW5zPWZ1bmN0aW9uKGUsdCxyKXthKGUs
        dCxyLCEwKX0sRW1iZXIuYmVnaW5Qcm9wZXJ0eUNoYW5nZXM9cyxFbWJlci5l
        bmRQcm9wZXJ0eUNoYW5nZXM9dSxFbWJlci5jaGFuZ2VQcm9wZXJ0aWVzPWZ1
        bmN0aW9uKGUsdCl7cygpLHAoZSx1LHQpfX0oKSxmdW5jdGlvbigpe2Z1bmN0
        aW9uIGUoZSx0LHIsbyl7dmFyIGE7aWYoYT10LnNsaWNlKHQubGFzdEluZGV4
        T2YoIi4iKSsxKSx0PXQ9PT1hP2E6dC5zbGljZSgwLHQubGVuZ3RoLShhLmxl
        bmd0aCsxKSksInRoaXMiIT09dCYmKGU9bihlLHQpKSwhYXx8MD09PWEubGVu
        Z3RoKXRocm93IG5ldyBFbWJlci5FcnJvcigiUHJvcGVydHkgc2V0IGZhaWxl
        ZDogWW91IHBhc3NlZCBhbiBlbXB0eSBwYXRoIik7aWYoIWUpe2lmKG8pcmV0
        dXJuO3Rocm93IG5ldyBFbWJlci5FcnJvcignUHJvcGVydHkgc2V0IGZhaWxl
        ZDogb2JqZWN0IGluIHBhdGggIicrdCsnIiBjb3VsZCBub3QgYmUgZm91bmQg
        b3Igd2FzIGRlc3Ryb3llZC4nKX1yZXR1cm4gaShlLGEscil9dmFyIHQ9RW1i
        ZXIuTUVUQV9LRVkscj1FbWJlci5FTlYuTUFOREFUT1JZX1NFVFRFUixuPUVt
        YmVyLl9nZXRQYXRoLGk9ZnVuY3Rpb24obixpLG8sYSl7aWYoInN0cmluZyI9
        PXR5cGVvZiBuJiYobz1pLGk9bixuPW51bGwpLCFufHwtMSE9PWkuaW5kZXhP
        ZigiLiIpKXJldHVybiBlKG4saSxvLGEpO3ZhciBzLHUsbD1uW3RdLGM9bCYm
        bC5kZXNjc1tpXTtyZXR1cm4gYz9jLnNldChuLGksbyk6KHM9Im9iamVjdCI9
        PXR5cGVvZiBuJiYhKGkgaW4gbikscyYmImZ1bmN0aW9uIj09dHlwZW9mIG4u
        c2V0VW5rbm93blByb3BlcnR5P24uc2V0VW5rbm93blByb3BlcnR5KGksbyk6
        bCYmbC53YXRjaGluZ1tpXT4wPyh1PXI/bC52YWx1ZXNbaV06bltpXSxvIT09
        dSYmKEVtYmVyLnByb3BlcnR5V2lsbENoYW5nZShuLGkpLHI/KHZvaWQgMCE9
        PXV8fGkgaW4gbikmJm4ucHJvcGVydHlJc0VudW1lcmFibGUoaSk/bC52YWx1
        ZXNbaV09bzpFbWJlci5kZWZpbmVQcm9wZXJ0eShuLGksbnVsbCxvKTpuW2ld
        PW8sRW1iZXIucHJvcGVydHlEaWRDaGFuZ2UobixpKSkpOm5baV09byksb307
        RW1iZXIuY29uZmlnLm92ZXJyaWRlQWNjZXNzb3JzJiYoRW1iZXIuc2V0PWks
        RW1iZXIuY29uZmlnLm92ZXJyaWRlQWNjZXNzb3JzKCksaT1FbWJlci5zZXQp
        LEVtYmVyLnNldD1pLEVtYmVyLnRyeVNldD1mdW5jdGlvbihlLHQscil7cmV0
        dXJuIGkoZSx0LHIsITApfX0oKSxmdW5jdGlvbigpe3ZhciBlPUVtYmVyLnNl
        dCx0PUVtYmVyLmd1aWRGb3Iscj1FbWJlci5BcnJheVBvbHlmaWxscy5pbmRl
        eE9mLG49ZnVuY3Rpb24oZSl7dmFyIHQ9e307Zm9yKHZhciByIGluIGUpZS5o
        YXNPd25Qcm9wZXJ0eShyKSYmKHRbcl09ZVtyXSk7cmV0dXJuIHR9LGk9ZnVu
        Y3Rpb24oZSx0KXt2YXIgcj1lLmtleXMuY29weSgpLGk9bihlLnZhbHVlcyk7
        cmV0dXJuIHQua2V5cz1yLHQudmFsdWVzPWksdC5sZW5ndGg9ZS5sZW5ndGgs
        dH0sbz1FbWJlci5PcmRlcmVkU2V0PWZ1bmN0aW9uKCl7dGhpcy5jbGVhcigp
        fTtvLmNyZWF0ZT1mdW5jdGlvbigpe3JldHVybiBuZXcgb30sby5wcm90b3R5
        cGU9e2NsZWFyOmZ1bmN0aW9uKCl7dGhpcy5wcmVzZW5jZVNldD17fSx0aGlz
        Lmxpc3Q9W119LGFkZDpmdW5jdGlvbihlKXt2YXIgcj10KGUpLG49dGhpcy5w
        cmVzZW5jZVNldCxpPXRoaXMubGlzdDtyIGluIG58fChuW3JdPSEwLGkucHVz
        aChlKSl9LHJlbW92ZTpmdW5jdGlvbihlKXt2YXIgbj10KGUpLGk9dGhpcy5w
        cmVzZW5jZVNldCxvPXRoaXMubGlzdDtkZWxldGUgaVtuXTt2YXIgYT1yLmNh
        bGwobyxlKTthPi0xJiZvLnNwbGljZShhLDEpfSxpc0VtcHR5OmZ1bmN0aW9u
        KCl7cmV0dXJuIDA9PT10aGlzLmxpc3QubGVuZ3RofSxoYXM6ZnVuY3Rpb24o
        ZSl7dmFyIHI9dChlKSxuPXRoaXMucHJlc2VuY2VTZXQ7cmV0dXJuIHIgaW4g
        bn0sZm9yRWFjaDpmdW5jdGlvbihlLHQpe2Zvcih2YXIgcj10aGlzLnRvQXJy
        YXkoKSxuPTAsaT1yLmxlbmd0aDtpPm47bisrKWUuY2FsbCh0LHJbbl0pfSx0
        b0FycmF5OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubGlzdC5zbGljZSgpfSxj
        b3B5OmZ1bmN0aW9uKCl7dmFyIGU9bmV3IG87cmV0dXJuIGUucHJlc2VuY2VT
        ZXQ9bih0aGlzLnByZXNlbmNlU2V0KSxlLmxpc3Q9dGhpcy50b0FycmF5KCks
        ZX19O3ZhciBhPUVtYmVyLk1hcD1mdW5jdGlvbigpe3RoaXMua2V5cz1FbWJl
        ci5PcmRlcmVkU2V0LmNyZWF0ZSgpLHRoaXMudmFsdWVzPXt9fTthLmNyZWF0
        ZT1mdW5jdGlvbigpe3JldHVybiBuZXcgYX0sYS5wcm90b3R5cGU9e2xlbmd0
        aDowLGdldDpmdW5jdGlvbihlKXt2YXIgcj10aGlzLnZhbHVlcyxuPXQoZSk7
        cmV0dXJuIHJbbl19LHNldDpmdW5jdGlvbihyLG4pe3ZhciBpPXRoaXMua2V5
        cyxvPXRoaXMudmFsdWVzLGE9dChyKTtpLmFkZChyKSxvW2FdPW4sZSh0aGlz
        LCJsZW5ndGgiLGkubGlzdC5sZW5ndGgpfSxyZW1vdmU6ZnVuY3Rpb24ocil7
        dmFyIG49dGhpcy5rZXlzLGk9dGhpcy52YWx1ZXMsbz10KHIpO3JldHVybiBp
        Lmhhc093blByb3BlcnR5KG8pPyhuLnJlbW92ZShyKSxkZWxldGUgaVtvXSxl
        KHRoaXMsImxlbmd0aCIsbi5saXN0Lmxlbmd0aCksITApOiExfSxoYXM6ZnVu
        Y3Rpb24oZSl7dmFyIHI9dGhpcy52YWx1ZXMsbj10KGUpO3JldHVybiByLmhh
        c093blByb3BlcnR5KG4pfSxmb3JFYWNoOmZ1bmN0aW9uKGUscil7dmFyIG49
        dGhpcy5rZXlzLGk9dGhpcy52YWx1ZXM7bi5mb3JFYWNoKGZ1bmN0aW9uKG4p
        e3ZhciBvPXQobik7ZS5jYWxsKHIsbixpW29dKX0pfSxjb3B5OmZ1bmN0aW9u
        KCl7cmV0dXJuIGkodGhpcyxuZXcgYSl9fTt2YXIgcz1FbWJlci5NYXBXaXRo
        RGVmYXVsdD1mdW5jdGlvbihlKXthLmNhbGwodGhpcyksdGhpcy5kZWZhdWx0
        VmFsdWU9ZS5kZWZhdWx0VmFsdWV9O3MuY3JlYXRlPWZ1bmN0aW9uKGUpe3Jl
        dHVybiBlP25ldyBzKGUpOm5ldyBhfSxzLnByb3RvdHlwZT1FbWJlci5jcmVh
        dGUoYS5wcm90b3R5cGUpLHMucHJvdG90eXBlLmdldD1mdW5jdGlvbihlKXt2
        YXIgdD10aGlzLmhhcyhlKTtpZih0KXJldHVybiBhLnByb3RvdHlwZS5nZXQu
        Y2FsbCh0aGlzLGUpO3ZhciByPXRoaXMuZGVmYXVsdFZhbHVlKGUpO3JldHVy
        biB0aGlzLnNldChlLHIpLHJ9LHMucHJvdG90eXBlLmNvcHk9ZnVuY3Rpb24o
        KXtyZXR1cm4gaSh0aGlzLG5ldyBzKHtkZWZhdWx0VmFsdWU6dGhpcy5kZWZh
        dWx0VmFsdWV9KSl9fSgpLGZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXt2YXIg
        dCxyO0VtYmVyLmltcG9ydHMuY29uc29sZT90PUVtYmVyLmltcG9ydHMuY29u
        c29sZToidW5kZWZpbmVkIiE9dHlwZW9mIGNvbnNvbGUmJih0PWNvbnNvbGUp
        O3ZhciBuPSJvYmplY3QiPT10eXBlb2YgdD90W2VdOm51bGw7cmV0dXJuIG4/
        ImZ1bmN0aW9uIj09dHlwZW9mIG4uYXBwbHk/KHI9ZnVuY3Rpb24oKXtuLmFw
        cGx5KHQsYXJndW1lbnRzKX0sci5kaXNwbGF5TmFtZT0iY29uc29sZS4iK2Us
        cik6ZnVuY3Rpb24oKXt2YXIgZT1BcnJheS5wcm90b3R5cGUuam9pbi5jYWxs
        KGFyZ3VtZW50cywiLCAiKTtuKGUpfTp2b2lkIDB9ZnVuY3Rpb24gdChlLHQp
        e2lmKCFlKXRyeXt0aHJvdyBuZXcgRW1iZXIuRXJyb3IoImFzc2VydGlvbiBm
        YWlsZWQ6ICIrdCl9Y2F0Y2gocil7c2V0VGltZW91dChmdW5jdGlvbigpe3Ro
        cm93IHJ9LDApfX1FbWJlci5Mb2dnZXI9e2xvZzplKCJsb2ciKXx8RW1iZXIu
        Syx3YXJuOmUoIndhcm4iKXx8RW1iZXIuSyxlcnJvcjplKCJlcnJvciIpfHxF
        bWJlci5LLGluZm86ZSgiaW5mbyIpfHxFbWJlci5LLGRlYnVnOmUoImRlYnVn
        Iil8fGUoImluZm8iKXx8RW1iZXIuSyxhc3NlcnQ6ZSgiYXNzZXJ0Iil8fHR9
        fSgpLGZ1bmN0aW9uKCl7dmFyIGU9RW1iZXIuTUVUQV9LRVksdD1FbWJlci5t
        ZXRhLHI9RW1iZXIucGxhdGZvcm0uZGVmaW5lUHJvcGVydHksbj1FbWJlci5F
        TlYuTUFOREFUT1JZX1NFVFRFUjtFbWJlci5EZXNjcmlwdG9yPWZ1bmN0aW9u
        KCl7fTt2YXIgaT1FbWJlci5NQU5EQVRPUllfU0VUVEVSX0ZVTkNUSU9OPWZ1
        bmN0aW9uKCl7fSxvPUVtYmVyLkRFRkFVTFRfR0VUVEVSX0ZVTkNUSU9OPWZ1
        bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbigpe3ZhciByPXRoaXNbZV07cmV0
        dXJuIHImJnIudmFsdWVzW3RdfX07aWYoRW1iZXIuZGVmaW5lUHJvcGVydHk9
        ZnVuY3Rpb24oZSxzLHUsbCxjKXt2YXIgaCxtLHAsZjtyZXR1cm4gY3x8KGM9
        dChlKSksaD1jLmRlc2NzLG09Yy5kZXNjc1tzXSxwPWMud2F0Y2hpbmdbc10+
        MCxtIGluc3RhbmNlb2YgRW1iZXIuRGVzY3JpcHRvciYmbS50ZWFyZG93bihl
        LHMpLHUgaW5zdGFuY2VvZiBFbWJlci5EZXNjcmlwdG9yPyhmPXUsaFtzXT11
        LG4mJnA/cihlLHMse2NvbmZpZ3VyYWJsZTohMCxlbnVtZXJhYmxlOiEwLHdy
        aXRhYmxlOiEwLHZhbHVlOnZvaWQgMH0pOmVbc109dm9pZCAwLEVtYmVyLkZF
        QVRVUkVTLmlzRW5hYmxlZCgiY29tcG9zYWJsZS1jb21wdXRlZC1wcm9wZXJ0
        aWVzIikmJnUuZnVuYyYmdS5fZGVwZW5kZW50Q1BzJiZhKGUsdS5fZGVwZW5k
        ZW50Q1BzLGMpKTooaFtzXT12b2lkIDAsbnVsbD09dT8oZj1sLG4mJnA/KGMu
        dmFsdWVzW3NdPWwscihlLHMse2NvbmZpZ3VyYWJsZTohMCxlbnVtZXJhYmxl
        OiEwLHNldDppLGdldDpvKHMpfSkpOmVbc109bCk6KGY9dSxyKGUscyx1KSkp
        LHAmJkVtYmVyLm92ZXJyaWRlQ2hhaW5zKGUscyxjKSxlLmRpZERlZmluZVBy
        b3BlcnR5JiZlLmRpZERlZmluZVByb3BlcnR5KGUscyxmKSx0aGlzfSxFbWJl
        ci5GRUFUVVJFUy5pc0VuYWJsZWQoImNvbXBvc2FibGUtY29tcHV0ZWQtcHJv
        cGVydGllcyIpKXZhciBhPWZ1bmN0aW9uKGUsdCxyKXtmb3IodmFyIG4saSxv
        PXQubGVuZ3RoLHM9MDtvPnM7KytzKW49dFtzXSxpPW4uaW1wbGljaXRDUEtl
        eSxFbWJlci5kZWZpbmVQcm9wZXJ0eShlLGksbix2b2lkIDAsciksbi5fZGVw
        ZW5kZW50Q1BzJiZhKGUsbi5fZGVwZW5kZW50Q1BzLHIpfX0oKSxmdW5jdGlv
        bigpe3ZhciBlPUVtYmVyLmdldDtFbWJlci5nZXRQcm9wZXJ0aWVzPWZ1bmN0
        aW9uKHQpe3ZhciByPXt9LG49YXJndW1lbnRzLGk9MTsyPT09YXJndW1lbnRz
        Lmxlbmd0aCYmImFycmF5Ij09PUVtYmVyLnR5cGVPZihhcmd1bWVudHNbMV0p
        JiYoaT0wLG49YXJndW1lbnRzWzFdKTtmb3IodmFyIG89bi5sZW5ndGg7bz5p
        O2krKylyW25baV1dPWUodCxuW2ldKTtyZXR1cm4gcn19KCksZnVuY3Rpb24o
        KXt2YXIgZT1FbWJlci5jaGFuZ2VQcm9wZXJ0aWVzLHQ9RW1iZXIuc2V0O0Vt
        YmVyLnNldFByb3BlcnRpZXM9ZnVuY3Rpb24ocixuKXtyZXR1cm4gZShmdW5j
        dGlvbigpe2Zvcih2YXIgZSBpbiBuKW4uaGFzT3duUHJvcGVydHkoZSkmJnQo
        cixlLG5bZV0pfSkscn19KCksZnVuY3Rpb24oKXt2YXIgZT1FbWJlci5tZXRh
        LHQ9RW1iZXIudHlwZU9mLHI9RW1iZXIuRU5WLk1BTkRBVE9SWV9TRVRURVIs
        bj1FbWJlci5wbGF0Zm9ybS5kZWZpbmVQcm9wZXJ0eTtFbWJlci53YXRjaEtl
        eT1mdW5jdGlvbihpLG8sYSl7aWYoImxlbmd0aCIhPT1vfHwiYXJyYXkiIT09
        dChpKSl7dmFyIHM9YXx8ZShpKSx1PXMud2F0Y2hpbmc7dVtvXT91W29dPSh1
        W29dfHwwKSsxOih1W29dPTEsImZ1bmN0aW9uIj09dHlwZW9mIGkud2lsbFdh
        dGNoUHJvcGVydHkmJmkud2lsbFdhdGNoUHJvcGVydHkobyksciYmbyBpbiBp
        JiYocy52YWx1ZXNbb109aVtvXSxuKGksbyx7Y29uZmlndXJhYmxlOiEwLGVu
        dW1lcmFibGU6aS5wcm9wZXJ0eUlzRW51bWVyYWJsZShvKSxzZXQ6RW1iZXIu
        TUFOREFUT1JZX1NFVFRFUl9GVU5DVElPTixnZXQ6RW1iZXIuREVGQVVMVF9H
        RVRURVJfRlVOQ1RJT04obyl9KSkpfX0sRW1iZXIudW53YXRjaEtleT1mdW5j
        dGlvbih0LGksbyl7dmFyIGE9b3x8ZSh0KSxzPWEud2F0Y2hpbmc7MT09PXNb
        aV0/KHNbaV09MCwiZnVuY3Rpb24iPT10eXBlb2YgdC5kaWRVbndhdGNoUHJv
        cGVydHkmJnQuZGlkVW53YXRjaFByb3BlcnR5KGkpLHImJmkgaW4gdCYmbih0
        LGkse2NvbmZpZ3VyYWJsZTohMCxlbnVtZXJhYmxlOnQucHJvcGVydHlJc0Vu
        dW1lcmFibGUoaSksc2V0OmZ1bmN0aW9uKGUpe24odCxpLHtjb25maWd1cmFi
        bGU6ITAsd3JpdGFibGU6ITAsZW51bWVyYWJsZTohMCx2YWx1ZTplfSksZGVs
        ZXRlIGEudmFsdWVzW2ldfSxnZXQ6RW1iZXIuREVGQVVMVF9HRVRURVJfRlVO
        Q1RJT04oaSl9KSk6c1tpXT4xJiZzW2ldLS19fSgpLGZ1bmN0aW9uKCl7ZnVu
        Y3Rpb24gZShlKXtyZXR1cm4gZS5tYXRjaChjKVswXX1mdW5jdGlvbiB0KGUs
        dCxyKXtpZihlJiYib2JqZWN0Ij09dHlwZW9mIGUpe3ZhciBpPW4oZSksbz1p
        LmNoYWluV2F0Y2hlcnM7aS5oYXNPd25Qcm9wZXJ0eSgiY2hhaW5XYXRjaGVy
        cyIpfHwobz1pLmNoYWluV2F0Y2hlcnM9e30pLG9bdF18fChvW3RdPVtdKSxv
        W3RdLnB1c2gociksdShlLHQsaSl9fWZ1bmN0aW9uIHIoZSx0KXtpZighZSly
        ZXR1cm4gdm9pZCAwO3ZhciByPWVbaF07aWYociYmci5wcm90bz09PWUpcmV0
        dXJuIHZvaWQgMDtpZigiQGVhY2giPT09dClyZXR1cm4gaShlLHQpO3ZhciBu
        PXImJnIuZGVzY3NbdF07cmV0dXJuIG4mJm4uX2NhY2hlYWJsZT90IGluIHIu
        Y2FjaGU/ci5jYWNoZVt0XTp2b2lkIDA6aShlLHQpfXZhciBuPUVtYmVyLm1l
        dGEsaT1FbWJlci5nZXQsbz1FbWJlci5ub3JtYWxpemVUdXBsZSxhPUVtYmVy
        LkFycmF5UG9seWZpbGxzLmZvckVhY2gscz1FbWJlci53YXJuLHU9RW1iZXIu
        d2F0Y2hLZXksbD1FbWJlci51bndhdGNoS2V5LGM9L14oW15cLlwqXSspLyxo
        PUVtYmVyLk1FVEFfS0VZLG09W107RW1iZXIuZmx1c2hQZW5kaW5nQ2hhaW5z
        PWZ1bmN0aW9uKCl7aWYoMCE9PW0ubGVuZ3RoKXt2YXIgZT1tO209W10sYS5j
        YWxsKGUsZnVuY3Rpb24oZSl7ZVswXS5hZGQoZVsxXSl9KSxzKCJXYXRjaGlu
        ZyBhbiB1bmRlZmluZWQgZ2xvYmFsLCBFbWJlciBleHBlY3RzIHdhdGNoZWQg
        Z2xvYmFscyB0byBiZSBzZXR1cCBieSB0aGUgdGltZSB0aGUgcnVuIGxvb3Ag
        aXMgZmx1c2hlZCwgY2hlY2sgZm9yIHR5cG9zIiwwPT09bS5sZW5ndGgpfX07
        dmFyIHA9RW1iZXIucmVtb3ZlQ2hhaW5XYXRjaGVyPWZ1bmN0aW9uKGUsdCxy
        KXtpZihlJiYib2JqZWN0Ij09dHlwZW9mIGUpe3ZhciBuPWVbaF07aWYoIW58
        fG4uaGFzT3duUHJvcGVydHkoImNoYWluV2F0Y2hlcnMiKSl7dmFyIGk9biYm
        bi5jaGFpbldhdGNoZXJzO2lmKGkmJmlbdF0pe2k9aVt0XTtmb3IodmFyIG89
        MCxhPWkubGVuZ3RoO2E+bztvKyspaVtvXT09PXImJmkuc3BsaWNlKG8sMSl9
        bChlLHQsbil9fX0sZj1FbWJlci5fQ2hhaW5Ob2RlPWZ1bmN0aW9uKGUscixu
        KXt0aGlzLl9wYXJlbnQ9ZSx0aGlzLl9rZXk9cix0aGlzLl93YXRjaGluZz12
        b2lkIDA9PT1uLHRoaXMuX3ZhbHVlPW4sdGhpcy5fcGF0aHM9e30sdGhpcy5f
        d2F0Y2hpbmcmJih0aGlzLl9vYmplY3Q9ZS52YWx1ZSgpLHRoaXMuX29iamVj
        dCYmdCh0aGlzLl9vYmplY3QsdGhpcy5fa2V5LHRoaXMpKSx0aGlzLl9wYXJl
        bnQmJiJAZWFjaCI9PT10aGlzLl9wYXJlbnQuX2tleSYmdGhpcy52YWx1ZSgp
        fSxkPWYucHJvdG90eXBlO2QudmFsdWU9ZnVuY3Rpb24oKXtpZih2b2lkIDA9
        PT10aGlzLl92YWx1ZSYmdGhpcy5fd2F0Y2hpbmcpe3ZhciBlPXRoaXMuX3Bh
        cmVudC52YWx1ZSgpO3RoaXMuX3ZhbHVlPXIoZSx0aGlzLl9rZXkpfXJldHVy
        biB0aGlzLl92YWx1ZX0sZC5kZXN0cm95PWZ1bmN0aW9uKCl7aWYodGhpcy5f
        d2F0Y2hpbmcpe3ZhciBlPXRoaXMuX29iamVjdDtlJiZwKGUsdGhpcy5fa2V5
        LHRoaXMpLHRoaXMuX3dhdGNoaW5nPSExfX0sZC5jb3B5PWZ1bmN0aW9uKGUp
        e3ZhciB0LHI9bmV3IGYobnVsbCxudWxsLGUpLG49dGhpcy5fcGF0aHM7Zm9y
        KHQgaW4gbiluW3RdPD0wfHxyLmFkZCh0KTtyZXR1cm4gcn0sZC5hZGQ9ZnVu
        Y3Rpb24odCl7dmFyIHIsbixpLGEscztpZihzPXRoaXMuX3BhdGhzLHNbdF09
        KHNbdF18fDApKzEscj10aGlzLnZhbHVlKCksbj1vKHIsdCksblswXSYmblsw
        XT09PXIpdD1uWzFdLGk9ZSh0KSx0PXQuc2xpY2UoaS5sZW5ndGgrMSk7ZWxz
        ZXtpZighblswXSlyZXR1cm4gbS5wdXNoKFt0aGlzLHRdKSxuLmxlbmd0aD0w
        LHZvaWQgMDthPW5bMF0saT10LnNsaWNlKDAsMC0oblsxXS5sZW5ndGgrMSkp
        LHQ9blsxXX1uLmxlbmd0aD0wLHRoaXMuY2hhaW4oaSx0LGEpfSxkLnJlbW92
        ZT1mdW5jdGlvbih0KXt2YXIgcixuLGksYSxzO3M9dGhpcy5fcGF0aHMsc1t0
        XT4wJiZzW3RdLS0scj10aGlzLnZhbHVlKCksbj1vKHIsdCksblswXT09PXI/
        KHQ9blsxXSxpPWUodCksdD10LnNsaWNlKGkubGVuZ3RoKzEpKTooYT1uWzBd
        LGk9dC5zbGljZSgwLDAtKG5bMV0ubGVuZ3RoKzEpKSx0PW5bMV0pLG4ubGVu
        Z3RoPTAsdGhpcy51bmNoYWluKGksdCl9LGQuY291bnQ9MCxkLmNoYWluPWZ1
        bmN0aW9uKHQscixuKXt2YXIgaSxvPXRoaXMuX2NoYWlucztvfHwobz10aGlz
        Ll9jaGFpbnM9e30pLGk9b1t0XSxpfHwoaT1vW3RdPW5ldyBmKHRoaXMsdCxu
        KSksaS5jb3VudCsrLHImJnIubGVuZ3RoPjAmJih0PWUocikscj1yLnNsaWNl
        KHQubGVuZ3RoKzEpLGkuY2hhaW4odCxyKSl9LGQudW5jaGFpbj1mdW5jdGlv
        bih0LHIpe3ZhciBuPXRoaXMuX2NoYWlucyxpPW5bdF07ciYmci5sZW5ndGg+
        MSYmKHQ9ZShyKSxyPXIuc2xpY2UodC5sZW5ndGgrMSksaS51bmNoYWluKHQs
        cikpLGkuY291bnQtLSxpLmNvdW50PD0wJiYoZGVsZXRlIG5baS5fa2V5XSxp
        LmRlc3Ryb3koKSl9LGQud2lsbENoYW5nZT1mdW5jdGlvbihlKXt2YXIgdD10
        aGlzLl9jaGFpbnM7aWYodClmb3IodmFyIHIgaW4gdCl0Lmhhc093blByb3Bl
        cnR5KHIpJiZ0W3JdLndpbGxDaGFuZ2UoZSk7dGhpcy5fcGFyZW50JiZ0aGlz
        Ll9wYXJlbnQuY2hhaW5XaWxsQ2hhbmdlKHRoaXMsdGhpcy5fa2V5LDEsZSl9
        LGQuY2hhaW5XaWxsQ2hhbmdlPWZ1bmN0aW9uKGUsdCxyLG4pe3RoaXMuX2tl
        eSYmKHQ9dGhpcy5fa2V5KyIuIit0KSx0aGlzLl9wYXJlbnQ/dGhpcy5fcGFy
        ZW50LmNoYWluV2lsbENoYW5nZSh0aGlzLHQscisxLG4pOihyPjEmJm4ucHVz
        aCh0aGlzLnZhbHVlKCksdCksdD0idGhpcy4iK3QsdGhpcy5fcGF0aHNbdF0+
        MCYmbi5wdXNoKHRoaXMudmFsdWUoKSx0KSl9LGQuY2hhaW5EaWRDaGFuZ2U9
        ZnVuY3Rpb24oZSx0LHIsbil7dGhpcy5fa2V5JiYodD10aGlzLl9rZXkrIi4i
        K3QpLHRoaXMuX3BhcmVudD90aGlzLl9wYXJlbnQuY2hhaW5EaWRDaGFuZ2Uo
        dGhpcyx0LHIrMSxuKToocj4xJiZuLnB1c2godGhpcy52YWx1ZSgpLHQpLHQ9
        InRoaXMuIit0LHRoaXMuX3BhdGhzW3RdPjAmJm4ucHVzaCh0aGlzLnZhbHVl
        KCksdCkpfSxkLmRpZENoYW5nZT1mdW5jdGlvbihlKXtpZih0aGlzLl93YXRj
        aGluZyl7dmFyIHI9dGhpcy5fcGFyZW50LnZhbHVlKCk7ciE9PXRoaXMuX29i
        amVjdCYmKHAodGhpcy5fb2JqZWN0LHRoaXMuX2tleSx0aGlzKSx0aGlzLl9v
        YmplY3Q9cix0KHIsdGhpcy5fa2V5LHRoaXMpKSx0aGlzLl92YWx1ZT12b2lk
        IDAsdGhpcy5fcGFyZW50JiYiQGVhY2giPT09dGhpcy5fcGFyZW50Ll9rZXkm
        JnRoaXMudmFsdWUoKX12YXIgbj10aGlzLl9jaGFpbnM7aWYobilmb3IodmFy
        IGkgaW4gbiluLmhhc093blByb3BlcnR5KGkpJiZuW2ldLmRpZENoYW5nZShl
        KTtudWxsIT09ZSYmdGhpcy5fcGFyZW50JiZ0aGlzLl9wYXJlbnQuY2hhaW5E
        aWRDaGFuZ2UodGhpcyx0aGlzLl9rZXksMSxlKX0sRW1iZXIuZmluaXNoQ2hh
        aW5zPWZ1bmN0aW9uKGUpe3ZhciB0PWVbaF0scj10JiZ0LmNoYWlucztyJiYo
        ci52YWx1ZSgpIT09ZT9uKGUpLmNoYWlucz1yPXIuY29weShlKTpyLmRpZENo
        YW5nZShudWxsKSl9fSgpLGZ1bmN0aW9uKCl7dmFyIGU9RW1iZXIuRW51bWVy
        YWJsZVV0aWxzLmZvckVhY2gsdD0vXigoPzpbXlwuXSpcLikqKVx7KC4qKVx9
        JC87RW1iZXIuZXhwYW5kUHJvcGVydGllcz1mdW5jdGlvbihyLG4pe3ZhciBp
        LG8sYTsoaT10LmV4ZWMocikpPyhvPWlbMV0sYT1pWzJdLGUoYS5zcGxpdCgi
        LCIpLGZ1bmN0aW9uKGUpe24obytlKX0pKTpuKHIpfX0oKSxmdW5jdGlvbigp
        e2Z1bmN0aW9uIGUoZSxyKXt2YXIgaT1yfHx0KGUpLG89aS5jaGFpbnM7cmV0
        dXJuIG8/by52YWx1ZSgpIT09ZSYmKG89aS5jaGFpbnM9by5jb3B5KGUpKTpv
        PWkuY2hhaW5zPW5ldyBuKG51bGwsbnVsbCxlKSxvfXZhciB0PUVtYmVyLm1l
        dGEscj1FbWJlci50eXBlT2Ysbj1FbWJlci5fQ2hhaW5Ob2RlO0VtYmVyLndh
        dGNoUGF0aD1mdW5jdGlvbihuLGksbyl7aWYoImxlbmd0aCIhPT1pfHwiYXJy
        YXkiIT09cihuKSl7dmFyIGE9b3x8dChuKSxzPWEud2F0Y2hpbmc7c1tpXT9z
        W2ldPShzW2ldfHwwKSsxOihzW2ldPTEsZShuLGEpLmFkZChpKSl9fSxFbWJl
        ci51bndhdGNoUGF0aD1mdW5jdGlvbihyLG4saSl7dmFyIG89aXx8dChyKSxh
        PW8ud2F0Y2hpbmc7MT09PWFbbl0/KGFbbl09MCxlKHIsbykucmVtb3ZlKG4p
        KTphW25dPjEmJmFbbl0tLX19KCksZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUp
        e3JldHVybiIqIj09PWV8fCFjLnRlc3QoZSl9dmFyIHQ9KEVtYmVyLm1ldGEs
        RW1iZXIuR1VJRF9LRVkpLHI9RW1iZXIuTUVUQV9LRVksbj1FbWJlci5yZW1v
        dmVDaGFpbldhdGNoZXIsaT1FbWJlci53YXRjaEtleSxvPUVtYmVyLnVud2F0
        Y2hLZXksYT1FbWJlci53YXRjaFBhdGgscz1FbWJlci51bndhdGNoUGF0aCx1
        PUVtYmVyLnR5cGVPZixsPUVtYmVyLmdlbmVyYXRlR3VpZCxjPS9bXC5cKl0v
        O0VtYmVyLndhdGNoPWZ1bmN0aW9uKHQscixuKXsoImxlbmd0aCIhPT1yfHwi
        YXJyYXkiIT09dSh0KSkmJihlKHIpP2kodCxyLG4pOmEodCxyLG4pKX0sRW1i
        ZXIuaXNXYXRjaGluZz1mdW5jdGlvbihlLHQpe3ZhciBuPWVbcl07cmV0dXJu
        KG4mJm4ud2F0Y2hpbmdbdF0pPjB9LEVtYmVyLndhdGNoLmZsdXNoUGVuZGlu
        Zz1FbWJlci5mbHVzaFBlbmRpbmdDaGFpbnMsRW1iZXIudW53YXRjaD1mdW5j
        dGlvbih0LHIsbil7KCJsZW5ndGgiIT09cnx8ImFycmF5IiE9PXUodCkpJiYo
        ZShyKT9vKHQscixuKTpzKHQscixuKSl9LEVtYmVyLnJld2F0Y2g9ZnVuY3Rp
        b24oZSl7dmFyIG49ZVtyXSxpPW4mJm4uY2hhaW5zO3QgaW4gZSYmIWUuaGFz
        T3duUHJvcGVydHkodCkmJmwoZSksaSYmaS52YWx1ZSgpIT09ZSYmKG4uY2hh
        aW5zPWkuY29weShlKSl9O3ZhciBoPVtdO0VtYmVyLmRlc3Ryb3k9ZnVuY3Rp
        b24oZSl7dmFyIHQsaSxvLGEscz1lW3JdO2lmKHMmJihlW3JdPW51bGwsdD1z
        LmNoYWlucykpZm9yKGgucHVzaCh0KTtoLmxlbmd0aD4wOyl7aWYodD1oLnBv
        cCgpLGk9dC5fY2hhaW5zKWZvcihvIGluIGkpaS5oYXNPd25Qcm9wZXJ0eShv
        KSYmaC5wdXNoKGlbb10pO3QuX3dhdGNoaW5nJiYoYT10Ll9vYmplY3QsYSYm
        bihhLHQuX2tleSx0KSl9fX0oKSxmdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0
        KXt2YXIgcj1lW3RdO3JldHVybiByP2UuaGFzT3duUHJvcGVydHkodCl8fChy
        PWVbdF09aChyKSk6cj1lW3RdPXt9LHJ9ZnVuY3Rpb24gdCh0KXtyZXR1cm4g
        ZSh0LCJkZXBzIil9ZnVuY3Rpb24gcihyLG4saSxvKXt2YXIgYSxzLHUsbCxj
        LGg9ci5fZGVwZW5kZW50S2V5cztpZihoKWZvcihhPXQobykscz0wLHU9aC5s
        ZW5ndGg7dT5zO3MrKylsPWhbc10sYz1lKGEsbCksY1tpXT0oY1tpXXx8MCkr
        MSxwKG4sbCxvKX1mdW5jdGlvbiBuKHIsbixpLG8pe3ZhciBhLHMsdSxsLGMs
        aD1yLl9kZXBlbmRlbnRLZXlzO2lmKGgpZm9yKGE9dChvKSxzPTAsdT1oLmxl
        bmd0aDt1PnM7cysrKWw9aFtzXSxjPWUoYSxsKSxjW2ldPShjW2ldfHwwKS0x
        LGYobixsLG8pfWZ1bmN0aW9uIGkoZSx0KXt0aGlzLmZ1bmM9ZSxFbWJlci5G
        RUFUVVJFUy5pc0VuYWJsZWQoImNvbXBvc2FibGUtY29tcHV0ZWQtcHJvcGVy
        dGllcyIpP1AodGhpcyx0JiZ0LmRlcGVuZGVudEtleXMpOnRoaXMuX2RlcGVu
        ZGVudEtleXM9dCYmdC5kZXBlbmRlbnRLZXlzLHRoaXMuX2NhY2hlYWJsZT10
        JiZ2b2lkIDAhPT10LmNhY2hlYWJsZT90LmNhY2hlYWJsZTohMCx0aGlzLl9y
        ZWFkT25seT10JiYodm9pZCAwIT09dC5yZWFkT25seXx8ISF0LnJlYWRPbmx5
        KX1mdW5jdGlvbiBvKGUpe2Zvcih2YXIgdD0wLHI9ZS5sZW5ndGg7cj50O3Qr
        KyllW3RdLmRpZENoYW5nZShudWxsKX1mdW5jdGlvbiBhKGUsdCl7Zm9yKHZh
        ciByPXt9LG49MDtuPHQubGVuZ3RoO24rKylyW3Rbbl1dPXMoZSx0W25dKTty
        ZXR1cm4gcn12YXIgcz1FbWJlci5nZXQsdT1FbWJlci5zZXQsbD1FbWJlci5t
        ZXRhLGM9W10uc2xpY2UsaD1FbWJlci5jcmVhdGUsbT1FbWJlci5NRVRBX0tF
        WSxwPUVtYmVyLndhdGNoLGY9RW1iZXIudW53YXRjaCxkPUVtYmVyLmV4cGFu
        ZFByb3BlcnRpZXM7RW1iZXIuQ29tcHV0ZWRQcm9wZXJ0eT1pLGkucHJvdG90
        eXBlPW5ldyBFbWJlci5EZXNjcmlwdG9yO3ZhciBiPWkucHJvdG90eXBlO2Iu
        X2RlcGVuZGVudEtleXM9dm9pZCAwLGIuX3N1c3BlbmRlZD12b2lkIDAsYi5f
        bWV0YT12b2lkIDAsRW1iZXIuRkVBVFVSRVMuaXNFbmFibGVkKCJjb21wb3Nh
        YmxlLWNvbXB1dGVkLXByb3BlcnRpZXMiKSYmKGIuX2RlcGVuZGVudENQcz12
        b2lkIDAsYi5pbXBsaWNpdENQS2V5PXZvaWQgMCxiLnRvU3RyaW5nPWZ1bmN0
        aW9uKCl7cmV0dXJuIHRoaXMuaW1wbGljaXRDUEtleT90aGlzLmltcGxpY2l0
        Q1BLZXk6RW1iZXIuRGVzY3JpcHRvci5wcm90b3R5cGUudG9TdHJpbmcuYXBw
        bHkodGhpcyxhcmd1bWVudHMpfSksYi5jYWNoZWFibGU9ZnVuY3Rpb24oZSl7
        cmV0dXJuIHRoaXMuX2NhY2hlYWJsZT1lIT09ITEsdGhpc30sYi52b2xhdGls
        ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNhY2hlYWJsZSghMSl9LGIucmVh
        ZE9ubHk9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX3JlYWRPbmx5PXZvaWQg
        MD09PWV8fCEhZSx0aGlzfSxiLnByb3BlcnR5PWZ1bmN0aW9uKCl7dmFyIGUs
        dD1mdW5jdGlvbih0KXtlLnB1c2godCl9O2U9W107Zm9yKHZhciByPTAsbj1h
        cmd1bWVudHMubGVuZ3RoO24+cjtyKyspZChhcmd1bWVudHNbcl0sdCk7cmV0
        dXJuIEVtYmVyLkZFQVRVUkVTLmlzRW5hYmxlZCgiY29tcG9zYWJsZS1jb21w
        dXRlZC1wcm9wZXJ0aWVzIik/UCh0aGlzLGUpOnRoaXMuX2RlcGVuZGVudEtl
        eXM9ZSx0aGlzfSxiLm1ldGE9ZnVuY3Rpb24oZSl7cmV0dXJuIDA9PT1hcmd1
        bWVudHMubGVuZ3RoP3RoaXMuX21ldGF8fHt9Oih0aGlzLl9tZXRhPWUsdGhp
        cyl9LGIuZGlkQ2hhbmdlPWZ1bmN0aW9uKGUsdCl7aWYodGhpcy5fY2FjaGVh
        YmxlJiZ0aGlzLl9zdXNwZW5kZWQhPT1lKXt2YXIgcj1sKGUpO3QgaW4gci5j
        YWNoZSYmKGRlbGV0ZSByLmNhY2hlW3RdLG4odGhpcyxlLHQscikpfX0sYi5n
        ZXQ9ZnVuY3Rpb24oZSx0KXt2YXIgbixpLGEscztpZih0aGlzLl9jYWNoZWFi
        bGUpe2lmKGE9bChlKSxpPWEuY2FjaGUsdCBpbiBpKXJldHVybiBpW3RdO249
        aVt0XT10aGlzLmZ1bmMuY2FsbChlLHQpLHM9YS5jaGFpbldhdGNoZXJzJiZh
        LmNoYWluV2F0Y2hlcnNbdF0scyYmbyhzKSxyKHRoaXMsZSx0LGEpfWVsc2Ug
        bj10aGlzLmZ1bmMuY2FsbChlLHQpO3JldHVybiBufSxiLnNldD1mdW5jdGlv
        bihlLHQsbil7dmFyIGksbyxhLHM9dGhpcy5fY2FjaGVhYmxlLHU9dGhpcy5m
        dW5jLGM9bChlLHMpLGg9Yy53YXRjaGluZ1t0XSxtPXRoaXMuX3N1c3BlbmRl
        ZCxwPSExLGY9Yy5jYWNoZTtpZih0aGlzLl9yZWFkT25seSl0aHJvdyBuZXcg
        RW1iZXIuRXJyb3IoIkNhbm5vdCBTZXQ6ICIrdCsiIG9uOiAiK0VtYmVyLmlu
        c3BlY3QoZSkpO3RoaXMuX3N1c3BlbmRlZD1lO3RyeXtpZihzJiZmLmhhc093
        blByb3BlcnR5KHQpJiYobz1mW3RdLHA9ITApLGk9dS53cmFwcGVkRnVuY3Rp
        b24/dS53cmFwcGVkRnVuY3Rpb24ubGVuZ3RoOnUubGVuZ3RoLDM9PT1pKWE9
        dS5jYWxsKGUsdCxuLG8pO2Vsc2V7aWYoMiE9PWkpcmV0dXJuIEVtYmVyLmRl
        ZmluZVByb3BlcnR5KGUsdCxudWxsLG8pLEVtYmVyLnNldChlLHQsbiksdm9p
        ZCAwO2E9dS5jYWxsKGUsdCxuKX1pZihwJiZvPT09YSlyZXR1cm47aCYmRW1i
        ZXIucHJvcGVydHlXaWxsQ2hhbmdlKGUsdCkscCYmZGVsZXRlIGZbdF0scyYm
        KHB8fHIodGhpcyxlLHQsYyksZlt0XT1hKSxoJiZFbWJlci5wcm9wZXJ0eURp
        ZENoYW5nZShlLHQpfWZpbmFsbHl7dGhpcy5fc3VzcGVuZGVkPW19cmV0dXJu
        IGF9LGIudGVhcmRvd249ZnVuY3Rpb24oZSx0KXt2YXIgcj1sKGUpO3JldHVy
        biB0IGluIHIuY2FjaGUmJm4odGhpcyxlLHQsciksdGhpcy5fY2FjaGVhYmxl
        JiZkZWxldGUgci5jYWNoZVt0XSxudWxsfSxFbWJlci5jb21wdXRlZD1mdW5j
        dGlvbihlKXt2YXIgdDtpZihhcmd1bWVudHMubGVuZ3RoPjEmJih0PWMuY2Fs
        bChhcmd1bWVudHMsMCwtMSksZT1jLmNhbGwoYXJndW1lbnRzLC0xKVswXSks
        ImZ1bmN0aW9uIiE9dHlwZW9mIGUpdGhyb3cgbmV3IEVtYmVyLkVycm9yKCJD
        b21wdXRlZCBQcm9wZXJ0eSBkZWNsYXJlZCB3aXRob3V0IGEgcHJvcGVydHkg
        ZnVuY3Rpb24iKTt2YXIgcj1uZXcgaShlKTtyZXR1cm4gdCYmci5wcm9wZXJ0
        eS5hcHBseShyLHQpLHJ9LEVtYmVyLmNhY2hlRm9yPWZ1bmN0aW9uKGUsdCl7
        dmFyIHI9ZVttXSxuPXImJnIuY2FjaGU7cmV0dXJuIG4mJnQgaW4gbj9uW3Rd
        OnZvaWQgMH07dmFyIHYsRTtpZihFbWJlci5GRUFUVVJFUy5pc0VuYWJsZWQo
        ImNvbXBvc2FibGUtY29tcHV0ZWQtcHJvcGVydGllcyIpKXt2YXIgZz1FbWJl
        ci5ndWlkRm9yLHk9RW1iZXIuRW51bWVyYWJsZVV0aWxzLm1hcCxfPUVtYmVy
        LkVudW1lcmFibGVVdGlscy5maWx0ZXIsdz0oRW1iZXIudHlwZU9mLGZ1bmN0
        aW9uKGUpe3JldHVybltnKGUpXS5jb25jYXQoZS5fZGVwZW5kZW50S2V5cyku
        am9pbigiXyIpLnJlcGxhY2UoL1wuL2csIl9ET1RfIikKfSksQz1mdW5jdGlv
        bihlKXtyZXR1cm4gZSBpbnN0YW5jZW9mIEVtYmVyLkNvbXB1dGVkUHJvcGVy
        dHk/dyhlKTplfSxPPWZ1bmN0aW9uKGUpe3JldHVybiB5KGUsZnVuY3Rpb24o
        ZSl7cmV0dXJuIEMoZSl9KX0sQT1mdW5jdGlvbihlKXtyZXR1cm4gXyhlLGZ1
        bmN0aW9uKGUpe3JldHVybiBlIGluc3RhbmNlb2YgRW1iZXIuQ29tcHV0ZWRQ
        cm9wZXJ0eX0pfSxQPWZ1bmN0aW9uKGUsdCl7dD8oZS5fZGVwZW5kZW50S2V5
        cz1PKHQpLGUuX2RlcGVuZGVudENQcz1BKHQpKTplLl9kZXBlbmRlbnRLZXlz
        PWUuX2RlcGVuZGVudENQcz1bXSxlLmltcGxpY2l0Q1BLZXk9dyhlKX07RW1i
        ZXIuY29tcHV0ZWQubm9ybWFsaXplRGVwZW5kZW50S2V5PUMsRW1iZXIuY29t
        cHV0ZWQubm9ybWFsaXplRGVwZW5kZW50S2V5cz1PLHY9ZnVuY3Rpb24oZSx0
        KXtFbWJlci5jb21wdXRlZFtlXT1mdW5jdGlvbihlKXt2YXIgcj1PKGMuY2Fs
        bChhcmd1bWVudHMpKTtyZXR1cm4gRW1iZXIuY29tcHV0ZWQoZSxmdW5jdGlv
        bigpe3JldHVybiB0LmFwcGx5KHRoaXMscil9KX19fUVtYmVyLkZFQVRVUkVT
        LmlzRW5hYmxlZCgiY29tcG9zYWJsZS1jb21wdXRlZC1wcm9wZXJ0aWVzIik/
        RT1mdW5jdGlvbihlLHQpe0VtYmVyLmNvbXB1dGVkW2VdPWZ1bmN0aW9uKCl7
        dmFyIGU9Yy5jYWxsKGFyZ3VtZW50cykscj1PKGUpLG49RW1iZXIuY29tcHV0
        ZWQoZnVuY3Rpb24oKXtyZXR1cm4gdC5hcHBseSh0aGlzLFthKHRoaXMscild
        KX0pO3JldHVybiBuLnByb3BlcnR5LmFwcGx5KG4sZSl9fToodj1mdW5jdGlv
        bihlLHQpe0VtYmVyLmNvbXB1dGVkW2VdPWZ1bmN0aW9uKGUpe3ZhciByPWMu
        Y2FsbChhcmd1bWVudHMpO3JldHVybiBFbWJlci5jb21wdXRlZChlLGZ1bmN0
        aW9uKCl7cmV0dXJuIHQuYXBwbHkodGhpcyxyKX0pfX0sRT1mdW5jdGlvbihl
        LHQpe0VtYmVyLmNvbXB1dGVkW2VdPWZ1bmN0aW9uKCl7dmFyIGU9Yy5jYWxs
        KGFyZ3VtZW50cykscj1FbWJlci5jb21wdXRlZChmdW5jdGlvbigpe3JldHVy
        biB0LmFwcGx5KHRoaXMsW2EodGhpcyxlKV0pfSk7cmV0dXJuIHIucHJvcGVy
        dHkuYXBwbHkocixlKX19KSxFbWJlci5GRUFUVVJFUy5pc0VuYWJsZWQoImNv
        bXBvc2FibGUtY29tcHV0ZWQtcHJvcGVydGllcyIpJiYoRW1iZXIuY29tcHV0
        ZWQubGl0ZXJhbD1mdW5jdGlvbihlKXtyZXR1cm4gRW1iZXIuY29tcHV0ZWQo
        ZnVuY3Rpb24oKXtyZXR1cm4gZX0pfSksdigiZW1wdHkiLGZ1bmN0aW9uKGUp
        e3JldHVybiBFbWJlci5pc0VtcHR5KHModGhpcyxlKSl9KSx2KCJub3RFbXB0
        eSIsZnVuY3Rpb24oZSl7cmV0dXJuIUVtYmVyLmlzRW1wdHkocyh0aGlzLGUp
        KX0pLHYoIm5vbmUiLGZ1bmN0aW9uKGUpe3JldHVybiBFbWJlci5pc05vbmUo
        cyh0aGlzLGUpKX0pLHYoIm5vdCIsZnVuY3Rpb24oZSl7cmV0dXJuIXModGhp
        cyxlKX0pLHYoImJvb2wiLGZ1bmN0aW9uKGUpe3JldHVybiEhcyh0aGlzLGUp
        fSksdigibWF0Y2giLGZ1bmN0aW9uKGUsdCl7dmFyIHI9cyh0aGlzLGUpO3Jl
        dHVybiJzdHJpbmciPT10eXBlb2Ygcj90LnRlc3Qocik6ITF9KSx2KCJlcXVh
        bCIsZnVuY3Rpb24oZSx0KXtyZXR1cm4gcyh0aGlzLGUpPT09dH0pLHYoImd0
        IixmdW5jdGlvbihlLHQpe3JldHVybiBzKHRoaXMsZSk+dH0pLHYoImd0ZSIs
        ZnVuY3Rpb24oZSx0KXtyZXR1cm4gcyh0aGlzLGUpPj10fSksdigibHQiLGZ1
        bmN0aW9uKGUsdCl7cmV0dXJuIHModGhpcyxlKTx0fSksdigibHRlIixmdW5j
        dGlvbihlLHQpe3JldHVybiBzKHRoaXMsZSk8PXR9KSxFKCJhbmQiLGZ1bmN0
        aW9uKGUpe2Zvcih2YXIgdCBpbiBlKWlmKGUuaGFzT3duUHJvcGVydHkodCkm
        JiFlW3RdKXJldHVybiExO3JldHVybiEwfSksRSgib3IiLGZ1bmN0aW9uKGUp
        e2Zvcih2YXIgdCBpbiBlKWlmKGUuaGFzT3duUHJvcGVydHkodCkmJmVbdF0p
        cmV0dXJuITA7cmV0dXJuITF9KSxFKCJhbnkiLGZ1bmN0aW9uKGUpe2Zvcih2
        YXIgdCBpbiBlKWlmKGUuaGFzT3duUHJvcGVydHkodCkmJmVbdF0pcmV0dXJu
        IGVbdF07cmV0dXJuIG51bGx9KSxFKCJjb2xsZWN0IixmdW5jdGlvbihlKXt2
        YXIgdD1bXTtmb3IodmFyIHIgaW4gZSllLmhhc093blByb3BlcnR5KHIpJiYo
        RW1iZXIuaXNOb25lKGVbcl0pP3QucHVzaChudWxsKTp0LnB1c2goZVtyXSkp
        O3JldHVybiB0fSksRW1iZXIuY29tcHV0ZWQuYWxpYXM9ZnVuY3Rpb24oZSl7
        cmV0dXJuIEVtYmVyLmNvbXB1dGVkKGUsZnVuY3Rpb24odCxyKXtyZXR1cm4g
        YXJndW1lbnRzLmxlbmd0aD4xPyh1KHRoaXMsZSxyKSxyKTpzKHRoaXMsZSl9
        KX0sRW1iZXIuY29tcHV0ZWQub25lV2F5PWZ1bmN0aW9uKGUpe3JldHVybiBF
        bWJlci5jb21wdXRlZChlLGZ1bmN0aW9uKCl7cmV0dXJuIHModGhpcyxlKX0p
        fSxFbWJlci5jb21wdXRlZC5yZWFkT25seT1mdW5jdGlvbihlKXtyZXR1cm4g
        RW1iZXIuY29tcHV0ZWQoZSxmdW5jdGlvbigpe3JldHVybiBzKHRoaXMsZSl9
        KS5yZWFkT25seSgpfSxFbWJlci5jb21wdXRlZC5kZWZhdWx0VG89ZnVuY3Rp
        b24oZSl7cmV0dXJuIEVtYmVyLmNvbXB1dGVkKGZ1bmN0aW9uKHQscixuKXty
        ZXR1cm4gMT09PWFyZ3VtZW50cy5sZW5ndGg/bnVsbCE9bj9uOnModGhpcyxl
        KTpudWxsIT1yP3I6cyh0aGlzLGUpfSl9fSgpLGZ1bmN0aW9uKCl7ZnVuY3Rp
        b24gZShlKXtyZXR1cm4gZStyfWZ1bmN0aW9uIHQoZSl7cmV0dXJuIGUrbn12
        YXIgcj0iOmNoYW5nZSIsbj0iOmJlZm9yZSI7RW1iZXIuYWRkT2JzZXJ2ZXI9
        ZnVuY3Rpb24odCxyLG4saSl7cmV0dXJuIEVtYmVyLmFkZExpc3RlbmVyKHQs
        ZShyKSxuLGkpLEVtYmVyLndhdGNoKHQsciksdGhpc30sRW1iZXIub2JzZXJ2
        ZXJzRm9yPWZ1bmN0aW9uKHQscil7cmV0dXJuIEVtYmVyLmxpc3RlbmVyc0Zv
        cih0LGUocikpfSxFbWJlci5yZW1vdmVPYnNlcnZlcj1mdW5jdGlvbih0LHIs
        bixpKXtyZXR1cm4gRW1iZXIudW53YXRjaCh0LHIpLEVtYmVyLnJlbW92ZUxp
        c3RlbmVyKHQsZShyKSxuLGkpLHRoaXN9LEVtYmVyLmFkZEJlZm9yZU9ic2Vy
        dmVyPWZ1bmN0aW9uKGUscixuLGkpe3JldHVybiBFbWJlci5hZGRMaXN0ZW5l
        cihlLHQociksbixpKSxFbWJlci53YXRjaChlLHIpLHRoaXN9LEVtYmVyLl9z
        dXNwZW5kQmVmb3JlT2JzZXJ2ZXI9ZnVuY3Rpb24oZSxyLG4saSxvKXtyZXR1
        cm4gRW1iZXIuX3N1c3BlbmRMaXN0ZW5lcihlLHQociksbixpLG8pfSxFbWJl
        ci5fc3VzcGVuZE9ic2VydmVyPWZ1bmN0aW9uKHQscixuLGksbyl7cmV0dXJu
        IEVtYmVyLl9zdXNwZW5kTGlzdGVuZXIodCxlKHIpLG4saSxvKX07dmFyIGk9
        RW1iZXIuQXJyYXlQb2x5ZmlsbHMubWFwO0VtYmVyLl9zdXNwZW5kQmVmb3Jl
        T2JzZXJ2ZXJzPWZ1bmN0aW9uKGUscixuLG8sYSl7dmFyIHM9aS5jYWxsKHIs
        dCk7cmV0dXJuIEVtYmVyLl9zdXNwZW5kTGlzdGVuZXJzKGUscyxuLG8sYSl9
        LEVtYmVyLl9zdXNwZW5kT2JzZXJ2ZXJzPWZ1bmN0aW9uKHQscixuLG8sYSl7
        dmFyIHM9aS5jYWxsKHIsZSk7cmV0dXJuIEVtYmVyLl9zdXNwZW5kTGlzdGVu
        ZXJzKHQscyxuLG8sYSl9LEVtYmVyLmJlZm9yZU9ic2VydmVyc0Zvcj1mdW5j
        dGlvbihlLHIpe3JldHVybiBFbWJlci5saXN0ZW5lcnNGb3IoZSx0KHIpKX0s
        RW1iZXIucmVtb3ZlQmVmb3JlT2JzZXJ2ZXI9ZnVuY3Rpb24oZSxyLG4saSl7
        cmV0dXJuIEVtYmVyLnVud2F0Y2goZSxyKSxFbWJlci5yZW1vdmVMaXN0ZW5l
        cihlLHQociksbixpKSx0aGlzfX0oKSxmdW5jdGlvbigpe2UoImJhY2tidXJu
        ZXIvcXVldWUiLFsiZXhwb3J0cyJdLGZ1bmN0aW9uKGUpeyJ1c2Ugc3RyaWN0
        IjtmdW5jdGlvbiB0KGUsdCxyKXt0aGlzLmRhcT1lLHRoaXMubmFtZT10LHRo
        aXMub3B0aW9ucz1yLHRoaXMuX3F1ZXVlPVtdfXQucHJvdG90eXBlPXtkYXE6
        bnVsbCxuYW1lOm51bGwsb3B0aW9uczpudWxsLF9xdWV1ZTpudWxsLHB1c2g6
        ZnVuY3Rpb24oZSx0LHIsbil7dmFyIGk9dGhpcy5fcXVldWU7cmV0dXJuIGku
        cHVzaChlLHQscixuKSx7cXVldWU6dGhpcyx0YXJnZXQ6ZSxtZXRob2Q6dH19
        LHB1c2hVbmlxdWU6ZnVuY3Rpb24oZSx0LHIsbil7dmFyIGksbyxhLHMsdT10
        aGlzLl9xdWV1ZTtmb3IoYT0wLHM9dS5sZW5ndGg7cz5hO2ErPTQpaWYoaT11
        W2FdLG89dVthKzFdLGk9PT1lJiZvPT09dClyZXR1cm4gdVthKzJdPXIsdVth
        KzNdPW4se3F1ZXVlOnRoaXMsdGFyZ2V0OmUsbWV0aG9kOnR9O3JldHVybiB0
        aGlzLl9xdWV1ZS5wdXNoKGUsdCxyLG4pLHtxdWV1ZTp0aGlzLHRhcmdldDpl
        LG1ldGhvZDp0fX0sZmx1c2g6ZnVuY3Rpb24oKXt2YXIgZSx0LHIsbixpLG89
        dGhpcy5fcXVldWUsYT10aGlzLm9wdGlvbnMscz1hJiZhLmJlZm9yZSx1PWEm
        JmEuYWZ0ZXIsbD1vLmxlbmd0aDtmb3IobCYmcyYmcygpLGk9MDtsPmk7aSs9
        NCllPW9baV0sdD1vW2krMV0scj1vW2krMl0sbj1vW2krM10sciYmci5sZW5n
        dGg+MD90LmFwcGx5KGUscik6dC5jYWxsKGUpO2wmJnUmJnUoKSxvLmxlbmd0
        aD5sPyh0aGlzLl9xdWV1ZT1vLnNsaWNlKGwpLHRoaXMuZmx1c2goKSk6dGhp
        cy5fcXVldWUubGVuZ3RoPTB9LGNhbmNlbDpmdW5jdGlvbihlKXt2YXIgdCxy
        LG4saSxvPXRoaXMuX3F1ZXVlO2ZvcihuPTAsaT1vLmxlbmd0aDtpPm47bis9
        NClpZih0PW9bbl0scj1vW24rMV0sdD09PWUudGFyZ2V0JiZyPT09ZS5tZXRo
        b2QpcmV0dXJuIG8uc3BsaWNlKG4sNCksITA7aWYobz10aGlzLl9xdWV1ZUJl
        aW5nRmx1c2hlZClmb3Iobj0wLGk9by5sZW5ndGg7aT5uO24rPTQpaWYodD1v
        W25dLHI9b1tuKzFdLHQ9PT1lLnRhcmdldCYmcj09PWUubWV0aG9kKXJldHVy
        biBvW24rMV09bnVsbCwhMH19LGUuUXVldWU9dH0pLGUoImJhY2tidXJuZXIv
        ZGVmZXJyZWRfYWN0aW9uX3F1ZXVlcyIsWyJiYWNrYnVybmVyL3F1ZXVlIiwi
        ZXhwb3J0cyJdLGZ1bmN0aW9uKGUsdCl7InVzZSBzdHJpY3QiO2Z1bmN0aW9u
        IHIoZSx0KXt2YXIgcj10aGlzLnF1ZXVlcz17fTt0aGlzLnF1ZXVlTmFtZXM9
        ZT1lfHxbXTtmb3IodmFyIG4sbz0wLGE9ZS5sZW5ndGg7YT5vO28rKyluPWVb
        b10scltuXT1uZXcgaSh0aGlzLG4sdFtuXSl9ZnVuY3Rpb24gbihlLHQpe2Zv
        cih2YXIgcixuLGk9MCxvPXQ7bz49aTtpKyspaWYocj1lLnF1ZXVlTmFtZXNb
        aV0sbj1lLnF1ZXVlc1tyXSxuLl9xdWV1ZS5sZW5ndGgpcmV0dXJuIGk7cmV0
        dXJuLTF9dmFyIGk9ZS5RdWV1ZTtyLnByb3RvdHlwZT17cXVldWVOYW1lczpu
        dWxsLHF1ZXVlczpudWxsLHNjaGVkdWxlOmZ1bmN0aW9uKGUsdCxyLG4saSxv
        KXt2YXIgYT10aGlzLnF1ZXVlcyxzPWFbZV07aWYoIXMpdGhyb3cgbmV3IEVy
        cm9yKCJZb3UgYXR0ZW1wdGVkIHRvIHNjaGVkdWxlIGFuIGFjdGlvbiBpbiBh
        IHF1ZXVlICgiK2UrIikgdGhhdCBkb2Vzbid0IGV4aXN0Iik7cmV0dXJuIGk/
        cy5wdXNoVW5pcXVlKHQscixuLG8pOnMucHVzaCh0LHIsbixvKX0sZmx1c2g6
        ZnVuY3Rpb24oKXtmb3IodmFyIGUsdCxyLGksbz10aGlzLnF1ZXVlcyxhPXRo
        aXMucXVldWVOYW1lcyxzPTAsdT1hLmxlbmd0aDt1PnM7KXtlPWFbc10sdD1v
        W2VdLHI9dC5fcXVldWVCZWluZ0ZsdXNoZWQ9dC5fcXVldWUuc2xpY2UoKSx0
        Ll9xdWV1ZT1bXTt2YXIgbCxjLGgsbSxwPXQub3B0aW9ucyxmPXAmJnAuYmVm
        b3JlLGQ9cCYmcC5hZnRlcixiPTAsdj1yLmxlbmd0aDtmb3IodiYmZiYmZigp
        O3Y+YjspbD1yW2JdLGM9cltiKzFdLGg9cltiKzJdLG09cltiKzNdLCJzdHJp
        bmciPT10eXBlb2YgYyYmKGM9bFtjXSksYyYmKGgmJmgubGVuZ3RoPjA/Yy5h
        cHBseShsLGgpOmMuY2FsbChsKSksYis9NDt0Ll9xdWV1ZUJlaW5nRmx1c2hl
        ZD1udWxsLHYmJmQmJmQoKSwtMT09PShpPW4odGhpcyxzKSk/cysrOnM9aX19
        fSx0LkRlZmVycmVkQWN0aW9uUXVldWVzPXJ9KSxlKCJiYWNrYnVybmVyIixb
        ImJhY2tidXJuZXIvZGVmZXJyZWRfYWN0aW9uX3F1ZXVlcyIsImV4cG9ydHMi
        XSxmdW5jdGlvbihlLHQpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiByKGUpe3Jl
        dHVybiJudW1iZXIiPT10eXBlb2YgZXx8Zy50ZXN0KGUpfWZ1bmN0aW9uIG4o
        ZSx0KXt0aGlzLnF1ZXVlTmFtZXM9ZSx0aGlzLm9wdGlvbnM9dHx8e30sdGhp
        cy5vcHRpb25zLmRlZmF1bHRRdWV1ZXx8KHRoaXMub3B0aW9ucy5kZWZhdWx0
        UXVldWU9ZVswXSksdGhpcy5pbnN0YW5jZVN0YWNrPVtdfWZ1bmN0aW9uIGko
        ZSl7ZS5iZWdpbigpLGw9RS5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7bD1udWxs
        LGUuZW5kKCl9KX1mdW5jdGlvbiBvKGUsdCxyKXsoIWN8fGg+dCkmJihjJiZj
        bGVhclRpbWVvdXQoYyksYz1FLnNldFRpbWVvdXQoZnVuY3Rpb24oKXtjPW51
        bGwsaD1udWxsLGEoZSl9LHIpLGg9dCl9ZnVuY3Rpb24gYShlKXt2YXIgdCxy
        LG4saSxhPStuZXcgRGF0ZTtlLnJ1bihmdW5jdGlvbigpe2ZvcihuPTAsaT12
        Lmxlbmd0aDtpPm4mJih0PXZbbl0sISh0PmEpKTtuKz0yKTtmb3Iocj12LnNw
        bGljZSgwLG4pLG49MSxpPXIubGVuZ3RoO2k+bjtuKz0yKWUuc2NoZWR1bGUo
        ZS5vcHRpb25zLmRlZmF1bHRRdWV1ZSxudWxsLHJbbl0pfSksdi5sZW5ndGgm
        Jm8oZSx2WzBdLHZbMF0tYSl9ZnVuY3Rpb24gcyhlLHQpe2Zvcih2YXIgcixu
        PS0xLGk9MCxvPWIubGVuZ3RoO28+aTtpKyspaWYocj1iW2ldLHJbMF09PT1l
        JiZyWzFdPT09dCl7bj1pO2JyZWFrfXJldHVybiBufWZ1bmN0aW9uIHUoZSx0
        KXtmb3IodmFyIHIsbj0tMSxpPTAsbz1kLmxlbmd0aDtvPmk7aSsrKWlmKHI9
        ZFtpXSxyWzBdPT09ZSYmclsxXT09PXQpe249aTticmVha31yZXR1cm4gbn12
        YXIgbCxjLGgsbT1lLkRlZmVycmVkQWN0aW9uUXVldWVzLHA9W10uc2xpY2Us
        Zj1bXS5wb3AsZD1bXSxiPVtdLHY9W10sRT10aGlzLGc9L1xkKy87bi5wcm90
        b3R5cGU9e3F1ZXVlTmFtZXM6bnVsbCxvcHRpb25zOm51bGwsY3VycmVudElu
        c3RhbmNlOm51bGwsaW5zdGFuY2VTdGFjazpudWxsLGJlZ2luOmZ1bmN0aW9u
        KCl7dmFyIGU9dGhpcy5vcHRpb25zJiZ0aGlzLm9wdGlvbnMub25CZWdpbix0
        PXRoaXMuY3VycmVudEluc3RhbmNlO3QmJnRoaXMuaW5zdGFuY2VTdGFjay5w
        dXNoKHQpLHRoaXMuY3VycmVudEluc3RhbmNlPW5ldyBtKHRoaXMucXVldWVO
        YW1lcyx0aGlzLm9wdGlvbnMpLGUmJmUodGhpcy5jdXJyZW50SW5zdGFuY2Us
        dCl9LGVuZDpmdW5jdGlvbigpe3ZhciBlPXRoaXMub3B0aW9ucyYmdGhpcy5v
        cHRpb25zLm9uRW5kLHQ9dGhpcy5jdXJyZW50SW5zdGFuY2Uscj1udWxsO3Ry
        eXt0LmZsdXNoKCl9ZmluYWxseXt0aGlzLmN1cnJlbnRJbnN0YW5jZT1udWxs
        LHRoaXMuaW5zdGFuY2VTdGFjay5sZW5ndGgmJihyPXRoaXMuaW5zdGFuY2VT
        dGFjay5wb3AoKSx0aGlzLmN1cnJlbnRJbnN0YW5jZT1yKSxlJiZlKHQscil9
        fSxydW46ZnVuY3Rpb24oZSx0KXt2YXIgcjt0aGlzLmJlZ2luKCksdHx8KHQ9
        ZSxlPW51bGwpLCJzdHJpbmciPT10eXBlb2YgdCYmKHQ9ZVt0XSk7dmFyIG49
        ITE7dHJ5e3I9YXJndW1lbnRzLmxlbmd0aD4yP3QuYXBwbHkoZSxwLmNhbGwo
        YXJndW1lbnRzLDIpKTp0LmNhbGwoZSl9ZmluYWxseXtufHwobj0hMCx0aGlz
        LmVuZCgpKX1yZXR1cm4gcn0sZGVmZXI6ZnVuY3Rpb24oZSx0LHIpe3J8fChy
        PXQsdD1udWxsKSwic3RyaW5nIj09dHlwZW9mIHImJihyPXRbcl0pO3ZhciBu
        PXRoaXMuREVCVUc/bmV3IEVycm9yOnZvaWQgMCxvPWFyZ3VtZW50cy5sZW5n
        dGg+Mz9wLmNhbGwoYXJndW1lbnRzLDMpOnZvaWQgMDtyZXR1cm4gdGhpcy5j
        dXJyZW50SW5zdGFuY2V8fGkodGhpcyksdGhpcy5jdXJyZW50SW5zdGFuY2Uu
        c2NoZWR1bGUoZSx0LHIsbywhMSxuKX0sZGVmZXJPbmNlOmZ1bmN0aW9uKGUs
        dCxyKXtyfHwocj10LHQ9bnVsbCksInN0cmluZyI9PXR5cGVvZiByJiYocj10
        W3JdKTt2YXIgbj10aGlzLkRFQlVHP25ldyBFcnJvcjp2b2lkIDAsbz1hcmd1
        bWVudHMubGVuZ3RoPjM/cC5jYWxsKGFyZ3VtZW50cywzKTp2b2lkIDA7cmV0
        dXJuIHRoaXMuY3VycmVudEluc3RhbmNlfHxpKHRoaXMpLHRoaXMuY3VycmVu
        dEluc3RhbmNlLnNjaGVkdWxlKGUsdCxyLG8sITAsbil9LHNldFRpbWVvdXQ6
        ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7dC5hcHBseShpLGwpfXZhciB0LG4s
        aSxhLHMsdSxsPXAuY2FsbChhcmd1bWVudHMpLGM9bC5sZW5ndGgsaD10aGlz
        O2lmKDAhPT1jKXtpZigxPT09Yyl0PWwuc2hpZnQoKSxuPTA7ZWxzZSBpZigy
        PT09YylhPWxbMF0scz1sWzFdLCJmdW5jdGlvbiI9PXR5cGVvZiBzfHwiZnVu
        Y3Rpb24iPT10eXBlb2YgYVtzXT8oaT1sLnNoaWZ0KCksdD1sLnNoaWZ0KCks
        bj0wKTpyKHMpPyh0PWwuc2hpZnQoKSxuPWwuc2hpZnQoKSk6KHQ9bC5zaGlm
        dCgpLG49MCk7ZWxzZXt2YXIgbT1sW2wubGVuZ3RoLTFdO3IobSkmJihuPWwu
        cG9wKCkpLGE9bFswXSx1PWxbMV0sImZ1bmN0aW9uIj09dHlwZW9mIHV8fCJz
        dHJpbmciPT10eXBlb2YgdSYmbnVsbCE9PWEmJnUgaW4gYT8oaT1sLnNoaWZ0
        KCksdD1sLnNoaWZ0KCkpOnQ9bC5zaGlmdCgpfXZhciBmPStuZXcgRGF0ZStw
        YXJzZUludChuLDEwKTsic3RyaW5nIj09dHlwZW9mIHQmJih0PWlbdF0pO3Zh
        ciBkLGI7Zm9yKGQ9MCxiPXYubGVuZ3RoO2I+ZCYmIShmPHZbZF0pO2QrPTIp
        O3JldHVybiB2LnNwbGljZShkLDAsZixlKSxvKGgsZixuKSxlfX0sdGhyb3R0
        bGU6ZnVuY3Rpb24oZSx0KXt2YXIgcixuLGksbyxhPXRoaXMscz1hcmd1bWVu
        dHMsbD1mLmNhbGwocyk7cmV0dXJuIm51bWJlciI9PXR5cGVvZiBsfHwic3Ry
        aW5nIj09dHlwZW9mIGw/KHI9bCxsPSEwKTpyPWYuY2FsbChzKSxyPXBhcnNl
        SW50KHIsMTApLGk9dShlLHQpLGk+LTE/ZFtpXToobz1FLnNldFRpbWVvdXQo
        ZnVuY3Rpb24oKXtsfHxhLnJ1bi5hcHBseShhLHMpO3ZhciByPXUoZSx0KTty
        Pi0xJiZkLnNwbGljZShyLDEpfSxyKSxsJiZhLnJ1bi5hcHBseShhLHMpLG49
        W2UsdCxvXSxkLnB1c2gobiksbil9LGRlYm91bmNlOmZ1bmN0aW9uKGUsdCl7
        dmFyIHIsbixpLG8sYT10aGlzLHU9YXJndW1lbnRzLGw9Zi5jYWxsKHUpO3Jl
        dHVybiJudW1iZXIiPT10eXBlb2YgbHx8InN0cmluZyI9PXR5cGVvZiBsPyhy
        PWwsbD0hMSk6cj1mLmNhbGwodSkscj1wYXJzZUludChyLDEwKSxuPXMoZSx0
        KSxuPi0xJiYoaT1iW25dLGIuc3BsaWNlKG4sMSksY2xlYXJUaW1lb3V0KGlb
        Ml0pKSxvPUUuc2V0VGltZW91dChmdW5jdGlvbigpe2x8fGEucnVuLmFwcGx5
        KGEsdSk7dmFyIHI9cyhlLHQpO3I+LTEmJmIuc3BsaWNlKHIsMSl9LHIpLGwm
        Ji0xPT09biYmYS5ydW4uYXBwbHkoYSx1KSxpPVtlLHQsb10sYi5wdXNoKGkp
        LGl9LGNhbmNlbFRpbWVyczpmdW5jdGlvbigpe3ZhciBlLHQ7Zm9yKGU9MCx0
        PWQubGVuZ3RoO3Q+ZTtlKyspY2xlYXJUaW1lb3V0KGRbZV1bMl0pO2Zvcihk
        PVtdLGU9MCx0PWIubGVuZ3RoO3Q+ZTtlKyspY2xlYXJUaW1lb3V0KGJbZV1b
        Ml0pO2I9W10sYyYmKGNsZWFyVGltZW91dChjKSxjPW51bGwpLHY9W10sbCYm
        KGNsZWFyVGltZW91dChsKSxsPW51bGwpfSxoYXNUaW1lcnM6ZnVuY3Rpb24o
        KXtyZXR1cm4hIXYubGVuZ3RofHxsfSxjYW5jZWw6ZnVuY3Rpb24oZSl7dmFy
        IHQ9dHlwZW9mIGU7aWYoZSYmIm9iamVjdCI9PT10JiZlLnF1ZXVlJiZlLm1l
        dGhvZClyZXR1cm4gZS5xdWV1ZS5jYW5jZWwoZSk7aWYoImZ1bmN0aW9uIiE9
        PXQpcmV0dXJuIltvYmplY3QgQXJyYXldIj09PU9iamVjdC5wcm90b3R5cGUu
        dG9TdHJpbmcuY2FsbChlKT90aGlzLl9jYW5jZWxJdGVtKHUsZCxlKXx8dGhp
        cy5fY2FuY2VsSXRlbShzLGIsZSk6dm9pZCAwO2Zvcih2YXIgcj0wLG49di5s
        ZW5ndGg7bj5yO3IrPTIpaWYodltyKzFdPT09ZSlyZXR1cm4gdi5zcGxpY2Uo
        ciwyKSwhMH0sX2NhbmNlbEl0ZW06ZnVuY3Rpb24oZSx0LHIpe3ZhciBuLGk7
        cmV0dXJuIHIubGVuZ3RoPDM/ITE6KGk9ZShyWzBdLHJbMV0pLGk+LTEmJihu
        PXRbaV0sblsyXT09PXJbMl0pPyh0LnNwbGljZShpLDEpLGNsZWFyVGltZW91
        dChyWzJdKSwhMCk6ITEpfX0sbi5wcm90b3R5cGUuc2NoZWR1bGU9bi5wcm90
        b3R5cGUuZGVmZXIsbi5wcm90b3R5cGUuc2NoZWR1bGVPbmNlPW4ucHJvdG90
        eXBlLmRlZmVyT25jZSxuLnByb3RvdHlwZS5sYXRlcj1uLnByb3RvdHlwZS5z
        ZXRUaW1lb3V0LHQuQmFja2J1cm5lcj1ufSl9KCksZnVuY3Rpb24oKXtmdW5j
        dGlvbiBlKGUpe3RyeXtyZXR1cm4gYS5ydW4uYXBwbHkoYSxlKX1jYXRjaCh0
        KXtFbWJlci5vbmVycm9yKHQpfX1mdW5jdGlvbiByKCl7IUVtYmVyLnJ1bi5j
        dXJyZW50UnVuTG9vcH17dmFyIG49ZnVuY3Rpb24oZSl7RW1iZXIucnVuLmN1
        cnJlbnRSdW5Mb29wPWV9LGk9ZnVuY3Rpb24oZSx0KXtFbWJlci5ydW4uY3Vy
        cmVudFJ1bkxvb3A9dH0sbz10KCJiYWNrYnVybmVyIikuQmFja2J1cm5lcixh
        PW5ldyBvKFsic3luYyIsImFjdGlvbnMiLCJkZXN0cm95Il0se3N5bmM6e2Jl
        Zm9yZTpFbWJlci5iZWdpblByb3BlcnR5Q2hhbmdlcyxhZnRlcjpFbWJlci5l
        bmRQcm9wZXJ0eUNoYW5nZXN9LGRlZmF1bHRRdWV1ZToiYWN0aW9ucyIsb25C
        ZWdpbjpuLG9uRW5kOml9KSxzPVtdLnNsaWNlO1tdLmNvbmNhdH1FbWJlci5y
        dW49ZnVuY3Rpb24oKXtyZXR1cm4gRW1iZXIub25lcnJvcj9lKGFyZ3VtZW50
        cyk6YS5ydW4uYXBwbHkoYSxhcmd1bWVudHMpfSxFbWJlci5ydW4uam9pbj1m
        dW5jdGlvbigpe2lmKCFFbWJlci5ydW4uY3VycmVudFJ1bkxvb3ApcmV0dXJu
        IEVtYmVyLnJ1bi5hcHBseShFbWJlci5ydW4sYXJndW1lbnRzKTt2YXIgZT1z
        LmNhbGwoYXJndW1lbnRzKTtlLnVuc2hpZnQoImFjdGlvbnMiKSxFbWJlci5y
        dW4uc2NoZWR1bGUuYXBwbHkoRW1iZXIucnVuLGUpfSxFbWJlci5ydW4uYmlu
        ZD1mdW5jdGlvbigpe3ZhciBlPWFyZ3VtZW50cztyZXR1cm4gZnVuY3Rpb24o
        KXtyZXR1cm4gRW1iZXIucnVuLmpvaW4uYXBwbHkoRW1iZXIucnVuLGUpfX0s
        RW1iZXIucnVuLmJhY2tidXJuZXI9YTtFbWJlci5ydW47RW1iZXIucnVuLmN1
        cnJlbnRSdW5Mb29wPW51bGwsRW1iZXIucnVuLnF1ZXVlcz1hLnF1ZXVlTmFt
        ZXMsRW1iZXIucnVuLmJlZ2luPWZ1bmN0aW9uKCl7YS5iZWdpbigpfSxFbWJl
        ci5ydW4uZW5kPWZ1bmN0aW9uKCl7YS5lbmQoKX0sRW1iZXIucnVuLnNjaGVk
        dWxlPWZ1bmN0aW9uKCl7cigpLGEuc2NoZWR1bGUuYXBwbHkoYSxhcmd1bWVu
        dHMpfSxFbWJlci5ydW4uaGFzU2NoZWR1bGVkVGltZXJzPWZ1bmN0aW9uKCl7
        cmV0dXJuIGEuaGFzVGltZXJzKCl9LEVtYmVyLnJ1bi5jYW5jZWxUaW1lcnM9
        ZnVuY3Rpb24oKXthLmNhbmNlbFRpbWVycygpfSxFbWJlci5ydW4uc3luYz1m
        dW5jdGlvbigpe2EuY3VycmVudEluc3RhbmNlJiZhLmN1cnJlbnRJbnN0YW5j
        ZS5xdWV1ZXMuc3luYy5mbHVzaCgpfSxFbWJlci5ydW4ubGF0ZXI9ZnVuY3Rp
        b24oKXtyZXR1cm4gYS5sYXRlci5hcHBseShhLGFyZ3VtZW50cyl9LEVtYmVy
        LnJ1bi5vbmNlPWZ1bmN0aW9uKCl7cigpO3ZhciBlPXMuY2FsbChhcmd1bWVu
        dHMpO3JldHVybiBlLnVuc2hpZnQoImFjdGlvbnMiKSxhLnNjaGVkdWxlT25j
        ZS5hcHBseShhLGUpfSxFbWJlci5ydW4uc2NoZWR1bGVPbmNlPWZ1bmN0aW9u
        KCl7cmV0dXJuIHIoKSxhLnNjaGVkdWxlT25jZS5hcHBseShhLGFyZ3VtZW50
        cyl9LEVtYmVyLnJ1bi5uZXh0PWZ1bmN0aW9uKCl7dmFyIGU9cy5jYWxsKGFy
        Z3VtZW50cyk7cmV0dXJuIGUucHVzaCgxKSxhLmxhdGVyLmFwcGx5KGEsZSl9
        LEVtYmVyLnJ1bi5jYW5jZWw9ZnVuY3Rpb24oZSl7cmV0dXJuIGEuY2FuY2Vs
        KGUpfSxFbWJlci5ydW4uZGVib3VuY2U9ZnVuY3Rpb24oKXtyZXR1cm4gYS5k
        ZWJvdW5jZS5hcHBseShhLGFyZ3VtZW50cyl9LEVtYmVyLnJ1bi50aHJvdHRs
        ZT1mdW5jdGlvbigpe3JldHVybiBhLnRocm90dGxlLmFwcGx5KGEsYXJndW1l
        bnRzKX19KCksZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCl7cmV0dXJuIHIo
        byh0KT9FbWJlci5sb29rdXA6ZSx0KX1mdW5jdGlvbiB0KGUsdCl7Zm9yKHZh
        ciByIGluIHQpdC5oYXNPd25Qcm9wZXJ0eShyKSYmKGVbcl09dFtyXSl9RW1i
        ZXIuTE9HX0JJTkRJTkdTPSExfHwhIUVtYmVyLkVOVi5MT0dfQklORElOR1M7
        dmFyIHI9RW1iZXIuZ2V0LG49KEVtYmVyLnNldCxFbWJlci5ndWlkRm9yKSxp
        PS9eKFtBLVokXXwoWzAtOV1bQS1aJF0pKS8sbz1FbWJlci5pc0dsb2JhbFBh
        dGg9ZnVuY3Rpb24oZSl7cmV0dXJuIGkudGVzdChlKX0sYT1mdW5jdGlvbihl
        LHQpe3RoaXMuX2RpcmVjdGlvbj0iZndkIix0aGlzLl9mcm9tPXQsdGhpcy5f
        dG89ZSx0aGlzLl9kaXJlY3Rpb25NYXA9RW1iZXIuTWFwLmNyZWF0ZSgpfTth
        LnByb3RvdHlwZT17Y29weTpmdW5jdGlvbigpe3ZhciBlPW5ldyBhKHRoaXMu
        X3RvLHRoaXMuX2Zyb20pO3JldHVybiB0aGlzLl9vbmVXYXkmJihlLl9vbmVX
        YXk9ITApLGV9LGZyb206ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2Zyb209
        ZSx0aGlzfSx0bzpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fdG89ZSx0aGlz
        fSxvbmVXYXk6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb25lV2F5PSEwLHRo
        aXN9LHRvU3RyaW5nOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5fb25lV2F5PyJb
        b25lV2F5XSI6IiI7cmV0dXJuIkVtYmVyLkJpbmRpbmc8IituKHRoaXMpKyI+
        KCIrdGhpcy5fZnJvbSsiIC0+ICIrdGhpcy5fdG8rIikiK2V9LGNvbm5lY3Q6
        ZnVuY3Rpb24odCl7dmFyIHI9dGhpcy5fZnJvbSxuPXRoaXMuX3RvO3JldHVy
        biBFbWJlci50cnlTZXQodCxuLGUodCxyKSksRW1iZXIuYWRkT2JzZXJ2ZXIo
        dCxyLHRoaXMsdGhpcy5mcm9tRGlkQ2hhbmdlKSx0aGlzLl9vbmVXYXl8fEVt
        YmVyLmFkZE9ic2VydmVyKHQsbix0aGlzLHRoaXMudG9EaWRDaGFuZ2UpLHRo
        aXMuX3JlYWR5VG9TeW5jPSEwLHRoaXN9LGRpc2Nvbm5lY3Q6ZnVuY3Rpb24o
        ZSl7dmFyIHQ9IXRoaXMuX29uZVdheTtyZXR1cm4gRW1iZXIucmVtb3ZlT2Jz
        ZXJ2ZXIoZSx0aGlzLl9mcm9tLHRoaXMsdGhpcy5mcm9tRGlkQ2hhbmdlKSx0
        JiZFbWJlci5yZW1vdmVPYnNlcnZlcihlLHRoaXMuX3RvLHRoaXMsdGhpcy50
        b0RpZENoYW5nZSksdGhpcy5fcmVhZHlUb1N5bmM9ITEsdGhpc30sZnJvbURp
        ZENoYW5nZTpmdW5jdGlvbihlKXt0aGlzLl9zY2hlZHVsZVN5bmMoZSwiZndk
        Iil9LHRvRGlkQ2hhbmdlOmZ1bmN0aW9uKGUpe3RoaXMuX3NjaGVkdWxlU3lu
        YyhlLCJiYWNrIil9LF9zY2hlZHVsZVN5bmM6ZnVuY3Rpb24oZSx0KXt2YXIg
        cj10aGlzLl9kaXJlY3Rpb25NYXAsbj1yLmdldChlKTtufHwoRW1iZXIucnVu
        LnNjaGVkdWxlKCJzeW5jIix0aGlzLHRoaXMuX3N5bmMsZSksci5zZXQoZSx0
        KSksImJhY2siPT09biYmImZ3ZCI9PT10JiZyLnNldChlLCJmd2QiKX0sX3N5
        bmM6ZnVuY3Rpb24odCl7dmFyIG49RW1iZXIuTE9HX0JJTkRJTkdTO2lmKCF0
        LmlzRGVzdHJveWVkJiZ0aGlzLl9yZWFkeVRvU3luYyl7dmFyIGk9dGhpcy5f
        ZGlyZWN0aW9uTWFwLG89aS5nZXQodCksYT10aGlzLl9mcm9tLHM9dGhpcy5f
        dG87aWYoaS5yZW1vdmUodCksImZ3ZCI9PT1vKXt2YXIgdT1lKHQsdGhpcy5f
        ZnJvbSk7biYmRW1iZXIuTG9nZ2VyLmxvZygiICIsdGhpcy50b1N0cmluZygp
        LCItPiIsdSx0KSx0aGlzLl9vbmVXYXk/RW1iZXIudHJ5U2V0KHQscyx1KTpF
        bWJlci5fc3VzcGVuZE9ic2VydmVyKHQscyx0aGlzLHRoaXMudG9EaWRDaGFu
        Z2UsZnVuY3Rpb24oKXtFbWJlci50cnlTZXQodCxzLHUpfSl9ZWxzZSBpZigi
        YmFjayI9PT1vKXt2YXIgbD1yKHQsdGhpcy5fdG8pO24mJkVtYmVyLkxvZ2dl
        ci5sb2coIiAiLHRoaXMudG9TdHJpbmcoKSwiPC0iLGwsdCksRW1iZXIuX3N1
        c3BlbmRPYnNlcnZlcih0LGEsdGhpcyx0aGlzLmZyb21EaWRDaGFuZ2UsZnVu
        Y3Rpb24oKXtFbWJlci50cnlTZXQoRW1iZXIuaXNHbG9iYWxQYXRoKGEpP0Vt
        YmVyLmxvb2t1cDp0LGEsbCl9KX19fX0sdChhLHtmcm9tOmZ1bmN0aW9uKCl7
        dmFyIGU9dGhpcyx0PW5ldyBlO3JldHVybiB0LmZyb20uYXBwbHkodCxhcmd1
        bWVudHMpfSx0bzpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1uZXcgZTtyZXR1
        cm4gdC50by5hcHBseSh0LGFyZ3VtZW50cyl9LG9uZVdheTpmdW5jdGlvbihl
        LHQpe3ZhciByPXRoaXMsbj1uZXcgcihudWxsLGUpO3JldHVybiBuLm9uZVdh
        eSh0KX19KSxFbWJlci5CaW5kaW5nPWEsRW1iZXIuYmluZD1mdW5jdGlvbihl
        LHQscil7cmV0dXJuIG5ldyBFbWJlci5CaW5kaW5nKHQscikuY29ubmVjdChl
        KX0sRW1iZXIub25lV2F5PWZ1bmN0aW9uKGUsdCxyKXtyZXR1cm4gbmV3IEVt
        YmVyLkJpbmRpbmcodCxyKS5vbmVXYXkoKS5jb25uZWN0KGUpfX0oKSxmdW5j
        dGlvbigpe2Z1bmN0aW9uIGUoKXt2YXIgZSx0PXRoaXMuX19uZXh0U3VwZXI7
        cmV0dXJuIHQmJih0aGlzLl9fbmV4dFN1cGVyPW51bGwsZT10LmFwcGx5KHRo
        aXMsYXJndW1lbnRzKSx0aGlzLl9fbmV4dFN1cGVyPXQpLGV9ZnVuY3Rpb24g
        dChlKXt2YXIgdD1OKGUsITApLHI9dC5taXhpbnM7cmV0dXJuIHI/dC5oYXNP
        d25Qcm9wZXJ0eSgibWl4aW5zIil8fChyPXQubWl4aW5zPVQocikpOnI9dC5t
        aXhpbnM9e30scn1mdW5jdGlvbiByKGUsdCl7cmV0dXJuIHQmJnQubGVuZ3Ro
        PjAmJihlLm1peGlucz1PLmNhbGwodCxmdW5jdGlvbihlKXtpZihlIGluc3Rh
        bmNlb2YgXylyZXR1cm4gZTt2YXIgdD1uZXcgXztyZXR1cm4gdC5wcm9wZXJ0
        aWVzPWUsdH0pKSxlfWZ1bmN0aW9uIG4oZSl7cmV0dXJuImZ1bmN0aW9uIj09
        dHlwZW9mIGUmJmUuaXNNZXRob2QhPT0hMSYmZSE9PUJvb2xlYW4mJmUhPT1P
        YmplY3QmJmUhPT1OdW1iZXImJmUhPT1BcnJheSYmZSE9PURhdGUmJmUhPT1T
        dHJpbmd9ZnVuY3Rpb24gaShlLHQpe3ZhciByO3JldHVybiB0IGluc3RhbmNl
        b2YgXz8ocj1WKHQpLGVbcl0/RDooZVtyXT10LHQucHJvcGVydGllcykpOnR9
        ZnVuY3Rpb24gbyhlLHQscixuKXt2YXIgaTtyZXR1cm4gaT1yW2VdfHxuW2Vd
        LHRbZV0mJihpPWk/aS5jb25jYXQodFtlXSk6dFtlXSksaX1mdW5jdGlvbiBh
        KGUsdCxyLG4saSl7dmFyIG87cmV0dXJuIHZvaWQgMD09PW5bdF0mJihvPWlb
        dF0pLG89b3x8ZS5kZXNjc1t0XSxvJiZvIGluc3RhbmNlb2YgRW1iZXIuQ29t
        cHV0ZWRQcm9wZXJ0eT8ocj1UKHIpLHIuZnVuYz1FbWJlci53cmFwKHIuZnVu
        YyxvLmZ1bmMpLHIpOnJ9ZnVuY3Rpb24gcyhlLHQscixuLGkpe3ZhciBvO3Jl
        dHVybiB2b2lkIDA9PT1pW3RdJiYobz1uW3RdKSxvPW98fGVbdF0sImZ1bmN0
        aW9uIiE9dHlwZW9mIG8/cjpFbWJlci53cmFwKHIsbyl9ZnVuY3Rpb24gdShl
        LHQscixuKXt2YXIgaT1uW3RdfHxlW3RdO3JldHVybiBpPyJmdW5jdGlvbiI9
        PXR5cGVvZiBpLmNvbmNhdD9pLmNvbmNhdChyKTpFbWJlci5tYWtlQXJyYXko
        aSkuY29uY2F0KHIpOkVtYmVyLm1ha2VBcnJheShyKX1mdW5jdGlvbiBsKHQs
        cixpLG8pe3ZhciBhPW9bcl18fHRbcl07aWYoIWEpcmV0dXJuIGk7dmFyIHU9
        RW1iZXIubWVyZ2Uoe30sYSksbD0hMTtmb3IodmFyIGMgaW4gaSlpZihpLmhh
        c093blByb3BlcnR5KGMpKXt2YXIgaD1pW2NdO24oaCk/KGw9ITAsdVtjXT1z
        KHQsYyxoLGEse30pKTp1W2NdPWh9cmV0dXJuIGwmJih1Ll9zdXBlcj1lKSx1
        fWZ1bmN0aW9uIGMoZSx0LHIsaSxvLGMsaCxtKXtpZihyIGluc3RhbmNlb2Yg
        RW1iZXIuRGVzY3JpcHRvcil7aWYocj09PXcmJm9bdF0pcmV0dXJuIEQ7ci5m
        dW5jJiYocj1hKGksdCxyLGMsbykpLG9bdF09cixjW3RdPXZvaWQgMH1lbHNl
        IGgmJkEuY2FsbChoLHQpPj0wfHwiY29uY2F0ZW5hdGVkUHJvcGVydGllcyI9
        PT10fHwibWVyZ2VkUHJvcGVydGllcyI9PT10P3I9dShlLHQscixjKTptJiZB
        LmNhbGwobSx0KT49MD9yPWwoZSx0LHIsYyk6bihyKSYmKHI9cyhlLHQscixj
        LG8pKSxvW3RdPXZvaWQgMCxjW3RdPXJ9ZnVuY3Rpb24gaChlLHQscixuLGEs
        cyl7ZnVuY3Rpb24gdShlKXtkZWxldGUgcltlXSxkZWxldGUgbltlXX1mb3Io
        dmFyIGwsbSxwLGYsZCxiLHY9MCxFPWUubGVuZ3RoO0U+djt2KyspaWYobD1l
        W3ZdLG09aSh0LGwpLG0hPT1EKWlmKG0pe2I9TihhKSxhLndpbGxNZXJnZU1p
        eGluJiZhLndpbGxNZXJnZU1peGluKG0pLGY9bygiY29uY2F0ZW5hdGVkUHJv
        cGVydGllcyIsbSxuLGEpLGQ9bygibWVyZ2VkUHJvcGVydGllcyIsbSxuLGEp
        O2ZvcihwIGluIG0pbS5oYXNPd25Qcm9wZXJ0eShwKSYmKHMucHVzaChwKSxj
        KGEscCxtW3BdLGIscixuLGYsZCkpO20uaGFzT3duUHJvcGVydHkoInRvU3Ry
        aW5nIikmJihhLnRvU3RyaW5nPW0udG9TdHJpbmcpfWVsc2UgbC5taXhpbnMm
        JihoKGwubWl4aW5zLHQscixuLGEscyksbC5fd2l0aG91dCYmUC5jYWxsKGwu
        X3dpdGhvdXQsdSkpfWZ1bmN0aW9uIG0oZSx0LHIsbil7aWYoTS50ZXN0KHQp
        KXt2YXIgaT1uLmJpbmRpbmdzO2k/bi5oYXNPd25Qcm9wZXJ0eSgiYmluZGlu
        Z3MiKXx8KGk9bi5iaW5kaW5ncz1UKG4uYmluZGluZ3MpKTppPW4uYmluZGlu
        Z3M9e30saVt0XT1yfX1mdW5jdGlvbiBwKGUsdCl7dmFyIHIsbixpLG89dC5i
        aW5kaW5ncztpZihvKXtmb3IociBpbiBvKW49b1tyXSxuJiYoaT1yLnNsaWNl
        KDAsLTcpLG4gaW5zdGFuY2VvZiBFbWJlci5CaW5kaW5nPyhuPW4uY29weSgp
        LG4udG8oaSkpOm49bmV3IEVtYmVyLkJpbmRpbmcoaSxuKSxuLmNvbm5lY3Qo
        ZSksZVtyXT1uKTt0LmJpbmRpbmdzPXt9fX1mdW5jdGlvbiBmKGUsdCl7cmV0
        dXJuIHAoZSx0fHxOKGUpKSxlfWZ1bmN0aW9uIGQoZSx0LHIsbixpKXt2YXIg
        byxhPXQubWV0aG9kTmFtZTtyZXR1cm4gblthXXx8aVthXT8obz1pW2FdLHQ9
        blthXSk6ci5kZXNjc1thXT8odD1yLmRlc2NzW2FdLG89dm9pZCAwKToodD12
        b2lkIDAsbz1lW2FdKSx7ZGVzYzp0LHZhbHVlOm99fWZ1bmN0aW9uIGIoZSx0
        LHIsbixpKXt2YXIgbz1yW25dO2lmKG8pZm9yKHZhciBhPTAscz1vLmxlbmd0
        aDtzPmE7YSsrKUVtYmVyW2ldKGUsb1thXSxudWxsLHQpfWZ1bmN0aW9uIHYo
        ZSx0LHIpe3ZhciBuPWVbdF07ImZ1bmN0aW9uIj09dHlwZW9mIG4mJihiKGUs
        dCxuLCJfX2VtYmVyX29ic2VydmVzQmVmb3JlX18iLCJyZW1vdmVCZWZvcmVP
        YnNlcnZlciIpLGIoZSx0LG4sIl9fZW1iZXJfb2JzZXJ2ZXNfXyIsInJlbW92
        ZU9ic2VydmVyIiksYihlLHQsbiwiX19lbWJlcl9saXN0ZW5zX18iLCJyZW1v
        dmVMaXN0ZW5lciIpKSwiZnVuY3Rpb24iPT10eXBlb2YgciYmKGIoZSx0LHIs
        Il9fZW1iZXJfb2JzZXJ2ZXNCZWZvcmVfXyIsImFkZEJlZm9yZU9ic2VydmVy
        IiksYihlLHQsciwiX19lbWJlcl9vYnNlcnZlc19fIiwiYWRkT2JzZXJ2ZXIi
        KSxiKGUsdCxyLCJfX2VtYmVyX2xpc3RlbnNfXyIsImFkZExpc3RlbmVyIikp
        fWZ1bmN0aW9uIEUocixuLGkpe3ZhciBvLGEscyx1PXt9LGw9e30sYz1OKHIp
        LHA9W107ci5fc3VwZXI9ZSxoKG4sdChyKSx1LGwscixwKTtmb3IodmFyIGI9
        MCxFPXAubGVuZ3RoO0U+YjtiKyspaWYobz1wW2JdLCJjb25zdHJ1Y3RvciIh
        PT1vJiZsLmhhc093blByb3BlcnR5KG8pJiYocz11W29dLGE9bFtvXSxzIT09
        dykpe2Zvcig7cyYmcyBpbnN0YW5jZW9mIEM7KXt2YXIgZz1kKHIscyxjLHUs
        bCk7cz1nLmRlc2MsYT1nLnZhbHVlfSh2b2lkIDAhPT1zfHx2b2lkIDAhPT1h
        KSYmKHYocixvLGEpLG0ocixvLGEsYyksUyhyLG8scyxhLGMpKX1yZXR1cm4g
        aXx8ZihyLGMpLHJ9ZnVuY3Rpb24gZyhlLHQscil7dmFyIG49VihlKTtpZihy
        W25dKXJldHVybiExO2lmKHJbbl09ITAsZT09PXQpcmV0dXJuITA7Zm9yKHZh
        ciBpPWUubWl4aW5zLG89aT9pLmxlbmd0aDowOy0tbz49MDspaWYoZyhpW29d
        LHQscikpcmV0dXJuITA7cmV0dXJuITF9ZnVuY3Rpb24geShlLHQscil7aWYo
        IXJbVih0KV0paWYocltWKHQpXT0hMCx0LnByb3BlcnRpZXMpe3ZhciBuPXQu
        cHJvcGVydGllcztmb3IodmFyIGkgaW4gbiluLmhhc093blByb3BlcnR5KGkp
        JiYoZVtpXT0hMCl9ZWxzZSB0Lm1peGlucyYmUC5jYWxsKHQubWl4aW5zLGZ1
        bmN0aW9uKHQpe3koZSx0LHIpfSl9dmFyIF8sdyxDLE89RW1iZXIuQXJyYXlQ
        b2x5ZmlsbHMubWFwLEE9RW1iZXIuQXJyYXlQb2x5ZmlsbHMuaW5kZXhPZixQ
        PUVtYmVyLkFycmF5UG9seWZpbGxzLmZvckVhY2gseD1bXS5zbGljZSxUPUVt
        YmVyLmNyZWF0ZSxTPUVtYmVyLmRlZmluZVByb3BlcnR5LFY9RW1iZXIuZ3Vp
        ZEZvcixOPUVtYmVyLm1ldGEsST1FbWJlci5NRVRBX0tFWSxSPUVtYmVyLmV4
        cGFuZFByb3BlcnRpZXMsRD17fSxNPUVtYmVyLklTX0JJTkRJTkc9L14uK0Jp
        bmRpbmckLztFbWJlci5taXhpbj1mdW5jdGlvbihlKXt2YXIgdD14LmNhbGwo
        YXJndW1lbnRzLDEpO3JldHVybiBFKGUsdCwhMSksZX0sRW1iZXIuTWl4aW49
        ZnVuY3Rpb24oKXtyZXR1cm4gcih0aGlzLGFyZ3VtZW50cyl9LF89RW1iZXIu
        TWl4aW4sXy5wcm90b3R5cGU9e3Byb3BlcnRpZXM6bnVsbCxtaXhpbnM6bnVs
        bCxvd25lckNvbnN0cnVjdG9yOm51bGx9LF8uX2FwcGx5PUUsXy5hcHBseVBh
        cnRpYWw9ZnVuY3Rpb24oZSl7dmFyIHQ9eC5jYWxsKGFyZ3VtZW50cywxKTty
        ZXR1cm4gRShlLHQsITApfSxfLmZpbmlzaFBhcnRpYWw9ZixFbWJlci5hbnlV
        bnByb2Nlc3NlZE1peGlucz0hMSxfLmNyZWF0ZT1mdW5jdGlvbigpe0VtYmVy
        LmFueVVucHJvY2Vzc2VkTWl4aW5zPSEwO3ZhciBlPXRoaXM7cmV0dXJuIHIo
        bmV3IGUsYXJndW1lbnRzKX07dmFyIGs9Xy5wcm90b3R5cGU7ay5yZW9wZW49
        ZnVuY3Rpb24oKXt2YXIgZSx0O3RoaXMucHJvcGVydGllcz8oZT1fLmNyZWF0
        ZSgpLGUucHJvcGVydGllcz10aGlzLnByb3BlcnRpZXMsZGVsZXRlIHRoaXMu
        cHJvcGVydGllcyx0aGlzLm1peGlucz1bZV0pOnRoaXMubWl4aW5zfHwodGhp
        cy5taXhpbnM9W10pO3ZhciByLG49YXJndW1lbnRzLmxlbmd0aCxpPXRoaXMu
        bWl4aW5zO2ZvcihyPTA7bj5yO3IrKyllPWFyZ3VtZW50c1tyXSxlIGluc3Rh
        bmNlb2YgXz9pLnB1c2goZSk6KHQ9Xy5jcmVhdGUoKSx0LnByb3BlcnRpZXM9
        ZSxpLnB1c2godCkpO3JldHVybiB0aGlzfSxrLmFwcGx5PWZ1bmN0aW9uKGUp
        e3JldHVybiBFKGUsW3RoaXNdLCExKX0say5hcHBseVBhcnRpYWw9ZnVuY3Rp
        b24oZSl7cmV0dXJuIEUoZSxbdGhpc10sITApfSxrLmRldGVjdD1mdW5jdGlv
        bihlKXtpZighZSlyZXR1cm4hMTtpZihlIGluc3RhbmNlb2YgXylyZXR1cm4g
        ZyhlLHRoaXMse30pO3ZhciB0PWVbSV0scj10JiZ0Lm1peGlucztyZXR1cm4g
        cj8hIXJbVih0aGlzKV06ITF9LGsud2l0aG91dD1mdW5jdGlvbigpe3ZhciBl
        PW5ldyBfKHRoaXMpO3JldHVybiBlLl93aXRob3V0PXguY2FsbChhcmd1bWVu
        dHMpLGV9LGsua2V5cz1mdW5jdGlvbigpe3ZhciBlPXt9LHQ9e30scj1bXTt5
        KGUsdGhpcyx0KTtmb3IodmFyIG4gaW4gZSllLmhhc093blByb3BlcnR5KG4p
        JiZyLnB1c2gobik7cmV0dXJuIHJ9LF8ubWl4aW5zPWZ1bmN0aW9uKGUpe3Zh
        ciB0PWVbSV0scj10JiZ0Lm1peGlucyxuPVtdO2lmKCFyKXJldHVybiBuO2Zv
        cih2YXIgaSBpbiByKXt2YXIgbz1yW2ldO28ucHJvcGVydGllc3x8bi5wdXNo
        KG8pfXJldHVybiBufSx3PW5ldyBFbWJlci5EZXNjcmlwdG9yLHcudG9TdHJp
        bmc9ZnVuY3Rpb24oKXtyZXR1cm4iKFJlcXVpcmVkIFByb3BlcnR5KSJ9LEVt
        YmVyLnJlcXVpcmVkPWZ1bmN0aW9uKCl7cmV0dXJuIHd9LEM9ZnVuY3Rpb24o
        ZSl7dGhpcy5tZXRob2ROYW1lPWV9LEMucHJvdG90eXBlPW5ldyBFbWJlci5E
        ZXNjcmlwdG9yLEVtYmVyLmFsaWFzTWV0aG9kPWZ1bmN0aW9uKGUpe3JldHVy
        biBuZXcgQyhlKX0sRW1iZXIub2JzZXJ2ZXI9ZnVuY3Rpb24oKXt2YXIgZSx0
        PXguY2FsbChhcmd1bWVudHMsLTEpWzBdLHI9ZnVuY3Rpb24odCl7ZS5wdXNo
        KHQpfSxuPXguY2FsbChhcmd1bWVudHMsMCwtMSk7ImZ1bmN0aW9uIiE9dHlw
        ZW9mIHQmJih0PWFyZ3VtZW50c1swXSxuPXguY2FsbChhcmd1bWVudHMsMSkp
        LGU9W107Zm9yKHZhciBpPTA7aTxuLmxlbmd0aDsrK2kpUihuW2ldLHIpO2lm
        KCJmdW5jdGlvbiIhPXR5cGVvZiB0KXRocm93IG5ldyBFbWJlci5FcnJvcigi
        RW1iZXIub2JzZXJ2ZXIgY2FsbGVkIHdpdGhvdXQgYSBmdW5jdGlvbiIpO3Jl
        dHVybiB0Ll9fZW1iZXJfb2JzZXJ2ZXNfXz1lLHR9LEVtYmVyLmltbWVkaWF0
        ZU9ic2VydmVyPWZ1bmN0aW9uKCl7Zm9yKHZhciBlPTAsdD1hcmd1bWVudHMu
        bGVuZ3RoO3Q+ZTtlKyspe2FyZ3VtZW50c1tlXX1yZXR1cm4gRW1iZXIub2Jz
        ZXJ2ZXIuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxFbWJlci5iZWZvcmVPYnNl
        cnZlcj1mdW5jdGlvbigpe3ZhciBlLHQ9eC5jYWxsKGFyZ3VtZW50cywtMSlb
        MF0scj1mdW5jdGlvbih0KXtlLnB1c2godCl9LG49eC5jYWxsKGFyZ3VtZW50
        cywwLC0xKTsiZnVuY3Rpb24iIT10eXBlb2YgdCYmKHQ9YXJndW1lbnRzWzBd
        LG49eC5jYWxsKGFyZ3VtZW50cywxKSksZT1bXTtmb3IodmFyIGk9MDtpPG4u
        bGVuZ3RoOysraSlSKG5baV0scik7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIHQp
        dGhyb3cgbmV3IEVtYmVyLkVycm9yKCJFbWJlci5iZWZvcmVPYnNlcnZlciBj
        YWxsZWQgd2l0aG91dCBhIGZ1bmN0aW9uIik7cmV0dXJuIHQuX19lbWJlcl9v
        YnNlcnZlc0JlZm9yZV9fPWUsdH19KCksZnVuY3Rpb24oKXt2YXIgZT1FbWJl
        ci5FbnVtZXJhYmxlVXRpbHMuZm9yRWFjaCx0PUVtYmVyLkVudW1lcmFibGVV
        dGlscy5pbmRleE9mO0VtYmVyLmxpYnJhcmllcz1mdW5jdGlvbigpe3ZhciBy
        PVtdLG49MCxpPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD0wO3Q8ci5sZW5ndGg7
        dCsrKWlmKHJbdF0ubmFtZT09PWUpcmV0dXJuIHJbdF19O3JldHVybiByLnJl
        Z2lzdGVyPWZ1bmN0aW9uKGUsdCl7aShlKXx8ci5wdXNoKHtuYW1lOmUsdmVy
        c2lvbjp0fSl9LHIucmVnaXN0ZXJDb3JlTGlicmFyeT1mdW5jdGlvbihlLHQp
        e2koZSl8fHIuc3BsaWNlKG4rKywwLHtuYW1lOmUsdmVyc2lvbjp0fSl9LHIu
        ZGVSZWdpc3Rlcj1mdW5jdGlvbihlKXt2YXIgbj1pKGUpO24mJnIuc3BsaWNl
        KHQocixuKSwxKX0sci5lYWNoPWZ1bmN0aW9uKHQpe2UocixmdW5jdGlvbihl
        KXt0KGUubmFtZSxlLnZlcnNpb24pfSl9LHJ9KCksRW1iZXIubGlicmFyaWVz
        LnJlZ2lzdGVyQ29yZUxpYnJhcnkoIkVtYmVyIixFbWJlci5WRVJTSU9OKX0o
        KSxmdW5jdGlvbigpe2UoInJzdnAvYWxsIixbIi4vcHJvbWlzZSIsImV4cG9y
        dHMiXSxmdW5jdGlvbihlLHQpeyJ1c2Ugc3RyaWN0Ijt2YXIgcj1lWyJkZWZh
        dWx0Il07dFsiZGVmYXVsdCJdPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHIuYWxs
        KGUsdCl9fSksZSgicnN2cC9hbGxfc2V0dGxlZCIsWyIuL3Byb21pc2UiLCIu
        L3V0aWxzIiwiZXhwb3J0cyJdLGZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmlj
        dCI7ZnVuY3Rpb24gbihlKXtyZXR1cm57c3RhdGU6ImZ1bGZpbGxlZCIsdmFs
        dWU6ZX19ZnVuY3Rpb24gaShlKXtyZXR1cm57c3RhdGU6InJlamVjdGVkIixy
        ZWFzb246ZX19dmFyIG89ZVsiZGVmYXVsdCJdLGE9dC5pc0FycmF5LHM9dC5p
        c05vblRoZW5hYmxlO3JbImRlZmF1bHQiXT1mdW5jdGlvbihlLHQpe3JldHVy
        biBuZXcgbyhmdW5jdGlvbih0KXtmdW5jdGlvbiByKGUpe3JldHVybiBmdW5j
        dGlvbih0KXtsKGUsbih0KSl9fWZ1bmN0aW9uIHUoZSl7cmV0dXJuIGZ1bmN0
        aW9uKHQpe2woZSxpKHQpKX19ZnVuY3Rpb24gbChlLHIpe21bZV09ciwwPT09
        LS1oJiZ0KG0pfWlmKCFhKGUpKXRocm93IG5ldyBUeXBlRXJyb3IoIllvdSBt
        dXN0IHBhc3MgYW4gYXJyYXkgdG8gYWxsU2V0dGxlZC4iKTt2YXIgYyxoPWUu
        bGVuZ3RoO2lmKDA9PT1oKXJldHVybiB0KFtdKSx2b2lkIDA7Zm9yKHZhciBt
        PW5ldyBBcnJheShoKSxwPTA7cDxlLmxlbmd0aDtwKyspYz1lW3BdLHMoYyk/
        bChwLG4oYykpOm8uY2FzdChjKS50aGVuKHIocCksdShwKSl9LHQpfX0pLGUo
        InJzdnAvY29uZmlnIixbIi4vZXZlbnRzIiwiZXhwb3J0cyJdLGZ1bmN0aW9u
        KGUsdCl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIHIoZSx0KXtyZXR1cm4ib25l
        cnJvciI9PT1lPyhpLm9uKCJlcnJvciIsdCksdm9pZCAwKToyIT09YXJndW1l
        bnRzLmxlbmd0aD9pW2VdOihpW2VdPXQsdm9pZCAwKX12YXIgbj1lWyJkZWZh
        dWx0Il0saT17aW5zdHJ1bWVudDohMX07bi5taXhpbihpKSx0LmNvbmZpZz1p
        LHQuY29uZmlndXJlPXJ9KSxlKCJyc3ZwL2RlZmVyIixbIi4vcHJvbWlzZSIs
        ImV4cG9ydHMiXSxmdW5jdGlvbihlLHQpeyJ1c2Ugc3RyaWN0Ijt2YXIgcj1l
        WyJkZWZhdWx0Il07dFsiZGVmYXVsdCJdPWZ1bmN0aW9uKGUpe3ZhciB0PXt9
        O3JldHVybiB0LnByb21pc2U9bmV3IHIoZnVuY3Rpb24oZSxyKXt0LnJlc29s
        dmU9ZSx0LnJlamVjdD1yfSxlKSx0fX0pLGUoInJzdnAvZXZlbnRzIixbImV4
        cG9ydHMiXSxmdW5jdGlvbihlKXsidXNlIHN0cmljdCI7dmFyIHQ9ZnVuY3Rp
        b24oZSx0KXtmb3IodmFyIHI9MCxuPWUubGVuZ3RoO24+cjtyKyspaWYoZVty
        XT09PXQpcmV0dXJuIHI7cmV0dXJuLTF9LHI9ZnVuY3Rpb24oZSl7dmFyIHQ9
        ZS5fcHJvbWlzZUNhbGxiYWNrcztyZXR1cm4gdHx8KHQ9ZS5fcHJvbWlzZUNh
        bGxiYWNrcz17fSksdH07ZVsiZGVmYXVsdCJdPXttaXhpbjpmdW5jdGlvbihl
        KXtyZXR1cm4gZS5vbj10aGlzLm9uLGUub2ZmPXRoaXMub2ZmLGUudHJpZ2dl
        cj10aGlzLnRyaWdnZXIsZS5fcHJvbWlzZUNhbGxiYWNrcz12b2lkIDAsZX0s
        b246ZnVuY3Rpb24oZSxuKXt2YXIgaSxvPXIodGhpcyk7aT1vW2VdLGl8fChp
        PW9bZV09W10pLC0xPT09dChpLG4pJiZpLnB1c2gobil9LG9mZjpmdW5jdGlv
        bihlLG4pe3ZhciBpLG8sYT1yKHRoaXMpO3JldHVybiBuPyhpPWFbZV0sbz10
        KGksbiksLTEhPT1vJiZpLnNwbGljZShvLDEpLHZvaWQgMCk6KGFbZV09W10s
        dm9pZCAwKX0sdHJpZ2dlcjpmdW5jdGlvbihlLHQpe3ZhciBuLGksbz1yKHRo
        aXMpO2lmKG49b1tlXSlmb3IodmFyIGE9MDthPG4ubGVuZ3RoO2ErKykoaT1u
        W2FdKSh0KX19fSksZSgicnN2cC9maWx0ZXIiLFsiLi9hbGwiLCIuL21hcCIs
        Ii4vdXRpbHMiLCJleHBvcnRzIl0sZnVuY3Rpb24oZSx0LHIsbil7InVzZSBz
        dHJpY3QiO2Z1bmN0aW9uIGkoZSx0LHIpe3JldHVybiBvKGUscikudGhlbihm
        dW5jdGlvbihuKXtpZighdShlKSl0aHJvdyBuZXcgVHlwZUVycm9yKCJZb3Ug
        bXVzdCBwYXNzIGFuIGFycmF5IHRvIGZpbHRlci4iKTtpZighcyh0KSl0aHJv
        dyBuZXcgVHlwZUVycm9yKCJZb3UgbXVzdCBwYXNzIGEgZnVuY3Rpb24gdG8g
        ZmlsdGVyJ3Mgc2Vjb25kIGFyZ3VtZW50LiIpO3JldHVybiBhKGUsdCxyKS50
        aGVuKGZ1bmN0aW9uKGUpe3ZhciB0LHI9bi5sZW5ndGgsaT1bXTtmb3IodD0w
        O3I+dDt0KyspZVt0XSYmaS5wdXNoKG5bdF0pO3JldHVybiBpfSl9KX12YXIg
        bz1lWyJkZWZhdWx0Il0sYT10WyJkZWZhdWx0Il0scz1yLmlzRnVuY3Rpb24s
        dT1yLmlzQXJyYXk7blsiZGVmYXVsdCJdPWl9KSxlKCJyc3ZwL2hhc2giLFsi
        Li9wcm9taXNlIiwiLi91dGlscyIsImV4cG9ydHMiXSxmdW5jdGlvbihlLHQs
        cil7InVzZSBzdHJpY3QiO3ZhciBuPWVbImRlZmF1bHQiXSxpPXQuaXNOb25U
        aGVuYWJsZSxvPXQua2V5c09mO3JbImRlZmF1bHQiXT1mdW5jdGlvbihlKXty
        ZXR1cm4gbmV3IG4oZnVuY3Rpb24odCxyKXtmdW5jdGlvbiBhKGUpe3JldHVy
        biBmdW5jdGlvbihyKXtjW2VdPXIsMD09PS0tbSYmdChjKX19ZnVuY3Rpb24g
        cyhlKXttPTAscihlKX12YXIgdSxsLGM9e30saD1vKGUpLG09aC5sZW5ndGg7
        aWYoMD09PW0pcmV0dXJuIHQoYyksdm9pZCAwO2Zvcih2YXIgcD0wO3A8aC5s
        ZW5ndGg7cCsrKWw9aFtwXSx1PWVbbF0saSh1KT8oY1tsXT11LDA9PT0tLW0m
        JnQoYykpOm4uY2FzdCh1KS50aGVuKGEobCkscyl9KX19KSxlKCJyc3ZwL2lu
        c3RydW1lbnQiLFsiLi9jb25maWciLCIuL3V0aWxzIiwiZXhwb3J0cyJdLGZ1
        bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49ZS5jb25maWcsaT10
        Lm5vdztyWyJkZWZhdWx0Il09ZnVuY3Rpb24oZSx0LHIpe3RyeXtuLnRyaWdn
        ZXIoZSx7Z3VpZDp0Ll9ndWlkS2V5K3QuX2lkLGV2ZW50TmFtZTplLGRldGFp
        bDp0Ll9kZXRhaWwsY2hpbGRHdWlkOnImJnQuX2d1aWRLZXkrci5faWQsbGFi
        ZWw6dC5fbGFiZWwsdGltZVN0YW1wOmkoKSxzdGFjazpuZXcgRXJyb3IodC5f
        bGFiZWwpLnN0YWNrfSl9Y2F0Y2gobyl7c2V0VGltZW91dChmdW5jdGlvbigp
        e3Rocm93IG99LDApfX19KSxlKCJyc3ZwL21hcCIsWyIuL3Byb21pc2UiLCIu
        L2FsbCIsIi4vdXRpbHMiLCJleHBvcnRzIl0sZnVuY3Rpb24oZSx0LHIsbil7
        InVzZSBzdHJpY3QiO3ZhciBpPShlWyJkZWZhdWx0Il0sdFsiZGVmYXVsdCJd
        KSxvPXIuaXNBcnJheSxhPXIuaXNGdW5jdGlvbjtuWyJkZWZhdWx0Il09ZnVu
        Y3Rpb24oZSx0LHIpe3JldHVybiBpKGUscikudGhlbihmdW5jdGlvbihuKXtp
        ZighbyhlKSl0aHJvdyBuZXcgVHlwZUVycm9yKCJZb3UgbXVzdCBwYXNzIGFu
        IGFycmF5IHRvIG1hcC4iKTtpZighYSh0KSl0aHJvdyBuZXcgVHlwZUVycm9y
        KCJZb3UgbXVzdCBwYXNzIGEgZnVuY3Rpb24gdG8gbWFwJ3Mgc2Vjb25kIGFy
        Z3VtZW50LiIpO3ZhciBzLHU9bi5sZW5ndGgsbD1bXTtmb3Iocz0wO3U+cztz
        KyspbC5wdXNoKHQobltzXSkpO3JldHVybiBpKGwscil9KX19KSxlKCJyc3Zw
        L25vZGUiLFsiLi9wcm9taXNlIiwiZXhwb3J0cyJdLGZ1bmN0aW9uKGUsdCl7
        InVzZSBzdHJpY3QiO2Z1bmN0aW9uIHIoZSx0KXtyZXR1cm4gZnVuY3Rpb24o
        cixuKXtyP3Qocik6YXJndW1lbnRzLmxlbmd0aD4yP2UoaS5jYWxsKGFyZ3Vt
        ZW50cywxKSk6ZShuKX19dmFyIG49ZVsiZGVmYXVsdCJdLGk9QXJyYXkucHJv
        dG90eXBlLnNsaWNlO3RbImRlZmF1bHQiXT1mdW5jdGlvbihlLHQpe3JldHVy
        biBmdW5jdGlvbigpe3ZhciBvPWkuY2FsbChhcmd1bWVudHMpLGE9dGhpc3x8
        dDtyZXR1cm4gbmV3IG4oZnVuY3Rpb24odCxpKXtuLmFsbChvKS50aGVuKGZ1
        bmN0aW9uKG4pe3RyeXtuLnB1c2gocih0LGkpKSxlLmFwcGx5KGEsbil9Y2F0
        Y2gobyl7aShvKX19KX0pfX19KSxlKCJyc3ZwL3Byb21pc2UiLFsiLi9jb25m
        aWciLCIuL2V2ZW50cyIsIi4vaW5zdHJ1bWVudCIsIi4vdXRpbHMiLCIuL3By
        b21pc2UvY2FzdCIsIi4vcHJvbWlzZS9hbGwiLCIuL3Byb21pc2UvcmFjZSIs
        Ii4vcHJvbWlzZS9yZXNvbHZlIiwiLi9wcm9taXNlL3JlamVjdCIsImV4cG9y
        dHMiXSxmdW5jdGlvbihlLHQscixuLGksbyxhLHMsdSxsKXsidXNlIHN0cmlj
        dCI7ZnVuY3Rpb24gYygpe31mdW5jdGlvbiBoKGUsdCl7aWYoIUEoZSkpdGhy
        b3cgbmV3IFR5cGVFcnJvcigiWW91IG11c3QgcGFzcyBhIHJlc29sdmVyIGZ1
        bmN0aW9uIGFzIHRoZSBmaXJzdCBhcmd1bWVudCB0byB0aGUgcHJvbWlzZSBj
        b25zdHJ1Y3RvciIpO2lmKCEodGhpcyBpbnN0YW5jZW9mIGgpKXRocm93IG5l
        dyBUeXBlRXJyb3IoIkZhaWxlZCB0byBjb25zdHJ1Y3QgJ1Byb21pc2UnOiBQ
        bGVhc2UgdXNlIHRoZSAnbmV3JyBvcGVyYXRvciwgdGhpcyBvYmplY3QgY29u
        c3RydWN0b3IgY2Fubm90IGJlIGNhbGxlZCBhcyBhIGZ1bmN0aW9uLiIpO3Ro
        aXMuX2lkPVIrKyx0aGlzLl9sYWJlbD10LHRoaXMuX3N1YnNjcmliZXJzPVtd
        LHcuaW5zdHJ1bWVudCYmQygiY3JlYXRlZCIsdGhpcyksYyE9PWUmJm0oZSx0
        aGlzKX1mdW5jdGlvbiBtKGUsdCl7ZnVuY3Rpb24gcihlKXt2KHQsZSl9ZnVu
        Y3Rpb24gbihlKXtnKHQsZSl9dHJ5e2UocixuKX1jYXRjaChpKXtuKGkpfX1m
        dW5jdGlvbiBwKGUsdCxyLG4pe3ZhciBpPWUuX3N1YnNjcmliZXJzLG89aS5s
        ZW5ndGg7aVtvXT10LGlbbytrXT1yLGlbbytqXT1ufWZ1bmN0aW9uIGYoZSx0
        KXt2YXIgcixuLGk9ZS5fc3Vic2NyaWJlcnMsbz1lLl9kZXRhaWw7dy5pbnN0
        cnVtZW50JiZDKHQ9PT1rPyJmdWxmaWxsZWQiOiJyZWplY3RlZCIsZSk7Zm9y
        KHZhciBhPTA7YTxpLmxlbmd0aDthKz0zKXI9aVthXSxuPWlbYSt0XSxkKHQs
        cixuLG8pO2UuX3N1YnNjcmliZXJzPW51bGx9ZnVuY3Rpb24gZChlLHQscixu
        KXt2YXIgaSxvLGEscyx1PUEocik7aWYodSl0cnl7aT1yKG4pLGE9ITB9Y2F0
        Y2gobCl7cz0hMCxvPWx9ZWxzZSBpPW4sYT0hMDtiKHQsaSl8fCh1JiZhP3Yo
        dCxpKTpzP2codCxvKTplPT09az92KHQsaSk6ZT09PWomJmcodCxpKSl9ZnVu
        Y3Rpb24gYihlLHQpe3ZhciByLG49bnVsbDt0cnl7aWYoZT09PXQpdGhyb3cg
        bmV3IFR5cGVFcnJvcigiQSBwcm9taXNlcyBjYWxsYmFjayBjYW5ub3QgcmV0
        dXJuIHRoYXQgc2FtZSBwcm9taXNlLiIpO2lmKE8odCkmJihuPXQudGhlbixB
        KG4pKSlyZXR1cm4gbi5jYWxsKHQsZnVuY3Rpb24obil7cmV0dXJuIHI/ITA6
        KHI9ITAsdCE9PW4/dihlLG4pOkUoZSxuKSx2b2lkIDApfSxmdW5jdGlvbih0
        KXtyZXR1cm4gcj8hMDoocj0hMCxnKGUsdCksdm9pZCAwKX0sImRlcml2ZWQg
        ZnJvbTogIisoZS5fbGFiZWx8fCIgdW5rbm93biBwcm9taXNlIikpLCEwfWNh
        dGNoKGkpe3JldHVybiByPyEwOihnKGUsaSksITApfXJldHVybiExfWZ1bmN0
        aW9uIHYoZSx0KXtlPT09dD9FKGUsdCk6YihlLHQpfHxFKGUsdCl9ZnVuY3Rp
        b24gRShlLHQpe2UuX3N0YXRlPT09RCYmKGUuX3N0YXRlPU0sZS5fZGV0YWls
        PXQsdy5hc3luYyh5LGUpKX1mdW5jdGlvbiBnKGUsdCl7ZS5fc3RhdGU9PT1E
        JiYoZS5fc3RhdGU9TSxlLl9kZXRhaWw9dCx3LmFzeW5jKF8sZSkpfWZ1bmN0
        aW9uIHkoZSl7ZihlLGUuX3N0YXRlPWspfWZ1bmN0aW9uIF8oZSl7ZS5fb25l
        cnJvciYmZS5fb25lcnJvcihlLl9kZXRhaWwpLGYoZSxlLl9zdGF0ZT1qKX12
        YXIgdz1lLmNvbmZpZyxDPSh0WyJkZWZhdWx0Il0sclsiZGVmYXVsdCJdKSxP
        PW4ub2JqZWN0T3JGdW5jdGlvbixBPW4uaXNGdW5jdGlvbixQPW4ubm93LHg9
        aVsiZGVmYXVsdCJdLFQ9b1siZGVmYXVsdCJdLFM9YVsiZGVmYXVsdCJdLFY9
        c1siZGVmYXVsdCJdLE49dVsiZGVmYXVsdCJdLEk9InJzdnBfIitQKCkrIi0i
        LFI9MDtsWyJkZWZhdWx0Il09aCxoLmNhc3Q9eCxoLmFsbD1ULGgucmFjZT1T
        LGgucmVzb2x2ZT1WLGgucmVqZWN0PU47dmFyIEQ9dm9pZCAwLE09MCxrPTEs
        aj0yO2gucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpoLF9pZDp2b2lkIDAsX2d1
        aWRLZXk6SSxfbGFiZWw6dm9pZCAwLF9zdGF0ZTp2b2lkIDAsX2RldGFpbDp2
        b2lkIDAsX3N1YnNjcmliZXJzOnZvaWQgMCxfb25lcnJvcjpmdW5jdGlvbihl
        KXt3LnRyaWdnZXIoImVycm9yIixlKX0sdGhlbjpmdW5jdGlvbihlLHQscil7
        dmFyIG49dGhpczt0aGlzLl9vbmVycm9yPW51bGw7dmFyIGk9bmV3IHRoaXMu
        Y29uc3RydWN0b3IoYyxyKTtpZih0aGlzLl9zdGF0ZSl7dmFyIG89YXJndW1l
        bnRzO3cuYXN5bmMoZnVuY3Rpb24oKXtkKG4uX3N0YXRlLGksb1tuLl9zdGF0
        ZS0xXSxuLl9kZXRhaWwpfSl9ZWxzZSBwKHRoaXMsaSxlLHQpO3JldHVybiB3
        Lmluc3RydW1lbnQmJkMoImNoYWluZWQiLG4saSksaX0sImNhdGNoIjpmdW5j
        dGlvbihlLHQpe3JldHVybiB0aGlzLnRoZW4obnVsbCxlLHQpfSwiZmluYWxs
        eSI6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLmNvbnN0cnVjdG9yO3JldHVy
        biB0aGlzLnRoZW4oZnVuY3Rpb24odCl7cmV0dXJuIHIuY2FzdChlKCkpLnRo
        ZW4oZnVuY3Rpb24oKXtyZXR1cm4gdH0pfSxmdW5jdGlvbih0KXtyZXR1cm4g
        ci5jYXN0KGUoKSkudGhlbihmdW5jdGlvbigpe3Rocm93IHR9KX0sdCl9fX0p
        LGUoInJzdnAvcHJvbWlzZS9hbGwiLFsiLi4vdXRpbHMiLCJleHBvcnRzIl0s
        ZnVuY3Rpb24oZSx0KXsidXNlIHN0cmljdCI7dmFyIHI9ZS5pc0FycmF5LG49
        ZS5pc05vblRoZW5hYmxlO3RbImRlZmF1bHQiXT1mdW5jdGlvbihlLHQpe3Zh
        ciBpPXRoaXM7cmV0dXJuIG5ldyBpKGZ1bmN0aW9uKHQsbyl7ZnVuY3Rpb24g
        YShlKXtyZXR1cm4gZnVuY3Rpb24ocil7Y1tlXT1yLDA9PT0tLWwmJnQoYyl9
        fWZ1bmN0aW9uIHMoZSl7bD0wLG8oZSl9aWYoIXIoZSkpdGhyb3cgbmV3IFR5
        cGVFcnJvcigiWW91IG11c3QgcGFzcyBhbiBhcnJheSB0byBhbGwuIik7dmFy
        IHUsbD1lLmxlbmd0aCxjPW5ldyBBcnJheShsKTtpZigwPT09bClyZXR1cm4g
        dChjKSx2b2lkIDA7Zm9yKHZhciBoPTA7aDxlLmxlbmd0aDtoKyspdT1lW2hd
        LG4odSk/KGNbaF09dSwwPT09LS1sJiZ0KGMpKTppLmNhc3QodSkudGhlbihh
        KGgpLHMpfSx0KX19KSxlKCJyc3ZwL3Byb21pc2UvY2FzdCIsWyJleHBvcnRz
        Il0sZnVuY3Rpb24oZSl7InVzZSBzdHJpY3QiO2VbImRlZmF1bHQiXT1mdW5j
        dGlvbihlLHQpe3ZhciByPXRoaXM7cmV0dXJuIGUmJiJvYmplY3QiPT10eXBl
        b2YgZSYmZS5jb25zdHJ1Y3Rvcj09PXI/ZTpuZXcgcihmdW5jdGlvbih0KXt0
        KGUpfSx0KX19KSxlKCJyc3ZwL3Byb21pc2UvcmFjZSIsWyIuLi91dGlscyIs
        ImV4cG9ydHMiXSxmdW5jdGlvbihlLHQpeyJ1c2Ugc3RyaWN0Ijt2YXIgcj1l
        LmlzQXJyYXksbj0oZS5pc0Z1bmN0aW9uLGUuaXNOb25UaGVuYWJsZSk7dFsi
        ZGVmYXVsdCJdPWZ1bmN0aW9uKGUsdCl7dmFyIGksbz10aGlzO3JldHVybiBu
        ZXcgbyhmdW5jdGlvbih0LGEpe2Z1bmN0aW9uIHMoZSl7bCYmKGw9ITEsdChl
        KSl9ZnVuY3Rpb24gdShlKXtsJiYobD0hMSxhKGUpKX1pZighcihlKSl0aHJv
        dyBuZXcgVHlwZUVycm9yKCJZb3UgbXVzdCBwYXNzIGFuIGFycmF5IHRvIHJh
        Y2UuIik7Zm9yKHZhciBsPSEwLGM9MDtjPGUubGVuZ3RoO2MrKyl7aWYoaT1l
        W2NdLG4oaSkpcmV0dXJuIGw9ITEsdChpKSx2b2lkIDA7by5jYXN0KGkpLnRo
        ZW4ocyx1KX19LHQpfX0pLGUoInJzdnAvcHJvbWlzZS9yZWplY3QiLFsiZXhw
        b3J0cyJdLGZ1bmN0aW9uKGUpeyJ1c2Ugc3RyaWN0IjtlWyJkZWZhdWx0Il09
        ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzO3JldHVybiBuZXcgcihmdW5jdGlv
        bih0LHIpe3IoZSl9LHQpfX0pLGUoInJzdnAvcHJvbWlzZS9yZXNvbHZlIixb
        ImV4cG9ydHMiXSxmdW5jdGlvbihlKXsidXNlIHN0cmljdCI7ZVsiZGVmYXVs
        dCJdPWZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcztyZXR1cm4gbmV3IHIoZnVu
        Y3Rpb24odCl7dChlKX0sdCl9fSksZSgicnN2cC9yYWNlIixbIi4vcHJvbWlz
        ZSIsImV4cG9ydHMiXSxmdW5jdGlvbihlLHQpeyJ1c2Ugc3RyaWN0Ijt2YXIg
        cj1lWyJkZWZhdWx0Il07dFsiZGVmYXVsdCJdPWZ1bmN0aW9uKGUsdCl7cmV0
        dXJuIHIucmFjZShlLHQpfX0pLGUoInJzdnAvcmVqZWN0IixbIi4vcHJvbWlz
        ZSIsImV4cG9ydHMiXSxmdW5jdGlvbihlLHQpeyJ1c2Ugc3RyaWN0Ijt2YXIg
        cj1lWyJkZWZhdWx0Il07dFsiZGVmYXVsdCJdPWZ1bmN0aW9uKGUsdCl7cmV0
        dXJuIHIucmVqZWN0KGUsdCl9fSksZSgicnN2cC9yZXNvbHZlIixbIi4vcHJv
        bWlzZSIsImV4cG9ydHMiXSxmdW5jdGlvbihlLHQpeyJ1c2Ugc3RyaWN0Ijt2
        YXIgcj1lWyJkZWZhdWx0Il07dFsiZGVmYXVsdCJdPWZ1bmN0aW9uKGUsdCl7
        cmV0dXJuIHIucmVzb2x2ZShlLHQpfX0pLGUoInJzdnAvcmV0aHJvdyIsWyJl
        eHBvcnRzIl0sZnVuY3Rpb24oZSl7InVzZSBzdHJpY3QiO2VbImRlZmF1bHQi
        XT1mdW5jdGlvbihlKXt0aHJvdyBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dGhy
        b3cgZX0pLGV9fSksZSgicnN2cC91dGlscyIsWyJleHBvcnRzIl0sZnVuY3Rp
        b24oZSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIHQoZSl7cmV0dXJuImZ1bmN0
        aW9uIj09dHlwZW9mIGV8fCJvYmplY3QiPT10eXBlb2YgZSYmbnVsbCE9PWV9
        ZnVuY3Rpb24gcihlKXtyZXR1cm4iZnVuY3Rpb24iPT10eXBlb2YgZX1mdW5j
        dGlvbiBuKGUpe3JldHVybiF0KGUpfWZ1bmN0aW9uIGkoZSl7cmV0dXJuIltv
        YmplY3QgQXJyYXldIj09PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2Fs
        bChlKX1lLm9iamVjdE9yRnVuY3Rpb249dCxlLmlzRnVuY3Rpb249cixlLmlz
        Tm9uVGhlbmFibGU9bixlLmlzQXJyYXk9aTt2YXIgbz1EYXRlLm5vd3x8ZnVu
        Y3Rpb24oKXtyZXR1cm4obmV3IERhdGUpLmdldFRpbWUoKX07ZS5ub3c9bzt2
        YXIgYT1PYmplY3Qua2V5c3x8ZnVuY3Rpb24oZSl7dmFyIHQ9W107Zm9yKHZh
        ciByIGluIGUpdC5wdXNoKHIpO3JldHVybiB0fTtlLmtleXNPZj1hfSksZSgi
        cnN2cCIsWyIuL3JzdnAvcHJvbWlzZSIsIi4vcnN2cC9ldmVudHMiLCIuL3Jz
        dnAvbm9kZSIsIi4vcnN2cC9hbGwiLCIuL3JzdnAvYWxsX3NldHRsZWQiLCIu
        L3JzdnAvcmFjZSIsIi4vcnN2cC9oYXNoIiwiLi9yc3ZwL3JldGhyb3ciLCIu
        L3JzdnAvZGVmZXIiLCIuL3JzdnAvY29uZmlnIiwiLi9yc3ZwL21hcCIsIi4v
        cnN2cC9yZXNvbHZlIiwiLi9yc3ZwL3JlamVjdCIsIi4vcnN2cC9maWx0ZXIi
        LCJleHBvcnRzIl0sZnVuY3Rpb24oZSx0LHIsbixpLG8sYSxzLHUsbCxjLGgs
        bSxwLGYpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBkKGUsdCl7eC5hc3luYyhl
        LHQpfWZ1bmN0aW9uIGIoKXt4Lm9uLmFwcGx5KHgsYXJndW1lbnRzKX1mdW5j
        dGlvbiB2KCl7eC5vZmYuYXBwbHkoeCxhcmd1bWVudHMpfXZhciBFPWVbImRl
        ZmF1bHQiXSxnPXRbImRlZmF1bHQiXSx5PXJbImRlZmF1bHQiXSxfPW5bImRl
        ZmF1bHQiXSx3PWlbImRlZmF1bHQiXSxDPW9bImRlZmF1bHQiXSxPPWFbImRl
        ZmF1bHQiXSxBPXNbImRlZmF1bHQiXSxQPXVbImRlZmF1bHQiXSx4PWwuY29u
        ZmlnLFQ9bC5jb25maWd1cmUsUz1jWyJkZWZhdWx0Il0sVj1oWyJkZWZhdWx0
        Il0sTj1tWyJkZWZhdWx0Il0sST1wWyJkZWZhdWx0Il07aWYoInVuZGVmaW5l
        ZCIhPXR5cGVvZiB3aW5kb3cmJiJvYmplY3QiPT10eXBlb2Ygd2luZG93Ll9f
        UFJPTUlTRV9JTlNUUlVNRU5UQVRJT05fXyl7dmFyIFI9d2luZG93Ll9fUFJP
        TUlTRV9JTlNUUlVNRU5UQVRJT05fXztUKCJpbnN0cnVtZW50IiwhMCk7Zm9y
        KHZhciBEIGluIFIpUi5oYXNPd25Qcm9wZXJ0eShEKSYmYihELFJbRF0pfWYu
        UHJvbWlzZT1FLGYuRXZlbnRUYXJnZXQ9ZyxmLmFsbD1fLGYuYWxsU2V0dGxl
        ZD13LGYucmFjZT1DLGYuaGFzaD1PLGYucmV0aHJvdz1BLGYuZGVmZXI9UCxm
        LmRlbm9kZWlmeT15LGYuY29uZmlndXJlPVQsZi5vbj1iLGYub2ZmPXYsZi5y
        ZXNvbHZlPVYsZi5yZWplY3Q9TixmLmFzeW5jPWQsZi5tYXA9UyxmLmZpbHRl
        cj1JfSl9KCksZnVuY3Rpb24oKXtlKCJjb250YWluZXIvY29udGFpbmVyIixb
        ImNvbnRhaW5lci9pbmhlcml0aW5nX2RpY3QiLCJleHBvcnRzIl0sZnVuY3Rp
        b24oZSx0KXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gcihlKXt0aGlzLnBhcmVu
        dD1lLHRoaXMuY2hpbGRyZW49W10sdGhpcy5yZXNvbHZlcj1lJiZlLnJlc29s
        dmVyfHxmdW5jdGlvbigpe30sdGhpcy5yZWdpc3RyeT1uZXcgRShlJiZlLnJl
        Z2lzdHJ5KSx0aGlzLmNhY2hlPW5ldyBFKGUmJmUuY2FjaGUpLHRoaXMuZmFj
        dG9yeUNhY2hlPW5ldyBFKGUmJmUuZmFjdG9yeUNhY2hlKSx0aGlzLnJlc29s
        dmVDYWNoZT1uZXcgRShlJiZlLnJlc29sdmVDYWNoZSksdGhpcy50eXBlSW5q
        ZWN0aW9ucz1uZXcgRShlJiZlLnR5cGVJbmplY3Rpb25zKSx0aGlzLmluamVj
        dGlvbnM9e30sdGhpcy5mYWN0b3J5VHlwZUluamVjdGlvbnM9bmV3IEUoZSYm
        ZS5mYWN0b3J5VHlwZUluamVjdGlvbnMpLHRoaXMuZmFjdG9yeUluamVjdGlv
        bnM9e30sdGhpcy5fb3B0aW9ucz1uZXcgRShlJiZlLl9vcHRpb25zKSx0aGlz
        Ll90eXBlT3B0aW9ucz1uZXcgRShlJiZlLl90eXBlT3B0aW9ucyl9ZnVuY3Rp
        b24gbihlLHQpe3JldHVybiBlLmNhY2hlLmhhcyh0KT8hMDohIWUucmVzb2x2
        ZSh0KX1mdW5jdGlvbiBpKGUsdCxyKXtpZihyPXJ8fHt9LGUuY2FjaGUuaGFz
        KHQpJiZyLnNpbmdsZXRvbiE9PSExKXJldHVybiBlLmNhY2hlLmdldCh0KTt2
        YXIgbj1tKGUsdCk7cmV0dXJuIHZvaWQgMCE9PW4/KGEoZSx0KSYmci5zaW5n
        bGV0b24hPT0hMSYmZS5jYWNoZS5zZXQodCxuKSxuKTp2b2lkIDB9ZnVuY3Rp
        b24gbyhlKXt0aHJvdyBuZXcgRXJyb3IoZSsiIGlzIG5vdCBjdXJyZW50bHkg
        c3VwcG9ydGVkIG9uIGNoaWxkIGNvbnRhaW5lcnMiKX1mdW5jdGlvbiBhKGUs
        dCl7dmFyIHI9dShlLHQsInNpbmdsZXRvbiIpO3JldHVybiByIT09ITF9ZnVu
        Y3Rpb24gcyhlLHQpe3ZhciByPXt9O2lmKCF0KXJldHVybiByO2Zvcih2YXIg
        bixvLGE9MCxzPXQubGVuZ3RoO3M+YTthKyspe2lmKG49dFthXSxvPWkoZSxu
        LmZ1bGxOYW1lKSx2b2lkIDA9PT1vKXRocm93IG5ldyBFcnJvcigiQXR0ZW1w
        dGluZyB0byBpbmplY3QgYW4gdW5rbm93biBpbmplY3Rpb246IGAiK24uZnVs
        bE5hbWUrImAiKTtyW24ucHJvcGVydHldPW99cmV0dXJuIHJ9ZnVuY3Rpb24g
        dShlLHQscil7dmFyIG49ZS5fb3B0aW9ucy5nZXQodCk7aWYobiYmdm9pZCAw
        IT09bltyXSlyZXR1cm4gbltyXTt2YXIgaT10LnNwbGl0KCI6IilbMF07cmV0
        dXJuIG49ZS5fdHlwZU9wdGlvbnMuZ2V0KGkpLG4/bltyXTp2b2lkIDB9ZnVu
        Y3Rpb24gbChlLHQpe3ZhciByLG49dCxpPWUucmVzb2x2ZShuKSxvPWUuZmFj
        dG9yeUNhY2hlLGE9dC5zcGxpdCgiOiIpWzBdO2lmKHZvaWQgMCE9PWkpe2lm
        KG8uaGFzKHQpKXJldHVybiBvLmdldCh0KTtpZighaXx8ImZ1bmN0aW9uIiE9
        dHlwZW9mIGkuZXh0ZW5kfHwhRW1iZXIuTU9ERUxfRkFDVE9SWV9JTkpFQ1RJ
        T05TJiYibW9kZWwiPT09YSlyZXR1cm4gaTt2YXIgcz1jKGUsdCksdT1oKGUs
        dCk7cmV0dXJuIHUuX3RvU3RyaW5nPWUubWFrZVRvU3RyaW5nKGksdCkscj1p
        LmV4dGVuZChzKSxyLnJlb3BlbkNsYXNzKHUpLG8uc2V0KHQscikscn19ZnVu
        Y3Rpb24gYyhlLHQpe3ZhciByPXQuc3BsaXQoIjoiKSxuPXJbMF0saT1bXTty
        ZXR1cm4gaT1pLmNvbmNhdChlLnR5cGVJbmplY3Rpb25zLmdldChuKXx8W10p
        LGk9aS5jb25jYXQoZS5pbmplY3Rpb25zW3RdfHxbXSksaT1zKGUsaSksaS5f
        ZGVidWdDb250YWluZXJLZXk9dCxpLmNvbnRhaW5lcj1lLGl9ZnVuY3Rpb24g
        aChlLHQpe3ZhciByPXQuc3BsaXQoIjoiKSxuPXJbMF0saT1bXTtyZXR1cm4g
        aT1pLmNvbmNhdChlLmZhY3RvcnlUeXBlSW5qZWN0aW9ucy5nZXQobil8fFtd
        KSxpPWkuY29uY2F0KGUuZmFjdG9yeUluamVjdGlvbnNbdF18fFtdKSxpPXMo
        ZSxpKSxpLl9kZWJ1Z0NvbnRhaW5lcktleT10LGl9ZnVuY3Rpb24gbShlLHQp
        e3ZhciByPWwoZSx0KTtyZXR1cm4gdShlLHQsImluc3RhbnRpYXRlIik9PT0h
        MT9yOnI/ImZ1bmN0aW9uIj09dHlwZW9mIHIuZXh0ZW5kP3IuY3JlYXRlKCk6
        ci5jcmVhdGUoYyhlLHQpKTp2b2lkIDB9ZnVuY3Rpb24gcChlLHQpe2UuY2Fj
        aGUuZWFjaExvY2FsKGZ1bmN0aW9uKHIsbil7dShlLHIsImluc3RhbnRpYXRl
        IikhPT0hMSYmdChuKQp9KX1mdW5jdGlvbiBmKGUpe2UuY2FjaGUuZWFjaExv
        Y2FsKGZ1bmN0aW9uKHQscil7dShlLHQsImluc3RhbnRpYXRlIikhPT0hMSYm
        ci5kZXN0cm95KCl9KSxlLmNhY2hlLmRpY3Q9e319ZnVuY3Rpb24gZChlLHQs
        cixuKXt2YXIgaT1lLmdldCh0KTtpfHwoaT1bXSxlLnNldCh0LGkpKSxpLnB1
        c2goe3Byb3BlcnR5OnIsZnVsbE5hbWU6bn0pfWZ1bmN0aW9uIGIoZSl7aWYo
        IWcudGVzdChlKSl0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIEZ1bGxu
        YW1lLCBleHBlY3RlZDogYHR5cGU6bmFtZWAgZ290OiAiK2UpfWZ1bmN0aW9u
        IHYoZSx0LHIsbil7dmFyIGk9ZVt0XT1lW3RdfHxbXTtpLnB1c2goe3Byb3Bl
        cnR5OnIsZnVsbE5hbWU6bn0pfXZhciBFPWVbImRlZmF1bHQiXTtyLnByb3Rv
        dHlwZT17cGFyZW50Om51bGwsY2hpbGRyZW46bnVsbCxyZXNvbHZlcjpudWxs
        LHJlZ2lzdHJ5Om51bGwsY2FjaGU6bnVsbCx0eXBlSW5qZWN0aW9uczpudWxs
        LGluamVjdGlvbnM6bnVsbCxfb3B0aW9uczpudWxsLF90eXBlT3B0aW9uczpu
        dWxsLGNoaWxkOmZ1bmN0aW9uKCl7dmFyIGU9bmV3IHIodGhpcyk7cmV0dXJu
        IHRoaXMuY2hpbGRyZW4ucHVzaChlKSxlfSxzZXQ6ZnVuY3Rpb24oZSx0LHIp
        e2VbdF09cn0scmVnaXN0ZXI6ZnVuY3Rpb24oZSx0LHIpe2lmKGIoZSksdm9p
        ZCAwPT09dCl0aHJvdyBuZXcgVHlwZUVycm9yKCJBdHRlbXB0aW5nIHRvIHJl
        Z2lzdGVyIGFuIHVua25vd24gZmFjdG9yeTogYCIrZSsiYCIpO3ZhciBuPXRo
        aXMubm9ybWFsaXplKGUpO2lmKHRoaXMuY2FjaGUuaGFzKG4pKXRocm93IG5l
        dyBFcnJvcigiQ2Fubm90IHJlLXJlZ2lzdGVyOiBgIitlKyJgLCBhcyBpdCBo
        YXMgYWxyZWFkeSBiZWVuIGxvb2tlZCB1cC4iKTt0aGlzLnJlZ2lzdHJ5LnNl
        dChuLHQpLHRoaXMuX29wdGlvbnMuc2V0KG4scnx8e30pfSx1bnJlZ2lzdGVy
        OmZ1bmN0aW9uKGUpe2IoZSk7dmFyIHQ9dGhpcy5ub3JtYWxpemUoZSk7dGhp
        cy5yZWdpc3RyeS5yZW1vdmUodCksdGhpcy5jYWNoZS5yZW1vdmUodCksdGhp
        cy5mYWN0b3J5Q2FjaGUucmVtb3ZlKHQpLHRoaXMucmVzb2x2ZUNhY2hlLnJl
        bW92ZSh0KSx0aGlzLl9vcHRpb25zLnJlbW92ZSh0KX0scmVzb2x2ZTpmdW5j
        dGlvbihlKXtiKGUpO3ZhciB0PXRoaXMubm9ybWFsaXplKGUpLHI9dGhpcy5y
        ZXNvbHZlQ2FjaGUuZ2V0KHQpO2lmKHIpcmV0dXJuIHI7dmFyIG49dGhpcy5y
        ZXNvbHZlcih0KXx8dGhpcy5yZWdpc3RyeS5nZXQodCk7cmV0dXJuIHRoaXMu
        cmVzb2x2ZUNhY2hlLnNldCh0LG4pLG59LGRlc2NyaWJlOmZ1bmN0aW9uKGUp
        e3JldHVybiBlfSxub3JtYWxpemU6ZnVuY3Rpb24oZSl7cmV0dXJuIGV9LG1h
        a2VUb1N0cmluZzpmdW5jdGlvbihlKXtyZXR1cm4gZS50b1N0cmluZygpfSxs
        b29rdXA6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gYihlKSxpKHRoaXMsdGhpcy5u
        b3JtYWxpemUoZSksdCl9LGxvb2t1cEZhY3Rvcnk6ZnVuY3Rpb24oZSl7cmV0
        dXJuIGIoZSksbCh0aGlzLHRoaXMubm9ybWFsaXplKGUpKX0saGFzOmZ1bmN0
        aW9uKGUpe3JldHVybiBiKGUpLG4odGhpcyx0aGlzLm5vcm1hbGl6ZShlKSl9
        LG9wdGlvbnNGb3JUeXBlOmZ1bmN0aW9uKGUsdCl7dGhpcy5wYXJlbnQmJm8o
        Im9wdGlvbnNGb3JUeXBlIiksdGhpcy5fdHlwZU9wdGlvbnMuc2V0KGUsdCl9
        LG9wdGlvbnM6ZnVuY3Rpb24oZSx0KXt0aGlzLm9wdGlvbnNGb3JUeXBlKGUs
        dCl9LHR5cGVJbmplY3Rpb246ZnVuY3Rpb24oZSx0LHIpe2IociksdGhpcy5w
        YXJlbnQmJm8oInR5cGVJbmplY3Rpb24iKSxkKHRoaXMudHlwZUluamVjdGlv
        bnMsZSx0LHIpfSxpbmplY3Rpb246ZnVuY3Rpb24oZSx0LHIpe3RoaXMucGFy
        ZW50JiZvKCJpbmplY3Rpb24iKSxiKHIpO3ZhciBuPXRoaXMubm9ybWFsaXpl
        KHIpO2lmKC0xPT09ZS5pbmRleE9mKCI6IikpcmV0dXJuIHRoaXMudHlwZUlu
        amVjdGlvbihlLHQsbik7YihlKTt2YXIgaT10aGlzLm5vcm1hbGl6ZShlKTt2
        KHRoaXMuaW5qZWN0aW9ucyxpLHQsbil9LGZhY3RvcnlUeXBlSW5qZWN0aW9u
        OmZ1bmN0aW9uKGUsdCxyKXt0aGlzLnBhcmVudCYmbygiZmFjdG9yeVR5cGVJ
        bmplY3Rpb24iKSxkKHRoaXMuZmFjdG9yeVR5cGVJbmplY3Rpb25zLGUsdCx0
        aGlzLm5vcm1hbGl6ZShyKSl9LGZhY3RvcnlJbmplY3Rpb246ZnVuY3Rpb24o
        ZSx0LHIpe3RoaXMucGFyZW50JiZvKCJpbmplY3Rpb24iKTt2YXIgbj10aGlz
        Lm5vcm1hbGl6ZShlKSxpPXRoaXMubm9ybWFsaXplKHIpO3JldHVybiBiKHIp
        LC0xPT09ZS5pbmRleE9mKCI6Iik/dGhpcy5mYWN0b3J5VHlwZUluamVjdGlv
        bihuLHQsaSk6KGIoZSksdih0aGlzLmZhY3RvcnlJbmplY3Rpb25zLG4sdCxp
        KSx2b2lkIDApfSxkZXN0cm95OmZ1bmN0aW9uKCl7Zm9yKHZhciBlPTAsdD10
        aGlzLmNoaWxkcmVuLmxlbmd0aDt0PmU7ZSsrKXRoaXMuY2hpbGRyZW5bZV0u
        ZGVzdHJveSgpO3RoaXMuY2hpbGRyZW49W10scCh0aGlzLGZ1bmN0aW9uKGUp
        e2UuZGVzdHJveSgpfSksdGhpcy5wYXJlbnQ9dm9pZCAwLHRoaXMuaXNEZXN0
        cm95ZWQ9ITB9LHJlc2V0OmZ1bmN0aW9uKCl7Zm9yKHZhciBlPTAsdD10aGlz
        LmNoaWxkcmVuLmxlbmd0aDt0PmU7ZSsrKWYodGhpcy5jaGlsZHJlbltlXSk7
        Zih0aGlzKX19O3ZhciBnPS9eW146XSsuKzpbXjpdKyQvO3RbImRlZmF1bHQi
        XT1yfSksZSgiY29udGFpbmVyL2luaGVyaXRpbmdfZGljdCIsWyJleHBvcnRz
        Il0sZnVuY3Rpb24oZSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIHQoZSl7dGhp
        cy5wYXJlbnQ9ZSx0aGlzLmRpY3Q9e319dC5wcm90b3R5cGU9e3BhcmVudDpu
        dWxsLGRpY3Q6bnVsbCxnZXQ6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5kaWN0
        O3JldHVybiB0Lmhhc093blByb3BlcnR5KGUpP3RbZV06dGhpcy5wYXJlbnQ/
        dGhpcy5wYXJlbnQuZ2V0KGUpOnZvaWQgMH0sc2V0OmZ1bmN0aW9uKGUsdCl7
        dGhpcy5kaWN0W2VdPXR9LHJlbW92ZTpmdW5jdGlvbihlKXtkZWxldGUgdGhp
        cy5kaWN0W2VdfSxoYXM6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5kaWN0O3Jl
        dHVybiB0Lmhhc093blByb3BlcnR5KGUpPyEwOnRoaXMucGFyZW50P3RoaXMu
        cGFyZW50LmhhcyhlKTohMX0sZWFjaExvY2FsOmZ1bmN0aW9uKGUsdCl7dmFy
        IHI9dGhpcy5kaWN0O2Zvcih2YXIgbiBpbiByKXIuaGFzT3duUHJvcGVydHko
        bikmJmUuY2FsbCh0LG4scltuXSl9fSxlWyJkZWZhdWx0Il09dH0pLGUoImNv
        bnRhaW5lciIsWyJjb250YWluZXIvY29udGFpbmVyIiwiZXhwb3J0cyJdLGZ1
        bmN0aW9uKGUsdCl7InVzZSBzdHJpY3QiO0VtYmVyLk1PREVMX0ZBQ1RPUllf
        SU5KRUNUSU9OUz0hMXx8ISFFbWJlci5FTlYuTU9ERUxfRkFDVE9SWV9JTkpF
        Q1RJT05TO3ZhciByPWVbImRlZmF1bHQiXTt0WyJkZWZhdWx0Il09cn0pfSgp
        LGZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShyLG4saSxvKXt2YXIgYSxzLHU7aWYo
        Im9iamVjdCIhPXR5cGVvZiByfHxudWxsPT09cilyZXR1cm4gcjtpZihuJiYo
        cz10KGkscikpPj0wKXJldHVybiBvW3NdO2lmKCJhcnJheSI9PT1FbWJlci50
        eXBlT2Yocikpe2lmKGE9ci5zbGljZSgpLG4pZm9yKHM9YS5sZW5ndGg7LS1z
        Pj0wOylhW3NdPWUoYVtzXSxuLGksbyl9ZWxzZSBpZihFbWJlci5Db3B5YWJs
        ZSYmRW1iZXIuQ29weWFibGUuZGV0ZWN0KHIpKWE9ci5jb3B5KG4saSxvKTtl
        bHNle2E9e307Zm9yKHUgaW4gcilyLmhhc093blByb3BlcnR5KHUpJiYiX18i
        IT09dS5zdWJzdHJpbmcoMCwyKSYmKGFbdV09bj9lKHJbdV0sbixpLG8pOnJb
        dV0pfXJldHVybiBuJiYoaS5wdXNoKHIpLG8ucHVzaChhKSksYX12YXIgdD1F
        bWJlci5FbnVtZXJhYmxlVXRpbHMuaW5kZXhPZjtpZihFbWJlci5jb21wYXJl
        PWZ1bmN0aW9uIGkoZSx0KXtpZihlPT09dClyZXR1cm4gMDt2YXIgcj1FbWJl
        ci50eXBlT2YoZSksbj1FbWJlci50eXBlT2YodCksbz1FbWJlci5Db21wYXJh
        YmxlO2lmKG8pe2lmKCJpbnN0YW5jZSI9PT1yJiZvLmRldGVjdChlLmNvbnN0
        cnVjdG9yKSlyZXR1cm4gZS5jb25zdHJ1Y3Rvci5jb21wYXJlKGUsdCk7aWYo
        Imluc3RhbmNlIj09PW4mJm8uZGV0ZWN0KHQuY29uc3RydWN0b3IpKXJldHVy
        biAxLXQuY29uc3RydWN0b3IuY29tcGFyZSh0LGUpfXZhciBhPUVtYmVyLk9S
        REVSX0RFRklOSVRJT05fTUFQUElORztpZighYSl7dmFyIHM9RW1iZXIuT1JE
        RVJfREVGSU5JVElPTjthPUVtYmVyLk9SREVSX0RFRklOSVRJT05fTUFQUElO
        Rz17fTt2YXIgdSxsO2Zvcih1PTAsbD1zLmxlbmd0aDtsPnU7Kyt1KWFbc1t1
        XV09dTtkZWxldGUgRW1iZXIuT1JERVJfREVGSU5JVElPTn12YXIgYz1hW3Jd
        LGg9YVtuXTtpZihoPmMpcmV0dXJuLTE7aWYoYz5oKXJldHVybiAxO3N3aXRj
        aChyKXtjYXNlImJvb2xlYW4iOmNhc2UibnVtYmVyIjpyZXR1cm4gdD5lPy0x
        OmU+dD8xOjA7Y2FzZSJzdHJpbmciOnZhciBtPWUubG9jYWxlQ29tcGFyZSh0
        KTtyZXR1cm4gMD5tPy0xOm0+MD8xOjA7Y2FzZSJhcnJheSI6Zm9yKHZhciBw
        PWUubGVuZ3RoLGY9dC5sZW5ndGgsZD1NYXRoLm1pbihwLGYpLGI9MCx2PTA7
        MD09PWImJmQ+djspYj1pKGVbdl0sdFt2XSksdisrO3JldHVybiAwIT09Yj9i
        OmY+cD8tMTpwPmY/MTowO2Nhc2UiaW5zdGFuY2UiOnJldHVybiBFbWJlci5D
        b21wYXJhYmxlJiZFbWJlci5Db21wYXJhYmxlLmRldGVjdChlKT9lLmNvbXBh
        cmUoZSx0KTowO2Nhc2UiZGF0ZSI6dmFyIEU9ZS5nZXRUaW1lKCksZz10Lmdl
        dFRpbWUoKTtyZXR1cm4gZz5FPy0xOkU+Zz8xOjA7ZGVmYXVsdDpyZXR1cm4g
        MH19LEVtYmVyLmNvcHk9ZnVuY3Rpb24odCxyKXtyZXR1cm4ib2JqZWN0IiE9
        dHlwZW9mIHR8fG51bGw9PT10P3Q6RW1iZXIuQ29weWFibGUmJkVtYmVyLkNv
        cHlhYmxlLmRldGVjdCh0KT90LmNvcHkocik6ZSh0LHIscj9bXTpudWxsLHI/
        W106bnVsbCl9LEVtYmVyLmlzRXF1YWw9ZnVuY3Rpb24oZSx0KXtyZXR1cm4g
        ZSYmImZ1bmN0aW9uIj09dHlwZW9mIGUuaXNFcXVhbD9lLmlzRXF1YWwodCk6
        ZT09PXR9LEVtYmVyLk9SREVSX0RFRklOSVRJT049RW1iZXIuRU5WLk9SREVS
        X0RFRklOSVRJT058fFsidW5kZWZpbmVkIiwibnVsbCIsImJvb2xlYW4iLCJu
        dW1iZXIiLCJzdHJpbmciLCJhcnJheSIsIm9iamVjdCIsImluc3RhbmNlIiwi
        ZnVuY3Rpb24iLCJjbGFzcyIsImRhdGUiXSxFbWJlci5rZXlzPU9iamVjdC5r
        ZXlzLCFFbWJlci5rZXlzfHxFbWJlci5jcmVhdGUuaXNTaW11bGF0ZWQpe3Zh
        ciByPVsiY29uc3RydWN0b3IiLCJoYXNPd25Qcm9wZXJ0eSIsImlzUHJvdG90
        eXBlT2YiLCJwcm9wZXJ0eUlzRW51bWVyYWJsZSIsInZhbHVlT2YiLCJ0b0xv
        Y2FsZVN0cmluZyIsInRvU3RyaW5nIl0sbj1mdW5jdGlvbihlLHIsbil7Il9f
        IiE9PW4uc3Vic3RyaW5nKDAsMikmJiJfc3VwZXIiIT09biYmKHQocixuKT49
        MHx8ZS5oYXNPd25Qcm9wZXJ0eShuKSYmci5wdXNoKG4pKX07RW1iZXIua2V5
        cz1mdW5jdGlvbihlKXt2YXIgdCxpPVtdO2Zvcih0IGluIGUpbihlLGksdCk7
        Zm9yKHZhciBvPTAsYT1yLmxlbmd0aDthPm87bysrKXQ9cltvXSxuKGUsaSx0
        KTtyZXR1cm4gaX19fSgpLGZ1bmN0aW9uKCl7dmFyIGU9L1sgX10vZyx0PXt9
        LHI9LyhbYS16XGRdKShbQS1aXSkvZyxuPS8oXC18X3xcLnxccykrKC4pPy9n
        LGk9LyhbYS16XGRdKShbQS1aXSspL2csbz0vXC18XHMrL2c7RW1iZXIuU1RS
        SU5HUz17fSxFbWJlci5TdHJpbmc9e2ZtdDpmdW5jdGlvbihlLHQpe3ZhciBy
        PTA7cmV0dXJuIGUucmVwbGFjZSgvJUAoWzAtOV0rKT8vZyxmdW5jdGlvbihl
        LG4pe3JldHVybiBuPW4/cGFyc2VJbnQobiwxMCktMTpyKyssZT10W25dLG51
        bGw9PT1lPyIobnVsbCkiOnZvaWQgMD09PWU/IiI6RW1iZXIuaW5zcGVjdChl
        KX0pfSxsb2M6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZT1FbWJlci5TVFJJTkdT
        W2VdfHxlLEVtYmVyLlN0cmluZy5mbXQoZSx0KX0sdzpmdW5jdGlvbihlKXty
        ZXR1cm4gZS5zcGxpdCgvXHMrLyl9LGRlY2FtZWxpemU6ZnVuY3Rpb24oZSl7
        cmV0dXJuIGUucmVwbGFjZShyLCIkMV8kMiIpLnRvTG93ZXJDYXNlKCl9LGRh
        c2hlcml6ZTpmdW5jdGlvbihyKXt2YXIgbixpPXQsbz1pLmhhc093blByb3Bl
        cnR5KHIpO3JldHVybiBvP2lbcl06KG49RW1iZXIuU3RyaW5nLmRlY2FtZWxp
        emUocikucmVwbGFjZShlLCItIiksaVtyXT1uLG4pfSxjYW1lbGl6ZTpmdW5j
        dGlvbihlKXtyZXR1cm4gZS5yZXBsYWNlKG4sZnVuY3Rpb24oZSx0LHIpe3Jl
        dHVybiByP3IudG9VcHBlckNhc2UoKToiIn0pLnJlcGxhY2UoL14oW0EtWl0p
        LyxmdW5jdGlvbihlKXtyZXR1cm4gZS50b0xvd2VyQ2FzZSgpfSl9LGNsYXNz
        aWZ5OmZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1lLnNwbGl0KCIuIikscj1bXSxu
        PTAsaT10Lmxlbmd0aDtpPm47bisrKXt2YXIgbz1FbWJlci5TdHJpbmcuY2Ft
        ZWxpemUodFtuXSk7ci5wdXNoKG8uY2hhckF0KDApLnRvVXBwZXJDYXNlKCkr
        by5zdWJzdHIoMSkpfXJldHVybiByLmpvaW4oIi4iKX0sdW5kZXJzY29yZTpm
        dW5jdGlvbihlKXtyZXR1cm4gZS5yZXBsYWNlKGksIiQxXyQyIikucmVwbGFj
        ZShvLCJfIikudG9Mb3dlckNhc2UoKX0sY2FwaXRhbGl6ZTpmdW5jdGlvbihl
        KXtyZXR1cm4gZS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKStlLnN1YnN0cigx
        KX19fSgpLGZ1bmN0aW9uKCl7dmFyIGU9RW1iZXIuU3RyaW5nLmZtdCx0PUVt
        YmVyLlN0cmluZy53LHI9RW1iZXIuU3RyaW5nLmxvYyxuPUVtYmVyLlN0cmlu
        Zy5jYW1lbGl6ZSxpPUVtYmVyLlN0cmluZy5kZWNhbWVsaXplLG89RW1iZXIu
        U3RyaW5nLmRhc2hlcml6ZSxhPUVtYmVyLlN0cmluZy51bmRlcnNjb3JlLHM9
        RW1iZXIuU3RyaW5nLmNhcGl0YWxpemUsdT1FbWJlci5TdHJpbmcuY2xhc3Np
        Znk7KEVtYmVyLkVYVEVORF9QUk9UT1RZUEVTPT09ITB8fEVtYmVyLkVYVEVO
        RF9QUk9UT1RZUEVTLlN0cmluZykmJihTdHJpbmcucHJvdG90eXBlLmZtdD1m
        dW5jdGlvbigpe3JldHVybiBlKHRoaXMsYXJndW1lbnRzKX0sU3RyaW5nLnBy
        b3RvdHlwZS53PWZ1bmN0aW9uKCl7cmV0dXJuIHQodGhpcyl9LFN0cmluZy5w
        cm90b3R5cGUubG9jPWZ1bmN0aW9uKCl7cmV0dXJuIHIodGhpcyxhcmd1bWVu
        dHMpfSxTdHJpbmcucHJvdG90eXBlLmNhbWVsaXplPWZ1bmN0aW9uKCl7cmV0
        dXJuIG4odGhpcyl9LFN0cmluZy5wcm90b3R5cGUuZGVjYW1lbGl6ZT1mdW5j
        dGlvbigpe3JldHVybiBpKHRoaXMpfSxTdHJpbmcucHJvdG90eXBlLmRhc2hl
        cml6ZT1mdW5jdGlvbigpe3JldHVybiBvKHRoaXMpfSxTdHJpbmcucHJvdG90
        eXBlLnVuZGVyc2NvcmU9ZnVuY3Rpb24oKXtyZXR1cm4gYSh0aGlzKX0sU3Ry
        aW5nLnByb3RvdHlwZS5jbGFzc2lmeT1mdW5jdGlvbigpe3JldHVybiB1KHRo
        aXMpfSxTdHJpbmcucHJvdG90eXBlLmNhcGl0YWxpemU9ZnVuY3Rpb24oKXty
        ZXR1cm4gcyh0aGlzKX0pfSgpLGZ1bmN0aW9uKCl7dmFyIGU9RW1iZXIuZ2V0
        LHQ9RW1iZXIuc2V0LHI9QXJyYXkucHJvdG90eXBlLnNsaWNlLG49RW1iZXIu
        Z2V0UHJvcGVydGllcztFbWJlci5PYnNlcnZhYmxlPUVtYmVyLk1peGluLmNy
        ZWF0ZSh7Z2V0OmZ1bmN0aW9uKHQpe3JldHVybiBlKHRoaXMsdCl9LGdldFBy
        b3BlcnRpZXM6ZnVuY3Rpb24oKXtyZXR1cm4gbi5hcHBseShudWxsLFt0aGlz
        XS5jb25jYXQoci5jYWxsKGFyZ3VtZW50cykpKX0sc2V0OmZ1bmN0aW9uKGUs
        cil7cmV0dXJuIHQodGhpcyxlLHIpLHRoaXN9LHNldFByb3BlcnRpZXM6ZnVu
        Y3Rpb24oZSl7cmV0dXJuIEVtYmVyLnNldFByb3BlcnRpZXModGhpcyxlKX0s
        YmVnaW5Qcm9wZXJ0eUNoYW5nZXM6ZnVuY3Rpb24oKXtyZXR1cm4gRW1iZXIu
        YmVnaW5Qcm9wZXJ0eUNoYW5nZXMoKSx0aGlzfSxlbmRQcm9wZXJ0eUNoYW5n
        ZXM6ZnVuY3Rpb24oKXtyZXR1cm4gRW1iZXIuZW5kUHJvcGVydHlDaGFuZ2Vz
        KCksdGhpc30scHJvcGVydHlXaWxsQ2hhbmdlOmZ1bmN0aW9uKGUpe3JldHVy
        biBFbWJlci5wcm9wZXJ0eVdpbGxDaGFuZ2UodGhpcyxlKSx0aGlzfSxwcm9w
        ZXJ0eURpZENoYW5nZTpmdW5jdGlvbihlKXtyZXR1cm4gRW1iZXIucHJvcGVy
        dHlEaWRDaGFuZ2UodGhpcyxlKSx0aGlzfSxub3RpZnlQcm9wZXJ0eUNoYW5n
        ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5wcm9wZXJ0eVdpbGxDaGFuZ2Uo
        ZSksdGhpcy5wcm9wZXJ0eURpZENoYW5nZShlKSx0aGlzfSxhZGRCZWZvcmVP
        YnNlcnZlcjpmdW5jdGlvbihlLHQscil7RW1iZXIuYWRkQmVmb3JlT2JzZXJ2
        ZXIodGhpcyxlLHQscil9LGFkZE9ic2VydmVyOmZ1bmN0aW9uKGUsdCxyKXtF
        bWJlci5hZGRPYnNlcnZlcih0aGlzLGUsdCxyKX0scmVtb3ZlT2JzZXJ2ZXI6
        ZnVuY3Rpb24oZSx0LHIpe0VtYmVyLnJlbW92ZU9ic2VydmVyKHRoaXMsZSx0
        LHIpfSxoYXNPYnNlcnZlckZvcjpmdW5jdGlvbihlKXtyZXR1cm4gRW1iZXIu
        aGFzTGlzdGVuZXJzKHRoaXMsZSsiOmNoYW5nZSIpfSxnZXRXaXRoRGVmYXVs
        dDpmdW5jdGlvbihlLHQpe3JldHVybiBFbWJlci5nZXRXaXRoRGVmYXVsdCh0
        aGlzLGUsdCl9LGluY3JlbWVudFByb3BlcnR5OmZ1bmN0aW9uKHIsbil7cmV0
        dXJuIEVtYmVyLmlzTm9uZShuKSYmKG49MSksdCh0aGlzLHIsKGUodGhpcyxy
        KXx8MCkrbiksZSh0aGlzLHIpfSxkZWNyZW1lbnRQcm9wZXJ0eTpmdW5jdGlv
        bihyLG4pe3JldHVybiBFbWJlci5pc05vbmUobikmJihuPTEpLHQodGhpcyxy
        LChlKHRoaXMscil8fDApLW4pLGUodGhpcyxyKX0sdG9nZ2xlUHJvcGVydHk6
        ZnVuY3Rpb24ocil7cmV0dXJuIHQodGhpcyxyLCFlKHRoaXMscikpLGUodGhp
        cyxyKX0sY2FjaGVGb3I6ZnVuY3Rpb24oZSl7cmV0dXJuIEVtYmVyLmNhY2hl
        Rm9yKHRoaXMsZSl9LG9ic2VydmVyc0ZvcktleTpmdW5jdGlvbihlKXtyZXR1
        cm4gRW1iZXIub2JzZXJ2ZXJzRm9yKHRoaXMsZSl9fSl9KCksZnVuY3Rpb24o
        KXtmdW5jdGlvbiBlKCl7dmFyIGUsdCxvPSExLGE9ZnVuY3Rpb24oKXtvfHxh
        LnByb3RvKCksbih0aGlzLGksXyksbih0aGlzLCJfX25leHRTdXBlciIseSk7
        dmFyIHU9cyh0aGlzKSxsPXUucHJvdG87aWYodS5wcm90bz10aGlzLGUpe3Zh
        ciBtPWU7ZT1udWxsLHRoaXMucmVvcGVuLmFwcGx5KHRoaXMsbSl9aWYodCl7
        dmFyIHA9dDt0PW51bGw7Zm9yKHZhciBmPXRoaXMuY29uY2F0ZW5hdGVkUHJv
        cGVydGllcyxkPTAsdj1wLmxlbmd0aDt2PmQ7ZCsrKXt2YXIgdz1wW2RdO2lm
        KCJvYmplY3QiIT10eXBlb2YgdyYmdm9pZCAwIT09dyl0aHJvdyBuZXcgRW1i
        ZXIuRXJyb3IoIkVtYmVyLk9iamVjdC5jcmVhdGUgb25seSBhY2NlcHRzIG9i
        amVjdHMuIik7aWYodylmb3IodmFyIEM9RW1iZXIua2V5cyh3KSxPPTAsQT1D
        Lmxlbmd0aDtBPk87TysrKXt2YXIgUD1DW09dO2lmKHcuaGFzT3duUHJvcGVy
        dHkoUCkpe3ZhciB4PXdbUF0sVD1FbWJlci5JU19CSU5ESU5HO2lmKFQudGVz
        dChQKSl7dmFyIFM9dS5iaW5kaW5ncztTP3UuaGFzT3duUHJvcGVydHkoImJp
        bmRpbmdzIil8fChTPXUuYmluZGluZ3M9cih1LmJpbmRpbmdzKSk6Uz11LmJp
        bmRpbmdzPXt9LFNbUF09eH12YXIgVj11LmRlc2NzW1BdO2lmKGYmJmcoZixQ
        KT49MCl7dmFyIE49dGhpc1tQXTt4PU4/ImZ1bmN0aW9uIj09dHlwZW9mIE4u
        Y29uY2F0P04uY29uY2F0KHgpOkVtYmVyLm1ha2VBcnJheShOKS5jb25jYXQo
        eCk6RW1iZXIubWFrZUFycmF5KHgpfVY/Vi5zZXQodGhpcyxQLHgpOiJmdW5j
        dGlvbiIhPXR5cGVvZiB0aGlzLnNldFVua25vd25Qcm9wZXJ0eXx8UCBpbiB0
        aGlzP0U/RW1iZXIuZGVmaW5lUHJvcGVydHkodGhpcyxQLG51bGwseCk6dGhp
        c1tQXT14OnRoaXMuc2V0VW5rbm93blByb3BlcnR5KFAseCl9fX19Yih0aGlz
        LHUpLHRoaXMuaW5pdC5hcHBseSh0aGlzLGFyZ3VtZW50cyksdS5wcm90bz1s
        LGModGhpcyksaCh0aGlzLCJpbml0Iil9O3JldHVybiBhLnRvU3RyaW5nPWYu
        cHJvdG90eXBlLnRvU3RyaW5nLGEud2lsbFJlb3Blbj1mdW5jdGlvbigpe28m
        JihhLlByb3RvdHlwZU1peGluPWYuY3JlYXRlKGEuUHJvdG90eXBlTWl4aW4p
        KSxvPSExfSxhLl9pbml0TWl4aW5zPWZ1bmN0aW9uKHQpe2U9dH0sYS5faW5p
        dFByb3BlcnRpZXM9ZnVuY3Rpb24oZSl7dD1lfSxhLnByb3RvPWZ1bmN0aW9u
        KCl7dmFyIGU9YS5zdXBlcmNsYXNzO3JldHVybiBlJiZlLnByb3RvKCksb3x8
        KG89ITAsYS5Qcm90b3R5cGVNaXhpbi5hcHBseVBhcnRpYWwoYS5wcm90b3R5
        cGUpLGwoYS5wcm90b3R5cGUpKSx0aGlzLnByb3RvdHlwZX0sYX1mdW5jdGlv
        biB0KGUpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiBlfX12YXIgcj0oRW1i
        ZXIuc2V0LEVtYmVyLmdldCxFbWJlci5jcmVhdGUpLG49RW1iZXIucGxhdGZv
        cm0uZGVmaW5lUHJvcGVydHksaT1FbWJlci5HVUlEX0tFWSxvPUVtYmVyLmd1
        aWRGb3IsYT1FbWJlci5nZW5lcmF0ZUd1aWQscz1FbWJlci5tZXRhLHU9RW1i
        ZXIuTUVUQV9LRVksbD1FbWJlci5yZXdhdGNoLGM9RW1iZXIuZmluaXNoQ2hh
        aW5zLGg9RW1iZXIuc2VuZEV2ZW50LG09RW1iZXIuZGVzdHJveSxwPUVtYmVy
        LnJ1bi5zY2hlZHVsZSxmPUVtYmVyLk1peGluLGQ9Zi5fYXBwbHksYj1mLmZp
        bmlzaFBhcnRpYWwsdj1mLnByb3RvdHlwZS5yZW9wZW4sRT1FbWJlci5FTlYu
        TUFOREFUT1JZX1NFVFRFUixnPUVtYmVyLkVudW1lcmFibGVVdGlscy5pbmRl
        eE9mLHk9e2NvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCxlbnVtZXJhYmxl
        OiExLHZhbHVlOnZvaWQgMH0sXz17Y29uZmlndXJhYmxlOiEwLHdyaXRhYmxl
        OiEwLGVudW1lcmFibGU6ITEsdmFsdWU6bnVsbH0sdz1lKCk7dy50b1N0cmlu
        Zz1mdW5jdGlvbigpe3JldHVybiJFbWJlci5Db3JlT2JqZWN0In0sdy5Qcm90
        b3R5cGVNaXhpbj1mLmNyZWF0ZSh7cmVvcGVuOmZ1bmN0aW9uKCl7cmV0dXJu
        IGQodGhpcyxhcmd1bWVudHMsITApLHRoaXN9LGluaXQ6ZnVuY3Rpb24oKXt9
        LGNvbmNhdGVuYXRlZFByb3BlcnRpZXM6bnVsbCxpc0Rlc3Ryb3llZDohMSxp
        c0Rlc3Ryb3lpbmc6ITEsZGVzdHJveTpmdW5jdGlvbigpe3JldHVybiB0aGlz
        LmlzRGVzdHJveWluZz92b2lkIDA6KHRoaXMuaXNEZXN0cm95aW5nPSEwLHAo
        ImFjdGlvbnMiLHRoaXMsdGhpcy53aWxsRGVzdHJveSkscCgiZGVzdHJveSIs
        dGhpcyx0aGlzLl9zY2hlZHVsZWREZXN0cm95KSx0aGlzKX0sd2lsbERlc3Ry
        b3k6RW1iZXIuSyxfc2NoZWR1bGVkRGVzdHJveTpmdW5jdGlvbigpe3RoaXMu
        aXNEZXN0cm95ZWR8fChtKHRoaXMpLHRoaXMuaXNEZXN0cm95ZWQ9ITApfSxi
        aW5kOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQgaW5zdGFuY2VvZiBFbWJlci5C
        aW5kaW5nfHwodD1FbWJlci5CaW5kaW5nLmZyb20odCkpLHQudG8oZSkuY29u
        bmVjdCh0aGlzKSx0fSx0b1N0cmluZzpmdW5jdGlvbigpe3ZhciBlPSJmdW5j
        dGlvbiI9PXR5cGVvZiB0aGlzLnRvU3RyaW5nRXh0ZW5zaW9uLHI9ZT8iOiIr
        dGhpcy50b1N0cmluZ0V4dGVuc2lvbigpOiIiLG49IjwiK3RoaXMuY29uc3Ry
        dWN0b3IudG9TdHJpbmcoKSsiOiIrbyh0aGlzKStyKyI+IjtyZXR1cm4gdGhp
        cy50b1N0cmluZz10KG4pLG59fSksdy5Qcm90b3R5cGVNaXhpbi5vd25lckNv
        bnN0cnVjdG9yPXcsRW1iZXIuY29uZmlnLm92ZXJyaWRlUHJvdG90eXBlTWl4
        aW4mJkVtYmVyLmNvbmZpZy5vdmVycmlkZVByb3RvdHlwZU1peGluKHcuUHJv
        dG90eXBlTWl4aW4pLHcuX19zdXBlcl9fPW51bGw7dmFyIEM9Zi5jcmVhdGUo
        e0NsYXNzTWl4aW46RW1iZXIucmVxdWlyZWQoKSxQcm90b3R5cGVNaXhpbjpF
        bWJlci5yZXF1aXJlZCgpLGlzQ2xhc3M6ITAsaXNNZXRob2Q6ITEsZXh0ZW5k
        OmZ1bmN0aW9uKCl7dmFyIHQsbj1lKCk7cmV0dXJuIG4uQ2xhc3NNaXhpbj1m
        LmNyZWF0ZSh0aGlzLkNsYXNzTWl4aW4pLG4uUHJvdG90eXBlTWl4aW49Zi5j
        cmVhdGUodGhpcy5Qcm90b3R5cGVNaXhpbiksbi5DbGFzc01peGluLm93bmVy
        Q29uc3RydWN0b3I9bixuLlByb3RvdHlwZU1peGluLm93bmVyQ29uc3RydWN0
        b3I9bix2LmFwcGx5KG4uUHJvdG90eXBlTWl4aW4sYXJndW1lbnRzKSxuLnN1
        cGVyY2xhc3M9dGhpcyxuLl9fc3VwZXJfXz10aGlzLnByb3RvdHlwZSx0PW4u
        cHJvdG90eXBlPXIodGhpcy5wcm90b3R5cGUpLHQuY29uc3RydWN0b3I9bixh
        KHQpLHModCkucHJvdG89dCxuLkNsYXNzTWl4aW4uYXBwbHkobiksbn0sY3Jl
        YXRlV2l0aE1peGluczpmdW5jdGlvbigpe3ZhciBlPXRoaXM7cmV0dXJuIGFy
        Z3VtZW50cy5sZW5ndGg+MCYmdGhpcy5faW5pdE1peGlucyhhcmd1bWVudHMp
        LG5ldyBlfSxjcmVhdGU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3JldHVybiBh
        cmd1bWVudHMubGVuZ3RoPjAmJnRoaXMuX2luaXRQcm9wZXJ0aWVzKGFyZ3Vt
        ZW50cyksbmV3IGV9LHJlb3BlbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLndp
        bGxSZW9wZW4oKSx2LmFwcGx5KHRoaXMuUHJvdG90eXBlTWl4aW4sYXJndW1l
        bnRzKSx0aGlzfSxyZW9wZW5DbGFzczpmdW5jdGlvbigpe3JldHVybiB2LmFw
        cGx5KHRoaXMuQ2xhc3NNaXhpbixhcmd1bWVudHMpLGQodGhpcyxhcmd1bWVu
        dHMsITEpLHRoaXN9LGRldGVjdDpmdW5jdGlvbihlKXtpZigiZnVuY3Rpb24i
        IT10eXBlb2YgZSlyZXR1cm4hMTtmb3IoO2U7KXtpZihlPT09dGhpcylyZXR1
        cm4hMDtlPWUuc3VwZXJjbGFzc31yZXR1cm4hMX0sZGV0ZWN0SW5zdGFuY2U6
        ZnVuY3Rpb24oZSl7cmV0dXJuIGUgaW5zdGFuY2VvZiB0aGlzfSxtZXRhRm9y
        UHJvcGVydHk6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5wcm90bygpW3VdLHI9
        dCYmdC5kZXNjc1tlXTtyZXR1cm4gci5fbWV0YXx8e319LGVhY2hDb21wdXRl
        ZFByb3BlcnR5OmZ1bmN0aW9uKGUsdCl7dmFyIHIsbj10aGlzLnByb3RvKCks
        aT1zKG4pLmRlc2NzLG89e307Zm9yKHZhciBhIGluIGkpcj1pW2FdLHIgaW5z
        dGFuY2VvZiBFbWJlci5Db21wdXRlZFByb3BlcnR5JiZlLmNhbGwodHx8dGhp
        cyxhLHIuX21ldGF8fG8pfX0pO0Mub3duZXJDb25zdHJ1Y3Rvcj13LEVtYmVy
        LmNvbmZpZy5vdmVycmlkZUNsYXNzTWl4aW4mJkVtYmVyLmNvbmZpZy5vdmVy
        cmlkZUNsYXNzTWl4aW4oQyksdy5DbGFzc01peGluPUMsQy5hcHBseSh3KSxF
        bWJlci5Db3JlT2JqZWN0PXd9KCksZnVuY3Rpb24oKXtFbWJlci5PYmplY3Q9
        RW1iZXIuQ29yZU9iamVjdC5leHRlbmQoRW1iZXIuT2JzZXJ2YWJsZSksRW1i
        ZXIuT2JqZWN0LnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIkVtYmVyLk9i
        amVjdCJ9fSgpLGZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0LHIsaSl7dmFyIGE9
        dC5sZW5ndGg7bFt0LmpvaW4oIi4iKV09cjtmb3IodmFyIHMgaW4gcilpZihj
        LmNhbGwocixzKSl7dmFyIHU9cltzXTtpZih0W2FdPXMsdSYmdS50b1N0cmlu
        Zz09PW4pdS50b1N0cmluZz1vKHQuam9pbigiLiIpKSx1W21dPXQuam9pbigi
        LiIpO2Vsc2UgaWYodSYmdS5pc05hbWVzcGFjZSl7aWYoaVtoKHUpXSljb250
        aW51ZTtpW2godSldPSEwLGUodCx1LGkpfX10Lmxlbmd0aD1hfWZ1bmN0aW9u
        IHQoKXt2YXIgZSx0LHI9RW1iZXIuTmFtZXNwYWNlLG49RW1iZXIubG9va3Vw
        O2lmKCFyLlBST0NFU1NFRClmb3IodmFyIGkgaW4gbilpZigicGFyZW50IiE9
        PWkmJiJ0b3AiIT09aSYmImZyYW1lRWxlbWVudCIhPT1pJiYid2Via2l0U3Rv
        cmFnZUluZm8iIT09aSYmISgiZ2xvYmFsU3RvcmFnZSI9PT1pJiZuLlN0b3Jh
        Z2VMaXN0JiZuLmdsb2JhbFN0b3JhZ2UgaW5zdGFuY2VvZiBuLlN0b3JhZ2VM
        aXN0fHxuLmhhc093blByb3BlcnR5JiYhbi5oYXNPd25Qcm9wZXJ0eShpKSkp
        e3RyeXtlPUVtYmVyLmxvb2t1cFtpXSx0PWUmJmUuaXNOYW1lc3BhY2V9Y2F0
        Y2gobyl7Y29udGludWV9dCYmKGVbbV09aSl9fWZ1bmN0aW9uIHIoZSl7dmFy
        IHQ9ZS5zdXBlcmNsYXNzO3JldHVybiB0P3RbbV0/dFttXTpyKHQpOnZvaWQg
        MH1mdW5jdGlvbiBuKCl7RW1iZXIuQk9PVEVEfHx0aGlzW21dfHxpKCk7dmFy
        IGU7aWYodGhpc1ttXSllPXRoaXNbbV07ZWxzZSBpZih0aGlzLl90b1N0cmlu
        ZyllPXRoaXMuX3RvU3RyaW5nO2Vsc2V7dmFyIHQ9cih0aGlzKTtlPXQ/Iihz
        dWJjbGFzcyBvZiAiK3QrIikiOiIodW5rbm93biBtaXhpbikiLHRoaXMudG9T
        dHJpbmc9byhlKX1yZXR1cm4gZX1mdW5jdGlvbiBpKCl7dmFyIHI9IXUuUFJP
        Q0VTU0VELG49RW1iZXIuYW55VW5wcm9jZXNzZWRNaXhpbnM7aWYociYmKHQo
        KSx1LlBST0NFU1NFRD0hMCkscnx8bil7Zm9yKHZhciBpLG89dS5OQU1FU1BB
        Q0VTLGE9MCxzPW8ubGVuZ3RoO3M+YTthKyspaT1vW2FdLGUoW2kudG9TdHJp
        bmcoKV0saSx7fSk7RW1iZXIuYW55VW5wcm9jZXNzZWRNaXhpbnM9ITF9fWZ1
        bmN0aW9uIG8oZSl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGV9fXZhciBh
        PUVtYmVyLmdldCxzPUVtYmVyLkFycmF5UG9seWZpbGxzLmluZGV4T2YsdT1F
        bWJlci5OYW1lc3BhY2U9RW1iZXIuT2JqZWN0LmV4dGVuZCh7aXNOYW1lc3Bh
        Y2U6ITAsaW5pdDpmdW5jdGlvbigpe0VtYmVyLk5hbWVzcGFjZS5OQU1FU1BB
        Q0VTLnB1c2godGhpcyksRW1iZXIuTmFtZXNwYWNlLlBST0NFU1NFRD0hMX0s
        dG9TdHJpbmc6ZnVuY3Rpb24oKXt2YXIgZT1hKHRoaXMsIm5hbWUiKTtyZXR1
        cm4gZT9lOih0KCksdGhpc1tFbWJlci5HVUlEX0tFWSsiX25hbWUiXSl9LG5h
        bWVDbGFzc2VzOmZ1bmN0aW9uKCl7ZShbdGhpcy50b1N0cmluZygpXSx0aGlz
        LHt9KX0sZGVzdHJveTpmdW5jdGlvbigpe3ZhciBlPUVtYmVyLk5hbWVzcGFj
        ZS5OQU1FU1BBQ0VTO0VtYmVyLmxvb2t1cFt0aGlzLnRvU3RyaW5nKCldPXZv
        aWQgMCxlLnNwbGljZShzLmNhbGwoZSx0aGlzKSwxKSx0aGlzLl9zdXBlcigp
        fX0pO3UucmVvcGVuQ2xhc3Moe05BTUVTUEFDRVM6W0VtYmVyXSxOQU1FU1BB
        Q0VTX0JZX0lEOnt9LFBST0NFU1NFRDohMSxwcm9jZXNzQWxsOmksYnlOYW1l
        OmZ1bmN0aW9uKGUpe3JldHVybiBFbWJlci5CT09URUR8fGkoKSxsW2VdfX0p
        O3ZhciBsPXUuTkFNRVNQQUNFU19CWV9JRCxjPXt9Lmhhc093blByb3BlcnR5
        LGg9RW1iZXIuZ3VpZEZvcixtPUVtYmVyLk5BTUVfS0VZPUVtYmVyLkdVSURf
        S0VZKyJfbmFtZSI7RW1iZXIuTWl4aW4ucHJvdG90eXBlLnRvU3RyaW5nPW59
        KCksZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCl7dmFyIHI9dC5zbGljZSg4
        KTtyIGluIHRoaXN8fHUodGhpcyxyKX1mdW5jdGlvbiB0KGUsdCl7dmFyIHI9
        dC5zbGljZSg4KTtyIGluIHRoaXN8fGwodGhpcyxyKX12YXIgcj1FbWJlci5n
        ZXQsbj1FbWJlci5zZXQsaT0oRW1iZXIuU3RyaW5nLmZtdCxFbWJlci5hZGRC
        ZWZvcmVPYnNlcnZlciksbz1FbWJlci5hZGRPYnNlcnZlcixhPUVtYmVyLnJl
        bW92ZUJlZm9yZU9ic2VydmVyLHM9RW1iZXIucmVtb3ZlT2JzZXJ2ZXIsdT1F
        bWJlci5wcm9wZXJ0eVdpbGxDaGFuZ2UsbD1FbWJlci5wcm9wZXJ0eURpZENo
        YW5nZSxjPUVtYmVyLm1ldGEsaD1FbWJlci5kZWZpbmVQcm9wZXJ0eTtFbWJl
        ci5PYmplY3RQcm94eT1FbWJlci5PYmplY3QuZXh0ZW5kKHtjb250ZW50Om51
        bGwsX2NvbnRlbnREaWRDaGFuZ2U6RW1iZXIub2JzZXJ2ZXIoImNvbnRlbnQi
        LGZ1bmN0aW9uKCl7fSksaXNUcnV0aHk6RW1iZXIuY29tcHV0ZWQuYm9vbCgi
        Y29udGVudCIpLF9kZWJ1Z0NvbnRhaW5lcktleTpudWxsLHdpbGxXYXRjaFBy
        b3BlcnR5OmZ1bmN0aW9uKHIpe3ZhciBuPSJjb250ZW50LiIrcjtpKHRoaXMs
        bixudWxsLGUpLG8odGhpcyxuLG51bGwsdCl9LGRpZFVud2F0Y2hQcm9wZXJ0
        eTpmdW5jdGlvbihyKXt2YXIgbj0iY29udGVudC4iK3I7YSh0aGlzLG4sbnVs
        bCxlKSxzKHRoaXMsbixudWxsLHQpfSx1bmtub3duUHJvcGVydHk6ZnVuY3Rp
        b24oZSl7dmFyIHQ9cih0aGlzLCJjb250ZW50Iik7cmV0dXJuIHQ/cih0LGUp
        OnZvaWQgMH0sc2V0VW5rbm93blByb3BlcnR5OmZ1bmN0aW9uKGUsdCl7dmFy
        IGk9Yyh0aGlzKTtpZihpLnByb3RvPT09dGhpcylyZXR1cm4gaCh0aGlzLGUs
        bnVsbCx0KSx0O3ZhciBvPXIodGhpcywiY29udGVudCIpO3JldHVybiBuKG8s
        ZSx0KX19KX0oKSxmdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXtyZXR1cm4gMD09
        PXMubGVuZ3RoP3t9OnMucG9wKCl9ZnVuY3Rpb24gdChlKXtyZXR1cm4gcy5w
        dXNoKGUpLG51bGx9ZnVuY3Rpb24gcihlLHQpe2Z1bmN0aW9uIHIocil7dmFy
        IG89bihyLGUpO3JldHVybiBpP3Q9PT1vOiEhb312YXIgaT0yPT09YXJndW1l
        bnRzLmxlbmd0aDtyZXR1cm4gcn12YXIgbj1FbWJlci5nZXQsaT1FbWJlci5z
        ZXQsbz1BcnJheS5wcm90b3R5cGUuc2xpY2UsYT1FbWJlci5FbnVtZXJhYmxl
        VXRpbHMuaW5kZXhPZixzPVtdO0VtYmVyLkVudW1lcmFibGU9RW1iZXIuTWl4
        aW4uY3JlYXRlKHtuZXh0T2JqZWN0OkVtYmVyLnJlcXVpcmVkKEZ1bmN0aW9u
        KSxmaXJzdE9iamVjdDpFbWJlci5jb21wdXRlZChmdW5jdGlvbigpe2lmKDA9
        PT1uKHRoaXMsImxlbmd0aCIpKXJldHVybiB2b2lkIDA7dmFyIHIsaT1lKCk7
        cmV0dXJuIHI9dGhpcy5uZXh0T2JqZWN0KDAsbnVsbCxpKSx0KGkpLHJ9KS5w
        cm9wZXJ0eSgiW10iKSxsYXN0T2JqZWN0OkVtYmVyLmNvbXB1dGVkKGZ1bmN0
        aW9uKCl7dmFyIHI9bih0aGlzLCJsZW5ndGgiKTtpZigwPT09cilyZXR1cm4g
        dm9pZCAwO3ZhciBpLG89ZSgpLGE9MCxzPW51bGw7ZG8gcz1pLGk9dGhpcy5u
        ZXh0T2JqZWN0KGErKyxzLG8pO3doaWxlKHZvaWQgMCE9PWkpO3JldHVybiB0
        KG8pLHN9KS5wcm9wZXJ0eSgiW10iKSxjb250YWluczpmdW5jdGlvbihlKXty
        ZXR1cm4gdm9pZCAwIT09dGhpcy5maW5kKGZ1bmN0aW9uKHQpe3JldHVybiB0
        PT09ZX0pfSxmb3JFYWNoOmZ1bmN0aW9uKHIsaSl7aWYoImZ1bmN0aW9uIiE9
        dHlwZW9mIHIpdGhyb3cgbmV3IFR5cGVFcnJvcjt2YXIgbz1uKHRoaXMsImxl
        bmd0aCIpLGE9bnVsbCxzPWUoKTt2b2lkIDA9PT1pJiYoaT1udWxsKTtmb3Io
        dmFyIHU9MDtvPnU7dSsrKXt2YXIgbD10aGlzLm5leHRPYmplY3QodSxhLHMp
        O3IuY2FsbChpLGwsdSx0aGlzKSxhPWx9cmV0dXJuIGE9bnVsbCxzPXQocyks
        dGhpc30sZ2V0RWFjaDpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5tYXBCeShl
        KX0sc2V0RWFjaDpmdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLmZvckVhY2go
        ZnVuY3Rpb24ocil7aShyLGUsdCl9KX0sbWFwOmZ1bmN0aW9uKGUsdCl7dmFy
        IHI9RW1iZXIuQSgpO3JldHVybiB0aGlzLmZvckVhY2goZnVuY3Rpb24obixp
        LG8pe3JbaV09ZS5jYWxsKHQsbixpLG8pfSkscn0sbWFwQnk6ZnVuY3Rpb24o
        ZSl7cmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uKHQpe3JldHVybiBuKHQsZSl9
        KX0sbWFwUHJvcGVydHk6RW1iZXIuYWxpYXNNZXRob2QoIm1hcEJ5IiksZmls
        dGVyOmZ1bmN0aW9uKGUsdCl7dmFyIHI9RW1iZXIuQSgpO3JldHVybiB0aGlz
        LmZvckVhY2goZnVuY3Rpb24obixpLG8pe2UuY2FsbCh0LG4saSxvKSYmci5w
        dXNoKG4pfSkscn0scmVqZWN0OmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMu
        ZmlsdGVyKGZ1bmN0aW9uKCl7cmV0dXJuIWUuYXBwbHkodCxhcmd1bWVudHMp
        fSl9LGZpbHRlckJ5OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZmlsdGVyKHIu
        YXBwbHkodGhpcyxhcmd1bWVudHMpKX0sZmlsdGVyUHJvcGVydHk6RW1iZXIu
        YWxpYXNNZXRob2QoImZpbHRlckJ5IikscmVqZWN0Qnk6ZnVuY3Rpb24oZSx0
        KXt2YXIgcj1mdW5jdGlvbihyKXtyZXR1cm4gbihyLGUpPT09dH0saT1mdW5j
        dGlvbih0KXtyZXR1cm4hIW4odCxlKX0sbz0yPT09YXJndW1lbnRzLmxlbmd0
        aD9yOmk7cmV0dXJuIHRoaXMucmVqZWN0KG8pfSxyZWplY3RQcm9wZXJ0eTpF
        bWJlci5hbGlhc01ldGhvZCgicmVqZWN0QnkiKSxmaW5kOmZ1bmN0aW9uKHIs
        aSl7dmFyIG89bih0aGlzLCJsZW5ndGgiKTt2b2lkIDA9PT1pJiYoaT1udWxs
        KTtmb3IodmFyIGEscyx1PW51bGwsbD0hMSxjPWUoKSxoPTA7bz5oJiYhbDto
        KyspYT10aGlzLm5leHRPYmplY3QoaCx1LGMpLChsPXIuY2FsbChpLGEsaCx0
        aGlzKSkmJihzPWEpLHU9YTtyZXR1cm4gYT11PW51bGwsYz10KGMpLHN9LGZp
        bmRCeTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmZpbmQoci5hcHBseSh0aGlz
        LGFyZ3VtZW50cykpfSxmaW5kUHJvcGVydHk6RW1iZXIuYWxpYXNNZXRob2Qo
        ImZpbmRCeSIpLGV2ZXJ5OmZ1bmN0aW9uKGUsdCl7cmV0dXJuIXRoaXMuZmlu
        ZChmdW5jdGlvbihyLG4saSl7cmV0dXJuIWUuY2FsbCh0LHIsbixpKX0pfSxl
        dmVyeUJ5OkVtYmVyLmFsaWFzTWV0aG9kKCJpc0V2ZXJ5IiksZXZlcnlQcm9w
        ZXJ0eTpFbWJlci5hbGlhc01ldGhvZCgiaXNFdmVyeSIpLGlzRXZlcnk6ZnVu
        Y3Rpb24oKXtyZXR1cm4gdGhpcy5ldmVyeShyLmFwcGx5KHRoaXMsYXJndW1l
        bnRzKSl9LGFueTpmdW5jdGlvbihyLGkpe3ZhciBvLGEscz1uKHRoaXMsImxl
        bmd0aCIpLHU9ZSgpLGw9ITEsYz1udWxsO2Zvcih2b2lkIDA9PT1pJiYoaT1u
        dWxsKSxhPTA7cz5hJiYhbDthKyspbz10aGlzLm5leHRPYmplY3QoYSxjLHUp
        LGw9ci5jYWxsKGksbyxhLHRoaXMpLGM9bztyZXR1cm4gbz1jPW51bGwsdT10
        KHUpLGx9LHNvbWU6RW1iZXIuYWxpYXNNZXRob2QoImFueSIpLGlzQW55OmZ1
        bmN0aW9uKCl7cmV0dXJuIHRoaXMuYW55KHIuYXBwbHkodGhpcyxhcmd1bWVu
        dHMpKX0sYW55Qnk6RW1iZXIuYWxpYXNNZXRob2QoImlzQW55Iiksc29tZVBy
        b3BlcnR5OkVtYmVyLmFsaWFzTWV0aG9kKCJpc0FueSIpLHJlZHVjZTpmdW5j
        dGlvbihlLHQscil7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIGUpdGhyb3cgbmV3
        IFR5cGVFcnJvcjt2YXIgbj10O3JldHVybiB0aGlzLmZvckVhY2goZnVuY3Rp
        b24odCxpKXtuPWUobix0LGksdGhpcyxyKX0sdGhpcyksbn0saW52b2tlOmZ1
        bmN0aW9uKGUpe3ZhciB0LHI9RW1iZXIuQSgpO3JldHVybiBhcmd1bWVudHMu
        bGVuZ3RoPjEmJih0PW8uY2FsbChhcmd1bWVudHMsMSkpLHRoaXMuZm9yRWFj
        aChmdW5jdGlvbihuLGkpe3ZhciBvPW4mJm5bZV07ImZ1bmN0aW9uIj09dHlw
        ZW9mIG8mJihyW2ldPXQ/by5hcHBseShuLHQpOm5bZV0oKSl9LHRoaXMpLHJ9
        LHRvQXJyYXk6ZnVuY3Rpb24oKXt2YXIgZT1FbWJlci5BKCk7cmV0dXJuIHRo
        aXMuZm9yRWFjaChmdW5jdGlvbih0LHIpe2Vbcl09dH0pLGV9LGNvbXBhY3Q6
        ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0
        dXJuIG51bGwhPWV9KX0sd2l0aG91dDpmdW5jdGlvbihlKXtpZighdGhpcy5j
        b250YWlucyhlKSlyZXR1cm4gdGhpczt2YXIgdD1FbWJlci5BKCk7cmV0dXJu
        IHRoaXMuZm9yRWFjaChmdW5jdGlvbihyKXtyIT09ZSYmKHRbdC5sZW5ndGhd
        PXIpfSksdH0sdW5pcTpmdW5jdGlvbigpe3ZhciBlPUVtYmVyLkEoKTtyZXR1
        cm4gdGhpcy5mb3JFYWNoKGZ1bmN0aW9uKHQpe2EoZSx0KTwwJiZlLnB1c2go
        dCl9KSxlfSwiW10iOkVtYmVyLmNvbXB1dGVkKGZ1bmN0aW9uKCl7cmV0dXJu
        IHRoaXN9KSxhZGRFbnVtZXJhYmxlT2JzZXJ2ZXI6ZnVuY3Rpb24oZSx0KXt2
        YXIgcj10JiZ0LndpbGxDaGFuZ2V8fCJlbnVtZXJhYmxlV2lsbENoYW5nZSIs
        aT10JiZ0LmRpZENoYW5nZXx8ImVudW1lcmFibGVEaWRDaGFuZ2UiLG89bih0
        aGlzLCJoYXNFbnVtZXJhYmxlT2JzZXJ2ZXJzIik7cmV0dXJuIG98fEVtYmVy
        LnByb3BlcnR5V2lsbENoYW5nZSh0aGlzLCJoYXNFbnVtZXJhYmxlT2JzZXJ2
        ZXJzIiksRW1iZXIuYWRkTGlzdGVuZXIodGhpcywiQGVudW1lcmFibGU6YmVm
        b3JlIixlLHIpLEVtYmVyLmFkZExpc3RlbmVyKHRoaXMsIkBlbnVtZXJhYmxl
        OmNoYW5nZSIsZSxpKSxvfHxFbWJlci5wcm9wZXJ0eURpZENoYW5nZSh0aGlz
        LCJoYXNFbnVtZXJhYmxlT2JzZXJ2ZXJzIiksdGhpc30scmVtb3ZlRW51bWVy
        YWJsZU9ic2VydmVyOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dCYmdC53aWxsQ2hh
        bmdlfHwiZW51bWVyYWJsZVdpbGxDaGFuZ2UiLGk9dCYmdC5kaWRDaGFuZ2V8
        fCJlbnVtZXJhYmxlRGlkQ2hhbmdlIixvPW4odGhpcywiaGFzRW51bWVyYWJs
        ZU9ic2VydmVycyIpO3JldHVybiBvJiZFbWJlci5wcm9wZXJ0eVdpbGxDaGFu
        Z2UodGhpcywiaGFzRW51bWVyYWJsZU9ic2VydmVycyIpLEVtYmVyLnJlbW92
        ZUxpc3RlbmVyKHRoaXMsIkBlbnVtZXJhYmxlOmJlZm9yZSIsZSxyKSxFbWJl
        ci5yZW1vdmVMaXN0ZW5lcih0aGlzLCJAZW51bWVyYWJsZTpjaGFuZ2UiLGUs
        aSksbyYmRW1iZXIucHJvcGVydHlEaWRDaGFuZ2UodGhpcywiaGFzRW51bWVy
        YWJsZU9ic2VydmVycyIpLHRoaXN9LGhhc0VudW1lcmFibGVPYnNlcnZlcnM6
        RW1iZXIuY29tcHV0ZWQoZnVuY3Rpb24oKXtyZXR1cm4gRW1iZXIuaGFzTGlz
        dGVuZXJzKHRoaXMsIkBlbnVtZXJhYmxlOmNoYW5nZSIpfHxFbWJlci5oYXNM
        aXN0ZW5lcnModGhpcywiQGVudW1lcmFibGU6YmVmb3JlIil9KSxlbnVtZXJh
        YmxlQ29udGVudFdpbGxDaGFuZ2U6ZnVuY3Rpb24oZSx0KXt2YXIgcixpLG87
        cmV0dXJuIHI9Im51bWJlciI9PXR5cGVvZiBlP2U6ZT9uKGUsImxlbmd0aCIp
        OmU9LTEsaT0ibnVtYmVyIj09dHlwZW9mIHQ/dDp0P24odCwibGVuZ3RoIik6
        dD0tMSxvPTA+aXx8MD5yfHxpLXIhPT0wLC0xPT09ZSYmKGU9bnVsbCksLTE9
        PT10JiYodD1udWxsKSxFbWJlci5wcm9wZXJ0eVdpbGxDaGFuZ2UodGhpcywi
        W10iKSxvJiZFbWJlci5wcm9wZXJ0eVdpbGxDaGFuZ2UodGhpcywibGVuZ3Ro
        IiksRW1iZXIuc2VuZEV2ZW50KHRoaXMsIkBlbnVtZXJhYmxlOmJlZm9yZSIs
        W3RoaXMsZSx0XSksdGhpc30sZW51bWVyYWJsZUNvbnRlbnREaWRDaGFuZ2U6
        ZnVuY3Rpb24oZSx0KXt2YXIgcixpLG87cmV0dXJuIHI9Im51bWJlciI9PXR5
        cGVvZiBlP2U6ZT9uKGUsImxlbmd0aCIpOmU9LTEsaT0ibnVtYmVyIj09dHlw
        ZW9mIHQ/dDp0P24odCwibGVuZ3RoIik6dD0tMSxvPTA+aXx8MD5yfHxpLXIh
        PT0wLC0xPT09ZSYmKGU9bnVsbCksLTE9PT10JiYodD1udWxsKSxFbWJlci5z
        ZW5kRXZlbnQodGhpcywiQGVudW1lcmFibGU6Y2hhbmdlIixbdGhpcyxlLHRd
        KSxvJiZFbWJlci5wcm9wZXJ0eURpZENoYW5nZSh0aGlzLCJsZW5ndGgiKSxF
        bWJlci5wcm9wZXJ0eURpZENoYW5nZSh0aGlzLCJbXSIpLHRoaXN9LHNvcnRC
        eTpmdW5jdGlvbigpe3ZhciBlPWFyZ3VtZW50cztyZXR1cm4gdGhpcy50b0Fy
        cmF5KCkuc29ydChmdW5jdGlvbih0LHIpe2Zvcih2YXIgaT0wO2k8ZS5sZW5n
        dGg7aSsrKXt2YXIgbz1lW2ldLGE9bih0LG8pLHM9bihyLG8pLHU9RW1iZXIu
        Y29tcGFyZShhLHMpO2lmKHUpcmV0dXJuIHV9cmV0dXJuIDB9KX19KX0oKSxm
        dW5jdGlvbigpe3ZhciBlPUVtYmVyLmdldCx0PShFbWJlci5zZXQsRW1iZXIu
        aXNOb25lKSxyPUVtYmVyLkVudW1lcmFibGVVdGlscy5tYXAsbj1FbWJlci5j
        YWNoZUZvcjtFbWJlci5BcnJheT1FbWJlci5NaXhpbi5jcmVhdGUoRW1iZXIu
        RW51bWVyYWJsZSx7bGVuZ3RoOkVtYmVyLnJlcXVpcmVkKCksb2JqZWN0QXQ6
        ZnVuY3Rpb24odCl7cmV0dXJuIDA+dHx8dD49ZSh0aGlzLCJsZW5ndGgiKT92
        b2lkIDA6ZSh0aGlzLHQpfSxvYmplY3RzQXQ6ZnVuY3Rpb24oZSl7dmFyIHQ9
        dGhpcztyZXR1cm4gcihlLGZ1bmN0aW9uKGUpe3JldHVybiB0Lm9iamVjdEF0
        KGUpfSl9LG5leHRPYmplY3Q6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMub2Jq
        ZWN0QXQoZSl9LCJbXSI6RW1iZXIuY29tcHV0ZWQoZnVuY3Rpb24odCxyKXty
        ZXR1cm4gdm9pZCAwIT09ciYmdGhpcy5yZXBsYWNlKDAsZSh0aGlzLCJsZW5n
        dGgiKSxyKSx0aGlzfSksZmlyc3RPYmplY3Q6RW1iZXIuY29tcHV0ZWQoZnVu
        Y3Rpb24oKXtyZXR1cm4gdGhpcy5vYmplY3RBdCgwKX0pLGxhc3RPYmplY3Q6
        RW1iZXIuY29tcHV0ZWQoZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vYmplY3RB
        dChlKHRoaXMsImxlbmd0aCIpLTEpfSksY29udGFpbnM6ZnVuY3Rpb24oZSl7
        cmV0dXJuIHRoaXMuaW5kZXhPZihlKT49MH0sc2xpY2U6ZnVuY3Rpb24ocixu
        KXt2YXIgaT1FbWJlci5BKCksbz1lKHRoaXMsImxlbmd0aCIpO2Zvcih0KHIp
        JiYocj0wKSwodChuKXx8bj5vKSYmKG49byksMD5yJiYocj1vK3IpLDA+biYm
        KG49bytuKTtuPnI7KWlbaS5sZW5ndGhdPXRoaXMub2JqZWN0QXQocisrKTty
        ZXR1cm4gaX0saW5kZXhPZjpmdW5jdGlvbih0LHIpe3ZhciBuLGk9ZSh0aGlz
        LCJsZW5ndGgiKTtmb3Iodm9pZCAwPT09ciYmKHI9MCksMD5yJiYocis9aSks
        bj1yO2k+bjtuKyspaWYodGhpcy5vYmplY3RBdChuKT09PXQpcmV0dXJuIG47
        cmV0dXJuLTF9LGxhc3RJbmRleE9mOmZ1bmN0aW9uKHQscil7dmFyIG4saT1l
        KHRoaXMsImxlbmd0aCIpO2Zvcigodm9pZCAwPT09cnx8cj49aSkmJihyPWkt
        MSksMD5yJiYocis9aSksbj1yO24+PTA7bi0tKWlmKHRoaXMub2JqZWN0QXQo
        bik9PT10KXJldHVybiBuO3JldHVybi0xfSxhZGRBcnJheU9ic2VydmVyOmZ1
        bmN0aW9uKHQscil7dmFyIG49ciYmci53aWxsQ2hhbmdlfHwiYXJyYXlXaWxs
        Q2hhbmdlIixpPXImJnIuZGlkQ2hhbmdlfHwiYXJyYXlEaWRDaGFuZ2UiLG89
        ZSh0aGlzLCJoYXNBcnJheU9ic2VydmVycyIpO3JldHVybiBvfHxFbWJlci5w
        cm9wZXJ0eVdpbGxDaGFuZ2UodGhpcywiaGFzQXJyYXlPYnNlcnZlcnMiKSxF
        bWJlci5hZGRMaXN0ZW5lcih0aGlzLCJAYXJyYXk6YmVmb3JlIix0LG4pLEVt
        YmVyLmFkZExpc3RlbmVyKHRoaXMsIkBhcnJheTpjaGFuZ2UiLHQsaSksb3x8
        RW1iZXIucHJvcGVydHlEaWRDaGFuZ2UodGhpcywiaGFzQXJyYXlPYnNlcnZl
        cnMiKSx0aGlzfSxyZW1vdmVBcnJheU9ic2VydmVyOmZ1bmN0aW9uKHQscil7
        dmFyIG49ciYmci53aWxsQ2hhbmdlfHwiYXJyYXlXaWxsQ2hhbmdlIixpPXIm
        JnIuZGlkQ2hhbmdlfHwiYXJyYXlEaWRDaGFuZ2UiLG89ZSh0aGlzLCJoYXNB
        cnJheU9ic2VydmVycyIpO3JldHVybiBvJiZFbWJlci5wcm9wZXJ0eVdpbGxD
        aGFuZ2UodGhpcywiaGFzQXJyYXlPYnNlcnZlcnMiKSxFbWJlci5yZW1vdmVM
        aXN0ZW5lcih0aGlzLCJAYXJyYXk6YmVmb3JlIix0LG4pLEVtYmVyLnJlbW92
        ZUxpc3RlbmVyKHRoaXMsIkBhcnJheTpjaGFuZ2UiLHQsaSksbyYmRW1iZXIu
        cHJvcGVydHlEaWRDaGFuZ2UodGhpcywiaGFzQXJyYXlPYnNlcnZlcnMiKSx0
        aGlzfSxoYXNBcnJheU9ic2VydmVyczpFbWJlci5jb21wdXRlZChmdW5jdGlv
        bigpe3JldHVybiBFbWJlci5oYXNMaXN0ZW5lcnModGhpcywiQGFycmF5OmNo
        YW5nZSIpfHxFbWJlci5oYXNMaXN0ZW5lcnModGhpcywiQGFycmF5OmJlZm9y
        ZSIpfSksYXJyYXlDb250ZW50V2lsbENoYW5nZTpmdW5jdGlvbih0LHIsbil7
        dm9pZCAwPT09dD8odD0wLHI9bj0tMSk6KHZvaWQgMD09PXImJihyPS0xKSx2
        b2lkIDA9PT1uJiYobj0tMSkpLEVtYmVyLmlzV2F0Y2hpbmcodGhpcywiQGVh
        Y2giKSYmZSh0aGlzLCJAZWFjaCIpLEVtYmVyLnNlbmRFdmVudCh0aGlzLCJA
        YXJyYXk6YmVmb3JlIixbdGhpcyx0LHIsbl0pO3ZhciBpLG87aWYodD49MCYm
        cj49MCYmZSh0aGlzLCJoYXNFbnVtZXJhYmxlT2JzZXJ2ZXJzIikpe2k9W10s
        bz10K3I7Zm9yKHZhciBhPXQ7bz5hO2ErKylpLnB1c2godGhpcy5vYmplY3RB
        dChhKSl9ZWxzZSBpPXI7cmV0dXJuIHRoaXMuZW51bWVyYWJsZUNvbnRlbnRX
        aWxsQ2hhbmdlKGksbiksdGhpc30sYXJyYXlDb250ZW50RGlkQ2hhbmdlOmZ1
        bmN0aW9uKHQscixpKXt2b2lkIDA9PT10Pyh0PTAscj1pPS0xKToodm9pZCAw
        PT09ciYmKHI9LTEpLHZvaWQgMD09PWkmJihpPS0xKSk7dmFyIG8sYTtpZih0
        Pj0wJiZpPj0wJiZlKHRoaXMsImhhc0VudW1lcmFibGVPYnNlcnZlcnMiKSl7
        bz1bXSxhPXQraTtmb3IodmFyIHM9dDthPnM7cysrKW8ucHVzaCh0aGlzLm9i
        amVjdEF0KHMpKX1lbHNlIG89aTt0aGlzLmVudW1lcmFibGVDb250ZW50RGlk
        Q2hhbmdlKHIsbyksRW1iZXIuc2VuZEV2ZW50KHRoaXMsIkBhcnJheTpjaGFu
        Z2UiLFt0aGlzLHQscixpXSk7dmFyIHU9ZSh0aGlzLCJsZW5ndGgiKSxsPW4o
        dGhpcywiZmlyc3RPYmplY3QiKSxjPW4odGhpcywibGFzdE9iamVjdCIpO3Jl
        dHVybiB0aGlzLm9iamVjdEF0KDApIT09bCYmKEVtYmVyLnByb3BlcnR5V2ls
        bENoYW5nZSh0aGlzLCJmaXJzdE9iamVjdCIpLEVtYmVyLnByb3BlcnR5RGlk
        Q2hhbmdlKHRoaXMsImZpcnN0T2JqZWN0IikpLHRoaXMub2JqZWN0QXQodS0x
        KSE9PWMmJihFbWJlci5wcm9wZXJ0eVdpbGxDaGFuZ2UodGhpcywibGFzdE9i
        amVjdCIpLEVtYmVyLnByb3BlcnR5RGlkQ2hhbmdlKHRoaXMsImxhc3RPYmpl
        Y3QiKSksdGhpc30sIkBlYWNoIjpFbWJlci5jb21wdXRlZChmdW5jdGlvbigp
        e3JldHVybiB0aGlzLl9fZWFjaHx8KHRoaXMuX19lYWNoPW5ldyBFbWJlci5F
        YWNoUHJveHkodGhpcykpLHRoaXMuX19lYWNofSl9KX0oKSxmdW5jdGlvbigp
        e2Z1bmN0aW9uIGUoZSx0KXtyZXR1cm4iQHRoaXMiPT09dD9lOm0oZSx0KX1m
        dW5jdGlvbiB0KGUsdCxyKXt0aGlzLmNhbGxiYWNrcz1lLHRoaXMuY3A9dCx0
        aGlzLmluc3RhbmNlTWV0YT1yLHRoaXMuZGVwZW5kZW50S2V5c0J5R3VpZD17
        fSx0aGlzLnRyYWNrZWRBcnJheXNCeUd1aWQ9e30sdGhpcy5zdXNwZW5kZWQ9
        ITEsdGhpcy5jaGFuZ2VkSXRlbXM9e319ZnVuY3Rpb24gcihlLHQscil7dGhp
        cy5kZXBlbmRlbnRBcnJheT1lLHRoaXMuaW5kZXg9dCx0aGlzLml0ZW09ZS5v
        YmplY3RBdCh0KSx0aGlzLnRyYWNrZWRBcnJheT1yLHRoaXMuYmVmb3JlT2Jz
        ZXJ2ZXI9bnVsbCx0aGlzLm9ic2VydmVyPW51bGwsdGhpcy5kZXN0cm95ZWQ9
        ITF9ZnVuY3Rpb24gbihlLHQscil7cmV0dXJuIDA+ZT9NYXRoLm1heCgwLHQr
        ZSk6dD5lP2U6TWF0aC5taW4odC1yLGUpfWZ1bmN0aW9uIGkoZSx0LHIpe3Jl
        dHVybiBNYXRoLm1pbihyLHQtZSl9ZnVuY3Rpb24gbyhlLHQscixuLGksbyl7
        dmFyIGE9e2FycmF5Q2hhbmdlZDplLGluZGV4OnIsaXRlbTp0LHByb3BlcnR5
        TmFtZTpuLHByb3BlcnR5Oml9O3JldHVybiBvJiYoYS5wcmV2aW91c1ZhbHVl
        cz1vKSxhfWZ1bmN0aW9uIGEoZSx0LHIsbixpKXtPKGUsZnVuY3Rpb24oYSxz
        KXtpLnNldFZhbHVlKHQuYWRkZWRJdGVtLmNhbGwodGhpcyxpLmdldFZhbHVl
        KCksYSxvKGUsYSxzLG4sciksaS5zdWdhck1ldGEpKX0sdGhpcyl9ZnVuY3Rp
        b24gcyhlLHQpe3t2YXIgcjtlLl9jYWxsYmFja3MoKX1lLl9oYXNJbnN0YW5j
        ZU1ldGEodGhpcyx0KT8ocj1lLl9pbnN0YW5jZU1ldGEodGhpcyx0KSxyLnNl
        dFZhbHVlKGUucmVzZXRWYWx1ZShyLmdldFZhbHVlKCkpKSk6cj1lLl9pbnN0
        YW5jZU1ldGEodGhpcyx0KSxlLm9wdGlvbnMuaW5pdGlhbGl6ZSYmZS5vcHRp
        b25zLmluaXRpYWxpemUuY2FsbCh0aGlzLHIuZ2V0VmFsdWUoKSx7cHJvcGVy
        dHk6ZSxwcm9wZXJ0eU5hbWU6dH0sci5zdWdhck1ldGEpfWZ1bmN0aW9uIHUo
        dCxyKXtpZih4LnRlc3QocikpcmV0dXJuITE7dmFyIG49ZSh0LHIpO3JldHVy
        biBFbWJlci5BcnJheS5kZXRlY3Qobil9ZnVuY3Rpb24gbChlLHQscil7dGhp
        cy5jb250ZXh0PWUsdGhpcy5wcm9wZXJ0eU5hbWU9dCx0aGlzLmNhY2hlPWYo
        ZSkuY2FjaGUsdGhpcy5kZXBlbmRlbnRBcnJheXM9e30sdGhpcy5zdWdhck1l
        dGE9e30sdGhpcy5pbml0aWFsVmFsdWU9cn1mdW5jdGlvbiBjKHQpe3ZhciBy
        PXRoaXM7dGhpcy5vcHRpb25zPXQsdGhpcy5faW5zdGFuY2VNZXRhcz17fSx0
        aGlzLl9kZXBlbmRlbnRLZXlzPW51bGwsdGhpcy5faXRlbVByb3BlcnR5S2V5
        cz17fSx0aGlzLl9wcmV2aW91c0l0ZW1Qcm9wZXJ0eUtleXM9e30sdGhpcy5y
        ZWFkT25seSgpLHRoaXMuY2FjaGVhYmxlKCksdGhpcy5yZWNvbXB1dGVPbmNl
        PWZ1bmN0aW9uKGUpe0VtYmVyLnJ1bi5vbmNlKHRoaXMsbixlKX07dmFyIG49
        ZnVuY3Rpb24odCl7dmFyIG49KHIuX2RlcGVuZGVudEtleXMsci5faW5zdGFu
        Y2VNZXRhKHRoaXMsdCkpLGk9ci5fY2FsbGJhY2tzKCk7cy5jYWxsKHRoaXMs
        cix0KSxuLmRlcGVuZGVudEFycmF5c09ic2VydmVyLnN1c3BlbmRBcnJheU9i
        c2VydmVycyhmdW5jdGlvbigpe08oci5fZGVwZW5kZW50S2V5cyxmdW5jdGlv
        bih0KXtpZih1KHRoaXMsdCkpe3ZhciBpPWUodGhpcyx0KSxvPW4uZGVwZW5k
        ZW50QXJyYXlzW3RdO2k9PT1vP3IuX3ByZXZpb3VzSXRlbVByb3BlcnR5S2V5
        c1t0XSYmKGRlbGV0ZSByLl9wcmV2aW91c0l0ZW1Qcm9wZXJ0eUtleXNbdF0s
        bi5kZXBlbmRlbnRBcnJheXNPYnNlcnZlci5zZXR1cFByb3BlcnR5T2JzZXJ2
        ZXJzKHQsci5faXRlbVByb3BlcnR5S2V5c1t0XSkpOihuLmRlcGVuZGVudEFy
        cmF5c1t0XT1pLG8mJm4uZGVwZW5kZW50QXJyYXlzT2JzZXJ2ZXIudGVhcmRv
        d25PYnNlcnZlcnMobyx0KSxpJiZuLmRlcGVuZGVudEFycmF5c09ic2VydmVy
        LnNldHVwT2JzZXJ2ZXJzKGksdCkpfX0sdGhpcyl9LHRoaXMpLE8oci5fZGVw
        ZW5kZW50S2V5cyxmdW5jdGlvbihvKXtpZih1KHRoaXMsbykpe3ZhciBzPWUo
        dGhpcyxvKTtzJiZhLmNhbGwodGhpcyxzLGkscix0LG4pfX0sdGhpcyl9O3Ro
        aXMuZnVuYz1mdW5jdGlvbihlKXtyZXR1cm4gbi5jYWxsKHRoaXMsZSksci5f
        aW5zdGFuY2VNZXRhKHRoaXMsZSkuZ2V0VmFsdWUoKX19ZnVuY3Rpb24gaChl
        KXtyZXR1cm4gZX12YXIgbT1FbWJlci5nZXQscD0oRW1iZXIuc2V0LEVtYmVy
        Lmd1aWRGb3IpLGY9RW1iZXIubWV0YSxkPUVtYmVyLnByb3BlcnR5V2lsbENo
        YW5nZSxiPUVtYmVyLnByb3BlcnR5RGlkQ2hhbmdlLHY9RW1iZXIuYWRkQmVm
        b3JlT2JzZXJ2ZXIsRT1FbWJlci5yZW1vdmVCZWZvcmVPYnNlcnZlcixnPUVt
        YmVyLmFkZE9ic2VydmVyLHk9RW1iZXIucmVtb3ZlT2JzZXJ2ZXIsXz1FbWJl
        ci5Db21wdXRlZFByb3BlcnR5LHc9W10uc2xpY2UsQz1FbWJlci5jcmVhdGUs
        Tz1FbWJlci5FbnVtZXJhYmxlVXRpbHMuZm9yRWFjaCxBPS9eKC4qKVwuQGVh
        Y2hcLiguKikvLFA9LyguKlwuQGVhY2gpezIsfS8seD0vXC5cW1xdJC8sVD1F
        bWJlci5leHBhbmRQcm9wZXJ0aWVzO3QucHJvdG90eXBlPXtzZXRWYWx1ZTpm
        dW5jdGlvbihlKXt0aGlzLmluc3RhbmNlTWV0YS5zZXRWYWx1ZShlLCEwKX0s
        Z2V0VmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbnN0YW5jZU1ldGEu
        Z2V0VmFsdWUoKX0sc2V0dXBPYnNlcnZlcnM6ZnVuY3Rpb24oZSx0KXt0aGlz
        LmRlcGVuZGVudEtleXNCeUd1aWRbcChlKV09dCxlLmFkZEFycmF5T2JzZXJ2
        ZXIodGhpcyx7d2lsbENoYW5nZToiZGVwZW5kZW50QXJyYXlXaWxsQ2hhbmdl
        IixkaWRDaGFuZ2U6ImRlcGVuZGVudEFycmF5RGlkQ2hhbmdlIn0pLHRoaXMu
        Y3AuX2l0ZW1Qcm9wZXJ0eUtleXNbdF0mJnRoaXMuc2V0dXBQcm9wZXJ0eU9i
        c2VydmVycyh0LHRoaXMuY3AuX2l0ZW1Qcm9wZXJ0eUtleXNbdF0pfSx0ZWFy
        ZG93bk9ic2VydmVyczpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXMuY3AuX2l0
        ZW1Qcm9wZXJ0eUtleXNbdF18fFtdO2RlbGV0ZSB0aGlzLmRlcGVuZGVudEtl
        eXNCeUd1aWRbcChlKV0sdGhpcy50ZWFyZG93blByb3BlcnR5T2JzZXJ2ZXJz
        KHQsciksZS5yZW1vdmVBcnJheU9ic2VydmVyKHRoaXMse3dpbGxDaGFuZ2U6
        ImRlcGVuZGVudEFycmF5V2lsbENoYW5nZSIsZGlkQ2hhbmdlOiJkZXBlbmRl
        bnRBcnJheURpZENoYW5nZSJ9KX0sc3VzcGVuZEFycmF5T2JzZXJ2ZXJzOmZ1
        bmN0aW9uKGUsdCl7dmFyIHI9dGhpcy5zdXNwZW5kZWQ7dGhpcy5zdXNwZW5k
        ZWQ9ITAsZS5jYWxsKHQpLHRoaXMuc3VzcGVuZGVkPXJ9LHNldHVwUHJvcGVy
        dHlPYnNlcnZlcnM6ZnVuY3Rpb24odCxyKXt2YXIgbj1lKHRoaXMuaW5zdGFu
        Y2VNZXRhLmNvbnRleHQsdCksaT1lKG4sImxlbmd0aCIpLG89bmV3IEFycmF5
        KGkpO3RoaXMucmVzZXRUcmFuc2Zvcm1hdGlvbnModCxvKSxPKG4sZnVuY3Rp
        b24oZSxpKXt2YXIgYT10aGlzLmNyZWF0ZVByb3BlcnR5T2JzZXJ2ZXJDb250
        ZXh0KG4saSx0aGlzLnRyYWNrZWRBcnJheXNCeUd1aWRbdF0pO29baV09YSxP
        KHIsZnVuY3Rpb24odCl7dihlLHQsdGhpcyxhLmJlZm9yZU9ic2VydmVyKSxn
        KGUsdCx0aGlzLGEub2JzZXJ2ZXIpfSx0aGlzKX0sdGhpcyl9LHRlYXJkb3du
        UHJvcGVydHlPYnNlcnZlcnM6ZnVuY3Rpb24oZSx0KXt2YXIgcixuLGksbz10
        aGlzLGE9dGhpcy50cmFja2VkQXJyYXlzQnlHdWlkW2VdO2EmJmEuYXBwbHko
        ZnVuY3Rpb24oZSxhLHMpe3MhPT1FbWJlci5UcmFja2VkQXJyYXkuREVMRVRF
        JiZPKGUsZnVuY3Rpb24oZSl7ZS5kZXN0cm95ZWQ9ITAscj1lLmJlZm9yZU9i
        c2VydmVyLG49ZS5vYnNlcnZlcixpPWUuaXRlbSxPKHQsZnVuY3Rpb24oZSl7
        RShpLGUsbyxyKSx5KGksZSxvLG4pfSl9KX0pfSxjcmVhdGVQcm9wZXJ0eU9i
        c2VydmVyQ29udGV4dDpmdW5jdGlvbihlLHQsbil7dmFyIGk9bmV3IHIoZSx0
        LG4pO3JldHVybiB0aGlzLmNyZWF0ZVByb3BlcnR5T2JzZXJ2ZXIoaSksaX0s
        Y3JlYXRlUHJvcGVydHlPYnNlcnZlcjpmdW5jdGlvbihlKXt2YXIgdD10aGlz
        O2UuYmVmb3JlT2JzZXJ2ZXI9ZnVuY3Rpb24ocixuKXtyZXR1cm4gdC5pdGVt
        UHJvcGVydHlXaWxsQ2hhbmdlKHIsbixlLmRlcGVuZGVudEFycmF5LGUpfSxl
        Lm9ic2VydmVyPWZ1bmN0aW9uKHIsbil7cmV0dXJuIHQuaXRlbVByb3BlcnR5
        RGlkQ2hhbmdlKHIsbixlLmRlcGVuZGVudEFycmF5LGUpfX0scmVzZXRUcmFu
        c2Zvcm1hdGlvbnM6ZnVuY3Rpb24oZSx0KXt0aGlzLnRyYWNrZWRBcnJheXNC
        eUd1aWRbZV09bmV3IEVtYmVyLlRyYWNrZWRBcnJheSh0KX0sdHJhY2tBZGQ6
        ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXRoaXMudHJhY2tlZEFycmF5c0J5R3Vp
        ZFtlXTtuJiZuLmFkZEl0ZW1zKHQscil9LHRyYWNrUmVtb3ZlOmZ1bmN0aW9u
        KGUsdCxyKXt2YXIgbj10aGlzLnRyYWNrZWRBcnJheXNCeUd1aWRbZV07cmV0
        dXJuIG4/bi5yZW1vdmVJdGVtcyh0LHIpOltdfSx1cGRhdGVJbmRleGVzOmZ1
        bmN0aW9uKHQscil7dmFyIG49ZShyLCJsZW5ndGgiKTt0LmFwcGx5KGZ1bmN0
        aW9uKGUsdCxyKXtyIT09RW1iZXIuVHJhY2tlZEFycmF5LkRFTEVURSYmKHIh
        PT1FbWJlci5UcmFja2VkQXJyYXkuUkVUQUlOfHxlLmxlbmd0aCE9PW58fDAh
        PT10KSYmTyhlLGZ1bmN0aW9uKGUscil7ZS5pbmRleD1yK3R9KX0pfSxkZXBl
        bmRlbnRBcnJheVdpbGxDaGFuZ2U6ZnVuY3Rpb24odCxyLGEpe2Z1bmN0aW9u
        IHMoZSl7bVtoXS5kZXN0cm95ZWQ9ITAsRShsLGUsdGhpcyxtW2hdLmJlZm9y
        ZU9ic2VydmVyKSx5KGwsZSx0aGlzLG1baF0ub2JzZXJ2ZXIpfWlmKCF0aGlz
        LnN1c3BlbmRlZCl7dmFyIHUsbCxjLGgsbSxmPXRoaXMuY2FsbGJhY2tzLnJl
        bW92ZWRJdGVtLGQ9cCh0KSxiPXRoaXMuZGVwZW5kZW50S2V5c0J5R3VpZFtk
        XSx2PXRoaXMuY3AuX2l0ZW1Qcm9wZXJ0eUtleXNbYl18fFtdLGc9ZSh0LCJs
        ZW5ndGgiKSxfPW4ocixnLDApLHc9aShfLGcsYSk7Zm9yKG09dGhpcy50cmFj
        a1JlbW92ZShiLF8sdyksaD13LTE7aD49MCYmKGM9XytoLCEoYz49ZykpOy0t
        aClsPXQub2JqZWN0QXQoYyksTyh2LHMsdGhpcyksdT1vKHQsbCxjLHRoaXMu
        aW5zdGFuY2VNZXRhLnByb3BlcnR5TmFtZSx0aGlzLmNwKSx0aGlzLnNldFZh
        bHVlKGYuY2FsbCh0aGlzLmluc3RhbmNlTWV0YS5jb250ZXh0LHRoaXMuZ2V0
        VmFsdWUoKSxsLHUsdGhpcy5pbnN0YW5jZU1ldGEuc3VnYXJNZXRhKSl9fSxk
        ZXBlbmRlbnRBcnJheURpZENoYW5nZTpmdW5jdGlvbih0LHIsaSxhKXtpZigh
        dGhpcy5zdXNwZW5kZWQpe3ZhciBzLHUsbD10aGlzLmNhbGxiYWNrcy5hZGRl
        ZEl0ZW0sYz1wKHQpLGg9dGhpcy5kZXBlbmRlbnRLZXlzQnlHdWlkW2NdLG09
        bmV3IEFycmF5KGEpLGY9dGhpcy5jcC5faXRlbVByb3BlcnR5S2V5c1toXSxk
        PWUodCwibGVuZ3RoIiksYj1uKHIsZCxhKTtPKHQuc2xpY2UoYixiK2EpLGZ1
        bmN0aW9uKGUscil7ZiYmKHU9bVtyXT10aGlzLmNyZWF0ZVByb3BlcnR5T2Jz
        ZXJ2ZXJDb250ZXh0KHQsYityLHRoaXMudHJhY2tlZEFycmF5c0J5R3VpZFto
        XSksTyhmLGZ1bmN0aW9uKHQpe3YoZSx0LHRoaXMsdS5iZWZvcmVPYnNlcnZl
        ciksZyhlLHQsdGhpcyx1Lm9ic2VydmVyKX0sdGhpcykpLHM9byh0LGUsYity
        LHRoaXMuaW5zdGFuY2VNZXRhLnByb3BlcnR5TmFtZSx0aGlzLmNwKSx0aGlz
        LnNldFZhbHVlKGwuY2FsbCh0aGlzLmluc3RhbmNlTWV0YS5jb250ZXh0LHRo
        aXMuZ2V0VmFsdWUoKSxlLHMsdGhpcy5pbnN0YW5jZU1ldGEuc3VnYXJNZXRh
        KSl9LHRoaXMpLHRoaXMudHJhY2tBZGQoaCxiLG0pfX0saXRlbVByb3BlcnR5
        V2lsbENoYW5nZTpmdW5jdGlvbih0LHIsbixpKXt2YXIgbz1wKHQpO3RoaXMu
        Y2hhbmdlZEl0ZW1zW29dfHwodGhpcy5jaGFuZ2VkSXRlbXNbb109e2FycmF5
        Om4sb2JzZXJ2ZXJDb250ZXh0Omksb2JqOnQscHJldmlvdXNWYWx1ZXM6e319
        KSx0aGlzLmNoYW5nZWRJdGVtc1tvXS5wcmV2aW91c1ZhbHVlc1tyXT1lKHQs
        cil9LGl0ZW1Qcm9wZXJ0eURpZENoYW5nZTpmdW5jdGlvbigpe3RoaXMuZmx1
        c2hDaGFuZ2VzKCl9LGZsdXNoQ2hhbmdlczpmdW5jdGlvbigpe3ZhciBlLHQs
        cixuPXRoaXMuY2hhbmdlZEl0ZW1zO2ZvcihlIGluIG4pdD1uW2VdLHQub2Jz
        ZXJ2ZXJDb250ZXh0LmRlc3Ryb3llZHx8KHRoaXMudXBkYXRlSW5kZXhlcyh0
        Lm9ic2VydmVyQ29udGV4dC50cmFja2VkQXJyYXksdC5vYnNlcnZlckNvbnRl
        eHQuZGVwZW5kZW50QXJyYXkpLHI9byh0LmFycmF5LHQub2JqLHQub2JzZXJ2
        ZXJDb250ZXh0LmluZGV4LHRoaXMuaW5zdGFuY2VNZXRhLnByb3BlcnR5TmFt
        ZSx0aGlzLmNwLHQucHJldmlvdXNWYWx1ZXMpLHRoaXMuc2V0VmFsdWUodGhp
        cy5jYWxsYmFja3MucmVtb3ZlZEl0ZW0uY2FsbCh0aGlzLmluc3RhbmNlTWV0
        YS5jb250ZXh0LHRoaXMuZ2V0VmFsdWUoKSx0Lm9iaixyLHRoaXMuaW5zdGFu
        Y2VNZXRhLnN1Z2FyTWV0YSkpLHRoaXMuc2V0VmFsdWUodGhpcy5jYWxsYmFj
        a3MuYWRkZWRJdGVtLmNhbGwodGhpcy5pbnN0YW5jZU1ldGEuY29udGV4dCx0
        aGlzLmdldFZhbHVlKCksdC5vYmoscix0aGlzLmluc3RhbmNlTWV0YS5zdWdh
        ck1ldGEpKSk7dGhpcy5jaGFuZ2VkSXRlbXM9e319fSxsLnByb3RvdHlwZT17
        Z2V0VmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wcm9wZXJ0eU5hbWUg
        aW4gdGhpcy5jYWNoZT90aGlzLmNhY2hlW3RoaXMucHJvcGVydHlOYW1lXTp0
        aGlzLmluaXRpYWxWYWx1ZX0sc2V0VmFsdWU6ZnVuY3Rpb24oZSx0KXtlIT09
        dGhpcy5jYWNoZVt0aGlzLnByb3BlcnR5TmFtZV0mJih0JiZkKHRoaXMuY29u
        dGV4dCx0aGlzLnByb3BlcnR5TmFtZSksdm9pZCAwPT09ZT9kZWxldGUgdGhp
        cy5jYWNoZVt0aGlzLnByb3BlcnR5TmFtZV06dGhpcy5jYWNoZVt0aGlzLnBy
        b3BlcnR5TmFtZV09ZSx0JiZiKHRoaXMuY29udGV4dCx0aGlzLnByb3BlcnR5
        TmFtZSkpfX0sRW1iZXIuUmVkdWNlQ29tcHV0ZWRQcm9wZXJ0eT1jLGMucHJv
        dG90eXBlPUMoXy5wcm90b3R5cGUpLGMucHJvdG90eXBlLl9jYWxsYmFja3M9
        ZnVuY3Rpb24oKXtpZighdGhpcy5jYWxsYmFja3Mpe3ZhciBlPXRoaXMub3B0
        aW9uczt0aGlzLmNhbGxiYWNrcz17cmVtb3ZlZEl0ZW06ZS5yZW1vdmVkSXRl
        bXx8aCxhZGRlZEl0ZW06ZS5hZGRlZEl0ZW18fGh9fXJldHVybiB0aGlzLmNh
        bGxiYWNrc30sYy5wcm90b3R5cGUuX2hhc0luc3RhbmNlTWV0YT1mdW5jdGlv
        bihlLHQpe3ZhciByPXAoZSksbj1yKyI6Iit0O3JldHVybiEhdGhpcy5faW5z
        dGFuY2VNZXRhc1tuXX0sYy5wcm90b3R5cGUuX2luc3RhbmNlTWV0YT1mdW5j
        dGlvbihlLHIpe3ZhciBuPXAoZSksaT1uKyI6IityLG89dGhpcy5faW5zdGFu
        Y2VNZXRhc1tpXTtyZXR1cm4gb3x8KG89dGhpcy5faW5zdGFuY2VNZXRhc1tp
        XT1uZXcgbChlLHIsdGhpcy5pbml0aWFsVmFsdWUoKSksby5kZXBlbmRlbnRB
        cnJheXNPYnNlcnZlcj1uZXcgdCh0aGlzLl9jYWxsYmFja3MoKSx0aGlzLG8s
        ZSxyLG8uc3VnYXJNZXRhKSksb30sYy5wcm90b3R5cGUuaW5pdGlhbFZhbHVl
        PWZ1bmN0aW9uKCl7cmV0dXJuImZ1bmN0aW9uIj09dHlwZW9mIHRoaXMub3B0
        aW9ucy5pbml0aWFsVmFsdWU/dGhpcy5vcHRpb25zLmluaXRpYWxWYWx1ZSgp
        OnRoaXMub3B0aW9ucy5pbml0aWFsVmFsdWV9LGMucHJvdG90eXBlLnJlc2V0
        VmFsdWU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbml0aWFsVmFsdWUoKX0s
        Yy5wcm90b3R5cGUuaXRlbVByb3BlcnR5S2V5PWZ1bmN0aW9uKGUsdCl7dGhp
        cy5faXRlbVByb3BlcnR5S2V5c1tlXT10aGlzLl9pdGVtUHJvcGVydHlLZXlz
        W2VdfHxbXSx0aGlzLl9pdGVtUHJvcGVydHlLZXlzW2VdLnB1c2godCl9LGMu
        cHJvdG90eXBlLmNsZWFySXRlbVByb3BlcnR5S2V5cz1mdW5jdGlvbihlKXt0
        aGlzLl9pdGVtUHJvcGVydHlLZXlzW2VdJiYodGhpcy5fcHJldmlvdXNJdGVt
        UHJvcGVydHlLZXlzW2VdPXRoaXMuX2l0ZW1Qcm9wZXJ0eUtleXNbZV0sdGhp
        cy5faXRlbVByb3BlcnR5S2V5c1tlXT1bXSl9LGMucHJvdG90eXBlLnByb3Bl
        cnR5PWZ1bmN0aW9uKCl7dmFyIGUsdCxyPXRoaXMsbj13LmNhbGwoYXJndW1l
        bnRzKSxpPW5ldyBFbWJlci5TZXQ7cmV0dXJuIE8obixmdW5jdGlvbihuKXtp
        ZihQLnRlc3QobikpdGhyb3cgbmV3IEVtYmVyLkVycm9yKCJOZXN0ZWQgQGVh
        Y2ggcHJvcGVydGllcyBub3Qgc3VwcG9ydGVkOiAiK24pO2lmKGU9QS5leGVj
        KG4pKXt0PWVbMV07dmFyIG89ZVsyXSxhPWZ1bmN0aW9uKGUpe3IuaXRlbVBy
        b3BlcnR5S2V5KHQsZSl9O1QobyxhKSxpLmFkZCh0KX1lbHNlIGkuYWRkKG4p
        fSksXy5wcm90b3R5cGUucHJvcGVydHkuYXBwbHkodGhpcyxpLnRvQXJyYXko
        KSl9LEVtYmVyLnJlZHVjZUNvbXB1dGVkPWZ1bmN0aW9uKGUpe3ZhciB0O2lm
        KGFyZ3VtZW50cy5sZW5ndGg+MSYmKHQ9dy5jYWxsKGFyZ3VtZW50cywwLC0x
        KSxlPXcuY2FsbChhcmd1bWVudHMsLTEpWzBdKSwib2JqZWN0IiE9dHlwZW9m
        IGUpdGhyb3cgbmV3IEVtYmVyLkVycm9yKCJSZWR1Y2UgQ29tcHV0ZWQgUHJv
        cGVydHkgZGVjbGFyZWQgd2l0aG91dCBhbiBvcHRpb25zIGhhc2giKTtpZigh
        KCJpbml0aWFsVmFsdWUiaW4gZSkpdGhyb3cgbmV3IEVtYmVyLkVycm9yKCJS
        ZWR1Y2UgQ29tcHV0ZWQgUHJvcGVydHkgZGVjbGFyZWQgd2l0aG91dCBhbiBp
        bml0aWFsIHZhbHVlIik7dmFyIHI9bmV3IGMoZSk7cmV0dXJuIHQmJnIucHJv
        cGVydHkuYXBwbHkocix0KSxyfX0oKSxmdW5jdGlvbigpe2Z1bmN0aW9uIGUo
        KXt2YXIgZT10aGlzO3JldHVybiB0LmFwcGx5KHRoaXMsYXJndW1lbnRzKSx0
        aGlzLmZ1bmM9ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKHIpe3JldHVy
        biBlLl9oYXNJbnN0YW5jZU1ldGEodGhpcyxyKXx8aShlLl9kZXBlbmRlbnRL
        ZXlzLGZ1bmN0aW9uKHQpe0VtYmVyLmFkZE9ic2VydmVyKHRoaXMsdCxmdW5j
        dGlvbigpe2UucmVjb21wdXRlT25jZS5jYWxsKHRoaXMscikKfSl9LHRoaXMp
        LHQuYXBwbHkodGhpcyxhcmd1bWVudHMpfX0odGhpcy5mdW5jKSx0aGlzfXZh
        ciB0PUVtYmVyLlJlZHVjZUNvbXB1dGVkUHJvcGVydHkscj1bXS5zbGljZSxu
        PUVtYmVyLmNyZWF0ZSxpPUVtYmVyLkVudW1lcmFibGVVdGlscy5mb3JFYWNo
        O0VtYmVyLkFycmF5Q29tcHV0ZWRQcm9wZXJ0eT1lLGUucHJvdG90eXBlPW4o
        dC5wcm90b3R5cGUpLGUucHJvdG90eXBlLmluaXRpYWxWYWx1ZT1mdW5jdGlv
        bigpe3JldHVybiBFbWJlci5BKCl9LGUucHJvdG90eXBlLnJlc2V0VmFsdWU9
        ZnVuY3Rpb24oZSl7cmV0dXJuIGUuY2xlYXIoKSxlfSxlLnByb3RvdHlwZS5k
        aWRDaGFuZ2U9ZnVuY3Rpb24oKXt9LEVtYmVyLmFycmF5Q29tcHV0ZWQ9ZnVu
        Y3Rpb24odCl7dmFyIG47aWYoYXJndW1lbnRzLmxlbmd0aD4xJiYobj1yLmNh
        bGwoYXJndW1lbnRzLDAsLTEpLHQ9ci5jYWxsKGFyZ3VtZW50cywtMSlbMF0p
        LCJvYmplY3QiIT10eXBlb2YgdCl0aHJvdyBuZXcgRW1iZXIuRXJyb3IoIkFy
        cmF5IENvbXB1dGVkIFByb3BlcnR5IGRlY2xhcmVkIHdpdGhvdXQgYW4gb3B0
        aW9ucyBoYXNoIik7dmFyIGk9bmV3IGUodCk7cmV0dXJuIG4mJmkucHJvcGVy
        dHkuYXBwbHkoaSxuKSxpfX0oKSxmdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSxp
        LG8sYSl7ZnVuY3Rpb24gcyhlKXtyZXR1cm4gdC5kZXRlY3RJbnN0YW5jZShl
        KT9uKHIoZSwiY29udGVudCIpKTpuKGUpfXZhciB1LGwsYyxoLG07cmV0dXJu
        IGFyZ3VtZW50cy5sZW5ndGg8NCYmKGE9cihlLCJsZW5ndGgiKSksYXJndW1l
        bnRzLmxlbmd0aDwzJiYobz0wKSxvPT09YT9vOih1PW8rTWF0aC5mbG9vcigo
        YS1vKS8yKSxsPWUub2JqZWN0QXQodSksaD1zKGwpLG09cyhpKSxoPT09bT91
        OihjPXRoaXMub3JkZXIobCxpKSwwPT09YyYmKGM9bT5oPy0xOjEpLDA+Yz90
        aGlzLmJpbmFyeVNlYXJjaChlLGksdSsxLGEpOmM+MD90aGlzLmJpbmFyeVNl
        YXJjaChlLGksbyx1KTp1KSl9dmFyIHQscj1FbWJlci5nZXQsbj0oRW1iZXIu
        c2V0LEVtYmVyLmd1aWRGb3IpLGk9RW1iZXIubWVyZ2Usbz1bXS5zbGljZSxh
        PUVtYmVyLkVudW1lcmFibGVVdGlscy5mb3JFYWNoLHM9RW1iZXIuRW51bWVy
        YWJsZVV0aWxzLm1hcDtFbWJlci5jb21wdXRlZC5zdW09ZnVuY3Rpb24oZSl7
        cmV0dXJuIEVtYmVyLnJlZHVjZUNvbXB1dGVkKGUse2luaXRpYWxWYWx1ZTow
        LGFkZGVkSXRlbTpmdW5jdGlvbihlLHQpe3JldHVybiBlK3R9LHJlbW92ZWRJ
        dGVtOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUtdH19KX0sRW1iZXIuY29tcHV0
        ZWQubWF4PWZ1bmN0aW9uKGUpe3JldHVybiBFbWJlci5yZWR1Y2VDb21wdXRl
        ZChlLHtpbml0aWFsVmFsdWU6LTEvMCxhZGRlZEl0ZW06ZnVuY3Rpb24oZSx0
        KXtyZXR1cm4gTWF0aC5tYXgoZSx0KX0scmVtb3ZlZEl0ZW06ZnVuY3Rpb24o
        ZSx0KXtyZXR1cm4gZT50P2U6dm9pZCAwfX0pfSxFbWJlci5jb21wdXRlZC5t
        aW49ZnVuY3Rpb24oZSl7cmV0dXJuIEVtYmVyLnJlZHVjZUNvbXB1dGVkKGUs
        e2luaXRpYWxWYWx1ZToxLzAsYWRkZWRJdGVtOmZ1bmN0aW9uKGUsdCl7cmV0
        dXJuIE1hdGgubWluKGUsdCl9LHJlbW92ZWRJdGVtOmZ1bmN0aW9uKGUsdCl7
        cmV0dXJuIHQ+ZT9lOnZvaWQgMH19KX0sRW1iZXIuY29tcHV0ZWQubWFwPWZ1
        bmN0aW9uKGUsdCl7dmFyIHI9e2FkZGVkSXRlbTpmdW5jdGlvbihlLHIsbil7
        dmFyIGk9dC5jYWxsKHRoaXMscik7cmV0dXJuIGUuaW5zZXJ0QXQobi5pbmRl
        eCxpKSxlfSxyZW1vdmVkSXRlbTpmdW5jdGlvbihlLHQscil7cmV0dXJuIGUu
        cmVtb3ZlQXQoci5pbmRleCwxKSxlfX07cmV0dXJuIEVtYmVyLmFycmF5Q29t
        cHV0ZWQoZSxyKX0sRW1iZXIuY29tcHV0ZWQubWFwQnk9ZnVuY3Rpb24oZSx0
        KXt2YXIgbj1mdW5jdGlvbihlKXtyZXR1cm4gcihlLHQpfTtyZXR1cm4gRW1i
        ZXIuY29tcHV0ZWQubWFwKGUrIi5AZWFjaC4iK3Qsbil9LEVtYmVyLmNvbXB1
        dGVkLm1hcFByb3BlcnR5PUVtYmVyLmNvbXB1dGVkLm1hcEJ5LEVtYmVyLmNv
        bXB1dGVkLmZpbHRlcj1mdW5jdGlvbihlLHQpe3ZhciByPXtpbml0aWFsaXpl
        OmZ1bmN0aW9uKGUsdCxyKXtyLmZpbHRlcmVkQXJyYXlJbmRleGVzPW5ldyBF
        bWJlci5TdWJBcnJheX0sYWRkZWRJdGVtOmZ1bmN0aW9uKGUscixuLGkpe3Zh
        ciBvPSEhdC5jYWxsKHRoaXMsciksYT1pLmZpbHRlcmVkQXJyYXlJbmRleGVz
        LmFkZEl0ZW0obi5pbmRleCxvKTtyZXR1cm4gbyYmZS5pbnNlcnRBdChhLHIp
        LGV9LHJlbW92ZWRJdGVtOmZ1bmN0aW9uKGUsdCxyLG4pe3ZhciBpPW4uZmls
        dGVyZWRBcnJheUluZGV4ZXMucmVtb3ZlSXRlbShyLmluZGV4KTtyZXR1cm4g
        aT4tMSYmZS5yZW1vdmVBdChpKSxlfX07cmV0dXJuIEVtYmVyLmFycmF5Q29t
        cHV0ZWQoZSxyKX0sRW1iZXIuY29tcHV0ZWQuZmlsdGVyQnk9ZnVuY3Rpb24o
        ZSx0LG4pe3ZhciBpO3JldHVybiBpPTI9PT1hcmd1bWVudHMubGVuZ3RoP2Z1
        bmN0aW9uKGUpe3JldHVybiByKGUsdCl9OmZ1bmN0aW9uKGUpe3JldHVybiBy
        KGUsdCk9PT1ufSxFbWJlci5jb21wdXRlZC5maWx0ZXIoZSsiLkBlYWNoLiIr
        dCxpKX0sRW1iZXIuY29tcHV0ZWQuZmlsdGVyUHJvcGVydHk9RW1iZXIuY29t
        cHV0ZWQuZmlsdGVyQnksRW1iZXIuY29tcHV0ZWQudW5pcT1mdW5jdGlvbigp
        e3ZhciBlPW8uY2FsbChhcmd1bWVudHMpO3JldHVybiBlLnB1c2goe2luaXRp
        YWxpemU6ZnVuY3Rpb24oZSx0LHIpe3IuaXRlbUNvdW50cz17fX0sYWRkZWRJ
        dGVtOmZ1bmN0aW9uKGUsdCxyLGkpe3ZhciBvPW4odCk7cmV0dXJuIGkuaXRl
        bUNvdW50c1tvXT8rK2kuaXRlbUNvdW50c1tvXTppLml0ZW1Db3VudHNbb109
        MSxlLmFkZE9iamVjdCh0KSxlfSxyZW1vdmVkSXRlbTpmdW5jdGlvbihlLHQs
        cixpKXt2YXIgbz1uKHQpLGE9aS5pdGVtQ291bnRzO3JldHVybiAwPT09LS1h
        W29dJiZlLnJlbW92ZU9iamVjdCh0KSxlfX0pLEVtYmVyLmFycmF5Q29tcHV0
        ZWQuYXBwbHkobnVsbCxlKX0sRW1iZXIuY29tcHV0ZWQudW5pb249RW1iZXIu
        Y29tcHV0ZWQudW5pcSxFbWJlci5jb21wdXRlZC5pbnRlcnNlY3Q9ZnVuY3Rp
        b24oKXt2YXIgZT1mdW5jdGlvbihlKXtyZXR1cm4gcyhlLnByb3BlcnR5Ll9k
        ZXBlbmRlbnRLZXlzLGZ1bmN0aW9uKGUpe3JldHVybiBuKGUpfSl9LHQ9by5j
        YWxsKGFyZ3VtZW50cyk7cmV0dXJuIHQucHVzaCh7aW5pdGlhbGl6ZTpmdW5j
        dGlvbihlLHQscil7ci5pdGVtQ291bnRzPXt9fSxhZGRlZEl0ZW06ZnVuY3Rp
        b24odCxyLGksbyl7dmFyIGE9bihyKSxzPShlKGkpLG4oaS5hcnJheUNoYW5n
        ZWQpKSx1PWkucHJvcGVydHkuX2RlcGVuZGVudEtleXMubGVuZ3RoLGw9by5p
        dGVtQ291bnRzO3JldHVybiBsW2FdfHwobFthXT17fSksdm9pZCAwPT09bFth
        XVtzXSYmKGxbYV1bc109MCksMT09PSsrbFthXVtzXSYmdT09PUVtYmVyLmtl
        eXMobFthXSkubGVuZ3RoJiZ0LmFkZE9iamVjdChyKSx0fSxyZW1vdmVkSXRl
        bTpmdW5jdGlvbih0LHIsaSxvKXt2YXIgYSxzPW4ociksdT0oZShpKSxuKGku
        YXJyYXlDaGFuZ2VkKSksbD0oaS5wcm9wZXJ0eS5fZGVwZW5kZW50S2V5cy5s
        ZW5ndGgsby5pdGVtQ291bnRzKTtyZXR1cm4gdm9pZCAwPT09bFtzXVt1XSYm
        KGxbc11bdV09MCksMD09PS0tbFtzXVt1XSYmKGRlbGV0ZSBsW3NdW3VdLGE9
        RW1iZXIua2V5cyhsW3NdKS5sZW5ndGgsMD09PWEmJmRlbGV0ZSBsW3NdLHQu
        cmVtb3ZlT2JqZWN0KHIpKSx0fX0pLEVtYmVyLmFycmF5Q29tcHV0ZWQuYXBw
        bHkobnVsbCx0KX0sRW1iZXIuY29tcHV0ZWQuc2V0RGlmZj1mdW5jdGlvbihl
        LHQpe2lmKDIhPT1hcmd1bWVudHMubGVuZ3RoKXRocm93IG5ldyBFbWJlci5F
        cnJvcigic2V0RGlmZiByZXF1aXJlcyBleGFjdGx5IHR3byBkZXBlbmRlbnQg
        YXJyYXlzLiIpO3JldHVybiBFbWJlci5hcnJheUNvbXB1dGVkKGUsdCx7YWRk
        ZWRJdGVtOmZ1bmN0aW9uKG4saSxvKXt2YXIgYT1yKHRoaXMsZSkscz1yKHRo
        aXMsdCk7cmV0dXJuIG8uYXJyYXlDaGFuZ2VkPT09YT9zLmNvbnRhaW5zKGkp
        fHxuLmFkZE9iamVjdChpKTpuLnJlbW92ZU9iamVjdChpKSxufSxyZW1vdmVk
        SXRlbTpmdW5jdGlvbihuLGksbyl7dmFyIGE9cih0aGlzLGUpLHM9cih0aGlz
        LHQpO3JldHVybiBvLmFycmF5Q2hhbmdlZD09PXM/YS5jb250YWlucyhpKSYm
        bi5hZGRPYmplY3QoaSk6bi5yZW1vdmVPYmplY3QoaSksbn19KX0sdD1FbWJl
        ci5PYmplY3RQcm94eS5leHRlbmQoKSxFbWJlci5jb21wdXRlZC5zb3J0PWZ1
        bmN0aW9uKG4sbyl7dmFyIHMsdTtyZXR1cm4iZnVuY3Rpb24iPT10eXBlb2Yg
        bz9zPWZ1bmN0aW9uKHQscixuKXtuLm9yZGVyPW8sbi5iaW5hcnlTZWFyY2g9
        ZX06KHU9byxzPWZ1bmN0aW9uKGksbyxzKXtmdW5jdGlvbiBsKCl7dmFyIGUs
        dCxpLGw9cih0aGlzLHUpLGg9cy5zb3J0UHJvcGVydGllcz1bXSxtPXMuc29y
        dFByb3BlcnR5QXNjZW5kaW5nPXt9O28ucHJvcGVydHkuY2xlYXJJdGVtUHJv
        cGVydHlLZXlzKG4pLGEobCxmdW5jdGlvbihyKXstMSE9PSh0PXIuaW5kZXhP
        ZigiOiIpKT8oZT1yLnN1YnN0cmluZygwLHQpLGk9ImRlc2MiIT09ci5zdWJz
        dHJpbmcodCsxKS50b0xvd2VyQ2FzZSgpKTooZT1yLGk9ITApLGgucHVzaChl
        KSxtW2VdPWksby5wcm9wZXJ0eS5pdGVtUHJvcGVydHlLZXkobixlKX0pLGwu
        YWRkT2JzZXJ2ZXIoIkBlYWNoIix0aGlzLGMpfWZ1bmN0aW9uIGMoKXtFbWJl
        ci5ydW4ub25jZSh0aGlzLGgsby5wcm9wZXJ0eU5hbWUpfWZ1bmN0aW9uIGgo
        ZSl7bC5jYWxsKHRoaXMpLG8ucHJvcGVydHkucmVjb21wdXRlT25jZS5jYWxs
        KHRoaXMsZSl9RW1iZXIuYWRkT2JzZXJ2ZXIodGhpcyx1LGMpLGwuY2FsbCh0
        aGlzKSxzLm9yZGVyPWZ1bmN0aW9uKGUsbil7Zm9yKHZhciBpLG8sYSxzPW4g
        aW5zdGFuY2VvZiB0LHU9MDt1PHRoaXMuc29ydFByb3BlcnRpZXMubGVuZ3Ro
        OysrdSlpZihpPXRoaXMuc29ydFByb3BlcnRpZXNbdV0sbz1FbWJlci5jb21w
        YXJlKHIoZSxpKSxzP25baV06cihuLGkpKSwwIT09bylyZXR1cm4gYT10aGlz
        LnNvcnRQcm9wZXJ0eUFzY2VuZGluZ1tpXSxhP286LTEqbztyZXR1cm4gMH0s
        cy5iaW5hcnlTZWFyY2g9ZX0pLEVtYmVyLmFycmF5Q29tcHV0ZWQobix7aW5p
        dGlhbGl6ZTpzLGFkZGVkSXRlbTpmdW5jdGlvbihlLHQscixuKXt2YXIgaT1u
        LmJpbmFyeVNlYXJjaChlLHQpO3JldHVybiBlLmluc2VydEF0KGksdCksZX0s
        cmVtb3ZlZEl0ZW06ZnVuY3Rpb24oZSxyLG4sbyl7dmFyIGEscyx1O3JldHVy
        biBuLnByZXZpb3VzVmFsdWVzPyhhPWkoe2NvbnRlbnQ6cn0sbi5wcmV2aW91
        c1ZhbHVlcyksdT10LmNyZWF0ZShhKSk6dT1yLHM9by5iaW5hcnlTZWFyY2go
        ZSx1KSxlLnJlbW92ZUF0KHMpLGV9fSl9fSgpLGZ1bmN0aW9uKCl7RW1iZXIu
        UlNWUD10KCJyc3ZwIiksRW1iZXIuUlNWUC5vbmVycm9yRGVmYXVsdD1mdW5j
        dGlvbihlKXtpZihlIGluc3RhbmNlb2YgRXJyb3IpaWYoRW1iZXIudGVzdGlu
        Zyl7aWYoIUVtYmVyLlRlc3R8fCFFbWJlci5UZXN0LmFkYXB0ZXIpdGhyb3cg
        ZTtFbWJlci5UZXN0LmFkYXB0ZXIuZXhjZXB0aW9uKGUpfWVsc2UgRW1iZXIu
        TG9nZ2VyLmVycm9yKGUuc3RhY2spfSxFbWJlci5SU1ZQLm9uKCJlcnJvciIs
        RW1iZXIuUlNWUC5vbmVycm9yRGVmYXVsdCl9KCksZnVuY3Rpb24oKXt2YXIg
        ZT1BcnJheS5wcm90b3R5cGUuc2xpY2UsdD1FbWJlci5leHBhbmRQcm9wZXJ0
        aWVzOyhFbWJlci5FWFRFTkRfUFJPVE9UWVBFUz09PSEwfHxFbWJlci5FWFRF
        TkRfUFJPVE9UWVBFUy5GdW5jdGlvbikmJihGdW5jdGlvbi5wcm90b3R5cGUu
        cHJvcGVydHk9ZnVuY3Rpb24oKXt2YXIgZT1FbWJlci5jb21wdXRlZCh0aGlz
        KTtyZXR1cm4gZS5wcm9wZXJ0eS5hcHBseShlLGFyZ3VtZW50cyl9LEZ1bmN0
        aW9uLnByb3RvdHlwZS5vYnNlcnZlcz1mdW5jdGlvbigpe2Zvcih2YXIgZT1m
        dW5jdGlvbihlKXtyLnB1c2goZSl9LHI9W10sbj0wO248YXJndW1lbnRzLmxl
        bmd0aDsrK24pdChhcmd1bWVudHNbbl0sZSk7cmV0dXJuIHRoaXMuX19lbWJl
        cl9vYnNlcnZlc19fPXIsdGhpc30sRnVuY3Rpb24ucHJvdG90eXBlLm9ic2Vy
        dmVzSW1tZWRpYXRlbHk9ZnVuY3Rpb24oKXtmb3IodmFyIGU9MCx0PWFyZ3Vt
        ZW50cy5sZW5ndGg7dD5lO2UrKyl7YXJndW1lbnRzW2VdfXJldHVybiB0aGlz
        Lm9ic2VydmVzLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sRnVuY3Rpb24ucHJv
        dG90eXBlLm9ic2VydmVzQmVmb3JlPWZ1bmN0aW9uKCl7Zm9yKHZhciBlPWZ1
        bmN0aW9uKGUpe3IucHVzaChlKX0scj1bXSxuPTA7bjxhcmd1bWVudHMubGVu
        Z3RoOysrbil0KGFyZ3VtZW50c1tuXSxlKTtyZXR1cm4gdGhpcy5fX2VtYmVy
        X29ic2VydmVzQmVmb3JlX189cix0aGlzfSxGdW5jdGlvbi5wcm90b3R5cGUu
        b249ZnVuY3Rpb24oKXt2YXIgdD1lLmNhbGwoYXJndW1lbnRzKTtyZXR1cm4g
        dGhpcy5fX2VtYmVyX2xpc3RlbnNfXz10LHRoaXN9KX0oKSxmdW5jdGlvbigp
        e0VtYmVyLkNvbXBhcmFibGU9RW1iZXIuTWl4aW4uY3JlYXRlKHtjb21wYXJl
        OkVtYmVyLnJlcXVpcmVkKEZ1bmN0aW9uKX0pfSgpLGZ1bmN0aW9uKCl7e3Zh
        ciBlPUVtYmVyLmdldDtFbWJlci5zZXR9RW1iZXIuQ29weWFibGU9RW1iZXIu
        TWl4aW4uY3JlYXRlKHtjb3B5OkVtYmVyLnJlcXVpcmVkKEZ1bmN0aW9uKSxm
        cm96ZW5Db3B5OmZ1bmN0aW9uKCl7aWYoRW1iZXIuRnJlZXphYmxlJiZFbWJl
        ci5GcmVlemFibGUuZGV0ZWN0KHRoaXMpKXJldHVybiBlKHRoaXMsImlzRnJv
        emVuIik/dGhpczp0aGlzLmNvcHkoKS5mcmVlemUoKTt0aHJvdyBuZXcgRW1i
        ZXIuRXJyb3IoRW1iZXIuU3RyaW5nLmZtdCgiJUAgZG9lcyBub3Qgc3VwcG9y
        dCBmcmVlemluZyIsW3RoaXNdKSl9fSl9KCksZnVuY3Rpb24oKXt2YXIgZT1F
        bWJlci5nZXQsdD1FbWJlci5zZXQ7RW1iZXIuRnJlZXphYmxlPUVtYmVyLk1p
        eGluLmNyZWF0ZSh7aXNGcm96ZW46ITEsZnJlZXplOmZ1bmN0aW9uKCl7cmV0
        dXJuIGUodGhpcywiaXNGcm96ZW4iKT90aGlzOih0KHRoaXMsImlzRnJvemVu
        IiwhMCksdGhpcyl9fSksRW1iZXIuRlJPWkVOX0VSUk9SPSJGcm96ZW4gb2Jq
        ZWN0IGNhbm5vdCBiZSBtb2RpZmllZC4ifSgpLGZ1bmN0aW9uKCl7dmFyIGU9
        RW1iZXIuRW51bWVyYWJsZVV0aWxzLmZvckVhY2g7RW1iZXIuTXV0YWJsZUVu
        dW1lcmFibGU9RW1iZXIuTWl4aW4uY3JlYXRlKEVtYmVyLkVudW1lcmFibGUs
        e2FkZE9iamVjdDpFbWJlci5yZXF1aXJlZChGdW5jdGlvbiksYWRkT2JqZWN0
        czpmdW5jdGlvbih0KXtyZXR1cm4gRW1iZXIuYmVnaW5Qcm9wZXJ0eUNoYW5n
        ZXModGhpcyksZSh0LGZ1bmN0aW9uKGUpe3RoaXMuYWRkT2JqZWN0KGUpfSx0
        aGlzKSxFbWJlci5lbmRQcm9wZXJ0eUNoYW5nZXModGhpcyksdGhpc30scmVt
        b3ZlT2JqZWN0OkVtYmVyLnJlcXVpcmVkKEZ1bmN0aW9uKSxyZW1vdmVPYmpl
        Y3RzOmZ1bmN0aW9uKHQpe3JldHVybiBFbWJlci5iZWdpblByb3BlcnR5Q2hh
        bmdlcyh0aGlzKSxlKHQsZnVuY3Rpb24oZSl7dGhpcy5yZW1vdmVPYmplY3Qo
        ZSl9LHRoaXMpLEVtYmVyLmVuZFByb3BlcnR5Q2hhbmdlcyh0aGlzKSx0aGlz
        fX0pfSgpLGZ1bmN0aW9uKCl7e3ZhciBlPSJJbmRleCBvdXQgb2YgcmFuZ2Ui
        LHQ9W10scj1FbWJlci5nZXQ7RW1iZXIuc2V0fUVtYmVyLk11dGFibGVBcnJh
        eT1FbWJlci5NaXhpbi5jcmVhdGUoRW1iZXIuQXJyYXksRW1iZXIuTXV0YWJs
        ZUVudW1lcmFibGUse3JlcGxhY2U6RW1iZXIucmVxdWlyZWQoKSxjbGVhcjpm
        dW5jdGlvbigpe3ZhciBlPXIodGhpcywibGVuZ3RoIik7cmV0dXJuIDA9PT1l
        P3RoaXM6KHRoaXMucmVwbGFjZSgwLGUsdCksdGhpcyl9LGluc2VydEF0OmZ1
        bmN0aW9uKHQsbil7aWYodD5yKHRoaXMsImxlbmd0aCIpKXRocm93IG5ldyBF
        bWJlci5FcnJvcihlKTtyZXR1cm4gdGhpcy5yZXBsYWNlKHQsMCxbbl0pLHRo
        aXN9LHJlbW92ZUF0OmZ1bmN0aW9uKG4saSl7aWYoIm51bWJlciI9PXR5cGVv
        ZiBuKXtpZigwPm58fG4+PXIodGhpcywibGVuZ3RoIikpdGhyb3cgbmV3IEVt
        YmVyLkVycm9yKGUpO3ZvaWQgMD09PWkmJihpPTEpLHRoaXMucmVwbGFjZShu
        LGksdCl9cmV0dXJuIHRoaXN9LHB1c2hPYmplY3Q6ZnVuY3Rpb24oZSl7cmV0
        dXJuIHRoaXMuaW5zZXJ0QXQocih0aGlzLCJsZW5ndGgiKSxlKSxlfSxwdXNo
        T2JqZWN0czpmdW5jdGlvbihlKXtpZighRW1iZXIuRW51bWVyYWJsZS5kZXRl
        Y3QoZSkmJiFFbWJlci5pc0FycmF5KGUpKXRocm93IG5ldyBUeXBlRXJyb3Io
        Ik11c3QgcGFzcyBFbWJlci5FbnVtZXJhYmxlIHRvIEVtYmVyLk11dGFibGVB
        cnJheSNwdXNoT2JqZWN0cyIpO3JldHVybiB0aGlzLnJlcGxhY2Uocih0aGlz
        LCJsZW5ndGgiKSwwLGUpLHRoaXN9LHBvcE9iamVjdDpmdW5jdGlvbigpe3Zh
        ciBlPXIodGhpcywibGVuZ3RoIik7aWYoMD09PWUpcmV0dXJuIG51bGw7dmFy
        IHQ9dGhpcy5vYmplY3RBdChlLTEpO3JldHVybiB0aGlzLnJlbW92ZUF0KGUt
        MSwxKSx0fSxzaGlmdE9iamVjdDpmdW5jdGlvbigpe2lmKDA9PT1yKHRoaXMs
        Imxlbmd0aCIpKXJldHVybiBudWxsO3ZhciBlPXRoaXMub2JqZWN0QXQoMCk7
        cmV0dXJuIHRoaXMucmVtb3ZlQXQoMCksZX0sdW5zaGlmdE9iamVjdDpmdW5j
        dGlvbihlKXtyZXR1cm4gdGhpcy5pbnNlcnRBdCgwLGUpLGV9LHVuc2hpZnRP
        YmplY3RzOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnJlcGxhY2UoMCwwLGUp
        LHRoaXN9LHJldmVyc2VPYmplY3RzOmZ1bmN0aW9uKCl7dmFyIGU9cih0aGlz
        LCJsZW5ndGgiKTtpZigwPT09ZSlyZXR1cm4gdGhpczt2YXIgdD10aGlzLnRv
        QXJyYXkoKS5yZXZlcnNlKCk7cmV0dXJuIHRoaXMucmVwbGFjZSgwLGUsdCks
        dGhpc30sc2V0T2JqZWN0czpmdW5jdGlvbihlKXtpZigwPT09ZS5sZW5ndGgp
        cmV0dXJuIHRoaXMuY2xlYXIoKTt2YXIgdD1yKHRoaXMsImxlbmd0aCIpO3Jl
        dHVybiB0aGlzLnJlcGxhY2UoMCx0LGUpLHRoaXN9LHJlbW92ZU9iamVjdDpm
        dW5jdGlvbihlKXtmb3IodmFyIHQ9cih0aGlzLCJsZW5ndGgiKXx8MDstLXQ+
        PTA7KXt2YXIgbj10aGlzLm9iamVjdEF0KHQpO249PT1lJiZ0aGlzLnJlbW92
        ZUF0KHQpfXJldHVybiB0aGlzfSxhZGRPYmplY3Q6ZnVuY3Rpb24oZSl7cmV0
        dXJuIHRoaXMuY29udGFpbnMoZSl8fHRoaXMucHVzaE9iamVjdChlKSx0aGlz
        fX0pfSgpLGZ1bmN0aW9uKCl7e3ZhciBlPUVtYmVyLmdldDtFbWJlci5zZXR9
        RW1iZXIuVGFyZ2V0QWN0aW9uU3VwcG9ydD1FbWJlci5NaXhpbi5jcmVhdGUo
        e3RhcmdldDpudWxsLGFjdGlvbjpudWxsLGFjdGlvbkNvbnRleHQ6bnVsbCx0
        YXJnZXRPYmplY3Q6RW1iZXIuY29tcHV0ZWQoZnVuY3Rpb24oKXt2YXIgdD1l
        KHRoaXMsInRhcmdldCIpO2lmKCJzdHJpbmciPT09RW1iZXIudHlwZU9mKHQp
        KXt2YXIgcj1lKHRoaXMsdCk7cmV0dXJuIHZvaWQgMD09PXImJihyPWUoRW1i
        ZXIubG9va3VwLHQpKSxyfXJldHVybiB0fSkucHJvcGVydHkoInRhcmdldCIp
        LGFjdGlvbkNvbnRleHRPYmplY3Q6RW1iZXIuY29tcHV0ZWQoZnVuY3Rpb24o
        KXt2YXIgdD1lKHRoaXMsImFjdGlvbkNvbnRleHQiKTtpZigic3RyaW5nIj09
        PUVtYmVyLnR5cGVPZih0KSl7dmFyIHI9ZSh0aGlzLHQpO3JldHVybiB2b2lk
        IDA9PT1yJiYocj1lKEVtYmVyLmxvb2t1cCx0KSkscn1yZXR1cm4gdH0pLnBy
        b3BlcnR5KCJhY3Rpb25Db250ZXh0IiksdHJpZ2dlckFjdGlvbjpmdW5jdGlv
        bih0KXtmdW5jdGlvbiByKGUsdCl7dmFyIHI9W107cmV0dXJuIHQmJnIucHVz
        aCh0KSxyLmNvbmNhdChlKX10PXR8fHt9O3ZhciBuPXQuYWN0aW9ufHxlKHRo
        aXMsImFjdGlvbiIpLGk9dC50YXJnZXR8fGUodGhpcywidGFyZ2V0T2JqZWN0
        Iiksbz10LmFjdGlvbkNvbnRleHQ7aWYoInVuZGVmaW5lZCI9PXR5cGVvZiBv
        JiYobz1lKHRoaXMsImFjdGlvbkNvbnRleHRPYmplY3QiKXx8dGhpcyksaSYm
        bil7dmFyIGE7cmV0dXJuIGE9aS5zZW5kP2kuc2VuZC5hcHBseShpLHIobyxu
        KSk6aVtuXS5hcHBseShpLHIobykpLGEhPT0hMSYmKGE9ITApLGF9cmV0dXJu
        ITF9fSl9KCksZnVuY3Rpb24oKXtFbWJlci5FdmVudGVkPUVtYmVyLk1peGlu
        LmNyZWF0ZSh7b246ZnVuY3Rpb24oZSx0LHIpe3JldHVybiBFbWJlci5hZGRM
        aXN0ZW5lcih0aGlzLGUsdCxyKSx0aGlzfSxvbmU6ZnVuY3Rpb24oZSx0LHIp
        e3JldHVybiByfHwocj10LHQ9bnVsbCksRW1iZXIuYWRkTGlzdGVuZXIodGhp
        cyxlLHQsciwhMCksdGhpc30sdHJpZ2dlcjpmdW5jdGlvbihlKXt2YXIgdCxy
        LG49W107Zm9yKHQ9MSxyPWFyZ3VtZW50cy5sZW5ndGg7cj50O3QrKyluLnB1
        c2goYXJndW1lbnRzW3RdKTtFbWJlci5zZW5kRXZlbnQodGhpcyxlLG4pfSxv
        ZmY6ZnVuY3Rpb24oZSx0LHIpe3JldHVybiBFbWJlci5yZW1vdmVMaXN0ZW5l
        cih0aGlzLGUsdCxyKSx0aGlzfSxoYXM6ZnVuY3Rpb24oZSl7cmV0dXJuIEVt
        YmVyLmhhc0xpc3RlbmVycyh0aGlzLGUpfX0pfSgpLGZ1bmN0aW9uKCl7dmFy
        IGU9dCgicnN2cCIpO2lmKEVtYmVyLkZFQVRVUkVTWyJlbWJlci1ydW50aW1l
        LXRlc3QtZnJpZW5kbHktcHJvbWlzZXMiXSl7dmFyIHI9ZnVuY3Rpb24oKXtF
        bWJlci5UZXN0JiZFbWJlci5UZXN0LmFkYXB0ZXImJkVtYmVyLlRlc3QuYWRh
        cHRlci5hc3luY1N0YXJ0KCl9LG49ZnVuY3Rpb24oKXtFbWJlci5UZXN0JiZF
        bWJlci5UZXN0LmFkYXB0ZXImJkVtYmVyLlRlc3QuYWRhcHRlci5hc3luY0Vu
        ZCgpfTtlLmNvbmZpZ3VyZSgiYXN5bmMiLGZ1bmN0aW9uKGUsdCl7dmFyIGk9
        IUVtYmVyLnJ1bi5jdXJyZW50UnVuTG9vcDtFbWJlci50ZXN0aW5nJiZpJiZy
        KCksRW1iZXIucnVuLmJhY2tidXJuZXIuc2NoZWR1bGUoImFjdGlvbnMiLGZ1
        bmN0aW9uKCl7RW1iZXIudGVzdGluZyYmaSYmbigpLGUodCl9KX0pfWVsc2Ug
        ZS5jb25maWd1cmUoImFzeW5jIixmdW5jdGlvbihlLHQpe0VtYmVyLnJ1bi5i
        YWNrYnVybmVyLnNjaGVkdWxlKCJhY3Rpb25zIixmdW5jdGlvbigpe2UodCl9
        KX0pO2UuUHJvbWlzZS5wcm90b3R5cGUuZmFpbD1mdW5jdGlvbihlLHQpe3Jl
        dHVybiB0aGlzWyJjYXRjaCJdKGUsdCl9O3ZhciBpPUVtYmVyLmdldDtFbWJl
        ci5EZWZlcnJlZE1peGluPUVtYmVyLk1peGluLmNyZWF0ZSh7dGhlbjpmdW5j
        dGlvbihlLHQscil7ZnVuY3Rpb24gbih0KXtyZXR1cm4gdD09PWE/ZShzKTpl
        KHQpfXZhciBvLGEscztyZXR1cm4gcz10aGlzLG89aSh0aGlzLCJfZGVmZXJy
        ZWQiKSxhPW8ucHJvbWlzZSxhLnRoZW4oZSYmbix0LHIpfSxyZXNvbHZlOmZ1
        bmN0aW9uKGUpe3ZhciB0LHI7dD1pKHRoaXMsIl9kZWZlcnJlZCIpLHI9dC5w
        cm9taXNlLGU9PT10aGlzP3QucmVzb2x2ZShyKTp0LnJlc29sdmUoZSl9LHJl
        amVjdDpmdW5jdGlvbihlKXtpKHRoaXMsIl9kZWZlcnJlZCIpLnJlamVjdChl
        KX0sX2RlZmVycmVkOkVtYmVyLmNvbXB1dGVkKGZ1bmN0aW9uKCl7cmV0dXJu
        IGUuZGVmZXIoIkVtYmVyOiBEZWZlcnJlZE1peGluIC0gIit0aGlzKX0pfSl9
        KCksZnVuY3Rpb24oKXt2YXIgZT1FbWJlci5nZXQsdD1FbWJlci50eXBlT2Y7
        RW1iZXIuQWN0aW9uSGFuZGxlcj1FbWJlci5NaXhpbi5jcmVhdGUoe21lcmdl
        ZFByb3BlcnRpZXM6WyJfYWN0aW9ucyJdLHdpbGxNZXJnZU1peGluOmZ1bmN0
        aW9uKGUpe3ZhciByO2UuX2FjdGlvbnN8fCgib2JqZWN0Ij09PXQoZS5hY3Rp
        b25zKT9yPSJhY3Rpb25zIjoib2JqZWN0Ij09PXQoZS5ldmVudHMpJiYocj0i
        ZXZlbnRzIiksciYmKGUuX2FjdGlvbnM9RW1iZXIubWVyZ2UoZS5fYWN0aW9u
        c3x8e30sZVtyXSkpLGRlbGV0ZSBlW3JdKX0sc2VuZDpmdW5jdGlvbih0KXt2
        YXIgcixuPVtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpO2lmKHRoaXMuX2Fj
        dGlvbnMmJnRoaXMuX2FjdGlvbnNbdF0pe2lmKHRoaXMuX2FjdGlvbnNbdF0u
        YXBwbHkodGhpcyxuKSE9PSEwKXJldHVybn1lbHNlIGlmKCFFbWJlci5GRUFU
        VVJFUy5pc0VuYWJsZWQoImVtYmVyLXJvdXRpbmctZHJvcC1kZXByZWNhdGVk
        LWFjdGlvbi1zdHlsZSIpJiZ0aGlzLmRlcHJlY2F0ZWRTZW5kJiZ0aGlzLmRl
        cHJlY2F0ZWRTZW5kSGFuZGxlcyYmdGhpcy5kZXByZWNhdGVkU2VuZEhhbmRs
        ZXModCkmJnRoaXMuZGVwcmVjYXRlZFNlbmQuYXBwbHkodGhpcyxbXS5zbGlj
        ZS5jYWxsKGFyZ3VtZW50cykpIT09ITApcmV0dXJuOyhyPWUodGhpcywidGFy
        Z2V0IikpJiZyLnNlbmQuYXBwbHkocixhcmd1bWVudHMpfX0pfSgpLGZ1bmN0
        aW9uKCl7ZnVuY3Rpb24gZShlLHQpe3JldHVybiB0LnRoZW4oZnVuY3Rpb24o
        dCl7cmV0dXJuIHIoZSwiaXNGdWxmaWxsZWQiLCEwKSxyKGUsImNvbnRlbnQi
        LHQpLHR9LGZ1bmN0aW9uKHQpe3Rocm93IHIoZSwiaXNSZWplY3RlZCIsITAp
        LHIoZSwicmVhc29uIix0KSx0fSwiRW1iZXI6IFByb21pc2VQcm94eSIpfWZ1
        bmN0aW9uIHQoZSl7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIHQ9bih0aGlzLCJw
        cm9taXNlIik7cmV0dXJuIHRbZV0uYXBwbHkodCxhcmd1bWVudHMpfX12YXIg
        cj1FbWJlci5zZXQsbj1FbWJlci5nZXQsaT1FbWJlci5jb21wdXRlZC5ub3Qs
        bz1FbWJlci5jb21wdXRlZC5vcjtFbWJlci5Qcm9taXNlUHJveHlNaXhpbj1F
        bWJlci5NaXhpbi5jcmVhdGUoe3JlYXNvbjpudWxsLGlzUGVuZGluZzppKCJp
        c1NldHRsZWQiKS5yZWFkT25seSgpLGlzU2V0dGxlZDpvKCJpc1JlamVjdGVk
        IiwiaXNGdWxmaWxsZWQiKS5yZWFkT25seSgpLGlzUmVqZWN0ZWQ6ITEsaXNG
        dWxmaWxsZWQ6ITEscHJvbWlzZTpFbWJlci5jb21wdXRlZChmdW5jdGlvbih0
        LHIpe2lmKDI9PT1hcmd1bWVudHMubGVuZ3RoKXJldHVybiBlKHRoaXMscik7
        dGhyb3cgbmV3IEVtYmVyLkVycm9yKCJQcm9taXNlUHJveHkncyBwcm9taXNl
        IG11c3QgYmUgc2V0Iil9KSx0aGVuOnQoInRoZW4iKSwiY2F0Y2giOnQoImNh
        dGNoIiksImZpbmFsbHkiOnQoImZpbmFsbHkiKX0pfSgpLGZ1bmN0aW9uKCl7
        ZnVuY3Rpb24gZShlLHQscil7dGhpcy50eXBlPWUsdGhpcy5jb3VudD10LHRo
        aXMuaXRlbXM9cn1mdW5jdGlvbiB0KGUsdCxyLG4pe3RoaXMub3BlcmF0aW9u
        PWUsdGhpcy5pbmRleD10LHRoaXMuc3BsaXQ9cix0aGlzLnJhbmdlU3RhcnQ9
        bn12YXIgcj1FbWJlci5nZXQsbj1FbWJlci5FbnVtZXJhYmxlVXRpbHMuZm9y
        RWFjaCxpPSJyIixvPSJpIixhPSJkIjtFbWJlci5UcmFja2VkQXJyYXk9ZnVu
        Y3Rpb24odCl7YXJndW1lbnRzLmxlbmd0aDwxJiYodD1bXSk7dmFyIG49cih0
        LCJsZW5ndGgiKTt0aGlzLl9vcGVyYXRpb25zPW4/W25ldyBlKGksbix0KV06
        W119LEVtYmVyLlRyYWNrZWRBcnJheS5SRVRBSU49aSxFbWJlci5UcmFja2Vk
        QXJyYXkuSU5TRVJUPW8sRW1iZXIuVHJhY2tlZEFycmF5LkRFTEVURT1hLEVt
        YmVyLlRyYWNrZWRBcnJheS5wcm90b3R5cGU9e2FkZEl0ZW1zOmZ1bmN0aW9u
        KHQsbil7dmFyIGk9cihuLCJsZW5ndGgiKTtpZighKDE+aSkpe3ZhciBhLHMs
        dT10aGlzLl9maW5kQXJyYXlPcGVyYXRpb24odCksbD11Lm9wZXJhdGlvbixj
        PXUuaW5kZXgsaD11LnJhbmdlU3RhcnQ7cz1uZXcgZShvLGksbiksbD91LnNw
        bGl0Pyh0aGlzLl9zcGxpdChjLHQtaCxzKSxhPWMrMSk6KHRoaXMuX29wZXJh
        dGlvbnMuc3BsaWNlKGMsMCxzKSxhPWMpOih0aGlzLl9vcGVyYXRpb25zLnB1
        c2gocyksYT1jKSx0aGlzLl9jb21wb3NlSW5zZXJ0KGEpfX0scmVtb3ZlSXRl
        bXM6ZnVuY3Rpb24odCxyKXtpZighKDE+cikpe3ZhciBuLGksbz10aGlzLl9m
        aW5kQXJyYXlPcGVyYXRpb24odCkscz0oby5vcGVyYXRpb24sby5pbmRleCks
        dT1vLnJhbmdlU3RhcnQ7cmV0dXJuIG49bmV3IGUoYSxyKSxvLnNwbGl0Pyh0
        aGlzLl9zcGxpdChzLHQtdSxuKSxpPXMrMSk6KHRoaXMuX29wZXJhdGlvbnMu
        c3BsaWNlKHMsMCxuKSxpPXMpLHRoaXMuX2NvbXBvc2VEZWxldGUoaSl9fSxh
        cHBseTpmdW5jdGlvbih0KXt2YXIgcj1bXSxvPTA7bih0aGlzLl9vcGVyYXRp
        b25zLGZ1bmN0aW9uKGUpe3QoZS5pdGVtcyxvLGUudHlwZSksZS50eXBlIT09
        YSYmKG8rPWUuY291bnQscj1yLmNvbmNhdChlLml0ZW1zKSl9KSx0aGlzLl9v
        cGVyYXRpb25zPVtuZXcgZShpLHIubGVuZ3RoLHIpXX0sX2ZpbmRBcnJheU9w
        ZXJhdGlvbjpmdW5jdGlvbihlKXt2YXIgcixuLGksbyxzLHU9ITE7Zm9yKHI9
        bz0wLG49dGhpcy5fb3BlcmF0aW9ucy5sZW5ndGg7bj5yOysrcilpZihpPXRo
        aXMuX29wZXJhdGlvbnNbcl0saS50eXBlIT09YSl7aWYocz1vK2kuY291bnQt
        MSxlPT09bylicmVhaztpZihlPm8mJnM+PWUpe3U9ITA7YnJlYWt9bz1zKzF9
        cmV0dXJuIG5ldyB0KGkscix1LG8pfSxfc3BsaXQ6ZnVuY3Rpb24odCxyLG4p
        e3ZhciBpPXRoaXMuX29wZXJhdGlvbnNbdF0sbz1pLml0ZW1zLnNsaWNlKHIp
        LGE9bmV3IGUoaS50eXBlLG8ubGVuZ3RoLG8pO2kuY291bnQ9cixpLml0ZW1z
        PWkuaXRlbXMuc2xpY2UoMCxyKSx0aGlzLl9vcGVyYXRpb25zLnNwbGljZSh0
        KzEsMCxuLGEpfSxfY29tcG9zZUluc2VydDpmdW5jdGlvbihlKXt2YXIgdD10
        aGlzLl9vcGVyYXRpb25zW2VdLHI9dGhpcy5fb3BlcmF0aW9uc1tlLTFdLG49
        dGhpcy5fb3BlcmF0aW9uc1tlKzFdLGk9ciYmci50eXBlLGE9biYmbi50eXBl
        O2k9PT1vPyhyLmNvdW50Kz10LmNvdW50LHIuaXRlbXM9ci5pdGVtcy5jb25j
        YXQodC5pdGVtcyksYT09PW8/KHIuY291bnQrPW4uY291bnQsci5pdGVtcz1y
        Lml0ZW1zLmNvbmNhdChuLml0ZW1zKSx0aGlzLl9vcGVyYXRpb25zLnNwbGlj
        ZShlLDIpKTp0aGlzLl9vcGVyYXRpb25zLnNwbGljZShlLDEpKTphPT09byYm
        KHQuY291bnQrPW4uY291bnQsdC5pdGVtcz10Lml0ZW1zLmNvbmNhdChuLml0
        ZW1zKSx0aGlzLl9vcGVyYXRpb25zLnNwbGljZShlKzEsMSkpfSxfY29tcG9z
        ZURlbGV0ZTpmdW5jdGlvbihlKXt2YXIgdCxyLG4saT10aGlzLl9vcGVyYXRp
        b25zW2VdLHM9aS5jb3VudCx1PXRoaXMuX29wZXJhdGlvbnNbZS0xXSxsPXUm
        JnUudHlwZSxjPSExLGg9W107bD09PWEmJihpPXUsZS09MSk7Zm9yKHZhciBt
        PWUrMTtzPjA7KyttKXQ9dGhpcy5fb3BlcmF0aW9uc1ttXSxyPXQudHlwZSxu
        PXQuY291bnQsciE9PWE/KG4+cz8oaD1oLmNvbmNhdCh0Lml0ZW1zLnNwbGlj
        ZSgwLHMpKSx0LmNvdW50LT1zLG0tPTEsbj1zLHM9MCk6KG49PT1zJiYoYz0h
        MCksaD1oLmNvbmNhdCh0Lml0ZW1zKSxzLT1uKSxyPT09byYmKGkuY291bnQt
        PW4pKTppLmNvdW50Kz1uO3JldHVybiBpLmNvdW50PjA/dGhpcy5fb3BlcmF0
        aW9ucy5zcGxpY2UoZSsxLG0tMS1lKTp0aGlzLl9vcGVyYXRpb25zLnNwbGlj
        ZShlLGM/MjoxKSxofSx0b1N0cmluZzpmdW5jdGlvbigpe3ZhciBlPSIiO3Jl
        dHVybiBuKHRoaXMuX29wZXJhdGlvbnMsZnVuY3Rpb24odCl7ZSs9IiAiK3Qu
        dHlwZSsiOiIrdC5jb3VudH0pLGUuc3Vic3RyaW5nKDEpfX19KCksZnVuY3Rp
        b24oKXtmdW5jdGlvbiBlKGUsdCl7dGhpcy50eXBlPWUsdGhpcy5jb3VudD10
        fXZhciB0PShFbWJlci5nZXQsRW1iZXIuRW51bWVyYWJsZVV0aWxzLmZvckVh
        Y2gpLHI9InIiLG49ImYiO0VtYmVyLlN1YkFycmF5PWZ1bmN0aW9uKHQpe2Fy
        Z3VtZW50cy5sZW5ndGg8MSYmKHQ9MCksdGhpcy5fb3BlcmF0aW9ucz10PjA/
        W25ldyBlKHIsdCldOltdfSxFbWJlci5TdWJBcnJheS5wcm90b3R5cGU9e2Fk
        ZEl0ZW06ZnVuY3Rpb24odCxpKXt2YXIgbz0tMSxhPWk/cjpuLHM9dGhpczty
        ZXR1cm4gdGhpcy5fZmluZE9wZXJhdGlvbih0LGZ1bmN0aW9uKG4sdSxsLGMs
        aCl7dmFyIG0scDthPT09bi50eXBlPysrbi5jb3VudDp0PT09bD9zLl9vcGVy
        YXRpb25zLnNwbGljZSh1LDAsbmV3IGUoYSwxKSk6KG09bmV3IGUoYSwxKSxw
        PW5ldyBlKG4udHlwZSxjLXQrMSksbi5jb3VudD10LWwscy5fb3BlcmF0aW9u
        cy5zcGxpY2UodSsxLDAsbSxwKSksaSYmKG89bi50eXBlPT09cj9oKyh0LWwp
        OmgpLHMuX2NvbXBvc2VBdCh1KX0sZnVuY3Rpb24odCl7cy5fb3BlcmF0aW9u
        cy5wdXNoKG5ldyBlKGEsMSkpLGkmJihvPXQpLHMuX2NvbXBvc2VBdChzLl9v
        cGVyYXRpb25zLmxlbmd0aC0xKX0pLG99LHJlbW92ZUl0ZW06ZnVuY3Rpb24o
        ZSl7dmFyIHQ9LTEsbj10aGlzO3JldHVybiB0aGlzLl9maW5kT3BlcmF0aW9u
        KGUsZnVuY3Rpb24oaSxvLGEscyx1KXtpLnR5cGU9PT1yJiYodD11KyhlLWEp
        KSxpLmNvdW50PjE/LS1pLmNvdW50OihuLl9vcGVyYXRpb25zLnNwbGljZShv
        LDEpLG4uX2NvbXBvc2VBdChvKSl9LGZ1bmN0aW9uKCl7dGhyb3cgbmV3IEVt
        YmVyLkVycm9yKCJDYW4ndCByZW1vdmUgYW4gaXRlbSB0aGF0IGhhcyBuZXZl
        ciBiZWVuIGFkZGVkLiIpfSksdH0sX2ZpbmRPcGVyYXRpb246ZnVuY3Rpb24o
        ZSx0LG4pe3ZhciBpLG8sYSxzLHUsbD0wO2ZvcihpPXM9MCxvPXRoaXMuX29w
        ZXJhdGlvbnMubGVuZ3RoO28+aTtzPXUrMSwrK2kpe2lmKGE9dGhpcy5fb3Bl
        cmF0aW9uc1tpXSx1PXMrYS5jb3VudC0xLGU+PXMmJnU+PWUpcmV0dXJuIHQo
        YSxpLHMsdSxsKSx2b2lkIDA7YS50eXBlPT09ciYmKGwrPWEuY291bnQpfW4o
        bCl9LF9jb21wb3NlQXQ6ZnVuY3Rpb24oZSl7dmFyIHQscj10aGlzLl9vcGVy
        YXRpb25zW2VdO3ImJihlPjAmJih0PXRoaXMuX29wZXJhdGlvbnNbZS0xXSx0
        LnR5cGU9PT1yLnR5cGUmJihyLmNvdW50Kz10LmNvdW50LHRoaXMuX29wZXJh
        dGlvbnMuc3BsaWNlKGUtMSwxKSwtLWUpKSxlPHRoaXMuX29wZXJhdGlvbnMu
        bGVuZ3RoLTEmJih0PXRoaXMuX29wZXJhdGlvbnNbZSsxXSx0LnR5cGU9PT1y
        LnR5cGUmJihyLmNvdW50Kz10LmNvdW50LHRoaXMuX29wZXJhdGlvbnMuc3Bs
        aWNlKGUrMSwxKSkpKX0sdG9TdHJpbmc6ZnVuY3Rpb24oKXt2YXIgZT0iIjty
        ZXR1cm4gdCh0aGlzLl9vcGVyYXRpb25zLGZ1bmN0aW9uKHQpe2UrPSIgIit0
        LnR5cGUrIjoiK3QuY291bnR9KSxlLnN1YnN0cmluZygxKX19fSgpLGZ1bmN0
        aW9uKCl7RW1iZXIuQ29udGFpbmVyPXQoImNvbnRhaW5lciIpWyJkZWZhdWx0
        Il0sRW1iZXIuQ29udGFpbmVyLnNldD1FbWJlci5zZXR9KCksZnVuY3Rpb24o
        KXtFbWJlci5BcHBsaWNhdGlvbj1FbWJlci5OYW1lc3BhY2UuZXh0ZW5kKCl9
        KCksZnVuY3Rpb24oKXt7dmFyIGU9IkluZGV4IG91dCBvZiByYW5nZSIsdD1b
        XSxyPUVtYmVyLmdldDtFbWJlci5zZXR9RW1iZXIuQXJyYXlQcm94eT1FbWJl
        ci5PYmplY3QuZXh0ZW5kKEVtYmVyLk11dGFibGVBcnJheSx7Y29udGVudDpu
        dWxsLGFycmFuZ2VkQ29udGVudDpFbWJlci5jb21wdXRlZC5hbGlhcygiY29u
        dGVudCIpLG9iamVjdEF0Q29udGVudDpmdW5jdGlvbihlKXtyZXR1cm4gcih0
        aGlzLCJhcnJhbmdlZENvbnRlbnQiKS5vYmplY3RBdChlKX0scmVwbGFjZUNv
        bnRlbnQ6ZnVuY3Rpb24oZSx0LG4pe3IodGhpcywiY29udGVudCIpLnJlcGxh
        Y2UoZSx0LG4pfSxfY29udGVudFdpbGxDaGFuZ2U6RW1iZXIuYmVmb3JlT2Jz
        ZXJ2ZXIoImNvbnRlbnQiLGZ1bmN0aW9uKCl7dGhpcy5fdGVhcmRvd25Db250
        ZW50KCl9KSxfdGVhcmRvd25Db250ZW50OmZ1bmN0aW9uKCl7dmFyIGU9cih0
        aGlzLCJjb250ZW50Iik7ZSYmZS5yZW1vdmVBcnJheU9ic2VydmVyKHRoaXMs
        e3dpbGxDaGFuZ2U6ImNvbnRlbnRBcnJheVdpbGxDaGFuZ2UiLGRpZENoYW5n
        ZToiY29udGVudEFycmF5RGlkQ2hhbmdlIn0pfSxjb250ZW50QXJyYXlXaWxs
        Q2hhbmdlOkVtYmVyLkssY29udGVudEFycmF5RGlkQ2hhbmdlOkVtYmVyLkss
        X2NvbnRlbnREaWRDaGFuZ2U6RW1iZXIub2JzZXJ2ZXIoImNvbnRlbnQiLGZ1
        bmN0aW9uKCl7cih0aGlzLCJjb250ZW50Iik7dGhpcy5fc2V0dXBDb250ZW50
        KCl9KSxfc2V0dXBDb250ZW50OmZ1bmN0aW9uKCl7dmFyIGU9cih0aGlzLCJj
        b250ZW50Iik7ZSYmZS5hZGRBcnJheU9ic2VydmVyKHRoaXMse3dpbGxDaGFu
        Z2U6ImNvbnRlbnRBcnJheVdpbGxDaGFuZ2UiLGRpZENoYW5nZToiY29udGVu
        dEFycmF5RGlkQ2hhbmdlIn0pfSxfYXJyYW5nZWRDb250ZW50V2lsbENoYW5n
        ZTpFbWJlci5iZWZvcmVPYnNlcnZlcigiYXJyYW5nZWRDb250ZW50IixmdW5j
        dGlvbigpe3ZhciBlPXIodGhpcywiYXJyYW5nZWRDb250ZW50IiksdD1lP3Io
        ZSwibGVuZ3RoIik6MDt0aGlzLmFycmFuZ2VkQ29udGVudEFycmF5V2lsbENo
        YW5nZSh0aGlzLDAsdCx2b2lkIDApLHRoaXMuYXJyYW5nZWRDb250ZW50V2ls
        bENoYW5nZSh0aGlzKSx0aGlzLl90ZWFyZG93bkFycmFuZ2VkQ29udGVudChl
        KX0pLF9hcnJhbmdlZENvbnRlbnREaWRDaGFuZ2U6RW1iZXIub2JzZXJ2ZXIo
        ImFycmFuZ2VkQ29udGVudCIsZnVuY3Rpb24oKXt2YXIgZT1yKHRoaXMsImFy
        cmFuZ2VkQ29udGVudCIpLHQ9ZT9yKGUsImxlbmd0aCIpOjA7dGhpcy5fc2V0
        dXBBcnJhbmdlZENvbnRlbnQoKSx0aGlzLmFycmFuZ2VkQ29udGVudERpZENo
        YW5nZSh0aGlzKSx0aGlzLmFycmFuZ2VkQ29udGVudEFycmF5RGlkQ2hhbmdl
        KHRoaXMsMCx2b2lkIDAsdCl9KSxfc2V0dXBBcnJhbmdlZENvbnRlbnQ6ZnVu
        Y3Rpb24oKXt2YXIgZT1yKHRoaXMsImFycmFuZ2VkQ29udGVudCIpO2UmJmUu
        YWRkQXJyYXlPYnNlcnZlcih0aGlzLHt3aWxsQ2hhbmdlOiJhcnJhbmdlZENv
        bnRlbnRBcnJheVdpbGxDaGFuZ2UiLGRpZENoYW5nZToiYXJyYW5nZWRDb250
        ZW50QXJyYXlEaWRDaGFuZ2UifSl9LF90ZWFyZG93bkFycmFuZ2VkQ29udGVu
        dDpmdW5jdGlvbigpe3ZhciBlPXIodGhpcywiYXJyYW5nZWRDb250ZW50Iik7
        ZSYmZS5yZW1vdmVBcnJheU9ic2VydmVyKHRoaXMse3dpbGxDaGFuZ2U6ImFy
        cmFuZ2VkQ29udGVudEFycmF5V2lsbENoYW5nZSIsZGlkQ2hhbmdlOiJhcnJh
        bmdlZENvbnRlbnRBcnJheURpZENoYW5nZSJ9KX0sYXJyYW5nZWRDb250ZW50
        V2lsbENoYW5nZTpFbWJlci5LLGFycmFuZ2VkQ29udGVudERpZENoYW5nZTpF
        bWJlci5LLG9iamVjdEF0OmZ1bmN0aW9uKGUpe3JldHVybiByKHRoaXMsImNv
        bnRlbnQiKSYmdGhpcy5vYmplY3RBdENvbnRlbnQoZSl9LGxlbmd0aDpFbWJl
        ci5jb21wdXRlZChmdW5jdGlvbigpe3ZhciBlPXIodGhpcywiYXJyYW5nZWRD
        b250ZW50Iik7cmV0dXJuIGU/cihlLCJsZW5ndGgiKTowfSksX3JlcGxhY2U6
        ZnVuY3Rpb24oZSx0LG4pe3ZhciBpPXIodGhpcywiY29udGVudCIpO3JldHVy
        biBpJiZ0aGlzLnJlcGxhY2VDb250ZW50KGUsdCxuKSx0aGlzfSxyZXBsYWNl
        OmZ1bmN0aW9uKCl7aWYocih0aGlzLCJhcnJhbmdlZENvbnRlbnQiKSE9PXIo
        dGhpcywiY29udGVudCIpKXRocm93IG5ldyBFbWJlci5FcnJvcigiVXNpbmcg
        cmVwbGFjZSBvbiBhbiBhcnJhbmdlZCBBcnJheVByb3h5IGlzIG5vdCBhbGxv
        d2VkLiIpO3RoaXMuX3JlcGxhY2UuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxf
        aW5zZXJ0QXQ6ZnVuY3Rpb24odCxuKXtpZih0PnIodGhpcywiY29udGVudC5s
        ZW5ndGgiKSl0aHJvdyBuZXcgRW1iZXIuRXJyb3IoZSk7cmV0dXJuIHRoaXMu
        X3JlcGxhY2UodCwwLFtuXSksdGhpc30saW5zZXJ0QXQ6ZnVuY3Rpb24oZSx0
        KXtpZihyKHRoaXMsImFycmFuZ2VkQ29udGVudCIpPT09cih0aGlzLCJjb250
        ZW50IikpcmV0dXJuIHRoaXMuX2luc2VydEF0KGUsdCk7dGhyb3cgbmV3IEVt
        YmVyLkVycm9yKCJVc2luZyBpbnNlcnRBdCBvbiBhbiBhcnJhbmdlZCBBcnJh
        eVByb3h5IGlzIG5vdCBhbGxvd2VkLiIpfSxyZW1vdmVBdDpmdW5jdGlvbihu
        LGkpe2lmKCJudW1iZXIiPT10eXBlb2Ygbil7dmFyIG8sYT1yKHRoaXMsImNv
        bnRlbnQiKSxzPXIodGhpcywiYXJyYW5nZWRDb250ZW50IiksdT1bXTtpZigw
        Pm58fG4+PXIodGhpcywibGVuZ3RoIikpdGhyb3cgbmV3IEVtYmVyLkVycm9y
        KGUpO2Zvcih2b2lkIDA9PT1pJiYoaT0xKSxvPW47bitpPm87bysrKXUucHVz
        aChhLmluZGV4T2Yocy5vYmplY3RBdChvKSkpO2Zvcih1LnNvcnQoZnVuY3Rp
        b24oZSx0KXtyZXR1cm4gdC1lfSksRW1iZXIuYmVnaW5Qcm9wZXJ0eUNoYW5n
        ZXMoKSxvPTA7bzx1Lmxlbmd0aDtvKyspdGhpcy5fcmVwbGFjZSh1W29dLDEs
        dCk7RW1iZXIuZW5kUHJvcGVydHlDaGFuZ2VzKCl9cmV0dXJuIHRoaXN9LHB1
        c2hPYmplY3Q6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2luc2VydEF0KHIo
        dGhpcywiY29udGVudC5sZW5ndGgiKSxlKSxlfSxwdXNoT2JqZWN0czpmdW5j
        dGlvbihlKXtpZighRW1iZXIuRW51bWVyYWJsZS5kZXRlY3QoZSkmJiFFbWJl
        ci5pc0FycmF5KGUpKXRocm93IG5ldyBUeXBlRXJyb3IoIk11c3QgcGFzcyBF
        bWJlci5FbnVtZXJhYmxlIHRvIEVtYmVyLk11dGFibGVBcnJheSNwdXNoT2Jq
        ZWN0cyIpO3JldHVybiB0aGlzLl9yZXBsYWNlKHIodGhpcywibGVuZ3RoIiks
        MCxlKSx0aGlzfSxzZXRPYmplY3RzOmZ1bmN0aW9uKGUpe2lmKDA9PT1lLmxl
        bmd0aClyZXR1cm4gdGhpcy5jbGVhcigpO3ZhciB0PXIodGhpcywibGVuZ3Ro
        Iik7cmV0dXJuIHRoaXMuX3JlcGxhY2UoMCx0LGUpLHRoaXN9LHVuc2hpZnRP
        YmplY3Q6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2luc2VydEF0KDAsZSks
        ZX0sdW5zaGlmdE9iamVjdHM6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX3Jl
        cGxhY2UoMCwwLGUpLHRoaXN9LHNsaWNlOmZ1bmN0aW9uKCl7dmFyIGU9dGhp
        cy50b0FycmF5KCk7cmV0dXJuIGUuc2xpY2UuYXBwbHkoZSxhcmd1bWVudHMp
        fSxhcnJhbmdlZENvbnRlbnRBcnJheVdpbGxDaGFuZ2U6ZnVuY3Rpb24oZSx0
        LHIsbil7dGhpcy5hcnJheUNvbnRlbnRXaWxsQ2hhbmdlKHQscixuKX0sYXJy
        YW5nZWRDb250ZW50QXJyYXlEaWRDaGFuZ2U6ZnVuY3Rpb24oZSx0LHIsbil7
        dGhpcy5hcnJheUNvbnRlbnREaWRDaGFuZ2UodCxyLG4pfSxpbml0OmZ1bmN0
        aW9uKCl7dGhpcy5fc3VwZXIoKSx0aGlzLl9zZXR1cENvbnRlbnQoKSx0aGlz
        Ll9zZXR1cEFycmFuZ2VkQ29udGVudCgpfSx3aWxsRGVzdHJveTpmdW5jdGlv
        bigpe3RoaXMuX3RlYXJkb3duQXJyYW5nZWRDb250ZW50KCksdGhpcy5fdGVh
        cmRvd25Db250ZW50KCl9fSl9KCksZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUs
        dCxyLGksbyl7dmFyIGEscz1yLl9vYmplY3RzO2ZvcihzfHwocz1yLl9vYmpl
        Y3RzPXt9KTstLW8+PWk7KXt2YXIgdT1lLm9iamVjdEF0KG8pO3UmJihFbWJl
        ci5hZGRCZWZvcmVPYnNlcnZlcih1LHQsciwiY29udGVudEtleVdpbGxDaGFu
        Z2UiKSxFbWJlci5hZGRPYnNlcnZlcih1LHQsciwiY29udGVudEtleURpZENo
        YW5nZSIpLGE9bih1KSxzW2FdfHwoc1thXT1bXSksc1thXS5wdXNoKG8pKX19
        ZnVuY3Rpb24gdChlLHQscixpLGEpe3ZhciBzPXIuX29iamVjdHM7c3x8KHM9
        ci5fb2JqZWN0cz17fSk7Zm9yKHZhciB1LGw7LS1hPj1pOyl7dmFyIGM9ZS5v
        YmplY3RBdChhKTtjJiYoRW1iZXIucmVtb3ZlQmVmb3JlT2JzZXJ2ZXIoYyx0
        LHIsImNvbnRlbnRLZXlXaWxsQ2hhbmdlIiksRW1iZXIucmVtb3ZlT2JzZXJ2
        ZXIoYyx0LHIsImNvbnRlbnRLZXlEaWRDaGFuZ2UiKSxsPW4oYyksdT1zW2xd
        LHVbby5jYWxsKHUsYSldPW51bGwpfX12YXIgcj0oRW1iZXIuc2V0LEVtYmVy
        LmdldCksbj1FbWJlci5ndWlkRm9yLGk9RW1iZXIuRW51bWVyYWJsZVV0aWxz
        LmZvckVhY2gsbz1FbWJlci5BcnJheVBvbHlmaWxscy5pbmRleE9mLGE9RW1i
        ZXIuT2JqZWN0LmV4dGVuZChFbWJlci5BcnJheSx7aW5pdDpmdW5jdGlvbihl
        LHQscil7dGhpcy5fc3VwZXIoKSx0aGlzLl9rZXlOYW1lPXQsdGhpcy5fb3du
        ZXI9cix0aGlzLl9jb250ZW50PWV9LG9iamVjdEF0OmZ1bmN0aW9uKGUpe3Zh
        ciB0PXRoaXMuX2NvbnRlbnQub2JqZWN0QXQoZSk7cmV0dXJuIHQmJnIodCx0
        aGlzLl9rZXlOYW1lKX0sbGVuZ3RoOkVtYmVyLmNvbXB1dGVkKGZ1bmN0aW9u
        KCl7dmFyIGU9dGhpcy5fY29udGVudDtyZXR1cm4gZT9yKGUsImxlbmd0aCIp
        OjB9KX0pLHM9L14uKzooYmVmb3JlfGNoYW5nZSkkLztFbWJlci5FYWNoUHJv
        eHk9RW1iZXIuT2JqZWN0LmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlKXt0aGlz
        Ll9zdXBlcigpLHRoaXMuX2NvbnRlbnQ9ZSxlLmFkZEFycmF5T2JzZXJ2ZXIo
        dGhpcyksaShFbWJlci53YXRjaGVkRXZlbnRzKHRoaXMpLGZ1bmN0aW9uKGUp
        e3RoaXMuZGlkQWRkTGlzdGVuZXIoZSl9LHRoaXMpfSx1bmtub3duUHJvcGVy
        dHk6ZnVuY3Rpb24oZSl7dmFyIHQ7cmV0dXJuIHQ9bmV3IGEodGhpcy5fY29u
        dGVudCxlLHRoaXMpLEVtYmVyLmRlZmluZVByb3BlcnR5KHRoaXMsZSxudWxs
        LHQpLHRoaXMuYmVnaW5PYnNlcnZpbmdDb250ZW50S2V5KGUpLHR9LGFycmF5
        V2lsbENoYW5nZTpmdW5jdGlvbihlLHIsbil7dmFyIGksbyxhPXRoaXMuX2tl
        eXM7bz1uPjA/cituOi0xLEVtYmVyLmJlZ2luUHJvcGVydHlDaGFuZ2VzKHRo
        aXMpO2ZvcihpIGluIGEpYS5oYXNPd25Qcm9wZXJ0eShpKSYmKG8+MCYmdChl
        LGksdGhpcyxyLG8pLEVtYmVyLnByb3BlcnR5V2lsbENoYW5nZSh0aGlzLGkp
        KTtFbWJlci5wcm9wZXJ0eVdpbGxDaGFuZ2UodGhpcy5fY29udGVudCwiQGVh
        Y2giKSxFbWJlci5lbmRQcm9wZXJ0eUNoYW5nZXModGhpcyl9LGFycmF5RGlk
        Q2hhbmdlOmZ1bmN0aW9uKHQscixuLGkpe3ZhciBvLGE9dGhpcy5fa2V5cztv
        PWk+MD9yK2k6LTEsRW1iZXIuY2hhbmdlUHJvcGVydGllcyhmdW5jdGlvbigp
        e2Zvcih2YXIgbiBpbiBhKWEuaGFzT3duUHJvcGVydHkobikmJihvPjAmJmUo
        dCxuLHRoaXMscixvKSxFbWJlci5wcm9wZXJ0eURpZENoYW5nZSh0aGlzLG4p
        KTtFbWJlci5wcm9wZXJ0eURpZENoYW5nZSh0aGlzLl9jb250ZW50LCJAZWFj
        aCIpfSx0aGlzKX0sZGlkQWRkTGlzdGVuZXI6ZnVuY3Rpb24oZSl7cy50ZXN0
        KGUpJiZ0aGlzLmJlZ2luT2JzZXJ2aW5nQ29udGVudEtleShlLnNsaWNlKDAs
        LTcpKX0sZGlkUmVtb3ZlTGlzdGVuZXI6ZnVuY3Rpb24oZSl7cy50ZXN0KGUp
        JiZ0aGlzLnN0b3BPYnNlcnZpbmdDb250ZW50S2V5KGUuc2xpY2UoMCwtNykp
        fSxiZWdpbk9ic2VydmluZ0NvbnRlbnRLZXk6ZnVuY3Rpb24odCl7dmFyIG49
        dGhpcy5fa2V5cztpZihufHwobj10aGlzLl9rZXlzPXt9KSxuW3RdKW5bdF0r
        KztlbHNle25bdF09MTt2YXIgaT10aGlzLl9jb250ZW50LG89cihpLCJsZW5n
        dGgiKTtlKGksdCx0aGlzLDAsbyl9fSxzdG9wT2JzZXJ2aW5nQ29udGVudEtl
        eTpmdW5jdGlvbihlKXt2YXIgbj10aGlzLl9rZXlzO2lmKG4mJm5bZV0+MCYm
        LS1uW2VdPD0wKXt2YXIgaT10aGlzLl9jb250ZW50LG89cihpLCJsZW5ndGgi
        KTt0KGksZSx0aGlzLDAsbyl9fSxjb250ZW50S2V5V2lsbENoYW5nZTpmdW5j
        dGlvbihlLHQpe0VtYmVyLnByb3BlcnR5V2lsbENoYW5nZSh0aGlzLHQpfSxj
        b250ZW50S2V5RGlkQ2hhbmdlOmZ1bmN0aW9uKGUsdCl7RW1iZXIucHJvcGVy
        dHlEaWRDaGFuZ2UodGhpcyx0KX19KX0oKSxmdW5jdGlvbigpe3ZhciBlPUVt
        YmVyLmdldCx0PShFbWJlci5zZXQsRW1iZXIuRW51bWVyYWJsZVV0aWxzLl9y
        ZXBsYWNlKSxyPUVtYmVyLk1peGluLmNyZWF0ZShFbWJlci5NdXRhYmxlQXJy
        YXksRW1iZXIuT2JzZXJ2YWJsZSxFbWJlci5Db3B5YWJsZSx7Z2V0OmZ1bmN0
        aW9uKGUpe3JldHVybiJsZW5ndGgiPT09ZT90aGlzLmxlbmd0aDoibnVtYmVy
        Ij09dHlwZW9mIGU/dGhpc1tlXTp0aGlzLl9zdXBlcihlKX0sb2JqZWN0QXQ6
        ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXNbZV19LHJlcGxhY2U6ZnVuY3Rpb24o
        cixuLGkpe2lmKHRoaXMuaXNGcm96ZW4pdGhyb3cgRW1iZXIuRlJPWkVOX0VS
        Uk9SO3ZhciBvPWk/ZShpLCJsZW5ndGgiKTowO3JldHVybiB0aGlzLmFycmF5
        Q29udGVudFdpbGxDaGFuZ2UocixuLG8pLDA9PT1vP3RoaXMuc3BsaWNlKHIs
        bik6dCh0aGlzLHIsbixpKSx0aGlzLmFycmF5Q29udGVudERpZENoYW5nZShy
        LG4sbyksdGhpc30sdW5rbm93blByb3BlcnR5OmZ1bmN0aW9uKGUsdCl7dmFy
        IHI7cmV0dXJuIHZvaWQgMCE9PXQmJnZvaWQgMD09PXImJihyPXRoaXNbZV09
        dCkscn0saW5kZXhPZjpmdW5jdGlvbihlLHQpe3ZhciByLG49dGhpcy5sZW5n
        dGg7Zm9yKHQ9dm9pZCAwPT09dD8wOjA+dD9NYXRoLmNlaWwodCk6TWF0aC5m
        bG9vcih0KSwwPnQmJih0Kz1uKSxyPXQ7bj5yO3IrKylpZih0aGlzW3JdPT09
        ZSlyZXR1cm4gcjtyZXR1cm4tMX0sbGFzdEluZGV4T2Y6ZnVuY3Rpb24oZSx0
        KXt2YXIgcixuPXRoaXMubGVuZ3RoO2Zvcih0PXZvaWQgMD09PXQ/bi0xOjA+
        dD9NYXRoLmNlaWwodCk6TWF0aC5mbG9vcih0KSwwPnQmJih0Kz1uKSxyPXQ7
        cj49MDtyLS0paWYodGhpc1tyXT09PWUpcmV0dXJuIHI7cmV0dXJuLTF9LGNv
        cHk6ZnVuY3Rpb24oZSl7cmV0dXJuIGU/dGhpcy5tYXAoZnVuY3Rpb24oZSl7
        cmV0dXJuIEVtYmVyLmNvcHkoZSwhMCl9KTp0aGlzLnNsaWNlKCl9fSksbj1b
        Imxlbmd0aCJdO0VtYmVyLkVudW1lcmFibGVVdGlscy5mb3JFYWNoKHIua2V5
        cygpLGZ1bmN0aW9uKGUpe0FycmF5LnByb3RvdHlwZVtlXSYmbi5wdXNoKGUp
        fSksbi5sZW5ndGg+MCYmKHI9ci53aXRob3V0LmFwcGx5KHIsbikpLEVtYmVy
        Lk5hdGl2ZUFycmF5PXIsRW1iZXIuQT1mdW5jdGlvbihlKXtyZXR1cm4gdm9p
        ZCAwPT09ZSYmKGU9W10pLEVtYmVyLkFycmF5LmRldGVjdChlKT9lOkVtYmVy
        Lk5hdGl2ZUFycmF5LmFwcGx5KGUpfSxFbWJlci5OYXRpdmVBcnJheS5hY3Rp
        dmF0ZT1mdW5jdGlvbigpe3IuYXBwbHkoQXJyYXkucHJvdG90eXBlKSxFbWJl
        ci5BPWZ1bmN0aW9uKGUpe3JldHVybiBlfHxbXX19LChFbWJlci5FWFRFTkRf
        UFJPVE9UWVBFUz09PSEwfHxFbWJlci5FWFRFTkRfUFJPVE9UWVBFUy5BcnJh
        eSkmJkVtYmVyLk5hdGl2ZUFycmF5LmFjdGl2YXRlKCl9KCksZnVuY3Rpb24o
        KXt2YXIgZT1FbWJlci5nZXQsdD1FbWJlci5zZXQscj1FbWJlci5ndWlkRm9y
        LG49RW1iZXIuaXNOb25lLGk9RW1iZXIuU3RyaW5nLmZtdDtFbWJlci5TZXQ9
        RW1iZXIuQ29yZU9iamVjdC5leHRlbmQoRW1iZXIuTXV0YWJsZUVudW1lcmFi
        bGUsRW1iZXIuQ29weWFibGUsRW1iZXIuRnJlZXphYmxlLHtsZW5ndGg6MCxj
        bGVhcjpmdW5jdGlvbigpe2lmKHRoaXMuaXNGcm96ZW4pdGhyb3cgbmV3IEVt
        YmVyLkVycm9yKEVtYmVyLkZST1pFTl9FUlJPUik7dmFyIG49ZSh0aGlzLCJs
        ZW5ndGgiKTtpZigwPT09bilyZXR1cm4gdGhpczt2YXIgaTt0aGlzLmVudW1l
        cmFibGVDb250ZW50V2lsbENoYW5nZShuLDApLEVtYmVyLnByb3BlcnR5V2ls
        bENoYW5nZSh0aGlzLCJmaXJzdE9iamVjdCIpLEVtYmVyLnByb3BlcnR5V2ls
        bENoYW5nZSh0aGlzLCJsYXN0T2JqZWN0Iik7Zm9yKHZhciBvPTA7bj5vO28r
        KylpPXIodGhpc1tvXSksZGVsZXRlIHRoaXNbaV0sZGVsZXRlIHRoaXNbb107
        cmV0dXJuIHQodGhpcywibGVuZ3RoIiwwKSxFbWJlci5wcm9wZXJ0eURpZENo
        YW5nZSh0aGlzLCJmaXJzdE9iamVjdCIpLEVtYmVyLnByb3BlcnR5RGlkQ2hh
        bmdlKHRoaXMsImxhc3RPYmplY3QiKSx0aGlzLmVudW1lcmFibGVDb250ZW50
        RGlkQ2hhbmdlKG4sMCksdGhpc30saXNFcXVhbDpmdW5jdGlvbih0KXtpZigh
        RW1iZXIuRW51bWVyYWJsZS5kZXRlY3QodCkpcmV0dXJuITE7dmFyIHI9ZSh0
        aGlzLCJsZW5ndGgiKTtpZihlKHQsImxlbmd0aCIpIT09cilyZXR1cm4hMTtm
        b3IoOy0tcj49MDspaWYoIXQuY29udGFpbnModGhpc1tyXSkpcmV0dXJuITE7
        cmV0dXJuITB9LGFkZDpFbWJlci5hbGlhc01ldGhvZCgiYWRkT2JqZWN0Iiks
        cmVtb3ZlOkVtYmVyLmFsaWFzTWV0aG9kKCJyZW1vdmVPYmplY3QiKSxwb3A6
        ZnVuY3Rpb24oKXtpZihlKHRoaXMsImlzRnJvemVuIikpdGhyb3cgbmV3IEVt
        YmVyLkVycm9yKEVtYmVyLkZST1pFTl9FUlJPUik7dmFyIHQ9dGhpcy5sZW5n
        dGg+MD90aGlzW3RoaXMubGVuZ3RoLTFdOm51bGw7cmV0dXJuIHRoaXMucmVt
        b3ZlKHQpLHR9LHB1c2g6RW1iZXIuYWxpYXNNZXRob2QoImFkZE9iamVjdCIp
        LHNoaWZ0OkVtYmVyLmFsaWFzTWV0aG9kKCJwb3AiKSx1bnNoaWZ0OkVtYmVy
        LmFsaWFzTWV0aG9kKCJwdXNoIiksYWRkRWFjaDpFbWJlci5hbGlhc01ldGhv
        ZCgiYWRkT2JqZWN0cyIpLHJlbW92ZUVhY2g6RW1iZXIuYWxpYXNNZXRob2Qo
        InJlbW92ZU9iamVjdHMiKSxpbml0OmZ1bmN0aW9uKGUpe3RoaXMuX3N1cGVy
        KCksZSYmdGhpcy5hZGRPYmplY3RzKGUpfSxuZXh0T2JqZWN0OmZ1bmN0aW9u
        KGUpe3JldHVybiB0aGlzW2VdfSxmaXJzdE9iamVjdDpFbWJlci5jb21wdXRl
        ZChmdW5jdGlvbigpe3JldHVybiB0aGlzLmxlbmd0aD4wP3RoaXNbMF06dm9p
        ZCAwfSksbGFzdE9iamVjdDpFbWJlci5jb21wdXRlZChmdW5jdGlvbigpe3Jl
        dHVybiB0aGlzLmxlbmd0aD4wP3RoaXNbdGhpcy5sZW5ndGgtMV06dm9pZCAw
        fSksYWRkT2JqZWN0OmZ1bmN0aW9uKGkpe2lmKGUodGhpcywiaXNGcm96ZW4i
        KSl0aHJvdyBuZXcgRW1iZXIuRXJyb3IoRW1iZXIuRlJPWkVOX0VSUk9SKTtp
        ZihuKGkpKXJldHVybiB0aGlzO3ZhciBvLGE9cihpKSxzPXRoaXNbYV0sdT1l
        KHRoaXMsImxlbmd0aCIpO3JldHVybiBzPj0wJiZ1PnMmJnRoaXNbc109PT1p
        P3RoaXM6KG89W2ldLHRoaXMuZW51bWVyYWJsZUNvbnRlbnRXaWxsQ2hhbmdl
        KG51bGwsbyksRW1iZXIucHJvcGVydHlXaWxsQ2hhbmdlKHRoaXMsImxhc3RP
        YmplY3QiKSx1PWUodGhpcywibGVuZ3RoIiksdGhpc1thXT11LHRoaXNbdV09
        aSx0KHRoaXMsImxlbmd0aCIsdSsxKSxFbWJlci5wcm9wZXJ0eURpZENoYW5n
        ZSh0aGlzLCJsYXN0T2JqZWN0IiksdGhpcy5lbnVtZXJhYmxlQ29udGVudERp
        ZENoYW5nZShudWxsLG8pLHRoaXMpfSxyZW1vdmVPYmplY3Q6ZnVuY3Rpb24o
        aSl7aWYoZSh0aGlzLCJpc0Zyb3plbiIpKXRocm93IG5ldyBFbWJlci5FcnJv
        cihFbWJlci5GUk9aRU5fRVJST1IpO2lmKG4oaSkpcmV0dXJuIHRoaXM7dmFy
        IG8sYSxzPXIoaSksdT10aGlzW3NdLGw9ZSh0aGlzLCJsZW5ndGgiKSxjPTA9
        PT11LGg9dT09PWwtMTtyZXR1cm4gdT49MCYmbD51JiZ0aGlzW3VdPT09aSYm
        KGE9W2ldLHRoaXMuZW51bWVyYWJsZUNvbnRlbnRXaWxsQ2hhbmdlKGEsbnVs
        bCksYyYmRW1iZXIucHJvcGVydHlXaWxsQ2hhbmdlKHRoaXMsImZpcnN0T2Jq
        ZWN0IiksaCYmRW1iZXIucHJvcGVydHlXaWxsQ2hhbmdlKHRoaXMsImxhc3RP
        YmplY3QiKSxsLTE+dSYmKG89dGhpc1tsLTFdLHRoaXNbdV09byx0aGlzW3Io
        byldPXUpLGRlbGV0ZSB0aGlzW3NdLGRlbGV0ZSB0aGlzW2wtMV0sdCh0aGlz
        LCJsZW5ndGgiLGwtMSksYyYmRW1iZXIucHJvcGVydHlEaWRDaGFuZ2UodGhp
        cywiZmlyc3RPYmplY3QiKSxoJiZFbWJlci5wcm9wZXJ0eURpZENoYW5nZSh0
        aGlzLCJsYXN0T2JqZWN0IiksdGhpcy5lbnVtZXJhYmxlQ29udGVudERpZENo
        YW5nZShhLG51bGwpKSx0aGlzfSxjb250YWluczpmdW5jdGlvbihlKXtyZXR1
        cm4gdGhpc1tyKGUpXT49MH0sY29weTpmdW5jdGlvbigpe3ZhciBuPXRoaXMu
        Y29uc3RydWN0b3IsaT1uZXcgbixvPWUodGhpcywibGVuZ3RoIik7Zm9yKHQo
        aSwibGVuZ3RoIixvKTstLW8+PTA7KWlbb109dGhpc1tvXSxpW3IodGhpc1tv
        XSldPW87cmV0dXJuIGl9LHRvU3RyaW5nOmZ1bmN0aW9uKCl7dmFyIGUsdD10
        aGlzLmxlbmd0aCxyPVtdO2ZvcihlPTA7dD5lO2UrKylyW2VdPXRoaXNbZV07
        cmV0dXJuIGkoIkVtYmVyLlNldDwlQD4iLFtyLmpvaW4oIiwiKV0pfX0pfSgp
        LGZ1bmN0aW9uKCl7dmFyIGU9RW1iZXIuRGVmZXJyZWRNaXhpbix0PShFbWJl
        ci5nZXQsRW1iZXIuT2JqZWN0LmV4dGVuZChlKSk7dC5yZW9wZW5DbGFzcyh7
        cHJvbWlzZTpmdW5jdGlvbihlLHIpe3ZhciBuPXQuY3JlYXRlKCk7cmV0dXJu
        IGUuY2FsbChyLG4pLG59fSksRW1iZXIuRGVmZXJyZWQ9dH0oKSxmdW5jdGlv
        bigpe3ZhciBlPUVtYmVyLkFycmF5UG9seWZpbGxzLmZvckVhY2gsdD1FbWJl
        ci5FTlYuRU1CRVJfTE9BRF9IT09LU3x8e30scj17fTtFbWJlci5vbkxvYWQ9
        ZnVuY3Rpb24oZSxuKXt2YXIgaTt0W2VdPXRbZV18fEVtYmVyLkEoKSx0W2Vd
        LnB1c2hPYmplY3QobiksKGk9cltlXSkmJm4oaSl9LEVtYmVyLnJ1bkxvYWRI
        b29rcz1mdW5jdGlvbihuLGkpe3Jbbl09aSx0W25dJiZlLmNhbGwodFtuXSxm
        dW5jdGlvbihlKXtlKGkpfSl9fSgpLGZ1bmN0aW9uKCl7RW1iZXIuZ2V0O0Vt
        YmVyLkNvbnRyb2xsZXJNaXhpbj1FbWJlci5NaXhpbi5jcmVhdGUoRW1iZXIu
        QWN0aW9uSGFuZGxlcix7aXNDb250cm9sbGVyOiEwLHRhcmdldDpudWxsLGNv
        bnRhaW5lcjpudWxsLHBhcmVudENvbnRyb2xsZXI6bnVsbCxzdG9yZTpudWxs
        LG1vZGVsOkVtYmVyLmNvbXB1dGVkLmFsaWFzKCJjb250ZW50IiksZGVwcmVj
        YXRlZFNlbmRIYW5kbGVzOmZ1bmN0aW9uKGUpe3JldHVybiEhdGhpc1tlXX0s
        ZGVwcmVjYXRlZFNlbmQ6ZnVuY3Rpb24oZSl7dmFyIHQ9W10uc2xpY2UuY2Fs
        bChhcmd1bWVudHMsMSk7dGhpc1tlXS5hcHBseSh0aGlzLHQpfX0pLEVtYmVy
        LkNvbnRyb2xsZXI9RW1iZXIuT2JqZWN0LmV4dGVuZChFbWJlci5Db250cm9s
        bGVyTWl4aW4pfSgpLGZ1bmN0aW9uKCl7dmFyIGU9RW1iZXIuZ2V0LHQ9KEVt
        YmVyLnNldCxFbWJlci5FbnVtZXJhYmxlVXRpbHMuZm9yRWFjaCk7RW1iZXIu
        U29ydGFibGVNaXhpbj1FbWJlci5NaXhpbi5jcmVhdGUoRW1iZXIuTXV0YWJs
        ZUVudW1lcmFibGUse3NvcnRQcm9wZXJ0aWVzOm51bGwsc29ydEFzY2VuZGlu
        ZzohMCxzb3J0RnVuY3Rpb246RW1iZXIuY29tcGFyZSxvcmRlckJ5OmZ1bmN0
        aW9uKHIsbil7dmFyIGk9MCxvPWUodGhpcywic29ydFByb3BlcnRpZXMiKSxh
        PWUodGhpcywic29ydEFzY2VuZGluZyIpLHM9ZSh0aGlzLCJzb3J0RnVuY3Rp
        b24iKTtyZXR1cm4gdChvLGZ1bmN0aW9uKHQpezA9PT1pJiYoaT1zKGUocix0
        KSxlKG4sdCkpLDA9PT1pfHxhfHwoaT0tMSppKSl9KSxpfSxkZXN0cm95OmZ1
        bmN0aW9uKCl7dmFyIHI9ZSh0aGlzLCJjb250ZW50Iiksbj1lKHRoaXMsInNv
        cnRQcm9wZXJ0aWVzIik7cmV0dXJuIHImJm4mJnQocixmdW5jdGlvbihlKXt0
        KG4sZnVuY3Rpb24odCl7RW1iZXIucmVtb3ZlT2JzZXJ2ZXIoZSx0LHRoaXMs
        ImNvbnRlbnRJdGVtU29ydFByb3BlcnR5RGlkQ2hhbmdlIil9LHRoaXMpfSx0
        aGlzKSx0aGlzLl9zdXBlcigpfSxpc1NvcnRlZDpFbWJlci5jb21wdXRlZC5i
        b29sKCJzb3J0UHJvcGVydGllcyIpLGFycmFuZ2VkQ29udGVudDpFbWJlci5j
        b21wdXRlZCgiY29udGVudCIsInNvcnRQcm9wZXJ0aWVzLkBlYWNoIixmdW5j
        dGlvbigpe3ZhciByPWUodGhpcywiY29udGVudCIpLG49ZSh0aGlzLCJpc1Nv
        cnRlZCIpLGk9ZSh0aGlzLCJzb3J0UHJvcGVydGllcyIpLG89dGhpcztyZXR1
        cm4gciYmbj8ocj1yLnNsaWNlKCksci5zb3J0KGZ1bmN0aW9uKGUsdCl7cmV0
        dXJuIG8ub3JkZXJCeShlLHQpfSksdChyLGZ1bmN0aW9uKGUpe3QoaSxmdW5j
        dGlvbih0KXtFbWJlci5hZGRPYnNlcnZlcihlLHQsdGhpcywiY29udGVudEl0
        ZW1Tb3J0UHJvcGVydHlEaWRDaGFuZ2UiKX0sdGhpcyl9LHRoaXMpLEVtYmVy
        LkEocikpOnJ9KSxfY29udGVudFdpbGxDaGFuZ2U6RW1iZXIuYmVmb3JlT2Jz
        ZXJ2ZXIoImNvbnRlbnQiLGZ1bmN0aW9uKCl7dmFyIHI9ZSh0aGlzLCJjb250
        ZW50Iiksbj1lKHRoaXMsInNvcnRQcm9wZXJ0aWVzIik7ciYmbiYmdChyLGZ1
        bmN0aW9uKGUpe3QobixmdW5jdGlvbih0KXtFbWJlci5yZW1vdmVPYnNlcnZl
        cihlLHQsdGhpcywiY29udGVudEl0ZW1Tb3J0UHJvcGVydHlEaWRDaGFuZ2Ui
        KX0sdGhpcyl9LHRoaXMpLHRoaXMuX3N1cGVyKCl9KSxzb3J0QXNjZW5kaW5n
        V2lsbENoYW5nZTpFbWJlci5iZWZvcmVPYnNlcnZlcigic29ydEFzY2VuZGlu
        ZyIsZnVuY3Rpb24oKXt0aGlzLl9sYXN0U29ydEFzY2VuZGluZz1lKHRoaXMs
        InNvcnRBc2NlbmRpbmciKX0pLHNvcnRBc2NlbmRpbmdEaWRDaGFuZ2U6RW1i
        ZXIub2JzZXJ2ZXIoInNvcnRBc2NlbmRpbmciLGZ1bmN0aW9uKCl7aWYoZSh0
        aGlzLCJzb3J0QXNjZW5kaW5nIikhPT10aGlzLl9sYXN0U29ydEFzY2VuZGlu
        Zyl7dmFyIHQ9ZSh0aGlzLCJhcnJhbmdlZENvbnRlbnQiKTt0LnJldmVyc2VP
        YmplY3RzKCl9fSksY29udGVudEFycmF5V2lsbENoYW5nZTpmdW5jdGlvbihy
        LG4saSxvKXt2YXIgYT1lKHRoaXMsImlzU29ydGVkIik7aWYoYSl7dmFyIHM9
        ZSh0aGlzLCJhcnJhbmdlZENvbnRlbnQiKSx1PXIuc2xpY2UobixuK2kpLGw9
        ZSh0aGlzLCJzb3J0UHJvcGVydGllcyIpO3QodSxmdW5jdGlvbihlKXtzLnJl
        bW92ZU9iamVjdChlKSx0KGwsZnVuY3Rpb24odCl7RW1iZXIucmVtb3ZlT2Jz
        ZXJ2ZXIoZSx0LHRoaXMsImNvbnRlbnRJdGVtU29ydFByb3BlcnR5RGlkQ2hh
        bmdlIil9LHRoaXMpfSx0aGlzKX1yZXR1cm4gdGhpcy5fc3VwZXIocixuLGks
        byl9LGNvbnRlbnRBcnJheURpZENoYW5nZTpmdW5jdGlvbihyLG4saSxvKXt2
        YXIgYT1lKHRoaXMsImlzU29ydGVkIikscz1lKHRoaXMsInNvcnRQcm9wZXJ0
        aWVzIik7aWYoYSl7dmFyIHU9ci5zbGljZShuLG4rbyk7dCh1LGZ1bmN0aW9u
        KGUpe3RoaXMuaW5zZXJ0SXRlbVNvcnRlZChlKSx0KHMsZnVuY3Rpb24odCl7
        RW1iZXIuYWRkT2JzZXJ2ZXIoZSx0LHRoaXMsImNvbnRlbnRJdGVtU29ydFBy
        b3BlcnR5RGlkQ2hhbmdlIil9LHRoaXMpfSx0aGlzKX1yZXR1cm4gdGhpcy5f
        c3VwZXIocixuLGksbyl9LGluc2VydEl0ZW1Tb3J0ZWQ6ZnVuY3Rpb24odCl7
        dmFyIHI9ZSh0aGlzLCJhcnJhbmdlZENvbnRlbnQiKSxuPWUociwibGVuZ3Ro
        IiksaT10aGlzLl9iaW5hcnlTZWFyY2godCwwLG4pO3IuaW5zZXJ0QXQoaSx0
        KX0sY29udGVudEl0ZW1Tb3J0UHJvcGVydHlEaWRDaGFuZ2U6ZnVuY3Rpb24o
        dCl7dmFyIHI9ZSh0aGlzLCJhcnJhbmdlZENvbnRlbnQiKSxuPXIuaW5kZXhP
        Zih0KSxpPXIub2JqZWN0QXQobi0xKSxvPXIub2JqZWN0QXQobisxKSxhPWkm
        JnRoaXMub3JkZXJCeSh0LGkpLHM9byYmdGhpcy5vcmRlckJ5KHQsbyk7KDA+
        YXx8cz4wKSYmKHIucmVtb3ZlT2JqZWN0KHQpLHRoaXMuaW5zZXJ0SXRlbVNv
        cnRlZCh0KSl9LF9iaW5hcnlTZWFyY2g6ZnVuY3Rpb24odCxyLG4pe3ZhciBp
        LG8sYSxzO3JldHVybiByPT09bj9yOihzPWUodGhpcywiYXJyYW5nZWRDb250
        ZW50IiksaT1yK01hdGguZmxvb3IoKG4tcikvMiksbz1zLm9iamVjdEF0KGkp
        LGE9dGhpcy5vcmRlckJ5KG8sdCksMD5hP3RoaXMuX2JpbmFyeVNlYXJjaCh0
        LGkrMSxuKTphPjA/dGhpcy5fYmluYXJ5U2VhcmNoKHQscixpKTppKX19KX0o
        KSxmdW5jdGlvbigpe3ZhciBlPUVtYmVyLmdldCx0PShFbWJlci5zZXQsRW1i
        ZXIuRW51bWVyYWJsZVV0aWxzLmZvckVhY2gpLHI9RW1iZXIuRW51bWVyYWJs
        ZVV0aWxzLnJlcGxhY2U7RW1iZXIuQXJyYXlDb250cm9sbGVyPUVtYmVyLkFy
        cmF5UHJveHkuZXh0ZW5kKEVtYmVyLkNvbnRyb2xsZXJNaXhpbixFbWJlci5T
        b3J0YWJsZU1peGluLHtpdGVtQ29udHJvbGxlcjpudWxsLGxvb2t1cEl0ZW1D
        b250cm9sbGVyOmZ1bmN0aW9uKCl7cmV0dXJuIGUodGhpcywiaXRlbUNvbnRy
        b2xsZXIiKX0sb2JqZWN0QXRDb250ZW50OmZ1bmN0aW9uKHQpe3ZhciByPWUo
        dGhpcywibGVuZ3RoIiksbj1lKHRoaXMsImFycmFuZ2VkQ29udGVudCIpLGk9
        biYmbi5vYmplY3RBdCh0KTtpZih0Pj0wJiZyPnQpe3ZhciBvPXRoaXMubG9v
        a3VwSXRlbUNvbnRyb2xsZXIoaSk7aWYobylyZXR1cm4gdGhpcy5jb250cm9s
        bGVyQXQodCxpLG8pfXJldHVybiBpfSxhcnJhbmdlZENvbnRlbnREaWRDaGFu
        Z2U6ZnVuY3Rpb24oKXt0aGlzLl9zdXBlcigpLHRoaXMuX3Jlc2V0U3ViQ29u
        dHJvbGxlcnMoKX0sYXJyYXlDb250ZW50RGlkQ2hhbmdlOmZ1bmN0aW9uKG4s
        aSxvKXt2YXIgYT1lKHRoaXMsIl9zdWJDb250cm9sbGVycyIpLHM9YS5zbGlj
        ZShuLG4raSk7dChzLGZ1bmN0aW9uKGUpe2UmJmUuZGVzdHJveSgpfSkscihh
        LG4saSxuZXcgQXJyYXkobykpLHRoaXMuX3N1cGVyKG4saSxvKX0saW5pdDpm
        dW5jdGlvbigpe3RoaXMuX3N1cGVyKCksdGhpcy5zZXQoIl9zdWJDb250cm9s
        bGVycyIsRW1iZXIuQSgpKX0sY29udGVudDpFbWJlci5jb21wdXRlZChmdW5j
        dGlvbigpe3JldHVybiBFbWJlci5BKCl9KSxfaXNWaXJ0dWFsOiExLGNvbnRy
        b2xsZXJBdDpmdW5jdGlvbih0LHIsbil7dmFyIGksbz1lKHRoaXMsImNvbnRh
        aW5lciIpLGE9ZSh0aGlzLCJfc3ViQ29udHJvbGxlcnMiKSxzPWFbdF07aWYo
        cylyZXR1cm4gcztpZihpPSJjb250cm9sbGVyOiIrbiwhby5oYXMoaSkpdGhy
        b3cgbmV3IEVtYmVyLkVycm9yKCdDb3VsZCBub3QgcmVzb2x2ZSBpdGVtQ29u
        dHJvbGxlcjogIicrbisnIicpO3ZhciB1O3JldHVybiB0aGlzLl9pc1ZpcnR1
        YWwmJih1PWUodGhpcywicGFyZW50Q29udHJvbGxlciIpKSx1PXV8fHRoaXMs
        cz1vLmxvb2t1cEZhY3RvcnkoaSkuY3JlYXRlKHt0YXJnZXQ6dGhpcyxwYXJl
        bnRDb250cm9sbGVyOnUsY29udGVudDpyfSksYVt0XT1zLHN9LF9zdWJDb250
        cm9sbGVyczpudWxsLF9yZXNldFN1YkNvbnRyb2xsZXJzOmZ1bmN0aW9uKCl7
        dmFyIHI9ZSh0aGlzLCJfc3ViQ29udHJvbGxlcnMiKTtyJiZ0KHIsZnVuY3Rp
        b24oZSl7ZSYmZS5kZXN0cm95KCl9KSx0aGlzLnNldCgiX3N1YkNvbnRyb2xs
        ZXJzIixFbWJlci5BKCkpfX0pfSgpLGZ1bmN0aW9uKCl7RW1iZXIuT2JqZWN0
        Q29udHJvbGxlcj1FbWJlci5PYmplY3RQcm94eS5leHRlbmQoRW1iZXIuQ29u
        dHJvbGxlck1peGluKX0oKSxmdW5jdGlvbigpe3ZhciBlPXRoaXMmJnRoaXMu
        alF1ZXJ5fHxFbWJlci5pbXBvcnRzJiZFbWJlci5pbXBvcnRzLmpRdWVyeTtl
        fHwiZnVuY3Rpb24iIT10eXBlb2Ygcnx8KGU9cigianF1ZXJ5IikpLEVtYmVy
        LiQ9ZX0oKSxmdW5jdGlvbigpe2lmKEVtYmVyLiQpe3ZhciBlPUVtYmVyLlN0
        cmluZy53KCJkcmFnc3RhcnQgZHJhZyBkcmFnZW50ZXIgZHJhZ2xlYXZlIGRy
        YWdvdmVyIGRyb3AgZHJhZ2VuZCIpO0VtYmVyLkVudW1lcmFibGVVdGlscy5m
        b3JFYWNoKGUsZnVuY3Rpb24oZSl7RW1iZXIuJC5ldmVudC5maXhIb29rc1tl
        XT17cHJvcHM6WyJkYXRhVHJhbnNmZXIiXX19KX19KCksZnVuY3Rpb24oKXtm
        dW5jdGlvbiBlKGUpe3ZhciB0PWUuc2hpZnRLZXl8fGUubWV0YUtleXx8ZS5h
        bHRLZXl8fGUuY3RybEtleSxyPWUud2hpY2g+MTtyZXR1cm4hdCYmIXJ9dmFy
        IHQ9InVuZGVmaW5lZCIhPXR5cGVvZiBkb2N1bWVudCYmZnVuY3Rpb24oKXt2
        YXIgZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTtyZXR1cm4gZS5p
        bm5lckhUTUw9IjxkaXY+PC9kaXY+IixlLmZpcnN0Q2hpbGQuaW5uZXJIVE1M
        PSI8c2NyaXB0Pjwvc2NyaXB0PiIsIiI9PT1lLmZpcnN0Q2hpbGQuaW5uZXJI
        VE1MCn0oKSxyPSJ1bmRlZmluZWQiIT10eXBlb2YgZG9jdW1lbnQmJmZ1bmN0
        aW9uKCl7dmFyIGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7cmV0
        dXJuIGUuaW5uZXJIVE1MPSJUZXN0OiA8c2NyaXB0IHR5cGU9J3RleHQveC1w
        bGFjZWhvbGRlcic+PC9zY3JpcHQ+VmFsdWUiLCJUZXN0OiI9PT1lLmNoaWxk
        Tm9kZXNbMF0ubm9kZVZhbHVlJiYiIFZhbHVlIj09PWUuY2hpbGROb2Rlc1sy
        XS5ub2RlVmFsdWV9KCksbj1mdW5jdGlvbihlLHQpe2lmKGUuZ2V0QXR0cmli
        dXRlKCJpZCIpPT09dClyZXR1cm4gZTt2YXIgcixpLG8sYT1lLmNoaWxkTm9k
        ZXMubGVuZ3RoO2ZvcihyPTA7YT5yO3IrKylpZihpPWUuY2hpbGROb2Rlc1ty
        XSxvPTE9PT1pLm5vZGVUeXBlJiZuKGksdCkpcmV0dXJuIG99LGk9ZnVuY3Rp
        b24oZSxpKXt0JiYoaT0iJnNoeTsiK2kpO3ZhciBvPVtdO2lmKHImJihpPWku
        cmVwbGFjZSgvKFxzKykoPHNjcmlwdCBpZD0nKFteJ10rKScpL2csZnVuY3Rp
        b24oZSx0LHIsbil7cmV0dXJuIG8ucHVzaChbbix0XSkscn0pKSxlLmlubmVy
        SFRNTD1pLG8ubGVuZ3RoPjApe3ZhciBhLHM9by5sZW5ndGg7Zm9yKGE9MDtz
        PmE7YSsrKXt2YXIgdT1uKGUsb1thXVswXSksbD1kb2N1bWVudC5jcmVhdGVU
        ZXh0Tm9kZShvW2FdWzFdKTt1LnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGws
        dSl9fWlmKHQpe2Zvcih2YXIgYz1lLmZpcnN0Q2hpbGQ7MT09PWMubm9kZVR5
        cGUmJiFjLm5vZGVOYW1lOyljPWMuZmlyc3RDaGlsZDszPT09Yy5ub2RlVHlw
        ZSYmIsKtIj09PWMubm9kZVZhbHVlLmNoYXJBdCgwKSYmKGMubm9kZVZhbHVl
        PWMubm9kZVZhbHVlLnNsaWNlKDEpKX19LG89e30sYT1mdW5jdGlvbihlKXtp
        Zih2b2lkIDAhPT1vW2VdKXJldHVybiBvW2VdO3ZhciB0PSEwO2lmKCJzZWxl
        Y3QiPT09ZS50b0xvd2VyQ2FzZSgpKXt2YXIgcj1kb2N1bWVudC5jcmVhdGVF
        bGVtZW50KCJzZWxlY3QiKTtpKHIsJzxvcHRpb24gdmFsdWU9InRlc3QiPlRl
        c3Q8L29wdGlvbj4nKSx0PTE9PT1yLm9wdGlvbnMubGVuZ3RofXJldHVybiBv
        W2VdPXQsdH0scz1mdW5jdGlvbihlLHQpe3ZhciByPWUudGFnTmFtZTtpZihh
        KHIpKWkoZSx0KTtlbHNle3ZhciBuPWUub3V0ZXJIVE1MfHwobmV3IFhNTFNl
        cmlhbGl6ZXIpLnNlcmlhbGl6ZVRvU3RyaW5nKGUpLG89bi5tYXRjaChuZXcg
        UmVnRXhwKCI8IityKyIoW14+XSopPiIsImkiKSlbMF0scz0iPC8iK3IrIj4i
        LHU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7Zm9yKGkodSxvK3Qr
        cyksZT11LmZpcnN0Q2hpbGQ7ZS50YWdOYW1lIT09cjspZT1lLm5leHRTaWJs
        aW5nfXJldHVybiBlfTtFbWJlci5WaWV3VXRpbHM9e3NldElubmVySFRNTDpz
        LGlzU2ltcGxlQ2xpY2s6ZX19KCksZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUp
        e3JldHVybiBlP24udGVzdChlKT9lLnJlcGxhY2UoaSwiIik6ZTplfWZ1bmN0
        aW9uIHQoZSl7dmFyIHQ9eyI8IjoiJmx0OyIsIj4iOiImZ3Q7IiwnIic6IiZx
        dW90OyIsIiciOiImI3gyNzsiLCJgIjoiJiN4NjA7In0scj1mdW5jdGlvbihl
        KXtyZXR1cm4gdFtlXXx8IiZhbXA7In0sbj1lLnRvU3RyaW5nKCk7cmV0dXJu
        IGEudGVzdChuKT9uLnJlcGxhY2UobyxyKTpufXZhciByPShFbWJlci5nZXQs
        RW1iZXIuc2V0LGZ1bmN0aW9uKCl7dGhpcy5zZWVuPXt9LHRoaXMubGlzdD1b
        XX0pO3IucHJvdG90eXBlPXthZGQ6ZnVuY3Rpb24oZSl7ZSBpbiB0aGlzLnNl
        ZW58fCh0aGlzLnNlZW5bZV09ITAsdGhpcy5saXN0LnB1c2goZSkpfSx0b0RP
        TTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmxpc3Quam9pbigiICIpfX07dmFy
        IG49L1teYS16QS1aMC05XC1dLyxpPS9bXmEtekEtWjAtOVwtXS9nLG89LyYo
        PyFcdys7KXxbPD4iJ2BdL2csYT0vWyY8PiInYF0vLHM9ZnVuY3Rpb24oKXt2
        YXIgZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKSx0PWRvY3VtZW50
        LmNyZWF0ZUVsZW1lbnQoImlucHV0Iik7cmV0dXJuIHQuc2V0QXR0cmlidXRl
        KCJuYW1lIiwiZm9vIiksZS5hcHBlbmRDaGlsZCh0KSwhIWUuaW5uZXJIVE1M
        Lm1hdGNoKCJmb28iKX0oKTtFbWJlci5SZW5kZXJCdWZmZXI9ZnVuY3Rpb24o
        ZSl7cmV0dXJuIG5ldyBFbWJlci5fUmVuZGVyQnVmZmVyKGUpfSxFbWJlci5f
        UmVuZGVyQnVmZmVyPWZ1bmN0aW9uKGUpe3RoaXMudGFnTmFtZXM9W2V8fG51
        bGxdLHRoaXMuYnVmZmVyPSIifSxFbWJlci5fUmVuZGVyQnVmZmVyLnByb3Rv
        dHlwZT17X2VsZW1lbnQ6bnVsbCxfaGFzRWxlbWVudDohMCxlbGVtZW50Q2xh
        c3NlczpudWxsLGNsYXNzZXM6bnVsbCxlbGVtZW50SWQ6bnVsbCxlbGVtZW50
        QXR0cmlidXRlczpudWxsLGVsZW1lbnRQcm9wZXJ0aWVzOm51bGwsZWxlbWVu
        dFRhZzpudWxsLGVsZW1lbnRTdHlsZTpudWxsLHBhcmVudEJ1ZmZlcjpudWxs
        LHB1c2g6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuYnVmZmVyKz1lLHRoaXN9
        LGFkZENsYXNzOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmVsZW1lbnRDbGFz
        c2VzPXRoaXMuZWxlbWVudENsYXNzZXN8fG5ldyByLHRoaXMuZWxlbWVudENs
        YXNzZXMuYWRkKGUpLHRoaXMuY2xhc3Nlcz10aGlzLmVsZW1lbnRDbGFzc2Vz
        Lmxpc3QsdGhpc30sc2V0Q2xhc3NlczpmdW5jdGlvbihlKXt0aGlzLmVsZW1l
        bnRDbGFzc2VzPW51bGw7dmFyIHQscj1lLmxlbmd0aDtmb3IodD0wO3I+dDt0
        KyspdGhpcy5hZGRDbGFzcyhlW3RdKX0saWQ6ZnVuY3Rpb24oZSl7cmV0dXJu
        IHRoaXMuZWxlbWVudElkPWUsdGhpc30sYXR0cjpmdW5jdGlvbihlLHQpe3Zh
        ciByPXRoaXMuZWxlbWVudEF0dHJpYnV0ZXM9dGhpcy5lbGVtZW50QXR0cmli
        dXRlc3x8e307cmV0dXJuIDE9PT1hcmd1bWVudHMubGVuZ3RoP3JbZV06KHJb
        ZV09dCx0aGlzKX0scmVtb3ZlQXR0cjpmdW5jdGlvbihlKXt2YXIgdD10aGlz
        LmVsZW1lbnRBdHRyaWJ1dGVzO3JldHVybiB0JiZkZWxldGUgdFtlXSx0aGlz
        fSxwcm9wOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcy5lbGVtZW50UHJvcGVy
        dGllcz10aGlzLmVsZW1lbnRQcm9wZXJ0aWVzfHx7fTtyZXR1cm4gMT09PWFy
        Z3VtZW50cy5sZW5ndGg/cltlXToocltlXT10LHRoaXMpfSxyZW1vdmVQcm9w
        OmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuZWxlbWVudFByb3BlcnRpZXM7cmV0
        dXJuIHQmJmRlbGV0ZSB0W2VdLHRoaXN9LHN0eWxlOmZ1bmN0aW9uKGUsdCl7
        cmV0dXJuIHRoaXMuZWxlbWVudFN0eWxlPXRoaXMuZWxlbWVudFN0eWxlfHx7
        fSx0aGlzLmVsZW1lbnRTdHlsZVtlXT10LHRoaXN9LGJlZ2luOmZ1bmN0aW9u
        KGUpe3JldHVybiB0aGlzLnRhZ05hbWVzLnB1c2goZXx8bnVsbCksdGhpc30s
        cHVzaE9wZW5pbmdUYWc6ZnVuY3Rpb24oKXt2YXIgcj10aGlzLmN1cnJlbnRU
        YWdOYW1lKCk7aWYocil7aWYodGhpcy5faGFzRWxlbWVudCYmIXRoaXMuX2Vs
        ZW1lbnQmJjA9PT10aGlzLmJ1ZmZlci5sZW5ndGgpcmV0dXJuIHRoaXMuX2Vs
        ZW1lbnQ9dGhpcy5nZW5lcmF0ZUVsZW1lbnQoKSx2b2lkIDA7dmFyIG4saSxv
        PXRoaXMuYnVmZmVyLGE9dGhpcy5lbGVtZW50SWQscz10aGlzLmNsYXNzZXMs
        dT10aGlzLmVsZW1lbnRBdHRyaWJ1dGVzLGw9dGhpcy5lbGVtZW50UHJvcGVy
        dGllcyxjPXRoaXMuZWxlbWVudFN0eWxlO2lmKG8rPSI8IitlKHIpLGEmJihv
        Kz0nIGlkPSInK3QoYSkrJyInLHRoaXMuZWxlbWVudElkPW51bGwpLHMmJihv
        Kz0nIGNsYXNzPSInK3Qocy5qb2luKCIgIikpKyciJyx0aGlzLmNsYXNzZXM9
        bnVsbCx0aGlzLmVsZW1lbnRDbGFzc2VzPW51bGwpLGMpe28rPScgc3R5bGU9
        Iic7Zm9yKGkgaW4gYyljLmhhc093blByb3BlcnR5KGkpJiYobys9aSsiOiIr
        dChjW2ldKSsiOyIpO28rPSciJyx0aGlzLmVsZW1lbnRTdHlsZT1udWxsfWlm
        KHUpe2ZvcihuIGluIHUpdS5oYXNPd25Qcm9wZXJ0eShuKSYmKG8rPSIgIitu
        Kyc9IicrdCh1W25dKSsnIicpO3RoaXMuZWxlbWVudEF0dHJpYnV0ZXM9bnVs
        bH1pZihsKXtmb3IoaSBpbiBsKWlmKGwuaGFzT3duUHJvcGVydHkoaSkpe3Zh
        ciBoPWxbaV07KGh8fCJudW1iZXIiPT10eXBlb2YgaCkmJihvKz1oPT09ITA/
        IiAiK2krJz0iJytpKyciJzoiICIraSsnPSInK3QobFtpXSkrJyInKX10aGlz
        LmVsZW1lbnRQcm9wZXJ0aWVzPW51bGx9bys9Ij4iLHRoaXMuYnVmZmVyPW99
        fSxwdXNoQ2xvc2luZ1RhZzpmdW5jdGlvbigpe3ZhciB0PXRoaXMudGFnTmFt
        ZXMucG9wKCk7dCYmKHRoaXMuYnVmZmVyKz0iPC8iK2UodCkrIj4iKX0sY3Vy
        cmVudFRhZ05hbWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50YWdOYW1lc1t0
        aGlzLnRhZ05hbWVzLmxlbmd0aC0xXX0sZ2VuZXJhdGVFbGVtZW50OmZ1bmN0
        aW9uKCl7dmFyIHIsbixpLG89dGhpcy50YWdOYW1lcy5wb3AoKSxhPXRoaXMu
        ZWxlbWVudElkLHU9dGhpcy5jbGFzc2VzLGw9dGhpcy5lbGVtZW50QXR0cmli
        dXRlcyxjPXRoaXMuZWxlbWVudFByb3BlcnRpZXMsaD10aGlzLmVsZW1lbnRT
        dHlsZSxtPSIiO2k9bCYmbC5uYW1lJiYhcz8iPCIrZShvKSsnIG5hbWU9Iicr
        dChsLm5hbWUpKyciPic6bzt2YXIgcD1kb2N1bWVudC5jcmVhdGVFbGVtZW50
        KGkpLGY9RW1iZXIuJChwKTtpZihhJiYoZi5hdHRyKCJpZCIsYSksdGhpcy5l
        bGVtZW50SWQ9bnVsbCksdSYmKGYuYXR0cigiY2xhc3MiLHUuam9pbigiICIp
        KSx0aGlzLmNsYXNzZXM9bnVsbCx0aGlzLmVsZW1lbnRDbGFzc2VzPW51bGwp
        LGgpe2ZvcihuIGluIGgpaC5oYXNPd25Qcm9wZXJ0eShuKSYmKG0rPW4rIjoi
        K2hbbl0rIjsiKTtmLmF0dHIoInN0eWxlIixtKSx0aGlzLmVsZW1lbnRTdHls
        ZT1udWxsfWlmKGwpe2ZvcihyIGluIGwpbC5oYXNPd25Qcm9wZXJ0eShyKSYm
        Zi5hdHRyKHIsbFtyXSk7dGhpcy5lbGVtZW50QXR0cmlidXRlcz1udWxsfWlm
        KGMpe2ZvcihuIGluIGMpYy5oYXNPd25Qcm9wZXJ0eShuKSYmZi5wcm9wKG4s
        Y1tuXSk7dGhpcy5lbGVtZW50UHJvcGVydGllcz1udWxsfXJldHVybiBwfSxl
        bGVtZW50OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5pbm5lclN0cmluZygpO3Jl
        dHVybiBlJiYodGhpcy5fZWxlbWVudD1FbWJlci5WaWV3VXRpbHMuc2V0SW5u
        ZXJIVE1MKHRoaXMuX2VsZW1lbnQsZSkpLHRoaXMuX2VsZW1lbnR9LHN0cmlu
        ZzpmdW5jdGlvbigpe2lmKHRoaXMuX2hhc0VsZW1lbnQmJnRoaXMuX2VsZW1l
        bnQpe3ZhciBlPXRoaXMuZWxlbWVudCgpLHQ9ZS5vdXRlckhUTUw7cmV0dXJu
        InVuZGVmaW5lZCI9PXR5cGVvZiB0P0VtYmVyLiQoIjxkaXYvPiIpLmFwcGVu
        ZChlKS5odG1sKCk6dH1yZXR1cm4gdGhpcy5pbm5lclN0cmluZygpfSxpbm5l
        clN0cmluZzpmdW5jdGlvbigpe3JldHVybiB0aGlzLmJ1ZmZlcn19fSgpLGZ1
        bmN0aW9uKCl7e3ZhciBlPUVtYmVyLmdldCx0PUVtYmVyLnNldDtFbWJlci5T
        dHJpbmcuZm10fUVtYmVyLkV2ZW50RGlzcGF0Y2hlcj1FbWJlci5PYmplY3Qu
        ZXh0ZW5kKHtldmVudHM6e3RvdWNoc3RhcnQ6InRvdWNoU3RhcnQiLHRvdWNo
        bW92ZToidG91Y2hNb3ZlIix0b3VjaGVuZDoidG91Y2hFbmQiLHRvdWNoY2Fu
        Y2VsOiJ0b3VjaENhbmNlbCIsa2V5ZG93bjoia2V5RG93biIsa2V5dXA6Imtl
        eVVwIixrZXlwcmVzczoia2V5UHJlc3MiLG1vdXNlZG93bjoibW91c2VEb3du
        Iixtb3VzZXVwOiJtb3VzZVVwIixjb250ZXh0bWVudToiY29udGV4dE1lbnUi
        LGNsaWNrOiJjbGljayIsZGJsY2xpY2s6ImRvdWJsZUNsaWNrIixtb3VzZW1v
        dmU6Im1vdXNlTW92ZSIsZm9jdXNpbjoiZm9jdXNJbiIsZm9jdXNvdXQ6ImZv
        Y3VzT3V0Iixtb3VzZWVudGVyOiJtb3VzZUVudGVyIixtb3VzZWxlYXZlOiJt
        b3VzZUxlYXZlIixzdWJtaXQ6InN1Ym1pdCIsaW5wdXQ6ImlucHV0IixjaGFu
        Z2U6ImNoYW5nZSIsZHJhZ3N0YXJ0OiJkcmFnU3RhcnQiLGRyYWc6ImRyYWci
        LGRyYWdlbnRlcjoiZHJhZ0VudGVyIixkcmFnbGVhdmU6ImRyYWdMZWF2ZSIs
        ZHJhZ292ZXI6ImRyYWdPdmVyIixkcm9wOiJkcm9wIixkcmFnZW5kOiJkcmFn
        RW5kIn0scm9vdEVsZW1lbnQ6ImJvZHkiLHNldHVwOmZ1bmN0aW9uKHIsbil7
        dmFyIGksbz1lKHRoaXMsImV2ZW50cyIpO0VtYmVyLiQuZXh0ZW5kKG8scnx8
        e30pLEVtYmVyLmlzTm9uZShuKXx8dCh0aGlzLCJyb290RWxlbWVudCIsbiks
        bj1FbWJlci4kKGUodGhpcywicm9vdEVsZW1lbnQiKSksbi5hZGRDbGFzcygi
        ZW1iZXItYXBwbGljYXRpb24iKTtmb3IoaSBpbiBvKW8uaGFzT3duUHJvcGVy
        dHkoaSkmJnRoaXMuc2V0dXBIYW5kbGVyKG4saSxvW2ldKX0sc2V0dXBIYW5k
        bGVyOmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj10aGlzO2Uub24odCsiLmVtYmVy
        IiwiLmVtYmVyLXZpZXciLGZ1bmN0aW9uKGUsdCl7dmFyIGk9RW1iZXIuVmll
        dy52aWV3c1t0aGlzLmlkXSxvPSEwLGE9bnVsbDtyZXR1cm4gYT1uLl9maW5k
        TmVhcmVzdEV2ZW50TWFuYWdlcihpLHIpLGEmJmEhPT10P289bi5fZGlzcGF0
        Y2hFdmVudChhLGUscixpKTppP289bi5fYnViYmxlRXZlbnQoaSxlLHIpOmUu
        c3RvcFByb3BhZ2F0aW9uKCksb30pLGUub24odCsiLmVtYmVyIiwiW2RhdGEt
        ZW1iZXItYWN0aW9uXSIsZnVuY3Rpb24oZSl7dmFyIHQ9RW1iZXIuJChlLmN1
        cnJlbnRUYXJnZXQpLmF0dHIoImRhdGEtZW1iZXItYWN0aW9uIiksbj1FbWJl
        ci5IYW5kbGViYXJzLkFjdGlvbkhlbHBlci5yZWdpc3RlcmVkQWN0aW9uc1t0
        XTtyZXR1cm4gbiYmbi5ldmVudE5hbWU9PT1yP24uaGFuZGxlcihlKTp2b2lk
        IDB9KX0sX2ZpbmROZWFyZXN0RXZlbnRNYW5hZ2VyOmZ1bmN0aW9uKHQscil7
        Zm9yKHZhciBuPW51bGw7dCYmKG49ZSh0LCJldmVudE1hbmFnZXIiKSwhbnx8
        IW5bcl0pOyl0PWUodCwicGFyZW50VmlldyIpO3JldHVybiBufSxfZGlzcGF0
        Y2hFdmVudDpmdW5jdGlvbihlLHQscixuKXt2YXIgaT0hMCxvPWVbcl07cmV0
        dXJuImZ1bmN0aW9uIj09PUVtYmVyLnR5cGVPZihvKT8oaT1FbWJlci5ydW4o
        ZSxvLHQsbiksdC5zdG9wUHJvcGFnYXRpb24oKSk6aT10aGlzLl9idWJibGVF
        dmVudChuLHQsciksaX0sX2J1YmJsZUV2ZW50OmZ1bmN0aW9uKGUsdCxyKXty
        ZXR1cm4gRW1iZXIucnVuKGUsZS5oYW5kbGVFdmVudCxyLHQpfSxkZXN0cm95
        OmZ1bmN0aW9uKCl7dmFyIHQ9ZSh0aGlzLCJyb290RWxlbWVudCIpO3JldHVy
        biBFbWJlci4kKHQpLm9mZigiLmVtYmVyIiwiKioiKS5yZW1vdmVDbGFzcygi
        ZW1iZXItYXBwbGljYXRpb24iKSx0aGlzLl9zdXBlcigpfX0pfSgpLGZ1bmN0
        aW9uKCl7dmFyIGU9RW1iZXIucnVuLnF1ZXVlcyx0PUVtYmVyLkFycmF5UG9s
        eWZpbGxzLmluZGV4T2Y7ZS5zcGxpY2UodC5jYWxsKGUsImFjdGlvbnMiKSsx
        LDAsInJlbmRlciIsImFmdGVyUmVuZGVyIil9KCksZnVuY3Rpb24oKXtmdW5j
        dGlvbiBlKGUpe2UuYnVmZmVyPW51bGx9ZnVuY3Rpb24gdCgpe0VtYmVyLnJ1
        bi5vbmNlKEVtYmVyLlZpZXcsIm5vdGlmeU11dGF0aW9uTGlzdGVuZXJzIil9
        dmFyIHI9e30sbj1FbWJlci5nZXQsaT1FbWJlci5zZXQsbz1FbWJlci5ndWlk
        Rm9yLGE9RW1iZXIuRW51bWVyYWJsZVV0aWxzLmZvckVhY2gscz1FbWJlci5F
        bnVtZXJhYmxlVXRpbHMuYWRkT2JqZWN0LHU9RW1iZXIubWV0YSxsPUVtYmVy
        LmRlZmluZVByb3BlcnR5LGM9RW1iZXIuY29tcHV0ZWQoZnVuY3Rpb24oKXt2
        YXIgZT10aGlzLl9jaGlsZFZpZXdzLHQ9RW1iZXIuQSgpLHI9dGhpcztyZXR1
        cm4gYShlLGZ1bmN0aW9uKGUpe3ZhciByO2UuaXNWaXJ0dWFsPyhyPW4oZSwi
        Y2hpbGRWaWV3cyIpKSYmdC5wdXNoT2JqZWN0cyhyKTp0LnB1c2goZSl9KSx0
        LnJlcGxhY2U9ZnVuY3Rpb24oZSx0LG4pe2lmKHIgaW5zdGFuY2VvZiBFbWJl
        ci5Db250YWluZXJWaWV3KXJldHVybiByLnJlcGxhY2UoZSx0LG4pO3Rocm93
        IG5ldyBFbWJlci5FcnJvcigiY2hpbGRWaWV3cyBpcyBpbW11dGFibGUiKX0s
        dH0pO0VtYmVyLlRFTVBMQVRFUz17fSxFbWJlci5Db3JlVmlldz1FbWJlci5P
        YmplY3QuZXh0ZW5kKEVtYmVyLkV2ZW50ZWQsRW1iZXIuQWN0aW9uSGFuZGxl
        cix7aXNWaWV3OiEwLHN0YXRlczpyLGluaXQ6ZnVuY3Rpb24oKXt0aGlzLl9z
        dXBlcigpLHRoaXMudHJhbnNpdGlvblRvKCJwcmVSZW5kZXIiKSx0aGlzLl9p
        c1Zpc2libGU9bih0aGlzLCJpc1Zpc2libGUiKX0scGFyZW50VmlldzpFbWJl
        ci5jb21wdXRlZCgiX3BhcmVudFZpZXciLGZ1bmN0aW9uKCl7dmFyIGU9dGhp
        cy5fcGFyZW50VmlldztyZXR1cm4gZSYmZS5pc1ZpcnR1YWw/bihlLCJwYXJl
        bnRWaWV3Iik6ZX0pLHN0YXRlOm51bGwsX3BhcmVudFZpZXc6bnVsbCxjb25j
        cmV0ZVZpZXc6RW1iZXIuY29tcHV0ZWQoInBhcmVudFZpZXciLGZ1bmN0aW9u
        KCl7cmV0dXJuIHRoaXMuaXNWaXJ0dWFsP24odGhpcywicGFyZW50VmlldyIp
        OnRoaXN9KSxpbnN0cnVtZW50TmFtZToiY29yZV92aWV3IixpbnN0cnVtZW50
        RGV0YWlsczpmdW5jdGlvbihlKXtlLm9iamVjdD10aGlzLnRvU3RyaW5nKCl9
        LHJlbmRlclRvQnVmZmVyOmZ1bmN0aW9uKGUsdCl7dmFyIHI9InJlbmRlci4i
        K3RoaXMuaW5zdHJ1bWVudE5hbWUsbj17fTtyZXR1cm4gdGhpcy5pbnN0cnVt
        ZW50RGV0YWlscyhuKSxFbWJlci5pbnN0cnVtZW50KHIsbixmdW5jdGlvbigp
        e3JldHVybiB0aGlzLl9yZW5kZXJUb0J1ZmZlcihlLHQpfSx0aGlzKX0sX3Jl
        bmRlclRvQnVmZmVyOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMudGFnTmFtZTso
        bnVsbD09PXR8fHZvaWQgMD09PXQpJiYodD0iZGl2Iik7dmFyIHI9dGhpcy5i
        dWZmZXI9ZSYmZS5iZWdpbih0KXx8RW1iZXIuUmVuZGVyQnVmZmVyKHQpO3Jl
        dHVybiB0aGlzLnRyYW5zaXRpb25UbygiaW5CdWZmZXIiLCExKSx0aGlzLmJl
        Zm9yZVJlbmRlcihyKSx0aGlzLnJlbmRlcihyKSx0aGlzLmFmdGVyUmVuZGVy
        KHIpLHJ9LHRyaWdnZXI6ZnVuY3Rpb24oZSl7dGhpcy5fc3VwZXIuYXBwbHko
        dGhpcyxhcmd1bWVudHMpO3ZhciB0PXRoaXNbZV07aWYodCl7dmFyIHIsbixp
        PVtdO2ZvcihyPTEsbj1hcmd1bWVudHMubGVuZ3RoO24+cjtyKyspaS5wdXNo
        KGFyZ3VtZW50c1tyXSk7cmV0dXJuIHQuYXBwbHkodGhpcyxpKX19LGRlcHJl
        Y2F0ZWRTZW5kSGFuZGxlczpmdW5jdGlvbihlKXtyZXR1cm4hIXRoaXNbZV19
        LGRlcHJlY2F0ZWRTZW5kOmZ1bmN0aW9uKGUpe3ZhciB0PVtdLnNsaWNlLmNh
        bGwoYXJndW1lbnRzLDEpO3RoaXNbZV0uYXBwbHkodGhpcyx0KX0saGFzOmZ1
        bmN0aW9uKGUpe3JldHVybiJmdW5jdGlvbiI9PT1FbWJlci50eXBlT2YodGhp
        c1tlXSl8fHRoaXMuX3N1cGVyKGUpfSxkZXN0cm95OmZ1bmN0aW9uKCl7dmFy
        IGU9dGhpcy5fcGFyZW50VmlldztpZih0aGlzLl9zdXBlcigpKXJldHVybiB0
        aGlzLnJlbW92ZWRGcm9tRE9NfHx0aGlzLmRlc3Ryb3lFbGVtZW50KCksZSYm
        ZS5yZW1vdmVDaGlsZCh0aGlzKSx0aGlzLnRyYW5zaXRpb25UbygiZGVzdHJv
        eWluZyIsITEpLHRoaXN9LGNsZWFyUmVuZGVyZWRDaGlsZHJlbjpFbWJlci5L
        LHRyaWdnZXJSZWN1cnNpdmVseTpFbWJlci5LLGludm9rZVJlY3Vyc2l2ZWx5
        OkVtYmVyLkssdHJhbnNpdGlvblRvOkVtYmVyLkssZGVzdHJveUVsZW1lbnQ6
        RW1iZXIuS30pO3ZhciBoPUVtYmVyLl9WaWV3Q29sbGVjdGlvbj1mdW5jdGlv
        bihlKXt2YXIgdD10aGlzLnZpZXdzPWV8fFtdO3RoaXMubGVuZ3RoPXQubGVu
        Z3RofTtoLnByb3RvdHlwZT17bGVuZ3RoOjAsdHJpZ2dlcjpmdW5jdGlvbihl
        KXtmb3IodmFyIHQscj10aGlzLnZpZXdzLG49MCxpPXIubGVuZ3RoO2k+bjtu
        KyspdD1yW25dLHQudHJpZ2dlciYmdC50cmlnZ2VyKGUpfSx0cmlnZ2VyUmVj
        dXJzaXZlbHk6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PXRoaXMudmlld3Mscj0w
        LG49dC5sZW5ndGg7bj5yO3IrKyl0W3JdLnRyaWdnZXJSZWN1cnNpdmVseShl
        KX0saW52b2tlUmVjdXJzaXZlbHk6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0LHI9
        dGhpcy52aWV3cyxuPTAsaT1yLmxlbmd0aDtpPm47bisrKXQ9cltuXSxlKHQp
        fSx0cmFuc2l0aW9uVG86ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHI9dGhpcy52
        aWV3cyxuPTAsaT1yLmxlbmd0aDtpPm47bisrKXJbbl0udHJhbnNpdGlvblRv
        KGUsdCl9LHB1c2g6ZnVuY3Rpb24oKXt0aGlzLmxlbmd0aCs9YXJndW1lbnRz
        Lmxlbmd0aDt2YXIgZT10aGlzLnZpZXdzO3JldHVybiBlLnB1c2guYXBwbHko
        ZSxhcmd1bWVudHMpfSxvYmplY3RBdDpmdW5jdGlvbihlKXtyZXR1cm4gdGhp
        cy52aWV3c1tlXX0sZm9yRWFjaDpmdW5jdGlvbihlKXt2YXIgdD10aGlzLnZp
        ZXdzO3JldHVybiBhKHQsZSl9LGNsZWFyOmZ1bmN0aW9uKCl7dGhpcy5sZW5n
        dGg9MCx0aGlzLnZpZXdzLmxlbmd0aD0wfX07dmFyIG09W107RW1iZXIuVmll
        dz1FbWJlci5Db3JlVmlldy5leHRlbmQoe2NvbmNhdGVuYXRlZFByb3BlcnRp
        ZXM6WyJjbGFzc05hbWVzIiwiY2xhc3NOYW1lQmluZGluZ3MiLCJhdHRyaWJ1
        dGVCaW5kaW5ncyJdLGlzVmlldzohMCx0ZW1wbGF0ZU5hbWU6bnVsbCxsYXlv
        dXROYW1lOm51bGwsdGVtcGxhdGU6RW1iZXIuY29tcHV0ZWQoInRlbXBsYXRl
        TmFtZSIsZnVuY3Rpb24oZSx0KXtpZih2b2lkIDAhPT10KXJldHVybiB0O3Zh
        ciByPW4odGhpcywidGVtcGxhdGVOYW1lIiksaT10aGlzLnRlbXBsYXRlRm9y
        TmFtZShyLCJ0ZW1wbGF0ZSIpO3JldHVybiBpfHxuKHRoaXMsImRlZmF1bHRU
        ZW1wbGF0ZSIpfSksY29udHJvbGxlcjpFbWJlci5jb21wdXRlZCgiX3BhcmVu
        dFZpZXciLGZ1bmN0aW9uKCl7dmFyIGU9bih0aGlzLCJfcGFyZW50VmlldyIp
        O3JldHVybiBlP24oZSwiY29udHJvbGxlciIpOm51bGx9KSxsYXlvdXQ6RW1i
        ZXIuY29tcHV0ZWQoZnVuY3Rpb24oKXt2YXIgZT1uKHRoaXMsImxheW91dE5h
        bWUiKSx0PXRoaXMudGVtcGxhdGVGb3JOYW1lKGUsImxheW91dCIpO3JldHVy
        biB0fHxuKHRoaXMsImRlZmF1bHRMYXlvdXQiKX0pLnByb3BlcnR5KCJsYXlv
        dXROYW1lIiksX3lpZWxkOmZ1bmN0aW9uKGUsdCl7dmFyIHI9bih0aGlzLCJ0
        ZW1wbGF0ZSIpO3ImJnIoZSx0KX0sdGVtcGxhdGVGb3JOYW1lOmZ1bmN0aW9u
        KGUpe2lmKGUpe3ZhciB0PXRoaXMuY29udGFpbmVyfHxFbWJlci5Db250YWlu
        ZXImJkVtYmVyLkNvbnRhaW5lci5kZWZhdWx0Q29udGFpbmVyO3JldHVybiB0
        JiZ0Lmxvb2t1cCgidGVtcGxhdGU6IitlKX19LGNvbnRleHQ6RW1iZXIuY29t
        cHV0ZWQoZnVuY3Rpb24oZSx0KXtyZXR1cm4gMj09PWFyZ3VtZW50cy5sZW5n
        dGg/KGkodGhpcywiX2NvbnRleHQiLHQpLHQpOm4odGhpcywiX2NvbnRleHQi
        KX0pLnZvbGF0aWxlKCksX2NvbnRleHQ6RW1iZXIuY29tcHV0ZWQoZnVuY3Rp
        b24oKXt2YXIgZSx0O3JldHVybih0PW4odGhpcywiY29udHJvbGxlciIpKT90
        OihlPXRoaXMuX3BhcmVudFZpZXcsZT9uKGUsIl9jb250ZXh0Iik6bnVsbCl9
        KSxfY29udGV4dERpZENoYW5nZTpFbWJlci5vYnNlcnZlcigiY29udGV4dCIs
        ZnVuY3Rpb24oKXt0aGlzLnJlcmVuZGVyKCl9KSxpc1Zpc2libGU6ITAsY2hp
        bGRWaWV3czpjLF9jaGlsZFZpZXdzOm0sX2NoaWxkVmlld3NXaWxsQ2hhbmdl
        OkVtYmVyLmJlZm9yZU9ic2VydmVyKCJjaGlsZFZpZXdzIixmdW5jdGlvbigp
        e2lmKHRoaXMuaXNWaXJ0dWFsKXt2YXIgZT1uKHRoaXMsInBhcmVudFZpZXci
        KTtlJiZFbWJlci5wcm9wZXJ0eVdpbGxDaGFuZ2UoZSwiY2hpbGRWaWV3cyIp
        fX0pLF9jaGlsZFZpZXdzRGlkQ2hhbmdlOkVtYmVyLm9ic2VydmVyKCJjaGls
        ZFZpZXdzIixmdW5jdGlvbigpe2lmKHRoaXMuaXNWaXJ0dWFsKXt2YXIgZT1u
        KHRoaXMsInBhcmVudFZpZXciKTtlJiZFbWJlci5wcm9wZXJ0eURpZENoYW5n
        ZShlLCJjaGlsZFZpZXdzIil9fSksbmVhcmVzdEluc3RhbmNlT2Y6ZnVuY3Rp
        b24oZSl7Zm9yKHZhciB0PW4odGhpcywicGFyZW50VmlldyIpO3Q7KXtpZih0
        IGluc3RhbmNlb2YgZSlyZXR1cm4gdDt0PW4odCwicGFyZW50VmlldyIpfX0s
        bmVhcmVzdE9mVHlwZTpmdW5jdGlvbihlKXtmb3IodmFyIHQ9bih0aGlzLCJw
        YXJlbnRWaWV3Iikscj1lIGluc3RhbmNlb2YgRW1iZXIuTWl4aW4/ZnVuY3Rp
        b24odCl7cmV0dXJuIGUuZGV0ZWN0KHQpfTpmdW5jdGlvbih0KXtyZXR1cm4g
        ZS5kZXRlY3QodC5jb25zdHJ1Y3Rvcil9O3Q7KXtpZihyKHQpKXJldHVybiB0
        O3Q9bih0LCJwYXJlbnRWaWV3Iil9fSxuZWFyZXN0V2l0aFByb3BlcnR5OmZ1
        bmN0aW9uKGUpe2Zvcih2YXIgdD1uKHRoaXMsInBhcmVudFZpZXciKTt0Oyl7
        aWYoZSBpbiB0KXJldHVybiB0O3Q9bih0LCJwYXJlbnRWaWV3Iil9fSxuZWFy
        ZXN0Q2hpbGRPZjpmdW5jdGlvbihlKXtmb3IodmFyIHQ9bih0aGlzLCJwYXJl
        bnRWaWV3Iik7dDspe2lmKG4odCwicGFyZW50VmlldyIpaW5zdGFuY2VvZiBl
        KXJldHVybiB0O3Q9bih0LCJwYXJlbnRWaWV3Iil9fSxfcGFyZW50Vmlld0Rp
        ZENoYW5nZTpFbWJlci5vYnNlcnZlcigiX3BhcmVudFZpZXciLGZ1bmN0aW9u
        KCl7dGhpcy5pc0Rlc3Ryb3lpbmd8fCh0aGlzLnRyaWdnZXIoInBhcmVudFZp
        ZXdEaWRDaGFuZ2UiKSxuKHRoaXMsInBhcmVudFZpZXcuY29udHJvbGxlciIp
        JiYhbih0aGlzLCJjb250cm9sbGVyIikmJnRoaXMubm90aWZ5UHJvcGVydHlD
        aGFuZ2UoImNvbnRyb2xsZXIiKSl9KSxfY29udHJvbGxlckRpZENoYW5nZTpF
        bWJlci5vYnNlcnZlcigiY29udHJvbGxlciIsZnVuY3Rpb24oKXt0aGlzLmlz
        RGVzdHJveWluZ3x8KHRoaXMucmVyZW5kZXIoKSx0aGlzLmZvckVhY2hDaGls
        ZFZpZXcoZnVuY3Rpb24oZSl7ZS5wcm9wZXJ0eURpZENoYW5nZSgiY29udHJv
        bGxlciIpfSkpfSksY2xvbmVLZXl3b3JkczpmdW5jdGlvbigpe3ZhciBlPW4o
        dGhpcywidGVtcGxhdGVEYXRhIiksdD1lP0VtYmVyLmNvcHkoZS5rZXl3b3Jk
        cyk6e307cmV0dXJuIGkodCwidmlldyIsbih0aGlzLCJjb25jcmV0ZVZpZXci
        KSksaSh0LCJfdmlldyIsdGhpcyksaSh0LCJjb250cm9sbGVyIixuKHRoaXMs
        ImNvbnRyb2xsZXIiKSksdH0scmVuZGVyOmZ1bmN0aW9uKGUpe3ZhciB0PW4o
        dGhpcywibGF5b3V0Iil8fG4odGhpcywidGVtcGxhdGUiKTtpZih0KXt2YXIg
        cixpPW4odGhpcywiY29udGV4dCIpLG89dGhpcy5jbG9uZUtleXdvcmRzKCks
        YT17dmlldzp0aGlzLGJ1ZmZlcjplLGlzUmVuZGVyRGF0YTohMCxrZXl3b3Jk
        czpvLGluc2lkZUdyb3VwOm4odGhpcywidGVtcGxhdGVEYXRhLmluc2lkZUdy
        b3VwIil9O3I9dChpLHtkYXRhOmF9KSx2b2lkIDAhPT1yJiZlLnB1c2gocil9
        fSxyZXJlbmRlcjpmdW5jdGlvbigpe3JldHVybiB0aGlzLmN1cnJlbnRTdGF0
        ZS5yZXJlbmRlcih0aGlzKX0sY2xlYXJSZW5kZXJlZENoaWxkcmVuOmZ1bmN0
        aW9uKCl7Zm9yKHZhciBlPXRoaXMubGVuZ3RoQmVmb3JlUmVuZGVyLHQ9dGhp
        cy5sZW5ndGhBZnRlclJlbmRlcixyPXRoaXMuX2NoaWxkVmlld3Msbj10LTE7
        bj49ZTtuLS0pcltuXSYmcltuXS5kZXN0cm95KCl9LF9hcHBseUNsYXNzTmFt
        ZUJpbmRpbmdzOmZ1bmN0aW9uKGUpe3ZhciB0LHIsbixpPXRoaXMuY2xhc3NO
        YW1lczthKGUsZnVuY3Rpb24oZSl7dmFyIG8sYT1FbWJlci5WaWV3Ll9wYXJz
        ZVByb3BlcnR5UGF0aChlKSx1PWZ1bmN0aW9uKCl7cj10aGlzLl9jbGFzc1N0
        cmluZ0ZvclByb3BlcnR5KGUpLHQ9dGhpcy4kKCksbyYmKHQucmVtb3ZlQ2xh
        c3MobyksaS5yZW1vdmVPYmplY3QobykpLHI/KHQuYWRkQ2xhc3Mociksbz1y
        KTpvPW51bGx9O249dGhpcy5fY2xhc3NTdHJpbmdGb3JQcm9wZXJ0eShlKSxu
        JiYocyhpLG4pLG89biksdGhpcy5yZWdpc3Rlck9ic2VydmVyKHRoaXMsYS5w
        YXRoLHUpLHRoaXMub25lKCJ3aWxsQ2xlYXJSZW5kZXIiLGZ1bmN0aW9uKCl7
        byYmKGkucmVtb3ZlT2JqZWN0KG8pLG89bnVsbCl9KX0sdGhpcyl9LF91bnNw
        ZWNpZmllZEF0dHJpYnV0ZUJpbmRpbmdzOm51bGwsX2FwcGx5QXR0cmlidXRl
        QmluZGluZ3M6ZnVuY3Rpb24oZSx0KXt2YXIgcixpPXRoaXMuX3Vuc3BlY2lm
        aWVkQXR0cmlidXRlQmluZGluZ3M9dGhpcy5fdW5zcGVjaWZpZWRBdHRyaWJ1
        dGVCaW5kaW5nc3x8e307YSh0LGZ1bmN0aW9uKHQpe3ZhciBvPXQuc3BsaXQo
        IjoiKSxhPW9bMF0scz1vWzFdfHxhO2EgaW4gdGhpcz8odGhpcy5fc2V0dXBB
        dHRyaWJ1dGVCaW5kaW5nT2JzZXJ2YXRpb24oYSxzKSxyPW4odGhpcyxhKSxF
        bWJlci5WaWV3LmFwcGx5QXR0cmlidXRlQmluZGluZ3MoZSxzLHIpKTppW2Fd
        PXN9LHRoaXMpLHRoaXMuc2V0VW5rbm93blByb3BlcnR5PXRoaXMuX3NldFVu
        a25vd25Qcm9wZXJ0eX0sX3NldHVwQXR0cmlidXRlQmluZGluZ09ic2VydmF0
        aW9uOmZ1bmN0aW9uKGUsdCl7dmFyIHIsaSxvPWZ1bmN0aW9uKCl7aT10aGlz
        LiQoKSxyPW4odGhpcyxlKSxFbWJlci5WaWV3LmFwcGx5QXR0cmlidXRlQmlu
        ZGluZ3MoaSx0LHIpfTt0aGlzLnJlZ2lzdGVyT2JzZXJ2ZXIodGhpcyxlLG8p
        fSxzZXRVbmtub3duUHJvcGVydHk6bnVsbCxfc2V0VW5rbm93blByb3BlcnR5
        OmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcy5fdW5zcGVjaWZpZWRBdHRyaWJ1
        dGVCaW5kaW5ncyYmdGhpcy5fdW5zcGVjaWZpZWRBdHRyaWJ1dGVCaW5kaW5n
        c1tlXTtyZXR1cm4gciYmdGhpcy5fc2V0dXBBdHRyaWJ1dGVCaW5kaW5nT2Jz
        ZXJ2YXRpb24oZSxyKSxsKHRoaXMsZSksaSh0aGlzLGUsdCl9LF9jbGFzc1N0
        cmluZ0ZvclByb3BlcnR5OmZ1bmN0aW9uKGUpe3ZhciB0PUVtYmVyLlZpZXcu
        X3BhcnNlUHJvcGVydHlQYXRoKGUpLHI9dC5wYXRoLGk9bih0aGlzLHIpO3Jl
        dHVybiB2b2lkIDA9PT1pJiZFbWJlci5pc0dsb2JhbFBhdGgocikmJihpPW4o
        RW1iZXIubG9va3VwLHIpKSxFbWJlci5WaWV3Ll9jbGFzc1N0cmluZ0ZvclZh
        bHVlKHIsaSx0LmNsYXNzTmFtZSx0LmZhbHN5Q2xhc3NOYW1lKX0sZWxlbWVu
        dDpFbWJlci5jb21wdXRlZCgiX3BhcmVudFZpZXciLGZ1bmN0aW9uKGUsdCl7
        cmV0dXJuIHZvaWQgMCE9PXQ/dGhpcy5jdXJyZW50U3RhdGUuc2V0RWxlbWVu
        dCh0aGlzLHQpOnRoaXMuY3VycmVudFN0YXRlLmdldEVsZW1lbnQodGhpcyl9
        KSwkOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmN1cnJlbnRTdGF0ZS4kKHRo
        aXMsZSl9LG11dGF0ZUNoaWxkVmlld3M6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0
        LHI9dGhpcy5fY2hpbGRWaWV3cyxuPXIubGVuZ3RoOy0tbj49MDspdD1yW25d
        LGUodGhpcyx0LG4pO3JldHVybiB0aGlzfSxmb3JFYWNoQ2hpbGRWaWV3OmZ1
        bmN0aW9uKGUpe3ZhciB0PXRoaXMuX2NoaWxkVmlld3M7aWYoIXQpcmV0dXJu
        IHRoaXM7dmFyIHIsbixpPXQubGVuZ3RoO2ZvcihuPTA7aT5uO24rKylyPXRb
        bl0sZShyKTtyZXR1cm4gdGhpc30sYXBwZW5kVG86ZnVuY3Rpb24oZSl7cmV0
        dXJuIHRoaXMuX2luc2VydEVsZW1lbnRMYXRlcihmdW5jdGlvbigpe3RoaXMu
        JCgpLmFwcGVuZFRvKGUpfSksdGhpc30scmVwbGFjZUluOmZ1bmN0aW9uKGUp
        e3JldHVybiB0aGlzLl9pbnNlcnRFbGVtZW50TGF0ZXIoZnVuY3Rpb24oKXtF
        bWJlci4kKGUpLmVtcHR5KCksdGhpcy4kKCkuYXBwZW5kVG8oZSl9KSx0aGlz
        fSxfaW5zZXJ0RWxlbWVudExhdGVyOmZ1bmN0aW9uKGUpe3RoaXMuX3NjaGVk
        dWxlZEluc2VydD1FbWJlci5ydW4uc2NoZWR1bGVPbmNlKCJyZW5kZXIiLHRo
        aXMsIl9pbnNlcnRFbGVtZW50IixlKX0sX2luc2VydEVsZW1lbnQ6ZnVuY3Rp
        b24oZSl7dGhpcy5fc2NoZWR1bGVkSW5zZXJ0PW51bGwsdGhpcy5jdXJyZW50
        U3RhdGUuaW5zZXJ0RWxlbWVudCh0aGlzLGUpfSxhcHBlbmQ6ZnVuY3Rpb24o
        KXtyZXR1cm4gdGhpcy5hcHBlbmRUbyhkb2N1bWVudC5ib2R5KX0scmVtb3Zl
        OmZ1bmN0aW9uKCl7dGhpcy5yZW1vdmVkRnJvbURPTXx8dGhpcy5kZXN0cm95
        RWxlbWVudCgpLHRoaXMuaW52b2tlUmVjdXJzaXZlbHkoZnVuY3Rpb24oZSl7
        ZS5jbGVhclJlbmRlcmVkQ2hpbGRyZW4mJmUuY2xlYXJSZW5kZXJlZENoaWxk
        cmVuKCl9KX0sZWxlbWVudElkOm51bGwsZmluZEVsZW1lbnRJblBhcmVudEVs
        ZW1lbnQ6ZnVuY3Rpb24oZSl7dmFyIHQ9IiMiK3RoaXMuZWxlbWVudElkO3Jl
        dHVybiBFbWJlci4kKHQpWzBdfHxFbWJlci4kKHQsZSlbMF19LGNyZWF0ZUVs
        ZW1lbnQ6ZnVuY3Rpb24oKXtpZihuKHRoaXMsImVsZW1lbnQiKSlyZXR1cm4g
        dGhpczt2YXIgZT10aGlzLnJlbmRlclRvQnVmZmVyKCk7cmV0dXJuIGkodGhp
        cywiZWxlbWVudCIsZS5lbGVtZW50KCkpLHRoaXN9LHdpbGxJbnNlcnRFbGVt
        ZW50OkVtYmVyLkssZGlkSW5zZXJ0RWxlbWVudDpFbWJlci5LLHdpbGxDbGVh
        clJlbmRlcjpFbWJlci5LLGludm9rZVJlY3Vyc2l2ZWx5OmZ1bmN0aW9uKGUs
        dCl7Zm9yKHZhciByLG4saSxvPXQ9PT0hMT90aGlzLl9jaGlsZFZpZXdzOlt0
        aGlzXTtvLmxlbmd0aDspe3I9by5zbGljZSgpLG89W107Zm9yKHZhciBhPTAs
        cz1yLmxlbmd0aDtzPmE7YSsrKW49clthXSxpPW4uX2NoaWxkVmlld3M/bi5f
        Y2hpbGRWaWV3cy5zbGljZSgwKTpudWxsLGUobiksaSYmby5wdXNoLmFwcGx5
        KG8saSl9fSx0cmlnZ2VyUmVjdXJzaXZlbHk6ZnVuY3Rpb24oZSl7Zm9yKHZh
        ciB0LHIsbixpPVt0aGlzXTtpLmxlbmd0aDspe3Q9aS5zbGljZSgpLGk9W107
        Zm9yKHZhciBvPTAsYT10Lmxlbmd0aDthPm87bysrKXI9dFtvXSxuPXIuX2No
        aWxkVmlld3M/ci5fY2hpbGRWaWV3cy5zbGljZSgwKTpudWxsLHIudHJpZ2dl
        ciYmci50cmlnZ2VyKGUpLG4mJmkucHVzaC5hcHBseShpLG4pfX0sdmlld0hp
        ZXJhcmNoeUNvbGxlY3Rpb246ZnVuY3Rpb24oKXtmb3IodmFyIGUsdD1uZXcg
        aChbdGhpc10pLHI9MDtyPHQubGVuZ3RoO3IrKyllPXQub2JqZWN0QXQociks
        ZS5fY2hpbGRWaWV3cyYmdC5wdXNoLmFwcGx5KHQsZS5fY2hpbGRWaWV3cyk7
        cmV0dXJuIHR9LGRlc3Ryb3lFbGVtZW50OmZ1bmN0aW9uKCl7cmV0dXJuIHRo
        aXMuY3VycmVudFN0YXRlLmRlc3Ryb3lFbGVtZW50KHRoaXMpfSx3aWxsRGVz
        dHJveUVsZW1lbnQ6RW1iZXIuSyxfbm90aWZ5V2lsbERlc3Ryb3lFbGVtZW50
        OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy52aWV3SGllcmFyY2h5Q29sbGVjdGlv
        bigpO3JldHVybiBlLnRyaWdnZXIoIndpbGxDbGVhclJlbmRlciIpLGUudHJp
        Z2dlcigid2lsbERlc3Ryb3lFbGVtZW50IiksZX0sX2VsZW1lbnREaWRDaGFu
        Z2U6RW1iZXIub2JzZXJ2ZXIoImVsZW1lbnQiLGZ1bmN0aW9uKCl7dGhpcy5m
        b3JFYWNoQ2hpbGRWaWV3KGZ1bmN0aW9uKGUpe2RlbGV0ZSB1KGUpLmNhY2hl
        LmVsZW1lbnR9KX0pLHBhcmVudFZpZXdEaWRDaGFuZ2U6RW1iZXIuSyxpbnN0
        cnVtZW50TmFtZToidmlldyIsaW5zdHJ1bWVudERldGFpbHM6ZnVuY3Rpb24o
        ZSl7ZS50ZW1wbGF0ZT1uKHRoaXMsInRlbXBsYXRlTmFtZSIpLHRoaXMuX3N1
        cGVyKGUpfSxfcmVuZGVyVG9CdWZmZXI6ZnVuY3Rpb24oZSx0KXt0aGlzLmxl
        bmd0aEJlZm9yZVJlbmRlcj10aGlzLl9jaGlsZFZpZXdzLmxlbmd0aDt2YXIg
        cj10aGlzLl9zdXBlcihlLHQpO3JldHVybiB0aGlzLmxlbmd0aEFmdGVyUmVu
        ZGVyPXRoaXMuX2NoaWxkVmlld3MubGVuZ3RoLHJ9LHJlbmRlclRvQnVmZmVy
        SWZOZWVkZWQ6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuY3VycmVudFN0YXRl
        LnJlbmRlclRvQnVmZmVySWZOZWVkZWQodGhpcyxlKX0sYmVmb3JlUmVuZGVy
        OmZ1bmN0aW9uKGUpe3RoaXMuYXBwbHlBdHRyaWJ1dGVzVG9CdWZmZXIoZSks
        ZS5wdXNoT3BlbmluZ1RhZygpfSxhZnRlclJlbmRlcjpmdW5jdGlvbihlKXtl
        LnB1c2hDbG9zaW5nVGFnKCl9LGFwcGx5QXR0cmlidXRlc1RvQnVmZmVyOmZ1
        bmN0aW9uKGUpe3ZhciB0PW4odGhpcywiY2xhc3NOYW1lQmluZGluZ3MiKTt0
        Lmxlbmd0aCYmdGhpcy5fYXBwbHlDbGFzc05hbWVCaW5kaW5ncyh0KTt2YXIg
        cj1uKHRoaXMsImF0dHJpYnV0ZUJpbmRpbmdzIik7ci5sZW5ndGgmJnRoaXMu
        X2FwcGx5QXR0cmlidXRlQmluZGluZ3MoZSxyKSxlLnNldENsYXNzZXModGhp
        cy5jbGFzc05hbWVzKSxlLmlkKHRoaXMuZWxlbWVudElkKTt2YXIgaT1uKHRo
        aXMsImFyaWFSb2xlIik7aSYmZS5hdHRyKCJyb2xlIixpKSxuKHRoaXMsImlz
        VmlzaWJsZSIpPT09ITEmJmUuc3R5bGUoImRpc3BsYXkiLCJub25lIil9LHRh
        Z05hbWU6bnVsbCxhcmlhUm9sZTpudWxsLGNsYXNzTmFtZXM6WyJlbWJlci12
        aWV3Il0sY2xhc3NOYW1lQmluZGluZ3M6bSxhdHRyaWJ1dGVCaW5kaW5nczpt
        LGluaXQ6ZnVuY3Rpb24oKXt0aGlzLmVsZW1lbnRJZD10aGlzLmVsZW1lbnRJ
        ZHx8byh0aGlzKSx0aGlzLl9zdXBlcigpLHRoaXMuX2NoaWxkVmlld3M9dGhp
        cy5fY2hpbGRWaWV3cy5zbGljZSgpLHRoaXMuY2xhc3NOYW1lQmluZGluZ3M9
        RW1iZXIuQSh0aGlzLmNsYXNzTmFtZUJpbmRpbmdzLnNsaWNlKCkpLHRoaXMu
        Y2xhc3NOYW1lcz1FbWJlci5BKHRoaXMuY2xhc3NOYW1lcy5zbGljZSgpKX0s
        YXBwZW5kQ2hpbGQ6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5jdXJyZW50
        U3RhdGUuYXBwZW5kQ2hpbGQodGhpcyxlLHQpfSxyZW1vdmVDaGlsZDpmdW5j
        dGlvbihlKXtpZighdGhpcy5pc0Rlc3Ryb3lpbmcpe2koZSwiX3BhcmVudFZp
        ZXciLG51bGwpO3ZhciB0PXRoaXMuX2NoaWxkVmlld3M7cmV0dXJuIEVtYmVy
        LkVudW1lcmFibGVVdGlscy5yZW1vdmVPYmplY3QodCxlKSx0aGlzLnByb3Bl
        cnR5RGlkQ2hhbmdlKCJjaGlsZFZpZXdzIiksdGhpc319LHJlbW92ZUFsbENo
        aWxkcmVuOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubXV0YXRlQ2hpbGRWaWV3
        cyhmdW5jdGlvbihlLHQpe2UucmVtb3ZlQ2hpbGQodCl9KX0sZGVzdHJveUFs
        bENoaWxkcmVuOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubXV0YXRlQ2hpbGRW
        aWV3cyhmdW5jdGlvbihlLHQpe3QuZGVzdHJveSgpfSl9LHJlbW92ZUZyb21Q
        YXJlbnQ6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLl9wYXJlbnRWaWV3O3JldHVy
        biB0aGlzLnJlbW92ZSgpLGUmJmUucmVtb3ZlQ2hpbGQodGhpcyksdGhpc30s
        ZGVzdHJveTpmdW5jdGlvbigpe3ZhciBlLHQscj10aGlzLl9jaGlsZFZpZXdz
        LGk9bih0aGlzLCJwYXJlbnRWaWV3Iiksbz10aGlzLnZpZXdOYW1lO2lmKHRo
        aXMuX3N1cGVyKCkpe2ZvcihlPXIubGVuZ3RoLHQ9ZS0xO3Q+PTA7dC0tKXJb
        dF0ucmVtb3ZlZEZyb21ET009ITA7Zm9yKG8mJmkmJmkuc2V0KG8sbnVsbCks
        ZT1yLmxlbmd0aCx0PWUtMTt0Pj0wO3QtLSlyW3RdLmRlc3Ryb3koKTtyZXR1
        cm4gdGhpc319LGNyZWF0ZUNoaWxkVmlldzpmdW5jdGlvbihlLHQpe2lmKCFl
        KXRocm93IG5ldyBUeXBlRXJyb3IoImNyZWF0ZUNoaWxkVmlld3MgZmlyc3Qg
        YXJndW1lbnQgbXVzdCBleGlzdCIpO2lmKGUuaXNWaWV3JiZlLl9wYXJlbnRW
        aWV3PT09dGhpcyYmZS5jb250YWluZXI9PT10aGlzLmNvbnRhaW5lcilyZXR1
        cm4gZTtpZih0PXR8fHt9LHQuX3BhcmVudFZpZXc9dGhpcyxFbWJlci5Db3Jl
        Vmlldy5kZXRlY3QoZSkpdC50ZW1wbGF0ZURhdGE9dC50ZW1wbGF0ZURhdGF8
        fG4odGhpcywidGVtcGxhdGVEYXRhIiksdC5jb250YWluZXI9dGhpcy5jb250
        YWluZXIsZT1lLmNyZWF0ZSh0KSxlLnZpZXdOYW1lJiZpKG4odGhpcywiY29u
        Y3JldGVWaWV3IiksZS52aWV3TmFtZSxlKTtlbHNlIGlmKCJzdHJpbmciPT10
        eXBlb2YgZSl7dmFyIHI9InZpZXc6IitlLG89dGhpcy5jb250YWluZXIubG9v
        a3VwRmFjdG9yeShyKTt0LnRlbXBsYXRlRGF0YT1uKHRoaXMsInRlbXBsYXRl
        RGF0YSIpLGU9by5jcmVhdGUodCl9ZWxzZSB0LmNvbnRhaW5lcj10aGlzLmNv
        bnRhaW5lcixuKGUsInRlbXBsYXRlRGF0YSIpfHwodC50ZW1wbGF0ZURhdGE9
        bih0aGlzLCJ0ZW1wbGF0ZURhdGEiKSksRW1iZXIuc2V0UHJvcGVydGllcyhl
        LHQpO3JldHVybiBlfSxiZWNhbWVWaXNpYmxlOkVtYmVyLkssYmVjYW1lSGlk
        ZGVuOkVtYmVyLkssX2lzVmlzaWJsZURpZENoYW5nZTpFbWJlci5vYnNlcnZl
        cigiaXNWaXNpYmxlIixmdW5jdGlvbigpe3RoaXMuX2lzVmlzaWJsZSE9PW4o
        dGhpcywiaXNWaXNpYmxlIikmJkVtYmVyLnJ1bi5zY2hlZHVsZU9uY2UoInJl
        bmRlciIsdGhpcyx0aGlzLl90b2dnbGVWaXNpYmlsaXR5KX0pLF90b2dnbGVW
        aXNpYmlsaXR5OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy4kKCk7aWYoZSl7dmFy
        IHQ9bih0aGlzLCJpc1Zpc2libGUiKTt0aGlzLl9pc1Zpc2libGUhPT10JiYo
        ZS50b2dnbGUodCksdGhpcy5faXNWaXNpYmxlPXQsdGhpcy5faXNBbmNlc3Rv
        ckhpZGRlbigpfHwodD90aGlzLl9ub3RpZnlCZWNhbWVWaXNpYmxlKCk6dGhp
        cy5fbm90aWZ5QmVjYW1lSGlkZGVuKCkpKX19LF9ub3RpZnlCZWNhbWVWaXNp
        YmxlOmZ1bmN0aW9uKCl7dGhpcy50cmlnZ2VyKCJiZWNhbWVWaXNpYmxlIiks
        dGhpcy5mb3JFYWNoQ2hpbGRWaWV3KGZ1bmN0aW9uKGUpe3ZhciB0PW4oZSwi
        aXNWaXNpYmxlIik7KHR8fG51bGw9PT10KSYmZS5fbm90aWZ5QmVjYW1lVmlz
        aWJsZSgpfSl9LF9ub3RpZnlCZWNhbWVIaWRkZW46ZnVuY3Rpb24oKXt0aGlz
        LnRyaWdnZXIoImJlY2FtZUhpZGRlbiIpLHRoaXMuZm9yRWFjaENoaWxkVmll
        dyhmdW5jdGlvbihlKXt2YXIgdD1uKGUsImlzVmlzaWJsZSIpOyh0fHxudWxs
        PT09dCkmJmUuX25vdGlmeUJlY2FtZUhpZGRlbigpfSl9LF9pc0FuY2VzdG9y
        SGlkZGVuOmZ1bmN0aW9uKCl7Zm9yKHZhciBlPW4odGhpcywicGFyZW50Vmll
        dyIpO2U7KXtpZihuKGUsImlzVmlzaWJsZSIpPT09ITEpcmV0dXJuITA7ZT1u
        KGUsInBhcmVudFZpZXciKX1yZXR1cm4hMX0sY2xlYXJCdWZmZXI6ZnVuY3Rp
        b24oKXt0aGlzLmludm9rZVJlY3Vyc2l2ZWx5KGUpfSx0cmFuc2l0aW9uVG86
        ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLmN1cnJlbnRTdGF0ZSxuPXRoaXMu
        Y3VycmVudFN0YXRlPXRoaXMuc3RhdGVzW2VdO3RoaXMuc3RhdGU9ZSxyJiZy
        LmV4aXQmJnIuZXhpdCh0aGlzKSxuLmVudGVyJiZuLmVudGVyKHRoaXMpLCJp
        bkRPTSI9PT1lJiZkZWxldGUgRW1iZXIubWV0YSh0aGlzKS5jYWNoZS5lbGVt
        ZW50LHQhPT0hMSYmdGhpcy5mb3JFYWNoQ2hpbGRWaWV3KGZ1bmN0aW9uKHQp
        e3QudHJhbnNpdGlvblRvKGUpfSl9LGhhbmRsZUV2ZW50OmZ1bmN0aW9uKGUs
        dCl7cmV0dXJuIHRoaXMuY3VycmVudFN0YXRlLmhhbmRsZUV2ZW50KHRoaXMs
        ZSx0KX0scmVnaXN0ZXJPYnNlcnZlcjpmdW5jdGlvbihlLHQscixuKXtpZihu
        fHwiZnVuY3Rpb24iIT10eXBlb2Ygcnx8KG49cixyPW51bGwpLGUmJiJvYmpl
        Y3QiPT10eXBlb2YgZSl7dmFyIGk9dGhpcyxvPWZ1bmN0aW9uKCl7aS5jdXJy
        ZW50U3RhdGUuaW52b2tlT2JzZXJ2ZXIodGhpcyxuKX0sYT1mdW5jdGlvbigp
        e0VtYmVyLnJ1bi5zY2hlZHVsZU9uY2UoInJlbmRlciIsdGhpcyxvKX07RW1i
        ZXIuYWRkT2JzZXJ2ZXIoZSx0LHIsYSksdGhpcy5vbmUoIndpbGxDbGVhclJl
        bmRlciIsZnVuY3Rpb24oKXtFbWJlci5yZW1vdmVPYnNlcnZlcihlLHQscixh
        KX0pfX19KTt2YXIgcD17cHJlcGVuZDpmdW5jdGlvbihlLHIpe2UuJCgpLnBy
        ZXBlbmQociksdCgpfSxhZnRlcjpmdW5jdGlvbihlLHIpe2UuJCgpLmFmdGVy
        KHIpLHQoKX0saHRtbDpmdW5jdGlvbihlLHIpe2UuJCgpLmh0bWwociksdCgp
        fSxyZXBsYWNlOmZ1bmN0aW9uKGUpe3ZhciByPW4oZSwiZWxlbWVudCIpO2ko
        ZSwiZWxlbWVudCIsbnVsbCksZS5faW5zZXJ0RWxlbWVudExhdGVyKGZ1bmN0
        aW9uKCl7RW1iZXIuJChyKS5yZXBsYWNlV2l0aChuKGUsImVsZW1lbnQiKSks
        dCgpfSl9LHJlbW92ZTpmdW5jdGlvbihlKXtlLiQoKS5yZW1vdmUoKSx0KCl9
        LGVtcHR5OmZ1bmN0aW9uKGUpe2UuJCgpLmVtcHR5KCksdCgpfX07RW1iZXIu
        Vmlldy5yZW9wZW4oe2RvbU1hbmFnZXI6cH0pLEVtYmVyLlZpZXcucmVvcGVu
        Q2xhc3Moe19wYXJzZVByb3BlcnR5UGF0aDpmdW5jdGlvbihlKXt2YXIgdCxy
        LG49ZS5zcGxpdCgiOiIpLGk9blswXSxvPSIiO3JldHVybiBuLmxlbmd0aD4x
        JiYodD1uWzFdLDM9PT1uLmxlbmd0aCYmKHI9blsyXSksbz0iOiIrdCxyJiYo
        bys9IjoiK3IpKSx7cGF0aDppLGNsYXNzTmFtZXM6byxjbGFzc05hbWU6IiI9
        PT10P3ZvaWQgMDp0LGZhbHN5Q2xhc3NOYW1lOnJ9fSxfY2xhc3NTdHJpbmdG
        b3JWYWx1ZTpmdW5jdGlvbihlLHQscixuKXtpZihyfHxuKXJldHVybiByJiZ0
        P3I6biYmIXQ/bjpudWxsO2lmKHQ9PT0hMCl7dmFyIGk9ZS5zcGxpdCgiLiIp
        O3JldHVybiBFbWJlci5TdHJpbmcuZGFzaGVyaXplKGlbaS5sZW5ndGgtMV0p
        fXJldHVybiB0IT09ITEmJm51bGwhPXQ/dDpudWxsfX0pO3ZhciBmPUVtYmVy
        Lk9iamVjdC5leHRlbmQoRW1iZXIuRXZlbnRlZCkuY3JlYXRlKCk7RW1iZXIu
        Vmlldy5hZGRNdXRhdGlvbkxpc3RlbmVyPWZ1bmN0aW9uKGUpe2Yub24oImNo
        YW5nZSIsZSl9LEVtYmVyLlZpZXcucmVtb3ZlTXV0YXRpb25MaXN0ZW5lcj1m
        dW5jdGlvbihlKXtmLm9mZigiY2hhbmdlIixlKX0sRW1iZXIuVmlldy5ub3Rp
        ZnlNdXRhdGlvbkxpc3RlbmVycz1mdW5jdGlvbigpe2YudHJpZ2dlcigiY2hh
        bmdlIil9LEVtYmVyLlZpZXcudmlld3M9e30sRW1iZXIuVmlldy5jaGlsZFZp
        ZXdzUHJvcGVydHk9YyxFbWJlci5WaWV3LmFwcGx5QXR0cmlidXRlQmluZGlu
        Z3M9ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPUVtYmVyLnR5cGVPZihyKTsidmFs
        dWUiPT09dHx8InN0cmluZyIhPT1uJiYoIm51bWJlciIhPT1ufHxpc05hTihy
        KSk/InZhbHVlIj09PXR8fCJib29sZWFuIj09PW4/RW1iZXIuaXNOb25lKHIp
        fHxyPT09ITE/KGUucmVtb3ZlQXR0cih0KSxlLnByb3AodCwiIikpOnIhPT1l
        LnByb3AodCkmJmUucHJvcCh0LHIpOnJ8fGUucmVtb3ZlQXR0cih0KTpyIT09
        ZS5hdHRyKHQpJiZlLmF0dHIodCxyKX0sRW1iZXIuVmlldy5zdGF0ZXM9cn0o
        KSxmdW5jdGlvbigpe3ZhciBlPShFbWJlci5nZXQsRW1iZXIuc2V0KTtFbWJl
        ci5WaWV3LnN0YXRlcy5fZGVmYXVsdD17YXBwZW5kQ2hpbGQ6ZnVuY3Rpb24o
        KXt0aHJvdyJZb3UgY2FuJ3QgdXNlIGFwcGVuZENoaWxkIG91dHNpZGUgb2Yg
        dGhlIHJlbmRlcmluZyBwcm9jZXNzIn0sJDpmdW5jdGlvbigpe3JldHVybiB2
        b2lkIDB9LGdldEVsZW1lbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbH0saGFu
        ZGxlRXZlbnQ6ZnVuY3Rpb24oKXtyZXR1cm4hMH0sZGVzdHJveUVsZW1lbnQ6
        ZnVuY3Rpb24odCl7cmV0dXJuIGUodCwiZWxlbWVudCIsbnVsbCksdC5fc2No
        ZWR1bGVkSW5zZXJ0JiYoRW1iZXIucnVuLmNhbmNlbCh0Ll9zY2hlZHVsZWRJ
        bnNlcnQpLHQuX3NjaGVkdWxlZEluc2VydD1udWxsKSx0fSxyZW5kZXJUb0J1
        ZmZlcklmTmVlZGVkOmZ1bmN0aW9uKCl7cmV0dXJuITF9LHJlcmVuZGVyOkVt
        YmVyLkssaW52b2tlT2JzZXJ2ZXI6RW1iZXIuS319KCksZnVuY3Rpb24oKXt2
        YXIgZT1FbWJlci5WaWV3LnN0YXRlcy5wcmVSZW5kZXI9RW1iZXIuY3JlYXRl
        KEVtYmVyLlZpZXcuc3RhdGVzLl9kZWZhdWx0KTtFbWJlci5tZXJnZShlLHtp
        bnNlcnRFbGVtZW50OmZ1bmN0aW9uKGUsdCl7ZS5jcmVhdGVFbGVtZW50KCk7
        dmFyIHI9ZS52aWV3SGllcmFyY2h5Q29sbGVjdGlvbigpO3IudHJpZ2dlcigi
        d2lsbEluc2VydEVsZW1lbnQiKSx0LmNhbGwoZSk7dmFyIG49ZS5nZXQoImVs
        ZW1lbnQiKTtkb2N1bWVudC5ib2R5LmNvbnRhaW5zKG4pJiYoci50cmFuc2l0
        aW9uVG8oImluRE9NIiwhMSksci50cmlnZ2VyKCJkaWRJbnNlcnRFbGVtZW50
        IikpfSxyZW5kZXJUb0J1ZmZlcklmTmVlZGVkOmZ1bmN0aW9uKGUsdCl7cmV0
        dXJuIGUucmVuZGVyVG9CdWZmZXIodCksITB9LGVtcHR5OkVtYmVyLkssc2V0
        RWxlbWVudDpmdW5jdGlvbihlLHQpe3JldHVybiBudWxsIT09dCYmZS50cmFu
        c2l0aW9uVG8oImhhc0VsZW1lbnQiKSx0fX0pfSgpLGZ1bmN0aW9uKCl7dmFy
        IGU9KEVtYmVyLmdldCxFbWJlci5zZXQsRW1iZXIuVmlldy5zdGF0ZXMuaW5C
        dWZmZXI9RW1iZXIuY3JlYXRlKEVtYmVyLlZpZXcuc3RhdGVzLl9kZWZhdWx0
        KSk7RW1iZXIubWVyZ2UoZSx7JDpmdW5jdGlvbihlKXtyZXR1cm4gZS5yZXJl
        bmRlcigpLEVtYmVyLiQoKX0scmVyZW5kZXI6ZnVuY3Rpb24oKXt0aHJvdyBu
        ZXcgRW1iZXIuRXJyb3IoIlNvbWV0aGluZyB5b3UgZGlkIGNhdXNlZCBhIHZp
        ZXcgdG8gcmUtcmVuZGVyIGFmdGVyIGl0IHJlbmRlcmVkIGJ1dCBiZWZvcmUg
        aXQgd2FzIGluc2VydGVkIGludG8gdGhlIERPTS4iKX0sYXBwZW5kQ2hpbGQ6
        ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUuYnVmZmVyLGk9ZS5fY2hpbGRWaWV3
        cztyZXR1cm4gdD1lLmNyZWF0ZUNoaWxkVmlldyh0LHIpLGkubGVuZ3RofHwo
        aT1lLl9jaGlsZFZpZXdzPWkuc2xpY2UoKSksaS5wdXNoKHQpLHQucmVuZGVy
        VG9CdWZmZXIobiksZS5wcm9wZXJ0eURpZENoYW5nZSgiY2hpbGRWaWV3cyIp
        LHR9LGRlc3Ryb3lFbGVtZW50OmZ1bmN0aW9uKGUpe2UuY2xlYXJCdWZmZXIo
        KTt2YXIgdD1lLl9ub3RpZnlXaWxsRGVzdHJveUVsZW1lbnQoKTtyZXR1cm4g
        dC50cmFuc2l0aW9uVG8oInByZVJlbmRlciIsITEpLGV9LGVtcHR5OmZ1bmN0
        aW9uKCl7fSxyZW5kZXJUb0J1ZmZlcklmTmVlZGVkOmZ1bmN0aW9uKCl7cmV0
        dXJuITF9LGluc2VydEVsZW1lbnQ6ZnVuY3Rpb24oKXt0aHJvdyJZb3UgY2Fu
        J3QgaW5zZXJ0IGFuIGVsZW1lbnQgdGhhdCBoYXMgYWxyZWFkeSBiZWVuIHJl
        bmRlcmVkIn0sc2V0RWxlbWVudDpmdW5jdGlvbihlLHQpe3JldHVybiBudWxs
        PT09dD9lLnRyYW5zaXRpb25UbygicHJlUmVuZGVyIik6KGUuY2xlYXJCdWZm
        ZXIoKSxlLnRyYW5zaXRpb25UbygiaGFzRWxlbWVudCIpKSx0fSxpbnZva2VP
        YnNlcnZlcjpmdW5jdGlvbihlLHQpe3QuY2FsbChlKX19KX0oKSxmdW5jdGlv
        bigpe3ZhciBlPUVtYmVyLmdldCx0PUVtYmVyLnNldCxyPUVtYmVyLlZpZXcu
        c3RhdGVzLmhhc0VsZW1lbnQ9RW1iZXIuY3JlYXRlKEVtYmVyLlZpZXcuc3Rh
        dGVzLl9kZWZhdWx0KTtFbWJlci5tZXJnZShyLHskOmZ1bmN0aW9uKHQscil7
        dmFyIG49ZSh0LCJlbGVtZW50Iik7cmV0dXJuIHI/RW1iZXIuJChyLG4pOkVt
        YmVyLiQobil9LGdldEVsZW1lbnQ6ZnVuY3Rpb24odCl7dmFyIHI9ZSh0LCJw
        YXJlbnRWaWV3Iik7cmV0dXJuIHImJihyPWUociwiZWxlbWVudCIpKSxyP3Qu
        ZmluZEVsZW1lbnRJblBhcmVudEVsZW1lbnQocik6RW1iZXIuJCgiIyIrZSh0
        LCJlbGVtZW50SWQiKSlbMF19LHNldEVsZW1lbnQ6ZnVuY3Rpb24oZSx0KXtp
        ZihudWxsIT09dCl0aHJvdyJZb3UgY2Fubm90IHNldCBhbiBlbGVtZW50IHRv
        IGEgbm9uLW51bGwgdmFsdWUgd2hlbiB0aGUgZWxlbWVudCBpcyBhbHJlYWR5
        IGluIHRoZSBET00uIjtyZXR1cm4gZS50cmFuc2l0aW9uVG8oInByZVJlbmRl
        ciIpLHR9LHJlcmVuZGVyOmZ1bmN0aW9uKGUpe3JldHVybiBlLnRyaWdnZXJS
        ZWN1cnNpdmVseSgid2lsbENsZWFyUmVuZGVyIiksZS5jbGVhclJlbmRlcmVk
        Q2hpbGRyZW4oKSxlLmRvbU1hbmFnZXIucmVwbGFjZShlKSxlfSxkZXN0cm95
        RWxlbWVudDpmdW5jdGlvbihlKXtyZXR1cm4gZS5fbm90aWZ5V2lsbERlc3Ry
        b3lFbGVtZW50KCksZS5kb21NYW5hZ2VyLnJlbW92ZShlKSx0KGUsImVsZW1l
        bnQiLG51bGwpLGUuX3NjaGVkdWxlZEluc2VydCYmKEVtYmVyLnJ1bi5jYW5j
        ZWwoZS5fc2NoZWR1bGVkSW5zZXJ0KSxlLl9zY2hlZHVsZWRJbnNlcnQ9bnVs
        bCksZX0sZW1wdHk6ZnVuY3Rpb24oZSl7dmFyIHQscixuPWUuX2NoaWxkVmll
        d3M7aWYobilmb3IodD1uLmxlbmd0aCxyPTA7dD5yO3IrKyluW3JdLl9ub3Rp
        ZnlXaWxsRGVzdHJveUVsZW1lbnQoKTtlLmRvbU1hbmFnZXIuZW1wdHkoZSl9
        LGhhbmRsZUV2ZW50OmZ1bmN0aW9uKGUsdCxyKXtyZXR1cm4gZS5oYXModCk/
        ZS50cmlnZ2VyKHQscik6ITB9LGludm9rZU9ic2VydmVyOmZ1bmN0aW9uKGUs
        dCl7dC5jYWxsKGUpfX0pfSgpLGZ1bmN0aW9uKCl7dmFyIGU9RW1iZXIuVmll
        dy5zdGF0ZXMuaGFzRWxlbWVudCx0PUVtYmVyLlZpZXcuc3RhdGVzLmluRE9N
        PUVtYmVyLmNyZWF0ZShlKTtFbWJlci5tZXJnZSh0LHtlbnRlcjpmdW5jdGlv
        bihlKXtlLmlzVmlydHVhbHx8KEVtYmVyLlZpZXcudmlld3NbZS5lbGVtZW50
        SWRdPWUpLGUuYWRkQmVmb3JlT2JzZXJ2ZXIoImVsZW1lbnRJZCIsZnVuY3Rp
        b24oKXt0aHJvdyBuZXcgRW1iZXIuRXJyb3IoIkNoYW5naW5nIGEgdmlldydz
        IGVsZW1lbnRJZCBhZnRlciBjcmVhdGlvbiBpcyBub3QgYWxsb3dlZCIpfSl9
        LGV4aXQ6ZnVuY3Rpb24oZSl7dGhpcy5pc1ZpcnR1YWx8fGRlbGV0ZSBFbWJl
        ci5WaWV3LnZpZXdzW2UuZWxlbWVudElkXX0saW5zZXJ0RWxlbWVudDpmdW5j
        dGlvbigpe3Rocm93IllvdSBjYW4ndCBpbnNlcnQgYW4gZWxlbWVudCBpbnRv
        IHRoZSBET00gdGhhdCBoYXMgYWxyZWFkeSBiZWVuIGluc2VydGVkIn19KX0o
        KSxmdW5jdGlvbigpe3ZhciBlPSJZb3UgY2FuJ3QgY2FsbCAlQCBvbiBhIHZp
        ZXcgYmVpbmcgZGVzdHJveWVkIix0PUVtYmVyLlN0cmluZy5mbXQscj1FbWJl
        ci5WaWV3LnN0YXRlcy5kZXN0cm95aW5nPUVtYmVyLmNyZWF0ZShFbWJlci5W
        aWV3LnN0YXRlcy5fZGVmYXVsdCk7RW1iZXIubWVyZ2Uocix7YXBwZW5kQ2hp
        bGQ6ZnVuY3Rpb24oKXt0aHJvdyB0KGUsWyJhcHBlbmRDaGlsZCJdKX0scmVy
        ZW5kZXI6ZnVuY3Rpb24oKXt0aHJvdyB0KGUsWyJyZXJlbmRlciJdKX0sZGVz
        dHJveUVsZW1lbnQ6ZnVuY3Rpb24oKXt0aHJvdyB0KGUsWyJkZXN0cm95RWxl
        bWVudCJdKX0sZW1wdHk6ZnVuY3Rpb24oKXt0aHJvdyB0KGUsWyJlbXB0eSJd
        KX0sc2V0RWxlbWVudDpmdW5jdGlvbigpe3Rocm93IHQoZSxbInNldCgnZWxl
        bWVudCcsIC4uLikiXSl9LHJlbmRlclRvQnVmZmVySWZOZWVkZWQ6ZnVuY3Rp
        b24oKXtyZXR1cm4hMX0saW5zZXJ0RWxlbWVudDpFbWJlci5LfSl9KCksZnVu
        Y3Rpb24oKXtFbWJlci5WaWV3LmNsb25lU3RhdGVzPWZ1bmN0aW9uKGUpe3Zh
        ciB0PXt9O3QuX2RlZmF1bHQ9e30sdC5wcmVSZW5kZXI9RW1iZXIuY3JlYXRl
        KHQuX2RlZmF1bHQpLHQuZGVzdHJveWluZz1FbWJlci5jcmVhdGUodC5fZGVm
        YXVsdCksdC5pbkJ1ZmZlcj1FbWJlci5jcmVhdGUodC5fZGVmYXVsdCksdC5o
        YXNFbGVtZW50PUVtYmVyLmNyZWF0ZSh0Ll9kZWZhdWx0KSx0LmluRE9NPUVt
        YmVyLmNyZWF0ZSh0Lmhhc0VsZW1lbnQpO2Zvcih2YXIgciBpbiBlKWUuaGFz
        T3duUHJvcGVydHkocikmJkVtYmVyLm1lcmdlKHRbcl0sZVtyXSk7cmV0dXJu
        IHR9fSgpLGZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQscixuKXt0LnRyaWdn
        ZXJSZWN1cnNpdmVseSgid2lsbEluc2VydEVsZW1lbnQiKSxyP3IuZG9tTWFu
        YWdlci5hZnRlcihyLG4uc3RyaW5nKCkpOmUuZG9tTWFuYWdlci5wcmVwZW5k
        KGUsbi5zdHJpbmcoKSksdC5mb3JFYWNoKGZ1bmN0aW9uKGUpe2UudHJhbnNp
        dGlvblRvKCJpbkRPTSIpLGUucHJvcGVydHlEaWRDaGFuZ2UoImVsZW1lbnQi
        KSxlLnRyaWdnZXJSZWN1cnNpdmVseSgiZGlkSW5zZXJ0RWxlbWVudCIpfSl9
        dmFyIHQ9RW1iZXIuVmlldy5jbG9uZVN0YXRlcyhFbWJlci5WaWV3LnN0YXRl
        cykscj1FbWJlci5nZXQsbj1FbWJlci5zZXQsaT1FbWJlci5FbnVtZXJhYmxl
        VXRpbHMuZm9yRWFjaCxvPUVtYmVyLl9WaWV3Q29sbGVjdGlvbjtFbWJlci5D
        b250YWluZXJWaWV3PUVtYmVyLlZpZXcuZXh0ZW5kKEVtYmVyLk11dGFibGVB
        cnJheSx7c3RhdGVzOnQsaW5pdDpmdW5jdGlvbigpe3RoaXMuX3N1cGVyKCk7
        dmFyIGU9cih0aGlzLCJjaGlsZFZpZXdzIik7RW1iZXIuZGVmaW5lUHJvcGVy
        dHkodGhpcywiY2hpbGRWaWV3cyIsRW1iZXIuVmlldy5jaGlsZFZpZXdzUHJv
        cGVydHkpO3ZhciB0PXRoaXMuX2NoaWxkVmlld3M7aShlLGZ1bmN0aW9uKGUs
        aSl7dmFyIG87InN0cmluZyI9PXR5cGVvZiBlPyhvPXIodGhpcyxlKSxvPXRo
        aXMuY3JlYXRlQ2hpbGRWaWV3KG8pLG4odGhpcyxlLG8pKTpvPXRoaXMuY3Jl
        YXRlQ2hpbGRWaWV3KGUpLHRbaV09b30sdGhpcyk7dmFyIG89cih0aGlzLCJj
        dXJyZW50VmlldyIpO28mJih0Lmxlbmd0aHx8KHQ9dGhpcy5fY2hpbGRWaWV3
        cz10aGlzLl9jaGlsZFZpZXdzLnNsaWNlKCkpLHQucHVzaCh0aGlzLmNyZWF0
        ZUNoaWxkVmlldyhvKSkpfSxyZXBsYWNlOmZ1bmN0aW9uKGUsdCxuKXt2YXIg
        aT1uP3IobiwibGVuZ3RoIik6MDtpZih0aGlzLmFycmF5Q29udGVudFdpbGxD
        aGFuZ2UoZSx0LGkpLHRoaXMuY2hpbGRWaWV3c1dpbGxDaGFuZ2UodGhpcy5f
        Y2hpbGRWaWV3cyxlLHQpLDA9PT1pKXRoaXMuX2NoaWxkVmlld3Muc3BsaWNl
        KGUsdCk7ZWxzZXt2YXIgbz1bZSx0XS5jb25jYXQobik7bi5sZW5ndGgmJiF0
        aGlzLl9jaGlsZFZpZXdzLmxlbmd0aCYmKHRoaXMuX2NoaWxkVmlld3M9dGhp
        cy5fY2hpbGRWaWV3cy5zbGljZSgpKSx0aGlzLl9jaGlsZFZpZXdzLnNwbGlj
        ZS5hcHBseSh0aGlzLl9jaGlsZFZpZXdzLG8pfXJldHVybiB0aGlzLmFycmF5
        Q29udGVudERpZENoYW5nZShlLHQsaSksdGhpcy5jaGlsZFZpZXdzRGlkQ2hh
        bmdlKHRoaXMuX2NoaWxkVmlld3MsZSx0LGkpLHRoaXN9LG9iamVjdEF0OmZ1
        bmN0aW9uKGUpe3JldHVybiB0aGlzLl9jaGlsZFZpZXdzW2VdfSxsZW5ndGg6
        RW1iZXIuY29tcHV0ZWQoZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY2hpbGRW
        aWV3cy5sZW5ndGh9KS52b2xhdGlsZSgpLHJlbmRlcjpmdW5jdGlvbihlKXt0
        aGlzLmZvckVhY2hDaGlsZFZpZXcoZnVuY3Rpb24odCl7dC5yZW5kZXJUb0J1
        ZmZlcihlKX0pfSxpbnN0cnVtZW50TmFtZToiY29udGFpbmVyIixjaGlsZFZp
        ZXdzV2lsbENoYW5nZTpmdW5jdGlvbihlLHQscil7aWYodGhpcy5wcm9wZXJ0
        eVdpbGxDaGFuZ2UoImNoaWxkVmlld3MiKSxyPjApe3ZhciBuPWUuc2xpY2Uo
        dCx0K3IpO3RoaXMuY3VycmVudFN0YXRlLmNoaWxkVmlld3NXaWxsQ2hhbmdl
        KHRoaXMsZSx0LHIpLHRoaXMuaW5pdGlhbGl6ZVZpZXdzKG4sbnVsbCxudWxs
        KX19LHJlbW92ZUNoaWxkOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnJlbW92
        ZU9iamVjdChlKSx0aGlzfSxjaGlsZFZpZXdzRGlkQ2hhbmdlOmZ1bmN0aW9u
        KGUsdCxuLGkpe2lmKGk+MCl7dmFyIG89ZS5zbGljZSh0LHQraSk7dGhpcy5p
        bml0aWFsaXplVmlld3Mobyx0aGlzLHIodGhpcywidGVtcGxhdGVEYXRhIikp
        LHRoaXMuY3VycmVudFN0YXRlLmNoaWxkVmlld3NEaWRDaGFuZ2UodGhpcyxl
        LHQsaSl9dGhpcy5wcm9wZXJ0eURpZENoYW5nZSgiY2hpbGRWaWV3cyIpfSxp
        bml0aWFsaXplVmlld3M6ZnVuY3Rpb24oZSx0LG8pe2koZSxmdW5jdGlvbihl
        KXtuKGUsIl9wYXJlbnRWaWV3Iix0KSwhZS5jb250YWluZXImJnQmJm4oZSwi
        Y29udGFpbmVyIix0LmNvbnRhaW5lcikscihlLCJ0ZW1wbGF0ZURhdGEiKXx8
        bihlLCJ0ZW1wbGF0ZURhdGEiLG8pfSl9LGN1cnJlbnRWaWV3Om51bGwsX2N1
        cnJlbnRWaWV3V2lsbENoYW5nZTpFbWJlci5iZWZvcmVPYnNlcnZlcigiY3Vy
        cmVudFZpZXciLGZ1bmN0aW9uKCl7dmFyIGU9cih0aGlzLCJjdXJyZW50Vmll
        dyIpO2UmJmUuZGVzdHJveSgpfSksX2N1cnJlbnRWaWV3RGlkQ2hhbmdlOkVt
        YmVyLm9ic2VydmVyKCJjdXJyZW50VmlldyIsZnVuY3Rpb24oKXt2YXIgZT1y
        KHRoaXMsImN1cnJlbnRWaWV3Iik7ZSYmdGhpcy5wdXNoT2JqZWN0KGUpfSks
        X2Vuc3VyZUNoaWxkcmVuQXJlSW5ET006ZnVuY3Rpb24oKXt0aGlzLmN1cnJl
        bnRTdGF0ZS5lbnN1cmVDaGlsZHJlbkFyZUluRE9NKHRoaXMpfX0pLEVtYmVy
        Lm1lcmdlKHQuX2RlZmF1bHQse2NoaWxkVmlld3NXaWxsQ2hhbmdlOkVtYmVy
        LkssY2hpbGRWaWV3c0RpZENoYW5nZTpFbWJlci5LLGVuc3VyZUNoaWxkcmVu
        QXJlSW5ET006RW1iZXIuS30pLEVtYmVyLm1lcmdlKHQuaW5CdWZmZXIse2No
        aWxkVmlld3NEaWRDaGFuZ2U6ZnVuY3Rpb24oKXt0aHJvdyBuZXcgRW1iZXIu
        RXJyb3IoIllvdSBjYW5ub3QgbW9kaWZ5IGNoaWxkIHZpZXdzIHdoaWxlIGlu
        IHRoZSBpbkJ1ZmZlciBzdGF0ZSIpfX0pLEVtYmVyLm1lcmdlKHQuaGFzRWxl
        bWVudCx7Y2hpbGRWaWV3c1dpbGxDaGFuZ2U6ZnVuY3Rpb24oZSx0LHIsbil7
        Zm9yKHZhciBpPXI7cituPmk7aSsrKXRbaV0ucmVtb3ZlKCl9LGNoaWxkVmll
        d3NEaWRDaGFuZ2U6ZnVuY3Rpb24oZSl7RW1iZXIucnVuLnNjaGVkdWxlT25j
        ZSgicmVuZGVyIixlLCJfZW5zdXJlQ2hpbGRyZW5BcmVJbkRPTSIpfSxlbnN1
        cmVDaGlsZHJlbkFyZUluRE9NOmZ1bmN0aW9uKHQpe3ZhciByLG4saSxhLHMs
        dT10Ll9jaGlsZFZpZXdzLGw9bmV3IG87Zm9yKHI9MCxuPXUubGVuZ3RoO24+
        cjtyKyspaT11W3JdLHN8fChzPUVtYmVyLlJlbmRlckJ1ZmZlcigpLHMuX2hh
        c0VsZW1lbnQ9ITEpLGkucmVuZGVyVG9CdWZmZXJJZk5lZWRlZChzKT9sLnB1
        c2goaSk6bC5sZW5ndGg/KGUodCxsLGEscykscz1udWxsLGE9aSxsLmNsZWFy
        KCkpOmE9aTtsLmxlbmd0aCYmZSh0LGwsYSxzKX19KX0oKSxmdW5jdGlvbigp
        e3t2YXIgZT1FbWJlci5nZXQsdD1FbWJlci5zZXQ7RW1iZXIuU3RyaW5nLmZt
        dH1FbWJlci5Db2xsZWN0aW9uVmlldz1FbWJlci5Db250YWluZXJWaWV3LmV4
        dGVuZCh7Y29udGVudDpudWxsLGVtcHR5Vmlld0NsYXNzOkVtYmVyLlZpZXcs
        ZW1wdHlWaWV3Om51bGwsaXRlbVZpZXdDbGFzczpFbWJlci5WaWV3LGluaXQ6
        ZnVuY3Rpb24oKXt2YXIgZT10aGlzLl9zdXBlcigpO3JldHVybiB0aGlzLl9j
        b250ZW50RGlkQ2hhbmdlKCksZX0sX2NvbnRlbnRXaWxsQ2hhbmdlOkVtYmVy
        LmJlZm9yZU9ic2VydmVyKCJjb250ZW50IixmdW5jdGlvbigpe3ZhciB0PXRo
        aXMuZ2V0KCJjb250ZW50Iik7dCYmdC5yZW1vdmVBcnJheU9ic2VydmVyKHRo
        aXMpO3ZhciByPXQ/ZSh0LCJsZW5ndGgiKTowO3RoaXMuYXJyYXlXaWxsQ2hh
        bmdlKHQsMCxyKX0pLF9jb250ZW50RGlkQ2hhbmdlOkVtYmVyLm9ic2VydmVy
        KCJjb250ZW50IixmdW5jdGlvbigpe3ZhciB0PWUodGhpcywiY29udGVudCIp
        O3QmJih0aGlzLl9hc3NlcnRBcnJheUxpa2UodCksdC5hZGRBcnJheU9ic2Vy
        dmVyKHRoaXMpKTt2YXIgcj10P2UodCwibGVuZ3RoIik6MDt0aGlzLmFycmF5
        RGlkQ2hhbmdlKHQsMCxudWxsLHIpfSksX2Fzc2VydEFycmF5TGlrZTpmdW5j
        dGlvbigpe30sZGVzdHJveTpmdW5jdGlvbigpe2lmKHRoaXMuX3N1cGVyKCkp
        e3ZhciB0PWUodGhpcywiY29udGVudCIpO3JldHVybiB0JiZ0LnJlbW92ZUFy
        cmF5T2JzZXJ2ZXIodGhpcyksdGhpcy5fY3JlYXRlZEVtcHR5VmlldyYmdGhp
        cy5fY3JlYXRlZEVtcHR5Vmlldy5kZXN0cm95KCksdGhpc319LGFycmF5V2ls
        bENoYW5nZTpmdW5jdGlvbih0LHIsbil7dmFyIGk9ZSh0aGlzLCJlbXB0eVZp
        ZXciKTtpJiZpIGluc3RhbmNlb2YgRW1iZXIuVmlldyYmaS5yZW1vdmVGcm9t
        UGFyZW50KCk7dmFyIG8sYSxzLHU9dGhpcy5fY2hpbGRWaWV3cztzPXRoaXMu
        X2NoaWxkVmlld3MubGVuZ3RoO3ZhciBsPW49PT1zO2ZvcihsJiYodGhpcy5j
        dXJyZW50U3RhdGUuZW1wdHkodGhpcyksdGhpcy5pbnZva2VSZWN1cnNpdmVs
        eShmdW5jdGlvbihlKXtlLnJlbW92ZWRGcm9tRE9NPSEwfSwhMSkpLGE9citu
        LTE7YT49cjthLS0pbz11W2FdLG8uZGVzdHJveSgpfSxhcnJheURpZENoYW5n
        ZTpmdW5jdGlvbihyLG4saSxvKXt2YXIgYSxzLHUsbCxjLGgsbT1bXTtpZihs
        PXI/ZShyLCJsZW5ndGgiKTowKWZvcihjPWUodGhpcywiaXRlbVZpZXdDbGFz
        cyIpLCJzdHJpbmciPT10eXBlb2YgYyYmKGM9ZShjKXx8YyksdT1uO24rbz51
        O3UrKylzPXIub2JqZWN0QXQodSksYT10aGlzLmNyZWF0ZUNoaWxkVmlldyhj
        LHtjb250ZW50OnMsY29udGVudEluZGV4OnV9KSxtLnB1c2goYSk7ZWxzZXtp
        ZihoPWUodGhpcywiZW1wdHlWaWV3IiksIWgpcmV0dXJuOyJzdHJpbmciPT10
        eXBlb2YgaCYmKGg9ZShoKXx8aCksaD10aGlzLmNyZWF0ZUNoaWxkVmlldyho
        KSxtLnB1c2goaCksdCh0aGlzLCJlbXB0eVZpZXciLGgpLEVtYmVyLkNvcmVW
        aWV3LmRldGVjdChoKSYmKHRoaXMuX2NyZWF0ZWRFbXB0eVZpZXc9aCl9dGhp
        cy5yZXBsYWNlKG4sMCxtKX0sY3JlYXRlQ2hpbGRWaWV3OmZ1bmN0aW9uKHIs
        bil7cj10aGlzLl9zdXBlcihyLG4pO3ZhciBpPWUociwidGFnTmFtZSIpO3Jl
        dHVybihudWxsPT09aXx8dm9pZCAwPT09aSkmJihpPUVtYmVyLkNvbGxlY3Rp
        b25WaWV3LkNPTlRBSU5FUl9NQVBbZSh0aGlzLCJ0YWdOYW1lIildLHQociwi
        dGFnTmFtZSIsaSkpLHJ9fSksRW1iZXIuQ29sbGVjdGlvblZpZXcuQ09OVEFJ
        TkVSX01BUD17dWw6ImxpIixvbDoibGkiLHRhYmxlOiJ0ciIsdGhlYWQ6InRy
        Iix0Ym9keToidHIiLHRmb290OiJ0ciIsdHI6InRkIixzZWxlY3Q6Im9wdGlv
        biJ9fSgpLGZ1bmN0aW9uKCl7RW1iZXIuQ29tcG9uZW50VGVtcGxhdGVEZXBy
        ZWNhdGlvbj1FbWJlci5NaXhpbi5jcmVhdGUoe3dpbGxNZXJnZU1peGluOmZ1
        bmN0aW9uKGUpe3RoaXMuX3N1cGVyLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt2
        YXIgdCxyLG49ZS5sYXlvdXROYW1lfHxlLmxheW91dDtlLnRlbXBsYXRlTmFt
        ZSYmIW4mJih0PSJ0ZW1wbGF0ZU5hbWUiLHI9ImxheW91dE5hbWUiLGUubGF5
        b3V0TmFtZT1lLnRlbXBsYXRlTmFtZSxkZWxldGUgZS50ZW1wbGF0ZU5hbWUp
        LGUudGVtcGxhdGUmJiFuJiYodD0idGVtcGxhdGUiLHI9ImxheW91dCIsZS5s
        YXlvdXQ9ZS50ZW1wbGF0ZSxkZWxldGUgZS50ZW1wbGF0ZSl9fSl9KCksZnVu
        Y3Rpb24oKXt2YXIgZT1FbWJlci5nZXQsdD1FbWJlci5zZXQscj0oRW1iZXIu
        aXNOb25lLEFycmF5LnByb3RvdHlwZS5zbGljZSk7RW1iZXIuQ29tcG9uZW50
        PUVtYmVyLlZpZXcuZXh0ZW5kKEVtYmVyLlRhcmdldEFjdGlvblN1cHBvcnQs
        RW1iZXIuQ29tcG9uZW50VGVtcGxhdGVEZXByZWNhdGlvbix7aW5pdDpmdW5j
        dGlvbigpe3RoaXMuX3N1cGVyKCksdCh0aGlzLCJjb250ZXh0Iix0aGlzKSx0
        KHRoaXMsImNvbnRyb2xsZXIiLHRoaXMpfSxkZWZhdWx0TGF5b3V0OmZ1bmN0
        aW9uKGUsdCl7RW1iZXIuSGFuZGxlYmFycy5oZWxwZXJzLnlpZWxkLmNhbGwo
        ZSx0KX0sdGVtcGxhdGU6RW1iZXIuY29tcHV0ZWQoZnVuY3Rpb24odCxyKXtp
        Zih2b2lkIDAhPT1yKXJldHVybiByO3ZhciBuPWUodGhpcywidGVtcGxhdGVO
        YW1lIiksaT10aGlzLnRlbXBsYXRlRm9yTmFtZShuLCJ0ZW1wbGF0ZSIpO3Jl
        dHVybiBpfHxlKHRoaXMsImRlZmF1bHRUZW1wbGF0ZSIpfSkucHJvcGVydHko
        InRlbXBsYXRlTmFtZSIpLHRlbXBsYXRlTmFtZTpudWxsLGNsb25lS2V5d29y
        ZHM6ZnVuY3Rpb24oKXtyZXR1cm57dmlldzp0aGlzLGNvbnRyb2xsZXI6dGhp
        c319LF95aWVsZDpmdW5jdGlvbih0LHIpe3ZhciBuPXIuZGF0YS52aWV3LGk9
        dGhpcy5fcGFyZW50VmlldyxvPWUodGhpcywidGVtcGxhdGUiKTsKbyYmbi5h
        cHBlbmRDaGlsZChFbWJlci5WaWV3LHtpc1ZpcnR1YWw6ITAsdGFnTmFtZToi
        IixfY29udGV4dFZpZXc6aSx0ZW1wbGF0ZTpvLGNvbnRleHQ6ZShpLCJjb250
        ZXh0IiksY29udHJvbGxlcjplKGksImNvbnRyb2xsZXIiKSx0ZW1wbGF0ZURh
        dGE6e2tleXdvcmRzOmkuY2xvbmVLZXl3b3JkcygpfX0pfSx0YXJnZXRPYmpl
        Y3Q6RW1iZXIuY29tcHV0ZWQoZnVuY3Rpb24oKXt2YXIgdD1lKHRoaXMsIl9w
        YXJlbnRWaWV3Iik7cmV0dXJuIHQ/ZSh0LCJjb250cm9sbGVyIik6bnVsbH0p
        LnByb3BlcnR5KCJfcGFyZW50VmlldyIpLHNlbmRBY3Rpb246ZnVuY3Rpb24o
        dCl7dmFyIG4saT1yLmNhbGwoYXJndW1lbnRzLDEpO249dm9pZCAwPT09dD9l
        KHRoaXMsImFjdGlvbiIpOmUodGhpcyx0KSx2b2lkIDAhPT1uJiZ0aGlzLnRy
        aWdnZXJBY3Rpb24oe2FjdGlvbjpuLGFjdGlvbkNvbnRleHQ6aX0pfX0pfSgp
        LGZ1bmN0aW9uKCl7RW1iZXIuVmlld1RhcmdldEFjdGlvblN1cHBvcnQ9RW1i
        ZXIuTWl4aW4uY3JlYXRlKEVtYmVyLlRhcmdldEFjdGlvblN1cHBvcnQse3Rh
        cmdldDpFbWJlci5jb21wdXRlZC5hbGlhcygiY29udHJvbGxlciIpLGFjdGlv
        bkNvbnRleHQ6RW1iZXIuY29tcHV0ZWQuYWxpYXMoImNvbnRleHQiKX0pfSgp
        LGZ1bmN0aW9uKCl7ZSgibWV0YW1vcnBoIixbXSxmdW5jdGlvbigpeyJ1c2Ug
        c3RyaWN0IjsvLyBDb3B5cmlnaHQ6IMKpMjAxNCBUaWxkZSwgSW5jLiBBbGwg
        cmlnaHRzIHJlc2VydmVkLgp2YXIgZT1mdW5jdGlvbigpe30sdD0wLHI9ZnVu
        Y3Rpb24oKXtyZXR1cm4idW5kZWZpbmVkIiE9dHlwZW9mIE1ldGFtb3JwaEVO
        Vj9NZXRhbW9ycGhFTlYuRElTQUJMRV9SQU5HRV9BUEk6InVuZGVmaW5lZCIh
        PT1FTlY/RU5WLkRJU0FCTEVfUkFOR0VfQVBJOiExfSgpLG49IXImJiJ1bmRl
        ZmluZWQiIT10eXBlb2YgZG9jdW1lbnQmJiJjcmVhdGVSYW5nZSJpbiBkb2N1
        bWVudCYmInVuZGVmaW5lZCIhPXR5cGVvZiBSYW5nZSYmUmFuZ2UucHJvdG90
        eXBlLmNyZWF0ZUNvbnRleHR1YWxGcmFnbWVudCxpPSJ1bmRlZmluZWQiIT10
        eXBlb2YgZG9jdW1lbnQmJmZ1bmN0aW9uKCl7dmFyIGU9ZG9jdW1lbnQuY3Jl
        YXRlRWxlbWVudCgiZGl2Iik7cmV0dXJuIGUuaW5uZXJIVE1MPSI8ZGl2Pjwv
        ZGl2PiIsZS5maXJzdENoaWxkLmlubmVySFRNTD0iPHNjcmlwdD48L3Njcmlw
        dD4iLCIiPT09ZS5maXJzdENoaWxkLmlubmVySFRNTH0oKSxvPWRvY3VtZW50
        JiZmdW5jdGlvbigpe3ZhciBlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRp
        diIpO3JldHVybiBlLmlubmVySFRNTD0iVGVzdDogPHNjcmlwdCB0eXBlPSd0
        ZXh0L3gtcGxhY2Vob2xkZXInPjwvc2NyaXB0PlZhbHVlIiwiVGVzdDoiPT09
        ZS5jaGlsZE5vZGVzWzBdLm5vZGVWYWx1ZSYmIiBWYWx1ZSI9PT1lLmNoaWxk
        Tm9kZXNbMl0ubm9kZVZhbHVlfSgpLGE9ZnVuY3Rpb24ocil7dmFyIG47bj10
        aGlzIGluc3RhbmNlb2YgYT90aGlzOm5ldyBlLG4uaW5uZXJIVE1MPXI7dmFy
        IGk9Im1ldGFtb3JwaC0iK3QrKztyZXR1cm4gbi5zdGFydD1pKyItc3RhcnQi
        LG4uZW5kPWkrIi1lbmQiLG59O2UucHJvdG90eXBlPWEucHJvdG90eXBlO3Zh
        ciBzLHUsbCxjLGgsbSxwLGYsZDtpZihjPWZ1bmN0aW9uKCl7cmV0dXJuIHRo
        aXMuc3RhcnRUYWcoKSt0aGlzLmlubmVySFRNTCt0aGlzLmVuZFRhZygpfSxm
        PWZ1bmN0aW9uKCl7cmV0dXJuIjxzY3JpcHQgaWQ9JyIrdGhpcy5zdGFydCsi
        JyB0eXBlPSd0ZXh0L3gtcGxhY2Vob2xkZXInPjwvc2NyaXB0PiJ9LGQ9ZnVu
        Y3Rpb24oKXtyZXR1cm4iPHNjcmlwdCBpZD0nIit0aGlzLmVuZCsiJyB0eXBl
        PSd0ZXh0L3gtcGxhY2Vob2xkZXInPjwvc2NyaXB0PiJ9LG4pcz1mdW5jdGlv
        bihlLHQpe3ZhciByPWRvY3VtZW50LmNyZWF0ZVJhbmdlKCksbj1kb2N1bWVu
        dC5nZXRFbGVtZW50QnlJZChlLnN0YXJ0KSxpPWRvY3VtZW50LmdldEVsZW1l
        bnRCeUlkKGUuZW5kKTtyZXR1cm4gdD8oci5zZXRTdGFydEJlZm9yZShuKSxy
        LnNldEVuZEFmdGVyKGkpKTooci5zZXRTdGFydEFmdGVyKG4pLHIuc2V0RW5k
        QmVmb3JlKGkpKSxyfSx1PWZ1bmN0aW9uKGUsdCl7dmFyIHI9cyh0aGlzLHQp
        O3IuZGVsZXRlQ29udGVudHMoKTt2YXIgbj1yLmNyZWF0ZUNvbnRleHR1YWxG
        cmFnbWVudChlKTtyLmluc2VydE5vZGUobil9LGw9ZnVuY3Rpb24oKXt2YXIg
        ZT1zKHRoaXMsITApO2UuZGVsZXRlQ29udGVudHMoKX0saD1mdW5jdGlvbihl
        KXt2YXIgdD1kb2N1bWVudC5jcmVhdGVSYW5nZSgpO3Quc2V0U3RhcnQoZSks
        dC5jb2xsYXBzZSghMSk7dmFyIHI9dC5jcmVhdGVDb250ZXh0dWFsRnJhZ21l
        bnQodGhpcy5vdXRlckhUTUwoKSk7ZS5hcHBlbmRDaGlsZChyKX0sbT1mdW5j
        dGlvbihlKXt2YXIgdD1kb2N1bWVudC5jcmVhdGVSYW5nZSgpLHI9ZG9jdW1l
        bnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5lbmQpO3Quc2V0U3RhcnRBZnRlcihy
        KSx0LnNldEVuZEFmdGVyKHIpO3ZhciBuPXQuY3JlYXRlQ29udGV4dHVhbEZy
        YWdtZW50KGUpO3QuaW5zZXJ0Tm9kZShuKX0scD1mdW5jdGlvbihlKXt2YXIg
        dD1kb2N1bWVudC5jcmVhdGVSYW5nZSgpLHI9ZG9jdW1lbnQuZ2V0RWxlbWVu
        dEJ5SWQodGhpcy5zdGFydCk7dC5zZXRTdGFydEFmdGVyKHIpLHQuc2V0RW5k
        QWZ0ZXIocik7dmFyIG49dC5jcmVhdGVDb250ZXh0dWFsRnJhZ21lbnQoZSk7
        dC5pbnNlcnROb2RlKG4pfTtlbHNle3ZhciBiPXtzZWxlY3Q6WzEsIjxzZWxl
        Y3QgbXVsdGlwbGU9J211bHRpcGxlJz4iLCI8L3NlbGVjdD4iXSxmaWVsZHNl
        dDpbMSwiPGZpZWxkc2V0PiIsIjwvZmllbGRzZXQ+Il0sdGFibGU6WzEsIjx0
        YWJsZT4iLCI8L3RhYmxlPiJdLHRib2R5OlsyLCI8dGFibGU+PHRib2R5PiIs
        IjwvdGJvZHk+PC90YWJsZT4iXSx0cjpbMywiPHRhYmxlPjx0Ym9keT48dHI+
        IiwiPC90cj48L3Rib2R5PjwvdGFibGU+Il0sY29sZ3JvdXA6WzIsIjx0YWJs
        ZT48dGJvZHk+PC90Ym9keT48Y29sZ3JvdXA+IiwiPC9jb2xncm91cD48L3Rh
        YmxlPiJdLG1hcDpbMSwiPG1hcD4iLCI8L21hcD4iXSxfZGVmYXVsdDpbMCwi
        IiwiIl19LHY9ZnVuY3Rpb24oZSx0KXtpZihlLmdldEF0dHJpYnV0ZSgiaWQi
        KT09PXQpcmV0dXJuIGU7dmFyIHIsbixpLG89ZS5jaGlsZE5vZGVzLmxlbmd0
        aDtmb3Iocj0wO28+cjtyKyspaWYobj1lLmNoaWxkTm9kZXNbcl0saT0xPT09
        bi5ub2RlVHlwZSYmdihuLHQpKXJldHVybiBpfSxFPWZ1bmN0aW9uKGUsdCl7
        dmFyIHI9W107aWYobyYmKHQ9dC5yZXBsYWNlKC8oXHMrKSg8c2NyaXB0IGlk
        PScoW14nXSspJykvZyxmdW5jdGlvbihlLHQsbixpKXtyZXR1cm4gci5wdXNo
        KFtpLHRdKSxufSkpLGUuaW5uZXJIVE1MPXQsci5sZW5ndGg+MCl7dmFyIG4s
        aT1yLmxlbmd0aDtmb3Iobj0wO2k+bjtuKyspe3ZhciBhPXYoZSxyW25dWzBd
        KSxzPWRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHJbbl1bMV0pO2EucGFyZW50
        Tm9kZS5pbnNlcnRCZWZvcmUocyxhKX19fSxnPWZ1bmN0aW9uKGUsdCl7dmFy
        IHI9YltlLnRhZ05hbWUudG9Mb3dlckNhc2UoKV18fGIuX2RlZmF1bHQsbj1y
        WzBdLG89clsxXSxhPXJbMl07aSYmKHQ9IiZzaHk7Iit0KTt2YXIgcz1kb2N1
        bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTtFKHMsbyt0K2EpO2Zvcih2YXIg
        dT0wO24+PXU7dSsrKXM9cy5maXJzdENoaWxkO2lmKGkpe2Zvcih2YXIgbD1z
        OzE9PT1sLm5vZGVUeXBlJiYhbC5ub2RlTmFtZTspbD1sLmZpcnN0Q2hpbGQ7
        Mz09PWwubm9kZVR5cGUmJiLCrSI9PT1sLm5vZGVWYWx1ZS5jaGFyQXQoMCkm
        JihsLm5vZGVWYWx1ZT1sLm5vZGVWYWx1ZS5zbGljZSgxKSl9cmV0dXJuIHN9
        LHk9ZnVuY3Rpb24oZSl7Zm9yKDsiIj09PWUucGFyZW50Tm9kZS50YWdOYW1l
        OyllPWUucGFyZW50Tm9kZTtyZXR1cm4gZX0sXz1mdW5jdGlvbihlLHQpe2Uu
        cGFyZW50Tm9kZSE9PXQucGFyZW50Tm9kZSYmdC5wYXJlbnROb2RlLmluc2Vy
        dEJlZm9yZShlLHQucGFyZW50Tm9kZS5maXJzdENoaWxkKX07dT1mdW5jdGlv
        bihlLHQpe3ZhciByLG4saSxvPXkoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQo
        dGhpcy5zdGFydCkpLGE9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5l
        bmQpLHM9YS5wYXJlbnROb2RlO2ZvcihfKG8sYSkscj1vLm5leHRTaWJsaW5n
        O3I7KXtpZihuPXIubmV4dFNpYmxpbmcsaT1yPT09YSl7aWYoIXQpYnJlYWs7
        YT1yLm5leHRTaWJsaW5nfWlmKHIucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChy
        KSxpKWJyZWFrO3I9bn1mb3Iocj1nKG8ucGFyZW50Tm9kZSxlKSx0JiZvLnBh
        cmVudE5vZGUucmVtb3ZlQ2hpbGQobyk7cjspbj1yLm5leHRTaWJsaW5nLHMu
        aW5zZXJ0QmVmb3JlKHIsYSkscj1ufSxsPWZ1bmN0aW9uKCl7dmFyIGU9eShk
        b2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLnN0YXJ0KSksdD1kb2N1bWVu
        dC5nZXRFbGVtZW50QnlJZCh0aGlzLmVuZCk7dGhpcy5odG1sKCIiKSxlLnBh
        cmVudE5vZGUucmVtb3ZlQ2hpbGQoZSksdC5wYXJlbnROb2RlLnJlbW92ZUNo
        aWxkKHQpfSxoPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdCxyPWcoZSx0aGlzLm91
        dGVySFRNTCgpKTtyOyl0PXIubmV4dFNpYmxpbmcsZS5hcHBlbmRDaGlsZChy
        KSxyPXR9LG09ZnVuY3Rpb24oZSl7dmFyIHQscixuPWRvY3VtZW50LmdldEVs
        ZW1lbnRCeUlkKHRoaXMuZW5kKSxpPW4ubmV4dFNpYmxpbmcsbz1uLnBhcmVu
        dE5vZGU7Zm9yKHI9ZyhvLGUpO3I7KXQ9ci5uZXh0U2libGluZyxvLmluc2Vy
        dEJlZm9yZShyLGkpLHI9dH0scD1mdW5jdGlvbihlKXt2YXIgdCxyLG49ZG9j
        dW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5zdGFydCksaT1uLnBhcmVudE5v
        ZGU7cj1nKGksZSk7Zm9yKHZhciBvPW4ubmV4dFNpYmxpbmc7cjspdD1yLm5l
        eHRTaWJsaW5nLGkuaW5zZXJ0QmVmb3JlKHIsbykscj10fX1yZXR1cm4gYS5w
        cm90b3R5cGUuaHRtbD1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5jaGVja1Jl
        bW92ZWQoKSx2b2lkIDA9PT1lP3RoaXMuaW5uZXJIVE1MOih1LmNhbGwodGhp
        cyxlKSx0aGlzLmlubmVySFRNTD1lLHZvaWQgMCl9LGEucHJvdG90eXBlLnJl
        cGxhY2VXaXRoPWZ1bmN0aW9uKGUpe3RoaXMuY2hlY2tSZW1vdmVkKCksdS5j
        YWxsKHRoaXMsZSwhMCl9LGEucHJvdG90eXBlLnJlbW92ZT1sLGEucHJvdG90
        eXBlLm91dGVySFRNTD1jLGEucHJvdG90eXBlLmFwcGVuZFRvPWgsYS5wcm90
        b3R5cGUuYWZ0ZXI9bSxhLnByb3RvdHlwZS5wcmVwZW5kPXAsYS5wcm90b3R5
        cGUuc3RhcnRUYWc9ZixhLnByb3RvdHlwZS5lbmRUYWc9ZCxhLnByb3RvdHlw
        ZS5pc1JlbW92ZWQ9ZnVuY3Rpb24oKXt2YXIgZT1kb2N1bWVudC5nZXRFbGVt
        ZW50QnlJZCh0aGlzLnN0YXJ0KSx0PWRvY3VtZW50LmdldEVsZW1lbnRCeUlk
        KHRoaXMuZW5kKTtyZXR1cm4hZXx8IXR9LGEucHJvdG90eXBlLmNoZWNrUmVt
        b3ZlZD1mdW5jdGlvbigpe2lmKHRoaXMuaXNSZW1vdmVkKCkpdGhyb3cgbmV3
        IEVycm9yKCJDYW5ub3QgcGVyZm9ybSBvcGVyYXRpb25zIG9uIGEgTWV0YW1v
        cnBoIHRoYXQgaXMgbm90IGluIHRoZSBET00uIil9LGF9KX0oKSxmdW5jdGlv
        bigpe3ZhciBlPU9iamVjdC5jcmVhdGV8fGZ1bmN0aW9uKGUpe2Z1bmN0aW9u
        IHQoKXt9cmV0dXJuIHQucHJvdG90eXBlPWUsbmV3IHR9LHQ9RW1iZXIuaW1w
        b3J0cyYmRW1iZXIuaW1wb3J0cy5IYW5kbGViYXJzfHx0aGlzJiZ0aGlzLkhh
        bmRsZWJhcnM7dHx8ImZ1bmN0aW9uIiE9dHlwZW9mIHJ8fCh0PXIoImhhbmRs
        ZWJhcnMiKSksRW1iZXIuSGFuZGxlYmFycz1lKHQpLEVtYmVyLkhhbmRsZWJh
        cnMuaGVscGVyPWZ1bmN0aW9uKGUsdCl7RW1iZXIuVmlldy5kZXRlY3QodCk/
        RW1iZXIuSGFuZGxlYmFycy5yZWdpc3RlckhlbHBlcihlLEVtYmVyLkhhbmRs
        ZWJhcnMubWFrZVZpZXdIZWxwZXIodCkpOkVtYmVyLkhhbmRsZWJhcnMucmVn
        aXN0ZXJCb3VuZEhlbHBlci5hcHBseShudWxsLGFyZ3VtZW50cyl9LEVtYmVy
        LkhhbmRsZWJhcnMubWFrZVZpZXdIZWxwZXI9ZnVuY3Rpb24oZSl7cmV0dXJu
        IGZ1bmN0aW9uKHQpe3JldHVybiBFbWJlci5IYW5kbGViYXJzLmhlbHBlcnMu
        dmlldy5jYWxsKHRoaXMsZSx0KX19LEVtYmVyLkhhbmRsZWJhcnMuaGVscGVy
        cz1lKHQuaGVscGVycyksRW1iZXIuSGFuZGxlYmFycy5Db21waWxlcj1mdW5j
        dGlvbigpe30sdC5Db21waWxlciYmKEVtYmVyLkhhbmRsZWJhcnMuQ29tcGls
        ZXIucHJvdG90eXBlPWUodC5Db21waWxlci5wcm90b3R5cGUpKSxFbWJlci5I
        YW5kbGViYXJzLkNvbXBpbGVyLnByb3RvdHlwZS5jb21waWxlcj1FbWJlci5I
        YW5kbGViYXJzLkNvbXBpbGVyLEVtYmVyLkhhbmRsZWJhcnMuSmF2YVNjcmlw
        dENvbXBpbGVyPWZ1bmN0aW9uKCl7fSx0LkphdmFTY3JpcHRDb21waWxlciYm
        KEVtYmVyLkhhbmRsZWJhcnMuSmF2YVNjcmlwdENvbXBpbGVyLnByb3RvdHlw
        ZT1lKHQuSmF2YVNjcmlwdENvbXBpbGVyLnByb3RvdHlwZSksRW1iZXIuSGFu
        ZGxlYmFycy5KYXZhU2NyaXB0Q29tcGlsZXIucHJvdG90eXBlLmNvbXBpbGVy
        PUVtYmVyLkhhbmRsZWJhcnMuSmF2YVNjcmlwdENvbXBpbGVyKSxFbWJlci5I
        YW5kbGViYXJzLkphdmFTY3JpcHRDb21waWxlci5wcm90b3R5cGUubmFtZXNw
        YWNlPSJFbWJlci5IYW5kbGViYXJzIixFbWJlci5IYW5kbGViYXJzLkphdmFT
        Y3JpcHRDb21waWxlci5wcm90b3R5cGUuaW5pdGlhbGl6ZUJ1ZmZlcj1mdW5j
        dGlvbigpe3JldHVybiInJyJ9LEVtYmVyLkhhbmRsZWJhcnMuSmF2YVNjcmlw
        dENvbXBpbGVyLnByb3RvdHlwZS5hcHBlbmRUb0J1ZmZlcj1mdW5jdGlvbihl
        KXtyZXR1cm4iZGF0YS5idWZmZXIucHVzaCgiK2UrIik7In07dmFyIG49L2hl
        bHBlcnNcLiguKj8pXCkvLGk9L2hlbHBlcnNcWycoLio/KScvLG89LyguKmJs
        b2NrSGVscGVyTWlzc2luZ1wuY2FsbFwoLiopKHN0YWNrWzAtOV0rKSgsLiop
        LztFbWJlci5IYW5kbGViYXJzLkphdmFTY3JpcHRDb21waWxlci5zdHJpbmdp
        ZnlMYXN0QmxvY2tIZWxwZXJNaXNzaW5nSW52b2NhdGlvbj1mdW5jdGlvbihl
        KXt2YXIgdD1lW2UubGVuZ3RoLTFdLHI9KG4uZXhlYyh0KXx8aS5leGVjKHQp
        KVsxXSxhPW8uZXhlYyh0KTtlW2UubGVuZ3RoLTFdPWFbMV0rIiciK3IrIici
        K2FbM119O3ZhciBhPUVtYmVyLkhhbmRsZWJhcnMuSmF2YVNjcmlwdENvbXBp
        bGVyLnN0cmluZ2lmeUxhc3RCbG9ja0hlbHBlck1pc3NpbmdJbnZvY2F0aW9u
        LHM9RW1iZXIuSGFuZGxlYmFycy5KYXZhU2NyaXB0Q29tcGlsZXIucHJvdG90
        eXBlLmJsb2NrVmFsdWU7RW1iZXIuSGFuZGxlYmFycy5KYXZhU2NyaXB0Q29t
        cGlsZXIucHJvdG90eXBlLmJsb2NrVmFsdWU9ZnVuY3Rpb24oKXtzLmFwcGx5
        KHRoaXMsYXJndW1lbnRzKSxhKHRoaXMuc291cmNlKX07dmFyIHU9RW1iZXIu
        SGFuZGxlYmFycy5KYXZhU2NyaXB0Q29tcGlsZXIucHJvdG90eXBlLmFtYmln
        dW91c0Jsb2NrVmFsdWU7RW1iZXIuSGFuZGxlYmFycy5KYXZhU2NyaXB0Q29t
        cGlsZXIucHJvdG90eXBlLmFtYmlndW91c0Jsb2NrVmFsdWU9ZnVuY3Rpb24o
        KXt1LmFwcGx5KHRoaXMsYXJndW1lbnRzKSxhKHRoaXMuc291cmNlKX0sRW1i
        ZXIuSGFuZGxlYmFycy5Db21waWxlci5wcm90b3R5cGUubXVzdGFjaGU9ZnVu
        Y3Rpb24oZSl7aWYoIWUucGFyYW1zLmxlbmd0aCYmIWUuaGFzaCl7dmFyIHI9
        bmV3IHQuQVNULklkTm9kZShbe3BhcnQ6Il90cmlhZ2VNdXN0YWNoZSJ9XSk7
        ZS5lc2NhcGVkfHwoZS5oYXNoPWUuaGFzaHx8bmV3IHQuQVNULkhhc2hOb2Rl
        KFtdKSxlLmhhc2gucGFpcnMucHVzaChbInVuZXNjYXBlZCIsbmV3IHQuQVNU
        LlN0cmluZ05vZGUoInRydWUiKV0pKSxlPW5ldyB0LkFTVC5NdXN0YWNoZU5v
        ZGUoW3JdLmNvbmNhdChbZS5pZF0pLGUuaGFzaCwhZS5lc2NhcGVkKX1yZXR1
        cm4gdC5Db21waWxlci5wcm90b3R5cGUubXVzdGFjaGUuY2FsbCh0aGlzLGUp
        fSxFbWJlci5IYW5kbGViYXJzLnByZWNvbXBpbGU9ZnVuY3Rpb24oZSl7dmFy
        IHI9dC5wYXJzZShlKSxuPXtrbm93bkhlbHBlcnM6e2FjdGlvbjohMCx1bmJv
        dW5kOiEwLCJiaW5kLWF0dHIiOiEwLHRlbXBsYXRlOiEwLHZpZXc6ITAsX3Ry
        aWFnZU11c3RhY2hlOiEwfSxkYXRhOiEwLHN0cmluZ1BhcmFtczohMH0saT0o
        bmV3IEVtYmVyLkhhbmRsZWJhcnMuQ29tcGlsZXIpLmNvbXBpbGUocixuKTty
        ZXR1cm4obmV3IEVtYmVyLkhhbmRsZWJhcnMuSmF2YVNjcmlwdENvbXBpbGVy
        KS5jb21waWxlKGksbix2b2lkIDAsITApfSx0LmNvbXBpbGUmJihFbWJlci5I
        YW5kbGViYXJzLmNvbXBpbGU9ZnVuY3Rpb24oZSl7dmFyIHI9dC5wYXJzZShl
        KSxuPXtkYXRhOiEwLHN0cmluZ1BhcmFtczohMH0saT0obmV3IEVtYmVyLkhh
        bmRsZWJhcnMuQ29tcGlsZXIpLmNvbXBpbGUocixuKSxvPShuZXcgRW1iZXIu
        SGFuZGxlYmFycy5KYXZhU2NyaXB0Q29tcGlsZXIpLmNvbXBpbGUoaSxuLHZv
        aWQgMCwhMCksYT1FbWJlci5IYW5kbGViYXJzLnRlbXBsYXRlKG8pO3JldHVy
        biBhLmlzTWV0aG9kPSExLGF9KX0oKSxmdW5jdGlvbigpe2Z1bmN0aW9uIGUo
        ZSxyLG4saSl7dmFyIG8sYSxzLHUsbCxjPVtdLGg9aS5oYXNoLG09aC5ib3Vu
        ZE9wdGlvbnMscD10LmNhbGwoaS50eXBlcywxKTtmb3IobCBpbiBtKW0uaGFz
        T3duUHJvcGVydHkobCkmJihoW2xdPUVtYmVyLkhhbmRsZWJhcnMuZ2V0KGUs
        bVtsXSxpKSk7Zm9yKG89MCxhPW4ubGVuZ3RoO2E+bzsrK28pcz1uW29dLHU9
        cFtvXSwiSUQiPT09dT9jLnB1c2goRW1iZXIuSGFuZGxlYmFycy5nZXQocy5y
        b290LHMucGF0aCxpKSk6Yy5wdXNoKHMucGF0aCk7cmV0dXJuIGMucHVzaChp
        KSxyLmFwcGx5KGUsYyl9dmFyIHQ9QXJyYXkucHJvdG90eXBlLnNsaWNlLHI9
        RW1iZXIuSGFuZGxlYmFycy50ZW1wbGF0ZSxuPUVtYmVyLkhhbmRsZWJhcnMu
        bm9ybWFsaXplUGF0aD1mdW5jdGlvbihlLHQscil7dmFyIG4saSxvPXImJnIu
        a2V5d29yZHN8fHt9O3JldHVybiBuPXQuc3BsaXQoIi4iLDEpWzBdLG8uaGFz
        T3duUHJvcGVydHkobikmJihlPW9bbl0saT0hMCx0PXQ9PT1uPyIiOnQuc3Vi
        c3RyKG4ubGVuZ3RoKzEpKSx7cm9vdDplLHBhdGg6dCxpc0tleXdvcmQ6aX19
        LGk9RW1iZXIuSGFuZGxlYmFycy5nZXQ9ZnVuY3Rpb24oZSx0LHIpe3ZhciBp
        LG89ciYmci5kYXRhLGE9bihlLHQsbyk7cmV0dXJuIGU9YS5yb290LHQ9YS5w
        YXRoLGk9RW1iZXIuZ2V0KGUsdCksdm9pZCAwPT09aSYmZSE9PUVtYmVyLmxv
        b2t1cCYmRW1iZXIuaXNHbG9iYWxQYXRoKHQpJiYoaT1FbWJlci5nZXQoRW1i
        ZXIubG9va3VwLHQpKSxpfTtFbWJlci5IYW5kbGViYXJzLmdldEVzY2FwZWQ9
        ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWkoZSx0LHIpO3JldHVybiBudWxsPT09
        bnx8dm9pZCAwPT09bj9uPSIiOm4gaW5zdGFuY2VvZiBIYW5kbGViYXJzLlNh
        ZmVTdHJpbmd8fChuPVN0cmluZyhuKSksci5oYXNoLnVuZXNjYXBlZHx8KG49
        SGFuZGxlYmFycy5VdGlscy5lc2NhcGVFeHByZXNzaW9uKG4pKSxufSxFbWJl
        ci5IYW5kbGViYXJzLnJlc29sdmVQYXJhbXM9ZnVuY3Rpb24oZSx0LHIpe2Zv
        cih2YXIgbixvLGE9W10scz1yLnR5cGVzLHU9MCxsPXQubGVuZ3RoO2w+dTt1
        Kyspbj10W3VdLG89c1t1XSwiSUQiPT09bz9hLnB1c2goaShlLG4scikpOmEu
        cHVzaChuKTtyZXR1cm4gYX0sRW1iZXIuSGFuZGxlYmFycy5yZXNvbHZlSGFz
        aD1mdW5jdGlvbihlLHQscil7dmFyIG4sbz17fSxhPXIuaGFzaFR5cGVzO2Zv
        cih2YXIgcyBpbiB0KXQuaGFzT3duUHJvcGVydHkocykmJihuPWFbc10sb1tz
        XT0iSUQiPT09bj9pKGUsdFtzXSxyKTp0W3NdKTtyZXR1cm4gb30sRW1iZXIu
        SGFuZGxlYmFycy5yZWdpc3RlckhlbHBlcigiaGVscGVyTWlzc2luZyIsZnVu
        Y3Rpb24oZSl7dmFyIHIsbj0iIixpPWFyZ3VtZW50c1thcmd1bWVudHMubGVu
        Z3RoLTFdLG89RW1iZXIuSGFuZGxlYmFycy5yZXNvbHZlSGVscGVyKGkuZGF0
        YS52aWV3LmNvbnRhaW5lcixlKTtpZihvKXJldHVybiBvLmFwcGx5KHRoaXMs
        dC5jYWxsKGFyZ3VtZW50cywxKSk7dGhyb3cgcj0iJUAgSGFuZGxlYmFycyBl
        cnJvcjogQ291bGQgbm90IGZpbmQgcHJvcGVydHkgJyVAJyBvbiBvYmplY3Qg
        JUAuIixpLmRhdGEmJihuPWkuZGF0YS52aWV3KSxuZXcgRW1iZXIuRXJyb3Io
        RW1iZXIuU3RyaW5nLmZtdChyLFtuLGUsdGhpc10pKX0pLEVtYmVyLkhhbmRs
        ZWJhcnMucmVnaXN0ZXJIZWxwZXIoImJsb2NrSGVscGVyTWlzc2luZyIsZnVu
        Y3Rpb24oZSl7dmFyIHI9YXJndW1lbnRzW2FyZ3VtZW50cy5sZW5ndGgtMV0s
        bj1FbWJlci5IYW5kbGViYXJzLnJlc29sdmVIZWxwZXIoci5kYXRhLnZpZXcu
        Y29udGFpbmVyLGUpO3JldHVybiBuP24uYXBwbHkodGhpcyx0LmNhbGwoYXJn
        dW1lbnRzLDEpKTpIYW5kbGViYXJzLmhlbHBlcnMuaGVscGVyTWlzc2luZy5j
        YWxsKHRoaXMsZSl9KSxFbWJlci5IYW5kbGViYXJzLnJlZ2lzdGVyQm91bmRI
        ZWxwZXI9ZnVuY3Rpb24oZSl7dmFyIHI9dC5jYWxsKGFyZ3VtZW50cywxKSxu
        PUVtYmVyLkhhbmRsZWJhcnMubWFrZUJvdW5kSGVscGVyLmFwcGx5KHRoaXMs
        cik7RW1iZXIuSGFuZGxlYmFycy5yZWdpc3RlckhlbHBlcihlLG4pfSxFbWJl
        ci5IYW5kbGViYXJzLm1ha2VCb3VuZEhlbHBlcj1mdW5jdGlvbihyKXtmdW5j
        dGlvbiBpKCl7dmFyIGksYSxzLHUsbCxjPXQuY2FsbChhcmd1bWVudHMsMCwt
        MSksaD1jLmxlbmd0aCxtPWFyZ3VtZW50c1thcmd1bWVudHMubGVuZ3RoLTFd
        LHA9W10sZj1tLmRhdGEsZD1mLmlzVW5ib3VuZD90LmNhbGwobS50eXBlcywx
        KTptLnR5cGVzLGI9bS5oYXNoLHY9Zi52aWV3LEU9bS5jb250ZXh0cyxnPUUm
        JkUubGVuZ3RoP0VbMF06dGhpcyx5PSIiLF89RW1iZXIuX1NpbXBsZUhhbmRs
        ZWJhcnNWaWV3LnByb3RvdHlwZS5ub3JtYWxpemVkVmFsdWUsdz1iLmJvdW5k
        T3B0aW9ucz17fTtmb3IocyBpbiBiKUVtYmVyLklTX0JJTkRJTkcudGVzdChz
        KSYmKHdbcy5zbGljZSgwLC03KV09YltzXSk7dmFyIEM9W107Zm9yKGYucHJv
        cGVydGllcz1bXSxpPTA7aD5pOysraSlpZihmLnByb3BlcnRpZXMucHVzaChj
        W2ldKSwiSUQiPT09ZFtpXSl7dmFyIE89bihnLGNbaV0sZik7cC5wdXNoKE8p
        LEMucHVzaChPKX1lbHNlIGYuaXNVbmJvdW5kP3AucHVzaCh7cGF0aDpjW2ld
        fSk6cC5wdXNoKG51bGwpO2lmKGYuaXNVbmJvdW5kKXJldHVybiBlKHRoaXMs
        cixwLG0pO3ZhciBBPW5ldyBFbWJlci5fU2ltcGxlSGFuZGxlYmFyc1ZpZXco
        bnVsbCxudWxsLCFtLmhhc2gudW5lc2NhcGVkLG0uZGF0YSk7QS5ub3JtYWxp
        emVkVmFsdWU9ZnVuY3Rpb24oKXt2YXIgZSx0PVtdO2ZvcihlIGluIHcpdy5o
        YXNPd25Qcm9wZXJ0eShlKSYmKGw9bihnLHdbZV0sZiksQS5wYXRoPWwucGF0
        aCxBLnBhdGhSb290PWwucm9vdCxiW2VdPV8uY2FsbChBKSk7Zm9yKGk9MDto
        Pmk7KytpKWw9cFtpXSxsPyhBLnBhdGg9bC5wYXRoLEEucGF0aFJvb3Q9bC5y
        b290LHQucHVzaChfLmNhbGwoQSkpKTp0LnB1c2goY1tpXSk7cmV0dXJuIHQu
        cHVzaChtKSxyLmFwcGx5KGcsdCl9LHYuYXBwZW5kQ2hpbGQoQSk7Zm9yKHUg
        aW4gdyl3Lmhhc093blByb3BlcnR5KHUpJiZDLnB1c2gobihnLHdbdV0sZikp
        O2ZvcihpPTAsYT1DLmxlbmd0aDthPmk7KytpKWw9Q1tpXSx2LnJlZ2lzdGVy
        T2JzZXJ2ZXIobC5yb290LGwucGF0aCxBLEEucmVyZW5kZXIpO2lmKCJJRCI9
        PT1kWzBdJiYwIT09cC5sZW5ndGgpe3ZhciBQPXBbMF0seD1QLnJvb3QsVD1Q
        LnBhdGg7RW1iZXIuaXNFbXB0eShUKXx8KHk9VCsiLiIpO2Zvcih2YXIgUz0w
        LFY9by5sZW5ndGg7Vj5TO1MrKyl2LnJlZ2lzdGVyT2JzZXJ2ZXIoeCx5K29b
        U10sQSxBLnJlcmVuZGVyKX19dmFyIG89dC5jYWxsKGFyZ3VtZW50cywxKTty
        ZXR1cm4gaS5fcmF3RnVuY3Rpb249cixpfSxFbWJlci5IYW5kbGViYXJzLnRl
        bXBsYXRlPWZ1bmN0aW9uKGUpe3ZhciB0PXIoZSk7cmV0dXJuIHQuaXNUb3A9
        ITAsdH19KCksZnVuY3Rpb24oKXtFbWJlci5TdHJpbmcuaHRtbFNhZmU9ZnVu
        Y3Rpb24oZSl7cmV0dXJuIG5ldyBIYW5kbGViYXJzLlNhZmVTdHJpbmcoZSl9
        O3ZhciBlPUVtYmVyLlN0cmluZy5odG1sU2FmZTsoRW1iZXIuRVhURU5EX1BS
        T1RPVFlQRVM9PT0hMHx8RW1iZXIuRVhURU5EX1BST1RPVFlQRVMuU3RyaW5n
        KSYmKFN0cmluZy5wcm90b3R5cGUuaHRtbFNhZmU9ZnVuY3Rpb24oKXtyZXR1
        cm4gZSh0aGlzKX0pfSgpLGZ1bmN0aW9uKCl7RW1iZXIuSGFuZGxlYmFycy5y
        ZXNvbHZlUGF0aHM9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PVtdLHI9ZS5jb250
        ZXh0cyxuPWUucm9vdHMsaT1lLmRhdGEsbz0wLGE9ci5sZW5ndGg7YT5vO28r
        Kyl0LnB1c2goRW1iZXIuSGFuZGxlYmFycy5nZXQobltvXSxyW29dLHtkYXRh
        Oml9KSk7cmV0dXJuIHR9fSgpLGZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe0Vt
        YmVyLnJ1bi5vbmNlKEVtYmVyLlZpZXcsIm5vdGlmeU11dGF0aW9uTGlzdGVu
        ZXJzIil9dmFyIHI9KEVtYmVyLnNldCxFbWJlci5nZXQsdCgibWV0YW1vcnBo
        IikpLG49e3JlbW92ZTpmdW5jdGlvbih0KXt0Lm1vcnBoLnJlbW92ZSgpLGUo
        KX0scHJlcGVuZDpmdW5jdGlvbih0LHIpe3QubW9ycGgucHJlcGVuZChyKSxl
        KCl9LGFmdGVyOmZ1bmN0aW9uKHQscil7dC5tb3JwaC5hZnRlcihyKSxlKCl9
        LGh0bWw6ZnVuY3Rpb24odCxyKXt0Lm1vcnBoLmh0bWwociksZSgpfSxyZXBs
        YWNlOmZ1bmN0aW9uKHQpe3ZhciByPXQubW9ycGg7dC50cmFuc2l0aW9uVG8o
        InByZVJlbmRlciIpLEVtYmVyLnJ1bi5zY2hlZHVsZSgicmVuZGVyIix0aGlz
        LGZ1bmN0aW9uKCl7aWYoIXQuaXNEZXN0cm95aW5nKXt0LmNsZWFyUmVuZGVy
        ZWRDaGlsZHJlbigpO3ZhciBuPXQucmVuZGVyVG9CdWZmZXIoKTt0Lmludm9r
        ZVJlY3Vyc2l2ZWx5KGZ1bmN0aW9uKGUpe2UucHJvcGVydHlXaWxsQ2hhbmdl
        KCJlbGVtZW50Iil9KSx0LnRyaWdnZXJSZWN1cnNpdmVseSgid2lsbEluc2Vy
        dEVsZW1lbnQiKSxyLnJlcGxhY2VXaXRoKG4uc3RyaW5nKCkpLHQudHJhbnNp
        dGlvblRvKCJpbkRPTSIpLHQuaW52b2tlUmVjdXJzaXZlbHkoZnVuY3Rpb24o
        ZSl7ZS5wcm9wZXJ0eURpZENoYW5nZSgiZWxlbWVudCIpfSksdC50cmlnZ2Vy
        UmVjdXJzaXZlbHkoImRpZEluc2VydEVsZW1lbnQiKSxlKCl9fSl9LGVtcHR5
        OmZ1bmN0aW9uKHQpe3QubW9ycGguaHRtbCgiIiksZSgpfX07RW1iZXIuX01l
        dGFtb3JwaD1FbWJlci5NaXhpbi5jcmVhdGUoe2lzVmlydHVhbDohMCx0YWdO
        YW1lOiIiLGluc3RydW1lbnROYW1lOiJtZXRhbW9ycGgiLGluaXQ6ZnVuY3Rp
        b24oKXt0aGlzLl9zdXBlcigpLHRoaXMubW9ycGg9cigpfSxiZWZvcmVSZW5k
        ZXI6ZnVuY3Rpb24oZSl7ZS5wdXNoKHRoaXMubW9ycGguc3RhcnRUYWcoKSks
        ZS5wdXNoT3BlbmluZ1RhZygpfSxhZnRlclJlbmRlcjpmdW5jdGlvbihlKXtl
        LnB1c2hDbG9zaW5nVGFnKCksZS5wdXNoKHRoaXMubW9ycGguZW5kVGFnKCkp
        fSxjcmVhdGVFbGVtZW50OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5yZW5kZXJU
        b0J1ZmZlcigpO3RoaXMub3V0ZXJIVE1MPWUuc3RyaW5nKCksdGhpcy5jbGVh
        ckJ1ZmZlcigpfSxkb21NYW5hZ2VyOm59KSxFbWJlci5fTWV0YW1vcnBoVmll
        dz1FbWJlci5WaWV3LmV4dGVuZChFbWJlci5fTWV0YW1vcnBoKSxFbWJlci5f
        U2ltcGxlTWV0YW1vcnBoVmlldz1FbWJlci5Db3JlVmlldy5leHRlbmQoRW1i
        ZXIuX01ldGFtb3JwaCl9KCksZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCxy
        LG4pe3RoaXMucGF0aD1lLHRoaXMucGF0aFJvb3Q9dCx0aGlzLmlzRXNjYXBl
        ZD1yLHRoaXMudGVtcGxhdGVEYXRhPW4sdGhpcy5tb3JwaD1vKCksdGhpcy5z
        dGF0ZT0icHJlUmVuZGVyIix0aGlzLnVwZGF0ZUlkPW51bGwsdGhpcy5fcGFy
        ZW50Vmlldz1udWxsLHRoaXMuYnVmZmVyPW51bGx9dmFyIHI9RW1iZXIuZ2V0
        LG49RW1iZXIuc2V0LGk9RW1iZXIuSGFuZGxlYmFycy5nZXQsbz10KCJtZXRh
        bW9ycGgiKTtFbWJlci5fU2ltcGxlSGFuZGxlYmFyc1ZpZXc9ZSxlLnByb3Rv
        dHlwZT17aXNWaXJ0dWFsOiEwLGlzVmlldzohMCxkZXN0cm95OmZ1bmN0aW9u
        KCl7dGhpcy51cGRhdGVJZCYmKEVtYmVyLnJ1bi5jYW5jZWwodGhpcy51cGRh
        dGVJZCksdGhpcy51cGRhdGVJZD1udWxsKSx0aGlzLl9wYXJlbnRWaWV3JiZ0
        aGlzLl9wYXJlbnRWaWV3LnJlbW92ZUNoaWxkKHRoaXMpLHRoaXMubW9ycGg9
        bnVsbCx0aGlzLnN0YXRlPSJkZXN0cm95ZWQifSxwcm9wZXJ0eVdpbGxDaGFu
        Z2U6RW1iZXIuSyxwcm9wZXJ0eURpZENoYW5nZTpFbWJlci5LLG5vcm1hbGl6
        ZWRWYWx1ZTpmdW5jdGlvbigpe3ZhciBlLHQscj10aGlzLnBhdGgsbj10aGlz
        LnBhdGhSb290O3JldHVybiIiPT09cj9lPW46KHQ9dGhpcy50ZW1wbGF0ZURh
        dGEsZT1pKG4scix7ZGF0YTp0fSkpLGV9LHJlbmRlclRvQnVmZmVyOmZ1bmN0
        aW9uKGUpe3ZhciB0PSIiO3QrPXRoaXMubW9ycGguc3RhcnRUYWcoKSx0Kz10
        aGlzLnJlbmRlcigpLHQrPXRoaXMubW9ycGguZW5kVGFnKCksZS5wdXNoKHQp
        fSxyZW5kZXI6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmlzRXNjYXBlZCx0PXRo
        aXMubm9ybWFsaXplZFZhbHVlKCk7cmV0dXJuIG51bGw9PT10fHx2b2lkIDA9
        PT10P3Q9IiI6dCBpbnN0YW5jZW9mIEhhbmRsZWJhcnMuU2FmZVN0cmluZ3x8
        KHQ9U3RyaW5nKHQpKSxlJiYodD1IYW5kbGViYXJzLlV0aWxzLmVzY2FwZUV4
        cHJlc3Npb24odCkpLHR9LHJlcmVuZGVyOmZ1bmN0aW9uKCl7c3dpdGNoKHRo
        aXMuc3RhdGUpe2Nhc2UicHJlUmVuZGVyIjpjYXNlImRlc3Ryb3llZCI6YnJl
        YWs7Y2FzZSJpbkJ1ZmZlciI6dGhyb3cgbmV3IEVtYmVyLkVycm9yKCJTb21l
        dGhpbmcgeW91IGRpZCB0cmllZCB0byByZXBsYWNlIGFuIHt7ZXhwcmVzc2lv
        bn19IGJlZm9yZSBpdCB3YXMgaW5zZXJ0ZWQgaW50byB0aGUgRE9NLiIpO2Nh
        c2UiaGFzRWxlbWVudCI6Y2FzZSJpbkRPTSI6dGhpcy51cGRhdGVJZD1FbWJl
        ci5ydW4uc2NoZWR1bGVPbmNlKCJyZW5kZXIiLHRoaXMsInVwZGF0ZSIpfXJl
        dHVybiB0aGlzfSx1cGRhdGU6ZnVuY3Rpb24oKXt0aGlzLnVwZGF0ZUlkPW51
        bGwsdGhpcy5tb3JwaC5odG1sKHRoaXMucmVuZGVyKCkpfSx0cmFuc2l0aW9u
        VG86ZnVuY3Rpb24oZSl7dGhpcy5zdGF0ZT1lfX07dmFyIGE9RW1iZXIuVmll
        dy5jbG9uZVN0YXRlcyhFbWJlci5WaWV3LnN0YXRlcykscz1FbWJlci5tZXJn
        ZTtzKGEuX2RlZmF1bHQse3JlcmVuZGVySWZOZWVkZWQ6RW1iZXIuS30pLHMo
        YS5pbkRPTSx7cmVyZW5kZXJJZk5lZWRlZDpmdW5jdGlvbihlKXtlLm5vcm1h
        bGl6ZWRWYWx1ZSgpIT09ZS5fbGFzdE5vcm1hbGl6ZWRWYWx1ZSYmZS5yZXJl
        bmRlcigpfX0pLEVtYmVyLl9IYW5kbGViYXJzQm91bmRWaWV3PUVtYmVyLl9N
        ZXRhbW9ycGhWaWV3LmV4dGVuZCh7aW5zdHJ1bWVudE5hbWU6ImJvdW5kSGFu
        ZGxlYmFycyIsc3RhdGVzOmEsc2hvdWxkRGlzcGxheUZ1bmM6bnVsbCxwcmVz
        ZXJ2ZUNvbnRleHQ6ITEscHJldmlvdXNDb250ZXh0Om51bGwsZGlzcGxheVRl
        bXBsYXRlOm51bGwsaW52ZXJzZVRlbXBsYXRlOm51bGwscGF0aDpudWxsLHBh
        dGhSb290Om51bGwsbm9ybWFsaXplZFZhbHVlOmZ1bmN0aW9uKCl7dmFyIGUs
        dCxuPXIodGhpcywicGF0aCIpLG89cih0aGlzLCJwYXRoUm9vdCIpLGE9cih0
        aGlzLCJ2YWx1ZU5vcm1hbGl6ZXJGdW5jIik7cmV0dXJuIiI9PT1uP2U9bzoo
        dD1yKHRoaXMsInRlbXBsYXRlRGF0YSIpLGU9aShvLG4se2RhdGE6dH0pKSxh
        P2EoZSk6ZX0scmVyZW5kZXJJZk5lZWRlZDpmdW5jdGlvbigpe3RoaXMuY3Vy
        cmVudFN0YXRlLnJlcmVuZGVySWZOZWVkZWQodGhpcyl9LHJlbmRlcjpmdW5j
        dGlvbihlKXt2YXIgdD1yKHRoaXMsImlzRXNjYXBlZCIpLGk9cih0aGlzLCJz
        aG91bGREaXNwbGF5RnVuYyIpLG89cih0aGlzLCJwcmVzZXJ2ZUNvbnRleHQi
        KSxhPXIodGhpcywicHJldmlvdXNDb250ZXh0Iikscz1yKHRoaXMsIl9jb250
        ZXh0Q29udHJvbGxlciIpLHU9cih0aGlzLCJpbnZlcnNlVGVtcGxhdGUiKSxs
        PXIodGhpcywiZGlzcGxheVRlbXBsYXRlIiksYz10aGlzLm5vcm1hbGl6ZWRW
        YWx1ZSgpO2lmKHRoaXMuX2xhc3ROb3JtYWxpemVkVmFsdWU9YyxpKGMpKWlm
        KG4odGhpcywidGVtcGxhdGUiLGwpLG8pbih0aGlzLCJfY29udGV4dCIsYSk7
        ZWxzZXtpZighbClyZXR1cm4gbnVsbD09PWN8fHZvaWQgMD09PWM/Yz0iIjpj
        IGluc3RhbmNlb2YgSGFuZGxlYmFycy5TYWZlU3RyaW5nfHwoYz1TdHJpbmco
        YykpLHQmJihjPUhhbmRsZWJhcnMuVXRpbHMuZXNjYXBlRXhwcmVzc2lvbihj
        KSksZS5wdXNoKGMpLHZvaWQgMDtzJiYobihzLCJjb250ZW50IixjKSxjPXMp
        LG4odGhpcywiX2NvbnRleHQiLGMpfWVsc2UgdT8obih0aGlzLCJ0ZW1wbGF0
        ZSIsdSksbz9uKHRoaXMsIl9jb250ZXh0IixhKTpuKHRoaXMsIl9jb250ZXh0
        IixjKSk6bih0aGlzLCJ0ZW1wbGF0ZSIsZnVuY3Rpb24oKXtyZXR1cm4iIn0p
        O3JldHVybiB0aGlzLl9zdXBlcihlKX19KX0oKSxmdW5jdGlvbigpe2Z1bmN0
        aW9uIGUoZSl7cmV0dXJuIUVtYmVyLmlzTm9uZShlKX1mdW5jdGlvbiB0KGUs
        dCxyLG4saSx1KXt2YXIgbCxjLGgsbT10LmRhdGEscD10LmZuLGY9dC5pbnZl
        cnNlLGQ9bS52aWV3LGI9dGhpcztpZihsPWEoYixlLG0pLCJvYmplY3QiPT10
        eXBlb2YgdGhpcyl7aWYobS5pbnNpZGVHcm91cCl7Yz1mdW5jdGlvbigpe0Vt
        YmVyLnJ1bi5vbmNlKGQsInJlcmVuZGVyIil9O3ZhciB2LEUsZz1vKGIsZSx0
        KTtnPWk/aShnKTpnLEU9cj9iOmcsbihnKT92PXA6ZiYmKHY9ZiksdihFLHtk
        YXRhOnQuZGF0YX0pfWVsc2V7dmFyIHk9ZC5jcmVhdGVDaGlsZFZpZXcoRW1i
        ZXIuX0hhbmRsZWJhcnNCb3VuZFZpZXcse3ByZXNlcnZlQ29udGV4dDpyLHNo
        b3VsZERpc3BsYXlGdW5jOm4sdmFsdWVOb3JtYWxpemVyRnVuYzppLGRpc3Bs
        YXlUZW1wbGF0ZTpwLGludmVyc2VUZW1wbGF0ZTpmLHBhdGg6ZSxwYXRoUm9v
        dDpiLHByZXZpb3VzQ29udGV4dDpiLGlzRXNjYXBlZDohdC5oYXNoLnVuZXNj
        YXBlZCx0ZW1wbGF0ZURhdGE6dC5kYXRhfSk7dC5oYXNoLmNvbnRyb2xsZXIm
        Jnkuc2V0KCJfY29udGV4dENvbnRyb2xsZXIiLHRoaXMuY29udGFpbmVyLmxv
        b2t1cEZhY3RvcnkoImNvbnRyb2xsZXI6Iit0Lmhhc2guY29udHJvbGxlciku
        Y3JlYXRlKHtjb250YWluZXI6Yi5jb250YWluZXIscGFyZW50Q29udHJvbGxl
        cjpiLHRhcmdldDpifSkpLGQuYXBwZW5kQ2hpbGQoeSksYz1mdW5jdGlvbigp
        e0VtYmVyLnJ1bi5zY2hlZHVsZU9uY2UoInJlbmRlciIseSwicmVyZW5kZXJJ
        Zk5lZWRlZCIpfX1pZigiIiE9PWwucGF0aCYmKGQucmVnaXN0ZXJPYnNlcnZl
        cihsLnJvb3QsbC5wYXRoLGMpLHUpKWZvcihoPTA7aDx1Lmxlbmd0aDtoKysp
        ZC5yZWdpc3Rlck9ic2VydmVyKGwucm9vdCxsLnBhdGgrIi4iK3VbaF0sYyl9
        ZWxzZSBtLmJ1ZmZlci5wdXNoKHMoYixlLHQpKX1mdW5jdGlvbiByKGUsdCxy
        KXt2YXIgbixpLG8sdSxsPXIuZGF0YSxjPWwudmlldztpZihuPWEoZSx0LGwp
        LG89bi5yb290LG8mJiJvYmplY3QiPT10eXBlb2Ygbyl7aWYobC5pbnNpZGVH
        cm91cClpPWZ1bmN0aW9uKCl7RW1iZXIucnVuLm9uY2UoYywicmVyZW5kZXIi
        KX0sdT1zKGUsdCxyKSxsLmJ1ZmZlci5wdXNoKHUpO2Vsc2V7dmFyIGg9bmV3
        IEVtYmVyLl9TaW1wbGVIYW5kbGViYXJzVmlldyh0LGUsIXIuaGFzaC51bmVz
        Y2FwZWQsci5kYXRhKTtoLl9wYXJlbnRWaWV3PWMsYy5hcHBlbmRDaGlsZCho
        KSxpPWZ1bmN0aW9uKCl7RW1iZXIucnVuLnNjaGVkdWxlT25jZSgicmVuZGVy
        IixoLCJyZXJlbmRlciIpfX0iIiE9PW4ucGF0aCYmYy5yZWdpc3Rlck9ic2Vy
        dmVyKG4ucm9vdCxuLnBhdGgsaSl9ZWxzZSB1PXMoZSx0LHIpLGwuYnVmZmVy
        LnB1c2godSl9ZnVuY3Rpb24gbihlKXt2YXIgdD1lJiZpKGUsImlzVHJ1dGh5
        Iik7cmV0dXJuImJvb2xlYW4iPT10eXBlb2YgdD90OkVtYmVyLmlzQXJyYXko
        ZSk/MCE9PWkoZSwibGVuZ3RoIik6ISFlfXZhciBpPUVtYmVyLmdldCxvPShF
        bWJlci5zZXQsRW1iZXIuU3RyaW5nLmZtdCxFbWJlci5IYW5kbGViYXJzLmdl
        dCksYT1FbWJlci5IYW5kbGViYXJzLm5vcm1hbGl6ZVBhdGgscz1FbWJlci5I
        YW5kbGViYXJzLmdldEVzY2FwZWQsdT1FbWJlci5BcnJheVBvbHlmaWxscy5m
        b3JFYWNoLGw9RW1iZXIuY3JlYXRlLGM9RW1iZXIuSGFuZGxlYmFycyxoPWMu
        aGVscGVycztjLmJpbmQ9dCxjLnJlZ2lzdGVySGVscGVyKCJfdHJpYWdlTXVz
        dGFjaGUiLGZ1bmN0aW9uKGUsdCl7aWYoaFtlXSlyZXR1cm4gaFtlXS5jYWxs
        KHRoaXMsdCk7dmFyIHI9RW1iZXIuSGFuZGxlYmFycy5yZXNvbHZlSGVscGVy
        KHQuZGF0YS52aWV3LmNvbnRhaW5lcixlKTtyZXR1cm4gcj9yLmNhbGwodGhp
        cyx0KTpoLmJpbmQuY2FsbCh0aGlzLGUsdCl9KSxFbWJlci5IYW5kbGViYXJz
        LnJlc29sdmVIZWxwZXI9ZnVuY3Rpb24oZSx0KXtpZihlJiYtMSE9PXQuaW5k
        ZXhPZigiLSIpKXt2YXIgcj1lLmxvb2t1cCgiaGVscGVyOiIrdCk7aWYoIXIp
        e3ZhciBuPWUubG9va3VwKCJjb21wb25lbnQtbG9va3VwOm1haW4iKSxpPW4u
        bG9va3VwRmFjdG9yeSh0LGUpO2kmJihyPWMubWFrZVZpZXdIZWxwZXIoaSks
        ZS5yZWdpc3RlcigiaGVscGVyOiIrdCxyKSl9cmV0dXJuIHJ9fSxjLnJlZ2lz
        dGVySGVscGVyKCJiaW5kIixmdW5jdGlvbihuLGkpe3ZhciBvPWkuY29udGV4
        dHMmJmkuY29udGV4dHMubGVuZ3RoP2kuY29udGV4dHNbMF06dGhpcztyZXR1
        cm4gaS5mbj90LmNhbGwobyxuLGksITEsZSk6cihvLG4saSl9KSxjLnJlZ2lz
        dGVySGVscGVyKCJib3VuZElmIixmdW5jdGlvbihlLHIpe3ZhciBpPXIuY29u
        dGV4dHMmJnIuY29udGV4dHMubGVuZ3RoP3IuY29udGV4dHNbMF06dGhpczty
        ZXR1cm4gdC5jYWxsKGksZSxyLCEwLG4sbixbImlzVHJ1dGh5IiwibGVuZ3Ro
        Il0pfSksYy5yZWdpc3RlckhlbHBlcigidW5ib3VuZElmIixmdW5jdGlvbihl
        LHQpe3ZhciByLGkscz10LmNvbnRleHRzJiZ0LmNvbnRleHRzLmxlbmd0aD90
        LmNvbnRleHRzWzBdOnRoaXMsdT10LmRhdGEsbD10LmZuLGM9dC5pbnZlcnNl
        O3I9YShzLGUsdSksaT1vKHMsZSx0KSxuKGkpfHwobD1jKSxsKHMse2RhdGE6
        dX0pfSksYy5yZWdpc3RlckhlbHBlcigid2l0aCIsZnVuY3Rpb24ocixuKXtp
        Zig0PT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIGksbyxzLHUsYztuPWFyZ3Vt
        ZW50c1szXSxpPWFyZ3VtZW50c1syXSxvPWFyZ3VtZW50c1swXTt2YXIgbT1s
        KG4pO2lmKG0uZGF0YT1sKG4uZGF0YSksbS5kYXRhLmtleXdvcmRzPWwobi5k
        YXRhLmtleXdvcmRzfHx7fSksRW1iZXIuaXNHbG9iYWxQYXRoKG8pKWM9bztl
        bHNle3U9YSh0aGlzLG8sbi5kYXRhKSxvPXUucGF0aCxzPXUucm9vdDt2YXIg
        cD1FbWJlci4kLmV4cGFuZG8rRW1iZXIuZ3VpZEZvcihzKTttLmRhdGEua2V5
        d29yZHNbcF09cyxjPW8/cCsiLiIrbzpwfXJldHVybiBFbWJlci5iaW5kKG0u
        ZGF0YS5rZXl3b3JkcyxpLGMpLHQuY2FsbCh0aGlzLG8sbSwhMCxlKX1yZXR1
        cm4gaC5iaW5kLmNhbGwobi5jb250ZXh0c1swXSxyLG4pfSksYy5yZWdpc3Rl
        ckhlbHBlcigiaWYiLGZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQuZGF0YS5pc1Vu
        Ym91bmQ/aC51bmJvdW5kSWYuY2FsbCh0LmNvbnRleHRzWzBdLGUsdCk6aC5i
        b3VuZElmLmNhbGwodC5jb250ZXh0c1swXSxlLHQpfSksYy5yZWdpc3Rlckhl
        bHBlcigidW5sZXNzIixmdW5jdGlvbihlLHQpe3ZhciByPXQuZm4sbj10Lmlu
        dmVyc2U7cmV0dXJuIHQuZm49bix0LmludmVyc2U9cix0LmRhdGEuaXNVbmJv
        dW5kP2gudW5ib3VuZElmLmNhbGwodC5jb250ZXh0c1swXSxlLHQpOmguYm91
        bmRJZi5jYWxsKHQuY29udGV4dHNbMF0sZSx0KX0pLGMucmVnaXN0ZXJIZWxw
        ZXIoImJpbmQtYXR0ciIsZnVuY3Rpb24oZSl7dmFyIHQ9ZS5oYXNoLHI9ZS5k
        YXRhLnZpZXcsbj1bXSxpPXRoaXMscz0rK0VtYmVyLnV1aWQsbD10WyJjbGFz
        cyJdO2lmKG51bGwhPWwpe3ZhciBoPWMuYmluZENsYXNzZXModGhpcyxsLHIs
        cyxlKTtuLnB1c2goJ2NsYXNzPSInK0hhbmRsZWJhcnMuVXRpbHMuZXNjYXBl
        RXhwcmVzc2lvbihoLmpvaW4oIiAiKSkrJyInKSxkZWxldGUgdFsiY2xhc3Mi
        XX12YXIgbT1FbWJlci5rZXlzKHQpO3JldHVybiB1LmNhbGwobSxmdW5jdGlv
        bih1KXt2YXIgbCxjPXRbdV07bD1hKGksYyxlLmRhdGEpO3ZhciBoLG0scD0i
        dGhpcyI9PT1jP2wucm9vdDpvKGksYyxlKSxmPUVtYmVyLnR5cGVPZihwKTto
        PWZ1bmN0aW9uKCl7dmFyIHQ9byhpLGMsZSksbj1yLiQoIltkYXRhLWJpbmRh
        dHRyLSIrcysiPSciK3MrIiddIik7cmV0dXJuIG4mJjAhPT1uLmxlbmd0aD8o
        RW1iZXIuVmlldy5hcHBseUF0dHJpYnV0ZUJpbmRpbmdzKG4sdSx0KSx2b2lk
        IDApOihFbWJlci5yZW1vdmVPYnNlcnZlcihsLnJvb3QsbC5wYXRoLG0pLHZv
        aWQgMCl9LCJ0aGlzIj09PWN8fGwuaXNLZXl3b3JkJiYiIj09PWwucGF0aHx8
        ci5yZWdpc3Rlck9ic2VydmVyKGwucm9vdCxsLnBhdGgsaCksInN0cmluZyI9
        PT1mfHwibnVtYmVyIj09PWYmJiFpc05hTihwKT9uLnB1c2godSsnPSInK0hh
        bmRsZWJhcnMuVXRpbHMuZXNjYXBlRXhwcmVzc2lvbihwKSsnIicpOnAmJiJi
        b29sZWFuIj09PWYmJm4ucHVzaCh1Kyc9IicrdSsnIicpfSx0aGlzKSxuLnB1
        c2goImRhdGEtYmluZGF0dHItIitzKyc9IicrcysnIicpLG5ldyBjLlNhZmVT
        dHJpbmcobi5qb2luKCIgIikpfSksYy5yZWdpc3RlckhlbHBlcigiYmluZEF0
        dHIiLGZ1bmN0aW9uKCl7cmV0dXJuIGMuaGVscGVyc1siYmluZC1hdHRyIl0u
        YXBwbHkodGhpcyxhcmd1bWVudHMpfSksYy5iaW5kQ2xhc3Nlcz1mdW5jdGlv
        bihlLHQscixuLGkpe3ZhciBzLGwsYyxoPVtdLG09ZnVuY3Rpb24oZSx0LHIp
        e3ZhciBuLGk9dC5wYXRoO3JldHVybiBuPSJ0aGlzIj09PWk/ZToiIj09PWk/
        ITA6byhlLGksciksRW1iZXIuVmlldy5fY2xhc3NTdHJpbmdGb3JWYWx1ZShp
        LG4sdC5jbGFzc05hbWUsdC5mYWxzeUNsYXNzTmFtZSl9O3JldHVybiB1LmNh
        bGwodC5zcGxpdCgiICIpLGZ1bmN0aW9uKHQpe3ZhciBvLHUscCxmLGQ9RW1i
        ZXIuVmlldy5fcGFyc2VQcm9wZXJ0eVBhdGgodCksYj1kLnBhdGgsdj1lOyIi
        IT09YiYmInRoaXMiIT09YiYmKGY9YShlLGIsaS5kYXRhKSx2PWYucm9vdCxi
        PWYucGF0aCksdT1mdW5jdGlvbigpe3M9bShlLGQsaSksYz1uP3IuJCgiW2Rh
        dGEtYmluZGF0dHItIituKyI9JyIrbisiJ10iKTpyLiQoKSxjJiYwIT09Yy5s
        ZW5ndGg/KG8mJmMucmVtb3ZlQ2xhc3Mobykscz8oYy5hZGRDbGFzcyhzKSxv
        PXMpOm89bnVsbCk6RW1iZXIucmVtb3ZlT2JzZXJ2ZXIodixiLHApfSwiIiE9
        PWImJiJ0aGlzIiE9PWImJnIucmVnaXN0ZXJPYnNlcnZlcih2LGIsdSksbD1t
        KGUsZCxpKSxsJiYoaC5wdXNoKGwpLG89bCl9KSxofX0oKSxmdW5jdGlvbigp
        e2Z1bmN0aW9uIGUoZSxyKXt2YXIgbj1yLmhhc2gsaT1yLmhhc2hUeXBlcztm
        b3IodmFyIG8gaW4gbilpZigiSUQiPT09aVtvXSl7dmFyIGE9bltvXTtFbWJl
        ci5JU19CSU5ESU5HLnRlc3Qobyl8fChuW28rIkJpbmRpbmciXT1hLGlbbysi
        QmluZGluZyJdPSJTVFJJTkciLGRlbGV0ZSBuW29dLGRlbGV0ZSBpW29dKX1u
        Lmhhc093blByb3BlcnR5KCJpZEJpbmRpbmciKSYmKG4uaWQ9dC5nZXQoZSxu
        LmlkQmluZGluZyxyKSxpLmlkPSJTVFJJTkciLGRlbGV0ZSBuLmlkQmluZGlu
        ZyxkZWxldGUgaS5pZEJpbmRpbmcpfXZhciB0PShFbWJlci5nZXQsRW1iZXIu
        c2V0LEVtYmVyLkhhbmRsZWJhcnMpLHI9L15bYS16XS8sbj0vXnZpZXdcLi87
        dC5WaWV3SGVscGVyPUVtYmVyLk9iamVjdC5jcmVhdGUoe3Byb3BlcnRpZXNG
        cm9tSFRNTE9wdGlvbnM6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5oYXNoLHI9ZS5k
        YXRhLG49e30saT10WyJjbGFzcyJdLG89ITE7dC5pZCYmKG4uZWxlbWVudElk
        PXQuaWQsbz0hMCksdC50YWcmJihuLnRhZ05hbWU9dC50YWcsbz0hMCksaSYm
        KGk9aS5zcGxpdCgiICIpLG4uY2xhc3NOYW1lcz1pLG89ITApLHQuY2xhc3NC
        aW5kaW5nJiYobi5jbGFzc05hbWVCaW5kaW5ncz10LmNsYXNzQmluZGluZy5z
        cGxpdCgiICIpLG89ITApLHQuY2xhc3NOYW1lQmluZGluZ3MmJih2b2lkIDA9
        PT1uLmNsYXNzTmFtZUJpbmRpbmdzJiYobi5jbGFzc05hbWVCaW5kaW5ncz1b
        XSksbi5jbGFzc05hbWVCaW5kaW5ncz1uLmNsYXNzTmFtZUJpbmRpbmdzLmNv
        bmNhdCh0LmNsYXNzTmFtZUJpbmRpbmdzLnNwbGl0KCIgIikpLG89ITApLHQu
        YXR0cmlidXRlQmluZGluZ3MmJihuLmF0dHJpYnV0ZUJpbmRpbmdzPW51bGws
        bz0hMCksbyYmKHQ9RW1iZXIuJC5leHRlbmQoe30sdCksZGVsZXRlIHQuaWQs
        ZGVsZXRlIHQudGFnLGRlbGV0ZSB0WyJjbGFzcyJdLGRlbGV0ZSB0LmNsYXNz
        QmluZGluZyk7dmFyIGE7Zm9yKHZhciBzIGluIHQpdC5oYXNPd25Qcm9wZXJ0
        eShzKSYmRW1iZXIuSVNfQklORElORy50ZXN0KHMpJiYic3RyaW5nIj09dHlw
        ZW9mIHRbc10mJihhPXRoaXMuY29udGV4dHVhbGl6ZUJpbmRpbmdQYXRoKHRb
        c10sciksYSYmKHRbc109YSkpO2lmKG4uY2xhc3NOYW1lQmluZGluZ3MpZm9y
        KHZhciB1IGluIG4uY2xhc3NOYW1lQmluZGluZ3Mpe3ZhciBsPW4uY2xhc3NO
        YW1lQmluZGluZ3NbdV07aWYoInN0cmluZyI9PXR5cGVvZiBsKXt2YXIgYz1F
        bWJlci5WaWV3Ll9wYXJzZVByb3BlcnR5UGF0aChsKTthPXRoaXMuY29udGV4
        dHVhbGl6ZUJpbmRpbmdQYXRoKGMucGF0aCxyKSxhJiYobi5jbGFzc05hbWVC
        aW5kaW5nc1t1XT1hK2MuY2xhc3NOYW1lcyl9fXJldHVybiBFbWJlci4kLmV4
        dGVuZCh0LG4pfSxjb250ZXh0dWFsaXplQmluZGluZ1BhdGg6ZnVuY3Rpb24o
        ZSx0KXt2YXIgcj1FbWJlci5IYW5kbGViYXJzLm5vcm1hbGl6ZVBhdGgobnVs
        bCxlLHQpO3JldHVybiByLmlzS2V5d29yZD8idGVtcGxhdGVEYXRhLmtleXdv
        cmRzLiIrZTpFbWJlci5pc0dsb2JhbFBhdGgoZSk/bnVsbDoidGhpcyI9PT1l
        fHwiIj09PWU/Il9wYXJlbnRWaWV3LmNvbnRleHQiOiJfcGFyZW50Vmlldy5j
        b250ZXh0LiIrZX0saGVscGVyOmZ1bmN0aW9uKGksbyxhKXt2YXIgcyx1PWEu
        ZGF0YSxsPWEuZm47ZShpLGEpLHM9InN0cmluZyI9PXR5cGVvZiBvPyJTVFJJ
        TkciPT09YS50eXBlc1swXSYmci50ZXN0KG8pJiYhbi50ZXN0KG8pP3Uudmll
        dy5jb250YWluZXIubG9va3VwRmFjdG9yeSgidmlldzoiK28pOnQuZ2V0KGks
        byxhKTpvO3ZhciBjPXRoaXMucHJvcGVydGllc0Zyb21IVE1MT3B0aW9ucyhh
        LGkpLGg9dS52aWV3O2MudGVtcGxhdGVEYXRhPXU7dmFyIG09cy5wcm90bz9z
        LnByb3RvKCk6cztsJiYoYy50ZW1wbGF0ZT1sKSxtLmNvbnRyb2xsZXJ8fG0u
        Y29udHJvbGxlckJpbmRpbmd8fGMuY29udHJvbGxlcnx8Yy5jb250cm9sbGVy
        QmluZGluZ3x8KGMuX2NvbnRleHQ9aSksaC5hcHBlbmRDaGlsZChzLGMpfX0p
        LHQucmVnaXN0ZXJIZWxwZXIoInZpZXciLGZ1bmN0aW9uKGUscil7cmV0dXJu
        IGUmJmUuZGF0YSYmZS5kYXRhLmlzUmVuZGVyRGF0YSYmKHI9ZSxlPSJFbWJl
        ci5WaWV3IiksdC5WaWV3SGVscGVyLmhlbHBlcih0aGlzLGUscil9KX0oKSxm
        dW5jdGlvbigpe3t2YXIgZT1FbWJlci5nZXQsdD1FbWJlci5IYW5kbGViYXJz
        LmdldDtFbWJlci5TdHJpbmcuZm10fUVtYmVyLkhhbmRsZWJhcnMucmVnaXN0
        ZXJIZWxwZXIoImNvbGxlY3Rpb24iLGZ1bmN0aW9uKHIsbil7ciYmci5kYXRh
        JiZyLmRhdGEuaXNSZW5kZXJEYXRhJiYobj1yLHI9dm9pZCAwKTt7dmFyIGks
        byxhLHM9bi5mbix1PW4uZGF0YSxsPW4uaW52ZXJzZTtuLmRhdGEudmlld31y
        PyhpPXUua2V5d29yZHMuY29udHJvbGxlcixvPWkmJmkuY29udGFpbmVyLGE9
        dCh0aGlzLHIsbil8fG8ubG9va3VwRmFjdG9yeSgidmlldzoiK3IpKTphPUVt
        YmVyLkNvbGxlY3Rpb25WaWV3O3ZhciBjLGgsbT1uLmhhc2gscD17fSxmPWEu
        cHJvdG8oKTttLml0ZW1WaWV3PyhpPXUua2V5d29yZHMuY29udHJvbGxlcixv
        PWkuY29udGFpbmVyLGg9by5sb29rdXBGYWN0b3J5KCJ2aWV3OiIrbS5pdGVt
        VmlldykpOmg9bS5pdGVtVmlld0NsYXNzP3QoZixtLml0ZW1WaWV3Q2xhc3Ms
        bik6Zi5pdGVtVmlld0NsYXNzLGRlbGV0ZSBtLml0ZW1WaWV3Q2xhc3MsZGVs
        ZXRlIG0uaXRlbVZpZXc7Zm9yKHZhciBkIGluIG0pbS5oYXNPd25Qcm9wZXJ0
        eShkKSYmKGM9ZC5tYXRjaCgvXml0ZW0oLikoLiopJC8pLGMmJiJpdGVtQ29u
        dHJvbGxlciIhPT1kJiYocFtjWzFdLnRvTG93ZXJDYXNlKCkrY1syXV09bVtk
        XSxkZWxldGUgbVtkXSkpO3MmJihwLnRlbXBsYXRlPXMsZGVsZXRlIG4uZm4p
        O3ZhciBiO2wmJmwhPT1FbWJlci5IYW5kbGViYXJzLlZNLm5vb3A/KGI9ZShm
        LCJlbXB0eVZpZXdDbGFzcyIpLGI9Yi5leHRlbmQoe3RlbXBsYXRlOmwsdGFn
        TmFtZTpwLnRhZ05hbWV9KSk6bS5lbXB0eVZpZXdDbGFzcyYmKGI9dCh0aGlz
        LG0uZW1wdHlWaWV3Q2xhc3MsbikpLGImJihtLmVtcHR5Vmlldz1iKSxtLmtl
        eXdvcmR8fChwLl9jb250ZXh0PUVtYmVyLmNvbXB1dGVkLmFsaWFzKCJjb250
        ZW50IikpO3ZhciB2PUVtYmVyLkhhbmRsZWJhcnMuVmlld0hlbHBlci5wcm9w
        ZXJ0aWVzRnJvbUhUTUxPcHRpb25zKHtkYXRhOnUsaGFzaDpwfSx0aGlzKTty
        ZXR1cm4gbS5pdGVtVmlld0NsYXNzPWguZXh0ZW5kKHYpLEVtYmVyLkhhbmRs
        ZWJhcnMuaGVscGVycy52aWV3LmNhbGwodGhpcyxhLG4pfSl9KCksZnVuY3Rp
        b24oKXt2YXIgZT1FbWJlci5IYW5kbGViYXJzLmdldDtFbWJlci5IYW5kbGVi
        YXJzLnJlZ2lzdGVySGVscGVyKCJ1bmJvdW5kIixmdW5jdGlvbih0LHIpe3Zh
        ciBuLGksbyxhPWFyZ3VtZW50c1thcmd1bWVudHMubGVuZ3RoLTFdO3JldHVy
        biBhcmd1bWVudHMubGVuZ3RoPjI/KGEuZGF0YS5pc1VuYm91bmQ9ITAsbj1F
        bWJlci5IYW5kbGViYXJzLmhlbHBlcnNbYXJndW1lbnRzWzBdXXx8RW1iZXIu
        SGFuZGxlYmFycy5oZWxwZXJzLmhlbHBlck1pc3Npbmcsbz1uLmFwcGx5KHRo
        aXMsQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpKSxk
        ZWxldGUgYS5kYXRhLmlzVW5ib3VuZCxvKTooaT1yLmNvbnRleHRzJiZyLmNv
        bnRleHRzLmxlbmd0aD9yLmNvbnRleHRzWzBdOnRoaXMsZShpLHQscikpfSl9
        KCksZnVuY3Rpb24oKXt2YXIgZT0oRW1iZXIuZ2V0LEVtYmVyLkhhbmRsZWJh
        cnMuZ2V0KSx0PUVtYmVyLkhhbmRsZWJhcnMubm9ybWFsaXplUGF0aCxyPVtd
        LnNsaWNlO0VtYmVyLkhhbmRsZWJhcnMucmVnaXN0ZXJIZWxwZXIoImxvZyIs
        ZnVuY3Rpb24oKXt2YXIgbj1yLmNhbGwoYXJndW1lbnRzLDAsLTEpLGk9YXJn
        dW1lbnRzW2FyZ3VtZW50cy5sZW5ndGgtMV0sbz1FbWJlci5Mb2dnZXIubG9n
        LGE9W10scz0hMTtzPSEwO2Zvcih2YXIgdT0wO3U8bi5sZW5ndGg7dSsrKXt2
        YXIgbD1pLnR5cGVzW3VdO2lmKCJJRCIhPT1sJiZzKWEucHVzaChuW3VdKTtl
        bHNle3ZhciBjPWkuY29udGV4dHMmJmkuY29udGV4dHNbdV18fHRoaXMsaD10
        KGMsblt1XSxpLmRhdGEpOyJ0aGlzIj09PWgucGF0aD9hLnB1c2goaC5yb290
        KTphLnB1c2goZShoLnJvb3QsaC5wYXRoLGkpKX19by5hcHBseShvLGEpfSks
        RW1iZXIuSGFuZGxlYmFycy5yZWdpc3RlckhlbHBlcigiZGVidWdnZXIiLGZ1
        bmN0aW9uKCl7e3ZhciBlPXRoaXM7RW1iZXIuaW5zcGVjdChlKX19KX0oKSxm
        dW5jdGlvbigpe3t2YXIgZT1FbWJlci5nZXQsdD1FbWJlci5zZXQ7RW1iZXIu
        U3RyaW5nLmZtdH1FbWJlci5IYW5kbGViYXJzLkVhY2hWaWV3PUVtYmVyLkNv
        bGxlY3Rpb25WaWV3LmV4dGVuZChFbWJlci5fTWV0YW1vcnBoLHtpbml0OmZ1
        bmN0aW9uKCl7dmFyIHIsbj1lKHRoaXMsIml0ZW1Db250cm9sbGVyIik7aWYo
        bil7dmFyIGk9ZSh0aGlzLCJjb250cm9sbGVyLmNvbnRhaW5lciIpLmxvb2t1
        cEZhY3RvcnkoImNvbnRyb2xsZXI6YXJyYXkiKS5jcmVhdGUoe19pc1ZpcnR1
        YWw6ITAscGFyZW50Q29udHJvbGxlcjplKHRoaXMsImNvbnRyb2xsZXIiKSxp
        dGVtQ29udHJvbGxlcjpuLHRhcmdldDplKHRoaXMsImNvbnRyb2xsZXIiKSxf
        ZWFjaFZpZXc6dGhpc30pO3RoaXMuZGlzYWJsZUNvbnRlbnRPYnNlcnZlcnMo
        ZnVuY3Rpb24oKXt0KHRoaXMsImNvbnRlbnQiLGkpLHI9bmV3IEVtYmVyLkJp
        bmRpbmcoImNvbnRlbnQiLCJfZWFjaFZpZXcuZGF0YVNvdXJjZSIpLm9uZVdh
        eSgpLHIuY29ubmVjdChpKX0pLHQodGhpcywiX2FycmF5Q29udHJvbGxlciIs
        aSl9ZWxzZSB0aGlzLmRpc2FibGVDb250ZW50T2JzZXJ2ZXJzKGZ1bmN0aW9u
        KCl7cj1uZXcgRW1iZXIuQmluZGluZygiY29udGVudCIsImRhdGFTb3VyY2Ui
        KS5vbmVXYXkoKSxyLmNvbm5lY3QodGhpcyl9KTtyZXR1cm4gdGhpcy5fc3Vw
        ZXIoKX0sX2Fzc2VydEFycmF5TGlrZTpmdW5jdGlvbigpe30sZGlzYWJsZUNv
        bnRlbnRPYnNlcnZlcnM6ZnVuY3Rpb24oZSl7RW1iZXIucmVtb3ZlQmVmb3Jl
        T2JzZXJ2ZXIodGhpcywiY29udGVudCIsbnVsbCwiX2NvbnRlbnRXaWxsQ2hh
        bmdlIiksRW1iZXIucmVtb3ZlT2JzZXJ2ZXIodGhpcywiY29udGVudCIsbnVs
        bCwiX2NvbnRlbnREaWRDaGFuZ2UiKSxlLmNhbGwodGhpcyksRW1iZXIuYWRk
        QmVmb3JlT2JzZXJ2ZXIodGhpcywiY29udGVudCIsbnVsbCwiX2NvbnRlbnRX
        aWxsQ2hhbmdlIiksRW1iZXIuYWRkT2JzZXJ2ZXIodGhpcywiY29udGVudCIs
        bnVsbCwiX2NvbnRlbnREaWRDaGFuZ2UiKX0saXRlbVZpZXdDbGFzczpFbWJl
        ci5fTWV0YW1vcnBoVmlldyxlbXB0eVZpZXdDbGFzczpFbWJlci5fTWV0YW1v
        cnBoVmlldyxjcmVhdGVDaGlsZFZpZXc6ZnVuY3Rpb24ocixuKXtyPXRoaXMu
        X3N1cGVyKHIsbik7dmFyIGk9ZSh0aGlzLCJrZXl3b3JkIiksbz1lKHIsImNv
        bnRlbnQiKTtpZihpKXt2YXIgYT1lKHIsInRlbXBsYXRlRGF0YSIpO2E9RW1i
        ZXIuY29weShhKSxhLmtleXdvcmRzPXIuY2xvbmVLZXl3b3JkcygpLHQociwi
        dGVtcGxhdGVEYXRhIixhKSxhLmtleXdvcmRzW2ldPW99cmV0dXJuIG8mJm8u
        aXNDb250cm9sbGVyJiZ0KHIsImNvbnRyb2xsZXIiLG8pLHJ9LGRlc3Ryb3k6
        ZnVuY3Rpb24oKXtpZih0aGlzLl9zdXBlcigpKXt2YXIgdD1lKHRoaXMsIl9h
        cnJheUNvbnRyb2xsZXIiKTtyZXR1cm4gdCYmdC5kZXN0cm95KCksdGhpc319
        fSk7dmFyIHI9RW1iZXIuSGFuZGxlYmFycy5Hcm91cGVkRWFjaD1mdW5jdGlv
        bihlLHQscil7dmFyIG49dGhpcyxpPUVtYmVyLkhhbmRsZWJhcnMubm9ybWFs
        aXplUGF0aChlLHQsci5kYXRhKTt0aGlzLmNvbnRleHQ9ZSx0aGlzLnBhdGg9
        dCx0aGlzLm9wdGlvbnM9cix0aGlzLnRlbXBsYXRlPXIuZm4sdGhpcy5jb250
        YWluaW5nVmlldz1yLmRhdGEudmlldyx0aGlzLm5vcm1hbGl6ZWRSb290PWku
        cm9vdCx0aGlzLm5vcm1hbGl6ZWRQYXRoPWkucGF0aCx0aGlzLmNvbnRlbnQ9
        dGhpcy5sb29rdXBDb250ZW50KCksdGhpcy5hZGRDb250ZW50T2JzZXJ2ZXJz
        KCksdGhpcy5hZGRBcnJheU9ic2VydmVycygpLHRoaXMuY29udGFpbmluZ1Zp
        ZXcub24oIndpbGxDbGVhclJlbmRlciIsZnVuY3Rpb24oKXtuLmRlc3Ryb3ko
        KX0pfTtyLnByb3RvdHlwZT17Y29udGVudFdpbGxDaGFuZ2U6ZnVuY3Rpb24o
        KXt0aGlzLnJlbW92ZUFycmF5T2JzZXJ2ZXJzKCl9LGNvbnRlbnREaWRDaGFu
        Z2U6ZnVuY3Rpb24oKXt0aGlzLmNvbnRlbnQ9dGhpcy5sb29rdXBDb250ZW50
        KCksdGhpcy5hZGRBcnJheU9ic2VydmVycygpLHRoaXMucmVyZW5kZXJDb250
        YWluaW5nVmlldygpfSxjb250ZW50QXJyYXlXaWxsQ2hhbmdlOkVtYmVyLkss
        Y29udGVudEFycmF5RGlkQ2hhbmdlOmZ1bmN0aW9uKCl7dGhpcy5yZXJlbmRl
        ckNvbnRhaW5pbmdWaWV3KCl9LGxvb2t1cENvbnRlbnQ6ZnVuY3Rpb24oKXty
        ZXR1cm4gRW1iZXIuSGFuZGxlYmFycy5nZXQodGhpcy5ub3JtYWxpemVkUm9v
        dCx0aGlzLm5vcm1hbGl6ZWRQYXRoLHRoaXMub3B0aW9ucyl9LGFkZEFycmF5
        T2JzZXJ2ZXJzOmZ1bmN0aW9uKCl7dGhpcy5jb250ZW50JiZ0aGlzLmNvbnRl
        bnQuYWRkQXJyYXlPYnNlcnZlcih0aGlzLHt3aWxsQ2hhbmdlOiJjb250ZW50
        QXJyYXlXaWxsQ2hhbmdlIixkaWRDaGFuZ2U6ImNvbnRlbnRBcnJheURpZENo
        YW5nZSJ9KX0scmVtb3ZlQXJyYXlPYnNlcnZlcnM6ZnVuY3Rpb24oKXt0aGlz
        LmNvbnRlbnQmJnRoaXMuY29udGVudC5yZW1vdmVBcnJheU9ic2VydmVyKHRo
        aXMse3dpbGxDaGFuZ2U6ImNvbnRlbnRBcnJheVdpbGxDaGFuZ2UiLGRpZENo
        YW5nZToiY29udGVudEFycmF5RGlkQ2hhbmdlIn0pfSxhZGRDb250ZW50T2Jz
        ZXJ2ZXJzOmZ1bmN0aW9uKCl7RW1iZXIuYWRkQmVmb3JlT2JzZXJ2ZXIodGhp
        cy5ub3JtYWxpemVkUm9vdCx0aGlzLm5vcm1hbGl6ZWRQYXRoLHRoaXMsdGhp
        cy5jb250ZW50V2lsbENoYW5nZSksRW1iZXIuYWRkT2JzZXJ2ZXIodGhpcy5u
        b3JtYWxpemVkUm9vdCx0aGlzLm5vcm1hbGl6ZWRQYXRoLHRoaXMsdGhpcy5j
        b250ZW50RGlkQ2hhbmdlKX0scmVtb3ZlQ29udGVudE9ic2VydmVyczpmdW5j
        dGlvbigpe0VtYmVyLnJlbW92ZUJlZm9yZU9ic2VydmVyKHRoaXMubm9ybWFs
        aXplZFJvb3QsdGhpcy5ub3JtYWxpemVkUGF0aCx0aGlzLmNvbnRlbnRXaWxs
        Q2hhbmdlKSxFbWJlci5yZW1vdmVPYnNlcnZlcih0aGlzLm5vcm1hbGl6ZWRS
        b290LHRoaXMubm9ybWFsaXplZFBhdGgsdGhpcy5jb250ZW50RGlkQ2hhbmdl
        KX0scmVuZGVyOmZ1bmN0aW9uKCl7aWYodGhpcy5jb250ZW50KXt2YXIgdD10
        aGlzLmNvbnRlbnQscj1lKHQsImxlbmd0aCIpLG49dGhpcy5vcHRpb25zLmRh
        dGEsaT10aGlzLnRlbXBsYXRlO24uaW5zaWRlRWFjaD0hMDtmb3IodmFyIG89
        MDtyPm87bysrKWkodC5vYmplY3RBdChvKSx7ZGF0YTpufSl9fSxyZXJlbmRl
        ckNvbnRhaW5pbmdWaWV3OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztFbWJlci5y
        dW4uc2NoZWR1bGVPbmNlKCJyZW5kZXIiLHRoaXMsZnVuY3Rpb24oKXtlLmRl
        c3Ryb3llZHx8ZS5jb250YWluaW5nVmlldy5yZXJlbmRlcigpfSl9LGRlc3Ry
        b3k6ZnVuY3Rpb24oKXt0aGlzLnJlbW92ZUNvbnRlbnRPYnNlcnZlcnMoKSx0
        aGlzLmNvbnRlbnQmJnRoaXMucmVtb3ZlQXJyYXlPYnNlcnZlcnMoKSx0aGlz
        LmRlc3Ryb3llZD0hMH19LEVtYmVyLkhhbmRsZWJhcnMucmVnaXN0ZXJIZWxw
        ZXIoImVhY2giLGZ1bmN0aW9uKGUsdCl7aWYoND09PWFyZ3VtZW50cy5sZW5n
        dGgpe3ZhciByPWFyZ3VtZW50c1swXTt0PWFyZ3VtZW50c1szXSxlPWFyZ3Vt
        ZW50c1syXSwiIj09PWUmJihlPSJ0aGlzIiksdC5oYXNoLmtleXdvcmQ9cn1y
        ZXR1cm4gMT09PWFyZ3VtZW50cy5sZW5ndGgmJih0PWUsZT0idGhpcyIpLHQu
        aGFzaC5kYXRhU291cmNlQmluZGluZz1lLCF0LmRhdGEuaW5zaWRlR3JvdXB8
        fHQuaGFzaC5ncm91cGVkUm93c3x8dC5oYXNoLml0ZW1WaWV3Q2xhc3M/RW1i
        ZXIuSGFuZGxlYmFycy5oZWxwZXJzLmNvbGxlY3Rpb24uY2FsbCh0aGlzLCJF
        bWJlci5IYW5kbGViYXJzLkVhY2hWaWV3Iix0KToobmV3IEVtYmVyLkhhbmRs
        ZWJhcnMuR3JvdXBlZEVhY2godGhpcyxlLHQpLnJlbmRlcigpLHZvaWQgMCl9
        KX0oKSxmdW5jdGlvbigpe0VtYmVyLkhhbmRsZWJhcnMucmVnaXN0ZXJIZWxw
        ZXIoInRlbXBsYXRlIixmdW5jdGlvbigpe3JldHVybiBFbWJlci5IYW5kbGVi
        YXJzLmhlbHBlcnMucGFydGlhbC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9KX0o
        KSxmdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSl7cmV0dXJuIUVtYmVyLmlzTm9u
        ZShlKX1mdW5jdGlvbiB0KGUsdCxyKXt2YXIgbj10LnNwbGl0KCIvIiksaT1u
        W24ubGVuZ3RoLTFdO25bbi5sZW5ndGgtMV09Il8iK2k7dmFyIG89ci5kYXRh
        LnZpZXcsYT1uLmpvaW4oIi8iKSxzPW8udGVtcGxhdGVGb3JOYW1lKGEpLHU9
        IXMmJm8udGVtcGxhdGVGb3JOYW1lKHQpOyhzPXN8fHUpKGUse2RhdGE6ci5k
        YXRhfSl9RW1iZXIuSGFuZGxlYmFycy5yZWdpc3RlckhlbHBlcigicGFydGlh
        bCIsZnVuY3Rpb24ocixuKXt2YXIgaT1uLmNvbnRleHRzJiZuLmNvbnRleHRz
        Lmxlbmd0aD9uLmNvbnRleHRzWzBdOnRoaXM7cmV0dXJuIklEIj09PW4udHlw
        ZXNbMF0/KG4uZm49ZnVuY3Rpb24oZSxuKXt2YXIgaT1FbWJlci5IYW5kbGVi
        YXJzLmdldChlLHIsbik7dChlLGksbil9LEVtYmVyLkhhbmRsZWJhcnMuYmlu
        ZC5jYWxsKGkscixuLCEwLGUpKToodChpLHIsbiksdm9pZCAwKX0pfSgpLGZ1
        bmN0aW9uKCl7e3ZhciBlPUVtYmVyLmdldDtFbWJlci5zZXR9RW1iZXIuSGFu
        ZGxlYmFycy5yZWdpc3RlckhlbHBlcigieWllbGQiLGZ1bmN0aW9uKHQpe2Zv
        cih2YXIgcj10LmRhdGEudmlldztyJiYhZShyLCJsYXlvdXQiKTspcj1yLl9j
        b250ZXh0Vmlldz9yLl9jb250ZXh0VmlldzplKHIsInBhcmVudFZpZXciKTty
        Ll95aWVsZCh0aGlzLHQpfSl9KCksZnVuY3Rpb24oKXtFbWJlci5IYW5kbGVi
        YXJzLnJlZ2lzdGVySGVscGVyKCJsb2MiLGZ1bmN0aW9uKGUpe3JldHVybiBF
        bWJlci5TdHJpbmcubG9jKGUpfSl9KCksZnVuY3Rpb24oKXt7dmFyIGU9RW1i
        ZXIuc2V0O0VtYmVyLmdldH1FbWJlci5DaGVja2JveD1FbWJlci5WaWV3LmV4
        dGVuZCh7Y2xhc3NOYW1lczpbImVtYmVyLWNoZWNrYm94Il0sdGFnTmFtZToi
        aW5wdXQiLGF0dHJpYnV0ZUJpbmRpbmdzOlsidHlwZSIsImNoZWNrZWQiLCJp
        bmRldGVybWluYXRlIiwiZGlzYWJsZWQiLCJ0YWJpbmRleCIsIm5hbWUiLCJh
        dXRvZm9jdXMiLCJmb3JtIl0sdHlwZToiY2hlY2tib3giLGNoZWNrZWQ6ITEs
        ZGlzYWJsZWQ6ITEsaW5kZXRlcm1pbmF0ZTohMSxpbml0OmZ1bmN0aW9uKCl7
        dGhpcy5fc3VwZXIoKSx0aGlzLm9uKCJjaGFuZ2UiLHRoaXMsdGhpcy5fdXBk
        YXRlRWxlbWVudFZhbHVlKX0sZGlkSW5zZXJ0RWxlbWVudDpmdW5jdGlvbigp
        e3RoaXMuX3N1cGVyKCksdGhpcy5nZXQoImVsZW1lbnQiKS5pbmRldGVybWlu
        YXRlPSEhdGhpcy5nZXQoImluZGV0ZXJtaW5hdGUiKX0sX3VwZGF0ZUVsZW1l
        bnRWYWx1ZTpmdW5jdGlvbigpe2UodGhpcywiY2hlY2tlZCIsdGhpcy4kKCku
        cHJvcCgiY2hlY2tlZCIpKX19KX0oKSxmdW5jdGlvbigpe2Z1bmN0aW9uIGUo
        ZSxyLG4pe3ZhciBpPXQocixlKSxvPXQociwib25FdmVudCIpLGE9dChyLCJ2
        YWx1ZSIpOyhvPT09ZXx8ImtleVByZXNzIj09PW8mJiJrZXktcHJlc3MiPT09
        ZSkmJnIuc2VuZEFjdGlvbigiYWN0aW9uIixhKSxyLnNlbmRBY3Rpb24oZSxh
        KSwoaXx8bz09PWUpJiYodChyLCJidWJibGVzIil8fG4uc3RvcFByb3BhZ2F0
        aW9uKCkpfXZhciB0PUVtYmVyLmdldCxyPUVtYmVyLnNldDtFbWJlci5UZXh0
        U3VwcG9ydD1FbWJlci5NaXhpbi5jcmVhdGUoRW1iZXIuVGFyZ2V0QWN0aW9u
        U3VwcG9ydCx7dmFsdWU6IiIsYXR0cmlidXRlQmluZGluZ3M6WyJwbGFjZWhv
        bGRlciIsImRpc2FibGVkIiwibWF4bGVuZ3RoIiwidGFiaW5kZXgiLCJyZWFk
        b25seSIsImF1dG9mb2N1cyIsImZvcm0iLCJzZWxlY3Rpb25EaXJlY3Rpb24i
        LCJzcGVsbGNoZWNrIiwicmVxdWlyZWQiXSxwbGFjZWhvbGRlcjpudWxsLGRp
        c2FibGVkOiExLG1heGxlbmd0aDpudWxsLGluaXQ6ZnVuY3Rpb24oKXt0aGlz
        Ll9zdXBlcigpLHRoaXMub24oImZvY3VzT3V0Iix0aGlzLHRoaXMuX2VsZW1l
        bnRWYWx1ZURpZENoYW5nZSksdGhpcy5vbigiY2hhbmdlIix0aGlzLHRoaXMu
        X2VsZW1lbnRWYWx1ZURpZENoYW5nZSksdGhpcy5vbigicGFzdGUiLHRoaXMs
        dGhpcy5fZWxlbWVudFZhbHVlRGlkQ2hhbmdlKSx0aGlzLm9uKCJjdXQiLHRo
        aXMsdGhpcy5fZWxlbWVudFZhbHVlRGlkQ2hhbmdlKSx0aGlzLm9uKCJpbnB1
        dCIsdGhpcyx0aGlzLl9lbGVtZW50VmFsdWVEaWRDaGFuZ2UpLHRoaXMub24o
        ImtleVVwIix0aGlzLHRoaXMuaW50ZXJwcmV0S2V5RXZlbnRzKX0sYWN0aW9u
        Om51bGwsb25FdmVudDoiZW50ZXIiLGJ1YmJsZXM6ITEsaW50ZXJwcmV0S2V5
        RXZlbnRzOmZ1bmN0aW9uKGUpe3ZhciB0PUVtYmVyLlRleHRTdXBwb3J0LktF
        WV9FVkVOVFMscj10W2Uua2V5Q29kZV07cmV0dXJuIHRoaXMuX2VsZW1lbnRW
        YWx1ZURpZENoYW5nZSgpLHI/dGhpc1tyXShlKTp2b2lkIDB9LF9lbGVtZW50
        VmFsdWVEaWRDaGFuZ2U6ZnVuY3Rpb24oKXtyKHRoaXMsInZhbHVlIix0aGlz
        LiQoKS52YWwoKSl9LGluc2VydE5ld2xpbmU6ZnVuY3Rpb24odCl7ZSgiZW50
        ZXIiLHRoaXMsdCksZSgiaW5zZXJ0LW5ld2xpbmUiLHRoaXMsdCl9LGNhbmNl
        bDpmdW5jdGlvbih0KXtlKCJlc2NhcGUtcHJlc3MiLHRoaXMsdCl9LGZvY3Vz
        SW46ZnVuY3Rpb24odCl7ZSgiZm9jdXMtaW4iLHRoaXMsdCl9LGZvY3VzT3V0
        OmZ1bmN0aW9uKHQpe2UoImZvY3VzLW91dCIsdGhpcyx0KX0sa2V5UHJlc3M6
        ZnVuY3Rpb24odCl7ZSgia2V5LXByZXNzIix0aGlzLHQpfX0pLEVtYmVyLlRl
        eHRTdXBwb3J0LktFWV9FVkVOVFM9ezEzOiJpbnNlcnROZXdsaW5lIiwyNzoi
        Y2FuY2VsIn19KCksZnVuY3Rpb24oKXtFbWJlci5nZXQsRW1iZXIuc2V0O0Vt
        YmVyLlRleHRGaWVsZD1FbWJlci5Db21wb25lbnQuZXh0ZW5kKEVtYmVyLlRl
        eHRTdXBwb3J0LHtjbGFzc05hbWVzOlsiZW1iZXItdGV4dC1maWVsZCJdLHRh
        Z05hbWU6ImlucHV0IixhdHRyaWJ1dGVCaW5kaW5nczpbInR5cGUiLCJ2YWx1
        ZSIsInNpemUiLCJwYXR0ZXJuIiwibmFtZSIsIm1pbiIsIm1heCIsImFjY2Vw
        dCIsImF1dG9jb21wbGV0ZSIsImF1dG9zYXZlIiwiZm9ybWFjdGlvbiIsImZv
        cm1lbmN0eXBlIiwiZm9ybW1ldGhvZCIsImZvcm1ub3ZhbGlkYXRlIiwiZm9y
        bXRhcmdldCIsImhlaWdodCIsImlucHV0bW9kZSIsImxpc3QiLCJtdWx0aXBs
        ZSIsInBhdHRlcm4iLCJzdGVwIiwid2lkdGgiXSx2YWx1ZToiIix0eXBlOiJ0
        ZXh0IixzaXplOm51bGwscGF0dGVybjpudWxsLG1pbjpudWxsLG1heDpudWxs
        fSl9KCksZnVuY3Rpb24oKXt7dmFyIGU9RW1iZXIuZ2V0O0VtYmVyLnNldH1F
        bWJlci5UZXh0QXJlYT1FbWJlci5Db21wb25lbnQuZXh0ZW5kKEVtYmVyLlRl
        eHRTdXBwb3J0LHtjbGFzc05hbWVzOlsiZW1iZXItdGV4dC1hcmVhIl0sdGFn
        TmFtZToidGV4dGFyZWEiLGF0dHJpYnV0ZUJpbmRpbmdzOlsicm93cyIsImNv
        bHMiLCJuYW1lIiwic2VsZWN0aW9uRW5kIiwic2VsZWN0aW9uU3RhcnQiLCJ3
        cmFwIl0scm93czpudWxsLGNvbHM6bnVsbCxfdXBkYXRlRWxlbWVudFZhbHVl
        OkVtYmVyLm9ic2VydmVyKCJ2YWx1ZSIsZnVuY3Rpb24oKXt2YXIgdD1lKHRo
        aXMsInZhbHVlIikscj10aGlzLiQoKTtyJiZ0IT09ci52YWwoKSYmci52YWwo
        dCl9KSxpbml0OmZ1bmN0aW9uKCl7dGhpcy5fc3VwZXIoKSx0aGlzLm9uKCJk
        aWRJbnNlcnRFbGVtZW50Iix0aGlzLHRoaXMuX3VwZGF0ZUVsZW1lbnRWYWx1
        ZSl9fSl9KCksZnVuY3Rpb24oKXt7dmFyIGU9RW1iZXIuc2V0LHQ9RW1iZXIu
        Z2V0LHI9RW1iZXIuRW51bWVyYWJsZVV0aWxzLmluZGV4T2Ysbj1FbWJlci5F
        bnVtZXJhYmxlVXRpbHMuaW5kZXhlc09mLGk9RW1iZXIuRW51bWVyYWJsZVV0
        aWxzLmZvckVhY2gsbz1FbWJlci5FbnVtZXJhYmxlVXRpbHMucmVwbGFjZSxh
        PUVtYmVyLmlzQXJyYXk7RW1iZXIuSGFuZGxlYmFycy5jb21waWxlfUVtYmVy
        LlNlbGVjdE9wdGlvbj1FbWJlci5WaWV3LmV4dGVuZCh7dGFnTmFtZToib3B0
        aW9uIixhdHRyaWJ1dGVCaW5kaW5nczpbInZhbHVlIiwic2VsZWN0ZWQiXSxk
        ZWZhdWx0VGVtcGxhdGU6ZnVuY3Rpb24oZSx0KXt0PXtkYXRhOnQuZGF0YSxo
        YXNoOnt9fSxFbWJlci5IYW5kbGViYXJzLmhlbHBlcnMuYmluZC5jYWxsKGUs
        InZpZXcubGFiZWwiLHQpfSxpbml0OmZ1bmN0aW9uKCl7dGhpcy5sYWJlbFBh
        dGhEaWRDaGFuZ2UoKSx0aGlzLnZhbHVlUGF0aERpZENoYW5nZSgpLHRoaXMu
        X3N1cGVyKCl9LHNlbGVjdGVkOkVtYmVyLmNvbXB1dGVkKGZ1bmN0aW9uKCl7
        dmFyIGU9dCh0aGlzLCJjb250ZW50Iiksbj10KHRoaXMsInBhcmVudFZpZXcu
        c2VsZWN0aW9uIik7cmV0dXJuIHQodGhpcywicGFyZW50Vmlldy5tdWx0aXBs
        ZSIpP24mJnIobixlLnZhbHVlT2YoKSk+LTE6ZT09bgp9KS5wcm9wZXJ0eSgi
        Y29udGVudCIsInBhcmVudFZpZXcuc2VsZWN0aW9uIiksbGFiZWxQYXRoRGlk
        Q2hhbmdlOkVtYmVyLm9ic2VydmVyKCJwYXJlbnRWaWV3Lm9wdGlvbkxhYmVs
        UGF0aCIsZnVuY3Rpb24oKXt2YXIgZT10KHRoaXMsInBhcmVudFZpZXcub3B0
        aW9uTGFiZWxQYXRoIik7ZSYmRW1iZXIuZGVmaW5lUHJvcGVydHkodGhpcywi
        bGFiZWwiLEVtYmVyLmNvbXB1dGVkKGZ1bmN0aW9uKCl7cmV0dXJuIHQodGhp
        cyxlKX0pLnByb3BlcnR5KGUpKX0pLHZhbHVlUGF0aERpZENoYW5nZTpFbWJl
        ci5vYnNlcnZlcigicGFyZW50Vmlldy5vcHRpb25WYWx1ZVBhdGgiLGZ1bmN0
        aW9uKCl7dmFyIGU9dCh0aGlzLCJwYXJlbnRWaWV3Lm9wdGlvblZhbHVlUGF0
        aCIpO2UmJkVtYmVyLmRlZmluZVByb3BlcnR5KHRoaXMsInZhbHVlIixFbWJl
        ci5jb21wdXRlZChmdW5jdGlvbigpe3JldHVybiB0KHRoaXMsZSl9KS5wcm9w
        ZXJ0eShlKSl9KX0pLEVtYmVyLlNlbGVjdE9wdGdyb3VwPUVtYmVyLkNvbGxl
        Y3Rpb25WaWV3LmV4dGVuZCh7dGFnTmFtZToib3B0Z3JvdXAiLGF0dHJpYnV0
        ZUJpbmRpbmdzOlsibGFiZWwiXSxzZWxlY3Rpb25CaW5kaW5nOiJwYXJlbnRW
        aWV3LnNlbGVjdGlvbiIsbXVsdGlwbGVCaW5kaW5nOiJwYXJlbnRWaWV3Lm11
        bHRpcGxlIixvcHRpb25MYWJlbFBhdGhCaW5kaW5nOiJwYXJlbnRWaWV3Lm9w
        dGlvbkxhYmVsUGF0aCIsb3B0aW9uVmFsdWVQYXRoQmluZGluZzoicGFyZW50
        Vmlldy5vcHRpb25WYWx1ZVBhdGgiLGl0ZW1WaWV3Q2xhc3NCaW5kaW5nOiJw
        YXJlbnRWaWV3Lm9wdGlvblZpZXcifSksRW1iZXIuU2VsZWN0PUVtYmVyLlZp
        ZXcuZXh0ZW5kKHt0YWdOYW1lOiJzZWxlY3QiLGNsYXNzTmFtZXM6WyJlbWJl
        ci1zZWxlY3QiXSxkZWZhdWx0VGVtcGxhdGU6RW1iZXIuSGFuZGxlYmFycy50
        ZW1wbGF0ZShmdW5jdGlvbihlLHQscixuLGkpe2Z1bmN0aW9uIG8oZSx0KXt2
        YXIgbixpPSIiO3JldHVybiB0LmJ1ZmZlci5wdXNoKCc8b3B0aW9uIHZhbHVl
        PSIiPicpLG49ci5fdHJpYWdlTXVzdGFjaGUuY2FsbChlLCJ2aWV3LnByb21w
        dCIse2hhc2g6e30saGFzaFR5cGVzOnt9LGhhc2hDb250ZXh0czp7fSxjb250
        ZXh0czpbZV0sdHlwZXM6WyJJRCJdLGRhdGE6dH0pLChufHwwPT09bikmJnQu
        YnVmZmVyLnB1c2gobiksdC5idWZmZXIucHVzaCgiPC9vcHRpb24+IiksaX1m
        dW5jdGlvbiBhKGUsdCl7dmFyIG47bj1yLmVhY2guY2FsbChlLCJ2aWV3Lmdy
        b3VwZWRDb250ZW50Iix7aGFzaDp7fSxoYXNoVHlwZXM6e30saGFzaENvbnRl
        eHRzOnt9LGludmVyc2U6cC5ub29wLGZuOnAucHJvZ3JhbSg0LHMsdCksY29u
        dGV4dHM6W2VdLHR5cGVzOlsiSUQiXSxkYXRhOnR9KSxufHwwPT09bj90LmJ1
        ZmZlci5wdXNoKG4pOnQuYnVmZmVyLnB1c2goIiIpfWZ1bmN0aW9uIHMoZSx0
        KXt0LmJ1ZmZlci5wdXNoKG0oci52aWV3LmNhbGwoZSwidmlldy5ncm91cFZp
        ZXciLHtoYXNoOntjb250ZW50OiJjb250ZW50IixsYWJlbDoibGFiZWwifSxo
        YXNoVHlwZXM6e2NvbnRlbnQ6IklEIixsYWJlbDoiSUQifSxoYXNoQ29udGV4
        dHM6e2NvbnRlbnQ6ZSxsYWJlbDplfSxjb250ZXh0czpbZV0sdHlwZXM6WyJJ
        RCJdLGRhdGE6dH0pKSl9ZnVuY3Rpb24gdShlLHQpe3ZhciBuO249ci5lYWNo
        LmNhbGwoZSwidmlldy5jb250ZW50Iix7aGFzaDp7fSxoYXNoVHlwZXM6e30s
        aGFzaENvbnRleHRzOnt9LGludmVyc2U6cC5ub29wLGZuOnAucHJvZ3JhbSg3
        LGwsdCksY29udGV4dHM6W2VdLHR5cGVzOlsiSUQiXSxkYXRhOnR9KSxufHww
        PT09bj90LmJ1ZmZlci5wdXNoKG4pOnQuYnVmZmVyLnB1c2goIiIpfWZ1bmN0
        aW9uIGwoZSx0KXt0LmJ1ZmZlci5wdXNoKG0oci52aWV3LmNhbGwoZSwidmll
        dy5vcHRpb25WaWV3Iix7aGFzaDp7Y29udGVudDoiIn0saGFzaFR5cGVzOntj
        b250ZW50OiJJRCJ9LGhhc2hDb250ZXh0czp7Y29udGVudDplfSxjb250ZXh0
        czpbZV0sdHlwZXM6WyJJRCJdLGRhdGE6dH0pKSl9dGhpcy5jb21waWxlcklu
        Zm89WzQsIj49IDEuMC4wIl0scj10aGlzLm1lcmdlKHIsRW1iZXIuSGFuZGxl
        YmFycy5oZWxwZXJzKSxpPWl8fHt9O3ZhciBjLGg9IiIsbT10aGlzLmVzY2Fw
        ZUV4cHJlc3Npb24scD10aGlzO3JldHVybiBjPXJbImlmIl0uY2FsbCh0LCJ2
        aWV3LnByb21wdCIse2hhc2g6e30saGFzaFR5cGVzOnt9LGhhc2hDb250ZXh0
        czp7fSxpbnZlcnNlOnAubm9vcCxmbjpwLnByb2dyYW0oMSxvLGkpLGNvbnRl
        eHRzOlt0XSx0eXBlczpbIklEIl0sZGF0YTppfSksKGN8fDA9PT1jKSYmaS5i
        dWZmZXIucHVzaChjKSxjPXJbImlmIl0uY2FsbCh0LCJ2aWV3Lm9wdGlvbkdy
        b3VwUGF0aCIse2hhc2g6e30saGFzaFR5cGVzOnt9LGhhc2hDb250ZXh0czp7
        fSxpbnZlcnNlOnAucHJvZ3JhbSg2LHUsaSksZm46cC5wcm9ncmFtKDMsYSxp
        KSxjb250ZXh0czpbdF0sdHlwZXM6WyJJRCJdLGRhdGE6aX0pLChjfHwwPT09
        YykmJmkuYnVmZmVyLnB1c2goYyksaH0pLGF0dHJpYnV0ZUJpbmRpbmdzOlsi
        bXVsdGlwbGUiLCJkaXNhYmxlZCIsInRhYmluZGV4IiwibmFtZSIsInJlcXVp
        cmVkIiwiYXV0b2ZvY3VzIiwiZm9ybSIsInNpemUiXSxtdWx0aXBsZTohMSxk
        aXNhYmxlZDohMSxyZXF1aXJlZDohMSxjb250ZW50Om51bGwsc2VsZWN0aW9u
        Om51bGwsdmFsdWU6RW1iZXIuY29tcHV0ZWQoZnVuY3Rpb24oZSxyKXtpZigy
        PT09YXJndW1lbnRzLmxlbmd0aClyZXR1cm4gcjt2YXIgbj10KHRoaXMsIm9w
        dGlvblZhbHVlUGF0aCIpLnJlcGxhY2UoL15jb250ZW50XC4/LywiIik7cmV0
        dXJuIG4/dCh0aGlzLCJzZWxlY3Rpb24uIituKTp0KHRoaXMsInNlbGVjdGlv
        biIpfSkucHJvcGVydHkoInNlbGVjdGlvbiIpLHByb21wdDpudWxsLG9wdGlv
        bkxhYmVsUGF0aDoiY29udGVudCIsb3B0aW9uVmFsdWVQYXRoOiJjb250ZW50
        IixvcHRpb25Hcm91cFBhdGg6bnVsbCxncm91cFZpZXc6RW1iZXIuU2VsZWN0
        T3B0Z3JvdXAsZ3JvdXBlZENvbnRlbnQ6RW1iZXIuY29tcHV0ZWQoZnVuY3Rp
        b24oKXt2YXIgZT10KHRoaXMsIm9wdGlvbkdyb3VwUGF0aCIpLHI9RW1iZXIu
        QSgpLG49dCh0aGlzLCJjb250ZW50Iil8fFtdO3JldHVybiBpKG4sZnVuY3Rp
        b24obil7dmFyIGk9dChuLGUpO3QociwibGFzdE9iamVjdC5sYWJlbCIpIT09
        aSYmci5wdXNoT2JqZWN0KHtsYWJlbDppLGNvbnRlbnQ6RW1iZXIuQSgpfSks
        dChyLCJsYXN0T2JqZWN0LmNvbnRlbnQiKS5wdXNoKG4pfSkscn0pLnByb3Bl
        cnR5KCJvcHRpb25Hcm91cFBhdGgiLCJjb250ZW50LkBlYWNoIiksb3B0aW9u
        VmlldzpFbWJlci5TZWxlY3RPcHRpb24sX2NoYW5nZTpmdW5jdGlvbigpe3Qo
        dGhpcywibXVsdGlwbGUiKT90aGlzLl9jaGFuZ2VNdWx0aXBsZSgpOnRoaXMu
        X2NoYW5nZVNpbmdsZSgpfSxzZWxlY3Rpb25EaWRDaGFuZ2U6RW1iZXIub2Jz
        ZXJ2ZXIoInNlbGVjdGlvbi5AZWFjaCIsZnVuY3Rpb24oKXt2YXIgcj10KHRo
        aXMsInNlbGVjdGlvbiIpO2lmKHQodGhpcywibXVsdGlwbGUiKSl7aWYoIWEo
        cikpcmV0dXJuIGUodGhpcywic2VsZWN0aW9uIixFbWJlci5BKFtyXSkpLHZv
        aWQgMDt0aGlzLl9zZWxlY3Rpb25EaWRDaGFuZ2VNdWx0aXBsZSgpfWVsc2Ug
        dGhpcy5fc2VsZWN0aW9uRGlkQ2hhbmdlU2luZ2xlKCl9KSx2YWx1ZURpZENo
        YW5nZTpFbWJlci5vYnNlcnZlcigidmFsdWUiLGZ1bmN0aW9uKCl7dmFyIGUs
        cj10KHRoaXMsImNvbnRlbnQiKSxuPXQodGhpcywidmFsdWUiKSxpPXQodGhp
        cywib3B0aW9uVmFsdWVQYXRoIikucmVwbGFjZSgvXmNvbnRlbnRcLj8vLCIi
        KSxvPWk/dCh0aGlzLCJzZWxlY3Rpb24uIitpKTp0KHRoaXMsInNlbGVjdGlv
        biIpO24hPT1vJiYoZT1yP3IuZmluZChmdW5jdGlvbihlKXtyZXR1cm4gbj09
        PShpP3QoZSxpKTplKX0pOm51bGwsdGhpcy5zZXQoInNlbGVjdGlvbiIsZSkp
        fSksX3RyaWdnZXJDaGFuZ2U6ZnVuY3Rpb24oKXt2YXIgZT10KHRoaXMsInNl
        bGVjdGlvbiIpLHI9dCh0aGlzLCJ2YWx1ZSIpO0VtYmVyLmlzTm9uZShlKXx8
        dGhpcy5zZWxlY3Rpb25EaWRDaGFuZ2UoKSxFbWJlci5pc05vbmUocil8fHRo
        aXMudmFsdWVEaWRDaGFuZ2UoKSx0aGlzLl9jaGFuZ2UoKX0sX2NoYW5nZVNp
        bmdsZTpmdW5jdGlvbigpe3ZhciByPXRoaXMuJCgpWzBdLnNlbGVjdGVkSW5k
        ZXgsbj10KHRoaXMsImNvbnRlbnQiKSxpPXQodGhpcywicHJvbXB0Iik7aWYo
        biYmdChuLCJsZW5ndGgiKSl7aWYoaSYmMD09PXIpcmV0dXJuIGUodGhpcywi
        c2VsZWN0aW9uIixudWxsKSx2b2lkIDA7aSYmKHItPTEpLGUodGhpcywic2Vs
        ZWN0aW9uIixuLm9iamVjdEF0KHIpKX19LF9jaGFuZ2VNdWx0aXBsZTpmdW5j
        dGlvbigpe3ZhciByPXRoaXMuJCgib3B0aW9uOnNlbGVjdGVkIiksbj10KHRo
        aXMsInByb21wdCIpLGk9bj8xOjAscz10KHRoaXMsImNvbnRlbnQiKSx1PXQo
        dGhpcywic2VsZWN0aW9uIik7aWYocyYmcil7dmFyIGw9ci5tYXAoZnVuY3Rp
        b24oKXtyZXR1cm4gdGhpcy5pbmRleC1pfSkudG9BcnJheSgpLGM9cy5vYmpl
        Y3RzQXQobCk7YSh1KT9vKHUsMCx0KHUsImxlbmd0aCIpLGMpOmUodGhpcywi
        c2VsZWN0aW9uIixjKX19LF9zZWxlY3Rpb25EaWRDaGFuZ2VTaW5nbGU6ZnVu
        Y3Rpb24oKXt2YXIgZT10aGlzLmdldCgiZWxlbWVudCIpO2lmKGUpe3ZhciBu
        PXQodGhpcywiY29udGVudCIpLGk9dCh0aGlzLCJzZWxlY3Rpb24iKSxvPW4/
        cihuLGkpOi0xLGE9dCh0aGlzLCJwcm9tcHQiKTthJiYobys9MSksZSYmKGUu
        c2VsZWN0ZWRJbmRleD1vKX19LF9zZWxlY3Rpb25EaWRDaGFuZ2VNdWx0aXBs
        ZTpmdW5jdGlvbigpe3ZhciBlLGk9dCh0aGlzLCJjb250ZW50Iiksbz10KHRo
        aXMsInNlbGVjdGlvbiIpLGE9aT9uKGksbyk6Wy0xXSxzPXQodGhpcywicHJv
        bXB0IiksdT1zPzE6MCxsPXRoaXMuJCgib3B0aW9uIik7bCYmbC5lYWNoKGZ1
        bmN0aW9uKCl7ZT10aGlzLmluZGV4Pi0xP3RoaXMuaW5kZXgtdTotMSx0aGlz
        LnNlbGVjdGVkPXIoYSxlKT4tMX0pfSxpbml0OmZ1bmN0aW9uKCl7dGhpcy5f
        c3VwZXIoKSx0aGlzLm9uKCJkaWRJbnNlcnRFbGVtZW50Iix0aGlzLHRoaXMu
        X3RyaWdnZXJDaGFuZ2UpLHRoaXMub24oImNoYW5nZSIsdGhpcyx0aGlzLl9j
        aGFuZ2UpfX0pfSgpLGZ1bmN0aW9uKCl7RW1iZXIuSGFuZGxlYmFycy5yZWdp
        c3RlckhlbHBlcigiaW5wdXQiLGZ1bmN0aW9uKGUpe3ZhciB0PWUuaGFzaCxy
        PShlLmhhc2hUeXBlcyx0LnR5cGUpLG49dC5vbjtyZXR1cm4gZGVsZXRlIHQu
        dHlwZSxkZWxldGUgdC5vbiwiY2hlY2tib3giPT09cj9FbWJlci5IYW5kbGVi
        YXJzLmhlbHBlcnMudmlldy5jYWxsKHRoaXMsRW1iZXIuQ2hlY2tib3gsZSk6
        KHImJih0LnR5cGU9ciksdC5vbkV2ZW50PW58fCJlbnRlciIsRW1iZXIuSGFu
        ZGxlYmFycy5oZWxwZXJzLnZpZXcuY2FsbCh0aGlzLEVtYmVyLlRleHRGaWVs
        ZCxlKSl9KSxFbWJlci5IYW5kbGViYXJzLnJlZ2lzdGVySGVscGVyKCJ0ZXh0
        YXJlYSIsZnVuY3Rpb24oZSl7ZS5oYXNoLGUuaGFzaFR5cGVzO3JldHVybiBF
        bWJlci5IYW5kbGViYXJzLmhlbHBlcnMudmlldy5jYWxsKHRoaXMsRW1iZXIu
        VGV4dEFyZWEsZSl9KX0oKSxmdW5jdGlvbigpe0VtYmVyLkNvbXBvbmVudExv
        b2t1cD1FbWJlci5PYmplY3QuZXh0ZW5kKHtsb29rdXBGYWN0b3J5OmZ1bmN0
        aW9uKGUsdCl7dD10fHx0aGlzLmNvbnRhaW5lcjt2YXIgcj0iY29tcG9uZW50
        OiIrZSxuPSJ0ZW1wbGF0ZTpjb21wb25lbnRzLyIrZSxpPXQmJnQuaGFzKG4p
        O2kmJnQuaW5qZWN0aW9uKHIsImxheW91dCIsbik7dmFyIG89dC5sb29rdXBG
        YWN0b3J5KHIpO3JldHVybiBpfHxvPyhvfHwodC5yZWdpc3RlcihyLEVtYmVy
        LkNvbXBvbmVudCksbz10Lmxvb2t1cEZhY3RvcnkocikpLG8pOnZvaWQgMH19
        KX0oKSxmdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXtFbWJlci5IYW5kbGViYXJz
        LmJvb3RzdHJhcChFbWJlci4kKGRvY3VtZW50KSl9ZnVuY3Rpb24gdChlKXtl
        LnJlZ2lzdGVyKCJjb21wb25lbnQtbG9va3VwOm1haW4iLEVtYmVyLkNvbXBv
        bmVudExvb2t1cCl9RW1iZXIuSGFuZGxlYmFycy5ib290c3RyYXA9ZnVuY3Rp
        b24oZSl7dmFyIHQ9J3NjcmlwdFt0eXBlPSJ0ZXh0L3gtaGFuZGxlYmFycyJd
        LCBzY3JpcHRbdHlwZT0idGV4dC94LXJhdy1oYW5kbGViYXJzIl0nO0VtYmVy
        LiQodCxlKS5lYWNoKGZ1bmN0aW9uKCl7dmFyIGU9RW1iZXIuJCh0aGlzKSx0
        PSJ0ZXh0L3gtcmF3LWhhbmRsZWJhcnMiPT09ZS5hdHRyKCJ0eXBlIik/RW1i
        ZXIuJC5wcm94eShIYW5kbGViYXJzLmNvbXBpbGUsSGFuZGxlYmFycyk6RW1i
        ZXIuJC5wcm94eShFbWJlci5IYW5kbGViYXJzLmNvbXBpbGUsRW1iZXIuSGFu
        ZGxlYmFycykscj1lLmF0dHIoImRhdGEtdGVtcGxhdGUtbmFtZSIpfHxlLmF0
        dHIoImlkIil8fCJhcHBsaWNhdGlvbiIsbj10KGUuaHRtbCgpKTtpZih2b2lk
        IDAhPT1FbWJlci5URU1QTEFURVNbcl0pdGhyb3cgbmV3IEVtYmVyLkVycm9y
        KCdUZW1wbGF0ZSBuYW1lZCAiJytyKyciIGFscmVhZHkgZXhpc3RzLicpO0Vt
        YmVyLlRFTVBMQVRFU1tyXT1uLGUucmVtb3ZlKCl9KX0sRW1iZXIub25Mb2Fk
        KCJFbWJlci5BcHBsaWNhdGlvbiIsZnVuY3Rpb24ocil7ci5pbml0aWFsaXpl
        cih7bmFtZToiZG9tVGVtcGxhdGVzIixpbml0aWFsaXplOmV9KSxyLmluaXRp
        YWxpemVyKHtuYW1lOiJyZWdpc3RlckNvbXBvbmVudExvb2t1cCIsYWZ0ZXI6
        ImRvbVRlbXBsYXRlcyIsaW5pdGlhbGl6ZTp0fSl9KX0oKSxmdW5jdGlvbigp
        e0VtYmVyLnJ1bkxvYWRIb29rcygiRW1iZXIuSGFuZGxlYmFycyIsRW1iZXIu
        SGFuZGxlYmFycyl9KCksZnVuY3Rpb24oKXtlKCJyb3V0ZS1yZWNvZ25pemVy
        IixbImV4cG9ydHMiXSxmdW5jdGlvbihlKXsidXNlIHN0cmljdCI7ZnVuY3Rp
        b24gdChlKXtyZXR1cm4iW29iamVjdCBBcnJheV0iPT09T2JqZWN0LnByb3Rv
        dHlwZS50b1N0cmluZy5jYWxsKGUpfWZ1bmN0aW9uIHIoZSl7dGhpcy5zdHJp
        bmc9ZX1mdW5jdGlvbiBuKGUpe3RoaXMubmFtZT1lfWZ1bmN0aW9uIGkoZSl7
        dGhpcy5uYW1lPWV9ZnVuY3Rpb24gbygpe31mdW5jdGlvbiBhKGUsdCxhKXsi
        LyI9PT1lLmNoYXJBdCgwKSYmKGU9ZS5zdWJzdHIoMSkpO2Zvcih2YXIgcz1l
        LnNwbGl0KCIvIiksdT1bXSxsPTAsYz1zLmxlbmd0aDtjPmw7bCsrKXt2YXIg
        aCxtPXNbbF07KGg9bS5tYXRjaCgvXjooW15cL10rKSQvKSk/KHUucHVzaChu
        ZXcgbihoWzFdKSksdC5wdXNoKGhbMV0pLGEuZHluYW1pY3MrKyk6KGg9bS5t
        YXRjaCgvXlwqKFteXC9dKykkLykpPyh1LnB1c2gobmV3IGkoaFsxXSkpLHQu
        cHVzaChoWzFdKSxhLnN0YXJzKyspOiIiPT09bT91LnB1c2gobmV3IG8pOih1
        LnB1c2gobmV3IHIobSkpLGEuc3RhdGljcysrKX1yZXR1cm4gdX1mdW5jdGlv
        biBzKGUpe3RoaXMuY2hhclNwZWM9ZSx0aGlzLm5leHRTdGF0ZXM9W119ZnVu
        Y3Rpb24gdShlKXtyZXR1cm4gZS5zb3J0KGZ1bmN0aW9uKGUsdCl7aWYoZS50
        eXBlcy5zdGFycyE9PXQudHlwZXMuc3RhcnMpcmV0dXJuIGUudHlwZXMuc3Rh
        cnMtdC50eXBlcy5zdGFycztpZihlLnR5cGVzLnN0YXJzKXtpZihlLnR5cGVz
        LnN0YXRpY3MhPT10LnR5cGVzLnN0YXRpY3MpcmV0dXJuIHQudHlwZXMuc3Rh
        dGljcy1lLnR5cGVzLnN0YXRpY3M7aWYoZS50eXBlcy5keW5hbWljcyE9PXQu
        dHlwZXMuZHluYW1pY3MpcmV0dXJuIHQudHlwZXMuZHluYW1pY3MtZS50eXBl
        cy5keW5hbWljc31yZXR1cm4gZS50eXBlcy5keW5hbWljcyE9PXQudHlwZXMu
        ZHluYW1pY3M/ZS50eXBlcy5keW5hbWljcy10LnR5cGVzLmR5bmFtaWNzOmUu
        dHlwZXMuc3RhdGljcyE9PXQudHlwZXMuc3RhdGljcz90LnR5cGVzLnN0YXRp
        Y3MtZS50eXBlcy5zdGF0aWNzOjB9KX1mdW5jdGlvbiBsKGUsdCl7Zm9yKHZh
        ciByPVtdLG49MCxpPWUubGVuZ3RoO2k+bjtuKyspe3ZhciBvPWVbbl07cj1y
        LmNvbmNhdChvLm1hdGNoKHQpKX1yZXR1cm4gcn1mdW5jdGlvbiBjKGUpe3Ro
        aXMucXVlcnlQYXJhbXM9ZXx8e319ZnVuY3Rpb24gaChlLHQscil7Zm9yKHZh
        ciBuPWUuaGFuZGxlcnMsaT1lLnJlZ2V4LG89dC5tYXRjaChpKSxhPTEscz1u
        ZXcgYyhyKSx1PTAsbD1uLmxlbmd0aDtsPnU7dSsrKXtmb3IodmFyIGg9blt1
        XSxtPWgubmFtZXMscD17fSxmPTAsZD1tLmxlbmd0aDtkPmY7ZisrKXBbbVtm
        XV09b1thKytdO3MucHVzaCh7aGFuZGxlcjpoLmhhbmRsZXIscGFyYW1zOnAs
        aXNEeW5hbWljOiEhbS5sZW5ndGh9KX1yZXR1cm4gc31mdW5jdGlvbiBtKGUs
        dCl7cmV0dXJuIHQuZWFjaENoYXIoZnVuY3Rpb24odCl7ZT1lLnB1dCh0KX0p
        LGV9ZnVuY3Rpb24gcChlLHQscil7dGhpcy5wYXRoPWUsdGhpcy5tYXRjaGVy
        PXQsdGhpcy5kZWxlZ2F0ZT1yfWZ1bmN0aW9uIGYoZSl7dGhpcy5yb3V0ZXM9
        e30sdGhpcy5jaGlsZHJlbj17fSx0aGlzLnRhcmdldD1lfWZ1bmN0aW9uIGQo
        ZSx0LHIpe3JldHVybiBmdW5jdGlvbihuLGkpe3ZhciBvPWUrbjtyZXR1cm4g
        aT8oaShkKG8sdCxyKSksdm9pZCAwKTpuZXcgcChlK24sdCxyKX19ZnVuY3Rp
        b24gYihlLHQscil7Zm9yKHZhciBuPTAsaT0wLG89ZS5sZW5ndGg7bz5pO2kr
        KyluKz1lW2ldLnBhdGgubGVuZ3RoO3Q9dC5zdWJzdHIobik7dmFyIGE9e3Bh
        dGg6dCxoYW5kbGVyOnJ9O2UucHVzaChhKX1mdW5jdGlvbiB2KGUsdCxyLG4p
        e3ZhciBpPXQucm91dGVzO2Zvcih2YXIgbyBpbiBpKWlmKGkuaGFzT3duUHJv
        cGVydHkobykpe3ZhciBhPWUuc2xpY2UoKTtiKGEsbyxpW29dKSx0LmNoaWxk
        cmVuW29dP3YoYSx0LmNoaWxkcmVuW29dLHIsbik6ci5jYWxsKG4sYSl9fXZh
        ciBFPVsiLyIsIi4iLCIqIiwiKyIsIj8iLCJ8IiwiKCIsIikiLCJbIiwiXSIs
        InsiLCJ9IiwiXFwiXSxnPW5ldyBSZWdFeHAoIihcXCIrRS5qb2luKCJ8XFwi
        KSsiKSIsImciKTtyLnByb3RvdHlwZT17ZWFjaENoYXI6ZnVuY3Rpb24oZSl7
        Zm9yKHZhciB0LHI9dGhpcy5zdHJpbmcsbj0wLGk9ci5sZW5ndGg7aT5uO24r
        Kyl0PXIuY2hhckF0KG4pLGUoe3ZhbGlkQ2hhcnM6dH0pfSxyZWdleDpmdW5j
        dGlvbigpe3JldHVybiB0aGlzLnN0cmluZy5yZXBsYWNlKGcsIlxcJDEiKX0s
        Z2VuZXJhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zdHJpbmd9fSxuLnBy
        b3RvdHlwZT17ZWFjaENoYXI6ZnVuY3Rpb24oZSl7ZSh7aW52YWxpZENoYXJz
        OiIvIixyZXBlYXQ6ITB9KX0scmVnZXg6ZnVuY3Rpb24oKXtyZXR1cm4iKFte
        L10rKSJ9LGdlbmVyYXRlOmZ1bmN0aW9uKGUpe3JldHVybiBlW3RoaXMubmFt
        ZV19fSxpLnByb3RvdHlwZT17ZWFjaENoYXI6ZnVuY3Rpb24oZSl7ZSh7aW52
        YWxpZENoYXJzOiIiLHJlcGVhdDohMH0pfSxyZWdleDpmdW5jdGlvbigpe3Jl
        dHVybiIoLispIn0sZ2VuZXJhdGU6ZnVuY3Rpb24oZSl7cmV0dXJuIGVbdGhp
        cy5uYW1lXX19LG8ucHJvdG90eXBlPXtlYWNoQ2hhcjpmdW5jdGlvbigpe30s
        cmVnZXg6ZnVuY3Rpb24oKXtyZXR1cm4iIn0sZ2VuZXJhdGU6ZnVuY3Rpb24o
        KXtyZXR1cm4iIn19LHMucHJvdG90eXBlPXtnZXQ6ZnVuY3Rpb24oZSl7Zm9y
        KHZhciB0PXRoaXMubmV4dFN0YXRlcyxyPTAsbj10Lmxlbmd0aDtuPnI7cisr
        KXt2YXIgaT10W3JdLG89aS5jaGFyU3BlYy52YWxpZENoYXJzPT09ZS52YWxp
        ZENoYXJzO2lmKG89byYmaS5jaGFyU3BlYy5pbnZhbGlkQ2hhcnM9PT1lLmlu
        dmFsaWRDaGFycylyZXR1cm4gaX19LHB1dDpmdW5jdGlvbihlKXt2YXIgdDty
        ZXR1cm4odD10aGlzLmdldChlKSk/dDoodD1uZXcgcyhlKSx0aGlzLm5leHRT
        dGF0ZXMucHVzaCh0KSxlLnJlcGVhdCYmdC5uZXh0U3RhdGVzLnB1c2godCks
        dCl9LG1hdGNoOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdCxyLG4saT10aGlzLm5l
        eHRTdGF0ZXMsbz1bXSxhPTAscz1pLmxlbmd0aDtzPmE7YSsrKXQ9aVthXSxy
        PXQuY2hhclNwZWMsInVuZGVmaW5lZCIhPXR5cGVvZihuPXIudmFsaWRDaGFy
        cyk/LTEhPT1uLmluZGV4T2YoZSkmJm8ucHVzaCh0KToidW5kZWZpbmVkIiE9
        dHlwZW9mKG49ci5pbnZhbGlkQ2hhcnMpJiYtMT09PW4uaW5kZXhPZihlKSYm
        by5wdXNoKHQpO3JldHVybiBvfX07dmFyIHk9T2JqZWN0LmNyZWF0ZXx8ZnVu
        Y3Rpb24oZSl7ZnVuY3Rpb24gdCgpe31yZXR1cm4gdC5wcm90b3R5cGU9ZSxu
        ZXcgdH07Yy5wcm90b3R5cGU9eSh7c3BsaWNlOkFycmF5LnByb3RvdHlwZS5z
        cGxpY2Usc2xpY2U6QXJyYXkucHJvdG90eXBlLnNsaWNlLHB1c2g6QXJyYXku
        cHJvdG90eXBlLnB1c2gsbGVuZ3RoOjAscXVlcnlQYXJhbXM6bnVsbH0pO3Zh
        ciBfPWZ1bmN0aW9uKCl7dGhpcy5yb290U3RhdGU9bmV3IHMsdGhpcy5uYW1l
        cz17fX07Xy5wcm90b3R5cGU9e2FkZDpmdW5jdGlvbihlLHQpe2Zvcih2YXIg
        cixuPXRoaXMucm9vdFN0YXRlLGk9Il4iLHM9e3N0YXRpY3M6MCxkeW5hbWlj
        czowLHN0YXJzOjB9LHU9W10sbD1bXSxjPSEwLGg9MCxwPWUubGVuZ3RoO3A+
        aDtoKyspe3ZhciBmPWVbaF0sZD1bXSxiPWEoZi5wYXRoLGQscyk7bD1sLmNv
        bmNhdChiKTtmb3IodmFyIHY9MCxFPWIubGVuZ3RoO0U+djt2Kyspe3ZhciBn
        PWJbdl07ZyBpbnN0YW5jZW9mIG98fChjPSExLG49bi5wdXQoe3ZhbGlkQ2hh
        cnM6Ii8ifSksaSs9Ii8iLG49bShuLGcpLGkrPWcucmVnZXgoKSl9dmFyIHk9
        e2hhbmRsZXI6Zi5oYW5kbGVyLG5hbWVzOmR9O3UucHVzaCh5KX1jJiYobj1u
        LnB1dCh7dmFsaWRDaGFyczoiLyJ9KSxpKz0iLyIpLG4uaGFuZGxlcnM9dSxu
        LnJlZ2V4PW5ldyBSZWdFeHAoaSsiJCIpLG4udHlwZXM9cywocj10JiZ0LmFz
        KSYmKHRoaXMubmFtZXNbcl09e3NlZ21lbnRzOmwsaGFuZGxlcnM6dX0pfSxo
        YW5kbGVyc0ZvcjpmdW5jdGlvbihlKXt2YXIgdD10aGlzLm5hbWVzW2VdLHI9
        W107aWYoIXQpdGhyb3cgbmV3IEVycm9yKCJUaGVyZSBpcyBubyByb3V0ZSBu
        YW1lZCAiK2UpO2Zvcih2YXIgbj0wLGk9dC5oYW5kbGVycy5sZW5ndGg7aT5u
        O24rKylyLnB1c2godC5oYW5kbGVyc1tuXSk7cmV0dXJuIHJ9LGhhc1JvdXRl
        OmZ1bmN0aW9uKGUpe3JldHVybiEhdGhpcy5uYW1lc1tlXX0sZ2VuZXJhdGU6
        ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLm5hbWVzW2VdLG49IiI7aWYoIXIp
        dGhyb3cgbmV3IEVycm9yKCJUaGVyZSBpcyBubyByb3V0ZSBuYW1lZCAiK2Up
        O2Zvcih2YXIgaT1yLnNlZ21lbnRzLGE9MCxzPWkubGVuZ3RoO3M+YTthKysp
        e3ZhciB1PWlbYV07dSBpbnN0YW5jZW9mIG98fChuKz0iLyIsbis9dS5nZW5l
        cmF0ZSh0KSl9cmV0dXJuIi8iIT09bi5jaGFyQXQoMCkmJihuPSIvIituKSx0
        JiZ0LnF1ZXJ5UGFyYW1zJiYobis9dGhpcy5nZW5lcmF0ZVF1ZXJ5U3RyaW5n
        KHQucXVlcnlQYXJhbXMsci5oYW5kbGVycykpLG59LGdlbmVyYXRlUXVlcnlT
        dHJpbmc6ZnVuY3Rpb24oZSl7dmFyIHI9W10sbj1bXTtmb3IodmFyIGkgaW4g
        ZSllLmhhc093blByb3BlcnR5KGkpJiZuLnB1c2goaSk7bi5zb3J0KCk7Zm9y
        KHZhciBvPTAsYT1uLmxlbmd0aDthPm87bysrKXtpPW5bb107dmFyIHM9ZVtp
        XTtpZihzIT09ITEmJm51bGwhPXMpe3ZhciB1PWk7aWYodChzKSlmb3IodmFy
        IGw9MCxjPXMubGVuZ3RoO2M+bDtsKyspe3ZhciBoPWkrIltdPSIrZW5jb2Rl
        VVJJQ29tcG9uZW50KHNbbF0pO3IucHVzaChoKX1lbHNlIHMhPT0hMD8odSs9
        Ij0iK2VuY29kZVVSSUNvbXBvbmVudChzKSxyLnB1c2godSkpOnIucHVzaCh1
        KX19cmV0dXJuIDA9PT1yLmxlbmd0aD8iIjoiPyIrci5qb2luKCImIil9LHBh
        cnNlUXVlcnlTdHJpbmc6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PWUuc3BsaXQo
        IiYiKSxyPXt9LG49MDtuPHQubGVuZ3RoO24rKyl7dmFyIGksbz10W25dLnNw
        bGl0KCI9IiksYT1kZWNvZGVVUklDb21wb25lbnQob1swXSkscz1hLmxlbmd0
        aCx1PSExOzE9PT1vLmxlbmd0aD9pPSEwOihzPjImJiJbXSI9PT1hLnNsaWNl
        KHMtMikmJih1PSEwLGE9YS5zbGljZSgwLHMtMiksclthXXx8KHJbYV09W10p
        KSxpPW9bMV0/ZGVjb2RlVVJJQ29tcG9uZW50KG9bMV0pOiIiKSx1P3JbYV0u
        cHVzaChpKTpyW2FdPWl9cmV0dXJuIHJ9LHJlY29nbml6ZTpmdW5jdGlvbihl
        KXt2YXIgdCxyLG4saSxvPVt0aGlzLnJvb3RTdGF0ZV0sYT17fSxzPSExO2lm
        KGU9ZGVjb2RlVVJJKGUpLGk9ZS5pbmRleE9mKCI/IiksLTEhPT1pKXt2YXIg
        Yz1lLnN1YnN0cihpKzEsZS5sZW5ndGgpO2U9ZS5zdWJzdHIoMCxpKSxhPXRo
        aXMucGFyc2VRdWVyeVN0cmluZyhjKX1mb3IoIi8iIT09ZS5jaGFyQXQoMCkm
        JihlPSIvIitlKSx0PWUubGVuZ3RoLHQ+MSYmIi8iPT09ZS5jaGFyQXQodC0x
        KSYmKGU9ZS5zdWJzdHIoMCx0LTEpLHM9ITApLHI9MCxuPWUubGVuZ3RoO24+
        ciYmKG89bChvLGUuY2hhckF0KHIpKSxvLmxlbmd0aCk7cisrKTt2YXIgbT1b
        XTtmb3Iocj0wLG49by5sZW5ndGg7bj5yO3IrKylvW3JdLmhhbmRsZXJzJiZt
        LnB1c2gob1tyXSk7bz11KG0pO3ZhciBwPW1bMF07cmV0dXJuIHAmJnAuaGFu
        ZGxlcnM/KHMmJiIoLispJCI9PT1wLnJlZ2V4LnNvdXJjZS5zbGljZSgtNSkm
        JihlKz0iLyIpLGgocCxlLGEpKTp2b2lkIDB9fSxlWyJkZWZhdWx0Il09Xyxw
        LnByb3RvdHlwZT17dG86ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLmRlbGVn
        YXRlO2lmKHImJnIud2lsbEFkZFJvdXRlJiYoZT1yLndpbGxBZGRSb3V0ZSh0
        aGlzLm1hdGNoZXIudGFyZ2V0LGUpKSx0aGlzLm1hdGNoZXIuYWRkKHRoaXMu
        cGF0aCxlKSx0KXtpZigwPT09dC5sZW5ndGgpdGhyb3cgbmV3IEVycm9yKCJZ
        b3UgbXVzdCBoYXZlIGFuIGFyZ3VtZW50IGluIHRoZSBmdW5jdGlvbiBwYXNz
        ZWQgdG8gYHRvYCIpO3RoaXMubWF0Y2hlci5hZGRDaGlsZCh0aGlzLnBhdGgs
        ZSx0LHRoaXMuZGVsZWdhdGUpfXJldHVybiB0aGlzfX0sZi5wcm90b3R5cGU9
        e2FkZDpmdW5jdGlvbihlLHQpe3RoaXMucm91dGVzW2VdPXR9LGFkZENoaWxk
        OmZ1bmN0aW9uKGUsdCxyLG4pe3ZhciBpPW5ldyBmKHQpO3RoaXMuY2hpbGRy
        ZW5bZV09aTt2YXIgbz1kKGUsaSxuKTtuJiZuLmNvbnRleHRFbnRlcmVkJiZu
        LmNvbnRleHRFbnRlcmVkKHQsbykscihvKX19LF8ucHJvdG90eXBlLm1hcD1m
        dW5jdGlvbihlLHQpe3ZhciByPW5ldyBmO2UoZCgiIixyLHRoaXMuZGVsZWdh
        dGUpKSx2KFtdLHIsZnVuY3Rpb24oZSl7dD90KHRoaXMsZSk6dGhpcy5hZGQo
        ZSl9LHRoaXMpfX0pfSgpLGZ1bmN0aW9uKCl7ZSgicm91dGVyL2hhbmRsZXIt
        aW5mbyIsWyIuL3V0aWxzIiwicnN2cCIsImV4cG9ydHMiXSxmdW5jdGlvbihl
        LHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIG4oZSl7ZSYmbCh0aGlzLGUp
        fWZ1bmN0aW9uIGkoZSl7bi5jYWxsKHRoaXMsZSl9ZnVuY3Rpb24gbyhlKXtu
        LmNhbGwodGhpcyxlKSx0aGlzLnBhcmFtcz10aGlzLnBhcmFtc3x8e319ZnVu
        Y3Rpb24gYShlKXtuLmNhbGwodGhpcyxlKX1mdW5jdGlvbiBzKGUsdCl7aWYo
        IWVeIXQpcmV0dXJuITE7aWYoIWUpcmV0dXJuITA7Zm9yKHZhciByIGluIGUp
        aWYoZS5oYXNPd25Qcm9wZXJ0eShyKSYmZVtyXSE9PXRbcl0pcmV0dXJuITE7
        cmV0dXJuITB9dmFyIHU9ZS5iaW5kLGw9ZS5tZXJnZSxjPWUub0NyZWF0ZSxo
        PWUuc2VyaWFsaXplLG09ZS5wcm9taXNlTGFiZWwscD10LnJlc29sdmU7bi5w
        cm90b3R5cGU9e25hbWU6bnVsbCxoYW5kbGVyOm51bGwscGFyYW1zOm51bGws
        Y29udGV4dDpudWxsLGxvZzpmdW5jdGlvbihlLHQpe2UubG9nJiZlLmxvZyh0
        aGlzLm5hbWUrIjogIit0KX0scHJvbWlzZUxhYmVsOmZ1bmN0aW9uKGUpe3Jl
        dHVybiBtKCInIit0aGlzLm5hbWUrIicgIitlKX0scmVzb2x2ZTpmdW5jdGlv
        bihlLHQscil7dmFyIG49dSh0aGlzLmNoZWNrRm9yQWJvcnQsdGhpcyx0KSxp
        PXUodGhpcy5ydW5CZWZvcmVNb2RlbEhvb2ssdGhpcyxlLHIpLG89dSh0aGlz
        LmdldE1vZGVsLHRoaXMsZSxyKSxhPXUodGhpcy5ydW5BZnRlck1vZGVsSG9v
        ayx0aGlzLGUscikscz11KHRoaXMuYmVjb21lUmVzb2x2ZWQsdGhpcyxyKTty
        ZXR1cm4gcCh2b2lkIDAsdGhpcy5wcm9taXNlTGFiZWwoIlN0YXJ0IGhhbmRs
        ZXIiKSkudGhlbihuLG51bGwsdGhpcy5wcm9taXNlTGFiZWwoIkNoZWNrIGZv
        ciBhYm9ydCIpKS50aGVuKGksbnVsbCx0aGlzLnByb21pc2VMYWJlbCgiQmVm
        b3JlIG1vZGVsIikpLnRoZW4obixudWxsLHRoaXMucHJvbWlzZUxhYmVsKCJD
        aGVjayBpZiBhYm9ydGVkIGR1cmluZyAnYmVmb3JlTW9kZWwnIGhvb2siKSku
        dGhlbihvLG51bGwsdGhpcy5wcm9taXNlTGFiZWwoIk1vZGVsIikpLnRoZW4o
        bixudWxsLHRoaXMucHJvbWlzZUxhYmVsKCJDaGVjayBpZiBhYm9ydGVkIGlu
        ICdtb2RlbCcgaG9vayIpKS50aGVuKGEsbnVsbCx0aGlzLnByb21pc2VMYWJl
        bCgiQWZ0ZXIgbW9kZWwiKSkudGhlbihuLG51bGwsdGhpcy5wcm9taXNlTGFi
        ZWwoIkNoZWNrIGlmIGFib3J0ZWQgaW4gJ2FmdGVyTW9kZWwnIGhvb2siKSku
        dGhlbihzLG51bGwsdGhpcy5wcm9taXNlTGFiZWwoIkJlY29tZSByZXNvbHZl
        ZCIpKX0scnVuQmVmb3JlTW9kZWxIb29rOmZ1bmN0aW9uKGUsdCl7cmV0dXJu
        IHQudHJpZ2dlciYmdC50cmlnZ2VyKCEwLCJ3aWxsUmVzb2x2ZU1vZGVsIix0
        LHRoaXMuaGFuZGxlciksdGhpcy5ydW5TaGFyZWRNb2RlbEhvb2soZSx0LCJi
        ZWZvcmVNb2RlbCIsW10pfSxydW5BZnRlck1vZGVsSG9vazpmdW5jdGlvbihl
        LHQscil7dmFyIG49dGhpcy5uYW1lO3JldHVybiB0aGlzLnN0YXNoUmVzb2x2
        ZWRNb2RlbCh0LHIpLHRoaXMucnVuU2hhcmVkTW9kZWxIb29rKGUsdCwiYWZ0
        ZXJNb2RlbCIsW3JdKS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIHQucmVzb2x2
        ZWRNb2RlbHNbbl19LG51bGwsdGhpcy5wcm9taXNlTGFiZWwoIklnbm9yZSBm
        dWxmaWxsbWVudCB2YWx1ZSBhbmQgcmV0dXJuIG1vZGVsIHZhbHVlIikpfSxy
        dW5TaGFyZWRNb2RlbEhvb2s6ZnVuY3Rpb24oZSx0LHIsbil7dGhpcy5sb2co
        dCwiY2FsbGluZyAiK3IrIiBob29rIiksdGhpcy5xdWVyeVBhcmFtcyYmbi5w
        dXNoKHRoaXMucXVlcnlQYXJhbXMpLG4ucHVzaCh0KTt2YXIgaT10aGlzLmhh
        bmRsZXI7cmV0dXJuIGUoZnVuY3Rpb24oKXtyZXR1cm4gaVtyXSYmaVtyXS5h
        cHBseShpLG4pfSx0aGlzLnByb21pc2VMYWJlbCgiSGFuZGxlICIrcikpfSxn
        ZXRNb2RlbDpmdW5jdGlvbigpe3Rocm93IG5ldyBFcnJvcigiVGhpcyBzaG91
        bGQgYmUgb3ZlcnJpZGRlbiBieSBhIHN1YmNsYXNzIG9mIEhhbmRsZXJJbmZv
        Iil9LGNoZWNrRm9yQWJvcnQ6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gcChlKCks
        dGhpcy5wcm9taXNlTGFiZWwoIkNoZWNrIGZvciBhYm9ydCIpKS50aGVuKGZ1
        bmN0aW9uKCl7cmV0dXJuIHR9LG51bGwsdGhpcy5wcm9taXNlTGFiZWwoIkln
        bm9yZSBmdWxmaWxsbWVudCB2YWx1ZSBhbmQgY29udGludWUiKSl9LHN0YXNo
        UmVzb2x2ZWRNb2RlbDpmdW5jdGlvbihlLHQpe2UucmVzb2x2ZWRNb2RlbHM9
        ZS5yZXNvbHZlZE1vZGVsc3x8e30sZS5yZXNvbHZlZE1vZGVsc1t0aGlzLm5h
        bWVdPXR9LGJlY29tZVJlc29sdmVkOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhp
        cy5wYXJhbXN8fGgodGhpcy5oYW5kbGVyLHQsdGhpcy5uYW1lcyk7cmV0dXJu
        IGUmJih0aGlzLnN0YXNoUmVzb2x2ZWRNb2RlbChlLHQpLGUucGFyYW1zPWUu
        cGFyYW1zfHx7fSxlLnBhcmFtc1t0aGlzLm5hbWVdPXIpLG5ldyBpKHtjb250
        ZXh0OnQsbmFtZTp0aGlzLm5hbWUsaGFuZGxlcjp0aGlzLmhhbmRsZXIscGFy
        YW1zOnJ9KX0sc2hvdWxkU3VwZXJjZWRlOmZ1bmN0aW9uKGUpe2lmKCFlKXJl
        dHVybiEwO3ZhciB0PWUuY29udGV4dD09PXRoaXMuY29udGV4dDtyZXR1cm4g
        ZS5uYW1lIT09dGhpcy5uYW1lfHx0aGlzLmhhc093blByb3BlcnR5KCJjb250
        ZXh0IikmJiF0fHx0aGlzLmhhc093blByb3BlcnR5KCJwYXJhbXMiKSYmIXMo
        dGhpcy5wYXJhbXMsZS5wYXJhbXMpfX0saS5wcm90b3R5cGU9YyhuLnByb3Rv
        dHlwZSksaS5wcm90b3R5cGUucmVzb2x2ZT1mdW5jdGlvbihlLHQscil7cmV0
        dXJuIHImJnIucmVzb2x2ZWRNb2RlbHMmJihyLnJlc29sdmVkTW9kZWxzW3Ro
        aXMubmFtZV09dGhpcy5jb250ZXh0KSxwKHRoaXMsdGhpcy5wcm9taXNlTGFi
        ZWwoIlJlc29sdmUiKSl9LG8ucHJvdG90eXBlPWMobi5wcm90b3R5cGUpLG8u
        cHJvdG90eXBlLmdldE1vZGVsPWZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcy5w
        YXJhbXM7dCYmdC5xdWVyeVBhcmFtcyYmKHI9e30sbChyLHRoaXMucGFyYW1z
        KSxyLnF1ZXJ5UGFyYW1zPXQucXVlcnlQYXJhbXMpO3ZhciBuPSJmdW5jdGlv
        biI9PXR5cGVvZiB0aGlzLmhhbmRsZXIuZGVzZXJpYWxpemU/ImRlc2VyaWFs
        aXplIjoibW9kZWwiO3JldHVybiB0aGlzLnJ1blNoYXJlZE1vZGVsSG9vayhl
        LHQsbixbcl0pfSxhLnByb3RvdHlwZT1jKG4ucHJvdG90eXBlKSxhLnByb3Rv
        dHlwZS5nZXRNb2RlbD1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLmxvZyh0
        LHRoaXMubmFtZSsiOiByZXNvbHZpbmcgcHJvdmlkZWQgbW9kZWwiKSxwKHRo
        aXMuY29udGV4dCl9LHIuSGFuZGxlckluZm89bixyLlJlc29sdmVkSGFuZGxl
        ckluZm89aSxyLlVucmVzb2x2ZWRIYW5kbGVySW5mb0J5UGFyYW09byxyLlVu
        cmVzb2x2ZWRIYW5kbGVySW5mb0J5T2JqZWN0PWF9KSxlKCJyb3V0ZXIvcm91
        dGVyIixbInJvdXRlLXJlY29nbml6ZXIiLCJyc3ZwIiwiLi91dGlscyIsIi4v
        dHJhbnNpdGlvbi1zdGF0ZSIsIi4vdHJhbnNpdGlvbiIsIi4vdHJhbnNpdGlv
        bi1pbnRlbnQvbmFtZWQtdHJhbnNpdGlvbi1pbnRlbnQiLCIuL3RyYW5zaXRp
        b24taW50ZW50L3VybC10cmFuc2l0aW9uLWludGVudCIsImV4cG9ydHMiXSxm
        dW5jdGlvbihlLHQscixuLGksbyxhLHMpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlv
        biB1KCl7dGhpcy5yZWNvZ25pemVyPW5ldyB2LHRoaXMucmVzZXQoKX1mdW5j
        dGlvbiBsKGUsdCxyKXt2YXIgbj1oKGUuc3RhdGUsdCk7QyhuLmV4aXRlZCxm
        dW5jdGlvbihlKXt2YXIgdD1lLmhhbmRsZXI7ZGVsZXRlIHQuY29udGV4dCx0
        LmV4aXQmJnQuZXhpdCgpfSk7dmFyIGk9ZS5vbGRTdGF0ZT1lLnN0YXRlO2Uu
        c3RhdGU9dDt2YXIgbz1lLmN1cnJlbnRIYW5kbGVySW5mb3M9bi51bmNoYW5n
        ZWQuc2xpY2UoKTt0cnl7QyhuLnVwZGF0ZWRDb250ZXh0LGZ1bmN0aW9uKGUp
        e3JldHVybiBjKG8sZSwhMSxyKX0pLEMobi5lbnRlcmVkLGZ1bmN0aW9uKGUp
        e3JldHVybiBjKG8sZSwhMCxyKX0pfWNhdGNoKGEpe3Rocm93IGUuc3RhdGU9
        aSxlLmN1cnJlbnRIYW5kbGVySW5mb3M9aS5oYW5kbGVySW5mb3MsYX1lLnN0
        YXRlLnF1ZXJ5UGFyYW1zPWIoZSxvLHQucXVlcnlQYXJhbXMpfWZ1bmN0aW9u
        IGMoZSx0LHIsbil7dmFyIGk9dC5oYW5kbGVyLG89dC5jb250ZXh0O2lmKHIm
        JmkuZW50ZXImJmkuZW50ZXIobiksbiYmbi5pc0Fib3J0ZWQpdGhyb3cgbmV3
        IEk7aWYoaS5jb250ZXh0PW8saS5jb250ZXh0RGlkQ2hhbmdlJiZpLmNvbnRl
        eHREaWRDaGFuZ2UoKSxpLnNldHVwJiZpLnNldHVwKG8sbiksbiYmbi5pc0Fi
        b3J0ZWQpdGhyb3cgbmV3IEk7cmV0dXJuIGUucHVzaCh0KSwhMH1mdW5jdGlv
        biBoKGUsdCl7dmFyIHIsbixpLG8sYSxzPWUuaGFuZGxlckluZm9zLHU9dC5o
        YW5kbGVySW5mb3MsbD17dXBkYXRlZENvbnRleHQ6W10sZXhpdGVkOltdLGVu
        dGVyZWQ6W10sdW5jaGFuZ2VkOltdfTtmb3Iobz0wLGE9dS5sZW5ndGg7YT5v
        O28rKyl7dmFyIGM9c1tvXSxoPXVbb107YyYmYy5oYW5kbGVyPT09aC5oYW5k
        bGVyfHwocj0hMCkscj8obC5lbnRlcmVkLnB1c2goaCksYyYmbC5leGl0ZWQu
        dW5zaGlmdChjKSk6bnx8Yy5jb250ZXh0IT09aC5jb250ZXh0fHxpPyhuPSEw
        LGwudXBkYXRlZENvbnRleHQucHVzaChoKSk6bC51bmNoYW5nZWQucHVzaChj
        KX1mb3Iobz11Lmxlbmd0aCxhPXMubGVuZ3RoO2E+bztvKyspbC5leGl0ZWQu
        dW5zaGlmdChzW29dKTtyZXR1cm4gbH1mdW5jdGlvbiBtKGUsdCxyKXt2YXIg
        bj1lLnVybE1ldGhvZDtpZihuKXtmb3IodmFyIGk9ZS5yb3V0ZXIsbz10Lmhh
        bmRsZXJJbmZvcyxhPW9bby5sZW5ndGgtMV0ubmFtZSxzPXt9LHU9by5sZW5n
        dGgtMTt1Pj0wOy0tdSl7dmFyIGw9b1t1XTtPKHMsbC5wYXJhbXMpLGwuaGFu
        ZGxlci5pbmFjY2Vzc2libGVCeVVSTCYmKG49bnVsbCl9aWYobil7cy5xdWVy
        eVBhcmFtcz10LnF1ZXJ5UGFyYW1zO3ZhciBjPWkucmVjb2duaXplci5nZW5l
        cmF0ZShhLHMpOyJyZXBsYWNlUXVlcnkiPT09bj9jIT09ciYmaS5yZXBsYWNl
        VVJMKGMpOiJyZXBsYWNlIj09PW4/aS5yZXBsYWNlVVJMKGMpOmkudXBkYXRl
        VVJMKGMpfX19ZnVuY3Rpb24gcChlLHQpe3RyeXtfKGUucm91dGVyLGUuc2Vx
        dWVuY2UsIlJlc29sdmVkIGFsbCBtb2RlbHMgb24gZGVzdGluYXRpb24gcm91
        dGU7IGZpbmFsaXppbmcgdHJhbnNpdGlvbi4iKTt7dmFyIHI9ZS5yb3V0ZXIs
        bj10LmhhbmRsZXJJbmZvcztlLnNlcXVlbmNlfXJldHVybiBsKHIsdCxlKSxl
        LmlzQWJvcnRlZD8oci5zdGF0ZS5oYW5kbGVySW5mb3M9ci5jdXJyZW50SGFu
        ZGxlckluZm9zLEUoVihlKSkpOihtKGUsdCxlLmludGVudC51cmwpLGUuaXNB
        Y3RpdmU9ITEsci5hY3RpdmVUcmFuc2l0aW9uPW51bGwseShyLHIuY3VycmVu
        dEhhbmRsZXJJbmZvcywhMCxbImRpZFRyYW5zaXRpb24iXSksci5kaWRUcmFu
        c2l0aW9uJiZyLmRpZFRyYW5zaXRpb24oci5jdXJyZW50SGFuZGxlckluZm9z
        KSxfKHIsZS5zZXF1ZW5jZSwiVFJBTlNJVElPTiBDT01QTEVURS4iKSxuW24u
        bGVuZ3RoLTFdLmhhbmRsZXIpfWNhdGNoKGkpe2lmKCEoaSBpbnN0YW5jZW9m
        IEkpKXt2YXIgbz1lLnN0YXRlLmhhbmRsZXJJbmZvcztlLnRyaWdnZXIoITAs
        ImVycm9yIixpLGUsb1tvLmxlbmd0aC0xXS5oYW5kbGVyKSxlLmFib3J0KCl9
        dGhyb3cgaX19ZnVuY3Rpb24gZihlLHQscil7dmFyIG49dFswXXx8Ii8iLGk9
        dFt0Lmxlbmd0aC0xXSxvPXt9O2kmJmkuaGFzT3duUHJvcGVydHkoInF1ZXJ5
        UGFyYW1zIikmJihvPU0uY2FsbCh0KS5xdWVyeVBhcmFtcyk7dmFyIGE7aWYo
        MD09PXQubGVuZ3RoKXtfKGUsIlVwZGF0aW5nIHF1ZXJ5IHBhcmFtcyIpO3Zh
        ciBzPWUuc3RhdGUuaGFuZGxlckluZm9zO2E9bmV3IFIoe25hbWU6c1tzLmxl
        bmd0aC0xXS5uYW1lLGNvbnRleHRzOltdLHF1ZXJ5UGFyYW1zOm99KX1lbHNl
        Ii8iPT09bi5jaGFyQXQoMCk/KF8oZSwiQXR0ZW1wdGluZyBVUkwgdHJhbnNp
        dGlvbiB0byAiK24pLGE9bmV3IEQoe3VybDpufSkpOihfKGUsIkF0dGVtcHRp
        bmcgdHJhbnNpdGlvbiB0byAiK24pLGE9bmV3IFIoe25hbWU6dFswXSxjb250
        ZXh0czp3LmNhbGwodCwxKSxxdWVyeVBhcmFtczpvfSkpO3JldHVybiBlLnRy
        YW5zaXRpb25CeUludGVudChhLHIpfWZ1bmN0aW9uIGQoZSx0KXtpZihlLmxl
        bmd0aCE9PXQubGVuZ3RoKXJldHVybiExO2Zvcih2YXIgcj0wLG49ZS5sZW5n
        dGg7bj5yOysrcilpZihlW3JdIT09dFtyXSlyZXR1cm4hMTtyZXR1cm4hMH1m
        dW5jdGlvbiBiKGUsdCxyKXt2YXIgbj1bXTt5KGUsdCwhMCxbImZpbmFsaXpl
        UXVlcnlQYXJhbUNoYW5nZSIscixuXSk7Zm9yKHZhciBpPXt9LG89MCxhPW4u
        bGVuZ3RoO2E+bzsrK28pe3ZhciBzPW5bb107aVtzLmtleV09cy52YWx1ZX1y
        ZXR1cm4gaX12YXIgdj1lWyJkZWZhdWx0Il0sRT0odC5yZXNvbHZlLHQucmVq
        ZWN0KSxnPSh0LmFzeW5jLHQuUHJvbWlzZSkseT1yLnRyaWdnZXIsXz1yLmxv
        Zyx3PXIuc2xpY2UsQz1yLmZvckVhY2gsTz1yLm1lcmdlLEE9ci5zZXJpYWxp
        emUsUD1yLmV4dHJhY3RRdWVyeVBhcmFtcyx4PXIuZ2V0Q2hhbmdlbGlzdCxU
        PXIucHJvbWlzZUxhYmVsLFM9bi5UcmFuc2l0aW9uU3RhdGUsVj1pLmxvZ0Fi
        b3J0LE49aS5UcmFuc2l0aW9uLEk9aS5UcmFuc2l0aW9uQWJvcnRlZCxSPW8u
        TmFtZWRUcmFuc2l0aW9uSW50ZW50LEQ9YS5VUkxUcmFuc2l0aW9uSW50ZW50
        LE09QXJyYXkucHJvdG90eXBlLnBvcDt1LnByb3RvdHlwZT17bWFwOmZ1bmN0
        aW9uKGUpe3RoaXMucmVjb2duaXplci5kZWxlZ2F0ZT10aGlzLmRlbGVnYXRl
        LHRoaXMucmVjb2duaXplci5tYXAoZSxmdW5jdGlvbihlLHQpe2Zvcih2YXIg
        cj10Lmxlbmd0aC0xLG49ITA7cj49MCYmbjstLXIpe3ZhciBpPXRbcl07ZS5h
        ZGQodCx7YXM6aS5oYW5kbGVyfSksbj0iLyI9PT1pLnBhdGh8fCIiPT09aS5w
        YXRofHwiLmluZGV4Ij09PWkuaGFuZGxlci5zbGljZSgtNil9fSl9LGhhc1Jv
        dXRlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnJlY29nbml6ZXIuaGFzUm91
        dGUoZSl9LHRyYW5zaXRpb25CeUludGVudDpmdW5jdGlvbihlLHQpe3ZhciBy
        LG49ISF0aGlzLmFjdGl2ZVRyYW5zaXRpb24saT1uP3RoaXMuYWN0aXZlVHJh
        bnNpdGlvbi5zdGF0ZTp0aGlzLnN0YXRlLG89dGhpczt0cnl7dmFyIGE9ZS5h
        cHBseVRvU3RhdGUoaSx0aGlzLnJlY29nbml6ZXIsdGhpcy5nZXRIYW5kbGVy
        LHQpO2lmKGQoYS5oYW5kbGVySW5mb3MsaS5oYW5kbGVySW5mb3MpKXt2YXIg
        cz14KGkucXVlcnlQYXJhbXMsYS5xdWVyeVBhcmFtcyk7cmV0dXJuIHM/KHRo
        aXMuX2NoYW5nZWRRdWVyeVBhcmFtcz1zLmNoYW5nZWQseSh0aGlzLGEuaGFu
        ZGxlckluZm9zLCEwLFsicXVlcnlQYXJhbXNEaWRDaGFuZ2UiLHMuY2hhbmdl
        ZCxzLmFsbCxzLnJlbW92ZWRdKSx0aGlzLl9jaGFuZ2VkUXVlcnlQYXJhbXM9
        bnVsbCwhbiYmdGhpcy5hY3RpdmVUcmFuc2l0aW9uP3RoaXMuYWN0aXZlVHJh
        bnNpdGlvbjooaS5xdWVyeVBhcmFtcz1iKHRoaXMsYS5oYW5kbGVySW5mb3Ms
        YS5xdWVyeVBhcmFtcykscj1uZXcgTih0aGlzKSxyLnVybE1ldGhvZD0icmVw
        bGFjZSIsci5wcm9taXNlPXIucHJvbWlzZS50aGVuKGZ1bmN0aW9uKGUpe3Jl
        dHVybiBtKHIsaSwhMCksby5kaWRUcmFuc2l0aW9uJiZvLmRpZFRyYW5zaXRp
        b24oby5jdXJyZW50SGFuZGxlckluZm9zKSxlfSxudWxsLFQoIlRyYW5zaXRp
        b24gY29tcGxldGUiKSkscikpOm5ldyBOKHRoaXMpfXJldHVybiB0PyhsKHRo
        aXMsYSksdm9pZCAwKToocj1uZXcgTih0aGlzLGUsYSksdGhpcy5hY3RpdmVU
        cmFuc2l0aW9uJiZ0aGlzLmFjdGl2ZVRyYW5zaXRpb24uYWJvcnQoKSx0aGlz
        LmFjdGl2ZVRyYW5zaXRpb249cixyLnByb21pc2U9ci5wcm9taXNlLnRoZW4o
        ZnVuY3Rpb24oZSl7cmV0dXJuIG8uYXN5bmMoZnVuY3Rpb24oKXtyZXR1cm4g
        cChyLGUuc3RhdGUpfSwiRmluYWxpemUgdHJhbnNpdGlvbiIpfSxudWxsLFQo
        IlNldHRsZSB0cmFuc2l0aW9uIHByb21pc2Ugd2hlbiB0cmFuc2l0aW9uIGlz
        IGZpbmFsaXplZCIpKSxufHx5KHRoaXMsdGhpcy5zdGF0ZS5oYW5kbGVySW5m
        b3MsITAsWyJ3aWxsVHJhbnNpdGlvbiIscl0pLHIpfWNhdGNoKHUpe3JldHVy
        biBuZXcgTih0aGlzLGUsbnVsbCx1KX19LHJlc2V0OmZ1bmN0aW9uKCl7dGhp
        cy5zdGF0ZSYmQyh0aGlzLnN0YXRlLmhhbmRsZXJJbmZvcyxmdW5jdGlvbihl
        KXt2YXIgdD1lLmhhbmRsZXI7dC5leGl0JiZ0LmV4aXQoKX0pLHRoaXMuc3Rh
        dGU9bmV3IFMsdGhpcy5jdXJyZW50SGFuZGxlckluZm9zPW51bGx9LGFjdGl2
        ZVRyYW5zaXRpb246bnVsbCxoYW5kbGVVUkw6ZnVuY3Rpb24oZSl7dmFyIHQ9
        dy5jYWxsKGFyZ3VtZW50cyk7cmV0dXJuIi8iIT09ZS5jaGFyQXQoMCkmJih0
        WzBdPSIvIitlKSxmKHRoaXMsdCkubWV0aG9kKCJyZXBsYWNlUXVlcnkiKX0s
        dXBkYXRlVVJMOmZ1bmN0aW9uKCl7dGhyb3cgbmV3IEVycm9yKCJ1cGRhdGVV
        UkwgaXMgbm90IGltcGxlbWVudGVkIil9LHJlcGxhY2VVUkw6ZnVuY3Rpb24o
        ZSl7dGhpcy51cGRhdGVVUkwoZSl9LHRyYW5zaXRpb25UbzpmdW5jdGlvbigp
        e3JldHVybiBmKHRoaXMsYXJndW1lbnRzKX0saW50ZXJtZWRpYXRlVHJhbnNp
        dGlvblRvOmZ1bmN0aW9uKCl7Zih0aGlzLGFyZ3VtZW50cywhMCl9LHJlZnJl
        c2g6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PXRoaXMuYWN0aXZlVHJhbnNpdGlv
        bj90aGlzLmFjdGl2ZVRyYW5zaXRpb24uc3RhdGU6dGhpcy5zdGF0ZSxyPXQu
        aGFuZGxlckluZm9zLG49e30saT0wLG89ci5sZW5ndGg7bz5pOysraSl7dmFy
        IGE9cltpXTtuW2EubmFtZV09YS5wYXJhbXN8fHt9fV8odGhpcywiU3RhcnRp
        bmcgYSByZWZyZXNoIHRyYW5zaXRpb24iKTt2YXIgcz1uZXcgUih7bmFtZTpy
        W3IubGVuZ3RoLTFdLm5hbWUscGl2b3RIYW5kbGVyOmV8fHJbMF0uaGFuZGxl
        cixjb250ZXh0czpbXSxxdWVyeVBhcmFtczp0aGlzLl9jaGFuZ2VkUXVlcnlQ
        YXJhbXN8fHQucXVlcnlQYXJhbXN8fHt9fSk7cmV0dXJuIHRoaXMudHJhbnNp
        dGlvbkJ5SW50ZW50KHMsITEpfSxyZXBsYWNlV2l0aDpmdW5jdGlvbigpe3Jl
        dHVybiBmKHRoaXMsYXJndW1lbnRzKS5tZXRob2QoInJlcGxhY2UiKX0sZ2Vu
        ZXJhdGU6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PVAody5jYWxsKGFyZ3VtZW50
        cywxKSkscj10WzBdLG49dFsxXSxpPW5ldyBSKHtuYW1lOmUsY29udGV4dHM6
        cn0pLG89aS5hcHBseVRvU3RhdGUodGhpcy5zdGF0ZSx0aGlzLnJlY29nbml6
        ZXIsdGhpcy5nZXRIYW5kbGVyKSxhPXt9LHM9MCx1PW8uaGFuZGxlckluZm9z
        Lmxlbmd0aDt1PnM7KytzKXt2YXIgbD1vLmhhbmRsZXJJbmZvc1tzXSxjPWwu
        cGFyYW1zfHxBKGwuaGFuZGxlcixsLmNvbnRleHQsbC5uYW1lcyk7TyhhLGMp
        fXJldHVybiBhLnF1ZXJ5UGFyYW1zPW4sdGhpcy5yZWNvZ25pemVyLmdlbmVy
        YXRlKGUsYSl9LGlzQWN0aXZlOmZ1bmN0aW9uKGUpe3ZhciB0LHIsbj1QKHcu
        Y2FsbChhcmd1bWVudHMsMSkpLGk9blswXSxvPW5bMV0sYT10aGlzLnN0YXRl
        LnF1ZXJ5UGFyYW1zLHM9dGhpcy5zdGF0ZS5oYW5kbGVySW5mb3M7aWYoIXMu
        bGVuZ3RoKXJldHVybiExO3ZhciB1PXNbcy5sZW5ndGgtMV0ubmFtZSxsPXRo
        aXMucmVjb2duaXplci5oYW5kbGVyc0Zvcih1KSxjPTA7Zm9yKHI9bC5sZW5n
        dGg7cj5jJiYodD1zW2NdLHQubmFtZSE9PWUpOysrYyk7aWYoYz09PWwubGVu
        Z3RoKXJldHVybiExO3ZhciBoPW5ldyBTO2guaGFuZGxlckluZm9zPXMuc2xp
        Y2UoMCxjKzEpLGw9bC5zbGljZSgwLGMrMSk7dmFyIG09bmV3IFIoe25hbWU6
        dSxjb250ZXh0czppfSkscD1tLmFwcGx5VG9IYW5kbGVycyhoLGwsdGhpcy5n
        ZXRIYW5kbGVyLHUsITAsITApLGY9e307TyhmLG8pO2Zvcih2YXIgYiBpbiBh
        KWEuaGFzT3duUHJvcGVydHkoYikmJmYuaGFzT3duUHJvcGVydHkoYikmJihm
        W2JdPWFbYl0pO3JldHVybiBkKHAuaGFuZGxlckluZm9zLGguaGFuZGxlcklu
        Zm9zKSYmIXgoZixvKX0sdHJpZ2dlcjpmdW5jdGlvbigpe3ZhciBlPXcuY2Fs
        bChhcmd1bWVudHMpO3kodGhpcyx0aGlzLmN1cnJlbnRIYW5kbGVySW5mb3Ms
        ITEsZSl9LGFzeW5jOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIG5ldyBnKGZ1bmN0
        aW9uKHQpe3QoZSgpKX0sdCl9LGxvZzpudWxsfSxzLlJvdXRlcj11fSksZSgi
        cm91dGVyL3RyYW5zaXRpb24taW50ZW50IixbIi4vdXRpbHMiLCJleHBvcnRz
        Il0sZnVuY3Rpb24oZSx0KXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gcihlKXtl
        JiZuKHRoaXMsZSksdGhpcy5kYXRhPXRoaXMuZGF0YXx8e319dmFyIG49ZS5t
        ZXJnZTtyLnByb3RvdHlwZS5hcHBseVRvU3RhdGU9ZnVuY3Rpb24oZSl7cmV0
        dXJuIGV9LHQuVHJhbnNpdGlvbkludGVudD1yfSksZSgicm91dGVyL3RyYW5z
        aXRpb24taW50ZW50L25hbWVkLXRyYW5zaXRpb24taW50ZW50IixbIi4uL3Ry
        YW5zaXRpb24taW50ZW50IiwiLi4vdHJhbnNpdGlvbi1zdGF0ZSIsIi4uL2hh
        bmRsZXItaW5mbyIsIi4uL3V0aWxzIiwiZXhwb3J0cyJdLGZ1bmN0aW9uKGUs
        dCxyLG4saSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIG8oZSl7YS5jYWxsKHRo
        aXMsZSl9dmFyIGE9ZS5UcmFuc2l0aW9uSW50ZW50LHM9dC5UcmFuc2l0aW9u
        U3RhdGUsdT1yLlVucmVzb2x2ZWRIYW5kbGVySW5mb0J5UGFyYW0sbD1yLlVu
        cmVzb2x2ZWRIYW5kbGVySW5mb0J5T2JqZWN0LGM9bi5pc1BhcmFtLGg9bi5m
        b3JFYWNoLG09bi5leHRyYWN0UXVlcnlQYXJhbXMscD1uLm9DcmVhdGUsZj1u
        Lm1lcmdlO28ucHJvdG90eXBlPXAoYS5wcm90b3R5cGUpLG8ucHJvdG90eXBl
        LmFwcGx5VG9TdGF0ZT1mdW5jdGlvbihlLHQscixuKXt2YXIgaT1tKFt0aGlz
        Lm5hbWVdLmNvbmNhdCh0aGlzLmNvbnRleHRzKSksbz1pWzBdLGE9KGlbMV0s
        dC5oYW5kbGVyc0ZvcihvWzBdKSkscz1hW2EubGVuZ3RoLTFdLmhhbmRsZXI7
        cmV0dXJuIHRoaXMuYXBwbHlUb0hhbmRsZXJzKGUsYSxyLHMsbil9LG8ucHJv
        dG90eXBlLmFwcGx5VG9IYW5kbGVycz1mdW5jdGlvbihlLHQscixuLGksbyl7
        dmFyIGEsdT1uZXcgcyxsPXRoaXMuY29udGV4dHMuc2xpY2UoMCksYz10Lmxl
        bmd0aCxoPVtdO2lmKHRoaXMucGl2b3RIYW5kbGVyKWZvcihhPTA7YTx0Lmxl
        bmd0aDsrK2EpaWYocih0W2FdLmhhbmRsZXIpPT09dGhpcy5waXZvdEhhbmRs
        ZXIpe2M9YTticmVha30hdGhpcy5waXZvdEhhbmRsZXI7Zm9yKGE9dC5sZW5n
        dGgtMTthPj0wOy0tYSl7dmFyIG09dFthXSxwPW0uaGFuZGxlcixkPXIocCks
        Yj1lLmhhbmRsZXJJbmZvc1thXSx2PW51bGw7aWYobS5uYW1lcy5sZW5ndGg+
        MD92PWE+PWM/dGhpcy5jcmVhdGVQYXJhbUhhbmRsZXJJbmZvKHAsZCxtLm5h
        bWVzLGwsYik6dGhpcy5nZXRIYW5kbGVySW5mb0ZvckR5bmFtaWNTZWdtZW50
        KHAsZCxtLm5hbWVzLGwsYixuKToodj10aGlzLmNyZWF0ZVBhcmFtSGFuZGxl
        ckluZm8ocCxkLG0ubmFtZXMsbCxiKSxoLnVuc2hpZnQoYSkpLG8pe3Y9di5i
        ZWNvbWVSZXNvbHZlZChudWxsLHYuY29udGV4dCk7dmFyIEU9YiYmYi5jb250
        ZXh0O20ubmFtZXMubGVuZ3RoPjAmJnYuY29udGV4dD09PUUmJih2LnBhcmFt
        cz1iJiZiLnBhcmFtcyksdi5jb250ZXh0PUV9dmFyIGc9YjsoYT49Y3x8di5z
        aG91bGRTdXBlcmNlZGUoYikpJiYoYz1NYXRoLm1pbihhLGMpLGc9diksaSYm
        IW8mJihnPWcuYmVjb21lUmVzb2x2ZWQobnVsbCxnLmNvbnRleHQpKSx1Lmhh
        bmRsZXJJbmZvcy51bnNoaWZ0KGcpfWlmKGwubGVuZ3RoPjApdGhyb3cgbmV3
        IEVycm9yKCJNb3JlIGNvbnRleHQgb2JqZWN0cyB3ZXJlIHBhc3NlZCB0aGFu
        IHRoZXJlIGFyZSBkeW5hbWljIHNlZ21lbnRzIGZvciB0aGUgcm91dGU6ICIr
        bik7cmV0dXJuIGl8fHRoaXMuaW52YWxpZGF0ZU5vbkR5bmFtaWNIYW5kbGVy
        cyh1LmhhbmRsZXJJbmZvcyxoLGMpLGYodS5xdWVyeVBhcmFtcyxlLnF1ZXJ5
        UGFyYW1zKSxmKHUucXVlcnlQYXJhbXMsdGhpcy5xdWVyeVBhcmFtc3x8e30p
        LHV9LG8ucHJvdG90eXBlLmludmFsaWRhdGVOb25EeW5hbWljSGFuZGxlcnM9
        ZnVuY3Rpb24oZSx0LHIpe2godCxmdW5jdGlvbih0KXtpZih0Pj1yKXt2YXIg
        bj1lW3RdO2VbdF09bmV3IHUoe25hbWU6bi5uYW1lLGhhbmRsZXI6bi5oYW5k
        bGVyLHBhcmFtczp7fX0pfX0pfSxvLnByb3RvdHlwZS5nZXRIYW5kbGVySW5m
        b0ZvckR5bmFtaWNTZWdtZW50PWZ1bmN0aW9uKGUsdCxyLG4saSl7e3ZhciBv
        O3IubGVuZ3RofXJldHVybiBuLmxlbmd0aD4wPyhvPW5bbi5sZW5ndGgtMV0s
        YyhvKT90aGlzLmNyZWF0ZVBhcmFtSGFuZGxlckluZm8oZSx0LHIsbixpKToo
        bi5wb3AoKSxuZXcgbCh7bmFtZTplLGhhbmRsZXI6dCxjb250ZXh0Om8sbmFt
        ZXM6cn0pKSk6aSYmaS5uYW1lPT09ZT9pOml9LG8ucHJvdG90eXBlLmNyZWF0
        ZVBhcmFtSGFuZGxlckluZm89ZnVuY3Rpb24oZSx0LHIsbixpKXtmb3IodmFy
        IG89e30sYT1yLmxlbmd0aDthLS07KXt2YXIgcz1pJiZlPT09aS5uYW1lJiZp
        LnBhcmFtc3x8e30sbD1uW24ubGVuZ3RoLTFdLGg9clthXTtpZihjKGwpKW9b
        aF09IiIrbi5wb3AoKTtlbHNle2lmKCFzLmhhc093blByb3BlcnR5KGgpKXRo
        cm93IG5ldyBFcnJvcigiWW91IGRpZG4ndCBwcm92aWRlIGVub3VnaCBzdHJp
        bmcvbnVtZXJpYyBwYXJhbWV0ZXJzIHRvIHNhdGlzZnkgYWxsIG9mIHRoZSBk
        eW5hbWljIHNlZ21lbnRzIGZvciByb3V0ZSAiK2UpO29baF09c1toXX19cmV0
        dXJuIG5ldyB1KHtuYW1lOmUsaGFuZGxlcjp0LHBhcmFtczpvfSl9LGkuTmFt
        ZWRUcmFuc2l0aW9uSW50ZW50PW99KSxlKCJyb3V0ZXIvdHJhbnNpdGlvbi1p
        bnRlbnQvdXJsLXRyYW5zaXRpb24taW50ZW50IixbIi4uL3RyYW5zaXRpb24t
        aW50ZW50IiwiLi4vdHJhbnNpdGlvbi1zdGF0ZSIsIi4uL2hhbmRsZXItaW5m
        byIsIi4uL3V0aWxzIiwiZXhwb3J0cyJdLGZ1bmN0aW9uKGUsdCxyLG4saSl7
        InVzZSBzdHJpY3QiO2Z1bmN0aW9uIG8oZSl7cy5jYWxsKHRoaXMsZSl9ZnVu
        Y3Rpb24gYShlKXt0aGlzLm1lc3NhZ2U9ZXx8IlVucmVjb2duaXplZFVSTEVy
        cm9yIix0aGlzLm5hbWU9IlVucmVjb2duaXplZFVSTEVycm9yIn12YXIgcz1l
        LlRyYW5zaXRpb25JbnRlbnQsdT10LlRyYW5zaXRpb25TdGF0ZSxsPXIuVW5y
        ZXNvbHZlZEhhbmRsZXJJbmZvQnlQYXJhbSxjPW4ub0NyZWF0ZSxoPW4ubWVy
        Z2U7by5wcm90b3R5cGU9YyhzLnByb3RvdHlwZSksby5wcm90b3R5cGUuYXBw
        bHlUb1N0YXRlPWZ1bmN0aW9uKGUsdCxyKXt2YXIgbixpLG89bmV3IHUscz10
        LnJlY29nbml6ZSh0aGlzLnVybCk7aWYoIXMpdGhyb3cgbmV3IGEodGhpcy51
        cmwpO3ZhciBjPSExO2ZvcihuPTAsaT1zLmxlbmd0aDtpPm47KytuKXt2YXIg
        bT1zW25dLHA9bS5oYW5kbGVyLGY9cihwKTtpZihmLmluYWNjZXNzaWJsZUJ5
        VVJMKXRocm93IG5ldyBhKHRoaXMudXJsKTt2YXIgZD1uZXcgbCh7bmFtZTpw
        LGhhbmRsZXI6ZixwYXJhbXM6bS5wYXJhbXN9KSxiPWUuaGFuZGxlckluZm9z
        W25dO2N8fGQuc2hvdWxkU3VwZXJjZWRlKGIpPyhjPSEwLG8uaGFuZGxlcklu
        Zm9zW25dPWQpOm8uaGFuZGxlckluZm9zW25dPWJ9cmV0dXJuIGgoby5xdWVy
        eVBhcmFtcyxzLnF1ZXJ5UGFyYW1zKSxvfSxpLlVSTFRyYW5zaXRpb25JbnRl
        bnQ9b30pLGUoInJvdXRlci90cmFuc2l0aW9uLXN0YXRlIixbIi4vaGFuZGxl
        ci1pbmZvIiwiLi91dGlscyIsInJzdnAiLCJleHBvcnRzIl0sZnVuY3Rpb24o
        ZSx0LHIsbil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGkoKXt0aGlzLmhhbmRs
        ZXJJbmZvcz1bXSx0aGlzLnF1ZXJ5UGFyYW1zPXt9LHRoaXMucGFyYW1zPXt9
        fXZhciBvPShlLlJlc29sdmVkSGFuZGxlckluZm8sdC5mb3JFYWNoKSxhPXQu
        cHJvbWlzZUxhYmVsLHM9ci5yZXNvbHZlLHU9ci5yZWplY3Q7aS5wcm90b3R5
        cGU9e2hhbmRsZXJJbmZvczpudWxsLHF1ZXJ5UGFyYW1zOm51bGwscGFyYW1z
        Om51bGwscHJvbWlzZUxhYmVsOmZ1bmN0aW9uKGUpe3ZhciB0PSIiO3JldHVy
        biBvKHRoaXMuaGFuZGxlckluZm9zLGZ1bmN0aW9uKGUpeyIiIT09dCYmKHQr
        PSIuIiksdCs9ZS5uYW1lfSksYSgiJyIrdCsiJzogIitlKX0scmVzb2x2ZTpm
        dW5jdGlvbihlLHQscil7ZnVuY3Rpb24gbigpe3JldHVybiBzKHQoKSxhKCJD
        aGVjayBpZiBzaG91bGQgY29udGludWUiKSlbImNhdGNoIl0oZnVuY3Rpb24o
        ZSl7cmV0dXJuIHA9ITAsdShlKX0sYSgiSGFuZGxlIGFib3J0IikpfWZ1bmN0
        aW9uIGkoZSl7dmFyIHQ9bS5oYW5kbGVySW5mb3Msbj1yLnJlc29sdmVJbmRl
        eD49dC5sZW5ndGg/dC5sZW5ndGgtMTpyLnJlc29sdmVJbmRleDtyZXR1cm4g
        dSh7ZXJyb3I6ZSxoYW5kbGVyV2l0aEVycm9yOm0uaGFuZGxlckluZm9zW25d
        LmhhbmRsZXIsd2FzQWJvcnRlZDpwLHN0YXRlOm19KX1mdW5jdGlvbiBsKGUp
        e20uaGFuZGxlckluZm9zW3IucmVzb2x2ZUluZGV4KytdPWU7dmFyIHQ9ZS5o
        YW5kbGVyO3JldHVybiB0JiZ0LnJlZGlyZWN0JiZ0LnJlZGlyZWN0KGUuY29u
        dGV4dCxyKSxuKCkudGhlbihjLG51bGwsYSgiUmVzb2x2ZSBoYW5kbGVyIikp
        fWZ1bmN0aW9uIGMoKXtpZihyLnJlc29sdmVJbmRleD09PW0uaGFuZGxlcklu
        Zm9zLmxlbmd0aClyZXR1cm57ZXJyb3I6bnVsbCxzdGF0ZTptfTt2YXIgdD1t
        LmhhbmRsZXJJbmZvc1tyLnJlc29sdmVJbmRleF07cmV0dXJuIHQucmVzb2x2
        ZShlLG4scikudGhlbihsLG51bGwsYSgiUHJvY2VlZCIpKX12YXIgaD10aGlz
        LnBhcmFtcztvKHRoaXMuaGFuZGxlckluZm9zLGZ1bmN0aW9uKGUpe2hbZS5u
        YW1lXT1lLnBhcmFtc3x8e319KSxyPXJ8fHt9LHIucmVzb2x2ZUluZGV4PTA7
        dmFyIG09dGhpcyxwPSExO3JldHVybiBzKG51bGwsdGhpcy5wcm9taXNlTGFi
        ZWwoIlN0YXJ0IHRyYW5zaXRpb24iKSkudGhlbihjLG51bGwsdGhpcy5wcm9t
        aXNlTGFiZWwoIlJlc29sdmUgaGFuZGxlciIpKVsiY2F0Y2giXShpLHRoaXMu
        cHJvbWlzZUxhYmVsKCJIYW5kbGUgZXJyb3IiKSl9fSxuLlRyYW5zaXRpb25T
        dGF0ZT1pfSksZSgicm91dGVyL3RyYW5zaXRpb24iLFsicnN2cCIsIi4vaGFu
        ZGxlci1pbmZvIiwiLi91dGlscyIsImV4cG9ydHMiXSxmdW5jdGlvbihlLHQs
        cixuKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gaShlLHQscixuKXtmdW5jdGlv
        biBhKCl7cmV0dXJuIGMuaXNBYm9ydGVkP3Modm9pZCAwLHAoIlRyYW5zaXRp
        b24gYWJvcnRlZCAtIHJlamVjdCIpKTp2b2lkIDB9dmFyIGM9dGhpcztpZih0
        aGlzLnN0YXRlPXJ8fGUuc3RhdGUsdGhpcy5pbnRlbnQ9dCx0aGlzLnJvdXRl
        cj1lLHRoaXMuZGF0YT10aGlzLmludGVudCYmdGhpcy5pbnRlbnQuZGF0YXx8
        e30sdGhpcy5yZXNvbHZlZE1vZGVscz17fSx0aGlzLnF1ZXJ5UGFyYW1zPXt9
        LG4pcmV0dXJuIHRoaXMucHJvbWlzZT1zKG4pLHZvaWQgMDtpZihyKXt0aGlz
        LnBhcmFtcz1yLnBhcmFtcyx0aGlzLnF1ZXJ5UGFyYW1zPXIucXVlcnlQYXJh
        bXM7dmFyIGg9ci5oYW5kbGVySW5mb3MubGVuZ3RoO2gmJih0aGlzLnRhcmdl
        dE5hbWU9ci5oYW5kbGVySW5mb3Nbci5oYW5kbGVySW5mb3MubGVuZ3RoLTFd
        Lm5hbWUpO2Zvcih2YXIgbT0wO2g+bTsrK20pe3ZhciBmPXIuaGFuZGxlcklu
        Zm9zW21dO2lmKCEoZiBpbnN0YW5jZW9mIGwpKWJyZWFrO3RoaXMucGl2b3RI
        YW5kbGVyPWYuaGFuZGxlcn10aGlzLnNlcXVlbmNlPWkuY3VycmVudFNlcXVl
        bmNlKyssdGhpcy5wcm9taXNlPXIucmVzb2x2ZShlLmFzeW5jLGEsdGhpcylb
        ImNhdGNoIl0oZnVuY3Rpb24oZSl7cmV0dXJuIGUud2FzQWJvcnRlZD9zKG8o
        YykpOihjLnRyaWdnZXIoImVycm9yIixlLmVycm9yLGMsZS5oYW5kbGVyV2l0
        aEVycm9yKSxjLmFib3J0KCkscyhlLmVycm9yKSl9LHAoIkhhbmRsZSBBYm9y
        dCIpKX1lbHNlIHRoaXMucHJvbWlzZT11KHRoaXMuc3RhdGUpLHRoaXMucGFy
        YW1zPXt9fWZ1bmN0aW9uIG8oZSl7cmV0dXJuIG0oZS5yb3V0ZXIsZS5zZXF1
        ZW5jZSwiZGV0ZWN0ZWQgYWJvcnQuIiksbmV3IGF9ZnVuY3Rpb24gYShlKXt0
        aGlzLm1lc3NhZ2U9ZXx8IlRyYW5zaXRpb25BYm9ydGVkIix0aGlzLm5hbWU9
        IlRyYW5zaXRpb25BYm9ydGVkIn12YXIgcz1lLnJlamVjdCx1PWUucmVzb2x2
        ZSxsPXQuUmVzb2x2ZWRIYW5kbGVySW5mbyxjPXIudHJpZ2dlcixoPXIuc2xp
        Y2UsbT1yLmxvZyxwPXIucHJvbWlzZUxhYmVsO2kuY3VycmVudFNlcXVlbmNl
        PTAsaS5wcm90b3R5cGU9e3RhcmdldE5hbWU6bnVsbCx1cmxNZXRob2Q6InVw
        ZGF0ZSIsaW50ZW50Om51bGwscGFyYW1zOm51bGwscGl2b3RIYW5kbGVyOm51
        bGwscmVzb2x2ZUluZGV4OjAsaGFuZGxlckluZm9zOm51bGwscmVzb2x2ZWRN
        b2RlbHM6bnVsbCxpc0FjdGl2ZTohMCxzdGF0ZTpudWxsLHByb21pc2U6bnVs
        bCxkYXRhOm51bGwsdGhlbjpmdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLnBy
        b21pc2UudGhlbihlLHQpfSxhYm9ydDpmdW5jdGlvbigpe3JldHVybiB0aGlz
        LmlzQWJvcnRlZD90aGlzOihtKHRoaXMucm91dGVyLHRoaXMuc2VxdWVuY2Us
        dGhpcy50YXJnZXROYW1lKyI6IHRyYW5zaXRpb24gd2FzIGFib3J0ZWQiKSx0
        aGlzLmlzQWJvcnRlZD0hMCx0aGlzLmlzQWN0aXZlPSExLHRoaXMucm91dGVy
        LmFjdGl2ZVRyYW5zaXRpb249bnVsbCx0aGlzKX0scmV0cnk6ZnVuY3Rpb24o
        KXtyZXR1cm4gdGhpcy5hYm9ydCgpLHRoaXMucm91dGVyLnRyYW5zaXRpb25C
        eUludGVudCh0aGlzLmludGVudCwhMSl9LG1ldGhvZDpmdW5jdGlvbihlKXty
        ZXR1cm4gdGhpcy51cmxNZXRob2Q9ZSx0aGlzfSx0cmlnZ2VyOmZ1bmN0aW9u
        KGUpe3ZhciB0PWguY2FsbChhcmd1bWVudHMpOyJib29sZWFuIj09dHlwZW9m
        IGU/dC5zaGlmdCgpOmU9ITEsYyh0aGlzLnJvdXRlcix0aGlzLnN0YXRlLmhh
        bmRsZXJJbmZvcy5zbGljZSgwLHRoaXMucmVzb2x2ZUluZGV4KzEpLGUsdCl9
        LGZvbGxvd1JlZGlyZWN0czpmdW5jdGlvbigpe3ZhciBlPXRoaXMucm91dGVy
        O3JldHVybiB0aGlzLnByb21pc2VbImNhdGNoIl0oZnVuY3Rpb24odCl7cmV0
        dXJuIGUuYWN0aXZlVHJhbnNpdGlvbj9lLmFjdGl2ZVRyYW5zaXRpb24uZm9s
        bG93UmVkaXJlY3RzKCk6cyh0KX0pfSx0b1N0cmluZzpmdW5jdGlvbigpe3Jl
        dHVybiJUcmFuc2l0aW9uIChzZXF1ZW5jZSAiK3RoaXMuc2VxdWVuY2UrIiki
        fSxsb2c6ZnVuY3Rpb24oZSl7bSh0aGlzLnJvdXRlcix0aGlzLnNlcXVlbmNl
        LGUpfX0saS5wcm90b3R5cGUuc2VuZD1pLnByb3RvdHlwZS50cmlnZ2VyLG4u
        VHJhbnNpdGlvbj1pLG4ubG9nQWJvcnQ9byxuLlRyYW5zaXRpb25BYm9ydGVk
        PWF9KSxlKCJyb3V0ZXIvdXRpbHMiLFsiZXhwb3J0cyJdLGZ1bmN0aW9uKGUp
        eyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiB0KGUpe3JldHVybiJbb2JqZWN0IEFy
        cmF5XSI9PT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZSl9ZnVu
        Y3Rpb24gcihlLHQpe2Zvcih2YXIgciBpbiB0KXQuaGFzT3duUHJvcGVydHko
        cikmJihlW3JdPXRbcl0pfWZ1bmN0aW9uIG4oZSl7dmFyIHQscixuPWUmJmUu
        bGVuZ3RoO3JldHVybiBuJiZuPjAmJmVbbi0xXSYmZVtuLTFdLmhhc093blBy
        b3BlcnR5KCJxdWVyeVBhcmFtcyIpPyhyPWVbbi0xXS5xdWVyeVBhcmFtcyx0
        PXAuY2FsbChlLDAsbi0xKSxbdCxyXSk6W2UsbnVsbF19ZnVuY3Rpb24gaShl
        KXtmb3IodmFyIHIgaW4gZSlpZigibnVtYmVyIj09dHlwZW9mIGVbcl0pZVty
        XT0iIitlW3JdO2Vsc2UgaWYodChlW3JdKSlmb3IodmFyIG49MCxpPWVbcl0u
        bGVuZ3RoO2k+bjtuKyspZVtyXVtuXT0iIitlW3JdW25dfWZ1bmN0aW9uIG8o
        ZSx0LHIpe2UubG9nJiYoMz09PWFyZ3VtZW50cy5sZW5ndGg/ZS5sb2coIlRy
        YW5zaXRpb24gIyIrdCsiOiAiK3IpOihyPXQsZS5sb2cocikpKX1mdW5jdGlv
        biBhKGUsdCl7dmFyIHI9YXJndW1lbnRzO3JldHVybiBmdW5jdGlvbihuKXt2
        YXIgaT1wLmNhbGwociwyKTtyZXR1cm4gaS5wdXNoKG4pLGUuYXBwbHkodCxp
        KX19ZnVuY3Rpb24gcyhlKXtyZXR1cm4ic3RyaW5nIj09dHlwZW9mIGV8fGUg
        aW5zdGFuY2VvZiBTdHJpbmd8fCJudW1iZXIiPT10eXBlb2YgZXx8ZSBpbnN0
        YW5jZW9mIE51bWJlcn1mdW5jdGlvbiB1KGUsdCl7Zm9yKHZhciByPTAsbj1l
        Lmxlbmd0aDtuPnImJiExIT09dChlW3JdKTtyKyspO31mdW5jdGlvbiBsKGUs
        dCxyKXt2YXIgbj17fTtpZihzKHQpKXJldHVybiBuW3JbMF1dPXQsbjtpZihl
        LnNlcmlhbGl6ZSlyZXR1cm4gZS5zZXJpYWxpemUodCxyKTtpZigxPT09ci5s
        ZW5ndGgpe3ZhciBpPXJbMF07cmV0dXJuIG5baV09L19pZCQvLnRlc3QoaSk/
        dC5pZDp0LG59fWZ1bmN0aW9uIGMoZSx0LHIsbil7aWYoZS50cmlnZ2VyRXZl
        bnQpcmV0dXJuIGUudHJpZ2dlckV2ZW50KHQscixuKSx2b2lkIDA7dmFyIGk9
        bi5zaGlmdCgpO2lmKCF0KXtpZihyKXJldHVybjt0aHJvdyBuZXcgRXJyb3Io
        IkNvdWxkIG5vdCB0cmlnZ2VyIGV2ZW50ICciK2krIicuIFRoZXJlIGFyZSBu
        byBhY3RpdmUgaGFuZGxlcnMiKX1mb3IodmFyIG89ITEsYT10Lmxlbmd0aC0x
        O2E+PTA7YS0tKXt2YXIgcz10W2FdLHU9cy5oYW5kbGVyO2lmKHUuZXZlbnRz
        JiZ1LmV2ZW50c1tpXSl7aWYodS5ldmVudHNbaV0uYXBwbHkodSxuKSE9PSEw
        KXJldHVybjtvPSEwfX1pZighbyYmIXIpdGhyb3cgbmV3IEVycm9yKCJOb3Ro
        aW5nIGhhbmRsZWQgdGhlIGV2ZW50ICciK2krIicuIil9ZnVuY3Rpb24gaChl
        LG4pe3ZhciBvLGE9e2FsbDp7fSxjaGFuZ2VkOnt9LHJlbW92ZWQ6e319O3Io
        YS5hbGwsbik7dmFyIHM9ITE7aShlKSxpKG4pO2ZvcihvIGluIGUpZS5oYXNP
        d25Qcm9wZXJ0eShvKSYmKG4uaGFzT3duUHJvcGVydHkobyl8fChzPSEwLGEu
        cmVtb3ZlZFtvXT1lW29dKSk7Zm9yKG8gaW4gbilpZihuLmhhc093blByb3Bl
        cnR5KG8pKWlmKHQoZVtvXSkmJnQobltvXSkpaWYoZVtvXS5sZW5ndGghPT1u
        W29dLmxlbmd0aClhLmNoYW5nZWRbb109bltvXSxzPSEwO2Vsc2UgZm9yKHZh
        ciB1PTAsbD1lW29dLmxlbmd0aDtsPnU7dSsrKWVbb11bdV0hPT1uW29dW3Vd
        JiYoYS5jaGFuZ2VkW29dPW5bb10scz0hMCk7ZWxzZSBlW29dIT09bltvXSYm
        KGEuY2hhbmdlZFtvXT1uW29dLHM9ITApO3JldHVybiBzJiZhfWZ1bmN0aW9u
        IG0oZSl7cmV0dXJuIlJvdXRlcjogIitlfXZhciBwPUFycmF5LnByb3RvdHlw
        ZS5zbGljZSxmPU9iamVjdC5jcmVhdGV8fGZ1bmN0aW9uKGUpe2Z1bmN0aW9u
        IHQoKXt9cmV0dXJuIHQucHJvdG90eXBlPWUsbmV3IHR9O2UudHJpZ2dlcj1j
        LGUubG9nPW8sZS5vQ3JlYXRlPWYsZS5tZXJnZT1yLGUuZXh0cmFjdFF1ZXJ5
        UGFyYW1zPW4sZS5iaW5kPWEsZS5pc1BhcmFtPXMsZS5mb3JFYWNoPXUsZS5z
        bGljZT1wLGUuc2VyaWFsaXplPWwsZS5nZXRDaGFuZ2VsaXN0PWgsZS5jb2Vy
        Y2VRdWVyeVBhcmFtc1RvU3RyaW5nPWksZS5wcm9taXNlTGFiZWw9bX0pLGUo
        InJvdXRlciIsWyIuL3JvdXRlci9yb3V0ZXIiLCJleHBvcnRzIl0sZnVuY3Rp
        b24oZSx0KXsidXNlIHN0cmljdCI7dmFyIHI9ZS5Sb3V0ZXI7dC5Sb3V0ZXI9
        cn0pfSgpLGZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXt0aGlzLnBhcmVudD1l
        LHRoaXMubWF0Y2hlcz1bXX1mdW5jdGlvbiB0KGUsdCxyKXtyPXJ8fHt9LCJz
        dHJpbmciIT10eXBlb2Ygci5wYXRoJiYoci5wYXRoPSIvIit0KSxlLnBhcmVu
        dCYmImFwcGxpY2F0aW9uIiE9PWUucGFyZW50JiYodD1lLnBhcmVudCsiLiIr
        dCksZS5wdXNoKHIucGF0aCx0LG51bGwpfWUucHJvdG90eXBlPXtyZXNvdXJj
        ZTpmdW5jdGlvbihyLG4saSl7aWYoMj09PWFyZ3VtZW50cy5sZW5ndGgmJiJm
        dW5jdGlvbiI9PXR5cGVvZiBuJiYoaT1uLG49e30pLDE9PT1hcmd1bWVudHMu
        bGVuZ3RoJiYobj17fSksInN0cmluZyIhPXR5cGVvZiBuLnBhdGgmJihuLnBh
        dGg9Ii8iK3IpLGkpe3ZhciBvPW5ldyBlKHIpO3QobywibG9hZGluZyIpLHQo
        bywiZXJyb3IiLHtwYXRoOiIvX3VudXNlZF9kdW1teV9lcnJvcl9wYXRoX3Jv
        dXRlXyIrcisiLzplcnJvciJ9KSxpLmNhbGwobyksdGhpcy5wdXNoKG4ucGF0
        aCxyLG8uZ2VuZXJhdGUoKSkKfWVsc2UgdGhpcy5wdXNoKG4ucGF0aCxyLG51
        bGwpfSxwdXNoOmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj10LnNwbGl0KCIuIik7
        KCIiPT09ZXx8Ii8iPT09ZXx8ImluZGV4Ij09PW5bbi5sZW5ndGgtMV0pJiYo
        dGhpcy5leHBsaWNpdEluZGV4PSEwKSx0aGlzLm1hdGNoZXMucHVzaChbZSx0
        LHJdKX0scm91dGU6ZnVuY3Rpb24oZSxyKXt0KHRoaXMsZSxyKX0sZ2VuZXJh
        dGU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm1hdGNoZXM7cmV0dXJuIHRoaXMu
        ZXhwbGljaXRJbmRleHx8dGhpcy5yb3V0ZSgiaW5kZXgiLHtwYXRoOiIvIn0p
        LGZ1bmN0aW9uKHQpe2Zvcih2YXIgcj0wLG49ZS5sZW5ndGg7bj5yO3IrKyl7
        dmFyIGk9ZVtyXTt0KGlbMF0pLnRvKGlbMV0saVsyXSl9fX19LGUubWFwPWZ1
        bmN0aW9uKHQpe3ZhciByPW5ldyBlO3JldHVybiB0LmNhbGwocikscn0sRW1i
        ZXIuUm91dGVyRFNMPWV9KCksZnVuY3Rpb24oKXt2YXIgZT1FbWJlci5nZXQ7
        RW1iZXIuY29udHJvbGxlckZvcj1mdW5jdGlvbihlLHQscil7cmV0dXJuIGUu
        bG9va3VwKCJjb250cm9sbGVyOiIrdCxyKX0sRW1iZXIuZ2VuZXJhdGVDb250
        cm9sbGVyRmFjdG9yeT1mdW5jdGlvbihlLHQscil7dmFyIG4saSxvLGE7cmV0
        dXJuIGE9ciYmRW1iZXIuaXNBcnJheShyKT8iYXJyYXkiOnI/Im9iamVjdCI6
        ImJhc2ljIixvPSJjb250cm9sbGVyOiIrYSxuPWUubG9va3VwRmFjdG9yeShv
        KS5leHRlbmQoe2lzR2VuZXJhdGVkOiEwLHRvU3RyaW5nOmZ1bmN0aW9uKCl7
        cmV0dXJuIihnZW5lcmF0ZWQgIit0KyIgY29udHJvbGxlcikifX0pLGk9ImNv
        bnRyb2xsZXI6Iit0LGUucmVnaXN0ZXIoaSxuKSxufSxFbWJlci5nZW5lcmF0
        ZUNvbnRyb2xsZXI9ZnVuY3Rpb24odCxyLG4pe0VtYmVyLmdlbmVyYXRlQ29u
        dHJvbGxlckZhY3RvcnkodCxyLG4pO3ZhciBpPSJjb250cm9sbGVyOiIrcixv
        PXQubG9va3VwKGkpO3JldHVybiBlKG8sIm5hbWVzcGFjZS5MT0dfQUNUSVZF
        X0dFTkVSQVRJT04iKSxvfX0oKSxmdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0
        KXt2YXIgbj1lLmNvbnRyb2xsZXJOYW1lfHxlLnJvdXRlTmFtZSxpPXIobixl
        LmNvbnRhaW5lciksbz1oKGksInF1ZXJ5UGFyYW1zIik7byYmZChvLGZ1bmN0
        aW9uKGUpe3ZhciByLGk9ZS5zcGxpdCgiOiIpO3I9aS5sZW5ndGg+MT9pWzFd
        OiJhcHBsaWNhdGlvbiIhPT1uP24rIlsiK2UrIl0iOmU7dmFyIG89bisiOiIr
        ZTt0LnF1ZXJ5UGFyYW1zW29dPXIsdC50cmFuc2xhdGlvbnNbaVswXV09b30p
        fWZ1bmN0aW9uIHIoZSx0KXt2YXIgcj0iY29udHJvbGxlcjoiK2U7aWYodC5j
        YWNoZS5oYXMocikpcmV0dXJuIHQubG9va3VwKHIpO3ZhciBuPXQubG9va3Vw
        RmFjdG9yeShyKTtyZXR1cm4gbiYmImZ1bmN0aW9uIj09dHlwZW9mIG4ucHJv
        dG8/bi5wcm90bygpOnt9fWZ1bmN0aW9uIG4oZSl7dmFyIHQscixuPXt9O2Zv
        cihyIGluIGUpdD1FbWJlci5Sb3V0ZXIuX2Rlc2NvcGVRdWVyeVBhcmFtKGVb
        cl0pLG5bdF09blt0XT9uW3RdKzE6MTtmb3IociBpbiBlKXQ9RW1iZXIuUm91
        dGVyLl9kZXNjb3BlUXVlcnlQYXJhbShlW3JdKSwxPT09blt0XSYmKGVbcl09
        dCl9ZnVuY3Rpb24gaShlLHQscil7Zm9yKHZhciBuPXQuc3RhdGUuaGFuZGxl
        ckluZm9zLGk9ITEsbz1uLmxlbmd0aC0xO28+PTA7LS1vKXt2YXIgYT1uW29d
        LHM9YS5oYW5kbGVyO2lmKGkpe2lmKHIocyxuW28rMV0uaGFuZGxlcikhPT0h
        MClyZXR1cm4hMX1lbHNlIGU9PT1zJiYoaT0hMCl9cmV0dXJuITB9ZnVuY3Rp
        b24gbyhlLHQscil7dmFyIG4saT1lLnJvdXRlcixvPSh0LnJvdXRlTmFtZS5z
        cGxpdCgiLiIpLnBvcCgpLCJhcHBsaWNhdGlvbiI9PT1lLnJvdXRlTmFtZT8i
        IjplLnJvdXRlTmFtZSsiLiIpO3JldHVybiBuPW8rcixhKGksbik/bjp2b2lk
        IDB9ZnVuY3Rpb24gYShlLHQpe3ZhciByPWUuY29udGFpbmVyO3JldHVybiBl
        Lmhhc1JvdXRlKHQpJiYoci5oYXMoInRlbXBsYXRlOiIrdCl8fHIuaGFzKCJy
        b3V0ZToiK3QpKX1mdW5jdGlvbiBzKGUsdCxyKXt2YXIgbj1yLnNoaWZ0KCk7
        aWYoIWUpe2lmKHQpcmV0dXJuO3Rocm93IG5ldyBFbWJlci5FcnJvcigiQ2Fu
        J3QgdHJpZ2dlciBhY3Rpb24gJyIrbisiJyBiZWNhdXNlIHlvdXIgYXBwIGhh
        c24ndCBmaW5pc2hlZCB0cmFuc2l0aW9uaW5nIGludG8gaXRzIGZpcnN0IHJv
        dXRlLiBUbyB0cmlnZ2VyIGFuIGFjdGlvbiBvbiBkZXN0aW5hdGlvbiByb3V0
        ZXMgZHVyaW5nIGEgdHJhbnNpdGlvbiwgeW91IGNhbiBjYWxsIGAuc2VuZCgp
        YCBvbiB0aGUgYFRyYW5zaXRpb25gIG9iamVjdCBwYXNzZWQgdG8gdGhlIGBt
        b2RlbC9iZWZvcmVNb2RlbC9hZnRlck1vZGVsYCBob29rcy4iKX1mb3IodmFy
        IGk9ITEsbz1lLmxlbmd0aC0xO28+PTA7by0tKXt2YXIgYT1lW29dLHM9YS5o
        YW5kbGVyO2lmKHMuX2FjdGlvbnMmJnMuX2FjdGlvbnNbbl0pe2lmKHMuX2Fj
        dGlvbnNbbl0uYXBwbHkocyxyKSE9PSEwKXJldHVybjtpPSEwfX1pZih2W25d
        KXJldHVybiB2W25dLmFwcGx5KG51bGwsciksdm9pZCAwO2lmKCFpJiYhdCl0
        aHJvdyBuZXcgRW1iZXIuRXJyb3IoIk5vdGhpbmcgaGFuZGxlZCB0aGUgYWN0
        aW9uICciK24rIicuIElmIHlvdSBkaWQgaGFuZGxlIHRoZSBhY3Rpb24sIHRo
        aXMgZXJyb3IgY2FuIGJlIGNhdXNlZCBieSByZXR1cm5pbmcgdHJ1ZSBmcm9t
        IGFuIGFjdGlvbiBoYW5kbGVyIGluIGEgY29udHJvbGxlciwgY2F1c2luZyB0
        aGUgYWN0aW9uIHRvIGJ1YmJsZS4iKX1mdW5jdGlvbiB1KGUpe3ZhciB0PWUu
        Y29udGFpbmVyLmxvb2t1cCgiY29udHJvbGxlcjphcHBsaWNhdGlvbiIpO2lm
        KHQpe3ZhciByPWUucm91dGVyLmN1cnJlbnRIYW5kbGVySW5mb3Msbj1FbWJl
        ci5Sb3V0ZXIuX3JvdXRlUGF0aChyKTsiY3VycmVudFBhdGgiaW4gdHx8cCh0
        LCJjdXJyZW50UGF0aCIpLG0odCwiY3VycmVudFBhdGgiLG4pLCJjdXJyZW50
        Um91dGVOYW1lImluIHR8fHAodCwiY3VycmVudFJvdXRlTmFtZSIpLG0odCwi
        Y3VycmVudFJvdXRlTmFtZSIscltyLmxlbmd0aC0xXS5uYW1lKX19dmFyIGw9
        dCgicm91dGVyIiksYz1sLlJvdXRlcixoPShsLlRyYW5zaXRpb24sRW1iZXIu
        Z2V0KSxtPUVtYmVyLnNldCxwPShFbWJlci5TdHJpbmcuZm10LEVtYmVyLmRl
        ZmluZVByb3BlcnR5KSxmPUFycmF5LnByb3RvdHlwZS5zbGljZSxkPUVtYmVy
        LkVudW1lcmFibGVVdGlscy5mb3JFYWNoLGI9RW1iZXIuX01ldGFtb3JwaFZp
        ZXc7RW1iZXIuUm91dGVyPUVtYmVyLk9iamVjdC5leHRlbmQoRW1iZXIuRXZl
        bnRlZCx7bG9jYXRpb246Imhhc2giLGluaXQ6ZnVuY3Rpb24oKXt0aGlzLnJv
        dXRlcj10aGlzLmNvbnN0cnVjdG9yLnJvdXRlcnx8dGhpcy5jb25zdHJ1Y3Rv
        ci5tYXAoRW1iZXIuSyksdGhpcy5fYWN0aXZlVmlld3M9e30sdGhpcy5fc2V0
        dXBMb2NhdGlvbigpLGgodGhpcywibmFtZXNwYWNlLkxPR19UUkFOU0lUSU9O
        U19JTlRFUk5BTCIpJiYodGhpcy5yb3V0ZXIubG9nPUVtYmVyLkxvZ2dlci5k
        ZWJ1Zyl9LHVybDpFbWJlci5jb21wdXRlZChmdW5jdGlvbigpe3JldHVybiBo
        KHRoaXMsImxvY2F0aW9uIikuZ2V0VVJMKCl9KSxzdGFydFJvdXRpbmc6ZnVu
        Y3Rpb24oKXt0aGlzLnJvdXRlcj10aGlzLnJvdXRlcnx8dGhpcy5jb25zdHJ1
        Y3Rvci5tYXAoRW1iZXIuSyk7dmFyIGU9dGhpcy5yb3V0ZXIsdD1oKHRoaXMs
        ImxvY2F0aW9uIikscj10aGlzLmNvbnRhaW5lcixuPXRoaXMsaT1oKHRoaXMs
        ImluaXRpYWxVUkwiKTtoKHQsImNhbmNlbFJvdXRlclNldHVwIil8fCh0aGlz
        Ll9zZXR1cFJvdXRlcihlLHQpLHIucmVnaXN0ZXIoInZpZXc6ZGVmYXVsdCIs
        Yiksci5yZWdpc3Rlcigidmlldzp0b3BsZXZlbCIsRW1iZXIuVmlldy5leHRl
        bmQoKSksdC5vblVwZGF0ZVVSTChmdW5jdGlvbihlKXtuLmhhbmRsZVVSTChl
        KX0pLCJ1bmRlZmluZWQiPT10eXBlb2YgaSYmKGk9dC5nZXRVUkwoKSksdGhp
        cy5oYW5kbGVVUkwoaSkpfSxkaWRUcmFuc2l0aW9uOmZ1bmN0aW9uKGUpe3Uo
        dGhpcyksdGhpcy5fY2FuY2VsTG9hZGluZ0V2ZW50KCksdGhpcy5ub3RpZnlQ
        cm9wZXJ0eUNoYW5nZSgidXJsIiksRW1iZXIucnVuLm9uY2UodGhpcyx0aGlz
        LnRyaWdnZXIsImRpZFRyYW5zaXRpb24iKSxoKHRoaXMsIm5hbWVzcGFjZSIp
        LkxPR19UUkFOU0lUSU9OUyYmRW1iZXIuTG9nZ2VyLmxvZygiVHJhbnNpdGlv
        bmVkIGludG8gJyIrRW1iZXIuUm91dGVyLl9yb3V0ZVBhdGgoZSkrIiciKX0s
        aGFuZGxlVVJMOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9kb1RyYW5zaXRp
        b24oImhhbmRsZVVSTCIsW2VdKX0sdHJhbnNpdGlvblRvOmZ1bmN0aW9uKCl7
        cmV0dXJuIHRoaXMuX2RvVHJhbnNpdGlvbigidHJhbnNpdGlvblRvIixhcmd1
        bWVudHMpfSxpbnRlcm1lZGlhdGVUcmFuc2l0aW9uVG86ZnVuY3Rpb24oKXt0
        aGlzLnJvdXRlci5pbnRlcm1lZGlhdGVUcmFuc2l0aW9uVG8uYXBwbHkodGhp
        cy5yb3V0ZXIsYXJndW1lbnRzKSx1KHRoaXMpO3ZhciBlPXRoaXMucm91dGVy
        LmN1cnJlbnRIYW5kbGVySW5mb3M7aCh0aGlzLCJuYW1lc3BhY2UiKS5MT0df
        VFJBTlNJVElPTlMmJkVtYmVyLkxvZ2dlci5sb2coIkludGVybWVkaWF0ZS10
        cmFuc2l0aW9uZWQgaW50byAnIitFbWJlci5Sb3V0ZXIuX3JvdXRlUGF0aChl
        KSsiJyIpfSxyZXBsYWNlV2l0aDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9k
        b1RyYW5zaXRpb24oInJlcGxhY2VXaXRoIixhcmd1bWVudHMpfSxnZW5lcmF0
        ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMucm91dGVyLmdlbmVyYXRlLmFwcGx5
        KHRoaXMucm91dGVyLGFyZ3VtZW50cyk7cmV0dXJuIHRoaXMubG9jYXRpb24u
        Zm9ybWF0VVJMKGUpfSxpc0FjdGl2ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMu
        cm91dGVyO3JldHVybiBlLmlzQWN0aXZlLmFwcGx5KGUsYXJndW1lbnRzKX0s
        c2VuZDpmdW5jdGlvbigpe3RoaXMucm91dGVyLnRyaWdnZXIuYXBwbHkodGhp
        cy5yb3V0ZXIsYXJndW1lbnRzKX0saGFzUm91dGU6ZnVuY3Rpb24oZSl7cmV0
        dXJuIHRoaXMucm91dGVyLmhhc1JvdXRlKGUpfSxyZXNldDpmdW5jdGlvbigp
        e3RoaXMucm91dGVyLnJlc2V0KCl9LF9sb29rdXBBY3RpdmVWaWV3OmZ1bmN0
        aW9uKGUpe3ZhciB0PXRoaXMuX2FjdGl2ZVZpZXdzW2VdO3JldHVybiB0JiZ0
        WzBdfSxfY29ubmVjdEFjdGl2ZVZpZXc6ZnVuY3Rpb24oZSx0KXt2YXIgcj10
        aGlzLl9hY3RpdmVWaWV3c1tlXTtyJiZyWzBdLm9mZigid2lsbERlc3Ryb3lF
        bGVtZW50Iix0aGlzLHJbMV0pO3ZhciBuPWZ1bmN0aW9uKCl7ZGVsZXRlIHRo
        aXMuX2FjdGl2ZVZpZXdzW2VdfTt0aGlzLl9hY3RpdmVWaWV3c1tlXT1bdCxu
        XSx0Lm9uZSgid2lsbERlc3Ryb3lFbGVtZW50Iix0aGlzLG4pfSxfc2V0dXBM
        b2NhdGlvbjpmdW5jdGlvbigpe3ZhciBlPWgodGhpcywibG9jYXRpb24iKSx0
        PWgodGhpcywicm9vdFVSTCIpO2lmKCJzdHJpbmciPT10eXBlb2YgZSYmdGhp
        cy5jb250YWluZXIpe3ZhciByPXRoaXMuY29udGFpbmVyLmxvb2t1cCgibG9j
        YXRpb246IitlKTtpZigidW5kZWZpbmVkIiE9dHlwZW9mIHIpZT1tKHRoaXMs
        ImxvY2F0aW9uIixyKTtlbHNle3ZhciBuPXtpbXBsZW1lbnRhdGlvbjplfTtl
        PW0odGhpcywibG9jYXRpb24iLEVtYmVyLkxvY2F0aW9uLmNyZWF0ZShuKSl9
        fSJzdHJpbmciPT10eXBlb2YgdCYmKGUucm9vdFVSTD10KSwiZnVuY3Rpb24i
        PT10eXBlb2YgZS5pbml0U3RhdGUmJmUuaW5pdFN0YXRlKCl9LF9nZXRIYW5k
        bGVyRnVuY3Rpb246ZnVuY3Rpb24oKXt2YXIgZT17fSx0PXRoaXMuY29udGFp
        bmVyLHI9dC5sb29rdXBGYWN0b3J5KCJyb3V0ZTpiYXNpYyIpLG49dGhpczty
        ZXR1cm4gZnVuY3Rpb24oaSl7dmFyIG89InJvdXRlOiIraSxhPXQubG9va3Vw
        KG8pO3JldHVybiBlW2ldP2E6KGVbaV09ITAsYXx8KHQucmVnaXN0ZXIobyxy
        LmV4dGVuZCgpKSxhPXQubG9va3VwKG8pLGgobiwibmFtZXNwYWNlLkxPR19B
        Q1RJVkVfR0VORVJBVElPTiIpKSxhLnJvdXRlTmFtZT1pLGEpfX0sX3NldHVw
        Um91dGVyOmZ1bmN0aW9uKGUsdCl7dmFyIHIsbj10aGlzO2UuZ2V0SGFuZGxl
        cj10aGlzLl9nZXRIYW5kbGVyRnVuY3Rpb24oKTt2YXIgaT1mdW5jdGlvbigp
        e3Quc2V0VVJMKHIpfTtpZihlLnVwZGF0ZVVSTD1mdW5jdGlvbihlKXtyPWUs
        RW1iZXIucnVuLm9uY2UoaSl9LHQucmVwbGFjZVVSTCl7dmFyIG89ZnVuY3Rp
        b24oKXt0LnJlcGxhY2VVUkwocil9O2UucmVwbGFjZVVSTD1mdW5jdGlvbihl
        KXtyPWUsRW1iZXIucnVuLm9uY2Uobyl9fWUuZGlkVHJhbnNpdGlvbj1mdW5j
        dGlvbihlKXtuLmRpZFRyYW5zaXRpb24oZSl9fSxfZG9UcmFuc2l0aW9uOmZ1
        bmN0aW9uKGUsdCl7dD1mLmNhbGwodCksdFswXT10WzBdfHwiLyI7dmFyIHIs
        bj10WzBdLGk9ITE7aWYoIWkmJiIvIiE9PW4uY2hhckF0KDApLHIpe2lmKCFu
        KXt2YXIgbz10aGlzLnJvdXRlci5hY3RpdmVUcmFuc2l0aW9uP3RoaXMucm91
        dGVyLmFjdGl2ZVRyYW5zaXRpb24uc3RhdGUuaGFuZGxlckluZm9zOnRoaXMu
        cm91dGVyLnN0YXRlLmhhbmRsZXJJbmZvcztuPW9bby5sZW5ndGgtMV0ubmFt
        ZSx0LnVuc2hpZnQobil9dmFyIGE9dGhpcy5fcXVlcnlQYXJhbU5hbWVzRm9y
        KG4pO0VtYmVyLlJvdXRlci5fdHJhbnNsYXRlUXVlcnlQYXJhbXMocixhLnRy
        YW5zbGF0aW9ucyxuKTt2YXIgcztmb3IodmFyIHUgaW4gcil7dmFyIGw9RW1i
        ZXIuUm91dGVyLl9kZXNjb3BlUXVlcnlQYXJhbSh1KTt1IGluIGEucXVlcnlQ
        YXJhbXM/KHM9clt1XSxkZWxldGUgclt1XSxyW2EucXVlcnlQYXJhbXNbdV1d
        PXMpOmwgaW4gYS52YWxpZFF1ZXJ5UGFyYW1zJiYocz1yW3VdLGRlbGV0ZSBy
        W3VdLHJbbF09cyl9fXZhciBjPXRoaXMucm91dGVyW2VdLmFwcGx5KHRoaXMu
        cm91dGVyLHQpO3JldHVybiBjLnRoZW4obnVsbCxmdW5jdGlvbihlKXtlJiYi
        VW5yZWNvZ25pemVkVVJMRXJyb3IiPT09ZS5uYW1lfSwiRW1iZXI6IENoZWNr
        IGZvciBSb3V0ZXIgdW5yZWNvZ25pemVkIFVSTCBlcnJvciIpLGN9LF9zY2hl
        ZHVsZUxvYWRpbmdFdmVudDpmdW5jdGlvbihlLHQpe3RoaXMuX2NhbmNlbExv
        YWRpbmdFdmVudCgpLHRoaXMuX2xvYWRpbmdTdGF0ZVRpbWVyPUVtYmVyLnJ1
        bi5zY2hlZHVsZU9uY2UoInJvdXRlclRyYW5zaXRpb25zIix0aGlzLCJfZmly
        ZUxvYWRpbmdFdmVudCIsZSx0KX0sX2ZpcmVMb2FkaW5nRXZlbnQ6ZnVuY3Rp
        b24oZSx0KXt0aGlzLnJvdXRlci5hY3RpdmVUcmFuc2l0aW9uJiZlLnRyaWdn
        ZXIoITAsImxvYWRpbmciLGUsdCl9LF9jYW5jZWxMb2FkaW5nRXZlbnQ6ZnVu
        Y3Rpb24oKXt0aGlzLl9sb2FkaW5nU3RhdGVUaW1lciYmRW1iZXIucnVuLmNh
        bmNlbCh0aGlzLl9sb2FkaW5nU3RhdGVUaW1lciksdGhpcy5fbG9hZGluZ1N0
        YXRlVGltZXI9bnVsbH0sX3F1ZXJ5UGFyYW1OYW1lc0ZvcjpmdW5jdGlvbih0
        KXt2YXIgcj10aGlzLnJvdXRlci5yZWNvZ25pemVyLmhhbmRsZXJzRm9yKHQp
        LGk9e3F1ZXJ5UGFyYW1zOkVtYmVyLmNyZWF0ZShudWxsKSx0cmFuc2xhdGlv
        bnM6RW1iZXIuY3JlYXRlKG51bGwpLHZhbGlkUXVlcnlQYXJhbXM6RW1iZXIu
        Y3JlYXRlKG51bGwpfSxvPXRoaXMucm91dGVyO2QocixmdW5jdGlvbih0KXt2
        YXIgcj1vLmdldEhhbmRsZXIodC5oYW5kbGVyKTtlKHIsaSl9KSxuKGkucXVl
        cnlQYXJhbXMpO2Zvcih2YXIgYSBpbiBpLnF1ZXJ5UGFyYW1zKWkudmFsaWRR
        dWVyeVBhcmFtc1tpLnF1ZXJ5UGFyYW1zW2FdXT0hMDtyZXR1cm4gaX0sX3F1
        ZXJ5UGFyYW1OYW1lc0ZvclNpbmdsZTpmdW5jdGlvbih0KXt2YXIgcj17cXVl
        cnlQYXJhbXM6RW1iZXIuY3JlYXRlKG51bGwpLHRyYW5zbGF0aW9uczpFbWJl
        ci5jcmVhdGUobnVsbCl9LG49dGhpcy5yb3V0ZXIuZ2V0SGFuZGxlcih0KTtp
        ZihlKG4sciksImFwcGxpY2F0aW9uIiE9PXQpe3ZhciBpPXRoaXMuX3F1ZXJ5
        UGFyYW1OYW1lc0Zvcih0KTtmb3IodmFyIG8gaW4gci5xdWVyeVBhcmFtcyly
        LnF1ZXJ5UGFyYW1zW29dPWkucXVlcnlQYXJhbXNbb119cmV0dXJuIHJ9LF9x
        dWVyeVBhcmFtT3ZlcnJpZGVzOmZ1bmN0aW9uKGUsdCxuKXtmb3IodmFyIGkg
        aW4gdCl7dmFyIG89aS5zcGxpdCgiOiIpLGE9cihvWzBdLHRoaXMuY29udGFp
        bmVyKTtlW3RbaV1dPWgoYSxvWzFdKSxuJiZuKGksdFtpXSxpKX19fSk7dmFy
        IHY9e3dpbGxSZXNvbHZlTW9kZWw6ZnVuY3Rpb24oZSx0KXt0LnJvdXRlci5f
        c2NoZWR1bGVMb2FkaW5nRXZlbnQoZSx0KX0sZXJyb3I6ZnVuY3Rpb24oZSx0
        LHIpe3ZhciBuPXIucm91dGVyLHM9aShyLHQsZnVuY3Rpb24odCxyKXt2YXIg
        aT1vKHQsciwiZXJyb3IiKTtyZXR1cm4gaT8obi5pbnRlcm1lZGlhdGVUcmFu
        c2l0aW9uVG8oaSxlKSx2b2lkIDApOiEwfSk7cmV0dXJuIHM/YShyLnJvdXRl
        ciwiYXBwbGljYXRpb25fZXJyb3IiKT8obi5pbnRlcm1lZGlhdGVUcmFuc2l0
        aW9uVG8oImFwcGxpY2F0aW9uX2Vycm9yIixlKSx2b2lkIDApOihFbWJlci5M
        b2dnZXIuZXJyb3IoIkVycm9yIHdoaWxlIGxvYWRpbmcgcm91dGU6ICIrKGUm
        JmUuc3RhY2spKSx2b2lkIDApOnZvaWQgMH0sbG9hZGluZzpmdW5jdGlvbihl
        LHQpe3ZhciByPXQucm91dGVyLG49aSh0LGUsZnVuY3Rpb24odCxuKXt2YXIg
        aT1vKHQsbiwibG9hZGluZyIpO3JldHVybiBpPyhyLmludGVybWVkaWF0ZVRy
        YW5zaXRpb25UbyhpKSx2b2lkIDApOmUucGl2b3RIYW5kbGVyIT09dD8hMDp2
        b2lkIDB9KTtyZXR1cm4gbiYmYSh0LnJvdXRlciwiYXBwbGljYXRpb25fbG9h
        ZGluZyIpPyhyLmludGVybWVkaWF0ZVRyYW5zaXRpb25UbygiYXBwbGljYXRp
        b25fbG9hZGluZyIpLHZvaWQgMCk6dm9pZCAwfX07RW1iZXIuUm91dGVyLnJl
        b3BlbkNsYXNzKHtyb3V0ZXI6bnVsbCxtYXA6ZnVuY3Rpb24oZSl7dmFyIHQ9
        dGhpcy5yb3V0ZXI7dHx8KHQ9bmV3IGMsdC5jYWxsYmFja3M9W10sdC50cmln
        Z2VyRXZlbnQ9cyx0aGlzLnJlb3BlbkNsYXNzKHtyb3V0ZXI6dH0pKTt2YXIg
        cj1FbWJlci5Sb3V0ZXJEU0wubWFwKGZ1bmN0aW9uKCl7dGhpcy5yZXNvdXJj
        ZSgiYXBwbGljYXRpb24iLHtwYXRoOiIvIn0sZnVuY3Rpb24oKXtmb3IodmFy
        IHI9MDtyPHQuY2FsbGJhY2tzLmxlbmd0aDtyKyspdC5jYWxsYmFja3Nbcl0u
        Y2FsbCh0aGlzKTtlLmNhbGwodGhpcyl9KX0pO3JldHVybiB0LmNhbGxiYWNr
        cy5wdXNoKGUpLHQubWFwKHIuZ2VuZXJhdGUoKSksdH0sX3JvdXRlUGF0aDpm
        dW5jdGlvbihlKXtmdW5jdGlvbiB0KGUsdCl7Zm9yKHZhciByPTAsbj1lLmxl
        bmd0aDtuPnI7KytyKWlmKGVbcl0hPT10W3JdKXJldHVybiExO3JldHVybiEw
        fWZvcih2YXIgcj1bXSxuPTEsaT1lLmxlbmd0aDtpPm47bisrKXtmb3IodmFy
        IG89ZVtuXS5uYW1lLGE9by5zcGxpdCgiLiIpLHM9Zi5jYWxsKHIpO3MubGVu
        Z3RoJiYhdChzLGEpOylzLnNoaWZ0KCk7ci5wdXNoLmFwcGx5KHIsYS5zbGlj
        ZShzLmxlbmd0aCkpfXJldHVybiByLmpvaW4oIi4iKX0sX3RyYW5zbGF0ZVF1
        ZXJ5UGFyYW1zOmZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByIGluIGUpZS5oYXNP
        d25Qcm9wZXJ0eShyKSYmciBpbiB0JiYoZVt0W3JdXT1lW3JdLGRlbGV0ZSBl
        W3JdKX0sX2Rlc2NvcGVRdWVyeVBhcmFtOmZ1bmN0aW9uKGUpe3ZhciB0PS9c
        WyguKylcXS8scj1lLm1hdGNoKHQpO3JldHVybiByPXI/clsxXTplfX0pfSgp
        LGZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXt2YXIgdD1lLnJvdXRlci5yb3V0
        ZXIuc3RhdGUuaGFuZGxlckluZm9zO2lmKHQpZm9yKHZhciByLG4saT0wLG89
        dC5sZW5ndGg7bz5pO2krKyl7aWYobj10W2ldLmhhbmRsZXIsbj09PWUpcmV0
        dXJuIHI7cj1ufX1mdW5jdGlvbiB0KHIpe3ZhciBuLGk9ZShyKTtpZihpKXJl
        dHVybihuPWkubGFzdFJlbmRlcmVkVGVtcGxhdGUpP246dChpKX1mdW5jdGlv
        biByKGUscixuLGkpe2k9aXx8e30saS5pbnRvPWkuaW50bz9pLmludG8ucmVw
        bGFjZSgvXC8vZywiLiIpOnQoZSksaS5vdXRsZXQ9aS5vdXRsZXR8fCJtYWlu
        IixpLm5hbWU9cixpLnRlbXBsYXRlPW4saS5MT0dfVklFV19MT09LVVBTPXMo
        ZS5yb3V0ZXIsIm5hbWVzcGFjZS5MT0dfVklFV19MT09LVVBTIik7dmFyIG8s
        YT1pLmNvbnRyb2xsZXI7aWYoYT1pLmNvbnRyb2xsZXI/aS5jb250cm9sbGVy
        OihvPWUuY29udGFpbmVyLmxvb2t1cCgiY29udHJvbGxlcjoiK3IpKT9vOmUu
        Y29udHJvbGxlck5hbWV8fGUucm91dGVOYW1lLCJzdHJpbmciPT10eXBlb2Yg
        YSl7dmFyIHU9YTtpZihhPWUuY29udGFpbmVyLmxvb2t1cCgiY29udHJvbGxl
        cjoiK3UpLCFhKXRocm93IG5ldyBFbWJlci5FcnJvcigiWW91IHBhc3NlZCBg
        Y29udHJvbGxlcjogJyIrdSsiJ2AgaW50byB0aGUgYHJlbmRlcmAgbWV0aG9k
        LCBidXQgbm8gc3VjaCBjb250cm9sbGVyIGNvdWxkIGJlIGZvdW5kLiIpfXJl
        dHVybiBpLmNvbnRyb2xsZXI9YSxpfWZ1bmN0aW9uIG4oZSx0LHIpe2lmKGUp
        ci5MT0dfVklFV19MT09LVVBTO2Vsc2V7dmFyIG49ci5pbnRvPyJ2aWV3OmRl
        ZmF1bHQiOiJ2aWV3OnRvcGxldmVsIjtlPXQubG9va3VwKG4pLHIuTE9HX1ZJ
        RVdfTE9PS1VQU31yZXR1cm4gcyhlLCJ0ZW1wbGF0ZU5hbWUiKXx8KHUoZSwi
        dGVtcGxhdGUiLHIudGVtcGxhdGUpLHUoZSwiX2RlYnVnVGVtcGxhdGVOYW1l
        IixyLm5hbWUpKSx1KGUsInJlbmRlcmVkTmFtZSIsci5uYW1lKSx1KGUsImNv
        bnRyb2xsZXIiLHIuY29udHJvbGxlciksZX1mdW5jdGlvbiBpKGUsdCxyKXtp
        ZihyLmludG8pe3ZhciBuPWUucm91dGVyLl9sb29rdXBBY3RpdmVWaWV3KHIu
        aW50byksaT1hKG4sci5vdXRsZXQpO2UudGVhcmRvd25PdXRsZXRWaWV3c3x8
        KGUudGVhcmRvd25PdXRsZXRWaWV3cz1bXSksaChlLnRlYXJkb3duT3V0bGV0
        Vmlld3MsMCwwLFtpXSksbi5jb25uZWN0T3V0bGV0KHIub3V0bGV0LHQpfWVs
        c2V7dmFyIHU9cyhlLCJyb3V0ZXIubmFtZXNwYWNlLnJvb3RFbGVtZW50Iik7
        ZS50ZWFyZG93blRvcExldmVsVmlldyYmZS50ZWFyZG93blRvcExldmVsVmll
        dygpLGUucm91dGVyLl9jb25uZWN0QWN0aXZlVmlldyhyLm5hbWUsdCksZS50
        ZWFyZG93blRvcExldmVsVmlldz1vKHQpLHQuYXBwZW5kVG8odSl9fWZ1bmN0
        aW9uIG8oZSl7cmV0dXJuIGZ1bmN0aW9uKCl7ZS5kZXN0cm95KCl9fWZ1bmN0
        aW9uIGEoZSx0KXtyZXR1cm4gZnVuY3Rpb24oKXtlLmRpc2Nvbm5lY3RPdXRs
        ZXQodCl9fXZhciBzPUVtYmVyLmdldCx1PUVtYmVyLnNldCxsPUVtYmVyLmdl
        dFByb3BlcnRpZXMsYz0oRW1iZXIuU3RyaW5nLmNsYXNzaWZ5LEVtYmVyLlN0
        cmluZy5mbXQsRW1iZXIuRW51bWVyYWJsZVV0aWxzLmZvckVhY2gpLGg9RW1i
        ZXIuRW51bWVyYWJsZVV0aWxzLnJlcGxhY2U7RW1iZXIuUm91dGU9RW1iZXIu
        T2JqZWN0LmV4dGVuZChFbWJlci5BY3Rpb25IYW5kbGVyLHtleGl0OmZ1bmN0
        aW9uKCl7dGhpcy5kZWFjdGl2YXRlKCksdGhpcy50ZWFyZG93blZpZXdzKCl9
        LGVudGVyOmZ1bmN0aW9uKCl7dGhpcy5hY3RpdmF0ZSgpfSx2aWV3TmFtZTpu
        dWxsLHRlbXBsYXRlTmFtZTpudWxsLGNvbnRyb2xsZXJOYW1lOm51bGwsX2Fj
        dGlvbnM6e2ZpbmFsaXplUXVlcnlQYXJhbUNoYW5nZTpmdW5jdGlvbigpe319
        LGV2ZW50czpudWxsLG1lcmdlZFByb3BlcnRpZXM6WyJldmVudHMiXSxkZWFj
        dGl2YXRlOkVtYmVyLkssYWN0aXZhdGU6RW1iZXIuSyx0cmFuc2l0aW9uVG86
        ZnVuY3Rpb24oKXt2YXIgZT10aGlzLnJvdXRlcjtyZXR1cm4gZS50cmFuc2l0
        aW9uVG8uYXBwbHkoZSxhcmd1bWVudHMpfSxpbnRlcm1lZGlhdGVUcmFuc2l0
        aW9uVG86ZnVuY3Rpb24oKXt2YXIgZT10aGlzLnJvdXRlcjtlLmludGVybWVk
        aWF0ZVRyYW5zaXRpb25Uby5hcHBseShlLGFyZ3VtZW50cyl9LHJlZnJlc2g6
        ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yb3V0ZXIucm91dGVyLnJlZnJlc2go
        dGhpcykubWV0aG9kKCJyZXBsYWNlIil9LHJlcGxhY2VXaXRoOmZ1bmN0aW9u
        KCl7dmFyIGU9dGhpcy5yb3V0ZXI7cmV0dXJuIGUucmVwbGFjZVdpdGguYXBw
        bHkoZSxhcmd1bWVudHMpfSxzZW5kOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMu
        cm91dGVyLnNlbmQuYXBwbHkodGhpcy5yb3V0ZXIsYXJndW1lbnRzKX0sc2V0
        dXA6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5jb250cm9sbGVyTmFtZXx8dGhp
        cy5yb3V0ZU5hbWUscj10aGlzLmNvbnRyb2xsZXJGb3IodCwhMCk7cnx8KHI9
        dGhpcy5nZW5lcmF0ZUNvbnRyb2xsZXIodCxlKSksdGhpcy5jb250cm9sbGVy
        PXIsdGhpcy5zZXR1cENvbnRyb2xsZXJzP3RoaXMuc2V0dXBDb250cm9sbGVy
        cyhyLGUpOnRoaXMuc2V0dXBDb250cm9sbGVyKHIsZSksdGhpcy5yZW5kZXJU
        ZW1wbGF0ZXM/dGhpcy5yZW5kZXJUZW1wbGF0ZXMoZSk6dGhpcy5yZW5kZXJU
        ZW1wbGF0ZShyLGUpfSxiZWZvcmVNb2RlbDpFbWJlci5LLGFmdGVyTW9kZWw6
        RW1iZXIuSyxyZWRpcmVjdDpFbWJlci5LLGNvbnRleHREaWRDaGFuZ2U6ZnVu
        Y3Rpb24oKXt0aGlzLmN1cnJlbnRNb2RlbD10aGlzLmNvbnRleHR9LG1vZGVs
        OmZ1bmN0aW9uKGUsdCl7dmFyIHIsbixpLG87Zm9yKHZhciBhIGluIGUpInF1
        ZXJ5UGFyYW1zIiE9PWEmJigocj1hLm1hdGNoKC9eKC4qKV9pZCQvKSkmJihu
        PXJbMV0sbz1lW2FdKSxpPSEwKTtpZighbiYmaSlyZXR1cm4gRW1iZXIuY29w
        eShlKTtpZighbil7aWYodC5yZXNvbHZlSW5kZXghPT10LnN0YXRlLmhhbmRs
        ZXJJbmZvcy5sZW5ndGgtMSlyZXR1cm47dmFyIHM9dC5zdGF0ZS5oYW5kbGVy
        SW5mb3NbdC5yZXNvbHZlSW5kZXgtMV0uY29udGV4dDtyZXR1cm4gc31yZXR1
        cm4gdGhpcy5maW5kTW9kZWwobixvKX0sZGVzZXJpYWxpemU6ZnVuY3Rpb24o
        ZSx0KXtyZXR1cm4gdGhpcy5tb2RlbChlLHQpfSxmaW5kTW9kZWw6ZnVuY3Rp
        b24oKXt2YXIgZT1zKHRoaXMsInN0b3JlIik7cmV0dXJuIGUuZmluZC5hcHBs
        eShlLGFyZ3VtZW50cyl9LHN0b3JlOkVtYmVyLmNvbXB1dGVkKGZ1bmN0aW9u
        KCl7e3ZhciBlPXRoaXMuY29udGFpbmVyO3RoaXMucm91dGVOYW1lLHModGhp
        cywicm91dGVyLm5hbWVzcGFjZSIpfXJldHVybntmaW5kOmZ1bmN0aW9uKHQs
        cil7dmFyIG49ZS5sb29rdXBGYWN0b3J5KCJtb2RlbDoiK3QpO2lmKG4pcmV0
        dXJuIG4uZmluZChyKX19fSksc2VyaWFsaXplOmZ1bmN0aW9uKGUsdCl7aWYo
        ISh0Lmxlbmd0aDwxKSYmZSl7dmFyIHI9dFswXSxuPXt9O3JldHVybi9faWQk
        Ly50ZXN0KHIpJiYxPT09dC5sZW5ndGg/bltyXT1zKGUsImlkIik6bj1sKGUs
        dCksbn19LHNldHVwQ29udHJvbGxlcjpmdW5jdGlvbihlLHQpe2UmJnZvaWQg
        MCE9PXQmJnUoZSwibW9kZWwiLHQpfSxjb250cm9sbGVyRm9yOmZ1bmN0aW9u
        KGUpe3ZhciB0LHI9dGhpcy5jb250YWluZXIsbj1yLmxvb2t1cCgicm91dGU6
        IitlKTtyZXR1cm4gbiYmbi5jb250cm9sbGVyTmFtZSYmKGU9bi5jb250cm9s
        bGVyTmFtZSksdD1yLmxvb2t1cCgiY29udHJvbGxlcjoiK2UpfSxnZW5lcmF0
        ZUNvbnRyb2xsZXI6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLmNvbnRhaW5l
        cjtyZXR1cm4gdD10fHx0aGlzLm1vZGVsRm9yKGUpLEVtYmVyLmdlbmVyYXRl
        Q29udHJvbGxlcihyLGUsdCl9LG1vZGVsRm9yOmZ1bmN0aW9uKGUpe3ZhciB0
        PXRoaXMuY29udGFpbmVyLmxvb2t1cCgicm91dGU6IitlKSxyPXRoaXMucm91
        dGVyLnJvdXRlci5hY3RpdmVUcmFuc2l0aW9uO2lmKHIpe3ZhciBuPXQmJnQu
        cm91dGVOYW1lfHxlO2lmKHIucmVzb2x2ZWRNb2RlbHMuaGFzT3duUHJvcGVy
        dHkobikpcmV0dXJuIHIucmVzb2x2ZWRNb2RlbHNbbl19cmV0dXJuIHQmJnQu
        Y3VycmVudE1vZGVsfSxyZW5kZXJUZW1wbGF0ZTpmdW5jdGlvbigpe3RoaXMu
        cmVuZGVyKCl9LHJlbmRlcjpmdW5jdGlvbihlLHQpeyJvYmplY3QiIT10eXBl
        b2YgZXx8dHx8KHQ9ZSxlPXRoaXMucm91dGVOYW1lKSx0PXR8fHt9O3ZhciBv
        O2U/KGU9ZS5yZXBsYWNlKC9cLy9nLCIuIiksbz1lKTooZT10aGlzLnJvdXRl
        TmFtZSxvPXRoaXMudGVtcGxhdGVOYW1lfHxlKTt2YXIgYT10LnZpZXd8fHRo
        aXMudmlld05hbWV8fGUsdT10aGlzLmNvbnRhaW5lcixsPXUubG9va3VwKCJ2
        aWV3OiIrYSksYz1sP2wuZ2V0KCJ0ZW1wbGF0ZSIpOm51bGw7cmV0dXJuIGN8
        fChjPXUubG9va3VwKCJ0ZW1wbGF0ZToiK28pKSxsfHxjPyh0PXIodGhpcyxl
        LGMsdCksbD1uKGwsdSx0KSwibWFpbiI9PT10Lm91dGxldCYmKHRoaXMubGFz
        dFJlbmRlcmVkVGVtcGxhdGU9ZSksaSh0aGlzLGwsdCksdm9pZCAwKToocyh0
        aGlzLnJvdXRlciwibmFtZXNwYWNlLkxPR19WSUVXX0xPT0tVUFMiKSx2b2lk
        IDApfSxkaXNjb25uZWN0T3V0bGV0OmZ1bmN0aW9uKGUpe2lmKCFlfHwic3Ry
        aW5nIj09dHlwZW9mIGUpe3ZhciByPWU7ZT17fSxlLm91dGxldD1yfWUucGFy
        ZW50Vmlldz1lLnBhcmVudFZpZXc/ZS5wYXJlbnRWaWV3LnJlcGxhY2UoL1wv
        L2csIi4iKTp0KHRoaXMpLGUub3V0bGV0PWUub3V0bGV0fHwibWFpbiI7dmFy
        IG49dGhpcy5yb3V0ZXIuX2xvb2t1cEFjdGl2ZVZpZXcoZS5wYXJlbnRWaWV3
        KTtuJiZuLmRpc2Nvbm5lY3RPdXRsZXQoZS5vdXRsZXQpfSx3aWxsRGVzdHJv
        eTpmdW5jdGlvbigpe3RoaXMudGVhcmRvd25WaWV3cygpfSx0ZWFyZG93blZp
        ZXdzOmZ1bmN0aW9uKCl7dGhpcy50ZWFyZG93blRvcExldmVsVmlldyYmdGhp
        cy50ZWFyZG93blRvcExldmVsVmlldygpO3ZhciBlPXRoaXMudGVhcmRvd25P
        dXRsZXRWaWV3c3x8W107YyhlLGZ1bmN0aW9uKGUpe2UoKX0pLGRlbGV0ZSB0
        aGlzLnRlYXJkb3duVG9wTGV2ZWxWaWV3LGRlbGV0ZSB0aGlzLnRlYXJkb3du
        T3V0bGV0Vmlld3MsZGVsZXRlIHRoaXMubGFzdFJlbmRlcmVkVGVtcGxhdGV9
        fSl9KCksZnVuY3Rpb24oKXtFbWJlci5vbkxvYWQoIkVtYmVyLkhhbmRsZWJh
        cnMiLGZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHIsaSl7cmV0dXJuIG4uY2Fs
        bCh0KGUscixpKSxmdW5jdGlvbih0LG4pe3JldHVybiBudWxsPT09dD9yW25d
        Om8oZSx0LGkpfSl9ZnVuY3Rpb24gdChlLHQsbyl7ZnVuY3Rpb24gYShlLHQp
        e3JldHVybiJjb250cm9sbGVyIj09PXQ/dDpFbWJlci5Db250cm9sbGVyTWl4
        aW4uZGV0ZWN0KGUpP2EoaShlLCJtb2RlbCIpLHQ/dCsiLm1vZGVsIjoibW9k
        ZWwiKTp0fXZhciBzPXIoZSx0LG8pLHU9by50eXBlcztyZXR1cm4gbi5jYWxs
        KHMsZnVuY3Rpb24oZSxyKXtyZXR1cm4iSUQiPT09dVtyXT9hKGUsdFtyXSk6
        bnVsbH0pfXZhciByPUVtYmVyLkhhbmRsZWJhcnMucmVzb2x2ZVBhcmFtcyxu
        PUVtYmVyLkFycmF5UG9seWZpbGxzLm1hcCxpPUVtYmVyLmdldCxvPUVtYmVy
        LkhhbmRsZWJhcnMuZ2V0O0VtYmVyLlJvdXRlci5yZXNvbHZlUGFyYW1zPWUs
        RW1iZXIuUm91dGVyLnJlc29sdmVQYXRocz10fSl9KCksZnVuY3Rpb24oKXt2
        YXIgZT1FbWJlci5nZXQsdD0oRW1iZXIuc2V0LEVtYmVyLlN0cmluZy5mbXQs
        QXJyYXkucHJvdG90eXBlLnNsaWNlKTtFbWJlci5vbkxvYWQoIkVtYmVyLkhh
        bmRsZWJhcnMiLGZ1bmN0aW9uKCl7ZnVuY3Rpb24gcihlKXt2YXIgdD1lLm9w
        dGlvbnMudHlwZXMscj1lLm9wdGlvbnMuZGF0YTtyZXR1cm4gYShlLmNvbnRl
        eHQsZS5wYXJhbXMse3R5cGVzOnQsZGF0YTpyfSl9dmFyIG49RW1iZXIuT2Jq
        ZWN0LmV4dGVuZCh7dmFsdWVzOm51bGx9KSxpPUVtYmVyLlJvdXRlci5yZXNv
        bHZlUGFyYW1zLG89RW1iZXIuUm91dGVyLl90cmFuc2xhdGVRdWVyeVBhcmFt
        cyxhPUVtYmVyLlJvdXRlci5yZXNvbHZlUGF0aHMscz1FbWJlci5WaWV3VXRp
        bHMuaXNTaW1wbGVDbGljayx1PUVtYmVyLkxpbmtWaWV3PUVtYmVyLlZpZXcu
        ZXh0ZW5kKHt0YWdOYW1lOiJhIixjdXJyZW50V2hlbjpudWxsLHRpdGxlOm51
        bGwscmVsOm51bGwsYWN0aXZlQ2xhc3M6ImFjdGl2ZSIsbG9hZGluZ0NsYXNz
        OiJsb2FkaW5nIixkaXNhYmxlZENsYXNzOiJkaXNhYmxlZCIsX2lzRGlzYWJs
        ZWQ6ITEscmVwbGFjZTohMSxhdHRyaWJ1dGVCaW5kaW5nczpbImhyZWYiLCJ0
        aXRsZSIsInJlbCJdLGNsYXNzTmFtZUJpbmRpbmdzOlsiYWN0aXZlIiwibG9h
        ZGluZyIsImRpc2FibGVkIl0sZXZlbnROYW1lOiJjbGljayIsaW5pdDpmdW5j
        dGlvbigpe3RoaXMuX3N1cGVyLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt2YXIg
        dD1lKHRoaXMsImV2ZW50TmFtZSIpO3RoaXMub24odCx0aGlzLHRoaXMuX2lu
        dm9rZSl9LF9wYXJhbXNDaGFuZ2VkOmZ1bmN0aW9uKCl7dGhpcy5ub3RpZnlQ
        cm9wZXJ0eUNoYW5nZSgicmVzb2x2ZWRQYXJhbXMiKX0sX3NldHVwUGF0aE9i
        c2VydmVyczpmdW5jdGlvbigpe3ZhciBlLHQsbixpPXRoaXMucGFyYW1ldGVy
        cyxvPWkub3B0aW9ucy5saW5rVGV4dFBhdGgsYT1yKGkpLHM9YS5sZW5ndGg7
        Zm9yKG8mJihuPUVtYmVyLkhhbmRsZWJhcnMubm9ybWFsaXplUGF0aChpLmNv
        bnRleHQsbyxpLm9wdGlvbnMuZGF0YSksdGhpcy5yZWdpc3Rlck9ic2VydmVy
        KG4ucm9vdCxuLnBhdGgsdGhpcyx0aGlzLnJlcmVuZGVyKSksdD0wO3M+dDt0
        KyspZT1hW3RdLG51bGwhPT1lJiYobj1FbWJlci5IYW5kbGViYXJzLm5vcm1h
        bGl6ZVBhdGgoaS5jb250ZXh0LGUsaS5vcHRpb25zLmRhdGEpLHRoaXMucmVn
        aXN0ZXJPYnNlcnZlcihuLnJvb3Qsbi5wYXRoLHRoaXMsdGhpcy5fcGFyYW1z
        Q2hhbmdlZCkpO3ZhciB1PXRoaXMucXVlcnlQYXJhbXNPYmplY3Q7aWYodSl7
        dmFyIGw9dS52YWx1ZXM7Zm9yKHZhciBjIGluIGwpbC5oYXNPd25Qcm9wZXJ0
        eShjKSYmIklEIj09PXUudHlwZXNbY10mJihuPUVtYmVyLkhhbmRsZWJhcnMu
        bm9ybWFsaXplUGF0aChpLmNvbnRleHQsbFtjXSxpLm9wdGlvbnMuZGF0YSks
        dGhpcy5yZWdpc3Rlck9ic2VydmVyKG4ucm9vdCxuLnBhdGgsdGhpcyx0aGlz
        Ll9wYXJhbXNDaGFuZ2VkKSl9fSxhZnRlclJlbmRlcjpmdW5jdGlvbigpe3Ro
        aXMuX3N1cGVyLmFwcGx5KHRoaXMsYXJndW1lbnRzKSx0aGlzLl9zZXR1cFBh
        dGhPYnNlcnZlcnMoKX0sY29uY3JldGVWaWV3OkVtYmVyLmNvbXB1dGVkKGZ1
        bmN0aW9uKCl7cmV0dXJuIGUodGhpcywicGFyZW50VmlldyIpfSkucHJvcGVy
        dHkoInBhcmVudFZpZXciKSxkaXNhYmxlZDpFbWJlci5jb21wdXRlZChmdW5j
        dGlvbih0LHIpe3JldHVybiB2b2lkIDAhPT1yJiZ0aGlzLnNldCgiX2lzRGlz
        YWJsZWQiLHIpLHI/ZSh0aGlzLCJkaXNhYmxlZENsYXNzIik6ITF9KSxhY3Rp
        dmU6RW1iZXIuY29tcHV0ZWQoZnVuY3Rpb24oKXtpZihlKHRoaXMsImxvYWRp
        bmciKSlyZXR1cm4hMTt2YXIgdD1lKHRoaXMsInJvdXRlciIpLHI9ZSh0aGlz
        LCJyb3V0ZUFyZ3MiKSxuPXIuc2xpY2UoMSksaT0oZSh0aGlzLCJyZXNvbHZl
        ZFBhcmFtcyIpLHRoaXMuY3VycmVudFdoZW58fHJbMF0pO3RoaXMuY3VycmVu
        dFdoZW4mJihuPVtdKTt2YXIgbz10LmlzQWN0aXZlLmFwcGx5KHQsW2ldLmNv
        bmNhdChuKSk7cmV0dXJuIG8/ZSh0aGlzLCJhY3RpdmVDbGFzcyIpOnZvaWQg
        MH0pLnByb3BlcnR5KCJyZXNvbHZlZFBhcmFtcyIsInJvdXRlQXJncyIpLGxv
        YWRpbmc6RW1iZXIuY29tcHV0ZWQoZnVuY3Rpb24oKXtyZXR1cm4gZSh0aGlz
        LCJyb3V0ZUFyZ3MiKT92b2lkIDA6ZSh0aGlzLCJsb2FkaW5nQ2xhc3MiKX0p
        LnByb3BlcnR5KCJyb3V0ZUFyZ3MiKSxyb3V0ZXI6RW1iZXIuY29tcHV0ZWQo
        ZnVuY3Rpb24oKXtyZXR1cm4gZSh0aGlzLCJjb250cm9sbGVyIikuY29udGFp
        bmVyLmxvb2t1cCgicm91dGVyOm1haW4iKX0pLF9pbnZva2U6ZnVuY3Rpb24o
        dCl7aWYoIXModCkpcmV0dXJuITA7aWYodGhpcy5wcmV2ZW50RGVmYXVsdCE9
        PSExJiZ0LnByZXZlbnREZWZhdWx0KCksdGhpcy5idWJibGVzPT09ITEmJnQu
        c3RvcFByb3BhZ2F0aW9uKCksZSh0aGlzLCJfaXNEaXNhYmxlZCIpKXJldHVy
        biExO2lmKGUodGhpcywibG9hZGluZyIpKXJldHVybiBFbWJlci5Mb2dnZXIu
        d2FybigiVGhpcyBsaW5rLXRvIGlzIGluIGFuIGluYWN0aXZlIGxvYWRpbmcg
        c3RhdGUgYmVjYXVzZSBhdCBsZWFzdCBvbmUgb2YgaXRzIHBhcmFtZXRlcnMg
        cHJlc2VudGx5IGhhcyBhIG51bGwvdW5kZWZpbmVkIHZhbHVlLCBvciB0aGUg
        cHJvdmlkZWQgcm91dGUgbmFtZSBpcyBpbnZhbGlkLiIpLCExO3ZhciByLG49
        ZSh0aGlzLCJyb3V0ZXIiKSxpPWUodGhpcywicm91dGVBcmdzIik7cj1lKHRo
        aXMsInJlcGxhY2UiKT9uLnJlcGxhY2VXaXRoLmFwcGx5KG4saSk6bi50cmFu
        c2l0aW9uVG8uYXBwbHkobixpKTt2YXIgbz1uLnJvdXRlci5nZW5lcmF0ZS5h
        cHBseShuLnJvdXRlcixlKHRoaXMsInJvdXRlQXJncyIpKTtFbWJlci5ydW4u
        c2NoZWR1bGVPbmNlKCJyb3V0ZXJUcmFuc2l0aW9ucyIsdGhpcyx0aGlzLl9l
        YWdlclVwZGF0ZVVybCxyLG8pfSxfZWFnZXJVcGRhdGVVcmw6ZnVuY3Rpb24o
        dCxyKXtpZih0LmlzQWN0aXZlJiZ0LnVybE1ldGhvZCl7MD09PXIuaW5kZXhP
        ZigiIyIpJiYocj1yLnNsaWNlKDEpKTt2YXIgbj1lKHRoaXMsInJvdXRlci5y
        b3V0ZXIiKTsidXBkYXRlIj09PXQudXJsTWV0aG9kP24udXBkYXRlVVJMKHIp
        OiJyZXBsYWNlIj09PXQudXJsTWV0aG9kJiZuLnJlcGxhY2VVUkwociksdC5t
        ZXRob2QobnVsbCl9fSxyZXNvbHZlZFBhcmFtczpFbWJlci5jb21wdXRlZChm
        dW5jdGlvbigpe3ZhciB0PXRoaXMucGFyYW1ldGVycyxyPXQub3B0aW9ucyxu
        PXIudHlwZXMsbz1yLmRhdGE7aWYoMD09PXQucGFyYW1zLmxlbmd0aCl7dmFy
        IGE9dGhpcy5jb250YWluZXIubG9va3VwKCJjb250cm9sbGVyOmFwcGxpY2F0
        aW9uIik7cmV0dXJuW2UoYSwiY3VycmVudFJvdXRlTmFtZSIpXX1yZXR1cm4g
        aSh0LmNvbnRleHQsdC5wYXJhbXMse3R5cGVzOm4sZGF0YTpvfSl9KS5wcm9w
        ZXJ0eSgicm91dGVyLnVybCIpLHJvdXRlQXJnczpFbWJlci5jb21wdXRlZChm
        dW5jdGlvbigpe3ZhciB0PWUodGhpcywicmVzb2x2ZWRQYXJhbXMiKS5zbGlj
        ZSgwKSxyPWUodGhpcywicm91dGVyIiksbj10WzBdO2lmKG4pe3ZhciBpPXIu
        cm91dGVyLnJlY29nbml6ZXIuaGFuZGxlcnNGb3Iobiksbz1pW2kubGVuZ3Ro
        LTFdLmhhbmRsZXI7biE9PW8mJih0aGlzLnNldCgiY3VycmVudFdoZW4iLG4p
        LG49aVtpLmxlbmd0aC0xXS5oYW5kbGVyLHRbMF09bik7Zm9yKHZhciBhPTEs
        cz10Lmxlbmd0aDtzPmE7KythKXt2YXIgdT10W2FdO2lmKG51bGw9PT11fHwi
        dW5kZWZpbmVkIj09dHlwZW9mIHUpcmV0dXJufXJldHVybiB0fX0pLnByb3Bl
        cnR5KCJyZXNvbHZlZFBhcmFtcyIsInF1ZXJ5UGFyYW1zIikscXVlcnlQYXJh
        bXNPYmplY3Q6bnVsbCxxdWVyeVBhcmFtczpFbWJlci5jb21wdXRlZChmdW5j
        dGlvbigpe3ZhciB0PWUodGhpcywicXVlcnlQYXJhbXNPYmplY3QiKSxyPXt9
        O3QmJkVtYmVyLm1lcmdlKHIsdC52YWx1ZXMpO3ZhciBuPWUodGhpcywicmVz
        b2x2ZWRQYXJhbXMiKSxpPWUodGhpcywicm91dGVyIiksYT1uWzBdLHM9aS5f
        cXVlcnlQYXJhbU5hbWVzRm9yKGEpLHU9cy5xdWVyeVBhcmFtcyxsPXMudHJh
        bnNsYXRpb25zLGM9e307byhyLGwsYSk7dmFyIGg9dGhpcy5wYXJhbWV0ZXJz
        O3JldHVybiBpLl9xdWVyeVBhcmFtT3ZlcnJpZGVzKGMsdSxmdW5jdGlvbihl
        LG4pe2lmKGUgaW4gcil7dmFyIGksbz1lLnNwbGl0KCI6IiksYT10LnR5cGVz
        W29bMV1dO2lmKCJJRCI9PT1hKXt2YXIgcz1FbWJlci5IYW5kbGViYXJzLm5v
        cm1hbGl6ZVBhdGgoaC5jb250ZXh0LHJbZV0saC5vcHRpb25zLmRhdGEpO2k9
        RW1iZXIuSGFuZGxlYmFycy5nZXQocy5yb290LHMucGF0aCxoLm9wdGlvbnMp
        fWVsc2UgaT1yW2VdO2RlbGV0ZSByW2VdLGNbbl09aX19KSxjfSkucHJvcGVy
        dHkoInJlc29sdmVkUGFyYW1zLltdIiksaHJlZjpFbWJlci5jb21wdXRlZChm
        dW5jdGlvbigpe2lmKCJhIj09PWUodGhpcywidGFnTmFtZSIpKXt2YXIgdD1l
        KHRoaXMsInJvdXRlciIpLHI9ZSh0aGlzLCJyb3V0ZUFyZ3MiKTtyZXR1cm4g
        cj90LmdlbmVyYXRlLmFwcGx5KHQscik6ZSh0aGlzLCJsb2FkaW5nSHJlZiIp
        fX0pLnByb3BlcnR5KCJyb3V0ZUFyZ3MiKSxsb2FkaW5nSHJlZjoiIyJ9KTt1
        LnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIkxpbmtWaWV3In0sRW1iZXIu
        SGFuZGxlYmFycy5yZWdpc3RlckhlbHBlcigibGluay10byIsZnVuY3Rpb24o
        KXt2YXIgZT10LmNhbGwoYXJndW1lbnRzLC0xKVswXSxyPXQuY2FsbChhcmd1
        bWVudHMsMCwtMSksaT1lLmhhc2g7aWYocltyLmxlbmd0aC0xXWluc3RhbmNl
        b2YgbiYmKGkucXVlcnlQYXJhbXNPYmplY3Q9ci5wb3AoKSksaS5kaXNhYmxl
        ZEJpbmRpbmc9aS5kaXNhYmxlZFdoZW4sIWUuZm4pe3ZhciBvPXIuc2hpZnQo
        KSxhPWUudHlwZXMuc2hpZnQoKSxzPXRoaXM7IklEIj09PWE/KGUubGlua1Rl
        eHRQYXRoPW8sZS5mbj1mdW5jdGlvbigpe3JldHVybiBFbWJlci5IYW5kbGVi
        YXJzLmdldEVzY2FwZWQocyxvLGUpfSk6ZS5mbj1mdW5jdGlvbigpe3JldHVy
        biBvfX1yZXR1cm4gaS5wYXJhbWV0ZXJzPXtjb250ZXh0OnRoaXMsb3B0aW9u
        czplLHBhcmFtczpyfSxFbWJlci5IYW5kbGViYXJzLmhlbHBlcnMudmlldy5j
        YWxsKHRoaXMsdSxlKX0pLEVtYmVyLkhhbmRsZWJhcnMucmVnaXN0ZXJIZWxw
        ZXIoImxpbmtUbyIsZnVuY3Rpb24oKXtyZXR1cm4gRW1iZXIuSGFuZGxlYmFy
        cy5oZWxwZXJzWyJsaW5rLXRvIl0uYXBwbHkodGhpcyxhcmd1bWVudHMpfSl9
        KX0oKSxmdW5jdGlvbigpe0VtYmVyLmdldCxFbWJlci5zZXQ7RW1iZXIub25M
        b2FkKCJFbWJlci5IYW5kbGViYXJzIixmdW5jdGlvbihlKXtlLk91dGxldFZp
        ZXc9RW1iZXIuQ29udGFpbmVyVmlldy5leHRlbmQoRW1iZXIuX01ldGFtb3Jw
        aCksZS5yZWdpc3RlckhlbHBlcigib3V0bGV0IixmdW5jdGlvbih0LHIpe3Zh
        ciBuLGksbyxhLHM7Zm9yKHQmJnQuZGF0YSYmdC5kYXRhLmlzUmVuZGVyRGF0
        YSYmKHI9dCx0PSJtYWluIiksaT1yLmRhdGEudmlldy5jb250YWluZXIsbj1y
        LmRhdGEudmlldzshbi5nZXQoInRlbXBsYXRlLmlzVG9wIik7KW49bi5nZXQo
        Il9wYXJlbnRWaWV3Iik7cmV0dXJuIG89ci5oYXNoLnZpZXcsbyYmKHM9InZp
        ZXc6IitvKSxhPW8/aS5sb29rdXBGYWN0b3J5KHMpOnIuaGFzaC52aWV3Q2xh
        c3N8fGUuT3V0bGV0VmlldyxyLmRhdGEudmlldy5zZXQoIm91dGxldFNvdXJj
        ZSIsbiksci5oYXNoLmN1cnJlbnRWaWV3QmluZGluZz0iX3ZpZXcub3V0bGV0
        U291cmNlLl9vdXRsZXRzLiIrdCxlLmhlbHBlcnMudmlldy5jYWxsKHRoaXMs
        YSxyKX0pfSl9KCksZnVuY3Rpb24oKXtFbWJlci5nZXQsRW1iZXIuc2V0O0Vt
        YmVyLm9uTG9hZCgiRW1iZXIuSGFuZGxlYmFycyIsZnVuY3Rpb24oKXtFbWJl
        ci5IYW5kbGViYXJzLnJlZ2lzdGVySGVscGVyKCJyZW5kZXIiLGZ1bmN0aW9u
        KGUsdCxyKXt2YXIgbixpLG8sYSxzLHU9YXJndW1lbnRzLmxlbmd0aDtpZihu
        PShyfHx0KS5kYXRhLmtleXdvcmRzLmNvbnRyb2xsZXIuY29udGFpbmVyLGk9
        bi5sb29rdXAoInJvdXRlcjptYWluIiksMj09PXUpcj10LHQ9dm9pZCAwO2Vs
        c2V7aWYoMyE9PXUpdGhyb3cgRW1iZXIuRXJyb3IoIllvdSBtdXN0IHBhc3Mg
        YSB0ZW1wbGF0ZU5hbWUgdG8gcmVuZGVyIik7cz1FbWJlci5IYW5kbGViYXJz
        LmdldChyLmNvbnRleHRzWzFdLHQscil9ZT1lLnJlcGxhY2UoL1wvL2csIi4i
        KSxhPW4ubG9va3VwKCJ2aWV3OiIrZSl8fG4ubG9va3VwKCJ2aWV3OmRlZmF1
        bHQiKTt2YXIgbD1yLmhhc2guY29udHJvbGxlcnx8ZSxjPSJjb250cm9sbGVy
        OiIrbDtyLmhhc2guY29udHJvbGxlcjt2YXIgaD1yLmRhdGEua2V5d29yZHMu
        Y29udHJvbGxlcjtpZih1PjIpe3ZhciBtPW4ubG9va3VwRmFjdG9yeShjKXx8
        RW1iZXIuZ2VuZXJhdGVDb250cm9sbGVyRmFjdG9yeShuLGwscyk7bz1tLmNy
        ZWF0ZSh7bW9kZWw6cyxwYXJlbnRDb250cm9sbGVyOmgsdGFyZ2V0Omh9KX1l
        bHNlIG89bi5sb29rdXAoYyl8fEVtYmVyLmdlbmVyYXRlQ29udHJvbGxlcihu
        LGwpLG8uc2V0UHJvcGVydGllcyh7dGFyZ2V0OmgscGFyZW50Q29udHJvbGxl
        cjpofSk7dmFyIHA9ci5jb250ZXh0c1sxXTtwJiZhLnJlZ2lzdGVyT2JzZXJ2
        ZXIocCx0LGZ1bmN0aW9uKCl7by5zZXQoIm1vZGVsIixFbWJlci5IYW5kbGVi
        YXJzLmdldChwLHQscikpfSksci5oYXNoLnZpZXdOYW1lPUVtYmVyLlN0cmlu
        Zy5jYW1lbGl6ZShlKTt2YXIgZj0idGVtcGxhdGU6IitlO3IuaGFzaC50ZW1w
        bGF0ZT1uLmxvb2t1cChmKSxyLmhhc2guY29udHJvbGxlcj1vLGkmJiFzJiZp
        Ll9jb25uZWN0QWN0aXZlVmlldyhlLGEpLEVtYmVyLkhhbmRsZWJhcnMuaGVs
        cGVycy52aWV3LmNhbGwodGhpcyxhLHIpfSl9KX0oKSxmdW5jdGlvbigpe0Vt
        YmVyLm9uTG9hZCgiRW1iZXIuSGFuZGxlYmFycyIsZnVuY3Rpb24oKXtmdW5j
        dGlvbiBlKGUscil7dmFyIG49W107ciYmbi5wdXNoKHIpO3ZhciBpPWUub3B0
        aW9ucy50eXBlcy5zbGljZSgxKSxvPWUub3B0aW9ucy5kYXRhO3JldHVybiBu
        LmNvbmNhdCh0KGUuY29udGV4dCxlLnBhcmFtcyx7dHlwZXM6aSxkYXRhOm99
        KSl9dmFyIHQ9RW1iZXIuUm91dGVyLnJlc29sdmVQYXJhbXMscj1FbWJlci5W
        aWV3VXRpbHMuaXNTaW1wbGVDbGljayxuPUVtYmVyLkhhbmRsZWJhcnMsaT1u
        LmdldCxvPW4uU2FmZVN0cmluZyxhPUVtYmVyLkFycmF5UG9seWZpbGxzLmZv
        ckVhY2gscz0oRW1iZXIuZ2V0LEFycmF5LnByb3RvdHlwZS5zbGljZSksdT1u
        LkFjdGlvbkhlbHBlcj17cmVnaXN0ZXJlZEFjdGlvbnM6e319LGw9WyJhbHQi
        LCJzaGlmdCIsIm1ldGEiLCJjdHJsIl0sYz0vXmNsaWNrfG1vdXNlfHRvdWNo
        LyxoPWZ1bmN0aW9uKGUsdCl7aWYoInVuZGVmaW5lZCI9PXR5cGVvZiB0KXtp
        ZihjLnRlc3QoZS50eXBlKSlyZXR1cm4gcihlKTt0PSIifWlmKHQuaW5kZXhP
        ZigiYW55Iik+PTApcmV0dXJuITA7dmFyIG49ITA7cmV0dXJuIGEuY2FsbChs
        LGZ1bmN0aW9uKHIpe2VbcisiS2V5Il0mJi0xPT09dC5pbmRleE9mKHIpJiYo
        bj0hMSl9KSxufTt1LnJlZ2lzdGVyQWN0aW9uPWZ1bmN0aW9uKHQscixuKXt2
        YXIgbz0rK0VtYmVyLnV1aWQ7cmV0dXJuIHUucmVnaXN0ZXJlZEFjdGlvbnNb
        b109e2V2ZW50TmFtZTpyLmV2ZW50TmFtZSxoYW5kbGVyOmZ1bmN0aW9uKG8p
        e2lmKCFoKG8sbikpcmV0dXJuITA7ci5wcmV2ZW50RGVmYXVsdCE9PSExJiZv
        LnByZXZlbnREZWZhdWx0KCksci5idWJibGVzPT09ITEmJm8uc3RvcFByb3Bh
        Z2F0aW9uKCk7dmFyIGEscz1yLnRhcmdldDtzPXMudGFyZ2V0P2kocy5yb290
        LHMudGFyZ2V0LHMub3B0aW9ucyk6cy5yb290LHIuYm91bmRQcm9wZXJ0eSYm
        KGE9aShzLHQsci5vcHRpb25zKSwoInVuZGVmaW5lZCI9PXR5cGVvZiBhfHwi
        ZnVuY3Rpb24iPT10eXBlb2YgYSkmJihhPXQpKSxhfHwoYT10KSxFbWJlci5y
        dW4oZnVuY3Rpb24oKXtzLnNlbmQ/cy5zZW5kLmFwcGx5KHMsZShyLnBhcmFt
        ZXRlcnMsYSkpOnNbYV0uYXBwbHkocyxlKHIucGFyYW1ldGVycykpfSl9fSxy
        LnZpZXcub24oIndpbGxDbGVhclJlbmRlciIsZnVuY3Rpb24oKXtkZWxldGUg
        dS5yZWdpc3RlcmVkQWN0aW9uc1tvXX0pLG99LG4ucmVnaXN0ZXJIZWxwZXIo
        ImFjdGlvbiIsZnVuY3Rpb24oZSl7dmFyIHQ9YXJndW1lbnRzW2FyZ3VtZW50
        cy5sZW5ndGgtMV0scj1zLmNhbGwoYXJndW1lbnRzLDEsLTEpLG49dC5oYXNo
        LGk9dC5kYXRhLmtleXdvcmRzLmNvbnRyb2xsZXIsYT17ZXZlbnROYW1lOm4u
        b258fCJjbGljayIscGFyYW1ldGVyczp7Y29udGV4dDp0aGlzLG9wdGlvbnM6
        dCxwYXJhbXM6cn0sdmlldzp0LmRhdGEudmlldyxidWJibGVzOm4uYnViYmxl
        cyxwcmV2ZW50RGVmYXVsdDpuLnByZXZlbnREZWZhdWx0LHRhcmdldDp7b3B0
        aW9uczp0fSxib3VuZFByb3BlcnR5OiJJRCI9PT10LnR5cGVzWzBdfTtuLnRh
        cmdldD8oYS50YXJnZXQucm9vdD10aGlzLGEudGFyZ2V0LnRhcmdldD1uLnRh
        cmdldCk6aSYmKGEudGFyZ2V0LnJvb3Q9aSk7dmFyIGw9dS5yZWdpc3RlckFj
        dGlvbihlLGEsbi5hbGxvd2VkS2V5cyk7cmV0dXJuIG5ldyBvKCdkYXRhLWVt
        YmVyLWFjdGlvbj0iJytsKyciJyl9KX0pfSgpLGZ1bmN0aW9uKCl7e3ZhciBl
        PUVtYmVyLmdldDtFbWJlci5zZXQsRW1iZXIuRW51bWVyYWJsZVV0aWxzLm1h
        cH1FbWJlci5Db250cm9sbGVyTWl4aW4ucmVvcGVuKHt0cmFuc2l0aW9uVG9S
        b3V0ZTpmdW5jdGlvbigpe3ZhciB0PWUodGhpcywidGFyZ2V0Iikscj10LnRy
        YW5zaXRpb25Ub1JvdXRlfHx0LnRyYW5zaXRpb25UbztyZXR1cm4gci5hcHBs
        eSh0LGFyZ3VtZW50cyl9LHRyYW5zaXRpb25UbzpmdW5jdGlvbigpe3JldHVy
        biB0aGlzLnRyYW5zaXRpb25Ub1JvdXRlLmFwcGx5KHRoaXMsYXJndW1lbnRz
        KX0scmVwbGFjZVJvdXRlOmZ1bmN0aW9uKCl7dmFyIHQ9ZSh0aGlzLCJ0YXJn
        ZXQiKSxyPXQucmVwbGFjZVJvdXRlfHx0LnJlcGxhY2VXaXRoO3JldHVybiBy
        LmFwcGx5KHQsYXJndW1lbnRzKX0scmVwbGFjZVdpdGg6ZnVuY3Rpb24oKXty
        ZXR1cm4gdGhpcy5yZXBsYWNlUm91dGUuYXBwbHkodGhpcyxhcmd1bWVudHMp
        fX0pfSgpLGZ1bmN0aW9uKCl7dmFyIGU9RW1iZXIuZ2V0LHQ9RW1iZXIuc2V0
        O0VtYmVyLlZpZXcucmVvcGVuKHtpbml0OmZ1bmN0aW9uKCl7dCh0aGlzLCJf
        b3V0bGV0cyIse30pLHRoaXMuX3N1cGVyKCl9LGNvbm5lY3RPdXRsZXQ6ZnVu
        Y3Rpb24ocixuKXtpZih0aGlzLl9wZW5kaW5nRGlzY29ubmVjdGlvbnMmJmRl
        bGV0ZSB0aGlzLl9wZW5kaW5nRGlzY29ubmVjdGlvbnNbcl0sdGhpcy5faGFz
        RXF1aXZhbGVudFZpZXcocixuKSlyZXR1cm4gbi5kZXN0cm95KCksdm9pZCAw
        O3ZhciBpPWUodGhpcywiX291dGxldHMiKSxvPWUodGhpcywiY29udGFpbmVy
        IiksYT1vJiZvLmxvb2t1cCgicm91dGVyOm1haW4iKSxzPWUobiwicmVuZGVy
        ZWROYW1lIik7dChpLHIsbiksYSYmcyYmYS5fY29ubmVjdEFjdGl2ZVZpZXco
        cyxuKX0sX2hhc0VxdWl2YWxlbnRWaWV3OmZ1bmN0aW9uKHQscil7dmFyIG49
        ZSh0aGlzLCJfb3V0bGV0cy4iK3QpO3JldHVybiBuJiZuLmNvbnN0cnVjdG9y
        PT09ci5jb25zdHJ1Y3RvciYmbi5nZXQoInRlbXBsYXRlIik9PT1yLmdldCgi
        dGVtcGxhdGUiKSYmbi5nZXQoImNvbnRleHQiKT09PXIuZ2V0KCJjb250ZXh0
        Iil9LGRpc2Nvbm5lY3RPdXRsZXQ6ZnVuY3Rpb24oZSl7dGhpcy5fcGVuZGlu
        Z0Rpc2Nvbm5lY3Rpb25zfHwodGhpcy5fcGVuZGluZ0Rpc2Nvbm5lY3Rpb25z
        PXt9KSx0aGlzLl9wZW5kaW5nRGlzY29ubmVjdGlvbnNbZV09ITAsRW1iZXIu
        cnVuLm9uY2UodGhpcywiX2ZpbmlzaERpc2Nvbm5lY3Rpb25zIil9LF9maW5p
        c2hEaXNjb25uZWN0aW9uczpmdW5jdGlvbigpe2lmKCF0aGlzLmlzRGVzdHJv
        eWVkKXt2YXIgcj1lKHRoaXMsIl9vdXRsZXRzIiksbj10aGlzLl9wZW5kaW5n
        RGlzY29ubmVjdGlvbnM7dGhpcy5fcGVuZGluZ0Rpc2Nvbm5lY3Rpb25zPW51
        bGw7Zm9yKHZhciBpIGluIG4pdChyLGksbnVsbCl9fX0pfSgpLGZ1bmN0aW9u
        KCl7dmFyIGU9RW1iZXIucnVuLnF1ZXVlcyx0PUVtYmVyLkFycmF5UG9seWZp
        bGxzLmluZGV4T2Y7ZS5zcGxpY2UodC5jYWxsKGUsImFjdGlvbnMiKSsxLDAs
        InJvdXRlclRyYW5zaXRpb25zIil9KCksZnVuY3Rpb24oKXtFbWJlci5nZXQs
        RW1iZXIuc2V0O0VtYmVyLkxvY2F0aW9uPXtjcmVhdGU6ZnVuY3Rpb24oZSl7
        dmFyIHQ9ZSYmZS5pbXBsZW1lbnRhdGlvbixyPXRoaXMuaW1wbGVtZW50YXRp
        b25zW3RdO3JldHVybiByLmNyZWF0ZS5hcHBseShyLGFyZ3VtZW50cyl9LHJl
        Z2lzdGVySW1wbGVtZW50YXRpb246ZnVuY3Rpb24oZSx0KXt0aGlzLmltcGxl
        bWVudGF0aW9uc1tlXT10fSxpbXBsZW1lbnRhdGlvbnM6e30sZ2V0SGFzaDpm
        dW5jdGlvbigpe3ZhciBlPXdpbmRvdy5sb2NhdGlvbi5ocmVmLHQ9ZS5pbmRl
        eE9mKCIjIik7cmV0dXJuLTE9PT10PyIiOmUuc3Vic3RyKHQpfX19KCksZnVu
        Y3Rpb24oKXt2YXIgZT1FbWJlci5nZXQsdD1FbWJlci5zZXQ7RW1iZXIuTm9u
        ZUxvY2F0aW9uPUVtYmVyLk9iamVjdC5leHRlbmQoe2ltcGxlbWVudGF0aW9u
        OiJub25lIixwYXRoOiIiLGdldFVSTDpmdW5jdGlvbigpe3JldHVybiBlKHRo
        aXMsInBhdGgiKX0sc2V0VVJMOmZ1bmN0aW9uKGUpe3QodGhpcywicGF0aCIs
        ZSl9LG9uVXBkYXRlVVJMOmZ1bmN0aW9uKGUpe3RoaXMudXBkYXRlQ2FsbGJh
        Y2s9ZX0saGFuZGxlVVJMOmZ1bmN0aW9uKGUpe3QodGhpcywicGF0aCIsZSks
        dGhpcy51cGRhdGVDYWxsYmFjayhlKX0sZm9ybWF0VVJMOmZ1bmN0aW9uKGUp
        e3JldHVybiBlfX0pfSgpLGZ1bmN0aW9uKCl7dmFyIGU9RW1iZXIuZ2V0LHQ9
        RW1iZXIuc2V0LHI9RW1iZXIuTG9jYXRpb24uZ2V0SGFzaDtFbWJlci5IYXNo
        TG9jYXRpb249RW1iZXIuT2JqZWN0LmV4dGVuZCh7aW1wbGVtZW50YXRpb246
        Imhhc2giLGluaXQ6ZnVuY3Rpb24oKXt0KHRoaXMsImxvY2F0aW9uIixlKHRo
        aXMsImxvY2F0aW9uIil8fHdpbmRvdy5sb2NhdGlvbil9LGdldFVSTDpmdW5j
        dGlvbigpe3JldHVybiByKCkuc3Vic3RyKDEpfSxzZXRVUkw6ZnVuY3Rpb24o
        cil7ZSh0aGlzLCJsb2NhdGlvbiIpLmhhc2g9cix0KHRoaXMsImxhc3RTZXRV
        UkwiLHIpfSxyZXBsYWNlVVJMOmZ1bmN0aW9uKHIpe2UodGhpcywibG9jYXRp
        b24iKS5yZXBsYWNlKCIjIityKSx0KHRoaXMsImxhc3RTZXRVUkwiLHIpfSxv
        blVwZGF0ZVVSTDpmdW5jdGlvbihyKXt2YXIgbj10aGlzLGk9RW1iZXIuZ3Vp
        ZEZvcih0aGlzKTtFbWJlci4kKHdpbmRvdykub24oImhhc2hjaGFuZ2UuZW1i
        ZXItbG9jYXRpb24tIitpLGZ1bmN0aW9uKCl7RW1iZXIucnVuKGZ1bmN0aW9u
        KCl7dmFyIGk9bi5nZXRVUkwoKTtlKG4sImxhc3RTZXRVUkwiKSE9PWkmJih0
        KG4sImxhc3RTZXRVUkwiLG51bGwpLHIoaSkpfSl9KX0sZm9ybWF0VVJMOmZ1
        bmN0aW9uKGUpe3JldHVybiIjIitlfSx3aWxsRGVzdHJveTpmdW5jdGlvbigp
        e3ZhciBlPUVtYmVyLmd1aWRGb3IodGhpcyk7RW1iZXIuJCh3aW5kb3cpLm9m
        ZigiaGFzaGNoYW5nZS5lbWJlci1sb2NhdGlvbi0iK2UpfX0pfSgpLGZ1bmN0
        aW9uKCl7dmFyIGU9RW1iZXIuZ2V0LHQ9RW1iZXIuc2V0LHI9ITEsbj13aW5k
        b3cuaGlzdG9yeSYmInN0YXRlImluIHdpbmRvdy5oaXN0b3J5O0VtYmVyLkhp
        c3RvcnlMb2NhdGlvbj1FbWJlci5PYmplY3QuZXh0ZW5kKHtpbXBsZW1lbnRh
        dGlvbjoiaGlzdG9yeSIsaW5pdDpmdW5jdGlvbigpe3QodGhpcywibG9jYXRp
        b24iLGUodGhpcywibG9jYXRpb24iKXx8d2luZG93LmxvY2F0aW9uKSx0KHRo
        aXMsImJhc2VVUkwiLEVtYmVyLiQoImJhc2UiKS5hdHRyKCJocmVmIil8fCIi
        KX0saW5pdFN0YXRlOmZ1bmN0aW9uKCl7dCh0aGlzLCJoaXN0b3J5IixlKHRo
        aXMsImhpc3RvcnkiKXx8d2luZG93Lmhpc3RvcnkpLHRoaXMucmVwbGFjZVN0
        YXRlKHRoaXMuZm9ybWF0VVJMKHRoaXMuZ2V0VVJMKCkpKX0scm9vdFVSTDoi
        LyIsZ2V0VVJMOmZ1bmN0aW9uKCl7dmFyIHQ9ZSh0aGlzLCJyb290VVJMIiks
        cj1lKHRoaXMsImxvY2F0aW9uIiksbj1yLnBhdGhuYW1lLGk9ZSh0aGlzLCJi
        YXNlVVJMIik7dD10LnJlcGxhY2UoL1wvJC8sIiIpLGk9aS5yZXBsYWNlKC9c
        LyQvLCIiKTt2YXIgbz1uLnJlcGxhY2UoaSwiIikucmVwbGFjZSh0LCIiKTty
        ZXR1cm4gb30sc2V0VVJMOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuZ2V0U3Rh
        dGUoKTtlPXRoaXMuZm9ybWF0VVJMKGUpLHQmJnQucGF0aCE9PWUmJnRoaXMu
        cHVzaFN0YXRlKGUpfSxyZXBsYWNlVVJMOmZ1bmN0aW9uKGUpe3ZhciB0PXRo
        aXMuZ2V0U3RhdGUoKTtlPXRoaXMuZm9ybWF0VVJMKGUpLHQmJnQucGF0aCE9
        PWUmJnRoaXMucmVwbGFjZVN0YXRlKGUpfSxnZXRTdGF0ZTpmdW5jdGlvbigp
        e3JldHVybiBuP2UodGhpcywiaGlzdG9yeSIpLnN0YXRlOnRoaXMuX2hpc3Rv
        cnlTdGF0ZX0scHVzaFN0YXRlOmZ1bmN0aW9uKHQpe3ZhciByPXtwYXRoOnR9
        O2UodGhpcywiaGlzdG9yeSIpLnB1c2hTdGF0ZShyLG51bGwsdCksbnx8KHRo
        aXMuX2hpc3RvcnlTdGF0ZT1yKSx0aGlzLl9wcmV2aW91c1VSTD10aGlzLmdl
        dFVSTCgpfSxyZXBsYWNlU3RhdGU6ZnVuY3Rpb24odCl7dmFyIHI9e3BhdGg6
        dH07ZSh0aGlzLCJoaXN0b3J5IikucmVwbGFjZVN0YXRlKHIsbnVsbCx0KSxu
        fHwodGhpcy5faGlzdG9yeVN0YXRlPXIpLHRoaXMuX3ByZXZpb3VzVVJMPXRo
        aXMuZ2V0VVJMKCl9LG9uVXBkYXRlVVJMOmZ1bmN0aW9uKGUpe3ZhciB0PUVt
        YmVyLmd1aWRGb3IodGhpcyksbj10aGlzO0VtYmVyLiQod2luZG93KS5vbigi
        cG9wc3RhdGUuZW1iZXItbG9jYXRpb24tIit0LGZ1bmN0aW9uKCl7KHJ8fChy
        PSEwLG4uZ2V0VVJMKCkhPT1uLl9wcmV2aW91c1VSTCkpJiZlKG4uZ2V0VVJM
        KCkpfSl9LGZvcm1hdFVSTDpmdW5jdGlvbih0KXt2YXIgcj1lKHRoaXMsInJv
        b3RVUkwiKSxuPWUodGhpcywiYmFzZVVSTCIpO3JldHVybiIiIT09dD8ocj1y
        LnJlcGxhY2UoL1wvJC8sIiIpLG49bi5yZXBsYWNlKC9cLyQvLCIiKSk6bi5t
        YXRjaCgvXlwvLykmJnIubWF0Y2goL15cLy8pJiYobj1uLnJlcGxhY2UoL1wv
        JC8sIiIpKSxuK3IrdH0sd2lsbERlc3Ryb3k6ZnVuY3Rpb24oKXt2YXIgZT1F
        bWJlci5ndWlkRm9yKHRoaXMpO0VtYmVyLiQod2luZG93KS5vZmYoInBvcHN0
        YXRlLmVtYmVyLWxvY2F0aW9uLSIrZSl9fSl9KCksZnVuY3Rpb24oKXt7dmFy
        IGU9KEVtYmVyLmdldCxFbWJlci5zZXQpLHQ9ZG9jdW1lbnQuZG9jdW1lbnRN
        b2RlLHI9d2luZG93Lmhpc3Rvcnksbj13aW5kb3cubG9jYXRpb24saT1FbWJl
        ci5Mb2NhdGlvbi5nZXRIYXNoO0VtYmVyLkF1dG9Mb2NhdGlvbj17cm9vdFVS
        TDoiLyIsc3VwcG9ydHNIaXN0b3J5OmZ1bmN0aW9uKCl7dmFyIGU9d2luZG93
        Lm5hdmlnYXRvci51c2VyQWdlbnQ7cmV0dXJuLTEhPT1lLmluZGV4T2YoIkFu
        ZHJvaWQgMiIpJiYtMSE9PWUuaW5kZXhPZigiTW9iaWxlIFNhZmFyaSIpJiYt
        MT09PWUuaW5kZXhPZigiQ2hyb21lIik/ITE6ISEociYmInB1c2hTdGF0ZSJp
        biByKX0oKSxzdXBwb3J0c0hhc2hDaGFuZ2U6Im9uaGFzaGNoYW5nZSJpbiB3
        aW5kb3cmJih2b2lkIDA9PT10fHx0PjcpLGNyZWF0ZTpmdW5jdGlvbih0KXt0
        JiZ0LnJvb3RVUkwmJih0aGlzLnJvb3RVUkw9dC5yb290VVJMKTt2YXIgcixp
        LG8sYT0hMSxzPXRoaXMuZ2V0RnVsbFBhdGgoKTt0aGlzLnN1cHBvcnRzSGlz
        dG9yeT8oaT10aGlzLmdldEhpc3RvcnlQYXRoKCkscz09PWk/cj1FbWJlci5I
        aXN0b3J5TG9jYXRpb246KGE9ITAsbi5yZXBsYWNlKGkpKSk6dGhpcy5zdXBw
        b3J0c0hhc2hDaGFuZ2UmJihvPXRoaXMuZ2V0SGFzaFBhdGgoKSxzPT09bz9y
        PUVtYmVyLkhhc2hMb2NhdGlvbjooYT0hMCxuLnJlcGxhY2UobykpKSxyfHwo
        cj1FbWJlci5Ob25lTG9jYXRpb24pO3ZhciB1PXIuY3JlYXRlLmFwcGx5KHIs
        YXJndW1lbnRzKTtyZXR1cm4gYSYmZSh1LCJjYW5jZWxSb3V0ZXJTZXR1cCIs
        ITApLHV9LGdldFBhdGg6ZnVuY3Rpb24oKXt2YXIgZT1uLnBhdGhuYW1lO3Jl
        dHVybiIvIiE9PWUuY2hhckF0KDApJiYoZT0iLyIrZSksZX0sZ2V0RnVsbFBh
        dGg6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRQYXRoKCkraSgpLnN1YnN0
        cigxKX0sZ2V0SGlzdG9yeVBhdGg6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmdl
        dFBhdGgoKSx0PWkoKS5zdWJzdHIoMSkscj1lK3Q7cmV0dXJuIHIucmVwbGFj
        ZSgvXC9cLy8sIi8iKX0sZ2V0SGFzaFBhdGg6ZnVuY3Rpb24oKXt2YXIgZT10
        aGlzLmdldEhpc3RvcnlQYXRoKCksdD1uZXcgUmVnRXhwKCIoIit0aGlzLnJv
        b3RVUkwrIikoLispIikscj1lLnJlcGxhY2UodCwiJDEjLyQyIik7cmV0dXJu
        IHI9ci5yZXBsYWNlKC9cL1wvLywiLyIpfX19fSgpLGZ1bmN0aW9uKCl7ZnVu
        Y3Rpb24gZSh0LHIsbixpKXt2YXIgbyxhPXQubmFtZSxzPXQuaW5jb21pbmcs
        dT10LmluY29taW5nTmFtZXMsbD11Lmxlbmd0aDtpZihufHwobj17fSksaXx8
        KGk9W10pLCFuLmhhc093blByb3BlcnR5KGEpKXtmb3IoaS5wdXNoKGEpLG5b
        YV09ITAsbz0wO2w+bztvKyspZShzW3Vbb11dLHIsbixpKTtyKHQsaSksaS5w
        b3AoKX19ZnVuY3Rpb24gdCgpe3RoaXMubmFtZXM9W10sdGhpcy52ZXJ0aWNl
        cz17fX10LnByb3RvdHlwZS5hZGQ9ZnVuY3Rpb24oZSl7aWYoZSl7aWYodGhp
        cy52ZXJ0aWNlcy5oYXNPd25Qcm9wZXJ0eShlKSlyZXR1cm4gdGhpcy52ZXJ0
        aWNlc1tlXTt2YXIgdD17bmFtZTplLGluY29taW5nOnt9LGluY29taW5nTmFt
        ZXM6W10saGFzT3V0Z29pbmc6ITEsdmFsdWU6bnVsbH07cmV0dXJuIHRoaXMu
        dmVydGljZXNbZV09dCx0aGlzLm5hbWVzLnB1c2goZSksdH19LHQucHJvdG90
        eXBlLm1hcD1mdW5jdGlvbihlLHQpe3RoaXMuYWRkKGUpLnZhbHVlPXR9LHQu
        cHJvdG90eXBlLmFkZEVkZ2U9ZnVuY3Rpb24odCxyKXtmdW5jdGlvbiBuKGUs
        dCl7aWYoZS5uYW1lPT09cil0aHJvdyBuZXcgRW1iZXIuRXJyb3IoImN5Y2xl
        IGRldGVjdGVkOiAiK3IrIiA8LSAiK3Quam9pbigiIDwtICIpKX1pZih0JiZy
        JiZ0IT09cil7dmFyIGk9dGhpcy5hZGQodCksbz10aGlzLmFkZChyKTtvLmlu
        Y29taW5nLmhhc093blByb3BlcnR5KHQpfHwoZShpLG4pLGkuaGFzT3V0Z29p
        bmc9ITAsby5pbmNvbWluZ1t0XT1pLG8uaW5jb21pbmdOYW1lcy5wdXNoKHQp
        KX19LHQucHJvdG90eXBlLnRvcHNvcnQ9ZnVuY3Rpb24odCl7dmFyIHIsbixp
        PXt9LG89dGhpcy52ZXJ0aWNlcyxhPXRoaXMubmFtZXMscz1hLmxlbmd0aDtm
        b3Iocj0wO3M+cjtyKyspbj1vW2Fbcl1dLG4uaGFzT3V0Z29pbmd8fGUobix0
        LGkpfSx0LnByb3RvdHlwZS5hZGRFZGdlcz1mdW5jdGlvbihlLHQscixuKXt2
        YXIgaTtpZih0aGlzLm1hcChlLHQpLHIpaWYoInN0cmluZyI9PXR5cGVvZiBy
        KXRoaXMuYWRkRWRnZShlLHIpO2Vsc2UgZm9yKGk9MDtpPHIubGVuZ3RoO2kr
        Kyl0aGlzLmFkZEVkZ2UoZSxyW2ldKTtpZihuKWlmKCJzdHJpbmciPT10eXBl
        b2Ygbil0aGlzLmFkZEVkZ2UobixlKTtlbHNlIGZvcihpPTA7aTxuLmxlbmd0
        aDtpKyspdGhpcy5hZGRFZGdlKG5baV0sZSl9LEVtYmVyLkRBRz10fSgpLGZ1
        bmN0aW9uKCl7dmFyIGU9RW1iZXIuZ2V0LHQ9RW1iZXIuU3RyaW5nLmNsYXNz
        aWZ5LHI9RW1iZXIuU3RyaW5nLmNhcGl0YWxpemUsbj1FbWJlci5TdHJpbmcu
        ZGVjYW1lbGl6ZTtFbWJlci5EZWZhdWx0UmVzb2x2ZXI9RW1iZXIuT2JqZWN0
        LmV4dGVuZCh7bmFtZXNwYWNlOm51bGwsbm9ybWFsaXplOmZ1bmN0aW9uKGUp
        e3ZhciB0PWUuc3BsaXQoIjoiLDIpLHI9dFswXSxuPXRbMV07aWYoInRlbXBs
        YXRlIiE9PXIpe3ZhciBpPW47cmV0dXJuIGkuaW5kZXhPZigiLiIpPi0xJiYo
        aT1pLnJlcGxhY2UoL1wuKC4pL2csZnVuY3Rpb24oZSl7cmV0dXJuIGUuY2hh
        ckF0KDEpLnRvVXBwZXJDYXNlKCl9KSksbi5pbmRleE9mKCJfIik+LTEmJihp
        PWkucmVwbGFjZSgvXyguKS9nLGZ1bmN0aW9uKGUpe3JldHVybiBlLmNoYXJB
        dCgxKS50b1VwcGVyQ2FzZSgpfSkpLHIrIjoiK2l9cmV0dXJuIGV9LHJlc29s
        dmU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5wYXJzZU5hbWUoZSkscj10LnJl
        c29sdmVNZXRob2ROYW1lO2lmKCF0Lm5hbWV8fCF0LnR5cGUpdGhyb3cgbmV3
        IFR5cGVFcnJvcigiSW52YWxpZCBmdWxsTmFtZTogYCIrZSsiYCwgbXVzdCBi
        ZSBvZiB0aGUgZm9ybSBgdHlwZTpuYW1lYCAiKTtpZih0aGlzW3JdKXt2YXIg
        bj10aGlzW3JdKHQpO2lmKG4pcmV0dXJuIG59cmV0dXJuIHRoaXMucmVzb2x2
        ZU90aGVyKHQpfSxwYXJzZU5hbWU6ZnVuY3Rpb24obil7dmFyIGk9bi5zcGxp
        dCgiOiIpLG89aVswXSxhPWlbMV0scz1hLHU9ZSh0aGlzLCJuYW1lc3BhY2Ui
        KSxsPXU7aWYoInRlbXBsYXRlIiE9PW8mJi0xIT09cy5pbmRleE9mKCIvIikp
        e3ZhciBjPXMuc3BsaXQoIi8iKTtzPWNbYy5sZW5ndGgtMV07dmFyIGg9cihj
        LnNsaWNlKDAsLTEpLmpvaW4oIi4iKSk7bD1FbWJlci5OYW1lc3BhY2UuYnlO
        YW1lKGgpfXJldHVybntmdWxsTmFtZTpuLHR5cGU6byxmdWxsTmFtZVdpdGhv
        dXRUeXBlOmEsbmFtZTpzLHJvb3Q6bCxyZXNvbHZlTWV0aG9kTmFtZToicmVz
        b2x2ZSIrdChvKX19LHJlc29sdmVUZW1wbGF0ZTpmdW5jdGlvbihlKXt2YXIg
        dD1lLmZ1bGxOYW1lV2l0aG91dFR5cGUucmVwbGFjZSgvXC4vZywiLyIpO3Jl
        dHVybiBFbWJlci5URU1QTEFURVNbdF0/RW1iZXIuVEVNUExBVEVTW3RdOih0
        PW4odCksRW1iZXIuVEVNUExBVEVTW3RdP0VtYmVyLlRFTVBMQVRFU1t0XTp2
        b2lkIDApfSx1c2VSb3V0ZXJOYW1pbmc6ZnVuY3Rpb24oZSl7ZS5uYW1lPWUu
        bmFtZS5yZXBsYWNlKC9cLi9nLCJfIiksImJhc2ljIj09PWUubmFtZSYmKGUu
        bmFtZT0iIil9LHJlc29sdmVDb250cm9sbGVyOmZ1bmN0aW9uKGUpe3JldHVy
        biB0aGlzLnVzZVJvdXRlck5hbWluZyhlKSx0aGlzLnJlc29sdmVPdGhlcihl
        KX0scmVzb2x2ZVJvdXRlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnVzZVJv
        dXRlck5hbWluZyhlKSx0aGlzLnJlc29sdmVPdGhlcihlKX0scmVzb2x2ZVZp
        ZXc6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMudXNlUm91dGVyTmFtaW5nKGUp
        LHRoaXMucmVzb2x2ZU90aGVyKGUpfSxyZXNvbHZlSGVscGVyOmZ1bmN0aW9u
        KGUpe3JldHVybiB0aGlzLnJlc29sdmVPdGhlcihlKXx8RW1iZXIuSGFuZGxl
        YmFycy5oZWxwZXJzW2UuZnVsbE5hbWVXaXRob3V0VHlwZV19LHJlc29sdmVN
        b2RlbDpmdW5jdGlvbihyKXt2YXIgbj10KHIubmFtZSksaT1lKHIucm9vdCxu
        KTtyZXR1cm4gaT9pOnZvaWQgMH0scmVzb2x2ZU90aGVyOmZ1bmN0aW9uKHIp
        e3ZhciBuPXQoci5uYW1lKSt0KHIudHlwZSksaT1lKHIucm9vdCxuKTtyZXR1
        cm4gaT9pOnZvaWQgMH0sbG9va3VwRGVzY3JpcHRpb246ZnVuY3Rpb24oZSl7
        dmFyIHI9dGhpcy5wYXJzZU5hbWUoZSk7aWYoInRlbXBsYXRlIj09PXIudHlw
        ZSlyZXR1cm4idGVtcGxhdGUgYXQgIityLmZ1bGxOYW1lV2l0aG91dFR5cGUu
        cmVwbGFjZSgvXC4vZywiLyIpO3ZhciBuPXIucm9vdCsiLiIrdChyLm5hbWUp
        O3JldHVybiJtb2RlbCIhPT1yLnR5cGUmJihuKz10KHIudHlwZSkpLG59LG1h
        a2VUb1N0cmluZzpmdW5jdGlvbihlKXtyZXR1cm4gZS50b1N0cmluZygpfX0p
        fSgpLGZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXt0aGlzLl9jb250YWluZXI9
        ZX1mdW5jdGlvbiB0KGUpe2Z1bmN0aW9uIHQoZSl7cmV0dXJuIG4ucmVzb2x2
        ZShlKX1lLmdldCgicmVzb2x2ZXIiKTt2YXIgcj1lLmdldCgicmVzb2x2ZXIi
        KXx8ZS5nZXQoIlJlc29sdmVyIil8fEVtYmVyLkRlZmF1bHRSZXNvbHZlcixu
        PXIuY3JlYXRlKHtuYW1lc3BhY2U6ZX0pO3JldHVybiB0LmRlc2NyaWJlPWZ1
        bmN0aW9uKGUpe3JldHVybiBuLmxvb2t1cERlc2NyaXB0aW9uKGUpCn0sdC5t
        YWtlVG9TdHJpbmc9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gbi5tYWtlVG9TdHJp
        bmcoZSx0KX0sdC5ub3JtYWxpemU9ZnVuY3Rpb24oZSl7cmV0dXJuIG4ubm9y
        bWFsaXplP24ubm9ybWFsaXplKGUpOmV9LHR9dmFyIHI9RW1iZXIuZ2V0LG49
        RW1iZXIuc2V0O2UuZGVwcmVjYXRlPWZ1bmN0aW9uKGUpe3JldHVybiBmdW5j
        dGlvbigpe3ZhciB0PXRoaXMuX2NvbnRhaW5lcjtyZXR1cm4gdFtlXS5hcHBs
        eSh0LGFyZ3VtZW50cyl9fSxlLnByb3RvdHlwZT17X2NvbnRhaW5lcjpudWxs
        LGxvb2t1cDplLmRlcHJlY2F0ZSgibG9va3VwIikscmVzb2x2ZTplLmRlcHJl
        Y2F0ZSgicmVzb2x2ZSIpLHJlZ2lzdGVyOmUuZGVwcmVjYXRlKCJyZWdpc3Rl
        ciIpfTt2YXIgaT1FbWJlci5BcHBsaWNhdGlvbj1FbWJlci5OYW1lc3BhY2Uu
        ZXh0ZW5kKEVtYmVyLkRlZmVycmVkTWl4aW4se3Jvb3RFbGVtZW50OiJib2R5
        IixldmVudERpc3BhdGNoZXI6bnVsbCxjdXN0b21FdmVudHM6bnVsbCxfcmVh
        ZGluZXNzRGVmZXJyYWxzOjEsaW5pdDpmdW5jdGlvbigpe2lmKHRoaXMuJHx8
        KHRoaXMuJD1FbWJlci4kKSx0aGlzLl9fY29udGFpbmVyX189dGhpcy5idWls
        ZENvbnRhaW5lcigpLHRoaXMuUm91dGVyPXRoaXMuZGVmYXVsdFJvdXRlcigp
        LHRoaXMuX3N1cGVyKCksdGhpcy5zY2hlZHVsZUluaXRpYWxpemUoKSxFbWJl
        ci5saWJyYXJpZXMucmVnaXN0ZXJDb3JlTGlicmFyeSgiSGFuZGxlYmFycyIs
        RW1iZXIuSGFuZGxlYmFycy5WRVJTSU9OKSxFbWJlci5saWJyYXJpZXMucmVn
        aXN0ZXJDb3JlTGlicmFyeSgialF1ZXJ5IixFbWJlci4kKCkuanF1ZXJ5KSxF
        bWJlci5MT0dfVkVSU0lPTil7RW1iZXIuTE9HX1ZFUlNJT049ITE7dmFyIGU9
        TWF0aC5tYXguYXBwbHkodGhpcyxFbWJlci5BKEVtYmVyLmxpYnJhcmllcyku
        bWFwQnkoIm5hbWUubGVuZ3RoIikpO0VtYmVyLmxpYnJhcmllcy5lYWNoKGZ1
        bmN0aW9uKHQpe25ldyBBcnJheShlLXQubGVuZ3RoKzEpLmpvaW4oIiAiKX0p
        fX0sYnVpbGRDb250YWluZXI6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLl9fY29u
        dGFpbmVyX189aS5idWlsZENvbnRhaW5lcih0aGlzKTtyZXR1cm4gZX0sZGVm
        YXVsdFJvdXRlcjpmdW5jdGlvbigpe2lmKHRoaXMuUm91dGVyIT09ITEpe3Zh
        ciBlPXRoaXMuX19jb250YWluZXJfXztyZXR1cm4gdGhpcy5Sb3V0ZXImJihl
        LnVucmVnaXN0ZXIoInJvdXRlcjptYWluIiksZS5yZWdpc3Rlcigicm91dGVy
        Om1haW4iLHRoaXMuUm91dGVyKSksZS5sb29rdXBGYWN0b3J5KCJyb3V0ZXI6
        bWFpbiIpfX0sc2NoZWR1bGVJbml0aWFsaXplOmZ1bmN0aW9uKCl7dmFyIGU9
        dGhpczshdGhpcy4kfHx0aGlzLiQuaXNSZWFkeT9FbWJlci5ydW4uc2NoZWR1
        bGUoImFjdGlvbnMiLGUsIl9pbml0aWFsaXplIik6dGhpcy4kKCkucmVhZHko
        ZnVuY3Rpb24oKXtFbWJlci5ydW4oZSwiX2luaXRpYWxpemUiKX0pfSxkZWZl
        clJlYWRpbmVzczpmdW5jdGlvbigpe3RoaXMuX3JlYWRpbmVzc0RlZmVycmFs
        cysrfSxhZHZhbmNlUmVhZGluZXNzOmZ1bmN0aW9uKCl7dGhpcy5fcmVhZGlu
        ZXNzRGVmZXJyYWxzLS0sMD09PXRoaXMuX3JlYWRpbmVzc0RlZmVycmFscyYm
        RW1iZXIucnVuLm9uY2UodGhpcyx0aGlzLmRpZEJlY29tZVJlYWR5KX0scmVn
        aXN0ZXI6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLl9fY29udGFpbmVyX187ZS5y
        ZWdpc3Rlci5hcHBseShlLGFyZ3VtZW50cyl9LGluamVjdDpmdW5jdGlvbigp
        e3ZhciBlPXRoaXMuX19jb250YWluZXJfXztlLmluamVjdGlvbi5hcHBseShl
        LGFyZ3VtZW50cyl9LGluaXRpYWxpemU6ZnVuY3Rpb24oKXt9LF9pbml0aWFs
        aXplOmZ1bmN0aW9uKCl7aWYoIXRoaXMuaXNEZXN0cm95ZWQpe2lmKHRoaXMu
        Um91dGVyKXt2YXIgZT10aGlzLl9fY29udGFpbmVyX187ZS51bnJlZ2lzdGVy
        KCJyb3V0ZXI6bWFpbiIpLGUucmVnaXN0ZXIoInJvdXRlcjptYWluIix0aGlz
        LlJvdXRlcil9cmV0dXJuIHRoaXMucnVuSW5pdGlhbGl6ZXJzKCksRW1iZXIu
        cnVuTG9hZEhvb2tzKCJhcHBsaWNhdGlvbiIsdGhpcyksdGhpcy5hZHZhbmNl
        UmVhZGluZXNzKCksdGhpc319LHJlc2V0OmZ1bmN0aW9uKCl7ZnVuY3Rpb24g
        ZSgpe3ZhciBlPXRoaXMuX19jb250YWluZXJfXy5sb29rdXAoInJvdXRlcjpt
        YWluIik7ZS5yZXNldCgpLEVtYmVyLnJ1bih0aGlzLl9fY29udGFpbmVyX18s
        ImRlc3Ryb3kiKSx0aGlzLmJ1aWxkQ29udGFpbmVyKCksRW1iZXIucnVuLnNj
        aGVkdWxlKCJhY3Rpb25zIix0aGlzLGZ1bmN0aW9uKCl7dGhpcy5faW5pdGlh
        bGl6ZSgpfSl9dGhpcy5fcmVhZGluZXNzRGVmZXJyYWxzPTEsRW1iZXIucnVu
        LmpvaW4odGhpcyxlKX0scnVuSW5pdGlhbGl6ZXJzOmZ1bmN0aW9uKCl7dmFy
        IGUsdCxuPXIodGhpcy5jb25zdHJ1Y3RvciwiaW5pdGlhbGl6ZXJzIiksaT10
        aGlzLl9fY29udGFpbmVyX18sbz1uZXcgRW1iZXIuREFHLGE9dGhpcztmb3Io
        ZSBpbiBuKXQ9bltlXSxvLmFkZEVkZ2VzKHQubmFtZSx0LmluaXRpYWxpemUs
        dC5iZWZvcmUsdC5hZnRlcik7by50b3Bzb3J0KGZ1bmN0aW9uKGUpe3ZhciB0
        PWUudmFsdWU7dChpLGEpfSl9LGRpZEJlY29tZVJlYWR5OmZ1bmN0aW9uKCl7
        dGhpcy5zZXR1cEV2ZW50RGlzcGF0Y2hlcigpLHRoaXMucmVhZHkoKSx0aGlz
        LnN0YXJ0Um91dGluZygpLEVtYmVyLnRlc3Rpbmd8fChFbWJlci5OYW1lc3Bh
        Y2UucHJvY2Vzc0FsbCgpLEVtYmVyLkJPT1RFRD0hMCksdGhpcy5yZXNvbHZl
        KHRoaXMpfSxzZXR1cEV2ZW50RGlzcGF0Y2hlcjpmdW5jdGlvbigpe3ZhciBl
        PXIodGhpcywiY3VzdG9tRXZlbnRzIiksdD1yKHRoaXMsInJvb3RFbGVtZW50
        IiksaT10aGlzLl9fY29udGFpbmVyX18ubG9va3VwKCJldmVudF9kaXNwYXRj
        aGVyOm1haW4iKTtuKHRoaXMsImV2ZW50RGlzcGF0Y2hlciIsaSksaS5zZXR1
        cChlLHQpfSxzdGFydFJvdXRpbmc6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLl9f
        Y29udGFpbmVyX18ubG9va3VwKCJyb3V0ZXI6bWFpbiIpO2UmJmUuc3RhcnRS
        b3V0aW5nKCl9LGhhbmRsZVVSTDpmdW5jdGlvbihlKXt2YXIgdD10aGlzLl9f
        Y29udGFpbmVyX18ubG9va3VwKCJyb3V0ZXI6bWFpbiIpO3QuaGFuZGxlVVJM
        KGUpfSxyZWFkeTpFbWJlci5LLHJlc29sdmVyOm51bGwsUmVzb2x2ZXI6bnVs
        bCx3aWxsRGVzdHJveTpmdW5jdGlvbigpe0VtYmVyLkJPT1RFRD0hMSx0aGlz
        Ll9fY29udGFpbmVyX18ubG9va3VwKCJyb3V0ZXI6bWFpbiIpLnJlc2V0KCks
        dGhpcy5fX2NvbnRhaW5lcl9fLmRlc3Ryb3koKX0saW5pdGlhbGl6ZXI6ZnVu
        Y3Rpb24oZSl7dGhpcy5jb25zdHJ1Y3Rvci5pbml0aWFsaXplcihlKX19KTtF
        bWJlci5BcHBsaWNhdGlvbi5yZW9wZW5DbGFzcyh7aW5pdGlhbGl6ZXJzOnt9
        LGluaXRpYWxpemVyOmZ1bmN0aW9uKGUpe3ZvaWQgMCE9PXRoaXMuc3VwZXJj
        bGFzcy5pbml0aWFsaXplcnMmJnRoaXMuc3VwZXJjbGFzcy5pbml0aWFsaXpl
        cnM9PT10aGlzLmluaXRpYWxpemVycyYmdGhpcy5yZW9wZW5DbGFzcyh7aW5p
        dGlhbGl6ZXJzOkVtYmVyLmNyZWF0ZSh0aGlzLmluaXRpYWxpemVycyl9KSx0
        aGlzLmluaXRpYWxpemVyc1tlLm5hbWVdPWV9LGJ1aWxkQ29udGFpbmVyOmZ1
        bmN0aW9uKHIpe3ZhciBuPW5ldyBFbWJlci5Db250YWluZXI7cmV0dXJuIEVt
        YmVyLkNvbnRhaW5lci5kZWZhdWx0Q29udGFpbmVyPW5ldyBlKG4pLG4uc2V0
        PUVtYmVyLnNldCxuLnJlc29sdmVyPXQociksbi5ub3JtYWxpemU9bi5yZXNv
        bHZlci5ub3JtYWxpemUsbi5kZXNjcmliZT1uLnJlc29sdmVyLmRlc2NyaWJl
        LG4ubWFrZVRvU3RyaW5nPW4ucmVzb2x2ZXIubWFrZVRvU3RyaW5nLG4ub3B0
        aW9uc0ZvclR5cGUoImNvbXBvbmVudCIse3NpbmdsZXRvbjohMX0pLG4ub3B0
        aW9uc0ZvclR5cGUoInZpZXciLHtzaW5nbGV0b246ITF9KSxuLm9wdGlvbnNG
        b3JUeXBlKCJ0ZW1wbGF0ZSIse2luc3RhbnRpYXRlOiExfSksbi5vcHRpb25z
        Rm9yVHlwZSgiaGVscGVyIix7aW5zdGFudGlhdGU6ITF9KSxuLnJlZ2lzdGVy
        KCJhcHBsaWNhdGlvbjptYWluIixyLHtpbnN0YW50aWF0ZTohMX0pLG4ucmVn
        aXN0ZXIoImNvbnRyb2xsZXI6YmFzaWMiLEVtYmVyLkNvbnRyb2xsZXIse2lu
        c3RhbnRpYXRlOiExfSksbi5yZWdpc3RlcigiY29udHJvbGxlcjpvYmplY3Qi
        LEVtYmVyLk9iamVjdENvbnRyb2xsZXIse2luc3RhbnRpYXRlOiExfSksbi5y
        ZWdpc3RlcigiY29udHJvbGxlcjphcnJheSIsRW1iZXIuQXJyYXlDb250cm9s
        bGVyLHtpbnN0YW50aWF0ZTohMX0pLG4ucmVnaXN0ZXIoInJvdXRlOmJhc2lj
        IixFbWJlci5Sb3V0ZSx7aW5zdGFudGlhdGU6ITF9KSxuLnJlZ2lzdGVyKCJl
        dmVudF9kaXNwYXRjaGVyOm1haW4iLEVtYmVyLkV2ZW50RGlzcGF0Y2hlciks
        bi5yZWdpc3Rlcigicm91dGVyOm1haW4iLEVtYmVyLlJvdXRlciksbi5pbmpl
        Y3Rpb24oInJvdXRlcjptYWluIiwibmFtZXNwYWNlIiwiYXBwbGljYXRpb246
        bWFpbiIpLG4ucmVnaXN0ZXIoImxvY2F0aW9uOmF1dG8iLEVtYmVyLkF1dG9M
        b2NhdGlvbiksbi5yZWdpc3RlcigibG9jYXRpb246aGFzaCIsRW1iZXIuSGFz
        aExvY2F0aW9uKSxuLnJlZ2lzdGVyKCJsb2NhdGlvbjpoaXN0b3J5IixFbWJl
        ci5IaXN0b3J5TG9jYXRpb24pLG4ucmVnaXN0ZXIoImxvY2F0aW9uOm5vbmUi
        LEVtYmVyLk5vbmVMb2NhdGlvbiksbi5pbmplY3Rpb24oImNvbnRyb2xsZXIi
        LCJ0YXJnZXQiLCJyb3V0ZXI6bWFpbiIpLG4uaW5qZWN0aW9uKCJjb250cm9s
        bGVyIiwibmFtZXNwYWNlIiwiYXBwbGljYXRpb246bWFpbiIpLG4uaW5qZWN0
        aW9uKCJyb3V0ZSIsInJvdXRlciIsInJvdXRlcjptYWluIiksbn19KSxFbWJl
        ci5ydW5Mb2FkSG9va3MoIkVtYmVyLkFwcGxpY2F0aW9uIixFbWJlci5BcHBs
        aWNhdGlvbil9KCksZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCxyKXt2YXIg
        bixpLG8sYT1bXTtmb3IoaT0wLG89ci5sZW5ndGg7bz5pO2krKyluPXJbaV0s
        LTE9PT1uLmluZGV4T2YoIjoiKSYmKG49ImNvbnRyb2xsZXI6IituKSx0Lmhh
        cyhuKXx8YS5wdXNoKG4pO2lmKGEubGVuZ3RoKXRocm93IG5ldyBFbWJlci5F
        cnJvcihFbWJlci5pbnNwZWN0KGUpKyIgbmVlZHMgWyAiK2Euam9pbigiLCAi
        KSsiIF0gYnV0ICIrKGEubGVuZ3RoPjE/InRoZXkiOiJpdCIpKyIgY291bGQg
        bm90IGJlIGZvdW5kIil9dmFyIHQ9RW1iZXIuZ2V0LHI9KEVtYmVyLnNldCxF
        bWJlci5jb21wdXRlZChmdW5jdGlvbigpe3ZhciBlPXRoaXM7cmV0dXJue25l
        ZWRzOnQoZSwibmVlZHMiKSxjb250YWluZXI6dChlLCJjb250YWluZXIiKSx1
        bmtub3duUHJvcGVydHk6ZnVuY3Rpb24odCl7dmFyIHIsbixpLG89dGhpcy5u
        ZWVkcztmb3Iobj0wLGk9by5sZW5ndGg7aT5uO24rKylpZihyPW9bbl0scj09
        PXQpcmV0dXJuIHRoaXMuY29udGFpbmVyLmxvb2t1cCgiY29udHJvbGxlcjoi
        K3QpO3ZhciBhPUVtYmVyLmluc3BlY3QoZSkrIiNuZWVkcyBkb2VzIG5vdCBp
        bmNsdWRlIGAiK3QrImAuIFRvIGFjY2VzcyB0aGUgIit0KyIgY29udHJvbGxl
        ciBmcm9tICIrRW1iZXIuaW5zcGVjdChlKSsiLCAiK0VtYmVyLmluc3BlY3Qo
        ZSkrIiBzaG91bGQgaGF2ZSBhIGBuZWVkc2AgcHJvcGVydHkgdGhhdCBpcyBh
        biBhcnJheSBvZiB0aGUgY29udHJvbGxlcnMgaXQgaGFzIGFjY2VzcyB0by4i
        O3Rocm93IG5ldyBSZWZlcmVuY2VFcnJvcihhKX0sc2V0VW5rbm93blByb3Bl
        cnR5OmZ1bmN0aW9uKHQpe3Rocm93IG5ldyBFcnJvcigiWW91IGNhbm5vdCBv
        dmVyd3JpdGUgdGhlIHZhbHVlIG9mIGBjb250cm9sbGVycy4iK3QrImAgb2Yg
        IitFbWJlci5pbnNwZWN0KGUpKX19fSkpO0VtYmVyLkNvbnRyb2xsZXJNaXhp
        bi5yZW9wZW4oe2NvbmNhdGVuYXRlZFByb3BlcnRpZXM6WyJuZWVkcyJdLG5l
        ZWRzOltdLGluaXQ6ZnVuY3Rpb24oKXt2YXIgcj10KHRoaXMsIm5lZWRzIiks
        bj10KHIsImxlbmd0aCIpO24+MCYmKHRoaXMuY29udGFpbmVyJiZlKHRoaXMs
        dGhpcy5jb250YWluZXIsciksdCh0aGlzLCJjb250cm9sbGVycyIpKSx0aGlz
        Ll9zdXBlci5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LGNvbnRyb2xsZXJGb3I6
        ZnVuY3Rpb24oZSl7cmV0dXJuIEVtYmVyLmNvbnRyb2xsZXJGb3IodCh0aGlz
        LCJjb250YWluZXIiKSxlKX0sY29udHJvbGxlcnM6cn0pfSgpLGZ1bmN0aW9u
        KCl7RW1iZXIuRGF0YUFkYXB0ZXI9RW1iZXIuT2JqZWN0LmV4dGVuZCh7aW5p
        dDpmdW5jdGlvbigpe3RoaXMuX3N1cGVyKCksdGhpcy5yZWxlYXNlTWV0aG9k
        cz1FbWJlci5BKCl9LGNvbnRhaW5lcjpudWxsLGF0dHJpYnV0ZUxpbWl0OjMs
        cmVsZWFzZU1ldGhvZHM6RW1iZXIuQSgpLGdldEZpbHRlcnM6ZnVuY3Rpb24o
        KXtyZXR1cm4gRW1iZXIuQSgpfSx3YXRjaE1vZGVsVHlwZXM6ZnVuY3Rpb24o
        ZSx0KXt2YXIgcixuPXRoaXMuZ2V0TW9kZWxUeXBlcygpLGk9dGhpcyxvPUVt
        YmVyLkEoKTtyPW4ubWFwKGZ1bmN0aW9uKGUpe3ZhciByPWkud3JhcE1vZGVs
        VHlwZShlKTtyZXR1cm4gby5wdXNoKGkub2JzZXJ2ZU1vZGVsVHlwZShlLHQp
        KSxyfSksZShyKTt2YXIgYT1mdW5jdGlvbigpe28uZm9yRWFjaChmdW5jdGlv
        bihlKXtlKCl9KSxpLnJlbGVhc2VNZXRob2RzLnJlbW92ZU9iamVjdChhKX07
        cmV0dXJuIHRoaXMucmVsZWFzZU1ldGhvZHMucHVzaE9iamVjdChhKSxhfSx3
        YXRjaFJlY29yZHM6ZnVuY3Rpb24oZSx0LHIsbil7dmFyIGksbz10aGlzLGE9
        RW1iZXIuQSgpLHM9dGhpcy5nZXRSZWNvcmRzKGUpLHU9ZnVuY3Rpb24oZSl7
        cihbZV0pfSxsPXMubWFwKGZ1bmN0aW9uKGUpe3JldHVybiBhLnB1c2goby5v
        YnNlcnZlUmVjb3JkKGUsdSkpLG8ud3JhcFJlY29yZChlKX0pLGM9ZnVuY3Rp
        b24oZSxyLGkscyl7Zm9yKHZhciBsPXI7citzPmw7bCsrKXt2YXIgYz1lLm9i
        amVjdEF0KGwpLGg9by53cmFwUmVjb3JkKGMpO2EucHVzaChvLm9ic2VydmVS
        ZWNvcmQoYyx1KSksdChbaF0pfWkmJm4ocixpKX0saD17ZGlkQ2hhbmdlOmMs
        d2lsbENoYW5nZTpFbWJlci5LfTtyZXR1cm4gcy5hZGRBcnJheU9ic2VydmVy
        KG8saCksaT1mdW5jdGlvbigpe2EuZm9yRWFjaChmdW5jdGlvbihlKXtlKCl9
        KSxzLnJlbW92ZUFycmF5T2JzZXJ2ZXIobyxoKSxvLnJlbGVhc2VNZXRob2Rz
        LnJlbW92ZU9iamVjdChpKX0sdChsKSx0aGlzLnJlbGVhc2VNZXRob2RzLnB1
        c2hPYmplY3QoaSksaX0sd2lsbERlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLl9z
        dXBlcigpLHRoaXMucmVsZWFzZU1ldGhvZHMuZm9yRWFjaChmdW5jdGlvbihl
        KXtlKCl9KX0sZGV0ZWN0OmZ1bmN0aW9uKCl7cmV0dXJuITF9LGNvbHVtbnNG
        b3JUeXBlOmZ1bmN0aW9uKCl7cmV0dXJuIEVtYmVyLkEoKX0sb2JzZXJ2ZU1v
        ZGVsVHlwZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXMsbj10aGlzLmdldFJl
        Y29yZHMoZSksaT1mdW5jdGlvbigpe3QoW3Iud3JhcE1vZGVsVHlwZShlKV0p
        fSxvPXtkaWRDaGFuZ2U6ZnVuY3Rpb24oKXtFbWJlci5ydW4uc2NoZWR1bGVP
        bmNlKCJhY3Rpb25zIix0aGlzLGkpfSx3aWxsQ2hhbmdlOkVtYmVyLkt9O24u
        YWRkQXJyYXlPYnNlcnZlcih0aGlzLG8pO3ZhciBhPWZ1bmN0aW9uKCl7bi5y
        ZW1vdmVBcnJheU9ic2VydmVyKHIsbyl9O3JldHVybiBhfSx3cmFwTW9kZWxU
        eXBlOmZ1bmN0aW9uKGUpe3ZhciB0LHI9dGhpcy5nZXRSZWNvcmRzKGUpO3Jl
        dHVybiB0PXtuYW1lOmUudG9TdHJpbmcoKSxjb3VudDpFbWJlci5nZXQociwi
        bGVuZ3RoIiksY29sdW1uczp0aGlzLmNvbHVtbnNGb3JUeXBlKGUpLG9iamVj
        dDplfX0sZ2V0TW9kZWxUeXBlczpmdW5jdGlvbigpe3ZhciBlPUVtYmVyLkEo
        RW1iZXIuTmFtZXNwYWNlLk5BTUVTUEFDRVMpLHQ9RW1iZXIuQSgpLHI9dGhp
        cztyZXR1cm4gZS5mb3JFYWNoKGZ1bmN0aW9uKGUpe2Zvcih2YXIgbiBpbiBl
        KWlmKGUuaGFzT3duUHJvcGVydHkobikpe3ZhciBpPWVbbl07ci5kZXRlY3Qo
        aSkmJnQucHVzaChpKX19KSx0fSxnZXRSZWNvcmRzOmZ1bmN0aW9uKCl7cmV0
        dXJuIEVtYmVyLkEoKX0sd3JhcFJlY29yZDpmdW5jdGlvbihlKXt2YXIgdD17
        b2JqZWN0OmV9O3JldHVybiB0LmNvbHVtblZhbHVlcz10aGlzLmdldFJlY29y
        ZENvbHVtblZhbHVlcyhlKSx0LnNlYXJjaEtleXdvcmRzPXRoaXMuZ2V0UmVj
        b3JkS2V5d29yZHMoZSksdC5maWx0ZXJWYWx1ZXM9dGhpcy5nZXRSZWNvcmRG
        aWx0ZXJWYWx1ZXMoZSksdC5jb2xvcj10aGlzLmdldFJlY29yZENvbG9yKGUp
        LHR9LGdldFJlY29yZENvbHVtblZhbHVlczpmdW5jdGlvbigpe3JldHVybnt9
        fSxnZXRSZWNvcmRLZXl3b3JkczpmdW5jdGlvbigpe3JldHVybiBFbWJlci5B
        KCl9LGdldFJlY29yZEZpbHRlclZhbHVlczpmdW5jdGlvbigpe3JldHVybnt9
        fSxnZXRSZWNvcmRDb2xvcjpmdW5jdGlvbigpe3JldHVybiBudWxsfSxvYnNl
        cnZlUmVjb3JkOmZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKCl7fX19KX0o
        KX0oKSwidW5kZWZpbmVkIj09dHlwZW9mIGxvY2F0aW9ufHwibG9jYWxob3N0
        IiE9PWxvY2F0aW9uLmhvc3RuYW1lJiYiMTI3LjAuMC4xIiE9PWxvY2F0aW9u
        Lmhvc3RuYW1lfHxFbWJlci5Mb2dnZXIud2FybigiWW91IGFyZSBydW5uaW5n
        IGEgcHJvZHVjdGlvbiBidWlsZCBvZiBFbWJlciBvbiBsb2NhbGhvc3QgYW5k
        IHdvbid0IHJlY2VpdmUgZGV0YWlsZWQgZXJyb3IgbWVzc2FnZXMuIElmIHlv
        dSB3YW50IGZ1bGwgZXJyb3IgbWVzc2FnZXMgcGxlYXNlIHVzZSB0aGUgbm9u
        LW1pbmlmaWVkIGJ1aWxkIHByb3ZpZGVkIG9uIHRoZSBFbWJlciB3ZWJzaXRl
        LiIpOw==
    http_version: 
  recorded_at: Mon, 17 Feb 2014 11:45:34 GMT
recorded_with: VCR 2.8.0
