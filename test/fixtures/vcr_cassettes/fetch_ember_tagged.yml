---
http_interactions:
- request:
    method: get
    uri: http://builds.emberjs.com/tags/v1.2.0-beta.2/ember.js
    body:
      encoding: US-ASCII
      string: ''
    headers:
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - '*/*'
      User-Agent:
      - Ruby
      Host:
      - builds.emberjs.com
  response:
    status:
      code: 200
      message: OK
    headers:
      X-Amz-Id-2:
      - JpL0wehmmVBX0GYT3Ygoct9D0BWkmzr4eWtf8yj5nbkMfd1/IYFG6RYJ36ELogND
      X-Amz-Request-Id:
      - 6B86712432E590F7
      Date:
      - Mon, 17 Feb 2014 11:45:15 GMT
      Last-Modified:
      - Fri, 25 Oct 2013 21:13:11 GMT
      Etag:
      - '"137ea6a85a9e1b4d15b7fbaafff9aa35"'
      Content-Type:
      - text/javascript
      Content-Length:
      - '1076657'
      Server:
      - AmazonS3
    body:
      encoding: ASCII-8BIT
      string: !binary |-
        Ly8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
        PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KLy8gUHJvamVjdDog
        ICBFbWJlciAtIEphdmFTY3JpcHQgQXBwbGljYXRpb24gRnJhbWV3b3JrCi8v
        IENvcHlyaWdodDogQ29weXJpZ2h0IDIwMTEtMjAxMyBUaWxkZSBJbmMuIGFu
        ZCBjb250cmlidXRvcnMKLy8gICAgICAgICAgICBQb3J0aW9ucyBDb3B5cmln
        aHQgMjAwNi0yMDExIFN0cm9iZSBJbmMuCi8vICAgICAgICAgICAgUG9ydGlv
        bnMgQ29weXJpZ2h0IDIwMDgtMjAxMSBBcHBsZSBJbmMuIEFsbCByaWdodHMg
        cmVzZXJ2ZWQuCi8vIExpY2Vuc2U6ICAgTGljZW5zZWQgdW5kZXIgTUlUIGxp
        Y2Vuc2UKLy8gICAgICAgICAgICBTZWUgaHR0cHM6Ly9yYXcuZ2l0aHViLmNv
        bS9lbWJlcmpzL2VtYmVyLmpzL21hc3Rlci9MSUNFTlNFCi8vID09PT09PT09
        PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
        PT09PT09PT09PT09PT09PT09PT09CgoKIC8vIFZlcnNpb246IDEuMi4wLWJl
        dGEuMgoKKGZ1bmN0aW9uKCkgewovKmdsb2JhbCBfX2ZhaWxfXyovCgovKioK
        RW1iZXIgRGVidWcKCkBtb2R1bGUgZW1iZXIKQHN1Ym1vZHVsZSBlbWJlci1k
        ZWJ1ZwoqLwoKLyoqCkBjbGFzcyBFbWJlcgoqLwoKaWYgKCd1bmRlZmluZWQn
        ID09PSB0eXBlb2YgRW1iZXIpIHsKICBFbWJlciA9IHt9OwoKICBpZiAoJ3Vu
        ZGVmaW5lZCcgIT09IHR5cGVvZiB3aW5kb3cpIHsKICAgIHdpbmRvdy5FbSA9
        IHdpbmRvdy5FbWJlciA9IEVtID0gRW1iZXI7CiAgfQp9CgpFbWJlci5FTlYg
        PSAndW5kZWZpbmVkJyA9PT0gdHlwZW9mIEVOViA/IHt9IDogRU5WOwoKaWYg
        KCEoJ01BTkRBVE9SWV9TRVRURVInIGluIEVtYmVyLkVOVikpIHsKICBFbWJl
        ci5FTlYuTUFOREFUT1JZX1NFVFRFUiA9IHRydWU7IC8vIGRlZmF1bHQgdG8g
        dHJ1ZSBmb3IgZGVidWcgZGlzdAp9CgovKioKICBEZWZpbmUgYW4gYXNzZXJ0
        aW9uIHRoYXQgd2lsbCB0aHJvdyBhbiBleGNlcHRpb24gaWYgdGhlIGNvbmRp
        dGlvbiBpcyBub3QKICBtZXQuIEVtYmVyIGJ1aWxkIHRvb2xzIHdpbGwgcmVt
        b3ZlIGFueSBjYWxscyB0byBgRW1iZXIuYXNzZXJ0KClgIHdoZW4KICBkb2lu
        ZyBhIHByb2R1Y3Rpb24gYnVpbGQuIEV4YW1wbGU6CgogIGBgYGphdmFzY3Jp
        cHQKICAvLyBUZXN0IGZvciB0cnV0aGluZXNzCiAgRW1iZXIuYXNzZXJ0KCdN
        dXN0IHBhc3MgYSB2YWxpZCBvYmplY3QnLCBvYmopOwogIC8vIEZhaWwgdW5j
        b25kaXRpb25hbGx5CiAgRW1iZXIuYXNzZXJ0KCdUaGlzIGNvZGUgcGF0aCBz
        aG91bGQgbmV2ZXIgYmUgcnVuJykKICBgYGAKCiAgQG1ldGhvZCBhc3NlcnQK
        ICBAcGFyYW0ge1N0cmluZ30gZGVzYyBBIGRlc2NyaXB0aW9uIG9mIHRoZSBh
        c3NlcnRpb24uIFRoaXMgd2lsbCBiZWNvbWUKICAgIHRoZSB0ZXh0IG9mIHRo
        ZSBFcnJvciB0aHJvd24gaWYgdGhlIGFzc2VydGlvbiBmYWlscy4KICBAcGFy
        YW0ge0Jvb2xlYW59IHRlc3QgTXVzdCBiZSB0cnV0aHkgZm9yIHRoZSBhc3Nl
        cnRpb24gdG8gcGFzcy4gSWYKICAgIGZhbHN5LCBhbiBleGNlcHRpb24gd2ls
        bCBiZSB0aHJvd24uCiovCkVtYmVyLmFzc2VydCA9IGZ1bmN0aW9uKGRlc2Ms
        IHRlc3QpIHsKICBpZiAoIXRlc3QpIHsKICAgIEVtYmVyLkxvZ2dlci5hc3Nl
        cnQodGVzdCwgZGVzYyk7CiAgfQoKICBpZiAoRW1iZXIudGVzdGluZyAmJiAh
        dGVzdCkgewogICAgLy8gd2hlbiB0ZXN0aW5nLCBlbnN1cmUgdGVzdCBmYWls
        dXJlcyB3aGVuIGFzc2VydGlvbnMgZmFpbAogICAgdGhyb3cgbmV3IEVtYmVy
        LkVycm9yKCJBc3NlcnRpb24gRmFpbGVkOiAiICsgZGVzYyk7CiAgfQp9OwoK
        Ci8qKgogIERpc3BsYXkgYSB3YXJuaW5nIHdpdGggdGhlIHByb3ZpZGVkIG1l
        c3NhZ2UuIEVtYmVyIGJ1aWxkIHRvb2xzIHdpbGwKICByZW1vdmUgYW55IGNh
        bGxzIHRvIGBFbWJlci53YXJuKClgIHdoZW4gZG9pbmcgYSBwcm9kdWN0aW9u
        IGJ1aWxkLgoKICBAbWV0aG9kIHdhcm4KICBAcGFyYW0ge1N0cmluZ30gbWVz
        c2FnZSBBIHdhcm5pbmcgdG8gZGlzcGxheS4KICBAcGFyYW0ge0Jvb2xlYW59
        IHRlc3QgQW4gb3B0aW9uYWwgYm9vbGVhbi4gSWYgZmFsc3ksIHRoZSB3YXJu
        aW5nCiAgICB3aWxsIGJlIGRpc3BsYXllZC4KKi8KRW1iZXIud2FybiA9IGZ1
        bmN0aW9uKG1lc3NhZ2UsIHRlc3QpIHsKICBpZiAoIXRlc3QpIHsKICAgIEVt
        YmVyLkxvZ2dlci53YXJuKCJXQVJOSU5HOiAiK21lc3NhZ2UpOwogICAgaWYg
        KCd0cmFjZScgaW4gRW1iZXIuTG9nZ2VyKSBFbWJlci5Mb2dnZXIudHJhY2Uo
        KTsKICB9Cn07CgovKioKICBEaXNwbGF5IGEgZGVidWcgbm90aWNlLiBFbWJl
        ciBidWlsZCB0b29scyB3aWxsIHJlbW92ZSBhbnkgY2FsbHMgdG8KICBgRW1i
        ZXIuZGVidWcoKWAgd2hlbiBkb2luZyBhIHByb2R1Y3Rpb24gYnVpbGQuCgog
        IGBgYGphdmFzY3JpcHQKICBFbWJlci5kZWJ1ZygiSSdtIGEgZGVidWcgbm90
        aWNlISIpOwogIGBgYAoKICBAbWV0aG9kIGRlYnVnCiAgQHBhcmFtIHtTdHJp
        bmd9IG1lc3NhZ2UgQSBkZWJ1ZyBtZXNzYWdlIHRvIGRpc3BsYXkuCiovCkVt
        YmVyLmRlYnVnID0gZnVuY3Rpb24obWVzc2FnZSkgewogIEVtYmVyLkxvZ2dl
        ci5kZWJ1ZygiREVCVUc6ICIrbWVzc2FnZSk7Cn07CgovKioKICBEaXNwbGF5
        IGEgZGVwcmVjYXRpb24gd2FybmluZyB3aXRoIHRoZSBwcm92aWRlZCBtZXNz
        YWdlIGFuZCBhIHN0YWNrIHRyYWNlCiAgKENocm9tZSBhbmQgRmlyZWZveCBv
        bmx5KS4gRW1iZXIgYnVpbGQgdG9vbHMgd2lsbCByZW1vdmUgYW55IGNhbGxz
        IHRvCiAgYEVtYmVyLmRlcHJlY2F0ZSgpYCB3aGVuIGRvaW5nIGEgcHJvZHVj
        dGlvbiBidWlsZC4KCiAgQG1ldGhvZCBkZXByZWNhdGUKICBAcGFyYW0ge1N0
        cmluZ30gbWVzc2FnZSBBIGRlc2NyaXB0aW9uIG9mIHRoZSBkZXByZWNhdGlv
        bi4KICBAcGFyYW0ge0Jvb2xlYW59IHRlc3QgQW4gb3B0aW9uYWwgYm9vbGVh
        bi4gSWYgZmFsc3ksIHRoZSBkZXByZWNhdGlvbgogICAgd2lsbCBiZSBkaXNw
        bGF5ZWQuCiovCkVtYmVyLmRlcHJlY2F0ZSA9IGZ1bmN0aW9uKG1lc3NhZ2Us
        IHRlc3QpIHsKICBpZiAoRW1iZXIuVEVTVElOR19ERVBSRUNBVElPTikgeyBy
        ZXR1cm47IH0KCiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDEpIHsgdGVz
        dCA9IGZhbHNlOyB9CiAgaWYgKHRlc3QpIHsgcmV0dXJuOyB9CgogIGlmIChF
        bWJlci5FTlYuUkFJU0VfT05fREVQUkVDQVRJT04pIHsgdGhyb3cgbmV3IEVt
        YmVyLkVycm9yKG1lc3NhZ2UpOyB9CgogIHZhciBlcnJvcjsKCiAgLy8gV2hl
        biB1c2luZyBuZXcgRXJyb3IsIHdlIGNhbid0IGRvIHRoZSBhcmd1bWVudHMg
        Y2hlY2sgZm9yIENocm9tZS4gQWx0ZXJuYXRpdmVzIGFyZSB3ZWxjb21lCiAg
        dHJ5IHsgX19mYWlsX18uZmFpbCgpOyB9IGNhdGNoIChlKSB7IGVycm9yID0g
        ZTsgfQoKICBpZiAoRW1iZXIuTE9HX1NUQUNLVFJBQ0VfT05fREVQUkVDQVRJ
        T04gJiYgZXJyb3Iuc3RhY2spIHsKICAgIHZhciBzdGFjaywgc3RhY2tTdHIg
        PSAnJzsKICAgIGlmIChlcnJvclsnYXJndW1lbnRzJ10pIHsKICAgICAgLy8g
        Q2hyb21lCiAgICAgIHN0YWNrID0gZXJyb3Iuc3RhY2sucmVwbGFjZSgvXlxz
        K2F0XHMrL2dtLCAnJykuCiAgICAgICAgICAgICAgICAgICAgICAgICAgcmVw
        bGFjZSgvXihbXlwoXSs/KShbXG4kXSkvZ20sICd7YW5vbnltb3VzfSgkMSkk
        MicpLgogICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGxhY2UoL15PYmpl
        Y3QuPGFub255bW91cz5ccypcKChbXlwpXSspXCkvZ20sICd7YW5vbnltb3Vz
        fSgkMSknKS5zcGxpdCgnXG4nKTsKICAgICAgc3RhY2suc2hpZnQoKTsKICAg
        IH0gZWxzZSB7CiAgICAgIC8vIEZpcmVmb3gKICAgICAgc3RhY2sgPSBlcnJv
        ci5zdGFjay5yZXBsYWNlKC8oPzpcbkA6MCk/XHMrJC9tLCAnJykuCiAgICAg
        ICAgICAgICAgICAgICAgICAgICAgcmVwbGFjZSgvXlwoL2dtLCAne2Fub255
        bW91c30oJykuc3BsaXQoJ1xuJyk7CiAgICB9CgogICAgc3RhY2tTdHIgPSAi
        XG4gICAgIiArIHN0YWNrLnNsaWNlKDIpLmpvaW4oIlxuICAgICIpOwogICAg
        bWVzc2FnZSA9IG1lc3NhZ2UgKyBzdGFja1N0cjsKICB9CgogIEVtYmVyLkxv
        Z2dlci53YXJuKCJERVBSRUNBVElPTjogIittZXNzYWdlKTsKfTsKCgoKLyoq
        CiAgQWxpYXMgYW4gb2xkLCBkZXByZWNhdGVkIG1ldGhvZCB3aXRoIGl0cyBu
        ZXcgY291bnRlcnBhcnQuCgogIERpc3BsYXkgYSBkZXByZWNhdGlvbiB3YXJu
        aW5nIHdpdGggdGhlIHByb3ZpZGVkIG1lc3NhZ2UgYW5kIGEgc3RhY2sgdHJh
        Y2UKICAoQ2hyb21lIGFuZCBGaXJlZm94IG9ubHkpIHdoZW4gdGhlIGFzc2ln
        bmVkIG1ldGhvZCBpcyBjYWxsZWQuCgogIEVtYmVyIGJ1aWxkIHRvb2xzIHdp
        bGwgbm90IHJlbW92ZSBjYWxscyB0byBgRW1iZXIuZGVwcmVjYXRlRnVuYygp
        YCwgdGhvdWdoCiAgbm8gd2FybmluZ3Mgd2lsbCBiZSBzaG93biBpbiBwcm9k
        dWN0aW9uLgoKICBgYGBqYXZhc2NyaXB0CiAgRW1iZXIub2xkTWV0aG9kID0g
        RW1iZXIuZGVwcmVjYXRlRnVuYygiUGxlYXNlIHVzZSB0aGUgbmV3LCB1cGRh
        dGVkIG1ldGhvZCIsIEVtYmVyLm5ld01ldGhvZCk7CiAgYGBgCgogIEBtZXRo
        b2QgZGVwcmVjYXRlRnVuYwogIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlIEEg
        ZGVzY3JpcHRpb24gb2YgdGhlIGRlcHJlY2F0aW9uLgogIEBwYXJhbSB7RnVu
        Y3Rpb259IGZ1bmMgVGhlIG5ldyBmdW5jdGlvbiBjYWxsZWQgdG8gcmVwbGFj
        ZSBpdHMgZGVwcmVjYXRlZCBjb3VudGVycGFydC4KICBAcmV0dXJuIHtGdW5j
        dGlvbn0gYSBuZXcgZnVuY3Rpb24gdGhhdCB3cmFwcGVkIHRoZSBvcmlnaW5h
        bCBmdW5jdGlvbiB3aXRoIGEgZGVwcmVjYXRpb24gd2FybmluZwoqLwpFbWJl
        ci5kZXByZWNhdGVGdW5jID0gZnVuY3Rpb24obWVzc2FnZSwgZnVuYykgewog
        IHJldHVybiBmdW5jdGlvbigpIHsKICAgIEVtYmVyLmRlcHJlY2F0ZShtZXNz
        YWdlKTsKICAgIHJldHVybiBmdW5jLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7
        CiAgfTsKfTsKCgovLyBJbmZvcm0gdGhlIGRldmVsb3BlciBhYm91dCB0aGUg
        RW1iZXIgSW5zcGVjdG9yIGlmIG5vdCBpbnN0YWxsZWQuCmlmICghRW1iZXIu
        dGVzdGluZykgewogIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVk
        JyAmJiB3aW5kb3cuY2hyb21lICYmIHdpbmRvdy5hZGRFdmVudExpc3RlbmVy
        KSB7CiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigibG9hZCIsIGZ1bmN0
        aW9uKCkgewogICAgICBpZiAoZG9jdW1lbnQuYm9keSAmJiBkb2N1bWVudC5i
        b2R5LmRhdGFzZXQgJiYgIWRvY3VtZW50LmJvZHkuZGF0YXNldC5lbWJlckV4
        dGVuc2lvbikgewogICAgICAgIEVtYmVyLmRlYnVnKCdGb3IgbW9yZSBhZHZh
        bmNlZCBkZWJ1Z2dpbmcsIGluc3RhbGwgdGhlIEVtYmVyIEluc3BlY3RvciBm
        cm9tIGh0dHBzOi8vY2hyb21lLmdvb2dsZS5jb20vd2Vic3RvcmUvZGV0YWls
        L2VtYmVyLWluc3BlY3Rvci9ibWRibG5jZWdrZW5rYWNpZWloZmhwamZwcG9j
        b25oaScpOwogICAgICB9CiAgICB9LCBmYWxzZSk7CiAgfQp9Cgp9KSgpOwoK
        Ly8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
        PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KLy8gUHJvamVjdDog
        ICBFbWJlciAtIEphdmFTY3JpcHQgQXBwbGljYXRpb24gRnJhbWV3b3JrCi8v
        IENvcHlyaWdodDogQ29weXJpZ2h0IDIwMTEtMjAxMyBUaWxkZSBJbmMuIGFu
        ZCBjb250cmlidXRvcnMKLy8gICAgICAgICAgICBQb3J0aW9ucyBDb3B5cmln
        aHQgMjAwNi0yMDExIFN0cm9iZSBJbmMuCi8vICAgICAgICAgICAgUG9ydGlv
        bnMgQ29weXJpZ2h0IDIwMDgtMjAxMSBBcHBsZSBJbmMuIEFsbCByaWdodHMg
        cmVzZXJ2ZWQuCi8vIExpY2Vuc2U6ICAgTGljZW5zZWQgdW5kZXIgTUlUIGxp
        Y2Vuc2UKLy8gICAgICAgICAgICBTZWUgaHR0cHM6Ly9yYXcuZ2l0aHViLmNv
        bS9lbWJlcmpzL2VtYmVyLmpzL21hc3Rlci9MSUNFTlNFCi8vID09PT09PT09
        PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
        PT09PT09PT09PT09PT09PT09PT09CgoKIC8vIFZlcnNpb246IDEuMi4wLWJl
        dGEuMgoKKGZ1bmN0aW9uKCkgewp2YXIgZGVmaW5lLCByZXF1aXJlTW9kdWxl
        OwoKKGZ1bmN0aW9uKCkgewogIHZhciByZWdpc3RyeSA9IHt9LCBzZWVuID0g
        e307CgogIGRlZmluZSA9IGZ1bmN0aW9uKG5hbWUsIGRlcHMsIGNhbGxiYWNr
        KSB7CiAgICByZWdpc3RyeVtuYW1lXSA9IHsgZGVwczogZGVwcywgY2FsbGJh
        Y2s6IGNhbGxiYWNrIH07CiAgfTsKCiAgcmVxdWlyZU1vZHVsZSA9IGZ1bmN0
        aW9uKG5hbWUpIHsKICAgIGlmIChzZWVuW25hbWVdKSB7IHJldHVybiBzZWVu
        W25hbWVdOyB9CiAgICBzZWVuW25hbWVdID0ge307CgogICAgdmFyIG1vZCwg
        ZGVwcywgY2FsbGJhY2ssIHJlaWZpZWQsIGV4cG9ydHM7CgogICAgbW9kID0g
        cmVnaXN0cnlbbmFtZV07CgogICAgaWYgKCFtb2QpIHsKICAgICAgdGhyb3cg
        bmV3IEVycm9yKCJNb2R1bGUgJyIgKyBuYW1lICsgIicgbm90IGZvdW5kLiIp
        OwogICAgfQoKICAgIGRlcHMgPSBtb2QuZGVwczsKICAgIGNhbGxiYWNrID0g
        bW9kLmNhbGxiYWNrOwogICAgcmVpZmllZCA9IFtdOwoKICAgIGZvciAodmFy
        IGk9MCwgbD1kZXBzLmxlbmd0aDsgaTxsOyBpKyspIHsKICAgICAgaWYgKGRl
        cHNbaV0gPT09ICdleHBvcnRzJykgewogICAgICAgIHJlaWZpZWQucHVzaChl
        eHBvcnRzID0ge30pOwogICAgICB9IGVsc2UgewogICAgICAgIHJlaWZpZWQu
        cHVzaChyZXF1aXJlTW9kdWxlKGRlcHNbaV0pKTsKICAgICAgfQogICAgfQoK
        ICAgIHZhciB2YWx1ZSA9IGNhbGxiYWNrLmFwcGx5KHRoaXMsIHJlaWZpZWQp
        OwogICAgcmV0dXJuIHNlZW5bbmFtZV0gPSBleHBvcnRzIHx8IHZhbHVlOwog
        IH07Cn0pKCk7CihmdW5jdGlvbigpIHsKLypnbG9iYWxzIEVtOnRydWUgRU5W
        ICovCgovKioKQG1vZHVsZSBlbWJlcgpAc3VibW9kdWxlIGVtYmVyLW1ldGFs
        CiovCgovKioKICBBbGwgRW1iZXIgbWV0aG9kcyBhbmQgZnVuY3Rpb25zIGFy
        ZSBkZWZpbmVkIGluc2lkZSBvZiB0aGlzIG5hbWVzcGFjZS4gWW91CiAgZ2Vu
        ZXJhbGx5IHNob3VsZCBub3QgYWRkIG5ldyBwcm9wZXJ0aWVzIHRvIHRoaXMg
        bmFtZXNwYWNlIGFzIGl0IG1heSBiZQogIG92ZXJ3cml0dGVuIGJ5IGZ1dHVy
        ZSB2ZXJzaW9ucyBvZiBFbWJlci4KCiAgWW91IGNhbiBhbHNvIHVzZSB0aGUg
        c2hvcnRoYW5kIGBFbWAgaW5zdGVhZCBvZiBgRW1iZXJgLgoKICBFbWJlci1S
        dW50aW1lIGlzIGEgZnJhbWV3b3JrIHRoYXQgcHJvdmlkZXMgY29yZSBmdW5j
        dGlvbnMgZm9yIEVtYmVyIGluY2x1ZGluZwogIGNyb3NzLXBsYXRmb3JtIGZ1
        bmN0aW9ucywgc3VwcG9ydCBmb3IgcHJvcGVydHkgb2JzZXJ2aW5nIGFuZCBv
        YmplY3RzLiBJdHMKICBmb2N1cyBpcyBvbiBzbWFsbCBzaXplIGFuZCBwZXJm
        b3JtYW5jZS4gWW91IGNhbiB1c2UgdGhpcyBpbiBwbGFjZSBvZiBvcgogIGFs
        b25nLXNpZGUgb3RoZXIgY3Jvc3MtcGxhdGZvcm0gbGlicmFyaWVzIHN1Y2gg
        YXMgalF1ZXJ5LgoKICBUaGUgY29yZSBSdW50aW1lIGZyYW1ld29yayBpcyBi
        YXNlZCBvbiB0aGUgalF1ZXJ5IEFQSSB3aXRoIGEgbnVtYmVyIG9mCiAgcGVy
        Zm9ybWFuY2Ugb3B0aW1pemF0aW9ucy4KCiAgQGNsYXNzIEVtYmVyCiAgQHN0
        YXRpYwogIEB2ZXJzaW9uIDEuMi4wLWJldGEuMgoqLwoKaWYgKCd1bmRlZmlu
        ZWQnID09PSB0eXBlb2YgRW1iZXIpIHsKICAvLyBDcmVhdGUgY29yZSBvYmpl
        Y3QuIE1ha2UgaXQgYWN0IGxpa2UgYW4gaW5zdGFuY2Ugb2YgRW1iZXIuTmFt
        ZXNwYWNlIHNvIHRoYXQKICAvLyBvYmplY3RzIGFzc2lnbmVkIHRvIGl0IGFy
        ZSBnaXZlbiBhIHNhbmUgc3RyaW5nIHJlcHJlc2VudGF0aW9uLgogIEVtYmVy
        ID0ge307Cn0KCi8vIERlZmF1bHQgaW1wb3J0cywgZXhwb3J0cyBhbmQgbG9v
        a3VwIHRvIHRoZSBnbG9iYWwgb2JqZWN0Owp2YXIgaW1wb3J0cyA9IEVtYmVy
        LmltcG9ydHMgPSBFbWJlci5pbXBvcnRzIHx8IHRoaXM7CnZhciBleHBvcnRz
        ID0gRW1iZXIuZXhwb3J0cyA9IEVtYmVyLmV4cG9ydHMgfHwgdGhpczsKdmFy
        IGxvb2t1cCAgPSBFbWJlci5sb29rdXAgID0gRW1iZXIubG9va3VwICB8fCB0
        aGlzOwoKLy8gYWxpYXNlcyBuZWVkZWQgdG8ga2VlcCBtaW5pZmllcnMgZnJv
        bSByZW1vdmluZyB0aGUgZ2xvYmFsIGNvbnRleHQKZXhwb3J0cy5FbSA9IGV4
        cG9ydHMuRW1iZXIgPSBFbSA9IEVtYmVyOwoKLy8gTWFrZSBzdXJlIHRoZXNl
        IGFyZSBzZXQgd2hldGhlciBFbWJlciB3YXMgYWxyZWFkeSBkZWZpbmVkIG9y
        IG5vdAoKRW1iZXIuaXNOYW1lc3BhY2UgPSB0cnVlOwoKRW1iZXIudG9TdHJp
        bmcgPSBmdW5jdGlvbigpIHsgcmV0dXJuICJFbWJlciI7IH07CgoKLyoqCiAg
        QHByb3BlcnR5IFZFUlNJT04KICBAdHlwZSBTdHJpbmcKICBAZGVmYXVsdCAn
        MS4yLjAtYmV0YS4yJwogIEBmaW5hbAoqLwpFbWJlci5WRVJTSU9OID0gJzEu
        Mi4wLWJldGEuMic7CgovKioKICBTdGFuZGFyZCBlbnZpcm9ubWVudGFsIHZh
        cmlhYmxlcy4gWW91IGNhbiBkZWZpbmUgdGhlc2UgaW4gYSBnbG9iYWwgYEVO
        VmAKICB2YXJpYWJsZSBiZWZvcmUgbG9hZGluZyBFbWJlciB0byBjb250cm9s
        IHZhcmlvdXMgY29uZmlndXJhdGlvbgogIHNldHRpbmdzLgoKICBAcHJvcGVy
        dHkgRU5WCiAgQHR5cGUgSGFzaAoqLwoKaWYgKCd1bmRlZmluZWQnID09PSB0
        eXBlb2YgRU5WKSB7CiAgZXhwb3J0cy5FTlYgPSB7fTsKfQoKLy8gV2UgZGlz
        YWJsZSB0aGUgUkFOR0UgQVBJIGJ5IGRlZmF1bHQgZm9yIHBlcmZvcm1hbmNl
        IHJlYXNvbnMKaWYgKCd1bmRlZmluZWQnID09PSB0eXBlb2YgRU5WLkRJU0FC
        TEVfUkFOR0VfQVBJKSB7CiAgRU5WLkRJU0FCTEVfUkFOR0VfQVBJID0gdHJ1
        ZTsKfQoKCkVtYmVyLkVOViA9IEVtYmVyLkVOViB8fCBFTlY7CgpFbWJlci5j
        b25maWcgPSBFbWJlci5jb25maWcgfHwge307CgovKioKICBIYXNoIG9mIGVu
        YWJsZWQgQ2FuYXJ5IGZlYXR1cmVzLiBBZGQgdG8gYmVmb3JlIGNyZWF0aW5n
        IHlvdXIgYXBwbGljYXRpb24uCgogIFlvdSBjYW4gYWxzbyBkZWZpbmUgYEVO
        Vi5GRUFUVVJFU2AgaWYgeW91IG5lZWQgdG8gZW5hYmxlIGZlYXR1cmVzIGZs
        YWdnZWQgYXQgcnVudGltZS4KCiAgQHByb3BlcnR5IEZFQVRVUkVTCiAgQHR5
        cGUgSGFzaAoqLwoKRW1iZXIuRkVBVFVSRVMgPSBFbWJlci5FTlYuRkVBVFVS
        RVMgfHwge307CgovKioKICBUZXN0IHRoYXQgYSBmZWF0dXJlIGlzIGVuYWJs
        ZWQuIFBhcnNlZCBieSBFbWJlcidzIGJ1aWxkIHRvb2xzIHRvIGxlYXZlCiAg
        ZXhwZXJpbWVudGFsIGZlYXR1cmVzIG91dCBvZiBiZXRhL3N0YWJsZSBidWls
        ZHMuCgogIFlvdSBjYW4gZGVmaW5lIHRoZSBmb2xsb3dpbmcgY29uZmlndXJh
        dGlvbiBvcHRpb25zOgoKICAqIGBFTlYuRU5BQkxFX0FMTF9GRUFUVVJFU2Ag
        LSBmb3JjZSBhbGwgZmVhdHVyZXMgdG8gYmUgZW5hYmxlZC4KICAqIGBFTlYu
        RU5BQkxFX09QVElPTkFMX0ZFQVRVUkVTYCAtIGVuYWJsZSBhbnkgZmVhdHVy
        ZXMgdGhhdCBoYXZlIG5vdCBiZWVuIGV4cGxpY2l0bHkKICAgIGVuYWJsZWQv
        ZGlzYWJsZWQuCgogIEBtZXRob2QgaXNFbmFibGVkCiAgQHBhcmFtIHtzdHJp
        bmd9IGZlYXR1cmUKKi8KCkVtYmVyLkZFQVRVUkVTLmlzRW5hYmxlZCA9IGZ1
        bmN0aW9uKGZlYXR1cmUpIHsKICB2YXIgZmVhdHVyZVZhbHVlID0gRW1iZXIu
        RkVBVFVSRVNbZmVhdHVyZV07CgogIGlmIChFbWJlci5FTlYuRU5BQkxFX0FM
        TF9GRUFUVVJFUykgewogICAgcmV0dXJuIHRydWU7CiAgfSBlbHNlIGlmIChm
        ZWF0dXJlVmFsdWUgPT09IHRydWUgfHwgZmVhdHVyZVZhbHVlID09PSBmYWxz
        ZSB8fCBmZWF0dXJlVmFsdWUgPT09IHVuZGVmaW5lZCkgewogICAgcmV0dXJu
        IGZlYXR1cmVWYWx1ZTsKICB9IGVsc2UgaWYgKEVtYmVyLkVOVi5FTkFCTEVf
        T1BUSU9OQUxfRkVBVFVSRVMpIHsKICAgIHJldHVybiB0cnVlOwogIH0gZWxz
        ZSB7CiAgICByZXR1cm4gZmFsc2U7CiAgfQp9OwoKLy8gLi4uLi4uLi4uLi4u
        Li4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4u
        LgovLyBCT09UU1RSQVAKLy8KCi8qKgogIERldGVybWluZXMgd2hldGhlciBF
        bWJlciBzaG91bGQgZW5oYW5jZXMgc29tZSBidWlsdC1pbiBvYmplY3QgcHJv
        dG90eXBlcyB0bwogIHByb3ZpZGUgYSBtb3JlIGZyaWVuZGx5IEFQSS4gSWYg
        ZW5hYmxlZCwgYSBmZXcgbWV0aG9kcyB3aWxsIGJlIGFkZGVkIHRvCiAgYEZ1
        bmN0aW9uYCwgYFN0cmluZ2AsIGFuZCBgQXJyYXlgLiBgT2JqZWN0LnByb3Rv
        dHlwZWAgd2lsbCBub3QgYmUgZW5oYW5jZWQsCiAgd2hpY2ggaXMgdGhlIG9u
        ZSB0aGF0IGNhdXNlcyBtb3N0IHRyb3VibGUgZm9yIHBlb3BsZS4KCiAgSW4g
        Z2VuZXJhbCB3ZSByZWNvbW1lbmQgbGVhdmluZyB0aGlzIG9wdGlvbiBzZXQg
        dG8gdHJ1ZSBzaW5jZSBpdCByYXJlbHkKICBjb25mbGljdHMgd2l0aCBvdGhl
        ciBjb2RlLiBJZiB5b3UgbmVlZCB0byB0dXJuIGl0IG9mZiBob3dldmVyLCB5
        b3UgY2FuCiAgZGVmaW5lIGFuIGBFTlYuRVhURU5EX1BST1RPVFlQRVNgIGNv
        bmZpZyB0byBkaXNhYmxlIGl0LgoKICBAcHJvcGVydHkgRVhURU5EX1BST1RP
        VFlQRVMKICBAdHlwZSBCb29sZWFuCiAgQGRlZmF1bHQgdHJ1ZQoqLwpFbWJl
        ci5FWFRFTkRfUFJPVE9UWVBFUyA9IEVtYmVyLkVOVi5FWFRFTkRfUFJPVE9U
        WVBFUzsKCmlmICh0eXBlb2YgRW1iZXIuRVhURU5EX1BST1RPVFlQRVMgPT09
        ICd1bmRlZmluZWQnKSB7CiAgRW1iZXIuRVhURU5EX1BST1RPVFlQRVMgPSB0
        cnVlOwp9CgovKioKICBEZXRlcm1pbmVzIHdoZXRoZXIgRW1iZXIgbG9ncyBh
        IGZ1bGwgc3RhY2sgdHJhY2UgZHVyaW5nIGRlcHJlY2F0aW9uIHdhcm5pbmdz
        CgogIEBwcm9wZXJ0eSBMT0dfU1RBQ0tUUkFDRV9PTl9ERVBSRUNBVElPTgog
        IEB0eXBlIEJvb2xlYW4KICBAZGVmYXVsdCB0cnVlCiovCkVtYmVyLkxPR19T
        VEFDS1RSQUNFX09OX0RFUFJFQ0FUSU9OID0gKEVtYmVyLkVOVi5MT0dfU1RB
        Q0tUUkFDRV9PTl9ERVBSRUNBVElPTiAhPT0gZmFsc2UpOwoKLyoqCiAgRGV0
        ZXJtaW5lcyB3aGV0aGVyIEVtYmVyIHNob3VsZCBhZGQgRUNNQVNjcmlwdCA1
        IHNoaW1zIHRvIG9sZGVyIGJyb3dzZXJzLgoKICBAcHJvcGVydHkgU0hJTV9F
        UzUKICBAdHlwZSBCb29sZWFuCiAgQGRlZmF1bHQgRW1iZXIuRVhURU5EX1BS
        T1RPVFlQRVMKKi8KRW1iZXIuU0hJTV9FUzUgPSAoRW1iZXIuRU5WLlNISU1f
        RVM1ID09PSBmYWxzZSkgPyBmYWxzZSA6IEVtYmVyLkVYVEVORF9QUk9UT1RZ
        UEVTOwoKLyoqCiAgRGV0ZXJtaW5lcyB3aGV0aGVyIEVtYmVyIGxvZ3MgaW5m
        byBhYm91dCB2ZXJzaW9uIG9mIHVzZWQgbGlicmFyaWVzCgogIEBwcm9wZXJ0
        eSBMT0dfVkVSU0lPTgogIEB0eXBlIEJvb2xlYW4KICBAZGVmYXVsdCB0cnVl
        CiovCkVtYmVyLkxPR19WRVJTSU9OID0gKEVtYmVyLkVOVi5MT0dfVkVSU0lP
        TiA9PT0gZmFsc2UpID8gZmFsc2UgOiB0cnVlOwoKLyoqCiAgRW1wdHkgZnVu
        Y3Rpb24uIFVzZWZ1bCBmb3Igc29tZSBvcGVyYXRpb25zLiBBbHdheXMgcmV0
        dXJucyBgdGhpc2AuCgogIEBtZXRob2QgSwogIEBwcml2YXRlCiAgQHJldHVy
        biB7T2JqZWN0fQoqLwpFbWJlci5LID0gZnVuY3Rpb24oKSB7IHJldHVybiB0
        aGlzOyB9OwoKCi8vIFN0dWIgb3V0IHRoZSBtZXRob2RzIGRlZmluZWQgYnkg
        dGhlIGVtYmVyLWRlYnVnIHBhY2thZ2UgaW4gY2FzZSBpdCdzIG5vdCBsb2Fk
        ZWQKCmlmICgndW5kZWZpbmVkJyA9PT0gdHlwZW9mIEVtYmVyLmFzc2VydCkg
        eyBFbWJlci5hc3NlcnQgPSBFbWJlci5LOyB9CmlmICgndW5kZWZpbmVkJyA9
        PT0gdHlwZW9mIEVtYmVyLndhcm4pIHsgRW1iZXIud2FybiA9IEVtYmVyLks7
        IH0KaWYgKCd1bmRlZmluZWQnID09PSB0eXBlb2YgRW1iZXIuZGVidWcpIHsg
        RW1iZXIuZGVidWcgPSBFbWJlci5LOyB9CmlmICgndW5kZWZpbmVkJyA9PT0g
        dHlwZW9mIEVtYmVyLmRlcHJlY2F0ZSkgeyBFbWJlci5kZXByZWNhdGUgPSBF
        bWJlci5LOyB9CmlmICgndW5kZWZpbmVkJyA9PT0gdHlwZW9mIEVtYmVyLmRl
        cHJlY2F0ZUZ1bmMpIHsKICBFbWJlci5kZXByZWNhdGVGdW5jID0gZnVuY3Rp
        b24oXywgZnVuYykgeyByZXR1cm4gZnVuYzsgfTsKfQoKLyoqCiAgUHJldmlv
        dXNseSB3ZSB1c2VkIGBFbWJlci4kLnV1aWRgLCBob3dldmVyIGAkLnV1aWRg
        IGhhcyBiZWVuIHJlbW92ZWQgZnJvbQogIGpRdWVyeSBtYXN0ZXIuIFdlJ2xs
        IGp1c3QgYm9vdHN0cmFwIG91ciBvd24gdXVpZCBub3cuCgogIEBwcm9wZXJ0
        eSB1dWlkCiAgQHR5cGUgTnVtYmVyCiAgQHByaXZhdGUKKi8KRW1iZXIudXVp
        ZCA9IDA7CgovKioKICBNZXJnZSB0aGUgY29udGVudHMgb2YgdHdvIG9iamVj
        dHMgdG9nZXRoZXIgaW50byB0aGUgZmlyc3Qgb2JqZWN0LgoKICBgYGBqYXZh
        c2NyaXB0CiAgRW1iZXIubWVyZ2Uoe2ZpcnN0OiAnVG9tJ30sIHtsYXN0OiAn
        RGFsZSd9KTsgLy8ge2ZpcnN0OiAnVG9tJywgbGFzdDogJ0RhbGUnfQogIHZh
        ciBhID0ge2ZpcnN0OiAnWWVodWRhJ30sIGIgPSB7bGFzdDogJ0thdHonfTsK
        ICBFbWJlci5tZXJnZShhLCBiKTsgLy8gYSA9PSB7Zmlyc3Q6ICdZZWh1ZGEn
        LCBsYXN0OiAnS2F0eid9LCBiID09IHtsYXN0OiAnS2F0eid9CiAgYGBgCgog
        IEBtZXRob2QgbWVyZ2UKICBAZm9yIEVtYmVyCiAgQHBhcmFtIHtPYmplY3R9
        IG9yaWdpbmFsIFRoZSBvYmplY3QgdG8gbWVyZ2UgaW50bwogIEBwYXJhbSB7
        T2JqZWN0fSB1cGRhdGVzIFRoZSBvYmplY3QgdG8gY29weSBwcm9wZXJ0aWVz
        IGZyb20KICBAcmV0dXJuIHtPYmplY3R9CiovCkVtYmVyLm1lcmdlID0gZnVu
        Y3Rpb24ob3JpZ2luYWwsIHVwZGF0ZXMpIHsKICBmb3IgKHZhciBwcm9wIGlu
        IHVwZGF0ZXMpIHsKICAgIGlmICghdXBkYXRlcy5oYXNPd25Qcm9wZXJ0eShw
        cm9wKSkgeyBjb250aW51ZTsgfQogICAgb3JpZ2luYWxbcHJvcF0gPSB1cGRh
        dGVzW3Byb3BdOwogIH0KICByZXR1cm4gb3JpZ2luYWw7Cn07CgovKioKICBS
        ZXR1cm5zIHRydWUgaWYgdGhlIHBhc3NlZCB2YWx1ZSBpcyBudWxsIG9yIHVu
        ZGVmaW5lZC4gVGhpcyBhdm9pZHMgZXJyb3JzCiAgZnJvbSBKU0xpbnQgY29t
        cGxhaW5pbmcgYWJvdXQgdXNlIG9mID09LCB3aGljaCBjYW4gYmUgdGVjaG5p
        Y2FsbHkKICBjb25mdXNpbmcuCgogIGBgYGphdmFzY3JpcHQKICBFbWJlci5p
        c05vbmUoKTsgICAgICAgICAgICAgIC8vIHRydWUKICBFbWJlci5pc05vbmUo
        bnVsbCk7ICAgICAgICAgIC8vIHRydWUKICBFbWJlci5pc05vbmUodW5kZWZp
        bmVkKTsgICAgIC8vIHRydWUKICBFbWJlci5pc05vbmUoJycpOyAgICAgICAg
        ICAgIC8vIGZhbHNlCiAgRW1iZXIuaXNOb25lKFtdKTsgICAgICAgICAgICAv
        LyBmYWxzZQogIEVtYmVyLmlzTm9uZShmdW5jdGlvbigpIHt9KTsgIC8vIGZh
        bHNlCiAgYGBgCgogIEBtZXRob2QgaXNOb25lCiAgQGZvciBFbWJlcgogIEBw
        YXJhbSB7T2JqZWN0fSBvYmogVmFsdWUgdG8gdGVzdAogIEByZXR1cm4ge0Jv
        b2xlYW59CiovCkVtYmVyLmlzTm9uZSA9IGZ1bmN0aW9uKG9iaikgewogIHJl
        dHVybiBvYmogPT09IG51bGwgfHwgb2JqID09PSB1bmRlZmluZWQ7Cn07CkVt
        YmVyLm5vbmUgPSBFbWJlci5kZXByZWNhdGVGdW5jKCJFbWJlci5ub25lIGlz
        IGRlcHJlY2F0ZWQuIFBsZWFzZSB1c2UgRW1iZXIuaXNOb25lIGluc3RlYWQu
        IiwgRW1iZXIuaXNOb25lKTsKCi8qKgogIFZlcmlmaWVzIHRoYXQgYSB2YWx1
        ZSBpcyBgbnVsbGAgb3IgYW4gZW1wdHkgc3RyaW5nLCBlbXB0eSBhcnJheSwK
        ICBvciBlbXB0eSBmdW5jdGlvbi4KCiAgQ29uc3RyYWlucyB0aGUgcnVsZXMg
        b24gYEVtYmVyLmlzTm9uZWAgYnkgcmV0dXJuaW5nIGZhbHNlIGZvciBlbXB0
        eQogIHN0cmluZyBhbmQgZW1wdHkgYXJyYXlzLgoKICBgYGBqYXZhc2NyaXB0
        CiAgRW1iZXIuaXNFbXB0eSgpOyAgICAgICAgICAgICAgICAvLyB0cnVlCiAg
        RW1iZXIuaXNFbXB0eShudWxsKTsgICAgICAgICAgICAvLyB0cnVlCiAgRW1i
        ZXIuaXNFbXB0eSh1bmRlZmluZWQpOyAgICAgICAvLyB0cnVlCiAgRW1iZXIu
        aXNFbXB0eSgnJyk7ICAgICAgICAgICAgICAvLyB0cnVlCiAgRW1iZXIuaXNF
        bXB0eShbXSk7ICAgICAgICAgICAgICAvLyB0cnVlCiAgRW1iZXIuaXNFbXB0
        eSgnQWRhbSBIYXdraW5zJyk7ICAvLyBmYWxzZQogIEVtYmVyLmlzRW1wdHko
        WzAsMSwyXSk7ICAgICAgICAgLy8gZmFsc2UKICBgYGAKCiAgQG1ldGhvZCBp
        c0VtcHR5CiAgQGZvciBFbWJlcgogIEBwYXJhbSB7T2JqZWN0fSBvYmogVmFs
        dWUgdG8gdGVzdAogIEByZXR1cm4ge0Jvb2xlYW59CiovCkVtYmVyLmlzRW1w
        dHkgPSBmdW5jdGlvbihvYmopIHsKICByZXR1cm4gRW1iZXIuaXNOb25lKG9i
        aikgfHwgKG9iai5sZW5ndGggPT09IDAgJiYgdHlwZW9mIG9iaiAhPT0gJ2Z1
        bmN0aW9uJykgfHwgKHR5cGVvZiBvYmogPT09ICdvYmplY3QnICYmIEVtYmVy
        LmdldChvYmosICdsZW5ndGgnKSA9PT0gMCk7Cn07CkVtYmVyLmVtcHR5ID0g
        RW1iZXIuZGVwcmVjYXRlRnVuYygiRW1iZXIuZW1wdHkgaXMgZGVwcmVjYXRl
        ZC4gUGxlYXNlIHVzZSBFbWJlci5pc0VtcHR5IGluc3RlYWQuIiwgRW1iZXIu
        aXNFbXB0eSkgOwoKCn0pKCk7CgoKCihmdW5jdGlvbigpIHsKLypnbG9iYWxz
        IE5vZGUgKi8KLyoqCkBtb2R1bGUgZW1iZXItbWV0YWwKKi8KCi8qKgogIFBs
        YXRmb3JtIHNwZWNpZmljIG1ldGhvZHMgYW5kIGZlYXR1cmUgZGV0ZWN0b3Jz
        IG5lZWRlZCBieSB0aGUgZnJhbWV3b3JrLgoKICBAY2xhc3MgcGxhdGZvcm0K
        ICBAbmFtZXNwYWNlIEVtYmVyCiAgQHN0YXRpYwoqLwp2YXIgcGxhdGZvcm0g
        PSBFbWJlci5wbGF0Zm9ybSA9IHt9OwoKCi8qKgogIElkZW50aWNhbCB0byBg
        T2JqZWN0LmNyZWF0ZSgpYC4gSW1wbGVtZW50cyBpZiBub3QgYXZhaWxhYmxl
        IG5hdGl2ZWx5LgoKICBAbWV0aG9kIGNyZWF0ZQogIEBmb3IgRW1iZXIKKi8K
        RW1iZXIuY3JlYXRlID0gT2JqZWN0LmNyZWF0ZTsKCi8vIElFOCBoYXMgT2Jq
        ZWN0LmNyZWF0ZSBidXQgaXQgY291bGRuJ3QgdHJlYXQgcHJvcGVydHkgZGVz
        Y3JpcHRlcnMuCmlmIChFbWJlci5jcmVhdGUpIHsKICBpZiAoRW1iZXIuY3Jl
        YXRlKHthOiAxfSwge2E6IHt2YWx1ZTogMn19KS5hICE9PSAyKSB7CiAgICBF
        bWJlci5jcmVhdGUgPSBudWxsOwogIH0KfQoKLy8gU1RVQl9PQkpFQ1RfQ1JF
        QVRFIGFsbG93cyB1cyB0byBvdmVycmlkZSBvdGhlciBsaWJyYXJpZXMgdGhh
        dCBzdHViCi8vIE9iamVjdC5jcmVhdGUgZGlmZmVyZW50IHRoYW4gd2Ugd291
        bGQgcHJlZmVyCmlmICghRW1iZXIuY3JlYXRlIHx8IEVtYmVyLkVOVi5TVFVC
        X09CSkVDVF9DUkVBVEUpIHsKICB2YXIgSyA9IGZ1bmN0aW9uKCkge307Cgog
        IEVtYmVyLmNyZWF0ZSA9IGZ1bmN0aW9uKG9iaiwgcHJvcHMpIHsKICAgIEsu
        cHJvdG90eXBlID0gb2JqOwogICAgb2JqID0gbmV3IEsoKTsKICAgIGlmIChw
        cm9wcykgewogICAgICBLLnByb3RvdHlwZSA9IG9iajsKICAgICAgZm9yICh2
        YXIgcHJvcCBpbiBwcm9wcykgewogICAgICAgIEsucHJvdG90eXBlW3Byb3Bd
        ID0gcHJvcHNbcHJvcF0udmFsdWU7CiAgICAgIH0KICAgICAgb2JqID0gbmV3
        IEsoKTsKICAgIH0KICAgIEsucHJvdG90eXBlID0gbnVsbDsKCiAgICByZXR1
        cm4gb2JqOwogIH07CgogIEVtYmVyLmNyZWF0ZS5pc1NpbXVsYXRlZCA9IHRy
        dWU7Cn0KCnZhciBkZWZpbmVQcm9wZXJ0eSA9IE9iamVjdC5kZWZpbmVQcm9w
        ZXJ0eTsKdmFyIGNhblJlZGVmaW5lUHJvcGVydGllcywgY2FuRGVmaW5lUHJv
        cGVydHlPbkRPTTsKCi8vIENhdGNoIElFOCB3aGVyZSBPYmplY3QuZGVmaW5l
        UHJvcGVydHkgZXhpc3RzIGJ1dCBvbmx5IHdvcmtzIG9uIERPTSBlbGVtZW50
        cwppZiAoZGVmaW5lUHJvcGVydHkpIHsKICB0cnkgewogICAgZGVmaW5lUHJv
        cGVydHkoe30sICdhJyx7Z2V0OmZ1bmN0aW9uKCkge319KTsKICB9IGNhdGNo
        IChlKSB7CiAgICBkZWZpbmVQcm9wZXJ0eSA9IG51bGw7CiAgfQp9CgppZiAo
        ZGVmaW5lUHJvcGVydHkpIHsKICAvLyBEZXRlY3RzIGEgYnVnIGluIEFuZHJv
        aWQgPDMuMiB3aGVyZSB5b3UgY2Fubm90IHJlZGVmaW5lIGEgcHJvcGVydHkg
        dXNpbmcKICAvLyBPYmplY3QuZGVmaW5lUHJvcGVydHkgb25jZSBhY2Nlc3Nv
        cnMgaGF2ZSBhbHJlYWR5IGJlZW4gc2V0LgogIGNhblJlZGVmaW5lUHJvcGVy
        dGllcyA9IChmdW5jdGlvbigpIHsKICAgIHZhciBvYmogPSB7fTsKCiAgICBk
        ZWZpbmVQcm9wZXJ0eShvYmosICdhJywgewogICAgICBjb25maWd1cmFibGU6
        IHRydWUsCiAgICAgIGVudW1lcmFibGU6IHRydWUsCiAgICAgIGdldDogZnVu
        Y3Rpb24oKSB7IH0sCiAgICAgIHNldDogZnVuY3Rpb24oKSB7IH0KICAgIH0p
        OwoKICAgIGRlZmluZVByb3BlcnR5KG9iaiwgJ2EnLCB7CiAgICAgIGNvbmZp
        Z3VyYWJsZTogdHJ1ZSwKICAgICAgZW51bWVyYWJsZTogdHJ1ZSwKICAgICAg
        d3JpdGFibGU6IHRydWUsCiAgICAgIHZhbHVlOiB0cnVlCiAgICB9KTsKCiAg
        ICByZXR1cm4gb2JqLmEgPT09IHRydWU7CiAgfSkoKTsKCiAgLy8gVGhpcyBp
        cyBmb3IgU2FmYXJpIDUuMCwgd2hpY2ggc3VwcG9ydHMgT2JqZWN0LmRlZmlu
        ZVByb3BlcnR5LCBidXQgbm90CiAgLy8gb24gRE9NIG5vZGVzLgogIGNhbkRl
        ZmluZVByb3BlcnR5T25ET00gPSAoZnVuY3Rpb24oKSB7CiAgICB0cnkgewog
        ICAgICBkZWZpbmVQcm9wZXJ0eShkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdk
        aXYnKSwgJ2RlZmluZVByb3BlcnR5T25ET00nLCB7fSk7CiAgICAgIHJldHVy
        biB0cnVlOwogICAgfSBjYXRjaChlKSB7IH0KCiAgICByZXR1cm4gZmFsc2U7
        CiAgfSkoKTsKCiAgaWYgKCFjYW5SZWRlZmluZVByb3BlcnRpZXMpIHsKICAg
        IGRlZmluZVByb3BlcnR5ID0gbnVsbDsKICB9IGVsc2UgaWYgKCFjYW5EZWZp
        bmVQcm9wZXJ0eU9uRE9NKSB7CiAgICBkZWZpbmVQcm9wZXJ0eSA9IGZ1bmN0
        aW9uKG9iaiwga2V5TmFtZSwgZGVzYykgewogICAgICB2YXIgaXNOb2RlOwoK
        ICAgICAgaWYgKHR5cGVvZiBOb2RlID09PSAib2JqZWN0IikgewogICAgICAg
        IGlzTm9kZSA9IG9iaiBpbnN0YW5jZW9mIE5vZGU7CiAgICAgIH0gZWxzZSB7
        CiAgICAgICAgaXNOb2RlID0gdHlwZW9mIG9iaiA9PT0gIm9iamVjdCIgJiYg
        dHlwZW9mIG9iai5ub2RlVHlwZSA9PT0gIm51bWJlciIgJiYgdHlwZW9mIG9i
        ai5ub2RlTmFtZSA9PT0gInN0cmluZyI7CiAgICAgIH0KCiAgICAgIGlmIChp
        c05vZGUpIHsKICAgICAgICAvLyBUT0RPOiBTaG91bGQgd2UgaGF2ZSBhIHdh
        cm5pbmcgaGVyZT8KICAgICAgICByZXR1cm4gKG9ialtrZXlOYW1lXSA9IGRl
        c2MudmFsdWUpOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBPYmpl
        Y3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXlOYW1lLCBkZXNjKTsKICAgICAg
        fQogICAgfTsKICB9Cn0KCi8qKgpAY2xhc3MgcGxhdGZvcm0KQG5hbWVzcGFj
        ZSBFbWJlcgoqLwoKLyoqCiAgSWRlbnRpY2FsIHRvIGBPYmplY3QuZGVmaW5l
        UHJvcGVydHkoKWAuIEltcGxlbWVudHMgYXMgbXVjaCBmdW5jdGlvbmFsaXR5
        CiAgYXMgcG9zc2libGUgaWYgbm90IGF2YWlsYWJsZSBuYXRpdmVseS4KCiAg
        QG1ldGhvZCBkZWZpbmVQcm9wZXJ0eQogIEBwYXJhbSB7T2JqZWN0fSBvYmog
        VGhlIG9iamVjdCB0byBtb2RpZnkKICBAcGFyYW0ge1N0cmluZ30ga2V5TmFt
        ZSBwcm9wZXJ0eSBuYW1lIHRvIG1vZGlmeQogIEBwYXJhbSB7T2JqZWN0fSBk
        ZXNjIGRlc2NyaXB0b3IgaGFzaAogIEByZXR1cm4ge3ZvaWR9CiovCnBsYXRm
        b3JtLmRlZmluZVByb3BlcnR5ID0gZGVmaW5lUHJvcGVydHk7CgovKioKICBT
        ZXQgdG8gdHJ1ZSBpZiB0aGUgcGxhdGZvcm0gc3VwcG9ydHMgbmF0aXZlIGdl
        dHRlcnMgYW5kIHNldHRlcnMuCgogIEBwcm9wZXJ0eSBoYXNQcm9wZXJ0eUFj
        Y2Vzc29ycwogIEBmaW5hbAoqLwpwbGF0Zm9ybS5oYXNQcm9wZXJ0eUFjY2Vz
        c29ycyA9IHRydWU7CgppZiAoIXBsYXRmb3JtLmRlZmluZVByb3BlcnR5KSB7
        CiAgcGxhdGZvcm0uaGFzUHJvcGVydHlBY2Nlc3NvcnMgPSBmYWxzZTsKCiAg
        cGxhdGZvcm0uZGVmaW5lUHJvcGVydHkgPSBmdW5jdGlvbihvYmosIGtleU5h
        bWUsIGRlc2MpIHsKICAgIGlmICghZGVzYy5nZXQpIHsgb2JqW2tleU5hbWVd
        ID0gZGVzYy52YWx1ZTsgfQogIH07CgogIHBsYXRmb3JtLmRlZmluZVByb3Bl
        cnR5LmlzU2ltdWxhdGVkID0gdHJ1ZTsKfQoKaWYgKEVtYmVyLkVOVi5NQU5E
        QVRPUllfU0VUVEVSICYmICFwbGF0Zm9ybS5oYXNQcm9wZXJ0eUFjY2Vzc29y
        cykgewogIEVtYmVyLkVOVi5NQU5EQVRPUllfU0VUVEVSID0gZmFsc2U7Cn0K
        Cn0pKCk7CgoKCihmdW5jdGlvbigpIHsKLypqc2hpbnQgbmV3Y2FwOmZhbHNl
        Ki8KLyoqCkBtb2R1bGUgZW1iZXItbWV0YWwKKi8KCi8vIE5PVEU6IFRoZXJl
        IGlzIGEgYnVnIGluIGpzaGludCB0aGF0IGRvZXNuJ3QgcmVjb2duaXplIGBP
        YmplY3QoKWAgd2l0aG91dCBgbmV3YAovLyBhcyBiZWluZyBvayB1bmxlc3Mg
        Ym90aCBgbmV3Y2FwOmZhbHNlYCBhbmQgbm90IGB1c2Ugc3RyaWN0YC4KLy8g
        aHR0cHM6Ly9naXRodWIuY29tL2pzaGludC9qc2hpbnQvaXNzdWVzLzM5MgoK
        Ly8gVGVzdGluZyB0aGlzIGlzIG5vdCBpZGVhbCwgYnV0IHdlIHdhbnQgdG8g
        dXNlIG5hdGl2ZSBmdW5jdGlvbnMKLy8gaWYgYXZhaWxhYmxlLCBidXQgbm90
        IHRvIHVzZSB2ZXJzaW9ucyBjcmVhdGVkIGJ5IGxpYnJhcmllcyBsaWtlIFBy
        b3RvdHlwZQp2YXIgaXNOYXRpdmVGdW5jID0gZnVuY3Rpb24oZnVuYykgewog
        IC8vIFRoaXMgc2hvdWxkIHByb2JhYmx5IHdvcmsgaW4gYWxsIGJyb3dzZXJz
        IGxpa2VseSB0byBoYXZlIEVTNSBhcnJheSBtZXRob2RzCiAgcmV0dXJuIGZ1
        bmMgJiYgRnVuY3Rpb24ucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZnVuYyku
        aW5kZXhPZignW25hdGl2ZSBjb2RlXScpID4gLTE7Cn07CgovLyBGcm9tOiBo
        dHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi9KYXZhU2NyaXB0L1Jl
        ZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9hcnJheS9tYXAKdmFyIGFycmF5TWFw
        ID0gaXNOYXRpdmVGdW5jKEFycmF5LnByb3RvdHlwZS5tYXApID8gQXJyYXku
        cHJvdG90eXBlLm1hcCA6IGZ1bmN0aW9uKGZ1biAvKiwgdGhpc3AgKi8pIHsK
        ICAvLyJ1c2Ugc3RyaWN0IjsKCiAgaWYgKHRoaXMgPT09IHZvaWQgMCB8fCB0
        aGlzID09PSBudWxsKSB7CiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCk7CiAg
        fQoKICB2YXIgdCA9IE9iamVjdCh0aGlzKTsKICB2YXIgbGVuID0gdC5sZW5n
        dGggPj4+IDA7CiAgaWYgKHR5cGVvZiBmdW4gIT09ICJmdW5jdGlvbiIpIHsK
        ICAgIHRocm93IG5ldyBUeXBlRXJyb3IoKTsKICB9CgogIHZhciByZXMgPSBu
        ZXcgQXJyYXkobGVuKTsKICB2YXIgdGhpc3AgPSBhcmd1bWVudHNbMV07CiAg
        Zm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykgewogICAgaWYgKGkgaW4g
        dCkgewogICAgICByZXNbaV0gPSBmdW4uY2FsbCh0aGlzcCwgdFtpXSwgaSwg
        dCk7CiAgICB9CiAgfQoKICByZXR1cm4gcmVzOwp9OwoKLy8gRnJvbTogaHR0
        cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4vSmF2YVNjcmlwdC9SZWZl
        cmVuY2UvR2xvYmFsX09iamVjdHMvYXJyYXkvZm9yZWFjaAp2YXIgYXJyYXlG
        b3JFYWNoID0gaXNOYXRpdmVGdW5jKEFycmF5LnByb3RvdHlwZS5mb3JFYWNo
        KSA/IEFycmF5LnByb3RvdHlwZS5mb3JFYWNoIDogZnVuY3Rpb24oZnVuIC8q
        LCB0aGlzcCAqLykgewogIC8vInVzZSBzdHJpY3QiOwoKICBpZiAodGhpcyA9
        PT0gdm9pZCAwIHx8IHRoaXMgPT09IG51bGwpIHsKICAgIHRocm93IG5ldyBU
        eXBlRXJyb3IoKTsKICB9CgogIHZhciB0ID0gT2JqZWN0KHRoaXMpOwogIHZh
        ciBsZW4gPSB0Lmxlbmd0aCA+Pj4gMDsKICBpZiAodHlwZW9mIGZ1biAhPT0g
        ImZ1bmN0aW9uIikgewogICAgdGhyb3cgbmV3IFR5cGVFcnJvcigpOwogIH0K
        CiAgdmFyIHRoaXNwID0gYXJndW1lbnRzWzFdOwogIGZvciAodmFyIGkgPSAw
        OyBpIDwgbGVuOyBpKyspIHsKICAgIGlmIChpIGluIHQpIHsKICAgICAgZnVu
        LmNhbGwodGhpc3AsIHRbaV0sIGksIHQpOwogICAgfQogIH0KfTsKCnZhciBh
        cnJheUluZGV4T2YgPSBpc05hdGl2ZUZ1bmMoQXJyYXkucHJvdG90eXBlLmlu
        ZGV4T2YpID8gQXJyYXkucHJvdG90eXBlLmluZGV4T2YgOiBmdW5jdGlvbiAo
        b2JqLCBmcm9tSW5kZXgpIHsKICBpZiAoZnJvbUluZGV4ID09PSBudWxsIHx8
        IGZyb21JbmRleCA9PT0gdW5kZWZpbmVkKSB7IGZyb21JbmRleCA9IDA7IH0K
        ICBlbHNlIGlmIChmcm9tSW5kZXggPCAwKSB7IGZyb21JbmRleCA9IE1hdGgu
        bWF4KDAsIHRoaXMubGVuZ3RoICsgZnJvbUluZGV4KTsgfQogIGZvciAodmFy
        IGkgPSBmcm9tSW5kZXgsIGogPSB0aGlzLmxlbmd0aDsgaSA8IGo7IGkrKykg
        ewogICAgaWYgKHRoaXNbaV0gPT09IG9iaikgeyByZXR1cm4gaTsgfQogIH0K
        ICByZXR1cm4gLTE7Cn07CgovKioKICBBcnJheSBwb2x5ZmlsbHMgdG8gc3Vw
        cG9ydCBFUzUgZmVhdHVyZXMgaW4gb2xkZXIgYnJvd3NlcnMuCgogIEBuYW1l
        c3BhY2UgRW1iZXIKICBAcHJvcGVydHkgQXJyYXlQb2x5ZmlsbHMKKi8KRW1i
        ZXIuQXJyYXlQb2x5ZmlsbHMgPSB7CiAgbWFwOiBhcnJheU1hcCwKICBmb3JF
        YWNoOiBhcnJheUZvckVhY2gsCiAgaW5kZXhPZjogYXJyYXlJbmRleE9mCn07
        CgppZiAoRW1iZXIuU0hJTV9FUzUpIHsKICBpZiAoIUFycmF5LnByb3RvdHlw
        ZS5tYXApIHsKICAgIEFycmF5LnByb3RvdHlwZS5tYXAgPSBhcnJheU1hcDsK
        ICB9CgogIGlmICghQXJyYXkucHJvdG90eXBlLmZvckVhY2gpIHsKICAgIEFy
        cmF5LnByb3RvdHlwZS5mb3JFYWNoID0gYXJyYXlGb3JFYWNoOwogIH0KCiAg
        aWYgKCFBcnJheS5wcm90b3R5cGUuaW5kZXhPZikgewogICAgQXJyYXkucHJv
        dG90eXBlLmluZGV4T2YgPSBhcnJheUluZGV4T2Y7CiAgfQp9Cgp9KSgpOwoK
        CgooZnVuY3Rpb24oKSB7CnZhciBlcnJvclByb3BzID0gWydkZXNjcmlwdGlv
        bicsICdmaWxlTmFtZScsICdsaW5lTnVtYmVyJywgJ21lc3NhZ2UnLCAnbmFt
        ZScsICdudW1iZXInLCAnc3RhY2snXTsKCi8qKgogIEEgc3ViY2xhc3Mgb2Yg
        dGhlIEphdmFTY3JpcHQgRXJyb3Igb2JqZWN0IGZvciB1c2UgaW4gRW1iZXIu
        CgogIEBjbGFzcyBFcnJvcgogIEBuYW1lc3BhY2UgRW1iZXIKICBAZXh0ZW5k
        cyBFcnJvcgogIEBjb25zdHJ1Y3RvcgoqLwpFbWJlci5FcnJvciA9IGZ1bmN0
        aW9uKCkgewogIHZhciB0bXAgPSBFcnJvci5hcHBseSh0aGlzLCBhcmd1bWVu
        dHMpOwoKICAvLyBVbmZvcnR1bmF0ZWx5IGVycm9ycyBhcmUgbm90IGVudW1l
        cmFibGUgaW4gQ2hyb21lIChhdCBsZWFzdCksIHNvIGBmb3IgcHJvcCBpbiB0
        bXBgIGRvZXNuJ3Qgd29yay4KICBmb3IgKHZhciBpZHggPSAwOyBpZHggPCBl
        cnJvclByb3BzLmxlbmd0aDsgaWR4KyspIHsKICAgIHRoaXNbZXJyb3JQcm9w
        c1tpZHhdXSA9IHRtcFtlcnJvclByb3BzW2lkeF1dOwogIH0KfTsKCkVtYmVy
        LkVycm9yLnByb3RvdHlwZSA9IEVtYmVyLmNyZWF0ZShFcnJvci5wcm90b3R5
        cGUpOwoKLy8gLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4u
        Li4uLi4uLi4uLi4uLi4uLi4uLi4uLgovLyBFUlJPUiBIQU5ETElORwovLwoK
        LyoqCiAgQSBmdW5jdGlvbiBtYXkgYmUgYXNzaWduZWQgdG8gYEVtYmVyLm9u
        ZXJyb3JgIHRvIGJlIGNhbGxlZCB3aGVuIEVtYmVyCiAgaW50ZXJuYWxzIGVu
        Y291bnRlciBhbiBlcnJvci4gVGhpcyBpcyB1c2VmdWwgZm9yIHNwZWNpYWxp
        emVkIGVycm9yIGhhbmRsaW5nCiAgYW5kIHJlcG9ydGluZyBjb2RlLgoKICBg
        YGBqYXZhc2NyaXB0CiAgRW1iZXIub25lcnJvciA9IGZ1bmN0aW9uKGVycm9y
        KSB7CiAgICBFbS4kLmFqYXgoJy9yZXBvcnQtZXJyb3InLCAnUE9TVCcsIHsK
        ICAgICAgc3RhY2s6IGVycm9yLnN0YWNrLAogICAgICBvdGhlckluZm9ybWF0
        aW9uOiAnd2hhdGV2ZXIgYXBwIHN0YXRlIHlvdSB3YW50IHRvIHByb3ZpZGUn
        CiAgICB9KTsKICB9OwogIGBgYAoKICBAZXZlbnQgb25lcnJvcgogIEBmb3Ig
        RW1iZXIKICBAcGFyYW0ge0V4Y2VwdGlvbn0gZXJyb3IgdGhlIGVycm9yIG9i
        amVjdAoqLwpFbWJlci5vbmVycm9yID0gbnVsbDsKCi8qKgogIEBwcml2YXRl
        CgogIFdyYXAgY29kZSBibG9jayBpbiBhIHRyeS9jYXRjaCBpZiBgRW1iZXIu
        b25lcnJvcmAgaXMgc2V0LgoKICBAbWV0aG9kIGhhbmRsZUVycm9ycwogIEBm
        b3IgRW1iZXIKICBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jCiAgQHBhcmFtIFtj
        b250ZXh0XQoqLwpFbWJlci5oYW5kbGVFcnJvcnMgPSBmdW5jdGlvbihmdW5j
        LCBjb250ZXh0KSB7CiAgLy8gVW5mb3J0dW5hdGVseSBpbiBzb21lIGJyb3dz
        ZXJzIHdlIGxvc2UgdGhlIGJhY2t0cmFjZSBpZiB3ZSByZXRocm93IHRoZSBl
        eGlzdGluZyBlcnJvciwKICAvLyBzbyBpbiB0aGUgZXZlbnQgdGhhdCB3ZSBk
        b24ndCBoYXZlIGFuIGBvbmVycm9yYCBoYW5kbGVyIHdlIGRvbid0IHdyYXAg
        aW4gYSB0cnkvY2F0Y2gKICBpZiAoJ2Z1bmN0aW9uJyA9PT0gdHlwZW9mIEVt
        YmVyLm9uZXJyb3IpIHsKICAgIHRyeSB7CiAgICAgIHJldHVybiBmdW5jLmNh
        bGwoY29udGV4dCB8fCB0aGlzKTsKICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAg
        ICAgIEVtYmVyLm9uZXJyb3IoZXJyb3IpOwogICAgfQogIH0gZWxzZSB7CiAg
        ICByZXR1cm4gZnVuYy5jYWxsKGNvbnRleHQgfHwgdGhpcyk7CiAgfQp9OwoK
        fSkoKTsKCgoKKGZ1bmN0aW9uKCkgewovKioKQG1vZHVsZSBlbWJlci1tZXRh
        bAoqLwoKLyoqCiAgQHByaXZhdGUKICAKICBQcmVmaXggdXNlZCBmb3IgZ3Vp
        ZHMgdGhyb3VnaCBvdXQgRW1iZXIuCiAgCiovCkVtYmVyLkdVSURfUFJFRklY
        ID0gJ2VtYmVyJzsKCgp2YXIgb19kZWZpbmVQcm9wZXJ0eSA9IEVtYmVyLnBs
        YXRmb3JtLmRlZmluZVByb3BlcnR5LAogICAgb19jcmVhdGUgPSBFbWJlci5j
        cmVhdGUsCiAgICAvLyBVc2VkIGZvciBndWlkIGdlbmVyYXRpb24uLi4KICAg
        IEdVSURfS0VZID0gJ19fZW1iZXInKyAoKyBuZXcgRGF0ZSgpKSwKICAgIHV1
        aWQgICAgICAgICA9IDAsCiAgICBudW1iZXJDYWNoZSAgPSBbXSwKICAgIHN0
        cmluZ0NhY2hlICA9IHt9OwoKdmFyIE1BTkRBVE9SWV9TRVRURVIgPSBFbWJl
        ci5FTlYuTUFOREFUT1JZX1NFVFRFUjsKCi8qKgogIEBwcml2YXRlCgogIEEg
        dW5pcXVlIGtleSB1c2VkIHRvIGFzc2lnbiBndWlkcyBhbmQgb3RoZXIgcHJp
        dmF0ZSBtZXRhZGF0YSB0byBvYmplY3RzLgogIElmIHlvdSBpbnNwZWN0IGFu
        IG9iamVjdCBpbiB5b3VyIGJyb3dzZXIgZGVidWdnZXIgeW91IHdpbGwgb2Z0
        ZW4gc2VlIHRoZXNlLgogIFRoZXkgY2FuIGJlIHNhZmVseSBpZ25vcmVkLgoK
        ICBPbiBicm93c2VycyB0aGF0IHN1cHBvcnQgaXQsIHRoZXNlIHByb3BlcnRp
        ZXMgYXJlIGFkZGVkIHdpdGggZW51bWVyYXRpb24KICBkaXNhYmxlZCBzbyB0
        aGV5IHdvbid0IHNob3cgdXAgd2hlbiB5b3UgaXRlcmF0ZSBvdmVyIHlvdXIg
        cHJvcGVydGllcy4KCiAgQHByb3BlcnR5IEdVSURfS0VZCiAgQGZvciBFbWJl
        cgogIEB0eXBlIFN0cmluZwogIEBmaW5hbAoqLwpFbWJlci5HVUlEX0tFWSA9
        IEdVSURfS0VZOwoKdmFyIEdVSURfREVTQyA9IHsKICB3cml0YWJsZTogICAg
        ZmFsc2UsCiAgY29uZmlndXJhYmxlOiBmYWxzZSwKICBlbnVtZXJhYmxlOiAg
        ZmFsc2UsCiAgdmFsdWU6IG51bGwKfTsKCi8qKgogIEBwcml2YXRlCgogIEdl
        bmVyYXRlcyBhIG5ldyBndWlkLCBvcHRpb25hbGx5IHNhdmluZyB0aGUgZ3Vp
        ZCB0byB0aGUgb2JqZWN0IHRoYXQgeW91CiAgcGFzcyBpbi4gWW91IHdpbGwg
        cmFyZWx5IG5lZWQgdG8gdXNlIHRoaXMgbWV0aG9kLiBJbnN0ZWFkIHlvdSBz
        aG91bGQKICBjYWxsIGBFbWJlci5ndWlkRm9yKG9iailgLCB3aGljaCByZXR1
        cm4gYW4gZXhpc3RpbmcgZ3VpZCBpZiBhdmFpbGFibGUuCgogIEBtZXRob2Qg
        Z2VuZXJhdGVHdWlkCiAgQGZvciBFbWJlcgogIEBwYXJhbSB7T2JqZWN0fSBb
        b2JqXSBPYmplY3QgdGhlIGd1aWQgd2lsbCBiZSB1c2VkIGZvci4gSWYgcGFz
        c2VkIGluLCB0aGUgZ3VpZCB3aWxsCiAgICBiZSBzYXZlZCBvbiB0aGUgb2Jq
        ZWN0IGFuZCByZXVzZWQgd2hlbmV2ZXIgeW91IHBhc3MgdGhlIHNhbWUgb2Jq
        ZWN0CiAgICBhZ2Fpbi4KCiAgICBJZiBubyBvYmplY3QgaXMgcGFzc2VkLCBq
        dXN0IGdlbmVyYXRlIGEgbmV3IGd1aWQuCiAgQHBhcmFtIHtTdHJpbmd9IFtw
        cmVmaXhdIFByZWZpeCB0byBwbGFjZSBpbiBmcm9udCBvZiB0aGUgZ3VpZC4g
        VXNlZnVsIHdoZW4geW91IHdhbnQgdG8KICAgIHNlcGFyYXRlIHRoZSBndWlk
        IGludG8gc2VwYXJhdGUgbmFtZXNwYWNlcy4KICBAcmV0dXJuIHtTdHJpbmd9
        IHRoZSBndWlkCiovCkVtYmVyLmdlbmVyYXRlR3VpZCA9IGZ1bmN0aW9uIGdl
        bmVyYXRlR3VpZChvYmosIHByZWZpeCkgewogIGlmICghcHJlZml4KSBwcmVm
        aXggPSBFbWJlci5HVUlEX1BSRUZJWDsKICB2YXIgcmV0ID0gKHByZWZpeCAr
        ICh1dWlkKyspKTsKICBpZiAob2JqKSB7CiAgICBHVUlEX0RFU0MudmFsdWUg
        PSByZXQ7CiAgICBvX2RlZmluZVByb3BlcnR5KG9iaiwgR1VJRF9LRVksIEdV
        SURfREVTQyk7CiAgfQogIHJldHVybiByZXQ7Cn07CgovKioKICBAcHJpdmF0
        ZQoKICBSZXR1cm5zIGEgdW5pcXVlIGlkIGZvciB0aGUgb2JqZWN0LiBJZiB0
        aGUgb2JqZWN0IGRvZXMgbm90IHlldCBoYXZlIGEgZ3VpZCwKICBvbmUgd2ls
        bCBiZSBhc3NpZ25lZCB0byBpdC4gWW91IGNhbiBjYWxsIHRoaXMgb24gYW55
        IG9iamVjdCwKICBgRW1iZXIuT2JqZWN0YC1iYXNlZCBvciBub3QsIGJ1dCBi
        ZSBhd2FyZSB0aGF0IGl0IHdpbGwgYWRkIGEgYF9ndWlkYAogIHByb3BlcnR5
        LgoKICBZb3UgY2FuIGFsc28gdXNlIHRoaXMgbWV0aG9kIG9uIERPTSBFbGVt
        ZW50IG9iamVjdHMuCgogIEBtZXRob2QgZ3VpZEZvcgogIEBmb3IgRW1iZXIK
        ICBAcGFyYW0ge09iamVjdH0gb2JqIGFueSBvYmplY3QsIHN0cmluZywgbnVt
        YmVyLCBFbGVtZW50LCBvciBwcmltaXRpdmUKICBAcmV0dXJuIHtTdHJpbmd9
        IHRoZSB1bmlxdWUgZ3VpZCBmb3IgdGhpcyBpbnN0YW5jZS4KKi8KRW1iZXIu
        Z3VpZEZvciA9IGZ1bmN0aW9uIGd1aWRGb3Iob2JqKSB7CgogIC8vIHNwZWNp
        YWwgY2FzZXMgd2hlcmUgd2UgZG9uJ3Qgd2FudCB0byBhZGQgYSBrZXkgdG8g
        b2JqZWN0CiAgaWYgKG9iaiA9PT0gdW5kZWZpbmVkKSByZXR1cm4gIih1bmRl
        ZmluZWQpIjsKICBpZiAob2JqID09PSBudWxsKSByZXR1cm4gIihudWxsKSI7
        CgogIHZhciByZXQ7CiAgdmFyIHR5cGUgPSB0eXBlb2Ygb2JqOwoKICAvLyBE
        b24ndCBhbGxvdyBwcm90b3R5cGUgY2hhbmdlcyB0byBTdHJpbmcgZXRjLiB0
        byBjaGFuZ2UgdGhlIGd1aWRGb3IKICBzd2l0Y2godHlwZSkgewogICAgY2Fz
        ZSAnbnVtYmVyJzoKICAgICAgcmV0ID0gbnVtYmVyQ2FjaGVbb2JqXTsKICAg
        ICAgaWYgKCFyZXQpIHJldCA9IG51bWJlckNhY2hlW29ial0gPSAnbnUnK29i
        ajsKICAgICAgcmV0dXJuIHJldDsKCiAgICBjYXNlICdzdHJpbmcnOgogICAg
        ICByZXQgPSBzdHJpbmdDYWNoZVtvYmpdOwogICAgICBpZiAoIXJldCkgcmV0
        ID0gc3RyaW5nQ2FjaGVbb2JqXSA9ICdzdCcrKHV1aWQrKyk7CiAgICAgIHJl
        dHVybiByZXQ7CgogICAgY2FzZSAnYm9vbGVhbic6CiAgICAgIHJldHVybiBv
        YmogPyAnKHRydWUpJyA6ICcoZmFsc2UpJzsKCiAgICBkZWZhdWx0OgogICAg
        ICBpZiAob2JqW0dVSURfS0VZXSkgcmV0dXJuIG9ialtHVUlEX0tFWV07CiAg
        ICAgIGlmIChvYmogPT09IE9iamVjdCkgcmV0dXJuICcoT2JqZWN0KSc7CiAg
        ICAgIGlmIChvYmogPT09IEFycmF5KSAgcmV0dXJuICcoQXJyYXkpJzsKICAg
        ICAgcmV0ID0gJ2VtYmVyJysodXVpZCsrKTsKICAgICAgR1VJRF9ERVNDLnZh
        bHVlID0gcmV0OwogICAgICBvX2RlZmluZVByb3BlcnR5KG9iaiwgR1VJRF9L
        RVksIEdVSURfREVTQyk7CiAgICAgIHJldHVybiByZXQ7CiAgfQp9OwoKLy8g
        Li4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4u
        Li4uLi4uLi4uLi4uLgovLyBNRVRBCi8vCgp2YXIgTUVUQV9ERVNDID0gewog
        IHdyaXRhYmxlOiAgICB0cnVlLAogIGNvbmZpZ3VyYWJsZTogZmFsc2UsCiAg
        ZW51bWVyYWJsZTogIGZhbHNlLAogIHZhbHVlOiBudWxsCn07Cgp2YXIgTUVU
        QV9LRVkgPSBFbWJlci5HVUlEX0tFWSsnX21ldGEnOwoKLyoqCiAgVGhlIGtl
        eSB1c2VkIHRvIHN0b3JlIG1ldGEgaW5mb3JtYXRpb24gb24gb2JqZWN0IGZv
        ciBwcm9wZXJ0eSBvYnNlcnZpbmcuCgogIEBwcm9wZXJ0eSBNRVRBX0tFWQog
        IEBmb3IgRW1iZXIKICBAcHJpdmF0ZQogIEBmaW5hbAogIEB0eXBlIFN0cmlu
        ZwoqLwpFbWJlci5NRVRBX0tFWSA9IE1FVEFfS0VZOwoKLy8gUGxhY2Vob2xk
        ZXIgZm9yIG5vbi13cml0YWJsZSBtZXRhcy4KdmFyIEVNUFRZX01FVEEgPSB7
        CiAgZGVzY3M6IHt9LAogIHdhdGNoaW5nOiB7fQp9OwoKaWYgKE1BTkRBVE9S
        WV9TRVRURVIpIHsgRU1QVFlfTUVUQS52YWx1ZXMgPSB7fTsgfQoKRW1iZXIu
        RU1QVFlfTUVUQSA9IEVNUFRZX01FVEE7CgppZiAoT2JqZWN0LmZyZWV6ZSkg
        T2JqZWN0LmZyZWV6ZShFTVBUWV9NRVRBKTsKCnZhciBpc0RlZmluZVByb3Bl
        cnR5U2ltdWxhdGVkID0gRW1iZXIucGxhdGZvcm0uZGVmaW5lUHJvcGVydHku
        aXNTaW11bGF0ZWQ7CgpmdW5jdGlvbiBNZXRhKG9iaikgewogIHRoaXMuZGVz
        Y3MgPSB7fTsKICB0aGlzLndhdGNoaW5nID0ge307CiAgdGhpcy5jYWNoZSA9
        IHt9OwogIHRoaXMuc291cmNlID0gb2JqOwp9CgppZiAoaXNEZWZpbmVQcm9w
        ZXJ0eVNpbXVsYXRlZCkgewogIC8vIG9uIHBsYXRmb3JtcyB0aGF0IGRvbid0
        IHN1cHBvcnQgZW51bWVyYWJsZSBmYWxzZQogIC8vIG1ha2UgbWV0YSBmYWls
        IGpRdWVyeS5pc1BsYWluT2JqZWN0KCkgdG8gaGlkZSBmcm9tCiAgLy8galF1
        ZXJ5LmV4dGVuZCgpIGJ5IGhhdmluZyBhIHByb3BlcnR5IHRoYXQgZmFpbHMK
        ICAvLyBoYXNPd25Qcm9wZXJ0eSBjaGVjay4KICBNZXRhLnByb3RvdHlwZS5f
        X3ByZXZlbnRQbGFpbk9iamVjdF9fID0gdHJ1ZTsKCiAgLy8gV2l0aG91dCBu
        b24tZW51bWVyYWJsZSBwcm9wZXJ0aWVzLCBtZXRhIG9iamVjdHMgd2lsbCBi
        ZSBvdXRwdXQgaW4gSlNPTgogIC8vIHVubGVzcyBleHBsaWNpdGx5IHN1cHBy
        ZXNzZWQKICBNZXRhLnByb3RvdHlwZS50b0pTT04gPSBmdW5jdGlvbiAoKSB7
        IH07Cn0KCi8qKgogIFJldHJpZXZlcyB0aGUgbWV0YSBoYXNoIGZvciBhbiBv
        YmplY3QuIElmIGB3cml0YWJsZWAgaXMgdHJ1ZSBlbnN1cmVzIHRoZQogIGhh
        c2ggaXMgd3JpdGFibGUgZm9yIHRoaXMgb2JqZWN0IGFzIHdlbGwuCgogIFRo
        ZSBtZXRhIG9iamVjdCBjb250YWlucyBpbmZvcm1hdGlvbiBhYm91dCBjb21w
        dXRlZCBwcm9wZXJ0eSBkZXNjcmlwdG9ycyBhcwogIHdlbGwgYXMgYW55IHdh
        dGNoZWQgcHJvcGVydGllcyBhbmQgb3RoZXIgaW5mb3JtYXRpb24uIFlvdSBn
        ZW5lcmFsbHkgd2lsbAogIG5vdCBhY2Nlc3MgdGhpcyBpbmZvcm1hdGlvbiBk
        aXJlY3RseSBidXQgaW5zdGVhZCB3b3JrIHdpdGggaGlnaGVyIGxldmVsCiAg
        bWV0aG9kcyB0aGF0IG1hbmlwdWxhdGUgdGhpcyBoYXNoIGluZGlyZWN0bHku
        CgogIEBtZXRob2QgbWV0YQogIEBmb3IgRW1iZXIKICBAcHJpdmF0ZQoKICBA
        cGFyYW0ge09iamVjdH0gb2JqIFRoZSBvYmplY3QgdG8gcmV0cmlldmUgbWV0
        YSBmb3IKICBAcGFyYW0ge0Jvb2xlYW59IFt3cml0YWJsZT10cnVlXSBQYXNz
        IGBmYWxzZWAgaWYgeW91IGRvIG5vdCBpbnRlbmQgdG8gbW9kaWZ5CiAgICB0
        aGUgbWV0YSBoYXNoLCBhbGxvd2luZyB0aGUgbWV0aG9kIHRvIGF2b2lkIG1h
        a2luZyBhbiB1bm5lY2Vzc2FyeSBjb3B5LgogIEByZXR1cm4ge09iamVjdH0g
        dGhlIG1ldGEgaGFzaCBmb3IgYW4gb2JqZWN0CiovCkVtYmVyLm1ldGEgPSBm
        dW5jdGlvbiBtZXRhKG9iaiwgd3JpdGFibGUpIHsKCiAgdmFyIHJldCA9IG9i
        altNRVRBX0tFWV07CiAgaWYgKHdyaXRhYmxlPT09ZmFsc2UpIHJldHVybiBy
        ZXQgfHwgRU1QVFlfTUVUQTsKCiAgaWYgKCFyZXQpIHsKICAgIGlmICghaXNE
        ZWZpbmVQcm9wZXJ0eVNpbXVsYXRlZCkgb19kZWZpbmVQcm9wZXJ0eShvYmos
        IE1FVEFfS0VZLCBNRVRBX0RFU0MpOwoKICAgIHJldCA9IG5ldyBNZXRhKG9i
        aik7CgogICAgaWYgKE1BTkRBVE9SWV9TRVRURVIpIHsgcmV0LnZhbHVlcyA9
        IHt9OyB9CgogICAgb2JqW01FVEFfS0VZXSA9IHJldDsKCiAgICAvLyBtYWtl
        IHN1cmUgd2UgZG9uJ3QgYWNjaWRlbnRhbGx5IHRyeSB0byBjcmVhdGUgY29u
        c3RydWN0b3IgbGlrZSBkZXNjCiAgICByZXQuZGVzY3MuY29uc3RydWN0b3Ig
        PSBudWxsOwoKICB9IGVsc2UgaWYgKHJldC5zb3VyY2UgIT09IG9iaikgewog
        ICAgaWYgKCFpc0RlZmluZVByb3BlcnR5U2ltdWxhdGVkKSBvX2RlZmluZVBy
        b3BlcnR5KG9iaiwgTUVUQV9LRVksIE1FVEFfREVTQyk7CgogICAgcmV0ID0g
        b19jcmVhdGUocmV0KTsKICAgIHJldC5kZXNjcyAgICA9IG9fY3JlYXRlKHJl
        dC5kZXNjcyk7CiAgICByZXQud2F0Y2hpbmcgPSBvX2NyZWF0ZShyZXQud2F0
        Y2hpbmcpOwogICAgcmV0LmNhY2hlICAgID0ge307CiAgICByZXQuc291cmNl
        ICAgPSBvYmo7CgogICAgaWYgKE1BTkRBVE9SWV9TRVRURVIpIHsgcmV0LnZh
        bHVlcyA9IG9fY3JlYXRlKHJldC52YWx1ZXMpOyB9CgogICAgb2JqW01FVEFf
        S0VZXSA9IHJldDsKICB9CiAgcmV0dXJuIHJldDsKfTsKCkVtYmVyLmdldE1l
        dGEgPSBmdW5jdGlvbiBnZXRNZXRhKG9iaiwgcHJvcGVydHkpIHsKICB2YXIg
        bWV0YSA9IEVtYmVyLm1ldGEob2JqLCBmYWxzZSk7CiAgcmV0dXJuIG1ldGFb
        cHJvcGVydHldOwp9OwoKRW1iZXIuc2V0TWV0YSA9IGZ1bmN0aW9uIHNldE1l
        dGEob2JqLCBwcm9wZXJ0eSwgdmFsdWUpIHsKICB2YXIgbWV0YSA9IEVtYmVy
        Lm1ldGEob2JqLCB0cnVlKTsKICBtZXRhW3Byb3BlcnR5XSA9IHZhbHVlOwog
        IHJldHVybiB2YWx1ZTsKfTsKCi8qKgogIEBkZXByZWNhdGVkCiAgQHByaXZh
        dGUKCiAgSW4gb3JkZXIgdG8gc3RvcmUgZGVmYXVsdHMgZm9yIGEgY2xhc3Ms
        IGEgcHJvdG90eXBlIG1heSBuZWVkIHRvIGNyZWF0ZQogIGEgZGVmYXVsdCBt
        ZXRhIG9iamVjdCwgd2hpY2ggd2lsbCBiZSBpbmhlcml0ZWQgYnkgYW55IG9i
        amVjdHMgaW5zdGFudGlhdGVkCiAgZnJvbSB0aGUgY2xhc3MncyBjb25zdHJ1
        Y3Rvci4KCiAgSG93ZXZlciwgdGhlIHByb3BlcnRpZXMgb2YgdGhhdCBtZXRh
        IG9iamVjdCBhcmUgb25seSBzaGFsbG93LWNsb25lZCwKICBzbyBpZiBhIHBy
        b3BlcnR5IGlzIGEgaGFzaCAobGlrZSB0aGUgZXZlbnQgc3lzdGVtJ3MgYGxp
        c3RlbmVyc2AgaGFzaCksCiAgaXQgd2lsbCBieSBkZWZhdWx0IGJlIHNoYXJl
        ZCBhY3Jvc3MgYWxsIGluc3RhbmNlcyBvZiB0aGF0IGNsYXNzLgoKICBUaGlz
        IG1ldGhvZCBhbGxvd3MgZXh0ZW5zaW9ucyB0byBkZWVwbHkgY2xvbmUgYSBz
        ZXJpZXMgb2YgbmVzdGVkIGhhc2hlcyBvcgogIG90aGVyIGNvbXBsZXggb2Jq
        ZWN0cy4gRm9yIGluc3RhbmNlLCB0aGUgZXZlbnQgc3lzdGVtIG1pZ2h0IHBh
        c3MKICBgWydsaXN0ZW5lcnMnLCAnZm9vOmNoYW5nZScsICdlbWJlcjE1Nydd
        YCB0byBgcHJlcGFyZU1ldGFQYXRoYCwgd2hpY2ggd2lsbAogIHdhbGsgZG93
        biB0aGUga2V5cyBwcm92aWRlZC4KCiAgRm9yIGVhY2gga2V5LCBpZiB0aGUg
        a2V5IGRvZXMgbm90IGV4aXN0LCBpdCBpcyBjcmVhdGVkLiBJZiBpdCBhbHJl
        YWR5CiAgZXhpc3RzIGFuZCBpdCB3YXMgaW5oZXJpdGVkIGZyb20gaXRzIGNv
        bnN0cnVjdG9yLCB0aGUgY29uc3RydWN0b3IncwogIGtleSBpcyBjbG9uZWQu
        CgogIFlvdSBjYW4gYWxzbyBwYXNzIGZhbHNlIGZvciBgd3JpdGFibGVgLCB3
        aGljaCB3aWxsIHNpbXBseSByZXR1cm4KICB1bmRlZmluZWQgaWYgYHByZXBh
        cmVNZXRhUGF0aGAgZGlzY292ZXJzIGFueSBwYXJ0IG9mIHRoZSBwYXRoIHRo
        YXQKICBzaGFyZWQgb3IgdW5kZWZpbmVkLgoKICBAbWV0aG9kIG1ldGFQYXRo
        CiAgQGZvciBFbWJlcgogIEBwYXJhbSB7T2JqZWN0fSBvYmogVGhlIG9iamVj
        dCB3aG9zZSBtZXRhIHdlIGFyZSBleGFtaW5pbmcKICBAcGFyYW0ge0FycmF5
        fSBwYXRoIEFuIGFycmF5IG9mIGtleXMgdG8gd2FsayBkb3duCiAgQHBhcmFt
        IHtCb29sZWFufSB3cml0YWJsZSB3aGV0aGVyIG9yIG5vdCB0byBjcmVhdGUg
        YSBuZXcgbWV0YQogICAgKG9yIG1ldGEgcHJvcGVydHkpIGlmIG9uZSBkb2Vz
        IG5vdCBhbHJlYWR5IGV4aXN0IG9yIGlmIGl0J3MKICAgIHNoYXJlZCB3aXRo
        IGl0cyBjb25zdHJ1Y3RvcgoqLwpFbWJlci5tZXRhUGF0aCA9IGZ1bmN0aW9u
        IG1ldGFQYXRoKG9iaiwgcGF0aCwgd3JpdGFibGUpIHsKICBFbWJlci5kZXBy
        ZWNhdGUoIkVtYmVyLm1ldGFQYXRoIGlzIGRlcHJlY2F0ZWQgYW5kIHdpbGwg
        YmUgcmVtb3ZlZCBmcm9tIGZ1dHVyZSByZWxlYXNlcy4iKTsKICB2YXIgbWV0
        YSA9IEVtYmVyLm1ldGEob2JqLCB3cml0YWJsZSksIGtleU5hbWUsIHZhbHVl
        OwoKICBmb3IgKHZhciBpPTAsIGw9cGF0aC5sZW5ndGg7IGk8bDsgaSsrKSB7
        CiAgICBrZXlOYW1lID0gcGF0aFtpXTsKICAgIHZhbHVlID0gbWV0YVtrZXlO
        YW1lXTsKCiAgICBpZiAoIXZhbHVlKSB7CiAgICAgIGlmICghd3JpdGFibGUp
        IHsgcmV0dXJuIHVuZGVmaW5lZDsgfQogICAgICB2YWx1ZSA9IG1ldGFba2V5
        TmFtZV0gPSB7IF9fZW1iZXJfc291cmNlX186IG9iaiB9OwogICAgfSBlbHNl
        IGlmICh2YWx1ZS5fX2VtYmVyX3NvdXJjZV9fICE9PSBvYmopIHsKICAgICAg
        aWYgKCF3cml0YWJsZSkgeyByZXR1cm4gdW5kZWZpbmVkOyB9CiAgICAgIHZh
        bHVlID0gbWV0YVtrZXlOYW1lXSA9IG9fY3JlYXRlKHZhbHVlKTsKICAgICAg
        dmFsdWUuX19lbWJlcl9zb3VyY2VfXyA9IG9iajsKICAgIH0KCiAgICBtZXRh
        ID0gdmFsdWU7CiAgfQoKICByZXR1cm4gdmFsdWU7Cn07CgovKioKICBAcHJp
        dmF0ZQoKICBXcmFwcyB0aGUgcGFzc2VkIGZ1bmN0aW9uIHNvIHRoYXQgYHRo
        aXMuX3N1cGVyYCB3aWxsIHBvaW50IHRvIHRoZSBzdXBlckZ1bmMKICB3aGVu
        IHRoZSBmdW5jdGlvbiBpcyBpbnZva2VkLiBUaGlzIGlzIHRoZSBwcmltaXRp
        dmUgd2UgdXNlIHRvIGltcGxlbWVudAogIGNhbGxzIHRvIHN1cGVyLgoKICBA
        bWV0aG9kIHdyYXAKICBAZm9yIEVtYmVyCiAgQHBhcmFtIHtGdW5jdGlvbn0g
        ZnVuYyBUaGUgZnVuY3Rpb24gdG8gY2FsbAogIEBwYXJhbSB7RnVuY3Rpb259
        IHN1cGVyRnVuYyBUaGUgc3VwZXIgZnVuY3Rpb24uCiAgQHJldHVybiB7RnVu
        Y3Rpb259IHdyYXBwZWQgZnVuY3Rpb24uCiovCkVtYmVyLndyYXAgPSBmdW5j
        dGlvbihmdW5jLCBzdXBlckZ1bmMpIHsKICBmdW5jdGlvbiBLKCkge30KCiAg
        ZnVuY3Rpb24gc3VwZXJXcmFwcGVyKCkgewogICAgdmFyIHJldCwgc3VwID0g
        dGhpcy5fc3VwZXI7CiAgICB0aGlzLl9zdXBlciA9IHN1cGVyRnVuYyB8fCBL
        OwogICAgcmV0ID0gZnVuYy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAg
        dGhpcy5fc3VwZXIgPSBzdXA7CiAgICByZXR1cm4gcmV0OwogIH0KCiAgc3Vw
        ZXJXcmFwcGVyLndyYXBwZWRGdW5jdGlvbiA9IGZ1bmM7CiAgc3VwZXJXcmFw
        cGVyLl9fZW1iZXJfb2JzZXJ2ZXNfXyA9IGZ1bmMuX19lbWJlcl9vYnNlcnZl
        c19fOwogIHN1cGVyV3JhcHBlci5fX2VtYmVyX29ic2VydmVzQmVmb3JlX18g
        PSBmdW5jLl9fZW1iZXJfb2JzZXJ2ZXNCZWZvcmVfXzsKICBzdXBlcldyYXBw
        ZXIuX19lbWJlcl9saXN0ZW5zX18gPSBmdW5jLl9fZW1iZXJfbGlzdGVuc19f
        OwoKICByZXR1cm4gc3VwZXJXcmFwcGVyOwp9OwoKLyoqCiAgUmV0dXJucyB0
        cnVlIGlmIHRoZSBwYXNzZWQgb2JqZWN0IGlzIGFuIGFycmF5IG9yIEFycmF5
        LWxpa2UuCgogIEVtYmVyIEFycmF5IFByb3RvY29sOgoKICAgIC0gdGhlIG9i
        amVjdCBoYXMgYW4gb2JqZWN0QXQgcHJvcGVydHkKICAgIC0gdGhlIG9iamVj
        dCBpcyBhIG5hdGl2ZSBBcnJheQogICAgLSB0aGUgb2JqZWN0IGlzIGFuIE9i
        amVjdCwgYW5kIGhhcyBhIGxlbmd0aCBwcm9wZXJ0eQoKICBVbmxpa2UgYEVt
        YmVyLnR5cGVPZmAgdGhpcyBtZXRob2QgcmV0dXJucyB0cnVlIGV2ZW4gaWYg
        dGhlIHBhc3NlZCBvYmplY3QgaXMKICBub3QgZm9ybWFsbHkgYXJyYXkgYnV0
        IGFwcGVhcnMgdG8gYmUgYXJyYXktbGlrZSAoaS5lLiBpbXBsZW1lbnRzIGBF
        bWJlci5BcnJheWApCgogIGBgYGphdmFzY3JpcHQKICBFbWJlci5pc0FycmF5
        KCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
        ICAvLyBmYWxzZQogIEVtYmVyLmlzQXJyYXkoW10pOyAgICAgICAgICAgICAg
        ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRydWUKICBFbWJlci5p
        c0FycmF5KCBFbWJlci5BcnJheVByb3h5LmNyZWF0ZSh7IGNvbnRlbnQ6IFtd
        IH0pICk7ICAvLyB0cnVlCiAgYGBgCgogIEBtZXRob2QgaXNBcnJheQogIEBm
        b3IgRW1iZXIKICBAcGFyYW0ge09iamVjdH0gb2JqIFRoZSBvYmplY3QgdG8g
        dGVzdAogIEByZXR1cm4ge0Jvb2xlYW59IHRydWUgaWYgdGhlIHBhc3NlZCBv
        YmplY3QgaXMgYW4gYXJyYXkgb3IgQXJyYXktbGlrZQoqLwpFbWJlci5pc0Fy
        cmF5ID0gZnVuY3Rpb24ob2JqKSB7CiAgaWYgKCFvYmogfHwgb2JqLnNldElu
        dGVydmFsKSB7IHJldHVybiBmYWxzZTsgfQogIGlmIChBcnJheS5pc0FycmF5
        ICYmIEFycmF5LmlzQXJyYXkob2JqKSkgeyByZXR1cm4gdHJ1ZTsgfQogIGlm
        IChFbWJlci5BcnJheSAmJiBFbWJlci5BcnJheS5kZXRlY3Qob2JqKSkgeyBy
        ZXR1cm4gdHJ1ZTsgfQogIGlmICgob2JqLmxlbmd0aCAhPT0gdW5kZWZpbmVk
        KSAmJiAnb2JqZWN0Jz09PXR5cGVvZiBvYmopIHsgcmV0dXJuIHRydWU7IH0K
        ICByZXR1cm4gZmFsc2U7Cn07CgovKioKICBGb3JjZXMgdGhlIHBhc3NlZCBv
        YmplY3QgdG8gYmUgcGFydCBvZiBhbiBhcnJheS4gSWYgdGhlIG9iamVjdCBp
        cyBhbHJlYWR5CiAgYW4gYXJyYXkgb3IgYXJyYXktbGlrZSwgcmV0dXJucyB0
        aGUgb2JqZWN0LiBPdGhlcndpc2UgYWRkcyB0aGUgb2JqZWN0IHRvCiAgYW4g
        YXJyYXkuIElmIG9iaiBpcyBgbnVsbGAgb3IgYHVuZGVmaW5lZGAsIHJldHVy
        bnMgYW4gZW1wdHkgYXJyYXkuCgogIGBgYGphdmFzY3JpcHQKICBFbWJlci5t
        YWtlQXJyYXkoKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBbXQog
        IEVtYmVyLm1ha2VBcnJheShudWxsKTsgICAgICAgICAgICAgICAgICAgICAg
        IC8vIFtdCiAgRW1iZXIubWFrZUFycmF5KHVuZGVmaW5lZCk7ICAgICAgICAg
        ICAgICAgICAgLy8gW10KICBFbWJlci5tYWtlQXJyYXkoJ2xpbmRzYXknKTsg
        ICAgICAgICAgICAgICAgICAvLyBbJ2xpbmRzYXknXQogIEVtYmVyLm1ha2VB
        cnJheShbMSwyLDQyXSk7ICAgICAgICAgICAgICAgICAgIC8vIFsxLDIsNDJd
        CgogIHZhciBjb250cm9sbGVyID0gRW1iZXIuQXJyYXlQcm94eS5jcmVhdGUo
        eyBjb250ZW50OiBbXSB9KTsKICBFbWJlci5tYWtlQXJyYXkoY29udHJvbGxl
        cikgPT09IGNvbnRyb2xsZXI7ICAvLyB0cnVlCiAgYGBgCgogIEBtZXRob2Qg
        bWFrZUFycmF5CiAgQGZvciBFbWJlcgogIEBwYXJhbSB7T2JqZWN0fSBvYmog
        dGhlIG9iamVjdAogIEByZXR1cm4ge0FycmF5fQoqLwpFbWJlci5tYWtlQXJy
        YXkgPSBmdW5jdGlvbihvYmopIHsKICBpZiAob2JqID09PSBudWxsIHx8IG9i
        aiA9PT0gdW5kZWZpbmVkKSB7IHJldHVybiBbXTsgfQogIHJldHVybiBFbWJl
        ci5pc0FycmF5KG9iaikgPyBvYmogOiBbb2JqXTsKfTsKCmZ1bmN0aW9uIGNh
        bkludm9rZShvYmosIG1ldGhvZE5hbWUpIHsKICByZXR1cm4gISEob2JqICYm
        IHR5cGVvZiBvYmpbbWV0aG9kTmFtZV0gPT09ICdmdW5jdGlvbicpOwp9Cgov
        KioKICBDaGVja3MgdG8gc2VlIGlmIHRoZSBgbWV0aG9kTmFtZWAgZXhpc3Rz
        IG9uIHRoZSBgb2JqYC4KCiAgYGBgamF2YXNjcmlwdAogIHZhciBmb28gPSB7
        YmFyOiBFbWJlci5LLCBiYXo6IG51bGx9OwogIEVtYmVyLmNhbkludm9rZShm
        b28sICdiYXInKTsgLy8gdHJ1ZQogIEVtYmVyLmNhbkludm9rZShmb28sICdi
        YXonKTsgLy8gZmFsc2UKICBFbWJlci5jYW5JbnZva2UoZm9vLCAnYmF0Jyk7
        IC8vIGZhbHNlCiAgYGBgCgogIEBtZXRob2QgY2FuSW52b2tlCiAgQGZvciBF
        bWJlcgogIEBwYXJhbSB7T2JqZWN0fSBvYmogVGhlIG9iamVjdCB0byBjaGVj
        ayBmb3IgdGhlIG1ldGhvZAogIEBwYXJhbSB7U3RyaW5nfSBtZXRob2ROYW1l
        IFRoZSBtZXRob2QgbmFtZSB0byBjaGVjayBmb3IKICBAcmV0dXJuIHtCb29s
        ZWFufQoqLwpFbWJlci5jYW5JbnZva2UgPSBjYW5JbnZva2U7CgovKioKICBD
        aGVja3MgdG8gc2VlIGlmIHRoZSBgbWV0aG9kTmFtZWAgZXhpc3RzIG9uIHRo
        ZSBgb2JqYCwKICBhbmQgaWYgaXQgZG9lcywgaW52b2tlcyBpdCB3aXRoIHRo
        ZSBhcmd1bWVudHMgcGFzc2VkLgoKICBgYGBqYXZhc2NyaXB0CiAgdmFyIGQg
        PSBuZXcgRGF0ZSgnMDMvMTUvMjAxMycpOwogIEVtYmVyLnRyeUludm9rZShk
        LCAnZ2V0VGltZScpOyAvLyAxMzYzMzIwMDAwMDAwCiAgRW1iZXIudHJ5SW52
        b2tlKGQsICdzZXRGdWxsWWVhcicsIFsyMDE0XSk7IC8vIDEzOTQ4NTYwMDAw
        MDAKICBFbWJlci50cnlJbnZva2UoZCwgJ25vU3VjaE1ldGhvZCcsIFsyMDE0
        XSk7IC8vIHVuZGVmaW5lZAogIGBgYAoKICBAbWV0aG9kIHRyeUludm9rZQog
        IEBmb3IgRW1iZXIKICBAcGFyYW0ge09iamVjdH0gb2JqIFRoZSBvYmplY3Qg
        dG8gY2hlY2sgZm9yIHRoZSBtZXRob2QKICBAcGFyYW0ge1N0cmluZ30gbWV0
        aG9kTmFtZSBUaGUgbWV0aG9kIG5hbWUgdG8gY2hlY2sgZm9yCiAgQHBhcmFt
        IHtBcnJheX0gW2FyZ3NdIFRoZSBhcmd1bWVudHMgdG8gcGFzcyB0byB0aGUg
        bWV0aG9kCiAgQHJldHVybiB7Kn0gdGhlIHJldHVybiB2YWx1ZSBvZiB0aGUg
        aW52b2tlZCBtZXRob2Qgb3IgdW5kZWZpbmVkIGlmIGl0IGNhbm5vdCBiZSBp
        bnZva2VkCiovCkVtYmVyLnRyeUludm9rZSA9IGZ1bmN0aW9uKG9iaiwgbWV0
        aG9kTmFtZSwgYXJncykgewogIGlmIChjYW5JbnZva2Uob2JqLCBtZXRob2RO
        YW1lKSkgewogICAgcmV0dXJuIG9ialttZXRob2ROYW1lXS5hcHBseShvYmos
        IGFyZ3MgfHwgW10pOwogIH0KfTsKCi8vIGh0dHBzOi8vZ2l0aHViLmNvbS9l
        bWJlcmpzL2VtYmVyLmpzL3B1bGwvMTYxNwp2YXIgbmVlZHNGaW5hbGx5Rml4
        ID0gKGZ1bmN0aW9uKCkgewogIHZhciBjb3VudCA9IDA7CiAgdHJ5ewogICAg
        dHJ5IHsgfQogICAgZmluYWxseSB7CiAgICAgIGNvdW50Kys7CiAgICAgIHRo
        cm93IG5ldyBFcnJvcignbmVlZHNGaW5hbGx5Rml4VGVzdCcpOwogICAgfQog
        IH0gY2F0Y2ggKGUpIHt9CgogIHJldHVybiBjb3VudCAhPT0gMTsKfSkoKTsK
        Ci8qKgogIFByb3ZpZGVzIHRyeSB7IH0gZmluYWxseSB7IH0gZnVuY3Rpb25h
        bGl0eSwgd2hpbGUgd29ya2luZwogIGFyb3VuZCBTYWZhcmkncyBkb3VibGUg
        ZmluYWxseSBidWcuCgogIGBgYGphdmFzY3JpcHQKICB2YXIgdHJ5YWJsZSA9
        IGZ1bmN0aW9uKCkgewogICAgc29tZVJlc291cmNlLmxvY2soKTsKICAgIHJ1
        bkNhbGxiYWNrKCk7IC8vIE1heSB0aHJvdyBlcnJvci4KICB9OwogIHZhciBm
        aW5hbGl6ZXIgPSBmdW5jdGlvbigpIHsKICAgIHNvbWVSZXNvdXJjZS51bmxv
        Y2soKTsKICB9OwogIEVtYmVyLnRyeUZpbmFsbHkodHJ5YWJsZSwgZmluYWxp
        emVyKTsKICBgYGAKCiAgQG1ldGhvZCB0cnlGaW5hbGx5CiAgQGZvciBFbWJl
        cgogIEBwYXJhbSB7RnVuY3Rpb259IHRyeWFibGUgVGhlIGZ1bmN0aW9uIHRv
        IHJ1biB0aGUgdHJ5IGNhbGxiYWNrCiAgQHBhcmFtIHtGdW5jdGlvbn0gZmlu
        YWxpemVyIFRoZSBmdW5jdGlvbiB0byBydW4gdGhlIGZpbmFsbHkgY2FsbGJh
        Y2sKICBAcGFyYW0ge09iamVjdH0gW2JpbmRpbmddIFRoZSBvcHRpb25hbCBj
        YWxsaW5nIG9iamVjdC4gRGVmYXVsdHMgdG8gJ3RoaXMnCiAgQHJldHVybiB7
        Kn0gVGhlIHJldHVybiB2YWx1ZSBpcyB0aGUgdGhhdCBvZiB0aGUgZmluYWxp
        emVyLAogIHVubGVzcyB0aGF0IHZhbHVlIGlzIHVuZGVmaW5lZCwgaW4gd2hp
        Y2ggY2FzZSBpdCBpcyB0aGUgcmV0dXJuIHZhbHVlCiAgb2YgdGhlIHRyeWFi
        bGUKKi8KCmlmIChuZWVkc0ZpbmFsbHlGaXgpIHsKICBFbWJlci50cnlGaW5h
        bGx5ID0gZnVuY3Rpb24odHJ5YWJsZSwgZmluYWxpemVyLCBiaW5kaW5nKSB7
        CiAgICB2YXIgcmVzdWx0LCBmaW5hbFJlc3VsdCwgZmluYWxFcnJvcjsKCiAg
        ICBiaW5kaW5nID0gYmluZGluZyB8fCB0aGlzOwoKICAgIHRyeSB7CiAgICAg
        IHJlc3VsdCA9IHRyeWFibGUuY2FsbChiaW5kaW5nKTsKICAgIH0gZmluYWxs
        eSB7CiAgICAgIHRyeSB7CiAgICAgICAgZmluYWxSZXN1bHQgPSBmaW5hbGl6
        ZXIuY2FsbChiaW5kaW5nKTsKICAgICAgfSBjYXRjaCAoZSkgewogICAgICAg
        IGZpbmFsRXJyb3IgPSBlOwogICAgICB9CiAgICB9CgogICAgaWYgKGZpbmFs
        RXJyb3IpIHsgdGhyb3cgZmluYWxFcnJvcjsgfQoKICAgIHJldHVybiAoZmlu
        YWxSZXN1bHQgPT09IHVuZGVmaW5lZCkgPyByZXN1bHQgOiBmaW5hbFJlc3Vs
        dDsKICB9Owp9IGVsc2UgewogIEVtYmVyLnRyeUZpbmFsbHkgPSBmdW5jdGlv
        bih0cnlhYmxlLCBmaW5hbGl6ZXIsIGJpbmRpbmcpIHsKICAgIHZhciByZXN1
        bHQsIGZpbmFsUmVzdWx0OwoKICAgIGJpbmRpbmcgPSBiaW5kaW5nIHx8IHRo
        aXM7CgogICAgdHJ5IHsKICAgICAgcmVzdWx0ID0gdHJ5YWJsZS5jYWxsKGJp
        bmRpbmcpOwogICAgfSBmaW5hbGx5IHsKICAgICAgZmluYWxSZXN1bHQgPSBm
        aW5hbGl6ZXIuY2FsbChiaW5kaW5nKTsKICAgIH0KCiAgICByZXR1cm4gKGZp
        bmFsUmVzdWx0ID09PSB1bmRlZmluZWQpID8gcmVzdWx0IDogZmluYWxSZXN1
        bHQ7CiAgfTsKfQoKLyoqCiAgUHJvdmlkZXMgdHJ5IHsgfSBjYXRjaCBmaW5h
        bGx5IHsgfSBmdW5jdGlvbmFsaXR5LCB3aGlsZSB3b3JraW5nCiAgYXJvdW5k
        IFNhZmFyaSdzIGRvdWJsZSBmaW5hbGx5IGJ1Zy4KCiAgYGBgamF2YXNjcmlw
        dAogIHZhciB0cnlhYmxlID0gZnVuY3Rpb24oKSB7CiAgICBmb3IgKGk9MCwg
        bD1saXN0ZW5lcnMubGVuZ3RoOyBpPGw7IGkrKykgewogICAgICBsaXN0ZW5l
        ciA9IGxpc3RlbmVyc1tpXTsKICAgICAgYmVmb3JlVmFsdWVzW2ldID0gbGlz
        dGVuZXIuYmVmb3JlKG5hbWUsIHRpbWUoKSwgcGF5bG9hZCk7CiAgICB9Cgog
        ICAgcmV0dXJuIGNhbGxiYWNrLmNhbGwoYmluZGluZyk7CiAgfTsKCiAgdmFy
        IGNhdGNoYWJsZSA9IGZ1bmN0aW9uKGUpIHsKICAgIHBheWxvYWQgPSBwYXls
        b2FkIHx8IHt9OwogICAgcGF5bG9hZC5leGNlcHRpb24gPSBlOwogIH07Cgog
        IHZhciBmaW5hbGl6ZXIgPSBmdW5jdGlvbigpIHsKICAgIGZvciAoaT0wLCBs
        PWxpc3RlbmVycy5sZW5ndGg7IGk8bDsgaSsrKSB7CiAgICAgIGxpc3RlbmVy
        ID0gbGlzdGVuZXJzW2ldOwogICAgICBsaXN0ZW5lci5hZnRlcihuYW1lLCB0
        aW1lKCksIHBheWxvYWQsIGJlZm9yZVZhbHVlc1tpXSk7CiAgICB9CiAgfTsK
        ICBFbWJlci50cnlDYXRjaEZpbmFsbHkodHJ5YWJsZSwgY2F0Y2hhYmxlLCBm
        aW5hbGl6ZXIpOwogIGBgYAoKICBAbWV0aG9kIHRyeUNhdGNoRmluYWxseQog
        IEBmb3IgRW1iZXIKICBAcGFyYW0ge0Z1bmN0aW9ufSB0cnlhYmxlIFRoZSBm
        dW5jdGlvbiB0byBydW4gdGhlIHRyeSBjYWxsYmFjawogIEBwYXJhbSB7RnVu
        Y3Rpb259IGNhdGNoYWJsZSBUaGUgZnVuY3Rpb24gdG8gcnVuIHRoZSBjYXRj
        aGFibGUgY2FsbGJhY2sKICBAcGFyYW0ge0Z1bmN0aW9ufSBmaW5hbGl6ZXIg
        VGhlIGZ1bmN0aW9uIHRvIHJ1biB0aGUgZmluYWxseSBjYWxsYmFjawogIEBw
        YXJhbSB7T2JqZWN0fSBbYmluZGluZ10gVGhlIG9wdGlvbmFsIGNhbGxpbmcg
        b2JqZWN0LiBEZWZhdWx0cyB0byAndGhpcycKICBAcmV0dXJuIHsqfSBUaGUg
        cmV0dXJuIHZhbHVlIGlzIHRoZSB0aGF0IG9mIHRoZSBmaW5hbGl6ZXIsCiAg
        dW5sZXNzIHRoYXQgdmFsdWUgaXMgdW5kZWZpbmVkLCBpbiB3aGljaCBjYXNl
        IGl0IGlzIHRoZSByZXR1cm4gdmFsdWUKICBvZiB0aGUgdHJ5YWJsZS4KKi8K
        aWYgKG5lZWRzRmluYWxseUZpeCkgewogIEVtYmVyLnRyeUNhdGNoRmluYWxs
        eSA9IGZ1bmN0aW9uKHRyeWFibGUsIGNhdGNoYWJsZSwgZmluYWxpemVyLCBi
        aW5kaW5nKSB7CiAgICB2YXIgcmVzdWx0LCBmaW5hbFJlc3VsdCwgZmluYWxF
        cnJvcjsKCiAgICBiaW5kaW5nID0gYmluZGluZyB8fCB0aGlzOwoKICAgIHRy
        eSB7CiAgICAgIHJlc3VsdCA9IHRyeWFibGUuY2FsbChiaW5kaW5nKTsKICAg
        IH0gY2F0Y2goZXJyb3IpIHsKICAgICAgcmVzdWx0ID0gY2F0Y2hhYmxlLmNh
        bGwoYmluZGluZywgZXJyb3IpOwogICAgfSBmaW5hbGx5IHsKICAgICAgdHJ5
        IHsKICAgICAgICBmaW5hbFJlc3VsdCA9IGZpbmFsaXplci5jYWxsKGJpbmRp
        bmcpOwogICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgZmluYWxFcnJvciA9
        IGU7CiAgICAgIH0KICAgIH0KCiAgICBpZiAoZmluYWxFcnJvcikgeyB0aHJv
        dyBmaW5hbEVycm9yOyB9CgogICAgcmV0dXJuIChmaW5hbFJlc3VsdCA9PT0g
        dW5kZWZpbmVkKSA/IHJlc3VsdCA6IGZpbmFsUmVzdWx0OwogIH07Cn0gZWxz
        ZSB7CiAgRW1iZXIudHJ5Q2F0Y2hGaW5hbGx5ID0gZnVuY3Rpb24odHJ5YWJs
        ZSwgY2F0Y2hhYmxlLCBmaW5hbGl6ZXIsIGJpbmRpbmcpIHsKICAgIHZhciBy
        ZXN1bHQsIGZpbmFsUmVzdWx0OwoKICAgIGJpbmRpbmcgPSBiaW5kaW5nIHx8
        IHRoaXM7CgogICAgdHJ5IHsKICAgICAgcmVzdWx0ID0gdHJ5YWJsZS5jYWxs
        KGJpbmRpbmcpOwogICAgfSBjYXRjaChlcnJvcikgewogICAgICByZXN1bHQg
        PSBjYXRjaGFibGUuY2FsbChiaW5kaW5nLCBlcnJvcik7CiAgICB9IGZpbmFs
        bHkgewogICAgICBmaW5hbFJlc3VsdCA9IGZpbmFsaXplci5jYWxsKGJpbmRp
        bmcpOwogICAgfQoKICAgIHJldHVybiAoZmluYWxSZXN1bHQgPT09IHVuZGVm
        aW5lZCkgPyByZXN1bHQgOiBmaW5hbFJlc3VsdDsKICB9Owp9CgovLyAuLi4u
        Li4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uCi8vIFRZUElO
        RyAmIEFSUkFZIE1FU1NBR0lORwovLwoKdmFyIFRZUEVfTUFQID0ge307CnZh
        ciB0ID0gIkJvb2xlYW4gTnVtYmVyIFN0cmluZyBGdW5jdGlvbiBBcnJheSBE
        YXRlIFJlZ0V4cCBPYmplY3QiLnNwbGl0KCIgIik7CkVtYmVyLkFycmF5UG9s
        eWZpbGxzLmZvckVhY2guY2FsbCh0LCBmdW5jdGlvbihuYW1lKSB7CiAgVFlQ
        RV9NQVBbICJbb2JqZWN0ICIgKyBuYW1lICsgIl0iIF0gPSBuYW1lLnRvTG93
        ZXJDYXNlKCk7Cn0pOwoKdmFyIHRvU3RyaW5nID0gT2JqZWN0LnByb3RvdHlw
        ZS50b1N0cmluZzsKCi8qKgogIFJldHVybnMgYSBjb25zaXN0ZW50IHR5cGUg
        Zm9yIHRoZSBwYXNzZWQgaXRlbS4KCiAgVXNlIHRoaXMgaW5zdGVhZCBvZiB0
        aGUgYnVpbHQtaW4gYHR5cGVvZmAgdG8gZ2V0IHRoZSB0eXBlIG9mIGFuIGl0
        ZW0uCiAgSXQgd2lsbCByZXR1cm4gdGhlIHNhbWUgcmVzdWx0IGFjcm9zcyBh
        bGwgYnJvd3NlcnMgYW5kIGluY2x1ZGVzIGEgYml0CiAgbW9yZSBkZXRhaWwu
        IEhlcmUgaXMgd2hhdCB3aWxsIGJlIHJldHVybmVkOgoKICAgICAgfCBSZXR1
        cm4gVmFsdWUgIHwgTWVhbmluZyAgICAgICAgICAgICAgICAgICAgICAgICAg
        ICAgICAgICAgICAgICAgICAgICB8CiAgICAgIHwtLS0tLS0tLS0tLS0tLS18
        LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
        LS0tLS0tLS0tfAogICAgICB8ICdzdHJpbmcnICAgICAgfCBTdHJpbmcgcHJp
        bWl0aXZlICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwK
        ICAgICAgfCAnbnVtYmVyJyAgICAgIHwgTnVtYmVyIHByaW1pdGl2ZSAgICAg
        ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8CiAgICAgIHwgJ2Jv
        b2xlYW4nICAgICB8IEJvb2xlYW4gcHJpbWl0aXZlICAgICAgICAgICAgICAg
        ICAgICAgICAgICAgICAgICAgICAgfAogICAgICB8ICdudWxsJyAgICAgICAg
        fCBOdWxsIHZhbHVlICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
        ICAgICAgICAgIHwKICAgICAgfCAndW5kZWZpbmVkJyAgIHwgVW5kZWZpbmVk
        IHZhbHVlICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8
        CiAgICAgIHwgJ2Z1bmN0aW9uJyAgICB8IEEgZnVuY3Rpb24gICAgICAgICAg
        ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfAogICAgICB8ICdh
        cnJheScgICAgICAgfCBBbiBpbnN0YW5jZSBvZiBBcnJheSAgICAgICAgICAg
        ICAgICAgICAgICAgICAgICAgICAgIHwKICAgICAgfCAnY2xhc3MnICAgICAg
        IHwgQW4gRW1iZXIgY2xhc3MgKGNyZWF0ZWQgdXNpbmcgRW1iZXIuT2JqZWN0
        LmV4dGVuZCgpKSB8CiAgICAgIHwgJ2luc3RhbmNlJyAgICB8IEFuIEVtYmVy
        IG9iamVjdCBpbnN0YW5jZSAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
        fAogICAgICB8ICdlcnJvcicgICAgICAgfCBBbiBpbnN0YW5jZSBvZiB0aGUg
        RXJyb3Igb2JqZWN0ICAgICAgICAgICAgICAgICAgICAgIHwKICAgICAgfCAn
        b2JqZWN0JyAgICAgIHwgQSBKYXZhU2NyaXB0IG9iamVjdCBub3QgaW5oZXJp
        dGluZyBmcm9tIEVtYmVyLk9iamVjdCB8CgogIEV4YW1wbGVzOgoKICBgYGBq
        YXZhc2NyaXB0CiAgRW1iZXIudHlwZU9mKCk7ICAgICAgICAgICAgICAgICAg
        ICAgICAvLyAndW5kZWZpbmVkJwogIEVtYmVyLnR5cGVPZihudWxsKTsgICAg
        ICAgICAgICAgICAgICAgLy8gJ251bGwnCiAgRW1iZXIudHlwZU9mKHVuZGVm
        aW5lZCk7ICAgICAgICAgICAgICAvLyAndW5kZWZpbmVkJwogIEVtYmVyLnR5
        cGVPZignbWljaGFlbCcpOyAgICAgICAgICAgICAgLy8gJ3N0cmluZycKICBF
        bWJlci50eXBlT2YoMTAxKTsgICAgICAgICAgICAgICAgICAgIC8vICdudW1i
        ZXInCiAgRW1iZXIudHlwZU9mKHRydWUpOyAgICAgICAgICAgICAgICAgICAv
        LyAnYm9vbGVhbicKICBFbWJlci50eXBlT2YoRW1iZXIubWFrZUFycmF5KTsg
        ICAgICAgIC8vICdmdW5jdGlvbicKICBFbWJlci50eXBlT2YoWzEsMiw5MF0p
        OyAgICAgICAgICAgICAgIC8vICdhcnJheScKICBFbWJlci50eXBlT2YoRW1i
        ZXIuT2JqZWN0LmV4dGVuZCgpKTsgIC8vICdjbGFzcycKICBFbWJlci50eXBl
        T2YoRW1iZXIuT2JqZWN0LmNyZWF0ZSgpKTsgIC8vICdpbnN0YW5jZScKICBF
        bWJlci50eXBlT2YobmV3IEVycm9yKCd0ZWFtb2NpbCcpKTsgIC8vICdlcnJv
        cicKCiAgLy8gIm5vcm1hbCIgSmF2YVNjcmlwdCBvYmplY3QKICBFbWJlci50
        eXBlT2Yoe2E6ICdiJ30pOyAgICAgICAgICAgICAgLy8gJ29iamVjdCcKICBg
        YGAKCiAgQG1ldGhvZCB0eXBlT2YKICBAZm9yIEVtYmVyCiAgQHBhcmFtIHtP
        YmplY3R9IGl0ZW0gdGhlIGl0ZW0gdG8gY2hlY2sKICBAcmV0dXJuIHtTdHJp
        bmd9IHRoZSB0eXBlCiovCkVtYmVyLnR5cGVPZiA9IGZ1bmN0aW9uKGl0ZW0p
        IHsKICB2YXIgcmV0OwoKICByZXQgPSAoaXRlbSA9PT0gbnVsbCB8fCBpdGVt
        ID09PSB1bmRlZmluZWQpID8gU3RyaW5nKGl0ZW0pIDogVFlQRV9NQVBbdG9T
        dHJpbmcuY2FsbChpdGVtKV0gfHwgJ29iamVjdCc7CgogIGlmIChyZXQgPT09
        ICdmdW5jdGlvbicpIHsKICAgIGlmIChFbWJlci5PYmplY3QgJiYgRW1iZXIu
        T2JqZWN0LmRldGVjdChpdGVtKSkgcmV0ID0gJ2NsYXNzJzsKICB9IGVsc2Ug
        aWYgKHJldCA9PT0gJ29iamVjdCcpIHsKICAgIGlmIChpdGVtIGluc3RhbmNl
        b2YgRXJyb3IpIHJldCA9ICdlcnJvcic7CiAgICBlbHNlIGlmIChFbWJlci5P
        YmplY3QgJiYgaXRlbSBpbnN0YW5jZW9mIEVtYmVyLk9iamVjdCkgcmV0ID0g
        J2luc3RhbmNlJzsKICAgIGVsc2UgcmV0ID0gJ29iamVjdCc7CiAgfQoKICBy
        ZXR1cm4gcmV0Owp9OwoKfSkoKTsKCgoKKGZ1bmN0aW9uKCkgewovLyBFbWJl
        ci50cnlDYXRjaEZpbmFsbHkKCi8qKgogIFRoZSBwdXJwb3NlIG9mIHRoZSBF
        bWJlciBJbnN0cnVtZW50YXRpb24gbW9kdWxlIGlzCiAgdG8gcHJvdmlkZSBl
        ZmZpY2llbnQsIGdlbmVyYWwtcHVycG9zZSBpbnN0cnVtZW50YXRpb24KICBm
        b3IgRW1iZXIuCgogIFN1YnNjcmliZSB0byBhIGxpc3RlbmVyIGJ5IHVzaW5n
        IGBFbWJlci5zdWJzY3JpYmVgOgoKICBgYGBqYXZhc2NyaXB0CiAgRW1iZXIu
        c3Vic2NyaWJlKCJyZW5kZXIiLCB7CiAgICBiZWZvcmU6IGZ1bmN0aW9uKG5h
        bWUsIHRpbWVzdGFtcCwgcGF5bG9hZCkgewoKICAgIH0sCgogICAgYWZ0ZXI6
        IGZ1bmN0aW9uKG5hbWUsIHRpbWVzdGFtcCwgcGF5bG9hZCkgewoKICAgIH0K
        ICB9KTsKICBgYGAKCiAgSWYgeW91IHJldHVybiBhIHZhbHVlIGZyb20gdGhl
        IGBiZWZvcmVgIGNhbGxiYWNrLCB0aGF0IHNhbWUKICB2YWx1ZSB3aWxsIGJl
        IHBhc3NlZCBhcyBhIGZvdXJ0aCBwYXJhbWV0ZXIgdG8gdGhlIGBhZnRlcmAK
        ICBjYWxsYmFjay4KCiAgSW5zdHJ1bWVudCBhIGJsb2NrIG9mIGNvZGUgYnkg
        dXNpbmcgYEVtYmVyLmluc3RydW1lbnRgOgoKICBgYGBqYXZhc2NyaXB0CiAg
        RW1iZXIuaW5zdHJ1bWVudCgicmVuZGVyLmhhbmRsZWJhcnMiLCBwYXlsb2Fk
        LCBmdW5jdGlvbigpIHsKICAgIC8vIHJlbmRlcmluZyBsb2dpYwogIH0sIGJp
        bmRpbmcpOwogIGBgYAoKICBFdmVudCBuYW1lcyBwYXNzZWQgdG8gYEVtYmVy
        Lmluc3RydW1lbnRgIGFyZSBuYW1lc3BhY2VkCiAgYnkgcGVyaW9kcywgZnJv
        bSBtb3JlIGdlbmVyYWwgdG8gbW9yZSBzcGVjaWZpYy4gU3Vic2NyaWJlcnMK
        ICBjYW4gbGlzdGVuIGZvciBldmVudHMgYnkgd2hhdGV2ZXIgbGV2ZWwgb2Yg
        Z3JhbnVsYXJpdHkgdGhleQogIGFyZSBpbnRlcmVzdGVkIGluLgoKICBJbiB0
        aGUgYWJvdmUgZXhhbXBsZSwgdGhlIGV2ZW50IGlzIGByZW5kZXIuaGFuZGxl
        YmFyc2AsCiAgYW5kIHRoZSBzdWJzY3JpYmVyIGxpc3RlbmVkIGZvciBhbGwg
        ZXZlbnRzIGJlZ2lubmluZyB3aXRoCiAgYHJlbmRlcmAuIEl0IHdvdWxkIHJl
        Y2VpdmUgY2FsbGJhY2tzIGZvciBldmVudHMgbmFtZWQKICBgcmVuZGVyYCwg
        YHJlbmRlci5oYW5kbGViYXJzYCwgYHJlbmRlci5jb250YWluZXJgLCBvcgog
        IGV2ZW4gYHJlbmRlci5oYW5kbGViYXJzLmxheW91dGAuCgogIEBjbGFzcyBJ
        bnN0cnVtZW50YXRpb24KICBAbmFtZXNwYWNlIEVtYmVyCiAgQHN0YXRpYwoq
        LwpFbWJlci5JbnN0cnVtZW50YXRpb24gPSB7fTsKCnZhciBzdWJzY3JpYmVy
        cyA9IFtdLCBjYWNoZSA9IHt9OwoKdmFyIHBvcHVsYXRlTGlzdGVuZXJzID0g
        ZnVuY3Rpb24obmFtZSkgewogIHZhciBsaXN0ZW5lcnMgPSBbXSwgc3Vic2Ny
        aWJlcjsKCiAgZm9yICh2YXIgaT0wLCBsPXN1YnNjcmliZXJzLmxlbmd0aDsg
        aTxsOyBpKyspIHsKICAgIHN1YnNjcmliZXIgPSBzdWJzY3JpYmVyc1tpXTsK
        ICAgIGlmIChzdWJzY3JpYmVyLnJlZ2V4LnRlc3QobmFtZSkpIHsKICAgICAg
        bGlzdGVuZXJzLnB1c2goc3Vic2NyaWJlci5vYmplY3QpOwogICAgfQogIH0K
        CiAgY2FjaGVbbmFtZV0gPSBsaXN0ZW5lcnM7CiAgcmV0dXJuIGxpc3RlbmVy
        czsKfTsKCnZhciB0aW1lID0gKGZ1bmN0aW9uKCkgewogIHZhciBwZXJmID0g
        J3VuZGVmaW5lZCcgIT09IHR5cGVvZiB3aW5kb3cgPyB3aW5kb3cucGVyZm9y
        bWFuY2UgfHwge30gOiB7fTsKICB2YXIgZm4gPSBwZXJmLm5vdyB8fCBwZXJm
        Lm1vek5vdyB8fCBwZXJmLndlYmtpdE5vdyB8fCBwZXJmLm1zTm93IHx8IHBl
        cmYub05vdzsKICAvLyBmbi5iaW5kIHdpbGwgYmUgYXZhaWxhYmxlIGluIGFs
        bCB0aGUgYnJvd3NlcnMgdGhhdCBzdXBwb3J0IHRoZSBhZHZhbmNlZCB3aW5k
        b3cucGVyZm9ybWFuY2UuLi4gOy0pCiAgcmV0dXJuIGZuID8gZm4uYmluZChw
        ZXJmKSA6IGZ1bmN0aW9uKCkgeyByZXR1cm4gK25ldyBEYXRlKCk7IH07Cn0p
        KCk7CgovKioKICBOb3RpZmllcyBldmVudCdzIHN1YnNjcmliZXJzLCBjYWxs
        cyBgYmVmb3JlYCBhbmQgYGFmdGVyYCBob29rcy4KCiAgQG1ldGhvZCBpbnN0
        cnVtZW50CiAgQG5hbWVzcGFjZSBFbWJlci5JbnN0cnVtZW50YXRpb24KCiAg
        QHBhcmFtIHtTdHJpbmd9IFtuYW1lXSBOYW1lc3BhY2VkIGV2ZW50IG5hbWUu
        CiAgQHBhcmFtIHtPYmplY3R9IHBheWxvYWQKICBAcGFyYW0ge0Z1bmN0aW9u
        fSBjYWxsYmFjayBGdW5jdGlvbiB0aGF0IHlvdSdyZSBpbnN0cnVtZW50aW5n
        LgogIEBwYXJhbSB7T2JqZWN0fSBiaW5kaW5nIENvbnRleHQgdGhhdCBpbnN0
        cnVtZW50IGZ1bmN0aW9uIGlzIGNhbGxlZCB3aXRoLgoqLwpFbWJlci5JbnN0
        cnVtZW50YXRpb24uaW5zdHJ1bWVudCA9IGZ1bmN0aW9uKG5hbWUsIHBheWxv
        YWQsIGNhbGxiYWNrLCBiaW5kaW5nKSB7CiAgdmFyIGxpc3RlbmVycyA9IGNh
        Y2hlW25hbWVdLCB0aW1lTmFtZSwgcmV0OwoKICBpZiAoRW1iZXIuU1RSVUNU
        VVJFRF9QUk9GSUxFKSB7CiAgICB0aW1lTmFtZSA9IG5hbWUgKyAiOiAiICsg
        cGF5bG9hZC5vYmplY3Q7CiAgICBjb25zb2xlLnRpbWUodGltZU5hbWUpOwog
        IH0KCiAgaWYgKCFsaXN0ZW5lcnMpIHsKICAgIGxpc3RlbmVycyA9IHBvcHVs
        YXRlTGlzdGVuZXJzKG5hbWUpOwogIH0KCiAgaWYgKGxpc3RlbmVycy5sZW5n
        dGggPT09IDApIHsKICAgIHJldCA9IGNhbGxiYWNrLmNhbGwoYmluZGluZyk7
        CiAgICBpZiAoRW1iZXIuU1RSVUNUVVJFRF9QUk9GSUxFKSB7IGNvbnNvbGUu
        dGltZUVuZCh0aW1lTmFtZSk7IH0KICAgIHJldHVybiByZXQ7CiAgfQoKICB2
        YXIgYmVmb3JlVmFsdWVzID0gW10sIGxpc3RlbmVyLCBpLCBsOwoKICBmdW5j
        dGlvbiB0cnlhYmxlKCkgewogICAgZm9yIChpPTAsIGw9bGlzdGVuZXJzLmxl
        bmd0aDsgaTxsOyBpKyspIHsKICAgICAgbGlzdGVuZXIgPSBsaXN0ZW5lcnNb
        aV07CiAgICAgIGJlZm9yZVZhbHVlc1tpXSA9IGxpc3RlbmVyLmJlZm9yZShu
        YW1lLCB0aW1lKCksIHBheWxvYWQpOwogICAgfQoKICAgIHJldHVybiBjYWxs
        YmFjay5jYWxsKGJpbmRpbmcpOwogIH0KCiAgZnVuY3Rpb24gY2F0Y2hhYmxl
        KGUpIHsKICAgIHBheWxvYWQgPSBwYXlsb2FkIHx8IHt9OwogICAgcGF5bG9h
        ZC5leGNlcHRpb24gPSBlOwogIH0KCiAgZnVuY3Rpb24gZmluYWxpemVyKCkg
        ewogICAgZm9yIChpPTAsIGw9bGlzdGVuZXJzLmxlbmd0aDsgaTxsOyBpKysp
        IHsKICAgICAgbGlzdGVuZXIgPSBsaXN0ZW5lcnNbaV07CiAgICAgIGxpc3Rl
        bmVyLmFmdGVyKG5hbWUsIHRpbWUoKSwgcGF5bG9hZCwgYmVmb3JlVmFsdWVz
        W2ldKTsKICAgIH0KCiAgICBpZiAoRW1iZXIuU1RSVUNUVVJFRF9QUk9GSUxF
        KSB7CiAgICAgIGNvbnNvbGUudGltZUVuZCh0aW1lTmFtZSk7CiAgICB9CiAg
        fQoKICByZXR1cm4gRW1iZXIudHJ5Q2F0Y2hGaW5hbGx5KHRyeWFibGUsIGNh
        dGNoYWJsZSwgZmluYWxpemVyKTsKfTsKCi8qKgogIFN1YnNjcmliZXMgdG8g
        YSBwYXJ0aWN1bGFyIGV2ZW50IG9yIGluc3RydW1lbnRlZCBibG9jayBvZiBj
        b2RlLgoKICBAbWV0aG9kIHN1YnNjcmliZQogIEBuYW1lc3BhY2UgRW1iZXIu
        SW5zdHJ1bWVudGF0aW9uCgogIEBwYXJhbSB7U3RyaW5nfSBbcGF0dGVybl0g
        TmFtZXNwYWNlZCBldmVudCBuYW1lLgogIEBwYXJhbSB7T2JqZWN0fSBbb2Jq
        ZWN0XSBCZWZvcmUgYW5kIEFmdGVyIGhvb2tzLgoqLwpFbWJlci5JbnN0cnVt
        ZW50YXRpb24uc3Vic2NyaWJlID0gZnVuY3Rpb24ocGF0dGVybiwgb2JqZWN0
        KSB7CiAgdmFyIHBhdGhzID0gcGF0dGVybi5zcGxpdCgiLiIpLCBwYXRoLCBy
        ZWdleCA9IFtdOwoKICBmb3IgKHZhciBpPTAsIGw9cGF0aHMubGVuZ3RoOyBp
        PGw7IGkrKykgewogICAgcGF0aCA9IHBhdGhzW2ldOwogICAgaWYgKHBhdGgg
        PT09ICIqIikgewogICAgICByZWdleC5wdXNoKCJbXlxcLl0qIik7CiAgICB9
        IGVsc2UgewogICAgICByZWdleC5wdXNoKHBhdGgpOwogICAgfQogIH0KCiAg
        cmVnZXggPSByZWdleC5qb2luKCJcXC4iKTsKICByZWdleCA9IHJlZ2V4ICsg
        IihcXC4uKik/IjsKCiAgdmFyIHN1YnNjcmliZXIgPSB7CiAgICBwYXR0ZXJu
        OiBwYXR0ZXJuLAogICAgcmVnZXg6IG5ldyBSZWdFeHAoIl4iICsgcmVnZXgg
        KyAiJCIpLAogICAgb2JqZWN0OiBvYmplY3QKICB9OwoKICBzdWJzY3JpYmVy
        cy5wdXNoKHN1YnNjcmliZXIpOwogIGNhY2hlID0ge307CgogIHJldHVybiBz
        dWJzY3JpYmVyOwp9OwoKLyoqCiAgVW5zdWJzY3JpYmVzIGZyb20gYSBwYXJ0
        aWN1bGFyIGV2ZW50IG9yIGluc3RydW1lbnRlZCBibG9jayBvZiBjb2RlLgoK
        ICBAbWV0aG9kIHVuc3Vic2NyaWJlCiAgQG5hbWVzcGFjZSBFbWJlci5JbnN0
        cnVtZW50YXRpb24KCiAgQHBhcmFtIHtPYmplY3R9IFtzdWJzY3JpYmVyXQoq
        LwpFbWJlci5JbnN0cnVtZW50YXRpb24udW5zdWJzY3JpYmUgPSBmdW5jdGlv
        bihzdWJzY3JpYmVyKSB7CiAgdmFyIGluZGV4OwoKICBmb3IgKHZhciBpPTAs
        IGw9c3Vic2NyaWJlcnMubGVuZ3RoOyBpPGw7IGkrKykgewogICAgaWYgKHN1
        YnNjcmliZXJzW2ldID09PSBzdWJzY3JpYmVyKSB7CiAgICAgIGluZGV4ID0g
        aTsKICAgIH0KICB9CgogIHN1YnNjcmliZXJzLnNwbGljZShpbmRleCwgMSk7
        CiAgY2FjaGUgPSB7fTsKfTsKCi8qKgogIFJlc2V0cyBgRW1iZXIuSW5zdHJ1
        bWVudGF0aW9uYCBieSBmbHVzaGluZyBsaXN0IG9mIHN1YnNjcmliZXJzLgoK
        ICBAbWV0aG9kIHJlc2V0CiAgQG5hbWVzcGFjZSBFbWJlci5JbnN0cnVtZW50
        YXRpb24KKi8KRW1iZXIuSW5zdHJ1bWVudGF0aW9uLnJlc2V0ID0gZnVuY3Rp
        b24oKSB7CiAgc3Vic2NyaWJlcnMgPSBbXTsKICBjYWNoZSA9IHt9Owp9OwoK
        RW1iZXIuaW5zdHJ1bWVudCA9IEVtYmVyLkluc3RydW1lbnRhdGlvbi5pbnN0
        cnVtZW50OwpFbWJlci5zdWJzY3JpYmUgPSBFbWJlci5JbnN0cnVtZW50YXRp
        b24uc3Vic2NyaWJlOwp9KSgpOwoKCgooZnVuY3Rpb24oKSB7CnZhciBtYXAs
        IGZvckVhY2gsIGluZGV4T2YsIHNwbGljZTsKbWFwICAgICA9IEFycmF5LnBy
        b3RvdHlwZS5tYXAgICAgIHx8IEVtYmVyLkFycmF5UG9seWZpbGxzLm1hcDsK
        Zm9yRWFjaCA9IEFycmF5LnByb3RvdHlwZS5mb3JFYWNoIHx8IEVtYmVyLkFy
        cmF5UG9seWZpbGxzLmZvckVhY2g7CmluZGV4T2YgPSBBcnJheS5wcm90b3R5
        cGUuaW5kZXhPZiB8fCBFbWJlci5BcnJheVBvbHlmaWxscy5pbmRleE9mOwpz
        cGxpY2UgPSBBcnJheS5wcm90b3R5cGUuc3BsaWNlOwoKdmFyIHV0aWxzID0g
        RW1iZXIuRW51bWVyYWJsZVV0aWxzID0gewogIG1hcDogZnVuY3Rpb24ob2Jq
        LCBjYWxsYmFjaywgdGhpc0FyZykgewogICAgcmV0dXJuIG9iai5tYXAgPyBv
        YmoubWFwLmNhbGwob2JqLCBjYWxsYmFjaywgdGhpc0FyZykgOiBtYXAuY2Fs
        bChvYmosIGNhbGxiYWNrLCB0aGlzQXJnKTsKICB9LAoKICBmb3JFYWNoOiBm
        dW5jdGlvbihvYmosIGNhbGxiYWNrLCB0aGlzQXJnKSB7CiAgICByZXR1cm4g
        b2JqLmZvckVhY2ggPyBvYmouZm9yRWFjaC5jYWxsKG9iaiwgY2FsbGJhY2ss
        IHRoaXNBcmcpIDogZm9yRWFjaC5jYWxsKG9iaiwgY2FsbGJhY2ssIHRoaXNB
        cmcpOwogIH0sCgogIGluZGV4T2Y6IGZ1bmN0aW9uKG9iaiwgZWxlbWVudCwg
        aW5kZXgpIHsKICAgIHJldHVybiBvYmouaW5kZXhPZiA/IG9iai5pbmRleE9m
        LmNhbGwob2JqLCBlbGVtZW50LCBpbmRleCkgOiBpbmRleE9mLmNhbGwob2Jq
        LCBlbGVtZW50LCBpbmRleCk7CiAgfSwKCiAgaW5kZXhlc09mOiBmdW5jdGlv
        bihvYmosIGVsZW1lbnRzKSB7CiAgICByZXR1cm4gZWxlbWVudHMgPT09IHVu
        ZGVmaW5lZCA/IFtdIDogdXRpbHMubWFwKGVsZW1lbnRzLCBmdW5jdGlvbihp
        dGVtKSB7CiAgICAgIHJldHVybiB1dGlscy5pbmRleE9mKG9iaiwgaXRlbSk7
        CiAgICB9KTsKICB9LAoKICBhZGRPYmplY3Q6IGZ1bmN0aW9uKGFycmF5LCBp
        dGVtKSB7CiAgICB2YXIgaW5kZXggPSB1dGlscy5pbmRleE9mKGFycmF5LCBp
        dGVtKTsKICAgIGlmIChpbmRleCA9PT0gLTEpIHsgYXJyYXkucHVzaChpdGVt
        KTsgfQogIH0sCgogIHJlbW92ZU9iamVjdDogZnVuY3Rpb24oYXJyYXksIGl0
        ZW0pIHsKICAgIHZhciBpbmRleCA9IHV0aWxzLmluZGV4T2YoYXJyYXksIGl0
        ZW0pOwogICAgaWYgKGluZGV4ICE9PSAtMSkgeyBhcnJheS5zcGxpY2UoaW5k
        ZXgsIDEpOyB9CiAgfSwKCiAgX3JlcGxhY2U6IGZ1bmN0aW9uKGFycmF5LCBp
        ZHgsIGFtdCwgb2JqZWN0cykgewogICAgdmFyIGFyZ3MgPSBbXS5jb25jYXQo
        b2JqZWN0cyksIGNodW5rLCByZXQgPSBbXSwKICAgICAgICAvLyBodHRwczov
        L2NvZGUuZ29vZ2xlLmNvbS9wL2Nocm9taXVtL2lzc3Vlcy9kZXRhaWw/aWQ9
        NTY1ODgKICAgICAgICBzaXplID0gNjAwMDAsIHN0YXJ0ID0gaWR4LCBlbmRz
        ID0gYW10LCBjb3VudDsKCiAgICB3aGlsZSAoYXJncy5sZW5ndGgpIHsKICAg
        ICAgY291bnQgPSBlbmRzID4gc2l6ZSA/IHNpemUgOiBlbmRzOwogICAgICBp
        ZiAoY291bnQgPD0gMCkgeyBjb3VudCA9IDA7IH0KCiAgICAgIGNodW5rID0g
        YXJncy5zcGxpY2UoMCwgc2l6ZSk7CiAgICAgIGNodW5rID0gW3N0YXJ0LCBj
        b3VudF0uY29uY2F0KGNodW5rKTsKCiAgICAgIHN0YXJ0ICs9IHNpemU7CiAg
        ICAgIGVuZHMgLT0gY291bnQ7CgogICAgICByZXQgPSByZXQuY29uY2F0KHNw
        bGljZS5hcHBseShhcnJheSwgY2h1bmspKTsKICAgIH0KICAgIHJldHVybiBy
        ZXQ7CiAgfSwKCiAgcmVwbGFjZTogZnVuY3Rpb24oYXJyYXksIGlkeCwgYW10
        LCBvYmplY3RzKSB7CiAgICBpZiAoYXJyYXkucmVwbGFjZSkgewogICAgICBy
        ZXR1cm4gYXJyYXkucmVwbGFjZShpZHgsIGFtdCwgb2JqZWN0cyk7CiAgICB9
        IGVsc2UgewogICAgICByZXR1cm4gdXRpbHMuX3JlcGxhY2UoYXJyYXksIGlk
        eCwgYW10LCBvYmplY3RzKTsKICAgIH0KICB9LAoKICBpbnRlcnNlY3Rpb246
        IGZ1bmN0aW9uKGFycmF5MSwgYXJyYXkyKSB7CiAgICB2YXIgaW50ZXJzZWN0
        aW9uID0gW107CgogICAgdXRpbHMuZm9yRWFjaChhcnJheTEsIGZ1bmN0aW9u
        KGVsZW1lbnQpIHsKICAgICAgaWYgKHV0aWxzLmluZGV4T2YoYXJyYXkyLCBl
        bGVtZW50KSA+PSAwKSB7CiAgICAgICAgaW50ZXJzZWN0aW9uLnB1c2goZWxl
        bWVudCk7CiAgICAgIH0KICAgIH0pOwoKICAgIHJldHVybiBpbnRlcnNlY3Rp
        b247CiAgfQp9OwoKfSkoKTsKCgoKKGZ1bmN0aW9uKCkgewovKioKQG1vZHVs
        ZSBlbWJlci1tZXRhbAoqLwoKdmFyIE1FVEFfS0VZID0gRW1iZXIuTUVUQV9L
        RVksIGdldDsKCnZhciBNQU5EQVRPUllfU0VUVEVSID0gRW1iZXIuRU5WLk1B
        TkRBVE9SWV9TRVRURVI7Cgp2YXIgSVNfR0xPQkFMX1BBVEggPSAvXihbQS1a
        JF18KFswLTldW0EtWiRdKSkuKltcLlwqXS87CnZhciBIQVNfVEhJUyAgPSAv
        XnRoaXNbXC5cKl0vOwp2YXIgRklSU1RfS0VZID0gL14oW15cLlwqXSspLzsK
        Ci8vIC4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4u
        Li4uLi4uLi4uLi4uLi4uLi4KLy8gR0VUIEFORCBTRVQKLy8KLy8gSWYgd2Ug
        YXJlIG9uIGEgcGxhdGZvcm0gdGhhdCBzdXBwb3J0cyBhY2Nlc3NvcnMgd2Ug
        Y2FuIHVzZSB0aG9zZS4KLy8gT3RoZXJ3aXNlIHNpbXVsYXRlIGFjY2Vzc29y
        cyBieSBsb29raW5nIHVwIHRoZSBwcm9wZXJ0eSBkaXJlY3RseSBvbiB0aGUK
        Ly8gb2JqZWN0LgoKLyoqCiAgR2V0cyB0aGUgdmFsdWUgb2YgYSBwcm9wZXJ0
        eSBvbiBhbiBvYmplY3QuIElmIHRoZSBwcm9wZXJ0eSBpcyBjb21wdXRlZCwK
        ICB0aGUgZnVuY3Rpb24gd2lsbCBiZSBpbnZva2VkLiBJZiB0aGUgcHJvcGVy
        dHkgaXMgbm90IGRlZmluZWQgYnV0IHRoZQogIG9iamVjdCBpbXBsZW1lbnRz
        IHRoZSBgdW5rbm93blByb3BlcnR5YCBtZXRob2QgdGhlbiB0aGF0IHdpbGwg
        YmUgaW52b2tlZC4KCiAgSWYgeW91IHBsYW4gdG8gcnVuIG9uIElFOCBhbmQg
        b2xkZXIgYnJvd3NlcnMgdGhlbiB5b3Ugc2hvdWxkIHVzZSB0aGlzCiAgbWV0
        aG9kIGFueXRpbWUgeW91IHdhbnQgdG8gcmV0cmlldmUgYSBwcm9wZXJ0eSBv
        biBhbiBvYmplY3QgdGhhdCB5b3UgZG9uJ3QKICBrbm93IGZvciBzdXJlIGlz
        IHByaXZhdGUuIChQcm9wZXJ0aWVzIGJlZ2lubmluZyB3aXRoIGFuIHVuZGVy
        c2NvcmUgJ18nCiAgYXJlIGNvbnNpZGVyZWQgcHJpdmF0ZS4pCgogIE9uIGFs
        bCBuZXdlciBicm93c2VycywgeW91IG9ubHkgbmVlZCB0byB1c2UgdGhpcyBt
        ZXRob2QgdG8gcmV0cmlldmUKICBwcm9wZXJ0aWVzIGlmIHRoZSBwcm9wZXJ0
        eSBtaWdodCBub3QgYmUgZGVmaW5lZCBvbiB0aGUgb2JqZWN0IGFuZCB5b3Ug
        d2FudAogIHRvIHJlc3BlY3QgdGhlIGB1bmtub3duUHJvcGVydHlgIGhhbmRs
        ZXIuIE90aGVyd2lzZSB5b3UgY2FuIGlnbm9yZSB0aGlzCiAgbWV0aG9kLgoK
        ICBOb3RlIHRoYXQgaWYgdGhlIG9iamVjdCBpdHNlbGYgaXMgYHVuZGVmaW5l
        ZGAsIHRoaXMgbWV0aG9kIHdpbGwgdGhyb3cKICBhbiBlcnJvci4KCiAgQG1l
        dGhvZCBnZXQKICBAZm9yIEVtYmVyCiAgQHBhcmFtIHtPYmplY3R9IG9iaiBU
        aGUgb2JqZWN0IHRvIHJldHJpZXZlIGZyb20uCiAgQHBhcmFtIHtTdHJpbmd9
        IGtleU5hbWUgVGhlIHByb3BlcnR5IGtleSB0byByZXRyaWV2ZQogIEByZXR1
        cm4ge09iamVjdH0gdGhlIHByb3BlcnR5IHZhbHVlIG9yIGBudWxsYC4KKi8K
        Z2V0ID0gZnVuY3Rpb24gZ2V0KG9iaiwga2V5TmFtZSkgewogIC8vIEhlbHBl
        cnMgdGhhdCBvcGVyYXRlIHdpdGggJ3RoaXMnIHdpdGhpbiBhbiAjZWFjaAog
        IGlmIChrZXlOYW1lID09PSAnJykgewogICAgcmV0dXJuIG9iajsKICB9Cgog
        IGlmICgha2V5TmFtZSAmJiAnc3RyaW5nJz09PXR5cGVvZiBvYmopIHsKICAg
        IGtleU5hbWUgPSBvYmo7CiAgICBvYmogPSBudWxsOwogIH0KCiAgRW1iZXIu
        YXNzZXJ0KCJDYW5ub3QgY2FsbCBnZXQgd2l0aCAiKyBrZXlOYW1lICsiIGtl
        eS4iLCAhIWtleU5hbWUpOwogIEVtYmVyLmFzc2VydCgiQ2Fubm90IGNhbGwg
        Z2V0IHdpdGggJyIrIGtleU5hbWUgKyInIG9uIGFuIHVuZGVmaW5lZCBvYmpl
        Y3QuIiwgb2JqICE9PSB1bmRlZmluZWQpOwoKICBpZiAob2JqID09PSBudWxs
        IHx8IGtleU5hbWUuaW5kZXhPZignLicpICE9PSAtMSkgewogICAgcmV0dXJu
        IGdldFBhdGgob2JqLCBrZXlOYW1lKTsKICB9CgogIHZhciBtZXRhID0gb2Jq
        W01FVEFfS0VZXSwgZGVzYyA9IG1ldGEgJiYgbWV0YS5kZXNjc1trZXlOYW1l
        XSwgcmV0OwogIGlmIChkZXNjKSB7CiAgICByZXR1cm4gZGVzYy5nZXQob2Jq
        LCBrZXlOYW1lKTsKICB9IGVsc2UgewogICAgaWYgKE1BTkRBVE9SWV9TRVRU
        RVIgJiYgbWV0YSAmJiBtZXRhLndhdGNoaW5nW2tleU5hbWVdID4gMCkgewog
        ICAgICByZXQgPSBtZXRhLnZhbHVlc1trZXlOYW1lXTsKICAgIH0gZWxzZSB7
        CiAgICAgIHJldCA9IG9ialtrZXlOYW1lXTsKICAgIH0KCiAgICBpZiAocmV0
        ID09PSB1bmRlZmluZWQgJiYKICAgICAgICAnb2JqZWN0JyA9PT0gdHlwZW9m
        IG9iaiAmJiAhKGtleU5hbWUgaW4gb2JqKSAmJiAnZnVuY3Rpb24nID09PSB0
        eXBlb2Ygb2JqLnVua25vd25Qcm9wZXJ0eSkgewogICAgICByZXR1cm4gb2Jq
        LnVua25vd25Qcm9wZXJ0eShrZXlOYW1lKTsKICAgIH0KCiAgICByZXR1cm4g
        cmV0OwogIH0KfTsKCi8vIEN1cnJlbnRseSB1c2VkIG9ubHkgYnkgRW1iZXIg
        RGF0YSB0ZXN0cwppZiAoRW1iZXIuY29uZmlnLm92ZXJyaWRlQWNjZXNzb3Jz
        KSB7CiAgRW1iZXIuZ2V0ID0gZ2V0OwogIEVtYmVyLmNvbmZpZy5vdmVycmlk
        ZUFjY2Vzc29ycygpOwogIGdldCA9IEVtYmVyLmdldDsKfQoKLyoqCiAgQHBy
        aXZhdGUKCiAgTm9ybWFsaXplcyBhIHRhcmdldC9wYXRoIHBhaXIgdG8gcmVm
        bGVjdCB0aGF0IGFjdHVhbCB0YXJnZXQvcGF0aCB0aGF0IHNob3VsZAogIGJl
        IG9ic2VydmVkLCBldGMuIFRoaXMgdGFrZXMgaW50byBhY2NvdW50IHBhc3Np
        bmcgaW4gZ2xvYmFsIHByb3BlcnR5CiAgcGF0aHMgKGkuZS4gYSBwYXRoIGJl
        Z2lubmluZyB3aXRoIGEgY2FwdGlhbCBsZXR0ZXIgbm90IGRlZmluZWQgb24g
        dGhlCiAgdGFyZ2V0KSBhbmQgKiBzZXBhcmF0b3JzLgoKICBAbWV0aG9kIG5v
        cm1hbGl6ZVR1cGxlCiAgQGZvciBFbWJlcgogIEBwYXJhbSB7T2JqZWN0fSB0
        YXJnZXQgVGhlIGN1cnJlbnQgdGFyZ2V0LiBNYXkgYmUgYG51bGxgLgogIEBw
        YXJhbSB7U3RyaW5nfSBwYXRoIEEgcGF0aCBvbiB0aGUgdGFyZ2V0IG9yIGEg
        Z2xvYmFsIHByb3BlcnR5IHBhdGguCiAgQHJldHVybiB7QXJyYXl9IGEgdGVt
        cG9yYXJ5IGFycmF5IHdpdGggdGhlIG5vcm1hbGl6ZWQgdGFyZ2V0L3BhdGgg
        cGFpci4KKi8KdmFyIG5vcm1hbGl6ZVR1cGxlID0gRW1iZXIubm9ybWFsaXpl
        VHVwbGUgPSBmdW5jdGlvbih0YXJnZXQsIHBhdGgpIHsKICB2YXIgaGFzVGhp
        cyAgPSBIQVNfVEhJUy50ZXN0KHBhdGgpLAogICAgICBpc0dsb2JhbCA9ICFo
        YXNUaGlzICYmIElTX0dMT0JBTF9QQVRILnRlc3QocGF0aCksCiAgICAgIGtl
        eTsKCiAgaWYgKCF0YXJnZXQgfHwgaXNHbG9iYWwpIHRhcmdldCA9IEVtYmVy
        Lmxvb2t1cDsKICBpZiAoaGFzVGhpcykgcGF0aCA9IHBhdGguc2xpY2UoNSk7
        CgogIGlmICh0YXJnZXQgPT09IEVtYmVyLmxvb2t1cCkgewogICAga2V5ID0g
        cGF0aC5tYXRjaChGSVJTVF9LRVkpWzBdOwogICAgdGFyZ2V0ID0gZ2V0KHRh
        cmdldCwga2V5KTsKICAgIHBhdGggICA9IHBhdGguc2xpY2Uoa2V5Lmxlbmd0
        aCsxKTsKICB9CgogIC8vIG11c3QgcmV0dXJuIHNvbWUga2luZCBvZiBwYXRo
        IHRvIGJlIHZhbGlkIGVsc2Ugb3RoZXIgdGhpbmdzIHdpbGwgYnJlYWsuCiAg
        aWYgKCFwYXRoIHx8IHBhdGgubGVuZ3RoPT09MCkgdGhyb3cgbmV3IEVtYmVy
        LkVycm9yKCdJbnZhbGlkIFBhdGgnKTsKCiAgcmV0dXJuIFsgdGFyZ2V0LCBw
        YXRoIF07Cn07Cgp2YXIgZ2V0UGF0aCA9IEVtYmVyLl9nZXRQYXRoID0gZnVu
        Y3Rpb24ocm9vdCwgcGF0aCkgewogIHZhciBoYXNUaGlzLCBwYXJ0cywgdHVw
        bGUsIGlkeCwgbGVuOwoKICAvLyBJZiB0aGVyZSBpcyBubyByb290IGFuZCBw
        YXRoIGlzIGEga2V5IG5hbWUsIHJldHVybiB0aGF0CiAgLy8gcHJvcGVydHkg
        ZnJvbSB0aGUgZ2xvYmFsIG9iamVjdC4KICAvLyBFLmcuIGdldCgnRW1iZXIn
        KSAtPiBFbWJlcgogIGlmIChyb290ID09PSBudWxsICYmIHBhdGguaW5kZXhP
        ZignLicpID09PSAtMSkgeyByZXR1cm4gZ2V0KEVtYmVyLmxvb2t1cCwgcGF0
        aCk7IH0KCiAgLy8gZGV0ZWN0IGNvbXBsaWNhdGVkIHBhdGhzIGFuZCBub3Jt
        YWxpemUgdGhlbQogIGhhc1RoaXMgID0gSEFTX1RISVMudGVzdChwYXRoKTsK
        CiAgaWYgKCFyb290IHx8IGhhc1RoaXMpIHsKICAgIHR1cGxlID0gbm9ybWFs
        aXplVHVwbGUocm9vdCwgcGF0aCk7CiAgICByb290ID0gdHVwbGVbMF07CiAg
        ICBwYXRoID0gdHVwbGVbMV07CiAgICB0dXBsZS5sZW5ndGggPSAwOwogIH0K
        CiAgcGFydHMgPSBwYXRoLnNwbGl0KCIuIik7CiAgbGVuID0gcGFydHMubGVu
        Z3RoOwogIGZvciAoaWR4ID0gMDsgcm9vdCAhPSBudWxsICYmIGlkeCA8IGxl
        bjsgaWR4KyspIHsKICAgIHJvb3QgPSBnZXQocm9vdCwgcGFydHNbaWR4XSwg
        dHJ1ZSk7CiAgICBpZiAocm9vdCAmJiByb290LmlzRGVzdHJveWVkKSB7IHJl
        dHVybiB1bmRlZmluZWQ7IH0KICB9CiAgcmV0dXJuIHJvb3Q7Cn07CgpFbWJl
        ci5nZXRXaXRoRGVmYXVsdCA9IGZ1bmN0aW9uKHJvb3QsIGtleSwgZGVmYXVs
        dFZhbHVlKSB7CiAgdmFyIHZhbHVlID0gZ2V0KHJvb3QsIGtleSk7CgogIGlm
        ICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7IHJldHVybiBkZWZhdWx0VmFsdWU7
        IH0KICByZXR1cm4gdmFsdWU7Cn07CgoKRW1iZXIuZ2V0ID0gZ2V0OwoKfSko
        KTsKCgoKKGZ1bmN0aW9uKCkgewovKioKQG1vZHVsZSBlbWJlci1tZXRhbAoq
        LwoKdmFyIG9fY3JlYXRlID0gRW1iZXIuY3JlYXRlLAogICAgbWV0YUZvciA9
        IEVtYmVyLm1ldGEsCiAgICBNRVRBX0tFWSA9IEVtYmVyLk1FVEFfS0VZLAog
        ICAgYV9zbGljZSA9IFtdLnNsaWNlLAogICAgLyogbGlzdGVuZXIgZmxhZ3Mg
        Ki8KICAgIE9OQ0UgPSAxLCBTVVNQRU5ERUQgPSAyOwoKLyoKICBUaGUgZXZl
        bnQgc3lzdGVtIHVzZXMgYSBzZXJpZXMgb2YgbmVzdGVkIGhhc2hlcyB0byBz
        dG9yZSBsaXN0ZW5lcnMgb24gYW4KICBvYmplY3QuIFdoZW4gYSBsaXN0ZW5l
        ciBpcyByZWdpc3RlcmVkLCBvciB3aGVuIGFuIGV2ZW50IGFycml2ZXMsIHRo
        ZXNlCiAgaGFzaGVzIGFyZSBjb25zdWx0ZWQgdG8gZGV0ZXJtaW5lIHdoaWNo
        IHRhcmdldCBhbmQgYWN0aW9uIHBhaXIgdG8gaW52b2tlLgoKICBUaGUgaGFz
        aGVzIGFyZSBzdG9yZWQgaW4gdGhlIG9iamVjdCdzIG1ldGEgaGFzaCwgYW5k
        IGxvb2sgbGlrZSB0aGlzOgoKICAgICAgLy8gT2JqZWN0J3MgbWV0YSBoYXNo
        CiAgICAgIHsKICAgICAgICBsaXN0ZW5lcnM6IHsgICAgICAgLy8gdmFyaWFi
        bGUgbmFtZTogYGxpc3RlbmVyU2V0YAogICAgICAgICAgImZvbzpjaGFuZ2Vk
        IjogWyAvLyB2YXJpYWJsZSBuYW1lOiBgYWN0aW9uc2AKICAgICAgICAgICAg
        dGFyZ2V0LCBtZXRob2QsIGZsYWdzCiAgICAgICAgICBdCiAgICAgICAgfQog
        ICAgICB9CgoqLwoKZnVuY3Rpb24gaW5kZXhPZihhcnJheSwgdGFyZ2V0LCBt
        ZXRob2QpIHsKICB2YXIgaW5kZXggPSAtMTsKICBmb3IgKHZhciBpID0gMCwg
        bCA9IGFycmF5Lmxlbmd0aDsgaSA8IGw7IGkgKz0gMykgewogICAgaWYgKHRh
        cmdldCA9PT0gYXJyYXlbaV0gJiYgbWV0aG9kID09PSBhcnJheVtpKzFdKSB7
        IGluZGV4ID0gaTsgYnJlYWs7IH0KICB9CiAgcmV0dXJuIGluZGV4Owp9Cgpm
        dW5jdGlvbiBhY3Rpb25zRm9yKG9iaiwgZXZlbnROYW1lKSB7CiAgdmFyIG1l
        dGEgPSBtZXRhRm9yKG9iaiwgdHJ1ZSksCiAgICAgIGFjdGlvbnM7CgogIGlm
        ICghbWV0YS5saXN0ZW5lcnMpIHsgbWV0YS5saXN0ZW5lcnMgPSB7fTsgfQoK
        ICBpZiAoIW1ldGEuaGFzT3duUHJvcGVydHkoJ2xpc3RlbmVycycpKSB7CiAg
        ICAvLyBzZXR1cCBpbmhlcml0ZWQgY29weSBvZiB0aGUgbGlzdGVuZXJzIG9i
        amVjdAogICAgbWV0YS5saXN0ZW5lcnMgPSBvX2NyZWF0ZShtZXRhLmxpc3Rl
        bmVycyk7CiAgfQoKICBhY3Rpb25zID0gbWV0YS5saXN0ZW5lcnNbZXZlbnRO
        YW1lXTsKCiAgLy8gaWYgdGhlcmUgYXJlIGFjdGlvbnMsIGJ1dCB0aGUgZXZl
        bnROYW1lIGRvZXNuJ3QgZXhpc3QgaW4gb3VyIGxpc3RlbmVycywgdGhlbiBj
        b3B5IHRoZW0gZnJvbSB0aGUgcHJvdG90eXBlCiAgaWYgKGFjdGlvbnMgJiYg
        IW1ldGEubGlzdGVuZXJzLmhhc093blByb3BlcnR5KGV2ZW50TmFtZSkpIHsK
        ICAgIGFjdGlvbnMgPSBtZXRhLmxpc3RlbmVyc1tldmVudE5hbWVdID0gbWV0
        YS5saXN0ZW5lcnNbZXZlbnROYW1lXS5zbGljZSgpOwogIH0gZWxzZSBpZiAo
        IWFjdGlvbnMpIHsKICAgIGFjdGlvbnMgPSBtZXRhLmxpc3RlbmVyc1tldmVu
        dE5hbWVdID0gW107CiAgfQoKICByZXR1cm4gYWN0aW9uczsKfQoKZnVuY3Rp
        b24gYWN0aW9uc1VuaW9uKG9iaiwgZXZlbnROYW1lLCBvdGhlckFjdGlvbnMp
        IHsKICB2YXIgbWV0YSA9IG9ialtNRVRBX0tFWV0sCiAgICAgIGFjdGlvbnMg
        PSBtZXRhICYmIG1ldGEubGlzdGVuZXJzICYmIG1ldGEubGlzdGVuZXJzW2V2
        ZW50TmFtZV07CgogIGlmICghYWN0aW9ucykgeyByZXR1cm47IH0KICBmb3Ig
        KHZhciBpID0gYWN0aW9ucy5sZW5ndGggLSAzOyBpID49IDA7IGkgLT0gMykg
        ewogICAgdmFyIHRhcmdldCA9IGFjdGlvbnNbaV0sCiAgICAgICAgbWV0aG9k
        ID0gYWN0aW9uc1tpKzFdLAogICAgICAgIGZsYWdzID0gYWN0aW9uc1tpKzJd
        LAogICAgICAgIGFjdGlvbkluZGV4ID0gaW5kZXhPZihvdGhlckFjdGlvbnMs
        IHRhcmdldCwgbWV0aG9kKTsKCiAgICBpZiAoYWN0aW9uSW5kZXggPT09IC0x
        KSB7CiAgICAgIG90aGVyQWN0aW9ucy5wdXNoKHRhcmdldCwgbWV0aG9kLCBm
        bGFncyk7CiAgICB9CiAgfQp9CgpmdW5jdGlvbiBhY3Rpb25zRGlmZihvYmos
        IGV2ZW50TmFtZSwgb3RoZXJBY3Rpb25zKSB7CiAgdmFyIG1ldGEgPSBvYmpb
        TUVUQV9LRVldLAogICAgICBhY3Rpb25zID0gbWV0YSAmJiBtZXRhLmxpc3Rl
        bmVycyAmJiBtZXRhLmxpc3RlbmVyc1tldmVudE5hbWVdLAogICAgICBkaWZm
        QWN0aW9ucyA9IFtdOwoKICBpZiAoIWFjdGlvbnMpIHsgcmV0dXJuOyB9CiAg
        Zm9yICh2YXIgaSA9IGFjdGlvbnMubGVuZ3RoIC0gMzsgaSA+PSAwOyBpIC09
        IDMpIHsKICAgIHZhciB0YXJnZXQgPSBhY3Rpb25zW2ldLAogICAgICAgIG1l
        dGhvZCA9IGFjdGlvbnNbaSsxXSwKICAgICAgICBmbGFncyA9IGFjdGlvbnNb
        aSsyXSwKICAgICAgICBhY3Rpb25JbmRleCA9IGluZGV4T2Yob3RoZXJBY3Rp
        b25zLCB0YXJnZXQsIG1ldGhvZCk7CgogICAgaWYgKGFjdGlvbkluZGV4ICE9
        PSAtMSkgeyBjb250aW51ZTsgfQoKICAgIG90aGVyQWN0aW9ucy5wdXNoKHRh
        cmdldCwgbWV0aG9kLCBmbGFncyk7CiAgICBkaWZmQWN0aW9ucy5wdXNoKHRh
        cmdldCwgbWV0aG9kLCBmbGFncyk7CiAgfQoKICByZXR1cm4gZGlmZkFjdGlv
        bnM7Cn0KCi8qKgogIEFkZCBhbiBldmVudCBsaXN0ZW5lcgoKICBAbWV0aG9k
        IGFkZExpc3RlbmVyCiAgQGZvciBFbWJlcgogIEBwYXJhbSBvYmoKICBAcGFy
        YW0ge1N0cmluZ30gZXZlbnROYW1lCiAgQHBhcmFtIHtPYmplY3R8RnVuY3Rp
        b259IHRhcmdldE9yTWV0aG9kIEEgdGFyZ2V0IG9iamVjdCBvciBhIGZ1bmN0
        aW9uCiAgQHBhcmFtIHtGdW5jdGlvbnxTdHJpbmd9IG1ldGhvZCBBIGZ1bmN0
        aW9uIG9yIHRoZSBuYW1lIG9mIGEgZnVuY3Rpb24gdG8gYmUgY2FsbGVkIG9u
        IGB0YXJnZXRgCiAgQHBhcmFtIHtCb29sZWFufSBvbmNlIEEgZmxhZyB3aGV0
        aGVyIGEgZnVuY3Rpb24gc2hvdWxkIG9ubHkgYmUgY2FsbGVkIG9uY2UKKi8K
        ZnVuY3Rpb24gYWRkTGlzdGVuZXIob2JqLCBldmVudE5hbWUsIHRhcmdldCwg
        bWV0aG9kLCBvbmNlKSB7CiAgRW1iZXIuYXNzZXJ0KCJZb3UgbXVzdCBwYXNz
        IGF0IGxlYXN0IGFuIG9iamVjdCBhbmQgZXZlbnQgbmFtZSB0byBFbWJlci5h
        ZGRMaXN0ZW5lciIsICEhb2JqICYmICEhZXZlbnROYW1lKTsKCiAgaWYgKCFt
        ZXRob2QgJiYgJ2Z1bmN0aW9uJyA9PT0gdHlwZW9mIHRhcmdldCkgewogICAg
        bWV0aG9kID0gdGFyZ2V0OwogICAgdGFyZ2V0ID0gbnVsbDsKICB9CgogIHZh
        ciBhY3Rpb25zID0gYWN0aW9uc0ZvcihvYmosIGV2ZW50TmFtZSksCiAgICAg
        IGFjdGlvbkluZGV4ID0gaW5kZXhPZihhY3Rpb25zLCB0YXJnZXQsIG1ldGhv
        ZCksCiAgICAgIGZsYWdzID0gMDsKCiAgaWYgKG9uY2UpIGZsYWdzIHw9IE9O
        Q0U7CgogIGlmIChhY3Rpb25JbmRleCAhPT0gLTEpIHsgcmV0dXJuOyB9Cgog
        IGFjdGlvbnMucHVzaCh0YXJnZXQsIG1ldGhvZCwgZmxhZ3MpOwoKICBpZiAo
        J2Z1bmN0aW9uJyA9PT0gdHlwZW9mIG9iai5kaWRBZGRMaXN0ZW5lcikgewog
        ICAgb2JqLmRpZEFkZExpc3RlbmVyKGV2ZW50TmFtZSwgdGFyZ2V0LCBtZXRo
        b2QpOwogIH0KfQoKLyoqCiAgUmVtb3ZlIGFuIGV2ZW50IGxpc3RlbmVyCgog
        IEFyZ3VtZW50cyBzaG91bGQgbWF0Y2ggdGhvc2UgcGFzc2VkIHRvIGBFbWJl
        ci5hZGRMaXN0ZW5lcmAuCgogIEBtZXRob2QgcmVtb3ZlTGlzdGVuZXIKICBA
        Zm9yIEVtYmVyCiAgQHBhcmFtIG9iagogIEBwYXJhbSB7U3RyaW5nfSBldmVu
        dE5hbWUKICBAcGFyYW0ge09iamVjdHxGdW5jdGlvbn0gdGFyZ2V0T3JNZXRo
        b2QgQSB0YXJnZXQgb2JqZWN0IG9yIGEgZnVuY3Rpb24KICBAcGFyYW0ge0Z1
        bmN0aW9ufFN0cmluZ30gbWV0aG9kIEEgZnVuY3Rpb24gb3IgdGhlIG5hbWUg
        b2YgYSBmdW5jdGlvbiB0byBiZSBjYWxsZWQgb24gYHRhcmdldGAKKi8KZnVu
        Y3Rpb24gcmVtb3ZlTGlzdGVuZXIob2JqLCBldmVudE5hbWUsIHRhcmdldCwg
        bWV0aG9kKSB7CiAgRW1iZXIuYXNzZXJ0KCJZb3UgbXVzdCBwYXNzIGF0IGxl
        YXN0IGFuIG9iamVjdCBhbmQgZXZlbnQgbmFtZSB0byBFbWJlci5yZW1vdmVM
        aXN0ZW5lciIsICEhb2JqICYmICEhZXZlbnROYW1lKTsKCiAgaWYgKCFtZXRo
        b2QgJiYgJ2Z1bmN0aW9uJyA9PT0gdHlwZW9mIHRhcmdldCkgewogICAgbWV0
        aG9kID0gdGFyZ2V0OwogICAgdGFyZ2V0ID0gbnVsbDsKICB9CgogIGZ1bmN0
        aW9uIF9yZW1vdmVMaXN0ZW5lcih0YXJnZXQsIG1ldGhvZCkgewogICAgdmFy
        IGFjdGlvbnMgPSBhY3Rpb25zRm9yKG9iaiwgZXZlbnROYW1lKSwKICAgICAg
        ICBhY3Rpb25JbmRleCA9IGluZGV4T2YoYWN0aW9ucywgdGFyZ2V0LCBtZXRo
        b2QpOwoKICAgIC8vIGFjdGlvbiBkb2Vzbid0IGV4aXN0LCBnaXZlIHVwIHNp
        bGVudGx5CiAgICBpZiAoYWN0aW9uSW5kZXggPT09IC0xKSB7IHJldHVybjsg
        fQoKICAgIGFjdGlvbnMuc3BsaWNlKGFjdGlvbkluZGV4LCAzKTsKCiAgICBp
        ZiAoJ2Z1bmN0aW9uJyA9PT0gdHlwZW9mIG9iai5kaWRSZW1vdmVMaXN0ZW5l
        cikgewogICAgICBvYmouZGlkUmVtb3ZlTGlzdGVuZXIoZXZlbnROYW1lLCB0
        YXJnZXQsIG1ldGhvZCk7CiAgICB9CiAgfQoKICBpZiAobWV0aG9kKSB7CiAg
        ICBfcmVtb3ZlTGlzdGVuZXIodGFyZ2V0LCBtZXRob2QpOwogIH0gZWxzZSB7
        CiAgICB2YXIgbWV0YSA9IG9ialtNRVRBX0tFWV0sCiAgICAgICAgYWN0aW9u
        cyA9IG1ldGEgJiYgbWV0YS5saXN0ZW5lcnMgJiYgbWV0YS5saXN0ZW5lcnNb
        ZXZlbnROYW1lXTsKCiAgICBpZiAoIWFjdGlvbnMpIHsgcmV0dXJuOyB9CiAg
        ICBmb3IgKHZhciBpID0gYWN0aW9ucy5sZW5ndGggLSAzOyBpID49IDA7IGkg
        LT0gMykgewogICAgICBfcmVtb3ZlTGlzdGVuZXIoYWN0aW9uc1tpXSwgYWN0
        aW9uc1tpKzFdKTsKICAgIH0KICB9Cn0KCi8qKgogIEBwcml2YXRlCgogIFN1
        c3BlbmQgbGlzdGVuZXIgZHVyaW5nIGNhbGxiYWNrLgoKICBUaGlzIHNob3Vs
        ZCBvbmx5IGJlIHVzZWQgYnkgdGhlIHRhcmdldCBvZiB0aGUgZXZlbnQgbGlz
        dGVuZXIKICB3aGVuIGl0IGlzIHRha2luZyBhbiBhY3Rpb24gdGhhdCB3b3Vs
        ZCBjYXVzZSB0aGUgZXZlbnQsIGUuZy4KICBhbiBvYmplY3QgbWlnaHQgc3Vz
        cGVuZCBpdHMgcHJvcGVydHkgY2hhbmdlIGxpc3RlbmVyIHdoaWxlIGl0IGlz
        CiAgc2V0dGluZyB0aGF0IHByb3BlcnR5LgoKICBAbWV0aG9kIHN1c3BlbmRM
        aXN0ZW5lcgogIEBmb3IgRW1iZXIKICBAcGFyYW0gb2JqCiAgQHBhcmFtIHtT
        dHJpbmd9IGV2ZW50TmFtZQogIEBwYXJhbSB7T2JqZWN0fEZ1bmN0aW9ufSB0
        YXJnZXRPck1ldGhvZCBBIHRhcmdldCBvYmplY3Qgb3IgYSBmdW5jdGlvbgog
        IEBwYXJhbSB7RnVuY3Rpb258U3RyaW5nfSBtZXRob2QgQSBmdW5jdGlvbiBv
        ciB0aGUgbmFtZSBvZiBhIGZ1bmN0aW9uIHRvIGJlIGNhbGxlZCBvbiBgdGFy
        Z2V0YAogIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrCiovCmZ1bmN0aW9u
        IHN1c3BlbmRMaXN0ZW5lcihvYmosIGV2ZW50TmFtZSwgdGFyZ2V0LCBtZXRo
        b2QsIGNhbGxiYWNrKSB7CiAgaWYgKCFtZXRob2QgJiYgJ2Z1bmN0aW9uJyA9
        PT0gdHlwZW9mIHRhcmdldCkgewogICAgbWV0aG9kID0gdGFyZ2V0OwogICAg
        dGFyZ2V0ID0gbnVsbDsKICB9CgogIHZhciBhY3Rpb25zID0gYWN0aW9uc0Zv
        cihvYmosIGV2ZW50TmFtZSksCiAgICAgIGFjdGlvbkluZGV4ID0gaW5kZXhP
        ZihhY3Rpb25zLCB0YXJnZXQsIG1ldGhvZCk7CgogIGlmIChhY3Rpb25JbmRl
        eCAhPT0gLTEpIHsKICAgIGFjdGlvbnNbYWN0aW9uSW5kZXgrMl0gfD0gU1VT
        UEVOREVEOyAvLyBtYXJrIHRoZSBhY3Rpb24gYXMgc3VzcGVuZGVkCiAgfQoK
        ICBmdW5jdGlvbiB0cnlhYmxlKCkgICB7IHJldHVybiBjYWxsYmFjay5jYWxs
        KHRhcmdldCk7IH0KICBmdW5jdGlvbiBmaW5hbGl6ZXIoKSB7IGlmIChhY3Rp
        b25JbmRleCAhPT0gLTEpIHsgYWN0aW9uc1thY3Rpb25JbmRleCsyXSAmPSB+
        U1VTUEVOREVEOyB9IH0KCiAgcmV0dXJuIEVtYmVyLnRyeUZpbmFsbHkodHJ5
        YWJsZSwgZmluYWxpemVyKTsKfQoKLyoqCiAgQHByaXZhdGUKCiAgU3VzcGVu
        ZHMgbXVsdGlwbGUgbGlzdGVuZXJzIGR1cmluZyBhIGNhbGxiYWNrLgoKICAK
        ICBAbWV0aG9kIHN1c3BlbmRMaXN0ZW5lcnMKICBAZm9yIEVtYmVyCiAgQHBh
        cmFtIG9iagogIEBwYXJhbSB7QXJyYXl9IGV2ZW50TmFtZSBBcnJheSBvZiBl
        dmVudCBuYW1lcwogIEBwYXJhbSB7T2JqZWN0fEZ1bmN0aW9ufSB0YXJnZXRP
        ck1ldGhvZCBBIHRhcmdldCBvYmplY3Qgb3IgYSBmdW5jdGlvbgogIEBwYXJh
        bSB7RnVuY3Rpb258U3RyaW5nfSBtZXRob2QgQSBmdW5jdGlvbiBvciB0aGUg
        bmFtZSBvZiBhIGZ1bmN0aW9uIHRvIGJlIGNhbGxlZCBvbiBgdGFyZ2V0YAog
        IEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrCiovCmZ1bmN0aW9uIHN1c3Bl
        bmRMaXN0ZW5lcnMob2JqLCBldmVudE5hbWVzLCB0YXJnZXQsIG1ldGhvZCwg
        Y2FsbGJhY2spIHsKICBpZiAoIW1ldGhvZCAmJiAnZnVuY3Rpb24nID09PSB0
        eXBlb2YgdGFyZ2V0KSB7CiAgICBtZXRob2QgPSB0YXJnZXQ7CiAgICB0YXJn
        ZXQgPSBudWxsOwogIH0KCiAgdmFyIHN1c3BlbmRlZEFjdGlvbnMgPSBbXSwK
        ICAgICAgYWN0aW9uc0xpc3QgPSBbXSwKICAgICAgZXZlbnROYW1lLCBhY3Rp
        b25zLCBpLCBsOwoKICBmb3IgKGk9MCwgbD1ldmVudE5hbWVzLmxlbmd0aDsg
        aTxsOyBpKyspIHsKICAgIGV2ZW50TmFtZSA9IGV2ZW50TmFtZXNbaV07CiAg
        ICBhY3Rpb25zID0gYWN0aW9uc0ZvcihvYmosIGV2ZW50TmFtZSk7CiAgICB2
        YXIgYWN0aW9uSW5kZXggPSBpbmRleE9mKGFjdGlvbnMsIHRhcmdldCwgbWV0
        aG9kKTsKCiAgICBpZiAoYWN0aW9uSW5kZXggIT09IC0xKSB7CiAgICAgIGFj
        dGlvbnNbYWN0aW9uSW5kZXgrMl0gfD0gU1VTUEVOREVEOwogICAgICBzdXNw
        ZW5kZWRBY3Rpb25zLnB1c2goYWN0aW9uSW5kZXgpOwogICAgICBhY3Rpb25z
        TGlzdC5wdXNoKGFjdGlvbnMpOwogICAgfQogIH0KCiAgZnVuY3Rpb24gdHJ5
        YWJsZSgpIHsgcmV0dXJuIGNhbGxiYWNrLmNhbGwodGFyZ2V0KTsgfQoKICBm
        dW5jdGlvbiBmaW5hbGl6ZXIoKSB7CiAgICBmb3IgKHZhciBpID0gMCwgbCA9
        IHN1c3BlbmRlZEFjdGlvbnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7CiAgICAg
        IHZhciBhY3Rpb25JbmRleCA9IHN1c3BlbmRlZEFjdGlvbnNbaV07CiAgICAg
        IGFjdGlvbnNMaXN0W2ldW2FjdGlvbkluZGV4KzJdICY9IH5TVVNQRU5ERUQ7
        CiAgICB9CiAgfQoKICByZXR1cm4gRW1iZXIudHJ5RmluYWxseSh0cnlhYmxl
        LCBmaW5hbGl6ZXIpOwp9CgovKioKICBAcHJpdmF0ZQoKICBSZXR1cm4gYSBs
        aXN0IG9mIGN1cnJlbnRseSB3YXRjaGVkIGV2ZW50cwoKICBAbWV0aG9kIHdh
        dGNoZWRFdmVudHMKICBAZm9yIEVtYmVyCiAgQHBhcmFtIG9iagoqLwpmdW5j
        dGlvbiB3YXRjaGVkRXZlbnRzKG9iaikgewogIHZhciBsaXN0ZW5lcnMgPSBv
        YmpbTUVUQV9LRVldLmxpc3RlbmVycywgcmV0ID0gW107CgogIGlmIChsaXN0
        ZW5lcnMpIHsKICAgIGZvcih2YXIgZXZlbnROYW1lIGluIGxpc3RlbmVycykg
        ewogICAgICBpZiAobGlzdGVuZXJzW2V2ZW50TmFtZV0pIHsgcmV0LnB1c2go
        ZXZlbnROYW1lKTsgfQogICAgfQogIH0KICByZXR1cm4gcmV0Owp9CgovKioK
        ICBTZW5kIGFuIGV2ZW50LiBUaGUgZXhlY3V0aW9uIG9mIHN1c3BlbmRlZCBs
        aXN0ZW5lcnMKICBpcyBza2lwcGVkLCBhbmQgb25jZSBsaXN0ZW5lcnMgYXJl
        IHJlbW92ZWQuIEEgbGlzdGVuZXIgd2l0aG91dAogIGEgdGFyZ2V0IGlzIGV4
        ZWN1dGVkIG9uIHRoZSBwYXNzZWQgb2JqZWN0LiBJZiBhbiBhcnJheSBvZiBh
        Y3Rpb25zCiAgaXMgbm90IHBhc3NlZCwgdGhlIGFjdGlvbnMgc3RvcmVkIG9u
        IHRoZSBwYXNzZWQgb2JqZWN0IGFyZSBpbnZva2VkLgogIAogIEBtZXRob2Qg
        c2VuZEV2ZW50CiAgQGZvciBFbWJlcgogIEBwYXJhbSBvYmoKICBAcGFyYW0g
        e1N0cmluZ30gZXZlbnROYW1lCiAgQHBhcmFtIHtBcnJheX0gcGFyYW1zIE9w
        dGlvbmFsIHBhcmFtZXRlcnMgZm9yIGVhY2ggbGlzdGVuZXIuCiAgQHBhcmFt
        IHtBcnJheX0gYWN0aW9ucyBPcHRpb25hbCBhcnJheSBvZiBhY3Rpb25zIChs
        aXN0ZW5lcnMpLgogIEByZXR1cm4gdHJ1ZQoqLwpmdW5jdGlvbiBzZW5kRXZl
        bnQob2JqLCBldmVudE5hbWUsIHBhcmFtcywgYWN0aW9ucykgewogIC8vIGZp
        cnN0IGdpdmUgb2JqZWN0IGEgY2hhbmNlIHRvIGhhbmRsZSBpdAogIGlmIChv
        YmogIT09IEVtYmVyICYmICdmdW5jdGlvbicgPT09IHR5cGVvZiBvYmouc2Vu
        ZEV2ZW50KSB7CiAgICBvYmouc2VuZEV2ZW50KGV2ZW50TmFtZSwgcGFyYW1z
        KTsKICB9CgogIGlmICghYWN0aW9ucykgewogICAgdmFyIG1ldGEgPSBvYmpb
        TUVUQV9LRVldOwogICAgYWN0aW9ucyA9IG1ldGEgJiYgbWV0YS5saXN0ZW5l
        cnMgJiYgbWV0YS5saXN0ZW5lcnNbZXZlbnROYW1lXTsKICB9CgogIGlmICgh
        YWN0aW9ucykgeyByZXR1cm47IH0KCiAgZm9yICh2YXIgaSA9IGFjdGlvbnMu
        bGVuZ3RoIC0gMzsgaSA+PSAwOyBpIC09IDMpIHsgLy8gbG9vcGluZyBpbiBy
        ZXZlcnNlIGZvciBvbmNlIGxpc3RlbmVycwogICAgdmFyIHRhcmdldCA9IGFj
        dGlvbnNbaV0sIG1ldGhvZCA9IGFjdGlvbnNbaSsxXSwgZmxhZ3MgPSBhY3Rp
        b25zW2krMl07CiAgICBpZiAoIW1ldGhvZCkgeyBjb250aW51ZTsgfQogICAg
        aWYgKGZsYWdzICYgU1VTUEVOREVEKSB7IGNvbnRpbnVlOyB9CiAgICBpZiAo
        ZmxhZ3MgJiBPTkNFKSB7IHJlbW92ZUxpc3RlbmVyKG9iaiwgZXZlbnROYW1l
        LCB0YXJnZXQsIG1ldGhvZCk7IH0KICAgIGlmICghdGFyZ2V0KSB7IHRhcmdl
        dCA9IG9iajsgfQogICAgaWYgKCdzdHJpbmcnID09PSB0eXBlb2YgbWV0aG9k
        KSB7IG1ldGhvZCA9IHRhcmdldFttZXRob2RdOyB9CiAgICBpZiAocGFyYW1z
        KSB7CiAgICAgIG1ldGhvZC5hcHBseSh0YXJnZXQsIHBhcmFtcyk7CiAgICB9
        IGVsc2UgewogICAgICBtZXRob2QuY2FsbCh0YXJnZXQpOwogICAgfQogIH0K
        ICByZXR1cm4gdHJ1ZTsKfQoKLyoqCiAgQHByaXZhdGUKICBAbWV0aG9kIGhh
        c0xpc3RlbmVycwogIEBmb3IgRW1iZXIKICBAcGFyYW0gb2JqCiAgQHBhcmFt
        IHtTdHJpbmd9IGV2ZW50TmFtZQoqLwpmdW5jdGlvbiBoYXNMaXN0ZW5lcnMo
        b2JqLCBldmVudE5hbWUpIHsKICB2YXIgbWV0YSA9IG9ialtNRVRBX0tFWV0s
        CiAgICAgIGFjdGlvbnMgPSBtZXRhICYmIG1ldGEubGlzdGVuZXJzICYmIG1l
        dGEubGlzdGVuZXJzW2V2ZW50TmFtZV07CgogIHJldHVybiAhIShhY3Rpb25z
        ICYmIGFjdGlvbnMubGVuZ3RoKTsKfQoKLyoqCiAgQHByaXZhdGUKICBAbWV0
        aG9kIGxpc3RlbmVyc0ZvcgogIEBmb3IgRW1iZXIKICBAcGFyYW0gb2JqCiAg
        QHBhcmFtIHtTdHJpbmd9IGV2ZW50TmFtZQoqLwpmdW5jdGlvbiBsaXN0ZW5l
        cnNGb3Iob2JqLCBldmVudE5hbWUpIHsKICB2YXIgcmV0ID0gW107CiAgdmFy
        IG1ldGEgPSBvYmpbTUVUQV9LRVldLAogICAgICBhY3Rpb25zID0gbWV0YSAm
        JiBtZXRhLmxpc3RlbmVycyAmJiBtZXRhLmxpc3RlbmVyc1tldmVudE5hbWVd
        OwoKICBpZiAoIWFjdGlvbnMpIHsgcmV0dXJuIHJldDsgfQoKICBmb3IgKHZh
        ciBpID0gMCwgbCA9IGFjdGlvbnMubGVuZ3RoOyBpIDwgbDsgaSArPSAzKSB7
        CiAgICB2YXIgdGFyZ2V0ID0gYWN0aW9uc1tpXSwKICAgICAgICBtZXRob2Qg
        PSBhY3Rpb25zW2krMV07CiAgICByZXQucHVzaChbdGFyZ2V0LCBtZXRob2Rd
        KTsKICB9CgogIHJldHVybiByZXQ7Cn0KCi8qKgogIERlZmluZSBhIHByb3Bl
        cnR5IGFzIGEgZnVuY3Rpb24gdGhhdCBzaG91bGQgYmUgZXhlY3V0ZWQgd2hl
        bgogIGEgc3BlY2lmaWVkIGV2ZW50IG9yIGV2ZW50cyBhcmUgdHJpZ2dlcmVk
        LgoKICAgICAgdmFyIEpvYiA9IEVtYmVyLk9iamVjdC5leHRlbmQoewogICAg
        ICAgIGxvZ0NvbXBsZXRlZDogRW1iZXIub24oJ2NvbXBsZXRlZCcsIGZ1bmN0
        aW9uKCl7CiAgICAgICAgICBjb25zb2xlLmxvZygnSm9iIGNvbXBsZXRlZCEn
        KTsKICAgICAgICB9KQogICAgICB9KTsKICAgICAgdmFyIGpvYiA9IEpvYi5j
        cmVhdGUoKTsKICAgICAgRW1iZXIuc2VuZEV2ZW50KGpvYiwgJ2NvbXBsZXRl
        ZCcpOyAvLyBMb2dzICJKb2IgY29tcGxldGVkISIKCiAgQG1ldGhvZCBvbgog
        IEBmb3IgRW1iZXIKICBAcGFyYW0ge1N0cmluZ30gZXZlbnROYW1lcyoKICBA
        cGFyYW0ge0Z1bmN0aW9ufSBmdW5jCiAgQHJldHVybiBmdW5jCiovCkVtYmVy
        Lm9uID0gZnVuY3Rpb24oKXsKICB2YXIgZnVuYyA9IGFfc2xpY2UuY2FsbChh
        cmd1bWVudHMsIC0xKVswXSwKICAgICAgZXZlbnRzID0gYV9zbGljZS5jYWxs
        KGFyZ3VtZW50cywgMCwgLTEpOwogIGZ1bmMuX19lbWJlcl9saXN0ZW5zX18g
        PSBldmVudHM7CiAgcmV0dXJuIGZ1bmM7Cn07CgpFbWJlci5hZGRMaXN0ZW5l
        ciA9IGFkZExpc3RlbmVyOwpFbWJlci5yZW1vdmVMaXN0ZW5lciA9IHJlbW92
        ZUxpc3RlbmVyOwpFbWJlci5fc3VzcGVuZExpc3RlbmVyID0gc3VzcGVuZExp
        c3RlbmVyOwpFbWJlci5fc3VzcGVuZExpc3RlbmVycyA9IHN1c3BlbmRMaXN0
        ZW5lcnM7CkVtYmVyLnNlbmRFdmVudCA9IHNlbmRFdmVudDsKRW1iZXIuaGFz
        TGlzdGVuZXJzID0gaGFzTGlzdGVuZXJzOwpFbWJlci53YXRjaGVkRXZlbnRz
        ID0gd2F0Y2hlZEV2ZW50czsKRW1iZXIubGlzdGVuZXJzRm9yID0gbGlzdGVu
        ZXJzRm9yOwpFbWJlci5saXN0ZW5lcnNEaWZmID0gYWN0aW9uc0RpZmY7CkVt
        YmVyLmxpc3RlbmVyc1VuaW9uID0gYWN0aW9uc1VuaW9uOwoKfSkoKTsKCgoK
        KGZ1bmN0aW9uKCkgewp2YXIgZ3VpZEZvciA9IEVtYmVyLmd1aWRGb3IsCiAg
        ICBzZW5kRXZlbnQgPSBFbWJlci5zZW5kRXZlbnQ7CgovKgogIHRoaXMub2Jz
        ZXJ2ZXJTZXQgPSB7CiAgICBbc2VuZGVyR3VpZF06IHsgLy8gdmFyaWFibGUg
        bmFtZTogYGtleVNldGAKICAgICAgW2tleU5hbWVdOiBsaXN0SW5kZXgKICAg
        IH0KICB9LAogIHRoaXMub2JzZXJ2ZXJzID0gWwogICAgewogICAgICBzZW5k
        ZXI6IG9iaiwKICAgICAga2V5TmFtZToga2V5TmFtZSwKICAgICAgZXZlbnRO
        YW1lOiBldmVudE5hbWUsCiAgICAgIGxpc3RlbmVyczogWwogICAgICAgIFt0
        YXJnZXQsIG1ldGhvZCwgZmxhZ3NdCiAgICAgIF0KICAgIH0sCiAgICAuLi4K
        ICBdCiovCnZhciBPYnNlcnZlclNldCA9IEVtYmVyLl9PYnNlcnZlclNldCA9
        IGZ1bmN0aW9uKCkgewogIHRoaXMuY2xlYXIoKTsKfTsKCk9ic2VydmVyU2V0
        LnByb3RvdHlwZS5hZGQgPSBmdW5jdGlvbihzZW5kZXIsIGtleU5hbWUsIGV2
        ZW50TmFtZSkgewogIHZhciBvYnNlcnZlclNldCA9IHRoaXMub2JzZXJ2ZXJT
        ZXQsCiAgICAgIG9ic2VydmVycyA9IHRoaXMub2JzZXJ2ZXJzLAogICAgICBz
        ZW5kZXJHdWlkID0gZ3VpZEZvcihzZW5kZXIpLAogICAgICBrZXlTZXQgPSBv
        YnNlcnZlclNldFtzZW5kZXJHdWlkXSwKICAgICAgaW5kZXg7CgogIGlmICgh
        a2V5U2V0KSB7CiAgICBvYnNlcnZlclNldFtzZW5kZXJHdWlkXSA9IGtleVNl
        dCA9IHt9OwogIH0KICBpbmRleCA9IGtleVNldFtrZXlOYW1lXTsKICBpZiAo
        aW5kZXggPT09IHVuZGVmaW5lZCkgewogICAgaW5kZXggPSBvYnNlcnZlcnMu
        cHVzaCh7CiAgICAgIHNlbmRlcjogc2VuZGVyLAogICAgICBrZXlOYW1lOiBr
        ZXlOYW1lLAogICAgICBldmVudE5hbWU6IGV2ZW50TmFtZSwKICAgICAgbGlz
        dGVuZXJzOiBbXQogICAgfSkgLSAxOwogICAga2V5U2V0W2tleU5hbWVdID0g
        aW5kZXg7CiAgfQogIHJldHVybiBvYnNlcnZlcnNbaW5kZXhdLmxpc3RlbmVy
        czsKfTsKCk9ic2VydmVyU2V0LnByb3RvdHlwZS5mbHVzaCA9IGZ1bmN0aW9u
        KCkgewogIHZhciBvYnNlcnZlcnMgPSB0aGlzLm9ic2VydmVycywgaSwgbGVu
        LCBvYnNlcnZlciwgc2VuZGVyOwogIHRoaXMuY2xlYXIoKTsKICBmb3IgKGk9
        MCwgbGVuPW9ic2VydmVycy5sZW5ndGg7IGkgPCBsZW47ICsraSkgewogICAg
        b2JzZXJ2ZXIgPSBvYnNlcnZlcnNbaV07CiAgICBzZW5kZXIgPSBvYnNlcnZl
        ci5zZW5kZXI7CiAgICBpZiAoc2VuZGVyLmlzRGVzdHJveWluZyB8fCBzZW5k
        ZXIuaXNEZXN0cm95ZWQpIHsgY29udGludWU7IH0KICAgIHNlbmRFdmVudChz
        ZW5kZXIsIG9ic2VydmVyLmV2ZW50TmFtZSwgW3NlbmRlciwgb2JzZXJ2ZXIu
        a2V5TmFtZV0sIG9ic2VydmVyLmxpc3RlbmVycyk7CiAgfQp9OwoKT2JzZXJ2
        ZXJTZXQucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24oKSB7CiAgdGhpcy5v
        YnNlcnZlclNldCA9IHt9OwogIHRoaXMub2JzZXJ2ZXJzID0gW107Cn07Cn0p
        KCk7CgoKCihmdW5jdGlvbigpIHsKdmFyIG1ldGFGb3IgPSBFbWJlci5tZXRh
        LAogICAgZ3VpZEZvciA9IEVtYmVyLmd1aWRGb3IsCiAgICB0cnlGaW5hbGx5
        ID0gRW1iZXIudHJ5RmluYWxseSwKICAgIHNlbmRFdmVudCA9IEVtYmVyLnNl
        bmRFdmVudCwKICAgIGxpc3RlbmVyc1VuaW9uID0gRW1iZXIubGlzdGVuZXJz
        VW5pb24sCiAgICBsaXN0ZW5lcnNEaWZmID0gRW1iZXIubGlzdGVuZXJzRGlm
        ZiwKICAgIE9ic2VydmVyU2V0ID0gRW1iZXIuX09ic2VydmVyU2V0LAogICAg
        YmVmb3JlT2JzZXJ2ZXJTZXQgPSBuZXcgT2JzZXJ2ZXJTZXQoKSwKICAgIG9i
        c2VydmVyU2V0ID0gbmV3IE9ic2VydmVyU2V0KCksCiAgICBkZWZlcnJlZCA9
        IDA7CgovLyAuLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4u
        Li4uLi4uLi4uLi4uLi4uLi4uLi4uCi8vIFBST1BFUlRZIENIQU5HRVMKLy8K
        Ci8qKgogIFRoaXMgZnVuY3Rpb24gaXMgY2FsbGVkIGp1c3QgYmVmb3JlIGFu
        IG9iamVjdCBwcm9wZXJ0eSBpcyBhYm91dCB0byBjaGFuZ2UuCiAgSXQgd2ls
        bCBub3RpZnkgYW55IGJlZm9yZSBvYnNlcnZlcnMgYW5kIHByZXBhcmUgY2Fj
        aGVzIGFtb25nIG90aGVyIHRoaW5ncy4KCiAgTm9ybWFsbHkgeW91IHdpbGwg
        bm90IG5lZWQgdG8gY2FsbCB0aGlzIG1ldGhvZCBkaXJlY3RseSBidXQgaWYg
        Zm9yIHNvbWUKICByZWFzb24geW91IGNhbid0IGRpcmVjdGx5IHdhdGNoIGEg
        cHJvcGVydHkgeW91IGNhbiBpbnZva2UgdGhpcyBtZXRob2QKICBtYW51YWxs
        eSBhbG9uZyB3aXRoIGBFbWJlci5wcm9wZXJ0eURpZENoYW5nZSgpYCB3aGlj
        aCB5b3Ugc2hvdWxkIGNhbGwganVzdAogIGFmdGVyIHRoZSBwcm9wZXJ0eSB2
        YWx1ZSBjaGFuZ2VzLgoKICBAbWV0aG9kIHByb3BlcnR5V2lsbENoYW5nZQog
        IEBmb3IgRW1iZXIKICBAcGFyYW0ge09iamVjdH0gb2JqIFRoZSBvYmplY3Qg
        d2l0aCB0aGUgcHJvcGVydHkgdGhhdCB3aWxsIGNoYW5nZQogIEBwYXJhbSB7
        U3RyaW5nfSBrZXlOYW1lIFRoZSBwcm9wZXJ0eSBrZXkgKG9yIHBhdGgpIHRo
        YXQgd2lsbCBjaGFuZ2UuCiAgQHJldHVybiB7dm9pZH0KKi8KZnVuY3Rpb24g
        cHJvcGVydHlXaWxsQ2hhbmdlKG9iaiwga2V5TmFtZSkgewogIHZhciBtID0g
        bWV0YUZvcihvYmosIGZhbHNlKSwKICAgICAgd2F0Y2hpbmcgPSBtLndhdGNo
        aW5nW2tleU5hbWVdID4gMCB8fCBrZXlOYW1lID09PSAnbGVuZ3RoJywKICAg
        ICAgcHJvdG8gPSBtLnByb3RvLAogICAgICBkZXNjID0gbS5kZXNjc1trZXlO
        YW1lXTsKCiAgaWYgKCF3YXRjaGluZykgeyByZXR1cm47IH0KICBpZiAocHJv
        dG8gPT09IG9iaikgeyByZXR1cm47IH0KICBpZiAoZGVzYyAmJiBkZXNjLndp
        bGxDaGFuZ2UpIHsgZGVzYy53aWxsQ2hhbmdlKG9iaiwga2V5TmFtZSk7IH0K
        ICBkZXBlbmRlbnRLZXlzV2lsbENoYW5nZShvYmosIGtleU5hbWUsIG0pOwog
        IGNoYWluc1dpbGxDaGFuZ2Uob2JqLCBrZXlOYW1lLCBtKTsKICBub3RpZnlC
        ZWZvcmVPYnNlcnZlcnMob2JqLCBrZXlOYW1lKTsKfQpFbWJlci5wcm9wZXJ0
        eVdpbGxDaGFuZ2UgPSBwcm9wZXJ0eVdpbGxDaGFuZ2U7CgovKioKICBUaGlz
        IGZ1bmN0aW9uIGlzIGNhbGxlZCBqdXN0IGFmdGVyIGFuIG9iamVjdCBwcm9w
        ZXJ0eSBoYXMgY2hhbmdlZC4KICBJdCB3aWxsIG5vdGlmeSBhbnkgb2JzZXJ2
        ZXJzIGFuZCBjbGVhciBjYWNoZXMgYW1vbmcgb3RoZXIgdGhpbmdzLgoKICBO
        b3JtYWxseSB5b3Ugd2lsbCBub3QgbmVlZCB0byBjYWxsIHRoaXMgbWV0aG9k
        IGRpcmVjdGx5IGJ1dCBpZiBmb3Igc29tZQogIHJlYXNvbiB5b3UgY2FuJ3Qg
        ZGlyZWN0bHkgd2F0Y2ggYSBwcm9wZXJ0eSB5b3UgY2FuIGludm9rZSB0aGlz
        IG1ldGhvZAogIG1hbnVhbGx5IGFsb25nIHdpdGggYEVtYmVyLnByb3BlcnR5
        V2lsbENoYW5nZSgpYCB3aGljaCB5b3Ugc2hvdWxkIGNhbGwganVzdAogIGJl
        Zm9yZSB0aGUgcHJvcGVydHkgdmFsdWUgY2hhbmdlcy4KCiAgQG1ldGhvZCBw
        cm9wZXJ0eURpZENoYW5nZQogIEBmb3IgRW1iZXIKICBAcGFyYW0ge09iamVj
        dH0gb2JqIFRoZSBvYmplY3Qgd2l0aCB0aGUgcHJvcGVydHkgdGhhdCB3aWxs
        IGNoYW5nZQogIEBwYXJhbSB7U3RyaW5nfSBrZXlOYW1lIFRoZSBwcm9wZXJ0
        eSBrZXkgKG9yIHBhdGgpIHRoYXQgd2lsbCBjaGFuZ2UuCiAgQHJldHVybiB7
        dm9pZH0KKi8KZnVuY3Rpb24gcHJvcGVydHlEaWRDaGFuZ2Uob2JqLCBrZXlO
        YW1lKSB7CiAgdmFyIG0gPSBtZXRhRm9yKG9iaiwgZmFsc2UpLAogICAgICB3
        YXRjaGluZyA9IG0ud2F0Y2hpbmdba2V5TmFtZV0gPiAwIHx8IGtleU5hbWUg
        PT09ICdsZW5ndGgnLAogICAgICBwcm90byA9IG0ucHJvdG8sCiAgICAgIGRl
        c2MgPSBtLmRlc2NzW2tleU5hbWVdOwoKICBpZiAocHJvdG8gPT09IG9iaikg
        eyByZXR1cm47IH0KCiAgLy8gc2hvdWxkbid0IHRoaXMgbWVhbiB0aGF0IHdl
        J3JlIHdhdGNoaW5nIHRoaXMga2V5PwogIGlmIChkZXNjICYmIGRlc2MuZGlk
        Q2hhbmdlKSB7IGRlc2MuZGlkQ2hhbmdlKG9iaiwga2V5TmFtZSk7IH0KICBp
        ZiAoIXdhdGNoaW5nICYmIGtleU5hbWUgIT09ICdsZW5ndGgnKSB7IHJldHVy
        bjsgfQoKICBkZXBlbmRlbnRLZXlzRGlkQ2hhbmdlKG9iaiwga2V5TmFtZSwg
        bSk7CiAgY2hhaW5zRGlkQ2hhbmdlKG9iaiwga2V5TmFtZSwgbSwgZmFsc2Up
        OwogIG5vdGlmeU9ic2VydmVycyhvYmosIGtleU5hbWUpOwp9CkVtYmVyLnBy
        b3BlcnR5RGlkQ2hhbmdlID0gcHJvcGVydHlEaWRDaGFuZ2U7Cgp2YXIgV0lM
        TF9TRUVOLCBESURfU0VFTjsKCi8vIGNhbGxlZCB3aGVuZXZlciBhIHByb3Bl
        cnR5IGlzIGFib3V0IHRvIGNoYW5nZSB0byBjbGVhciB0aGUgY2FjaGUgb2Yg
        YW55IGRlcGVuZGVudCBrZXlzIChhbmQgbm90aWZ5IHRob3NlIHByb3BlcnRp
        ZXMgb2YgY2hhbmdlcywgZXRjLi4uKQpmdW5jdGlvbiBkZXBlbmRlbnRLZXlz
        V2lsbENoYW5nZShvYmosIGRlcEtleSwgbWV0YSkgewogIGlmIChvYmouaXNE
        ZXN0cm95aW5nKSB7IHJldHVybjsgfQoKICB2YXIgc2VlbiA9IFdJTExfU0VF
        TiwgdG9wID0gIXNlZW47CiAgaWYgKHRvcCkgeyBzZWVuID0gV0lMTF9TRUVO
        ID0ge307IH0KICBpdGVyRGVwcyhwcm9wZXJ0eVdpbGxDaGFuZ2UsIG9iaiwg
        ZGVwS2V5LCBzZWVuLCBtZXRhKTsKICBpZiAodG9wKSB7IFdJTExfU0VFTiA9
        IG51bGw7IH0KfQoKLy8gY2FsbGVkIHdoZW5ldmVyIGEgcHJvcGVydHkgaGFz
        IGp1c3QgY2hhbmdlZCB0byB1cGRhdGUgZGVwZW5kZW50IGtleXMKZnVuY3Rp
        b24gZGVwZW5kZW50S2V5c0RpZENoYW5nZShvYmosIGRlcEtleSwgbWV0YSkg
        ewogIGlmIChvYmouaXNEZXN0cm95aW5nKSB7IHJldHVybjsgfQoKICB2YXIg
        c2VlbiA9IERJRF9TRUVOLCB0b3AgPSAhc2VlbjsKICBpZiAodG9wKSB7IHNl
        ZW4gPSBESURfU0VFTiA9IHt9OyB9CiAgaXRlckRlcHMocHJvcGVydHlEaWRD
        aGFuZ2UsIG9iaiwgZGVwS2V5LCBzZWVuLCBtZXRhKTsKICBpZiAodG9wKSB7
        IERJRF9TRUVOID0gbnVsbDsgfQp9CgpmdW5jdGlvbiBpdGVyRGVwcyhtZXRo
        b2QsIG9iaiwgZGVwS2V5LCBzZWVuLCBtZXRhKSB7CiAgdmFyIGd1aWQgPSBn
        dWlkRm9yKG9iaik7CiAgaWYgKCFzZWVuW2d1aWRdKSBzZWVuW2d1aWRdID0g
        e307CiAgaWYgKHNlZW5bZ3VpZF1bZGVwS2V5XSkgcmV0dXJuOwogIHNlZW5b
        Z3VpZF1bZGVwS2V5XSA9IHRydWU7CgogIHZhciBkZXBzID0gbWV0YS5kZXBz
        OwogIGRlcHMgPSBkZXBzICYmIGRlcHNbZGVwS2V5XTsKICBpZiAoZGVwcykg
        ewogICAgZm9yKHZhciBrZXkgaW4gZGVwcykgewogICAgICB2YXIgZGVzYyA9
        IG1ldGEuZGVzY3Nba2V5XTsKICAgICAgaWYgKGRlc2MgJiYgZGVzYy5fc3Vz
        cGVuZGVkID09PSBvYmopIGNvbnRpbnVlOwogICAgICBtZXRob2Qob2JqLCBr
        ZXkpOwogICAgfQogIH0KfQoKZnVuY3Rpb24gY2hhaW5zV2lsbENoYW5nZShv
        YmosIGtleU5hbWUsIG0pIHsKICBpZiAoIShtLmhhc093blByb3BlcnR5KCdj
        aGFpbldhdGNoZXJzJykgJiYKICAgICAgICBtLmNoYWluV2F0Y2hlcnNba2V5
        TmFtZV0pKSB7CiAgICByZXR1cm47CiAgfQoKICB2YXIgbm9kZXMgPSBtLmNo
        YWluV2F0Y2hlcnNba2V5TmFtZV0sCiAgICAgIGV2ZW50cyA9IFtdLAogICAg
        ICBpLCBsOwoKICBmb3IoaSA9IDAsIGwgPSBub2Rlcy5sZW5ndGg7IGkgPCBs
        OyBpKyspIHsKICAgIG5vZGVzW2ldLndpbGxDaGFuZ2UoZXZlbnRzKTsKICB9
        CgogIGZvciAoaSA9IDAsIGwgPSBldmVudHMubGVuZ3RoOyBpIDwgbDsgaSAr
        PSAyKSB7CiAgICBwcm9wZXJ0eVdpbGxDaGFuZ2UoZXZlbnRzW2ldLCBldmVu
        dHNbaSsxXSk7CiAgfQp9CgpmdW5jdGlvbiBjaGFpbnNEaWRDaGFuZ2Uob2Jq
        LCBrZXlOYW1lLCBtLCBzdXBwcmVzc0V2ZW50cykgewogIGlmICghKG0uaGFz
        T3duUHJvcGVydHkoJ2NoYWluV2F0Y2hlcnMnKSAmJgogICAgICAgIG0uY2hh
        aW5XYXRjaGVyc1trZXlOYW1lXSkpIHsKICAgIHJldHVybjsKICB9CgogIHZh
        ciBub2RlcyA9IG0uY2hhaW5XYXRjaGVyc1trZXlOYW1lXSwKICAgICAgZXZl
        bnRzID0gc3VwcHJlc3NFdmVudHMgPyBudWxsIDogW10sCiAgICAgIGksIGw7
        CgogIGZvcihpID0gMCwgbCA9IG5vZGVzLmxlbmd0aDsgaSA8IGw7IGkrKykg
        ewogICAgbm9kZXNbaV0uZGlkQ2hhbmdlKGV2ZW50cyk7CiAgfQoKICBpZiAo
        c3VwcHJlc3NFdmVudHMpIHsKICAgIHJldHVybjsKICB9CgogIGZvciAoaSA9
        IDAsIGwgPSBldmVudHMubGVuZ3RoOyBpIDwgbDsgaSArPSAyKSB7CiAgICBw
        cm9wZXJ0eURpZENoYW5nZShldmVudHNbaV0sIGV2ZW50c1tpKzFdKTsKICB9
        Cn0KCkVtYmVyLm92ZXJyaWRlQ2hhaW5zID0gZnVuY3Rpb24ob2JqLCBrZXlO
        YW1lLCBtKSB7CiAgY2hhaW5zRGlkQ2hhbmdlKG9iaiwga2V5TmFtZSwgbSwg
        dHJ1ZSk7Cn07CgovKioKICBAbWV0aG9kIGJlZ2luUHJvcGVydHlDaGFuZ2Vz
        CiAgQGNoYWluYWJsZQoqLwpmdW5jdGlvbiBiZWdpblByb3BlcnR5Q2hhbmdl
        cygpIHsKICBkZWZlcnJlZCsrOwp9CgpFbWJlci5iZWdpblByb3BlcnR5Q2hh
        bmdlcyA9IGJlZ2luUHJvcGVydHlDaGFuZ2VzOwoKLyoqCiAgQG1ldGhvZCBl
        bmRQcm9wZXJ0eUNoYW5nZXMKKi8KZnVuY3Rpb24gZW5kUHJvcGVydHlDaGFu
        Z2VzKCkgewogIGRlZmVycmVkLS07CiAgaWYgKGRlZmVycmVkPD0wKSB7CiAg
        ICBiZWZvcmVPYnNlcnZlclNldC5jbGVhcigpOwogICAgb2JzZXJ2ZXJTZXQu
        Zmx1c2goKTsKICB9Cn0KCkVtYmVyLmVuZFByb3BlcnR5Q2hhbmdlcyA9IGVu
        ZFByb3BlcnR5Q2hhbmdlczsKCi8qKgogIE1ha2UgYSBzZXJpZXMgb2YgcHJv
        cGVydHkgY2hhbmdlcyB0b2dldGhlciBpbiBhbgogIGV4Y2VwdGlvbi1zYWZl
        IHdheS4KCiAgYGBgamF2YXNjcmlwdAogIEVtYmVyLmNoYW5nZVByb3BlcnRp
        ZXMoZnVuY3Rpb24oKSB7CiAgICBvYmoxLnNldCgnZm9vJywgbWF5Qmxvd1Vw
        V2hlblNldCk7CiAgICBvYmoyLnNldCgnYmFyJywgYmF6KTsKICB9KTsKICBg
        YGAKCiAgQG1ldGhvZCBjaGFuZ2VQcm9wZXJ0aWVzCiAgQHBhcmFtIHtGdW5j
        dGlvbn0gY2FsbGJhY2sKICBAcGFyYW0gW2JpbmRpbmddCiovCkVtYmVyLmNo
        YW5nZVByb3BlcnRpZXMgPSBmdW5jdGlvbihjYiwgYmluZGluZykgewogIGJl
        Z2luUHJvcGVydHlDaGFuZ2VzKCk7CiAgdHJ5RmluYWxseShjYiwgZW5kUHJv
        cGVydHlDaGFuZ2VzLCBiaW5kaW5nKTsKfTsKCmZ1bmN0aW9uIG5vdGlmeUJl
        Zm9yZU9ic2VydmVycyhvYmosIGtleU5hbWUpIHsKICBpZiAob2JqLmlzRGVz
        dHJveWluZykgeyByZXR1cm47IH0KCiAgdmFyIGV2ZW50TmFtZSA9IGtleU5h
        bWUgKyAnOmJlZm9yZScsIGxpc3RlbmVycywgZGlmZjsKICBpZiAoZGVmZXJy
        ZWQpIHsKICAgIGxpc3RlbmVycyA9IGJlZm9yZU9ic2VydmVyU2V0LmFkZChv
        YmosIGtleU5hbWUsIGV2ZW50TmFtZSk7CiAgICBkaWZmID0gbGlzdGVuZXJz
        RGlmZihvYmosIGV2ZW50TmFtZSwgbGlzdGVuZXJzKTsKICAgIHNlbmRFdmVu
        dChvYmosIGV2ZW50TmFtZSwgW29iaiwga2V5TmFtZV0sIGRpZmYpOwogIH0g
        ZWxzZSB7CiAgICBzZW5kRXZlbnQob2JqLCBldmVudE5hbWUsIFtvYmosIGtl
        eU5hbWVdKTsKICB9Cn0KCmZ1bmN0aW9uIG5vdGlmeU9ic2VydmVycyhvYmos
        IGtleU5hbWUpIHsKICBpZiAob2JqLmlzRGVzdHJveWluZykgeyByZXR1cm47
        IH0KCiAgdmFyIGV2ZW50TmFtZSA9IGtleU5hbWUgKyAnOmNoYW5nZScsIGxp
        c3RlbmVyczsKICBpZiAoZGVmZXJyZWQpIHsKICAgIGxpc3RlbmVycyA9IG9i
        c2VydmVyU2V0LmFkZChvYmosIGtleU5hbWUsIGV2ZW50TmFtZSk7CiAgICBs
        aXN0ZW5lcnNVbmlvbihvYmosIGV2ZW50TmFtZSwgbGlzdGVuZXJzKTsKICB9
        IGVsc2UgewogICAgc2VuZEV2ZW50KG9iaiwgZXZlbnROYW1lLCBbb2JqLCBr
        ZXlOYW1lXSk7CiAgfQp9Cgp9KSgpOwoKCgooZnVuY3Rpb24oKSB7Ci8vIE1F
        VEFfS0VZCi8vIF9nZXRQYXRoCi8vIHByb3BlcnR5V2lsbENoYW5nZSwgcHJv
        cGVydHlEaWRDaGFuZ2UKCnZhciBNRVRBX0tFWSA9IEVtYmVyLk1FVEFfS0VZ
        LAogICAgTUFOREFUT1JZX1NFVFRFUiA9IEVtYmVyLkVOVi5NQU5EQVRPUllf
        U0VUVEVSLAogICAgSVNfR0xPQkFMID0gL14oW0EtWiRdfChbMC05XVtBLVok
        XSkpLywKICAgIGdldFBhdGggPSBFbWJlci5fZ2V0UGF0aDsKCi8qKgogIFNl
        dHMgdGhlIHZhbHVlIG9mIGEgcHJvcGVydHkgb24gYW4gb2JqZWN0LCByZXNw
        ZWN0aW5nIGNvbXB1dGVkIHByb3BlcnRpZXMKICBhbmQgbm90aWZ5aW5nIG9i
        c2VydmVycyBhbmQgb3RoZXIgbGlzdGVuZXJzIG9mIHRoZSBjaGFuZ2UuIElm
        IHRoZQogIHByb3BlcnR5IGlzIG5vdCBkZWZpbmVkIGJ1dCB0aGUgb2JqZWN0
        IGltcGxlbWVudHMgdGhlIGBzZXRVbmtub3duUHJvcGVydHlgCiAgbWV0aG9k
        IHRoZW4gdGhhdCB3aWxsIGJlIGludm9rZWQgYXMgd2VsbC4KCiAgSWYgeW91
        IHBsYW4gdG8gcnVuIG9uIElFOCBhbmQgb2xkZXIgYnJvd3NlcnMgdGhlbiB5
        b3Ugc2hvdWxkIHVzZSB0aGlzCiAgbWV0aG9kIGFueXRpbWUgeW91IHdhbnQg
        dG8gc2V0IGEgcHJvcGVydHkgb24gYW4gb2JqZWN0IHRoYXQgeW91IGRvbid0
        CiAga25vdyBmb3Igc3VyZSBpcyBwcml2YXRlLiAoUHJvcGVydGllcyBiZWdp
        bm5pbmcgd2l0aCBhbiB1bmRlcnNjb3JlICdfJwogIGFyZSBjb25zaWRlcmVk
        IHByaXZhdGUuKQoKICBPbiBhbGwgbmV3ZXIgYnJvd3NlcnMsIHlvdSBvbmx5
        IG5lZWQgdG8gdXNlIHRoaXMgbWV0aG9kIHRvIHNldAogIHByb3BlcnRpZXMg
        aWYgdGhlIHByb3BlcnR5IG1pZ2h0IG5vdCBiZSBkZWZpbmVkIG9uIHRoZSBv
        YmplY3QgYW5kIHlvdSB3YW50CiAgdG8gcmVzcGVjdCB0aGUgYHNldFVua25v
        d25Qcm9wZXJ0eWAgaGFuZGxlci4gT3RoZXJ3aXNlIHlvdSBjYW4gaWdub3Jl
        IHRoaXMKICBtZXRob2QuCgogIEBtZXRob2Qgc2V0CiAgQGZvciBFbWJlcgog
        IEBwYXJhbSB7T2JqZWN0fSBvYmogVGhlIG9iamVjdCB0byBtb2RpZnkuCiAg
        QHBhcmFtIHtTdHJpbmd9IGtleU5hbWUgVGhlIHByb3BlcnR5IGtleSB0byBz
        ZXQKICBAcGFyYW0ge09iamVjdH0gdmFsdWUgVGhlIHZhbHVlIHRvIHNldAog
        IEByZXR1cm4ge09iamVjdH0gdGhlIHBhc3NlZCB2YWx1ZS4KKi8KdmFyIHNl
        dCA9IGZ1bmN0aW9uIHNldChvYmosIGtleU5hbWUsIHZhbHVlLCB0b2xlcmFu
        dCkgewogIGlmICh0eXBlb2Ygb2JqID09PSAnc3RyaW5nJykgewogICAgRW1i
        ZXIuYXNzZXJ0KCJQYXRoICciICsgb2JqICsgIicgbXVzdCBiZSBnbG9iYWwg
        aWYgbm8gb2JqIGlzIGdpdmVuLiIsIElTX0dMT0JBTC50ZXN0KG9iaikpOwog
        ICAgdmFsdWUgPSBrZXlOYW1lOwogICAga2V5TmFtZSA9IG9iajsKICAgIG9i
        aiA9IG51bGw7CiAgfQoKICBFbWJlci5hc3NlcnQoIkNhbm5vdCBjYWxsIHNl
        dCB3aXRoICIrIGtleU5hbWUgKyIga2V5LiIsICEha2V5TmFtZSk7CgogIGlm
        ICghb2JqIHx8IGtleU5hbWUuaW5kZXhPZignLicpICE9PSAtMSkgewogICAg
        cmV0dXJuIHNldFBhdGgob2JqLCBrZXlOYW1lLCB2YWx1ZSwgdG9sZXJhbnQp
        OwogIH0KCiAgRW1iZXIuYXNzZXJ0KCJZb3UgbmVlZCB0byBwcm92aWRlIGFu
        IG9iamVjdCBhbmQga2V5IHRvIGBzZXRgLiIsICEhb2JqICYmIGtleU5hbWUg
        IT09IHVuZGVmaW5lZCk7CiAgRW1iZXIuYXNzZXJ0KCdjYWxsaW5nIHNldCBv
        biBkZXN0cm95ZWQgb2JqZWN0JywgIW9iai5pc0Rlc3Ryb3llZCk7CgogIHZh
        ciBtZXRhID0gb2JqW01FVEFfS0VZXSwgZGVzYyA9IG1ldGEgJiYgbWV0YS5k
        ZXNjc1trZXlOYW1lXSwKICAgICAgaXNVbmtub3duLCBjdXJyZW50VmFsdWU7
        CiAgaWYgKGRlc2MpIHsKICAgIGRlc2Muc2V0KG9iaiwga2V5TmFtZSwgdmFs
        dWUpOwogIH0gZWxzZSB7CiAgICBpc1Vua25vd24gPSAnb2JqZWN0JyA9PT0g
        dHlwZW9mIG9iaiAmJiAhKGtleU5hbWUgaW4gb2JqKTsKCiAgICAvLyBzZXRV
        bmtub3duUHJvcGVydHkgaXMgY2FsbGVkIGlmIGBvYmpgIGlzIGFuIG9iamVj
        dCwKICAgIC8vIHRoZSBwcm9wZXJ0eSBkb2VzIG5vdCBhbHJlYWR5IGV4aXN0
        LCBhbmQgdGhlCiAgICAvLyBgc2V0VW5rbm93blByb3BlcnR5YCBtZXRob2Qg
        ZXhpc3RzIG9uIHRoZSBvYmplY3QKICAgIGlmIChpc1Vua25vd24gJiYgJ2Z1
        bmN0aW9uJyA9PT0gdHlwZW9mIG9iai5zZXRVbmtub3duUHJvcGVydHkpIHsK
        ICAgICAgb2JqLnNldFVua25vd25Qcm9wZXJ0eShrZXlOYW1lLCB2YWx1ZSk7
        CiAgICB9IGVsc2UgaWYgKG1ldGEgJiYgbWV0YS53YXRjaGluZ1trZXlOYW1l
        XSA+IDApIHsKICAgICAgaWYgKE1BTkRBVE9SWV9TRVRURVIpIHsKICAgICAg
        ICBjdXJyZW50VmFsdWUgPSBtZXRhLnZhbHVlc1trZXlOYW1lXTsKICAgICAg
        fSBlbHNlIHsKICAgICAgICBjdXJyZW50VmFsdWUgPSBvYmpba2V5TmFtZV07
        CiAgICAgIH0KICAgICAgLy8gb25seSB0cmlnZ2VyIGEgY2hhbmdlIGlmIHRo
        ZSB2YWx1ZSBoYXMgY2hhbmdlZAogICAgICBpZiAodmFsdWUgIT09IGN1cnJl
        bnRWYWx1ZSkgewogICAgICAgIEVtYmVyLnByb3BlcnR5V2lsbENoYW5nZShv
        YmosIGtleU5hbWUpOwogICAgICAgIGlmIChNQU5EQVRPUllfU0VUVEVSKSB7
        CiAgICAgICAgICBpZiAoY3VycmVudFZhbHVlID09PSB1bmRlZmluZWQgJiYg
        IShrZXlOYW1lIGluIG9iaikpIHsKICAgICAgICAgICAgRW1iZXIuZGVmaW5l
        UHJvcGVydHkob2JqLCBrZXlOYW1lLCBudWxsLCB2YWx1ZSk7IC8vIHNldHVw
        IG1hbmRhdG9yeSBzZXR0ZXIKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAg
        ICAgIG1ldGEudmFsdWVzW2tleU5hbWVdID0gdmFsdWU7CiAgICAgICAgICB9
        CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIG9ialtrZXlOYW1lXSA9IHZh
        bHVlOwogICAgICAgIH0KICAgICAgICBFbWJlci5wcm9wZXJ0eURpZENoYW5n
        ZShvYmosIGtleU5hbWUpOwogICAgICB9CiAgICB9IGVsc2UgewogICAgICBv
        Ympba2V5TmFtZV0gPSB2YWx1ZTsKICAgIH0KICB9CiAgcmV0dXJuIHZhbHVl
        Owp9OwoKLy8gQ3VycmVudGx5IHVzZWQgb25seSBieSBFbWJlciBEYXRhIHRl
        c3RzCmlmIChFbWJlci5jb25maWcub3ZlcnJpZGVBY2Nlc3NvcnMpIHsKICBF
        bWJlci5zZXQgPSBzZXQ7CiAgRW1iZXIuY29uZmlnLm92ZXJyaWRlQWNjZXNz
        b3JzKCk7CiAgc2V0ID0gRW1iZXIuc2V0Owp9CgpmdW5jdGlvbiBzZXRQYXRo
        KHJvb3QsIHBhdGgsIHZhbHVlLCB0b2xlcmFudCkgewogIHZhciBrZXlOYW1l
        OwoKICAvLyBnZXQgdGhlIGxhc3QgcGFydCBvZiB0aGUgcGF0aAogIGtleU5h
        bWUgPSBwYXRoLnNsaWNlKHBhdGgubGFzdEluZGV4T2YoJy4nKSArIDEpOwoK
        ICAvLyBnZXQgdGhlIGZpcnN0IHBhcnQgb2YgdGhlIHBhcnQKICBwYXRoICAg
        ID0gcGF0aC5zbGljZSgwLCBwYXRoLmxlbmd0aC0oa2V5TmFtZS5sZW5ndGgr
        MSkpOwoKICAvLyB1bmxlc3MgdGhlIHBhdGggaXMgdGhpcywgbG9vayB1cCB0
        aGUgZmlyc3QgcGFydCB0bwogIC8vIGdldCB0aGUgcm9vdAogIGlmIChwYXRo
        ICE9PSAndGhpcycpIHsKICAgIHJvb3QgPSBnZXRQYXRoKHJvb3QsIHBhdGgp
        OwogIH0KCiAgaWYgKCFrZXlOYW1lIHx8IGtleU5hbWUubGVuZ3RoID09PSAw
        KSB7CiAgICB0aHJvdyBuZXcgRW1iZXIuRXJyb3IoJ1lvdSBwYXNzZWQgYW4g
        ZW1wdHkgcGF0aCcpOwogIH0KCiAgaWYgKCFyb290KSB7CiAgICBpZiAodG9s
        ZXJhbnQpIHsgcmV0dXJuOyB9CiAgICBlbHNlIHsgdGhyb3cgbmV3IEVtYmVy
        LkVycm9yKCdPYmplY3QgaW4gcGF0aCAnK3BhdGgrJyBjb3VsZCBub3QgYmUg
        Zm91bmQgb3Igd2FzIGRlc3Ryb3llZC4nKTsgfQogIH0KCiAgcmV0dXJuIHNl
        dChyb290LCBrZXlOYW1lLCB2YWx1ZSk7Cn0KCkVtYmVyLnNldCA9IHNldDsK
        Ci8qKgogIEVycm9yLXRvbGVyYW50IGZvcm0gb2YgYEVtYmVyLnNldGAuIFdp
        bGwgbm90IGJsb3cgdXAgaWYgYW55IHBhcnQgb2YgdGhlCiAgY2hhaW4gaXMg
        YHVuZGVmaW5lZGAsIGBudWxsYCwgb3IgZGVzdHJveWVkLgoKICBUaGlzIGlz
        IHByaW1hcmlseSB1c2VkIHdoZW4gc3luY2luZyBiaW5kaW5ncywgd2hpY2gg
        bWF5IHRyeSB0byB1cGRhdGUgYWZ0ZXIKICBhbiBvYmplY3QgaGFzIGJlZW4g
        ZGVzdHJveWVkLgoKICBAbWV0aG9kIHRyeVNldAogIEBmb3IgRW1iZXIKICBA
        cGFyYW0ge09iamVjdH0gb2JqIFRoZSBvYmplY3QgdG8gbW9kaWZ5LgogIEBw
        YXJhbSB7U3RyaW5nfSBwYXRoIFRoZSBwcm9wZXJ0eSBwYXRoIHRvIHNldAog
        IEBwYXJhbSB7T2JqZWN0fSB2YWx1ZSBUaGUgdmFsdWUgdG8gc2V0CiovCkVt
        YmVyLnRyeVNldCA9IGZ1bmN0aW9uKHJvb3QsIHBhdGgsIHZhbHVlKSB7CiAg
        cmV0dXJuIHNldChyb290LCBwYXRoLCB2YWx1ZSwgdHJ1ZSk7Cn07Cgp9KSgp
        OwoKCgooZnVuY3Rpb24oKSB7Ci8qKgpAbW9kdWxlIGVtYmVyLW1ldGFsCiov
        CgovKgogIEphdmFTY3JpcHQgKGJlZm9yZSBFUzYpIGRvZXMgbm90IGhhdmUg
        YSBNYXAgaW1wbGVtZW50YXRpb24uIE9iamVjdHMsCiAgd2hpY2ggYXJlIG9m
        dGVuIHVzZWQgYXMgZGljdGlvbmFyaWVzLCBtYXkgb25seSBoYXZlIFN0cmlu
        Z3MgYXMga2V5cy4KCiAgQmVjYXVzZSBFbWJlciBoYXMgYSB3YXkgdG8gZ2V0
        IGEgdW5pcXVlIGlkZW50aWZpZXIgZm9yIGV2ZXJ5IG9iamVjdAogIHZpYSBg
        RW1iZXIuZ3VpZEZvcmAsIHdlIGNhbiBpbXBsZW1lbnQgYSBwZXJmb3JtYW50
        IE1hcCB3aXRoIGFyYml0cmFyeQogIGtleXMuIEJlY2F1c2UgaXQgaXMgY29t
        bW9ubHkgdXNlZCBpbiBsb3ctbGV2ZWwgYm9va2tlZXBpbmcsIE1hcCBpcwog
        IGltcGxlbWVudGVkIGFzIGEgcHVyZSBKYXZhU2NyaXB0IG9iamVjdCBmb3Ig
        cGVyZm9ybWFuY2UuCgogIFRoaXMgaW1wbGVtZW50YXRpb24gZm9sbG93cyB0
        aGUgY3VycmVudCBpdGVyYXRpb24gb2YgdGhlIEVTNiBwcm9wb3NhbCBmb3IK
        ICBtYXBzIChodHRwOi8vd2lraS5lY21hc2NyaXB0Lm9yZy9kb2t1LnBocD9p
        ZD1oYXJtb255OnNpbXBsZV9tYXBzX2FuZF9zZXRzKSwKICB3aXRoIHR3byBl
        eGNlcHRpb25zLiBGaXJzdCwgYmVjYXVzZSB3ZSBuZWVkIG91ciBpbXBsZW1l
        bnRhdGlvbiB0byBiZSBwbGVhc2FudAogIG9uIG9sZGVyIGJyb3dzZXJzLCB3
        ZSBkbyBub3QgdXNlIHRoZSBgZGVsZXRlYCBuYW1lICh1c2luZyBgcmVtb3Zl
        YCBpbnN0ZWFkKS4KICBTZWNvbmQsIGFzIHdlIGRvIG5vdCBoYXZlIHRoZSBs
        dXh1cnkgb2YgaW4tVk0gaXRlcmF0aW9uLCB3ZSBpbXBsZW1lbnQgYQogIGZv
        ckVhY2ggbWV0aG9kIGZvciBpdGVyYXRpb24uCgogIE1hcCBpcyBtb2NrZWQg
        b3V0IHRvIGxvb2sgbGlrZSBhbiBFbWJlciBvYmplY3QsIHNvIHlvdSBjYW4g
        ZG8KICBgRW1iZXIuTWFwLmNyZWF0ZSgpYCBmb3Igc3ltbWV0cnkgd2l0aCBv
        dGhlciBFbWJlciBjbGFzc2VzLgoqLwp2YXIgc2V0ID0gRW1iZXIuc2V0LAog
        ICAgZ3VpZEZvciA9IEVtYmVyLmd1aWRGb3IsCiAgICBpbmRleE9mID0gRW1i
        ZXIuQXJyYXlQb2x5ZmlsbHMuaW5kZXhPZjsKCnZhciBjb3B5ID0gZnVuY3Rp
        b24ob2JqKSB7CiAgdmFyIG91dHB1dCA9IHt9OwoKICBmb3IgKHZhciBwcm9w
        IGluIG9iaikgewogICAgaWYgKG9iai5oYXNPd25Qcm9wZXJ0eShwcm9wKSkg
        eyBvdXRwdXRbcHJvcF0gPSBvYmpbcHJvcF07IH0KICB9CgogIHJldHVybiBv
        dXRwdXQ7Cn07Cgp2YXIgY29weU1hcCA9IGZ1bmN0aW9uKG9yaWdpbmFsLCBu
        ZXdPYmplY3QpIHsKICB2YXIga2V5cyA9IG9yaWdpbmFsLmtleXMuY29weSgp
        LAogICAgICB2YWx1ZXMgPSBjb3B5KG9yaWdpbmFsLnZhbHVlcyk7CgogIG5l
        d09iamVjdC5rZXlzID0ga2V5czsKICBuZXdPYmplY3QudmFsdWVzID0gdmFs
        dWVzOwogIG5ld09iamVjdC5sZW5ndGggPSBvcmlnaW5hbC5sZW5ndGg7Cgog
        IHJldHVybiBuZXdPYmplY3Q7Cn07CgovKioKICBUaGlzIGNsYXNzIGlzIHVz
        ZWQgaW50ZXJuYWxseSBieSBFbWJlciBhbmQgRW1iZXIgRGF0YS4KICBQbGVh
        c2UgZG8gbm90IHVzZSBpdCBhdCB0aGlzIHRpbWUuIFdlIHBsYW4gdG8gY2xl
        YW4gaXQgdXAKICBhbmQgYWRkIG1hbnkgdGVzdHMgc29vbi4KCiAgQGNsYXNz
        IE9yZGVyZWRTZXQKICBAbmFtZXNwYWNlIEVtYmVyCiAgQGNvbnN0cnVjdG9y
        CiAgQHByaXZhdGUKKi8KdmFyIE9yZGVyZWRTZXQgPSBFbWJlci5PcmRlcmVk
        U2V0ID0gZnVuY3Rpb24oKSB7CiAgdGhpcy5jbGVhcigpOwp9OwoKLyoqCiAg
        QG1ldGhvZCBjcmVhdGUKICBAc3RhdGljCiAgQHJldHVybiB7RW1iZXIuT3Jk
        ZXJlZFNldH0KKi8KT3JkZXJlZFNldC5jcmVhdGUgPSBmdW5jdGlvbigpIHsK
        ICByZXR1cm4gbmV3IE9yZGVyZWRTZXQoKTsKfTsKCgpPcmRlcmVkU2V0LnBy
        b3RvdHlwZSA9IHsKICAvKioKICAgIEBtZXRob2QgY2xlYXIKICAqLwogIGNs
        ZWFyOiBmdW5jdGlvbigpIHsKICAgIHRoaXMucHJlc2VuY2VTZXQgPSB7fTsK
        ICAgIHRoaXMubGlzdCA9IFtdOwogIH0sCgogIC8qKgogICAgQG1ldGhvZCBh
        ZGQKICAgIEBwYXJhbSBvYmoKICAqLwogIGFkZDogZnVuY3Rpb24ob2JqKSB7
        CiAgICB2YXIgZ3VpZCA9IGd1aWRGb3Iob2JqKSwKICAgICAgICBwcmVzZW5j
        ZVNldCA9IHRoaXMucHJlc2VuY2VTZXQsCiAgICAgICAgbGlzdCA9IHRoaXMu
        bGlzdDsKCiAgICBpZiAoZ3VpZCBpbiBwcmVzZW5jZVNldCkgeyByZXR1cm47
        IH0KCiAgICBwcmVzZW5jZVNldFtndWlkXSA9IHRydWU7CiAgICBsaXN0LnB1
        c2gob2JqKTsKICB9LAoKICAvKioKICAgIEBtZXRob2QgcmVtb3ZlCiAgICBA
        cGFyYW0gb2JqCiAgKi8KICByZW1vdmU6IGZ1bmN0aW9uKG9iaikgewogICAg
        dmFyIGd1aWQgPSBndWlkRm9yKG9iaiksCiAgICAgICAgcHJlc2VuY2VTZXQg
        PSB0aGlzLnByZXNlbmNlU2V0LAogICAgICAgIGxpc3QgPSB0aGlzLmxpc3Q7
        CgogICAgZGVsZXRlIHByZXNlbmNlU2V0W2d1aWRdOwoKICAgIHZhciBpbmRl
        eCA9IGluZGV4T2YuY2FsbChsaXN0LCBvYmopOwogICAgaWYgKGluZGV4ID4g
        LTEpIHsKICAgICAgbGlzdC5zcGxpY2UoaW5kZXgsIDEpOwogICAgfQogIH0s
        CgogIC8qKgogICAgQG1ldGhvZCBpc0VtcHR5CiAgICBAcmV0dXJuIHtCb29s
        ZWFufQogICovCiAgaXNFbXB0eTogZnVuY3Rpb24oKSB7CiAgICByZXR1cm4g
        dGhpcy5saXN0Lmxlbmd0aCA9PT0gMDsKICB9LAoKICAvKioKICAgIEBtZXRo
        b2QgaGFzCiAgICBAcGFyYW0gb2JqCiAgICBAcmV0dXJuIHtCb29sZWFufQog
        ICovCiAgaGFzOiBmdW5jdGlvbihvYmopIHsKICAgIHZhciBndWlkID0gZ3Vp
        ZEZvcihvYmopLAogICAgICAgIHByZXNlbmNlU2V0ID0gdGhpcy5wcmVzZW5j
        ZVNldDsKCiAgICByZXR1cm4gZ3VpZCBpbiBwcmVzZW5jZVNldDsKICB9LAoK
        ICAvKioKICAgIEBtZXRob2QgZm9yRWFjaAogICAgQHBhcmFtIHtGdW5jdGlv
        bn0gZm4KICAgIEBwYXJhbSBzZWxmCiAgKi8KICBmb3JFYWNoOiBmdW5jdGlv
        bihmbiwgc2VsZikgewogICAgLy8gYWxsb3cgbXV0YXRpb24gZHVyaW5nIGl0
        ZXJhdGlvbgogICAgdmFyIGxpc3QgPSB0aGlzLnRvQXJyYXkoKTsKCiAgICBm
        b3IgKHZhciBpID0gMCwgaiA9IGxpc3QubGVuZ3RoOyBpIDwgajsgaSsrKSB7
        CiAgICAgIGZuLmNhbGwoc2VsZiwgbGlzdFtpXSk7CiAgICB9CiAgfSwKCiAg
        LyoqCiAgICBAbWV0aG9kIHRvQXJyYXkKICAgIEByZXR1cm4ge0FycmF5fQog
        ICovCiAgdG9BcnJheTogZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gdGhpcy5s
        aXN0LnNsaWNlKCk7CiAgfSwKCiAgLyoqCiAgICBAbWV0aG9kIGNvcHkKICAg
        IEByZXR1cm4ge0VtYmVyLk9yZGVyZWRTZXR9CiAgKi8KICBjb3B5OiBmdW5j
        dGlvbigpIHsKICAgIHZhciBzZXQgPSBuZXcgT3JkZXJlZFNldCgpOwoKICAg
        IHNldC5wcmVzZW5jZVNldCA9IGNvcHkodGhpcy5wcmVzZW5jZVNldCk7CiAg
        ICBzZXQubGlzdCA9IHRoaXMudG9BcnJheSgpOwoKICAgIHJldHVybiBzZXQ7
        CiAgfQp9OwoKLyoqCiAgQSBNYXAgc3RvcmVzIHZhbHVlcyBpbmRleGVkIGJ5
        IGtleXMuIFVubGlrZSBKYXZhU2NyaXB0J3MKICBkZWZhdWx0IE9iamVjdHMs
        IHRoZSBrZXlzIG9mIGEgTWFwIGNhbiBiZSBhbnkgSmF2YVNjcmlwdAogIG9i
        amVjdC4KCiAgSW50ZXJuYWxseSwgYSBNYXAgaGFzIHR3byBkYXRhIHN0cnVj
        dHVyZXM6CgogIDEuIGBrZXlzYDogYW4gT3JkZXJlZFNldCBvZiBhbGwgb2Yg
        dGhlIGV4aXN0aW5nIGtleXMKICAyLiBgdmFsdWVzYDogYSBKYXZhU2NyaXB0
        IE9iamVjdCBpbmRleGVkIGJ5IHRoZSBgRW1iZXIuZ3VpZEZvcihrZXkpYAoK
        ICBXaGVuIGEga2V5L3ZhbHVlIHBhaXIgaXMgYWRkZWQgZm9yIHRoZSBmaXJz
        dCB0aW1lLCB3ZQogIGFkZCB0aGUga2V5IHRvIHRoZSBga2V5c2AgT3JkZXJl
        ZFNldCwgYW5kIGNyZWF0ZSBvcgogIHJlcGxhY2UgYW4gZW50cnkgaW4gYHZh
        bHVlc2AuIFdoZW4gYW4gZW50cnkgaXMgZGVsZXRlZCwKICB3ZSBkZWxldGUg
        aXRzIGVudHJ5IGluIGBrZXlzYCBhbmQgYHZhbHVlc2AuCgogIEBjbGFzcyBN
        YXAKICBAbmFtZXNwYWNlIEVtYmVyCiAgQHByaXZhdGUKICBAY29uc3RydWN0
        b3IKKi8KdmFyIE1hcCA9IEVtYmVyLk1hcCA9IGZ1bmN0aW9uKCkgewogIHRo
        aXMua2V5cyA9IEVtYmVyLk9yZGVyZWRTZXQuY3JlYXRlKCk7CiAgdGhpcy52
        YWx1ZXMgPSB7fTsKfTsKCi8qKgogIEBtZXRob2QgY3JlYXRlCiAgQHN0YXRp
        YwoqLwpNYXAuY3JlYXRlID0gZnVuY3Rpb24oKSB7CiAgcmV0dXJuIG5ldyBN
        YXAoKTsKfTsKCk1hcC5wcm90b3R5cGUgPSB7CiAgLyoqCiAgICBUaGlzIHBy
        b3BlcnR5IHdpbGwgY2hhbmdlIGFzIHRoZSBudW1iZXIgb2Ygb2JqZWN0cyBp
        biB0aGUgbWFwIGNoYW5nZXMuCiAgIAogICAgQHByb3BlcnR5IGxlbmd0aAog
        ICAgQHR5cGUgbnVtYmVyCiAgICBAZGVmYXVsdCAwCiAgKi8KICBsZW5ndGg6
        IDAsCiAgICAKICAgIAogIC8qKgogICAgUmV0cmlldmUgdGhlIHZhbHVlIGFz
        c29jaWF0ZWQgd2l0aCBhIGdpdmVuIGtleS4KCiAgICBAbWV0aG9kIGdldAog
        ICAgQHBhcmFtIHsqfSBrZXkKICAgIEByZXR1cm4geyp9IHRoZSB2YWx1ZSBh
        c3NvY2lhdGVkIHdpdGggdGhlIGtleSwgb3IgYHVuZGVmaW5lZGAKICAqLwog
        IGdldDogZnVuY3Rpb24oa2V5KSB7CiAgICB2YXIgdmFsdWVzID0gdGhpcy52
        YWx1ZXMsCiAgICAgICAgZ3VpZCA9IGd1aWRGb3Ioa2V5KTsKCiAgICByZXR1
        cm4gdmFsdWVzW2d1aWRdOwogIH0sCgogIC8qKgogICAgQWRkcyBhIHZhbHVl
        IHRvIHRoZSBtYXAuIElmIGEgdmFsdWUgZm9yIHRoZSBnaXZlbiBrZXkgaGFz
        IGFscmVhZHkgYmVlbgogICAgcHJvdmlkZWQsIHRoZSBuZXcgdmFsdWUgd2ls
        bCByZXBsYWNlIHRoZSBvbGQgdmFsdWUuCgogICAgQG1ldGhvZCBzZXQKICAg
        IEBwYXJhbSB7Kn0ga2V5CiAgICBAcGFyYW0geyp9IHZhbHVlCiAgKi8KICBz
        ZXQ6IGZ1bmN0aW9uKGtleSwgdmFsdWUpIHsKICAgIHZhciBrZXlzID0gdGhp
        cy5rZXlzLAogICAgICAgIHZhbHVlcyA9IHRoaXMudmFsdWVzLAogICAgICAg
        IGd1aWQgPSBndWlkRm9yKGtleSk7CgogICAga2V5cy5hZGQoa2V5KTsKICAg
        IHZhbHVlc1tndWlkXSA9IHZhbHVlOwogICAgc2V0KHRoaXMsICdsZW5ndGgn
        LCBrZXlzLmxpc3QubGVuZ3RoKTsKICB9LAoKICAvKioKICAgIFJlbW92ZXMg
        YSB2YWx1ZSBmcm9tIHRoZSBtYXAgZm9yIGFuIGFzc29jaWF0ZWQga2V5LgoK
        ICAgIEBtZXRob2QgcmVtb3ZlCiAgICBAcGFyYW0geyp9IGtleQogICAgQHJl
        dHVybiB7Qm9vbGVhbn0gdHJ1ZSBpZiBhbiBpdGVtIHdhcyByZW1vdmVkLCBm
        YWxzZSBvdGhlcndpc2UKICAqLwogIHJlbW92ZTogZnVuY3Rpb24oa2V5KSB7
        CiAgICAvLyBkb24ndCB1c2UgRVM2ICJkZWxldGUiIGJlY2F1c2UgaXQgd2ls
        bCBiZSBhbm5veWluZwogICAgLy8gdG8gdXNlIGluIGJyb3dzZXJzIHRoYXQg
        YXJlIG5vdCBFUzYgZnJpZW5kbHk7CiAgICB2YXIga2V5cyA9IHRoaXMua2V5
        cywKICAgICAgICB2YWx1ZXMgPSB0aGlzLnZhbHVlcywKICAgICAgICBndWlk
        ID0gZ3VpZEZvcihrZXkpOwoKICAgIGlmICh2YWx1ZXMuaGFzT3duUHJvcGVy
        dHkoZ3VpZCkpIHsKICAgICAga2V5cy5yZW1vdmUoa2V5KTsKICAgICAgZGVs
        ZXRlIHZhbHVlc1tndWlkXTsKICAgICAgc2V0KHRoaXMsICdsZW5ndGgnLCBr
        ZXlzLmxpc3QubGVuZ3RoKTsKICAgICAgcmV0dXJuIHRydWU7CiAgICB9IGVs
        c2UgewogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgfSwKCiAgLyoqCiAg
        ICBDaGVjayB3aGV0aGVyIGEga2V5IGlzIHByZXNlbnQuCgogICAgQG1ldGhv
        ZCBoYXMKICAgIEBwYXJhbSB7Kn0ga2V5CiAgICBAcmV0dXJuIHtCb29sZWFu
        fSB0cnVlIGlmIHRoZSBpdGVtIHdhcyBwcmVzZW50LCBmYWxzZSBvdGhlcndp
        c2UKICAqLwogIGhhczogZnVuY3Rpb24oa2V5KSB7CiAgICB2YXIgdmFsdWVz
        ID0gdGhpcy52YWx1ZXMsCiAgICAgICAgZ3VpZCA9IGd1aWRGb3Ioa2V5KTsK
        CiAgICByZXR1cm4gdmFsdWVzLmhhc093blByb3BlcnR5KGd1aWQpOwogIH0s
        CgogIC8qKgogICAgSXRlcmF0ZSBvdmVyIGFsbCB0aGUga2V5cyBhbmQgdmFs
        dWVzLiBDYWxscyB0aGUgZnVuY3Rpb24gb25jZQogICAgZm9yIGVhY2gga2V5
        LCBwYXNzaW5nIGluIHRoZSBrZXkgYW5kIHZhbHVlLCBpbiB0aGF0IG9yZGVy
        LgoKICAgIFRoZSBrZXlzIGFyZSBndWFyYW50ZWVkIHRvIGJlIGl0ZXJhdGVk
        IG92ZXIgaW4gaW5zZXJ0aW9uIG9yZGVyLgoKICAgIEBtZXRob2QgZm9yRWFj
        aAogICAgQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2sKICAgIEBwYXJhbSB7
        Kn0gc2VsZiBpZiBwYXNzZWQsIHRoZSBgdGhpc2AgdmFsdWUgaW5zaWRlIHRo
        ZQogICAgICBjYWxsYmFjay4gQnkgZGVmYXVsdCwgYHRoaXNgIGlzIHRoZSBt
        YXAuCiAgKi8KICBmb3JFYWNoOiBmdW5jdGlvbihjYWxsYmFjaywgc2VsZikg
        ewogICAgdmFyIGtleXMgPSB0aGlzLmtleXMsCiAgICAgICAgdmFsdWVzID0g
        dGhpcy52YWx1ZXM7CgogICAga2V5cy5mb3JFYWNoKGZ1bmN0aW9uKGtleSkg
        ewogICAgICB2YXIgZ3VpZCA9IGd1aWRGb3Ioa2V5KTsKICAgICAgY2FsbGJh
        Y2suY2FsbChzZWxmLCBrZXksIHZhbHVlc1tndWlkXSk7CiAgICB9KTsKICB9
        LAoKICAvKioKICAgIEBtZXRob2QgY29weQogICAgQHJldHVybiB7RW1iZXIu
        TWFwfQogICovCiAgY29weTogZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gY29w
        eU1hcCh0aGlzLCBuZXcgTWFwKCkpOwogIH0KfTsKCi8qKgogIEBjbGFzcyBN
        YXBXaXRoRGVmYXVsdAogIEBuYW1lc3BhY2UgRW1iZXIKICBAZXh0ZW5kcyBF
        bWJlci5NYXAKICBAcHJpdmF0ZQogIEBjb25zdHJ1Y3RvcgogIEBwYXJhbSBb
        b3B0aW9uc10KICAgIEBwYXJhbSB7Kn0gW29wdGlvbnMuZGVmYXVsdFZhbHVl
        XQoqLwp2YXIgTWFwV2l0aERlZmF1bHQgPSBFbWJlci5NYXBXaXRoRGVmYXVs
        dCA9IGZ1bmN0aW9uKG9wdGlvbnMpIHsKICBNYXAuY2FsbCh0aGlzKTsKICB0
        aGlzLmRlZmF1bHRWYWx1ZSA9IG9wdGlvbnMuZGVmYXVsdFZhbHVlOwp9OwoK
        LyoqCiAgQG1ldGhvZCBjcmVhdGUKICBAc3RhdGljCiAgQHBhcmFtIFtvcHRp
        b25zXQogICAgQHBhcmFtIHsqfSBbb3B0aW9ucy5kZWZhdWx0VmFsdWVdCiAg
        QHJldHVybiB7RW1iZXIuTWFwV2l0aERlZmF1bHR8RW1iZXIuTWFwfSBJZiBv
        cHRpb25zIGFyZSBwYXNzZWQsIHJldHVybnMKICAgIGBFbWJlci5NYXBXaXRo
        RGVmYXVsdGAgb3RoZXJ3aXNlIHJldHVybnMgYEVtYmVyLk1hcGAKKi8KTWFw
        V2l0aERlZmF1bHQuY3JlYXRlID0gZnVuY3Rpb24ob3B0aW9ucykgewogIGlm
        IChvcHRpb25zKSB7CiAgICByZXR1cm4gbmV3IE1hcFdpdGhEZWZhdWx0KG9w
        dGlvbnMpOwogIH0gZWxzZSB7CiAgICByZXR1cm4gbmV3IE1hcCgpOwogIH0K
        fTsKCk1hcFdpdGhEZWZhdWx0LnByb3RvdHlwZSA9IEVtYmVyLmNyZWF0ZShN
        YXAucHJvdG90eXBlKTsKCi8qKgogIFJldHJpZXZlIHRoZSB2YWx1ZSBhc3Nv
        Y2lhdGVkIHdpdGggYSBnaXZlbiBrZXkuCgogIEBtZXRob2QgZ2V0CiAgQHBh
        cmFtIHsqfSBrZXkKICBAcmV0dXJuIHsqfSB0aGUgdmFsdWUgYXNzb2NpYXRl
        ZCB3aXRoIHRoZSBrZXksIG9yIHRoZSBkZWZhdWx0IHZhbHVlCiovCk1hcFdp
        dGhEZWZhdWx0LnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbihrZXkpIHsKICB2
        YXIgaGFzVmFsdWUgPSB0aGlzLmhhcyhrZXkpOwoKICBpZiAoaGFzVmFsdWUp
        IHsKICAgIHJldHVybiBNYXAucHJvdG90eXBlLmdldC5jYWxsKHRoaXMsIGtl
        eSk7CiAgfSBlbHNlIHsKICAgIHZhciBkZWZhdWx0VmFsdWUgPSB0aGlzLmRl
        ZmF1bHRWYWx1ZShrZXkpOwogICAgdGhpcy5zZXQoa2V5LCBkZWZhdWx0VmFs
        dWUpOwogICAgcmV0dXJuIGRlZmF1bHRWYWx1ZTsKICB9Cn07CgovKioKICBA
        bWV0aG9kIGNvcHkKICBAcmV0dXJuIHtFbWJlci5NYXBXaXRoRGVmYXVsdH0K
        Ki8KTWFwV2l0aERlZmF1bHQucHJvdG90eXBlLmNvcHkgPSBmdW5jdGlvbigp
        IHsKICByZXR1cm4gY29weU1hcCh0aGlzLCBuZXcgTWFwV2l0aERlZmF1bHQo
        ewogICAgZGVmYXVsdFZhbHVlOiB0aGlzLmRlZmF1bHRWYWx1ZQogIH0pKTsK
        fTsKCn0pKCk7CgoKCihmdW5jdGlvbigpIHsKZnVuY3Rpb24gY29uc29sZU1l
        dGhvZChuYW1lKSB7CiAgdmFyIGNvbnNvbGVPYmo7CiAgaWYgKEVtYmVyLmlt
        cG9ydHMuY29uc29sZSkgewogICAgY29uc29sZU9iaiA9IEVtYmVyLmltcG9y
        dHMuY29uc29sZTsKICB9IGVsc2UgaWYgKHR5cGVvZiBjb25zb2xlICE9PSAn
        dW5kZWZpbmVkJykgewogICAgY29uc29sZU9iaiA9IGNvbnNvbGU7CiAgfQoK
        ICB2YXIgbWV0aG9kID0gdHlwZW9mIGNvbnNvbGVPYmogPT09ICdvYmplY3Qn
        ID8gY29uc29sZU9ialtuYW1lXSA6IG51bGw7CgogIGlmIChtZXRob2QpIHsK
        ICAgIC8vIE9sZGVyIElFIGRvZXNuJ3Qgc3VwcG9ydCBhcHBseSwgYnV0IENo
        cm9tZSBuZWVkcyBpdAogICAgaWYgKG1ldGhvZC5hcHBseSkgewogICAgICBy
        ZXR1cm4gZnVuY3Rpb24oKSB7CiAgICAgICAgbWV0aG9kLmFwcGx5KGNvbnNv
        bGVPYmosIGFyZ3VtZW50cyk7CiAgICAgIH07CiAgICB9IGVsc2UgewogICAg
        ICByZXR1cm4gZnVuY3Rpb24oKSB7CiAgICAgICAgdmFyIG1lc3NhZ2UgPSBB
        cnJheS5wcm90b3R5cGUuam9pbi5jYWxsKGFyZ3VtZW50cywgJywgJyk7CiAg
        ICAgICAgbWV0aG9kKG1lc3NhZ2UpOwogICAgICB9OwogICAgfQogIH0KfQoK
        ZnVuY3Rpb24gYXNzZXJ0UG9seWZpbGwodGVzdCwgbWVzc2FnZSkgewogIGlm
        ICghdGVzdCkgewogICAgdHJ5IHsKICAgICAgLy8gYXR0ZW1wdCB0byBwcmVz
        ZXJ2ZSB0aGUgc3RhY2sKICAgICAgdGhyb3cgbmV3IEVtYmVyLkVycm9yKCJh
        c3NlcnRpb24gZmFpbGVkOiAiICsgbWVzc2FnZSk7CiAgICB9IGNhdGNoKGVy
        cm9yKSB7CiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAg
        dGhyb3cgZXJyb3I7CiAgICAgIH0sIDApOwogICAgfQogIH0KfQoKLyoqCiAg
        SW5zaWRlIEVtYmVyLU1ldGFsLCBzaW1wbHkgdXNlcyB0aGUgbWV0aG9kcyBm
        cm9tIGBpbXBvcnRzLmNvbnNvbGVgLgogIE92ZXJyaWRlIHRoaXMgdG8gcHJv
        dmlkZSBtb3JlIHJvYnVzdCBsb2dnaW5nIGZ1bmN0aW9uYWxpdHkuCgogIEBj
        bGFzcyBMb2dnZXIKICBAbmFtZXNwYWNlIEVtYmVyCiovCkVtYmVyLkxvZ2dl
        ciA9IHsKICAvKioKICAgTG9ncyB0aGUgYXJndW1lbnRzIHRvIHRoZSBjb25z
        b2xlLgogICBZb3UgY2FuIHBhc3MgYXMgbWFueSBhcmd1bWVudHMgYXMgeW91
        IHdhbnQgYW5kIHRoZXkgd2lsbCBiZSBqb2luZWQgdG9nZXRoZXIgd2l0aCBh
        IHNwYWNlLgoKICAgIGBgYGphdmFzY3JpcHQKICAgIHZhciBmb28gPSAxOwog
        ICAgRW1iZXIuTG9nZ2VyLmxvZygnbG9nIHZhbHVlIG9mIGZvbzonLCBmb28p
        OyAvLyAibG9nIHZhbHVlIG9mIGZvbzogMSIgd2lsbCBiZSBwcmludGVkIHRv
        IHRoZSBjb25zb2xlCiAgICBgYGAKCiAgIEBtZXRob2QgbG9nCiAgIEBmb3Ig
        RW1iZXIuTG9nZ2VyCiAgIEBwYXJhbSB7Kn0gYXJndW1lbnRzCiAgKi8KICBs
        b2c6ICAgY29uc29sZU1ldGhvZCgnbG9nJykgICB8fCBFbWJlci5LLAogIC8q
        KgogICBQcmludHMgdGhlIGFyZ3VtZW50cyB0byB0aGUgY29uc29sZSB3aXRo
        IGEgd2FybmluZyBpY29uLgogICBZb3UgY2FuIHBhc3MgYXMgbWFueSBhcmd1
        bWVudHMgYXMgeW91IHdhbnQgYW5kIHRoZXkgd2lsbCBiZSBqb2luZWQgdG9n
        ZXRoZXIgd2l0aCBhIHNwYWNlLgoKICAgIGBgYGphdmFzY3JpcHQKICAgIEVt
        YmVyLkxvZ2dlci53YXJuKCdTb21ldGhpbmcgaGFwcGVuZWQhJyk7IC8vICJT
        b21ldGhpbmcgaGFwcGVuZWQhIiB3aWxsIGJlIHByaW50ZWQgdG8gdGhlIGNv
        bnNvbGUgd2l0aCBhIHdhcm5pbmcgaWNvbi4KICAgIGBgYAoKICAgQG1ldGhv
        ZCB3YXJuCiAgIEBmb3IgRW1iZXIuTG9nZ2VyCiAgIEBwYXJhbSB7Kn0gYXJn
        dW1lbnRzCiAgKi8KICB3YXJuOiAgY29uc29sZU1ldGhvZCgnd2FybicpICB8
        fCBFbWJlci5LLAogIC8qKgogICBQcmludHMgdGhlIGFyZ3VtZW50cyB0byB0
        aGUgY29uc29sZSB3aXRoIGFuIGVycm9yIGljb24sIHJlZCB0ZXh0IGFuZCBh
        IHN0YWNrIHJhY2UuCiAgIFlvdSBjYW4gcGFzcyBhcyBtYW55IGFyZ3VtZW50
        cyBhcyB5b3Ugd2FudCBhbmQgdGhleSB3aWxsIGJlIGpvaW5lZCB0b2dldGhl
        ciB3aXRoIGEgc3BhY2UuCgogICAgYGBgamF2YXNjcmlwdAogICAgRW1iZXIu
        TG9nZ2VyLmVycm9yKCdEYW5nZXIhIERhbmdlciEnKTsgLy8gIkRhbmdlciEg
        RGFuZ2VyISIgd2lsbCBiZSBwcmludGVkIHRvIHRoZSBjb25zb2xlIGluIHJl
        ZCB0ZXh0LgogICAgYGBgCgogICBAbWV0aG9kIGVycm9yCiAgIEBmb3IgRW1i
        ZXIuTG9nZ2VyCiAgIEBwYXJhbSB7Kn0gYXJndW1lbnRzCiAgKi8KICBlcnJv
        cjogY29uc29sZU1ldGhvZCgnZXJyb3InKSB8fCBFbWJlci5LLAogIC8qKgog
        ICBMb2dzIHRoZSBhcmd1bWVudHMgdG8gdGhlIGNvbnNvbGUuCiAgIFlvdSBj
        YW4gcGFzcyBhcyBtYW55IGFyZ3VtZW50cyBhcyB5b3Ugd2FudCBhbmQgdGhl
        eSB3aWxsIGJlIGpvaW5lZCB0b2dldGhlciB3aXRoIGEgc3BhY2UuCgogICAg
        YGBgamF2YXNjcmlwdAogICAgdmFyIGZvbyA9IDE7CiAgICBFbWJlci5Mb2dn
        ZXIuaW5mbygnbG9nIHZhbHVlIG9mIGZvbzonLCBmb28pOyAvLyAibG9nIHZh
        bHVlIG9mIGZvbzogMSIgd2lsbCBiZSBwcmludGVkIHRvIHRoZSBjb25zb2xl
        CiAgICBgYGAKCiAgIEBtZXRob2QgaW5mbwogICBAZm9yIEVtYmVyLkxvZ2dl
        cgogICBAcGFyYW0geyp9IGFyZ3VtZW50cwogICovCiAgaW5mbzogIGNvbnNv
        bGVNZXRob2QoJ2luZm8nKSAgfHwgRW1iZXIuSywKICAvKioKICAgTG9ncyB0
        aGUgYXJndW1lbnRzIHRvIHRoZSBjb25zb2xlIGluIGJsdWUgdGV4dC4KICAg
        WW91IGNhbiBwYXNzIGFzIG1hbnkgYXJndW1lbnRzIGFzIHlvdSB3YW50IGFu
        ZCB0aGV5IHdpbGwgYmUgam9pbmVkIHRvZ2V0aGVyIHdpdGggYSBzcGFjZS4K
        CiAgICBgYGBqYXZhc2NyaXB0CiAgICB2YXIgZm9vID0gMTsKICAgIEVtYmVy
        LkxvZ2dlci5kZWJ1ZygnbG9nIHZhbHVlIG9mIGZvbzonLCBmb28pOyAvLyAi
        bG9nIHZhbHVlIG9mIGZvbzogMSIgd2lsbCBiZSBwcmludGVkIHRvIHRoZSBj
        b25zb2xlCiAgICBgYGAKCiAgIEBtZXRob2QgZGVidWcKICAgQGZvciBFbWJl
        ci5Mb2dnZXIKICAgQHBhcmFtIHsqfSBhcmd1bWVudHMKICAqLwogIGRlYnVn
        OiBjb25zb2xlTWV0aG9kKCdkZWJ1ZycpIHx8IGNvbnNvbGVNZXRob2QoJ2lu
        Zm8nKSB8fCBFbWJlci5LLAogIC8qKgoKICAgSWYgdGhlIHZhbHVlIHBhc3Nl
        ZCBpbnRvIEVtYmVyLkxvZ2dlci5hc3NlcnQgaXMgbm90IHRydXRoeSBpdCB3
        aWxsIHRocm93IGFuIGVycm9yIHdpdGggYSBzdGFjayB0cmFjZS4KCiAgICBg
        YGBqYXZhc2NyaXB0CiAgICBFbWJlci5Mb2dnZXIuYXNzZXJ0KHRydWUpOyAv
        LyB1bmRlZmluZWQKICAgIEVtYmVyLkxvZ2dlci5hc3NlcnQodHJ1ZSA9PT0g
        ZmFsc2UpOyAvLyBUaHJvd3MgYW4gQXNzZXJ0aW9uIGZhaWxlZCBlcnJvci4K
        ICAgIGBgYAoKICAgQG1ldGhvZCBhc3NlcnQKICAgQGZvciBFbWJlci5Mb2dn
        ZXIKICAgQHBhcmFtIHtCb29sZWFufSBib29sIFZhbHVlIHRvIHRlc3QKICAq
        LwogIGFzc2VydDogY29uc29sZU1ldGhvZCgnYXNzZXJ0JykgfHwgYXNzZXJ0
        UG9seWZpbGwKfTsKCgp9KSgpOwoKCgooZnVuY3Rpb24oKSB7Ci8qKgpAbW9k
        dWxlIGVtYmVyLW1ldGFsCiovCgp2YXIgTUVUQV9LRVkgPSBFbWJlci5NRVRB
        X0tFWSwKICAgIG1ldGFGb3IgPSBFbWJlci5tZXRhLAogICAgb2JqZWN0RGVm
        aW5lUHJvcGVydHkgPSBFbWJlci5wbGF0Zm9ybS5kZWZpbmVQcm9wZXJ0eTsK
        CnZhciBNQU5EQVRPUllfU0VUVEVSID0gRW1iZXIuRU5WLk1BTkRBVE9SWV9T
        RVRURVI7CgovLyAuLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4u
        Li4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uCi8vIERFU0NSSVBUT1IKLy8KCi8q
        KgogIE9iamVjdHMgb2YgdGhpcyB0eXBlIGNhbiBpbXBsZW1lbnQgYW4gaW50
        ZXJmYWNlIHRvIHJlc3BvbmQgdG8gcmVxdWVzdHMgdG8KICBnZXQgYW5kIHNl
        dC4gVGhlIGRlZmF1bHQgaW1wbGVtZW50YXRpb24gaGFuZGxlcyBzaW1wbGUg
        cHJvcGVydGllcy4KCiAgWW91IGdlbmVyYWxseSB3b24ndCBuZWVkIHRvIGNy
        ZWF0ZSBvciBzdWJjbGFzcyB0aGlzIGRpcmVjdGx5LgoKICBAY2xhc3MgRGVz
        Y3JpcHRvcgogIEBuYW1lc3BhY2UgRW1iZXIKICBAcHJpdmF0ZQogIEBjb25z
        dHJ1Y3RvcgoqLwpFbWJlci5EZXNjcmlwdG9yID0gZnVuY3Rpb24oKSB7fTsK
        Ci8vIC4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4u
        Li4uLi4uLi4uLi4uLi4uLi4KLy8gREVGSU5JTkcgUFJPUEVSVElFUyBBUEkK
        Ly8KCnZhciBNQU5EQVRPUllfU0VUVEVSX0ZVTkNUSU9OID0gRW1iZXIuTUFO
        REFUT1JZX1NFVFRFUl9GVU5DVElPTiA9IGZ1bmN0aW9uKHZhbHVlKSB7CiAg
        RW1iZXIuYXNzZXJ0KCJZb3UgbXVzdCB1c2UgRW1iZXIuc2V0KCkgdG8gYWNj
        ZXNzIHRoaXMgcHJvcGVydHkgKG9mICIgKyB0aGlzICsgIikiLCBmYWxzZSk7
        Cn07Cgp2YXIgREVGQVVMVF9HRVRURVJfRlVOQ1RJT04gPSBFbWJlci5ERUZB
        VUxUX0dFVFRFUl9GVU5DVElPTiA9IGZ1bmN0aW9uKG5hbWUpIHsKICByZXR1
        cm4gZnVuY3Rpb24oKSB7CiAgICB2YXIgbWV0YSA9IHRoaXNbTUVUQV9LRVld
        OwogICAgcmV0dXJuIG1ldGEgJiYgbWV0YS52YWx1ZXNbbmFtZV07CiAgfTsK
        fTsKCi8qKgogIEBwcml2YXRlCgogIE5PVEU6IFRoaXMgaXMgYSBsb3ctbGV2
        ZWwgbWV0aG9kIHVzZWQgYnkgb3RoZXIgcGFydHMgb2YgdGhlIEFQSS4gWW91
        IGFsbW9zdAogIG5ldmVyIHdhbnQgdG8gY2FsbCB0aGlzIG1ldGhvZCBkaXJl
        Y3RseS4gSW5zdGVhZCB5b3Ugc2hvdWxkIHVzZQogIGBFbWJlci5taXhpbigp
        YCB0byBkZWZpbmUgbmV3IHByb3BlcnRpZXMuCgogIERlZmluZXMgYSBwcm9w
        ZXJ0eSBvbiBhbiBvYmplY3QuIFRoaXMgbWV0aG9kIHdvcmtzIG11Y2ggbGlr
        ZSB0aGUgRVM1CiAgYE9iamVjdC5kZWZpbmVQcm9wZXJ0eSgpYCBtZXRob2Qg
        ZXhjZXB0IHRoYXQgaXQgY2FuIGFsc28gYWNjZXB0IGNvbXB1dGVkCiAgcHJv
        cGVydGllcyBhbmQgb3RoZXIgc3BlY2lhbCBkZXNjcmlwdG9ycy4KCiAgTm9y
        bWFsbHkgdGhpcyBtZXRob2QgdGFrZXMgb25seSB0aHJlZSBwYXJhbWV0ZXJz
        LiBIb3dldmVyIGlmIHlvdSBwYXNzIGFuCiAgaW5zdGFuY2Ugb2YgYEVtYmVy
        LkRlc2NyaXB0b3JgIGFzIHRoZSB0aGlyZCBwYXJhbSB0aGVuIHlvdSBjYW4g
        cGFzcyBhbgogIG9wdGlvbmFsIHZhbHVlIGFzIHRoZSBmb3VydGggcGFyYW1l
        dGVyLiBUaGlzIGlzIG9mdGVuIG1vcmUgZWZmaWNpZW50IHRoYW4KICBjcmVh
        dGluZyBuZXcgZGVzY3JpcHRvciBoYXNoZXMgZm9yIGVhY2ggcHJvcGVydHku
        CgogICMjIEV4YW1wbGVzCgogIGBgYGphdmFzY3JpcHQKICAvLyBFUzUgY29t
        cGF0aWJsZSBtb2RlCiAgRW1iZXIuZGVmaW5lUHJvcGVydHkoY29udGFjdCwg
        J2ZpcnN0TmFtZScsIHsKICAgIHdyaXRhYmxlOiB0cnVlLAogICAgY29uZmln
        dXJhYmxlOiBmYWxzZSwKICAgIGVudW1lcmFibGU6IHRydWUsCiAgICB2YWx1
        ZTogJ0NoYXJsZXMnCiAgfSk7CgogIC8vIGRlZmluZSBhIHNpbXBsZSBwcm9w
        ZXJ0eQogIEVtYmVyLmRlZmluZVByb3BlcnR5KGNvbnRhY3QsICdsYXN0TmFt
        ZScsIHVuZGVmaW5lZCwgJ0pvbGxleScpOwoKICAvLyBkZWZpbmUgYSBjb21w
        dXRlZCBwcm9wZXJ0eQogIEVtYmVyLmRlZmluZVByb3BlcnR5KGNvbnRhY3Qs
        ICdmdWxsTmFtZScsIEVtYmVyLmNvbXB1dGVkKGZ1bmN0aW9uKCkgewogICAg
        cmV0dXJuIHRoaXMuZmlyc3ROYW1lKycgJyt0aGlzLmxhc3ROYW1lOwogIH0p
        LnByb3BlcnR5KCdmaXJzdE5hbWUnLCAnbGFzdE5hbWUnKSk7CiAgYGBgCgog
        IEBtZXRob2QgZGVmaW5lUHJvcGVydHkKICBAZm9yIEVtYmVyCiAgQHBhcmFt
        IHtPYmplY3R9IG9iaiB0aGUgb2JqZWN0IHRvIGRlZmluZSB0aGlzIHByb3Bl
        cnR5IG9uLiBUaGlzIG1heSBiZSBhIHByb3RvdHlwZS4KICBAcGFyYW0ge1N0
        cmluZ30ga2V5TmFtZSB0aGUgbmFtZSBvZiB0aGUgcHJvcGVydHkKICBAcGFy
        YW0ge0VtYmVyLkRlc2NyaXB0b3J9IFtkZXNjXSBhbiBpbnN0YW5jZSBvZiBg
        RW1iZXIuRGVzY3JpcHRvcmAgKHR5cGljYWxseSBhCiAgICBjb21wdXRlZCBw
        cm9wZXJ0eSkgb3IgYW4gRVM1IGRlc2NyaXB0b3IuCiAgICBZb3UgbXVzdCBw
        cm92aWRlIHRoaXMgb3IgYGRhdGFgIGJ1dCBub3QgYm90aC4KICBAcGFyYW0g
        eyp9IFtkYXRhXSBzb21ldGhpbmcgb3RoZXIgdGhhbiBhIGRlc2NyaXB0b3Is
        IHRoYXQgd2lsbAogICAgYmVjb21lIHRoZSBleHBsaWNpdCB2YWx1ZSBvZiB0
        aGlzIHByb3BlcnR5LgoqLwpFbWJlci5kZWZpbmVQcm9wZXJ0eSA9IGZ1bmN0
        aW9uKG9iaiwga2V5TmFtZSwgZGVzYywgZGF0YSwgbWV0YSkgewogIHZhciBk
        ZXNjcywgZXhpc3RpbmdEZXNjLCB3YXRjaGluZywgdmFsdWU7CgogIGlmICgh
        bWV0YSkgbWV0YSA9IG1ldGFGb3Iob2JqKTsKICBkZXNjcyA9IG1ldGEuZGVz
        Y3M7CiAgZXhpc3RpbmdEZXNjID0gbWV0YS5kZXNjc1trZXlOYW1lXTsKICB3
        YXRjaGluZyA9IG1ldGEud2F0Y2hpbmdba2V5TmFtZV0gPiAwOwoKICBpZiAo
        ZXhpc3RpbmdEZXNjIGluc3RhbmNlb2YgRW1iZXIuRGVzY3JpcHRvcikgewog
        ICAgZXhpc3RpbmdEZXNjLnRlYXJkb3duKG9iaiwga2V5TmFtZSk7CiAgfQoK
        ICBpZiAoZGVzYyBpbnN0YW5jZW9mIEVtYmVyLkRlc2NyaXB0b3IpIHsKICAg
        IHZhbHVlID0gZGVzYzsKCiAgICBkZXNjc1trZXlOYW1lXSA9IGRlc2M7CiAg
        ICBpZiAoTUFOREFUT1JZX1NFVFRFUiAmJiB3YXRjaGluZykgewogICAgICBv
        YmplY3REZWZpbmVQcm9wZXJ0eShvYmosIGtleU5hbWUsIHsKICAgICAgICBj
        b25maWd1cmFibGU6IHRydWUsCiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSwK
        ICAgICAgICB3cml0YWJsZTogdHJ1ZSwKICAgICAgICB2YWx1ZTogdW5kZWZp
        bmVkIC8vIG1ha2UgZW51bWVyYWJsZQogICAgICB9KTsKICAgIH0gZWxzZSB7
        CiAgICAgIG9ialtrZXlOYW1lXSA9IHVuZGVmaW5lZDsgLy8gbWFrZSBlbnVt
        ZXJhYmxlCiAgICB9CiAgfSBlbHNlIHsKICAgIGRlc2NzW2tleU5hbWVdID0g
        dW5kZWZpbmVkOyAvLyBzaGFkb3cgZGVzY3JpcHRvciBpbiBwcm90bwogICAg
        aWYgKGRlc2MgPT0gbnVsbCkgewogICAgICB2YWx1ZSA9IGRhdGE7CgogICAg
        ICBpZiAoTUFOREFUT1JZX1NFVFRFUiAmJiB3YXRjaGluZykgewogICAgICAg
        IG1ldGEudmFsdWVzW2tleU5hbWVdID0gZGF0YTsKICAgICAgICBvYmplY3RE
        ZWZpbmVQcm9wZXJ0eShvYmosIGtleU5hbWUsIHsKICAgICAgICAgIGNvbmZp
        Z3VyYWJsZTogdHJ1ZSwKICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsCiAg
        ICAgICAgICBzZXQ6IE1BTkRBVE9SWV9TRVRURVJfRlVOQ1RJT04sCiAgICAg
        ICAgICBnZXQ6IERFRkFVTFRfR0VUVEVSX0ZVTkNUSU9OKGtleU5hbWUpCiAg
        ICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgb2JqW2tleU5hbWVd
        ID0gZGF0YTsKICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgdmFsdWUgPSBk
        ZXNjOwoKICAgICAgLy8gY29tcGF0aWJpbGl0eSB3aXRoIEVTNQogICAgICBv
        YmplY3REZWZpbmVQcm9wZXJ0eShvYmosIGtleU5hbWUsIGRlc2MpOwogICAg
        fQogIH0KCiAgLy8gaWYga2V5IGlzIGJlaW5nIHdhdGNoZWQsIG92ZXJyaWRl
        IGNoYWlucyB0aGF0CiAgLy8gd2VyZSBpbml0aWFsaXplZCB3aXRoIHRoZSBw
        cm90b3R5cGUKICBpZiAod2F0Y2hpbmcpIHsgRW1iZXIub3ZlcnJpZGVDaGFp
        bnMob2JqLCBrZXlOYW1lLCBtZXRhKTsgfQoKICAvLyBUaGUgYHZhbHVlYCBw
        YXNzZWQgdG8gdGhlIGBkaWREZWZpbmVQcm9wZXJ0eWAgaG9vayBpcwogIC8v
        IGVpdGhlciB0aGUgZGVzY3JpcHRvciBvciBkYXRhLCB3aGljaGV2ZXIgd2Fz
        IHBhc3NlZC4KICBpZiAob2JqLmRpZERlZmluZVByb3BlcnR5KSB7IG9iai5k
        aWREZWZpbmVQcm9wZXJ0eShvYmosIGtleU5hbWUsIHZhbHVlKTsgfQoKICBy
        ZXR1cm4gdGhpczsKfTsKCgp9KSgpOwoKCgooZnVuY3Rpb24oKSB7CnZhciBn
        ZXQgPSBFbWJlci5nZXQ7CgovKioKICBUbyBnZXQgbXVsdGlwbGUgcHJvcGVy
        dGllcyBhdCBvbmNlLCBjYWxsIGBFbWJlci5nZXRQcm9wZXJ0aWVzYAogIHdp
        dGggYW4gb2JqZWN0IGZvbGxvd2VkIGJ5IGEgbGlzdCBvZiBzdHJpbmdzIG9y
        IGFuIGFycmF5OgoKICBgYGBqYXZhc2NyaXB0CiAgRW1iZXIuZ2V0UHJvcGVy
        dGllcyhyZWNvcmQsICdmaXJzdE5hbWUnLCAnbGFzdE5hbWUnLCAnemlwQ29k
        ZScpOyAgLy8geyBmaXJzdE5hbWU6ICdKb2huJywgbGFzdE5hbWU6ICdEb2Un
        LCB6aXBDb2RlOiAnMTAwMTEnIH0KICBgYGAKCiAgaXMgZXF1aXZhbGVudCB0
        bzoKCiAgYGBgamF2YXNjcmlwdAogIEVtYmVyLmdldFByb3BlcnRpZXMocmVj
        b3JkLCBbJ2ZpcnN0TmFtZScsICdsYXN0TmFtZScsICd6aXBDb2RlJ10pOyAg
        Ly8geyBmaXJzdE5hbWU6ICdKb2huJywgbGFzdE5hbWU6ICdEb2UnLCB6aXBD
        b2RlOiAnMTAwMTEnIH0KICBgYGAKCiAgQG1ldGhvZCBnZXRQcm9wZXJ0aWVz
        CiAgQHBhcmFtIG9iagogIEBwYXJhbSB7U3RyaW5nLi4ufEFycmF5fSBsaXN0
        IG9mIGtleXMgdG8gZ2V0CiAgQHJldHVybiB7SGFzaH0KKi8KRW1iZXIuZ2V0
        UHJvcGVydGllcyA9IGZ1bmN0aW9uKG9iaikgewogIHZhciByZXQgPSB7fSwK
        ICAgICAgcHJvcGVydHlOYW1lcyA9IGFyZ3VtZW50cywKICAgICAgaSA9IDE7
        CgogIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAyICYmIEVtYmVyLnR5cGVP
        Zihhcmd1bWVudHNbMV0pID09PSAnYXJyYXknKSB7CiAgICBpID0gMDsKICAg
        IHByb3BlcnR5TmFtZXMgPSBhcmd1bWVudHNbMV07CiAgfQogIGZvcih2YXIg
        bGVuID0gcHJvcGVydHlOYW1lcy5sZW5ndGg7IGkgPCBsZW47IGkrKykgewog
        ICAgcmV0W3Byb3BlcnR5TmFtZXNbaV1dID0gZ2V0KG9iaiwgcHJvcGVydHlO
        YW1lc1tpXSk7CiAgfQogIHJldHVybiByZXQ7Cn07Cgp9KSgpOwoKCgooZnVu
        Y3Rpb24oKSB7CnZhciBjaGFuZ2VQcm9wZXJ0aWVzID0gRW1iZXIuY2hhbmdl
        UHJvcGVydGllcywKICAgIHNldCA9IEVtYmVyLnNldDsKCi8qKgogIFNldCBh
        IGxpc3Qgb2YgcHJvcGVydGllcyBvbiBhbiBvYmplY3QuIFRoZXNlIHByb3Bl
        cnRpZXMgYXJlIHNldCBpbnNpZGUKICBhIHNpbmdsZSBgYmVnaW5Qcm9wZXJ0
        eUNoYW5nZXNgIGFuZCBgZW5kUHJvcGVydHlDaGFuZ2VzYCBiYXRjaCwgc28K
        ICBvYnNlcnZlcnMgd2lsbCBiZSBidWZmZXJlZC4KCiAgYGBgamF2YXNjcmlw
        dAogIGFuT2JqZWN0LnNldFByb3BlcnRpZXMoewogICAgZmlyc3ROYW1lOiAi
        U3RhbmxleSIsCiAgICBsYXN0TmFtZTogIlN0dWFydCIsCiAgICBhZ2U6ICIy
        MSIKICB9KQogIGBgYAoKICBAbWV0aG9kIHNldFByb3BlcnRpZXMKICBAcGFy
        YW0gc2VsZgogIEBwYXJhbSB7T2JqZWN0fSBoYXNoCiAgQHJldHVybiBzZWxm
        CiovCkVtYmVyLnNldFByb3BlcnRpZXMgPSBmdW5jdGlvbihzZWxmLCBoYXNo
        KSB7CiAgY2hhbmdlUHJvcGVydGllcyhmdW5jdGlvbigpIHsKICAgIGZvcih2
        YXIgcHJvcCBpbiBoYXNoKSB7CiAgICAgIGlmIChoYXNoLmhhc093blByb3Bl
        cnR5KHByb3ApKSB7IHNldChzZWxmLCBwcm9wLCBoYXNoW3Byb3BdKTsgfQog
        ICAgfQogIH0pOwogIHJldHVybiBzZWxmOwp9OwoKfSkoKTsKCgoKKGZ1bmN0
        aW9uKCkgewp2YXIgbWV0YUZvciA9IEVtYmVyLm1ldGEsIC8vIHV0aWxzLmpz
        CiAgICB0eXBlT2YgPSBFbWJlci50eXBlT2YsIC8vIHV0aWxzLmpzCiAgICBN
        QU5EQVRPUllfU0VUVEVSID0gRW1iZXIuRU5WLk1BTkRBVE9SWV9TRVRURVIs
        CiAgICBvX2RlZmluZVByb3BlcnR5ID0gRW1iZXIucGxhdGZvcm0uZGVmaW5l
        UHJvcGVydHk7CgpFbWJlci53YXRjaEtleSA9IGZ1bmN0aW9uKG9iaiwga2V5
        TmFtZSkgewogIC8vIGNhbid0IHdhdGNoIGxlbmd0aCBvbiBBcnJheSAtIGl0
        IGlzIHNwZWNpYWwuLi4KICBpZiAoa2V5TmFtZSA9PT0gJ2xlbmd0aCcgJiYg
        dHlwZU9mKG9iaikgPT09ICdhcnJheScpIHsgcmV0dXJuOyB9CgogIHZhciBt
        ID0gbWV0YUZvcihvYmopLCB3YXRjaGluZyA9IG0ud2F0Y2hpbmc7CgogIC8v
        IGFjdGl2YXRlIHdhdGNoaW5nIGZpcnN0IHRpbWUKICBpZiAoIXdhdGNoaW5n
        W2tleU5hbWVdKSB7CiAgICB3YXRjaGluZ1trZXlOYW1lXSA9IDE7CgogICAg
        aWYgKCdmdW5jdGlvbicgPT09IHR5cGVvZiBvYmoud2lsbFdhdGNoUHJvcGVy
        dHkpIHsKICAgICAgb2JqLndpbGxXYXRjaFByb3BlcnR5KGtleU5hbWUpOwog
        ICAgfQoKICAgIGlmIChNQU5EQVRPUllfU0VUVEVSICYmIGtleU5hbWUgaW4g
        b2JqKSB7CiAgICAgIG0udmFsdWVzW2tleU5hbWVdID0gb2JqW2tleU5hbWVd
        OwogICAgICBvX2RlZmluZVByb3BlcnR5KG9iaiwga2V5TmFtZSwgewogICAg
        ICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICAgICAgICBlbnVtZXJhYmxlOiB0
        cnVlLAogICAgICAgIHNldDogRW1iZXIuTUFOREFUT1JZX1NFVFRFUl9GVU5D
        VElPTiwKICAgICAgICBnZXQ6IEVtYmVyLkRFRkFVTFRfR0VUVEVSX0ZVTkNU
        SU9OKGtleU5hbWUpCiAgICAgIH0pOwogICAgfQogIH0gZWxzZSB7CiAgICB3
        YXRjaGluZ1trZXlOYW1lXSA9ICh3YXRjaGluZ1trZXlOYW1lXSB8fCAwKSAr
        IDE7CiAgfQp9OwoKCkVtYmVyLnVud2F0Y2hLZXkgPSBmdW5jdGlvbihvYmos
        IGtleU5hbWUpIHsKICB2YXIgbSA9IG1ldGFGb3Iob2JqKSwgd2F0Y2hpbmcg
        PSBtLndhdGNoaW5nOwoKICBpZiAod2F0Y2hpbmdba2V5TmFtZV0gPT09IDEp
        IHsKICAgIHdhdGNoaW5nW2tleU5hbWVdID0gMDsKCiAgICBpZiAoJ2Z1bmN0
        aW9uJyA9PT0gdHlwZW9mIG9iai5kaWRVbndhdGNoUHJvcGVydHkpIHsKICAg
        ICAgb2JqLmRpZFVud2F0Y2hQcm9wZXJ0eShrZXlOYW1lKTsKICAgIH0KCiAg
        ICBpZiAoTUFOREFUT1JZX1NFVFRFUiAmJiBrZXlOYW1lIGluIG9iaikgewog
        ICAgICBvX2RlZmluZVByb3BlcnR5KG9iaiwga2V5TmFtZSwgewogICAgICAg
        IGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICAgICAgICBlbnVtZXJhYmxlOiB0cnVl
        LAogICAgICAgIHdyaXRhYmxlOiB0cnVlLAogICAgICAgIHZhbHVlOiBtLnZh
        bHVlc1trZXlOYW1lXQogICAgICB9KTsKICAgICAgZGVsZXRlIG0udmFsdWVz
        W2tleU5hbWVdOwogICAgfQogIH0gZWxzZSBpZiAod2F0Y2hpbmdba2V5TmFt
        ZV0gPiAxKSB7CiAgICB3YXRjaGluZ1trZXlOYW1lXS0tOwogIH0KfTsKCn0p
        KCk7CgoKCihmdW5jdGlvbigpIHsKdmFyIG1ldGFGb3IgPSBFbWJlci5tZXRh
        LCAvLyB1dGlscy5qcwogICAgZ2V0ID0gRW1iZXIuZ2V0LCAvLyBwcm9wZXJ0
        eV9nZXQuanMKICAgIG5vcm1hbGl6ZVR1cGxlID0gRW1iZXIubm9ybWFsaXpl
        VHVwbGUsIC8vIHByb3BlcnR5X2dldC5qcwogICAgZm9yRWFjaCA9IEVtYmVy
        LkFycmF5UG9seWZpbGxzLmZvckVhY2gsIC8vIGFycmF5LmpzCiAgICB3YXJu
        ID0gRW1iZXIud2FybiwKICAgIHdhdGNoS2V5ID0gRW1iZXIud2F0Y2hLZXks
        CiAgICB1bndhdGNoS2V5ID0gRW1iZXIudW53YXRjaEtleSwKICAgIEZJUlNU
        X0tFWSA9IC9eKFteXC5cKl0rKS87CgpmdW5jdGlvbiBmaXJzdEtleShwYXRo
        KSB7CiAgcmV0dXJuIHBhdGgubWF0Y2goRklSU1RfS0VZKVswXTsKfQoKdmFy
        IHBlbmRpbmdRdWV1ZSA9IFtdOwoKLy8gYXR0ZW1wdHMgdG8gYWRkIHRoZSBw
        ZW5kaW5nUXVldWUgY2hhaW5zIGFnYWluLiBJZiBzb21lIG9mIHRoZW0gZW5k
        IHVwCi8vIGJhY2sgaW4gdGhlIHF1ZXVlIGFuZCByZXNjaGVkdWxlIGlzIHRy
        dWUsIHNjaGVkdWxlcyBhIHRpbWVvdXQgdG8gdHJ5Ci8vIGFnYWluLgpFbWJl
        ci5mbHVzaFBlbmRpbmdDaGFpbnMgPSBmdW5jdGlvbigpIHsKICBpZiAocGVu
        ZGluZ1F1ZXVlLmxlbmd0aCA9PT0gMCkgeyByZXR1cm47IH0gLy8gbm90aGlu
        ZyB0byBkbwoKICB2YXIgcXVldWUgPSBwZW5kaW5nUXVldWU7CiAgcGVuZGlu
        Z1F1ZXVlID0gW107CgogIGZvckVhY2guY2FsbChxdWV1ZSwgZnVuY3Rpb24o
        cSkgeyBxWzBdLmFkZChxWzFdKTsgfSk7CgogIHdhcm4oJ1dhdGNoaW5nIGFu
        IHVuZGVmaW5lZCBnbG9iYWwsIEVtYmVyIGV4cGVjdHMgd2F0Y2hlZCBnbG9i
        YWxzIHRvIGJlIHNldHVwIGJ5IHRoZSB0aW1lIHRoZSBydW4gbG9vcCBpcyBm
        bHVzaGVkLCBjaGVjayBmb3IgdHlwb3MnLCBwZW5kaW5nUXVldWUubGVuZ3Ro
        ID09PSAwKTsKfTsKCgpmdW5jdGlvbiBhZGRDaGFpbldhdGNoZXIob2JqLCBr
        ZXlOYW1lLCBub2RlKSB7CiAgaWYgKCFvYmogfHwgKCdvYmplY3QnICE9PSB0
        eXBlb2Ygb2JqKSkgeyByZXR1cm47IH0gLy8gbm90aGluZyB0byBkbwoKICB2
        YXIgbSA9IG1ldGFGb3Iob2JqKSwgbm9kZXMgPSBtLmNoYWluV2F0Y2hlcnM7
        CgogIGlmICghbS5oYXNPd25Qcm9wZXJ0eSgnY2hhaW5XYXRjaGVycycpKSB7
        CiAgICBub2RlcyA9IG0uY2hhaW5XYXRjaGVycyA9IHt9OwogIH0KCiAgaWYg
        KCFub2Rlc1trZXlOYW1lXSkgeyBub2Rlc1trZXlOYW1lXSA9IFtdOyB9CiAg
        bm9kZXNba2V5TmFtZV0ucHVzaChub2RlKTsKICB3YXRjaEtleShvYmosIGtl
        eU5hbWUpOwp9Cgp2YXIgcmVtb3ZlQ2hhaW5XYXRjaGVyID0gRW1iZXIucmVt
        b3ZlQ2hhaW5XYXRjaGVyID0gZnVuY3Rpb24ob2JqLCBrZXlOYW1lLCBub2Rl
        KSB7CiAgaWYgKCFvYmogfHwgJ29iamVjdCcgIT09IHR5cGVvZiBvYmopIHsg
        cmV0dXJuOyB9IC8vIG5vdGhpbmcgdG8gZG8KCiAgdmFyIG0gPSBtZXRhRm9y
        KG9iaiwgZmFsc2UpOwogIGlmICghbS5oYXNPd25Qcm9wZXJ0eSgnY2hhaW5X
        YXRjaGVycycpKSB7IHJldHVybjsgfSAvLyBub3RoaW5nIHRvIGRvCgogIHZh
        ciBub2RlcyA9IG0uY2hhaW5XYXRjaGVyczsKCiAgaWYgKG5vZGVzW2tleU5h
        bWVdKSB7CiAgICBub2RlcyA9IG5vZGVzW2tleU5hbWVdOwogICAgZm9yICh2
        YXIgaSA9IDAsIGwgPSBub2Rlcy5sZW5ndGg7IGkgPCBsOyBpKyspIHsKICAg
        ICAgaWYgKG5vZGVzW2ldID09PSBub2RlKSB7IG5vZGVzLnNwbGljZShpLCAx
        KTsgfQogICAgfQogIH0KICB1bndhdGNoS2V5KG9iaiwga2V5TmFtZSk7Cn07
        CgovLyBBIENoYWluTm9kZSB3YXRjaGVzIGEgc2luZ2xlIGtleSBvbiBhbiBv
        YmplY3QuIElmIHlvdSBwcm92aWRlIGEgc3RhcnRpbmcKLy8gdmFsdWUgZm9y
        IHRoZSBrZXkgdGhlbiB0aGUgbm9kZSB3b24ndCBhY3R1YWxseSB3YXRjaCBp
        dC4gRm9yIGEgcm9vdCBub2RlCi8vIHBhc3MgbnVsbCBmb3IgcGFyZW50IGFu
        ZCBrZXkgYW5kIG9iamVjdCBmb3IgdmFsdWUuCnZhciBDaGFpbk5vZGUgPSBF
        bWJlci5fQ2hhaW5Ob2RlID0gZnVuY3Rpb24ocGFyZW50LCBrZXksIHZhbHVl
        KSB7CiAgdGhpcy5fcGFyZW50ID0gcGFyZW50OwogIHRoaXMuX2tleSAgICA9
        IGtleTsKCiAgLy8gX3dhdGNoaW5nIGlzIHRydWUgd2hlbiBjYWxsaW5nIGdl
        dCh0aGlzLl9wYXJlbnQsIHRoaXMuX2tleSkgd2lsbAogIC8vIHJldHVybiB0
        aGUgdmFsdWUgb2YgdGhpcyBub2RlLgogIC8vCiAgLy8gSXQgaXMgZmFsc2Ug
        Zm9yIHRoZSByb290IG9mIGEgY2hhaW4gKGJlY2F1c2Ugd2UgaGF2ZSBubyBw
        YXJlbnQpCiAgLy8gYW5kIGZvciBnbG9iYWwgcGF0aHMgKGJlY2F1c2UgdGhl
        IHBhcmVudCBub2RlIGlzIHRoZSBvYmplY3Qgd2l0aAogIC8vIHRoZSBvYnNl
        cnZlciBvbiBpdCkKICB0aGlzLl93YXRjaGluZyA9IHZhbHVlPT09dW5kZWZp
        bmVkOwoKICB0aGlzLl92YWx1ZSAgPSB2YWx1ZTsKICB0aGlzLl9wYXRocyA9
        IHt9OwogIGlmICh0aGlzLl93YXRjaGluZykgewogICAgdGhpcy5fb2JqZWN0
        ID0gcGFyZW50LnZhbHVlKCk7CiAgICBpZiAodGhpcy5fb2JqZWN0KSB7IGFk
        ZENoYWluV2F0Y2hlcih0aGlzLl9vYmplY3QsIHRoaXMuX2tleSwgdGhpcyk7
        IH0KICB9CgogIC8vIFNwZWNpYWwtY2FzZTogdGhlIEVhY2hQcm94eSByZWxp
        ZXMgb24gaW1tZWRpYXRlIGV2YWx1YXRpb24gdG8KICAvLyBlc3RhYmxpc2gg
        aXRzIG9ic2VydmVycy4KICAvLwogIC8vIFRPRE86IFJlcGxhY2UgdGhpcyB3
        aXRoIGFuIGVmZmljaWVudCBjYWxsYmFjayB0aGF0IHRoZSBFYWNoUHJveHkK
        ICAvLyBjYW4gaW1wbGVtZW50LgogIGlmICh0aGlzLl9wYXJlbnQgJiYgdGhp
        cy5fcGFyZW50Ll9rZXkgPT09ICdAZWFjaCcpIHsKICAgIHRoaXMudmFsdWUo
        KTsKICB9Cn07Cgp2YXIgQ2hhaW5Ob2RlUHJvdG90eXBlID0gQ2hhaW5Ob2Rl
        LnByb3RvdHlwZTsKCmZ1bmN0aW9uIGxhenlHZXQob2JqLCBrZXkpIHsKICBp
        ZiAoIW9iaikgcmV0dXJuIHVuZGVmaW5lZDsKCiAgdmFyIG1ldGEgPSBtZXRh
        Rm9yKG9iaiwgZmFsc2UpOwogIC8vIGNoZWNrIGlmIG9iamVjdCBtZWFudCBv
        bmx5IHRvIGJlIGEgcHJvdG90eXBlCiAgaWYgKG1ldGEucHJvdG8gPT09IG9i
        aikgcmV0dXJuIHVuZGVmaW5lZDsKCiAgaWYgKGtleSA9PT0gIkBlYWNoIikg
        cmV0dXJuIGdldChvYmosIGtleSk7CgogIC8vIGlmIGEgQ1Agb25seSByZXR1
        cm4gY2FjaGVkIHZhbHVlCiAgdmFyIGRlc2MgPSBtZXRhLmRlc2NzW2tleV07
        CiAgaWYgKGRlc2MgJiYgZGVzYy5fY2FjaGVhYmxlKSB7CiAgICBpZiAoa2V5
        IGluIG1ldGEuY2FjaGUpIHsKICAgICAgcmV0dXJuIG1ldGEuY2FjaGVba2V5
        XTsKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiB1bmRlZmluZWQ7CiAgICB9
        CiAgfQoKICByZXR1cm4gZ2V0KG9iaiwga2V5KTsKfQoKQ2hhaW5Ob2RlUHJv
        dG90eXBlLnZhbHVlID0gZnVuY3Rpb24oKSB7CiAgaWYgKHRoaXMuX3ZhbHVl
        ID09PSB1bmRlZmluZWQgJiYgdGhpcy5fd2F0Y2hpbmcpIHsKICAgIHZhciBv
        YmogPSB0aGlzLl9wYXJlbnQudmFsdWUoKTsKICAgIHRoaXMuX3ZhbHVlID0g
        bGF6eUdldChvYmosIHRoaXMuX2tleSk7CiAgfQogIHJldHVybiB0aGlzLl92
        YWx1ZTsKfTsKCkNoYWluTm9kZVByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rp
        b24oKSB7CiAgaWYgKHRoaXMuX3dhdGNoaW5nKSB7CiAgICB2YXIgb2JqID0g
        dGhpcy5fb2JqZWN0OwogICAgaWYgKG9iaikgeyByZW1vdmVDaGFpbldhdGNo
        ZXIob2JqLCB0aGlzLl9rZXksIHRoaXMpOyB9CiAgICB0aGlzLl93YXRjaGlu
        ZyA9IGZhbHNlOyAvLyBzbyBmdXR1cmUgY2FsbHMgZG8gbm90aGluZwogIH0K
        fTsKCi8vIGNvcGllcyBhIHRvcCBsZXZlbCBvYmplY3Qgb25seQpDaGFpbk5v
        ZGVQcm90b3R5cGUuY29weSA9IGZ1bmN0aW9uKG9iaikgewogIHZhciByZXQg
        PSBuZXcgQ2hhaW5Ob2RlKG51bGwsIG51bGwsIG9iaiksCiAgICAgIHBhdGhz
        ID0gdGhpcy5fcGF0aHMsIHBhdGg7CiAgZm9yIChwYXRoIGluIHBhdGhzKSB7
        CiAgICBpZiAocGF0aHNbcGF0aF0gPD0gMCkgeyBjb250aW51ZTsgfSAvLyB0
        aGlzIGNoZWNrIHdpbGwgYWxzbyBjYXRjaCBub24tbnVtYmVyIHZhbHMuCiAg
        ICByZXQuYWRkKHBhdGgpOwogIH0KICByZXR1cm4gcmV0Owp9OwoKLy8gY2Fs
        bGVkIG9uIHRoZSByb290IG5vZGUgb2YgYSBjaGFpbiB0byBzZXR1cCB3YXRj
        aGVycyBvbiB0aGUgc3BlY2lmaWVkCi8vIHBhdGguCkNoYWluTm9kZVByb3Rv
        dHlwZS5hZGQgPSBmdW5jdGlvbihwYXRoKSB7CiAgdmFyIG9iaiwgdHVwbGUs
        IGtleSwgc3JjLCBwYXRoczsKCiAgcGF0aHMgPSB0aGlzLl9wYXRoczsKICBw
        YXRoc1twYXRoXSA9IChwYXRoc1twYXRoXSB8fCAwKSArIDE7CgogIG9iaiA9
        IHRoaXMudmFsdWUoKTsKICB0dXBsZSA9IG5vcm1hbGl6ZVR1cGxlKG9iaiwg
        cGF0aCk7CgogIC8vIHRoZSBwYXRoIHdhcyBhIGxvY2FsIHBhdGgKICBpZiAo
        dHVwbGVbMF0gJiYgdHVwbGVbMF0gPT09IG9iaikgewogICAgcGF0aCA9IHR1
        cGxlWzFdOwogICAga2V5ICA9IGZpcnN0S2V5KHBhdGgpOwogICAgcGF0aCA9
        IHBhdGguc2xpY2Uoa2V5Lmxlbmd0aCsxKTsKCiAgLy8gZ2xvYmFsIHBhdGgs
        IGJ1dCBvYmplY3QgZG9lcyBub3QgZXhpc3QgeWV0LgogIC8vIHB1dCBpbnRv
        IGEgcXVldWUgYW5kIHRyeSB0byBjb25uZWN0IGxhdGVyLgogIH0gZWxzZSBp
        ZiAoIXR1cGxlWzBdKSB7CiAgICBwZW5kaW5nUXVldWUucHVzaChbdGhpcywg
        cGF0aF0pOwogICAgdHVwbGUubGVuZ3RoID0gMDsKICAgIHJldHVybjsKCiAg
        Ly8gZ2xvYmFsIHBhdGgsIGFuZCBvYmplY3QgYWxyZWFkeSBleGlzdHMKICB9
        IGVsc2UgewogICAgc3JjICA9IHR1cGxlWzBdOwogICAga2V5ICA9IHBhdGgu
        c2xpY2UoMCwgMC0odHVwbGVbMV0ubGVuZ3RoKzEpKTsKICAgIHBhdGggPSB0
        dXBsZVsxXTsKICB9CgogIHR1cGxlLmxlbmd0aCA9IDA7CiAgdGhpcy5jaGFp
        bihrZXksIHBhdGgsIHNyYyk7Cn07CgovLyBjYWxsZWQgb24gdGhlIHJvb3Qg
        bm9kZSBvZiBhIGNoYWluIHRvIHRlYXJkb3duIHdhdGNoZXIgb24gdGhlIHNw
        ZWNpZmllZAovLyBwYXRoCkNoYWluTm9kZVByb3RvdHlwZS5yZW1vdmUgPSBm
        dW5jdGlvbihwYXRoKSB7CiAgdmFyIG9iaiwgdHVwbGUsIGtleSwgc3JjLCBw
        YXRoczsKCiAgcGF0aHMgPSB0aGlzLl9wYXRoczsKICBpZiAocGF0aHNbcGF0
        aF0gPiAwKSB7IHBhdGhzW3BhdGhdLS07IH0KCiAgb2JqID0gdGhpcy52YWx1
        ZSgpOwogIHR1cGxlID0gbm9ybWFsaXplVHVwbGUob2JqLCBwYXRoKTsKICBp
        ZiAodHVwbGVbMF0gPT09IG9iaikgewogICAgcGF0aCA9IHR1cGxlWzFdOwog
        ICAga2V5ICA9IGZpcnN0S2V5KHBhdGgpOwogICAgcGF0aCA9IHBhdGguc2xp
        Y2Uoa2V5Lmxlbmd0aCsxKTsKICB9IGVsc2UgewogICAgc3JjICA9IHR1cGxl
        WzBdOwogICAga2V5ICA9IHBhdGguc2xpY2UoMCwgMC0odHVwbGVbMV0ubGVu
        Z3RoKzEpKTsKICAgIHBhdGggPSB0dXBsZVsxXTsKICB9CgogIHR1cGxlLmxl
        bmd0aCA9IDA7CiAgdGhpcy51bmNoYWluKGtleSwgcGF0aCk7Cn07CgpDaGFp
        bk5vZGVQcm90b3R5cGUuY291bnQgPSAwOwoKQ2hhaW5Ob2RlUHJvdG90eXBl
        LmNoYWluID0gZnVuY3Rpb24oa2V5LCBwYXRoLCBzcmMpIHsKICB2YXIgY2hh
        aW5zID0gdGhpcy5fY2hhaW5zLCBub2RlOwogIGlmICghY2hhaW5zKSB7IGNo
        YWlucyA9IHRoaXMuX2NoYWlucyA9IHt9OyB9CgogIG5vZGUgPSBjaGFpbnNb
        a2V5XTsKICBpZiAoIW5vZGUpIHsgbm9kZSA9IGNoYWluc1trZXldID0gbmV3
        IENoYWluTm9kZSh0aGlzLCBrZXksIHNyYyk7IH0KICBub2RlLmNvdW50Kys7
        IC8vIGNvdW50IGNoYWlucy4uLgoKICAvLyBjaGFpbiByZXN0IG9mIHBhdGgg
        aWYgdGhlcmUgaXMgb25lCiAgaWYgKHBhdGggJiYgcGF0aC5sZW5ndGg+MCkg
        ewogICAga2V5ID0gZmlyc3RLZXkocGF0aCk7CiAgICBwYXRoID0gcGF0aC5z
        bGljZShrZXkubGVuZ3RoKzEpOwogICAgbm9kZS5jaGFpbihrZXksIHBhdGgp
        OyAvLyBOT1RFOiBubyBzcmMgbWVhbnMgaXQgd2lsbCBvYnNlcnZlIGNoYW5n
        ZXMuLi4KICB9Cn07CgpDaGFpbk5vZGVQcm90b3R5cGUudW5jaGFpbiA9IGZ1
        bmN0aW9uKGtleSwgcGF0aCkgewogIHZhciBjaGFpbnMgPSB0aGlzLl9jaGFp
        bnMsIG5vZGUgPSBjaGFpbnNba2V5XTsKCiAgLy8gdW5jaGFpbiByZXN0IG9m
        IHBhdGggZmlyc3QuLi4KICBpZiAocGF0aCAmJiBwYXRoLmxlbmd0aD4xKSB7
        CiAgICBrZXkgID0gZmlyc3RLZXkocGF0aCk7CiAgICBwYXRoID0gcGF0aC5z
        bGljZShrZXkubGVuZ3RoKzEpOwogICAgbm9kZS51bmNoYWluKGtleSwgcGF0
        aCk7CiAgfQoKICAvLyBkZWxldGUgbm9kZSBpZiBuZWVkZWQuCiAgbm9kZS5j
        b3VudC0tOwogIGlmIChub2RlLmNvdW50PD0wKSB7CiAgICBkZWxldGUgY2hh
        aW5zW25vZGUuX2tleV07CiAgICBub2RlLmRlc3Ryb3koKTsKICB9Cgp9OwoK
        Q2hhaW5Ob2RlUHJvdG90eXBlLndpbGxDaGFuZ2UgPSBmdW5jdGlvbihldmVu
        dHMpIHsKICB2YXIgY2hhaW5zID0gdGhpcy5fY2hhaW5zOwogIGlmIChjaGFp
        bnMpIHsKICAgIGZvcih2YXIga2V5IGluIGNoYWlucykgewogICAgICBpZiAo
        IWNoYWlucy5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7IGNvbnRpbnVlOyB9CiAg
        ICAgIGNoYWluc1trZXldLndpbGxDaGFuZ2UoZXZlbnRzKTsKICAgIH0KICB9
        CgogIGlmICh0aGlzLl9wYXJlbnQpIHsgdGhpcy5fcGFyZW50LmNoYWluV2ls
        bENoYW5nZSh0aGlzLCB0aGlzLl9rZXksIDEsIGV2ZW50cyk7IH0KfTsKCkNo
        YWluTm9kZVByb3RvdHlwZS5jaGFpbldpbGxDaGFuZ2UgPSBmdW5jdGlvbihj
        aGFpbiwgcGF0aCwgZGVwdGgsIGV2ZW50cykgewogIGlmICh0aGlzLl9rZXkp
        IHsgcGF0aCA9IHRoaXMuX2tleSArICcuJyArIHBhdGg7IH0KCiAgaWYgKHRo
        aXMuX3BhcmVudCkgewogICAgdGhpcy5fcGFyZW50LmNoYWluV2lsbENoYW5n
        ZSh0aGlzLCBwYXRoLCBkZXB0aCsxLCBldmVudHMpOwogIH0gZWxzZSB7CiAg
        ICBpZiAoZGVwdGggPiAxKSB7CiAgICAgIGV2ZW50cy5wdXNoKHRoaXMudmFs
        dWUoKSwgcGF0aCk7CiAgICB9CiAgICBwYXRoID0gJ3RoaXMuJyArIHBhdGg7
        CiAgICBpZiAodGhpcy5fcGF0aHNbcGF0aF0gPiAwKSB7CiAgICAgIGV2ZW50
        cy5wdXNoKHRoaXMudmFsdWUoKSwgcGF0aCk7CiAgICB9CiAgfQp9OwoKQ2hh
        aW5Ob2RlUHJvdG90eXBlLmNoYWluRGlkQ2hhbmdlID0gZnVuY3Rpb24oY2hh
        aW4sIHBhdGgsIGRlcHRoLCBldmVudHMpIHsKICBpZiAodGhpcy5fa2V5KSB7
        IHBhdGggPSB0aGlzLl9rZXkgKyAnLicgKyBwYXRoOyB9CiAgaWYgKHRoaXMu
        X3BhcmVudCkgewogICAgdGhpcy5fcGFyZW50LmNoYWluRGlkQ2hhbmdlKHRo
        aXMsIHBhdGgsIGRlcHRoKzEsIGV2ZW50cyk7CiAgfSBlbHNlIHsKICAgIGlm
        IChkZXB0aCA+IDEpIHsKICAgICAgZXZlbnRzLnB1c2godGhpcy52YWx1ZSgp
        LCBwYXRoKTsKICAgIH0KICAgIHBhdGggPSAndGhpcy4nICsgcGF0aDsKICAg
        IGlmICh0aGlzLl9wYXRoc1twYXRoXSA+IDApIHsKICAgICAgZXZlbnRzLnB1
        c2godGhpcy52YWx1ZSgpLCBwYXRoKTsKICAgIH0KICB9Cn07CgpDaGFpbk5v
        ZGVQcm90b3R5cGUuZGlkQ2hhbmdlID0gZnVuY3Rpb24oZXZlbnRzKSB7CiAg
        Ly8gaW52YWxpZGF0ZSBteSBvd24gdmFsdWUgZmlyc3QuCiAgaWYgKHRoaXMu
        X3dhdGNoaW5nKSB7CiAgICB2YXIgb2JqID0gdGhpcy5fcGFyZW50LnZhbHVl
        KCk7CiAgICBpZiAob2JqICE9PSB0aGlzLl9vYmplY3QpIHsKICAgICAgcmVt
        b3ZlQ2hhaW5XYXRjaGVyKHRoaXMuX29iamVjdCwgdGhpcy5fa2V5LCB0aGlz
        KTsKICAgICAgdGhpcy5fb2JqZWN0ID0gb2JqOwogICAgICBhZGRDaGFpbldh
        dGNoZXIob2JqLCB0aGlzLl9rZXksIHRoaXMpOwogICAgfQogICAgdGhpcy5f
        dmFsdWUgID0gdW5kZWZpbmVkOwoKICAgIC8vIFNwZWNpYWwtY2FzZTogdGhl
        IEVhY2hQcm94eSByZWxpZXMgb24gaW1tZWRpYXRlIGV2YWx1YXRpb24gdG8K
        ICAgIC8vIGVzdGFibGlzaCBpdHMgb2JzZXJ2ZXJzLgogICAgaWYgKHRoaXMu
        X3BhcmVudCAmJiB0aGlzLl9wYXJlbnQuX2tleSA9PT0gJ0BlYWNoJykKICAg
        ICAgdGhpcy52YWx1ZSgpOwogIH0KCiAgLy8gdGhlbiBub3RpZnkgY2hhaW5z
        Li4uCiAgdmFyIGNoYWlucyA9IHRoaXMuX2NoYWluczsKICBpZiAoY2hhaW5z
        KSB7CiAgICBmb3IodmFyIGtleSBpbiBjaGFpbnMpIHsKICAgICAgaWYgKCFj
        aGFpbnMuaGFzT3duUHJvcGVydHkoa2V5KSkgeyBjb250aW51ZTsgfQogICAg
        ICBjaGFpbnNba2V5XS5kaWRDaGFuZ2UoZXZlbnRzKTsKICAgIH0KICB9Cgog
        IC8vIGlmIG5vIGV2ZW50cyBhcmUgcGFzc2VkIGluIHRoZW4gd2Ugb25seSBj
        YXJlIGFib3V0IHRoZSBhYm92ZSB3aXJpbmcgdXBkYXRlCiAgaWYgKGV2ZW50
        cyA9PT0gbnVsbCkgeyByZXR1cm47IH0KCiAgLy8gYW5kIGZpbmFsbHkgdGVs
        bCBwYXJlbnQgYWJvdXQgbXkgcGF0aCBjaGFuZ2luZy4uLgogIGlmICh0aGlz
        Ll9wYXJlbnQpIHsgdGhpcy5fcGFyZW50LmNoYWluRGlkQ2hhbmdlKHRoaXMs
        IHRoaXMuX2tleSwgMSwgZXZlbnRzKTsgfQp9OwoKRW1iZXIuZmluaXNoQ2hh
        aW5zID0gZnVuY3Rpb24ob2JqKSB7CiAgdmFyIG0gPSBtZXRhRm9yKG9iaiwg
        ZmFsc2UpLCBjaGFpbnMgPSBtLmNoYWluczsKICBpZiAoY2hhaW5zKSB7CiAg
        ICBpZiAoY2hhaW5zLnZhbHVlKCkgIT09IG9iaikgewogICAgICBtLmNoYWlu
        cyA9IGNoYWlucyA9IGNoYWlucy5jb3B5KG9iaik7CiAgICB9CiAgICBjaGFp
        bnMuZGlkQ2hhbmdlKG51bGwpOwogIH0KfTsKCn0pKCk7CgoKCihmdW5jdGlv
        bigpIHsKLyoqCiAgQG1vZHVsZSBlbWJlci1tZXRhbAoqLwoKCn0pKCk7CgoK
        CihmdW5jdGlvbigpIHsKdmFyIG1ldGFGb3IgPSBFbWJlci5tZXRhLCAvLyB1
        dGlscy5qcwogICAgdHlwZU9mID0gRW1iZXIudHlwZU9mLCAvLyB1dGlscy5q
        cwogICAgQ2hhaW5Ob2RlID0gRW1iZXIuX0NoYWluTm9kZTsgLy8gY2hhaW5z
        LmpzCgovLyBnZXQgdGhlIGNoYWlucyBmb3IgdGhlIGN1cnJlbnQgb2JqZWN0
        LiBJZiB0aGUgY3VycmVudCBvYmplY3QgaGFzCi8vIGNoYWlucyBpbmhlcml0
        ZWQgZnJvbSB0aGUgcHJvdG8gdGhleSB3aWxsIGJlIGNsb25lZCBhbmQgcmVj
        b25maWd1cmVkIGZvcgovLyB0aGUgY3VycmVudCBvYmplY3QuCmZ1bmN0aW9u
        IGNoYWluc0ZvcihvYmopIHsKICB2YXIgbSA9IG1ldGFGb3Iob2JqKSwgcmV0
        ID0gbS5jaGFpbnM7CiAgaWYgKCFyZXQpIHsKICAgIHJldCA9IG0uY2hhaW5z
        ID0gbmV3IENoYWluTm9kZShudWxsLCBudWxsLCBvYmopOwogIH0gZWxzZSBp
        ZiAocmV0LnZhbHVlKCkgIT09IG9iaikgewogICAgcmV0ID0gbS5jaGFpbnMg
        PSByZXQuY29weShvYmopOwogIH0KICByZXR1cm4gcmV0Owp9CgpFbWJlci53
        YXRjaFBhdGggPSBmdW5jdGlvbihvYmosIGtleVBhdGgpIHsKICAvLyBjYW4n
        dCB3YXRjaCBsZW5ndGggb24gQXJyYXkgLSBpdCBpcyBzcGVjaWFsLi4uCiAg
        aWYgKGtleVBhdGggPT09ICdsZW5ndGgnICYmIHR5cGVPZihvYmopID09PSAn
        YXJyYXknKSB7IHJldHVybjsgfQoKICB2YXIgbSA9IG1ldGFGb3Iob2JqKSwg
        d2F0Y2hpbmcgPSBtLndhdGNoaW5nOwoKICBpZiAoIXdhdGNoaW5nW2tleVBh
        dGhdKSB7IC8vIGFjdGl2YXRlIHdhdGNoaW5nIGZpcnN0IHRpbWUKICAgIHdh
        dGNoaW5nW2tleVBhdGhdID0gMTsKICAgIGNoYWluc0ZvcihvYmopLmFkZChr
        ZXlQYXRoKTsKICB9IGVsc2UgewogICAgd2F0Y2hpbmdba2V5UGF0aF0gPSAo
        d2F0Y2hpbmdba2V5UGF0aF0gfHwgMCkgKyAxOwogIH0KfTsKCkVtYmVyLnVu
        d2F0Y2hQYXRoID0gZnVuY3Rpb24ob2JqLCBrZXlQYXRoKSB7CiAgdmFyIG0g
        PSBtZXRhRm9yKG9iaiksIHdhdGNoaW5nID0gbS53YXRjaGluZzsKCiAgaWYg
        KHdhdGNoaW5nW2tleVBhdGhdID09PSAxKSB7CiAgICB3YXRjaGluZ1trZXlQ
        YXRoXSA9IDA7CiAgICBjaGFpbnNGb3Iob2JqKS5yZW1vdmUoa2V5UGF0aCk7
        CiAgfSBlbHNlIGlmICh3YXRjaGluZ1trZXlQYXRoXSA+IDEpIHsKICAgIHdh
        dGNoaW5nW2tleVBhdGhdLS07CiAgfQp9Owp9KSgpOwoKCgooZnVuY3Rpb24o
        KSB7Ci8qKgpAbW9kdWxlIGVtYmVyLW1ldGFsCiovCgp2YXIgbWV0YUZvciA9
        IEVtYmVyLm1ldGEsIC8vIHV0aWxzLmpzCiAgICBHVUlEX0tFWSA9IEVtYmVy
        LkdVSURfS0VZLCAvLyB1dGlscy5qcwogICAgTUVUQV9LRVkgPSBFbWJlci5N
        RVRBX0tFWSwgLy8gdXRpbHMuanMKICAgIHJlbW92ZUNoYWluV2F0Y2hlciA9
        IEVtYmVyLnJlbW92ZUNoYWluV2F0Y2hlciwKICAgIHdhdGNoS2V5ID0gRW1i
        ZXIud2F0Y2hLZXksIC8vIHdhdGNoX2tleS5qcwogICAgdW53YXRjaEtleSA9
        IEVtYmVyLnVud2F0Y2hLZXksCiAgICB3YXRjaFBhdGggPSBFbWJlci53YXRj
        aFBhdGgsIC8vIHdhdGNoX3BhdGguanMKICAgIHVud2F0Y2hQYXRoID0gRW1i
        ZXIudW53YXRjaFBhdGgsCiAgICB0eXBlT2YgPSBFbWJlci50eXBlT2YsIC8v
        IHV0aWxzLmpzCiAgICBnZW5lcmF0ZUd1aWQgPSBFbWJlci5nZW5lcmF0ZUd1
        aWQsCiAgICBJU19QQVRIID0gL1tcLlwqXS87CgoKLy8gcmV0dXJucyB0cnVl
        IGlmIHRoZSBwYXNzZWQgcGF0aCBpcyBqdXN0IGEga2V5TmFtZQpmdW5jdGlv
        biBpc0tleU5hbWUocGF0aCkgewogIHJldHVybiBwYXRoPT09JyonIHx8ICFJ
        U19QQVRILnRlc3QocGF0aCk7Cn0KCi8qKgogIEBwcml2YXRlCgogIFN0YXJ0
        cyB3YXRjaGluZyBhIHByb3BlcnR5IG9uIGFuIG9iamVjdC4gV2hlbmV2ZXIg
        dGhlIHByb3BlcnR5IGNoYW5nZXMsCiAgaW52b2tlcyBgRW1iZXIucHJvcGVy
        dHlXaWxsQ2hhbmdlYCBhbmQgYEVtYmVyLnByb3BlcnR5RGlkQ2hhbmdlYC4g
        VGhpcyBpcyB0aGUKICBwcmltaXRpdmUgdXNlZCBieSBvYnNlcnZlcnMgYW5k
        IGRlcGVuZGVudCBrZXlzOyB1c3VhbGx5IHlvdSB3aWxsIG5ldmVyIGNhbGwK
        ICB0aGlzIG1ldGhvZCBkaXJlY3RseSBidXQgaW5zdGVhZCB1c2UgaGlnaGVy
        IGxldmVsIG1ldGhvZHMgbGlrZQogIGBFbWJlci5hZGRPYnNlcnZlcigpYAoK
        ICBAbWV0aG9kIHdhdGNoCiAgQGZvciBFbWJlcgogIEBwYXJhbSBvYmoKICBA
        cGFyYW0ge1N0cmluZ30ga2V5TmFtZQoqLwpFbWJlci53YXRjaCA9IGZ1bmN0
        aW9uKG9iaiwgX2tleVBhdGgpIHsKICAvLyBjYW4ndCB3YXRjaCBsZW5ndGgg
        b24gQXJyYXkgLSBpdCBpcyBzcGVjaWFsLi4uCiAgaWYgKF9rZXlQYXRoID09
        PSAnbGVuZ3RoJyAmJiB0eXBlT2Yob2JqKSA9PT0gJ2FycmF5JykgeyByZXR1
        cm47IH0KCiAgCiAgICBpZiAoaXNLZXlOYW1lKF9rZXlQYXRoKSkgewogICAg
        ICB3YXRjaEtleShvYmosIF9rZXlQYXRoKTsKICAgIH0gZWxzZSB7CiAgICAg
        IHdhdGNoUGF0aChvYmosIF9rZXlQYXRoKTsKICAgIH0KICAKfTsKCkVtYmVy
        LmlzV2F0Y2hpbmcgPSBmdW5jdGlvbiBpc1dhdGNoaW5nKG9iaiwga2V5KSB7
        CiAgdmFyIG1ldGEgPSBvYmpbTUVUQV9LRVldOwogIHJldHVybiAobWV0YSAm
        JiBtZXRhLndhdGNoaW5nW2tleV0pID4gMDsKfTsKCkVtYmVyLndhdGNoLmZs
        dXNoUGVuZGluZyA9IEVtYmVyLmZsdXNoUGVuZGluZ0NoYWluczsKCkVtYmVy
        LnVud2F0Y2ggPSBmdW5jdGlvbihvYmosIF9rZXlQYXRoKSB7CiAgLy8gY2Fu
        J3Qgd2F0Y2ggbGVuZ3RoIG9uIEFycmF5IC0gaXQgaXMgc3BlY2lhbC4uLgog
        IGlmIChfa2V5UGF0aCA9PT0gJ2xlbmd0aCcgJiYgdHlwZU9mKG9iaikgPT09
        ICdhcnJheScpIHsgcmV0dXJuOyB9CgogIAogICAgaWYgKGlzS2V5TmFtZShf
        a2V5UGF0aCkpIHsKICAgICAgdW53YXRjaEtleShvYmosIF9rZXlQYXRoKTsK
        ICAgIH0gZWxzZSB7CiAgICAgIHVud2F0Y2hQYXRoKG9iaiwgX2tleVBhdGgp
        OwogICAgfQogIAp9OwoKLyoqCiAgQHByaXZhdGUKCiAgQ2FsbCBvbiBhbiBv
        YmplY3Qgd2hlbiB5b3UgZmlyc3QgYmVnZXQgaXQgZnJvbSBhbm90aGVyIG9i
        amVjdC4gVGhpcyB3aWxsCiAgc2V0dXAgYW55IGNoYWluZWQgd2F0Y2hlcnMg
        b24gdGhlIG9iamVjdCBpbnN0YW5jZSBhcyBuZWVkZWQuIFRoaXMgbWV0aG9k
        IGlzCiAgc2FmZSB0byBjYWxsIG11bHRpcGxlIHRpbWVzLgoKICBAbWV0aG9k
        IHJld2F0Y2gKICBAZm9yIEVtYmVyCiAgQHBhcmFtIG9iagoqLwpFbWJlci5y
        ZXdhdGNoID0gZnVuY3Rpb24ob2JqKSB7CiAgdmFyIG0gPSBtZXRhRm9yKG9i
        aiwgZmFsc2UpLCBjaGFpbnMgPSBtLmNoYWluczsKCiAgLy8gbWFrZSBzdXJl
        IHRoZSBvYmplY3QgaGFzIGl0cyBvd24gZ3VpZC4KICBpZiAoR1VJRF9LRVkg
        aW4gb2JqICYmICFvYmouaGFzT3duUHJvcGVydHkoR1VJRF9LRVkpKSB7CiAg
        ICBnZW5lcmF0ZUd1aWQob2JqKTsKICB9CgogIC8vIG1ha2Ugc3VyZSBhbnkg
        Y2hhaW5lZCB3YXRjaGVycyB1cGRhdGUuCiAgaWYgKGNoYWlucyAmJiBjaGFp
        bnMudmFsdWUoKSAhPT0gb2JqKSB7CiAgICBtLmNoYWlucyA9IGNoYWlucy5j
        b3B5KG9iaik7CiAgfQp9OwoKdmFyIE5PREVfU1RBQ0sgPSBbXTsKCi8qKgog
        IFRlYXJzIGRvd24gdGhlIG1ldGEgb24gYW4gb2JqZWN0IHNvIHRoYXQgaXQg
        Y2FuIGJlIGdhcmJhZ2UgY29sbGVjdGVkLgogIE11bHRpcGxlIGNhbGxzIHdp
        bGwgaGF2ZSBubyBlZmZlY3QuCgogIEBtZXRob2QgZGVzdHJveQogIEBmb3Ig
        RW1iZXIKICBAcGFyYW0ge09iamVjdH0gb2JqICB0aGUgb2JqZWN0IHRvIGRl
        c3Ryb3kKICBAcmV0dXJuIHt2b2lkfQoqLwpFbWJlci5kZXN0cm95ID0gZnVu
        Y3Rpb24gKG9iaikgewogIHZhciBtZXRhID0gb2JqW01FVEFfS0VZXSwgbm9k
        ZSwgbm9kZXMsIGtleSwgbm9kZU9iamVjdDsKICBpZiAobWV0YSkgewogICAg
        b2JqW01FVEFfS0VZXSA9IG51bGw7CiAgICAvLyByZW1vdmUgY2hhaW5XYXRj
        aGVycyB0byByZW1vdmUgY2lyY3VsYXIgcmVmZXJlbmNlcyB0aGF0IHdvdWxk
        IHByZXZlbnQgR0MKICAgIG5vZGUgPSBtZXRhLmNoYWluczsKICAgIGlmIChu
        b2RlKSB7CiAgICAgIE5PREVfU1RBQ0sucHVzaChub2RlKTsKICAgICAgLy8g
        cHJvY2VzcyB0cmVlCiAgICAgIHdoaWxlIChOT0RFX1NUQUNLLmxlbmd0aCA+
        IDApIHsKICAgICAgICBub2RlID0gTk9ERV9TVEFDSy5wb3AoKTsKICAgICAg
        ICAvLyBwdXNoIGNoaWxkcmVuCiAgICAgICAgbm9kZXMgPSBub2RlLl9jaGFp
        bnM7CiAgICAgICAgaWYgKG5vZGVzKSB7CiAgICAgICAgICBmb3IgKGtleSBp
        biBub2RlcykgewogICAgICAgICAgICBpZiAobm9kZXMuaGFzT3duUHJvcGVy
        dHkoa2V5KSkgewogICAgICAgICAgICAgIE5PREVfU1RBQ0sucHVzaChub2Rl
        c1trZXldKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0K
        ICAgICAgICAvLyByZW1vdmUgY2hhaW5XYXRjaGVyIGluIG5vZGUgb2JqZWN0
        CiAgICAgICAgaWYgKG5vZGUuX3dhdGNoaW5nKSB7CiAgICAgICAgICBub2Rl
        T2JqZWN0ID0gbm9kZS5fb2JqZWN0OwogICAgICAgICAgaWYgKG5vZGVPYmpl
        Y3QpIHsKICAgICAgICAgICAgcmVtb3ZlQ2hhaW5XYXRjaGVyKG5vZGVPYmpl
        Y3QsIG5vZGUuX2tleSwgbm9kZSk7CiAgICAgICAgICB9CiAgICAgICAgfQog
        ICAgICB9CiAgICB9CiAgfQp9OwoKfSkoKTsKCgoKKGZ1bmN0aW9uKCkgewov
        KioKQG1vZHVsZSBlbWJlci1tZXRhbAoqLwoKRW1iZXIud2FybigiVGhlIENQ
        X0RFRkFVTFRfQ0FDSEVBQkxFIGZsYWcgaGFzIGJlZW4gcmVtb3ZlZCBhbmQg
        Y29tcHV0ZWQgcHJvcGVydGllcyBhcmUgYWx3YXlzIGNhY2hlZCBieSBkZWZh
        dWx0LiBVc2UgYHZvbGF0aWxlYCBpZiB5b3UgZG9uJ3Qgd2FudCBjYWNoaW5n
        LiIsIEVtYmVyLkVOVi5DUF9ERUZBVUxUX0NBQ0hFQUJMRSAhPT0gZmFsc2Up
        OwoKCnZhciBnZXQgPSBFbWJlci5nZXQsCiAgICBzZXQgPSBFbWJlci5zZXQs
        CiAgICBtZXRhRm9yID0gRW1iZXIubWV0YSwKICAgIGFfc2xpY2UgPSBbXS5z
        bGljZSwKICAgIG9fY3JlYXRlID0gRW1iZXIuY3JlYXRlLAogICAgTUVUQV9L
        RVkgPSBFbWJlci5NRVRBX0tFWSwKICAgIHdhdGNoID0gRW1iZXIud2F0Y2gs
        CiAgICB1bndhdGNoID0gRW1iZXIudW53YXRjaDsKCgovLyAuLi4uLi4uLi4u
        Li4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4u
        Li4uCi8vIERFUEVOREVOVCBLRVlTCi8vCgovLyBkYXRhIHN0cnVjdHVyZToK
        Ly8gIG1ldGEuZGVwcyA9IHsKLy8gICAnZGVwS2V5JzogewovLyAgICAgJ2tl
        eU5hbWUnOiBjb3VudCwKLy8gICB9Ci8vICB9CgovKgogIFRoaXMgZnVuY3Rp
        b24gcmV0dXJucyBhIG1hcCBvZiB1bmlxdWUgZGVwZW5kZW5jaWVzIGZvciBh
        CiAgZ2l2ZW4gb2JqZWN0IGFuZCBrZXkuCiovCmZ1bmN0aW9uIGtleXNGb3JE
        ZXAoZGVwc01ldGEsIGRlcEtleSkgewogIHZhciBrZXlzID0gZGVwc01ldGFb
        ZGVwS2V5XTsKICBpZiAoIWtleXMpIHsKICAgIC8vIGlmIHRoZXJlIGFyZSBu
        byBkZXBlbmRlbmNpZXMgeWV0IGZvciBhIHRoZSBnaXZlbiBrZXkKICAgIC8v
        IGNyZWF0ZSBhIG5ldyBlbXB0eSBsaXN0IG9mIGRlcGVuZGVuY2llcyBmb3Ig
        dGhlIGtleQogICAga2V5cyA9IGRlcHNNZXRhW2RlcEtleV0gPSB7fTsKICB9
        IGVsc2UgaWYgKCFkZXBzTWV0YS5oYXNPd25Qcm9wZXJ0eShkZXBLZXkpKSB7
        CiAgICAvLyBvdGhlcndpc2UgaWYgdGhlIGRlcGVuZGVuY3kgbGlzdCBpcyBp
        bmhlcml0ZWQgZnJvbQogICAgLy8gYSBzdXBlcmNsYXNzLCBjbG9uZSB0aGUg
        aGFzaAogICAga2V5cyA9IGRlcHNNZXRhW2RlcEtleV0gPSBvX2NyZWF0ZShr
        ZXlzKTsKICB9CiAgcmV0dXJuIGtleXM7Cn0KCmZ1bmN0aW9uIG1ldGFGb3JE
        ZXBzKG1ldGEpIHsKICByZXR1cm4ga2V5c0ZvckRlcChtZXRhLCAnZGVwcycp
        Owp9CgpmdW5jdGlvbiBhZGREZXBlbmRlbnRLZXlzKGRlc2MsIG9iaiwga2V5
        TmFtZSwgbWV0YSkgewogIC8vIHRoZSBkZXNjcmlwdG9yIGhhcyBhIGxpc3Qg
        b2YgZGVwZW5kZW50IGtleXMsIHNvCiAgLy8gYWRkIGFsbCBvZiBpdHMgZGVw
        ZW5kZW50IGtleXMuCiAgdmFyIGRlcEtleXMgPSBkZXNjLl9kZXBlbmRlbnRL
        ZXlzLCBkZXBzTWV0YSwgaWR4LCBsZW4sIGRlcEtleSwga2V5czsKICBpZiAo
        IWRlcEtleXMpIHJldHVybjsKCiAgZGVwc01ldGEgPSBtZXRhRm9yRGVwcyht
        ZXRhKTsKCiAgZm9yKGlkeCA9IDAsIGxlbiA9IGRlcEtleXMubGVuZ3RoOyBp
        ZHggPCBsZW47IGlkeCsrKSB7CiAgICBkZXBLZXkgPSBkZXBLZXlzW2lkeF07
        CiAgICAvLyBMb29rdXAga2V5cyBtZXRhIGZvciBkZXBLZXkKICAgIGtleXMg
        PSBrZXlzRm9yRGVwKGRlcHNNZXRhLCBkZXBLZXkpOwogICAgLy8gSW5jcmVt
        ZW50IHRoZSBudW1iZXIgb2YgdGltZXMgZGVwS2V5IGRlcGVuZHMgb24ga2V5
        TmFtZS4KICAgIGtleXNba2V5TmFtZV0gPSAoa2V5c1trZXlOYW1lXSB8fCAw
        KSArIDE7CiAgICAvLyBXYXRjaCB0aGUgZGVwS2V5CiAgICB3YXRjaChvYmos
        IGRlcEtleSk7CiAgfQp9CgpmdW5jdGlvbiByZW1vdmVEZXBlbmRlbnRLZXlz
        KGRlc2MsIG9iaiwga2V5TmFtZSwgbWV0YSkgewogIC8vIHRoZSBkZXNjcmlw
        dG9yIGhhcyBhIGxpc3Qgb2YgZGVwZW5kZW50IGtleXMsIHNvCiAgLy8gYWRk
        IGFsbCBvZiBpdHMgZGVwZW5kZW50IGtleXMuCiAgdmFyIGRlcEtleXMgPSBk
        ZXNjLl9kZXBlbmRlbnRLZXlzLCBkZXBzTWV0YSwgaWR4LCBsZW4sIGRlcEtl
        eSwga2V5czsKICBpZiAoIWRlcEtleXMpIHJldHVybjsKCiAgZGVwc01ldGEg
        PSBtZXRhRm9yRGVwcyhtZXRhKTsKCiAgZm9yKGlkeCA9IDAsIGxlbiA9IGRl
        cEtleXMubGVuZ3RoOyBpZHggPCBsZW47IGlkeCsrKSB7CiAgICBkZXBLZXkg
        PSBkZXBLZXlzW2lkeF07CiAgICAvLyBMb29rdXAga2V5cyBtZXRhIGZvciBk
        ZXBLZXkKICAgIGtleXMgPSBrZXlzRm9yRGVwKGRlcHNNZXRhLCBkZXBLZXkp
        OwogICAgLy8gSW5jcmVtZW50IHRoZSBudW1iZXIgb2YgdGltZXMgZGVwS2V5
        IGRlcGVuZHMgb24ga2V5TmFtZS4KICAgIGtleXNba2V5TmFtZV0gPSAoa2V5
        c1trZXlOYW1lXSB8fCAwKSAtIDE7CiAgICAvLyBXYXRjaCB0aGUgZGVwS2V5
        CiAgICB1bndhdGNoKG9iaiwgZGVwS2V5KTsKICB9Cn0KCi8vIC4uLi4uLi4u
        Li4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4u
        Li4uLi4KLy8gQ09NUFVURUQgUFJPUEVSVFkKLy8KCi8qKgogIEEgY29tcHV0
        ZWQgcHJvcGVydHkgdHJhbnNmb3JtcyBhbiBvYmplY3RzIGZ1bmN0aW9uIGlu
        dG8gYSBwcm9wZXJ0eS4KCiAgQnkgZGVmYXVsdCB0aGUgZnVuY3Rpb24gYmFj
        a2luZyB0aGUgY29tcHV0ZWQgcHJvcGVydHkgd2lsbCBvbmx5IGJlIGNhbGxl
        ZAogIG9uY2UgYW5kIHRoZSByZXN1bHQgd2lsbCBiZSBjYWNoZWQuIFlvdSBj
        YW4gc3BlY2lmeSB2YXJpb3VzIHByb3BlcnRpZXMKICB0aGF0IHlvdXIgY29t
        cHV0ZWQgcHJvcGVydHkgaXMgZGVwZW5kZW50IG9uLiBUaGlzIHdpbGwgZm9y
        Y2UgdGhlIGNhY2hlZAogIHJlc3VsdCB0byBiZSByZWNvbXB1dGVkIGlmIHRo
        ZSBkZXBlbmRlbmNpZXMgYXJlIG1vZGlmaWVkLgoKICBJbiB0aGUgZm9sbG93
        aW5nIGV4YW1wbGUgd2UgZGVjbGFyZSBhIGNvbXB1dGVkIHByb3BlcnR5IChi
        eSBjYWxsaW5nCiAgYC5wcm9wZXJ0eSgpYCBvbiB0aGUgZnVsbE5hbWUgZnVu
        Y3Rpb24pIGFuZCBzZXR1cCB0aGUgcHJvcGVydGllcwogIGRlcGVuZGVuY2ll
        cyAoZGVwZW5kaW5nIG9uIGZpcnN0TmFtZSBhbmQgbGFzdE5hbWUpLiBUaGUg
        ZnVsbE5hbWUgZnVuY3Rpb24KICB3aWxsIGJlIGNhbGxlZCBvbmNlIChyZWdh
        cmRsZXNzIG9mIGhvdyBtYW55IHRpbWVzIGl0IGlzIGFjY2Vzc2VkKSBhcyBs
        b25nCiAgYXMgaXQncyBkZXBlbmRlbmNpZXMgaGF2ZSBub3QgYmVlbiBjaGFu
        Z2VkLiBPbmNlIGZpcnN0TmFtZSBvciBsYXN0TmFtZSBhcmUgdXBkYXRlZAog
        IGFueSBmdXR1cmUgY2FsbHMgKG9yIGFueXRoaW5nIGJvdW5kKSB0byBmdWxs
        TmFtZSB3aWxsIGluY29ycG9yYXRlIHRoZSBuZXcKICB2YWx1ZXMuCgogIGBg
        YGphdmFzY3JpcHQKICBQZXJzb24gPSBFbWJlci5PYmplY3QuZXh0ZW5kKHsK
        ICAgIC8vIHRoZXNlIHdpbGwgYmUgc3VwcGxpZWQgYnkgYGNyZWF0ZWAKICAg
        IGZpcnN0TmFtZTogbnVsbCwKICAgIGxhc3ROYW1lOiBudWxsLAoKICAgIGZ1
        bGxOYW1lOiBmdW5jdGlvbigpIHsKICAgICAgdmFyIGZpcnN0TmFtZSA9IHRo
        aXMuZ2V0KCdmaXJzdE5hbWUnKTsKICAgICAgdmFyIGxhc3ROYW1lID0gdGhp
        cy5nZXQoJ2xhc3ROYW1lJyk7CgogICAgIHJldHVybiBmaXJzdE5hbWUgKyAn
        ICcgKyBsYXN0TmFtZTsKICAgIH0ucHJvcGVydHkoJ2ZpcnN0TmFtZScsICds
        YXN0TmFtZScpCiAgfSk7CgogIHZhciB0b20gPSBQZXJzb24uY3JlYXRlKHsK
        ICAgIGZpcnN0TmFtZTogIlRvbSIsCiAgICBsYXN0TmFtZTogIkRhbGUiCiAg
        fSk7CgogIHRvbS5nZXQoJ2Z1bGxOYW1lJykgLy8gIlRvbSBEYWxlIgogIGBg
        YAoKICBZb3UgY2FuIGFsc28gZGVmaW5lIHdoYXQgRW1iZXIgc2hvdWxkIGRv
        IHdoZW4gc2V0dGluZyBhIGNvbXB1dGVkIHByb3BlcnR5LgogIElmIHlvdSB0
        cnkgdG8gc2V0IGEgY29tcHV0ZWQgcHJvcGVydHksIGl0IHdpbGwgYmUgaW52
        b2tlZCB3aXRoIHRoZSBrZXkgYW5kCiAgdmFsdWUgeW91IHdhbnQgdG8gc2V0
        IGl0IHRvLiBZb3UgY2FuIGFsc28gYWNjZXB0IHRoZSBwcmV2aW91cyB2YWx1
        ZSBhcyB0aGUKICB0aGlyZCBwYXJhbWV0ZXIuCgogIGBgYGphdmFzY3JpcHQK
        CiBQZXJzb24gPSBFbWJlci5PYmplY3QuZXh0ZW5kKHsKICAgIC8vIHRoZXNl
        IHdpbGwgYmUgc3VwcGxpZWQgYnkgYGNyZWF0ZWAKICAgIGZpcnN0TmFtZTog
        bnVsbCwKICAgIGxhc3ROYW1lOiBudWxsLAoKICAgIGZ1bGxOYW1lOiBmdW5j
        dGlvbihrZXksIHZhbHVlLCBvbGRWYWx1ZSkgewogICAgICAvLyBnZXR0ZXIK
        ICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDEpIHsKICAgICAgICB2
        YXIgZmlyc3ROYW1lID0gdGhpcy5nZXQoJ2ZpcnN0TmFtZScpOwogICAgICAg
        IHZhciBsYXN0TmFtZSA9IHRoaXMuZ2V0KCdsYXN0TmFtZScpOwoKICAgICAg
        ICByZXR1cm4gZmlyc3ROYW1lICsgJyAnICsgbGFzdE5hbWU7CgogICAgICAv
        LyBzZXR0ZXIKICAgICAgfSBlbHNlIHsKICAgICAgICB2YXIgbmFtZSA9IHZh
        bHVlLnNwbGl0KCIgIik7CgogICAgICAgIHRoaXMuc2V0KCdmaXJzdE5hbWUn
        LCBuYW1lWzBdKTsKICAgICAgICB0aGlzLnNldCgnbGFzdE5hbWUnLCBuYW1l
        WzFdKTsKCiAgICAgICAgcmV0dXJuIHZhbHVlOwogICAgICB9CiAgICB9LnBy
        b3BlcnR5KCdmaXJzdE5hbWUnLCAnbGFzdE5hbWUnKQogIH0pOwoKICB2YXIg
        cGVyc29uID0gUGVyc29uLmNyZWF0ZSgpOwogIHBlcnNvbi5zZXQoJ2Z1bGxO
        YW1lJywgIlBldGVyIFdhZ2VuZXQiKTsKICBwZXJzb24uZ2V0KCdmaXJzdE5h
        bWUnKSAvLyBQZXRlcgogIHBlcnNvbi5nZXQoJ2xhc3ROYW1lJykgLy8gV2Fn
        ZW5ldAogIGBgYAoKICBAY2xhc3MgQ29tcHV0ZWRQcm9wZXJ0eQogIEBuYW1l
        c3BhY2UgRW1iZXIKICBAZXh0ZW5kcyBFbWJlci5EZXNjcmlwdG9yCiAgQGNv
        bnN0cnVjdG9yCiovCmZ1bmN0aW9uIENvbXB1dGVkUHJvcGVydHkoZnVuYywg
        b3B0cykgewogIHRoaXMuZnVuYyA9IGZ1bmM7CgogIHRoaXMuX2NhY2hlYWJs
        ZSA9IChvcHRzICYmIG9wdHMuY2FjaGVhYmxlICE9PSB1bmRlZmluZWQpID8g
        b3B0cy5jYWNoZWFibGUgOiB0cnVlOwogIHRoaXMuX2RlcGVuZGVudEtleXMg
        PSBvcHRzICYmIG9wdHMuZGVwZW5kZW50S2V5czsKICB0aGlzLl9yZWFkT25s
        eSA9IG9wdHMgJiYgKG9wdHMucmVhZE9ubHkgIT09IHVuZGVmaW5lZCB8fCAh
        IW9wdHMucmVhZE9ubHkpOwp9CgpFbWJlci5Db21wdXRlZFByb3BlcnR5ID0g
        Q29tcHV0ZWRQcm9wZXJ0eTsKQ29tcHV0ZWRQcm9wZXJ0eS5wcm90b3R5cGUg
        PSBuZXcgRW1iZXIuRGVzY3JpcHRvcigpOwoKdmFyIENvbXB1dGVkUHJvcGVy
        dHlQcm90b3R5cGUgPSBDb21wdXRlZFByb3BlcnR5LnByb3RvdHlwZTsKCi8q
        KgogIFByb3BlcnRpZXMgYXJlIGNhY2hlYWJsZSBieSBkZWZhdWx0LiBDb21w
        dXRlZCBwcm9wZXJ0eSB3aWxsIGF1dG9tYXRpY2FsbHkKICBjYWNoZSB0aGUg
        cmV0dXJuIHZhbHVlIG9mIHlvdXIgZnVuY3Rpb24gdW50aWwgb25lIG9mIHRo
        ZSBkZXBlbmRlbnQga2V5cyBjaGFuZ2VzLgoKICBDYWxsIGB2b2xhdGlsZSgp
        YCB0byBzZXQgaXQgaW50byBub24tY2FjaGVkIG1vZGUuIFdoZW4gaW4gdGhp
        cyBtb2RlCiAgdGhlIGNvbXB1dGVkIHByb3BlcnR5IHdpbGwgbm90IGF1dG9t
        YXRpY2FsbHkgY2FjaGUgdGhlIHJldHVybiB2YWx1ZS4KCiAgSG93ZXZlciwg
        aWYgYSBwcm9wZXJ0eSBpcyBwcm9wZXJseSBvYnNlcnZhYmxlLCB0aGVyZSBp
        cyBubyByZWFzb24gdG8gZGlzYWJsZQogIGNhY2hpbmcuCgogIEBtZXRob2Qg
        Y2FjaGVhYmxlCiAgQHBhcmFtIHtCb29sZWFufSBhRmxhZyBvcHRpb25hbCBz
        ZXQgdG8gYGZhbHNlYCB0byBkaXNhYmxlIGNhY2hpbmcKICBAcmV0dXJuIHtF
        bWJlci5Db21wdXRlZFByb3BlcnR5fSB0aGlzCiAgQGNoYWluYWJsZQoqLwpD
        b21wdXRlZFByb3BlcnR5UHJvdG90eXBlLmNhY2hlYWJsZSA9IGZ1bmN0aW9u
        KGFGbGFnKSB7CiAgdGhpcy5fY2FjaGVhYmxlID0gYUZsYWcgIT09IGZhbHNl
        OwogIHJldHVybiB0aGlzOwp9OwoKLyoqCiAgQ2FsbCBvbiBhIGNvbXB1dGVk
        IHByb3BlcnR5IHRvIHNldCBpdCBpbnRvIG5vbi1jYWNoZWQgbW9kZS4gV2hl
        biBpbiB0aGlzCiAgbW9kZSB0aGUgY29tcHV0ZWQgcHJvcGVydHkgd2lsbCBu
        b3QgYXV0b21hdGljYWxseSBjYWNoZSB0aGUgcmV0dXJuIHZhbHVlLgoKICBg
        YGBqYXZhc2NyaXB0CiAgTXlBcHAub3V0c2lkZVNlcnZpY2UgPSBFbWJlci5P
        YmplY3QuY3JlYXRlKHsKICAgIHZhbHVlOiBmdW5jdGlvbigpIHsKICAgICAg
        cmV0dXJuIE91dHNpZGVTZXJ2aWNlLmdldFZhbHVlKCk7CiAgICB9LnByb3Bl
        cnR5KCkudm9sYXRpbGUoKQogIH0pOwogIGBgYAoKICBAbWV0aG9kIHZvbGF0
        aWxlCiAgQHJldHVybiB7RW1iZXIuQ29tcHV0ZWRQcm9wZXJ0eX0gdGhpcwog
        IEBjaGFpbmFibGUKKi8KQ29tcHV0ZWRQcm9wZXJ0eVByb3RvdHlwZS52b2xh
        dGlsZSA9IGZ1bmN0aW9uKCkgewogIHJldHVybiB0aGlzLmNhY2hlYWJsZShm
        YWxzZSk7Cn07CgovKioKICBDYWxsIG9uIGEgY29tcHV0ZWQgcHJvcGVydHkg
        dG8gc2V0IGl0IGludG8gcmVhZC1vbmx5IG1vZGUuIFdoZW4gaW4gdGhpcwog
        IG1vZGUgdGhlIGNvbXB1dGVkIHByb3BlcnR5IHdpbGwgdGhyb3cgYW4gZXJy
        b3Igd2hlbiBzZXQuCgogIGBgYGphdmFzY3JpcHQKICBNeUFwcC5wZXJzb24g
        PSBFbWJlci5PYmplY3QuY3JlYXRlKHsKICAgIGd1aWQ6IGZ1bmN0aW9uKCkg
        ewogICAgICByZXR1cm4gJ2d1aWQtZ3VpZC1ndWlkJzsKICAgIH0ucHJvcGVy
        dHkoKS5yZWFkT25seSgpCiAgfSk7CgogIE15QXBwLnBlcnNvbi5zZXQoJ2d1
        aWQnLCAnbmV3LWd1aWQnKTsgLy8gd2lsbCB0aHJvdyBhbiBleGNlcHRpb24K
        ICBgYGAKCiAgQG1ldGhvZCByZWFkT25seQogIEByZXR1cm4ge0VtYmVyLkNv
        bXB1dGVkUHJvcGVydHl9IHRoaXMKICBAY2hhaW5hYmxlCiovCkNvbXB1dGVk
        UHJvcGVydHlQcm90b3R5cGUucmVhZE9ubHkgPSBmdW5jdGlvbihyZWFkT25s
        eSkgewogIHRoaXMuX3JlYWRPbmx5ID0gcmVhZE9ubHkgPT09IHVuZGVmaW5l
        ZCB8fCAhIXJlYWRPbmx5OwogIHJldHVybiB0aGlzOwp9OwoKLyoqCiAgU2V0
        cyB0aGUgZGVwZW5kZW50IGtleXMgb24gdGhpcyBjb21wdXRlZCBwcm9wZXJ0
        eS4gUGFzcyBhbnkgbnVtYmVyIG9mCiAgYXJndW1lbnRzIGNvbnRhaW5pbmcg
        a2V5IHBhdGhzIHRoYXQgdGhpcyBjb21wdXRlZCBwcm9wZXJ0eSBkZXBlbmRz
        IG9uLgoKICBgYGBqYXZhc2NyaXB0CiAgTXlBcHAucHJlc2lkZW50ID0gRW1i
        ZXIuT2JqZWN0LmNyZWF0ZSh7CiAgICBmdWxsTmFtZTogRW1iZXIuY29tcHV0
        ZWQoZnVuY3Rpb24oKSB7CiAgICAgIHJldHVybiB0aGlzLmdldCgnZmlyc3RO
        YW1lJykgKyAnICcgKyB0aGlzLmdldCgnbGFzdE5hbWUnKTsKCiAgICAgIC8v
        IFRlbGwgRW1iZXIgdGhhdCB0aGlzIGNvbXB1dGVkIHByb3BlcnR5IGRlcGVu
        ZHMgb24gZmlyc3ROYW1lCiAgICAgIC8vIGFuZCBsYXN0TmFtZQogICAgfSku
        cHJvcGVydHkoJ2ZpcnN0TmFtZScsICdsYXN0TmFtZScpCiAgfSk7CiAgYGBg
        CgogIEBtZXRob2QgcHJvcGVydHkKICBAcGFyYW0ge1N0cmluZ30gcGF0aCog
        emVybyBvciBtb3JlIHByb3BlcnR5IHBhdGhzCiAgQHJldHVybiB7RW1iZXIu
        Q29tcHV0ZWRQcm9wZXJ0eX0gdGhpcwogIEBjaGFpbmFibGUKKi8KQ29tcHV0
        ZWRQcm9wZXJ0eVByb3RvdHlwZS5wcm9wZXJ0eSA9IGZ1bmN0aW9uKCkgewog
        IHZhciBhZGRBcmc7CgogIAogIHZhciBhcmdzID0gW107CiAgZm9yICh2YXIg
        aSA9IDAsIGwgPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7CiAg
        ICAKICAgICAgYXJncy5wdXNoKGFyZ3VtZW50c1tpXSk7CiAgICAKICB9CiAg
        dGhpcy5fZGVwZW5kZW50S2V5cyA9IGFyZ3M7CiAgcmV0dXJuIHRoaXM7Cn07
        CgovKioKICBJbiBzb21lIGNhc2VzLCB5b3UgbWF5IHdhbnQgdG8gYW5ub3Rh
        dGUgY29tcHV0ZWQgcHJvcGVydGllcyB3aXRoIGFkZGl0aW9uYWwKICBtZXRh
        ZGF0YSBhYm91dCBob3cgdGhleSBmdW5jdGlvbiBvciB3aGF0IHZhbHVlcyB0
        aGV5IG9wZXJhdGUgb24uIEZvciBleGFtcGxlLAogIGNvbXB1dGVkIHByb3Bl
        cnR5IGZ1bmN0aW9ucyBtYXkgY2xvc2Ugb3ZlciB2YXJpYWJsZXMgdGhhdCBh
        cmUgdGhlbiBubyBsb25nZXIKICBhdmFpbGFibGUgZm9yIGludHJvc3BlY3Rp
        b24uCgogIFlvdSBjYW4gcGFzcyBhIGhhc2ggb2YgdGhlc2UgdmFsdWVzIHRv
        IGEgY29tcHV0ZWQgcHJvcGVydHkgbGlrZSB0aGlzOgoKICBgYGAKICBwZXJz
        b246IGZ1bmN0aW9uKCkgewogICAgdmFyIHBlcnNvbklkID0gdGhpcy5nZXQo
        J3BlcnNvbklkJyk7CiAgICByZXR1cm4gQXBwLlBlcnNvbi5jcmVhdGUoeyBp
        ZDogcGVyc29uSWQgfSk7CiAgfS5wcm9wZXJ0eSgpLm1ldGEoeyB0eXBlOiBB
        cHAuUGVyc29uIH0pCiAgYGBgCgogIFRoZSBoYXNoIHRoYXQgeW91IHBhc3Mg
        dG8gdGhlIGBtZXRhKClgIGZ1bmN0aW9uIHdpbGwgYmUgc2F2ZWQgb24gdGhl
        CiAgY29tcHV0ZWQgcHJvcGVydHkgZGVzY3JpcHRvciB1bmRlciB0aGUgYF9t
        ZXRhYCBrZXkuIEVtYmVyIHJ1bnRpbWUKICBleHBvc2VzIGEgcHVibGljIEFQ
        SSBmb3IgcmV0cmlldmluZyB0aGVzZSB2YWx1ZXMgZnJvbSBjbGFzc2VzLAog
        IHZpYSB0aGUgYG1ldGFGb3JQcm9wZXJ0eSgpYCBmdW5jdGlvbi4KCiAgQG1l
        dGhvZCBtZXRhCiAgQHBhcmFtIHtIYXNofSBtZXRhCiAgQGNoYWluYWJsZQoq
        LwoKQ29tcHV0ZWRQcm9wZXJ0eVByb3RvdHlwZS5tZXRhID0gZnVuY3Rpb24o
        bWV0YSkgewogIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAwKSB7CiAgICBy
        ZXR1cm4gdGhpcy5fbWV0YSB8fCB7fTsKICB9IGVsc2UgewogICAgdGhpcy5f
        bWV0YSA9IG1ldGE7CiAgICByZXR1cm4gdGhpczsKICB9Cn07CgovKiBpbXBs
        IGRlc2NyaXB0b3IgQVBJICovCkNvbXB1dGVkUHJvcGVydHlQcm90b3R5cGUu
        ZGlkQ2hhbmdlID0gZnVuY3Rpb24ob2JqLCBrZXlOYW1lKSB7CiAgLy8gX3N1
        c3BlbmRlZCBpcyBzZXQgdmlhIGEgQ1Auc2V0IHRvIGVuc3VyZSB3ZSBkb24n
        dCBjbGVhcgogIC8vIHRoZSBjYWNoZWQgdmFsdWUgc2V0IGJ5IHRoZSBzZXR0
        ZXIKICBpZiAodGhpcy5fY2FjaGVhYmxlICYmIHRoaXMuX3N1c3BlbmRlZCAh
        PT0gb2JqKSB7CiAgICB2YXIgbWV0YSA9IG1ldGFGb3Iob2JqKTsKICAgIGlm
        IChrZXlOYW1lIGluIG1ldGEuY2FjaGUpIHsKICAgICAgZGVsZXRlIG1ldGEu
        Y2FjaGVba2V5TmFtZV07CiAgICAgIHJlbW92ZURlcGVuZGVudEtleXModGhp
        cywgb2JqLCBrZXlOYW1lLCBtZXRhKTsKICAgIH0KICB9Cn07CgpmdW5jdGlv
        biBmaW5pc2hDaGFpbnMoY2hhaW5Ob2RlcykKewogIGZvciAodmFyIGk9MCwg
        bD1jaGFpbk5vZGVzLmxlbmd0aDsgaTxsOyBpKyspIHsKICAgIGNoYWluTm9k
        ZXNbaV0uZGlkQ2hhbmdlKG51bGwpOwogIH0KfQoKLyoqCiAgQWNjZXNzIHRo
        ZSB2YWx1ZSBvZiB0aGUgZnVuY3Rpb24gYmFja2luZyB0aGUgY29tcHV0ZWQg
        cHJvcGVydHkuCiAgSWYgdGhpcyBwcm9wZXJ0eSBoYXMgYWxyZWFkeSBiZWVu
        IGNhY2hlZCwgcmV0dXJuIHRoZSBjYWNoZWQgcmVzdWx0LgogIE90aGVyd2lz
        ZSwgY2FsbCB0aGUgZnVuY3Rpb24gcGFzc2luZyB0aGUgcHJvcGVydHkgbmFt
        ZSBhcyBhbiBhcmd1bWVudC4KCiAgYGBgamF2YXNjcmlwdAogIFBlcnNvbiA9
        IEVtYmVyLk9iamVjdC5leHRlbmQoewogICAgZnVsbE5hbWU6IGZ1bmN0aW9u
        KGtleU5hbWUpIHsKICAgICAgLy8gdGhlIGtleU5hbWUgcGFyYW1ldGVyIGlz
        ICdmdWxsTmFtZScgaW4gdGhpcyBjYXNlLgoKICAgICAgcmV0dXJuIHRoaXMu
        Z2V0KCdmaXJzdE5hbWUnKSArICcgJyArIHRoaXMuZ2V0KCdsYXN0TmFtZScp
        OwogICAgfS5wcm9wZXJ0eSgnZmlyc3ROYW1lJywgJ2xhc3ROYW1lJykKICB9
        KTsKCgogIHZhciB0b20gPSBQZXJzb24uY3JlYXRlKHsKICAgIGZpcnN0TmFt
        ZTogIlRvbSIsCiAgICBsYXN0TmFtZTogIkRhbGUiCiAgfSk7CgogIHRvbS5n
        ZXQoJ2Z1bGxOYW1lJykgLy8gIlRvbSBEYWxlIgogIGBgYAoKICBAbWV0aG9k
        IGdldAogIEBwYXJhbSB7U3RyaW5nfSBrZXlOYW1lIFRoZSBrZXkgYmVpbmcg
        YWNjZXNzZWQuCiAgQHJldHVybiB7T2JqZWN0fSBUaGUgcmV0dXJuIHZhbHVl
        IG9mIHRoZSBmdW5jdGlvbiBiYWNraW5nIHRoZSBDUC4KKi8KQ29tcHV0ZWRQ
        cm9wZXJ0eVByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbihvYmosIGtleU5hbWUp
        IHsKICB2YXIgcmV0LCBjYWNoZSwgbWV0YSwgY2hhaW5Ob2RlczsKICBpZiAo
        dGhpcy5fY2FjaGVhYmxlKSB7CiAgICBtZXRhID0gbWV0YUZvcihvYmopOwog
        ICAgY2FjaGUgPSBtZXRhLmNhY2hlOwogICAgaWYgKGtleU5hbWUgaW4gY2Fj
        aGUpIHsgcmV0dXJuIGNhY2hlW2tleU5hbWVdOyB9CiAgICByZXQgPSBjYWNo
        ZVtrZXlOYW1lXSA9IHRoaXMuZnVuYy5jYWxsKG9iaiwga2V5TmFtZSk7CiAg
        ICBjaGFpbk5vZGVzID0gbWV0YS5jaGFpbldhdGNoZXJzICYmIG1ldGEuY2hh
        aW5XYXRjaGVyc1trZXlOYW1lXTsKICAgIGlmIChjaGFpbk5vZGVzKSB7IGZp
        bmlzaENoYWlucyhjaGFpbk5vZGVzKTsgfQogICAgYWRkRGVwZW5kZW50S2V5
        cyh0aGlzLCBvYmosIGtleU5hbWUsIG1ldGEpOwogIH0gZWxzZSB7CiAgICBy
        ZXQgPSB0aGlzLmZ1bmMuY2FsbChvYmosIGtleU5hbWUpOwogIH0KICByZXR1
        cm4gcmV0Owp9OwoKLyoqCiAgU2V0IHRoZSB2YWx1ZSBvZiBhIGNvbXB1dGVk
        IHByb3BlcnR5LiBJZiB0aGUgZnVuY3Rpb24gdGhhdCBiYWNrcyB5b3VyCiAg
        Y29tcHV0ZWQgcHJvcGVydHkgZG9lcyBub3QgYWNjZXB0IGFyZ3VtZW50cyB0
        aGVuIHRoZSBkZWZhdWx0IGFjdGlvbiBmb3IKICBzZXR0aW5nIHdvdWxkIGJl
        IHRvIGRlZmluZSB0aGUgcHJvcGVydHkgb24gdGhlIGN1cnJlbnQgb2JqZWN0
        LCBhbmQgc2V0CiAgdGhlIHZhbHVlIG9mIHRoZSBwcm9wZXJ0eSB0byB0aGUg
        dmFsdWUgYmVpbmcgc2V0LgoKICBHZW5lcmFsbHkgc3BlYWtpbmcgaWYgeW91
        IGludGVuZCBmb3IgeW91ciBjb21wdXRlZCBwcm9wZXJ0eSB0byBiZSBzZXQK
        ICB5b3VyIGJhY2tpbmcgZnVuY3Rpb24gc2hvdWxkIGFjY2VwdCBlaXRoZXIg
        dHdvIG9yIHRocmVlIGFyZ3VtZW50cy4KCiAgQG1ldGhvZCBzZXQKICBAcGFy
        YW0ge1N0cmluZ30ga2V5TmFtZSBUaGUga2V5IGJlaW5nIGFjY2Vzc2VkLgog
        IEBwYXJhbSB7T2JqZWN0fSBuZXdWYWx1ZSBUaGUgbmV3IHZhbHVlIGJlaW5n
        IGFzc2lnbmVkLgogIEBwYXJhbSB7U3RyaW5nfSBvbGRWYWx1ZSBUaGUgb2xk
        IHZhbHVlIGJlaW5nIHJlcGxhY2VkLgogIEByZXR1cm4ge09iamVjdH0gVGhl
        IHJldHVybiB2YWx1ZSBvZiB0aGUgZnVuY3Rpb24gYmFja2luZyB0aGUgQ1Au
        CiovCkNvbXB1dGVkUHJvcGVydHlQcm90b3R5cGUuc2V0ID0gZnVuY3Rpb24o
        b2JqLCBrZXlOYW1lLCB2YWx1ZSkgewogIHZhciBjYWNoZWFibGUgPSB0aGlz
        Ll9jYWNoZWFibGUsCiAgICAgIGZ1bmMgPSB0aGlzLmZ1bmMsCiAgICAgIG1l
        dGEgPSBtZXRhRm9yKG9iaiwgY2FjaGVhYmxlKSwKICAgICAgd2F0Y2hlZCA9
        IG1ldGEud2F0Y2hpbmdba2V5TmFtZV0sCiAgICAgIG9sZFN1c3BlbmRlZCA9
        IHRoaXMuX3N1c3BlbmRlZCwKICAgICAgaGFkQ2FjaGVkVmFsdWUgPSBmYWxz
        ZSwKICAgICAgY2FjaGUgPSBtZXRhLmNhY2hlLAogICAgICBmdW5jQXJnTGVu
        Z3RoLCBjYWNoZWRWYWx1ZSwgcmV0OwoKICBpZiAodGhpcy5fcmVhZE9ubHkp
        IHsKICAgIHRocm93IG5ldyBFbWJlci5FcnJvcignQ2Fubm90IFNldDogJyAr
        IGtleU5hbWUgKyAnIG9uOiAnICsgb2JqLnRvU3RyaW5nKCkgKTsKICB9Cgog
        IHRoaXMuX3N1c3BlbmRlZCA9IG9iajsKCiAgdHJ5IHsKCiAgICBpZiAoY2Fj
        aGVhYmxlICYmIGNhY2hlLmhhc093blByb3BlcnR5KGtleU5hbWUpKSB7CiAg
        ICAgIGNhY2hlZFZhbHVlID0gY2FjaGVba2V5TmFtZV07CiAgICAgIGhhZENh
        Y2hlZFZhbHVlID0gdHJ1ZTsKICAgIH0KCiAgICAvLyBDaGVjayBpZiB0aGUg
        Q1AgaGFzIGJlZW4gd3JhcHBlZC4gSWYgaWYgaGFzLCB1c2UgdGhlCiAgICAv
        LyBsZW5ndGggZnJvbSB0aGUgd3JhcHBlZCBmdW5jdGlvbi4KICAgIGZ1bmNB
        cmdMZW5ndGggPSAoZnVuYy53cmFwcGVkRnVuY3Rpb24gPyBmdW5jLndyYXBw
        ZWRGdW5jdGlvbi5sZW5ndGggOiBmdW5jLmxlbmd0aCk7CgogICAgLy8gRm9y
        IGJhY2t3YXJkcy1jb21wYXRpYmlsaXR5IHdpdGggY29tcHV0ZWQgcHJvcGVy
        dGllcwogICAgLy8gdGhhdCBjaGVjayBmb3IgYXJndW1lbnRzLmxlbmd0aCA9
        PT0gMiB0byBkZXRlcm1pbmUgaWYKICAgIC8vIHRoZXkgYXJlIGJlaW5nIGdl
        dCBvciBzZXQsIG9ubHkgcGFzcyB0aGUgb2xkIGNhY2hlZAogICAgLy8gdmFs
        dWUgaWYgdGhlIGNvbXB1dGVkIHByb3BlcnR5IG9wdHMgaW50byBhIHRoaXJk
        CiAgICAvLyBhcmd1bWVudC4KICAgIGlmIChmdW5jQXJnTGVuZ3RoID09PSAz
        KSB7CiAgICAgIHJldCA9IGZ1bmMuY2FsbChvYmosIGtleU5hbWUsIHZhbHVl
        LCBjYWNoZWRWYWx1ZSk7CiAgICB9IGVsc2UgaWYgKGZ1bmNBcmdMZW5ndGgg
        PT09IDIpIHsKICAgICAgcmV0ID0gZnVuYy5jYWxsKG9iaiwga2V5TmFtZSwg
        dmFsdWUpOwogICAgfSBlbHNlIHsKICAgICAgRW1iZXIuZGVmaW5lUHJvcGVy
        dHkob2JqLCBrZXlOYW1lLCBudWxsLCBjYWNoZWRWYWx1ZSk7CiAgICAgIEVt
        YmVyLnNldChvYmosIGtleU5hbWUsIHZhbHVlKTsKICAgICAgcmV0dXJuOwog
        ICAgfQoKICAgIGlmIChoYWRDYWNoZWRWYWx1ZSAmJiBjYWNoZWRWYWx1ZSA9
        PT0gcmV0KSB7IHJldHVybjsgfQoKICAgIGlmICh3YXRjaGVkKSB7IEVtYmVy
        LnByb3BlcnR5V2lsbENoYW5nZShvYmosIGtleU5hbWUpOyB9CgogICAgaWYg
        KGhhZENhY2hlZFZhbHVlKSB7CiAgICAgIGRlbGV0ZSBjYWNoZVtrZXlOYW1l
        XTsKICAgIH0KCiAgICBpZiAoY2FjaGVhYmxlKSB7CiAgICAgIGlmICghaGFk
        Q2FjaGVkVmFsdWUpIHsKICAgICAgICBhZGREZXBlbmRlbnRLZXlzKHRoaXMs
        IG9iaiwga2V5TmFtZSwgbWV0YSk7CiAgICAgIH0KICAgICAgY2FjaGVba2V5
        TmFtZV0gPSByZXQ7CiAgICB9CgogICAgaWYgKHdhdGNoZWQpIHsgRW1iZXIu
        cHJvcGVydHlEaWRDaGFuZ2Uob2JqLCBrZXlOYW1lKTsgfQogIH0gZmluYWxs
        eSB7CiAgICB0aGlzLl9zdXNwZW5kZWQgPSBvbGRTdXNwZW5kZWQ7CiAgfQog
        IHJldHVybiByZXQ7Cn07CgovKiBjYWxsZWQgYmVmb3JlIHByb3BlcnR5IGlz
        IG92ZXJyaWRkZW4gKi8KQ29tcHV0ZWRQcm9wZXJ0eVByb3RvdHlwZS50ZWFy
        ZG93biA9IGZ1bmN0aW9uKG9iaiwga2V5TmFtZSkgewogIHZhciBtZXRhID0g
        bWV0YUZvcihvYmopOwoKICBpZiAoa2V5TmFtZSBpbiBtZXRhLmNhY2hlKSB7
        CiAgICByZW1vdmVEZXBlbmRlbnRLZXlzKHRoaXMsIG9iaiwga2V5TmFtZSwg
        bWV0YSk7CiAgfQoKICBpZiAodGhpcy5fY2FjaGVhYmxlKSB7IGRlbGV0ZSBt
        ZXRhLmNhY2hlW2tleU5hbWVdOyB9CgogIHJldHVybiBudWxsOyAvLyBubyB2
        YWx1ZSB0byByZXN0b3JlCn07CgoKLyoqCiAgVGhpcyBoZWxwZXIgcmV0dXJu
        cyBhIG5ldyBwcm9wZXJ0eSBkZXNjcmlwdG9yIHRoYXQgd3JhcHMgdGhlIHBh
        c3NlZAogIGNvbXB1dGVkIHByb3BlcnR5IGZ1bmN0aW9uLiBZb3UgY2FuIHVz
        ZSB0aGlzIGhlbHBlciB0byBkZWZpbmUgcHJvcGVydGllcwogIHdpdGggbWl4
        aW5zIG9yIHZpYSBgRW1iZXIuZGVmaW5lUHJvcGVydHkoKWAuCgogIFRoZSBm
        dW5jdGlvbiB5b3UgcGFzcyB3aWxsIGJlIHVzZWQgdG8gYm90aCBnZXQgYW5k
        IHNldCBwcm9wZXJ0eSB2YWx1ZXMuCiAgVGhlIGZ1bmN0aW9uIHNob3VsZCBh
        Y2NlcHQgdHdvIHBhcmFtZXRlcnMsIGtleSBhbmQgdmFsdWUuIElmIHZhbHVl
        IGlzIG5vdAogIHVuZGVmaW5lZCB5b3Ugc2hvdWxkIHNldCB0aGUgdmFsdWUg
        Zmlyc3QuIEluIGVpdGhlciBjYXNlIHJldHVybiB0aGUKICBjdXJyZW50IHZh
        bHVlIG9mIHRoZSBwcm9wZXJ0eS4KICBAbWV0aG9kIGNvbXB1dGVkCiAgQGZv
        ciBFbWJlcgogIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGNvbXB1dGVk
        IHByb3BlcnR5IGZ1bmN0aW9uLgogIEByZXR1cm4ge0VtYmVyLkNvbXB1dGVk
        UHJvcGVydHl9IHByb3BlcnR5IGRlc2NyaXB0b3IgaW5zdGFuY2UKKi8KRW1i
        ZXIuY29tcHV0ZWQgPSBmdW5jdGlvbihmdW5jKSB7CiAgdmFyIGFyZ3M7Cgog
        IGlmIChhcmd1bWVudHMubGVuZ3RoID4gMSkgewogICAgYXJncyA9IGFfc2xp
        Y2UuY2FsbChhcmd1bWVudHMsIDAsIC0xKTsKICAgIGZ1bmMgPSBhX3NsaWNl
        LmNhbGwoYXJndW1lbnRzLCAtMSlbMF07CiAgfQoKICBpZiAodHlwZW9mIGZ1
        bmMgIT09ICJmdW5jdGlvbiIpIHsKICAgIHRocm93IG5ldyBFbWJlci5FcnJv
        cigiQ29tcHV0ZWQgUHJvcGVydHkgZGVjbGFyZWQgd2l0aG91dCBhIHByb3Bl
        cnR5IGZ1bmN0aW9uIik7CiAgfQoKICB2YXIgY3AgPSBuZXcgQ29tcHV0ZWRQ
        cm9wZXJ0eShmdW5jKTsKCiAgaWYgKGFyZ3MpIHsKICAgIGNwLnByb3BlcnR5
        LmFwcGx5KGNwLCBhcmdzKTsKICB9CgogIHJldHVybiBjcDsKfTsKCi8qKgog
        IFJldHVybnMgdGhlIGNhY2hlZCB2YWx1ZSBmb3IgYSBwcm9wZXJ0eSwgaWYg
        b25lIGV4aXN0cy4KICBUaGlzIGNhbiBiZSB1c2VmdWwgZm9yIHBlZWtpbmcg
        YXQgdGhlIHZhbHVlIG9mIGEgY29tcHV0ZWQKICBwcm9wZXJ0eSB0aGF0IGlz
        IGdlbmVyYXRlZCBsYXppbHksIHdpdGhvdXQgYWNjaWRlbnRhbGx5IGNhdXNp
        bmcKICBpdCB0byBiZSBjcmVhdGVkLgoKICBAbWV0aG9kIGNhY2hlRm9yCiAg
        QGZvciBFbWJlcgogIEBwYXJhbSB7T2JqZWN0fSBvYmogdGhlIG9iamVjdCB3
        aG9zZSBwcm9wZXJ0eSB5b3Ugd2FudCB0byBjaGVjawogIEBwYXJhbSB7U3Ry
        aW5nfSBrZXkgdGhlIG5hbWUgb2YgdGhlIHByb3BlcnR5IHdob3NlIGNhY2hl
        ZCB2YWx1ZSB5b3Ugd2FudAogICAgdG8gcmV0dXJuCiAgQHJldHVybiB7Kn0g
        dGhlIGNhY2hlZCB2YWx1ZQoqLwpFbWJlci5jYWNoZUZvciA9IGZ1bmN0aW9u
        IGNhY2hlRm9yKG9iaiwga2V5KSB7CiAgdmFyIGNhY2hlID0gbWV0YUZvcihv
        YmosIGZhbHNlKS5jYWNoZTsKCiAgaWYgKGNhY2hlICYmIGtleSBpbiBjYWNo
        ZSkgewogICAgcmV0dXJuIGNhY2hlW2tleV07CiAgfQp9OwoKZnVuY3Rpb24g
        Z2V0UHJvcGVydGllcyhzZWxmLCBwcm9wZXJ0eU5hbWVzKSB7CiAgdmFyIHJl
        dCA9IHt9OwogIGZvcih2YXIgaSA9IDA7IGkgPCBwcm9wZXJ0eU5hbWVzLmxl
        bmd0aDsgaSsrKSB7CiAgICByZXRbcHJvcGVydHlOYW1lc1tpXV0gPSBnZXQo
        c2VsZiwgcHJvcGVydHlOYW1lc1tpXSk7CiAgfQogIHJldHVybiByZXQ7Cn0K
        CmZ1bmN0aW9uIHJlZ2lzdGVyQ29tcHV0ZWQobmFtZSwgbWFjcm8pIHsKICBF
        bWJlci5jb21wdXRlZFtuYW1lXSA9IGZ1bmN0aW9uKGRlcGVuZGVudEtleSkg
        ewogICAgdmFyIGFyZ3MgPSBhX3NsaWNlLmNhbGwoYXJndW1lbnRzKTsKICAg
        IHJldHVybiBFbWJlci5jb21wdXRlZChkZXBlbmRlbnRLZXksIGZ1bmN0aW9u
        KCkgewogICAgICByZXR1cm4gbWFjcm8uYXBwbHkodGhpcywgYXJncyk7CiAg
        ICB9KTsKICB9Owp9CgpmdW5jdGlvbiByZWdpc3RlckNvbXB1dGVkV2l0aFBy
        b3BlcnRpZXMobmFtZSwgbWFjcm8pIHsKICBFbWJlci5jb21wdXRlZFtuYW1l
        XSA9IGZ1bmN0aW9uKCkgewogICAgdmFyIHByb3BlcnRpZXMgPSBhX3NsaWNl
        LmNhbGwoYXJndW1lbnRzKTsKCiAgICB2YXIgY29tcHV0ZWQgPSBFbWJlci5j
        b21wdXRlZChmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIG1hY3JvLmFwcGx5
        KHRoaXMsIFtnZXRQcm9wZXJ0aWVzKHRoaXMsIHByb3BlcnRpZXMpXSk7CiAg
        ICB9KTsKCiAgICByZXR1cm4gY29tcHV0ZWQucHJvcGVydHkuYXBwbHkoY29t
        cHV0ZWQsIHByb3BlcnRpZXMpOwogIH07Cn0KCi8qKgogIEEgY29tcHV0ZWQg
        cHJvcGVydHkgdGhhdCByZXR1cm5zIHRydWUgaWYgdGhlIHZhbHVlIG9mIHRo
        ZSBkZXBlbmRlbnQKICBwcm9wZXJ0eSBpcyBudWxsLCBhbiBlbXB0eSBzdHJp
        bmcsIGVtcHR5IGFycmF5LCBvciBlbXB0eSBmdW5jdGlvbi4KCiAgTm90ZTog
        V2hlbiB1c2luZyBgRW1iZXIuY29tcHV0ZWQuZW1wdHlgIHRvIHdhdGNoIGFu
        IGFycmF5IG1ha2Ugc3VyZSB0bwogIHVzZSB0aGUgYGFycmF5LltdYCBzeW50
        YXggc28gdGhlIGNvbXB1dGVkIGNhbiBzdWJzY3JpYmUgdG8gdHJhbnNpdGlv
        bnMKICBmcm9tIGVtcHR5IHRvIG5vbi1lbXB0eSBzdGF0ZXMuCgogIEV4YW1w
        bGUKCiAgYGBgamF2YXNjcmlwdAogIHZhciBUb0RvTGlzdCA9IEVtYmVyLk9i
        amVjdC5leHRlbmQoewogICAgZG9uZTogRW1iZXIuY29tcHV0ZWQuZW1wdHko
        J3RvZG9zLltdJykgLy8gZGV0ZWN0IGFycmF5IGNoYW5nZXMKICB9KTsKICB2
        YXIgdG9kb0xpc3QgPSBUb0RvTGlzdC5jcmVhdGUoe3RvZG9zOiBbJ1VuaXQg
        VGVzdCcsICdEb2N1bWVudGF0aW9uJywgJ1JlbGVhc2UnXX0pOwogIHRvZG9M
        aXN0LmdldCgnZG9uZScpOyAvLyBmYWxzZQogIHRvZG9MaXN0LmdldCgndG9k
        b3MnKS5jbGVhcigpOyAvLyBbXQogIHRvZG9MaXN0LmdldCgnZG9uZScpOyAv
        LyB0cnVlCiAgYGBgCgogIEBtZXRob2QgY29tcHV0ZWQuZW1wdHkKICBAZm9y
        IEVtYmVyCiAgQHBhcmFtIHtTdHJpbmd9IGRlcGVuZGVudEtleQogIEByZXR1
        cm4ge0VtYmVyLkNvbXB1dGVkUHJvcGVydHl9IGNvbXB1dGVkIHByb3BlcnR5
        IHdoaWNoIG5lZ2F0ZQogIHRoZSBvcmlnaW5hbCB2YWx1ZSBmb3IgcHJvcGVy
        dHkKKi8KcmVnaXN0ZXJDb21wdXRlZCgnZW1wdHknLCBmdW5jdGlvbihkZXBl
        bmRlbnRLZXkpIHsKICByZXR1cm4gRW1iZXIuaXNFbXB0eShnZXQodGhpcywg
        ZGVwZW5kZW50S2V5KSk7Cn0pOwoKLyoqCiAgQSBjb21wdXRlZCBwcm9wZXJ0
        eSB0aGF0IHJldHVybnMgdHJ1ZSBpZiB0aGUgdmFsdWUgb2YgdGhlIGRlcGVu
        ZGVudAogIHByb3BlcnR5IGlzIE5PVCBudWxsLCBhbiBlbXB0eSBzdHJpbmcs
        IGVtcHR5IGFycmF5LCBvciBlbXB0eSBmdW5jdGlvbi4KCiAgRXhhbXBsZQoK
        ICBgYGBqYXZhc2NyaXB0CiAgdmFyIEhhbXBzdGVyID0gRW1iZXIuT2JqZWN0
        LmV4dGVuZCh7CiAgICBoYXNTdHVmZjogRW1iZXIuY29tcHV0ZWQubm90RW1w
        dHkoJ2JhY2twYWNrJykKICB9KTsKICB2YXIgaGFtcHN0ZXIgPSBIYW1wc3Rl
        ci5jcmVhdGUoe2JhY2twYWNrOiBbJ0Zvb2QnLCAnU2xlZXBpbmcgQmFnJywg
        J1RlbnQnXX0pOwogIGhhbXBzdGVyLmdldCgnaGFzU3R1ZmYnKTsgLy8gdHJ1
        ZQogIGhhbXBzdGVyLmdldCgnYmFja3BhY2snKS5jbGVhcigpOyAvLyBbXQog
        IGhhbXBzdGVyLmdldCgnaGFzU3R1ZmYnKTsgLy8gZmFsc2UKICBgYGAKCiAg
        QG1ldGhvZCBjb21wdXRlZC5ub3RFbXB0eQogIEBmb3IgRW1iZXIKICBAcGFy
        YW0ge1N0cmluZ30gZGVwZW5kZW50S2V5CiAgQHJldHVybiB7RW1iZXIuQ29t
        cHV0ZWRQcm9wZXJ0eX0gY29tcHV0ZWQgcHJvcGVydHkgd2hpY2ggcmV0dXJu
        cyB0cnVlIGlmCiAgb3JpZ2luYWwgdmFsdWUgZm9yIHByb3BlcnR5IGlzIG5v
        dCBlbXB0eS4KKi8KcmVnaXN0ZXJDb21wdXRlZCgnbm90RW1wdHknLCBmdW5j
        dGlvbihkZXBlbmRlbnRLZXkpIHsKICByZXR1cm4gIUVtYmVyLmlzRW1wdHko
        Z2V0KHRoaXMsIGRlcGVuZGVudEtleSkpOwp9KTsKCi8qKgogIEEgY29tcHV0
        ZWQgcHJvcGVydHkgdGhhdCByZXR1cm5zIHRydWUgaWYgdGhlIHZhbHVlIG9m
        IHRoZSBkZXBlbmRlbnQKICBwcm9wZXJ0eSBpcyBudWxsIG9yIHVuZGVmaW5l
        ZC4gVGhpcyBhdm9pZHMgZXJyb3JzIGZyb20gSlNMaW50IGNvbXBsYWluaW5n
        CiAgYWJvdXQgdXNlIG9mID09LCB3aGljaCBjYW4gYmUgdGVjaG5pY2FsbHkg
        Y29uZnVzaW5nLgoKICBFeGFtcGxlCgogIGBgYGphdmFzY3JpcHQKICB2YXIg
        SGFtcHN0ZXIgPSBFbWJlci5PYmplY3QuZXh0ZW5kKHsKICAgIGlzSHVuZ3J5
        OiBFbWJlci5jb21wdXRlZC5ub25lKCdmb29kJykKICB9KTsKICB2YXIgaGFt
        cHN0ZXIgPSBIYW1wc3Rlci5jcmVhdGUoKTsKICBoYW1wc3Rlci5nZXQoJ2lz
        SHVuZ3J5Jyk7IC8vIHRydWUKICBoYW1wc3Rlci5zZXQoJ2Zvb2QnLCAnQmFu
        YW5hJyk7CiAgaGFtcHN0ZXIuZ2V0KCdpc0h1bmdyeScpOyAvLyBmYWxzZQog
        IGhhbXBzdGVyLnNldCgnZm9vZCcsIG51bGwpOwogIGhhbXBzdGVyLmdldCgn
        aXNIdW5ncnknKTsgLy8gdHJ1ZQogIGBgYAoKICBAbWV0aG9kIGNvbXB1dGVk
        Lm5vbmUKICBAZm9yIEVtYmVyCiAgQHBhcmFtIHtTdHJpbmd9IGRlcGVuZGVu
        dEtleQogIEByZXR1cm4ge0VtYmVyLkNvbXB1dGVkUHJvcGVydHl9IGNvbXB1
        dGVkIHByb3BlcnR5IHdoaWNoCiAgcmV0dXJucyB0cnVlIGlmIG9yaWdpbmFs
        IHZhbHVlIGZvciBwcm9wZXJ0eSBpcyBudWxsIG9yIHVuZGVmaW5lZC4KKi8K
        cmVnaXN0ZXJDb21wdXRlZCgnbm9uZScsIGZ1bmN0aW9uKGRlcGVuZGVudEtl
        eSkgewogIHJldHVybiBFbWJlci5pc05vbmUoZ2V0KHRoaXMsIGRlcGVuZGVu
        dEtleSkpOwp9KTsKCi8qKgogIEEgY29tcHV0ZWQgcHJvcGVydHkgdGhhdCBy
        ZXR1cm5zIHRoZSBpbnZlcnNlIGJvb2xlYW4gdmFsdWUKICBvZiB0aGUgb3Jp
        Z2luYWwgdmFsdWUgZm9yIHRoZSBkZXBlbmRlbnQgcHJvcGVydHkuCgogIEV4
        YW1wbGUKCiAgYGBgamF2YXNjcmlwdAogIHZhciBVc2VyID0gRW1iZXIuT2Jq
        ZWN0LmV4dGVuZCh7CiAgICBpc0Fub255bW91czogRW1iZXIuY29tcHV0ZWQu
        bm90KCdsb2dnZWRJbicpCiAgfSk7CiAgdmFyIHVzZXIgPSBVc2VyLmNyZWF0
        ZSh7bG9nZ2VkSW46IGZhbHNlfSk7CiAgdXNlci5nZXQoJ2lzQW5vbnltb3Vz
        Jyk7IC8vIHRydWUKICB1c2VyLnNldCgnbG9nZ2VkSW4nLCB0cnVlKTsKICB1
        c2VyLmdldCgnaXNBbm9ueW1vdXMnKTsgLy8gZmFsc2UKICBgYGAKCiAgQG1l
        dGhvZCBjb21wdXRlZC5ub3QKICBAZm9yIEVtYmVyCiAgQHBhcmFtIHtTdHJp
        bmd9IGRlcGVuZGVudEtleQogIEByZXR1cm4ge0VtYmVyLkNvbXB1dGVkUHJv
        cGVydHl9IGNvbXB1dGVkIHByb3BlcnR5IHdoaWNoIHJldHVybnMKICBpbnZl
        cnNlIG9mIHRoZSBvcmlnaW5hbCB2YWx1ZSBmb3IgcHJvcGVydHkKKi8KcmVn
        aXN0ZXJDb21wdXRlZCgnbm90JywgZnVuY3Rpb24oZGVwZW5kZW50S2V5KSB7
        CiAgcmV0dXJuICFnZXQodGhpcywgZGVwZW5kZW50S2V5KTsKfSk7CgovKioK
        ICBBIGNvbXB1dGVkIHByb3BlcnR5IHRoYXQgY29udmVydHMgdGhlIHByb3Zp
        ZGVkIGRlcGVuZGVudCBwcm9wZXJ0eQogIGludG8gYSBib29sZWFuIHZhbHVl
        LgoKICBgYGBqYXZhc2NyaXB0CiAgdmFyIEhhbXBzdGVyID0gRW1iZXIuT2Jq
        ZWN0LmV4dGVuZCh7CiAgICBoYXNCYW5hbmFzOiBFbWJlci5jb21wdXRlZC5i
        b29sKCdudW1CYW5hbmFzJykKICB9KTsKICB2YXIgaGFtcHN0ZXIgPSBIYW1w
        c3Rlci5jcmVhdGUoKTsKICBoYW1wc3Rlci5nZXQoJ2hhc0JhbmFuYXMnKTsg
        Ly8gZmFsc2UKICBoYW1wc3Rlci5zZXQoJ251bUJhbmFuYXMnLCAwKTsKICBo
        YW1wc3Rlci5nZXQoJ2hhc0JhbmFuYXMnKTsgLy8gZmFsc2UKICBoYW1wc3Rl
        ci5zZXQoJ251bUJhbmFuYXMnLCAxKTsKICBoYW1wc3Rlci5nZXQoJ2hhc0Jh
        bmFuYXMnKTsgLy8gdHJ1ZQogIGhhbXBzdGVyLnNldCgnbnVtQmFuYW5hcycs
        IG51bGwpOwogIGhhbXBzdGVyLmdldCgnaGFzQmFuYW5hcycpOyAvLyBmYWxz
        ZQogIGBgYAoKICBAbWV0aG9kIGNvbXB1dGVkLmJvb2wKICBAZm9yIEVtYmVy
        CiAgQHBhcmFtIHtTdHJpbmd9IGRlcGVuZGVudEtleQogIEByZXR1cm4ge0Vt
        YmVyLkNvbXB1dGVkUHJvcGVydHl9IGNvbXB1dGVkIHByb3BlcnR5IHdoaWNo
        IGNvbnZlcnRzCiAgdG8gYm9vbGVhbiB0aGUgb3JpZ2luYWwgdmFsdWUgZm9y
        IHByb3BlcnR5CiovCnJlZ2lzdGVyQ29tcHV0ZWQoJ2Jvb2wnLCBmdW5jdGlv
        bihkZXBlbmRlbnRLZXkpIHsKICByZXR1cm4gISFnZXQodGhpcywgZGVwZW5k
        ZW50S2V5KTsKfSk7CgovKioKICBBIGNvbXB1dGVkIHByb3BlcnR5IHdoaWNo
        IG1hdGNoZXMgdGhlIG9yaWdpbmFsIHZhbHVlIGZvciB0aGUKICBkZXBlbmRl
        bnQgcHJvcGVydHkgYWdhaW5zdCBhIGdpdmVuIFJlZ0V4cCwgcmV0dXJuaW5n
        IGB0cnVlYAogIGlmIHRoZXkgdmFsdWVzIG1hdGNoZXMgdGhlIFJlZ0V4cCBh
        bmQgYGZhbHNlYCBpZiBpdCBkb2VzIG5vdC4KCiAgRXhhbXBsZQoKICBgYGBq
        YXZhc2NyaXB0CiAgdmFyIFVzZXIgPSBFbWJlci5PYmplY3QuZXh0ZW5kKHsK
        ICAgIGhhc1ZhbGlkRW1haWw6IEVtYmVyLmNvbXB1dGVkLm1hdGNoKCdlbWFp
        bCcsIC9eLitALitcLi4rJC8pCiAgfSk7CiAgdmFyIHVzZXIgPSBVc2VyLmNy
        ZWF0ZSh7bG9nZ2VkSW46IGZhbHNlfSk7CiAgdXNlci5nZXQoJ2hhc1ZhbGlk
        RW1haWwnKTsgLy8gZmFsc2UKICB1c2VyLnNldCgnZW1haWwnLCAnJyk7CiAg
        dXNlci5nZXQoJ2hhc1ZhbGlkRW1haWwnKTsgLy8gZmFsc2UKICB1c2VyLnNl
        dCgnZW1haWwnLCAnZW1iZXJfaGFtcHN0ZXJAZXhhbXBsZS5jb20nKTsKICB1
        c2VyLmdldCgnaGFzVmFsaWRFbWFpbCcpOyAvLyB0cnVlCiAgYGBgCgogIEBt
        ZXRob2QgY29tcHV0ZWQubWF0Y2gKICBAZm9yIEVtYmVyCiAgQHBhcmFtIHtT
        dHJpbmd9IGRlcGVuZGVudEtleQogIEBwYXJhbSB7UmVnRXhwfSByZWdleHAK
        ICBAcmV0dXJuIHtFbWJlci5Db21wdXRlZFByb3BlcnR5fSBjb21wdXRlZCBw
        cm9wZXJ0eSB3aGljaCBtYXRjaAogIHRoZSBvcmlnaW5hbCB2YWx1ZSBmb3Ig
        cHJvcGVydHkgYWdhaW5zdCBhIGdpdmVuIFJlZ0V4cAoqLwpyZWdpc3RlckNv
        bXB1dGVkKCdtYXRjaCcsIGZ1bmN0aW9uKGRlcGVuZGVudEtleSwgcmVnZXhw
        KSB7CiAgdmFyIHZhbHVlID0gZ2V0KHRoaXMsIGRlcGVuZGVudEtleSk7CiAg
        cmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycgPyAhIXZhbHVlLm1h
        dGNoKHJlZ2V4cCkgOiBmYWxzZTsKfSk7CgovKioKICBBIGNvbXB1dGVkIHBy
        b3BlcnR5IHRoYXQgcmV0dXJucyB0cnVlIGlmIHRoZSBwcm92aWRlZCBkZXBl
        bmRlbnQgcHJvcGVydHkKICBpcyBlcXVhbCB0byB0aGUgZ2l2ZW4gdmFsdWUu
        CgogIEV4YW1wbGUKCiAgYGBgamF2YXNjcmlwdAogIHZhciBIYW1wc3RlciA9
        IEVtYmVyLk9iamVjdC5leHRlbmQoewogICAgbmFwVGltZTogRW1iZXIuY29t
        cHV0ZWQuZXF1YWwoJ3N0YXRlJywgJ3NsZWVweScpCiAgfSk7CiAgdmFyIGhh
        bXBzdGVyID0gSGFtcHN0ZXIuY3JlYXRlKCk7CiAgaGFtcHN0ZXIuZ2V0KCdu
        YXBUaW1lJyk7IC8vIGZhbHNlCiAgaGFtcHN0ZXIuc2V0KCdzdGF0ZScsICdz
        bGVlcHknKTsKICBoYW1wc3Rlci5nZXQoJ25hcFRpbWUnKTsgLy8gdHJ1ZQog
        IGhhbXBzdGVyLnNldCgnc3RhdGUnLCAnaHVuZ3J5Jyk7CiAgaGFtcHN0ZXIu
        Z2V0KCduYXBUaW1lJyk7IC8vIGZhbHNlCiAgYGBgCgogIEBtZXRob2QgY29t
        cHV0ZWQuZXF1YWwKICBAZm9yIEVtYmVyCiAgQHBhcmFtIHtTdHJpbmd9IGRl
        cGVuZGVudEtleQogIEBwYXJhbSB7U3RyaW5nfE51bWJlcnxPYmplY3R9IHZh
        bHVlCiAgQHJldHVybiB7RW1iZXIuQ29tcHV0ZWRQcm9wZXJ0eX0gY29tcHV0
        ZWQgcHJvcGVydHkgd2hpY2ggcmV0dXJucyB0cnVlIGlmCiAgdGhlIG9yaWdp
        bmFsIHZhbHVlIGZvciBwcm9wZXJ0eSBpcyBlcXVhbCB0byB0aGUgZ2l2ZW4g
        dmFsdWUuCiovCnJlZ2lzdGVyQ29tcHV0ZWQoJ2VxdWFsJywgZnVuY3Rpb24o
        ZGVwZW5kZW50S2V5LCB2YWx1ZSkgewogIHJldHVybiBnZXQodGhpcywgZGVw
        ZW5kZW50S2V5KSA9PT0gdmFsdWU7Cn0pOwoKLyoqCiAgQSBjb21wdXRlZCBw
        cm9wZXJ0eSB0aGF0IHJldHVybnMgdHJ1ZSBpZiB0aGUgcHJvdmllZCBkZXBl
        bmRlbnQgcHJvcGVydHkKICBpcyBncmVhdGVyIHRoYW4gdGhlIHByb3ZpZGVk
        IHZhbHVlLgoKICBFeGFtcGxlCgogIGBgYGphdmFzY3JpcHQKICB2YXIgSGFt
        cHN0ZXIgPSBFbWJlci5PYmplY3QuZXh0ZW5kKHsKICAgIGhhc1Rvb01hbnlC
        YW5hbmFzOiBFbWJlci5jb21wdXRlZC5ndCgnbnVtQmFuYW5hcycsIDEwKQog
        IH0pOwogIHZhciBoYW1wc3RlciA9IEhhbXBzdGVyLmNyZWF0ZSgpOwogIGhh
        bXBzdGVyLmdldCgnaGFzVG9vTWFueUJhbmFuYXMnKTsgLy8gZmFsc2UKICBo
        YW1wc3Rlci5zZXQoJ251bUJhbmFuYXMnLCAzKTsKICBoYW1wc3Rlci5nZXQo
        J2hhc1Rvb01hbnlCYW5hbmFzJyk7IC8vIGZhbHNlCiAgaGFtcHN0ZXIuc2V0
        KCdudW1CYW5hbmFzJywgMTEpOwogIGhhbXBzdGVyLmdldCgnaGFzVG9vTWFu
        eUJhbmFuYXMnKTsgLy8gdHJ1ZQogIGBgYAoKICBAbWV0aG9kIGNvbXB1dGVk
        Lmd0CiAgQGZvciBFbWJlcgogIEBwYXJhbSB7U3RyaW5nfSBkZXBlbmRlbnRL
        ZXkKICBAcGFyYW0ge051bWJlcn0gdmFsdWUKICBAcmV0dXJuIHtFbWJlci5D
        b21wdXRlZFByb3BlcnR5fSBjb21wdXRlZCBwcm9wZXJ0eSB3aGljaCByZXR1
        cm5zIHRydWUgaWYKICB0aGUgb3JpZ2luYWwgdmFsdWUgZm9yIHByb3BlcnR5
        IGlzIGdyZWF0ZXIgdGhlbiBnaXZlbiB2YWx1ZS4KKi8KcmVnaXN0ZXJDb21w
        dXRlZCgnZ3QnLCBmdW5jdGlvbihkZXBlbmRlbnRLZXksIHZhbHVlKSB7CiAg
        cmV0dXJuIGdldCh0aGlzLCBkZXBlbmRlbnRLZXkpID4gdmFsdWU7Cn0pOwoK
        LyoqCiAgQSBjb21wdXRlZCBwcm9wZXJ0eSB0aGF0IHJldHVybnMgdHJ1ZSBp
        ZiB0aGUgcHJvdmlkZWQgZGVwZW5kZW50IHByb3BlcnR5CiAgaXMgZ3JlYXRl
        ciB0aGFuIG9yIGVxdWFsIHRvIHRoZSBwcm92aWRlZCB2YWx1ZS4KCiAgRXhh
        bXBsZQoKICBgYGBqYXZhc2NyaXB0CiAgdmFyIEhhbXBzdGVyID0gRW1iZXIu
        T2JqZWN0LmV4dGVuZCh7CiAgICBoYXNUb29NYW55QmFuYW5hczogRW1iZXIu
        Y29tcHV0ZWQuZ3RlKCdudW1CYW5hbmFzJywgMTApCiAgfSk7CiAgdmFyIGhh
        bXBzdGVyID0gSGFtcHN0ZXIuY3JlYXRlKCk7CiAgaGFtcHN0ZXIuZ2V0KCdo
        YXNUb29NYW55QmFuYW5hcycpOyAvLyBmYWxzZQogIGhhbXBzdGVyLnNldCgn
        bnVtQmFuYW5hcycsIDMpOwogIGhhbXBzdGVyLmdldCgnaGFzVG9vTWFueUJh
        bmFuYXMnKTsgLy8gZmFsc2UKICBoYW1wc3Rlci5zZXQoJ251bUJhbmFuYXMn
        LCAxMCk7CiAgaGFtcHN0ZXIuZ2V0KCdoYXNUb29NYW55QmFuYW5hcycpOyAv
        LyB0cnVlCiAgYGBgCgogIEBtZXRob2QgY29tcHV0ZWQuZ3RlCiAgQGZvciBF
        bWJlcgogIEBwYXJhbSB7U3RyaW5nfSBkZXBlbmRlbnRLZXkKICBAcGFyYW0g
        e051bWJlcn0gdmFsdWUKICBAcmV0dXJuIHtFbWJlci5Db21wdXRlZFByb3Bl
        cnR5fSBjb21wdXRlZCBwcm9wZXJ0eSB3aGljaCByZXR1cm5zIHRydWUgaWYK
        ICB0aGUgb3JpZ2luYWwgdmFsdWUgZm9yIHByb3BlcnR5IGlzIGdyZWF0ZXIg
        b3IgZXF1YWwgdGhlbiBnaXZlbiB2YWx1ZS4KKi8KcmVnaXN0ZXJDb21wdXRl
        ZCgnZ3RlJywgZnVuY3Rpb24oZGVwZW5kZW50S2V5LCB2YWx1ZSkgewogIHJl
        dHVybiBnZXQodGhpcywgZGVwZW5kZW50S2V5KSA+PSB2YWx1ZTsKfSk7Cgov
        KioKICBBIGNvbXB1dGVkIHByb3BlcnR5IHRoYXQgcmV0dXJucyB0cnVlIGlm
        IHRoZSBwcm92aWRlZCBkZXBlbmRlbnQgcHJvcGVydHkKICBpcyBsZXNzIHRo
        YW4gdGhlIHByb3ZpZGVkIHZhbHVlLgoKICBFeGFtcGxlCgogIGBgYGphdmFz
        Y3JpcHQKICB2YXIgSGFtcHN0ZXIgPSBFbWJlci5PYmplY3QuZXh0ZW5kKHsK
        ICAgIG5lZWRzTW9yZUJhbmFuYXM6IEVtYmVyLmNvbXB1dGVkLmx0KCdudW1C
        YW5hbmFzJywgMykKICB9KTsKICB2YXIgaGFtcHN0ZXIgPSBIYW1wc3Rlci5j
        cmVhdGUoKTsKICBoYW1wc3Rlci5nZXQoJ25lZWRzTW9yZUJhbmFuYXMnKTsg
        Ly8gdHJ1ZQogIGhhbXBzdGVyLnNldCgnbnVtQmFuYW5hcycsIDMpOwogIGhh
        bXBzdGVyLmdldCgnbmVlZHNNb3JlQmFuYW5hcycpOyAvLyBmYWxzZQogIGhh
        bXBzdGVyLnNldCgnbnVtQmFuYW5hcycsIDIpOwogIGhhbXBzdGVyLmdldCgn
        bmVlZHNNb3JlQmFuYW5hcycpOyAvLyB0cnVlCiAgYGBgCgogIEBtZXRob2Qg
        Y29tcHV0ZWQubHQKICBAZm9yIEVtYmVyCiAgQHBhcmFtIHtTdHJpbmd9IGRl
        cGVuZGVudEtleQogIEBwYXJhbSB7TnVtYmVyfSB2YWx1ZQogIEByZXR1cm4g
        e0VtYmVyLkNvbXB1dGVkUHJvcGVydHl9IGNvbXB1dGVkIHByb3BlcnR5IHdo
        aWNoIHJldHVybnMgdHJ1ZSBpZgogIHRoZSBvcmlnaW5hbCB2YWx1ZSBmb3Ig
        cHJvcGVydHkgaXMgbGVzcyB0aGVuIGdpdmVuIHZhbHVlLgoqLwpyZWdpc3Rl
        ckNvbXB1dGVkKCdsdCcsIGZ1bmN0aW9uKGRlcGVuZGVudEtleSwgdmFsdWUp
        IHsKICByZXR1cm4gZ2V0KHRoaXMsIGRlcGVuZGVudEtleSkgPCB2YWx1ZTsK
        fSk7CgovKioKICBBIGNvbXB1dGVkIHByb3BlcnR5IHRoYXQgcmV0dXJucyB0
        cnVlIGlmIHRoZSBwcm92aWRlZCBkZXBlbmRlbnQgcHJvcGVydHkKICBpcyBs
        ZXNzIHRoYW4gb3IgZXF1YWwgdG8gdGhlIHByb3ZpZGVkIHZhbHVlLgoKICBF
        eGFtcGxlCgogIGBgYGphdmFzY3JpcHQKICB2YXIgSGFtcHN0ZXIgPSBFbWJl
        ci5PYmplY3QuZXh0ZW5kKHsKICAgIG5lZWRzTW9yZUJhbmFuYXM6IEVtYmVy
        LmNvbXB1dGVkLmx0ZSgnbnVtQmFuYW5hcycsIDMpCiAgfSk7CiAgdmFyIGhh
        bXBzdGVyID0gSGFtcHN0ZXIuY3JlYXRlKCk7CiAgaGFtcHN0ZXIuZ2V0KCdu
        ZWVkc01vcmVCYW5hbmFzJyk7IC8vIHRydWUKICBoYW1wc3Rlci5zZXQoJ251
        bUJhbmFuYXMnLCA1KTsKICBoYW1wc3Rlci5nZXQoJ25lZWRzTW9yZUJhbmFu
        YXMnKTsgLy8gZmFsc2UKICBoYW1wc3Rlci5zZXQoJ251bUJhbmFuYXMnLCAz
        KTsKICBoYW1wc3Rlci5nZXQoJ25lZWRzTW9yZUJhbmFuYXMnKTsgLy8gdHJ1
        ZQogIGBgYAoKICBAbWV0aG9kIGNvbXB1dGVkLmx0ZQogIEBmb3IgRW1iZXIK
        ICBAcGFyYW0ge1N0cmluZ30gZGVwZW5kZW50S2V5CiAgQHBhcmFtIHtOdW1i
        ZXJ9IHZhbHVlCiAgQHJldHVybiB7RW1iZXIuQ29tcHV0ZWRQcm9wZXJ0eX0g
        Y29tcHV0ZWQgcHJvcGVydHkgd2hpY2ggcmV0dXJucyB0cnVlIGlmCiAgdGhl
        IG9yaWdpbmFsIHZhbHVlIGZvciBwcm9wZXJ0eSBpcyBsZXNzIG9yIGVxdWFs
        IHRoZW4gZ2l2ZW4gdmFsdWUuCiovCnJlZ2lzdGVyQ29tcHV0ZWQoJ2x0ZScs
        IGZ1bmN0aW9uKGRlcGVuZGVudEtleSwgdmFsdWUpIHsKICByZXR1cm4gZ2V0
        KHRoaXMsIGRlcGVuZGVudEtleSkgPD0gdmFsdWU7Cn0pOwoKLyoqCiAgQSBj
        b21wdXRlZCBwcm9wZXJ0eSB0aGF0IHBlcmZvcm1zIGEgbG9naWNhbCBgYW5k
        YCBvbiB0aGUKICBvcmlnaW5hbCB2YWx1ZXMgZm9yIHRoZSBwcm92aWRlZCBk
        ZXBlbmRlbnQgcHJvcGVydGllcy4KCgogIEV4YW1wbGUKCiAgYGBgamF2YXNj
        cmlwdAogIHZhciBIYW1wc3RlciA9IEVtYmVyLk9iamVjdC5leHRlbmQoewog
        ICAgcmVhZHlGb3JDYW1wOiBFbWJlci5jb21wdXRlZC5hbmQoJ2hhc1RlbnQn
        LCAnaGFzQmFja3BhY2snKQogIH0pOwogIHZhciBoYW1wc3RlciA9IEhhbXBz
        dGVyLmNyZWF0ZSgpOwogIGhhbXBzdGVyLmdldCgncmVhZHlGb3JDYW1wJyk7
        IC8vIGZhbHNlCiAgaGFtcHN0ZXIuc2V0KCdoYXNUZW50JywgdHJ1ZSk7CiAg
        aGFtcHN0ZXIuZ2V0KCdyZWFkeUZvckNhbXAnKTsgLy8gZmFsc2UKICBoYW1w
        c3Rlci5zZXQoJ2hhc0JhY2twYWNrJywgdHJ1ZSk7CiAgaGFtcHN0ZXIuZ2V0
        KCdyZWFkeUZvckNhbXAnKTsgLy8gdHJ1ZQogIGBgYAoKICBAbWV0aG9kIGNv
        bXB1dGVkLmFuZAogIEBmb3IgRW1iZXIKICBAcGFyYW0ge1N0cmluZ30gZGVw
        ZW5kZW50S2V5LCBbZGVwZW5kZW50S2V5Li4uXQogIEByZXR1cm4ge0VtYmVy
        LkNvbXB1dGVkUHJvcGVydHl9IGNvbXB1dGVkIHByb3BlcnR5IHdoaWNoIHBl
        cmZvcm1zCiAgYSBsb2dpY2FsIGBhbmRgIG9uIHRoZSB2YWx1ZXMgb2YgYWxs
        IHRoZSBvcmlnaW5hbCB2YWx1ZXMgZm9yIHByb3BlcnRpZXMuCiovCnJlZ2lz
        dGVyQ29tcHV0ZWRXaXRoUHJvcGVydGllcygnYW5kJywgZnVuY3Rpb24ocHJv
        cGVydGllcykgewogIGZvciAodmFyIGtleSBpbiBwcm9wZXJ0aWVzKSB7CiAg
        ICBpZiAocHJvcGVydGllcy5oYXNPd25Qcm9wZXJ0eShrZXkpICYmICFwcm9w
        ZXJ0aWVzW2tleV0pIHsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogIH0K
        ICByZXR1cm4gdHJ1ZTsKfSk7CgovKioKICBBIGNvbXB1dGVkIHByb3BlcnR5
        IHdoaWNoIHBlcmZvcm1zIGEgbG9naWNhbCBgb3JgIG9uIHRoZQogIG9yaWdp
        bmFsIHZhbHVlcyBmb3IgdGhlIHByb3ZpZGVkIGRlcGVuZGVudCBwcm9wZXJ0
        aWVzLgoKICBFeGFtcGxlCgogIGBgYGphdmFzY3JpcHQKICB2YXIgSGFtcHN0
        ZXIgPSBFbWJlci5PYmplY3QuZXh0ZW5kKHsKICAgIHJlYWR5Rm9yUmFpbjog
        RW1iZXIuY29tcHV0ZWQub3IoJ2hhc0phY2tldCcsICdoYXNVbWJyZWxsYScp
        CiAgfSk7CiAgdmFyIGhhbXBzdGVyID0gSGFtcHN0ZXIuY3JlYXRlKCk7CiAg
        aGFtcHN0ZXIuZ2V0KCdyZWFkeUZvclJhaW4nKTsgLy8gZmFsc2UKICBoYW1w
        c3Rlci5zZXQoJ2hhc0phY2tldCcsIHRydWUpOwogIGhhbXBzdGVyLmdldCgn
        cmVhZHlGb3JSYWluJyk7IC8vIHRydWUKICBgYGAKCiAgQG1ldGhvZCBjb21w
        dXRlZC5vcgogIEBmb3IgRW1iZXIKICBAcGFyYW0ge1N0cmluZ30gZGVwZW5k
        ZW50S2V5LCBbZGVwZW5kZW50S2V5Li4uXQogIEByZXR1cm4ge0VtYmVyLkNv
        bXB1dGVkUHJvcGVydHl9IGNvbXB1dGVkIHByb3BlcnR5IHdoaWNoIHBlcmZv
        cm1zCiAgYSBsb2dpY2FsIGBvcmAgb24gdGhlIHZhbHVlcyBvZiBhbGwgdGhl
        IG9yaWdpbmFsIHZhbHVlcyBmb3IgcHJvcGVydGllcy4KKi8KcmVnaXN0ZXJD
        b21wdXRlZFdpdGhQcm9wZXJ0aWVzKCdvcicsIGZ1bmN0aW9uKHByb3BlcnRp
        ZXMpIHsKICBmb3IgKHZhciBrZXkgaW4gcHJvcGVydGllcykgewogICAgaWYg
        KHByb3BlcnRpZXMuaGFzT3duUHJvcGVydHkoa2V5KSAmJiBwcm9wZXJ0aWVz
        W2tleV0pIHsKICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgfQogIHJldHVy
        biBmYWxzZTsKfSk7CgovKioKICBBIGNvbXB1dGVkIHByb3BlcnR5IHRoYXQg
        cmV0dXJucyB0aGUgZmlyc3QgdHJ1dGh5IHZhbHVlCiAgZnJvbSBhIGxpc3Qg
        b2YgZGVwZW5kZW50IHByb3BlcnRpZXMuCgogIEV4YW1wbGUKCiAgYGBgamF2
        YXNjcmlwdAogIHZhciBIYW1wc3RlciA9IEVtYmVyLk9iamVjdC5leHRlbmQo
        ewogICAgaGFzQ2xvdGhlczogRW1iZXIuY29tcHV0ZWQuYW55KCdoYXQnLCAn
        c2hpcnQnKQogIH0pOwogIHZhciBoYW1wc3RlciA9IEhhbXBzdGVyLmNyZWF0
        ZSgpOwogIGhhbXBzdGVyLmdldCgnaGFzQ2xvdGhlcycpOyAvLyBudWxsCiAg
        aGFtcHN0ZXIuc2V0KCdzaGlydCcsICdIYXdhaWlhbiBTaGlydCcpOwogIGhh
        bXBzdGVyLmdldCgnaGFzQ2xvdGhlcycpOyAvLyAnSGF3YWlpYW4gU2hpcnQn
        CiAgYGBgCgogIEBtZXRob2QgY29tcHV0ZWQuYW55CiAgQGZvciBFbWJlcgog
        IEBwYXJhbSB7U3RyaW5nfSBkZXBlbmRlbnRLZXksIFtkZXBlbmRlbnRLZXku
        Li5dCiAgQHJldHVybiB7RW1iZXIuQ29tcHV0ZWRQcm9wZXJ0eX0gY29tcHV0
        ZWQgcHJvcGVydHkgd2hpY2ggcmV0dXJucwogIHRoZSBmaXJzdCB0cnV0aHkg
        dmFsdWUgb2YgZ2l2ZW4gbGlzdCBvZiBwcm9wZXJ0aWVzLgoqLwpyZWdpc3Rl
        ckNvbXB1dGVkV2l0aFByb3BlcnRpZXMoJ2FueScsIGZ1bmN0aW9uKHByb3Bl
        cnRpZXMpIHsKICBmb3IgKHZhciBrZXkgaW4gcHJvcGVydGllcykgewogICAg
        aWYgKHByb3BlcnRpZXMuaGFzT3duUHJvcGVydHkoa2V5KSAmJiBwcm9wZXJ0
        aWVzW2tleV0pIHsKICAgICAgcmV0dXJuIHByb3BlcnRpZXNba2V5XTsKICAg
        IH0KICB9CiAgcmV0dXJuIG51bGw7Cn0pOwoKLyoqCiAgQSBjb21wdXRlZCBw
        cm9wZXJ0eSB0aGF0IHJldHVybnMgdGhlIGFycmF5IG9mIHZhbHVlcwogIGZv
        ciB0aGUgcHJvdmlkZWQgZGVwZW5kZW50IHByb3BlcnRpZXMuCgogIEV4YW1w
        bGUKCiAgYGBgamF2YXNjcmlwdAogIHZhciBIYW1wc3RlciA9IEVtYmVyLk9i
        amVjdC5leHRlbmQoewogICAgY2xvdGhlczogRW1iZXIuY29tcHV0ZWQubWFw
        KCdoYXQnLCAnc2hpcnQnKQogIH0pOwogIHZhciBoYW1wc3RlciA9IEhhbXBz
        dGVyLmNyZWF0ZSgpOwogIGhhbXBzdGVyLmdldCgnY2xvdGhlcycpOyAvLyBb
        bnVsbCwgbnVsbF0KICBoYW1wc3Rlci5zZXQoJ2hhdCcsICdDYW1wIEhhdCcp
        OwogIGhhbXBzdGVyLnNldCgnc2hpcnQnLCAnQ2FtcCBTaGlydCcpOwogIGhh
        bXBzdGVyLmdldCgnY2xvdGhlcycpOyAvLyBbJ0NhbXAgSGF0JywgJ0NhbXAg
        U2hpcnQnXQogIGBgYAoKICBAbWV0aG9kIGNvbXB1dGVkLm1hcAogIEBmb3Ig
        RW1iZXIKICBAcGFyYW0ge1N0cmluZ30gZGVwZW5kZW50S2V5LCBbZGVwZW5k
        ZW50S2V5Li4uXQogIEByZXR1cm4ge0VtYmVyLkNvbXB1dGVkUHJvcGVydHl9
        IGNvbXB1dGVkIHByb3BlcnR5IHdoaWNoIG1hcHMKICB2YWx1ZXMgb2YgYWxs
        IHBhc3NlZCBwcm9wZXJ0aWVzIGluIHRvIGFuIGFycmF5LgoqLwpyZWdpc3Rl
        ckNvbXB1dGVkV2l0aFByb3BlcnRpZXMoJ2NvbGxlY3QnLCBmdW5jdGlvbihw
        cm9wZXJ0aWVzKSB7CiAgdmFyIHJlcyA9IFtdOwogIGZvciAodmFyIGtleSBp
        biBwcm9wZXJ0aWVzKSB7CiAgICBpZiAocHJvcGVydGllcy5oYXNPd25Qcm9w
        ZXJ0eShrZXkpKSB7CiAgICAgIGlmIChFbWJlci5pc05vbmUocHJvcGVydGll
        c1trZXldKSkgewogICAgICAgIHJlcy5wdXNoKG51bGwpOwogICAgICB9IGVs
        c2UgewogICAgICAgIHJlcy5wdXNoKHByb3BlcnRpZXNba2V5XSk7CiAgICAg
        IH0KICAgIH0KICB9CiAgcmV0dXJuIHJlczsKfSk7CgovKioKICBDcmVhdGVz
        IGEgbmV3IHByb3BlcnR5IHRoYXQgaXMgYW4gYWxpYXMgZm9yIGFub3RoZXIg
        cHJvcGVydHkKICBvbiBhbiBvYmplY3QuIENhbGxzIHRvIGBnZXRgIG9yIGBz
        ZXRgIHRoaXMgcHJvcGVydHkgYmVoYXZlIGFzCiAgdGhvdWdoIHRoZXkgd2Vy
        ZSBjYWxsZWQgb24gdGhlIG9yaWdpbmFsIHByb3BlcnR5LgoKICBgYGBqYXZh
        c2NyaXB0CiAgUGVyc29uID0gRW1iZXIuT2JqZWN0LmV4dGVuZCh7CiAgICBu
        YW1lOiAnQWxleCBNYXRjaG5lZXInLAogICAgbm9tZW46IEVtYmVyLmNvbXB1
        dGVkLmFsaWFzKCduYW1lJykKICB9KTsKCiAgYWxleCA9IFBlcnNvbi5jcmVh
        dGUoKTsKICBhbGV4LmdldCgnbm9tZW4nKTsgLy8gJ0FsZXggTWF0Y2huZWVy
        JwogIGFsZXguZ2V0KCduYW1lJyk7ICAvLyAnQWxleCBNYXRjaG5lZXInCgog
        IGFsZXguc2V0KCdub21lbicsICdAbWFjaHR5Jyk7CiAgYWxleC5nZXQoJ25h
        bWUnKTsgIC8vICdAbWFjaHR5JwogIGBgYAogIEBtZXRob2QgY29tcHV0ZWQu
        YWxpYXMKICBAZm9yIEVtYmVyCiAgQHBhcmFtIHtTdHJpbmd9IGRlcGVuZGVu
        dEtleQogIEByZXR1cm4ge0VtYmVyLkNvbXB1dGVkUHJvcGVydHl9IGNvbXB1
        dGVkIHByb3BlcnR5IHdoaWNoIGNyZWF0ZXMgYW4KICBhbGlhcyB0byB0aGUg
        b3JpZ2luYWwgdmFsdWUgZm9yIHByb3BlcnR5LgoqLwpFbWJlci5jb21wdXRl
        ZC5hbGlhcyA9IGZ1bmN0aW9uKGRlcGVuZGVudEtleSkgewogIHJldHVybiBF
        bWJlci5jb21wdXRlZChkZXBlbmRlbnRLZXksIGZ1bmN0aW9uKGtleSwgdmFs
        dWUpIHsKICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMSkgewogICAgICBz
        ZXQodGhpcywgZGVwZW5kZW50S2V5LCB2YWx1ZSk7CiAgICAgIHJldHVybiB2
        YWx1ZTsKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiBnZXQodGhpcywgZGVw
        ZW5kZW50S2V5KTsKICAgIH0KICB9KTsKfTsKCi8qKgogIFdoZXJlIGBjb21w
        dXRlZC5hbGlhc2AgYWxpYXNlcyBgZ2V0YCBhbmQgYHNldGAsIGFuZCBhbGxv
        d3MgZm9yIGJpZGlyZWN0aW9uYWwKICBkYXRhIGZsb3csIGBjb21wdXRlZC5v
        bmVXYXlgIG9ubHkgcHJvdmlkZXMgYW4gYWxpYXNlZCBgZ2V0YC4gVGhlIGBz
        ZXRgIHdpbGwKICBub3QgbXV0YXRlIHRoZSB1cHN0cmVhbSBwcm9wZXJ0eSwg
        cmF0aGVyIGNhdXNlcyB0aGUgY3VycmVudCBwcm9wZXJ0eSB0bwogIGJlY29t
        ZSB0aGUgdmFsdWUgc2V0LiBUaGlzIGNhdXNlcyB0aGUgZG93bnN0cmVhbSBw
        cm9wZXJ0eSB0byBwZXJtZW50YW50bHkKICBkaXZlcmdlIGZyb20gdGhlIHVw
        c3RyZWFtIHByb3BlcnR5LgoKICBFeGFtcGxlCgogIGBgYGphdmFzY3JpcHQK
        ICBVc2VyID0gRW1iZXIuT2JqZWN0LmV4dGVuZCh7CiAgICBmaXJzdE5hbWU6
        IG51bGwsCiAgICBsYXN0TmFtZTogbnVsbCwKICAgIG5pY2tOYW1lOiBFbWJl
        ci5jb21wdXRlZC5vbmVXYXkoJ2ZpcnN0TmFtZScpCiAgfSk7CgogIHVzZXIg
        PSBVc2VyLmNyZWF0ZSh7CiAgICBmaXJzdE5hbWU6ICdUZWRkeScsCiAgICBs
        YXN0TmFtZTogICdaZWVubnknCiAgfSk7CgogIHVzZXIuZ2V0KCduaWNrTmFt
        ZScpOwogICMgJ1RlZGR5JwoKICB1c2VyLnNldCgnbmlja05hbWUnLCAnVGVk
        ZHlCZWFyJyk7CiAgIyAnVGVkZHlCZWFyJwoKICB1c2VyLmdldCgnZmlyc3RO
        YW1lJyk7CiAgIyAnVGVkZHknCiAgYGBgCgogIEBtZXRob2QgY29tcHV0ZWQu
        b25lV2F5CiAgQGZvciBFbWJlcgogIEBwYXJhbSB7U3RyaW5nfSBkZXBlbmRl
        bnRLZXkKICBAcmV0dXJuIHtFbWJlci5Db21wdXRlZFByb3BlcnR5fSBjb21w
        dXRlZCBwcm9wZXJ0eSB3aGljaCBjcmVhdGVzIGEKICBvbmUgd2F5IGNvbXB1
        dGVkIHByb3BlcnR5IHRvIHRoZSBvcmlnaW5hbCB2YWx1ZSBmb3IgcHJvcGVy
        dHkuCiovCkVtYmVyLmNvbXB1dGVkLm9uZVdheSA9IGZ1bmN0aW9uKGRlcGVu
        ZGVudEtleSkgewogIHJldHVybiBFbWJlci5jb21wdXRlZChkZXBlbmRlbnRL
        ZXksIGZ1bmN0aW9uKCkgewogICAgcmV0dXJuIGdldCh0aGlzLCBkZXBlbmRl
        bnRLZXkpOwogIH0pOwp9OwoKCi8qKgogIEEgY29tcHV0ZWQgcHJvcGVydHkg
        dGhhdCBhY3RzIGxpa2UgYSBzdGFuZGFyZCBnZXR0ZXIgYW5kIHNldHRlciwK
        ICBidXQgcmV0dXJucyB0aGUgdmFsdWUgYXQgdGhlIHByb3ZpZGVkIGBkZWZh
        dWx0UGF0aGAgaWYgdGhlCiAgcHJvcGVydHkgaXRzZWxmIGhhcyBub3QgYmVl
        biBzZXQgdG8gYSB2YWx1ZQoKICBFeGFtcGxlCgogIGBgYGphdmFzY3JpcHQK
        ICB2YXIgSGFtcHN0ZXIgPSBFbWJlci5PYmplY3QuZXh0ZW5kKHsKICAgIHdp
        c2hMaXN0OiBFbWJlci5jb21wdXRlZC5kZWZhdWx0VG8oJ2Zhdm9yaXRlRm9v
        ZCcpCiAgfSk7CiAgdmFyIGhhbXBzdGVyID0gSGFtcHN0ZXIuY3JlYXRlKHtm
        YXZvcml0ZUZvb2Q6ICdCYW5hbmEnfSk7CiAgaGFtcHN0ZXIuZ2V0KCd3aXNo
        TGlzdCcpOyAvLyAnQmFuYW5hJwogIGhhbXBzdGVyLnNldCgnd2lzaExpc3Qn
        LCAnTW9yZSBVbml0IFRlc3RzJyk7CiAgaGFtcHN0ZXIuZ2V0KCd3aXNoTGlz
        dCcpOyAvLyAnTW9yZSBVbml0IFRlc3RzJwogIGhhbXBzdGVyLmdldCgnZmF2
        b3JpdGVGb29kJyk7IC8vICdCYW5hbmEnCiAgYGBgCgogIEBtZXRob2QgY29t
        cHV0ZWQuZGVmYXVsdFRvCiAgQGZvciBFbWJlcgogIEBwYXJhbSB7U3RyaW5n
        fSBkZWZhdWx0UGF0aAogIEByZXR1cm4ge0VtYmVyLkNvbXB1dGVkUHJvcGVy
        dHl9IGNvbXB1dGVkIHByb3BlcnR5IHdoaWNoIGFjdHMgbGlrZQogIGEgc3Rh
        bmRhcmQgZ2V0dGVyIGFuZCBzZXR0ZXIsIGJ1dCBkZWZhdWx0cyB0byB0aGUg
        dmFsdWUgZnJvbSBgZGVmYXVsdFBhdGhgLgoqLwpFbWJlci5jb21wdXRlZC5k
        ZWZhdWx0VG8gPSBmdW5jdGlvbihkZWZhdWx0UGF0aCkgewogIHJldHVybiBF
        bWJlci5jb21wdXRlZChmdW5jdGlvbihrZXksIG5ld1ZhbHVlLCBjYWNoZWRW
        YWx1ZSkgewogICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDEpIHsKICAg
        ICAgcmV0dXJuIGNhY2hlZFZhbHVlICE9IG51bGwgPyBjYWNoZWRWYWx1ZSA6
        IGdldCh0aGlzLCBkZWZhdWx0UGF0aCk7CiAgICB9CiAgICByZXR1cm4gbmV3
        VmFsdWUgIT0gbnVsbCA/IG5ld1ZhbHVlIDogZ2V0KHRoaXMsIGRlZmF1bHRQ
        YXRoKTsKICB9KTsKfTsKCgoKfSkoKTsKCgoKKGZ1bmN0aW9uKCkgewovLyBF
        bWJlci50cnlGaW5hbGx5Ci8qKgpAbW9kdWxlIGVtYmVyLW1ldGFsCiovCgp2
        YXIgQUZURVJfT0JTRVJWRVJTID0gJzpjaGFuZ2UnLAogICAgQkVGT1JFX09C
        U0VSVkVSUyA9ICc6YmVmb3JlJzsKCgpmdW5jdGlvbiBjaGFuZ2VFdmVudChr
        ZXlOYW1lKSB7CiAgcmV0dXJuIGtleU5hbWUrQUZURVJfT0JTRVJWRVJTOwp9
        CgpmdW5jdGlvbiBiZWZvcmVFdmVudChrZXlOYW1lKSB7CiAgcmV0dXJuIGtl
        eU5hbWUrQkVGT1JFX09CU0VSVkVSUzsKfQoKLyoqCiAgQG1ldGhvZCBhZGRP
        YnNlcnZlcgogIEBwYXJhbSBvYmoKICBAcGFyYW0ge1N0cmluZ30gcGF0aAog
        IEBwYXJhbSB7T2JqZWN0fEZ1bmN0aW9ufSB0YXJnZXRPck1ldGhvZAogIEBw
        YXJhbSB7RnVuY3Rpb258U3RyaW5nfSBbbWV0aG9kXQoqLwpFbWJlci5hZGRP
        YnNlcnZlciA9IGZ1bmN0aW9uKG9iaiwgX3BhdGgsIHRhcmdldCwgbWV0aG9k
        KSB7CiAgCiAgICBFbWJlci5hZGRMaXN0ZW5lcihvYmosIGNoYW5nZUV2ZW50
        KF9wYXRoKSwgdGFyZ2V0LCBtZXRob2QpOwogICAgRW1iZXIud2F0Y2gob2Jq
        LCBfcGF0aCk7CiAgCgogIHJldHVybiB0aGlzOwp9OwoKRW1iZXIub2JzZXJ2
        ZXJzRm9yID0gZnVuY3Rpb24ob2JqLCBwYXRoKSB7CiAgcmV0dXJuIEVtYmVy
        Lmxpc3RlbmVyc0ZvcihvYmosIGNoYW5nZUV2ZW50KHBhdGgpKTsKfTsKCi8q
        KgogIEBtZXRob2QgcmVtb3ZlT2JzZXJ2ZXIKICBAcGFyYW0gb2JqCiAgQHBh
        cmFtIHtTdHJpbmd9IHBhdGgKICBAcGFyYW0ge09iamVjdHxGdW5jdGlvbn0g
        dGFyZ2V0T3JNZXRob2QKICBAcGFyYW0ge0Z1bmN0aW9ufFN0cmluZ30gW21l
        dGhvZF0KKi8KRW1iZXIucmVtb3ZlT2JzZXJ2ZXIgPSBmdW5jdGlvbihvYmos
        IF9wYXRoLCB0YXJnZXQsIG1ldGhvZCkgewogIAogICAgRW1iZXIudW53YXRj
        aChvYmosIF9wYXRoKTsKICAgIEVtYmVyLnJlbW92ZUxpc3RlbmVyKG9iaiwg
        Y2hhbmdlRXZlbnQoX3BhdGgpLCB0YXJnZXQsIG1ldGhvZCk7CiAgCiAgcmV0
        dXJuIHRoaXM7Cn07CgovKioKICBAbWV0aG9kIGFkZEJlZm9yZU9ic2VydmVy
        CiAgQHBhcmFtIG9iagogIEBwYXJhbSB7U3RyaW5nfSBwYXRoCiAgQHBhcmFt
        IHtPYmplY3R8RnVuY3Rpb259IHRhcmdldE9yTWV0aG9kCiAgQHBhcmFtIHtG
        dW5jdGlvbnxTdHJpbmd9IFttZXRob2RdCiovCkVtYmVyLmFkZEJlZm9yZU9i
        c2VydmVyID0gZnVuY3Rpb24ob2JqLCBfcGF0aCwgdGFyZ2V0LCBtZXRob2Qp
        IHsKICAKICAgIEVtYmVyLmFkZExpc3RlbmVyKG9iaiwgYmVmb3JlRXZlbnQo
        X3BhdGgpLCB0YXJnZXQsIG1ldGhvZCk7CiAgICBFbWJlci53YXRjaChvYmos
        IF9wYXRoKTsKICAKICByZXR1cm4gdGhpczsKfTsKCi8vIFN1c3BlbmQgb2Jz
        ZXJ2ZXIgZHVyaW5nIGNhbGxiYWNrLgovLwovLyBUaGlzIHNob3VsZCBvbmx5
        IGJlIHVzZWQgYnkgdGhlIHRhcmdldCBvZiB0aGUgb2JzZXJ2ZXIKLy8gd2hp
        bGUgaXQgaXMgc2V0dGluZyB0aGUgb2JzZXJ2ZWQgcGF0aC4KRW1iZXIuX3N1
        c3BlbmRCZWZvcmVPYnNlcnZlciA9IGZ1bmN0aW9uKG9iaiwgcGF0aCwgdGFy
        Z2V0LCBtZXRob2QsIGNhbGxiYWNrKSB7CiAgcmV0dXJuIEVtYmVyLl9zdXNw
        ZW5kTGlzdGVuZXIob2JqLCBiZWZvcmVFdmVudChwYXRoKSwgdGFyZ2V0LCBt
        ZXRob2QsIGNhbGxiYWNrKTsKfTsKCkVtYmVyLl9zdXNwZW5kT2JzZXJ2ZXIg
        PSBmdW5jdGlvbihvYmosIHBhdGgsIHRhcmdldCwgbWV0aG9kLCBjYWxsYmFj
        aykgewogIHJldHVybiBFbWJlci5fc3VzcGVuZExpc3RlbmVyKG9iaiwgY2hh
        bmdlRXZlbnQocGF0aCksIHRhcmdldCwgbWV0aG9kLCBjYWxsYmFjayk7Cn07
        Cgp2YXIgbWFwID0gRW1iZXIuQXJyYXlQb2x5ZmlsbHMubWFwOwoKRW1iZXIu
        X3N1c3BlbmRCZWZvcmVPYnNlcnZlcnMgPSBmdW5jdGlvbihvYmosIHBhdGhz
        LCB0YXJnZXQsIG1ldGhvZCwgY2FsbGJhY2spIHsKICB2YXIgZXZlbnRzID0g
        bWFwLmNhbGwocGF0aHMsIGJlZm9yZUV2ZW50KTsKICByZXR1cm4gRW1iZXIu
        X3N1c3BlbmRMaXN0ZW5lcnMob2JqLCBldmVudHMsIHRhcmdldCwgbWV0aG9k
        LCBjYWxsYmFjayk7Cn07CgpFbWJlci5fc3VzcGVuZE9ic2VydmVycyA9IGZ1
        bmN0aW9uKG9iaiwgcGF0aHMsIHRhcmdldCwgbWV0aG9kLCBjYWxsYmFjaykg
        ewogIHZhciBldmVudHMgPSBtYXAuY2FsbChwYXRocywgY2hhbmdlRXZlbnQp
        OwogIHJldHVybiBFbWJlci5fc3VzcGVuZExpc3RlbmVycyhvYmosIGV2ZW50
        cywgdGFyZ2V0LCBtZXRob2QsIGNhbGxiYWNrKTsKfTsKCkVtYmVyLmJlZm9y
        ZU9ic2VydmVyc0ZvciA9IGZ1bmN0aW9uKG9iaiwgcGF0aCkgewogIHJldHVy
        biBFbWJlci5saXN0ZW5lcnNGb3Iob2JqLCBiZWZvcmVFdmVudChwYXRoKSk7
        Cn07CgovKioKICBAbWV0aG9kIHJlbW92ZUJlZm9yZU9ic2VydmVyCiAgQHBh
        cmFtIG9iagogIEBwYXJhbSB7U3RyaW5nfSBwYXRoCiAgQHBhcmFtIHtPYmpl
        Y3R8RnVuY3Rpb259IHRhcmdldE9yTWV0aG9kCiAgQHBhcmFtIHtGdW5jdGlv
        bnxTdHJpbmd9IFttZXRob2RdCiovCkVtYmVyLnJlbW92ZUJlZm9yZU9ic2Vy
        dmVyID0gZnVuY3Rpb24ob2JqLCBfcGF0aCwgdGFyZ2V0LCBtZXRob2QpIHsK
        ICAKICAgIEVtYmVyLnVud2F0Y2gob2JqLCBfcGF0aCk7CiAgICBFbWJlci5y
        ZW1vdmVMaXN0ZW5lcihvYmosIGJlZm9yZUV2ZW50KF9wYXRoKSwgdGFyZ2V0
        LCBtZXRob2QpOwogIAogIHJldHVybiB0aGlzOwp9OwoKfSkoKTsKCgoKKGZ1
        bmN0aW9uKCkgewpkZWZpbmUoImJhY2tidXJuZXIvcXVldWUiLAogIFsiZXhw
        b3J0cyJdLAogIGZ1bmN0aW9uKF9fZXhwb3J0c19fKSB7CiAgICAidXNlIHN0
        cmljdCI7CiAgICBmdW5jdGlvbiBRdWV1ZShkYXEsIG5hbWUsIG9wdGlvbnMp
        IHsKICAgICAgdGhpcy5kYXEgPSBkYXE7CiAgICAgIHRoaXMubmFtZSA9IG5h
        bWU7CiAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7CiAgICAgIHRoaXMu
        X3F1ZXVlID0gW107CiAgICB9CgogICAgUXVldWUucHJvdG90eXBlID0gewog
        ICAgICBkYXE6IG51bGwsCiAgICAgIG5hbWU6IG51bGwsCiAgICAgIG9wdGlv
        bnM6IG51bGwsCiAgICAgIF9xdWV1ZTogbnVsbCwKCiAgICAgIHB1c2g6IGZ1
        bmN0aW9uKHRhcmdldCwgbWV0aG9kLCBhcmdzLCBzdGFjaykgewogICAgICAg
        IHZhciBxdWV1ZSA9IHRoaXMuX3F1ZXVlOwogICAgICAgIHF1ZXVlLnB1c2go
        dGFyZ2V0LCBtZXRob2QsIGFyZ3MsIHN0YWNrKTsKICAgICAgICByZXR1cm4g
        e3F1ZXVlOiB0aGlzLCB0YXJnZXQ6IHRhcmdldCwgbWV0aG9kOiBtZXRob2R9
        OwogICAgICB9LAoKICAgICAgcHVzaFVuaXF1ZTogZnVuY3Rpb24odGFyZ2V0
        LCBtZXRob2QsIGFyZ3MsIHN0YWNrKSB7CiAgICAgICAgdmFyIHF1ZXVlID0g
        dGhpcy5fcXVldWUsIGN1cnJlbnRUYXJnZXQsIGN1cnJlbnRNZXRob2QsIGks
        IGw7CgogICAgICAgIGZvciAoaSA9IDAsIGwgPSBxdWV1ZS5sZW5ndGg7IGkg
        PCBsOyBpICs9IDQpIHsKICAgICAgICAgIGN1cnJlbnRUYXJnZXQgPSBxdWV1
        ZVtpXTsKICAgICAgICAgIGN1cnJlbnRNZXRob2QgPSBxdWV1ZVtpKzFdOwoK
        ICAgICAgICAgIGlmIChjdXJyZW50VGFyZ2V0ID09PSB0YXJnZXQgJiYgY3Vy
        cmVudE1ldGhvZCA9PT0gbWV0aG9kKSB7CiAgICAgICAgICAgIHF1ZXVlW2kr
        Ml0gPSBhcmdzOyAvLyByZXBsYWNlIGFyZ3MKICAgICAgICAgICAgcXVldWVb
        aSszXSA9IHN0YWNrOyAvLyByZXBsYWNlIHN0YWNrCiAgICAgICAgICAgIHJl
        dHVybiB7cXVldWU6IHRoaXMsIHRhcmdldDogdGFyZ2V0LCBtZXRob2Q6IG1l
        dGhvZH07IC8vIFRPRE86IHRlc3QgdGhpcyBjb2RlIHBhdGgKICAgICAgICAg
        IH0KICAgICAgICB9CgogICAgICAgIHRoaXMuX3F1ZXVlLnB1c2godGFyZ2V0
        LCBtZXRob2QsIGFyZ3MsIHN0YWNrKTsKICAgICAgICByZXR1cm4ge3F1ZXVl
        OiB0aGlzLCB0YXJnZXQ6IHRhcmdldCwgbWV0aG9kOiBtZXRob2R9OwogICAg
        ICB9LAoKICAgICAgLy8gVE9ETzogcmVtb3ZlIG1lLCBvbmx5IGJlaW5nIHVz
        ZWQgZm9yIEVtYmVyLnJ1bi5zeW5jCiAgICAgIGZsdXNoOiBmdW5jdGlvbigp
        IHsKICAgICAgICB2YXIgcXVldWUgPSB0aGlzLl9xdWV1ZSwKICAgICAgICAg
        ICAgb3B0aW9ucyA9IHRoaXMub3B0aW9ucywKICAgICAgICAgICAgYmVmb3Jl
        ID0gb3B0aW9ucyAmJiBvcHRpb25zLmJlZm9yZSwKICAgICAgICAgICAgYWZ0
        ZXIgPSBvcHRpb25zICYmIG9wdGlvbnMuYWZ0ZXIsCiAgICAgICAgICAgIHRh
        cmdldCwgbWV0aG9kLCBhcmdzLCBzdGFjaywgaSwgbCA9IHF1ZXVlLmxlbmd0
        aDsKCiAgICAgICAgaWYgKGwgJiYgYmVmb3JlKSB7IGJlZm9yZSgpOyB9CiAg
        ICAgICAgZm9yIChpID0gMDsgaSA8IGw7IGkgKz0gNCkgewogICAgICAgICAg
        dGFyZ2V0ID0gcXVldWVbaV07CiAgICAgICAgICBtZXRob2QgPSBxdWV1ZVtp
        KzFdOwogICAgICAgICAgYXJncyAgID0gcXVldWVbaSsyXTsKICAgICAgICAg
        IHN0YWNrICA9IHF1ZXVlW2krM107IC8vIERlYnVnZ2luZyBhc3Npc3RhbmNl
        CgogICAgICAgICAgLy8gVE9ETzogZXJyb3IgaGFuZGxpbmcKICAgICAgICAg
        IGlmIChhcmdzICYmIGFyZ3MubGVuZ3RoID4gMCkgewogICAgICAgICAgICBt
        ZXRob2QuYXBwbHkodGFyZ2V0LCBhcmdzKTsKICAgICAgICAgIH0gZWxzZSB7
        CiAgICAgICAgICAgIG1ldGhvZC5jYWxsKHRhcmdldCk7CiAgICAgICAgICB9
        CiAgICAgICAgfQogICAgICAgIGlmIChsICYmIGFmdGVyKSB7IGFmdGVyKCk7
        IH0KCiAgICAgICAgLy8gY2hlY2sgaWYgbmV3IGl0ZW1zIGhhdmUgYmVlbiBh
        ZGRlZAogICAgICAgIGlmIChxdWV1ZS5sZW5ndGggPiBsKSB7CiAgICAgICAg
        ICB0aGlzLl9xdWV1ZSA9IHF1ZXVlLnNsaWNlKGwpOwogICAgICAgICAgdGhp
        cy5mbHVzaCgpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLl9x
        dWV1ZS5sZW5ndGggPSAwOwogICAgICAgIH0KICAgICAgfSwKCiAgICAgIGNh
        bmNlbDogZnVuY3Rpb24oYWN0aW9uVG9DYW5jZWwpIHsKICAgICAgICB2YXIg
        cXVldWUgPSB0aGlzLl9xdWV1ZSwgY3VycmVudFRhcmdldCwgY3VycmVudE1l
        dGhvZCwgaSwgbDsKCiAgICAgICAgZm9yIChpID0gMCwgbCA9IHF1ZXVlLmxl
        bmd0aDsgaSA8IGw7IGkgKz0gNCkgewogICAgICAgICAgY3VycmVudFRhcmdl
        dCA9IHF1ZXVlW2ldOwogICAgICAgICAgY3VycmVudE1ldGhvZCA9IHF1ZXVl
        W2krMV07CgogICAgICAgICAgaWYgKGN1cnJlbnRUYXJnZXQgPT09IGFjdGlv
        blRvQ2FuY2VsLnRhcmdldCAmJiBjdXJyZW50TWV0aG9kID09PSBhY3Rpb25U
        b0NhbmNlbC5tZXRob2QpIHsKICAgICAgICAgICAgcXVldWUuc3BsaWNlKGks
        IDQpOwogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgIH0KICAg
        ICAgICB9CgogICAgICAgIC8vIGlmIG5vdCBmb3VuZCBpbiBjdXJyZW50IHF1
        ZXVlCiAgICAgICAgLy8gY291bGQgYmUgaW4gdGhlIHF1ZXVlIHRoYXQgaXMg
        YmVpbmcgZmx1c2hlZAogICAgICAgIHF1ZXVlID0gdGhpcy5fcXVldWVCZWlu
        Z0ZsdXNoZWQ7CiAgICAgICAgaWYgKCFxdWV1ZSkgewogICAgICAgICAgcmV0
        dXJuOwogICAgICAgIH0KICAgICAgICBmb3IgKGkgPSAwLCBsID0gcXVldWUu
        bGVuZ3RoOyBpIDwgbDsgaSArPSA0KSB7CiAgICAgICAgICBjdXJyZW50VGFy
        Z2V0ID0gcXVldWVbaV07CiAgICAgICAgICBjdXJyZW50TWV0aG9kID0gcXVl
        dWVbaSsxXTsKCiAgICAgICAgICBpZiAoY3VycmVudFRhcmdldCA9PT0gYWN0
        aW9uVG9DYW5jZWwudGFyZ2V0ICYmIGN1cnJlbnRNZXRob2QgPT09IGFjdGlv
        blRvQ2FuY2VsLm1ldGhvZCkgewogICAgICAgICAgICAvLyBkb24ndCBtZXNz
        IHdpdGggYXJyYXkgZHVyaW5nIGZsdXNoCiAgICAgICAgICAgIC8vIGp1c3Qg
        bnVsbGlmeSB0aGUgbWV0aG9kCiAgICAgICAgICAgIHF1ZXVlW2krMV0gPSBu
        dWxsOwogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgIH0KICAg
        ICAgICB9CiAgICAgIH0KICAgIH07CgoKICAgIF9fZXhwb3J0c19fLlF1ZXVl
        ID0gUXVldWU7CiAgfSk7CgpkZWZpbmUoImJhY2tidXJuZXIvZGVmZXJyZWRf
        YWN0aW9uX3F1ZXVlcyIsCiAgWyJiYWNrYnVybmVyL3F1ZXVlIiwiZXhwb3J0
        cyJdLAogIGZ1bmN0aW9uKF9fZGVwZW5kZW5jeTFfXywgX19leHBvcnRzX18p
        IHsKICAgICJ1c2Ugc3RyaWN0IjsKICAgIHZhciBRdWV1ZSA9IF9fZGVwZW5k
        ZW5jeTFfXy5RdWV1ZTsKCiAgICBmdW5jdGlvbiBEZWZlcnJlZEFjdGlvblF1
        ZXVlcyhxdWV1ZU5hbWVzLCBvcHRpb25zKSB7CiAgICAgIHZhciBxdWV1ZXMg
        PSB0aGlzLnF1ZXVlcyA9IHt9OwogICAgICB0aGlzLnF1ZXVlTmFtZXMgPSBx
        dWV1ZU5hbWVzID0gcXVldWVOYW1lcyB8fCBbXTsKCiAgICAgIHZhciBxdWV1
        ZU5hbWU7CiAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gcXVldWVOYW1lcy5s
        ZW5ndGg7IGkgPCBsOyBpKyspIHsKICAgICAgICBxdWV1ZU5hbWUgPSBxdWV1
        ZU5hbWVzW2ldOwogICAgICAgIHF1ZXVlc1txdWV1ZU5hbWVdID0gbmV3IFF1
        ZXVlKHRoaXMsIHF1ZXVlTmFtZSwgb3B0aW9uc1txdWV1ZU5hbWVdKTsKICAg
        ICAgfQogICAgfQoKICAgIERlZmVycmVkQWN0aW9uUXVldWVzLnByb3RvdHlw
        ZSA9IHsKICAgICAgcXVldWVOYW1lczogbnVsbCwKICAgICAgcXVldWVzOiBu
        dWxsLAoKICAgICAgc2NoZWR1bGU6IGZ1bmN0aW9uKHF1ZXVlTmFtZSwgdGFy
        Z2V0LCBtZXRob2QsIGFyZ3MsIG9uY2VGbGFnLCBzdGFjaykgewogICAgICAg
        IHZhciBxdWV1ZXMgPSB0aGlzLnF1ZXVlcywKICAgICAgICAgICAgcXVldWUg
        PSBxdWV1ZXNbcXVldWVOYW1lXTsKCiAgICAgICAgaWYgKCFxdWV1ZSkgeyB0
        aHJvdyBuZXcgRXJyb3IoIllvdSBhdHRlbXB0ZWQgdG8gc2NoZWR1bGUgYW4g
        YWN0aW9uIGluIGEgcXVldWUgKCIgKyBxdWV1ZU5hbWUgKyAiKSB0aGF0IGRv
        ZXNuJ3QgZXhpc3QiKTsgfQoKICAgICAgICBpZiAob25jZUZsYWcpIHsKICAg
        ICAgICAgIHJldHVybiBxdWV1ZS5wdXNoVW5pcXVlKHRhcmdldCwgbWV0aG9k
        LCBhcmdzLCBzdGFjayk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJl
        dHVybiBxdWV1ZS5wdXNoKHRhcmdldCwgbWV0aG9kLCBhcmdzLCBzdGFjayk7
        CiAgICAgICAgfQogICAgICB9LAoKICAgICAgZmx1c2g6IGZ1bmN0aW9uKCkg
        ewogICAgICAgIHZhciBxdWV1ZXMgPSB0aGlzLnF1ZXVlcywKICAgICAgICAg
        ICAgcXVldWVOYW1lcyA9IHRoaXMucXVldWVOYW1lcywKICAgICAgICAgICAg
        cXVldWVOYW1lLCBxdWV1ZSwgcXVldWVJdGVtcywgcHJpb3JRdWV1ZU5hbWVJ
        bmRleCwKICAgICAgICAgICAgcXVldWVOYW1lSW5kZXggPSAwLCBudW1iZXJP
        ZlF1ZXVlcyA9IHF1ZXVlTmFtZXMubGVuZ3RoOwoKICAgICAgICBvdXRlcmxv
        b3A6CiAgICAgICAgd2hpbGUgKHF1ZXVlTmFtZUluZGV4IDwgbnVtYmVyT2ZR
        dWV1ZXMpIHsKICAgICAgICAgIHF1ZXVlTmFtZSA9IHF1ZXVlTmFtZXNbcXVl
        dWVOYW1lSW5kZXhdOwogICAgICAgICAgcXVldWUgPSBxdWV1ZXNbcXVldWVO
        YW1lXTsKICAgICAgICAgIHF1ZXVlSXRlbXMgPSBxdWV1ZS5fcXVldWVCZWlu
        Z0ZsdXNoZWQgPSBxdWV1ZS5fcXVldWUuc2xpY2UoKTsKICAgICAgICAgIHF1
        ZXVlLl9xdWV1ZSA9IFtdOwoKICAgICAgICAgIHZhciBvcHRpb25zID0gcXVl
        dWUub3B0aW9ucywKICAgICAgICAgICAgICBiZWZvcmUgPSBvcHRpb25zICYm
        IG9wdGlvbnMuYmVmb3JlLAogICAgICAgICAgICAgIGFmdGVyID0gb3B0aW9u
        cyAmJiBvcHRpb25zLmFmdGVyLAogICAgICAgICAgICAgIHRhcmdldCwgbWV0
        aG9kLCBhcmdzLCBzdGFjaywKICAgICAgICAgICAgICBxdWV1ZUluZGV4ID0g
        MCwgbnVtYmVyT2ZRdWV1ZUl0ZW1zID0gcXVldWVJdGVtcy5sZW5ndGg7Cgog
        ICAgICAgICAgaWYgKG51bWJlck9mUXVldWVJdGVtcyAmJiBiZWZvcmUpIHsg
        YmVmb3JlKCk7IH0KICAgICAgICAgIHdoaWxlIChxdWV1ZUluZGV4IDwgbnVt
        YmVyT2ZRdWV1ZUl0ZW1zKSB7CiAgICAgICAgICAgIHRhcmdldCA9IHF1ZXVl
        SXRlbXNbcXVldWVJbmRleF07CiAgICAgICAgICAgIG1ldGhvZCA9IHF1ZXVl
        SXRlbXNbcXVldWVJbmRleCsxXTsKICAgICAgICAgICAgYXJncyAgID0gcXVl
        dWVJdGVtc1txdWV1ZUluZGV4KzJdOwogICAgICAgICAgICBzdGFjayAgPSBx
        dWV1ZUl0ZW1zW3F1ZXVlSW5kZXgrM107IC8vIERlYnVnZ2luZyBhc3Npc3Rh
        bmNlCgogICAgICAgICAgICBpZiAodHlwZW9mIG1ldGhvZCA9PT0gJ3N0cmlu
        ZycpIHsgbWV0aG9kID0gdGFyZ2V0W21ldGhvZF07IH0KCiAgICAgICAgICAg
        IC8vIG1ldGhvZCBjb3VsZCBoYXZlIGJlZW4gbnVsbGlmaWVkIC8gY2FuY2Vs
        ZWQgZHVyaW5nIGZsdXNoCiAgICAgICAgICAgIGlmIChtZXRob2QpIHsKICAg
        ICAgICAgICAgICAvLyBUT0RPOiBlcnJvciBoYW5kbGluZwogICAgICAgICAg
        ICAgIGlmIChhcmdzICYmIGFyZ3MubGVuZ3RoID4gMCkgewogICAgICAgICAg
        ICAgICAgbWV0aG9kLmFwcGx5KHRhcmdldCwgYXJncyk7CiAgICAgICAgICAg
        ICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIG1ldGhvZC5jYWxsKHRhcmdl
        dCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAg
        ICBxdWV1ZUluZGV4ICs9IDQ7CiAgICAgICAgICB9CiAgICAgICAgICBxdWV1
        ZS5fcXVldWVCZWluZ0ZsdXNoZWQgPSBudWxsOwogICAgICAgICAgaWYgKG51
        bWJlck9mUXVldWVJdGVtcyAmJiBhZnRlcikgeyBhZnRlcigpOyB9CgogICAg
        ICAgICAgaWYgKChwcmlvclF1ZXVlTmFtZUluZGV4ID0gaW5kZXhPZlByaW9y
        UXVldWVXaXRoQWN0aW9ucyh0aGlzLCBxdWV1ZU5hbWVJbmRleCkpICE9PSAt
        MSkgewogICAgICAgICAgICBxdWV1ZU5hbWVJbmRleCA9IHByaW9yUXVldWVO
        YW1lSW5kZXg7CiAgICAgICAgICAgIGNvbnRpbnVlIG91dGVybG9vcDsKICAg
        ICAgICAgIH0KCiAgICAgICAgICBxdWV1ZU5hbWVJbmRleCsrOwogICAgICAg
        IH0KICAgICAgfQogICAgfTsKCiAgICBmdW5jdGlvbiBpbmRleE9mUHJpb3JR
        dWV1ZVdpdGhBY3Rpb25zKGRhcSwgY3VycmVudFF1ZXVlSW5kZXgpIHsKICAg
        ICAgdmFyIHF1ZXVlTmFtZSwgcXVldWU7CgogICAgICBmb3IgKHZhciBpID0g
        MCwgbCA9IGN1cnJlbnRRdWV1ZUluZGV4OyBpIDw9IGw7IGkrKykgewogICAg
        ICAgIHF1ZXVlTmFtZSA9IGRhcS5xdWV1ZU5hbWVzW2ldOwogICAgICAgIHF1
        ZXVlID0gZGFxLnF1ZXVlc1txdWV1ZU5hbWVdOwogICAgICAgIGlmIChxdWV1
        ZS5fcXVldWUubGVuZ3RoKSB7IHJldHVybiBpOyB9CiAgICAgIH0KCiAgICAg
        IHJldHVybiAtMTsKICAgIH0KCgogICAgX19leHBvcnRzX18uRGVmZXJyZWRB
        Y3Rpb25RdWV1ZXMgPSBEZWZlcnJlZEFjdGlvblF1ZXVlczsKICB9KTsKCmRl
        ZmluZSgiYmFja2J1cm5lciIsCiAgWyJiYWNrYnVybmVyL2RlZmVycmVkX2Fj
        dGlvbl9xdWV1ZXMiLCJleHBvcnRzIl0sCiAgZnVuY3Rpb24oX19kZXBlbmRl
        bmN5MV9fLCBfX2V4cG9ydHNfXykgewogICAgInVzZSBzdHJpY3QiOwogICAg
        dmFyIERlZmVycmVkQWN0aW9uUXVldWVzID0gX19kZXBlbmRlbmN5MV9fLkRl
        ZmVycmVkQWN0aW9uUXVldWVzOwoKICAgIHZhciBzbGljZSA9IFtdLnNsaWNl
        LAogICAgICAgIHBvcCA9IFtdLnBvcCwKICAgICAgICB0aHJvdHRsZXJzID0g
        W10sCiAgICAgICAgZGVib3VuY2VlcyA9IFtdLAogICAgICAgIHRpbWVycyA9
        IFtdLAogICAgICAgIGF1dG9ydW4sIGxhdGVyVGltZXIsIGxhdGVyVGltZXJF
        eHBpcmVzQXQsCiAgICAgICAgZ2xvYmFsID0gdGhpcywKICAgICAgICBOVU1C
        RVIgPSAvXGQrLzsKCiAgICBmdW5jdGlvbiBpc0NvZXJjYWJsZU51bWJlcihu
        dW1iZXIpIHsKICAgICAgcmV0dXJuIHR5cGVvZiBudW1iZXIgPT09ICdudW1i
        ZXInIHx8IE5VTUJFUi50ZXN0KG51bWJlcik7CiAgICB9CgogICAgZnVuY3Rp
        b24gQmFja2J1cm5lcihxdWV1ZU5hbWVzLCBvcHRpb25zKSB7CiAgICAgIHRo
        aXMucXVldWVOYW1lcyA9IHF1ZXVlTmFtZXM7CiAgICAgIHRoaXMub3B0aW9u
        cyA9IG9wdGlvbnMgfHwge307CiAgICAgIGlmICghdGhpcy5vcHRpb25zLmRl
        ZmF1bHRRdWV1ZSkgewogICAgICAgIHRoaXMub3B0aW9ucy5kZWZhdWx0UXVl
        dWUgPSBxdWV1ZU5hbWVzWzBdOwogICAgICB9CiAgICAgIHRoaXMuaW5zdGFu
        Y2VTdGFjayA9IFtdOwogICAgfQoKICAgIEJhY2tidXJuZXIucHJvdG90eXBl
        ID0gewogICAgICBxdWV1ZU5hbWVzOiBudWxsLAogICAgICBvcHRpb25zOiBu
        dWxsLAogICAgICBjdXJyZW50SW5zdGFuY2U6IG51bGwsCiAgICAgIGluc3Rh
        bmNlU3RhY2s6IG51bGwsCgogICAgICBiZWdpbjogZnVuY3Rpb24oKSB7CiAg
        ICAgICAgdmFyIG9uQmVnaW4gPSB0aGlzLm9wdGlvbnMgJiYgdGhpcy5vcHRp
        b25zLm9uQmVnaW4sCiAgICAgICAgICAgIHByZXZpb3VzSW5zdGFuY2UgPSB0
        aGlzLmN1cnJlbnRJbnN0YW5jZTsKCiAgICAgICAgaWYgKHByZXZpb3VzSW5z
        dGFuY2UpIHsKICAgICAgICAgIHRoaXMuaW5zdGFuY2VTdGFjay5wdXNoKHBy
        ZXZpb3VzSW5zdGFuY2UpOwogICAgICAgIH0KCiAgICAgICAgdGhpcy5jdXJy
        ZW50SW5zdGFuY2UgPSBuZXcgRGVmZXJyZWRBY3Rpb25RdWV1ZXModGhpcy5x
        dWV1ZU5hbWVzLCB0aGlzLm9wdGlvbnMpOwogICAgICAgIGlmIChvbkJlZ2lu
        KSB7CiAgICAgICAgICBvbkJlZ2luKHRoaXMuY3VycmVudEluc3RhbmNlLCBw
        cmV2aW91c0luc3RhbmNlKTsKICAgICAgICB9CiAgICAgIH0sCgogICAgICBl
        bmQ6IGZ1bmN0aW9uKCkgewogICAgICAgIHZhciBvbkVuZCA9IHRoaXMub3B0
        aW9ucyAmJiB0aGlzLm9wdGlvbnMub25FbmQsCiAgICAgICAgICAgIGN1cnJl
        bnRJbnN0YW5jZSA9IHRoaXMuY3VycmVudEluc3RhbmNlLAogICAgICAgICAg
        ICBuZXh0SW5zdGFuY2UgPSBudWxsOwoKICAgICAgICB0cnkgewogICAgICAg
        ICAgY3VycmVudEluc3RhbmNlLmZsdXNoKCk7CiAgICAgICAgfSBmaW5hbGx5
        IHsKICAgICAgICAgIHRoaXMuY3VycmVudEluc3RhbmNlID0gbnVsbDsKCiAg
        ICAgICAgICBpZiAodGhpcy5pbnN0YW5jZVN0YWNrLmxlbmd0aCkgewogICAg
        ICAgICAgICBuZXh0SW5zdGFuY2UgPSB0aGlzLmluc3RhbmNlU3RhY2sucG9w
        KCk7CiAgICAgICAgICAgIHRoaXMuY3VycmVudEluc3RhbmNlID0gbmV4dElu
        c3RhbmNlOwogICAgICAgICAgfQoKICAgICAgICAgIGlmIChvbkVuZCkgewog
        ICAgICAgICAgICBvbkVuZChjdXJyZW50SW5zdGFuY2UsIG5leHRJbnN0YW5j
        ZSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LAoKICAgICAgcnVu
        OiBmdW5jdGlvbih0YXJnZXQsIG1ldGhvZCAvKiwgYXJncyAqLykgewogICAg
        ICAgIHZhciByZXQ7CiAgICAgICAgdGhpcy5iZWdpbigpOwoKICAgICAgICBp
        ZiAoIW1ldGhvZCkgewogICAgICAgICAgbWV0aG9kID0gdGFyZ2V0OwogICAg
        ICAgICAgdGFyZ2V0ID0gbnVsbDsKICAgICAgICB9CgogICAgICAgIGlmICh0
        eXBlb2YgbWV0aG9kID09PSAnc3RyaW5nJykgewogICAgICAgICAgbWV0aG9k
        ID0gdGFyZ2V0W21ldGhvZF07CiAgICAgICAgfQoKICAgICAgICAvLyBQcmV2
        ZW50IFNhZmFyaSBkb3VibGUtZmluYWxseS4KICAgICAgICB2YXIgZmluYWxs
        eUFscmVhZHlDYWxsZWQgPSBmYWxzZTsKICAgICAgICB0cnkgewogICAgICAg
        ICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAyKSB7CiAgICAgICAgICAgIHJl
        dCA9IG1ldGhvZC5hcHBseSh0YXJnZXQsIHNsaWNlLmNhbGwoYXJndW1lbnRz
        LCAyKSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXQgPSBt
        ZXRob2QuY2FsbCh0YXJnZXQpOwogICAgICAgICAgfQogICAgICAgIH0gZmlu
        YWxseSB7CiAgICAgICAgICBpZiAoIWZpbmFsbHlBbHJlYWR5Q2FsbGVkKSB7
        CiAgICAgICAgICAgIGZpbmFsbHlBbHJlYWR5Q2FsbGVkID0gdHJ1ZTsKICAg
        ICAgICAgICAgdGhpcy5lbmQoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAg
        ICAgICAgcmV0dXJuIHJldDsKICAgICAgfSwKCiAgICAgIGRlZmVyOiBmdW5j
        dGlvbihxdWV1ZU5hbWUsIHRhcmdldCwgbWV0aG9kIC8qICwgYXJncyAqLykg
        ewogICAgICAgIGlmICghbWV0aG9kKSB7CiAgICAgICAgICBtZXRob2QgPSB0
        YXJnZXQ7CiAgICAgICAgICB0YXJnZXQgPSBudWxsOwogICAgICAgIH0KCiAg
        ICAgICAgaWYgKHR5cGVvZiBtZXRob2QgPT09ICdzdHJpbmcnKSB7CiAgICAg
        ICAgICBtZXRob2QgPSB0YXJnZXRbbWV0aG9kXTsKICAgICAgICB9CgogICAg
        ICAgIHZhciBzdGFjayA9IHRoaXMuREVCVUcgPyBuZXcgRXJyb3IoKS5zdGFj
        ayA6IHVuZGVmaW5lZCwKICAgICAgICAgICAgYXJncyA9IGFyZ3VtZW50cy5s
        ZW5ndGggPiAzID8gc2xpY2UuY2FsbChhcmd1bWVudHMsIDMpIDogdW5kZWZp
        bmVkOwogICAgICAgIGlmICghdGhpcy5jdXJyZW50SW5zdGFuY2UpIHsgY3Jl
        YXRlQXV0b3J1bih0aGlzKTsgfQogICAgICAgIHJldHVybiB0aGlzLmN1cnJl
        bnRJbnN0YW5jZS5zY2hlZHVsZShxdWV1ZU5hbWUsIHRhcmdldCwgbWV0aG9k
        LCBhcmdzLCBmYWxzZSwgc3RhY2spOwogICAgICB9LAoKICAgICAgZGVmZXJP
        bmNlOiBmdW5jdGlvbihxdWV1ZU5hbWUsIHRhcmdldCwgbWV0aG9kIC8qICwg
        YXJncyAqLykgewogICAgICAgIGlmICghbWV0aG9kKSB7CiAgICAgICAgICBt
        ZXRob2QgPSB0YXJnZXQ7CiAgICAgICAgICB0YXJnZXQgPSBudWxsOwogICAg
        ICAgIH0KCiAgICAgICAgaWYgKHR5cGVvZiBtZXRob2QgPT09ICdzdHJpbmcn
        KSB7CiAgICAgICAgICBtZXRob2QgPSB0YXJnZXRbbWV0aG9kXTsKICAgICAg
        ICB9CgogICAgICAgIHZhciBzdGFjayA9IHRoaXMuREVCVUcgPyBuZXcgRXJy
        b3IoKS5zdGFjayA6IHVuZGVmaW5lZCwKICAgICAgICAgICAgYXJncyA9IGFy
        Z3VtZW50cy5sZW5ndGggPiAzID8gc2xpY2UuY2FsbChhcmd1bWVudHMsIDMp
        IDogdW5kZWZpbmVkOwogICAgICAgIGlmICghdGhpcy5jdXJyZW50SW5zdGFu
        Y2UpIHsgY3JlYXRlQXV0b3J1bih0aGlzKTsgfQogICAgICAgIHJldHVybiB0
        aGlzLmN1cnJlbnRJbnN0YW5jZS5zY2hlZHVsZShxdWV1ZU5hbWUsIHRhcmdl
        dCwgbWV0aG9kLCBhcmdzLCB0cnVlLCBzdGFjayk7CiAgICAgIH0sCgogICAg
        ICBzZXRUaW1lb3V0OiBmdW5jdGlvbigpIHsKICAgICAgICB2YXIgYXJncyA9
        IHNsaWNlLmNhbGwoYXJndW1lbnRzKTsKICAgICAgICB2YXIgbGVuZ3RoID0g
        YXJncy5sZW5ndGg7CiAgICAgICAgdmFyIG1ldGhvZCwgd2FpdCwgdGFyZ2V0
        OwogICAgICAgIHZhciBzZWxmID0gdGhpczsKICAgICAgICB2YXIgbWV0aG9k
        T3JUYXJnZXQsIG1ldGhvZE9yV2FpdCwgbWV0aG9kT3JBcmdzOwoKICAgICAg
        ICBpZiAobGVuZ3RoID09PSAwKSB7CiAgICAgICAgICByZXR1cm47CiAgICAg
        ICAgfSBlbHNlIGlmIChsZW5ndGggPT09IDEpIHsKICAgICAgICAgIG1ldGhv
        ZCA9IGFyZ3Muc2hpZnQoKTsKICAgICAgICAgIHdhaXQgPSAwOwogICAgICAg
        IH0gZWxzZSBpZiAobGVuZ3RoID09PSAyKSB7CiAgICAgICAgICBtZXRob2RP
        clRhcmdldCA9IGFyZ3NbMF07CiAgICAgICAgICBtZXRob2RPcldhaXQgPSBh
        cmdzWzFdOwoKICAgICAgICAgIGlmICh0eXBlb2YgbWV0aG9kT3JXYWl0ID09
        PSAnZnVuY3Rpb24nIHx8IHR5cGVvZiAgbWV0aG9kT3JUYXJnZXRbbWV0aG9k
        T3JXYWl0XSA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgICAgICB0YXJnZXQg
        PSBhcmdzLnNoaWZ0KCk7CiAgICAgICAgICAgIG1ldGhvZCA9IGFyZ3Muc2hp
        ZnQoKTsKICAgICAgICAgICAgd2FpdCA9IDA7CiAgICAgICAgICB9IGVsc2Ug
        aWYgKGlzQ29lcmNhYmxlTnVtYmVyKG1ldGhvZE9yV2FpdCkpIHsKICAgICAg
        ICAgICAgbWV0aG9kID0gYXJncy5zaGlmdCgpOwogICAgICAgICAgICB3YWl0
        ID0gYXJncy5zaGlmdCgpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAg
        ICAgbWV0aG9kID0gYXJncy5zaGlmdCgpOwogICAgICAgICAgICB3YWl0ID0g
        IDA7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHZh
        ciBsYXN0ID0gYXJnc1thcmdzLmxlbmd0aCAtIDFdOwoKICAgICAgICAgIGlm
        IChpc0NvZXJjYWJsZU51bWJlcihsYXN0KSkgewogICAgICAgICAgICB3YWl0
        ID0gYXJncy5wb3AoKTsKICAgICAgICAgIH0KCiAgICAgICAgICBtZXRob2RP
        clRhcmdldCA9IGFyZ3NbMF07CiAgICAgICAgICBtZXRob2RPckFyZ3MgPSBh
        cmdzWzFdOwoKICAgICAgICAgIGlmICh0eXBlb2YgbWV0aG9kT3JBcmdzID09
        PSAnZnVuY3Rpb24nIHx8ICh0eXBlb2YgbWV0aG9kT3JBcmdzID09PSAnc3Ry
        aW5nJyAmJgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
        ICAgICAgICAgICAgICAgIG1ldGhvZE9yVGFyZ2V0ICE9PSBudWxsICYmCiAg
        ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
        ICAgICAgbWV0aG9kT3JBcmdzIGluIG1ldGhvZE9yVGFyZ2V0KSkgewogICAg
        ICAgICAgICB0YXJnZXQgPSBhcmdzLnNoaWZ0KCk7CiAgICAgICAgICAgIG1l
        dGhvZCA9IGFyZ3Muc2hpZnQoKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAg
        ICAgICAgIG1ldGhvZCA9IGFyZ3Muc2hpZnQoKTsKICAgICAgICAgIH0KICAg
        ICAgICB9CgogICAgICAgIHZhciBleGVjdXRlQXQgPSAoK25ldyBEYXRlKCkp
        ICsgcGFyc2VJbnQod2FpdCwgMTApOwoKICAgICAgICBpZiAodHlwZW9mIG1l
        dGhvZCA9PT0gJ3N0cmluZycpIHsKICAgICAgICAgIG1ldGhvZCA9IHRhcmdl
        dFttZXRob2RdOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gZm4oKSB7
        CiAgICAgICAgICBtZXRob2QuYXBwbHkodGFyZ2V0LCBhcmdzKTsKICAgICAg
        ICB9CgogICAgICAgIC8vIGZpbmQgcG9zaXRpb24gdG8gaW5zZXJ0IC0gVE9E
        TzogYmluYXJ5IHNlYXJjaAogICAgICAgIHZhciBpLCBsOwogICAgICAgIGZv
        ciAoaSA9IDAsIGwgPSB0aW1lcnMubGVuZ3RoOyBpIDwgbDsgaSArPSAyKSB7
        CiAgICAgICAgICBpZiAoZXhlY3V0ZUF0IDwgdGltZXJzW2ldKSB7IGJyZWFr
        OyB9CiAgICAgICAgfQoKICAgICAgICB0aW1lcnMuc3BsaWNlKGksIDAsIGV4
        ZWN1dGVBdCwgZm4pOwoKICAgICAgICBpZiAobGF0ZXJUaW1lciAmJiBsYXRl
        clRpbWVyRXhwaXJlc0F0IDwgZXhlY3V0ZUF0KSB7IHJldHVybiBmbjsgfQoK
        ICAgICAgICBpZiAobGF0ZXJUaW1lcikgewogICAgICAgICAgY2xlYXJUaW1l
        b3V0KGxhdGVyVGltZXIpOwogICAgICAgICAgbGF0ZXJUaW1lciA9IG51bGw7
        CiAgICAgICAgfQogICAgICAgIGxhdGVyVGltZXIgPSBnbG9iYWwuc2V0VGlt
        ZW91dChmdW5jdGlvbigpIHsKICAgICAgICAgIGV4ZWN1dGVUaW1lcnMoc2Vs
        Zik7CiAgICAgICAgICBsYXRlclRpbWVyID0gbnVsbDsKICAgICAgICAgIGxh
        dGVyVGltZXJFeHBpcmVzQXQgPSBudWxsOwogICAgICAgIH0sIHdhaXQpOwog
        ICAgICAgIGxhdGVyVGltZXJFeHBpcmVzQXQgPSBleGVjdXRlQXQ7CgogICAg
        ICAgIHJldHVybiBmbjsKICAgICAgfSwKCiAgICAgIHRocm90dGxlOiBmdW5j
        dGlvbih0YXJnZXQsIG1ldGhvZCAvKiAsIGFyZ3MsIHdhaXQgKi8pIHsKICAg
        ICAgICB2YXIgc2VsZiA9IHRoaXMsCiAgICAgICAgICAgIGFyZ3MgPSBhcmd1
        bWVudHMsCiAgICAgICAgICAgIHdhaXQgPSBwYXJzZUludChwb3AuY2FsbChh
        cmdzKSwgMTApLAogICAgICAgICAgICB0aHJvdHRsZXI7CgogICAgICAgIGZv
        ciAodmFyIGkgPSAwLCBsID0gdGhyb3R0bGVycy5sZW5ndGg7IGkgPCBsOyBp
        KyspIHsKICAgICAgICAgIHRocm90dGxlciA9IHRocm90dGxlcnNbaV07CiAg
        ICAgICAgICBpZiAodGhyb3R0bGVyWzBdID09PSB0YXJnZXQgJiYgdGhyb3R0
        bGVyWzFdID09PSBtZXRob2QpIHsgcmV0dXJuOyB9IC8vIGRvIG5vdGhpbmcK
        ICAgICAgICB9CgogICAgICAgIHZhciB0aW1lciA9IGdsb2JhbC5zZXRUaW1l
        b3V0KGZ1bmN0aW9uKCkgewogICAgICAgICAgc2VsZi5ydW4uYXBwbHkoc2Vs
        ZiwgYXJncyk7CgogICAgICAgICAgLy8gcmVtb3ZlIHRocm90dGxlcgogICAg
        ICAgICAgdmFyIGluZGV4ID0gLTE7CiAgICAgICAgICBmb3IgKHZhciBpID0g
        MCwgbCA9IHRocm90dGxlcnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7CiAgICAg
        ICAgICAgIHRocm90dGxlciA9IHRocm90dGxlcnNbaV07CiAgICAgICAgICAg
        IGlmICh0aHJvdHRsZXJbMF0gPT09IHRhcmdldCAmJiB0aHJvdHRsZXJbMV0g
        PT09IG1ldGhvZCkgewogICAgICAgICAgICAgIGluZGV4ID0gaTsKICAgICAg
        ICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgfQoKICAg
        ICAgICAgIGlmIChpbmRleCA+IC0xKSB7IHRocm90dGxlcnMuc3BsaWNlKGlu
        ZGV4LCAxKTsgfQogICAgICAgIH0sIHdhaXQpOwoKICAgICAgICB0aHJvdHRs
        ZXJzLnB1c2goW3RhcmdldCwgbWV0aG9kLCB0aW1lcl0pOwogICAgICB9LAoK
        ICAgICAgZGVib3VuY2U6IGZ1bmN0aW9uKHRhcmdldCwgbWV0aG9kIC8qICwg
        YXJncywgd2FpdCwgW2ltbWVkaWF0ZV0gKi8pIHsKICAgICAgICB2YXIgc2Vs
        ZiA9IHRoaXMsCiAgICAgICAgICAgIGFyZ3MgPSBhcmd1bWVudHMsCiAgICAg
        ICAgICAgIGltbWVkaWF0ZSA9IHBvcC5jYWxsKGFyZ3MpLAogICAgICAgICAg
        ICB3YWl0LAogICAgICAgICAgICBpbmRleCwKICAgICAgICAgICAgZGVib3Vu
        Y2VlOwoKICAgICAgICBpZiAodHlwZW9mIGltbWVkaWF0ZSA9PT0gIm51bWJl
        ciIgfHwgdHlwZW9mIGltbWVkaWF0ZSA9PT0gInN0cmluZyIpIHsKICAgICAg
        ICAgIHdhaXQgPSBpbW1lZGlhdGU7CiAgICAgICAgICBpbW1lZGlhdGUgPSBm
        YWxzZTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgd2FpdCA9IHBvcC5j
        YWxsKGFyZ3MpOwogICAgICAgIH0KCiAgICAgICAgd2FpdCA9IHBhcnNlSW50
        KHdhaXQsIDEwKTsKICAgICAgICAvLyBSZW1vdmUgZGVib3VuY2VlCiAgICAg
        ICAgaW5kZXggPSBmaW5kRGVib3VuY2VlKHRhcmdldCwgbWV0aG9kKTsKCiAg
        ICAgICAgaWYgKGluZGV4ICE9PSAtMSkgewogICAgICAgICAgZGVib3VuY2Vl
        ID0gZGVib3VuY2Vlc1tpbmRleF07CiAgICAgICAgICBkZWJvdW5jZWVzLnNw
        bGljZShpbmRleCwgMSk7CiAgICAgICAgICBjbGVhclRpbWVvdXQoZGVib3Vu
        Y2VlWzJdKTsKICAgICAgICB9CgogICAgICAgIHZhciB0aW1lciA9IGdsb2Jh
        bC5zZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgICAgaWYgKCFpbW1l
        ZGlhdGUpIHsKICAgICAgICAgICAgc2VsZi5ydW4uYXBwbHkoc2VsZiwgYXJn
        cyk7CiAgICAgICAgICB9CiAgICAgICAgICBpbmRleCA9IGZpbmREZWJvdW5j
        ZWUodGFyZ2V0LCBtZXRob2QpOwogICAgICAgICAgaWYgKGluZGV4KSB7CiAg
        ICAgICAgICAgIGRlYm91bmNlZXMuc3BsaWNlKGluZGV4LCAxKTsKICAgICAg
        ICAgIH0KICAgICAgICB9LCB3YWl0KTsKCiAgICAgICAgaWYgKGltbWVkaWF0
        ZSAmJiBpbmRleCA9PT0gLTEpIHsKICAgICAgICAgIHNlbGYucnVuLmFwcGx5
        KHNlbGYsIGFyZ3MpOwogICAgICAgIH0KCiAgICAgICAgZGVib3VuY2Vlcy5w
        dXNoKFt0YXJnZXQsIG1ldGhvZCwgdGltZXJdKTsKICAgICAgfSwKCiAgICAg
        IGNhbmNlbFRpbWVyczogZnVuY3Rpb24oKSB7CiAgICAgICAgdmFyIGksIGxl
        bjsKCiAgICAgICAgZm9yIChpID0gMCwgbGVuID0gdGhyb3R0bGVycy5sZW5n
        dGg7IGkgPCBsZW47IGkrKykgewogICAgICAgICAgY2xlYXJUaW1lb3V0KHRo
        cm90dGxlcnNbaV1bMl0pOwogICAgICAgIH0KICAgICAgICB0aHJvdHRsZXJz
        ID0gW107CgogICAgICAgIGZvciAoaSA9IDAsIGxlbiA9IGRlYm91bmNlZXMu
        bGVuZ3RoOyBpIDwgbGVuOyBpKyspIHsKICAgICAgICAgIGNsZWFyVGltZW91
        dChkZWJvdW5jZWVzW2ldWzJdKTsKICAgICAgICB9CiAgICAgICAgZGVib3Vu
        Y2VlcyA9IFtdOwoKICAgICAgICBpZiAobGF0ZXJUaW1lcikgewogICAgICAg
        ICAgY2xlYXJUaW1lb3V0KGxhdGVyVGltZXIpOwogICAgICAgICAgbGF0ZXJU
        aW1lciA9IG51bGw7CiAgICAgICAgfQogICAgICAgIHRpbWVycyA9IFtdOwoK
        ICAgICAgICBpZiAoYXV0b3J1bikgewogICAgICAgICAgY2xlYXJUaW1lb3V0
        KGF1dG9ydW4pOwogICAgICAgICAgYXV0b3J1biA9IG51bGw7CiAgICAgICAg
        fQogICAgICB9LAoKICAgICAgaGFzVGltZXJzOiBmdW5jdGlvbigpIHsKICAg
        ICAgICByZXR1cm4gISF0aW1lcnMubGVuZ3RoIHx8IGF1dG9ydW47CiAgICAg
        IH0sCgogICAgICBjYW5jZWw6IGZ1bmN0aW9uKHRpbWVyKSB7CiAgICAgICAg
        aWYgKHRpbWVyICYmIHR5cGVvZiB0aW1lciA9PT0gJ29iamVjdCcgJiYgdGlt
        ZXIucXVldWUgJiYgdGltZXIubWV0aG9kKSB7IC8vIHdlJ3JlIGNhbmNlbGxp
        bmcgYSBkZWZlck9uY2UKICAgICAgICAgIHJldHVybiB0aW1lci5xdWV1ZS5j
        YW5jZWwodGltZXIpOwogICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHRpbWVy
        ID09PSAnZnVuY3Rpb24nKSB7IC8vIHdlJ3JlIGNhbmNlbGxpbmcgYSBzZXRU
        aW1lb3V0CiAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbCA9IHRpbWVycy5s
        ZW5ndGg7IGkgPCBsOyBpICs9IDIpIHsKICAgICAgICAgICAgaWYgKHRpbWVy
        c1tpICsgMV0gPT09IHRpbWVyKSB7CiAgICAgICAgICAgICAgdGltZXJzLnNw
        bGljZShpLCAyKTsgLy8gcmVtb3ZlIHRoZSB0d28gZWxlbWVudHMKICAgICAg
        ICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgICAg
        fQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXR1cm47IC8vIHRpbWVy
        IHdhcyBudWxsIG9yIG5vdCBhIHRpbWVyCiAgICAgICAgfQogICAgICB9CiAg
        ICB9OwoKICAgIEJhY2tidXJuZXIucHJvdG90eXBlLnNjaGVkdWxlID0gQmFj
        a2J1cm5lci5wcm90b3R5cGUuZGVmZXI7CiAgICBCYWNrYnVybmVyLnByb3Rv
        dHlwZS5zY2hlZHVsZU9uY2UgPSBCYWNrYnVybmVyLnByb3RvdHlwZS5kZWZl
        ck9uY2U7CiAgICBCYWNrYnVybmVyLnByb3RvdHlwZS5sYXRlciA9IEJhY2ti
        dXJuZXIucHJvdG90eXBlLnNldFRpbWVvdXQ7CgogICAgZnVuY3Rpb24gY3Jl
        YXRlQXV0b3J1bihiYWNrYnVybmVyKSB7CiAgICAgIGJhY2tidXJuZXIuYmVn
        aW4oKTsKICAgICAgYXV0b3J1biA9IGdsb2JhbC5zZXRUaW1lb3V0KGZ1bmN0
        aW9uKCkgewogICAgICAgIGF1dG9ydW4gPSBudWxsOwogICAgICAgIGJhY2ti
        dXJuZXIuZW5kKCk7CiAgICAgIH0pOwogICAgfQoKICAgIGZ1bmN0aW9uIGV4
        ZWN1dGVUaW1lcnMoc2VsZikgewogICAgICB2YXIgbm93ID0gK25ldyBEYXRl
        KCksCiAgICAgICAgICB0aW1lLCBmbnMsIGksIGw7CgogICAgICBzZWxmLnJ1
        bihmdW5jdGlvbigpIHsKICAgICAgICAvLyBUT0RPOiBiaW5hcnkgc2VhcmNo
        CiAgICAgICAgZm9yIChpID0gMCwgbCA9IHRpbWVycy5sZW5ndGg7IGkgPCBs
        OyBpICs9IDIpIHsKICAgICAgICAgIHRpbWUgPSB0aW1lcnNbaV07CiAgICAg
        ICAgICBpZiAodGltZSA+IG5vdykgeyBicmVhazsgfQogICAgICAgIH0KCiAg
        ICAgICAgZm5zID0gdGltZXJzLnNwbGljZSgwLCBpKTsKCiAgICAgICAgZm9y
        IChpID0gMSwgbCA9IGZucy5sZW5ndGg7IGkgPCBsOyBpICs9IDIpIHsKICAg
        ICAgICAgIHNlbGYuc2NoZWR1bGUoc2VsZi5vcHRpb25zLmRlZmF1bHRRdWV1
        ZSwgbnVsbCwgZm5zW2ldKTsKICAgICAgICB9CiAgICAgIH0pOwoKICAgICAg
        aWYgKHRpbWVycy5sZW5ndGgpIHsKICAgICAgICBsYXRlclRpbWVyID0gZ2xv
        YmFsLnNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgICBleGVjdXRl
        VGltZXJzKHNlbGYpOwogICAgICAgICAgbGF0ZXJUaW1lciA9IG51bGw7CiAg
        ICAgICAgICBsYXRlclRpbWVyRXhwaXJlc0F0ID0gbnVsbDsKICAgICAgICB9
        LCB0aW1lcnNbMF0gLSBub3cpOwogICAgICAgIGxhdGVyVGltZXJFeHBpcmVz
        QXQgPSB0aW1lcnNbMF07CiAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBm
        aW5kRGVib3VuY2VlKHRhcmdldCwgbWV0aG9kKSB7CiAgICAgIHZhciBkZWJv
        dW5jZWUsCiAgICAgICAgICBpbmRleCA9IC0xOwoKICAgICAgZm9yICh2YXIg
        aSA9IDAsIGwgPSBkZWJvdW5jZWVzLmxlbmd0aDsgaSA8IGw7IGkrKykgewog
        ICAgICAgIGRlYm91bmNlZSA9IGRlYm91bmNlZXNbaV07CiAgICAgICAgaWYg
        KGRlYm91bmNlZVswXSA9PT0gdGFyZ2V0ICYmIGRlYm91bmNlZVsxXSA9PT0g
        bWV0aG9kKSB7CiAgICAgICAgICBpbmRleCA9IGk7CiAgICAgICAgICBicmVh
        azsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiBpbmRleDsKICAg
        IH0KCgogICAgX19leHBvcnRzX18uQmFja2J1cm5lciA9IEJhY2tidXJuZXI7
        CiAgfSk7Cgp9KSgpOwoKCgooZnVuY3Rpb24oKSB7CnZhciBvbkJlZ2luID0g
        ZnVuY3Rpb24oY3VycmVudCkgewogIEVtYmVyLnJ1bi5jdXJyZW50UnVuTG9v
        cCA9IGN1cnJlbnQ7Cn07Cgp2YXIgb25FbmQgPSBmdW5jdGlvbihjdXJyZW50
        LCBuZXh0KSB7CiAgRW1iZXIucnVuLmN1cnJlbnRSdW5Mb29wID0gbmV4dDsK
        fTsKCnZhciBCYWNrYnVybmVyID0gcmVxdWlyZU1vZHVsZSgnYmFja2J1cm5l
        cicpLkJhY2tidXJuZXIsCiAgICBiYWNrYnVybmVyID0gbmV3IEJhY2tidXJu
        ZXIoWydzeW5jJywgJ2FjdGlvbnMnLCAnZGVzdHJveSddLCB7CiAgICAgIHN5
        bmM6IHsKICAgICAgICBiZWZvcmU6IEVtYmVyLmJlZ2luUHJvcGVydHlDaGFu
        Z2VzLAogICAgICAgIGFmdGVyOiBFbWJlci5lbmRQcm9wZXJ0eUNoYW5nZXMK
        ICAgICAgfSwKICAgICAgZGVmYXVsdFF1ZXVlOiAnYWN0aW9ucycsCiAgICAg
        IG9uQmVnaW46IG9uQmVnaW4sCiAgICAgIG9uRW5kOiBvbkVuZAogICAgfSks
        CiAgICBzbGljZSA9IFtdLnNsaWNlOwoKLy8gLi4uLi4uLi4uLi4uLi4uLi4u
        Li4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLgovLyBF
        bWJlci5ydW4gLSB0aGlzIGlzIGlkZWFsbHkgdGhlIG9ubHkgcHVibGljIEFQ
        SSB0aGUgZGV2IHNlZXMKLy8KCi8qKgogIFJ1bnMgdGhlIHBhc3NlZCB0YXJn
        ZXQgYW5kIG1ldGhvZCBpbnNpZGUgb2YgYSBSdW5Mb29wLCBlbnN1cmluZyBh
        bnkKICBkZWZlcnJlZCBhY3Rpb25zIGluY2x1ZGluZyBiaW5kaW5ncyBhbmQg
        dmlld3MgdXBkYXRlcyBhcmUgZmx1c2hlZCBhdCB0aGUKICBlbmQuCgogIE5v
        cm1hbGx5IHlvdSBzaG91bGQgbm90IG5lZWQgdG8gaW52b2tlIHRoaXMgbWV0
        aG9kIHlvdXJzZWxmLiBIb3dldmVyIGlmCiAgeW91IGFyZSBpbXBsZW1lbnRp
        bmcgcmF3IGV2ZW50IGhhbmRsZXJzIHdoZW4gaW50ZXJmYWNpbmcgd2l0aCBv
        dGhlcgogIGxpYnJhcmllcyBvciBwbHVnaW5zLCB5b3Ugc2hvdWxkIHByb2Jh
        Ymx5IHdyYXAgYWxsIG9mIHlvdXIgY29kZSBpbnNpZGUgdGhpcwogIGNhbGwu
        CgogIGBgYGphdmFzY3JpcHQKICBFbWJlci5ydW4oZnVuY3Rpb24oKSB7CiAg
        ICAvLyBjb2RlIHRvIGJlIGV4ZWN1dGUgd2l0aGluIGEgUnVuTG9vcAogIH0p
        OwogIGBgYAoKICBAY2xhc3MgcnVuCiAgQG5hbWVzcGFjZSBFbWJlcgogIEBz
        dGF0aWMKICBAY29uc3RydWN0b3IKICBAcGFyYW0ge09iamVjdH0gW3Rhcmdl
        dF0gdGFyZ2V0IG9mIG1ldGhvZCB0byBjYWxsCiAgQHBhcmFtIHtGdW5jdGlv
        bnxTdHJpbmd9IG1ldGhvZCBNZXRob2QgdG8gaW52b2tlLgogICAgTWF5IGJl
        IGEgZnVuY3Rpb24gb3IgYSBzdHJpbmcuIElmIHlvdSBwYXNzIGEgc3RyaW5n
        CiAgICB0aGVuIGl0IHdpbGwgYmUgbG9va2VkIHVwIG9uIHRoZSBwYXNzZWQg
        dGFyZ2V0LgogIEBwYXJhbSB7T2JqZWN0fSBbYXJncypdIEFueSBhZGRpdGlv
        bmFsIGFyZ3VtZW50cyB5b3Ugd2lzaCB0byBwYXNzIHRvIHRoZSBtZXRob2Qu
        CiAgQHJldHVybiB7T2JqZWN0fSByZXR1cm4gdmFsdWUgZnJvbSBpbnZva2lu
        ZyB0aGUgcGFzc2VkIGZ1bmN0aW9uLgoqLwpFbWJlci5ydW4gPSBmdW5jdGlv
        bih0YXJnZXQsIG1ldGhvZCkgewogIHZhciByZXQ7CgogIGlmIChFbWJlci5v
        bmVycm9yKSB7CiAgICB0cnkgewogICAgICByZXQgPSBiYWNrYnVybmVyLnJ1
        bi5hcHBseShiYWNrYnVybmVyLCBhcmd1bWVudHMpOwogICAgfSBjYXRjaCAo
        ZSkgewogICAgICBFbWJlci5vbmVycm9yKGUpOwogICAgfQogIH0gZWxzZSB7
        CiAgICByZXQgPSBiYWNrYnVybmVyLnJ1bi5hcHBseShiYWNrYnVybmVyLCBh
        cmd1bWVudHMpOwogIH0KCiAgcmV0dXJuIHJldDsKfTsKCi8qKgoKICBJZiBu
        byBydW4tbG9vcCBpcyBwcmVzZW50LCBpdCBjcmVhdGVzIGEgbmV3IG9uZS4g
        SWYgYSBydW4gbG9vcCBpcwogIHByZXNlbnQgaXQgd2lsbCBxdWV1ZSBpdHNl
        bGYgdG8gcnVuIG9uIHRoZSBleGlzdGluZyBydW4tbG9vcHMgYWN0aW9uCiAg
        cXVldWUuCgogIFBsZWFzZSBub3RlOiBUaGlzIGlzIG5vdCBmb3Igbm9ybWFs
        IHVzYWdlLCBhbmQgc2hvdWxkIGJlIHVzZWQgc3BhcmluZ2x5LgoKICBJZiBp
        bnZva2VkIHdoZW4gbm90IHdpdGhpbiBhIHJ1biBsb29wOgoKICBgYGBqYXZh
        c2NyaXB0CiAgRW1iZXIucnVuLmpvaW4oZnVuY3Rpb24oKSB7CiAgICAvLyBj
        cmVhdGVzIGEgbmV3IHJ1bi1sb29wCiAgfSk7CiAgYGBgCgogIEFsdGVybmF0
        aXZlbHksIGlmIGNhbGxlZCB3aXRoaW4gYW4gZXhpc3RpbmcgcnVuIGxvb3A6
        CgogIGBgYGphdmFzY3JpcHQKICBFbWJlci5ydW4oZnVuY3Rpb24oKSB7CiAg
        ICAvLyBjcmVhdGVzIGEgbmV3IHJ1bi1sb29wCiAgICBFbWJlci5ydW4uam9p
        bihmdW5jdGlvbigpIHsKICAgICAgLy8gam9pbnMgd2l0aCB0aGUgZXhpc3Rp
        bmcgcnVuLWxvb3AsIGFuZCBxdWV1ZXMgZm9yIGludm9jYXRpb24gb24KICAg
        ICAgLy8gdGhlIGV4aXN0aW5nIHJ1bi1sb29wcyBhY3Rpb24gcXVldWUuCiAg
        ICB9KTsKICB9KTsKICBgYGAKCiAgQG1ldGhvZCBqb2luCiAgQG5hbWVzcGFj
        ZSBFbWJlcgogIEBwYXJhbSB7T2JqZWN0fSBbdGFyZ2V0XSB0YXJnZXQgb2Yg
        bWV0aG9kIHRvIGNhbGwKICBAcGFyYW0ge0Z1bmN0aW9ufFN0cmluZ30gbWV0
        aG9kIE1ldGhvZCB0byBpbnZva2UuCiAgICBNYXkgYmUgYSBmdW5jdGlvbiBv
        ciBhIHN0cmluZy4gSWYgeW91IHBhc3MgYSBzdHJpbmcKICAgIHRoZW4gaXQg
        d2lsbCBiZSBsb29rZWQgdXAgb24gdGhlIHBhc3NlZCB0YXJnZXQuCiAgQHBh
        cmFtIHtPYmplY3R9IFthcmdzKl0gQW55IGFkZGl0aW9uYWwgYXJndW1lbnRz
        IHlvdSB3aXNoIHRvIHBhc3MgdG8gdGhlIG1ldGhvZC4KICBAcmV0dXJuIHtP
        YmplY3R9IHJldHVybiB2YWx1ZSBmcm9tIGludm9raW5nIHRoZSBwYXNzZWQg
        ZnVuY3Rpb24uIFBsZWFzZSBub3RlLAogIHdoZW4gY2FsbGVkIHdpdGhpbiBh
        biBleGlzdGluZyBsb29wLCBubyByZXR1cm4gdmFsdWUgaXMgcG9zc2libGUu
        CiovCkVtYmVyLnJ1bi5qb2luID0gZnVuY3Rpb24odGFyZ2V0LCBtZXRob2Qp
        IHsKICBpZiAoIUVtYmVyLnJ1bi5jdXJyZW50UnVuTG9vcCkgewogICAgcmV0
        dXJuIEVtYmVyLnJ1bi5hcHBseShFbWJlci5ydW4sIGFyZ3VtZW50cyk7CiAg
        fQoKICB2YXIgYXJncyA9IHNsaWNlLmNhbGwoYXJndW1lbnRzKTsKICBhcmdz
        LnVuc2hpZnQoJ2FjdGlvbnMnKTsKICBFbWJlci5ydW4uc2NoZWR1bGUuYXBw
        bHkoRW1iZXIucnVuLCBhcmdzKTsKfTsKCkVtYmVyLnJ1bi5iYWNrYnVybmVy
        ID0gYmFja2J1cm5lcjsKCnZhciBydW4gPSBFbWJlci5ydW47CgpFbWJlci5y
        dW4uY3VycmVudFJ1bkxvb3AgPSBudWxsOwoKRW1iZXIucnVuLnF1ZXVlcyA9
        IGJhY2tidXJuZXIucXVldWVOYW1lczsKCi8qKgogIEJlZ2lucyBhIG5ldyBS
        dW5Mb29wLiBBbnkgZGVmZXJyZWQgYWN0aW9ucyBpbnZva2VkIGFmdGVyIHRo
        ZSBiZWdpbiB3aWxsCiAgYmUgYnVmZmVyZWQgdW50aWwgeW91IGludm9rZSBh
        IG1hdGNoaW5nIGNhbGwgdG8gYEVtYmVyLnJ1bi5lbmQoKWAuIFRoaXMgaXMK
        ICBhIGxvd2VyLWxldmVsIHdheSB0byB1c2UgYSBSdW5Mb29wIGluc3RlYWQg
        b2YgdXNpbmcgYEVtYmVyLnJ1bigpYC4KCiAgYGBgamF2YXNjcmlwdAogIEVt
        YmVyLnJ1bi5iZWdpbigpOwogIC8vIGNvZGUgdG8gYmUgZXhlY3V0ZSB3aXRo
        aW4gYSBSdW5Mb29wCiAgRW1iZXIucnVuLmVuZCgpOwogIGBgYAoKICBAbWV0
        aG9kIGJlZ2luCiAgQHJldHVybiB7dm9pZH0KKi8KRW1iZXIucnVuLmJlZ2lu
        ID0gZnVuY3Rpb24oKSB7CiAgYmFja2J1cm5lci5iZWdpbigpOwp9OwoKLyoq
        CiAgRW5kcyBhIFJ1bkxvb3AuIFRoaXMgbXVzdCBiZSBjYWxsZWQgc29tZXRp
        bWUgYWZ0ZXIgeW91IGNhbGwKICBgRW1iZXIucnVuLmJlZ2luKClgIHRvIGZs
        dXNoIGFueSBkZWZlcnJlZCBhY3Rpb25zLiBUaGlzIGlzIGEgbG93ZXItbGV2
        ZWwgd2F5CiAgdG8gdXNlIGEgUnVuTG9vcCBpbnN0ZWFkIG9mIHVzaW5nIGBF
        bWJlci5ydW4oKWAuCgogIGBgYGphdmFzY3JpcHQKICBFbWJlci5ydW4uYmVn
        aW4oKTsKICAvLyBjb2RlIHRvIGJlIGV4ZWN1dGUgd2l0aGluIGEgUnVuTG9v
        cAogIEVtYmVyLnJ1bi5lbmQoKTsKICBgYGAKCiAgQG1ldGhvZCBlbmQKICBA
        cmV0dXJuIHt2b2lkfQoqLwpFbWJlci5ydW4uZW5kID0gZnVuY3Rpb24oKSB7
        CiAgYmFja2J1cm5lci5lbmQoKTsKfTsKCi8qKgogIEFycmF5IG9mIG5hbWVk
        IHF1ZXVlcy4gVGhpcyBhcnJheSBkZXRlcm1pbmVzIHRoZSBvcmRlciBpbiB3
        aGljaCBxdWV1ZXMKICBhcmUgZmx1c2hlZCBhdCB0aGUgZW5kIG9mIHRoZSBS
        dW5Mb29wLiBZb3UgY2FuIGRlZmluZSB5b3VyIG93biBxdWV1ZXMgYnkKICBz
        aW1wbHkgYWRkaW5nIHRoZSBxdWV1ZSBuYW1lIHRvIHRoaXMgYXJyYXkuIE5v
        cm1hbGx5IHlvdSBzaG91bGQgbm90IG5lZWQKICB0byBpbnNwZWN0IG9yIG1v
        ZGlmeSB0aGlzIHByb3BlcnR5LgoKICBAcHJvcGVydHkgcXVldWVzCiAgQHR5
        cGUgQXJyYXkKICBAZGVmYXVsdCBbJ3N5bmMnLCAnYWN0aW9ucycsICdkZXN0
        cm95J10KKi8KCi8qKgogIEFkZHMgdGhlIHBhc3NlZCB0YXJnZXQvbWV0aG9k
        IGFuZCBhbnkgb3B0aW9uYWwgYXJndW1lbnRzIHRvIHRoZSBuYW1lZAogIHF1
        ZXVlIHRvIGJlIGV4ZWN1dGVkIGF0IHRoZSBlbmQgb2YgdGhlIFJ1bkxvb3Au
        IElmIHlvdSBoYXZlIG5vdCBhbHJlYWR5CiAgc3RhcnRlZCBhIFJ1bkxvb3Ag
        d2hlbiBjYWxsaW5nIHRoaXMgbWV0aG9kIG9uZSB3aWxsIGJlIHN0YXJ0ZWQg
        Zm9yIHlvdQogIGF1dG9tYXRpY2FsbHkuCgogIEF0IHRoZSBlbmQgb2YgYSBS
        dW5Mb29wLCBhbnkgbWV0aG9kcyBzY2hlZHVsZWQgaW4gdGhpcyB3YXkgd2ls
        bCBiZSBpbnZva2VkLgogIE1ldGhvZHMgd2lsbCBiZSBpbnZva2VkIGluIGFu
        IG9yZGVyIG1hdGNoaW5nIHRoZSBuYW1lZCBxdWV1ZXMgZGVmaW5lZCBpbgog
        IHRoZSBgRW1iZXIucnVuLnF1ZXVlc2AgcHJvcGVydHkuCgogIGBgYGphdmFz
        Y3JpcHQKICBFbWJlci5ydW4uc2NoZWR1bGUoJ3N5bmMnLCB0aGlzLCBmdW5j
        dGlvbigpIHsKICAgIC8vIHRoaXMgd2lsbCBiZSBleGVjdXRlZCBpbiB0aGUg
        Zmlyc3QgUnVuTG9vcCBxdWV1ZSwgd2hlbiBiaW5kaW5ncyBhcmUgc3luY2Vk
        CiAgICBjb25zb2xlLmxvZygic2NoZWR1bGVkIG9uIHN5bmMgcXVldWUiKTsK
        ICB9KTsKCiAgRW1iZXIucnVuLnNjaGVkdWxlKCdhY3Rpb25zJywgdGhpcywg
        ZnVuY3Rpb24oKSB7CiAgICAvLyB0aGlzIHdpbGwgYmUgZXhlY3V0ZWQgaW4g
        dGhlICdhY3Rpb25zJyBxdWV1ZSwgYWZ0ZXIgYmluZGluZ3MgaGF2ZSBzeW5j
        ZWQuCiAgICBjb25zb2xlLmxvZygic2NoZWR1bGVkIG9uIGFjdGlvbnMgcXVl
        dWUiKTsKICB9KTsKCiAgLy8gTm90ZSB0aGUgZnVuY3Rpb25zIHdpbGwgYmUg
        cnVuIGluIG9yZGVyIGJhc2VkIG9uIHRoZSBydW4gcXVldWVzIG9yZGVyLiBP
        dXRwdXQgd291bGQgYmU6CiAgLy8gICBzY2hlZHVsZWQgb24gc3luYyBxdWV1
        ZQogIC8vICAgc2NoZWR1bGVkIG9uIGFjdGlvbnMgcXVldWUKICBgYGAKCiAg
        QG1ldGhvZCBzY2hlZHVsZQogIEBwYXJhbSB7U3RyaW5nfSBxdWV1ZSBUaGUg
        bmFtZSBvZiB0aGUgcXVldWUgdG8gc2NoZWR1bGUgYWdhaW5zdC4KICAgIERl
        ZmF1bHQgcXVldWVzIGFyZSAnc3luYycgYW5kICdhY3Rpb25zJwogIEBwYXJh
        bSB7T2JqZWN0fSBbdGFyZ2V0XSB0YXJnZXQgb2JqZWN0IHRvIHVzZSBhcyB0
        aGUgY29udGV4dCB3aGVuIGludm9raW5nIGEgbWV0aG9kLgogIEBwYXJhbSB7
        U3RyaW5nfEZ1bmN0aW9ufSBtZXRob2QgVGhlIG1ldGhvZCB0byBpbnZva2Uu
        IElmIHlvdSBwYXNzIGEgc3RyaW5nIGl0CiAgICB3aWxsIGJlIHJlc29sdmVk
        IG9uIHRoZSB0YXJnZXQgb2JqZWN0IGF0IHRoZSB0aW1lIHRoZSBzY2hlZHVs
        ZWQgaXRlbSBpcwogICAgaW52b2tlZCBhbGxvd2luZyB5b3UgdG8gY2hhbmdl
        IHRoZSB0YXJnZXQgZnVuY3Rpb24uCiAgQHBhcmFtIHtPYmplY3R9IFthcmd1
        bWVudHMqXSBPcHRpb25hbCBhcmd1bWVudHMgdG8gYmUgcGFzc2VkIHRvIHRo
        ZSBxdWV1ZWQgbWV0aG9kLgogIEByZXR1cm4ge3ZvaWR9CiovCkVtYmVyLnJ1
        bi5zY2hlZHVsZSA9IGZ1bmN0aW9uKHF1ZXVlLCB0YXJnZXQsIG1ldGhvZCkg
        ewogIGNoZWNrQXV0b1J1bigpOwogIGJhY2tidXJuZXIuc2NoZWR1bGUuYXBw
        bHkoYmFja2J1cm5lciwgYXJndW1lbnRzKTsKfTsKCi8vIFVzZWQgYnkgZ2xv
        YmFsIHRlc3QgdGVhcmRvd24KRW1iZXIucnVuLmhhc1NjaGVkdWxlZFRpbWVy
        cyA9IGZ1bmN0aW9uKCkgewogIHJldHVybiBiYWNrYnVybmVyLmhhc1RpbWVy
        cygpOwp9OwoKLy8gVXNlZCBieSBnbG9iYWwgdGVzdCB0ZWFyZG93bgpFbWJl
        ci5ydW4uY2FuY2VsVGltZXJzID0gZnVuY3Rpb24gKCkgewogIGJhY2tidXJu
        ZXIuY2FuY2VsVGltZXJzKCk7Cn07CgovKioKICBJbW1lZGlhdGVseSBmbHVz
        aGVzIGFueSBldmVudHMgc2NoZWR1bGVkIGluIHRoZSAnc3luYycgcXVldWUu
        IEJpbmRpbmdzCiAgdXNlIHRoaXMgcXVldWUgc28gdGhpcyBtZXRob2QgaXMg
        YSB1c2VmdWwgd2F5IHRvIGltbWVkaWF0ZWx5IGZvcmNlIGFsbAogIGJpbmRp
        bmdzIGluIHRoZSBhcHBsaWNhdGlvbiB0byBzeW5jLgoKICBZb3Ugc2hvdWxk
        IGNhbGwgdGhpcyBtZXRob2QgYW55dGltZSB5b3UgbmVlZCBhbnkgY2hhbmdl
        ZCBzdGF0ZSB0byBwcm9wYWdhdGUKICB0aHJvdWdob3V0IHRoZSBhcHAgaW1t
        ZWRpYXRlbHkgd2l0aG91dCByZXBhaW50aW5nIHRoZSBVSSAod2hpY2ggaGFw
        cGVucwogIGluIHRoZSBsYXRlciAncmVuZGVyJyBxdWV1ZSBhZGRlZCBieSB0
        aGUgYGVtYmVyLXZpZXdzYCBwYWNrYWdlKS4KCiAgYGBgamF2YXNjcmlwdAog
        IEVtYmVyLnJ1bi5zeW5jKCk7CiAgYGBgCgogIEBtZXRob2Qgc3luYwogIEBy
        ZXR1cm4ge3ZvaWR9CiovCkVtYmVyLnJ1bi5zeW5jID0gZnVuY3Rpb24oKSB7
        CiAgaWYgKGJhY2tidXJuZXIuY3VycmVudEluc3RhbmNlKSB7CiAgICBiYWNr
        YnVybmVyLmN1cnJlbnRJbnN0YW5jZS5xdWV1ZXMuc3luYy5mbHVzaCgpOwog
        IH0KfTsKCi8qKgogIEludm9rZXMgdGhlIHBhc3NlZCB0YXJnZXQvbWV0aG9k
        IGFuZCBvcHRpb25hbCBhcmd1bWVudHMgYWZ0ZXIgYSBzcGVjaWZpZWQKICBw
        ZXJpb2QgaWYgdGltZS4gVGhlIGxhc3QgcGFyYW1ldGVyIG9mIHRoaXMgbWV0
        aG9kIG11c3QgYWx3YXlzIGJlIGEgbnVtYmVyCiAgb2YgbWlsbGlzZWNvbmRz
        LgoKICBZb3Ugc2hvdWxkIHVzZSB0aGlzIG1ldGhvZCB3aGVuZXZlciB5b3Ug
        bmVlZCB0byBydW4gc29tZSBhY3Rpb24gYWZ0ZXIgYQogIHBlcmlvZCBvZiB0
        aW1lIGluc3RlYWQgb2YgdXNpbmcgYHNldFRpbWVvdXQoKWAuIFRoaXMgbWV0
        aG9kIHdpbGwgZW5zdXJlIHRoYXQKICBpdGVtcyB0aGF0IGV4cGlyZSBkdXJp
        bmcgdGhlIHNhbWUgc2NyaXB0IGV4ZWN1dGlvbiBjeWNsZSBhbGwgZXhlY3V0
        ZQogIHRvZ2V0aGVyLCB3aGljaCBpcyBvZnRlbiBtb3JlIGVmZmljaWVudCB0
        aGFuIHVzaW5nIGEgcmVhbCBzZXRUaW1lb3V0LgoKICBgYGBqYXZhc2NyaXB0
        CiAgRW1iZXIucnVuLmxhdGVyKG15Q29udGV4dCwgZnVuY3Rpb24oKSB7CiAg
        ICAvLyBjb2RlIGhlcmUgd2lsbCBleGVjdXRlIHdpdGhpbiBhIFJ1bkxvb3Ag
        aW4gYWJvdXQgNTAwbXMgd2l0aCB0aGlzID09IG15Q29udGV4dAogIH0sIDUw
        MCk7CiAgYGBgCgogIEBtZXRob2QgbGF0ZXIKICBAcGFyYW0ge09iamVjdH0g
        W3RhcmdldF0gdGFyZ2V0IG9mIG1ldGhvZCB0byBpbnZva2UKICBAcGFyYW0g
        e0Z1bmN0aW9ufFN0cmluZ30gbWV0aG9kIFRoZSBtZXRob2QgdG8gaW52b2tl
        LgogICAgSWYgeW91IHBhc3MgYSBzdHJpbmcgaXQgd2lsbCBiZSByZXNvbHZl
        ZCBvbiB0aGUKICAgIHRhcmdldCBhdCB0aGUgdGltZSB0aGUgbWV0aG9kIGlz
        IGludm9rZWQuCiAgQHBhcmFtIHtPYmplY3R9IFthcmdzKl0gT3B0aW9uYWwg
        YXJndW1lbnRzIHRvIHBhc3MgdG8gdGhlIHRpbWVvdXQuCiAgQHBhcmFtIHtO
        dW1iZXJ9IHdhaXQgTnVtYmVyIG9mIG1pbGxpc2Vjb25kcyB0byB3YWl0Lgog
        IEByZXR1cm4ge1N0cmluZ30gYSBzdHJpbmcgeW91IGNhbiB1c2UgdG8gY2Fu
        Y2VsIHRoZSB0aW1lciBpbgogICAgYEVtYmVyLnJ1bi5jYW5jZWxgIGxhdGVy
        LgoqLwpFbWJlci5ydW4ubGF0ZXIgPSBmdW5jdGlvbih0YXJnZXQsIG1ldGhv
        ZCkgewogIHJldHVybiBiYWNrYnVybmVyLmxhdGVyLmFwcGx5KGJhY2tidXJu
        ZXIsIGFyZ3VtZW50cyk7Cn07CgovKioKICBTY2hlZHVsZSBhIGZ1bmN0aW9u
        IHRvIHJ1biBvbmUgdGltZSBkdXJpbmcgdGhlIGN1cnJlbnQgUnVuTG9vcC4g
        VGhpcyBpcyBlcXVpdmFsZW50CiAgdG8gY2FsbGluZyBgc2NoZWR1bGVPbmNl
        YCB3aXRoIHRoZSAiYWN0aW9ucyIgcXVldWUuCgogIEBtZXRob2Qgb25jZQog
        IEBwYXJhbSB7T2JqZWN0fSBbdGFyZ2V0XSBUaGUgdGFyZ2V0IG9mIHRoZSBt
        ZXRob2QgdG8gaW52b2tlLgogIEBwYXJhbSB7RnVuY3Rpb258U3RyaW5nfSBt
        ZXRob2QgVGhlIG1ldGhvZCB0byBpbnZva2UuCiAgICBJZiB5b3UgcGFzcyBh
        IHN0cmluZyBpdCB3aWxsIGJlIHJlc29sdmVkIG9uIHRoZQogICAgdGFyZ2V0
        IGF0IHRoZSB0aW1lIHRoZSBtZXRob2QgaXMgaW52b2tlZC4KICBAcGFyYW0g
        e09iamVjdH0gW2FyZ3MqXSBPcHRpb25hbCBhcmd1bWVudHMgdG8gcGFzcyB0
        byB0aGUgdGltZW91dC4KICBAcmV0dXJuIHtPYmplY3R9IHRpbWVyCiovCkVt
        YmVyLnJ1bi5vbmNlID0gZnVuY3Rpb24odGFyZ2V0LCBtZXRob2QpIHsKICBj
        aGVja0F1dG9SdW4oKTsKICB2YXIgYXJncyA9IHNsaWNlLmNhbGwoYXJndW1l
        bnRzKTsKICBhcmdzLnVuc2hpZnQoJ2FjdGlvbnMnKTsKICByZXR1cm4gYmFj
        a2J1cm5lci5zY2hlZHVsZU9uY2UuYXBwbHkoYmFja2J1cm5lciwgYXJncyk7
        Cn07CgovKioKICBTY2hlZHVsZXMgYSBmdW5jdGlvbiB0byBydW4gb25lIHRp
        bWUgaW4gYSBnaXZlbiBxdWV1ZSBvZiB0aGUgY3VycmVudCBSdW5Mb29wLgog
        IENhbGxpbmcgdGhpcyBtZXRob2Qgd2l0aCB0aGUgc2FtZSBxdWV1ZS90YXJn
        ZXQvbWV0aG9kIGNvbWJpbmF0aW9uIHdpbGwgaGF2ZQogIG5vIGVmZmVjdCAo
        cGFzdCB0aGUgaW5pdGlhbCBjYWxsKS4KCiAgTm90ZSB0aGF0IGFsdGhvdWdo
        IHlvdSBjYW4gcGFzcyBvcHRpb25hbCBhcmd1bWVudHMgdGhlc2Ugd2lsbCBu
        b3QgYmUKICBjb25zaWRlcmVkIHdoZW4gbG9va2luZyBmb3IgZHVwbGljYXRl
        cy4gTmV3IGFyZ3VtZW50cyB3aWxsIHJlcGxhY2UgcHJldmlvdXMKICBjYWxs
        cy4KCiAgYGBgamF2YXNjcmlwdAogIEVtYmVyLnJ1bihmdW5jdGlvbigpIHsK
        ICAgIHZhciBzYXlIaSA9IGZ1bmN0aW9uKCkgeyBjb25zb2xlLmxvZygnaGkn
        KTsgfQogICAgRW1iZXIucnVuLnNjaGVkdWxlT25jZSgnYWZ0ZXJSZW5kZXIn
        LCBteUNvbnRleHQsIHNheUhpKTsKICAgIEVtYmVyLnJ1bi5zY2hlZHVsZU9u
        Y2UoJ2FmdGVyUmVuZGVyJywgbXlDb250ZXh0LCBzYXlIaSk7CiAgICAvLyBz
        YXlIaSB3aWxsIG9ubHkgYmUgZXhlY3V0ZWQgb25jZSwgaW4gdGhlIGFmdGVy
        UmVuZGVyIHF1ZXVlIG9mIHRoZSBSdW5Mb29wCiAgfSk7CiAgYGBgCgogIEFs
        c28gbm90ZSB0aGF0IHBhc3NpbmcgYW4gYW5vbnltb3VzIGZ1bmN0aW9uIHRv
        IGBFbWJlci5ydW4uc2NoZWR1bGVPbmNlYCB3aWxsCiAgbm90IHByZXZlbnQg
        YWRkaXRpb25hbCBjYWxscyB3aXRoIGFuIGlkZW50aWNhbCBhbm9ueW1vdXMg
        ZnVuY3Rpb24gZnJvbQogIHNjaGVkdWxpbmcgdGhlIGl0ZW1zIG11bHRpcGxl
        IHRpbWVzLCBlLmcuOgoKICBgYGBqYXZhc2NyaXB0CiAgZnVuY3Rpb24gc2No
        ZWR1bGVJdCgpIHsKICAgIEVtYmVyLnJ1bi5zY2hlZHVsZU9uY2UoJ2FjdGlv
        bnMnLCBteUNvbnRleHQsIGZ1bmN0aW9uKCkgeyBjb25zb2xlLmxvZygiQ2xv
        c3VyZSIpOyB9KTsKICB9CiAgc2NoZWR1bGVJdCgpOwogIHNjaGVkdWxlSXQo
        KTsKICAvLyAiQ2xvc3VyZSIgd2lsbCBwcmludCB0d2ljZSwgZXZlbiB0aG91
        Z2ggd2UncmUgdXNpbmcgYEVtYmVyLnJ1bi5zY2hlZHVsZU9uY2VgLAogIC8v
        IGJlY2F1c2UgdGhlIGZ1bmN0aW9uIHdlIHBhc3MgdG8gaXQgaXMgYW5vbnlt
        b3VzIGFuZCB3b24ndCBtYXRjaCB0aGUKICAvLyBwcmV2aW91c2x5IHNjaGVk
        dWxlZCBvcGVyYXRpb24uCiAgYGBgCgogIEF2YWlsYWJsZSBxdWV1ZXMsIGFu
        ZCB0aGVpciBvcmRlciwgY2FuIGJlIGZvdW5kIGF0IGBFbWJlci5ydW4ucXVl
        dWVzYAoKICBAbWV0aG9kIHNjaGVkdWxlT25jZQogIEBwYXJhbSB7U3RyaW5n
        fSBbcXVldWVdIFRoZSBuYW1lIG9mIHRoZSBxdWV1ZSB0byBzY2hlZHVsZSBh
        Z2FpbnN0LiBEZWZhdWx0IHF1ZXVlcyBhcmUgJ3N5bmMnIGFuZCAnYWN0aW9u
        cycuCiAgQHBhcmFtIHtPYmplY3R9IFt0YXJnZXRdIFRoZSB0YXJnZXQgb2Yg
        dGhlIG1ldGhvZCB0byBpbnZva2UuCiAgQHBhcmFtIHtGdW5jdGlvbnxTdHJp
        bmd9IG1ldGhvZCBUaGUgbWV0aG9kIHRvIGludm9rZS4KICAgIElmIHlvdSBw
        YXNzIGEgc3RyaW5nIGl0IHdpbGwgYmUgcmVzb2x2ZWQgb24gdGhlCiAgICB0
        YXJnZXQgYXQgdGhlIHRpbWUgdGhlIG1ldGhvZCBpcyBpbnZva2VkLgogIEBw
        YXJhbSB7T2JqZWN0fSBbYXJncypdIE9wdGlvbmFsIGFyZ3VtZW50cyB0byBw
        YXNzIHRvIHRoZSB0aW1lb3V0LgogIEByZXR1cm4ge09iamVjdH0gdGltZXIK
        Ki8KRW1iZXIucnVuLnNjaGVkdWxlT25jZSA9IGZ1bmN0aW9uKHF1ZXVlLCB0
        YXJnZXQsIG1ldGhvZCkgewogIGNoZWNrQXV0b1J1bigpOwogIHJldHVybiBi
        YWNrYnVybmVyLnNjaGVkdWxlT25jZS5hcHBseShiYWNrYnVybmVyLCBhcmd1
        bWVudHMpOwp9OwoKLyoqCiAgU2NoZWR1bGVzIGFuIGl0ZW0gdG8gcnVuIGZy
        b20gd2l0aGluIGEgc2VwYXJhdGUgcnVuIGxvb3AsIGFmdGVyCiAgY29udHJv
        bCBoYXMgYmVlbiByZXR1cm5lZCB0byB0aGUgc3lzdGVtLiBUaGlzIGlzIGVx
        dWl2YWxlbnQgdG8gY2FsbGluZwogIGBFbWJlci5ydW4ubGF0ZXJgIHdpdGgg
        YSB3YWl0IHRpbWUgb2YgMW1zLgoKICBgYGBqYXZhc2NyaXB0CiAgRW1iZXIu
        cnVuLm5leHQobXlDb250ZXh0LCBmdW5jdGlvbigpIHsKICAgIC8vIGNvZGUg
        dG8gYmUgZXhlY3V0ZWQgaW4gdGhlIG5leHQgcnVuIGxvb3AsIHdoaWNoIHdp
        bGwgYmUgc2NoZWR1bGVkIGFmdGVyIHRoZSBjdXJyZW50IG9uZQogIH0pOwog
        IGBgYAoKICBNdWx0aXBsZSBvcGVyYXRpb25zIHNjaGVkdWxlZCB3aXRoIGBF
        bWJlci5ydW4ubmV4dGAgd2lsbCBjb2FsZXNjZQogIGludG8gdGhlIHNhbWUg
        bGF0ZXIgcnVuIGxvb3AsIGFsb25nIHdpdGggYW55IG90aGVyIG9wZXJhdGlv
        bnMKICBzY2hlZHVsZWQgYnkgYEVtYmVyLnJ1bi5sYXRlcmAgdGhhdCBleHBp
        cmUgcmlnaHQgYXJvdW5kIHRoZSBzYW1lCiAgdGltZSB0aGF0IGBFbWJlci5y
        dW4ubmV4dGAgb3BlcmF0aW9ucyB3aWxsIGZpcmUuCgogIE5vdGUgdGhhdCB0
        aGVyZSBhcmUgb2Z0ZW4gYWx0ZXJuYXRpdmVzIHRvIHVzaW5nIGBFbWJlci5y
        dW4ubmV4dGAuCiAgRm9yIGluc3RhbmNlLCBpZiB5b3UnZCBsaWtlIHRvIHNj
        aGVkdWxlIGFuIG9wZXJhdGlvbiB0byBoYXBwZW4KICBhZnRlciBhbGwgRE9N
        IGVsZW1lbnQgb3BlcmF0aW9ucyBoYXZlIGNvbXBsZXRlZCB3aXRoaW4gdGhl
        IGN1cnJlbnQKICBydW4gbG9vcCwgeW91IGNhbiBtYWtlIHVzZSBvZiB0aGUg
        YGFmdGVyUmVuZGVyYCBydW4gbG9vcCBxdWV1ZSAoYWRkZWQKICBieSB0aGUg
        YGVtYmVyLXZpZXdzYCBwYWNrYWdlLCBhbG9uZyB3aXRoIHRoZSBwcmVjZWRp
        bmcgYHJlbmRlcmAgcXVldWUKICB3aGVyZSBhbGwgdGhlIERPTSBlbGVtZW50
        IG9wZXJhdGlvbnMgaGFwcGVuKS4gRXhhbXBsZToKCiAgYGBgamF2YXNjcmlw
        dAogIEFwcC5NeUNvbGxlY3Rpb25WaWV3ID0gRW1iZXIuQ29sbGVjdGlvblZp
        ZXcuZXh0ZW5kKHsKICAgIGRpZEluc2VydEVsZW1lbnQ6IGZ1bmN0aW9uKCkg
        ewogICAgICBFbWJlci5ydW4uc2NoZWR1bGVPbmNlKCdhZnRlclJlbmRlcics
        IHRoaXMsICdwcm9jZXNzQ2hpbGRFbGVtZW50cycpOwogICAgfSwKICAgIHBy
        b2Nlc3NDaGlsZEVsZW1lbnRzOiBmdW5jdGlvbigpIHsKICAgICAgLy8gLi4u
        IGRvIHNvbWV0aGluZyB3aXRoIGNvbGxlY3Rpb25WaWV3J3MgY2hpbGQgdmll
        dwogICAgICAvLyBlbGVtZW50cyBhZnRlciB0aGV5J3ZlIGZpbmlzaGVkIHJl
        bmRlcmluZywgd2hpY2gKICAgICAgLy8gY2FuJ3QgYmUgZG9uZSB3aXRoaW4g
        dGhlIENvbGxlY3Rpb25WaWV3J3MKICAgICAgLy8gYGRpZEluc2VydEVsZW1l
        bnRgIGhvb2sgYmVjYXVzZSB0aGF0IGdldHMgcnVuCiAgICAgIC8vIGJlZm9y
        ZSB0aGUgY2hpbGQgZWxlbWVudHMgaGF2ZSBiZWVuIGFkZGVkIHRvIHRoZSBE
        T00uCiAgICB9CiAgfSk7CiAgYGBgCgogIE9uZSBiZW5lZml0IG9mIHRoZSBh
        Ym92ZSBhcHByb2FjaCBjb21wYXJlZCB0byB1c2luZyBgRW1iZXIucnVuLm5l
        eHRgIGlzCiAgdGhhdCB5b3Ugd2lsbCBiZSBhYmxlIHRvIHBlcmZvcm0gRE9N
        L0NTUyBvcGVyYXRpb25zIGJlZm9yZSB1bnByb2Nlc3NlZAogIGVsZW1lbnRz
        IGFyZSByZW5kZXJlZCB0byB0aGUgc2NyZWVuLCB3aGljaCBtYXkgcHJldmVu
        dCBmbGlja2VyaW5nIG9yCiAgb3RoZXIgYXJ0aWZhY3RzIGNhdXNlZCBieSBk
        ZWxheWluZyBwcm9jZXNzaW5nIHVudGlsIGFmdGVyIHJlbmRlcmluZy4KCiAg
        VGhlIG90aGVyIG1ham9yIGJlbmVmaXQgdG8gdGhlIGFib3ZlIGFwcHJvYWNo
        IGlzIHRoYXQgYEVtYmVyLnJ1bi5uZXh0YAogIGludHJvZHVjZXMgYW4gZWxl
        bWVudCBvZiBub24tZGV0ZXJtaW5pc20sIHdoaWNoIGNhbiBtYWtlIHRoaW5n
        cyBtdWNoCiAgaGFyZGVyIHRvIHRlc3QsIGR1ZSB0byBpdHMgcmVsaWFuY2Ug
        b24gYHNldFRpbWVvdXRgOyBpdCdzIG11Y2ggaGFyZGVyCiAgdG8gZ3VhcmFu
        dGVlIHRoZSBvcmRlciBvZiBzY2hlZHVsZWQgb3BlcmF0aW9ucyB3aGVuIHRo
        ZXkgYXJlIHNjaGVkdWxlZAogIG91dHNpZGUgb2YgdGhlIGN1cnJlbnQgcnVu
        IGxvb3AsIGkuZS4gd2l0aCBgRW1iZXIucnVuLm5leHRgLgoKICBAbWV0aG9k
        IG5leHQKICBAcGFyYW0ge09iamVjdH0gW3RhcmdldF0gdGFyZ2V0IG9mIG1l
        dGhvZCB0byBpbnZva2UKICBAcGFyYW0ge0Z1bmN0aW9ufFN0cmluZ30gbWV0
        aG9kIFRoZSBtZXRob2QgdG8gaW52b2tlLgogICAgSWYgeW91IHBhc3MgYSBz
        dHJpbmcgaXQgd2lsbCBiZSByZXNvbHZlZCBvbiB0aGUKICAgIHRhcmdldCBh
        dCB0aGUgdGltZSB0aGUgbWV0aG9kIGlzIGludm9rZWQuCiAgQHBhcmFtIHtP
        YmplY3R9IFthcmdzKl0gT3B0aW9uYWwgYXJndW1lbnRzIHRvIHBhc3MgdG8g
        dGhlIHRpbWVvdXQuCiAgQHJldHVybiB7T2JqZWN0fSB0aW1lcgoqLwpFbWJl
        ci5ydW4ubmV4dCA9IGZ1bmN0aW9uKCkgewogIHZhciBhcmdzID0gc2xpY2Uu
        Y2FsbChhcmd1bWVudHMpOwogIGFyZ3MucHVzaCgxKTsKICByZXR1cm4gYmFj
        a2J1cm5lci5sYXRlci5hcHBseShiYWNrYnVybmVyLCBhcmdzKTsKfTsKCi8q
        KgogIENhbmNlbHMgYSBzY2hlZHVsZWQgaXRlbS4gTXVzdCBiZSBhIHZhbHVl
        IHJldHVybmVkIGJ5IGBFbWJlci5ydW4ubGF0ZXIoKWAsCiAgYEVtYmVyLnJ1
        bi5vbmNlKClgLCBvciBgRW1iZXIucnVuLm5leHQoKWAuCgogIGBgYGphdmFz
        Y3JpcHQKICB2YXIgcnVuTmV4dCA9IEVtYmVyLnJ1bi5uZXh0KG15Q29udGV4
        dCwgZnVuY3Rpb24oKSB7CiAgICAvLyB3aWxsIG5vdCBiZSBleGVjdXRlZAog
        IH0pOwogIEVtYmVyLnJ1bi5jYW5jZWwocnVuTmV4dCk7CgogIHZhciBydW5M
        YXRlciA9IEVtYmVyLnJ1bi5sYXRlcihteUNvbnRleHQsIGZ1bmN0aW9uKCkg
        ewogICAgLy8gd2lsbCBub3QgYmUgZXhlY3V0ZWQKICB9LCA1MDApOwogIEVt
        YmVyLnJ1bi5jYW5jZWwocnVuTGF0ZXIpOwoKICB2YXIgcnVuT25jZSA9IEVt
        YmVyLnJ1bi5vbmNlKG15Q29udGV4dCwgZnVuY3Rpb24oKSB7CiAgICAvLyB3
        aWxsIG5vdCBiZSBleGVjdXRlZAogIH0pOwogIEVtYmVyLnJ1bi5jYW5jZWwo
        cnVuT25jZSk7CiAgYGBgCgogIEBtZXRob2QgY2FuY2VsCiAgQHBhcmFtIHtP
        YmplY3R9IHRpbWVyIFRpbWVyIG9iamVjdCB0byBjYW5jZWwKICBAcmV0dXJu
        IHt2b2lkfQoqLwpFbWJlci5ydW4uY2FuY2VsID0gZnVuY3Rpb24odGltZXIp
        IHsKICByZXR1cm4gYmFja2J1cm5lci5jYW5jZWwodGltZXIpOwp9OwoKLyoq
        CiAgRGVsYXkgY2FsbGluZyB0aGUgdGFyZ2V0IG1ldGhvZCB1bnRpbCB0aGUg
        ZGVib3VuY2UgcGVyaW9kIGhhcyBlbGFwc2VkCiAgd2l0aCBubyBhZGRpdGlv
        bmFsIGRlYm91bmNlIGNhbGxzLiBJZiBgZGVib3VuY2VgIGlzIGNhbGxlZCBh
        Z2FpbiBiZWZvcmUKICB0aGUgc3BlY2lmaWVkIHRpbWUgaGFzIGVsYXBzZWQs
        IHRoZSB0aW1lciBpcyByZXNldCBhbmQgdGhlIGVudGlyZSBwZXJpb2QKICBt
        dXN0IHBhc3MgYWdhaW4gYmVmb3JlIHRoZSB0YXJnZXQgbWV0aG9kIGlzIGNh
        bGxlZC4KCiAgVGhpcyBtZXRob2Qgc2hvdWxkIGJlIHVzZWQgd2hlbiBhbiBl
        dmVudCBtYXkgYmUgY2FsbGVkIG11bHRpcGxlIHRpbWVzCiAgYnV0IHRoZSBh
        Y3Rpb24gc2hvdWxkIG9ubHkgYmUgY2FsbGVkIG9uY2Ugd2hlbiB0aGUgZXZl
        bnQgaXMgZG9uZSBmaXJpbmcuCiAgQSBjb21tb24gZXhhbXBsZSBpcyBmb3Ig
        c2Nyb2xsIGV2ZW50cyB3aGVyZSB5b3Ugb25seSB3YW50IHVwZGF0ZXMgdG8K
        ICBoYXBwZW4gb25jZSBzY3JvbGxpbmcgaGFzIGNlYXNlZC4KCiAgYGBgamF2
        YXNjcmlwdAogICAgdmFyIG15RnVuYyA9IGZ1bmN0aW9uKCkgeyBjb25zb2xl
        LmxvZyh0aGlzLm5hbWUgKyAnIHJhbi4nKTsgfTsKICAgIHZhciBteUNvbnRl
        eHQgPSB7bmFtZTogJ2RlYm91bmNlJ307CgogICAgRW1iZXIucnVuLmRlYm91
        bmNlKG15Q29udGV4dCwgbXlGdW5jLCAxNTApOwoKICAgIC8vIGxlc3MgdGhh
        biAxNTBtcyBwYXNzZXMKCiAgICBFbWJlci5ydW4uZGVib3VuY2UobXlDb250
        ZXh0LCBteUZ1bmMsIDE1MCk7CgogICAgLy8gMTUwbXMgcGFzc2VzCiAgICAv
        LyBteUZ1bmMgaXMgaW52b2tlZCB3aXRoIGNvbnRleHQgbXlDb250ZXh0CiAg
        ICAvLyBjb25zb2xlIGxvZ3MgJ2RlYm91bmNlIHJhbi4nIG9uZSB0aW1lLgog
        IGBgYAoKICBAbWV0aG9kIGRlYm91bmNlCiAgQHBhcmFtIHtPYmplY3R9IFt0
        YXJnZXRdIHRhcmdldCBvZiBtZXRob2QgdG8gaW52b2tlCiAgQHBhcmFtIHtG
        dW5jdGlvbnxTdHJpbmd9IG1ldGhvZCBUaGUgbWV0aG9kIHRvIGludm9rZS4K
        ICAgIE1heSBiZSBhIGZ1bmN0aW9uIG9yIGEgc3RyaW5nLiBJZiB5b3UgcGFz
        cyBhIHN0cmluZwogICAgdGhlbiBpdCB3aWxsIGJlIGxvb2tlZCB1cCBvbiB0
        aGUgcGFzc2VkIHRhcmdldC4KICBAcGFyYW0ge09iamVjdH0gW2FyZ3MqXSBP
        cHRpb25hbCBhcmd1bWVudHMgdG8gcGFzcyB0byB0aGUgdGltZW91dC4KICBA
        cGFyYW0ge051bWJlcn0gd2FpdCBOdW1iZXIgb2YgbWlsbGlzZWNvbmRzIHRv
        IHdhaXQuCiAgQHBhcmFtIHtCb29sZWFufSBpbW1lZGlhdGUgVHJpZ2dlciB0
        aGUgZnVuY3Rpb24gb24gdGhlIGxlYWRpbmcgaW5zdGVhZCBvZiB0aGUgdHJh
        aWxpbmcgZWRnZSBvZiB0aGUgd2FpdCBpbnRlcnZhbC4KICBAcmV0dXJuIHt2
        b2lkfQoqLwpFbWJlci5ydW4uZGVib3VuY2UgPSBmdW5jdGlvbigpIHsKICBy
        ZXR1cm4gYmFja2J1cm5lci5kZWJvdW5jZS5hcHBseShiYWNrYnVybmVyLCBh
        cmd1bWVudHMpOwp9OwoKLyoqCiAgRW5zdXJlIHRoYXQgdGhlIHRhcmdldCBt
        ZXRob2QgaXMgbmV2ZXIgY2FsbGVkIG1vcmUgZnJlcXVlbnRseSB0aGFuCiAg
        dGhlIHNwZWNpZmllZCBzcGFjaW5nIHBlcmlvZC4KCiAgYGBgamF2YXNjcmlw
        dAogICAgdmFyIG15RnVuYyA9IGZ1bmN0aW9uKCkgeyBjb25zb2xlLmxvZyh0
        aGlzLm5hbWUgKyAnIHJhbi4nKTsgfTsKICAgIHZhciBteUNvbnRleHQgPSB7
        bmFtZTogJ3Rocm90dGxlJ307CgogICAgRW1iZXIucnVuLnRocm90dGxlKG15
        Q29udGV4dCwgbXlGdW5jLCAxNTApOwoKICAgIC8vIDUwbXMgcGFzc2VzCiAg
        ICBFbWJlci5ydW4udGhyb3R0bGUobXlDb250ZXh0LCBteUZ1bmMsIDE1MCk7
        CgogICAgLy8gNTBtcyBwYXNzZXMKICAgIEVtYmVyLnJ1bi50aHJvdHRsZSht
        eUNvbnRleHQsIG15RnVuYywgMTUwKTsKCiAgICAvLyA1MG1zIHBhc3Nlcwog
        ICAgRW1iZXIucnVuLnRocm90dGxlKG15Q29udGV4dCwgbXlGdW5jLCAxNTAp
        OwoKICAgIC8vIDE1MG1zIHBhc3NlcwogICAgLy8gbXlGdW5jIGlzIGludm9r
        ZWQgd2l0aCBjb250ZXh0IG15Q29udGV4dAogICAgLy8gY29uc29sZSBsb2dz
        ICd0aHJvdHRsZSByYW4uJyB0d2ljZSwgMTUwbXMgYXBhcnQuCiAgYGBgCgog
        IEBtZXRob2QgdGhyb3R0bGUKICBAcGFyYW0ge09iamVjdH0gW3RhcmdldF0g
        dGFyZ2V0IG9mIG1ldGhvZCB0byBpbnZva2UKICBAcGFyYW0ge0Z1bmN0aW9u
        fFN0cmluZ30gbWV0aG9kIFRoZSBtZXRob2QgdG8gaW52b2tlLgogICAgTWF5
        IGJlIGEgZnVuY3Rpb24gb3IgYSBzdHJpbmcuIElmIHlvdSBwYXNzIGEgc3Ry
        aW5nCiAgICB0aGVuIGl0IHdpbGwgYmUgbG9va2VkIHVwIG9uIHRoZSBwYXNz
        ZWQgdGFyZ2V0LgogIEBwYXJhbSB7T2JqZWN0fSBbYXJncypdIE9wdGlvbmFs
        IGFyZ3VtZW50cyB0byBwYXNzIHRvIHRoZSB0aW1lb3V0LgogIEBwYXJhbSB7
        TnVtYmVyfSBzcGFjaW5nIE51bWJlciBvZiBtaWxsaXNlY29uZHMgdG8gc3Bh
        Y2Ugb3V0IHJlcXVlc3RzLgogIEByZXR1cm4ge3ZvaWR9CiovCkVtYmVyLnJ1
        bi50aHJvdHRsZSA9IGZ1bmN0aW9uKCkgewogIHJldHVybiBiYWNrYnVybmVy
        LnRocm90dGxlLmFwcGx5KGJhY2tidXJuZXIsIGFyZ3VtZW50cyk7Cn07Cgov
        LyBNYWtlIHN1cmUgaXQncyBub3QgYW4gYXV0b3J1biBkdXJpbmcgdGVzdGlu
        ZwpmdW5jdGlvbiBjaGVja0F1dG9SdW4oKSB7CiAgaWYgKCFFbWJlci5ydW4u
        Y3VycmVudFJ1bkxvb3ApIHsKICAgIEVtYmVyLmFzc2VydCgiWW91IGhhdmUg
        dHVybmVkIG9uIHRlc3RpbmcgbW9kZSwgd2hpY2ggZGlzYWJsZWQgdGhlIHJ1
        bi1sb29wJ3MgYXV0b3J1bi4gWW91IHdpbGwgbmVlZCB0byB3cmFwIGFueSBj
        b2RlIHdpdGggYXN5bmNocm9ub3VzIHNpZGUtZWZmZWN0cyBpbiBhbiBFbWJl
        ci5ydW4iLCAhRW1iZXIudGVzdGluZyk7CiAgfQp9Cgp9KSgpOwoKCgooZnVu
        Y3Rpb24oKSB7Ci8vIEVtYmVyLkxvZ2dlcgovLyBnZXQKLy8gc2V0Ci8vIGd1
        aWRGb3IsIG1ldGEKLy8gYWRkT2JzZXJ2ZXIsIHJlbW92ZU9ic2VydmVyCi8v
        IEVtYmVyLnJ1bi5zY2hlZHVsZQovKioKQG1vZHVsZSBlbWJlci1tZXRhbAoq
        LwoKLy8gLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4u
        Li4uLi4uLi4uLi4uLi4uLi4uLgovLyBDT05TVEFOVFMKLy8KCi8qKgogIERl
        YnVnIHBhcmFtZXRlciB5b3UgY2FuIHR1cm4gb24uIFRoaXMgd2lsbCBsb2cg
        YWxsIGJpbmRpbmdzIHRoYXQgZmlyZSB0bwogIHRoZSBjb25zb2xlLiBUaGlz
        IHNob3VsZCBiZSBkaXNhYmxlZCBpbiBwcm9kdWN0aW9uIGNvZGUuIE5vdGUg
        dGhhdCB5b3UKICBjYW4gYWxzbyBlbmFibGUgdGhpcyBmcm9tIHRoZSBjb25z
        b2xlIG9yIHRlbXBvcmFyaWx5LgoKICBAcHJvcGVydHkgTE9HX0JJTkRJTkdT
        CiAgQGZvciBFbWJlcgogIEB0eXBlIEJvb2xlYW4KICBAZGVmYXVsdCBmYWxz
        ZQoqLwpFbWJlci5MT0dfQklORElOR1MgPSBmYWxzZSB8fCAhIUVtYmVyLkVO
        Vi5MT0dfQklORElOR1M7Cgp2YXIgZ2V0ICAgICA9IEVtYmVyLmdldCwKICAg
        IHNldCAgICAgPSBFbWJlci5zZXQsCiAgICBndWlkRm9yID0gRW1iZXIuZ3Vp
        ZEZvciwKICAgIElTX0dMT0JBTCA9IC9eKFtBLVokXXwoWzAtOV1bQS1aJF0p
        KS87CgovKioKICBSZXR1cm5zIHRydWUgaWYgdGhlIHByb3ZpZGVkIHBhdGgg
        aXMgZ2xvYmFsIChlLmcuLCBgTXlBcHAuZm9vQ29udHJvbGxlci5iYXJgKQog
        IGluc3RlYWQgb2YgbG9jYWwgKGBmb28uYmFyLmJhemApLgoKICBAbWV0aG9k
        IGlzR2xvYmFsUGF0aAogIEBmb3IgRW1iZXIKICBAcHJpdmF0ZQogIEBwYXJh
        bSB7U3RyaW5nfSBwYXRoCiAgQHJldHVybiBCb29sZWFuCiovCnZhciBpc0ds
        b2JhbFBhdGggPSBFbWJlci5pc0dsb2JhbFBhdGggPSBmdW5jdGlvbihwYXRo
        KSB7CiAgcmV0dXJuIElTX0dMT0JBTC50ZXN0KHBhdGgpOwp9OwoKZnVuY3Rp
        b24gZ2V0V2l0aEdsb2JhbHMob2JqLCBwYXRoKSB7CiAgcmV0dXJuIGdldChp
        c0dsb2JhbFBhdGgocGF0aCkgPyBFbWJlci5sb29rdXAgOiBvYmosIHBhdGgp
        Owp9CgovLyAuLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4u
        Li4uLi4uLi4uLi4uLi4uLi4uLi4uCi8vIEJJTkRJTkcKLy8KCnZhciBCaW5k
        aW5nID0gZnVuY3Rpb24odG9QYXRoLCBmcm9tUGF0aCkgewogIHRoaXMuX2Rp
        cmVjdGlvbiA9ICdmd2QnOwogIHRoaXMuX2Zyb20gPSBmcm9tUGF0aDsKICB0
        aGlzLl90byAgID0gdG9QYXRoOwogIHRoaXMuX2RpcmVjdGlvbk1hcCA9IEVt
        YmVyLk1hcC5jcmVhdGUoKTsKfTsKCi8qKgpAY2xhc3MgQmluZGluZwpAbmFt
        ZXNwYWNlIEVtYmVyCiovCgpCaW5kaW5nLnByb3RvdHlwZSA9IHsKICAvKioK
        ICAgIFRoaXMgY29waWVzIHRoZSBCaW5kaW5nIHNvIGl0IGNhbiBiZSBjb25u
        ZWN0ZWQgdG8gYW5vdGhlciBvYmplY3QuCgogICAgQG1ldGhvZCBjb3B5CiAg
        ICBAcmV0dXJuIHtFbWJlci5CaW5kaW5nfSBgdGhpc2AKICAqLwogIGNvcHk6
        IGZ1bmN0aW9uICgpIHsKICAgIHZhciBjb3B5ID0gbmV3IEJpbmRpbmcodGhp
        cy5fdG8sIHRoaXMuX2Zyb20pOwogICAgaWYgKHRoaXMuX29uZVdheSkgeyBj
        b3B5Ll9vbmVXYXkgPSB0cnVlOyB9CiAgICByZXR1cm4gY29weTsKICB9LAoK
        ICAvLyAuLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4u
        Li4uLi4uLi4uLi4uLi4uLi4uCiAgLy8gQ09ORklHCiAgLy8KCiAgLyoqCiAg
        ICBUaGlzIHdpbGwgc2V0IGBmcm9tYCBwcm9wZXJ0eSBwYXRoIHRvIHRoZSBz
        cGVjaWZpZWQgdmFsdWUuIEl0IHdpbGwgbm90CiAgICBhdHRlbXB0IHRvIHJl
        c29sdmUgdGhpcyBwcm9wZXJ0eSBwYXRoIHRvIGFuIGFjdHVhbCBvYmplY3Qg
        dW50aWwgeW91CiAgICBjb25uZWN0IHRoZSBiaW5kaW5nLgoKICAgIFRoZSBi
        aW5kaW5nIHdpbGwgc2VhcmNoIGZvciB0aGUgcHJvcGVydHkgcGF0aCBzdGFy
        dGluZyBhdCB0aGUgcm9vdCBvYmplY3QKICAgIHlvdSBwYXNzIHdoZW4geW91
        IGBjb25uZWN0KClgIHRoZSBiaW5kaW5nLiBJdCBmb2xsb3dzIHRoZSBzYW1l
        IHJ1bGVzIGFzCiAgICBgZ2V0KClgIC0gc2VlIHRoYXQgbWV0aG9kIGZvciBt
        b3JlIGluZm9ybWF0aW9uLgoKICAgIEBtZXRob2QgZnJvbQogICAgQHBhcmFt
        IHtTdHJpbmd9IHBhdGggdGhlIHByb3BlcnR5IHBhdGggdG8gY29ubmVjdCB0
        bwogICAgQHJldHVybiB7RW1iZXIuQmluZGluZ30gYHRoaXNgCiAgKi8KICBm
        cm9tOiBmdW5jdGlvbihwYXRoKSB7CiAgICB0aGlzLl9mcm9tID0gcGF0aDsK
        ICAgIHJldHVybiB0aGlzOwogIH0sCgogIC8qKgogICAgVGhpcyB3aWxsIHNl
        dCB0aGUgYHRvYCBwcm9wZXJ0eSBwYXRoIHRvIHRoZSBzcGVjaWZpZWQgdmFs
        dWUuIEl0IHdpbGwgbm90CiAgICBhdHRlbXB0IHRvIHJlc29sdmUgdGhpcyBw
        cm9wZXJ0eSBwYXRoIHRvIGFuIGFjdHVhbCBvYmplY3QgdW50aWwgeW91CiAg
        ICBjb25uZWN0IHRoZSBiaW5kaW5nLgoKICAgIFRoZSBiaW5kaW5nIHdpbGwg
        c2VhcmNoIGZvciB0aGUgcHJvcGVydHkgcGF0aCBzdGFydGluZyBhdCB0aGUg
        cm9vdCBvYmplY3QKICAgIHlvdSBwYXNzIHdoZW4geW91IGBjb25uZWN0KClg
        IHRoZSBiaW5kaW5nLiBJdCBmb2xsb3dzIHRoZSBzYW1lIHJ1bGVzIGFzCiAg
        ICBgZ2V0KClgIC0gc2VlIHRoYXQgbWV0aG9kIGZvciBtb3JlIGluZm9ybWF0
        aW9uLgoKICAgIEBtZXRob2QgdG8KICAgIEBwYXJhbSB7U3RyaW5nfFR1cGxl
        fSBwYXRoIEEgcHJvcGVydHkgcGF0aCBvciB0dXBsZQogICAgQHJldHVybiB7
        RW1iZXIuQmluZGluZ30gYHRoaXNgCiAgKi8KICB0bzogZnVuY3Rpb24ocGF0
        aCkgewogICAgdGhpcy5fdG8gPSBwYXRoOwogICAgcmV0dXJuIHRoaXM7CiAg
        fSwKCiAgLyoqCiAgICBDb25maWd1cmVzIHRoZSBiaW5kaW5nIGFzIG9uZSB3
        YXkuIEEgb25lLXdheSBiaW5kaW5nIHdpbGwgcmVsYXkgY2hhbmdlcwogICAg
        b24gdGhlIGBmcm9tYCBzaWRlIHRvIHRoZSBgdG9gIHNpZGUsIGJ1dCBub3Qg
        dGhlIG90aGVyIHdheSBhcm91bmQuIFRoaXMKICAgIG1lYW5zIHRoYXQgaWYg
        eW91IGNoYW5nZSB0aGUgYHRvYCBzaWRlIGRpcmVjdGx5LCB0aGUgYGZyb21g
        IHNpZGUgbWF5IGhhdmUKICAgIGEgZGlmZmVyZW50IHZhbHVlLgoKICAgIEBt
        ZXRob2Qgb25lV2F5CiAgICBAcmV0dXJuIHtFbWJlci5CaW5kaW5nfSBgdGhp
        c2AKICAqLwogIG9uZVdheTogZnVuY3Rpb24oKSB7CiAgICB0aGlzLl9vbmVX
        YXkgPSB0cnVlOwogICAgcmV0dXJuIHRoaXM7CiAgfSwKCiAgLyoqCiAgICBA
        bWV0aG9kIHRvU3RyaW5nCiAgICBAcmV0dXJuIHtTdHJpbmd9IHN0cmluZyBy
        ZXByZXNlbnRhdGlvbiBvZiBiaW5kaW5nCiAgKi8KICB0b1N0cmluZzogZnVu
        Y3Rpb24oKSB7CiAgICB2YXIgb25lV2F5ID0gdGhpcy5fb25lV2F5ID8gJ1tv
        bmVXYXldJyA6ICcnOwogICAgcmV0dXJuICJFbWJlci5CaW5kaW5nPCIgKyBn
        dWlkRm9yKHRoaXMpICsgIj4oIiArIHRoaXMuX2Zyb20gKyAiIC0+ICIgKyB0
        aGlzLl90byArICIpIiArIG9uZVdheTsKICB9LAoKICAvLyAuLi4uLi4uLi4u
        Li4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4u
        Li4uCiAgLy8gQ09OTkVDVCBBTkQgU1lOQwogIC8vCgogIC8qKgogICAgQXR0
        ZW1wdHMgdG8gY29ubmVjdCB0aGlzIGJpbmRpbmcgaW5zdGFuY2Ugc28gdGhh
        dCBpdCBjYW4gcmVjZWl2ZSBhbmQgcmVsYXkKICAgIGNoYW5nZXMuIFRoaXMg
        bWV0aG9kIHdpbGwgcmFpc2UgYW4gZXhjZXB0aW9uIGlmIHlvdSBoYXZlIG5v
        dCBzZXQgdGhlCiAgICBmcm9tL3RvIHByb3BlcnRpZXMgeWV0LgoKICAgIEBt
        ZXRob2QgY29ubmVjdAogICAgQHBhcmFtIHtPYmplY3R9IG9iaiBUaGUgcm9v
        dCBvYmplY3QgZm9yIHRoaXMgYmluZGluZy4KICAgIEByZXR1cm4ge0VtYmVy
        LkJpbmRpbmd9IGB0aGlzYAogICovCiAgY29ubmVjdDogZnVuY3Rpb24ob2Jq
        KSB7CiAgICBFbWJlci5hc3NlcnQoJ011c3QgcGFzcyBhIHZhbGlkIG9iamVj
        dCB0byBFbWJlci5CaW5kaW5nLmNvbm5lY3QoKScsICEhb2JqKTsKCiAgICB2
        YXIgZnJvbVBhdGggPSB0aGlzLl9mcm9tLCB0b1BhdGggPSB0aGlzLl90bzsK
        ICAgIEVtYmVyLnRyeVNldChvYmosIHRvUGF0aCwgZ2V0V2l0aEdsb2JhbHMo
        b2JqLCBmcm9tUGF0aCkpOwoKICAgIC8vIGFkZCBhbiBvYnNlcnZlciBvbiB0
        aGUgb2JqZWN0IHRvIGJlIG5vdGlmaWVkIHdoZW4gdGhlIGJpbmRpbmcgc2hv
        dWxkIGJlIHVwZGF0ZWQKICAgIEVtYmVyLmFkZE9ic2VydmVyKG9iaiwgZnJv
        bVBhdGgsIHRoaXMsIHRoaXMuZnJvbURpZENoYW5nZSk7CgogICAgLy8gaWYg
        dGhlIGJpbmRpbmcgaXMgYSB0d28td2F5IGJpbmRpbmcsIGFsc28gc2V0IHVw
        IGFuIG9ic2VydmVyIG9uIHRoZSB0YXJnZXQKICAgIGlmICghdGhpcy5fb25l
        V2F5KSB7IEVtYmVyLmFkZE9ic2VydmVyKG9iaiwgdG9QYXRoLCB0aGlzLCB0
        aGlzLnRvRGlkQ2hhbmdlKTsgfQoKICAgIHRoaXMuX3JlYWR5VG9TeW5jID0g
        dHJ1ZTsKCiAgICByZXR1cm4gdGhpczsKICB9LAoKICAvKioKICAgIERpc2Nv
        bm5lY3RzIHRoZSBiaW5kaW5nIGluc3RhbmNlLiBDaGFuZ2VzIHdpbGwgbm8g
        bG9uZ2VyIGJlIHJlbGF5ZWQuIFlvdQogICAgd2lsbCBub3QgdXN1YWxseSBu
        ZWVkIHRvIGNhbGwgdGhpcyBtZXRob2QuCgogICAgQG1ldGhvZCBkaXNjb25u
        ZWN0CiAgICBAcGFyYW0ge09iamVjdH0gb2JqIFRoZSByb290IG9iamVjdCB5
        b3UgcGFzc2VkIHdoZW4gY29ubmVjdGluZyB0aGUgYmluZGluZy4KICAgIEBy
        ZXR1cm4ge0VtYmVyLkJpbmRpbmd9IGB0aGlzYAogICovCiAgZGlzY29ubmVj
        dDogZnVuY3Rpb24ob2JqKSB7CiAgICBFbWJlci5hc3NlcnQoJ011c3QgcGFz
        cyBhIHZhbGlkIG9iamVjdCB0byBFbWJlci5CaW5kaW5nLmRpc2Nvbm5lY3Qo
        KScsICEhb2JqKTsKCiAgICB2YXIgdHdvV2F5ID0gIXRoaXMuX29uZVdheTsK
        CiAgICAvLyByZW1vdmUgYW4gb2JzZXJ2ZXIgb24gdGhlIG9iamVjdCBzbyB3
        ZSdyZSBubyBsb25nZXIgbm90aWZpZWQgb2YKICAgIC8vIGNoYW5nZXMgdGhh
        dCBzaG91bGQgdXBkYXRlIGJpbmRpbmdzLgogICAgRW1iZXIucmVtb3ZlT2Jz
        ZXJ2ZXIob2JqLCB0aGlzLl9mcm9tLCB0aGlzLCB0aGlzLmZyb21EaWRDaGFu
        Z2UpOwoKICAgIC8vIGlmIHRoZSBiaW5kaW5nIGlzIHR3by13YXksIHJlbW92
        ZSB0aGUgb2JzZXJ2ZXIgZnJvbSB0aGUgdGFyZ2V0IGFzIHdlbGwKICAgIGlm
        ICh0d29XYXkpIHsgRW1iZXIucmVtb3ZlT2JzZXJ2ZXIob2JqLCB0aGlzLl90
        bywgdGhpcywgdGhpcy50b0RpZENoYW5nZSk7IH0KCiAgICB0aGlzLl9yZWFk
        eVRvU3luYyA9IGZhbHNlOyAvLyBkaXNhYmxlIHNjaGVkdWxlZCBzeW5jcy4u
        LgogICAgcmV0dXJuIHRoaXM7CiAgfSwKCiAgLy8gLi4uLi4uLi4uLi4uLi4u
        Li4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLgog
        IC8vIFBSSVZBVEUKICAvLwoKICAvKiBjYWxsZWQgd2hlbiB0aGUgZnJvbSBz
        aWRlIGNoYW5nZXMgKi8KICBmcm9tRGlkQ2hhbmdlOiBmdW5jdGlvbih0YXJn
        ZXQpIHsKICAgIHRoaXMuX3NjaGVkdWxlU3luYyh0YXJnZXQsICdmd2QnKTsK
        ICB9LAoKICAvKiBjYWxsZWQgd2hlbiB0aGUgdG8gc2lkZSBjaGFuZ2VzICov
        CiAgdG9EaWRDaGFuZ2U6IGZ1bmN0aW9uKHRhcmdldCkgewogICAgdGhpcy5f
        c2NoZWR1bGVTeW5jKHRhcmdldCwgJ2JhY2snKTsKICB9LAoKICBfc2NoZWR1
        bGVTeW5jOiBmdW5jdGlvbihvYmosIGRpcikgewogICAgdmFyIGRpcmVjdGlv
        bk1hcCA9IHRoaXMuX2RpcmVjdGlvbk1hcDsKICAgIHZhciBleGlzdGluZ0Rp
        ciA9IGRpcmVjdGlvbk1hcC5nZXQob2JqKTsKCiAgICAvLyBpZiB3ZSBoYXZl
        bid0IHNjaGVkdWxlZCB0aGUgYmluZGluZyB5ZXQsIHNjaGVkdWxlIGl0CiAg
        ICBpZiAoIWV4aXN0aW5nRGlyKSB7CiAgICAgIEVtYmVyLnJ1bi5zY2hlZHVs
        ZSgnc3luYycsIHRoaXMsIHRoaXMuX3N5bmMsIG9iaik7CiAgICAgIGRpcmVj
        dGlvbk1hcC5zZXQob2JqLCBkaXIpOwogICAgfQoKICAgIC8vIElmIGJvdGgg
        YSAnYmFjaycgYW5kICdmd2QnIHN5bmMgaGF2ZSBiZWVuIHNjaGVkdWxlZCBv
        biB0aGUgc2FtZSBvYmplY3QsCiAgICAvLyBkZWZhdWx0IHRvIGEgJ2Z3ZCcg
        c3luYyBzbyB0aGF0IGl0IHJlbWFpbnMgZGV0ZXJtaW5pc3RpYy4KICAgIGlm
        IChleGlzdGluZ0RpciA9PT0gJ2JhY2snICYmIGRpciA9PT0gJ2Z3ZCcpIHsK
        ICAgICAgZGlyZWN0aW9uTWFwLnNldChvYmosICdmd2QnKTsKICAgIH0KICB9
        LAoKICBfc3luYzogZnVuY3Rpb24ob2JqKSB7CiAgICB2YXIgbG9nID0gRW1i
        ZXIuTE9HX0JJTkRJTkdTOwoKICAgIC8vIGRvbid0IHN5bmNocm9uaXplIGRl
        c3Ryb3llZCBvYmplY3RzIG9yIGRpc2Nvbm5lY3RlZCBiaW5kaW5ncwogICAg
        aWYgKG9iai5pc0Rlc3Ryb3llZCB8fCAhdGhpcy5fcmVhZHlUb1N5bmMpIHsg
        cmV0dXJuOyB9CgogICAgLy8gZ2V0IHRoZSBkaXJlY3Rpb24gb2YgdGhlIGJp
        bmRpbmcgZm9yIHRoZSBvYmplY3Qgd2UgYXJlCiAgICAvLyBzeW5jaHJvbml6
        aW5nIGZyb20KICAgIHZhciBkaXJlY3Rpb25NYXAgPSB0aGlzLl9kaXJlY3Rp
        b25NYXA7CiAgICB2YXIgZGlyZWN0aW9uID0gZGlyZWN0aW9uTWFwLmdldChv
        YmopOwoKICAgIHZhciBmcm9tUGF0aCA9IHRoaXMuX2Zyb20sIHRvUGF0aCA9
        IHRoaXMuX3RvOwoKICAgIGRpcmVjdGlvbk1hcC5yZW1vdmUob2JqKTsKCiAg
        ICAvLyBpZiB3ZSdyZSBzeW5jaHJvbml6aW5nIGZyb20gdGhlIHJlbW90ZSBv
        YmplY3QuLi4KICAgIGlmIChkaXJlY3Rpb24gPT09ICdmd2QnKSB7CiAgICAg
        IHZhciBmcm9tVmFsdWUgPSBnZXRXaXRoR2xvYmFscyhvYmosIHRoaXMuX2Zy
        b20pOwogICAgICBpZiAobG9nKSB7CiAgICAgICAgRW1iZXIuTG9nZ2VyLmxv
        ZygnICcsIHRoaXMudG9TdHJpbmcoKSwgJy0+JywgZnJvbVZhbHVlLCBvYmop
        OwogICAgICB9CiAgICAgIGlmICh0aGlzLl9vbmVXYXkpIHsKICAgICAgICBF
        bWJlci50cnlTZXQob2JqLCB0b1BhdGgsIGZyb21WYWx1ZSk7CiAgICAgIH0g
        ZWxzZSB7CiAgICAgICAgRW1iZXIuX3N1c3BlbmRPYnNlcnZlcihvYmosIHRv
        UGF0aCwgdGhpcywgdGhpcy50b0RpZENoYW5nZSwgZnVuY3Rpb24gKCkgewog
        ICAgICAgICAgRW1iZXIudHJ5U2V0KG9iaiwgdG9QYXRoLCBmcm9tVmFsdWUp
        OwogICAgICAgIH0pOwogICAgICB9CiAgICAvLyBpZiB3ZSdyZSBzeW5jaHJv
        bml6aW5nICp0byogdGhlIHJlbW90ZSBvYmplY3QKICAgIH0gZWxzZSBpZiAo
        ZGlyZWN0aW9uID09PSAnYmFjaycpIHsKICAgICAgdmFyIHRvVmFsdWUgPSBn
        ZXQob2JqLCB0aGlzLl90byk7CiAgICAgIGlmIChsb2cpIHsKICAgICAgICBF
        bWJlci5Mb2dnZXIubG9nKCcgJywgdGhpcy50b1N0cmluZygpLCAnPC0nLCB0
        b1ZhbHVlLCBvYmopOwogICAgICB9CiAgICAgIEVtYmVyLl9zdXNwZW5kT2Jz
        ZXJ2ZXIob2JqLCBmcm9tUGF0aCwgdGhpcywgdGhpcy5mcm9tRGlkQ2hhbmdl
        LCBmdW5jdGlvbiAoKSB7CiAgICAgICAgRW1iZXIudHJ5U2V0KEVtYmVyLmlz
        R2xvYmFsUGF0aChmcm9tUGF0aCkgPyBFbWJlci5sb29rdXAgOiBvYmosIGZy
        b21QYXRoLCB0b1ZhbHVlKTsKICAgICAgfSk7CiAgICB9CiAgfQoKfTsKCmZ1
        bmN0aW9uIG1peGluUHJvcGVydGllcyh0bywgZnJvbSkgewogIGZvciAodmFy
        IGtleSBpbiBmcm9tKSB7CiAgICBpZiAoZnJvbS5oYXNPd25Qcm9wZXJ0eShr
        ZXkpKSB7CiAgICAgIHRvW2tleV0gPSBmcm9tW2tleV07CiAgICB9CiAgfQp9
        CgptaXhpblByb3BlcnRpZXMoQmluZGluZywgewoKICAvKgogICAgU2VlIGBF
        bWJlci5CaW5kaW5nLmZyb21gLgoKICAgIEBtZXRob2QgZnJvbQogICAgQHN0
        YXRpYwogICovCiAgZnJvbTogZnVuY3Rpb24oKSB7CiAgICB2YXIgQyA9IHRo
        aXMsIGJpbmRpbmcgPSBuZXcgQygpOwogICAgcmV0dXJuIGJpbmRpbmcuZnJv
        bS5hcHBseShiaW5kaW5nLCBhcmd1bWVudHMpOwogIH0sCgogIC8qCiAgICBT
        ZWUgYEVtYmVyLkJpbmRpbmcudG9gLgoKICAgIEBtZXRob2QgdG8KICAgIEBz
        dGF0aWMKICAqLwogIHRvOiBmdW5jdGlvbigpIHsKICAgIHZhciBDID0gdGhp
        cywgYmluZGluZyA9IG5ldyBDKCk7CiAgICByZXR1cm4gYmluZGluZy50by5h
        cHBseShiaW5kaW5nLCBhcmd1bWVudHMpOwogIH0sCgogIC8qKgogICAgQ3Jl
        YXRlcyBhIG5ldyBCaW5kaW5nIGluc3RhbmNlIGFuZCBtYWtlcyBpdCBhcHBs
        eSBpbiBhIHNpbmdsZSBkaXJlY3Rpb24uCiAgICBBIG9uZS13YXkgYmluZGlu
        ZyB3aWxsIHJlbGF5IGNoYW5nZXMgb24gdGhlIGBmcm9tYCBzaWRlIG9iamVj
        dCAoc3VwcGxpZWQKICAgIGFzIHRoZSBgZnJvbWAgYXJndW1lbnQpIHRoZSBg
        dG9gIHNpZGUsIGJ1dCBub3QgdGhlIG90aGVyIHdheSBhcm91bmQuCiAgICBU
        aGlzIG1lYW5zIHRoYXQgaWYgeW91IGNoYW5nZSB0aGUgInRvIiBzaWRlIGRp
        cmVjdGx5LCB0aGUgImZyb20iIHNpZGUgbWF5IGhhdmUKICAgIGEgZGlmZmVy
        ZW50IHZhbHVlLgoKICAgIFNlZSBgQmluZGluZy5vbmVXYXlgLgoKICAgIEBt
        ZXRob2Qgb25lV2F5CiAgICBAcGFyYW0ge1N0cmluZ30gZnJvbSBmcm9tIHBh
        dGguCiAgICBAcGFyYW0ge0Jvb2xlYW59IFtmbGFnXSAoT3B0aW9uYWwpIHBh
        c3Npbmcgbm90aGluZyBoZXJlIHdpbGwgbWFrZSB0aGUKICAgICAgYmluZGlu
        ZyBgb25lV2F5YC4gWW91IGNhbiBpbnN0ZWFkIHBhc3MgYGZhbHNlYCB0byBk
        aXNhYmxlIGBvbmVXYXlgLCBtYWtpbmcgdGhlCiAgICAgIGJpbmRpbmcgdHdv
        IHdheSBhZ2Fpbi4KICAgIEByZXR1cm4ge0VtYmVyLkJpbmRpbmd9IGB0aGlz
        YAogICovCiAgb25lV2F5OiBmdW5jdGlvbihmcm9tLCBmbGFnKSB7CiAgICB2
        YXIgQyA9IHRoaXMsIGJpbmRpbmcgPSBuZXcgQyhudWxsLCBmcm9tKTsKICAg
        IHJldHVybiBiaW5kaW5nLm9uZVdheShmbGFnKTsKICB9Cgp9KTsKCi8qKgog
        IEFuIGBFbWJlci5CaW5kaW5nYCBjb25uZWN0cyB0aGUgcHJvcGVydGllcyBv
        ZiB0d28gb2JqZWN0cyBzbyB0aGF0IHdoZW5ldmVyCiAgdGhlIHZhbHVlIG9m
        IG9uZSBwcm9wZXJ0eSBjaGFuZ2VzLCB0aGUgb3RoZXIgcHJvcGVydHkgd2ls
        bCBiZSBjaGFuZ2VkIGFsc28uCgogICMjIEF1dG9tYXRpYyBDcmVhdGlvbiBv
        ZiBCaW5kaW5ncyB3aXRoIGAvXipCaW5kaW5nL2AtbmFtZWQgUHJvcGVydGll
        cwoKICBZb3UgZG8gbm90IHVzdWFsbHkgY3JlYXRlIEJpbmRpbmcgb2JqZWN0
        cyBkaXJlY3RseSBidXQgaW5zdGVhZCBkZXNjcmliZQogIGJpbmRpbmdzIGlu
        IHlvdXIgY2xhc3Mgb3Igb2JqZWN0IGRlZmluaXRpb24gdXNpbmcgYXV0b21h
        dGljIGJpbmRpbmcKICBkZXRlY3Rpb24uCgogIFByb3BlcnRpZXMgZW5kaW5n
        IGluIGEgYEJpbmRpbmdgIHN1ZmZpeCB3aWxsIGJlIGNvbnZlcnRlZCB0byBg
        RW1iZXIuQmluZGluZ2AKICBpbnN0YW5jZXMuIFRoZSB2YWx1ZSBvZiB0aGlz
        IHByb3BlcnR5IHNob3VsZCBiZSBhIHN0cmluZyByZXByZXNlbnRpbmcgYSBw
        YXRoCiAgdG8gYW5vdGhlciBvYmplY3Qgb3IgYSBjdXN0b20gYmluZGluZyBp
        bnN0YW5jZWQgY3JlYXRlZCB1c2luZyBCaW5kaW5nIGhlbHBlcnMKICAoc2Vl
        ICJPbmUgV2F5IEJpbmRpbmdzIik6CgogIGBgYAogIHZhbHVlQmluZGluZzog
        Ik15QXBwLnNvbWVDb250cm9sbGVyLnRpdGxlIgogIGBgYAoKICBUaGlzIHdp
        bGwgY3JlYXRlIGEgYmluZGluZyBmcm9tIGBNeUFwcC5zb21lQ29udHJvbGxl
        ci50aXRsZWAgdG8gdGhlIGB2YWx1ZWAKICBwcm9wZXJ0eSBvZiB5b3VyIG9i
        amVjdCBpbnN0YW5jZSBhdXRvbWF0aWNhbGx5LiBOb3cgdGhlIHR3byB2YWx1
        ZXMgd2lsbCBiZQogIGtlcHQgaW4gc3luYy4KCiAgIyMgT25lIFdheSBCaW5k
        aW5ncwoKICBPbmUgZXNwZWNpYWxseSB1c2VmdWwgYmluZGluZyBjdXN0b21p
        emF0aW9uIHlvdSBjYW4gdXNlIGlzIHRoZSBgb25lV2F5KClgCiAgaGVscGVy
        LiBUaGlzIGhlbHBlciB0ZWxscyBFbWJlciB0aGF0IHlvdSBhcmUgb25seSBp
        bnRlcmVzdGVkIGluCiAgcmVjZWl2aW5nIGNoYW5nZXMgb24gdGhlIG9iamVj
        dCB5b3UgYXJlIGJpbmRpbmcgZnJvbS4gRm9yIGV4YW1wbGUsIGlmIHlvdQog
        IGFyZSBiaW5kaW5nIHRvIGEgcHJlZmVyZW5jZSBhbmQgeW91IHdhbnQgdG8g
        YmUgbm90aWZpZWQgaWYgdGhlIHByZWZlcmVuY2UKICBoYXMgY2hhbmdlZCwg
        YnV0IHlvdXIgb2JqZWN0IHdpbGwgbm90IGJlIGNoYW5naW5nIHRoZSBwcmVm
        ZXJlbmNlIGl0c2VsZiwgeW91CiAgY291bGQgZG86CgogIGBgYAogIGJpZ1Rp
        dGxlc0JpbmRpbmc6IEVtYmVyLkJpbmRpbmcub25lV2F5KCJNeUFwcC5wcmVm
        ZXJlbmNlc0NvbnRyb2xsZXIuYmlnVGl0bGVzIikKICBgYGAKCiAgVGhpcyB3
        YXkgaWYgdGhlIHZhbHVlIG9mIGBNeUFwcC5wcmVmZXJlbmNlc0NvbnRyb2xs
        ZXIuYmlnVGl0bGVzYCBjaGFuZ2VzIHRoZQogIGBiaWdUaXRsZXNgIHByb3Bl
        cnR5IG9mIHlvdXIgb2JqZWN0IHdpbGwgY2hhbmdlIGFsc28uIEhvd2V2ZXIs
        IGlmIHlvdQogIGNoYW5nZSB0aGUgdmFsdWUgb2YgeW91ciBgYmlnVGl0bGVz
        YCBwcm9wZXJ0eSwgaXQgd2lsbCBub3QgdXBkYXRlIHRoZQogIGBwcmVmZXJl
        bmNlc0NvbnRyb2xsZXJgLgoKICBPbmUgd2F5IGJpbmRpbmdzIGFyZSBhbG1v
        c3QgdHdpY2UgYXMgZmFzdCB0byBzZXR1cCBhbmQgdHdpY2UgYXMgZmFzdCB0
        bwogIGV4ZWN1dGUgYmVjYXVzZSB0aGUgYmluZGluZyBvbmx5IGhhcyB0byB3
        b3JyeSBhYm91dCBjaGFuZ2VzIHRvIG9uZSBzaWRlLgoKICBZb3Ugc2hvdWxk
        IGNvbnNpZGVyIHVzaW5nIG9uZSB3YXkgYmluZGluZ3MgYW55dGltZSB5b3Ug
        aGF2ZSBhbiBvYmplY3QgdGhhdAogIG1heSBiZSBjcmVhdGVkIGZyZXF1ZW50
        bHkgYW5kIHlvdSBkbyBub3QgaW50ZW5kIHRvIGNoYW5nZSBhIHByb3BlcnR5
        OyBvbmx5CiAgdG8gbW9uaXRvciBpdCBmb3IgY2hhbmdlcyAoc3VjaCBhcyBp
        biB0aGUgZXhhbXBsZSBhYm92ZSkuCgogICMjIEFkZGluZyBCaW5kaW5ncyBN
        YW51YWxseQoKICBBbGwgb2YgdGhlIGV4YW1wbGVzIGFib3ZlIHNob3cgeW91
        IGhvdyB0byBjb25maWd1cmUgYSBjdXN0b20gYmluZGluZywgYnV0IHRoZQog
        IHJlc3VsdCBvZiB0aGVzZSBjdXN0b21pemF0aW9ucyB3aWxsIGJlIGEgYmlu
        ZGluZyB0ZW1wbGF0ZSwgbm90IGEgZnVsbHkgYWN0aXZlCiAgQmluZGluZyBp
        bnN0YW5jZS4gVGhlIGJpbmRpbmcgd2lsbCBhY3R1YWxseSBiZWNvbWUgYWN0
        aXZlIG9ubHkgd2hlbiB5b3UKICBpbnN0YW50aWF0ZSB0aGUgb2JqZWN0IHRo
        ZSBiaW5kaW5nIGJlbG9uZ3MgdG8uIEl0IGlzIHVzZWZ1bCBob3dldmVyLCB0
        bwogIHVuZGVyc3RhbmQgd2hhdCBhY3R1YWxseSBoYXBwZW5zIHdoZW4gdGhl
        IGJpbmRpbmcgaXMgYWN0aXZhdGVkLgoKICBGb3IgYSBiaW5kaW5nIHRvIGZ1
        bmN0aW9uIGl0IG11c3QgaGF2ZSBhdCBsZWFzdCBhIGBmcm9tYCBwcm9wZXJ0
        eSBhbmQgYSBgdG9gCiAgcHJvcGVydHkuIFRoZSBgZnJvbWAgcHJvcGVydHkg
        cGF0aCBwb2ludHMgdG8gdGhlIG9iamVjdC9rZXkgdGhhdCB5b3Ugd2FudCB0
        bwogIGJpbmQgZnJvbSB3aGlsZSB0aGUgYHRvYCBwYXRoIHBvaW50cyB0byB0
        aGUgb2JqZWN0L2tleSB5b3Ugd2FudCB0byBiaW5kIHRvLgoKICBXaGVuIHlv
        dSBkZWZpbmUgYSBjdXN0b20gYmluZGluZywgeW91IGFyZSB1c3VhbGx5IGRl
        c2NyaWJpbmcgdGhlIHByb3BlcnR5CiAgeW91IHdhbnQgdG8gYmluZCBmcm9t
        IChzdWNoIGFzIGBNeUFwcC5zb21lQ29udHJvbGxlci52YWx1ZWAgaW4gdGhl
        IGV4YW1wbGVzCiAgYWJvdmUpLiBXaGVuIHlvdXIgb2JqZWN0IGlzIGNyZWF0
        ZWQsIGl0IHdpbGwgYXV0b21hdGljYWxseSBhc3NpZ24gdGhlIHZhbHVlCiAg
        eW91IHdhbnQgdG8gYmluZCBgdG9gIGJhc2VkIG9uIHRoZSBuYW1lIG9mIHlv
        dXIgYmluZGluZyBrZXkuIEluIHRoZQogIGV4YW1wbGVzIGFib3ZlLCBkdXJp
        bmcgaW5pdCwgRW1iZXIgb2JqZWN0cyB3aWxsIGVmZmVjdGl2ZWx5IGNhbGwK
        ICBzb21ldGhpbmcgbGlrZSB0aGlzIG9uIHlvdXIgYmluZGluZzoKCiAgYGBg
        amF2YXNjcmlwdAogIGJpbmRpbmcgPSBFbWJlci5CaW5kaW5nLmZyb20odGhp
        cy52YWx1ZUJpbmRpbmcpLnRvKCJ2YWx1ZSIpOwogIGBgYAoKICBUaGlzIGNy
        ZWF0ZXMgYSBuZXcgYmluZGluZyBpbnN0YW5jZSBiYXNlZCBvbiB0aGUgdGVt
        cGxhdGUgeW91IHByb3ZpZGUsIGFuZAogIHNldHMgdGhlIHRvIHBhdGggdG8g
        dGhlIGB2YWx1ZWAgcHJvcGVydHkgb2YgdGhlIG5ldyBvYmplY3QuIE5vdyB0
        aGF0IHRoZQogIGJpbmRpbmcgaXMgZnVsbHkgY29uZmlndXJlZCB3aXRoIGEg
        YGZyb21gIGFuZCBhIGB0b2AsIGl0IHNpbXBseSBuZWVkcyB0byBiZQogIGNv
        bm5lY3RlZCB0byBiZWNvbWUgYWN0aXZlLiBUaGlzIGlzIGRvbmUgdGhyb3Vn
        aCB0aGUgYGNvbm5lY3QoKWAgbWV0aG9kOgoKICBgYGBqYXZhc2NyaXB0CiAg
        YmluZGluZy5jb25uZWN0KHRoaXMpOwogIGBgYAoKICBOb3RlIHRoYXQgd2hl
        biB5b3UgY29ubmVjdCBhIGJpbmRpbmcgeW91IHBhc3MgdGhlIG9iamVjdCB5
        b3Ugd2FudCBpdCB0byBiZQogIGNvbm5lY3RlZCB0by4gVGhpcyBvYmplY3Qg
        d2lsbCBiZSB1c2VkIGFzIHRoZSByb290IGZvciBib3RoIHRoZSBmcm9tIGFu
        ZAogIHRvIHNpZGUgb2YgdGhlIGJpbmRpbmcgd2hlbiBpbnNwZWN0aW5nIHJl
        bGF0aXZlIHBhdGhzLiBUaGlzIGFsbG93cyB0aGUKICBiaW5kaW5nIHRvIGJl
        IGF1dG9tYXRpY2FsbHkgaW5oZXJpdGVkIGJ5IHN1YmNsYXNzZWQgb2JqZWN0
        cyBhcyB3ZWxsLgoKICBOb3cgdGhhdCB0aGUgYmluZGluZyBpcyBjb25uZWN0
        ZWQsIGl0IHdpbGwgb2JzZXJ2ZSBib3RoIHRoZSBmcm9tIGFuZCB0byBzaWRl
        CiAgYW5kIHJlbGF5IGNoYW5nZXMuCgogIElmIHlvdSBldmVyIG5lZWRlZCB0
        byBkbyBzbyAoeW91IGFsbW9zdCBuZXZlciB3aWxsLCBidXQgaXQgaXMgdXNl
        ZnVsIHRvCiAgdW5kZXJzdGFuZCB0aGlzIGFueXdheSksIHlvdSBjb3VsZCBt
        YW51YWxseSBjcmVhdGUgYW4gYWN0aXZlIGJpbmRpbmcgYnkKICB1c2luZyB0
        aGUgYEVtYmVyLmJpbmQoKWAgaGVscGVyIG1ldGhvZC4gKFRoaXMgaXMgdGhl
        IHNhbWUgbWV0aG9kIHVzZWQgYnkKICB0byBzZXR1cCB5b3VyIGJpbmRpbmdz
        IG9uIG9iamVjdHMpOgoKICBgYGBqYXZhc2NyaXB0CiAgRW1iZXIuYmluZChN
        eUFwcC5hbm90aGVyT2JqZWN0LCAidmFsdWUiLCAiTXlBcHAuc29tZUNvbnRy
        b2xsZXIudmFsdWUiKTsKICBgYGAKCiAgQm90aCBvZiB0aGVzZSBjb2RlIGZy
        YWdtZW50cyBoYXZlIHRoZSBzYW1lIGVmZmVjdCBhcyBkb2luZyB0aGUgbW9z
        dCBmcmllbmRseQogIGZvcm0gb2YgYmluZGluZyBjcmVhdGlvbiBsaWtlIHNv
        OgoKICBgYGBqYXZhc2NyaXB0CiAgTXlBcHAuYW5vdGhlck9iamVjdCA9IEVt
        YmVyLk9iamVjdC5jcmVhdGUoewogICAgdmFsdWVCaW5kaW5nOiAiTXlBcHAu
        c29tZUNvbnRyb2xsZXIudmFsdWUiLAoKICAgIC8vIE9USEVSIENPREUgRk9S
        IFRISVMgT0JKRUNULi4uCiAgfSk7CiAgYGBgCgogIEVtYmVyJ3MgYnVpbHQg
        aW4gYmluZGluZyBjcmVhdGlvbiBtZXRob2QgbWFrZXMgaXQgZWFzeSB0byBh
        dXRvbWF0aWNhbGx5CiAgY3JlYXRlIGJpbmRpbmdzIGZvciB5b3UuIFlvdSBz
        aG91bGQgYWx3YXlzIHVzZSB0aGUgaGlnaGVzdC1sZXZlbCBBUElzCiAgYXZh
        aWxhYmxlLCBldmVuIGlmIHlvdSB1bmRlcnN0YW5kIGhvdyBpdCB3b3JrcyB1
        bmRlcm5lYXRoLgoKICBAY2xhc3MgQmluZGluZwogIEBuYW1lc3BhY2UgRW1i
        ZXIKICBAc2luY2UgRW1iZXIgMC45CiovCkVtYmVyLkJpbmRpbmcgPSBCaW5k
        aW5nOwoKCi8qKgogIEdsb2JhbCBoZWxwZXIgbWV0aG9kIHRvIGNyZWF0ZSBh
        IG5ldyBiaW5kaW5nLiBKdXN0IHBhc3MgdGhlIHJvb3Qgb2JqZWN0CiAgYWxv
        bmcgd2l0aCBhIGB0b2AgYW5kIGBmcm9tYCBwYXRoIHRvIGNyZWF0ZSBhbmQg
        Y29ubmVjdCB0aGUgYmluZGluZy4KCiAgQG1ldGhvZCBiaW5kCiAgQGZvciBF
        bWJlcgogIEBwYXJhbSB7T2JqZWN0fSBvYmogVGhlIHJvb3Qgb2JqZWN0IG9m
        IHRoZSB0cmFuc2Zvcm0uCiAgQHBhcmFtIHtTdHJpbmd9IHRvIFRoZSBwYXRo
        IHRvIHRoZSAndG8nIHNpZGUgb2YgdGhlIGJpbmRpbmcuCiAgICBNdXN0IGJl
        IHJlbGF0aXZlIHRvIG9iai4KICBAcGFyYW0ge1N0cmluZ30gZnJvbSBUaGUg
        cGF0aCB0byB0aGUgJ2Zyb20nIHNpZGUgb2YgdGhlIGJpbmRpbmcuCiAgICBN
        dXN0IGJlIHJlbGF0aXZlIHRvIG9iaiBvciBhIGdsb2JhbCBwYXRoLgogIEBy
        ZXR1cm4ge0VtYmVyLkJpbmRpbmd9IGJpbmRpbmcgaW5zdGFuY2UKKi8KRW1i
        ZXIuYmluZCA9IGZ1bmN0aW9uKG9iaiwgdG8sIGZyb20pIHsKICByZXR1cm4g
        bmV3IEVtYmVyLkJpbmRpbmcodG8sIGZyb20pLmNvbm5lY3Qob2JqKTsKfTsK
        Ci8qKgogIEBtZXRob2Qgb25lV2F5CiAgQGZvciBFbWJlcgogIEBwYXJhbSB7
        T2JqZWN0fSBvYmogVGhlIHJvb3Qgb2JqZWN0IG9mIHRoZSB0cmFuc2Zvcm0u
        CiAgQHBhcmFtIHtTdHJpbmd9IHRvIFRoZSBwYXRoIHRvIHRoZSAndG8nIHNp
        ZGUgb2YgdGhlIGJpbmRpbmcuCiAgICBNdXN0IGJlIHJlbGF0aXZlIHRvIG9i
        ai4KICBAcGFyYW0ge1N0cmluZ30gZnJvbSBUaGUgcGF0aCB0byB0aGUgJ2Zy
        b20nIHNpZGUgb2YgdGhlIGJpbmRpbmcuCiAgICBNdXN0IGJlIHJlbGF0aXZl
        IHRvIG9iaiBvciBhIGdsb2JhbCBwYXRoLgogIEByZXR1cm4ge0VtYmVyLkJp
        bmRpbmd9IGJpbmRpbmcgaW5zdGFuY2UKKi8KRW1iZXIub25lV2F5ID0gZnVu
        Y3Rpb24ob2JqLCB0bywgZnJvbSkgewogIHJldHVybiBuZXcgRW1iZXIuQmlu
        ZGluZyh0bywgZnJvbSkub25lV2F5KCkuY29ubmVjdChvYmopOwp9OwoKfSko
        KTsKCgoKKGZ1bmN0aW9uKCkgewovKioKQG1vZHVsZSBlbWJlcgpAc3VibW9k
        dWxlIGVtYmVyLW1ldGFsCiovCgp2YXIgTWl4aW4sIFJFUVVJUkVELCBBbGlh
        cywKICAgIGFfbWFwID0gRW1iZXIuQXJyYXlQb2x5ZmlsbHMubWFwLAogICAg
        YV9pbmRleE9mID0gRW1iZXIuQXJyYXlQb2x5ZmlsbHMuaW5kZXhPZiwKICAg
        IGFfZm9yRWFjaCA9IEVtYmVyLkFycmF5UG9seWZpbGxzLmZvckVhY2gsCiAg
        ICBhX3NsaWNlID0gW10uc2xpY2UsCiAgICBvX2NyZWF0ZSA9IEVtYmVyLmNy
        ZWF0ZSwKICAgIGRlZmluZVByb3BlcnR5ID0gRW1iZXIuZGVmaW5lUHJvcGVy
        dHksCiAgICBndWlkRm9yID0gRW1iZXIuZ3VpZEZvcjsKCmZ1bmN0aW9uIG1p
        eGluc01ldGEob2JqKSB7CiAgdmFyIG0gPSBFbWJlci5tZXRhKG9iaiwgdHJ1
        ZSksIHJldCA9IG0ubWl4aW5zOwogIGlmICghcmV0KSB7CiAgICByZXQgPSBt
        Lm1peGlucyA9IHt9OwogIH0gZWxzZSBpZiAoIW0uaGFzT3duUHJvcGVydHko
        J21peGlucycpKSB7CiAgICByZXQgPSBtLm1peGlucyA9IG9fY3JlYXRlKHJl
        dCk7CiAgfQogIHJldHVybiByZXQ7Cn0KCmZ1bmN0aW9uIGluaXRNaXhpbiht
        aXhpbiwgYXJncykgewogIGlmIChhcmdzICYmIGFyZ3MubGVuZ3RoID4gMCkg
        ewogICAgbWl4aW4ubWl4aW5zID0gYV9tYXAuY2FsbChhcmdzLCBmdW5jdGlv
        bih4KSB7CiAgICAgIGlmICh4IGluc3RhbmNlb2YgTWl4aW4pIHsgcmV0dXJu
        IHg7IH0KCiAgICAgIC8vIE5vdGU6IE1hbnVhbGx5IHNldHVwIGEgcHJpbWl0
        aXZlIG1peGluIGhlcmUuIFRoaXMgaXMgdGhlIG9ubHkKICAgICAgLy8gd2F5
        IHRvIGFjdHVhbGx5IGdldCBhIHByaW1pdGl2ZSBtaXhpbi4gVGhpcyB3YXkg
        bm9ybWFsIGNyZWF0aW9uCiAgICAgIC8vIG9mIG1peGlucyB3aWxsIGdpdmUg
        eW91IGNvbWJpbmVkIG1peGlucy4uLgogICAgICB2YXIgbWl4aW4gPSBuZXcg
        TWl4aW4oKTsKICAgICAgbWl4aW4ucHJvcGVydGllcyA9IHg7CiAgICAgIHJl
        dHVybiBtaXhpbjsKICAgIH0pOwogIH0KICByZXR1cm4gbWl4aW47Cn0KCmZ1
        bmN0aW9uIGlzTWV0aG9kKG9iaikgewogIHJldHVybiAnZnVuY3Rpb24nID09
        PSB0eXBlb2Ygb2JqICYmCiAgICAgICAgIG9iai5pc01ldGhvZCAhPT0gZmFs
        c2UgJiYKICAgICAgICAgb2JqICE9PSBCb29sZWFuICYmIG9iaiAhPT0gT2Jq
        ZWN0ICYmIG9iaiAhPT0gTnVtYmVyICYmIG9iaiAhPT0gQXJyYXkgJiYgb2Jq
        ICE9PSBEYXRlICYmIG9iaiAhPT0gU3RyaW5nOwp9Cgp2YXIgQ09OVElOVUUg
        PSB7fTsKCmZ1bmN0aW9uIG1peGluUHJvcGVydGllcyhtaXhpbnNNZXRhLCBt
        aXhpbikgewogIHZhciBndWlkOwoKICBpZiAobWl4aW4gaW5zdGFuY2VvZiBN
        aXhpbikgewogICAgZ3VpZCA9IGd1aWRGb3IobWl4aW4pOwogICAgaWYgKG1p
        eGluc01ldGFbZ3VpZF0pIHsgcmV0dXJuIENPTlRJTlVFOyB9CiAgICBtaXhp
        bnNNZXRhW2d1aWRdID0gbWl4aW47CiAgICByZXR1cm4gbWl4aW4ucHJvcGVy
        dGllczsKICB9IGVsc2UgewogICAgcmV0dXJuIG1peGluOyAvLyBhcHBseSBh
        bm9ueW1vdXMgbWl4aW4gcHJvcGVydGllcwogIH0KfQoKZnVuY3Rpb24gY29u
        Y2F0ZW5hdGVkTWl4aW5Qcm9wZXJ0aWVzKGNvbmNhdFByb3AsIHByb3BzLCB2
        YWx1ZXMsIGJhc2UpIHsKICB2YXIgY29uY2F0czsKCiAgLy8gcmVzZXQgYmVm
        b3JlIGFkZGluZyBlYWNoIG5ldyBtaXhpbiB0byBwaWNrdXAgY29uY2F0cyBm
        cm9tIHByZXZpb3VzCiAgY29uY2F0cyA9IHZhbHVlc1tjb25jYXRQcm9wXSB8
        fCBiYXNlW2NvbmNhdFByb3BdOwogIGlmIChwcm9wc1tjb25jYXRQcm9wXSkg
        ewogICAgY29uY2F0cyA9IGNvbmNhdHMgPyBjb25jYXRzLmNvbmNhdChwcm9w
        c1tjb25jYXRQcm9wXSkgOiBwcm9wc1tjb25jYXRQcm9wXTsKICB9CgogIHJl
        dHVybiBjb25jYXRzOwp9CgpmdW5jdGlvbiBnaXZlRGVzY3JpcHRvclN1cGVy
        KG1ldGEsIGtleSwgcHJvcGVydHksIHZhbHVlcywgZGVzY3MpIHsKICB2YXIg
        c3VwZXJQcm9wZXJ0eTsKCiAgLy8gQ29tcHV0ZWQgcHJvcGVydGllcyBvdmVy
        cmlkZSBtZXRob2RzLCBhbmQgZG8gbm90IGNhbGwgc3VwZXIgdG8gdGhlbQog
        IGlmICh2YWx1ZXNba2V5XSA9PT0gdW5kZWZpbmVkKSB7CiAgICAvLyBGaW5k
        IHRoZSBvcmlnaW5hbCBkZXNjcmlwdG9yIGluIGEgcGFyZW50IG1peGluCiAg
        ICBzdXBlclByb3BlcnR5ID0gZGVzY3Nba2V5XTsKICB9CgogIC8vIElmIHdl
        IGRpZG4ndCBmaW5kIHRoZSBvcmlnaW5hbCBkZXNjcmlwdG9yIGluIGEgcGFy
        ZW50IG1peGluLCBmaW5kCiAgLy8gaXQgb24gdGhlIG9yaWdpbmFsIG9iamVj
        dC4KICBzdXBlclByb3BlcnR5ID0gc3VwZXJQcm9wZXJ0eSB8fCBtZXRhLmRl
        c2NzW2tleV07CgogIGlmICghc3VwZXJQcm9wZXJ0eSB8fCAhKHN1cGVyUHJv
        cGVydHkgaW5zdGFuY2VvZiBFbWJlci5Db21wdXRlZFByb3BlcnR5KSkgewog
        ICAgcmV0dXJuIHByb3BlcnR5OwogIH0KCiAgLy8gU2luY2UgbXVsdGlwbGUg
        bWl4aW5zIG1heSBpbmhlcml0IGZyb20gdGhlIHNhbWUgcGFyZW50LCB3ZSBu
        ZWVkCiAgLy8gdG8gY2xvbmUgdGhlIGNvbXB1dGVkIHByb3BlcnR5IHNvIHRo
        YXQgb3RoZXIgbWl4aW5zIGRvIG5vdCByZWNlaXZlCiAgLy8gdGhlIHdyYXBw
        ZWQgdmVyc2lvbi4KICBwcm9wZXJ0eSA9IG9fY3JlYXRlKHByb3BlcnR5KTsK
        ICBwcm9wZXJ0eS5mdW5jID0gRW1iZXIud3JhcChwcm9wZXJ0eS5mdW5jLCBz
        dXBlclByb3BlcnR5LmZ1bmMpOwoKICByZXR1cm4gcHJvcGVydHk7Cn0KCmZ1
        bmN0aW9uIGdpdmVNZXRob2RTdXBlcihvYmosIGtleSwgbWV0aG9kLCB2YWx1
        ZXMsIGRlc2NzKSB7CiAgdmFyIHN1cGVyTWV0aG9kOwoKICAvLyBNZXRob2Rz
        IG92ZXJ3cml0ZSBjb21wdXRlZCBwcm9wZXJ0aWVzLCBhbmQgZG8gbm90IGNh
        bGwgc3VwZXIgdG8gdGhlbS4KICBpZiAoZGVzY3Nba2V5XSA9PT0gdW5kZWZp
        bmVkKSB7CiAgICAvLyBGaW5kIHRoZSBvcmlnaW5hbCBtZXRob2QgaW4gYSBw
        YXJlbnQgbWl4aW4KICAgIHN1cGVyTWV0aG9kID0gdmFsdWVzW2tleV07CiAg
        fQoKICAvLyBJZiB3ZSBkaWRuJ3QgZmluZCB0aGUgb3JpZ2luYWwgdmFsdWUg
        aW4gYSBwYXJlbnQgbWl4aW4sIGZpbmQgaXQgaW4KICAvLyB0aGUgb3JpZ2lu
        YWwgb2JqZWN0CiAgc3VwZXJNZXRob2QgPSBzdXBlck1ldGhvZCB8fCBvYmpb
        a2V5XTsKCiAgLy8gT25seSB3cmFwIHRoZSBuZXcgbWV0aG9kIGlmIHRoZSBv
        cmlnaW5hbCBtZXRob2Qgd2FzIGEgZnVuY3Rpb24KICBpZiAoJ2Z1bmN0aW9u
        JyAhPT0gdHlwZW9mIHN1cGVyTWV0aG9kKSB7CiAgICByZXR1cm4gbWV0aG9k
        OwogIH0KCiAgcmV0dXJuIEVtYmVyLndyYXAobWV0aG9kLCBzdXBlck1ldGhv
        ZCk7Cn0KCmZ1bmN0aW9uIGFwcGx5Q29uY2F0ZW5hdGVkUHJvcGVydGllcyhv
        YmosIGtleSwgdmFsdWUsIHZhbHVlcykgewogIHZhciBiYXNlVmFsdWUgPSB2
        YWx1ZXNba2V5XSB8fCBvYmpba2V5XTsKCiAgaWYgKGJhc2VWYWx1ZSkgewog
        ICAgaWYgKCdmdW5jdGlvbicgPT09IHR5cGVvZiBiYXNlVmFsdWUuY29uY2F0
        KSB7CiAgICAgIHJldHVybiBiYXNlVmFsdWUuY29uY2F0KHZhbHVlKTsKICAg
        IH0gZWxzZSB7CiAgICAgIHJldHVybiBFbWJlci5tYWtlQXJyYXkoYmFzZVZh
        bHVlKS5jb25jYXQodmFsdWUpOwogICAgfQogIH0gZWxzZSB7CiAgICByZXR1
        cm4gRW1iZXIubWFrZUFycmF5KHZhbHVlKTsKICB9Cn0KCmZ1bmN0aW9uIGFw
        cGx5TWVyZ2VkUHJvcGVydGllcyhvYmosIGtleSwgdmFsdWUsIHZhbHVlcykg
        ewogIHZhciBiYXNlVmFsdWUgPSB2YWx1ZXNba2V5XSB8fCBvYmpba2V5XTsK
        CiAgaWYgKCFiYXNlVmFsdWUpIHsgcmV0dXJuIHZhbHVlOyB9CgogIHZhciBu
        ZXdCYXNlID0gRW1iZXIubWVyZ2Uoe30sIGJhc2VWYWx1ZSk7CiAgZm9yICh2
        YXIgcHJvcCBpbiB2YWx1ZSkgewogICAgaWYgKCF2YWx1ZS5oYXNPd25Qcm9w
        ZXJ0eShwcm9wKSkgeyBjb250aW51ZTsgfQoKICAgIHZhciBwcm9wVmFsdWUg
        PSB2YWx1ZVtwcm9wXTsKICAgIGlmIChpc01ldGhvZChwcm9wVmFsdWUpKSB7
        CiAgICAgIC8vIFRPRE86IHN1cHBvcnQgZm9yIENvbXB1dGVkIFByb3BlcnRp
        ZXMsIGV0Yz8KICAgICAgbmV3QmFzZVtwcm9wXSA9IGdpdmVNZXRob2RTdXBl
        cihvYmosIHByb3AsIHByb3BWYWx1ZSwgYmFzZVZhbHVlLCB7fSk7CiAgICB9
        IGVsc2UgewogICAgICBuZXdCYXNlW3Byb3BdID0gcHJvcFZhbHVlOwogICAg
        fQogIH0KCiAgcmV0dXJuIG5ld0Jhc2U7Cn0KCmZ1bmN0aW9uIGFkZE5vcm1h
        bGl6ZWRQcm9wZXJ0eShiYXNlLCBrZXksIHZhbHVlLCBtZXRhLCBkZXNjcywg
        dmFsdWVzLCBjb25jYXRzLCBtZXJnaW5ncykgewogIGlmICh2YWx1ZSBpbnN0
        YW5jZW9mIEVtYmVyLkRlc2NyaXB0b3IpIHsKICAgIGlmICh2YWx1ZSA9PT0g
        UkVRVUlSRUQgJiYgZGVzY3Nba2V5XSkgeyByZXR1cm4gQ09OVElOVUU7IH0K
        CiAgICAvLyBXcmFwIGRlc2NyaXB0b3IgZnVuY3Rpb24gdG8gaW1wbGVtZW50
        CiAgICAvLyBfc3VwZXIoKSBpZiBuZWVkZWQKICAgIGlmICh2YWx1ZS5mdW5j
        KSB7CiAgICAgIHZhbHVlID0gZ2l2ZURlc2NyaXB0b3JTdXBlcihtZXRhLCBr
        ZXksIHZhbHVlLCB2YWx1ZXMsIGRlc2NzKTsKICAgIH0KCiAgICBkZXNjc1tr
        ZXldICA9IHZhbHVlOwogICAgdmFsdWVzW2tleV0gPSB1bmRlZmluZWQ7CiAg
        fSBlbHNlIHsKICAgIGlmICgoY29uY2F0cyAmJiBhX2luZGV4T2YuY2FsbChj
        b25jYXRzLCBrZXkpID49IDApIHx8CiAgICAgICAgICAgICAgICBrZXkgPT09
        ICdjb25jYXRlbmF0ZWRQcm9wZXJ0aWVzJyB8fAogICAgICAgICAgICAgICAg
        a2V5ID09PSAnbWVyZ2VkUHJvcGVydGllcycpIHsKICAgICAgdmFsdWUgPSBh
        cHBseUNvbmNhdGVuYXRlZFByb3BlcnRpZXMoYmFzZSwga2V5LCB2YWx1ZSwg
        dmFsdWVzKTsKICAgIH0gZWxzZSBpZiAoKG1lcmdpbmdzICYmIGFfaW5kZXhP
        Zi5jYWxsKG1lcmdpbmdzLCBrZXkpID49IDApKSB7CiAgICAgIHZhbHVlID0g
        YXBwbHlNZXJnZWRQcm9wZXJ0aWVzKGJhc2UsIGtleSwgdmFsdWUsIHZhbHVl
        cyk7CiAgICB9IGVsc2UgaWYgKGlzTWV0aG9kKHZhbHVlKSkgewogICAgICB2
        YWx1ZSA9IGdpdmVNZXRob2RTdXBlcihiYXNlLCBrZXksIHZhbHVlLCB2YWx1
        ZXMsIGRlc2NzKTsKICAgIH0KCiAgICBkZXNjc1trZXldID0gdW5kZWZpbmVk
        OwogICAgdmFsdWVzW2tleV0gPSB2YWx1ZTsKICB9Cn0KCmZ1bmN0aW9uIG1l
        cmdlTWl4aW5zKG1peGlucywgbSwgZGVzY3MsIHZhbHVlcywgYmFzZSwga2V5
        cykgewogIHZhciBtaXhpbiwgcHJvcHMsIGtleSwgY29uY2F0cywgbWVyZ2lu
        Z3MsIG1ldGE7CgogIGZ1bmN0aW9uIHJlbW92ZUtleXMoa2V5TmFtZSkgewog
        ICAgZGVsZXRlIGRlc2NzW2tleU5hbWVdOwogICAgZGVsZXRlIHZhbHVlc1tr
        ZXlOYW1lXTsKICB9CgogIGZvcih2YXIgaT0wLCBsPW1peGlucy5sZW5ndGg7
        IGk8bDsgaSsrKSB7CiAgICBtaXhpbiA9IG1peGluc1tpXTsKICAgIEVtYmVy
        LmFzc2VydCgnRXhwZWN0ZWQgaGFzaCBvciBNaXhpbiBpbnN0YW5jZSwgZ290
        ICcgKyBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobWl4aW4pLCB0
        eXBlb2YgbWl4aW4gPT09ICdvYmplY3QnICYmIG1peGluICE9PSBudWxsICYm
        IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChtaXhpbikgIT09ICdb
        b2JqZWN0IEFycmF5XScpOwoKICAgIHByb3BzID0gbWl4aW5Qcm9wZXJ0aWVz
        KG0sIG1peGluKTsKICAgIGlmIChwcm9wcyA9PT0gQ09OVElOVUUpIHsgY29u
        dGludWU7IH0KCiAgICBpZiAocHJvcHMpIHsKICAgICAgbWV0YSA9IEVtYmVy
        Lm1ldGEoYmFzZSk7CiAgICAgIGlmIChiYXNlLndpbGxNZXJnZU1peGluKSB7
        IGJhc2Uud2lsbE1lcmdlTWl4aW4ocHJvcHMpOyB9CiAgICAgIGNvbmNhdHMg
        PSBjb25jYXRlbmF0ZWRNaXhpblByb3BlcnRpZXMoJ2NvbmNhdGVuYXRlZFBy
        b3BlcnRpZXMnLCBwcm9wcywgdmFsdWVzLCBiYXNlKTsKICAgICAgbWVyZ2lu
        Z3MgPSBjb25jYXRlbmF0ZWRNaXhpblByb3BlcnRpZXMoJ21lcmdlZFByb3Bl
        cnRpZXMnLCBwcm9wcywgdmFsdWVzLCBiYXNlKTsKCiAgICAgIGZvciAoa2V5
        IGluIHByb3BzKSB7CiAgICAgICAgaWYgKCFwcm9wcy5oYXNPd25Qcm9wZXJ0
        eShrZXkpKSB7IGNvbnRpbnVlOyB9CiAgICAgICAga2V5cy5wdXNoKGtleSk7
        CiAgICAgICAgYWRkTm9ybWFsaXplZFByb3BlcnR5KGJhc2UsIGtleSwgcHJv
        cHNba2V5XSwgbWV0YSwgZGVzY3MsIHZhbHVlcywgY29uY2F0cywgbWVyZ2lu
        Z3MpOwogICAgICB9CgogICAgICAvLyBtYW51YWxseSBjb3B5IHRvU3RyaW5n
        KCkgYmVjYXVzZSBzb21lIEpTIGVuZ2luZXMgZG8gbm90IGVudW1lcmF0ZSBp
        dAogICAgICBpZiAocHJvcHMuaGFzT3duUHJvcGVydHkoJ3RvU3RyaW5nJykp
        IHsgYmFzZS50b1N0cmluZyA9IHByb3BzLnRvU3RyaW5nOyB9CiAgICB9IGVs
        c2UgaWYgKG1peGluLm1peGlucykgewogICAgICBtZXJnZU1peGlucyhtaXhp
        bi5taXhpbnMsIG0sIGRlc2NzLCB2YWx1ZXMsIGJhc2UsIGtleXMpOwogICAg
        ICBpZiAobWl4aW4uX3dpdGhvdXQpIHsgYV9mb3JFYWNoLmNhbGwobWl4aW4u
        X3dpdGhvdXQsIHJlbW92ZUtleXMpOyB9CiAgICB9CiAgfQp9Cgp2YXIgSVNf
        QklORElORyA9IEVtYmVyLklTX0JJTkRJTkcgPSAvXi4rQmluZGluZyQvOwoK
        ZnVuY3Rpb24gZGV0ZWN0QmluZGluZyhvYmosIGtleSwgdmFsdWUsIG0pIHsK
        ICBpZiAoSVNfQklORElORy50ZXN0KGtleSkpIHsKICAgIHZhciBiaW5kaW5n
        cyA9IG0uYmluZGluZ3M7CiAgICBpZiAoIWJpbmRpbmdzKSB7CiAgICAgIGJp
        bmRpbmdzID0gbS5iaW5kaW5ncyA9IHt9OwogICAgfSBlbHNlIGlmICghbS5o
        YXNPd25Qcm9wZXJ0eSgnYmluZGluZ3MnKSkgewogICAgICBiaW5kaW5ncyA9
        IG0uYmluZGluZ3MgPSBvX2NyZWF0ZShtLmJpbmRpbmdzKTsKICAgIH0KICAg
        IGJpbmRpbmdzW2tleV0gPSB2YWx1ZTsKICB9Cn0KCmZ1bmN0aW9uIGNvbm5l
        Y3RCaW5kaW5ncyhvYmosIG0pIHsKICAvLyBUT0RPIE1peGluLmFwcGx5KGlu
        c3RhbmNlKSBzaG91bGQgZGlzY29ubmVjdCBiaW5kaW5nIGlmIGV4aXN0cwog
        IHZhciBiaW5kaW5ncyA9IG0uYmluZGluZ3MsIGtleSwgYmluZGluZywgdG87
        CiAgaWYgKGJpbmRpbmdzKSB7CiAgICBmb3IgKGtleSBpbiBiaW5kaW5ncykg
        ewogICAgICBiaW5kaW5nID0gYmluZGluZ3Nba2V5XTsKICAgICAgaWYgKGJp
        bmRpbmcpIHsKICAgICAgICB0byA9IGtleS5zbGljZSgwLCAtNyk7IC8vIHN0
        cmlwIEJpbmRpbmcgb2ZmIGVuZAogICAgICAgIGlmIChiaW5kaW5nIGluc3Rh
        bmNlb2YgRW1iZXIuQmluZGluZykgewogICAgICAgICAgYmluZGluZyA9IGJp
        bmRpbmcuY29weSgpOyAvLyBjb3B5IHByb3RvdHlwZXMnIGluc3RhbmNlCiAg
        ICAgICAgICBiaW5kaW5nLnRvKHRvKTsKICAgICAgICB9IGVsc2UgeyAvLyBi
        aW5kaW5nIGlzIHN0cmluZyBwYXRoCiAgICAgICAgICBiaW5kaW5nID0gbmV3
        IEVtYmVyLkJpbmRpbmcodG8sIGJpbmRpbmcpOwogICAgICAgIH0KICAgICAg
        ICBiaW5kaW5nLmNvbm5lY3Qob2JqKTsKICAgICAgICBvYmpba2V5XSA9IGJp
        bmRpbmc7CiAgICAgIH0KICAgIH0KICAgIC8vIG1hcmsgYXMgYXBwbGllZAog
        ICAgbS5iaW5kaW5ncyA9IHt9OwogIH0KfQoKZnVuY3Rpb24gZmluaXNoUGFy
        dGlhbChvYmosIG0pIHsKICBjb25uZWN0QmluZGluZ3Mob2JqLCBtIHx8IEVt
        YmVyLm1ldGEob2JqKSk7CiAgcmV0dXJuIG9iajsKfQoKZnVuY3Rpb24gZm9s
        bG93QWxpYXMob2JqLCBkZXNjLCBtLCBkZXNjcywgdmFsdWVzKSB7CiAgdmFy
        IGFsdEtleSA9IGRlc2MubWV0aG9kTmFtZSwgdmFsdWU7CiAgaWYgKGRlc2Nz
        W2FsdEtleV0gfHwgdmFsdWVzW2FsdEtleV0pIHsKICAgIHZhbHVlID0gdmFs
        dWVzW2FsdEtleV07CiAgICBkZXNjICA9IGRlc2NzW2FsdEtleV07CiAgfSBl
        bHNlIGlmIChtLmRlc2NzW2FsdEtleV0pIHsKICAgIGRlc2MgID0gbS5kZXNj
        c1thbHRLZXldOwogICAgdmFsdWUgPSB1bmRlZmluZWQ7CiAgfSBlbHNlIHsK
        ICAgIGRlc2MgPSB1bmRlZmluZWQ7CiAgICB2YWx1ZSA9IG9ialthbHRLZXld
        OwogIH0KCiAgcmV0dXJuIHsgZGVzYzogZGVzYywgdmFsdWU6IHZhbHVlIH07
        Cn0KCmZ1bmN0aW9uIHVwZGF0ZU9ic2VydmVyc0FuZExpc3RlbmVycyhvYmos
        IGtleSwgb2JzZXJ2ZXJPckxpc3RlbmVyLCBwYXRoc0tleSwgdXBkYXRlTWV0
        aG9kKSB7CiAgdmFyIHBhdGhzID0gb2JzZXJ2ZXJPckxpc3RlbmVyW3BhdGhz
        S2V5XTsKCiAgaWYgKHBhdGhzKSB7CiAgICBmb3IgKHZhciBpPTAsIGw9cGF0
        aHMubGVuZ3RoOyBpPGw7IGkrKykgewogICAgICBFbWJlclt1cGRhdGVNZXRo
        b2RdKG9iaiwgcGF0aHNbaV0sIG51bGwsIGtleSk7CiAgICB9CiAgfQp9Cgpm
        dW5jdGlvbiByZXBsYWNlT2JzZXJ2ZXJzQW5kTGlzdGVuZXJzKG9iaiwga2V5
        LCBvYnNlcnZlck9yTGlzdGVuZXIpIHsKICB2YXIgcHJldiA9IG9ialtrZXld
        OwoKICBpZiAoJ2Z1bmN0aW9uJyA9PT0gdHlwZW9mIHByZXYpIHsKICAgIHVw
        ZGF0ZU9ic2VydmVyc0FuZExpc3RlbmVycyhvYmosIGtleSwgcHJldiwgJ19f
        ZW1iZXJfb2JzZXJ2ZXNCZWZvcmVfXycsICdyZW1vdmVCZWZvcmVPYnNlcnZl
        cicpOwogICAgdXBkYXRlT2JzZXJ2ZXJzQW5kTGlzdGVuZXJzKG9iaiwga2V5
        LCBwcmV2LCAnX19lbWJlcl9vYnNlcnZlc19fJywgJ3JlbW92ZU9ic2VydmVy
        Jyk7CiAgICB1cGRhdGVPYnNlcnZlcnNBbmRMaXN0ZW5lcnMob2JqLCBrZXks
        IHByZXYsICdfX2VtYmVyX2xpc3RlbnNfXycsICdyZW1vdmVMaXN0ZW5lcicp
        OwogIH0KCiAgaWYgKCdmdW5jdGlvbicgPT09IHR5cGVvZiBvYnNlcnZlck9y
        TGlzdGVuZXIpIHsKICAgIHVwZGF0ZU9ic2VydmVyc0FuZExpc3RlbmVycyhv
        YmosIGtleSwgb2JzZXJ2ZXJPckxpc3RlbmVyLCAnX19lbWJlcl9vYnNlcnZl
        c0JlZm9yZV9fJywgJ2FkZEJlZm9yZU9ic2VydmVyJyk7CiAgICB1cGRhdGVP
        YnNlcnZlcnNBbmRMaXN0ZW5lcnMob2JqLCBrZXksIG9ic2VydmVyT3JMaXN0
        ZW5lciwgJ19fZW1iZXJfb2JzZXJ2ZXNfXycsICdhZGRPYnNlcnZlcicpOwog
        ICAgdXBkYXRlT2JzZXJ2ZXJzQW5kTGlzdGVuZXJzKG9iaiwga2V5LCBvYnNl
        cnZlck9yTGlzdGVuZXIsICdfX2VtYmVyX2xpc3RlbnNfXycsICdhZGRMaXN0
        ZW5lcicpOwogIH0KfQoKZnVuY3Rpb24gYXBwbHlNaXhpbihvYmosIG1peGlu
        cywgcGFydGlhbCkgewogIHZhciBkZXNjcyA9IHt9LCB2YWx1ZXMgPSB7fSwg
        bSA9IEVtYmVyLm1ldGEob2JqKSwKICAgICAga2V5LCB2YWx1ZSwgZGVzYywg
        a2V5cyA9IFtdOwoKICAvLyBHbyB0aHJvdWdoIGFsbCBtaXhpbnMgYW5kIGhh
        c2hlcyBwYXNzZWQgaW4sIGFuZDoKICAvLwogIC8vICogSGFuZGxlIGNvbmNh
        dGVuYXRlZCBwcm9wZXJ0aWVzCiAgLy8gKiBIYW5kbGUgbWVyZ2VkIHByb3Bl
        cnRpZXMKICAvLyAqIFNldCB1cCBfc3VwZXIgd3JhcHBpbmcgaWYgbmVjZXNz
        YXJ5CiAgLy8gKiBTZXQgdXAgY29tcHV0ZWQgcHJvcGVydHkgZGVzY3JpcHRv
        cnMKICAvLyAqIENvcHlpbmcgYHRvU3RyaW5nYCBpbiBicm9rZW4gYnJvd3Nl
        cnMKICBtZXJnZU1peGlucyhtaXhpbnMsIG1peGluc01ldGEob2JqKSwgZGVz
        Y3MsIHZhbHVlcywgb2JqLCBrZXlzKTsKCiAgZm9yKHZhciBpID0gMCwgbCA9
        IGtleXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7CiAgICBrZXkgPSBrZXlzW2ld
        OwogICAgaWYgKGtleSA9PT0gJ2NvbnN0cnVjdG9yJyB8fCAhdmFsdWVzLmhh
        c093blByb3BlcnR5KGtleSkpIHsgY29udGludWU7IH0KCiAgICBkZXNjID0g
        ZGVzY3Nba2V5XTsKICAgIHZhbHVlID0gdmFsdWVzW2tleV07CgogICAgaWYg
        KGRlc2MgPT09IFJFUVVJUkVEKSB7IGNvbnRpbnVlOyB9CgogICAgd2hpbGUg
        KGRlc2MgJiYgZGVzYyBpbnN0YW5jZW9mIEFsaWFzKSB7CiAgICAgIHZhciBm
        b2xsb3dlZCA9IGZvbGxvd0FsaWFzKG9iaiwgZGVzYywgbSwgZGVzY3MsIHZh
        bHVlcyk7CiAgICAgIGRlc2MgPSBmb2xsb3dlZC5kZXNjOwogICAgICB2YWx1
        ZSA9IGZvbGxvd2VkLnZhbHVlOwogICAgfQoKICAgIGlmIChkZXNjID09PSB1
        bmRlZmluZWQgJiYgdmFsdWUgPT09IHVuZGVmaW5lZCkgeyBjb250aW51ZTsg
        fQoKICAgIHJlcGxhY2VPYnNlcnZlcnNBbmRMaXN0ZW5lcnMob2JqLCBrZXks
        IHZhbHVlKTsKICAgIGRldGVjdEJpbmRpbmcob2JqLCBrZXksIHZhbHVlLCBt
        KTsKICAgIGRlZmluZVByb3BlcnR5KG9iaiwga2V5LCBkZXNjLCB2YWx1ZSwg
        bSk7CiAgfQoKICBpZiAoIXBhcnRpYWwpIHsgLy8gZG9uJ3QgYXBwbHkgdG8g
        cHJvdG90eXBlCiAgICBmaW5pc2hQYXJ0aWFsKG9iaiwgbSk7CiAgfQoKICBy
        ZXR1cm4gb2JqOwp9CgovKioKICBAbWV0aG9kIG1peGluCiAgQGZvciBFbWJl
        cgogIEBwYXJhbSBvYmoKICBAcGFyYW0gbWl4aW5zKgogIEByZXR1cm4gb2Jq
        CiovCkVtYmVyLm1peGluID0gZnVuY3Rpb24ob2JqKSB7CiAgdmFyIGFyZ3Mg
        PSBhX3NsaWNlLmNhbGwoYXJndW1lbnRzLCAxKTsKICBhcHBseU1peGluKG9i
        aiwgYXJncywgZmFsc2UpOwogIHJldHVybiBvYmo7Cn07CgovKioKICBUaGUg
        YEVtYmVyLk1peGluYCBjbGFzcyBhbGxvd3MgeW91IHRvIGNyZWF0ZSBtaXhp
        bnMsIHdob3NlIHByb3BlcnRpZXMgY2FuIGJlCiAgYWRkZWQgdG8gb3RoZXIg
        Y2xhc3Nlcy4gRm9yIGluc3RhbmNlLAoKICBgYGBqYXZhc2NyaXB0CiAgQXBw
        LkVkaXRhYmxlID0gRW1iZXIuTWl4aW4uY3JlYXRlKHsKICAgIGVkaXQ6IGZ1
        bmN0aW9uKCkgewogICAgICBjb25zb2xlLmxvZygnc3RhcnRpbmcgdG8gZWRp
        dCcpOwogICAgICB0aGlzLnNldCgnaXNFZGl0aW5nJywgdHJ1ZSk7CiAgICB9
        LAogICAgaXNFZGl0aW5nOiBmYWxzZQogIH0pOwoKICAvLyBNaXggbWl4aW5z
        IGludG8gY2xhc3NlcyBieSBwYXNzaW5nIHRoZW0gYXMgdGhlIGZpcnN0IGFy
        Z3VtZW50cyB0bwogIC8vIC5leHRlbmQuCiAgQXBwLkNvbW1lbnRWaWV3ID0g
        RW1iZXIuVmlldy5leHRlbmQoQXBwLkVkaXRhYmxlLCB7CiAgICB0ZW1wbGF0
        ZTogRW1iZXIuSGFuZGxlYmFycy5jb21waWxlKCd7eyNpZiB2aWV3LmlzRWRp
        dGluZ319Li4ue3tlbHNlfX0uLi57ey9pZn19JykKICB9KTsKCiAgY29tbWVu
        dFZpZXcgPSBBcHAuQ29tbWVudFZpZXcuY3JlYXRlKCk7CiAgY29tbWVudFZp
        ZXcuZWRpdCgpOyAvLyBvdXRwdXRzICdzdGFydGluZyB0byBlZGl0JwogIGBg
        YAoKICBOb3RlIHRoYXQgTWl4aW5zIGFyZSBjcmVhdGVkIHdpdGggYEVtYmVy
        Lk1peGluLmNyZWF0ZWAsIG5vdAogIGBFbWJlci5NaXhpbi5leHRlbmRgLgoK
        ICBOb3RlIHRoYXQgbWl4aW5zIGV4dGVuZCBhIGNvbnN0cnVjdG9yJ3MgcHJv
        dG90eXBlIHNvIGFycmF5cyBhbmQgb2JqZWN0IGxpdGVyYWxzCiAgZGVmaW5l
        ZCBhcyBwcm9wZXJ0aWVzIHdpbGwgYmUgc2hhcmVkIGFtb25nc3Qgb2JqZWN0
        cyB0aGF0IGltcGxlbWVudCB0aGUgbWl4aW4uCiAgSWYgeW91IHdhbnQgdG8g
        ZGVmaW5lIGFuIHByb3BlcnR5IGluIGEgbWl4aW4gdGhhdCBpcyBub3Qgc2hh
        cmVkLCB5b3UgY2FuIGRlZmluZQogIGl0IGVpdGhlciBhcyBhIGNvbXB1dGVk
        IHByb3BlcnR5IG9yIGhhdmUgaXQgYmUgY3JlYXRlZCBvbiBpbml0aWFsaXph
        dGlvbiBvZiB0aGUgb2JqZWN0LgoKICBgYGBqYXZhc2NyaXB0CiAgLy9maWx0
        ZXJzIGFycmF5IHdpbGwgYmUgc2hhcmVkIGFtb25nc3QgYW55IG9iamVjdCBp
        bXBsZW1lbnRpbmcgbWl4aW4KICBBcHAuRmlsdGVyYWJsZSA9IEVtYmVyLk1p
        eGluLmNyZWF0ZSh7CiAgICBmaWx0ZXJzOiBFbWJlci5BKCkKICB9KTsKCiAg
        Ly9maWx0ZXJzIHdpbGwgYmUgYSBzZXBhcmF0ZSAgYXJyYXkgZm9yIGV2ZXJ5
        IG9iamVjdCBpbXBsZW1lbnRpbmcgdGhlIG1peGluCiAgQXBwLkZpbHRlcmFi
        bGUgPSBFbWJlci5NaXhpbi5jcmVhdGUoewogICAgZmlsdGVyczogRW1iZXIu
        Y29tcHV0ZWQoZnVuY3Rpb24oKXtyZXR1cm4gRW1iZXIuQSgpO30pCiAgfSk7
        CgogIC8vZmlsdGVycyB3aWxsIGJlIGNyZWF0ZWQgYXMgYSBzZXBhcmF0ZSBh
        cnJheSBkdXJpbmcgdGhlIG9iamVjdCdzIGluaXRpYWxpemF0aW9uCiAgQXBw
        LkZpbHRlcmFibGUgPSBFbWJlci5NaXhpbi5jcmVhdGUoewogICAgaW5pdDog
        ZnVuY3Rpb24oKSB7CiAgICAgIHRoaXMuX3N1cGVyKCk7CiAgICAgIHRoaXMu
        c2V0KCJmaWx0ZXJzIiwgRW1iZXIuQSgpKTsKICAgIH0KICB9KTsKICBgYGAK
        CiAgQGNsYXNzIE1peGluCiAgQG5hbWVzcGFjZSBFbWJlcgoqLwpFbWJlci5N
        aXhpbiA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gaW5pdE1peGluKHRoaXMsIGFy
        Z3VtZW50cyk7IH07CgpNaXhpbiA9IEVtYmVyLk1peGluOwoKTWl4aW4ucHJv
        dG90eXBlID0gewogIHByb3BlcnRpZXM6IG51bGwsCiAgbWl4aW5zOiBudWxs
        LAogIG93bmVyQ29uc3RydWN0b3I6IG51bGwKfTsKCk1peGluLl9hcHBseSA9
        IGFwcGx5TWl4aW47CgpNaXhpbi5hcHBseVBhcnRpYWwgPSBmdW5jdGlvbihv
        YmopIHsKICB2YXIgYXJncyA9IGFfc2xpY2UuY2FsbChhcmd1bWVudHMsIDEp
        OwogIHJldHVybiBhcHBseU1peGluKG9iaiwgYXJncywgdHJ1ZSk7Cn07CgpN
        aXhpbi5maW5pc2hQYXJ0aWFsID0gZmluaXNoUGFydGlhbDsKCkVtYmVyLmFu
        eVVucHJvY2Vzc2VkTWl4aW5zID0gZmFsc2U7CgovKioKICBAbWV0aG9kIGNy
        ZWF0ZQogIEBzdGF0aWMKICBAcGFyYW0gYXJndW1lbnRzKgoqLwpNaXhpbi5j
        cmVhdGUgPSBmdW5jdGlvbigpIHsKICBFbWJlci5hbnlVbnByb2Nlc3NlZE1p
        eGlucyA9IHRydWU7CiAgdmFyIE0gPSB0aGlzOwogIHJldHVybiBpbml0TWl4
        aW4obmV3IE0oKSwgYXJndW1lbnRzKTsKfTsKCnZhciBNaXhpblByb3RvdHlw
        ZSA9IE1peGluLnByb3RvdHlwZTsKCi8qKgogIEBtZXRob2QgcmVvcGVuCiAg
        QHBhcmFtIGFyZ3VtZW50cyoKKi8KTWl4aW5Qcm90b3R5cGUucmVvcGVuID0g
        ZnVuY3Rpb24oKSB7CiAgdmFyIG1peGluLCB0bXA7CgogIGlmICh0aGlzLnBy
        b3BlcnRpZXMpIHsKICAgIG1peGluID0gTWl4aW4uY3JlYXRlKCk7CiAgICBt
        aXhpbi5wcm9wZXJ0aWVzID0gdGhpcy5wcm9wZXJ0aWVzOwogICAgZGVsZXRl
        IHRoaXMucHJvcGVydGllczsKICAgIHRoaXMubWl4aW5zID0gW21peGluXTsK
        ICB9IGVsc2UgaWYgKCF0aGlzLm1peGlucykgewogICAgdGhpcy5taXhpbnMg
        PSBbXTsKICB9CgogIHZhciBsZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBtaXhp
        bnMgPSB0aGlzLm1peGlucywgaWR4OwoKICBmb3IoaWR4PTA7IGlkeCA8IGxl
        bjsgaWR4KyspIHsKICAgIG1peGluID0gYXJndW1lbnRzW2lkeF07CiAgICBF
        bWJlci5hc3NlcnQoJ0V4cGVjdGVkIGhhc2ggb3IgTWl4aW4gaW5zdGFuY2Us
        IGdvdCAnICsgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG1peGlu
        KSwgdHlwZW9mIG1peGluID09PSAnb2JqZWN0JyAmJiBtaXhpbiAhPT0gbnVs
        bCAmJiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobWl4aW4pICE9
        PSAnW29iamVjdCBBcnJheV0nKTsKCiAgICBpZiAobWl4aW4gaW5zdGFuY2Vv
        ZiBNaXhpbikgewogICAgICBtaXhpbnMucHVzaChtaXhpbik7CiAgICB9IGVs
        c2UgewogICAgICB0bXAgPSBNaXhpbi5jcmVhdGUoKTsKICAgICAgdG1wLnBy
        b3BlcnRpZXMgPSBtaXhpbjsKICAgICAgbWl4aW5zLnB1c2godG1wKTsKICAg
        IH0KICB9CgogIHJldHVybiB0aGlzOwp9OwoKLyoqCiAgQG1ldGhvZCBhcHBs
        eQogIEBwYXJhbSBvYmoKICBAcmV0dXJuIGFwcGxpZWQgb2JqZWN0CiovCk1p
        eGluUHJvdG90eXBlLmFwcGx5ID0gZnVuY3Rpb24ob2JqKSB7CiAgcmV0dXJu
        IGFwcGx5TWl4aW4ob2JqLCBbdGhpc10sIGZhbHNlKTsKfTsKCk1peGluUHJv
        dG90eXBlLmFwcGx5UGFydGlhbCA9IGZ1bmN0aW9uKG9iaikgewogIHJldHVy
        biBhcHBseU1peGluKG9iaiwgW3RoaXNdLCB0cnVlKTsKfTsKCmZ1bmN0aW9u
        IF9kZXRlY3QoY3VyTWl4aW4sIHRhcmdldE1peGluLCBzZWVuKSB7CiAgdmFy
        IGd1aWQgPSBndWlkRm9yKGN1ck1peGluKTsKCiAgaWYgKHNlZW5bZ3VpZF0p
        IHsgcmV0dXJuIGZhbHNlOyB9CiAgc2VlbltndWlkXSA9IHRydWU7CgogIGlm
        IChjdXJNaXhpbiA9PT0gdGFyZ2V0TWl4aW4pIHsgcmV0dXJuIHRydWU7IH0K
        ICB2YXIgbWl4aW5zID0gY3VyTWl4aW4ubWl4aW5zLCBsb2MgPSBtaXhpbnMg
        PyBtaXhpbnMubGVuZ3RoIDogMDsKICB3aGlsZSAoLS1sb2MgPj0gMCkgewog
        ICAgaWYgKF9kZXRlY3QobWl4aW5zW2xvY10sIHRhcmdldE1peGluLCBzZWVu
        KSkgeyByZXR1cm4gdHJ1ZTsgfQogIH0KICByZXR1cm4gZmFsc2U7Cn0KCi8q
        KgogIEBtZXRob2QgZGV0ZWN0CiAgQHBhcmFtIG9iagogIEByZXR1cm4ge0Jv
        b2xlYW59CiovCk1peGluUHJvdG90eXBlLmRldGVjdCA9IGZ1bmN0aW9uKG9i
        aikgewogIGlmICghb2JqKSB7IHJldHVybiBmYWxzZTsgfQogIGlmIChvYmog
        aW5zdGFuY2VvZiBNaXhpbikgeyByZXR1cm4gX2RldGVjdChvYmosIHRoaXMs
        IHt9KTsgfQogIHZhciBtaXhpbnMgPSBFbWJlci5tZXRhKG9iaiwgZmFsc2Up
        Lm1peGluczsKICBpZiAobWl4aW5zKSB7CiAgICByZXR1cm4gISFtaXhpbnNb
        Z3VpZEZvcih0aGlzKV07CiAgfQogIHJldHVybiBmYWxzZTsKfTsKCk1peGlu
        UHJvdG90eXBlLndpdGhvdXQgPSBmdW5jdGlvbigpIHsKICB2YXIgcmV0ID0g
        bmV3IE1peGluKHRoaXMpOwogIHJldC5fd2l0aG91dCA9IGFfc2xpY2UuY2Fs
        bChhcmd1bWVudHMpOwogIHJldHVybiByZXQ7Cn07CgpmdW5jdGlvbiBfa2V5
        cyhyZXQsIG1peGluLCBzZWVuKSB7CiAgaWYgKHNlZW5bZ3VpZEZvcihtaXhp
        bildKSB7IHJldHVybjsgfQogIHNlZW5bZ3VpZEZvcihtaXhpbildID0gdHJ1
        ZTsKCiAgaWYgKG1peGluLnByb3BlcnRpZXMpIHsKICAgIHZhciBwcm9wcyA9
        IG1peGluLnByb3BlcnRpZXM7CiAgICBmb3IgKHZhciBrZXkgaW4gcHJvcHMp
        IHsKICAgICAgaWYgKHByb3BzLmhhc093blByb3BlcnR5KGtleSkpIHsgcmV0
        W2tleV0gPSB0cnVlOyB9CiAgICB9CiAgfSBlbHNlIGlmIChtaXhpbi5taXhp
        bnMpIHsKICAgIGFfZm9yRWFjaC5jYWxsKG1peGluLm1peGlucywgZnVuY3Rp
        b24oeCkgeyBfa2V5cyhyZXQsIHgsIHNlZW4pOyB9KTsKICB9Cn0KCk1peGlu
        UHJvdG90eXBlLmtleXMgPSBmdW5jdGlvbigpIHsKICB2YXIga2V5cyA9IHt9
        LCBzZWVuID0ge30sIHJldCA9IFtdOwogIF9rZXlzKGtleXMsIHRoaXMsIHNl
        ZW4pOwogIGZvcih2YXIga2V5IGluIGtleXMpIHsKICAgIGlmIChrZXlzLmhh
        c093blByb3BlcnR5KGtleSkpIHsgcmV0LnB1c2goa2V5KTsgfQogIH0KICBy
        ZXR1cm4gcmV0Owp9OwoKLy8gcmV0dXJucyB0aGUgbWl4aW5zIGN1cnJlbnRs
        eSBhcHBsaWVkIHRvIHRoZSBzcGVjaWZpZWQgb2JqZWN0Ci8vIFRPRE86IE1h
        a2UgRW1iZXIubWl4aW4KTWl4aW4ubWl4aW5zID0gZnVuY3Rpb24ob2JqKSB7
        CiAgdmFyIG1peGlucyA9IEVtYmVyLm1ldGEob2JqLCBmYWxzZSkubWl4aW5z
        LCByZXQgPSBbXTsKCiAgaWYgKCFtaXhpbnMpIHsgcmV0dXJuIHJldDsgfQoK
        ICBmb3IgKHZhciBrZXkgaW4gbWl4aW5zKSB7CiAgICB2YXIgbWl4aW4gPSBt
        aXhpbnNba2V5XTsKCiAgICAvLyBza2lwIHByaW1pdGl2ZSBtaXhpbnMgc2lu
        Y2UgdGhlc2UgYXJlIGFsd2F5cyBhbm9ueW1vdXMKICAgIGlmICghbWl4aW4u
        cHJvcGVydGllcykgeyByZXQucHVzaChtaXhpbik7IH0KICB9CgogIHJldHVy
        biByZXQ7Cn07CgpSRVFVSVJFRCA9IG5ldyBFbWJlci5EZXNjcmlwdG9yKCk7
        ClJFUVVJUkVELnRvU3RyaW5nID0gZnVuY3Rpb24oKSB7IHJldHVybiAnKFJl
        cXVpcmVkIFByb3BlcnR5KSc7IH07CgovKioKICBEZW5vdGVzIGEgcmVxdWly
        ZWQgcHJvcGVydHkgZm9yIGEgbWl4aW4KCiAgQG1ldGhvZCByZXF1aXJlZAog
        IEBmb3IgRW1iZXIKKi8KRW1iZXIucmVxdWlyZWQgPSBmdW5jdGlvbigpIHsK
        ICByZXR1cm4gUkVRVUlSRUQ7Cn07CgpBbGlhcyA9IGZ1bmN0aW9uKG1ldGhv
        ZE5hbWUpIHsKICB0aGlzLm1ldGhvZE5hbWUgPSBtZXRob2ROYW1lOwp9OwpB
        bGlhcy5wcm90b3R5cGUgPSBuZXcgRW1iZXIuRGVzY3JpcHRvcigpOwoKLyoq
        CiAgTWFrZXMgYSBwcm9wZXJ0eSBvciBtZXRob2QgYXZhaWxhYmxlIHZpYSBh
        biBhZGRpdGlvbmFsIG5hbWUuCgogIGBgYGphdmFzY3JpcHQKICBBcHAuUGFp
        bnRTYW1wbGUgPSBFbWJlci5PYmplY3QuZXh0ZW5kKHsKICAgIGNvbG9yOiAn
        cmVkJywKICAgIGNvbG91cjogRW1iZXIuYWxpYXMoJ2NvbG9yJyksCiAgICBu
        YW1lOiBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuICJaZWQiOwogICAgfSwK
        ICAgIG1vbmlrZXI6IEVtYmVyLmFsaWFzKCJuYW1lIikKICB9KTsKCiAgdmFy
        IHBhaW50U2FtcGxlID0gQXBwLlBhaW50U2FtcGxlLmNyZWF0ZSgpCiAgcGFp
        bnRTYW1wbGUuZ2V0KCdjb2xvdXInKTsgIC8vICdyZWQnCiAgcGFpbnRTYW1w
        bGUubW9uaWtlcigpOyAgICAgIC8vICdaZWQnCiAgYGBgCgogIEBtZXRob2Qg
        YWxpYXMKICBAZm9yIEVtYmVyCiAgQHBhcmFtIHtTdHJpbmd9IG1ldGhvZE5h
        bWUgbmFtZSBvZiB0aGUgbWV0aG9kIG9yIHByb3BlcnR5IHRvIGFsaWFzCiAg
        QHJldHVybiB7RW1iZXIuRGVzY3JpcHRvcn0KICBAZGVwcmVjYXRlZCBVc2Ug
        YEVtYmVyLmFsaWFzTWV0aG9kYCBvciBgRW1iZXIuY29tcHV0ZWQuYWxpYXNg
        IGluc3RlYWQKKi8KRW1iZXIuYWxpYXMgPSBmdW5jdGlvbihtZXRob2ROYW1l
        KSB7CiAgRW1iZXIuZGVwcmVjYXRlKCJFbWJlci5hbGlhcyBpcyBkZXByZWNh
        dGVkLiBQbGVhc2UgdXNlIEVtYmVyLmFsaWFzTWV0aG9kIG9yIEVtYmVyLmNv
        bXB1dGVkLmFsaWFzIGluc3RlYWQuIik7CiAgcmV0dXJuIG5ldyBBbGlhcyht
        ZXRob2ROYW1lKTsKfTsKCi8qKgogIE1ha2VzIGEgbWV0aG9kIGF2YWlsYWJs
        ZSB2aWEgYW4gYWRkaXRpb25hbCBuYW1lLgoKICBgYGBqYXZhc2NyaXB0CiAg
        QXBwLlBlcnNvbiA9IEVtYmVyLk9iamVjdC5leHRlbmQoewogICAgbmFtZTog
        ZnVuY3Rpb24oKSB7CiAgICAgIHJldHVybiAnVG9taHVkYSBLYXR6ZGFsZSc7
        CiAgICB9LAogICAgbW9uaWtlcjogRW1iZXIuYWxpYXNNZXRob2QoJ25hbWUn
        KQogIH0pOwoKICB2YXIgZ29vZEd1eSA9IEFwcC5QZXJzb24uY3JlYXRlKCkK
        ICBgYGAKCiAgQG1ldGhvZCBhbGlhc01ldGhvZAogIEBmb3IgRW1iZXIKICBA
        cGFyYW0ge1N0cmluZ30gbWV0aG9kTmFtZSBuYW1lIG9mIHRoZSBtZXRob2Qg
        dG8gYWxpYXMKICBAcmV0dXJuIHtFbWJlci5EZXNjcmlwdG9yfQoqLwpFbWJl
        ci5hbGlhc01ldGhvZCA9IGZ1bmN0aW9uKG1ldGhvZE5hbWUpIHsKICByZXR1
        cm4gbmV3IEFsaWFzKG1ldGhvZE5hbWUpOwp9OwoKLy8gLi4uLi4uLi4uLi4u
        Li4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4u
        LgovLyBPQlNFUlZFUiBIRUxQRVIKLy8KCi8qKgogIFNwZWNpZnkgYSBtZXRo
        b2QgdGhhdCBvYnNlcnZlcyBwcm9wZXJ0eSBjaGFuZ2VzLgoKICBgYGBqYXZh
        c2NyaXB0CiAgRW1iZXIuT2JqZWN0LmV4dGVuZCh7CiAgICB2YWx1ZU9ic2Vy
        dmVyOiBFbWJlci5vYnNlcnZlcigndmFsdWUnLCBmdW5jdGlvbigpIHsKICAg
        ICAgLy8gRXhlY3V0ZXMgd2hlbmV2ZXIgdGhlICJ2YWx1ZSIgcHJvcGVydHkg
        Y2hhbmdlcwogICAgfSkKICB9KTsKICBgYGAKCiAgSW4gdGhlIGZ1dHVyZSB0
        aGlzIG1ldGhvZCBtYXkgYmVjb21lIGFzeW5jaHJvbm91cy4gSWYgeW91IHdh
        bnQgdG8gZW5zdXJlCiAgc3luY2hyb25vdXMgYmVoYXZpb3IsIHVzZSBgaW1t
        ZWRpYXRlT2JzZXJ2ZXJgLgoKICBBbHNvIGF2YWlsYWJsZSBhcyBgRnVuY3Rp
        b24ucHJvdG90eXBlLm9ic2VydmVzYCBpZiBwcm90b3R5cGUgZXh0ZW5zaW9u
        cyBhcmUKICBlbmFibGVkLgoKICBAbWV0aG9kIG9ic2VydmVyCiAgQGZvciBF
        bWJlcgogIEBwYXJhbSB7U3RyaW5nfSBwcm9wZXJ0eU5hbWVzKgogIEBwYXJh
        bSB7RnVuY3Rpb259IGZ1bmMKICBAcmV0dXJuIGZ1bmMKKi8KRW1iZXIub2Jz
        ZXJ2ZXIgPSBmdW5jdGlvbigpIHsKICB2YXIgZnVuYyAgPSBhX3NsaWNlLmNh
        bGwoYXJndW1lbnRzLCAtMSlbMF07CiAgdmFyIHBhdGhzID0gYV9zbGljZS5j
        YWxsKGFyZ3VtZW50cywgMCwgLTEpOwoKICBpZiAodHlwZW9mIGZ1bmMgIT09
        ICJmdW5jdGlvbiIpIHsKICAgIC8vIHJldmVydCB0byBvbGQsIHNvZnQtZGVw
        cmVjYXRlZCBhcmd1bWVudCBvcmRlcmluZwoKICAgIGZ1bmMgID0gYXJndW1l
        bnRzWzBdOwogICAgcGF0aHMgPSBhX3NsaWNlLmNhbGwoYXJndW1lbnRzLCAx
        KTsKICB9CgogIGlmICh0eXBlb2YgZnVuYyAhPT0gImZ1bmN0aW9uIikgewog
        ICAgdGhyb3cgbmV3IEVtYmVyLkVycm9yKCJFbWJlci5vYnNlcnZlciBjYWxs
        ZWQgd2l0aG91dCBhIGZ1bmN0aW9uIik7CiAgfQoKICBmdW5jLl9fZW1iZXJf
        b2JzZXJ2ZXNfXyA9IHBhdGhzOwogIHJldHVybiBmdW5jOwp9OwoKLyoqCiAg
        U3BlY2lmeSBhIG1ldGhvZCB0aGF0IG9ic2VydmVzIHByb3BlcnR5IGNoYW5n
        ZXMuCgogIGBgYGphdmFzY3JpcHQKICBFbWJlci5PYmplY3QuZXh0ZW5kKHsK
        ICAgIHZhbHVlT2JzZXJ2ZXI6IEVtYmVyLmltbWVkaWF0ZU9ic2VydmVyKCd2
        YWx1ZScsIGZ1bmN0aW9uKCkgewogICAgICAvLyBFeGVjdXRlcyB3aGVuZXZl
        ciB0aGUgInZhbHVlIiBwcm9wZXJ0eSBjaGFuZ2VzCiAgICB9KQogIH0pOwog
        IGBgYAoKICBJbiB0aGUgZnV0dXJlLCBgRW1iZXIub2JzZXJ2ZXJgIG1heSBi
        ZWNvbWUgYXN5bmNocm9ub3VzLiBJbiB0aGlzIGV2ZW50LAogIGBFbWJlci5p
        bW1lZGlhdGVPYnNlcnZlcmAgd2lsbCBtYWludGFpbiB0aGUgc3luY2hyb25v
        dXMgYmVoYXZpb3IuCgogIEFsc28gYXZhaWxhYmxlIGFzIGBGdW5jdGlvbi5w
        cm90b3R5cGUub2JzZXJ2ZXNJbW1lZGlhdGVseWAgaWYgcHJvdG90eXBlIGV4
        dGVuc2lvbnMgYXJlCiAgZW5hYmxlZC4KCiAgQG1ldGhvZCBpbW1lZGlhdGVP
        YnNlcnZlcgogIEBmb3IgRW1iZXIKICBAcGFyYW0ge1N0cmluZ30gcHJvcGVy
        dHlOYW1lcyoKICBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jCiAgQHJldHVybiBm
        dW5jCiovCkVtYmVyLmltbWVkaWF0ZU9ic2VydmVyID0gZnVuY3Rpb24oKSB7
        CiAgZm9yICh2YXIgaT0wLCBsPWFyZ3VtZW50cy5sZW5ndGg7IGk8bDsgaSsr
        KSB7CiAgICB2YXIgYXJnID0gYXJndW1lbnRzW2ldOwogICAgRW1iZXIuYXNz
        ZXJ0KCJJbW1lZGlhdGUgb2JzZXJ2ZXJzIG11c3Qgb2JzZXJ2ZSBpbnRlcm5h
        bCBwcm9wZXJ0aWVzIG9ubHksIG5vdCBwcm9wZXJ0aWVzIG9uIG90aGVyIG9i
        amVjdHMuIiwgdHlwZW9mIGFyZyAhPT0gInN0cmluZyIgfHwgYXJnLmluZGV4
        T2YoJy4nKSA9PT0gLTEpOwogIH0KCiAgcmV0dXJuIEVtYmVyLm9ic2VydmVy
        LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn07CgovKioKICBXaGVuIG9ic2Vy
        dmVycyBmaXJlLCB0aGV5IGFyZSBjYWxsZWQgd2l0aCB0aGUgYXJndW1lbnRz
        IGBvYmpgLCBga2V5TmFtZWAuCgogIE5vdGUsIGBAZWFjaC5wcm9wZXJ0eWAg
        b2JzZXJ2ZXIgaXMgY2FsbGVkIHBlciBlYWNoIGFkZCBvciByZXBsYWNlIG9m
        IGFuIGVsZW1lbnQKICBhbmQgaXQncyBub3QgY2FsbGVkIHdpdGggYSBzcGVj
        aWZpYyBlbnVtZXJhdGlvbiBpdGVtLgoKICBBIGBiZWZvcmVPYnNlcnZlcmAg
        ZmlyZXMgYmVmb3JlIGEgcHJvcGVydHkgY2hhbmdlcy4KCiAgQSBgYmVmb3Jl
        T2JzZXJ2ZXJgIGlzIGFuIGFsdGVybmF0aXZlIGZvcm0gb2YgYC5vYnNlcnZl
        c0JlZm9yZSgpYC4KCiAgYGBgamF2YXNjcmlwdAogIEFwcC5QZXJzb25WaWV3
        ID0gRW1iZXIuVmlldy5leHRlbmQoewoKICAgIGZyaWVuZHM6IFt7IG5hbWU6
        ICdUb20nIH0sIHsgbmFtZTogJ1N0ZWZhbicgfSwgeyBuYW1lOiAnS3Jpcycg
        fV0sCgogICAgdmFsdWVXaWxsQ2hhbmdlOiBFbWJlci5iZWZvcmVPYnNlcnZl
        cignY29udGVudC52YWx1ZScsIGZ1bmN0aW9uKG9iaiwga2V5TmFtZSkgewog
        ICAgICB0aGlzLmNoYW5naW5nRnJvbSA9IG9iai5nZXQoa2V5TmFtZSk7CiAg
        ICB9KSwKCiAgICB2YWx1ZURpZENoYW5nZTogRW1iZXIub2JzZXJ2ZXIoJ2Nv
        bnRlbnQudmFsdWUnLCBmdW5jdGlvbihvYmosIGtleU5hbWUpIHsKICAgICAg
        ICAvLyBvbmx5IHJ1biBpZiB1cGRhdGluZyBhIHZhbHVlIGFscmVhZHkgaW4g
        dGhlIERPTQogICAgICAgIGlmICh0aGlzLmdldCgnc3RhdGUnKSA9PT0gJ2lu
        RE9NJykgewogICAgICAgICAgdmFyIGNvbG9yID0gb2JqLmdldChrZXlOYW1l
        KSA+IHRoaXMuY2hhbmdpbmdGcm9tID8gJ2dyZWVuJyA6ICdyZWQnOwogICAg
        ICAgICAgLy8gbG9naWMKICAgICAgICB9CiAgICB9KSwKCiAgICBmcmllbmRz
        RGlkQ2hhbmdlOiBFbWJlci5vYnNlcnZlcignZnJpZW5kcy5AZWFjaC5uYW1l
        JywgZnVuY3Rpb24ob2JqLCBrZXlOYW1lKSB7CiAgICAgIC8vIHNvbWUgbG9n
        aWMKICAgICAgLy8gb2JqLmdldChrZXlOYW1lKSByZXR1cm5zIGZyaWVuZHMg
        YXJyYXkKICAgIH0pCiAgfSk7CiAgYGBgCgogIEFsc28gYXZhaWxhYmxlIGFz
        IGBGdW5jdGlvbi5wcm90b3R5cGUub2JzZXJ2ZXNCZWZvcmVgIGlmIHByb3Rv
        dHlwZSBleHRlbnNpb25zIGFyZQogIGVuYWJsZWQuCgogIEBtZXRob2QgYmVm
        b3JlT2JzZXJ2ZXIKICBAZm9yIEVtYmVyCiAgQHBhcmFtIHtTdHJpbmd9IHBy
        b3BlcnR5TmFtZXMqCiAgQHBhcmFtIHtGdW5jdGlvbn0gZnVuYwogIEByZXR1
        cm4gZnVuYwoqLwpFbWJlci5iZWZvcmVPYnNlcnZlciA9IGZ1bmN0aW9uKCkg
        ewogIHZhciBmdW5jICA9IGFfc2xpY2UuY2FsbChhcmd1bWVudHMsIC0xKVsw
        XTsKICB2YXIgcGF0aHMgPSBhX3NsaWNlLmNhbGwoYXJndW1lbnRzLCAwLCAt
        MSk7CgogIGlmICh0eXBlb2YgZnVuYyAhPT0gImZ1bmN0aW9uIikgewogICAg
        Ly8gcmV2ZXJ0IHRvIG9sZCwgc29mdC1kZXByZWNhdGVkIGFyZ3VtZW50IG9y
        ZGVyaW5nCgogICAgZnVuYyAgPSBhcmd1bWVudHNbMF07CiAgICBwYXRocyA9
        IGFfc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpOwogIH0KCiAgaWYgKHR5cGVv
        ZiBmdW5jICE9PSAiZnVuY3Rpb24iKSB7CiAgICB0aHJvdyBuZXcgRW1iZXIu
        RXJyb3IoIkVtYmVyLmJlZm9yZU9ic2VydmVyIGNhbGxlZCB3aXRob3V0IGEg
        ZnVuY3Rpb24iKTsKICB9CgogIGZ1bmMuX19lbWJlcl9vYnNlcnZlc0JlZm9y
        ZV9fID0gcGF0aHM7CiAgcmV0dXJuIGZ1bmM7Cn07Cgp9KSgpOwoKCgooZnVu
        Y3Rpb24oKSB7Ci8vIFByb3ZpZGVzIGEgd2F5IHRvIHJlZ2lzdGVyIGxpYnJh
        cnkgdmVyc2lvbnMgd2l0aCBlbWJlci4KdmFyIGZvckVhY2ggPSBFbWJlci5F
        bnVtZXJhYmxlVXRpbHMuZm9yRWFjaCwKICAgIGluZGV4T2YgPSBFbWJlci5F
        bnVtZXJhYmxlVXRpbHMuaW5kZXhPZjsKCkVtYmVyLmxpYnJhcmllcyA9IGZ1
        bmN0aW9uKCkgewogIHZhciBsaWJyYXJpZXMgICAgPSBbXTsKICB2YXIgY29y
        ZUxpYkluZGV4ID0gMDsKCiAgdmFyIGdldExpYnJhcnkgPSBmdW5jdGlvbihu
        YW1lKSB7CiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxpYnJhcmllcy5sZW5n
        dGg7IGkrKykgewogICAgICBpZiAobGlicmFyaWVzW2ldLm5hbWUgPT09IG5h
        bWUpIHsKICAgICAgICByZXR1cm4gbGlicmFyaWVzW2ldOwogICAgICB9CiAg
        ICB9CiAgfTsKCiAgbGlicmFyaWVzLnJlZ2lzdGVyID0gZnVuY3Rpb24obmFt
        ZSwgdmVyc2lvbikgewogICAgaWYgKCFnZXRMaWJyYXJ5KG5hbWUpKSB7CiAg
        ICAgIGxpYnJhcmllcy5wdXNoKHtuYW1lOiBuYW1lLCB2ZXJzaW9uOiB2ZXJz
        aW9ufSk7CiAgICB9CiAgfTsKCiAgbGlicmFyaWVzLnJlZ2lzdGVyQ29yZUxp
        YnJhcnkgPSBmdW5jdGlvbihuYW1lLCB2ZXJzaW9uKSB7CiAgICBpZiAoIWdl
        dExpYnJhcnkobmFtZSkpIHsKICAgICAgbGlicmFyaWVzLnNwbGljZShjb3Jl
        TGliSW5kZXgrKywgMCwge25hbWU6IG5hbWUsIHZlcnNpb246IHZlcnNpb259
        KTsKICAgIH0KICB9OwoKICBsaWJyYXJpZXMuZGVSZWdpc3RlciA9IGZ1bmN0
        aW9uKG5hbWUpIHsKICAgIHZhciBsaWIgPSBnZXRMaWJyYXJ5KG5hbWUpOwog
        ICAgaWYgKGxpYikgbGlicmFyaWVzLnNwbGljZShpbmRleE9mKGxpYnJhcmll
        cywgbGliKSwgMSk7CiAgfTsKCiAgbGlicmFyaWVzLmVhY2ggPSBmdW5jdGlv
        biAoY2FsbGJhY2spIHsKICAgIGZvckVhY2gobGlicmFyaWVzLCBmdW5jdGlv
        bihsaWIpIHsKICAgICAgY2FsbGJhY2sobGliLm5hbWUsIGxpYi52ZXJzaW9u
        KTsKICAgIH0pOwogIH07CgogIHJldHVybiBsaWJyYXJpZXM7Cn0oKTsKCkVt
        YmVyLmxpYnJhcmllcy5yZWdpc3RlckNvcmVMaWJyYXJ5KCdFbWJlcicsIEVt
        YmVyLlZFUlNJT04pOwoKfSkoKTsKCgoKKGZ1bmN0aW9uKCkgewovKioKRW1i
        ZXIgTWV0YWwKCkBtb2R1bGUgZW1iZXIKQHN1Ym1vZHVsZSBlbWJlci1tZXRh
        bAoqLwoKfSkoKTsKCihmdW5jdGlvbigpIHsKZGVmaW5lKCJyc3ZwL2FsbCIs
        CiAgWyJyc3ZwL3Byb21pc2UiLCJleHBvcnRzIl0sCiAgZnVuY3Rpb24oX19k
        ZXBlbmRlbmN5MV9fLCBfX2V4cG9ydHNfXykgewogICAgInVzZSBzdHJpY3Qi
        OwogICAgdmFyIFByb21pc2UgPSBfX2RlcGVuZGVuY3kxX18uUHJvbWlzZTsK
        ICAgIC8qIGdsb2JhbCB0b1N0cmluZyAqLwoKCiAgICBmdW5jdGlvbiBhbGwo
        cHJvbWlzZXMpIHsKICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUudG9TdHJp
        bmcuY2FsbChwcm9taXNlcykgIT09ICJbb2JqZWN0IEFycmF5XSIpIHsKICAg
        ICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdZb3UgbXVzdCBwYXNzIGFuIGFy
        cmF5IHRvIGFsbC4nKTsKICAgICAgfQoKICAgICAgcmV0dXJuIG5ldyBQcm9t
        aXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgIHZhciBy
        ZXN1bHRzID0gW10sIHJlbWFpbmluZyA9IHByb21pc2VzLmxlbmd0aCwKICAg
        ICAgICBwcm9taXNlOwoKICAgICAgICBpZiAocmVtYWluaW5nID09PSAwKSB7
        CiAgICAgICAgICByZXNvbHZlKFtdKTsKICAgICAgICB9CgogICAgICAgIGZ1
        bmN0aW9uIHJlc29sdmVyKGluZGV4KSB7CiAgICAgICAgICByZXR1cm4gZnVu
        Y3Rpb24odmFsdWUpIHsKICAgICAgICAgICAgcmVzb2x2ZUFsbChpbmRleCwg
        dmFsdWUpOwogICAgICAgICAgfTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0
        aW9uIHJlc29sdmVBbGwoaW5kZXgsIHZhbHVlKSB7CiAgICAgICAgICByZXN1
        bHRzW2luZGV4XSA9IHZhbHVlOwogICAgICAgICAgaWYgKC0tcmVtYWluaW5n
        ID09PSAwKSB7CiAgICAgICAgICAgIHJlc29sdmUocmVzdWx0cyk7CiAgICAg
        ICAgICB9CiAgICAgICAgfQoKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8
        IHByb21pc2VzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICBwcm9taXNlID0g
        cHJvbWlzZXNbaV07CgogICAgICAgICAgaWYgKHByb21pc2UgJiYgdHlwZW9m
        IHByb21pc2UudGhlbiA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgICAgICBw
        cm9taXNlLnRoZW4ocmVzb2x2ZXIoaSksIHJlamVjdCk7CiAgICAgICAgICB9
        IGVsc2UgewogICAgICAgICAgICByZXNvbHZlQWxsKGksIHByb21pc2UpOwog
        ICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSk7CiAgICB9CgoKICAgIF9f
        ZXhwb3J0c19fLmFsbCA9IGFsbDsKICB9KTsKZGVmaW5lKCJyc3ZwL2FzeW5j
        IiwKICBbImV4cG9ydHMiXSwKICBmdW5jdGlvbihfX2V4cG9ydHNfXykgewog
        ICAgInVzZSBzdHJpY3QiOwogICAgdmFyIGJyb3dzZXJHbG9iYWwgPSAodHlw
        ZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpID8gd2luZG93IDoge307CiAg
        ICB2YXIgQnJvd3Nlck11dGF0aW9uT2JzZXJ2ZXIgPSBicm93c2VyR2xvYmFs
        Lk11dGF0aW9uT2JzZXJ2ZXIgfHwgYnJvd3Nlckdsb2JhbC5XZWJLaXRNdXRh
        dGlvbk9ic2VydmVyOwogICAgdmFyIGFzeW5jOwogICAgdmFyIGxvY2FsID0g
        KHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnKSA/IGdsb2JhbCA6IHRo
        aXM7CgogICAgLy8gb2xkIG5vZGUKICAgIGZ1bmN0aW9uIHVzZU5leHRUaWNr
        KCkgewogICAgICByZXR1cm4gZnVuY3Rpb24oY2FsbGJhY2ssIGFyZykgewog
        ICAgICAgIHByb2Nlc3MubmV4dFRpY2soZnVuY3Rpb24oKSB7CiAgICAgICAg
        ICBjYWxsYmFjayhhcmcpOwogICAgICAgIH0pOwogICAgICB9OwogICAgfQoK
        ICAgIC8vIG5vZGUgPj0gMC4xMC54CiAgICBmdW5jdGlvbiB1c2VTZXRJbW1l
        ZGlhdGUoKSB7CiAgICAgIHJldHVybiBmdW5jdGlvbihjYWxsYmFjaywgYXJn
        KSB7CiAgICAgICAgLyogZ2xvYmFsICBzZXRJbW1lZGlhdGUgKi8KICAgICAg
        ICBzZXRJbW1lZGlhdGUoZnVuY3Rpb24oKXsKICAgICAgICAgIGNhbGxiYWNr
        KGFyZyk7CiAgICAgICAgfSk7CiAgICAgIH07CiAgICB9CgogICAgZnVuY3Rp
        b24gdXNlTXV0YXRpb25PYnNlcnZlcigpIHsKICAgICAgdmFyIHF1ZXVlID0g
        W107CgogICAgICB2YXIgb2JzZXJ2ZXIgPSBuZXcgQnJvd3Nlck11dGF0aW9u
        T2JzZXJ2ZXIoZnVuY3Rpb24oKSB7CiAgICAgICAgdmFyIHRvUHJvY2VzcyA9
        IHF1ZXVlLnNsaWNlKCk7CiAgICAgICAgcXVldWUgPSBbXTsKCiAgICAgICAg
        dG9Qcm9jZXNzLmZvckVhY2goZnVuY3Rpb24odHVwbGUpIHsKICAgICAgICAg
        IHZhciBjYWxsYmFjayA9IHR1cGxlWzBdLCBhcmc9IHR1cGxlWzFdOwogICAg
        ICAgICAgY2FsbGJhY2soYXJnKTsKICAgICAgICB9KTsKICAgICAgfSk7Cgog
        ICAgICB2YXIgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2Rp
        dicpOwogICAgICBvYnNlcnZlci5vYnNlcnZlKGVsZW1lbnQsIHsgYXR0cmli
        dXRlczogdHJ1ZSB9KTsKCiAgICAgIC8vIENocm9tZSBNZW1vcnkgTGVhazog
        aHR0cHM6Ly9idWdzLndlYmtpdC5vcmcvc2hvd19idWcuY2dpP2lkPTkzNjYx
        CiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCd1bmxvYWQnLCBmdW5j
        dGlvbigpewogICAgICAgIG9ic2VydmVyLmRpc2Nvbm5lY3QoKTsKICAgICAg
        ICBvYnNlcnZlciA9IG51bGw7CiAgICAgIH0sIGZhbHNlKTsKCiAgICAgIHJl
        dHVybiBmdW5jdGlvbihjYWxsYmFjaywgYXJnKSB7CiAgICAgICAgcXVldWUu
        cHVzaChbY2FsbGJhY2ssIGFyZ10pOwogICAgICAgIGVsZW1lbnQuc2V0QXR0
        cmlidXRlKCdkcmFpblF1ZXVlJywgJ2RyYWluUXVldWUnKTsKICAgICAgfTsK
        ICAgIH0KCiAgICBmdW5jdGlvbiB1c2VTZXRUaW1lb3V0KCkgewogICAgICBy
        ZXR1cm4gZnVuY3Rpb24oY2FsbGJhY2ssIGFyZykgewogICAgICAgIGxvY2Fs
        LnNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgICBjYWxsYmFjayhh
        cmcpOwogICAgICAgIH0sIDEpOwogICAgICB9OwogICAgfQoKICAgIGlmICh0
        eXBlb2Ygc2V0SW1tZWRpYXRlID09PSAnZnVuY3Rpb24nKSB7CiAgICAgIGFz
        eW5jID0gdXNlU2V0SW1tZWRpYXRlKCk7CiAgICB9IGVsc2UgaWYgKHR5cGVv
        ZiBwcm9jZXNzICE9PSAndW5kZWZpbmVkJyAmJiB7fS50b1N0cmluZy5jYWxs
        KHByb2Nlc3MpID09PSAnW29iamVjdCBwcm9jZXNzXScpIHsKICAgICAgYXN5
        bmMgPSB1c2VOZXh0VGljaygpOwogICAgfSBlbHNlIGlmIChCcm93c2VyTXV0
        YXRpb25PYnNlcnZlcikgewogICAgICBhc3luYyA9IHVzZU11dGF0aW9uT2Jz
        ZXJ2ZXIoKTsKICAgIH0gZWxzZSB7CiAgICAgIGFzeW5jID0gdXNlU2V0VGlt
        ZW91dCgpOwogICAgfQoKCiAgICBfX2V4cG9ydHNfXy5hc3luYyA9IGFzeW5j
        OwogIH0pOwpkZWZpbmUoInJzdnAvY29uZmlnIiwKICBbInJzdnAvYXN5bmMi
        LCJleHBvcnRzIl0sCiAgZnVuY3Rpb24oX19kZXBlbmRlbmN5MV9fLCBfX2V4
        cG9ydHNfXykgewogICAgInVzZSBzdHJpY3QiOwogICAgdmFyIGFzeW5jID0g
        X19kZXBlbmRlbmN5MV9fLmFzeW5jOwoKICAgIHZhciBjb25maWcgPSB7fTsK
        ICAgIGNvbmZpZy5hc3luYyA9IGFzeW5jOwoKCiAgICBfX2V4cG9ydHNfXy5j
        b25maWcgPSBjb25maWc7CiAgfSk7CmRlZmluZSgicnN2cC9kZWZlciIsCiAg
        WyJyc3ZwL3Byb21pc2UiLCJleHBvcnRzIl0sCiAgZnVuY3Rpb24oX19kZXBl
        bmRlbmN5MV9fLCBfX2V4cG9ydHNfXykgewogICAgInVzZSBzdHJpY3QiOwog
        ICAgdmFyIFByb21pc2UgPSBfX2RlcGVuZGVuY3kxX18uUHJvbWlzZTsKCiAg
        ICBmdW5jdGlvbiBkZWZlcigpIHsKICAgICAgdmFyIGRlZmVycmVkID0gewog
        ICAgICAgIC8vIHByZS1hbGxvY2F0ZSBzaGFwZQogICAgICAgIHJlc29sdmU6
        IHVuZGVmaW5lZCwKICAgICAgICByZWplY3Q6ICB1bmRlZmluZWQsCiAgICAg
        ICAgcHJvbWlzZTogdW5kZWZpbmVkCiAgICAgIH07CgogICAgICBkZWZlcnJl
        ZC5wcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVq
        ZWN0KSB7CiAgICAgICAgZGVmZXJyZWQucmVzb2x2ZSA9IHJlc29sdmU7CiAg
        ICAgICAgZGVmZXJyZWQucmVqZWN0ID0gcmVqZWN0OwogICAgICB9KTsKCiAg
        ICAgIHJldHVybiBkZWZlcnJlZDsKICAgIH0KCgogICAgX19leHBvcnRzX18u
        ZGVmZXIgPSBkZWZlcjsKICB9KTsKZGVmaW5lKCJyc3ZwL2V2ZW50cyIsCiAg
        WyJleHBvcnRzIl0sCiAgZnVuY3Rpb24oX19leHBvcnRzX18pIHsKICAgICJ1
        c2Ugc3RyaWN0IjsKICAgIHZhciBFdmVudCA9IGZ1bmN0aW9uKHR5cGUsIG9w
        dGlvbnMpIHsKICAgICAgdGhpcy50eXBlID0gdHlwZTsKCiAgICAgIGZvciAo
        dmFyIG9wdGlvbiBpbiBvcHRpb25zKSB7CiAgICAgICAgaWYgKCFvcHRpb25z
        Lmhhc093blByb3BlcnR5KG9wdGlvbikpIHsgY29udGludWU7IH0KCiAgICAg
        ICAgdGhpc1tvcHRpb25dID0gb3B0aW9uc1tvcHRpb25dOwogICAgICB9CiAg
        ICB9OwoKICAgIHZhciBpbmRleE9mID0gZnVuY3Rpb24oY2FsbGJhY2tzLCBj
        YWxsYmFjaykgewogICAgICBmb3IgKHZhciBpPTAsIGw9Y2FsbGJhY2tzLmxl
        bmd0aDsgaTxsOyBpKyspIHsKICAgICAgICBpZiAoY2FsbGJhY2tzW2ldWzBd
        ID09PSBjYWxsYmFjaykgeyByZXR1cm4gaTsgfQogICAgICB9CgogICAgICBy
        ZXR1cm4gLTE7CiAgICB9OwoKICAgIHZhciBjYWxsYmFja3NGb3IgPSBmdW5j
        dGlvbihvYmplY3QpIHsKICAgICAgdmFyIGNhbGxiYWNrcyA9IG9iamVjdC5f
        cHJvbWlzZUNhbGxiYWNrczsKCiAgICAgIGlmICghY2FsbGJhY2tzKSB7CiAg
        ICAgICAgY2FsbGJhY2tzID0gb2JqZWN0Ll9wcm9taXNlQ2FsbGJhY2tzID0g
        e307CiAgICAgIH0KCiAgICAgIHJldHVybiBjYWxsYmFja3M7CiAgICB9OwoK
        ICAgIHZhciBFdmVudFRhcmdldCA9IHsKICAgICAgbWl4aW46IGZ1bmN0aW9u
        KG9iamVjdCkgewogICAgICAgIG9iamVjdC5vbiA9IHRoaXMub247CiAgICAg
        ICAgb2JqZWN0Lm9mZiA9IHRoaXMub2ZmOwogICAgICAgIG9iamVjdC50cmln
        Z2VyID0gdGhpcy50cmlnZ2VyOwogICAgICAgIHJldHVybiBvYmplY3Q7CiAg
        ICAgIH0sCgogICAgICBvbjogZnVuY3Rpb24oZXZlbnROYW1lcywgY2FsbGJh
        Y2ssIGJpbmRpbmcpIHsKICAgICAgICB2YXIgYWxsQ2FsbGJhY2tzID0gY2Fs
        bGJhY2tzRm9yKHRoaXMpLCBjYWxsYmFja3MsIGV2ZW50TmFtZTsKICAgICAg
        ICBldmVudE5hbWVzID0gZXZlbnROYW1lcy5zcGxpdCgvXHMrLyk7CiAgICAg
        ICAgYmluZGluZyA9IGJpbmRpbmcgfHwgdGhpczsKCiAgICAgICAgd2hpbGUg
        KGV2ZW50TmFtZSA9IGV2ZW50TmFtZXMuc2hpZnQoKSkgewogICAgICAgICAg
        Y2FsbGJhY2tzID0gYWxsQ2FsbGJhY2tzW2V2ZW50TmFtZV07CgogICAgICAg
        ICAgaWYgKCFjYWxsYmFja3MpIHsKICAgICAgICAgICAgY2FsbGJhY2tzID0g
        YWxsQ2FsbGJhY2tzW2V2ZW50TmFtZV0gPSBbXTsKICAgICAgICAgIH0KCiAg
        ICAgICAgICBpZiAoaW5kZXhPZihjYWxsYmFja3MsIGNhbGxiYWNrKSA9PT0g
        LTEpIHsKICAgICAgICAgICAgY2FsbGJhY2tzLnB1c2goW2NhbGxiYWNrLCBi
        aW5kaW5nXSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LAoKICAg
        ICAgb2ZmOiBmdW5jdGlvbihldmVudE5hbWVzLCBjYWxsYmFjaykgewogICAg
        ICAgIHZhciBhbGxDYWxsYmFja3MgPSBjYWxsYmFja3NGb3IodGhpcyksIGNh
        bGxiYWNrcywgZXZlbnROYW1lLCBpbmRleDsKICAgICAgICBldmVudE5hbWVz
        ID0gZXZlbnROYW1lcy5zcGxpdCgvXHMrLyk7CgogICAgICAgIHdoaWxlIChl
        dmVudE5hbWUgPSBldmVudE5hbWVzLnNoaWZ0KCkpIHsKICAgICAgICAgIGlm
        ICghY2FsbGJhY2spIHsKICAgICAgICAgICAgYWxsQ2FsbGJhY2tzW2V2ZW50
        TmFtZV0gPSBbXTsKICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICB9
        CgogICAgICAgICAgY2FsbGJhY2tzID0gYWxsQ2FsbGJhY2tzW2V2ZW50TmFt
        ZV07CgogICAgICAgICAgaW5kZXggPSBpbmRleE9mKGNhbGxiYWNrcywgY2Fs
        bGJhY2spOwoKICAgICAgICAgIGlmIChpbmRleCAhPT0gLTEpIHsgY2FsbGJh
        Y2tzLnNwbGljZShpbmRleCwgMSk7IH0KICAgICAgICB9CiAgICAgIH0sCgog
        ICAgICB0cmlnZ2VyOiBmdW5jdGlvbihldmVudE5hbWUsIG9wdGlvbnMpIHsK
        ICAgICAgICB2YXIgYWxsQ2FsbGJhY2tzID0gY2FsbGJhY2tzRm9yKHRoaXMp
        LAogICAgICAgICAgICBjYWxsYmFja3MsIGNhbGxiYWNrVHVwbGUsIGNhbGxi
        YWNrLCBiaW5kaW5nLCBldmVudDsKCiAgICAgICAgaWYgKGNhbGxiYWNrcyA9
        IGFsbENhbGxiYWNrc1tldmVudE5hbWVdKSB7CiAgICAgICAgICAvLyBEb24n
        dCBjYWNoZSB0aGUgY2FsbGJhY2tzLmxlbmd0aCBzaW5jZSBpdCBtYXkgZ3Jv
        dwogICAgICAgICAgZm9yICh2YXIgaT0wOyBpPGNhbGxiYWNrcy5sZW5ndGg7
        IGkrKykgewogICAgICAgICAgICBjYWxsYmFja1R1cGxlID0gY2FsbGJhY2tz
        W2ldOwogICAgICAgICAgICBjYWxsYmFjayA9IGNhbGxiYWNrVHVwbGVbMF07
        CiAgICAgICAgICAgIGJpbmRpbmcgPSBjYWxsYmFja1R1cGxlWzFdOwoKICAg
        ICAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zICE9PSAnb2JqZWN0Jykgewog
        ICAgICAgICAgICAgIG9wdGlvbnMgPSB7IGRldGFpbDogb3B0aW9ucyB9Owog
        ICAgICAgICAgICB9CgogICAgICAgICAgICBldmVudCA9IG5ldyBFdmVudChl
        dmVudE5hbWUsIG9wdGlvbnMpOwogICAgICAgICAgICBjYWxsYmFjay5jYWxs
        KGJpbmRpbmcsIGV2ZW50KTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAg
        IH0KICAgIH07CgoKICAgIF9fZXhwb3J0c19fLkV2ZW50VGFyZ2V0ID0gRXZl
        bnRUYXJnZXQ7CiAgfSk7CmRlZmluZSgicnN2cC9oYXNoIiwKICBbInJzdnAv
        ZGVmZXIiLCJleHBvcnRzIl0sCiAgZnVuY3Rpb24oX19kZXBlbmRlbmN5MV9f
        LCBfX2V4cG9ydHNfXykgewogICAgInVzZSBzdHJpY3QiOwogICAgdmFyIGRl
        ZmVyID0gX19kZXBlbmRlbmN5MV9fLmRlZmVyOwoKICAgIGZ1bmN0aW9uIHNp
        emUob2JqZWN0KSB7CiAgICAgIHZhciBzID0gMDsKCiAgICAgIGZvciAodmFy
        IHByb3AgaW4gb2JqZWN0KSB7CiAgICAgICAgcysrOwogICAgICB9CgogICAg
        ICByZXR1cm4gczsKICAgIH0KCiAgICBmdW5jdGlvbiBoYXNoKHByb21pc2Vz
        KSB7CiAgICAgIHZhciByZXN1bHRzID0ge30sIGRlZmVycmVkID0gZGVmZXIo
        KSwgcmVtYWluaW5nID0gc2l6ZShwcm9taXNlcyk7CgogICAgICBpZiAocmVt
        YWluaW5nID09PSAwKSB7CiAgICAgICAgZGVmZXJyZWQucmVzb2x2ZSh7fSk7
        CiAgICAgIH0KCiAgICAgIHZhciByZXNvbHZlciA9IGZ1bmN0aW9uKHByb3Ap
        IHsKICAgICAgICByZXR1cm4gZnVuY3Rpb24odmFsdWUpIHsKICAgICAgICAg
        IHJlc29sdmVBbGwocHJvcCwgdmFsdWUpOwogICAgICAgIH07CiAgICAgIH07
        CgogICAgICB2YXIgcmVzb2x2ZUFsbCA9IGZ1bmN0aW9uKHByb3AsIHZhbHVl
        KSB7CiAgICAgICAgcmVzdWx0c1twcm9wXSA9IHZhbHVlOwogICAgICAgIGlm
        ICgtLXJlbWFpbmluZyA9PT0gMCkgewogICAgICAgICAgZGVmZXJyZWQucmVz
        b2x2ZShyZXN1bHRzKTsKICAgICAgICB9CiAgICAgIH07CgogICAgICB2YXIg
        cmVqZWN0QWxsID0gZnVuY3Rpb24oZXJyb3IpIHsKICAgICAgICBkZWZlcnJl
        ZC5yZWplY3QoZXJyb3IpOwogICAgICB9OwoKICAgICAgZm9yICh2YXIgcHJv
        cCBpbiBwcm9taXNlcykgewogICAgICAgIGlmIChwcm9taXNlc1twcm9wXSAm
        JiB0eXBlb2YgcHJvbWlzZXNbcHJvcF0udGhlbiA9PT0gJ2Z1bmN0aW9uJykg
        ewogICAgICAgICAgcHJvbWlzZXNbcHJvcF0udGhlbihyZXNvbHZlcihwcm9w
        KSwgcmVqZWN0QWxsKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmVz
        b2x2ZUFsbChwcm9wLCBwcm9taXNlc1twcm9wXSk7CiAgICAgICAgfQogICAg
        ICB9CgogICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTsKICAgIH0KCgog
        ICAgX19leHBvcnRzX18uaGFzaCA9IGhhc2g7CiAgfSk7CmRlZmluZSgicnN2
        cC9ub2RlIiwKICBbInJzdnAvcHJvbWlzZSIsInJzdnAvYWxsIiwiZXhwb3J0
        cyJdLAogIGZ1bmN0aW9uKF9fZGVwZW5kZW5jeTFfXywgX19kZXBlbmRlbmN5
        Ml9fLCBfX2V4cG9ydHNfXykgewogICAgInVzZSBzdHJpY3QiOwogICAgdmFy
        IFByb21pc2UgPSBfX2RlcGVuZGVuY3kxX18uUHJvbWlzZTsKICAgIHZhciBh
        bGwgPSBfX2RlcGVuZGVuY3kyX18uYWxsOwoKICAgIGZ1bmN0aW9uIG1ha2VO
        b2RlQ2FsbGJhY2tGb3IocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgIHJldHVy
        biBmdW5jdGlvbiAoZXJyb3IsIHZhbHVlKSB7CiAgICAgICAgaWYgKGVycm9y
        KSB7CiAgICAgICAgICByZWplY3QoZXJyb3IpOwogICAgICAgIH0gZWxzZSBp
        ZiAoYXJndW1lbnRzLmxlbmd0aCA+IDIpIHsKICAgICAgICAgIHJlc29sdmUo
        QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKSk7CiAg
        ICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJlc29sdmUodmFsdWUpOwogICAg
        ICAgIH0KICAgICAgfTsKICAgIH0KCiAgICBmdW5jdGlvbiBkZW5vZGVpZnko
        bm9kZUZ1bmMpIHsKICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkgIHsKICAgICAg
        ICB2YXIgbm9kZUFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChh
        cmd1bWVudHMpLCByZXNvbHZlLCByZWplY3Q7CiAgICAgICAgdmFyIHRoaXNB
        cmcgPSB0aGlzOwoKICAgICAgICB2YXIgcHJvbWlzZSA9IG5ldyBQcm9taXNl
        KGZ1bmN0aW9uKG5vZGVSZXNvbHZlLCBub2RlUmVqZWN0KSB7CiAgICAgICAg
        ICByZXNvbHZlID0gbm9kZVJlc29sdmU7CiAgICAgICAgICByZWplY3QgPSBu
        b2RlUmVqZWN0OwogICAgICAgIH0pOwoKICAgICAgICBhbGwobm9kZUFyZ3Mp
        LnRoZW4oZnVuY3Rpb24obm9kZUFyZ3MpIHsKICAgICAgICAgIG5vZGVBcmdz
        LnB1c2gobWFrZU5vZGVDYWxsYmFja0ZvcihyZXNvbHZlLCByZWplY3QpKTsK
        CiAgICAgICAgICB0cnkgewogICAgICAgICAgICBub2RlRnVuYy5hcHBseSh0
        aGlzQXJnLCBub2RlQXJncyk7CiAgICAgICAgICB9IGNhdGNoKGUpIHsKICAg
        ICAgICAgICAgcmVqZWN0KGUpOwogICAgICAgICAgfQogICAgICAgIH0pOwoK
        ICAgICAgICByZXR1cm4gcHJvbWlzZTsKICAgICAgfTsKICAgIH0KCgogICAg
        X19leHBvcnRzX18uZGVub2RlaWZ5ID0gZGVub2RlaWZ5OwogIH0pOwpkZWZp
        bmUoInJzdnAvcHJvbWlzZSIsCiAgWyJyc3ZwL2NvbmZpZyIsInJzdnAvZXZl
        bnRzIiwiZXhwb3J0cyJdLAogIGZ1bmN0aW9uKF9fZGVwZW5kZW5jeTFfXywg
        X19kZXBlbmRlbmN5Ml9fLCBfX2V4cG9ydHNfXykgewogICAgInVzZSBzdHJp
        Y3QiOwogICAgdmFyIGNvbmZpZyA9IF9fZGVwZW5kZW5jeTFfXy5jb25maWc7
        CiAgICB2YXIgRXZlbnRUYXJnZXQgPSBfX2RlcGVuZGVuY3kyX18uRXZlbnRU
        YXJnZXQ7CgogICAgZnVuY3Rpb24gb2JqZWN0T3JGdW5jdGlvbih4KSB7CiAg
        ICAgIHJldHVybiBpc0Z1bmN0aW9uKHgpIHx8ICh0eXBlb2YgeCA9PT0gIm9i
        amVjdCIgJiYgeCAhPT0gbnVsbCk7CiAgICB9CgogICAgZnVuY3Rpb24gaXNG
        dW5jdGlvbih4KXsKICAgICAgcmV0dXJuIHR5cGVvZiB4ID09PSAiZnVuY3Rp
        b24iOwogICAgfQoKICAgIHZhciBQcm9taXNlID0gZnVuY3Rpb24ocmVzb2x2
        ZXIpIHsKICAgICAgdmFyIHByb21pc2UgPSB0aGlzLAogICAgICByZXNvbHZl
        ZCA9IGZhbHNlOwoKICAgICAgaWYgKHR5cGVvZiByZXNvbHZlciAhPT0gJ2Z1
        bmN0aW9uJykgewogICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1lvdSBt
        dXN0IHBhc3MgYSByZXNvbHZlciBmdW5jdGlvbiBhcyB0aGUgc29sZSBhcmd1
        bWVudCB0byB0aGUgcHJvbWlzZSBjb25zdHJ1Y3RvcicpOwogICAgICB9Cgog
        ICAgICBpZiAoIShwcm9taXNlIGluc3RhbmNlb2YgUHJvbWlzZSkpIHsKICAg
        ICAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZXIpOwogICAgICB9Cgog
        ICAgICB2YXIgcmVzb2x2ZVByb21pc2UgPSBmdW5jdGlvbih2YWx1ZSkgewog
        ICAgICAgIGlmIChyZXNvbHZlZCkgeyByZXR1cm47IH0KICAgICAgICByZXNv
        bHZlZCA9IHRydWU7CiAgICAgICAgcmVzb2x2ZShwcm9taXNlLCB2YWx1ZSk7
        CiAgICAgIH07CgogICAgICB2YXIgcmVqZWN0UHJvbWlzZSA9IGZ1bmN0aW9u
        KHZhbHVlKSB7CiAgICAgICAgaWYgKHJlc29sdmVkKSB7IHJldHVybjsgfQog
        ICAgICAgIHJlc29sdmVkID0gdHJ1ZTsKICAgICAgICByZWplY3QocHJvbWlz
        ZSwgdmFsdWUpOwogICAgICB9OwoKICAgICAgdGhpcy5vbigncHJvbWlzZTpy
        ZXNvbHZlZCcsIGZ1bmN0aW9uKGV2ZW50KSB7CiAgICAgICAgdGhpcy50cmln
        Z2VyKCdzdWNjZXNzJywgeyBkZXRhaWw6IGV2ZW50LmRldGFpbCB9KTsKICAg
        ICAgfSwgdGhpcyk7CgogICAgICB0aGlzLm9uKCdwcm9taXNlOmZhaWxlZCcs
        IGZ1bmN0aW9uKGV2ZW50KSB7CiAgICAgICAgdGhpcy50cmlnZ2VyKCdlcnJv
        cicsIHsgZGV0YWlsOiBldmVudC5kZXRhaWwgfSk7CiAgICAgIH0sIHRoaXMp
        OwoKICAgICAgdGhpcy5vbignZXJyb3InLCBvbmVycm9yKTsKCiAgICAgIHRy
        eSB7CiAgICAgICAgcmVzb2x2ZXIocmVzb2x2ZVByb21pc2UsIHJlamVjdFBy
        b21pc2UpOwogICAgICB9IGNhdGNoKGUpIHsKICAgICAgICByZWplY3RQcm9t
        aXNlKGUpOwogICAgICB9CiAgICB9OwoKICAgIGZ1bmN0aW9uIG9uZXJyb3Io
        ZXZlbnQpIHsKICAgICAgaWYgKGNvbmZpZy5vbmVycm9yKSB7CiAgICAgICAg
        Y29uZmlnLm9uZXJyb3IoZXZlbnQuZGV0YWlsKTsKICAgICAgfQogICAgfQoK
        ICAgIHZhciBpbnZva2VDYWxsYmFjayA9IGZ1bmN0aW9uKHR5cGUsIHByb21p
        c2UsIGNhbGxiYWNrLCBldmVudCkgewogICAgICB2YXIgaGFzQ2FsbGJhY2sg
        PSBpc0Z1bmN0aW9uKGNhbGxiYWNrKSwKICAgICAgICAgIHZhbHVlLCBlcnJv
        ciwgc3VjY2VlZGVkLCBmYWlsZWQ7CgogICAgICBpZiAoaGFzQ2FsbGJhY2sp
        IHsKICAgICAgICB0cnkgewogICAgICAgICAgdmFsdWUgPSBjYWxsYmFjayhl
        dmVudC5kZXRhaWwpOwogICAgICAgICAgc3VjY2VlZGVkID0gdHJ1ZTsKICAg
        ICAgICB9IGNhdGNoKGUpIHsKICAgICAgICAgIGZhaWxlZCA9IHRydWU7CiAg
        ICAgICAgICBlcnJvciA9IGU7CiAgICAgICAgfQogICAgICB9IGVsc2Ugewog
        ICAgICAgIHZhbHVlID0gZXZlbnQuZGV0YWlsOwogICAgICAgIHN1Y2NlZWRl
        ZCA9IHRydWU7CiAgICAgIH0KCiAgICAgIGlmIChoYW5kbGVUaGVuYWJsZShw
        cm9taXNlLCB2YWx1ZSkpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0gZWxz
        ZSBpZiAoaGFzQ2FsbGJhY2sgJiYgc3VjY2VlZGVkKSB7CiAgICAgICAgcmVz
        b2x2ZShwcm9taXNlLCB2YWx1ZSk7CiAgICAgIH0gZWxzZSBpZiAoZmFpbGVk
        KSB7CiAgICAgICAgcmVqZWN0KHByb21pc2UsIGVycm9yKTsKICAgICAgfSBl
        bHNlIGlmICh0eXBlID09PSAncmVzb2x2ZScpIHsKICAgICAgICByZXNvbHZl
        KHByb21pc2UsIHZhbHVlKTsKICAgICAgfSBlbHNlIGlmICh0eXBlID09PSAn
        cmVqZWN0JykgewogICAgICAgIHJlamVjdChwcm9taXNlLCB2YWx1ZSk7CiAg
        ICAgIH0KICAgIH07CgogICAgUHJvbWlzZS5wcm90b3R5cGUgPSB7CiAgICAg
        IGNvbnN0cnVjdG9yOiBQcm9taXNlLAoKICAgICAgaXNSZWplY3RlZDogdW5k
        ZWZpbmVkLAogICAgICBpc0Z1bGZpbGxlZDogdW5kZWZpbmVkLAogICAgICBy
        ZWplY3RlZFJlYXNvbjogdW5kZWZpbmVkLAogICAgICBmdWxmaWxsbWVudFZh
        bHVlOiB1bmRlZmluZWQsCgogICAgICB0aGVuOiBmdW5jdGlvbihkb25lLCBm
        YWlsKSB7CiAgICAgICAgdGhpcy5vZmYoJ2Vycm9yJywgb25lcnJvcik7Cgog
        ICAgICAgIHZhciB0aGVuUHJvbWlzZSA9IG5ldyB0aGlzLmNvbnN0cnVjdG9y
        KGZ1bmN0aW9uKCkge30pOwoKICAgICAgICBpZiAodGhpcy5pc0Z1bGZpbGxl
        ZCkgewogICAgICAgICAgY29uZmlnLmFzeW5jKGZ1bmN0aW9uKHByb21pc2Up
        IHsKICAgICAgICAgICAgaW52b2tlQ2FsbGJhY2soJ3Jlc29sdmUnLCB0aGVu
        UHJvbWlzZSwgZG9uZSwgeyBkZXRhaWw6IHByb21pc2UuZnVsZmlsbG1lbnRW
        YWx1ZSB9KTsKICAgICAgICAgIH0sIHRoaXMpOwogICAgICAgIH0KCiAgICAg
        ICAgaWYgKHRoaXMuaXNSZWplY3RlZCkgewogICAgICAgICAgY29uZmlnLmFz
        eW5jKGZ1bmN0aW9uKHByb21pc2UpIHsKICAgICAgICAgICAgaW52b2tlQ2Fs
        bGJhY2soJ3JlamVjdCcsIHRoZW5Qcm9taXNlLCBmYWlsLCB7IGRldGFpbDog
        cHJvbWlzZS5yZWplY3RlZFJlYXNvbiB9KTsKICAgICAgICAgIH0sIHRoaXMp
        OwogICAgICAgIH0KCiAgICAgICAgdGhpcy5vbigncHJvbWlzZTpyZXNvbHZl
        ZCcsIGZ1bmN0aW9uKGV2ZW50KSB7CiAgICAgICAgICBpbnZva2VDYWxsYmFj
        aygncmVzb2x2ZScsIHRoZW5Qcm9taXNlLCBkb25lLCBldmVudCk7CiAgICAg
        ICAgfSk7CgogICAgICAgIHRoaXMub24oJ3Byb21pc2U6ZmFpbGVkJywgZnVu
        Y3Rpb24oZXZlbnQpIHsKICAgICAgICAgIGludm9rZUNhbGxiYWNrKCdyZWpl
        Y3QnLCB0aGVuUHJvbWlzZSwgZmFpbCwgZXZlbnQpOwogICAgICAgIH0pOwoK
        ICAgICAgICByZXR1cm4gdGhlblByb21pc2U7CiAgICAgIH0sCgogICAgICBm
        YWlsOiBmdW5jdGlvbihmYWlsKSB7CiAgICAgICAgcmV0dXJuIHRoaXMudGhl
        bihudWxsLCBmYWlsKTsKICAgICAgfQogICAgfTsKCiAgICBFdmVudFRhcmdl
        dC5taXhpbihQcm9taXNlLnByb3RvdHlwZSk7CgogICAgZnVuY3Rpb24gcmVz
        b2x2ZShwcm9taXNlLCB2YWx1ZSkgewogICAgICBpZiAocHJvbWlzZSA9PT0g
        dmFsdWUpIHsKICAgICAgICBmdWxmaWxsKHByb21pc2UsIHZhbHVlKTsKICAg
        ICAgfSBlbHNlIGlmICghaGFuZGxlVGhlbmFibGUocHJvbWlzZSwgdmFsdWUp
        KSB7CiAgICAgICAgZnVsZmlsbChwcm9taXNlLCB2YWx1ZSk7CiAgICAgIH0K
        ICAgIH0KCiAgICBmdW5jdGlvbiBoYW5kbGVUaGVuYWJsZShwcm9taXNlLCB2
        YWx1ZSkgewogICAgICB2YXIgdGhlbiA9IG51bGwsCiAgICAgIHJlc29sdmVk
        OwoKICAgICAgdHJ5IHsKICAgICAgICBpZiAocHJvbWlzZSA9PT0gdmFsdWUp
        IHsKICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoIkEgcHJvbWlzZXMg
        Y2FsbGJhY2sgY2Fubm90IHJldHVybiB0aGF0IHNhbWUgcHJvbWlzZS4iKTsK
        ICAgICAgICB9CgogICAgICAgIGlmIChvYmplY3RPckZ1bmN0aW9uKHZhbHVl
        KSkgewogICAgICAgICAgdGhlbiA9IHZhbHVlLnRoZW47CgogICAgICAgICAg
        aWYgKGlzRnVuY3Rpb24odGhlbikpIHsKICAgICAgICAgICAgdGhlbi5jYWxs
        KHZhbHVlLCBmdW5jdGlvbih2YWwpIHsKICAgICAgICAgICAgICBpZiAocmVz
        b2x2ZWQpIHsgcmV0dXJuIHRydWU7IH0KICAgICAgICAgICAgICByZXNvbHZl
        ZCA9IHRydWU7CgogICAgICAgICAgICAgIGlmICh2YWx1ZSAhPT0gdmFsKSB7
        CiAgICAgICAgICAgICAgICByZXNvbHZlKHByb21pc2UsIHZhbCk7CiAgICAg
        ICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGZ1bGZpbGwocHJv
        bWlzZSwgdmFsKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sIGZ1
        bmN0aW9uKHZhbCkgewogICAgICAgICAgICAgIGlmIChyZXNvbHZlZCkgeyBy
        ZXR1cm4gdHJ1ZTsgfQogICAgICAgICAgICAgIHJlc29sdmVkID0gdHJ1ZTsK
        CiAgICAgICAgICAgICAgcmVqZWN0KHByb21pc2UsIHZhbCk7CiAgICAgICAg
        ICAgIH0pOwoKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICB9
        CiAgICAgICAgfQogICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIHJl
        amVjdChwcm9taXNlLCBlcnJvcik7CiAgICAgICAgcmV0dXJuIHRydWU7CiAg
        ICAgIH0KCiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KCiAgICBmdW5jdGlv
        biBmdWxmaWxsKHByb21pc2UsIHZhbHVlKSB7CiAgICAgIGNvbmZpZy5hc3lu
        YyhmdW5jdGlvbigpIHsKICAgICAgICBwcm9taXNlLnRyaWdnZXIoJ3Byb21p
        c2U6cmVzb2x2ZWQnLCB7IGRldGFpbDogdmFsdWUgfSk7CiAgICAgICAgcHJv
        bWlzZS5pc0Z1bGZpbGxlZCA9IHRydWU7CiAgICAgICAgcHJvbWlzZS5mdWxm
        aWxsbWVudFZhbHVlID0gdmFsdWU7CiAgICAgIH0pOwogICAgfQoKICAgIGZ1
        bmN0aW9uIHJlamVjdChwcm9taXNlLCB2YWx1ZSkgewogICAgICBjb25maWcu
        YXN5bmMoZnVuY3Rpb24oKSB7CiAgICAgICAgcHJvbWlzZS50cmlnZ2VyKCdw
        cm9taXNlOmZhaWxlZCcsIHsgZGV0YWlsOiB2YWx1ZSB9KTsKICAgICAgICBw
        cm9taXNlLmlzUmVqZWN0ZWQgPSB0cnVlOwogICAgICAgIHByb21pc2UucmVq
        ZWN0ZWRSZWFzb24gPSB2YWx1ZTsKICAgICAgfSk7CiAgICB9CgoKICAgIF9f
        ZXhwb3J0c19fLlByb21pc2UgPSBQcm9taXNlOwogIH0pOwpkZWZpbmUoInJz
        dnAvcmVqZWN0IiwKICBbInJzdnAvcHJvbWlzZSIsImV4cG9ydHMiXSwKICBm
        dW5jdGlvbihfX2RlcGVuZGVuY3kxX18sIF9fZXhwb3J0c19fKSB7CiAgICAi
        dXNlIHN0cmljdCI7CiAgICB2YXIgUHJvbWlzZSA9IF9fZGVwZW5kZW5jeTFf
        Xy5Qcm9taXNlOwoKICAgIGZ1bmN0aW9uIHJlamVjdChyZWFzb24pIHsKICAg
        ICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWpl
        Y3QpIHsKICAgICAgICByZWplY3QocmVhc29uKTsKICAgICAgfSk7CiAgICB9
        CgoKICAgIF9fZXhwb3J0c19fLnJlamVjdCA9IHJlamVjdDsKICB9KTsKZGVm
        aW5lKCJyc3ZwL3Jlc29sdmUiLAogIFsicnN2cC9wcm9taXNlIiwiZXhwb3J0
        cyJdLAogIGZ1bmN0aW9uKF9fZGVwZW5kZW5jeTFfXywgX19leHBvcnRzX18p
        IHsKICAgICJ1c2Ugc3RyaWN0IjsKICAgIHZhciBQcm9taXNlID0gX19kZXBl
        bmRlbmN5MV9fLlByb21pc2U7CgogICAgZnVuY3Rpb24gcmVzb2x2ZSh0aGVu
        YWJsZSkgewogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVz
        b2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgcmVzb2x2ZSh0aGVuYWJsZSk7CiAg
        ICAgIH0pOwogICAgfQoKCiAgICBfX2V4cG9ydHNfXy5yZXNvbHZlID0gcmVz
        b2x2ZTsKICB9KTsKZGVmaW5lKCJyc3ZwL3JldGhyb3ciLAogIFsiZXhwb3J0
        cyJdLAogIGZ1bmN0aW9uKF9fZXhwb3J0c19fKSB7CiAgICAidXNlIHN0cmlj
        dCI7CiAgICB2YXIgbG9jYWwgPSAodHlwZW9mIGdsb2JhbCA9PT0gInVuZGVm
        aW5lZCIpID8gdGhpcyA6IGdsb2JhbDsKCiAgICBmdW5jdGlvbiByZXRocm93
        KHJlYXNvbikgewogICAgICBsb2NhbC5zZXRUaW1lb3V0KGZ1bmN0aW9uKCkg
        ewogICAgICAgIHRocm93IHJlYXNvbjsKICAgICAgfSk7CiAgICAgIHRocm93
        IHJlYXNvbjsKICAgIH0KCgogICAgX19leHBvcnRzX18ucmV0aHJvdyA9IHJl
        dGhyb3c7CiAgfSk7CmRlZmluZSgicnN2cCIsCiAgWyJyc3ZwL2V2ZW50cyIs
        InJzdnAvcHJvbWlzZSIsInJzdnAvbm9kZSIsInJzdnAvYWxsIiwicnN2cC9o
        YXNoIiwicnN2cC9yZXRocm93IiwicnN2cC9kZWZlciIsInJzdnAvY29uZmln
        IiwicnN2cC9yZXNvbHZlIiwicnN2cC9yZWplY3QiLCJleHBvcnRzIl0sCiAg
        ZnVuY3Rpb24oX19kZXBlbmRlbmN5MV9fLCBfX2RlcGVuZGVuY3kyX18sIF9f
        ZGVwZW5kZW5jeTNfXywgX19kZXBlbmRlbmN5NF9fLCBfX2RlcGVuZGVuY3k1
        X18sIF9fZGVwZW5kZW5jeTZfXywgX19kZXBlbmRlbmN5N19fLCBfX2RlcGVu
        ZGVuY3k4X18sIF9fZGVwZW5kZW5jeTlfXywgX19kZXBlbmRlbmN5MTBfXywg
        X19leHBvcnRzX18pIHsKICAgICJ1c2Ugc3RyaWN0IjsKICAgIHZhciBFdmVu
        dFRhcmdldCA9IF9fZGVwZW5kZW5jeTFfXy5FdmVudFRhcmdldDsKICAgIHZh
        ciBQcm9taXNlID0gX19kZXBlbmRlbmN5Ml9fLlByb21pc2U7CiAgICB2YXIg
        ZGVub2RlaWZ5ID0gX19kZXBlbmRlbmN5M19fLmRlbm9kZWlmeTsKICAgIHZh
        ciBhbGwgPSBfX2RlcGVuZGVuY3k0X18uYWxsOwogICAgdmFyIGhhc2ggPSBf
        X2RlcGVuZGVuY3k1X18uaGFzaDsKICAgIHZhciByZXRocm93ID0gX19kZXBl
        bmRlbmN5Nl9fLnJldGhyb3c7CiAgICB2YXIgZGVmZXIgPSBfX2RlcGVuZGVu
        Y3k3X18uZGVmZXI7CiAgICB2YXIgY29uZmlnID0gX19kZXBlbmRlbmN5OF9f
        LmNvbmZpZzsKICAgIHZhciByZXNvbHZlID0gX19kZXBlbmRlbmN5OV9fLnJl
        c29sdmU7CiAgICB2YXIgcmVqZWN0ID0gX19kZXBlbmRlbmN5MTBfXy5yZWpl
        Y3Q7CgogICAgZnVuY3Rpb24gY29uZmlndXJlKG5hbWUsIHZhbHVlKSB7CiAg
        ICAgIGNvbmZpZ1tuYW1lXSA9IHZhbHVlOwogICAgfQoKCiAgICBfX2V4cG9y
        dHNfXy5Qcm9taXNlID0gUHJvbWlzZTsKICAgIF9fZXhwb3J0c19fLkV2ZW50
        VGFyZ2V0ID0gRXZlbnRUYXJnZXQ7CiAgICBfX2V4cG9ydHNfXy5hbGwgPSBh
        bGw7CiAgICBfX2V4cG9ydHNfXy5oYXNoID0gaGFzaDsKICAgIF9fZXhwb3J0
        c19fLnJldGhyb3cgPSByZXRocm93OwogICAgX19leHBvcnRzX18uZGVmZXIg
        PSBkZWZlcjsKICAgIF9fZXhwb3J0c19fLmRlbm9kZWlmeSA9IGRlbm9kZWlm
        eTsKICAgIF9fZXhwb3J0c19fLmNvbmZpZ3VyZSA9IGNvbmZpZ3VyZTsKICAg
        IF9fZXhwb3J0c19fLnJlc29sdmUgPSByZXNvbHZlOwogICAgX19leHBvcnRz
        X18ucmVqZWN0ID0gcmVqZWN0OwogIH0pOwp9KSgpOwoKKGZ1bmN0aW9uKCkg
        ewovKioKQHByaXZhdGUKUHVibGljIGFwaSBmb3IgdGhlIGNvbnRhaW5lciBp
        cyBzdGlsbCBpbiBmbHV4LgpUaGUgcHVibGljIGFwaSwgc3BlY2lmaWVkIG9u
        IHRoZSBhcHBsaWNhdGlvbiBuYW1lc3BhY2Ugc2hvdWxkIGJlIGNvbnNpZGVy
        ZWQgdGhlIHN0YWJsZSBhcGkuCi8vIEBtb2R1bGUgY29udGFpbmVyCiovCgov
        KgogRmxhZyB0byBlbmFibGUvZGlzYWJsZSBtb2RlbCBmYWN0b3J5IGluamVj
        dGlvbnMgKGRpc2FibGVkIGJ5IGRlZmF1bHQpCiBJZiBtb2RlbCBmYWN0b3J5
        IGluamVjdGlvbnMgYXJlIGVuYWJsZWQsIG1vZGVscyBzaG91bGQgbm90IGJl
        CiBhY2Nlc3NlZCBnbG9iYWxseSAob25seSB0aHJvdWdoIGBjb250YWluZXIu
        bG9va3VwRmFjdG9yeSgnbW9kZWw6bW9kZWxOYW1lJykpYCk7CiovCkVtYmVy
        Lk1PREVMX0ZBQ1RPUllfSU5KRUNUSU9OUyA9IGZhbHNlIHx8ICEhRW1iZXIu
        RU5WLk1PREVMX0ZBQ1RPUllfSU5KRUNUSU9OUzsKCmRlZmluZSgiY29udGFp
        bmVyIiwKICBbXSwKICBmdW5jdGlvbigpIHsKCiAgICAvLyBBIHNhZmUgYW5k
        IHNpbXBsZSBpbmhlcml0aW5nIG9iamVjdC4KICAgIGZ1bmN0aW9uIEluaGVy
        aXRpbmdEaWN0KHBhcmVudCkgewogICAgICB0aGlzLnBhcmVudCA9IHBhcmVu
        dDsKICAgICAgdGhpcy5kaWN0ID0ge307CiAgICB9CgogICAgSW5oZXJpdGlu
        Z0RpY3QucHJvdG90eXBlID0gewoKICAgICAgLyoqCiAgICAgICAgQHByb3Bl
        cnR5IHBhcmVudAogICAgICAgIEB0eXBlIEluaGVyaXRpbmdEaWN0CiAgICAg
        ICAgQGRlZmF1bHQgbnVsbAogICAgICAqLwoKICAgICAgcGFyZW50OiBudWxs
        LAoKICAgICAgLyoqCiAgICAgICAgT2JqZWN0IHVzZWQgdG8gc3RvcmUgdGhl
        IGN1cnJlbnQgbm9kZXMgZGF0YS4KCiAgICAgICAgQHByb3BlcnR5IGRpY3QK
        ICAgICAgICBAdHlwZSBPYmplY3QKICAgICAgICBAZGVmYXVsdCBPYmplY3QK
        ICAgICAgKi8KICAgICAgZGljdDogbnVsbCwKCiAgICAgIC8qKgogICAgICAg
        IFJldHJpZXZlIHRoZSB2YWx1ZSBnaXZlbiBhIGtleSwgaWYgdGhlIHZhbHVl
        IGlzIHByZXNlbnQgYXQgdGhlIGN1cnJlbnQKICAgICAgICBsZXZlbCB1c2Ug
        aXQsIG90aGVyd2lzZSB3YWxrIHVwIHRoZSBwYXJlbnQgaGllcmFyY2h5IGFu
        ZCB0cnkgYWdhaW4uIElmCiAgICAgICAgbm8gbWF0Y2hpbmcga2V5IGlzIGZv
        dW5kLCByZXR1cm4gdW5kZWZpbmVkLgoKICAgICAgICBAbWV0aG9kIGdldAog
        ICAgICAgIEByZXR1cm4ge2FueX0KICAgICAgKi8KICAgICAgZ2V0OiBmdW5j
        dGlvbihrZXkpIHsKICAgICAgICB2YXIgZGljdCA9IHRoaXMuZGljdDsKCiAg
        ICAgICAgaWYgKGRpY3QuaGFzT3duUHJvcGVydHkoa2V5KSkgewogICAgICAg
        ICAgcmV0dXJuIGRpY3Rba2V5XTsKICAgICAgICB9CgogICAgICAgIGlmICh0
        aGlzLnBhcmVudCkgewogICAgICAgICAgcmV0dXJuIHRoaXMucGFyZW50Lmdl
        dChrZXkpOwogICAgICAgIH0KICAgICAgfSwKCiAgICAgIC8qKgogICAgICAg
        IFNldCB0aGUgZ2l2ZW4gdmFsdWUgZm9yIHRoZSBnaXZlbiBrZXksIGF0IHRo
        ZSBjdXJyZW50IGxldmVsLgoKICAgICAgICBAbWV0aG9kIHNldAogICAgICAg
        IEBwYXJhbSB7U3RyaW5nfSBrZXkKICAgICAgICBAcGFyYW0ge0FueX0gdmFs
        dWUKICAgICAgKi8KICAgICAgc2V0OiBmdW5jdGlvbihrZXksIHZhbHVlKSB7
        CiAgICAgICAgdGhpcy5kaWN0W2tleV0gPSB2YWx1ZTsKICAgICAgfSwKCiAg
        ICAgIC8qKgogICAgICAgIERlbGV0ZSB0aGUgZ2l2ZW4ga2V5CgogICAgICAg
        IEBtZXRob2QgcmVtb3ZlCiAgICAgICAgQHBhcmFtIHtTdHJpbmd9IGtleQog
        ICAgICAqLwogICAgICByZW1vdmU6IGZ1bmN0aW9uKGtleSkgewogICAgICAg
        IGRlbGV0ZSB0aGlzLmRpY3Rba2V5XTsKICAgICAgfSwKCiAgICAgIC8qKgog
        ICAgICAgIENoZWNrIGZvciB0aGUgZXhpc3RlbmNlIG9mIGdpdmVuIGEga2V5
        LCBpZiB0aGUga2V5IGlzIHByZXNlbnQgYXQgdGhlIGN1cnJlbnQKICAgICAg
        ICBsZXZlbCByZXR1cm4gdHJ1ZSwgb3RoZXJ3aXNlIHdhbGsgdXAgdGhlIHBh
        cmVudCBoaWVyYXJjaHkgYW5kIHRyeSBhZ2Fpbi4gSWYKICAgICAgICBubyBt
        YXRjaGluZyBrZXkgaXMgZm91bmQsIHJldHVybiBmYWxzZS4KCiAgICAgICAg
        QG1ldGhvZCBoYXMKICAgICAgICBAcGFyYW0ge1N0cmluZ30ga2V5CiAgICAg
        ICAgQHJldHVybiB7Qm9vbGVhbn0KICAgICAgKi8KICAgICAgaGFzOiBmdW5j
        dGlvbihrZXkpIHsKICAgICAgICB2YXIgZGljdCA9IHRoaXMuZGljdDsKCiAg
        ICAgICAgaWYgKGRpY3QuaGFzT3duUHJvcGVydHkoa2V5KSkgewogICAgICAg
        ICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQoKICAgICAgICBpZiAodGhpcy5w
        YXJlbnQpIHsKICAgICAgICAgIHJldHVybiB0aGlzLnBhcmVudC5oYXMoa2V5
        KTsKICAgICAgICB9CgogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfSwK
        CiAgICAgIC8qKgogICAgICAgIEl0ZXJhdGUgYW5kIGludm9rZSBhIGNhbGxi
        YWNrIGZvciBlYWNoIGxvY2FsIGtleS12YWx1ZSBwYWlyLgoKICAgICAgICBA
        bWV0aG9kIGVhY2hMb2NhbAogICAgICAgIEBwYXJhbSB7RnVuY3Rpb259IGNh
        bGxiYWNrCiAgICAgICAgQHBhcmFtIHtPYmplY3R9IGJpbmRpbmcKICAgICAg
        Ki8KICAgICAgZWFjaExvY2FsOiBmdW5jdGlvbihjYWxsYmFjaywgYmluZGlu
        ZykgewogICAgICAgIHZhciBkaWN0ID0gdGhpcy5kaWN0OwoKICAgICAgICBm
        b3IgKHZhciBwcm9wIGluIGRpY3QpIHsKICAgICAgICAgIGlmIChkaWN0Lmhh
        c093blByb3BlcnR5KHByb3ApKSB7CiAgICAgICAgICAgIGNhbGxiYWNrLmNh
        bGwoYmluZGluZywgcHJvcCwgZGljdFtwcm9wXSk7CiAgICAgICAgICB9CiAg
        ICAgICAgfQogICAgICB9CiAgICB9OwoKCiAgICAvLyBBIGxpZ2h0d2VpZ2h0
        IGNvbnRhaW5lciB0aGF0IGhlbHBzIHRvIGFzc2VtYmxlIGFuZCBkZWNvdXBs
        ZSBjb21wb25lbnRzLgogICAgLy8gUHVibGljIGFwaSBmb3IgdGhlIGNvbnRh
        aW5lciBpcyBzdGlsbCBpbiBmbHV4LgogICAgLy8gVGhlIHB1YmxpYyBhcGks
        IHNwZWNpZmllZCBvbiB0aGUgYXBwbGljYXRpb24gbmFtZXNwYWNlIHNob3Vs
        ZCBiZSBjb25zaWRlcmVkIHRoZSBzdGFibGUgYXBpLgogICAgZnVuY3Rpb24g
        Q29udGFpbmVyKHBhcmVudCkgewogICAgICB0aGlzLnBhcmVudCA9IHBhcmVu
        dDsKICAgICAgdGhpcy5jaGlsZHJlbiA9IFtdOwoKICAgICAgdGhpcy5yZXNv
        bHZlciA9IHBhcmVudCAmJiBwYXJlbnQucmVzb2x2ZXIgfHwgZnVuY3Rpb24o
        KSB7fTsKCiAgICAgIHRoaXMucmVnaXN0cnkgPSBuZXcgSW5oZXJpdGluZ0Rp
        Y3QocGFyZW50ICYmIHBhcmVudC5yZWdpc3RyeSk7CiAgICAgIHRoaXMuY2Fj
        aGUgPSBuZXcgSW5oZXJpdGluZ0RpY3QocGFyZW50ICYmIHBhcmVudC5jYWNo
        ZSk7CiAgICAgIHRoaXMuZmFjdG9yeUNhY2hlID0gbmV3IEluaGVyaXRpbmdE
        aWN0KHBhcmVudCAmJiBwYXJlbnQuY2FjaGUpOwogICAgICB0aGlzLnR5cGVJ
        bmplY3Rpb25zID0gbmV3IEluaGVyaXRpbmdEaWN0KHBhcmVudCAmJiBwYXJl
        bnQudHlwZUluamVjdGlvbnMpOwogICAgICB0aGlzLmluamVjdGlvbnMgPSB7
        fTsKCiAgICAgIHRoaXMuZmFjdG9yeVR5cGVJbmplY3Rpb25zID0gbmV3IElu
        aGVyaXRpbmdEaWN0KHBhcmVudCAmJiBwYXJlbnQuZmFjdG9yeVR5cGVJbmpl
        Y3Rpb25zKTsKICAgICAgdGhpcy5mYWN0b3J5SW5qZWN0aW9ucyA9IHt9OwoK
        ICAgICAgdGhpcy5fb3B0aW9ucyA9IG5ldyBJbmhlcml0aW5nRGljdChwYXJl
        bnQgJiYgcGFyZW50Ll9vcHRpb25zKTsKICAgICAgdGhpcy5fdHlwZU9wdGlv
        bnMgPSBuZXcgSW5oZXJpdGluZ0RpY3QocGFyZW50ICYmIHBhcmVudC5fdHlw
        ZU9wdGlvbnMpOwogICAgfQoKICAgIENvbnRhaW5lci5wcm90b3R5cGUgPSB7
        CgogICAgICAvKioKICAgICAgICBAcHJvcGVydHkgcGFyZW50CiAgICAgICAg
        QHR5cGUgQ29udGFpbmVyCiAgICAgICAgQGRlZmF1bHQgbnVsbAogICAgICAq
        LwogICAgICBwYXJlbnQ6IG51bGwsCgogICAgICAvKioKICAgICAgICBAcHJv
        cGVydHkgY2hpbGRyZW4KICAgICAgICBAdHlwZSBBcnJheQogICAgICAgIEBk
        ZWZhdWx0IFtdCiAgICAgICovCiAgICAgIGNoaWxkcmVuOiBudWxsLAoKICAg
        ICAgLyoqCiAgICAgICAgQHByb3BlcnR5IHJlc29sdmVyCiAgICAgICAgQHR5
        cGUgZnVuY3Rpb24KICAgICAgKi8KICAgICAgcmVzb2x2ZXI6IG51bGwsCgog
        ICAgICAvKioKICAgICAgICBAcHJvcGVydHkgcmVnaXN0cnkKICAgICAgICBA
        dHlwZSBJbmhlcml0aW5nRGljdAogICAgICAqLwogICAgICByZWdpc3RyeTog
        bnVsbCwKCiAgICAgIC8qKgogICAgICAgIEBwcm9wZXJ0eSBjYWNoZQogICAg
        ICAgIEB0eXBlIEluaGVyaXRpbmdEaWN0CiAgICAgICovCiAgICAgIGNhY2hl
        OiBudWxsLAoKICAgICAgLyoqCiAgICAgICAgQHByb3BlcnR5IHR5cGVJbmpl
        Y3Rpb25zCiAgICAgICAgQHR5cGUgSW5oZXJpdGluZ0RpY3QKICAgICAgKi8K
        ICAgICAgdHlwZUluamVjdGlvbnM6IG51bGwsCgogICAgICAvKioKICAgICAg
        ICBAcHJvcGVydHkgaW5qZWN0aW9ucwogICAgICAgIEB0eXBlIE9iamVjdAog
        ICAgICAgIEBkZWZhdWx0IHt9CiAgICAgICovCiAgICAgIGluamVjdGlvbnM6
        IG51bGwsCgogICAgICAvKioKICAgICAgICBAcHJpdmF0ZQoKICAgICAgICBA
        cHJvcGVydHkgX29wdGlvbnMKICAgICAgICBAdHlwZSBJbmhlcml0aW5nRGlj
        dAogICAgICAgIEBkZWZhdWx0IG51bGwKICAgICAgKi8KICAgICAgX29wdGlv
        bnM6IG51bGwsCgogICAgICAvKioKICAgICAgICBAcHJpdmF0ZQoKICAgICAg
        ICBAcHJvcGVydHkgX3R5cGVPcHRpb25zCiAgICAgICAgQHR5cGUgSW5oZXJp
        dGluZ0RpY3QKICAgICAgKi8KICAgICAgX3R5cGVPcHRpb25zOiBudWxsLAoK
        ICAgICAgLyoqCiAgICAgICAgUmV0dXJucyBhIG5ldyBjaGlsZCBvZiB0aGUg
        Y3VycmVudCBjb250YWluZXIuIFRoZXNlIGNoaWxkcmVuIGFyZSBjb25maWd1
        cmVkCiAgICAgICAgdG8gY29ycmVjdGx5IGluaGVyaXQgZnJvbSB0aGUgY3Vy
        cmVudCBjb250YWluZXIuCgogICAgICAgIEBtZXRob2QgY2hpbGQKICAgICAg
        ICBAcmV0dXJuIHtDb250YWluZXJ9CiAgICAgICovCiAgICAgIGNoaWxkOiBm
        dW5jdGlvbigpIHsKICAgICAgICB2YXIgY29udGFpbmVyID0gbmV3IENvbnRh
        aW5lcih0aGlzKTsKICAgICAgICB0aGlzLmNoaWxkcmVuLnB1c2goY29udGFp
        bmVyKTsKICAgICAgICByZXR1cm4gY29udGFpbmVyOwogICAgICB9LAoKICAg
        ICAgLyoqCiAgICAgICAgU2V0cyBhIGtleS12YWx1ZSBwYWlyIG9uIHRoZSBj
        dXJyZW50IGNvbnRhaW5lci4gSWYgYSBwYXJlbnQgY29udGFpbmVyLAogICAg
        ICAgIGhhcyB0aGUgc2FtZSBrZXksIG9uY2Ugc2V0IG9uIGEgY2hpbGQsIHRo
        ZSBwYXJlbnQgYW5kIGNoaWxkIHdpbGwgZGl2ZXJnZQogICAgICAgIGFzIGV4
        cGVjdGVkLgoKICAgICAgICBAbWV0aG9kIHNldAogICAgICAgIEBwYXJhbSB7
        T2JqZWN0fSBvYmplY3QKICAgICAgICBAcGFyYW0ge1N0cmluZ30ga2V5CiAg
        ICAgICAgQHBhcmFtIHthbnl9IHZhbHVlCiAgICAgICovCiAgICAgIHNldDog
        ZnVuY3Rpb24ob2JqZWN0LCBrZXksIHZhbHVlKSB7CiAgICAgICAgb2JqZWN0
        W2tleV0gPSB2YWx1ZTsKICAgICAgfSwKCiAgICAgIC8qKgogICAgICAgIFJl
        Z2lzdGVycyBhIGZhY3RvcnkgZm9yIGxhdGVyIGluamVjdGlvbi4KCiAgICAg
        ICAgRXhhbXBsZToKCiAgICAgICAgYGBgamF2YXNjcmlwdAogICAgICAgIHZh
        ciBjb250YWluZXIgPSBuZXcgQ29udGFpbmVyKCk7CgogICAgICAgIGNvbnRh
        aW5lci5yZWdpc3RlcignbW9kZWw6dXNlcicsIFBlcnNvbiwge3NpbmdsZXRv
        bjogZmFsc2UgfSk7CiAgICAgICAgY29udGFpbmVyLnJlZ2lzdGVyKCdmcnVp
        dDpmYXZvcml0ZScsIE9yYW5nZSk7CiAgICAgICAgY29udGFpbmVyLnJlZ2lz
        dGVyKCdjb21tdW5pY2F0aW9uOm1haW4nLCBFbWFpbCwge3NpbmdsZXRvbjog
        ZmFsc2V9KTsKICAgICAgICBgYGAKCiAgICAgICAgQG1ldGhvZCByZWdpc3Rl
        cgogICAgICAgIEBwYXJhbSB7U3RyaW5nfSBmdWxsTmFtZQogICAgICAgIEBw
        YXJhbSB7RnVuY3Rpb259IGZhY3RvcnkKICAgICAgICBAcGFyYW0ge09iamVj
        dH0gb3B0aW9ucwogICAgICAqLwogICAgICByZWdpc3RlcjogZnVuY3Rpb24o
        ZnVsbE5hbWUsIGZhY3RvcnksIG9wdGlvbnMpIHsKICAgICAgICBpZiAoZnVs
        bE5hbWUuaW5kZXhPZignOicpID09PSAtMSkgewogICAgICAgICAgdGhyb3cg
        bmV3IFR5cGVFcnJvcigibWFsZm9ybWVkIGZ1bGxOYW1lLCBleHBlY3RlZDog
        YHR5cGU6bmFtZWAgZ290OiAiICsgZnVsbE5hbWUgKyAiIik7CiAgICAgICAg
        fQoKICAgICAgICBpZiAoZmFjdG9yeSA9PT0gdW5kZWZpbmVkKSB7CiAgICAg
        ICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdBdHRlbXB0aW5nIHRvIHJlZ2lz
        dGVyIGFuIHVua25vd24gZmFjdG9yeTogYCcgKyBmdWxsTmFtZSArICdgJyk7
        CiAgICAgICAgfQoKICAgICAgICB2YXIgbm9ybWFsaXplZE5hbWUgPSB0aGlz
        Lm5vcm1hbGl6ZShmdWxsTmFtZSk7CgogICAgICAgIGlmICh0aGlzLmNhY2hl
        Lmhhcyhub3JtYWxpemVkTmFtZSkpIHsKICAgICAgICAgIHRocm93IG5ldyBF
        cnJvcignQ2Fubm90IHJlLXJlZ2lzdGVyOiBgJyArIGZ1bGxOYW1lICsnYCwg
        YXMgaXQgaGFzIGFscmVhZHkgYmVlbiBsb29rZWQgdXAuJyk7CiAgICAgICAg
        fQoKICAgICAgICB0aGlzLnJlZ2lzdHJ5LnNldChub3JtYWxpemVkTmFtZSwg
        ZmFjdG9yeSk7CiAgICAgICAgdGhpcy5fb3B0aW9ucy5zZXQobm9ybWFsaXpl
        ZE5hbWUsIG9wdGlvbnMgfHwge30pOwogICAgICB9LAoKICAgICAgLyoqCiAg
        ICAgICAgVW5yZWdpc3RlciBhIGZ1bGxOYW1lCgogICAgICAgIGBgYGphdmFz
        Y3JpcHQKICAgICAgICB2YXIgY29udGFpbmVyID0gbmV3IENvbnRhaW5lcigp
        OwogICAgICAgIGNvbnRhaW5lci5yZWdpc3RlcignbW9kZWw6dXNlcicsIFVz
        ZXIpOwoKICAgICAgICBjb250YWluZXIubG9va3VwKCdtb2RlbDp1c2VyJykg
        aW5zdGFuY2VvZiBVc2VyIC8vPT4gdHJ1ZQoKICAgICAgICBjb250YWluZXIu
        dW5yZWdpc3RlcignbW9kZWw6dXNlcicpCiAgICAgICAgY29udGFpbmVyLmxv
        b2t1cCgnbW9kZWw6dXNlcicpID09PSB1bmRlZmluZWQgLy89PiB0cnVlCiAg
        ICAgICAgYGBgCgogICAgICAgIEBtZXRob2QgdW5yZWdpc3RlcgogICAgICAg
        IEBwYXJhbSB7U3RyaW5nfSBmdWxsTmFtZQogICAgICAgKi8KICAgICAgdW5y
        ZWdpc3RlcjogZnVuY3Rpb24oZnVsbE5hbWUpIHsKICAgICAgICB2YXIgbm9y
        bWFsaXplZE5hbWUgPSB0aGlzLm5vcm1hbGl6ZShmdWxsTmFtZSk7CgogICAg
        ICAgIHRoaXMucmVnaXN0cnkucmVtb3ZlKG5vcm1hbGl6ZWROYW1lKTsKICAg
        ICAgICB0aGlzLmNhY2hlLnJlbW92ZShub3JtYWxpemVkTmFtZSk7CiAgICAg
        ICAgdGhpcy5mYWN0b3J5Q2FjaGUucmVtb3ZlKG5vcm1hbGl6ZWROYW1lKTsK
        ICAgICAgICB0aGlzLl9vcHRpb25zLnJlbW92ZShub3JtYWxpemVkTmFtZSk7
        CiAgICAgIH0sCgogICAgICAvKioKICAgICAgICBHaXZlbiBhIGZ1bGxOYW1l
        IHJldHVybiB0aGUgY29ycmVzcG9uZGluZyBmYWN0b3J5LgoKICAgICAgICBC
        eSBkZWZhdWx0IGByZXNvbHZlYCB3aWxsIHJldHJpZXZlIHRoZSBmYWN0b3J5
        IGZyb20KICAgICAgICBpdHMgY29udGFpbmVyJ3MgcmVnaXN0cnkuCgogICAg
        ICAgIGBgYGphdmFzY3JpcHQKICAgICAgICB2YXIgY29udGFpbmVyID0gbmV3
        IENvbnRhaW5lcigpOwogICAgICAgIGNvbnRhaW5lci5yZWdpc3RlcignYXBp
        OnR3aXR0ZXInLCBUd2l0dGVyKTsKCiAgICAgICAgY29udGFpbmVyLnJlc29s
        dmUoJ2FwaTp0d2l0dGVyJykgLy8gPT4gVHdpdHRlcgogICAgICAgIGBgYAoK
        ICAgICAgICBPcHRpb25hbGx5IHRoZSBjb250YWluZXIgY2FuIGJlIHByb3Zp
        ZGVkIHdpdGggYSBjdXN0b20gcmVzb2x2ZXIuCiAgICAgICAgSWYgcHJvdmlk
        ZWQsIGByZXNvbHZlYCB3aWxsIGZpcnN0IHByb3ZpZGUgdGhlIGN1c3RvbSBy
        ZXNvbHZlcgogICAgICAgIHRoZSBvcHBlcnR1bml0eSB0byByZXNvbHZlIHRo
        ZSBmdWxsTmFtZSwgb3RoZXJ3aXNlIGl0IHdpbGwgZmFsbGJhY2sKICAgICAg
        ICB0byB0aGUgcmVnaXN0cnkuCgogICAgICAgIGBgYGphdmFzY3JpcHQKICAg
        ICAgICB2YXIgY29udGFpbmVyID0gbmV3IENvbnRhaW5lcigpOwogICAgICAg
        IGNvbnRhaW5lci5yZXNvbHZlciA9IGZ1bmN0aW9uKGZ1bGxOYW1lKSB7CiAg
        ICAgICAgICAvLyBsb29rdXAgdmlhIHRoZSBtb2R1bGUgc3lzdGVtIG9mIGNo
        b2ljZQogICAgICAgIH07CgogICAgICAgIC8vIHRoZSB0d2l0dGVyIGZhY3Rv
        cnkgaXMgYWRkZWQgdG8gdGhlIG1vZHVsZSBzeXN0ZW0KICAgICAgICBjb250
        YWluZXIucmVzb2x2ZSgnYXBpOnR3aXR0ZXInKSAvLyA9PiBUd2l0dGVyCiAg
        ICAgICAgYGBgCgogICAgICAgIEBtZXRob2QgcmVzb2x2ZQogICAgICAgIEBw
        YXJhbSB7U3RyaW5nfSBmdWxsTmFtZQogICAgICAgIEByZXR1cm4ge0Z1bmN0
        aW9ufSBmdWxsTmFtZSdzIGZhY3RvcnkKICAgICAgKi8KICAgICAgcmVzb2x2
        ZTogZnVuY3Rpb24oZnVsbE5hbWUpIHsKICAgICAgICByZXR1cm4gdGhpcy5y
        ZXNvbHZlcihmdWxsTmFtZSkgfHwgdGhpcy5yZWdpc3RyeS5nZXQoZnVsbE5h
        bWUpOwogICAgICB9LAoKICAgICAgLyoqCiAgICAgICAgQSBob29rIHRoYXQg
        Y2FuIGJlIHVzZWQgdG8gZGVzY3JpYmUgaG93IHRoZSByZXNvbHZlciB3aWxs
        CiAgICAgICAgYXR0ZW1wdCB0byBmaW5kIHRoZSBmYWN0b3J5LgoKICAgICAg
        ICBGb3IgZXhhbXBsZSwgdGhlIGRlZmF1bHQgRW1iZXIgYC5kZXNjcmliZWAg
        cmV0dXJucyB0aGUgZnVsbAogICAgICAgIGNsYXNzIG5hbWUgKGluY2x1ZGlu
        ZyBuYW1lc3BhY2UpIHdoZXJlIEVtYmVyJ3MgcmVzb2x2ZXIgZXhwZWN0cwog
        ICAgICAgIHRvIGZpbmQgdGhlIGBmdWxsTmFtZWAuCgogICAgICAgIEBtZXRo
        b2QgZGVzY3JpYmUKICAgICAgKi8KICAgICAgZGVzY3JpYmU6IGZ1bmN0aW9u
        KGZ1bGxOYW1lKSB7CiAgICAgICAgcmV0dXJuIGZ1bGxOYW1lOwogICAgICB9
        LAoKICAgICAgLyoqCiAgICAgICAgQSBob29rIHRvIGVuYWJsZSBjdXN0b20g
        ZnVsbE5hbWUgbm9ybWFsaXphdGlvbiBiZWhhdmlvdXIKCiAgICAgICAgQG1l
        dGhvZCBub3JtYWxpemUKICAgICAgICBAcGFyYW0ge1N0cmluZ30gZnVsbE5h
        bWUKICAgICAgICBAcmV0dXJuIHtzdHJpbmd9IG5vcm1hbGl6ZWQgZnVsbE5h
        bWUKICAgICAgKi8KICAgICAgbm9ybWFsaXplOiBmdW5jdGlvbihmdWxsTmFt
        ZSkgewogICAgICAgIHJldHVybiBmdWxsTmFtZTsKICAgICAgfSwKCiAgICAg
        IC8qKgogICAgICAgIEBtZXRob2QgbWFrZVRvU3RyaW5nCgogICAgICAgIEBw
        YXJhbSB7YW55fSBmYWN0b3J5CiAgICAgICAgQHBhcmFtIHtzdHJpbmd9IGZ1
        bGxOYW1lCiAgICAgICAgQHJldHVybiB7ZnVuY3Rpb259IHRvU3RyaW5nIGZ1
        bmN0aW9uCiAgICAgICovCiAgICAgIG1ha2VUb1N0cmluZzogZnVuY3Rpb24o
        ZmFjdG9yeSwgZnVsbE5hbWUpIHsKICAgICAgICByZXR1cm4gZmFjdG9yeS50
        b1N0cmluZygpOwogICAgICB9LAoKICAgICAgLyoqCiAgICAgICAgR2l2ZW4g
        YSBmdWxsTmFtZSByZXR1cm4gYSBjb3JyZXNwb25kaW5nIGluc3RhbmNlLgoK
        ICAgICAgICBUaGUgZGVmYXVsdCBiZWhhdmlvdXIgaXMgZm9yIGxvb2t1cCB0
        byByZXR1cm4gYSBzaW5nbGV0b24gaW5zdGFuY2UuCiAgICAgICAgVGhlIHNp
        bmdsZXRvbiBpcyBzY29wZWQgdG8gdGhlIGNvbnRhaW5lciwgYWxsb3dpbmcg
        bXVsdGlwbGUgY29udGFpbmVycwogICAgICAgIHRvIGFsbCBoYXZlIHRoZWly
        IG93biBsb2NhbGx5IHNjb3BlZCBzaW5nbGV0b25zLgoKICAgICAgICBgYGBq
        YXZhc2NyaXB0CiAgICAgICAgdmFyIGNvbnRhaW5lciA9IG5ldyBDb250YWlu
        ZXIoKTsKICAgICAgICBjb250YWluZXIucmVnaXN0ZXIoJ2FwaTp0d2l0dGVy
        JywgVHdpdHRlcik7CgogICAgICAgIHZhciB0d2l0dGVyID0gY29udGFpbmVy
        Lmxvb2t1cCgnYXBpOnR3aXR0ZXInKTsKCiAgICAgICAgdHdpdHRlciBpbnN0
        YW5jZW9mIFR3aXR0ZXI7IC8vID0+IHRydWUKCiAgICAgICAgLy8gYnkgZGVm
        YXVsdCB0aGUgY29udGFpbmVyIHdpbGwgcmV0dXJuIHNpbmdsZXRvbnMKICAg
        ICAgICB0d2l0dGVyMiA9IGNvbnRhaW5lci5sb29rdXAoJ2FwaTp0d2l0dGVy
        Jyk7CiAgICAgICAgdHdpdHRlciBpbnN0YW5jZW9mIFR3aXR0ZXI7IC8vID0+
        IHRydWUKCiAgICAgICAgdHdpdHRlciA9PT0gdHdpdHRlcjI7IC8vPT4gdHJ1
        ZQogICAgICAgIGBgYAoKICAgICAgICBJZiBzaW5nbGV0b25zIGFyZSBub3Qg
        d2FudGVkIGFuIG9wdGlvbmFsIGZsYWcgY2FuIGJlIHByb3ZpZGVkIGF0IGxv
        b2t1cC4KCiAgICAgICAgYGBgamF2YXNjcmlwdAogICAgICAgIHZhciBjb250
        YWluZXIgPSBuZXcgQ29udGFpbmVyKCk7CiAgICAgICAgY29udGFpbmVyLnJl
        Z2lzdGVyKCdhcGk6dHdpdHRlcicsIFR3aXR0ZXIpOwoKICAgICAgICB2YXIg
        dHdpdHRlciA9IGNvbnRhaW5lci5sb29rdXAoJ2FwaTp0d2l0dGVyJywgeyBz
        aW5nbGV0b246IGZhbHNlIH0pOwogICAgICAgIHZhciB0d2l0dGVyMiA9IGNv
        bnRhaW5lci5sb29rdXAoJ2FwaTp0d2l0dGVyJywgeyBzaW5nbGV0b246IGZh
        bHNlIH0pOwoKICAgICAgICB0d2l0dGVyID09PSB0d2l0dGVyMjsgLy89PiBm
        YWxzZQogICAgICAgIGBgYAoKICAgICAgICBAbWV0aG9kIGxvb2t1cAogICAg
        ICAgIEBwYXJhbSB7U3RyaW5nfSBmdWxsTmFtZQogICAgICAgIEBwYXJhbSB7
        T2JqZWN0fSBvcHRpb25zCiAgICAgICAgQHJldHVybiB7YW55fQogICAgICAq
        LwogICAgICBsb29rdXA6IGZ1bmN0aW9uKGZ1bGxOYW1lLCBvcHRpb25zKSB7
        CiAgICAgICAgZnVsbE5hbWUgPSB0aGlzLm5vcm1hbGl6ZShmdWxsTmFtZSk7
        CgogICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9OwoKICAgICAgICBp
        ZiAodGhpcy5jYWNoZS5oYXMoZnVsbE5hbWUpICYmIG9wdGlvbnMuc2luZ2xl
        dG9uICE9PSBmYWxzZSkgewogICAgICAgICAgcmV0dXJuIHRoaXMuY2FjaGUu
        Z2V0KGZ1bGxOYW1lKTsKICAgICAgICB9CgogICAgICAgIHZhciB2YWx1ZSA9
        IGluc3RhbnRpYXRlKHRoaXMsIGZ1bGxOYW1lKTsKCiAgICAgICAgaWYgKHZh
        bHVlID09PSB1bmRlZmluZWQpIHsgcmV0dXJuOyB9CgogICAgICAgIGlmIChp
        c1NpbmdsZXRvbih0aGlzLCBmdWxsTmFtZSkgJiYgb3B0aW9ucy5zaW5nbGV0
        b24gIT09IGZhbHNlKSB7CiAgICAgICAgICB0aGlzLmNhY2hlLnNldChmdWxs
        TmFtZSwgdmFsdWUpOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHZhbHVl
        OwogICAgICB9LAoKICAgICAgLyoqCiAgICAgICAgR2l2ZW4gYSBmdWxsTmFt
        ZSByZXR1cm4gdGhlIGNvcnJlc3BvbmRpbmcgZmFjdG9yeS4KCiAgICAgICAg
        QG1ldGhvZCBsb29rdXBGYWN0b3J5CiAgICAgICAgQHBhcmFtIHtTdHJpbmd9
        IGZ1bGxOYW1lCiAgICAgICAgQHJldHVybiB7YW55fQogICAgICAqLwogICAg
        ICBsb29rdXBGYWN0b3J5OiBmdW5jdGlvbihmdWxsTmFtZSkgewogICAgICAg
        IHJldHVybiBmYWN0b3J5Rm9yKHRoaXMsIGZ1bGxOYW1lKTsKICAgICAgfSwK
        CiAgICAgIC8qKgogICAgICAgIEdpdmVuIGEgZnVsbE5hbWUgY2hlY2sgaWYg
        dGhlIGNvbnRhaW5lciBpcyBhd2FyZSBvZiBpdHMgZmFjdG9yeQogICAgICAg
        IG9yIHNpbmdsZXRvbiBpbnN0YW5jZS4KCiAgICAgICAgQG1ldGhvZCBoYXMK
        ICAgICAgICBAcGFyYW0ge1N0cmluZ30gZnVsbE5hbWUKICAgICAgICBAcmV0
        dXJuIHtCb29sZWFufQogICAgICAqLwogICAgICBoYXM6IGZ1bmN0aW9uKGZ1
        bGxOYW1lKSB7CiAgICAgICAgaWYgKHRoaXMuY2FjaGUuaGFzKGZ1bGxOYW1l
        KSkgewogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQoKICAgICAg
        ICByZXR1cm4gISFmYWN0b3J5Rm9yKHRoaXMsIGZ1bGxOYW1lKTsKICAgICAg
        fSwKCiAgICAgIC8qKgogICAgICAgIEFsbG93IHJlZ2lzdGVyaW5nIG9wdGlv
        bnMgZm9yIGFsbCBmYWN0b3JpZXMgb2YgYSB0eXBlLgoKICAgICAgICBgYGBq
        YXZhc2NyaXB0CiAgICAgICAgdmFyIGNvbnRhaW5lciA9IG5ldyBDb250YWlu
        ZXIoKTsKCiAgICAgICAgLy8gaWYgYWxsIG9mIHR5cGUgYGNvbm5lY3Rpb25g
        IG11c3Qgbm90IGJlIHNpbmdsZXRvbnMKICAgICAgICBjb250YWluZXIub3B0
        aW9uc0ZvclR5cGUoJ2Nvbm5lY3Rpb24nLCB7IHNpbmdsZXRvbjogZmFsc2Ug
        fSk7CgogICAgICAgIGNvbnRhaW5lci5yZWdpc3RlcignY29ubmVjdGlvbjp0
        d2l0dGVyJywgVHdpdHRlckNvbm5lY3Rpb24pOwogICAgICAgIGNvbnRhaW5l
        ci5yZWdpc3RlcignY29ubmVjdGlvbjpmYWNlYm9vaycsIEZhY2Vib29rQ29u
        bmVjdGlvbik7CgogICAgICAgIHZhciB0d2l0dGVyID0gY29udGFpbmVyLmxv
        b2t1cCgnY29ubmVjdGlvbjp0d2l0dGVyJyk7CiAgICAgICAgdmFyIHR3aXR0
        ZXIyID0gY29udGFpbmVyLmxvb2t1cCgnY29ubmVjdGlvbjp0d2l0dGVyJyk7
        CgogICAgICAgIHR3aXR0ZXIgPT09IHR3aXR0ZXIyOyAvLyA9PiBmYWxzZQoK
        ICAgICAgICB2YXIgZmFjZWJvb2sgPSBjb250YWluZXIubG9va3VwKCdjb25u
        ZWN0aW9uOmZhY2Vib29rJyk7CiAgICAgICAgdmFyIGZhY2Vib29rMiA9IGNv
        bnRhaW5lci5sb29rdXAoJ2Nvbm5lY3Rpb246ZmFjZWJvb2snKTsKCiAgICAg
        ICAgZmFjZWJvb2sgPT09IGZhY2Vib29rMjsgLy8gPT4gZmFsc2UKICAgICAg
        ICBgYGAKCiAgICAgICAgQG1ldGhvZCBvcHRpb25zRm9yVHlwZQogICAgICAg
        IEBwYXJhbSB7U3RyaW5nfSB0eXBlCiAgICAgICAgQHBhcmFtIHtPYmplY3R9
        IG9wdGlvbnMKICAgICAgKi8KICAgICAgb3B0aW9uc0ZvclR5cGU6IGZ1bmN0
        aW9uKHR5cGUsIG9wdGlvbnMpIHsKICAgICAgICBpZiAodGhpcy5wYXJlbnQp
        IHsgaWxsZWdhbENoaWxkT3BlcmF0aW9uKCdvcHRpb25zRm9yVHlwZScpOyB9
        CgogICAgICAgIHRoaXMuX3R5cGVPcHRpb25zLnNldCh0eXBlLCBvcHRpb25z
        KTsKICAgICAgfSwKCiAgICAgIC8qKgogICAgICAgIEBtZXRob2Qgb3B0aW9u
        cwogICAgICAgIEBwYXJhbSB7U3RyaW5nfSB0eXBlCiAgICAgICAgQHBhcmFt
        IHtPYmplY3R9IG9wdGlvbnMKICAgICAgKi8KICAgICAgb3B0aW9uczogZnVu
        Y3Rpb24odHlwZSwgb3B0aW9ucykgewogICAgICAgIHRoaXMub3B0aW9uc0Zv
        clR5cGUodHlwZSwgb3B0aW9ucyk7CiAgICAgIH0sCgogICAgICAvKioKICAg
        ICAgICBAcHJpdmF0ZQoKICAgICAgICBVc2VkIG9ubHkgdmlhIGBpbmplY3Rp
        b25gLgoKICAgICAgICBQcm92aWRlcyBhIHNwZWNpYWxpemVkIGZvcm0gb2Yg
        aW5qZWN0aW9uLCBzcGVjaWZpY2FsbHkgZW5hYmxpbmcKICAgICAgICBhbGwg
        b2JqZWN0cyBvZiBvbmUgdHlwZSB0byBiZSBpbmplY3RlZCB3aXRoIGEgcmVm
        ZXJlbmNlIHRvIGFub3RoZXIKICAgICAgICBvYmplY3QuCgogICAgICAgIEZv
        ciBleGFtcGxlLCBwcm92aWRlZCBlYWNoIG9iamVjdCBvZiB0eXBlIGBjb250
        cm9sbGVyYCBuZWVkZWQgYSBgcm91dGVyYC4KICAgICAgICBvbmUgd291bGQg
        ZG8gdGhlIGZvbGxvd2luZzoKCiAgICAgICAgYGBgamF2YXNjcmlwdAogICAg
        ICAgIHZhciBjb250YWluZXIgPSBuZXcgQ29udGFpbmVyKCk7CgogICAgICAg
        IGNvbnRhaW5lci5yZWdpc3Rlcigncm91dGVyOm1haW4nLCBSb3V0ZXIpOwog
        ICAgICAgIGNvbnRhaW5lci5yZWdpc3RlcignY29udHJvbGxlcjp1c2VyJywg
        VXNlckNvbnRyb2xsZXIpOwogICAgICAgIGNvbnRhaW5lci5yZWdpc3Rlcign
        Y29udHJvbGxlcjpwb3N0JywgUG9zdENvbnRyb2xsZXIpOwoKICAgICAgICBj
        b250YWluZXIudHlwZUluamVjdGlvbignY29udHJvbGxlcicsICdyb3V0ZXIn
        LCAncm91dGVyOm1haW4nKTsKCiAgICAgICAgdmFyIHVzZXIgPSBjb250YWlu
        ZXIubG9va3VwKCdjb250cm9sbGVyOnVzZXInKTsKICAgICAgICB2YXIgcG9z
        dCA9IGNvbnRhaW5lci5sb29rdXAoJ2NvbnRyb2xsZXI6cG9zdCcpOwoKICAg
        ICAgICB1c2VyLnJvdXRlciBpbnN0YW5jZW9mIFJvdXRlcjsgLy89PiB0cnVl
        CiAgICAgICAgcG9zdC5yb3V0ZXIgaW5zdGFuY2VvZiBSb3V0ZXI7IC8vPT4g
        dHJ1ZQoKICAgICAgICAvLyBib3RoIGNvbnRyb2xsZXJzIHNoYXJlIHRoZSBz
        YW1lIHJvdXRlcgogICAgICAgIHVzZXIucm91dGVyID09PSBwb3N0LnJvdXRl
        cjsgLy89PiB0cnVlCiAgICAgICAgYGBgCgogICAgICAgIEBtZXRob2QgdHlw
        ZUluamVjdGlvbgogICAgICAgIEBwYXJhbSB7U3RyaW5nfSB0eXBlCiAgICAg
        ICAgQHBhcmFtIHtTdHJpbmd9IHByb3BlcnR5CiAgICAgICAgQHBhcmFtIHtT
        dHJpbmd9IGZ1bGxOYW1lCiAgICAgICovCiAgICAgIHR5cGVJbmplY3Rpb246
        IGZ1bmN0aW9uKHR5cGUsIHByb3BlcnR5LCBmdWxsTmFtZSkgewogICAgICAg
        IGlmICh0aGlzLnBhcmVudCkgeyBpbGxlZ2FsQ2hpbGRPcGVyYXRpb24oJ3R5
        cGVJbmplY3Rpb24nKTsgfQoKICAgICAgICBhZGRUeXBlSW5qZWN0aW9uKHRo
        aXMudHlwZUluamVjdGlvbnMsIHR5cGUsIHByb3BlcnR5LCBmdWxsTmFtZSk7
        CiAgICAgIH0sCgogICAgICAvKioKICAgICAgICBEZWZpbmVzIGluamVjdGlv
        biBydWxlcy4KCiAgICAgICAgVGhlc2UgcnVsZXMgYXJlIHVzZWQgdG8gaW5q
        ZWN0IGRlcGVuZGVuY2llcyBvbnRvIG9iamVjdHMgd2hlbiB0aGV5CiAgICAg
        ICAgYXJlIGluc3RhbnRpYXRlZC4KCiAgICAgICAgVHdvIGZvcm1zIG9mIGlu
        amVjdGlvbnMgYXJlIHBvc3NpYmxlOgoKICAgICAgKiBJbmplY3Rpbmcgb25l
        IGZ1bGxOYW1lIG9uIGFub3RoZXIgZnVsbE5hbWUKICAgICAgKiBJbmplY3Rp
        bmcgb25lIGZ1bGxOYW1lIG9uIGEgdHlwZQoKICAgICAgICBFeGFtcGxlOgoK
        ICAgICAgICBgYGBqYXZhc2NyaXB0CiAgICAgICAgdmFyIGNvbnRhaW5lciA9
        IG5ldyBDb250YWluZXIoKTsKCiAgICAgICAgY29udGFpbmVyLnJlZ2lzdGVy
        KCdzb3VyY2U6bWFpbicsIFNvdXJjZSk7CiAgICAgICAgY29udGFpbmVyLnJl
        Z2lzdGVyKCdtb2RlbDp1c2VyJywgVXNlcik7CiAgICAgICAgY29udGFpbmVy
        LnJlZ2lzdGVyKCdtb2RlbDpwb3N0JywgUG9zdCk7CgogICAgICAgIC8vIGlu
        amVjdGluZyBvbmUgZnVsbE5hbWUgb24gYW5vdGhlciBmdWxsTmFtZQogICAg
        ICAgIC8vIGVnLiBlYWNoIHVzZXIgbW9kZWwgZ2V0cyBhIHBvc3QgbW9kZWwK
        ICAgICAgICBjb250YWluZXIuaW5qZWN0aW9uKCdtb2RlbDp1c2VyJywgJ3Bv
        c3QnLCAnbW9kZWw6cG9zdCcpOwoKICAgICAgICAvLyBpbmplY3Rpbmcgb25l
        IGZ1bGxOYW1lIG9uIGFub3RoZXIgdHlwZQogICAgICAgIGNvbnRhaW5lci5p
        bmplY3Rpb24oJ21vZGVsJywgJ3NvdXJjZScsICdzb3VyY2U6bWFpbicpOwoK
        ICAgICAgICB2YXIgdXNlciA9IGNvbnRhaW5lci5sb29rdXAoJ21vZGVsOnVz
        ZXInKTsKICAgICAgICB2YXIgcG9zdCA9IGNvbnRhaW5lci5sb29rdXAoJ21v
        ZGVsOnBvc3QnKTsKCiAgICAgICAgdXNlci5zb3VyY2UgaW5zdGFuY2VvZiBT
        b3VyY2U7IC8vPT4gdHJ1ZQogICAgICAgIHBvc3Quc291cmNlIGluc3RhbmNl
        b2YgU291cmNlOyAvLz0+IHRydWUKCiAgICAgICAgdXNlci5wb3N0IGluc3Rh
        bmNlb2YgUG9zdDsgLy89PiB0cnVlCgogICAgICAgIC8vIGFuZCBib3RoIG1v
        ZGVscyBzaGFyZSB0aGUgc2FtZSBzb3VyY2UKICAgICAgICB1c2VyLnNvdXJj
        ZSA9PT0gcG9zdC5zb3VyY2U7IC8vPT4gdHJ1ZQogICAgICAgIGBgYAoKICAg
        ICAgICBAbWV0aG9kIGluamVjdGlvbgogICAgICAgIEBwYXJhbSB7U3RyaW5n
        fSBmYWN0b3J5TmFtZQogICAgICAgIEBwYXJhbSB7U3RyaW5nfSBwcm9wZXJ0
        eQogICAgICAgIEBwYXJhbSB7U3RyaW5nfSBpbmplY3Rpb25OYW1lCiAgICAg
        ICovCiAgICAgIGluamVjdGlvbjogZnVuY3Rpb24oZmFjdG9yeU5hbWUsIHBy
        b3BlcnR5LCBpbmplY3Rpb25OYW1lKSB7CiAgICAgICAgaWYgKHRoaXMucGFy
        ZW50KSB7IGlsbGVnYWxDaGlsZE9wZXJhdGlvbignaW5qZWN0aW9uJyk7IH0K
        CiAgICAgICAgaWYgKGZhY3RvcnlOYW1lLmluZGV4T2YoJzonKSA9PT0gLTEp
        IHsKICAgICAgICAgIHJldHVybiB0aGlzLnR5cGVJbmplY3Rpb24oZmFjdG9y
        eU5hbWUsIHByb3BlcnR5LCBpbmplY3Rpb25OYW1lKTsKICAgICAgICB9Cgog
        ICAgICAgIGFkZEluamVjdGlvbih0aGlzLmluamVjdGlvbnMsIGZhY3RvcnlO
        YW1lLCBwcm9wZXJ0eSwgaW5qZWN0aW9uTmFtZSk7CiAgICAgIH0sCgoKICAg
        ICAgLyoqCiAgICAgICAgQHByaXZhdGUKCiAgICAgICAgVXNlZCBvbmx5IHZp
        YSBgZmFjdG9yeUluamVjdGlvbmAuCgogICAgICAgIFByb3ZpZGVzIGEgc3Bl
        Y2lhbGl6ZWQgZm9ybSBvZiBpbmplY3Rpb24sIHNwZWNpZmljYWxseSBlbmFi
        bGluZwogICAgICAgIGFsbCBmYWN0b3J5IG9mIG9uZSB0eXBlIHRvIGJlIGlu
        amVjdGVkIHdpdGggYSByZWZlcmVuY2UgdG8gYW5vdGhlcgogICAgICAgIG9i
        amVjdC4KCiAgICAgICAgRm9yIGV4YW1wbGUsIHByb3ZpZGVkIGVhY2ggZmFj
        dG9yeSBvZiB0eXBlIGBtb2RlbGAgbmVlZGVkIGEgYHN0b3JlYC4KICAgICAg
        ICBvbmUgd291bGQgZG8gdGhlIGZvbGxvd2luZzoKCiAgICAgICAgYGBgamF2
        YXNjcmlwdAogICAgICAgIHZhciBjb250YWluZXIgPSBuZXcgQ29udGFpbmVy
        KCk7CgogICAgICAgIGNvbnRhaW5lci5yZWdpc3RlckZhY3RvcnkoJ21vZGVs
        OnVzZXInLCBVc2VyKTsKICAgICAgICBjb250YWluZXIucmVnaXN0ZXIoJ3N0
        b3JlOm1haW4nLCBTb21lU3RvcmUpOwoKICAgICAgICBjb250YWluZXIuZmFj
        dG9yeVR5cGVJbmplY3Rpb24oJ21vZGVsJywgJ3N0b3JlJywgJ3N0b3JlOm1h
        aW4nKTsKCiAgICAgICAgdmFyIHN0b3JlID0gY29udGFpbmVyLmxvb2t1cCgn
        c3RvcmU6bWFpbicpOwogICAgICAgIHZhciBVc2VyRmFjdG9yeSA9IGNvbnRh
        aW5lci5sb29rdXBGYWN0b3J5KCdtb2RlbDp1c2VyJyk7CgogICAgICAgIFVz
        ZXJGYWN0b3J5LnN0b3JlIGluc3RhbmNlb2YgU29tZVN0b3JlOyAvLz0+IHRy
        dWUKICAgICAgICBgYGAKCiAgICAgICAgQG1ldGhvZCBmYWN0b3J5VHlwZUlu
        amVjdGlvbgogICAgICAgIEBwYXJhbSB7U3RyaW5nfSB0eXBlCiAgICAgICAg
        QHBhcmFtIHtTdHJpbmd9IHByb3BlcnR5CiAgICAgICAgQHBhcmFtIHtTdHJp
        bmd9IGZ1bGxOYW1lCiAgICAgICovCiAgICAgIGZhY3RvcnlUeXBlSW5qZWN0
        aW9uOiBmdW5jdGlvbih0eXBlLCBwcm9wZXJ0eSwgZnVsbE5hbWUpIHsKICAg
        ICAgICBpZiAodGhpcy5wYXJlbnQpIHsgaWxsZWdhbENoaWxkT3BlcmF0aW9u
        KCdmYWN0b3J5VHlwZUluamVjdGlvbicpOyB9CgogICAgICAgIGFkZFR5cGVJ
        bmplY3Rpb24odGhpcy5mYWN0b3J5VHlwZUluamVjdGlvbnMsIHR5cGUsIHBy
        b3BlcnR5LCBmdWxsTmFtZSk7CiAgICAgIH0sCgogICAgICAvKioKICAgICAg
        ICBEZWZpbmVzIGZhY3RvcnkgaW5qZWN0aW9uIHJ1bGVzLgoKICAgICAgICBT
        aW1pbGFyIHRvIHJlZ3VsYXIgaW5qZWN0aW9uIHJ1bGVzLCBidXQgYXJlIHJ1
        biBhZ2FpbnN0IGZhY3RvcmllcywgdmlhCiAgICAgICAgYENvbnRhaW5lciNs
        b29rdXBGYWN0b3J5YC4KCiAgICAgICAgVGhlc2UgcnVsZXMgYXJlIHVzZWQg
        dG8gaW5qZWN0IG9iamVjdHMgb250byBmYWN0b3JpZXMgd2hlbiB0aGV5CiAg
        ICAgICAgYXJlIGxvb2tlZCB1cC4KCiAgICAgICAgVHdvIGZvcm1zIG9mIGlu
        amVjdGlvbnMgYXJlIHBvc3NpYmxlOgoKICAgICAgKiBJbmplY3Rpbmcgb25l
        IGZ1bGxOYW1lIG9uIGFub3RoZXIgZnVsbE5hbWUKICAgICAgKiBJbmplY3Rp
        bmcgb25lIGZ1bGxOYW1lIG9uIGEgdHlwZQoKICAgICAgICBFeGFtcGxlOgoK
        ICAgICAgICBgYGBqYXZhc2NyaXB0CiAgICAgICAgdmFyIGNvbnRhaW5lciA9
        IG5ldyBDb250YWluZXIoKTsKCiAgICAgICAgY29udGFpbmVyLnJlZ2lzdGVy
        KCdzdG9yZTptYWluJywgU3RvcmUpOwogICAgICAgIGNvbnRhaW5lci5yZWdp
        c3Rlcignc3RvcmU6c2Vjb25kYXJ5JywgT3RoZXJTdG9yZSk7CiAgICAgICAg
        Y29udGFpbmVyLnJlZ2lzdGVyKCdtb2RlbDp1c2VyJywgVXNlcik7CiAgICAg
        ICAgY29udGFpbmVyLnJlZ2lzdGVyKCdtb2RlbDpwb3N0JywgUG9zdCk7Cgog
        ICAgICAgIC8vIGluamVjdGluZyBvbmUgZnVsbE5hbWUgb24gYW5vdGhlciB0
        eXBlCiAgICAgICAgY29udGFpbmVyLmZhY3RvcnlJbmplY3Rpb24oJ21vZGVs
        JywgJ3N0b3JlJywgJ3N0b3JlOm1haW4nKTsKCiAgICAgICAgLy8gaW5qZWN0
        aW5nIG9uZSBmdWxsTmFtZSBvbiBhbm90aGVyIGZ1bGxOYW1lCiAgICAgICAg
        Y29udGFpbmVyLmZhY3RvcnlJbmplY3Rpb24oJ21vZGVsOnBvc3QnLCAnc2Vj
        b25kYXJ5U3RvcmUnLCAnc3RvcmU6c2Vjb25kYXJ5Jyk7CgogICAgICAgIHZh
        ciBVc2VyRmFjdG9yeSA9IGNvbnRhaW5lci5sb29rdXBGYWN0b3J5KCdtb2Rl
        bDp1c2VyJyk7CiAgICAgICAgdmFyIFBvc3RGYWN0b3J5ID0gY29udGFpbmVy
        Lmxvb2t1cEZhY3RvcnkoJ21vZGVsOnBvc3QnKTsKICAgICAgICB2YXIgc3Rv
        cmUgPSBjb250YWluZXIubG9va3VwKCdzdG9yZTptYWluJyk7CgogICAgICAg
        IFVzZXJGYWN0b3J5LnN0b3JlIGluc3RhbmNlb2YgU3RvcmU7IC8vPT4gdHJ1
        ZQogICAgICAgIFVzZXJGYWN0b3J5LnNlY29uZGFyeVN0b3JlIGluc3RhbmNl
        b2YgT3RoZXJTdG9yZTsgLy89PiBmYWxzZQoKICAgICAgICBQb3N0RmFjdG9y
        eS5zdG9yZSBpbnN0YW5jZW9mIFN0b3JlOyAvLz0+IHRydWUKICAgICAgICBQ
        b3N0RmFjdG9yeS5zZWNvbmRhcnlTdG9yZSBpbnN0YW5jZW9mIE90aGVyU3Rv
        cmU7IC8vPT4gdHJ1ZQoKICAgICAgICAvLyBhbmQgYm90aCBtb2RlbHMgc2hh
        cmUgdGhlIHNhbWUgc291cmNlIGluc3RhbmNlCiAgICAgICAgVXNlckZhY3Rv
        cnkuc3RvcmUgPT09IFBvc3RGYWN0b3J5LnN0b3JlOyAvLz0+IHRydWUKICAg
        ICAgICBgYGAKCiAgICAgICAgQG1ldGhvZCBmYWN0b3J5SW5qZWN0aW9uCiAg
        ICAgICAgQHBhcmFtIHtTdHJpbmd9IGZhY3RvcnlOYW1lCiAgICAgICAgQHBh
        cmFtIHtTdHJpbmd9IHByb3BlcnR5CiAgICAgICAgQHBhcmFtIHtTdHJpbmd9
        IGluamVjdGlvbk5hbWUKICAgICAgKi8KICAgICAgZmFjdG9yeUluamVjdGlv
        bjogZnVuY3Rpb24oZmFjdG9yeU5hbWUsIHByb3BlcnR5LCBpbmplY3Rpb25O
        YW1lKSB7CiAgICAgICAgaWYgKHRoaXMucGFyZW50KSB7IGlsbGVnYWxDaGls
        ZE9wZXJhdGlvbignaW5qZWN0aW9uJyk7IH0KCiAgICAgICAgaWYgKGZhY3Rv
        cnlOYW1lLmluZGV4T2YoJzonKSA9PT0gLTEpIHsKICAgICAgICAgIHJldHVy
        biB0aGlzLmZhY3RvcnlUeXBlSW5qZWN0aW9uKGZhY3RvcnlOYW1lLCBwcm9w
        ZXJ0eSwgaW5qZWN0aW9uTmFtZSk7CiAgICAgICAgfQoKICAgICAgICBhZGRJ
        bmplY3Rpb24odGhpcy5mYWN0b3J5SW5qZWN0aW9ucywgZmFjdG9yeU5hbWUs
        IHByb3BlcnR5LCBpbmplY3Rpb25OYW1lKTsKICAgICAgfSwKCiAgICAgIC8q
        KgogICAgICAgIEEgZGVwdGggZmlyc3QgdHJhdmVyc2FsLCBkZXN0cm95aW5n
        IHRoZSBjb250YWluZXIsIGl0cyBkZXNjZW5kYW50IGNvbnRhaW5lcnMgYW5k
        IGFsbAogICAgICAgIHRoZWlyIG1hbmFnZWQgb2JqZWN0cy4KCiAgICAgICAg
        QG1ldGhvZCBkZXN0cm95CiAgICAgICovCiAgICAgIGRlc3Ryb3k6IGZ1bmN0
        aW9uKCkgewogICAgICAgIHRoaXMuaXNEZXN0cm95ZWQgPSB0cnVlOwoKICAg
        ICAgICBmb3IgKHZhciBpPTAsIGw9dGhpcy5jaGlsZHJlbi5sZW5ndGg7IGk8
        bDsgaSsrKSB7CiAgICAgICAgICB0aGlzLmNoaWxkcmVuW2ldLmRlc3Ryb3ko
        KTsKICAgICAgICB9CgogICAgICAgIHRoaXMuY2hpbGRyZW4gPSBbXTsKCiAg
        ICAgICAgZWFjaERlc3Ryb3lhYmxlKHRoaXMsIGZ1bmN0aW9uKGl0ZW0pIHsK
        ICAgICAgICAgIGl0ZW0uZGVzdHJveSgpOwogICAgICAgIH0pOwoKICAgICAg
        ICB0aGlzLnBhcmVudCA9IHVuZGVmaW5lZDsKICAgICAgICB0aGlzLmlzRGVz
        dHJveWVkID0gdHJ1ZTsKICAgICAgfSwKCiAgICAgIC8qKgogICAgICAgIEBt
        ZXRob2QgcmVzZXQKICAgICAgKi8KICAgICAgcmVzZXQ6IGZ1bmN0aW9uKCkg
        ewogICAgICAgIGZvciAodmFyIGk9MCwgbD10aGlzLmNoaWxkcmVuLmxlbmd0
        aDsgaTxsOyBpKyspIHsKICAgICAgICAgIHJlc2V0Q2FjaGUodGhpcy5jaGls
        ZHJlbltpXSk7CiAgICAgICAgfQogICAgICAgIHJlc2V0Q2FjaGUodGhpcyk7
        CiAgICAgIH0KICAgIH07CgogICAgZnVuY3Rpb24gaWxsZWdhbENoaWxkT3Bl
        cmF0aW9uKG9wZXJhdGlvbikgewogICAgICB0aHJvdyBuZXcgRXJyb3Iob3Bl
        cmF0aW9uICsgIiBpcyBub3QgY3VycmVudGx5IHN1cHBvcnRlZCBvbiBjaGls
        ZCBjb250YWluZXJzIik7CiAgICB9CgogICAgZnVuY3Rpb24gaXNTaW5nbGV0
        b24oY29udGFpbmVyLCBmdWxsTmFtZSkgewogICAgICB2YXIgc2luZ2xldG9u
        ID0gb3B0aW9uKGNvbnRhaW5lciwgZnVsbE5hbWUsICdzaW5nbGV0b24nKTsK
        CiAgICAgIHJldHVybiBzaW5nbGV0b24gIT09IGZhbHNlOwogICAgfQoKICAg
        IGZ1bmN0aW9uIGJ1aWxkSW5qZWN0aW9ucyhjb250YWluZXIsIGluamVjdGlv
        bnMpIHsKICAgICAgdmFyIGhhc2ggPSB7fTsKCiAgICAgIGlmICghaW5qZWN0
        aW9ucykgeyByZXR1cm4gaGFzaDsgfQoKICAgICAgdmFyIGluamVjdGlvbiwg
        bG9va3VwOwoKICAgICAgZm9yICh2YXIgaT0wLCBsPWluamVjdGlvbnMubGVu
        Z3RoOyBpPGw7IGkrKykgewogICAgICAgIGluamVjdGlvbiA9IGluamVjdGlv
        bnNbaV07CiAgICAgICAgbG9va3VwID0gY29udGFpbmVyLmxvb2t1cChpbmpl
        Y3Rpb24uZnVsbE5hbWUpOwoKICAgICAgICBpZiAobG9va3VwICE9PSB1bmRl
        ZmluZWQpIHsKICAgICAgICAgIGhhc2hbaW5qZWN0aW9uLnByb3BlcnR5XSA9
        IGxvb2t1cDsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhyb3cgbmV3
        IEVycm9yKCdBdHRlbXB0aW5nIHRvIGluamVjdCBhbiB1bmtub3duIGluamVj
        dGlvbjogYCcgKyBpbmplY3Rpb24uZnVsbE5hbWUgKyAnYCcpOwogICAgICAg
        IH0KICAgICAgfQoKICAgICAgcmV0dXJuIGhhc2g7CiAgICB9CgogICAgZnVu
        Y3Rpb24gb3B0aW9uKGNvbnRhaW5lciwgZnVsbE5hbWUsIG9wdGlvbk5hbWUp
        IHsKICAgICAgdmFyIG9wdGlvbnMgPSBjb250YWluZXIuX29wdGlvbnMuZ2V0
        KGZ1bGxOYW1lKTsKCiAgICAgIGlmIChvcHRpb25zICYmIG9wdGlvbnNbb3B0
        aW9uTmFtZV0gIT09IHVuZGVmaW5lZCkgewogICAgICAgIHJldHVybiBvcHRp
        b25zW29wdGlvbk5hbWVdOwogICAgICB9CgogICAgICB2YXIgdHlwZSA9IGZ1
        bGxOYW1lLnNwbGl0KCI6IilbMF07CiAgICAgIG9wdGlvbnMgPSBjb250YWlu
        ZXIuX3R5cGVPcHRpb25zLmdldCh0eXBlKTsKCiAgICAgIGlmIChvcHRpb25z
        KSB7CiAgICAgICAgcmV0dXJuIG9wdGlvbnNbb3B0aW9uTmFtZV07CiAgICAg
        IH0KICAgIH0KCiAgICBmdW5jdGlvbiBmYWN0b3J5Rm9yKGNvbnRhaW5lciwg
        ZnVsbE5hbWUpIHsKICAgICAgdmFyIG5hbWUgPSBjb250YWluZXIubm9ybWFs
        aXplKGZ1bGxOYW1lKTsKICAgICAgdmFyIGZhY3RvcnkgPSBjb250YWluZXIu
        cmVzb2x2ZShuYW1lKTsKICAgICAgdmFyIGluamVjdGVkRmFjdG9yeTsKICAg
        ICAgdmFyIGNhY2hlID0gY29udGFpbmVyLmZhY3RvcnlDYWNoZTsKICAgICAg
        dmFyIHR5cGUgPSBmdWxsTmFtZS5zcGxpdCgiOiIpWzBdOwoKICAgICAgaWYg
        KGZhY3RvcnkgPT09IHVuZGVmaW5lZCkgeyByZXR1cm47IH0KCiAgICAgIGlm
        IChjYWNoZS5oYXMoZnVsbE5hbWUpKSB7CiAgICAgICAgcmV0dXJuIGNhY2hl
        LmdldChmdWxsTmFtZSk7CiAgICAgIH0KCiAgICAgIGlmICghZmFjdG9yeSB8
        fCB0eXBlb2YgZmFjdG9yeS5leHRlbmQgIT09ICdmdW5jdGlvbicgfHwgKCFF
        bWJlci5NT0RFTF9GQUNUT1JZX0lOSkVDVElPTlMgJiYgdHlwZSA9PT0gJ21v
        ZGVsJykpIHsKICAgICAgICAvLyBUT0RPOiB0aGluayBhYm91dCBhICdzYWZl
        JyBtZXJnZSBzdHlsZSBleHRlbnNpb24KICAgICAgICAvLyBmb3Igbm93IGp1
        c3QgZmFsbGJhY2sgdG8gY3JlYXRlIHRpbWUgaW5qZWN0aW9uCiAgICAgICAg
        cmV0dXJuIGZhY3Rvcnk7CiAgICAgIH0gZWxzZSB7CgogICAgICAgIHZhciBp
        bmplY3Rpb25zICAgICAgICA9IGluamVjdGlvbnNGb3IoY29udGFpbmVyLCBm
        dWxsTmFtZSk7CiAgICAgICAgdmFyIGZhY3RvcnlJbmplY3Rpb25zID0gZmFj
        dG9yeUluamVjdGlvbnNGb3IoY29udGFpbmVyLCBmdWxsTmFtZSk7CgogICAg
        ICAgIGZhY3RvcnlJbmplY3Rpb25zLl90b1N0cmluZyA9IGNvbnRhaW5lci5t
        YWtlVG9TdHJpbmcoZmFjdG9yeSwgZnVsbE5hbWUpOwoKICAgICAgICBpbmpl
        Y3RlZEZhY3RvcnkgPSBmYWN0b3J5LmV4dGVuZChpbmplY3Rpb25zKTsKICAg
        ICAgICBpbmplY3RlZEZhY3RvcnkucmVvcGVuQ2xhc3MoZmFjdG9yeUluamVj
        dGlvbnMpOwoKICAgICAgICBjYWNoZS5zZXQoZnVsbE5hbWUsIGluamVjdGVk
        RmFjdG9yeSk7CgogICAgICAgIHJldHVybiBpbmplY3RlZEZhY3Rvcnk7CiAg
        ICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBpbmplY3Rpb25zRm9yKGNvbnRh
        aW5lciAsZnVsbE5hbWUpIHsKICAgICAgdmFyIHNwbGl0TmFtZSA9IGZ1bGxO
        YW1lLnNwbGl0KCI6IiksCiAgICAgICAgdHlwZSA9IHNwbGl0TmFtZVswXSwK
        ICAgICAgICBpbmplY3Rpb25zID0gW107CgogICAgICBpbmplY3Rpb25zID0g
        aW5qZWN0aW9ucy5jb25jYXQoY29udGFpbmVyLnR5cGVJbmplY3Rpb25zLmdl
        dCh0eXBlKSB8fCBbXSk7CiAgICAgIGluamVjdGlvbnMgPSBpbmplY3Rpb25z
        LmNvbmNhdChjb250YWluZXIuaW5qZWN0aW9uc1tmdWxsTmFtZV0gfHwgW10p
        OwoKICAgICAgaW5qZWN0aW9ucyA9IGJ1aWxkSW5qZWN0aW9ucyhjb250YWlu
        ZXIsIGluamVjdGlvbnMpOwogICAgICBpbmplY3Rpb25zLl9kZWJ1Z0NvbnRh
        aW5lcktleSA9IGZ1bGxOYW1lOwogICAgICBpbmplY3Rpb25zLmNvbnRhaW5l
        ciA9IGNvbnRhaW5lcjsKCiAgICAgIHJldHVybiBpbmplY3Rpb25zOwogICAg
        fQoKICAgIGZ1bmN0aW9uIGZhY3RvcnlJbmplY3Rpb25zRm9yKGNvbnRhaW5l
        ciwgZnVsbE5hbWUpIHsKICAgICAgdmFyIHNwbGl0TmFtZSA9IGZ1bGxOYW1l
        LnNwbGl0KCI6IiksCiAgICAgICAgdHlwZSA9IHNwbGl0TmFtZVswXSwKICAg
        ICAgICBmYWN0b3J5SW5qZWN0aW9ucyA9IFtdOwoKICAgICAgZmFjdG9yeUlu
        amVjdGlvbnMgPSBmYWN0b3J5SW5qZWN0aW9ucy5jb25jYXQoY29udGFpbmVy
        LmZhY3RvcnlUeXBlSW5qZWN0aW9ucy5nZXQodHlwZSkgfHwgW10pOwogICAg
        ICBmYWN0b3J5SW5qZWN0aW9ucyA9IGZhY3RvcnlJbmplY3Rpb25zLmNvbmNh
        dChjb250YWluZXIuZmFjdG9yeUluamVjdGlvbnNbZnVsbE5hbWVdIHx8IFtd
        KTsKCiAgICAgIGZhY3RvcnlJbmplY3Rpb25zID0gYnVpbGRJbmplY3Rpb25z
        KGNvbnRhaW5lciwgZmFjdG9yeUluamVjdGlvbnMpOwogICAgICBmYWN0b3J5
        SW5qZWN0aW9ucy5fZGVidWdDb250YWluZXJLZXkgPSBmdWxsTmFtZTsKCiAg
        ICAgIHJldHVybiBmYWN0b3J5SW5qZWN0aW9uczsKICAgIH0KCiAgICBmdW5j
        dGlvbiBpbnN0YW50aWF0ZShjb250YWluZXIsIGZ1bGxOYW1lKSB7CiAgICAg
        IHZhciBmYWN0b3J5ID0gZmFjdG9yeUZvcihjb250YWluZXIsIGZ1bGxOYW1l
        KTsKCiAgICAgIGlmIChvcHRpb24oY29udGFpbmVyLCBmdWxsTmFtZSwgJ2lu
        c3RhbnRpYXRlJykgPT09IGZhbHNlKSB7CiAgICAgICAgcmV0dXJuIGZhY3Rv
        cnk7CiAgICAgIH0KCiAgICAgIGlmIChmYWN0b3J5KSB7CiAgICAgICAgaWYg
        KHR5cGVvZiBmYWN0b3J5LmV4dGVuZCA9PT0gJ2Z1bmN0aW9uJykgewogICAg
        ICAgICAgLy8gYXNzdW1lIHRoZSBmYWN0b3J5IHdhcyBleHRlbmRhYmxlIGFu
        ZCBpcyBhbHJlYWR5IGluamVjdGVkCiAgICAgICAgICByZXR1cm4gZmFjdG9y
        eS5jcmVhdGUoKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgLy8gYXNz
        dW1lIHRoZSBmYWN0b3J5IHdhcyBleHRlbmRhYmxlCiAgICAgICAgICAvLyB0
        byBjcmVhdGUgdGltZSBpbmplY3Rpb25zCiAgICAgICAgICAvLyBUT0RPOiBz
        dXBwb3J0IG5ldydpbmcgZm9yIGluc3RhbnRpYXRpb24gYW5kIG1lcmdlIGlu
        amVjdGlvbnMgZm9yIHB1cmUgSlMgRnVuY3Rpb25zCiAgICAgICAgICByZXR1
        cm4gZmFjdG9yeS5jcmVhdGUoaW5qZWN0aW9uc0Zvcihjb250YWluZXIsIGZ1
        bGxOYW1lKSk7CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgZnVuY3Rp
        b24gZWFjaERlc3Ryb3lhYmxlKGNvbnRhaW5lciwgY2FsbGJhY2spIHsKICAg
        ICAgY29udGFpbmVyLmNhY2hlLmVhY2hMb2NhbChmdW5jdGlvbihrZXksIHZh
        bHVlKSB7CiAgICAgICAgaWYgKG9wdGlvbihjb250YWluZXIsIGtleSwgJ2lu
        c3RhbnRpYXRlJykgPT09IGZhbHNlKSB7IHJldHVybjsgfQogICAgICAgIGNh
        bGxiYWNrKHZhbHVlKTsKICAgICAgfSk7CiAgICB9CgogICAgZnVuY3Rpb24g
        cmVzZXRDYWNoZShjb250YWluZXIpIHsKICAgICAgY29udGFpbmVyLmNhY2hl
        LmVhY2hMb2NhbChmdW5jdGlvbihrZXksIHZhbHVlKSB7CiAgICAgICAgaWYg
        KG9wdGlvbihjb250YWluZXIsIGtleSwgJ2luc3RhbnRpYXRlJykgPT09IGZh
        bHNlKSB7IHJldHVybjsgfQogICAgICAgIHZhbHVlLmRlc3Ryb3koKTsKICAg
        ICAgfSk7CiAgICAgIGNvbnRhaW5lci5jYWNoZS5kaWN0ID0ge307CiAgICB9
        CgogICAgZnVuY3Rpb24gYWRkVHlwZUluamVjdGlvbihydWxlcywgdHlwZSwg
        cHJvcGVydHksIGZ1bGxOYW1lKSB7CiAgICAgIHZhciBpbmplY3Rpb25zID0g
        cnVsZXMuZ2V0KHR5cGUpOwoKICAgICAgaWYgKCFpbmplY3Rpb25zKSB7CiAg
        ICAgICAgaW5qZWN0aW9ucyA9IFtdOwogICAgICAgIHJ1bGVzLnNldCh0eXBl
        LCBpbmplY3Rpb25zKTsKICAgICAgfQoKICAgICAgaW5qZWN0aW9ucy5wdXNo
        KHsKICAgICAgICBwcm9wZXJ0eTogcHJvcGVydHksCiAgICAgICAgZnVsbE5h
        bWU6IGZ1bGxOYW1lCiAgICAgIH0pOwogICAgfQoKICAgIGZ1bmN0aW9uIGFk
        ZEluamVjdGlvbihydWxlcywgZmFjdG9yeU5hbWUsIHByb3BlcnR5LCBpbmpl
        Y3Rpb25OYW1lKSB7CiAgICAgIHZhciBpbmplY3Rpb25zID0gcnVsZXNbZmFj
        dG9yeU5hbWVdID0gcnVsZXNbZmFjdG9yeU5hbWVdIHx8IFtdOwogICAgICBp
        bmplY3Rpb25zLnB1c2goeyBwcm9wZXJ0eTogcHJvcGVydHksIGZ1bGxOYW1l
        OiBpbmplY3Rpb25OYW1lIH0pOwogICAgfQoKICAgIHJldHVybiBDb250YWlu
        ZXI7Cn0pOwoKfSkoKTsKCihmdW5jdGlvbigpIHsKLypnbG9iYWxzIEVOViAq
        LwovKioKQG1vZHVsZSBlbWJlcgpAc3VibW9kdWxlIGVtYmVyLXJ1bnRpbWUK
        Ki8KCnZhciBpbmRleE9mID0gRW1iZXIuRW51bWVyYWJsZVV0aWxzLmluZGV4
        T2Y7CgovKioKIFRoaXMgd2lsbCBjb21wYXJlIHR3byBqYXZhc2NyaXB0IHZh
        bHVlcyBvZiBwb3NzaWJseSBkaWZmZXJlbnQgdHlwZXMuCiBJdCB3aWxsIHRl
        bGwgeW91IHdoaWNoIG9uZSBpcyBncmVhdGVyIHRoYW4gdGhlIG90aGVyIGJ5
        IHJldHVybmluZzoKCiAgLSAtMSBpZiB0aGUgZmlyc3QgaXMgc21hbGxlciB0
        aGFuIHRoZSBzZWNvbmQsCiAgLSAwIGlmIGJvdGggYXJlIGVxdWFsLAogIC0g
        MSBpZiB0aGUgZmlyc3QgaXMgZ3JlYXRlciB0aGFuIHRoZSBzZWNvbmQuCgog
        VGhlIG9yZGVyIGlzIGNhbGN1bGF0ZWQgYmFzZWQgb24gYEVtYmVyLk9SREVS
        X0RFRklOSVRJT05gLCBpZiB0eXBlcyBhcmUgZGlmZmVyZW50LgogSW4gY2Fz
        ZSB0aGV5IGhhdmUgdGhlIHNhbWUgdHlwZSBhbiBhcHByb3ByaWF0ZSBjb21w
        YXJpc29uIGZvciB0aGlzIHR5cGUgaXMgbWFkZS4KCiAgYGBgamF2YXNjcmlw
        dAogIEVtYmVyLmNvbXBhcmUoJ2hlbGxvJywgJ2hlbGxvJyk7ICAvLyAwCiAg
        RW1iZXIuY29tcGFyZSgnYWJjJywgJ2RmZycpOyAgICAgIC8vIC0xCiAgRW1i
        ZXIuY29tcGFyZSgyLCAxKTsgICAgICAgICAgICAgIC8vIDEKICBgYGAKCiBA
        bWV0aG9kIGNvbXBhcmUKIEBmb3IgRW1iZXIKIEBwYXJhbSB7T2JqZWN0fSB2
        IEZpcnN0IHZhbHVlIHRvIGNvbXBhcmUKIEBwYXJhbSB7T2JqZWN0fSB3IFNl
        Y29uZCB2YWx1ZSB0byBjb21wYXJlCiBAcmV0dXJuIHtOdW1iZXJ9IC0xIGlm
        IHYgPCB3LCAwIGlmIHYgPSB3IGFuZCAxIGlmIHYgPiB3LgoqLwpFbWJlci5j
        b21wYXJlID0gZnVuY3Rpb24gY29tcGFyZSh2LCB3KSB7CiAgaWYgKHYgPT09
        IHcpIHsgcmV0dXJuIDA7IH0KCiAgdmFyIHR5cGUxID0gRW1iZXIudHlwZU9m
        KHYpOwogIHZhciB0eXBlMiA9IEVtYmVyLnR5cGVPZih3KTsKCiAgdmFyIENv
        bXBhcmFibGUgPSBFbWJlci5Db21wYXJhYmxlOwogIGlmIChDb21wYXJhYmxl
        KSB7CiAgICBpZiAodHlwZTE9PT0naW5zdGFuY2UnICYmIENvbXBhcmFibGUu
        ZGV0ZWN0KHYuY29uc3RydWN0b3IpKSB7CiAgICAgIHJldHVybiB2LmNvbnN0
        cnVjdG9yLmNvbXBhcmUodiwgdyk7CiAgICB9CgogICAgaWYgKHR5cGUyID09
        PSAnaW5zdGFuY2UnICYmIENvbXBhcmFibGUuZGV0ZWN0KHcuY29uc3RydWN0
        b3IpKSB7CiAgICAgIHJldHVybiAxLXcuY29uc3RydWN0b3IuY29tcGFyZSh3
        LCB2KTsKICAgIH0KICB9CgogIC8vIElmIHdlIGhhdmVuJ3QgeWV0IGdlbmVy
        YXRlZCBhIHJldmVyc2UtbWFwcGluZyBvZiBFbWJlci5PUkRFUl9ERUZJTklU
        SU9OLAogIC8vIGRvIHNvIG5vdy4KICB2YXIgbWFwcGluZyA9IEVtYmVyLk9S
        REVSX0RFRklOSVRJT05fTUFQUElORzsKICBpZiAoIW1hcHBpbmcpIHsKICAg
        IHZhciBvcmRlciA9IEVtYmVyLk9SREVSX0RFRklOSVRJT047CiAgICBtYXBw
        aW5nID0gRW1iZXIuT1JERVJfREVGSU5JVElPTl9NQVBQSU5HID0ge307CiAg
        ICB2YXIgaWR4LCBsZW47CiAgICBmb3IgKGlkeCA9IDAsIGxlbiA9IG9yZGVy
        Lmxlbmd0aDsgaWR4IDwgbGVuOyAgKytpZHgpIHsKICAgICAgbWFwcGluZ1tv
        cmRlcltpZHhdXSA9IGlkeDsKICAgIH0KCiAgICAvLyBXZSBubyBsb25nZXIg
        bmVlZCBFbWJlci5PUkRFUl9ERUZJTklUSU9OLgogICAgZGVsZXRlIEVtYmVy
        Lk9SREVSX0RFRklOSVRJT047CiAgfQoKICB2YXIgdHlwZTFJbmRleCA9IG1h
        cHBpbmdbdHlwZTFdOwogIHZhciB0eXBlMkluZGV4ID0gbWFwcGluZ1t0eXBl
        Ml07CgogIGlmICh0eXBlMUluZGV4IDwgdHlwZTJJbmRleCkgeyByZXR1cm4g
        LTE7IH0KICBpZiAodHlwZTFJbmRleCA+IHR5cGUySW5kZXgpIHsgcmV0dXJu
        IDE7IH0KCiAgLy8gdHlwZXMgYXJlIGVxdWFsIC0gc28gd2UgaGF2ZSB0byBj
        aGVjayB2YWx1ZXMgbm93CiAgc3dpdGNoICh0eXBlMSkgewogICAgY2FzZSAn
        Ym9vbGVhbic6CiAgICBjYXNlICdudW1iZXInOgogICAgICBpZiAodiA8IHcp
        IHsgcmV0dXJuIC0xOyB9CiAgICAgIGlmICh2ID4gdykgeyByZXR1cm4gMTsg
        fQogICAgICByZXR1cm4gMDsKCiAgICBjYXNlICdzdHJpbmcnOgogICAgICB2
        YXIgY29tcCA9IHYubG9jYWxlQ29tcGFyZSh3KTsKICAgICAgaWYgKGNvbXAg
        PCAwKSB7IHJldHVybiAtMTsgfQogICAgICBpZiAoY29tcCA+IDApIHsgcmV0
        dXJuIDE7IH0KICAgICAgcmV0dXJuIDA7CgogICAgY2FzZSAnYXJyYXknOgog
        ICAgICB2YXIgdkxlbiA9IHYubGVuZ3RoOwogICAgICB2YXIgd0xlbiA9IHcu
        bGVuZ3RoOwogICAgICB2YXIgbCA9IE1hdGgubWluKHZMZW4sIHdMZW4pOwog
        ICAgICB2YXIgciA9IDA7CiAgICAgIHZhciBpID0gMDsKICAgICAgd2hpbGUg
        KHIgPT09IDAgJiYgaSA8IGwpIHsKICAgICAgICByID0gY29tcGFyZSh2W2ld
        LHdbaV0pOwogICAgICAgIGkrKzsKICAgICAgfQogICAgICBpZiAociAhPT0g
        MCkgeyByZXR1cm4gcjsgfQoKICAgICAgLy8gYWxsIGVsZW1lbnRzIGFyZSBl
        cXVhbCBub3cKICAgICAgLy8gc2hvcnRlciBhcnJheSBzaG91bGQgYmUgb3Jk
        ZXJlZCBmaXJzdAogICAgICBpZiAodkxlbiA8IHdMZW4pIHsgcmV0dXJuIC0x
        OyB9CiAgICAgIGlmICh2TGVuID4gd0xlbikgeyByZXR1cm4gMTsgfQogICAg
        ICAvLyBhcnJheXMgYXJlIGVxdWFsIG5vdwogICAgICByZXR1cm4gMDsKCiAg
        ICBjYXNlICdpbnN0YW5jZSc6CiAgICAgIGlmIChFbWJlci5Db21wYXJhYmxl
        ICYmIEVtYmVyLkNvbXBhcmFibGUuZGV0ZWN0KHYpKSB7CiAgICAgICAgcmV0
        dXJuIHYuY29tcGFyZSh2LCB3KTsKICAgICAgfQogICAgICByZXR1cm4gMDsK
        CiAgICBjYXNlICdkYXRlJzoKICAgICAgdmFyIHZOdW0gPSB2LmdldFRpbWUo
        KTsKICAgICAgdmFyIHdOdW0gPSB3LmdldFRpbWUoKTsKICAgICAgaWYgKHZO
        dW0gPCB3TnVtKSB7IHJldHVybiAtMTsgfQogICAgICBpZiAodk51bSA+IHdO
        dW0pIHsgcmV0dXJuIDE7IH0KICAgICAgcmV0dXJuIDA7CgogICAgZGVmYXVs
        dDoKICAgICAgcmV0dXJuIDA7CiAgfQp9OwoKZnVuY3Rpb24gX2NvcHkob2Jq
        LCBkZWVwLCBzZWVuLCBjb3BpZXMpIHsKICB2YXIgcmV0LCBsb2MsIGtleTsK
        CiAgLy8gcHJpbWl0aXZlIGRhdGEgdHlwZXMgYXJlIGltbXV0YWJsZSwganVz
        dCByZXR1cm4gdGhlbS4KICBpZiAoJ29iamVjdCcgIT09IHR5cGVvZiBvYmog
        fHwgb2JqPT09bnVsbCkgcmV0dXJuIG9iajsKCiAgLy8gYXZvaWQgY3ljbGlj
        YWwgbG9vcHMKICBpZiAoZGVlcCAmJiAobG9jPWluZGV4T2Yoc2Vlbiwgb2Jq
        KSk+PTApIHJldHVybiBjb3BpZXNbbG9jXTsKCiAgRW1iZXIuYXNzZXJ0KCdD
        YW5ub3QgY2xvbmUgYW4gRW1iZXIuT2JqZWN0IHRoYXQgZG9lcyBub3QgaW1w
        bGVtZW50IEVtYmVyLkNvcHlhYmxlJywgIShvYmogaW5zdGFuY2VvZiBFbWJl
        ci5PYmplY3QpIHx8IChFbWJlci5Db3B5YWJsZSAmJiBFbWJlci5Db3B5YWJs
        ZS5kZXRlY3Qob2JqKSkpOwoKICAvLyBJTVBPUlRBTlQ6IHRoaXMgc3BlY2lm
        aWMgdGVzdCB3aWxsIGRldGVjdCBhIG5hdGl2ZSBhcnJheSBvbmx5LiBBbnkg
        b3RoZXIKICAvLyBvYmplY3Qgd2lsbCBuZWVkIHRvIGltcGxlbWVudCBDb3B5
        YWJsZS4KICBpZiAoRW1iZXIudHlwZU9mKG9iaikgPT09ICdhcnJheScpIHsK
        ICAgIHJldCA9IG9iai5zbGljZSgpOwogICAgaWYgKGRlZXApIHsKICAgICAg
        bG9jID0gcmV0Lmxlbmd0aDsKICAgICAgd2hpbGUoLS1sb2M+PTApIHJldFts
        b2NdID0gX2NvcHkocmV0W2xvY10sIGRlZXAsIHNlZW4sIGNvcGllcyk7CiAg
        ICB9CiAgfSBlbHNlIGlmIChFbWJlci5Db3B5YWJsZSAmJiBFbWJlci5Db3B5
        YWJsZS5kZXRlY3Qob2JqKSkgewogICAgcmV0ID0gb2JqLmNvcHkoZGVlcCwg
        c2VlbiwgY29waWVzKTsKICB9IGVsc2UgewogICAgcmV0ID0ge307CiAgICBm
        b3Ioa2V5IGluIG9iaikgewogICAgICBpZiAoIW9iai5oYXNPd25Qcm9wZXJ0
        eShrZXkpKSBjb250aW51ZTsKCiAgICAgIC8vIFByZXZlbnRzIGJyb3dzZXJz
        IHRoYXQgZG9uJ3QgcmVzcGVjdCBub24tZW51bWVyYWJpbGl0eSBmcm9tCiAg
        ICAgIC8vIGNvcHlpbmcgaW50ZXJuYWwgRW1iZXIgcHJvcGVydGllcwogICAg
        ICBpZiAoa2V5LnN1YnN0cmluZygwLDIpID09PSAnX18nKSBjb250aW51ZTsK
        CiAgICAgIHJldFtrZXldID0gZGVlcCA/IF9jb3B5KG9ialtrZXldLCBkZWVw
        LCBzZWVuLCBjb3BpZXMpIDogb2JqW2tleV07CiAgICB9CiAgfQoKICBpZiAo
        ZGVlcCkgewogICAgc2Vlbi5wdXNoKG9iaik7CiAgICBjb3BpZXMucHVzaChy
        ZXQpOwogIH0KCiAgcmV0dXJuIHJldDsKfQoKLyoqCiAgQ3JlYXRlcyBhIGNs
        b25lIG9mIHRoZSBwYXNzZWQgb2JqZWN0LiBUaGlzIGZ1bmN0aW9uIGNhbiB0
        YWtlIGp1c3QgYWJvdXQKICBhbnkgdHlwZSBvZiBvYmplY3QgYW5kIGNyZWF0
        ZSBhIGNsb25lIG9mIGl0LCBpbmNsdWRpbmcgcHJpbWl0aXZlIHZhbHVlcwog
        ICh3aGljaCBhcmUgbm90IGFjdHVhbGx5IGNsb25lZCBiZWNhdXNlIHRoZXkg
        YXJlIGltbXV0YWJsZSkuCgogIElmIHRoZSBwYXNzZWQgb2JqZWN0IGltcGxl
        bWVudHMgdGhlIGBjbG9uZSgpYCBtZXRob2QsIHRoZW4gdGhpcyBmdW5jdGlv
        bgogIHdpbGwgc2ltcGx5IGNhbGwgdGhhdCBtZXRob2QgYW5kIHJldHVybiB0
        aGUgcmVzdWx0LgoKICBAbWV0aG9kIGNvcHkKICBAZm9yIEVtYmVyCiAgQHBh
        cmFtIHtPYmplY3R9IG9iaiBUaGUgb2JqZWN0IHRvIGNsb25lCiAgQHBhcmFt
        IHtCb29sZWFufSBkZWVwIElmIHRydWUsIGEgZGVlcCBjb3B5IG9mIHRoZSBv
        YmplY3QgaXMgbWFkZQogIEByZXR1cm4ge09iamVjdH0gVGhlIGNsb25lZCBv
        YmplY3QKKi8KRW1iZXIuY29weSA9IGZ1bmN0aW9uKG9iaiwgZGVlcCkgewog
        IC8vIGZhc3QgcGF0aHMKICBpZiAoJ29iamVjdCcgIT09IHR5cGVvZiBvYmog
        fHwgb2JqPT09bnVsbCkgcmV0dXJuIG9iajsgLy8gY2FuJ3QgY29weSBwcmlt
        aXRpdmVzCiAgaWYgKEVtYmVyLkNvcHlhYmxlICYmIEVtYmVyLkNvcHlhYmxl
        LmRldGVjdChvYmopKSByZXR1cm4gb2JqLmNvcHkoZGVlcCk7CiAgcmV0dXJu
        IF9jb3B5KG9iaiwgZGVlcCwgZGVlcCA/IFtdIDogbnVsbCwgZGVlcCA/IFtd
        IDogbnVsbCk7Cn07CgovKioKICBDb252ZW5pZW5jZSBtZXRob2QgdG8gaW5z
        cGVjdCBhbiBvYmplY3QuIFRoaXMgbWV0aG9kIHdpbGwgYXR0ZW1wdCB0bwog
        IGNvbnZlcnQgdGhlIG9iamVjdCBpbnRvIGEgdXNlZnVsIHN0cmluZyBkZXNj
        cmlwdGlvbi4KCiAgSXQgaXMgYSBwcmV0dHkgc2ltcGxlIGltcGxlbWVudGF0
        aW9uLiBJZiB5b3Ugd2FudCBzb21ldGhpbmcgbW9yZSByb2J1c3QsCiAgdXNl
        IHNvbWV0aGluZyBsaWtlIEpTRHVtcDogaHR0cHM6Ly9naXRodWIuY29tL05W
        L2pzRHVtcAoKICBAbWV0aG9kIGluc3BlY3QKICBAZm9yIEVtYmVyCiAgQHBh
        cmFtIHtPYmplY3R9IG9iaiBUaGUgb2JqZWN0IHlvdSB3YW50IHRvIGluc3Bl
        Y3QuCiAgQHJldHVybiB7U3RyaW5nfSBBIGRlc2NyaXB0aW9uIG9mIHRoZSBv
        YmplY3QKKi8KRW1iZXIuaW5zcGVjdCA9IGZ1bmN0aW9uKG9iaikgewogIHZh
        ciB0eXBlID0gRW1iZXIudHlwZU9mKG9iaik7CiAgaWYgKHR5cGUgPT09ICdh
        cnJheScpIHsKICAgIHJldHVybiAnWycgKyBvYmogKyAnXSc7CiAgfQogIGlm
        ICh0eXBlICE9PSAnb2JqZWN0JykgewogICAgcmV0dXJuIG9iaiArICcnOwog
        IH0KCiAgdmFyIHYsIHJldCA9IFtdOwogIGZvcih2YXIga2V5IGluIG9iaikg
        ewogICAgaWYgKG9iai5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7CiAgICAgIHYg
        PSBvYmpba2V5XTsKICAgICAgaWYgKHYgPT09ICd0b1N0cmluZycpIHsgY29u
        dGludWU7IH0gLy8gaWdub3JlIHVzZWxlc3MgaXRlbXMKICAgICAgaWYgKEVt
        YmVyLnR5cGVPZih2KSA9PT0gJ2Z1bmN0aW9uJykgeyB2ID0gImZ1bmN0aW9u
        KCkgeyAuLi4gfSI7IH0KICAgICAgcmV0LnB1c2goa2V5ICsgIjogIiArIHYp
        OwogICAgfQogIH0KICByZXR1cm4gInsiICsgcmV0LmpvaW4oIiwgIikgKyAi
        fSI7Cn07CgovKioKICBDb21wYXJlcyB0d28gb2JqZWN0cywgcmV0dXJuaW5n
        IHRydWUgaWYgdGhleSBhcmUgbG9naWNhbGx5IGVxdWFsLiBUaGlzIGlzCiAg
        YSBkZWVwZXIgY29tcGFyaXNvbiB0aGFuIGEgc2ltcGxlIHRyaXBsZSBlcXVh
        bC4gRm9yIHNldHMgaXQgd2lsbCBjb21wYXJlIHRoZQogIGludGVybmFsIG9i
        amVjdHMuIEZvciBhbnkgb3RoZXIgb2JqZWN0IHRoYXQgaW1wbGVtZW50cyBg
        aXNFcXVhbCgpYCBpdCB3aWxsCiAgcmVzcGVjdCB0aGF0IG1ldGhvZC4KCiAg
        YGBgamF2YXNjcmlwdAogIEVtYmVyLmlzRXF1YWwoJ2hlbGxvJywgJ2hlbGxv
        Jyk7ICAvLyB0cnVlCiAgRW1iZXIuaXNFcXVhbCgxLCAyKTsgICAgICAgICAg
        ICAgIC8vIGZhbHNlCiAgRW1iZXIuaXNFcXVhbChbNCwyXSwgWzQsMl0pOyAg
        ICAgIC8vIGZhbHNlCiAgYGBgCgogIEBtZXRob2QgaXNFcXVhbAogIEBmb3Ig
        RW1iZXIKICBAcGFyYW0ge09iamVjdH0gYSBmaXJzdCBvYmplY3QgdG8gY29t
        cGFyZQogIEBwYXJhbSB7T2JqZWN0fSBiIHNlY29uZCBvYmplY3QgdG8gY29t
        cGFyZQogIEByZXR1cm4ge0Jvb2xlYW59CiovCkVtYmVyLmlzRXF1YWwgPSBm
        dW5jdGlvbihhLCBiKSB7CiAgaWYgKGEgJiYgJ2Z1bmN0aW9uJz09PXR5cGVv
        ZiBhLmlzRXF1YWwpIHJldHVybiBhLmlzRXF1YWwoYik7CiAgcmV0dXJuIGEg
        PT09IGI7Cn07CgovLyBVc2VkIGJ5IEVtYmVyLmNvbXBhcmUKRW1iZXIuT1JE
        RVJfREVGSU5JVElPTiA9IEVtYmVyLkVOVi5PUkRFUl9ERUZJTklUSU9OIHx8
        IFsKICAndW5kZWZpbmVkJywKICAnbnVsbCcsCiAgJ2Jvb2xlYW4nLAogICdu
        dW1iZXInLAogICdzdHJpbmcnLAogICdhcnJheScsCiAgJ29iamVjdCcsCiAg
        J2luc3RhbmNlJywKICAnZnVuY3Rpb24nLAogICdjbGFzcycsCiAgJ2RhdGUn
        Cl07CgovKioKICBSZXR1cm5zIGFsbCBvZiB0aGUga2V5cyBkZWZpbmVkIG9u
        IGFuIG9iamVjdCBvciBoYXNoLiBUaGlzIGlzIHVzZWZ1bAogIHdoZW4gaW5z
        cGVjdGluZyBvYmplY3RzIGZvciBkZWJ1Z2dpbmcuIE9uIGJyb3dzZXJzIHRo
        YXQgc3VwcG9ydCBpdCwgdGhpcwogIHVzZXMgdGhlIG5hdGl2ZSBgT2JqZWN0
        LmtleXNgIGltcGxlbWVudGF0aW9uLgoKICBAbWV0aG9kIGtleXMKICBAZm9y
        IEVtYmVyCiAgQHBhcmFtIHtPYmplY3R9IG9iagogIEByZXR1cm4ge0FycmF5
        fSBBcnJheSBjb250YWluaW5nIGtleXMgb2Ygb2JqCiovCkVtYmVyLmtleXMg
        PSBPYmplY3Qua2V5czsKCmlmICghRW1iZXIua2V5cyB8fCBFbWJlci5jcmVh
        dGUuaXNTaW11bGF0ZWQpIHsKICB2YXIgcHJvdG90eXBlUHJvcGVydGllcyA9
        IFsKICAgICdjb25zdHJ1Y3RvcicsCiAgICAnaGFzT3duUHJvcGVydHknLAog
        ICAgJ2lzUHJvdG90eXBlT2YnLAogICAgJ3Byb3BlcnR5SXNFbnVtZXJhYmxl
        JywKICAgICd2YWx1ZU9mJywKICAgICd0b0xvY2FsZVN0cmluZycsCiAgICAn
        dG9TdHJpbmcnCiAgXSwKICBwdXNoUHJvcGVydHlOYW1lID0gZnVuY3Rpb24o
        b2JqLCBhcnJheSwga2V5KSB7CiAgICAvLyBQcmV2ZW50cyBicm93c2VycyB0
        aGF0IGRvbid0IHJlc3BlY3Qgbm9uLWVudW1lcmFiaWxpdHkgZnJvbQogICAg
        Ly8gY29weWluZyBpbnRlcm5hbCBFbWJlciBwcm9wZXJ0aWVzCiAgICBpZiAo
        a2V5LnN1YnN0cmluZygwLDIpID09PSAnX18nKSByZXR1cm47CiAgICBpZiAo
        a2V5ID09PSAnX3N1cGVyJykgcmV0dXJuOwogICAgaWYgKGluZGV4T2YoYXJy
        YXksIGtleSkgPj0gMCkgcmV0dXJuOwogICAgaWYgKCFvYmouaGFzT3duUHJv
        cGVydHkoa2V5KSkgcmV0dXJuOwoKICAgIGFycmF5LnB1c2goa2V5KTsKICB9
        OwoKICBFbWJlci5rZXlzID0gZnVuY3Rpb24ob2JqKSB7CiAgICB2YXIgcmV0
        ID0gW10sIGtleTsKICAgIGZvciAoa2V5IGluIG9iaikgewogICAgICBwdXNo
        UHJvcGVydHlOYW1lKG9iaiwgcmV0LCBrZXkpOwogICAgfQoKICAgIC8vIElF
        OCBkb2Vzbid0IGVudW1lcmF0ZSBwcm9wZXJ0eSB0aGF0IG5hbWVkIHRoZSBz
        YW1lIGFzIHByb3RvdHlwZSBwcm9wZXJ0aWVzLgogICAgZm9yICh2YXIgaSA9
        IDAsIGwgPSBwcm90b3R5cGVQcm9wZXJ0aWVzLmxlbmd0aDsgaSA8IGw7IGkr
        KykgewogICAgICBrZXkgPSBwcm90b3R5cGVQcm9wZXJ0aWVzW2ldOwoKICAg
        ICAgcHVzaFByb3BlcnR5TmFtZShvYmosIHJldCwga2V5KTsKICAgIH0KCiAg
        ICByZXR1cm4gcmV0OwogIH07Cn0KCn0pKCk7CgoKCihmdW5jdGlvbigpIHsK
        LyoqCkBtb2R1bGUgZW1iZXIKQHN1Ym1vZHVsZSBlbWJlci1ydW50aW1lCiov
        CgovLyAuLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4u
        Li4uLi4uLi4uLi4uLi4uLi4uCi8vIEhFTFBFUlMKLy8KCnZhciBnZXQgPSBF
        bWJlci5nZXQsIHNldCA9IEVtYmVyLnNldDsKdmFyIGFfc2xpY2UgPSBBcnJh
        eS5wcm90b3R5cGUuc2xpY2U7CnZhciBhX2luZGV4T2YgPSBFbWJlci5FbnVt
        ZXJhYmxlVXRpbHMuaW5kZXhPZjsKCnZhciBjb250ZXh0cyA9IFtdOwoKZnVu
        Y3Rpb24gcG9wQ3R4KCkgewogIHJldHVybiBjb250ZXh0cy5sZW5ndGg9PT0w
        ID8ge30gOiBjb250ZXh0cy5wb3AoKTsKfQoKZnVuY3Rpb24gcHVzaEN0eChj
        dHgpIHsKICBjb250ZXh0cy5wdXNoKGN0eCk7CiAgcmV0dXJuIG51bGw7Cn0K
        CmZ1bmN0aW9uIGl0ZXIoa2V5LCB2YWx1ZSkgewogIHZhciB2YWx1ZVByb3Zp
        ZGVkID0gYXJndW1lbnRzLmxlbmd0aCA9PT0gMjsKCiAgZnVuY3Rpb24gaShp
        dGVtKSB7CiAgICB2YXIgY3VyID0gZ2V0KGl0ZW0sIGtleSk7CiAgICByZXR1
        cm4gdmFsdWVQcm92aWRlZCA/IHZhbHVlPT09Y3VyIDogISFjdXI7CiAgfQog
        IHJldHVybiBpIDsKfQoKLyoqCiAgVGhpcyBtaXhpbiBkZWZpbmVzIHRoZSBj
        b21tb24gaW50ZXJmYWNlIGltcGxlbWVudGVkIGJ5IGVudW1lcmFibGUgb2Jq
        ZWN0cwogIGluIEVtYmVyLiBNb3N0IG9mIHRoZXNlIG1ldGhvZHMgZm9sbG93
        IHRoZSBzdGFuZGFyZCBBcnJheSBpdGVyYXRpb24KICBBUEkgZGVmaW5lZCB1
        cCB0byBKYXZhU2NyaXB0IDEuOCAoZXhjbHVkaW5nIGxhbmd1YWdlLXNwZWNp
        ZmljIGZlYXR1cmVzIHRoYXQKICBjYW5ub3QgYmUgZW11bGF0ZWQgaW4gb2xk
        ZXIgdmVyc2lvbnMgb2YgSmF2YVNjcmlwdCkuCgogIFRoaXMgbWl4aW4gaXMg
        YXBwbGllZCBhdXRvbWF0aWNhbGx5IHRvIHRoZSBBcnJheSBjbGFzcyBvbiBw
        YWdlIGxvYWQsIHNvIHlvdQogIGNhbiB1c2UgYW55IG9mIHRoZXNlIG1ldGhv
        ZHMgb24gc2ltcGxlIGFycmF5cy4gSWYgQXJyYXkgYWxyZWFkeSBpbXBsZW1l
        bnRzCiAgb25lIG9mIHRoZXNlIG1ldGhvZHMsIHRoZSBtaXhpbiB3aWxsIG5v
        dCBvdmVycmlkZSB0aGVtLgoKICAjIyBXcml0aW5nIFlvdXIgT3duIEVudW1l
        cmFibGUKCiAgVG8gbWFrZSB5b3VyIG93biBjdXN0b20gY2xhc3MgZW51bWVy
        YWJsZSwgeW91IG5lZWQgdHdvIGl0ZW1zOgoKICAxLiBZb3UgbXVzdCBoYXZl
        IGEgbGVuZ3RoIHByb3BlcnR5LiBUaGlzIHByb3BlcnR5IHNob3VsZCBjaGFu
        Z2Ugd2hlbmV2ZXIKICAgICB0aGUgbnVtYmVyIG9mIGl0ZW1zIGluIHlvdXIg
        ZW51bWVyYWJsZSBvYmplY3QgY2hhbmdlcy4gSWYgeW91IHVzaW5nIHRoaXMK
        ICAgICB3aXRoIGFuIGBFbWJlci5PYmplY3RgIHN1YmNsYXNzLCB5b3Ugc2hv
        dWxkIGJlIHN1cmUgdG8gY2hhbmdlIHRoZSBsZW5ndGgKICAgICBwcm9wZXJ0
        eSB1c2luZyBgc2V0KCkuYAoKICAyLiBJZiB5b3UgbXVzdCBpbXBsZW1lbnQg
        YG5leHRPYmplY3QoKS5gIFNlZSBkb2N1bWVudGF0aW9uLgoKICBPbmNlIHlv
        dSBoYXZlIHRoZXNlIHR3byBtZXRob2RzIGltcGxlbWVudCwgYXBwbHkgdGhl
        IGBFbWJlci5FbnVtZXJhYmxlYCBtaXhpbgogIHRvIHlvdXIgY2xhc3MgYW5k
        IHlvdSB3aWxsIGJlIGFibGUgdG8gZW51bWVyYXRlIHRoZSBjb250ZW50cyBv
        ZiB5b3VyIG9iamVjdAogIGxpa2UgYW55IG90aGVyIGNvbGxlY3Rpb24uCgog
        ICMjIFVzaW5nIEVtYmVyIEVudW1lcmF0aW9uIHdpdGggT3RoZXIgTGlicmFy
        aWVzCgogIE1hbnkgb3RoZXIgbGlicmFyaWVzIHByb3ZpZGUgc29tZSBraW5k
        IG9mIGl0ZXJhdG9yIG9yIGVudW1lcmF0aW9uIGxpa2UKICBmYWNpbGl0eS4g
        VGhpcyBpcyBvZnRlbiB3aGVyZSB0aGUgbW9zdCBjb21tb24gQVBJIGNvbmZs
        aWN0cyBvY2N1ci4KICBFbWJlcidzIEFQSSBpcyBkZXNpZ25lZCB0byBiZSBh
        cyBmcmllbmRseSBhcyBwb3NzaWJsZSB3aXRoIG90aGVyCiAgbGlicmFyaWVz
        IGJ5IGltcGxlbWVudGluZyBvbmx5IG1ldGhvZHMgdGhhdCBtb3N0bHkgY29y
        cmVzcG9uZCB0byB0aGUKICBKYXZhU2NyaXB0IDEuOCBBUEkuCgogIEBjbGFz
        cyBFbnVtZXJhYmxlCiAgQG5hbWVzcGFjZSBFbWJlcgogIEBzaW5jZSBFbWJl
        ciAwLjkKKi8KRW1iZXIuRW51bWVyYWJsZSA9IEVtYmVyLk1peGluLmNyZWF0
        ZSh7CgogIC8qKgogICAgSW1wbGVtZW50IHRoaXMgbWV0aG9kIHRvIG1ha2Ug
        eW91ciBjbGFzcyBlbnVtZXJhYmxlLgoKICAgIFRoaXMgbWV0aG9kIHdpbGwg
        YmUgY2FsbCByZXBlYXRlZGx5IGR1cmluZyBlbnVtZXJhdGlvbi4gVGhlIGlu
        ZGV4IHZhbHVlCiAgICB3aWxsIGFsd2F5cyBiZWdpbiB3aXRoIDAgYW5kIGlu
        Y3JlbWVudCBtb25vdG9uaWNhbGx5LiBZb3UgZG9uJ3QgaGF2ZSB0bwogICAg
        cmVseSBvbiB0aGUgaW5kZXggdmFsdWUgdG8gZGV0ZXJtaW5lIHdoYXQgb2Jq
        ZWN0IHRvIHJldHVybiwgYnV0IHlvdSBzaG91bGQKICAgIGFsd2F5cyBjaGVj
        ayB0aGUgdmFsdWUgYW5kIHN0YXJ0IGZyb20gdGhlIGJlZ2lubmluZyB3aGVu
        IHlvdSBzZWUgdGhlCiAgICByZXF1ZXN0ZWQgaW5kZXggaXMgMC4KCiAgICBU
        aGUgYHByZXZpb3VzT2JqZWN0YCBpcyB0aGUgb2JqZWN0IHRoYXQgd2FzIHJl
        dHVybmVkIGZyb20gdGhlIGxhc3QgY2FsbAogICAgdG8gYG5leHRPYmplY3Rg
        IGZvciB0aGUgY3VycmVudCBpdGVyYXRpb24uIFRoaXMgaXMgYSB1c2VmdWwg
        d2F5IHRvCiAgICBtYW5hZ2UgaXRlcmF0aW9uIGlmIHlvdSBhcmUgdHJhY2lu
        ZyBhIGxpbmtlZCBsaXN0LCBmb3IgZXhhbXBsZS4KCiAgICBGaW5hbGx5IHRo
        ZSBjb250ZXh0IHBhcmFtZXRlciB3aWxsIGFsd2F5cyBjb250YWluIGEgaGFz
        aCB5b3UgY2FuIHVzZSBhcwogICAgYSAic2NyYXRjaHBhZCIgdG8gbWFpbnRh
        aW4gYW55IG90aGVyIHN0YXRlIHlvdSBuZWVkIGluIG9yZGVyIHRvIGl0ZXJh
        dGUKICAgIHByb3Blcmx5LiBUaGUgY29udGV4dCBvYmplY3QgaXMgcmV1c2Vk
        IGFuZCBpcyBub3QgcmVzZXQgYmV0d2VlbgogICAgaXRlcmF0aW9ucyBzbyBt
        YWtlIHN1cmUgeW91IHNldHVwIHRoZSBjb250ZXh0IHdpdGggYSBmcmVzaCBz
        dGF0ZSB3aGVuZXZlcgogICAgdGhlIGluZGV4IHBhcmFtZXRlciBpcyAwLgoK
        ICAgIEdlbmVyYWxseSBpdGVyYXRvcnMgd2lsbCBjb250aW51ZSB0byBjYWxs
        IGBuZXh0T2JqZWN0YCB1bnRpbCB0aGUgaW5kZXgKICAgIHJlYWNoZXMgdGhl
        IHlvdXIgY3VycmVudCBsZW5ndGgtMS4gSWYgeW91IHJ1biBvdXQgb2YgZGF0
        YSBiZWZvcmUgdGhpcwogICAgdGltZSBmb3Igc29tZSByZWFzb24sIHlvdSBz
        aG91bGQgc2ltcGx5IHJldHVybiB1bmRlZmluZWQuCgogICAgVGhlIGRlZmF1
        bHQgaW1wbGVtZW50YXRpb24gb2YgdGhpcyBtZXRob2Qgc2ltcGx5IGxvb2tz
        IHVwIHRoZSBpbmRleC4KICAgIFRoaXMgd29ya3MgZ3JlYXQgb24gYW55IEFy
        cmF5LWxpa2Ugb2JqZWN0cy4KCiAgICBAbWV0aG9kIG5leHRPYmplY3QKICAg
        IEBwYXJhbSB7TnVtYmVyfSBpbmRleCB0aGUgY3VycmVudCBpbmRleCBvZiB0
        aGUgaXRlcmF0aW9uCiAgICBAcGFyYW0ge09iamVjdH0gcHJldmlvdXNPYmpl
        Y3QgdGhlIHZhbHVlIHJldHVybmVkIGJ5IHRoZSBsYXN0IGNhbGwgdG8KICAg
        ICAgYG5leHRPYmplY3RgLgogICAgQHBhcmFtIHtPYmplY3R9IGNvbnRleHQg
        YSBjb250ZXh0IG9iamVjdCB5b3UgY2FuIHVzZSB0byBtYWludGFpbiBzdGF0
        ZS4KICAgIEByZXR1cm4ge09iamVjdH0gdGhlIG5leHQgb2JqZWN0IGluIHRo
        ZSBpdGVyYXRpb24gb3IgdW5kZWZpbmVkCiAgKi8KICBuZXh0T2JqZWN0OiBF
        bWJlci5yZXF1aXJlZChGdW5jdGlvbiksCgogIC8qKgogICAgSGVscGVyIG1l
        dGhvZCByZXR1cm5zIHRoZSBmaXJzdCBvYmplY3QgZnJvbSBhIGNvbGxlY3Rp
        b24uIFRoaXMgaXMgdXN1YWxseQogICAgdXNlZCBieSBiaW5kaW5ncyBhbmQg
        b3RoZXIgcGFydHMgb2YgdGhlIGZyYW1ld29yayB0byBleHRyYWN0IGEgc2lu
        Z2xlCiAgICBvYmplY3QgaWYgdGhlIGVudW1lcmFibGUgY29udGFpbnMgb25s
        eSBvbmUgaXRlbS4KCiAgICBJZiB5b3Ugb3ZlcnJpZGUgdGhpcyBtZXRob2Qs
        IHlvdSBzaG91bGQgaW1wbGVtZW50IGl0IHNvIHRoYXQgaXQgd2lsbAogICAg
        YWx3YXlzIHJldHVybiB0aGUgc2FtZSB2YWx1ZSBlYWNoIHRpbWUgaXQgaXMg
        Y2FsbGVkLiBJZiB5b3VyIGVudW1lcmFibGUKICAgIGNvbnRhaW5zIG9ubHkg
        b25lIG9iamVjdCwgdGhpcyBtZXRob2Qgc2hvdWxkIGFsd2F5cyByZXR1cm4g
        dGhhdCBvYmplY3QuCiAgICBJZiB5b3VyIGVudW1lcmFibGUgaXMgZW1wdHks
        IHRoaXMgbWV0aG9kIHNob3VsZCByZXR1cm4gYHVuZGVmaW5lZGAuCgogICAg
        YGBgamF2YXNjcmlwdAogICAgdmFyIGFyciA9IFsiYSIsICJiIiwgImMiXTsK
        ICAgIGFyci5nZXQoJ2ZpcnN0T2JqZWN0Jyk7ICAvLyAiYSIKCiAgICB2YXIg
        YXJyID0gW107CiAgICBhcnIuZ2V0KCdmaXJzdE9iamVjdCcpOyAgLy8gdW5k
        ZWZpbmVkCiAgICBgYGAKCiAgICBAcHJvcGVydHkgZmlyc3RPYmplY3QKICAg
        IEByZXR1cm4ge09iamVjdH0gdGhlIG9iamVjdCBvciB1bmRlZmluZWQKICAq
        LwogIGZpcnN0T2JqZWN0OiBFbWJlci5jb21wdXRlZChmdW5jdGlvbigpIHsK
        ICAgIGlmIChnZXQodGhpcywgJ2xlbmd0aCcpPT09MCkgcmV0dXJuIHVuZGVm
        aW5lZCA7CgogICAgLy8gaGFuZGxlIGdlbmVyaWMgZW51bWVyYWJsZXMKICAg
        IHZhciBjb250ZXh0ID0gcG9wQ3R4KCksIHJldDsKICAgIHJldCA9IHRoaXMu
        bmV4dE9iamVjdCgwLCBudWxsLCBjb250ZXh0KTsKICAgIHB1c2hDdHgoY29u
        dGV4dCk7CiAgICByZXR1cm4gcmV0IDsKICB9KS5wcm9wZXJ0eSgnW10nKSwK
        CiAgLyoqCiAgICBIZWxwZXIgbWV0aG9kIHJldHVybnMgdGhlIGxhc3Qgb2Jq
        ZWN0IGZyb20gYSBjb2xsZWN0aW9uLiBJZiB5b3VyIGVudW1lcmFibGUKICAg
        IGNvbnRhaW5zIG9ubHkgb25lIG9iamVjdCwgdGhpcyBtZXRob2Qgc2hvdWxk
        IGFsd2F5cyByZXR1cm4gdGhhdCBvYmplY3QuCiAgICBJZiB5b3VyIGVudW1l
        cmFibGUgaXMgZW1wdHksIHRoaXMgbWV0aG9kIHNob3VsZCByZXR1cm4gYHVu
        ZGVmaW5lZGAuCgogICAgYGBgamF2YXNjcmlwdAogICAgdmFyIGFyciA9IFsi
        YSIsICJiIiwgImMiXTsKICAgIGFyci5nZXQoJ2xhc3RPYmplY3QnKTsgIC8v
        ICJjIgoKICAgIHZhciBhcnIgPSBbXTsKICAgIGFyci5nZXQoJ2xhc3RPYmpl
        Y3QnKTsgIC8vIHVuZGVmaW5lZAogICAgYGBgCgogICAgQHByb3BlcnR5IGxh
        c3RPYmplY3QKICAgIEByZXR1cm4ge09iamVjdH0gdGhlIGxhc3Qgb2JqZWN0
        IG9yIHVuZGVmaW5lZAogICovCiAgbGFzdE9iamVjdDogRW1iZXIuY29tcHV0
        ZWQoZnVuY3Rpb24oKSB7CiAgICB2YXIgbGVuID0gZ2V0KHRoaXMsICdsZW5n
        dGgnKTsKICAgIGlmIChsZW49PT0wKSByZXR1cm4gdW5kZWZpbmVkIDsKICAg
        IHZhciBjb250ZXh0ID0gcG9wQ3R4KCksIGlkeD0wLCBjdXIsIGxhc3QgPSBu
        dWxsOwogICAgZG8gewogICAgICBsYXN0ID0gY3VyOwogICAgICBjdXIgPSB0
        aGlzLm5leHRPYmplY3QoaWR4KyssIGxhc3QsIGNvbnRleHQpOwogICAgfSB3
        aGlsZSAoY3VyICE9PSB1bmRlZmluZWQpOwogICAgcHVzaEN0eChjb250ZXh0
        KTsKICAgIHJldHVybiBsYXN0OwogIH0pLnByb3BlcnR5KCdbXScpLAoKICAv
        KioKICAgIFJldHVybnMgYHRydWVgIGlmIHRoZSBwYXNzZWQgb2JqZWN0IGNh
        biBiZSBmb3VuZCBpbiB0aGUgcmVjZWl2ZXIuIFRoZQogICAgZGVmYXVsdCB2
        ZXJzaW9uIHdpbGwgaXRlcmF0ZSB0aHJvdWdoIHRoZSBlbnVtZXJhYmxlIHVu
        dGlsIHRoZSBvYmplY3QKICAgIGlzIGZvdW5kLiBZb3UgbWF5IHdhbnQgdG8g
        b3ZlcnJpZGUgdGhpcyB3aXRoIGEgbW9yZSBlZmZpY2llbnQgdmVyc2lvbi4K
        CiAgICBgYGBqYXZhc2NyaXB0CiAgICB2YXIgYXJyID0gWyJhIiwgImIiLCAi
        YyJdOwogICAgYXJyLmNvbnRhaW5zKCJhIik7IC8vIHRydWUKICAgIGFyci5j
        b250YWlucygieiIpOyAvLyBmYWxzZQogICAgYGBgCgogICAgQG1ldGhvZCBj
        b250YWlucwogICAgQHBhcmFtIHtPYmplY3R9IG9iaiBUaGUgb2JqZWN0IHRv
        IHNlYXJjaCBmb3IuCiAgICBAcmV0dXJuIHtCb29sZWFufSBgdHJ1ZWAgaWYg
        b2JqZWN0IGlzIGZvdW5kIGluIGVudW1lcmFibGUuCiAgKi8KICBjb250YWlu
        czogZnVuY3Rpb24ob2JqKSB7CiAgICByZXR1cm4gdGhpcy5maW5kKGZ1bmN0
        aW9uKGl0ZW0pIHsgcmV0dXJuIGl0ZW09PT1vYmo7IH0pICE9PSB1bmRlZmlu
        ZWQ7CiAgfSwKCiAgLyoqCiAgICBJdGVyYXRlcyB0aHJvdWdoIHRoZSBlbnVt
        ZXJhYmxlLCBjYWxsaW5nIHRoZSBwYXNzZWQgZnVuY3Rpb24gb24gZWFjaAog
        ICAgaXRlbS4gVGhpcyBtZXRob2QgY29ycmVzcG9uZHMgdG8gdGhlIGBmb3JF
        YWNoKClgIG1ldGhvZCBkZWZpbmVkIGluCiAgICBKYXZhU2NyaXB0IDEuNi4K
        CiAgICBUaGUgY2FsbGJhY2sgbWV0aG9kIHlvdSBwcm92aWRlIHNob3VsZCBo
        YXZlIHRoZSBmb2xsb3dpbmcgc2lnbmF0dXJlIChhbGwKICAgIHBhcmFtZXRl
        cnMgYXJlIG9wdGlvbmFsKToKCiAgICBgYGBqYXZhc2NyaXB0CiAgICBmdW5j
        dGlvbihpdGVtLCBpbmRleCwgZW51bWVyYWJsZSk7CiAgICBgYGAKCiAgICAt
        IGBpdGVtYCBpcyB0aGUgY3VycmVudCBpdGVtIGluIHRoZSBpdGVyYXRpb24u
        CiAgICAtIGBpbmRleGAgaXMgdGhlIGN1cnJlbnQgaW5kZXggaW4gdGhlIGl0
        ZXJhdGlvbi4KICAgIC0gYGVudW1lcmFibGVgIGlzIHRoZSBlbnVtZXJhYmxl
        IG9iamVjdCBpdHNlbGYuCgogICAgTm90ZSB0aGF0IGluIGFkZGl0aW9uIHRv
        IGEgY2FsbGJhY2ssIHlvdSBjYW4gYWxzbyBwYXNzIGFuIG9wdGlvbmFsIHRh
        cmdldAogICAgb2JqZWN0IHRoYXQgd2lsbCBiZSBzZXQgYXMgYHRoaXNgIG9u
        IHRoZSBjb250ZXh0LiBUaGlzIGlzIGEgZ29vZCB3YXkKICAgIHRvIGdpdmUg
        eW91ciBpdGVyYXRvciBmdW5jdGlvbiBhY2Nlc3MgdG8gdGhlIGN1cnJlbnQg
        b2JqZWN0LgoKICAgIEBtZXRob2QgZm9yRWFjaAogICAgQHBhcmFtIHtGdW5j
        dGlvbn0gY2FsbGJhY2sgVGhlIGNhbGxiYWNrIHRvIGV4ZWN1dGUKICAgIEBw
        YXJhbSB7T2JqZWN0fSBbdGFyZ2V0XSBUaGUgdGFyZ2V0IG9iamVjdCB0byB1
        c2UKICAgIEByZXR1cm4ge09iamVjdH0gcmVjZWl2ZXIKICAqLwogIGZvckVh
        Y2g6IGZ1bmN0aW9uKGNhbGxiYWNrLCB0YXJnZXQpIHsKICAgIGlmICh0eXBl
        b2YgY2FsbGJhY2sgIT09ICJmdW5jdGlvbiIpIHRocm93IG5ldyBUeXBlRXJy
        b3IoKSA7CiAgICB2YXIgbGVuID0gZ2V0KHRoaXMsICdsZW5ndGgnKSwgbGFz
        dCA9IG51bGwsIGNvbnRleHQgPSBwb3BDdHgoKTsKCiAgICBpZiAodGFyZ2V0
        ID09PSB1bmRlZmluZWQpIHRhcmdldCA9IG51bGw7CgogICAgZm9yKHZhciBp
        ZHg9MDtpZHg8bGVuO2lkeCsrKSB7CiAgICAgIHZhciBuZXh0ID0gdGhpcy5u
        ZXh0T2JqZWN0KGlkeCwgbGFzdCwgY29udGV4dCkgOwogICAgICBjYWxsYmFj
        ay5jYWxsKHRhcmdldCwgbmV4dCwgaWR4LCB0aGlzKTsKICAgICAgbGFzdCA9
        IG5leHQgOwogICAgfQogICAgbGFzdCA9IG51bGwgOwogICAgY29udGV4dCA9
        IHB1c2hDdHgoY29udGV4dCk7CiAgICByZXR1cm4gdGhpcyA7CiAgfSwKCiAg
        LyoqCiAgICBBbGlhcyBmb3IgYG1hcEJ5YAoKICAgIEBtZXRob2QgZ2V0RWFj
        aAogICAgQHBhcmFtIHtTdHJpbmd9IGtleSBuYW1lIG9mIHRoZSBwcm9wZXJ0
        eQogICAgQHJldHVybiB7QXJyYXl9IFRoZSBtYXBwZWQgYXJyYXkuCiAgKi8K
        ICBnZXRFYWNoOiBmdW5jdGlvbihrZXkpIHsKICAgIHJldHVybiB0aGlzLm1h
        cEJ5KGtleSk7CiAgfSwKCiAgLyoqCiAgICBTZXRzIHRoZSB2YWx1ZSBvbiB0
        aGUgbmFtZWQgcHJvcGVydHkgZm9yIGVhY2ggbWVtYmVyLiBUaGlzIGlzIG1v
        cmUKICAgIGVmZmljaWVudCB0aGFuIHVzaW5nIG90aGVyIG1ldGhvZHMgZGVm
        aW5lZCBvbiB0aGlzIGhlbHBlci4gSWYgdGhlIG9iamVjdAogICAgaW1wbGVt
        ZW50cyBFbWJlci5PYnNlcnZhYmxlLCB0aGUgdmFsdWUgd2lsbCBiZSBjaGFu
        Z2VkIHRvIGBzZXQoKSxgIG90aGVyd2lzZQogICAgaXQgd2lsbCBiZSBzZXQg
        ZGlyZWN0bHkuIGBudWxsYCBvYmplY3RzIGFyZSBza2lwcGVkLgoKICAgIEBt
        ZXRob2Qgc2V0RWFjaAogICAgQHBhcmFtIHtTdHJpbmd9IGtleSBUaGUga2V5
        IHRvIHNldAogICAgQHBhcmFtIHtPYmplY3R9IHZhbHVlIFRoZSBvYmplY3Qg
        dG8gc2V0CiAgICBAcmV0dXJuIHtPYmplY3R9IHJlY2VpdmVyCiAgKi8KICBz
        ZXRFYWNoOiBmdW5jdGlvbihrZXksIHZhbHVlKSB7CiAgICByZXR1cm4gdGhp
        cy5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pIHsKICAgICAgc2V0KGl0ZW0sIGtl
        eSwgdmFsdWUpOwogICAgfSk7CiAgfSwKCiAgLyoqCiAgICBNYXBzIGFsbCBv
        ZiB0aGUgaXRlbXMgaW4gdGhlIGVudW1lcmF0aW9uIHRvIGFub3RoZXIgdmFs
        dWUsIHJldHVybmluZwogICAgYSBuZXcgYXJyYXkuIFRoaXMgbWV0aG9kIGNv
        cnJlc3BvbmRzIHRvIGBtYXAoKWAgZGVmaW5lZCBpbiBKYXZhU2NyaXB0IDEu
        Ni4KCiAgICBUaGUgY2FsbGJhY2sgbWV0aG9kIHlvdSBwcm92aWRlIHNob3Vs
        ZCBoYXZlIHRoZSBmb2xsb3dpbmcgc2lnbmF0dXJlIChhbGwKICAgIHBhcmFt
        ZXRlcnMgYXJlIG9wdGlvbmFsKToKCiAgICBgYGBqYXZhc2NyaXB0CiAgICBm
        dW5jdGlvbihpdGVtLCBpbmRleCwgZW51bWVyYWJsZSk7CiAgICBgYGAKCiAg
        ICAtIGBpdGVtYCBpcyB0aGUgY3VycmVudCBpdGVtIGluIHRoZSBpdGVyYXRp
        b24uCiAgICAtIGBpbmRleGAgaXMgdGhlIGN1cnJlbnQgaW5kZXggaW4gdGhl
        IGl0ZXJhdGlvbi4KICAgIC0gYGVudW1lcmFibGVgIGlzIHRoZSBlbnVtZXJh
        YmxlIG9iamVjdCBpdHNlbGYuCgogICAgSXQgc2hvdWxkIHJldHVybiB0aGUg
        bWFwcGVkIHZhbHVlLgoKICAgIE5vdGUgdGhhdCBpbiBhZGRpdGlvbiB0byBh
        IGNhbGxiYWNrLCB5b3UgY2FuIGFsc28gcGFzcyBhbiBvcHRpb25hbCB0YXJn
        ZXQKICAgIG9iamVjdCB0aGF0IHdpbGwgYmUgc2V0IGFzIGB0aGlzYCBvbiB0
        aGUgY29udGV4dC4gVGhpcyBpcyBhIGdvb2Qgd2F5CiAgICB0byBnaXZlIHlv
        dXIgaXRlcmF0b3IgZnVuY3Rpb24gYWNjZXNzIHRvIHRoZSBjdXJyZW50IG9i
        amVjdC4KCiAgICBAbWV0aG9kIG1hcAogICAgQHBhcmFtIHtGdW5jdGlvbn0g
        Y2FsbGJhY2sgVGhlIGNhbGxiYWNrIHRvIGV4ZWN1dGUKICAgIEBwYXJhbSB7
        T2JqZWN0fSBbdGFyZ2V0XSBUaGUgdGFyZ2V0IG9iamVjdCB0byB1c2UKICAg
        IEByZXR1cm4ge0FycmF5fSBUaGUgbWFwcGVkIGFycmF5LgogICovCiAgbWFw
        OiBmdW5jdGlvbihjYWxsYmFjaywgdGFyZ2V0KSB7CiAgICB2YXIgcmV0ID0g
        RW1iZXIuQSgpOwogICAgdGhpcy5mb3JFYWNoKGZ1bmN0aW9uKHgsIGlkeCwg
        aSkgewogICAgICByZXRbaWR4XSA9IGNhbGxiYWNrLmNhbGwodGFyZ2V0LCB4
        LCBpZHgsaSk7CiAgICB9KTsKICAgIHJldHVybiByZXQgOwogIH0sCgogIC8q
        KgogICAgU2ltaWxhciB0byBtYXAsIHRoaXMgc3BlY2lhbGl6ZWQgZnVuY3Rp
        b24gcmV0dXJucyB0aGUgdmFsdWUgb2YgdGhlIG5hbWVkCiAgICBwcm9wZXJ0
        eSBvbiBhbGwgaXRlbXMgaW4gdGhlIGVudW1lcmF0aW9uLgoKICAgIEBtZXRo
        b2QgbWFwQnkKICAgIEBwYXJhbSB7U3RyaW5nfSBrZXkgbmFtZSBvZiB0aGUg
        cHJvcGVydHkKICAgIEByZXR1cm4ge0FycmF5fSBUaGUgbWFwcGVkIGFycmF5
        LgogICovCiAgbWFwQnk6IGZ1bmN0aW9uKGtleSkgewogICAgcmV0dXJuIHRo
        aXMubWFwKGZ1bmN0aW9uKG5leHQpIHsKICAgICAgcmV0dXJuIGdldChuZXh0
        LCBrZXkpOwogICAgfSk7CiAgfSwKCiAgLyoqCiAgICBTaW1pbGFyIHRvIG1h
        cCwgdGhpcyBzcGVjaWFsaXplZCBmdW5jdGlvbiByZXR1cm5zIHRoZSB2YWx1
        ZSBvZiB0aGUgbmFtZWQKICAgIHByb3BlcnR5IG9uIGFsbCBpdGVtcyBpbiB0
        aGUgZW51bWVyYXRpb24uCgogICAgQG1ldGhvZCBtYXBQcm9wZXJ0eQogICAg
        QHBhcmFtIHtTdHJpbmd9IGtleSBuYW1lIG9mIHRoZSBwcm9wZXJ0eQogICAg
        QHJldHVybiB7QXJyYXl9IFRoZSBtYXBwZWQgYXJyYXkuCiAgICBAZGVwcmVj
        YXRlZCBVc2UgYG1hcEJ5YCBpbnN0ZWFkCiAgKi8KCiAgbWFwUHJvcGVydHk6
        IEVtYmVyLmFsaWFzTWV0aG9kKCdtYXBCeScpLAoKICAvKioKICAgIFJldHVy
        bnMgYW4gYXJyYXkgd2l0aCBhbGwgb2YgdGhlIGl0ZW1zIGluIHRoZSBlbnVt
        ZXJhdGlvbiB0aGF0IHRoZSBwYXNzZWQKICAgIGZ1bmN0aW9uIHJldHVybnMg
        dHJ1ZSBmb3IuIFRoaXMgbWV0aG9kIGNvcnJlc3BvbmRzIHRvIGBmaWx0ZXIo
        KWAgZGVmaW5lZCBpbgogICAgSmF2YVNjcmlwdCAxLjYuCgogICAgVGhlIGNh
        bGxiYWNrIG1ldGhvZCB5b3UgcHJvdmlkZSBzaG91bGQgaGF2ZSB0aGUgZm9s
        bG93aW5nIHNpZ25hdHVyZSAoYWxsCiAgICBwYXJhbWV0ZXJzIGFyZSBvcHRp
        b25hbCk6CgogICAgYGBgamF2YXNjcmlwdAogICAgZnVuY3Rpb24oaXRlbSwg
        aW5kZXgsIGVudW1lcmFibGUpOwogICAgYGBgCgogICAgLSBgaXRlbWAgaXMg
        dGhlIGN1cnJlbnQgaXRlbSBpbiB0aGUgaXRlcmF0aW9uLgogICAgLSBgaW5k
        ZXhgIGlzIHRoZSBjdXJyZW50IGluZGV4IGluIHRoZSBpdGVyYXRpb24uCiAg
        ICAtIGBlbnVtZXJhYmxlYCBpcyB0aGUgZW51bWVyYWJsZSBvYmplY3QgaXRz
        ZWxmLgoKICAgIEl0IHNob3VsZCByZXR1cm4gdGhlIGB0cnVlYCB0byBpbmNs
        dWRlIHRoZSBpdGVtIGluIHRoZSByZXN1bHRzLCBgZmFsc2VgCiAgICBvdGhl
        cndpc2UuCgogICAgTm90ZSB0aGF0IGluIGFkZGl0aW9uIHRvIGEgY2FsbGJh
        Y2ssIHlvdSBjYW4gYWxzbyBwYXNzIGFuIG9wdGlvbmFsIHRhcmdldAogICAg
        b2JqZWN0IHRoYXQgd2lsbCBiZSBzZXQgYXMgYHRoaXNgIG9uIHRoZSBjb250
        ZXh0LiBUaGlzIGlzIGEgZ29vZCB3YXkKICAgIHRvIGdpdmUgeW91ciBpdGVy
        YXRvciBmdW5jdGlvbiBhY2Nlc3MgdG8gdGhlIGN1cnJlbnQgb2JqZWN0LgoK
        ICAgIEBtZXRob2QgZmlsdGVyCiAgICBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxs
        YmFjayBUaGUgY2FsbGJhY2sgdG8gZXhlY3V0ZQogICAgQHBhcmFtIHtPYmpl
        Y3R9IFt0YXJnZXRdIFRoZSB0YXJnZXQgb2JqZWN0IHRvIHVzZQogICAgQHJl
        dHVybiB7QXJyYXl9IEEgZmlsdGVyZWQgYXJyYXkuCiAgKi8KICBmaWx0ZXI6
        IGZ1bmN0aW9uKGNhbGxiYWNrLCB0YXJnZXQpIHsKICAgIHZhciByZXQgPSBF
        bWJlci5BKCk7CiAgICB0aGlzLmZvckVhY2goZnVuY3Rpb24oeCwgaWR4LCBp
        KSB7CiAgICAgIGlmIChjYWxsYmFjay5jYWxsKHRhcmdldCwgeCwgaWR4LCBp
        KSkgcmV0LnB1c2goeCk7CiAgICB9KTsKICAgIHJldHVybiByZXQgOwogIH0s
        CgogIC8qKgogICAgUmV0dXJucyBhbiBhcnJheSB3aXRoIGFsbCBvZiB0aGUg
        aXRlbXMgaW4gdGhlIGVudW1lcmF0aW9uIHdoZXJlIHRoZSBwYXNzZWQKICAg
        IGZ1bmN0aW9uIHJldHVybnMgZmFsc2UgZm9yLiBUaGlzIG1ldGhvZCBpcyB0
        aGUgaW52ZXJzZSBvZiBmaWx0ZXIoKS4KCiAgICBUaGUgY2FsbGJhY2sgbWV0
        aG9kIHlvdSBwcm92aWRlIHNob3VsZCBoYXZlIHRoZSBmb2xsb3dpbmcgc2ln
        bmF0dXJlIChhbGwKICAgIHBhcmFtZXRlcnMgYXJlIG9wdGlvbmFsKToKCiAg
        ICAgICAgICBmdW5jdGlvbihpdGVtLCBpbmRleCwgZW51bWVyYWJsZSk7Cgog
        ICAgLSAqaXRlbSogaXMgdGhlIGN1cnJlbnQgaXRlbSBpbiB0aGUgaXRlcmF0
        aW9uLgogICAgLSAqaW5kZXgqIGlzIHRoZSBjdXJyZW50IGluZGV4IGluIHRo
        ZSBpdGVyYXRpb24KICAgIC0gKmVudW1lcmFibGUqIGlzIHRoZSBlbnVtZXJh
        YmxlIG9iamVjdCBpdHNlbGYuCgogICAgSXQgc2hvdWxkIHJldHVybiB0aGUg
        YSBmYWxzZXkgdmFsdWUgdG8gaW5jbHVkZSB0aGUgaXRlbSBpbiB0aGUgcmVz
        dWx0cy4KCiAgICBOb3RlIHRoYXQgaW4gYWRkaXRpb24gdG8gYSBjYWxsYmFj
        aywgeW91IGNhbiBhbHNvIHBhc3MgYW4gb3B0aW9uYWwgdGFyZ2V0CiAgICBv
        YmplY3QgdGhhdCB3aWxsIGJlIHNldCBhcyAidGhpcyIgb24gdGhlIGNvbnRl
        eHQuIFRoaXMgaXMgYSBnb29kIHdheQogICAgdG8gZ2l2ZSB5b3VyIGl0ZXJh
        dG9yIGZ1bmN0aW9uIGFjY2VzcyB0byB0aGUgY3VycmVudCBvYmplY3QuCgog
        ICAgQG1ldGhvZCByZWplY3QKICAgIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxi
        YWNrIFRoZSBjYWxsYmFjayB0byBleGVjdXRlCiAgICBAcGFyYW0ge09iamVj
        dH0gW3RhcmdldF0gVGhlIHRhcmdldCBvYmplY3QgdG8gdXNlCiAgICBAcmV0
        dXJuIHtBcnJheX0gQSByZWplY3RlZCBhcnJheS4KICAgKi8KICByZWplY3Q6
        IGZ1bmN0aW9uKGNhbGxiYWNrLCB0YXJnZXQpIHsKICAgIHJldHVybiB0aGlz
        LmZpbHRlcihmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuICEoY2FsbGJhY2su
        YXBwbHkodGFyZ2V0LCBhcmd1bWVudHMpKTsKICAgIH0pOwogIH0sCgogIC8q
        KgogICAgUmV0dXJucyBhbiBhcnJheSB3aXRoIGp1c3QgdGhlIGl0ZW1zIHdp
        dGggdGhlIG1hdGNoZWQgcHJvcGVydHkuIFlvdQogICAgY2FuIHBhc3MgYW4g
        b3B0aW9uYWwgc2Vjb25kIGFyZ3VtZW50IHdpdGggdGhlIHRhcmdldCB2YWx1
        ZS4gT3RoZXJ3aXNlCiAgICB0aGlzIHdpbGwgbWF0Y2ggYW55IHByb3BlcnR5
        IHRoYXQgZXZhbHVhdGVzIHRvIGB0cnVlYC4KCiAgICBAbWV0aG9kIGZpbHRl
        ckJ5CiAgICBAcGFyYW0ge1N0cmluZ30ga2V5IHRoZSBwcm9wZXJ0eSB0byB0
        ZXN0CiAgICBAcGFyYW0ge1N0cmluZ30gW3ZhbHVlXSBvcHRpb25hbCB2YWx1
        ZSB0byB0ZXN0IGFnYWluc3QuCiAgICBAcmV0dXJuIHtBcnJheX0gZmlsdGVy
        ZWQgYXJyYXkKICAqLwogIGZpbHRlckJ5OiBmdW5jdGlvbihrZXksIHZhbHVl
        KSB7CiAgICByZXR1cm4gdGhpcy5maWx0ZXIoaXRlci5hcHBseSh0aGlzLCBh
        cmd1bWVudHMpKTsKICB9LAoKICAvKioKICAgIFJldHVybnMgYW4gYXJyYXkg
        d2l0aCBqdXN0IHRoZSBpdGVtcyB3aXRoIHRoZSBtYXRjaGVkIHByb3BlcnR5
        LiBZb3UKICAgIGNhbiBwYXNzIGFuIG9wdGlvbmFsIHNlY29uZCBhcmd1bWVu
        dCB3aXRoIHRoZSB0YXJnZXQgdmFsdWUuIE90aGVyd2lzZQogICAgdGhpcyB3
        aWxsIG1hdGNoIGFueSBwcm9wZXJ0eSB0aGF0IGV2YWx1YXRlcyB0byBgdHJ1
        ZWAuCgogICAgQG1ldGhvZCBmaWx0ZXJQcm9wZXJ0eQogICAgQHBhcmFtIHtT
        dHJpbmd9IGtleSB0aGUgcHJvcGVydHkgdG8gdGVzdAogICAgQHBhcmFtIHtT
        dHJpbmd9IFt2YWx1ZV0gb3B0aW9uYWwgdmFsdWUgdG8gdGVzdCBhZ2FpbnN0
        LgogICAgQHJldHVybiB7QXJyYXl9IGZpbHRlcmVkIGFycmF5CiAgICBAZGVw
        cmVjYXRlZCBVc2UgYGZpbHRlckJ5YCBpbnN0ZWFkCiAgKi8KICBmaWx0ZXJQ
        cm9wZXJ0eTogRW1iZXIuYWxpYXNNZXRob2QoJ2ZpbHRlckJ5JyksCgogIC8q
        KgogICAgUmV0dXJucyBhbiBhcnJheSB3aXRoIHRoZSBpdGVtcyB0aGF0IGRv
        IG5vdCBoYXZlIHRydXRoeSB2YWx1ZXMgZm9yCiAgICBrZXkuICBZb3UgY2Fu
        IHBhc3MgYW4gb3B0aW9uYWwgc2Vjb25kIGFyZ3VtZW50IHdpdGggdGhlIHRh
        cmdldCB2YWx1ZS4gIE90aGVyd2lzZQogICAgdGhpcyB3aWxsIG1hdGNoIGFu
        eSBwcm9wZXJ0eSB0aGF0IGV2YWx1YXRlcyB0byBmYWxzZS4KCiAgICBAbWV0
        aG9kIHJlamVjdEJ5CiAgICBAcGFyYW0ge1N0cmluZ30ga2V5IHRoZSBwcm9w
        ZXJ0eSB0byB0ZXN0CiAgICBAcGFyYW0ge1N0cmluZ30gW3ZhbHVlXSBvcHRp
        b25hbCB2YWx1ZSB0byB0ZXN0IGFnYWluc3QuCiAgICBAcmV0dXJuIHtBcnJh
        eX0gcmVqZWN0ZWQgYXJyYXkKICAqLwogIHJlamVjdEJ5OiBmdW5jdGlvbihr
        ZXksIHZhbHVlKSB7CiAgICB2YXIgZXhhY3RWYWx1ZSA9IGZ1bmN0aW9uKGl0
        ZW0pIHsgcmV0dXJuIGdldChpdGVtLCBrZXkpID09PSB2YWx1ZTsgfSwKICAg
        ICAgICBoYXNWYWx1ZSA9IGZ1bmN0aW9uKGl0ZW0pIHsgcmV0dXJuICEhZ2V0
        KGl0ZW0sIGtleSk7IH0sCiAgICAgICAgdXNlID0gKGFyZ3VtZW50cy5sZW5n
        dGggPT09IDIgPyBleGFjdFZhbHVlIDogaGFzVmFsdWUpOwoKICAgIHJldHVy
        biB0aGlzLnJlamVjdCh1c2UpOwogIH0sCgogIC8qKgogICAgUmV0dXJucyBh
        biBhcnJheSB3aXRoIHRoZSBpdGVtcyB0aGF0IGRvIG5vdCBoYXZlIHRydXRo
        eSB2YWx1ZXMgZm9yCiAgICBrZXkuICBZb3UgY2FuIHBhc3MgYW4gb3B0aW9u
        YWwgc2Vjb25kIGFyZ3VtZW50IHdpdGggdGhlIHRhcmdldCB2YWx1ZS4gIE90
        aGVyd2lzZQogICAgdGhpcyB3aWxsIG1hdGNoIGFueSBwcm9wZXJ0eSB0aGF0
        IGV2YWx1YXRlcyB0byBmYWxzZS4KCiAgICBAbWV0aG9kIHJlamVjdFByb3Bl
        cnR5CiAgICBAcGFyYW0ge1N0cmluZ30ga2V5IHRoZSBwcm9wZXJ0eSB0byB0
        ZXN0CiAgICBAcGFyYW0ge1N0cmluZ30gW3ZhbHVlXSBvcHRpb25hbCB2YWx1
        ZSB0byB0ZXN0IGFnYWluc3QuCiAgICBAcmV0dXJuIHtBcnJheX0gcmVqZWN0
        ZWQgYXJyYXkKICAgIEBkZXByZWNhdGVkIFVzZSBgcmVqZWN0QnlgIGluc3Rl
        YWQKICAqLwogIHJlamVjdFByb3BlcnR5OiBFbWJlci5hbGlhc01ldGhvZCgn
        cmVqZWN0QnknKSwKCiAgLyoqCiAgICBSZXR1cm5zIHRoZSBmaXJzdCBpdGVt
        IGluIHRoZSBhcnJheSBmb3Igd2hpY2ggdGhlIGNhbGxiYWNrIHJldHVybnMg
        dHJ1ZS4KICAgIFRoaXMgbWV0aG9kIHdvcmtzIHNpbWlsYXIgdG8gdGhlIGBm
        aWx0ZXIoKWAgbWV0aG9kIGRlZmluZWQgaW4gSmF2YVNjcmlwdCAxLjYKICAg
        IGV4Y2VwdCB0aGF0IGl0IHdpbGwgc3RvcCB3b3JraW5nIG9uIHRoZSBhcnJh
        eSBvbmNlIGEgbWF0Y2ggaXMgZm91bmQuCgogICAgVGhlIGNhbGxiYWNrIG1l
        dGhvZCB5b3UgcHJvdmlkZSBzaG91bGQgaGF2ZSB0aGUgZm9sbG93aW5nIHNp
        Z25hdHVyZSAoYWxsCiAgICBwYXJhbWV0ZXJzIGFyZSBvcHRpb25hbCk6Cgog
        ICAgYGBgamF2YXNjcmlwdAogICAgZnVuY3Rpb24oaXRlbSwgaW5kZXgsIGVu
        dW1lcmFibGUpOwogICAgYGBgCgogICAgLSBgaXRlbWAgaXMgdGhlIGN1cnJl
        bnQgaXRlbSBpbiB0aGUgaXRlcmF0aW9uLgogICAgLSBgaW5kZXhgIGlzIHRo
        ZSBjdXJyZW50IGluZGV4IGluIHRoZSBpdGVyYXRpb24uCiAgICAtIGBlbnVt
        ZXJhYmxlYCBpcyB0aGUgZW51bWVyYWJsZSBvYmplY3QgaXRzZWxmLgoKICAg
        IEl0IHNob3VsZCByZXR1cm4gdGhlIGB0cnVlYCB0byBpbmNsdWRlIHRoZSBp
        dGVtIGluIHRoZSByZXN1bHRzLCBgZmFsc2VgCiAgICBvdGhlcndpc2UuCgog
        ICAgTm90ZSB0aGF0IGluIGFkZGl0aW9uIHRvIGEgY2FsbGJhY2ssIHlvdSBj
        YW4gYWxzbyBwYXNzIGFuIG9wdGlvbmFsIHRhcmdldAogICAgb2JqZWN0IHRo
        YXQgd2lsbCBiZSBzZXQgYXMgYHRoaXNgIG9uIHRoZSBjb250ZXh0LiBUaGlz
        IGlzIGEgZ29vZCB3YXkKICAgIHRvIGdpdmUgeW91ciBpdGVyYXRvciBmdW5j
        dGlvbiBhY2Nlc3MgdG8gdGhlIGN1cnJlbnQgb2JqZWN0LgoKICAgIEBtZXRo
        b2QgZmluZAogICAgQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2sgVGhlIGNh
        bGxiYWNrIHRvIGV4ZWN1dGUKICAgIEBwYXJhbSB7T2JqZWN0fSBbdGFyZ2V0
        XSBUaGUgdGFyZ2V0IG9iamVjdCB0byB1c2UKICAgIEByZXR1cm4ge09iamVj
        dH0gRm91bmQgaXRlbSBvciBgdW5kZWZpbmVkYC4KICAqLwogIGZpbmQ6IGZ1
        bmN0aW9uKGNhbGxiYWNrLCB0YXJnZXQpIHsKICAgIHZhciBsZW4gPSBnZXQo
        dGhpcywgJ2xlbmd0aCcpIDsKICAgIGlmICh0YXJnZXQgPT09IHVuZGVmaW5l
        ZCkgdGFyZ2V0ID0gbnVsbDsKCiAgICB2YXIgbGFzdCA9IG51bGwsIG5leHQs
        IGZvdW5kID0gZmFsc2UsIHJldCA7CiAgICB2YXIgY29udGV4dCA9IHBvcEN0
        eCgpOwogICAgZm9yKHZhciBpZHg9MDtpZHg8bGVuICYmICFmb3VuZDtpZHgr
        KykgewogICAgICBuZXh0ID0gdGhpcy5uZXh0T2JqZWN0KGlkeCwgbGFzdCwg
        Y29udGV4dCkgOwogICAgICBpZiAoZm91bmQgPSBjYWxsYmFjay5jYWxsKHRh
        cmdldCwgbmV4dCwgaWR4LCB0aGlzKSkgcmV0ID0gbmV4dCA7CiAgICAgIGxh
        c3QgPSBuZXh0IDsKICAgIH0KICAgIG5leHQgPSBsYXN0ID0gbnVsbCA7CiAg
        ICBjb250ZXh0ID0gcHVzaEN0eChjb250ZXh0KTsKICAgIHJldHVybiByZXQg
        OwogIH0sCgogIC8qKgogICAgUmV0dXJucyB0aGUgZmlyc3QgaXRlbSB3aXRo
        IGEgcHJvcGVydHkgbWF0Y2hpbmcgdGhlIHBhc3NlZCB2YWx1ZS4gWW91CiAg
        ICBjYW4gcGFzcyBhbiBvcHRpb25hbCBzZWNvbmQgYXJndW1lbnQgd2l0aCB0
        aGUgdGFyZ2V0IHZhbHVlLiBPdGhlcndpc2UKICAgIHRoaXMgd2lsbCBtYXRj
        aCBhbnkgcHJvcGVydHkgdGhhdCBldmFsdWF0ZXMgdG8gYHRydWVgLgoKICAg
        IFRoaXMgbWV0aG9kIHdvcmtzIG11Y2ggbGlrZSB0aGUgbW9yZSBnZW5lcmlj
        IGBmaW5kKClgIG1ldGhvZC4KCiAgICBAbWV0aG9kIGZpbmRCeQogICAgQHBh
        cmFtIHtTdHJpbmd9IGtleSB0aGUgcHJvcGVydHkgdG8gdGVzdAogICAgQHBh
        cmFtIHtTdHJpbmd9IFt2YWx1ZV0gb3B0aW9uYWwgdmFsdWUgdG8gdGVzdCBh
        Z2FpbnN0LgogICAgQHJldHVybiB7T2JqZWN0fSBmb3VuZCBpdGVtIG9yIGB1
        bmRlZmluZWRgCiAgKi8KICBmaW5kQnk6IGZ1bmN0aW9uKGtleSwgdmFsdWUp
        IHsKICAgIHJldHVybiB0aGlzLmZpbmQoaXRlci5hcHBseSh0aGlzLCBhcmd1
        bWVudHMpKTsKICB9LAoKICAvKioKICAgIFJldHVybnMgdGhlIGZpcnN0IGl0
        ZW0gd2l0aCBhIHByb3BlcnR5IG1hdGNoaW5nIHRoZSBwYXNzZWQgdmFsdWUu
        IFlvdQogICAgY2FuIHBhc3MgYW4gb3B0aW9uYWwgc2Vjb25kIGFyZ3VtZW50
        IHdpdGggdGhlIHRhcmdldCB2YWx1ZS4gT3RoZXJ3aXNlCiAgICB0aGlzIHdp
        bGwgbWF0Y2ggYW55IHByb3BlcnR5IHRoYXQgZXZhbHVhdGVzIHRvIGB0cnVl
        YC4KCiAgICBUaGlzIG1ldGhvZCB3b3JrcyBtdWNoIGxpa2UgdGhlIG1vcmUg
        Z2VuZXJpYyBgZmluZCgpYCBtZXRob2QuCgogICAgQG1ldGhvZCBmaW5kUHJv
        cGVydHkKICAgIEBwYXJhbSB7U3RyaW5nfSBrZXkgdGhlIHByb3BlcnR5IHRv
        IHRlc3QKICAgIEBwYXJhbSB7U3RyaW5nfSBbdmFsdWVdIG9wdGlvbmFsIHZh
        bHVlIHRvIHRlc3QgYWdhaW5zdC4KICAgIEByZXR1cm4ge09iamVjdH0gZm91
        bmQgaXRlbSBvciBgdW5kZWZpbmVkYAogICAgQGRlcHJlY2F0ZWQgVXNlIGBm
        aW5kQnlgIGluc3RlYWQKICAqLwogIGZpbmRQcm9wZXJ0eTogRW1iZXIuYWxp
        YXNNZXRob2QoJ2ZpbmRCeScpLAoKICAvKioKICAgIFJldHVybnMgYHRydWVg
        IGlmIHRoZSBwYXNzZWQgZnVuY3Rpb24gcmV0dXJucyB0cnVlIGZvciBldmVy
        eSBpdGVtIGluIHRoZQogICAgZW51bWVyYXRpb24uIFRoaXMgY29ycmVzcG9u
        ZHMgd2l0aCB0aGUgYGV2ZXJ5KClgIG1ldGhvZCBpbiBKYXZhU2NyaXB0IDEu
        Ni4KCiAgICBUaGUgY2FsbGJhY2sgbWV0aG9kIHlvdSBwcm92aWRlIHNob3Vs
        ZCBoYXZlIHRoZSBmb2xsb3dpbmcgc2lnbmF0dXJlIChhbGwKICAgIHBhcmFt
        ZXRlcnMgYXJlIG9wdGlvbmFsKToKCiAgICBgYGBqYXZhc2NyaXB0CiAgICBm
        dW5jdGlvbihpdGVtLCBpbmRleCwgZW51bWVyYWJsZSk7CiAgICBgYGAKCiAg
        ICAtIGBpdGVtYCBpcyB0aGUgY3VycmVudCBpdGVtIGluIHRoZSBpdGVyYXRp
        b24uCiAgICAtIGBpbmRleGAgaXMgdGhlIGN1cnJlbnQgaW5kZXggaW4gdGhl
        IGl0ZXJhdGlvbi4KICAgIC0gYGVudW1lcmFibGVgIGlzIHRoZSBlbnVtZXJh
        YmxlIG9iamVjdCBpdHNlbGYuCgogICAgSXQgc2hvdWxkIHJldHVybiB0aGUg
        YHRydWVgIG9yIGBmYWxzZWAuCgogICAgTm90ZSB0aGF0IGluIGFkZGl0aW9u
        IHRvIGEgY2FsbGJhY2ssIHlvdSBjYW4gYWxzbyBwYXNzIGFuIG9wdGlvbmFs
        IHRhcmdldAogICAgb2JqZWN0IHRoYXQgd2lsbCBiZSBzZXQgYXMgYHRoaXNg
        IG9uIHRoZSBjb250ZXh0LiBUaGlzIGlzIGEgZ29vZCB3YXkKICAgIHRvIGdp
        dmUgeW91ciBpdGVyYXRvciBmdW5jdGlvbiBhY2Nlc3MgdG8gdGhlIGN1cnJl
        bnQgb2JqZWN0LgoKICAgIEV4YW1wbGUgVXNhZ2U6CgogICAgYGBgamF2YXNj
        cmlwdAogICAgaWYgKHBlb3BsZS5ldmVyeShpc0VuZ2luZWVyKSkgeyBQYXlj
        aGVja3MuYWRkQmlnQm9udXMoKTsgfQogICAgYGBgCgogICAgQG1ldGhvZCBl
        dmVyeQogICAgQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2sgVGhlIGNhbGxi
        YWNrIHRvIGV4ZWN1dGUKICAgIEBwYXJhbSB7T2JqZWN0fSBbdGFyZ2V0XSBU
        aGUgdGFyZ2V0IG9iamVjdCB0byB1c2UKICAgIEByZXR1cm4ge0Jvb2xlYW59
        CiAgKi8KICBldmVyeTogZnVuY3Rpb24oY2FsbGJhY2ssIHRhcmdldCkgewog
        ICAgcmV0dXJuICF0aGlzLmZpbmQoZnVuY3Rpb24oeCwgaWR4LCBpKSB7CiAg
        ICAgIHJldHVybiAhY2FsbGJhY2suY2FsbCh0YXJnZXQsIHgsIGlkeCwgaSk7
        CiAgICB9KTsKICB9LAoKICAvKioKICAgIFJldHVybnMgYHRydWVgIGlmIHRo
        ZSBwYXNzZWQgcHJvcGVydHkgcmVzb2x2ZXMgdG8gYHRydWVgIGZvciBhbGwg
        aXRlbXMgaW4KICAgIHRoZSBlbnVtZXJhYmxlLiBUaGlzIG1ldGhvZCBpcyBv
        ZnRlbiBzaW1wbGVyL2Zhc3RlciB0aGFuIHVzaW5nIGEgY2FsbGJhY2suCgog
        ICAgQG1ldGhvZCBldmVyeUJ5CiAgICBAcGFyYW0ge1N0cmluZ30ga2V5IHRo
        ZSBwcm9wZXJ0eSB0byB0ZXN0CiAgICBAcGFyYW0ge1N0cmluZ30gW3ZhbHVl
        XSBvcHRpb25hbCB2YWx1ZSB0byB0ZXN0IGFnYWluc3QuCiAgICBAcmV0dXJu
        IHtCb29sZWFufQogICovCiAgZXZlcnlCeTogZnVuY3Rpb24oa2V5LCB2YWx1
        ZSkgewogICAgcmV0dXJuIHRoaXMuZXZlcnkoaXRlci5hcHBseSh0aGlzLCBh
        cmd1bWVudHMpKTsKICB9LAoKICAvKioKICAgIFJldHVybnMgYHRydWVgIGlm
        IHRoZSBwYXNzZWQgcHJvcGVydHkgcmVzb2x2ZXMgdG8gYHRydWVgIGZvciBh
        bGwgaXRlbXMgaW4KICAgIHRoZSBlbnVtZXJhYmxlLiBUaGlzIG1ldGhvZCBp
        cyBvZnRlbiBzaW1wbGVyL2Zhc3RlciB0aGFuIHVzaW5nIGEgY2FsbGJhY2su
        CgogICAgQG1ldGhvZCBldmVyeVByb3BlcnR5CiAgICBAcGFyYW0ge1N0cmlu
        Z30ga2V5IHRoZSBwcm9wZXJ0eSB0byB0ZXN0CiAgICBAcGFyYW0ge1N0cmlu
        Z30gW3ZhbHVlXSBvcHRpb25hbCB2YWx1ZSB0byB0ZXN0IGFnYWluc3QuCiAg
        ICBAcmV0dXJuIHtCb29sZWFufQogICAgQGRlcHJlY2F0ZWQgVXNlIGBldmVy
        eUJ5YCBpbnN0ZWFkCiAgKi8KICBldmVyeVByb3BlcnR5OiBFbWJlci5hbGlh
        c01ldGhvZCgnZXZlcnlCeScpLAoKICAvKioKICAgIFJldHVybnMgYHRydWVg
        IGlmIHRoZSBwYXNzZWQgZnVuY3Rpb24gcmV0dXJucyB0cnVlIGZvciBhbnkg
        aXRlbSBpbiB0aGUKICAgIGVudW1lcmF0aW9uLiBUaGlzIGNvcnJlc3BvbmRz
        IHdpdGggdGhlIGBzb21lKClgIG1ldGhvZCBpbiBKYXZhU2NyaXB0IDEuNi4K
        CiAgICBUaGUgY2FsbGJhY2sgbWV0aG9kIHlvdSBwcm92aWRlIHNob3VsZCBo
        YXZlIHRoZSBmb2xsb3dpbmcgc2lnbmF0dXJlIChhbGwKICAgIHBhcmFtZXRl
        cnMgYXJlIG9wdGlvbmFsKToKCiAgICBgYGBqYXZhc2NyaXB0CiAgICBmdW5j
        dGlvbihpdGVtLCBpbmRleCwgZW51bWVyYWJsZSk7CiAgICBgYGAKCiAgICAt
        IGBpdGVtYCBpcyB0aGUgY3VycmVudCBpdGVtIGluIHRoZSBpdGVyYXRpb24u
        CiAgICAtIGBpbmRleGAgaXMgdGhlIGN1cnJlbnQgaW5kZXggaW4gdGhlIGl0
        ZXJhdGlvbi4KICAgIC0gYGVudW1lcmFibGVgIGlzIHRoZSBlbnVtZXJhYmxl
        IG9iamVjdCBpdHNlbGYuCgogICAgSXQgc2hvdWxkIHJldHVybiB0aGUgYHRy
        dWVgIHRvIGluY2x1ZGUgdGhlIGl0ZW0gaW4gdGhlIHJlc3VsdHMsIGBmYWxz
        ZWAKICAgIG90aGVyd2lzZS4KCiAgICBOb3RlIHRoYXQgaW4gYWRkaXRpb24g
        dG8gYSBjYWxsYmFjaywgeW91IGNhbiBhbHNvIHBhc3MgYW4gb3B0aW9uYWwg
        dGFyZ2V0CiAgICBvYmplY3QgdGhhdCB3aWxsIGJlIHNldCBhcyBgdGhpc2Ag
        b24gdGhlIGNvbnRleHQuIFRoaXMgaXMgYSBnb29kIHdheQogICAgdG8gZ2l2
        ZSB5b3VyIGl0ZXJhdG9yIGZ1bmN0aW9uIGFjY2VzcyB0byB0aGUgY3VycmVu
        dCBvYmplY3QuCgogICAgVXNhZ2UgRXhhbXBsZToKCiAgICBgYGBqYXZhc2Ny
        aXB0CiAgICBpZiAocGVvcGxlLmFueShpc01hbmFnZXIpKSB7IFBheWNoZWNr
        cy5hZGRCaWdnZXJCb251cygpOyB9CiAgICBgYGAKCiAgICBAbWV0aG9kIGFu
        eQogICAgQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2sgVGhlIGNhbGxiYWNr
        IHRvIGV4ZWN1dGUKICAgIEBwYXJhbSB7T2JqZWN0fSBbdGFyZ2V0XSBUaGUg
        dGFyZ2V0IG9iamVjdCB0byB1c2UKICAgIEByZXR1cm4ge0Jvb2xlYW59IGB0
        cnVlYCBpZiB0aGUgcGFzc2VkIGZ1bmN0aW9uIHJldHVybnMgYHRydWVgIGZv
        ciBhbnkgaXRlbQogICovCiAgYW55OiBmdW5jdGlvbihjYWxsYmFjaywgdGFy
        Z2V0KSB7CiAgICByZXR1cm4gISF0aGlzLmZpbmQoZnVuY3Rpb24oeCwgaWR4
        LCBpKSB7CiAgICAgIHJldHVybiAhIWNhbGxiYWNrLmNhbGwodGFyZ2V0LCB4
        LCBpZHgsIGkpOwogICAgfSk7CiAgfSwKCiAgLyoqCiAgICBSZXR1cm5zIGB0
        cnVlYCBpZiB0aGUgcGFzc2VkIGZ1bmN0aW9uIHJldHVybnMgdHJ1ZSBmb3Ig
        YW55IGl0ZW0gaW4gdGhlCiAgICBlbnVtZXJhdGlvbi4gVGhpcyBjb3JyZXNw
        b25kcyB3aXRoIHRoZSBgc29tZSgpYCBtZXRob2QgaW4gSmF2YVNjcmlwdCAx
        LjYuCgogICAgVGhlIGNhbGxiYWNrIG1ldGhvZCB5b3UgcHJvdmlkZSBzaG91
        bGQgaGF2ZSB0aGUgZm9sbG93aW5nIHNpZ25hdHVyZSAoYWxsCiAgICBwYXJh
        bWV0ZXJzIGFyZSBvcHRpb25hbCk6CgogICAgYGBgamF2YXNjcmlwdAogICAg
        ZnVuY3Rpb24oaXRlbSwgaW5kZXgsIGVudW1lcmFibGUpOwogICAgYGBgCgog
        ICAgLSBgaXRlbWAgaXMgdGhlIGN1cnJlbnQgaXRlbSBpbiB0aGUgaXRlcmF0
        aW9uLgogICAgLSBgaW5kZXhgIGlzIHRoZSBjdXJyZW50IGluZGV4IGluIHRo
        ZSBpdGVyYXRpb24uCiAgICAtIGBlbnVtZXJhYmxlYCBpcyB0aGUgZW51bWVy
        YWJsZSBvYmplY3QgaXRzZWxmLgoKICAgIEl0IHNob3VsZCByZXR1cm4gdGhl
        IGB0cnVlYCB0byBpbmNsdWRlIHRoZSBpdGVtIGluIHRoZSByZXN1bHRzLCBg
        ZmFsc2VgCiAgICBvdGhlcndpc2UuCgogICAgTm90ZSB0aGF0IGluIGFkZGl0
        aW9uIHRvIGEgY2FsbGJhY2ssIHlvdSBjYW4gYWxzbyBwYXNzIGFuIG9wdGlv
        bmFsIHRhcmdldAogICAgb2JqZWN0IHRoYXQgd2lsbCBiZSBzZXQgYXMgYHRo
        aXNgIG9uIHRoZSBjb250ZXh0LiBUaGlzIGlzIGEgZ29vZCB3YXkKICAgIHRv
        IGdpdmUgeW91ciBpdGVyYXRvciBmdW5jdGlvbiBhY2Nlc3MgdG8gdGhlIGN1
        cnJlbnQgb2JqZWN0LgoKICAgIFVzYWdlIEV4YW1wbGU6CgogICAgYGBgamF2
        YXNjcmlwdAogICAgaWYgKHBlb3BsZS5zb21lKGlzTWFuYWdlcikpIHsgUGF5
        Y2hlY2tzLmFkZEJpZ2dlckJvbnVzKCk7IH0KICAgIGBgYAoKICAgIEBtZXRo
        b2Qgc29tZQogICAgQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2sgVGhlIGNh
        bGxiYWNrIHRvIGV4ZWN1dGUKICAgIEBwYXJhbSB7T2JqZWN0fSBbdGFyZ2V0
        XSBUaGUgdGFyZ2V0IG9iamVjdCB0byB1c2UKICAgIEByZXR1cm4ge0Jvb2xl
        YW59IGB0cnVlYCBpZiB0aGUgcGFzc2VkIGZ1bmN0aW9uIHJldHVybnMgYHRy
        dWVgIGZvciBhbnkgaXRlbQogICAgQGRlcHJlY2F0ZWQgVXNlIGBhbnlgIGlu
        c3RlYWQKICAqLwogIHNvbWU6IEVtYmVyLmFsaWFzTWV0aG9kKCdhbnknKSwK
        CiAgLyoqCiAgICBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgcGFzc2VkIHByb3Bl
        cnR5IHJlc29sdmVzIHRvIGB0cnVlYCBmb3IgYW55IGl0ZW0gaW4KICAgIHRo
        ZSBlbnVtZXJhYmxlLiBUaGlzIG1ldGhvZCBpcyBvZnRlbiBzaW1wbGVyL2Zh
        c3RlciB0aGFuIHVzaW5nIGEgY2FsbGJhY2suCgogICAgQG1ldGhvZCBhbnlC
        eQogICAgQHBhcmFtIHtTdHJpbmd9IGtleSB0aGUgcHJvcGVydHkgdG8gdGVz
        dAogICAgQHBhcmFtIHtTdHJpbmd9IFt2YWx1ZV0gb3B0aW9uYWwgdmFsdWUg
        dG8gdGVzdCBhZ2FpbnN0LgogICAgQHJldHVybiB7Qm9vbGVhbn0gYHRydWVg
        IGlmIHRoZSBwYXNzZWQgZnVuY3Rpb24gcmV0dXJucyBgdHJ1ZWAgZm9yIGFu
        eSBpdGVtCiAgKi8KICBhbnlCeTogZnVuY3Rpb24oa2V5LCB2YWx1ZSkgewog
        ICAgcmV0dXJuIHRoaXMuYW55KGl0ZXIuYXBwbHkodGhpcywgYXJndW1lbnRz
        KSk7CiAgfSwKCiAgLyoqCiAgICBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgcGFz
        c2VkIHByb3BlcnR5IHJlc29sdmVzIHRvIGB0cnVlYCBmb3IgYW55IGl0ZW0g
        aW4KICAgIHRoZSBlbnVtZXJhYmxlLiBUaGlzIG1ldGhvZCBpcyBvZnRlbiBz
        aW1wbGVyL2Zhc3RlciB0aGFuIHVzaW5nIGEgY2FsbGJhY2suCgogICAgQG1l
        dGhvZCBzb21lUHJvcGVydHkKICAgIEBwYXJhbSB7U3RyaW5nfSBrZXkgdGhl
        IHByb3BlcnR5IHRvIHRlc3QKICAgIEBwYXJhbSB7U3RyaW5nfSBbdmFsdWVd
        IG9wdGlvbmFsIHZhbHVlIHRvIHRlc3QgYWdhaW5zdC4KICAgIEByZXR1cm4g
        e0Jvb2xlYW59IGB0cnVlYCBpZiB0aGUgcGFzc2VkIGZ1bmN0aW9uIHJldHVy
        bnMgYHRydWVgIGZvciBhbnkgaXRlbQogICAgQGRlcHJlY2F0ZWQgVXNlIGBh
        bnlCeWAgaW5zdGVhZAogICovCiAgc29tZVByb3BlcnR5OiBFbWJlci5hbGlh
        c01ldGhvZCgnYW55QnknKSwKCiAgLyoqCiAgICBUaGlzIHdpbGwgY29tYmlu
        ZSB0aGUgdmFsdWVzIG9mIHRoZSBlbnVtZXJhdG9yIGludG8gYSBzaW5nbGUg
        dmFsdWUuIEl0CiAgICBpcyBhIHVzZWZ1bCB3YXkgdG8gY29sbGVjdCBhIHN1
        bW1hcnkgdmFsdWUgZnJvbSBhbiBlbnVtZXJhdGlvbi4gVGhpcwogICAgY29y
        cmVzcG9uZHMgdG8gdGhlIGByZWR1Y2UoKWAgbWV0aG9kIGRlZmluZWQgaW4g
        SmF2YVNjcmlwdCAxLjguCgogICAgVGhlIGNhbGxiYWNrIG1ldGhvZCB5b3Ug
        cHJvdmlkZSBzaG91bGQgaGF2ZSB0aGUgZm9sbG93aW5nIHNpZ25hdHVyZSAo
        YWxsCiAgICBwYXJhbWV0ZXJzIGFyZSBvcHRpb25hbCk6CgogICAgYGBgamF2
        YXNjcmlwdAogICAgZnVuY3Rpb24ocHJldmlvdXNWYWx1ZSwgaXRlbSwgaW5k
        ZXgsIGVudW1lcmFibGUpOwogICAgYGBgCgogICAgLSBgcHJldmlvdXNWYWx1
        ZWAgaXMgdGhlIHZhbHVlIHJldHVybmVkIGJ5IHRoZSBsYXN0IGNhbGwgdG8g
        dGhlIGl0ZXJhdG9yLgogICAgLSBgaXRlbWAgaXMgdGhlIGN1cnJlbnQgaXRl
        bSBpbiB0aGUgaXRlcmF0aW9uLgogICAgLSBgaW5kZXhgIGlzIHRoZSBjdXJy
        ZW50IGluZGV4IGluIHRoZSBpdGVyYXRpb24uCiAgICAtIGBlbnVtZXJhYmxl
        YCBpcyB0aGUgZW51bWVyYWJsZSBvYmplY3QgaXRzZWxmLgoKICAgIFJldHVy
        biB0aGUgbmV3IGN1bXVsYXRpdmUgdmFsdWUuCgogICAgSW4gYWRkaXRpb24g
        dG8gdGhlIGNhbGxiYWNrIHlvdSBjYW4gYWxzbyBwYXNzIGFuIGBpbml0aWFs
        VmFsdWVgLiBBbiBlcnJvcgogICAgd2lsbCBiZSByYWlzZWQgaWYgeW91IGRv
        IG5vdCBwYXNzIGFuIGluaXRpYWwgdmFsdWUgYW5kIHRoZSBlbnVtZXJhdG9y
        IGlzCiAgICBlbXB0eS4KCiAgICBOb3RlIHRoYXQgdW5saWtlIHRoZSBvdGhl
        ciBtZXRob2RzLCB0aGlzIG1ldGhvZCBkb2VzIG5vdCBhbGxvdyB5b3UgdG8K
        ICAgIHBhc3MgYSB0YXJnZXQgb2JqZWN0IHRvIHNldCBhcyB0aGlzIGZvciB0
        aGUgY2FsbGJhY2suIEl0J3MgcGFydCBvZiB0aGUKICAgIHNwZWMuIFNvcnJ5
        LgoKICAgIEBtZXRob2QgcmVkdWNlCiAgICBAcGFyYW0ge0Z1bmN0aW9ufSBj
        YWxsYmFjayBUaGUgY2FsbGJhY2sgdG8gZXhlY3V0ZQogICAgQHBhcmFtIHtP
        YmplY3R9IGluaXRpYWxWYWx1ZSBJbml0aWFsIHZhbHVlIGZvciB0aGUgcmVk
        dWNlCiAgICBAcGFyYW0ge1N0cmluZ30gcmVkdWNlclByb3BlcnR5IGludGVy
        bmFsIHVzZSBvbmx5LgogICAgQHJldHVybiB7T2JqZWN0fSBUaGUgcmVkdWNl
        ZCB2YWx1ZS4KICAqLwogIHJlZHVjZTogZnVuY3Rpb24oY2FsbGJhY2ssIGlu
        aXRpYWxWYWx1ZSwgcmVkdWNlclByb3BlcnR5KSB7CiAgICBpZiAodHlwZW9m
        IGNhbGxiYWNrICE9PSAiZnVuY3Rpb24iKSB7IHRocm93IG5ldyBUeXBlRXJy
        b3IoKTsgfQoKICAgIHZhciByZXQgPSBpbml0aWFsVmFsdWU7CgogICAgdGhp
        cy5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0sIGkpIHsKICAgICAgcmV0ID0gY2Fs
        bGJhY2suY2FsbChudWxsLCByZXQsIGl0ZW0sIGksIHRoaXMsIHJlZHVjZXJQ
        cm9wZXJ0eSk7CiAgICB9LCB0aGlzKTsKCiAgICByZXR1cm4gcmV0OwogIH0s
        CgogIC8qKgogICAgSW52b2tlcyB0aGUgbmFtZWQgbWV0aG9kIG9uIGV2ZXJ5
        IG9iamVjdCBpbiB0aGUgcmVjZWl2ZXIgdGhhdAogICAgaW1wbGVtZW50cyBp
        dC4gVGhpcyBtZXRob2QgY29ycmVzcG9uZHMgdG8gdGhlIGltcGxlbWVudGF0
        aW9uIGluCiAgICBQcm90b3R5cGUgMS42LgoKICAgIEBtZXRob2QgaW52b2tl
        CiAgICBAcGFyYW0ge1N0cmluZ30gbWV0aG9kTmFtZSB0aGUgbmFtZSBvZiB0
        aGUgbWV0aG9kCiAgICBAcGFyYW0ge09iamVjdC4uLn0gYXJncyBvcHRpb25h
        bCBhcmd1bWVudHMgdG8gcGFzcyBhcyB3ZWxsLgogICAgQHJldHVybiB7QXJy
        YXl9IHJldHVybiB2YWx1ZXMgZnJvbSBjYWxsaW5nIGludm9rZS4KICAqLwog
        IGludm9rZTogZnVuY3Rpb24obWV0aG9kTmFtZSkgewogICAgdmFyIGFyZ3Ms
        IHJldCA9IEVtYmVyLkEoKTsKICAgIGlmIChhcmd1bWVudHMubGVuZ3RoPjEp
        IGFyZ3MgPSBhX3NsaWNlLmNhbGwoYXJndW1lbnRzLCAxKTsKCiAgICB0aGlz
        LmZvckVhY2goZnVuY3Rpb24oeCwgaWR4KSB7CiAgICAgIHZhciBtZXRob2Qg
        PSB4ICYmIHhbbWV0aG9kTmFtZV07CiAgICAgIGlmICgnZnVuY3Rpb24nID09
        PSB0eXBlb2YgbWV0aG9kKSB7CiAgICAgICAgcmV0W2lkeF0gPSBhcmdzID8g
        bWV0aG9kLmFwcGx5KHgsIGFyZ3MpIDogbWV0aG9kLmNhbGwoeCk7CiAgICAg
        IH0KICAgIH0sIHRoaXMpOwoKICAgIHJldHVybiByZXQ7CiAgfSwKCiAgLyoq
        CiAgICBTaW1wbHkgY29udmVydHMgdGhlIGVudW1lcmFibGUgaW50byBhIGdl
        bnVpbmUgYXJyYXkuIFRoZSBvcmRlciBpcyBub3QKICAgIGd1YXJhbnRlZWQu
        IENvcnJlc3BvbmRzIHRvIHRoZSBtZXRob2QgaW1wbGVtZW50ZWQgYnkgUHJv
        dG90eXBlLgoKICAgIEBtZXRob2QgdG9BcnJheQogICAgQHJldHVybiB7QXJy
        YXl9IHRoZSBlbnVtZXJhYmxlIGFzIGFuIGFycmF5LgogICovCiAgdG9BcnJh
        eTogZnVuY3Rpb24oKSB7CiAgICB2YXIgcmV0ID0gRW1iZXIuQSgpOwogICAg
        dGhpcy5mb3JFYWNoKGZ1bmN0aW9uKG8sIGlkeCkgeyByZXRbaWR4XSA9IG87
        IH0pOwogICAgcmV0dXJuIHJldCA7CiAgfSwKCiAgLyoqCiAgICBSZXR1cm5z
        IGEgY29weSBvZiB0aGUgYXJyYXkgd2l0aCBhbGwgbnVsbCBhbmQgdW5kZWZp
        bmVkIGVsZW1lbnRzIHJlbW92ZWQuCgogICAgYGBgamF2YXNjcmlwdAogICAg
        dmFyIGFyciA9IFsiYSIsIG51bGwsICJjIiwgdW5kZWZpbmVkXTsKICAgIGFy
        ci5jb21wYWN0KCk7ICAvLyBbImEiLCAiYyJdCiAgICBgYGAKCiAgICBAbWV0
        aG9kIGNvbXBhY3QKICAgIEByZXR1cm4ge0FycmF5fSB0aGUgYXJyYXkgd2l0
        aG91dCBudWxsIGFuZCB1bmRlZmluZWQgZWxlbWVudHMuCiAgKi8KICBjb21w
        YWN0OiBmdW5jdGlvbigpIHsKICAgIHJldHVybiB0aGlzLmZpbHRlcihmdW5j
        dGlvbih2YWx1ZSkgeyByZXR1cm4gdmFsdWUgIT0gbnVsbDsgfSk7CiAgfSwK
        CiAgLyoqCiAgICBSZXR1cm5zIGEgbmV3IGVudW1lcmFibGUgdGhhdCBleGNs
        dWRlcyB0aGUgcGFzc2VkIHZhbHVlLiBUaGUgZGVmYXVsdAogICAgaW1wbGVt
        ZW50YXRpb24gcmV0dXJucyBhbiBhcnJheSByZWdhcmRsZXNzIG9mIHRoZSBy
        ZWNlaXZlciB0eXBlIHVubGVzcwogICAgdGhlIHJlY2VpdmVyIGRvZXMgbm90
        IGNvbnRhaW4gdGhlIHZhbHVlLgoKICAgIGBgYGphdmFzY3JpcHQKICAgIHZh
        ciBhcnIgPSBbImEiLCAiYiIsICJhIiwgImMiXTsKICAgIGFyci53aXRob3V0
        KCJhIik7ICAvLyBbImIiLCAiYyJdCiAgICBgYGAKCiAgICBAbWV0aG9kIHdp
        dGhvdXQKICAgIEBwYXJhbSB7T2JqZWN0fSB2YWx1ZQogICAgQHJldHVybiB7
        RW1iZXIuRW51bWVyYWJsZX0KICAqLwogIHdpdGhvdXQ6IGZ1bmN0aW9uKHZh
        bHVlKSB7CiAgICBpZiAoIXRoaXMuY29udGFpbnModmFsdWUpKSByZXR1cm4g
        dGhpczsgLy8gbm90aGluZyB0byBkbwogICAgdmFyIHJldCA9IEVtYmVyLkEo
        KTsKICAgIHRoaXMuZm9yRWFjaChmdW5jdGlvbihrKSB7CiAgICAgIGlmIChr
        ICE9PSB2YWx1ZSkgcmV0W3JldC5sZW5ndGhdID0gazsKICAgIH0pIDsKICAg
        IHJldHVybiByZXQgOwogIH0sCgogIC8qKgogICAgUmV0dXJucyBhIG5ldyBl
        bnVtZXJhYmxlIHRoYXQgY29udGFpbnMgb25seSB1bmlxdWUgdmFsdWVzLiBU
        aGUgZGVmYXVsdAogICAgaW1wbGVtZW50YXRpb24gcmV0dXJucyBhbiBhcnJh
        eSByZWdhcmRsZXNzIG9mIHRoZSByZWNlaXZlciB0eXBlLgoKICAgIGBgYGph
        dmFzY3JpcHQKICAgIHZhciBhcnIgPSBbImEiLCAiYSIsICJiIiwgImIiXTsK
        ICAgIGFyci51bmlxKCk7ICAvLyBbImEiLCAiYiJdCiAgICBgYGAKCiAgICBA
        bWV0aG9kIHVuaXEKICAgIEByZXR1cm4ge0VtYmVyLkVudW1lcmFibGV9CiAg
        Ki8KICB1bmlxOiBmdW5jdGlvbigpIHsKICAgIHZhciByZXQgPSBFbWJlci5B
        KCk7CiAgICB0aGlzLmZvckVhY2goZnVuY3Rpb24oaykgewogICAgICBpZiAo
        YV9pbmRleE9mKHJldCwgayk8MCkgcmV0LnB1c2goayk7CiAgICB9KTsKICAg
        IHJldHVybiByZXQ7CiAgfSwKCiAgLyoqCiAgICBUaGlzIHByb3BlcnR5IHdp
        bGwgdHJpZ2dlciBhbnl0aW1lIHRoZSBlbnVtZXJhYmxlJ3MgY29udGVudCBj
        aGFuZ2VzLgogICAgWW91IGNhbiBvYnNlcnZlIHRoaXMgcHJvcGVydHkgdG8g
        YmUgbm90aWZpZWQgb2YgY2hhbmdlcyB0byB0aGUgZW51bWVyYWJsZXMKICAg
        IGNvbnRlbnQuCgogICAgRm9yIHBsYWluIGVudW1lcmFibGVzLCB0aGlzIHBy
        b3BlcnR5IGlzIHJlYWQgb25seS4gYEVtYmVyLkFycmF5YCBvdmVycmlkZXMK
        ICAgIHRoaXMgbWV0aG9kLgoKICAgIEBwcm9wZXJ0eSBbXQogICAgQHR5cGUg
        RW1iZXIuQXJyYXkKICAgIEByZXR1cm4gdGhpcwogICovCiAgJ1tdJzogRW1i
        ZXIuY29tcHV0ZWQoZnVuY3Rpb24oa2V5LCB2YWx1ZSkgewogICAgcmV0dXJu
        IHRoaXM7CiAgfSksCgogIC8vIC4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4u
        Li4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4KICAvLyBFTlVNRVJB
        QkxFIE9CU0VSVkVSUwogIC8vCgogIC8qKgogICAgUmVnaXN0ZXJzIGFuIGVu
        dW1lcmFibGUgb2JzZXJ2ZXIuIE11c3QgaW1wbGVtZW50IGBFbWJlci5FbnVt
        ZXJhYmxlT2JzZXJ2ZXJgCiAgICBtaXhpbi4KCiAgICBAbWV0aG9kIGFkZEVu
        dW1lcmFibGVPYnNlcnZlcgogICAgQHBhcmFtIHtPYmplY3R9IHRhcmdldAog
        ICAgQHBhcmFtIHtIYXNofSBbb3B0c10KICAgIEByZXR1cm4gdGhpcwogICov
        CiAgYWRkRW51bWVyYWJsZU9ic2VydmVyOiBmdW5jdGlvbih0YXJnZXQsIG9w
        dHMpIHsKICAgIHZhciB3aWxsQ2hhbmdlID0gKG9wdHMgJiYgb3B0cy53aWxs
        Q2hhbmdlKSB8fCAnZW51bWVyYWJsZVdpbGxDaGFuZ2UnLAogICAgICAgIGRp
        ZENoYW5nZSAgPSAob3B0cyAmJiBvcHRzLmRpZENoYW5nZSkgfHwgJ2VudW1l
        cmFibGVEaWRDaGFuZ2UnOwoKICAgIHZhciBoYXNPYnNlcnZlcnMgPSBnZXQo
        dGhpcywgJ2hhc0VudW1lcmFibGVPYnNlcnZlcnMnKTsKICAgIGlmICghaGFz
        T2JzZXJ2ZXJzKSBFbWJlci5wcm9wZXJ0eVdpbGxDaGFuZ2UodGhpcywgJ2hh
        c0VudW1lcmFibGVPYnNlcnZlcnMnKTsKICAgIEVtYmVyLmFkZExpc3RlbmVy
        KHRoaXMsICdAZW51bWVyYWJsZTpiZWZvcmUnLCB0YXJnZXQsIHdpbGxDaGFu
        Z2UpOwogICAgRW1iZXIuYWRkTGlzdGVuZXIodGhpcywgJ0BlbnVtZXJhYmxl
        OmNoYW5nZScsIHRhcmdldCwgZGlkQ2hhbmdlKTsKICAgIGlmICghaGFzT2Jz
        ZXJ2ZXJzKSBFbWJlci5wcm9wZXJ0eURpZENoYW5nZSh0aGlzLCAnaGFzRW51
        bWVyYWJsZU9ic2VydmVycycpOwogICAgcmV0dXJuIHRoaXM7CiAgfSwKCiAg
        LyoqCiAgICBSZW1vdmVzIGEgcmVnaXN0ZXJlZCBlbnVtZXJhYmxlIG9ic2Vy
        dmVyLgoKICAgIEBtZXRob2QgcmVtb3ZlRW51bWVyYWJsZU9ic2VydmVyCiAg
        ICBAcGFyYW0ge09iamVjdH0gdGFyZ2V0CiAgICBAcGFyYW0ge0hhc2h9IFtv
        cHRzXQogICAgQHJldHVybiB0aGlzCiAgKi8KICByZW1vdmVFbnVtZXJhYmxl
        T2JzZXJ2ZXI6IGZ1bmN0aW9uKHRhcmdldCwgb3B0cykgewogICAgdmFyIHdp
        bGxDaGFuZ2UgPSAob3B0cyAmJiBvcHRzLndpbGxDaGFuZ2UpIHx8ICdlbnVt
        ZXJhYmxlV2lsbENoYW5nZScsCiAgICAgICAgZGlkQ2hhbmdlICA9IChvcHRz
        ICYmIG9wdHMuZGlkQ2hhbmdlKSB8fCAnZW51bWVyYWJsZURpZENoYW5nZSc7
        CgogICAgdmFyIGhhc09ic2VydmVycyA9IGdldCh0aGlzLCAnaGFzRW51bWVy
        YWJsZU9ic2VydmVycycpOwogICAgaWYgKGhhc09ic2VydmVycykgRW1iZXIu
        cHJvcGVydHlXaWxsQ2hhbmdlKHRoaXMsICdoYXNFbnVtZXJhYmxlT2JzZXJ2
        ZXJzJyk7CiAgICBFbWJlci5yZW1vdmVMaXN0ZW5lcih0aGlzLCAnQGVudW1l
        cmFibGU6YmVmb3JlJywgdGFyZ2V0LCB3aWxsQ2hhbmdlKTsKICAgIEVtYmVy
        LnJlbW92ZUxpc3RlbmVyKHRoaXMsICdAZW51bWVyYWJsZTpjaGFuZ2UnLCB0
        YXJnZXQsIGRpZENoYW5nZSk7CiAgICBpZiAoaGFzT2JzZXJ2ZXJzKSBFbWJl
        ci5wcm9wZXJ0eURpZENoYW5nZSh0aGlzLCAnaGFzRW51bWVyYWJsZU9ic2Vy
        dmVycycpOwogICAgcmV0dXJuIHRoaXM7CiAgfSwKCiAgLyoqCiAgICBCZWNv
        bWVzIHRydWUgd2hlbmV2ZXIgdGhlIGFycmF5IGN1cnJlbnRseSBoYXMgb2Jz
        ZXJ2ZXJzIHdhdGNoaW5nIGNoYW5nZXMKICAgIG9uIHRoZSBhcnJheS4KCiAg
        ICBAcHJvcGVydHkgaGFzRW51bWVyYWJsZU9ic2VydmVycwogICAgQHR5cGUg
        Qm9vbGVhbgogICovCiAgaGFzRW51bWVyYWJsZU9ic2VydmVyczogRW1iZXIu
        Y29tcHV0ZWQoZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gRW1iZXIuaGFzTGlz
        dGVuZXJzKHRoaXMsICdAZW51bWVyYWJsZTpjaGFuZ2UnKSB8fCBFbWJlci5o
        YXNMaXN0ZW5lcnModGhpcywgJ0BlbnVtZXJhYmxlOmJlZm9yZScpOwogIH0p
        LAoKCiAgLyoqCiAgICBJbnZva2UgdGhpcyBtZXRob2QganVzdCBiZWZvcmUg
        dGhlIGNvbnRlbnRzIG9mIHlvdXIgZW51bWVyYWJsZSB3aWxsCiAgICBjaGFu
        Z2UuIFlvdSBjYW4gZWl0aGVyIG9taXQgdGhlIHBhcmFtZXRlcnMgY29tcGxl
        dGVseSBvciBwYXNzIHRoZSBvYmplY3RzCiAgICB0byBiZSByZW1vdmVkIG9y
        IGFkZGVkIGlmIGF2YWlsYWJsZSBvciBqdXN0IGEgY291bnQuCgogICAgQG1l
        dGhvZCBlbnVtZXJhYmxlQ29udGVudFdpbGxDaGFuZ2UKICAgIEBwYXJhbSB7
        RW1iZXIuRW51bWVyYWJsZXxOdW1iZXJ9IHJlbW92aW5nIEFuIGVudW1lcmFi
        bGUgb2YgdGhlIG9iamVjdHMgdG8KICAgICAgYmUgcmVtb3ZlZCBvciB0aGUg
        bnVtYmVyIG9mIGl0ZW1zIHRvIGJlIHJlbW92ZWQuCiAgICBAcGFyYW0ge0Vt
        YmVyLkVudW1lcmFibGV8TnVtYmVyfSBhZGRpbmcgQW4gZW51bWVyYWJsZSBv
        ZiB0aGUgb2JqZWN0cyB0byBiZQogICAgICBhZGRlZCBvciB0aGUgbnVtYmVy
        IG9mIGl0ZW1zIHRvIGJlIGFkZGVkLgogICAgQGNoYWluYWJsZQogICovCiAg
        ZW51bWVyYWJsZUNvbnRlbnRXaWxsQ2hhbmdlOiBmdW5jdGlvbihyZW1vdmlu
        ZywgYWRkaW5nKSB7CgogICAgdmFyIHJlbW92ZUNudCwgYWRkQ250LCBoYXNE
        ZWx0YTsKCiAgICBpZiAoJ251bWJlcicgPT09IHR5cGVvZiByZW1vdmluZykg
        cmVtb3ZlQ250ID0gcmVtb3Zpbmc7CiAgICBlbHNlIGlmIChyZW1vdmluZykg
        cmVtb3ZlQ250ID0gZ2V0KHJlbW92aW5nLCAnbGVuZ3RoJyk7CiAgICBlbHNl
        IHJlbW92ZUNudCA9IHJlbW92aW5nID0gLTE7CgogICAgaWYgKCdudW1iZXIn
        ID09PSB0eXBlb2YgYWRkaW5nKSBhZGRDbnQgPSBhZGRpbmc7CiAgICBlbHNl
        IGlmIChhZGRpbmcpIGFkZENudCA9IGdldChhZGRpbmcsJ2xlbmd0aCcpOwog
        ICAgZWxzZSBhZGRDbnQgPSBhZGRpbmcgPSAtMTsKCiAgICBoYXNEZWx0YSA9
        IGFkZENudDwwIHx8IHJlbW92ZUNudDwwIHx8IGFkZENudC1yZW1vdmVDbnQh
        PT0wOwoKICAgIGlmIChyZW1vdmluZyA9PT0gLTEpIHJlbW92aW5nID0gbnVs
        bDsKICAgIGlmIChhZGRpbmcgICA9PT0gLTEpIGFkZGluZyAgID0gbnVsbDsK
        CiAgICBFbWJlci5wcm9wZXJ0eVdpbGxDaGFuZ2UodGhpcywgJ1tdJyk7CiAg
        ICBpZiAoaGFzRGVsdGEpIEVtYmVyLnByb3BlcnR5V2lsbENoYW5nZSh0aGlz
        LCAnbGVuZ3RoJyk7CiAgICBFbWJlci5zZW5kRXZlbnQodGhpcywgJ0BlbnVt
        ZXJhYmxlOmJlZm9yZScsIFt0aGlzLCByZW1vdmluZywgYWRkaW5nXSk7Cgog
        ICAgcmV0dXJuIHRoaXM7CiAgfSwKCiAgLyoqCiAgICBJbnZva2UgdGhpcyBt
        ZXRob2Qgd2hlbiB0aGUgY29udGVudHMgb2YgeW91ciBlbnVtZXJhYmxlIGhh
        cyBjaGFuZ2VkLgogICAgVGhpcyB3aWxsIG5vdGlmeSBhbnkgb2JzZXJ2ZXJz
        IHdhdGNoaW5nIGZvciBjb250ZW50IGNoYW5nZXMuIElmIHlvdXIgYXJlCiAg
        ICBpbXBsZW1lbnRpbmcgYW4gb3JkZXJlZCBlbnVtZXJhYmxlIChzdWNoIGFz
        IGFuIGFycmF5KSwgYWxzbyBwYXNzIHRoZQogICAgc3RhcnQgYW5kIGVuZCB2
        YWx1ZXMgd2hlcmUgdGhlIGNvbnRlbnQgY2hhbmdlZCBzbyB0aGF0IGl0IGNh
        biBiZSB1c2VkIHRvCiAgICBub3RpZnkgcmFuZ2Ugb2JzZXJ2ZXJzLgoKICAg
        IEBtZXRob2QgZW51bWVyYWJsZUNvbnRlbnREaWRDaGFuZ2UKICAgIEBwYXJh
        bSB7TnVtYmVyfSBbc3RhcnRdIG9wdGlvbmFsIHN0YXJ0IG9mZnNldCBmb3Ig
        dGhlIGNvbnRlbnQgY2hhbmdlLgogICAgICBGb3IgdW5vcmRlcmVkIGVudW1l
        cmFibGVzLCB5b3Ugc2hvdWxkIGFsd2F5cyBwYXNzIC0xLgogICAgQHBhcmFt
        IHtFbWJlci5FbnVtZXJhYmxlfE51bWJlcn0gcmVtb3ZpbmcgQW4gZW51bWVy
        YWJsZSBvZiB0aGUgb2JqZWN0cyB0bwogICAgICBiZSByZW1vdmVkIG9yIHRo
        ZSBudW1iZXIgb2YgaXRlbXMgdG8gYmUgcmVtb3ZlZC4KICAgIEBwYXJhbSB7
        RW1iZXIuRW51bWVyYWJsZXxOdW1iZXJ9IGFkZGluZyAgQW4gZW51bWVyYWJs
        ZSBvZiB0aGUgb2JqZWN0cyB0bwogICAgICBiZSBhZGRlZCBvciB0aGUgbnVt
        YmVyIG9mIGl0ZW1zIHRvIGJlIGFkZGVkLgogICAgQGNoYWluYWJsZQogICov
        CiAgZW51bWVyYWJsZUNvbnRlbnREaWRDaGFuZ2U6IGZ1bmN0aW9uKHJlbW92
        aW5nLCBhZGRpbmcpIHsKICAgIHZhciByZW1vdmVDbnQsIGFkZENudCwgaGFz
        RGVsdGE7CgogICAgaWYgKCdudW1iZXInID09PSB0eXBlb2YgcmVtb3Zpbmcp
        IHJlbW92ZUNudCA9IHJlbW92aW5nOwogICAgZWxzZSBpZiAocmVtb3Zpbmcp
        IHJlbW92ZUNudCA9IGdldChyZW1vdmluZywgJ2xlbmd0aCcpOwogICAgZWxz
        ZSByZW1vdmVDbnQgPSByZW1vdmluZyA9IC0xOwoKICAgIGlmICgnbnVtYmVy
        JyA9PT0gdHlwZW9mIGFkZGluZykgYWRkQ250ID0gYWRkaW5nOwogICAgZWxz
        ZSBpZiAoYWRkaW5nKSBhZGRDbnQgPSBnZXQoYWRkaW5nLCAnbGVuZ3RoJyk7
        CiAgICBlbHNlIGFkZENudCA9IGFkZGluZyA9IC0xOwoKICAgIGhhc0RlbHRh
        ID0gYWRkQ250PDAgfHwgcmVtb3ZlQ250PDAgfHwgYWRkQ250LXJlbW92ZUNu
        dCE9PTA7CgogICAgaWYgKHJlbW92aW5nID09PSAtMSkgcmVtb3ZpbmcgPSBu
        dWxsOwogICAgaWYgKGFkZGluZyAgID09PSAtMSkgYWRkaW5nICAgPSBudWxs
        OwoKICAgIEVtYmVyLnNlbmRFdmVudCh0aGlzLCAnQGVudW1lcmFibGU6Y2hh
        bmdlJywgW3RoaXMsIHJlbW92aW5nLCBhZGRpbmddKTsKICAgIGlmIChoYXNE
        ZWx0YSkgRW1iZXIucHJvcGVydHlEaWRDaGFuZ2UodGhpcywgJ2xlbmd0aCcp
        OwogICAgRW1iZXIucHJvcGVydHlEaWRDaGFuZ2UodGhpcywgJ1tdJyk7Cgog
        ICAgcmV0dXJuIHRoaXMgOwogIH0KCn0pOwoKCiAgRW1iZXIuRW51bWVyYWJs
        ZS5yZW9wZW4oewogICAgLyoqCiAgICAgIENvbnZlcnRzIHRoZSBlbnVtZXJh
        YmxlIGludG8gYW4gYXJyYXkgYW5kIHNvcnRzIGJ5IHRoZSBrZXlzCiAgICAg
        IHNwZWNpZmllZCBpbiB0aGUgYXJndW1lbnQuCgogICAgICBZb3UgbWF5IHBy
        b3ZpZGUgbXVsdGlwbGUgYXJndW1lbnRzIHRvIHNvcnQgYnkgbXVsdGlwbGUg
        cHJvcGVydGllcy4KCiAgICAgIEBtZXRob2Qgc29ydEJ5CiAgICAgIEBwYXJh
        bSB7U3RyaW5nfSBwcm9wZXJ0eSBuYW1lKHMpIHRvIHNvcnQgb24KICAgICAg
        QHJldHVybiB7QXJyYXl9IFRoZSBzb3J0ZWQgYXJyYXkuCiAgICAqLwogICAg
        c29ydEJ5OiBmdW5jdGlvbigpIHsKICAgICAgdmFyIHNvcnRLZXlzID0gYXJn
        dW1lbnRzOwogICAgICByZXR1cm4gdGhpcy50b0FycmF5KCkuc29ydChmdW5j
        dGlvbihhLCBiKXsKICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgc29ydEtl
        eXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIHZhciBrZXkgPSBzb3J0S2V5
        c1tpXSwKICAgICAgICAgICAgICBwcm9wQSA9IGdldChhLCBrZXkpLAogICAg
        ICAgICAgICAgIHByb3BCID0gZ2V0KGIsIGtleSk7CiAgICAgICAgICAvLyBy
        ZXR1cm4gMSBvciAtMSBlbHNlIGNvbnRpbnVlIHRvIHRoZSBuZXh0IHNvcnRL
        ZXkKICAgICAgICAgIHZhciBjb21wYXJlVmFsdWUgPSBFbWJlci5jb21wYXJl
        KHByb3BBLCBwcm9wQik7CiAgICAgICAgICBpZiAoY29tcGFyZVZhbHVlKSB7
        IHJldHVybiBjb21wYXJlVmFsdWU7IH0KICAgICAgICB9CiAgICAgICAgcmV0
        dXJuIDA7CiAgICAgIH0pOwogICAgfQogIH0pOwoKCn0pKCk7CgoKCihmdW5j
        dGlvbigpIHsKLyoqCkBtb2R1bGUgZW1iZXIKQHN1Ym1vZHVsZSBlbWJlci1y
        dW50aW1lCiovCgovLyAuLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4u
        Li4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uCi8vIEhFTFBFUlMKLy8KCnZh
        ciBnZXQgPSBFbWJlci5nZXQsIHNldCA9IEVtYmVyLnNldCwgaXNOb25lID0g
        RW1iZXIuaXNOb25lLCBtYXAgPSBFbWJlci5FbnVtZXJhYmxlVXRpbHMubWFw
        LCBjYWNoZUZvciA9IEVtYmVyLmNhY2hlRm9yOwoKLy8gLi4uLi4uLi4uLi4u
        Li4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4u
        LgovLyBBUlJBWQovLwovKioKICBUaGlzIG1vZHVsZSBpbXBsZW1lbnRzIE9i
        c2VydmVyLWZyaWVuZGx5IEFycmF5LWxpa2UgYmVoYXZpb3IuIFRoaXMgbWl4
        aW4gaXMKICBwaWNrZWQgdXAgYnkgdGhlIEFycmF5IGNsYXNzIGFzIHdlbGwg
        YXMgb3RoZXIgY29udHJvbGxlcnMsIGV0Yy4gdGhhdCB3YW50IHRvCiAgYXBw
        ZWFyIHRvIGJlIGFycmF5cy4KCiAgVW5saWtlIGBFbWJlci5FbnVtZXJhYmxl
        LGAgdGhpcyBtaXhpbiBkZWZpbmVzIG1ldGhvZHMgc3BlY2lmaWNhbGx5IGZv
        cgogIGNvbGxlY3Rpb25zIHRoYXQgcHJvdmlkZSBpbmRleC1vcmRlcmVkIGFj
        Y2VzcyB0byB0aGVpciBjb250ZW50cy4gV2hlbiB5b3UKICBhcmUgZGVzaWdu
        aW5nIGNvZGUgdGhhdCBuZWVkcyB0byBhY2NlcHQgYW55IGtpbmQgb2YgQXJy
        YXktbGlrZSBvYmplY3QsIHlvdQogIHNob3VsZCB1c2UgdGhlc2UgbWV0aG9k
        cyBpbnN0ZWFkIG9mIEFycmF5IHByaW1pdGl2ZXMgYmVjYXVzZSB0aGVzZSB3
        aWxsCiAgcHJvcGVybHkgbm90aWZ5IG9ic2VydmVycyBvZiBjaGFuZ2VzIHRv
        IHRoZSBhcnJheS4KCiAgQWx0aG91Z2ggdGhlc2UgbWV0aG9kcyBhcmUgZWZm
        aWNpZW50LCB0aGV5IGRvIGFkZCBhIGxheWVyIG9mIGluZGlyZWN0aW9uIHRv
        CiAgeW91ciBhcHBsaWNhdGlvbiBzbyBpdCBpcyBhIGdvb2QgaWRlYSB0byB1
        c2UgdGhlbSBvbmx5IHdoZW4geW91IG5lZWQgdGhlCiAgZmxleGliaWxpdHkg
        b2YgdXNpbmcgYm90aCB0cnVlIEphdmFTY3JpcHQgYXJyYXlzIGFuZCAidmly
        dHVhbCIgYXJyYXlzIHN1Y2gKICBhcyBjb250cm9sbGVycyBhbmQgY29sbGVj
        dGlvbnMuCgogIFlvdSBjYW4gdXNlIHRoZSBtZXRob2RzIGRlZmluZWQgaW4g
        dGhpcyBtb2R1bGUgdG8gYWNjZXNzIGFuZCBtb2RpZnkgYXJyYXkKICBjb250
        ZW50cyBpbiBhIEtWTy1mcmllbmRseSB3YXkuIFlvdSBjYW4gYWxzbyBiZSBu
        b3RpZmllZCB3aGVuZXZlciB0aGUKICBtZW1iZXJzaGlwIG9mIGFuIGFycmF5
        IGNoYW5nZXMgYnkgY2hhbmdpbmcgdGhlIHN5bnRheCBvZiB0aGUgcHJvcGVy
        dHkgdG8KICBgLm9ic2VydmVzKCcqbXlQcm9wZXJ0eS5bXScpYC4KCiAgVG8g
        c3VwcG9ydCBgRW1iZXIuQXJyYXlgIGluIHlvdXIgb3duIGNsYXNzLCB5b3Ug
        bXVzdCBvdmVycmlkZSB0d28KICBwcmltaXRpdmVzIHRvIHVzZSBpdDogYHJl
        cGxhY2UoKWAgYW5kIGBvYmplY3RBdCgpYC4KCiAgTm90ZSB0aGF0IHRoZSBF
        bWJlci5BcnJheSBtaXhpbiBhbHNvIGluY29ycG9yYXRlcyB0aGUgYEVtYmVy
        LkVudW1lcmFibGVgCiAgbWl4aW4uIEFsbCBgRW1iZXIuQXJyYXlgLWxpa2Ug
        b2JqZWN0cyBhcmUgYWxzbyBlbnVtZXJhYmxlLgoKICBAY2xhc3MgQXJyYXkK
        ICBAbmFtZXNwYWNlIEVtYmVyCiAgQHVzZXMgRW1iZXIuRW51bWVyYWJsZQog
        IEBzaW5jZSBFbWJlciAwLjkuMAoqLwpFbWJlci5BcnJheSA9IEVtYmVyLk1p
        eGluLmNyZWF0ZShFbWJlci5FbnVtZXJhYmxlLCAvKiogQHNjb3BlIEVtYmVy
        LkFycmF5LnByb3RvdHlwZSAqLyB7CgogIC8qKgogICAgWW91ciBhcnJheSBt
        dXN0IHN1cHBvcnQgdGhlIGBsZW5ndGhgIHByb3BlcnR5LiBZb3VyIHJlcGxh
        Y2UgbWV0aG9kcyBzaG91bGQKICAgIHNldCB0aGlzIHByb3BlcnR5IHdoZW5l
        dmVyIGl0IGNoYW5nZXMuCgogICAgQHByb3BlcnR5IHtOdW1iZXJ9IGxlbmd0
        aAogICovCiAgbGVuZ3RoOiBFbWJlci5yZXF1aXJlZCgpLAoKICAvKioKICAg
        IFJldHVybnMgdGhlIG9iamVjdCBhdCB0aGUgZ2l2ZW4gYGluZGV4YC4gSWYg
        dGhlIGdpdmVuIGBpbmRleGAgaXMgbmVnYXRpdmUKICAgIG9yIGlzIGdyZWF0
        ZXIgb3IgZXF1YWwgdGhhbiB0aGUgYXJyYXkgbGVuZ3RoLCByZXR1cm5zIGB1
        bmRlZmluZWRgLgoKICAgIFRoaXMgaXMgb25lIG9mIHRoZSBwcmltaXRpdmVz
        IHlvdSBtdXN0IGltcGxlbWVudCB0byBzdXBwb3J0IGBFbWJlci5BcnJheWAu
        CiAgICBJZiB5b3VyIG9iamVjdCBzdXBwb3J0cyByZXRyaWV2aW5nIHRoZSB2
        YWx1ZSBvZiBhbiBhcnJheSBpdGVtIHVzaW5nIGBnZXQoKWAKICAgIChpLmUu
        IGBteUFycmF5LmdldCgwKWApLCB0aGVuIHlvdSBkbyBub3QgbmVlZCB0byBp
        bXBsZW1lbnQgdGhpcyBtZXRob2QKICAgIHlvdXJzZWxmLgoKICAgIGBgYGph
        dmFzY3JpcHQKICAgIHZhciBhcnIgPSBbJ2EnLCAnYicsICdjJywgJ2QnXTsK
        ICAgIGFyci5vYmplY3RBdCgwKTsgICAvLyAiYSIKICAgIGFyci5vYmplY3RB
        dCgzKTsgICAvLyAiZCIKICAgIGFyci5vYmplY3RBdCgtMSk7ICAvLyB1bmRl
        ZmluZWQKICAgIGFyci5vYmplY3RBdCg0KTsgICAvLyB1bmRlZmluZWQKICAg
        IGFyci5vYmplY3RBdCg1KTsgICAvLyB1bmRlZmluZWQKICAgIGBgYAoKICAg
        IEBtZXRob2Qgb2JqZWN0QXQKICAgIEBwYXJhbSB7TnVtYmVyfSBpZHggVGhl
        IGluZGV4IG9mIHRoZSBpdGVtIHRvIHJldHVybi4KICAgIEByZXR1cm4geyp9
        IGl0ZW0gYXQgaW5kZXggb3IgdW5kZWZpbmVkCiAgKi8KICBvYmplY3RBdDog
        ZnVuY3Rpb24oaWR4KSB7CiAgICBpZiAoKGlkeCA8IDApIHx8IChpZHg+PWdl
        dCh0aGlzLCAnbGVuZ3RoJykpKSByZXR1cm4gdW5kZWZpbmVkIDsKICAgIHJl
        dHVybiBnZXQodGhpcywgaWR4KTsKICB9LAoKICAvKioKICAgIFRoaXMgcmV0
        dXJucyB0aGUgb2JqZWN0cyBhdCB0aGUgc3BlY2lmaWVkIGluZGV4ZXMsIHVz
        aW5nIGBvYmplY3RBdGAuCgogICAgYGBgamF2YXNjcmlwdAogICAgdmFyIGFy
        ciA9wqBbJ2EnLCAnYicsICdjJywgJ2QnXTsKICAgIGFyci5vYmplY3RzQXQo
        WzAsIDEsIDJdKTsgIC8vIFsiYSIsICJiIiwgImMiXQogICAgYXJyLm9iamVj
        dHNBdChbMiwgMywgNF0pOyAgLy8gWyJjIiwgImQiLCB1bmRlZmluZWRdCiAg
        ICBgYGAKCiAgICBAbWV0aG9kIG9iamVjdHNBdAogICAgQHBhcmFtIHtBcnJh
        eX0gaW5kZXhlcyBBbiBhcnJheSBvZiBpbmRleGVzIG9mIGl0ZW1zIHRvIHJl
        dHVybi4KICAgIEByZXR1cm4ge0FycmF5fQogICAqLwogIG9iamVjdHNBdDog
        ZnVuY3Rpb24oaW5kZXhlcykgewogICAgdmFyIHNlbGYgPSB0aGlzOwogICAg
        cmV0dXJuIG1hcChpbmRleGVzLCBmdW5jdGlvbihpZHgpIHsgcmV0dXJuIHNl
        bGYub2JqZWN0QXQoaWR4KTsgfSk7CiAgfSwKCiAgLy8gb3ZlcnJpZGVzIEVt
        YmVyLkVudW1lcmFibGUgdmVyc2lvbgogIG5leHRPYmplY3Q6IGZ1bmN0aW9u
        KGlkeCkgewogICAgcmV0dXJuIHRoaXMub2JqZWN0QXQoaWR4KTsKICB9LAoK
        ICAvKioKICAgIFRoaXMgaXMgdGhlIGhhbmRsZXIgZm9yIHRoZSBzcGVjaWFs
        IGFycmF5IGNvbnRlbnQgcHJvcGVydHkuIElmIHlvdSBnZXQKICAgIHRoaXMg
        cHJvcGVydHksIGl0IHdpbGwgcmV0dXJuIHRoaXMuIElmIHlvdSBzZXQgdGhp
        cyBwcm9wZXJ0eSBpdCBhIG5ldwogICAgYXJyYXksIGl0IHdpbGwgcmVwbGFj
        ZSB0aGUgY3VycmVudCBjb250ZW50LgoKICAgIFRoaXMgcHJvcGVydHkgb3Zl
        cnJpZGVzIHRoZSBkZWZhdWx0IHByb3BlcnR5IGRlZmluZWQgaW4gYEVtYmVy
        LkVudW1lcmFibGVgLgoKICAgIEBwcm9wZXJ0eSBbXQogICAgQHJldHVybiB0
        aGlzCiAgKi8KICAnW10nOiBFbWJlci5jb21wdXRlZChmdW5jdGlvbihrZXks
        IHZhbHVlKSB7CiAgICBpZiAodmFsdWUgIT09IHVuZGVmaW5lZCkgdGhpcy5y
        ZXBsYWNlKDAsIGdldCh0aGlzLCAnbGVuZ3RoJyksIHZhbHVlKSA7CiAgICBy
        ZXR1cm4gdGhpcyA7CiAgfSksCgogIGZpcnN0T2JqZWN0OiBFbWJlci5jb21w
        dXRlZChmdW5jdGlvbigpIHsKICAgIHJldHVybiB0aGlzLm9iamVjdEF0KDAp
        OwogIH0pLAoKICBsYXN0T2JqZWN0OiBFbWJlci5jb21wdXRlZChmdW5jdGlv
        bigpIHsKICAgIHJldHVybiB0aGlzLm9iamVjdEF0KGdldCh0aGlzLCAnbGVu
        Z3RoJyktMSk7CiAgfSksCgogIC8vIG9wdGltaXplZCB2ZXJzaW9uIGZyb20g
        RW51bWVyYWJsZQogIGNvbnRhaW5zOiBmdW5jdGlvbihvYmopIHsKICAgIHJl
        dHVybiB0aGlzLmluZGV4T2Yob2JqKSA+PSAwOwogIH0sCgogIC8vIEFkZCBh
        bnkgZXh0cmEgbWV0aG9kcyB0byBFbWJlci5BcnJheSB0aGF0IGFyZSBuYXRp
        dmUgdG8gdGhlIGJ1aWx0LWluIEFycmF5LgogIC8qKgogICAgUmV0dXJucyBh
        IG5ldyBhcnJheSB0aGF0IGlzIGEgc2xpY2Ugb2YgdGhlIHJlY2VpdmVyLiBU
        aGlzIGltcGxlbWVudGF0aW9uCiAgICB1c2VzIHRoZSBvYnNlcnZhYmxlIGFy
        cmF5IG1ldGhvZHMgdG8gcmV0cmlldmUgdGhlIG9iamVjdHMgZm9yIHRoZSBu
        ZXcKICAgIHNsaWNlLgoKICAgIGBgYGphdmFzY3JpcHQKICAgIHZhciBhcnIg
        PSBbJ3JlZCcsICdncmVlbicsICdibHVlJ107CiAgICBhcnIuc2xpY2UoMCk7
        ICAgICAgIC8vIFsncmVkJywgJ2dyZWVuJywgJ2JsdWUnXQogICAgYXJyLnNs
        aWNlKDAsIDIpOyAgICAvLyBbJ3JlZCcsICdncmVlbiddCiAgICBhcnIuc2xp
        Y2UoMSwgMTAwKTsgIC8vIFsnZ3JlZW4nLCAnYmx1ZSddCiAgICBgYGAKCiAg
        ICBAbWV0aG9kIHNsaWNlCiAgICBAcGFyYW0ge0ludGVnZXJ9IGJlZ2luSW5k
        ZXggKE9wdGlvbmFsKSBpbmRleCB0byBiZWdpbiBzbGljaW5nIGZyb20uCiAg
        ICBAcGFyYW0ge0ludGVnZXJ9IGVuZEluZGV4IChPcHRpb25hbCkgaW5kZXgg
        dG8gZW5kIHRoZSBzbGljZSBhdC4KICAgIEByZXR1cm4ge0FycmF5fSBOZXcg
        YXJyYXkgd2l0aCBzcGVjaWZpZWQgc2xpY2UKICAqLwogIHNsaWNlOiBmdW5j
        dGlvbihiZWdpbkluZGV4LCBlbmRJbmRleCkgewogICAgdmFyIHJldCA9IEVt
        YmVyLkEoKTsKICAgIHZhciBsZW5ndGggPSBnZXQodGhpcywgJ2xlbmd0aCcp
        IDsKICAgIGlmIChpc05vbmUoYmVnaW5JbmRleCkpIGJlZ2luSW5kZXggPSAw
        IDsKICAgIGlmIChpc05vbmUoZW5kSW5kZXgpIHx8IChlbmRJbmRleCA+IGxl
        bmd0aCkpIGVuZEluZGV4ID0gbGVuZ3RoIDsKCiAgICBpZiAoYmVnaW5JbmRl
        eCA8IDApIGJlZ2luSW5kZXggPSBsZW5ndGggKyBiZWdpbkluZGV4OwogICAg
        aWYgKGVuZEluZGV4IDwgMCkgZW5kSW5kZXggPSBsZW5ndGggKyBlbmRJbmRl
        eDsKCiAgICB3aGlsZShiZWdpbkluZGV4IDwgZW5kSW5kZXgpIHsKICAgICAg
        cmV0W3JldC5sZW5ndGhdID0gdGhpcy5vYmplY3RBdChiZWdpbkluZGV4Kysp
        IDsKICAgIH0KICAgIHJldHVybiByZXQgOwogIH0sCgogIC8qKgogICAgUmV0
        dXJucyB0aGUgaW5kZXggb2YgdGhlIGdpdmVuIG9iamVjdCdzIGZpcnN0IG9j
        Y3VycmVuY2UuCiAgICBJZiBubyBgc3RhcnRBdGAgYXJndW1lbnQgaXMgZ2l2
        ZW4sIHRoZSBzdGFydGluZyBsb2NhdGlvbiB0bwogICAgc2VhcmNoIGlzIDAu
        IElmIGl0J3MgbmVnYXRpdmUsIHdpbGwgY291bnQgYmFja3dhcmQgZnJvbQog
        ICAgdGhlIGVuZCBvZiB0aGUgYXJyYXkuIFJldHVybnMgLTEgaWYgbm8gbWF0
        Y2ggaXMgZm91bmQuCgogICAgYGBgamF2YXNjcmlwdAogICAgdmFyIGFyciA9
        IFsiYSIsICJiIiwgImMiLCAiZCIsICJhIl07CiAgICBhcnIuaW5kZXhPZigi
        YSIpOyAgICAgICAvLyAgMAogICAgYXJyLmluZGV4T2YoInoiKTsgICAgICAg
        Ly8gLTEKICAgIGFyci5pbmRleE9mKCJhIiwgMik7ICAgIC8vICA0CiAgICBh
        cnIuaW5kZXhPZigiYSIsIC0xKTsgICAvLyAgNAogICAgYXJyLmluZGV4T2Yo
        ImIiLCAzKTsgICAgLy8gLTEKICAgIGFyci5pbmRleE9mKCJhIiwgMTAwKTsg
        IC8vIC0xCiAgICBgYGAKCiAgICBAbWV0aG9kIGluZGV4T2YKICAgIEBwYXJh
        bSB7T2JqZWN0fSBvYmplY3QgdGhlIGl0ZW0gdG8gc2VhcmNoIGZvcgogICAg
        QHBhcmFtIHtOdW1iZXJ9IHN0YXJ0QXQgb3B0aW9uYWwgc3RhcnRpbmcgbG9j
        YXRpb24gdG8gc2VhcmNoLCBkZWZhdWx0IDAKICAgIEByZXR1cm4ge051bWJl
        cn0gaW5kZXggb3IgLTEgaWYgbm90IGZvdW5kCiAgKi8KICBpbmRleE9mOiBm
        dW5jdGlvbihvYmplY3QsIHN0YXJ0QXQpIHsKICAgIHZhciBpZHgsIGxlbiA9
        IGdldCh0aGlzLCAnbGVuZ3RoJyk7CgogICAgaWYgKHN0YXJ0QXQgPT09IHVu
        ZGVmaW5lZCkgc3RhcnRBdCA9IDA7CiAgICBpZiAoc3RhcnRBdCA8IDApIHN0
        YXJ0QXQgKz0gbGVuOwoKICAgIGZvcihpZHg9c3RhcnRBdDtpZHg8bGVuO2lk
        eCsrKSB7CiAgICAgIGlmICh0aGlzLm9iamVjdEF0KGlkeCkgPT09IG9iamVj
        dCkgcmV0dXJuIGlkeCA7CiAgICB9CiAgICByZXR1cm4gLTE7CiAgfSwKCiAg
        LyoqCiAgICBSZXR1cm5zIHRoZSBpbmRleCBvZiB0aGUgZ2l2ZW4gb2JqZWN0
        J3MgbGFzdCBvY2N1cnJlbmNlLgogICAgSWYgbm8gYHN0YXJ0QXRgIGFyZ3Vt
        ZW50IGlzIGdpdmVuLCB0aGUgc2VhcmNoIHN0YXJ0cyBmcm9tCiAgICB0aGUg
        bGFzdCBwb3NpdGlvbi4gSWYgaXQncyBuZWdhdGl2ZSwgd2lsbCBjb3VudCBi
        YWNrd2FyZAogICAgZnJvbSB0aGUgZW5kIG9mIHRoZSBhcnJheS4gUmV0dXJu
        cyAtMSBpZiBubyBtYXRjaCBpcyBmb3VuZC4KCiAgICBgYGBqYXZhc2NyaXB0
        CiAgICB2YXIgYXJyID0gWyJhIiwgImIiLCAiYyIsICJkIiwgImEiXTsKICAg
        IGFyci5sYXN0SW5kZXhPZigiYSIpOyAgICAgICAvLyAgNAogICAgYXJyLmxh
        c3RJbmRleE9mKCJ6Iik7ICAgICAgIC8vIC0xCiAgICBhcnIubGFzdEluZGV4
        T2YoImEiLCAyKTsgICAgLy8gIDAKICAgIGFyci5sYXN0SW5kZXhPZigiYSIs
        IC0xKTsgICAvLyAgNAogICAgYXJyLmxhc3RJbmRleE9mKCJiIiwgMyk7ICAg
        IC8vICAxCiAgICBhcnIubGFzdEluZGV4T2YoImEiLCAxMDApOyAgLy8gIDQK
        ICAgIGBgYAoKICAgIEBtZXRob2QgbGFzdEluZGV4T2YKICAgIEBwYXJhbSB7
        T2JqZWN0fSBvYmplY3QgdGhlIGl0ZW0gdG8gc2VhcmNoIGZvcgogICAgQHBh
        cmFtIHtOdW1iZXJ9IHN0YXJ0QXQgb3B0aW9uYWwgc3RhcnRpbmcgbG9jYXRp
        b24gdG8gc2VhcmNoLCBkZWZhdWx0IDAKICAgIEByZXR1cm4ge051bWJlcn0g
        aW5kZXggb3IgLTEgaWYgbm90IGZvdW5kCiAgKi8KICBsYXN0SW5kZXhPZjog
        ZnVuY3Rpb24ob2JqZWN0LCBzdGFydEF0KSB7CiAgICB2YXIgaWR4LCBsZW4g
        PSBnZXQodGhpcywgJ2xlbmd0aCcpOwoKICAgIGlmIChzdGFydEF0ID09PSB1
        bmRlZmluZWQgfHwgc3RhcnRBdCA+PSBsZW4pIHN0YXJ0QXQgPSBsZW4tMTsK
        ICAgIGlmIChzdGFydEF0IDwgMCkgc3RhcnRBdCArPSBsZW47CgogICAgZm9y
        KGlkeD1zdGFydEF0O2lkeD49MDtpZHgtLSkgewogICAgICBpZiAodGhpcy5v
        YmplY3RBdChpZHgpID09PSBvYmplY3QpIHJldHVybiBpZHggOwogICAgfQog
        ICAgcmV0dXJuIC0xOwogIH0sCgogIC8vIC4uLi4uLi4uLi4uLi4uLi4uLi4u
        Li4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4KICAvLyBB
        UlJBWSBPQlNFUlZFUlMKICAvLwoKICAvKioKICAgIEFkZHMgYW4gYXJyYXkg
        b2JzZXJ2ZXIgdG8gdGhlIHJlY2VpdmluZyBhcnJheS4gVGhlIGFycmF5IG9i
        c2VydmVyIG9iamVjdAogICAgbm9ybWFsbHkgbXVzdCBpbXBsZW1lbnQgdHdv
        IG1ldGhvZHM6CgogICAgKiBgYXJyYXlXaWxsQ2hhbmdlKG9ic2VydmVkT2Jq
        LCBzdGFydCwgcmVtb3ZlQ291bnQsIGFkZENvdW50KWAgLSBUaGlzIG1ldGhv
        ZCB3aWxsIGJlCiAgICAgIGNhbGxlZCBqdXN0IGJlZm9yZSB0aGUgYXJyYXkg
        aXMgbW9kaWZpZWQuCiAgICAqIGBhcnJheURpZENoYW5nZShvYnNlcnZlZE9i
        aiwgc3RhcnQsIHJlbW92ZUNvdW50LCBhZGRDb3VudClgIC0gVGhpcyBtZXRo
        b2Qgd2lsbCBiZQogICAgICBjYWxsZWQganVzdCBhZnRlciB0aGUgYXJyYXkg
        aXMgbW9kaWZpZWQuCgogICAgQm90aCBjYWxsYmFja3Mgd2lsbCBiZSBwYXNz
        ZWQgdGhlIG9ic2VydmVkIG9iamVjdCwgc3RhcnRpbmcgaW5kZXggb2YgdGhl
        CiAgICBjaGFuZ2UgYXMgd2VsbCBhIGEgY291bnQgb2YgdGhlIGl0ZW1zIHRv
        IGJlIHJlbW92ZWQgYW5kIGFkZGVkLiBZb3UgY2FuIHVzZQogICAgdGhlc2Ug
        Y2FsbGJhY2tzIHRvIG9wdGlvbmFsbHkgaW5zcGVjdCB0aGUgYXJyYXkgZHVy
        aW5nIHRoZSBjaGFuZ2UsIGNsZWFyCiAgICBjYWNoZXMsIG9yIGRvIGFueSBv
        dGhlciBib29ra2VlcGluZyBuZWNlc3NhcnkuCgogICAgSW4gYWRkaXRpb24g
        dG8gcGFzc2luZyBhIHRhcmdldCwgeW91IGNhbiBhbHNvIGluY2x1ZGUgYW4g
        b3B0aW9ucyBoYXNoCiAgICB3aGljaCB5b3UgY2FuIHVzZSB0byBvdmVycmlk
        ZSB0aGUgbWV0aG9kIG5hbWVzIHRoYXQgd2lsbCBiZSBpbnZva2VkIG9uIHRo
        ZQogICAgdGFyZ2V0LgoKICAgIEBtZXRob2QgYWRkQXJyYXlPYnNlcnZlcgog
        ICAgQHBhcmFtIHtPYmplY3R9IHRhcmdldCBUaGUgb2JzZXJ2ZXIgb2JqZWN0
        LgogICAgQHBhcmFtIHtIYXNofSBvcHRzIE9wdGlvbmFsIGhhc2ggb2YgY29u
        ZmlndXJhdGlvbiBvcHRpb25zIGluY2x1ZGluZwogICAgICBgd2lsbENoYW5n
        ZWAgYW5kIGBkaWRDaGFuZ2VgIG9wdGlvbi4KICAgIEByZXR1cm4ge0VtYmVy
        LkFycmF5fSByZWNlaXZlcgogICovCiAgYWRkQXJyYXlPYnNlcnZlcjogZnVu
        Y3Rpb24odGFyZ2V0LCBvcHRzKSB7CiAgICB2YXIgd2lsbENoYW5nZSA9IChv
        cHRzICYmIG9wdHMud2lsbENoYW5nZSkgfHwgJ2FycmF5V2lsbENoYW5nZScs
        CiAgICAgICAgZGlkQ2hhbmdlICA9IChvcHRzICYmIG9wdHMuZGlkQ2hhbmdl
        KSB8fCAnYXJyYXlEaWRDaGFuZ2UnOwoKICAgIHZhciBoYXNPYnNlcnZlcnMg
        PSBnZXQodGhpcywgJ2hhc0FycmF5T2JzZXJ2ZXJzJyk7CiAgICBpZiAoIWhh
        c09ic2VydmVycykgRW1iZXIucHJvcGVydHlXaWxsQ2hhbmdlKHRoaXMsICdo
        YXNBcnJheU9ic2VydmVycycpOwogICAgRW1iZXIuYWRkTGlzdGVuZXIodGhp
        cywgJ0BhcnJheTpiZWZvcmUnLCB0YXJnZXQsIHdpbGxDaGFuZ2UpOwogICAg
        RW1iZXIuYWRkTGlzdGVuZXIodGhpcywgJ0BhcnJheTpjaGFuZ2UnLCB0YXJn
        ZXQsIGRpZENoYW5nZSk7CiAgICBpZiAoIWhhc09ic2VydmVycykgRW1iZXIu
        cHJvcGVydHlEaWRDaGFuZ2UodGhpcywgJ2hhc0FycmF5T2JzZXJ2ZXJzJyk7
        CiAgICByZXR1cm4gdGhpczsKICB9LAoKICAvKioKICAgIFJlbW92ZXMgYW4g
        YXJyYXkgb2JzZXJ2ZXIgZnJvbSB0aGUgb2JqZWN0IGlmIHRoZSBvYnNlcnZl
        ciBpcyBjdXJyZW50CiAgICByZWdpc3RlcmVkLiBDYWxsaW5nIHRoaXMgbWV0
        aG9kIG11bHRpcGxlIHRpbWVzIHdpdGggdGhlIHNhbWUgb2JqZWN0IHdpbGwK
        ICAgIGhhdmUgbm8gZWZmZWN0LgoKICAgIEBtZXRob2QgcmVtb3ZlQXJyYXlP
        YnNlcnZlcgogICAgQHBhcmFtIHtPYmplY3R9IHRhcmdldCBUaGUgb2JqZWN0
        IG9ic2VydmluZyB0aGUgYXJyYXkuCiAgICBAcGFyYW0ge0hhc2h9IG9wdHMg
        T3B0aW9uYWwgaGFzaCBvZiBjb25maWd1cmF0aW9uIG9wdGlvbnMgaW5jbHVk
        aW5nCiAgICAgIGB3aWxsQ2hhbmdlYCBhbmQgYGRpZENoYW5nZWAgb3B0aW9u
        LgogICAgQHJldHVybiB7RW1iZXIuQXJyYXl9IHJlY2VpdmVyCiAgKi8KICBy
        ZW1vdmVBcnJheU9ic2VydmVyOiBmdW5jdGlvbih0YXJnZXQsIG9wdHMpIHsK
        ICAgIHZhciB3aWxsQ2hhbmdlID0gKG9wdHMgJiYgb3B0cy53aWxsQ2hhbmdl
        KSB8fCAnYXJyYXlXaWxsQ2hhbmdlJywKICAgICAgICBkaWRDaGFuZ2UgID0g
        KG9wdHMgJiYgb3B0cy5kaWRDaGFuZ2UpIHx8ICdhcnJheURpZENoYW5nZSc7
        CgogICAgdmFyIGhhc09ic2VydmVycyA9IGdldCh0aGlzLCAnaGFzQXJyYXlP
        YnNlcnZlcnMnKTsKICAgIGlmIChoYXNPYnNlcnZlcnMpIEVtYmVyLnByb3Bl
        cnR5V2lsbENoYW5nZSh0aGlzLCAnaGFzQXJyYXlPYnNlcnZlcnMnKTsKICAg
        IEVtYmVyLnJlbW92ZUxpc3RlbmVyKHRoaXMsICdAYXJyYXk6YmVmb3JlJywg
        dGFyZ2V0LCB3aWxsQ2hhbmdlKTsKICAgIEVtYmVyLnJlbW92ZUxpc3RlbmVy
        KHRoaXMsICdAYXJyYXk6Y2hhbmdlJywgdGFyZ2V0LCBkaWRDaGFuZ2UpOwog
        ICAgaWYgKGhhc09ic2VydmVycykgRW1iZXIucHJvcGVydHlEaWRDaGFuZ2Uo
        dGhpcywgJ2hhc0FycmF5T2JzZXJ2ZXJzJyk7CiAgICByZXR1cm4gdGhpczsK
        ICB9LAoKICAvKioKICAgIEJlY29tZXMgdHJ1ZSB3aGVuZXZlciB0aGUgYXJy
        YXkgY3VycmVudGx5IGhhcyBvYnNlcnZlcnMgd2F0Y2hpbmcgY2hhbmdlcwog
        ICAgb24gdGhlIGFycmF5LgoKICAgIEBwcm9wZXJ0eSBCb29sZWFuCiAgKi8K
        ICBoYXNBcnJheU9ic2VydmVyczogRW1iZXIuY29tcHV0ZWQoZnVuY3Rpb24o
        KSB7CiAgICByZXR1cm4gRW1iZXIuaGFzTGlzdGVuZXJzKHRoaXMsICdAYXJy
        YXk6Y2hhbmdlJykgfHwgRW1iZXIuaGFzTGlzdGVuZXJzKHRoaXMsICdAYXJy
        YXk6YmVmb3JlJyk7CiAgfSksCgogIC8qKgogICAgSWYgeW91IGFyZSBpbXBs
        ZW1lbnRpbmcgYW4gb2JqZWN0IHRoYXQgc3VwcG9ydHMgYEVtYmVyLkFycmF5
        YCwgY2FsbCB0aGlzCiAgICBtZXRob2QganVzdCBiZWZvcmUgdGhlIGFycmF5
        IGNvbnRlbnQgY2hhbmdlcyB0byBub3RpZnkgYW55IG9ic2VydmVycyBhbmQK
        ICAgIGludmFsaWRhdGUgYW55IHJlbGF0ZWQgcHJvcGVydGllcy4gUGFzcyB0
        aGUgc3RhcnRpbmcgaW5kZXggb2YgdGhlIGNoYW5nZQogICAgYXMgd2VsbCBh
        cyBhIGRlbHRhIG9mIHRoZSBhbW91bnRzIHRvIGNoYW5nZS4KCiAgICBAbWV0
        aG9kIGFycmF5Q29udGVudFdpbGxDaGFuZ2UKICAgIEBwYXJhbSB7TnVtYmVy
        fSBzdGFydElkeCBUaGUgc3RhcnRpbmcgaW5kZXggaW4gdGhlIGFycmF5IHRo
        YXQgd2lsbCBjaGFuZ2UuCiAgICBAcGFyYW0ge051bWJlcn0gcmVtb3ZlQW10
        IFRoZSBudW1iZXIgb2YgaXRlbXMgdGhhdCB3aWxsIGJlIHJlbW92ZWQuIElm
        IHlvdQogICAgICBwYXNzIGBudWxsYCBhc3N1bWVzIDAKICAgIEBwYXJhbSB7
        TnVtYmVyfSBhZGRBbXQgVGhlIG51bWJlciBvZiBpdGVtcyB0aGF0IHdpbGwg
        YmUgYWRkZWQuIElmIHlvdQogICAgICBwYXNzIGBudWxsYCBhc3N1bWVzIDAu
        CiAgICBAcmV0dXJuIHtFbWJlci5BcnJheX0gcmVjZWl2ZXIKICAqLwogIGFy
        cmF5Q29udGVudFdpbGxDaGFuZ2U6IGZ1bmN0aW9uKHN0YXJ0SWR4LCByZW1v
        dmVBbXQsIGFkZEFtdCkgewoKICAgIC8vIGlmIG5vIGFyZ3MgYXJlIHBhc3Nl
        ZCBhc3N1bWUgZXZlcnl0aGluZyBjaGFuZ2VzCiAgICBpZiAoc3RhcnRJZHg9
        PT11bmRlZmluZWQpIHsKICAgICAgc3RhcnRJZHggPSAwOwogICAgICByZW1v
        dmVBbXQgPSBhZGRBbXQgPSAtMTsKICAgIH0gZWxzZSB7CiAgICAgIGlmIChy
        ZW1vdmVBbXQgPT09IHVuZGVmaW5lZCkgcmVtb3ZlQW10PS0xOwogICAgICBp
        ZiAoYWRkQW10ICAgID09PSB1bmRlZmluZWQpIGFkZEFtdD0tMTsKICAgIH0K
        CiAgICAvLyBNYWtlIHN1cmUgdGhlIEBlYWNoIHByb3h5IGlzIHNldCB1cCBp
        ZiBhbnlvbmUgaXMgb2JzZXJ2aW5nIEBlYWNoCiAgICBpZiAoRW1iZXIuaXNX
        YXRjaGluZyh0aGlzLCAnQGVhY2gnKSkgeyBnZXQodGhpcywgJ0BlYWNoJyk7
        IH0KCiAgICBFbWJlci5zZW5kRXZlbnQodGhpcywgJ0BhcnJheTpiZWZvcmUn
        LCBbdGhpcywgc3RhcnRJZHgsIHJlbW92ZUFtdCwgYWRkQW10XSk7CgogICAg
        dmFyIHJlbW92aW5nLCBsaW07CiAgICBpZiAoc3RhcnRJZHg+PTAgJiYgcmVt
        b3ZlQW10Pj0wICYmIGdldCh0aGlzLCAnaGFzRW51bWVyYWJsZU9ic2VydmVy
        cycpKSB7CiAgICAgIHJlbW92aW5nID0gW107CiAgICAgIGxpbSA9IHN0YXJ0
        SWR4K3JlbW92ZUFtdDsKICAgICAgZm9yKHZhciBpZHg9c3RhcnRJZHg7aWR4
        PGxpbTtpZHgrKykgcmVtb3ZpbmcucHVzaCh0aGlzLm9iamVjdEF0KGlkeCkp
        OwogICAgfSBlbHNlIHsKICAgICAgcmVtb3ZpbmcgPSByZW1vdmVBbXQ7CiAg
        ICB9CgogICAgdGhpcy5lbnVtZXJhYmxlQ29udGVudFdpbGxDaGFuZ2UocmVt
        b3ZpbmcsIGFkZEFtdCk7CgogICAgcmV0dXJuIHRoaXM7CiAgfSwKCiAgLyoq
        CiAgICBJZiB5b3UgYXJlIGltcGxlbWVudGluZyBhbiBvYmplY3QgdGhhdCBz
        dXBwb3J0cyBgRW1iZXIuQXJyYXlgLCBjYWxsIHRoaXMKICAgIG1ldGhvZCBq
        dXN0IGFmdGVyIHRoZSBhcnJheSBjb250ZW50IGNoYW5nZXMgdG8gbm90aWZ5
        IGFueSBvYnNlcnZlcnMgYW5kCiAgICBpbnZhbGlkYXRlIGFueSByZWxhdGVk
        IHByb3BlcnRpZXMuIFBhc3MgdGhlIHN0YXJ0aW5nIGluZGV4IG9mIHRoZSBj
        aGFuZ2UKICAgIGFzIHdlbGwgYXMgYSBkZWx0YSBvZiB0aGUgYW1vdW50cyB0
        byBjaGFuZ2UuCgogICAgQG1ldGhvZCBhcnJheUNvbnRlbnREaWRDaGFuZ2UK
        ICAgIEBwYXJhbSB7TnVtYmVyfSBzdGFydElkeCBUaGUgc3RhcnRpbmcgaW5k
        ZXggaW4gdGhlIGFycmF5IHRoYXQgZGlkIGNoYW5nZS4KICAgIEBwYXJhbSB7
        TnVtYmVyfSByZW1vdmVBbXQgVGhlIG51bWJlciBvZiBpdGVtcyB0aGF0IHdl
        cmUgcmVtb3ZlZC4gSWYgeW91CiAgICAgIHBhc3MgYG51bGxgIGFzc3VtZXMg
        MAogICAgQHBhcmFtIHtOdW1iZXJ9IGFkZEFtdCBUaGUgbnVtYmVyIG9mIGl0
        ZW1zIHRoYXQgd2VyZSBhZGRlZC4gSWYgeW91CiAgICAgIHBhc3MgYG51bGxg
        IGFzc3VtZXMgMC4KICAgIEByZXR1cm4ge0VtYmVyLkFycmF5fSByZWNlaXZl
        cgogICovCiAgYXJyYXlDb250ZW50RGlkQ2hhbmdlOiBmdW5jdGlvbihzdGFy
        dElkeCwgcmVtb3ZlQW10LCBhZGRBbXQpIHsKCiAgICAvLyBpZiBubyBhcmdz
        IGFyZSBwYXNzZWQgYXNzdW1lIGV2ZXJ5dGhpbmcgY2hhbmdlcwogICAgaWYg
        KHN0YXJ0SWR4PT09dW5kZWZpbmVkKSB7CiAgICAgIHN0YXJ0SWR4ID0gMDsK
        ICAgICAgcmVtb3ZlQW10ID0gYWRkQW10ID0gLTE7CiAgICB9IGVsc2Ugewog
        ICAgICBpZiAocmVtb3ZlQW10ID09PSB1bmRlZmluZWQpIHJlbW92ZUFtdD0t
        MTsKICAgICAgaWYgKGFkZEFtdCAgICA9PT0gdW5kZWZpbmVkKSBhZGRBbXQ9
        LTE7CiAgICB9CgogICAgdmFyIGFkZGluZywgbGltOwogICAgaWYgKHN0YXJ0
        SWR4Pj0wICYmIGFkZEFtdD49MCAmJiBnZXQodGhpcywgJ2hhc0VudW1lcmFi
        bGVPYnNlcnZlcnMnKSkgewogICAgICBhZGRpbmcgPSBbXTsKICAgICAgbGlt
        ID0gc3RhcnRJZHgrYWRkQW10OwogICAgICBmb3IodmFyIGlkeD1zdGFydElk
        eDtpZHg8bGltO2lkeCsrKSBhZGRpbmcucHVzaCh0aGlzLm9iamVjdEF0KGlk
        eCkpOwogICAgfSBlbHNlIHsKICAgICAgYWRkaW5nID0gYWRkQW10OwogICAg
        fQoKICAgIHRoaXMuZW51bWVyYWJsZUNvbnRlbnREaWRDaGFuZ2UocmVtb3Zl
        QW10LCBhZGRpbmcpOwogICAgRW1iZXIuc2VuZEV2ZW50KHRoaXMsICdAYXJy
        YXk6Y2hhbmdlJywgW3RoaXMsIHN0YXJ0SWR4LCByZW1vdmVBbXQsIGFkZEFt
        dF0pOwoKICAgIHZhciBsZW5ndGggICAgICA9IGdldCh0aGlzLCAnbGVuZ3Ro
        JyksCiAgICAgICAgY2FjaGVkRmlyc3QgPSBjYWNoZUZvcih0aGlzLCAnZmly
        c3RPYmplY3QnKSwKICAgICAgICBjYWNoZWRMYXN0ICA9IGNhY2hlRm9yKHRo
        aXMsICdsYXN0T2JqZWN0Jyk7CiAgICBpZiAodGhpcy5vYmplY3RBdCgwKSAh
        PT0gY2FjaGVkRmlyc3QpIHsKICAgICAgRW1iZXIucHJvcGVydHlXaWxsQ2hh
        bmdlKHRoaXMsICdmaXJzdE9iamVjdCcpOwogICAgICBFbWJlci5wcm9wZXJ0
        eURpZENoYW5nZSh0aGlzLCAnZmlyc3RPYmplY3QnKTsKICAgIH0KICAgIGlm
        ICh0aGlzLm9iamVjdEF0KGxlbmd0aC0xKSAhPT0gY2FjaGVkTGFzdCkgewog
        ICAgICBFbWJlci5wcm9wZXJ0eVdpbGxDaGFuZ2UodGhpcywgJ2xhc3RPYmpl
        Y3QnKTsKICAgICAgRW1iZXIucHJvcGVydHlEaWRDaGFuZ2UodGhpcywgJ2xh
        c3RPYmplY3QnKTsKICAgIH0KCiAgICByZXR1cm4gdGhpczsKICB9LAoKICAv
        LyAuLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4u
        Li4uLi4uLi4uLi4uLi4uCiAgLy8gRU5VTUVSQVRFRCBQUk9QRVJUSUVTCiAg
        Ly8KCiAgLyoqCiAgICBSZXR1cm5zIGEgc3BlY2lhbCBvYmplY3QgdGhhdCBj
        YW4gYmUgdXNlZCB0byBvYnNlcnZlIGluZGl2aWR1YWwgcHJvcGVydGllcwog
        ICAgb24gdGhlIGFycmF5LiBKdXN0IGdldCBhbiBlcXVpdmFsZW50IHByb3Bl
        cnR5IG9uIHRoaXMgb2JqZWN0IGFuZCBpdCB3aWxsCiAgICByZXR1cm4gYW4g
        ZW51bWVyYWJsZSB0aGF0IG1hcHMgYXV0b21hdGljYWxseSB0byB0aGUgbmFt
        ZWQga2V5IG9uIHRoZQogICAgbWVtYmVyIG9iamVjdHMuCgogICAgSWYgeW91
        IG1lcmVseSB3YW50IHRvIHdhdGNoIGZvciBhbnkgaXRlbXMgYmVpbmcgYWRk
        ZWQgb3IgcmVtb3ZlZCB0byB0aGUgYXJyYXksCiAgICB1c2UgdGhlIGBbXWAg
        cHJvcGVydHkgaW5zdGVhZCBvZiBgQGVhY2hgLgoKICAgIEBwcm9wZXJ0eSBA
        ZWFjaAogICovCiAgJ0BlYWNoJzogRW1iZXIuY29tcHV0ZWQoZnVuY3Rpb24o
        KSB7CiAgICBpZiAoIXRoaXMuX19lYWNoKSB0aGlzLl9fZWFjaCA9IG5ldyBF
        bWJlci5FYWNoUHJveHkodGhpcyk7CiAgICByZXR1cm4gdGhpcy5fX2VhY2g7
        CiAgfSkKCn0pIDsKCn0pKCk7CgoKCihmdW5jdGlvbigpIHsKdmFyIGVfZ2V0
        ID0gRW1iZXIuZ2V0LAogICAgc2V0ID0gRW1iZXIuc2V0LAogICAgZ3VpZEZv
        ciA9IEVtYmVyLmd1aWRGb3IsCiAgICBtZXRhRm9yID0gRW1iZXIubWV0YSwK
        ICAgIHByb3BlcnR5V2lsbENoYW5nZSA9IEVtYmVyLnByb3BlcnR5V2lsbENo
        YW5nZSwKICAgIHByb3BlcnR5RGlkQ2hhbmdlID0gRW1iZXIucHJvcGVydHlE
        aWRDaGFuZ2UsCiAgICBhZGRCZWZvcmVPYnNlcnZlciA9IEVtYmVyLmFkZEJl
        Zm9yZU9ic2VydmVyLAogICAgcmVtb3ZlQmVmb3JlT2JzZXJ2ZXIgPSBFbWJl
        ci5yZW1vdmVCZWZvcmVPYnNlcnZlciwKICAgIGFkZE9ic2VydmVyID0gRW1i
        ZXIuYWRkT2JzZXJ2ZXIsCiAgICByZW1vdmVPYnNlcnZlciA9IEVtYmVyLnJl
        bW92ZU9ic2VydmVyLAogICAgQ29tcHV0ZWRQcm9wZXJ0eSA9IEVtYmVyLkNv
        bXB1dGVkUHJvcGVydHksCiAgICBhX3NsaWNlID0gW10uc2xpY2UsCiAgICBv
        X2NyZWF0ZSA9IEVtYmVyLmNyZWF0ZSwKICAgIGZvckVhY2ggPSBFbWJlci5F
        bnVtZXJhYmxlVXRpbHMuZm9yRWFjaCwKICAgIC8vIEhlcmUgd2UgZXhwbGlj
        aXRseSBkb24ndCBhbGxvdyBgQGVhY2guZm9vYDsgaXQgd291bGQgcmVxdWly
        ZSBzb21lIHNwZWNpYWwKICAgIC8vIHRlc3RpbmcsIGJ1dCB0aGVyZSdzIG5v
        IHBhcnRpY3VsYXIgcmVhc29uIHdoeSBpdCBzaG91bGQgYmUgZGlzYWxsb3dl
        ZC4KICAgIGVhY2hQcm9wZXJ0eVBhdHRlcm4gPSAvXiguKilcLkBlYWNoXC4o
        LiopLywKICAgIGRvdWJsZUVhY2hQcm9wZXJ0eVBhdHRlcm4gPSAvKC4qXC5A
        ZWFjaCl7Mix9LzsKCmZ1bmN0aW9uIGdldChvYmosIGtleSkgewogIAogICAg
        aWYgKGtleSA9PT0gJ0B0aGlzJykgewogICAgICByZXR1cm4gb2JqOwogICAg
        fQogIAoKICByZXR1cm4gZV9nZXQob2JqLCBrZXkpOwp9CgovKgogIFRyYWNr
        cyBjaGFuZ2VzIHRvIGRlcGVuZGVudCBhcnJheXMsIGFzIHdlbGwgYXMgdG8g
        cHJvcGVydGllcyBvZiBpdGVtcyBpbgogIGRlcGVuZGVudCBhcnJheXMuCgog
        IEBjbGFzcyBEZXBlbmRlbnRBcnJheXNPYnNlcnZlcgoqLwpmdW5jdGlvbiBE
        ZXBlbmRlbnRBcnJheXNPYnNlcnZlcihjYWxsYmFja3MsIGNwLCBpbnN0YW5j
        ZU1ldGEsIGNvbnRleHQsIHByb3BlcnR5TmFtZSwgc3VnYXJNZXRhKSB7CiAg
        Ly8gdXNlciBzcGVjaWZpZWQgY2FsbGJhY2tzIGZvciBgYWRkZWRJdGVtYCBh
        bmQgYHJlbW92ZWRJdGVtYAogIHRoaXMuY2FsbGJhY2tzID0gY2FsbGJhY2tz
        OwoKICAvLyB0aGUgY29tcHV0ZWQgcHJvcGVydHk6IHJlbWVtYmVyIHRoZXNl
        IGFyZSBzaGFyZWQgYWNyb3NzIGluc3RhbmNlcwogIHRoaXMuY3AgPSBjcDsK
        CiAgLy8gdGhlIFJlZHVjZUNvbXB1dGVkUHJvcGVydHlJbnN0YW5jZU1ldGEg
        dGhpcyBEZXBlbmRlbnRBcnJheXNPYnNlcnZlciBpcwogIC8vIGFzc29jaWF0
        ZWQgd2l0aAogIHRoaXMuaW5zdGFuY2VNZXRhID0gaW5zdGFuY2VNZXRhOwoK
        ICAvLyBBIG1hcCBvZiBhcnJheSBndWlkcyB0byBkZXBlbmRlbnRLZXlzLCBm
        b3IgdGhlIGdpdmVuIGNvbnRleHQuICBXZSB0cmFjawogIC8vIHRoaXMgYmVj
        YXVzZSB3ZSB3YW50IHRvIHNldCB1cCB0aGUgY29tcHV0ZWQgcHJvcGVydHkg
        cG90ZW50aWFsbHkgYmVmb3JlIHRoZQogIC8vIGRlcGVuZGVudCBhcnJheSBl
        dmVuIGV4aXN0cywgYnV0IHdoZW4gdGhlIGFycmF5IG9ic2VydmVyIGZpcmVz
        LCB3ZSBsYWNrCiAgLy8gZW5vdWdoIGNvbnRleHQgdG8ga25vdyB3aGF0IHRv
        IHVwZGF0ZTogd2UgY2FuIHJlY292ZXIgdGhhdCBjb250ZXh0IGJ5CiAgLy8g
        Z2V0dGluZyB0aGUgZGVwZW5kZW50S2V5LgogIHRoaXMuZGVwZW5kZW50S2V5
        c0J5R3VpZCA9IHt9OwoKICAvLyBhIG1hcCBvZiBkZXBlbmRlbnQgYXJyYXkg
        Z3VpZHMgLT4gRW1iZXIuVHJhY2tlZEFycmF5IGluc3RhbmNlcy4gIFdlIHVz
        ZQogIC8vIHRoaXMgdG8gbGF6aWx5IHJlY29tcHV0ZSBpbmRleGVzIGZvciBp
        dGVtIHByb3BlcnR5IG9ic2VydmVycy4KICB0aGlzLnRyYWNrZWRBcnJheXNC
        eUd1aWQgPSB7fTsKCiAgLy8gV2Ugc3VzcGVuZCBvYnNlcnZlcnMgdG8gaWdu
        b3JlIHJlcGxhY2VtZW50cyBmcm9tIGByZXNldGAgd2hlbiB0b3RhbGx5CiAg
        Ly8gcmVjb21wdXRpbmcuICBVbmZvcnR1bmF0ZWx5IHdlIGNhbm5vdCBwcm9w
        ZXJseSBzdXNwZW5kIHRoZSBvYnNlcnZlcnMKICAvLyBiZWNhdXNlIHdlIG9u
        bHkgaGF2ZSB0aGUga2V5OyBpbnN0ZWFkIHdlIG1ha2UgdGhlIG9ic2VydmVy
        cyBuby1vcHMKICB0aGlzLnN1c3BlbmRlZCA9IGZhbHNlOwoKICAvLyBUaGlz
        IGlzIHVzZWQgdG8gY29hbGVzY2UgaXRlbSBjaGFuZ2VzIGZyb20gcHJvcGVy
        dHkgb2JzZXJ2ZXJzLgogIHRoaXMuY2hhbmdlZEl0ZW1zID0ge307Cn0KCmZ1
        bmN0aW9uIEl0ZW1Qcm9wZXJ0eU9ic2VydmVyQ29udGV4dCAoZGVwZW5kZW50
        QXJyYXksIGluZGV4LCB0cmFja2VkQXJyYXkpIHsKICBFbWJlci5hc3NlcnQo
        IkludGVybmFsIGVycm9yOiB0cmFja2VkQXJyYXkgaXMgbnVsbCBvciB1bmRl
        ZmluZWQiLCB0cmFja2VkQXJyYXkpOwoKICB0aGlzLmRlcGVuZGVudEFycmF5
        ID0gZGVwZW5kZW50QXJyYXk7CiAgdGhpcy5pbmRleCA9IGluZGV4OwogIHRo
        aXMuaXRlbSA9IGRlcGVuZGVudEFycmF5Lm9iamVjdEF0KGluZGV4KTsKICB0
        aGlzLnRyYWNrZWRBcnJheSA9IHRyYWNrZWRBcnJheTsKICB0aGlzLmJlZm9y
        ZU9ic2VydmVyID0gbnVsbDsKICB0aGlzLm9ic2VydmVyID0gbnVsbDsKCiAg
        dGhpcy5kZXN0cm95ZWQgPSBmYWxzZTsKfQoKRGVwZW5kZW50QXJyYXlzT2Jz
        ZXJ2ZXIucHJvdG90eXBlID0gewogIHNldFZhbHVlOiBmdW5jdGlvbiAobmV3
        VmFsdWUpIHsKICAgIHRoaXMuaW5zdGFuY2VNZXRhLnNldFZhbHVlKG5ld1Zh
        bHVlLCB0cnVlKTsKICB9LAogIGdldFZhbHVlOiBmdW5jdGlvbiAoKSB7CiAg
        ICByZXR1cm4gdGhpcy5pbnN0YW5jZU1ldGEuZ2V0VmFsdWUoKTsKICB9LAoK
        ICBzZXR1cE9ic2VydmVyczogZnVuY3Rpb24gKGRlcGVuZGVudEFycmF5LCBk
        ZXBlbmRlbnRLZXkpIHsKICAgIEVtYmVyLmFzc2VydCgiZGVwZW5kZW50IGFy
        cmF5IG11c3QgYmUgYW4gYEVtYmVyLkFycmF5YCIsIEVtYmVyLkFycmF5LmRl
        dGVjdChkZXBlbmRlbnRBcnJheSkpOwoKICAgIHRoaXMuZGVwZW5kZW50S2V5
        c0J5R3VpZFtndWlkRm9yKGRlcGVuZGVudEFycmF5KV0gPSBkZXBlbmRlbnRL
        ZXk7CgogICAgZGVwZW5kZW50QXJyYXkuYWRkQXJyYXlPYnNlcnZlcih0aGlz
        LCB7CiAgICAgIHdpbGxDaGFuZ2U6ICdkZXBlbmRlbnRBcnJheVdpbGxDaGFu
        Z2UnLAogICAgICBkaWRDaGFuZ2U6ICdkZXBlbmRlbnRBcnJheURpZENoYW5n
        ZScKICAgIH0pOwoKICAgIGlmICh0aGlzLmNwLl9pdGVtUHJvcGVydHlLZXlz
        W2RlcGVuZGVudEtleV0pIHsKICAgICAgdGhpcy5zZXR1cFByb3BlcnR5T2Jz
        ZXJ2ZXJzKGRlcGVuZGVudEtleSwgdGhpcy5jcC5faXRlbVByb3BlcnR5S2V5
        c1tkZXBlbmRlbnRLZXldKTsKICAgIH0KICB9LAoKICB0ZWFyZG93bk9ic2Vy
        dmVyczogZnVuY3Rpb24gKGRlcGVuZGVudEFycmF5LCBkZXBlbmRlbnRLZXkp
        IHsKICAgIHZhciBpdGVtUHJvcGVydHlLZXlzID0gdGhpcy5jcC5faXRlbVBy
        b3BlcnR5S2V5c1tkZXBlbmRlbnRLZXldIHx8IFtdOwoKICAgIGRlbGV0ZSB0
        aGlzLmRlcGVuZGVudEtleXNCeUd1aWRbZ3VpZEZvcihkZXBlbmRlbnRBcnJh
        eSldOwoKICAgIHRoaXMudGVhcmRvd25Qcm9wZXJ0eU9ic2VydmVycyhkZXBl
        bmRlbnRLZXksIGl0ZW1Qcm9wZXJ0eUtleXMpOwoKICAgIGRlcGVuZGVudEFy
        cmF5LnJlbW92ZUFycmF5T2JzZXJ2ZXIodGhpcywgewogICAgICB3aWxsQ2hh
        bmdlOiAnZGVwZW5kZW50QXJyYXlXaWxsQ2hhbmdlJywKICAgICAgZGlkQ2hh
        bmdlOiAnZGVwZW5kZW50QXJyYXlEaWRDaGFuZ2UnCiAgICB9KTsKICB9LAoK
        ICBzdXNwZW5kQXJyYXlPYnNlcnZlcnM6IGZ1bmN0aW9uIChjYWxsYmFjaywg
        YmluZGluZykgewogICAgdmFyIG9sZFN1c3BlbmRlZCA9IHRoaXMuc3VzcGVu
        ZGVkOwogICAgdGhpcy5zdXNwZW5kZWQgPSB0cnVlOwogICAgY2FsbGJhY2su
        Y2FsbChiaW5kaW5nKTsKICAgIHRoaXMuc3VzcGVuZGVkID0gb2xkU3VzcGVu
        ZGVkOwogIH0sCgogIHNldHVwUHJvcGVydHlPYnNlcnZlcnM6IGZ1bmN0aW9u
        IChkZXBlbmRlbnRLZXksIGl0ZW1Qcm9wZXJ0eUtleXMpIHsKICAgIHZhciBk
        ZXBlbmRlbnRBcnJheSA9IGdldCh0aGlzLmluc3RhbmNlTWV0YS5jb250ZXh0
        LCBkZXBlbmRlbnRLZXkpLAogICAgICAgIGxlbmd0aCA9IGdldChkZXBlbmRl
        bnRBcnJheSwgJ2xlbmd0aCcpLAogICAgICAgIG9ic2VydmVyQ29udGV4dHMg
        PSBuZXcgQXJyYXkobGVuZ3RoKTsKCiAgICB0aGlzLnJlc2V0VHJhbnNmb3Jt
        YXRpb25zKGRlcGVuZGVudEtleSwgb2JzZXJ2ZXJDb250ZXh0cyk7CgogICAg
        Zm9yRWFjaChkZXBlbmRlbnRBcnJheSwgZnVuY3Rpb24gKGl0ZW0sIGluZGV4
        KSB7CiAgICAgIHZhciBvYnNlcnZlckNvbnRleHQgPSB0aGlzLmNyZWF0ZVBy
        b3BlcnR5T2JzZXJ2ZXJDb250ZXh0KGRlcGVuZGVudEFycmF5LCBpbmRleCwg
        dGhpcy50cmFja2VkQXJyYXlzQnlHdWlkW2RlcGVuZGVudEtleV0pOwogICAg
        ICBvYnNlcnZlckNvbnRleHRzW2luZGV4XSA9IG9ic2VydmVyQ29udGV4dDsK
        CiAgICAgIGZvckVhY2goaXRlbVByb3BlcnR5S2V5cywgZnVuY3Rpb24gKHBy
        b3BlcnR5S2V5KSB7CiAgICAgICAgYWRkQmVmb3JlT2JzZXJ2ZXIoaXRlbSwg
        cHJvcGVydHlLZXksIHRoaXMsIG9ic2VydmVyQ29udGV4dC5iZWZvcmVPYnNl
        cnZlcik7CiAgICAgICAgYWRkT2JzZXJ2ZXIoaXRlbSwgcHJvcGVydHlLZXks
        IHRoaXMsIG9ic2VydmVyQ29udGV4dC5vYnNlcnZlcik7CiAgICAgIH0sIHRo
        aXMpOwogICAgfSwgdGhpcyk7CiAgfSwKCiAgdGVhcmRvd25Qcm9wZXJ0eU9i
        c2VydmVyczogZnVuY3Rpb24gKGRlcGVuZGVudEtleSwgaXRlbVByb3BlcnR5
        S2V5cykgewogICAgdmFyIGRlcGVuZGVudEFycmF5T2JzZXJ2ZXIgPSB0aGlz
        LAogICAgICAgIHRyYWNrZWRBcnJheSA9IHRoaXMudHJhY2tlZEFycmF5c0J5
        R3VpZFtkZXBlbmRlbnRLZXldLAogICAgICAgIGJlZm9yZU9ic2VydmVyLAog
        ICAgICAgIG9ic2VydmVyLAogICAgICAgIGl0ZW07CgogICAgaWYgKCF0cmFj
        a2VkQXJyYXkpIHsgcmV0dXJuOyB9CgogICAgdHJhY2tlZEFycmF5LmFwcGx5
        KGZ1bmN0aW9uIChvYnNlcnZlckNvbnRleHRzLCBvZmZzZXQsIG9wZXJhdGlv
        bikgewogICAgICBpZiAob3BlcmF0aW9uID09PSBFbWJlci5UcmFja2VkQXJy
        YXkuREVMRVRFKSB7IHJldHVybjsgfQoKICAgICAgZm9yRWFjaChvYnNlcnZl
        ckNvbnRleHRzLCBmdW5jdGlvbiAob2JzZXJ2ZXJDb250ZXh0KSB7CiAgICAg
        ICAgb2JzZXJ2ZXJDb250ZXh0LmRlc3Ryb3llZCA9IHRydWU7CiAgICAgICAg
        YmVmb3JlT2JzZXJ2ZXIgPSBvYnNlcnZlckNvbnRleHQuYmVmb3JlT2JzZXJ2
        ZXI7CiAgICAgICAgb2JzZXJ2ZXIgPSBvYnNlcnZlckNvbnRleHQub2JzZXJ2
        ZXI7CiAgICAgICAgaXRlbSA9IG9ic2VydmVyQ29udGV4dC5pdGVtOwoKICAg
        ICAgICBmb3JFYWNoKGl0ZW1Qcm9wZXJ0eUtleXMsIGZ1bmN0aW9uIChwcm9w
        ZXJ0eUtleSkgewogICAgICAgICAgcmVtb3ZlQmVmb3JlT2JzZXJ2ZXIoaXRl
        bSwgcHJvcGVydHlLZXksIGRlcGVuZGVudEFycmF5T2JzZXJ2ZXIsIGJlZm9y
        ZU9ic2VydmVyKTsKICAgICAgICAgIHJlbW92ZU9ic2VydmVyKGl0ZW0sIHBy
        b3BlcnR5S2V5LCBkZXBlbmRlbnRBcnJheU9ic2VydmVyLCBvYnNlcnZlcik7
        CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSk7CiAgfSwKCiAgY3JlYXRl
        UHJvcGVydHlPYnNlcnZlckNvbnRleHQ6IGZ1bmN0aW9uIChkZXBlbmRlbnRB
        cnJheSwgaW5kZXgsIHRyYWNrZWRBcnJheSkgewogICAgdmFyIG9ic2VydmVy
        Q29udGV4dCA9IG5ldyBJdGVtUHJvcGVydHlPYnNlcnZlckNvbnRleHQoZGVw
        ZW5kZW50QXJyYXksIGluZGV4LCB0cmFja2VkQXJyYXkpOwoKICAgIHRoaXMu
        Y3JlYXRlUHJvcGVydHlPYnNlcnZlcihvYnNlcnZlckNvbnRleHQpOwoKICAg
        IHJldHVybiBvYnNlcnZlckNvbnRleHQ7CiAgfSwKCiAgY3JlYXRlUHJvcGVy
        dHlPYnNlcnZlcjogZnVuY3Rpb24gKG9ic2VydmVyQ29udGV4dCkgewogICAg
        dmFyIGRlcGVuZGVudEFycmF5T2JzZXJ2ZXIgPSB0aGlzOwoKICAgIG9ic2Vy
        dmVyQ29udGV4dC5iZWZvcmVPYnNlcnZlciA9IGZ1bmN0aW9uIChvYmosIGtl
        eU5hbWUpIHsKICAgICAgcmV0dXJuIGRlcGVuZGVudEFycmF5T2JzZXJ2ZXIu
        aXRlbVByb3BlcnR5V2lsbENoYW5nZShvYmosIGtleU5hbWUsIG9ic2VydmVy
        Q29udGV4dC5kZXBlbmRlbnRBcnJheSwgb2JzZXJ2ZXJDb250ZXh0KTsKICAg
        IH07CiAgICBvYnNlcnZlckNvbnRleHQub2JzZXJ2ZXIgPSBmdW5jdGlvbiAo
        b2JqLCBrZXlOYW1lKSB7CiAgICAgIHJldHVybiBkZXBlbmRlbnRBcnJheU9i
        c2VydmVyLml0ZW1Qcm9wZXJ0eURpZENoYW5nZShvYmosIGtleU5hbWUsIG9i
        c2VydmVyQ29udGV4dC5kZXBlbmRlbnRBcnJheSwgb2JzZXJ2ZXJDb250ZXh0
        KTsKICAgIH07CiAgfSwKCiAgcmVzZXRUcmFuc2Zvcm1hdGlvbnM6IGZ1bmN0
        aW9uIChkZXBlbmRlbnRLZXksIG9ic2VydmVyQ29udGV4dHMpIHsKICAgIHRo
        aXMudHJhY2tlZEFycmF5c0J5R3VpZFtkZXBlbmRlbnRLZXldID0gbmV3IEVt
        YmVyLlRyYWNrZWRBcnJheShvYnNlcnZlckNvbnRleHRzKTsKICB9LAoKICB0
        cmFja0FkZDogZnVuY3Rpb24gKGRlcGVuZGVudEtleSwgaW5kZXgsIG5ld0l0
        ZW1zKSB7CiAgICB2YXIgdHJhY2tlZEFycmF5ID0gdGhpcy50cmFja2VkQXJy
        YXlzQnlHdWlkW2RlcGVuZGVudEtleV07CiAgICBpZiAodHJhY2tlZEFycmF5
        KSB7CiAgICAgIHRyYWNrZWRBcnJheS5hZGRJdGVtcyhpbmRleCwgbmV3SXRl
        bXMpOwogICAgfQogIH0sCgogIHRyYWNrUmVtb3ZlOiBmdW5jdGlvbiAoZGVw
        ZW5kZW50S2V5LCBpbmRleCwgcmVtb3ZlZENvdW50KSB7CiAgICB2YXIgdHJh
        Y2tlZEFycmF5ID0gdGhpcy50cmFja2VkQXJyYXlzQnlHdWlkW2RlcGVuZGVu
        dEtleV07CgogICAgaWYgKHRyYWNrZWRBcnJheSkgewogICAgICByZXR1cm4g
        dHJhY2tlZEFycmF5LnJlbW92ZUl0ZW1zKGluZGV4LCByZW1vdmVkQ291bnQp
        OwogICAgfQoKICAgIHJldHVybiBbXTsKICB9LAoKICB1cGRhdGVJbmRleGVz
        OiBmdW5jdGlvbiAodHJhY2tlZEFycmF5LCBhcnJheSkgewogICAgdmFyIGxl
        bmd0aCA9IGdldChhcnJheSwgJ2xlbmd0aCcpOwogICAgLy8gT1BUSU1JWkU6
        IHdlIGNvdWxkIHN0b3AgdXBkYXRpbmcgb25jZSB3ZSBoaXQgdGhlIG9iamVj
        dCB3aG9zZSBvYnNlcnZlcgogICAgLy8gZmlyZWQ7IGllIHBhcnRpYWxseSBh
        cHBseSB0aGUgdHJhbnNmb3JtYXRpb25zCiAgICB0cmFja2VkQXJyYXkuYXBw
        bHkoZnVuY3Rpb24gKG9ic2VydmVyQ29udGV4dHMsIG9mZnNldCwgb3BlcmF0
        aW9uKSB7CiAgICAgIC8vIHdlIGRvbid0IGV2ZW4gaGF2ZSBvYnNlcnZlciBj
        b250ZXh0cyBmb3IgcmVtb3ZlZCBpdGVtcywgZXZlbiBpZiB3ZSBkaWQsCiAg
        ICAgIC8vIHRoZXkgbm8gbG9uZ2VyIGhhdmUgYW55IGluZGV4IGluIHRoZSBh
        cnJheQogICAgICBpZiAob3BlcmF0aW9uID09PSBFbWJlci5UcmFja2VkQXJy
        YXkuREVMRVRFKSB7IHJldHVybjsgfQogICAgICBpZiAob3BlcmF0aW9uID09
        PSBFbWJlci5UcmFja2VkQXJyYXkuUkVUQUlOICYmIG9ic2VydmVyQ29udGV4
        dHMubGVuZ3RoID09PSBsZW5ndGggJiYgb2Zmc2V0ID09PSAwKSB7CiAgICAg
        ICAgLy8gSWYgd2UgdXBkYXRlIG1hbnkgaXRlbXMgd2UgZG9uJ3Qgd2FudCB0
        byB3YWxrIHRoZSBhcnJheSBlYWNoIHRpbWU6IHdlCiAgICAgICAgLy8gb25s
        eSBuZWVkIHRvIHVwZGF0ZSB0aGUgaW5kZXhlcyBhdCBtb3N0IG9uY2UgcGVy
        IHJ1biBsb29wLgogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgZm9y
        RWFjaChvYnNlcnZlckNvbnRleHRzLCBmdW5jdGlvbiAoY29udGV4dCwgaW5k
        ZXgpIHsKICAgICAgICBjb250ZXh0LmluZGV4ID0gaW5kZXggKyBvZmZzZXQ7
        CiAgICAgIH0pOwogICAgfSk7CiAgfSwKCiAgZGVwZW5kZW50QXJyYXlXaWxs
        Q2hhbmdlOiBmdW5jdGlvbiAoZGVwZW5kZW50QXJyYXksIGluZGV4LCByZW1v
        dmVkQ291bnQsIGFkZGVkQ291bnQpIHsKICAgIGlmICh0aGlzLnN1c3BlbmRl
        ZCkgeyByZXR1cm47IH0KCiAgICB2YXIgcmVtb3ZlZEl0ZW0gPSB0aGlzLmNh
        bGxiYWNrcy5yZW1vdmVkSXRlbSwKICAgICAgICBjaGFuZ2VNZXRhLAogICAg
        ICAgIGd1aWQgPSBndWlkRm9yKGRlcGVuZGVudEFycmF5KSwKICAgICAgICBk
        ZXBlbmRlbnRLZXkgPSB0aGlzLmRlcGVuZGVudEtleXNCeUd1aWRbZ3VpZF0s
        CiAgICAgICAgaXRlbVByb3BlcnR5S2V5cyA9IHRoaXMuY3AuX2l0ZW1Qcm9w
        ZXJ0eUtleXNbZGVwZW5kZW50S2V5XSB8fCBbXSwKICAgICAgICBsZW5ndGgg
        PSBnZXQoZGVwZW5kZW50QXJyYXksICdsZW5ndGgnKSwKICAgICAgICBub3Jt
        YWxpemVkSW5kZXggPSBub3JtYWxpemVJbmRleChpbmRleCwgbGVuZ3RoLCAw
        KSwKICAgICAgICBub3JtYWxpemVkUmVtb3ZlQ291bnQgPSBub3JtYWxpemVS
        ZW1vdmVDb3VudChub3JtYWxpemVkSW5kZXgsIGxlbmd0aCwgcmVtb3ZlZENv
        dW50KSwKICAgICAgICBpdGVtLAogICAgICAgIGl0ZW1JbmRleCwKICAgICAg
        ICBzbGljZUluZGV4LAogICAgICAgIG9ic2VydmVyQ29udGV4dHM7CgogICAg
        b2JzZXJ2ZXJDb250ZXh0cyA9IHRoaXMudHJhY2tSZW1vdmUoZGVwZW5kZW50
        S2V5LCBub3JtYWxpemVkSW5kZXgsIG5vcm1hbGl6ZWRSZW1vdmVDb3VudCk7
        CgogICAgZnVuY3Rpb24gcmVtb3ZlT2JzZXJ2ZXJzKHByb3BlcnR5S2V5KSB7
        CiAgICAgIG9ic2VydmVyQ29udGV4dHNbc2xpY2VJbmRleF0uZGVzdHJveWVk
        ID0gdHJ1ZTsKICAgICAgcmVtb3ZlQmVmb3JlT2JzZXJ2ZXIoaXRlbSwgcHJv
        cGVydHlLZXksIHRoaXMsIG9ic2VydmVyQ29udGV4dHNbc2xpY2VJbmRleF0u
        YmVmb3JlT2JzZXJ2ZXIpOwogICAgICByZW1vdmVPYnNlcnZlcihpdGVtLCBw
        cm9wZXJ0eUtleSwgdGhpcywgb2JzZXJ2ZXJDb250ZXh0c1tzbGljZUluZGV4
        XS5vYnNlcnZlcik7CiAgICB9CgogICAgZm9yIChzbGljZUluZGV4ID0gbm9y
        bWFsaXplZFJlbW92ZUNvdW50IC0gMTsgc2xpY2VJbmRleCA+PSAwOyAtLXNs
        aWNlSW5kZXgpIHsKICAgICAgaXRlbUluZGV4ID0gbm9ybWFsaXplZEluZGV4
        ICsgc2xpY2VJbmRleDsKICAgICAgaWYgKGl0ZW1JbmRleCA+PSBsZW5ndGgp
        IHsgYnJlYWs7IH0KCiAgICAgIGl0ZW0gPSBkZXBlbmRlbnRBcnJheS5vYmpl
        Y3RBdChpdGVtSW5kZXgpOwoKICAgICAgZm9yRWFjaChpdGVtUHJvcGVydHlL
        ZXlzLCByZW1vdmVPYnNlcnZlcnMsIHRoaXMpOwoKICAgICAgY2hhbmdlTWV0
        YSA9IGNyZWF0ZUNoYW5nZU1ldGEoZGVwZW5kZW50QXJyYXksIGl0ZW0sIGl0
        ZW1JbmRleCwgdGhpcy5pbnN0YW5jZU1ldGEucHJvcGVydHlOYW1lLCB0aGlz
        LmNwKTsKICAgICAgdGhpcy5zZXRWYWx1ZSggcmVtb3ZlZEl0ZW0uY2FsbCgK
        ICAgICAgICB0aGlzLmluc3RhbmNlTWV0YS5jb250ZXh0LCB0aGlzLmdldFZh
        bHVlKCksIGl0ZW0sIGNoYW5nZU1ldGEsIHRoaXMuaW5zdGFuY2VNZXRhLnN1
        Z2FyTWV0YSkpOwogICAgfQogIH0sCgogIGRlcGVuZGVudEFycmF5RGlkQ2hh
        bmdlOiBmdW5jdGlvbiAoZGVwZW5kZW50QXJyYXksIGluZGV4LCByZW1vdmVk
        Q291bnQsIGFkZGVkQ291bnQpIHsKICAgIGlmICh0aGlzLnN1c3BlbmRlZCkg
        eyByZXR1cm47IH0KCiAgICB2YXIgYWRkZWRJdGVtID0gdGhpcy5jYWxsYmFj
        a3MuYWRkZWRJdGVtLAogICAgICAgIGd1aWQgPSBndWlkRm9yKGRlcGVuZGVu
        dEFycmF5KSwKICAgICAgICBkZXBlbmRlbnRLZXkgPSB0aGlzLmRlcGVuZGVu
        dEtleXNCeUd1aWRbZ3VpZF0sCiAgICAgICAgb2JzZXJ2ZXJDb250ZXh0cyA9
        IG5ldyBBcnJheShhZGRlZENvdW50KSwKICAgICAgICBpdGVtUHJvcGVydHlL
        ZXlzID0gdGhpcy5jcC5faXRlbVByb3BlcnR5S2V5c1tkZXBlbmRlbnRLZXld
        LAogICAgICAgIGxlbmd0aCA9IGdldChkZXBlbmRlbnRBcnJheSwgJ2xlbmd0
        aCcpLAogICAgICAgIG5vcm1hbGl6ZWRJbmRleCA9IG5vcm1hbGl6ZUluZGV4
        KGluZGV4LCBsZW5ndGgsIGFkZGVkQ291bnQpLAogICAgICAgIGNoYW5nZU1l
        dGEsCiAgICAgICAgb2JzZXJ2ZXJDb250ZXh0OwoKICAgIGZvckVhY2goZGVw
        ZW5kZW50QXJyYXkuc2xpY2Uobm9ybWFsaXplZEluZGV4LCBub3JtYWxpemVk
        SW5kZXggKyBhZGRlZENvdW50KSwgZnVuY3Rpb24gKGl0ZW0sIHNsaWNlSW5k
        ZXgpIHsKICAgICAgaWYgKGl0ZW1Qcm9wZXJ0eUtleXMpIHsKICAgICAgICBv
        YnNlcnZlckNvbnRleHQgPQogICAgICAgICAgb2JzZXJ2ZXJDb250ZXh0c1tz
        bGljZUluZGV4XSA9CiAgICAgICAgICB0aGlzLmNyZWF0ZVByb3BlcnR5T2Jz
        ZXJ2ZXJDb250ZXh0KGRlcGVuZGVudEFycmF5LCBub3JtYWxpemVkSW5kZXgg
        KyBzbGljZUluZGV4LCB0aGlzLnRyYWNrZWRBcnJheXNCeUd1aWRbZGVwZW5k
        ZW50S2V5XSk7CiAgICAgICAgZm9yRWFjaChpdGVtUHJvcGVydHlLZXlzLCBm
        dW5jdGlvbiAocHJvcGVydHlLZXkpIHsKICAgICAgICAgIGFkZEJlZm9yZU9i
        c2VydmVyKGl0ZW0sIHByb3BlcnR5S2V5LCB0aGlzLCBvYnNlcnZlckNvbnRl
        eHQuYmVmb3JlT2JzZXJ2ZXIpOwogICAgICAgICAgYWRkT2JzZXJ2ZXIoaXRl
        bSwgcHJvcGVydHlLZXksIHRoaXMsIG9ic2VydmVyQ29udGV4dC5vYnNlcnZl
        cik7CiAgICAgICAgfSwgdGhpcyk7CiAgICAgIH0KCiAgICAgIGNoYW5nZU1l
        dGEgPSBjcmVhdGVDaGFuZ2VNZXRhKGRlcGVuZGVudEFycmF5LCBpdGVtLCBu
        b3JtYWxpemVkSW5kZXggKyBzbGljZUluZGV4LCB0aGlzLmluc3RhbmNlTWV0
        YS5wcm9wZXJ0eU5hbWUsIHRoaXMuY3ApOwogICAgICB0aGlzLnNldFZhbHVl
        KCBhZGRlZEl0ZW0uY2FsbCgKICAgICAgICB0aGlzLmluc3RhbmNlTWV0YS5j
        b250ZXh0LCB0aGlzLmdldFZhbHVlKCksIGl0ZW0sIGNoYW5nZU1ldGEsIHRo
        aXMuaW5zdGFuY2VNZXRhLnN1Z2FyTWV0YSkpOwogICAgfSwgdGhpcyk7Cgog
        ICAgdGhpcy50cmFja0FkZChkZXBlbmRlbnRLZXksIG5vcm1hbGl6ZWRJbmRl
        eCwgb2JzZXJ2ZXJDb250ZXh0cyk7CiAgfSwKCiAgaXRlbVByb3BlcnR5V2ls
        bENoYW5nZTogZnVuY3Rpb24gKG9iaiwga2V5TmFtZSwgYXJyYXksIG9ic2Vy
        dmVyQ29udGV4dCkgewogICAgdmFyIGd1aWQgPSBndWlkRm9yKG9iaik7Cgog
        ICAgaWYgKCF0aGlzLmNoYW5nZWRJdGVtc1tndWlkXSkgewogICAgICB0aGlz
        LmNoYW5nZWRJdGVtc1tndWlkXSA9IHsKICAgICAgICBhcnJheTogICAgICAg
        ICAgICBhcnJheSwKICAgICAgICBvYnNlcnZlckNvbnRleHQ6ICBvYnNlcnZl
        ckNvbnRleHQsCiAgICAgICAgb2JqOiAgICAgICAgICAgICAgb2JqLAogICAg
        ICAgIHByZXZpb3VzVmFsdWVzOiAgIHt9CiAgICAgIH07CiAgICB9CgogICAg
        dGhpcy5jaGFuZ2VkSXRlbXNbZ3VpZF0ucHJldmlvdXNWYWx1ZXNba2V5TmFt
        ZV0gPSBnZXQob2JqLCBrZXlOYW1lKTsKICB9LAoKICBpdGVtUHJvcGVydHlE
        aWRDaGFuZ2U6IGZ1bmN0aW9uKG9iaiwga2V5TmFtZSwgYXJyYXksIG9ic2Vy
        dmVyQ29udGV4dCkgewogICAgdGhpcy5mbHVzaENoYW5nZXMoKTsKICB9LAoK
        ICBmbHVzaENoYW5nZXM6IGZ1bmN0aW9uKCkgewogICAgdmFyIGNoYW5nZWRJ
        dGVtcyA9IHRoaXMuY2hhbmdlZEl0ZW1zLCBrZXksIGMsIGNoYW5nZU1ldGE7
        CgogICAgZm9yIChrZXkgaW4gY2hhbmdlZEl0ZW1zKSB7CiAgICAgIGMgPSBj
        aGFuZ2VkSXRlbXNba2V5XTsKICAgICAgaWYgKGMub2JzZXJ2ZXJDb250ZXh0
        LmRlc3Ryb3llZCkgeyBjb250aW51ZTsgfQoKICAgICAgdGhpcy51cGRhdGVJ
        bmRleGVzKGMub2JzZXJ2ZXJDb250ZXh0LnRyYWNrZWRBcnJheSwgYy5vYnNl
        cnZlckNvbnRleHQuZGVwZW5kZW50QXJyYXkpOwoKICAgICAgY2hhbmdlTWV0
        YSA9IGNyZWF0ZUNoYW5nZU1ldGEoYy5hcnJheSwgYy5vYmosIGMub2JzZXJ2
        ZXJDb250ZXh0LmluZGV4LCB0aGlzLmluc3RhbmNlTWV0YS5wcm9wZXJ0eU5h
        bWUsIHRoaXMuY3AsIGMucHJldmlvdXNWYWx1ZXMpOwogICAgICB0aGlzLnNl
        dFZhbHVlKAogICAgICAgIHRoaXMuY2FsbGJhY2tzLnJlbW92ZWRJdGVtLmNh
        bGwodGhpcy5pbnN0YW5jZU1ldGEuY29udGV4dCwgdGhpcy5nZXRWYWx1ZSgp
        LCBjLm9iaiwgY2hhbmdlTWV0YSwgdGhpcy5pbnN0YW5jZU1ldGEuc3VnYXJN
        ZXRhKSk7CiAgICAgIHRoaXMuc2V0VmFsdWUoCiAgICAgICAgdGhpcy5jYWxs
        YmFja3MuYWRkZWRJdGVtLmNhbGwodGhpcy5pbnN0YW5jZU1ldGEuY29udGV4
        dCwgdGhpcy5nZXRWYWx1ZSgpLCBjLm9iaiwgY2hhbmdlTWV0YSwgdGhpcy5p
        bnN0YW5jZU1ldGEuc3VnYXJNZXRhKSk7CiAgICB9CiAgICB0aGlzLmNoYW5n
        ZWRJdGVtcyA9IHt9OwogIH0KfTsKCmZ1bmN0aW9uIG5vcm1hbGl6ZUluZGV4
        KGluZGV4LCBsZW5ndGgsIG5ld0l0ZW1zT2Zmc2V0KSB7CiAgaWYgKGluZGV4
        IDwgMCkgewogICAgcmV0dXJuIE1hdGgubWF4KDAsIGxlbmd0aCArIGluZGV4
        KTsKICB9IGVsc2UgaWYgKGluZGV4IDwgbGVuZ3RoKSB7CiAgICByZXR1cm4g
        aW5kZXg7CiAgfSBlbHNlIC8qIGluZGV4ID4gbGVuZ3RoICovIHsKICAgIHJl
        dHVybiBNYXRoLm1pbihsZW5ndGggLSBuZXdJdGVtc09mZnNldCwgaW5kZXgp
        OwogIH0KfQoKZnVuY3Rpb24gbm9ybWFsaXplUmVtb3ZlQ291bnQoaW5kZXgs
        IGxlbmd0aCwgcmVtb3ZlZENvdW50KSB7CiAgcmV0dXJuIE1hdGgubWluKHJl
        bW92ZWRDb3VudCwgbGVuZ3RoIC0gaW5kZXgpOwp9CgpmdW5jdGlvbiBjcmVh
        dGVDaGFuZ2VNZXRhKGRlcGVuZGVudEFycmF5LCBpdGVtLCBpbmRleCwgcHJv
        cGVydHlOYW1lLCBwcm9wZXJ0eSwgcHJldmlvdXNWYWx1ZXMpIHsKICB2YXIg
        bWV0YSA9IHsKICAgIGFycmF5Q2hhbmdlZDogZGVwZW5kZW50QXJyYXksCiAg
        ICBpbmRleDogaW5kZXgsCiAgICBpdGVtOiBpdGVtLAogICAgcHJvcGVydHlO
        YW1lOiBwcm9wZXJ0eU5hbWUsCiAgICBwcm9wZXJ0eTogcHJvcGVydHkKICB9
        OwoKICBpZiAocHJldmlvdXNWYWx1ZXMpIHsKICAgIC8vIHByZXZpb3VzIHZh
        bHVlcyBvbmx5IGF2YWlsYWJsZSBmb3IgaXRlbSBwcm9wZXJ0eSBjaGFuZ2Vz
        CiAgICBtZXRhLnByZXZpb3VzVmFsdWVzID0gcHJldmlvdXNWYWx1ZXM7CiAg
        fQoKICByZXR1cm4gbWV0YTsKfQoKZnVuY3Rpb24gYWRkSXRlbXMgKGRlcGVu
        ZGVudEFycmF5LCBjYWxsYmFja3MsIGNwLCBwcm9wZXJ0eU5hbWUsIG1ldGEp
        IHsKICBmb3JFYWNoKGRlcGVuZGVudEFycmF5LCBmdW5jdGlvbiAoaXRlbSwg
        aW5kZXgpIHsKICAgIG1ldGEuc2V0VmFsdWUoIGNhbGxiYWNrcy5hZGRlZEl0
        ZW0uY2FsbCgKICAgICAgdGhpcywgbWV0YS5nZXRWYWx1ZSgpLCBpdGVtLCBj
        cmVhdGVDaGFuZ2VNZXRhKGRlcGVuZGVudEFycmF5LCBpdGVtLCBpbmRleCwg
        cHJvcGVydHlOYW1lLCBjcCksIG1ldGEuc3VnYXJNZXRhKSk7CiAgfSwgdGhp
        cyk7Cn0KCmZ1bmN0aW9uIHJlc2V0KGNwLCBwcm9wZXJ0eU5hbWUpIHsKICB2
        YXIgY2FsbGJhY2tzID0gY3AuX2NhbGxiYWNrcygpLAogICAgICBtZXRhOwoK
        ICBpZiAoY3AuX2hhc0luc3RhbmNlTWV0YSh0aGlzLCBwcm9wZXJ0eU5hbWUp
        KSB7CiAgICBtZXRhID0gY3AuX2luc3RhbmNlTWV0YSh0aGlzLCBwcm9wZXJ0
        eU5hbWUpOwogICAgbWV0YS5zZXRWYWx1ZShjcC5yZXNldFZhbHVlKG1ldGEu
        Z2V0VmFsdWUoKSkpOwogIH0gZWxzZSB7CiAgICBtZXRhID0gY3AuX2luc3Rh
        bmNlTWV0YSh0aGlzLCBwcm9wZXJ0eU5hbWUpOwogIH0KCiAgaWYgKGNwLm9w
        dGlvbnMuaW5pdGlhbGl6ZSkgewogICAgY3Aub3B0aW9ucy5pbml0aWFsaXpl
        LmNhbGwodGhpcywgbWV0YS5nZXRWYWx1ZSgpLCB7IHByb3BlcnR5OiBjcCwg
        cHJvcGVydHlOYW1lOiBwcm9wZXJ0eU5hbWUgfSwgbWV0YS5zdWdhck1ldGEp
        OwogIH0KfQoKZnVuY3Rpb24gUmVkdWNlQ29tcHV0ZWRQcm9wZXJ0eUluc3Rh
        bmNlTWV0YShjb250ZXh0LCBwcm9wZXJ0eU5hbWUsIGluaXRpYWxWYWx1ZSkg
        ewogIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7CiAgdGhpcy5wcm9wZXJ0eU5h
        bWUgPSBwcm9wZXJ0eU5hbWU7CiAgdGhpcy5jYWNoZSA9IG1ldGFGb3IoY29u
        dGV4dCkuY2FjaGU7CgogIHRoaXMuZGVwZW5kZW50QXJyYXlzID0ge307CiAg
        dGhpcy5zdWdhck1ldGEgPSB7fTsKCiAgdGhpcy5pbml0aWFsVmFsdWUgPSBp
        bml0aWFsVmFsdWU7Cn0KClJlZHVjZUNvbXB1dGVkUHJvcGVydHlJbnN0YW5j
        ZU1ldGEucHJvdG90eXBlID0gewogIGdldFZhbHVlOiBmdW5jdGlvbiAoKSB7
        CiAgICBpZiAodGhpcy5wcm9wZXJ0eU5hbWUgaW4gdGhpcy5jYWNoZSkgewog
        ICAgICByZXR1cm4gdGhpcy5jYWNoZVt0aGlzLnByb3BlcnR5TmFtZV07CiAg
        ICB9IGVsc2UgewogICAgICByZXR1cm4gdGhpcy5pbml0aWFsVmFsdWU7CiAg
        ICB9CiAgfSwKCiAgc2V0VmFsdWU6IGZ1bmN0aW9uKG5ld1ZhbHVlLCB0cmln
        Z2VyT2JzZXJ2ZXJzKSB7CiAgICAvLyBUaGlzIGxldHMgc3VnYXJzIGZvcmNl
        IGEgcmVjb21wdXRhdGlvbiwgaGFuZHkgZm9yIHZlcnkgc2ltcGxlCiAgICAv
        LyBpbXBsZW1lbnRhdGlvbnMgb2YgZWcgbWF4LgogICAgaWYgKG5ld1ZhbHVl
        ICE9PSB1bmRlZmluZWQpIHsKICAgICAgdmFyIGZpcmVPYnNlcnZlcnMgPSB0
        cmlnZ2VyT2JzZXJ2ZXJzICYmIChuZXdWYWx1ZSAhPT0gdGhpcy5jYWNoZVt0
        aGlzLnByb3BlcnR5TmFtZV0pOwoKICAgICAgaWYgKGZpcmVPYnNlcnZlcnMp
        IHsKICAgICAgICBwcm9wZXJ0eVdpbGxDaGFuZ2UodGhpcy5jb250ZXh0LCB0
        aGlzLnByb3BlcnR5TmFtZSk7CiAgICAgIH0KCiAgICAgIHRoaXMuY2FjaGVb
        dGhpcy5wcm9wZXJ0eU5hbWVdID0gbmV3VmFsdWU7CgogICAgICBpZiAoZmly
        ZU9ic2VydmVycykgewogICAgICAgIHByb3BlcnR5RGlkQ2hhbmdlKHRoaXMu
        Y29udGV4dCwgdGhpcy5wcm9wZXJ0eU5hbWUpOwogICAgICB9CiAgICB9IGVs
        c2UgewogICAgICBkZWxldGUgdGhpcy5jYWNoZVt0aGlzLnByb3BlcnR5TmFt
        ZV07CiAgICB9CiAgfQp9OwoKLyoqCiAgQSBjb21wdXRlZCBwcm9wZXJ0eSB3
        aG9zZSBkZXBlbmRlbnQga2V5cyBhcmUgYXJyYXlzIGFuZCB3aGljaCBpcyB1
        cGRhdGVkIHdpdGgKICAib25lIGF0IGEgdGltZSIgc2VtYW50aWNzLgoKICBA
        Y2xhc3MgUmVkdWNlQ29tcHV0ZWRQcm9wZXJ0eQogIEBuYW1lc3BhY2UgRW1i
        ZXIKICBAZXh0ZW5kcyBFbWJlci5Db21wdXRlZFByb3BlcnR5CiAgQGNvbnN0
        cnVjdG9yCiovCmZ1bmN0aW9uIFJlZHVjZUNvbXB1dGVkUHJvcGVydHkob3B0
        aW9ucykgewogIHZhciBjcCA9IHRoaXM7CgogIHRoaXMub3B0aW9ucyA9IG9w
        dGlvbnM7CiAgdGhpcy5faW5zdGFuY2VNZXRhcyA9IHt9OwoKICB0aGlzLl9k
        ZXBlbmRlbnRLZXlzID0gbnVsbDsKICAvLyBBIG1hcCBvZiBkZXBlbmRlbnRL
        ZXkgLT4gW2l0ZW1Qcm9wZXJ0eSwgLi4uXSB0aGF0IHRyYWNrcyB3aGF0IHBy
        b3BlcnRpZXMgb2YKICAvLyBpdGVtcyBpbiB0aGUgYXJyYXkgd2UgbXVzdCB0
        cmFjayB0byB1cGRhdGUgdGhpcyBwcm9wZXJ0eS4KICB0aGlzLl9pdGVtUHJv
        cGVydHlLZXlzID0ge307CiAgdGhpcy5fcHJldmlvdXNJdGVtUHJvcGVydHlL
        ZXlzID0ge307CgogIHRoaXMucmVhZE9ubHkoKTsKICB0aGlzLmNhY2hlYWJs
        ZSgpOwoKICB0aGlzLnJlY29tcHV0ZU9uY2UgPSBmdW5jdGlvbihwcm9wZXJ0
        eU5hbWUpIHsKICAgIC8vIFdoYXQgd2UgcmVhbGx5IHdhbnQgdG8gZG8gaXMg
        Y29hbGVzY2UgYnkgPGNwLCBwcm9wZXJ0eU5hbWU+LgogICAgLy8gV2UgbmVl
        ZCBhIGZvcm0gb2YgYHNjaGVkdWxlT25jZWAgdGhhdCBhY2NlcHRzIGFuIGFy
        Yml0cmFyeSB0b2tlbiB0bwogICAgLy8gY29hbGVzY2UgYnksIGluIGFkZGl0
        aW9uIHRvIHRoZSB0YXJnZXQgYW5kIG1ldGhvZC4KICAgIEVtYmVyLnJ1bi5v
        bmNlKHRoaXMsIHJlY29tcHV0ZSwgcHJvcGVydHlOYW1lKTsKICB9OwogIHZh
        ciByZWNvbXB1dGUgPSBmdW5jdGlvbihwcm9wZXJ0eU5hbWUpIHsKICAgIHZh
        ciBkZXBlbmRlbnRLZXlzID0gY3AuX2RlcGVuZGVudEtleXMsCiAgICAgICAg
        bWV0YSA9IGNwLl9pbnN0YW5jZU1ldGEodGhpcywgcHJvcGVydHlOYW1lKSwK
        ICAgICAgICBjYWxsYmFja3MgPSBjcC5fY2FsbGJhY2tzKCk7CgogICAgcmVz
        ZXQuY2FsbCh0aGlzLCBjcCwgcHJvcGVydHlOYW1lKTsKCiAgICBtZXRhLmRl
        cGVuZGVudEFycmF5c09ic2VydmVyLnN1c3BlbmRBcnJheU9ic2VydmVycyhm
        dW5jdGlvbiAoKSB7CiAgICAgIGZvckVhY2goY3AuX2RlcGVuZGVudEtleXMs
        IGZ1bmN0aW9uIChkZXBlbmRlbnRLZXkpIHsKICAgICAgICB2YXIgZGVwZW5k
        ZW50QXJyYXkgPSBnZXQodGhpcywgZGVwZW5kZW50S2V5KSwKICAgICAgICAg
        ICAgcHJldmlvdXNEZXBlbmRlbnRBcnJheSA9IG1ldGEuZGVwZW5kZW50QXJy
        YXlzW2RlcGVuZGVudEtleV07CgogICAgICAgIGlmIChkZXBlbmRlbnRBcnJh
        eSA9PT0gcHJldmlvdXNEZXBlbmRlbnRBcnJheSkgewogICAgICAgICAgLy8g
        VGhlIGFycmF5IG1heSBiZSB0aGUgc2FtZSwgYnV0IG91ciBpdGVtIHByb3Bl
        cnR5IGtleXMgbWF5IGhhdmUKICAgICAgICAgIC8vIGNoYW5nZWQsIHNvIHdl
        IHNldCB0aGVtIHVwIGFnYWluLiAgV2UgY2FuJ3QgZWFzaWx5IHRlbGwgaWYg
        dGhleSd2ZQogICAgICAgICAgLy8gY2hhbmdlZDogdGhlIGFycmF5IG1heSBi
        ZSB0aGUgc2FtZSBvYmplY3QsIGJ1dCB3aXRoIGRpZmZlcmVudAogICAgICAg
        ICAgLy8gY29udGVudHMuCiAgICAgICAgICBpZiAoY3AuX3ByZXZpb3VzSXRl
        bVByb3BlcnR5S2V5c1tkZXBlbmRlbnRLZXldKSB7CiAgICAgICAgICAgIGRl
        bGV0ZSBjcC5fcHJldmlvdXNJdGVtUHJvcGVydHlLZXlzW2RlcGVuZGVudEtl
        eV07CiAgICAgICAgICAgIG1ldGEuZGVwZW5kZW50QXJyYXlzT2JzZXJ2ZXIu
        c2V0dXBQcm9wZXJ0eU9ic2VydmVycyhkZXBlbmRlbnRLZXksIGNwLl9pdGVt
        UHJvcGVydHlLZXlzW2RlcGVuZGVudEtleV0pOwogICAgICAgICAgfQogICAg
        ICAgIH0gZWxzZSB7CiAgICAgICAgICBtZXRhLmRlcGVuZGVudEFycmF5c1tk
        ZXBlbmRlbnRLZXldID0gZGVwZW5kZW50QXJyYXk7CgogICAgICAgICAgaWYg
        KHByZXZpb3VzRGVwZW5kZW50QXJyYXkpIHsKICAgICAgICAgICAgbWV0YS5k
        ZXBlbmRlbnRBcnJheXNPYnNlcnZlci50ZWFyZG93bk9ic2VydmVycyhwcmV2
        aW91c0RlcGVuZGVudEFycmF5LCBkZXBlbmRlbnRLZXkpOwogICAgICAgICAg
        fQoKICAgICAgICAgIGlmIChkZXBlbmRlbnRBcnJheSkgewogICAgICAgICAg
        ICBtZXRhLmRlcGVuZGVudEFycmF5c09ic2VydmVyLnNldHVwT2JzZXJ2ZXJz
        KGRlcGVuZGVudEFycmF5LCBkZXBlbmRlbnRLZXkpOwogICAgICAgICAgfQog
        ICAgICAgIH0KICAgICAgfSwgdGhpcyk7CiAgICB9LCB0aGlzKTsKCiAgICBm
        b3JFYWNoKGNwLl9kZXBlbmRlbnRLZXlzLCBmdW5jdGlvbihkZXBlbmRlbnRL
        ZXkpIHsKICAgICAgdmFyIGRlcGVuZGVudEFycmF5ID0gZ2V0KHRoaXMsIGRl
        cGVuZGVudEtleSk7CiAgICAgIGlmIChkZXBlbmRlbnRBcnJheSkgewogICAg
        ICAgIGFkZEl0ZW1zLmNhbGwodGhpcywgZGVwZW5kZW50QXJyYXksIGNhbGxi
        YWNrcywgY3AsIHByb3BlcnR5TmFtZSwgbWV0YSk7CiAgICAgIH0KICAgIH0s
        IHRoaXMpOwogIH07CgogIHRoaXMuZnVuYyA9IGZ1bmN0aW9uIChwcm9wZXJ0
        eU5hbWUpIHsKICAgIEVtYmVyLmFzc2VydCgiQ29tcHV0ZWQgcmVkdWNlIHZh
        bHVlcyByZXF1aXJlIGF0IGxlYXN0IG9uZSBkZXBlbmRlbnQga2V5IiwgY3Au
        X2RlcGVuZGVudEtleXMpOwoKICAgIHJlY29tcHV0ZS5jYWxsKHRoaXMsIHBy
        b3BlcnR5TmFtZSk7CgogICAgcmV0dXJuIGNwLl9pbnN0YW5jZU1ldGEodGhp
        cywgcHJvcGVydHlOYW1lKS5nZXRWYWx1ZSgpOwogIH07Cn0KCkVtYmVyLlJl
        ZHVjZUNvbXB1dGVkUHJvcGVydHkgPSBSZWR1Y2VDb21wdXRlZFByb3BlcnR5
        OwpSZWR1Y2VDb21wdXRlZFByb3BlcnR5LnByb3RvdHlwZSA9IG9fY3JlYXRl
        KENvbXB1dGVkUHJvcGVydHkucHJvdG90eXBlKTsKCmZ1bmN0aW9uIGRlZmF1
        bHRDYWxsYmFjayhjb21wdXRlZFZhbHVlKSB7CiAgcmV0dXJuIGNvbXB1dGVk
        VmFsdWU7Cn0KClJlZHVjZUNvbXB1dGVkUHJvcGVydHkucHJvdG90eXBlLl9j
        YWxsYmFja3MgPSBmdW5jdGlvbiAoKSB7CiAgaWYgKCF0aGlzLmNhbGxiYWNr
        cykgewogICAgdmFyIG9wdGlvbnMgPSB0aGlzLm9wdGlvbnM7CiAgICB0aGlz
        LmNhbGxiYWNrcyA9IHsKICAgICAgcmVtb3ZlZEl0ZW06IG9wdGlvbnMucmVt
        b3ZlZEl0ZW0gfHwgZGVmYXVsdENhbGxiYWNrLAogICAgICBhZGRlZEl0ZW06
        IG9wdGlvbnMuYWRkZWRJdGVtIHx8IGRlZmF1bHRDYWxsYmFjawogICAgfTsK
        ICB9CiAgcmV0dXJuIHRoaXMuY2FsbGJhY2tzOwp9OwoKUmVkdWNlQ29tcHV0
        ZWRQcm9wZXJ0eS5wcm90b3R5cGUuX2hhc0luc3RhbmNlTWV0YSA9IGZ1bmN0
        aW9uIChjb250ZXh0LCBwcm9wZXJ0eU5hbWUpIHsKICB2YXIgZ3VpZCA9IGd1
        aWRGb3IoY29udGV4dCksCiAgICAgIGtleSA9IGd1aWQgKyAnOicgKyBwcm9w
        ZXJ0eU5hbWU7CgogIHJldHVybiAhIXRoaXMuX2luc3RhbmNlTWV0YXNba2V5
        XTsKfTsKClJlZHVjZUNvbXB1dGVkUHJvcGVydHkucHJvdG90eXBlLl9pbnN0
        YW5jZU1ldGEgPSBmdW5jdGlvbiAoY29udGV4dCwgcHJvcGVydHlOYW1lKSB7
        CiAgdmFyIGd1aWQgPSBndWlkRm9yKGNvbnRleHQpLAogICAgICBrZXkgPSBn
        dWlkICsgJzonICsgcHJvcGVydHlOYW1lLAogICAgICBtZXRhID0gdGhpcy5f
        aW5zdGFuY2VNZXRhc1trZXldOwoKICBpZiAoIW1ldGEpIHsKICAgIG1ldGEg
        PSB0aGlzLl9pbnN0YW5jZU1ldGFzW2tleV0gPSBuZXcgUmVkdWNlQ29tcHV0
        ZWRQcm9wZXJ0eUluc3RhbmNlTWV0YShjb250ZXh0LCBwcm9wZXJ0eU5hbWUs
        IHRoaXMuaW5pdGlhbFZhbHVlKCkpOwogICAgbWV0YS5kZXBlbmRlbnRBcnJh
        eXNPYnNlcnZlciA9IG5ldyBEZXBlbmRlbnRBcnJheXNPYnNlcnZlcih0aGlz
        Ll9jYWxsYmFja3MoKSwgdGhpcywgbWV0YSwgY29udGV4dCwgcHJvcGVydHlO
        YW1lLCBtZXRhLnN1Z2FyTWV0YSk7CiAgfQoKICByZXR1cm4gbWV0YTsKfTsK
        ClJlZHVjZUNvbXB1dGVkUHJvcGVydHkucHJvdG90eXBlLmluaXRpYWxWYWx1
        ZSA9IGZ1bmN0aW9uICgpIHsKICBpZiAodHlwZW9mIHRoaXMub3B0aW9ucy5p
        bml0aWFsVmFsdWUgPT09ICdmdW5jdGlvbicpIHsKICAgIHJldHVybiB0aGlz
        Lm9wdGlvbnMuaW5pdGlhbFZhbHVlKCk7CiAgfQogIGVsc2UgewogICAgcmV0
        dXJuIHRoaXMub3B0aW9ucy5pbml0aWFsVmFsdWU7CiAgfQp9OwoKUmVkdWNl
        Q29tcHV0ZWRQcm9wZXJ0eS5wcm90b3R5cGUucmVzZXRWYWx1ZSA9IGZ1bmN0
        aW9uICh2YWx1ZSkgewogIHJldHVybiB0aGlzLmluaXRpYWxWYWx1ZSgpOwp9
        OwoKUmVkdWNlQ29tcHV0ZWRQcm9wZXJ0eS5wcm90b3R5cGUuaXRlbVByb3Bl
        cnR5S2V5ID0gZnVuY3Rpb24gKGRlcGVuZGVudEFycmF5S2V5LCBpdGVtUHJv
        cGVydHlLZXkpIHsKICB0aGlzLl9pdGVtUHJvcGVydHlLZXlzW2RlcGVuZGVu
        dEFycmF5S2V5XSA9IHRoaXMuX2l0ZW1Qcm9wZXJ0eUtleXNbZGVwZW5kZW50
        QXJyYXlLZXldIHx8IFtdOwogIHRoaXMuX2l0ZW1Qcm9wZXJ0eUtleXNbZGVw
        ZW5kZW50QXJyYXlLZXldLnB1c2goaXRlbVByb3BlcnR5S2V5KTsKfTsKClJl
        ZHVjZUNvbXB1dGVkUHJvcGVydHkucHJvdG90eXBlLmNsZWFySXRlbVByb3Bl
        cnR5S2V5cyA9IGZ1bmN0aW9uIChkZXBlbmRlbnRBcnJheUtleSkgewogIGlm
        ICh0aGlzLl9pdGVtUHJvcGVydHlLZXlzW2RlcGVuZGVudEFycmF5S2V5XSkg
        ewogICAgdGhpcy5fcHJldmlvdXNJdGVtUHJvcGVydHlLZXlzW2RlcGVuZGVu
        dEFycmF5S2V5XSA9IHRoaXMuX2l0ZW1Qcm9wZXJ0eUtleXNbZGVwZW5kZW50
        QXJyYXlLZXldOwogICAgdGhpcy5faXRlbVByb3BlcnR5S2V5c1tkZXBlbmRl
        bnRBcnJheUtleV0gPSBbXTsKICB9Cn07CgpSZWR1Y2VDb21wdXRlZFByb3Bl
        cnR5LnByb3RvdHlwZS5wcm9wZXJ0eSA9IGZ1bmN0aW9uICgpIHsKICB2YXIg
        Y3AgPSB0aGlzLAogICAgICBhcmdzID0gYV9zbGljZS5jYWxsKGFyZ3VtZW50
        cyksCiAgICAgIHByb3BlcnR5QXJncyA9IG5ldyBFbWJlci5TZXQoKSwKICAg
        ICAgbWF0Y2gsCiAgICAgIGRlcGVuZGVudEFycmF5S2V5LAogICAgICBpdGVt
        UHJvcGVydHlLZXk7CgogIGZvckVhY2goYV9zbGljZS5jYWxsKGFyZ3VtZW50
        cyksIGZ1bmN0aW9uIChkZXBlbmRlbnRLZXkpIHsKICAgIGlmIChkb3VibGVF
        YWNoUHJvcGVydHlQYXR0ZXJuLnRlc3QoZGVwZW5kZW50S2V5KSkgewogICAg
        ICB0aHJvdyBuZXcgRW1iZXIuRXJyb3IoIk5lc3RlZCBAZWFjaCBwcm9wZXJ0
        aWVzIG5vdCBzdXBwb3J0ZWQ6ICIgKyBkZXBlbmRlbnRLZXkpOwogICAgfSBl
        bHNlIGlmIChtYXRjaCA9IGVhY2hQcm9wZXJ0eVBhdHRlcm4uZXhlYyhkZXBl
        bmRlbnRLZXkpKSB7CiAgICAgIGRlcGVuZGVudEFycmF5S2V5ID0gbWF0Y2hb
        MV07CiAgICAgIGl0ZW1Qcm9wZXJ0eUtleSA9IG1hdGNoWzJdOwogICAgICBj
        cC5pdGVtUHJvcGVydHlLZXkoZGVwZW5kZW50QXJyYXlLZXksIGl0ZW1Qcm9w
        ZXJ0eUtleSk7CiAgICAgIHByb3BlcnR5QXJncy5hZGQoZGVwZW5kZW50QXJy
        YXlLZXkpOwogICAgfSBlbHNlIHsKICAgICAgcHJvcGVydHlBcmdzLmFkZChk
        ZXBlbmRlbnRLZXkpOwogICAgfQogIH0pOwoKICByZXR1cm4gQ29tcHV0ZWRQ
        cm9wZXJ0eS5wcm90b3R5cGUucHJvcGVydHkuYXBwbHkodGhpcywgcHJvcGVy
        dHlBcmdzLnRvQXJyYXkoKSk7Cn07CgovKioKICBDcmVhdGVzIGEgY29tcHV0
        ZWQgcHJvcGVydHkgd2hpY2ggb3BlcmF0ZXMgb24gZGVwZW5kZW50IGFycmF5
        cyBhbmQKICBpcyB1cGRhdGVkIHdpdGggIm9uZSBhdCBhIHRpbWUiIHNlbWFu
        dGljcy4gV2hlbiBpdGVtcyBhcmUgYWRkZWQgb3IKICByZW1vdmVkIGZyb20g
        dGhlIGRlcGVuZGVudCBhcnJheShzKSBhIHJlZHVjZSBjb21wdXRlZCBvbmx5
        IG9wZXJhdGVzCiAgb24gdGhlIGNoYW5nZSBpbnN0ZWFkIG9mIHJlLWV2YWx1
        YXRpbmcgdGhlIGVudGlyZSBhcnJheS4KCiAgSWYgdGhlcmUgYXJlIG1vcmUg
        dGhhbiBvbmUgYXJndW1lbnRzIHRoZSBmaXJzdCBhcmd1bWVudHMgYXJlCiAg
        Y29uc2lkZXJlZCB0byBiZSBkZXBlbmRlbnQgcHJvcGVydHkga2V5cy4gVGhl
        IGxhc3QgYXJndW1lbnQgaXMKICByZXF1aXJlZCB0byBiZSBhbiBvcHRpb25z
        IG9iamVjdC4gVGhlIG9wdGlvbnMgb2JqZWN0IGNhbiBoYXZlIHRoZQogIGZv
        bGxvd2luZyBmb3VyIHByb3BlcnRpZXM6CgogIGBpbml0aWFsVmFsdWVgIC0g
        QSB2YWx1ZSBvciBmdW5jdGlvbiB0aGF0IHdpbGwgYmUgdXNlZCBhcyB0aGUg
        aW5pdGlhbAogIHZhbHVlIGZvciB0aGUgY29tcHV0ZWQuIElmIHRoaXMgcHJv
        cGVydHkgaXMgYSBmdW5jdGlvbiB0aGUgcmVzdWx0IG9mIGNhbGxpbmcKICB0
        aGUgZnVuY3Rpb24gd2lsbCBiZSB1c2VkIGFzIHRoZSBpbml0aWFsIHZhbHVl
        LiBUaGlzIHByb3BlcnR5IGlzIHJlcXVpcmVkLgoKICBgaW5pdGlhbGl6ZWAg
        LSBBbiBvcHRpb25hbCBpbml0aWFsaXplIGZ1bmN0aW9uLiBUeXBpY2FsbHkg
        dGhpcyB3aWxsIGJlIHVzZWQKICB0byBzZXQgdXAgc3RhdGUgb24gdGhlIGlu
        c3RhbmNlTWV0YSBvYmplY3QuCgogIGByZW1vdmVkSXRlbWAgLSBBIGZ1bmN0
        aW9uIHRoYXQgaXMgY2FsbGVkIGVhY2ggdGltZSBhbiBlbGVtZW50IGlzIHJl
        bW92ZWQKICBmcm9tIHRoZSBhcnJheS4KCiAgYGFkZGVkSXRlbWAgLSBBIGZ1
        bmN0aW9uIHRoYXQgaXMgY2FsbGVkIGVhY2ggdGltZSBhbiBlbGVtZW50IGlz
        IGFkZGVkIHRvCiAgdGhlIGFycmF5LgoKCiAgVGhlIGBpbml0aWFsaXplYCBm
        dW5jdGlvbiBoYXMgdGhlIGZvbGxvd2luZyBzaWduYXR1cmU6CgogIGBgYGph
        dmFzY3JpcHQKICAgZnVuY3Rpb24gKGluaXRpYWxWYWx1ZSwgY2hhbmdlTWV0
        YSwgaW5zdGFuY2VNZXRhKQogIGBgYAoKICBgaW5pdGlhbFZhbHVlYCAtIFRo
        ZSB2YWx1ZSBvZiB0aGUgYGluaXRpYWxWYWx1ZWAgcHJvcGVydHkgZnJvbSB0
        aGUKICBvcHRpb25zIG9iamVjdC4KCiAgYGNoYW5nZU1ldGFgIC0gQW4gb2Jq
        ZWN0IHdoaWNoIGNvbnRhaW5zIG1ldGEgaW5mb3JtYXRpb24gYWJvdXQgdGhl
        CiAgY29tcHV0ZWQuIEl0IGNvbnRhaW5zIHRoZSBmb2xsb3dpbmcgcHJvcGVy
        dGllczoKCiAgICAgLSBgcHJvcGVydHlgIHRoZSBjb21wdXRlZCBwcm9wZXJ0
        eQogICAgIC0gYHByb3BlcnR5TmFtZWAgdGhlIG5hbWUgb2YgdGhlIHByb3Bl
        cnR5IG9uIHRoZSBvYmplY3QKCiAgYGluc3RhbmNlTWV0YWAgLSBBbiBvYmpl
        Y3QgdGhhdCBjYW4gYmUgdXNlZCB0byBzdG9yZSBtZXRhCiAgaW5mb3JtYXRp
        b24gbmVlZGVkIGZvciBjYWxjdWxhdGluZyB5b3VyIGNvbXB1dGVkLiBGb3Ig
        ZXhhbXBsZSBhCiAgdW5pcXVlIGNvbXB1dGVkIG1pZ2h0IHVzZSB0aGlzIHRv
        IHN0b3JlIHRoZSBudW1iZXIgb2YgdGltZXMgYSBnaXZlbgogIGVsZW1lbnQg
        aXMgZm91bmQgaW4gdGhlIGRlcGVuZGVudCBhcnJheS4KCgogIFRoZSBgcmVt
        b3ZlZEl0ZW1gIGFuZCBgYWRkZWRJdGVtYCBmdW5jdGlvbnMgYm90aCBoYXZl
        IHRoZSBmb2xsb3dpbmcgc2lnbmF0dXJlOgoKICBgYGBqYXZhc2NyaXB0CiAg
        ZnVuY3Rpb24gKGFjY3VtdWxhdGVkVmFsdWUsIGl0ZW0sIGNoYW5nZU1ldGEs
        IGluc3RhbmNlTWV0YSkKICBgYGAKCiAgYGFjY3VtdWxhdGVkVmFsdWVgIC0g
        VGhlIHZhbHVlIHJldHVybmVkIGZyb20gdGhlIGxhc3QgdGltZQogIGByZW1v
        dmVkSXRlbWAgb3IgYGFkZGVkSXRlbWAgd2FzIGNhbGxlZCBvciBgaW5pdGlh
        bFZhbHVlYC4KCiAgYGl0ZW1gIC0gdGhlIGVsZW1lbnQgYWRkZWQgb3IgcmVt
        b3ZlZCBmcm9tIHRoZSBhcnJheQoKICBgY2hhbmdlTWV0YWAgLSBBbiBvYmpl
        Y3Qgd2hpY2ggY29udGFpbnMgbWV0YSBpbmZvcm1hdGlvbiBhYm91dCB0aGUK
        ICBjaGFuZ2UuIEl0IGNvbnRhaW5zIHRoZSBmb2xsb3dpbmcgcHJvcGVydGll
        czoKCiAgICAtIGBwcm9wZXJ0eWAgdGhlIGNvbXB1dGVkIHByb3BlcnR5CiAg
        ICAtIGBwcm9wZXJ0eU5hbWVgIHRoZSBuYW1lIG9mIHRoZSBwcm9wZXJ0eSBv
        biB0aGUgb2JqZWN0CiAgICAtIGBpbmRleGAgdGhlIGluZGV4IG9mIHRoZSBh
        ZGRlZCBvciByZW1vdmVkIGl0ZW0KICAgIC0gYGl0ZW1gIHRoZSBhZGRlZCBv
        ciByZW1vdmVkIGl0ZW06IHRoaXMgaXMgZXhhY3RseSB0aGUgc2FtZSBhcwog
        ICAgICB0aGUgc2Vjb25kIGFyZwogICAgLSBgYXJyYXlDaGFuZ2VkYCB0aGUg
        YXJyYXkgdGhhdCB0cmlnZ2VyZWQgdGhlIGNoYW5nZS4gQ2FuIGJlCiAgICAg
        IHVzZWZ1bCB3aGVuIGRlcGVuZGluZyBvbiBtdWx0aXBsZSBhcnJheXMuCgog
        IEZvciBwcm9wZXJ0eSBjaGFuZ2VzIHRyaWdnZXJlZCBvbiBhbiBpdGVtIHBy
        b3BlcnR5IGNoYW5nZSAod2hlbgogIGRlcEtleSBpcyBzb21ldGhpbmcgbGlr
        ZSBgc29tZUFycmF5LkBlYWNoLnNvbWVQcm9wZXJ0eWApLAogIGBjaGFuZ2VN
        ZXRhYCB3aWxsIGFsc28gY29udGFpbiB0aGUgZm9sbG93aW5nIHByb3BlcnR5
        OgoKICAgIC0gYHByZXZpb3VzVmFsdWVzYCBhbiBvYmplY3Qgd2hvc2Uga2V5
        cyBhcmUgdGhlIHByb3BlcnRpZXMgdGhhdCBjaGFuZ2VkIG9uCiAgICB0aGUg
        aXRlbSwgYW5kIHdob3NlIHZhbHVlcyBhcmUgdGhlIGl0ZW0ncyBwcmV2aW91
        cyB2YWx1ZXMuCgogIGBwcmV2aW91c1ZhbHVlc2AgaXMgaW1wb3J0YW50IEVt
        YmVyIGNvYWxlc2NlcyBpdGVtIHByb3BlcnR5IGNoYW5nZXMgdmlhCiAgRW1i
        ZXIucnVuLm9uY2UuIFRoaXMgbWVhbnMgdGhhdCBieSB0aGUgdGltZSByZW1v
        dmVkSXRlbSBnZXRzIGNhbGxlZCwgaXRlbSBoYXMKICB0aGUgbmV3IHZhbHVl
        cywgYnV0IHlvdSBtYXkgbmVlZCB0aGUgcHJldmlvdXMgdmFsdWUgKGVnIGZv
        ciBzb3J0aW5nICYKICBmaWx0ZXJpbmcpLgoKICBgaW5zdGFuY2VNZXRhYCAt
        IEFuIG9iamVjdCB0aGF0IGNhbiBiZSB1c2VkIHRvIHN0b3JlIG1ldGEKICBp
        bmZvcm1hdGlvbiBuZWVkZWQgZm9yIGNhbGN1bGF0aW5nIHlvdXIgY29tcHV0
        ZWQuIEZvciBleGFtcGxlIGEKICB1bmlxdWUgY29tcHV0ZWQgbWlnaHQgdXNl
        IHRoaXMgdG8gc3RvcmUgdGhlIG51bWJlciBvZiB0aW1lcyBhIGdpdmVuCiAg
        ZWxlbWVudCBpcyBmb3VuZCBpbiB0aGUgZGVwZW5kZW50IGFycmF5LgoKICBU
        aGUgYHJlbW92ZWRJdGVtYCBhbmQgYGFkZGVkSXRlbWAgZnVuY3Rpb25zIHNo
        b3VsZCByZXR1cm4gdGhlIGFjY3VtdWxhdGVkCiAgdmFsdWUuIEl0IGlzIGFj
        Y2VwdGFibGUgdG8gbm90IHJldHVybiBhbnl0aGluZyAoaWUgcmV0dXJuIHVu
        ZGVmaW5lZCkKICB0byBpbnZhbGlkYXRlIHRoZSBjb21wdXRhdGlvbi4gVGhp
        cyBpcyBnZW5lcmFsbHkgbm90IGEgZ29vZCBpZGVhIGZvcgogIGFycmF5Q29t
        cHV0ZWQgYnV0IGl0J3MgdXNlZCBpbiBlZyBtYXggYW5kIG1pbi4KCiAgTm90
        ZSB0aGF0IG9ic2VydmVycyB3aWxsIGJlIGZpcmVkIGlmIGVpdGhlciBvZiB0
        aGVzZSBmdW5jdGlvbnMgcmV0dXJuIGEgdmFsdWUKICB0aGF0IGRpZmZlcnMg
        ZnJvbSB0aGUgYWNjdW11bGF0ZWQgdmFsdWUuICBXaGVuIHJldHVybmluZyBh
        biBvYmplY3QgdGhhdAogIG11dGF0ZXMgaW4gcmVzcG9uc2UgdG8gYXJyYXkg
        Y2hhbmdlcywgZm9yIGV4YW1wbGUgYW4gYXJyYXkgdGhhdCBtYXBzCiAgZXZl
        cnl0aGluZyBmcm9tIHNvbWUgb3RoZXIgYXJyYXkgKHNlZSBgRW1iZXIuY29t
        cHV0ZWQubWFwYCksIGl0IGlzIHVzdWFsbHkKICBpbXBvcnRhbnQgdGhhdCB0
        aGUgKnNhbWUqIGFycmF5IGJlIHJldHVybmVkIHRvIGF2b2lkIGFjY2lkZW50
        YWxseSB0cmlnZ2VyaW5nIG9ic2VydmVycy4KCiAgRXhhbXBsZQoKICBgYGBq
        YXZhc2NyaXB0CiAgRW1iZXIuY29tcHV0ZWQubWF4ID0gZnVuY3Rpb24gKGRl
        cGVuZGVudEtleSkgewogICAgcmV0dXJuIEVtYmVyLnJlZHVjZUNvbXB1dGVk
        LmNhbGwobnVsbCwgZGVwZW5kZW50S2V5LCB7CiAgICAgIGluaXRpYWxWYWx1
        ZTogLUluZmluaXR5LAoKICAgICAgYWRkZWRJdGVtOiBmdW5jdGlvbiAoYWNj
        dW11bGF0ZWRWYWx1ZSwgaXRlbSwgY2hhbmdlTWV0YSwgaW5zdGFuY2VNZXRh
        KSB7CiAgICAgICAgcmV0dXJuIE1hdGgubWF4KGFjY3VtdWxhdGVkVmFsdWUs
        IGl0ZW0pOwogICAgICB9LAoKICAgICAgcmVtb3ZlZEl0ZW06IGZ1bmN0aW9u
        IChhY2N1bXVsYXRlZFZhbHVlLCBpdGVtLCBjaGFuZ2VNZXRhLCBpbnN0YW5j
        ZU1ldGEpIHsKICAgICAgICBpZiAoaXRlbSA8IGFjY3VtdWxhdGVkVmFsdWUp
        IHsKICAgICAgICAgIHJldHVybiBhY2N1bXVsYXRlZFZhbHVlOwogICAgICAg
        IH0KICAgICAgfQogICAgfSk7CiAgfTsKICBgYGAKCiAgRGVwZW5kZW50IGtl
        eXMgbWF5IHJlZmVyIHRvIGBAdGhpc2AgdG8gb2JzZXJ2ZSBjaGFuZ2VzIHRv
        IHRoZSBvYmplY3QgaXRzZWxmLAogIHdoaWNoIG11c3QgYmUgYXJyYXktbGlr
        ZSwgcmF0aGVyIHRoYW4gYSBwcm9wZXJ0eSBvZiB0aGUgb2JqZWN0LiAgVGhp
        cyBpcwogIG1vc3RseSB1c2VmdWwgZm9yIGFycmF5IHByb3hpZXMsIHRvIGVu
        c3VyZSBvYmplY3RzIGFyZSByZXRyaWV2ZWQgdmlhCiAgYG9iamVjdEF0Q29u
        dGVudGAuICBUaGlzIGlzIGhvdyB5b3UgY291bGQgc29ydCBpdGVtcyBieSBw
        cm9wZXJ0aWVzIGRlZmluZWQgb24gYW4gaXRlbSBjb250cm9sbGVyLgoKICBF
        eGFtcGxlCgogIGBgYGphdmFzY3JpcHQKICBBcHAuUGVvcGxlQ29udHJvbGxl
        ciA9IEVtYmVyLkFycmF5Q29udHJvbGxlci5leHRlbmQoewogICAgaXRlbUNv
        bnRyb2xsZXI6ICdwZXJzb24nLAoKICAgIHNvcnRlZFBlb3BsZTogRW1iZXIu
        Y29tcHV0ZWQuc29ydCgnQHRoaXMuQGVhY2gucmV2ZXJzZWROYW1lJywgZnVu
        Y3Rpb24ocGVyc29uQSwgcGVyc29uQikgewogICAgICAvLyBgcmV2ZXJzZWRO
        YW1lYCBpc24ndCBkZWZpbmVkIG9uIFBlcnNvbiwgYnV0IHdlIGhhdmUgYWNj
        ZXNzIHRvIGl0IHZpYQogICAgICAvLyB0aGUgaXRlbSBjb250cm9sbGVyIEFw
        cC5QZXJzb25Db250cm9sbGVyLiAgSWYgd2UnZCB1c2VkCiAgICAgIC8vIGBj
        b250ZW50LkBlYWNoLnJldmVyc2VkTmFtZWAgYWJvdmUsIHdlIHdvdWxkIGJl
        IGdldHRpbmcgdGhlIG9iamVjdHMKICAgICAgLy8gZGlyZWN0bHkgYW5kIG5v
        dCBoYXZlIGFjY2VzcyB0byBgcmV2ZXJzZWROYW1lYC4KICAgICAgLy8KICAg
        ICAgdmFyIHJldmVyc2VkTmFtZUEgPSBnZXQocGVyc29uQSwgJ3JldmVyc2Vk
        TmFtZScpLAogICAgICAgICAgcmV2ZXJzZWROYW1lQiA9IGdldChwZXJzb25C
        LCAncmV2ZXJzZWROYW1lJyk7CgogICAgICByZXR1cm4gRW1iZXIuY29tcGFy
        ZShyZXZlcnNlZE5hbWVBLCByZXZlcnNlZE5hbWVCKTsKICAgIH0pCiAgfSk7
        CgogIEFwcC5QZXJzb25Db250cm9sbGVyID0gRW1iZXIuT2JqZWN0Q29udHJv
        bGxlci5leHRlbmQoewogICAgcmV2ZXJzZWROYW1lOiBmdW5jdGlvbiAoKSB7
        CiAgICAgIHJldHVybiByZXZlcnNlKGdldCh0aGlzLCAnbmFtZScpKTsKICAg
        IH0ucHJvcGVydHkoJ25hbWUnKQogIH0pCiAgYGBgCgogIEBtZXRob2QgcmVk
        dWNlQ29tcHV0ZWQKICBAZm9yIEVtYmVyCiAgQHBhcmFtIHtTdHJpbmd9IFtk
        ZXBlbmRlbnRLZXlzKl0KICBAcGFyYW0ge09iamVjdH0gb3B0aW9ucwogIEBy
        ZXR1cm4ge0VtYmVyLkNvbXB1dGVkUHJvcGVydHl9CiovCkVtYmVyLnJlZHVj
        ZUNvbXB1dGVkID0gZnVuY3Rpb24gKG9wdGlvbnMpIHsKICB2YXIgYXJnczsK
        CiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7CiAgICBhcmdzID0gYV9z
        bGljZS5jYWxsKGFyZ3VtZW50cywgMCwgLTEpOwogICAgb3B0aW9ucyA9IGFf
        c2xpY2UuY2FsbChhcmd1bWVudHMsIC0xKVswXTsKICB9CgogIGlmICh0eXBl
        b2Ygb3B0aW9ucyAhPT0gIm9iamVjdCIpIHsKICAgIHRocm93IG5ldyBFbWJl
        ci5FcnJvcigiUmVkdWNlIENvbXB1dGVkIFByb3BlcnR5IGRlY2xhcmVkIHdp
        dGhvdXQgYW4gb3B0aW9ucyBoYXNoIik7CiAgfQoKICBpZiAoISgnaW5pdGlh
        bFZhbHVlJyBpbiBvcHRpb25zKSkgewogICAgdGhyb3cgbmV3IEVtYmVyLkVy
        cm9yKCJSZWR1Y2UgQ29tcHV0ZWQgUHJvcGVydHkgZGVjbGFyZWQgd2l0aG91
        dCBhbiBpbml0aWFsIHZhbHVlIik7CiAgfQoKICB2YXIgY3AgPSBuZXcgUmVk
        dWNlQ29tcHV0ZWRQcm9wZXJ0eShvcHRpb25zKTsKCiAgaWYgKGFyZ3MpIHsK
        ICAgIGNwLnByb3BlcnR5LmFwcGx5KGNwLCBhcmdzKTsKICB9CgogIHJldHVy
        biBjcDsKfTsKCn0pKCk7CgoKCihmdW5jdGlvbigpIHsKdmFyIFJlZHVjZUNv
        bXB1dGVkUHJvcGVydHkgPSBFbWJlci5SZWR1Y2VDb21wdXRlZFByb3BlcnR5
        LAogICAgYV9zbGljZSA9IFtdLnNsaWNlLAogICAgb19jcmVhdGUgPSBFbWJl
        ci5jcmVhdGUsCiAgICBmb3JFYWNoID0gRW1iZXIuRW51bWVyYWJsZVV0aWxz
        LmZvckVhY2g7CgpmdW5jdGlvbiBBcnJheUNvbXB1dGVkUHJvcGVydHkoKSB7
        CiAgdmFyIGNwID0gdGhpczsKCiAgUmVkdWNlQ29tcHV0ZWRQcm9wZXJ0eS5h
        cHBseSh0aGlzLCBhcmd1bWVudHMpOwoKICB0aGlzLmZ1bmMgPSAoZnVuY3Rp
        b24ocmVkdWNlRnVuYykgewogICAgcmV0dXJuIGZ1bmN0aW9uIChwcm9wZXJ0
        eU5hbWUpIHsKICAgICAgaWYgKCFjcC5faGFzSW5zdGFuY2VNZXRhKHRoaXMs
        IHByb3BlcnR5TmFtZSkpIHsKICAgICAgICAvLyBXaGVuIHdlIHJlY29tcHV0
        ZSBhbiBhcnJheSBjb21wdXRlZCBwcm9wZXJ0eSwgd2UgbmVlZCBhbHJlYWR5
        CiAgICAgICAgLy8gcmV0cmlldmVkIGFycmF5cyB0byBiZSB1cGRhdGVkOyB3
        ZSBjYW4ndCBzaW1wbHkgZW1wdHkgdGhlIGNhY2hlIGFuZAogICAgICAgIC8v
        IGhvcGUgdGhlIGFycmF5IGlzIHJlLXJldHJpZXZlZC4KICAgICAgICBmb3JF
        YWNoKGNwLl9kZXBlbmRlbnRLZXlzLCBmdW5jdGlvbihkZXBlbmRlbnRLZXkp
        IHsKICAgICAgICAgIEVtYmVyLmFkZE9ic2VydmVyKHRoaXMsIGRlcGVuZGVu
        dEtleSwgZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIGNwLnJlY29tcHV0ZU9u
        Y2UuY2FsbCh0aGlzLCBwcm9wZXJ0eU5hbWUpOwogICAgICAgICAgfSk7CiAg
        ICAgICAgfSwgdGhpcyk7CiAgICAgIH0KCiAgICAgIHJldHVybiByZWR1Y2VG
        dW5jLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICB9OwogIH0pKHRoaXMu
        ZnVuYyk7CgogIHJldHVybiB0aGlzOwp9CkVtYmVyLkFycmF5Q29tcHV0ZWRQ
        cm9wZXJ0eSA9IEFycmF5Q29tcHV0ZWRQcm9wZXJ0eTsKQXJyYXlDb21wdXRl
        ZFByb3BlcnR5LnByb3RvdHlwZSA9IG9fY3JlYXRlKFJlZHVjZUNvbXB1dGVk
        UHJvcGVydHkucHJvdG90eXBlKTsKQXJyYXlDb21wdXRlZFByb3BlcnR5LnBy
        b3RvdHlwZS5pbml0aWFsVmFsdWUgPSBmdW5jdGlvbiAoKSB7CiAgcmV0dXJu
        IEVtYmVyLkEoKTsKfTsKQXJyYXlDb21wdXRlZFByb3BlcnR5LnByb3RvdHlw
        ZS5yZXNldFZhbHVlID0gZnVuY3Rpb24gKGFycmF5KSB7CiAgYXJyYXkuY2xl
        YXIoKTsKICByZXR1cm4gYXJyYXk7Cn07CgovKioKICBDcmVhdGVzIGEgY29t
        cHV0ZWQgcHJvcGVydHkgd2hpY2ggb3BlcmF0ZXMgb24gZGVwZW5kZW50IGFy
        cmF5cyBhbmQKICBpcyB1cGRhdGVkIHdpdGggIm9uZSBhdCBhIHRpbWUiIHNl
        bWFudGljcy4gV2hlbiBpdGVtcyBhcmUgYWRkZWQgb3IKICByZW1vdmVkIGZy
        b20gdGhlIGRlcGVuZGVudCBhcnJheShzKSBhbiBhcnJheSBjb21wdXRlZCBv
        bmx5IG9wZXJhdGVzCiAgb24gdGhlIGNoYW5nZSBpbnN0ZWFkIG9mIHJlLWV2
        YWx1YXRpbmcgdGhlIGVudGlyZSBhcnJheS4gVGhpcyBzaG91bGQKICByZXR1
        cm4gYW4gYXJyYXksIGlmIHlvdSdkIGxpa2UgdG8gdXNlICJvbmUgYXQgYSB0
        aW1lIiBzZW1hbnRpY3MgYW5kCiAgY29tcHV0ZSBzb21lIHZhbHVlIG90aGVy
        IHRoZW4gYW4gYXJyYXkgbG9vayBhdAogIGBFbWJlci5yZWR1Y2VDb21wdXRl
        ZGAuCgogIElmIHRoZXJlIGFyZSBtb3JlIHRoYW4gb25lIGFyZ3VtZW50cyB0
        aGUgZmlyc3QgYXJndW1lbnRzIGFyZQogIGNvbnNpZGVyZWQgdG8gYmUgZGVw
        ZW5kZW50IHByb3BlcnR5IGtleXMuIFRoZSBsYXN0IGFyZ3VtZW50IGlzCiAg
        cmVxdWlyZWQgdG8gYmUgYW4gb3B0aW9ucyBvYmplY3QuIFRoZSBvcHRpb25z
        IG9iamVjdCBjYW4gaGF2ZSB0aGUKICBmb2xsb3dpbmcgdGhyZWUgcHJvcGVy
        dGllcy4KCiAgYGluaXRpYWxpemVgIC0gQW4gb3B0aW9uYWwgaW5pdGlhbGl6
        ZSBmdW5jdGlvbi4gVHlwaWNhbGx5IHRoaXMgd2lsbCBiZSB1c2VkCiAgdG8g
        c2V0IHVwIHN0YXRlIG9uIHRoZSBpbnN0YW5jZU1ldGEgb2JqZWN0LgoKICBg
        cmVtb3ZlZEl0ZW1gIC0gQSBmdW5jdGlvbiB0aGF0IGlzIGNhbGxlZCBlYWNo
        IHRpbWUgYW4gZWxlbWVudCBpcwogIHJlbW92ZWQgZnJvbSB0aGUgYXJyYXku
        CgogIGBhZGRlZEl0ZW1gIC0gQSBmdW5jdGlvbiB0aGF0IGlzIGNhbGxlZCBl
        YWNoIHRpbWUgYW4gZWxlbWVudCBpcwogIGFkZGVkIHRvIHRoZSBhcnJheS4K
        CgogIFRoZSBgaW5pdGlhbGl6ZWAgZnVuY3Rpb24gaGFzIHRoZSBmb2xsb3dp
        bmcgc2lnbmF0dXJlOgoKICBgYGBqYXZhc2NyaXB0CiAgIGZ1bmN0aW9uIChh
        cnJheSwgY2hhbmdlTWV0YSwgaW5zdGFuY2VNZXRhKQogIGBgYAoKICBgYXJy
        YXlgIC0gVGhlIGluaXRpYWwgdmFsdWUgb2YgdGhlIGFycmF5Q29tcHV0ZWQs
        IGFuIGVtcHR5IGFycmF5LgoKICBgY2hhbmdlTWV0YWAgLSBBbiBvYmplY3Qg
        d2hpY2ggY29udGFpbnMgbWV0YSBpbmZvcm1hdGlvbiBhYm91dCB0aGUKICBj
        b21wdXRlZC4gSXQgY29udGFpbnMgdGhlIGZvbGxvd2luZyBwcm9wZXJ0aWVz
        OgoKICAgICAtIGBwcm9wZXJ0eWAgdGhlIGNvbXB1dGVkIHByb3BlcnR5CiAg
        ICAgLSBgcHJvcGVydHlOYW1lYCB0aGUgbmFtZSBvZiB0aGUgcHJvcGVydHkg
        b24gdGhlIG9iamVjdAoKICBgaW5zdGFuY2VNZXRhYCAtIEFuIG9iamVjdCB0
        aGF0IGNhbiBiZSB1c2VkIHRvIHN0b3JlIG1ldGEKICBpbmZvcm1hdGlvbiBu
        ZWVkZWQgZm9yIGNhbGN1bGF0aW5nIHlvdXIgY29tcHV0ZWQuIEZvciBleGFt
        cGxlIGEKICB1bmlxdWUgY29tcHV0ZWQgbWlnaHQgdXNlIHRoaXMgdG8gc3Rv
        cmUgdGhlIG51bWJlciBvZiB0aW1lcyBhIGdpdmVuCiAgZWxlbWVudCBpcyBm
        b3VuZCBpbiB0aGUgZGVwZW5kZW50IGFycmF5LgoKCiAgVGhlIGByZW1vdmVk
        SXRlbWAgYW5kIGBhZGRlZEl0ZW1gIGZ1bmN0aW9ucyBib3RoIGhhdmUgdGhl
        IGZvbGxvd2luZyBzaWduYXR1cmU6CgogIGBgYGphdmFzY3JpcHQKICBmdW5j
        dGlvbiAoYWNjdW11bGF0ZWRWYWx1ZSwgaXRlbSwgY2hhbmdlTWV0YSwgaW5z
        dGFuY2VNZXRhKQogIGBgYAoKICBgYWNjdW11bGF0ZWRWYWx1ZWAgLSBUaGUg
        dmFsdWUgcmV0dXJuZWQgZnJvbSB0aGUgbGFzdCB0aW1lCiAgYHJlbW92ZWRJ
        dGVtYCBvciBgYWRkZWRJdGVtYCB3YXMgY2FsbGVkIG9yIGFuIGVtcHR5IGFy
        cmF5LgoKICBgaXRlbWAgLSB0aGUgZWxlbWVudCBhZGRlZCBvciByZW1vdmVk
        IGZyb20gdGhlIGFycmF5CgogIGBjaGFuZ2VNZXRhYCAtIEFuIG9iamVjdCB3
        aGljaCBjb250YWlucyBtZXRhIGluZm9ybWF0aW9uIGFib3V0IHRoZQogIGNo
        YW5nZS4gSXQgY29udGFpbnMgdGhlIGZvbGxvd2luZyBwcm9wZXJ0aWVzOgoK
        ICAgIC0gYHByb3BlcnR5YCB0aGUgY29tcHV0ZWQgcHJvcGVydHkKICAgIC0g
        YHByb3BlcnR5TmFtZWAgdGhlIG5hbWUgb2YgdGhlIHByb3BlcnR5IG9uIHRo
        ZSBvYmplY3QKICAgIC0gYGluZGV4YCB0aGUgaW5kZXggb2YgdGhlIGFkZGVk
        IG9yIHJlbW92ZWQgaXRlbQogICAgLSBgaXRlbWAgdGhlIGFkZGVkIG9yIHJl
        bW92ZWQgaXRlbTogdGhpcyBpcyBleGFjdGx5IHRoZSBzYW1lIGFzCiAgICAg
        IHRoZSBzZWNvbmQgYXJnCiAgICAtIGBhcnJheUNoYW5nZWRgIHRoZSBhcnJh
        eSB0aGF0IHRyaWdnZXJlZCB0aGUgY2hhbmdlLiBDYW4gYmUKICAgICAgdXNl
        ZnVsIHdoZW4gZGVwZW5kaW5nIG9uIG11bHRpcGxlIGFycmF5cy4KCiAgRm9y
        IHByb3BlcnR5IGNoYW5nZXMgdHJpZ2dlcmVkIG9uIGFuIGl0ZW0gcHJvcGVy
        dHkgY2hhbmdlICh3aGVuCiAgZGVwS2V5IGlzIHNvbWV0aGluZyBsaWtlIGBz
        b21lQXJyYXkuQGVhY2guc29tZVByb3BlcnR5YCksCiAgYGNoYW5nZU1ldGFg
        IHdpbGwgYWxzbyBjb250YWluIHRoZSBmb2xsb3dpbmcgcHJvcGVydHk6Cgog
        ICAgLSBgcHJldmlvdXNWYWx1ZXNgIGFuIG9iamVjdCB3aG9zZSBrZXlzIGFy
        ZSB0aGUgcHJvcGVydGllcyB0aGF0IGNoYW5nZWQgb24KICAgIHRoZSBpdGVt
        LCBhbmQgd2hvc2UgdmFsdWVzIGFyZSB0aGUgaXRlbSdzIHByZXZpb3VzIHZh
        bHVlcy4KCiAgYHByZXZpb3VzVmFsdWVzYCBpcyBpbXBvcnRhbnQgRW1iZXIg
        Y29hbGVzY2VzIGl0ZW0gcHJvcGVydHkgY2hhbmdlcyB2aWEKICBFbWJlci5y
        dW4ub25jZS4gVGhpcyBtZWFucyB0aGF0IGJ5IHRoZSB0aW1lIHJlbW92ZWRJ
        dGVtIGdldHMgY2FsbGVkLCBpdGVtIGhhcwogIHRoZSBuZXcgdmFsdWVzLCBi
        dXQgeW91IG1heSBuZWVkIHRoZSBwcmV2aW91cyB2YWx1ZSAoZWcgZm9yIHNv
        cnRpbmcgJgogIGZpbHRlcmluZykuCgogIGBpbnN0YW5jZU1ldGFgIC0gQW4g
        b2JqZWN0IHRoYXQgY2FuIGJlIHVzZWQgdG8gc3RvcmUgbWV0YQogIGluZm9y
        bWF0aW9uIG5lZWRlZCBmb3IgY2FsY3VsYXRpbmcgeW91ciBjb21wdXRlZC4g
        Rm9yIGV4YW1wbGUgYQogIHVuaXF1ZSBjb21wdXRlZCBtaWdodCB1c2UgdGhp
        cyB0byBzdG9yZSB0aGUgbnVtYmVyIG9mIHRpbWVzIGEgZ2l2ZW4KICBlbGVt
        ZW50IGlzIGZvdW5kIGluIHRoZSBkZXBlbmRlbnQgYXJyYXkuCgogIFRoZSBg
        cmVtb3ZlZEl0ZW1gIGFuZCBgYWRkZWRJdGVtYCBmdW5jdGlvbnMgc2hvdWxk
        IHJldHVybiB0aGUgYWNjdW11bGF0ZWQKICB2YWx1ZS4gSXQgaXMgYWNjZXB0
        YWJsZSB0byBub3QgcmV0dXJuIGFueXRoaW5nIChpZSByZXR1cm4gdW5kZWZp
        bmVkKQogIHRvIGludmFsaWRhdGUgdGhlIGNvbXB1dGF0aW9uLiBUaGlzIGlz
        IGdlbmVyYWxseSBub3QgYSBnb29kIGlkZWEgZm9yCiAgYXJyYXlDb21wdXRl
        ZCBidXQgaXQncyB1c2VkIGluIGVnIG1heCBhbmQgbWluLgoKICBFeGFtcGxl
        CgogIGBgYGphdmFzY3JpcHQKICBFbWJlci5jb21wdXRlZC5tYXAgPSBmdW5j
        dGlvbihkZXBlbmRlbnRLZXksIGNhbGxiYWNrKSB7CiAgICB2YXIgb3B0aW9u
        cyA9IHsKICAgICAgYWRkZWRJdGVtOiBmdW5jdGlvbihhcnJheSwgaXRlbSwg
        Y2hhbmdlTWV0YSwgaW5zdGFuY2VNZXRhKSB7CiAgICAgICAgdmFyIG1hcHBl
        ZCA9IGNhbGxiYWNrKGl0ZW0pOwogICAgICAgIGFycmF5Lmluc2VydEF0KGNo
        YW5nZU1ldGEuaW5kZXgsIG1hcHBlZCk7CiAgICAgICAgcmV0dXJuIGFycmF5
        OwogICAgICB9LAogICAgICByZW1vdmVkSXRlbTogZnVuY3Rpb24oYXJyYXks
        IGl0ZW0sIGNoYW5nZU1ldGEsIGluc3RhbmNlTWV0YSkgewogICAgICAgIGFy
        cmF5LnJlbW92ZUF0KGNoYW5nZU1ldGEuaW5kZXgsIDEpOwogICAgICAgIHJl
        dHVybiBhcnJheTsKICAgICAgfQogICAgfTsKCiAgICByZXR1cm4gRW1iZXIu
        YXJyYXlDb21wdXRlZChkZXBlbmRlbnRLZXksIG9wdGlvbnMpOwogIH07CiAg
        YGBgCgogIEBtZXRob2QgYXJyYXlDb21wdXRlZAogIEBmb3IgRW1iZXIKICBA
        cGFyYW0ge1N0cmluZ30gW2RlcGVuZGVudEtleXMqXQogIEBwYXJhbSB7T2Jq
        ZWN0fSBvcHRpb25zCiAgQHJldHVybiB7RW1iZXIuQ29tcHV0ZWRQcm9wZXJ0
        eX0KKi8KRW1iZXIuYXJyYXlDb21wdXRlZCA9IGZ1bmN0aW9uIChvcHRpb25z
        KSB7CiAgdmFyIGFyZ3M7CgogIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMSkg
        ewogICAgYXJncyA9IGFfc2xpY2UuY2FsbChhcmd1bWVudHMsIDAsIC0xKTsK
        ICAgIG9wdGlvbnMgPSBhX3NsaWNlLmNhbGwoYXJndW1lbnRzLCAtMSlbMF07
        CiAgfQoKICBpZiAodHlwZW9mIG9wdGlvbnMgIT09ICJvYmplY3QiKSB7CiAg
        ICB0aHJvdyBuZXcgRW1iZXIuRXJyb3IoIkFycmF5IENvbXB1dGVkIFByb3Bl
        cnR5IGRlY2xhcmVkIHdpdGhvdXQgYW4gb3B0aW9ucyBoYXNoIik7CiAgfQoK
        ICB2YXIgY3AgPSBuZXcgQXJyYXlDb21wdXRlZFByb3BlcnR5KG9wdGlvbnMp
        OwoKICBpZiAoYXJncykgewogICAgY3AucHJvcGVydHkuYXBwbHkoY3AsIGFy
        Z3MpOwogIH0KCiAgcmV0dXJuIGNwOwp9OwoKfSkoKTsKCgoKKGZ1bmN0aW9u
        KCkgewovKioKQG1vZHVsZSBlbWJlcgpAc3VibW9kdWxlIGVtYmVyLXJ1bnRp
        bWUKKi8KCnZhciBnZXQgPSBFbWJlci5nZXQsCiAgICBzZXQgPSBFbWJlci5z
        ZXQsCiAgICBndWlkRm9yID0gRW1iZXIuZ3VpZEZvciwKICAgIG1lcmdlID0g
        RW1iZXIubWVyZ2UsCiAgICBhX3NsaWNlID0gW10uc2xpY2UsCiAgICBmb3JF
        YWNoID0gRW1iZXIuRW51bWVyYWJsZVV0aWxzLmZvckVhY2gsCiAgICBtYXAg
        PSBFbWJlci5FbnVtZXJhYmxlVXRpbHMubWFwOwoKLyoqCiAgQSBjb21wdXRl
        ZCBwcm9wZXJ0eSB0aGF0IGNhbGN1bGF0ZXMgdGhlIG1heGltdW0gdmFsdWUg
        aW4gdGhlCiAgZGVwZW5kZW50IGFycmF5LiBUaGlzIHdpbGwgcmV0dXJuIGAt
        SW5maW5pdHlgIHdoZW4gdGhlIGRlcGVuZGVudAogIGFycmF5IGlzIGVtcHR5
        LgoKICBFeGFtcGxlCgogIGBgYGphdmFzY3JpcHQKICBBcHAuUGVyc29uID0g
        RW1iZXIuT2JqZWN0LmV4dGVuZCh7CiAgICBjaGlsZEFnZXM6IEVtYmVyLmNv
        bXB1dGVkLm1hcEJ5KCdjaGlsZHJlbicsICdhZ2UnKSwKICAgIG1heENoaWxk
        QWdlOiBFbWJlci5jb21wdXRlZC5tYXgoJ2NoaWxkQWdlcycpCiAgfSk7Cgog
        IHZhciBsb3JkQnlyb24gPSBBcHAuUGVyc29uLmNyZWF0ZSh7Y2hpbGRyZW46
        IFtdfSk7CiAgbG9yZEJ5cm9uLmdldCgnbWF4Q2hpbGRBZ2UnKTsgLy8gLUlu
        ZmluaXR5CiAgbG9yZEJ5cm9uLmdldCgnY2hpbGRyZW4nKS5wdXNoT2JqZWN0
        KHtuYW1lOiAnQXVndXN0YSBBZGEgQnlyb24nLCBhZ2U6IDd9KTsKICBsb3Jk
        Qnlyb24uZ2V0KCdtYXhDaGlsZEFnZScpOyAvLyA3CiAgbG9yZEJ5cm9uLmdl
        dCgnY2hpbGRyZW4nKS5wdXNoT2JqZWN0cyhbe25hbWU6ICdBbGxlZ3JhIEJ5
        cm9uJywgYWdlOiA1fSwge25hbWU6ICdFbGl6YWJldGggTWVkb3JhIExlaWdo
        JywgYWdlOiA4fV0pOwogIGxvcmRCeXJvbi5nZXQoJ21heENoaWxkQWdlJyk7
        IC8vIDgKICBgYGAKCiAgQG1ldGhvZCBjb21wdXRlZC5tYXgKICBAZm9yIEVt
        YmVyCiAgQHBhcmFtIHtTdHJpbmd9IGRlcGVuZGVudEtleQogIEByZXR1cm4g
        e0VtYmVyLkNvbXB1dGVkUHJvcGVydHl9IGNvbXB1dGVzIHRoZSBsYXJnZXN0
        IHZhbHVlIGluIHRoZSBkZXBlbmRlbnRLZXkncyBhcnJheQoqLwpFbWJlci5j
        b21wdXRlZC5tYXggPSBmdW5jdGlvbiAoZGVwZW5kZW50S2V5KSB7CiAgcmV0
        dXJuIEVtYmVyLnJlZHVjZUNvbXB1dGVkLmNhbGwobnVsbCwgZGVwZW5kZW50
        S2V5LCB7CiAgICBpbml0aWFsVmFsdWU6IC1JbmZpbml0eSwKCiAgICBhZGRl
        ZEl0ZW06IGZ1bmN0aW9uIChhY2N1bXVsYXRlZFZhbHVlLCBpdGVtLCBjaGFu
        Z2VNZXRhLCBpbnN0YW5jZU1ldGEpIHsKICAgICAgcmV0dXJuIE1hdGgubWF4
        KGFjY3VtdWxhdGVkVmFsdWUsIGl0ZW0pOwogICAgfSwKCiAgICByZW1vdmVk
        SXRlbTogZnVuY3Rpb24gKGFjY3VtdWxhdGVkVmFsdWUsIGl0ZW0sIGNoYW5n
        ZU1ldGEsIGluc3RhbmNlTWV0YSkgewogICAgICBpZiAoaXRlbSA8IGFjY3Vt
        dWxhdGVkVmFsdWUpIHsKICAgICAgICByZXR1cm4gYWNjdW11bGF0ZWRWYWx1
        ZTsKICAgICAgfQogICAgfQogIH0pOwp9OwoKLyoqCiAgQSBjb21wdXRlZCBw
        cm9wZXJ0eSB0aGF0IGNhbGN1bGF0ZXMgdGhlIG1pbmltdW0gdmFsdWUgaW4g
        dGhlCiAgZGVwZW5kZW50IGFycmF5LiBUaGlzIHdpbGwgcmV0dXJuIGBJbmZp
        bml0eWAgd2hlbiB0aGUgZGVwZW5kZW50CiAgYXJyYXkgaXMgZW1wdHkuCgog
        IEV4YW1wbGUKCiAgYGBgamF2YXNjcmlwdAogIEFwcC5QZXJzb24gPSBFbWJl
        ci5PYmplY3QuZXh0ZW5kKHsKICAgIGNoaWxkQWdlczogRW1iZXIuY29tcHV0
        ZWQubWFwQnkoJ2NoaWxkcmVuJywgJ2FnZScpLAogICAgbWluQ2hpbGRBZ2U6
        IEVtYmVyLmNvbXB1dGVkLm1pbignY2hpbGRBZ2VzJykKICB9KTsKCiAgdmFy
        IGxvcmRCeXJvbiA9IEFwcC5QZXJzb24uY3JlYXRlKHtjaGlsZHJlbjogW119
        KTsKICBsb3JkQnlyb24uZ2V0KCdtaW5DaGlsZEFnZScpOyAvLyBJbmZpbml0
        eQogIGxvcmRCeXJvbi5nZXQoJ2NoaWxkcmVuJykucHVzaE9iamVjdCh7bmFt
        ZTogJ0F1Z3VzdGEgQWRhIEJ5cm9uJywgYWdlOiA3fSk7CiAgbG9yZEJ5cm9u
        LmdldCgnbWluQ2hpbGRBZ2UnKTsgLy8gNwogIGxvcmRCeXJvbi5nZXQoJ2No
        aWxkcmVuJykucHVzaE9iamVjdHMoW3tuYW1lOiAnQWxsZWdyYSBCeXJvbics
        IGFnZTogNX0sIHtuYW1lOiAnRWxpemFiZXRoIE1lZG9yYSBMZWlnaCcsIGFn
        ZTogOH1dKTsKICBsb3JkQnlyb24uZ2V0KCdtaW5DaGlsZEFnZScpOyAvLyA1
        CiAgYGBgCgogIEBtZXRob2QgY29tcHV0ZWQubWluCiAgQGZvciBFbWJlcgog
        IEBwYXJhbSB7U3RyaW5nfSBkZXBlbmRlbnRLZXkKICBAcmV0dXJuIHtFbWJl
        ci5Db21wdXRlZFByb3BlcnR5fSBjb21wdXRlcyB0aGUgc21hbGxlc3QgdmFs
        dWUgaW4gdGhlIGRlcGVuZGVudEtleSdzIGFycmF5CiovCkVtYmVyLmNvbXB1
        dGVkLm1pbiA9IGZ1bmN0aW9uIChkZXBlbmRlbnRLZXkpIHsKICByZXR1cm4g
        RW1iZXIucmVkdWNlQ29tcHV0ZWQuY2FsbChudWxsLCBkZXBlbmRlbnRLZXks
        IHsKICAgIGluaXRpYWxWYWx1ZTogSW5maW5pdHksCgogICAgYWRkZWRJdGVt
        OiBmdW5jdGlvbiAoYWNjdW11bGF0ZWRWYWx1ZSwgaXRlbSwgY2hhbmdlTWV0
        YSwgaW5zdGFuY2VNZXRhKSB7CiAgICAgIHJldHVybiBNYXRoLm1pbihhY2N1
        bXVsYXRlZFZhbHVlLCBpdGVtKTsKICAgIH0sCgogICAgcmVtb3ZlZEl0ZW06
        IGZ1bmN0aW9uIChhY2N1bXVsYXRlZFZhbHVlLCBpdGVtLCBjaGFuZ2VNZXRh
        LCBpbnN0YW5jZU1ldGEpIHsKICAgICAgaWYgKGl0ZW0gPiBhY2N1bXVsYXRl
        ZFZhbHVlKSB7CiAgICAgICAgcmV0dXJuIGFjY3VtdWxhdGVkVmFsdWU7CiAg
        ICAgIH0KICAgIH0KICB9KTsKfTsKCi8qKgogIFJldHVybnMgYW4gYXJyYXkg
        bWFwcGVkIHZpYSB0aGUgY2FsbGJhY2sKCiAgVGhlIGNhbGxiYWNrIG1ldGhv
        ZCB5b3UgcHJvdmlkZSBzaG91bGQgaGF2ZSB0aGUgZm9sbG93aW5nIHNpZ25h
        dHVyZToKCiAgYGBgamF2YXNjcmlwdAogIGZ1bmN0aW9uKGl0ZW0pOwogIGBg
        YAoKICAtIGBpdGVtYCBpcyB0aGUgY3VycmVudCBpdGVtIGluIHRoZSBpdGVy
        YXRpb24uCgogIEV4YW1wbGUKCiAgYGBgamF2YXNjcmlwdAogIEFwcC5IYW1w
        c3RlciA9IEVtYmVyLk9iamVjdC5leHRlbmQoewogICAgZXhjaXRpbmdDaG9y
        ZXM6IEVtYmVyLmNvbXB1dGVkLm1hcCgnY2hvcmVzJywgZnVuY3Rpb24oY2hv
        cmUpIHsKICAgICAgcmV0dXJuIGNob3JlLnRvVXBwZXJDYXNlKCkgKyAnISc7
        CiAgICB9KQogIH0pOwoKICB2YXIgaGFtcHN0ZXIgPSBBcHAuSGFtcHN0ZXIu
        Y3JlYXRlKHtjaG9yZXM6IFsnY29vaycsICdjbGVhbicsICd3cml0ZSBtb3Jl
        IHVuaXQgdGVzdHMnXX0pOwogIGhhbXBzdGVyLmdldCgnZXhjaXRpbmdDaG9y
        ZXMnKTsgLy8gWydDT09LIScsICdDTEVBTiEnLCAnV1JJVEUgTU9SRSBVTklU
        IFRFU1RTISddCiAgYGBgCgogIEBtZXRob2QgY29tcHV0ZWQubWFwCiAgQGZv
        ciBFbWJlcgogIEBwYXJhbSB7U3RyaW5nfSBkZXBlbmRlbnRLZXkKICBAcGFy
        YW0ge0Z1bmN0aW9ufSBjYWxsYmFjawogIEByZXR1cm4ge0VtYmVyLkNvbXB1
        dGVkUHJvcGVydHl9IGFuIGFycmF5IG1hcHBlZCB2aWEgdGhlIGNhbGxiYWNr
        CiovCkVtYmVyLmNvbXB1dGVkLm1hcCA9IGZ1bmN0aW9uKGRlcGVuZGVudEtl
        eSwgY2FsbGJhY2spIHsKICB2YXIgb3B0aW9ucyA9IHsKICAgIGFkZGVkSXRl
        bTogZnVuY3Rpb24oYXJyYXksIGl0ZW0sIGNoYW5nZU1ldGEsIGluc3RhbmNl
        TWV0YSkgewogICAgICB2YXIgbWFwcGVkID0gY2FsbGJhY2suY2FsbCh0aGlz
        LCBpdGVtKTsKICAgICAgYXJyYXkuaW5zZXJ0QXQoY2hhbmdlTWV0YS5pbmRl
        eCwgbWFwcGVkKTsKICAgICAgcmV0dXJuIGFycmF5OwogICAgfSwKICAgIHJl
        bW92ZWRJdGVtOiBmdW5jdGlvbihhcnJheSwgaXRlbSwgY2hhbmdlTWV0YSwg
        aW5zdGFuY2VNZXRhKSB7CiAgICAgIGFycmF5LnJlbW92ZUF0KGNoYW5nZU1l
        dGEuaW5kZXgsIDEpOwogICAgICByZXR1cm4gYXJyYXk7CiAgICB9CiAgfTsK
        CiAgcmV0dXJuIEVtYmVyLmFycmF5Q29tcHV0ZWQoZGVwZW5kZW50S2V5LCBv
        cHRpb25zKTsKfTsKCi8qKgogIFJldHVybnMgYW4gYXJyYXkgbWFwcGVkIHRv
        IHRoZSBzcGVjaWZpZWQga2V5LgoKICBFeGFtcGxlCgogIGBgYGphdmFzY3Jp
        cHQKICBBcHAuUGVyc29uID0gRW1iZXIuT2JqZWN0LmV4dGVuZCh7CiAgICBj
        aGlsZEFnZXM6IEVtYmVyLmNvbXB1dGVkLm1hcEJ5KCdjaGlsZHJlbicsICdh
        Z2UnKQogIH0pOwoKICB2YXIgbG9yZEJ5cm9uID0gQXBwLlBlcnNvbi5jcmVh
        dGUoe2NoaWxkcmVuOiBbXX0pOwogIGxvcmRCeXJvbi5nZXQoJ2NoaWxkQWdl
        cycpOyAvLyBbXQogIGxvcmRCeXJvbi5nZXQoJ2NoaWxkcmVuJykucHVzaE9i
        amVjdCh7bmFtZTogJ0F1Z3VzdGEgQWRhIEJ5cm9uJywgYWdlOiA3fSk7CiAg
        bG9yZEJ5cm9uLmdldCgnY2hpbGRBZ2VzJyk7IC8vIFs3XQogIGxvcmRCeXJv
        bi5nZXQoJ2NoaWxkcmVuJykucHVzaE9iamVjdHMoW3tuYW1lOiAnQWxsZWdy
        YSBCeXJvbicsIGFnZTogNX0sIHtuYW1lOiAnRWxpemFiZXRoIE1lZG9yYSBM
        ZWlnaCcsIGFnZTogOH1dKTsKICBsb3JkQnlyb24uZ2V0KCdjaGlsZEFnZXMn
        KTsgLy8gWzcsIDUsIDhdCiAgYGBgCgogIEBtZXRob2QgY29tcHV0ZWQubWFw
        QnkKICBAZm9yIEVtYmVyCiAgQHBhcmFtIHtTdHJpbmd9IGRlcGVuZGVudEtl
        eQogIEBwYXJhbSB7U3RyaW5nfSBwcm9wZXJ0eUtleQogIEByZXR1cm4ge0Vt
        YmVyLkNvbXB1dGVkUHJvcGVydHl9IGFuIGFycmF5IG1hcHBlZCB0byB0aGUg
        c3BlY2lmaWVkIGtleQoqLwpFbWJlci5jb21wdXRlZC5tYXBCeSA9IGZ1bmN0
        aW9uKGRlcGVuZGVudEtleSwgcHJvcGVydHlLZXkpIHsKICB2YXIgY2FsbGJh
        Y2sgPSBmdW5jdGlvbihpdGVtKSB7IHJldHVybiBnZXQoaXRlbSwgcHJvcGVy
        dHlLZXkpOyB9OwogIHJldHVybiBFbWJlci5jb21wdXRlZC5tYXAoZGVwZW5k
        ZW50S2V5ICsgJy5AZWFjaC4nICsgcHJvcGVydHlLZXksIGNhbGxiYWNrKTsK
        fTsKCi8qKgogIEBtZXRob2QgY29tcHV0ZWQubWFwUHJvcGVydHkKICBAZm9y
        IEVtYmVyCiAgQGRlcHJlY2F0ZWQgVXNlIGBFbWJlci5jb21wdXRlZC5tYXBC
        eWAgaW5zdGVhZAogIEBwYXJhbSBkZXBlbmRlbnRLZXkKICBAcGFyYW0gcHJv
        cGVydHlLZXkKKi8KRW1iZXIuY29tcHV0ZWQubWFwUHJvcGVydHkgPSBFbWJl
        ci5jb21wdXRlZC5tYXBCeTsKCi8qKgogIEZpbHRlcnMgdGhlIGFycmF5IGJ5
        IHRoZSBjYWxsYmFjay4KCiAgVGhlIGNhbGxiYWNrIG1ldGhvZCB5b3UgcHJv
        dmlkZSBzaG91bGQgaGF2ZSB0aGUgZm9sbG93aW5nIHNpZ25hdHVyZToKCiAg
        YGBgamF2YXNjcmlwdAogIGZ1bmN0aW9uKGl0ZW0pOwogIGBgYAoKICAtIGBp
        dGVtYCBpcyB0aGUgY3VycmVudCBpdGVtIGluIHRoZSBpdGVyYXRpb24uCgog
        IEV4YW1wbGUKCiAgYGBgamF2YXNjcmlwdAogIEFwcC5IYW1wc3RlciA9IEVt
        YmVyLk9iamVjdC5leHRlbmQoewogICAgcmVtYWluaW5nQ2hvcmVzOiBFbWJl
        ci5jb21wdXRlZC5maWx0ZXIoJ2Nob3JlcycsIGZ1bmN0aW9uKGNob3JlKSB7
        CiAgICAgIHJldHVybiAhY2hvcmUuZG9uZTsKICAgIH0pCiAgfSk7CgogIHZh
        ciBoYW1wc3RlciA9IEFwcC5IYW1wc3Rlci5jcmVhdGUoe2Nob3JlczogWwog
        ICAge25hbWU6ICdjb29rJywgZG9uZTogdHJ1ZX0sCiAgICB7bmFtZTogJ2Ns
        ZWFuJywgZG9uZTogdHJ1ZX0sCiAgICB7bmFtZTogJ3dyaXRlIG1vcmUgdW5p
        dCB0ZXN0cycsIGRvbmU6IGZhbHNlfQogIF19KTsKICBoYW1wc3Rlci5nZXQo
        J3JlbWFpbmluZ0Nob3JlcycpOyAvLyBbe25hbWU6ICd3cml0ZSBtb3JlIHVu
        aXQgdGVzdHMnLCBkb25lOiBmYWxzZX1dCiAgYGBgCgogIEBtZXRob2QgY29t
        cHV0ZWQuZmlsdGVyCiAgQGZvciBFbWJlcgogIEBwYXJhbSB7U3RyaW5nfSBk
        ZXBlbmRlbnRLZXkKICBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjawogIEBy
        ZXR1cm4ge0VtYmVyLkNvbXB1dGVkUHJvcGVydHl9IHRoZSBmaWx0ZXJlZCBh
        cnJheQoqLwpFbWJlci5jb21wdXRlZC5maWx0ZXIgPSBmdW5jdGlvbihkZXBl
        bmRlbnRLZXksIGNhbGxiYWNrKSB7CiAgdmFyIG9wdGlvbnMgPSB7CiAgICBp
        bml0aWFsaXplOiBmdW5jdGlvbiAoYXJyYXksIGNoYW5nZU1ldGEsIGluc3Rh
        bmNlTWV0YSkgewogICAgICBpbnN0YW5jZU1ldGEuZmlsdGVyZWRBcnJheUlu
        ZGV4ZXMgPSBuZXcgRW1iZXIuU3ViQXJyYXkoKTsKICAgIH0sCgogICAgYWRk
        ZWRJdGVtOiBmdW5jdGlvbihhcnJheSwgaXRlbSwgY2hhbmdlTWV0YSwgaW5z
        dGFuY2VNZXRhKSB7CiAgICAgIHZhciBtYXRjaCA9ICEhY2FsbGJhY2suY2Fs
        bCh0aGlzLCBpdGVtKSwKICAgICAgICAgIGZpbHRlckluZGV4ID0gaW5zdGFu
        Y2VNZXRhLmZpbHRlcmVkQXJyYXlJbmRleGVzLmFkZEl0ZW0oY2hhbmdlTWV0
        YS5pbmRleCwgbWF0Y2gpOwoKICAgICAgaWYgKG1hdGNoKSB7CiAgICAgICAg
        YXJyYXkuaW5zZXJ0QXQoZmlsdGVySW5kZXgsIGl0ZW0pOwogICAgICB9Cgog
        ICAgICByZXR1cm4gYXJyYXk7CiAgICB9LAoKICAgIHJlbW92ZWRJdGVtOiBm
        dW5jdGlvbihhcnJheSwgaXRlbSwgY2hhbmdlTWV0YSwgaW5zdGFuY2VNZXRh
        KSB7CiAgICAgIHZhciBmaWx0ZXJJbmRleCA9IGluc3RhbmNlTWV0YS5maWx0
        ZXJlZEFycmF5SW5kZXhlcy5yZW1vdmVJdGVtKGNoYW5nZU1ldGEuaW5kZXgp
        OwoKICAgICAgaWYgKGZpbHRlckluZGV4ID4gLTEpIHsKICAgICAgICBhcnJh
        eS5yZW1vdmVBdChmaWx0ZXJJbmRleCk7CiAgICAgIH0KCiAgICAgIHJldHVy
        biBhcnJheTsKICAgIH0KICB9OwoKICByZXR1cm4gRW1iZXIuYXJyYXlDb21w
        dXRlZChkZXBlbmRlbnRLZXksIG9wdGlvbnMpOwp9OwoKLyoqCiAgRmlsdGVy
        cyB0aGUgYXJyYXkgYnkgdGhlIHByb3BlcnR5IGFuZCB2YWx1ZQoKICBFeGFt
        cGxlCgogIGBgYGphdmFzY3JpcHQKICBBcHAuSGFtcHN0ZXIgPSBFbWJlci5P
        YmplY3QuZXh0ZW5kKHsKICAgIHJlbWFpbmluZ0Nob3JlczogRW1iZXIuY29t
        cHV0ZWQuZmlsdGVyQnkoJ2Nob3JlcycsICdkb25lJywgZmFsc2UpCiAgfSk7
        CgogIHZhciBoYW1wc3RlciA9IEFwcC5IYW1wc3Rlci5jcmVhdGUoe2Nob3Jl
        czogWwogICAge25hbWU6ICdjb29rJywgZG9uZTogdHJ1ZX0sCiAgICB7bmFt
        ZTogJ2NsZWFuJywgZG9uZTogdHJ1ZX0sCiAgICB7bmFtZTogJ3dyaXRlIG1v
        cmUgdW5pdCB0ZXN0cycsIGRvbmU6IGZhbHNlfQogIF19KTsKICBoYW1wc3Rl
        ci5nZXQoJ3JlbWFpbmluZ0Nob3JlcycpOyAvLyBbe25hbWU6ICd3cml0ZSBt
        b3JlIHVuaXQgdGVzdHMnLCBkb25lOiBmYWxzZX1dCiAgYGBgCgogIEBtZXRo
        b2QgY29tcHV0ZWQuZmlsdGVyQnkKICBAZm9yIEVtYmVyCiAgQHBhcmFtIHtT
        dHJpbmd9IGRlcGVuZGVudEtleQogIEBwYXJhbSB7U3RyaW5nfSBwcm9wZXJ0
        eUtleQogIEBwYXJhbSB7U3RyaW5nfSB2YWx1ZQogIEByZXR1cm4ge0VtYmVy
        LkNvbXB1dGVkUHJvcGVydHl9IHRoZSBmaWx0ZXJlZCBhcnJheQoqLwpFbWJl
        ci5jb21wdXRlZC5maWx0ZXJCeSA9IGZ1bmN0aW9uKGRlcGVuZGVudEtleSwg
        cHJvcGVydHlLZXksIHZhbHVlKSB7CiAgdmFyIGNhbGxiYWNrOwoKICBpZiAo
        YXJndW1lbnRzLmxlbmd0aCA9PT0gMikgewogICAgY2FsbGJhY2sgPSBmdW5j
        dGlvbihpdGVtKSB7CiAgICAgIHJldHVybiBnZXQoaXRlbSwgcHJvcGVydHlL
        ZXkpOwogICAgfTsKICB9IGVsc2UgewogICAgY2FsbGJhY2sgPSBmdW5jdGlv
        bihpdGVtKSB7CiAgICAgIHJldHVybiBnZXQoaXRlbSwgcHJvcGVydHlLZXkp
        ID09PSB2YWx1ZTsKICAgIH07CiAgfQoKICByZXR1cm4gRW1iZXIuY29tcHV0
        ZWQuZmlsdGVyKGRlcGVuZGVudEtleSArICcuQGVhY2guJyArIHByb3BlcnR5
        S2V5LCBjYWxsYmFjayk7Cn07CgovKioKICBAbWV0aG9kIGNvbXB1dGVkLmZp
        bHRlclByb3BlcnR5CiAgQGZvciBFbWJlcgogIEBwYXJhbSBkZXBlbmRlbnRL
        ZXkKICBAcGFyYW0gcHJvcGVydHlLZXkKICBAcGFyYW0gdmFsdWUKICBAZGVw
        cmVjYXRlZCBVc2UgYEVtYmVyLmNvbXB1dGVkLmZpbHRlckJ5YCBpbnN0ZWFk
        CiovCkVtYmVyLmNvbXB1dGVkLmZpbHRlclByb3BlcnR5ID0gRW1iZXIuY29t
        cHV0ZWQuZmlsdGVyQnk7CgovKioKICBBIGNvbXB1dGVkIHByb3BlcnR5IHdo
        aWNoIHJldHVybnMgYSBuZXcgYXJyYXkgd2l0aCBhbGwgdGhlIHVuaXF1ZQog
        IGVsZW1lbnRzIGZyb20gb25lIG9yIG1vcmUgZGVwZW5kZW50IGFycmF5cy4K
        CiAgRXhhbXBsZQoKICBgYGBqYXZhc2NyaXB0CiAgQXBwLkhhbXBzdGVyID0g
        RW1iZXIuT2JqZWN0LmV4dGVuZCh7CiAgICB1bmlxdWVGcnVpdHM6IEVtYmVy
        LmNvbXB1dGVkLnVuaXEoJ2ZydWl0cycpCiAgfSk7CgogIHZhciBoYW1wc3Rl
        ciA9IEFwcC5IYW1wc3Rlci5jcmVhdGUoe2ZydWl0czogWwogICAgJ2JhbmFu
        YScsCiAgICAnZ3JhcGUnLAogICAgJ2thbGUnLAogICAgJ2JhbmFuYScKICBd
        fSk7CiAgaGFtcHN0ZXIuZ2V0KCd1bmlxdWVGcnVpdHMnKTsgLy8gWydiYW5h
        bmEnLCAnZ3JhcGUnLCAna2FsZSddCiAgYGBgCgogIEBtZXRob2QgY29tcHV0
        ZWQudW5pcQogIEBmb3IgRW1iZXIKICBAcGFyYW0ge1N0cmluZ30gcHJvcGVy
        dHlLZXkqCiAgQHJldHVybiB7RW1iZXIuQ29tcHV0ZWRQcm9wZXJ0eX0gY29t
        cHV0ZXMgYSBuZXcgYXJyYXkgd2l0aCBhbGwgdGhlCiAgdW5pcXVlIGVsZW1l
        bnRzIGZyb20gdGhlIGRlcGVuZGVudCBhcnJheQoqLwpFbWJlci5jb21wdXRl
        ZC51bmlxID0gZnVuY3Rpb24oKSB7CiAgdmFyIGFyZ3MgPSBhX3NsaWNlLmNh
        bGwoYXJndW1lbnRzKTsKICBhcmdzLnB1c2goewogICAgaW5pdGlhbGl6ZTog
        ZnVuY3Rpb24oYXJyYXksIGNoYW5nZU1ldGEsIGluc3RhbmNlTWV0YSkgewog
        ICAgICBpbnN0YW5jZU1ldGEuaXRlbUNvdW50cyA9IHt9OwogICAgfSwKCiAg
        ICBhZGRlZEl0ZW06IGZ1bmN0aW9uKGFycmF5LCBpdGVtLCBjaGFuZ2VNZXRh
        LCBpbnN0YW5jZU1ldGEpIHsKICAgICAgdmFyIGd1aWQgPSBndWlkRm9yKGl0
        ZW0pOwoKICAgICAgaWYgKCFpbnN0YW5jZU1ldGEuaXRlbUNvdW50c1tndWlk
        XSkgewogICAgICAgIGluc3RhbmNlTWV0YS5pdGVtQ291bnRzW2d1aWRdID0g
        MTsKICAgICAgfSBlbHNlIHsKICAgICAgICArK2luc3RhbmNlTWV0YS5pdGVt
        Q291bnRzW2d1aWRdOwogICAgICB9CiAgICAgIGFycmF5LmFkZE9iamVjdChp
        dGVtKTsKICAgICAgcmV0dXJuIGFycmF5OwogICAgfSwKICAgIHJlbW92ZWRJ
        dGVtOiBmdW5jdGlvbihhcnJheSwgaXRlbSwgXywgaW5zdGFuY2VNZXRhKSB7
        CiAgICAgIHZhciBndWlkID0gZ3VpZEZvcihpdGVtKSwKICAgICAgICAgIGl0
        ZW1Db3VudHMgPSBpbnN0YW5jZU1ldGEuaXRlbUNvdW50czsKCiAgICAgIGlm
        ICgtLWl0ZW1Db3VudHNbZ3VpZF0gPT09IDApIHsKICAgICAgICBhcnJheS5y
        ZW1vdmVPYmplY3QoaXRlbSk7CiAgICAgIH0KICAgICAgcmV0dXJuIGFycmF5
        OwogICAgfQogIH0pOwogIHJldHVybiBFbWJlci5hcnJheUNvbXB1dGVkLmFw
        cGx5KG51bGwsIGFyZ3MpOwp9OwoKLyoqCiAgQWxpYXMgZm9yIFtFbWJlci5j
        b21wdXRlZC51bmlxXSgvYXBpLyNtZXRob2RfY29tcHV0ZWRfdW5pcSkuCgog
        IEBtZXRob2QgY29tcHV0ZWQudW5pb24KICBAZm9yIEVtYmVyCiAgQHBhcmFt
        IHtTdHJpbmd9IHByb3BlcnR5S2V5KgogIEByZXR1cm4ge0VtYmVyLkNvbXB1
        dGVkUHJvcGVydHl9IGNvbXB1dGVzIGEgbmV3IGFycmF5IHdpdGggYWxsIHRo
        ZQogIHVuaXF1ZSBlbGVtZW50cyBmcm9tIHRoZSBkZXBlbmRlbnQgYXJyYXkK
        Ki8KRW1iZXIuY29tcHV0ZWQudW5pb24gPSBFbWJlci5jb21wdXRlZC51bmlx
        OwoKLyoqCiAgQSBjb21wdXRlZCBwcm9wZXJ0eSB3aGljaCByZXR1cm5zIGEg
        bmV3IGFycmF5IHdpdGggYWxsIHRoZSBkdXBsaWNhdGVkCiAgZWxlbWVudHMg
        ZnJvbSB0d28gb3IgbW9yZSBkZXBlbmRlbnkgYXJyYXlzLgoKICBFeGFtcGxl
        CgogIGBgYGphdmFzY3JpcHQKICB2YXIgb2JqID0gRW1iZXIuT2JqZWN0LmNy
        ZWF0ZVdpdGhNaXhpbnMoewogICAgYWRhRnJpZW5kczogWydDaGFybGVzIEJh
        YmJhZ2UnLCAnSm9obiBIb2Job3VzZScsICdXaWxsaWFtIEtpbmcnLCAnTWFy
        eSBTb21lcnZpbGxlJ10sCiAgICBjaGFybGVzRnJpZW5kczogWydXaWxsaWFt
        IEtpbmcnLCAnTWFyeSBTb21lcnZpbGxlJywgJ0FkYSBMb3ZlbGFjZScsICdH
        ZW9yZ2UgUGVhY29jayddLAogICAgZnJpZW5kc0luQ29tbW9uOiBFbWJlci5j
        b21wdXRlZC5pbnRlcnNlY3QoJ2FkYUZyaWVuZHMnLCAnY2hhcmxlc0ZyaWVu
        ZHMnKQogIH0pOwoKICBvYmouZ2V0KCdmcmllbmRzSW5Db21tb24nKTsgLy8g
        WydXaWxsaWFtIEtpbmcnLCAnTWFyeSBTb21lcnZpbGxlJ10KICBgYGAKCiAg
        QG1ldGhvZCBjb21wdXRlZC5pbnRlcnNlY3QKICBAZm9yIEVtYmVyCiAgQHBh
        cmFtIHtTdHJpbmd9IHByb3BlcnR5S2V5KgogIEByZXR1cm4ge0VtYmVyLkNv
        bXB1dGVkUHJvcGVydHl9IGNvbXB1dGVzIGEgbmV3IGFycmF5IHdpdGggYWxs
        IHRoZQogIGR1cGxpY2F0ZWQgZWxlbWVudHMgZnJvbSB0aGUgZGVwZW5kZW50
        IGFycmF5cwoqLwpFbWJlci5jb21wdXRlZC5pbnRlcnNlY3QgPSBmdW5jdGlv
        biAoKSB7CiAgdmFyIGdldERlcGVuZGVudEtleUd1aWRzID0gZnVuY3Rpb24g
        KGNoYW5nZU1ldGEpIHsKICAgIHJldHVybiBtYXAoY2hhbmdlTWV0YS5wcm9w
        ZXJ0eS5fZGVwZW5kZW50S2V5cywgZnVuY3Rpb24gKGRlcGVuZGVudEtleSkg
        ewogICAgICByZXR1cm4gZ3VpZEZvcihkZXBlbmRlbnRLZXkpOwogICAgfSk7
        CiAgfTsKCiAgdmFyIGFyZ3MgPSBhX3NsaWNlLmNhbGwoYXJndW1lbnRzKTsK
        ICBhcmdzLnB1c2goewogICAgaW5pdGlhbGl6ZTogZnVuY3Rpb24gKGFycmF5
        LCBjaGFuZ2VNZXRhLCBpbnN0YW5jZU1ldGEpIHsKICAgICAgaW5zdGFuY2VN
        ZXRhLml0ZW1Db3VudHMgPSB7fTsKICAgIH0sCgogICAgYWRkZWRJdGVtOiBm
        dW5jdGlvbihhcnJheSwgaXRlbSwgY2hhbmdlTWV0YSwgaW5zdGFuY2VNZXRh
        KSB7CiAgICAgIHZhciBpdGVtR3VpZCA9IGd1aWRGb3IoaXRlbSksCiAgICAg
        ICAgICBkZXBlbmRlbnRHdWlkcyA9IGdldERlcGVuZGVudEtleUd1aWRzKGNo
        YW5nZU1ldGEpLAogICAgICAgICAgZGVwZW5kZW50R3VpZCA9IGd1aWRGb3Io
        Y2hhbmdlTWV0YS5hcnJheUNoYW5nZWQpLAogICAgICAgICAgbnVtYmVyT2ZE
        ZXBlbmRlbnRBcnJheXMgPSBjaGFuZ2VNZXRhLnByb3BlcnR5Ll9kZXBlbmRl
        bnRLZXlzLmxlbmd0aCwKICAgICAgICAgIGl0ZW1Db3VudHMgPSBpbnN0YW5j
        ZU1ldGEuaXRlbUNvdW50czsKCiAgICAgIGlmICghaXRlbUNvdW50c1tpdGVt
        R3VpZF0pIHsgaXRlbUNvdW50c1tpdGVtR3VpZF0gPSB7fTsgfQogICAgICBp
        ZiAoaXRlbUNvdW50c1tpdGVtR3VpZF1bZGVwZW5kZW50R3VpZF0gPT09IHVu
        ZGVmaW5lZCkgeyBpdGVtQ291bnRzW2l0ZW1HdWlkXVtkZXBlbmRlbnRHdWlk
        XSA9IDA7IH0KCiAgICAgIGlmICgrK2l0ZW1Db3VudHNbaXRlbUd1aWRdW2Rl
        cGVuZGVudEd1aWRdID09PSAxICYmCiAgICAgICAgICBudW1iZXJPZkRlcGVu
        ZGVudEFycmF5cyA9PT0gRW1iZXIua2V5cyhpdGVtQ291bnRzW2l0ZW1HdWlk
        XSkubGVuZ3RoKSB7CgogICAgICAgIGFycmF5LmFkZE9iamVjdChpdGVtKTsK
        ICAgICAgfQogICAgICByZXR1cm4gYXJyYXk7CiAgICB9LAogICAgcmVtb3Zl
        ZEl0ZW06IGZ1bmN0aW9uKGFycmF5LCBpdGVtLCBjaGFuZ2VNZXRhLCBpbnN0
        YW5jZU1ldGEpIHsKICAgICAgdmFyIGl0ZW1HdWlkID0gZ3VpZEZvcihpdGVt
        KSwKICAgICAgICAgIGRlcGVuZGVudEd1aWRzID0gZ2V0RGVwZW5kZW50S2V5
        R3VpZHMoY2hhbmdlTWV0YSksCiAgICAgICAgICBkZXBlbmRlbnRHdWlkID0g
        Z3VpZEZvcihjaGFuZ2VNZXRhLmFycmF5Q2hhbmdlZCksCiAgICAgICAgICBu
        dW1iZXJPZkRlcGVuZGVudEFycmF5cyA9IGNoYW5nZU1ldGEucHJvcGVydHku
        X2RlcGVuZGVudEtleXMubGVuZ3RoLAogICAgICAgICAgbnVtYmVyT2ZBcnJh
        eXNJdGVtQXBwZWFyc0luLAogICAgICAgICAgaXRlbUNvdW50cyA9IGluc3Rh
        bmNlTWV0YS5pdGVtQ291bnRzOwoKICAgICAgaWYgKGl0ZW1Db3VudHNbaXRl
        bUd1aWRdW2RlcGVuZGVudEd1aWRdID09PSB1bmRlZmluZWQpIHsgaXRlbUNv
        dW50c1tpdGVtR3VpZF1bZGVwZW5kZW50R3VpZF0gPSAwOyB9CiAgICAgIGlm
        ICgtLWl0ZW1Db3VudHNbaXRlbUd1aWRdW2RlcGVuZGVudEd1aWRdID09PSAw
        KSB7CiAgICAgICAgZGVsZXRlIGl0ZW1Db3VudHNbaXRlbUd1aWRdW2RlcGVu
        ZGVudEd1aWRdOwogICAgICAgIG51bWJlck9mQXJyYXlzSXRlbUFwcGVhcnNJ
        biA9IEVtYmVyLmtleXMoaXRlbUNvdW50c1tpdGVtR3VpZF0pLmxlbmd0aDsK
        CiAgICAgICAgaWYgKG51bWJlck9mQXJyYXlzSXRlbUFwcGVhcnNJbiA9PT0g
        MCkgewogICAgICAgICAgZGVsZXRlIGl0ZW1Db3VudHNbaXRlbUd1aWRdOwog
        ICAgICAgIH0KICAgICAgICBhcnJheS5yZW1vdmVPYmplY3QoaXRlbSk7CiAg
        ICAgIH0KICAgICAgcmV0dXJuIGFycmF5OwogICAgfQogIH0pOwogIHJldHVy
        biBFbWJlci5hcnJheUNvbXB1dGVkLmFwcGx5KG51bGwsIGFyZ3MpOwp9OwoK
        LyoqCiAgQSBjb21wdXRlZCBwcm9wZXJ0eSB3aGljaCByZXR1cm5zIGEgbmV3
        IGFycmF5IHdpdGggYWxsIHRoZQogIHByb3BlcnRpZXMgZnJvbSB0aGUgZmly
        c3QgZGVwZW5kZW50IGFycmF5IHRoYXQgYXJlIG5vdCBpbiB0aGUgc2Vjb25k
        CiAgZGVwZW5kZW50IGFycmF5LgoKICBFeGFtcGxlCgogIGBgYGphdmFzY3Jp
        cHQKICBBcHAuSGFtcHN0ZXIgPSBFbWJlci5PYmplY3QuZXh0ZW5kKHsKICAg
        IGxpa2VzOiBbJ2JhbmFuYScsICdncmFwZScsICdrYWxlJ10sCiAgICB3YW50
        czogRW1iZXIuY29tcHV0ZWQuc2V0RGlmZignbGlrZXMnLCAnZnJ1aXRzJykK
        ICB9KTsKCiAgdmFyIGhhbXBzdGVyID0gQXBwLkhhbXBzdGVyLmNyZWF0ZSh7
        ZnJ1aXRzOiBbCiAgICAnZ3JhcGUnLAogICAgJ2thbGUnLAogIF19KTsKICBo
        YW1wc3Rlci5nZXQoJ3dhbnRzJyk7IC8vIFsnYmFuYW5hJ10KICBgYGAKCiAg
        QG1ldGhvZCBjb21wdXRlZC5zZXREaWZmCiAgQGZvciBFbWJlcgogIEBwYXJh
        bSB7U3RyaW5nfSBzZXRBUHJvcGVydHkKICBAcGFyYW0ge1N0cmluZ30gc2V0
        QlByb3BlcnR5CiAgQHJldHVybiB7RW1iZXIuQ29tcHV0ZWRQcm9wZXJ0eX0g
        Y29tcHV0ZXMgYSBuZXcgYXJyYXkgd2l0aCBhbGwgdGhlCiAgaXRlbXMgZnJv
        bSB0aGUgZmlyc3QgZGVwZW5kZW50IGFycmF5IHRoYXQgYXJlIG5vdCBpbiB0
        aGUgc2Vjb25kCiAgZGVwZW5kZW50IGFycmF5CiovCkVtYmVyLmNvbXB1dGVk
        LnNldERpZmYgPSBmdW5jdGlvbiAoc2V0QVByb3BlcnR5LCBzZXRCUHJvcGVy
        dHkpIHsKICBpZiAoYXJndW1lbnRzLmxlbmd0aCAhPT0gMikgewogICAgdGhy
        b3cgbmV3IEVtYmVyLkVycm9yKCJzZXREaWZmIHJlcXVpcmVzIGV4YWN0bHkg
        dHdvIGRlcGVuZGVudCBhcnJheXMuIik7CiAgfQogIHJldHVybiBFbWJlci5h
        cnJheUNvbXB1dGVkLmNhbGwobnVsbCwgc2V0QVByb3BlcnR5LCBzZXRCUHJv
        cGVydHksIHsKICAgIGFkZGVkSXRlbTogZnVuY3Rpb24gKGFycmF5LCBpdGVt
        LCBjaGFuZ2VNZXRhLCBpbnN0YW5jZU1ldGEpIHsKICAgICAgdmFyIHNldEEg
        PSBnZXQodGhpcywgc2V0QVByb3BlcnR5KSwKICAgICAgICAgIHNldEIgPSBn
        ZXQodGhpcywgc2V0QlByb3BlcnR5KTsKCiAgICAgIGlmIChjaGFuZ2VNZXRh
        LmFycmF5Q2hhbmdlZCA9PT0gc2V0QSkgewogICAgICAgIGlmICghc2V0Qi5j
        b250YWlucyhpdGVtKSkgewogICAgICAgICAgYXJyYXkuYWRkT2JqZWN0KGl0
        ZW0pOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICBhcnJheS5y
        ZW1vdmVPYmplY3QoaXRlbSk7CiAgICAgIH0KICAgICAgcmV0dXJuIGFycmF5
        OwogICAgfSwKCiAgICByZW1vdmVkSXRlbTogZnVuY3Rpb24gKGFycmF5LCBp
        dGVtLCBjaGFuZ2VNZXRhLCBpbnN0YW5jZU1ldGEpIHsKICAgICAgdmFyIHNl
        dEEgPSBnZXQodGhpcywgc2V0QVByb3BlcnR5KSwKICAgICAgICAgIHNldEIg
        PSBnZXQodGhpcywgc2V0QlByb3BlcnR5KTsKCiAgICAgIGlmIChjaGFuZ2VN
        ZXRhLmFycmF5Q2hhbmdlZCA9PT0gc2V0QikgewogICAgICAgIGlmIChzZXRB
        LmNvbnRhaW5zKGl0ZW0pKSB7CiAgICAgICAgICBhcnJheS5hZGRPYmplY3Qo
        aXRlbSk7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIGFycmF5
        LnJlbW92ZU9iamVjdChpdGVtKTsKICAgICAgfQogICAgICByZXR1cm4gYXJy
        YXk7CiAgICB9CiAgfSk7Cn07CgpmdW5jdGlvbiBiaW5hcnlTZWFyY2goYXJy
        YXksIGl0ZW0sIGxvdywgaGlnaCkgewogIHZhciBtaWQsIG1pZEl0ZW0sIHJl
        cywgZ3VpZE1pZCwgZ3VpZEl0ZW07CgogIGlmIChhcmd1bWVudHMubGVuZ3Ro
        IDwgNCkgeyBoaWdoID0gZ2V0KGFycmF5LCAnbGVuZ3RoJyk7IH0KICBpZiAo
        YXJndW1lbnRzLmxlbmd0aCA8IDMpIHsgbG93ID0gMDsgfQoKICBpZiAobG93
        ID09PSBoaWdoKSB7CiAgICByZXR1cm4gbG93OwogIH0KCiAgbWlkID0gbG93
        ICsgTWF0aC5mbG9vcigoaGlnaCAtIGxvdykgLyAyKTsKICBtaWRJdGVtID0g
        YXJyYXkub2JqZWN0QXQobWlkKTsKCiAgZ3VpZE1pZCA9IF9ndWlkRm9yKG1p
        ZEl0ZW0pOwogIGd1aWRJdGVtID0gX2d1aWRGb3IoaXRlbSk7CgogIGlmIChn
        dWlkTWlkID09PSBndWlkSXRlbSkgewogICAgcmV0dXJuIG1pZDsKICB9Cgog
        IHJlcyA9IHRoaXMub3JkZXIobWlkSXRlbSwgaXRlbSk7CiAgaWYgKHJlcyA9
        PT0gMCkgewogICAgcmVzID0gZ3VpZE1pZCA8IGd1aWRJdGVtID8gLTEgOiAx
        OwogIH0KCgogIGlmIChyZXMgPCAwKSB7CiAgICByZXR1cm4gdGhpcy5iaW5h
        cnlTZWFyY2goYXJyYXksIGl0ZW0sIG1pZCsxLCBoaWdoKTsKICB9IGVsc2Ug
        aWYgKHJlcyA+IDApIHsKICAgIHJldHVybiB0aGlzLmJpbmFyeVNlYXJjaChh
        cnJheSwgaXRlbSwgbG93LCBtaWQpOwogIH0KCiAgcmV0dXJuIG1pZDsKCiAg
        ZnVuY3Rpb24gX2d1aWRGb3IoaXRlbSkgewogICAgaWYgKEVtYmVyLk9iamVj
        dFByb3h5LmRldGVjdEluc3RhbmNlKGl0ZW0pKSB7CiAgICAgIHJldHVybiBn
        dWlkRm9yKGdldChpdGVtLCAnY29udGVudCcpKTsKICAgIH0KICAgIHJldHVy
        biBndWlkRm9yKGl0ZW0pOwogIH0KfQoKLyoqCiAgQSBjb21wdXRlZCBwcm9w
        ZXJ0eSB3aGljaCByZXR1cm5zIGEgbmV3IGFycmF5IHdpdGggYWxsIHRoZQog
        IHByb3BlcnRpZXMgZnJvbSB0aGUgZmlyc3QgZGVwZW5kZW50IGFycmF5IHNv
        cnRlZCBiYXNlZCBvbiBhIHByb3BlcnR5CiAgb3Igc29ydCBmdW5jdGlvbi4K
        CiAgVGhlIGNhbGxiYWNrIG1ldGhvZCB5b3UgcHJvdmlkZSBzaG91bGQgaGF2
        ZSB0aGUgZm9sbG93aW5nIHNpZ25hdHVyZToKCiAgYGBgamF2YXNjcmlwdAog
        IGZ1bmN0aW9uKGl0ZW1BLCBpdGVtQik7CiAgYGBgCgogIC0gYGl0ZW1BYCB0
        aGUgZmlyc3QgaXRlbSB0byBjb21wYXJlLgogIC0gYGl0ZW1CYCB0aGUgc2Vj
        b25kIGl0ZW0gdG8gY29tcGFyZS4KCiAgVGhpcyBmdW5jdGlvbiBzaG91bGQg
        cmV0dXJuIGAtMWAgd2hlbiBgaXRlbUFgIHNob3VsZCBjb21lIGJlZm9yZQog
        IGBpdGVtQmAuIEl0IHNob3VsZCByZXR1cm4gYDFgIHdoZW4gYGl0ZW1BYCBz
        aG91bGQgY29tZSBhZnRlcgogIGBpdGVtQmAuIElmIHRoZSBgaXRlbUFgIGFu
        ZCBgaXRlbUJgIGFyZSBlcXVhbCB0aGlzIGZ1bmN0aW9uIHNob3VsZCByZXR1
        cm4gYDBgLgoKICBFeGFtcGxlCgogIGBgYGphdmFzY3JpcHQKICB2YXIgVG9E
        b0xpc3QgPSBFbWJlci5PYmplY3QuZXh0ZW5kKHsKICAgIHRvZG9zU29ydGlu
        ZzogWyduYW1lJ10sCiAgICBzb3J0ZWRUb2RvczogRW1iZXIuY29tcHV0ZWQu
        c29ydCgndG9kb3MnLCAndG9kb3NTb3J0aW5nJyksCiAgICBwcmlvcml0eVRv
        ZG9zOiBFbWJlci5jb21wdXRlZC5zb3J0KCd0b2RvcycsIGZ1bmN0aW9uKGEs
        IGIpewogICAgICBpZiAoYS5wcmlvcml0eSA+IGIucHJpb3JpdHkpIHsKICAg
        ICAgICByZXR1cm4gMTsKICAgICAgfSBlbHNlIGlmIChhLnByaW9yaXR5IDwg
        Yi5wcmlvcml0eSkgewogICAgICAgIHJldHVybiAtMTsKICAgICAgfQogICAg
        ICByZXR1cm4gMDsKICAgIH0pLAogIH0pOwogIHZhciB0b2RvTGlzdCA9IFRv
        RG9MaXN0LmNyZWF0ZSh7dG9kb3M6IFsKICAgIHtuYW1lOiAnVW5pdCBUZXN0
        JywgcHJpb3JpdHk6IDJ9LAogICAge25hbWU6ICdEb2N1bWVudGF0aW9uJywg
        cHJpb3JpdHk6IDN9LAogICAge25hbWU6ICdSZWxlYXNlJywgcHJpb3JpdHk6
        IDF9CiAgXX0pOwoKICB0b2RvTGlzdC5nZXQoJ3NvcnRlZFRvZG9zJyk7IC8v
        IFt7bmFtZTonRG9jdW1lbnRhdGlvbicsIHByaW9yaXR5OjN9LCB7bmFtZTon
        UmVsZWFzZScsIHByaW9yaXR5OjF9LCB7bmFtZTonVW5pdCBUZXN0JywgcHJp
        b3JpdHk6Mn1dCiAgdG9kb0xpc3QuZ2V0KCdwcmlvcml0eVRvZG9zJyk7IC8v
        IFt7bmFtZTonUmVsZWFzZScsIHByaW9yaXR5OjF9LCB7bmFtZTonVW5pdCBU
        ZXN0JywgcHJpb3JpdHk6Mn0sIHtuYW1lOidEb2N1bWVudGF0aW9uJywgcHJp
        b3JpdHk6M31dCiAgYGBgCgogIEBtZXRob2QgY29tcHV0ZWQuc29ydAogIEBm
        b3IgRW1iZXIKICBAcGFyYW0ge1N0cmluZ30gZGVwZW5kZW50S2V5CiAgQHBh
        cmFtIHtTdHJpbmcgb3IgRnVuY3Rpb259IHNvcnREZWZpbml0aW9uIGEgZGVw
        ZW5kZW50IGtleSB0byBhbgogIGFycmF5IG9mIHNvcnQgcHJvcGVydGllcyBv
        ciBhIGZ1bmN0aW9uIHRvIHVzZSB3aGVuIHNvcnRpbmcKICBAcmV0dXJuIHtF
        bWJlci5Db21wdXRlZFByb3BlcnR5fSBjb21wdXRlcyBhIG5ldyBzb3J0ZWQg
        YXJyYXkgYmFzZWQKICBvbiB0aGUgc29ydCBwcm9wZXJ0eSBhcnJheSBvciBj
        YWxsYmFjayBmdW5jdGlvbgoqLwpFbWJlci5jb21wdXRlZC5zb3J0ID0gZnVu
        Y3Rpb24gKGl0ZW1zS2V5LCBzb3J0RGVmaW5pdGlvbikgewogIEVtYmVyLmFz
        c2VydCgiRW1iZXIuY29tcHV0ZWQuc29ydCByZXF1aXJlcyB0d28gYXJndW1l
        bnRzOiBhbiBhcnJheSBrZXkgdG8gc29ydCBhbmQgZWl0aGVyIGEgc29ydCBw
        cm9wZXJ0aWVzIGtleSBvciBzb3J0IGZ1bmN0aW9uIiwgYXJndW1lbnRzLmxl
        bmd0aCA9PT0gMik7CgogIHZhciBpbml0Rm4sIHNvcnRQcm9wZXJ0aWVzS2V5
        OwoKICBpZiAodHlwZW9mIHNvcnREZWZpbml0aW9uID09PSAnZnVuY3Rpb24n
        KSB7CiAgICBpbml0Rm4gPSBmdW5jdGlvbiAoYXJyYXksIGNoYW5nZU1ldGEs
        IGluc3RhbmNlTWV0YSkgewogICAgICBpbnN0YW5jZU1ldGEub3JkZXIgPSBz
        b3J0RGVmaW5pdGlvbjsKICAgICAgaW5zdGFuY2VNZXRhLmJpbmFyeVNlYXJj
        aCA9IGJpbmFyeVNlYXJjaDsKICAgIH07CiAgfSBlbHNlIHsKICAgIHNvcnRQ
        cm9wZXJ0aWVzS2V5ID0gc29ydERlZmluaXRpb247CiAgICBpbml0Rm4gPSBm
        dW5jdGlvbiAoYXJyYXksIGNoYW5nZU1ldGEsIGluc3RhbmNlTWV0YSkgewog
        ICAgICBmdW5jdGlvbiBzZXR1cFNvcnRQcm9wZXJ0aWVzKCkgewogICAgICAg
        IHZhciBzb3J0UHJvcGVydHlEZWZpbml0aW9ucyA9IGdldCh0aGlzLCBzb3J0
        UHJvcGVydGllc0tleSksCiAgICAgICAgICAgIHNvcnRQcm9wZXJ0eSwKICAg
        ICAgICAgICAgc29ydFByb3BlcnRpZXMgPSBpbnN0YW5jZU1ldGEuc29ydFBy
        b3BlcnRpZXMgPSBbXSwKICAgICAgICAgICAgc29ydFByb3BlcnR5QXNjZW5k
        aW5nID0gaW5zdGFuY2VNZXRhLnNvcnRQcm9wZXJ0eUFzY2VuZGluZyA9IHt9
        LAogICAgICAgICAgICBpZHgsCiAgICAgICAgICAgIGFzYzsKCiAgICAgICAg
        RW1iZXIuYXNzZXJ0KCJDYW5ub3Qgc29ydDogJyIgKyBzb3J0UHJvcGVydGll
        c0tleSArICInIGlzIG5vdCBhbiBhcnJheS4iLCBFbWJlci5pc0FycmF5KHNv
        cnRQcm9wZXJ0eURlZmluaXRpb25zKSk7CgogICAgICAgIGNoYW5nZU1ldGEu
        cHJvcGVydHkuY2xlYXJJdGVtUHJvcGVydHlLZXlzKGl0ZW1zS2V5KTsKCiAg
        ICAgICAgZm9yRWFjaChzb3J0UHJvcGVydHlEZWZpbml0aW9ucywgZnVuY3Rp
        b24gKHNvcnRQcm9wZXJ0eURlZmluaXRpb24pIHsKICAgICAgICAgIGlmICgo
        aWR4ID0gc29ydFByb3BlcnR5RGVmaW5pdGlvbi5pbmRleE9mKCc6JykpICE9
        PSAtMSkgewogICAgICAgICAgICBzb3J0UHJvcGVydHkgPSBzb3J0UHJvcGVy
        dHlEZWZpbml0aW9uLnN1YnN0cmluZygwLCBpZHgpOwogICAgICAgICAgICBh
        c2MgPSBzb3J0UHJvcGVydHlEZWZpbml0aW9uLnN1YnN0cmluZyhpZHgrMSku
        dG9Mb3dlckNhc2UoKSAhPT0gJ2Rlc2MnOwogICAgICAgICAgfSBlbHNlIHsK
        ICAgICAgICAgICAgc29ydFByb3BlcnR5ID0gc29ydFByb3BlcnR5RGVmaW5p
        dGlvbjsKICAgICAgICAgICAgYXNjID0gdHJ1ZTsKICAgICAgICAgIH0KCiAg
        ICAgICAgICBzb3J0UHJvcGVydGllcy5wdXNoKHNvcnRQcm9wZXJ0eSk7CiAg
        ICAgICAgICBzb3J0UHJvcGVydHlBc2NlbmRpbmdbc29ydFByb3BlcnR5XSA9
        IGFzYzsKICAgICAgICAgIGNoYW5nZU1ldGEucHJvcGVydHkuaXRlbVByb3Bl
        cnR5S2V5KGl0ZW1zS2V5LCBzb3J0UHJvcGVydHkpOwogICAgICAgIH0pOwoK
        ICAgICAgICBzb3J0UHJvcGVydHlEZWZpbml0aW9ucy5hZGRPYnNlcnZlcign
        QGVhY2gnLCB0aGlzLCB1cGRhdGVTb3J0UHJvcGVydGllc09uY2UpOwogICAg
        ICB9CgogICAgICBmdW5jdGlvbiB1cGRhdGVTb3J0UHJvcGVydGllc09uY2Uo
        KSB7CiAgICAgICAgRW1iZXIucnVuLm9uY2UodGhpcywgdXBkYXRlU29ydFBy
        b3BlcnRpZXMsIGNoYW5nZU1ldGEucHJvcGVydHlOYW1lKTsKICAgICAgfQoK
        ICAgICAgZnVuY3Rpb24gdXBkYXRlU29ydFByb3BlcnRpZXMocHJvcGVydHlO
        YW1lKSB7CiAgICAgICAgc2V0dXBTb3J0UHJvcGVydGllcy5jYWxsKHRoaXMp
        OwogICAgICAgIGNoYW5nZU1ldGEucHJvcGVydHkucmVjb21wdXRlT25jZS5j
        YWxsKHRoaXMsIHByb3BlcnR5TmFtZSk7CiAgICAgIH0KCiAgICAgIEVtYmVy
        LmFkZE9ic2VydmVyKHRoaXMsIHNvcnRQcm9wZXJ0aWVzS2V5LCB1cGRhdGVT
        b3J0UHJvcGVydGllc09uY2UpOwoKICAgICAgc2V0dXBTb3J0UHJvcGVydGll
        cy5jYWxsKHRoaXMpOwoKCiAgICAgIGluc3RhbmNlTWV0YS5vcmRlciA9IGZ1
        bmN0aW9uIChpdGVtQSwgaXRlbUIpIHsKICAgICAgICB2YXIgc29ydFByb3Bl
        cnR5LCByZXN1bHQsIGFzYzsKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8
        IHRoaXMuc29ydFByb3BlcnRpZXMubGVuZ3RoOyArK2kpIHsKICAgICAgICAg
        IHNvcnRQcm9wZXJ0eSA9IHRoaXMuc29ydFByb3BlcnRpZXNbaV07CiAgICAg
        ICAgICByZXN1bHQgPSBFbWJlci5jb21wYXJlKGdldChpdGVtQSwgc29ydFBy
        b3BlcnR5KSwgZ2V0KGl0ZW1CLCBzb3J0UHJvcGVydHkpKTsKCiAgICAgICAg
        ICBpZiAocmVzdWx0ICE9PSAwKSB7CiAgICAgICAgICAgIGFzYyA9IHRoaXMu
        c29ydFByb3BlcnR5QXNjZW5kaW5nW3NvcnRQcm9wZXJ0eV07CiAgICAgICAg
        ICAgIHJldHVybiBhc2MgPyByZXN1bHQgOiAoLTEgKiByZXN1bHQpOwogICAg
        ICAgICAgfQogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIDA7CiAgICAgIH07
        CgogICAgICBpbnN0YW5jZU1ldGEuYmluYXJ5U2VhcmNoID0gYmluYXJ5U2Vh
        cmNoOwogICAgfTsKICB9CgogIHJldHVybiBFbWJlci5hcnJheUNvbXB1dGVk
        LmNhbGwobnVsbCwgaXRlbXNLZXksIHsKICAgIGluaXRpYWxpemU6IGluaXRG
        biwKCiAgICBhZGRlZEl0ZW06IGZ1bmN0aW9uIChhcnJheSwgaXRlbSwgY2hh
        bmdlTWV0YSwgaW5zdGFuY2VNZXRhKSB7CiAgICAgIHZhciBpbmRleCA9IGlu
        c3RhbmNlTWV0YS5iaW5hcnlTZWFyY2goYXJyYXksIGl0ZW0pOwogICAgICBh
        cnJheS5pbnNlcnRBdChpbmRleCwgaXRlbSk7CiAgICAgIHJldHVybiBhcnJh
        eTsKICAgIH0sCgogICAgcmVtb3ZlZEl0ZW06IGZ1bmN0aW9uIChhcnJheSwg
        aXRlbSwgY2hhbmdlTWV0YSwgaW5zdGFuY2VNZXRhKSB7CiAgICAgIHZhciBw
        cm94eVByb3BlcnRpZXMsIGluZGV4LCBzZWFyY2hJdGVtOwoKICAgICAgaWYg
        KGNoYW5nZU1ldGEucHJldmlvdXNWYWx1ZXMpIHsKICAgICAgICBwcm94eVBy
        b3BlcnRpZXMgPSBtZXJnZSh7IGNvbnRlbnQ6IGl0ZW0gfSwgY2hhbmdlTWV0
        YS5wcmV2aW91c1ZhbHVlcyk7CgogICAgICAgIHNlYXJjaEl0ZW0gPSBFbWJl
        ci5PYmplY3RQcm94eS5jcmVhdGUocHJveHlQcm9wZXJ0aWVzKTsKICAgICB9
        IGVsc2UgewogICAgICAgc2VhcmNoSXRlbSA9IGl0ZW07CiAgICAgfQoKICAg
        ICAgaW5kZXggPSBpbnN0YW5jZU1ldGEuYmluYXJ5U2VhcmNoKGFycmF5LCBz
        ZWFyY2hJdGVtKTsKICAgICAgYXJyYXkucmVtb3ZlQXQoaW5kZXgpOwogICAg
        ICByZXR1cm4gYXJyYXk7CiAgICB9CiAgfSk7Cn07Cgp9KSgpOwoKCgooZnVu
        Y3Rpb24oKSB7Ci8qKgogIEV4cG9zZSBSU1ZQIGltcGxlbWVudGF0aW9uCiAg
        CiAgRG9jdW1lbnRhdGlvbiBjYW4gYmUgZm91bmQgaGVyZTogaHR0cHM6Ly9n
        aXRodWIuY29tL3RpbGRlaW8vcnN2cC5qcy9ibG9iL21hc3Rlci9SRUFETUUu
        bWQKCiAgQGNsYXNzIFJTVlAKICBAbmFtZXNwYWNlIEVtYmVyCiAgQGNvbnN0
        cnVjdG9yCiovCkVtYmVyLlJTVlAgPSByZXF1aXJlTW9kdWxlKCdyc3ZwJyk7
        Cgp9KSgpOwoKCgooZnVuY3Rpb24oKSB7Ci8qKgpAbW9kdWxlIGVtYmVyCkBz
        dWJtb2R1bGUgZW1iZXItcnVudGltZQoqLwoKdmFyIFNUUklOR19EQVNIRVJJ
        WkVfUkVHRVhQID0gKC9bIF9dL2cpOwp2YXIgU1RSSU5HX0RBU0hFUklaRV9D
        QUNIRSA9IHt9Owp2YXIgU1RSSU5HX0RFQ0FNRUxJWkVfUkVHRVhQID0gKC8o
        W2EtelxkXSkoW0EtWl0pL2cpOwp2YXIgU1RSSU5HX0NBTUVMSVpFX1JFR0VY
        UCA9ICgvKFwtfF98XC58XHMpKyguKT8vZyk7CnZhciBTVFJJTkdfVU5ERVJT
        Q09SRV9SRUdFWFBfMSA9ICgvKFthLXpcZF0pKFtBLVpdKykvZyk7CnZhciBT
        VFJJTkdfVU5ERVJTQ09SRV9SRUdFWFBfMiA9ICgvXC18XHMrL2cpOwoKLyoq
        CiAgRGVmaW5lcyB0aGUgaGFzaCBvZiBsb2NhbGl6ZWQgc3RyaW5ncyBmb3Ig
        dGhlIGN1cnJlbnQgbGFuZ3VhZ2UuIFVzZWQgYnkKICB0aGUgYEVtYmVyLlN0
        cmluZy5sb2MoKWAgaGVscGVyLiBUbyBsb2NhbGl6ZSwgYWRkIHN0cmluZyB2
        YWx1ZXMgdG8gdGhpcwogIGhhc2guCgogIEBwcm9wZXJ0eSBTVFJJTkdTCiAg
        QGZvciBFbWJlcgogIEB0eXBlIEhhc2gKKi8KRW1iZXIuU1RSSU5HUyA9IHt9
        OwoKLyoqCiAgRGVmaW5lcyBzdHJpbmcgaGVscGVyIG1ldGhvZHMgaW5jbHVk
        aW5nIHN0cmluZyBmb3JtYXR0aW5nIGFuZCBsb2NhbGl6YXRpb24uCiAgVW5s
        ZXNzIGBFbWJlci5FWFRFTkRfUFJPVE9UWVBFUy5TdHJpbmdgIGlzIGBmYWxz
        ZWAgdGhlc2UgbWV0aG9kcyB3aWxsIGFsc28gYmUKICBhZGRlZCB0byB0aGUg
        YFN0cmluZy5wcm90b3R5cGVgIGFzIHdlbGwuCgogIEBjbGFzcyBTdHJpbmcK
        ICBAbmFtZXNwYWNlIEVtYmVyCiAgQHN0YXRpYwoqLwpFbWJlci5TdHJpbmcg
        PSB7CgogIC8qKgogICAgQXBwbHkgZm9ybWF0dGluZyBvcHRpb25zIHRvIHRo
        ZSBzdHJpbmcuIFRoaXMgd2lsbCBsb29rIGZvciBvY2N1cnJlbmNlcwogICAg
        b2YgIiVAIiBpbiB5b3VyIHN0cmluZyBhbmQgc3Vic3RpdHV0ZSB0aGVtIHdp
        dGggdGhlIGFyZ3VtZW50cyB5b3UgcGFzcyBpbnRvCiAgICB0aGlzIG1ldGhv
        ZC4gSWYgeW91IHdhbnQgdG8gY29udHJvbCB0aGUgc3BlY2lmaWMgb3JkZXIg
        b2YgcmVwbGFjZW1lbnQsCiAgICB5b3UgY2FuIGFkZCBhIG51bWJlciBhZnRl
        ciB0aGUga2V5IGFzIHdlbGwgdG8gaW5kaWNhdGUgd2hpY2ggYXJndW1lbnQK
        ICAgIHlvdSB3YW50IHRvIGluc2VydC4KCiAgICBPcmRlcmVkIGluc2VydGlv
        bnMgYXJlIG1vc3QgdXNlZnVsIHdoZW4gYnVpbGRpbmcgbG9jIHN0cmluZ3Mg
        d2hlcmUgdmFsdWVzCiAgICB5b3UgbmVlZCB0byBpbnNlcnQgbWF5IGFwcGVh
        ciBpbiBkaWZmZXJlbnQgb3JkZXJzLgoKICAgIGBgYGphdmFzY3JpcHQKICAg
        ICJIZWxsbyAlQCAlQCIuZm10KCdKb2huJywgJ0RvZScpOyAgICAgLy8gIkhl
        bGxvIEpvaG4gRG9lIgogICAgIkhlbGxvICVAMiwgJUAxIi5mbXQoJ0pvaG4n
        LCAnRG9lJyk7ICAvLyAiSGVsbG8gRG9lLCBKb2huIgogICAgYGBgCgogICAg
        QG1ldGhvZCBmbXQKICAgIEBwYXJhbSB7U3RyaW5nfSBzdHIgVGhlIHN0cmlu
        ZyB0byBmb3JtYXQKICAgIEBwYXJhbSB7QXJyYXl9IGZvcm1hdHMgQW4gYXJy
        YXkgb2YgcGFyYW1ldGVycyB0byBpbnRlcnBvbGF0ZSBpbnRvIHN0cmluZy4K
        ICAgIEByZXR1cm4ge1N0cmluZ30gZm9ybWF0dGVkIHN0cmluZwogICovCiAg
        Zm10OiBmdW5jdGlvbihzdHIsIGZvcm1hdHMpIHsKICAgIC8vIGZpcnN0LCBy
        ZXBsYWNlIGFueSBPUkRFUkVEIHJlcGxhY2VtZW50cy4KICAgIHZhciBpZHgg
        ID0gMDsgLy8gdGhlIGN1cnJlbnQgaW5kZXggZm9yIG5vbi1udW1lcmljYWwg
        cmVwbGFjZW1lbnRzCiAgICByZXR1cm4gc3RyLnJlcGxhY2UoLyVAKFswLTld
        Kyk/L2csIGZ1bmN0aW9uKHMsIGFyZ0luZGV4KSB7CiAgICAgIGFyZ0luZGV4
        ID0gKGFyZ0luZGV4KSA/IHBhcnNlSW50KGFyZ0luZGV4LCAxMCkgLSAxIDog
        aWR4Kys7CiAgICAgIHMgPSBmb3JtYXRzW2FyZ0luZGV4XTsKICAgICAgcmV0
        dXJuIChzID09PSBudWxsKSA/ICcobnVsbCknIDogKHMgPT09IHVuZGVmaW5l
        ZCkgPyAnJyA6IEVtYmVyLmluc3BlY3Qocyk7CiAgICB9KSA7CiAgfSwKCiAg
        LyoqCiAgICBGb3JtYXRzIHRoZSBwYXNzZWQgc3RyaW5nLCBidXQgZmlyc3Qg
        bG9va3MgdXAgdGhlIHN0cmluZyBpbiB0aGUgbG9jYWxpemVkCiAgICBzdHJp
        bmdzIGhhc2guIFRoaXMgaXMgYSBjb252ZW5pZW50IHdheSB0byBsb2NhbGl6
        ZSB0ZXh0LiBTZWUKICAgIGBFbWJlci5TdHJpbmcuZm10KClgIGZvciBtb3Jl
        IGluZm9ybWF0aW9uIG9uIGZvcm1hdHRpbmcuCgogICAgTm90ZSB0aGF0IGl0
        IGlzIHRyYWRpdGlvbmFsIGJ1dCBub3QgcmVxdWlyZWQgdG8gcHJlZml4IGxv
        Y2FsaXplZCBzdHJpbmcKICAgIGtleXMgd2l0aCBhbiB1bmRlcnNjb3JlIG9y
        IG90aGVyIGNoYXJhY3RlciBzbyB5b3UgY2FuIGVhc2lseSBpZGVudGlmeQog
        ICAgbG9jYWxpemVkIHN0cmluZ3MuCgogICAgYGBgamF2YXNjcmlwdAogICAg
        RW1iZXIuU1RSSU5HUyA9IHsKICAgICAgJ19IZWxsbyBXb3JsZCc6ICdCb25q
        b3VyIGxlIG1vbmRlJywKICAgICAgJ19IZWxsbyAlQCAlQCc6ICdCb25qb3Vy
        ICVAICVAJwogICAgfTsKCiAgICBFbWJlci5TdHJpbmcubG9jKCJfSGVsbG8g
        V29ybGQiKTsgIC8vICdCb25qb3VyIGxlIG1vbmRlJzsKICAgIEVtYmVyLlN0
        cmluZy5sb2MoIl9IZWxsbyAlQCAlQCIsIFsiSm9obiIsICJTbWl0aCJdKTsg
        IC8vICJCb25qb3VyIEpvaG4gU21pdGgiOwogICAgYGBgCgogICAgQG1ldGhv
        ZCBsb2MKICAgIEBwYXJhbSB7U3RyaW5nfSBzdHIgVGhlIHN0cmluZyB0byBm
        b3JtYXQKICAgIEBwYXJhbSB7QXJyYXl9IGZvcm1hdHMgT3B0aW9uYWwgYXJy
        YXkgb2YgcGFyYW1ldGVycyB0byBpbnRlcnBvbGF0ZSBpbnRvIHN0cmluZy4K
        ICAgIEByZXR1cm4ge1N0cmluZ30gZm9ybWF0dGVkIHN0cmluZwogICovCiAg
        bG9jOiBmdW5jdGlvbihzdHIsIGZvcm1hdHMpIHsKICAgIHN0ciA9IEVtYmVy
        LlNUUklOR1Nbc3RyXSB8fCBzdHI7CiAgICByZXR1cm4gRW1iZXIuU3RyaW5n
        LmZtdChzdHIsIGZvcm1hdHMpIDsKICB9LAoKICAvKioKICAgIFNwbGl0cyBh
        IHN0cmluZyBpbnRvIHNlcGFyYXRlIHVuaXRzIHNlcGFyYXRlZCBieSBzcGFj
        ZXMsIGVsaW1pbmF0aW5nIGFueQogICAgZW1wdHkgc3RyaW5ncyBpbiB0aGUg
        cHJvY2Vzcy4gVGhpcyBpcyBhIGNvbnZlbmllbmNlIG1ldGhvZCBmb3Igc3Bs
        aXQgdGhhdAogICAgaXMgbW9zdGx5IHVzZWZ1bCB3aGVuIGFwcGxpZWQgdG8g
        dGhlIGBTdHJpbmcucHJvdG90eXBlYC4KCiAgICBgYGBqYXZhc2NyaXB0CiAg
        ICBFbWJlci5TdHJpbmcudygiYWxwaGEgYmV0YSBnYW1tYSIpLmZvckVhY2go
        ZnVuY3Rpb24oa2V5KSB7CiAgICAgIGNvbnNvbGUubG9nKGtleSk7CiAgICB9
        KTsKCiAgICAvLyA+IGFscGhhCiAgICAvLyA+IGJldGEKICAgIC8vID4gZ2Ft
        bWEKICAgIGBgYAoKICAgIEBtZXRob2QgdwogICAgQHBhcmFtIHtTdHJpbmd9
        IHN0ciBUaGUgc3RyaW5nIHRvIHNwbGl0CiAgICBAcmV0dXJuIHtTdHJpbmd9
        IHNwbGl0IHN0cmluZwogICovCiAgdzogZnVuY3Rpb24oc3RyKSB7IHJldHVy
        biBzdHIuc3BsaXQoL1xzKy8pOyB9LAoKICAvKioKICAgIENvbnZlcnRzIGEg
        Y2FtZWxpemVkIHN0cmluZyBpbnRvIGFsbCBsb3dlciBjYXNlIHNlcGFyYXRl
        ZCBieSB1bmRlcnNjb3Jlcy4KCiAgICBgYGBqYXZhc2NyaXB0CiAgICAnaW5u
        ZXJIVE1MJy5kZWNhbWVsaXplKCk7ICAgICAgICAgICAvLyAnaW5uZXJfaHRt
        bCcKICAgICdhY3Rpb25fbmFtZScuZGVjYW1lbGl6ZSgpOyAgICAgICAgLy8g
        J2FjdGlvbl9uYW1lJwogICAgJ2Nzcy1jbGFzcy1uYW1lJy5kZWNhbWVsaXpl
        KCk7ICAgICAvLyAnY3NzLWNsYXNzLW5hbWUnCiAgICAnbXkgZmF2b3JpdGUg
        aXRlbXMnLmRlY2FtZWxpemUoKTsgIC8vICdteSBmYXZvcml0ZSBpdGVtcycK
        ICAgIGBgYAoKICAgIEBtZXRob2QgZGVjYW1lbGl6ZQogICAgQHBhcmFtIHtT
        dHJpbmd9IHN0ciBUaGUgc3RyaW5nIHRvIGRlY2FtZWxpemUuCiAgICBAcmV0
        dXJuIHtTdHJpbmd9IHRoZSBkZWNhbWVsaXplZCBzdHJpbmcuCiAgKi8KICBk
        ZWNhbWVsaXplOiBmdW5jdGlvbihzdHIpIHsKICAgIHJldHVybiBzdHIucmVw
        bGFjZShTVFJJTkdfREVDQU1FTElaRV9SRUdFWFAsICckMV8kMicpLnRvTG93
        ZXJDYXNlKCk7CiAgfSwKCiAgLyoqCiAgICBSZXBsYWNlcyB1bmRlcnNjb3Jl
        cywgc3BhY2VzLCBvciBjYW1lbENhc2Ugd2l0aCBkYXNoZXMuCgogICAgYGBg
        amF2YXNjcmlwdAogICAgJ2lubmVySFRNTCcuZGFzaGVyaXplKCk7ICAgICAg
        ICAgIC8vICdpbm5lci1odG1sJwogICAgJ2FjdGlvbl9uYW1lJy5kYXNoZXJp
        emUoKTsgICAgICAgIC8vICdhY3Rpb24tbmFtZScKICAgICdjc3MtY2xhc3Mt
        bmFtZScuZGFzaGVyaXplKCk7ICAgICAvLyAnY3NzLWNsYXNzLW5hbWUnCiAg
        ICAnbXkgZmF2b3JpdGUgaXRlbXMnLmRhc2hlcml6ZSgpOyAgLy8gJ215LWZh
        dm9yaXRlLWl0ZW1zJwogICAgYGBgCgogICAgQG1ldGhvZCBkYXNoZXJpemUK
        ICAgIEBwYXJhbSB7U3RyaW5nfSBzdHIgVGhlIHN0cmluZyB0byBkYXNoZXJp
        emUuCiAgICBAcmV0dXJuIHtTdHJpbmd9IHRoZSBkYXNoZXJpemVkIHN0cmlu
        Zy4KICAqLwogIGRhc2hlcml6ZTogZnVuY3Rpb24oc3RyKSB7CiAgICB2YXIg
        Y2FjaGUgPSBTVFJJTkdfREFTSEVSSVpFX0NBQ0hFLAogICAgICAgIGhpdCAg
        ID0gY2FjaGUuaGFzT3duUHJvcGVydHkoc3RyKSwKICAgICAgICByZXQ7Cgog
        ICAgaWYgKGhpdCkgewogICAgICByZXR1cm4gY2FjaGVbc3RyXTsKICAgIH0g
        ZWxzZSB7CiAgICAgIHJldCA9IEVtYmVyLlN0cmluZy5kZWNhbWVsaXplKHN0
        cikucmVwbGFjZShTVFJJTkdfREFTSEVSSVpFX1JFR0VYUCwnLScpOwogICAg
        ICBjYWNoZVtzdHJdID0gcmV0OwogICAgfQoKICAgIHJldHVybiByZXQ7CiAg
        fSwKCiAgLyoqCiAgICBSZXR1cm5zIHRoZSBsb3dlckNhbWVsQ2FzZSBmb3Jt
        IG9mIGEgc3RyaW5nLgoKICAgIGBgYGphdmFzY3JpcHQKICAgICdpbm5lckhU
        TUwnLmNhbWVsaXplKCk7ICAgICAgICAgIC8vICdpbm5lckhUTUwnCiAgICAn
        YWN0aW9uX25hbWUnLmNhbWVsaXplKCk7ICAgICAgICAvLyAnYWN0aW9uTmFt
        ZScKICAgICdjc3MtY2xhc3MtbmFtZScuY2FtZWxpemUoKTsgICAgIC8vICdj
        c3NDbGFzc05hbWUnCiAgICAnbXkgZmF2b3JpdGUgaXRlbXMnLmNhbWVsaXpl
        KCk7ICAvLyAnbXlGYXZvcml0ZUl0ZW1zJwogICAgJ015IEZhdm9yaXRlIEl0
        ZW1zJy5jYW1lbGl6ZSgpOyAgLy8gJ215RmF2b3JpdGVJdGVtcycKICAgIGBg
        YAoKICAgIEBtZXRob2QgY2FtZWxpemUKICAgIEBwYXJhbSB7U3RyaW5nfSBz
        dHIgVGhlIHN0cmluZyB0byBjYW1lbGl6ZS4KICAgIEByZXR1cm4ge1N0cmlu
        Z30gdGhlIGNhbWVsaXplZCBzdHJpbmcuCiAgKi8KICBjYW1lbGl6ZTogZnVu
        Y3Rpb24oc3RyKSB7CiAgICByZXR1cm4gc3RyLnJlcGxhY2UoU1RSSU5HX0NB
        TUVMSVpFX1JFR0VYUCwgZnVuY3Rpb24obWF0Y2gsIHNlcGFyYXRvciwgY2hy
        KSB7CiAgICAgIHJldHVybiBjaHIgPyBjaHIudG9VcHBlckNhc2UoKSA6ICcn
        OwogICAgfSkucmVwbGFjZSgvXihbQS1aXSkvLCBmdW5jdGlvbihtYXRjaCwg
        c2VwYXJhdG9yLCBjaHIpIHsKICAgICAgcmV0dXJuIG1hdGNoLnRvTG93ZXJD
        YXNlKCk7CiAgICB9KTsKICB9LAoKICAvKioKICAgIFJldHVybnMgdGhlIFVw
        cGVyQ2FtZWxDYXNlIGZvcm0gb2YgYSBzdHJpbmcuCgogICAgYGBgamF2YXNj
        cmlwdAogICAgJ2lubmVySFRNTCcuY2xhc3NpZnkoKTsgICAgICAgICAgLy8g
        J0lubmVySFRNTCcKICAgICdhY3Rpb25fbmFtZScuY2xhc3NpZnkoKTsgICAg
        ICAgIC8vICdBY3Rpb25OYW1lJwogICAgJ2Nzcy1jbGFzcy1uYW1lJy5jbGFz
        c2lmeSgpOyAgICAgLy8gJ0Nzc0NsYXNzTmFtZScKICAgICdteSBmYXZvcml0
        ZSBpdGVtcycuY2xhc3NpZnkoKTsgIC8vICdNeUZhdm9yaXRlSXRlbXMnCiAg
        ICBgYGAKCiAgICBAbWV0aG9kIGNsYXNzaWZ5CiAgICBAcGFyYW0ge1N0cmlu
        Z30gc3RyIHRoZSBzdHJpbmcgdG8gY2xhc3NpZnkKICAgIEByZXR1cm4ge1N0
        cmluZ30gdGhlIGNsYXNzaWZpZWQgc3RyaW5nCiAgKi8KICBjbGFzc2lmeTog
        ZnVuY3Rpb24oc3RyKSB7CiAgICB2YXIgcGFydHMgPSBzdHIuc3BsaXQoIi4i
        KSwKICAgICAgICBvdXQgPSBbXTsKCiAgICBmb3IgKHZhciBpPTAsIGw9cGFy
        dHMubGVuZ3RoOyBpPGw7IGkrKykgewogICAgICB2YXIgY2FtZWxpemVkID0g
        RW1iZXIuU3RyaW5nLmNhbWVsaXplKHBhcnRzW2ldKTsKICAgICAgb3V0LnB1
        c2goY2FtZWxpemVkLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgY2FtZWxp
        emVkLnN1YnN0cigxKSk7CiAgICB9CgogICAgcmV0dXJuIG91dC5qb2luKCIu
        Iik7CiAgfSwKCiAgLyoqCiAgICBNb3JlIGdlbmVyYWwgdGhhbiBkZWNhbWVs
        aXplLiBSZXR1cm5zIHRoZSBsb3dlclxfY2FzZVxfYW5kXF91bmRlcnNjb3Jl
        ZAogICAgZm9ybSBvZiBhIHN0cmluZy4KCiAgICBgYGBqYXZhc2NyaXB0CiAg
        ICAnaW5uZXJIVE1MJy51bmRlcnNjb3JlKCk7ICAgICAgICAgIC8vICdpbm5l
        cl9odG1sJwogICAgJ2FjdGlvbl9uYW1lJy51bmRlcnNjb3JlKCk7ICAgICAg
        ICAvLyAnYWN0aW9uX25hbWUnCiAgICAnY3NzLWNsYXNzLW5hbWUnLnVuZGVy
        c2NvcmUoKTsgICAgIC8vICdjc3NfY2xhc3NfbmFtZScKICAgICdteSBmYXZv
        cml0ZSBpdGVtcycudW5kZXJzY29yZSgpOyAgLy8gJ215X2Zhdm9yaXRlX2l0
        ZW1zJwogICAgYGBgCgogICAgQG1ldGhvZCB1bmRlcnNjb3JlCiAgICBAcGFy
        YW0ge1N0cmluZ30gc3RyIFRoZSBzdHJpbmcgdG8gdW5kZXJzY29yZS4KICAg
        IEByZXR1cm4ge1N0cmluZ30gdGhlIHVuZGVyc2NvcmVkIHN0cmluZy4KICAq
        LwogIHVuZGVyc2NvcmU6IGZ1bmN0aW9uKHN0cikgewogICAgcmV0dXJuIHN0
        ci5yZXBsYWNlKFNUUklOR19VTkRFUlNDT1JFX1JFR0VYUF8xLCAnJDFfJDIn
        KS4KICAgICAgcmVwbGFjZShTVFJJTkdfVU5ERVJTQ09SRV9SRUdFWFBfMiwg
        J18nKS50b0xvd2VyQ2FzZSgpOwogIH0sCgogIC8qKgogICAgUmV0dXJucyB0
        aGUgQ2FwaXRhbGl6ZWQgZm9ybSBvZiBhIHN0cmluZwoKICAgIGBgYGphdmFz
        Y3JpcHQKICAgICdpbm5lckhUTUwnLmNhcGl0YWxpemUoKSAgICAgICAgIC8v
        ICdJbm5lckhUTUwnCiAgICAnYWN0aW9uX25hbWUnLmNhcGl0YWxpemUoKSAg
        ICAgICAvLyAnQWN0aW9uX25hbWUnCiAgICAnY3NzLWNsYXNzLW5hbWUnLmNh
        cGl0YWxpemUoKSAgICAvLyAnQ3NzLWNsYXNzLW5hbWUnCiAgICAnbXkgZmF2
        b3JpdGUgaXRlbXMnLmNhcGl0YWxpemUoKSAvLyAnTXkgZmF2b3JpdGUgaXRl
        bXMnCiAgICBgYGAKCiAgICBAbWV0aG9kIGNhcGl0YWxpemUKICAgIEBwYXJh
        bSB7U3RyaW5nfSBzdHIgVGhlIHN0cmluZyB0byBjYXBpdGFsaXplLgogICAg
        QHJldHVybiB7U3RyaW5nfSBUaGUgY2FwaXRhbGl6ZWQgc3RyaW5nLgogICov
        CiAgY2FwaXRhbGl6ZTogZnVuY3Rpb24oc3RyKSB7CiAgICByZXR1cm4gc3Ry
        LmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgc3RyLnN1YnN0cigxKTsKICB9
        Cn07CgoKCn0pKCk7CgoKCihmdW5jdGlvbigpIHsKLyoqCkBtb2R1bGUgZW1i
        ZXIKQHN1Ym1vZHVsZSBlbWJlci1ydW50aW1lCiovCgoKCnZhciBmbXQgPSBF
        bWJlci5TdHJpbmcuZm10LAogICAgdyAgID0gRW1iZXIuU3RyaW5nLncsCiAg
        ICBsb2MgPSBFbWJlci5TdHJpbmcubG9jLAogICAgY2FtZWxpemUgPSBFbWJl
        ci5TdHJpbmcuY2FtZWxpemUsCiAgICBkZWNhbWVsaXplID0gRW1iZXIuU3Ry
        aW5nLmRlY2FtZWxpemUsCiAgICBkYXNoZXJpemUgPSBFbWJlci5TdHJpbmcu
        ZGFzaGVyaXplLAogICAgdW5kZXJzY29yZSA9IEVtYmVyLlN0cmluZy51bmRl
        cnNjb3JlLAogICAgY2FwaXRhbGl6ZSA9IEVtYmVyLlN0cmluZy5jYXBpdGFs
        aXplLAogICAgY2xhc3NpZnkgPSBFbWJlci5TdHJpbmcuY2xhc3NpZnk7CgoK
        aWYgKEVtYmVyLkVYVEVORF9QUk9UT1RZUEVTID09PSB0cnVlIHx8IEVtYmVy
        LkVYVEVORF9QUk9UT1RZUEVTLlN0cmluZykgewoKICAvKioKICAgIFNlZSBb
        RW1iZXIuU3RyaW5nLmZtdF0oL2FwaS9jbGFzc2VzL0VtYmVyLlN0cmluZy5o
        dG1sI21ldGhvZF9mbXQpLgoKICAgIEBtZXRob2QgZm10CiAgICBAZm9yIFN0
        cmluZwogICovCiAgU3RyaW5nLnByb3RvdHlwZS5mbXQgPSBmdW5jdGlvbigp
        IHsKICAgIHJldHVybiBmbXQodGhpcywgYXJndW1lbnRzKTsKICB9OwoKICAv
        KioKICAgIFNlZSBbRW1iZXIuU3RyaW5nLnddKC9hcGkvY2xhc3Nlcy9FbWJl
        ci5TdHJpbmcuaHRtbCNtZXRob2RfdykuCgogICAgQG1ldGhvZCB3CiAgICBA
        Zm9yIFN0cmluZwogICovCiAgU3RyaW5nLnByb3RvdHlwZS53ID0gZnVuY3Rp
        b24oKSB7CiAgICByZXR1cm4gdyh0aGlzKTsKICB9OwoKICAvKioKICAgIFNl
        ZSBbRW1iZXIuU3RyaW5nLmxvY10oL2FwaS9jbGFzc2VzL0VtYmVyLlN0cmlu
        Zy5odG1sI21ldGhvZF9sb2MpLgoKICAgIEBtZXRob2QgbG9jCiAgICBAZm9y
        IFN0cmluZwogICovCiAgU3RyaW5nLnByb3RvdHlwZS5sb2MgPSBmdW5jdGlv
        bigpIHsKICAgIHJldHVybiBsb2ModGhpcywgYXJndW1lbnRzKTsKICB9OwoK
        ICAvKioKICAgIFNlZSBbRW1iZXIuU3RyaW5nLmNhbWVsaXplXSgvYXBpL2Ns
        YXNzZXMvRW1iZXIuU3RyaW5nLmh0bWwjbWV0aG9kX2NhbWVsaXplKS4KCiAg
        ICBAbWV0aG9kIGNhbWVsaXplCiAgICBAZm9yIFN0cmluZwogICovCiAgU3Ry
        aW5nLnByb3RvdHlwZS5jYW1lbGl6ZSA9IGZ1bmN0aW9uKCkgewogICAgcmV0
        dXJuIGNhbWVsaXplKHRoaXMpOwogIH07CgogIC8qKgogICAgU2VlIFtFbWJl
        ci5TdHJpbmcuZGVjYW1lbGl6ZV0oL2FwaS9jbGFzc2VzL0VtYmVyLlN0cmlu
        Zy5odG1sI21ldGhvZF9kZWNhbWVsaXplKS4KCiAgICBAbWV0aG9kIGRlY2Ft
        ZWxpemUKICAgIEBmb3IgU3RyaW5nCiAgKi8KICBTdHJpbmcucHJvdG90eXBl
        LmRlY2FtZWxpemUgPSBmdW5jdGlvbigpIHsKICAgIHJldHVybiBkZWNhbWVs
        aXplKHRoaXMpOwogIH07CgogIC8qKgogICAgU2VlIFtFbWJlci5TdHJpbmcu
        ZGFzaGVyaXplXSgvYXBpL2NsYXNzZXMvRW1iZXIuU3RyaW5nLmh0bWwjbWV0
        aG9kX2Rhc2hlcml6ZSkuCgogICAgQG1ldGhvZCBkYXNoZXJpemUKICAgIEBm
        b3IgU3RyaW5nCiAgKi8KICBTdHJpbmcucHJvdG90eXBlLmRhc2hlcml6ZSA9
        IGZ1bmN0aW9uKCkgewogICAgcmV0dXJuIGRhc2hlcml6ZSh0aGlzKTsKICB9
        OwoKICAvKioKICAgIFNlZSBbRW1iZXIuU3RyaW5nLnVuZGVyc2NvcmVdKC9h
        cGkvY2xhc3Nlcy9FbWJlci5TdHJpbmcuaHRtbCNtZXRob2RfdW5kZXJzY29y
        ZSkuCgogICAgQG1ldGhvZCB1bmRlcnNjb3JlCiAgICBAZm9yIFN0cmluZwog
        ICovCiAgU3RyaW5nLnByb3RvdHlwZS51bmRlcnNjb3JlID0gZnVuY3Rpb24o
        KSB7CiAgICByZXR1cm4gdW5kZXJzY29yZSh0aGlzKTsKICB9OwoKICAvKioK
        ICAgIFNlZSBbRW1iZXIuU3RyaW5nLmNsYXNzaWZ5XSgvYXBpL2NsYXNzZXMv
        RW1iZXIuU3RyaW5nLmh0bWwjbWV0aG9kX2NsYXNzaWZ5KS4KCiAgICBAbWV0
        aG9kIGNsYXNzaWZ5CiAgICBAZm9yIFN0cmluZwogICovCiAgU3RyaW5nLnBy
        b3RvdHlwZS5jbGFzc2lmeSA9IGZ1bmN0aW9uKCkgewogICAgcmV0dXJuIGNs
        YXNzaWZ5KHRoaXMpOwogIH07CgogIC8qKgogICAgU2VlIFtFbWJlci5TdHJp
        bmcuY2FwaXRhbGl6ZV0oL2FwaS9jbGFzc2VzL0VtYmVyLlN0cmluZy5odG1s
        I21ldGhvZF9jYXBpdGFsaXplKS4KCiAgICBAbWV0aG9kIGNhcGl0YWxpemUK
        ICAgIEBmb3IgU3RyaW5nCiAgKi8KICBTdHJpbmcucHJvdG90eXBlLmNhcGl0
        YWxpemUgPSBmdW5jdGlvbigpIHsKICAgIHJldHVybiBjYXBpdGFsaXplKHRo
        aXMpOwogIH07CgogIAp9CgoKfSkoKTsKCgoKKGZ1bmN0aW9uKCkgewovKioK
        QG1vZHVsZSBlbWJlcgpAc3VibW9kdWxlIGVtYmVyLXJ1bnRpbWUKKi8KCnZh
        ciBhX3NsaWNlID0gQXJyYXkucHJvdG90eXBlLnNsaWNlOwoKaWYgKEVtYmVy
        LkVYVEVORF9QUk9UT1RZUEVTID09PSB0cnVlIHx8IEVtYmVyLkVYVEVORF9Q
        Uk9UT1RZUEVTLkZ1bmN0aW9uKSB7CgogIC8qKgogICAgVGhlIGBwcm9wZXJ0
        eWAgZXh0ZW5zaW9uIG9mIEphdmFzY3JpcHQncyBGdW5jdGlvbiBwcm90b3R5
        cGUgaXMgYXZhaWxhYmxlCiAgICB3aGVuIGBFbWJlci5FWFRFTkRfUFJPVE9U
        WVBFU2Agb3IgYEVtYmVyLkVYVEVORF9QUk9UT1RZUEVTLkZ1bmN0aW9uYCBp
        cwogICAgYHRydWVgLCB3aGljaCBpcyB0aGUgZGVmYXVsdC4KCiAgICBDb21w
        dXRlZCBwcm9wZXJ0aWVzIGFsbG93IHlvdSB0byB0cmVhdCBhIGZ1bmN0aW9u
        IGxpa2UgYSBwcm9wZXJ0eToKCiAgICBgYGBqYXZhc2NyaXB0CiAgICBNeUFw
        cC5QcmVzaWRlbnQgPSBFbWJlci5PYmplY3QuZXh0ZW5kKHsKICAgICAgZmly
        c3ROYW1lOiAnJywKICAgICAgbGFzdE5hbWU6ICAnJywKCiAgICAgIGZ1bGxO
        YW1lOiBmdW5jdGlvbigpIHsKICAgICAgICByZXR1cm4gdGhpcy5nZXQoJ2Zp
        cnN0TmFtZScpICsgJyAnICsgdGhpcy5nZXQoJ2xhc3ROYW1lJyk7CgogICAg
        ICAgIC8vIENhbGwgdGhpcyBmbGFnIHRvIG1hcmsgdGhlIGZ1bmN0aW9uIGFz
        IGEgcHJvcGVydHkKICAgICAgfS5wcm9wZXJ0eSgpCiAgICB9KTsKCiAgICB2
        YXIgcHJlc2lkZW50ID0gTXlBcHAuUHJlc2lkZW50LmNyZWF0ZSh7CiAgICAg
        IGZpcnN0TmFtZTogIkJhcmFjayIsCiAgICAgIGxhc3ROYW1lOiAiT2JhbWEi
        CiAgICB9KTsKCiAgICBwcmVzaWRlbnQuZ2V0KCdmdWxsTmFtZScpOyAgICAv
        LyAiQmFyYWNrIE9iYW1hIgogICAgYGBgCgogICAgVHJlYXRpbmcgYSBmdW5j
        dGlvbiBsaWtlIGEgcHJvcGVydHkgaXMgdXNlZnVsIGJlY2F1c2UgdGhleSBj
        YW4gd29yayB3aXRoCiAgICBiaW5kaW5ncywganVzdCBsaWtlIGFueSBvdGhl
        ciBwcm9wZXJ0eS4KCiAgICBNYW55IGNvbXB1dGVkIHByb3BlcnRpZXMgaGF2
        ZSBkZXBlbmRlbmNpZXMgb24gb3RoZXIgcHJvcGVydGllcy4gRm9yCiAgICBl
        eGFtcGxlLCBpbiB0aGUgYWJvdmUgZXhhbXBsZSwgdGhlIGBmdWxsTmFtZWAg
        cHJvcGVydHkgZGVwZW5kcyBvbgogICAgYGZpcnN0TmFtZWAgYW5kIGBsYXN0
        TmFtZWAgdG8gZGV0ZXJtaW5lIGl0cyB2YWx1ZS4gWW91IGNhbiB0ZWxsIEVt
        YmVyCiAgICBhYm91dCB0aGVzZSBkZXBlbmRlbmNpZXMgbGlrZSB0aGlzOgoK
        ICAgIGBgYGphdmFzY3JpcHQKICAgIE15QXBwLlByZXNpZGVudCA9IEVtYmVy
        Lk9iamVjdC5leHRlbmQoewogICAgICBmaXJzdE5hbWU6ICcnLAogICAgICBs
        YXN0TmFtZTogICcnLAoKICAgICAgZnVsbE5hbWU6IGZ1bmN0aW9uKCkgewog
        ICAgICAgIHJldHVybiB0aGlzLmdldCgnZmlyc3ROYW1lJykgKyAnICcgKyB0
        aGlzLmdldCgnbGFzdE5hbWUnKTsKCiAgICAgICAgLy8gVGVsbCBFbWJlci5q
        cyB0aGF0IHRoaXMgY29tcHV0ZWQgcHJvcGVydHkgZGVwZW5kcyBvbiBmaXJz
        dE5hbWUKICAgICAgICAvLyBhbmQgbGFzdE5hbWUKICAgICAgfS5wcm9wZXJ0
        eSgnZmlyc3ROYW1lJywgJ2xhc3ROYW1lJykKICAgIH0pOwogICAgYGBgCgog
        ICAgTWFrZSBzdXJlIHlvdSBsaXN0IHRoZXNlIGRlcGVuZGVuY2llcyBzbyBF
        bWJlciBrbm93cyB3aGVuIHRvIHVwZGF0ZQogICAgYmluZGluZ3MgdGhhdCBj
        b25uZWN0IHRvIGEgY29tcHV0ZWQgcHJvcGVydHkuIENoYW5naW5nIGEgZGVw
        ZW5kZW5jeQogICAgd2lsbCBub3QgaW1tZWRpYXRlbHkgdHJpZ2dlciBhbiB1
        cGRhdGUgb2YgdGhlIGNvbXB1dGVkIHByb3BlcnR5LCBidXQKICAgIHdpbGwg
        aW5zdGVhZCBjbGVhciB0aGUgY2FjaGUgc28gdGhhdCBpdCBpcyB1cGRhdGVk
        IHdoZW4gdGhlIG5leHQgYGdldGAKICAgIGlzIGNhbGxlZCBvbiB0aGUgcHJv
        cGVydHkuCgogICAgU2VlIFtFbWJlci5Db21wdXRlZFByb3BlcnR5XSgvYXBp
        L2NsYXNzZXMvRW1iZXIuQ29tcHV0ZWRQcm9wZXJ0eS5odG1sKSwgW0VtYmVy
        LmNvbXB1dGVkXSgvYXBpLyNtZXRob2RfY29tcHV0ZWQpLgoKICAgIEBtZXRo
        b2QgcHJvcGVydHkKICAgIEBmb3IgRnVuY3Rpb24KICAqLwogIEZ1bmN0aW9u
        LnByb3RvdHlwZS5wcm9wZXJ0eSA9IGZ1bmN0aW9uKCkgewogICAgdmFyIHJl
        dCA9IEVtYmVyLmNvbXB1dGVkKHRoaXMpOwogICAgcmV0dXJuIHJldC5wcm9w
        ZXJ0eS5hcHBseShyZXQsIGFyZ3VtZW50cyk7CiAgfTsKCiAgLyoqCiAgICBU
        aGUgYG9ic2VydmVzYCBleHRlbnNpb24gb2YgSmF2YXNjcmlwdCdzIEZ1bmN0
        aW9uIHByb3RvdHlwZSBpcyBhdmFpbGFibGUKICAgIHdoZW4gYEVtYmVyLkVY
        VEVORF9QUk9UT1RZUEVTYCBvciBgRW1iZXIuRVhURU5EX1BST1RPVFlQRVMu
        RnVuY3Rpb25gIGlzCiAgICB0cnVlLCB3aGljaCBpcyB0aGUgZGVmYXVsdC4K
        CiAgICBZb3UgY2FuIG9ic2VydmUgcHJvcGVydHkgY2hhbmdlcyBzaW1wbHkg
        YnkgYWRkaW5nIHRoZSBgb2JzZXJ2ZXNgCiAgICBjYWxsIHRvIHRoZSBlbmQg
        b2YgeW91ciBtZXRob2QgZGVjbGFyYXRpb25zIGluIGNsYXNzZXMgdGhhdCB5
        b3Ugd3JpdGUuCiAgICBGb3IgZXhhbXBsZToKCiAgICBgYGBqYXZhc2NyaXB0
        CiAgICBFbWJlci5PYmplY3QuZXh0ZW5kKHsKICAgICAgdmFsdWVPYnNlcnZl
        cjogZnVuY3Rpb24oKSB7CiAgICAgICAgLy8gRXhlY3V0ZXMgd2hlbmV2ZXIg
        dGhlICJ2YWx1ZSIgcHJvcGVydHkgY2hhbmdlcwogICAgICB9Lm9ic2VydmVz
        KCd2YWx1ZScpCiAgICB9KTsKICAgIGBgYAoKICAgIEluIHRoZSBmdXR1cmUg
        dGhpcyBtZXRob2QgbWF5IGJlY29tZSBhc3luY2hyb25vdXMuIElmIHlvdSB3
        YW50IHRvIGVuc3VyZQogICAgc3luY2hyb25vdXMgYmVoYXZpb3IsIHVzZSBg
        b2JzZXJ2ZXNJbW1lZGlhdGVseWAuCgogICAgU2VlIGBFbWJlci5vYnNlcnZl
        cmAuCgogICAgQG1ldGhvZCBvYnNlcnZlcwogICAgQGZvciBGdW5jdGlvbgog
        ICovCiAgRnVuY3Rpb24ucHJvdG90eXBlLm9ic2VydmVzID0gZnVuY3Rpb24o
        KSB7CiAgICB0aGlzLl9fZW1iZXJfb2JzZXJ2ZXNfXyA9IGFfc2xpY2UuY2Fs
        bChhcmd1bWVudHMpOwogICAgcmV0dXJuIHRoaXM7CiAgfTsKCiAgLyoqCiAg
        ICBUaGUgYG9ic2VydmVzSW1tZWRpYXRlbHlgIGV4dGVuc2lvbiBvZiBKYXZh
        c2NyaXB0J3MgRnVuY3Rpb24gcHJvdG90eXBlIGlzCiAgICBhdmFpbGFibGUg
        d2hlbiBgRW1iZXIuRVhURU5EX1BST1RPVFlQRVNgIG9yCiAgICBgRW1iZXIu
        RVhURU5EX1BST1RPVFlQRVMuRnVuY3Rpb25gIGlzIHRydWUsIHdoaWNoIGlz
        IHRoZSBkZWZhdWx0LgoKICAgIFlvdSBjYW4gb2JzZXJ2ZSBwcm9wZXJ0eSBj
        aGFuZ2VzIHNpbXBseSBieSBhZGRpbmcgdGhlIGBvYnNlcnZlc0ltbWVkaWF0
        ZWx5YAogICAgY2FsbCB0byB0aGUgZW5kIG9mIHlvdXIgbWV0aG9kIGRlY2xh
        cmF0aW9ucyBpbiBjbGFzc2VzIHRoYXQgeW91IHdyaXRlLgogICAgRm9yIGV4
        YW1wbGU6CgogICAgYGBgamF2YXNjcmlwdAogICAgRW1iZXIuT2JqZWN0LmV4
        dGVuZCh7CiAgICAgIHZhbHVlT2JzZXJ2ZXI6IGZ1bmN0aW9uKCkgewogICAg
        ICAgIC8vIEV4ZWN1dGVzIGltbWVkaWF0ZWx5IGFmdGVyIHRoZSAidmFsdWUi
        IHByb3BlcnR5IGNoYW5nZXMKICAgICAgfS5vYnNlcnZlc0ltbWVkaWF0ZWx5
        KCd2YWx1ZScpCiAgICB9KTsKICAgIGBgYAoKICAgIEluIHRoZSBmdXR1cmUs
        IGBvYnNlcnZlc2AgbWF5IGJlY29tZSBhc3luY2hyb25vdXMuIEluIHRoaXMg
        ZXZlbnQsCiAgICBgb2JzZXJ2ZXNJbW1lZGlhdGVseWAgd2lsbCBtYWludGFp
        biB0aGUgc3luY2hyb25vdXMgYmVoYXZpb3IuCgogICAgU2VlIGBFbWJlci5p
        bW1lZGlhdGVPYnNlcnZlcmAuCgogICAgQG1ldGhvZCBvYnNlcnZlc0ltbWVk
        aWF0ZWx5CiAgICBAZm9yIEZ1bmN0aW9uCiAgKi8KICBGdW5jdGlvbi5wcm90
        b3R5cGUub2JzZXJ2ZXNJbW1lZGlhdGVseSA9IGZ1bmN0aW9uKCkgewogICAg
        Zm9yICh2YXIgaT0wLCBsPWFyZ3VtZW50cy5sZW5ndGg7IGk8bDsgaSsrKSB7
        CiAgICAgIHZhciBhcmcgPSBhcmd1bWVudHNbaV07CiAgICAgIEVtYmVyLmFz
        c2VydCgiSW1tZWRpYXRlIG9ic2VydmVycyBtdXN0IG9ic2VydmUgaW50ZXJu
        YWwgcHJvcGVydGllcyBvbmx5LCBub3QgcHJvcGVydGllcyBvbiBvdGhlciBv
        YmplY3RzLiIsIGFyZy5pbmRleE9mKCcuJykgPT09IC0xKTsKICAgIH0KCiAg
        ICByZXR1cm4gdGhpcy5vYnNlcnZlcy5hcHBseSh0aGlzLCBhcmd1bWVudHMp
        OwogIH07CgogIC8qKgogICAgVGhlIGBvYnNlcnZlc0JlZm9yZWAgZXh0ZW5z
        aW9uIG9mIEphdmFzY3JpcHQncyBGdW5jdGlvbiBwcm90b3R5cGUgaXMKICAg
        IGF2YWlsYWJsZSB3aGVuIGBFbWJlci5FWFRFTkRfUFJPVE9UWVBFU2Agb3IK
        ICAgIGBFbWJlci5FWFRFTkRfUFJPVE9UWVBFUy5GdW5jdGlvbmAgaXMgdHJ1
        ZSwgd2hpY2ggaXMgdGhlIGRlZmF1bHQuCgogICAgWW91IGNhbiBnZXQgbm90
        aWZpZWQgd2hlbiBhIHByb3BlcnR5IGNoYW5nZSBpcyBhYm91dCB0byBoYXBw
        ZW4gYnkKICAgIGJ5IGFkZGluZyB0aGUgYG9ic2VydmVzQmVmb3JlYCBjYWxs
        IHRvIHRoZSBlbmQgb2YgeW91ciBtZXRob2QKICAgIGRlY2xhcmF0aW9ucyBp
        biBjbGFzc2VzIHRoYXQgeW91IHdyaXRlLiBGb3IgZXhhbXBsZToKCiAgICBg
        YGBqYXZhc2NyaXB0CiAgICBFbWJlci5PYmplY3QuZXh0ZW5kKHsKICAgICAg
        dmFsdWVPYnNlcnZlcjogZnVuY3Rpb24oKSB7CiAgICAgICAgLy8gRXhlY3V0
        ZXMgd2hlbmV2ZXIgdGhlICJ2YWx1ZSIgcHJvcGVydHkgaXMgYWJvdXQgdG8g
        Y2hhbmdlCiAgICAgIH0ub2JzZXJ2ZXNCZWZvcmUoJ3ZhbHVlJykKICAgIH0p
        OwogICAgYGBgCgogICAgU2VlIGBFbWJlci5iZWZvcmVPYnNlcnZlcmAuCgog
        ICAgQG1ldGhvZCBvYnNlcnZlc0JlZm9yZQogICAgQGZvciBGdW5jdGlvbgog
        ICovCiAgRnVuY3Rpb24ucHJvdG90eXBlLm9ic2VydmVzQmVmb3JlID0gZnVu
        Y3Rpb24oKSB7CiAgICB0aGlzLl9fZW1iZXJfb2JzZXJ2ZXNCZWZvcmVfXyA9
        IGFfc2xpY2UuY2FsbChhcmd1bWVudHMpOwogICAgcmV0dXJuIHRoaXM7CiAg
        fTsKCiAgLyoqCiAgICBUaGUgYG9uYCBleHRlbnNpb24gb2YgSmF2YXNjcmlw
        dCdzIEZ1bmN0aW9uIHByb3RvdHlwZSBpcyBhdmFpbGFibGUKICAgIHdoZW4g
        YEVtYmVyLkVYVEVORF9QUk9UT1RZUEVTYCBvciBgRW1iZXIuRVhURU5EX1BS
        T1RPVFlQRVMuRnVuY3Rpb25gIGlzCiAgICB0cnVlLCB3aGljaCBpcyB0aGUg
        ZGVmYXVsdC4KCiAgICBZb3UgY2FuIGxpc3RlbiBmb3IgZXZlbnRzIHNpbXBs
        eSBieSBhZGRpbmcgdGhlIGBvbmAgY2FsbCB0byB0aGUgZW5kIG9mCiAgICB5
        b3VyIG1ldGhvZCBkZWNsYXJhdGlvbnMgaW4gY2xhc3NlcyBvciBtaXhpbnMg
        dGhhdCB5b3Ugd3JpdGUuIEZvciBleGFtcGxlOgoKICAgIGBgYGphdmFzY3Jp
        cHQKICAgIEVtYmVyLk1peGluLmNyZWF0ZSh7CiAgICAgIGRvU29tZXRoaW5n
        V2l0aEVsZW1lbnQ6IGZ1bmN0aW9uKCkgewogICAgICAgIC8vIEV4ZWN1dGVz
        IHdoZW5ldmVyIHRoZSAiZGlkSW5zZXJ0RWxlbWVudCIgZXZlbnQgZmlyZXMK
        ICAgICAgfS5vbignZGlkSW5zZXJ0RWxlbWVudCcpCiAgICB9KTsKICAgIGBg
        YAoKICAgIFNlZSBgRW1iZXIub25gLgoKICAgIEBtZXRob2Qgb24KICAgIEBm
        b3IgRnVuY3Rpb24KICAqLwogIEZ1bmN0aW9uLnByb3RvdHlwZS5vbiA9IGZ1
        bmN0aW9uKCkgewogICAgdmFyIGV2ZW50cyA9IGFfc2xpY2UuY2FsbChhcmd1
        bWVudHMpOwogICAgdGhpcy5fX2VtYmVyX2xpc3RlbnNfXyA9IGV2ZW50czsK
        ICAgIHJldHVybiB0aGlzOwogIH07Cn0KCgp9KSgpOwoKCgooZnVuY3Rpb24o
        KSB7Cgp9KSgpOwoKCgooZnVuY3Rpb24oKSB7Ci8qKgpAbW9kdWxlIGVtYmVy
        CkBzdWJtb2R1bGUgZW1iZXItcnVudGltZQoqLwoKCi8qKgogIEltcGxlbWVu
        dHMgc29tZSBzdGFuZGFyZCBtZXRob2RzIGZvciBjb21wYXJpbmcgb2JqZWN0
        cy4gQWRkIHRoaXMgbWl4aW4gdG8KICBhbnkgY2xhc3MgeW91IGNyZWF0ZSB0
        aGF0IGNhbiBjb21wYXJlIGl0cyBpbnN0YW5jZXMuCgogIFlvdSBzaG91bGQg
        aW1wbGVtZW50IHRoZSBgY29tcGFyZSgpYCBtZXRob2QuCgogIEBjbGFzcyBD
        b21wYXJhYmxlCiAgQG5hbWVzcGFjZSBFbWJlcgogIEBzaW5jZSBFbWJlciAw
        LjkKKi8KRW1iZXIuQ29tcGFyYWJsZSA9IEVtYmVyLk1peGluLmNyZWF0ZSgg
        LyoqIEBzY29wZSBFbWJlci5Db21wYXJhYmxlLnByb3RvdHlwZSAqL3sKCiAg
        LyoqCiAgICBPdmVycmlkZSB0byByZXR1cm4gdGhlIHJlc3VsdCBvZiB0aGUg
        Y29tcGFyaXNvbiBvZiB0aGUgdHdvIHBhcmFtZXRlcnMuIFRoZQogICAgY29t
        cGFyZSBtZXRob2Qgc2hvdWxkIHJldHVybjoKCiAgICAtIGAtMWAgaWYgYGEg
        PCBiYAogICAgLSBgMGAgaWYgYGEgPT0gYmAKICAgIC0gYDFgIGlmIGBhID4g
        YmAKCiAgICBEZWZhdWx0IGltcGxlbWVudGF0aW9uIHJhaXNlcyBhbiBleGNl
        cHRpb24uCgogICAgQG1ldGhvZCBjb21wYXJlCiAgICBAcGFyYW0gYSB7T2Jq
        ZWN0fSB0aGUgZmlyc3Qgb2JqZWN0IHRvIGNvbXBhcmUKICAgIEBwYXJhbSBi
        IHtPYmplY3R9IHRoZSBzZWNvbmQgb2JqZWN0IHRvIGNvbXBhcmUKICAgIEBy
        ZXR1cm4ge0ludGVnZXJ9IHRoZSByZXN1bHQgb2YgdGhlIGNvbXBhcmlzb24K
        ICAqLwogIGNvbXBhcmU6IEVtYmVyLnJlcXVpcmVkKEZ1bmN0aW9uKQoKfSk7
        CgoKfSkoKTsKCgoKKGZ1bmN0aW9uKCkgewovKioKQG1vZHVsZSBlbWJlcgpA
        c3VibW9kdWxlIGVtYmVyLXJ1bnRpbWUKKi8KCgoKdmFyIGdldCA9IEVtYmVy
        LmdldCwgc2V0ID0gRW1iZXIuc2V0OwoKLyoqCiAgSW1wbGVtZW50cyBzb21l
        IHN0YW5kYXJkIG1ldGhvZHMgZm9yIGNvcHlpbmcgYW4gb2JqZWN0LiBBZGQg
        dGhpcyBtaXhpbiB0bwogIGFueSBvYmplY3QgeW91IGNyZWF0ZSB0aGF0IGNh
        biBjcmVhdGUgYSBjb3B5IG9mIGl0c2VsZi4gVGhpcyBtaXhpbiBpcwogIGFk
        ZGVkIGF1dG9tYXRpY2FsbHkgdG8gdGhlIGJ1aWx0LWluIGFycmF5LgoKICBZ
        b3Ugc2hvdWxkIGdlbmVyYWxseSBpbXBsZW1lbnQgdGhlIGBjb3B5KClgIG1l
        dGhvZCB0byByZXR1cm4gYSBjb3B5IG9mIHRoZQogIHJlY2VpdmVyLgoKICBO
        b3RlIHRoYXQgYGZyb3plbkNvcHkoKWAgd2lsbCBvbmx5IHdvcmsgaWYgeW91
        IGFsc28gaW1wbGVtZW50CiAgYEVtYmVyLkZyZWV6YWJsZWAuCgogIEBjbGFz
        cyBDb3B5YWJsZQogIEBuYW1lc3BhY2UgRW1iZXIKICBAc2luY2UgRW1iZXIg
        MC45CiovCkVtYmVyLkNvcHlhYmxlID0gRW1iZXIuTWl4aW4uY3JlYXRlKC8q
        KiBAc2NvcGUgRW1iZXIuQ29weWFibGUucHJvdG90eXBlICovIHsKCiAgLyoq
        CiAgICBPdmVycmlkZSB0byByZXR1cm4gYSBjb3B5IG9mIHRoZSByZWNlaXZl
        ci4gRGVmYXVsdCBpbXBsZW1lbnRhdGlvbiByYWlzZXMKICAgIGFuIGV4Y2Vw
        dGlvbi4KCiAgICBAbWV0aG9kIGNvcHkKICAgIEBwYXJhbSB7Qm9vbGVhbn0g
        ZGVlcCBpZiBgdHJ1ZWAsIGEgZGVlcCBjb3B5IG9mIHRoZSBvYmplY3Qgc2hv
        dWxkIGJlIG1hZGUKICAgIEByZXR1cm4ge09iamVjdH0gY29weSBvZiByZWNl
        aXZlcgogICovCiAgY29weTogRW1iZXIucmVxdWlyZWQoRnVuY3Rpb24pLAoK
        ICAvKioKICAgIElmIHRoZSBvYmplY3QgaW1wbGVtZW50cyBgRW1iZXIuRnJl
        ZXphYmxlYCwgdGhlbiB0aGlzIHdpbGwgcmV0dXJuIGEgbmV3CiAgICBjb3B5
        IGlmIHRoZSBvYmplY3QgaXMgbm90IGZyb3plbiBhbmQgdGhlIHJlY2VpdmVy
        IGlmIHRoZSBvYmplY3QgaXMgZnJvemVuLgoKICAgIFJhaXNlcyBhbiBleGNl
        cHRpb24gaWYgeW91IHRyeSB0byBjYWxsIHRoaXMgbWV0aG9kIG9uIGEgb2Jq
        ZWN0IHRoYXQgZG9lcwogICAgbm90IHN1cHBvcnQgZnJlZXppbmcuCgogICAg
        WW91IHNob3VsZCB1c2UgdGhpcyBtZXRob2Qgd2hlbmV2ZXIgeW91IHdhbnQg
        YSBjb3B5IG9mIGEgZnJlZXphYmxlIG9iamVjdAogICAgc2luY2UgYSBmcmVl
        emFibGUgb2JqZWN0IGNhbiBzaW1wbHkgcmV0dXJuIGl0c2VsZiB3aXRob3V0
        IGFjdHVhbGx5CiAgICBjb25zdW1pbmcgbW9yZSBtZW1vcnkuCgogICAgQG1l
        dGhvZCBmcm96ZW5Db3B5CiAgICBAcmV0dXJuIHtPYmplY3R9IGNvcHkgb2Yg
        cmVjZWl2ZXIgb3IgcmVjZWl2ZXIKICAqLwogIGZyb3plbkNvcHk6IGZ1bmN0
        aW9uKCkgewogICAgaWYgKEVtYmVyLkZyZWV6YWJsZSAmJiBFbWJlci5GcmVl
        emFibGUuZGV0ZWN0KHRoaXMpKSB7CiAgICAgIHJldHVybiBnZXQodGhpcywg
        J2lzRnJvemVuJykgPyB0aGlzIDogdGhpcy5jb3B5KCkuZnJlZXplKCk7CiAg
        ICB9IGVsc2UgewogICAgICB0aHJvdyBuZXcgRW1iZXIuRXJyb3IoRW1iZXIu
        U3RyaW5nLmZtdCgiJUAgZG9lcyBub3Qgc3VwcG9ydCBmcmVlemluZyIsIFt0
        aGlzXSkpOwogICAgfQogIH0KfSk7Cgp9KSgpOwoKCgooZnVuY3Rpb24oKSB7
        Ci8qKgpAbW9kdWxlIGVtYmVyCkBzdWJtb2R1bGUgZW1iZXItcnVudGltZQoq
        LwoKCnZhciBnZXQgPSBFbWJlci5nZXQsIHNldCA9IEVtYmVyLnNldDsKCi8q
        KgogIFRoZSBgRW1iZXIuRnJlZXphYmxlYCBtaXhpbiBpbXBsZW1lbnRzIHNv
        bWUgYmFzaWMgbWV0aG9kcyBmb3IgbWFya2luZyBhbgogIG9iamVjdCBhcyBm
        cm96ZW4uIE9uY2UgYW4gb2JqZWN0IGlzIGZyb3plbiBpdCBzaG91bGQgYmUg
        cmVhZCBvbmx5LiBObyBjaGFuZ2VzCiAgbWF5IGJlIG1hZGUgdGhlIGludGVy
        bmFsIHN0YXRlIG9mIHRoZSBvYmplY3QuCgogICMjIEVuZm9yY2VtZW50Cgog
        IFRvIGZ1bGx5IHN1cHBvcnQgZnJlZXppbmcgaW4geW91ciBzdWJjbGFzcywg
        eW91IG11c3QgaW5jbHVkZSB0aGlzIG1peGluIGFuZAogIG92ZXJyaWRlIGFu
        eSBtZXRob2QgdGhhdCBtaWdodCBhbHRlciBhbnkgcHJvcGVydHkgb24gdGhl
        IG9iamVjdCB0byBpbnN0ZWFkCiAgcmFpc2UgYW4gZXhjZXB0aW9uLiBZb3Ug
        Y2FuIGNoZWNrIHRoZSBzdGF0ZSBvZiBhbiBvYmplY3QgYnkgY2hlY2tpbmcg
        dGhlCiAgYGlzRnJvemVuYCBwcm9wZXJ0eS4KCiAgQWx0aG91Z2ggZnV0dXJl
        IHZlcnNpb25zIG9mIEphdmFTY3JpcHQgbWF5IHN1cHBvcnQgbGFuZ3VhZ2Ut
        bGV2ZWwgZnJlZXppbmcKICBvYmplY3Qgb2JqZWN0cywgdGhhdCBpcyBub3Qg
        dGhlIGNhc2UgdG9kYXkuIEV2ZW4gaWYgYW4gb2JqZWN0IGlzIGZyZWV6YWJs
        ZSwKICBpdCBpcyBzdGlsbCB0ZWNobmljYWxseSBwb3NzaWJsZSB0byBtb2Rp
        ZnkgdGhlIG9iamVjdCwgZXZlbiB0aG91Z2ggaXQgY291bGQKICBicmVhayBv
        dGhlciBwYXJ0cyBvZiB5b3VyIGFwcGxpY2F0aW9uIHRoYXQgZG8gbm90IGV4
        cGVjdCBhIGZyb3plbiBvYmplY3QgdG8KICBjaGFuZ2UuIEl0IGlzLCB0aGVy
        ZWZvcmUsIHZlcnkgaW1wb3J0YW50IHRoYXQgeW91IGFsd2F5cyByZXNwZWN0
        IHRoZQogIGBpc0Zyb3plbmAgcHJvcGVydHkgb24gYWxsIGZyZWV6YWJsZSBv
        YmplY3RzLgoKICAjIyBFeGFtcGxlIFVzYWdlCgogIFRoZSBleGFtcGxlIGJl
        bG93IHNob3dzIGEgc2ltcGxlIG9iamVjdCB0aGF0IGltcGxlbWVudCB0aGUg
        YEVtYmVyLkZyZWV6YWJsZWAKICBwcm90b2NvbC4KCiAgYGBgamF2YXNjcmlw
        dAogIENvbnRhY3QgPSBFbWJlci5PYmplY3QuZXh0ZW5kKEVtYmVyLkZyZWV6
        YWJsZSwgewogICAgZmlyc3ROYW1lOiBudWxsLAogICAgbGFzdE5hbWU6IG51
        bGwsCgogICAgLy8gc3dhcHMgdGhlIG5hbWVzCiAgICBzd2FwTmFtZXM6IGZ1
        bmN0aW9uKCkgewogICAgICBpZiAodGhpcy5nZXQoJ2lzRnJvemVuJykpIHRo
        cm93IEVtYmVyLkZST1pFTl9FUlJPUjsKICAgICAgdmFyIHRtcCA9IHRoaXMu
        Z2V0KCdmaXJzdE5hbWUnKTsKICAgICAgdGhpcy5zZXQoJ2ZpcnN0TmFtZScs
        IHRoaXMuZ2V0KCdsYXN0TmFtZScpKTsKICAgICAgdGhpcy5zZXQoJ2xhc3RO
        YW1lJywgdG1wKTsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CgogIH0pOwoK
        ICBjID0gQ29udGV4dC5jcmVhdGUoeyBmaXJzdE5hbWU6ICJKb2huIiwgbGFz
        dE5hbWU6ICJEb2UiIH0pOwogIGMuc3dhcE5hbWVzKCk7ICAvLyByZXR1cm5z
        IGMKICBjLmZyZWV6ZSgpOwogIGMuc3dhcE5hbWVzKCk7ICAvLyBFWENFUFRJ
        T04KICBgYGAKCiAgIyMgQ29weWluZwoKICBVc3VhbGx5IHRoZSBgRW1iZXIu
        RnJlZXphYmxlYCBwcm90b2NvbCBpcyBpbXBsZW1lbnRlZCBpbiBjb29wZXJh
        dGlvbiB3aXRoIHRoZQogIGBFbWJlci5Db3B5YWJsZWAgcHJvdG9jb2wsIHdo
        aWNoIGRlZmluZXMgYSBgZnJvemVuQ29weSgpYCBtZXRob2QgdGhhdCB3aWxs
        CiAgcmV0dXJuIGEgZnJvemVuIG9iamVjdCwgaWYgdGhlIG9iamVjdCBpbXBs
        ZW1lbnRzIHRoaXMgbWV0aG9kIGFzIHdlbGwuCgogIEBjbGFzcyBGcmVlemFi
        bGUKICBAbmFtZXNwYWNlIEVtYmVyCiAgQHNpbmNlIEVtYmVyIDAuOQoqLwpF
        bWJlci5GcmVlemFibGUgPSBFbWJlci5NaXhpbi5jcmVhdGUoLyoqIEBzY29w
        ZSBFbWJlci5GcmVlemFibGUucHJvdG90eXBlICovIHsKCiAgLyoqCiAgICBT
        ZXQgdG8gYHRydWVgIHdoZW4gdGhlIG9iamVjdCBpcyBmcm96ZW4uIFVzZSB0
        aGlzIHByb3BlcnR5IHRvIGRldGVjdAogICAgd2hldGhlciB5b3VyIG9iamVj
        dCBpcyBmcm96ZW4gb3Igbm90LgoKICAgIEBwcm9wZXJ0eSBpc0Zyb3plbgog
        ICAgQHR5cGUgQm9vbGVhbgogICovCiAgaXNGcm96ZW46IGZhbHNlLAoKICAv
        KioKICAgIEZyZWV6ZXMgdGhlIG9iamVjdC4gT25jZSB0aGlzIG1ldGhvZCBo
        YXMgYmVlbiBjYWxsZWQgdGhlIG9iamVjdCBzaG91bGQKICAgIG5vIGxvbmdl
        ciBhbGxvdyBhbnkgcHJvcGVydGllcyB0byBiZSBlZGl0ZWQuCgogICAgQG1l
        dGhvZCBmcmVlemUKICAgIEByZXR1cm4ge09iamVjdH0gcmVjZWl2ZXIKICAq
        LwogIGZyZWV6ZTogZnVuY3Rpb24oKSB7CiAgICBpZiAoZ2V0KHRoaXMsICdp
        c0Zyb3plbicpKSByZXR1cm4gdGhpczsKICAgIHNldCh0aGlzLCAnaXNGcm96
        ZW4nLCB0cnVlKTsKICAgIHJldHVybiB0aGlzOwogIH0KCn0pOwoKRW1iZXIu
        RlJPWkVOX0VSUk9SID0gIkZyb3plbiBvYmplY3QgY2Fubm90IGJlIG1vZGlm
        aWVkLiI7Cgp9KSgpOwoKCgooZnVuY3Rpb24oKSB7Ci8qKgpAbW9kdWxlIGVt
        YmVyCkBzdWJtb2R1bGUgZW1iZXItcnVudGltZQoqLwoKdmFyIGZvckVhY2gg
        PSBFbWJlci5FbnVtZXJhYmxlVXRpbHMuZm9yRWFjaDsKCi8qKgogIFRoaXMg
        bWl4aW4gZGVmaW5lcyB0aGUgQVBJIGZvciBtb2RpZnlpbmcgZ2VuZXJpYyBl
        bnVtZXJhYmxlcy4gVGhlc2UgbWV0aG9kcwogIGNhbiBiZSBhcHBsaWVkIHRv
        IGFuIG9iamVjdCByZWdhcmRsZXNzIG9mIHdoZXRoZXIgaXQgaXMgb3JkZXJl
        ZCBvcgogIHVub3JkZXJlZC4KCiAgTm90ZSB0aGF0IGFuIEVudW1lcmFibGUg
        Y2FuIGNoYW5nZSBldmVuIGlmIGl0IGRvZXMgbm90IGltcGxlbWVudCB0aGlz
        IG1peGluLgogIEZvciBleGFtcGxlLCBhIE1hcHBlZEVudW1lcmFibGUgY2Fu
        bm90IGJlIGRpcmVjdGx5IG1vZGlmaWVkIGJ1dCBpZiBpdHMKICB1bmRlcmx5
        aW5nIGVudW1lcmFibGUgY2hhbmdlcywgaXQgd2lsbCBjaGFuZ2UgYWxzby4K
        CiAgIyMgQWRkaW5nIE9iamVjdHMKCiAgVG8gYWRkIGFuIG9iamVjdCB0byBh
        biBlbnVtZXJhYmxlLCB1c2UgdGhlIGBhZGRPYmplY3QoKWAgbWV0aG9kLiBU
        aGlzCiAgbWV0aG9kIHdpbGwgb25seSBhZGQgdGhlIG9iamVjdCB0byB0aGUg
        ZW51bWVyYWJsZSBpZiB0aGUgb2JqZWN0IGlzIG5vdAogIGFscmVhZHkgcHJl
        c2VudCBhbmQgaXMgb2YgYSB0eXBlIHN1cHBvcnRlZCBieSB0aGUgZW51bWVy
        YWJsZS4KCiAgYGBgamF2YXNjcmlwdAogIHNldC5hZGRPYmplY3QoY29udGFj
        dCk7CiAgYGBgCgogICMjIFJlbW92aW5nIE9iamVjdHMKCiAgVG8gcmVtb3Zl
        IGFuIG9iamVjdCBmcm9tIGFuIGVudW1lcmFibGUsIHVzZSB0aGUgYHJlbW92
        ZU9iamVjdCgpYCBtZXRob2QuIFRoaXMKICB3aWxsIG9ubHkgcmVtb3ZlIHRo
        ZSBvYmplY3QgaWYgaXQgaXMgcHJlc2VudCBpbiB0aGUgZW51bWVyYWJsZSwg
        b3RoZXJ3aXNlCiAgdGhpcyBtZXRob2QgaGFzIG5vIGVmZmVjdC4KCiAgYGBg
        amF2YXNjcmlwdAogIHNldC5yZW1vdmVPYmplY3QoY29udGFjdCk7CiAgYGBg
        CgogICMjIEltcGxlbWVudGluZyBJbiBZb3VyIE93biBDb2RlCgogIElmIHlv
        dSBhcmUgaW1wbGVtZW50aW5nIGFuIG9iamVjdCBhbmQgd2FudCB0byBzdXBw
        b3J0IHRoaXMgQVBJLCBqdXN0IGluY2x1ZGUKICB0aGlzIG1peGluIGluIHlv
        dXIgY2xhc3MgYW5kIGltcGxlbWVudCB0aGUgcmVxdWlyZWQgbWV0aG9kcy4g
        SW4geW91ciB1bml0CiAgdGVzdHMsIGJlIHN1cmUgdG8gYXBwbHkgdGhlIEVt
        YmVyLk11dGFibGVFbnVtZXJhYmxlVGVzdHMgdG8geW91ciBvYmplY3QuCgog
        IEBjbGFzcyBNdXRhYmxlRW51bWVyYWJsZQogIEBuYW1lc3BhY2UgRW1iZXIK
        ICBAdXNlcyBFbWJlci5FbnVtZXJhYmxlCiovCkVtYmVyLk11dGFibGVFbnVt
        ZXJhYmxlID0gRW1iZXIuTWl4aW4uY3JlYXRlKEVtYmVyLkVudW1lcmFibGUs
        IHsKCiAgLyoqCiAgICBfX1JlcXVpcmVkLl9fIFlvdSBtdXN0IGltcGxlbWVu
        dCB0aGlzIG1ldGhvZCB0byBhcHBseSB0aGlzIG1peGluLgoKICAgIEF0dGVt
        cHRzIHRvIGFkZCB0aGUgcGFzc2VkIG9iamVjdCB0byB0aGUgcmVjZWl2ZXIg
        aWYgdGhlIG9iamVjdCBpcyBub3QKICAgIGFscmVhZHkgcHJlc2VudCBpbiB0
        aGUgY29sbGVjdGlvbi4gSWYgdGhlIG9iamVjdCBpcyBwcmVzZW50LCB0aGlz
        IG1ldGhvZAogICAgaGFzIG5vIGVmZmVjdC4KCiAgICBJZiB0aGUgcGFzc2Vk
        IG9iamVjdCBpcyBvZiBhIHR5cGUgbm90IHN1cHBvcnRlZCBieSB0aGUgcmVj
        ZWl2ZXIsCiAgICB0aGVuIHRoaXMgbWV0aG9kIHNob3VsZCByYWlzZSBhbiBl
        eGNlcHRpb24uCgogICAgQG1ldGhvZCBhZGRPYmplY3QKICAgIEBwYXJhbSB7
        T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBhZGQgdG8gdGhlIGVudW1l
        cmFibGUuCiAgICBAcmV0dXJuIHtPYmplY3R9IHRoZSBwYXNzZWQgb2JqZWN0
        CiAgKi8KICBhZGRPYmplY3Q6IEVtYmVyLnJlcXVpcmVkKEZ1bmN0aW9uKSwK
        CiAgLyoqCiAgICBBZGRzIGVhY2ggb2JqZWN0IGluIHRoZSBwYXNzZWQgZW51
        bWVyYWJsZSB0byB0aGUgcmVjZWl2ZXIuCgogICAgQG1ldGhvZCBhZGRPYmpl
        Y3RzCiAgICBAcGFyYW0ge0VtYmVyLkVudW1lcmFibGV9IG9iamVjdHMgdGhl
        IG9iamVjdHMgdG8gYWRkLgogICAgQHJldHVybiB7T2JqZWN0fSByZWNlaXZl
        cgogICovCiAgYWRkT2JqZWN0czogZnVuY3Rpb24ob2JqZWN0cykgewogICAg
        RW1iZXIuYmVnaW5Qcm9wZXJ0eUNoYW5nZXModGhpcyk7CiAgICBmb3JFYWNo
        KG9iamVjdHMsIGZ1bmN0aW9uKG9iaikgeyB0aGlzLmFkZE9iamVjdChvYmop
        OyB9LCB0aGlzKTsKICAgIEVtYmVyLmVuZFByb3BlcnR5Q2hhbmdlcyh0aGlz
        KTsKICAgIHJldHVybiB0aGlzOwogIH0sCgogIC8qKgogICAgX19SZXF1aXJl
        ZC5fXyBZb3UgbXVzdCBpbXBsZW1lbnQgdGhpcyBtZXRob2QgdG8gYXBwbHkg
        dGhpcyBtaXhpbi4KCiAgICBBdHRlbXB0cyB0byByZW1vdmUgdGhlIHBhc3Nl
        ZCBvYmplY3QgZnJvbSB0aGUgcmVjZWl2ZXIgY29sbGVjdGlvbiBpZiB0aGUK
        ICAgIG9iamVjdCBpcyBwcmVzZW50IGluIHRoZSBjb2xsZWN0aW9uLiBJZiB0
        aGUgb2JqZWN0IGlzIG5vdCBwcmVzZW50LAogICAgdGhpcyBtZXRob2QgaGFz
        IG5vIGVmZmVjdC4KCiAgICBJZiB0aGUgcGFzc2VkIG9iamVjdCBpcyBvZiBh
        IHR5cGUgbm90IHN1cHBvcnRlZCBieSB0aGUgcmVjZWl2ZXIsCiAgICB0aGVu
        IHRoaXMgbWV0aG9kIHNob3VsZCByYWlzZSBhbiBleGNlcHRpb24uCgogICAg
        QG1ldGhvZCByZW1vdmVPYmplY3QKICAgIEBwYXJhbSB7T2JqZWN0fSBvYmpl
        Y3QgVGhlIG9iamVjdCB0byByZW1vdmUgZnJvbSB0aGUgZW51bWVyYWJsZS4K
        ICAgIEByZXR1cm4ge09iamVjdH0gdGhlIHBhc3NlZCBvYmplY3QKICAqLwog
        IHJlbW92ZU9iamVjdDogRW1iZXIucmVxdWlyZWQoRnVuY3Rpb24pLAoKCiAg
        LyoqCiAgICBSZW1vdmVzIGVhY2ggb2JqZWN0IGluIHRoZSBwYXNzZWQgZW51
        bWVyYWJsZSBmcm9tIHRoZSByZWNlaXZlci4KCiAgICBAbWV0aG9kIHJlbW92
        ZU9iamVjdHMKICAgIEBwYXJhbSB7RW1iZXIuRW51bWVyYWJsZX0gb2JqZWN0
        cyB0aGUgb2JqZWN0cyB0byByZW1vdmUKICAgIEByZXR1cm4ge09iamVjdH0g
        cmVjZWl2ZXIKICAqLwogIHJlbW92ZU9iamVjdHM6IGZ1bmN0aW9uKG9iamVj
        dHMpIHsKICAgIEVtYmVyLmJlZ2luUHJvcGVydHlDaGFuZ2VzKHRoaXMpOwog
        ICAgZm9yRWFjaChvYmplY3RzLCBmdW5jdGlvbihvYmopIHsgdGhpcy5yZW1v
        dmVPYmplY3Qob2JqKTsgfSwgdGhpcyk7CiAgICBFbWJlci5lbmRQcm9wZXJ0
        eUNoYW5nZXModGhpcyk7CiAgICByZXR1cm4gdGhpczsKICB9Cgp9KTsKCn0p
        KCk7CgoKCihmdW5jdGlvbigpIHsKLyoqCkBtb2R1bGUgZW1iZXIKQHN1Ym1v
        ZHVsZSBlbWJlci1ydW50aW1lCiovCi8vIC4uLi4uLi4uLi4uLi4uLi4uLi4u
        Li4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4KLy8gQ09O
        U1RBTlRTCi8vCgp2YXIgT1VUX09GX1JBTkdFX0VYQ0VQVElPTiA9ICJJbmRl
        eCBvdXQgb2YgcmFuZ2UiIDsKdmFyIEVNUFRZID0gW107CgovLyAuLi4uLi4u
        Li4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4u
        Li4uLi4uCi8vIEhFTFBFUlMKLy8KCnZhciBnZXQgPSBFbWJlci5nZXQsIHNl
        dCA9IEVtYmVyLnNldDsKCi8qKgogIFRoaXMgbWl4aW4gZGVmaW5lcyB0aGUg
        QVBJIGZvciBtb2RpZnlpbmcgYXJyYXktbGlrZSBvYmplY3RzLiBUaGVzZSBt
        ZXRob2RzCiAgY2FuIGJlIGFwcGxpZWQgb25seSB0byBhIGNvbGxlY3Rpb24g
        dGhhdCBrZWVwcyBpdHMgaXRlbXMgaW4gYW4gb3JkZXJlZCBzZXQuCgogIE5v
        dGUgdGhhdCBhbiBBcnJheSBjYW4gY2hhbmdlIGV2ZW4gaWYgaXQgZG9lcyBu
        b3QgaW1wbGVtZW50IHRoaXMgbWl4aW4uCiAgRm9yIGV4YW1wbGUsIG9uZSBt
        aWdodCBpbXBsZW1lbnQgYSBTcGFyc2VBcnJheSB0aGF0IGNhbm5vdCBiZSBk
        aXJlY3RseQogIG1vZGlmaWVkLCBidXQgaWYgaXRzIHVuZGVybHlpbmcgZW51
        bWVyYWJsZSBjaGFuZ2VzLCBpdCB3aWxsIGNoYW5nZSBhbHNvLgoKICBAY2xh
        c3MgTXV0YWJsZUFycmF5CiAgQG5hbWVzcGFjZSBFbWJlcgogIEB1c2VzIEVt
        YmVyLkFycmF5CiAgQHVzZXMgRW1iZXIuTXV0YWJsZUVudW1lcmFibGUKKi8K
        RW1iZXIuTXV0YWJsZUFycmF5ID0gRW1iZXIuTWl4aW4uY3JlYXRlKEVtYmVy
        LkFycmF5LCBFbWJlci5NdXRhYmxlRW51bWVyYWJsZSwvKiogQHNjb3BlIEVt
        YmVyLk11dGFibGVBcnJheS5wcm90b3R5cGUgKi8gewoKICAvKioKICAgIF9f
        UmVxdWlyZWQuX18gWW91IG11c3QgaW1wbGVtZW50IHRoaXMgbWV0aG9kIHRv
        IGFwcGx5IHRoaXMgbWl4aW4uCgogICAgVGhpcyBpcyBvbmUgb2YgdGhlIHBy
        aW1pdGl2ZXMgeW91IG11c3QgaW1wbGVtZW50IHRvIHN1cHBvcnQgYEVtYmVy
        LkFycmF5YC4KICAgIFlvdSBzaG91bGQgcmVwbGFjZSBhbXQgb2JqZWN0cyBz
        dGFydGVkIGF0IGlkeCB3aXRoIHRoZSBvYmplY3RzIGluIHRoZQogICAgcGFz
        c2VkIGFycmF5LiBZb3Ugc2hvdWxkIGFsc28gY2FsbCBgdGhpcy5lbnVtZXJh
        YmxlQ29udGVudERpZENoYW5nZSgpYAoKICAgIEBtZXRob2QgcmVwbGFjZQog
        ICAgQHBhcmFtIHtOdW1iZXJ9IGlkeCBTdGFydGluZyBpbmRleCBpbiB0aGUg
        YXJyYXkgdG8gcmVwbGFjZS4gSWYKICAgICAgaWR4ID49IGxlbmd0aCwgdGhl
        biBhcHBlbmQgdG8gdGhlIGVuZCBvZiB0aGUgYXJyYXkuCiAgICBAcGFyYW0g
        e051bWJlcn0gYW10IE51bWJlciBvZiBlbGVtZW50cyB0aGF0IHNob3VsZCBi
        ZSByZW1vdmVkIGZyb20KICAgICAgdGhlIGFycmF5LCBzdGFydGluZyBhdCAq
        aWR4Ki4KICAgIEBwYXJhbSB7QXJyYXl9IG9iamVjdHMgQW4gYXJyYXkgb2Yg
        emVybyBvciBtb3JlIG9iamVjdHMgdGhhdCBzaG91bGQgYmUKICAgICAgaW5z
        ZXJ0ZWQgaW50byB0aGUgYXJyYXkgYXQgKmlkeCoKICAqLwogIHJlcGxhY2U6
        IEVtYmVyLnJlcXVpcmVkKCksCgogIC8qKgogICAgUmVtb3ZlIGFsbCBlbGVt
        ZW50cyBmcm9tIHNlbGYuIFRoaXMgaXMgdXNlZnVsIGlmIHlvdQogICAgd2Fu
        dCB0byByZXVzZSBhbiBleGlzdGluZyBhcnJheSB3aXRob3V0IGhhdmluZyB0
        byByZWNyZWF0ZSBpdC4KCiAgICBgYGBqYXZhc2NyaXB0CiAgICB2YXIgY29s
        b3JzID0gWyJyZWQiLCAiZ3JlZW4iLCAiYmx1ZSJdOwogICAgY29sb3IubGVu
        Z3RoKCk7ICAgLy8gIDMKICAgIGNvbG9ycy5jbGVhcigpOyAgIC8vICBbXQog
        ICAgY29sb3JzLmxlbmd0aCgpOyAgLy8gIDAKICAgIGBgYAoKICAgIEBtZXRo
        b2QgY2xlYXIKICAgIEByZXR1cm4ge0VtYmVyLkFycmF5fSBBbiBlbXB0eSBB
        cnJheS4KICAqLwogIGNsZWFyOiBmdW5jdGlvbiAoKSB7CiAgICB2YXIgbGVu
        ID0gZ2V0KHRoaXMsICdsZW5ndGgnKTsKICAgIGlmIChsZW4gPT09IDApIHJl
        dHVybiB0aGlzOwogICAgdGhpcy5yZXBsYWNlKDAsIGxlbiwgRU1QVFkpOwog
        ICAgcmV0dXJuIHRoaXM7CiAgfSwKCiAgLyoqCiAgICBUaGlzIHdpbGwgdXNl
        IHRoZSBwcmltaXRpdmUgYHJlcGxhY2UoKWAgbWV0aG9kIHRvIGluc2VydCBh
        biBvYmplY3QgYXQgdGhlCiAgICBzcGVjaWZpZWQgaW5kZXguCgogICAgYGBg
        amF2YXNjcmlwdAogICAgdmFyIGNvbG9ycyA9IFsicmVkIiwgImdyZWVuIiwg
        ImJsdWUiXTsKICAgIGNvbG9ycy5pbnNlcnRBdCgyLCAieWVsbG93Iik7ICAv
        LyBbInJlZCIsICJncmVlbiIsICJ5ZWxsb3ciLCAiYmx1ZSJdCiAgICBjb2xv
        cnMuaW5zZXJ0QXQoNSwgIm9yYW5nZSIpOyAgLy8gRXJyb3I6IEluZGV4IG91
        dCBvZiByYW5nZQogICAgYGBgCgogICAgQG1ldGhvZCBpbnNlcnRBdAogICAg
        QHBhcmFtIHtOdW1iZXJ9IGlkeCBpbmRleCBvZiBpbnNlcnQgdGhlIG9iamVj
        dCBhdC4KICAgIEBwYXJhbSB7T2JqZWN0fSBvYmplY3Qgb2JqZWN0IHRvIGlu
        c2VydAogICAgQHJldHVybiB0aGlzCiAgKi8KICBpbnNlcnRBdDogZnVuY3Rp
        b24oaWR4LCBvYmplY3QpIHsKICAgIGlmIChpZHggPiBnZXQodGhpcywgJ2xl
        bmd0aCcpKSB0aHJvdyBuZXcgRW1iZXIuRXJyb3IoT1VUX09GX1JBTkdFX0VY
        Q0VQVElPTikgOwogICAgdGhpcy5yZXBsYWNlKGlkeCwgMCwgW29iamVjdF0p
        IDsKICAgIHJldHVybiB0aGlzIDsKICB9LAoKICAvKioKICAgIFJlbW92ZSBh
        biBvYmplY3QgYXQgdGhlIHNwZWNpZmllZCBpbmRleCB1c2luZyB0aGUgYHJl
        cGxhY2UoKWAgcHJpbWl0aXZlCiAgICBtZXRob2QuIFlvdSBjYW4gcGFzcyBl
        aXRoZXIgYSBzaW5nbGUgaW5kZXgsIG9yIGEgc3RhcnQgYW5kIGEgbGVuZ3Ro
        LgoKICAgIElmIHlvdSBwYXNzIGEgc3RhcnQgYW5kIGxlbmd0aCB0aGF0IGlz
        IGJleW9uZCB0aGUKICAgIGxlbmd0aCB0aGlzIG1ldGhvZCB3aWxsIHRocm93
        IGFuIGBPVVRfT0ZfUkFOR0VfRVhDRVBUSU9OYAoKICAgIGBgYGphdmFzY3Jp
        cHQKICAgIHZhciBjb2xvcnMgPSBbInJlZCIsICJncmVlbiIsICJibHVlIiwg
        InllbGxvdyIsICJvcmFuZ2UiXTsKICAgIGNvbG9ycy5yZW1vdmVBdCgwKTsg
        ICAgIC8vIFsiZ3JlZW4iLCAiYmx1ZSIsICJ5ZWxsb3ciLCAib3JhbmdlIl0K
        ICAgIGNvbG9ycy5yZW1vdmVBdCgyLCAyKTsgIC8vIFsiZ3JlZW4iLCAiYmx1
        ZSJdCiAgICBjb2xvcnMucmVtb3ZlQXQoNCwgMik7ICAvLyBFcnJvcjogSW5k
        ZXggb3V0IG9mIHJhbmdlCiAgICBgYGAKCiAgICBAbWV0aG9kIHJlbW92ZUF0
        CiAgICBAcGFyYW0ge051bWJlcn0gc3RhcnQgaW5kZXgsIHN0YXJ0IG9mIHJh
        bmdlCiAgICBAcGFyYW0ge051bWJlcn0gbGVuIGxlbmd0aCBvZiBwYXNzaW5n
        IHJhbmdlCiAgICBAcmV0dXJuIHtPYmplY3R9IHJlY2VpdmVyCiAgKi8KICBy
        ZW1vdmVBdDogZnVuY3Rpb24oc3RhcnQsIGxlbikgewogICAgaWYgKCdudW1i
        ZXInID09PSB0eXBlb2Ygc3RhcnQpIHsKCiAgICAgIGlmICgoc3RhcnQgPCAw
        KSB8fCAoc3RhcnQgPj0gZ2V0KHRoaXMsICdsZW5ndGgnKSkpIHsKICAgICAg
        ICB0aHJvdyBuZXcgRW1iZXIuRXJyb3IoT1VUX09GX1JBTkdFX0VYQ0VQVElP
        Tik7CiAgICAgIH0KCiAgICAgIC8vIGZhc3QgY2FzZQogICAgICBpZiAobGVu
        ID09PSB1bmRlZmluZWQpIGxlbiA9IDE7CiAgICAgIHRoaXMucmVwbGFjZShz
        dGFydCwgbGVuLCBFTVBUWSk7CiAgICB9CgogICAgcmV0dXJuIHRoaXMgOwog
        IH0sCgogIC8qKgogICAgUHVzaCB0aGUgb2JqZWN0IG9udG8gdGhlIGVuZCBv
        ZiB0aGUgYXJyYXkuIFdvcmtzIGp1c3QgbGlrZSBgcHVzaCgpYCBidXQgaXQK
        ICAgIGlzIEtWTy1jb21wbGlhbnQuCgogICAgYGBgamF2YXNjcmlwdAogICAg
        dmFyIGNvbG9ycyA9IFsicmVkIiwgImdyZWVuIiwgImJsdWUiXTsKICAgIGNv
        bG9ycy5wdXNoT2JqZWN0KCJibGFjayIpOyAgICAgICAgICAgICAgIC8vIFsi
        cmVkIiwgImdyZWVuIiwgImJsdWUiLCAiYmxhY2siXQogICAgY29sb3JzLnB1
        c2hPYmplY3QoWyJ5ZWxsb3ciLCAib3JhbmdlIl0pOyAgLy8gWyJyZWQiLCAi
        Z3JlZW4iLCAiYmx1ZSIsICJibGFjayIsIFsieWVsbG93IiwgIm9yYW5nZSJd
        XQogICAgYGBgCgogICAgQG1ldGhvZCBwdXNoT2JqZWN0CiAgICBAcGFyYW0g
        eyp9IG9iaiBvYmplY3QgdG8gcHVzaAogICAgQHJldHVybiB7Kn0gdGhlIHNh
        bWUgb2JqIHBhc3NlZCBhcyBwYXJhbQogICovCiAgcHVzaE9iamVjdDogZnVu
        Y3Rpb24ob2JqKSB7CiAgICB0aGlzLmluc2VydEF0KGdldCh0aGlzLCAnbGVu
        Z3RoJyksIG9iaikgOwogICAgcmV0dXJuIG9iaiA7CiAgfSwKCiAgLyoqCiAg
        ICBBZGQgdGhlIG9iamVjdHMgaW4gdGhlIHBhc3NlZCBudW1lcmFibGUgdG8g
        dGhlIGVuZCBvZiB0aGUgYXJyYXkuIERlZmVycwogICAgbm90aWZ5aW5nIG9i
        c2VydmVycyBvZiB0aGUgY2hhbmdlIHVudGlsIGFsbCBvYmplY3RzIGFyZSBh
        ZGRlZC4KCiAgICBgYGBqYXZhc2NyaXB0CiAgICB2YXIgY29sb3JzID0gWyJy
        ZWQiLCAiZ3JlZW4iLCAiYmx1ZSJdOwogICAgY29sb3JzLnB1c2hPYmplY3Rz
        KFsiYmxhY2siXSk7ICAgICAgICAgICAgICAgLy8gWyJyZWQiLCAiZ3JlZW4i
        LCAiYmx1ZSIsICJibGFjayJdCiAgICBjb2xvcnMucHVzaE9iamVjdHMoWyJ5
        ZWxsb3ciLCAib3JhbmdlIl0pOyAgLy8gWyJyZWQiLCAiZ3JlZW4iLCAiYmx1
        ZSIsICJibGFjayIsICJ5ZWxsb3ciLCAib3JhbmdlIl0KICAgIGBgYAoKICAg
        IEBtZXRob2QgcHVzaE9iamVjdHMKICAgIEBwYXJhbSB7RW1iZXIuRW51bWVy
        YWJsZX0gb2JqZWN0cyB0aGUgb2JqZWN0cyB0byBhZGQKICAgIEByZXR1cm4g
        e0VtYmVyLkFycmF5fSByZWNlaXZlcgogICovCiAgcHVzaE9iamVjdHM6IGZ1
        bmN0aW9uKG9iamVjdHMpIHsKICAgIGlmICghKEVtYmVyLkVudW1lcmFibGUu
        ZGV0ZWN0KG9iamVjdHMpIHx8IEVtYmVyLmlzQXJyYXkob2JqZWN0cykpKSB7
        CiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoIk11c3QgcGFzcyBFbWJlci5F
        bnVtZXJhYmxlIHRvIEVtYmVyLk11dGFibGVBcnJheSNwdXNoT2JqZWN0cyIp
        OwogICAgfQogICAgdGhpcy5yZXBsYWNlKGdldCh0aGlzLCAnbGVuZ3RoJyks
        IDAsIG9iamVjdHMpOwogICAgcmV0dXJuIHRoaXM7CiAgfSwKCiAgLyoqCiAg
        ICBQb3Agb2JqZWN0IGZyb20gYXJyYXkgb3IgbmlsIGlmIG5vbmUgYXJlIGxl
        ZnQuIFdvcmtzIGp1c3QgbGlrZSBgcG9wKClgIGJ1dAogICAgaXQgaXMgS1ZP
        LWNvbXBsaWFudC4KCiAgICBgYGBqYXZhc2NyaXB0CiAgICB2YXIgY29sb3Jz
        ID0gWyJyZWQiLCAiZ3JlZW4iLCAiYmx1ZSJdOwogICAgY29sb3JzLnBvcE9i
        amVjdCgpOyAgIC8vICJibHVlIgogICAgY29uc29sZS5sb2coY29sb3JzKTsg
        IC8vIFsicmVkIiwgImdyZWVuIl0KICAgIGBgYAoKICAgIEBtZXRob2QgcG9w
        T2JqZWN0CiAgICBAcmV0dXJuIG9iamVjdAogICovCiAgcG9wT2JqZWN0OiBm
        dW5jdGlvbigpIHsKICAgIHZhciBsZW4gPSBnZXQodGhpcywgJ2xlbmd0aCcp
        IDsKICAgIGlmIChsZW4gPT09IDApIHJldHVybiBudWxsIDsKCiAgICB2YXIg
        cmV0ID0gdGhpcy5vYmplY3RBdChsZW4tMSkgOwogICAgdGhpcy5yZW1vdmVB
        dChsZW4tMSwgMSkgOwogICAgcmV0dXJuIHJldCA7CiAgfSwKCiAgLyoqCiAg
        ICBTaGlmdCBhbiBvYmplY3QgZnJvbSBzdGFydCBvZiBhcnJheSBvciBuaWwg
        aWYgbm9uZSBhcmUgbGVmdC4gV29ya3MganVzdAogICAgbGlrZSBgc2hpZnQo
        KWAgYnV0IGl0IGlzIEtWTy1jb21wbGlhbnQuCgogICAgYGBgamF2YXNjcmlw
        dAogICAgdmFyIGNvbG9ycyA9IFsicmVkIiwgImdyZWVuIiwgImJsdWUiXTsK
        ICAgIGNvbG9ycy5zaGlmdE9iamVjdCgpOyAgLy8gInJlZCIKICAgIGNvbnNv
        bGUubG9nKGNvbG9ycyk7ICAgLy8gWyJncmVlbiIsICJibHVlIl0KICAgIGBg
        YAoKICAgIEBtZXRob2Qgc2hpZnRPYmplY3QKICAgIEByZXR1cm4gb2JqZWN0
        CiAgKi8KICBzaGlmdE9iamVjdDogZnVuY3Rpb24oKSB7CiAgICBpZiAoZ2V0
        KHRoaXMsICdsZW5ndGgnKSA9PT0gMCkgcmV0dXJuIG51bGwgOwogICAgdmFy
        IHJldCA9IHRoaXMub2JqZWN0QXQoMCkgOwogICAgdGhpcy5yZW1vdmVBdCgw
        KSA7CiAgICByZXR1cm4gcmV0IDsKICB9LAoKICAvKioKICAgIFVuc2hpZnQg
        YW4gb2JqZWN0IHRvIHN0YXJ0IG9mIGFycmF5LiBXb3JrcyBqdXN0IGxpa2Ug
        YHVuc2hpZnQoKWAgYnV0IGl0IGlzCiAgICBLVk8tY29tcGxpYW50LgoKICAg
        IGBgYGphdmFzY3JpcHQKICAgIHZhciBjb2xvcnMgPSBbInJlZCIsICJncmVl
        biIsICJibHVlIl07CiAgICBjb2xvcnMudW5zaGlmdE9iamVjdCgieWVsbG93
        Iik7ICAgICAgICAgICAgIC8vIFsieWVsbG93IiwgInJlZCIsICJncmVlbiIs
        ICJibHVlIl0KICAgIGNvbG9ycy51bnNoaWZ0T2JqZWN0KFsiYmxhY2siLCAi
        d2hpdGUiXSk7ICAgLy8gW1siYmxhY2siLCAid2hpdGUiXSwgInllbGxvdyIs
        ICJyZWQiLCAiZ3JlZW4iLCAiYmx1ZSJdCiAgICBgYGAKCiAgICBAbWV0aG9k
        IHVuc2hpZnRPYmplY3QKICAgIEBwYXJhbSB7Kn0gb2JqIG9iamVjdCB0byB1
        bnNoaWZ0CiAgICBAcmV0dXJuIHsqfSB0aGUgc2FtZSBvYmogcGFzc2VkIGFz
        IHBhcmFtCiAgKi8KICB1bnNoaWZ0T2JqZWN0OiBmdW5jdGlvbihvYmopIHsK
        ICAgIHRoaXMuaW5zZXJ0QXQoMCwgb2JqKSA7CiAgICByZXR1cm4gb2JqIDsK
        ICB9LAoKICAvKioKICAgIEFkZHMgdGhlIG5hbWVkIG9iamVjdHMgdG8gdGhl
        IGJlZ2lubmluZyBvZiB0aGUgYXJyYXkuIERlZmVycyBub3RpZnlpbmcKICAg
        IG9ic2VydmVycyB1bnRpbCBhbGwgb2JqZWN0cyBoYXZlIGJlZW4gYWRkZWQu
        CgogICAgYGBgamF2YXNjcmlwdAogICAgdmFyIGNvbG9ycyA9IFsicmVkIiwg
        ImdyZWVuIiwgImJsdWUiXTsKICAgIGNvbG9ycy51bnNoaWZ0T2JqZWN0cyhb
        ImJsYWNrIiwgIndoaXRlIl0pOyAgIC8vIFsiYmxhY2siLCAid2hpdGUiLCAi
        cmVkIiwgImdyZWVuIiwgImJsdWUiXQogICAgY29sb3JzLnVuc2hpZnRPYmpl
        Y3RzKCJ5ZWxsb3ciKTsgICAgICAgICAgICAgLy8gVHlwZSBFcnJvcjogJ3Vu
        ZGVmaW5lZCcgaXMgbm90IGEgZnVuY3Rpb24KICAgIGBgYAoKICAgIEBtZXRo
        b2QgdW5zaGlmdE9iamVjdHMKICAgIEBwYXJhbSB7RW1iZXIuRW51bWVyYWJs
        ZX0gb2JqZWN0cyB0aGUgb2JqZWN0cyB0byBhZGQKICAgIEByZXR1cm4ge0Vt
        YmVyLkFycmF5fSByZWNlaXZlcgogICovCiAgdW5zaGlmdE9iamVjdHM6IGZ1
        bmN0aW9uKG9iamVjdHMpIHsKICAgIHRoaXMucmVwbGFjZSgwLCAwLCBvYmpl
        Y3RzKTsKICAgIHJldHVybiB0aGlzOwogIH0sCgogIC8qKgogICAgUmV2ZXJz
        ZSBvYmplY3RzIGluIHRoZSBhcnJheS4gV29ya3MganVzdCBsaWtlIGByZXZl
        cnNlKClgIGJ1dCBpdCBpcwogICAgS1ZPLWNvbXBsaWFudC4KCiAgICBAbWV0
        aG9kIHJldmVyc2VPYmplY3RzCiAgICBAcmV0dXJuIHtFbWJlci5BcnJheX0g
        cmVjZWl2ZXIKICAgKi8KICByZXZlcnNlT2JqZWN0czogZnVuY3Rpb24oKSB7
        CiAgICB2YXIgbGVuID0gZ2V0KHRoaXMsICdsZW5ndGgnKTsKICAgIGlmIChs
        ZW4gPT09IDApIHJldHVybiB0aGlzOwogICAgdmFyIG9iamVjdHMgPSB0aGlz
        LnRvQXJyYXkoKS5yZXZlcnNlKCk7CiAgICB0aGlzLnJlcGxhY2UoMCwgbGVu
        LCBvYmplY3RzKTsKICAgIHJldHVybiB0aGlzOwogIH0sCgogIC8qKgogICAg
        UmVwbGFjZSBhbGwgdGhlIHRoZSByZWNlaXZlcidzIGNvbnRlbnQgd2l0aCBj
        b250ZW50IG9mIHRoZSBhcmd1bWVudC4KICAgIElmIGFyZ3VtZW50IGlzIGFu
        IGVtcHR5IGFycmF5IHJlY2VpdmVyIHdpbGwgYmUgY2xlYXJlZC4KCiAgICBg
        YGBqYXZhc2NyaXB0CiAgICB2YXIgY29sb3JzID0gWyJyZWQiLCAiZ3JlZW4i
        LCAiYmx1ZSJdOwogICAgY29sb3JzLnNldE9iamVjdHMoWyJibGFjayIsICJ3
        aGl0ZSJdKTsgIC8vIFsiYmxhY2siLCAid2hpdGUiXQogICAgY29sb3JzLnNl
        dE9iamVjdHMoW10pOyAgICAgICAgICAgICAgICAgIC8vIFtdCiAgICBgYGAK
        CiAgICBAbWV0aG9kIHNldE9iamVjdHMKICAgIEBwYXJhbSB7RW1iZXIuQXJy
        YXl9IG9iamVjdHMgYXJyYXkgd2hvc2UgY29udGVudCB3aWxsIGJlIHVzZWQg
        Zm9yIHJlcGxhY2luZwogICAgICAgIHRoZSBjb250ZW50IG9mIHRoZSByZWNl
        aXZlcgogICAgQHJldHVybiB7RW1iZXIuQXJyYXl9IHJlY2VpdmVyIHdpdGgg
        dGhlIG5ldyBjb250ZW50CiAgICovCiAgc2V0T2JqZWN0czogZnVuY3Rpb24o
        b2JqZWN0cykgewogICAgaWYgKG9iamVjdHMubGVuZ3RoID09PSAwKSByZXR1
        cm4gdGhpcy5jbGVhcigpOwoKICAgIHZhciBsZW4gPSBnZXQodGhpcywgJ2xl
        bmd0aCcpOwogICAgdGhpcy5yZXBsYWNlKDAsIGxlbiwgb2JqZWN0cyk7CiAg
        ICByZXR1cm4gdGhpczsKICB9LAoKICAvLyAuLi4uLi4uLi4uLi4uLi4uLi4u
        Li4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uCiAgLy8g
        SU1QTEVNRU5UIEVtYmVyLk11dGFibGVFbnVtZXJhYmxlCiAgLy8KCiAgcmVt
        b3ZlT2JqZWN0OiBmdW5jdGlvbihvYmopIHsKICAgIHZhciBsb2MgPSBnZXQo
        dGhpcywgJ2xlbmd0aCcpIHx8IDA7CiAgICB3aGlsZSgtLWxvYyA+PSAwKSB7
        CiAgICAgIHZhciBjdXJPYmplY3QgPSB0aGlzLm9iamVjdEF0KGxvYykgOwog
        ICAgICBpZiAoY3VyT2JqZWN0ID09PSBvYmopIHRoaXMucmVtb3ZlQXQobG9j
        KSA7CiAgICB9CiAgICByZXR1cm4gdGhpcyA7CiAgfSwKCiAgYWRkT2JqZWN0
        OiBmdW5jdGlvbihvYmopIHsKICAgIGlmICghdGhpcy5jb250YWlucyhvYmop
        KSB0aGlzLnB1c2hPYmplY3Qob2JqKTsKICAgIHJldHVybiB0aGlzIDsKICB9
        Cgp9KTsKCn0pKCk7CgoKCihmdW5jdGlvbigpIHsKLyoqCkBtb2R1bGUgZW1i
        ZXIKQHN1Ym1vZHVsZSBlbWJlci1ydW50aW1lCiovCgp2YXIgZ2V0ID0gRW1i
        ZXIuZ2V0LAogICAgc2V0ID0gRW1iZXIuc2V0LAogICAgc2xpY2UgPSBBcnJh
        eS5wcm90b3R5cGUuc2xpY2UsCiAgICBnZXRQcm9wZXJ0aWVzID0gRW1iZXIu
        Z2V0UHJvcGVydGllczsKCi8qKgogICMjIE92ZXJ2aWV3CgogIFRoaXMgbWl4
        aW4gcHJvdmlkZXMgcHJvcGVydGllcyBhbmQgcHJvcGVydHkgb2JzZXJ2aW5n
        IGZ1bmN0aW9uYWxpdHksIGNvcmUKICBmZWF0dXJlcyBvZiB0aGUgRW1iZXIg
        b2JqZWN0IG1vZGVsLgoKICBQcm9wZXJ0aWVzIGFuZCBvYnNlcnZlcnMgYWxs
        b3cgb25lIG9iamVjdCB0byBvYnNlcnZlIGNoYW5nZXMgdG8gYQogIHByb3Bl
        cnR5IG9uIGFub3RoZXIgb2JqZWN0LiBUaGlzIGlzIG9uZSBvZiB0aGUgZnVu
        ZGFtZW50YWwgd2F5cyB0aGF0CiAgbW9kZWxzLCBjb250cm9sbGVycyBhbmQg
        dmlld3MgY29tbXVuaWNhdGUgd2l0aCBlYWNoIG90aGVyIGluIGFuIEVtYmVy
        CiAgYXBwbGljYXRpb24uCgogIEFueSBvYmplY3QgdGhhdCBoYXMgdGhpcyBt
        aXhpbiBhcHBsaWVkIGNhbiBiZSB1c2VkIGluIG9ic2VydmVyCiAgb3BlcmF0
        aW9ucy4gVGhhdCBpbmNsdWRlcyBgRW1iZXIuT2JqZWN0YCBhbmQgbW9zdCBv
        YmplY3RzIHlvdSB3aWxsCiAgaW50ZXJhY3Qgd2l0aCBhcyB5b3Ugd3JpdGUg
        eW91ciBFbWJlciBhcHBsaWNhdGlvbi4KCiAgTm90ZSB0aGF0IHlvdSB3aWxs
        IG5vdCBnZW5lcmFsbHkgYXBwbHkgdGhpcyBtaXhpbiB0byBjbGFzc2VzIHlv
        dXJzZWxmLAogIGJ1dCB5b3Ugd2lsbCB1c2UgdGhlIGZlYXR1cmVzIHByb3Zp
        ZGVkIGJ5IHRoaXMgbW9kdWxlIGZyZXF1ZW50bHksIHNvIGl0CiAgaXMgaW1w
        b3J0YW50IHRvIHVuZGVyc3RhbmQgaG93IHRvIHVzZSBpdC4KCiAgIyMgVXNp
        bmcgYGdldCgpYCBhbmQgYHNldCgpYAoKICBCZWNhdXNlIG9mIEVtYmVyJ3Mg
        c3VwcG9ydCBmb3IgYmluZGluZ3MgYW5kIG9ic2VydmVycywgeW91IHdpbGwg
        YWx3YXlzCiAgYWNjZXNzIHByb3BlcnRpZXMgdXNpbmcgdGhlIGdldCBtZXRo
        b2QsIGFuZCBzZXQgcHJvcGVydGllcyB1c2luZyB0aGUKICBzZXQgbWV0aG9k
        LiBUaGlzIGFsbG93cyB0aGUgb2JzZXJ2aW5nIG9iamVjdHMgdG8gYmUgbm90
        aWZpZWQgYW5kCiAgY29tcHV0ZWQgcHJvcGVydGllcyB0byBiZSBoYW5kbGVk
        IHByb3Blcmx5LgoKICBNb3JlIGRvY3VtZW50YXRpb24gYWJvdXQgYGdldGAg
        YW5kIGBzZXRgIGFyZSBiZWxvdy4KCiAgIyMgT2JzZXJ2aW5nIFByb3BlcnR5
        IENoYW5nZXMKCiAgWW91IHR5cGljYWxseSBvYnNlcnZlIHByb3BlcnR5IGNo
        YW5nZXMgc2ltcGx5IGJ5IGFkZGluZyB0aGUgYG9ic2VydmVzYAogIGNhbGwg
        dG8gdGhlIGVuZCBvZiB5b3VyIG1ldGhvZCBkZWNsYXJhdGlvbnMgaW4gY2xh
        c3NlcyB0aGF0IHlvdSB3cml0ZS4KICBGb3IgZXhhbXBsZToKCiAgYGBgamF2
        YXNjcmlwdAogIEVtYmVyLk9iamVjdC5leHRlbmQoewogICAgdmFsdWVPYnNl
        cnZlcjogZnVuY3Rpb24oKSB7CiAgICAgIC8vIEV4ZWN1dGVzIHdoZW5ldmVy
        IHRoZSAidmFsdWUiIHByb3BlcnR5IGNoYW5nZXMKICAgIH0ub2JzZXJ2ZXMo
        J3ZhbHVlJykKICB9KTsKICBgYGAKCiAgQWx0aG91Z2ggdGhpcyBpcyB0aGUg
        bW9zdCBjb21tb24gd2F5IHRvIGFkZCBhbiBvYnNlcnZlciwgdGhpcyBjYXBh
        YmlsaXR5CiAgaXMgYWN0dWFsbHkgYnVpbHQgaW50byB0aGUgYEVtYmVyLk9i
        amVjdGAgY2xhc3Mgb24gdG9wIG9mIHR3byBtZXRob2RzCiAgZGVmaW5lZCBp
        biB0aGlzIG1peGluOiBgYWRkT2JzZXJ2ZXJgIGFuZCBgcmVtb3ZlT2JzZXJ2
        ZXJgLiBZb3UgY2FuIHVzZQogIHRoZXNlIHR3byBtZXRob2RzIHRvIGFkZCBh
        bmQgcmVtb3ZlIG9ic2VydmVycyB5b3Vyc2VsZiBpZiB5b3UgbmVlZCB0bwog
        IGRvIHNvIGF0IHJ1bnRpbWUuCgogIFRvIGFkZCBhbiBvYnNlcnZlciBmb3Ig
        YSBwcm9wZXJ0eSwgY2FsbDoKCiAgYGBgamF2YXNjcmlwdAogIG9iamVjdC5h
        ZGRPYnNlcnZlcigncHJvcGVydHlLZXknLCB0YXJnZXRPYmplY3QsIHRhcmdl
        dEFjdGlvbikKICBgYGAKCiAgVGhpcyB3aWxsIGNhbGwgdGhlIGB0YXJnZXRB
        Y3Rpb25gIG1ldGhvZCBvbiB0aGUgYHRhcmdldE9iamVjdGAgd2hlbmV2ZXIK
        ICB0aGUgdmFsdWUgb2YgdGhlIGBwcm9wZXJ0eUtleWAgY2hhbmdlcy4KCiAg
        Tm90ZSB0aGF0IGlmIGBwcm9wZXJ0eUtleWAgaXMgYSBjb21wdXRlZCBwcm9w
        ZXJ0eSwgdGhlIG9ic2VydmVyIHdpbGwgYmUKICBjYWxsZWQgd2hlbiBhbnkg
        b2YgdGhlIHByb3BlcnR5IGRlcGVuZGVuY2llcyBhcmUgY2hhbmdlZCwgZXZl
        biBpZiB0aGUKICByZXN1bHRpbmcgdmFsdWUgb2YgdGhlIGNvbXB1dGVkIHBy
        b3BlcnR5IGlzIHVuY2hhbmdlZC4gVGhpcyBpcyBuZWNlc3NhcnkKICBiZWNh
        dXNlIGNvbXB1dGVkIHByb3BlcnRpZXMgYXJlIG5vdCBjb21wdXRlZCB1bnRp
        bCBgZ2V0YCBpcyBjYWxsZWQuCgogIEBjbGFzcyBPYnNlcnZhYmxlCiAgQG5h
        bWVzcGFjZSBFbWJlcgoqLwpFbWJlci5PYnNlcnZhYmxlID0gRW1iZXIuTWl4
        aW4uY3JlYXRlKHsKCiAgLyoqCiAgICBSZXRyaWV2ZXMgdGhlIHZhbHVlIG9m
        IGEgcHJvcGVydHkgZnJvbSB0aGUgb2JqZWN0LgoKICAgIFRoaXMgbWV0aG9k
        IGlzIHVzdWFsbHkgc2ltaWxhciB0byB1c2luZyBgb2JqZWN0W2tleU5hbWVd
        YCBvciBgb2JqZWN0LmtleU5hbWVgLAogICAgaG93ZXZlciBpdCBzdXBwb3J0
        cyBib3RoIGNvbXB1dGVkIHByb3BlcnRpZXMgYW5kIHRoZSB1bmtub3duUHJv
        cGVydHkKICAgIGhhbmRsZXIuCgogICAgQmVjYXVzZSBgZ2V0YCB1bmlmaWVz
        IHRoZSBzeW50YXggZm9yIGFjY2Vzc2luZyBhbGwgdGhlc2Uga2luZHMKICAg
        IG9mIHByb3BlcnRpZXMsIGl0IGNhbiBtYWtlIG1hbnkgcmVmYWN0b3Jpbmdz
        IGVhc2llciwgc3VjaCBhcyByZXBsYWNpbmcgYQogICAgc2ltcGxlIHByb3Bl
        cnR5IHdpdGggYSBjb21wdXRlZCBwcm9wZXJ0eSwgb3IgdmljZSB2ZXJzYS4K
        CiAgICAjIyMgQ29tcHV0ZWQgUHJvcGVydGllcwoKICAgIENvbXB1dGVkIHBy
        b3BlcnRpZXMgYXJlIG1ldGhvZHMgZGVmaW5lZCB3aXRoIHRoZSBgcHJvcGVy
        dHlgIG1vZGlmaWVyCiAgICBkZWNsYXJlZCBhdCB0aGUgZW5kLCBzdWNoIGFz
        OgoKICAgIGBgYGphdmFzY3JpcHQKICAgIGZ1bGxOYW1lOiBmdW5jdGlvbigp
        IHsKICAgICAgcmV0dXJuIHRoaXMuZ2V0KCdmaXJzdE5hbWUnKSArICcgJyAr
        IHRoaXMuZ2V0KCdsYXN0TmFtZScpOwogICAgfS5wcm9wZXJ0eSgnZmlyc3RO
        YW1lJywgJ2xhc3ROYW1lJykKICAgIGBgYAoKICAgIFdoZW4geW91IGNhbGwg
        YGdldGAgb24gYSBjb21wdXRlZCBwcm9wZXJ0eSwgdGhlIGZ1bmN0aW9uIHdp
        bGwgYmUKICAgIGNhbGxlZCBhbmQgdGhlIHJldHVybiB2YWx1ZSB3aWxsIGJl
        IHJldHVybmVkIGluc3RlYWQgb2YgdGhlIGZ1bmN0aW9uCiAgICBpdHNlbGYu
        CgogICAgIyMjIFVua25vd24gUHJvcGVydGllcwoKICAgIExpa2V3aXNlLCBp
        ZiB5b3UgdHJ5IHRvIGNhbGwgYGdldGAgb24gYSBwcm9wZXJ0eSB3aG9zZSB2
        YWx1ZSBpcwogICAgYHVuZGVmaW5lZGAsIHRoZSBgdW5rbm93blByb3BlcnR5
        KClgIG1ldGhvZCB3aWxsIGJlIGNhbGxlZCBvbiB0aGUgb2JqZWN0LgogICAg
        SWYgdGhpcyBtZXRob2QgcmV0dXJucyBhbnkgdmFsdWUgb3RoZXIgdGhhbiBg
        dW5kZWZpbmVkYCwgaXQgd2lsbCBiZSByZXR1cm5lZAogICAgaW5zdGVhZC4g
        VGhpcyBhbGxvd3MgeW91IHRvIGltcGxlbWVudCAidmlydHVhbCIgcHJvcGVy
        dGllcyB0aGF0IGFyZQogICAgbm90IGRlZmluZWQgdXBmcm9udC4KCiAgICBA
        bWV0aG9kIGdldAogICAgQHBhcmFtIHtTdHJpbmd9IGtleU5hbWUgVGhlIHBy
        b3BlcnR5IHRvIHJldHJpZXZlCiAgICBAcmV0dXJuIHtPYmplY3R9IFRoZSBw
        cm9wZXJ0eSB2YWx1ZSBvciB1bmRlZmluZWQuCiAgKi8KICBnZXQ6IGZ1bmN0
        aW9uKGtleU5hbWUpIHsKICAgIHJldHVybiBnZXQodGhpcywga2V5TmFtZSk7
        CiAgfSwKCiAgLyoqCiAgICBUbyBnZXQgbXVsdGlwbGUgcHJvcGVydGllcyBh
        dCBvbmNlLCBjYWxsIGBnZXRQcm9wZXJ0aWVzYAogICAgd2l0aCBhIGxpc3Qg
        b2Ygc3RyaW5ncyBvciBhbiBhcnJheToKCiAgICBgYGBqYXZhc2NyaXB0CiAg
        ICByZWNvcmQuZ2V0UHJvcGVydGllcygnZmlyc3ROYW1lJywgJ2xhc3ROYW1l
        JywgJ3ppcENvZGUnKTsgIC8vIHsgZmlyc3ROYW1lOiAnSm9obicsIGxhc3RO
        YW1lOiAnRG9lJywgemlwQ29kZTogJzEwMDExJyB9CiAgICBgYGAKCiAgICBp
        cyBlcXVpdmFsZW50IHRvOgoKICAgIGBgYGphdmFzY3JpcHQKICAgIHJlY29y
        ZC5nZXRQcm9wZXJ0aWVzKFsnZmlyc3ROYW1lJywgJ2xhc3ROYW1lJywgJ3pp
        cENvZGUnXSk7ICAvLyB7IGZpcnN0TmFtZTogJ0pvaG4nLCBsYXN0TmFtZTog
        J0RvZScsIHppcENvZGU6ICcxMDAxMScgfQogICAgYGBgCgogICAgQG1ldGhv
        ZCBnZXRQcm9wZXJ0aWVzCiAgICBAcGFyYW0ge1N0cmluZy4uLnxBcnJheX0g
        bGlzdCBvZiBrZXlzIHRvIGdldAogICAgQHJldHVybiB7SGFzaH0KICAqLwog
        IGdldFByb3BlcnRpZXM6IGZ1bmN0aW9uKCkgewogICAgcmV0dXJuIGdldFBy
        b3BlcnRpZXMuYXBwbHkobnVsbCwgW3RoaXNdLmNvbmNhdChzbGljZS5jYWxs
        KGFyZ3VtZW50cykpKTsKICB9LAoKICAvKioKICAgIFNldHMgdGhlIHByb3Zp
        ZGVkIGtleSBvciBwYXRoIHRvIHRoZSB2YWx1ZS4KCiAgICBUaGlzIG1ldGhv
        ZCBpcyBnZW5lcmFsbHkgdmVyeSBzaW1pbGFyIHRvIGNhbGxpbmcgYG9iamVj
        dFtrZXldID0gdmFsdWVgIG9yCiAgICBgb2JqZWN0LmtleSA9IHZhbHVlYCwg
        ZXhjZXB0IHRoYXQgaXQgcHJvdmlkZXMgc3VwcG9ydCBmb3IgY29tcHV0ZWQK
        ICAgIHByb3BlcnRpZXMsIHRoZSBgc2V0VW5rbm93blByb3BlcnR5KClgIG1l
        dGhvZCBhbmQgcHJvcGVydHkgb2JzZXJ2ZXJzLgoKICAgICMjIyBDb21wdXRl
        ZCBQcm9wZXJ0aWVzCgogICAgSWYgeW91IHRyeSB0byBzZXQgYSB2YWx1ZSBv
        biBhIGtleSB0aGF0IGhhcyBhIGNvbXB1dGVkIHByb3BlcnR5IGhhbmRsZXIK
        ICAgIGRlZmluZWQgKHNlZSB0aGUgYGdldCgpYCBtZXRob2QgZm9yIGFuIGV4
        YW1wbGUpLCB0aGVuIGBzZXQoKWAgd2lsbCBjYWxsCiAgICB0aGF0IG1ldGhv
        ZCwgcGFzc2luZyBib3RoIHRoZSB2YWx1ZSBhbmQga2V5IGluc3RlYWQgb2Yg
        c2ltcGx5IGNoYW5naW5nCiAgICB0aGUgdmFsdWUgaXRzZWxmLiBUaGlzIGlz
        IHVzZWZ1bCBmb3IgdGhvc2UgdGltZXMgd2hlbiB5b3UgbmVlZCB0bwogICAg
        aW1wbGVtZW50IGEgcHJvcGVydHkgdGhhdCBpcyBjb21wb3NlZCBvZiBvbmUg
        b3IgbW9yZSBtZW1iZXIKICAgIHByb3BlcnRpZXMuCgogICAgIyMjIFVua25v
        d24gUHJvcGVydGllcwoKICAgIElmIHlvdSB0cnkgdG8gc2V0IGEgdmFsdWUg
        b24gYSBrZXkgdGhhdCBpcyB1bmRlZmluZWQgaW4gdGhlIHRhcmdldAogICAg
        b2JqZWN0LCB0aGVuIHRoZSBgc2V0VW5rbm93blByb3BlcnR5KClgIGhhbmRs
        ZXIgd2lsbCBiZSBjYWxsZWQgaW5zdGVhZC4gVGhpcwogICAgZ2l2ZXMgeW91
        IGFuIG9wcG9ydHVuaXR5IHRvIGltcGxlbWVudCBjb21wbGV4ICJ2aXJ0dWFs
        IiBwcm9wZXJ0aWVzIHRoYXQKICAgIGFyZSBub3QgcHJlZGVmaW5lZCBvbiB0
        aGUgb2JqZWN0LiBJZiBgc2V0VW5rbm93blByb3BlcnR5KClgIHJldHVybnMK
        ICAgIHVuZGVmaW5lZCwgdGhlbiBgc2V0KClgIHdpbGwgc2ltcGx5IHNldCB0
        aGUgdmFsdWUgb24gdGhlIG9iamVjdC4KCiAgICAjIyMgUHJvcGVydHkgT2Jz
        ZXJ2ZXJzCgogICAgSW4gYWRkaXRpb24gdG8gY2hhbmdpbmcgdGhlIHByb3Bl
        cnR5LCBgc2V0KClgIHdpbGwgYWxzbyByZWdpc3RlciBhIHByb3BlcnR5CiAg
        ICBjaGFuZ2Ugd2l0aCB0aGUgb2JqZWN0LiBVbmxlc3MgeW91IGhhdmUgcGxh
        Y2VkIHRoaXMgY2FsbCBpbnNpZGUgb2YgYQogICAgYGJlZ2luUHJvcGVydHlD
        aGFuZ2VzKClgIGFuZCBgZW5kUHJvcGVydHlDaGFuZ2VzKCksYCBhbnkgImxv
        Y2FsIiBvYnNlcnZlcnMKICAgIChpLmUuIG9ic2VydmVyIG1ldGhvZHMgZGVj
        bGFyZWQgb24gdGhlIHNhbWUgb2JqZWN0KSwgd2lsbCBiZSBjYWxsZWQKICAg
        IGltbWVkaWF0ZWx5LiBBbnkgInJlbW90ZSIgb2JzZXJ2ZXJzIChpLmUuIG9i
        c2VydmVyIG1ldGhvZHMgZGVjbGFyZWQgb24KICAgIGFub3RoZXIgb2JqZWN0
        KSB3aWxsIGJlIHBsYWNlZCBpbiBhIHF1ZXVlIGFuZCBjYWxsZWQgYXQgYSBs
        YXRlciB0aW1lIGluIGEKICAgIGNvYWxlc2NlZCBtYW5uZXIuCgogICAgIyMj
        IENoYWluaW5nCgogICAgSW4gYWRkaXRpb24gdG8gcHJvcGVydHkgY2hhbmdl
        cywgYHNldCgpYCByZXR1cm5zIHRoZSB2YWx1ZSBvZiB0aGUgb2JqZWN0CiAg
        ICBpdHNlbGYgc28geW91IGNhbiBkbyBjaGFpbmluZyBsaWtlIHRoaXM6Cgog
        ICAgYGBgamF2YXNjcmlwdAogICAgcmVjb3JkLnNldCgnZmlyc3ROYW1lJywg
        J0NoYXJsZXMnKS5zZXQoJ2xhc3ROYW1lJywgJ0pvbGxleScpOwogICAgYGBg
        CgogICAgQG1ldGhvZCBzZXQKICAgIEBwYXJhbSB7U3RyaW5nfSBrZXlOYW1l
        IFRoZSBwcm9wZXJ0eSB0byBzZXQKICAgIEBwYXJhbSB7T2JqZWN0fSB2YWx1
        ZSBUaGUgdmFsdWUgdG8gc2V0IG9yIGBudWxsYC4KICAgIEByZXR1cm4ge0Vt
        YmVyLk9ic2VydmFibGV9CiAgKi8KICBzZXQ6IGZ1bmN0aW9uKGtleU5hbWUs
        IHZhbHVlKSB7CiAgICBzZXQodGhpcywga2V5TmFtZSwgdmFsdWUpOwogICAg
        cmV0dXJuIHRoaXM7CiAgfSwKCiAgLyoqCiAgICBUbyBzZXQgbXVsdGlwbGUg
        cHJvcGVydGllcyBhdCBvbmNlLCBjYWxsIGBzZXRQcm9wZXJ0aWVzYAogICAg
        d2l0aCBhIEhhc2g6CgogICAgYGBgamF2YXNjcmlwdAogICAgcmVjb3JkLnNl
        dFByb3BlcnRpZXMoeyBmaXJzdE5hbWU6ICdDaGFybGVzJywgbGFzdE5hbWU6
        ICdKb2xsZXknIH0pOwogICAgYGBgCgogICAgQG1ldGhvZCBzZXRQcm9wZXJ0
        aWVzCiAgICBAcGFyYW0ge0hhc2h9IGhhc2ggdGhlIGhhc2ggb2Yga2V5cyBh
        bmQgdmFsdWVzIHRvIHNldAogICAgQHJldHVybiB7RW1iZXIuT2JzZXJ2YWJs
        ZX0KICAqLwogIHNldFByb3BlcnRpZXM6IGZ1bmN0aW9uKGhhc2gpIHsKICAg
        IHJldHVybiBFbWJlci5zZXRQcm9wZXJ0aWVzKHRoaXMsIGhhc2gpOwogIH0s
        CgogIC8qKgogICAgQmVnaW5zIGEgZ3JvdXBpbmcgb2YgcHJvcGVydHkgY2hh
        bmdlcy4KCiAgICBZb3UgY2FuIHVzZSB0aGlzIG1ldGhvZCB0byBncm91cCBw
        cm9wZXJ0eSBjaGFuZ2VzIHNvIHRoYXQgbm90aWZpY2F0aW9ucwogICAgd2ls
        bCBub3QgYmUgc2VudCB1bnRpbCB0aGUgY2hhbmdlcyBhcmUgZmluaXNoZWQu
        IElmIHlvdSBwbGFuIHRvIG1ha2UgYQogICAgbGFyZ2UgbnVtYmVyIG9mIGNo
        YW5nZXMgdG8gYW4gb2JqZWN0IGF0IG9uZSB0aW1lLCB5b3Ugc2hvdWxkIGNh
        bGwgdGhpcwogICAgbWV0aG9kIGF0IHRoZSBiZWdpbm5pbmcgb2YgdGhlIGNo
        YW5nZXMgdG8gYmVnaW4gZGVmZXJyaW5nIGNoYW5nZQogICAgbm90aWZpY2F0
        aW9ucy4gV2hlbiB5b3UgYXJlIGRvbmUgbWFraW5nIGNoYW5nZXMsIGNhbGwK
        ICAgIGBlbmRQcm9wZXJ0eUNoYW5nZXMoKWAgdG8gZGVsaXZlciB0aGUgZGVm
        ZXJyZWQgY2hhbmdlIG5vdGlmaWNhdGlvbnMgYW5kIGVuZAogICAgZGVmZXJy
        aW5nLgoKICAgIEBtZXRob2QgYmVnaW5Qcm9wZXJ0eUNoYW5nZXMKICAgIEBy
        ZXR1cm4ge0VtYmVyLk9ic2VydmFibGV9CiAgKi8KICBiZWdpblByb3BlcnR5
        Q2hhbmdlczogZnVuY3Rpb24oKSB7CiAgICBFbWJlci5iZWdpblByb3BlcnR5
        Q2hhbmdlcygpOwogICAgcmV0dXJuIHRoaXM7CiAgfSwKCiAgLyoqCiAgICBF
        bmRzIGEgZ3JvdXBpbmcgb2YgcHJvcGVydHkgY2hhbmdlcy4KCiAgICBZb3Ug
        Y2FuIHVzZSB0aGlzIG1ldGhvZCB0byBncm91cCBwcm9wZXJ0eSBjaGFuZ2Vz
        IHNvIHRoYXQgbm90aWZpY2F0aW9ucwogICAgd2lsbCBub3QgYmUgc2VudCB1
        bnRpbCB0aGUgY2hhbmdlcyBhcmUgZmluaXNoZWQuIElmIHlvdSBwbGFuIHRv
        IG1ha2UgYQogICAgbGFyZ2UgbnVtYmVyIG9mIGNoYW5nZXMgdG8gYW4gb2Jq
        ZWN0IGF0IG9uZSB0aW1lLCB5b3Ugc2hvdWxkIGNhbGwKICAgIGBiZWdpblBy
        b3BlcnR5Q2hhbmdlcygpYCBhdCB0aGUgYmVnaW5uaW5nIG9mIHRoZSBjaGFu
        Z2VzIHRvIGRlZmVyIGNoYW5nZQogICAgbm90aWZpY2F0aW9ucy4gV2hlbiB5
        b3UgYXJlIGRvbmUgbWFraW5nIGNoYW5nZXMsIGNhbGwgdGhpcyBtZXRob2Qg
        dG8KICAgIGRlbGl2ZXIgdGhlIGRlZmVycmVkIGNoYW5nZSBub3RpZmljYXRp
        b25zIGFuZCBlbmQgZGVmZXJyaW5nLgoKICAgIEBtZXRob2QgZW5kUHJvcGVy
        dHlDaGFuZ2VzCiAgICBAcmV0dXJuIHtFbWJlci5PYnNlcnZhYmxlfQogICov
        CiAgZW5kUHJvcGVydHlDaGFuZ2VzOiBmdW5jdGlvbigpIHsKICAgIEVtYmVy
        LmVuZFByb3BlcnR5Q2hhbmdlcygpOwogICAgcmV0dXJuIHRoaXM7CiAgfSwK
        CiAgLyoqCiAgICBOb3RpZnkgdGhlIG9ic2VydmVyIHN5c3RlbSB0aGF0IGEg
        cHJvcGVydHkgaXMgYWJvdXQgdG8gY2hhbmdlLgoKICAgIFNvbWV0aW1lcyB5
        b3UgbmVlZCB0byBjaGFuZ2UgYSB2YWx1ZSBkaXJlY3RseSBvciBpbmRpcmVj
        dGx5IHdpdGhvdXQKICAgIGFjdHVhbGx5IGNhbGxpbmcgYGdldCgpYCBvciBg
        c2V0KClgIG9uIGl0LiBJbiB0aGlzIGNhc2UsIHlvdSBjYW4gdXNlIHRoaXMK
        ICAgIG1ldGhvZCBhbmQgYHByb3BlcnR5RGlkQ2hhbmdlKClgIGluc3RlYWQu
        IENhbGxpbmcgdGhlc2UgdHdvIG1ldGhvZHMKICAgIHRvZ2V0aGVyIHdpbGwg
        bm90aWZ5IGFsbCBvYnNlcnZlcnMgdGhhdCB0aGUgcHJvcGVydHkgaGFzIHBv
        dGVudGlhbGx5CiAgICBjaGFuZ2VkIHZhbHVlLgoKICAgIE5vdGUgdGhhdCB5
        b3UgbXVzdCBhbHdheXMgY2FsbCBgcHJvcGVydHlXaWxsQ2hhbmdlYCBhbmQg
        YHByb3BlcnR5RGlkQ2hhbmdlYAogICAgYXMgYSBwYWlyLiBJZiB5b3UgZG8g
        bm90LCBpdCBtYXkgZ2V0IHRoZSBwcm9wZXJ0eSBjaGFuZ2UgZ3JvdXBzIG91
        dCBvZgogICAgb3JkZXIgYW5kIGNhdXNlIG5vdGlmaWNhdGlvbnMgdG8gYmUg
        ZGVsaXZlcmVkIG1vcmUgb2Z0ZW4gdGhhbiB5b3Ugd291bGQKICAgIGxpa2Uu
        CgogICAgQG1ldGhvZCBwcm9wZXJ0eVdpbGxDaGFuZ2UKICAgIEBwYXJhbSB7
        U3RyaW5nfSBrZXlOYW1lIFRoZSBwcm9wZXJ0eSBrZXkgdGhhdCBpcyBhYm91
        dCB0byBjaGFuZ2UuCiAgICBAcmV0dXJuIHtFbWJlci5PYnNlcnZhYmxlfQog
        ICovCiAgcHJvcGVydHlXaWxsQ2hhbmdlOiBmdW5jdGlvbihrZXlOYW1lKSB7
        CiAgICBFbWJlci5wcm9wZXJ0eVdpbGxDaGFuZ2UodGhpcywga2V5TmFtZSk7
        CiAgICByZXR1cm4gdGhpczsKICB9LAoKICAvKioKICAgIE5vdGlmeSB0aGUg
        b2JzZXJ2ZXIgc3lzdGVtIHRoYXQgYSBwcm9wZXJ0eSBoYXMganVzdCBjaGFu
        Z2VkLgoKICAgIFNvbWV0aW1lcyB5b3UgbmVlZCB0byBjaGFuZ2UgYSB2YWx1
        ZSBkaXJlY3RseSBvciBpbmRpcmVjdGx5IHdpdGhvdXQKICAgIGFjdHVhbGx5
        IGNhbGxpbmcgYGdldCgpYCBvciBgc2V0KClgIG9uIGl0LiBJbiB0aGlzIGNh
        c2UsIHlvdSBjYW4gdXNlIHRoaXMKICAgIG1ldGhvZCBhbmQgYHByb3BlcnR5
        V2lsbENoYW5nZSgpYCBpbnN0ZWFkLiBDYWxsaW5nIHRoZXNlIHR3byBtZXRo
        b2RzCiAgICB0b2dldGhlciB3aWxsIG5vdGlmeSBhbGwgb2JzZXJ2ZXJzIHRo
        YXQgdGhlIHByb3BlcnR5IGhhcyBwb3RlbnRpYWxseQogICAgY2hhbmdlZCB2
        YWx1ZS4KCiAgICBOb3RlIHRoYXQgeW91IG11c3QgYWx3YXlzIGNhbGwgYHBy
        b3BlcnR5V2lsbENoYW5nZWAgYW5kIGBwcm9wZXJ0eURpZENoYW5nZWAKICAg
        IGFzIGEgcGFpci4gSWYgeW91IGRvIG5vdCwgaXQgbWF5IGdldCB0aGUgcHJv
        cGVydHkgY2hhbmdlIGdyb3VwcyBvdXQgb2YKICAgIG9yZGVyIGFuZCBjYXVz
        ZSBub3RpZmljYXRpb25zIHRvIGJlIGRlbGl2ZXJlZCBtb3JlIG9mdGVuIHRo
        YW4geW91IHdvdWxkCiAgICBsaWtlLgoKICAgIEBtZXRob2QgcHJvcGVydHlE
        aWRDaGFuZ2UKICAgIEBwYXJhbSB7U3RyaW5nfSBrZXlOYW1lIFRoZSBwcm9w
        ZXJ0eSBrZXkgdGhhdCBoYXMganVzdCBjaGFuZ2VkLgogICAgQHJldHVybiB7
        RW1iZXIuT2JzZXJ2YWJsZX0KICAqLwogIHByb3BlcnR5RGlkQ2hhbmdlOiBm
        dW5jdGlvbihrZXlOYW1lKSB7CiAgICBFbWJlci5wcm9wZXJ0eURpZENoYW5n
        ZSh0aGlzLCBrZXlOYW1lKTsKICAgIHJldHVybiB0aGlzOwogIH0sCgogIC8q
        KgogICAgQ29udmVuaWVuY2UgbWV0aG9kIHRvIGNhbGwgYHByb3BlcnR5V2ls
        bENoYW5nZWAgYW5kIGBwcm9wZXJ0eURpZENoYW5nZWAgaW4KICAgIHN1Y2Nl
        c3Npb24uCgogICAgQG1ldGhvZCBub3RpZnlQcm9wZXJ0eUNoYW5nZQogICAg
        QHBhcmFtIHtTdHJpbmd9IGtleU5hbWUgVGhlIHByb3BlcnR5IGtleSB0byBi
        ZSBub3RpZmllZCBhYm91dC4KICAgIEByZXR1cm4ge0VtYmVyLk9ic2VydmFi
        bGV9CiAgKi8KICBub3RpZnlQcm9wZXJ0eUNoYW5nZTogZnVuY3Rpb24oa2V5
        TmFtZSkgewogICAgdGhpcy5wcm9wZXJ0eVdpbGxDaGFuZ2Uoa2V5TmFtZSk7
        CiAgICB0aGlzLnByb3BlcnR5RGlkQ2hhbmdlKGtleU5hbWUpOwogICAgcmV0
        dXJuIHRoaXM7CiAgfSwKCiAgYWRkQmVmb3JlT2JzZXJ2ZXI6IGZ1bmN0aW9u
        KGtleSwgdGFyZ2V0LCBtZXRob2QpIHsKICAgIEVtYmVyLmFkZEJlZm9yZU9i
        c2VydmVyKHRoaXMsIGtleSwgdGFyZ2V0LCBtZXRob2QpOwogIH0sCgogIC8q
        KgogICAgQWRkcyBhbiBvYnNlcnZlciBvbiBhIHByb3BlcnR5LgoKICAgIFRo
        aXMgaXMgdGhlIGNvcmUgbWV0aG9kIHVzZWQgdG8gcmVnaXN0ZXIgYW4gb2Jz
        ZXJ2ZXIgZm9yIGEgcHJvcGVydHkuCgogICAgT25jZSB5b3UgY2FsbCB0aGlz
        IG1ldGhvZCwgYW55IHRpbWUgdGhlIGtleSdzIHZhbHVlIGlzIHNldCwgeW91
        ciBvYnNlcnZlcgogICAgd2lsbCBiZSBub3RpZmllZC4gTm90ZSB0aGF0IHRo
        ZSBvYnNlcnZlcnMgYXJlIHRyaWdnZXJlZCBhbnkgdGltZSB0aGUKICAgIHZh
        bHVlIGlzIHNldCwgcmVnYXJkbGVzcyBvZiB3aGV0aGVyIGl0IGhhcyBhY3R1
        YWxseSBjaGFuZ2VkLiBZb3VyCiAgICBvYnNlcnZlciBzaG91bGQgYmUgcHJl
        cGFyZWQgdG8gaGFuZGxlIHRoYXQuCgogICAgWW91IGNhbiBhbHNvIHBhc3Mg
        YW4gb3B0aW9uYWwgY29udGV4dCBwYXJhbWV0ZXIgdG8gdGhpcyBtZXRob2Qu
        IFRoZQogICAgY29udGV4dCB3aWxsIGJlIHBhc3NlZCB0byB5b3VyIG9ic2Vy
        dmVyIG1ldGhvZCB3aGVuZXZlciBpdCBpcyB0cmlnZ2VyZWQuCiAgICBOb3Rl
        IHRoYXQgaWYgeW91IGFkZCB0aGUgc2FtZSB0YXJnZXQvbWV0aG9kIHBhaXIg
        b24gYSBrZXkgbXVsdGlwbGUgdGltZXMKICAgIHdpdGggZGlmZmVyZW50IGNv
        bnRleHQgcGFyYW1ldGVycywgeW91ciBvYnNlcnZlciB3aWxsIG9ubHkgYmUg
        Y2FsbGVkIG9uY2UKICAgIHdpdGggdGhlIGxhc3QgY29udGV4dCB5b3UgcGFz
        c2VkLgoKICAgICMjIyBPYnNlcnZlciBNZXRob2RzCgogICAgT2JzZXJ2ZXIg
        bWV0aG9kcyB5b3UgcGFzcyBzaG91bGQgZ2VuZXJhbGx5IGhhdmUgdGhlIGZv
        bGxvd2luZyBzaWduYXR1cmUgaWYKICAgIHlvdSBkbyBub3QgcGFzcyBhIGBj
        b250ZXh0YCBwYXJhbWV0ZXI6CgogICAgYGBgamF2YXNjcmlwdAogICAgZm9v
        RGlkQ2hhbmdlOiBmdW5jdGlvbihzZW5kZXIsIGtleSwgdmFsdWUsIHJldikg
        eyB9OwogICAgYGBgCgogICAgVGhlIHNlbmRlciBpcyB0aGUgb2JqZWN0IHRo
        YXQgY2hhbmdlZC4gVGhlIGtleSBpcyB0aGUgcHJvcGVydHkgdGhhdAogICAg
        Y2hhbmdlcy4gVGhlIHZhbHVlIHByb3BlcnR5IGlzIGN1cnJlbnRseSByZXNl
        cnZlZCBhbmQgdW51c2VkLiBUaGUgcmV2CiAgICBpcyB0aGUgbGFzdCBwcm9w
        ZXJ0eSByZXZpc2lvbiBvZiB0aGUgb2JqZWN0IHdoZW4gaXQgY2hhbmdlZCwg
        d2hpY2ggeW91IGNhbgogICAgdXNlIHRvIGRldGVjdCBpZiB0aGUga2V5IHZh
        bHVlIGhhcyByZWFsbHkgY2hhbmdlZCBvciBub3QuCgogICAgSWYgeW91IHBh
        c3MgYSBgY29udGV4dGAgcGFyYW1ldGVyLCB0aGUgY29udGV4dCB3aWxsIGJl
        IHBhc3NlZCBiZWZvcmUgdGhlCiAgICByZXZpc2lvbiBsaWtlIHNvOgoKICAg
        IGBgYGphdmFzY3JpcHQKICAgIGZvb0RpZENoYW5nZTogZnVuY3Rpb24oc2Vu
        ZGVyLCBrZXksIHZhbHVlLCBjb250ZXh0LCByZXYpIHsgfTsKICAgIGBgYAoK
        ICAgIFVzdWFsbHkgeW91IHdpbGwgbm90IG5lZWQgdGhlIHZhbHVlLCBjb250
        ZXh0IG9yIHJldmlzaW9uIHBhcmFtZXRlcnMgYXQKICAgIHRoZSBlbmQuIElu
        IHRoaXMgY2FzZSwgaXQgaXMgY29tbW9uIHRvIHdyaXRlIG9ic2VydmVyIG1l
        dGhvZHMgdGhhdCB0YWtlCiAgICBvbmx5IGEgc2VuZGVyIGFuZCBrZXkgdmFs
        dWUgYXMgcGFyYW1ldGVycyBvciwgaWYgeW91IGFyZW4ndCBpbnRlcmVzdGVk
        IGluCiAgICBhbnkgb2YgdGhlc2UgdmFsdWVzLCB0byB3cml0ZSBhbiBvYnNl
        cnZlciB0aGF0IGhhcyBubyBwYXJhbWV0ZXJzIGF0IGFsbC4KCiAgICBAbWV0
        aG9kIGFkZE9ic2VydmVyCiAgICBAcGFyYW0ge1N0cmluZ30ga2V5IFRoZSBr
        ZXkgdG8gb2JzZXJ2ZXIKICAgIEBwYXJhbSB7T2JqZWN0fSB0YXJnZXQgVGhl
        IHRhcmdldCBvYmplY3QgdG8gaW52b2tlCiAgICBAcGFyYW0ge1N0cmluZ3xG
        dW5jdGlvbn0gbWV0aG9kIFRoZSBtZXRob2QgdG8gaW52b2tlLgogICAgQHJl
        dHVybiB7RW1iZXIuT2JqZWN0fSBzZWxmCiAgKi8KICBhZGRPYnNlcnZlcjog
        ZnVuY3Rpb24oa2V5LCB0YXJnZXQsIG1ldGhvZCkgewogICAgRW1iZXIuYWRk
        T2JzZXJ2ZXIodGhpcywga2V5LCB0YXJnZXQsIG1ldGhvZCk7CiAgfSwKCiAg
        LyoqCiAgICBSZW1vdmUgYW4gb2JzZXJ2ZXIgeW91IGhhdmUgcHJldmlvdXNs
        eSByZWdpc3RlcmVkIG9uIHRoaXMgb2JqZWN0LiBQYXNzCiAgICB0aGUgc2Ft
        ZSBrZXksIHRhcmdldCwgYW5kIG1ldGhvZCB5b3UgcGFzc2VkIHRvIGBhZGRP
        YnNlcnZlcigpYCBhbmQgeW91cgogICAgdGFyZ2V0IHdpbGwgbm8gbG9uZ2Vy
        IHJlY2VpdmUgbm90aWZpY2F0aW9ucy4KCiAgICBAbWV0aG9kIHJlbW92ZU9i
        c2VydmVyCiAgICBAcGFyYW0ge1N0cmluZ30ga2V5IFRoZSBrZXkgdG8gb2Jz
        ZXJ2ZXIKICAgIEBwYXJhbSB7T2JqZWN0fSB0YXJnZXQgVGhlIHRhcmdldCBv
        YmplY3QgdG8gaW52b2tlCiAgICBAcGFyYW0ge1N0cmluZ3xGdW5jdGlvbn0g
        bWV0aG9kIFRoZSBtZXRob2QgdG8gaW52b2tlLgogICAgQHJldHVybiB7RW1i
        ZXIuT2JzZXJ2YWJsZX0gcmVjZWl2ZXIKICAqLwogIHJlbW92ZU9ic2VydmVy
        OiBmdW5jdGlvbihrZXksIHRhcmdldCwgbWV0aG9kKSB7CiAgICBFbWJlci5y
        ZW1vdmVPYnNlcnZlcih0aGlzLCBrZXksIHRhcmdldCwgbWV0aG9kKTsKICB9
        LAoKICAvKioKICAgIFJldHVybnMgYHRydWVgIGlmIHRoZSBvYmplY3QgY3Vy
        cmVudGx5IGhhcyBvYnNlcnZlcnMgcmVnaXN0ZXJlZCBmb3IgYQogICAgcGFy
        dGljdWxhciBrZXkuIFlvdSBjYW4gdXNlIHRoaXMgbWV0aG9kIHRvIHBvdGVu
        dGlhbGx5IGRlZmVyIHBlcmZvcm1pbmcKICAgIGFuIGV4cGVuc2l2ZSBhY3Rp
        b24gdW50aWwgc29tZW9uZSBiZWdpbnMgb2JzZXJ2aW5nIGEgcGFydGljdWxh
        ciBwcm9wZXJ0eQogICAgb24gdGhlIG9iamVjdC4KCiAgICBAbWV0aG9kIGhh
        c09ic2VydmVyRm9yCiAgICBAcGFyYW0ge1N0cmluZ30ga2V5IEtleSB0byBj
        aGVjawogICAgQHJldHVybiB7Qm9vbGVhbn0KICAqLwogIGhhc09ic2VydmVy
        Rm9yOiBmdW5jdGlvbihrZXkpIHsKICAgIHJldHVybiBFbWJlci5oYXNMaXN0
        ZW5lcnModGhpcywga2V5Kyc6Y2hhbmdlJyk7CiAgfSwKCiAgLyoqCiAgICBS
        ZXRyaWV2ZXMgdGhlIHZhbHVlIG9mIGEgcHJvcGVydHksIG9yIGEgZGVmYXVs
        dCB2YWx1ZSBpbiB0aGUgY2FzZSB0aGF0IHRoZQogICAgcHJvcGVydHkgcmV0
        dXJucyBgdW5kZWZpbmVkYC4KCiAgICBgYGBqYXZhc2NyaXB0CiAgICBwZXJz
        b24uZ2V0V2l0aERlZmF1bHQoJ2xhc3ROYW1lJywgJ0RvZScpOwogICAgYGBg
        CgogICAgQG1ldGhvZCBnZXRXaXRoRGVmYXVsdAogICAgQHBhcmFtIHtTdHJp
        bmd9IGtleU5hbWUgVGhlIG5hbWUgb2YgdGhlIHByb3BlcnR5IHRvIHJldHJp
        ZXZlCiAgICBAcGFyYW0ge09iamVjdH0gZGVmYXVsdFZhbHVlIFRoZSB2YWx1
        ZSB0byByZXR1cm4gaWYgdGhlIHByb3BlcnR5IHZhbHVlIGlzIHVuZGVmaW5l
        ZAogICAgQHJldHVybiB7T2JqZWN0fSBUaGUgcHJvcGVydHkgdmFsdWUgb3Ig
        dGhlIGRlZmF1bHRWYWx1ZS4KICAqLwogIGdldFdpdGhEZWZhdWx0OiBmdW5j
        dGlvbihrZXlOYW1lLCBkZWZhdWx0VmFsdWUpIHsKICAgIHJldHVybiBFbWJl
        ci5nZXRXaXRoRGVmYXVsdCh0aGlzLCBrZXlOYW1lLCBkZWZhdWx0VmFsdWUp
        OwogIH0sCgogIC8qKgogICAgU2V0IHRoZSB2YWx1ZSBvZiBhIHByb3BlcnR5
        IHRvIHRoZSBjdXJyZW50IHZhbHVlIHBsdXMgc29tZSBhbW91bnQuCgogICAg
        YGBgamF2YXNjcmlwdAogICAgcGVyc29uLmluY3JlbWVudFByb3BlcnR5KCdh
        Z2UnKTsKICAgIHRlYW0uaW5jcmVtZW50UHJvcGVydHkoJ3Njb3JlJywgMik7
        CiAgICBgYGAKCiAgICBAbWV0aG9kIGluY3JlbWVudFByb3BlcnR5CiAgICBA
        cGFyYW0ge1N0cmluZ30ga2V5TmFtZSBUaGUgbmFtZSBvZiB0aGUgcHJvcGVy
        dHkgdG8gaW5jcmVtZW50CiAgICBAcGFyYW0ge051bWJlcn0gaW5jcmVtZW50
        IFRoZSBhbW91bnQgdG8gaW5jcmVtZW50IGJ5LiBEZWZhdWx0cyB0byAxCiAg
        ICBAcmV0dXJuIHtOdW1iZXJ9IFRoZSBuZXcgcHJvcGVydHkgdmFsdWUKICAq
        LwogIGluY3JlbWVudFByb3BlcnR5OiBmdW5jdGlvbihrZXlOYW1lLCBpbmNy
        ZW1lbnQpIHsKICAgIGlmIChFbWJlci5pc05vbmUoaW5jcmVtZW50KSkgeyBp
        bmNyZW1lbnQgPSAxOyB9CiAgICBFbWJlci5hc3NlcnQoIk11c3QgcGFzcyBh
        IG51bWVyaWMgdmFsdWUgdG8gaW5jcmVtZW50UHJvcGVydHkiLCAoIWlzTmFO
        KHBhcnNlRmxvYXQoaW5jcmVtZW50KSkgJiYgaXNGaW5pdGUoaW5jcmVtZW50
        KSkpOwogICAgc2V0KHRoaXMsIGtleU5hbWUsIChnZXQodGhpcywga2V5TmFt
        ZSkgfHwgMCkgKyBpbmNyZW1lbnQpOwogICAgcmV0dXJuIGdldCh0aGlzLCBr
        ZXlOYW1lKTsKICB9LAoKICAvKioKICAgIFNldCB0aGUgdmFsdWUgb2YgYSBw
        cm9wZXJ0eSB0byB0aGUgY3VycmVudCB2YWx1ZSBtaW51cyBzb21lIGFtb3Vu
        dC4KCiAgICBgYGBqYXZhc2NyaXB0CiAgICBwbGF5ZXIuZGVjcmVtZW50UHJv
        cGVydHkoJ2xpdmVzJyk7CiAgICBvcmMuZGVjcmVtZW50UHJvcGVydHkoJ2hl
        YWx0aCcsIDUpOwogICAgYGBgCgogICAgQG1ldGhvZCBkZWNyZW1lbnRQcm9w
        ZXJ0eQogICAgQHBhcmFtIHtTdHJpbmd9IGtleU5hbWUgVGhlIG5hbWUgb2Yg
        dGhlIHByb3BlcnR5IHRvIGRlY3JlbWVudAogICAgQHBhcmFtIHtOdW1iZXJ9
        IGRlY3JlbWVudCBUaGUgYW1vdW50IHRvIGRlY3JlbWVudCBieS4gRGVmYXVs
        dHMgdG8gMQogICAgQHJldHVybiB7TnVtYmVyfSBUaGUgbmV3IHByb3BlcnR5
        IHZhbHVlCiAgKi8KICBkZWNyZW1lbnRQcm9wZXJ0eTogZnVuY3Rpb24oa2V5
        TmFtZSwgZGVjcmVtZW50KSB7CiAgICBpZiAoRW1iZXIuaXNOb25lKGRlY3Jl
        bWVudCkpIHsgZGVjcmVtZW50ID0gMTsgfQogICAgRW1iZXIuYXNzZXJ0KCJN
        dXN0IHBhc3MgYSBudW1lcmljIHZhbHVlIHRvIGRlY3JlbWVudFByb3BlcnR5
        IiwgKCFpc05hTihwYXJzZUZsb2F0KGRlY3JlbWVudCkpICYmIGlzRmluaXRl
        KGRlY3JlbWVudCkpKTsKICAgIHNldCh0aGlzLCBrZXlOYW1lLCAoZ2V0KHRo
        aXMsIGtleU5hbWUpIHx8IDApIC0gZGVjcmVtZW50KTsKICAgIHJldHVybiBn
        ZXQodGhpcywga2V5TmFtZSk7CiAgfSwKCiAgLyoqCiAgICBTZXQgdGhlIHZh
        bHVlIG9mIGEgYm9vbGVhbiBwcm9wZXJ0eSB0byB0aGUgb3Bwb3NpdGUgb2Yg
        aXQncwogICAgY3VycmVudCB2YWx1ZS4KCiAgICBgYGBqYXZhc2NyaXB0CiAg
        ICBzdGFyc2hpcC50b2dnbGVQcm9wZXJ0eSgnd2FycERyaXZlRW5nYWdlZCcp
        OwogICAgYGBgCgogICAgQG1ldGhvZCB0b2dnbGVQcm9wZXJ0eQogICAgQHBh
        cmFtIHtTdHJpbmd9IGtleU5hbWUgVGhlIG5hbWUgb2YgdGhlIHByb3BlcnR5
        IHRvIHRvZ2dsZQogICAgQHJldHVybiB7T2JqZWN0fSBUaGUgbmV3IHByb3Bl
        cnR5IHZhbHVlCiAgKi8KICB0b2dnbGVQcm9wZXJ0eTogZnVuY3Rpb24oa2V5
        TmFtZSkgewogICAgc2V0KHRoaXMsIGtleU5hbWUsICFnZXQodGhpcywga2V5
        TmFtZSkpOwogICAgcmV0dXJuIGdldCh0aGlzLCBrZXlOYW1lKTsKICB9LAoK
        ICAvKioKICAgIFJldHVybnMgdGhlIGNhY2hlZCB2YWx1ZSBvZiBhIGNvbXB1
        dGVkIHByb3BlcnR5LCBpZiBpdCBleGlzdHMuCiAgICBUaGlzIGFsbG93cyB5
        b3UgdG8gaW5zcGVjdCB0aGUgdmFsdWUgb2YgYSBjb21wdXRlZCBwcm9wZXJ0
        eQogICAgd2l0aG91dCBhY2NpZGVudGFsbHkgaW52b2tpbmcgaXQgaWYgaXQg
        aXMgaW50ZW5kZWQgdG8gYmUKICAgIGdlbmVyYXRlZCBsYXppbHkuCgogICAg
        QG1ldGhvZCBjYWNoZUZvcgogICAgQHBhcmFtIHtTdHJpbmd9IGtleU5hbWUK
        ICAgIEByZXR1cm4ge09iamVjdH0gVGhlIGNhY2hlZCB2YWx1ZSBvZiB0aGUg
        Y29tcHV0ZWQgcHJvcGVydHksIGlmIGFueQogICovCiAgY2FjaGVGb3I6IGZ1
        bmN0aW9uKGtleU5hbWUpIHsKICAgIHJldHVybiBFbWJlci5jYWNoZUZvcih0
        aGlzLCBrZXlOYW1lKTsKICB9LAoKICAvLyBpbnRlbmRlZCBmb3IgZGVidWdn
        aW5nIHB1cnBvc2VzCiAgb2JzZXJ2ZXJzRm9yS2V5OiBmdW5jdGlvbihrZXlO
        YW1lKSB7CiAgICByZXR1cm4gRW1iZXIub2JzZXJ2ZXJzRm9yKHRoaXMsIGtl
        eU5hbWUpOwogIH0KfSk7Cgp9KSgpOwoKCgooZnVuY3Rpb24oKSB7Ci8qKgpA
        bW9kdWxlIGVtYmVyCkBzdWJtb2R1bGUgZW1iZXItcnVudGltZQoqLwoKdmFy
        IGdldCA9IEVtYmVyLmdldCwgc2V0ID0gRW1iZXIuc2V0OwoKLyoqCmBFbWJl
        ci5UYXJnZXRBY3Rpb25TdXBwb3J0YCBpcyBhIG1peGluIHRoYXQgY2FuIGJl
        IGluY2x1ZGVkIGluIGEgY2xhc3MKdG8gYWRkIGEgYHRyaWdnZXJBY3Rpb25g
        IG1ldGhvZCB3aXRoIHNlbWFudGljcyBzaW1pbGFyIHRvIHRoZSBIYW5kbGVi
        YXJzCmB7e2FjdGlvbn19YCBoZWxwZXIuIEluIG5vcm1hbCBFbWJlciB1c2Fn
        ZSwgdGhlIGB7e2FjdGlvbn19YCBoZWxwZXIgaXMKdXN1YWxseSB0aGUgYmVz
        dCBjaG9pY2UuIFRoaXMgbWl4aW4gaXMgbW9zdCBvZnRlbiB1c2VmdWwgd2hl
        biB5b3UgYXJlCmRvaW5nIG1vcmUgY29tcGxleCBldmVudCBoYW5kbGluZyBp
        biBWaWV3IG9iamVjdHMuCgpTZWUgYWxzbyBgRW1iZXIuVmlld1RhcmdldEFj
        dGlvblN1cHBvcnRgLCB3aGljaCBoYXMKdmlldy1hd2FyZSBkZWZhdWx0cyBm
        b3IgdGFyZ2V0IGFuZCBhY3Rpb25Db250ZXh0LgoKQGNsYXNzIFRhcmdldEFj
        dGlvblN1cHBvcnQKQG5hbWVzcGFjZSBFbWJlcgpAZXh0ZW5kcyBFbWJlci5N
        aXhpbgoqLwpFbWJlci5UYXJnZXRBY3Rpb25TdXBwb3J0ID0gRW1iZXIuTWl4
        aW4uY3JlYXRlKHsKICB0YXJnZXQ6IG51bGwsCiAgYWN0aW9uOiBudWxsLAog
        IGFjdGlvbkNvbnRleHQ6IG51bGwsCgogIHRhcmdldE9iamVjdDogRW1iZXIu
        Y29tcHV0ZWQoZnVuY3Rpb24oKSB7CiAgICB2YXIgdGFyZ2V0ID0gZ2V0KHRo
        aXMsICd0YXJnZXQnKTsKCiAgICBpZiAoRW1iZXIudHlwZU9mKHRhcmdldCkg
        PT09ICJzdHJpbmciKSB7CiAgICAgIHZhciB2YWx1ZSA9IGdldCh0aGlzLCB0
        YXJnZXQpOwogICAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkgeyB2YWx1
        ZSA9IGdldChFbWJlci5sb29rdXAsIHRhcmdldCk7IH0KICAgICAgcmV0dXJu
        IHZhbHVlOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIHRhcmdldDsKICAg
        IH0KICB9KS5wcm9wZXJ0eSgndGFyZ2V0JyksCgogIGFjdGlvbkNvbnRleHRP
        YmplY3Q6IEVtYmVyLmNvbXB1dGVkKGZ1bmN0aW9uKCkgewogICAgdmFyIGFj
        dGlvbkNvbnRleHQgPSBnZXQodGhpcywgJ2FjdGlvbkNvbnRleHQnKTsKCiAg
        ICBpZiAoRW1iZXIudHlwZU9mKGFjdGlvbkNvbnRleHQpID09PSAic3RyaW5n
        IikgewogICAgICB2YXIgdmFsdWUgPSBnZXQodGhpcywgYWN0aW9uQ29udGV4
        dCk7CiAgICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7IHZhbHVlID0g
        Z2V0KEVtYmVyLmxvb2t1cCwgYWN0aW9uQ29udGV4dCk7IH0KICAgICAgcmV0
        dXJuIHZhbHVlOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIGFjdGlvbkNv
        bnRleHQ7CiAgICB9CiAgfSkucHJvcGVydHkoJ2FjdGlvbkNvbnRleHQnKSwK
        CiAgLyoqCiAgU2VuZCBhbiAiYWN0aW9uIiB3aXRoIGFuICJhY3Rpb25Db250
        ZXh0IiB0byBhICJ0YXJnZXQiLiBUaGUgYWN0aW9uLCBhY3Rpb25Db250ZXh0
        CiAgYW5kIHRhcmdldCB3aWxsIGJlIHJldHJpZXZlZCBmcm9tIHByb3BlcnRp
        ZXMgb2YgdGhlIG9iamVjdC4gRm9yIGV4YW1wbGU6CgogIGBgYGphdmFzY3Jp
        cHQKICBBcHAuU2F2ZUJ1dHRvblZpZXcgPSBFbWJlci5WaWV3LmV4dGVuZChF
        bWJlci5UYXJnZXRBY3Rpb25TdXBwb3J0LCB7CiAgICB0YXJnZXQ6IEVtYmVy
        LmNvbXB1dGVkLmFsaWFzKCdjb250cm9sbGVyJyksCiAgICBhY3Rpb246ICdz
        YXZlJywKICAgIGFjdGlvbkNvbnRleHQ6IEVtYmVyLmNvbXB1dGVkLmFsaWFz
        KCdjb250ZXh0JyksCiAgICBjbGljazogZnVuY3Rpb24oKSB7CiAgICAgIHRo
        aXMudHJpZ2dlckFjdGlvbigpOyAvLyBTZW5kcyB0aGUgYHNhdmVgIGFjdGlv
        biwgYWxvbmcgd2l0aCB0aGUgY3VycmVudCBjb250ZXh0CiAgICAgICAgICAg
        ICAgICAgICAgICAgICAgICAvLyB0byB0aGUgY3VycmVudCBjb250cm9sbGVy
        CiAgICB9CiAgfSk7CiAgYGBgCgogIFRoZSBgdGFyZ2V0YCwgYGFjdGlvbmAs
        IGFuZCBgYWN0aW9uQ29udGV4dGAgY2FuIGJlIHByb3ZpZGVkIGFzIHByb3Bl
        cnRpZXMgb2YKICBhbiBvcHRpb25hbCBvYmplY3QgYXJndW1lbnQgdG8gYHRy
        aWdnZXJBY3Rpb25gIGFzIHdlbGwuCgogIGBgYGphdmFzY3JpcHQKICBBcHAu
        U2F2ZUJ1dHRvblZpZXcgPSBFbWJlci5WaWV3LmV4dGVuZChFbWJlci5UYXJn
        ZXRBY3Rpb25TdXBwb3J0LCB7CiAgICBjbGljazogZnVuY3Rpb24oKSB7CiAg
        ICAgIHRoaXMudHJpZ2dlckFjdGlvbih7CiAgICAgICAgYWN0aW9uOiAnc2F2
        ZScsCiAgICAgICAgdGFyZ2V0OiB0aGlzLmdldCgnY29udHJvbGxlcicpLAog
        ICAgICAgIGFjdGlvbkNvbnRleHQ6IHRoaXMuZ2V0KCdjb250ZXh0JyksCiAg
        ICAgIH0pOyAvLyBTZW5kcyB0aGUgYHNhdmVgIGFjdGlvbiwgYWxvbmcgd2l0
        aCB0aGUgY3VycmVudCBjb250ZXh0CiAgICAgICAgICAvLyB0byB0aGUgY3Vy
        cmVudCBjb250cm9sbGVyCiAgICB9CiAgfSk7CiAgYGBgCgogIFRoZSBgYWN0
        aW9uQ29udGV4dGAgZGVmYXVsdHMgdG8gdGhlIG9iamVjdCB5b3UgbWl4aW5n
        IGBUYXJnZXRBY3Rpb25TdXBwb3J0YCBpbnRvLgogIEJ1dCBgdGFyZ2V0YCBh
        bmQgYGFjdGlvbmAgbXVzdCBiZSBzcGVjaWZpZWQgZWl0aGVyIGFzIHByb3Bl
        cnRpZXMgb3Igd2l0aCB0aGUgYXJndW1lbnQKICB0byBgdHJpZ2dlckFjdGlv
        bmAsIG9yIGEgY29tYmluYXRpb246CgogIGBgYGphdmFzY3JpcHQKICBBcHAu
        U2F2ZUJ1dHRvblZpZXcgPSBFbWJlci5WaWV3LmV4dGVuZChFbWJlci5UYXJn
        ZXRBY3Rpb25TdXBwb3J0LCB7CiAgICB0YXJnZXQ6IEVtYmVyLmNvbXB1dGVk
        LmFsaWFzKCdjb250cm9sbGVyJyksCiAgICBjbGljazogZnVuY3Rpb24oKSB7
        CiAgICAgIHRoaXMudHJpZ2dlckFjdGlvbih7CiAgICAgICAgYWN0aW9uOiAn
        c2F2ZScKICAgICAgfSk7IC8vIFNlbmRzIHRoZSBgc2F2ZWAgYWN0aW9uLCBh
        bG9uZyB3aXRoIGEgcmVmZXJlbmNlIHRvIGB0aGlzYCwKICAgICAgICAgIC8v
        IHRvIHRoZSBjdXJyZW50IGNvbnRyb2xsZXIKICAgIH0KICB9KTsKICBgYGAK
        CiAgQG1ldGhvZCB0cmlnZ2VyQWN0aW9uCiAgQHBhcmFtIG9wdHMge0hhc2h9
        IChvcHRpb25hbCwgd2l0aCB0aGUgb3B0aW9uYWwga2V5cyBhY3Rpb24sIHRh
        cmdldCBhbmQvb3IgYWN0aW9uQ29udGV4dCkKICBAcmV0dXJuIHtCb29sZWFu
        fSB0cnVlIGlmIHRoZSBhY3Rpb24gd2FzIHNlbnQgc3VjY2Vzc2Z1bGx5IGFu
        ZCBkaWQgbm90IHJldHVybiBmYWxzZQogICovCiAgdHJpZ2dlckFjdGlvbjog
        ZnVuY3Rpb24ob3B0cykgewogICAgb3B0cyA9IG9wdHMgfHwge307CiAgICB2
        YXIgYWN0aW9uID0gb3B0cy5hY3Rpb24gfHwgZ2V0KHRoaXMsICdhY3Rpb24n
        KSwKICAgICAgICB0YXJnZXQgPSBvcHRzLnRhcmdldCB8fCBnZXQodGhpcywg
        J3RhcmdldE9iamVjdCcpLAogICAgICAgIGFjdGlvbkNvbnRleHQgPSBvcHRz
        LmFjdGlvbkNvbnRleHQ7CgogICAgZnVuY3Rpb24gYXJncyhvcHRpb25zLCBh
        Y3Rpb25OYW1lKSB7CiAgICAgIHZhciByZXQgPSBbXTsKICAgICAgaWYgKGFj
        dGlvbk5hbWUpIHsgcmV0LnB1c2goYWN0aW9uTmFtZSk7IH0KCiAgICAgIHJl
        dHVybiByZXQuY29uY2F0KG9wdGlvbnMpOwogICAgfQoKICAgIGlmICh0eXBl
        b2YgYWN0aW9uQ29udGV4dCA9PT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgYWN0
        aW9uQ29udGV4dCA9IGdldCh0aGlzLCAnYWN0aW9uQ29udGV4dE9iamVjdCcp
        IHx8IHRoaXM7CiAgICB9CgogICAgaWYgKHRhcmdldCAmJiBhY3Rpb24pIHsK
        ICAgICAgdmFyIHJldDsKCiAgICAgIGlmICh0YXJnZXQuc2VuZCkgewogICAg
        ICAgIHJldCA9IHRhcmdldC5zZW5kLmFwcGx5KHRhcmdldCwgYXJncyhhY3Rp
        b25Db250ZXh0LCBhY3Rpb24pKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBF
        bWJlci5hc3NlcnQoIlRoZSBhY3Rpb24gJyIgKyBhY3Rpb24gKyAiJyBkaWQg
        bm90IGV4aXN0IG9uICIgKyB0YXJnZXQsIHR5cGVvZiB0YXJnZXRbYWN0aW9u
        XSA9PT0gJ2Z1bmN0aW9uJyk7CiAgICAgICAgcmV0ID0gdGFyZ2V0W2FjdGlv
        bl0uYXBwbHkodGFyZ2V0LCBhcmdzKGFjdGlvbkNvbnRleHQpKTsKICAgICAg
        fQoKICAgICAgaWYgKHJldCAhPT0gZmFsc2UpIHJldCA9IHRydWU7CgogICAg
        ICByZXR1cm4gcmV0OwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIGZhbHNl
        OwogICAgfQogIH0KfSk7Cgp9KSgpOwoKCgooZnVuY3Rpb24oKSB7Ci8qKgpA
        bW9kdWxlIGVtYmVyCkBzdWJtb2R1bGUgZW1iZXItcnVudGltZQoqLwoKLyoq
        CiAgVGhpcyBtaXhpbiBhbGxvd3MgZm9yIEVtYmVyIG9iamVjdHMgdG8gc3Vi
        c2NyaWJlIHRvIGFuZCBlbWl0IGV2ZW50cy4KCiAgYGBgamF2YXNjcmlwdAog
        IEFwcC5QZXJzb24gPSBFbWJlci5PYmplY3QuZXh0ZW5kKEVtYmVyLkV2ZW50
        ZWQsIHsKICAgIGdyZWV0OiBmdW5jdGlvbigpIHsKICAgICAgLy8gLi4uCiAg
        ICAgIHRoaXMudHJpZ2dlcignZ3JlZXQnKTsKICAgIH0KICB9KTsKCiAgdmFy
        IHBlcnNvbiA9IEFwcC5QZXJzb24uY3JlYXRlKCk7CgogIHBlcnNvbi5vbign
        Z3JlZXQnLCBmdW5jdGlvbigpIHsKICAgIGNvbnNvbGUubG9nKCdPdXIgcGVy
        c29uIGhhcyBncmVldGVkJyk7CiAgfSk7CgogIHBlcnNvbi5ncmVldCgpOwoK
        ICAvLyBvdXRwdXRzOiAnT3VyIHBlcnNvbiBoYXMgZ3JlZXRlZCcKICBgYGAK
        CiAgWW91IGNhbiBhbHNvIGNoYWluIG11bHRpcGxlIGV2ZW50IHN1YnNjcmlw
        dGlvbnM6CgogIGBgYGphdmFzY3JpcHQKICBwZXJzb24ub24oJ2dyZWV0Jywg
        ZnVuY3Rpb24oKSB7CiAgICBjb25zb2xlLmxvZygnT3VyIHBlcnNvbiBoYXMg
        Z3JlZXRlZCcpOwogIH0pLm9uZSgnZ3JlZXQnLCBmdW5jdGlvbigpIHsKICAg
        IGNvbnNvbGUubG9nKCdPZmZlciBvbmUtdGltZSBzcGVjaWFsJyk7CiAgfSku
        b2ZmKCdldmVudCcsIHRoaXMsIGZvcmdldFRoaXMpOwogIGBgYAoKICBAY2xh
        c3MgRXZlbnRlZAogIEBuYW1lc3BhY2UgRW1iZXIKICovCkVtYmVyLkV2ZW50
        ZWQgPSBFbWJlci5NaXhpbi5jcmVhdGUoewoKICAvKioKICAgU3Vic2NyaWJl
        cyB0byBhIG5hbWVkIGV2ZW50IHdpdGggZ2l2ZW4gZnVuY3Rpb24uCgogICBg
        YGBqYXZhc2NyaXB0CiAgIHBlcnNvbi5vbignZGlkTG9hZCcsIGZ1bmN0aW9u
        KCkgewogICAgIC8vIGZpcmVkIG9uY2UgdGhlIHBlcnNvbiBoYXMgbG9hZGVk
        CiAgIH0pOwogICBgYGAKCiAgIEFuIG9wdGlvbmFsIHRhcmdldCBjYW4gYmUg
        cGFzc2VkIGluIGFzIHRoZSAybmQgYXJndW1lbnQgdGhhdCB3aWxsCiAgIGJl
        IHNldCBhcyB0aGUgInRoaXMiIGZvciB0aGUgY2FsbGJhY2suIFRoaXMgaXMg
        YSBnb29kIHdheSB0byBnaXZlIHlvdXIKICAgZnVuY3Rpb24gYWNjZXNzIHRv
        IHRoZSBvYmplY3QgdHJpZ2dlcmluZyB0aGUgZXZlbnQuIFdoZW4gdGhlIHRh
        cmdldAogICBwYXJhbWV0ZXIgaXMgdXNlZCB0aGUgY2FsbGJhY2sgYmVjb21l
        cyB0aGUgdGhpcmQgYXJndW1lbnQuCgogICBAbWV0aG9kIG9uCiAgIEBwYXJh
        bSB7U3RyaW5nfSBuYW1lIFRoZSBuYW1lIG9mIHRoZSBldmVudAogICBAcGFy
        YW0ge09iamVjdH0gW3RhcmdldF0gVGhlICJ0aGlzIiBiaW5kaW5nIGZvciB0
        aGUgY2FsbGJhY2sKICAgQHBhcmFtIHtGdW5jdGlvbn0gbWV0aG9kIFRoZSBj
        YWxsYmFjayB0byBleGVjdXRlCiAgIEByZXR1cm4gdGhpcwogICovCiAgb246
        IGZ1bmN0aW9uKG5hbWUsIHRhcmdldCwgbWV0aG9kKSB7CiAgICBFbWJlci5h
        ZGRMaXN0ZW5lcih0aGlzLCBuYW1lLCB0YXJnZXQsIG1ldGhvZCk7CiAgICBy
        ZXR1cm4gdGhpczsKICB9LAoKICAvKioKICAgIFN1YnNjcmliZXMgYSBmdW5j
        dGlvbiB0byBhIG5hbWVkIGV2ZW50IGFuZCB0aGVuIGNhbmNlbHMgdGhlIHN1
        YnNjcmlwdGlvbgogICAgYWZ0ZXIgdGhlIGZpcnN0IHRpbWUgdGhlIGV2ZW50
        IGlzIHRyaWdnZXJlZC4gSXQgaXMgZ29vZCB0byB1c2UgYGBvbmVgYCB3aGVu
        CiAgICB5b3Ugb25seSBjYXJlIGFib3V0IHRoZSBmaXJzdCB0aW1lIGFuIGV2
        ZW50IGhhcyB0YWtlbiBwbGFjZS4KCiAgICBUaGlzIGZ1bmN0aW9uIHRha2Vz
        IGFuIG9wdGlvbmFsIDJuZCBhcmd1bWVudCB0aGF0IHdpbGwgYmVjb21lIHRo
        ZSAidGhpcyIKICAgIHZhbHVlIGZvciB0aGUgY2FsbGJhY2suIElmIHRoaXMg
        YXJndW1lbnQgaXMgcGFzc2VkIHRoZW4gdGhlIDNyZCBhcmd1bWVudAogICAg
        YmVjb21lcyB0aGUgZnVuY3Rpb24uCgogICAgQG1ldGhvZCBvbmUKICAgIEBw
        YXJhbSB7U3RyaW5nfSBuYW1lIFRoZSBuYW1lIG9mIHRoZSBldmVudAogICAg
        QHBhcmFtIHtPYmplY3R9IFt0YXJnZXRdIFRoZSAidGhpcyIgYmluZGluZyBm
        b3IgdGhlIGNhbGxiYWNrCiAgICBAcGFyYW0ge0Z1bmN0aW9ufSBtZXRob2Qg
        VGhlIGNhbGxiYWNrIHRvIGV4ZWN1dGUKICAgIEByZXR1cm4gdGhpcwogICov
        CiAgb25lOiBmdW5jdGlvbihuYW1lLCB0YXJnZXQsIG1ldGhvZCkgewogICAg
        aWYgKCFtZXRob2QpIHsKICAgICAgbWV0aG9kID0gdGFyZ2V0OwogICAgICB0
        YXJnZXQgPSBudWxsOwogICAgfQoKICAgIEVtYmVyLmFkZExpc3RlbmVyKHRo
        aXMsIG5hbWUsIHRhcmdldCwgbWV0aG9kLCB0cnVlKTsKICAgIHJldHVybiB0
        aGlzOwogIH0sCgogIC8qKgogICAgVHJpZ2dlcnMgYSBuYW1lZCBldmVudCBm
        b3IgdGhlIG9iamVjdC4gQW55IGFkZGl0aW9uYWwgYXJndW1lbnRzCiAgICB3
        aWxsIGJlIHBhc3NlZCBhcyBwYXJhbWV0ZXJzIHRvIHRoZSBmdW5jdGlvbnMg
        dGhhdCBhcmUgc3Vic2NyaWJlZCB0byB0aGUKICAgIGV2ZW50LgoKICAgIGBg
        YGphdmFzY3JpcHQKICAgIHBlcnNvbi5vbignZGlkRWF0JywgZnVuY3Rpb24o
        Zm9vZCkgewogICAgICBjb25zb2xlLmxvZygncGVyc29uIGF0ZSBzb21lICcg
        KyBmb29kKTsKICAgIH0pOwoKICAgIHBlcnNvbi50cmlnZ2VyKCdkaWRFYXQn
        LCAnYnJvY2NvbGknKTsKCiAgICAvLyBvdXRwdXRzOiBwZXJzb24gYXRlIHNv
        bWUgYnJvY2NvbGkKICAgIGBgYAogICAgQG1ldGhvZCB0cmlnZ2VyCiAgICBA
        cGFyYW0ge1N0cmluZ30gbmFtZSBUaGUgbmFtZSBvZiB0aGUgZXZlbnQKICAg
        IEBwYXJhbSB7T2JqZWN0Li4ufSBhcmdzIE9wdGlvbmFsIGFyZ3VtZW50cyB0
        byBwYXNzIG9uCiAgKi8KICB0cmlnZ2VyOiBmdW5jdGlvbihuYW1lKSB7CiAg
        ICB2YXIgYXJncyA9IFtdLCBpLCBsOwogICAgZm9yIChpID0gMSwgbCA9IGFy
        Z3VtZW50cy5sZW5ndGg7IGkgPCBsOyBpKyspIHsKICAgICAgYXJncy5wdXNo
        KGFyZ3VtZW50c1tpXSk7CiAgICB9CiAgICBFbWJlci5zZW5kRXZlbnQodGhp
        cywgbmFtZSwgYXJncyk7CiAgfSwKCiAgLyoqCiAgICBDYW5jZWxzIHN1YnNj
        cmlwdGlvbiBmb3IgZ2l2ZW4gbmFtZSwgdGFyZ2V0LCBhbmQgbWV0aG9kLgoK
        ICAgIEBtZXRob2Qgb2ZmCiAgICBAcGFyYW0ge1N0cmluZ30gbmFtZSBUaGUg
        bmFtZSBvZiB0aGUgZXZlbnQKICAgIEBwYXJhbSB7T2JqZWN0fSB0YXJnZXQg
        VGhlIHRhcmdldCBvZiB0aGUgc3Vic2NyaXB0aW9uCiAgICBAcGFyYW0ge0Z1
        bmN0aW9ufSBtZXRob2QgVGhlIGZ1bmN0aW9uIG9mIHRoZSBzdWJzY3JpcHRp
        b24KICAgIEByZXR1cm4gdGhpcwogICovCiAgb2ZmOiBmdW5jdGlvbihuYW1l
        LCB0YXJnZXQsIG1ldGhvZCkgewogICAgRW1iZXIucmVtb3ZlTGlzdGVuZXIo
        dGhpcywgbmFtZSwgdGFyZ2V0LCBtZXRob2QpOwogICAgcmV0dXJuIHRoaXM7
        CiAgfSwKCiAgLyoqCiAgICBDaGVja3MgdG8gc2VlIGlmIG9iamVjdCBoYXMg
        YW55IHN1YnNjcmlwdGlvbnMgZm9yIG5hbWVkIGV2ZW50LgoKICAgIEBtZXRo
        b2QgaGFzCiAgICBAcGFyYW0ge1N0cmluZ30gbmFtZSBUaGUgbmFtZSBvZiB0
        aGUgZXZlbnQKICAgIEByZXR1cm4ge0Jvb2xlYW59IGRvZXMgdGhlIG9iamVj
        dCBoYXZlIGEgc3Vic2NyaXB0aW9uIGZvciBldmVudAogICAqLwogIGhhczog
        ZnVuY3Rpb24obmFtZSkgewogICAgcmV0dXJuIEVtYmVyLmhhc0xpc3RlbmVy
        cyh0aGlzLCBuYW1lKTsKICB9Cn0pOwoKfSkoKTsKCgoKKGZ1bmN0aW9uKCkg
        ewp2YXIgUlNWUCA9IHJlcXVpcmVNb2R1bGUoInJzdnAiKTsKClJTVlAuY29u
        ZmlndXJlKCdhc3luYycsIGZ1bmN0aW9uKGNhbGxiYWNrLCBwcm9taXNlKSB7
        CiAgRW1iZXIucnVuLnNjaGVkdWxlKCdhY3Rpb25zJywgcHJvbWlzZSwgY2Fs
        bGJhY2ssIHByb21pc2UpOwp9KTsKCi8qKgpAbW9kdWxlIGVtYmVyCkBzdWJt
        b2R1bGUgZW1iZXItcnVudGltZQoqLwoKdmFyIGdldCA9IEVtYmVyLmdldDsK
        Ci8qKgogIEBjbGFzcyBEZWZlcnJlZAogIEBuYW1lc3BhY2UgRW1iZXIKICov
        CkVtYmVyLkRlZmVycmVkTWl4aW4gPSBFbWJlci5NaXhpbi5jcmVhdGUoewog
        IC8qKgogICAgQWRkIGhhbmRsZXJzIHRvIGJlIGNhbGxlZCB3aGVuIHRoZSBE
        ZWZlcnJlZCBvYmplY3QgaXMgcmVzb2x2ZWQgb3IgcmVqZWN0ZWQuCgogICAg
        QG1ldGhvZCB0aGVuCiAgICBAcGFyYW0ge0Z1bmN0aW9ufSByZXNvbHZlIGEg
        Y2FsbGJhY2sgZnVuY3Rpb24gdG8gYmUgY2FsbGVkIHdoZW4gZG9uZQogICAg
        QHBhcmFtIHtGdW5jdGlvbn0gcmVqZWN0ICBhIGNhbGxiYWNrIGZ1bmN0aW9u
        IHRvIGJlIGNhbGxlZCB3aGVuIGZhaWxlZAogICovCiAgdGhlbjogZnVuY3Rp
        b24ocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICB2YXIgZGVmZXJyZWQsIHByb21p
        c2UsIGVudGl0eTsKCiAgICBlbnRpdHkgPSB0aGlzOwogICAgZGVmZXJyZWQg
        PSBnZXQodGhpcywgJ19kZWZlcnJlZCcpOwogICAgcHJvbWlzZSA9IGRlZmVy
        cmVkLnByb21pc2U7CgogICAgZnVuY3Rpb24gZnVsZmlsbG1lbnRIYW5kbGVy
        KGZ1bGZpbGxtZW50KSB7CiAgICAgIGlmIChmdWxmaWxsbWVudCA9PT0gcHJv
        bWlzZSkgewogICAgICAgIHJldHVybiByZXNvbHZlKGVudGl0eSk7CiAgICAg
        IH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIHJlc29sdmUoZnVsZmlsbG1lbnQp
        OwogICAgICB9CiAgICB9CgogICAgcmV0dXJuIHByb21pc2UudGhlbihyZXNv
        bHZlICYmIGZ1bGZpbGxtZW50SGFuZGxlciwgcmVqZWN0KTsKICB9LAoKICAv
        KioKICAgIFJlc29sdmUgYSBEZWZlcnJlZCBvYmplY3QgYW5kIGNhbGwgYW55
        IGBkb25lQ2FsbGJhY2tzYCB3aXRoIHRoZSBnaXZlbiBhcmdzLgoKICAgIEBt
        ZXRob2QgcmVzb2x2ZQogICovCiAgcmVzb2x2ZTogZnVuY3Rpb24odmFsdWUp
        IHsKICAgIHZhciBkZWZlcnJlZCwgcHJvbWlzZTsKCiAgICBkZWZlcnJlZCA9
        IGdldCh0aGlzLCAnX2RlZmVycmVkJyk7CiAgICBwcm9taXNlID0gZGVmZXJy
        ZWQucHJvbWlzZTsKCiAgICBpZiAodmFsdWUgPT09IHRoaXMpIHsKICAgICAg
        ZGVmZXJyZWQucmVzb2x2ZShwcm9taXNlKTsKICAgIH0gZWxzZSB7CiAgICAg
        IGRlZmVycmVkLnJlc29sdmUodmFsdWUpOwogICAgfQogIH0sCgogIC8qKgog
        ICAgUmVqZWN0IGEgRGVmZXJyZWQgb2JqZWN0IGFuZCBjYWxsIGFueSBgZmFp
        bENhbGxiYWNrc2Agd2l0aCB0aGUgZ2l2ZW4gYXJncy4KCiAgICBAbWV0aG9k
        IHJlamVjdAogICovCiAgcmVqZWN0OiBmdW5jdGlvbih2YWx1ZSkgewogICAg
        Z2V0KHRoaXMsICdfZGVmZXJyZWQnKS5yZWplY3QodmFsdWUpOwogIH0sCgog
        IF9kZWZlcnJlZDogRW1iZXIuY29tcHV0ZWQoZnVuY3Rpb24oKSB7CiAgICBy
        ZXR1cm4gUlNWUC5kZWZlcigpOwogIH0pCn0pOwoKCn0pKCk7CgoKCihmdW5j
        dGlvbigpIHsKLyoqCkBtb2R1bGUgZW1iZXIKQHN1Ym1vZHVsZSBlbWJlci1y
        dW50aW1lCiovCgp2YXIgZ2V0ID0gRW1iZXIuZ2V0LCB0eXBlT2YgPSBFbWJl
        ci50eXBlT2Y7CgovKioKICBUaGUgYEVtYmVyLkFjdGlvbkhhbmRsZXJgIG1p
        eGluIGltcGxlbWVudHMgc3VwcG9ydCBmb3IgbW92aW5nIGFuIGBhY3Rpb25z
        YAogIHByb3BlcnR5IHRvIGFuIGBfYWN0aW9uc2AgcHJvcGVydHkgYXQgZXh0
        ZW5kIHRpbWUsIGFuZCBhZGRpbmcgYF9hY3Rpb25zYAogIHRvIHRoZSBvYmpl
        Y3QncyBtZXJnZWRQcm9wZXJ0aWVzIGxpc3QuCgogIGBFbWJlci5BY3Rpb25I
        YW5kbGVyYCBpcyB1c2VkIGludGVybmFsbHkgYnkgRW1iZXIgaW4gIGBFbWJl
        ci5WaWV3YCwKICBgRW1iZXIuQ29udHJvbGxlcmAsIGFuZCBgRW1iZXIuUm91
        dGVgLgoKICBAY2xhc3MgQWN0aW9uSGFuZGxlcgogIEBuYW1lc3BhY2UgRW1i
        ZXIKKi8KRW1iZXIuQWN0aW9uSGFuZGxlciA9IEVtYmVyLk1peGluLmNyZWF0
        ZSh7CiAgbWVyZ2VkUHJvcGVydGllczogWydfYWN0aW9ucyddLAoKICAvKioK
        ICAgIEBwcml2YXRlCgogICAgTW92ZXMgYGFjdGlvbnNgIHRvIGBfYWN0aW9u
        c2AgYXQgZXh0ZW5kIHRpbWUuIE5vdGUgdGhhdCB0aGlzIGN1cnJlbnRseQog
        ICAgbW9kaWZpZXMgdGhlIG1peGluIHRoZW1zZWx2ZXMsIHdoaWNoIGlzIHRl
        Y2huaWNhbGx5IGR1YmlvdXMgYnV0CiAgICBpcyBwcmFjdGljYWxseSBvZiBs
        aXR0bGUgY29uc2VxdWVuY2UuIFRoaXMgbWF5IGNoYW5nZSBpbiB0aGUgZnV0
        dXJlLgoKICAgIEBtZXRob2Qgd2lsbE1lcmdlTWl4aW4KICAqLwogIHdpbGxN
        ZXJnZU1peGluOiBmdW5jdGlvbihwcm9wcykgewogICAgdmFyIGhhc2hOYW1l
        OwoKICAgIGlmICghcHJvcHMuX2FjdGlvbnMpIHsKICAgICAgaWYgKHR5cGVP
        Zihwcm9wcy5hY3Rpb25zKSA9PT0gJ29iamVjdCcpIHsKICAgICAgICBoYXNo
        TmFtZSA9ICdhY3Rpb25zJzsKICAgICAgfSBlbHNlIGlmICh0eXBlT2YocHJv
        cHMuZXZlbnRzKSA9PT0gJ29iamVjdCcpIHsKICAgICAgICBFbWJlci5kZXBy
        ZWNhdGUoJ0FjdGlvbiBoYW5kbGVycyBjb250YWluZWQgaW4gYW4gYGV2ZW50
        c2Agb2JqZWN0IGFyZSBkZXByZWNhdGVkIGluIGZhdm9yIG9mIHB1dHRpbmcg
        dGhlbSBpbiBhbiBgYWN0aW9uc2Agb2JqZWN0JywgZmFsc2UpOwogICAgICAg
        IGhhc2hOYW1lID0gJ2V2ZW50cyc7CiAgICAgIH0KCiAgICAgIGlmIChoYXNo
        TmFtZSkgewogICAgICAgIHByb3BzLl9hY3Rpb25zID0gRW1iZXIubWVyZ2Uo
        cHJvcHMuX2FjdGlvbnMgfHwge30sIHByb3BzW2hhc2hOYW1lXSk7CiAgICAg
        IH0KCiAgICAgIGRlbGV0ZSBwcm9wc1toYXNoTmFtZV07CiAgICB9CiAgfSwK
        CiAgc2VuZDogZnVuY3Rpb24oYWN0aW9uTmFtZSkgewogICAgdmFyIGFyZ3Mg
        PSBbXS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSksIHRhcmdldDsKCiAgICBp
        ZiAodGhpcy5fYWN0aW9ucyAmJiB0aGlzLl9hY3Rpb25zW2FjdGlvbk5hbWVd
        KSB7CiAgICAgIGlmICh0aGlzLl9hY3Rpb25zW2FjdGlvbk5hbWVdLmFwcGx5
        KHRoaXMsIGFyZ3MpID09PSB0cnVlKSB7CiAgICAgICAgLy8gaGFuZGxlciBy
        ZXR1cm5lZCB0cnVlLCBzbyB0aGlzIGFjdGlvbiB3aWxsIGJ1YmJsZQogICAg
        ICB9IGVsc2UgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgfSBlbHNl
        IGlmICh0aGlzLmRlcHJlY2F0ZWRTZW5kICYmIHRoaXMuZGVwcmVjYXRlZFNl
        bmRIYW5kbGVzICYmIHRoaXMuZGVwcmVjYXRlZFNlbmRIYW5kbGVzKGFjdGlv
        bk5hbWUpKSB7CiAgICAgIGlmICh0aGlzLmRlcHJlY2F0ZWRTZW5kLmFwcGx5
        KHRoaXMsIFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzKSkgPT09IHRydWUpIHsK
        ICAgICAgICAvLyBoYW5kbGVyIHJldHVybiB0cnVlLCBzbyB0aGlzIGFjdGlv
        biB3aWxsIGJ1YmJsZQogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybjsK
        ICAgICAgfQogICAgfQoKICAgIGlmICh0YXJnZXQgPSBnZXQodGhpcywgJ3Rh
        cmdldCcpKSB7CiAgICAgIEVtYmVyLmFzc2VydCgiVGhlIGB0YXJnZXRgIGZv
        ciAiICsgdGhpcyArICIgKCIgKyB0YXJnZXQgKyAiKSBkb2VzIG5vdCBoYXZl
        IGEgYHNlbmRgIG1ldGhvZCIsIHR5cGVvZiB0YXJnZXQuc2VuZCA9PT0gJ2Z1
        bmN0aW9uJyk7CiAgICAgIHRhcmdldC5zZW5kLmFwcGx5KHRhcmdldCwgYXJn
        dW1lbnRzKTsKICAgIH0KICB9Cgp9KTsKCn0pKCk7CgoKCihmdW5jdGlvbigp
        IHsKdmFyIHNldCA9IEVtYmVyLnNldCwgZ2V0ID0gRW1iZXIuZ2V0LAogICAg
        cmVzb2x2ZSA9IEVtYmVyLlJTVlAucmVzb2x2ZSwKICAgIHJldGhyb3cgPSBF
        bWJlci5SU1ZQLnJldGhyb3csCiAgICBub3QgPSBFbWJlci5jb21wdXRlZC5u
        b3QsCiAgICBvciA9IEVtYmVyLmNvbXB1dGVkLm9yOwoKLyoqCiAgQG1vZHVs
        ZSBlbWJlcgogIEBzdWJtb2R1bGUgZW1iZXItcnVudGltZQogKi8KCmZ1bmN0
        aW9uIGluc3RhbGxQcm9taXNlKHByb3h5LCBwcm9taXNlKSB7CiAgcHJvbWlz
        ZS50aGVuKGZ1bmN0aW9uKHZhbHVlKSB7CiAgICBzZXQocHJveHksICdpc0Z1
        bGZpbGxlZCcsIHRydWUpOwogICAgc2V0KHByb3h5LCAnY29udGVudCcsIHZh
        bHVlKTsKCiAgICByZXR1cm4gdmFsdWU7CiAgfSwgZnVuY3Rpb24ocmVhc29u
        KSB7CiAgICBzZXQocHJveHksICdpc1JlamVjdGVkJywgdHJ1ZSk7CiAgICBz
        ZXQocHJveHksICdyZWFzb24nLCByZWFzb24pOwogIH0pLmZhaWwocmV0aHJv
        dyk7Cn0KCi8qKgogIEEgbG93IGxldmVsIG1peGluIG1ha2luZyBPYmplY3RQ
        cm94eSwgT2JqZWN0Q29udHJvbGxlciBvciBBcnJheUNvbnRyb2xsZXIncyBw
        cm9taXNlIGF3YXJlLgoKICBgYGBqYXZhc2NyaXB0CiAgdmFyIE9iamVjdFBy
        b21pc2VDb250cm9sbGVyID0gRW1iZXIuT2JqZWN0Q29udHJvbGxlci5leHRl
        bmQoRW1iZXIuUHJvbWlzZVByb3h5TWl4aW4pOwoKICB2YXIgY29udHJvbGxl
        ciA9IE9iamVjdFByb21pc2VDb250cm9sbGVyLmNyZWF0ZSh7CiAgICBwcm9t
        aXNlOiAkLmdldEpTT04oJy9zb21lL3JlbW90ZS9kYXRhLmpzb24nKQogIH0p
        OwoKICBjb250cm9sbGVyLnRoZW4oZnVuY3Rpb24oanNvbil7CiAgICAgLy8g
        dGhlIGpzb24KICB9LCBmdW5jdGlvbihyZWFzb24pIHsKICAgICAvLyB0aGUg
        cmVhc29uIHdoeSB5b3UgaGF2ZSBubyBqc29uCiAgfSk7CiAgYGBgCgogIHRo
        ZSBjb250cm9sbGVyIGhhcyBiaW5kYWJsZSBhdHRyaWJ1dGVzIHdoaWNoCiAg
        dHJhY2sgdGhlIHByb21pc2VzIGxpZmUgY3ljbGUKCiAgYGBgamF2YXNjcmlw
        dAogIGNvbnRyb2xsZXIuZ2V0KCdpc1BlbmRpbmcnKSAgIC8vPT4gdHJ1ZQog
        IGNvbnRyb2xsZXIuZ2V0KCdpc1NldHRsZWQnKSAgLy89PiBmYWxzZQogIGNv
        bnRyb2xsZXIuZ2V0KCdpc1JlamVjdGVkJykgIC8vPT4gZmFsc2UKICBjb250
        cm9sbGVyLmdldCgnaXNGdWxmaWxsZWQnKSAvLz0+IGZhbHNlCiAgYGBgCgog
        IFdoZW4gdGhlIHRoZSAkLmdldEpTT04gY29tcGxldGVzLCBhbmQgdGhlIHBy
        b21pc2UgaXMgZnVsZmlsbGVkCiAgd2l0aCBqc29uLCB0aGUgbGlmZSBjeWNs
        ZSBhdHRyaWJ1dGVzIHdpbGwgdXBkYXRlIGFjY29yZGluZ2x5LgoKICBgYGBq
        YXZhc2NyaXB0CiAgY29udHJvbGxlci5nZXQoJ2lzUGVuZGluZycpICAgLy89
        PiBmYWxzZQogIGNvbnRyb2xsZXIuZ2V0KCdpc1NldHRsZWQnKSAgIC8vPT4g
        dHJ1ZQogIGNvbnRyb2xsZXIuZ2V0KCdpc1JlamVjdGVkJykgIC8vPT4gZmFs
        c2UKICBjb250cm9sbGVyLmdldCgnaXNGdWxmaWxsZWQnKSAvLz0+IHRydWUK
        ICBgYGAKCiAgQXMgdGhlIGNvbnRyb2xsZXIgaXMgYW4gT2JqZWN0Q29udHJv
        bGxlciwgYW5kIHRoZSBqc29uIG5vdyBpdHMgY29udGVudCwKICBhbGwgdGhl
        IGpzb24gcHJvcGVydGllcyB3aWxsIGJlIGF2YWlsYWJsZSBkaXJlY3RseSBm
        cm9tIHRoZSBjb250cm9sbGVyLgoKICBgYGBqYXZhc2NyaXB0CiAgLy8gQXNz
        dW1pbmcgdGhlIGZvbGxvd2luZyBqc29uOgogIHsKICAgIGZpcnN0TmFtZTog
        J1N0ZWZhbicsCiAgICBsYXN0TmFtZTogJ1Blbm5lcicKICB9CgogIC8vIGJv
        dGggcHJvcGVydGllcyB3aWxsIGFjY2Vzc2libGUgb24gdGhlIGNvbnRyb2xs
        ZXIKICBjb250cm9sbGVyLmdldCgnZmlyc3ROYW1lJykgLy89PiAnU3RlZmFu
        JwogIGNvbnRyb2xsZXIuZ2V0KCdsYXN0TmFtZScpICAvLz0+ICdQZW5uZXIn
        CiAgYGBgCgogIElmIHRoZSBjb250cm9sbGVyIGlzIGJhY2tpbmcgYSB0ZW1w
        bGF0ZSwgdGhlIGF0dHJpYnV0ZXMgYXJlIAogIGJpbmRhYmxlIGZyb20gd2l0
        aGluIHRoYXQgdGVtcGxhdGUKCiAgYGBgaGFuZGxlYmFycwogIHt7I2lmIGlz
        UGVuZGluZ319CiAgICBsb2FkaW5nLi4uCiAge3tlbHNlfX0KICAgIGZpcnN0
        TmFtZToge3tmaXJzdE5hbWV9fQogICAgbGFzdE5hbWU6IHt7bGFzdE5hbWV9
        fQogIHt7L2lmfX0KICBgYGAKICBAY2xhc3MgRW1iZXIuUHJvbWlzZVByb3h5
        TWl4aW4KKi8KRW1iZXIuUHJvbWlzZVByb3h5TWl4aW4gPSBFbWJlci5NaXhp
        bi5jcmVhdGUoewogIHJlYXNvbjogICAgbnVsbCwKICBpc1BlbmRpbmc6ICBu
        b3QoJ2lzU2V0dGxlZCcpLnJlYWRPbmx5KCksCiAgaXNTZXR0bGVkOiAgb3Io
        J2lzUmVqZWN0ZWQnLCAnaXNGdWxmaWxsZWQnKS5yZWFkT25seSgpLAogIGlz
        UmVqZWN0ZWQ6ICBmYWxzZSwKICBpc0Z1bGZpbGxlZDogZmFsc2UsCgogIHBy
        b21pc2U6IEVtYmVyLmNvbXB1dGVkKGZ1bmN0aW9uKGtleSwgcHJvbWlzZSkg
        ewogICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDIpIHsKICAgICAgcHJv
        bWlzZSA9IHJlc29sdmUocHJvbWlzZSk7CiAgICAgIGluc3RhbGxQcm9taXNl
        KHRoaXMsIHByb21pc2UpOwogICAgICByZXR1cm4gcHJvbWlzZTsKICAgIH0g
        ZWxzZSB7CiAgICAgIHRocm93IG5ldyBFbWJlci5FcnJvcigiUHJvbWlzZVBy
        b3h5J3MgcHJvbWlzZSBtdXN0IGJlIHNldCIpOwogICAgfQogIH0pLAoKICB0
        aGVuOiBmdW5jdGlvbihmdWxmaWxsLCByZWplY3QpIHsKICAgIHJldHVybiBn
        ZXQodGhpcywgJ3Byb21pc2UnKS50aGVuKGZ1bGZpbGwsIHJlamVjdCk7CiAg
        fQp9KTsKCgp9KSgpOwoKCgooZnVuY3Rpb24oKSB7Cgp9KSgpOwoKCgooZnVu
        Y3Rpb24oKSB7CnZhciBnZXQgPSBFbWJlci5nZXQsCiAgICBmb3JFYWNoID0g
        RW1iZXIuRW51bWVyYWJsZVV0aWxzLmZvckVhY2gsCiAgICBSRVRBSU4gPSAn
        cicsCiAgICBJTlNFUlQgPSAnaScsCiAgICBERUxFVEUgPSAnZCc7CgovKioK
        ICBBbiBgRW1iZXIuVHJhY2tlZEFycmF5YCB0cmFja3MgYXJyYXkgb3BlcmF0
        aW9ucy4gIEl0J3MgdXNlZnVsIHdoZW4geW91IHdhbnQgdG8KICBsYXppbHkg
        Y29tcHV0ZSB0aGUgaW5kZXhlcyBvZiBpdGVtcyBpbiBhbiBhcnJheSBhZnRl
        ciB0aGV5J3ZlIGJlZW4gc2hpZnRlZCBieQogIHN1YnNlcXVlbnQgb3BlcmF0
        aW9ucy4KCiAgQGNsYXNzIFRyYWNrZWRBcnJheQogIEBuYW1lc3BhY2UgRW1i
        ZXIKICBAcGFyYW0ge2FycmF5fSBbaXRlbXM9W11dIFRoZSBhcnJheSB0byBi
        ZSB0cmFja2VkLiAgVGhpcyBpcyB1c2VkIGp1c3QgdG8gZ2V0CiAgdGhlIGlu
        aXRpYWwgaXRlbXMgZm9yIHRoZSBzdGFydGluZyBzdGF0ZSBvZiByZXRhaW46
        bi4KKi8KRW1iZXIuVHJhY2tlZEFycmF5ID0gZnVuY3Rpb24gKGl0ZW1zKSB7
        CiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPCAxKSB7IGl0ZW1zID0gW107IH0K
        CiAgdmFyIGxlbmd0aCA9IGdldChpdGVtcywgJ2xlbmd0aCcpOwoKICBpZiAo
        bGVuZ3RoKSB7CiAgICB0aGlzLl9vcGVyYXRpb25zID0gW25ldyBBcnJheU9w
        ZXJhdGlvbihSRVRBSU4sIGxlbmd0aCwgaXRlbXMpXTsKICB9IGVsc2Ugewog
        ICAgdGhpcy5fb3BlcmF0aW9ucyA9IFtdOwogIH0KfTsKCkVtYmVyLlRyYWNr
        ZWRBcnJheS5SRVRBSU4gPSBSRVRBSU47CkVtYmVyLlRyYWNrZWRBcnJheS5J
        TlNFUlQgPSBJTlNFUlQ7CkVtYmVyLlRyYWNrZWRBcnJheS5ERUxFVEUgPSBE
        RUxFVEU7CgpFbWJlci5UcmFja2VkQXJyYXkucHJvdG90eXBlID0gewoKICAv
        KioKICAgIFRyYWNrIHRoYXQgYG5ld0l0ZW1zYCB3ZXJlIGFkZGVkIHRvIHRo
        ZSB0cmFja2VkIGFycmF5IGF0IGBpbmRleGAuCgogICAgQG1ldGhvZCBhZGRJ
        dGVtcwogICAgQHBhcmFtIGluZGV4CiAgICBAcGFyYW0gbmV3SXRlbXMKICAq
        LwogIGFkZEl0ZW1zOiBmdW5jdGlvbiAoaW5kZXgsIG5ld0l0ZW1zKSB7CiAg
        ICB2YXIgY291bnQgPSBnZXQobmV3SXRlbXMsICdsZW5ndGgnKTsKICAgIGlm
        IChjb3VudCA8IDEpIHsgcmV0dXJuOyB9CgogICAgdmFyIG1hdGNoID0gdGhp
        cy5fZmluZEFycmF5T3BlcmF0aW9uKGluZGV4KSwKICAgICAgICBhcnJheU9w
        ZXJhdGlvbiA9IG1hdGNoLm9wZXJhdGlvbiwKICAgICAgICBhcnJheU9wZXJh
        dGlvbkluZGV4ID0gbWF0Y2guaW5kZXgsCiAgICAgICAgYXJyYXlPcGVyYXRp
        b25SYW5nZVN0YXJ0ID0gbWF0Y2gucmFuZ2VTdGFydCwKICAgICAgICBjb21w
        b3NlSW5kZXgsCiAgICAgICAgc3BsaXRJbmRleCwKICAgICAgICBzcGxpdEl0
        ZW1zLAogICAgICAgIHNwbGl0QXJyYXlPcGVyYXRpb24sCiAgICAgICAgbmV3
        QXJyYXlPcGVyYXRpb247CgogICAgbmV3QXJyYXlPcGVyYXRpb24gPSBuZXcg
        QXJyYXlPcGVyYXRpb24oSU5TRVJULCBjb3VudCwgbmV3SXRlbXMpOwoKICAg
        IGlmIChhcnJheU9wZXJhdGlvbikgewogICAgICBpZiAoIW1hdGNoLnNwbGl0
        KSB7CiAgICAgICAgLy8gaW5zZXJ0IGxlZnQgb2YgYXJyYXlPcGVyYXRpb24K
        ICAgICAgICB0aGlzLl9vcGVyYXRpb25zLnNwbGljZShhcnJheU9wZXJhdGlv
        bkluZGV4LCAwLCBuZXdBcnJheU9wZXJhdGlvbik7CiAgICAgICAgY29tcG9z
        ZUluZGV4ID0gYXJyYXlPcGVyYXRpb25JbmRleDsKICAgICAgfSBlbHNlIHsK
        ICAgICAgICB0aGlzLl9zcGxpdChhcnJheU9wZXJhdGlvbkluZGV4LCBpbmRl
        eCAtIGFycmF5T3BlcmF0aW9uUmFuZ2VTdGFydCwgbmV3QXJyYXlPcGVyYXRp
        b24pOwogICAgICAgIGNvbXBvc2VJbmRleCA9IGFycmF5T3BlcmF0aW9uSW5k
        ZXggKyAxOwogICAgICB9CiAgICB9IGVsc2UgewogICAgICAvLyBpbnNlcnQg
        YXQgZW5kCiAgICAgIHRoaXMuX29wZXJhdGlvbnMucHVzaChuZXdBcnJheU9w
        ZXJhdGlvbik7CiAgICAgIGNvbXBvc2VJbmRleCA9IGFycmF5T3BlcmF0aW9u
        SW5kZXg7CiAgICB9CgogICAgdGhpcy5fY29tcG9zZUluc2VydChjb21wb3Nl
        SW5kZXgpOwogIH0sCgogIC8qKgogICAgVHJhY2sgdGhhdCBgY291bnRgIGl0
        ZW1zIHdlcmUgcmVtb3ZlZCBhdCBgaW5kZXhgLgoKICAgIEBtZXRob2QgcmVt
        b3ZlSXRlbXMKICAgIEBwYXJhbSBpbmRleAogICAgQHBhcmFtIGNvdW50CiAg
        Ki8KICByZW1vdmVJdGVtczogZnVuY3Rpb24gKGluZGV4LCBjb3VudCkgewog
        ICAgaWYgKGNvdW50IDwgMSkgeyByZXR1cm47IH0KCiAgICB2YXIgbWF0Y2gg
        PSB0aGlzLl9maW5kQXJyYXlPcGVyYXRpb24oaW5kZXgpLAogICAgICAgIGFy
        cmF5T3BlcmF0aW9uID0gbWF0Y2gub3BlcmF0aW9uLAogICAgICAgIGFycmF5
        T3BlcmF0aW9uSW5kZXggPSBtYXRjaC5pbmRleCwKICAgICAgICBhcnJheU9w
        ZXJhdGlvblJhbmdlU3RhcnQgPSBtYXRjaC5yYW5nZVN0YXJ0LAogICAgICAg
        IG5ld0FycmF5T3BlcmF0aW9uLAogICAgICAgIGNvbXBvc2VJbmRleDsKCiAg
        ICBuZXdBcnJheU9wZXJhdGlvbiA9IG5ldyBBcnJheU9wZXJhdGlvbihERUxF
        VEUsIGNvdW50KTsKICAgIGlmICghbWF0Y2guc3BsaXQpIHsKICAgICAgLy8g
        aW5zZXJ0IGxlZnQgb2YgYXJyYXlPcGVyYXRpb24KICAgICAgdGhpcy5fb3Bl
        cmF0aW9ucy5zcGxpY2UoYXJyYXlPcGVyYXRpb25JbmRleCwgMCwgbmV3QXJy
        YXlPcGVyYXRpb24pOwogICAgICBjb21wb3NlSW5kZXggPSBhcnJheU9wZXJh
        dGlvbkluZGV4OwogICAgfSBlbHNlIHsKICAgICAgdGhpcy5fc3BsaXQoYXJy
        YXlPcGVyYXRpb25JbmRleCwgaW5kZXggLSBhcnJheU9wZXJhdGlvblJhbmdl
        U3RhcnQsIG5ld0FycmF5T3BlcmF0aW9uKTsKICAgICAgY29tcG9zZUluZGV4
        ID0gYXJyYXlPcGVyYXRpb25JbmRleCArIDE7CiAgICB9CgogICAgcmV0dXJu
        IHRoaXMuX2NvbXBvc2VEZWxldGUoY29tcG9zZUluZGV4KTsKICB9LAoKICAv
        KioKICAgIEFwcGx5IGFsbCBvcGVyYXRpb25zLCByZWR1Y2luZyB0aGVtIHRv
        IHJldGFpbjpuLCBmb3IgYG5gLCB0aGUgbnVtYmVyIG9mCiAgICBpdGVtcyBp
        biB0aGUgYXJyYXkuCgogICAgYGNhbGxiYWNrYCB3aWxsIGJlIGNhbGxlZCBm
        b3IgZWFjaCBvcGVyYXRpb24gYW5kIHdpbGwgYmUgcGFzc2VkIHRoZSBmb2xs
        b3dpbmcgYXJndW1lbnRzOgogICAgICAqIHthcnJheX0gaXRlbXMgVGhlIGl0
        ZW1zIGZvciB0aGUgZ2l2ZW4gb3BlcmF0aW9uCiAgICAgICoge251bWJlcn0g
        b2Zmc2V0IFRoZSBjb21wdXRlZCBvZmZzZXQgb2YgdGhlIGl0ZW1zLCBpZSB0
        aGUgaW5kZXggaW4gdGhlCiAgICAgIGFycmF5IG9mIHRoZSBmaXJzdCBpdGVt
        IGZvciB0aGlzIG9wZXJhdGlvbi4KICAgICAgKiB7c3RyaW5nfSBvcGVyYXRp
        b24gVGhlIHR5cGUgb2YgdGhlIG9wZXJhdGlvbi4gIE9uZSBvZgogICAgICBg
        RW1iZXIuVHJhY2tlZEFycmF5LntSRVRBSU4sIERFTEVURSwgSU5TRVJUfWAK
        CiAgICBAbWV0aG9kIGFwcGx5CiAgICBAcGFyYW0ge2Z1bmN0aW9ufSBjYWxs
        YmFjawogICovCiAgYXBwbHk6IGZ1bmN0aW9uIChjYWxsYmFjaykgewogICAg
        dmFyIGl0ZW1zID0gW10sCiAgICAgICAgb2Zmc2V0ID0gMDsKCiAgICBmb3JF
        YWNoKHRoaXMuX29wZXJhdGlvbnMsIGZ1bmN0aW9uIChhcnJheU9wZXJhdGlv
        bikgewogICAgICBjYWxsYmFjayhhcnJheU9wZXJhdGlvbi5pdGVtcywgb2Zm
        c2V0LCBhcnJheU9wZXJhdGlvbi50eXBlKTsKCiAgICAgIGlmIChhcnJheU9w
        ZXJhdGlvbi50eXBlICE9PSBERUxFVEUpIHsKICAgICAgICBvZmZzZXQgKz0g
        YXJyYXlPcGVyYXRpb24uY291bnQ7CiAgICAgICAgaXRlbXMgPSBpdGVtcy5j
        b25jYXQoYXJyYXlPcGVyYXRpb24uaXRlbXMpOwogICAgICB9CiAgICB9KTsK
        CiAgICB0aGlzLl9vcGVyYXRpb25zID0gW25ldyBBcnJheU9wZXJhdGlvbihS
        RVRBSU4sIGl0ZW1zLmxlbmd0aCwgaXRlbXMpXTsKICB9LAoKICAvKioKICAg
        IFJldHVybiBhbiBBcnJheU9wZXJhdGlvbk1hdGNoIGZvciB0aGUgb3BlcmF0
        aW9uIHRoYXQgY29udGFpbnMgdGhlIGl0ZW0gYXQgYGluZGV4YC4KCiAgICBA
        bWV0aG9kIF9maW5kQXJyYXlPcGVyYXRpb24KCiAgICBAcGFyYW0ge251bWJl
        cn0gaW5kZXggdGhlIGluZGV4IG9mIHRoZSBpdGVtIHdob3NlIG9wZXJhdGlv
        biBpbmZvcm1hdGlvbgogICAgc2hvdWxkIGJlIHJldHVybmVkLgogICAgQHBy
        aXZhdGUKICAqLwogIF9maW5kQXJyYXlPcGVyYXRpb246IGZ1bmN0aW9uIChp
        bmRleCkgewogICAgdmFyIGFycmF5T3BlcmF0aW9uSW5kZXgsCiAgICAgICAg
        bGVuLAogICAgICAgIHNwbGl0ID0gZmFsc2UsCiAgICAgICAgYXJyYXlPcGVy
        YXRpb24sCiAgICAgICAgYXJyYXlPcGVyYXRpb25SYW5nZVN0YXJ0LAogICAg
        ICAgIGFycmF5T3BlcmF0aW9uUmFuZ2VFbmQ7CgogICAgLy8gT1BUSU1JWkU6
        IHdlIGNvdWxkIHNlYXJjaCB0aGVzZSBmYXN0ZXIgaWYgd2Uga2VwdCBhIGJh
        bGFuY2VkIHRyZWUuCiAgICAvLyBmaW5kIGxlZnRtb3N0IGFycmF5T3BlcmF0
        aW9uIHRvIHRoZSByaWdodCBvZiBgaW5kZXhgCiAgICBmb3IgKGFycmF5T3Bl
        cmF0aW9uSW5kZXggPSBhcnJheU9wZXJhdGlvblJhbmdlU3RhcnQgPSAwLCBs
        ZW4gPSB0aGlzLl9vcGVyYXRpb25zLmxlbmd0aDsgYXJyYXlPcGVyYXRpb25J
        bmRleCA8IGxlbjsgKythcnJheU9wZXJhdGlvbkluZGV4KSB7CiAgICAgIGFy
        cmF5T3BlcmF0aW9uID0gdGhpcy5fb3BlcmF0aW9uc1thcnJheU9wZXJhdGlv
        bkluZGV4XTsKCiAgICAgIGlmIChhcnJheU9wZXJhdGlvbi50eXBlID09PSBE
        RUxFVEUpIHsgY29udGludWU7IH0KCiAgICAgIGFycmF5T3BlcmF0aW9uUmFu
        Z2VFbmQgPSBhcnJheU9wZXJhdGlvblJhbmdlU3RhcnQgKyBhcnJheU9wZXJh
        dGlvbi5jb3VudCAtIDE7CgogICAgICBpZiAoaW5kZXggPT09IGFycmF5T3Bl
        cmF0aW9uUmFuZ2VTdGFydCkgewogICAgICAgIGJyZWFrOwogICAgICB9IGVs
        c2UgaWYgKGluZGV4ID4gYXJyYXlPcGVyYXRpb25SYW5nZVN0YXJ0ICYmIGlu
        ZGV4IDw9IGFycmF5T3BlcmF0aW9uUmFuZ2VFbmQpIHsKICAgICAgICBzcGxp
        dCA9IHRydWU7CiAgICAgICAgYnJlYWs7CiAgICAgIH0gZWxzZSB7CiAgICAg
        ICAgYXJyYXlPcGVyYXRpb25SYW5nZVN0YXJ0ID0gYXJyYXlPcGVyYXRpb25S
        YW5nZUVuZCArIDE7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gbmV3IEFy
        cmF5T3BlcmF0aW9uTWF0Y2goYXJyYXlPcGVyYXRpb24sIGFycmF5T3BlcmF0
        aW9uSW5kZXgsIHNwbGl0LCBhcnJheU9wZXJhdGlvblJhbmdlU3RhcnQpOwog
        IH0sCgogIF9zcGxpdDogZnVuY3Rpb24gKGFycmF5T3BlcmF0aW9uSW5kZXgs
        IHNwbGl0SW5kZXgsIG5ld0FycmF5T3BlcmF0aW9uKSB7CiAgICB2YXIgYXJy
        YXlPcGVyYXRpb24gPSB0aGlzLl9vcGVyYXRpb25zW2FycmF5T3BlcmF0aW9u
        SW5kZXhdLAogICAgICAgIHNwbGl0SXRlbXMgPSBhcnJheU9wZXJhdGlvbi5p
        dGVtcy5zbGljZShzcGxpdEluZGV4KSwKICAgICAgICBzcGxpdEFycmF5T3Bl
        cmF0aW9uID0gbmV3IEFycmF5T3BlcmF0aW9uKGFycmF5T3BlcmF0aW9uLnR5
        cGUsIHNwbGl0SXRlbXMubGVuZ3RoLCBzcGxpdEl0ZW1zKTsKCiAgICAvLyB0
        cnVuY2F0ZSBMSFMKICAgIGFycmF5T3BlcmF0aW9uLmNvdW50ID0gc3BsaXRJ
        bmRleDsKICAgIGFycmF5T3BlcmF0aW9uLml0ZW1zID0gYXJyYXlPcGVyYXRp
        b24uaXRlbXMuc2xpY2UoMCwgc3BsaXRJbmRleCk7CgogICAgdGhpcy5fb3Bl
        cmF0aW9ucy5zcGxpY2UoYXJyYXlPcGVyYXRpb25JbmRleCArIDEsIDAsIG5l
        d0FycmF5T3BlcmF0aW9uLCBzcGxpdEFycmF5T3BlcmF0aW9uKTsKICB9LAoK
        ICAvLyBzZWUgU3ViQXJyYXkgZm9yIGEgYmV0dGVyIGltcGxlbWVudGF0aW9u
        LgogIF9jb21wb3NlSW5zZXJ0OiBmdW5jdGlvbiAoaW5kZXgpIHsKICAgIHZh
        ciBuZXdBcnJheU9wZXJhdGlvbiA9IHRoaXMuX29wZXJhdGlvbnNbaW5kZXhd
        LAogICAgICAgIGxlZnRBcnJheU9wZXJhdGlvbiA9IHRoaXMuX29wZXJhdGlv
        bnNbaW5kZXgtMV0sIC8vIG1heSBiZSB1bmRlZmluZWQKICAgICAgICByaWdo
        dEFycmF5T3BlcmF0aW9uID0gdGhpcy5fb3BlcmF0aW9uc1tpbmRleCsxXSwg
        Ly8gbWF5IGJlIHVuZGVmaW5lZAogICAgICAgIGxlZnRPcCA9IGxlZnRBcnJh
        eU9wZXJhdGlvbiAmJiBsZWZ0QXJyYXlPcGVyYXRpb24udHlwZSwKICAgICAg
        ICByaWdodE9wID0gcmlnaHRBcnJheU9wZXJhdGlvbiAmJiByaWdodEFycmF5
        T3BlcmF0aW9uLnR5cGU7CgogICAgaWYgKGxlZnRPcCA9PT0gSU5TRVJUKSB7
        CiAgICAgICAgLy8gbWVyZ2UgbGVmdAogICAgICAgIGxlZnRBcnJheU9wZXJh
        dGlvbi5jb3VudCArPSBuZXdBcnJheU9wZXJhdGlvbi5jb3VudDsKICAgICAg
        ICBsZWZ0QXJyYXlPcGVyYXRpb24uaXRlbXMgPSBsZWZ0QXJyYXlPcGVyYXRp
        b24uaXRlbXMuY29uY2F0KG5ld0FycmF5T3BlcmF0aW9uLml0ZW1zKTsKCiAg
        ICAgIGlmIChyaWdodE9wID09PSBJTlNFUlQpIHsKICAgICAgICAvLyBhbHNv
        IG1lcmdlIHJpZ2h0ICh3ZSBoYXZlIHNwbGl0IGFuIGluc2VydCB3aXRoIGFu
        IGluc2VydCkKICAgICAgICBsZWZ0QXJyYXlPcGVyYXRpb24uY291bnQgKz0g
        cmlnaHRBcnJheU9wZXJhdGlvbi5jb3VudDsKICAgICAgICBsZWZ0QXJyYXlP
        cGVyYXRpb24uaXRlbXMgPSBsZWZ0QXJyYXlPcGVyYXRpb24uaXRlbXMuY29u
        Y2F0KHJpZ2h0QXJyYXlPcGVyYXRpb24uaXRlbXMpOwogICAgICAgIHRoaXMu
        X29wZXJhdGlvbnMuc3BsaWNlKGluZGV4LCAyKTsKICAgICAgfSBlbHNlIHsK
        ICAgICAgICAvLyBvbmx5IG1lcmdlIGxlZnQKICAgICAgICB0aGlzLl9vcGVy
        YXRpb25zLnNwbGljZShpbmRleCwgMSk7CiAgICAgIH0KICAgIH0gZWxzZSBp
        ZiAocmlnaHRPcCA9PT0gSU5TRVJUKSB7CiAgICAgIC8vIG1lcmdlIHJpZ2h0
        CiAgICAgIG5ld0FycmF5T3BlcmF0aW9uLmNvdW50ICs9IHJpZ2h0QXJyYXlP
        cGVyYXRpb24uY291bnQ7CiAgICAgIG5ld0FycmF5T3BlcmF0aW9uLml0ZW1z
        ID0gbmV3QXJyYXlPcGVyYXRpb24uaXRlbXMuY29uY2F0KHJpZ2h0QXJyYXlP
        cGVyYXRpb24uaXRlbXMpOwogICAgICB0aGlzLl9vcGVyYXRpb25zLnNwbGlj
        ZShpbmRleCArIDEsIDEpOwogICAgfQogIH0sCgogIF9jb21wb3NlRGVsZXRl
        OiBmdW5jdGlvbiAoaW5kZXgpIHsKICAgIHZhciBhcnJheU9wZXJhdGlvbiA9
        IHRoaXMuX29wZXJhdGlvbnNbaW5kZXhdLAogICAgICAgIGRlbGV0ZXNUb0dv
        ID0gYXJyYXlPcGVyYXRpb24uY291bnQsCiAgICAgICAgbGVmdEFycmF5T3Bl
        cmF0aW9uID0gdGhpcy5fb3BlcmF0aW9uc1tpbmRleC0xXSwgLy8gbWF5IGJl
        IHVuZGVmaW5lZAogICAgICAgIGxlZnRPcCA9IGxlZnRBcnJheU9wZXJhdGlv
        biAmJiBsZWZ0QXJyYXlPcGVyYXRpb24udHlwZSwKICAgICAgICBuZXh0QXJy
        YXlPcGVyYXRpb24sCiAgICAgICAgbmV4dE9wLAogICAgICAgIG5leHRDb3Vu
        dCwKICAgICAgICByZW1vdmVOZXdBbmROZXh0T3AgPSBmYWxzZSwKICAgICAg
        ICByZW1vdmVkSXRlbXMgPSBbXTsKCiAgICBpZiAobGVmdE9wID09PSBERUxF
        VEUpIHsKICAgICAgYXJyYXlPcGVyYXRpb24gPSBsZWZ0QXJyYXlPcGVyYXRp
        b247CiAgICAgIGluZGV4IC09IDE7CiAgICB9CgogICAgZm9yICh2YXIgaSA9
        IGluZGV4ICsgMTsgZGVsZXRlc1RvR28gPiAwOyArK2kpIHsKICAgICAgbmV4
        dEFycmF5T3BlcmF0aW9uID0gdGhpcy5fb3BlcmF0aW9uc1tpXTsKICAgICAg
        bmV4dE9wID0gbmV4dEFycmF5T3BlcmF0aW9uLnR5cGU7CiAgICAgIG5leHRD
        b3VudCA9IG5leHRBcnJheU9wZXJhdGlvbi5jb3VudDsKCiAgICAgIGlmIChu
        ZXh0T3AgPT09IERFTEVURSkgewogICAgICAgIGFycmF5T3BlcmF0aW9uLmNv
        dW50ICs9IG5leHRDb3VudDsKICAgICAgICBjb250aW51ZTsKICAgICAgfQoK
        ICAgICAgaWYgKG5leHRDb3VudCA+IGRlbGV0ZXNUb0dvKSB7CiAgICAgICAg
        Ly8gZDoyIHtyLGl9OjUgIHdlIHJlZHVjZSB0aGUgcmV0YWluIG9yIGluc2Vy
        dCwgYnV0IGl0IHN0YXlzCiAgICAgICAgcmVtb3ZlZEl0ZW1zID0gcmVtb3Zl
        ZEl0ZW1zLmNvbmNhdChuZXh0QXJyYXlPcGVyYXRpb24uaXRlbXMuc3BsaWNl
        KDAsIGRlbGV0ZXNUb0dvKSk7CiAgICAgICAgbmV4dEFycmF5T3BlcmF0aW9u
        LmNvdW50IC09IGRlbGV0ZXNUb0dvOwoKICAgICAgICAvLyBJbiB0aGUgY2Fz
        ZSB3aGVyZSB3ZSB0cnVuY2F0ZSB0aGUgbGFzdCBhcnJheU9wZXJhdGlvbiwg
        d2UgZG9uJ3QgbmVlZCB0bwogICAgICAgIC8vIHJlbW92ZSBpdDsgYWxzbyB0
        aGUgZGVsZXRlc1RvR28gcmVkdWN0aW9uIGlzIG5vdCB0aGUgZW50aXJldHkg
        b2YKICAgICAgICAvLyBuZXh0Q291bnQKICAgICAgICBpIC09IDE7CiAgICAg
        ICAgbmV4dENvdW50ID0gZGVsZXRlc1RvR287CgogICAgICAgIGRlbGV0ZXNU
        b0dvID0gMDsKICAgICAgfSBlbHNlIHsKICAgICAgICBpZiAobmV4dENvdW50
        ID09PSBkZWxldGVzVG9HbykgewogICAgICAgICAgLy8gSGFuZGxlIGVkZ2Ug
        Y2FzZSBvZiBkOjIgaToyIGluIHdoaWNoIGNhc2UgYm90aCBvcGVyYXRpb25z
        IGdvIGF3YXkKICAgICAgICAgIC8vIGR1cmluZyBjb21wb3NpdGlvbi4KICAg
        ICAgICAgIHJlbW92ZU5ld0FuZE5leHRPcCA9IHRydWU7CiAgICAgICAgfQog
        ICAgICAgIHJlbW92ZWRJdGVtcyA9IHJlbW92ZWRJdGVtcy5jb25jYXQobmV4
        dEFycmF5T3BlcmF0aW9uLml0ZW1zKTsKICAgICAgICBkZWxldGVzVG9HbyAt
        PSBuZXh0Q291bnQ7CiAgICAgIH0KCiAgICAgIGlmIChuZXh0T3AgPT09IElO
        U0VSVCkgewogICAgICAgIC8vIGQ6MiBpOjMgd2lsbCByZXN1bHQgaW4gZGVs
        ZXRlIGdvaW5nIGF3YXkKICAgICAgICBhcnJheU9wZXJhdGlvbi5jb3VudCAt
        PSBuZXh0Q291bnQ7CiAgICAgIH0KICAgIH0KCiAgICBpZiAoYXJyYXlPcGVy
        YXRpb24uY291bnQgPiAwKSB7CiAgICAgIC8vIGNvbXBvc2Ugb3VyIG5ldyBk
        ZWxldGUgd2l0aCBwb3NzaWJseSBzZXZlcmFsIG9wZXJhdGlvbnMgdG8gdGhl
        IHJpZ2h0IG9mCiAgICAgIC8vIGRpc3BhcmF0ZSB0eXBlcwogICAgICB0aGlz
        Ll9vcGVyYXRpb25zLnNwbGljZShpbmRleCsxLCBpLTEtaW5kZXgpOwogICAg
        fSBlbHNlIHsKICAgICAgLy8gVGhlIGRlbGV0ZSBvcGVyYXRpb24gY2FuIGdv
        IGF3YXk7IGl0IGhhcyBtZXJlbHkgcmVkdWNlZCBzb21lIG90aGVyCiAgICAg
        IC8vIG9wZXJhdGlvbiwgYXMgaW4gZDozIGk6NDsgaXQgbWF5IGFsc28gaGF2
        ZSBlbGltaW5hdGVkIHRoYXQgb3BlcmF0aW9uLAogICAgICAvLyBhcyBpbiBk
        OjMgaTozLgogICAgICB0aGlzLl9vcGVyYXRpb25zLnNwbGljZShpbmRleCwg
        cmVtb3ZlTmV3QW5kTmV4dE9wID8gMiA6IDEpOwogICAgfQoKICAgIHJldHVy
        biByZW1vdmVkSXRlbXM7CiAgfSwKCiAgdG9TdHJpbmc6IGZ1bmN0aW9uICgp
        IHsKICAgIHZhciBzdHIgPSAiIjsKICAgIGZvckVhY2godGhpcy5fb3BlcmF0
        aW9ucywgZnVuY3Rpb24gKG9wZXJhdGlvbikgewogICAgICBzdHIgKz0gIiAi
        ICsgb3BlcmF0aW9uLnR5cGUgKyAiOiIgKyBvcGVyYXRpb24uY291bnQ7CiAg
        ICB9KTsKICAgIHJldHVybiBzdHIuc3Vic3RyaW5nKDEpOwogIH0KfTsKCi8q
        KgogIEludGVybmFsIGRhdGEgc3RydWN0dXJlIHRvIHJlcHJlc2VudCBhbiBh
        cnJheSBvcGVyYXRpb24uCgogIEBtZXRob2QgQXJyYXlPcGVyYXRpb24KICBA
        cHJpdmF0ZQogIEBwcm9wZXJ0eSB7c3RyaW5nfSB0eXBlIFRoZSB0eXBlIG9m
        IHRoZSBvcGVyYXRpb24uICBPbmUgb2YKICBgRW1iZXIuVHJhY2tlZEFycmF5
        LntSRVRBSU4sIElOU0VSVCwgREVMRVRFfWAKICBAcHJvcGVydHkge251bWJl
        cn0gY291bnQgVGhlIG51bWJlciBvZiBpdGVtcyBpbiB0aGlzIG9wZXJhdGlv
        bi4KICBAcHJvcGVydHkge2FycmF5fSBpdGVtcyBUaGUgaXRlbXMgb2YgdGhl
        IG9wZXJhdGlvbiwgaWYgaW5jbHVkZWQuICBSRVRBSU4gYW5kCiAgSU5TRVJU
        IGluY2x1ZGUgdGhlaXIgaXRlbXMsIERFTEVURSBkb2VzIG5vdC4KKi8KZnVu
        Y3Rpb24gQXJyYXlPcGVyYXRpb24gKG9wZXJhdGlvbiwgY291bnQsIGl0ZW1z
        KSB7CiAgdGhpcy50eXBlID0gb3BlcmF0aW9uOyAvLyBSRVRBSU4gfCBJTlNF
        UlQgfCBERUxFVEUKICB0aGlzLmNvdW50ID0gY291bnQ7CiAgdGhpcy5pdGVt
        cyA9IGl0ZW1zOwp9CgovKioKICBJbnRlcm5hbCBkYXRhIHN0cnVjdHVyZSB1
        c2VkIHRvIGluY2x1ZGUgaW5mb3JtYXRpb24gd2hlbiBsb29raW5nIHVwIG9w
        ZXJhdGlvbnMKICBieSBpdGVtIGluZGV4LgoKICBAbWV0aG9kIEFycmF5T3Bl
        cmF0aW9uTWF0Y2gKICBAcHJpdmF0ZQogIEBwcm9wZXJ0eSB7QXJyYXlPcGVy
        YXRpb259IG9wZXJhdGlvbgogIEBwcm9wZXJ0eSB7bnVtYmVyfSBpbmRleCBU
        aGUgaW5kZXggb2YgYG9wZXJhdGlvbmAgaW4gdGhlIGFycmF5IG9mIG9wZXJh
        dGlvbnMuCiAgQHByb3BlcnR5IHtib29sZWFufSBzcGxpdCBXaGV0aGVyIG9y
        IG5vdCB0aGUgaXRlbSBpbmRleCBzZWFyY2hlZCBmb3Igd291bGQKICByZXF1
        aXJlIGEgc3BsaXQgZm9yIGEgbmV3IG9wZXJhdGlvbiB0eXBlLgogIEBwcm9w
        ZXJ0eSB7bnVtYmVyfSByYW5nZVN0YXJ0IFRoZSBpbmRleCBvZiB0aGUgZmly
        c3QgaXRlbSBpbiB0aGUgb3BlcmF0aW9uLAogIHdpdGggcmVzcGVjdCB0byB0
        aGUgdHJhY2tlZCBhcnJheS4gIFRoZSBpbmRleCBvZiB0aGUgbGFzdCBpdGVt
        IGNhbiBiZSBjb21wdXRlZAogIGZyb20gYHJhbmdlU3RhcnRgIGFuZCBgb3Bl
        cmF0aW9uLmNvdW50YC4KKi8KZnVuY3Rpb24gQXJyYXlPcGVyYXRpb25NYXRj
        aChvcGVyYXRpb24sIGluZGV4LCBzcGxpdCwgcmFuZ2VTdGFydCkgewogIHRo
        aXMub3BlcmF0aW9uID0gb3BlcmF0aW9uOwogIHRoaXMuaW5kZXggPSBpbmRl
        eDsKICB0aGlzLnNwbGl0ID0gc3BsaXQ7CiAgdGhpcy5yYW5nZVN0YXJ0ID0g
        cmFuZ2VTdGFydDsKfQoKfSkoKTsKCgoKKGZ1bmN0aW9uKCkgewp2YXIgZ2V0
        ID0gRW1iZXIuZ2V0LAogICAgZm9yRWFjaCA9IEVtYmVyLkVudW1lcmFibGVV
        dGlscy5mb3JFYWNoLAogICAgUkVUQUlOID0gJ3InLAogICAgRklMVEVSID0g
        J2YnOwoKZnVuY3Rpb24gT3BlcmF0aW9uICh0eXBlLCBjb3VudCkgewogIHRo
        aXMudHlwZSA9IHR5cGU7CiAgdGhpcy5jb3VudCA9IGNvdW50Owp9CgovKioK
        ICBBbiBgRW1iZXIuU3ViQXJyYXlgIHRyYWNrcyBhbiBhcnJheSBpbiBhIHdh
        eSBzaW1pbGFyIHRvLCBidXQgbW9yZSBzcGVjaWFsaXplZAogIHRoYW4sIGBF
        bWJlci5UcmFja2VkQXJyYXlgLiAgSXQgaXMgdXNlZnVsIGZvciBrZWVwaW5n
        IHRyYWNrIG9mIHRoZSBpbmRleGVzIG9mCiAgaXRlbXMgd2l0aGluIGEgZmls
        dGVyZWQgYXJyYXkuCgogIEBjbGFzcyBTdWJBcnJheQogIEBuYW1lc3BhY2Ug
        RW1iZXIKKi8KRW1iZXIuU3ViQXJyYXkgPSBmdW5jdGlvbiAobGVuZ3RoKSB7
        CiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPCAxKSB7IGxlbmd0aCA9IDA7IH0K
        CiAgaWYgKGxlbmd0aCA+IDApIHsKICAgIHRoaXMuX29wZXJhdGlvbnMgPSBb
        bmV3IE9wZXJhdGlvbihSRVRBSU4sIGxlbmd0aCldOwogIH0gZWxzZSB7CiAg
        ICB0aGlzLl9vcGVyYXRpb25zID0gW107CiAgfQp9OwoKRW1iZXIuU3ViQXJy
        YXkucHJvdG90eXBlID0gewogIC8qKgogICAgVHJhY2sgdGhhdCBhbiBpdGVt
        IHdhcyBhZGRlZCB0byB0aGUgdHJhY2tlZCBhcnJheS4KCiAgICBAbWV0aG9k
        IGFkZEl0ZW0KCiAgICBAcGFyYW0ge251bWJlcn0gaW5kZXggVGhlIGluZGV4
        IG9mIHRoZSBpdGVtIGluIHRoZSB0cmFja2VkIGFycmF5LgogICAgQHBhcmFt
        IHtib29sZWFufSBtYXRjaCBgdHJ1ZWAgaWZmIHRoZSBpdGVtIGlzIGluY2x1
        ZGVkIGluIHRoZSBzdWJhcnJheS4KCiAgICBAcmV0dXJuIHtudW1iZXJ9IFRo
        ZSBpbmRleCBvZiB0aGUgaXRlbSBpbiB0aGUgc3ViYXJyYXkuCiAgKi8KICBh
        ZGRJdGVtOiBmdW5jdGlvbihpbmRleCwgbWF0Y2gpIHsKICAgIHZhciByZXR1
        cm5WYWx1ZSA9IC0xLAogICAgICAgIGl0ZW1UeXBlID0gbWF0Y2ggPyBSRVRB
        SU4gOiBGSUxURVIsCiAgICAgICAgc2VsZiA9IHRoaXM7CgogICAgdGhpcy5f
        ZmluZE9wZXJhdGlvbihpbmRleCwgZnVuY3Rpb24ob3BlcmF0aW9uLCBvcGVy
        YXRpb25JbmRleCwgcmFuZ2VTdGFydCwgcmFuZ2VFbmQsIHNlZW5JblN1YkFy
        cmF5KSB7CiAgICAgIHZhciBuZXdPcGVyYXRpb24sIHNwbGl0T3BlcmF0aW9u
        OwoKICAgICAgaWYgKGl0ZW1UeXBlID09PSBvcGVyYXRpb24udHlwZSkgewog
        ICAgICAgICsrb3BlcmF0aW9uLmNvdW50OwogICAgICB9IGVsc2UgaWYgKGlu
        ZGV4ID09PSByYW5nZVN0YXJ0KSB7CiAgICAgICAgLy8gaW5zZXJ0IHRvIHRo
        ZSBsZWZ0IG9mIGBvcGVyYXRpb25gCiAgICAgICAgc2VsZi5fb3BlcmF0aW9u
        cy5zcGxpY2Uob3BlcmF0aW9uSW5kZXgsIDAsIG5ldyBPcGVyYXRpb24oaXRl
        bVR5cGUsIDEpKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBuZXdPcGVyYXRp
        b24gPSBuZXcgT3BlcmF0aW9uKGl0ZW1UeXBlLCAxKTsKICAgICAgICBzcGxp
        dE9wZXJhdGlvbiA9IG5ldyBPcGVyYXRpb24ob3BlcmF0aW9uLnR5cGUsIHJh
        bmdlRW5kIC0gaW5kZXggKyAxKTsKICAgICAgICBvcGVyYXRpb24uY291bnQg
        PSBpbmRleCAtIHJhbmdlU3RhcnQ7CgogICAgICAgIHNlbGYuX29wZXJhdGlv
        bnMuc3BsaWNlKG9wZXJhdGlvbkluZGV4ICsgMSwgMCwgbmV3T3BlcmF0aW9u
        LCBzcGxpdE9wZXJhdGlvbik7CiAgICAgIH0KCiAgICAgIGlmIChtYXRjaCkg
        ewogICAgICAgIGlmIChvcGVyYXRpb24udHlwZSA9PT0gUkVUQUlOKSB7CiAg
        ICAgICAgICByZXR1cm5WYWx1ZSA9IHNlZW5JblN1YkFycmF5ICsgKGluZGV4
        IC0gcmFuZ2VTdGFydCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJl
        dHVyblZhbHVlID0gc2VlbkluU3ViQXJyYXk7CiAgICAgICAgfQogICAgICB9
        CgogICAgICBzZWxmLl9jb21wb3NlQXQob3BlcmF0aW9uSW5kZXgpOwogICAg
        fSwgZnVuY3Rpb24oc2VlbkluU3ViQXJyYXkpIHsKICAgICAgc2VsZi5fb3Bl
        cmF0aW9ucy5wdXNoKG5ldyBPcGVyYXRpb24oaXRlbVR5cGUsIDEpKTsKCiAg
        ICAgIGlmIChtYXRjaCkgewogICAgICAgIHJldHVyblZhbHVlID0gc2Vlbklu
        U3ViQXJyYXk7CiAgICAgIH0KCiAgICAgIHNlbGYuX2NvbXBvc2VBdChzZWxm
        Ll9vcGVyYXRpb25zLmxlbmd0aC0xKTsKICAgIH0pOwoKICAgIHJldHVybiBy
        ZXR1cm5WYWx1ZTsKICB9LAoKICAvKioKICAgIFRyYWNrIHRoYXQgYW4gaXRl
        bSB3YXMgcmVtb3ZlZCBmcm9tIHRoZSB0cmFja2VkIGFycmF5LgoKICAgIEBt
        ZXRob2QgcmVtb3ZlSXRlbQoKICAgIEBwYXJhbSB7bnVtYmVyfSBpbmRleCBU
        aGUgaW5kZXggb2YgdGhlIGl0ZW0gaW4gdGhlIHRyYWNrZWQgYXJyYXkuCgog
        ICAgQHJldHVybiB7bnVtYmVyfSBUaGUgaW5kZXggb2YgdGhlIGl0ZW0gaW4g
        dGhlIHN1YmFycmF5LCBvciBgLTFgIGlmIHRoZSBpdGVtCiAgICB3YXMgbm90
        IGluIHRoZSBzdWJhcnJheS4KICAqLwogIHJlbW92ZUl0ZW06IGZ1bmN0aW9u
        KGluZGV4KSB7CiAgICB2YXIgcmV0dXJuVmFsdWUgPSAtMSwKICAgICAgICBz
        ZWxmID0gdGhpczsKCiAgICB0aGlzLl9maW5kT3BlcmF0aW9uKGluZGV4LCBm
        dW5jdGlvbiAob3BlcmF0aW9uLCBvcGVyYXRpb25JbmRleCwgcmFuZ2VTdGFy
        dCwgcmFuZ2VFbmQsIHNlZW5JblN1YkFycmF5KSB7CiAgICAgIGlmIChvcGVy
        YXRpb24udHlwZSA9PT0gUkVUQUlOKSB7CiAgICAgICAgcmV0dXJuVmFsdWUg
        PSBzZWVuSW5TdWJBcnJheSArIChpbmRleCAtIHJhbmdlU3RhcnQpOwogICAg
        ICB9CgogICAgICBpZiAob3BlcmF0aW9uLmNvdW50ID4gMSkgewogICAgICAg
        IC0tb3BlcmF0aW9uLmNvdW50OwogICAgICB9IGVsc2UgewogICAgICAgIHNl
        bGYuX29wZXJhdGlvbnMuc3BsaWNlKG9wZXJhdGlvbkluZGV4LCAxKTsKICAg
        ICAgICBzZWxmLl9jb21wb3NlQXQob3BlcmF0aW9uSW5kZXgpOwogICAgICB9
        CiAgICB9LCBmdW5jdGlvbigpIHsKICAgICAgdGhyb3cgbmV3IEVtYmVyLkVy
        cm9yKCJDYW4ndCByZW1vdmUgYW4gaXRlbSB0aGF0IGhhcyBuZXZlciBiZWVu
        IGFkZGVkLiIpOwogICAgfSk7CgogICAgcmV0dXJuIHJldHVyblZhbHVlOwog
        IH0sCgoKICBfZmluZE9wZXJhdGlvbjogZnVuY3Rpb24gKGluZGV4LCBmb3Vu
        ZENhbGxiYWNrLCBub3RGb3VuZENhbGxiYWNrKSB7CiAgICB2YXIgb3BlcmF0
        aW9uSW5kZXgsCiAgICAgICAgbGVuLAogICAgICAgIG9wZXJhdGlvbiwKICAg
        ICAgICByYW5nZVN0YXJ0LAogICAgICAgIHJhbmdlRW5kLAogICAgICAgIHNl
        ZW5JblN1YkFycmF5ID0gMDsKCiAgICAvLyBPUFRJTUlaRTogY2hhbmdlIHRv
        IGJhbGFuY2VkIHRyZWUKICAgIC8vIGZpbmQgbGVmdG1vc3Qgb3BlcmF0aW9u
        IHRvIHRoZSByaWdodCBvZiBgaW5kZXhgCiAgICBmb3IgKG9wZXJhdGlvbklu
        ZGV4ID0gcmFuZ2VTdGFydCA9IDAsIGxlbiA9IHRoaXMuX29wZXJhdGlvbnMu
        bGVuZ3RoOyBvcGVyYXRpb25JbmRleCA8IGxlbjsgcmFuZ2VTdGFydCA9IHJh
        bmdlRW5kICsgMSwgKytvcGVyYXRpb25JbmRleCkgewogICAgICBvcGVyYXRp
        b24gPSB0aGlzLl9vcGVyYXRpb25zW29wZXJhdGlvbkluZGV4XTsKICAgICAg
        cmFuZ2VFbmQgPSByYW5nZVN0YXJ0ICsgb3BlcmF0aW9uLmNvdW50IC0gMTsK
        CiAgICAgIGlmIChpbmRleCA+PSByYW5nZVN0YXJ0ICYmIGluZGV4IDw9IHJh
        bmdlRW5kKSB7CiAgICAgICAgZm91bmRDYWxsYmFjayhvcGVyYXRpb24sIG9w
        ZXJhdGlvbkluZGV4LCByYW5nZVN0YXJ0LCByYW5nZUVuZCwgc2VlbkluU3Vi
        QXJyYXkpOwogICAgICAgIHJldHVybjsKICAgICAgfSBlbHNlIGlmIChvcGVy
        YXRpb24udHlwZSA9PT0gUkVUQUlOKSB7CiAgICAgICAgc2VlbkluU3ViQXJy
        YXkgKz0gb3BlcmF0aW9uLmNvdW50OwogICAgICB9CiAgICB9CgogICAgbm90
        Rm91bmRDYWxsYmFjayhzZWVuSW5TdWJBcnJheSk7CiAgfSwKCiAgX2NvbXBv
        c2VBdDogZnVuY3Rpb24oaW5kZXgpIHsKICAgIHZhciBvcCA9IHRoaXMuX29w
        ZXJhdGlvbnNbaW5kZXhdLAogICAgICAgIG90aGVyT3A7CgogICAgaWYgKCFv
        cCkgewogICAgICAvLyBDb21wb3Npbmcgb3V0IG9mIGJvdW5kcyBpcyBhIG5v
        LW9wLCBhcyB3aGVuIHJlbW92aW5nIHRoZSBsYXN0IG9wZXJhdGlvbgogICAg
        ICAvLyBpbiB0aGUgbGlzdC4KICAgICAgcmV0dXJuOwogICAgfQoKICAgIGlm
        IChpbmRleCA+IDApIHsKICAgICAgb3RoZXJPcCA9IHRoaXMuX29wZXJhdGlv
        bnNbaW5kZXgtMV07CiAgICAgIGlmIChvdGhlck9wLnR5cGUgPT09IG9wLnR5
        cGUpIHsKICAgICAgICBvcC5jb3VudCArPSBvdGhlck9wLmNvdW50OwogICAg
        ICAgIHRoaXMuX29wZXJhdGlvbnMuc3BsaWNlKGluZGV4LTEsIDEpOwogICAg
        ICAgIC0taW5kZXg7CiAgICAgIH0KICAgIH0KCiAgICBpZiAoaW5kZXggPCB0
        aGlzLl9vcGVyYXRpb25zLmxlbmd0aC0xKSB7CiAgICAgIG90aGVyT3AgPSB0
        aGlzLl9vcGVyYXRpb25zW2luZGV4KzFdOwogICAgICBpZiAob3RoZXJPcC50
        eXBlID09PSBvcC50eXBlKSB7CiAgICAgICAgb3AuY291bnQgKz0gb3RoZXJP
        cC5jb3VudDsKICAgICAgICB0aGlzLl9vcGVyYXRpb25zLnNwbGljZShpbmRl
        eCsxLCAxKTsKICAgICAgfQogICAgfQogIH0sCgogIHRvU3RyaW5nOiBmdW5j
        dGlvbiAoKSB7CiAgICB2YXIgc3RyID0gIiI7CiAgICBmb3JFYWNoKHRoaXMu
        X29wZXJhdGlvbnMsIGZ1bmN0aW9uIChvcGVyYXRpb24pIHsKICAgICAgc3Ry
        ICs9ICIgIiArIG9wZXJhdGlvbi50eXBlICsgIjoiICsgb3BlcmF0aW9uLmNv
        dW50OwogICAgfSk7CiAgICByZXR1cm4gc3RyLnN1YnN0cmluZygxKTsKICB9
        Cn07Cgp9KSgpOwoKCgooZnVuY3Rpb24oKSB7CkVtYmVyLkNvbnRhaW5lciA9
        IHJlcXVpcmVNb2R1bGUoJ2NvbnRhaW5lcicpOwpFbWJlci5Db250YWluZXIu
        c2V0ID0gRW1iZXIuc2V0OwoKfSkoKTsKCgoKKGZ1bmN0aW9uKCkgewovKioK
        QG1vZHVsZSBlbWJlcgpAc3VibW9kdWxlIGVtYmVyLXJ1bnRpbWUKKi8KCgov
        LyBOT1RFOiB0aGlzIG9iamVjdCBzaG91bGQgbmV2ZXIgYmUgaW5jbHVkZWQg
        ZGlyZWN0bHkuIEluc3RlYWQgdXNlIGBFbWJlci5PYmplY3RgLgovLyBXZSBv
        bmx5IGRlZmluZSB0aGlzIHNlcGFyYXRlbHkgc28gdGhhdCBgRW1iZXIuU2V0
        YCBjYW4gZGVwZW5kIG9uIGl0LgoKCnZhciBzZXQgPSBFbWJlci5zZXQsIGdl
        dCA9IEVtYmVyLmdldCwKICAgIG9fY3JlYXRlID0gRW1iZXIuY3JlYXRlLAog
        ICAgb19kZWZpbmVQcm9wZXJ0eSA9IEVtYmVyLnBsYXRmb3JtLmRlZmluZVBy
        b3BlcnR5LAogICAgR1VJRF9LRVkgPSBFbWJlci5HVUlEX0tFWSwKICAgIGd1
        aWRGb3IgPSBFbWJlci5ndWlkRm9yLAogICAgZ2VuZXJhdGVHdWlkID0gRW1i
        ZXIuZ2VuZXJhdGVHdWlkLAogICAgbWV0YSA9IEVtYmVyLm1ldGEsCiAgICBy
        ZXdhdGNoID0gRW1iZXIucmV3YXRjaCwKICAgIGZpbmlzaENoYWlucyA9IEVt
        YmVyLmZpbmlzaENoYWlucywKICAgIHNlbmRFdmVudCA9IEVtYmVyLnNlbmRF
        dmVudCwKICAgIGRlc3Ryb3kgPSBFbWJlci5kZXN0cm95LAogICAgc2NoZWR1
        bGUgPSBFbWJlci5ydW4uc2NoZWR1bGUsCiAgICBNaXhpbiA9IEVtYmVyLk1p
        eGluLAogICAgYXBwbHlNaXhpbiA9IE1peGluLl9hcHBseSwKICAgIGZpbmlz
        aFBhcnRpYWwgPSBNaXhpbi5maW5pc2hQYXJ0aWFsLAogICAgcmVvcGVuID0g
        TWl4aW4ucHJvdG90eXBlLnJlb3BlbiwKICAgIE1BTkRBVE9SWV9TRVRURVIg
        PSBFbWJlci5FTlYuTUFOREFUT1JZX1NFVFRFUiwKICAgIGluZGV4T2YgPSBF
        bWJlci5FbnVtZXJhYmxlVXRpbHMuaW5kZXhPZjsKCnZhciB1bmRlZmluZWRE
        ZXNjcmlwdG9yID0gewogIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICB3cml0YWJs
        ZTogdHJ1ZSwKICBlbnVtZXJhYmxlOiBmYWxzZSwKICB2YWx1ZTogdW5kZWZp
        bmVkCn07CgpmdW5jdGlvbiBtYWtlQ3RvcigpIHsKCiAgLy8gTm90ZTogYXZv
        aWQgYWNjZXNzaW5nIGFueSBwcm9wZXJ0aWVzIG9uIHRoZSBvYmplY3Qgc2lu
        Y2UgaXQgbWFrZXMgdGhlCiAgLy8gbWV0aG9kIGEgbG90IGZhc3Rlci4gVGhp
        cyBpcyBnbHVlIGNvZGUgc28gd2Ugd2FudCBpdCB0byBiZSBhcyBmYXN0IGFz
        CiAgLy8gcG9zc2libGUuCgogIHZhciB3YXNBcHBsaWVkID0gZmFsc2UsIGlu
        aXRNaXhpbnMsIGluaXRQcm9wZXJ0aWVzOwoKICB2YXIgQ2xhc3MgPSBmdW5j
        dGlvbigpIHsKICAgIGlmICghd2FzQXBwbGllZCkgewogICAgICBDbGFzcy5w
        cm90bygpOyAvLyBwcmVwYXJlIHByb3RvdHlwZS4uLgogICAgfQogICAgb19k
        ZWZpbmVQcm9wZXJ0eSh0aGlzLCBHVUlEX0tFWSwgdW5kZWZpbmVkRGVzY3Jp
        cHRvcik7CiAgICBvX2RlZmluZVByb3BlcnR5KHRoaXMsICdfc3VwZXInLCB1
        bmRlZmluZWREZXNjcmlwdG9yKTsKICAgIHZhciBtID0gbWV0YSh0aGlzKSwg
        cHJvdG8gPSBtLnByb3RvOwogICAgbS5wcm90byA9IHRoaXM7CiAgICBpZiAo
        aW5pdE1peGlucykgewogICAgICAvLyBjYXB0dXJlIGxvY2FsbHkgc28gd2Ug
        Y2FuIGNsZWFyIHRoZSBjbG9zZWQgb3ZlciB2YXJpYWJsZQogICAgICB2YXIg
        bWl4aW5zID0gaW5pdE1peGluczsKICAgICAgaW5pdE1peGlucyA9IG51bGw7
        CiAgICAgIHRoaXMucmVvcGVuLmFwcGx5KHRoaXMsIG1peGlucyk7CiAgICB9
        CiAgICBpZiAoaW5pdFByb3BlcnRpZXMpIHsKICAgICAgLy8gY2FwdHVyZSBs
        b2NhbGx5IHNvIHdlIGNhbiBjbGVhciB0aGUgY2xvc2VkIG92ZXIgdmFyaWFi
        bGUKICAgICAgdmFyIHByb3BzID0gaW5pdFByb3BlcnRpZXM7CiAgICAgIGlu
        aXRQcm9wZXJ0aWVzID0gbnVsbDsKCiAgICAgIHZhciBjb25jYXRlbmF0ZWRQ
        cm9wZXJ0aWVzID0gdGhpcy5jb25jYXRlbmF0ZWRQcm9wZXJ0aWVzOwoKICAg
        ICAgZm9yICh2YXIgaSA9IDAsIGwgPSBwcm9wcy5sZW5ndGg7IGkgPCBsOyBp
        KyspIHsKICAgICAgICB2YXIgcHJvcGVydGllcyA9IHByb3BzW2ldOwoKICAg
        ICAgICBFbWJlci5hc3NlcnQoIkVtYmVyLk9iamVjdC5jcmVhdGUgbm8gbG9u
        Z2VyIHN1cHBvcnRzIG1peGluZyBpbiBvdGhlciBkZWZpbml0aW9ucywgdXNl
        IGNyZWF0ZVdpdGhNaXhpbnMgaW5zdGVhZC4iLCAhKHByb3BlcnRpZXMgaW5z
        dGFuY2VvZiBFbWJlci5NaXhpbikpOwoKICAgICAgICBpZiAocHJvcGVydGll
        cyA9PT0gbnVsbCB8fCB0eXBlb2YgcHJvcGVydGllcyAhPT0gJ29iamVjdCcp
        IHsKICAgICAgICAgIEVtYmVyLmFzc2VydCgiRW1iZXIuT2JqZWN0LmNyZWF0
        ZSBvbmx5IGFjY2VwdHMgb2JqZWN0cy4iKTsKICAgICAgICAgIGNvbnRpbnVl
        OwogICAgICAgIH0KCiAgICAgICAgdmFyIGtleU5hbWVzID0gRW1iZXIua2V5
        cyhwcm9wZXJ0aWVzKTsKICAgICAgICBmb3IgKHZhciBqID0gMCwgbGwgPSBr
        ZXlOYW1lcy5sZW5ndGg7IGogPCBsbDsgaisrKSB7CiAgICAgICAgICB2YXIg
        a2V5TmFtZSA9IGtleU5hbWVzW2pdOwogICAgICAgICAgaWYgKCFwcm9wZXJ0
        aWVzLmhhc093blByb3BlcnR5KGtleU5hbWUpKSB7IGNvbnRpbnVlOyB9Cgog
        ICAgICAgICAgdmFyIHZhbHVlID0gcHJvcGVydGllc1trZXlOYW1lXSwKICAg
        ICAgICAgICAgICBJU19CSU5ESU5HID0gRW1iZXIuSVNfQklORElORzsKCiAg
        ICAgICAgICBpZiAoSVNfQklORElORy50ZXN0KGtleU5hbWUpKSB7CiAgICAg
        ICAgICAgIHZhciBiaW5kaW5ncyA9IG0uYmluZGluZ3M7CiAgICAgICAgICAg
        IGlmICghYmluZGluZ3MpIHsKICAgICAgICAgICAgICBiaW5kaW5ncyA9IG0u
        YmluZGluZ3MgPSB7fTsKICAgICAgICAgICAgfSBlbHNlIGlmICghbS5oYXNP
        d25Qcm9wZXJ0eSgnYmluZGluZ3MnKSkgewogICAgICAgICAgICAgIGJpbmRp
        bmdzID0gbS5iaW5kaW5ncyA9IG9fY3JlYXRlKG0uYmluZGluZ3MpOwogICAg
        ICAgICAgICB9CiAgICAgICAgICAgIGJpbmRpbmdzW2tleU5hbWVdID0gdmFs
        dWU7CiAgICAgICAgICB9CgogICAgICAgICAgdmFyIGRlc2MgPSBtLmRlc2Nz
        W2tleU5hbWVdOwoKICAgICAgICAgIEVtYmVyLmFzc2VydCgiRW1iZXIuT2Jq
        ZWN0LmNyZWF0ZSBubyBsb25nZXIgc3VwcG9ydHMgZGVmaW5pbmcgY29tcHV0
        ZWQgcHJvcGVydGllcy4iLCAhKHZhbHVlIGluc3RhbmNlb2YgRW1iZXIuQ29t
        cHV0ZWRQcm9wZXJ0eSkpOwogICAgICAgICAgRW1iZXIuYXNzZXJ0KCJFbWJl
        ci5PYmplY3QuY3JlYXRlIG5vIGxvbmdlciBzdXBwb3J0cyBkZWZpbmluZyBt
        ZXRob2RzIHRoYXQgY2FsbCBfc3VwZXIuIiwgISh0eXBlb2YgdmFsdWUgPT09
        ICdmdW5jdGlvbicgJiYgdmFsdWUudG9TdHJpbmcoKS5pbmRleE9mKCcuX3N1
        cGVyJykgIT09IC0xKSk7CiAgICAgICAgICBFbWJlci5hc3NlcnQoImBhY3Rp
        b25zYCBtdXN0IGJlIHByb3ZpZGVkIGF0IGV4dGVuZCB0aW1lLCBub3QgYXQg
        Y3JlYXRlIHRpbWUsIHdoZW4gRW1iZXIuQWN0aW9uSGFuZGxlciBpcyB1c2Vk
        IChpLmUuIHZpZXdzLCBjb250cm9sbGVycyAmIHJvdXRlcykuIiwgISgoa2V5
        TmFtZSA9PT0gJ2FjdGlvbnMnKSAmJiBFbWJlci5BY3Rpb25IYW5kbGVyLmRl
        dGVjdCh0aGlzKSkpOwoKICAgICAgICAgIGlmIChjb25jYXRlbmF0ZWRQcm9w
        ZXJ0aWVzICYmIGluZGV4T2YoY29uY2F0ZW5hdGVkUHJvcGVydGllcywga2V5
        TmFtZSkgPj0gMCkgewogICAgICAgICAgICB2YXIgYmFzZVZhbHVlID0gdGhp
        c1trZXlOYW1lXTsKCiAgICAgICAgICAgIGlmIChiYXNlVmFsdWUpIHsKICAg
        ICAgICAgICAgICBpZiAoJ2Z1bmN0aW9uJyA9PT0gdHlwZW9mIGJhc2VWYWx1
        ZS5jb25jYXQpIHsKICAgICAgICAgICAgICAgIHZhbHVlID0gYmFzZVZhbHVl
        LmNvbmNhdCh2YWx1ZSk7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAg
        ICAgICAgICAgIHZhbHVlID0gRW1iZXIubWFrZUFycmF5KGJhc2VWYWx1ZSku
        Y29uY2F0KHZhbHVlKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0g
        ZWxzZSB7CiAgICAgICAgICAgICAgdmFsdWUgPSBFbWJlci5tYWtlQXJyYXko
        dmFsdWUpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAg
        aWYgKGRlc2MpIHsKICAgICAgICAgICAgZGVzYy5zZXQodGhpcywga2V5TmFt
        ZSwgdmFsdWUpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgaWYg
        KHR5cGVvZiB0aGlzLnNldFVua25vd25Qcm9wZXJ0eSA9PT0gJ2Z1bmN0aW9u
        JyAmJiAhKGtleU5hbWUgaW4gdGhpcykpIHsKICAgICAgICAgICAgICB0aGlz
        LnNldFVua25vd25Qcm9wZXJ0eShrZXlOYW1lLCB2YWx1ZSk7CiAgICAgICAg
        ICAgIH0gZWxzZSBpZiAoTUFOREFUT1JZX1NFVFRFUikgewogICAgICAgICAg
        ICAgIEVtYmVyLmRlZmluZVByb3BlcnR5KHRoaXMsIGtleU5hbWUsIG51bGws
        IHZhbHVlKTsgLy8gc2V0dXAgbWFuZGF0b3J5IHNldHRlcgogICAgICAgICAg
        ICB9IGVsc2UgewogICAgICAgICAgICAgIHRoaXNba2V5TmFtZV0gPSB2YWx1
        ZTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAg
        fQogICAgfQogICAgZmluaXNoUGFydGlhbCh0aGlzLCBtKTsKICAgIHRoaXMu
        aW5pdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgbS5wcm90byA9IHBy
        b3RvOwogICAgZmluaXNoQ2hhaW5zKHRoaXMpOwogICAgc2VuZEV2ZW50KHRo
        aXMsICJpbml0Iik7CiAgfTsKCiAgQ2xhc3MudG9TdHJpbmcgPSBNaXhpbi5w
        cm90b3R5cGUudG9TdHJpbmc7CiAgQ2xhc3Mud2lsbFJlb3BlbiA9IGZ1bmN0
        aW9uKCkgewogICAgaWYgKHdhc0FwcGxpZWQpIHsKICAgICAgQ2xhc3MuUHJv
        dG90eXBlTWl4aW4gPSBNaXhpbi5jcmVhdGUoQ2xhc3MuUHJvdG90eXBlTWl4
        aW4pOwogICAgfQoKICAgIHdhc0FwcGxpZWQgPSBmYWxzZTsKICB9OwogIENs
        YXNzLl9pbml0TWl4aW5zID0gZnVuY3Rpb24oYXJncykgeyBpbml0TWl4aW5z
        ID0gYXJnczsgfTsKICBDbGFzcy5faW5pdFByb3BlcnRpZXMgPSBmdW5jdGlv
        bihhcmdzKSB7IGluaXRQcm9wZXJ0aWVzID0gYXJnczsgfTsKCiAgQ2xhc3Mu
        cHJvdG8gPSBmdW5jdGlvbigpIHsKICAgIHZhciBzdXBlcmNsYXNzID0gQ2xh
        c3Muc3VwZXJjbGFzczsKICAgIGlmIChzdXBlcmNsYXNzKSB7IHN1cGVyY2xh
        c3MucHJvdG8oKTsgfQoKICAgIGlmICghd2FzQXBwbGllZCkgewogICAgICB3
        YXNBcHBsaWVkID0gdHJ1ZTsKICAgICAgQ2xhc3MuUHJvdG90eXBlTWl4aW4u
        YXBwbHlQYXJ0aWFsKENsYXNzLnByb3RvdHlwZSk7CiAgICAgIHJld2F0Y2go
        Q2xhc3MucHJvdG90eXBlKTsKICAgIH0KCiAgICByZXR1cm4gdGhpcy5wcm90
        b3R5cGU7CiAgfTsKCiAgcmV0dXJuIENsYXNzOwoKfQoKLyoqCiAgQGNsYXNz
        IENvcmVPYmplY3QKICBAbmFtZXNwYWNlIEVtYmVyCiovCnZhciBDb3JlT2Jq
        ZWN0ID0gbWFrZUN0b3IoKTsKQ29yZU9iamVjdC50b1N0cmluZyA9IGZ1bmN0
        aW9uKCkgeyByZXR1cm4gIkVtYmVyLkNvcmVPYmplY3QiOyB9OwoKQ29yZU9i
        amVjdC5Qcm90b3R5cGVNaXhpbiA9IE1peGluLmNyZWF0ZSh7CiAgcmVvcGVu
        OiBmdW5jdGlvbigpIHsKICAgIGFwcGx5TWl4aW4odGhpcywgYXJndW1lbnRz
        LCB0cnVlKTsKICAgIHJldHVybiB0aGlzOwogIH0sCgogIC8qKgogICAgQW4g
        b3ZlcnJpZGFibGUgbWV0aG9kIGNhbGxlZCB3aGVuIG9iamVjdHMgYXJlIGlu
        c3RhbnRpYXRlZC4gQnkgZGVmYXVsdCwKICAgIGRvZXMgbm90aGluZyB1bmxl
        c3MgaXQgaXMgb3ZlcnJpZGRlbiBkdXJpbmcgY2xhc3MgZGVmaW5pdGlvbi4K
        CiAgICBFeGFtcGxlOgoKICAgIGBgYGphdmFzY3JpcHQKICAgIEFwcC5QZXJz
        b24gPSBFbWJlci5PYmplY3QuZXh0ZW5kKHsKICAgICAgaW5pdDogZnVuY3Rp
        b24oKSB7CiAgICAgICAgdGhpcy5fc3VwZXIoKTsKICAgICAgICBhbGVydCgn
        TmFtZSBpcyAnICsgdGhpcy5nZXQoJ25hbWUnKSk7CiAgICAgIH0KICAgIH0p
        OwoKICAgIHZhciBzdGV2ZSA9IEFwcC5QZXJzb24uY3JlYXRlKHsKICAgICAg
        bmFtZTogIlN0ZXZlIgogICAgfSk7CgogICAgLy8gYWxlcnRzICdOYW1lIGlz
        IFN0ZXZlJy4KICAgIGBgYAoKICAgIE5PVEU6IElmIHlvdSBkbyBvdmVycmlk
        ZSBgaW5pdGAgZm9yIGEgZnJhbWV3b3JrIGNsYXNzIGxpa2UgYEVtYmVyLlZp
        ZXdgIG9yCiAgICBgRW1iZXIuQXJyYXlDb250cm9sbGVyYCwgYmUgc3VyZSB0
        byBjYWxsIGB0aGlzLl9zdXBlcigpYCBpbiB5b3VyCiAgICBgaW5pdGAgZGVj
        bGFyYXRpb24hIElmIHlvdSBkb24ndCwgRW1iZXIgbWF5IG5vdCBoYXZlIGFu
        IG9wcG9ydHVuaXR5IHRvCiAgICBkbyBpbXBvcnRhbnQgc2V0dXAgd29yaywg
        YW5kIHlvdSdsbCBzZWUgc3RyYW5nZSBiZWhhdmlvciBpbiB5b3VyCiAgICBh
        cHBsaWNhdGlvbi4KCiAgICBAbWV0aG9kIGluaXQKICAqLwogIGluaXQ6IGZ1
        bmN0aW9uKCkge30sCgogIC8qKgogICAgRGVmaW5lcyB0aGUgcHJvcGVydGll
        cyB0aGF0IHdpbGwgYmUgY29uY2F0ZW5hdGVkIGZyb20gdGhlIHN1cGVyY2xh
        c3MKICAgIChpbnN0ZWFkIG9mIG92ZXJyaWRkZW4pLgoKICAgIEJ5IGRlZmF1
        bHQsIHdoZW4geW91IGV4dGVuZCBhbiBFbWJlciBjbGFzcyBhIHByb3BlcnR5
        IGRlZmluZWQgaW4KICAgIHRoZSBzdWJjbGFzcyBvdmVycmlkZXMgYSBwcm9w
        ZXJ0eSB3aXRoIHRoZSBzYW1lIG5hbWUgdGhhdCBpcyBkZWZpbmVkCiAgICBp
        biB0aGUgc3VwZXJjbGFzcy4gSG93ZXZlciwgdGhlcmUgYXJlIHNvbWUgY2Fz
        ZXMgd2hlcmUgaXQgaXMgcHJlZmVyYWJsZQogICAgdG8gYnVpbGQgdXAgYSBw
        cm9wZXJ0eSdzIHZhbHVlIGJ5IGNvbWJpbmluZyB0aGUgc3VwZXJjbGFzcycg
        cHJvcGVydHkKICAgIHZhbHVlIHdpdGggdGhlIHN1YmNsYXNzJyB2YWx1ZS4g
        QW4gZXhhbXBsZSBvZiB0aGlzIGluIHVzZSB3aXRoaW4gRW1iZXIKICAgIGlz
        IHRoZSBgY2xhc3NOYW1lc2AgcHJvcGVydHkgb2YgYEVtYmVyLlZpZXdgLgoK
        ICAgIEhlcmUgaXMgc29tZSBzYW1wbGUgY29kZSBzaG93aW5nIHRoZSBkaWZm
        ZXJlbmNlIGJldHdlZW4gYSBjb25jYXRlbmF0ZWQKICAgIHByb3BlcnR5IGFu
        ZCBhIG5vcm1hbCBvbmU6CgogICAgYGBgamF2YXNjcmlwdAogICAgQXBwLkJh
        clZpZXcgPSBFbWJlci5WaWV3LmV4dGVuZCh7CiAgICAgIHNvbWVOb25Db25j
        YXRlbmF0ZWRQcm9wZXJ0eTogWydiYXInXSwKICAgICAgY2xhc3NOYW1lczog
        WydiYXInXQogICAgfSk7CgogICAgQXBwLkZvb0JhclZpZXcgPSBBcHAuQmFy
        Vmlldy5leHRlbmQoewogICAgICBzb21lTm9uQ29uY2F0ZW5hdGVkUHJvcGVy
        dHk6IFsnZm9vJ10sCiAgICAgIGNsYXNzTmFtZXM6IFsnZm9vJ10sCiAgICB9
        KTsKCiAgICB2YXIgZm9vQmFyVmlldyA9IEFwcC5Gb29CYXJWaWV3LmNyZWF0
        ZSgpOwogICAgZm9vQmFyVmlldy5nZXQoJ3NvbWVOb25Db25jYXRlbmF0ZWRQ
        cm9wZXJ0eScpOyAvLyBbJ2ZvbyddCiAgICBmb29CYXJWaWV3LmdldCgnY2xh
        c3NOYW1lcycpOyAvLyBbJ2VtYmVyLXZpZXcnLCAnYmFyJywgJ2ZvbyddCiAg
        ICBgYGAKCiAgICBUaGlzIGJlaGF2aW9yIGV4dGVuZHMgdG8gb2JqZWN0IGNy
        ZWF0aW9uIGFzIHdlbGwuIENvbnRpbnVpbmcgdGhlCiAgICBhYm92ZSBleGFt
        cGxlOgoKICAgIGBgYGphdmFzY3JpcHQKICAgIHZhciB2aWV3ID0gQXBwLkZv
        b0JhclZpZXcuY3JlYXRlKHsKICAgICAgc29tZU5vbkNvbmNhdGVuYXRlZFBy
        b3BlcnR5OiBbJ2JheiddLAogICAgICBjbGFzc05hbWVzOiBbJ2JheiddCiAg
        ICB9KQogICAgdmlldy5nZXQoJ3NvbWVOb25Db25jYXRlbmF0ZWRQcm9wZXJ0
        eScpOyAvLyBbJ2JheiddCiAgICB2aWV3LmdldCgnY2xhc3NOYW1lcycpOyAv
        LyBbJ2VtYmVyLXZpZXcnLCAnYmFyJywgJ2ZvbycsICdiYXonXQogICAgYGBg
        CiAgICBBZGRpbmcgYSBzaW5nbGUgcHJvcGVydHkgdGhhdCBpcyBub3QgYW4g
        YXJyYXkgd2lsbCBqdXN0IGFkZCBpdCBpbiB0aGUgYXJyYXk6CgogICAgYGBg
        amF2YXNjcmlwdAogICAgdmFyIHZpZXcgPSBBcHAuRm9vQmFyVmlldy5jcmVh
        dGUoewogICAgICBjbGFzc05hbWVzOiAnYmF6JwogICAgfSkKICAgIHZpZXcu
        Z2V0KCdjbGFzc05hbWVzJyk7IC8vIFsnZW1iZXItdmlldycsICdiYXInLCAn
        Zm9vJywgJ2JheiddCiAgICBgYGAKCiAgICBVc2luZyB0aGUgYGNvbmNhdGVu
        YXRlZFByb3BlcnRpZXNgIHByb3BlcnR5LCB3ZSBjYW4gdGVsbCB0byBFbWJl
        ciB0aGF0IG1peAogICAgdGhlIGNvbnRlbnQgb2YgdGhlIHByb3BlcnRpZXMu
        CgogICAgSW4gYEVtYmVyLlZpZXdgIHRoZSBgY2xhc3NOYW1lQmluZGluZ3Ng
        IGFuZCBgYXR0cmlidXRlQmluZGluZ3NgIHByb3BlcnRpZXMKICAgIGFyZSBh
        bHNvIGNvbmNhdGVuYXRlZCwgaW4gYWRkaXRpb24gdG8gYGNsYXNzTmFtZXNg
        LgoKICAgIFRoaXMgZmVhdHVyZSBpcyBhdmFpbGFibGUgZm9yIHlvdSB0byB1
        c2UgdGhyb3VnaG91dCB0aGUgRW1iZXIgb2JqZWN0IG1vZGVsLAogICAgYWx0
        aG91Z2ggdHlwaWNhbCBhcHAgZGV2ZWxvcGVycyBhcmUgbGlrZWx5IHRvIHVz
        ZSBpdCBpbmZyZXF1ZW50bHkuIFNpbmNlCiAgICBpdCBjaGFuZ2VzIGV4cGVj
        dGF0aW9ucyBhYm91dCBiZWhhdmlvciBvZiBwcm9wZXJ0aWVzLCB5b3Ugc2hv
        dWxkIHByb3Blcmx5CiAgICBkb2N1bWVudCBpdHMgdXNhZ2UgaW4gZWFjaCBp
        bmRpdmlkdWFsIGNvbmNhdGVuYXRlZCBwcm9wZXJ0eSAodG8gbm90CiAgICBt
        aXNsZWFkIHlvdXIgdXNlcnMgdG8gdGhpbmsgdGhleSBjYW4gb3ZlcnJpZGUg
        dGhlIHByb3BlcnR5IGluIGEgc3ViY2xhc3MpLgoKICAgIEBwcm9wZXJ0eSBj
        b25jYXRlbmF0ZWRQcm9wZXJ0aWVzCiAgICBAdHlwZSBBcnJheQogICAgQGRl
        ZmF1bHQgbnVsbAogICovCiAgY29uY2F0ZW5hdGVkUHJvcGVydGllczogbnVs
        bCwKCiAgLyoqCiAgICBEZXN0cm95ZWQgb2JqZWN0IHByb3BlcnR5IGZsYWcu
        CgogICAgaWYgdGhpcyBwcm9wZXJ0eSBpcyBgdHJ1ZWAgdGhlIG9ic2VydmVy
        cyBhbmQgYmluZGluZ3Mgd2VyZSBhbHJlYWR5CiAgICByZW1vdmVkIGJ5IHRo
        ZSBlZmZlY3Qgb2YgY2FsbGluZyB0aGUgYGRlc3Ryb3koKWAgbWV0aG9kLgoK
        ICAgIEBwcm9wZXJ0eSBpc0Rlc3Ryb3llZAogICAgQGRlZmF1bHQgZmFsc2UK
        ICAqLwogIGlzRGVzdHJveWVkOiBmYWxzZSwKCiAgLyoqCiAgICBEZXN0cnVj
        dGlvbiBzY2hlZHVsZWQgZmxhZy4gVGhlIGBkZXN0cm95KClgIG1ldGhvZCBo
        YXMgYmVlbiBjYWxsZWQuCgogICAgVGhlIG9iamVjdCBzdGF5cyBpbnRhY3Qg
        dW50aWwgdGhlIGVuZCBvZiB0aGUgcnVuIGxvb3AgYXQgd2hpY2ggcG9pbnQK
        ICAgIHRoZSBgaXNEZXN0cm95ZWRgIGZsYWcgaXMgc2V0LgoKICAgIEBwcm9w
        ZXJ0eSBpc0Rlc3Ryb3lpbmcKICAgIEBkZWZhdWx0IGZhbHNlCiAgKi8KICBp
        c0Rlc3Ryb3lpbmc6IGZhbHNlLAoKICAvKioKICAgIERlc3Ryb3lzIGFuIG9i
        amVjdCBieSBzZXR0aW5nIHRoZSBgaXNEZXN0cm95ZWRgIGZsYWcgYW5kIHJl
        bW92aW5nIGl0cwogICAgbWV0YWRhdGEsIHdoaWNoIGVmZmVjdGl2ZWx5IGRl
        c3Ryb3lzIG9ic2VydmVycyBhbmQgYmluZGluZ3MuCgogICAgSWYgeW91IHRy
        eSB0byBzZXQgYSBwcm9wZXJ0eSBvbiBhIGRlc3Ryb3llZCBvYmplY3QsIGFu
        IGV4Y2VwdGlvbiB3aWxsIGJlCiAgICByYWlzZWQuCgogICAgTm90ZSB0aGF0
        IGRlc3RydWN0aW9uIGlzIHNjaGVkdWxlZCBmb3IgdGhlIGVuZCBvZiB0aGUg
        cnVuIGxvb3AgYW5kIGRvZXMgbm90CiAgICBoYXBwZW4gaW1tZWRpYXRlbHku
        ICBJdCB3aWxsIHNldCBhbiBpc0Rlc3Ryb3lpbmcgZmxhZyBpbW1lZGlhdGVs
        eS4KCiAgICBAbWV0aG9kIGRlc3Ryb3kKICAgIEByZXR1cm4ge0VtYmVyLk9i
        amVjdH0gcmVjZWl2ZXIKICAqLwogIGRlc3Ryb3k6IGZ1bmN0aW9uKCkgewog
        ICAgaWYgKHRoaXMuaXNEZXN0cm95aW5nKSB7IHJldHVybjsgfQogICAgdGhp
        cy5pc0Rlc3Ryb3lpbmcgPSB0cnVlOwoKICAgIHNjaGVkdWxlKCdhY3Rpb25z
        JywgdGhpcywgdGhpcy53aWxsRGVzdHJveSk7CiAgICBzY2hlZHVsZSgnZGVz
        dHJveScsIHRoaXMsIHRoaXMuX3NjaGVkdWxlZERlc3Ryb3kpOwogICAgcmV0
        dXJuIHRoaXM7CiAgfSwKCiAgLyoqCiAgICBPdmVycmlkZSB0byBpbXBsZW1l
        bnQgdGVhcmRvd24uCgogICAgQG1ldGhvZCB3aWxsRGVzdHJveQogICAqLwog
        IHdpbGxEZXN0cm95OiBFbWJlci5LLAoKICAvKioKICAgIEBwcml2YXRlCgog
        ICAgSW52b2tlZCBieSB0aGUgcnVuIGxvb3AgdG8gYWN0dWFsbHkgZGVzdHJv
        eSB0aGUgb2JqZWN0LiBUaGlzIGlzCiAgICBzY2hlZHVsZWQgZm9yIGV4ZWN1
        dGlvbiBieSB0aGUgYGRlc3Ryb3lgIG1ldGhvZC4KCiAgICBAbWV0aG9kIF9z
        Y2hlZHVsZWREZXN0cm95CiAgKi8KICBfc2NoZWR1bGVkRGVzdHJveTogZnVu
        Y3Rpb24oKSB7CiAgICBpZiAodGhpcy5pc0Rlc3Ryb3llZCkgeyByZXR1cm47
        IH0KICAgIGRlc3Ryb3kodGhpcyk7CiAgICB0aGlzLmlzRGVzdHJveWVkID0g
        dHJ1ZTsKICB9LAoKICBiaW5kOiBmdW5jdGlvbih0bywgZnJvbSkgewogICAg
        aWYgKCEoZnJvbSBpbnN0YW5jZW9mIEVtYmVyLkJpbmRpbmcpKSB7IGZyb20g
        PSBFbWJlci5CaW5kaW5nLmZyb20oZnJvbSk7IH0KICAgIGZyb20udG8odG8p
        LmNvbm5lY3QodGhpcyk7CiAgICByZXR1cm4gZnJvbTsKICB9LAoKICAvKioK
        ICAgIFJldHVybnMgYSBzdHJpbmcgcmVwcmVzZW50YXRpb24gd2hpY2ggYXR0
        ZW1wdHMgdG8gcHJvdmlkZSBtb3JlIGluZm9ybWF0aW9uCiAgICB0aGFuIEph
        dmFzY3JpcHQncyBgdG9TdHJpbmdgIHR5cGljYWxseSBkb2VzLCBpbiBhIGdl
        bmVyaWMgd2F5IGZvciBhbGwgRW1iZXIKICAgIG9iamVjdHMuCgogICAgICAg
        IEFwcC5QZXJzb24gPSBFbS5PYmplY3QuZXh0ZW5kKCkKICAgICAgICBwZXJz
        b24gPSBBcHAuUGVyc29uLmNyZWF0ZSgpCiAgICAgICAgcGVyc29uLnRvU3Ry
        aW5nKCkgLy89PiAiPEFwcC5QZXJzb246ZW1iZXIxMDI0PiIKCiAgICBJZiB0
        aGUgb2JqZWN0J3MgY2xhc3MgaXMgbm90IGRlZmluZWQgb24gYW4gRW1iZXIg
        bmFtZXNwYWNlLCBpdCB3aWxsCiAgICBpbmRpY2F0ZSBpdCBpcyBhIHN1YmNs
        YXNzIG9mIHRoZSByZWdpc3RlcmVkIHN1cGVyY2xhc3M6CgogICAgICAgIFN0
        dWRlbnQgPSBBcHAuUGVyc29uLmV4dGVuZCgpCiAgICAgICAgc3R1ZGVudCA9
        IFN0dWRlbnQuY3JlYXRlKCkKICAgICAgICBzdHVkZW50LnRvU3RyaW5nKCkg
        Ly89PiAiPChzdWJjbGFzcyBvZiBBcHAuUGVyc29uKTplbWJlcjEwMjU+IgoK
        ICAgIElmIHRoZSBtZXRob2QgYHRvU3RyaW5nRXh0ZW5zaW9uYCBpcyBkZWZp
        bmVkLCBpdHMgcmV0dXJuIHZhbHVlIHdpbGwgYmUKICAgIGluY2x1ZGVkIGlu
        IHRoZSBvdXRwdXQuCgogICAgICAgIEFwcC5UZWFjaGVyID0gQXBwLlBlcnNv
        bi5leHRlbmQoewogICAgICAgICAgdG9TdHJpbmdFeHRlbnNpb246IGZ1bmN0
        aW9uKCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5nZXQoJ2Z1bGxOYW1l
        Jyk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgdGVhY2hlciA9
        IEFwcC5UZWFjaGVyLmNyZWF0ZSgpCiAgICAgICAgdGVhY2hlci50b1N0cmlu
        ZygpOyAvLz0+ICI8QXBwLlRlYWNoZXI6ZW1iZXIxMDI2OlRvbSBEYWxlPiIK
        CiAgICBAbWV0aG9kIHRvU3RyaW5nCiAgICBAcmV0dXJuIHtTdHJpbmd9IHN0
        cmluZyByZXByZXNlbnRhdGlvbgogICovCiAgdG9TdHJpbmc6IGZ1bmN0aW9u
        IHRvU3RyaW5nKCkgewogICAgdmFyIGhhc1RvU3RyaW5nRXh0ZW5zaW9uID0g
        dHlwZW9mIHRoaXMudG9TdHJpbmdFeHRlbnNpb24gPT09ICdmdW5jdGlvbics
        CiAgICAgICAgZXh0ZW5zaW9uID0gaGFzVG9TdHJpbmdFeHRlbnNpb24gPyAi
        OiIgKyB0aGlzLnRvU3RyaW5nRXh0ZW5zaW9uKCkgOiAnJzsKICAgIHZhciBy
        ZXQgPSAnPCcrdGhpcy5jb25zdHJ1Y3Rvci50b1N0cmluZygpKyc6JytndWlk
        Rm9yKHRoaXMpK2V4dGVuc2lvbisnPic7CiAgICB0aGlzLnRvU3RyaW5nID0g
        bWFrZVRvU3RyaW5nKHJldCk7CiAgICByZXR1cm4gcmV0OwogIH0KfSk7CgpD
        b3JlT2JqZWN0LlByb3RvdHlwZU1peGluLm93bmVyQ29uc3RydWN0b3IgPSBD
        b3JlT2JqZWN0OwoKZnVuY3Rpb24gbWFrZVRvU3RyaW5nKHJldCkgewogIHJl
        dHVybiBmdW5jdGlvbigpIHsgcmV0dXJuIHJldDsgfTsKfQoKaWYgKEVtYmVy
        LmNvbmZpZy5vdmVycmlkZVByb3RvdHlwZU1peGluKSB7CiAgRW1iZXIuY29u
        ZmlnLm92ZXJyaWRlUHJvdG90eXBlTWl4aW4oQ29yZU9iamVjdC5Qcm90b3R5
        cGVNaXhpbik7Cn0KCkNvcmVPYmplY3QuX19zdXBlcl9fID0gbnVsbDsKCnZh
        ciBDbGFzc01peGluID0gTWl4aW4uY3JlYXRlKHsKCiAgQ2xhc3NNaXhpbjog
        RW1iZXIucmVxdWlyZWQoKSwKCiAgUHJvdG90eXBlTWl4aW46IEVtYmVyLnJl
        cXVpcmVkKCksCgogIGlzQ2xhc3M6IHRydWUsCgogIGlzTWV0aG9kOiBmYWxz
        ZSwKCiAgLyoqCiAgICBDcmVhdGVzIGEgbmV3IHN1YmNsYXNzLgoKICAgIGBg
        YGphdmFzY3JpcHQKICAgIEFwcC5QZXJzb24gPSBFbWJlci5PYmplY3QuZXh0
        ZW5kKHsKICAgICAgc2F5OiBmdW5jdGlvbih0aGluZykgewogICAgICAgIGFs
        ZXJ0KHRoaW5nKTsKICAgICAgIH0KICAgIH0pOwogICAgYGBgCgogICAgVGhp
        cyBkZWZpbmVzIGEgbmV3IHN1YmNsYXNzIG9mIEVtYmVyLk9iamVjdDogYEFw
        cC5QZXJzb25gLiBJdCBjb250YWlucyBvbmUgbWV0aG9kOiBgc2F5KClgLgoK
        ICAgIFlvdSBjYW4gYWxzbyBjcmVhdGUgYSBzdWJjbGFzcyBmcm9tIGFueSBl
        eGlzdGluZyBjbGFzcyBieSBjYWxsaW5nIGl0cyBgZXh0ZW5kKClgICBtZXRo
        b2QuIEZvciBleGFtcGxlLCB5b3UgbWlnaHQgd2FudCB0byBjcmVhdGUgYSBz
        dWJjbGFzcyBvZiBFbWJlcidzIGJ1aWx0LWluIGBFbWJlci5WaWV3YCBjbGFz
        czoKCiAgICBgYGBqYXZhc2NyaXB0CiAgICBBcHAuUGVyc29uVmlldyA9IEVt
        YmVyLlZpZXcuZXh0ZW5kKHsKICAgICAgdGFnTmFtZTogJ2xpJywKICAgICAg
        Y2xhc3NOYW1lQmluZGluZ3M6IFsnaXNBZG1pbmlzdHJhdG9yJ10KICAgIH0p
        OwogICAgYGBgCgogICAgV2hlbiBkZWZpbmluZyBhIHN1YmNsYXNzLCB5b3Ug
        Y2FuIG92ZXJyaWRlIG1ldGhvZHMgYnV0IHN0aWxsIGFjY2VzcyB0aGUgaW1w
        bGVtZW50YXRpb24gb2YgeW91ciBwYXJlbnQgY2xhc3MgYnkgY2FsbGluZyB0
        aGUgc3BlY2lhbCBgX3N1cGVyKClgIG1ldGhvZDoKCiAgICBgYGBqYXZhc2Ny
        aXB0CiAgICBBcHAuUGVyc29uID0gRW1iZXIuT2JqZWN0LmV4dGVuZCh7CiAg
        ICAgIHNheTogZnVuY3Rpb24odGhpbmcpIHsKICAgICAgICB2YXIgbmFtZSA9
        IHRoaXMuZ2V0KCduYW1lJyk7CiAgICAgICAgYWxlcnQobmFtZSArICcgc2F5
        czogJyArIHRoaW5nKTsKICAgICAgfQogICAgfSk7CgogICAgQXBwLlNvbGRp
        ZXIgPSBBcHAuUGVyc29uLmV4dGVuZCh7CiAgICAgIHNheTogZnVuY3Rpb24o
        dGhpbmcpIHsKICAgICAgICB0aGlzLl9zdXBlcih0aGluZyArICIsIHNpciEi
        KTsKICAgICAgfSwKICAgICAgbWFyY2g6IGZ1bmN0aW9uKG51bWJlck9mSG91
        cnMpIHsKICAgICAgICBhbGVydCh0aGlzLmdldCgnbmFtZScpICsgJyBtYXJj
        aGVzIGZvciAnICsgbnVtYmVyT2ZIb3VycyArICcgaG91cnMuJykKICAgICAg
        fQogICAgfSk7CgogICAgdmFyIHllaHVkYSA9IEFwcC5Tb2xkaWVyLmNyZWF0
        ZSh7CiAgICAgIG5hbWU6ICJZZWh1ZGEgS2F0eiIKICAgIH0pOwoKICAgIHll
        aHVkYS5zYXkoIlllcyIpOyAgLy8gYWxlcnRzICJZZWh1ZGEgS2F0eiBzYXlz
        OiBZZXMsIHNpciEiCiAgICBgYGAKCiAgICBUaGUgYGNyZWF0ZSgpYCBvbiBs
        aW5lICMxNyBjcmVhdGVzIGFuICppbnN0YW5jZSogb2YgdGhlIGBBcHAuU29s
        ZGllcmAgY2xhc3MuIFRoZSBgZXh0ZW5kKClgIG9uIGxpbmUgIzggY3JlYXRl
        cyBhICpzdWJjbGFzcyogb2YgYEFwcC5QZXJzb25gLiBBbnkgaW5zdGFuY2Ug
        b2YgdGhlIGBBcHAuUGVyc29uYCBjbGFzcyB3aWxsICpub3QqIGhhdmUgdGhl
        IGBtYXJjaCgpYCBtZXRob2QuCgogICAgWW91IGNhbiBhbHNvIHBhc3MgYEVt
        YmVyLk1peGluYCBjbGFzc2VzIHRvIGFkZCBhZGRpdGlvbmFsIHByb3BlcnRp
        ZXMgdG8gdGhlIHN1YmNsYXNzLgoKICAgIGBgYGphdmFzY3JpcHQKICAgIEFw
        cC5QZXJzb24gPSBFbWJlci5PYmplY3QuZXh0ZW5kKHsKICAgICAgc2F5OiBm
        dW5jdGlvbih0aGluZykgewogICAgICAgIGFsZXJ0KHRoaXMuZ2V0KCduYW1l
        JykgKyAnIHNheXM6ICcgKyB0aGluZyk7CiAgICAgIH0KICAgIH0pOwoKICAg
        IEFwcC5TaW5naW5nTWl4aW4gPSBFbWJlci5NaXhpbi5jcmVhdGUoewogICAg
        ICBzaW5nOiBmdW5jdGlvbih0aGluZyl7CiAgICAgICAgYWxlcnQodGhpcy5n
        ZXQoJ25hbWUnKSArICcgc2luZ3M6IGxhIGxhIGxhICcgKyB0aGluZyk7CiAg
        ICAgIH0KICAgIH0pOwoKICAgIEFwcC5Ccm9hZHdheVN0YXIgPSBBcHAuUGVy
        c29uLmV4dGVuZChBcHAuU2luZ2luZ01peGluLCB7CiAgICAgIGRhbmNlOiBm
        dW5jdGlvbigpIHsKICAgICAgICBhbGVydCh0aGlzLmdldCgnbmFtZScpICsg
        JyBkYW5jZXM6IHRhcCB0YXAgdGFwIHRhcCAnKTsKICAgICAgfQogICAgfSk7
        CiAgICBgYGAKCiAgICBUaGUgYEFwcC5Ccm9hZHdheVN0YXJgIGNsYXNzIGNv
        bnRhaW5zIHRocmVlIG1ldGhvZHM6IGBzYXkoKWAsIGBzaW5nKClgLCBhbmQg
        YGRhbmNlKClgLgoKICAgIEBtZXRob2QgZXh0ZW5kCiAgICBAc3RhdGljCgog
        ICAgQHBhcmFtIHtFbWJlci5NaXhpbn0gW21peGluc10qIE9uZSBvciBtb3Jl
        IEVtYmVyLk1peGluIGNsYXNzZXMKICAgIEBwYXJhbSB7T2JqZWN0fSBbYXJn
        dW1lbnRzXSogT2JqZWN0IGNvbnRhaW5pbmcgdmFsdWVzIHRvIHVzZSB3aXRo
        aW4gdGhlIG5ldyBjbGFzcwogICovCiAgZXh0ZW5kOiBmdW5jdGlvbigpIHsK
        ICAgIHZhciBDbGFzcyA9IG1ha2VDdG9yKCksIHByb3RvOwogICAgQ2xhc3Mu
        Q2xhc3NNaXhpbiA9IE1peGluLmNyZWF0ZSh0aGlzLkNsYXNzTWl4aW4pOwog
        ICAgQ2xhc3MuUHJvdG90eXBlTWl4aW4gPSBNaXhpbi5jcmVhdGUodGhpcy5Q
        cm90b3R5cGVNaXhpbik7CgogICAgQ2xhc3MuQ2xhc3NNaXhpbi5vd25lckNv
        bnN0cnVjdG9yID0gQ2xhc3M7CiAgICBDbGFzcy5Qcm90b3R5cGVNaXhpbi5v
        d25lckNvbnN0cnVjdG9yID0gQ2xhc3M7CgogICAgcmVvcGVuLmFwcGx5KENs
        YXNzLlByb3RvdHlwZU1peGluLCBhcmd1bWVudHMpOwoKICAgIENsYXNzLnN1
        cGVyY2xhc3MgPSB0aGlzOwogICAgQ2xhc3MuX19zdXBlcl9fICA9IHRoaXMu
        cHJvdG90eXBlOwoKICAgIHByb3RvID0gQ2xhc3MucHJvdG90eXBlID0gb19j
        cmVhdGUodGhpcy5wcm90b3R5cGUpOwogICAgcHJvdG8uY29uc3RydWN0b3Ig
        PSBDbGFzczsKICAgIGdlbmVyYXRlR3VpZChwcm90byk7CiAgICBtZXRhKHBy
        b3RvKS5wcm90byA9IHByb3RvOyAvLyB0aGlzIHdpbGwgZGlzYWJsZSBvYnNl
        cnZlcnMgb24gcHJvdG90eXBlCgogICAgQ2xhc3MuQ2xhc3NNaXhpbi5hcHBs
        eShDbGFzcyk7CiAgICByZXR1cm4gQ2xhc3M7CiAgfSwKCiAgLyoqCiAgICBF
        cXVpdmFsZW50IHRvIGRvaW5nIGBleHRlbmQoYXJndW1lbnRzKS5jcmVhdGUo
        KWAuCiAgICBJZiBwb3NzaWJsZSB1c2UgdGhlIG5vcm1hbCBgY3JlYXRlYCBt
        ZXRob2QgaW5zdGVhZC4KCiAgICBAbWV0aG9kIGNyZWF0ZVdpdGhNaXhpbnMK
        ICAgIEBzdGF0aWMKICAgIEBwYXJhbSBbYXJndW1lbnRzXSoKICAqLwogIGNy
        ZWF0ZVdpdGhNaXhpbnM6IGZ1bmN0aW9uKCkgewogICAgdmFyIEMgPSB0aGlz
        OwogICAgaWYgKGFyZ3VtZW50cy5sZW5ndGg+MCkgeyB0aGlzLl9pbml0TWl4
        aW5zKGFyZ3VtZW50cyk7IH0KICAgIHJldHVybiBuZXcgQygpOwogIH0sCgog
        IC8qKgogICAgQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiBhIGNsYXNzLiBBY2Nl
        cHRzIGVpdGhlciBubyBhcmd1bWVudHMsIG9yIGFuIG9iamVjdAogICAgY29u
        dGFpbmluZyB2YWx1ZXMgdG8gaW5pdGlhbGl6ZSB0aGUgbmV3bHkgaW5zdGFu
        dGlhdGVkIG9iamVjdCB3aXRoLgoKICAgIGBgYGphdmFzY3JpcHQKICAgIEFw
        cC5QZXJzb24gPSBFbWJlci5PYmplY3QuZXh0ZW5kKHsKICAgICAgaGVsbG9X
        b3JsZDogZnVuY3Rpb24oKSB7CiAgICAgICAgYWxlcnQoIkhpLCBteSBuYW1l
        IGlzICIgKyB0aGlzLmdldCgnbmFtZScpKTsKICAgICAgfQogICAgfSk7Cgog
        ICAgdmFyIHRvbSA9IEFwcC5QZXJzb24uY3JlYXRlKHsKICAgICAgbmFtZTog
        J1RvbSBEYWxlJwogICAgfSk7CgogICAgdG9tLmhlbGxvV29ybGQoKTsgLy8g
        YWxlcnRzICJIaSwgbXkgbmFtZSBpcyBUb20gRGFsZSIuCiAgICBgYGAKCiAg
        ICBgY3JlYXRlYCB3aWxsIGNhbGwgdGhlIGBpbml0YCBmdW5jdGlvbiBpZiBk
        ZWZpbmVkIGR1cmluZwogICAgYEVtYmVyLkFueU9iamVjdC5leHRlbmRgCgog
        ICAgSWYgbm8gYXJndW1lbnRzIGFyZSBwYXNzZWQgdG8gYGNyZWF0ZWAsIGl0
        IHdpbGwgbm90IHNldCB2YWx1ZXMgdG8gdGhlIG5ldwogICAgaW5zdGFuY2Ug
        ZHVyaW5nIGluaXRpYWxpemF0aW9uOgoKICAgIGBgYGphdmFzY3JpcHQKICAg
        IHZhciBub05hbWUgPSBBcHAuUGVyc29uLmNyZWF0ZSgpOwogICAgbm9OYW1l
        LmhlbGxvV29ybGQoKTsgLy8gYWxlcnRzIHVuZGVmaW5lZAogICAgYGBgCgog
        ICAgTk9URTogRm9yIHBlcmZvcm1hbmNlIHJlYXNvbnMsIHlvdSBjYW5ub3Qg
        ZGVjbGFyZSBtZXRob2RzIG9yIGNvbXB1dGVkCiAgICBwcm9wZXJ0aWVzIGR1
        cmluZyBgY3JlYXRlYC4gWW91IHNob3VsZCBpbnN0ZWFkIGRlY2xhcmUgbWV0
        aG9kcyBhbmQgY29tcHV0ZWQKICAgIHByb3BlcnRpZXMgd2hlbiB1c2luZyBg
        ZXh0ZW5kYCBvciB1c2UgdGhlIGBjcmVhdGVXaXRoTWl4aW5zYCBzaG9ydGhh
        bmQuCgogICAgQG1ldGhvZCBjcmVhdGUKICAgIEBzdGF0aWMKICAgIEBwYXJh
        bSBbYXJndW1lbnRzXSoKICAqLwogIGNyZWF0ZTogZnVuY3Rpb24oKSB7CiAg
        ICB2YXIgQyA9IHRoaXM7CiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aD4wKSB7
        IHRoaXMuX2luaXRQcm9wZXJ0aWVzKGFyZ3VtZW50cyk7IH0KICAgIHJldHVy
        biBuZXcgQygpOwogIH0sCgogIC8qKgoKICAgIEF1Z21lbnRzIGEgY29uc3Ry
        dWN0b3IncyBwcm90b3R5cGUgd2l0aCBhZGRpdGlvbmFsCiAgICBwcm9wZXJ0
        aWVzIGFuZCBmdW5jdGlvbnM6CgogICAgYGBgamF2YXNjcmlwdAogICAgTXlP
        YmplY3QgPSBFbWJlci5PYmplY3QuZXh0ZW5kKHsKICAgICAgbmFtZTogJ2Fu
        IG9iamVjdCcKICAgIH0pOwoKICAgIG8gPSBNeU9iamVjdC5jcmVhdGUoKTsK
        ICAgIG8uZ2V0KCduYW1lJyk7IC8vICdhbiBvYmplY3QnCgogICAgTXlPYmpl
        Y3QucmVvcGVuKHsKICAgICAgc2F5OiBmdW5jdGlvbihtc2cpewogICAgICAg
        IGNvbnNvbGUubG9nKG1zZyk7CiAgICAgIH0KICAgIH0pCgogICAgbzIgPSBN
        eU9iamVjdC5jcmVhdGUoKTsKICAgIG8yLnNheSgiaGVsbG8iKTsgLy8gbG9n
        cyAiaGVsbG8iCgogICAgby5zYXkoImdvb2RieWUiKTsgLy8gbG9ncyAiZ29v
        ZGJ5ZSIKICAgIGBgYAoKICAgIFRvIGFkZCBmdW5jdGlvbnMgYW5kIHByb3Bl
        cnRpZXMgdG8gdGhlIGNvbnN0cnVjdG9yIGl0c2VsZiwKICAgIHNlZSBgcmVv
        cGVuQ2xhc3NgCgogICAgQG1ldGhvZCByZW9wZW4KICAqLwogIHJlb3Blbjog
        ZnVuY3Rpb24oKSB7CiAgICB0aGlzLndpbGxSZW9wZW4oKTsKICAgIHJlb3Bl
        bi5hcHBseSh0aGlzLlByb3RvdHlwZU1peGluLCBhcmd1bWVudHMpOwogICAg
        cmV0dXJuIHRoaXM7CiAgfSwKCiAgLyoqCiAgICBBdWdtZW50cyBhIGNvbnN0
        cnVjdG9yJ3Mgb3duIHByb3BlcnRpZXMgYW5kIGZ1bmN0aW9uczoKCiAgICBg
        YGBqYXZhc2NyaXB0CiAgICBNeU9iamVjdCA9IEVtYmVyLk9iamVjdC5leHRl
        bmQoewogICAgICBuYW1lOiAnYW4gb2JqZWN0JwogICAgfSk7CgoKICAgIE15
        T2JqZWN0LnJlb3BlbkNsYXNzKHsKICAgICAgY2FuQnVpbGQ6IGZhbHNlCiAg
        ICB9KTsKCiAgICBNeU9iamVjdC5jYW5CdWlsZDsgLy8gZmFsc2UKICAgIG8g
        PSBNeU9iamVjdC5jcmVhdGUoKTsKICAgIGBgYAoKICAgIEluIG90aGVyIHdv
        cmRzLCB0aGlzIGNyZWF0ZXMgc3RhdGljIHByb3BlcnRpZXMgYW5kIGZ1bmN0
        aW9ucyBmb3IgdGhlIGNsYXNzLiBUaGVzZSBhcmUgb25seSBhdmFpbGFibGUg
        b24gdGhlIGNsYXNzCiAgICBhbmQgbm90IG9uIGFueSBpbnN0YW5jZSBvZiB0
        aGF0IGNsYXNzLgoKICAgIGBgYGphdmFzY3JpcHQKICAgIEFwcC5QZXJzb24g
        PSBFbWJlci5PYmplY3QuZXh0ZW5kKHsKICAgICAgbmFtZSA6ICIiLAogICAg
        ICBzYXlIZWxsbyA6IGZ1bmN0aW9uKCl7CiAgICAgICAgYWxlcnQoIkhlbGxv
        LiBNeSBuYW1lIGlzICIgKyB0aGlzLmdldCgnbmFtZScpKTsKICAgICAgfQog
        ICAgfSk7CgogICAgQXBwLlBlcnNvbi5yZW9wZW5DbGFzcyh7CiAgICAgIHNw
        ZWNpZXMgOiAiSG9tbyBzYXBpZW5zIiwKICAgICAgY3JlYXRlUGVyc29uOiBm
        dW5jdGlvbihuZXdQZXJzb25zTmFtZSl7CiAgICAgICAgcmV0dXJuIEFwcC5Q
        ZXJzb24uY3JlYXRlKHsKICAgICAgICAgIG5hbWU6bmV3UGVyc29uc05hbWUK
        ICAgICAgICB9KTsKICAgICAgfQogICAgfSk7CgogICAgdmFyIHRvbSA9IEFw
        cC5QZXJzb24uY3JlYXRlKHsKICAgICAgbmFtZSA6ICJUb20gRGFsZSIKICAg
        IH0pOwogICAgdmFyIHllaHVkYSA9IEFwcC5QZXJzb24uY3JlYXRlUGVyc29u
        KCJZZWh1ZGEgS2F0eiIpOwoKICAgIHRvbS5zYXlIZWxsbygpOyAvLyAiSGVs
        bG8uIE15IG5hbWUgaXMgVG9tIERhbGUiCiAgICB5ZWh1ZGEuc2F5SGVsbG8o
        KTsgLy8gIkhlbGxvLiBNeSBuYW1lIGlzIFllaHVkYSBLYXR6IgogICAgYWxl
        cnQoQXBwLlBlcnNvbi5zcGVjaWVzKTsgLy8gIkhvbW8gc2FwaWVucyIKICAg
        IGBgYAoKICAgIE5vdGUgdGhhdCBgc3BlY2llc2AgYW5kIGBjcmVhdGVQZXJz
        b25gIGFyZSAqbm90KiB2YWxpZCBvbiB0aGUgYHRvbWAgYW5kIGB5ZWh1ZGFg
        CiAgICB2YXJpYWJsZXMuIFRoZXkgYXJlIG9ubHkgdmFsaWQgb24gYEFwcC5Q
        ZXJzb25gLgoKICAgIFRvIGFkZCBmdW5jdGlvbnMgYW5kIHByb3BlcnRpZXMg
        dG8gaW5zdGFuY2VzIG9mCiAgICBhIGNvbnN0cnVjdG9yIGJ5IGV4dGVuZGlu
        ZyB0aGUgY29uc3RydWN0b3IncyBwcm90b3R5cGUKICAgIHNlZSBgcmVvcGVu
        YAoKICAgIEBtZXRob2QgcmVvcGVuQ2xhc3MKICAqLwogIHJlb3BlbkNsYXNz
        OiBmdW5jdGlvbigpIHsKICAgIHJlb3Blbi5hcHBseSh0aGlzLkNsYXNzTWl4
        aW4sIGFyZ3VtZW50cyk7CiAgICBhcHBseU1peGluKHRoaXMsIGFyZ3VtZW50
        cywgZmFsc2UpOwogICAgcmV0dXJuIHRoaXM7CiAgfSwKCiAgZGV0ZWN0OiBm
        dW5jdGlvbihvYmopIHsKICAgIGlmICgnZnVuY3Rpb24nICE9PSB0eXBlb2Yg
        b2JqKSB7IHJldHVybiBmYWxzZTsgfQogICAgd2hpbGUob2JqKSB7CiAgICAg
        IGlmIChvYmo9PT10aGlzKSB7IHJldHVybiB0cnVlOyB9CiAgICAgIG9iaiA9
        IG9iai5zdXBlcmNsYXNzOwogICAgfQogICAgcmV0dXJuIGZhbHNlOwogIH0s
        CgogIGRldGVjdEluc3RhbmNlOiBmdW5jdGlvbihvYmopIHsKICAgIHJldHVy
        biBvYmogaW5zdGFuY2VvZiB0aGlzOwogIH0sCgogIC8qKgogICAgSW4gc29t
        ZSBjYXNlcywgeW91IG1heSB3YW50IHRvIGFubm90YXRlIGNvbXB1dGVkIHBy
        b3BlcnRpZXMgd2l0aCBhZGRpdGlvbmFsCiAgICBtZXRhZGF0YSBhYm91dCBo
        b3cgdGhleSBmdW5jdGlvbiBvciB3aGF0IHZhbHVlcyB0aGV5IG9wZXJhdGUg
        b24uIEZvcgogICAgZXhhbXBsZSwgY29tcHV0ZWQgcHJvcGVydHkgZnVuY3Rp
        b25zIG1heSBjbG9zZSBvdmVyIHZhcmlhYmxlcyB0aGF0IGFyZSB0aGVuCiAg
        ICBubyBsb25nZXIgYXZhaWxhYmxlIGZvciBpbnRyb3NwZWN0aW9uLgoKICAg
        IFlvdSBjYW4gcGFzcyBhIGhhc2ggb2YgdGhlc2UgdmFsdWVzIHRvIGEgY29t
        cHV0ZWQgcHJvcGVydHkgbGlrZSB0aGlzOgoKICAgIGBgYGphdmFzY3JpcHQK
        ICAgIHBlcnNvbjogZnVuY3Rpb24oKSB7CiAgICAgIHZhciBwZXJzb25JZCA9
        IHRoaXMuZ2V0KCdwZXJzb25JZCcpOwogICAgICByZXR1cm4gQXBwLlBlcnNv
        bi5jcmVhdGUoeyBpZDogcGVyc29uSWQgfSk7CiAgICB9LnByb3BlcnR5KCku
        bWV0YSh7IHR5cGU6IEFwcC5QZXJzb24gfSkKICAgIGBgYAoKICAgIE9uY2Ug
        eW91J3ZlIGRvbmUgdGhpcywgeW91IGNhbiByZXRyaWV2ZSB0aGUgdmFsdWVz
        IHNhdmVkIHRvIHRoZSBjb21wdXRlZAogICAgcHJvcGVydHkgZnJvbSB5b3Vy
        IGNsYXNzIGxpa2UgdGhpczoKCiAgICBgYGBqYXZhc2NyaXB0CiAgICBNeUNs
        YXNzLm1ldGFGb3JQcm9wZXJ0eSgncGVyc29uJyk7CiAgICBgYGAKCiAgICBU
        aGlzIHdpbGwgcmV0dXJuIHRoZSBvcmlnaW5hbCBoYXNoIHRoYXQgd2FzIHBh
        c3NlZCB0byBgbWV0YSgpYC4KCiAgICBAbWV0aG9kIG1ldGFGb3JQcm9wZXJ0
        eQogICAgQHBhcmFtIGtleSB7U3RyaW5nfSBwcm9wZXJ0eSBuYW1lCiAgKi8K
        ICBtZXRhRm9yUHJvcGVydHk6IGZ1bmN0aW9uKGtleSkgewogICAgdmFyIGRl
        c2MgPSBtZXRhKHRoaXMucHJvdG8oKSwgZmFsc2UpLmRlc2NzW2tleV07Cgog
        ICAgRW1iZXIuYXNzZXJ0KCJtZXRhRm9yUHJvcGVydHkoKSBjb3VsZCBub3Qg
        ZmluZCBhIGNvbXB1dGVkIHByb3BlcnR5IHdpdGgga2V5ICciK2tleSsiJy4i
        LCAhIWRlc2MgJiYgZGVzYyBpbnN0YW5jZW9mIEVtYmVyLkNvbXB1dGVkUHJv
        cGVydHkpOwogICAgcmV0dXJuIGRlc2MuX21ldGEgfHwge307CiAgfSwKCiAg
        LyoqCiAgICBJdGVyYXRlIG92ZXIgZWFjaCBjb21wdXRlZCBwcm9wZXJ0eSBm
        b3IgdGhlIGNsYXNzLCBwYXNzaW5nIGl0cyBuYW1lCiAgICBhbmQgYW55IGFz
        c29jaWF0ZWQgbWV0YWRhdGEgKHNlZSBgbWV0YUZvclByb3BlcnR5YCkgdG8g
        dGhlIGNhbGxiYWNrLgoKICAgIEBtZXRob2QgZWFjaENvbXB1dGVkUHJvcGVy
        dHkKICAgIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrCiAgICBAcGFyYW0g
        e09iamVjdH0gYmluZGluZwogICovCiAgZWFjaENvbXB1dGVkUHJvcGVydHk6
        IGZ1bmN0aW9uKGNhbGxiYWNrLCBiaW5kaW5nKSB7CiAgICB2YXIgcHJvdG8g
        PSB0aGlzLnByb3RvKCksCiAgICAgICAgZGVzY3MgPSBtZXRhKHByb3RvKS5k
        ZXNjcywKICAgICAgICBlbXB0eSA9IHt9LAogICAgICAgIHByb3BlcnR5OwoK
        ICAgIGZvciAodmFyIG5hbWUgaW4gZGVzY3MpIHsKICAgICAgcHJvcGVydHkg
        PSBkZXNjc1tuYW1lXTsKCiAgICAgIGlmIChwcm9wZXJ0eSBpbnN0YW5jZW9m
        IEVtYmVyLkNvbXB1dGVkUHJvcGVydHkpIHsKICAgICAgICBjYWxsYmFjay5j
        YWxsKGJpbmRpbmcgfHwgdGhpcywgbmFtZSwgcHJvcGVydHkuX21ldGEgfHwg
        ZW1wdHkpOwogICAgICB9CiAgICB9CiAgfQoKfSk7CgpDbGFzc01peGluLm93
        bmVyQ29uc3RydWN0b3IgPSBDb3JlT2JqZWN0OwoKaWYgKEVtYmVyLmNvbmZp
        Zy5vdmVycmlkZUNsYXNzTWl4aW4pIHsKICBFbWJlci5jb25maWcub3ZlcnJp
        ZGVDbGFzc01peGluKENsYXNzTWl4aW4pOwp9CgpDb3JlT2JqZWN0LkNsYXNz
        TWl4aW4gPSBDbGFzc01peGluOwpDbGFzc01peGluLmFwcGx5KENvcmVPYmpl
        Y3QpOwoKRW1iZXIuQ29yZU9iamVjdCA9IENvcmVPYmplY3Q7Cgp9KSgpOwoK
        CgooZnVuY3Rpb24oKSB7Ci8qKgpAbW9kdWxlIGVtYmVyCkBzdWJtb2R1bGUg
        ZW1iZXItcnVudGltZQoqLwoKLyoqCiAgYEVtYmVyLk9iamVjdGAgaXMgdGhl
        IG1haW4gYmFzZSBjbGFzcyBmb3IgYWxsIEVtYmVyIG9iamVjdHMuIEl0IGlz
        IGEgc3ViY2xhc3MKICBvZiBgRW1iZXIuQ29yZU9iamVjdGAgd2l0aCB0aGUg
        YEVtYmVyLk9ic2VydmFibGVgIG1peGluIGFwcGxpZWQuIEZvciBkZXRhaWxz
        LAogIHNlZSB0aGUgZG9jdW1lbnRhdGlvbiBmb3IgZWFjaCBvZiB0aGVzZS4K
        CiAgQGNsYXNzIE9iamVjdAogIEBuYW1lc3BhY2UgRW1iZXIKICBAZXh0ZW5k
        cyBFbWJlci5Db3JlT2JqZWN0CiAgQHVzZXMgRW1iZXIuT2JzZXJ2YWJsZQoq
        LwpFbWJlci5PYmplY3QgPSBFbWJlci5Db3JlT2JqZWN0LmV4dGVuZChFbWJl
        ci5PYnNlcnZhYmxlKTsKRW1iZXIuT2JqZWN0LnRvU3RyaW5nID0gZnVuY3Rp
        b24oKSB7IHJldHVybiAiRW1iZXIuT2JqZWN0IjsgfTsKCn0pKCk7CgoKCihm
        dW5jdGlvbigpIHsKLyoqCkBtb2R1bGUgZW1iZXIKQHN1Ym1vZHVsZSBlbWJl
        ci1ydW50aW1lCiovCgp2YXIgZ2V0ID0gRW1iZXIuZ2V0LCBpbmRleE9mID0g
        RW1iZXIuQXJyYXlQb2x5ZmlsbHMuaW5kZXhPZjsKCi8qKgogIEEgTmFtZXNw
        YWNlIGlzIGFuIG9iamVjdCB1c3VhbGx5IHVzZWQgdG8gY29udGFpbiBvdGhl
        ciBvYmplY3RzIG9yIG1ldGhvZHMKICBzdWNoIGFzIGFuIGFwcGxpY2F0aW9u
        IG9yIGZyYW1ld29yay4gQ3JlYXRlIGEgbmFtZXNwYWNlIGFueXRpbWUgeW91
        IHdhbnQKICB0byBkZWZpbmUgb25lIG9mIHRoZXNlIG5ldyBjb250YWluZXJz
        LgoKICAjIEV4YW1wbGUgVXNhZ2UKCiAgYGBgamF2YXNjcmlwdAogIE15RnJh
        bWV3b3JrID0gRW1iZXIuTmFtZXNwYWNlLmNyZWF0ZSh7CiAgICBWRVJTSU9O
        OiAnMS4wLjAnCiAgfSk7CiAgYGBgCgogIEBjbGFzcyBOYW1lc3BhY2UKICBA
        bmFtZXNwYWNlIEVtYmVyCiAgQGV4dGVuZHMgRW1iZXIuT2JqZWN0CiovCnZh
        ciBOYW1lc3BhY2UgPSBFbWJlci5OYW1lc3BhY2UgPSBFbWJlci5PYmplY3Qu
        ZXh0ZW5kKHsKICBpc05hbWVzcGFjZTogdHJ1ZSwKCiAgaW5pdDogZnVuY3Rp
        b24oKSB7CiAgICBFbWJlci5OYW1lc3BhY2UuTkFNRVNQQUNFUy5wdXNoKHRo
        aXMpOwogICAgRW1iZXIuTmFtZXNwYWNlLlBST0NFU1NFRCA9IGZhbHNlOwog
        IH0sCgogIHRvU3RyaW5nOiBmdW5jdGlvbigpIHsKICAgIHZhciBuYW1lID0g
        Z2V0KHRoaXMsICduYW1lJyk7CiAgICBpZiAobmFtZSkgeyByZXR1cm4gbmFt
        ZTsgfQoKICAgIGZpbmROYW1lc3BhY2VzKCk7CiAgICByZXR1cm4gdGhpc1tF
        bWJlci5HVUlEX0tFWSsnX25hbWUnXTsKICB9LAoKICBuYW1lQ2xhc3Nlczog
        ZnVuY3Rpb24oKSB7CiAgICBwcm9jZXNzTmFtZXNwYWNlKFt0aGlzLnRvU3Ry
        aW5nKCldLCB0aGlzLCB7fSk7CiAgfSwKCiAgZGVzdHJveTogZnVuY3Rpb24o
        KSB7CiAgICB2YXIgbmFtZXNwYWNlcyA9IEVtYmVyLk5hbWVzcGFjZS5OQU1F
        U1BBQ0VTOwogICAgRW1iZXIubG9va3VwW3RoaXMudG9TdHJpbmcoKV0gPSB1
        bmRlZmluZWQ7CiAgICBuYW1lc3BhY2VzLnNwbGljZShpbmRleE9mLmNhbGwo
        bmFtZXNwYWNlcywgdGhpcyksIDEpOwogICAgdGhpcy5fc3VwZXIoKTsKICB9
        Cn0pOwoKTmFtZXNwYWNlLnJlb3BlbkNsYXNzKHsKICBOQU1FU1BBQ0VTOiBb
        RW1iZXJdLAogIE5BTUVTUEFDRVNfQllfSUQ6IHt9LAogIFBST0NFU1NFRDog
        ZmFsc2UsCiAgcHJvY2Vzc0FsbDogcHJvY2Vzc0FsbE5hbWVzcGFjZXMsCiAg
        YnlOYW1lOiBmdW5jdGlvbihuYW1lKSB7CiAgICBpZiAoIUVtYmVyLkJPT1RF
        RCkgewogICAgICBwcm9jZXNzQWxsTmFtZXNwYWNlcygpOwogICAgfQoKICAg
        IHJldHVybiBOQU1FU1BBQ0VTX0JZX0lEW25hbWVdOwogIH0KfSk7Cgp2YXIg
        TkFNRVNQQUNFU19CWV9JRCA9IE5hbWVzcGFjZS5OQU1FU1BBQ0VTX0JZX0lE
        OwoKdmFyIGhhc093blByb3AgPSAoe30pLmhhc093blByb3BlcnR5LAogICAg
        Z3VpZEZvciA9IEVtYmVyLmd1aWRGb3I7CgpmdW5jdGlvbiBwcm9jZXNzTmFt
        ZXNwYWNlKHBhdGhzLCByb290LCBzZWVuKSB7CiAgdmFyIGlkeCA9IHBhdGhz
        Lmxlbmd0aDsKCiAgTkFNRVNQQUNFU19CWV9JRFtwYXRocy5qb2luKCcuJyld
        ID0gcm9vdDsKCiAgLy8gTG9vcCBvdmVyIGFsbCBvZiB0aGUga2V5cyBpbiB0
        aGUgbmFtZXNwYWNlLCBsb29raW5nIGZvciBjbGFzc2VzCiAgZm9yKHZhciBr
        ZXkgaW4gcm9vdCkgewogICAgaWYgKCFoYXNPd25Qcm9wLmNhbGwocm9vdCwg
        a2V5KSkgeyBjb250aW51ZTsgfQogICAgdmFyIG9iaiA9IHJvb3Rba2V5XTsK
        CiAgICAvLyBJZiB3ZSBhcmUgcHJvY2Vzc2luZyB0aGUgYEVtYmVyYCBuYW1l
        c3BhY2UsIGZvciBleGFtcGxlLCB0aGUKICAgIC8vIGBwYXRoc2Agd2lsbCBz
        dGFydCB3aXRoIGBbIkVtYmVyIl1gLiBFdmVyeSBpdGVyYXRpb24gdGhyb3Vn
        aAogICAgLy8gdGhlIGxvb3Agd2lsbCB1cGRhdGUgdGhlICoqc2Vjb25kKiog
        ZWxlbWVudCBvZiB0aGlzIGxpc3Qgd2l0aAogICAgLy8gdGhlIGtleSwgc28g
        cHJvY2Vzc2luZyBgRW1iZXIuVmlld2Agd2lsbCBtYWtlIHRoZSBBcnJheQog
        ICAgLy8gYFsnRW1iZXInLCAnVmlldyddYC4KICAgIHBhdGhzW2lkeF0gPSBr
        ZXk7CgogICAgLy8gSWYgd2UgaGF2ZSBmb3VuZCBhbiB1bnByb2Nlc3NlZCBj
        bGFzcwogICAgaWYgKG9iaiAmJiBvYmoudG9TdHJpbmcgPT09IGNsYXNzVG9T
        dHJpbmcpIHsKICAgICAgLy8gUmVwbGFjZSB0aGUgY2xhc3MnIGB0b1N0cmlu
        Z2Agd2l0aCB0aGUgZG90LXNlcGFyYXRlZCBwYXRoCiAgICAgIC8vIGFuZCBz
        ZXQgaXRzIGBOQU1FX0tFWWAKICAgICAgb2JqLnRvU3RyaW5nID0gbWFrZVRv
        U3RyaW5nKHBhdGhzLmpvaW4oJy4nKSk7CiAgICAgIG9ialtOQU1FX0tFWV0g
        PSBwYXRocy5qb2luKCcuJyk7CgogICAgLy8gU3VwcG9ydCBuZXN0ZWQgbmFt
        ZXNwYWNlcwogICAgfSBlbHNlIGlmIChvYmogJiYgb2JqLmlzTmFtZXNwYWNl
        KSB7CiAgICAgIC8vIFNraXAgYWxpYXNlZCBuYW1lc3BhY2VzCiAgICAgIGlm
        IChzZWVuW2d1aWRGb3Iob2JqKV0pIHsgY29udGludWU7IH0KICAgICAgc2Vl
        bltndWlkRm9yKG9iaildID0gdHJ1ZTsKCiAgICAgIC8vIFByb2Nlc3MgdGhl
        IGNoaWxkIG5hbWVzcGFjZQogICAgICBwcm9jZXNzTmFtZXNwYWNlKHBhdGhz
        LCBvYmosIHNlZW4pOwogICAgfQogIH0KCiAgcGF0aHMubGVuZ3RoID0gaWR4
        OyAvLyBjdXQgb3V0IGxhc3QgaXRlbQp9CgpmdW5jdGlvbiBmaW5kTmFtZXNw
        YWNlcygpIHsKICB2YXIgTmFtZXNwYWNlID0gRW1iZXIuTmFtZXNwYWNlLCBs
        b29rdXAgPSBFbWJlci5sb29rdXAsIG9iaiwgaXNOYW1lc3BhY2U7CgogIGlm
        IChOYW1lc3BhY2UuUFJPQ0VTU0VEKSB7IHJldHVybjsgfQoKICBmb3IgKHZh
        ciBwcm9wIGluIGxvb2t1cCkgewogICAgLy8gVGhlc2UgZG9uJ3QgcmFpc2Ug
        ZXhjZXB0aW9ucyBidXQgY2FuIGNhdXNlIHdhcm5pbmdzCiAgICBpZiAocHJv
        cCA9PT0gInBhcmVudCIgfHwgcHJvcCA9PT0gInRvcCIgfHwgcHJvcCA9PT0g
        ImZyYW1lRWxlbWVudCIgfHwgcHJvcCA9PT0gIndlYmtpdFN0b3JhZ2VJbmZv
        IikgeyBjb250aW51ZTsgfQoKICAgIC8vICBnZXQod2luZG93Lmdsb2JhbFN0
        b3JhZ2UsICdpc05hbWVzcGFjZScpIHdvdWxkIHRyeSB0byByZWFkIHRoZSBz
        dG9yYWdlIGZvciBkb21haW4gaXNOYW1lc3BhY2UgYW5kIGNhdXNlIGV4Y2Vw
        dGlvbiBpbiBGaXJlZm94LgogICAgLy8gZ2xvYmFsU3RvcmFnZSBpcyBhIHN0
        b3JhZ2Ugb2Jzb2xldGVkIGJ5IHRoZSBXaGF0V0cgc3RvcmFnZSBzcGVjaWZp
        Y2F0aW9uLiBTZWUgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4v
        RE9NL1N0b3JhZ2UjZ2xvYmFsU3RvcmFnZQogICAgaWYgKHByb3AgPT09ICJn
        bG9iYWxTdG9yYWdlIiAmJiBsb29rdXAuU3RvcmFnZUxpc3QgJiYgbG9va3Vw
        Lmdsb2JhbFN0b3JhZ2UgaW5zdGFuY2VvZiBsb29rdXAuU3RvcmFnZUxpc3Qp
        IHsgY29udGludWU7IH0KICAgIC8vIFVuZm9ydHVuYXRlbHksIHNvbWUgdmVy
        c2lvbnMgb2YgSUUgZG9uJ3Qgc3VwcG9ydCB3aW5kb3cuaGFzT3duUHJvcGVy
        dHkKICAgIGlmIChsb29rdXAuaGFzT3duUHJvcGVydHkgJiYgIWxvb2t1cC5o
        YXNPd25Qcm9wZXJ0eShwcm9wKSkgeyBjb250aW51ZTsgfQoKICAgIC8vIEF0
        IHRpbWVzIHdlIGFyZSBub3QgYWxsb3dlZCB0byBhY2Nlc3MgY2VydGFpbiBw
        cm9wZXJ0aWVzIGZvciBzZWN1cml0eSByZWFzb25zLgogICAgLy8gVGhlcmUg
        YXJlIGFsc28gdGltZXMgd2hlcmUgZXZlbiBpZiB3ZSBjYW4gYWNjZXNzIHRo
        ZW0sIHdlIGFyZSBub3QgYWxsb3dlZCB0byBhY2Nlc3MgdGhlaXIgcHJvcGVy
        dGllcy4KICAgIHRyeSB7CiAgICAgIG9iaiA9IEVtYmVyLmxvb2t1cFtwcm9w
        XTsKICAgICAgaXNOYW1lc3BhY2UgPSBvYmogJiYgb2JqLmlzTmFtZXNwYWNl
        OwogICAgfSBjYXRjaCAoZSkgewogICAgICBjb250aW51ZTsKICAgIH0KCiAg
        ICBpZiAoaXNOYW1lc3BhY2UpIHsKICAgICAgRW1iZXIuZGVwcmVjYXRlKCJO
        YW1lc3BhY2VzIHNob3VsZCBub3QgYmVnaW4gd2l0aCBsb3dlcmNhc2UuIiwg
        L15bQS1aXS8udGVzdChwcm9wKSk7CiAgICAgIG9ialtOQU1FX0tFWV0gPSBw
        cm9wOwogICAgfQogIH0KfQoKdmFyIE5BTUVfS0VZID0gRW1iZXIuTkFNRV9L
        RVkgPSBFbWJlci5HVUlEX0tFWSArICdfbmFtZSc7CgpmdW5jdGlvbiBzdXBl
        ckNsYXNzU3RyaW5nKG1peGluKSB7CiAgdmFyIHN1cGVyY2xhc3MgPSBtaXhp
        bi5zdXBlcmNsYXNzOwogIGlmIChzdXBlcmNsYXNzKSB7CiAgICBpZiAoc3Vw
        ZXJjbGFzc1tOQU1FX0tFWV0pIHsgcmV0dXJuIHN1cGVyY2xhc3NbTkFNRV9L
        RVldOyB9CiAgICBlbHNlIHsgcmV0dXJuIHN1cGVyQ2xhc3NTdHJpbmcoc3Vw
        ZXJjbGFzcyk7IH0KICB9IGVsc2UgewogICAgcmV0dXJuOwogIH0KfQoKZnVu
        Y3Rpb24gY2xhc3NUb1N0cmluZygpIHsKICBpZiAoIUVtYmVyLkJPT1RFRCAm
        JiAhdGhpc1tOQU1FX0tFWV0pIHsKICAgIHByb2Nlc3NBbGxOYW1lc3BhY2Vz
        KCk7CiAgfQoKICB2YXIgcmV0OwoKICBpZiAodGhpc1tOQU1FX0tFWV0pIHsK
        ICAgIHJldCA9IHRoaXNbTkFNRV9LRVldOwogIH0gZWxzZSBpZiAodGhpcy5f
        dG9TdHJpbmcpIHsKICAgIHJldCA9IHRoaXMuX3RvU3RyaW5nOyAKICB9IGVs
        c2UgewogICAgdmFyIHN0ciA9IHN1cGVyQ2xhc3NTdHJpbmcodGhpcyk7CiAg
        ICBpZiAoc3RyKSB7CiAgICAgIHJldCA9ICIoc3ViY2xhc3Mgb2YgIiArIHN0
        ciArICIpIjsKICAgIH0gZWxzZSB7CiAgICAgIHJldCA9ICIodW5rbm93biBt
        aXhpbikiOwogICAgfQogICAgdGhpcy50b1N0cmluZyA9IG1ha2VUb1N0cmlu
        ZyhyZXQpOwogIH0KCiAgcmV0dXJuIHJldDsKfQoKZnVuY3Rpb24gcHJvY2Vz
        c0FsbE5hbWVzcGFjZXMoKSB7CiAgdmFyIHVucHJvY2Vzc2VkTmFtZXNwYWNl
        cyA9ICFOYW1lc3BhY2UuUFJPQ0VTU0VELAogICAgICB1bnByb2Nlc3NlZE1p
        eGlucyA9IEVtYmVyLmFueVVucHJvY2Vzc2VkTWl4aW5zOwoKICBpZiAodW5w
        cm9jZXNzZWROYW1lc3BhY2VzKSB7CiAgICBmaW5kTmFtZXNwYWNlcygpOwog
        ICAgTmFtZXNwYWNlLlBST0NFU1NFRCA9IHRydWU7CiAgfQoKICBpZiAodW5w
        cm9jZXNzZWROYW1lc3BhY2VzIHx8IHVucHJvY2Vzc2VkTWl4aW5zKSB7CiAg
        ICB2YXIgbmFtZXNwYWNlcyA9IE5hbWVzcGFjZS5OQU1FU1BBQ0VTLCBuYW1l
        c3BhY2U7CiAgICBmb3IgKHZhciBpPTAsIGw9bmFtZXNwYWNlcy5sZW5ndGg7
        IGk8bDsgaSsrKSB7CiAgICAgIG5hbWVzcGFjZSA9IG5hbWVzcGFjZXNbaV07
        CiAgICAgIHByb2Nlc3NOYW1lc3BhY2UoW25hbWVzcGFjZS50b1N0cmluZygp
        XSwgbmFtZXNwYWNlLCB7fSk7CiAgICB9CgogICAgRW1iZXIuYW55VW5wcm9j
        ZXNzZWRNaXhpbnMgPSBmYWxzZTsKICB9Cn0KCmZ1bmN0aW9uIG1ha2VUb1N0
        cmluZyhyZXQpIHsKICByZXR1cm4gZnVuY3Rpb24oKSB7IHJldHVybiByZXQ7
        IH07Cn0KCkVtYmVyLk1peGluLnByb3RvdHlwZS50b1N0cmluZyA9IGNsYXNz
        VG9TdHJpbmc7Cgp9KSgpOwoKCgooZnVuY3Rpb24oKSB7CkVtYmVyLkFwcGxp
        Y2F0aW9uID0gRW1iZXIuTmFtZXNwYWNlLmV4dGVuZCgpOwoKfSkoKTsKCgoK
        KGZ1bmN0aW9uKCkgewovKioKQG1vZHVsZSBlbWJlcgpAc3VibW9kdWxlIGVt
        YmVyLXJ1bnRpbWUKKi8KCnZhciBPVVRfT0ZfUkFOR0VfRVhDRVBUSU9OID0g
        IkluZGV4IG91dCBvZiByYW5nZSI7CnZhciBFTVBUWSA9IFtdOwoKdmFyIGdl
        dCA9IEVtYmVyLmdldCwgc2V0ID0gRW1iZXIuc2V0OwoKLyoqCiAgQW4gQXJy
        YXlQcm94eSB3cmFwcyBhbnkgb3RoZXIgb2JqZWN0IHRoYXQgaW1wbGVtZW50
        cyBgRW1iZXIuQXJyYXlgIGFuZC9vcgogIGBFbWJlci5NdXRhYmxlQXJyYXks
        YCBmb3J3YXJkaW5nIGFsbCByZXF1ZXN0cy4gVGhpcyBtYWtlcyBpdCB2ZXJ5
        IHVzZWZ1bCBmb3IKICBhIG51bWJlciBvZiBiaW5kaW5nIHVzZSBjYXNlcyBv
        ciBvdGhlciBjYXNlcyB3aGVyZSBiZWluZyBhYmxlIHRvIHN3YXAKICBvdXQg
        dGhlIHVuZGVybHlpbmcgYXJyYXkgaXMgdXNlZnVsLgoKICBBIHNpbXBsZSBl
        eGFtcGxlIG9mIHVzYWdlOgoKICBgYGBqYXZhc2NyaXB0CiAgdmFyIHBldHMg
        PSBbJ2RvZycsICdjYXQnLCAnZmlzaCddOwogIHZhciBhcCA9IEVtYmVyLkFy
        cmF5UHJveHkuY3JlYXRlKHsgY29udGVudDogRW1iZXIuQShwZXRzKSB9KTsK
        CiAgYXAuZ2V0KCdmaXJzdE9iamVjdCcpOyAgICAgICAgICAgICAgICAgICAg
        ICAgIC8vICdkb2cnCiAgYXAuc2V0KCdjb250ZW50JywgWydhbW9lYmEnLCAn
        cGFyYW1lY2l1bSddKTsKICBhcC5nZXQoJ2ZpcnN0T2JqZWN0Jyk7ICAgICAg
        ICAgICAgICAgICAgICAgICAgLy8gJ2Ftb2ViYScKICBgYGAKCiAgVGhpcyBj
        bGFzcyBjYW4gYWxzbyBiZSB1c2VmdWwgYXMgYSBsYXllciB0byB0cmFuc2Zv
        cm0gdGhlIGNvbnRlbnRzIG9mCiAgYW4gYXJyYXksIGFzIHRoZXkgYXJlIGFj
        Y2Vzc2VkLiBUaGlzIGNhbiBiZSBkb25lIGJ5IG92ZXJyaWRpbmcKICBgb2Jq
        ZWN0QXRDb250ZW50YDoKCiAgYGBgamF2YXNjcmlwdAogIHZhciBwZXRzID0g
        Wydkb2cnLCAnY2F0JywgJ2Zpc2gnXTsKICB2YXIgYXAgPSBFbWJlci5BcnJh
        eVByb3h5LmNyZWF0ZSh7CiAgICAgIGNvbnRlbnQ6IEVtYmVyLkEocGV0cyks
        CiAgICAgIG9iamVjdEF0Q29udGVudDogZnVuY3Rpb24oaWR4KSB7CiAgICAg
        ICAgICByZXR1cm4gdGhpcy5nZXQoJ2NvbnRlbnQnKS5vYmplY3RBdChpZHgp
        LnRvVXBwZXJDYXNlKCk7CiAgICAgIH0KICB9KTsKCiAgYXAuZ2V0KCdmaXJz
        dE9iamVjdCcpOyAvLyAuICdET0cnCiAgYGBgCgogIEBjbGFzcyBBcnJheVBy
        b3h5CiAgQG5hbWVzcGFjZSBFbWJlcgogIEBleHRlbmRzIEVtYmVyLk9iamVj
        dAogIEB1c2VzIEVtYmVyLk11dGFibGVBcnJheQoqLwpFbWJlci5BcnJheVBy
        b3h5ID0gRW1iZXIuT2JqZWN0LmV4dGVuZChFbWJlci5NdXRhYmxlQXJyYXks
        LyoqIEBzY29wZSBFbWJlci5BcnJheVByb3h5LnByb3RvdHlwZSAqLyB7Cgog
        IC8qKgogICAgVGhlIGNvbnRlbnQgYXJyYXkuIE11c3QgYmUgYW4gb2JqZWN0
        IHRoYXQgaW1wbGVtZW50cyBgRW1iZXIuQXJyYXlgIGFuZC9vcgogICAgYEVt
        YmVyLk11dGFibGVBcnJheS5gCgogICAgQHByb3BlcnR5IGNvbnRlbnQKICAg
        IEB0eXBlIEVtYmVyLkFycmF5CiAgKi8KICBjb250ZW50OiBudWxsLAoKICAv
        KioKICAgVGhlIGFycmF5IHRoYXQgdGhlIHByb3h5IHByZXRlbmRzIHRvIGJl
        LiBJbiB0aGUgZGVmYXVsdCBgQXJyYXlQcm94eWAKICAgaW1wbGVtZW50YXRp
        b24sIHRoaXMgYW5kIGBjb250ZW50YCBhcmUgdGhlIHNhbWUuIFN1YmNsYXNz
        ZXMgb2YgYEFycmF5UHJveHlgCiAgIGNhbiBvdmVycmlkZSB0aGlzIHByb3Bl
        cnR5IHRvIHByb3ZpZGUgdGhpbmdzIGxpa2Ugc29ydGluZyBhbmQgZmlsdGVy
        aW5nLgoKICAgQHByb3BlcnR5IGFycmFuZ2VkQ29udGVudAogICovCiAgYXJy
        YW5nZWRDb250ZW50OiBFbWJlci5jb21wdXRlZC5hbGlhcygnY29udGVudCcp
        LAoKICAvKioKICAgIFNob3VsZCBhY3R1YWxseSByZXRyaWV2ZSB0aGUgb2Jq
        ZWN0IGF0IHRoZSBzcGVjaWZpZWQgaW5kZXggZnJvbSB0aGUKICAgIGNvbnRl
        bnQuIFlvdSBjYW4gb3ZlcnJpZGUgdGhpcyBtZXRob2QgaW4gc3ViY2xhc3Nl
        cyB0byB0cmFuc2Zvcm0gdGhlCiAgICBjb250ZW50IGl0ZW0gdG8gc29tZXRo
        aW5nIG5ldy4KCiAgICBUaGlzIG1ldGhvZCB3aWxsIG9ubHkgYmUgY2FsbGVk
        IGlmIGNvbnRlbnQgaXMgbm9uLWBudWxsYC4KCiAgICBAbWV0aG9kIG9iamVj
        dEF0Q29udGVudAogICAgQHBhcmFtIHtOdW1iZXJ9IGlkeCBUaGUgaW5kZXgg
        dG8gcmV0cmlldmUuCiAgICBAcmV0dXJuIHtPYmplY3R9IHRoZSB2YWx1ZSBv
        ciB1bmRlZmluZWQgaWYgbm9uZSBmb3VuZAogICovCiAgb2JqZWN0QXRDb250
        ZW50OiBmdW5jdGlvbihpZHgpIHsKICAgIHJldHVybiBnZXQodGhpcywgJ2Fy
        cmFuZ2VkQ29udGVudCcpLm9iamVjdEF0KGlkeCk7CiAgfSwKCiAgLyoqCiAg
        ICBTaG91bGQgYWN0dWFsbHkgcmVwbGFjZSB0aGUgc3BlY2lmaWVkIG9iamVj
        dHMgb24gdGhlIGNvbnRlbnQgYXJyYXkuCiAgICBZb3UgY2FuIG92ZXJyaWRl
        IHRoaXMgbWV0aG9kIGluIHN1YmNsYXNzZXMgdG8gdHJhbnNmb3JtIHRoZSBj
        b250ZW50IGl0ZW0KICAgIGludG8gc29tZXRoaW5nIG5ldy4KCiAgICBUaGlz
        IG1ldGhvZCB3aWxsIG9ubHkgYmUgY2FsbGVkIGlmIGNvbnRlbnQgaXMgbm9u
        LWBudWxsYC4KCiAgICBAbWV0aG9kIHJlcGxhY2VDb250ZW50CiAgICBAcGFy
        YW0ge051bWJlcn0gaWR4IFRoZSBzdGFydGluZyBpbmRleAogICAgQHBhcmFt
        IHtOdW1iZXJ9IGFtdCBUaGUgbnVtYmVyIG9mIGl0ZW1zIHRvIHJlbW92ZSBm
        cm9tIHRoZSBjb250ZW50LgogICAgQHBhcmFtIHtBcnJheX0gb2JqZWN0cyBP
        cHRpb25hbCBhcnJheSBvZiBvYmplY3RzIHRvIGluc2VydCBvciBudWxsIGlm
        IG5vCiAgICAgIG9iamVjdHMuCiAgICBAcmV0dXJuIHt2b2lkfQogICovCiAg
        cmVwbGFjZUNvbnRlbnQ6IGZ1bmN0aW9uKGlkeCwgYW10LCBvYmplY3RzKSB7
        CiAgICBnZXQodGhpcywgJ2NvbnRlbnQnKS5yZXBsYWNlKGlkeCwgYW10LCBv
        YmplY3RzKTsKICB9LAoKICAvKioKICAgIEBwcml2YXRlCgogICAgSW52b2tl
        ZCB3aGVuIHRoZSBjb250ZW50IHByb3BlcnR5IGlzIGFib3V0IHRvIGNoYW5n
        ZS4gTm90aWZpZXMgb2JzZXJ2ZXJzIHRoYXQgdGhlCiAgICBlbnRpcmUgYXJy
        YXkgY29udGVudCB3aWxsIGNoYW5nZS4KCiAgICBAbWV0aG9kIF9jb250ZW50
        V2lsbENoYW5nZQogICovCiAgX2NvbnRlbnRXaWxsQ2hhbmdlOiBFbWJlci5i
        ZWZvcmVPYnNlcnZlcignY29udGVudCcsIGZ1bmN0aW9uKCkgewogICAgdGhp
        cy5fdGVhcmRvd25Db250ZW50KCk7CiAgfSksCgogIF90ZWFyZG93bkNvbnRl
        bnQ6IGZ1bmN0aW9uKCkgewogICAgdmFyIGNvbnRlbnQgPSBnZXQodGhpcywg
        J2NvbnRlbnQnKTsKCiAgICBpZiAoY29udGVudCkgewogICAgICBjb250ZW50
        LnJlbW92ZUFycmF5T2JzZXJ2ZXIodGhpcywgewogICAgICAgIHdpbGxDaGFu
        Z2U6ICdjb250ZW50QXJyYXlXaWxsQ2hhbmdlJywKICAgICAgICBkaWRDaGFu
        Z2U6ICdjb250ZW50QXJyYXlEaWRDaGFuZ2UnCiAgICAgIH0pOwogICAgfQog
        IH0sCgogIGNvbnRlbnRBcnJheVdpbGxDaGFuZ2U6IEVtYmVyLkssCiAgY29u
        dGVudEFycmF5RGlkQ2hhbmdlOiBFbWJlci5LLAoKICAvKioKICAgIEBwcml2
        YXRlCgogICAgSW52b2tlZCB3aGVuIHRoZSBjb250ZW50IHByb3BlcnR5IGNo
        YW5nZXMuIE5vdGlmaWVzIG9ic2VydmVycyB0aGF0IHRoZQogICAgZW50aXJl
        IGFycmF5IGNvbnRlbnQgaGFzIGNoYW5nZWQuCgogICAgQG1ldGhvZCBfY29u
        dGVudERpZENoYW5nZQogICovCiAgX2NvbnRlbnREaWRDaGFuZ2U6IEVtYmVy
        Lm9ic2VydmVyKCdjb250ZW50JywgZnVuY3Rpb24oKSB7CiAgICB2YXIgY29u
        dGVudCA9IGdldCh0aGlzLCAnY29udGVudCcpOwoKICAgIEVtYmVyLmFzc2Vy
        dCgiQ2FuJ3Qgc2V0IEFycmF5UHJveHkncyBjb250ZW50IHRvIGl0c2VsZiIs
        IGNvbnRlbnQgIT09IHRoaXMpOwoKICAgIHRoaXMuX3NldHVwQ29udGVudCgp
        OwogIH0pLAoKICBfc2V0dXBDb250ZW50OiBmdW5jdGlvbigpIHsKICAgIHZh
        ciBjb250ZW50ID0gZ2V0KHRoaXMsICdjb250ZW50Jyk7CgogICAgaWYgKGNv
        bnRlbnQpIHsKICAgICAgY29udGVudC5hZGRBcnJheU9ic2VydmVyKHRoaXMs
        IHsKICAgICAgICB3aWxsQ2hhbmdlOiAnY29udGVudEFycmF5V2lsbENoYW5n
        ZScsCiAgICAgICAgZGlkQ2hhbmdlOiAnY29udGVudEFycmF5RGlkQ2hhbmdl
        JwogICAgICB9KTsKICAgIH0KICB9LAoKICBfYXJyYW5nZWRDb250ZW50V2ls
        bENoYW5nZTogRW1iZXIuYmVmb3JlT2JzZXJ2ZXIoJ2FycmFuZ2VkQ29udGVu
        dCcsIGZ1bmN0aW9uKCkgewogICAgdmFyIGFycmFuZ2VkQ29udGVudCA9IGdl
        dCh0aGlzLCAnYXJyYW5nZWRDb250ZW50JyksCiAgICAgICAgbGVuID0gYXJy
        YW5nZWRDb250ZW50ID8gZ2V0KGFycmFuZ2VkQ29udGVudCwgJ2xlbmd0aCcp
        IDogMDsKCiAgICB0aGlzLmFycmFuZ2VkQ29udGVudEFycmF5V2lsbENoYW5n
        ZSh0aGlzLCAwLCBsZW4sIHVuZGVmaW5lZCk7CiAgICB0aGlzLmFycmFuZ2Vk
        Q29udGVudFdpbGxDaGFuZ2UodGhpcyk7CgogICAgdGhpcy5fdGVhcmRvd25B
        cnJhbmdlZENvbnRlbnQoYXJyYW5nZWRDb250ZW50KTsKICB9KSwKCiAgX2Fy
        cmFuZ2VkQ29udGVudERpZENoYW5nZTogRW1iZXIub2JzZXJ2ZXIoJ2FycmFu
        Z2VkQ29udGVudCcsIGZ1bmN0aW9uKCkgewogICAgdmFyIGFycmFuZ2VkQ29u
        dGVudCA9IGdldCh0aGlzLCAnYXJyYW5nZWRDb250ZW50JyksCiAgICAgICAg
        bGVuID0gYXJyYW5nZWRDb250ZW50ID8gZ2V0KGFycmFuZ2VkQ29udGVudCwg
        J2xlbmd0aCcpIDogMDsKCiAgICBFbWJlci5hc3NlcnQoIkNhbid0IHNldCBB
        cnJheVByb3h5J3MgY29udGVudCB0byBpdHNlbGYiLCBhcnJhbmdlZENvbnRl
        bnQgIT09IHRoaXMpOwoKICAgIHRoaXMuX3NldHVwQXJyYW5nZWRDb250ZW50
        KCk7CgogICAgdGhpcy5hcnJhbmdlZENvbnRlbnREaWRDaGFuZ2UodGhpcyk7
        CiAgICB0aGlzLmFycmFuZ2VkQ29udGVudEFycmF5RGlkQ2hhbmdlKHRoaXMs
        IDAsIHVuZGVmaW5lZCwgbGVuKTsKICB9KSwKCiAgX3NldHVwQXJyYW5nZWRD
        b250ZW50OiBmdW5jdGlvbigpIHsKICAgIHZhciBhcnJhbmdlZENvbnRlbnQg
        PSBnZXQodGhpcywgJ2FycmFuZ2VkQ29udGVudCcpOwoKICAgIGlmIChhcnJh
        bmdlZENvbnRlbnQpIHsKICAgICAgYXJyYW5nZWRDb250ZW50LmFkZEFycmF5
        T2JzZXJ2ZXIodGhpcywgewogICAgICAgIHdpbGxDaGFuZ2U6ICdhcnJhbmdl
        ZENvbnRlbnRBcnJheVdpbGxDaGFuZ2UnLAogICAgICAgIGRpZENoYW5nZTog
        J2FycmFuZ2VkQ29udGVudEFycmF5RGlkQ2hhbmdlJwogICAgICB9KTsKICAg
        IH0KICB9LAoKICBfdGVhcmRvd25BcnJhbmdlZENvbnRlbnQ6IGZ1bmN0aW9u
        KCkgewogICAgdmFyIGFycmFuZ2VkQ29udGVudCA9IGdldCh0aGlzLCAnYXJy
        YW5nZWRDb250ZW50Jyk7CgogICAgaWYgKGFycmFuZ2VkQ29udGVudCkgewog
        ICAgICBhcnJhbmdlZENvbnRlbnQucmVtb3ZlQXJyYXlPYnNlcnZlcih0aGlz
        LCB7CiAgICAgICAgd2lsbENoYW5nZTogJ2FycmFuZ2VkQ29udGVudEFycmF5
        V2lsbENoYW5nZScsCiAgICAgICAgZGlkQ2hhbmdlOiAnYXJyYW5nZWRDb250
        ZW50QXJyYXlEaWRDaGFuZ2UnCiAgICAgIH0pOwogICAgfQogIH0sCgogIGFy
        cmFuZ2VkQ29udGVudFdpbGxDaGFuZ2U6IEVtYmVyLkssCiAgYXJyYW5nZWRD
        b250ZW50RGlkQ2hhbmdlOiBFbWJlci5LLAoKICBvYmplY3RBdDogZnVuY3Rp
        b24oaWR4KSB7CiAgICByZXR1cm4gZ2V0KHRoaXMsICdjb250ZW50JykgJiYg
        dGhpcy5vYmplY3RBdENvbnRlbnQoaWR4KTsKICB9LAoKICBsZW5ndGg6IEVt
        YmVyLmNvbXB1dGVkKGZ1bmN0aW9uKCkgewogICAgdmFyIGFycmFuZ2VkQ29u
        dGVudCA9IGdldCh0aGlzLCAnYXJyYW5nZWRDb250ZW50Jyk7CiAgICByZXR1
        cm4gYXJyYW5nZWRDb250ZW50ID8gZ2V0KGFycmFuZ2VkQ29udGVudCwgJ2xl
        bmd0aCcpIDogMDsKICAgIC8vIE5vIGRlcGVuZGVuY2llcyBzaW5jZSBFbnVt
        ZXJhYmxlIG5vdGlmaWVzIGxlbmd0aCBvZiBjaGFuZ2UKICB9KSwKCiAgX3Jl
        cGxhY2U6IGZ1bmN0aW9uKGlkeCwgYW10LCBvYmplY3RzKSB7CiAgICB2YXIg
        Y29udGVudCA9IGdldCh0aGlzLCAnY29udGVudCcpOwogICAgRW1iZXIuYXNz
        ZXJ0KCdUaGUgY29udGVudCBwcm9wZXJ0eSBvZiAnKyB0aGlzLmNvbnN0cnVj
        dG9yICsgJyBzaG91bGQgYmUgc2V0IGJlZm9yZSBtb2RpZnlpbmcgaXQnLCBj
        b250ZW50KTsKICAgIGlmIChjb250ZW50KSB0aGlzLnJlcGxhY2VDb250ZW50
        KGlkeCwgYW10LCBvYmplY3RzKTsKICAgIHJldHVybiB0aGlzOwogIH0sCgog
        IHJlcGxhY2U6IGZ1bmN0aW9uKCkgewogICAgaWYgKGdldCh0aGlzLCAnYXJy
        YW5nZWRDb250ZW50JykgPT09IGdldCh0aGlzLCAnY29udGVudCcpKSB7CiAg
        ICAgIHRoaXMuX3JlcGxhY2UuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAg
        IH0gZWxzZSB7CiAgICAgIHRocm93IG5ldyBFbWJlci5FcnJvcigiVXNpbmcg
        cmVwbGFjZSBvbiBhbiBhcnJhbmdlZCBBcnJheVByb3h5IGlzIG5vdCBhbGxv
        d2VkLiIpOwogICAgfQogIH0sCgogIF9pbnNlcnRBdDogZnVuY3Rpb24oaWR4
        LCBvYmplY3QpIHsKICAgIGlmIChpZHggPiBnZXQodGhpcywgJ2NvbnRlbnQu
        bGVuZ3RoJykpIHRocm93IG5ldyBFbWJlci5FcnJvcihPVVRfT0ZfUkFOR0Vf
        RVhDRVBUSU9OKTsKICAgIHRoaXMuX3JlcGxhY2UoaWR4LCAwLCBbb2JqZWN0
        XSk7CiAgICByZXR1cm4gdGhpczsKICB9LAoKICBpbnNlcnRBdDogZnVuY3Rp
        b24oaWR4LCBvYmplY3QpIHsKICAgIGlmIChnZXQodGhpcywgJ2FycmFuZ2Vk
        Q29udGVudCcpID09PSBnZXQodGhpcywgJ2NvbnRlbnQnKSkgewogICAgICBy
        ZXR1cm4gdGhpcy5faW5zZXJ0QXQoaWR4LCBvYmplY3QpOwogICAgfSBlbHNl
        IHsKICAgICAgdGhyb3cgbmV3IEVtYmVyLkVycm9yKCJVc2luZyBpbnNlcnRB
        dCBvbiBhbiBhcnJhbmdlZCBBcnJheVByb3h5IGlzIG5vdCBhbGxvd2VkLiIp
        OwogICAgfQogIH0sCgogIHJlbW92ZUF0OiBmdW5jdGlvbihzdGFydCwgbGVu
        KSB7CiAgICBpZiAoJ251bWJlcicgPT09IHR5cGVvZiBzdGFydCkgewogICAg
        ICB2YXIgY29udGVudCA9IGdldCh0aGlzLCAnY29udGVudCcpLAogICAgICAg
        ICAgYXJyYW5nZWRDb250ZW50ID0gZ2V0KHRoaXMsICdhcnJhbmdlZENvbnRl
        bnQnKSwKICAgICAgICAgIGluZGljZXMgPSBbXSwgaTsKCiAgICAgIGlmICgo
        c3RhcnQgPCAwKSB8fCAoc3RhcnQgPj0gZ2V0KHRoaXMsICdsZW5ndGgnKSkp
        IHsKICAgICAgICB0aHJvdyBuZXcgRW1iZXIuRXJyb3IoT1VUX09GX1JBTkdF
        X0VYQ0VQVElPTik7CiAgICAgIH0KCiAgICAgIGlmIChsZW4gPT09IHVuZGVm
        aW5lZCkgbGVuID0gMTsKCiAgICAgIC8vIEdldCBhIGxpc3Qgb2YgaW5kaWNl
        cyBpbiBvcmlnaW5hbCBjb250ZW50IHRvIHJlbW92ZQogICAgICBmb3IgKGk9
        c3RhcnQ7IGk8c3RhcnQrbGVuOyBpKyspIHsKICAgICAgICAvLyBVc2UgYXJy
        YW5nZWRDb250ZW50IGhlcmUgc28gd2UgYXZvaWQgY29uZnVzaW9uIHdpdGgg
        b2JqZWN0cyB0cmFuc2Zvcm1lZCBieSBvYmplY3RBdENvbnRlbnQKICAgICAg
        ICBpbmRpY2VzLnB1c2goY29udGVudC5pbmRleE9mKGFycmFuZ2VkQ29udGVu
        dC5vYmplY3RBdChpKSkpOwogICAgICB9CgogICAgICAvLyBSZXBsYWNlIGlu
        IHJldmVyc2Ugb3JkZXIgc2luY2UgaW5kaWNlcyB3aWxsIGNoYW5nZQogICAg
        ICBpbmRpY2VzLnNvcnQoZnVuY3Rpb24oYSxiKSB7IHJldHVybiBiIC0gYTsg
        fSk7CgogICAgICBFbWJlci5iZWdpblByb3BlcnR5Q2hhbmdlcygpOwogICAg
        ICBmb3IgKGk9MDsgaTxpbmRpY2VzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAg
        dGhpcy5fcmVwbGFjZShpbmRpY2VzW2ldLCAxLCBFTVBUWSk7CiAgICAgIH0K
        ICAgICAgRW1iZXIuZW5kUHJvcGVydHlDaGFuZ2VzKCk7CiAgICB9CgogICAg
        cmV0dXJuIHRoaXMgOwogIH0sCgogIHB1c2hPYmplY3Q6IGZ1bmN0aW9uKG9i
        aikgewogICAgdGhpcy5faW5zZXJ0QXQoZ2V0KHRoaXMsICdjb250ZW50Lmxl
        bmd0aCcpLCBvYmopIDsKICAgIHJldHVybiBvYmogOwogIH0sCgogIHB1c2hP
        YmplY3RzOiBmdW5jdGlvbihvYmplY3RzKSB7CiAgICBpZiAoIShFbWJlci5F
        bnVtZXJhYmxlLmRldGVjdChvYmplY3RzKSB8fCBFbWJlci5pc0FycmF5KG9i
        amVjdHMpKSkgewogICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCJNdXN0IHBh
        c3MgRW1iZXIuRW51bWVyYWJsZSB0byBFbWJlci5NdXRhYmxlQXJyYXkjcHVz
        aE9iamVjdHMiKTsKICAgIH0KICAgIHRoaXMuX3JlcGxhY2UoZ2V0KHRoaXMs
        ICdsZW5ndGgnKSwgMCwgb2JqZWN0cyk7CiAgICByZXR1cm4gdGhpczsKICB9
        LAoKICBzZXRPYmplY3RzOiBmdW5jdGlvbihvYmplY3RzKSB7CiAgICBpZiAo
        b2JqZWN0cy5sZW5ndGggPT09IDApIHJldHVybiB0aGlzLmNsZWFyKCk7Cgog
        ICAgdmFyIGxlbiA9IGdldCh0aGlzLCAnbGVuZ3RoJyk7CiAgICB0aGlzLl9y
        ZXBsYWNlKDAsIGxlbiwgb2JqZWN0cyk7CiAgICByZXR1cm4gdGhpczsKICB9
        LAoKICB1bnNoaWZ0T2JqZWN0OiBmdW5jdGlvbihvYmopIHsKICAgIHRoaXMu
        X2luc2VydEF0KDAsIG9iaikgOwogICAgcmV0dXJuIG9iaiA7CiAgfSwKCiAg
        dW5zaGlmdE9iamVjdHM6IGZ1bmN0aW9uKG9iamVjdHMpIHsKICAgIHRoaXMu
        X3JlcGxhY2UoMCwgMCwgb2JqZWN0cyk7CiAgICByZXR1cm4gdGhpczsKICB9
        LAoKICBzbGljZTogZnVuY3Rpb24oKSB7CiAgICB2YXIgYXJyID0gdGhpcy50
        b0FycmF5KCk7CiAgICByZXR1cm4gYXJyLnNsaWNlLmFwcGx5KGFyciwgYXJn
        dW1lbnRzKTsKICB9LAoKICBhcnJhbmdlZENvbnRlbnRBcnJheVdpbGxDaGFu
        Z2U6IGZ1bmN0aW9uKGl0ZW0sIGlkeCwgcmVtb3ZlZENudCwgYWRkZWRDbnQp
        IHsKICAgIHRoaXMuYXJyYXlDb250ZW50V2lsbENoYW5nZShpZHgsIHJlbW92
        ZWRDbnQsIGFkZGVkQ250KTsKICB9LAoKICBhcnJhbmdlZENvbnRlbnRBcnJh
        eURpZENoYW5nZTogZnVuY3Rpb24oaXRlbSwgaWR4LCByZW1vdmVkQ250LCBh
        ZGRlZENudCkgewogICAgdGhpcy5hcnJheUNvbnRlbnREaWRDaGFuZ2UoaWR4
        LCByZW1vdmVkQ250LCBhZGRlZENudCk7CiAgfSwKCiAgaW5pdDogZnVuY3Rp
        b24oKSB7CiAgICB0aGlzLl9zdXBlcigpOwogICAgdGhpcy5fc2V0dXBDb250
        ZW50KCk7CiAgICB0aGlzLl9zZXR1cEFycmFuZ2VkQ29udGVudCgpOwogIH0s
        CgogIHdpbGxEZXN0cm95OiBmdW5jdGlvbigpIHsKICAgIHRoaXMuX3RlYXJk
        b3duQXJyYW5nZWRDb250ZW50KCk7CiAgICB0aGlzLl90ZWFyZG93bkNvbnRl
        bnQoKTsKICB9Cn0pOwoKfSkoKTsKCgoKKGZ1bmN0aW9uKCkgewovKioKQG1v
        ZHVsZSBlbWJlcgpAc3VibW9kdWxlIGVtYmVyLXJ1bnRpbWUKKi8KCnZhciBn
        ZXQgPSBFbWJlci5nZXQsCiAgICBzZXQgPSBFbWJlci5zZXQsCiAgICBmbXQg
        PSBFbWJlci5TdHJpbmcuZm10LAogICAgYWRkQmVmb3JlT2JzZXJ2ZXIgPSBF
        bWJlci5hZGRCZWZvcmVPYnNlcnZlciwKICAgIGFkZE9ic2VydmVyID0gRW1i
        ZXIuYWRkT2JzZXJ2ZXIsCiAgICByZW1vdmVCZWZvcmVPYnNlcnZlciA9IEVt
        YmVyLnJlbW92ZUJlZm9yZU9ic2VydmVyLAogICAgcmVtb3ZlT2JzZXJ2ZXIg
        PSBFbWJlci5yZW1vdmVPYnNlcnZlciwKICAgIHByb3BlcnR5V2lsbENoYW5n
        ZSA9IEVtYmVyLnByb3BlcnR5V2lsbENoYW5nZSwKICAgIHByb3BlcnR5RGlk
        Q2hhbmdlID0gRW1iZXIucHJvcGVydHlEaWRDaGFuZ2UsCiAgICBtZXRhID0g
        RW1iZXIubWV0YSwKICAgIGRlZmluZVByb3BlcnR5ID0gRW1iZXIuZGVmaW5l
        UHJvcGVydHk7CgpmdW5jdGlvbiBjb250ZW50UHJvcGVydHlXaWxsQ2hhbmdl
        KGNvbnRlbnQsIGNvbnRlbnRLZXkpIHsKICB2YXIga2V5ID0gY29udGVudEtl
        eS5zbGljZSg4KTsgLy8gcmVtb3ZlICJjb250ZW50LiIKICBpZiAoa2V5IGlu
        IHRoaXMpIHsgcmV0dXJuOyB9ICAvLyBpZiBzaGFkb3dlZCBpbiBwcm94eQog
        IHByb3BlcnR5V2lsbENoYW5nZSh0aGlzLCBrZXkpOwp9CgpmdW5jdGlvbiBj
        b250ZW50UHJvcGVydHlEaWRDaGFuZ2UoY29udGVudCwgY29udGVudEtleSkg
        ewogIHZhciBrZXkgPSBjb250ZW50S2V5LnNsaWNlKDgpOyAvLyByZW1vdmUg
        ImNvbnRlbnQuIgogIGlmIChrZXkgaW4gdGhpcykgeyByZXR1cm47IH0gLy8g
        aWYgc2hhZG93ZWQgaW4gcHJveHkKICBwcm9wZXJ0eURpZENoYW5nZSh0aGlz
        LCBrZXkpOwp9CgovKioKICBgRW1iZXIuT2JqZWN0UHJveHlgIGZvcndhcmRz
        IGFsbCBwcm9wZXJ0aWVzIG5vdCBkZWZpbmVkIGJ5IHRoZSBwcm94eSBpdHNl
        bGYKICB0byBhIHByb3hpZWQgYGNvbnRlbnRgIG9iamVjdC4KCiAgYGBgamF2
        YXNjcmlwdAogIG9iamVjdCA9IEVtYmVyLk9iamVjdC5jcmVhdGUoewogICAg
        bmFtZTogJ0ZvbycKICB9KTsKCiAgcHJveHkgPSBFbWJlci5PYmplY3RQcm94
        eS5jcmVhdGUoewogICAgY29udGVudDogb2JqZWN0CiAgfSk7CgogIC8vIEFj
        Y2VzcyBhbmQgY2hhbmdlIGV4aXN0aW5nIHByb3BlcnRpZXMKICBwcm94eS5n
        ZXQoJ25hbWUnKSAgICAgICAgICAvLyAnRm9vJwogIHByb3h5LnNldCgnbmFt
        ZScsICdCYXInKTsKICBvYmplY3QuZ2V0KCduYW1lJykgICAgICAgICAvLyAn
        QmFyJwoKICAvLyBDcmVhdGUgbmV3ICdkZXNjcmlwdGlvbicgcHJvcGVydHkg
        b24gYG9iamVjdGAKICBwcm94eS5zZXQoJ2Rlc2NyaXB0aW9uJywgJ0ZvbyBp
        cyBhIHdoaXpib28gYmF6Jyk7CiAgb2JqZWN0LmdldCgnZGVzY3JpcHRpb24n
        KSAgLy8gJ0ZvbyBpcyBhIHdoaXpib28gYmF6JwogIGBgYAoKICBXaGlsZSBg
        Y29udGVudGAgaXMgdW5zZXQsIHNldHRpbmcgYSBwcm9wZXJ0eSB0byBiZSBk
        ZWxlZ2F0ZWQgd2lsbCB0aHJvdyBhbgogIEVycm9yLgoKICBgYGBqYXZhc2Ny
        aXB0CiAgcHJveHkgPSBFbWJlci5PYmplY3RQcm94eS5jcmVhdGUoewogICAg
        Y29udGVudDogbnVsbCwKICAgIGZsYWc6IG51bGwKICB9KTsKICBwcm94eS5z
        ZXQoJ2ZsYWcnLCB0cnVlKTsKICBwcm94eS5nZXQoJ2ZsYWcnKTsgICAgICAg
        ICAvLyB0cnVlCiAgcHJveHkuZ2V0KCdmb28nKTsgICAgICAgICAgLy8gdW5k
        ZWZpbmVkCiAgcHJveHkuc2V0KCdmb28nLCAnZGF0YScpOyAgLy8gdGhyb3dz
        IEVycm9yCiAgYGBgCgogIERlbGVnYXRlZCBwcm9wZXJ0aWVzIGNhbiBiZSBi
        b3VuZCB0byBhbmQgd2lsbCBjaGFuZ2Ugd2hlbiBjb250ZW50IGlzIHVwZGF0
        ZWQuCgogIENvbXB1dGVkIHByb3BlcnRpZXMgb24gdGhlIHByb3h5IGl0c2Vs
        ZiBjYW4gZGVwZW5kIG9uIGRlbGVnYXRlZCBwcm9wZXJ0aWVzLgoKICBgYGBq
        YXZhc2NyaXB0CiAgUHJveHlXaXRoQ29tcHV0ZWRQcm9wZXJ0eSA9IEVtYmVy
        Lk9iamVjdFByb3h5LmV4dGVuZCh7CiAgICBmdWxsTmFtZTogZnVuY3Rpb24g
        KCkgewogICAgICB2YXIgZmlyc3ROYW1lID0gdGhpcy5nZXQoJ2ZpcnN0TmFt
        ZScpLAogICAgICAgICAgbGFzdE5hbWUgPSB0aGlzLmdldCgnbGFzdE5hbWUn
        KTsKICAgICAgaWYgKGZpcnN0TmFtZSAmJiBsYXN0TmFtZSkgewogICAgICAg
        IHJldHVybiBmaXJzdE5hbWUgKyAnICcgKyBsYXN0TmFtZTsKICAgICAgfQog
        ICAgICByZXR1cm4gZmlyc3ROYW1lIHx8IGxhc3ROYW1lOwogICAgfS5wcm9w
        ZXJ0eSgnZmlyc3ROYW1lJywgJ2xhc3ROYW1lJykKICB9KTsKCiAgcHJveHkg
        PSBQcm94eVdpdGhDb21wdXRlZFByb3BlcnR5LmNyZWF0ZSgpOwoKICBwcm94
        eS5nZXQoJ2Z1bGxOYW1lJyk7ICAvLyB1bmRlZmluZWQKICBwcm94eS5zZXQo
        J2NvbnRlbnQnLCB7CiAgICBmaXJzdE5hbWU6ICdUb20nLCBsYXN0TmFtZTog
        J0RhbGUnCiAgfSk7IC8vIHRyaWdnZXJzIHByb3BlcnR5IGNoYW5nZSBmb3Ig
        ZnVsbE5hbWUgb24gcHJveHkKCiAgcHJveHkuZ2V0KCdmdWxsTmFtZScpOyAg
        Ly8gJ1RvbSBEYWxlJwogIGBgYAoKICBAY2xhc3MgT2JqZWN0UHJveHkKICBA
        bmFtZXNwYWNlIEVtYmVyCiAgQGV4dGVuZHMgRW1iZXIuT2JqZWN0CiovCkVt
        YmVyLk9iamVjdFByb3h5ID0gRW1iZXIuT2JqZWN0LmV4dGVuZCgvKiogQHNj
        b3BlIEVtYmVyLk9iamVjdFByb3h5LnByb3RvdHlwZSAqLyB7CiAgLyoqCiAg
        ICBUaGUgb2JqZWN0IHdob3NlIHByb3BlcnRpZXMgd2lsbCBiZSBmb3J3YXJk
        ZWQuCgogICAgQHByb3BlcnR5IGNvbnRlbnQKICAgIEB0eXBlIEVtYmVyLk9i
        amVjdAogICAgQGRlZmF1bHQgbnVsbAogICovCiAgY29udGVudDogbnVsbCwK
        ICBfY29udGVudERpZENoYW5nZTogRW1iZXIub2JzZXJ2ZXIoJ2NvbnRlbnQn
        LCBmdW5jdGlvbigpIHsKICAgIEVtYmVyLmFzc2VydCgiQ2FuJ3Qgc2V0IE9i
        amVjdFByb3h5J3MgY29udGVudCB0byBpdHNlbGYiLCB0aGlzLmdldCgnY29u
        dGVudCcpICE9PSB0aGlzKTsKICB9KSwKCiAgaXNUcnV0aHk6IEVtYmVyLmNv
        bXB1dGVkLmJvb2woJ2NvbnRlbnQnKSwKCiAgX2RlYnVnQ29udGFpbmVyS2V5
        OiBudWxsLAoKICB3aWxsV2F0Y2hQcm9wZXJ0eTogZnVuY3Rpb24gKGtleSkg
        ewogICAgdmFyIGNvbnRlbnRLZXkgPSAnY29udGVudC4nICsga2V5OwogICAg
        YWRkQmVmb3JlT2JzZXJ2ZXIodGhpcywgY29udGVudEtleSwgbnVsbCwgY29u
        dGVudFByb3BlcnR5V2lsbENoYW5nZSk7CiAgICBhZGRPYnNlcnZlcih0aGlz
        LCBjb250ZW50S2V5LCBudWxsLCBjb250ZW50UHJvcGVydHlEaWRDaGFuZ2Up
        OwogIH0sCgogIGRpZFVud2F0Y2hQcm9wZXJ0eTogZnVuY3Rpb24gKGtleSkg
        ewogICAgdmFyIGNvbnRlbnRLZXkgPSAnY29udGVudC4nICsga2V5OwogICAg
        cmVtb3ZlQmVmb3JlT2JzZXJ2ZXIodGhpcywgY29udGVudEtleSwgbnVsbCwg
        Y29udGVudFByb3BlcnR5V2lsbENoYW5nZSk7CiAgICByZW1vdmVPYnNlcnZl
        cih0aGlzLCBjb250ZW50S2V5LCBudWxsLCBjb250ZW50UHJvcGVydHlEaWRD
        aGFuZ2UpOwogIH0sCgogIHVua25vd25Qcm9wZXJ0eTogZnVuY3Rpb24gKGtl
        eSkgewogICAgdmFyIGNvbnRlbnQgPSBnZXQodGhpcywgJ2NvbnRlbnQnKTsK
        ICAgIGlmIChjb250ZW50KSB7CiAgICAgIHJldHVybiBnZXQoY29udGVudCwg
        a2V5KTsKICAgIH0KICB9LAoKICBzZXRVbmtub3duUHJvcGVydHk6IGZ1bmN0
        aW9uIChrZXksIHZhbHVlKSB7CiAgICB2YXIgbSA9IG1ldGEodGhpcyk7CiAg
        ICBpZiAobS5wcm90byA9PT0gdGhpcykgewogICAgICAvLyBpZiBtYXJrZWQg
        YXMgcHJvdG90eXBlIHRoZW4ganVzdCBkZWZpbmVQcm9wZXJ0eQogICAgICAv
        LyByYXRoZXIgdGhhbiBkZWxlZ2F0ZQogICAgICBkZWZpbmVQcm9wZXJ0eSh0
        aGlzLCBrZXksIG51bGwsIHZhbHVlKTsKICAgICAgcmV0dXJuIHZhbHVlOwog
        ICAgfQoKICAgIHZhciBjb250ZW50ID0gZ2V0KHRoaXMsICdjb250ZW50Jyk7
        CiAgICBFbWJlci5hc3NlcnQoZm10KCJDYW5ub3QgZGVsZWdhdGUgc2V0KCcl
        QCcsICVAKSB0byB0aGUgJ2NvbnRlbnQnIHByb3BlcnR5IG9mIG9iamVjdCBw
        cm94eSAlQDogaXRzICdjb250ZW50JyBpcyB1bmRlZmluZWQuIiwgW2tleSwg
        dmFsdWUsIHRoaXNdKSwgY29udGVudCk7CiAgICByZXR1cm4gc2V0KGNvbnRl
        bnQsIGtleSwgdmFsdWUpOwogIH0KCn0pOwoKfSkoKTsKCgoKKGZ1bmN0aW9u
        KCkgewovKioKQG1vZHVsZSBlbWJlcgpAc3VibW9kdWxlIGVtYmVyLXJ1bnRp
        bWUKKi8KCgp2YXIgc2V0ID0gRW1iZXIuc2V0LCBnZXQgPSBFbWJlci5nZXQs
        IGd1aWRGb3IgPSBFbWJlci5ndWlkRm9yOwp2YXIgZm9yRWFjaCA9IEVtYmVy
        LkVudW1lcmFibGVVdGlscy5mb3JFYWNoLAogICAgaW5kZXhPZiA9IEVtYmVy
        LkFycmF5UG9seWZpbGxzLmluZGV4T2Y7Cgp2YXIgRWFjaEFycmF5ID0gRW1i
        ZXIuT2JqZWN0LmV4dGVuZChFbWJlci5BcnJheSwgewoKICBpbml0OiBmdW5j
        dGlvbihjb250ZW50LCBrZXlOYW1lLCBvd25lcikgewogICAgdGhpcy5fc3Vw
        ZXIoKTsKICAgIHRoaXMuX2tleU5hbWUgPSBrZXlOYW1lOwogICAgdGhpcy5f
        b3duZXIgICA9IG93bmVyOwogICAgdGhpcy5fY29udGVudCA9IGNvbnRlbnQ7
        CiAgfSwKCiAgb2JqZWN0QXQ6IGZ1bmN0aW9uKGlkeCkgewogICAgdmFyIGl0
        ZW0gPSB0aGlzLl9jb250ZW50Lm9iamVjdEF0KGlkeCk7CiAgICByZXR1cm4g
        aXRlbSAmJiBnZXQoaXRlbSwgdGhpcy5fa2V5TmFtZSk7CiAgfSwKCiAgbGVu
        Z3RoOiBFbWJlci5jb21wdXRlZChmdW5jdGlvbigpIHsKICAgIHZhciBjb250
        ZW50ID0gdGhpcy5fY29udGVudDsKICAgIHJldHVybiBjb250ZW50ID8gZ2V0
        KGNvbnRlbnQsICdsZW5ndGgnKSA6IDA7CiAgfSkKCn0pOwoKdmFyIElTX09C
        U0VSVkVSID0gL14uKzooYmVmb3JlfGNoYW5nZSkkLzsKCmZ1bmN0aW9uIGFk
        ZE9ic2VydmVyRm9yQ29udGVudEtleShjb250ZW50LCBrZXlOYW1lLCBwcm94
        eSwgaWR4LCBsb2MpIHsKICB2YXIgb2JqZWN0cyA9IHByb3h5Ll9vYmplY3Rz
        LCBndWlkOwogIGlmICghb2JqZWN0cykgb2JqZWN0cyA9IHByb3h5Ll9vYmpl
        Y3RzID0ge307CgogIHdoaWxlKC0tbG9jPj1pZHgpIHsKICAgIHZhciBpdGVt
        ID0gY29udGVudC5vYmplY3RBdChsb2MpOwogICAgaWYgKGl0ZW0pIHsKICAg
        ICAgRW1iZXIuYXNzZXJ0KCdXaGVuIHVzaW5nIEBlYWNoIHRvIG9ic2VydmUg
        dGhlIGFycmF5ICcgKyBjb250ZW50ICsgJywgdGhlIGFycmF5IG11c3QgcmV0
        dXJuIGFuIG9iamVjdCcsIEVtYmVyLnR5cGVPZihpdGVtKSA9PT0gJ2luc3Rh
        bmNlJyB8fCBFbWJlci50eXBlT2YoaXRlbSkgPT09ICdvYmplY3QnKTsKICAg
        ICAgRW1iZXIuYWRkQmVmb3JlT2JzZXJ2ZXIoaXRlbSwga2V5TmFtZSwgcHJv
        eHksICdjb250ZW50S2V5V2lsbENoYW5nZScpOwogICAgICBFbWJlci5hZGRP
        YnNlcnZlcihpdGVtLCBrZXlOYW1lLCBwcm94eSwgJ2NvbnRlbnRLZXlEaWRD
        aGFuZ2UnKTsKCiAgICAgIC8vIGtlZXAgdHJhY2sgb2YgdGhlIGluZGV4IGVh
        Y2ggaXRlbSB3YXMgZm91bmQgYXQgc28gd2UgY2FuIG1hcAogICAgICAvLyBp
        dCBiYWNrIHdoZW4gdGhlIG9iaiBjaGFuZ2VzLgogICAgICBndWlkID0gZ3Vp
        ZEZvcihpdGVtKTsKICAgICAgaWYgKCFvYmplY3RzW2d1aWRdKSBvYmplY3Rz
        W2d1aWRdID0gW107CiAgICAgIG9iamVjdHNbZ3VpZF0ucHVzaChsb2MpOwog
        ICAgfQogIH0KfQoKZnVuY3Rpb24gcmVtb3ZlT2JzZXJ2ZXJGb3JDb250ZW50
        S2V5KGNvbnRlbnQsIGtleU5hbWUsIHByb3h5LCBpZHgsIGxvYykgewogIHZh
        ciBvYmplY3RzID0gcHJveHkuX29iamVjdHM7CiAgaWYgKCFvYmplY3RzKSBv
        YmplY3RzID0gcHJveHkuX29iamVjdHMgPSB7fTsKICB2YXIgaW5kaWNpZXMs
        IGd1aWQ7CgogIHdoaWxlKC0tbG9jPj1pZHgpIHsKICAgIHZhciBpdGVtID0g
        Y29udGVudC5vYmplY3RBdChsb2MpOwogICAgaWYgKGl0ZW0pIHsKICAgICAg
        RW1iZXIucmVtb3ZlQmVmb3JlT2JzZXJ2ZXIoaXRlbSwga2V5TmFtZSwgcHJv
        eHksICdjb250ZW50S2V5V2lsbENoYW5nZScpOwogICAgICBFbWJlci5yZW1v
        dmVPYnNlcnZlcihpdGVtLCBrZXlOYW1lLCBwcm94eSwgJ2NvbnRlbnRLZXlE
        aWRDaGFuZ2UnKTsKCiAgICAgIGd1aWQgPSBndWlkRm9yKGl0ZW0pOwogICAg
        ICBpbmRpY2llcyA9IG9iamVjdHNbZ3VpZF07CiAgICAgIGluZGljaWVzW2lu
        ZGV4T2YuY2FsbChpbmRpY2llcywgbG9jKV0gPSBudWxsOwogICAgfQogIH0K
        fQoKLyoqCiAgVGhpcyBpcyB0aGUgb2JqZWN0IGluc3RhbmNlIHJldHVybmVk
        IHdoZW4geW91IGdldCB0aGUgYEBlYWNoYCBwcm9wZXJ0eSBvbiBhbgogIGFy
        cmF5LiBJdCB1c2VzIHRoZSB1bmtub3duUHJvcGVydHkgaGFuZGxlciB0byBh
        dXRvbWF0aWNhbGx5IGNyZWF0ZQogIEVhY2hBcnJheSBpbnN0YW5jZXMgZm9y
        IHByb3BlcnR5IG5hbWVzLgoKICBAcHJpdmF0ZQogIEBjbGFzcyBFYWNoUHJv
        eHkKICBAbmFtZXNwYWNlIEVtYmVyCiAgQGV4dGVuZHMgRW1iZXIuT2JqZWN0
        CiovCkVtYmVyLkVhY2hQcm94eSA9IEVtYmVyLk9iamVjdC5leHRlbmQoewoK
        ICBpbml0OiBmdW5jdGlvbihjb250ZW50KSB7CiAgICB0aGlzLl9zdXBlcigp
        OwogICAgdGhpcy5fY29udGVudCA9IGNvbnRlbnQ7CiAgICBjb250ZW50LmFk
        ZEFycmF5T2JzZXJ2ZXIodGhpcyk7CgogICAgLy8gaW4gY2FzZSBzb21lb25l
        IGlzIGFscmVhZHkgb2JzZXJ2aW5nIHNvbWUga2V5cyBtYWtlIHN1cmUgdGhl
        eSBhcmUKICAgIC8vIGFkZGVkCiAgICBmb3JFYWNoKEVtYmVyLndhdGNoZWRF
        dmVudHModGhpcyksIGZ1bmN0aW9uKGV2ZW50TmFtZSkgewogICAgICB0aGlz
        LmRpZEFkZExpc3RlbmVyKGV2ZW50TmFtZSk7CiAgICB9LCB0aGlzKTsKICB9
        LAoKICAvKioKICAgIFlvdSBjYW4gZGlyZWN0bHkgYWNjZXNzIG1hcHBlZCBw
        cm9wZXJ0aWVzIGJ5IHNpbXBseSByZXF1ZXN0aW5nIHRoZW0uCiAgICBUaGUg
        YHVua25vd25Qcm9wZXJ0eWAgaGFuZGxlciB3aWxsIGdlbmVyYXRlIGFuIEVh
        Y2hBcnJheSBvZiBlYWNoIGl0ZW0uCgogICAgQG1ldGhvZCB1bmtub3duUHJv
        cGVydHkKICAgIEBwYXJhbSBrZXlOYW1lIHtTdHJpbmd9CiAgICBAcGFyYW0g
        dmFsdWUgeyp9CiAgKi8KICB1bmtub3duUHJvcGVydHk6IGZ1bmN0aW9uKGtl
        eU5hbWUsIHZhbHVlKSB7CiAgICB2YXIgcmV0OwogICAgcmV0ID0gbmV3IEVh
        Y2hBcnJheSh0aGlzLl9jb250ZW50LCBrZXlOYW1lLCB0aGlzKTsKICAgIEVt
        YmVyLmRlZmluZVByb3BlcnR5KHRoaXMsIGtleU5hbWUsIG51bGwsIHJldCk7
        CiAgICB0aGlzLmJlZ2luT2JzZXJ2aW5nQ29udGVudEtleShrZXlOYW1lKTsK
        ICAgIHJldHVybiByZXQ7CiAgfSwKCiAgLy8gLi4uLi4uLi4uLi4uLi4uLi4u
        Li4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLgogIC8v
        IEFSUkFZIENIQU5HRVMKICAvLyBJbnZva2VzIHdoZW5ldmVyIHRoZSBjb250
        ZW50IGFycmF5IGl0c2VsZiBjaGFuZ2VzLgoKICBhcnJheVdpbGxDaGFuZ2U6
        IGZ1bmN0aW9uKGNvbnRlbnQsIGlkeCwgcmVtb3ZlZENudCwgYWRkZWRDbnQp
        IHsKICAgIHZhciBrZXlzID0gdGhpcy5fa2V5cywga2V5LCBsaW07CgogICAg
        bGltID0gcmVtb3ZlZENudD4wID8gaWR4K3JlbW92ZWRDbnQgOiAtMTsKICAg
        IEVtYmVyLmJlZ2luUHJvcGVydHlDaGFuZ2VzKHRoaXMpOwoKICAgIGZvcihr
        ZXkgaW4ga2V5cykgewogICAgICBpZiAoIWtleXMuaGFzT3duUHJvcGVydHko
        a2V5KSkgeyBjb250aW51ZTsgfQoKICAgICAgaWYgKGxpbT4wKSB7IHJlbW92
        ZU9ic2VydmVyRm9yQ29udGVudEtleShjb250ZW50LCBrZXksIHRoaXMsIGlk
        eCwgbGltKTsgfQoKICAgICAgRW1iZXIucHJvcGVydHlXaWxsQ2hhbmdlKHRo
        aXMsIGtleSk7CiAgICB9CgogICAgRW1iZXIucHJvcGVydHlXaWxsQ2hhbmdl
        KHRoaXMuX2NvbnRlbnQsICdAZWFjaCcpOwogICAgRW1iZXIuZW5kUHJvcGVy
        dHlDaGFuZ2VzKHRoaXMpOwogIH0sCgogIGFycmF5RGlkQ2hhbmdlOiBmdW5j
        dGlvbihjb250ZW50LCBpZHgsIHJlbW92ZWRDbnQsIGFkZGVkQ250KSB7CiAg
        ICB2YXIga2V5cyA9IHRoaXMuX2tleXMsIGxpbTsKCiAgICBsaW0gPSBhZGRl
        ZENudD4wID8gaWR4K2FkZGVkQ250IDogLTE7CiAgICBFbWJlci5jaGFuZ2VQ
        cm9wZXJ0aWVzKGZ1bmN0aW9uKCkgewogICAgICBmb3IodmFyIGtleSBpbiBr
        ZXlzKSB7CiAgICAgICAgaWYgKCFrZXlzLmhhc093blByb3BlcnR5KGtleSkp
        IHsgY29udGludWU7IH0KCiAgICAgICAgaWYgKGxpbT4wKSB7IGFkZE9ic2Vy
        dmVyRm9yQ29udGVudEtleShjb250ZW50LCBrZXksIHRoaXMsIGlkeCwgbGlt
        KTsgfQoKICAgICAgICBFbWJlci5wcm9wZXJ0eURpZENoYW5nZSh0aGlzLCBr
        ZXkpOwogICAgICB9CgogICAgICBFbWJlci5wcm9wZXJ0eURpZENoYW5nZSh0
        aGlzLl9jb250ZW50LCAnQGVhY2gnKTsKICAgIH0sIHRoaXMpOwogIH0sCgog
        IC8vIC4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4u
        Li4uLi4uLi4uLi4uLi4uLi4KICAvLyBMSVNURU4gRk9SIE5FVyBPQlNFUlZF
        UlMgQU5EIE9USEVSIEVWRU5UIExJU1RFTkVSUwogIC8vIFN0YXJ0IG1vbml0
        b3Jpbmcga2V5cyBiYXNlZCBvbiB3aG8gaXMgbGlzdGVuaW5nLi4uCgogIGRp
        ZEFkZExpc3RlbmVyOiBmdW5jdGlvbihldmVudE5hbWUpIHsKICAgIGlmIChJ
        U19PQlNFUlZFUi50ZXN0KGV2ZW50TmFtZSkpIHsKICAgICAgdGhpcy5iZWdp
        bk9ic2VydmluZ0NvbnRlbnRLZXkoZXZlbnROYW1lLnNsaWNlKDAsIC03KSk7
        CiAgICB9CiAgfSwKCiAgZGlkUmVtb3ZlTGlzdGVuZXI6IGZ1bmN0aW9uKGV2
        ZW50TmFtZSkgewogICAgaWYgKElTX09CU0VSVkVSLnRlc3QoZXZlbnROYW1l
        KSkgewogICAgICB0aGlzLnN0b3BPYnNlcnZpbmdDb250ZW50S2V5KGV2ZW50
        TmFtZS5zbGljZSgwLCAtNykpOwogICAgfQogIH0sCgogIC8vIC4uLi4uLi4u
        Li4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4u
        Li4uLi4KICAvLyBDT05URU5UIEtFWSBPQlNFUlZJTkcKICAvLyBBY3R1YWwg
        d2F0Y2gga2V5cyBvbiB0aGUgc291cmNlIGNvbnRlbnQuCgogIGJlZ2luT2Jz
        ZXJ2aW5nQ29udGVudEtleTogZnVuY3Rpb24oa2V5TmFtZSkgewogICAgdmFy
        IGtleXMgPSB0aGlzLl9rZXlzOwogICAgaWYgKCFrZXlzKSBrZXlzID0gdGhp
        cy5fa2V5cyA9IHt9OwogICAgaWYgKCFrZXlzW2tleU5hbWVdKSB7CiAgICAg
        IGtleXNba2V5TmFtZV0gPSAxOwogICAgICB2YXIgY29udGVudCA9IHRoaXMu
        X2NvbnRlbnQsCiAgICAgICAgICBsZW4gPSBnZXQoY29udGVudCwgJ2xlbmd0
        aCcpOwogICAgICBhZGRPYnNlcnZlckZvckNvbnRlbnRLZXkoY29udGVudCwg
        a2V5TmFtZSwgdGhpcywgMCwgbGVuKTsKICAgIH0gZWxzZSB7CiAgICAgIGtl
        eXNba2V5TmFtZV0rKzsKICAgIH0KICB9LAoKICBzdG9wT2JzZXJ2aW5nQ29u
        dGVudEtleTogZnVuY3Rpb24oa2V5TmFtZSkgewogICAgdmFyIGtleXMgPSB0
        aGlzLl9rZXlzOwogICAgaWYgKGtleXMgJiYgKGtleXNba2V5TmFtZV0+MCkg
        JiYgKC0ta2V5c1trZXlOYW1lXTw9MCkpIHsKICAgICAgdmFyIGNvbnRlbnQg
        PSB0aGlzLl9jb250ZW50LAogICAgICAgICAgbGVuICAgICA9IGdldChjb250
        ZW50LCAnbGVuZ3RoJyk7CiAgICAgIHJlbW92ZU9ic2VydmVyRm9yQ29udGVu
        dEtleShjb250ZW50LCBrZXlOYW1lLCB0aGlzLCAwLCBsZW4pOwogICAgfQog
        IH0sCgogIGNvbnRlbnRLZXlXaWxsQ2hhbmdlOiBmdW5jdGlvbihvYmosIGtl
        eU5hbWUpIHsKICAgIEVtYmVyLnByb3BlcnR5V2lsbENoYW5nZSh0aGlzLCBr
        ZXlOYW1lKTsKICB9LAoKICBjb250ZW50S2V5RGlkQ2hhbmdlOiBmdW5jdGlv
        bihvYmosIGtleU5hbWUpIHsKICAgIEVtYmVyLnByb3BlcnR5RGlkQ2hhbmdl
        KHRoaXMsIGtleU5hbWUpOwogIH0KCn0pOwoKCgp9KSgpOwoKCgooZnVuY3Rp
        b24oKSB7Ci8qKgpAbW9kdWxlIGVtYmVyCkBzdWJtb2R1bGUgZW1iZXItcnVu
        dGltZQoqLwoKCnZhciBnZXQgPSBFbWJlci5nZXQsIHNldCA9IEVtYmVyLnNl
        dCwgcmVwbGFjZSA9IEVtYmVyLkVudW1lcmFibGVVdGlscy5fcmVwbGFjZTsK
        Ci8vIEFkZCBFbWJlci5BcnJheSB0byBBcnJheS5wcm90b3R5cGUuIFJlbW92
        ZSBtZXRob2RzIHdpdGggbmF0aXZlCi8vIGltcGxlbWVudGF0aW9ucyBhbmQg
        c3VwcGx5IHNvbWUgbW9yZSBvcHRpbWl6ZWQgdmVyc2lvbnMgb2YgZ2VuZXJp
        YyBtZXRob2RzCi8vIGJlY2F1c2UgdGhleSBhcmUgc28gY29tbW9uLgp2YXIg
        TmF0aXZlQXJyYXkgPSBFbWJlci5NaXhpbi5jcmVhdGUoRW1iZXIuTXV0YWJs
        ZUFycmF5LCBFbWJlci5PYnNlcnZhYmxlLCBFbWJlci5Db3B5YWJsZSwgewoK
        ICAvLyBiZWNhdXNlIGxlbmd0aCBpcyBhIGJ1aWx0LWluIHByb3BlcnR5IHdl
        IG5lZWQgdG8ga25vdyB0byBqdXN0IGdldCB0aGUKICAvLyBvcmlnaW5hbCBw
        cm9wZXJ0eS4KICBnZXQ6IGZ1bmN0aW9uKGtleSkgewogICAgaWYgKGtleT09
        PSdsZW5ndGgnKSByZXR1cm4gdGhpcy5sZW5ndGg7CiAgICBlbHNlIGlmICgn
        bnVtYmVyJyA9PT0gdHlwZW9mIGtleSkgcmV0dXJuIHRoaXNba2V5XTsKICAg
        IGVsc2UgcmV0dXJuIHRoaXMuX3N1cGVyKGtleSk7CiAgfSwKCiAgb2JqZWN0
        QXQ6IGZ1bmN0aW9uKGlkeCkgewogICAgcmV0dXJuIHRoaXNbaWR4XTsKICB9
        LAoKICAvLyBwcmltaXRpdmUgZm9yIGFycmF5IHN1cHBvcnQuCiAgcmVwbGFj
        ZTogZnVuY3Rpb24oaWR4LCBhbXQsIG9iamVjdHMpIHsKCiAgICBpZiAodGhp
        cy5pc0Zyb3plbikgdGhyb3cgRW1iZXIuRlJPWkVOX0VSUk9SOwoKICAgIC8v
        IGlmIHdlIHJlcGxhY2VkIGV4YWN0bHkgdGhlIHNhbWUgbnVtYmVyIG9mIGl0
        ZW1zLCB0aGVuIHBhc3Mgb25seSB0aGUKICAgIC8vIHJlcGxhY2VkIHJhbmdl
        LiBPdGhlcndpc2UsIHBhc3MgdGhlIGZ1bGwgcmVtYWluaW5nIGFycmF5IGxl
        bmd0aAogICAgLy8gc2luY2UgZXZlcnl0aGluZyBoYXMgc2hpZnRlZAogICAg
        dmFyIGxlbiA9IG9iamVjdHMgPyBnZXQob2JqZWN0cywgJ2xlbmd0aCcpIDog
        MDsKICAgIHRoaXMuYXJyYXlDb250ZW50V2lsbENoYW5nZShpZHgsIGFtdCwg
        bGVuKTsKCiAgICBpZiAobGVuID09PSAwKSB7CiAgICAgIHRoaXMuc3BsaWNl
        KGlkeCwgYW10KTsKICAgIH0gZWxzZSB7CiAgICAgIHJlcGxhY2UodGhpcywg
        aWR4LCBhbXQsIG9iamVjdHMpOwogICAgfQoKICAgIHRoaXMuYXJyYXlDb250
        ZW50RGlkQ2hhbmdlKGlkeCwgYW10LCBsZW4pOwogICAgcmV0dXJuIHRoaXM7
        CiAgfSwKCiAgLy8gSWYgeW91IGFzayBmb3IgYW4gdW5rbm93biBwcm9wZXJ0
        eSwgdGhlbiB0cnkgdG8gY29sbGVjdCB0aGUgdmFsdWUKICAvLyBmcm9tIG1l
        bWJlciBpdGVtcy4KICB1bmtub3duUHJvcGVydHk6IGZ1bmN0aW9uKGtleSwg
        dmFsdWUpIHsKICAgIHZhciByZXQ7Ly8gPSB0aGlzLnJlZHVjZWRQcm9wZXJ0
        eShrZXksIHZhbHVlKSA7CiAgICBpZiAoKHZhbHVlICE9PSB1bmRlZmluZWQp
        ICYmIHJldCA9PT0gdW5kZWZpbmVkKSB7CiAgICAgIHJldCA9IHRoaXNba2V5
        XSA9IHZhbHVlOwogICAgfQogICAgcmV0dXJuIHJldCA7CiAgfSwKCiAgLy8g
        SWYgYnJvd3NlciBkaWQgbm90IGltcGxlbWVudCBpbmRleE9mIG5hdGl2ZWx5
        LCB0aGVuIG92ZXJyaWRlIHdpdGgKICAvLyBzcGVjaWFsaXplZCB2ZXJzaW9u
        CiAgaW5kZXhPZjogZnVuY3Rpb24ob2JqZWN0LCBzdGFydEF0KSB7CiAgICB2
        YXIgaWR4LCBsZW4gPSB0aGlzLmxlbmd0aDsKCiAgICBpZiAoc3RhcnRBdCA9
        PT0gdW5kZWZpbmVkKSBzdGFydEF0ID0gMDsKICAgIGVsc2Ugc3RhcnRBdCA9
        IChzdGFydEF0IDwgMCkgPyBNYXRoLmNlaWwoc3RhcnRBdCkgOiBNYXRoLmZs
        b29yKHN0YXJ0QXQpOwogICAgaWYgKHN0YXJ0QXQgPCAwKSBzdGFydEF0ICs9
        IGxlbjsKCiAgICBmb3IoaWR4PXN0YXJ0QXQ7aWR4PGxlbjtpZHgrKykgewog
        ICAgICBpZiAodGhpc1tpZHhdID09PSBvYmplY3QpIHJldHVybiBpZHggOwog
        ICAgfQogICAgcmV0dXJuIC0xOwogIH0sCgogIGxhc3RJbmRleE9mOiBmdW5j
        dGlvbihvYmplY3QsIHN0YXJ0QXQpIHsKICAgIHZhciBpZHgsIGxlbiA9IHRo
        aXMubGVuZ3RoOwoKICAgIGlmIChzdGFydEF0ID09PSB1bmRlZmluZWQpIHN0
        YXJ0QXQgPSBsZW4tMTsKICAgIGVsc2Ugc3RhcnRBdCA9IChzdGFydEF0IDwg
        MCkgPyBNYXRoLmNlaWwoc3RhcnRBdCkgOiBNYXRoLmZsb29yKHN0YXJ0QXQp
        OwogICAgaWYgKHN0YXJ0QXQgPCAwKSBzdGFydEF0ICs9IGxlbjsKCiAgICBm
        b3IoaWR4PXN0YXJ0QXQ7aWR4Pj0wO2lkeC0tKSB7CiAgICAgIGlmICh0aGlz
        W2lkeF0gPT09IG9iamVjdCkgcmV0dXJuIGlkeCA7CiAgICB9CiAgICByZXR1
        cm4gLTE7CiAgfSwKCiAgY29weTogZnVuY3Rpb24oZGVlcCkgewogICAgaWYg
        KGRlZXApIHsKICAgICAgcmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uKGl0ZW0p
        IHsgcmV0dXJuIEVtYmVyLmNvcHkoaXRlbSwgdHJ1ZSk7IH0pOwogICAgfQoK
        ICAgIHJldHVybiB0aGlzLnNsaWNlKCk7CiAgfQp9KTsKCi8vIFJlbW92ZSBh
        bnkgbWV0aG9kcyBpbXBsZW1lbnRlZCBuYXRpdmVseSBzbyB3ZSBkb24ndCBv
        dmVycmlkZSB0aGVtCnZhciBpZ25vcmUgPSBbJ2xlbmd0aCddOwpFbWJlci5F
        bnVtZXJhYmxlVXRpbHMuZm9yRWFjaChOYXRpdmVBcnJheS5rZXlzKCksIGZ1
        bmN0aW9uKG1ldGhvZE5hbWUpIHsKICBpZiAoQXJyYXkucHJvdG90eXBlW21l
        dGhvZE5hbWVdKSBpZ25vcmUucHVzaChtZXRob2ROYW1lKTsKfSk7CgppZiAo
        aWdub3JlLmxlbmd0aD4wKSB7CiAgTmF0aXZlQXJyYXkgPSBOYXRpdmVBcnJh
        eS53aXRob3V0LmFwcGx5KE5hdGl2ZUFycmF5LCBpZ25vcmUpOwp9CgovKioK
        ICBUaGUgTmF0aXZlQXJyYXkgbWl4aW4gY29udGFpbnMgdGhlIHByb3BlcnRp
        ZXMgbmVlZGVkIHRvIHRvIG1ha2UgdGhlIG5hdGl2ZQogIEFycmF5IHN1cHBv
        cnQgRW1iZXIuTXV0YWJsZUFycmF5IGFuZCBhbGwgb2YgaXRzIGRlcGVuZGVu
        dCBBUElzLiBVbmxlc3MgeW91CiAgaGF2ZSBgRW1iZXIuRVhURU5EX1BST1RP
        VFlQRVNgIG9yIGBFbWJlci5FWFRFTkRfUFJPVE9UWVBFUy5BcnJheWAgc2V0
        IHRvCiAgZmFsc2UsIHRoaXMgd2lsbCBiZSBhcHBsaWVkIGF1dG9tYXRpY2Fs
        bHkuIE90aGVyd2lzZSB5b3UgY2FuIGFwcGx5IHRoZSBtaXhpbgogIGF0IGFu
        eXRpbWUgYnkgY2FsbGluZyBgRW1iZXIuTmF0aXZlQXJyYXkuYWN0aXZhdGVg
        LgoKICBAY2xhc3MgTmF0aXZlQXJyYXkKICBAbmFtZXNwYWNlIEVtYmVyCiAg
        QHVzZXMgRW1iZXIuTXV0YWJsZUFycmF5CiAgQHVzZXMgRW1iZXIuT2JzZXJ2
        YWJsZQogIEB1c2VzIEVtYmVyLkNvcHlhYmxlCiovCkVtYmVyLk5hdGl2ZUFy
        cmF5ID0gTmF0aXZlQXJyYXk7CgovKioKICBDcmVhdGVzIGFuIGBFbWJlci5O
        YXRpdmVBcnJheWAgZnJvbSBhbiBBcnJheSBsaWtlIG9iamVjdC4KICBEb2Vz
        IG5vdCBtb2RpZnkgdGhlIG9yaWdpbmFsIG9iamVjdC4gRW1iZXIuQSBpcyBu
        b3QgbmVlZGVkIGlmCiAgYEVtYmVyLkVYVEVORF9QUk9UT1RZUEVTYCBpcyBg
        dHJ1ZWAgKHRoZSBkZWZhdWx0IHZhbHVlKS4gSG93ZXZlciwKICBpdCBpcyBy
        ZWNvbW1lbmRlZCB0aGF0IHlvdSB1c2UgRW1iZXIuQSB3aGVuIGNyZWF0aW5n
        IGFkZG9ucyBmb3IKICBlbWJlciBvciB3aGVuIHlvdSBjYW4gbm90IGdhcmVu
        dGVlIHRoYXQgYEVtYmVyLkVYVEVORF9QUk9UT1RZUEVTYAogIHdpbGwgYmUg
        YHRydWVgLgoKICBFeGFtcGxlCgogIGBgYGpzCiAgdmFyIFBhZ2luYXRpb24g
        PSBFbWJlci5Db2xsZWN0aW9uVmlldy5leHRlbmQoewogICAgdGFnTmFtZTog
        J3VsJywKICAgIGNsYXNzTmFtZXM6IFsncGFnaW5hdGlvbiddLAogICAgaW5p
        dDogZnVuY3Rpb24oKSB7CiAgICAgIHRoaXMuX3N1cGVyKCk7CiAgICAgIGlm
        ICghdGhpcy5nZXQoJ2NvbnRlbnQnKSkgewogICAgICAgIHRoaXMuc2V0KCdj
        b250ZW50JywgRW1iZXIuQShbXSkpOwogICAgICB9CiAgICB9CiAgfSk7CiAg
        YGBgCgogIEBtZXRob2QgQQogIEBmb3IgRW1iZXIKICBAcmV0dXJuIHtFbWJl
        ci5OYXRpdmVBcnJheX0KKi8KRW1iZXIuQSA9IGZ1bmN0aW9uKGFycikgewog
        IGlmIChhcnIgPT09IHVuZGVmaW5lZCkgeyBhcnIgPSBbXTsgfQogIHJldHVy
        biBFbWJlci5BcnJheS5kZXRlY3QoYXJyKSA/IGFyciA6IEVtYmVyLk5hdGl2
        ZUFycmF5LmFwcGx5KGFycik7Cn07CgovKioKICBBY3RpdmF0ZXMgdGhlIG1p
        eGluIG9uIHRoZSBBcnJheS5wcm90b3R5cGUgaWYgbm90IGFscmVhZHkgYXBw
        bGllZC4gQ2FsbGluZwogIHRoaXMgbWV0aG9kIG1vcmUgdGhhbiBvbmNlIGlz
        IHNhZmUuIFRoaXMgd2lsbCBiZSBjYWxsZWQgd2hlbiBlbWJlciBpcyBsb2Fk
        ZWQKICB1bmxlc3MgeW91IGhhdmUgYEVtYmVyLkVYVEVORF9QUk9UT1RZUEVT
        YCBvciBgRW1iZXIuRVhURU5EX1BST1RPVFlQRVMuQXJyYXlgCiAgc2V0IHRv
        IGBmYWxzZWAuCgogIEV4YW1wbGUKCiAgYGBganMKICBpZiAoRW1iZXIuRVhU
        RU5EX1BST1RPVFlQRVMgPT09IHRydWUgfHwgRW1iZXIuRVhURU5EX1BST1RP
        VFlQRVMuQXJyYXkpIHsKICAgIEVtYmVyLk5hdGl2ZUFycmF5LmFjdGl2YXRl
        KCk7CiAgfQogIGBgYAoKICBAbWV0aG9kIGFjdGl2YXRlCiAgQGZvciBFbWJl
        ci5OYXRpdmVBcnJheQogIEBzdGF0aWMKICBAcmV0dXJuIHt2b2lkfQoqLwpF
        bWJlci5OYXRpdmVBcnJheS5hY3RpdmF0ZSA9IGZ1bmN0aW9uKCkgewogIE5h
        dGl2ZUFycmF5LmFwcGx5KEFycmF5LnByb3RvdHlwZSk7CgogIEVtYmVyLkEg
        PSBmdW5jdGlvbihhcnIpIHsgcmV0dXJuIGFyciB8fCBbXTsgfTsKfTsKCmlm
        IChFbWJlci5FWFRFTkRfUFJPVE9UWVBFUyA9PT0gdHJ1ZSB8fCBFbWJlci5F
        WFRFTkRfUFJPVE9UWVBFUy5BcnJheSkgewogIEVtYmVyLk5hdGl2ZUFycmF5
        LmFjdGl2YXRlKCk7Cn0KCgp9KSgpOwoKCgooZnVuY3Rpb24oKSB7Ci8qKgpA
        bW9kdWxlIGVtYmVyCkBzdWJtb2R1bGUgZW1iZXItcnVudGltZQoqLwoKdmFy
        IGdldCA9IEVtYmVyLmdldCwgc2V0ID0gRW1iZXIuc2V0LCBndWlkRm9yID0g
        RW1iZXIuZ3VpZEZvciwgaXNOb25lID0gRW1iZXIuaXNOb25lLCBmbXQgPSBF
        bWJlci5TdHJpbmcuZm10OwoKLyoqCiAgQW4gdW5vcmRlcmVkIGNvbGxlY3Rp
        b24gb2Ygb2JqZWN0cy4KCiAgQSBTZXQgd29ya3MgYSBiaXQgbGlrZSBhbiBh
        cnJheSBleGNlcHQgdGhhdCBpdHMgaXRlbXMgYXJlIG5vdCBvcmRlcmVkLiBZ
        b3UKICBjYW4gY3JlYXRlIGEgc2V0IHRvIGVmZmljaWVudGx5IHRlc3QgZm9y
        IG1lbWJlcnNoaXAgZm9yIGFuIG9iamVjdC4gWW91IGNhbgogIGFsc28gaXRl
        cmF0ZSB0aHJvdWdoIGEgc2V0IGp1c3QgbGlrZSBhbiBhcnJheSwgZXZlbiBh
        Y2Nlc3Npbmcgb2JqZWN0cyBieQogIGluZGV4LCBob3dldmVyIHRoZXJlIGlz
        IG5vIGd1YXJhbnRlZSBhcyB0byB0aGVpciBvcmRlci4KCiAgQWxsIFNldHMg
        YXJlIG9ic2VydmFibGUgdmlhIHRoZSBFbnVtZXJhYmxlIE9ic2VydmVyIEFQ
        SSAtIHdoaWNoIHdvcmtzCiAgb24gYW55IGVudW1lcmFibGUgb2JqZWN0IGlu
        Y2x1ZGluZyBib3RoIFNldHMgYW5kIEFycmF5cy4KCiAgIyMgQ3JlYXRpbmcg
        YSBTZXQKCiAgWW91IGNhbiBjcmVhdGUgYSBzZXQgbGlrZSB5b3Ugd291bGQg
        bW9zdCBvYmplY3RzIHVzaW5nCiAgYG5ldyBFbWJlci5TZXQoKWAuIE1vc3Qg
        bmV3IHNldHMgeW91IGNyZWF0ZSB3aWxsIGJlIGVtcHR5LCBidXQgeW91IGNh
        bgogIGFsc28gaW5pdGlhbGl6ZSB0aGUgc2V0IHdpdGggc29tZSBjb250ZW50
        IGJ5IHBhc3NpbmcgYW4gYXJyYXkgb3Igb3RoZXIKICBlbnVtZXJhYmxlIG9m
        IG9iamVjdHMgdG8gdGhlIGNvbnN0cnVjdG9yLgoKICBGaW5hbGx5LCB5b3Ug
        Y2FuIHBhc3MgaW4gYW4gZXhpc3Rpbmcgc2V0IGFuZCB0aGUgc2V0IHdpbGwg
        YmUgY29waWVkLiBZb3UKICBjYW4gYWxzbyBjcmVhdGUgYSBjb3B5IG9mIGEg
        c2V0IGJ5IGNhbGxpbmcgYEVtYmVyLlNldCNjb3B5KClgLgoKICBgYGBqYXZh
        c2NyaXB0CiAgLy8gY3JlYXRlcyBhIG5ldyBlbXB0eSBzZXQKICB2YXIgZm91
        bmROYW1lcyA9IG5ldyBFbWJlci5TZXQoKTsKCiAgLy8gY3JlYXRlcyBhIHNl
        dCB3aXRoIGZvdXIgbmFtZXMgaW4gaXQuCiAgdmFyIG5hbWVzID0gbmV3IEVt
        YmVyLlNldChbIkNoYXJsZXMiLCAiVG9tIiwgIkp1YW4iLCAiQWxleCJdKTsg
        Ly8gOlAKCiAgLy8gY3JlYXRlcyBhIGNvcHkgb2YgdGhlIG5hbWVzIHNldC4K
        ICB2YXIgbmFtZXNDb3B5ID0gbmV3IEVtYmVyLlNldChuYW1lcyk7CgogIC8v
        IHNhbWUgYXMgYWJvdmUuCiAgdmFyIGFub3RoZXJOYW1lc0NvcHkgPSBuYW1l
        cy5jb3B5KCk7CiAgYGBgCgogICMjIEFkZGluZy9SZW1vdmluZyBPYmplY3Rz
        CgogIFlvdSBnZW5lcmFsbHkgYWRkIG9yIHJlbW92ZSBvYmplY3RzIGZyb20g
        YSBzZXQgdXNpbmcgYGFkZCgpYCBvcgogIGByZW1vdmUoKWAuIFlvdSBjYW4g
        YWRkIGFueSB0eXBlIG9mIG9iamVjdCBpbmNsdWRpbmcgcHJpbWl0aXZlcyBz
        dWNoIGFzCiAgbnVtYmVycywgc3RyaW5ncywgYW5kIGJvb2xlYW5zLgoKICBV
        bmxpa2UgYXJyYXlzLCBvYmplY3RzIGNhbiBvbmx5IGV4aXN0IG9uZSB0aW1l
        IGluIGEgc2V0LiBJZiB5b3UgY2FsbCBgYWRkKClgCiAgb24gYSBzZXQgd2l0
        aCB0aGUgc2FtZSBvYmplY3QgbXVsdGlwbGUgdGltZXMsIHRoZSBvYmplY3Qg
        d2lsbCBvbmx5IGJlIGFkZGVkCiAgb25jZS4gTGlrZXdpc2UsIGNhbGxpbmcg
        YHJlbW92ZSgpYCB3aXRoIHRoZSBzYW1lIG9iamVjdCBtdWx0aXBsZSB0aW1l
        cyB3aWxsCiAgcmVtb3ZlIHRoZSBvYmplY3QgdGhlIGZpcnN0IHRpbWUgYW5k
        IGhhdmUgbm8gZWZmZWN0IG9uIGZ1dHVyZSBjYWxscyB1bnRpbAogIHlvdSBh
        ZGQgdGhlIG9iamVjdCB0byB0aGUgc2V0IGFnYWluLgoKICBOT1RFOiBZb3Ug
        Y2Fubm90IGFkZC9yZW1vdmUgYG51bGxgIG9yIGB1bmRlZmluZWRgIHRvIGEg
        c2V0LiBBbnkgYXR0ZW1wdCB0byBkbwogIHNvIHdpbGwgYmUgaWdub3JlZC4K
        CiAgSW4gYWRkaXRpb24gdG8gYWRkL3JlbW92ZSB5b3UgY2FuIGFsc28gY2Fs
        bCBgcHVzaCgpYC9gcG9wKClgLiBQdXNoIGJlaGF2ZXMKICBqdXN0IGxpa2Ug
        YGFkZCgpYCBidXQgYHBvcCgpYCwgdW5saWtlIGByZW1vdmUoKWAgd2lsbCBw
        aWNrIGFuIGFyYml0cmFyeQogIG9iamVjdCwgcmVtb3ZlIGl0IGFuZCByZXR1
        cm4gaXQuIFRoaXMgaXMgYSBnb29kIHdheSB0byB1c2UgYSBzZXQgYXMgYSBq
        b2IKICBxdWV1ZSB3aGVuIHlvdSBkb24ndCBjYXJlIHdoaWNoIG9yZGVyIHRo
        ZSBqb2JzIGFyZSBleGVjdXRlZCBpbi4KCiAgIyMgVGVzdGluZyBmb3IgYW4g
        T2JqZWN0CgogIFRvIHRlc3QgZm9yIGFuIG9iamVjdCdzIHByZXNlbmNlIGlu
        IGEgc2V0IHlvdSBzaW1wbHkgY2FsbAogIGBFbWJlci5TZXQjY29udGFpbnMo
        KWAuCgogICMjIE9ic2VydmluZyBjaGFuZ2VzCgogIFdoZW4gdXNpbmcgYEVt
        YmVyLlNldGAsIHlvdSBjYW4gb2JzZXJ2ZSB0aGUgYCJbXSJgIHByb3BlcnR5
        IHRvIGJlCiAgYWxlcnRlZCB3aGVuZXZlciB0aGUgY29udGVudCBjaGFuZ2Vz
        LiBZb3UgY2FuIGFsc28gYWRkIGFuIGVudW1lcmFibGUKICBvYnNlcnZlciB0
        byB0aGUgc2V0IHRvIGJlIG5vdGlmaWVkIG9mIHNwZWNpZmljIG9iamVjdHMg
        dGhhdCBhcmUgYWRkZWQgYW5kCiAgcmVtb3ZlZCBmcm9tIHRoZSBzZXQuIFNl
        ZSBbRW1iZXIuRW51bWVyYWJsZV0oL2FwaS9jbGFzc2VzL0VtYmVyLkVudW1l
        cmFibGUuaHRtbCkKICBmb3IgbW9yZSBpbmZvcm1hdGlvbiBvbiBlbnVtZXJh
        Ymxlcy4KCiAgVGhpcyBpcyBvZnRlbiB1bmhlbHBmdWwuIElmIHlvdSBhcmUg
        ZmlsdGVyaW5nIHNldHMgb2Ygb2JqZWN0cywgZm9yIGluc3RhbmNlLAogIGl0
        IGlzIHZlcnkgaW5lZmZpY2llbnQgdG8gcmUtZmlsdGVyIGFsbCBvZiB0aGUg
        aXRlbXMgZWFjaCB0aW1lIHRoZSBzZXQKICBjaGFuZ2VzLiBJdCB3b3VsZCBi
        ZSBiZXR0ZXIgaWYgeW91IGNvdWxkIGp1c3QgYWRqdXN0IHRoZSBmaWx0ZXJl
        ZCBzZXQgYmFzZWQKICBvbiB3aGF0IHdhcyBjaGFuZ2VkIG9uIHRoZSBvcmln
        aW5hbCBzZXQuIFRoZSBzYW1lIGlzc3VlIGFwcGxpZXMgdG8gbWVyZ2luZwog
        IHNldHMsIGFzIHdlbGwuCgogICMjIE90aGVyIE1ldGhvZHMKCiAgYEVtYmVy
        LlNldGAgcHJpbWFyeSBpbXBsZW1lbnRzIG90aGVyIG1peGluIEFQSXMuIEZv
        ciBhIGNvbXBsZXRlIHJlZmVyZW5jZQogIG9uIHRoZSBtZXRob2RzIHlvdSB3
        aWxsIHVzZSB3aXRoIGBFbWJlci5TZXRgLCBwbGVhc2UgY29uc3VsdCB0aGVz
        ZSBtaXhpbnMuCiAgVGhlIG1vc3QgdXNlZnVsIG9uZXMgd2lsbCBiZSBgRW1i
        ZXIuRW51bWVyYWJsZWAgYW5kCiAgYEVtYmVyLk11dGFibGVFbnVtZXJhYmxl
        YCB3aGljaCBpbXBsZW1lbnQgbW9zdCBvZiB0aGUgY29tbW9uIGl0ZXJhdG9y
        CiAgbWV0aG9kcyB5b3UgYXJlIHVzZWQgdG8gb24gQXJyYXkuCgogIE5vdGUg
        dGhhdCB5b3UgY2FuIGFsc28gdXNlIHRoZSBgRW1iZXIuQ29weWFibGVgIGFu
        ZCBgRW1iZXIuRnJlZXphYmxlYAogIEFQSXMgb24gYEVtYmVyLlNldGAgYXMg
        d2VsbC4gT25jZSBhIHNldCBpcyBmcm96ZW4gaXQgY2FuIG5vIGxvbmdlciBi
        ZQogIG1vZGlmaWVkLiBUaGUgYmVuZWZpdCBvZiB0aGlzIGlzIHRoYXQgd2hl
        biB5b3UgY2FsbCBgZnJvemVuQ29weSgpYCBvbiBpdCwKICBFbWJlciB3aWxs
        IGF2b2lkIG1ha2luZyBjb3BpZXMgb2YgdGhlIHNldC4gVGhpcyBhbGxvd3Mg
        eW91IHRvIHdyaXRlCiAgY29kZSB0aGF0IGNhbiBrbm93IHdpdGggY2VydGFp
        bnR5IHdoZW4gdGhlIHVuZGVybHlpbmcgc2V0IGRhdGEgd2lsbCBvcgogIHdp
        bGwgbm90IGJlIG1vZGlmaWVkLgoKICBAY2xhc3MgU2V0CiAgQG5hbWVzcGFj
        ZSBFbWJlcgogIEBleHRlbmRzIEVtYmVyLkNvcmVPYmplY3QKICBAdXNlcyBF
        bWJlci5NdXRhYmxlRW51bWVyYWJsZQogIEB1c2VzIEVtYmVyLkNvcHlhYmxl
        CiAgQHVzZXMgRW1iZXIuRnJlZXphYmxlCiAgQHNpbmNlIEVtYmVyIDAuOQoq
        LwpFbWJlci5TZXQgPSBFbWJlci5Db3JlT2JqZWN0LmV4dGVuZChFbWJlci5N
        dXRhYmxlRW51bWVyYWJsZSwgRW1iZXIuQ29weWFibGUsIEVtYmVyLkZyZWV6
        YWJsZSwKICAvKiogQHNjb3BlIEVtYmVyLlNldC5wcm90b3R5cGUgKi8gewoK
        ICAvLyAuLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4u
        Li4uLi4uLi4uLi4uLi4uLi4uCiAgLy8gSU1QTEVNRU5UIEVOVU1FUkFCTEUg
        QVBJUwogIC8vCgogIC8qKgogICAgVGhpcyBwcm9wZXJ0eSB3aWxsIGNoYW5n
        ZSBhcyB0aGUgbnVtYmVyIG9mIG9iamVjdHMgaW4gdGhlIHNldCBjaGFuZ2Vz
        LgoKICAgIEBwcm9wZXJ0eSBsZW5ndGgKICAgIEB0eXBlIG51bWJlcgogICAg
        QGRlZmF1bHQgMAogICovCiAgbGVuZ3RoOiAwLAoKICAvKioKICAgIENsZWFy
        cyB0aGUgc2V0LiBUaGlzIGlzIHVzZWZ1bCBpZiB5b3Ugd2FudCB0byByZXVz
        ZSBhbiBleGlzdGluZyBzZXQKICAgIHdpdGhvdXQgaGF2aW5nIHRvIHJlY3Jl
        YXRlIGl0LgoKICAgIGBgYGphdmFzY3JpcHQKICAgIHZhciBjb2xvcnMgPSBu
        ZXcgRW1iZXIuU2V0KFsicmVkIiwgImdyZWVuIiwgImJsdWUiXSk7CiAgICBj
        b2xvcnMubGVuZ3RoOyAgLy8gMwogICAgY29sb3JzLmNsZWFyKCk7CiAgICBj
        b2xvcnMubGVuZ3RoOyAgLy8gMAogICAgYGBgCgogICAgQG1ldGhvZCBjbGVh
        cgogICAgQHJldHVybiB7RW1iZXIuU2V0fSBBbiBlbXB0eSBTZXQKICAqLwog
        IGNsZWFyOiBmdW5jdGlvbigpIHsKICAgIGlmICh0aGlzLmlzRnJvemVuKSB7
        IHRocm93IG5ldyBFbWJlci5FcnJvcihFbWJlci5GUk9aRU5fRVJST1IpOyB9
        CgogICAgdmFyIGxlbiA9IGdldCh0aGlzLCAnbGVuZ3RoJyk7CiAgICBpZiAo
        bGVuID09PSAwKSB7IHJldHVybiB0aGlzOyB9CgogICAgdmFyIGd1aWQ7Cgog
        ICAgdGhpcy5lbnVtZXJhYmxlQ29udGVudFdpbGxDaGFuZ2UobGVuLCAwKTsK
        ICAgIEVtYmVyLnByb3BlcnR5V2lsbENoYW5nZSh0aGlzLCAnZmlyc3RPYmpl
        Y3QnKTsKICAgIEVtYmVyLnByb3BlcnR5V2lsbENoYW5nZSh0aGlzLCAnbGFz
        dE9iamVjdCcpOwoKICAgIGZvciAodmFyIGk9MDsgaSA8IGxlbjsgaSsrKSB7
        CiAgICAgIGd1aWQgPSBndWlkRm9yKHRoaXNbaV0pOwogICAgICBkZWxldGUg
        dGhpc1tndWlkXTsKICAgICAgZGVsZXRlIHRoaXNbaV07CiAgICB9CgogICAg
        c2V0KHRoaXMsICdsZW5ndGgnLCAwKTsKCiAgICBFbWJlci5wcm9wZXJ0eURp
        ZENoYW5nZSh0aGlzLCAnZmlyc3RPYmplY3QnKTsKICAgIEVtYmVyLnByb3Bl
        cnR5RGlkQ2hhbmdlKHRoaXMsICdsYXN0T2JqZWN0Jyk7CiAgICB0aGlzLmVu
        dW1lcmFibGVDb250ZW50RGlkQ2hhbmdlKGxlbiwgMCk7CgogICAgcmV0dXJu
        IHRoaXM7CiAgfSwKCiAgLyoqCiAgICBSZXR1cm5zIHRydWUgaWYgdGhlIHBh
        c3NlZCBvYmplY3QgaXMgYWxzbyBhbiBlbnVtZXJhYmxlIHRoYXQgY29udGFp
        bnMgdGhlCiAgICBzYW1lIG9iamVjdHMgYXMgdGhlIHJlY2VpdmVyLgoKICAg
        IGBgYGphdmFzY3JpcHQKICAgIHZhciBjb2xvcnMgPSBbInJlZCIsICJncmVl
        biIsICJibHVlIl0sCiAgICAgICAgc2FtZV9jb2xvcnMgPSBuZXcgRW1iZXIu
        U2V0KGNvbG9ycyk7CgogICAgc2FtZV9jb2xvcnMuaXNFcXVhbChjb2xvcnMp
        OyAgICAgICAgICAgICAgIC8vIHRydWUKICAgIHNhbWVfY29sb3JzLmlzRXF1
        YWwoWyJwdXJwbGUiLCAiYnJvd24iXSk7ICAvLyBmYWxzZQogICAgYGBgCgog
        ICAgQG1ldGhvZCBpc0VxdWFsCiAgICBAcGFyYW0ge0VtYmVyLlNldH0gb2Jq
        IHRoZSBvdGhlciBvYmplY3QuCiAgICBAcmV0dXJuIHtCb29sZWFufQogICov
        CiAgaXNFcXVhbDogZnVuY3Rpb24ob2JqKSB7CiAgICAvLyBmYWlsIGZhc3QK
        ICAgIGlmICghRW1iZXIuRW51bWVyYWJsZS5kZXRlY3Qob2JqKSkgcmV0dXJu
        IGZhbHNlOwoKICAgIHZhciBsb2MgPSBnZXQodGhpcywgJ2xlbmd0aCcpOwog
        ICAgaWYgKGdldChvYmosICdsZW5ndGgnKSAhPT0gbG9jKSByZXR1cm4gZmFs
        c2U7CgogICAgd2hpbGUoLS1sb2MgPj0gMCkgewogICAgICBpZiAoIW9iai5j
        b250YWlucyh0aGlzW2xvY10pKSByZXR1cm4gZmFsc2U7CiAgICB9CgogICAg
        cmV0dXJuIHRydWU7CiAgfSwKCiAgLyoqCiAgICBBZGRzIGFuIG9iamVjdCB0
        byB0aGUgc2V0LiBPbmx5IG5vbi1gbnVsbGAgb2JqZWN0cyBjYW4gYmUgYWRk
        ZWQgdG8gYSBzZXQKICAgIGFuZCB0aG9zZSBjYW4gb25seSBiZSBhZGRlZCBv
        bmNlLiBJZiB0aGUgb2JqZWN0IGlzIGFscmVhZHkgaW4gdGhlIHNldCBvcgog
        ICAgdGhlIHBhc3NlZCB2YWx1ZSBpcyBudWxsIHRoaXMgbWV0aG9kIHdpbGwg
        aGF2ZSBubyBlZmZlY3QuCgogICAgVGhpcyBpcyBhbiBhbGlhcyBmb3IgYEVt
        YmVyLk11dGFibGVFbnVtZXJhYmxlLmFkZE9iamVjdCgpYC4KCiAgICBgYGBq
        YXZhc2NyaXB0CiAgICB2YXIgY29sb3JzID0gbmV3IEVtYmVyLlNldCgpOwog
        ICAgY29sb3JzLmFkZCgiYmx1ZSIpOyAgICAgLy8gWyJibHVlIl0KICAgIGNv
        bG9ycy5hZGQoImJsdWUiKTsgICAgIC8vIFsiYmx1ZSJdCiAgICBjb2xvcnMu
        YWRkKCJyZWQiKTsgICAgICAvLyBbImJsdWUiLCAicmVkIl0KICAgIGNvbG9y
        cy5hZGQobnVsbCk7ICAgICAgIC8vIFsiYmx1ZSIsICJyZWQiXQogICAgY29s
        b3JzLmFkZCh1bmRlZmluZWQpOyAgLy8gWyJibHVlIiwgInJlZCJdCiAgICBg
        YGAKCiAgICBAbWV0aG9kIGFkZAogICAgQHBhcmFtIHtPYmplY3R9IG9iaiBU
        aGUgb2JqZWN0IHRvIGFkZC4KICAgIEByZXR1cm4ge0VtYmVyLlNldH0gVGhl
        IHNldCBpdHNlbGYuCiAgKi8KICBhZGQ6IEVtYmVyLmFsaWFzTWV0aG9kKCdh
        ZGRPYmplY3QnKSwKCiAgLyoqCiAgICBSZW1vdmVzIHRoZSBvYmplY3QgZnJv
        bSB0aGUgc2V0IGlmIGl0IGlzIGZvdW5kLiBJZiB5b3UgcGFzcyBhIGBudWxs
        YCB2YWx1ZQogICAgb3IgYW4gb2JqZWN0IHRoYXQgaXMgYWxyZWFkeSBub3Qg
        aW4gdGhlIHNldCwgdGhpcyBtZXRob2Qgd2lsbCBoYXZlIG5vCiAgICBlZmZl
        Y3QuIFRoaXMgaXMgYW4gYWxpYXMgZm9yIGBFbWJlci5NdXRhYmxlRW51bWVy
        YWJsZS5yZW1vdmVPYmplY3QoKWAuCgogICAgYGBgamF2YXNjcmlwdAogICAg
        dmFyIGNvbG9ycyA9IG5ldyBFbWJlci5TZXQoWyJyZWQiLCAiZ3JlZW4iLCAi
        Ymx1ZSJdKTsKICAgIGNvbG9ycy5yZW1vdmUoInJlZCIpOyAgICAgLy8gWyJi
        bHVlIiwgImdyZWVuIl0KICAgIGNvbG9ycy5yZW1vdmUoInB1cnBsZSIpOyAg
        Ly8gWyJibHVlIiwgImdyZWVuIl0KICAgIGNvbG9ycy5yZW1vdmUobnVsbCk7
        ICAgICAgLy8gWyJibHVlIiwgImdyZWVuIl0KICAgIGBgYAoKICAgIEBtZXRo
        b2QgcmVtb3ZlCiAgICBAcGFyYW0ge09iamVjdH0gb2JqIFRoZSBvYmplY3Qg
        dG8gcmVtb3ZlCiAgICBAcmV0dXJuIHtFbWJlci5TZXR9IFRoZSBzZXQgaXRz
        ZWxmLgogICovCiAgcmVtb3ZlOiBFbWJlci5hbGlhc01ldGhvZCgncmVtb3Zl
        T2JqZWN0JyksCgogIC8qKgogICAgUmVtb3ZlcyB0aGUgbGFzdCBlbGVtZW50
        IGZyb20gdGhlIHNldCBhbmQgcmV0dXJucyBpdCwgb3IgYG51bGxgIGlmIGl0
        J3MgZW1wdHkuCgogICAgYGBgamF2YXNjcmlwdAogICAgdmFyIGNvbG9ycyA9
        IG5ldyBFbWJlci5TZXQoWyJncmVlbiIsICJibHVlIl0pOwogICAgY29sb3Jz
        LnBvcCgpOyAgLy8gImJsdWUiCiAgICBjb2xvcnMucG9wKCk7ICAvLyAiZ3Jl
        ZW4iCiAgICBjb2xvcnMucG9wKCk7ICAvLyBudWxsCiAgICBgYGAKCiAgICBA
        bWV0aG9kIHBvcAogICAgQHJldHVybiB7T2JqZWN0fSBUaGUgcmVtb3ZlZCBv
        YmplY3QgZnJvbSB0aGUgc2V0IG9yIG51bGwuCiAgKi8KICBwb3A6IGZ1bmN0
        aW9uKCkgewogICAgaWYgKGdldCh0aGlzLCAnaXNGcm96ZW4nKSkgdGhyb3cg
        bmV3IEVtYmVyLkVycm9yKEVtYmVyLkZST1pFTl9FUlJPUik7CiAgICB2YXIg
        b2JqID0gdGhpcy5sZW5ndGggPiAwID8gdGhpc1t0aGlzLmxlbmd0aC0xXSA6
        IG51bGw7CiAgICB0aGlzLnJlbW92ZShvYmopOwogICAgcmV0dXJuIG9iajsK
        ICB9LAoKICAvKioKICAgIEluc2VydHMgdGhlIGdpdmVuIG9iamVjdCBvbiB0
        byB0aGUgZW5kIG9mIHRoZSBzZXQuIEl0IHJldHVybnMKICAgIHRoZSBzZXQg
        aXRzZWxmLgoKICAgIFRoaXMgaXMgYW4gYWxpYXMgZm9yIGBFbWJlci5NdXRh
        YmxlRW51bWVyYWJsZS5hZGRPYmplY3QoKWAuCgogICAgYGBgamF2YXNjcmlw
        dAogICAgdmFyIGNvbG9ycyA9IG5ldyBFbWJlci5TZXQoKTsKICAgIGNvbG9y
        cy5wdXNoKCJyZWQiKTsgICAvLyBbInJlZCJdCiAgICBjb2xvcnMucHVzaCgi
        Z3JlZW4iKTsgLy8gWyJyZWQiLCAiZ3JlZW4iXQogICAgY29sb3JzLnB1c2go
        ImJsdWUiKTsgIC8vIFsicmVkIiwgImdyZWVuIiwgImJsdWUiXQogICAgYGBg
        CgogICAgQG1ldGhvZCBwdXNoCiAgICBAcmV0dXJuIHtFbWJlci5TZXR9IFRo
        ZSBzZXQgaXRzZWxmLgogICovCiAgcHVzaDogRW1iZXIuYWxpYXNNZXRob2Qo
        J2FkZE9iamVjdCcpLAoKICAvKioKICAgIFJlbW92ZXMgdGhlIGxhc3QgZWxl
        bWVudCBmcm9tIHRoZSBzZXQgYW5kIHJldHVybnMgaXQsIG9yIGBudWxsYCBp
        ZiBpdCdzIGVtcHR5LgoKICAgIFRoaXMgaXMgYW4gYWxpYXMgZm9yIGBFbWJl
        ci5TZXQucG9wKClgLgoKICAgIGBgYGphdmFzY3JpcHQKICAgIHZhciBjb2xv
        cnMgPSBuZXcgRW1iZXIuU2V0KFsiZ3JlZW4iLCAiYmx1ZSJdKTsKICAgIGNv
        bG9ycy5zaGlmdCgpOyAgLy8gImJsdWUiCiAgICBjb2xvcnMuc2hpZnQoKTsg
        IC8vICJncmVlbiIKICAgIGNvbG9ycy5zaGlmdCgpOyAgLy8gbnVsbAogICAg
        YGBgCgogICAgQG1ldGhvZCBzaGlmdAogICAgQHJldHVybiB7T2JqZWN0fSBU
        aGUgcmVtb3ZlZCBvYmplY3QgZnJvbSB0aGUgc2V0IG9yIG51bGwuCiAgKi8K
        ICBzaGlmdDogRW1iZXIuYWxpYXNNZXRob2QoJ3BvcCcpLAoKICAvKioKICAg
        IEluc2VydHMgdGhlIGdpdmVuIG9iamVjdCBvbiB0byB0aGUgZW5kIG9mIHRo
        ZSBzZXQuIEl0IHJldHVybnMKICAgIHRoZSBzZXQgaXRzZWxmLgoKICAgIFRo
        aXMgaXMgYW4gYWxpYXMgb2YgYEVtYmVyLlNldC5wdXNoKClgCgogICAgYGBg
        amF2YXNjcmlwdAogICAgdmFyIGNvbG9ycyA9IG5ldyBFbWJlci5TZXQoKTsK
        ICAgIGNvbG9ycy51bnNoaWZ0KCJyZWQiKTsgICAgLy8gWyJyZWQiXQogICAg
        Y29sb3JzLnVuc2hpZnQoImdyZWVuIik7ICAvLyBbInJlZCIsICJncmVlbiJd
        CiAgICBjb2xvcnMudW5zaGlmdCgiYmx1ZSIpOyAgIC8vIFsicmVkIiwgImdy
        ZWVuIiwgImJsdWUiXQogICAgYGBgCgogICAgQG1ldGhvZCB1bnNoaWZ0CiAg
        ICBAcmV0dXJuIHtFbWJlci5TZXR9IFRoZSBzZXQgaXRzZWxmLgogICovCiAg
        dW5zaGlmdDogRW1iZXIuYWxpYXNNZXRob2QoJ3B1c2gnKSwKCiAgLyoqCiAg
        ICBBZGRzIGVhY2ggb2JqZWN0IGluIHRoZSBwYXNzZWQgZW51bWVyYWJsZSB0
        byB0aGUgc2V0LgoKICAgIFRoaXMgaXMgYW4gYWxpYXMgb2YgYEVtYmVyLk11
        dGFibGVFbnVtZXJhYmxlLmFkZE9iamVjdHMoKWAKCiAgICBgYGBqYXZhc2Ny
        aXB0CiAgICB2YXIgY29sb3JzID0gbmV3IEVtYmVyLlNldCgpOwogICAgY29s
        b3JzLmFkZEVhY2goWyJyZWQiLCAiZ3JlZW4iLCAiYmx1ZSJdKTsgIC8vIFsi
        cmVkIiwgImdyZWVuIiwgImJsdWUiXQogICAgYGBgCgogICAgQG1ldGhvZCBh
        ZGRFYWNoCiAgICBAcGFyYW0ge0VtYmVyLkVudW1lcmFibGV9IG9iamVjdHMg
        dGhlIG9iamVjdHMgdG8gYWRkLgogICAgQHJldHVybiB7RW1iZXIuU2V0fSBU
        aGUgc2V0IGl0c2VsZi4KICAqLwogIGFkZEVhY2g6IEVtYmVyLmFsaWFzTWV0
        aG9kKCdhZGRPYmplY3RzJyksCgogIC8qKgogICAgUmVtb3ZlcyBlYWNoIG9i
        amVjdCBpbiB0aGUgcGFzc2VkIGVudW1lcmFibGUgdG8gdGhlIHNldC4KCiAg
        ICBUaGlzIGlzIGFuIGFsaWFzIG9mIGBFbWJlci5NdXRhYmxlRW51bWVyYWJs
        ZS5yZW1vdmVPYmplY3RzKClgCgogICAgYGBgamF2YXNjcmlwdAogICAgdmFy
        IGNvbG9ycyA9IG5ldyBFbWJlci5TZXQoWyJyZWQiLCAiZ3JlZW4iLCAiYmx1
        ZSJdKTsKICAgIGNvbG9ycy5yZW1vdmVFYWNoKFsicmVkIiwgImJsdWUiXSk7
        ICAvLyAgWyJncmVlbiJdCiAgICBgYGAKCiAgICBAbWV0aG9kIHJlbW92ZUVh
        Y2gKICAgIEBwYXJhbSB7RW1iZXIuRW51bWVyYWJsZX0gb2JqZWN0cyB0aGUg
        b2JqZWN0cyB0byByZW1vdmUuCiAgICBAcmV0dXJuIHtFbWJlci5TZXR9IFRo
        ZSBzZXQgaXRzZWxmLgogICovCiAgcmVtb3ZlRWFjaDogRW1iZXIuYWxpYXNN
        ZXRob2QoJ3JlbW92ZU9iamVjdHMnKSwKCiAgLy8gLi4uLi4uLi4uLi4uLi4u
        Li4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLgog
        IC8vIFBSSVZBVEUgRU5VTUVSQUJMRSBTVVBQT1JUCiAgLy8KCiAgaW5pdDog
        ZnVuY3Rpb24oaXRlbXMpIHsKICAgIHRoaXMuX3N1cGVyKCk7CiAgICBpZiAo
        aXRlbXMpIHRoaXMuYWRkT2JqZWN0cyhpdGVtcyk7CiAgfSwKCiAgLy8gaW1w
        bGVtZW50IEVtYmVyLkVudW1lcmFibGUKICBuZXh0T2JqZWN0OiBmdW5jdGlv
        bihpZHgpIHsKICAgIHJldHVybiB0aGlzW2lkeF07CiAgfSwKCiAgLy8gbW9y
        ZSBvcHRpbWl6ZWQgdmVyc2lvbgogIGZpcnN0T2JqZWN0OiBFbWJlci5jb21w
        dXRlZChmdW5jdGlvbigpIHsKICAgIHJldHVybiB0aGlzLmxlbmd0aCA+IDAg
        PyB0aGlzWzBdIDogdW5kZWZpbmVkOwogIH0pLAoKICAvLyBtb3JlIG9wdGlt
        aXplZCB2ZXJzaW9uCiAgbGFzdE9iamVjdDogRW1iZXIuY29tcHV0ZWQoZnVu
        Y3Rpb24oKSB7CiAgICByZXR1cm4gdGhpcy5sZW5ndGggPiAwID8gdGhpc1t0
        aGlzLmxlbmd0aC0xXSA6IHVuZGVmaW5lZDsKICB9KSwKCiAgLy8gaW1wbGVt
        ZW50cyBFbWJlci5NdXRhYmxlRW51bWVyYWJsZQogIGFkZE9iamVjdDogZnVu
        Y3Rpb24ob2JqKSB7CiAgICBpZiAoZ2V0KHRoaXMsICdpc0Zyb3plbicpKSB0
        aHJvdyBuZXcgRW1iZXIuRXJyb3IoRW1iZXIuRlJPWkVOX0VSUk9SKTsKICAg
        IGlmIChpc05vbmUob2JqKSkgcmV0dXJuIHRoaXM7IC8vIG5vdGhpbmcgdG8g
        ZG8KCiAgICB2YXIgZ3VpZCA9IGd1aWRGb3Iob2JqKSwKICAgICAgICBpZHgg
        ID0gdGhpc1tndWlkXSwKICAgICAgICBsZW4gID0gZ2V0KHRoaXMsICdsZW5n
        dGgnKSwKICAgICAgICBhZGRlZCA7CgogICAgaWYgKGlkeD49MCAmJiBpZHg8
        bGVuICYmICh0aGlzW2lkeF0gPT09IG9iaikpIHJldHVybiB0aGlzOyAvLyBh
        ZGRlZAoKICAgIGFkZGVkID0gW29ial07CgogICAgdGhpcy5lbnVtZXJhYmxl
        Q29udGVudFdpbGxDaGFuZ2UobnVsbCwgYWRkZWQpOwogICAgRW1iZXIucHJv
        cGVydHlXaWxsQ2hhbmdlKHRoaXMsICdsYXN0T2JqZWN0Jyk7CgogICAgbGVu
        ID0gZ2V0KHRoaXMsICdsZW5ndGgnKTsKICAgIHRoaXNbZ3VpZF0gPSBsZW47
        CiAgICB0aGlzW2xlbl0gPSBvYmo7CiAgICBzZXQodGhpcywgJ2xlbmd0aCcs
        IGxlbisxKTsKCiAgICBFbWJlci5wcm9wZXJ0eURpZENoYW5nZSh0aGlzLCAn
        bGFzdE9iamVjdCcpOwogICAgdGhpcy5lbnVtZXJhYmxlQ29udGVudERpZENo
        YW5nZShudWxsLCBhZGRlZCk7CgogICAgcmV0dXJuIHRoaXM7CiAgfSwKCiAg
        Ly8gaW1wbGVtZW50cyBFbWJlci5NdXRhYmxlRW51bWVyYWJsZQogIHJlbW92
        ZU9iamVjdDogZnVuY3Rpb24ob2JqKSB7CiAgICBpZiAoZ2V0KHRoaXMsICdp
        c0Zyb3plbicpKSB0aHJvdyBuZXcgRW1iZXIuRXJyb3IoRW1iZXIuRlJPWkVO
        X0VSUk9SKTsKICAgIGlmIChpc05vbmUob2JqKSkgcmV0dXJuIHRoaXM7IC8v
        IG5vdGhpbmcgdG8gZG8KCiAgICB2YXIgZ3VpZCA9IGd1aWRGb3Iob2JqKSwK
        ICAgICAgICBpZHggID0gdGhpc1tndWlkXSwKICAgICAgICBsZW4gPSBnZXQo
        dGhpcywgJ2xlbmd0aCcpLAogICAgICAgIGlzRmlyc3QgPSBpZHggPT09IDAs
        CiAgICAgICAgaXNMYXN0ID0gaWR4ID09PSBsZW4tMSwKICAgICAgICBsYXN0
        LCByZW1vdmVkOwoKCiAgICBpZiAoaWR4Pj0wICYmIGlkeDxsZW4gJiYgKHRo
        aXNbaWR4XSA9PT0gb2JqKSkgewogICAgICByZW1vdmVkID0gW29ial07Cgog
        ICAgICB0aGlzLmVudW1lcmFibGVDb250ZW50V2lsbENoYW5nZShyZW1vdmVk
        LCBudWxsKTsKICAgICAgaWYgKGlzRmlyc3QpIHsgRW1iZXIucHJvcGVydHlX
        aWxsQ2hhbmdlKHRoaXMsICdmaXJzdE9iamVjdCcpOyB9CiAgICAgIGlmIChp
        c0xhc3QpICB7IEVtYmVyLnByb3BlcnR5V2lsbENoYW5nZSh0aGlzLCAnbGFz
        dE9iamVjdCcpOyB9CgogICAgICAvLyBzd2FwIGl0ZW1zIC0gYmFzaWNhbGx5
        IG1vdmUgdGhlIGl0ZW0gdG8gdGhlIGVuZCBzbyBpdCBjYW4gYmUgcmVtb3Zl
        ZAogICAgICBpZiAoaWR4IDwgbGVuLTEpIHsKICAgICAgICBsYXN0ID0gdGhp
        c1tsZW4tMV07CiAgICAgICAgdGhpc1tpZHhdID0gbGFzdDsKICAgICAgICB0
        aGlzW2d1aWRGb3IobGFzdCldID0gaWR4OwogICAgICB9CgogICAgICBkZWxl
        dGUgdGhpc1tndWlkXTsKICAgICAgZGVsZXRlIHRoaXNbbGVuLTFdOwogICAg
        ICBzZXQodGhpcywgJ2xlbmd0aCcsIGxlbi0xKTsKCiAgICAgIGlmIChpc0Zp
        cnN0KSB7IEVtYmVyLnByb3BlcnR5RGlkQ2hhbmdlKHRoaXMsICdmaXJzdE9i
        amVjdCcpOyB9CiAgICAgIGlmIChpc0xhc3QpICB7IEVtYmVyLnByb3BlcnR5
        RGlkQ2hhbmdlKHRoaXMsICdsYXN0T2JqZWN0Jyk7IH0KICAgICAgdGhpcy5l
        bnVtZXJhYmxlQ29udGVudERpZENoYW5nZShyZW1vdmVkLCBudWxsKTsKICAg
        IH0KCiAgICByZXR1cm4gdGhpczsKICB9LAoKICAvLyBvcHRpbWl6ZWQgdmVy
        c2lvbgogIGNvbnRhaW5zOiBmdW5jdGlvbihvYmopIHsKICAgIHJldHVybiB0
        aGlzW2d1aWRGb3Iob2JqKV0+PTA7CiAgfSwKCiAgY29weTogZnVuY3Rpb24o
        KSB7CiAgICB2YXIgQyA9IHRoaXMuY29uc3RydWN0b3IsIHJldCA9IG5ldyBD
        KCksIGxvYyA9IGdldCh0aGlzLCAnbGVuZ3RoJyk7CiAgICBzZXQocmV0LCAn
        bGVuZ3RoJywgbG9jKTsKICAgIHdoaWxlKC0tbG9jPj0wKSB7CiAgICAgIHJl
        dFtsb2NdID0gdGhpc1tsb2NdOwogICAgICByZXRbZ3VpZEZvcih0aGlzW2xv
        Y10pXSA9IGxvYzsKICAgIH0KICAgIHJldHVybiByZXQ7CiAgfSwKCiAgdG9T
        dHJpbmc6IGZ1bmN0aW9uKCkgewogICAgdmFyIGxlbiA9IHRoaXMubGVuZ3Ro
        LCBpZHgsIGFycmF5ID0gW107CiAgICBmb3IoaWR4ID0gMDsgaWR4IDwgbGVu
        OyBpZHgrKykgewogICAgICBhcnJheVtpZHhdID0gdGhpc1tpZHhdOwogICAg
        fQogICAgcmV0dXJuIGZtdCgiRW1iZXIuU2V0PCVAPiIsIFthcnJheS5qb2lu
        KCcsJyldKTsKICB9Cgp9KTsKCn0pKCk7CgoKCihmdW5jdGlvbigpIHsKdmFy
        IERlZmVycmVkTWl4aW4gPSBFbWJlci5EZWZlcnJlZE1peGluLCAvLyBtaXhp
        bnMvZGVmZXJyZWQKICAgIGdldCA9IEVtYmVyLmdldDsKCnZhciBEZWZlcnJl
        ZCA9IEVtYmVyLk9iamVjdC5leHRlbmQoRGVmZXJyZWRNaXhpbik7CgpEZWZl
        cnJlZC5yZW9wZW5DbGFzcyh7CiAgcHJvbWlzZTogZnVuY3Rpb24oY2FsbGJh
        Y2ssIGJpbmRpbmcpIHsKICAgIHZhciBkZWZlcnJlZCA9IERlZmVycmVkLmNy
        ZWF0ZSgpOwogICAgY2FsbGJhY2suY2FsbChiaW5kaW5nLCBkZWZlcnJlZCk7
        CiAgICByZXR1cm4gZGVmZXJyZWQ7CiAgfQp9KTsKCkVtYmVyLkRlZmVycmVk
        ID0gRGVmZXJyZWQ7Cgp9KSgpOwoKCgooZnVuY3Rpb24oKSB7CnZhciBmb3JF
        YWNoID0gRW1iZXIuQXJyYXlQb2x5ZmlsbHMuZm9yRWFjaDsKCi8qKgpAbW9k
        dWxlIGVtYmVyCkBzdWJtb2R1bGUgZW1iZXItcnVudGltZQoqLwoKdmFyIGxv
        YWRIb29rcyA9IEVtYmVyLkVOVi5FTUJFUl9MT0FEX0hPT0tTIHx8IHt9Owp2
        YXIgbG9hZGVkID0ge307CgovKioKCkRldGVjdHMgd2hlbiBhIHNwZWNpZmlj
        IHBhY2thZ2Ugb2YgRW1iZXIgKGUuZy4gJ0VtYmVyLkhhbmRsZWJhcnMnKQpo
        YXMgZnVsbHkgbG9hZGVkIGFuZCBpcyBhdmFpbGFibGUgZm9yIGV4dGVuc2lv
        bi4KClRoZSBwcm92aWRlZCBgY2FsbGJhY2tgIHdpbGwgYmUgY2FsbGVkIHdp
        dGggdGhlIGBuYW1lYCBwYXNzZWQKcmVzb2x2ZWQgZnJvbSBhIHN0cmluZyBp
        bnRvIHRoZSBvYmplY3Q6CgpgYGBqYXZhc2NyaXB0CkVtYmVyLm9uTG9hZCgn
        RW1iZXIuSGFuZGxlYmFycycgZnVuY3Rpb24oaGJhcnMpewogIGhiYXJzLnJl
        Z2lzdGVySGVscGVyKC4uLik7Cn0pOwpgYGAKCgpAbWV0aG9kIG9uTG9hZApA
        Zm9yIEVtYmVyCkBwYXJhbSBuYW1lIHtTdHJpbmd9IG5hbWUgb2YgaG9vawpA
        cGFyYW0gY2FsbGJhY2sge0Z1bmN0aW9ufSBjYWxsYmFjayB0byBiZSBjYWxs
        ZWQKKi8KRW1iZXIub25Mb2FkID0gZnVuY3Rpb24obmFtZSwgY2FsbGJhY2sp
        IHsKICB2YXIgb2JqZWN0OwoKICBsb2FkSG9va3NbbmFtZV0gPSBsb2FkSG9v
        a3NbbmFtZV0gfHwgRW1iZXIuQSgpOwogIGxvYWRIb29rc1tuYW1lXS5wdXNo
        T2JqZWN0KGNhbGxiYWNrKTsKCiAgaWYgKG9iamVjdCA9IGxvYWRlZFtuYW1l
        XSkgewogICAgY2FsbGJhY2sob2JqZWN0KTsKICB9Cn07CgovKioKCkNhbGxl
        ZCB3aGVuIGFuIEVtYmVyLmpzIHBhY2thZ2UgKGUuZyBFbWJlci5IYW5kbGVi
        YXJzKSBoYXMgZmluaXNoZWQKbG9hZGluZy4gVHJpZ2dlcnMgYW55IGNhbGxi
        YWNrcyByZWdpc3RlcmVkIGZvciB0aGlzIGV2ZW50LgoKQG1ldGhvZCBydW5M
        b2FkSG9va3MKQGZvciBFbWJlcgpAcGFyYW0gbmFtZSB7U3RyaW5nfSBuYW1l
        IG9mIGhvb2sKQHBhcmFtIG9iamVjdCB7T2JqZWN0fSBvYmplY3QgdG8gcGFz
        cyB0byBjYWxsYmFja3MKKi8KRW1iZXIucnVuTG9hZEhvb2tzID0gZnVuY3Rp
        b24obmFtZSwgb2JqZWN0KSB7CiAgbG9hZGVkW25hbWVdID0gb2JqZWN0OwoK
        ICBpZiAobG9hZEhvb2tzW25hbWVdKSB7CiAgICBmb3JFYWNoLmNhbGwobG9h
        ZEhvb2tzW25hbWVdLCBmdW5jdGlvbihjYWxsYmFjaykgewogICAgICBjYWxs
        YmFjayhvYmplY3QpOwogICAgfSk7CiAgfQp9OwoKfSkoKTsKCgoKKGZ1bmN0
        aW9uKCkgewoKfSkoKTsKCgoKKGZ1bmN0aW9uKCkgewp2YXIgZ2V0ID0gRW1i
        ZXIuZ2V0OwoKLyoqCkBtb2R1bGUgZW1iZXIKQHN1Ym1vZHVsZSBlbWJlci1y
        dW50aW1lCiovCgovKioKICBgRW1iZXIuQ29udHJvbGxlck1peGluYCBwcm92
        aWRlcyBhIHN0YW5kYXJkIGludGVyZmFjZSBmb3IgYWxsIGNsYXNzZXMgdGhh
        dAogIGNvbXBvc2UgRW1iZXIncyBjb250cm9sbGVyIGxheWVyOiBgRW1iZXIu
        Q29udHJvbGxlcmAsCiAgYEVtYmVyLkFycmF5Q29udHJvbGxlcmAsIGFuZCBg
        RW1iZXIuT2JqZWN0Q29udHJvbGxlcmAuCgogIEBjbGFzcyBDb250cm9sbGVy
        TWl4aW4KICBAbmFtZXNwYWNlIEVtYmVyCiovCkVtYmVyLkNvbnRyb2xsZXJN
        aXhpbiA9IEVtYmVyLk1peGluLmNyZWF0ZShFbWJlci5BY3Rpb25IYW5kbGVy
        LCB7CiAgLyogZHVja3R5cGUgYXMgYSBjb250cm9sbGVyICovCiAgaXNDb250
        cm9sbGVyOiB0cnVlLAoKICAvKioKICAgIFRoZSBvYmplY3QgdG8gd2hpY2gg
        YWN0aW9ucyBmcm9tIHRoZSB2aWV3IHNob3VsZCBiZSBzZW50LgoKICAgIEZv
        ciBleGFtcGxlLCB3aGVuIGEgSGFuZGxlYmFycyB0ZW1wbGF0ZSB1c2VzIHRo
        ZSBge3thY3Rpb259fWAgaGVscGVyLAogICAgaXQgd2lsbCBhdHRlbXB0IHRv
        IHNlbmQgdGhlIGFjdGlvbiB0byB0aGUgdmlldydzIGNvbnRyb2xsZXIncyBg
        dGFyZ2V0YC4KCiAgICBCeSBkZWZhdWx0LCBhIGNvbnRyb2xsZXIncyBgdGFy
        Z2V0YCBpcyBzZXQgdG8gdGhlIHJvdXRlciBhZnRlciBpdCBpcwogICAgaW5z
        dGFudGlhdGVkIGJ5IGBFbWJlci5BcHBsaWNhdGlvbiNpbml0aWFsaXplYC4K
        CiAgICBAcHJvcGVydHkgdGFyZ2V0CiAgICBAZGVmYXVsdCBudWxsCiAgKi8K
        ICB0YXJnZXQ6IG51bGwsCgogIGNvbnRhaW5lcjogbnVsbCwKCiAgcGFyZW50
        Q29udHJvbGxlcjogbnVsbCwKCiAgc3RvcmU6IG51bGwsCgogIG1vZGVsOiBF
        bWJlci5jb21wdXRlZC5hbGlhcygnY29udGVudCcpLAoKICBkZXByZWNhdGVk
        U2VuZEhhbmRsZXM6IGZ1bmN0aW9uKGFjdGlvbk5hbWUpIHsKICAgIHJldHVy
        biAhIXRoaXNbYWN0aW9uTmFtZV07CiAgfSwKCiAgZGVwcmVjYXRlZFNlbmQ6
        IGZ1bmN0aW9uKGFjdGlvbk5hbWUpIHsKICAgIHZhciBhcmdzID0gW10uc2xp
        Y2UuY2FsbChhcmd1bWVudHMsIDEpOwogICAgRW1iZXIuYXNzZXJ0KCcnICsg
        dGhpcyArICIgaGFzIHRoZSBhY3Rpb24gIiArIGFjdGlvbk5hbWUgKyAiIGJ1
        dCBpdCBpcyBub3QgYSBmdW5jdGlvbiIsIHR5cGVvZiB0aGlzW2FjdGlvbk5h
        bWVdID09PSAnZnVuY3Rpb24nKTsKICAgIEVtYmVyLmRlcHJlY2F0ZSgnQWN0
        aW9uIGhhbmRsZXJzIGltcGxlbWVudGVkIGRpcmVjdGx5IG9uIGNvbnRyb2xs
        ZXJzIGFyZSBkZXByZWNhdGVkIGluIGZhdm9yIG9mIGFjdGlvbiBoYW5kbGVy
        cyBvbiBhbiBgYWN0aW9uc2Agb2JqZWN0ICgnICsgYWN0aW9uTmFtZSArICcg
        b24gJyArIHRoaXMgKyAnKScsIGZhbHNlKTsKICAgIHRoaXNbYWN0aW9uTmFt
        ZV0uYXBwbHkodGhpcywgYXJncyk7CiAgICByZXR1cm47CiAgfQp9KTsKCi8q
        KgogIEBjbGFzcyBDb250cm9sbGVyCiAgQG5hbWVzcGFjZSBFbWJlcgogIEBl
        eHRlbmRzIEVtYmVyLk9iamVjdAogIEB1c2VzIEVtYmVyLkNvbnRyb2xsZXJN
        aXhpbgoqLwpFbWJlci5Db250cm9sbGVyID0gRW1iZXIuT2JqZWN0LmV4dGVu
        ZChFbWJlci5Db250cm9sbGVyTWl4aW4pOwoKfSkoKTsKCgoKKGZ1bmN0aW9u
        KCkgewovKioKQG1vZHVsZSBlbWJlcgpAc3VibW9kdWxlIGVtYmVyLXJ1bnRp
        bWUKKi8KCnZhciBnZXQgPSBFbWJlci5nZXQsIHNldCA9IEVtYmVyLnNldCwg
        Zm9yRWFjaCA9IEVtYmVyLkVudW1lcmFibGVVdGlscy5mb3JFYWNoOwoKLyoq
        CiAgYEVtYmVyLlNvcnRhYmxlTWl4aW5gIHByb3ZpZGVzIGEgc3RhbmRhcmQg
        aW50ZXJmYWNlIGZvciBhcnJheSBwcm94aWVzCiAgdG8gc3BlY2lmeSBhIHNv
        cnQgb3JkZXIgYW5kIG1haW50YWluIHRoaXMgc29ydGluZyB3aGVuIG9iamVj
        dHMgYXJlIGFkZGVkLAogIHJlbW92ZWQsIG9yIHVwZGF0ZWQgd2l0aG91dCBj
        aGFuZ2luZyB0aGUgaW1wbGljaXQgb3JkZXIgb2YgdGhlaXIgdW5kZXJseWlu
        ZwogIGNvbnRlbnQgYXJyYXk6CgogIGBgYGphdmFzY3JpcHQKICBzb25ncyA9
        IFsKICAgIHt0cmFja051bWJlcjogNCwgdGl0bGU6ICdPYi1MYS1EaSwgT2It
        TGEtRGEnfSwKICAgIHt0cmFja051bWJlcjogMiwgdGl0bGU6ICdCYWNrIGlu
        IHRoZSBVLlMuUy5SLid9LAogICAge3RyYWNrTnVtYmVyOiAzLCB0aXRsZTog
        J0dsYXNzIE9uaW9uJ30sCiAgXTsKCiAgc29uZ3NDb250cm9sbGVyID0gRW1i
        ZXIuQXJyYXlDb250cm9sbGVyLmNyZWF0ZSh7CiAgICBjb250ZW50OiBzb25n
        cywKICAgIHNvcnRQcm9wZXJ0aWVzOiBbJ3RyYWNrTnVtYmVyJ10sCiAgICBz
        b3J0QXNjZW5kaW5nOiB0cnVlCiAgfSk7CgogIHNvbmdzQ29udHJvbGxlci5n
        ZXQoJ2ZpcnN0T2JqZWN0Jyk7ICAvLyB7dHJhY2tOdW1iZXI6IDIsIHRpdGxl
        OiAnQmFjayBpbiB0aGUgVS5TLlMuUi4nfQoKICBzb25nc0NvbnRyb2xsZXIu
        YWRkT2JqZWN0KHt0cmFja051bWJlcjogMSwgdGl0bGU6ICdEZWFyIFBydWRl
        bmNlJ30pOwogIHNvbmdzQ29udHJvbGxlci5nZXQoJ2ZpcnN0T2JqZWN0Jyk7
        ICAvLyB7dHJhY2tOdW1iZXI6IDEsIHRpdGxlOiAnRGVhciBQcnVkZW5jZSd9
        CiAgYGBgCgogIElmIHlvdSBhZGQgb3IgcmVtb3ZlIHRoZSBwcm9wZXJ0aWVz
        IHRvIHNvcnQgYnkgb3IgY2hhbmdlIHRoZSBzb3J0IGRpcmVjdGlvbiB0aGUg
        Y29udGVudAogIHNvcnQgb3JkZXIgd2lsbCBiZSBhdXRvbWF0aWNhbGx5IHVw
        ZGF0ZWQuCgogIGBgYGphdmFzY3JpcHQKICBzb25nc0NvbnRyb2xsZXIuc2V0
        KCdzb3J0UHJvcGVydGllcycsIFsndGl0bGUnXSk7CiAgc29uZ3NDb250cm9s
        bGVyLmdldCgnZmlyc3RPYmplY3QnKTsgLy8ge3RyYWNrTnVtYmVyOiAyLCB0
        aXRsZTogJ0JhY2sgaW4gdGhlIFUuUy5TLlIuJ30KCiAgc29uZ3NDb250cm9s
        bGVyLnRvZ2dsZVByb3BlcnR5KCdzb3J0QXNjZW5kaW5nJyk7CiAgc29uZ3ND
        b250cm9sbGVyLmdldCgnZmlyc3RPYmplY3QnKTsgLy8ge3RyYWNrTnVtYmVy
        OiA0LCB0aXRsZTogJ09iLUxhLURpLCBPYi1MYS1EYSd9CiAgYGBgCgogIFNv
        cnRhYmxlTWl4aW4gd29ya3MgYnkgc29ydGluZyB0aGUgYXJyYW5nZWRDb250
        ZW50IGFycmF5LCB3aGljaCBpcyB0aGUgYXJyYXkgdGhhdAogIGFycmF5UHJv
        eHkgZGlzcGxheXMuIER1ZSB0byB0aGUgZmFjdCB0aGF0IHRoZSB1bmRlcmx5
        aW5nICdjb250ZW50JyBhcnJheSBpcyBub3QgY2hhbmdlZCwgdGhhdAogIGFy
        cmF5IHdpbGwgbm90IGRpc3BsYXkgdGhlIHNvcnRlZCBsaXN0OgoKICAgYGBg
        amF2YXNjcmlwdAogIHNvbmdzQ29udHJvbGxlci5nZXQoJ2NvbnRlbnQnKS5n
        ZXQoJ2ZpcnN0T2JqZWN0Jyk7IC8vIFJldHVybnMgdGhlIHVuc29ydGVkIG9y
        aWdpbmFsIGNvbnRlbnQKICBzb25nc0NvbnRyb2xsZXIuZ2V0KCdmaXJzdE9i
        amVjdCcpOyAvLyBSZXR1cm5zIHRoZSBzb3J0ZWQgY29udGVudC4KICBgYGAg
        CiAgCiAgQWx0aG91Z2ggdGhlIHNvcnRlZCBjb250ZW50IGNhbiBhbHNvIGJl
        IGFjY2Vzc2VkIHRocm91Z2ggdGhlIGFycmFuZ2VkQ29udGVudCBwcm9wZXJ0
        eSwKICBpdCBpcyBwcmVmZXJhYmxlIHRvIHVzZSB0aGUgcHJveGllZCBjbGFz
        cyBhbmQgbm90IHRoZSBhcnJhbmdlZENvbnRlbnQgYXJyYXkgZGlyZWN0bHku
        CgogIEBjbGFzcyBTb3J0YWJsZU1peGluCiAgQG5hbWVzcGFjZSBFbWJlcgog
        IEB1c2VzIEVtYmVyLk11dGFibGVFbnVtZXJhYmxlCiovCkVtYmVyLlNvcnRh
        YmxlTWl4aW4gPSBFbWJlci5NaXhpbi5jcmVhdGUoRW1iZXIuTXV0YWJsZUVu
        dW1lcmFibGUsIHsKCiAgLyoqCiAgICBTcGVjaWZpZXMgd2hpY2ggcHJvcGVy
        dGllcyBkaWN0YXRlIHRoZSBhcnJhbmdlZENvbnRlbnQncyBzb3J0IG9yZGVy
        LgoKICAgIFdoZW4gc3BlY2lmeWluZyBtdWx0aXBsZSBwcm9wZXJ0aWVzIHRo
        ZSBzb3J0aW5nIHdpbGwgdXNlIHByb3BlcnRpZXMKICAgIGZyb20gdGhlIGBz
        b3J0UHJvcGVydGllc2AgYXJyYXkgcHJpb3JpdGl6ZWQgZnJvbSBmaXJzdCB0
        byBsYXN0LgoKICAgIEBwcm9wZXJ0eSB7QXJyYXl9IHNvcnRQcm9wZXJ0aWVz
        CiAgKi8KICBzb3J0UHJvcGVydGllczogbnVsbCwKCiAgLyoqCiAgICBTcGVj
        aWZpZXMgdGhlIGFycmFuZ2VkQ29udGVudCdzIHNvcnQgZGlyZWN0aW9uCgog
        ICAgQHByb3BlcnR5IHtCb29sZWFufSBzb3J0QXNjZW5kaW5nCiAgKi8KICBz
        b3J0QXNjZW5kaW5nOiB0cnVlLAoKICAvKioKICAgIFRoZSBmdW5jdGlvbiB1
        c2VkIHRvIGNvbXBhcmUgdHdvIHZhbHVlcy4gWW91IGNhbiBvdmVycmlkZSB0
        aGlzIGlmIHlvdQogICAgd2FudCB0byBkbyBjdXN0b20gY29tcGFyaXNvbnMu
        IEZ1bmN0aW9ucyBtdXN0IGJlIG9mIHRoZSB0eXBlIGV4cGVjdGVkIGJ5CiAg
        ICBBcnJheSNzb3J0LCBpLmUuCiAgICAgIHJldHVybiAwIGlmIHRoZSB0d28g
        cGFyYW1ldGVycyBhcmUgZXF1YWwsCiAgICAgIHJldHVybiBhIG5lZ2F0aXZl
        IHZhbHVlIGlmIHRoZSBmaXJzdCBwYXJhbWV0ZXIgaXMgc21hbGxlciB0aGFu
        IHRoZSBzZWNvbmQgb3IKICAgICAgcmV0dXJuIGEgcG9zaXRpdmUgdmFsdWUg
        b3RoZXJ3aXNlOgoKICAgIGBgYGphdmFzY3JpcHQKICAgIGZ1bmN0aW9uKHgs
        eSkgeyAvLyBUaGVzZSBhcmUgYXNzdW1lZCB0byBiZSBpbnRlZ2VycwogICAg
        ICBpZiAoeCA9PT0geSkKICAgICAgICByZXR1cm4gMDsKICAgICAgcmV0dXJu
        IHggPCB5ID8gLTEgOiAxOwogICAgfQogICAgYGBgCgogICAgQHByb3BlcnR5
        IHNvcnRGdW5jdGlvbgogICAgQHR5cGUge0Z1bmN0aW9ufQogICAgQGRlZmF1
        bHQgRW1iZXIuY29tcGFyZQogICovCiAgc29ydEZ1bmN0aW9uOiBFbWJlci5j
        b21wYXJlLAoKICBvcmRlckJ5OiBmdW5jdGlvbihpdGVtMSwgaXRlbTIpIHsK
        ICAgIHZhciByZXN1bHQgPSAwLAogICAgICAgIHNvcnRQcm9wZXJ0aWVzID0g
        Z2V0KHRoaXMsICdzb3J0UHJvcGVydGllcycpLAogICAgICAgIHNvcnRBc2Nl
        bmRpbmcgPSBnZXQodGhpcywgJ3NvcnRBc2NlbmRpbmcnKSwKICAgICAgICBz
        b3J0RnVuY3Rpb24gPSBnZXQodGhpcywgJ3NvcnRGdW5jdGlvbicpOwoKICAg
        IEVtYmVyLmFzc2VydCgieW91IG5lZWQgdG8gZGVmaW5lIGBzb3J0UHJvcGVy
        dGllc2AiLCAhIXNvcnRQcm9wZXJ0aWVzKTsKCiAgICBmb3JFYWNoKHNvcnRQ
        cm9wZXJ0aWVzLCBmdW5jdGlvbihwcm9wZXJ0eU5hbWUpIHsKICAgICAgaWYg
        KHJlc3VsdCA9PT0gMCkgewogICAgICAgIHJlc3VsdCA9IHNvcnRGdW5jdGlv
        bihnZXQoaXRlbTEsIHByb3BlcnR5TmFtZSksIGdldChpdGVtMiwgcHJvcGVy
        dHlOYW1lKSk7CiAgICAgICAgaWYgKChyZXN1bHQgIT09IDApICYmICFzb3J0
        QXNjZW5kaW5nKSB7CiAgICAgICAgICByZXN1bHQgPSAoLTEpICogcmVzdWx0
        OwogICAgICAgIH0KICAgICAgfQogICAgfSk7CgogICAgcmV0dXJuIHJlc3Vs
        dDsKICB9LAoKICBkZXN0cm95OiBmdW5jdGlvbigpIHsKICAgIHZhciBjb250
        ZW50ID0gZ2V0KHRoaXMsICdjb250ZW50JyksCiAgICAgICAgc29ydFByb3Bl
        cnRpZXMgPSBnZXQodGhpcywgJ3NvcnRQcm9wZXJ0aWVzJyk7CgogICAgaWYg
        KGNvbnRlbnQgJiYgc29ydFByb3BlcnRpZXMpIHsKICAgICAgZm9yRWFjaChj
        b250ZW50LCBmdW5jdGlvbihpdGVtKSB7CiAgICAgICAgZm9yRWFjaChzb3J0
        UHJvcGVydGllcywgZnVuY3Rpb24oc29ydFByb3BlcnR5KSB7CiAgICAgICAg
        ICBFbWJlci5yZW1vdmVPYnNlcnZlcihpdGVtLCBzb3J0UHJvcGVydHksIHRo
        aXMsICdjb250ZW50SXRlbVNvcnRQcm9wZXJ0eURpZENoYW5nZScpOwogICAg
        ICAgIH0sIHRoaXMpOwogICAgICB9LCB0aGlzKTsKICAgIH0KCiAgICByZXR1
        cm4gdGhpcy5fc3VwZXIoKTsKICB9LAoKICBpc1NvcnRlZDogRW1iZXIuY29t
        cHV0ZWQuYm9vbCgnc29ydFByb3BlcnRpZXMnKSwKCiAgLyoqCiAgICBPdmVy
        cmlkZXMgdGhlIGRlZmF1bHQgYXJyYW5nZWRDb250ZW50IGZyb20gYXJyYXlQ
        cm94eSBpbiBvcmRlciB0byBzb3J0IGJ5IHNvcnRGdW5jdGlvbi4KICAgIEFs
        c28gc2V0cyB1cCBvYnNlcnZlcnMgZm9yIGVhY2ggc29ydFByb3BlcnR5IG9u
        IGVhY2ggaXRlbSBpbiB0aGUgY29udGVudCBBcnJheS4KICAgIAogICAgQHBy
        b3BlcnR5IGFycmFuZ2VkQ29udGVudAogICovCgogIGFycmFuZ2VkQ29udGVu
        dDogRW1iZXIuY29tcHV0ZWQoJ2NvbnRlbnQnLCAnc29ydFByb3BlcnRpZXMu
        QGVhY2gnLCBmdW5jdGlvbihrZXksIHZhbHVlKSB7CiAgICB2YXIgY29udGVu
        dCA9IGdldCh0aGlzLCAnY29udGVudCcpLAogICAgICAgIGlzU29ydGVkID0g
        Z2V0KHRoaXMsICdpc1NvcnRlZCcpLAogICAgICAgIHNvcnRQcm9wZXJ0aWVz
        ID0gZ2V0KHRoaXMsICdzb3J0UHJvcGVydGllcycpLAogICAgICAgIHNlbGYg
        PSB0aGlzOwoKICAgIGlmIChjb250ZW50ICYmIGlzU29ydGVkKSB7CiAgICAg
        IGNvbnRlbnQgPSBjb250ZW50LnNsaWNlKCk7CiAgICAgIGNvbnRlbnQuc29y
        dChmdW5jdGlvbihpdGVtMSwgaXRlbTIpIHsKICAgICAgICByZXR1cm4gc2Vs
        Zi5vcmRlckJ5KGl0ZW0xLCBpdGVtMik7CiAgICAgIH0pOwogICAgICBmb3JF
        YWNoKGNvbnRlbnQsIGZ1bmN0aW9uKGl0ZW0pIHsKICAgICAgICBmb3JFYWNo
        KHNvcnRQcm9wZXJ0aWVzLCBmdW5jdGlvbihzb3J0UHJvcGVydHkpIHsKICAg
        ICAgICAgIEVtYmVyLmFkZE9ic2VydmVyKGl0ZW0sIHNvcnRQcm9wZXJ0eSwg
        dGhpcywgJ2NvbnRlbnRJdGVtU29ydFByb3BlcnR5RGlkQ2hhbmdlJyk7CiAg
        ICAgICAgfSwgdGhpcyk7CiAgICAgIH0sIHRoaXMpOwogICAgICByZXR1cm4g
        RW1iZXIuQShjb250ZW50KTsKICAgIH0KCiAgICByZXR1cm4gY29udGVudDsK
        ICB9KSwKCiAgX2NvbnRlbnRXaWxsQ2hhbmdlOiBFbWJlci5iZWZvcmVPYnNl
        cnZlcignY29udGVudCcsIGZ1bmN0aW9uKCkgewogICAgdmFyIGNvbnRlbnQg
        PSBnZXQodGhpcywgJ2NvbnRlbnQnKSwKICAgICAgICBzb3J0UHJvcGVydGll
        cyA9IGdldCh0aGlzLCAnc29ydFByb3BlcnRpZXMnKTsKCiAgICBpZiAoY29u
        dGVudCAmJiBzb3J0UHJvcGVydGllcykgewogICAgICBmb3JFYWNoKGNvbnRl
        bnQsIGZ1bmN0aW9uKGl0ZW0pIHsKICAgICAgICBmb3JFYWNoKHNvcnRQcm9w
        ZXJ0aWVzLCBmdW5jdGlvbihzb3J0UHJvcGVydHkpIHsKICAgICAgICAgIEVt
        YmVyLnJlbW92ZU9ic2VydmVyKGl0ZW0sIHNvcnRQcm9wZXJ0eSwgdGhpcywg
        J2NvbnRlbnRJdGVtU29ydFByb3BlcnR5RGlkQ2hhbmdlJyk7CiAgICAgICAg
        fSwgdGhpcyk7CiAgICAgIH0sIHRoaXMpOwogICAgfQoKICAgIHRoaXMuX3N1
        cGVyKCk7CiAgfSksCgogIHNvcnRBc2NlbmRpbmdXaWxsQ2hhbmdlOiBFbWJl
        ci5iZWZvcmVPYnNlcnZlcignc29ydEFzY2VuZGluZycsIGZ1bmN0aW9uKCkg
        ewogICAgdGhpcy5fbGFzdFNvcnRBc2NlbmRpbmcgPSBnZXQodGhpcywgJ3Nv
        cnRBc2NlbmRpbmcnKTsKICB9KSwKCiAgc29ydEFzY2VuZGluZ0RpZENoYW5n
        ZTogRW1iZXIub2JzZXJ2ZXIoJ3NvcnRBc2NlbmRpbmcnLCBmdW5jdGlvbigp
        IHsKICAgIGlmIChnZXQodGhpcywgJ3NvcnRBc2NlbmRpbmcnKSAhPT0gdGhp
        cy5fbGFzdFNvcnRBc2NlbmRpbmcpIHsKICAgICAgdmFyIGFycmFuZ2VkQ29u
        dGVudCA9IGdldCh0aGlzLCAnYXJyYW5nZWRDb250ZW50Jyk7CiAgICAgIGFy
        cmFuZ2VkQ29udGVudC5yZXZlcnNlT2JqZWN0cygpOwogICAgfQogIH0pLAoK
        ICBjb250ZW50QXJyYXlXaWxsQ2hhbmdlOiBmdW5jdGlvbihhcnJheSwgaWR4
        LCByZW1vdmVkQ291bnQsIGFkZGVkQ291bnQpIHsKICAgIHZhciBpc1NvcnRl
        ZCA9IGdldCh0aGlzLCAnaXNTb3J0ZWQnKTsKCiAgICBpZiAoaXNTb3J0ZWQp
        IHsKICAgICAgdmFyIGFycmFuZ2VkQ29udGVudCA9IGdldCh0aGlzLCAnYXJy
        YW5nZWRDb250ZW50Jyk7CiAgICAgIHZhciByZW1vdmVkT2JqZWN0cyA9IGFy
        cmF5LnNsaWNlKGlkeCwgaWR4K3JlbW92ZWRDb3VudCk7CiAgICAgIHZhciBz
        b3J0UHJvcGVydGllcyA9IGdldCh0aGlzLCAnc29ydFByb3BlcnRpZXMnKTsK
        CiAgICAgIGZvckVhY2gocmVtb3ZlZE9iamVjdHMsIGZ1bmN0aW9uKGl0ZW0p
        IHsKICAgICAgICBhcnJhbmdlZENvbnRlbnQucmVtb3ZlT2JqZWN0KGl0ZW0p
        OwoKICAgICAgICBmb3JFYWNoKHNvcnRQcm9wZXJ0aWVzLCBmdW5jdGlvbihz
        b3J0UHJvcGVydHkpIHsKICAgICAgICAgIEVtYmVyLnJlbW92ZU9ic2VydmVy
        KGl0ZW0sIHNvcnRQcm9wZXJ0eSwgdGhpcywgJ2NvbnRlbnRJdGVtU29ydFBy
        b3BlcnR5RGlkQ2hhbmdlJyk7CiAgICAgICAgfSwgdGhpcyk7CiAgICAgIH0s
        IHRoaXMpOwogICAgfQoKICAgIHJldHVybiB0aGlzLl9zdXBlcihhcnJheSwg
        aWR4LCByZW1vdmVkQ291bnQsIGFkZGVkQ291bnQpOwogIH0sCgogIGNvbnRl
        bnRBcnJheURpZENoYW5nZTogZnVuY3Rpb24oYXJyYXksIGlkeCwgcmVtb3Zl
        ZENvdW50LCBhZGRlZENvdW50KSB7CiAgICB2YXIgaXNTb3J0ZWQgPSBnZXQo
        dGhpcywgJ2lzU29ydGVkJyksCiAgICAgICAgc29ydFByb3BlcnRpZXMgPSBn
        ZXQodGhpcywgJ3NvcnRQcm9wZXJ0aWVzJyk7CgogICAgaWYgKGlzU29ydGVk
        KSB7CiAgICAgIHZhciBhZGRlZE9iamVjdHMgPSBhcnJheS5zbGljZShpZHgs
        IGlkeCthZGRlZENvdW50KTsKCiAgICAgIGZvckVhY2goYWRkZWRPYmplY3Rz
        LCBmdW5jdGlvbihpdGVtKSB7CiAgICAgICAgdGhpcy5pbnNlcnRJdGVtU29y
        dGVkKGl0ZW0pOwoKICAgICAgICBmb3JFYWNoKHNvcnRQcm9wZXJ0aWVzLCBm
        dW5jdGlvbihzb3J0UHJvcGVydHkpIHsKICAgICAgICAgIEVtYmVyLmFkZE9i
        c2VydmVyKGl0ZW0sIHNvcnRQcm9wZXJ0eSwgdGhpcywgJ2NvbnRlbnRJdGVt
        U29ydFByb3BlcnR5RGlkQ2hhbmdlJyk7CiAgICAgICAgfSwgdGhpcyk7CiAg
        ICAgIH0sIHRoaXMpOwogICAgfQoKICAgIHJldHVybiB0aGlzLl9zdXBlcihh
        cnJheSwgaWR4LCByZW1vdmVkQ291bnQsIGFkZGVkQ291bnQpOwogIH0sCgog
        IGluc2VydEl0ZW1Tb3J0ZWQ6IGZ1bmN0aW9uKGl0ZW0pIHsKICAgIHZhciBh
        cnJhbmdlZENvbnRlbnQgPSBnZXQodGhpcywgJ2FycmFuZ2VkQ29udGVudCcp
        OwogICAgdmFyIGxlbmd0aCA9IGdldChhcnJhbmdlZENvbnRlbnQsICdsZW5n
        dGgnKTsKCiAgICB2YXIgaWR4ID0gdGhpcy5fYmluYXJ5U2VhcmNoKGl0ZW0s
        IDAsIGxlbmd0aCk7CiAgICBhcnJhbmdlZENvbnRlbnQuaW5zZXJ0QXQoaWR4
        LCBpdGVtKTsKICB9LAoKICBjb250ZW50SXRlbVNvcnRQcm9wZXJ0eURpZENo
        YW5nZTogZnVuY3Rpb24oaXRlbSkgewogICAgdmFyIGFycmFuZ2VkQ29udGVu
        dCA9IGdldCh0aGlzLCAnYXJyYW5nZWRDb250ZW50JyksCiAgICAgICAgb2xk
        SW5kZXggPSBhcnJhbmdlZENvbnRlbnQuaW5kZXhPZihpdGVtKSwKICAgICAg
        ICBsZWZ0SXRlbSA9IGFycmFuZ2VkQ29udGVudC5vYmplY3RBdChvbGRJbmRl
        eCAtIDEpLAogICAgICAgIHJpZ2h0SXRlbSA9IGFycmFuZ2VkQ29udGVudC5v
        YmplY3RBdChvbGRJbmRleCArIDEpLAogICAgICAgIGxlZnRSZXN1bHQgPSBs
        ZWZ0SXRlbSAmJiB0aGlzLm9yZGVyQnkoaXRlbSwgbGVmdEl0ZW0pLAogICAg
        ICAgIHJpZ2h0UmVzdWx0ID0gcmlnaHRJdGVtICYmIHRoaXMub3JkZXJCeShp
        dGVtLCByaWdodEl0ZW0pOwoKICAgIGlmIChsZWZ0UmVzdWx0IDwgMCB8fCBy
        aWdodFJlc3VsdCA+IDApIHsKICAgICAgYXJyYW5nZWRDb250ZW50LnJlbW92
        ZU9iamVjdChpdGVtKTsKICAgICAgdGhpcy5pbnNlcnRJdGVtU29ydGVkKGl0
        ZW0pOwogICAgfQogIH0sCgogIF9iaW5hcnlTZWFyY2g6IGZ1bmN0aW9uKGl0
        ZW0sIGxvdywgaGlnaCkgewogICAgdmFyIG1pZCwgbWlkSXRlbSwgcmVzLCBh
        cnJhbmdlZENvbnRlbnQ7CgogICAgaWYgKGxvdyA9PT0gaGlnaCkgewogICAg
        ICByZXR1cm4gbG93OwogICAgfQoKICAgIGFycmFuZ2VkQ29udGVudCA9IGdl
        dCh0aGlzLCAnYXJyYW5nZWRDb250ZW50Jyk7CgogICAgbWlkID0gbG93ICsg
        TWF0aC5mbG9vcigoaGlnaCAtIGxvdykgLyAyKTsKICAgIG1pZEl0ZW0gPSBh
        cnJhbmdlZENvbnRlbnQub2JqZWN0QXQobWlkKTsKCiAgICByZXMgPSB0aGlz
        Lm9yZGVyQnkobWlkSXRlbSwgaXRlbSk7CgogICAgaWYgKHJlcyA8IDApIHsK
        ICAgICAgcmV0dXJuIHRoaXMuX2JpbmFyeVNlYXJjaChpdGVtLCBtaWQrMSwg
        aGlnaCk7CiAgICB9IGVsc2UgaWYgKHJlcyA+IDApIHsKICAgICAgcmV0dXJu
        IHRoaXMuX2JpbmFyeVNlYXJjaChpdGVtLCBsb3csIG1pZCk7CiAgICB9Cgog
        ICAgcmV0dXJuIG1pZDsKICB9Cn0pOwoKfSkoKTsKCgoKKGZ1bmN0aW9uKCkg
        ewovKioKQG1vZHVsZSBlbWJlcgpAc3VibW9kdWxlIGVtYmVyLXJ1bnRpbWUK
        Ki8KCnZhciBnZXQgPSBFbWJlci5nZXQsIHNldCA9IEVtYmVyLnNldCwgZm9y
        RWFjaCA9IEVtYmVyLkVudW1lcmFibGVVdGlscy5mb3JFYWNoLAogICAgcmVw
        bGFjZSA9IEVtYmVyLkVudW1lcmFibGVVdGlscy5yZXBsYWNlOwoKLyoqCiAg
        YEVtYmVyLkFycmF5Q29udHJvbGxlcmAgcHJvdmlkZXMgYSB3YXkgZm9yIHlv
        dSB0byBwdWJsaXNoIGEgY29sbGVjdGlvbiBvZgogIG9iamVjdHMgc28gdGhh
        dCB5b3UgY2FuIGVhc2lseSBiaW5kIHRvIHRoZSBjb2xsZWN0aW9uIGZyb20g
        YSBIYW5kbGViYXJzCiAgYCNlYWNoYCBoZWxwZXIsIGFuIGBFbWJlci5Db2xs
        ZWN0aW9uVmlld2AsIG9yIG90aGVyIGNvbnRyb2xsZXJzLgoKICBUaGUgYWR2
        YW50YWdlIG9mIHVzaW5nIGFuIGBBcnJheUNvbnRyb2xsZXJgIGlzIHRoYXQg
        eW91IG9ubHkgaGF2ZSB0byBzZXQgdXAKICB5b3VyIHZpZXcgYmluZGluZ3Mg
        b25jZTsgdG8gY2hhbmdlIHdoYXQncyBkaXNwbGF5ZWQsIHNpbXBseSBzd2Fw
        IG91dCB0aGUKICBgY29udGVudGAgcHJvcGVydHkgb24gdGhlIGNvbnRyb2xs
        ZXIuCgogIEZvciBleGFtcGxlLCBpbWFnaW5lIHlvdSB3YW50ZWQgdG8gZGlz
        cGxheSBhIGxpc3Qgb2YgaXRlbXMgZmV0Y2hlZCB2aWEgYW4gWEhSCiAgcmVx
        dWVzdC4gQ3JlYXRlIGFuIGBFbWJlci5BcnJheUNvbnRyb2xsZXJgIGFuZCBz
        ZXQgaXRzIGBjb250ZW50YCBwcm9wZXJ0eToKCiAgYGBgamF2YXNjcmlwdAog
        IE15QXBwLmxpc3RDb250cm9sbGVyID0gRW1iZXIuQXJyYXlDb250cm9sbGVy
        LmNyZWF0ZSgpOwoKICAkLmdldCgncGVvcGxlLmpzb24nLCBmdW5jdGlvbihk
        YXRhKSB7CiAgICBNeUFwcC5saXN0Q29udHJvbGxlci5zZXQoJ2NvbnRlbnQn
        LCBkYXRhKTsKICB9KTsKICBgYGAKCiAgVGhlbiwgY3JlYXRlIGEgdmlldyB0
        aGF0IGJpbmRzIHRvIHlvdXIgbmV3IGNvbnRyb2xsZXI6CgogIGBgYGhhbmRs
        ZWJhcnMKICB7eyNlYWNoIE15QXBwLmxpc3RDb250cm9sbGVyfX0KICAgIHt7
        Zmlyc3ROYW1lfX0ge3tsYXN0TmFtZX19CiAge3svZWFjaH19CiAgYGBgCgog
        IEFsdGhvdWdoIHlvdSBhcmUgYmluZGluZyB0byB0aGUgY29udHJvbGxlciwg
        dGhlIGJlaGF2aW9yIG9mIHRoaXMgY29udHJvbGxlcgogIGlzIHRvIHBhc3Mg
        dGhyb3VnaCBhbnkgbWV0aG9kcyBvciBwcm9wZXJ0aWVzIHRvIHRoZSB1bmRl
        cmx5aW5nIGFycmF5LiBUaGlzCiAgY2FwYWJpbGl0eSBjb21lcyBmcm9tIGBF
        bWJlci5BcnJheVByb3h5YCwgd2hpY2ggdGhpcyBjbGFzcyBpbmhlcml0cyBm
        cm9tLgoKICBTb21ldGltZXMgeW91IHdhbnQgdG8gZGlzcGxheSBjb21wdXRl
        ZCBwcm9wZXJ0aWVzIHdpdGhpbiB0aGUgYm9keSBvZiBhbgogIGAjZWFjaGAg
        aGVscGVyIHRoYXQgZGVwZW5kIG9uIHRoZSB1bmRlcmx5aW5nIGl0ZW1zIGlu
        IGBjb250ZW50YCwgYnV0IGFyZSBub3QKICBwcmVzZW50IG9uIHRob3NlIGl0
        ZW1zLiAgIFRvIGRvIHRoaXMsIHNldCBgaXRlbUNvbnRyb2xsZXJgIHRvIHRo
        ZSBuYW1lIG9mIGEKICBjb250cm9sbGVyIChwcm9iYWJseSBhbiBgT2JqZWN0
        Q29udHJvbGxlcmApIHRoYXQgd2lsbCB3cmFwIGVhY2ggaW5kaXZpZHVhbCBp
        dGVtLgoKICBGb3IgZXhhbXBsZToKCiAgYGBgaGFuZGxlYmFycwogICAge3sj
        ZWFjaCBwb3N0IGluIGNvbnRyb2xsZXJ9fQogICAgICA8bGk+e3t0aXRsZX19
        ICh7e3RpdGxlTGVuZ3RofX0gY2hhcmFjdGVycyk8L2xpPgogICAge3svZWFj
        aH19CiAgYGBgCgogIGBgYGphdmFzY3JpcHQKICBBcHAuUG9zdHNDb250cm9s
        bGVyID0gRW1iZXIuQXJyYXlDb250cm9sbGVyLmV4dGVuZCh7CiAgICBpdGVt
        Q29udHJvbGxlcjogJ3Bvc3QnCiAgfSk7CgogIEFwcC5Qb3N0Q29udHJvbGxl
        ciA9IEVtYmVyLk9iamVjdENvbnRyb2xsZXIuZXh0ZW5kKHsKICAgIC8vIHRo
        ZSBgdGl0bGVgIHByb3BlcnR5IHdpbGwgYmUgcHJveGllZCB0byB0aGUgdW5k
        ZXJseWluZyBwb3N0LgoKICAgIHRpdGxlTGVuZ3RoOiBmdW5jdGlvbigpIHsK
        ICAgICAgcmV0dXJuIHRoaXMuZ2V0KCd0aXRsZScpLmxlbmd0aDsKICAgIH0u
        cHJvcGVydHkoJ3RpdGxlJykKICB9KTsKICBgYGAKCiAgSW4gc29tZSBjYXNl
        cyBpdCBpcyBoZWxwZnVsIHRvIHJldHVybiBhIGRpZmZlcmVudCBgaXRlbUNv
        bnRyb2xsZXJgIGRlcGVuZGluZwogIG9uIHRoZSBwYXJ0aWN1bGFyIGl0ZW0u
        ICBTdWJjbGFzc2VzIGNhbiBkbyB0aGlzIGJ5IG92ZXJyaWRpbmcKICBgbG9v
        a3VwSXRlbUNvbnRyb2xsZXJgLgoKICBGb3IgZXhhbXBsZToKCiAgYGBgamF2
        YXNjcmlwdAogIEFwcC5NeUFycmF5Q29udHJvbGxlciA9IEVtYmVyLkFycmF5
        Q29udHJvbGxlci5leHRlbmQoewogICAgbG9va3VwSXRlbUNvbnRyb2xsZXI6
        IGZ1bmN0aW9uKCBvYmplY3QgKSB7CiAgICAgIGlmIChvYmplY3QuZ2V0KCdp
        c1NwZWNpYWwnKSkgewogICAgICAgIHJldHVybiAic3BlY2lhbCI7IC8vIHVz
        ZSBBcHAuU3BlY2lhbENvbnRyb2xsZXIKICAgICAgfSBlbHNlIHsKICAgICAg
        ICByZXR1cm4gInJlZ3VsYXIiOyAvLyB1c2UgQXBwLlJlZ3VsYXJDb250cm9s
        bGVyCiAgICAgIH0KICAgIH0KICB9KTsKICBgYGAKCiAgVGhlIGl0ZW1Db250
        cm9sbGVyIGluc3RhbmNlcyB3aWxsIGhhdmUgYSBgcGFyZW50Q29udHJvbGxl
        cmAgcHJvcGVydHkgc2V0IHRvCiAgZWl0aGVyIHRoZSB0aGUgYHBhcmVudENv
        bnRyb2xsZXJgIHByb3BlcnR5IG9mIHRoZSBgQXJyYXlDb250cm9sbGVyYAog
        IG9yIHRvIHRoZSBgQXJyYXlDb250cm9sbGVyYCBpbnN0YW5jZSBpdHNlbGYu
        CgogIEBjbGFzcyBBcnJheUNvbnRyb2xsZXIKICBAbmFtZXNwYWNlIEVtYmVy
        CiAgQGV4dGVuZHMgRW1iZXIuQXJyYXlQcm94eQogIEB1c2VzIEVtYmVyLlNv
        cnRhYmxlTWl4aW4KICBAdXNlcyBFbWJlci5Db250cm9sbGVyTWl4aW4KKi8K
        CkVtYmVyLkFycmF5Q29udHJvbGxlciA9IEVtYmVyLkFycmF5UHJveHkuZXh0
        ZW5kKEVtYmVyLkNvbnRyb2xsZXJNaXhpbiwKICBFbWJlci5Tb3J0YWJsZU1p
        eGluLCB7CgogIC8qKgogICAgVGhlIGNvbnRyb2xsZXIgdXNlZCB0byB3cmFw
        IGl0ZW1zLCBpZiBhbnkuCgogICAgQHByb3BlcnR5IGl0ZW1Db250cm9sbGVy
        CiAgICBAdHlwZSBTdHJpbmcKICAgIEBkZWZhdWx0IG51bGwKICAqLwogIGl0
        ZW1Db250cm9sbGVyOiBudWxsLAoKICAvKioKICAgIFJldHVybiB0aGUgbmFt
        ZSBvZiB0aGUgY29udHJvbGxlciB0byB3cmFwIGl0ZW1zLCBvciBgbnVsbGAg
        aWYgaXRlbXMgc2hvdWxkCiAgICBiZSByZXR1cm5lZCBkaXJlY3RseS4gIFRo
        ZSBkZWZhdWx0IGltcGxlbWVudGF0aW9uIHNpbXBseSByZXR1cm5zIHRoZQog
        ICAgYGl0ZW1Db250cm9sbGVyYCBwcm9wZXJ0eSwgYnV0IHN1YmNsYXNzZXMg
        Y2FuIG92ZXJyaWRlIHRoaXMgbWV0aG9kIHRvIHJldHVybgogICAgZGlmZmVy
        ZW50IGNvbnRyb2xsZXJzIGZvciBkaWZmZXJlbnQgb2JqZWN0cy4KCiAgICBG
        b3IgZXhhbXBsZToKCiAgICBgYGBqYXZhc2NyaXB0CiAgICBBcHAuTXlBcnJh
        eUNvbnRyb2xsZXIgPSBFbWJlci5BcnJheUNvbnRyb2xsZXIuZXh0ZW5kKHsK
        ICAgICAgbG9va3VwSXRlbUNvbnRyb2xsZXI6IGZ1bmN0aW9uKCBvYmplY3Qg
        KSB7CiAgICAgICAgaWYgKG9iamVjdC5nZXQoJ2lzU3BlY2lhbCcpKSB7CiAg
        ICAgICAgICByZXR1cm4gInNwZWNpYWwiOyAvLyB1c2UgQXBwLlNwZWNpYWxD
        b250cm9sbGVyCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJldHVybiAi
        cmVndWxhciI7IC8vIHVzZSBBcHAuUmVndWxhckNvbnRyb2xsZXIKICAgICAg
        ICB9CiAgICAgIH0KICAgIH0pOwogICAgYGBgCgogICAgQG1ldGhvZCBsb29r
        dXBJdGVtQ29udHJvbGxlcgogICAgQHBhcmFtIHtPYmplY3R9IG9iamVjdAog
        ICAgQHJldHVybiB7U3RyaW5nfQogICovCiAgbG9va3VwSXRlbUNvbnRyb2xs
        ZXI6IGZ1bmN0aW9uKG9iamVjdCkgewogICAgcmV0dXJuIGdldCh0aGlzLCAn
        aXRlbUNvbnRyb2xsZXInKTsKICB9LAoKICBvYmplY3RBdENvbnRlbnQ6IGZ1
        bmN0aW9uKGlkeCkgewogICAgdmFyIGxlbmd0aCA9IGdldCh0aGlzLCAnbGVu
        Z3RoJyksCiAgICAgICAgYXJyYW5nZWRDb250ZW50ID0gZ2V0KHRoaXMsJ2Fy
        cmFuZ2VkQ29udGVudCcpLAogICAgICAgIG9iamVjdCA9IGFycmFuZ2VkQ29u
        dGVudCAmJiBhcnJhbmdlZENvbnRlbnQub2JqZWN0QXQoaWR4KTsKCiAgICBp
        ZiAoaWR4ID49IDAgJiYgaWR4IDwgbGVuZ3RoKSB7CiAgICAgIHZhciBjb250
        cm9sbGVyQ2xhc3MgPSB0aGlzLmxvb2t1cEl0ZW1Db250cm9sbGVyKG9iamVj
        dCk7CiAgICAgIGlmIChjb250cm9sbGVyQ2xhc3MpIHsKICAgICAgICByZXR1
        cm4gdGhpcy5jb250cm9sbGVyQXQoaWR4LCBvYmplY3QsIGNvbnRyb2xsZXJD
        bGFzcyk7CiAgICAgIH0KICAgIH0KCiAgICAvLyBXaGVuIGBjb250cm9sbGVy
        Q2xhc3NgIGlzIGZhbHN5LCB3ZSBoYXZlIG5vdCBvcHRlZCBpbiB0byB1c2lu
        ZyBpdGVtCiAgICAvLyBjb250cm9sbGVycywgc28gcmV0dXJuIHRoZSBvYmpl
        Y3QgZGlyZWN0bHkuCgogICAgLy8gV2hlbiB0aGUgaW5kZXggaXMgb3V0IG9m
        IHJhbmdlLCB3ZSB3YW50IHRvIHJldHVybiB0aGUgIm91dCBvZiByYW5nZSIK
        ICAgIC8vIHZhbHVlLCB3aGF0ZXZlciB0aGF0IG1pZ2h0IGJlLiAgUmF0aGVy
        IHRoYW4gbWFrZSBhc3N1bXB0aW9ucwogICAgLy8gKGUuZy4gZ3Vlc3Npbmcg
        YG51bGxgIG9yIGB1bmRlZmluZWRgKSB3ZSBkZWZlciB0aGlzIHRvIGBhcnJh
        bmdlZENvbnRlbnRgLgogICAgcmV0dXJuIG9iamVjdDsKICB9LAoKICBhcnJh
        bmdlZENvbnRlbnREaWRDaGFuZ2U6IGZ1bmN0aW9uKCkgewogICAgdGhpcy5f
        c3VwZXIoKTsKICAgIHRoaXMuX3Jlc2V0U3ViQ29udHJvbGxlcnMoKTsKICB9
        LAoKICBhcnJheUNvbnRlbnREaWRDaGFuZ2U6IGZ1bmN0aW9uKGlkeCwgcmVt
        b3ZlZENudCwgYWRkZWRDbnQpIHsKICAgIHZhciBzdWJDb250cm9sbGVycyA9
        IGdldCh0aGlzLCAnX3N1YkNvbnRyb2xsZXJzJyksCiAgICAgICAgc3ViQ29u
        dHJvbGxlcnNUb1JlbW92ZSA9IHN1YkNvbnRyb2xsZXJzLnNsaWNlKGlkeCwg
        aWR4K3JlbW92ZWRDbnQpOwoKICAgIGZvckVhY2goc3ViQ29udHJvbGxlcnNU
        b1JlbW92ZSwgZnVuY3Rpb24oc3ViQ29udHJvbGxlcikgewogICAgICBpZiAo
        c3ViQ29udHJvbGxlcikgeyBzdWJDb250cm9sbGVyLmRlc3Ryb3koKTsgfQog
        ICAgfSk7CgogICAgcmVwbGFjZShzdWJDb250cm9sbGVycywgaWR4LCByZW1v
        dmVkQ250LCBuZXcgQXJyYXkoYWRkZWRDbnQpKTsKCiAgICAvLyBUaGUgc2hh
        ZG93IGFycmF5IG9mIHN1YmNvbnRyb2xsZXJzIG11c3QgYmUgdXBkYXRlZCBi
        ZWZvcmUgd2UgdHJpZ2dlcgogICAgLy8gb2JzZXJ2ZXJzLCBvdGhlcndpc2Ug
        b2JzZXJ2ZXJzIHdpbGwgZ2V0IHRoZSB3cm9uZyBzdWJjb250YWluZXIgd2hl
        bgogICAgLy8gY2FsbGluZyBgb2JqZWN0QXRgCiAgICB0aGlzLl9zdXBlcihp
        ZHgsIHJlbW92ZWRDbnQsIGFkZGVkQ250KTsKICB9LAoKICBpbml0OiBmdW5j
        dGlvbigpIHsKICAgIHRoaXMuX3N1cGVyKCk7CgogICAgdGhpcy5zZXQoJ19z
        dWJDb250cm9sbGVycycsIEVtYmVyLkEoKSk7CiAgfSwKCiAgY29udGVudDog
        RW1iZXIuY29tcHV0ZWQoZnVuY3Rpb24gKCkgewogICAgcmV0dXJuIEVtYmVy
        LkEoKTsKICB9KSwKCiAgY29udHJvbGxlckF0OiBmdW5jdGlvbihpZHgsIG9i
        amVjdCwgY29udHJvbGxlckNsYXNzKSB7CiAgICB2YXIgY29udGFpbmVyID0g
        Z2V0KHRoaXMsICdjb250YWluZXInKSwKICAgICAgICBzdWJDb250cm9sbGVy
        cyA9IGdldCh0aGlzLCAnX3N1YkNvbnRyb2xsZXJzJyksCiAgICAgICAgc3Vi
        Q29udHJvbGxlciA9IHN1YkNvbnRyb2xsZXJzW2lkeF0sCiAgICAgICAgZmFj
        dG9yeSwgZnVsbE5hbWU7CgogICAgaWYgKHN1YkNvbnRyb2xsZXIpIHsgcmV0
        dXJuIHN1YkNvbnRyb2xsZXI7IH0KCiAgICBmdWxsTmFtZSA9ICJjb250cm9s
        bGVyOiIgKyBjb250cm9sbGVyQ2xhc3M7CgogICAgaWYgKCFjb250YWluZXIu
        aGFzKGZ1bGxOYW1lKSkgewogICAgICB0aHJvdyBuZXcgRW1iZXIuRXJyb3Io
        J0NvdWxkIG5vdCByZXNvbHZlIGl0ZW1Db250cm9sbGVyOiAiJyArIGNvbnRy
        b2xsZXJDbGFzcyArICciJyk7CiAgICB9CgogICAgc3ViQ29udHJvbGxlciA9
        IGNvbnRhaW5lci5sb29rdXBGYWN0b3J5KGZ1bGxOYW1lKS5jcmVhdGUoewog
        ICAgICB0YXJnZXQ6IHRoaXMsCiAgICAgIHBhcmVudENvbnRyb2xsZXI6IGdl
        dCh0aGlzLCAncGFyZW50Q29udHJvbGxlcicpIHx8IHRoaXMsCiAgICAgIGNv
        bnRlbnQ6IG9iamVjdAogICAgfSk7CgogICAgc3ViQ29udHJvbGxlcnNbaWR4
        XSA9IHN1YkNvbnRyb2xsZXI7CgogICAgcmV0dXJuIHN1YkNvbnRyb2xsZXI7
        CiAgfSwKCiAgX3N1YkNvbnRyb2xsZXJzOiBudWxsLAoKICBfcmVzZXRTdWJD
        b250cm9sbGVyczogZnVuY3Rpb24oKSB7CiAgICB2YXIgc3ViQ29udHJvbGxl
        cnMgPSBnZXQodGhpcywgJ19zdWJDb250cm9sbGVycycpOwogICAgaWYgKHN1
        YkNvbnRyb2xsZXJzKSB7CiAgICAgIGZvckVhY2goc3ViQ29udHJvbGxlcnMs
        IGZ1bmN0aW9uKHN1YkNvbnRyb2xsZXIpIHsKICAgICAgICBpZiAoc3ViQ29u
        dHJvbGxlcikgeyBzdWJDb250cm9sbGVyLmRlc3Ryb3koKTsgfQogICAgICB9
        KTsKICAgIH0KCiAgICB0aGlzLnNldCgnX3N1YkNvbnRyb2xsZXJzJywgRW1i
        ZXIuQSgpKTsKICB9Cn0pOwoKfSkoKTsKCgoKKGZ1bmN0aW9uKCkgewovKioK
        QG1vZHVsZSBlbWJlcgpAc3VibW9kdWxlIGVtYmVyLXJ1bnRpbWUKKi8KCi8q
        KgogIGBFbWJlci5PYmplY3RDb250cm9sbGVyYCBpcyBwYXJ0IG9mIEVtYmVy
        J3MgQ29udHJvbGxlciBsYXllci4gSXQgaXMgaW50ZW5kZWQKICB0byB3cmFw
        IGEgc2luZ2xlIG9iamVjdCwgcHJveHlpbmcgdW5oYW5kbGVkIGF0dGVtcHRz
        IHRvIGBnZXRgIGFuZCBgc2V0YCB0byB0aGUgdW5kZXJseWluZwogIGNvbnRl
        bnQgb2JqZWN0LCBhbmQgdG8gZm9yd2FyZCB1bmhhbmRsZWQgYWN0aW9uIGF0
        dGVtcHRzIHRvIGl0cyBgdGFyZ2V0YC4KCiAgYEVtYmVyLk9iamVjdENvbnRy
        b2xsZXJgIGRlcml2ZXMgdGhpcyBmdW5jdGlvbmFsaXR5IGZyb20gaXRzIHN1
        cGVyY2xhc3MKICBgRW1iZXIuT2JqZWN0UHJveHlgIGFuZCB0aGUgYEVtYmVy
        LkNvbnRyb2xsZXJNaXhpbmAgbWl4aW4uCgogIEBjbGFzcyBPYmplY3RDb250
        cm9sbGVyCiAgQG5hbWVzcGFjZSBFbWJlcgogIEBleHRlbmRzIEVtYmVyLk9i
        amVjdFByb3h5CiAgQHVzZXMgRW1iZXIuQ29udHJvbGxlck1peGluCioqLwpF
        bWJlci5PYmplY3RDb250cm9sbGVyID0gRW1iZXIuT2JqZWN0UHJveHkuZXh0
        ZW5kKEVtYmVyLkNvbnRyb2xsZXJNaXhpbik7Cgp9KSgpOwoKCgooZnVuY3Rp
        b24oKSB7Cgp9KSgpOwoKCgooZnVuY3Rpb24oKSB7Ci8qKgpFbWJlciBSdW50
        aW1lCgpAbW9kdWxlIGVtYmVyCkBzdWJtb2R1bGUgZW1iZXItcnVudGltZQpA
        cmVxdWlyZXMgZW1iZXItbWV0YWwKKi8KCn0pKCk7CgooZnVuY3Rpb24oKSB7
        Ci8qKgpAbW9kdWxlIGVtYmVyCkBzdWJtb2R1bGUgZW1iZXItdmlld3MKKi8K
        CnZhciBqUXVlcnkgPSB0aGlzLmpRdWVyeSB8fCAoRW1iZXIuaW1wb3J0cyAm
        JiBFbWJlci5pbXBvcnRzLmpRdWVyeSk7CmlmICghalF1ZXJ5ICYmIHR5cGVv
        ZiByZXF1aXJlID09PSAnZnVuY3Rpb24nKSB7CiAgalF1ZXJ5ID0gcmVxdWly
        ZSgnanF1ZXJ5Jyk7Cn0KCkVtYmVyLmFzc2VydCgiRW1iZXIgVmlld3MgcmVx
        dWlyZSBqUXVlcnkgMS43LCAxLjgsIDEuOSwgMS4xMCwgb3IgMi4wIiwgalF1
        ZXJ5ICYmIChqUXVlcnkoKS5qcXVlcnkubWF0Y2goL14oKDFcLig3fDh8OXwx
        MCkpfDIuMCkoXC5cZCspPyhwcmV8cmNcZD8pPy8pIHx8IEVtYmVyLkVOVi5G
        T1JDRV9KUVVFUlkpKTsKCi8qKgogIEFsaWFzIGZvciBqUXVlcnkKCiAgQG1l
        dGhvZCAkCiAgQGZvciBFbWJlcgoqLwpFbWJlci4kID0galF1ZXJ5OwoKfSko
        KTsKCgoKKGZ1bmN0aW9uKCkgewovKioKQG1vZHVsZSBlbWJlcgpAc3VibW9k
        dWxlIGVtYmVyLXZpZXdzCiovCmlmIChFbWJlci4kKSB7CiAgLy8gaHR0cDov
        L3d3dy53aGF0d2cub3JnL3NwZWNzL3dlYi1hcHBzL2N1cnJlbnQtd29yay9t
        dWx0aXBhZ2UvZG5kLmh0bWwjZG5kZXZlbnRzCiAgdmFyIGRyYWdFdmVudHMg
        PSBFbWJlci5TdHJpbmcudygnZHJhZ3N0YXJ0IGRyYWcgZHJhZ2VudGVyIGRy
        YWdsZWF2ZSBkcmFnb3ZlciBkcm9wIGRyYWdlbmQnKTsKCiAgLy8gQ29waWVz
        IHRoZSBgZGF0YVRyYW5zZmVyYCBwcm9wZXJ0eSBmcm9tIGEgYnJvd3NlciBl
        dmVudCBvYmplY3Qgb250byB0aGUKICAvLyBqUXVlcnkgZXZlbnQgb2JqZWN0
        IGZvciB0aGUgc3BlY2lmaWVkIGV2ZW50cwogIEVtYmVyLkVudW1lcmFibGVV
        dGlscy5mb3JFYWNoKGRyYWdFdmVudHMsIGZ1bmN0aW9uKGV2ZW50TmFtZSkg
        ewogICAgRW1iZXIuJC5ldmVudC5maXhIb29rc1tldmVudE5hbWVdID0geyBw
        cm9wczogWydkYXRhVHJhbnNmZXInXSB9OwogIH0pOwp9Cgp9KSgpOwoKCgoo
        ZnVuY3Rpb24oKSB7Ci8qKgpAbW9kdWxlIGVtYmVyCkBzdWJtb2R1bGUgZW1i
        ZXItdmlld3MKKi8KCi8qIEJFR0lOIE1FVEFNT1JQSCBIRUxQRVJTICovCgov
        LyBJbnRlcm5ldCBFeHBsb3JlciBwcmlvciB0byA5IGRvZXMgbm90IGFsbG93
        IHNldHRpbmcgaW5uZXJIVE1MIGlmIHRoZSBmaXJzdCBlbGVtZW50Ci8vIGlz
        IGEgInplcm8tc2NvcGUiIGVsZW1lbnQuIFRoaXMgcHJvYmxlbSBjYW4gYmUg
        d29ya2VkIGFyb3VuZCBieSBtYWtpbmcKLy8gdGhlIGZpcnN0IG5vZGUgYW4g
        aW52aXNpYmxlIHRleHQgbm9kZS4gV2UsIGxpa2UgTW9kZXJuaXpyLCB1c2Ug
        JnNoeTsKCnZhciBuZWVkc1NoeSA9IHRoaXMuZG9jdW1lbnQgJiYgKGZ1bmN0
        aW9uKCkgewogIHZhciB0ZXN0RWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50
        KCdkaXYnKTsKICB0ZXN0RWwuaW5uZXJIVE1MID0gIjxkaXY+PC9kaXY+IjsK
        ICB0ZXN0RWwuZmlyc3RDaGlsZC5pbm5lckhUTUwgPSAiPHNjcmlwdD48L3Nj
        cmlwdD4iOwogIHJldHVybiB0ZXN0RWwuZmlyc3RDaGlsZC5pbm5lckhUTUwg
        PT09ICcnOwp9KSgpOwoKLy8gSUUgOCAoYW5kIGxpa2VseSBlYXJsaWVyKSBs
        aWtlcyB0byBtb3ZlIHdoaXRlc3BhY2UgcHJlY2VlZGluZwovLyBhIHNjcmlw
        dCB0YWcgdG8gYXBwZWFyIGFmdGVyIGl0LiBUaGlzIG1lYW5zIHRoYXQgd2Ug
        Y2FuCi8vIGFjY2lkZW50YWxseSByZW1vdmUgd2hpdGVzcGFjZSB3aGVuIHVw
        ZGF0aW5nIGEgbW9ycGguCnZhciBtb3Zlc1doaXRlc3BhY2UgPSB0aGlzLmRv
        Y3VtZW50ICYmIChmdW5jdGlvbigpIHsKICB2YXIgdGVzdEVsID0gZG9jdW1l
        bnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgdGVzdEVsLmlubmVySFRNTCA9
        ICJUZXN0OiA8c2NyaXB0IHR5cGU9J3RleHQveC1wbGFjZWhvbGRlcic+PC9z
        Y3JpcHQ+VmFsdWUiOwogIHJldHVybiB0ZXN0RWwuY2hpbGROb2Rlc1swXS5u
        b2RlVmFsdWUgPT09ICdUZXN0OicgJiYKICAgICAgICAgIHRlc3RFbC5jaGls
        ZE5vZGVzWzJdLm5vZGVWYWx1ZSA9PT0gJyBWYWx1ZSc7Cn0pKCk7CgovLyBV
        c2UgdGhpcyB0byBmaW5kIGNoaWxkcmVuIGJ5IElEIGluc3RlYWQgb2YgdXNp
        bmcgalF1ZXJ5CnZhciBmaW5kQ2hpbGRCeUlkID0gZnVuY3Rpb24oZWxlbWVu
        dCwgaWQpIHsKICBpZiAoZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2lkJykgPT09
        IGlkKSB7IHJldHVybiBlbGVtZW50OyB9CgogIHZhciBsZW4gPSBlbGVtZW50
        LmNoaWxkTm9kZXMubGVuZ3RoLCBpZHgsIG5vZGUsIGZvdW5kOwogIGZvciAo
        aWR4PTA7IGlkeDxsZW47IGlkeCsrKSB7CiAgICBub2RlID0gZWxlbWVudC5j
        aGlsZE5vZGVzW2lkeF07CiAgICBmb3VuZCA9IG5vZGUubm9kZVR5cGUgPT09
        IDEgJiYgZmluZENoaWxkQnlJZChub2RlLCBpZCk7CiAgICBpZiAoZm91bmQp
        IHsgcmV0dXJuIGZvdW5kOyB9CiAgfQp9OwoKdmFyIHNldElubmVySFRNTFdp
        dGhvdXRGaXggPSBmdW5jdGlvbihlbGVtZW50LCBodG1sKSB7CiAgaWYgKG5l
        ZWRzU2h5KSB7CiAgICBodG1sID0gJyZzaHk7JyArIGh0bWw7CiAgfQoKICB2
        YXIgbWF0Y2hlcyA9IFtdOwogIGlmIChtb3Zlc1doaXRlc3BhY2UpIHsKICAg
        IC8vIFJpZ2h0IG5vdyB3ZSBvbmx5IGNoZWNrIGZvciBzY3JpcHQgdGFncyB3
        aXRoIGlkcyB3aXRoIHRoZQogICAgLy8gZ29hbCBvZiB0YXJnZXRpbmcgbW9y
        cGhzLgogICAgaHRtbCA9IGh0bWwucmVwbGFjZSgvKFxzKykoPHNjcmlwdCBp
        ZD0nKFteJ10rKScpL2csIGZ1bmN0aW9uKG1hdGNoLCBzcGFjZXMsIHRhZywg
        aWQpIHsKICAgICAgbWF0Y2hlcy5wdXNoKFtpZCwgc3BhY2VzXSk7CiAgICAg
        IHJldHVybiB0YWc7CiAgICB9KTsKICB9CgogIGVsZW1lbnQuaW5uZXJIVE1M
        ID0gaHRtbDsKCiAgLy8gSWYgd2UgaGF2ZSB0byBkbyBhbnkgd2hpdGVzcGFj
        ZSBhZGp1c3RtZW50cyBkbyB0aGVtIG5vdwogIGlmIChtYXRjaGVzLmxlbmd0
        aCA+IDApIHsKICAgIHZhciBsZW4gPSBtYXRjaGVzLmxlbmd0aCwgaWR4Owog
        ICAgZm9yIChpZHg9MDsgaWR4PGxlbjsgaWR4KyspIHsKICAgICAgdmFyIHNj
        cmlwdCA9IGZpbmRDaGlsZEJ5SWQoZWxlbWVudCwgbWF0Y2hlc1tpZHhdWzBd
        KSwKICAgICAgICAgIG5vZGUgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSht
        YXRjaGVzW2lkeF1bMV0pOwogICAgICBzY3JpcHQucGFyZW50Tm9kZS5pbnNl
        cnRCZWZvcmUobm9kZSwgc2NyaXB0KTsKICAgIH0KICB9CgogIGlmIChuZWVk
        c1NoeSkgewogICAgdmFyIHNoeUVsZW1lbnQgPSBlbGVtZW50LmZpcnN0Q2hp
        bGQ7CiAgICB3aGlsZSAoc2h5RWxlbWVudC5ub2RlVHlwZSA9PT0gMSAmJiAh
        c2h5RWxlbWVudC5ub2RlTmFtZSkgewogICAgICBzaHlFbGVtZW50ID0gc2h5
        RWxlbWVudC5maXJzdENoaWxkOwogICAgfQogICAgaWYgKHNoeUVsZW1lbnQu
        bm9kZVR5cGUgPT09IDMgJiYgc2h5RWxlbWVudC5ub2RlVmFsdWUuY2hhckF0
        KDApID09PSAiXHUwMEFEIikgewogICAgICBzaHlFbGVtZW50Lm5vZGVWYWx1
        ZSA9IHNoeUVsZW1lbnQubm9kZVZhbHVlLnNsaWNlKDEpOwogICAgfQogIH0K
        fTsKCi8qIEVORCBNRVRBTU9SUEggSEVMUEVSUyAqLwoKCnZhciBpbm5lckhU
        TUxUYWdzID0ge307CnZhciBjYW5TZXRJbm5lckhUTUwgPSBmdW5jdGlvbih0
        YWdOYW1lKSB7CiAgaWYgKGlubmVySFRNTFRhZ3NbdGFnTmFtZV0gIT09IHVu
        ZGVmaW5lZCkgewogICAgcmV0dXJuIGlubmVySFRNTFRhZ3NbdGFnTmFtZV07
        CiAgfQoKICB2YXIgY2FuU2V0ID0gdHJ1ZTsKCiAgLy8gSUUgOCBhbmQgZWFy
        bGllciBkb24ndCBhbGxvdyB1cyB0byBkbyBpbm5lckhUTUwgb24gc2VsZWN0
        CiAgaWYgKHRhZ05hbWUudG9Mb3dlckNhc2UoKSA9PT0gJ3NlbGVjdCcpIHsK
        ICAgIHZhciBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NlbGVjdCcp
        OwogICAgc2V0SW5uZXJIVE1MV2l0aG91dEZpeChlbCwgJzxvcHRpb24gdmFs
        dWU9InRlc3QiPlRlc3Q8L29wdGlvbj4nKTsKICAgIGNhblNldCA9IGVsLm9w
        dGlvbnMubGVuZ3RoID09PSAxOwogIH0KCiAgaW5uZXJIVE1MVGFnc1t0YWdO
        YW1lXSA9IGNhblNldDsKCiAgcmV0dXJuIGNhblNldDsKfTsKCnZhciBzZXRJ
        bm5lckhUTUwgPSBmdW5jdGlvbihlbGVtZW50LCBodG1sKSB7CiAgdmFyIHRh
        Z05hbWUgPSBlbGVtZW50LnRhZ05hbWU7CgogIGlmIChjYW5TZXRJbm5lckhU
        TUwodGFnTmFtZSkpIHsKICAgIHNldElubmVySFRNTFdpdGhvdXRGaXgoZWxl
        bWVudCwgaHRtbCk7CiAgfSBlbHNlIHsKICAgIC8vIEZpcmVmb3ggdmVyc2lv
        bnMgPCAxMSBkbyBub3QgaGF2ZSBzdXBwb3J0IGZvciBlbGVtZW50Lm91dGVy
        SFRNTC4KICAgIHZhciBvdXRlckhUTUwgPSBlbGVtZW50Lm91dGVySFRNTCB8
        fCBuZXcgWE1MU2VyaWFsaXplcigpLnNlcmlhbGl6ZVRvU3RyaW5nKGVsZW1l
        bnQpOwogICAgRW1iZXIuYXNzZXJ0KCJDYW4ndCBzZXQgaW5uZXJIVE1MIG9u
        ICIrZWxlbWVudC50YWdOYW1lKyIgaW4gdGhpcyBicm93c2VyIiwgb3V0ZXJI
        VE1MKTsKCiAgICB2YXIgc3RhcnRUYWcgPSBvdXRlckhUTUwubWF0Y2gobmV3
        IFJlZ0V4cCgiPCIrdGFnTmFtZSsiKFtePl0qKT4iLCAnaScpKVswXSwKICAg
        ICAgICBlbmRUYWcgPSAnPC8nK3RhZ05hbWUrJz4nOwoKICAgIHZhciB3cmFw
        cGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICBzZXRJ
        bm5lckhUTUxXaXRob3V0Rml4KHdyYXBwZXIsIHN0YXJ0VGFnICsgaHRtbCAr
        IGVuZFRhZyk7CiAgICBlbGVtZW50ID0gd3JhcHBlci5maXJzdENoaWxkOwog
        ICAgd2hpbGUgKGVsZW1lbnQudGFnTmFtZSAhPT0gdGFnTmFtZSkgewogICAg
        ICBlbGVtZW50ID0gZWxlbWVudC5uZXh0U2libGluZzsKICAgIH0KICB9Cgog
        IHJldHVybiBlbGVtZW50Owp9OwoKZnVuY3Rpb24gaXNTaW1wbGVDbGljayhl
        dmVudCkgewogIHZhciBtb2RpZmllciA9IGV2ZW50LnNoaWZ0S2V5IHx8IGV2
        ZW50Lm1ldGFLZXkgfHwgZXZlbnQuYWx0S2V5IHx8IGV2ZW50LmN0cmxLZXks
        CiAgICAgIHNlY29uZGFyeUNsaWNrID0gZXZlbnQud2hpY2ggPiAxOyAvLyBJ
        RTkgbWF5IHJldHVybiB1bmRlZmluZWQKCiAgcmV0dXJuICFtb2RpZmllciAm
        JiAhc2Vjb25kYXJ5Q2xpY2s7Cn0KCkVtYmVyLlZpZXdVdGlscyA9IHsKICBz
        ZXRJbm5lckhUTUw6IHNldElubmVySFRNTCwKICBpc1NpbXBsZUNsaWNrOiBp
        c1NpbXBsZUNsaWNrCn07Cgp9KSgpOwoKCgooZnVuY3Rpb24oKSB7Ci8qKgpA
        bW9kdWxlIGVtYmVyCkBzdWJtb2R1bGUgZW1iZXItdmlld3MKKi8KCnZhciBn
        ZXQgPSBFbWJlci5nZXQsIHNldCA9IEVtYmVyLnNldDsKCnZhciBDbGFzc1Nl
        dCA9IGZ1bmN0aW9uKCkgewogIHRoaXMuc2VlbiA9IHt9OwogIHRoaXMubGlz
        dCA9IFtdOwp9OwoKQ2xhc3NTZXQucHJvdG90eXBlID0gewogIGFkZDogZnVu
        Y3Rpb24oc3RyaW5nKSB7CiAgICBpZiAoc3RyaW5nIGluIHRoaXMuc2Vlbikg
        eyByZXR1cm47IH0KICAgIHRoaXMuc2VlbltzdHJpbmddID0gdHJ1ZTsKCiAg
        ICB0aGlzLmxpc3QucHVzaChzdHJpbmcpOwogIH0sCgogIHRvRE9NOiBmdW5j
        dGlvbigpIHsKICAgIHJldHVybiB0aGlzLmxpc3Quam9pbigiICIpOwogIH0K
        fTsKCnZhciBCQURfVEFHX05BTUVfVEVTVF9SRUdFWFAgPSAvW15hLXpBLVow
        LTlcLV0vOwp2YXIgQkFEX1RBR19OQU1FX1JFUExBQ0VfUkVHRVhQID0gL1te
        YS16QS1aMC05XC1dL2c7CgpmdW5jdGlvbiBzdHJpcFRhZ05hbWUodGFnTmFt
        ZSkgewogIGlmICghdGFnTmFtZSkgewogICAgcmV0dXJuIHRhZ05hbWU7CiAg
        fQoKICBpZiAoIUJBRF9UQUdfTkFNRV9URVNUX1JFR0VYUC50ZXN0KHRhZ05h
        bWUpKSB7CiAgICByZXR1cm4gdGFnTmFtZTsKICB9CgogIHJldHVybiB0YWdO
        YW1lLnJlcGxhY2UoQkFEX1RBR19OQU1FX1JFUExBQ0VfUkVHRVhQLCAnJyk7
        Cn0KCnZhciBCQURfQ0hBUlNfUkVHRVhQID0gLyYoPyFcdys7KXxbPD4iJ2Bd
        L2c7CnZhciBQT1NTSUJMRV9DSEFSU19SRUdFWFAgPSAvWyY8PiInYF0vOwoK
        ZnVuY3Rpb24gZXNjYXBlQXR0cmlidXRlKHZhbHVlKSB7CiAgLy8gU3RvbGVu
        IHNoYW1lbGVzc2x5IGZyb20gSGFuZGxlYmFycwoKICB2YXIgZXNjYXBlID0g
        ewogICAgIjwiOiAiJmx0OyIsCiAgICAiPiI6ICImZ3Q7IiwKICAgICciJzog
        IiZxdW90OyIsCiAgICAiJyI6ICImI3gyNzsiLAogICAgImAiOiAiJiN4NjA7
        IgogIH07CgogIHZhciBlc2NhcGVDaGFyID0gZnVuY3Rpb24oY2hyKSB7CiAg
        ICByZXR1cm4gZXNjYXBlW2Nocl0gfHwgIiZhbXA7IjsKICB9OwoKICB2YXIg
        c3RyaW5nID0gdmFsdWUudG9TdHJpbmcoKTsKCiAgaWYoIVBPU1NJQkxFX0NI
        QVJTX1JFR0VYUC50ZXN0KHN0cmluZykpIHsgcmV0dXJuIHN0cmluZzsgfQog
        IHJldHVybiBzdHJpbmcucmVwbGFjZShCQURfQ0hBUlNfUkVHRVhQLCBlc2Nh
        cGVDaGFyKTsKfQoKLy8gSUUgNi83IGhhdmUgYnVncyBhcm9uZCBzZXR0aW5n
        IG5hbWVzIG9uIGlucHV0cyBkdXJpbmcgY3JlYXRpb24uCi8vIEZyb20gaHR0
        cDovL21zZG4ubWljcm9zb2Z0LmNvbS9lbi11cy9saWJyYXJ5L2llL21zNTM2
        Mzg5KHY9dnMuODUpLmFzcHg6Ci8vICJUbyBpbmNsdWRlIHRoZSBOQU1FIGF0
        dHJpYnV0ZSBhdCBydW4gdGltZSBvbiBvYmplY3RzIGNyZWF0ZWQgd2l0aCB0
        aGUgY3JlYXRlRWxlbWVudCBtZXRob2QsIHVzZSB0aGUgZVRhZy4iCnZhciBj
        YW5TZXROYW1lT25JbnB1dHMgPSAoZnVuY3Rpb24oKSB7CiAgdmFyIGRpdiA9
        IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpLAogICAgICBlbCA9IGRv
        Y3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7CgogIGVsLnNldEF0dHJp
        YnV0ZSgnbmFtZScsICdmb28nKTsKICBkaXYuYXBwZW5kQ2hpbGQoZWwpOwoK
        ICByZXR1cm4gISFkaXYuaW5uZXJIVE1MLm1hdGNoKCdmb28nKTsKfSkoKTsK
        Ci8qKgogIGBFbWJlci5SZW5kZXJCdWZmZXJgIGdhdGhlcnMgaW5mb3JtYXRp
        b24gcmVnYXJkaW5nIHRoZSBhIHZpZXcgYW5kIGdlbmVyYXRlcyB0aGUKICBm
        aW5hbCByZXByZXNlbnRhdGlvbi4gYEVtYmVyLlJlbmRlckJ1ZmZlcmAgd2ls
        bCBnZW5lcmF0ZSBIVE1MIHdoaWNoIGNhbiBiZSBwdXNoZWQKICB0byB0aGUg
        RE9NLgoKICAgYGBgamF2YXNjcmlwdAogICB2YXIgYnVmZmVyID0gRW1iZXIu
        UmVuZGVyQnVmZmVyKCdkaXYnKTsKICBgYGAKCiAgQGNsYXNzIFJlbmRlckJ1
        ZmZlcgogIEBuYW1lc3BhY2UgRW1iZXIKICBAY29uc3RydWN0b3IKICBAcGFy
        YW0ge1N0cmluZ30gdGFnTmFtZSB0YWcgbmFtZSAoc3VjaCBhcyAnZGl2JyBv
        ciAncCcpIHVzZWQgZm9yIHRoZSBidWZmZXIKKi8KRW1iZXIuUmVuZGVyQnVm
        ZmVyID0gZnVuY3Rpb24odGFnTmFtZSkgewogIHJldHVybiBuZXcgRW1iZXIu
        X1JlbmRlckJ1ZmZlcih0YWdOYW1lKTsKfTsKCkVtYmVyLl9SZW5kZXJCdWZm
        ZXIgPSBmdW5jdGlvbih0YWdOYW1lKSB7CiAgdGhpcy50YWdOYW1lcyA9IFt0
        YWdOYW1lIHx8IG51bGxdOwogIHRoaXMuYnVmZmVyID0gIiI7Cn07CgpFbWJl
        ci5fUmVuZGVyQnVmZmVyLnByb3RvdHlwZSA9Ci8qKiBAc2NvcGUgRW1iZXIu
        UmVuZGVyQnVmZmVyLnByb3RvdHlwZSAqLyB7CgogIC8vIFRoZSByb290IHZp
        ZXcncyBlbGVtZW50CiAgX2VsZW1lbnQ6IG51bGwsCgogIF9oYXNFbGVtZW50
        OiB0cnVlLAoKICAvKioKICAgIEBwcml2YXRlCgogICAgQW4gaW50ZXJuYWwg
        c2V0IHVzZWQgdG8gZGUtZHVwZSBjbGFzcyBuYW1lcyB3aGVuIGBhZGRDbGFz
        cygpYCBpcwogICAgdXNlZC4gQWZ0ZXIgZWFjaCBjYWxsIHRvIGBhZGRDbGFz
        cygpYCwgdGhlIGBjbGFzc2VzYCBwcm9wZXJ0eQogICAgd2lsbCBiZSB1cGRh
        dGVkLgoKICAgIEBwcm9wZXJ0eSBlbGVtZW50Q2xhc3NlcwogICAgQHR5cGUg
        QXJyYXkKICAgIEBkZWZhdWx0IFtdCiAgKi8KICBlbGVtZW50Q2xhc3Nlczog
        bnVsbCwKCiAgLyoqCiAgICBBcnJheSBvZiBjbGFzcyBuYW1lcyB3aGljaCB3
        aWxsIGJlIGFwcGxpZWQgaW4gdGhlIGNsYXNzIGF0dHJpYnV0ZS4KCiAgICBZ
        b3UgY2FuIHVzZSBgc2V0Q2xhc3NlcygpYCB0byBzZXQgdGhpcyBwcm9wZXJ0
        eSBkaXJlY3RseS4gSWYgeW91CiAgICB1c2UgYGFkZENsYXNzKClgLCBpdCB3
        aWxsIGJlIG1haW50YWluZWQgZm9yIHlvdS4KCiAgICBAcHJvcGVydHkgY2xh
        c3NlcwogICAgQHR5cGUgQXJyYXkKICAgIEBkZWZhdWx0IFtdCiAgKi8KICBj
        bGFzc2VzOiBudWxsLAoKICAvKioKICAgIFRoZSBpZCBpbiBvZiB0aGUgZWxl
        bWVudCwgdG8gYmUgYXBwbGllZCBpbiB0aGUgaWQgYXR0cmlidXRlLgoKICAg
        IFlvdSBzaG91bGQgbm90IHNldCB0aGlzIHByb3BlcnR5IHlvdXJzZWxmLCBy
        YXRoZXIsIHlvdSBzaG91bGQgdXNlCiAgICB0aGUgYGlkKClgIG1ldGhvZCBv
        ZiBgRW1iZXIuUmVuZGVyQnVmZmVyYC4KCiAgICBAcHJvcGVydHkgZWxlbWVu
        dElkCiAgICBAdHlwZSBTdHJpbmcKICAgIEBkZWZhdWx0IG51bGwKICAqLwog
        IGVsZW1lbnRJZDogbnVsbCwKCiAgLyoqCiAgICBBIGhhc2gga2V5ZWQgb24g
        dGhlIG5hbWUgb2YgdGhlIGF0dHJpYnV0ZSBhbmQgd2hvc2UgdmFsdWUgd2ls
        bCBiZQogICAgYXBwbGllZCB0byB0aGF0IGF0dHJpYnV0ZS4gRm9yIGV4YW1w
        bGUsIGlmIHlvdSB3YW50ZWQgdG8gYXBwbHkgYQogICAgYGRhdGEtdmlldz0i
        Rm9vLmJhciJgIHByb3BlcnR5IHRvIGFuIGVsZW1lbnQsIHlvdSB3b3VsZCBz
        ZXQgdGhlCiAgICBlbGVtZW50QXR0cmlidXRlcyBoYXNoIHRvIGB7J2RhdGEt
        dmlldyc6J0Zvby5iYXInfWAuCgogICAgWW91IHNob3VsZCBub3QgbWFpbnRh
        aW4gdGhpcyBoYXNoIHlvdXJzZWxmLCByYXRoZXIsIHlvdSBzaG91bGQgdXNl
        CiAgICB0aGUgYGF0dHIoKWAgbWV0aG9kIG9mIGBFbWJlci5SZW5kZXJCdWZm
        ZXJgLgoKICAgIEBwcm9wZXJ0eSBlbGVtZW50QXR0cmlidXRlcwogICAgQHR5
        cGUgSGFzaAogICAgQGRlZmF1bHQge30KICAqLwogIGVsZW1lbnRBdHRyaWJ1
        dGVzOiBudWxsLAoKICAvKioKICAgIEEgaGFzaCBrZXllZCBvbiB0aGUgbmFt
        ZSBvZiB0aGUgcHJvcGVydGllcyBhbmQgd2hvc2UgdmFsdWUgd2lsbCBiZQog
        ICAgYXBwbGllZCB0byB0aGF0IHByb3BlcnR5LiBGb3IgZXhhbXBsZSwgaWYg
        eW91IHdhbnRlZCB0byBhcHBseSBhCiAgICBgY2hlY2tlZD10cnVlYCBwcm9w
        ZXJ0eSB0byBhbiBlbGVtZW50LCB5b3Ugd291bGQgc2V0IHRoZQogICAgZWxl
        bWVudFByb3BlcnRpZXMgaGFzaCB0byBgeydjaGVja2VkJzp0cnVlfWAuCgog
        ICAgWW91IHNob3VsZCBub3QgbWFpbnRhaW4gdGhpcyBoYXNoIHlvdXJzZWxm
        LCByYXRoZXIsIHlvdSBzaG91bGQgdXNlCiAgICB0aGUgYHByb3AoKWAgbWV0
        aG9kIG9mIGBFbWJlci5SZW5kZXJCdWZmZXJgLgoKICAgIEBwcm9wZXJ0eSBl
        bGVtZW50UHJvcGVydGllcwogICAgQHR5cGUgSGFzaAogICAgQGRlZmF1bHQg
        e30KICAqLwogIGVsZW1lbnRQcm9wZXJ0aWVzOiBudWxsLAoKICAvKioKICAg
        IFRoZSB0YWduYW1lIG9mIHRoZSBlbGVtZW50IGFuIGluc3RhbmNlIG9mIGBF
        bWJlci5SZW5kZXJCdWZmZXJgIHJlcHJlc2VudHMuCgogICAgVXN1YWxseSwg
        dGhpcyBnZXRzIHNldCBhcyB0aGUgZmlyc3QgcGFyYW1ldGVyIHRvIGBFbWJl
        ci5SZW5kZXJCdWZmZXJgLiBGb3IKICAgIGV4YW1wbGUsIGlmIHlvdSB3YW50
        ZWQgdG8gY3JlYXRlIGEgYHBgIHRhZywgdGhlbiB5b3Ugd291bGQgY2FsbAoK
        ICAgIGBgYGphdmFzY3JpcHQKICAgIEVtYmVyLlJlbmRlckJ1ZmZlcigncCcp
        CiAgICBgYGAKCiAgICBAcHJvcGVydHkgZWxlbWVudFRhZwogICAgQHR5cGUg
        U3RyaW5nCiAgICBAZGVmYXVsdCBudWxsCiAgKi8KICBlbGVtZW50VGFnOiBu
        dWxsLAoKICAvKioKICAgIEEgaGFzaCBrZXllZCBvbiB0aGUgbmFtZSBvZiB0
        aGUgc3R5bGUgYXR0cmlidXRlIGFuZCB3aG9zZSB2YWx1ZSB3aWxsCiAgICBi
        ZSBhcHBsaWVkIHRvIHRoYXQgYXR0cmlidXRlLiBGb3IgZXhhbXBsZSwgaWYg
        eW91IHdhbnRlZCB0byBhcHBseSBhCiAgICBgYmFja2dyb3VuZC1jb2xvcjpi
        bGFjaztgIHN0eWxlIHRvIGFuIGVsZW1lbnQsIHlvdSB3b3VsZCBzZXQgdGhl
        CiAgICBlbGVtZW50U3R5bGUgaGFzaCB0byBgeydiYWNrZ3JvdW5kLWNvbG9y
        JzonYmxhY2snfWAuCgogICAgWW91IHNob3VsZCBub3QgbWFpbnRhaW4gdGhp
        cyBoYXNoIHlvdXJzZWxmLCByYXRoZXIsIHlvdSBzaG91bGQgdXNlCiAgICB0
        aGUgYHN0eWxlKClgIG1ldGhvZCBvZiBgRW1iZXIuUmVuZGVyQnVmZmVyYC4K
        CiAgICBAcHJvcGVydHkgZWxlbWVudFN0eWxlCiAgICBAdHlwZSBIYXNoCiAg
        ICBAZGVmYXVsdCB7fQogICovCiAgZWxlbWVudFN0eWxlOiBudWxsLAoKICAv
        KioKICAgIE5lc3RlZCBgUmVuZGVyQnVmZmVyc2Agd2lsbCBzZXQgdGhpcyB0
        byB0aGVpciBwYXJlbnQgYFJlbmRlckJ1ZmZlcmAKICAgIGluc3RhbmNlLgoK
        ICAgIEBwcm9wZXJ0eSBwYXJlbnRCdWZmZXIKICAgIEB0eXBlIEVtYmVyLl9S
        ZW5kZXJCdWZmZXIKICAqLwogIHBhcmVudEJ1ZmZlcjogbnVsbCwKCiAgLyoq
        CiAgICBBZGRzIGEgc3RyaW5nIG9mIEhUTUwgdG8gdGhlIGBSZW5kZXJCdWZm
        ZXJgLgoKICAgIEBtZXRob2QgcHVzaAogICAgQHBhcmFtIHtTdHJpbmd9IHN0
        cmluZyBIVE1MIHRvIHB1c2ggaW50byB0aGUgYnVmZmVyCiAgICBAY2hhaW5h
        YmxlCiAgKi8KICBwdXNoOiBmdW5jdGlvbihzdHJpbmcpIHsKICAgIHRoaXMu
        YnVmZmVyICs9IHN0cmluZzsKICAgIHJldHVybiB0aGlzOwogIH0sCgogIC8q
        KgogICAgQWRkcyBhIGNsYXNzIHRvIHRoZSBidWZmZXIsIHdoaWNoIHdpbGwg
        YmUgcmVuZGVyZWQgdG8gdGhlIGNsYXNzIGF0dHJpYnV0ZS4KCiAgICBAbWV0
        aG9kIGFkZENsYXNzCiAgICBAcGFyYW0ge1N0cmluZ30gY2xhc3NOYW1lIENs
        YXNzIG5hbWUgdG8gYWRkIHRvIHRoZSBidWZmZXIKICAgIEBjaGFpbmFibGUK
        ICAqLwogIGFkZENsYXNzOiBmdW5jdGlvbihjbGFzc05hbWUpIHsKICAgIC8v
        IGxhemlseSBjcmVhdGUgZWxlbWVudENsYXNzZXMKICAgIHRoaXMuZWxlbWVu
        dENsYXNzZXMgPSAodGhpcy5lbGVtZW50Q2xhc3NlcyB8fCBuZXcgQ2xhc3NT
        ZXQoKSk7CiAgICB0aGlzLmVsZW1lbnRDbGFzc2VzLmFkZChjbGFzc05hbWUp
        OwogICAgdGhpcy5jbGFzc2VzID0gdGhpcy5lbGVtZW50Q2xhc3Nlcy5saXN0
        OwoKICAgIHJldHVybiB0aGlzOwogIH0sCgogIHNldENsYXNzZXM6IGZ1bmN0
        aW9uKGNsYXNzTmFtZXMpIHsKICAgIHRoaXMuY2xhc3NlcyA9IGNsYXNzTmFt
        ZXM7CiAgfSwKCiAgLyoqCiAgICBTZXRzIHRoZSBlbGVtZW50SUQgdG8gYmUg
        dXNlZCBmb3IgdGhlIGVsZW1lbnQuCgogICAgQG1ldGhvZCBpZAogICAgQHBh
        cmFtIHtTdHJpbmd9IGlkCiAgICBAY2hhaW5hYmxlCiAgKi8KICBpZDogZnVu
        Y3Rpb24oaWQpIHsKICAgIHRoaXMuZWxlbWVudElkID0gaWQ7CiAgICByZXR1
        cm4gdGhpczsKICB9LAoKICAvLyBkdWNrIHR5cGUgYXR0cmlidXRlIGZ1bmN0
        aW9uYWxpdHkgbGlrZSBqUXVlcnkgc28gYSByZW5kZXIgYnVmZmVyCiAgLy8g
        Y2FuIGJlIHVzZWQgbGlrZSBhIGpRdWVyeSBvYmplY3QgaW4gYXR0cmlidXRl
        IGJpbmRpbmcgc2NlbmFyaW9zLgoKICAvKioKICAgIEFkZHMgYW4gYXR0cmli
        dXRlIHdoaWNoIHdpbGwgYmUgcmVuZGVyZWQgdG8gdGhlIGVsZW1lbnQuCgog
        ICAgQG1ldGhvZCBhdHRyCiAgICBAcGFyYW0ge1N0cmluZ30gbmFtZSBUaGUg
        bmFtZSBvZiB0aGUgYXR0cmlidXRlCiAgICBAcGFyYW0ge1N0cmluZ30gdmFs
        dWUgVGhlIHZhbHVlIHRvIGFkZCB0byB0aGUgYXR0cmlidXRlCiAgICBAY2hh
        aW5hYmxlCiAgICBAcmV0dXJuIHtFbWJlci5SZW5kZXJCdWZmZXJ8U3RyaW5n
        fSB0aGlzIG9yIHRoZSBjdXJyZW50IGF0dHJpYnV0ZSB2YWx1ZQogICovCiAg
        YXR0cjogZnVuY3Rpb24obmFtZSwgdmFsdWUpIHsKICAgIHZhciBhdHRyaWJ1
        dGVzID0gdGhpcy5lbGVtZW50QXR0cmlidXRlcyA9ICh0aGlzLmVsZW1lbnRB
        dHRyaWJ1dGVzIHx8IHt9KTsKCiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9
        PT0gMSkgewogICAgICByZXR1cm4gYXR0cmlidXRlc1tuYW1lXTsKICAgIH0g
        ZWxzZSB7CiAgICAgIGF0dHJpYnV0ZXNbbmFtZV0gPSB2YWx1ZTsKICAgIH0K
        CiAgICByZXR1cm4gdGhpczsKICB9LAoKICAvKioKICAgIFJlbW92ZSBhbiBh
        dHRyaWJ1dGUgZnJvbSB0aGUgbGlzdCBvZiBhdHRyaWJ1dGVzIHRvIHJlbmRl
        ci4KCiAgICBAbWV0aG9kIHJlbW92ZUF0dHIKICAgIEBwYXJhbSB7U3RyaW5n
        fSBuYW1lIFRoZSBuYW1lIG9mIHRoZSBhdHRyaWJ1dGUKICAgIEBjaGFpbmFi
        bGUKICAqLwogIHJlbW92ZUF0dHI6IGZ1bmN0aW9uKG5hbWUpIHsKICAgIHZh
        ciBhdHRyaWJ1dGVzID0gdGhpcy5lbGVtZW50QXR0cmlidXRlczsKICAgIGlm
        IChhdHRyaWJ1dGVzKSB7IGRlbGV0ZSBhdHRyaWJ1dGVzW25hbWVdOyB9Cgog
        ICAgcmV0dXJuIHRoaXM7CiAgfSwKCiAgLyoqCiAgICBBZGRzIGFuIHByb3Bl
        cnR5IHdoaWNoIHdpbGwgYmUgcmVuZGVyZWQgdG8gdGhlIGVsZW1lbnQuCgog
        ICAgQG1ldGhvZCBwcm9wCiAgICBAcGFyYW0ge1N0cmluZ30gbmFtZSBUaGUg
        bmFtZSBvZiB0aGUgcHJvcGVydHkKICAgIEBwYXJhbSB7U3RyaW5nfSB2YWx1
        ZSBUaGUgdmFsdWUgdG8gYWRkIHRvIHRoZSBwcm9wZXJ0eQogICAgQGNoYWlu
        YWJsZQogICAgQHJldHVybiB7RW1iZXIuUmVuZGVyQnVmZmVyfFN0cmluZ30g
        dGhpcyBvciB0aGUgY3VycmVudCBwcm9wZXJ0eSB2YWx1ZQogICovCiAgcHJv
        cDogZnVuY3Rpb24obmFtZSwgdmFsdWUpIHsKICAgIHZhciBwcm9wZXJ0aWVz
        ID0gdGhpcy5lbGVtZW50UHJvcGVydGllcyA9ICh0aGlzLmVsZW1lbnRQcm9w
        ZXJ0aWVzIHx8IHt9KTsKCiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0g
        MSkgewogICAgICByZXR1cm4gcHJvcGVydGllc1tuYW1lXTsKICAgIH0gZWxz
        ZSB7CiAgICAgIHByb3BlcnRpZXNbbmFtZV0gPSB2YWx1ZTsKICAgIH0KCiAg
        ICByZXR1cm4gdGhpczsKICB9LAoKICAvKioKICAgIFJlbW92ZSBhbiBwcm9w
        ZXJ0eSBmcm9tIHRoZSBsaXN0IG9mIHByb3BlcnRpZXMgdG8gcmVuZGVyLgoK
        ICAgIEBtZXRob2QgcmVtb3ZlUHJvcAogICAgQHBhcmFtIHtTdHJpbmd9IG5h
        bWUgVGhlIG5hbWUgb2YgdGhlIHByb3BlcnR5CiAgICBAY2hhaW5hYmxlCiAg
        Ki8KICByZW1vdmVQcm9wOiBmdW5jdGlvbihuYW1lKSB7CiAgICB2YXIgcHJv
        cGVydGllcyA9IHRoaXMuZWxlbWVudFByb3BlcnRpZXM7CiAgICBpZiAocHJv
        cGVydGllcykgeyBkZWxldGUgcHJvcGVydGllc1tuYW1lXTsgfQoKICAgIHJl
        dHVybiB0aGlzOwogIH0sCgogIC8qKgogICAgQWRkcyBhIHN0eWxlIHRvIHRo
        ZSBzdHlsZSBhdHRyaWJ1dGUgd2hpY2ggd2lsbCBiZSByZW5kZXJlZCB0byB0
        aGUgZWxlbWVudC4KCiAgICBAbWV0aG9kIHN0eWxlCiAgICBAcGFyYW0ge1N0
        cmluZ30gbmFtZSBOYW1lIG9mIHRoZSBzdHlsZQogICAgQHBhcmFtIHtTdHJp
        bmd9IHZhbHVlCiAgICBAY2hhaW5hYmxlCiAgKi8KICBzdHlsZTogZnVuY3Rp
        b24obmFtZSwgdmFsdWUpIHsKICAgIHRoaXMuZWxlbWVudFN0eWxlID0gKHRo
        aXMuZWxlbWVudFN0eWxlIHx8IHt9KTsKCiAgICB0aGlzLmVsZW1lbnRTdHls
        ZVtuYW1lXSA9IHZhbHVlOwogICAgcmV0dXJuIHRoaXM7CiAgfSwKCiAgYmVn
        aW46IGZ1bmN0aW9uKHRhZ05hbWUpIHsKICAgIHRoaXMudGFnTmFtZXMucHVz
        aCh0YWdOYW1lIHx8IG51bGwpOwogICAgcmV0dXJuIHRoaXM7CiAgfSwKCiAg
        cHVzaE9wZW5pbmdUYWc6IGZ1bmN0aW9uKCkgewogICAgdmFyIHRhZ05hbWUg
        PSB0aGlzLmN1cnJlbnRUYWdOYW1lKCk7CiAgICBpZiAoIXRhZ05hbWUpIHsg
        cmV0dXJuOyB9CgogICAgaWYgKHRoaXMuX2hhc0VsZW1lbnQgJiYgIXRoaXMu
        X2VsZW1lbnQgJiYgdGhpcy5idWZmZXIubGVuZ3RoID09PSAwKSB7CiAgICAg
        IHRoaXMuX2VsZW1lbnQgPSB0aGlzLmdlbmVyYXRlRWxlbWVudCgpOwogICAg
        ICByZXR1cm47CiAgICB9CgogICAgdmFyIGJ1ZmZlciA9IHRoaXMuYnVmZmVy
        LAogICAgICAgIGlkID0gdGhpcy5lbGVtZW50SWQsCiAgICAgICAgY2xhc3Nl
        cyA9IHRoaXMuY2xhc3NlcywKICAgICAgICBhdHRycyA9IHRoaXMuZWxlbWVu
        dEF0dHJpYnV0ZXMsCiAgICAgICAgcHJvcHMgPSB0aGlzLmVsZW1lbnRQcm9w
        ZXJ0aWVzLAogICAgICAgIHN0eWxlID0gdGhpcy5lbGVtZW50U3R5bGUsCiAg
        ICAgICAgYXR0ciwgcHJvcDsKCiAgICBidWZmZXIgKz0gJzwnICsgc3RyaXBU
        YWdOYW1lKHRhZ05hbWUpOwoKICAgIGlmIChpZCkgewogICAgICBidWZmZXIg
        Kz0gJyBpZD0iJyArIGVzY2FwZUF0dHJpYnV0ZShpZCkgKyAnIic7CiAgICAg
        IHRoaXMuZWxlbWVudElkID0gbnVsbDsKICAgIH0KICAgIGlmIChjbGFzc2Vz
        KSB7CiAgICAgIGJ1ZmZlciArPSAnIGNsYXNzPSInICsgZXNjYXBlQXR0cmli
        dXRlKGNsYXNzZXMuam9pbignICcpKSArICciJzsKICAgICAgdGhpcy5jbGFz
        c2VzID0gbnVsbDsKICAgIH0KCiAgICBpZiAoc3R5bGUpIHsKICAgICAgYnVm
        ZmVyICs9ICcgc3R5bGU9Iic7CgogICAgICBmb3IgKHByb3AgaW4gc3R5bGUp
        IHsKICAgICAgICBpZiAoc3R5bGUuaGFzT3duUHJvcGVydHkocHJvcCkpIHsK
        ICAgICAgICAgIGJ1ZmZlciArPSBwcm9wICsgJzonICsgZXNjYXBlQXR0cmli
        dXRlKHN0eWxlW3Byb3BdKSArICc7JzsKICAgICAgICB9CiAgICAgIH0KCiAg
        ICAgIGJ1ZmZlciArPSAnIic7CgogICAgICB0aGlzLmVsZW1lbnRTdHlsZSA9
        IG51bGw7CiAgICB9CgogICAgaWYgKGF0dHJzKSB7CiAgICAgIGZvciAoYXR0
        ciBpbiBhdHRycykgewogICAgICAgIGlmIChhdHRycy5oYXNPd25Qcm9wZXJ0
        eShhdHRyKSkgewogICAgICAgICAgYnVmZmVyICs9ICcgJyArIGF0dHIgKyAn
        PSInICsgZXNjYXBlQXR0cmlidXRlKGF0dHJzW2F0dHJdKSArICciJzsKICAg
        ICAgICB9CiAgICAgIH0KCiAgICAgIHRoaXMuZWxlbWVudEF0dHJpYnV0ZXMg
        PSBudWxsOwogICAgfQoKICAgIGlmIChwcm9wcykgewogICAgICBmb3IgKHBy
        b3AgaW4gcHJvcHMpIHsKICAgICAgICBpZiAocHJvcHMuaGFzT3duUHJvcGVy
        dHkocHJvcCkpIHsKICAgICAgICAgIHZhciB2YWx1ZSA9IHByb3BzW3Byb3Bd
        OwogICAgICAgICAgaWYgKHZhbHVlIHx8IHR5cGVvZih2YWx1ZSkgPT09ICdu
        dW1iZXInKSB7CiAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gdHJ1ZSkgewog
        ICAgICAgICAgICAgIGJ1ZmZlciArPSAnICcgKyBwcm9wICsgJz0iJyArIHBy
        b3AgKyAnIic7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAg
        YnVmZmVyICs9ICcgJyArIHByb3AgKyAnPSInICsgZXNjYXBlQXR0cmlidXRl
        KHByb3BzW3Byb3BdKSArICciJzsKICAgICAgICAgICAgfQogICAgICAgICAg
        fQogICAgICAgIH0KICAgICAgfQoKICAgICAgdGhpcy5lbGVtZW50UHJvcGVy
        dGllcyA9IG51bGw7CiAgICB9CgogICAgYnVmZmVyICs9ICc+JzsKICAgIHRo
        aXMuYnVmZmVyID0gYnVmZmVyOwogIH0sCgogIHB1c2hDbG9zaW5nVGFnOiBm
        dW5jdGlvbigpIHsKICAgIHZhciB0YWdOYW1lID0gdGhpcy50YWdOYW1lcy5w
        b3AoKTsKICAgIGlmICh0YWdOYW1lKSB7IHRoaXMuYnVmZmVyICs9ICc8Lycg
        KyBzdHJpcFRhZ05hbWUodGFnTmFtZSkgKyAnPic7IH0KICB9LAoKICBjdXJy
        ZW50VGFnTmFtZTogZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gdGhpcy50YWdO
        YW1lc1t0aGlzLnRhZ05hbWVzLmxlbmd0aC0xXTsKICB9LAoKICBnZW5lcmF0
        ZUVsZW1lbnQ6IGZ1bmN0aW9uKCkgewogICAgdmFyIHRhZ05hbWUgPSB0aGlz
        LnRhZ05hbWVzLnBvcCgpLCAvLyBwb3Agc2luY2Ugd2UgZG9uJ3QgbmVlZCB0
        byBjbG9zZQogICAgICAgIGlkID0gdGhpcy5lbGVtZW50SWQsCiAgICAgICAg
        Y2xhc3NlcyA9IHRoaXMuY2xhc3NlcywKICAgICAgICBhdHRycyA9IHRoaXMu
        ZWxlbWVudEF0dHJpYnV0ZXMsCiAgICAgICAgcHJvcHMgPSB0aGlzLmVsZW1l
        bnRQcm9wZXJ0aWVzLAogICAgICAgIHN0eWxlID0gdGhpcy5lbGVtZW50U3R5
        bGUsCiAgICAgICAgc3R5bGVCdWZmZXIgPSAnJywgYXR0ciwgcHJvcCwgdGFn
        U3RyaW5nOwoKICAgIGlmIChhdHRycyAmJiBhdHRycy5uYW1lICYmICFjYW5T
        ZXROYW1lT25JbnB1dHMpIHsKICAgICAgLy8gSUUgYWxsb3dzIHBhc3Npbmcg
        YSB0YWcgdG8gY3JlYXRlRWxlbWVudC4gU2VlIG5vdGUgb24gYGNhblNldE5h
        bWVPbklucHV0c2AgYWJvdmUgYXMgd2VsbC4KICAgICAgdGFnU3RyaW5nID0g
        JzwnK3N0cmlwVGFnTmFtZSh0YWdOYW1lKSsnIG5hbWU9IicrZXNjYXBlQXR0
        cmlidXRlKGF0dHJzLm5hbWUpKyciPic7CiAgICB9IGVsc2UgewogICAgICB0
        YWdTdHJpbmcgPSB0YWdOYW1lOwogICAgfQoKICAgIHZhciBlbGVtZW50ID0g
        ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0YWdTdHJpbmcpLAogICAgICAgICRl
        bGVtZW50ID0gRW1iZXIuJChlbGVtZW50KTsKCiAgICBpZiAoaWQpIHsKICAg
        ICAgJGVsZW1lbnQuYXR0cignaWQnLCBpZCk7CiAgICAgIHRoaXMuZWxlbWVu
        dElkID0gbnVsbDsKICAgIH0KICAgIGlmIChjbGFzc2VzKSB7CiAgICAgICRl
        bGVtZW50LmF0dHIoJ2NsYXNzJywgY2xhc3Nlcy5qb2luKCcgJykpOwogICAg
        ICB0aGlzLmNsYXNzZXMgPSBudWxsOwogICAgfQoKICAgIGlmIChzdHlsZSkg
        ewogICAgICBmb3IgKHByb3AgaW4gc3R5bGUpIHsKICAgICAgICBpZiAoc3R5
        bGUuaGFzT3duUHJvcGVydHkocHJvcCkpIHsKICAgICAgICAgIHN0eWxlQnVm
        ZmVyICs9IChwcm9wICsgJzonICsgc3R5bGVbcHJvcF0gKyAnOycpOwogICAg
        ICAgIH0KICAgICAgfQoKICAgICAgJGVsZW1lbnQuYXR0cignc3R5bGUnLCBz
        dHlsZUJ1ZmZlcik7CgogICAgICB0aGlzLmVsZW1lbnRTdHlsZSA9IG51bGw7
        CiAgICB9CgogICAgaWYgKGF0dHJzKSB7CiAgICAgIGZvciAoYXR0ciBpbiBh
        dHRycykgewogICAgICAgIGlmIChhdHRycy5oYXNPd25Qcm9wZXJ0eShhdHRy
        KSkgewogICAgICAgICAgJGVsZW1lbnQuYXR0cihhdHRyLCBhdHRyc1thdHRy
        XSk7CiAgICAgICAgfQogICAgICB9CgogICAgICB0aGlzLmVsZW1lbnRBdHRy
        aWJ1dGVzID0gbnVsbDsKICAgIH0KCiAgICBpZiAocHJvcHMpIHsKICAgICAg
        Zm9yIChwcm9wIGluIHByb3BzKSB7CiAgICAgICAgaWYgKHByb3BzLmhhc093
        blByb3BlcnR5KHByb3ApKSB7CiAgICAgICAgICAkZWxlbWVudC5wcm9wKHBy
        b3AsIHByb3BzW3Byb3BdKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHRo
        aXMuZWxlbWVudFByb3BlcnRpZXMgPSBudWxsOwogICAgfQoKICAgIHJldHVy
        biBlbGVtZW50OwogIH0sCgogIC8qKgogICAgQG1ldGhvZCBlbGVtZW50CiAg
        ICBAcmV0dXJuIHtET01FbGVtZW50fSBUaGUgZWxlbWVudCBjb3JyZXNwb25k
        aW5nIHRvIHRoZSBnZW5lcmF0ZWQgSFRNTAogICAgICBvZiB0aGlzIGJ1ZmZl
        cgogICovCiAgZWxlbWVudDogZnVuY3Rpb24oKSB7CiAgICB2YXIgaHRtbCA9
        IHRoaXMuaW5uZXJTdHJpbmcoKTsKCiAgICBpZiAoaHRtbCkgewogICAgICB0
        aGlzLl9lbGVtZW50ID0gRW1iZXIuVmlld1V0aWxzLnNldElubmVySFRNTCh0
        aGlzLl9lbGVtZW50LCBodG1sKTsKICAgIH0KCiAgICByZXR1cm4gdGhpcy5f
        ZWxlbWVudDsKICB9LAoKICAvKioKICAgIEdlbmVyYXRlcyB0aGUgSFRNTCBj
        b250ZW50IGZvciB0aGlzIGJ1ZmZlci4KCiAgICBAbWV0aG9kIHN0cmluZwog
        ICAgQHJldHVybiB7U3RyaW5nfSBUaGUgZ2VuZXJhdGVkIEhUTUwKICAqLwog
        IHN0cmluZzogZnVuY3Rpb24oKSB7CiAgICBpZiAodGhpcy5faGFzRWxlbWVu
        dCAmJiB0aGlzLl9lbGVtZW50KSB7CiAgICAgIC8vIEZpcmVmb3ggdmVyc2lv
        bnMgPCAxMSBkbyBub3QgaGF2ZSBzdXBwb3J0IGZvciBlbGVtZW50Lm91dGVy
        SFRNTC4KICAgICAgdmFyIHRoaXNFbGVtZW50ID0gdGhpcy5lbGVtZW50KCks
        IG91dGVySFRNTCA9IHRoaXNFbGVtZW50Lm91dGVySFRNTDsKICAgICAgaWYg
        KHR5cGVvZiBvdXRlckhUTUwgPT09ICd1bmRlZmluZWQnKSB7CiAgICAgICAg
        cmV0dXJuIEVtYmVyLiQoJzxkaXYvPicpLmFwcGVuZCh0aGlzRWxlbWVudCku
        aHRtbCgpOwogICAgICB9CiAgICAgIHJldHVybiBvdXRlckhUTUw7CiAgICB9
        IGVsc2UgewogICAgICByZXR1cm4gdGhpcy5pbm5lclN0cmluZygpOwogICAg
        fQogIH0sCgogIGlubmVyU3RyaW5nOiBmdW5jdGlvbigpIHsKICAgIHJldHVy
        biB0aGlzLmJ1ZmZlcjsKICB9Cn07Cgp9KSgpOwoKCgooZnVuY3Rpb24oKSB7
        Ci8qKgpAbW9kdWxlIGVtYmVyCkBzdWJtb2R1bGUgZW1iZXItdmlld3MKKi8K
        CnZhciBnZXQgPSBFbWJlci5nZXQsIHNldCA9IEVtYmVyLnNldCwgZm10ID0g
        RW1iZXIuU3RyaW5nLmZtdDsKCi8qKgogIGBFbWJlci5FdmVudERpc3BhdGNo
        ZXJgIGhhbmRsZXMgZGVsZWdhdGluZyBicm93c2VyIGV2ZW50cyB0byB0aGVp
        cgogIGNvcnJlc3BvbmRpbmcgYEVtYmVyLlZpZXdzLmAgRm9yIGV4YW1wbGUs
        IHdoZW4geW91IGNsaWNrIG9uIGEgdmlldywKICBgRW1iZXIuRXZlbnREaXNw
        YXRjaGVyYCBlbnN1cmVzIHRoYXQgdGhhdCB2aWV3J3MgYG1vdXNlRG93bmAg
        bWV0aG9kIGdldHMKICBjYWxsZWQuCgogIEBjbGFzcyBFdmVudERpc3BhdGNo
        ZXIKICBAbmFtZXNwYWNlIEVtYmVyCiAgQHByaXZhdGUKICBAZXh0ZW5kcyBF
        bWJlci5PYmplY3QKKi8KRW1iZXIuRXZlbnREaXNwYXRjaGVyID0gRW1iZXIu
        T2JqZWN0LmV4dGVuZCgvKiogQHNjb3BlIEVtYmVyLkV2ZW50RGlzcGF0Y2hl
        ci5wcm90b3R5cGUgKi97CgogIC8qKgogICAgVGhlIHNldCBvZiBldmVudHMg
        bmFtZXMgKGFuZCBhc3NvY2lhdGVkIGhhbmRsZXIgZnVuY3Rpb24gbmFtZXMp
        IHRvIGJlIHNldHVwCiAgICBhbmQgZGlzcGF0Y2hlZCBieSB0aGUgYEV2ZW50
        RGlzcGF0Y2hlcmAuIEN1c3RvbSBldmVudHMgY2FuIGFkZGVkIHRvIHRoaXMg
        bGlzdCBhdCBzZXR1cAogICAgdGltZSwgZ2VuZXJhbGx5IHZpYSB0aGUgYEVt
        YmVyLkFwcGxpY2F0aW9uLmN1c3RvbUV2ZW50c2AgaGFzaC4gT25seSBvdmVy
        cmlkZSB0aGlzCiAgICBkZWZhdWx0IHNldCB0byBwcmV2ZW50IHRoZSBFdmVu
        dERpc3BhdGNoZXIgZnJvbSBsaXN0ZW5pbmcgb24gc29tZSBldmVudHMgYWxs
        IHRvZ2V0aGVyLgoKICAgIFRoaXMgc2V0IHdpbGwgYmUgbW9kaWZpZWQgYnkg
        YHNldHVwYCB0byBhbHNvIGluY2x1ZGUgYW55IGV2ZW50cyBhZGRlZCBhdCB0
        aGF0IHRpbWUuCgogICAgQHByb3BlcnR5IGV2ZW50cwogICAgQHR5cGUgT2Jq
        ZWN0CiAgKi8KICBldmVudHM6IHsKICAgIHRvdWNoc3RhcnQgIDogJ3RvdWNo
        U3RhcnQnLAogICAgdG91Y2htb3ZlICAgOiAndG91Y2hNb3ZlJywKICAgIHRv
        dWNoZW5kICAgIDogJ3RvdWNoRW5kJywKICAgIHRvdWNoY2FuY2VsIDogJ3Rv
        dWNoQ2FuY2VsJywKICAgIGtleWRvd24gICAgIDogJ2tleURvd24nLAogICAg
        a2V5dXAgICAgICAgOiAna2V5VXAnLAogICAga2V5cHJlc3MgICAgOiAna2V5
        UHJlc3MnLAogICAgbW91c2Vkb3duICAgOiAnbW91c2VEb3duJywKICAgIG1v
        dXNldXAgICAgIDogJ21vdXNlVXAnLAogICAgY29udGV4dG1lbnUgOiAnY29u
        dGV4dE1lbnUnLAogICAgY2xpY2sgICAgICAgOiAnY2xpY2snLAogICAgZGJs
        Y2xpY2sgICAgOiAnZG91YmxlQ2xpY2snLAogICAgbW91c2Vtb3ZlICAgOiAn
        bW91c2VNb3ZlJywKICAgIGZvY3VzaW4gICAgIDogJ2ZvY3VzSW4nLAogICAg
        Zm9jdXNvdXQgICAgOiAnZm9jdXNPdXQnLAogICAgbW91c2VlbnRlciAgOiAn
        bW91c2VFbnRlcicsCiAgICBtb3VzZWxlYXZlICA6ICdtb3VzZUxlYXZlJywK
        ICAgIHN1Ym1pdCAgICAgIDogJ3N1Ym1pdCcsCiAgICBpbnB1dCAgICAgICA6
        ICdpbnB1dCcsCiAgICBjaGFuZ2UgICAgICA6ICdjaGFuZ2UnLAogICAgZHJh
        Z3N0YXJ0ICAgOiAnZHJhZ1N0YXJ0JywKICAgIGRyYWcgICAgICAgIDogJ2Ry
        YWcnLAogICAgZHJhZ2VudGVyICAgOiAnZHJhZ0VudGVyJywKICAgIGRyYWds
        ZWF2ZSAgIDogJ2RyYWdMZWF2ZScsCiAgICBkcmFnb3ZlciAgICA6ICdkcmFn
        T3ZlcicsCiAgICBkcm9wICAgICAgICA6ICdkcm9wJywKICAgIGRyYWdlbmQg
        ICAgIDogJ2RyYWdFbmQnCiAgfSwKCiAgLyoqCiAgICBAcHJpdmF0ZQoKICAg
        IFRoZSByb290IERPTSBlbGVtZW50IHRvIHdoaWNoIGV2ZW50IGxpc3RlbmVy
        cyBzaG91bGQgYmUgYXR0YWNoZWQuIEV2ZW50CiAgICBsaXN0ZW5lcnMgd2ls
        bCBiZSBhdHRhY2hlZCB0byB0aGUgZG9jdW1lbnQgdW5sZXNzIHRoaXMgaXMg
        b3ZlcnJpZGRlbi4KCiAgICBDYW4gYmUgc3BlY2lmaWVkIGFzIGEgRE9NRWxl
        bWVudCBvciBhIHNlbGVjdG9yIHN0cmluZy4KCiAgICBUaGUgZGVmYXVsdCBi
        b2R5IGlzIGEgc3RyaW5nIHNpbmNlIHRoaXMgbWF5IGJlIGV2YWx1YXRlZCBi
        ZWZvcmUgZG9jdW1lbnQuYm9keQogICAgZXhpc3RzIGluIHRoZSBET00uCgog
        ICAgQHByb3BlcnR5IHJvb3RFbGVtZW50CiAgICBAdHlwZSBET01FbGVtZW50
        CiAgICBAZGVmYXVsdCAnYm9keScKICAqLwogIHJvb3RFbGVtZW50OiAnYm9k
        eScsCgogIC8qKgogICAgQHByaXZhdGUKCiAgICBTZXRzIHVwIGV2ZW50IGxp
        c3RlbmVycyBmb3Igc3RhbmRhcmQgYnJvd3NlciBldmVudHMuCgogICAgVGhp
        cyB3aWxsIGJlIGNhbGxlZCBhZnRlciB0aGUgYnJvd3NlciBzZW5kcyBhIGBE
        T01Db250ZW50UmVhZHlgIGV2ZW50LiBCeQogICAgZGVmYXVsdCwgaXQgd2ls
        bCBzZXQgdXAgYWxsIG9mIHRoZSBsaXN0ZW5lcnMgb24gdGhlIGRvY3VtZW50
        IGJvZHkuIElmIHlvdQogICAgd291bGQgbGlrZSB0byByZWdpc3RlciB0aGUg
        bGlzdGVuZXJzIG9uIGEgZGlmZmVyZW50IGVsZW1lbnQsIHNldCB0aGUgZXZl
        bnQKICAgIGRpc3BhdGNoZXIncyBgcm9vdGAgcHJvcGVydHkuCgogICAgQG1l
        dGhvZCBzZXR1cAogICAgQHBhcmFtIGFkZGVkRXZlbnRzIHtIYXNofQogICov
        CiAgc2V0dXA6IGZ1bmN0aW9uKGFkZGVkRXZlbnRzLCByb290RWxlbWVudCkg
        ewogICAgdmFyIGV2ZW50LCBldmVudHMgPSBnZXQodGhpcywgJ2V2ZW50cycp
        OwoKICAgIEVtYmVyLiQuZXh0ZW5kKGV2ZW50cywgYWRkZWRFdmVudHMgfHwg
        e30pOwoKCiAgICBpZiAoIUVtYmVyLmlzTm9uZShyb290RWxlbWVudCkpIHsK
        ICAgICAgc2V0KHRoaXMsICdyb290RWxlbWVudCcsIHJvb3RFbGVtZW50KTsK
        ICAgIH0KCiAgICByb290RWxlbWVudCA9IEVtYmVyLiQoZ2V0KHRoaXMsICdy
        b290RWxlbWVudCcpKTsKCiAgICBFbWJlci5hc3NlcnQoZm10KCdZb3UgY2Fu
        bm90IHVzZSB0aGUgc2FtZSByb290IGVsZW1lbnQgKCVAKSBtdWx0aXBsZSB0
        aW1lcyBpbiBhbiBFbWJlci5BcHBsaWNhdGlvbicsIFtyb290RWxlbWVudC5z
        ZWxlY3RvciB8fCByb290RWxlbWVudFswXS50YWdOYW1lXSksICFyb290RWxl
        bWVudC5pcygnLmVtYmVyLWFwcGxpY2F0aW9uJykpOwogICAgRW1iZXIuYXNz
        ZXJ0KCdZb3UgY2Fubm90IG1ha2UgYSBuZXcgRW1iZXIuQXBwbGljYXRpb24g
        dXNpbmcgYSByb290IGVsZW1lbnQgdGhhdCBpcyBhIGRlc2NlbmRlbnQgb2Yg
        YW4gZXhpc3RpbmcgRW1iZXIuQXBwbGljYXRpb24nLCAhcm9vdEVsZW1lbnQu
        Y2xvc2VzdCgnLmVtYmVyLWFwcGxpY2F0aW9uJykubGVuZ3RoKTsKICAgIEVt
        YmVyLmFzc2VydCgnWW91IGNhbm5vdCBtYWtlIGEgbmV3IEVtYmVyLkFwcGxp
        Y2F0aW9uIHVzaW5nIGEgcm9vdCBlbGVtZW50IHRoYXQgaXMgYW4gYW5jZXN0
        b3Igb2YgYW4gZXhpc3RpbmcgRW1iZXIuQXBwbGljYXRpb24nLCAhcm9vdEVs
        ZW1lbnQuZmluZCgnLmVtYmVyLWFwcGxpY2F0aW9uJykubGVuZ3RoKTsKCiAg
        ICByb290RWxlbWVudC5hZGRDbGFzcygnZW1iZXItYXBwbGljYXRpb24nKTsK
        CiAgICBFbWJlci5hc3NlcnQoJ1VuYWJsZSB0byBhZGQgImVtYmVyLWFwcGxp
        Y2F0aW9uIiBjbGFzcyB0byByb290RWxlbWVudC4gTWFrZSBzdXJlIHlvdSBz
        ZXQgcm9vdEVsZW1lbnQgdG8gdGhlIGJvZHkgb3IgYW4gZWxlbWVudCBpbiB0
        aGUgYm9keS4nLCByb290RWxlbWVudC5pcygnLmVtYmVyLWFwcGxpY2F0aW9u
        JykpOwoKICAgIGZvciAoZXZlbnQgaW4gZXZlbnRzKSB7CiAgICAgIGlmIChl
        dmVudHMuaGFzT3duUHJvcGVydHkoZXZlbnQpKSB7CiAgICAgICAgdGhpcy5z
        ZXR1cEhhbmRsZXIocm9vdEVsZW1lbnQsIGV2ZW50LCBldmVudHNbZXZlbnRd
        KTsKICAgICAgfQogICAgfQogIH0sCgogIC8qKgogICAgQHByaXZhdGUKCiAg
        ICBSZWdpc3RlcnMgYW4gZXZlbnQgbGlzdGVuZXIgb24gdGhlIGRvY3VtZW50
        LiBJZiB0aGUgZ2l2ZW4gZXZlbnQgaXMKICAgIHRyaWdnZXJlZCwgdGhlIHBy
        b3ZpZGVkIGV2ZW50IGhhbmRsZXIgd2lsbCBiZSB0cmlnZ2VyZWQgb24gdGhl
        IHRhcmdldCB2aWV3LgoKICAgIElmIHRoZSB0YXJnZXQgdmlldyBkb2VzIG5v
        dCBpbXBsZW1lbnQgdGhlIGV2ZW50IGhhbmRsZXIsIG9yIGlmIHRoZSBoYW5k
        bGVyCiAgICByZXR1cm5zIGBmYWxzZWAsIHRoZSBwYXJlbnQgdmlldyB3aWxs
        IGJlIGNhbGxlZC4gVGhlIGV2ZW50IHdpbGwgY29udGludWUgdG8KICAgIGJ1
        YmJsZSB0byBlYWNoIHN1Y2Nlc3NpdmUgcGFyZW50IHZpZXcgdW50aWwgaXQg
        cmVhY2hlcyB0aGUgdG9wLgoKICAgIEZvciBleGFtcGxlLCB0byBoYXZlIHRo
        ZSBgbW91c2VEb3duYCBtZXRob2QgY2FsbGVkIG9uIHRoZSB0YXJnZXQgdmll
        dyB3aGVuCiAgICBhIGBtb3VzZWRvd25gIGV2ZW50IGlzIHJlY2VpdmVkIGZy
        b20gdGhlIGJyb3dzZXIsIGRvIHRoZSBmb2xsb3dpbmc6CgogICAgYGBgamF2
        YXNjcmlwdAogICAgc2V0dXBIYW5kbGVyKCdtb3VzZWRvd24nLCAnbW91c2VE
        b3duJyk7CiAgICBgYGAKCiAgICBAbWV0aG9kIHNldHVwSGFuZGxlcgogICAg
        QHBhcmFtIHtFbGVtZW50fSByb290RWxlbWVudAogICAgQHBhcmFtIHtTdHJp
        bmd9IGV2ZW50IHRoZSBicm93c2VyLW9yaWdpbmF0ZWQgZXZlbnQgdG8gbGlz
        dGVuIHRvCiAgICBAcGFyYW0ge1N0cmluZ30gZXZlbnROYW1lIHRoZSBuYW1l
        IG9mIHRoZSBtZXRob2QgdG8gY2FsbCBvbiB0aGUgdmlldwogICovCiAgc2V0
        dXBIYW5kbGVyOiBmdW5jdGlvbihyb290RWxlbWVudCwgZXZlbnQsIGV2ZW50
        TmFtZSkgewogICAgdmFyIHNlbGYgPSB0aGlzOwoKICAgIHJvb3RFbGVtZW50
        Lm9uKGV2ZW50ICsgJy5lbWJlcicsICcuZW1iZXItdmlldycsIGZ1bmN0aW9u
        KGV2dCwgdHJpZ2dlcmluZ01hbmFnZXIpIHsKICAgICAgcmV0dXJuIEVtYmVy
        LmhhbmRsZUVycm9ycyhmdW5jdGlvbigpIHsKICAgICAgICB2YXIgdmlldyA9
        IEVtYmVyLlZpZXcudmlld3NbdGhpcy5pZF0sCiAgICAgICAgICAgIHJlc3Vs
        dCA9IHRydWUsIG1hbmFnZXIgPSBudWxsOwoKICAgICAgICBtYW5hZ2VyID0g
        c2VsZi5fZmluZE5lYXJlc3RFdmVudE1hbmFnZXIodmlldyxldmVudE5hbWUp
        OwoKICAgICAgICBpZiAobWFuYWdlciAmJiBtYW5hZ2VyICE9PSB0cmlnZ2Vy
        aW5nTWFuYWdlcikgewogICAgICAgICAgcmVzdWx0ID0gc2VsZi5fZGlzcGF0
        Y2hFdmVudChtYW5hZ2VyLCBldnQsIGV2ZW50TmFtZSwgdmlldyk7CiAgICAg
        ICAgfSBlbHNlIGlmICh2aWV3KSB7CiAgICAgICAgICByZXN1bHQgPSBzZWxm
        Ll9idWJibGVFdmVudCh2aWV3LGV2dCxldmVudE5hbWUpOwogICAgICAgIH0g
        ZWxzZSB7CiAgICAgICAgICBldnQuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAg
        ICAgfQoKICAgICAgICByZXR1cm4gcmVzdWx0OwogICAgICB9LCB0aGlzKTsK
        ICAgIH0pOwoKICAgIHJvb3RFbGVtZW50Lm9uKGV2ZW50ICsgJy5lbWJlcics
        ICdbZGF0YS1lbWJlci1hY3Rpb25dJywgZnVuY3Rpb24oZXZ0KSB7CiAgICAg
        IHJldHVybiBFbWJlci5oYW5kbGVFcnJvcnMoZnVuY3Rpb24oKSB7CiAgICAg
        ICAgdmFyIGFjdGlvbklkID0gRW1iZXIuJChldnQuY3VycmVudFRhcmdldCku
        YXR0cignZGF0YS1lbWJlci1hY3Rpb24nKSwKICAgICAgICAgICAgYWN0aW9u
        ICAgPSBFbWJlci5IYW5kbGViYXJzLkFjdGlvbkhlbHBlci5yZWdpc3RlcmVk
        QWN0aW9uc1thY3Rpb25JZF07CgogICAgICAgIC8vIFdlIGhhdmUgdG8gY2hl
        Y2sgZm9yIGFjdGlvbiBoZXJlIHNpbmNlIGluIHNvbWUgY2FzZXMsIGpRdWVy
        eSB3aWxsIHRyaWdnZXIKICAgICAgICAvLyBhbiBldmVudCBvbiBgcmVtb3Zl
        Q2hpbGRgIChpLmUuIGZvY3Vzb3V0KSBhZnRlciB3ZSd2ZSBhbHJlYWR5IHRv
        cm4gZG93biB0aGUKICAgICAgICAvLyBhY3Rpb24gaGFuZGxlcnMgZm9yIHRo
        ZSB2aWV3LgogICAgICAgIGlmIChhY3Rpb24gJiYgYWN0aW9uLmV2ZW50TmFt
        ZSA9PT0gZXZlbnROYW1lKSB7CiAgICAgICAgICByZXR1cm4gYWN0aW9uLmhh
        bmRsZXIoZXZ0KTsKICAgICAgICB9CiAgICAgIH0sIHRoaXMpOwogICAgfSk7
        CiAgfSwKCiAgX2ZpbmROZWFyZXN0RXZlbnRNYW5hZ2VyOiBmdW5jdGlvbih2
        aWV3LCBldmVudE5hbWUpIHsKICAgIHZhciBtYW5hZ2VyID0gbnVsbDsKCiAg
        ICB3aGlsZSAodmlldykgewogICAgICBtYW5hZ2VyID0gZ2V0KHZpZXcsICdl
        dmVudE1hbmFnZXInKTsKICAgICAgaWYgKG1hbmFnZXIgJiYgbWFuYWdlcltl
        dmVudE5hbWVdKSB7IGJyZWFrOyB9CgogICAgICB2aWV3ID0gZ2V0KHZpZXcs
        ICdwYXJlbnRWaWV3Jyk7CiAgICB9CgogICAgcmV0dXJuIG1hbmFnZXI7CiAg
        fSwKCiAgX2Rpc3BhdGNoRXZlbnQ6IGZ1bmN0aW9uKG9iamVjdCwgZXZ0LCBl
        dmVudE5hbWUsIHZpZXcpIHsKICAgIHZhciByZXN1bHQgPSB0cnVlOwoKICAg
        IHZhciBoYW5kbGVyID0gb2JqZWN0W2V2ZW50TmFtZV07CiAgICBpZiAoRW1i
        ZXIudHlwZU9mKGhhbmRsZXIpID09PSAnZnVuY3Rpb24nKSB7CiAgICAgIHJl
        c3VsdCA9IEVtYmVyLnJ1bihmdW5jdGlvbigpIHsKICAgICAgICByZXR1cm4g
        aGFuZGxlci5jYWxsKG9iamVjdCwgZXZ0LCB2aWV3KTsKICAgICAgfSk7CiAg
        ICAgIC8vIERvIG5vdCBwcmV2ZW50RGVmYXVsdCBpbiBldmVudE1hbmFnZXJz
        LgogICAgICBldnQuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICB9CiAgICBlbHNl
        IHsKICAgICAgcmVzdWx0ID0gdGhpcy5fYnViYmxlRXZlbnQodmlldywgZXZ0
        LCBldmVudE5hbWUpOwogICAgfQoKICAgIHJldHVybiByZXN1bHQ7CiAgfSwK
        CiAgX2J1YmJsZUV2ZW50OiBmdW5jdGlvbih2aWV3LCBldnQsIGV2ZW50TmFt
        ZSkgewogICAgcmV0dXJuIEVtYmVyLnJ1bihmdW5jdGlvbigpIHsKICAgICAg
        cmV0dXJuIHZpZXcuaGFuZGxlRXZlbnQoZXZlbnROYW1lLCBldnQpOwogICAg
        fSk7CiAgfSwKCiAgZGVzdHJveTogZnVuY3Rpb24oKSB7CiAgICB2YXIgcm9v
        dEVsZW1lbnQgPSBnZXQodGhpcywgJ3Jvb3RFbGVtZW50Jyk7CiAgICBFbWJl
        ci4kKHJvb3RFbGVtZW50KS5vZmYoJy5lbWJlcicsICcqKicpLnJlbW92ZUNs
        YXNzKCdlbWJlci1hcHBsaWNhdGlvbicpOwogICAgcmV0dXJuIHRoaXMuX3N1
        cGVyKCk7CiAgfQp9KTsKCn0pKCk7CgoKCihmdW5jdGlvbigpIHsKLyoqCkBt
        b2R1bGUgZW1iZXIKQHN1Ym1vZHVsZSBlbWJlci12aWV3cwoqLwoKLy8gQWRk
        IGEgbmV3IG5hbWVkIHF1ZXVlIGZvciByZW5kZXJpbmcgdmlld3MgdGhhdCBo
        YXBwZW5zCi8vIGFmdGVyIGJpbmRpbmdzIGhhdmUgc3luY2VkLCBhbmQgYSBx
        dWV1ZSBmb3Igc2NoZWR1bGluZyBhY3Rpb25zCi8vIHRoYXQgdGhhdCBzaG91
        bGQgb2NjdXIgYWZ0ZXIgdmlldyByZW5kZXJpbmcuCnZhciBxdWV1ZXMgPSBF
        bWJlci5ydW4ucXVldWVzLAogICAgaW5kZXhPZiA9IEVtYmVyLkFycmF5UG9s
        eWZpbGxzLmluZGV4T2Y7CnF1ZXVlcy5zcGxpY2UoaW5kZXhPZi5jYWxsKHF1
        ZXVlcywgJ2FjdGlvbnMnKSsxLCAwLCAncmVuZGVyJywgJ2FmdGVyUmVuZGVy
        Jyk7Cgp9KSgpOwoKCgooZnVuY3Rpb24oKSB7Ci8qKgpAbW9kdWxlIGVtYmVy
        CkBzdWJtb2R1bGUgZW1iZXItdmlld3MKKi8KCnZhciBnZXQgPSBFbWJlci5n
        ZXQsIHNldCA9IEVtYmVyLnNldDsKCi8vIE9yaWdpbmFsIGNsYXNzIGRlY2xh
        cmF0aW9uIGFuZCBkb2N1bWVudGF0aW9uIGluIHJ1bnRpbWUvbGliL2NvbnRy
        b2xsZXJzL2NvbnRyb2xsZXIuanMKLy8gTk9URTogSXQgbWF5IGJlIHBvc3Np
        YmxlIHdpdGggWVVJRG9jIHRvIGNvbWJpbmUgZG9jcyBpbiB0d28gbG9jYXRp
        b25zCgovKioKQWRkaXRpb25hbCBtZXRob2RzIGZvciB0aGUgQ29udHJvbGxl
        ck1peGluCgpAY2xhc3MgQ29udHJvbGxlck1peGluCkBuYW1lc3BhY2UgRW1i
        ZXIKKi8KRW1iZXIuQ29udHJvbGxlck1peGluLnJlb3Blbih7CiAgdGFyZ2V0
        OiBudWxsLAogIG5hbWVzcGFjZTogbnVsbCwKICB2aWV3OiBudWxsLAogIGNv
        bnRhaW5lcjogbnVsbCwKICBfY2hpbGRDb250YWluZXJzOiBudWxsLAoKICBp
        bml0OiBmdW5jdGlvbigpIHsKICAgIHRoaXMuX3N1cGVyKCk7CiAgICBzZXQo
        dGhpcywgJ19jaGlsZENvbnRhaW5lcnMnLCB7fSk7CiAgfSwKCiAgX21vZGVs
        RGlkQ2hhbmdlOiBFbWJlci5vYnNlcnZlcignbW9kZWwnLCBmdW5jdGlvbigp
        IHsKICAgIHZhciBjb250YWluZXJzID0gZ2V0KHRoaXMsICdfY2hpbGRDb250
        YWluZXJzJyk7CgogICAgZm9yICh2YXIgcHJvcCBpbiBjb250YWluZXJzKSB7
        CiAgICAgIGlmICghY29udGFpbmVycy5oYXNPd25Qcm9wZXJ0eShwcm9wKSkg
        eyBjb250aW51ZTsgfQogICAgICBjb250YWluZXJzW3Byb3BdLmRlc3Ryb3ko
        KTsKICAgIH0KCiAgICBzZXQodGhpcywgJ19jaGlsZENvbnRhaW5lcnMnLCB7
        fSk7CiAgfSkKfSk7Cgp9KSgpOwoKCgooZnVuY3Rpb24oKSB7Cgp9KSgpOwoK
        CgooZnVuY3Rpb24oKSB7CnZhciBzdGF0ZXMgPSB7fTsKCi8qKgpAbW9kdWxl
        IGVtYmVyCkBzdWJtb2R1bGUgZW1iZXItdmlld3MKKi8KCnZhciBnZXQgPSBF
        bWJlci5nZXQsIHNldCA9IEVtYmVyLnNldDsKdmFyIGd1aWRGb3IgPSBFbWJl
        ci5ndWlkRm9yOwp2YXIgYV9mb3JFYWNoID0gRW1iZXIuRW51bWVyYWJsZVV0
        aWxzLmZvckVhY2g7CnZhciBhX2FkZE9iamVjdCA9IEVtYmVyLkVudW1lcmFi
        bGVVdGlscy5hZGRPYmplY3Q7CnZhciBtZXRhID0gRW1iZXIubWV0YTsKCnZh
        ciBjaGlsZFZpZXdzUHJvcGVydHkgPSBFbWJlci5jb21wdXRlZChmdW5jdGlv
        bigpIHsKICB2YXIgY2hpbGRWaWV3cyA9IHRoaXMuX2NoaWxkVmlld3MsIHJl
        dCA9IEVtYmVyLkEoKSwgdmlldyA9IHRoaXM7CgogIGFfZm9yRWFjaChjaGls
        ZFZpZXdzLCBmdW5jdGlvbih2aWV3KSB7CiAgICB2YXIgY3VycmVudENoaWxk
        Vmlld3M7CiAgICBpZiAodmlldy5pc1ZpcnR1YWwpIHsKICAgICAgaWYgKGN1
        cnJlbnRDaGlsZFZpZXdzID0gZ2V0KHZpZXcsICdjaGlsZFZpZXdzJykpIHsK
        ICAgICAgICByZXQucHVzaE9iamVjdHMoY3VycmVudENoaWxkVmlld3MpOwog
        ICAgICB9CiAgICB9IGVsc2UgewogICAgICByZXQucHVzaCh2aWV3KTsKICAg
        IH0KICB9KTsKCiAgcmV0LnJlcGxhY2UgPSBmdW5jdGlvbiAoaWR4LCByZW1v
        dmVkQ291bnQsIGFkZGVkVmlld3MpIHsKICAgIGlmICh2aWV3IGluc3RhbmNl
        b2YgRW1iZXIuQ29udGFpbmVyVmlldykgewogICAgICBFbWJlci5kZXByZWNh
        dGUoIk1hbmlwdWxhdGluZyBhbiBFbWJlci5Db250YWluZXJWaWV3IHRocm91
        Z2ggaXRzIGNoaWxkVmlld3MgcHJvcGVydHkgaXMgZGVwcmVjYXRlZC4gUGxl
        YXNlIHVzZSB0aGUgQ29udGFpbmVyVmlldyBpbnN0YW5jZSBpdHNlbGYgYXMg
        YW4gRW1iZXIuTXV0YWJsZUFycmF5LiIpOwogICAgICByZXR1cm4gdmlldy5y
        ZXBsYWNlKGlkeCwgcmVtb3ZlZENvdW50LCBhZGRlZFZpZXdzKTsKICAgIH0K
        ICAgIHRocm93IG5ldyBFbWJlci5FcnJvcigiY2hpbGRWaWV3cyBpcyBpbW11
        dGFibGUiKTsKICB9OwoKICByZXR1cm4gcmV0Owp9KTsKCkVtYmVyLndhcm4o
        IlRoZSBWSUVXX1BSRVNFUlZFU19DT05URVhUIGZsYWcgaGFzIGJlZW4gcmVt
        b3ZlZCBhbmQgdGhlIGZ1bmN0aW9uYWxpdHkgY2FuIG5vIGxvbmdlciBiZSBk
        aXNhYmxlZC4iLCBFbWJlci5FTlYuVklFV19QUkVTRVJWRVNfQ09OVEVYVCAh
        PT0gZmFsc2UpOwoKLyoqCiAgR2xvYmFsIGhhc2ggb2Ygc2hhcmVkIHRlbXBs
        YXRlcy4gVGhpcyB3aWxsIGF1dG9tYXRpY2FsbHkgYmUgcG9wdWxhdGVkCiAg
        YnkgdGhlIGJ1aWxkIHRvb2xzIHNvIHRoYXQgeW91IGNhbiBzdG9yZSB5b3Vy
        IEhhbmRsZWJhcnMgdGVtcGxhdGVzIGluCiAgc2VwYXJhdGUgZmlsZXMgdGhh
        dCBnZXQgbG9hZGVkIGludG8gSmF2YVNjcmlwdCBhdCBidWlsZHRpbWUuCgog
        IEBwcm9wZXJ0eSBURU1QTEFURVMKICBAZm9yIEVtYmVyCiAgQHR5cGUgSGFz
        aAoqLwpFbWJlci5URU1QTEFURVMgPSB7fTsKCi8qKgogIGBFbWJlci5Db3Jl
        Vmlld2AgaXMgYW4gYWJzdHJhY3QgY2xhc3MgdGhhdCBleGlzdHMgdG8gZ2l2
        ZSB2aWV3LWxpa2UgYmVoYXZpb3IKICB0byBib3RoIEVtYmVyJ3MgbWFpbiB2
        aWV3IGNsYXNzIGBFbWJlci5WaWV3YCBhbmQgb3RoZXIgY2xhc3NlcyBsaWtl
        CiAgYEVtYmVyLl9TaW1wbGVNZXRhbW9ycGhWaWV3YCB0aGF0IGRvbid0IG5l
        ZWQgdGhlIGZ1bGx5IGZ1bmN0aW9uYWx0aXkgb2YKICBgRW1iZXIuVmlld2Au
        CgogIFVubGVzcyB5b3UgaGF2ZSBzcGVjaWZpYyBuZWVkcyBmb3IgYENvcmVW
        aWV3YCwgeW91IHdpbGwgdXNlIGBFbWJlci5WaWV3YAogIGluIHlvdXIgYXBw
        bGljYXRpb25zLgoKICBAY2xhc3MgQ29yZVZpZXcKICBAbmFtZXNwYWNlIEVt
        YmVyCiAgQGV4dGVuZHMgRW1iZXIuT2JqZWN0CiAgQHVzZXMgRW1iZXIuRXZl
        bnRlZAoqLwoKRW1iZXIuQ29yZVZpZXcgPSBFbWJlci5PYmplY3QuZXh0ZW5k
        KEVtYmVyLkV2ZW50ZWQsIEVtYmVyLkFjdGlvbkhhbmRsZXIsIHsKICBpc1Zp
        ZXc6IHRydWUsCgogIHN0YXRlczogc3RhdGVzLAoKICBpbml0OiBmdW5jdGlv
        bigpIHsKICAgIHRoaXMuX3N1cGVyKCk7CiAgICB0aGlzLnRyYW5zaXRpb25U
        bygncHJlUmVuZGVyJyk7CiAgfSwKCiAgLyoqCiAgICBJZiB0aGUgdmlldyBp
        cyBjdXJyZW50bHkgaW5zZXJ0ZWQgaW50byB0aGUgRE9NIG9mIGEgcGFyZW50
        IHZpZXcsIHRoaXMKICAgIHByb3BlcnR5IHdpbGwgcG9pbnQgdG8gdGhlIHBh
        cmVudCBvZiB0aGUgdmlldy4KCiAgICBAcHJvcGVydHkgcGFyZW50Vmlldwog
        ICAgQHR5cGUgRW1iZXIuVmlldwogICAgQGRlZmF1bHQgbnVsbAogICovCiAg
        cGFyZW50VmlldzogRW1iZXIuY29tcHV0ZWQoZnVuY3Rpb24oKSB7CiAgICB2
        YXIgcGFyZW50ID0gdGhpcy5fcGFyZW50VmlldzsKCiAgICBpZiAocGFyZW50
        ICYmIHBhcmVudC5pc1ZpcnR1YWwpIHsKICAgICAgcmV0dXJuIGdldChwYXJl
        bnQsICdwYXJlbnRWaWV3Jyk7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4g
        cGFyZW50OwogICAgfQogIH0pLnByb3BlcnR5KCdfcGFyZW50VmlldycpLAoK
        ICBzdGF0ZTogbnVsbCwKCiAgX3BhcmVudFZpZXc6IG51bGwsCgogIC8vIHJl
        dHVybiB0aGUgY3VycmVudCB2aWV3LCBub3QgaW5jbHVkaW5nIHZpcnR1YWwg
        dmlld3MKICBjb25jcmV0ZVZpZXc6IEVtYmVyLmNvbXB1dGVkKGZ1bmN0aW9u
        KCkgewogICAgaWYgKCF0aGlzLmlzVmlydHVhbCkgeyByZXR1cm4gdGhpczsg
        fQogICAgZWxzZSB7IHJldHVybiBnZXQodGhpcywgJ3BhcmVudFZpZXcnKTsg
        fQogIH0pLnByb3BlcnR5KCdwYXJlbnRWaWV3JyksCgogIGluc3RydW1lbnRO
        YW1lOiAnY29yZV92aWV3JywKCiAgaW5zdHJ1bWVudERldGFpbHM6IGZ1bmN0
        aW9uKGhhc2gpIHsKICAgIGhhc2gub2JqZWN0ID0gdGhpcy50b1N0cmluZygp
        OwogIH0sCgogIC8qKgogICAgQHByaXZhdGUKCiAgICBJbnZva2VkIGJ5IHRo
        ZSB2aWV3IHN5c3RlbSB3aGVuIHRoaXMgdmlldyBuZWVkcyB0byBwcm9kdWNl
        IGFuIEhUTUwKICAgIHJlcHJlc2VudGF0aW9uLiBUaGlzIG1ldGhvZCB3aWxs
        IGNyZWF0ZSBhIG5ldyByZW5kZXIgYnVmZmVyLCBpZiBuZWVkZWQsCiAgICB0
        aGVuIGFwcGx5IGFueSBkZWZhdWx0IGF0dHJpYnV0ZXMsIHN1Y2ggYXMgY2xh
        c3MgbmFtZXMgYW5kIHZpc2liaWxpdHkuCiAgICBGaW5hbGx5LCB0aGUgYHJl
        bmRlcigpYCBtZXRob2QgaXMgaW52b2tlZCwgd2hpY2ggaXMgcmVzcG9uc2li
        bGUgZm9yCiAgICBkb2luZyB0aGUgYnVsayBvZiB0aGUgcmVuZGVyaW5nLgoK
        ICAgIFlvdSBzaG91bGQgbm90IG5lZWQgdG8gb3ZlcnJpZGUgdGhpcyBtZXRo
        b2Q7IGluc3RlYWQsIGltcGxlbWVudCB0aGUKICAgIGB0ZW1wbGF0ZWAgcHJv
        cGVydHksIG9yIGlmIHlvdSBuZWVkIG1vcmUgY29udHJvbCwgb3ZlcnJpZGUg
        dGhlIGByZW5kZXJgCiAgICBtZXRob2QuCgogICAgQG1ldGhvZCByZW5kZXJU
        b0J1ZmZlcgogICAgQHBhcmFtIHtFbWJlci5SZW5kZXJCdWZmZXJ9IGJ1ZmZl
        ciB0aGUgcmVuZGVyIGJ1ZmZlci4gSWYgbm8gYnVmZmVyIGlzCiAgICAgIHBh
        c3NlZCwgYSBkZWZhdWx0IGJ1ZmZlciwgdXNpbmcgdGhlIGN1cnJlbnQgdmll
        dydzIGB0YWdOYW1lYCwgd2lsbAogICAgICBiZSB1c2VkLgogICovCiAgcmVu
        ZGVyVG9CdWZmZXI6IGZ1bmN0aW9uKHBhcmVudEJ1ZmZlciwgYnVmZmVyT3Bl
        cmF0aW9uKSB7CiAgICB2YXIgbmFtZSA9ICdyZW5kZXIuJyArIHRoaXMuaW5z
        dHJ1bWVudE5hbWUsCiAgICAgICAgZGV0YWlscyA9IHt9OwoKICAgIHRoaXMu
        aW5zdHJ1bWVudERldGFpbHMoZGV0YWlscyk7CgogICAgcmV0dXJuIEVtYmVy
        Lmluc3RydW1lbnQobmFtZSwgZGV0YWlscywgZnVuY3Rpb24oKSB7CiAgICAg
        IHJldHVybiB0aGlzLl9yZW5kZXJUb0J1ZmZlcihwYXJlbnRCdWZmZXIsIGJ1
        ZmZlck9wZXJhdGlvbik7CiAgICB9LCB0aGlzKTsKICB9LAoKICBfcmVuZGVy
        VG9CdWZmZXI6IGZ1bmN0aW9uKHBhcmVudEJ1ZmZlciwgYnVmZmVyT3BlcmF0
        aW9uKSB7CiAgICAvLyBJZiB0aGlzIGlzIHRoZSB0b3AtbW9zdCB2aWV3LCBz
        dGFydCBhIG5ldyBidWZmZXIuIE90aGVyd2lzZSwKICAgIC8vIGNyZWF0ZSBh
        IG5ldyBidWZmZXIgcmVsYXRpdmUgdG8gdGhlIG9yaWdpbmFsIHVzaW5nIHRo
        ZQogICAgLy8gcHJvdmlkZWQgYnVmZmVyIG9wZXJhdGlvbiAoZm9yIGV4YW1w
        bGUsIGBpbnNlcnRBZnRlcmAgd2lsbAogICAgLy8gaW5zZXJ0IGEgbmV3IGJ1
        ZmZlciBhZnRlciB0aGUgInBhcmVudCBidWZmZXIiKS4KICAgIHZhciB0YWdO
        YW1lID0gdGhpcy50YWdOYW1lOwoKICAgIGlmICh0YWdOYW1lID09PSBudWxs
        IHx8IHRhZ05hbWUgPT09IHVuZGVmaW5lZCkgewogICAgICB0YWdOYW1lID0g
        J2Rpdic7CiAgICB9CgogICAgdmFyIGJ1ZmZlciA9IHRoaXMuYnVmZmVyID0g
        cGFyZW50QnVmZmVyICYmIHBhcmVudEJ1ZmZlci5iZWdpbih0YWdOYW1lKSB8
        fCBFbWJlci5SZW5kZXJCdWZmZXIodGFnTmFtZSk7CiAgICB0aGlzLnRyYW5z
        aXRpb25UbygnaW5CdWZmZXInLCBmYWxzZSk7CgogICAgdGhpcy5iZWZvcmVS
        ZW5kZXIoYnVmZmVyKTsKICAgIHRoaXMucmVuZGVyKGJ1ZmZlcik7CiAgICB0
        aGlzLmFmdGVyUmVuZGVyKGJ1ZmZlcik7CgogICAgcmV0dXJuIGJ1ZmZlcjsK
        ICB9LAoKICAvKioKICAgIEBwcml2YXRlCgogICAgT3ZlcnJpZGUgdGhlIGRl
        ZmF1bHQgZXZlbnQgZmlyaW5nIGZyb20gYEVtYmVyLkV2ZW50ZWRgIHRvCiAg
        ICBhbHNvIGNhbGwgbWV0aG9kcyB3aXRoIHRoZSBnaXZlbiBuYW1lLgoKICAg
        IEBtZXRob2QgdHJpZ2dlcgogICAgQHBhcmFtIG5hbWUge1N0cmluZ30KICAq
        LwogIHRyaWdnZXI6IGZ1bmN0aW9uKG5hbWUpIHsKICAgIHRoaXMuX3N1cGVy
        LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICB2YXIgbWV0aG9kID0gdGhp
        c1tuYW1lXTsKICAgIGlmIChtZXRob2QpIHsKICAgICAgdmFyIGFyZ3MgPSBb
        XSwgaSwgbDsKICAgICAgZm9yIChpID0gMSwgbCA9IGFyZ3VtZW50cy5sZW5n
        dGg7IGkgPCBsOyBpKyspIHsKICAgICAgICBhcmdzLnB1c2goYXJndW1lbnRz
        W2ldKTsKICAgICAgfQogICAgICByZXR1cm4gbWV0aG9kLmFwcGx5KHRoaXMs
        IGFyZ3MpOwogICAgfQogIH0sCgogIGRlcHJlY2F0ZWRTZW5kSGFuZGxlczog
        ZnVuY3Rpb24oYWN0aW9uTmFtZSkgewogICAgcmV0dXJuICEhdGhpc1thY3Rp
        b25OYW1lXTsKICB9LAoKICBkZXByZWNhdGVkU2VuZDogZnVuY3Rpb24oYWN0
        aW9uTmFtZSkgewogICAgdmFyIGFyZ3MgPSBbXS5zbGljZS5jYWxsKGFyZ3Vt
        ZW50cywgMSk7CiAgICBFbWJlci5hc3NlcnQoJycgKyB0aGlzICsgIiBoYXMg
        dGhlIGFjdGlvbiAiICsgYWN0aW9uTmFtZSArICIgYnV0IGl0IGlzIG5vdCBh
        IGZ1bmN0aW9uIiwgdHlwZW9mIHRoaXNbYWN0aW9uTmFtZV0gPT09ICdmdW5j
        dGlvbicpOwogICAgRW1iZXIuZGVwcmVjYXRlKCdBY3Rpb24gaGFuZGxlcnMg
        aW1wbGVtZW50ZWQgZGlyZWN0bHkgb24gdmlld3MgYXJlIGRlcHJlY2F0ZWQg
        aW4gZmF2b3Igb2YgYWN0aW9uIGhhbmRsZXJzIG9uIGFuIGBhY3Rpb25zYCBv
        YmplY3QgKCcgKyBhY3Rpb25OYW1lICsgJyBvbiAnICsgdGhpcyArICcpJywg
        ZmFsc2UpOwogICAgdGhpc1thY3Rpb25OYW1lXS5hcHBseSh0aGlzLCBhcmdz
        KTsKICAgIHJldHVybjsKICB9LAoKICBoYXM6IGZ1bmN0aW9uKG5hbWUpIHsK
        ICAgIHJldHVybiBFbWJlci50eXBlT2YodGhpc1tuYW1lXSkgPT09ICdmdW5j
        dGlvbicgfHwgdGhpcy5fc3VwZXIobmFtZSk7CiAgfSwKCiAgZGVzdHJveTog
        ZnVuY3Rpb24oKSB7CiAgICB2YXIgcGFyZW50ID0gdGhpcy5fcGFyZW50Vmll
        dzsKCiAgICBpZiAoIXRoaXMuX3N1cGVyKCkpIHsgcmV0dXJuOyB9CgogICAg
        Ly8gZGVzdHJveSB0aGUgZWxlbWVudCAtLSB0aGlzIHdpbGwgYXZvaWQgZWFj
        aCBjaGlsZCB2aWV3IGRlc3Ryb3lpbmcKICAgIC8vIHRoZSBlbGVtZW50IG92
        ZXIgYW5kIG92ZXIgYWdhaW4uLi4KICAgIGlmICghdGhpcy5yZW1vdmVkRnJv
        bURPTSkgeyB0aGlzLmRlc3Ryb3lFbGVtZW50KCk7IH0KCiAgICAvLyByZW1v
        dmUgZnJvbSBwYXJlbnQgaWYgZm91bmQuIERvbid0IGNhbGwgcmVtb3ZlRnJv
        bVBhcmVudCwKICAgIC8vIGFzIHJlbW92ZUZyb21QYXJlbnQgd2lsbCB0cnkg
        dG8gcmVtb3ZlIHRoZSBlbGVtZW50IGZyb20KICAgIC8vIHRoZSBET00gYWdh
        aW4uCiAgICBpZiAocGFyZW50KSB7IHBhcmVudC5yZW1vdmVDaGlsZCh0aGlz
        KTsgfQoKICAgIHRoaXMudHJhbnNpdGlvblRvKCdkZXN0cm95aW5nJywgZmFs
        c2UpOwoKICAgIHJldHVybiB0aGlzOwogIH0sCgogIGNsZWFyUmVuZGVyZWRD
        aGlsZHJlbjogRW1iZXIuSywKICB0cmlnZ2VyUmVjdXJzaXZlbHk6IEVtYmVy
        LkssCiAgaW52b2tlUmVjdXJzaXZlbHk6IEVtYmVyLkssCiAgdHJhbnNpdGlv
        blRvOiBFbWJlci5LLAogIGRlc3Ryb3lFbGVtZW50OiBFbWJlci5LCn0pOwoK
        dmFyIFZpZXdDb2xsZWN0aW9uID0gRW1iZXIuX1ZpZXdDb2xsZWN0aW9uID0g
        ZnVuY3Rpb24oaW5pdGlhbFZpZXdzKSB7CiAgdmFyIHZpZXdzID0gdGhpcy52
        aWV3cyA9IGluaXRpYWxWaWV3cyB8fCBbXTsKICB0aGlzLmxlbmd0aCA9IHZp
        ZXdzLmxlbmd0aDsKfTsKClZpZXdDb2xsZWN0aW9uLnByb3RvdHlwZSA9IHsK
        ICBsZW5ndGg6IDAsCgogIHRyaWdnZXI6IGZ1bmN0aW9uKGV2ZW50TmFtZSkg
        ewogICAgdmFyIHZpZXdzID0gdGhpcy52aWV3cywgdmlldzsKICAgIGZvciAo
        dmFyIGkgPSAwLCBsID0gdmlld3MubGVuZ3RoOyBpIDwgbDsgaSsrKSB7CiAg
        ICAgIHZpZXcgPSB2aWV3c1tpXTsKICAgICAgaWYgKHZpZXcudHJpZ2dlcikg
        eyB2aWV3LnRyaWdnZXIoZXZlbnROYW1lKTsgfQogICAgfQogIH0sCgogIHRy
        aWdnZXJSZWN1cnNpdmVseTogZnVuY3Rpb24oZXZlbnROYW1lKSB7CiAgICB2
        YXIgdmlld3MgPSB0aGlzLnZpZXdzOwogICAgZm9yICh2YXIgaSA9IDAsIGwg
        PSB2aWV3cy5sZW5ndGg7IGkgPCBsOyBpKyspIHsKICAgICAgdmlld3NbaV0u
        dHJpZ2dlclJlY3Vyc2l2ZWx5KGV2ZW50TmFtZSk7CiAgICB9CiAgfSwKCiAg
        aW52b2tlUmVjdXJzaXZlbHk6IGZ1bmN0aW9uKGZuKSB7CiAgICB2YXIgdmll
        d3MgPSB0aGlzLnZpZXdzLCB2aWV3OwoKICAgIGZvciAodmFyIGkgPSAwLCBs
        ID0gdmlld3MubGVuZ3RoOyBpIDwgbDsgaSsrKSB7CiAgICAgIHZpZXcgPSB2
        aWV3c1tpXTsKICAgICAgZm4odmlldyk7CiAgICB9CiAgfSwKCiAgdHJhbnNp
        dGlvblRvOiBmdW5jdGlvbihzdGF0ZSwgY2hpbGRyZW4pIHsKICAgIHZhciB2
        aWV3cyA9IHRoaXMudmlld3M7CiAgICBmb3IgKHZhciBpID0gMCwgbCA9IHZp
        ZXdzLmxlbmd0aDsgaSA8IGw7IGkrKykgewogICAgICB2aWV3c1tpXS50cmFu
        c2l0aW9uVG8oc3RhdGUsIGNoaWxkcmVuKTsKICAgIH0KICB9LAoKICBwdXNo
        OiBmdW5jdGlvbigpIHsKICAgIHRoaXMubGVuZ3RoICs9IGFyZ3VtZW50cy5s
        ZW5ndGg7CiAgICB2YXIgdmlld3MgPSB0aGlzLnZpZXdzOwogICAgcmV0dXJu
        IHZpZXdzLnB1c2guYXBwbHkodmlld3MsIGFyZ3VtZW50cyk7CiAgfSwKCiAg
        b2JqZWN0QXQ6IGZ1bmN0aW9uKGlkeCkgewogICAgcmV0dXJuIHRoaXMudmll
        d3NbaWR4XTsKICB9LAoKICBmb3JFYWNoOiBmdW5jdGlvbihjYWxsYmFjaykg
        ewogICAgdmFyIHZpZXdzID0gdGhpcy52aWV3czsKICAgIHJldHVybiBhX2Zv
        ckVhY2godmlld3MsIGNhbGxiYWNrKTsKICB9LAoKICBjbGVhcjogZnVuY3Rp
        b24oKSB7CiAgICB0aGlzLmxlbmd0aCA9IDA7CiAgICB0aGlzLnZpZXdzLmxl
        bmd0aCA9IDA7CiAgfQp9OwoKdmFyIEVNUFRZX0FSUkFZID0gW107CgovKioK
        ICBgRW1iZXIuVmlld2AgaXMgdGhlIGNsYXNzIGluIEVtYmVyIHJlc3BvbnNp
        YmxlIGZvciBlbmNhcHN1bGF0aW5nIHRlbXBsYXRlcyBvZgogIEhUTUwgY29u
        dGVudCwgY29tYmluaW5nIHRlbXBsYXRlcyB3aXRoIGRhdGEgdG8gcmVuZGVy
        IGFzIHNlY3Rpb25zIG9mIGEgcGFnZSdzCiAgRE9NLCBhbmQgcmVnaXN0ZXJp
        bmcgYW5kIHJlc3BvbmRpbmcgdG8gdXNlci1pbml0aWF0ZWQgZXZlbnRzLgoK
        ICAjIyBIVE1MIFRhZwoKICBUaGUgZGVmYXVsdCBIVE1MIHRhZyBuYW1lIHVz
        ZWQgZm9yIGEgdmlldydzIERPTSByZXByZXNlbnRhdGlvbiBpcyBgZGl2YC4g
        VGhpcwogIGNhbiBiZSBjdXN0b21pemVkIGJ5IHNldHRpbmcgdGhlIGB0YWdO
        YW1lYCBwcm9wZXJ0eS4gVGhlIGZvbGxvd2luZyB2aWV3CiAgY2xhc3M6Cgog
        IGBgYGphdmFzY3JpcHQKICBQYXJhZ3JhcGhWaWV3ID0gRW1iZXIuVmlldy5l
        eHRlbmQoewogICAgdGFnTmFtZTogJ2VtJwogIH0pOwogIGBgYAoKICBXb3Vs
        ZCByZXN1bHQgaW4gaW5zdGFuY2VzIHdpdGggdGhlIGZvbGxvd2luZyBIVE1M
        OgoKICBgYGBodG1sCiAgPGVtIGlkPSJlbWJlcjEiIGNsYXNzPSJlbWJlci12
        aWV3Ij48L2VtPgogIGBgYAoKICAjIyBIVE1MIGBjbGFzc2AgQXR0cmlidXRl
        CgogIFRoZSBIVE1MIGBjbGFzc2AgYXR0cmlidXRlIG9mIGEgdmlldydzIHRh
        ZyBjYW4gYmUgc2V0IGJ5IHByb3ZpZGluZyBhCiAgYGNsYXNzTmFtZXNgIHBy
        b3BlcnR5IHRoYXQgaXMgc2V0IHRvIGFuIGFycmF5IG9mIHN0cmluZ3M6Cgog
        IGBgYGphdmFzY3JpcHQKICBNeVZpZXcgPSBFbWJlci5WaWV3LmV4dGVuZCh7
        CiAgICBjbGFzc05hbWVzOiBbJ215LWNsYXNzJywgJ215LW90aGVyLWNsYXNz
        J10KICB9KTsKICBgYGAKCiAgV2lsbCByZXN1bHQgaW4gdmlldyBpbnN0YW5j
        ZXMgd2l0aCBhbiBIVE1MIHJlcHJlc2VudGF0aW9uIG9mOgoKICBgYGBodG1s
        CiAgPGRpdiBpZD0iZW1iZXIxIiBjbGFzcz0iZW1iZXItdmlldyBteS1jbGFz
        cyBteS1vdGhlci1jbGFzcyI+PC9kaXY+CiAgYGBgCgogIGBjbGFzc2AgYXR0
        cmlidXRlIHZhbHVlcyBjYW4gYWxzbyBiZSBzZXQgYnkgcHJvdmlkaW5nIGEg
        YGNsYXNzTmFtZUJpbmRpbmdzYAogIHByb3BlcnR5IHNldCB0byBhbiBhcnJh
        eSBvZiBwcm9wZXJ0aWVzIG5hbWVzIGZvciB0aGUgdmlldy4gVGhlIHJldHVy
        biB2YWx1ZQogIG9mIHRoZXNlIHByb3BlcnRpZXMgd2lsbCBiZSBhZGRlZCBh
        cyBwYXJ0IG9mIHRoZSB2YWx1ZSBmb3IgdGhlIHZpZXcncyBgY2xhc3NgCiAg
        YXR0cmlidXRlLiBUaGVzZSBwcm9wZXJ0aWVzIGNhbiBiZSBjb21wdXRlZCBw
        cm9wZXJ0aWVzOgoKICBgYGBqYXZhc2NyaXB0CiAgTXlWaWV3ID0gRW1iZXIu
        Vmlldy5leHRlbmQoewogICAgY2xhc3NOYW1lQmluZGluZ3M6IFsncHJvcGVy
        dHlBJywgJ3Byb3BlcnR5QiddLAogICAgcHJvcGVydHlBOiAnZnJvbS1hJywK
        ICAgIHByb3BlcnR5QjogZnVuY3Rpb24oKSB7CiAgICAgIGlmIChzb21lTG9n
        aWMpIHsgcmV0dXJuICdmcm9tLWInOyB9CiAgICB9LnByb3BlcnR5KCkKICB9
        KTsKICBgYGAKCiAgV2lsbCByZXN1bHQgaW4gdmlldyBpbnN0YW5jZXMgd2l0
        aCBhbiBIVE1MIHJlcHJlc2VudGF0aW9uIG9mOgoKICBgYGBodG1sCiAgPGRp
        diBpZD0iZW1iZXIxIiBjbGFzcz0iZW1iZXItdmlldyBmcm9tLWEgZnJvbS1i
        Ij48L2Rpdj4KICBgYGAKCiAgSWYgdGhlIHZhbHVlIG9mIGEgY2xhc3MgbmFt
        ZSBiaW5kaW5nIHJldHVybnMgYSBib29sZWFuIHRoZSBwcm9wZXJ0eSBuYW1l
        CiAgaXRzZWxmIHdpbGwgYmUgdXNlZCBhcyB0aGUgY2xhc3MgbmFtZSBpZiB0
        aGUgcHJvcGVydHkgaXMgdHJ1ZS4gVGhlIGNsYXNzIG5hbWUKICB3aWxsIG5v
        dCBiZSBhZGRlZCBpZiB0aGUgdmFsdWUgaXMgYGZhbHNlYCBvciBgdW5kZWZp
        bmVkYC4KCiAgYGBgamF2YXNjcmlwdAogIE15VmlldyA9IEVtYmVyLlZpZXcu
        ZXh0ZW5kKHsKICAgIGNsYXNzTmFtZUJpbmRpbmdzOiBbJ2hvdmVyZWQnXSwK
        ICAgIGhvdmVyZWQ6IHRydWUKICB9KTsKICBgYGAKCiAgV2lsbCByZXN1bHQg
        aW4gdmlldyBpbnN0YW5jZXMgd2l0aCBhbiBIVE1MIHJlcHJlc2VudGF0aW9u
        IG9mOgoKICBgYGBodG1sCiAgPGRpdiBpZD0iZW1iZXIxIiBjbGFzcz0iZW1i
        ZXItdmlldyBob3ZlcmVkIj48L2Rpdj4KICBgYGAKCiAgV2hlbiB1c2luZyBi
        b29sZWFuIGNsYXNzIG5hbWUgYmluZGluZ3MgeW91IGNhbiBzdXBwbHkgYSBz
        dHJpbmcgdmFsdWUgb3RoZXIKICB0aGFuIHRoZSBwcm9wZXJ0eSBuYW1lIGZv
        ciB1c2UgYXMgdGhlIGBjbGFzc2AgSFRNTCBhdHRyaWJ1dGUgYnkgYXBwZW5k
        aW5nIHRoZQogIHByZWZlcnJlZCB2YWx1ZSBhZnRlciBhICI6IiBjaGFyYWN0
        ZXIgd2hlbiBkZWZpbmluZyB0aGUgYmluZGluZzoKCiAgYGBgamF2YXNjcmlw
        dAogIE15VmlldyA9IEVtYmVyLlZpZXcuZXh0ZW5kKHsKICAgIGNsYXNzTmFt
        ZUJpbmRpbmdzOiBbJ2F3ZXNvbWU6c28tdmVyeS1jb29sJ10sCiAgICBhd2Vz
        b21lOiB0cnVlCiAgfSk7CiAgYGBgCgogIFdpbGwgcmVzdWx0IGluIHZpZXcg
        aW5zdGFuY2VzIHdpdGggYW4gSFRNTCByZXByZXNlbnRhdGlvbiBvZjoKCiAg
        YGBgaHRtbAogIDxkaXYgaWQ9ImVtYmVyMSIgY2xhc3M9ImVtYmVyLXZpZXcg
        c28tdmVyeS1jb29sIj48L2Rpdj4KICBgYGAKCiAgQm9vbGVhbiB2YWx1ZSBj
        bGFzcyBuYW1lIGJpbmRpbmdzIHdob3NlIHByb3BlcnR5IG5hbWVzIGFyZSBp
        biBhCiAgY2FtZWxDYXNlLXN0eWxlIGZvcm1hdCB3aWxsIGJlIGNvbnZlcnRl
        ZCB0byBhIGRhc2hlcml6ZWQgZm9ybWF0OgoKICBgYGBqYXZhc2NyaXB0CiAg
        TXlWaWV3ID0gRW1iZXIuVmlldy5leHRlbmQoewogICAgY2xhc3NOYW1lQmlu
        ZGluZ3M6IFsnaXNVcmdlbnQnXSwKICAgIGlzVXJnZW50OiB0cnVlCiAgfSk7
        CiAgYGBgCgogIFdpbGwgcmVzdWx0IGluIHZpZXcgaW5zdGFuY2VzIHdpdGgg
        YW4gSFRNTCByZXByZXNlbnRhdGlvbiBvZjoKCiAgYGBgaHRtbAogIDxkaXYg
        aWQ9ImVtYmVyMSIgY2xhc3M9ImVtYmVyLXZpZXcgaXMtdXJnZW50Ij48L2Rp
        dj4KICBgYGAKCiAgQ2xhc3MgbmFtZSBiaW5kaW5ncyBjYW4gYWxzbyByZWZl
        ciB0byBvYmplY3QgdmFsdWVzIHRoYXQgYXJlIGZvdW5kIGJ5CiAgdHJhdmVy
        c2luZyBhIHBhdGggcmVsYXRpdmUgdG8gdGhlIHZpZXcgaXRzZWxmOgoKICBg
        YGBqYXZhc2NyaXB0CiAgTXlWaWV3ID0gRW1iZXIuVmlldy5leHRlbmQoewog
        ICAgY2xhc3NOYW1lQmluZGluZ3M6IFsnbWVzc2FnZXMuZW1wdHknXQogICAg
        bWVzc2FnZXM6IEVtYmVyLk9iamVjdC5jcmVhdGUoewogICAgICBlbXB0eTog
        dHJ1ZQogICAgfSkKICB9KTsKICBgYGAKCiAgV2lsbCByZXN1bHQgaW4gdmll
        dyBpbnN0YW5jZXMgd2l0aCBhbiBIVE1MIHJlcHJlc2VudGF0aW9uIG9mOgoK
        ICBgYGBodG1sCiAgPGRpdiBpZD0iZW1iZXIxIiBjbGFzcz0iZW1iZXItdmll
        dyBlbXB0eSI+PC9kaXY+CiAgYGBgCgogIElmIHlvdSB3YW50IHRvIGFkZCBh
        IGNsYXNzIG5hbWUgZm9yIGEgcHJvcGVydHkgd2hpY2ggZXZhbHVhdGVzIHRv
        IHRydWUgYW5kCiAgYW5kIGEgZGlmZmVyZW50IGNsYXNzIG5hbWUgaWYgaXQg
        ZXZhbHVhdGVzIHRvIGZhbHNlLCB5b3UgY2FuIHBhc3MgYSBiaW5kaW5nCiAg
        bGlrZSB0aGlzOgoKICBgYGBqYXZhc2NyaXB0CiAgLy8gQXBwbGllcyAnZW5h
        YmxlZCcgY2xhc3Mgd2hlbiBpc0VuYWJsZWQgaXMgdHJ1ZSBhbmQgJ2Rpc2Fi
        bGVkJyB3aGVuIGlzRW5hYmxlZCBpcyBmYWxzZQogIEVtYmVyLlZpZXcuZXh0
        ZW5kKHsKICAgIGNsYXNzTmFtZUJpbmRpbmdzOiBbJ2lzRW5hYmxlZDplbmFi
        bGVkOmRpc2FibGVkJ10KICAgIGlzRW5hYmxlZDogdHJ1ZQogIH0pOwogIGBg
        YAoKICBXaWxsIHJlc3VsdCBpbiB2aWV3IGluc3RhbmNlcyB3aXRoIGFuIEhU
        TUwgcmVwcmVzZW50YXRpb24gb2Y6CgogIGBgYGh0bWwKICA8ZGl2IGlkPSJl
        bWJlcjEiIGNsYXNzPSJlbWJlci12aWV3IGVuYWJsZWQiPjwvZGl2PgogIGBg
        YAoKICBXaGVuIGlzRW5hYmxlZCBpcyBgZmFsc2VgLCB0aGUgcmVzdWx0aW5n
        IEhUTUwgcmVwcmVuc2VudGF0aW9uIGxvb2tzIGxpa2UKICB0aGlzOgoKICBg
        YGBodG1sCiAgPGRpdiBpZD0iZW1iZXIxIiBjbGFzcz0iZW1iZXItdmlldyBk
        aXNhYmxlZCI+PC9kaXY+CiAgYGBgCgogIFRoaXMgc3ludGF4IG9mZmVycyB0
        aGUgY29udmVuaWVuY2UgdG8gYWRkIGEgY2xhc3MgaWYgYSBwcm9wZXJ0eSBp
        cyBgZmFsc2VgOgoKICBgYGBqYXZhc2NyaXB0CiAgLy8gQXBwbGllcyBubyBj
        bGFzcyB3aGVuIGlzRW5hYmxlZCBpcyB0cnVlIGFuZCBjbGFzcyAnZGlzYWJs
        ZWQnIHdoZW4gaXNFbmFibGVkIGlzIGZhbHNlCiAgRW1iZXIuVmlldy5leHRl
        bmQoewogICAgY2xhc3NOYW1lQmluZGluZ3M6IFsnaXNFbmFibGVkOjpkaXNh
        YmxlZCddCiAgICBpc0VuYWJsZWQ6IHRydWUKICB9KTsKICBgYGAKCiAgV2ls
        bCByZXN1bHQgaW4gdmlldyBpbnN0YW5jZXMgd2l0aCBhbiBIVE1MIHJlcHJl
        c2VudGF0aW9uIG9mOgoKICBgYGBodG1sCiAgPGRpdiBpZD0iZW1iZXIxIiBj
        bGFzcz0iZW1iZXItdmlldyI+PC9kaXY+CiAgYGBgCgogIFdoZW4gdGhlIGBp
        c0VuYWJsZWRgIHByb3BlcnR5IG9uIHRoZSB2aWV3IGlzIHNldCB0byBgZmFs
        c2VgLCBpdCB3aWxsIHJlc3VsdAogIGluIHZpZXcgaW5zdGFuY2VzIHdpdGgg
        YW4gSFRNTCByZXByZXNlbnRhdGlvbiBvZjoKCiAgYGBgaHRtbAogIDxkaXYg
        aWQ9ImVtYmVyMSIgY2xhc3M9ImVtYmVyLXZpZXcgZGlzYWJsZWQiPjwvZGl2
        PgogIGBgYAoKICBVcGRhdGVzIHRvIHRoZSB0aGUgdmFsdWUgb2YgYSBjbGFz
        cyBuYW1lIGJpbmRpbmcgd2lsbCByZXN1bHQgaW4gYXV0b21hdGljCiAgdXBk
        YXRlIG9mIHRoZSAgSFRNTCBgY2xhc3NgIGF0dHJpYnV0ZSBpbiB0aGUgdmll
        dydzIHJlbmRlcmVkIEhUTUwKICByZXByZXNlbnRhdGlvbi4gSWYgdGhlIHZh
        bHVlIGJlY29tZXMgYGZhbHNlYCBvciBgdW5kZWZpbmVkYCB0aGUgY2xhc3Mg
        bmFtZQogIHdpbGwgYmUgcmVtb3ZlZC4KCiAgQm90aCBgY2xhc3NOYW1lc2Ag
        YW5kIGBjbGFzc05hbWVCaW5kaW5nc2AgYXJlIGNvbmNhdGVuYXRlZCBwcm9w
        ZXJ0aWVzLiBTZWUKICBbRW1iZXIuT2JqZWN0XSgvYXBpL2NsYXNzZXMvRW1i
        ZXIuT2JqZWN0Lmh0bWwpIGRvY3VtZW50YXRpb24gZm9yIG1vcmUKICBpbmZv
        cm1hdGlvbiBhYm91dCBjb25jYXRlbmF0ZWQgcHJvcGVydGllcy4KCiAgIyMg
        SFRNTCBBdHRyaWJ1dGVzCgogIFRoZSBIVE1MIGF0dHJpYnV0ZSBzZWN0aW9u
        IG9mIGEgdmlldydzIHRhZyBjYW4gYmUgc2V0IGJ5IHByb3ZpZGluZyBhbgog
        IGBhdHRyaWJ1dGVCaW5kaW5nc2AgcHJvcGVydHkgc2V0IHRvIGFuIGFycmF5
        IG9mIHByb3BlcnR5IG5hbWVzIG9uIHRoZSB2aWV3LgogIFRoZSByZXR1cm4g
        dmFsdWUgb2YgdGhlc2UgcHJvcGVydGllcyB3aWxsIGJlIHVzZWQgYXMgdGhl
        IHZhbHVlIG9mIHRoZSB2aWV3J3MKICBIVE1MIGFzc29jaWF0ZWQgYXR0cmli
        dXRlOgoKICBgYGBqYXZhc2NyaXB0CiAgQW5jaG9yVmlldyA9IEVtYmVyLlZp
        ZXcuZXh0ZW5kKHsKICAgIHRhZ05hbWU6ICdhJywKICAgIGF0dHJpYnV0ZUJp
        bmRpbmdzOiBbJ2hyZWYnXSwKICAgIGhyZWY6ICdodHRwOi8vZ29vZ2xlLmNv
        bScKICB9KTsKICBgYGAKCiAgV2lsbCByZXN1bHQgaW4gdmlldyBpbnN0YW5j
        ZXMgd2l0aCBhbiBIVE1MIHJlcHJlc2VudGF0aW9uIG9mOgoKICBgYGBodG1s
        CiAgPGEgaWQ9ImVtYmVyMSIgY2xhc3M9ImVtYmVyLXZpZXciIGhyZWY9Imh0
        dHA6Ly9nb29nbGUuY29tIj48L2E+CiAgYGBgCgogIElmIHRoZSByZXR1cm4g
        dmFsdWUgb2YgYW4gYGF0dHJpYnV0ZUJpbmRpbmdzYCBtb25pdG9yZWQgcHJv
        cGVydHkgaXMgYSBib29sZWFuCiAgdGhlIHByb3BlcnR5IHdpbGwgZm9sbG93
        IEhUTUwncyBwYXR0ZXJuIG9mIHJlcGVhdGluZyB0aGUgYXR0cmlidXRlJ3Mg
        bmFtZSBhcwogIGl0cyB2YWx1ZToKCiAgYGBgamF2YXNjcmlwdAogIE15VGV4
        dElucHV0ID0gRW1iZXIuVmlldy5leHRlbmQoewogICAgdGFnTmFtZTogJ2lu
        cHV0JywKICAgIGF0dHJpYnV0ZUJpbmRpbmdzOiBbJ2Rpc2FibGVkJ10sCiAg
        ICBkaXNhYmxlZDogdHJ1ZQogIH0pOwogIGBgYAoKICBXaWxsIHJlc3VsdCBp
        biB2aWV3IGluc3RhbmNlcyB3aXRoIGFuIEhUTUwgcmVwcmVzZW50YXRpb24g
        b2Y6CgogIGBgYGh0bWwKICA8aW5wdXQgaWQ9ImVtYmVyMSIgY2xhc3M9ImVt
        YmVyLXZpZXciIGRpc2FibGVkPSJkaXNhYmxlZCIgLz4KICBgYGAKCiAgYGF0
        dHJpYnV0ZUJpbmRpbmdzYCBjYW4gcmVmZXIgdG8gY29tcHV0ZWQgcHJvcGVy
        dGllczoKCiAgYGBgamF2YXNjcmlwdAogIE15VGV4dElucHV0ID0gRW1iZXIu
        Vmlldy5leHRlbmQoewogICAgdGFnTmFtZTogJ2lucHV0JywKICAgIGF0dHJp
        YnV0ZUJpbmRpbmdzOiBbJ2Rpc2FibGVkJ10sCiAgICBkaXNhYmxlZDogZnVu
        Y3Rpb24oKSB7CiAgICAgIGlmIChzb21lTG9naWMpIHsKICAgICAgICByZXR1
        cm4gdHJ1ZTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gZmFsc2U7
        CiAgICAgIH0KICAgIH0ucHJvcGVydHkoKQogIH0pOwogIGBgYAoKICBVcGRh
        dGVzIHRvIHRoZSB0aGUgcHJvcGVydHkgb2YgYW4gYXR0cmlidXRlIGJpbmRp
        bmcgd2lsbCByZXN1bHQgaW4gYXV0b21hdGljCiAgdXBkYXRlIG9mIHRoZSAg
        SFRNTCBhdHRyaWJ1dGUgaW4gdGhlIHZpZXcncyByZW5kZXJlZCBIVE1MIHJl
        cHJlc2VudGF0aW9uLgoKICBgYXR0cmlidXRlQmluZGluZ3NgIGlzIGEgY29u
        Y2F0ZW5hdGVkIHByb3BlcnR5LiBTZWUgW0VtYmVyLk9iamVjdF0oL2FwaS9j
        bGFzc2VzL0VtYmVyLk9iamVjdC5odG1sKQogIGRvY3VtZW50YXRpb24gZm9y
        IG1vcmUgaW5mb3JtYXRpb24gYWJvdXQgY29uY2F0ZW5hdGVkIHByb3BlcnRp
        ZXMuCgogICMjIFRlbXBsYXRlcwoKICBUaGUgSFRNTCBjb250ZW50cyBvZiBh
        IHZpZXcncyByZW5kZXJlZCByZXByZXNlbnRhdGlvbiBhcmUgZGV0ZXJtaW5l
        ZCBieSBpdHMKICB0ZW1wbGF0ZS4gVGVtcGxhdGVzIGNhbiBiZSBhbnkgZnVu
        Y3Rpb24gdGhhdCBhY2NlcHRzIGFuIG9wdGlvbmFsIGNvbnRleHQKICBwYXJh
        bWV0ZXIgYW5kIHJldHVybnMgYSBzdHJpbmcgb2YgSFRNTCB0aGF0IHdpbGwg
        YmUgaW5zZXJ0ZWQgd2l0aGluIHRoZQogIHZpZXcncyB0YWcuIE1vc3QgdHlw
        aWNhbGx5IGluIEVtYmVyIHRoaXMgZnVuY3Rpb24gd2lsbCBiZSBhIGNvbXBp
        bGVkCiAgYEVtYmVyLkhhbmRsZWJhcnNgIHRlbXBsYXRlLgoKICBgYGBqYXZh
        c2NyaXB0CiAgQVZpZXcgPSBFbWJlci5WaWV3LmV4dGVuZCh7CiAgICB0ZW1w
        bGF0ZTogRW1iZXIuSGFuZGxlYmFycy5jb21waWxlKCdJIGFtIHRoZSB0ZW1w
        bGF0ZScpCiAgfSk7CiAgYGBgCgogIFdpbGwgcmVzdWx0IGluIHZpZXcgaW5z
        dGFuY2VzIHdpdGggYW4gSFRNTCByZXByZXNlbnRhdGlvbiBvZjoKCiAgYGBg
        aHRtbAogIDxkaXYgaWQ9ImVtYmVyMSIgY2xhc3M9ImVtYmVyLXZpZXciPkkg
        YW0gdGhlIHRlbXBsYXRlPC9kaXY+CiAgYGBgCgogIFdpdGhpbiBhbiBFbWJl
        ciBhcHBsaWNhdGlvbiBpcyBtb3JlIGNvbW1vbiB0byBkZWZpbmUgYSBIYW5k
        bGViYXJzIHRlbXBsYXRlcyBhcwogIHBhcnQgb2YgYSBwYWdlOgoKICBgYGBo
        dG1sCiAgPHNjcmlwdCB0eXBlPSd0ZXh0L3gtaGFuZGxlYmFycycgZGF0YS10
        ZW1wbGF0ZS1uYW1lPSdzb21lLXRlbXBsYXRlJz4KICAgIEhlbGxvCiAgPC9z
        Y3JpcHQ+CiAgYGBgCgogIEFuZCBhc3NvY2lhdGUgaXQgYnkgbmFtZSB1c2lu
        ZyBhIHZpZXcncyBgdGVtcGxhdGVOYW1lYCBwcm9wZXJ0eToKCiAgYGBgamF2
        YXNjcmlwdAogIEFWaWV3ID0gRW1iZXIuVmlldy5leHRlbmQoewogICAgdGVt
        cGxhdGVOYW1lOiAnc29tZS10ZW1wbGF0ZScKICB9KTsKICBgYGAKCiAgVXNp
        bmcgYSB2YWx1ZSBmb3IgYHRlbXBsYXRlTmFtZWAgdGhhdCBkb2VzIG5vdCBo
        YXZlIGEgSGFuZGxlYmFycyB0ZW1wbGF0ZQogIHdpdGggYSBtYXRjaGluZyBg
        ZGF0YS10ZW1wbGF0ZS1uYW1lYCBhdHRyaWJ1dGUgd2lsbCB0aHJvdyBhbiBl
        cnJvci4KCiAgRm9yIHZpZXdzIGNsYXNzZXMgdGhhdCBtYXkgaGF2ZSBhIHRl
        bXBsYXRlIGxhdGVyIGRlZmluZWQgKGUuZy4gYXMgdGhlIGJsb2NrCiAgcG9y
        dGlvbiBvZiBhIGB7e3ZpZXd9fWAgSGFuZGxlYmFycyBoZWxwZXIgY2FsbCBp
        biBhbm90aGVyIHRlbXBsYXRlIG9yIGluCiAgYSBzdWJjbGFzcyksIHlvdSBj
        YW4gcHJvdmlkZSBhIGBkZWZhdWx0VGVtcGxhdGVgIHByb3BlcnR5IHNldCB0
        byBjb21waWxlZAogIHRlbXBsYXRlIGZ1bmN0aW9uLiBJZiBhIHRlbXBsYXRl
        IGlzIG5vdCBsYXRlciBwcm92aWRlZCBmb3IgdGhlIHZpZXcgaW5zdGFuY2UK
        ICB0aGUgYGRlZmF1bHRUZW1wbGF0ZWAgdmFsdWUgd2lsbCBiZSB1c2VkOgoK
        ICBgYGBqYXZhc2NyaXB0CiAgQVZpZXcgPSBFbWJlci5WaWV3LmV4dGVuZCh7
        CiAgICBkZWZhdWx0VGVtcGxhdGU6IEVtYmVyLkhhbmRsZWJhcnMuY29tcGls
        ZSgnSSB3YXMgdGhlIGRlZmF1bHQnKSwKICAgIHRlbXBsYXRlOiBudWxsLAog
        ICAgdGVtcGxhdGVOYW1lOiBudWxsCiAgfSk7CiAgYGBgCgogIFdpbGwgcmVz
        dWx0IGluIGluc3RhbmNlcyB3aXRoIGFuIEhUTUwgcmVwcmVzZW50YXRpb24g
        b2Y6CgogIGBgYGh0bWwKICA8ZGl2IGlkPSJlbWJlcjEiIGNsYXNzPSJlbWJl
        ci12aWV3Ij5JIHdhcyB0aGUgZGVmYXVsdDwvZGl2PgogIGBgYAoKICBJZiBh
        IGB0ZW1wbGF0ZWAgb3IgYHRlbXBsYXRlTmFtZWAgaXMgcHJvdmlkZWQgaXQg
        d2lsbCB0YWtlIHByZWNlZGVuY2Ugb3ZlcgogIGBkZWZhdWx0VGVtcGxhdGVg
        OgoKICBgYGBqYXZhc2NyaXB0CiAgQVZpZXcgPSBFbWJlci5WaWV3LmV4dGVu
        ZCh7CiAgICBkZWZhdWx0VGVtcGxhdGU6IEVtYmVyLkhhbmRsZWJhcnMuY29t
        cGlsZSgnSSB3YXMgdGhlIGRlZmF1bHQnKQogIH0pOwoKICBhVmlldyA9IEFW
        aWV3LmNyZWF0ZSh7CiAgICB0ZW1wbGF0ZTogRW1iZXIuSGFuZGxlYmFycy5j
        b21waWxlKCdJIHdhcyB0aGUgdGVtcGxhdGUsIG5vdCBkZWZhdWx0JykKICB9
        KTsKICBgYGAKCiAgV2lsbCByZXN1bHQgaW4gdGhlIGZvbGxvd2luZyBIVE1M
        IHJlcHJlc2VudGF0aW9uIHdoZW4gcmVuZGVyZWQ6CgogIGBgYGh0bWwKICA8
        ZGl2IGlkPSJlbWJlcjEiIGNsYXNzPSJlbWJlci12aWV3Ij5JIHdhcyB0aGUg
        dGVtcGxhdGUsIG5vdCBkZWZhdWx0PC9kaXY+CiAgYGBgCgogICMjIFZpZXcg
        Q29udGV4dAoKICBUaGUgZGVmYXVsdCBjb250ZXh0IG9mIHRoZSBjb21waWxl
        ZCB0ZW1wbGF0ZSBpcyB0aGUgdmlldydzIGNvbnRyb2xsZXI6CgogIGBgYGph
        dmFzY3JpcHQKICBBVmlldyA9IEVtYmVyLlZpZXcuZXh0ZW5kKHsKICAgIHRl
        bXBsYXRlOiBFbWJlci5IYW5kbGViYXJzLmNvbXBpbGUoJ0hlbGxvIHt7ZXhj
        aXRlZEdyZWV0aW5nfX0nKQogIH0pOwoKICBhQ29udHJvbGxlciA9IEVtYmVy
        Lk9iamVjdC5jcmVhdGUoewogICAgZmlyc3ROYW1lOiAnQmFycnknLAogICAg
        ZXhjaXRlZEdyZWV0aW5nOiBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIHRo
        aXMuZ2V0KCJjb250ZW50LmZpcnN0TmFtZSIpICsgIiEhISIKICAgIH0ucHJv
        cGVydHkoKQogIH0pOwoKICBhVmlldyA9IEFWaWV3LmNyZWF0ZSh7CiAgICBj
        b250cm9sbGVyOiBhQ29udHJvbGxlciwKICB9KTsKICBgYGAKCiAgV2lsbCBy
        ZXN1bHQgaW4gYW4gSFRNTCByZXByZXNlbnRhdGlvbiBvZjoKCiAgYGBgaHRt
        bAogIDxkaXYgaWQ9ImVtYmVyMSIgY2xhc3M9ImVtYmVyLXZpZXciPkhlbGxv
        IEJhcnJ5ISEhPC9kaXY+CiAgYGBgCgogIEEgY29udGV4dCBjYW4gYWxzbyBi
        ZSBleHBsaWNpdGx5IHN1cHBsaWVkIHRocm91Z2ggdGhlIHZpZXcncyBgY29u
        dGV4dGAKICBwcm9wZXJ0eS4gSWYgdGhlIHZpZXcgaGFzIG5laXRoZXIgYGNv
        bnRleHRgIG5vciBgY29udHJvbGxlcmAgcHJvcGVydGllcywgdGhlCiAgYHBh
        cmVudFZpZXdgJ3MgY29udGV4dCB3aWxsIGJlIHVzZWQuCgogICMjIExheW91
        dHMKCiAgVmlld3MgY2FuIGhhdmUgYSBzZWNvbmRhcnkgdGVtcGxhdGUgdGhh
        dCB3cmFwcyB0aGVpciBtYWluIHRlbXBsYXRlLiBMaWtlCiAgcHJpbWFyeSB0
        ZW1wbGF0ZXMsIGxheW91dHMgY2FuIGJlIGFueSBmdW5jdGlvbiB0aGF0ICBh
        Y2NlcHRzIGFuIG9wdGlvbmFsCiAgY29udGV4dCBwYXJhbWV0ZXIgYW5kIHJl
        dHVybnMgYSBzdHJpbmcgb2YgSFRNTCB0aGF0IHdpbGwgYmUgaW5zZXJ0ZWQg
        aW5zaWRlCiAgdmlldydzIHRhZy4gVmlld3Mgd2hvc2UgSFRNTCBlbGVtZW50
        IGlzIHNlbGYgY2xvc2luZyAoZS5nLiBgPGlucHV0IC8+YCkKICBjYW5ub3Qg
        aGF2ZSBhIGxheW91dCBhbmQgdGhpcyBwcm9wZXJ0eSB3aWxsIGJlIGlnbm9y
        ZWQuCgogIE1vc3QgdHlwaWNhbGx5IGluIEVtYmVyIGEgbGF5b3V0IHdpbGwg
        YmUgYSBjb21waWxlZCBgRW1iZXIuSGFuZGxlYmFyc2AKICB0ZW1wbGF0ZS4K
        CiAgQSB2aWV3J3MgbGF5b3V0IGNhbiBiZSBzZXQgZGlyZWN0bHkgd2l0aCB0
        aGUgYGxheW91dGAgcHJvcGVydHkgb3IgcmVmZXJlbmNlCiAgYW4gZXhpc3Rp
        bmcgSGFuZGxlYmFycyB0ZW1wbGF0ZSBieSBuYW1lIHdpdGggdGhlIGBsYXlv
        dXROYW1lYCBwcm9wZXJ0eS4KCiAgQSB0ZW1wbGF0ZSB1c2VkIGFzIGEgbGF5
        b3V0IG11c3QgY29udGFpbiBhIHNpbmdsZSB1c2Ugb2YgdGhlIEhhbmRsZWJh
        cnMKICBge3t5aWVsZH19YCBoZWxwZXIuIFRoZSBIVE1MIGNvbnRlbnRzIG9m
        IGEgdmlldydzIHJlbmRlcmVkIGB0ZW1wbGF0ZWAgd2lsbCBiZQogIGluc2Vy
        dGVkIGF0IHRoaXMgbG9jYXRpb246CgogIGBgYGphdmFzY3JpcHQKICBBVmll
        d1dpdGhMYXlvdXQgPSBFbWJlci5WaWV3LmV4dGVuZCh7CiAgICBsYXlvdXQ6
        IEVtYmVyLkhhbmRsZWJhcnMuY29tcGlsZSgiPGRpdiBjbGFzcz0nbXktZGVj
        b3JhdGl2ZS1jbGFzcyc+e3t5aWVsZH19PC9kaXY+IikKICAgIHRlbXBsYXRl
        OiBFbWJlci5IYW5kbGViYXJzLmNvbXBpbGUoIkkgZ290IHdyYXBwZWQiKSwK
        ICB9KTsKICBgYGAKCiAgV2lsbCByZXN1bHQgaW4gdmlldyBpbnN0YW5jZXMg
        d2l0aCBhbiBIVE1MIHJlcHJlc2VudGF0aW9uIG9mOgoKICBgYGBodG1sCiAg
        PGRpdiBpZD0iZW1iZXIxIiBjbGFzcz0iZW1iZXItdmlldyI+CiAgICA8ZGl2
        IGNsYXNzPSJteS1kZWNvcmF0aXZlLWNsYXNzIj4KICAgICAgSSBnb3Qgd3Jh
        cHBlZAogICAgPC9kaXY+CiAgPC9kaXY+CiAgYGBgCgogIFNlZSBbRW1iZXIu
        SGFuZGxlYmFycy5oZWxwZXJzLnlpZWxkXSgvYXBpL2NsYXNzZXMvRW1iZXIu
        SGFuZGxlYmFycy5oZWxwZXJzLmh0bWwjbWV0aG9kX3lpZWxkKQogIGZvciBt
        b3JlIGluZm9ybWF0aW9uLgoKICAjIyBSZXNwb25kaW5nIHRvIEJyb3dzZXIg
        RXZlbnRzCgogIFZpZXdzIGNhbiByZXNwb25kIHRvIHVzZXItaW5pdGlhdGVk
        IGV2ZW50cyBpbiBvbmUgb2YgdGhyZWUgd2F5czogbWV0aG9kCiAgaW1wbGVt
        ZW50YXRpb24sIHRocm91Z2ggYW4gZXZlbnQgbWFuYWdlciwgYW5kIHRocm91
        Z2ggYHt7YWN0aW9ufX1gIGhlbHBlciB1c2UKICBpbiB0aGVpciB0ZW1wbGF0
        ZSBvciBsYXlvdXQuCgogICMjIyBNZXRob2QgSW1wbGVtZW50YXRpb24KCiAg
        Vmlld3MgY2FuIHJlc3BvbmQgdG8gdXNlci1pbml0aWF0ZWQgZXZlbnRzIGJ5
        IGltcGxlbWVudGluZyBhIG1ldGhvZCB0aGF0CiAgbWF0Y2hlcyB0aGUgZXZl
        bnQgbmFtZS4gQSBgalF1ZXJ5LkV2ZW50YCBvYmplY3Qgd2lsbCBiZSBwYXNz
        ZWQgYXMgdGhlCiAgYXJndW1lbnQgdG8gdGhpcyBtZXRob2QuCgogIGBgYGph
        dmFzY3JpcHQKICBBVmlldyA9IEVtYmVyLlZpZXcuZXh0ZW5kKHsKICAgIGNs
        aWNrOiBmdW5jdGlvbihldmVudCkgewogICAgICAvLyB3aWxsIGJlIGNhbGxl
        ZCB3aGVuIHdoZW4gYW4gaW5zdGFuY2UncwogICAgICAvLyByZW5kZXJlZCBl
        bGVtZW50IGlzIGNsaWNrZWQKICAgIH0KICB9KTsKICBgYGAKCiAgIyMjIEV2
        ZW50IE1hbmFnZXJzCgogIFZpZXdzIGNhbiBkZWZpbmUgYW4gb2JqZWN0IGFz
        IHRoZWlyIGBldmVudE1hbmFnZXJgIHByb3BlcnR5LiBUaGlzIG9iamVjdCBj
        YW4KICB0aGVuIGltcGxlbWVudCBtZXRob2RzIHRoYXQgbWF0Y2ggdGhlIGRl
        c2lyZWQgZXZlbnQgbmFtZXMuIE1hdGNoaW5nIGV2ZW50cwogIHRoYXQgb2Nj
        dXIgb24gdGhlIHZpZXcncyByZW5kZXJlZCBIVE1MIG9yIHRoZSByZW5kZXJl
        ZCBIVE1MIG9mIGFueSBvZiBpdHMgRE9NCiAgZGVzY2VuZGFudHMgd2lsbCB0
        cmlnZ2VyIHRoaXMgbWV0aG9kLiBBIGBqUXVlcnkuRXZlbnRgIG9iamVjdCB3
        aWxsIGJlIHBhc3NlZAogIGFzIHRoZSBmaXJzdCBhcmd1bWVudCB0byB0aGUg
        bWV0aG9kIGFuZCBhbiAgYEVtYmVyLlZpZXdgIG9iamVjdCBhcyB0aGUKICBz
        ZWNvbmQuIFRoZSBgRW1iZXIuVmlld2Agd2lsbCBiZSB0aGUgdmlldyB3aG9z
        ZSByZW5kZXJlZCBIVE1MIHdhcyBpbnRlcmFjdGVkCiAgd2l0aC4gVGhpcyBt
        YXkgYmUgdGhlIHZpZXcgd2l0aCB0aGUgYGV2ZW50TWFuYWdlcmAgcHJvcGVy
        dHkgb3Igb25lIG9mIGl0cwogIGRlc2NlbmRlbnQgdmlld3MuCgogIGBgYGph
        dmFzY3JpcHQKICBBVmlldyA9IEVtYmVyLlZpZXcuZXh0ZW5kKHsKICAgIGV2
        ZW50TWFuYWdlcjogRW1iZXIuT2JqZWN0LmNyZWF0ZSh7CiAgICAgIGRvdWJs
        ZUNsaWNrOiBmdW5jdGlvbihldmVudCwgdmlldykgewogICAgICAgIC8vIHdp
        bGwgYmUgY2FsbGVkIHdoZW4gd2hlbiBhbiBpbnN0YW5jZSdzCiAgICAgICAg
        Ly8gcmVuZGVyZWQgZWxlbWVudCBvciBhbnkgcmVuZGVyaW5nCiAgICAgICAg
        Ly8gb2YgdGhpcyB2aWV3cydzIGRlc2NlbmRlbnQKICAgICAgICAvLyBlbGVt
        ZW50cyBpcyBjbGlja2VkCiAgICAgIH0KICAgIH0pCiAgfSk7CiAgYGBgCgog
        IEFuIGV2ZW50IGRlZmluZWQgZm9yIGFuIGV2ZW50IG1hbmFnZXIgdGFrZXMg
        cHJlY2VkZW5jZSBvdmVyIGV2ZW50cyBvZiB0aGUKICBzYW1lIG5hbWUgaGFu
        ZGxlZCB0aHJvdWdoIG1ldGhvZHMgb24gdGhlIHZpZXcuCgogIGBgYGphdmFz
        Y3JpcHQKICBBVmlldyA9IEVtYmVyLlZpZXcuZXh0ZW5kKHsKICAgIG1vdXNl
        RW50ZXI6IGZ1bmN0aW9uKGV2ZW50KSB7CiAgICAgIC8vIHdpbGwgbmV2ZXIg
        dHJpZ2dlci4KICAgIH0sCiAgICBldmVudE1hbmFnZXI6IEVtYmVyLk9iamVj
        dC5jcmVhdGUoewogICAgICBtb3VzZUVudGVyOiBmdW5jdGlvbihldmVudCwg
        dmlldykgewogICAgICAgIC8vIHRha2VzIHByZWNlZGVuY2Ugb3ZlciBBVmll
        dyNtb3VzZUVudGVyCiAgICAgIH0KICAgIH0pCiAgfSk7CiAgYGBgCgogIFNp
        bWlsYXJseSBhIHZpZXcncyBldmVudCBtYW5hZ2VyIHdpbGwgdGFrZSBwcmVj
        ZWRlbmNlIGZvciBldmVudHMgb2YgYW55IHZpZXdzCiAgcmVuZGVyZWQgYXMg
        YSBkZXNjZW5kZW50LiBBIG1ldGhvZCBuYW1lIHRoYXQgbWF0Y2hlcyBhbiBl
        dmVudCBuYW1lIHdpbGwgbm90CiAgYmUgY2FsbGVkIGlmIHRoZSB2aWV3IGlu
        c3RhbmNlIHdhcyByZW5kZXJlZCBpbnNpZGUgdGhlIEhUTUwgcmVwcmVzZW50
        YXRpb24gb2YKICBhIHZpZXcgdGhhdCBoYXMgYW4gYGV2ZW50TWFuYWdlcmAg
        cHJvcGVydHkgZGVmaW5lZCB0aGF0IGhhbmRsZXMgZXZlbnRzIG9mIHRoZQog
        IG5hbWUuIEV2ZW50cyBub3QgaGFuZGxlZCBieSB0aGUgZXZlbnQgbWFuYWdl
        ciB3aWxsIHN0aWxsIHRyaWdnZXIgbWV0aG9kIGNhbGxzCiAgb24gdGhlIGRl
        c2NlbmRlbnQuCgogIGBgYGphdmFzY3JpcHQKICBPdXRlclZpZXcgPSBFbWJl
        ci5WaWV3LmV4dGVuZCh7CiAgICB0ZW1wbGF0ZTogRW1iZXIuSGFuZGxlYmFy
        cy5jb21waWxlKCJvdXRlciB7eyN2aWV3IElubmVyVmlld319aW5uZXJ7ey92
        aWV3fX0gb3V0ZXIiKSwKICAgIGV2ZW50TWFuYWdlcjogRW1iZXIuT2JqZWN0
        LmNyZWF0ZSh7CiAgICAgIG1vdXNlRW50ZXI6IGZ1bmN0aW9uKGV2ZW50LCB2
        aWV3KSB7CiAgICAgICAgLy8gdmlldyBtaWdodCBiZSBpbnN0YW5jZSBvZiBl
        aXRoZXIKICAgICAgICAvLyBPdXRlclZpZXcgb3IgSW5uZXJWaWV3IGRlcGVu
        ZGluZyBvbgogICAgICAgIC8vIHdoZXJlIG9uIHRoZSBwYWdlIHRoZSB1c2Vy
        IGludGVyYWN0aW9uIG9jY3VyZWQKICAgICAgfQogICAgfSkKICB9KTsKCiAg
        SW5uZXJWaWV3ID0gRW1iZXIuVmlldy5leHRlbmQoewogICAgY2xpY2s6IGZ1
        bmN0aW9uKGV2ZW50KSB7CiAgICAgIC8vIHdpbGwgYmUgY2FsbGVkIGlmIHJl
        bmRlcmVkIGluc2lkZQogICAgICAvLyBhbiBPdXRlclZpZXcgYmVjYXVzZSBP
        dXRlclZpZXcncwogICAgICAvLyBldmVudE1hbmFnZXIgZG9lc24ndCBoYW5k
        bGUgY2xpY2sgZXZlbnRzCiAgICB9LAogICAgbW91c2VFbnRlcjogZnVuY3Rp
        b24oZXZlbnQpIHsKICAgICAgLy8gd2lsbCBuZXZlciBiZSBjYWxsZWQgaWYg
        cmVuZGVyZWQgaW5zaWRlCiAgICAgIC8vIGFuIE91dGVyVmlldy4KICAgIH0K
        ICB9KTsKICBgYGAKCiAgIyMjIEhhbmRsZWJhcnMgYHt7YWN0aW9ufX1gIEhl
        bHBlcgoKICBTZWUgW0hhbmRsZWJhcnMuaGVscGVycy5hY3Rpb25dKC9hcGkv
        Y2xhc3Nlcy9FbWJlci5IYW5kbGViYXJzLmhlbHBlcnMuaHRtbCNtZXRob2Rf
        YWN0aW9uKS4KCiAgIyMjIEV2ZW50IE5hbWVzCgogIEFsbCBvZiB0aGUgZXZl
        bnQgaGFuZGxpbmcgYXBwcm9hY2hlcyBkZXNjcmliZWQgYWJvdmUgcmVzcG9u
        ZCB0byB0aGUgc2FtZSBzZXQKICBvZiBldmVudHMuIFRoZSBuYW1lcyBvZiB0
        aGUgYnVpbHQtaW4gZXZlbnRzIGFyZSBsaXN0ZWQgYmVsb3cuIChUaGUgaGFz
        aCBvZgogIGJ1aWx0LWluIGV2ZW50cyBleGlzdHMgaW4gYEVtYmVyLkV2ZW50
        RGlzcGF0Y2hlcmAuKSBBZGRpdGlvbmFsLCBjdXN0b20gZXZlbnRzCiAgY2Fu
        IGJlIHJlZ2lzdGVyZWQgYnkgdXNpbmcgYEVtYmVyLkFwcGxpY2F0aW9uLmN1
        c3RvbUV2ZW50c2AuCgogIFRvdWNoIGV2ZW50czoKCiAgKiBgdG91Y2hTdGFy
        dGAKICAqIGB0b3VjaE1vdmVgCiAgKiBgdG91Y2hFbmRgCiAgKiBgdG91Y2hD
        YW5jZWxgCgogIEtleWJvYXJkIGV2ZW50cwoKICAqIGBrZXlEb3duYAogICog
        YGtleVVwYAogICogYGtleVByZXNzYAoKICBNb3VzZSBldmVudHMKCiAgKiBg
        bW91c2VEb3duYAogICogYG1vdXNlVXBgCiAgKiBgY29udGV4dE1lbnVgCiAg
        KiBgY2xpY2tgCiAgKiBgZG91YmxlQ2xpY2tgCiAgKiBgbW91c2VNb3ZlYAog
        ICogYGZvY3VzSW5gCiAgKiBgZm9jdXNPdXRgCiAgKiBgbW91c2VFbnRlcmAK
        ICAqIGBtb3VzZUxlYXZlYAoKICBGb3JtIGV2ZW50czoKCiAgKiBgc3VibWl0
        YAogICogYGNoYW5nZWAKICAqIGBmb2N1c0luYAogICogYGZvY3VzT3V0YAog
        ICogYGlucHV0YAoKICBIVE1MNSBkcmFnIGFuZCBkcm9wIGV2ZW50czoKCiAg
        KiBgZHJhZ1N0YXJ0YAogICogYGRyYWdgCiAgKiBgZHJhZ0VudGVyYAogICog
        YGRyYWdMZWF2ZWAKICAqIGBkcm9wYAogICogYGRyYWdFbmRgCgogICMjIEhh
        bmRsZWJhcnMgYHt7dmlld319YCBIZWxwZXIKCiAgT3RoZXIgYEVtYmVyLlZp
        ZXdgIGluc3RhbmNlcyBjYW4gYmUgaW5jbHVkZWQgYXMgcGFydCBvZiBhIHZp
        ZXcncyB0ZW1wbGF0ZSBieQogIHVzaW5nIHRoZSBge3t2aWV3fX1gIEhhbmRs
        ZWJhcnMgaGVscGVyLiBTZWUgW0VtYmVyLkhhbmRsZWJhcnMuaGVscGVycy52
        aWV3XSgvYXBpL2NsYXNzZXMvRW1iZXIuSGFuZGxlYmFycy5oZWxwZXJzLmh0
        bWwjbWV0aG9kX3ZpZXcpCiAgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb24u
        CgogIEBjbGFzcyBWaWV3CiAgQG5hbWVzcGFjZSBFbWJlcgogIEBleHRlbmRz
        IEVtYmVyLkNvcmVWaWV3CiovCkVtYmVyLlZpZXcgPSBFbWJlci5Db3JlVmll
        dy5leHRlbmQoCi8qKiBAc2NvcGUgRW1iZXIuVmlldy5wcm90b3R5cGUgKi8g
        ewoKICBjb25jYXRlbmF0ZWRQcm9wZXJ0aWVzOiBbJ2NsYXNzTmFtZXMnLCAn
        Y2xhc3NOYW1lQmluZGluZ3MnLCAnYXR0cmlidXRlQmluZGluZ3MnXSwKCiAg
        LyoqCiAgICBAcHJvcGVydHkgaXNWaWV3CiAgICBAdHlwZSBCb29sZWFuCiAg
        ICBAZGVmYXVsdCB0cnVlCiAgICBAZmluYWwKICAqLwogIGlzVmlldzogdHJ1
        ZSwKCiAgLy8gLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4u
        Li4uLi4uLi4uLi4uLi4uLi4uLi4uLgogIC8vIFRFTVBMQVRFIFNVUFBPUlQK
        ICAvLwoKICAvKioKICAgIFRoZSBuYW1lIG9mIHRoZSB0ZW1wbGF0ZSB0byBs
        b29rdXAgaWYgbm8gdGVtcGxhdGUgaXMgcHJvdmlkZWQuCgogICAgYEVtYmVy
        LlZpZXdgIHdpbGwgbG9vayBmb3IgYSB0ZW1wbGF0ZSB3aXRoIHRoaXMgbmFt
        ZSBpbiB0aGlzIHZpZXcncwogICAgYHRlbXBsYXRlc2Agb2JqZWN0LiBCeSBk
        ZWZhdWx0LCB0aGlzIHdpbGwgYmUgYSBnbG9iYWwgb2JqZWN0CiAgICBzaGFy
        ZWQgaW4gYEVtYmVyLlRFTVBMQVRFU2AuCgogICAgQHByb3BlcnR5IHRlbXBs
        YXRlTmFtZQogICAgQHR5cGUgU3RyaW5nCiAgICBAZGVmYXVsdCBudWxsCiAg
        Ki8KICB0ZW1wbGF0ZU5hbWU6IG51bGwsCgogIC8qKgogICAgVGhlIG5hbWUg
        b2YgdGhlIGxheW91dCB0byBsb29rdXAgaWYgbm8gbGF5b3V0IGlzIHByb3Zp
        ZGVkLgoKICAgIGBFbWJlci5WaWV3YCB3aWxsIGxvb2sgZm9yIGEgdGVtcGxh
        dGUgd2l0aCB0aGlzIG5hbWUgaW4gdGhpcyB2aWV3J3MKICAgIGB0ZW1wbGF0
        ZXNgIG9iamVjdC4gQnkgZGVmYXVsdCwgdGhpcyB3aWxsIGJlIGEgZ2xvYmFs
        IG9iamVjdAogICAgc2hhcmVkIGluIGBFbWJlci5URU1QTEFURVNgLgoKICAg
        IEBwcm9wZXJ0eSBsYXlvdXROYW1lCiAgICBAdHlwZSBTdHJpbmcKICAgIEBk
        ZWZhdWx0IG51bGwKICAqLwogIGxheW91dE5hbWU6IG51bGwsCgogIC8qKgog
        ICAgVGhlIGhhc2ggaW4gd2hpY2ggdG8gbG9vayBmb3IgYHRlbXBsYXRlTmFt
        ZWAuCgogICAgQHByb3BlcnR5IHRlbXBsYXRlcwogICAgQHR5cGUgRW1iZXIu
        T2JqZWN0CiAgICBAZGVmYXVsdCBFbWJlci5URU1QTEFURVMKICAqLwogIHRl
        bXBsYXRlczogRW1iZXIuVEVNUExBVEVTLAoKICAvKioKICAgIFRoZSB0ZW1w
        bGF0ZSB1c2VkIHRvIHJlbmRlciB0aGUgdmlldy4gVGhpcyBzaG91bGQgYmUg
        YSBmdW5jdGlvbiB0aGF0CiAgICBhY2NlcHRzIGFuIG9wdGlvbmFsIGNvbnRl
        eHQgcGFyYW1ldGVyIGFuZCByZXR1cm5zIGEgc3RyaW5nIG9mIEhUTUwgdGhh
        dAogICAgd2lsbCBiZSBpbnNlcnRlZCBpbnRvIHRoZSBET00gcmVsYXRpdmUg
        dG8gaXRzIHBhcmVudCB2aWV3LgoKICAgIEluIGdlbmVyYWwsIHlvdSBzaG91
        bGQgc2V0IHRoZSBgdGVtcGxhdGVOYW1lYCBwcm9wZXJ0eSBpbnN0ZWFkIG9m
        IHNldHRpbmcKICAgIHRoZSB0ZW1wbGF0ZSB5b3Vyc2VsZi4KCiAgICBAcHJv
        cGVydHkgdGVtcGxhdGUKICAgIEB0eXBlIEZ1bmN0aW9uCiAgKi8KICB0ZW1w
        bGF0ZTogRW1iZXIuY29tcHV0ZWQoZnVuY3Rpb24oa2V5LCB2YWx1ZSkgewog
        ICAgaWYgKHZhbHVlICE9PSB1bmRlZmluZWQpIHsgcmV0dXJuIHZhbHVlOyB9
        CgogICAgdmFyIHRlbXBsYXRlTmFtZSA9IGdldCh0aGlzLCAndGVtcGxhdGVO
        YW1lJyksCiAgICAgICAgdGVtcGxhdGUgPSB0aGlzLnRlbXBsYXRlRm9yTmFt
        ZSh0ZW1wbGF0ZU5hbWUsICd0ZW1wbGF0ZScpOwoKICAgIEVtYmVyLmFzc2Vy
        dCgiWW91IHNwZWNpZmllZCB0aGUgdGVtcGxhdGVOYW1lICIgKyB0ZW1wbGF0
        ZU5hbWUgKyAiIGZvciAiICsgdGhpcyArICIsIGJ1dCBpdCBkaWQgbm90IGV4
        aXN0LiIsICF0ZW1wbGF0ZU5hbWUgfHwgdGVtcGxhdGUpOwoKICAgIHJldHVy
        biB0ZW1wbGF0ZSB8fCBnZXQodGhpcywgJ2RlZmF1bHRUZW1wbGF0ZScpOwog
        IH0pLnByb3BlcnR5KCd0ZW1wbGF0ZU5hbWUnKSwKCiAgLyoqCiAgICBUaGUg
        Y29udHJvbGxlciBtYW5hZ2luZyB0aGlzIHZpZXcuIElmIHRoaXMgcHJvcGVy
        dHkgaXMgc2V0LCBpdCB3aWxsIGJlCiAgICBtYWRlIGF2YWlsYWJsZSBmb3Ig
        dXNlIGJ5IHRoZSB0ZW1wbGF0ZS4KCiAgICBAcHJvcGVydHkgY29udHJvbGxl
        cgogICAgQHR5cGUgT2JqZWN0CiAgKi8KICBjb250cm9sbGVyOiBFbWJlci5j
        b21wdXRlZChmdW5jdGlvbihrZXkpIHsKICAgIHZhciBwYXJlbnRWaWV3ID0g
        Z2V0KHRoaXMsICdfcGFyZW50VmlldycpOwogICAgcmV0dXJuIHBhcmVudFZp
        ZXcgPyBnZXQocGFyZW50VmlldywgJ2NvbnRyb2xsZXInKSA6IG51bGw7CiAg
        fSkucHJvcGVydHkoJ19wYXJlbnRWaWV3JyksCgogIC8qKgogICAgQSB2aWV3
        IG1heSBjb250YWluIGEgbGF5b3V0LiBBIGxheW91dCBpcyBhIHJlZ3VsYXIg
        dGVtcGxhdGUgYnV0CiAgICBzdXBlcnNlZGVzIHRoZSBgdGVtcGxhdGVgIHBy
        b3BlcnR5IGR1cmluZyByZW5kZXJpbmcuIEl0IGlzIHRoZQogICAgcmVzcG9u
        c2liaWxpdHkgb2YgdGhlIGxheW91dCB0ZW1wbGF0ZSB0byByZXRyaWV2ZSB0
        aGUgYHRlbXBsYXRlYAogICAgcHJvcGVydHkgZnJvbSB0aGUgdmlldyAob3Ig
        YWx0ZXJuYXRpdmVseSwgY2FsbCBgSGFuZGxlYmFycy5oZWxwZXJzLnlpZWxk
        YCwKICAgIGB7e3lpZWxkfX1gKSB0byByZW5kZXIgaXQgaW4gdGhlIGNvcnJl
        Y3QgbG9jYXRpb24uCgogICAgVGhpcyBpcyB1c2VmdWwgZm9yIGEgdmlldyB0
        aGF0IGhhcyBhIHNoYXJlZCB3cmFwcGVyLCBidXQgd2hpY2ggZGVsZWdhdGVz
        CiAgICB0aGUgcmVuZGVyaW5nIG9mIHRoZSBjb250ZW50cyBvZiB0aGUgd3Jh
        cHBlciB0byB0aGUgYHRlbXBsYXRlYCBwcm9wZXJ0eQogICAgb24gYSBzdWJj
        bGFzcy4KCiAgICBAcHJvcGVydHkgbGF5b3V0CiAgICBAdHlwZSBGdW5jdGlv
        bgogICovCiAgbGF5b3V0OiBFbWJlci5jb21wdXRlZChmdW5jdGlvbihrZXkp
        IHsKICAgIHZhciBsYXlvdXROYW1lID0gZ2V0KHRoaXMsICdsYXlvdXROYW1l
        JyksCiAgICAgICAgbGF5b3V0ID0gdGhpcy50ZW1wbGF0ZUZvck5hbWUobGF5
        b3V0TmFtZSwgJ2xheW91dCcpOwoKICAgIEVtYmVyLmFzc2VydCgiWW91IHNw
        ZWNpZmllZCB0aGUgbGF5b3V0TmFtZSAiICsgbGF5b3V0TmFtZSArICIgZm9y
        ICIgKyB0aGlzICsgIiwgYnV0IGl0IGRpZCBub3QgZXhpc3QuIiwgIWxheW91
        dE5hbWUgfHwgbGF5b3V0KTsKCiAgICByZXR1cm4gbGF5b3V0IHx8IGdldCh0
        aGlzLCAnZGVmYXVsdExheW91dCcpOwogIH0pLnByb3BlcnR5KCdsYXlvdXRO
        YW1lJyksCgogIF95aWVsZDogZnVuY3Rpb24oY29udGV4dCwgb3B0aW9ucykg
        ewogICAgdmFyIHRlbXBsYXRlID0gZ2V0KHRoaXMsICd0ZW1wbGF0ZScpOwog
        ICAgaWYgKHRlbXBsYXRlKSB7IHRlbXBsYXRlKGNvbnRleHQsIG9wdGlvbnMp
        OyB9CiAgfSwKCiAgdGVtcGxhdGVGb3JOYW1lOiBmdW5jdGlvbihuYW1lLCB0
        eXBlKSB7CiAgICBpZiAoIW5hbWUpIHsgcmV0dXJuOyB9CiAgICBFbWJlci5h
        c3NlcnQoInRlbXBsYXRlTmFtZXMgYXJlIG5vdCBhbGxvd2VkIHRvIGNvbnRh
        aW4gcGVyaW9kczogIituYW1lLCBuYW1lLmluZGV4T2YoJy4nKSA9PT0gLTEp
        OwoKICAgIC8vIHRoZSBkZWZhdWx0Q29udGFpbmVyIGlzIGRlcHJlY2F0ZWQK
        ICAgIHZhciBjb250YWluZXIgPSB0aGlzLmNvbnRhaW5lciB8fCAoRW1iZXIu
        Q29udGFpbmVyICYmIEVtYmVyLkNvbnRhaW5lci5kZWZhdWx0Q29udGFpbmVy
        KTsKICAgIHJldHVybiBjb250YWluZXIgJiYgY29udGFpbmVyLmxvb2t1cCgn
        dGVtcGxhdGU6JyArIG5hbWUpOwogIH0sCgogIC8qKgogICAgVGhlIG9iamVj
        dCBmcm9tIHdoaWNoIHRlbXBsYXRlcyBzaG91bGQgYWNjZXNzIHByb3BlcnRp
        ZXMuCgogICAgVGhpcyBvYmplY3Qgd2lsbCBiZSBwYXNzZWQgdG8gdGhlIHRl
        bXBsYXRlIGZ1bmN0aW9uIGVhY2ggdGltZSB0aGUgcmVuZGVyCiAgICBtZXRo
        b2QgaXMgY2FsbGVkLCBidXQgaXQgaXMgdXAgdG8gdGhlIGluZGl2aWR1YWwg
        ZnVuY3Rpb24gdG8gZGVjaWRlIHdoYXQKICAgIHRvIGRvIHdpdGggaXQuCgog
        ICAgQnkgZGVmYXVsdCwgdGhpcyB3aWxsIGJlIHRoZSB2aWV3J3MgY29udHJv
        bGxlci4KCiAgICBAcHJvcGVydHkgY29udGV4dAogICAgQHR5cGUgT2JqZWN0
        CiAgKi8KICBjb250ZXh0OiBFbWJlci5jb21wdXRlZChmdW5jdGlvbihrZXks
        IHZhbHVlKSB7CiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMikgewog
        ICAgICBzZXQodGhpcywgJ19jb250ZXh0JywgdmFsdWUpOwogICAgICByZXR1
        cm4gdmFsdWU7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gZ2V0KHRoaXMs
        ICdfY29udGV4dCcpOwogICAgfQogIH0pLnZvbGF0aWxlKCksCgogIC8qKgog
        ICAgQHByaXZhdGUKCiAgICBQcml2YXRlIGNvcHkgb2YgdGhlIHZpZXcncyB0
        ZW1wbGF0ZSBjb250ZXh0LiBUaGlzIGNhbiBiZSBzZXQgZGlyZWN0bHkKICAg
        IGJ5IEhhbmRsZWJhcnMgd2l0aG91dCB0cmlnZ2VyaW5nIHRoZSBvYnNlcnZl
        ciB0aGF0IGNhdXNlcyB0aGUgdmlldwogICAgdG8gYmUgcmUtcmVuZGVyZWQu
        CgogICAgVGhlIGNvbnRleHQgb2YgYSB2aWV3IGlzIGxvb2tlZCB1cCBhcyBm
        b2xsb3dzOgoKICAgIDEuIFN1cHBsaWVkIGNvbnRleHQgKHVzdWFsbHkgYnkg
        SGFuZGxlYmFycykKICAgIDIuIFNwZWNpZmllZCBjb250cm9sbGVyCiAgICAz
        LiBgcGFyZW50Vmlld2AncyBjb250ZXh0IChmb3IgYSBjaGlsZCBvZiBhIENv
        bnRhaW5lclZpZXcpCgogICAgVGhlIGNvZGUgaW4gSGFuZGxlYmFycyB0aGF0
        IG92ZXJyaWRlcyB0aGUgYF9jb250ZXh0YCBwcm9wZXJ0eSBmaXJzdAogICAg
        Y2hlY2tzIHRvIHNlZSB3aGV0aGVyIHRoZSB2aWV3IGhhcyBhIHNwZWNpZmll
        ZCBjb250cm9sbGVyLiBUaGlzIGlzCiAgICBzb21ldGhpbmcgb2YgYSBoYWNr
        IGFuZCBzaG91bGQgYmUgcmV2aXNpdGVkLgoKICAgIEBwcm9wZXJ0eSBfY29u
        dGV4dAogICovCiAgX2NvbnRleHQ6IEVtYmVyLmNvbXB1dGVkKGZ1bmN0aW9u
        KGtleSkgewogICAgdmFyIHBhcmVudFZpZXcsIGNvbnRyb2xsZXI7CgogICAg
        aWYgKGNvbnRyb2xsZXIgPSBnZXQodGhpcywgJ2NvbnRyb2xsZXInKSkgewog
        ICAgICByZXR1cm4gY29udHJvbGxlcjsKICAgIH0KCiAgICBwYXJlbnRWaWV3
        ID0gdGhpcy5fcGFyZW50VmlldzsKICAgIGlmIChwYXJlbnRWaWV3KSB7CiAg
        ICAgIHJldHVybiBnZXQocGFyZW50VmlldywgJ19jb250ZXh0Jyk7CiAgICB9
        CgogICAgcmV0dXJuIG51bGw7CiAgfSksCgogIC8qKgogICAgQHByaXZhdGUK
        CiAgICBJZiBhIHZhbHVlIHRoYXQgYWZmZWN0cyB0ZW1wbGF0ZSByZW5kZXJp
        bmcgY2hhbmdlcywgdGhlIHZpZXcgc2hvdWxkIGJlCiAgICByZS1yZW5kZXJl
        ZCB0byByZWZsZWN0IHRoZSBuZXcgdmFsdWUuCgogICAgQG1ldGhvZCBfY29u
        dGV4dERpZENoYW5nZQogICovCiAgX2NvbnRleHREaWRDaGFuZ2U6IEVtYmVy
        Lm9ic2VydmVyKCdjb250ZXh0JywgZnVuY3Rpb24oKSB7CiAgICB0aGlzLnJl
        cmVuZGVyKCk7CiAgfSksCgogIC8qKgogICAgSWYgYGZhbHNlYCwgdGhlIHZp
        ZXcgd2lsbCBhcHBlYXIgaGlkZGVuIGluIERPTS4KCiAgICBAcHJvcGVydHkg
        aXNWaXNpYmxlCiAgICBAdHlwZSBCb29sZWFuCiAgICBAZGVmYXVsdCBudWxs
        CiAgKi8KICBpc1Zpc2libGU6IHRydWUsCgogIC8qKgogICAgQHByaXZhdGUK
        CiAgICBBcnJheSBvZiBjaGlsZCB2aWV3cy4gWW91IHNob3VsZCBuZXZlciBl
        ZGl0IHRoaXMgYXJyYXkgZGlyZWN0bHkuCiAgICBJbnN0ZWFkLCB1c2UgYGFw
        cGVuZENoaWxkYCBhbmQgYHJlbW92ZUZyb21QYXJlbnRgLgoKICAgIEBwcm9w
        ZXJ0eSBjaGlsZFZpZXdzCiAgICBAdHlwZSBBcnJheQogICAgQGRlZmF1bHQg
        W10KICAqLwogIGNoaWxkVmlld3M6IGNoaWxkVmlld3NQcm9wZXJ0eSwKCiAg
        X2NoaWxkVmlld3M6IEVNUFRZX0FSUkFZLAoKICAvLyBXaGVuIGl0J3MgYSB2
        aXJ0dWFsIHZpZXcsIHdlIG5lZWQgdG8gbm90aWZ5IHRoZSBwYXJlbnQgdGhh
        dCB0aGVpcgogIC8vIGNoaWxkVmlld3Mgd2lsbCBjaGFuZ2UuCiAgX2NoaWxk
        Vmlld3NXaWxsQ2hhbmdlOiBFbWJlci5iZWZvcmVPYnNlcnZlcignY2hpbGRW
        aWV3cycsIGZ1bmN0aW9uKCkgewogICAgaWYgKHRoaXMuaXNWaXJ0dWFsKSB7
        CiAgICAgIHZhciBwYXJlbnRWaWV3ID0gZ2V0KHRoaXMsICdwYXJlbnRWaWV3
        Jyk7CiAgICAgIGlmIChwYXJlbnRWaWV3KSB7IEVtYmVyLnByb3BlcnR5V2ls
        bENoYW5nZShwYXJlbnRWaWV3LCAnY2hpbGRWaWV3cycpOyB9CiAgICB9CiAg
        fSksCgogIC8vIFdoZW4gaXQncyBhIHZpcnR1YWwgdmlldywgd2UgbmVlZCB0
        byBub3RpZnkgdGhlIHBhcmVudCB0aGF0IHRoZWlyCiAgLy8gY2hpbGRWaWV3
        cyBkaWQgY2hhbmdlLgogIF9jaGlsZFZpZXdzRGlkQ2hhbmdlOiBFbWJlci5v
        YnNlcnZlcignY2hpbGRWaWV3cycsIGZ1bmN0aW9uKCkgewogICAgaWYgKHRo
        aXMuaXNWaXJ0dWFsKSB7CiAgICAgIHZhciBwYXJlbnRWaWV3ID0gZ2V0KHRo
        aXMsICdwYXJlbnRWaWV3Jyk7CiAgICAgIGlmIChwYXJlbnRWaWV3KSB7IEVt
        YmVyLnByb3BlcnR5RGlkQ2hhbmdlKHBhcmVudFZpZXcsICdjaGlsZFZpZXdz
        Jyk7IH0KICAgIH0KICB9KSwKCiAgLyoqCiAgICBSZXR1cm4gdGhlIG5lYXJl
        c3QgYW5jZXN0b3IgdGhhdCBpcyBhbiBpbnN0YW5jZSBvZiB0aGUgcHJvdmlk
        ZWQKICAgIGNsYXNzLgoKICAgIEBwcm9wZXJ0eSBuZWFyZXN0SW5zdGFuY2VP
        ZgogICAgQHBhcmFtIHtDbGFzc30ga2xhc3MgU3ViY2xhc3Mgb2YgRW1iZXIu
        VmlldyAob3IgRW1iZXIuVmlldyBpdHNlbGYpCiAgICBAcmV0dXJuIEVtYmVy
        LlZpZXcKICAgIEBkZXByZWNhdGVkCiAgKi8KICBuZWFyZXN0SW5zdGFuY2VP
        ZjogZnVuY3Rpb24oa2xhc3MpIHsKICAgIEVtYmVyLmRlcHJlY2F0ZSgibmVh
        cmVzdEluc3RhbmNlT2YgaXMgZGVwcmVjYXRlZCBhbmQgd2lsbCBiZSByZW1v
        dmVkIGZyb20gZnV0dXJlIHJlbGVhc2VzLiBVc2UgbmVhcmVzdE9mVHlwZS4i
        KTsKICAgIHZhciB2aWV3ID0gZ2V0KHRoaXMsICdwYXJlbnRWaWV3Jyk7Cgog
        ICAgd2hpbGUgKHZpZXcpIHsKICAgICAgaWYgKHZpZXcgaW5zdGFuY2VvZiBr
        bGFzcykgeyByZXR1cm4gdmlldzsgfQogICAgICB2aWV3ID0gZ2V0KHZpZXcs
        ICdwYXJlbnRWaWV3Jyk7CiAgICB9CiAgfSwKCiAgLyoqCiAgICBSZXR1cm4g
        dGhlIG5lYXJlc3QgYW5jZXN0b3IgdGhhdCBpcyBhbiBpbnN0YW5jZSBvZiB0
        aGUgcHJvdmlkZWQKICAgIGNsYXNzIG9yIG1peGluLgoKICAgIEBwcm9wZXJ0
        eSBuZWFyZXN0T2ZUeXBlCiAgICBAcGFyYW0ge0NsYXNzLE1peGlufSBrbGFz
        cyBTdWJjbGFzcyBvZiBFbWJlci5WaWV3IChvciBFbWJlci5WaWV3IGl0c2Vs
        ZiksCiAgICAgICAgICAgb3IgYW4gaW5zdGFuY2Ugb2YgRW1iZXIuTWl4aW4u
        CiAgICBAcmV0dXJuIEVtYmVyLlZpZXcKICAqLwogIG5lYXJlc3RPZlR5cGU6
        IGZ1bmN0aW9uKGtsYXNzKSB7CiAgICB2YXIgdmlldyA9IGdldCh0aGlzLCAn
        cGFyZW50VmlldycpLAogICAgICAgIGlzT2ZUeXBlID0ga2xhc3MgaW5zdGFu
        Y2VvZiBFbWJlci5NaXhpbiA/CiAgICAgICAgICAgICAgICAgICBmdW5jdGlv
        bih2aWV3KSB7IHJldHVybiBrbGFzcy5kZXRlY3Qodmlldyk7IH0gOgogICAg
        ICAgICAgICAgICAgICAgZnVuY3Rpb24odmlldykgeyByZXR1cm4ga2xhc3Mu
        ZGV0ZWN0KHZpZXcuY29uc3RydWN0b3IpOyB9OwoKICAgIHdoaWxlICh2aWV3
        KSB7CiAgICAgIGlmIChpc09mVHlwZSh2aWV3KSkgeyByZXR1cm4gdmlldzsg
        fQogICAgICB2aWV3ID0gZ2V0KHZpZXcsICdwYXJlbnRWaWV3Jyk7CiAgICB9
        CiAgfSwKCiAgLyoqCiAgICBSZXR1cm4gdGhlIG5lYXJlc3QgYW5jZXN0b3Ig
        dGhhdCBoYXMgYSBnaXZlbiBwcm9wZXJ0eS4KCiAgICBAcHJvcGVydHkgbmVh
        cmVzdFdpdGhQcm9wZXJ0eQogICAgQHBhcmFtIHtTdHJpbmd9IHByb3BlcnR5
        IEEgcHJvcGVydHkgbmFtZQogICAgQHJldHVybiBFbWJlci5WaWV3CiAgKi8K
        ICBuZWFyZXN0V2l0aFByb3BlcnR5OiBmdW5jdGlvbihwcm9wZXJ0eSkgewog
        ICAgdmFyIHZpZXcgPSBnZXQodGhpcywgJ3BhcmVudFZpZXcnKTsKCiAgICB3
        aGlsZSAodmlldykgewogICAgICBpZiAocHJvcGVydHkgaW4gdmlldykgeyBy
        ZXR1cm4gdmlldzsgfQogICAgICB2aWV3ID0gZ2V0KHZpZXcsICdwYXJlbnRW
        aWV3Jyk7CiAgICB9CiAgfSwKCiAgLyoqCiAgICBSZXR1cm4gdGhlIG5lYXJl
        c3QgYW5jZXN0b3Igd2hvc2UgcGFyZW50IGlzIGFuIGluc3RhbmNlIG9mCiAg
        ICBga2xhc3NgLgoKICAgIEBwcm9wZXJ0eSBuZWFyZXN0Q2hpbGRPZgogICAg
        QHBhcmFtIHtDbGFzc30ga2xhc3MgU3ViY2xhc3Mgb2YgRW1iZXIuVmlldyAo
        b3IgRW1iZXIuVmlldyBpdHNlbGYpCiAgICBAcmV0dXJuIEVtYmVyLlZpZXcK
        ICAqLwogIG5lYXJlc3RDaGlsZE9mOiBmdW5jdGlvbihrbGFzcykgewogICAg
        dmFyIHZpZXcgPSBnZXQodGhpcywgJ3BhcmVudFZpZXcnKTsKCiAgICB3aGls
        ZSAodmlldykgewogICAgICBpZiAoZ2V0KHZpZXcsICdwYXJlbnRWaWV3Jykg
        aW5zdGFuY2VvZiBrbGFzcykgeyByZXR1cm4gdmlldzsgfQogICAgICB2aWV3
        ID0gZ2V0KHZpZXcsICdwYXJlbnRWaWV3Jyk7CiAgICB9CiAgfSwKCiAgLyoq
        CiAgICBAcHJpdmF0ZQoKICAgIFdoZW4gdGhlIHBhcmVudCB2aWV3IGNoYW5n
        ZXMsIHJlY3Vyc2l2ZWx5IGludmFsaWRhdGUgYGNvbnRyb2xsZXJgCgogICAg
        QG1ldGhvZCBfcGFyZW50Vmlld0RpZENoYW5nZQogICovCiAgX3BhcmVudFZp
        ZXdEaWRDaGFuZ2U6IEVtYmVyLm9ic2VydmVyKCdfcGFyZW50VmlldycsIGZ1
        bmN0aW9uKCkgewogICAgaWYgKHRoaXMuaXNEZXN0cm95aW5nKSB7IHJldHVy
        bjsgfQoKICAgIHRoaXMudHJpZ2dlcigncGFyZW50Vmlld0RpZENoYW5nZScp
        OwoKICAgIGlmIChnZXQodGhpcywgJ3BhcmVudFZpZXcuY29udHJvbGxlcicp
        ICYmICFnZXQodGhpcywgJ2NvbnRyb2xsZXInKSkgewogICAgICB0aGlzLm5v
        dGlmeVByb3BlcnR5Q2hhbmdlKCdjb250cm9sbGVyJyk7CiAgICB9CiAgfSks
        CgogIF9jb250cm9sbGVyRGlkQ2hhbmdlOiBFbWJlci5vYnNlcnZlcignY29u
        dHJvbGxlcicsIGZ1bmN0aW9uKCkgewogICAgaWYgKHRoaXMuaXNEZXN0cm95
        aW5nKSB7IHJldHVybjsgfQoKICAgIHRoaXMucmVyZW5kZXIoKTsKCiAgICB0
        aGlzLmZvckVhY2hDaGlsZFZpZXcoZnVuY3Rpb24odmlldykgewogICAgICB2
        aWV3LnByb3BlcnR5RGlkQ2hhbmdlKCdjb250cm9sbGVyJyk7CiAgICB9KTsK
        ICB9KSwKCiAgY2xvbmVLZXl3b3JkczogZnVuY3Rpb24oKSB7CiAgICB2YXIg
        dGVtcGxhdGVEYXRhID0gZ2V0KHRoaXMsICd0ZW1wbGF0ZURhdGEnKTsKCiAg
        ICB2YXIga2V5d29yZHMgPSB0ZW1wbGF0ZURhdGEgPyBFbWJlci5jb3B5KHRl
        bXBsYXRlRGF0YS5rZXl3b3JkcykgOiB7fTsKICAgIHNldChrZXl3b3Jkcywg
        J3ZpZXcnLCBnZXQodGhpcywgJ2NvbmNyZXRlVmlldycpKTsKICAgIHNldChr
        ZXl3b3JkcywgJ192aWV3JywgdGhpcyk7CiAgICBzZXQoa2V5d29yZHMsICdj
        b250cm9sbGVyJywgZ2V0KHRoaXMsICdjb250cm9sbGVyJykpOwoKICAgIHJl
        dHVybiBrZXl3b3JkczsKICB9LAoKICAvKioKICAgIENhbGxlZCBvbiB5b3Vy
        IHZpZXcgd2hlbiBpdCBzaG91bGQgcHVzaCBzdHJpbmdzIG9mIEhUTUwgaW50
        byBhCiAgICBgRW1iZXIuUmVuZGVyQnVmZmVyYC4gTW9zdCB1c2VycyB3aWxs
        IHdhbnQgdG8gb3ZlcnJpZGUgdGhlIGB0ZW1wbGF0ZWAKICAgIG9yIGB0ZW1w
        bGF0ZU5hbWVgIHByb3BlcnRpZXMgaW5zdGVhZCBvZiB0aGlzIG1ldGhvZC4K
        CiAgICBCeSBkZWZhdWx0LCBgRW1iZXIuVmlld2Agd2lsbCBsb29rIGZvciBh
        IGZ1bmN0aW9uIGluIHRoZSBgdGVtcGxhdGVgCiAgICBwcm9wZXJ0eSBhbmQg
        aW52b2tlIGl0IHdpdGggdGhlIHZhbHVlIG9mIGBjb250ZXh0YC4gVGhlIHZh
        bHVlIG9mCiAgICBgY29udGV4dGAgd2lsbCBiZSB0aGUgdmlldydzIGNvbnRy
        b2xsZXIgdW5sZXNzIHlvdSBvdmVycmlkZSBpdC4KCiAgICBAbWV0aG9kIHJl
        bmRlcgogICAgQHBhcmFtIHtFbWJlci5SZW5kZXJCdWZmZXJ9IGJ1ZmZlciBU
        aGUgcmVuZGVyIGJ1ZmZlcgogICovCiAgcmVuZGVyOiBmdW5jdGlvbihidWZm
        ZXIpIHsKICAgIC8vIElmIHRoaXMgdmlldyBoYXMgYSBsYXlvdXQsIGl0IGlz
        IHRoZSByZXNwb25zaWJpbGl0eSBvZiB0aGUKICAgIC8vIHRoZSBsYXlvdXQg
        dG8gcmVuZGVyIHRoZSB2aWV3J3MgdGVtcGxhdGUuIE90aGVyd2lzZSwgcmVu
        ZGVyIHRoZSB0ZW1wbGF0ZQogICAgLy8gZGlyZWN0bHkuCiAgICB2YXIgdGVt
        cGxhdGUgPSBnZXQodGhpcywgJ2xheW91dCcpIHx8IGdldCh0aGlzLCAndGVt
        cGxhdGUnKTsKCiAgICBpZiAodGVtcGxhdGUpIHsKICAgICAgdmFyIGNvbnRl
        eHQgPSBnZXQodGhpcywgJ2NvbnRleHQnKTsKICAgICAgdmFyIGtleXdvcmRz
        ID0gdGhpcy5jbG9uZUtleXdvcmRzKCk7CiAgICAgIHZhciBvdXRwdXQ7Cgog
        ICAgICB2YXIgZGF0YSA9IHsKICAgICAgICB2aWV3OiB0aGlzLAogICAgICAg
        IGJ1ZmZlcjogYnVmZmVyLAogICAgICAgIGlzUmVuZGVyRGF0YTogdHJ1ZSwK
        ICAgICAgICBrZXl3b3Jkczoga2V5d29yZHMsCiAgICAgICAgaW5zaWRlR3Jv
        dXA6IGdldCh0aGlzLCAndGVtcGxhdGVEYXRhLmluc2lkZUdyb3VwJykKICAg
        ICAgfTsKCiAgICAgIC8vIEludm9rZSB0aGUgdGVtcGxhdGUgd2l0aCB0aGUg
        cHJvdmlkZWQgdGVtcGxhdGUgY29udGV4dCwgd2hpY2gKICAgICAgLy8gaXMg
        dGhlIHZpZXcncyBjb250cm9sbGVyIGJ5IGRlZmF1bHQuIEEgaGFzaCBvZiBk
        YXRhIGlzIGFsc28gcGFzc2VkIHRoYXQgcHJvdmlkZXMKICAgICAgLy8gdGhl
        IHRlbXBsYXRlIHdpdGggYWNjZXNzIHRvIHRoZSB2aWV3IGFuZCByZW5kZXIg
        YnVmZmVyLgoKICAgICAgRW1iZXIuYXNzZXJ0KCd0ZW1wbGF0ZSBtdXN0IGJl
        IGEgZnVuY3Rpb24uIERpZCB5b3UgbWVhbiB0byBjYWxsIEVtYmVyLkhhbmRs
        ZWJhcnMuY29tcGlsZSgiLi4uIikgb3Igc3BlY2lmeSB0ZW1wbGF0ZU5hbWUg
        aW5zdGVhZD8nLCB0eXBlb2YgdGVtcGxhdGUgPT09ICdmdW5jdGlvbicpOwog
        ICAgICAvLyBUaGUgdGVtcGxhdGUgc2hvdWxkIHdyaXRlIGRpcmVjdGx5IHRv
        IHRoZSByZW5kZXIgYnVmZmVyIGluc3RlYWQKICAgICAgLy8gb2YgcmV0dXJu
        aW5nIGEgc3RyaW5nLgogICAgICBvdXRwdXQgPSB0ZW1wbGF0ZShjb250ZXh0
        LCB7IGRhdGE6IGRhdGEgfSk7CgogICAgICAvLyBJZiB0aGUgdGVtcGxhdGUg
        cmV0dXJuZWQgYSBzdHJpbmcgaW5zdGVhZCBvZiB3cml0aW5nIHRvIHRoZSBi
        dWZmZXIsCiAgICAgIC8vIHB1c2ggdGhlIHN0cmluZyBvbnRvIHRoZSBidWZm
        ZXIuCiAgICAgIGlmIChvdXRwdXQgIT09IHVuZGVmaW5lZCkgeyBidWZmZXIu
        cHVzaChvdXRwdXQpOyB9CiAgICB9CiAgfSwKCiAgLyoqCiAgICBSZW5kZXJz
        IHRoZSB2aWV3IGFnYWluLiBUaGlzIHdpbGwgd29yayByZWdhcmRsZXNzIG9m
        IHdoZXRoZXIgdGhlCiAgICB2aWV3IGlzIGFscmVhZHkgaW4gdGhlIERPTSBv
        ciBub3QuIElmIHRoZSB2aWV3IGlzIGluIHRoZSBET00sIHRoZQogICAgcmVu
        ZGVyaW5nIHByb2Nlc3Mgd2lsbCBiZSBkZWZlcnJlZCB0byBnaXZlIGJpbmRp
        bmdzIGEgY2hhbmNlCiAgICB0byBzeW5jaHJvbml6ZS4KCiAgICBJZiBjaGls
        ZHJlbiB3ZXJlIGFkZGVkIGR1cmluZyB0aGUgcmVuZGVyaW5nIHByb2Nlc3Mg
        dXNpbmcgYGFwcGVuZENoaWxkYCwKICAgIGByZXJlbmRlcmAgd2lsbCByZW1v
        dmUgdGhlbSwgYmVjYXVzZSB0aGV5IHdpbGwgYmUgYWRkZWQgYWdhaW4KICAg
        IGlmIG5lZWRlZCBieSB0aGUgbmV4dCBgcmVuZGVyYC4KCiAgICBJbiBnZW5l
        cmFsLCBpZiB0aGUgZGlzcGxheSBvZiB5b3VyIHZpZXcgY2hhbmdlcywgeW91
        IHNob3VsZCBtb2RpZnkKICAgIHRoZSBET00gZWxlbWVudCBkaXJlY3RseSBp
        bnN0ZWFkIG9mIG1hbnVhbGx5IGNhbGxpbmcgYHJlcmVuZGVyYCwgd2hpY2gg
        Y2FuCiAgICBiZSBzbG93LgoKICAgIEBtZXRob2QgcmVyZW5kZXIKICAqLwog
        IHJlcmVuZGVyOiBmdW5jdGlvbigpIHsKICAgIHJldHVybiB0aGlzLmN1cnJl
        bnRTdGF0ZS5yZXJlbmRlcih0aGlzKTsKICB9LAoKICBjbGVhclJlbmRlcmVk
        Q2hpbGRyZW46IGZ1bmN0aW9uKCkgewogICAgdmFyIGxlbmd0aEJlZm9yZSA9
        IHRoaXMubGVuZ3RoQmVmb3JlUmVuZGVyLAogICAgICAgIGxlbmd0aEFmdGVy
        ICA9IHRoaXMubGVuZ3RoQWZ0ZXJSZW5kZXI7CgogICAgLy8gSWYgdGhlcmUg
        d2VyZSBjaGlsZCB2aWV3cyBjcmVhdGVkIGR1cmluZyB0aGUgbGFzdCBjYWxs
        IHRvIHJlbmRlcigpLAogICAgLy8gcmVtb3ZlIHRoZW0gdW5kZXIgdGhlIGFz
        c3VtcHRpb24gdGhhdCB0aGV5IHdpbGwgYmUgcmUtY3JlYXRlZCB3aGVuCiAg
        ICAvLyB3ZSByZS1yZW5kZXIuCgogICAgLy8gVklFVy1UT0RPOiBVbml0IHRl
        c3QgdGhpcyBwYXRoLgogICAgdmFyIGNoaWxkVmlld3MgPSB0aGlzLl9jaGls
        ZFZpZXdzOwogICAgZm9yICh2YXIgaT1sZW5ndGhBZnRlci0xOyBpPj1sZW5n
        dGhCZWZvcmU7IGktLSkgewogICAgICBpZiAoY2hpbGRWaWV3c1tpXSkgeyBj
        aGlsZFZpZXdzW2ldLmRlc3Ryb3koKTsgfQogICAgfQogIH0sCgogIC8qKgog
        ICAgQHByaXZhdGUKCiAgICBJdGVyYXRlcyBvdmVyIHRoZSB2aWV3J3MgYGNs
        YXNzTmFtZUJpbmRpbmdzYCBhcnJheSwgaW5zZXJ0cyB0aGUgdmFsdWUKICAg
        IG9mIHRoZSBzcGVjaWZpZWQgcHJvcGVydHkgaW50byB0aGUgYGNsYXNzTmFt
        ZXNgIGFycmF5LCB0aGVuIGNyZWF0ZXMgYW4KICAgIG9ic2VydmVyIHRvIHVw
        ZGF0ZSB0aGUgdmlldydzIGVsZW1lbnQgaWYgdGhlIGJvdW5kIHByb3BlcnR5
        IGV2ZXIgY2hhbmdlcwogICAgaW4gdGhlIGZ1dHVyZS4KCiAgICBAbWV0aG9k
        IF9hcHBseUNsYXNzTmFtZUJpbmRpbmdzCiAgKi8KICBfYXBwbHlDbGFzc05h
        bWVCaW5kaW5nczogZnVuY3Rpb24oY2xhc3NCaW5kaW5ncykgewogICAgdmFy
        IGNsYXNzTmFtZXMgPSB0aGlzLmNsYXNzTmFtZXMsCiAgICBlbGVtLCBuZXdD
        bGFzcywgZGFzaGVyaXplZENsYXNzOwoKICAgIC8vIExvb3AgdGhyb3VnaCBh
        bGwgb2YgdGhlIGNvbmZpZ3VyZWQgYmluZGluZ3MuIFRoZXNlIHdpbGwgYmUg
        ZWl0aGVyCiAgICAvLyBwcm9wZXJ0eSBuYW1lcyAoJ2lzVXJnZW50Jykgb3Ig
        cHJvcGVydHkgcGF0aHMgcmVsYXRpdmUgdG8gdGhlIHZpZXcKICAgIC8vICgn
        Y29udGVudC5pc1VyZ2VudCcpCiAgICBhX2ZvckVhY2goY2xhc3NCaW5kaW5n
        cywgZnVuY3Rpb24oYmluZGluZykgewoKICAgICAgLy8gVmFyaWFibGUgaW4g
        d2hpY2ggdGhlIG9sZCBjbGFzcyB2YWx1ZSBpcyBzYXZlZC4gVGhlIG9ic2Vy
        dmVyIGZ1bmN0aW9uCiAgICAgIC8vIGNsb3NlcyBvdmVyIHRoaXMgdmFyaWFi
        bGUsIHNvIGl0IGtub3dzIHdoaWNoIHN0cmluZyB0byByZW1vdmUgd2hlbgog
        ICAgICAvLyB0aGUgcHJvcGVydHkgY2hhbmdlcy4KICAgICAgdmFyIG9sZENs
        YXNzOwogICAgICAvLyBFeHRyYWN0IGp1c3QgdGhlIHByb3BlcnR5IG5hbWUg
        ZnJvbSBiaW5kaW5ncyBsaWtlICdmb286YmFyJwogICAgICB2YXIgcGFyc2Vk
        UGF0aCA9IEVtYmVyLlZpZXcuX3BhcnNlUHJvcGVydHlQYXRoKGJpbmRpbmcp
        OwoKICAgICAgLy8gU2V0IHVwIGFuIG9ic2VydmVyIG9uIHRoZSBjb250ZXh0
        LiBJZiB0aGUgcHJvcGVydHkgY2hhbmdlcywgdG9nZ2xlIHRoZQogICAgICAv
        LyBjbGFzcyBuYW1lLgogICAgICB2YXIgb2JzZXJ2ZXIgPSBmdW5jdGlvbigp
        IHsKICAgICAgICAvLyBHZXQgdGhlIGN1cnJlbnQgdmFsdWUgb2YgdGhlIHBy
        b3BlcnR5CiAgICAgICAgbmV3Q2xhc3MgPSB0aGlzLl9jbGFzc1N0cmluZ0Zv
        clByb3BlcnR5KGJpbmRpbmcpOwogICAgICAgIGVsZW0gPSB0aGlzLiQoKTsK
        CiAgICAgICAgLy8gSWYgd2UgaGFkIHByZXZpb3VzbHkgYWRkZWQgYSBjbGFz
        cyB0byB0aGUgZWxlbWVudCwgcmVtb3ZlIGl0LgogICAgICAgIGlmIChvbGRD
        bGFzcykgewogICAgICAgICAgZWxlbS5yZW1vdmVDbGFzcyhvbGRDbGFzcyk7
        CiAgICAgICAgICAvLyBBbHNvIHJlbW92ZSBmcm9tIGNsYXNzTmFtZXMgc28g
        dGhhdCBpZiB0aGUgdmlldyBnZXRzIHJlcmVuZGVyZWQsCiAgICAgICAgICAv
        LyB0aGUgY2xhc3MgZG9lc24ndCBnZXQgYWRkZWQgYmFjayB0byB0aGUgRE9N
        LgogICAgICAgICAgY2xhc3NOYW1lcy5yZW1vdmVPYmplY3Qob2xkQ2xhc3Mp
        OwogICAgICAgIH0KCiAgICAgICAgLy8gSWYgbmVjZXNzYXJ5LCBhZGQgYSBu
        ZXcgY2xhc3MuIE1ha2Ugc3VyZSB3ZSBrZWVwIHRyYWNrIG9mIGl0IHNvCiAg
        ICAgICAgLy8gaXQgY2FuIGJlIHJlbW92ZWQgaW4gdGhlIGZ1dHVyZS4KICAg
        ICAgICBpZiAobmV3Q2xhc3MpIHsKICAgICAgICAgIGVsZW0uYWRkQ2xhc3Mo
        bmV3Q2xhc3MpOwogICAgICAgICAgb2xkQ2xhc3MgPSBuZXdDbGFzczsKICAg
        ICAgICB9IGVsc2UgewogICAgICAgICAgb2xkQ2xhc3MgPSBudWxsOwogICAg
        ICAgIH0KICAgICAgfTsKCiAgICAgIC8vIEdldCB0aGUgY2xhc3MgbmFtZSBm
        b3IgdGhlIHByb3BlcnR5IGF0IGl0cyBjdXJyZW50IHZhbHVlCiAgICAgIGRh
        c2hlcml6ZWRDbGFzcyA9IHRoaXMuX2NsYXNzU3RyaW5nRm9yUHJvcGVydHko
        YmluZGluZyk7CgogICAgICBpZiAoZGFzaGVyaXplZENsYXNzKSB7CiAgICAg
        ICAgLy8gRW5zdXJlIHRoYXQgaXQgZ2V0cyBpbnRvIHRoZSBjbGFzc05hbWVz
        IGFycmF5CiAgICAgICAgLy8gc28gaXQgaXMgZGlzcGxheWVkIHdoZW4gd2Ug
        cmVuZGVyLgogICAgICAgIGFfYWRkT2JqZWN0KGNsYXNzTmFtZXMsIGRhc2hl
        cml6ZWRDbGFzcyk7CgogICAgICAgIC8vIFNhdmUgYSByZWZlcmVuY2UgdG8g
        dGhlIGNsYXNzIG5hbWUgc28gd2UgY2FuIHJlbW92ZSBpdAogICAgICAgIC8v
        IGlmIHRoZSBvYnNlcnZlciBmaXJlcy4gUmVtZW1iZXIgdGhhdCB0aGlzIHZh
        cmlhYmxlIGhhcwogICAgICAgIC8vIGJlZW4gY2xvc2VkIG92ZXIgYnkgdGhl
        IG9ic2VydmVyLgogICAgICAgIG9sZENsYXNzID0gZGFzaGVyaXplZENsYXNz
        OwogICAgICB9CgogICAgICB0aGlzLnJlZ2lzdGVyT2JzZXJ2ZXIodGhpcywg
        cGFyc2VkUGF0aC5wYXRoLCBvYnNlcnZlcik7CiAgICAgIC8vIFJlbW92ZSBj
        bGFzc05hbWUgc28gd2hlbiB0aGUgdmlldyBpcyByZXJlbmRlcmVkLAogICAg
        ICAvLyB0aGUgY2xhc3NOYW1lIGlzIGFkZGVkIGJhc2VkIG9uIGJpbmRpbmcg
        cmVldmFsdWF0aW9uCiAgICAgIHRoaXMub25lKCd3aWxsQ2xlYXJSZW5kZXIn
        LCBmdW5jdGlvbigpIHsKICAgICAgICBpZiAob2xkQ2xhc3MpIHsKICAgICAg
        ICAgIGNsYXNzTmFtZXMucmVtb3ZlT2JqZWN0KG9sZENsYXNzKTsKICAgICAg
        ICAgIG9sZENsYXNzID0gbnVsbDsKICAgICAgICB9CiAgICAgIH0pOwoKICAg
        IH0sIHRoaXMpOwogIH0sCgogIC8qKgogICAgQHByaXZhdGUKCiAgICBJdGVy
        YXRlcyB0aHJvdWdoIHRoZSB2aWV3J3MgYXR0cmlidXRlIGJpbmRpbmdzLCBz
        ZXRzIHVwIG9ic2VydmVycyBmb3IgZWFjaCwKICAgIHRoZW4gYXBwbGllcyB0
        aGUgY3VycmVudCB2YWx1ZSBvZiB0aGUgYXR0cmlidXRlcyB0byB0aGUgcGFz
        c2VkIHJlbmRlciBidWZmZXIuCgogICAgQG1ldGhvZCBfYXBwbHlBdHRyaWJ1
        dGVCaW5kaW5ncwogICAgQHBhcmFtIHtFbWJlci5SZW5kZXJCdWZmZXJ9IGJ1
        ZmZlcgogICovCiAgX2FwcGx5QXR0cmlidXRlQmluZGluZ3M6IGZ1bmN0aW9u
        KGJ1ZmZlciwgYXR0cmlidXRlQmluZGluZ3MpIHsKICAgIHZhciBhdHRyaWJ1
        dGVWYWx1ZSwgZWxlbTsKCiAgICBhX2ZvckVhY2goYXR0cmlidXRlQmluZGlu
        Z3MsIGZ1bmN0aW9uKGJpbmRpbmcpIHsKICAgICAgdmFyIHNwbGl0ID0gYmlu
        ZGluZy5zcGxpdCgnOicpLAogICAgICAgICAgcHJvcGVydHkgPSBzcGxpdFsw
        XSwKICAgICAgICAgIGF0dHJpYnV0ZU5hbWUgPSBzcGxpdFsxXSB8fCBwcm9w
        ZXJ0eTsKCiAgICAgIC8vIENyZWF0ZSBhbiBvYnNlcnZlciB0byBhZGQvcmVt
        b3ZlL2NoYW5nZSB0aGUgYXR0cmlidXRlIGlmIHRoZQogICAgICAvLyBKYXZh
        U2NyaXB0IHByb3BlcnR5IGNoYW5nZXMuCiAgICAgIHZhciBvYnNlcnZlciA9
        IGZ1bmN0aW9uKCkgewogICAgICAgIGVsZW0gPSB0aGlzLiQoKTsKCiAgICAg
        ICAgYXR0cmlidXRlVmFsdWUgPSBnZXQodGhpcywgcHJvcGVydHkpOwoKICAg
        ICAgICBFbWJlci5WaWV3LmFwcGx5QXR0cmlidXRlQmluZGluZ3MoZWxlbSwg
        YXR0cmlidXRlTmFtZSwgYXR0cmlidXRlVmFsdWUpOwogICAgICB9OwoKICAg
        ICAgdGhpcy5yZWdpc3Rlck9ic2VydmVyKHRoaXMsIHByb3BlcnR5LCBvYnNl
        cnZlcik7CgogICAgICAvLyBEZXRlcm1pbmUgdGhlIGN1cnJlbnQgdmFsdWUg
        YW5kIGFkZCBpdCB0byB0aGUgcmVuZGVyIGJ1ZmZlcgogICAgICAvLyBpZiBu
        ZWNlc3NhcnkuCiAgICAgIGF0dHJpYnV0ZVZhbHVlID0gZ2V0KHRoaXMsIHBy
        b3BlcnR5KTsKICAgICAgRW1iZXIuVmlldy5hcHBseUF0dHJpYnV0ZUJpbmRp
        bmdzKGJ1ZmZlciwgYXR0cmlidXRlTmFtZSwgYXR0cmlidXRlVmFsdWUpOwog
        ICAgfSwgdGhpcyk7CiAgfSwKCiAgLyoqCiAgICBAcHJpdmF0ZQoKICAgIEdp
        dmVuIGEgcHJvcGVydHkgbmFtZSwgcmV0dXJucyBhIGRhc2hlcml6ZWQgdmVy
        c2lvbiBvZiB0aGF0CiAgICBwcm9wZXJ0eSBuYW1lIGlmIHRoZSBwcm9wZXJ0
        eSBldmFsdWF0ZXMgdG8gYSBub24tZmFsc3kgdmFsdWUuCgogICAgRm9yIGV4
        YW1wbGUsIGlmIHRoZSB2aWV3IGhhcyBwcm9wZXJ0eSBgaXNVcmdlbnRgIHRo
        YXQgZXZhbHVhdGVzIHRvIHRydWUsCiAgICBwYXNzaW5nIGBpc1VyZ2VudGAg
        dG8gdGhpcyBtZXRob2Qgd2lsbCByZXR1cm4gYCJpcy11cmdlbnQiYC4KCiAg
        ICBAbWV0aG9kIF9jbGFzc1N0cmluZ0ZvclByb3BlcnR5CiAgICBAcGFyYW0g
        cHJvcGVydHkKICAqLwogIF9jbGFzc1N0cmluZ0ZvclByb3BlcnR5OiBmdW5j
        dGlvbihwcm9wZXJ0eSkgewogICAgdmFyIHBhcnNlZFBhdGggPSBFbWJlci5W
        aWV3Ll9wYXJzZVByb3BlcnR5UGF0aChwcm9wZXJ0eSk7CiAgICB2YXIgcGF0
        aCA9IHBhcnNlZFBhdGgucGF0aDsKCiAgICB2YXIgdmFsID0gZ2V0KHRoaXMs
        IHBhdGgpOwogICAgaWYgKHZhbCA9PT0gdW5kZWZpbmVkICYmIEVtYmVyLmlz
        R2xvYmFsUGF0aChwYXRoKSkgewogICAgICB2YWwgPSBnZXQoRW1iZXIubG9v
        a3VwLCBwYXRoKTsKICAgIH0KCiAgICByZXR1cm4gRW1iZXIuVmlldy5fY2xh
        c3NTdHJpbmdGb3JWYWx1ZShwYXRoLCB2YWwsIHBhcnNlZFBhdGguY2xhc3NO
        YW1lLCBwYXJzZWRQYXRoLmZhbHN5Q2xhc3NOYW1lKTsKICB9LAoKICAvLyAu
        Li4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4u
        Li4uLi4uLi4uLi4uCiAgLy8gRUxFTUVOVCBTVVBQT1JUCiAgLy8KCiAgLyoq
        CiAgICBSZXR1cm5zIHRoZSBjdXJyZW50IERPTSBlbGVtZW50IGZvciB0aGUg
        dmlldy4KCiAgICBAcHJvcGVydHkgZWxlbWVudAogICAgQHR5cGUgRE9NRWxl
        bWVudAogICovCiAgZWxlbWVudDogRW1iZXIuY29tcHV0ZWQoZnVuY3Rpb24o
        a2V5LCB2YWx1ZSkgewogICAgaWYgKHZhbHVlICE9PSB1bmRlZmluZWQpIHsK
        ICAgICAgcmV0dXJuIHRoaXMuY3VycmVudFN0YXRlLnNldEVsZW1lbnQodGhp
        cywgdmFsdWUpOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIHRoaXMuY3Vy
        cmVudFN0YXRlLmdldEVsZW1lbnQodGhpcyk7CiAgICB9CiAgfSkucHJvcGVy
        dHkoJ19wYXJlbnRWaWV3JyksCgogIC8qKgogICAgUmV0dXJucyBhIGpRdWVy
        eSBvYmplY3QgZm9yIHRoaXMgdmlldydzIGVsZW1lbnQuIElmIHlvdSBwYXNz
        IGluIGEgc2VsZWN0b3IKICAgIHN0cmluZywgdGhpcyBtZXRob2Qgd2lsbCBy
        ZXR1cm4gYSBqUXVlcnkgb2JqZWN0LCB1c2luZyB0aGUgY3VycmVudCBlbGVt
        ZW50CiAgICBhcyBpdHMgYnVmZmVyLgoKICAgIEZvciBleGFtcGxlLCBjYWxs
        aW5nIGB2aWV3LiQoJ2xpJylgIHdpbGwgcmV0dXJuIGEgalF1ZXJ5IG9iamVj
        dCBjb250YWluaW5nCiAgICBhbGwgb2YgdGhlIGBsaWAgZWxlbWVudHMgaW5z
        aWRlIHRoZSBET00gZWxlbWVudCBvZiB0aGlzIHZpZXcuCgogICAgQG1ldGhv
        ZCAkCiAgICBAcGFyYW0ge1N0cmluZ30gW3NlbGVjdG9yXSBhIGpRdWVyeS1j
        b21wYXRpYmxlIHNlbGVjdG9yIHN0cmluZwogICAgQHJldHVybiB7alF1ZXJ5
        fSB0aGUgalF1ZXJ5IG9iamVjdCBmb3IgdGhlIERPTSBub2RlCiAgKi8KICAk
        OiBmdW5jdGlvbihzZWwpIHsKICAgIHJldHVybiB0aGlzLmN1cnJlbnRTdGF0
        ZS4kKHRoaXMsIHNlbCk7CiAgfSwKCiAgbXV0YXRlQ2hpbGRWaWV3czogZnVu
        Y3Rpb24oY2FsbGJhY2spIHsKICAgIHZhciBjaGlsZFZpZXdzID0gdGhpcy5f
        Y2hpbGRWaWV3cywKICAgICAgICBpZHggPSBjaGlsZFZpZXdzLmxlbmd0aCwK
        ICAgICAgICB2aWV3OwoKICAgIHdoaWxlKC0taWR4ID49IDApIHsKICAgICAg
        dmlldyA9IGNoaWxkVmlld3NbaWR4XTsKICAgICAgY2FsbGJhY2sodGhpcywg
        dmlldywgaWR4KTsKICAgIH0KCiAgICByZXR1cm4gdGhpczsKICB9LAoKICBm
        b3JFYWNoQ2hpbGRWaWV3OiBmdW5jdGlvbihjYWxsYmFjaykgewogICAgdmFy
        IGNoaWxkVmlld3MgPSB0aGlzLl9jaGlsZFZpZXdzOwoKICAgIGlmICghY2hp
        bGRWaWV3cykgeyByZXR1cm4gdGhpczsgfQoKICAgIHZhciBsZW4gPSBjaGls
        ZFZpZXdzLmxlbmd0aCwKICAgICAgICB2aWV3LCBpZHg7CgogICAgZm9yIChp
        ZHggPSAwOyBpZHggPCBsZW47IGlkeCsrKSB7CiAgICAgIHZpZXcgPSBjaGls
        ZFZpZXdzW2lkeF07CiAgICAgIGNhbGxiYWNrKHZpZXcpOwogICAgfQoKICAg
        IHJldHVybiB0aGlzOwogIH0sCgogIC8qKgogICAgQXBwZW5kcyB0aGUgdmll
        dydzIGVsZW1lbnQgdG8gdGhlIHNwZWNpZmllZCBwYXJlbnQgZWxlbWVudC4K
        CiAgICBJZiB0aGUgdmlldyBkb2VzIG5vdCBoYXZlIGFuIEhUTUwgcmVwcmVz
        ZW50YXRpb24geWV0LCBgY3JlYXRlRWxlbWVudCgpYAogICAgd2lsbCBiZSBj
        YWxsZWQgYXV0b21hdGljYWxseS4KCiAgICBOb3RlIHRoYXQgdGhpcyBtZXRo
        b2QganVzdCBzY2hlZHVsZXMgdGhlIHZpZXcgdG8gYmUgYXBwZW5kZWQ7IHRo
        ZSBET00KICAgIGVsZW1lbnQgd2lsbCBub3QgYmUgYXBwZW5kZWQgdG8gdGhl
        IGdpdmVuIGVsZW1lbnQgdW50aWwgYWxsIGJpbmRpbmdzIGhhdmUKICAgIGZp
        bmlzaGVkIHN5bmNocm9uaXppbmcuCgogICAgVGhpcyBpcyBub3QgdHlwaWNh
        bGx5IGEgZnVuY3Rpb24gdGhhdCB5b3Ugd2lsbCBuZWVkIHRvIGNhbGwgZGly
        ZWN0bHkgd2hlbgogICAgYnVpbGRpbmcgeW91ciBhcHBsaWNhdGlvbi4gWW91
        IG1pZ2h0IGNvbnNpZGVyIHVzaW5nIGBFbWJlci5Db250YWluZXJWaWV3YAog
        ICAgaW5zdGVhZC4gSWYgeW91IGRvIG5lZWQgdG8gdXNlIGBhcHBlbmRUb2As
        IGJlIHN1cmUgdGhhdCB0aGUgdGFyZ2V0IGVsZW1lbnQKICAgIHlvdSBhcmUg
        cHJvdmlkaW5nIGlzIGFzc29jaWF0ZWQgd2l0aCBhbiBgRW1iZXIuQXBwbGlj
        YXRpb25gIGFuZCBkb2VzIG5vdAogICAgaGF2ZSBhbiBhbmNlc3RvciBlbGVt
        ZW50IHRoYXQgaXMgYXNzb2NpYXRlZCB3aXRoIGFuIEVtYmVyIHZpZXcuCgog
        ICAgQG1ldGhvZCBhcHBlbmRUbwogICAgQHBhcmFtIHtTdHJpbmd8RE9NRWxl
        bWVudHxqUXVlcnl9IEEgc2VsZWN0b3IsIGVsZW1lbnQsIEhUTUwgc3RyaW5n
        LCBvciBqUXVlcnkgb2JqZWN0CiAgICBAcmV0dXJuIHtFbWJlci5WaWV3fSBy
        ZWNlaXZlcgogICovCiAgYXBwZW5kVG86IGZ1bmN0aW9uKHRhcmdldCkgewog
        ICAgLy8gU2NoZWR1bGUgdGhlIERPTSBlbGVtZW50IHRvIGJlIGNyZWF0ZWQg
        YW5kIGFwcGVuZGVkIHRvIHRoZSBnaXZlbgogICAgLy8gZWxlbWVudCBhZnRl
        ciBiaW5kaW5ncyBoYXZlIHN5bmNocm9uaXplZC4KICAgIHRoaXMuX2luc2Vy
        dEVsZW1lbnRMYXRlcihmdW5jdGlvbigpIHsKICAgICAgRW1iZXIuYXNzZXJ0
        KCJZb3UgdHJpZWQgdG8gYXBwZW5kIHRvICgiICsgdGFyZ2V0ICsgIikgYnV0
        IHRoYXQgaXNuJ3QgaW4gdGhlIERPTSIsIEVtYmVyLiQodGFyZ2V0KS5sZW5n
        dGggPiAwKTsKICAgICAgRW1iZXIuYXNzZXJ0KCJZb3UgY2Fubm90IGFwcGVu
        ZCB0byBhbiBleGlzdGluZyBFbWJlci5WaWV3LiBDb25zaWRlciB1c2luZyBF
        bWJlci5Db250YWluZXJWaWV3IGluc3RlYWQuIiwgIUVtYmVyLiQodGFyZ2V0
        KS5pcygnLmVtYmVyLXZpZXcnKSAmJiAhRW1iZXIuJCh0YXJnZXQpLnBhcmVu
        dHMoKS5pcygnLmVtYmVyLXZpZXcnKSk7CiAgICAgIHRoaXMuJCgpLmFwcGVu
        ZFRvKHRhcmdldCk7CiAgICB9KTsKCiAgICByZXR1cm4gdGhpczsKICB9LAoK
        ICAvKioKICAgIFJlcGxhY2VzIHRoZSBjb250ZW50IG9mIHRoZSBzcGVjaWZp
        ZWQgcGFyZW50IGVsZW1lbnQgd2l0aCB0aGlzIHZpZXcncwogICAgZWxlbWVu
        dC4gSWYgdGhlIHZpZXcgZG9lcyBub3QgaGF2ZSBhbiBIVE1MIHJlcHJlc2Vu
        dGF0aW9uIHlldCwKICAgIGBjcmVhdGVFbGVtZW50KClgIHdpbGwgYmUgY2Fs
        bGVkIGF1dG9tYXRpY2FsbHkuCgogICAgTm90ZSB0aGF0IHRoaXMgbWV0aG9k
        IGp1c3Qgc2NoZWR1bGVzIHRoZSB2aWV3IHRvIGJlIGFwcGVuZGVkOyB0aGUg
        RE9NCiAgICBlbGVtZW50IHdpbGwgbm90IGJlIGFwcGVuZGVkIHRvIHRoZSBn
        aXZlbiBlbGVtZW50IHVudGlsIGFsbCBiaW5kaW5ncyBoYXZlCiAgICBmaW5p
        c2hlZCBzeW5jaHJvbml6aW5nCgogICAgQG1ldGhvZCByZXBsYWNlSW4KICAg
        IEBwYXJhbSB7U3RyaW5nfERPTUVsZW1lbnR8alF1ZXJ5fSBBIHNlbGVjdG9y
        LCBlbGVtZW50LCBIVE1MIHN0cmluZywgb3IgalF1ZXJ5IG9iamVjdAogICAg
        QHJldHVybiB7RW1iZXIuVmlld30gcmVjZWl2ZWQKICAqLwogIHJlcGxhY2VJ
        bjogZnVuY3Rpb24odGFyZ2V0KSB7CiAgICBFbWJlci5hc3NlcnQoIllvdSB0
        cmllZCB0byByZXBsYWNlIGluICgiICsgdGFyZ2V0ICsgIikgYnV0IHRoYXQg
        aXNuJ3QgaW4gdGhlIERPTSIsIEVtYmVyLiQodGFyZ2V0KS5sZW5ndGggPiAw
        KTsKICAgIEVtYmVyLmFzc2VydCgiWW91IGNhbm5vdCByZXBsYWNlIGFuIGV4
        aXN0aW5nIEVtYmVyLlZpZXcuIENvbnNpZGVyIHVzaW5nIEVtYmVyLkNvbnRh
        aW5lclZpZXcgaW5zdGVhZC4iLCAhRW1iZXIuJCh0YXJnZXQpLmlzKCcuZW1i
        ZXItdmlldycpICYmICFFbWJlci4kKHRhcmdldCkucGFyZW50cygpLmlzKCcu
        ZW1iZXItdmlldycpKTsKCiAgICB0aGlzLl9pbnNlcnRFbGVtZW50TGF0ZXIo
        ZnVuY3Rpb24oKSB7CiAgICAgIEVtYmVyLiQodGFyZ2V0KS5lbXB0eSgpOwog
        ICAgICB0aGlzLiQoKS5hcHBlbmRUbyh0YXJnZXQpOwogICAgfSk7CgogICAg
        cmV0dXJuIHRoaXM7CiAgfSwKCiAgLyoqCiAgICBAcHJpdmF0ZQoKICAgIFNj
        aGVkdWxlcyBhIERPTSBvcGVyYXRpb24gdG8gb2NjdXIgZHVyaW5nIHRoZSBu
        ZXh0IHJlbmRlciBwaGFzZS4gVGhpcwogICAgZW5zdXJlcyB0aGF0IGFsbCBi
        aW5kaW5ncyBoYXZlIGZpbmlzaGVkIHN5bmNocm9uaXppbmcgYmVmb3JlIHRo
        ZSB2aWV3IGlzCiAgICByZW5kZXJlZC4KCiAgICBUbyB1c2UsIHBhc3MgYSBm
        dW5jdGlvbiB0aGF0IHBlcmZvcm1zIGEgRE9NIG9wZXJhdGlvbi4KCiAgICBC
        ZWZvcmUgeW91ciBmdW5jdGlvbiBpcyBjYWxsZWQsIHRoaXMgdmlldyBhbmQg
        YWxsIGNoaWxkIHZpZXdzIHdpbGwgcmVjZWl2ZQogICAgdGhlIGB3aWxsSW5z
        ZXJ0RWxlbWVudGAgZXZlbnQuIEFmdGVyIHlvdXIgZnVuY3Rpb24gaXMgaW52
        b2tlZCwgdGhpcyB2aWV3CiAgICBhbmQgYWxsIG9mIGl0cyBjaGlsZCB2aWV3
        cyB3aWxsIHJlY2VpdmUgdGhlIGBkaWRJbnNlcnRFbGVtZW50YCBldmVudC4K
        CiAgICBgYGBqYXZhc2NyaXB0CiAgICB2aWV3Ll9pbnNlcnRFbGVtZW50TGF0
        ZXIoZnVuY3Rpb24oKSB7CiAgICAgIHRoaXMuY3JlYXRlRWxlbWVudCgpOwog
        ICAgICB0aGlzLiQoKS5hcHBlbmRUbygnYm9keScpOwogICAgfSk7CiAgICBg
        YGAKCiAgICBAbWV0aG9kIF9pbnNlcnRFbGVtZW50TGF0ZXIKICAgIEBwYXJh
        bSB7RnVuY3Rpb259IGZuIHRoZSBmdW5jdGlvbiB0aGF0IGluc2VydHMgdGhl
        IGVsZW1lbnQgaW50byB0aGUgRE9NCiAgKi8KICBfaW5zZXJ0RWxlbWVudExh
        dGVyOiBmdW5jdGlvbihmbikgewogICAgdGhpcy5fc2NoZWR1bGVkSW5zZXJ0
        ID0gRW1iZXIucnVuLnNjaGVkdWxlT25jZSgncmVuZGVyJywgdGhpcywgJ19p
        bnNlcnRFbGVtZW50JywgZm4pOwogIH0sCgogIF9pbnNlcnRFbGVtZW50OiBm
        dW5jdGlvbiAoZm4pIHsKICAgIHRoaXMuX3NjaGVkdWxlZEluc2VydCA9IG51
        bGw7CiAgICB0aGlzLmN1cnJlbnRTdGF0ZS5pbnNlcnRFbGVtZW50KHRoaXMs
        IGZuKTsKICB9LAoKICAvKioKICAgIEFwcGVuZHMgdGhlIHZpZXcncyBlbGVt
        ZW50IHRvIHRoZSBkb2N1bWVudCBib2R5LiBJZiB0aGUgdmlldyBkb2VzCiAg
        ICBub3QgaGF2ZSBhbiBIVE1MIHJlcHJlc2VudGF0aW9uIHlldCwgYGNyZWF0
        ZUVsZW1lbnQoKWAgd2lsbCBiZSBjYWxsZWQKICAgIGF1dG9tYXRpY2FsbHku
        CgogICAgSWYgeW91ciBhcHBsaWNhdGlvbiB1c2VzIHRoZSBgcm9vdEVsZW1l
        bnRgIHByb3BlcnR5LCB5b3UgbXVzdCBhcHBlbmQKICAgIHRoZSB2aWV3IHdp
        dGhpbiB0aGF0IGVsZW1lbnQuIFJlbmRlcmluZyB2aWV3cyBvdXRzaWRlIG9m
        IHRoZSBgcm9vdEVsZW1lbnRgCiAgICBpcyBub3Qgc3VwcG9ydGVkLgoKICAg
        IE5vdGUgdGhhdCB0aGlzIG1ldGhvZCBqdXN0IHNjaGVkdWxlcyB0aGUgdmll
        dyB0byBiZSBhcHBlbmRlZDsgdGhlIERPTQogICAgZWxlbWVudCB3aWxsIG5v
        dCBiZSBhcHBlbmRlZCB0byB0aGUgZG9jdW1lbnQgYm9keSB1bnRpbCBhbGwg
        YmluZGluZ3MgaGF2ZQogICAgZmluaXNoZWQgc3luY2hyb25pemluZy4KCiAg
        ICBAbWV0aG9kIGFwcGVuZAogICAgQHJldHVybiB7RW1iZXIuVmlld30gcmVj
        ZWl2ZXIKICAqLwogIGFwcGVuZDogZnVuY3Rpb24oKSB7CiAgICByZXR1cm4g
        dGhpcy5hcHBlbmRUbyhkb2N1bWVudC5ib2R5KTsKICB9LAoKICAvKioKICAg
        IFJlbW92ZXMgdGhlIHZpZXcncyBlbGVtZW50IGZyb20gdGhlIGVsZW1lbnQg
        dG8gd2hpY2ggaXQgaXMgYXR0YWNoZWQuCgogICAgQG1ldGhvZCByZW1vdmUK
        ICAgIEByZXR1cm4ge0VtYmVyLlZpZXd9IHJlY2VpdmVyCiAgKi8KICByZW1v
        dmU6IGZ1bmN0aW9uKCkgewogICAgLy8gV2hhdCB3ZSBzaG91bGQgcmVhbGx5
        IGRvIGhlcmUgaXMgd2FpdCB1bnRpbCB0aGUgZW5kIG9mIHRoZSBydW4gbG9v
        cAogICAgLy8gdG8gZGV0ZXJtaW5lIGlmIHRoZSBlbGVtZW50IGhhcyBiZWVu
        IHJlLWFwcGVuZGVkIHRvIGEgZGlmZmVyZW50CiAgICAvLyBlbGVtZW50Lgog
        ICAgLy8gSW4gdGhlIGludGVyaW0sIHdlIHdpbGwganVzdCByZS1yZW5kZXIg
        aWYgdGhhdCBoYXBwZW5zLiBJdCBpcyBtb3JlCiAgICAvLyBpbXBvcnRhbnQg
        dGhhbiBlbGVtZW50cyBnZXQgZ2FyYmFnZSBjb2xsZWN0ZWQuCiAgICBpZiAo
        IXRoaXMucmVtb3ZlZEZyb21ET00pIHsgdGhpcy5kZXN0cm95RWxlbWVudCgp
        OyB9CiAgICB0aGlzLmludm9rZVJlY3Vyc2l2ZWx5KGZ1bmN0aW9uKHZpZXcp
        IHsKICAgICAgaWYgKHZpZXcuY2xlYXJSZW5kZXJlZENoaWxkcmVuKSB7IHZp
        ZXcuY2xlYXJSZW5kZXJlZENoaWxkcmVuKCk7IH0KICAgIH0pOwogIH0sCgog
        IGVsZW1lbnRJZDogbnVsbCwKCiAgLyoqCiAgICBBdHRlbXB0cyB0byBkaXNj
        b3ZlciB0aGUgZWxlbWVudCBpbiB0aGUgcGFyZW50IGVsZW1lbnQuIFRoZSBk
        ZWZhdWx0CiAgICBpbXBsZW1lbnRhdGlvbiBsb29rcyBmb3IgYW4gZWxlbWVu
        dCB3aXRoIGFuIElEIG9mIGBlbGVtZW50SWRgIChvciB0aGUKICAgIHZpZXcn
        cyBndWlkIGlmIGBlbGVtZW50SWRgIGlzIG51bGwpLiBZb3UgY2FuIG92ZXJy
        aWRlIHRoaXMgbWV0aG9kIHRvCiAgICBwcm92aWRlIHlvdXIgb3duIGZvcm0g
        b2YgbG9va3VwLiBGb3IgZXhhbXBsZSwgaWYgeW91IHdhbnQgdG8gZGlzY292
        ZXIgeW91cgogICAgZWxlbWVudCB1c2luZyBhIENTUyBjbGFzcyBuYW1lIGlu
        c3RlYWQgb2YgYW4gSUQuCgogICAgQG1ldGhvZCBmaW5kRWxlbWVudEluUGFy
        ZW50RWxlbWVudAogICAgQHBhcmFtIHtET01FbGVtZW50fSBwYXJlbnRFbGVt
        ZW50IFRoZSBwYXJlbnQncyBET00gZWxlbWVudAogICAgQHJldHVybiB7RE9N
        RWxlbWVudH0gVGhlIGRpc2NvdmVyZWQgZWxlbWVudAogICovCiAgZmluZEVs
        ZW1lbnRJblBhcmVudEVsZW1lbnQ6IGZ1bmN0aW9uKHBhcmVudEVsZW0pIHsK
        ICAgIHZhciBpZCA9ICIjIiArIHRoaXMuZWxlbWVudElkOwogICAgcmV0dXJu
        IEVtYmVyLiQoaWQpWzBdIHx8IEVtYmVyLiQoaWQsIHBhcmVudEVsZW0pWzBd
        OwogIH0sCgogIC8qKgogICAgQ3JlYXRlcyBhIERPTSByZXByZXNlbnRhdGlv
        biBvZiB0aGUgdmlldyBhbmQgYWxsIG9mIGl0cwogICAgY2hpbGQgdmlld3Mg
        YnkgcmVjdXJzaXZlbHkgY2FsbGluZyB0aGUgYHJlbmRlcigpYCBtZXRob2Qu
        CgogICAgQWZ0ZXIgdGhlIGVsZW1lbnQgaGFzIGJlZW4gY3JlYXRlZCwgYGRp
        ZEluc2VydEVsZW1lbnRgIHdpbGwKICAgIGJlIGNhbGxlZCBvbiB0aGlzIHZp
        ZXcgYW5kIGFsbCBvZiBpdHMgY2hpbGQgdmlld3MuCgogICAgQG1ldGhvZCBj
        cmVhdGVFbGVtZW50CiAgICBAcmV0dXJuIHtFbWJlci5WaWV3fSByZWNlaXZl
        cgogICovCiAgY3JlYXRlRWxlbWVudDogZnVuY3Rpb24oKSB7CiAgICBpZiAo
        Z2V0KHRoaXMsICdlbGVtZW50JykpIHsgcmV0dXJuIHRoaXM7IH0KCiAgICB2
        YXIgYnVmZmVyID0gdGhpcy5yZW5kZXJUb0J1ZmZlcigpOwogICAgc2V0KHRo
        aXMsICdlbGVtZW50JywgYnVmZmVyLmVsZW1lbnQoKSk7CgogICAgcmV0dXJu
        IHRoaXM7CiAgfSwKCiAgLyoqCiAgICBDYWxsZWQgd2hlbiBhIHZpZXcgaXMg
        Z29pbmcgdG8gaW5zZXJ0IGFuIGVsZW1lbnQgaW50byB0aGUgRE9NLgoKICAg
        IEBldmVudCB3aWxsSW5zZXJ0RWxlbWVudAogICovCiAgd2lsbEluc2VydEVs
        ZW1lbnQ6IEVtYmVyLkssCgogIC8qKgogICAgQ2FsbGVkIHdoZW4gdGhlIGVs
        ZW1lbnQgb2YgdGhlIHZpZXcgaGFzIGJlZW4gaW5zZXJ0ZWQgaW50byB0aGUg
        RE9NCiAgICBvciBhZnRlciB0aGUgdmlldyB3YXMgcmUtcmVuZGVyZWQuIE92
        ZXJyaWRlIHRoaXMgZnVuY3Rpb24gdG8gZG8gYW55CiAgICBzZXQgdXAgdGhh
        dCByZXF1aXJlcyBhbiBlbGVtZW50IGluIHRoZSBkb2N1bWVudCBib2R5LgoK
        ICAgIEBldmVudCBkaWRJbnNlcnRFbGVtZW50CiAgKi8KICBkaWRJbnNlcnRF
        bGVtZW50OiBFbWJlci5LLAoKICAvKioKICAgIENhbGxlZCB3aGVuIHRoZSB2
        aWV3IGlzIGFib3V0IHRvIHJlcmVuZGVyLCBidXQgYmVmb3JlIGFueXRoaW5n
        IGhhcwogICAgYmVlbiB0b3JuIGRvd24uIFRoaXMgaXMgYSBnb29kIG9wcG9y
        dHVuaXR5IHRvIHRlYXIgZG93biBhbnkgbWFudWFsCiAgICBvYnNlcnZlcnMg
        eW91IGhhdmUgaW5zdGFsbGVkIGJhc2VkIG9uIHRoZSBET00gc3RhdGUKCiAg
        ICBAZXZlbnQgd2lsbENsZWFyUmVuZGVyCiAgKi8KICB3aWxsQ2xlYXJSZW5k
        ZXI6IEVtYmVyLkssCgogIC8qKgogICAgQHByaXZhdGUKCiAgICBSdW4gdGhp
        cyBjYWxsYmFjayBvbiB0aGUgY3VycmVudCB2aWV3ICh1bmxlc3MgaW5jbHVk
        ZVNlbGYgaXMgZmFsc2UpIGFuZCByZWN1cnNpdmVseSBvbiBjaGlsZCB2aWV3
        cy4KCiAgICBAbWV0aG9kIGludm9rZVJlY3Vyc2l2ZWx5CiAgICBAcGFyYW0g
        Zm4ge0Z1bmN0aW9ufQogICAgQHBhcmFtIGluY2x1ZGVTZWxmIChvcHRpb25h
        bCwgZGVmYXVsdCB0cnVlKQogICovCiAgaW52b2tlUmVjdXJzaXZlbHk6IGZ1
        bmN0aW9uKGZuLCBpbmNsdWRlU2VsZikgewogICAgdmFyIGNoaWxkVmlld3Mg
        PSAoaW5jbHVkZVNlbGYgPT09IGZhbHNlKSA/IHRoaXMuX2NoaWxkVmlld3Mg
        OiBbdGhpc107CiAgICB2YXIgY3VycmVudFZpZXdzLCB2aWV3LCBjdXJyZW50
        Q2hpbGRWaWV3czsKCiAgICB3aGlsZSAoY2hpbGRWaWV3cy5sZW5ndGgpIHsK
        ICAgICAgY3VycmVudFZpZXdzID0gY2hpbGRWaWV3cy5zbGljZSgpOwogICAg
        ICBjaGlsZFZpZXdzID0gW107CgogICAgICBmb3IgKHZhciBpPTAsIGw9Y3Vy
        cmVudFZpZXdzLmxlbmd0aDsgaTxsOyBpKyspIHsKICAgICAgICB2aWV3ID0g
        Y3VycmVudFZpZXdzW2ldOwogICAgICAgIGN1cnJlbnRDaGlsZFZpZXdzID0g
        dmlldy5fY2hpbGRWaWV3cyA/IHZpZXcuX2NoaWxkVmlld3Muc2xpY2UoMCkg
        OiBudWxsOwogICAgICAgIGZuKHZpZXcpOwogICAgICAgIGlmIChjdXJyZW50
        Q2hpbGRWaWV3cykgewogICAgICAgICAgY2hpbGRWaWV3cy5wdXNoLmFwcGx5
        KGNoaWxkVmlld3MsIGN1cnJlbnRDaGlsZFZpZXdzKTsKICAgICAgICB9CiAg
        ICAgIH0KICAgIH0KICB9LAoKICB0cmlnZ2VyUmVjdXJzaXZlbHk6IGZ1bmN0
        aW9uKGV2ZW50TmFtZSkgewogICAgdmFyIGNoaWxkVmlld3MgPSBbdGhpc10s
        IGN1cnJlbnRWaWV3cywgdmlldywgY3VycmVudENoaWxkVmlld3M7CgogICAg
        d2hpbGUgKGNoaWxkVmlld3MubGVuZ3RoKSB7CiAgICAgIGN1cnJlbnRWaWV3
        cyA9IGNoaWxkVmlld3Muc2xpY2UoKTsKICAgICAgY2hpbGRWaWV3cyA9IFtd
        OwoKICAgICAgZm9yICh2YXIgaT0wLCBsPWN1cnJlbnRWaWV3cy5sZW5ndGg7
        IGk8bDsgaSsrKSB7CiAgICAgICAgdmlldyA9IGN1cnJlbnRWaWV3c1tpXTsK
        ICAgICAgICBjdXJyZW50Q2hpbGRWaWV3cyA9IHZpZXcuX2NoaWxkVmlld3Mg
        PyB2aWV3Ll9jaGlsZFZpZXdzLnNsaWNlKDApIDogbnVsbDsKICAgICAgICBp
        ZiAodmlldy50cmlnZ2VyKSB7IHZpZXcudHJpZ2dlcihldmVudE5hbWUpOyB9
        CiAgICAgICAgaWYgKGN1cnJlbnRDaGlsZFZpZXdzKSB7CiAgICAgICAgICBj
        aGlsZFZpZXdzLnB1c2guYXBwbHkoY2hpbGRWaWV3cywgY3VycmVudENoaWxk
        Vmlld3MpOwogICAgICAgIH0KCiAgICAgIH0KICAgIH0KICB9LAoKICB2aWV3
        SGllcmFyY2h5Q29sbGVjdGlvbjogZnVuY3Rpb24oKSB7CiAgICB2YXIgY3Vy
        cmVudFZpZXcsIHZpZXdDb2xsZWN0aW9uID0gbmV3IFZpZXdDb2xsZWN0aW9u
        KFt0aGlzXSk7CgogICAgZm9yICh2YXIgaSA9IDA7IGkgPCB2aWV3Q29sbGVj
        dGlvbi5sZW5ndGg7IGkrKykgewogICAgICBjdXJyZW50VmlldyA9IHZpZXdD
        b2xsZWN0aW9uLm9iamVjdEF0KGkpOwogICAgICBpZiAoY3VycmVudFZpZXcu
        X2NoaWxkVmlld3MpIHsKICAgICAgICB2aWV3Q29sbGVjdGlvbi5wdXNoLmFw
        cGx5KHZpZXdDb2xsZWN0aW9uLCBjdXJyZW50Vmlldy5fY2hpbGRWaWV3cyk7
        CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gdmlld0NvbGxlY3Rpb247CiAg
        fSwKCiAgLyoqCiAgICBEZXN0cm95cyBhbnkgZXhpc3RpbmcgZWxlbWVudCBh
        bG9uZyB3aXRoIHRoZSBlbGVtZW50IGZvciBhbnkgY2hpbGQgdmlld3MKICAg
        IGFzIHdlbGwuIElmIHRoZSB2aWV3IGRvZXMgbm90IGN1cnJlbnRseSBoYXZl
        IGEgZWxlbWVudCwgdGhlbiB0aGlzIG1ldGhvZAogICAgd2lsbCBkbyBub3Ro
        aW5nLgoKICAgIElmIHlvdSBpbXBsZW1lbnQgYHdpbGxEZXN0cm95RWxlbWVu
        dCgpYCBvbiB5b3VyIHZpZXcsIHRoZW4gdGhpcyBtZXRob2Qgd2lsbAogICAg
        YmUgaW52b2tlZCBvbiB5b3VyIHZpZXcgYmVmb3JlIHlvdXIgZWxlbWVudCBp
        cyBkZXN0cm95ZWQgdG8gZ2l2ZSB5b3UgYQogICAgY2hhbmNlIHRvIGNsZWFu
        IHVwIGFueSBldmVudCBoYW5kbGVycywgZXRjLgoKICAgIElmIHlvdSB3cml0
        ZSBhIGB3aWxsRGVzdHJveUVsZW1lbnQoKWAgaGFuZGxlciwgeW91IGNhbiBh
        c3N1bWUgdGhhdCB5b3VyCiAgICBgZGlkSW5zZXJ0RWxlbWVudCgpYCBoYW5k
        bGVyIHdhcyBjYWxsZWQgZWFybGllciBmb3IgdGhlIHNhbWUgZWxlbWVudC4K
        CiAgICBZb3Ugc2hvdWxkIG5vdCBjYWxsIG9yIG92ZXJyaWRlIHRoaXMgbWV0
        aG9kIHlvdXJzZWxmLCBidXQgeW91IG1heQogICAgd2FudCB0byBpbXBsZW1l
        bnQgdGhlIGFib3ZlIGNhbGxiYWNrcy4KCiAgICBAbWV0aG9kIGRlc3Ryb3lF
        bGVtZW50CiAgICBAcmV0dXJuIHtFbWJlci5WaWV3fSByZWNlaXZlcgogICov
        CiAgZGVzdHJveUVsZW1lbnQ6IGZ1bmN0aW9uKCkgewogICAgcmV0dXJuIHRo
        aXMuY3VycmVudFN0YXRlLmRlc3Ryb3lFbGVtZW50KHRoaXMpOwogIH0sCgog
        IC8qKgogICAgQ2FsbGVkIHdoZW4gdGhlIGVsZW1lbnQgb2YgdGhlIHZpZXcg
        aXMgZ29pbmcgdG8gYmUgZGVzdHJveWVkLiBPdmVycmlkZQogICAgdGhpcyBm
        dW5jdGlvbiB0byBkbyBhbnkgdGVhcmRvd24gdGhhdCByZXF1aXJlcyBhbiBl
        bGVtZW50LCBsaWtlIHJlbW92aW5nCiAgICBldmVudCBsaXN0ZW5lcnMuCgog
        ICAgQGV2ZW50IHdpbGxEZXN0cm95RWxlbWVudAogICovCiAgd2lsbERlc3Ry
        b3lFbGVtZW50OiBFbWJlci5LLAoKICAvKioKICAgIEBwcml2YXRlCgogICAg
        VHJpZ2dlcnMgdGhlIGB3aWxsRGVzdHJveUVsZW1lbnRgIGV2ZW50ICh3aGlj
        aCBpbnZva2VzIHRoZQogICAgYHdpbGxEZXN0cm95RWxlbWVudCgpYCBtZXRo
        b2QgaWYgaXQgZXhpc3RzKSBvbiB0aGlzIHZpZXcgYW5kIGFsbCBjaGlsZAog
        ICAgdmlld3MuCgogICAgQmVmb3JlIHRyaWdnZXJpbmcgYHdpbGxEZXN0cm95
        RWxlbWVudGAsIGl0IGZpcnN0IHRyaWdnZXJzIHRoZQogICAgYHdpbGxDbGVh
        clJlbmRlcmAgZXZlbnQgcmVjdXJzaXZlbHkuCgogICAgQG1ldGhvZCBfbm90
        aWZ5V2lsbERlc3Ryb3lFbGVtZW50CiAgKi8KICBfbm90aWZ5V2lsbERlc3Ry
        b3lFbGVtZW50OiBmdW5jdGlvbigpIHsKICAgIHZhciB2aWV3Q29sbGVjdGlv
        biA9IHRoaXMudmlld0hpZXJhcmNoeUNvbGxlY3Rpb24oKTsKICAgIHZpZXdD
        b2xsZWN0aW9uLnRyaWdnZXIoJ3dpbGxDbGVhclJlbmRlcicpOwogICAgdmll
        d0NvbGxlY3Rpb24udHJpZ2dlcignd2lsbERlc3Ryb3lFbGVtZW50Jyk7CiAg
        ICByZXR1cm4gdmlld0NvbGxlY3Rpb247CiAgfSwKCiAgLyoqCiAgICBAcHJp
        dmF0ZQoKICAgIElmIHRoaXMgdmlldydzIGVsZW1lbnQgY2hhbmdlcywgd2Ug
        bmVlZCB0byBpbnZhbGlkYXRlIHRoZSBjYWNoZXMgb2Ygb3VyCiAgICBjaGls
        ZCB2aWV3cyBzbyB0aGF0IHdlIGRvIG5vdCByZXRhaW4gcmVmZXJlbmNlcyB0
        byBET00gZWxlbWVudHMgdGhhdCBhcmUKICAgIG5vIGxvbmdlciBuZWVkZWQu
        CgogICAgQG1ldGhvZCBfZWxlbWVudERpZENoYW5nZQogICovCiAgX2VsZW1l
        bnREaWRDaGFuZ2U6IEVtYmVyLm9ic2VydmVyKCdlbGVtZW50JywgZnVuY3Rp
        b24oKSB7CiAgICB0aGlzLmZvckVhY2hDaGlsZFZpZXcoZnVuY3Rpb24odmll
        dykgewogICAgICBkZWxldGUgbWV0YSh2aWV3KS5jYWNoZS5lbGVtZW50Owog
        ICAgfSk7CiAgfSksCgogIC8qKgogICAgQ2FsbGVkIHdoZW4gdGhlIHBhcmVu
        dFZpZXcgcHJvcGVydHkgaGFzIGNoYW5nZWQuCgogICAgQGV2ZW50IHBhcmVu
        dFZpZXdEaWRDaGFuZ2UKICAqLwogIHBhcmVudFZpZXdEaWRDaGFuZ2U6IEVt
        YmVyLkssCgogIGluc3RydW1lbnROYW1lOiAndmlldycsCgogIGluc3RydW1l
        bnREZXRhaWxzOiBmdW5jdGlvbihoYXNoKSB7CiAgICBoYXNoLnRlbXBsYXRl
        ID0gZ2V0KHRoaXMsICd0ZW1wbGF0ZU5hbWUnKTsKICAgIHRoaXMuX3N1cGVy
        KGhhc2gpOwogIH0sCgogIF9yZW5kZXJUb0J1ZmZlcjogZnVuY3Rpb24ocGFy
        ZW50QnVmZmVyLCBidWZmZXJPcGVyYXRpb24pIHsKICAgIHRoaXMubGVuZ3Ro
        QmVmb3JlUmVuZGVyID0gdGhpcy5fY2hpbGRWaWV3cy5sZW5ndGg7CiAgICB2
        YXIgYnVmZmVyID0gdGhpcy5fc3VwZXIocGFyZW50QnVmZmVyLCBidWZmZXJP
        cGVyYXRpb24pOwogICAgdGhpcy5sZW5ndGhBZnRlclJlbmRlciA9IHRoaXMu
        X2NoaWxkVmlld3MubGVuZ3RoOwoKICAgIHJldHVybiBidWZmZXI7CiAgfSwK
        CiAgcmVuZGVyVG9CdWZmZXJJZk5lZWRlZDogZnVuY3Rpb24gKGJ1ZmZlcikg
        ewogICAgcmV0dXJuIHRoaXMuY3VycmVudFN0YXRlLnJlbmRlclRvQnVmZmVy
        SWZOZWVkZWQodGhpcywgYnVmZmVyKTsKICB9LAoKICBiZWZvcmVSZW5kZXI6
        IGZ1bmN0aW9uKGJ1ZmZlcikgewogICAgdGhpcy5hcHBseUF0dHJpYnV0ZXNU
        b0J1ZmZlcihidWZmZXIpOwogICAgYnVmZmVyLnB1c2hPcGVuaW5nVGFnKCk7
        CiAgfSwKCiAgYWZ0ZXJSZW5kZXI6IGZ1bmN0aW9uKGJ1ZmZlcikgewogICAg
        YnVmZmVyLnB1c2hDbG9zaW5nVGFnKCk7CiAgfSwKCiAgYXBwbHlBdHRyaWJ1
        dGVzVG9CdWZmZXI6IGZ1bmN0aW9uKGJ1ZmZlcikgewogICAgLy8gQ3JlYXRl
        cyBvYnNlcnZlcnMgZm9yIGFsbCByZWdpc3RlcmVkIGNsYXNzIG5hbWUgYW5k
        IGF0dHJpYnV0ZSBiaW5kaW5ncywKICAgIC8vIHRoZW4gYWRkcyB0aGVtIHRv
        IHRoZSBlbGVtZW50LgogICAgdmFyIGNsYXNzTmFtZUJpbmRpbmdzID0gZ2V0
        KHRoaXMsICdjbGFzc05hbWVCaW5kaW5ncycpOwogICAgaWYgKGNsYXNzTmFt
        ZUJpbmRpbmdzLmxlbmd0aCkgewogICAgICB0aGlzLl9hcHBseUNsYXNzTmFt
        ZUJpbmRpbmdzKGNsYXNzTmFtZUJpbmRpbmdzKTsKICAgIH0KCiAgICAvLyBQ
        YXNzIHRoZSByZW5kZXIgYnVmZmVyIHNvIHRoZSBtZXRob2QgY2FuIGFwcGx5
        IGF0dHJpYnV0ZXMgZGlyZWN0bHkuCiAgICAvLyBUaGlzIGlzbid0IG5lZWRl
        ZCBmb3IgY2xhc3MgbmFtZSBiaW5kaW5ncyBiZWNhdXNlIHRoZXkgdXNlIHRo
        ZQogICAgLy8gZXhpc3RpbmcgY2xhc3NOYW1lcyBpbmZyYXN0cnVjdHVyZS4K
        ICAgIHZhciBhdHRyaWJ1dGVCaW5kaW5ncyA9IGdldCh0aGlzLCAnYXR0cmli
        dXRlQmluZGluZ3MnKTsKICAgIGlmIChhdHRyaWJ1dGVCaW5kaW5ncy5sZW5n
        dGgpIHsKICAgICAgdGhpcy5fYXBwbHlBdHRyaWJ1dGVCaW5kaW5ncyhidWZm
        ZXIsIGF0dHJpYnV0ZUJpbmRpbmdzKTsKICAgIH0KCiAgICBidWZmZXIuc2V0
        Q2xhc3Nlcyh0aGlzLmNsYXNzTmFtZXMpOwogICAgYnVmZmVyLmlkKHRoaXMu
        ZWxlbWVudElkKTsKCiAgICB2YXIgcm9sZSA9IGdldCh0aGlzLCAnYXJpYVJv
        bGUnKTsKICAgIGlmIChyb2xlKSB7CiAgICAgIGJ1ZmZlci5hdHRyKCdyb2xl
        Jywgcm9sZSk7CiAgICB9CgogICAgaWYgKGdldCh0aGlzLCAnaXNWaXNpYmxl
        JykgPT09IGZhbHNlKSB7CiAgICAgIGJ1ZmZlci5zdHlsZSgnZGlzcGxheScs
        ICdub25lJyk7CiAgICB9CiAgfSwKCiAgLy8gLi4uLi4uLi4uLi4uLi4uLi4u
        Li4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLgogIC8v
        IFNUQU5EQVJEIFJFTkRFUiBQUk9QRVJUSUVTCiAgLy8KCiAgLyoqCiAgICBU
        YWcgbmFtZSBmb3IgdGhlIHZpZXcncyBvdXRlciBlbGVtZW50LiBUaGUgdGFn
        IG5hbWUgaXMgb25seSB1c2VkIHdoZW4gYW4KICAgIGVsZW1lbnQgaXMgZmly
        c3QgY3JlYXRlZC4gSWYgeW91IGNoYW5nZSB0aGUgYHRhZ05hbWVgIGZvciBh
        biBlbGVtZW50LCB5b3UKICAgIG11c3QgZGVzdHJveSBhbmQgcmVjcmVhdGUg
        dGhlIHZpZXcgZWxlbWVudC4KCiAgICBCeSBkZWZhdWx0LCB0aGUgcmVuZGVy
        IGJ1ZmZlciB3aWxsIHVzZSBhIGA8ZGl2PmAgdGFnIGZvciB2aWV3cy4KCiAg
        ICBAcHJvcGVydHkgdGFnTmFtZQogICAgQHR5cGUgU3RyaW5nCiAgICBAZGVm
        YXVsdCBudWxsCiAgKi8KCiAgLy8gV2UgbGVhdmUgdGhpcyBudWxsIGJ5IGRl
        ZmF1bHQgc28gd2UgY2FuIHRlbGwgdGhlIGRpZmZlcmVuY2UgYmV0d2Vlbgog
        IC8vIHRoZSBkZWZhdWx0IGNhc2UgYW5kIGEgdXNlci1zcGVjaWZpZWQgdGFn
        LgogIHRhZ05hbWU6IG51bGwsCgogIC8qKgogICAgVGhlIFdBSS1BUklBIHJv
        bGUgb2YgdGhlIGNvbnRyb2wgcmVwcmVzZW50ZWQgYnkgdGhpcyB2aWV3LiBG
        b3IgZXhhbXBsZSwgYQogICAgYnV0dG9uIG1heSBoYXZlIGEgcm9sZSBvZiB0
        eXBlICdidXR0b24nLCBvciBhIHBhbmUgbWF5IGhhdmUgYSByb2xlIG9mCiAg
        ICB0eXBlICdhbGVydGRpYWxvZycuIFRoaXMgcHJvcGVydHkgaXMgdXNlZCBi
        eSBhc3Npc3RpdmUgc29mdHdhcmUgdG8gaGVscAogICAgdmlzdWFsbHkgY2hh
        bGxlbmdlZCB1c2VycyBuYXZpZ2F0ZSByaWNoIHdlYiBhcHBsaWNhdGlvbnMu
        CgogICAgVGhlIGZ1bGwgbGlzdCBvZiB2YWxpZCBXQUktQVJJQSByb2xlcyBp
        cyBhdmFpbGFibGUgYXQ6CiAgICBbaHR0cDovL3d3dy53My5vcmcvVFIvd2Fp
        LWFyaWEvcm9sZXMjcm9sZXNfY2F0ZWdvcml6YXRpb25dKGh0dHA6Ly93d3cu
        dzMub3JnL1RSL3dhaS1hcmlhL3JvbGVzI3JvbGVzX2NhdGVnb3JpemF0aW9u
        KQoKICAgIEBwcm9wZXJ0eSBhcmlhUm9sZQogICAgQHR5cGUgU3RyaW5nCiAg
        ICBAZGVmYXVsdCBudWxsCiAgKi8KICBhcmlhUm9sZTogbnVsbCwKCiAgLyoq
        CiAgICBTdGFuZGFyZCBDU1MgY2xhc3MgbmFtZXMgdG8gYXBwbHkgdG8gdGhl
        IHZpZXcncyBvdXRlciBlbGVtZW50LiBUaGlzCiAgICBwcm9wZXJ0eSBhdXRv
        bWF0aWNhbGx5IGluaGVyaXRzIGFueSBjbGFzcyBuYW1lcyBkZWZpbmVkIGJ5
        IHRoZSB2aWV3J3MKICAgIHN1cGVyY2xhc3NlcyBhcyB3ZWxsLgoKICAgIEBw
        cm9wZXJ0eSBjbGFzc05hbWVzCiAgICBAdHlwZSBBcnJheQogICAgQGRlZmF1
        bHQgWydlbWJlci12aWV3J10KICAqLwogIGNsYXNzTmFtZXM6IFsnZW1iZXIt
        dmlldyddLAoKICAvKioKICAgIEEgbGlzdCBvZiBwcm9wZXJ0aWVzIG9mIHRo
        ZSB2aWV3IHRvIGFwcGx5IGFzIGNsYXNzIG5hbWVzLiBJZiB0aGUgcHJvcGVy
        dHkKICAgIGlzIGEgc3RyaW5nIHZhbHVlLCB0aGUgdmFsdWUgb2YgdGhhdCBz
        dHJpbmcgd2lsbCBiZSBhcHBsaWVkIGFzIGEgY2xhc3MKICAgIG5hbWUuCgog
        ICAgYGBgamF2YXNjcmlwdAogICAgLy8gQXBwbGllcyB0aGUgJ2hpZ2gnIGNs
        YXNzIHRvIHRoZSB2aWV3IGVsZW1lbnQKICAgIEVtYmVyLlZpZXcuZXh0ZW5k
        KHsKICAgICAgY2xhc3NOYW1lQmluZGluZ3M6IFsncHJpb3JpdHknXQogICAg
        ICBwcmlvcml0eTogJ2hpZ2gnCiAgICB9KTsKICAgIGBgYAoKICAgIElmIHRo
        ZSB2YWx1ZSBvZiB0aGUgcHJvcGVydHkgaXMgYSBCb29sZWFuLCB0aGUgbmFt
        ZSBvZiB0aGF0IHByb3BlcnR5IGlzCiAgICBhZGRlZCBhcyBhIGRhc2hlcml6
        ZWQgY2xhc3MgbmFtZS4KCiAgICBgYGBqYXZhc2NyaXB0CiAgICAvLyBBcHBs
        aWVzIHRoZSAnaXMtdXJnZW50JyBjbGFzcyB0byB0aGUgdmlldyBlbGVtZW50
        CiAgICBFbWJlci5WaWV3LmV4dGVuZCh7CiAgICAgIGNsYXNzTmFtZUJpbmRp
        bmdzOiBbJ2lzVXJnZW50J10KICAgICAgaXNVcmdlbnQ6IHRydWUKICAgIH0p
        OwogICAgYGBgCgogICAgSWYgeW91IHdvdWxkIHByZWZlciB0byB1c2UgYSBj
        dXN0b20gdmFsdWUgaW5zdGVhZCBvZiB0aGUgZGFzaGVyaXplZAogICAgcHJv
        cGVydHkgbmFtZSwgeW91IGNhbiBwYXNzIGEgYmluZGluZyBsaWtlIHRoaXM6
        CgogICAgYGBgamF2YXNjcmlwdAogICAgLy8gQXBwbGllcyB0aGUgJ3VyZ2Vu
        dCcgY2xhc3MgdG8gdGhlIHZpZXcgZWxlbWVudAogICAgRW1iZXIuVmlldy5l
        eHRlbmQoewogICAgICBjbGFzc05hbWVCaW5kaW5nczogWydpc1VyZ2VudDp1
        cmdlbnQnXQogICAgICBpc1VyZ2VudDogdHJ1ZQogICAgfSk7CiAgICBgYGAK
        CiAgICBUaGlzIGxpc3Qgb2YgcHJvcGVydGllcyBpcyBpbmhlcml0ZWQgZnJv
        bSB0aGUgdmlldydzIHN1cGVyY2xhc3NlcyBhcyB3ZWxsLgoKICAgIEBwcm9w
        ZXJ0eSBjbGFzc05hbWVCaW5kaW5ncwogICAgQHR5cGUgQXJyYXkKICAgIEBk
        ZWZhdWx0IFtdCiAgKi8KICBjbGFzc05hbWVCaW5kaW5nczogRU1QVFlfQVJS
        QVksCgogIC8qKgogICAgQSBsaXN0IG9mIHByb3BlcnRpZXMgb2YgdGhlIHZp
        ZXcgdG8gYXBwbHkgYXMgYXR0cmlidXRlcy4gSWYgdGhlIHByb3BlcnR5IGlz
        CiAgICBhIHN0cmluZyB2YWx1ZSwgdGhlIHZhbHVlIG9mIHRoYXQgc3RyaW5n
        IHdpbGwgYmUgYXBwbGllZCBhcyB0aGUgYXR0cmlidXRlLgoKICAgIGBgYGph
        dmFzY3JpcHQKICAgIC8vIEFwcGxpZXMgdGhlIHR5cGUgYXR0cmlidXRlIHRv
        IHRoZSBlbGVtZW50CiAgICAvLyB3aXRoIHRoZSB2YWx1ZSAiYnV0dG9uIiwg
        bGlrZSA8ZGl2IHR5cGU9ImJ1dHRvbiI+CiAgICBFbWJlci5WaWV3LmV4dGVu
        ZCh7CiAgICAgIGF0dHJpYnV0ZUJpbmRpbmdzOiBbJ3R5cGUnXSwKICAgICAg
        dHlwZTogJ2J1dHRvbicKICAgIH0pOwogICAgYGBgCgogICAgSWYgdGhlIHZh
        bHVlIG9mIHRoZSBwcm9wZXJ0eSBpcyBhIEJvb2xlYW4sIHRoZSBuYW1lIG9m
        IHRoYXQgcHJvcGVydHkgaXMKICAgIGFkZGVkIGFzIGFuIGF0dHJpYnV0ZS4K
        CiAgICBgYGBqYXZhc2NyaXB0CiAgICAvLyBSZW5kZXJzIHNvbWV0aGluZyBs
        aWtlIDxkaXYgZW5hYmxlZD0iZW5hYmxlZCI+CiAgICBFbWJlci5WaWV3LmV4
        dGVuZCh7CiAgICAgIGF0dHJpYnV0ZUJpbmRpbmdzOiBbJ2VuYWJsZWQnXSwK
        ICAgICAgZW5hYmxlZDogdHJ1ZQogICAgfSk7CiAgICBgYGAKCiAgICBAcHJv
        cGVydHkgYXR0cmlidXRlQmluZGluZ3MKICAqLwogIGF0dHJpYnV0ZUJpbmRp
        bmdzOiBFTVBUWV9BUlJBWSwKCiAgLy8gLi4uLi4uLi4uLi4uLi4uLi4uLi4u
        Li4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLgogIC8vIENPUkUg
        RElTUExBWSBNRVRIT0RTCiAgLy8KCiAgLyoqCiAgICBAcHJpdmF0ZQoKICAg
        IFNldHVwIGEgdmlldywgYnV0IGRvIG5vdCBmaW5pc2ggd2FraW5nIGl0IHVw
        LgogICAgLSBjb25maWd1cmUgYGNoaWxkVmlld3NgCiAgICAtIHJlZ2lzdGVy
        IHRoZSB2aWV3IHdpdGggdGhlIGdsb2JhbCB2aWV3cyBoYXNoLCB3aGljaCBp
        cyB1c2VkIGZvciBldmVudAogICAgICBkaXNwYXRjaAoKICAgIEBtZXRob2Qg
        aW5pdAogICovCiAgaW5pdDogZnVuY3Rpb24oKSB7CiAgICB0aGlzLmVsZW1l
        bnRJZCA9IHRoaXMuZWxlbWVudElkIHx8IGd1aWRGb3IodGhpcyk7CgogICAg
        dGhpcy5fc3VwZXIoKTsKCiAgICAvLyBzZXR1cCBjaGlsZCB2aWV3cy4gYmUg
        c3VyZSB0byBjbG9uZSB0aGUgY2hpbGQgdmlld3MgYXJyYXkgZmlyc3QKICAg
        IHRoaXMuX2NoaWxkVmlld3MgPSB0aGlzLl9jaGlsZFZpZXdzLnNsaWNlKCk7
        CgogICAgRW1iZXIuYXNzZXJ0KCJPbmx5IGFycmF5cyBhcmUgYWxsb3dlZCBm
        b3IgJ2NsYXNzTmFtZUJpbmRpbmdzJyIsIEVtYmVyLnR5cGVPZih0aGlzLmNs
        YXNzTmFtZUJpbmRpbmdzKSA9PT0gJ2FycmF5Jyk7CiAgICB0aGlzLmNsYXNz
        TmFtZUJpbmRpbmdzID0gRW1iZXIuQSh0aGlzLmNsYXNzTmFtZUJpbmRpbmdz
        LnNsaWNlKCkpOwoKICAgIEVtYmVyLmFzc2VydCgiT25seSBhcnJheXMgYXJl
        IGFsbG93ZWQgZm9yICdjbGFzc05hbWVzJyIsIEVtYmVyLnR5cGVPZih0aGlz
        LmNsYXNzTmFtZXMpID09PSAnYXJyYXknKTsKICAgIHRoaXMuY2xhc3NOYW1l
        cyA9IEVtYmVyLkEodGhpcy5jbGFzc05hbWVzLnNsaWNlKCkpOwogIH0sCgog
        IGFwcGVuZENoaWxkOiBmdW5jdGlvbih2aWV3LCBvcHRpb25zKSB7CiAgICBy
        ZXR1cm4gdGhpcy5jdXJyZW50U3RhdGUuYXBwZW5kQ2hpbGQodGhpcywgdmll
        dywgb3B0aW9ucyk7CiAgfSwKCiAgLyoqCiAgICBSZW1vdmVzIHRoZSBjaGls
        ZCB2aWV3IGZyb20gdGhlIHBhcmVudCB2aWV3LgoKICAgIEBtZXRob2QgcmVt
        b3ZlQ2hpbGQKICAgIEBwYXJhbSB7RW1iZXIuVmlld30gdmlldwogICAgQHJl
        dHVybiB7RW1iZXIuVmlld30gcmVjZWl2ZXIKICAqLwogIHJlbW92ZUNoaWxk
        OiBmdW5jdGlvbih2aWV3KSB7CiAgICAvLyBJZiB3ZSdyZSBkZXN0cm95aW5n
        LCB0aGUgZW50aXJlIHN1YnRyZWUgd2lsbCBiZQogICAgLy8gZnJlZWQsIGFu
        ZCB0aGUgRE9NIHdpbGwgYmUgaGFuZGxlZCBzZXBhcmF0ZWx5LAogICAgLy8g
        c28gbm8gbmVlZCB0byBtZXNzIHdpdGggY2hpbGRWaWV3cy4KICAgIGlmICh0
        aGlzLmlzRGVzdHJveWluZykgeyByZXR1cm47IH0KCiAgICAvLyB1cGRhdGUg
        cGFyZW50IG5vZGUKICAgIHNldCh2aWV3LCAnX3BhcmVudFZpZXcnLCBudWxs
        KTsKCiAgICAvLyByZW1vdmUgdmlldyBmcm9tIGNoaWxkVmlld3MgYXJyYXku
        CiAgICB2YXIgY2hpbGRWaWV3cyA9IHRoaXMuX2NoaWxkVmlld3M7CgogICAg
        RW1iZXIuRW51bWVyYWJsZVV0aWxzLnJlbW92ZU9iamVjdChjaGlsZFZpZXdz
        LCB2aWV3KTsKCiAgICB0aGlzLnByb3BlcnR5RGlkQ2hhbmdlKCdjaGlsZFZp
        ZXdzJyk7IC8vIEhVSD8hIHdoYXQgaGFwcGVuZWQgdG8gd2lsbCBjaGFuZ2U/
        CgogICAgcmV0dXJuIHRoaXM7CiAgfSwKCiAgLyoqCiAgICBSZW1vdmVzIGFs
        bCBjaGlsZHJlbiBmcm9tIHRoZSBgcGFyZW50Vmlld2AuCgogICAgQG1ldGhv
        ZCByZW1vdmVBbGxDaGlsZHJlbgogICAgQHJldHVybiB7RW1iZXIuVmlld30g
        cmVjZWl2ZXIKICAqLwogIHJlbW92ZUFsbENoaWxkcmVuOiBmdW5jdGlvbigp
        IHsKICAgIHJldHVybiB0aGlzLm11dGF0ZUNoaWxkVmlld3MoZnVuY3Rpb24o
        cGFyZW50VmlldywgdmlldykgewogICAgICBwYXJlbnRWaWV3LnJlbW92ZUNo
        aWxkKHZpZXcpOwogICAgfSk7CiAgfSwKCiAgZGVzdHJveUFsbENoaWxkcmVu
        OiBmdW5jdGlvbigpIHsKICAgIHJldHVybiB0aGlzLm11dGF0ZUNoaWxkVmll
        d3MoZnVuY3Rpb24ocGFyZW50VmlldywgdmlldykgewogICAgICB2aWV3LmRl
        c3Ryb3koKTsKICAgIH0pOwogIH0sCgogIC8qKgogICAgUmVtb3ZlcyB0aGUg
        dmlldyBmcm9tIGl0cyBgcGFyZW50Vmlld2AsIGlmIG9uZSBpcyBmb3VuZC4g
        T3RoZXJ3aXNlCiAgICBkb2VzIG5vdGhpbmcuCgogICAgQG1ldGhvZCByZW1v
        dmVGcm9tUGFyZW50CiAgICBAcmV0dXJuIHtFbWJlci5WaWV3fSByZWNlaXZl
        cgogICovCiAgcmVtb3ZlRnJvbVBhcmVudDogZnVuY3Rpb24oKSB7CiAgICB2
        YXIgcGFyZW50ID0gdGhpcy5fcGFyZW50VmlldzsKCiAgICAvLyBSZW1vdmUg
        RE9NIGVsZW1lbnQgZnJvbSBwYXJlbnQKICAgIHRoaXMucmVtb3ZlKCk7Cgog
        ICAgaWYgKHBhcmVudCkgeyBwYXJlbnQucmVtb3ZlQ2hpbGQodGhpcyk7IH0K
        ICAgIHJldHVybiB0aGlzOwogIH0sCgogIC8qKgogICAgWW91IG11c3QgY2Fs
        bCBgZGVzdHJveWAgb24gYSB2aWV3IHRvIGRlc3Ryb3kgdGhlIHZpZXcgKGFu
        ZCBhbGwgb2YgaXRzCiAgICBjaGlsZCB2aWV3cykuIFRoaXMgd2lsbCByZW1v
        dmUgdGhlIHZpZXcgZnJvbSBhbnkgcGFyZW50IG5vZGUsIHRoZW4gbWFrZQog
        ICAgc3VyZSB0aGF0IHRoZSBET00gZWxlbWVudCBtYW5hZ2VkIGJ5IHRoZSB2
        aWV3IGNhbiBiZSByZWxlYXNlZCBieSB0aGUKICAgIG1lbW9yeSBtYW5hZ2Vy
        LgoKICAgIEBtZXRob2QgZGVzdHJveQogICovCiAgZGVzdHJveTogZnVuY3Rp
        b24oKSB7CiAgICB2YXIgY2hpbGRWaWV3cyA9IHRoaXMuX2NoaWxkVmlld3Ms
        CiAgICAgICAgLy8gZ2V0IHBhcmVudFZpZXcgYmVmb3JlIGNhbGxpbmcgc3Vw
        ZXIgYmVjYXVzZSBpdCdsbCBiZSBkZXN0cm95ZWQKICAgICAgICBub25WaXJ0
        dWFsUGFyZW50VmlldyA9IGdldCh0aGlzLCAncGFyZW50VmlldycpLAogICAg
        ICAgIHZpZXdOYW1lID0gdGhpcy52aWV3TmFtZSwKICAgICAgICBjaGlsZExl
        biwgaTsKCiAgICBpZiAoIXRoaXMuX3N1cGVyKCkpIHsgcmV0dXJuOyB9Cgog
        ICAgY2hpbGRMZW4gPSBjaGlsZFZpZXdzLmxlbmd0aDsKICAgIGZvciAoaT1j
        aGlsZExlbi0xOyBpPj0wOyBpLS0pIHsKICAgICAgY2hpbGRWaWV3c1tpXS5y
        ZW1vdmVkRnJvbURPTSA9IHRydWU7CiAgICB9CgogICAgLy8gcmVtb3ZlIGZy
        b20gbm9uLXZpcnR1YWwgcGFyZW50IHZpZXcgaWYgdmlld05hbWUgd2FzIHNw
        ZWNpZmllZAogICAgaWYgKHZpZXdOYW1lICYmIG5vblZpcnR1YWxQYXJlbnRW
        aWV3KSB7CiAgICAgIG5vblZpcnR1YWxQYXJlbnRWaWV3LnNldCh2aWV3TmFt
        ZSwgbnVsbCk7CiAgICB9CgogICAgY2hpbGRMZW4gPSBjaGlsZFZpZXdzLmxl
        bmd0aDsKICAgIGZvciAoaT1jaGlsZExlbi0xOyBpPj0wOyBpLS0pIHsKICAg
        ICAgY2hpbGRWaWV3c1tpXS5kZXN0cm95KCk7CiAgICB9CgogICAgcmV0dXJu
        IHRoaXM7CiAgfSwKCiAgLyoqCiAgICBJbnN0YW50aWF0ZXMgYSB2aWV3IHRv
        IGJlIGFkZGVkIHRvIHRoZSBjaGlsZFZpZXdzIGFycmF5IGR1cmluZyB2aWV3
        CiAgICBpbml0aWFsaXphdGlvbi4gWW91IGdlbmVyYWxseSB3aWxsIG5vdCBj
        YWxsIHRoaXMgbWV0aG9kIGRpcmVjdGx5IHVubGVzcwogICAgeW91IGFyZSBv
        dmVycmlkaW5nIGBjcmVhdGVDaGlsZFZpZXdzKClgLiBOb3RlIHRoYXQgdGhp
        cyBtZXRob2Qgd2lsbAogICAgYXV0b21hdGljYWxseSBjb25maWd1cmUgdGhl
        IGNvcnJlY3Qgc2V0dGluZ3Mgb24gdGhlIG5ldyB2aWV3IGluc3RhbmNlIHRv
        CiAgICBhY3QgYXMgYSBjaGlsZCBvZiB0aGUgcGFyZW50LgoKICAgIEBtZXRo
        b2QgY3JlYXRlQ2hpbGRWaWV3CiAgICBAcGFyYW0ge0NsYXNzfFN0cmluZ30g
        dmlld0NsYXNzCiAgICBAcGFyYW0ge0hhc2h9IFthdHRyc10gQXR0cmlidXRl
        cyB0byBhZGQKICAgIEByZXR1cm4ge0VtYmVyLlZpZXd9IG5ldyBpbnN0YW5j
        ZQogICovCiAgY3JlYXRlQ2hpbGRWaWV3OiBmdW5jdGlvbih2aWV3LCBhdHRy
        cykgewogICAgaWYgKCF2aWV3KSB7CiAgICAgIHRocm93IG5ldyBUeXBlRXJy
        b3IoImNyZWF0ZUNoaWxkVmlld3MgZmlyc3QgYXJndW1lbnQgbXVzdCBleGlz
        dCIpOwogICAgfQoKICAgIGlmICh2aWV3LmlzVmlldyAmJiB2aWV3Ll9wYXJl
        bnRWaWV3ID09PSB0aGlzICYmIHZpZXcuY29udGFpbmVyID09PSB0aGlzLmNv
        bnRhaW5lcikgewogICAgICByZXR1cm4gdmlldzsKICAgIH0KCiAgICBhdHRy
        cyA9IGF0dHJzIHx8IHt9OwogICAgYXR0cnMuX3BhcmVudFZpZXcgPSB0aGlz
        OwoKICAgIGlmIChFbWJlci5Db3JlVmlldy5kZXRlY3QodmlldykpIHsKICAg
        ICAgYXR0cnMudGVtcGxhdGVEYXRhID0gYXR0cnMudGVtcGxhdGVEYXRhIHx8
        IGdldCh0aGlzLCAndGVtcGxhdGVEYXRhJyk7CgogICAgICBhdHRycy5jb250
        YWluZXIgPSB0aGlzLmNvbnRhaW5lcjsKICAgICAgdmlldyA9IHZpZXcuY3Jl
        YXRlKGF0dHJzKTsKCiAgICAgIC8vIGRvbid0IHNldCB0aGUgcHJvcGVydHkg
        b24gYSB2aXJ0dWFsIHZpZXcsIGFzIHRoZXkgYXJlIGludmlzaWJsZSB0bwog
        ICAgICAvLyBjb25zdW1lcnMgb2YgdGhlIHZpZXcgQVBJCiAgICAgIGlmICh2
        aWV3LnZpZXdOYW1lKSB7CiAgICAgICAgc2V0KGdldCh0aGlzLCAnY29uY3Jl
        dGVWaWV3JyksIHZpZXcudmlld05hbWUsIHZpZXcpOwogICAgICB9CiAgICB9
        IGVsc2UgaWYgKCdzdHJpbmcnID09PSB0eXBlb2YgdmlldykgewogICAgICB2
        YXIgZnVsbE5hbWUgPSAndmlldzonICsgdmlldzsKICAgICAgdmFyIFZpZXcg
        PSB0aGlzLmNvbnRhaW5lci5sb29rdXBGYWN0b3J5KGZ1bGxOYW1lKTsKCiAg
        ICAgIEVtYmVyLmFzc2VydCgiQ291bGQgbm90IGZpbmQgdmlldzogJyIgKyBm
        dWxsTmFtZSArICInIiwgISFWaWV3KTsKCiAgICAgIGF0dHJzLnRlbXBsYXRl
        RGF0YSA9IGdldCh0aGlzLCAndGVtcGxhdGVEYXRhJyk7CiAgICAgIHZpZXcg
        PSBWaWV3LmNyZWF0ZShhdHRycyk7CiAgICB9IGVsc2UgewogICAgICBFbWJl
        ci5hc3NlcnQoJ1lvdSBtdXN0IHBhc3MgaW5zdGFuY2Ugb3Igc3ViY2xhc3Mg
        b2YgVmlldycsIHZpZXcuaXNWaWV3KTsKICAgICAgYXR0cnMuY29udGFpbmVy
        ID0gdGhpcy5jb250YWluZXI7CgogICAgICBpZiAoIWdldCh2aWV3LCAndGVt
        cGxhdGVEYXRhJykpIHsKICAgICAgICBhdHRycy50ZW1wbGF0ZURhdGEgPSBn
        ZXQodGhpcywgJ3RlbXBsYXRlRGF0YScpOwogICAgICB9CgogICAgICBFbWJl
        ci5zZXRQcm9wZXJ0aWVzKHZpZXcsIGF0dHJzKTsKCiAgICB9CgogICAgcmV0
        dXJuIHZpZXc7CiAgfSwKCiAgYmVjYW1lVmlzaWJsZTogRW1iZXIuSywKICBi
        ZWNhbWVIaWRkZW46IEVtYmVyLkssCgogIC8qKgogICAgQHByaXZhdGUKCiAg
        ICBXaGVuIHRoZSB2aWV3J3MgYGlzVmlzaWJsZWAgcHJvcGVydHkgY2hhbmdl
        cywgdG9nZ2xlIHRoZSB2aXNpYmlsaXR5CiAgICBlbGVtZW50IG9mIHRoZSBh
        Y3R1YWwgRE9NIGVsZW1lbnQuCgogICAgQG1ldGhvZCBfaXNWaXNpYmxlRGlk
        Q2hhbmdlCiAgKi8KICBfaXNWaXNpYmxlRGlkQ2hhbmdlOiBFbWJlci5vYnNl
        cnZlcignaXNWaXNpYmxlJywgZnVuY3Rpb24oKSB7CiAgICB2YXIgJGVsID0g
        dGhpcy4kKCk7CiAgICBpZiAoISRlbCkgeyByZXR1cm47IH0KCiAgICB2YXIg
        aXNWaXNpYmxlID0gZ2V0KHRoaXMsICdpc1Zpc2libGUnKTsKCiAgICAkZWwu
        dG9nZ2xlKGlzVmlzaWJsZSk7CgogICAgaWYgKHRoaXMuX2lzQW5jZXN0b3JI
        aWRkZW4oKSkgeyByZXR1cm47IH0KCiAgICBpZiAoaXNWaXNpYmxlKSB7CiAg
        ICAgIHRoaXMuX25vdGlmeUJlY2FtZVZpc2libGUoKTsKICAgIH0gZWxzZSB7
        CiAgICAgIHRoaXMuX25vdGlmeUJlY2FtZUhpZGRlbigpOwogICAgfQogIH0p
        LAoKICBfbm90aWZ5QmVjYW1lVmlzaWJsZTogZnVuY3Rpb24oKSB7CiAgICB0
        aGlzLnRyaWdnZXIoJ2JlY2FtZVZpc2libGUnKTsKCiAgICB0aGlzLmZvckVh
        Y2hDaGlsZFZpZXcoZnVuY3Rpb24odmlldykgewogICAgICB2YXIgaXNWaXNp
        YmxlID0gZ2V0KHZpZXcsICdpc1Zpc2libGUnKTsKCiAgICAgIGlmIChpc1Zp
        c2libGUgfHwgaXNWaXNpYmxlID09PSBudWxsKSB7CiAgICAgICAgdmlldy5f
        bm90aWZ5QmVjYW1lVmlzaWJsZSgpOwogICAgICB9CiAgICB9KTsKICB9LAoK
        ICBfbm90aWZ5QmVjYW1lSGlkZGVuOiBmdW5jdGlvbigpIHsKICAgIHRoaXMu
        dHJpZ2dlcignYmVjYW1lSGlkZGVuJyk7CiAgICB0aGlzLmZvckVhY2hDaGls
        ZFZpZXcoZnVuY3Rpb24odmlldykgewogICAgICB2YXIgaXNWaXNpYmxlID0g
        Z2V0KHZpZXcsICdpc1Zpc2libGUnKTsKCiAgICAgIGlmIChpc1Zpc2libGUg
        fHwgaXNWaXNpYmxlID09PSBudWxsKSB7CiAgICAgICAgdmlldy5fbm90aWZ5
        QmVjYW1lSGlkZGVuKCk7CiAgICAgIH0KICAgIH0pOwogIH0sCgogIF9pc0Fu
        Y2VzdG9ySGlkZGVuOiBmdW5jdGlvbigpIHsKICAgIHZhciBwYXJlbnQgPSBn
        ZXQodGhpcywgJ3BhcmVudFZpZXcnKTsKCiAgICB3aGlsZSAocGFyZW50KSB7
        CiAgICAgIGlmIChnZXQocGFyZW50LCAnaXNWaXNpYmxlJykgPT09IGZhbHNl
        KSB7IHJldHVybiB0cnVlOyB9CgogICAgICBwYXJlbnQgPSBnZXQocGFyZW50
        LCAncGFyZW50VmlldycpOwogICAgfQoKICAgIHJldHVybiBmYWxzZTsKICB9
        LAoKICBjbGVhckJ1ZmZlcjogZnVuY3Rpb24oKSB7CiAgICB0aGlzLmludm9r
        ZVJlY3Vyc2l2ZWx5KGZ1bmN0aW9uKHZpZXcpIHsKICAgICAgdmlldy5idWZm
        ZXIgPSBudWxsOwogICAgfSk7CiAgfSwKCiAgdHJhbnNpdGlvblRvOiBmdW5j
        dGlvbihzdGF0ZSwgY2hpbGRyZW4pIHsKICAgIHZhciBwcmlvclN0YXRlID0g
        dGhpcy5jdXJyZW50U3RhdGUsCiAgICAgICAgY3VycmVudFN0YXRlID0gdGhp
        cy5jdXJyZW50U3RhdGUgPSB0aGlzLnN0YXRlc1tzdGF0ZV07CiAgICB0aGlz
        LnN0YXRlID0gc3RhdGU7CgogICAgaWYgKHByaW9yU3RhdGUgJiYgcHJpb3JT
        dGF0ZS5leGl0KSB7IHByaW9yU3RhdGUuZXhpdCh0aGlzKTsgfQogICAgaWYg
        KGN1cnJlbnRTdGF0ZS5lbnRlcikgeyBjdXJyZW50U3RhdGUuZW50ZXIodGhp
        cyk7IH0KICAgIGlmIChzdGF0ZSA9PT0gJ2luRE9NJykgeyBkZWxldGUgRW1i
        ZXIubWV0YSh0aGlzKS5jYWNoZS5lbGVtZW50OyB9CgogICAgaWYgKGNoaWxk
        cmVuICE9PSBmYWxzZSkgewogICAgICB0aGlzLmZvckVhY2hDaGlsZFZpZXco
        ZnVuY3Rpb24odmlldykgewogICAgICAgIHZpZXcudHJhbnNpdGlvblRvKHN0
        YXRlKTsKICAgICAgfSk7CiAgICB9CiAgfSwKCiAgLy8gLi4uLi4uLi4uLi4u
        Li4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLgog
        IC8vIEVWRU5UIEhBTkRMSU5HCiAgLy8KCiAgLyoqCiAgICBAcHJpdmF0ZQoK
        ICAgIEhhbmRsZSBldmVudHMgZnJvbSBgRW1iZXIuRXZlbnREaXNwYXRjaGVy
        YAoKICAgIEBtZXRob2QgaGFuZGxlRXZlbnQKICAgIEBwYXJhbSBldmVudE5h
        bWUge1N0cmluZ30KICAgIEBwYXJhbSBldnQge0V2ZW50fQogICovCiAgaGFu
        ZGxlRXZlbnQ6IGZ1bmN0aW9uKGV2ZW50TmFtZSwgZXZ0KSB7CiAgICByZXR1
        cm4gdGhpcy5jdXJyZW50U3RhdGUuaGFuZGxlRXZlbnQodGhpcywgZXZlbnRO
        YW1lLCBldnQpOwogIH0sCgogIHJlZ2lzdGVyT2JzZXJ2ZXI6IGZ1bmN0aW9u
        KHJvb3QsIHBhdGgsIHRhcmdldCwgb2JzZXJ2ZXIpIHsKICAgIGlmICghb2Jz
        ZXJ2ZXIgJiYgJ2Z1bmN0aW9uJyA9PT0gdHlwZW9mIHRhcmdldCkgewogICAg
        ICBvYnNlcnZlciA9IHRhcmdldDsKICAgICAgdGFyZ2V0ID0gbnVsbDsKICAg
        IH0KCiAgICBpZiAoIXJvb3QgfHwgdHlwZW9mIHJvb3QgIT09ICdvYmplY3Qn
        KSB7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICB2YXIgdmlldyA9IHRoaXMs
        CiAgICAgICAgc3RhdGVDaGVja2VkT2JzZXJ2ZXIgPSBmdW5jdGlvbigpIHsK
        ICAgICAgICAgIHZpZXcuY3VycmVudFN0YXRlLmludm9rZU9ic2VydmVyKHRo
        aXMsIG9ic2VydmVyKTsKICAgICAgICB9LAogICAgICAgIHNjaGVkdWxlZE9i
        c2VydmVyID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICBFbWJlci5ydW4uc2No
        ZWR1bGVPbmNlKCdyZW5kZXInLCB0aGlzLCBzdGF0ZUNoZWNrZWRPYnNlcnZl
        cik7CiAgICAgICAgfTsKCiAgICBFbWJlci5hZGRPYnNlcnZlcihyb290LCBw
        YXRoLCB0YXJnZXQsIHNjaGVkdWxlZE9ic2VydmVyKTsKCiAgICB0aGlzLm9u
        ZSgnd2lsbENsZWFyUmVuZGVyJywgZnVuY3Rpb24oKSB7CiAgICAgIEVtYmVy
        LnJlbW92ZU9ic2VydmVyKHJvb3QsIHBhdGgsIHRhcmdldCwgc2NoZWR1bGVk
        T2JzZXJ2ZXIpOwogICAgfSk7CiAgfQoKfSk7CgovKgogIERlc2NyaWJlIGhv
        dyB0aGUgc3BlY2lmaWVkIGFjdGlvbnMgc2hvdWxkIGJlaGF2ZSBpbiB0aGUg
        dmFyaW91cwogIHN0YXRlcyB0aGF0IGEgdmlldyBjYW4gZXhpc3QgaW4uIFBv
        c3NpYmxlIHN0YXRlczoKCiAgKiBwcmVSZW5kZXI6IHdoZW4gYSB2aWV3IGlz
        IGZpcnN0IGluc3RhbnRpYXRlZCwgYW5kIGFmdGVyIGl0cwogICAgZWxlbWVu
        dCB3YXMgZGVzdHJveWVkLCBpdCBpcyBpbiB0aGUgcHJlUmVuZGVyIHN0YXRl
        CiAgKiBpbkJ1ZmZlcjogb25jZSBhIHZpZXcgaGFzIGJlZW4gcmVuZGVyZWQs
        IGJ1dCBiZWZvcmUgaXQgaGFzCiAgICBiZWVuIGluc2VydGVkIGludG8gdGhl
        IERPTSwgaXQgaXMgaW4gdGhlIGluQnVmZmVyIHN0YXRlCiAgKiBpbkRPTTog
        b25jZSBhIHZpZXcgaGFzIGJlZW4gaW5zZXJ0ZWQgaW50byB0aGUgRE9NIGl0
        IGlzIGluCiAgICB0aGUgaW5ET00gc3RhdGUuIEEgdmlldyBzcGVuZHMgdGhl
        IHZhc3QgbWFqb3JpdHkgb2YgaXRzCiAgICBleGlzdGVuY2UgaW4gdGhpcyBz
        dGF0ZS4KICAqIGRlc3Ryb3llZDogb25jZSBhIHZpZXcgaGFzIGJlZW4gZGVz
        dHJveWVkICh1c2luZyB0aGUgZGVzdHJveQogICAgbWV0aG9kKSwgaXQgaXMg
        aW4gdGhpcyBzdGF0ZS4gTm8gZnVydGhlciBhY3Rpb25zIGNhbiBiZSBpbnZv
        a2VkCiAgICBvbiBhIGRlc3Ryb3llZCB2aWV3LgoqLwoKICAvLyBpbiB0aGUg
        ZGVzdHJveWVkIHN0YXRlLCBldmVyeXRoaW5nIGlzIGlsbGVnYWwKCiAgLy8g
        YmVmb3JlIHJlbmRlcmluZyBoYXMgYmVndW4sIGFsbCBsZWdhbCBtYW5pcHVs
        YXRpb25zIGFyZSBub29wcy4KCiAgLy8gaW5zaWRlIHRoZSBidWZmZXIsIGxl
        Z2FsIG1hbmlwdWxhdGlvbnMgYXJlIGRvbmUgb24gdGhlIGJ1ZmZlcgoKICAv
        LyBvbmNlIHRoZSB2aWV3IGhhcyBiZWVuIGluc2VydGVkIGludG8gdGhlIERP
        TSwgbGVnYWwgbWFuaXB1bGF0aW9ucwogIC8vIGFyZSBkb25lIG9uIHRoZSBE
        T00gZWxlbWVudC4KCmZ1bmN0aW9uIG5vdGlmeU11dGF0aW9uTGlzdGVuZXJz
        KCkgewogIEVtYmVyLnJ1bi5vbmNlKEVtYmVyLlZpZXcsICdub3RpZnlNdXRh
        dGlvbkxpc3RlbmVycycpOwp9Cgp2YXIgRE9NTWFuYWdlciA9IHsKICBwcmVw
        ZW5kOiBmdW5jdGlvbih2aWV3LCBodG1sKSB7CiAgICB2aWV3LiQoKS5wcmVw
        ZW5kKGh0bWwpOwogICAgbm90aWZ5TXV0YXRpb25MaXN0ZW5lcnMoKTsKICB9
        LAoKICBhZnRlcjogZnVuY3Rpb24odmlldywgaHRtbCkgewogICAgdmlldy4k
        KCkuYWZ0ZXIoaHRtbCk7CiAgICBub3RpZnlNdXRhdGlvbkxpc3RlbmVycygp
        OwogIH0sCgogIGh0bWw6IGZ1bmN0aW9uKHZpZXcsIGh0bWwpIHsKICAgIHZp
        ZXcuJCgpLmh0bWwoaHRtbCk7CiAgICBub3RpZnlNdXRhdGlvbkxpc3RlbmVy
        cygpOwogIH0sCgogIHJlcGxhY2U6IGZ1bmN0aW9uKHZpZXcpIHsKICAgIHZh
        ciBlbGVtZW50ID0gZ2V0KHZpZXcsICdlbGVtZW50Jyk7CgogICAgc2V0KHZp
        ZXcsICdlbGVtZW50JywgbnVsbCk7CgogICAgdmlldy5faW5zZXJ0RWxlbWVu
        dExhdGVyKGZ1bmN0aW9uKCkgewogICAgICBFbWJlci4kKGVsZW1lbnQpLnJl
        cGxhY2VXaXRoKGdldCh2aWV3LCAnZWxlbWVudCcpKTsKICAgICAgbm90aWZ5
        TXV0YXRpb25MaXN0ZW5lcnMoKTsKICAgIH0pOwogIH0sCgogIHJlbW92ZTog
        ZnVuY3Rpb24odmlldykgewogICAgdmlldy4kKCkucmVtb3ZlKCk7CiAgICBu
        b3RpZnlNdXRhdGlvbkxpc3RlbmVycygpOwogIH0sCgogIGVtcHR5OiBmdW5j
        dGlvbih2aWV3KSB7CiAgICB2aWV3LiQoKS5lbXB0eSgpOwogICAgbm90aWZ5
        TXV0YXRpb25MaXN0ZW5lcnMoKTsKICB9Cn07CgpFbWJlci5WaWV3LnJlb3Bl
        bih7CiAgZG9tTWFuYWdlcjogRE9NTWFuYWdlcgp9KTsKCkVtYmVyLlZpZXcu
        cmVvcGVuQ2xhc3MoewoKICAvKioKICAgIEBwcml2YXRlCgogICAgUGFyc2Ug
        YSBwYXRoIGFuZCByZXR1cm4gYW4gb2JqZWN0IHdoaWNoIGhvbGRzIHRoZSBw
        YXJzZWQgcHJvcGVydGllcy4KCiAgICBGb3IgZXhhbXBsZSBhIHBhdGggbGlr
        ZSAiY29udGVudC5pc0VuYWJsZWQ6ZW5hYmxlZDpkaXNhYmxlZCIgd2lsbCBy
        ZXR1cm4gdGhlCiAgICBmb2xsb3dpbmcgb2JqZWN0OgoKICAgIGBgYGphdmFz
        Y3JpcHQKICAgIHsKICAgICAgcGF0aDogImNvbnRlbnQuaXNFbmFibGVkIiwK
        ICAgICAgY2xhc3NOYW1lOiAiZW5hYmxlZCIsCiAgICAgIGZhbHN5Q2xhc3NO
        YW1lOiAiZGlzYWJsZWQiLAogICAgICBjbGFzc05hbWVzOiAiOmVuYWJsZWQ6
        ZGlzYWJsZWQiCiAgICB9CiAgICBgYGAKCiAgICBAbWV0aG9kIF9wYXJzZVBy
        b3BlcnR5UGF0aAogICAgQHN0YXRpYwogICovCiAgX3BhcnNlUHJvcGVydHlQ
        YXRoOiBmdW5jdGlvbihwYXRoKSB7CiAgICB2YXIgc3BsaXQgPSBwYXRoLnNw
        bGl0KCc6JyksCiAgICAgICAgcHJvcGVydHlQYXRoID0gc3BsaXRbMF0sCiAg
        ICAgICAgY2xhc3NOYW1lcyA9ICIiLAogICAgICAgIGNsYXNzTmFtZSwKICAg
        ICAgICBmYWxzeUNsYXNzTmFtZTsKCiAgICAvLyBjaGVjayBpZiB0aGUgcHJv
        cGVydHkgaXMgZGVmaW5lZCBhcyBwcm9wOmNsYXNzIG9yIHByb3A6dHJ1ZUNs
        YXNzOmZhbHNlQ2xhc3MKICAgIGlmIChzcGxpdC5sZW5ndGggPiAxKSB7CiAg
        ICAgIGNsYXNzTmFtZSA9IHNwbGl0WzFdOwogICAgICBpZiAoc3BsaXQubGVu
        Z3RoID09PSAzKSB7IGZhbHN5Q2xhc3NOYW1lID0gc3BsaXRbMl07IH0KCiAg
        ICAgIGNsYXNzTmFtZXMgPSAnOicgKyBjbGFzc05hbWU7CiAgICAgIGlmIChm
        YWxzeUNsYXNzTmFtZSkgeyBjbGFzc05hbWVzICs9ICI6IiArIGZhbHN5Q2xh
        c3NOYW1lOyB9CiAgICB9CgogICAgcmV0dXJuIHsKICAgICAgcGF0aDogcHJv
        cGVydHlQYXRoLAogICAgICBjbGFzc05hbWVzOiBjbGFzc05hbWVzLAogICAg
        ICBjbGFzc05hbWU6IChjbGFzc05hbWUgPT09ICcnKSA/IHVuZGVmaW5lZCA6
        IGNsYXNzTmFtZSwKICAgICAgZmFsc3lDbGFzc05hbWU6IGZhbHN5Q2xhc3NO
        YW1lCiAgICB9OwogIH0sCgogIC8qKgogICAgQHByaXZhdGUKCiAgICBHZXQg
        dGhlIGNsYXNzIG5hbWUgZm9yIGEgZ2l2ZW4gdmFsdWUsIGJhc2VkIG9uIHRo
        ZSBwYXRoLCBvcHRpb25hbAogICAgYGNsYXNzTmFtZWAgYW5kIG9wdGlvbmFs
        IGBmYWxzeUNsYXNzTmFtZWAuCgogICAgLSBpZiBhIGBjbGFzc05hbWVgIG9y
        IGBmYWxzeUNsYXNzTmFtZWAgaGFzIGJlZW4gc3BlY2lmaWVkOgogICAgICAt
        IGlmIHRoZSB2YWx1ZSBpcyB0cnV0aHkgYW5kIGBjbGFzc05hbWVgIGhhcyBi
        ZWVuIHNwZWNpZmllZCwKICAgICAgICBgY2xhc3NOYW1lYCBpcyByZXR1cm5l
        ZAogICAgICAtIGlmIHRoZSB2YWx1ZSBpcyBmYWxzeSBhbmQgYGZhbHN5Q2xh
        c3NOYW1lYCBoYXMgYmVlbiBzcGVjaWZpZWQsCiAgICAgICAgYGZhbHN5Q2xh
        c3NOYW1lYCBpcyByZXR1cm5lZAogICAgICAtIG90aGVyd2lzZSBgbnVsbGAg
        aXMgcmV0dXJuZWQKICAgIC0gaWYgdGhlIHZhbHVlIGlzIGB0cnVlYCwgdGhl
        IGRhc2hlcml6ZWQgbGFzdCBwYXJ0IG9mIHRoZSBzdXBwbGllZCBwYXRoCiAg
        ICAgIGlzIHJldHVybmVkCiAgICAtIGlmIHRoZSB2YWx1ZSBpcyBub3QgYGZh
        bHNlYCwgYHVuZGVmaW5lZGAgb3IgYG51bGxgLCB0aGUgYHZhbHVlYAogICAg
        ICBpcyByZXR1cm5lZAogICAgLSBpZiBub25lIG9mIHRoZSBhYm92ZSBydWxl
        cyBhcHBseSwgYG51bGxgIGlzIHJldHVybmVkCgogICAgQG1ldGhvZCBfY2xh
        c3NTdHJpbmdGb3JWYWx1ZQogICAgQHBhcmFtIHBhdGgKICAgIEBwYXJhbSB2
        YWwKICAgIEBwYXJhbSBjbGFzc05hbWUKICAgIEBwYXJhbSBmYWxzeUNsYXNz
        TmFtZQogICAgQHN0YXRpYwogICovCiAgX2NsYXNzU3RyaW5nRm9yVmFsdWU6
        IGZ1bmN0aW9uKHBhdGgsIHZhbCwgY2xhc3NOYW1lLCBmYWxzeUNsYXNzTmFt
        ZSkgewogICAgLy8gV2hlbiB1c2luZyB0aGUgY29sb24gc3ludGF4LCBldmFs
        dWF0ZSB0aGUgdHJ1dGhpbmVzcyBvciBmYWxzaW5lc3MKICAgIC8vIG9mIHRo
        ZSB2YWx1ZSB0byBkZXRlcm1pbmUgd2hpY2ggY2xhc3NOYW1lIHRvIHJldHVy
        bgogICAgaWYgKGNsYXNzTmFtZSB8fCBmYWxzeUNsYXNzTmFtZSkgewogICAg
        ICBpZiAoY2xhc3NOYW1lICYmICEhdmFsKSB7CiAgICAgICAgcmV0dXJuIGNs
        YXNzTmFtZTsKCiAgICAgIH0gZWxzZSBpZiAoZmFsc3lDbGFzc05hbWUgJiYg
        IXZhbCkgewogICAgICAgIHJldHVybiBmYWxzeUNsYXNzTmFtZTsKCiAgICAg
        IH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgIH0KCiAgICAv
        LyBJZiB2YWx1ZSBpcyBhIEJvb2xlYW4gYW5kIHRydWUsIHJldHVybiB0aGUg
        ZGFzaGVyaXplZCBwcm9wZXJ0eQogICAgLy8gbmFtZS4KICAgIH0gZWxzZSBp
        ZiAodmFsID09PSB0cnVlKSB7CiAgICAgIC8vIE5vcm1hbGl6ZSBwcm9wZXJ0
        eSBwYXRoIHRvIGJlIHN1aXRhYmxlIGZvciB1c2UKICAgICAgLy8gYXMgYSBj
        bGFzcyBuYW1lLiBGb3IgZXhhcGxlLCBjb250ZW50LmZvby5iYXJCYXoKICAg
        ICAgLy8gYmVjb21lcyBiYXItYmF6LgogICAgICB2YXIgcGFydHMgPSBwYXRo
        LnNwbGl0KCcuJyk7CiAgICAgIHJldHVybiBFbWJlci5TdHJpbmcuZGFzaGVy
        aXplKHBhcnRzW3BhcnRzLmxlbmd0aC0xXSk7CgogICAgLy8gSWYgdGhlIHZh
        bHVlIGlzIG5vdCBmYWxzZSwgdW5kZWZpbmVkLCBvciBudWxsLCByZXR1cm4g
        dGhlIGN1cnJlbnQKICAgIC8vIHZhbHVlIG9mIHRoZSBwcm9wZXJ0eS4KICAg
        IH0gZWxzZSBpZiAodmFsICE9PSBmYWxzZSAmJiB2YWwgIT0gbnVsbCkgewog
        ICAgICByZXR1cm4gdmFsOwoKICAgIC8vIE5vdGhpbmcgdG8gZGlzcGxheS4g
        UmV0dXJuIG51bGwgc28gdGhhdCB0aGUgb2xkIGNsYXNzIGlzIHJlbW92ZWQK
        ICAgIC8vIGJ1dCBubyBuZXcgY2xhc3MgaXMgYWRkZWQuCiAgICB9IGVsc2Ug
        ewogICAgICByZXR1cm4gbnVsbDsKICAgIH0KICB9Cn0pOwoKdmFyIG11dGF0
        aW9uID0gRW1iZXIuT2JqZWN0LmV4dGVuZChFbWJlci5FdmVudGVkKS5jcmVh
        dGUoKTsKCkVtYmVyLlZpZXcuYWRkTXV0YXRpb25MaXN0ZW5lciA9IGZ1bmN0
        aW9uKGNhbGxiYWNrKSB7CiAgbXV0YXRpb24ub24oJ2NoYW5nZScsIGNhbGxi
        YWNrKTsKfTsKCkVtYmVyLlZpZXcucmVtb3ZlTXV0YXRpb25MaXN0ZW5lciA9
        IGZ1bmN0aW9uKGNhbGxiYWNrKSB7CiAgbXV0YXRpb24ub2ZmKCdjaGFuZ2Un
        LCBjYWxsYmFjayk7Cn07CgpFbWJlci5WaWV3Lm5vdGlmeU11dGF0aW9uTGlz
        dGVuZXJzID0gZnVuY3Rpb24oKSB7CiAgbXV0YXRpb24udHJpZ2dlcignY2hh
        bmdlJyk7Cn07CgovKioKICBHbG9iYWwgdmlld3MgaGFzaAoKICBAcHJvcGVy
        dHkgdmlld3MKICBAc3RhdGljCiAgQHR5cGUgSGFzaAoqLwpFbWJlci5WaWV3
        LnZpZXdzID0ge307CgovLyBJZiBzb21lb25lIG92ZXJyaWRlcyB0aGUgY2hp
        bGQgdmlld3MgY29tcHV0ZWQgcHJvcGVydHkgd2hlbgovLyBkZWZpbmluZyB0
        aGVpciBjbGFzcywgd2Ugd2FudCB0byBiZSBhYmxlIHRvIHByb2Nlc3MgdGhl
        IHVzZXIncwovLyBzdXBwbGllZCBjaGlsZFZpZXdzIGFuZCB0aGVuIHJlc3Rv
        cmUgdGhlIG9yaWdpbmFsIGNvbXB1dGVkIHByb3BlcnR5Ci8vIGF0IHZpZXcg
        aW5pdGlhbGl6YXRpb24gdGltZS4gVGhpcyBoYXBwZW5zIGluIEVtYmVyLkNv
        bnRhaW5lclZpZXcncyBpbml0Ci8vIG1ldGhvZC4KRW1iZXIuVmlldy5jaGls
        ZFZpZXdzUHJvcGVydHkgPSBjaGlsZFZpZXdzUHJvcGVydHk7CgpFbWJlci5W
        aWV3LmFwcGx5QXR0cmlidXRlQmluZGluZ3MgPSBmdW5jdGlvbihlbGVtLCBu
        YW1lLCB2YWx1ZSkgewogIHZhciB0eXBlID0gRW1iZXIudHlwZU9mKHZhbHVl
        KTsKCiAgLy8gaWYgdGhpcyBjaGFuZ2VzLCBhbHNvIGNoYW5nZSB0aGUgbG9n
        aWMgaW4gZW1iZXItaGFuZGxlYmFycy9saWIvaGVscGVycy9iaW5kaW5nLmpz
        CiAgaWYgKG5hbWUgIT09ICd2YWx1ZScgJiYgKHR5cGUgPT09ICdzdHJpbmcn
        IHx8ICh0eXBlID09PSAnbnVtYmVyJyAmJiAhaXNOYU4odmFsdWUpKSkpIHsK
        ICAgIGlmICh2YWx1ZSAhPT0gZWxlbS5hdHRyKG5hbWUpKSB7CiAgICAgIGVs
        ZW0uYXR0cihuYW1lLCB2YWx1ZSk7CiAgICB9CiAgfSBlbHNlIGlmIChuYW1l
        ID09PSAndmFsdWUnIHx8IHR5cGUgPT09ICdib29sZWFuJykgewogICAgLy8g
        V2UgY2FuJ3Qgc2V0IHByb3BlcnRpZXMgdG8gdW5kZWZpbmVkIG9yIG51bGwK
        ICAgIGlmIChFbWJlci5pc05vbmUodmFsdWUpKSB7IHZhbHVlID0gJyc7IH0K
        CiAgICBpZiAodmFsdWUgIT09IGVsZW0ucHJvcChuYW1lKSkgewogICAgICAv
        LyB2YWx1ZSBhbmQgYm9vbGVhbnMgc2hvdWxkIGFsd2F5cyBiZSBwcm9wZXJ0
        aWVzCiAgICAgIGVsZW0ucHJvcChuYW1lLCB2YWx1ZSk7CiAgICB9CiAgfSBl
        bHNlIGlmICghdmFsdWUpIHsKICAgIGVsZW0ucmVtb3ZlQXR0cihuYW1lKTsK
        ICB9Cn07CgpFbWJlci5WaWV3LnN0YXRlcyA9IHN0YXRlczsKCn0pKCk7CgoK
        CihmdW5jdGlvbigpIHsKLyoqCkBtb2R1bGUgZW1iZXIKQHN1Ym1vZHVsZSBl
        bWJlci12aWV3cwoqLwoKdmFyIGdldCA9IEVtYmVyLmdldCwgc2V0ID0gRW1i
        ZXIuc2V0OwoKRW1iZXIuVmlldy5zdGF0ZXMuX2RlZmF1bHQgPSB7CiAgLy8g
        YXBwZW5kQ2hpbGQgaXMgb25seSBsZWdhbCB3aGlsZSByZW5kZXJpbmcgdGhl
        IGJ1ZmZlci4KICBhcHBlbmRDaGlsZDogZnVuY3Rpb24oKSB7CiAgICB0aHJv
        dyAiWW91IGNhbid0IHVzZSBhcHBlbmRDaGlsZCBvdXRzaWRlIG9mIHRoZSBy
        ZW5kZXJpbmcgcHJvY2VzcyI7CiAgfSwKCiAgJDogZnVuY3Rpb24oKSB7CiAg
        ICByZXR1cm4gdW5kZWZpbmVkOwogIH0sCgogIGdldEVsZW1lbnQ6IGZ1bmN0
        aW9uKCkgewogICAgcmV0dXJuIG51bGw7CiAgfSwKCiAgLy8gSGFuZGxlIGV2
        ZW50cyBmcm9tIGBFbWJlci5FdmVudERpc3BhdGNoZXJgCiAgaGFuZGxlRXZl
        bnQ6IGZ1bmN0aW9uKCkgewogICAgcmV0dXJuIHRydWU7IC8vIGNvbnRpbnVl
        IGV2ZW50IHByb3BhZ2F0aW9uCiAgfSwKCiAgZGVzdHJveUVsZW1lbnQ6IGZ1
        bmN0aW9uKHZpZXcpIHsKICAgIHNldCh2aWV3LCAnZWxlbWVudCcsIG51bGwp
        OwogICAgaWYgKHZpZXcuX3NjaGVkdWxlZEluc2VydCkgewogICAgICBFbWJl
        ci5ydW4uY2FuY2VsKHZpZXcuX3NjaGVkdWxlZEluc2VydCk7CiAgICAgIHZp
        ZXcuX3NjaGVkdWxlZEluc2VydCA9IG51bGw7CiAgICB9CiAgICByZXR1cm4g
        dmlldzsKICB9LAoKICByZW5kZXJUb0J1ZmZlcklmTmVlZGVkOiBmdW5jdGlv
        biAoKSB7CiAgICByZXR1cm4gZmFsc2U7CiAgfSwKCiAgcmVyZW5kZXI6IEVt
        YmVyLkssCiAgaW52b2tlT2JzZXJ2ZXI6IEVtYmVyLksKfTsKCn0pKCk7CgoK
        CihmdW5jdGlvbigpIHsKLyoqCkBtb2R1bGUgZW1iZXIKQHN1Ym1vZHVsZSBl
        bWJlci12aWV3cwoqLwoKdmFyIHByZVJlbmRlciA9IEVtYmVyLlZpZXcuc3Rh
        dGVzLnByZVJlbmRlciA9IEVtYmVyLmNyZWF0ZShFbWJlci5WaWV3LnN0YXRl
        cy5fZGVmYXVsdCk7CgpFbWJlci5tZXJnZShwcmVSZW5kZXIsIHsKICAvLyBh
        IHZpZXcgbGVhdmVzIHRoZSBwcmVSZW5kZXIgc3RhdGUgb25jZSBpdHMgZWxl
        bWVudCBoYXMgYmVlbgogIC8vIGNyZWF0ZWQgKGNyZWF0ZUVsZW1lbnQpLgog
        IGluc2VydEVsZW1lbnQ6IGZ1bmN0aW9uKHZpZXcsIGZuKSB7CiAgICB2aWV3
        LmNyZWF0ZUVsZW1lbnQoKTsKICAgIHZhciB2aWV3Q29sbGVjdGlvbiA9IHZp
        ZXcudmlld0hpZXJhcmNoeUNvbGxlY3Rpb24oKTsKCiAgICB2aWV3Q29sbGVj
        dGlvbi50cmlnZ2VyKCd3aWxsSW5zZXJ0RWxlbWVudCcpOwoKICAgIGZuLmNh
        bGwodmlldyk7CgogICAgLy8gV2UgdHJhbnNpdGlvbiB0byBgaW5ET01gIGlm
        IHRoZSBlbGVtZW50IGV4aXN0cyBpbiB0aGUgRE9NCiAgICB2YXIgZWxlbWVu
        dCA9IHZpZXcuZ2V0KCdlbGVtZW50Jyk7CiAgICB3aGlsZSAoZWxlbWVudCA9
        IGVsZW1lbnQucGFyZW50Tm9kZSkgewogICAgICBpZiAoZWxlbWVudCA9PT0g
        ZG9jdW1lbnQpIHsKICAgICAgICB2aWV3Q29sbGVjdGlvbi50cmFuc2l0aW9u
        VG8oJ2luRE9NJywgZmFsc2UpOwogICAgICAgIHZpZXdDb2xsZWN0aW9uLnRy
        aWdnZXIoJ2RpZEluc2VydEVsZW1lbnQnKTsKICAgICAgfQogICAgfQoKICB9
        LAoKICByZW5kZXJUb0J1ZmZlcklmTmVlZGVkOiBmdW5jdGlvbih2aWV3LCBi
        dWZmZXIpIHsKICAgIHZpZXcucmVuZGVyVG9CdWZmZXIoYnVmZmVyKTsKICAg
        IHJldHVybiB0cnVlOwogIH0sCgogIGVtcHR5OiBFbWJlci5LLAoKICBzZXRF
        bGVtZW50OiBmdW5jdGlvbih2aWV3LCB2YWx1ZSkgewogICAgaWYgKHZhbHVl
        ICE9PSBudWxsKSB7CiAgICAgIHZpZXcudHJhbnNpdGlvblRvKCdoYXNFbGVt
        ZW50Jyk7CiAgICB9CiAgICByZXR1cm4gdmFsdWU7CiAgfQp9KTsKCn0pKCk7
        CgoKCihmdW5jdGlvbigpIHsKLyoqCkBtb2R1bGUgZW1iZXIKQHN1Ym1vZHVs
        ZSBlbWJlci12aWV3cwoqLwoKdmFyIGdldCA9IEVtYmVyLmdldCwgc2V0ID0g
        RW1iZXIuc2V0OwoKdmFyIGluQnVmZmVyID0gRW1iZXIuVmlldy5zdGF0ZXMu
        aW5CdWZmZXIgPSBFbWJlci5jcmVhdGUoRW1iZXIuVmlldy5zdGF0ZXMuX2Rl
        ZmF1bHQpOwoKRW1iZXIubWVyZ2UoaW5CdWZmZXIsIHsKICAkOiBmdW5jdGlv
        bih2aWV3LCBzZWwpIHsKICAgIC8vIGlmIHdlIGRvbid0IGhhdmUgYW4gZWxl
        bWVudCB5ZXQsIHNvbWVvbmUgY2FsbGluZyB0aGlzLiQoKSBpcwogICAgLy8g
        dHJ5aW5nIHRvIHVwZGF0ZSBhbiBlbGVtZW50IHRoYXQgaXNuJ3QgaW4gdGhl
        IERPTS4gSW5zdGVhZCwKICAgIC8vIHJlcmVuZGVyIHRoZSB2aWV3IHRvIGFs
        bG93IHRoZSByZW5kZXIgbWV0aG9kIHRvIHJlZmxlY3QgdGhlCiAgICAvLyBj
        aGFuZ2VzLgogICAgdmlldy5yZXJlbmRlcigpOwogICAgcmV0dXJuIEVtYmVy
        LiQoKTsKICB9LAoKICAvLyB3aGVuIGEgdmlldyBpcyByZW5kZXJlZCBpbiBh
        IGJ1ZmZlciwgcmVyZW5kZXJpbmcgaXQgc2ltcGx5CiAgLy8gcmVwbGFjZXMg
        dGhlIGV4aXN0aW5nIGJ1ZmZlciB3aXRoIGEgbmV3IG9uZQogIHJlcmVuZGVy
        OiBmdW5jdGlvbih2aWV3KSB7CiAgICB0aHJvdyBuZXcgRW1iZXIuRXJyb3Io
        IlNvbWV0aGluZyB5b3UgZGlkIGNhdXNlZCBhIHZpZXcgdG8gcmUtcmVuZGVy
        IGFmdGVyIGl0IHJlbmRlcmVkIGJ1dCBiZWZvcmUgaXQgd2FzIGluc2VydGVk
        IGludG8gdGhlIERPTS4iKTsKICB9LAoKICAvLyB3aGVuIGEgdmlldyBpcyBy
        ZW5kZXJlZCBpbiBhIGJ1ZmZlciwgYXBwZW5kaW5nIGEgY2hpbGQKICAvLyB2
        aWV3IHdpbGwgcmVuZGVyIHRoYXQgdmlldyBhbmQgYXBwZW5kIHRoZSByZXN1
        bHRpbmcKICAvLyBidWZmZXIgaW50byBpdHMgYnVmZmVyLgogIGFwcGVuZENo
        aWxkOiBmdW5jdGlvbih2aWV3LCBjaGlsZFZpZXcsIG9wdGlvbnMpIHsKICAg
        IHZhciBidWZmZXIgPSB2aWV3LmJ1ZmZlciwgX2NoaWxkVmlld3MgPSB2aWV3
        Ll9jaGlsZFZpZXdzOwoKICAgIGNoaWxkVmlldyA9IHZpZXcuY3JlYXRlQ2hp
        bGRWaWV3KGNoaWxkVmlldywgb3B0aW9ucyk7CiAgICBpZiAoIV9jaGlsZFZp
        ZXdzLmxlbmd0aCkgeyBfY2hpbGRWaWV3cyA9IHZpZXcuX2NoaWxkVmlld3Mg
        PSBfY2hpbGRWaWV3cy5zbGljZSgpOyB9CiAgICBfY2hpbGRWaWV3cy5wdXNo
        KGNoaWxkVmlldyk7CgogICAgY2hpbGRWaWV3LnJlbmRlclRvQnVmZmVyKGJ1
        ZmZlcik7CgogICAgdmlldy5wcm9wZXJ0eURpZENoYW5nZSgnY2hpbGRWaWV3
        cycpOwoKICAgIHJldHVybiBjaGlsZFZpZXc7CiAgfSwKCiAgLy8gd2hlbiBh
        IHZpZXcgaXMgcmVuZGVyZWQgaW4gYSBidWZmZXIsIGRlc3Ryb3lpbmcgdGhl
        CiAgLy8gZWxlbWVudCB3aWxsIHNpbXBseSBkZXN0cm95IHRoZSBidWZmZXIg
        YW5kIHB1dCB0aGUKICAvLyBzdGF0ZSBiYWNrIGludG8gdGhlIHByZVJlbmRl
        ciBzdGF0ZS4KICBkZXN0cm95RWxlbWVudDogZnVuY3Rpb24odmlldykgewog
        ICAgdmlldy5jbGVhckJ1ZmZlcigpOwogICAgdmFyIHZpZXdDb2xsZWN0aW9u
        ID0gdmlldy5fbm90aWZ5V2lsbERlc3Ryb3lFbGVtZW50KCk7CiAgICB2aWV3
        Q29sbGVjdGlvbi50cmFuc2l0aW9uVG8oJ3ByZVJlbmRlcicsIGZhbHNlKTsK
        CiAgICByZXR1cm4gdmlldzsKICB9LAoKICBlbXB0eTogZnVuY3Rpb24oKSB7
        CiAgICBFbWJlci5hc3NlcnQoIkVtcHR5aW5nIGEgdmlldyBpbiB0aGUgaW5C
        dWZmZXIgc3RhdGUgaXMgbm90IGFsbG93ZWQgYW5kIHNob3VsZCBub3QgaGFw
        cGVuIHVuZGVyIG5vcm1hbCBjaXJjdW1zdGFuY2VzLiBNb3N0IGxpa2VseSB0
        aGVyZSBpcyBhIGJ1ZyBpbiB5b3VyIGFwcGxpY2F0aW9uLiBUaGlzIG1heSBi
        ZSBkdWUgdG8gZXhjZXNzaXZlIHByb3BlcnR5IGNoYW5nZSBub3RpZmljYXRp
        b25zLiIpOwogIH0sCgogIHJlbmRlclRvQnVmZmVySWZOZWVkZWQ6IGZ1bmN0
        aW9uICh2aWV3LCBidWZmZXIpIHsKICAgIHJldHVybiBmYWxzZTsKICB9LAoK
        ICAvLyBJdCBzaG91bGQgYmUgaW1wb3NzaWJsZSBmb3IgYSByZW5kZXJlZCB2
        aWV3IHRvIGJlIHNjaGVkdWxlZCBmb3IKICAvLyBpbnNlcnRpb24uCiAgaW5z
        ZXJ0RWxlbWVudDogZnVuY3Rpb24oKSB7CiAgICB0aHJvdyAiWW91IGNhbid0
        IGluc2VydCBhbiBlbGVtZW50IHRoYXQgaGFzIGFscmVhZHkgYmVlbiByZW5k
        ZXJlZCI7CiAgfSwKCiAgc2V0RWxlbWVudDogZnVuY3Rpb24odmlldywgdmFs
        dWUpIHsKICAgIGlmICh2YWx1ZSA9PT0gbnVsbCkgewogICAgICB2aWV3LnRy
        YW5zaXRpb25UbygncHJlUmVuZGVyJyk7CiAgICB9IGVsc2UgewogICAgICB2
        aWV3LmNsZWFyQnVmZmVyKCk7CiAgICAgIHZpZXcudHJhbnNpdGlvblRvKCdo
        YXNFbGVtZW50Jyk7CiAgICB9CgogICAgcmV0dXJuIHZhbHVlOwogIH0sCgog
        IGludm9rZU9ic2VydmVyOiBmdW5jdGlvbih0YXJnZXQsIG9ic2VydmVyKSB7
        CiAgICBvYnNlcnZlci5jYWxsKHRhcmdldCk7CiAgfQp9KTsKCgp9KSgpOwoK
        CgooZnVuY3Rpb24oKSB7Ci8qKgpAbW9kdWxlIGVtYmVyCkBzdWJtb2R1bGUg
        ZW1iZXItdmlld3MKKi8KCnZhciBnZXQgPSBFbWJlci5nZXQsIHNldCA9IEVt
        YmVyLnNldDsKCnZhciBoYXNFbGVtZW50ID0gRW1iZXIuVmlldy5zdGF0ZXMu
        aGFzRWxlbWVudCA9IEVtYmVyLmNyZWF0ZShFbWJlci5WaWV3LnN0YXRlcy5f
        ZGVmYXVsdCk7CgpFbWJlci5tZXJnZShoYXNFbGVtZW50LCB7CiAgJDogZnVu
        Y3Rpb24odmlldywgc2VsKSB7CiAgICB2YXIgZWxlbSA9IGdldCh2aWV3LCAn
        ZWxlbWVudCcpOwogICAgcmV0dXJuIHNlbCA/IEVtYmVyLiQoc2VsLCBlbGVt
        KSA6IEVtYmVyLiQoZWxlbSk7CiAgfSwKCiAgZ2V0RWxlbWVudDogZnVuY3Rp
        b24odmlldykgewogICAgdmFyIHBhcmVudCA9IGdldCh2aWV3LCAncGFyZW50
        VmlldycpOwogICAgaWYgKHBhcmVudCkgeyBwYXJlbnQgPSBnZXQocGFyZW50
        LCAnZWxlbWVudCcpOyB9CiAgICBpZiAocGFyZW50KSB7IHJldHVybiB2aWV3
        LmZpbmRFbGVtZW50SW5QYXJlbnRFbGVtZW50KHBhcmVudCk7IH0KICAgIHJl
        dHVybiBFbWJlci4kKCIjIiArIGdldCh2aWV3LCAnZWxlbWVudElkJykpWzBd
        OwogIH0sCgogIHNldEVsZW1lbnQ6IGZ1bmN0aW9uKHZpZXcsIHZhbHVlKSB7
        CiAgICBpZiAodmFsdWUgPT09IG51bGwpIHsKICAgICAgdmlldy50cmFuc2l0
        aW9uVG8oJ3ByZVJlbmRlcicpOwogICAgfSBlbHNlIHsKICAgICAgdGhyb3cg
        IllvdSBjYW5ub3Qgc2V0IGFuIGVsZW1lbnQgdG8gYSBub24tbnVsbCB2YWx1
        ZSB3aGVuIHRoZSBlbGVtZW50IGlzIGFscmVhZHkgaW4gdGhlIERPTS4iOwog
        ICAgfQoKICAgIHJldHVybiB2YWx1ZTsKICB9LAoKICAvLyBvbmNlIHRoZSB2
        aWV3IGhhcyBiZWVuIGluc2VydGVkIGludG8gdGhlIERPTSwgcmVyZW5kZXJp
        bmcgaXMKICAvLyBkZWZlcnJlZCB0byBhbGxvdyBiaW5kaW5ncyB0byBzeW5j
        aHJvbml6ZS4KICByZXJlbmRlcjogZnVuY3Rpb24odmlldykgewogICAgdmll
        dy50cmlnZ2VyUmVjdXJzaXZlbHkoJ3dpbGxDbGVhclJlbmRlcicpOwoKICAg
        IHZpZXcuY2xlYXJSZW5kZXJlZENoaWxkcmVuKCk7CgogICAgdmlldy5kb21N
        YW5hZ2VyLnJlcGxhY2Uodmlldyk7CiAgICByZXR1cm4gdmlldzsKICB9LAoK
        ICAvLyBvbmNlIHRoZSB2aWV3IGlzIGFscmVhZHkgaW4gdGhlIERPTSwgZGVz
        dHJveWluZyBpdCByZW1vdmVzIGl0CiAgLy8gZnJvbSB0aGUgRE9NLCBudWtl
        cyBpdHMgZWxlbWVudCwgYW5kIHB1dHMgaXQgYmFjayBpbnRvIHRoZQogIC8v
        IHByZVJlbmRlciBzdGF0ZSBpZiBpbkRPTS4KCiAgZGVzdHJveUVsZW1lbnQ6
        IGZ1bmN0aW9uKHZpZXcpIHsKICAgIHZpZXcuX25vdGlmeVdpbGxEZXN0cm95
        RWxlbWVudCgpOwogICAgdmlldy5kb21NYW5hZ2VyLnJlbW92ZSh2aWV3KTsK
        ICAgIHNldCh2aWV3LCAnZWxlbWVudCcsIG51bGwpOwogICAgaWYgKHZpZXcu
        X3NjaGVkdWxlZEluc2VydCkgewogICAgICBFbWJlci5ydW4uY2FuY2VsKHZp
        ZXcuX3NjaGVkdWxlZEluc2VydCk7CiAgICAgIHZpZXcuX3NjaGVkdWxlZElu
        c2VydCA9IG51bGw7CiAgICB9CiAgICByZXR1cm4gdmlldzsKICB9LAoKICBl
        bXB0eTogZnVuY3Rpb24odmlldykgewogICAgdmFyIF9jaGlsZFZpZXdzID0g
        dmlldy5fY2hpbGRWaWV3cywgbGVuLCBpZHg7CiAgICBpZiAoX2NoaWxkVmll
        d3MpIHsKICAgICAgbGVuID0gX2NoaWxkVmlld3MubGVuZ3RoOwogICAgICBm
        b3IgKGlkeCA9IDA7IGlkeCA8IGxlbjsgaWR4KyspIHsKICAgICAgICBfY2hp
        bGRWaWV3c1tpZHhdLl9ub3RpZnlXaWxsRGVzdHJveUVsZW1lbnQoKTsKICAg
        ICAgfQogICAgfQogICAgdmlldy5kb21NYW5hZ2VyLmVtcHR5KHZpZXcpOwog
        IH0sCgogIC8vIEhhbmRsZSBldmVudHMgZnJvbSBgRW1iZXIuRXZlbnREaXNw
        YXRjaGVyYAogIGhhbmRsZUV2ZW50OiBmdW5jdGlvbih2aWV3LCBldmVudE5h
        bWUsIGV2dCkgewogICAgaWYgKHZpZXcuaGFzKGV2ZW50TmFtZSkpIHsKICAg
        ICAgLy8gSGFuZGxlciBzaG91bGQgYmUgYWJsZSB0byByZS1kaXNwYXRjaCBl
        dmVudHMsIHNvIHdlIGRvbid0CiAgICAgIC8vIHByZXZlbnREZWZhdWx0IG9y
        IHN0b3BQcm9wYWdhdGlvbi4KICAgICAgcmV0dXJuIHZpZXcudHJpZ2dlcihl
        dmVudE5hbWUsIGV2dCk7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gdHJ1
        ZTsgLy8gY29udGludWUgZXZlbnQgcHJvcGFnYXRpb24KICAgIH0KICB9LAoK
        ICBpbnZva2VPYnNlcnZlcjogZnVuY3Rpb24odGFyZ2V0LCBvYnNlcnZlcikg
        ewogICAgb2JzZXJ2ZXIuY2FsbCh0YXJnZXQpOwogIH0KfSk7Cgp2YXIgaW5E
        T00gPSBFbWJlci5WaWV3LnN0YXRlcy5pbkRPTSA9IEVtYmVyLmNyZWF0ZSho
        YXNFbGVtZW50KTsKCkVtYmVyLm1lcmdlKGluRE9NLCB7CiAgZW50ZXI6IGZ1
        bmN0aW9uKHZpZXcpIHsKICAgIC8vIFJlZ2lzdGVyIHRoZSB2aWV3IGZvciBl
        dmVudCBoYW5kbGluZy4gVGhpcyBoYXNoIGlzIHVzZWQgYnkKICAgIC8vIEVt
        YmVyLkV2ZW50RGlzcGF0Y2hlciB0byBkaXNwYXRjaCBpbmNvbWluZyBldmVu
        dHMuCiAgICBpZiAoIXZpZXcuaXNWaXJ0dWFsKSB7CiAgICAgIEVtYmVyLmFz
        c2VydCgiQXR0ZW1wdGVkIHRvIHJlZ2lzdGVyIGEgdmlldyB3aXRoIGFuIGlk
        IGFscmVhZHkgaW4gdXNlOiAiK3ZpZXcuZWxlbWVudElkLCAhRW1iZXIuVmll
        dy52aWV3c1t2aWV3LmVsZW1lbnRJZF0pOwogICAgICBFbWJlci5WaWV3LnZp
        ZXdzW3ZpZXcuZWxlbWVudElkXSA9IHZpZXc7CiAgICB9CgogICAgdmlldy5h
        ZGRCZWZvcmVPYnNlcnZlcignZWxlbWVudElkJywgZnVuY3Rpb24oKSB7CiAg
        ICAgIHRocm93IG5ldyBFbWJlci5FcnJvcigiQ2hhbmdpbmcgYSB2aWV3J3Mg
        ZWxlbWVudElkIGFmdGVyIGNyZWF0aW9uIGlzIG5vdCBhbGxvd2VkIik7CiAg
        ICB9KTsKICB9LAoKICBleGl0OiBmdW5jdGlvbih2aWV3KSB7CiAgICBpZiAo
        IXRoaXMuaXNWaXJ0dWFsKSBkZWxldGUgRW1iZXIuVmlldy52aWV3c1t2aWV3
        LmVsZW1lbnRJZF07CiAgfSwKCiAgaW5zZXJ0RWxlbWVudDogZnVuY3Rpb24o
        dmlldywgZm4pIHsKICAgIHRocm93ICJZb3UgY2FuJ3QgaW5zZXJ0IGFuIGVs
        ZW1lbnQgaW50byB0aGUgRE9NIHRoYXQgaGFzIGFscmVhZHkgYmVlbiBpbnNl
        cnRlZCI7CiAgfQp9KTsKCn0pKCk7CgoKCihmdW5jdGlvbigpIHsKLyoqCkBt
        b2R1bGUgZW1iZXIKQHN1Ym1vZHVsZSBlbWJlci12aWV3cwoqLwoKdmFyIGRl
        c3Ryb3lpbmdFcnJvciA9ICJZb3UgY2FuJ3QgY2FsbCAlQCBvbiBhIHZpZXcg
        YmVpbmcgZGVzdHJveWVkIiwgZm10ID0gRW1iZXIuU3RyaW5nLmZtdDsKCnZh
        ciBkZXN0cm95aW5nID0gRW1iZXIuVmlldy5zdGF0ZXMuZGVzdHJveWluZyA9
        IEVtYmVyLmNyZWF0ZShFbWJlci5WaWV3LnN0YXRlcy5fZGVmYXVsdCk7CgpF
        bWJlci5tZXJnZShkZXN0cm95aW5nLCB7CiAgYXBwZW5kQ2hpbGQ6IGZ1bmN0
        aW9uKCkgewogICAgdGhyb3cgZm10KGRlc3Ryb3lpbmdFcnJvciwgWydhcHBl
        bmRDaGlsZCddKTsKICB9LAogIHJlcmVuZGVyOiBmdW5jdGlvbigpIHsKICAg
        IHRocm93IGZtdChkZXN0cm95aW5nRXJyb3IsIFsncmVyZW5kZXInXSk7CiAg
        fSwKICBkZXN0cm95RWxlbWVudDogZnVuY3Rpb24oKSB7CiAgICB0aHJvdyBm
        bXQoZGVzdHJveWluZ0Vycm9yLCBbJ2Rlc3Ryb3lFbGVtZW50J10pOwogIH0s
        CiAgZW1wdHk6IGZ1bmN0aW9uKCkgewogICAgdGhyb3cgZm10KGRlc3Ryb3lp
        bmdFcnJvciwgWydlbXB0eSddKTsKICB9LAoKICBzZXRFbGVtZW50OiBmdW5j
        dGlvbigpIHsKICAgIHRocm93IGZtdChkZXN0cm95aW5nRXJyb3IsIFsic2V0
        KCdlbGVtZW50JywgLi4uKSJdKTsKICB9LAoKICByZW5kZXJUb0J1ZmZlcklm
        TmVlZGVkOiBmdW5jdGlvbigpIHsKICAgIHJldHVybiBmYWxzZTsKICB9LAoK
        ICAvLyBTaW5jZSBlbGVtZW50IGluc2VydGlvbiBpcyBzY2hlZHVsZWQsIGRv
        bid0IGRvIGFueXRoaW5nIGlmCiAgLy8gdGhlIHZpZXcgaGFzIGJlZW4gZGVz
        dHJveWVkIGJldHdlZW4gc2NoZWR1bGluZyBhbmQgZXhlY3V0aW9uCiAgaW5z
        ZXJ0RWxlbWVudDogRW1iZXIuSwp9KTsKCgp9KSgpOwoKCgooZnVuY3Rpb24o
        KSB7CkVtYmVyLlZpZXcuY2xvbmVTdGF0ZXMgPSBmdW5jdGlvbihmcm9tKSB7
        CiAgdmFyIGludG8gPSB7fTsKCiAgaW50by5fZGVmYXVsdCA9IHt9OwogIGlu
        dG8ucHJlUmVuZGVyID0gRW1iZXIuY3JlYXRlKGludG8uX2RlZmF1bHQpOwog
        IGludG8uZGVzdHJveWluZyA9IEVtYmVyLmNyZWF0ZShpbnRvLl9kZWZhdWx0
        KTsKICBpbnRvLmluQnVmZmVyID0gRW1iZXIuY3JlYXRlKGludG8uX2RlZmF1
        bHQpOwogIGludG8uaGFzRWxlbWVudCA9IEVtYmVyLmNyZWF0ZShpbnRvLl9k
        ZWZhdWx0KTsKICBpbnRvLmluRE9NID0gRW1iZXIuY3JlYXRlKGludG8uaGFz
        RWxlbWVudCk7CgogIGZvciAodmFyIHN0YXRlTmFtZSBpbiBmcm9tKSB7CiAg
        ICBpZiAoIWZyb20uaGFzT3duUHJvcGVydHkoc3RhdGVOYW1lKSkgeyBjb250
        aW51ZTsgfQogICAgRW1iZXIubWVyZ2UoaW50b1tzdGF0ZU5hbWVdLCBmcm9t
        W3N0YXRlTmFtZV0pOwogIH0KCiAgcmV0dXJuIGludG87Cn07Cgp9KSgpOwoK
        CgooZnVuY3Rpb24oKSB7CnZhciBzdGF0ZXMgPSBFbWJlci5WaWV3LmNsb25l
        U3RhdGVzKEVtYmVyLlZpZXcuc3RhdGVzKTsKCi8qKgpAbW9kdWxlIGVtYmVy
        CkBzdWJtb2R1bGUgZW1iZXItdmlld3MKKi8KCnZhciBnZXQgPSBFbWJlci5n
        ZXQsIHNldCA9IEVtYmVyLnNldDsKdmFyIGZvckVhY2ggPSBFbWJlci5FbnVt
        ZXJhYmxlVXRpbHMuZm9yRWFjaDsKdmFyIFZpZXdDb2xsZWN0aW9uID0gRW1i
        ZXIuX1ZpZXdDb2xsZWN0aW9uOwoKLyoqCiAgQSBgQ29udGFpbmVyVmlld2Ag
        aXMgYW4gYEVtYmVyLlZpZXdgIHN1YmNsYXNzIHRoYXQgaW1wbGVtZW50cyBg
        RW1iZXIuTXV0YWJsZUFycmF5YAogIGFsbG93aW5nIHByb2dyYW1hdGljIG1h
        bmFnZW1lbnQgb2YgaXRzIGNoaWxkIHZpZXdzLgoKICAjIyBTZXR0aW5nIElu
        aXRpYWwgQ2hpbGQgVmlld3MKCiAgVGhlIGluaXRpYWwgYXJyYXkgb2YgY2hp
        bGQgdmlld3MgY2FuIGJlIHNldCBpbiBvbmUgb2YgdHdvIHdheXMuIFlvdSBj
        YW4KICBwcm92aWRlIGEgYGNoaWxkVmlld3NgIHByb3BlcnR5IGF0IGNyZWF0
        aW9uIHRpbWUgdGhhdCBjb250YWlucyBpbnN0YW5jZSBvZgogIGBFbWJlci5W
        aWV3YDoKCiAgYGBgamF2YXNjcmlwdAogIGFDb250YWluZXIgPSBFbWJlci5D
        b250YWluZXJWaWV3LmNyZWF0ZSh7CiAgICBjaGlsZFZpZXdzOiBbRW1iZXIu
        Vmlldy5jcmVhdGUoKSwgRW1iZXIuVmlldy5jcmVhdGUoKV0KICB9KTsKICBg
        YGAKCiAgWW91IGNhbiBhbHNvIHByb3ZpZGUgYSBsaXN0IG9mIHByb3BlcnR5
        IG5hbWVzIHdob3NlIHZhbHVlcyBhcmUgaW5zdGFuY2VzIG9mCiAgYEVtYmVy
        LlZpZXdgOgoKICBgYGBqYXZhc2NyaXB0CiAgYUNvbnRhaW5lciA9IEVtYmVy
        LkNvbnRhaW5lclZpZXcuY3JlYXRlKHsKICAgIGNoaWxkVmlld3M6IFsnYVZp
        ZXcnLCAnYlZpZXcnLCAnY1ZpZXcnXSwKICAgIGFWaWV3OiBFbWJlci5WaWV3
        LmNyZWF0ZSgpLAogICAgYlZpZXc6IEVtYmVyLlZpZXcuY3JlYXRlKCksCiAg
        ICBjVmlldzogRW1iZXIuVmlldy5jcmVhdGUoKQogIH0pOwogIGBgYAoKICBU
        aGUgdHdvIHN0cmF0ZWdpZXMgY2FuIGJlIGNvbWJpbmVkOgoKICBgYGBqYXZh
        c2NyaXB0CiAgYUNvbnRhaW5lciA9IEVtYmVyLkNvbnRhaW5lclZpZXcuY3Jl
        YXRlKHsKICAgIGNoaWxkVmlld3M6IFsnYVZpZXcnLCBFbWJlci5WaWV3LmNy
        ZWF0ZSgpXSwKICAgIGFWaWV3OiBFbWJlci5WaWV3LmNyZWF0ZSgpCiAgfSk7
        CiAgYGBgCgogIEVhY2ggY2hpbGQgdmlldydzIHJlbmRlcmluZyB3aWxsIGJl
        IGluc2VydGVkIGludG8gdGhlIGNvbnRhaW5lcidzIHJlbmRlcmVkCiAgSFRN
        TCBpbiB0aGUgc2FtZSBvcmRlciBhcyBpdHMgcG9zaXRpb24gaW4gdGhlIGBj
        aGlsZFZpZXdzYCBwcm9wZXJ0eS4KCiAgIyMgQWRkaW5nIGFuZCBSZW1vdmlu
        ZyBDaGlsZCBWaWV3cwoKICBUaGUgY29udGFpbmVyIHZpZXcgaW1wbGVtZW50
        cyBgRW1iZXIuTXV0YWJsZUFycmF5YCBhbGxvd2luZyBwcm9ncmFtYXRpYyBt
        YW5hZ2VtZW50IG9mIGl0cyBjaGlsZCB2aWV3cy4KCiAgVG8gcmVtb3ZlIGEg
        dmlldywgcGFzcyB0aGF0IHZpZXcgaW50byBhIGByZW1vdmVPYmplY3RgIGNh
        bGwgb24gdGhlIGNvbnRhaW5lciB2aWV3LgoKICBHaXZlbiBhbiBlbXB0eSBg
        PGJvZHk+YCB0aGUgZm9sbG93aW5nIGNvZGUKCiAgYGBgamF2YXNjcmlwdAog
        IGFDb250YWluZXIgPSBFbWJlci5Db250YWluZXJWaWV3LmNyZWF0ZSh7CiAg
        ICBjbGFzc05hbWVzOiBbJ3RoZS1jb250YWluZXInXSwKICAgIGNoaWxkVmll
        d3M6IFsnYVZpZXcnLCAnYlZpZXcnXSwKICAgIGFWaWV3OiBFbWJlci5WaWV3
        LmNyZWF0ZSh7CiAgICAgIHRlbXBsYXRlOiBFbWJlci5IYW5kbGViYXJzLmNv
        bXBpbGUoIkEiKQogICAgfSksCiAgICBiVmlldzogRW1iZXIuVmlldy5jcmVh
        dGUoewogICAgICB0ZW1wbGF0ZTogRW1iZXIuSGFuZGxlYmFycy5jb21waWxl
        KCJCIikKICAgIH0pCiAgfSk7CgogIGFDb250YWluZXIuYXBwZW5kVG8oJ2Jv
        ZHknKTsKICBgYGAKCiAgUmVzdWx0cyBpbiB0aGUgSFRNTAoKICBgYGBodG1s
        CiAgPGRpdiBjbGFzcz0iZW1iZXItdmlldyB0aGUtY29udGFpbmVyIj4KICAg
        IDxkaXYgY2xhc3M9ImVtYmVyLXZpZXciPkE8L2Rpdj4KICAgIDxkaXYgY2xh
        c3M9ImVtYmVyLXZpZXciPkI8L2Rpdj4KICA8L2Rpdj4KICBgYGAKCiAgUmVt
        b3ZpbmcgYSB2aWV3CgogIGBgYGphdmFzY3JpcHQKICBhQ29udGFpbmVyLnRv
        QXJyYXkoKTsgIC8vIFthQ29udGFpbmVyLmFWaWV3LCBhQ29udGFpbmVyLmJW
        aWV3XQogIGFDb250YWluZXIucmVtb3ZlT2JqZWN0KGFDb250YWluZXIuZ2V0
        KCdiVmlldycpKTsKICBhQ29udGFpbmVyLnRvQXJyYXkoKTsgIC8vIFthQ29u
        dGFpbmVyLmFWaWV3XQogIGBgYAoKICBXaWxsIHJlc3VsdCBpbiB0aGUgZm9s
        bG93aW5nIEhUTUwKCiAgYGBgaHRtbAogIDxkaXYgY2xhc3M9ImVtYmVyLXZp
        ZXcgdGhlLWNvbnRhaW5lciI+CiAgICA8ZGl2IGNsYXNzPSJlbWJlci12aWV3
        Ij5BPC9kaXY+CiAgPC9kaXY+CiAgYGBgCgogIFNpbWlsYXJseSwgYWRkaW5n
        IGEgY2hpbGQgdmlldyBpcyBhY2NvbXBsaXNoZWQgYnkgYWRkaW5nIGBFbWJl
        ci5WaWV3YCBpbnN0YW5jZXMgdG8gdGhlCiAgY29udGFpbmVyIHZpZXcuCgog
        IEdpdmVuIGFuIGVtcHR5IGA8Ym9keT5gIHRoZSBmb2xsb3dpbmcgY29kZQoK
        ICBgYGBqYXZhc2NyaXB0CiAgYUNvbnRhaW5lciA9IEVtYmVyLkNvbnRhaW5l
        clZpZXcuY3JlYXRlKHsKICAgIGNsYXNzTmFtZXM6IFsndGhlLWNvbnRhaW5l
        ciddLAogICAgY2hpbGRWaWV3czogWydhVmlldycsICdiVmlldyddLAogICAg
        YVZpZXc6IEVtYmVyLlZpZXcuY3JlYXRlKHsKICAgICAgdGVtcGxhdGU6IEVt
        YmVyLkhhbmRsZWJhcnMuY29tcGlsZSgiQSIpCiAgICB9KSwKICAgIGJWaWV3
        OiBFbWJlci5WaWV3LmNyZWF0ZSh7CiAgICAgIHRlbXBsYXRlOiBFbWJlci5I
        YW5kbGViYXJzLmNvbXBpbGUoIkIiKQogICAgfSkKICB9KTsKCiAgYUNvbnRh
        aW5lci5hcHBlbmRUbygnYm9keScpOwogIGBgYAoKICBSZXN1bHRzIGluIHRo
        ZSBIVE1MCgogIGBgYGh0bWwKICA8ZGl2IGNsYXNzPSJlbWJlci12aWV3IHRo
        ZS1jb250YWluZXIiPgogICAgPGRpdiBjbGFzcz0iZW1iZXItdmlldyI+QTwv
        ZGl2PgogICAgPGRpdiBjbGFzcz0iZW1iZXItdmlldyI+QjwvZGl2PgogIDwv
        ZGl2PgogIGBgYAoKICBBZGRpbmcgYSB2aWV3CgogIGBgYGphdmFzY3JpcHQK
        ICBBbm90aGVyVmlld0NsYXNzID0gRW1iZXIuVmlldy5leHRlbmQoewogICAg
        dGVtcGxhdGU6IEVtYmVyLkhhbmRsZWJhcnMuY29tcGlsZSgiQW5vdGhlciB2
        aWV3IikKICB9KTsKCiAgYUNvbnRhaW5lci50b0FycmF5KCk7ICAvLyBbYUNv
        bnRhaW5lci5hVmlldywgYUNvbnRhaW5lci5iVmlld10KICBhQ29udGFpbmVy
        LnB1c2hPYmplY3QoQW5vdGhlclZpZXdDbGFzcy5jcmVhdGUoKSk7CiAgYUNv
        bnRhaW5lci50b0FycmF5KCk7IC8vIFthQ29udGFpbmVyLmFWaWV3LCBhQ29u
        dGFpbmVyLmJWaWV3LCA8QW5vdGhlclZpZXdDbGFzcyBpbnN0YW5jZT5dCiAg
        YGBgCgogIFdpbGwgcmVzdWx0IGluIHRoZSBmb2xsb3dpbmcgSFRNTAoKICBg
        YGBodG1sCiAgPGRpdiBjbGFzcz0iZW1iZXItdmlldyB0aGUtY29udGFpbmVy
        Ij4KICAgIDxkaXYgY2xhc3M9ImVtYmVyLXZpZXciPkE8L2Rpdj4KICAgIDxk
        aXYgY2xhc3M9ImVtYmVyLXZpZXciPkI8L2Rpdj4KICAgIDxkaXYgY2xhc3M9
        ImVtYmVyLXZpZXciPkFub3RoZXIgdmlldzwvZGl2PgogIDwvZGl2PgogIGBg
        YAoKICAjIyBUZW1wbGF0ZXMgYW5kIExheW91dAoKICBBIGB0ZW1wbGF0ZWAs
        IGB0ZW1wbGF0ZU5hbWVgLCBgZGVmYXVsdFRlbXBsYXRlYCwgYGxheW91dGAs
        IGBsYXlvdXROYW1lYCBvcgogIGBkZWZhdWx0TGF5b3V0YCBwcm9wZXJ0eSBv
        biBhIGNvbnRhaW5lciB2aWV3IHdpbGwgbm90IHJlc3VsdCBpbiB0aGUgdGVt
        cGxhdGUKICBvciBsYXlvdXQgYmVpbmcgcmVuZGVyZWQuIFRoZSBIVE1MIGNv
        bnRlbnRzIG9mIGEgYEVtYmVyLkNvbnRhaW5lclZpZXdgJ3MgRE9NCiAgcmVw
        cmVzZW50YXRpb24gd2lsbCBvbmx5IGJlIHRoZSByZW5kZXJlZCBIVE1MIG9m
        IGl0cyBjaGlsZCB2aWV3cy4KCiAgQGNsYXNzIENvbnRhaW5lclZpZXcKICBA
        bmFtZXNwYWNlIEVtYmVyCiAgQGV4dGVuZHMgRW1iZXIuVmlldwoqLwpFbWJl
        ci5Db250YWluZXJWaWV3ID0gRW1iZXIuVmlldy5leHRlbmQoRW1iZXIuTXV0
        YWJsZUFycmF5LCB7CiAgc3RhdGVzOiBzdGF0ZXMsCgogIGluaXQ6IGZ1bmN0
        aW9uKCkgewogICAgdGhpcy5fc3VwZXIoKTsKCiAgICB2YXIgY2hpbGRWaWV3
        cyA9IGdldCh0aGlzLCAnY2hpbGRWaWV3cycpOwoKICAgIC8vIHJlZGVmaW5l
        IHZpZXcncyBjaGlsZFZpZXdzIHByb3BlcnR5IHRoYXQgd2FzIG9ibGl0ZXJh
        dGVkCiAgICBFbWJlci5kZWZpbmVQcm9wZXJ0eSh0aGlzLCAnY2hpbGRWaWV3
        cycsIEVtYmVyLlZpZXcuY2hpbGRWaWV3c1Byb3BlcnR5KTsKCiAgICB2YXIg
        X2NoaWxkVmlld3MgPSB0aGlzLl9jaGlsZFZpZXdzOwoKICAgIGZvckVhY2go
        Y2hpbGRWaWV3cywgZnVuY3Rpb24odmlld05hbWUsIGlkeCkgewogICAgICB2
        YXIgdmlldzsKCiAgICAgIGlmICgnc3RyaW5nJyA9PT0gdHlwZW9mIHZpZXdO
        YW1lKSB7CiAgICAgICAgdmlldyA9IGdldCh0aGlzLCB2aWV3TmFtZSk7CiAg
        ICAgICAgdmlldyA9IHRoaXMuY3JlYXRlQ2hpbGRWaWV3KHZpZXcpOwogICAg
        ICAgIHNldCh0aGlzLCB2aWV3TmFtZSwgdmlldyk7CiAgICAgIH0gZWxzZSB7
        CiAgICAgICAgdmlldyA9IHRoaXMuY3JlYXRlQ2hpbGRWaWV3KHZpZXdOYW1l
        KTsKICAgICAgfQoKICAgICAgX2NoaWxkVmlld3NbaWR4XSA9IHZpZXc7CiAg
        ICB9LCB0aGlzKTsKCiAgICB2YXIgY3VycmVudFZpZXcgPSBnZXQodGhpcywg
        J2N1cnJlbnRWaWV3Jyk7CiAgICBpZiAoY3VycmVudFZpZXcpIHsKICAgICAg
        aWYgKCFfY2hpbGRWaWV3cy5sZW5ndGgpIHsgX2NoaWxkVmlld3MgPSB0aGlz
        Ll9jaGlsZFZpZXdzID0gdGhpcy5fY2hpbGRWaWV3cy5zbGljZSgpOyB9CiAg
        ICAgIF9jaGlsZFZpZXdzLnB1c2godGhpcy5jcmVhdGVDaGlsZFZpZXcoY3Vy
        cmVudFZpZXcpKTsKICAgIH0KICB9LAoKICByZXBsYWNlOiBmdW5jdGlvbihp
        ZHgsIHJlbW92ZWRDb3VudCwgYWRkZWRWaWV3cykgewogICAgdmFyIGFkZGVk
        Q291bnQgPSBhZGRlZFZpZXdzID8gZ2V0KGFkZGVkVmlld3MsICdsZW5ndGgn
        KSA6IDA7CiAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICBFbWJlci5hc3NlcnQo
        IllvdSBjYW4ndCBhZGQgYSBjaGlsZCB0byBhIGNvbnRhaW5lciB0aGF0IGlz
        IGFscmVhZHkgYSBjaGlsZCBvZiBhbm90aGVyIHZpZXciLCBFbWJlci5BKGFk
        ZGVkVmlld3MpLmV2ZXJ5KGZ1bmN0aW9uKGl0ZW0pIHsgcmV0dXJuICFnZXQo
        aXRlbSwgJ19wYXJlbnRWaWV3JykgfHwgZ2V0KGl0ZW0sICdfcGFyZW50Vmll
        dycpID09PSBzZWxmOyB9KSk7CgogICAgdGhpcy5hcnJheUNvbnRlbnRXaWxs
        Q2hhbmdlKGlkeCwgcmVtb3ZlZENvdW50LCBhZGRlZENvdW50KTsKICAgIHRo
        aXMuY2hpbGRWaWV3c1dpbGxDaGFuZ2UodGhpcy5fY2hpbGRWaWV3cywgaWR4
        LCByZW1vdmVkQ291bnQpOwoKICAgIGlmIChhZGRlZENvdW50ID09PSAwKSB7
        CiAgICAgIHRoaXMuX2NoaWxkVmlld3Muc3BsaWNlKGlkeCwgcmVtb3ZlZENv
        dW50KSA7CiAgICB9IGVsc2UgewogICAgICB2YXIgYXJncyA9IFtpZHgsIHJl
        bW92ZWRDb3VudF0uY29uY2F0KGFkZGVkVmlld3MpOwogICAgICBpZiAoYWRk
        ZWRWaWV3cy5sZW5ndGggJiYgIXRoaXMuX2NoaWxkVmlld3MubGVuZ3RoKSB7
        IHRoaXMuX2NoaWxkVmlld3MgPSB0aGlzLl9jaGlsZFZpZXdzLnNsaWNlKCk7
        IH0KICAgICAgdGhpcy5fY2hpbGRWaWV3cy5zcGxpY2UuYXBwbHkodGhpcy5f
        Y2hpbGRWaWV3cywgYXJncyk7CiAgICB9CgogICAgdGhpcy5hcnJheUNvbnRl
        bnREaWRDaGFuZ2UoaWR4LCByZW1vdmVkQ291bnQsIGFkZGVkQ291bnQpOwog
        ICAgdGhpcy5jaGlsZFZpZXdzRGlkQ2hhbmdlKHRoaXMuX2NoaWxkVmlld3Ms
        IGlkeCwgcmVtb3ZlZENvdW50LCBhZGRlZENvdW50KTsKCiAgICByZXR1cm4g
        dGhpczsKICB9LAoKICBvYmplY3RBdDogZnVuY3Rpb24oaWR4KSB7CiAgICBy
        ZXR1cm4gdGhpcy5fY2hpbGRWaWV3c1tpZHhdOwogIH0sCgogIGxlbmd0aDog
        RW1iZXIuY29tcHV0ZWQoZnVuY3Rpb24gKCkgewogICAgcmV0dXJuIHRoaXMu
        X2NoaWxkVmlld3MubGVuZ3RoOwogIH0pLnZvbGF0aWxlKCksCgogIC8qKgog
        ICAgQHByaXZhdGUKCiAgICBJbnN0cnVjdHMgZWFjaCBjaGlsZCB2aWV3IHRv
        IHJlbmRlciB0byB0aGUgcGFzc2VkIHJlbmRlciBidWZmZXIuCgogICAgQG1l
        dGhvZCByZW5kZXIKICAgIEBwYXJhbSB7RW1iZXIuUmVuZGVyQnVmZmVyfSBi
        dWZmZXIgdGhlIGJ1ZmZlciB0byByZW5kZXIgdG8KICAqLwogIHJlbmRlcjog
        ZnVuY3Rpb24oYnVmZmVyKSB7CiAgICB0aGlzLmZvckVhY2hDaGlsZFZpZXco
        ZnVuY3Rpb24odmlldykgewogICAgICB2aWV3LnJlbmRlclRvQnVmZmVyKGJ1
        ZmZlcik7CiAgICB9KTsKICB9LAoKICBpbnN0cnVtZW50TmFtZTogJ2NvbnRh
        aW5lcicsCgogIC8qKgogICAgQHByaXZhdGUKCiAgICBXaGVuIGEgY2hpbGQg
        dmlldyBpcyByZW1vdmVkLCBkZXN0cm95IGl0cyBlbGVtZW50IHNvIHRoYXQK
        ICAgIGl0IGlzIHJlbW92ZWQgZnJvbSB0aGUgRE9NLgoKICAgIFRoZSBhcnJh
        eSBvYnNlcnZlciB0aGF0IHRyaWdnZXJzIHRoaXMgYWN0aW9uIGlzIHNldCB1
        cCBpbiB0aGUKICAgIGByZW5kZXJUb0J1ZmZlcmAgbWV0aG9kLgoKICAgIEBt
        ZXRob2QgY2hpbGRWaWV3c1dpbGxDaGFuZ2UKICAgIEBwYXJhbSB7RW1iZXIu
        QXJyYXl9IHZpZXdzIHRoZSBjaGlsZCB2aWV3cyBhcnJheSBiZWZvcmUgbXV0
        YXRpb24KICAgIEBwYXJhbSB7TnVtYmVyfSBzdGFydCB0aGUgc3RhcnQgcG9z
        aXRpb24gb2YgdGhlIG11dGF0aW9uCiAgICBAcGFyYW0ge051bWJlcn0gcmVt
        b3ZlZCB0aGUgbnVtYmVyIG9mIGNoaWxkIHZpZXdzIHJlbW92ZWQKICAqKi8K
        ICBjaGlsZFZpZXdzV2lsbENoYW5nZTogZnVuY3Rpb24odmlld3MsIHN0YXJ0
        LCByZW1vdmVkKSB7CiAgICB0aGlzLnByb3BlcnR5V2lsbENoYW5nZSgnY2hp
        bGRWaWV3cycpOwoKICAgIGlmIChyZW1vdmVkID4gMCkgewogICAgICB2YXIg
        Y2hhbmdlZFZpZXdzID0gdmlld3Muc2xpY2Uoc3RhcnQsIHN0YXJ0K3JlbW92
        ZWQpOwogICAgICAvLyB0cmFuc2l0aW9uIHRvIHByZVJlbmRlciBiZWZvcmUg
        Y2xlYXJpbmcgcGFyZW50VmlldwogICAgICB0aGlzLmN1cnJlbnRTdGF0ZS5j
        aGlsZFZpZXdzV2lsbENoYW5nZSh0aGlzLCB2aWV3cywgc3RhcnQsIHJlbW92
        ZWQpOwogICAgICB0aGlzLmluaXRpYWxpemVWaWV3cyhjaGFuZ2VkVmlld3Ms
        IG51bGwsIG51bGwpOwogICAgfQogIH0sCgogIHJlbW92ZUNoaWxkOiBmdW5j
        dGlvbihjaGlsZCkgewogICAgdGhpcy5yZW1vdmVPYmplY3QoY2hpbGQpOwog
        ICAgcmV0dXJuIHRoaXM7CiAgfSwKCiAgLyoqCiAgICBAcHJpdmF0ZQoKICAg
        IFdoZW4gYSBjaGlsZCB2aWV3IGlzIGFkZGVkLCBtYWtlIHN1cmUgdGhlIERP
        TSBnZXRzIHVwZGF0ZWQgYXBwcm9wcmlhdGVseS4KCiAgICBJZiB0aGUgdmll
        dyBoYXMgYWxyZWFkeSByZW5kZXJlZCBhbiBlbGVtZW50LCB3ZSB0ZWxsIHRo
        ZSBjaGlsZCB2aWV3IHRvCiAgICBjcmVhdGUgYW4gZWxlbWVudCBhbmQgaW5z
        ZXJ0IGl0IGludG8gdGhlIERPTS4gSWYgdGhlIGVuY2xvc2luZyBjb250YWlu
        ZXIKICAgIHZpZXcgaGFzIGFscmVhZHkgd3JpdHRlbiB0byBhIGJ1ZmZlciwg
        YnV0IG5vdCB5ZXQgY29udmVydGVkIHRoYXQgYnVmZmVyCiAgICBpbnRvIGFu
        IGVsZW1lbnQsIHdlIGluc2VydCB0aGUgc3RyaW5nIHJlcHJlc2VudGF0aW9u
        IG9mIHRoZSBjaGlsZCBpbnRvIHRoZQogICAgYXBwcm9wcmlhdGUgcGxhY2Ug
        aW4gdGhlIGJ1ZmZlci4KCiAgICBAbWV0aG9kIGNoaWxkVmlld3NEaWRDaGFu
        Z2UKICAgIEBwYXJhbSB7RW1iZXIuQXJyYXl9IHZpZXdzIHRoZSBhcnJheSBv
        ZiBjaGlsZCB2aWV3cyBhZnRlIHRoZSBtdXRhdGlvbiBoYXMgb2NjdXJyZWQK
        ICAgIEBwYXJhbSB7TnVtYmVyfSBzdGFydCB0aGUgc3RhcnQgcG9zaXRpb24g
        b2YgdGhlIG11dGF0aW9uCiAgICBAcGFyYW0ge051bWJlcn0gcmVtb3ZlZCB0
        aGUgbnVtYmVyIG9mIGNoaWxkIHZpZXdzIHJlbW92ZWQKICAgIEBwYXJhbSB7
        TnVtYmVyfSB0aGUgbnVtYmVyIG9mIGNoaWxkIHZpZXdzIGFkZGVkCiAgKi8K
        ICBjaGlsZFZpZXdzRGlkQ2hhbmdlOiBmdW5jdGlvbih2aWV3cywgc3RhcnQs
        IHJlbW92ZWQsIGFkZGVkKSB7CiAgICBpZiAoYWRkZWQgPiAwKSB7CiAgICAg
        IHZhciBjaGFuZ2VkVmlld3MgPSB2aWV3cy5zbGljZShzdGFydCwgc3RhcnQr
        YWRkZWQpOwogICAgICB0aGlzLmluaXRpYWxpemVWaWV3cyhjaGFuZ2VkVmll
        d3MsIHRoaXMsIGdldCh0aGlzLCAndGVtcGxhdGVEYXRhJykpOwogICAgICB0
        aGlzLmN1cnJlbnRTdGF0ZS5jaGlsZFZpZXdzRGlkQ2hhbmdlKHRoaXMsIHZp
        ZXdzLCBzdGFydCwgYWRkZWQpOwogICAgfQogICAgdGhpcy5wcm9wZXJ0eURp
        ZENoYW5nZSgnY2hpbGRWaWV3cycpOwogIH0sCgogIGluaXRpYWxpemVWaWV3
        czogZnVuY3Rpb24odmlld3MsIHBhcmVudFZpZXcsIHRlbXBsYXRlRGF0YSkg
        ewogICAgZm9yRWFjaCh2aWV3cywgZnVuY3Rpb24odmlldykgewogICAgICBz
        ZXQodmlldywgJ19wYXJlbnRWaWV3JywgcGFyZW50Vmlldyk7CgogICAgICBp
        ZiAoIXZpZXcuY29udGFpbmVyICYmIHBhcmVudFZpZXcpIHsKICAgICAgICBz
        ZXQodmlldywgJ2NvbnRhaW5lcicsIHBhcmVudFZpZXcuY29udGFpbmVyKTsK
        ICAgICAgfQoKICAgICAgaWYgKCFnZXQodmlldywgJ3RlbXBsYXRlRGF0YScp
        KSB7CiAgICAgICAgc2V0KHZpZXcsICd0ZW1wbGF0ZURhdGEnLCB0ZW1wbGF0
        ZURhdGEpOwogICAgICB9CiAgICB9KTsKICB9LAoKICBjdXJyZW50Vmlldzog
        bnVsbCwKCiAgX2N1cnJlbnRWaWV3V2lsbENoYW5nZTogRW1iZXIuYmVmb3Jl
        T2JzZXJ2ZXIoJ2N1cnJlbnRWaWV3JywgZnVuY3Rpb24oKSB7CiAgICB2YXIg
        Y3VycmVudFZpZXcgPSBnZXQodGhpcywgJ2N1cnJlbnRWaWV3Jyk7CiAgICBp
        ZiAoY3VycmVudFZpZXcpIHsKICAgICAgY3VycmVudFZpZXcuZGVzdHJveSgp
        OwogICAgfQogIH0pLAoKICBfY3VycmVudFZpZXdEaWRDaGFuZ2U6IEVtYmVy
        Lm9ic2VydmVyKCdjdXJyZW50VmlldycsIGZ1bmN0aW9uKCkgewogICAgdmFy
        IGN1cnJlbnRWaWV3ID0gZ2V0KHRoaXMsICdjdXJyZW50VmlldycpOwogICAg
        aWYgKGN1cnJlbnRWaWV3KSB7CiAgICAgIEVtYmVyLmFzc2VydCgiWW91IHRy
        aWVkIHRvIHNldCBhIGN1cnJlbnQgdmlldyB0aGF0IGFscmVhZHkgaGFzIGEg
        cGFyZW50LiBNYWtlIHN1cmUgeW91IGRvbid0IGhhdmUgbXVsdGlwbGUgb3V0
        bGV0cyBpbiB0aGUgc2FtZSB2aWV3LiIsICFnZXQoY3VycmVudFZpZXcsICdf
        cGFyZW50VmlldycpKTsKICAgICAgdGhpcy5wdXNoT2JqZWN0KGN1cnJlbnRW
        aWV3KTsKICAgIH0KICB9KSwKCiAgX2Vuc3VyZUNoaWxkcmVuQXJlSW5ET006
        IGZ1bmN0aW9uICgpIHsKICAgIHRoaXMuY3VycmVudFN0YXRlLmVuc3VyZUNo
        aWxkcmVuQXJlSW5ET00odGhpcyk7CiAgfQp9KTsKCkVtYmVyLm1lcmdlKHN0
        YXRlcy5fZGVmYXVsdCwgewogIGNoaWxkVmlld3NXaWxsQ2hhbmdlOiBFbWJl
        ci5LLAogIGNoaWxkVmlld3NEaWRDaGFuZ2U6IEVtYmVyLkssCiAgZW5zdXJl
        Q2hpbGRyZW5BcmVJbkRPTTogRW1iZXIuSwp9KTsKCkVtYmVyLm1lcmdlKHN0
        YXRlcy5pbkJ1ZmZlciwgewogIGNoaWxkVmlld3NEaWRDaGFuZ2U6IGZ1bmN0
        aW9uKHBhcmVudFZpZXcsIHZpZXdzLCBzdGFydCwgYWRkZWQpIHsKICAgIHRo
        cm93IG5ldyBFbWJlci5FcnJvcignWW91IGNhbm5vdCBtb2RpZnkgY2hpbGQg
        dmlld3Mgd2hpbGUgaW4gdGhlIGluQnVmZmVyIHN0YXRlJyk7CiAgfQp9KTsK
        CkVtYmVyLm1lcmdlKHN0YXRlcy5oYXNFbGVtZW50LCB7CiAgY2hpbGRWaWV3
        c1dpbGxDaGFuZ2U6IGZ1bmN0aW9uKHZpZXcsIHZpZXdzLCBzdGFydCwgcmVt
        b3ZlZCkgewogICAgZm9yICh2YXIgaT1zdGFydDsgaTxzdGFydCtyZW1vdmVk
        OyBpKyspIHsKICAgICAgdmlld3NbaV0ucmVtb3ZlKCk7CiAgICB9CiAgfSwK
        CiAgY2hpbGRWaWV3c0RpZENoYW5nZTogZnVuY3Rpb24odmlldywgdmlld3Ms
        IHN0YXJ0LCBhZGRlZCkgewogICAgRW1iZXIucnVuLnNjaGVkdWxlT25jZSgn
        cmVuZGVyJywgdmlldywgJ19lbnN1cmVDaGlsZHJlbkFyZUluRE9NJyk7CiAg
        fSwKCiAgZW5zdXJlQ2hpbGRyZW5BcmVJbkRPTTogZnVuY3Rpb24odmlldykg
        ewogICAgdmFyIGNoaWxkVmlld3MgPSB2aWV3Ll9jaGlsZFZpZXdzLCBpLCBs
        ZW4sIGNoaWxkVmlldywgcHJldmlvdXMsIGJ1ZmZlciwgdmlld0NvbGxlY3Rp
        b24gPSBuZXcgVmlld0NvbGxlY3Rpb24oKTsKCiAgICBmb3IgKGkgPSAwLCBs
        ZW4gPSBjaGlsZFZpZXdzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7CiAgICAg
        IGNoaWxkVmlldyA9IGNoaWxkVmlld3NbaV07CgogICAgICBpZiAoIWJ1ZmZl
        cikgeyBidWZmZXIgPSBFbWJlci5SZW5kZXJCdWZmZXIoKTsgYnVmZmVyLl9o
        YXNFbGVtZW50ID0gZmFsc2U7IH0KCiAgICAgIGlmIChjaGlsZFZpZXcucmVu
        ZGVyVG9CdWZmZXJJZk5lZWRlZChidWZmZXIpKSB7CiAgICAgICAgdmlld0Nv
        bGxlY3Rpb24ucHVzaChjaGlsZFZpZXcpOwogICAgICB9IGVsc2UgaWYgKHZp
        ZXdDb2xsZWN0aW9uLmxlbmd0aCkgewogICAgICAgIGluc2VydFZpZXdDb2xs
        ZWN0aW9uKHZpZXcsIHZpZXdDb2xsZWN0aW9uLCBwcmV2aW91cywgYnVmZmVy
        KTsKICAgICAgICBidWZmZXIgPSBudWxsOwogICAgICAgIHByZXZpb3VzID0g
        Y2hpbGRWaWV3OwogICAgICAgIHZpZXdDb2xsZWN0aW9uLmNsZWFyKCk7CiAg
        ICAgIH0gZWxzZSB7CiAgICAgICAgcHJldmlvdXMgPSBjaGlsZFZpZXc7CiAg
        ICAgIH0KICAgIH0KCiAgICBpZiAodmlld0NvbGxlY3Rpb24ubGVuZ3RoKSB7
        CiAgICAgIGluc2VydFZpZXdDb2xsZWN0aW9uKHZpZXcsIHZpZXdDb2xsZWN0
        aW9uLCBwcmV2aW91cywgYnVmZmVyKTsKICAgIH0KICB9Cn0pOwoKZnVuY3Rp
        b24gaW5zZXJ0Vmlld0NvbGxlY3Rpb24odmlldywgdmlld0NvbGxlY3Rpb24s
        IHByZXZpb3VzLCBidWZmZXIpIHsKICB2aWV3Q29sbGVjdGlvbi50cmlnZ2Vy
        UmVjdXJzaXZlbHkoJ3dpbGxJbnNlcnRFbGVtZW50Jyk7CgogIGlmIChwcmV2
        aW91cykgewogICAgcHJldmlvdXMuZG9tTWFuYWdlci5hZnRlcihwcmV2aW91
        cywgYnVmZmVyLnN0cmluZygpKTsKICB9IGVsc2UgewogICAgdmlldy5kb21N
        YW5hZ2VyLnByZXBlbmQodmlldywgYnVmZmVyLnN0cmluZygpKTsKICB9Cgog
        IHZpZXdDb2xsZWN0aW9uLmZvckVhY2goZnVuY3Rpb24odikgewogICAgdi50
        cmFuc2l0aW9uVG8oJ2luRE9NJyk7CiAgICB2LnByb3BlcnR5RGlkQ2hhbmdl
        KCdlbGVtZW50Jyk7CiAgICB2LnRyaWdnZXJSZWN1cnNpdmVseSgnZGlkSW5z
        ZXJ0RWxlbWVudCcpOwogIH0pOwp9CgoKfSkoKTsKCgoKKGZ1bmN0aW9uKCkg
        ewovKioKQG1vZHVsZSBlbWJlcgpAc3VibW9kdWxlIGVtYmVyLXZpZXdzCiov
        Cgp2YXIgZ2V0ID0gRW1iZXIuZ2V0LCBzZXQgPSBFbWJlci5zZXQsIGZtdCA9
        IEVtYmVyLlN0cmluZy5mbXQ7CgovKioKICBgRW1iZXIuQ29sbGVjdGlvblZp
        ZXdgIGlzIGFuIGBFbWJlci5WaWV3YCBkZXNjZW5kZW50IHJlc3BvbnNpYmxl
        IGZvciBtYW5hZ2luZwogIGEgY29sbGVjdGlvbiAoYW4gYXJyYXkgb3IgYXJy
        YXktbGlrZSBvYmplY3QpIGJ5IG1haW50YWluaW5nIGEgY2hpbGQgdmlldyBv
        YmplY3QKICBhbmQgYXNzb2NpYXRlZCBET00gcmVwcmVzZW50YXRpb24gZm9y
        IGVhY2ggaXRlbSBpbiB0aGUgYXJyYXkgYW5kIGVuc3VyaW5nCiAgdGhhdCBj
        aGlsZCB2aWV3cyBhbmQgdGhlaXIgYXNzb2NpYXRlZCByZW5kZXJlZCBIVE1M
        IGFyZSB1cGRhdGVkIHdoZW4gaXRlbXMgaW4KICB0aGUgYXJyYXkgYXJlIGFk
        ZGVkLCByZW1vdmVkLCBvciByZXBsYWNlZC4KCiAgIyMgU2V0dGluZyBjb250
        ZW50CgogIFRoZSBtYW5hZ2VkIGNvbGxlY3Rpb24gb2Ygb2JqZWN0cyBpcyBy
        ZWZlcmVuY2VkIGFzIHRoZSBgRW1iZXIuQ29sbGVjdGlvblZpZXdgCiAgaW5z
        dGFuY2UncyBgY29udGVudGAgcHJvcGVydHkuCgogIGBgYGphdmFzY3JpcHQK
        ICBzb21lSXRlbXNWaWV3ID0gRW1iZXIuQ29sbGVjdGlvblZpZXcuY3JlYXRl
        KHsKICAgIGNvbnRlbnQ6IFsnQScsICdCJywnQyddCiAgfSkKICBgYGAKCiAg
        VGhlIHZpZXcgZm9yIGVhY2ggaXRlbSBpbiB0aGUgY29sbGVjdGlvbiB3aWxs
        IGhhdmUgaXRzIGBjb250ZW50YCBwcm9wZXJ0eSBzZXQKICB0byB0aGUgaXRl
        bS4KCiAgIyMgU3BlY2lmeWluZyBpdGVtVmlld0NsYXNzCgogIEJ5IGRlZmF1
        bHQgdGhlIHZpZXcgY2xhc3MgZm9yIGVhY2ggaXRlbSBpbiB0aGUgbWFuYWdl
        ZCBjb2xsZWN0aW9uIHdpbGwgYmUgYW4KICBpbnN0YW5jZSBvZiBgRW1iZXIu
        Vmlld2AuIFlvdSBjYW4gc3VwcGx5IGEgZGlmZmVyZW50IGNsYXNzIGJ5IHNl
        dHRpbmcgdGhlCiAgYENvbGxlY3Rpb25WaWV3YCdzIGBpdGVtVmlld0NsYXNz
        YCBwcm9wZXJ0eS4KCiAgR2l2ZW4gYW4gZW1wdHkgYDxib2R5PmAgYW5kIHRo
        ZSBmb2xsb3dpbmcgY29kZToKCiAgYGBgamF2YXNjcmlwdAogIHNvbWVJdGVt
        c1ZpZXcgPSBFbWJlci5Db2xsZWN0aW9uVmlldy5jcmVhdGUoewogICAgY2xh
        c3NOYW1lczogWydhLWNvbGxlY3Rpb24nXSwKICAgIGNvbnRlbnQ6IFsnQScs
        J0InLCdDJ10sCiAgICBpdGVtVmlld0NsYXNzOiBFbWJlci5WaWV3LmV4dGVu
        ZCh7CiAgICAgIHRlbXBsYXRlOiBFbWJlci5IYW5kbGViYXJzLmNvbXBpbGUo
        InRoZSBsZXR0ZXI6IHt7dmlldy5jb250ZW50fX0iKQogICAgfSkKICB9KTsK
        CiAgc29tZUl0ZW1zVmlldy5hcHBlbmRUbygnYm9keScpOwogIGBgYAoKICBX
        aWxsIHJlc3VsdCBpbiB0aGUgZm9sbG93aW5nIEhUTUwgc3RydWN0dXJlCgog
        IGBgYGh0bWwKICA8ZGl2IGNsYXNzPSJlbWJlci12aWV3IGEtY29sbGVjdGlv
        biI+CiAgICA8ZGl2IGNsYXNzPSJlbWJlci12aWV3Ij50aGUgbGV0dGVyOiBB
        PC9kaXY+CiAgICA8ZGl2IGNsYXNzPSJlbWJlci12aWV3Ij50aGUgbGV0dGVy
        OiBCPC9kaXY+CiAgICA8ZGl2IGNsYXNzPSJlbWJlci12aWV3Ij50aGUgbGV0
        dGVyOiBDPC9kaXY+CiAgPC9kaXY+CiAgYGBgCgogICMjIEF1dG9tYXRpYyBt
        YXRjaGluZyBvZiBwYXJlbnQvY2hpbGQgdGFnTmFtZXMKCiAgU2V0dGluZyB0
        aGUgYHRhZ05hbWVgIHByb3BlcnR5IG9mIGEgYENvbGxlY3Rpb25WaWV3YCB0
        byBhbnkgb2YKICAidWwiLCAib2wiLCAidGFibGUiLCAidGhlYWQiLCAidGJv
        ZHkiLCAidGZvb3QiLCAidHIiLCBvciAic2VsZWN0IiB3aWxsIHJlc3VsdAog
        IGluIHRoZSBpdGVtIHZpZXdzIHJlY2VpdmluZyBhbiBhcHByb3ByaWF0ZWx5
        IG1hdGNoZWQgYHRhZ05hbWVgIHByb3BlcnR5LgoKICBHaXZlbiBhbiBlbXB0
        eSBgPGJvZHk+YCBhbmQgdGhlIGZvbGxvd2luZyBjb2RlOgoKICBgYGBqYXZh
        c2NyaXB0CiAgYW5VbmRvcmRlcmVkTGlzdFZpZXcgPSBFbWJlci5Db2xsZWN0
        aW9uVmlldy5jcmVhdGUoewogICAgdGFnTmFtZTogJ3VsJywKICAgIGNvbnRl
        bnQ6IFsnQScsJ0InLCdDJ10sCiAgICBpdGVtVmlld0NsYXNzOiBFbWJlci5W
        aWV3LmV4dGVuZCh7CiAgICAgIHRlbXBsYXRlOiBFbWJlci5IYW5kbGViYXJz
        LmNvbXBpbGUoInRoZSBsZXR0ZXI6IHt7dmlldy5jb250ZW50fX0iKQogICAg
        fSkKICB9KTsKCiAgYW5VbmRvcmRlcmVkTGlzdFZpZXcuYXBwZW5kVG8oJ2Jv
        ZHknKTsKICBgYGAKCiAgV2lsbCByZXN1bHQgaW4gdGhlIGZvbGxvd2luZyBI
        VE1MIHN0cnVjdHVyZQoKICBgYGBodG1sCiAgPHVsIGNsYXNzPSJlbWJlci12
        aWV3IGEtY29sbGVjdGlvbiI+CiAgICA8bGkgY2xhc3M9ImVtYmVyLXZpZXci
        PnRoZSBsZXR0ZXI6IEE8L2xpPgogICAgPGxpIGNsYXNzPSJlbWJlci12aWV3
        Ij50aGUgbGV0dGVyOiBCPC9saT4KICAgIDxsaSBjbGFzcz0iZW1iZXItdmll
        dyI+dGhlIGxldHRlcjogQzwvbGk+CiAgPC91bD4KICBgYGAKCiAgQWRkaXRp
        b25hbCBgdGFnTmFtZWAgcGFpcnMgY2FuIGJlIHByb3ZpZGVkIGJ5IGFkZGlu
        ZyB0bwogIGBFbWJlci5Db2xsZWN0aW9uVmlldy5DT05UQUlORVJfTUFQIGAK
        CiAgYGBgamF2YXNjcmlwdAogIEVtYmVyLkNvbGxlY3Rpb25WaWV3LkNPTlRB
        SU5FUl9NQVBbJ2FydGljbGUnXSA9ICdzZWN0aW9uJwogIGBgYAoKICAjIyBQ
        cm9ncmFtYXRpYyBjcmVhdGlvbiBvZiBjaGlsZCB2aWV3cwoKICBGb3IgY2Fz
        ZXMgd2hlcmUgYWRkaXRpb25hbCBjdXN0b21pemF0aW9uIGJleW9uZCB0aGUg
        dXNlIG9mIGEgc2luZ2xlCiAgYGl0ZW1WaWV3Q2xhc3NgIG9yIGB0YWdOYW1l
        YCBtYXRjaGluZyBpcyByZXF1aXJlZCBDb2xsZWN0aW9uVmlldydzCiAgYGNy
        ZWF0ZUNoaWxkVmlld2AgbWV0aG9kIGNhbiBiZSBvdmVyaWRkZW46CgogIGBg
        YGphdmFzY3JpcHQKICBDdXN0b21Db2xsZWN0aW9uVmlldyA9IEVtYmVyLkNv
        bGxlY3Rpb25WaWV3LmV4dGVuZCh7CiAgICBjcmVhdGVDaGlsZFZpZXc6IGZ1
        bmN0aW9uKHZpZXdDbGFzcywgYXR0cnMpIHsKICAgICAgaWYgKGF0dHJzLmNv
        bnRlbnQua2luZCA9PSAnYWxidW0nKSB7CiAgICAgICAgdmlld0NsYXNzID0g
        QXBwLkFsYnVtVmlldzsKICAgICAgfSBlbHNlIHsKICAgICAgICB2aWV3Q2xh
        c3MgPSBBcHAuU29uZ1ZpZXc7CiAgICAgIH0KICAgICAgcmV0dXJuIHRoaXMu
        X3N1cGVyKHZpZXdDbGFzcywgYXR0cnMpOwogICAgfQogIH0pOwogIGBgYAoK
        ICAjIyBFbXB0eSBWaWV3CgogIFlvdSBjYW4gcHJvdmlkZSBhbiBgRW1iZXIu
        Vmlld2Agc3ViY2xhc3MgdG8gdGhlIGBFbWJlci5Db2xsZWN0aW9uVmlld2AK
        ICBpbnN0YW5jZSBhcyBpdHMgYGVtcHR5Vmlld2AgcHJvcGVydHkuIElmIHRo
        ZSBgY29udGVudGAgcHJvcGVydHkgb2YgYQogIGBDb2xsZWN0aW9uVmlld2Ag
        aXMgc2V0IHRvIGBudWxsYCBvciBhbiBlbXB0eSBhcnJheSwgYW4gaW5zdGFu
        Y2Ugb2YgdGhpcyB2aWV3CiAgd2lsbCBiZSB0aGUgYENvbGxlY3Rpb25WaWV3
        YHMgb25seSBjaGlsZC4KCiAgYGBgamF2YXNjcmlwdAogIGFMaXN0V2l0aE5v
        dGhpbmcgPSBFbWJlci5Db2xsZWN0aW9uVmlldy5jcmVhdGUoewogICAgY2xh
        c3NOYW1lczogWydub3RoaW5nJ10KICAgIGNvbnRlbnQ6IG51bGwsCiAgICBl
        bXB0eVZpZXc6IEVtYmVyLlZpZXcuZXh0ZW5kKHsKICAgICAgdGVtcGxhdGU6
        IEVtYmVyLkhhbmRsZWJhcnMuY29tcGlsZSgiVGhlIGNvbGxlY3Rpb24gaXMg
        ZW1wdHkiKQogICAgfSkKICB9KTsKCiAgYUxpc3RXaXRoTm90aGluZy5hcHBl
        bmRUbygnYm9keScpOwogIGBgYAoKICBXaWxsIHJlc3VsdCBpbiB0aGUgZm9s
        bG93aW5nIEhUTUwgc3RydWN0dXJlCgogIGBgYGh0bWwKICA8ZGl2IGNsYXNz
        PSJlbWJlci12aWV3IG5vdGhpbmciPgogICAgPGRpdiBjbGFzcz0iZW1iZXIt
        dmlldyI+CiAgICAgIFRoZSBjb2xsZWN0aW9uIGlzIGVtcHR5CiAgICA8L2Rp
        dj4KICA8L2Rpdj4KICBgYGAKCiAgIyMgQWRkaW5nIGFuZCBSZW1vdmluZyBp
        dGVtcwoKICBUaGUgYGNoaWxkVmlld3NgIHByb3BlcnR5IG9mIGEgYENvbGxl
        Y3Rpb25WaWV3YCBzaG91bGQgbm90IGJlIGRpcmVjdGx5CiAgbWFuaXB1bGF0
        ZWQuIEluc3RlYWQsIGFkZCwgcmVtb3ZlLCByZXBsYWNlIGl0ZW1zIGZyb20g
        aXRzIGBjb250ZW50YCBwcm9wZXJ0eS4KICBUaGlzIHdpbGwgdHJpZ2dlciBh
        cHByb3ByaWF0ZSBjaGFuZ2VzIHRvIGl0cyByZW5kZXJlZCBIVE1MLgoKCiAg
        QGNsYXNzIENvbGxlY3Rpb25WaWV3CiAgQG5hbWVzcGFjZSBFbWJlcgogIEBl
        eHRlbmRzIEVtYmVyLkNvbnRhaW5lclZpZXcKICBAc2luY2UgRW1iZXIgMC45
        CiovCkVtYmVyLkNvbGxlY3Rpb25WaWV3ID0gRW1iZXIuQ29udGFpbmVyVmll
        dy5leHRlbmQoLyoqIEBzY29wZSBFbWJlci5Db2xsZWN0aW9uVmlldy5wcm90
        b3R5cGUgKi8gewoKICAvKioKICAgIEEgbGlzdCBvZiBpdGVtcyB0byBiZSBk
        aXNwbGF5ZWQgYnkgdGhlIGBFbWJlci5Db2xsZWN0aW9uVmlld2AuCgogICAg
        QHByb3BlcnR5IGNvbnRlbnQKICAgIEB0eXBlIEVtYmVyLkFycmF5CiAgICBA
        ZGVmYXVsdCBudWxsCiAgKi8KICBjb250ZW50OiBudWxsLAoKICAvKioKICAg
        IEBwcml2YXRlCgogICAgVGhpcyBwcm92aWRlcyBtZXRhZGF0YSBhYm91dCB3
        aGF0IGtpbmQgb2YgZW1wdHkgdmlldyBjbGFzcyB0aGlzCiAgICBjb2xsZWN0
        aW9uIHdvdWxkIGxpa2UgaWYgaXQgaXMgYmVpbmcgaW5zdGFudGlhdGVkIGZy
        b20gYW5vdGhlcgogICAgc3lzdGVtIChsaWtlIEhhbmRsZWJhcnMpCgogICAg
        QHByb3BlcnR5IGVtcHR5Vmlld0NsYXNzCiAgKi8KICBlbXB0eVZpZXdDbGFz
        czogRW1iZXIuVmlldywKCiAgLyoqCiAgICBBbiBvcHRpb25hbCB2aWV3IHRv
        IGRpc3BsYXkgaWYgY29udGVudCBpcyBzZXQgdG8gYW4gZW1wdHkgYXJyYXku
        CgogICAgQHByb3BlcnR5IGVtcHR5VmlldwogICAgQHR5cGUgRW1iZXIuVmll
        dwogICAgQGRlZmF1bHQgbnVsbAogICovCiAgZW1wdHlWaWV3OiBudWxsLAoK
        ICAvKioKICAgIEBwcm9wZXJ0eSBpdGVtVmlld0NsYXNzCiAgICBAdHlwZSBF
        bWJlci5WaWV3CiAgICBAZGVmYXVsdCBFbWJlci5WaWV3CiAgKi8KICBpdGVt
        Vmlld0NsYXNzOiBFbWJlci5WaWV3LAoKICAvKioKICAgIFNldHVwIGEgQ29s
        bGVjdGlvblZpZXcKCiAgICBAbWV0aG9kIGluaXQKICAqLwogIGluaXQ6IGZ1
        bmN0aW9uKCkgewogICAgdmFyIHJldCA9IHRoaXMuX3N1cGVyKCk7CiAgICB0
        aGlzLl9jb250ZW50RGlkQ2hhbmdlKCk7CiAgICByZXR1cm4gcmV0OwogIH0s
        CgogIC8qKgogICAgQHByaXZhdGUKCiAgICBJbnZva2VkIHdoZW4gdGhlIGNv
        bnRlbnQgcHJvcGVydHkgaXMgYWJvdXQgdG8gY2hhbmdlLiBOb3RpZmllcyBv
        YnNlcnZlcnMgdGhhdCB0aGUKICAgIGVudGlyZSBhcnJheSBjb250ZW50IHdp
        bGwgY2hhbmdlLgoKICAgIEBtZXRob2QgX2NvbnRlbnRXaWxsQ2hhbmdlCiAg
        Ki8KICBfY29udGVudFdpbGxDaGFuZ2U6IEVtYmVyLmJlZm9yZU9ic2VydmVy
        KCdjb250ZW50JywgZnVuY3Rpb24oKSB7CiAgICB2YXIgY29udGVudCA9IHRo
        aXMuZ2V0KCdjb250ZW50Jyk7CgogICAgaWYgKGNvbnRlbnQpIHsgY29udGVu
        dC5yZW1vdmVBcnJheU9ic2VydmVyKHRoaXMpOyB9CiAgICB2YXIgbGVuID0g
        Y29udGVudCA/IGdldChjb250ZW50LCAnbGVuZ3RoJykgOiAwOwogICAgdGhp
        cy5hcnJheVdpbGxDaGFuZ2UoY29udGVudCwgMCwgbGVuKTsKICB9KSwKCiAg
        LyoqCiAgICBAcHJpdmF0ZQoKICAgIENoZWNrIHRvIG1ha2Ugc3VyZSB0aGF0
        IHRoZSBjb250ZW50IGhhcyBjaGFuZ2VkLCBhbmQgaWYgc28sCiAgICB1cGRh
        dGUgdGhlIGNoaWxkcmVuIGRpcmVjdGx5LiBUaGlzIGlzIGFsd2F5cyBzY2hl
        ZHVsZWQKICAgIGFzeW5jaHJvbm91c2x5LCB0byBhbGxvdyB0aGUgZWxlbWVu
        dCB0byBiZSBjcmVhdGVkIGJlZm9yZQogICAgYmluZGluZ3MgaGF2ZSBzeW5j
        aHJvbml6ZWQgYW5kIHZpY2UgdmVyc2EuCgogICAgQG1ldGhvZCBfY29udGVu
        dERpZENoYW5nZQogICovCiAgX2NvbnRlbnREaWRDaGFuZ2U6IEVtYmVyLm9i
        c2VydmVyKCdjb250ZW50JywgZnVuY3Rpb24oKSB7CiAgICB2YXIgY29udGVu
        dCA9IGdldCh0aGlzLCAnY29udGVudCcpOwoKICAgIGlmIChjb250ZW50KSB7
        CiAgICAgIHRoaXMuX2Fzc2VydEFycmF5TGlrZShjb250ZW50KTsKICAgICAg
        Y29udGVudC5hZGRBcnJheU9ic2VydmVyKHRoaXMpOwogICAgfQoKICAgIHZh
        ciBsZW4gPSBjb250ZW50ID8gZ2V0KGNvbnRlbnQsICdsZW5ndGgnKSA6IDA7
        CiAgICB0aGlzLmFycmF5RGlkQ2hhbmdlKGNvbnRlbnQsIDAsIG51bGwsIGxl
        bik7CiAgfSksCgogIC8qKgogICAgQHByaXZhdGUKCiAgICBFbnN1cmUgdGhh
        dCB0aGUgY29udGVudCBpbXBsZW1lbnRzIEVtYmVyLkFycmF5CgogICAgQG1l
        dGhvZCBfYXNzZXJ0QXJyYXlMaWtlCiAgKi8KICBfYXNzZXJ0QXJyYXlMaWtl
        OiBmdW5jdGlvbihjb250ZW50KSB7CiAgICBFbWJlci5hc3NlcnQoZm10KCJh
        biBFbWJlci5Db2xsZWN0aW9uVmlldydzIGNvbnRlbnQgbXVzdCBpbXBsZW1l
        bnQgRW1iZXIuQXJyYXkuIFlvdSBwYXNzZWQgJUAiLCBbY29udGVudF0pLCBF
        bWJlci5BcnJheS5kZXRlY3QoY29udGVudCkpOwogIH0sCgogIC8qKgogICAg
        UmVtb3ZlcyB0aGUgY29udGVudCBhbmQgY29udGVudCBvYnNlcnZlcnMuCgog
        ICAgQG1ldGhvZCBkZXN0cm95CiAgKi8KICBkZXN0cm95OiBmdW5jdGlvbigp
        IHsKICAgIGlmICghdGhpcy5fc3VwZXIoKSkgeyByZXR1cm47IH0KCiAgICB2
        YXIgY29udGVudCA9IGdldCh0aGlzLCAnY29udGVudCcpOwogICAgaWYgKGNv
        bnRlbnQpIHsgY29udGVudC5yZW1vdmVBcnJheU9ic2VydmVyKHRoaXMpOyB9
        CgogICAgaWYgKHRoaXMuX2NyZWF0ZWRFbXB0eVZpZXcpIHsKICAgICAgdGhp
        cy5fY3JlYXRlZEVtcHR5Vmlldy5kZXN0cm95KCk7CiAgICB9CgogICAgcmV0
        dXJuIHRoaXM7CiAgfSwKCiAgLyoqCiAgICBDYWxsZWQgd2hlbiBhIG11dGF0
        aW9uIHRvIHRoZSB1bmRlcmx5aW5nIGNvbnRlbnQgYXJyYXkgd2lsbCBvY2N1
        ci4KCiAgICBUaGlzIG1ldGhvZCB3aWxsIHJlbW92ZSBhbnkgdmlld3MgdGhh
        dCBhcmUgbm8gbG9uZ2VyIGluIHRoZSB1bmRlcmx5aW5nCiAgICBjb250ZW50
        IGFycmF5LgoKICAgIEludm9rZXMgd2hlbmV2ZXIgdGhlIGNvbnRlbnQgYXJy
        YXkgaXRzZWxmIHdpbGwgY2hhbmdlLgoKICAgIEBtZXRob2QgYXJyYXlXaWxs
        Q2hhbmdlCiAgICBAcGFyYW0ge0FycmF5fSBjb250ZW50IHRoZSBtYW5hZ2Vk
        IGNvbGxlY3Rpb24gb2Ygb2JqZWN0cwogICAgQHBhcmFtIHtOdW1iZXJ9IHN0
        YXJ0IHRoZSBpbmRleCBhdCB3aGljaCB0aGUgY2hhbmdlcyB3aWxsIG9jY3Vy
        cgogICAgQHBhcmFtIHtOdW1iZXJ9IHJlbW92ZWQgbnVtYmVyIG9mIG9iamVj
        dCB0byBiZSByZW1vdmVkIGZyb20gY29udGVudAogICovCiAgYXJyYXlXaWxs
        Q2hhbmdlOiBmdW5jdGlvbihjb250ZW50LCBzdGFydCwgcmVtb3ZlZENvdW50
        KSB7CiAgICAvLyBJZiB0aGUgY29udGVudHMgd2VyZSBlbXB0eSBiZWZvcmUg
        YW5kIHRoaXMgdGVtcGxhdGUgY29sbGVjdGlvbiBoYXMgYW4KICAgIC8vIGVt
        cHR5IHZpZXcgcmVtb3ZlIGl0IG5vdy4KICAgIHZhciBlbXB0eVZpZXcgPSBn
        ZXQodGhpcywgJ2VtcHR5VmlldycpOwogICAgaWYgKGVtcHR5VmlldyAmJiBl
        bXB0eVZpZXcgaW5zdGFuY2VvZiBFbWJlci5WaWV3KSB7CiAgICAgIGVtcHR5
        Vmlldy5yZW1vdmVGcm9tUGFyZW50KCk7CiAgICB9CgogICAgLy8gTG9vcCB0
        aHJvdWdoIGNoaWxkIHZpZXdzIHRoYXQgY29ycmVzcG9uZCB3aXRoIHRoZSBy
        ZW1vdmVkIGl0ZW1zLgogICAgLy8gTm90ZSB0aGF0IHdlIGxvb3AgZnJvbSB0
        aGUgZW5kIG9mIHRoZSBhcnJheSB0byB0aGUgYmVnaW5uaW5nIGJlY2F1c2UK
        ICAgIC8vIHdlIGFyZSBtdXRhdGluZyBpdCBhcyB3ZSBnby4KICAgIHZhciBj
        aGlsZFZpZXdzID0gdGhpcy5fY2hpbGRWaWV3cywgY2hpbGRWaWV3LCBpZHgs
        IGxlbjsKCiAgICBsZW4gPSB0aGlzLl9jaGlsZFZpZXdzLmxlbmd0aDsKCiAg
        ICB2YXIgcmVtb3ZpbmdBbGwgPSByZW1vdmVkQ291bnQgPT09IGxlbjsKCiAg
        ICBpZiAocmVtb3ZpbmdBbGwpIHsKICAgICAgdGhpcy5jdXJyZW50U3RhdGUu
        ZW1wdHkodGhpcyk7CiAgICAgIHRoaXMuaW52b2tlUmVjdXJzaXZlbHkoZnVu
        Y3Rpb24odmlldykgewogICAgICAgIHZpZXcucmVtb3ZlZEZyb21ET00gPSB0
        cnVlOwogICAgICB9LCBmYWxzZSk7CiAgICB9CgogICAgZm9yIChpZHggPSBz
        dGFydCArIHJlbW92ZWRDb3VudCAtIDE7IGlkeCA+PSBzdGFydDsgaWR4LS0p
        IHsKICAgICAgY2hpbGRWaWV3ID0gY2hpbGRWaWV3c1tpZHhdOwogICAgICBj
        aGlsZFZpZXcuZGVzdHJveSgpOwogICAgfQogIH0sCgogIC8qKgogICAgQ2Fs
        bGVkIHdoZW4gYSBtdXRhdGlvbiB0byB0aGUgdW5kZXJseWluZyBjb250ZW50
        IGFycmF5IG9jY3Vycy4KCiAgICBUaGlzIG1ldGhvZCB3aWxsIHJlcGxheSB0
        aGF0IG11dGF0aW9uIGFnYWluc3QgdGhlIHZpZXdzIHRoYXQgY29tcG9zZSB0
        aGUKICAgIGBFbWJlci5Db2xsZWN0aW9uVmlld2AsIGVuc3VyaW5nIHRoYXQg
        dGhlIHZpZXcgcmVmbGVjdHMgdGhlIG1vZGVsLgoKICAgIFRoaXMgYXJyYXkg
        b2JzZXJ2ZXIgaXMgYWRkZWQgaW4gYGNvbnRlbnREaWRDaGFuZ2VgLgoKICAg
        IEBtZXRob2QgYXJyYXlEaWRDaGFuZ2UKICAgIEBwYXJhbSB7QXJyYXl9IGNv
        bnRlbnQgdGhlIG1hbmFnZWQgY29sbGVjdGlvbiBvZiBvYmplY3RzCiAgICBA
        cGFyYW0ge051bWJlcn0gc3RhcnQgdGhlIGluZGV4IGF0IHdoaWNoIHRoZSBj
        aGFuZ2VzIG9jY3VycmVkCiAgICBAcGFyYW0ge051bWJlcn0gcmVtb3ZlZCBu
        dW1iZXIgb2Ygb2JqZWN0IHJlbW92ZWQgZnJvbSBjb250ZW50CiAgICBAcGFy
        YW0ge051bWJlcn0gYWRkZWQgbnVtYmVyIG9mIG9iamVjdCBhZGRlZCB0byBj
        b250ZW50CiAgKi8KICBhcnJheURpZENoYW5nZTogZnVuY3Rpb24oY29udGVu
        dCwgc3RhcnQsIHJlbW92ZWQsIGFkZGVkKSB7CiAgICB2YXIgYWRkZWRWaWV3
        cyA9IFtdLCB2aWV3LCBpdGVtLCBpZHgsIGxlbiwgaXRlbVZpZXdDbGFzcywK
        ICAgICAgZW1wdHlWaWV3OwoKICAgIGxlbiA9IGNvbnRlbnQgPyBnZXQoY29u
        dGVudCwgJ2xlbmd0aCcpIDogMDsKCiAgICBpZiAobGVuKSB7CiAgICAgIGl0
        ZW1WaWV3Q2xhc3MgPSBnZXQodGhpcywgJ2l0ZW1WaWV3Q2xhc3MnKTsKCiAg
        ICAgIGlmICgnc3RyaW5nJyA9PT0gdHlwZW9mIGl0ZW1WaWV3Q2xhc3MpIHsK
        ICAgICAgICBpdGVtVmlld0NsYXNzID0gZ2V0KGl0ZW1WaWV3Q2xhc3MpIHx8
        IGl0ZW1WaWV3Q2xhc3M7CiAgICAgIH0KCiAgICAgIEVtYmVyLmFzc2VydChm
        bXQoIml0ZW1WaWV3Q2xhc3MgbXVzdCBiZSBhIHN1YmNsYXNzIG9mIEVtYmVy
        LlZpZXcsIG5vdCAlQCIsIFtpdGVtVmlld0NsYXNzXSksICdzdHJpbmcnID09
        PSB0eXBlb2YgaXRlbVZpZXdDbGFzcyB8fCBFbWJlci5WaWV3LmRldGVjdChp
        dGVtVmlld0NsYXNzKSk7CgogICAgICBmb3IgKGlkeCA9IHN0YXJ0OyBpZHgg
        PCBzdGFydCthZGRlZDsgaWR4KyspIHsKICAgICAgICBpdGVtID0gY29udGVu
        dC5vYmplY3RBdChpZHgpOwoKICAgICAgICB2aWV3ID0gdGhpcy5jcmVhdGVD
        aGlsZFZpZXcoaXRlbVZpZXdDbGFzcywgewogICAgICAgICAgY29udGVudDog
        aXRlbSwKICAgICAgICAgIGNvbnRlbnRJbmRleDogaWR4CiAgICAgICAgfSk7
        CgogICAgICAgIGFkZGVkVmlld3MucHVzaCh2aWV3KTsKICAgICAgfQogICAg
        fSBlbHNlIHsKICAgICAgZW1wdHlWaWV3ID0gZ2V0KHRoaXMsICdlbXB0eVZp
        ZXcnKTsKCiAgICAgIGlmICghZW1wdHlWaWV3KSB7IHJldHVybjsgfQoKICAg
        ICAgaWYgKCdzdHJpbmcnID09PSB0eXBlb2YgZW1wdHlWaWV3KSB7CiAgICAg
        ICAgZW1wdHlWaWV3ID0gZ2V0KGVtcHR5VmlldykgfHwgZW1wdHlWaWV3Owog
        ICAgICB9CgogICAgICBlbXB0eVZpZXcgPSB0aGlzLmNyZWF0ZUNoaWxkVmll
        dyhlbXB0eVZpZXcpOwogICAgICBhZGRlZFZpZXdzLnB1c2goZW1wdHlWaWV3
        KTsKICAgICAgc2V0KHRoaXMsICdlbXB0eVZpZXcnLCBlbXB0eVZpZXcpOwoK
        ICAgICAgaWYgKEVtYmVyLkNvcmVWaWV3LmRldGVjdChlbXB0eVZpZXcpKSB7
        CiAgICAgICAgdGhpcy5fY3JlYXRlZEVtcHR5VmlldyA9IGVtcHR5VmlldzsK
        ICAgICAgfQogICAgfQoKICAgIHRoaXMucmVwbGFjZShzdGFydCwgMCwgYWRk
        ZWRWaWV3cyk7CiAgfSwKCiAgLyoqCiAgICBJbnN0YW50aWF0ZXMgYSB2aWV3
        IHRvIGJlIGFkZGVkIHRvIHRoZSBjaGlsZFZpZXdzIGFycmF5IGR1cmluZyB2
        aWV3CiAgICBpbml0aWFsaXphdGlvbi4gWW91IGdlbmVyYWxseSB3aWxsIG5v
        dCBjYWxsIHRoaXMgbWV0aG9kIGRpcmVjdGx5IHVubGVzcwogICAgeW91IGFy
        ZSBvdmVycmlkaW5nIGBjcmVhdGVDaGlsZFZpZXdzKClgLiBOb3RlIHRoYXQg
        dGhpcyBtZXRob2Qgd2lsbAogICAgYXV0b21hdGljYWxseSBjb25maWd1cmUg
        dGhlIGNvcnJlY3Qgc2V0dGluZ3Mgb24gdGhlIG5ldyB2aWV3IGluc3RhbmNl
        IHRvCiAgICBhY3QgYXMgYSBjaGlsZCBvZiB0aGUgcGFyZW50LgoKICAgIFRo
        ZSB0YWcgbmFtZSBmb3IgdGhlIHZpZXcgd2lsbCBiZSBzZXQgdG8gdGhlIHRh
        Z05hbWUgb2YgdGhlIHZpZXdDbGFzcwogICAgcGFzc2VkIGluLgoKICAgIEBt
        ZXRob2QgY3JlYXRlQ2hpbGRWaWV3CiAgICBAcGFyYW0ge0NsYXNzfSB2aWV3
        Q2xhc3MKICAgIEBwYXJhbSB7SGFzaH0gW2F0dHJzXSBBdHRyaWJ1dGVzIHRv
        IGFkZAogICAgQHJldHVybiB7RW1iZXIuVmlld30gbmV3IGluc3RhbmNlCiAg
        Ki8KICBjcmVhdGVDaGlsZFZpZXc6IGZ1bmN0aW9uKHZpZXcsIGF0dHJzKSB7
        CiAgICB2aWV3ID0gdGhpcy5fc3VwZXIodmlldywgYXR0cnMpOwoKICAgIHZh
        ciBpdGVtVGFnTmFtZSA9IGdldCh2aWV3LCAndGFnTmFtZScpOwoKICAgIGlm
        IChpdGVtVGFnTmFtZSA9PT0gbnVsbCB8fCBpdGVtVGFnTmFtZSA9PT0gdW5k
        ZWZpbmVkKSB7CiAgICAgIGl0ZW1UYWdOYW1lID0gRW1iZXIuQ29sbGVjdGlv
        blZpZXcuQ09OVEFJTkVSX01BUFtnZXQodGhpcywgJ3RhZ05hbWUnKV07CiAg
        ICAgIHNldCh2aWV3LCAndGFnTmFtZScsIGl0ZW1UYWdOYW1lKTsKICAgIH0K
        CiAgICByZXR1cm4gdmlldzsKICB9Cn0pOwoKLyoqCiAgQSBtYXAgb2YgcGFy
        ZW50IHRhZ3MgdG8gdGhlaXIgZGVmYXVsdCBjaGlsZCB0YWdzLiBZb3UgY2Fu
        IGFkZAogIGFkZGl0aW9uYWwgcGFyZW50IHRhZ3MgaWYgeW91IHdhbnQgY29s
        bGVjdGlvbiB2aWV3cyB0aGF0IHVzZQogIGEgcGFydGljdWxhciBwYXJlbnQg
        dGFnIHRvIGRlZmF1bHQgdG8gYSBjaGlsZCB0YWcuCgogIEBwcm9wZXJ0eSBD
        T05UQUlORVJfTUFQCiAgQHR5cGUgSGFzaAogIEBzdGF0aWMKICBAZmluYWwK
        Ki8KRW1iZXIuQ29sbGVjdGlvblZpZXcuQ09OVEFJTkVSX01BUCA9IHsKICB1
        bDogJ2xpJywKICBvbDogJ2xpJywKICB0YWJsZTogJ3RyJywKICB0aGVhZDog
        J3RyJywKICB0Ym9keTogJ3RyJywKICB0Zm9vdDogJ3RyJywKICB0cjogJ3Rk
        JywKICBzZWxlY3Q6ICdvcHRpb24nCn07Cgp9KSgpOwoKCgooZnVuY3Rpb24o
        KSB7CnZhciBnZXQgPSBFbWJlci5nZXQsIHNldCA9IEVtYmVyLnNldCwgaXNO
        b25lID0gRW1iZXIuaXNOb25lLAogICAgYV9zbGljZSA9IEFycmF5LnByb3Rv
        dHlwZS5zbGljZTsKCgovKioKQG1vZHVsZSBlbWJlcgpAc3VibW9kdWxlIGVt
        YmVyLXZpZXdzCiovCgovKioKICBBbiBgRW1iZXIuQ29tcG9uZW50YCBpcyBh
        IHZpZXcgdGhhdCBpcyBjb21wbGV0ZWx5CiAgaXNvbGF0ZWQuIFByb3BlcnR5
        IGFjY2VzcyBpbiBpdHMgdGVtcGxhdGVzIGdvCiAgdG8gdGhlIHZpZXcgb2Jq
        ZWN0IGFuZCBhY3Rpb25zIGFyZSB0YXJnZXRlZCBhdAogIHRoZSB2aWV3IG9i
        amVjdC4gVGhlcmUgaXMgbm8gYWNjZXNzIHRvIHRoZQogIHN1cnJvdW5kaW5n
        IGNvbnRleHQgb3Igb3V0ZXIgY29udHJvbGxlcjsgYWxsCiAgY29udGV4dHVh
        bCBpbmZvcm1hdGlvbiBpcyBwYXNzZWQgaW4uCgogIFRoZSBlYXNpZXN0IHdh
        eSB0byBjcmVhdGUgYW4gYEVtYmVyLkNvbXBvbmVudGAgaXMgdmlhCiAgYSB0
        ZW1wbGF0ZS4gSWYgeW91IG5hbWUgYSB0ZW1wbGF0ZQogIGBjb21wb25lbnRz
        L215LWZvb2AsIHlvdSB3aWxsIGJlIGFibGUgdG8gdXNlCiAgYHt7bXktZm9v
        fX1gIGluIG90aGVyIHRlbXBsYXRlcywgd2hpY2ggd2lsbCBtYWtlCiAgYW4g
        aW5zdGFuY2Ugb2YgdGhlIGlzb2xhdGVkIGNvbXBvbmVudC4KCiAgYGBgaHRt
        bAogIHt7YXBwLXByb2ZpbGUgcGVyc29uPWN1cnJlbnRVc2VyfX0KICBgYGAK
        CiAgYGBgaHRtbAogIDwhLS0gYXBwLXByb2ZpbGUgdGVtcGxhdGUgLS0+CiAg
        PGgxPnt7cGVyc29uLnRpdGxlfX08L2gxPgogIDxpbWcge3tiaW5kLWF0dHIg
        c3JjPXBlcnNvbi5hdmF0YXJ9fT4KICA8cCBjbGFzcz0nc2lnbmF0dXJlJz57
        e3BlcnNvbi5zaWduYXR1cmV9fTwvcD4KICBgYGAKCiAgWW91IGNhbiBhbHNv
        IHVzZSBgeWllbGRgIGluc2lkZSBhIHRlbXBsYXRlIHRvCiAgaW5jbHVkZSB0
        aGUgKipjb250ZW50cyoqIG9mIHRoZSBjdXN0b20gdGFnOgoKICBgYGBodG1s
        CiAge3sjYXBwLXByb2ZpbGUgcGVyc29uPWN1cnJlbnRVc2VyfX0KICAgIDxw
        PkFkbWluIG1vZGU8L3A+CiAge3svYXBwLXByb2ZpbGV9fQogIGBgYAoKICBg
        YGBodG1sCiAgPCEtLSBhcHAtcHJvZmlsZSB0ZW1wbGF0ZSAtLT4KICA8aDE+
        e3twZXJzb24udGl0bGV9fTwvaDE+CiAge3t5aWVsZH19IDwhLS0gYmxvY2sg
        Y29udGVudHMgLS0+CiAgYGBgCgogIElmIHlvdSB3YW50IHRvIGN1c3RvbWl6
        ZSB0aGUgY29tcG9uZW50LCBpbiBvcmRlciB0bwogIGhhbmRsZSBldmVudHMg
        b3IgYWN0aW9ucywgeW91IGltcGxlbWVudCBhIHN1YmNsYXNzCiAgb2YgYEVt
        YmVyLkNvbXBvbmVudGAgbmFtZWQgYWZ0ZXIgdGhlIG5hbWUgb2YgdGhlCiAg
        Y29tcG9uZW50LiBOb3RlIHRoYXQgYENvbXBvbmVudGAgbmVlZHMgdG8gYmUg
        YXBwZW5kZWQgdG8gdGhlIG5hbWUgb2YKICB5b3VyIHN1YmNsYXNzIGxpa2Ug
        YEFwcFByb2ZpbGVDb21wb25lbnRgLgoKICBGb3IgZXhhbXBsZSwgeW91IGNv
        dWxkIGltcGxlbWVudCB0aGUgYWN0aW9uCiAgYGhlbGxvYCBmb3IgdGhlIGBh
        cHAtcHJvZmlsZWAgY29tcG9uZW50OgoKICBgYGBqYXZhc2NyaXB0CiAgQXBw
        LkFwcFByb2ZpbGVDb21wb25lbnQgPSBFbWJlci5Db21wb25lbnQuZXh0ZW5k
        KHsKICAgIGFjdGlvbnM6IHsKICAgICAgaGVsbG86IGZ1bmN0aW9uKG5hbWUp
        IHsKICAgICAgICBjb25zb2xlLmxvZygiSGVsbG8iLCBuYW1lKTsKICAgICAg
        fQogICAgfQogIH0pOwogIGBgYAoKICBBbmQgdGhlbiB1c2UgaXQgaW4gdGhl
        IGNvbXBvbmVudCdzIHRlbXBsYXRlOgoKICBgYGBodG1sCiAgPCEtLSBhcHAt
        cHJvZmlsZSB0ZW1wbGF0ZSAtLT4KCiAgPGgxPnt7cGVyc29uLnRpdGxlfX08
        L2gxPgogIHt7eWllbGR9fSA8IS0tIGJsb2NrIGNvbnRlbnRzIC0tPgoKICA8
        YnV0dG9uIHt7YWN0aW9uICdoZWxsbycgcGVyc29uLm5hbWV9fT4KICAgIFNh
        eSBIZWxsbyB0byB7e3BlcnNvbi5uYW1lfX0KICA8L2J1dHRvbj4KICBgYGAK
        CiAgQ29tcG9uZW50cyBtdXN0IGhhdmUgYSBgLWAgaW4gdGhlaXIgbmFtZSB0
        byBhdm9pZAogIGNvbmZsaWN0cyB3aXRoIGJ1aWx0LWluIGNvbnRyb2xzIHRo
        YXQgd3JhcCBIVE1MCiAgZWxlbWVudHMuIFRoaXMgaXMgY29uc2lzdGVudCB3
        aXRoIHRoZSBzYW1lCiAgcmVxdWlyZW1lbnQgaW4gd2ViIGNvbXBvbmVudHMu
        CgogIEBjbGFzcyBDb21wb25lbnQKICBAbmFtZXNwYWNlIEVtYmVyCiAgQGV4
        dGVuZHMgRW1iZXIuVmlldwoqLwpFbWJlci5Db21wb25lbnQgPSBFbWJlci5W
        aWV3LmV4dGVuZChFbWJlci5UYXJnZXRBY3Rpb25TdXBwb3J0LCB7CiAgaW5p
        dDogZnVuY3Rpb24oKSB7CiAgICB0aGlzLl9zdXBlcigpOwogICAgc2V0KHRo
        aXMsICdjb250ZXh0JywgdGhpcyk7CiAgICBzZXQodGhpcywgJ2NvbnRyb2xs
        ZXInLCB0aGlzKTsKICB9LAoKICAvLyBkdXJpbmcgcmVuZGVyLCBpc29sYXRl
        IGtleXdvcmRzCiAgY2xvbmVLZXl3b3JkczogZnVuY3Rpb24oKSB7CiAgICBy
        ZXR1cm4gewogICAgICB2aWV3OiB0aGlzLAogICAgICBjb250cm9sbGVyOiB0
        aGlzCiAgICB9OwogIH0sCgogIF95aWVsZDogZnVuY3Rpb24oY29udGV4dCwg
        b3B0aW9ucykgewogICAgdmFyIHZpZXcgPSBvcHRpb25zLmRhdGEudmlldywK
        ICAgICAgICBwYXJlbnRWaWV3ID0gdGhpcy5fcGFyZW50VmlldywKICAgICAg
        ICB0ZW1wbGF0ZSA9IGdldCh0aGlzLCAndGVtcGxhdGUnKTsKCiAgICBpZiAo
        dGVtcGxhdGUpIHsKICAgICAgRW1iZXIuYXNzZXJ0KCJBIENvbXBvbmVudCBt
        dXN0IGhhdmUgYSBwYXJlbnQgdmlldyBpbiBvcmRlciB0byB5aWVsZC4iLCBw
        YXJlbnRWaWV3KTsKCiAgICAgIHZpZXcuYXBwZW5kQ2hpbGQoRW1iZXIuVmll
        dywgewogICAgICAgIGlzVmlydHVhbDogdHJ1ZSwKICAgICAgICB0YWdOYW1l
        OiAnJywKICAgICAgICBfY29udGV4dFZpZXc6IHBhcmVudFZpZXcsCiAgICAg
        ICAgdGVtcGxhdGU6IHRlbXBsYXRlLAogICAgICAgIGNvbnRleHQ6IGdldChw
        YXJlbnRWaWV3LCAnY29udGV4dCcpLAogICAgICAgIGNvbnRyb2xsZXI6IGdl
        dChwYXJlbnRWaWV3LCAnY29udHJvbGxlcicpLAogICAgICAgIHRlbXBsYXRl
        RGF0YTogeyBrZXl3b3JkczogcGFyZW50Vmlldy5jbG9uZUtleXdvcmRzKCkg
        fQogICAgICB9KTsKICAgIH0KICB9LAoKICAvKioKICAgIElmIHRoZSBjb21w
        b25lbnQgaXMgY3VycmVudGx5IGluc2VydGVkIGludG8gdGhlIERPTSBvZiBh
        IHBhcmVudCB2aWV3LCB0aGlzCiAgICBwcm9wZXJ0eSB3aWxsIHBvaW50IHRv
        IHRoZSBjb250cm9sbGVyIG9mIHRoZSBwYXJlbnQgdmlldy4KCiAgICBAcHJv
        cGVydHkgdGFyZ2V0T2JqZWN0CiAgICBAdHlwZSBFbWJlci5Db250cm9sbGVy
        CiAgICBAZGVmYXVsdCBudWxsCiAgKi8KICB0YXJnZXRPYmplY3Q6IEVtYmVy
        LmNvbXB1dGVkKGZ1bmN0aW9uKGtleSkgewogICAgdmFyIHBhcmVudFZpZXcg
        PSBnZXQodGhpcywgJ19wYXJlbnRWaWV3Jyk7CiAgICByZXR1cm4gcGFyZW50
        VmlldyA/IGdldChwYXJlbnRWaWV3LCAnY29udHJvbGxlcicpIDogbnVsbDsK
        ICB9KS5wcm9wZXJ0eSgnX3BhcmVudFZpZXcnKSwKCiAgLyoqCiAgICBTZW5k
        cyBhbiBhY3Rpb24gdG8gY29tcG9uZW50J3MgY29udHJvbGxlci4gQSBjb21w
        b25lbnQgaW5oZXJpdHMgaXRzCiAgICBjb250cm9sbGVyIGZyb20gdGhlIGNv
        bnRleHQgaW4gd2hpY2ggaXQgaXMgdXNlZC4KCiAgICBCeSBkZWZhdWx0LCBj
        YWxsaW5nIGBzZW5kQWN0aW9uKClgIHdpbGwgc2VuZCBhbiBhY3Rpb24gd2l0
        aCB0aGUgbmFtZQogICAgb2YgdGhlIGNvbXBvbmVudCdzIGBhY3Rpb25gIHBy
        b3BlcnR5LgoKICAgIEZvciBleGFtcGxlLCBpZiB0aGUgY29tcG9uZW50IGhh
        ZCBhIHByb3BlcnR5IGBhY3Rpb25gIHdpdGggdGhlIHZhbHVlCiAgICBgImFk
        ZEl0ZW0iYCwgY2FsbGluZyBgc2VuZEFjdGlvbigpYCB3b3VsZCBzZW5kIHRo
        ZSBgYWRkSXRlbWAgYWN0aW9uCiAgICB0byB0aGUgY29tcG9uZW50J3MgY29u
        dHJvbGxlci4KCiAgICBJZiB5b3UgcHJvdmlkZSB0aGUgYGFjdGlvbmAgYXJn
        dW1lbnQgdG8gYHNlbmRBY3Rpb24oKWAsIHRoYXQga2V5IHdpbGwKICAgIGJl
        IHVzZWQgdG8gbG9vayB1cCB0aGUgYWN0aW9uIG5hbWUuCgogICAgRm9yIGV4
        YW1wbGUsIGlmIHRoZSBjb21wb25lbnQgaGFkIGEgcHJvcGVydHkgYHBsYXlp
        bmdgIHdpdGggdGhlIHZhbHVlCiAgICBgZGlkU3RhcnRQbGF5aW5nYCwgY2Fs
        bGluZyBgc2VuZEFjdGlvbigncGxheWluZycpYCB3b3VsZCBzZW5kIHRoZQog
        ICAgYGRpZFN0YXJ0UGxheWluZ2AgYWN0aW9uIHRvIHRoZSBjb21wb25lbnQn
        cyBjb250cm9sbGVyLgoKICAgIFdoZXRoZXIgb3Igbm90IHlvdSBhcmUgdXNp
        bmcgdGhlIGRlZmF1bHQgYWN0aW9uIG9yIGEgbmFtZWQgYWN0aW9uLCBpZgog
        ICAgdGhlIGFjdGlvbiBuYW1lIGlzIG5vdCBkZWZpbmVkIG9uIHRoZSBjb21w
        b25lbnQsIGNhbGxpbmcgYHNlbmRBY3Rpb24oKWAKICAgIGRvZXMgbm90IGhh
        dmUgYW55IGVmZmVjdC4KCiAgICBGb3IgZXhhbXBsZSwgaWYgeW91IGNhbGwg
        YHNlbmRBY3Rpb24oKWAgb24gYSBjb21wb25lbnQgdGhhdCBkb2VzIG5vdCBo
        YXZlCiAgICBhbiBgYWN0aW9uYCBwcm9wZXJ0eSBkZWZpbmVkLCBubyBhY3Rp
        b24gd2lsbCBiZSBzZW50IHRvIHRoZSBjb250cm9sbGVyLAogICAgbm9yIHdp
        bGwgYW4gZXhjZXB0aW9uIGJlIHJhaXNlZC4KCiAgICBZb3UgY2FuIHNlbmQg
        YSBjb250ZXh0IG9iamVjdCB3aXRoIHRoZSBhY3Rpb24gYnkgc3VwcGx5aW5n
        IHRoZSBgY29udGV4dGAKICAgIGFyZ3VtZW50LiBUaGUgY29udGV4dCB3aWxs
        IGJlIHN1cHBsaWVkIGFzIHRoZSBmaXJzdCBhcmd1bWVudCBpbiB0aGUKICAg
        IHRhcmdldCdzIGFjdGlvbiBtZXRob2QuIEV4YW1wbGU6CgogICAgYGBgamF2
        YXNjcmlwdAogICAgQXBwLk15VHJlZUNvbXBvbmVudCA9IEVtYmVyLkNvbXBv
        bmVudC5leHRlbmQoewogICAgICBjbGljazogZnVuY3Rpb24oKSB7CiAgICAg
        ICAgdGhpcy5zZW5kQWN0aW9uKCdkaWRDbGlja1RyZWVOb2RlJywgdGhpcy5n
        ZXQoJ25vZGUnKSk7CiAgICAgIH0KICAgIH0pOwoKICAgIEFwcC5DYXRlZ29y
        aWVzQ29udHJvbGxlciA9IEVtYmVyLkNvbnRyb2xsZXIuZXh0ZW5kKHsKICAg
        ICAgYWN0aW9uczogewogICAgICAgIGRpZENsaWNrQ2F0ZWdvcnk6IGZ1bmN0
        aW9uKGNhdGVnb3J5KSB7CiAgICAgICAgICAvL0RvIHNvbWV0aGluZyB3aXRo
        IHRoZSBub2RlL2NhdGVnb3J5IHRoYXQgd2FzIGNsaWNrZWQKICAgICAgICB9
        CiAgICAgIH0KICAgIH0pOwogICAgYGBgCgogICAgYGBgaGFuZGxlYmFycwog
        ICAge3shIGNhdGVnb3JpZXMuaGJzfX0KICAgIHt7bXktdHJlZSBkaWRDbGlj
        a1RyZWVOb2RlPSdkaWRDbGlja0NhdGVnb3J5J319CiAgICBgYGAKCiAgICBA
        bWV0aG9kIHNlbmRBY3Rpb24KICAgIEBwYXJhbSBbYWN0aW9uXSB7U3RyaW5n
        fSB0aGUgYWN0aW9uIHRvIHRyaWdnZXIKICAgIEBwYXJhbSBbY29udGV4dF0g
        eyp9IGEgY29udGV4dCB0byBzZW5kIHdpdGggdGhlIGFjdGlvbgogICovCiAg
        c2VuZEFjdGlvbjogZnVuY3Rpb24oYWN0aW9uKSB7CiAgICB2YXIgYWN0aW9u
        TmFtZSwKICAgICAgICBjb250ZXh0cyA9IGFfc2xpY2UuY2FsbChhcmd1bWVu
        dHMsIDEpOwoKICAgIC8vIFNlbmQgdGhlIGRlZmF1bHQgYWN0aW9uCiAgICBp
        ZiAoYWN0aW9uID09PSB1bmRlZmluZWQpIHsKICAgICAgYWN0aW9uTmFtZSA9
        IGdldCh0aGlzLCAnYWN0aW9uJyk7CiAgICAgIEVtYmVyLmFzc2VydCgiVGhl
        IGRlZmF1bHQgYWN0aW9uIHdhcyB0cmlnZ2VyZWQgb24gdGhlIGNvbXBvbmVu
        dCAiICsgdGhpcy50b1N0cmluZygpICsgIiwgYnV0IHRoZSBhY3Rpb24gbmFt
        ZSAoIiArIGFjdGlvbk5hbWUgKyAiKSB3YXMgbm90IGEgc3RyaW5nLiIsIGlz
        Tm9uZShhY3Rpb25OYW1lKSB8fCB0eXBlb2YgYWN0aW9uTmFtZSA9PT0gJ3N0
        cmluZycpOwogICAgfSBlbHNlIHsKICAgICAgYWN0aW9uTmFtZSA9IGdldCh0
        aGlzLCBhY3Rpb24pOwogICAgICBFbWJlci5hc3NlcnQoIlRoZSAiICsgYWN0
        aW9uICsgIiBhY3Rpb24gd2FzIHRyaWdnZXJlZCBvbiB0aGUgY29tcG9uZW50
        ICIgKyB0aGlzLnRvU3RyaW5nKCkgKyAiLCBidXQgdGhlIGFjdGlvbiBuYW1l
        ICgiICsgYWN0aW9uTmFtZSArICIpIHdhcyBub3QgYSBzdHJpbmcuIiwgaXNO
        b25lKGFjdGlvbk5hbWUpIHx8IHR5cGVvZiBhY3Rpb25OYW1lID09PSAnc3Ry
        aW5nJyk7CiAgICB9CgogICAgLy8gSWYgbm8gYWN0aW9uIG5hbWUgZm9yIHRo
        YXQgYWN0aW9uIGNvdWxkIGJlIGZvdW5kLCBqdXN0IGFib3J0LgogICAgaWYg
        KGFjdGlvbk5hbWUgPT09IHVuZGVmaW5lZCkgeyByZXR1cm47IH0KCiAgICB0
        aGlzLnRyaWdnZXJBY3Rpb24oewogICAgICBhY3Rpb246IGFjdGlvbk5hbWUs
        CiAgICAgIGFjdGlvbkNvbnRleHQ6IGNvbnRleHRzCiAgICB9KTsKICB9Cn0p
        OwoKfSkoKTsKCgoKKGZ1bmN0aW9uKCkgewoKfSkoKTsKCgoKKGZ1bmN0aW9u
        KCkgewovKioKYEVtYmVyLlZpZXdUYXJnZXRBY3Rpb25TdXBwb3J0YCBpcyBh
        IG1peGluIHRoYXQgY2FuIGJlIGluY2x1ZGVkIGluIGEKdmlldyBjbGFzcyB0
        byBhZGQgYSBgdHJpZ2dlckFjdGlvbmAgbWV0aG9kIHdpdGggc2VtYW50aWNz
        IHNpbWlsYXIgdG8KdGhlIEhhbmRsZWJhcnMgYHt7YWN0aW9ufX1gIGhlbHBl
        ci4gSXQgcHJvdmlkZXMgaW50ZWxsaWdlbnQgZGVmYXVsdHMKZm9yIHRoZSBh
        Y3Rpb24ncyB0YXJnZXQ6IHRoZSB2aWV3J3MgY29udHJvbGxlcjsgYW5kIHRo
        ZSBjb250ZXh0IHRoYXQgaXMKc2VudCB3aXRoIHRoZSBhY3Rpb246IHRoZSB2
        aWV3J3MgY29udGV4dC4KCk5vdGU6IEluIG5vcm1hbCBFbWJlciB1c2FnZSwg
        dGhlIGB7e2FjdGlvbn19YCBoZWxwZXIgaXMgdXN1YWxseSB0aGUgYmVzdApj
        aG9pY2UuIFRoaXMgbWl4aW4gaXMgbW9zdCBvZnRlbiB1c2VmdWwgd2hlbiB5
        b3UgYXJlIGRvaW5nIG1vcmUgY29tcGxleApldmVudCBoYW5kbGluZyBpbiBj
        dXN0b20gVmlldyBzdWJjbGFzc2VzLgoKRm9yIGV4YW1wbGU6CgpgYGBqYXZh
        c2NyaXB0CkFwcC5TYXZlQnV0dG9uVmlldyA9IEVtYmVyLlZpZXcuZXh0ZW5k
        KEVtYmVyLlZpZXdUYXJnZXRBY3Rpb25TdXBwb3J0LCB7CiAgYWN0aW9uOiAn
        c2F2ZScsCiAgY2xpY2s6IGZ1bmN0aW9uKCkgewogICAgdGhpcy50cmlnZ2Vy
        QWN0aW9uKCk7IC8vIFNlbmRzIHRoZSBgc2F2ZWAgYWN0aW9uLCBhbG9uZyB3
        aXRoIHRoZSBjdXJyZW50IGNvbnRleHQKICAgICAgICAgICAgICAgICAgICAg
        ICAgICAvLyB0byB0aGUgY3VycmVudCBjb250cm9sbGVyCiAgfQp9KTsKYGBg
        CgpUaGUgYGFjdGlvbmAgY2FuIGJlIHByb3ZpZGVkIGFzIHByb3BlcnRpZXMg
        b2YgYW4gb3B0aW9uYWwgb2JqZWN0IGFyZ3VtZW50CnRvIGB0cmlnZ2VyQWN0
        aW9uYCBhcyB3ZWxsLgoKYGBgamF2YXNjcmlwdApBcHAuU2F2ZUJ1dHRvblZp
        ZXcgPSBFbWJlci5WaWV3LmV4dGVuZChFbWJlci5WaWV3VGFyZ2V0QWN0aW9u
        U3VwcG9ydCwgewogIGNsaWNrOiBmdW5jdGlvbigpIHsKICAgIHRoaXMudHJp
        Z2dlckFjdGlvbih7CiAgICAgIGFjdGlvbjogJ3NhdmUnCiAgICB9KTsgLy8g
        U2VuZHMgdGhlIGBzYXZlYCBhY3Rpb24sIGFsb25nIHdpdGggdGhlIGN1cnJl
        bnQgY29udGV4dAogICAgICAgIC8vIHRvIHRoZSBjdXJyZW50IGNvbnRyb2xs
        ZXIKICB9Cn0pOwpgYGAKCkBjbGFzcyBWaWV3VGFyZ2V0QWN0aW9uU3VwcG9y
        dApAbmFtZXNwYWNlIEVtYmVyCkBleHRlbmRzIEVtYmVyLlRhcmdldEFjdGlv
        blN1cHBvcnQKKi8KRW1iZXIuVmlld1RhcmdldEFjdGlvblN1cHBvcnQgPSBF
        bWJlci5NaXhpbi5jcmVhdGUoRW1iZXIuVGFyZ2V0QWN0aW9uU3VwcG9ydCwg
        ewogIC8qKgogIEBwcm9wZXJ0eSB0YXJnZXQKICAqLwogIHRhcmdldDogRW1i
        ZXIuY29tcHV0ZWQuYWxpYXMoJ2NvbnRyb2xsZXInKSwKICAvKioKICBAcHJv
        cGVydHkgYWN0aW9uQ29udGV4dAogICovCiAgYWN0aW9uQ29udGV4dDogRW1i
        ZXIuY29tcHV0ZWQuYWxpYXMoJ2NvbnRleHQnKQp9KTsKCn0pKCk7CgoKCihm
        dW5jdGlvbigpIHsKCn0pKCk7CgoKCihmdW5jdGlvbigpIHsKLyoqCkVtYmVy
        IFZpZXdzCgpAbW9kdWxlIGVtYmVyCkBzdWJtb2R1bGUgZW1iZXItdmlld3MK
        QHJlcXVpcmVzIGVtYmVyLXJ1bnRpbWUKQG1haW4gZW1iZXItdmlld3MKKi8K
        Cn0pKCk7CgooZnVuY3Rpb24oKSB7CmRlZmluZSgibWV0YW1vcnBoIiwKICBb
        XSwKICBmdW5jdGlvbigpIHsKICAgICJ1c2Ugc3RyaWN0IjsKICAgIC8vID09
        PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
        PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAgICAvLyBQcm9qZWN0OiAg
        IG1ldGFtb3JwaAogICAgLy8gQ29weXJpZ2h0OiDCqTIwMTEgTXkgQ29tcGFu
        eSBJbmMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuCiAgICAvLyA9PT09PT09PT09
        PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
        PT09PT09PT09PT09PT09PT09PQoKICAgIHZhciBLID0gZnVuY3Rpb24oKSB7
        fSwKICAgICAgICBndWlkID0gMCwKICAgICAgICBkb2N1bWVudCA9IHRoaXMu
        ZG9jdW1lbnQsCiAgICAgICAgZGlzYWJsZVJhbmdlID0gKCd1bmRlZmluZWQn
        ID09PSB0eXBlb2YgRU5WID8ge30gOiBFTlYpLkRJU0FCTEVfUkFOR0VfQVBJ
        LAoKICAgICAgICAvLyBGZWF0dXJlLWRldGVjdCB0aGUgVzNDIHJhbmdlIEFQ
        SSwgdGhlIGV4dGVuZGVkIGNoZWNrIGlzIGZvciBJRTkgd2hpY2ggb25seSBw
        YXJ0aWFsbHkgc3VwcG9ydHMgcmFuZ2VzCiAgICAgICAgc3VwcG9ydHNSYW5n
        ZSA9ICghZGlzYWJsZVJhbmdlKSAmJiBkb2N1bWVudCAmJiAoJ2NyZWF0ZVJh
        bmdlJyBpbiBkb2N1bWVudCkgJiYgKHR5cGVvZiBSYW5nZSAhPT0gJ3VuZGVm
        aW5lZCcpICYmIFJhbmdlLnByb3RvdHlwZS5jcmVhdGVDb250ZXh0dWFsRnJh
        Z21lbnQsCgogICAgICAgIC8vIEludGVybmV0IEV4cGxvcmVyIHByaW9yIHRv
        IDkgZG9lcyBub3QgYWxsb3cgc2V0dGluZyBpbm5lckhUTUwgaWYgdGhlIGZp
        cnN0IGVsZW1lbnQKICAgICAgICAvLyBpcyBhICJ6ZXJvLXNjb3BlIiBlbGVt
        ZW50LiBUaGlzIHByb2JsZW0gY2FuIGJlIHdvcmtlZCBhcm91bmQgYnkgbWFr
        aW5nCiAgICAgICAgLy8gdGhlIGZpcnN0IG5vZGUgYW4gaW52aXNpYmxlIHRl
        eHQgbm9kZS4gV2UsIGxpa2UgTW9kZXJuaXpyLCB1c2UgJnNoeTsKICAgICAg
        ICBuZWVkc1NoeSA9IGRvY3VtZW50ICYmIChmdW5jdGlvbigpIHsKICAgICAg
        ICAgIHZhciB0ZXN0RWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYn
        KTsKICAgICAgICAgIHRlc3RFbC5pbm5lckhUTUwgPSAiPGRpdj48L2Rpdj4i
        OwogICAgICAgICAgdGVzdEVsLmZpcnN0Q2hpbGQuaW5uZXJIVE1MID0gIjxz
        Y3JpcHQ+PC9zY3JpcHQ+IjsKICAgICAgICAgIHJldHVybiB0ZXN0RWwuZmly
        c3RDaGlsZC5pbm5lckhUTUwgPT09ICcnOwogICAgICAgIH0pKCksCgoKICAg
        ICAgICAvLyBJRSA4IChhbmQgbGlrZWx5IGVhcmxpZXIpIGxpa2VzIHRvIG1v
        dmUgd2hpdGVzcGFjZSBwcmVjZWVkaW5nCiAgICAgICAgLy8gYSBzY3JpcHQg
        dGFnIHRvIGFwcGVhciBhZnRlciBpdC4gVGhpcyBtZWFucyB0aGF0IHdlIGNh
        bgogICAgICAgIC8vIGFjY2lkZW50YWxseSByZW1vdmUgd2hpdGVzcGFjZSB3
        aGVuIHVwZGF0aW5nIGEgbW9ycGguCiAgICAgICAgbW92ZXNXaGl0ZXNwYWNl
        ID0gZG9jdW1lbnQgJiYgKGZ1bmN0aW9uKCkgewogICAgICAgICAgdmFyIHRl
        c3RFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICAg
        ICAgdGVzdEVsLmlubmVySFRNTCA9ICJUZXN0OiA8c2NyaXB0IHR5cGU9J3Rl
        eHQveC1wbGFjZWhvbGRlcic+PC9zY3JpcHQ+VmFsdWUiOwogICAgICAgICAg
        cmV0dXJuIHRlc3RFbC5jaGlsZE5vZGVzWzBdLm5vZGVWYWx1ZSA9PT0gJ1Rl
        c3Q6JyAmJgogICAgICAgICAgICAgICAgICB0ZXN0RWwuY2hpbGROb2Rlc1sy
        XS5ub2RlVmFsdWUgPT09ICcgVmFsdWUnOwogICAgICAgIH0pKCk7CgogICAg
        Ly8gQ29uc3RydWN0b3IgdGhhdCBzdXBwb3J0cyBlaXRoZXIgTWV0YW1vcnBo
        KCdmb28nKSBvciBuZXcKICAgIC8vIE1ldGFtb3JwaCgnZm9vJyk7CiAgICAv
        LwogICAgLy8gVGFrZXMgYSBzdHJpbmcgb2YgSFRNTCBhcyB0aGUgYXJndW1l
        bnQuCgogICAgdmFyIE1ldGFtb3JwaCA9IGZ1bmN0aW9uKGh0bWwpIHsKICAg
        ICAgdmFyIHNlbGY7CgogICAgICBpZiAodGhpcyBpbnN0YW5jZW9mIE1ldGFt
        b3JwaCkgewogICAgICAgIHNlbGYgPSB0aGlzOwogICAgICB9IGVsc2Ugewog
        ICAgICAgIHNlbGYgPSBuZXcgSygpOwogICAgICB9CgogICAgICBzZWxmLmlu
        bmVySFRNTCA9IGh0bWw7CiAgICAgIHZhciBteUd1aWQgPSAnbWV0YW1vcnBo
        LScrKGd1aWQrKyk7CiAgICAgIHNlbGYuc3RhcnQgPSBteUd1aWQgKyAnLXN0
        YXJ0JzsKICAgICAgc2VsZi5lbmQgPSBteUd1aWQgKyAnLWVuZCc7CgogICAg
        ICByZXR1cm4gc2VsZjsKICAgIH07CgogICAgSy5wcm90b3R5cGUgPSBNZXRh
        bW9ycGgucHJvdG90eXBlOwoKICAgIHZhciByYW5nZUZvciwgaHRtbEZ1bmMs
        IHJlbW92ZUZ1bmMsIG91dGVySFRNTEZ1bmMsIGFwcGVuZFRvRnVuYywgYWZ0
        ZXJGdW5jLCBwcmVwZW5kRnVuYywgc3RhcnRUYWdGdW5jLCBlbmRUYWdGdW5j
        OwoKICAgIG91dGVySFRNTEZ1bmMgPSBmdW5jdGlvbigpIHsKICAgICAgcmV0
        dXJuIHRoaXMuc3RhcnRUYWcoKSArIHRoaXMuaW5uZXJIVE1MICsgdGhpcy5l
        bmRUYWcoKTsKICAgIH07CgogICAgc3RhcnRUYWdGdW5jID0gZnVuY3Rpb24o
        KSB7CiAgICAgIC8qCiAgICAgICAqIFdlIHJlcGxhY2UgY2hldnJvbiBieSBp
        dHMgaGV4IGNvZGUgaW4gb3JkZXIgdG8gcHJldmVudCBlc2NhcGluZyBwcm9i
        bGVtcy4KICAgICAgICogQ2hlY2sgdGhpcyB0aHJlYWQgZm9yIG1vcmUgZXhw
        bGFpbmF0aW9uOgogICAgICAgKiBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20v
        cXVlc3Rpb25zLzgyMzEwNDgvd2h5LXVzZS14M2MtaW5zdGVhZC1vZi13aGVu
        LWdlbmVyYXRpbmctaHRtbC1mcm9tLWphdmFzY3JpcHQKICAgICAgICovCiAg
        ICAgIHJldHVybiAiPHNjcmlwdCBpZD0nIiArIHRoaXMuc3RhcnQgKyAiJyB0
        eXBlPSd0ZXh0L3gtcGxhY2Vob2xkZXInPlx4M0Mvc2NyaXB0PiI7CiAgICB9
        OwoKICAgIGVuZFRhZ0Z1bmMgPSBmdW5jdGlvbigpIHsKICAgICAgLyoKICAg
        ICAgICogV2UgcmVwbGFjZSBjaGV2cm9uIGJ5IGl0cyBoZXggY29kZSBpbiBv
        cmRlciB0byBwcmV2ZW50IGVzY2FwaW5nIHByb2JsZW1zLgogICAgICAgKiBD
        aGVjayB0aGlzIHRocmVhZCBmb3IgbW9yZSBleHBsYWluYXRpb246CiAgICAg
        ICAqIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvODIzMTA0
        OC93aHktdXNlLXgzYy1pbnN0ZWFkLW9mLXdoZW4tZ2VuZXJhdGluZy1odG1s
        LWZyb20tamF2YXNjcmlwdAogICAgICAgKi8KICAgICAgcmV0dXJuICI8c2Ny
        aXB0IGlkPSciICsgdGhpcy5lbmQgKyAiJyB0eXBlPSd0ZXh0L3gtcGxhY2Vo
        b2xkZXInPlx4M0Mvc2NyaXB0PiI7CiAgICB9OwoKICAgIC8vIElmIHdlIGhh
        dmUgdGhlIFczQyByYW5nZSBBUEksIHRoaXMgcHJvY2VzcyBpcyByZWxhdGl2
        ZWx5IHN0cmFpZ2h0IGZvcndhcmQuCiAgICBpZiAoc3VwcG9ydHNSYW5nZSkg
        ewoKICAgICAgLy8gR2V0IGEgcmFuZ2UgZm9yIHRoZSBjdXJyZW50IG1vcnBo
        LiBPcHRpb25hbGx5IGluY2x1ZGUgdGhlIHN0YXJ0aW5nIGFuZAogICAgICAv
        LyBlbmRpbmcgcGxhY2Vob2xkZXJzLgogICAgICByYW5nZUZvciA9IGZ1bmN0
        aW9uKG1vcnBoLCBvdXRlclRvbykgewogICAgICAgIHZhciByYW5nZSA9IGRv
        Y3VtZW50LmNyZWF0ZVJhbmdlKCk7CiAgICAgICAgdmFyIGJlZm9yZSA9IGRv
        Y3VtZW50LmdldEVsZW1lbnRCeUlkKG1vcnBoLnN0YXJ0KTsKICAgICAgICB2
        YXIgYWZ0ZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChtb3JwaC5lbmQp
        OwoKICAgICAgICBpZiAob3V0ZXJUb28pIHsKICAgICAgICAgIHJhbmdlLnNl
        dFN0YXJ0QmVmb3JlKGJlZm9yZSk7CiAgICAgICAgICByYW5nZS5zZXRFbmRB
        ZnRlcihhZnRlcik7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJhbmdl
        LnNldFN0YXJ0QWZ0ZXIoYmVmb3JlKTsKICAgICAgICAgIHJhbmdlLnNldEVu
        ZEJlZm9yZShhZnRlcik7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gcmFu
        Z2U7CiAgICAgIH07CgogICAgICBodG1sRnVuYyA9IGZ1bmN0aW9uKGh0bWws
        IG91dGVyVG9vKSB7CiAgICAgICAgLy8gZ2V0IGEgcmFuZ2UgZm9yIHRoZSBj
        dXJyZW50IG1ldGFtb3JwaCBvYmplY3QKICAgICAgICB2YXIgcmFuZ2UgPSBy
        YW5nZUZvcih0aGlzLCBvdXRlclRvbyk7CgogICAgICAgIC8vIGRlbGV0ZSB0
        aGUgY29udGVudHMgb2YgdGhlIHJhbmdlLCB3aGljaCB3aWxsIGJlIHRoZQog
        ICAgICAgIC8vIG5vZGVzIGJldHdlZW4gdGhlIHN0YXJ0aW5nIGFuZCBlbmRp
        bmcgcGxhY2Vob2xkZXIuCiAgICAgICAgcmFuZ2UuZGVsZXRlQ29udGVudHMo
        KTsKCiAgICAgICAgLy8gY3JlYXRlIGEgbmV3IGRvY3VtZW50IGZyYWdtZW50
        IGZvciB0aGUgSFRNTAogICAgICAgIHZhciBmcmFnbWVudCA9IHJhbmdlLmNy
        ZWF0ZUNvbnRleHR1YWxGcmFnbWVudChodG1sKTsKCiAgICAgICAgLy8gaW5z
        ZXJ0IHRoZSBmcmFnbWVudCBpbnRvIHRoZSByYW5nZQogICAgICAgIHJhbmdl
        Lmluc2VydE5vZGUoZnJhZ21lbnQpOwogICAgICB9OwoKICAgICAgLyoqCiAg
        ICAgICogQHB1YmxpYwogICAgICAqIAogICAgICAqIFJlbW92ZSB0aGlzIG9i
        amVjdCAoaW5jbHVkaW5nIHN0YXJ0aW5nIGFuZCBlbmRpbmcKICAgICAgKiBw
        bGFjZWhvbGRlcnMpLgogICAgICAqCiAgICAgICogQG1ldGhvZCByZW1vdmUK
        ICAgICAgKi8KICAgICAgcmVtb3ZlRnVuYyA9IGZ1bmN0aW9uKCkgewogICAg
        ICAgIC8vIGdldCBhIHJhbmdlIGZvciB0aGUgY3VycmVudCBtZXRhbW9ycGgg
        b2JqZWN0IGluY2x1ZGluZwogICAgICAgIC8vIHRoZSBzdGFydGluZyBhbmQg
        ZW5kaW5nIHBsYWNlaG9sZGVycy4KICAgICAgICB2YXIgcmFuZ2UgPSByYW5n
        ZUZvcih0aGlzLCB0cnVlKTsKCiAgICAgICAgLy8gZGVsZXRlIHRoZSBlbnRp
        cmUgcmFuZ2UuCiAgICAgICAgcmFuZ2UuZGVsZXRlQ29udGVudHMoKTsKICAg
        ICAgfTsKCiAgICAgIGFwcGVuZFRvRnVuYyA9IGZ1bmN0aW9uKG5vZGUpIHsK
        ICAgICAgICB2YXIgcmFuZ2UgPSBkb2N1bWVudC5jcmVhdGVSYW5nZSgpOwog
        ICAgICAgIHJhbmdlLnNldFN0YXJ0KG5vZGUpOwogICAgICAgIHJhbmdlLmNv
        bGxhcHNlKGZhbHNlKTsKICAgICAgICB2YXIgZnJhZyA9IHJhbmdlLmNyZWF0
        ZUNvbnRleHR1YWxGcmFnbWVudCh0aGlzLm91dGVySFRNTCgpKTsKICAgICAg
        ICBub2RlLmFwcGVuZENoaWxkKGZyYWcpOwogICAgICB9OwoKICAgICAgYWZ0
        ZXJGdW5jID0gZnVuY3Rpb24oaHRtbCkgewogICAgICAgIHZhciByYW5nZSA9
        IGRvY3VtZW50LmNyZWF0ZVJhbmdlKCk7CiAgICAgICAgdmFyIGFmdGVyID0g
        ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5lbmQpOwoKICAgICAgICBy
        YW5nZS5zZXRTdGFydEFmdGVyKGFmdGVyKTsKICAgICAgICByYW5nZS5zZXRF
        bmRBZnRlcihhZnRlcik7CgogICAgICAgIHZhciBmcmFnbWVudCA9IHJhbmdl
        LmNyZWF0ZUNvbnRleHR1YWxGcmFnbWVudChodG1sKTsKICAgICAgICByYW5n
        ZS5pbnNlcnROb2RlKGZyYWdtZW50KTsKICAgICAgfTsKCiAgICAgIHByZXBl
        bmRGdW5jID0gZnVuY3Rpb24oaHRtbCkgewogICAgICAgIHZhciByYW5nZSA9
        IGRvY3VtZW50LmNyZWF0ZVJhbmdlKCk7CiAgICAgICAgdmFyIHN0YXJ0ID0g
        ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5zdGFydCk7CgogICAgICAg
        IHJhbmdlLnNldFN0YXJ0QWZ0ZXIoc3RhcnQpOwogICAgICAgIHJhbmdlLnNl
        dEVuZEFmdGVyKHN0YXJ0KTsKCiAgICAgICAgdmFyIGZyYWdtZW50ID0gcmFu
        Z2UuY3JlYXRlQ29udGV4dHVhbEZyYWdtZW50KGh0bWwpOwogICAgICAgIHJh
        bmdlLmluc2VydE5vZGUoZnJhZ21lbnQpOwogICAgICB9OwoKICAgIH0gZWxz
        ZSB7CiAgICAgIC8qCiAgICAgICAqIFRoaXMgY29kZSBpcyBtb3N0bHkgdGFr
        ZW4gZnJvbSBqUXVlcnksIHdpdGggb25lIGV4Y2VwdGlvbi4gSW4galF1ZXJ5
        J3MgY2FzZSwgd2UKICAgICAgICogaGF2ZSBzb21lIEhUTUwgYW5kIHdlIG5l
        ZWQgdG8gZmlndXJlIG91dCBob3cgdG8gY29udmVydCBpdCBpbnRvIHNvbWUg
        bm9kZXMuCiAgICAgICAqCiAgICAgICAqIEluIHRoaXMgY2FzZSwgalF1ZXJ5
        IG5lZWRzIHRvIHNjYW4gdGhlIEhUTUwgbG9va2luZyBmb3IgYW4gb3Blbmlu
        ZyB0YWcgYW5kIHVzZQogICAgICAgKiB0aGF0IGFzIHRoZSBrZXkgZm9yIHRo
        ZSB3cmFwIG1hcC4gSW4gb3VyIGNhc2UsIHdlIGtub3cgdGhlIHBhcmVudCBu
        b2RlLCBhbmQKICAgICAgICogY2FuIHVzZSBpdHMgdHlwZSBhcyB0aGUga2V5
        IGZvciB0aGUgd3JhcCBtYXAuCiAgICAgICAqKi8KICAgICAgdmFyIHdyYXBN
        YXAgPSB7CiAgICAgICAgc2VsZWN0OiBbIDEsICI8c2VsZWN0IG11bHRpcGxl
        PSdtdWx0aXBsZSc+IiwgIjwvc2VsZWN0PiIgXSwKICAgICAgICBmaWVsZHNl
        dDogWyAxLCAiPGZpZWxkc2V0PiIsICI8L2ZpZWxkc2V0PiIgXSwKICAgICAg
        ICB0YWJsZTogWyAxLCAiPHRhYmxlPiIsICI8L3RhYmxlPiIgXSwKICAgICAg
        ICB0Ym9keTogWyAyLCAiPHRhYmxlPjx0Ym9keT4iLCAiPC90Ym9keT48L3Rh
        YmxlPiIgXSwKICAgICAgICB0cjogWyAzLCAiPHRhYmxlPjx0Ym9keT48dHI+
        IiwgIjwvdHI+PC90Ym9keT48L3RhYmxlPiIgXSwKICAgICAgICBjb2xncm91
        cDogWyAyLCAiPHRhYmxlPjx0Ym9keT48L3Rib2R5Pjxjb2xncm91cD4iLCAi
        PC9jb2xncm91cD48L3RhYmxlPiIgXSwKICAgICAgICBtYXA6IFsgMSwgIjxt
        YXA+IiwgIjwvbWFwPiIgXSwKICAgICAgICBfZGVmYXVsdDogWyAwLCAiIiwg
        IiIgXQogICAgICB9OwoKICAgICAgdmFyIGZpbmRDaGlsZEJ5SWQgPSBmdW5j
        dGlvbihlbGVtZW50LCBpZCkgewogICAgICAgIGlmIChlbGVtZW50LmdldEF0
        dHJpYnV0ZSgnaWQnKSA9PT0gaWQpIHsgcmV0dXJuIGVsZW1lbnQ7IH0KCiAg
        ICAgICAgdmFyIGxlbiA9IGVsZW1lbnQuY2hpbGROb2Rlcy5sZW5ndGgsIGlk
        eCwgbm9kZSwgZm91bmQ7CiAgICAgICAgZm9yIChpZHg9MDsgaWR4PGxlbjsg
        aWR4KyspIHsKICAgICAgICAgIG5vZGUgPSBlbGVtZW50LmNoaWxkTm9kZXNb
        aWR4XTsKICAgICAgICAgIGZvdW5kID0gbm9kZS5ub2RlVHlwZSA9PT0gMSAm
        JiBmaW5kQ2hpbGRCeUlkKG5vZGUsIGlkKTsKICAgICAgICAgIGlmIChmb3Vu
        ZCkgeyByZXR1cm4gZm91bmQ7IH0KICAgICAgICB9CiAgICAgIH07CgogICAg
        ICB2YXIgc2V0SW5uZXJIVE1MID0gZnVuY3Rpb24oZWxlbWVudCwgaHRtbCkg
        ewogICAgICAgIHZhciBtYXRjaGVzID0gW107CiAgICAgICAgaWYgKG1vdmVz
        V2hpdGVzcGFjZSkgewogICAgICAgICAgLy8gUmlnaHQgbm93IHdlIG9ubHkg
        Y2hlY2sgZm9yIHNjcmlwdCB0YWdzIHdpdGggaWRzIHdpdGggdGhlCiAgICAg
        ICAgICAvLyBnb2FsIG9mIHRhcmdldGluZyBtb3JwaHMuCiAgICAgICAgICBo
        dG1sID0gaHRtbC5yZXBsYWNlKC8oXHMrKSg8c2NyaXB0IGlkPScoW14nXSsp
        JykvZywgZnVuY3Rpb24obWF0Y2gsIHNwYWNlcywgdGFnLCBpZCkgewogICAg
        ICAgICAgICBtYXRjaGVzLnB1c2goW2lkLCBzcGFjZXNdKTsKICAgICAgICAg
        ICAgcmV0dXJuIHRhZzsKICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAg
        ICAgZWxlbWVudC5pbm5lckhUTUwgPSBodG1sOwoKICAgICAgICAvLyBJZiB3
        ZSBoYXZlIHRvIGRvIGFueSB3aGl0ZXNwYWNlIGFkanVzdG1lbnRzIGRvIHRo
        ZW0gbm93CiAgICAgICAgaWYgKG1hdGNoZXMubGVuZ3RoID4gMCkgewogICAg
        ICAgICAgdmFyIGxlbiA9IG1hdGNoZXMubGVuZ3RoLCBpZHg7CiAgICAgICAg
        ICBmb3IgKGlkeD0wOyBpZHg8bGVuOyBpZHgrKykgewogICAgICAgICAgICB2
        YXIgc2NyaXB0ID0gZmluZENoaWxkQnlJZChlbGVtZW50LCBtYXRjaGVzW2lk
        eF1bMF0pLAogICAgICAgICAgICAgICAgbm9kZSA9IGRvY3VtZW50LmNyZWF0
        ZVRleHROb2RlKG1hdGNoZXNbaWR4XVsxXSk7CiAgICAgICAgICAgIHNjcmlw
        dC5wYXJlbnROb2RlLmluc2VydEJlZm9yZShub2RlLCBzY3JpcHQpOwogICAg
        ICAgICAgfQogICAgICAgIH0KICAgICAgfTsKCiAgICAgIC8qCiAgICAgICAq
        IEdpdmVuIGEgcGFyZW50IG5vZGUgYW5kIHNvbWUgSFRNTCwgZ2VuZXJhdGUg
        YSBzZXQgb2Ygbm9kZXMuIFJldHVybiB0aGUgZmlyc3QKICAgICAgICogbm9k
        ZSwgd2hpY2ggd2lsbCBhbGxvdyB1cyB0byB0cmF2ZXJzZSB0aGUgcmVzdCB1
        c2luZyBuZXh0U2libGluZy4KICAgICAgICoKICAgICAgICogV2UgbmVlZCB0
        byBkbyB0aGlzIGJlY2F1c2UgaW5uZXJIVE1MIGluIElFIGRvZXMgbm90IHJl
        YWxseSBwYXJzZSB0aGUgbm9kZXMuCiAgICAgICAqLwogICAgICB2YXIgZmly
        c3ROb2RlRm9yID0gZnVuY3Rpb24ocGFyZW50Tm9kZSwgaHRtbCkgewogICAg
        ICAgIHZhciBhcnIgPSB3cmFwTWFwW3BhcmVudE5vZGUudGFnTmFtZS50b0xv
        d2VyQ2FzZSgpXSB8fCB3cmFwTWFwLl9kZWZhdWx0OwogICAgICAgIHZhciBk
        ZXB0aCA9IGFyclswXSwgc3RhcnQgPSBhcnJbMV0sIGVuZCA9IGFyclsyXTsK
        CiAgICAgICAgaWYgKG5lZWRzU2h5KSB7IGh0bWwgPSAnJnNoeTsnK2h0bWw7
        IH0KCiAgICAgICAgdmFyIGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVt
        ZW50KCdkaXYnKTsKCiAgICAgICAgc2V0SW5uZXJIVE1MKGVsZW1lbnQsIHN0
        YXJ0ICsgaHRtbCArIGVuZCk7CgogICAgICAgIGZvciAodmFyIGk9MDsgaTw9
        ZGVwdGg7IGkrKykgewogICAgICAgICAgZWxlbWVudCA9IGVsZW1lbnQuZmly
        c3RDaGlsZDsKICAgICAgICB9CgogICAgICAgIC8vIExvb2sgZm9yICZzaHk7
        IHRvIHJlbW92ZSBpdC4KICAgICAgICBpZiAobmVlZHNTaHkpIHsKICAgICAg
        ICAgIHZhciBzaHlFbGVtZW50ID0gZWxlbWVudDsKCiAgICAgICAgICAvLyBT
        b21ldGltZXMgd2UgZ2V0IG5hbWVsZXNzIGVsZW1lbnRzIHdpdGggdGhlIHNo
        eSBpbnNpZGUKICAgICAgICAgIHdoaWxlIChzaHlFbGVtZW50Lm5vZGVUeXBl
        ID09PSAxICYmICFzaHlFbGVtZW50Lm5vZGVOYW1lKSB7CiAgICAgICAgICAg
        IHNoeUVsZW1lbnQgPSBzaHlFbGVtZW50LmZpcnN0Q2hpbGQ7CiAgICAgICAg
        ICB9CgogICAgICAgICAgLy8gQXQgdGhpcyBwb2ludCBpdCdzIHRoZSBhY3R1
        YWwgdW5pY29kZSBjaGFyYWN0ZXIuCiAgICAgICAgICBpZiAoc2h5RWxlbWVu
        dC5ub2RlVHlwZSA9PT0gMyAmJiBzaHlFbGVtZW50Lm5vZGVWYWx1ZS5jaGFy
        QXQoMCkgPT09ICJcdTAwQUQiKSB7CiAgICAgICAgICAgIHNoeUVsZW1lbnQu
        bm9kZVZhbHVlID0gc2h5RWxlbWVudC5ub2RlVmFsdWUuc2xpY2UoMSk7CiAg
        ICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gZWxlbWVudDsK
        ICAgICAgfTsKCiAgICAgIC8qCiAgICAgICAqIEluIHNvbWUgY2FzZXMsIElu
        dGVybmV0IEV4cGxvcmVyIGNhbiBjcmVhdGUgYW4gYW5vbnltb3VzIG5vZGUg
        aW4KICAgICAgICogdGhlIGhpZXJhcmNoeSB3aXRoIG5vIHRhZ05hbWUuIFlv
        dSBjYW4gY3JlYXRlIHRoaXMgc2NlbmFyaW8gdmlhOgogICAgICAgKgogICAg
        ICAgKiAgICAgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7
        CiAgICAgICAqICAgICBkaXYuaW5uZXJIVE1MID0gIjx0YWJsZT4mc2h5PHNj
        cmlwdD48L3NjcmlwdD48dHI+PHRkPmhpPC90ZD48L3RyPjwvdGFibGU+IjsK
        ICAgICAgICogICAgIGRpdi5maXJzdENoaWxkLmZpcnN0Q2hpbGQudGFnTmFt
        ZSAvLz0+ICIiCiAgICAgICAqCiAgICAgICAqIElmIG91ciBzY3JpcHQgbWFy
        a2VycyBhcmUgaW5zaWRlIHN1Y2ggYSBub2RlLCB3ZSBuZWVkIHRvIGZpbmQg
        dGhhdAogICAgICAgKiBub2RlIGFuZCB1c2UgKml0KiBhcyB0aGUgbWFya2Vy
        LgogICAgICAgKi8KICAgICAgdmFyIHJlYWxOb2RlID0gZnVuY3Rpb24oc3Rh
        cnQpIHsKICAgICAgICB3aGlsZSAoc3RhcnQucGFyZW50Tm9kZS50YWdOYW1l
        ID09PSAiIikgewogICAgICAgICAgc3RhcnQgPSBzdGFydC5wYXJlbnROb2Rl
        OwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHN0YXJ0OwogICAgICB9OwoK
        ICAgICAgLyoKICAgICAgICogV2hlbiBhdXRvbWF0aWNhbGx5IGFkZGluZyBh
        IHRib2R5LCBJbnRlcm5ldCBFeHBsb3JlciBpbnNlcnRzIHRoZQogICAgICAg
        KiB0Ym9keSBpbW1lZGlhdGVseSBiZWZvcmUgdGhlIGZpcnN0IDx0cj4uIE90
        aGVyIGJyb3dzZXJzIGNyZWF0ZSBpdAogICAgICAgKiBiZWZvcmUgdGhlIGZp
        cnN0IG5vZGUsIG5vIG1hdHRlciB3aGF0LgogICAgICAgKgogICAgICAgKiBU
        aGlzIG1lYW5zIHRoZSB0aGUgZm9sbG93aW5nIGNvZGU6CiAgICAgICAqCiAg
        ICAgICAqICAgICBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYi
        KTsKICAgICAgICogICAgIGRpdi5pbm5lckhUTUwgPSAiPHRhYmxlPjxzY3Jp
        cHQgaWQ9J2ZpcnN0Jz48L3NjcmlwdD48dHI+PHRkPmhpPC90ZD48L3RyPjxz
        Y3JpcHQgaWQ9J2xhc3QnPjwvc2NyaXB0PjwvdGFibGU+CiAgICAgICAqCiAg
        ICAgICAqIEdlbmVyYXRlcyB0aGUgZm9sbG93aW5nIERPTSBpbiBJRToKICAg
        ICAgICoKICAgICAgICogICAgICsgZGl2CiAgICAgICAqICAgICAgICsgdGFi
        bGUKICAgICAgICogICAgICAgICAtIHNjcmlwdCBpZD0nZmlyc3QnCiAgICAg
        ICAqICAgICAgICAgKyB0Ym9keQogICAgICAgKiAgICAgICAgICAgKyB0cgog
        ICAgICAgKiAgICAgICAgICAgICArIHRkCiAgICAgICAqICAgICAgICAgICAg
        ICAgLSAiaGkiCiAgICAgICAqICAgICAgICAgICAtIHNjcmlwdCBpZD0nbGFz
        dCcKICAgICAgICoKICAgICAgICogV2hpY2ggbWVhbnMgdGhhdCB0aGUgdHdv
        IHNjcmlwdCB0YWdzLCBldmVuIHRob3VnaCB0aGV5IHdlcmUKICAgICAgICog
        aW5zZXJ0ZWQgYXQgdGhlIHNhbWUgcG9pbnQgaW4gdGhlIGhpZXJhcmNoeSBp
        biB0aGUgb3JpZ2luYWwKICAgICAgICogSFRNTCwgbm93IGhhdmUgZGlmZmVy
        ZW50IHBhcmVudHMuCiAgICAgICAqCiAgICAgICAqIFRoaXMgY29kZSByZXBh
        cmVudHMgdGhlIGZpcnN0IHNjcmlwdCB0YWcgYnkgbWFraW5nIGl0IHRoZSB0
        Ym9keSdzCiAgICAgICAqIGZpcnN0IGNoaWxkLgogICAgICAgKgogICAgICAg
        Ki8KICAgICAgdmFyIGZpeFBhcmVudGFnZSA9IGZ1bmN0aW9uKHN0YXJ0LCBl
        bmQpIHsKICAgICAgICBpZiAoc3RhcnQucGFyZW50Tm9kZSAhPT0gZW5kLnBh
        cmVudE5vZGUpIHsKICAgICAgICAgIGVuZC5wYXJlbnROb2RlLmluc2VydEJl
        Zm9yZShzdGFydCwgZW5kLnBhcmVudE5vZGUuZmlyc3RDaGlsZCk7CiAgICAg
        ICAgfQogICAgICB9OwoKICAgICAgaHRtbEZ1bmMgPSBmdW5jdGlvbihodG1s
        LCBvdXRlclRvbykgewogICAgICAgIC8vIGdldCB0aGUgcmVhbCBzdGFydGlu
        ZyBub2RlLiBzZWUgcmVhbE5vZGUgZm9yIGRldGFpbHMuCiAgICAgICAgdmFy
        IHN0YXJ0ID0gcmVhbE5vZGUoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhp
        cy5zdGFydCkpOwogICAgICAgIHZhciBlbmQgPSBkb2N1bWVudC5nZXRFbGVt
        ZW50QnlJZCh0aGlzLmVuZCk7CiAgICAgICAgdmFyIHBhcmVudE5vZGUgPSBl
        bmQucGFyZW50Tm9kZTsKICAgICAgICB2YXIgbm9kZSwgbmV4dFNpYmxpbmcs
        IGxhc3Q7CgogICAgICAgIC8vIG1ha2Ugc3VyZSB0aGF0IHRoZSBzdGFydCBh
        bmQgZW5kIG5vZGVzIHNoYXJlIHRoZSBzYW1lCiAgICAgICAgLy8gcGFyZW50
        LiBJZiBub3QsIGZpeCBpdC4KICAgICAgICBmaXhQYXJlbnRhZ2Uoc3RhcnQs
        IGVuZCk7CgogICAgICAgIC8vIHJlbW92ZSBhbGwgb2YgdGhlIG5vZGVzIGFm
        dGVyIHRoZSBzdGFydGluZyBwbGFjZWhvbGRlciBhbmQKICAgICAgICAvLyBi
        ZWZvcmUgdGhlIGVuZGluZyBwbGFjZWhvbGRlci4KICAgICAgICBub2RlID0g
        c3RhcnQubmV4dFNpYmxpbmc7CiAgICAgICAgd2hpbGUgKG5vZGUpIHsKICAg
        ICAgICAgIG5leHRTaWJsaW5nID0gbm9kZS5uZXh0U2libGluZzsKICAgICAg
        ICAgIGxhc3QgPSBub2RlID09PSBlbmQ7CgogICAgICAgICAgLy8gaWYgdGhp
        cyBpcyB0aGUgbGFzdCBub2RlLCBhbmQgd2Ugd2FudCB0byByZW1vdmUgaXQg
        YXMgd2VsbCwKICAgICAgICAgIC8vIHNldCB0aGUgYGVuZGAgbm9kZSB0byB0
        aGUgbmV4dCBzaWJsaW5nLiBUaGlzIGlzIGJlY2F1c2UKICAgICAgICAgIC8v
        IGZvciB0aGUgcmVzdCBvZiB0aGUgZnVuY3Rpb24sIHdlIGluc2VydCB0aGUg
        bmV3IG5vZGVzCiAgICAgICAgICAvLyBiZWZvcmUgdGhlIGVuZCAobm90ZSB0
        aGF0IGluc2VydEJlZm9yZShub2RlLCBudWxsKSBpcwogICAgICAgICAgLy8g
        dGhlIHNhbWUgYXMgYXBwZW5kQ2hpbGQobm9kZSkpLgogICAgICAgICAgLy8K
        ICAgICAgICAgIC8vIGlmIHdlIGRvIG5vdCB3YW50IHRvIHJlbW92ZSBpdCwg
        anVzdCBicmVhay4KICAgICAgICAgIGlmIChsYXN0KSB7CiAgICAgICAgICAg
        IGlmIChvdXRlclRvbykgeyBlbmQgPSBub2RlLm5leHRTaWJsaW5nOyB9IGVs
        c2UgeyBicmVhazsgfQogICAgICAgICAgfQoKICAgICAgICAgIG5vZGUucGFy
        ZW50Tm9kZS5yZW1vdmVDaGlsZChub2RlKTsKCiAgICAgICAgICAvLyBpZiB0
        aGlzIGlzIHRoZSBsYXN0IG5vZGUgYW5kIHdlIGRpZG4ndCBicmVhayBiZWZv
        cmUKICAgICAgICAgIC8vIChiZWNhdXNlIHdlIHdhbnRlZCB0byByZW1vdmUg
        dGhlIG91dGVyIG5vZGVzKSwgYnJlYWsKICAgICAgICAgIC8vIG5vdy4KICAg
        ICAgICAgIGlmIChsYXN0KSB7IGJyZWFrOyB9CgogICAgICAgICAgbm9kZSA9
        IG5leHRTaWJsaW5nOwogICAgICAgIH0KCiAgICAgICAgLy8gZ2V0IHRoZSBm
        aXJzdCBub2RlIGZvciB0aGUgSFRNTCBzdHJpbmcsIGV2ZW4gaW4gY2FzZXMg
        bGlrZQogICAgICAgIC8vIHRhYmxlcyBhbmQgbGlzdHMgd2hlcmUgYSBzaW1w
        bGUgaW5uZXJIVE1MIG9uIGEgZGl2IHdvdWxkCiAgICAgICAgLy8gc3dhbGxv
        dyBzb21lIG9mIHRoZSBjb250ZW50LgogICAgICAgIG5vZGUgPSBmaXJzdE5v
        ZGVGb3Ioc3RhcnQucGFyZW50Tm9kZSwgaHRtbCk7CgogICAgICAgIC8vIGNv
        cHkgdGhlIG5vZGVzIGZvciB0aGUgSFRNTCBiZXR3ZWVuIHRoZSBzdGFydGlu
        ZyBhbmQgZW5kaW5nCiAgICAgICAgLy8gcGxhY2Vob2xkZXIuCiAgICAgICAg
        d2hpbGUgKG5vZGUpIHsKICAgICAgICAgIG5leHRTaWJsaW5nID0gbm9kZS5u
        ZXh0U2libGluZzsKICAgICAgICAgIHBhcmVudE5vZGUuaW5zZXJ0QmVmb3Jl
        KG5vZGUsIGVuZCk7CiAgICAgICAgICBub2RlID0gbmV4dFNpYmxpbmc7CiAg
        ICAgICAgfQogICAgICB9OwoKICAgICAgLy8gcmVtb3ZlIHRoZSBub2RlcyBp
        biB0aGUgRE9NIHJlcHJlc2VudGluZyB0aGlzIG1ldGFtb3JwaC4KICAgICAg
        Ly8KICAgICAgLy8gdGhpcyBpbmNsdWRlcyB0aGUgc3RhcnRpbmcgYW5kIGVu
        ZGluZyBwbGFjZWhvbGRlcnMuCiAgICAgIHJlbW92ZUZ1bmMgPSBmdW5jdGlv
        bigpIHsKICAgICAgICB2YXIgc3RhcnQgPSByZWFsTm9kZShkb2N1bWVudC5n
        ZXRFbGVtZW50QnlJZCh0aGlzLnN0YXJ0KSk7CiAgICAgICAgdmFyIGVuZCA9
        IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuZW5kKTsKCiAgICAgICAg
        dGhpcy5odG1sKCcnKTsKICAgICAgICBzdGFydC5wYXJlbnROb2RlLnJlbW92
        ZUNoaWxkKHN0YXJ0KTsKICAgICAgICBlbmQucGFyZW50Tm9kZS5yZW1vdmVD
        aGlsZChlbmQpOwogICAgICB9OwoKICAgICAgYXBwZW5kVG9GdW5jID0gZnVu
        Y3Rpb24ocGFyZW50Tm9kZSkgewogICAgICAgIHZhciBub2RlID0gZmlyc3RO
        b2RlRm9yKHBhcmVudE5vZGUsIHRoaXMub3V0ZXJIVE1MKCkpOwogICAgICAg
        IHZhciBuZXh0U2libGluZzsKCiAgICAgICAgd2hpbGUgKG5vZGUpIHsKICAg
        ICAgICAgIG5leHRTaWJsaW5nID0gbm9kZS5uZXh0U2libGluZzsKICAgICAg
        ICAgIHBhcmVudE5vZGUuYXBwZW5kQ2hpbGQobm9kZSk7CiAgICAgICAgICBu
        b2RlID0gbmV4dFNpYmxpbmc7CiAgICAgICAgfQogICAgICB9OwoKICAgICAg
        YWZ0ZXJGdW5jID0gZnVuY3Rpb24oaHRtbCkgewogICAgICAgIC8vIGdldCB0
        aGUgcmVhbCBzdGFydGluZyBub2RlLiBzZWUgcmVhbE5vZGUgZm9yIGRldGFp
        bHMuCiAgICAgICAgdmFyIGVuZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlk
        KHRoaXMuZW5kKTsKICAgICAgICB2YXIgaW5zZXJ0QmVmb3JlID0gZW5kLm5l
        eHRTaWJsaW5nOwogICAgICAgIHZhciBwYXJlbnROb2RlID0gZW5kLnBhcmVu
        dE5vZGU7CiAgICAgICAgdmFyIG5leHRTaWJsaW5nOwogICAgICAgIHZhciBu
        b2RlOwoKICAgICAgICAvLyBnZXQgdGhlIGZpcnN0IG5vZGUgZm9yIHRoZSBI
        VE1MIHN0cmluZywgZXZlbiBpbiBjYXNlcyBsaWtlCiAgICAgICAgLy8gdGFi
        bGVzIGFuZCBsaXN0cyB3aGVyZSBhIHNpbXBsZSBpbm5lckhUTUwgb24gYSBk
        aXYgd291bGQKICAgICAgICAvLyBzd2FsbG93IHNvbWUgb2YgdGhlIGNvbnRl
        bnQuCiAgICAgICAgbm9kZSA9IGZpcnN0Tm9kZUZvcihwYXJlbnROb2RlLCBo
        dG1sKTsKCiAgICAgICAgLy8gY29weSB0aGUgbm9kZXMgZm9yIHRoZSBIVE1M
        IGJldHdlZW4gdGhlIHN0YXJ0aW5nIGFuZCBlbmRpbmcKICAgICAgICAvLyBw
        bGFjZWhvbGRlci4KICAgICAgICB3aGlsZSAobm9kZSkgewogICAgICAgICAg
        bmV4dFNpYmxpbmcgPSBub2RlLm5leHRTaWJsaW5nOwogICAgICAgICAgcGFy
        ZW50Tm9kZS5pbnNlcnRCZWZvcmUobm9kZSwgaW5zZXJ0QmVmb3JlKTsKICAg
        ICAgICAgIG5vZGUgPSBuZXh0U2libGluZzsKICAgICAgICB9CiAgICAgIH07
        CgogICAgICBwcmVwZW5kRnVuYyA9IGZ1bmN0aW9uKGh0bWwpIHsKICAgICAg
        ICB2YXIgc3RhcnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLnN0
        YXJ0KTsKICAgICAgICB2YXIgcGFyZW50Tm9kZSA9IHN0YXJ0LnBhcmVudE5v
        ZGU7CiAgICAgICAgdmFyIG5leHRTaWJsaW5nOwogICAgICAgIHZhciBub2Rl
        OwoKICAgICAgICBub2RlID0gZmlyc3ROb2RlRm9yKHBhcmVudE5vZGUsIGh0
        bWwpOwogICAgICAgIHZhciBpbnNlcnRCZWZvcmUgPSBzdGFydC5uZXh0U2li
        bGluZzsKCiAgICAgICAgd2hpbGUgKG5vZGUpIHsKICAgICAgICAgIG5leHRT
        aWJsaW5nID0gbm9kZS5uZXh0U2libGluZzsKICAgICAgICAgIHBhcmVudE5v
        ZGUuaW5zZXJ0QmVmb3JlKG5vZGUsIGluc2VydEJlZm9yZSk7CiAgICAgICAg
        ICBub2RlID0gbmV4dFNpYmxpbmc7CiAgICAgICAgfQogICAgICB9OwogICAg
        fQoKICAgIE1ldGFtb3JwaC5wcm90b3R5cGUuaHRtbCA9IGZ1bmN0aW9uKGh0
        bWwpIHsKICAgICAgdGhpcy5jaGVja1JlbW92ZWQoKTsKICAgICAgaWYgKGh0
        bWwgPT09IHVuZGVmaW5lZCkgeyByZXR1cm4gdGhpcy5pbm5lckhUTUw7IH0K
        CiAgICAgIGh0bWxGdW5jLmNhbGwodGhpcywgaHRtbCk7CgogICAgICB0aGlz
        LmlubmVySFRNTCA9IGh0bWw7CiAgICB9OwoKICAgIE1ldGFtb3JwaC5wcm90
        b3R5cGUucmVwbGFjZVdpdGggPSBmdW5jdGlvbihodG1sKSB7CiAgICAgIHRo
        aXMuY2hlY2tSZW1vdmVkKCk7CiAgICAgIGh0bWxGdW5jLmNhbGwodGhpcywg
        aHRtbCwgdHJ1ZSk7CiAgICB9OwoKICAgIE1ldGFtb3JwaC5wcm90b3R5cGUu
        cmVtb3ZlID0gcmVtb3ZlRnVuYzsKICAgIE1ldGFtb3JwaC5wcm90b3R5cGUu
        b3V0ZXJIVE1MID0gb3V0ZXJIVE1MRnVuYzsKICAgIE1ldGFtb3JwaC5wcm90
        b3R5cGUuYXBwZW5kVG8gPSBhcHBlbmRUb0Z1bmM7CiAgICBNZXRhbW9ycGgu
        cHJvdG90eXBlLmFmdGVyID0gYWZ0ZXJGdW5jOwogICAgTWV0YW1vcnBoLnBy
        b3RvdHlwZS5wcmVwZW5kID0gcHJlcGVuZEZ1bmM7CiAgICBNZXRhbW9ycGgu
        cHJvdG90eXBlLnN0YXJ0VGFnID0gc3RhcnRUYWdGdW5jOwogICAgTWV0YW1v
        cnBoLnByb3RvdHlwZS5lbmRUYWcgPSBlbmRUYWdGdW5jOwoKICAgIE1ldGFt
        b3JwaC5wcm90b3R5cGUuaXNSZW1vdmVkID0gZnVuY3Rpb24oKSB7CiAgICAg
        IHZhciBiZWZvcmUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLnN0
        YXJ0KTsKICAgICAgdmFyIGFmdGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5
        SWQodGhpcy5lbmQpOwoKICAgICAgcmV0dXJuICFiZWZvcmUgfHwgIWFmdGVy
        OwogICAgfTsKCiAgICBNZXRhbW9ycGgucHJvdG90eXBlLmNoZWNrUmVtb3Zl
        ZCA9IGZ1bmN0aW9uKCkgewogICAgICBpZiAodGhpcy5pc1JlbW92ZWQoKSkg
        ewogICAgICAgIHRocm93IG5ldyBFcnJvcigiQ2Fubm90IHBlcmZvcm0gb3Bl
        cmF0aW9ucyBvbiBhIE1ldGFtb3JwaCB0aGF0IGlzIG5vdCBpbiB0aGUgRE9N
        LiIpOwogICAgICB9CiAgICB9OwoKICAgIHJldHVybiBNZXRhbW9ycGg7CiAg
        fSk7Cgp9KSgpOwoKKGZ1bmN0aW9uKCkgewovKioKQG1vZHVsZSBlbWJlcgpA
        c3VibW9kdWxlIGVtYmVyLWhhbmRsZWJhcnMtY29tcGlsZXIKKi8KCi8vIEVs
        aW1pbmF0ZSBkZXBlbmRlbmN5IG9uIGFueSBFbWJlciB0byBzaW1wbGlmeSBw
        cmVjb21waWxhdGlvbiB3b3JrZmxvdwp2YXIgb2JqZWN0Q3JlYXRlID0gT2Jq
        ZWN0LmNyZWF0ZSB8fCBmdW5jdGlvbihwYXJlbnQpIHsKICBmdW5jdGlvbiBG
        KCkge30KICBGLnByb3RvdHlwZSA9IHBhcmVudDsKICByZXR1cm4gbmV3IEYo
        KTsKfTsKCnZhciBIYW5kbGViYXJzID0gdGhpcy5IYW5kbGViYXJzIHx8IChF
        bWJlci5pbXBvcnRzICYmIEVtYmVyLmltcG9ydHMuSGFuZGxlYmFycyk7Cmlm
        ICghSGFuZGxlYmFycyAmJiB0eXBlb2YgcmVxdWlyZSA9PT0gJ2Z1bmN0aW9u
        JykgewogIEhhbmRsZWJhcnMgPSByZXF1aXJlKCdoYW5kbGViYXJzJyk7Cn0K
        CkVtYmVyLmFzc2VydCgiRW1iZXIgSGFuZGxlYmFycyByZXF1aXJlcyBIYW5k
        bGViYXJzIHZlcnNpb24gMS4wLjAuIEluY2x1ZGUgYSBTQ1JJUFQgdGFnIGlu
        IHRoZSBIVE1MIEhFQUQgbGlua2luZyB0byB0aGUgSGFuZGxlYmFycyBmaWxl
        IGJlZm9yZSB5b3UgbGluayB0byBFbWJlci4iLCBIYW5kbGViYXJzKTsKRW1i
        ZXIuYXNzZXJ0KCJFbWJlciBIYW5kbGViYXJzIHJlcXVpcmVzIEhhbmRsZWJh
        cnMgdmVyc2lvbiAxLjAuMCwgQ09NUElMRVJfUkVWSVNJT04gZXhwZWN0ZWQ6
        IDQsIGdvdDogIiArICBIYW5kbGViYXJzLkNPTVBJTEVSX1JFVklTSU9OICsg
        IiAtIFBsZWFzZSBub3RlOiBCdWlsZHMgb2YgbWFzdGVyIG1heSBoYXZlIG90
        aGVyIENPTVBJTEVSX1JFVklTSU9OIHZhbHVlcy4iLCBIYW5kbGViYXJzLkNP
        TVBJTEVSX1JFVklTSU9OID09PSA0KTsKCi8qKgogIFByZXBhcmVzIHRoZSBI
        YW5kbGViYXJzIHRlbXBsYXRpbmcgbGlicmFyeSBmb3IgdXNlIGluc2lkZSBF
        bWJlcidzIHZpZXcKICBzeXN0ZW0uCgogIFRoZSBgRW1iZXIuSGFuZGxlYmFy
        c2Agb2JqZWN0IGlzIHRoZSBzdGFuZGFyZCBIYW5kbGViYXJzIGxpYnJhcnks
        IGV4dGVuZGVkIHRvCiAgdXNlIEVtYmVyJ3MgYGdldCgpYCBtZXRob2QgaW5z
        dGVhZCBvZiBkaXJlY3QgcHJvcGVydHkgYWNjZXNzLCB3aGljaCBhbGxvd3MK
        ICBjb21wdXRlZCBwcm9wZXJ0aWVzIHRvIGJlIHVzZWQgaW5zaWRlIHRlbXBs
        YXRlcy4KCiAgVG8gY3JlYXRlIGFuIGBFbWJlci5IYW5kbGViYXJzYCB0ZW1w
        bGF0ZSwgY2FsbCBgRW1iZXIuSGFuZGxlYmFycy5jb21waWxlKClgLgogIFRo
        aXMgd2lsbCByZXR1cm4gYSBmdW5jdGlvbiB0aGF0IGNhbiBiZSB1c2VkIGJ5
        IGBFbWJlci5WaWV3YCBmb3IgcmVuZGVyaW5nLgoKICBAY2xhc3MgSGFuZGxl
        YmFycwogIEBuYW1lc3BhY2UgRW1iZXIKKi8KRW1iZXIuSGFuZGxlYmFycyA9
        IG9iamVjdENyZWF0ZShIYW5kbGViYXJzKTsKCi8qKgogIFJlZ2lzdGVyIGEg
        Ym91bmQgaGVscGVyIG9yIGN1c3RvbSB2aWV3IGhlbHBlci4KCiAgIyMgU2lt
        cGxlIGJvdW5kIGhlbHBlciBleGFtcGxlCgogIGBgYGphdmFzY3JpcHQKICBF
        bWJlci5IYW5kbGViYXJzLmhlbHBlcignY2FwaXRhbGl6ZScsIGZ1bmN0aW9u
        KHZhbHVlKSB7CiAgICByZXR1cm4gdmFsdWUudG9VcHBlckNhc2UoKTsKICB9
        KTsKICBgYGAKCiAgVGhlIGFib3ZlIGJvdW5kIGhlbHBlciBjYW4gYmUgdXNl
        ZCBpbnNpZGUgb2YgdGVtcGxhdGVzIGFzIGZvbGxvd3M6CgogIGBgYGhhbmRs
        ZWJhcnMKICB7e2NhcGl0YWxpemUgbmFtZX19CiAgYGBgCgogIEluIHRoaXMg
        Y2FzZSwgd2hlbiB0aGUgYG5hbWVgIHByb3BlcnR5IG9mIHRoZSB0ZW1wbGF0
        ZSdzIGNvbnRleHQgY2hhbmdlcywKICB0aGUgcmVuZGVyZWQgdmFsdWUgb2Yg
        dGhlIGhlbHBlciB3aWxsIHVwZGF0ZSB0byByZWZsZWN0IHRoaXMgY2hhbmdl
        LgoKICBGb3IgbW9yZSBleGFtcGxlcyBvZiBib3VuZCBoZWxwZXJzLCBzZWUg
        ZG9jdW1lbnRhdGlvbiBmb3IKICBgRW1iZXIuSGFuZGxlYmFycy5yZWdpc3Rl
        ckJvdW5kSGVscGVyYC4KCiAgIyMgQ3VzdG9tIHZpZXcgaGVscGVyIGV4YW1w
        bGUKCiAgQXNzdW1pbmcgYSB2aWV3IHN1YmNsYXNzIG5hbWVkIGBBcHAuQ2Fs
        ZW5kYXJWaWV3YCB3ZXJlIGRlZmluZWQsIGEgaGVscGVyCiAgZm9yIHJlbmRl
        cmluZyBpbnN0YW5jZXMgb2YgdGhpcyB2aWV3IGNvdWxkIGJlIHJlZ2lzdGVy
        ZWQgYXMgZm9sbG93czoKCiAgYGBgamF2YXNjcmlwdAogIEVtYmVyLkhhbmRs
        ZWJhcnMuaGVscGVyKCdjYWxlbmRhcicsIEFwcC5DYWxlbmRhclZpZXcpOgog
        IGBgYAoKICBUaGUgYWJvdmUgYm91bmQgaGVscGVyIGNhbiBiZSB1c2VkIGlu
        c2lkZSBvZiB0ZW1wbGF0ZXMgYXMgZm9sbG93czoKCiAgYGBgaGFuZGxlYmFy
        cwogIHt7Y2FsZW5kYXJ9fQogIGBgYAoKICBXaGljaCBpcyBmdW5jdGlvbmFs
        bHkgZXF1aXZhbGVudCB0bzoKCiAgYGBgaGFuZGxlYmFycwogIHt7dmlldyBB
        cHAuQ2FsZW5kYXJWaWV3fX0KICBgYGAKCiAgT3B0aW9ucyBpbiB0aGUgaGVs
        cGVyIHdpbGwgYmUgcGFzc2VkIHRvIHRoZSB2aWV3IGluIGV4YWN0bHkgdGhl
        IHNhbWUKICBtYW5uZXIgYXMgd2l0aCB0aGUgYHZpZXdgIGhlbHBlci4KCiAg
        QG1ldGhvZCBoZWxwZXIKICBAZm9yIEVtYmVyLkhhbmRsZWJhcnMKICBAcGFy
        YW0ge1N0cmluZ30gbmFtZQogIEBwYXJhbSB7RnVuY3Rpb258RW1iZXIuVmll
        d30gZnVuY3Rpb24gb3IgdmlldyBjbGFzcyBjb25zdHJ1Y3RvcgogIEBwYXJh
        bSB7U3RyaW5nfSBkZXBlbmRlbnRLZXlzKgoqLwpFbWJlci5IYW5kbGViYXJz
        LmhlbHBlciA9IGZ1bmN0aW9uKG5hbWUsIHZhbHVlKSB7CiAgRW1iZXIuYXNz
        ZXJ0KCJZb3UgdHJpZWQgdG8gcmVnaXN0ZXIgYSBjb21wb25lbnQgbmFtZWQg
        JyIgKyBuYW1lICsgIicsIGJ1dCBjb21wb25lbnQgbmFtZXMgbXVzdCBpbmNs
        dWRlIGEgJy0nIiwgIUVtYmVyLkNvbXBvbmVudC5kZXRlY3QodmFsdWUpIHx8
        IG5hbWUubWF0Y2goLy0vKSk7CgogIGlmIChFbWJlci5WaWV3LmRldGVjdCh2
        YWx1ZSkpIHsKICAgIEVtYmVyLkhhbmRsZWJhcnMucmVnaXN0ZXJIZWxwZXIo
        bmFtZSwgRW1iZXIuSGFuZGxlYmFycy5tYWtlVmlld0hlbHBlcih2YWx1ZSkp
        OwogIH0gZWxzZSB7CiAgICBFbWJlci5IYW5kbGViYXJzLnJlZ2lzdGVyQm91
        bmRIZWxwZXIuYXBwbHkobnVsbCwgYXJndW1lbnRzKTsKICB9Cn07CgovKioK
        ICBAcHJpdmF0ZQoKICBSZXR1cm5zIGEgaGVscGVyIGZ1bmN0aW9uIHRoYXQg
        cmVuZGVycyB0aGUgcHJvdmlkZWQgVmlld0NsYXNzLgoKICBVc2VkIGludGVy
        bmFsbHkgYnkgRW1iZXIuSGFuZGxlYmFycy5oZWxwZXIgYW5kIG90aGVyIG1l
        dGhvZHMKICBpbnZvbHZpbmcgaGVscGVyL2NvbXBvbmVudCByZWdpc3RyYXRp
        b24uCgogIEBtZXRob2QgaGVscGVyCiAgQGZvciBFbWJlci5IYW5kbGViYXJz
        CiAgQHBhcmFtIHtGdW5jdGlvbn0gVmlld0NsYXNzIHZpZXcgY2xhc3MgY29u
        c3RydWN0b3IKKi8KRW1iZXIuSGFuZGxlYmFycy5tYWtlVmlld0hlbHBlciA9
        IGZ1bmN0aW9uKFZpZXdDbGFzcykgewogIHJldHVybiBmdW5jdGlvbihvcHRp
        b25zKSB7CiAgICBFbWJlci5hc3NlcnQoIllvdSBjYW4gb25seSBwYXNzIGF0
        dHJpYnV0ZXMgKHN1Y2ggYXMgbmFtZT12YWx1ZSkgbm90IGJhcmUgdmFsdWVz
        IHRvIGEgaGVscGVyIGZvciBhIFZpZXciLCBhcmd1bWVudHMubGVuZ3RoIDwg
        Mik7CiAgICByZXR1cm4gRW1iZXIuSGFuZGxlYmFycy5oZWxwZXJzLnZpZXcu
        Y2FsbCh0aGlzLCBWaWV3Q2xhc3MsIG9wdGlvbnMpOwogIH07Cn07CgovKioK
        QGNsYXNzIGhlbHBlcnMKQG5hbWVzcGFjZSBFbWJlci5IYW5kbGViYXJzCiov
        CkVtYmVyLkhhbmRsZWJhcnMuaGVscGVycyA9IG9iamVjdENyZWF0ZShIYW5k
        bGViYXJzLmhlbHBlcnMpOwoKLyoqCiAgT3ZlcnJpZGUgdGhlIHRoZSBvcGNv
        ZGUgY29tcGlsZXIgYW5kIEphdmFTY3JpcHQgY29tcGlsZXIgZm9yIEhhbmRs
        ZWJhcnMuCgogIEBjbGFzcyBDb21waWxlcgogIEBuYW1lc3BhY2UgRW1iZXIu
        SGFuZGxlYmFycwogIEBwcml2YXRlCiAgQGNvbnN0cnVjdG9yCiovCkVtYmVy
        LkhhbmRsZWJhcnMuQ29tcGlsZXIgPSBmdW5jdGlvbigpIHt9OwoKLy8gSGFu
        ZGxlYmFycy5Db21waWxlciBkb2Vzbid0IGV4aXN0IGluIHJ1bnRpbWUtb25s
        eQppZiAoSGFuZGxlYmFycy5Db21waWxlcikgewogIEVtYmVyLkhhbmRsZWJh
        cnMuQ29tcGlsZXIucHJvdG90eXBlID0gb2JqZWN0Q3JlYXRlKEhhbmRsZWJh
        cnMuQ29tcGlsZXIucHJvdG90eXBlKTsKfQoKRW1iZXIuSGFuZGxlYmFycy5D
        b21waWxlci5wcm90b3R5cGUuY29tcGlsZXIgPSBFbWJlci5IYW5kbGViYXJz
        LkNvbXBpbGVyOwoKLyoqCiAgQGNsYXNzIEphdmFTY3JpcHRDb21waWxlcgog
        IEBuYW1lc3BhY2UgRW1iZXIuSGFuZGxlYmFycwogIEBwcml2YXRlCiAgQGNv
        bnN0cnVjdG9yCiovCkVtYmVyLkhhbmRsZWJhcnMuSmF2YVNjcmlwdENvbXBp
        bGVyID0gZnVuY3Rpb24oKSB7fTsKCi8vIEhhbmRsZWJhcnMuSmF2YVNjcmlw
        dENvbXBpbGVyIGRvZXNuJ3QgZXhpc3QgaW4gcnVudGltZS1vbmx5CmlmIChI
        YW5kbGViYXJzLkphdmFTY3JpcHRDb21waWxlcikgewogIEVtYmVyLkhhbmRs
        ZWJhcnMuSmF2YVNjcmlwdENvbXBpbGVyLnByb3RvdHlwZSA9IG9iamVjdENy
        ZWF0ZShIYW5kbGViYXJzLkphdmFTY3JpcHRDb21waWxlci5wcm90b3R5cGUp
        OwogIEVtYmVyLkhhbmRsZWJhcnMuSmF2YVNjcmlwdENvbXBpbGVyLnByb3Rv
        dHlwZS5jb21waWxlciA9IEVtYmVyLkhhbmRsZWJhcnMuSmF2YVNjcmlwdENv
        bXBpbGVyOwp9CgoKRW1iZXIuSGFuZGxlYmFycy5KYXZhU2NyaXB0Q29tcGls
        ZXIucHJvdG90eXBlLm5hbWVzcGFjZSA9ICJFbWJlci5IYW5kbGViYXJzIjsK
        CkVtYmVyLkhhbmRsZWJhcnMuSmF2YVNjcmlwdENvbXBpbGVyLnByb3RvdHlw
        ZS5pbml0aWFsaXplQnVmZmVyID0gZnVuY3Rpb24oKSB7CiAgcmV0dXJuICIn
        JyI7Cn07CgovKioKICBAcHJpdmF0ZQoKICBPdmVycmlkZSB0aGUgZGVmYXVs
        dCBidWZmZXIgZm9yIEVtYmVyIEhhbmRsZWJhcnMuIEJ5IGRlZmF1bHQsIEhh
        bmRsZWJhcnMKICBjcmVhdGVzIGFuIGVtcHR5IFN0cmluZyBhdCB0aGUgYmVn
        aW5uaW5nIG9mIGVhY2ggaW52b2NhdGlvbiBhbmQgYXBwZW5kcyB0bwogIGl0
        LiBFbWJlcidzIEhhbmRsZWJhcnMgb3ZlcnJpZGVzIHRoaXMgdG8gYXBwZW5k
        IHRvIGEgc2luZ2xlIHNoYXJlZCBidWZmZXIuCgogIEBtZXRob2QgYXBwZW5k
        VG9CdWZmZXIKICBAcGFyYW0gc3RyaW5nIHtTdHJpbmd9CiovCkVtYmVyLkhh
        bmRsZWJhcnMuSmF2YVNjcmlwdENvbXBpbGVyLnByb3RvdHlwZS5hcHBlbmRU
        b0J1ZmZlciA9IGZ1bmN0aW9uKHN0cmluZykgewogIHJldHVybiAiZGF0YS5i
        dWZmZXIucHVzaCgiK3N0cmluZysiKTsiOwp9OwoKLy8gSGFja3MgYWhlYWQ6
        Ci8vIEhhbmRsZWJhcnMgcHJlc2VudGx5IGhhcyBhIGJ1ZyB3aGVyZSB0aGUg
        YGJsb2NrSGVscGVyTWlzc2luZ2AgaG9vawovLyBkb2Vzbid0IGdldCBwYXNz
        ZWQgdGhlIG5hbWUgb2YgdGhlIG1pc3NpbmcgaGVscGVyIG5hbWUsIGJ1dCBy
        YXRoZXIKLy8gZ2V0cyBwYXNzZWQgdGhlIHZhbHVlIG9mIHRoYXQgbWlzc2lu
        ZyBoZWxwZXIgZXZhbHVhdGVkIG9uIHRoZSBjdXJyZW50Ci8vIGNvbnRleHQs
        IHdoaWNoIGlzIG1vc3QgbGlrZWx5IGB1bmRlZmluZWRgIGFuZCB0b3RhbGx5
        IHVzZWxlc3MuCi8vCi8vIFNvIHdlIGFsdGVyIHRoZSBjb21waWxlZCB0ZW1w
        bGF0ZSBmdW5jdGlvbiB0byBwYXNzIHRoZSBuYW1lIG9mIHRoZSBoZWxwZXIK
        Ly8gaW5zdGVhZCwgYXMgZXhwZWN0ZWQuCi8vCi8vIFRoaXMgY2FuIGdvIGF3
        YXkgb25jZSB0aGUgZm9sbG93aW5nIGlzIGNsb3NlZDoKLy8gaHR0cHM6Ly9n
        aXRodWIuY29tL3d5Y2F0cy9oYW5kbGViYXJzLmpzL2lzc3Vlcy82MTcKCnZh
        ciBET1RfTE9PS1VQX1JFR0VYID0gL2hlbHBlcnNcLiguKj8pXCkvLAogICAg
        QlJBQ0tFVF9TVFJJTkdfTE9PS1VQX1JFR0VYID0gL2hlbHBlcnNcWycoLio/
        KScvLAogICAgSU5WT0NBVElPTl9TUExJVFRJTkdfUkVHRVggPSAvKC4qYmxv
        Y2tIZWxwZXJNaXNzaW5nXC5jYWxsXCguKikoc3RhY2tbMC05XSspKCwuKikv
        OwoKRW1iZXIuSGFuZGxlYmFycy5KYXZhU2NyaXB0Q29tcGlsZXIuc3RyaW5n
        aWZ5TGFzdEJsb2NrSGVscGVyTWlzc2luZ0ludm9jYXRpb24gPSBmdW5jdGlv
        bihzb3VyY2UpIHsKICB2YXIgaGVscGVySW52b2NhdGlvbiA9IHNvdXJjZVtz
        b3VyY2UubGVuZ3RoIC0gMV0sCiAgICAgIGhlbHBlck5hbWUgPSAoRE9UX0xP
        T0tVUF9SRUdFWC5leGVjKGhlbHBlckludm9jYXRpb24pIHx8IEJSQUNLRVRf
        U1RSSU5HX0xPT0tVUF9SRUdFWC5leGVjKGhlbHBlckludm9jYXRpb24pKVsx
        XSwKICAgICAgbWF0Y2hlcyA9IElOVk9DQVRJT05fU1BMSVRUSU5HX1JFR0VY
        LmV4ZWMoaGVscGVySW52b2NhdGlvbik7CgogIHNvdXJjZVtzb3VyY2UubGVu
        Z3RoIC0gMV0gPSBtYXRjaGVzWzFdICsgIiciICsgaGVscGVyTmFtZSArICIn
        IiArIG1hdGNoZXNbM107Cn0KdmFyIHN0cmluZ2lmeUJsb2NrSGVscGVyTWlz
        c2luZyA9IEVtYmVyLkhhbmRsZWJhcnMuSmF2YVNjcmlwdENvbXBpbGVyLnN0
        cmluZ2lmeUxhc3RCbG9ja0hlbHBlck1pc3NpbmdJbnZvY2F0aW9uOwoKdmFy
        IG9yaWdpbmFsQmxvY2tWYWx1ZSA9IEVtYmVyLkhhbmRsZWJhcnMuSmF2YVNj
        cmlwdENvbXBpbGVyLnByb3RvdHlwZS5ibG9ja1ZhbHVlOwpFbWJlci5IYW5k
        bGViYXJzLkphdmFTY3JpcHRDb21waWxlci5wcm90b3R5cGUuYmxvY2tWYWx1
        ZSA9IGZ1bmN0aW9uKCkgewogIG9yaWdpbmFsQmxvY2tWYWx1ZS5hcHBseSh0
        aGlzLCBhcmd1bWVudHMpOwogIHN0cmluZ2lmeUJsb2NrSGVscGVyTWlzc2lu
        Zyh0aGlzLnNvdXJjZSk7Cn07Cgp2YXIgb3JpZ2luYWxBbWJpZ3VvdXNCbG9j
        a1ZhbHVlID0gRW1iZXIuSGFuZGxlYmFycy5KYXZhU2NyaXB0Q29tcGlsZXIu
        cHJvdG90eXBlLmFtYmlndW91c0Jsb2NrVmFsdWU7CkVtYmVyLkhhbmRsZWJh
        cnMuSmF2YVNjcmlwdENvbXBpbGVyLnByb3RvdHlwZS5hbWJpZ3VvdXNCbG9j
        a1ZhbHVlID0gZnVuY3Rpb24oKSB7CiAgb3JpZ2luYWxBbWJpZ3VvdXNCbG9j
        a1ZhbHVlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgc3RyaW5naWZ5Qmxv
        Y2tIZWxwZXJNaXNzaW5nKHRoaXMuc291cmNlKTsKfTsKCnZhciBwcmVmaXgg
        PSAiZW1iZXIiICsgKCtuZXcgRGF0ZSgpKSwgaW5jciA9IDE7CgovKioKICBA
        cHJpdmF0ZQoKICBSZXdyaXRlIHNpbXBsZSBtdXN0YWNoZXMgZnJvbSBge3tm
        b299fWAgdG8gYHt7YmluZCAiZm9vIn19YC4gVGhpcyBtZWFucyB0aGF0CiAg
        YWxsIHNpbXBsZSBtdXN0YWNoZXMgaW4gRW1iZXIncyBIYW5kbGViYXJzIHdp
        bGwgYWxzbyBzZXQgdXAgYW4gb2JzZXJ2ZXIgdG8KICBrZWVwIHRoZSBET00g
        dXAgdG8gZGF0ZSB3aGVuIHRoZSB1bmRlcmx5aW5nIHByb3BlcnR5IGNoYW5n
        ZXMuCgogIEBtZXRob2QgbXVzdGFjaGUKICBAZm9yIEVtYmVyLkhhbmRsZWJh
        cnMuQ29tcGlsZXIKICBAcGFyYW0gbXVzdGFjaGUKKi8KRW1iZXIuSGFuZGxl
        YmFycy5Db21waWxlci5wcm90b3R5cGUubXVzdGFjaGUgPSBmdW5jdGlvbiht
        dXN0YWNoZSkgewogIGlmIChtdXN0YWNoZS5pc0hlbHBlciAmJiBtdXN0YWNo
        ZS5pZC5zdHJpbmcgPT09ICdjb250cm9sJykgewogICAgbXVzdGFjaGUuaGFz
        aCA9IG11c3RhY2hlLmhhc2ggfHwgbmV3IEhhbmRsZWJhcnMuQVNULkhhc2hO
        b2RlKFtdKTsKICAgIG11c3RhY2hlLmhhc2gucGFpcnMucHVzaChbImNvbnRy
        b2xJRCIsIG5ldyBIYW5kbGViYXJzLkFTVC5TdHJpbmdOb2RlKHByZWZpeCAr
        IGluY3IrKyldKTsKICB9IGVsc2UgaWYgKG11c3RhY2hlLnBhcmFtcy5sZW5n
        dGggfHwgbXVzdGFjaGUuaGFzaCkgewogICAgLy8gbm8gY2hhbmdlcyByZXF1
        aXJlZAogIH0gZWxzZSB7CiAgICB2YXIgaWQgPSBuZXcgSGFuZGxlYmFycy5B
        U1QuSWROb2RlKFt7IHBhcnQ6ICdfdHJpYWdlTXVzdGFjaGUnIH1dKTsKCiAg
        ICAvLyBVcGRhdGUgdGhlIG11c3RhY2hlIG5vZGUgdG8gaW5jbHVkZSBhIGhh
        c2ggdmFsdWUgaW5kaWNhdGluZyB3aGV0aGVyIHRoZSBvcmlnaW5hbCBub2Rl
        CiAgICAvLyB3YXMgZXNjYXBlZC4gVGhpcyB3aWxsIGFsbG93IHVzIHRvIHBy
        b3Blcmx5IGVzY2FwZSB2YWx1ZXMgd2hlbiB0aGUgdW5kZXJseWluZyB2YWx1
        ZQogICAgLy8gY2hhbmdlcyBhbmQgd2UgbmVlZCB0byByZS1yZW5kZXIgdGhl
        IHZhbHVlLgogICAgaWYgKCFtdXN0YWNoZS5lc2NhcGVkKSB7CiAgICAgIG11
        c3RhY2hlLmhhc2ggPSBtdXN0YWNoZS5oYXNoIHx8IG5ldyBIYW5kbGViYXJz
        LkFTVC5IYXNoTm9kZShbXSk7CiAgICAgIG11c3RhY2hlLmhhc2gucGFpcnMu
        cHVzaChbInVuZXNjYXBlZCIsIG5ldyBIYW5kbGViYXJzLkFTVC5TdHJpbmdO
        b2RlKCJ0cnVlIildKTsKICAgIH0KICAgIG11c3RhY2hlID0gbmV3IEhhbmRs
        ZWJhcnMuQVNULk11c3RhY2hlTm9kZShbaWRdLmNvbmNhdChbbXVzdGFjaGUu
        aWRdKSwgbXVzdGFjaGUuaGFzaCwgIW11c3RhY2hlLmVzY2FwZWQpOwogIH0K
        CiAgcmV0dXJuIEhhbmRsZWJhcnMuQ29tcGlsZXIucHJvdG90eXBlLm11c3Rh
        Y2hlLmNhbGwodGhpcywgbXVzdGFjaGUpOwp9OwoKLyoqCiAgVXNlZCBmb3Ig
        cHJlY29tcGlsYXRpb24gb2YgRW1iZXIgSGFuZGxlYmFycyB0ZW1wbGF0ZXMu
        IFRoaXMgd2lsbCBub3QgYmUgdXNlZAogIGR1cmluZyBub3JtYWwgYXBwIGV4
        ZWN1dGlvbi4KCiAgQG1ldGhvZCBwcmVjb21waWxlCiAgQGZvciBFbWJlci5I
        YW5kbGViYXJzCiAgQHN0YXRpYwogIEBwYXJhbSB7U3RyaW5nfSBzdHJpbmcg
        VGhlIHRlbXBsYXRlIHRvIHByZWNvbXBpbGUKKi8KRW1iZXIuSGFuZGxlYmFy
        cy5wcmVjb21waWxlID0gZnVuY3Rpb24oc3RyaW5nKSB7CiAgdmFyIGFzdCA9
        IEhhbmRsZWJhcnMucGFyc2Uoc3RyaW5nKTsKCiAgdmFyIG9wdGlvbnMgPSB7
        CiAgICBrbm93bkhlbHBlcnM6IHsKICAgICAgYWN0aW9uOiB0cnVlLAogICAg
        ICB1bmJvdW5kOiB0cnVlLAogICAgICBiaW5kQXR0cjogdHJ1ZSwKICAgICAg
        dGVtcGxhdGU6IHRydWUsCiAgICAgIHZpZXc6IHRydWUsCiAgICAgIF90cmlh
        Z2VNdXN0YWNoZTogdHJ1ZQogICAgfSwKICAgIGRhdGE6IHRydWUsCiAgICBz
        dHJpbmdQYXJhbXM6IHRydWUKICB9OwoKICB2YXIgZW52aXJvbm1lbnQgPSBu
        ZXcgRW1iZXIuSGFuZGxlYmFycy5Db21waWxlcigpLmNvbXBpbGUoYXN0LCBv
        cHRpb25zKTsKICByZXR1cm4gbmV3IEVtYmVyLkhhbmRsZWJhcnMuSmF2YVNj
        cmlwdENvbXBpbGVyKCkuY29tcGlsZShlbnZpcm9ubWVudCwgb3B0aW9ucywg
        dW5kZWZpbmVkLCB0cnVlKTsKfTsKCi8vIFdlIGRvbid0IHN1cHBvcnQgdGhp
        cyBmb3IgSGFuZGxlYmFycyBydW50aW1lLW9ubHkKaWYgKEhhbmRsZWJhcnMu
        Y29tcGlsZSkgewogIC8qKgogICAgVGhlIGVudHJ5IHBvaW50IGZvciBFbWJl
        ciBIYW5kbGViYXJzLiBUaGlzIHJlcGxhY2VzIHRoZSBkZWZhdWx0CiAgICBg
        SGFuZGxlYmFycy5jb21waWxlYCBhbmQgdHVybnMgb24gdGVtcGxhdGUtbG9j
        YWwgZGF0YSBhbmQgU3RyaW5nCiAgICBwYXJhbWV0ZXJzLgoKICAgIEBtZXRo
        b2QgY29tcGlsZQogICAgQGZvciBFbWJlci5IYW5kbGViYXJzCiAgICBAc3Rh
        dGljCiAgICBAcGFyYW0ge1N0cmluZ30gc3RyaW5nIFRoZSB0ZW1wbGF0ZSB0
        byBjb21waWxlCiAgICBAcmV0dXJuIHtGdW5jdGlvbn0KICAqLwogIEVtYmVy
        LkhhbmRsZWJhcnMuY29tcGlsZSA9IGZ1bmN0aW9uKHN0cmluZykgewogICAg
        dmFyIGFzdCA9IEhhbmRsZWJhcnMucGFyc2Uoc3RyaW5nKTsKICAgIHZhciBv
        cHRpb25zID0geyBkYXRhOiB0cnVlLCBzdHJpbmdQYXJhbXM6IHRydWUgfTsK
        ICAgIHZhciBlbnZpcm9ubWVudCA9IG5ldyBFbWJlci5IYW5kbGViYXJzLkNv
        bXBpbGVyKCkuY29tcGlsZShhc3QsIG9wdGlvbnMpOwogICAgdmFyIHRlbXBs
        YXRlU3BlYyA9IG5ldyBFbWJlci5IYW5kbGViYXJzLkphdmFTY3JpcHRDb21w
        aWxlcigpLmNvbXBpbGUoZW52aXJvbm1lbnQsIG9wdGlvbnMsIHVuZGVmaW5l
        ZCwgdHJ1ZSk7CgogICAgdmFyIHRlbXBsYXRlID0gRW1iZXIuSGFuZGxlYmFy
        cy50ZW1wbGF0ZSh0ZW1wbGF0ZVNwZWMpOwogICAgdGVtcGxhdGUuaXNNZXRo
        b2QgPSBmYWxzZTsgLy9NYWtlIHN1cmUgd2UgZG9uJ3Qgd3JhcCB0ZW1wbGF0
        ZXMgd2l0aCAuX3N1cGVyCgogICAgcmV0dXJuIHRlbXBsYXRlOwogIH07Cn0K
        Cgp9KSgpOwoKKGZ1bmN0aW9uKCkgewp2YXIgc2xpY2UgPSBBcnJheS5wcm90
        b3R5cGUuc2xpY2UsCiAgICBvcmlnaW5hbFRlbXBsYXRlID0gRW1iZXIuSGFu
        ZGxlYmFycy50ZW1wbGF0ZTsKCi8qKgogIEBwcml2YXRlCgogIElmIGEgcGF0
        aCBzdGFydHMgd2l0aCBhIHJlc2VydmVkIGtleXdvcmQsIHJldHVybnMgdGhl
        IHJvb3QKICB0aGF0IHNob3VsZCBiZSB1c2VkLgoKICBAbWV0aG9kIG5vcm1h
        bGl6ZVBhdGgKICBAZm9yIEVtYmVyCiAgQHBhcmFtIHJvb3Qge09iamVjdH0K
        ICBAcGFyYW0gcGF0aCB7U3RyaW5nfQogIEBwYXJhbSBkYXRhIHtIYXNofQoq
        Lwp2YXIgbm9ybWFsaXplUGF0aCA9IEVtYmVyLkhhbmRsZWJhcnMubm9ybWFs
        aXplUGF0aCA9IGZ1bmN0aW9uKHJvb3QsIHBhdGgsIGRhdGEpIHsKICB2YXIg
        a2V5d29yZHMgPSAoZGF0YSAmJiBkYXRhLmtleXdvcmRzKSB8fCB7fSwKICAg
        ICAga2V5d29yZCwgaXNLZXl3b3JkOwoKICAvLyBHZXQgdGhlIGZpcnN0IHNl
        Z21lbnQgb2YgdGhlIHBhdGguIEZvciBleGFtcGxlLCBpZiB0aGUKICAvLyBw
        YXRoIGlzICJmb28uYmFyLmJheiIsIHJldHVybnMgImZvbyIuCiAga2V5d29y
        ZCA9IHBhdGguc3BsaXQoJy4nLCAxKVswXTsKCiAgLy8gVGVzdCB0byBzZWUg
        aWYgdGhlIGZpcnN0IHBhdGggaXMgYSBrZXl3b3JkIHRoYXQgaGFzIGJlZW4K
        ICAvLyBwYXNzZWQgYWxvbmcgaW4gdGhlIHZpZXcncyBkYXRhIGhhc2guIElm
        IHNvLCB3ZSB3aWxsIHRyZWF0CiAgLy8gdGhhdCBvYmplY3QgYXMgdGhlIG5l
        dyByb290LgogIGlmIChrZXl3b3Jkcy5oYXNPd25Qcm9wZXJ0eShrZXl3b3Jk
        KSkgewogICAgLy8gTG9vayB1cCB0aGUgdmFsdWUgaW4gdGhlIHRlbXBsYXRl
        J3MgZGF0YSBoYXNoLgogICAgcm9vdCA9IGtleXdvcmRzW2tleXdvcmRdOwog
        ICAgaXNLZXl3b3JkID0gdHJ1ZTsKCiAgICAvLyBIYW5kbGUgY2FzZXMgd2hl
        cmUgdGhlIGVudGlyZSBwYXRoIGlzIHRoZSByZXNlcnZlZAogICAgLy8gd29y
        ZC4gSW4gdGhhdCBjYXNlLCByZXR1cm4gdGhlIG9iamVjdCBpdHNlbGYuCiAg
        ICBpZiAocGF0aCA9PT0ga2V5d29yZCkgewogICAgICBwYXRoID0gJyc7CiAg
        ICB9IGVsc2UgewogICAgICAvLyBTdHJpcCB0aGUga2V5d29yZCBmcm9tIHRo
        ZSBwYXRoIGFuZCBsb29rIHVwCiAgICAgIC8vIHRoZSByZW1haW5kZXIgZnJv
        bSB0aGUgbmV3bHkgZm91bmQgcm9vdC4KICAgICAgcGF0aCA9IHBhdGguc3Vi
        c3RyKGtleXdvcmQubGVuZ3RoKzEpOwogICAgfQogIH0KCiAgcmV0dXJuIHsg
        cm9vdDogcm9vdCwgcGF0aDogcGF0aCwgaXNLZXl3b3JkOiBpc0tleXdvcmQg
        fTsKfTsKCgovKioKICBMb29rdXAgYm90aCBvbiByb290IGFuZCBvbiB3aW5k
        b3cuIElmIHRoZSBwYXRoIHN0YXJ0cyB3aXRoCiAgYSBrZXl3b3JkLCB0aGUg
        Y29ycmVzcG9uZGluZyBvYmplY3Qgd2lsbCBiZSBsb29rZWQgdXAgaW4gdGhl
        CiAgdGVtcGxhdGUncyBkYXRhIGhhc2ggYW5kIHVzZWQgdG8gcmVzb2x2ZSB0
        aGUgcGF0aC4KCiAgQG1ldGhvZCBnZXQKICBAZm9yIEVtYmVyLkhhbmRsZWJh
        cnMKICBAcGFyYW0ge09iamVjdH0gcm9vdCBUaGUgb2JqZWN0IHRvIGxvb2sg
        dXAgdGhlIHByb3BlcnR5IG9uCiAgQHBhcmFtIHtTdHJpbmd9IHBhdGggVGhl
        IHBhdGggdG8gYmUgbG9va2VkdXAKICBAcGFyYW0ge09iamVjdH0gb3B0aW9u
        cyBUaGUgdGVtcGxhdGUncyBvcHRpb24gaGFzaAoqLwp2YXIgaGFuZGxlYmFy
        c0dldCA9IEVtYmVyLkhhbmRsZWJhcnMuZ2V0ID0gZnVuY3Rpb24ocm9vdCwg
        cGF0aCwgb3B0aW9ucykgewogIHZhciBkYXRhID0gb3B0aW9ucyAmJiBvcHRp
        b25zLmRhdGEsCiAgICAgIG5vcm1hbGl6ZWRQYXRoID0gbm9ybWFsaXplUGF0
        aChyb290LCBwYXRoLCBkYXRhKSwKICAgICAgdmFsdWU7CgogIC8vIEluIGNh
        c2VzIHdoZXJlIHRoZSBwYXRoIGJlZ2lucyB3aXRoIGEga2V5d29yZCwgY2hh
        bmdlIHRoZQogIC8vIHJvb3QgdG8gdGhlIHZhbHVlIHJlcHJlc2VudGVkIGJ5
        IHRoYXQga2V5d29yZCwgYW5kIGVuc3VyZQogIC8vIHRoZSBwYXRoIGlzIHJl
        bGF0aXZlIHRvIGl0LgogIHJvb3QgPSBub3JtYWxpemVkUGF0aC5yb290Owog
        IHBhdGggPSBub3JtYWxpemVkUGF0aC5wYXRoOwoKICB2YWx1ZSA9IEVtYmVy
        LmdldChyb290LCBwYXRoKTsKCiAgLy8gSWYgdGhlIHBhdGggc3RhcnRzIHdp
        dGggYSBjYXBpdGFsIGxldHRlciwgbG9vayBpdCB1cCBvbiBFbWJlci5sb29r
        dXAsCiAgLy8gd2hpY2ggZGVmYXVsdHMgdG8gdGhlIGB3aW5kb3dgIG9iamVj
        dCBpbiBicm93c2Vycy4KICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCAmJiBy
        b290ICE9PSBFbWJlci5sb29rdXAgJiYgRW1iZXIuaXNHbG9iYWxQYXRoKHBh
        dGgpKSB7CiAgICB2YWx1ZSA9IEVtYmVyLmdldChFbWJlci5sb29rdXAsIHBh
        dGgpOwogIH0KICByZXR1cm4gdmFsdWU7Cn07CgpFbWJlci5IYW5kbGViYXJz
        LnJlc29sdmVQYXJhbXMgPSBmdW5jdGlvbihjb250ZXh0LCBwYXJhbXMsIG9w
        dGlvbnMpIHsKICB2YXIgcmVzb2x2ZWRQYXJhbXMgPSBbXSwgdHlwZXMgPSBv
        cHRpb25zLnR5cGVzLCBwYXJhbSwgdHlwZTsKCiAgZm9yICh2YXIgaT0wLCBs
        PXBhcmFtcy5sZW5ndGg7IGk8bDsgaSsrKSB7CiAgICBwYXJhbSA9IHBhcmFt
        c1tpXTsKICAgIHR5cGUgPSB0eXBlc1tpXTsKCiAgICBpZiAodHlwZSA9PT0g
        J0lEJykgewogICAgICByZXNvbHZlZFBhcmFtcy5wdXNoKGhhbmRsZWJhcnNH
        ZXQoY29udGV4dCwgcGFyYW0sIG9wdGlvbnMpKTsKICAgIH0gZWxzZSB7CiAg
        ICAgIHJlc29sdmVkUGFyYW1zLnB1c2gocGFyYW0pOwogICAgfQogIH0KCiAg
        cmV0dXJuIHJlc29sdmVkUGFyYW1zOwp9OwoKRW1iZXIuSGFuZGxlYmFycy5y
        ZXNvbHZlSGFzaCA9IGZ1bmN0aW9uKGNvbnRleHQsIGhhc2gsIG9wdGlvbnMp
        IHsKICB2YXIgcmVzb2x2ZWRIYXNoID0ge30sIHR5cGVzID0gb3B0aW9ucy5o
        YXNoVHlwZXMsIHR5cGU7CgogIGZvciAodmFyIGtleSBpbiBoYXNoKSB7CiAg
        ICBpZiAoIWhhc2guaGFzT3duUHJvcGVydHkoa2V5KSkgeyBjb250aW51ZTsg
        fQoKICAgIHR5cGUgPSB0eXBlc1trZXldOwoKICAgIGlmICh0eXBlID09PSAn
        SUQnKSB7CiAgICAgIHJlc29sdmVkSGFzaFtrZXldID0gaGFuZGxlYmFyc0dl
        dChjb250ZXh0LCBoYXNoW2tleV0sIG9wdGlvbnMpOwogICAgfSBlbHNlIHsK
        ICAgICAgcmVzb2x2ZWRIYXNoW2tleV0gPSBoYXNoW2tleV07CiAgICB9CiAg
        fQoKICByZXR1cm4gcmVzb2x2ZWRIYXNoOwp9OwoKLyoqCiAgQHByaXZhdGUK
        CiAgUmVnaXN0ZXJzIGEgaGVscGVyIGluIEhhbmRsZWJhcnMgdGhhdCB3aWxs
        IGJlIGNhbGxlZCBpZiBubyBwcm9wZXJ0eSB3aXRoIHRoZQogIGdpdmVuIG5h
        bWUgY2FuIGJlIGZvdW5kIG9uIHRoZSBjdXJyZW50IGNvbnRleHQgb2JqZWN0
        LCBhbmQgbm8gaGVscGVyIHdpdGgKICB0aGF0IG5hbWUgaXMgcmVnaXN0ZXJl
        ZC4KCiAgVGhpcyB0aHJvd3MgYW4gZXhjZXB0aW9uIHdpdGggYSBtb3JlIGhl
        bHBmdWwgZXJyb3IgbWVzc2FnZSBzbyB0aGUgdXNlciBjYW4KICB0cmFjayBk
        b3duIHdoZXJlIHRoZSBwcm9ibGVtIGlzIGhhcHBlbmluZy4KCiAgQG1ldGhv
        ZCBoZWxwZXJNaXNzaW5nCiAgQGZvciBFbWJlci5IYW5kbGViYXJzLmhlbHBl
        cnMKICBAcGFyYW0ge1N0cmluZ30gcGF0aAogIEBwYXJhbSB7SGFzaH0gb3B0
        aW9ucwoqLwpFbWJlci5IYW5kbGViYXJzLnJlZ2lzdGVySGVscGVyKCdoZWxw
        ZXJNaXNzaW5nJywgZnVuY3Rpb24ocGF0aCkgewogIHZhciBlcnJvciwgdmll
        dyA9ICIiOwoKICB2YXIgb3B0aW9ucyA9IGFyZ3VtZW50c1thcmd1bWVudHMu
        bGVuZ3RoIC0gMV07CgogIAoKICAgIHZhciBoZWxwZXIgPSBFbWJlci5IYW5k
        bGViYXJzLnJlc29sdmVIZWxwZXIob3B0aW9ucy5kYXRhLnZpZXcuY29udGFp
        bmVyLCBwYXRoKTsKCiAgICBpZiAoaGVscGVyKSB7CiAgICAgIHJldHVybiBo
        ZWxwZXIuYXBwbHkodGhpcywgc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpKTsK
        ICAgIH0KICAKCiAgZXJyb3IgPSAiJUAgSGFuZGxlYmFycyBlcnJvcjogQ291
        bGQgbm90IGZpbmQgcHJvcGVydHkgJyVAJyBvbiBvYmplY3QgJUAuIjsKICBp
        ZiAob3B0aW9ucy5kYXRhKSB7CiAgICB2aWV3ID0gb3B0aW9ucy5kYXRhLnZp
        ZXc7CiAgfQogIHRocm93IG5ldyBFbWJlci5FcnJvcihFbWJlci5TdHJpbmcu
        Zm10KGVycm9yLCBbdmlldywgcGF0aCwgdGhpc10pKTsKfSk7CgovKioKICBA
        cHJpdmF0ZQoKICBSZWdpc3RlcnMgYSBoZWxwZXIgaW4gSGFuZGxlYmFycyB0
        aGF0IHdpbGwgYmUgY2FsbGVkIGlmIG5vIHByb3BlcnR5IHdpdGggdGhlCiAg
        Z2l2ZW4gbmFtZSBjYW4gYmUgZm91bmQgb24gdGhlIGN1cnJlbnQgY29udGV4
        dCBvYmplY3QsIGFuZCBubyBoZWxwZXIgd2l0aAogIHRoYXQgbmFtZSBpcyBy
        ZWdpc3RlcmVkLgoKICBUaGlzIHRocm93cyBhbiBleGNlcHRpb24gd2l0aCBh
        IG1vcmUgaGVscGZ1bCBlcnJvciBtZXNzYWdlIHNvIHRoZSB1c2VyIGNhbgog
        IHRyYWNrIGRvd24gd2hlcmUgdGhlIHByb2JsZW0gaXMgaGFwcGVuaW5nLgoK
        ICBAbWV0aG9kIGhlbHBlck1pc3NpbmcKICBAZm9yIEVtYmVyLkhhbmRsZWJh
        cnMuaGVscGVycwogIEBwYXJhbSB7U3RyaW5nfSBwYXRoCiAgQHBhcmFtIHtI
        YXNofSBvcHRpb25zCiovCkVtYmVyLkhhbmRsZWJhcnMucmVnaXN0ZXJIZWxw
        ZXIoJ2Jsb2NrSGVscGVyTWlzc2luZycsIGZ1bmN0aW9uKHBhdGgpIHsKCiAg
        dmFyIG9wdGlvbnMgPSBhcmd1bWVudHNbYXJndW1lbnRzLmxlbmd0aCAtIDFd
        OwoKICAKCiAgICB2YXIgaGVscGVyID0gRW1iZXIuSGFuZGxlYmFycy5yZXNv
        bHZlSGVscGVyKG9wdGlvbnMuZGF0YS52aWV3LmNvbnRhaW5lciwgcGF0aCk7
        CgogICAgaWYgKGhlbHBlcikgewogICAgICByZXR1cm4gaGVscGVyLmFwcGx5
        KHRoaXMsIHNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKSk7CiAgICB9CiAgCgog
        IHJldHVybiBIYW5kbGViYXJzLmhlbHBlcnMuYmxvY2tIZWxwZXJNaXNzaW5n
        LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0pOwoKLyoqCiAgUmVnaXN0ZXIg
        YSBib3VuZCBoYW5kbGViYXJzIGhlbHBlci4gQm91bmQgaGVscGVycyBiZWhh
        dmUgc2ltaWxhcmx5IHRvIHJlZ3VsYXIKICBoYW5kbGViYXJzIGhlbHBlcnMs
        IHdpdGggdGhlIGFkZGVkIGFiaWxpdHkgdG8gcmUtcmVuZGVyIHdoZW4gdGhl
        IHVuZGVybHlpbmcgZGF0YQogIGNoYW5nZXMuCgogICMjIFNpbXBsZSBleGFt
        cGxlCgogIGBgYGphdmFzY3JpcHQKICBFbWJlci5IYW5kbGViYXJzLnJlZ2lz
        dGVyQm91bmRIZWxwZXIoJ2NhcGl0YWxpemUnLCBmdW5jdGlvbih2YWx1ZSkg
        ewogICAgcmV0dXJuIHZhbHVlLnRvVXBwZXJDYXNlKCk7CiAgfSk7CiAgYGBg
        CgogIFRoZSBhYm92ZSBib3VuZCBoZWxwZXIgY2FuIGJlIHVzZWQgaW5zaWRl
        IG9mIHRlbXBsYXRlcyBhcyBmb2xsb3dzOgoKICBgYGBoYW5kbGViYXJzCiAg
        e3tjYXBpdGFsaXplIG5hbWV9fQogIGBgYAoKICBJbiB0aGlzIGNhc2UsIHdo
        ZW4gdGhlIGBuYW1lYCBwcm9wZXJ0eSBvZiB0aGUgdGVtcGxhdGUncyBjb250
        ZXh0IGNoYW5nZXMsCiAgdGhlIHJlbmRlcmVkIHZhbHVlIG9mIHRoZSBoZWxw
        ZXIgd2lsbCB1cGRhdGUgdG8gcmVmbGVjdCB0aGlzIGNoYW5nZS4KCiAgIyMg
        RXhhbXBsZSB3aXRoIG9wdGlvbnMKCiAgTGlrZSBub3JtYWwgaGFuZGxlYmFy
        cyBoZWxwZXJzLCBib3VuZCBoZWxwZXJzIGhhdmUgYWNjZXNzIHRvIHRoZSBv
        cHRpb25zCiAgcGFzc2VkIGludG8gdGhlIGhlbHBlciBjYWxsLgoKICBgYGBq
        YXZhc2NyaXB0CiAgRW1iZXIuSGFuZGxlYmFycy5yZWdpc3RlckJvdW5kSGVs
        cGVyKCdyZXBlYXQnLCBmdW5jdGlvbih2YWx1ZSwgb3B0aW9ucykgewogICAg
        dmFyIGNvdW50ID0gb3B0aW9ucy5oYXNoLmNvdW50OwogICAgdmFyIGEgPSBb
        XTsKICAgIHdoaWxlKGEubGVuZ3RoIDwgY291bnQpIHsKICAgICAgICBhLnB1
        c2godmFsdWUpOwogICAgfQogICAgcmV0dXJuIGEuam9pbignJyk7CiAgfSk7
        CiAgYGBgCgogIFRoaXMgaGVscGVyIGNvdWxkIGJlIHVzZWQgaW4gYSB0ZW1w
        bGF0ZSBhcyBmb2xsb3dzOgoKICBgYGBoYW5kbGViYXJzCiAge3tyZXBlYXQg
        dGV4dCBjb3VudD0zfX0KICBgYGAKCiAgIyMgRXhhbXBsZSB3aXRoIGJvdW5k
        IG9wdGlvbnMKCiAgQm91bmQgaGFzaCBvcHRpb25zIGFyZSBhbHNvIHN1cHBv
        cnRlZC4gRXhhbXBsZToKCiAgYGBgaGFuZGxlYmFycwogIHt7cmVwZWF0IHRl
        eHQgY291bnRCaW5kaW5nPSJudW1SZXBlYXRzIn19CiAgYGBgCgogIEluIHRo
        aXMgZXhhbXBsZSwgY291bnQgd2lsbCBiZSBib3VuZCB0byB0aGUgdmFsdWUg
        b2YKICB0aGUgYG51bVJlcGVhdHNgIHByb3BlcnR5IG9uIHRoZSBjb250ZXh0
        LiBJZiB0aGF0IHByb3BlcnR5CiAgY2hhbmdlcywgdGhlIGhlbHBlciB3aWxs
        IGJlIHJlLXJlbmRlcmVkLgoKICAjIyBFeGFtcGxlIHdpdGggZXh0cmEgZGVw
        ZW5kZW5jaWVzCgogIFRoZSBgRW1iZXIuSGFuZGxlYmFycy5yZWdpc3RlckJv
        dW5kSGVscGVyYCBtZXRob2QgdGFrZXMgYSB2YXJpYWJsZSBsZW5ndGgKICB0
        aGlyZCBwYXJhbWV0ZXIgd2hpY2ggaW5kaWNhdGVzIGV4dHJhIGRlcGVuZGVu
        Y2llcyBvbiB0aGUgcGFzc2VkIGluIHZhbHVlLgogIFRoaXMgYWxsb3dzIHRo
        ZSBoYW5kbGViYXJzIGhlbHBlciB0byB1cGRhdGUgd2hlbiB0aGVzZSBkZXBl
        bmRlbmNpZXMgY2hhbmdlLgoKICBgYGBqYXZhc2NyaXB0CiAgRW1iZXIuSGFu
        ZGxlYmFycy5yZWdpc3RlckJvdW5kSGVscGVyKCdjYXBpdGFsaXplTmFtZScs
        IGZ1bmN0aW9uKHZhbHVlKSB7CiAgICByZXR1cm4gdmFsdWUuZ2V0KCduYW1l
        JykudG9VcHBlckNhc2UoKTsKICB9LCAnbmFtZScpOwogIGBgYAoKICAjIyBF
        eGFtcGxlIHdpdGggbXVsdGlwbGUgYm91bmQgcHJvcGVydGllcwoKICBgRW1i
        ZXIuSGFuZGxlYmFycy5yZWdpc3RlckJvdW5kSGVscGVyYCBzdXBwb3J0cyBi
        aW5kaW5nIHRvCiAgbXVsdGlwbGUgcHJvcGVydGllcywgZS5nLjoKCiAgYGBg
        amF2YXNjcmlwdAogIEVtYmVyLkhhbmRsZWJhcnMucmVnaXN0ZXJCb3VuZEhl
        bHBlcignY29uY2F0ZW5hdGUnLCBmdW5jdGlvbigpIHsKICAgIHZhciB2YWx1
        ZXMgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDAs
        IC0xKTsKICAgIHJldHVybiB2YWx1ZXMuam9pbignfHwnKTsKICB9KTsKICBg
        YGAKCiAgV2hpY2ggYWxsb3dzIGZvciB0ZW1wbGF0ZSBzeW50YXggc3VjaCBh
        cyBge3tjb25jYXRlbmF0ZSBwcm9wMSBwcm9wMn19YCBvcgogIGB7e2NvbmNh
        dGVuYXRlIHByb3AxIHByb3AyIHByb3AzfX1gLiBJZiBhbnkgb2YgdGhlIHBy
        b3BlcnRpZXMgY2hhbmdlLAogIHRoZSBoZWxwciB3aWxsIHJlLXJlbmRlci4g
        IE5vdGUgdGhhdCBkZXBlbmRlbmN5IGtleXMgY2Fubm90IGJlCiAgdXNpbmcg
        aW4gY29uanVuY3Rpb24gd2l0aCBtdWx0aS1wcm9wZXJ0eSBoZWxwZXJzLCBz
        aW5jZSBpdCBpcyBhbWJpZ3VvdXMKICB3aGljaCBwcm9wZXJ0eSB0aGUgZGVw
        ZW5kZW50IGtleXMgd291bGQgYmVsb25nIHRvLgoKICAjIyBVc2Ugd2l0aCB1
        bmJvdW5kIGhlbHBlcgoKICBUaGUgYHt7dW5ib3VuZH19YCBoZWxwZXIgY2Fu
        IGJlIHVzZWQgd2l0aCBib3VuZCBoZWxwZXIgaW52b2NhdGlvbnMKICB0byBy
        ZW5kZXIgdGhlbSBpbiB0aGVpciB1bmJvdW5kIGZvcm0sIGUuZy4KCiAgYGBg
        aGFuZGxlYmFycwogIHt7dW5ib3VuZCBjYXBpdGFsaXplIG5hbWV9fQogIGBg
        YAoKICBJbiB0aGlzIGV4YW1wbGUsIGlmIHRoZSBuYW1lIHByb3BlcnR5IGNo
        YW5nZXMsIHRoZSBoZWxwZXIKICB3aWxsIG5vdCByZS1yZW5kZXIuCgogICMj
        IFVzZSB3aXRoIGJsb2NrcyBub3Qgc3VwcG9ydGVkCgogIEJvdW5kIGhlbHBl
        cnMgZG8gbm90IHN1cHBvcnQgdXNlIHdpdGggSGFuZGxlYmFycyBibG9ja3Mg
        b3IKICB0aGUgYWRkaXRpb24gb2YgY2hpbGQgdmlld3Mgb2YgYW55IGtpbmQu
        CgogIEBtZXRob2QgcmVnaXN0ZXJCb3VuZEhlbHBlcgogIEBmb3IgRW1iZXIu
        SGFuZGxlYmFycwogIEBwYXJhbSB7U3RyaW5nfSBuYW1lCiAgQHBhcmFtIHtG
        dW5jdGlvbn0gZnVuY3Rpb24KICBAcGFyYW0ge1N0cmluZ30gZGVwZW5kZW50
        S2V5cyoKKi8KRW1iZXIuSGFuZGxlYmFycy5yZWdpc3RlckJvdW5kSGVscGVy
        ID0gZnVuY3Rpb24obmFtZSwgZm4pIHsKICB2YXIgYm91bmRIZWxwZXJBcmdz
        ID0gc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpLAogICAgICBib3VuZEZuID0g
        RW1iZXIuSGFuZGxlYmFycy5tYWtlQm91bmRIZWxwZXIuYXBwbHkodGhpcywg
        Ym91bmRIZWxwZXJBcmdzKTsKICBFbWJlci5IYW5kbGViYXJzLnJlZ2lzdGVy
        SGVscGVyKG5hbWUsIGJvdW5kRm4pOwp9OwoKLyoqCiAgQHByaXZhdGUKCiAg
        QSAobW9zdGx5KSBwcml2YXRlIGhlbHBlciBmdW5jdGlvbiB0byBgcmVnaXN0
        ZXJCb3VuZEhlbHBlcmAuIFRha2VzIHRoZQogIHByb3ZpZGVkIEhhbmRsZWJh
        cnMgaGVscGVyIGZ1bmN0aW9uIGZuIGFuZCByZXR1cm5zIGl0IGluIHdyYXBw
        ZWQKICBib3VuZCBoZWxwZXIgZm9ybS4KCiAgVGhlIG1haW4gdXNlIGNhc2Ug
        Zm9yIHVzaW5nIHRoaXMgb3V0c2lkZSBvZiBgcmVnaXN0ZXJCb3VuZEhlbHBl
        cmAKICBpcyBmb3IgcmVnaXN0ZXJpbmcgaGVscGVycyBvbiB0aGUgY29udGFp
        bmVyOgoKICBgYGBqcwogIHZhciBib3VuZEhlbHBlckZuID0gRW1iZXIuSGFu
        ZGxlYmFycy5tYWtlQm91bmRIZWxwZXIoZnVuY3Rpb24od29yZCkgewogICAg
        cmV0dXJuIHdvcmQudG9VcHBlckNhc2UoKTsKICB9KTsKCiAgY29udGFpbmVy
        LnJlZ2lzdGVyKCdoZWxwZXI6bXktYm91bmQtaGVscGVyJywgYm91bmRIZWxw
        ZXJGbik7CiAgYGBgCgogIEluIHRoZSBhYm92ZSBleGFtcGxlLCBpZiB0aGUg
        aGVscGVyIGZ1bmN0aW9uIGhhZG4ndCBiZWVuIHdyYXBwZWQgaW4KICBgbWFr
        ZUJvdW5kSGVscGVyYCwgdGhlIHJlZ2lzdGVyZWQgaGVscGVyIHdvdWxkIGJl
        IHVuYm91bmQuCgogIEBtZXRob2QgbWFrZUJvdW5kSGVscGVyCiAgQGZvciBF
        bWJlci5IYW5kbGViYXJzCiAgQHBhcmFtIHtGdW5jdGlvbn0gZnVuY3Rpb24K
        ICBAcGFyYW0ge1N0cmluZ30gZGVwZW5kZW50S2V5cyoKKi8KRW1iZXIuSGFu
        ZGxlYmFycy5tYWtlQm91bmRIZWxwZXIgPSBmdW5jdGlvbihmbikgewogIHZh
        ciBkZXBlbmRlbnRLZXlzID0gc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpOwoK
        ICBmdW5jdGlvbiBoZWxwZXIoKSB7CiAgICB2YXIgcHJvcGVydGllcyA9IHNs
        aWNlLmNhbGwoYXJndW1lbnRzLCAwLCAtMSksCiAgICAgIG51bVByb3BlcnRp
        ZXMgPSBwcm9wZXJ0aWVzLmxlbmd0aCwKICAgICAgb3B0aW9ucyA9IGFyZ3Vt
        ZW50c1thcmd1bWVudHMubGVuZ3RoIC0gMV0sCiAgICAgIG5vcm1hbGl6ZWRQ
        cm9wZXJ0aWVzID0gW10sCiAgICAgIHR5cGVzID0gb3B0aW9ucy50eXBlcywK
        ICAgICAgZGF0YSA9IG9wdGlvbnMuZGF0YSwKICAgICAgaGFzaCA9IG9wdGlv
        bnMuaGFzaCwKICAgICAgdmlldyA9IGRhdGEudmlldywKICAgICAgY29udGV4
        dHMgPSBvcHRpb25zLmNvbnRleHRzLAogICAgICBjdXJyZW50Q29udGV4dCA9
        IChjb250ZXh0cyAmJiBjb250ZXh0cy5sZW5ndGgpID8gY29udGV4dHNbMF0g
        OiB0aGlzLAogICAgICBwcmVmaXhQYXRoRm9yRGVwZW5kZW50S2V5cyA9ICcn
        LAogICAgICBsb2MsIGxlbiwgaGFzaE9wdGlvbiwKICAgICAgYm91bmRPcHRp
        b24sIHByb3BlcnR5LAogICAgICBub3JtYWxpemVkVmFsdWUgPSBFbWJlci5f
        U2ltcGxlSGFuZGxlYmFyc1ZpZXcucHJvdG90eXBlLm5vcm1hbGl6ZWRWYWx1
        ZTsKCiAgICBFbWJlci5hc3NlcnQoInJlZ2lzdGVyQm91bmRIZWxwZXItZ2Vu
        ZXJhdGVkIGhlbHBlcnMgZG8gbm90IHN1cHBvcnQgdXNlIHdpdGggSGFuZGxl
        YmFycyBibG9ja3MuIiwgIW9wdGlvbnMuZm4pOwoKICAgIC8vIERldGVjdCBi
        b3VuZCBvcHRpb25zIChlLmcuIGNvdW50QmluZGluZz0ib3RoZXJDb3VudCIp
        CiAgICB2YXIgYm91bmRPcHRpb25zID0gaGFzaC5ib3VuZE9wdGlvbnMgPSB7
        fTsKICAgIGZvciAoaGFzaE9wdGlvbiBpbiBoYXNoKSB7CiAgICAgIGlmIChF
        bWJlci5JU19CSU5ESU5HLnRlc3QoaGFzaE9wdGlvbikpIHsKICAgICAgICAv
        LyBMb3Agb2ZmICdCaW5kaW5nJyBzdWZmaXguCiAgICAgICAgYm91bmRPcHRp
        b25zW2hhc2hPcHRpb24uc2xpY2UoMCwgLTcpXSA9IGhhc2hbaGFzaE9wdGlv
        bl07CiAgICAgIH0KICAgIH0KCiAgICAvLyBFeHBvc2UgcHJvcGVydHkgbmFt
        ZXMgb24gZGF0YS5wcm9wZXJ0aWVzIG9iamVjdC4KICAgIHZhciB3YXRjaGVk
        UHJvcGVydGllcyA9IFtdOwogICAgZGF0YS5wcm9wZXJ0aWVzID0gW107CiAg
        ICBmb3IgKGxvYyA9IDA7IGxvYyA8IG51bVByb3BlcnRpZXM7ICsrbG9jKSB7
        CiAgICAgIGRhdGEucHJvcGVydGllcy5wdXNoKHByb3BlcnRpZXNbbG9jXSk7
        CiAgICAgIGlmICh0eXBlc1tsb2NdID09PSAnSUQnKSB7CiAgICAgICAgdmFy
        IG5vcm1hbGl6ZWRQcm9wID0gbm9ybWFsaXplUGF0aChjdXJyZW50Q29udGV4
        dCwgcHJvcGVydGllc1tsb2NdLCBkYXRhKTsKICAgICAgICBub3JtYWxpemVk
        UHJvcGVydGllcy5wdXNoKG5vcm1hbGl6ZWRQcm9wKTsKICAgICAgICB3YXRj
        aGVkUHJvcGVydGllcy5wdXNoKG5vcm1hbGl6ZWRQcm9wKTsKICAgICAgfSBl
        bHNlIHsKICAgICAgICBub3JtYWxpemVkUHJvcGVydGllcy5wdXNoKG51bGwp
        OwogICAgICB9CiAgICB9CgogICAgLy8gSGFuZGxlIGNhc2Ugd2hlbiBoZWxw
        ZXIgaW52b2NhdGlvbiBpcyBwcmVjZWRlZCBieSBgdW5ib3VuZGAsIGUuZy4K
        ICAgIC8vIHt7dW5ib3VuZCBteUhlbHBlciBmb299fQogICAgaWYgKGRhdGEu
        aXNVbmJvdW5kKSB7CiAgICAgIHJldHVybiBldmFsdWF0ZVVuYm91bmRIZWxw
        ZXIodGhpcywgZm4sIG5vcm1hbGl6ZWRQcm9wZXJ0aWVzLCBvcHRpb25zKTsK
        ICAgIH0KCiAgICB2YXIgYmluZFZpZXcgPSBuZXcgRW1iZXIuX1NpbXBsZUhh
        bmRsZWJhcnNWaWV3KG51bGwsIG51bGwsICFvcHRpb25zLmhhc2gudW5lc2Nh
        cGVkLCBvcHRpb25zLmRhdGEpOwoKICAgIC8vIE92ZXJyaWRlIFNpbXBsZUhh
        bmRsZWJhcnNWaWV3J3MgbWV0aG9kIGZvciBnZW5lcmF0aW5nIHRoZSB2aWV3
        J3MgY29udGVudC4KICAgIGJpbmRWaWV3Lm5vcm1hbGl6ZWRWYWx1ZSA9IGZ1
        bmN0aW9uKCkgewogICAgICB2YXIgYXJncyA9IFtdLCBib3VuZE9wdGlvbjsK
        CiAgICAgIC8vIENvcHkgb3ZlciBib3VuZCBoYXNoIG9wdGlvbnMuCiAgICAg
        IGZvciAoYm91bmRPcHRpb24gaW4gYm91bmRPcHRpb25zKSB7CiAgICAgICAg
        aWYgKCFib3VuZE9wdGlvbnMuaGFzT3duUHJvcGVydHkoYm91bmRPcHRpb24p
        KSB7IGNvbnRpbnVlOyB9CiAgICAgICAgcHJvcGVydHkgPSBub3JtYWxpemVQ
        YXRoKGN1cnJlbnRDb250ZXh0LCBib3VuZE9wdGlvbnNbYm91bmRPcHRpb25d
        LCBkYXRhKTsKICAgICAgICBiaW5kVmlldy5wYXRoID0gcHJvcGVydHkucGF0
        aDsKICAgICAgICBiaW5kVmlldy5wYXRoUm9vdCA9IHByb3BlcnR5LnJvb3Q7
        CiAgICAgICAgaGFzaFtib3VuZE9wdGlvbl0gPSBub3JtYWxpemVkVmFsdWUu
        Y2FsbChiaW5kVmlldyk7CiAgICAgIH0KCiAgICAgIGZvciAobG9jID0gMDsg
        bG9jIDwgbnVtUHJvcGVydGllczsgKytsb2MpIHsKICAgICAgICBwcm9wZXJ0
        eSA9IG5vcm1hbGl6ZWRQcm9wZXJ0aWVzW2xvY107CiAgICAgICAgaWYgKHBy
        b3BlcnR5KSB7CiAgICAgICAgICBiaW5kVmlldy5wYXRoID0gcHJvcGVydHku
        cGF0aDsKICAgICAgICAgIGJpbmRWaWV3LnBhdGhSb290ID0gcHJvcGVydHku
        cm9vdDsKICAgICAgICAgIGFyZ3MucHVzaChub3JtYWxpemVkVmFsdWUuY2Fs
        bChiaW5kVmlldykpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBhcmdz
        LnB1c2gocHJvcGVydGllc1tsb2NdKTsKICAgICAgICB9CiAgICAgIH0KICAg
        ICAgYXJncy5wdXNoKG9wdGlvbnMpOwoKICAgICAgLy8gUnVuIHRoZSBzdXBw
        bGllZCBoZWxwZXIgZnVuY3Rpb24uCiAgICAgIHJldHVybiBmbi5hcHBseShj
        dXJyZW50Q29udGV4dCwgYXJncyk7CiAgICB9OwoKICAgIHZpZXcuYXBwZW5k
        Q2hpbGQoYmluZFZpZXcpOwoKICAgIC8vIEFzc2VtYmxlIGxpc3Qgb2Ygd2F0
        Y2hlZCBwcm9wZXJ0aWVzIHRoYXQnbGwgcmUtcmVuZGVyIHRoaXMgaGVscGVy
        LgogICAgZm9yIChib3VuZE9wdGlvbiBpbiBib3VuZE9wdGlvbnMpIHsKICAg
        ICAgaWYgKGJvdW5kT3B0aW9ucy5oYXNPd25Qcm9wZXJ0eShib3VuZE9wdGlv
        bikpIHsKICAgICAgICB3YXRjaGVkUHJvcGVydGllcy5wdXNoKG5vcm1hbGl6
        ZVBhdGgoY3VycmVudENvbnRleHQsIGJvdW5kT3B0aW9uc1tib3VuZE9wdGlv
        bl0sIGRhdGEpKTsKICAgICAgfQogICAgfQoKICAgIC8vIE9ic2VydmUgZWFj
        aCBwcm9wZXJ0eS4KICAgIGZvciAobG9jID0gMCwgbGVuID0gd2F0Y2hlZFBy
        b3BlcnRpZXMubGVuZ3RoOyBsb2MgPCBsZW47ICsrbG9jKSB7CiAgICAgIHBy
        b3BlcnR5ID0gd2F0Y2hlZFByb3BlcnRpZXNbbG9jXTsKICAgICAgdmlldy5y
        ZWdpc3Rlck9ic2VydmVyKHByb3BlcnR5LnJvb3QsIHByb3BlcnR5LnBhdGgs
        IGJpbmRWaWV3LCBiaW5kVmlldy5yZXJlbmRlcik7CiAgICB9CgogICAgaWYg
        KHR5cGVzWzBdICE9PSAnSUQnIHx8IG5vcm1hbGl6ZWRQcm9wZXJ0aWVzLmxl
        bmd0aCA9PT0gMCkgewogICAgICByZXR1cm47CiAgICB9CgogICAgLy8gQWRk
        IGRlcGVuZGVudCBrZXkgb2JzZXJ2ZXJzIHRvIHRoZSBmaXJzdCBwYXJhbQog
        ICAgdmFyIG5vcm1hbGl6ZWQgPSBub3JtYWxpemVkUHJvcGVydGllc1swXSwK
        ICAgICAgICBwYXRoUm9vdCA9IG5vcm1hbGl6ZWQucm9vdCwKICAgICAgICBw
        YXRoID0gbm9ybWFsaXplZC5wYXRoOwoKICAgIGlmKCFFbWJlci5pc0VtcHR5
        KHBhdGgpKSB7CiAgICAgIHByZWZpeFBhdGhGb3JEZXBlbmRlbnRLZXlzID0g
        cGF0aCArICcuJzsKICAgIH0KICAgIGZvciAodmFyIGk9MCwgbD1kZXBlbmRl
        bnRLZXlzLmxlbmd0aDsgaTxsOyBpKyspIHsKICAgICAgdmlldy5yZWdpc3Rl
        ck9ic2VydmVyKHBhdGhSb290LCBwcmVmaXhQYXRoRm9yRGVwZW5kZW50S2V5
        cyArIGRlcGVuZGVudEtleXNbaV0sIGJpbmRWaWV3LCBiaW5kVmlldy5yZXJl
        bmRlcik7CiAgICB9CiAgfQoKICBoZWxwZXIuX3Jhd0Z1bmN0aW9uID0gZm47
        CiAgcmV0dXJuIGhlbHBlcjsKfTsKCi8qKgogIEBwcml2YXRlCgogIFJlbmRl
        cnMgdGhlIHVuYm91bmQgZm9ybSBvZiBhbiBvdGhlcndpc2UgYm91bmQgaGVs
        cGVyIGZ1bmN0aW9uLgoKICBAbWV0aG9kIGV2YWx1YXRlVW5ib3VuZEhlbHBl
        cgogIEBwYXJhbSB7RnVuY3Rpb259IGZuCiAgQHBhcmFtIHtPYmplY3R9IGNv
        bnRleHQKICBAcGFyYW0ge0FycmF5fSBub3JtYWxpemVkUHJvcGVydGllcwog
        IEBwYXJhbSB7U3RyaW5nfSBvcHRpb25zCiovCmZ1bmN0aW9uIGV2YWx1YXRl
        VW5ib3VuZEhlbHBlcihjb250ZXh0LCBmbiwgbm9ybWFsaXplZFByb3BlcnRp
        ZXMsIG9wdGlvbnMpIHsKICB2YXIgYXJncyA9IFtdLCBoYXNoID0gb3B0aW9u
        cy5oYXNoLCBib3VuZE9wdGlvbnMgPSBoYXNoLmJvdW5kT3B0aW9ucywgbG9j
        LCBsZW4sIHByb3BlcnR5LCBib3VuZE9wdGlvbjsKCiAgZm9yIChib3VuZE9w
        dGlvbiBpbiBib3VuZE9wdGlvbnMpIHsKICAgIGlmICghYm91bmRPcHRpb25z
        Lmhhc093blByb3BlcnR5KGJvdW5kT3B0aW9uKSkgeyBjb250aW51ZTsgfQog
        ICAgaGFzaFtib3VuZE9wdGlvbl0gPSBFbWJlci5IYW5kbGViYXJzLmdldChj
        b250ZXh0LCBib3VuZE9wdGlvbnNbYm91bmRPcHRpb25dLCBvcHRpb25zKTsK
        ICB9CgogIGZvcihsb2MgPSAwLCBsZW4gPSBub3JtYWxpemVkUHJvcGVydGll
        cy5sZW5ndGg7IGxvYyA8IGxlbjsgKytsb2MpIHsKICAgIHByb3BlcnR5ID0g
        bm9ybWFsaXplZFByb3BlcnRpZXNbbG9jXTsKICAgIGFyZ3MucHVzaChFbWJl
        ci5IYW5kbGViYXJzLmdldChwcm9wZXJ0eS5yb290LCBwcm9wZXJ0eS5wYXRo
        LCBvcHRpb25zKSk7CiAgfQogIGFyZ3MucHVzaChvcHRpb25zKTsKICByZXR1
        cm4gZm4uYXBwbHkoY29udGV4dCwgYXJncyk7Cn0KCi8qKgogIEBwcml2YXRl
        CgogIE92ZXJyaWRlcyBIYW5kbGViYXJzLnRlbXBsYXRlIHNvIHRoYXQgd2Ug
        Y2FuIGRpc3Rpbmd1aXNoCiAgdXNlci1jcmVhdGVkLCB0b3AtbGV2ZWwgdGVt
        cGxhdGVzIGZyb20gaW5uZXIgY29udGV4dHMuCgogIEBtZXRob2QgdGVtcGxh
        dGUKICBAZm9yIEVtYmVyLkhhbmRsZWJhcnMKICBAcGFyYW0ge1N0cmluZ30g
        c3BlYwoqLwpFbWJlci5IYW5kbGViYXJzLnRlbXBsYXRlID0gZnVuY3Rpb24o
        c3BlYykgewogIHZhciB0ID0gb3JpZ2luYWxUZW1wbGF0ZShzcGVjKTsKICB0
        LmlzVG9wID0gdHJ1ZTsKICByZXR1cm4gdDsKfTsKCn0pKCk7CgoKCihmdW5j
        dGlvbigpIHsKLyoqCiAgTWFyayBhIHN0cmluZyBhcyBzYWZlIGZvciB1bmVz
        Y2FwZWQgb3V0cHV0IHdpdGggSGFuZGxlYmFycy4gSWYgeW91CiAgcmV0dXJu
        IEhUTUwgZnJvbSBhIEhhbmRsZWJhcnMgaGVscGVyLCB1c2UgdGhpcyBmdW5j
        dGlvbiB0bwogIGVuc3VyZSBIYW5kbGViYXJzIGRvZXMgbm90IGVzY2FwZSB0
        aGUgSFRNTC4KCiAgYGBgamF2YXNjcmlwdAogIEVtYmVyLlN0cmluZy5odG1s
        U2FmZSgnPGRpdj5zb21lU3RyaW5nPC9kaXY+JykKICBgYGAKCiAgQG1ldGhv
        ZCBodG1sU2FmZQogIEBmb3IgRW1iZXIuU3RyaW5nCiAgQHN0YXRpYwogIEBy
        ZXR1cm4ge0hhbmRsZWJhcnMuU2FmZVN0cmluZ30gYSBzdHJpbmcgdGhhdCB3
        aWxsIG5vdCBiZSBodG1sIGVzY2FwZWQgYnkgSGFuZGxlYmFycwoqLwpFbWJl
        ci5TdHJpbmcuaHRtbFNhZmUgPSBmdW5jdGlvbihzdHIpIHsKICByZXR1cm4g
        bmV3IEhhbmRsZWJhcnMuU2FmZVN0cmluZyhzdHIpOwp9OwoKdmFyIGh0bWxT
        YWZlID0gRW1iZXIuU3RyaW5nLmh0bWxTYWZlOwoKaWYgKEVtYmVyLkVYVEVO
        RF9QUk9UT1RZUEVTID09PSB0cnVlIHx8IEVtYmVyLkVYVEVORF9QUk9UT1RZ
        UEVTLlN0cmluZykgewoKICAvKioKICAgIE1hcmsgYSBzdHJpbmcgYXMgYmVp
        bmcgc2FmZSBmb3IgdW5lc2NhcGVkIG91dHB1dCB3aXRoIEhhbmRsZWJhcnMu
        CgogICAgYGBgamF2YXNjcmlwdAogICAgJzxkaXY+c29tZVN0cmluZzwvZGl2
        PicuaHRtbFNhZmUoKQogICAgYGBgCgogICAgU2VlIFtFbWJlci5TdHJpbmcu
        aHRtbFNhZmVdKC9hcGkvY2xhc3Nlcy9FbWJlci5TdHJpbmcuaHRtbCNtZXRo
        b2RfaHRtbFNhZmUpLgoKICAgIEBtZXRob2QgaHRtbFNhZmUKICAgIEBmb3Ig
        U3RyaW5nCiAgICBAcmV0dXJuIHtIYW5kbGViYXJzLlNhZmVTdHJpbmd9IGEg
        c3RyaW5nIHRoYXQgd2lsbCBub3QgYmUgaHRtbCBlc2NhcGVkIGJ5IEhhbmRs
        ZWJhcnMKICAqLwogIFN0cmluZy5wcm90b3R5cGUuaHRtbFNhZmUgPSBmdW5j
        dGlvbigpIHsKICAgIHJldHVybiBodG1sU2FmZSh0aGlzKTsKICB9Owp9Cgp9
        KSgpOwoKCgooZnVuY3Rpb24oKSB7CkVtYmVyLkhhbmRsZWJhcnMucmVzb2x2
        ZVBhdGhzID0gZnVuY3Rpb24ob3B0aW9ucykgewogIHZhciByZXQgPSBbXSwK
        ICAgICAgY29udGV4dHMgPSBvcHRpb25zLmNvbnRleHRzLAogICAgICByb290
        cyA9IG9wdGlvbnMucm9vdHMsCiAgICAgIGRhdGEgPSBvcHRpb25zLmRhdGE7
        CgogIGZvciAodmFyIGk9MCwgbD1jb250ZXh0cy5sZW5ndGg7IGk8bDsgaSsr
        KSB7CiAgICByZXQucHVzaCggRW1iZXIuSGFuZGxlYmFycy5nZXQocm9vdHNb
        aV0sIGNvbnRleHRzW2ldLCB7IGRhdGE6IGRhdGEgfSkgKTsKICB9CgogIHJl
        dHVybiByZXQ7Cn07Cgp9KSgpOwoKCgooZnVuY3Rpb24oKSB7Ci8qanNoaW50
        IG5ld2NhcDpmYWxzZSovCi8qKgpAbW9kdWxlIGVtYmVyCkBzdWJtb2R1bGUg
        ZW1iZXItaGFuZGxlYmFycwoqLwoKdmFyIHNldCA9IEVtYmVyLnNldCwgZ2V0
        ID0gRW1iZXIuZ2V0Owp2YXIgTWV0YW1vcnBoID0gcmVxdWlyZU1vZHVsZSgn
        bWV0YW1vcnBoJyk7CgpmdW5jdGlvbiBub3RpZnlNdXRhdGlvbkxpc3RlbmVy
        cygpIHsKICBFbWJlci5ydW4ub25jZShFbWJlci5WaWV3LCAnbm90aWZ5TXV0
        YXRpb25MaXN0ZW5lcnMnKTsKfQoKLy8gRE9NTWFuYWdlciBzaG91bGQganVz
        dCBhYnN0cmFjdCBkb20gbWFuaXB1bGF0aW9uIGJldHdlZW4ganF1ZXJ5IGFu
        ZCBtZXRhbW9ycGgKdmFyIERPTU1hbmFnZXIgPSB7CiAgcmVtb3ZlOiBmdW5j
        dGlvbih2aWV3KSB7CiAgICB2aWV3Lm1vcnBoLnJlbW92ZSgpOwogICAgbm90
        aWZ5TXV0YXRpb25MaXN0ZW5lcnMoKTsKICB9LAoKICBwcmVwZW5kOiBmdW5j
        dGlvbih2aWV3LCBodG1sKSB7CiAgICB2aWV3Lm1vcnBoLnByZXBlbmQoaHRt
        bCk7CiAgICBub3RpZnlNdXRhdGlvbkxpc3RlbmVycygpOwogIH0sCgogIGFm
        dGVyOiBmdW5jdGlvbih2aWV3LCBodG1sKSB7CiAgICB2aWV3Lm1vcnBoLmFm
        dGVyKGh0bWwpOwogICAgbm90aWZ5TXV0YXRpb25MaXN0ZW5lcnMoKTsKICB9
        LAoKICBodG1sOiBmdW5jdGlvbih2aWV3LCBodG1sKSB7CiAgICB2aWV3Lm1v
        cnBoLmh0bWwoaHRtbCk7CiAgICBub3RpZnlNdXRhdGlvbkxpc3RlbmVycygp
        OwogIH0sCgogIC8vIFRoaXMgaXMgbWVzc2VkIHVwLgogIHJlcGxhY2U6IGZ1
        bmN0aW9uKHZpZXcpIHsKICAgIHZhciBtb3JwaCA9IHZpZXcubW9ycGg7Cgog
        ICAgdmlldy50cmFuc2l0aW9uVG8oJ3ByZVJlbmRlcicpOwoKICAgIEVtYmVy
        LnJ1bi5zY2hlZHVsZSgncmVuZGVyJywgdGhpcywgZnVuY3Rpb24oKSB7CiAg
        ICAgIGlmICh2aWV3LmlzRGVzdHJveWluZykgeyByZXR1cm47IH0KCiAgICAg
        IHZpZXcuY2xlYXJSZW5kZXJlZENoaWxkcmVuKCk7CiAgICAgIHZhciBidWZm
        ZXIgPSB2aWV3LnJlbmRlclRvQnVmZmVyKCk7CgogICAgICB2aWV3Lmludm9r
        ZVJlY3Vyc2l2ZWx5KGZ1bmN0aW9uKHZpZXcpIHsKICAgICAgICB2aWV3LnBy
        b3BlcnR5V2lsbENoYW5nZSgnZWxlbWVudCcpOwogICAgICB9KTsKICAgICAg
        dmlldy50cmlnZ2VyUmVjdXJzaXZlbHkoJ3dpbGxJbnNlcnRFbGVtZW50Jyk7
        CgogICAgICBtb3JwaC5yZXBsYWNlV2l0aChidWZmZXIuc3RyaW5nKCkpOwog
        ICAgICB2aWV3LnRyYW5zaXRpb25UbygnaW5ET00nKTsKCiAgICAgIHZpZXcu
        aW52b2tlUmVjdXJzaXZlbHkoZnVuY3Rpb24odmlldykgewogICAgICAgIHZp
        ZXcucHJvcGVydHlEaWRDaGFuZ2UoJ2VsZW1lbnQnKTsKICAgICAgfSk7CiAg
        ICAgIHZpZXcudHJpZ2dlclJlY3Vyc2l2ZWx5KCdkaWRJbnNlcnRFbGVtZW50
        Jyk7CgogICAgICBub3RpZnlNdXRhdGlvbkxpc3RlbmVycygpOwogICAgfSk7
        CiAgfSwKCiAgZW1wdHk6IGZ1bmN0aW9uKHZpZXcpIHsKICAgIHZpZXcubW9y
        cGguaHRtbCgiIik7CiAgICBub3RpZnlNdXRhdGlvbkxpc3RlbmVycygpOwog
        IH0KfTsKCi8vIFRoZSBgbW9ycGhgIGFuZCBgb3V0ZXJIVE1MYCBwcm9wZXJ0
        aWVzIGFyZSBpbnRlcm5hbCBvbmx5Ci8vIGFuZCBub3Qgb2JzZXJ2YWJsZS4K
        Ci8qKgogIEBjbGFzcyBfTWV0YW1vcnBoCiAgQG5hbWVzcGFjZSBFbWJlcgog
        IEBwcml2YXRlCiovCkVtYmVyLl9NZXRhbW9ycGggPSBFbWJlci5NaXhpbi5j
        cmVhdGUoewogIGlzVmlydHVhbDogdHJ1ZSwKICB0YWdOYW1lOiAnJywKCiAg
        aW5zdHJ1bWVudE5hbWU6ICdtZXRhbW9ycGgnLAoKICBpbml0OiBmdW5jdGlv
        bigpIHsKICAgIHRoaXMuX3N1cGVyKCk7CiAgICB0aGlzLm1vcnBoID0gTWV0
        YW1vcnBoKCk7CiAgICBFbWJlci5kZXByZWNhdGUoJ1N1cHBseWluZyBhIHRh
        Z05hbWUgdG8gTWV0YW1vcnBoIHZpZXdzIGlzIHVucmVsaWFibGUgYW5kIGlz
        IGRlcHJlY2F0ZWQuIFlvdSBtYXkgYmUgc2V0dGluZyB0aGUgdGFnTmFtZSBv
        biBhIEhhbmRsZWJhcnMgaGVscGVyIHRoYXQgY3JlYXRlcyBhIE1ldGFtb3Jw
        aC4nLCAhdGhpcy50YWdOYW1lKTsKICB9LAoKICBiZWZvcmVSZW5kZXI6IGZ1
        bmN0aW9uKGJ1ZmZlcikgewogICAgYnVmZmVyLnB1c2godGhpcy5tb3JwaC5z
        dGFydFRhZygpKTsKICAgIGJ1ZmZlci5wdXNoT3BlbmluZ1RhZygpOwogIH0s
        CgogIGFmdGVyUmVuZGVyOiBmdW5jdGlvbihidWZmZXIpIHsKICAgIGJ1ZmZl
        ci5wdXNoQ2xvc2luZ1RhZygpOwogICAgYnVmZmVyLnB1c2godGhpcy5tb3Jw
        aC5lbmRUYWcoKSk7CiAgfSwKCiAgY3JlYXRlRWxlbWVudDogZnVuY3Rpb24o
        KSB7CiAgICB2YXIgYnVmZmVyID0gdGhpcy5yZW5kZXJUb0J1ZmZlcigpOwog
        ICAgdGhpcy5vdXRlckhUTUwgPSBidWZmZXIuc3RyaW5nKCk7CiAgICB0aGlz
        LmNsZWFyQnVmZmVyKCk7CiAgfSwKCiAgZG9tTWFuYWdlcjogRE9NTWFuYWdl
        cgp9KTsKCi8qKgogIEBjbGFzcyBfTWV0YW1vcnBoVmlldwogIEBuYW1lc3Bh
        Y2UgRW1iZXIKICBAZXh0ZW5kcyBFbWJlci5WaWV3CiAgQHVzZXMgRW1iZXIu
        X01ldGFtb3JwaAogIEBwcml2YXRlCiovCkVtYmVyLl9NZXRhbW9ycGhWaWV3
        ID0gRW1iZXIuVmlldy5leHRlbmQoRW1iZXIuX01ldGFtb3JwaCk7CgovKioK
        ICBAY2xhc3MgX1NpbXBsZU1ldGFtb3JwaFZpZXcKICBAbmFtZXNwYWNlIEVt
        YmVyCiAgQGV4dGVuZHMgRW1iZXIuQ29yZVZpZXcKICBAdXNlcyBFbWJlci5f
        TWV0YW1vcnBoCiAgQHByaXZhdGUKKi8KRW1iZXIuX1NpbXBsZU1ldGFtb3Jw
        aFZpZXcgPSBFbWJlci5Db3JlVmlldy5leHRlbmQoRW1iZXIuX01ldGFtb3Jw
        aCk7CgoKfSkoKTsKCgoKKGZ1bmN0aW9uKCkgewovKmdsb2JhbHMgSGFuZGxl
        YmFycyAqLwovKmpzaGludCBuZXdjYXA6ZmFsc2UqLwovKioKQG1vZHVsZSBl
        bWJlcgpAc3VibW9kdWxlIGVtYmVyLWhhbmRsZWJhcnMKKi8KCnZhciBnZXQg
        PSBFbWJlci5nZXQsIHNldCA9IEVtYmVyLnNldCwgaGFuZGxlYmFyc0dldCA9
        IEVtYmVyLkhhbmRsZWJhcnMuZ2V0Owp2YXIgTWV0YW1vcnBoID0gcmVxdWly
        ZU1vZHVsZSgnbWV0YW1vcnBoJyk7CmZ1bmN0aW9uIFNpbXBsZUhhbmRsZWJh
        cnNWaWV3KHBhdGgsIHBhdGhSb290LCBpc0VzY2FwZWQsIHRlbXBsYXRlRGF0
        YSkgewogIHRoaXMucGF0aCA9IHBhdGg7CiAgdGhpcy5wYXRoUm9vdCA9IHBh
        dGhSb290OwogIHRoaXMuaXNFc2NhcGVkID0gaXNFc2NhcGVkOwogIHRoaXMu
        dGVtcGxhdGVEYXRhID0gdGVtcGxhdGVEYXRhOwoKICB0aGlzLm1vcnBoID0g
        TWV0YW1vcnBoKCk7CiAgdGhpcy5zdGF0ZSA9ICdwcmVSZW5kZXInOwogIHRo
        aXMudXBkYXRlSWQgPSBudWxsOwogIHRoaXMuX3BhcmVudFZpZXcgPSBudWxs
        OwogIHRoaXMuYnVmZmVyID0gbnVsbDsKfQoKRW1iZXIuX1NpbXBsZUhhbmRs
        ZWJhcnNWaWV3ID0gU2ltcGxlSGFuZGxlYmFyc1ZpZXc7CgpTaW1wbGVIYW5k
        bGViYXJzVmlldy5wcm90b3R5cGUgPSB7CiAgaXNWaXJ0dWFsOiB0cnVlLAog
        IGlzVmlldzogdHJ1ZSwKCiAgZGVzdHJveTogZnVuY3Rpb24gKCkgewogICAg
        aWYgKHRoaXMudXBkYXRlSWQpIHsKICAgICAgRW1iZXIucnVuLmNhbmNlbCh0
        aGlzLnVwZGF0ZUlkKTsKICAgICAgdGhpcy51cGRhdGVJZCA9IG51bGw7CiAg
        ICB9CiAgICBpZiAodGhpcy5fcGFyZW50VmlldykgewogICAgICB0aGlzLl9w
        YXJlbnRWaWV3LnJlbW92ZUNoaWxkKHRoaXMpOwogICAgfQogICAgdGhpcy5t
        b3JwaCA9IG51bGw7CiAgICB0aGlzLnN0YXRlID0gJ2Rlc3Ryb3llZCc7CiAg
        fSwKCiAgcHJvcGVydHlXaWxsQ2hhbmdlOiBFbWJlci5LLAoKICBwcm9wZXJ0
        eURpZENoYW5nZTogRW1iZXIuSywKCiAgbm9ybWFsaXplZFZhbHVlOiBmdW5j
        dGlvbigpIHsKICAgIHZhciBwYXRoID0gdGhpcy5wYXRoLAogICAgICAgIHBh
        dGhSb290ID0gdGhpcy5wYXRoUm9vdCwKICAgICAgICByZXN1bHQsIHRlbXBs
        YXRlRGF0YTsKCiAgICAvLyBVc2UgdGhlIHBhdGhSb290IGFzIHRoZSByZXN1
        bHQgaWYgbm8gcGF0aCBpcyBwcm92aWRlZC4gVGhpcwogICAgLy8gaGFwcGVu
        cyBpZiB0aGUgcGF0aCBpcyBgdGhpc2AsIHdoaWNoIGdldHMgbm9ybWFsaXpl
        ZCBpbnRvCiAgICAvLyBhIGBwYXRoUm9vdGAgb2YgdGhlIGN1cnJlbnQgSGFu
        ZGxlYmFycyBjb250ZXh0IGFuZCBhIHBhdGgKICAgIC8vIG9mIGAnJ2AuCiAg
        ICBpZiAocGF0aCA9PT0gJycpIHsKICAgICAgcmVzdWx0ID0gcGF0aFJvb3Q7
        CiAgICB9IGVsc2UgewogICAgICB0ZW1wbGF0ZURhdGEgPSB0aGlzLnRlbXBs
        YXRlRGF0YTsKICAgICAgcmVzdWx0ID0gaGFuZGxlYmFyc0dldChwYXRoUm9v
        dCwgcGF0aCwgeyBkYXRhOiB0ZW1wbGF0ZURhdGEgfSk7CiAgICB9CgogICAg
        cmV0dXJuIHJlc3VsdDsKICB9LAoKICByZW5kZXJUb0J1ZmZlcjogZnVuY3Rp
        b24oYnVmZmVyKSB7CiAgICB2YXIgc3RyaW5nID0gJyc7CgogICAgc3RyaW5n
        ICs9IHRoaXMubW9ycGguc3RhcnRUYWcoKTsKICAgIHN0cmluZyArPSB0aGlz
        LnJlbmRlcigpOwogICAgc3RyaW5nICs9IHRoaXMubW9ycGguZW5kVGFnKCk7
        CgogICAgYnVmZmVyLnB1c2goc3RyaW5nKTsKICB9LAoKICByZW5kZXI6IGZ1
        bmN0aW9uKCkgewogICAgLy8gSWYgbm90IGludm9rZWQgdmlhIGEgdHJpcGxl
        LW11c3RhY2hlICh7e3tmb299fX0pLCBlc2NhcGUKICAgIC8vIHRoZSBjb250
        ZW50IG9mIHRoZSB0ZW1wbGF0ZS4KICAgIHZhciBlc2NhcGUgPSB0aGlzLmlz
        RXNjYXBlZDsKICAgIHZhciByZXN1bHQgPSB0aGlzLm5vcm1hbGl6ZWRWYWx1
        ZSgpOwoKICAgIGlmIChyZXN1bHQgPT09IG51bGwgfHwgcmVzdWx0ID09PSB1
        bmRlZmluZWQpIHsKICAgICAgcmVzdWx0ID0gIiI7CiAgICB9IGVsc2UgaWYg
        KCEocmVzdWx0IGluc3RhbmNlb2YgSGFuZGxlYmFycy5TYWZlU3RyaW5nKSkg
        ewogICAgICByZXN1bHQgPSBTdHJpbmcocmVzdWx0KTsKICAgIH0KCiAgICBp
        ZiAoZXNjYXBlKSB7IHJlc3VsdCA9IEhhbmRsZWJhcnMuVXRpbHMuZXNjYXBl
        RXhwcmVzc2lvbihyZXN1bHQpOyB9CiAgICByZXR1cm4gcmVzdWx0OwogIH0s
        CgogIHJlcmVuZGVyOiBmdW5jdGlvbigpIHsKICAgIHN3aXRjaCh0aGlzLnN0
        YXRlKSB7CiAgICAgIGNhc2UgJ3ByZVJlbmRlcic6CiAgICAgIGNhc2UgJ2Rl
        c3Ryb3llZCc6CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgJ2luQnVmZmVy
        JzoKICAgICAgICB0aHJvdyBuZXcgRW1iZXIuRXJyb3IoIlNvbWV0aGluZyB5
        b3UgZGlkIHRyaWVkIHRvIHJlcGxhY2UgYW4ge3tleHByZXNzaW9ufX0gYmVm
        b3JlIGl0IHdhcyBpbnNlcnRlZCBpbnRvIHRoZSBET00uIik7CiAgICAgIGNh
        c2UgJ2hhc0VsZW1lbnQnOgogICAgICBjYXNlICdpbkRPTSc6CiAgICAgICAg
        dGhpcy51cGRhdGVJZCA9IEVtYmVyLnJ1bi5zY2hlZHVsZU9uY2UoJ3JlbmRl
        cicsIHRoaXMsICd1cGRhdGUnKTsKICAgICAgICBicmVhazsKICAgIH0KCiAg
        ICByZXR1cm4gdGhpczsKICB9LAoKICB1cGRhdGU6IGZ1bmN0aW9uICgpIHsK
        ICAgIHRoaXMudXBkYXRlSWQgPSBudWxsOwogICAgdGhpcy5tb3JwaC5odG1s
        KHRoaXMucmVuZGVyKCkpOwogIH0sCgogIHRyYW5zaXRpb25UbzogZnVuY3Rp
        b24oc3RhdGUpIHsKICAgIHRoaXMuc3RhdGUgPSBzdGF0ZTsKICB9Cn07Cgp2
        YXIgc3RhdGVzID0gRW1iZXIuVmlldy5jbG9uZVN0YXRlcyhFbWJlci5WaWV3
        LnN0YXRlcyksIG1lcmdlID0gRW1iZXIubWVyZ2U7CgptZXJnZShzdGF0ZXMu
        X2RlZmF1bHQsIHsKICByZXJlbmRlcklmTmVlZGVkOiBFbWJlci5LCn0pOwoK
        bWVyZ2Uoc3RhdGVzLmluRE9NLCB7CiAgcmVyZW5kZXJJZk5lZWRlZDogZnVu
        Y3Rpb24odmlldykgewogICAgaWYgKHZpZXcubm9ybWFsaXplZFZhbHVlKCkg
        IT09IHZpZXcuX2xhc3ROb3JtYWxpemVkVmFsdWUpIHsKICAgICAgdmlldy5y
        ZXJlbmRlcigpOwogICAgfQogIH0KfSk7CgovKioKICBgRW1iZXIuX0hhbmRs
        ZWJhcnNCb3VuZFZpZXdgIGlzIGEgcHJpdmF0ZSB2aWV3IGNyZWF0ZWQgYnkg
        dGhlIEhhbmRsZWJhcnMKICBge3tiaW5kfX1gIGhlbHBlcnMgdGhhdCBpcyB1
        c2VkIHRvIGtlZXAgdHJhY2sgb2YgYm91bmQgcHJvcGVydGllcy4KCiAgRXZl
        cnkgdGltZSBhIHByb3BlcnR5IGlzIGJvdW5kIHVzaW5nIGEgYHt7bXVzdGFj
        aGV9fWAsIGFuIGFub255bW91cyBzdWJjbGFzcwogIG9mIGBFbWJlci5fSGFu
        ZGxlYmFyc0JvdW5kVmlld2AgaXMgY3JlYXRlZCB3aXRoIHRoZSBhcHByb3By
        aWF0ZSBzdWItdGVtcGxhdGUKICBhbmQgY29udGV4dCBzZXQgdXAuIFdoZW4g
        dGhlIGFzc29jaWF0ZWQgcHJvcGVydHkgY2hhbmdlcywganVzdCB0aGUgdGVt
        cGxhdGUKICBmb3IgdGhpcyB2aWV3IHdpbGwgcmUtcmVuZGVyLgoKICBAY2xh
        c3MgX0hhbmRsZWJhcnNCb3VuZFZpZXcKICBAbmFtZXNwYWNlIEVtYmVyCiAg
        QGV4dGVuZHMgRW1iZXIuX01ldGFtb3JwaFZpZXcKICBAcHJpdmF0ZQoqLwpF
        bWJlci5fSGFuZGxlYmFyc0JvdW5kVmlldyA9IEVtYmVyLl9NZXRhbW9ycGhW
        aWV3LmV4dGVuZCh7CiAgaW5zdHJ1bWVudE5hbWU6ICdib3VuZEhhbmRsZWJh
        cnMnLAogIHN0YXRlczogc3RhdGVzLAoKICAvKioKICAgIFRoZSBmdW5jdGlv
        biB1c2VkIHRvIGRldGVybWluZSBpZiB0aGUgYGRpc3BsYXlUZW1wbGF0ZWAg
        b3IKICAgIGBpbnZlcnNlVGVtcGxhdGVgIHNob3VsZCBiZSByZW5kZXJlZC4g
        VGhpcyBzaG91bGQgYmUgYSBmdW5jdGlvbiB0aGF0IHRha2VzCiAgICBhIHZh
        bHVlIGFuZCByZXR1cm5zIGEgQm9vbGVhbi4KCiAgICBAcHJvcGVydHkgc2hv
        dWxkRGlzcGxheUZ1bmMKICAgIEB0eXBlIEZ1bmN0aW9uCiAgICBAZGVmYXVs
        dCBudWxsCiAgKi8KICBzaG91bGREaXNwbGF5RnVuYzogbnVsbCwKCiAgLyoq
        CiAgICBXaGV0aGVyIHRoZSB0ZW1wbGF0ZSByZW5kZXJlZCBieSB0aGlzIHZp
        ZXcgZ2V0cyBwYXNzZWQgdGhlIGNvbnRleHQgb2JqZWN0CiAgICBvZiBpdHMg
        cGFyZW50IHRlbXBsYXRlLCBvciBnZXRzIHBhc3NlZCB0aGUgdmFsdWUgb2Yg
        cmV0cmlldmluZyBgcGF0aGAKICAgIGZyb20gdGhlIGBwYXRoUm9vdGAuCgog
        ICAgRm9yIGV4YW1wbGUsIHRoaXMgaXMgdHJ1ZSB3aGVuIHVzaW5nIHRoZSBg
        e3sjaWZ9fWAgaGVscGVyLCBiZWNhdXNlIHRoZQogICAgdGVtcGxhdGUgaW5z
        aWRlIHRoZSBoZWxwZXIgc2hvdWxkIGxvb2sgdXAgcHJvcGVydGllcyByZWxh
        dGl2ZSB0byB0aGUgc2FtZQogICAgb2JqZWN0IGFzIG91dHNpZGUgdGhlIGJs
        b2NrLiBUaGlzIHdvdWxkIGJlIGBmYWxzZWAgd2hlbiB1c2VkIHdpdGggYHt7
        I3dpdGgKICAgIGZvb319YCBiZWNhdXNlIHRoZSB0ZW1wbGF0ZSBzaG91bGQg
        cmVjZWl2ZSB0aGUgb2JqZWN0IGZvdW5kIGJ5IGV2YWx1YXRpbmcKICAgIGBm
        b29gLgoKICAgIEBwcm9wZXJ0eSBwcmVzZXJ2ZUNvbnRleHQKICAgIEB0eXBl
        IEJvb2xlYW4KICAgIEBkZWZhdWx0IGZhbHNlCiAgKi8KICBwcmVzZXJ2ZUNv
        bnRleHQ6IGZhbHNlLAoKICAvKioKICAgIElmIGBwcmVzZXJ2ZUNvbnRleHRg
        IGlzIHRydWUsIHRoaXMgaXMgdGhlIG9iamVjdCB0aGF0IHdpbGwgYmUgdXNl
        ZAogICAgdG8gcmVuZGVyIHRoZSB0ZW1wbGF0ZS4KCiAgICBAcHJvcGVydHkg
        cHJldmlvdXNDb250ZXh0CiAgICBAdHlwZSBPYmplY3QKICAqLwogIHByZXZp
        b3VzQ29udGV4dDogbnVsbCwKCiAgLyoqCiAgICBUaGUgdGVtcGxhdGUgdG8g
        cmVuZGVyIHdoZW4gYHNob3VsZERpc3BsYXlGdW5jYCBldmFsdWF0ZXMgdG8g
        YHRydWVgLgoKICAgIEBwcm9wZXJ0eSBkaXNwbGF5VGVtcGxhdGUKICAgIEB0
        eXBlIEZ1bmN0aW9uCiAgICBAZGVmYXVsdCBudWxsCiAgKi8KICBkaXNwbGF5
        VGVtcGxhdGU6IG51bGwsCgogIC8qKgogICAgVGhlIHRlbXBsYXRlIHRvIHJl
        bmRlciB3aGVuIGBzaG91bGREaXNwbGF5RnVuY2AgZXZhbHVhdGVzIHRvIGBm
        YWxzZWAuCgogICAgQHByb3BlcnR5IGludmVyc2VUZW1wbGF0ZQogICAgQHR5
        cGUgRnVuY3Rpb24KICAgIEBkZWZhdWx0IG51bGwKICAqLwogIGludmVyc2VU
        ZW1wbGF0ZTogbnVsbCwKCgogIC8qKgogICAgVGhlIHBhdGggdG8gbG9vayB1
        cCBvbiBgcGF0aFJvb3RgIHRoYXQgaXMgcGFzc2VkIHRvCiAgICBgc2hvdWxk
        RGlzcGxheUZ1bmNgIHRvIGRldGVybWluZSB3aGljaCB0ZW1wbGF0ZSB0byBy
        ZW5kZXIuCgogICAgSW4gYWRkaXRpb24sIGlmIGBwcmVzZXJ2ZUNvbnRleHRg
        IGlzIGBmYWxzZSxgIHRoZSBvYmplY3QgYXQgdGhpcyBwYXRoIHdpbGwKICAg
        IGJlIHBhc3NlZCB0byB0aGUgdGVtcGxhdGUgd2hlbiByZW5kZXJpbmcuCgog
        ICAgQHByb3BlcnR5IHBhdGgKICAgIEB0eXBlIFN0cmluZwogICAgQGRlZmF1
        bHQgbnVsbAogICovCiAgcGF0aDogbnVsbCwKCiAgLyoqCiAgICBUaGUgb2Jq
        ZWN0IGZyb20gd2hpY2ggdGhlIGBwYXRoYCB3aWxsIGJlIGxvb2tlZCB1cC4g
        U29tZXRpbWVzIHRoaXMgaXMgdGhlCiAgICBzYW1lIGFzIHRoZSBgcHJldmlv
        dXNDb250ZXh0YCwgYnV0IGluIGNhc2VzIHdoZXJlIHRoaXMgdmlldyBoYXMg
        YmVlbgogICAgZ2VuZXJhdGVkIGZvciBwYXRocyB0aGF0IHN0YXJ0IHdpdGgg
        YSBrZXl3b3JkIHN1Y2ggYXMgYHZpZXdgIG9yCiAgICBgY29udHJvbGxlcmAs
        IHRoZSBwYXRoIHJvb3Qgd2lsbCBiZSB0aGF0IHJlc29sdmVkIG9iamVjdC4K
        CiAgICBAcHJvcGVydHkgcGF0aFJvb3QKICAgIEB0eXBlIE9iamVjdAogICov
        CiAgcGF0aFJvb3Q6IG51bGwsCgogIG5vcm1hbGl6ZWRWYWx1ZTogZnVuY3Rp
        b24oKSB7CiAgICB2YXIgcGF0aCA9IGdldCh0aGlzLCAncGF0aCcpLAogICAg
        ICAgIHBhdGhSb290ICA9IGdldCh0aGlzLCAncGF0aFJvb3QnKSwKICAgICAg
        ICB2YWx1ZU5vcm1hbGl6ZXIgPSBnZXQodGhpcywgJ3ZhbHVlTm9ybWFsaXpl
        ckZ1bmMnKSwKICAgICAgICByZXN1bHQsIHRlbXBsYXRlRGF0YTsKCiAgICAv
        LyBVc2UgdGhlIHBhdGhSb290IGFzIHRoZSByZXN1bHQgaWYgbm8gcGF0aCBp
        cyBwcm92aWRlZC4gVGhpcwogICAgLy8gaGFwcGVucyBpZiB0aGUgcGF0aCBp
        cyBgdGhpc2AsIHdoaWNoIGdldHMgbm9ybWFsaXplZCBpbnRvCiAgICAvLyBh
        IGBwYXRoUm9vdGAgb2YgdGhlIGN1cnJlbnQgSGFuZGxlYmFycyBjb250ZXh0
        IGFuZCBhIHBhdGgKICAgIC8vIG9mIGAnJ2AuCiAgICBpZiAocGF0aCA9PT0g
        JycpIHsKICAgICAgcmVzdWx0ID0gcGF0aFJvb3Q7CiAgICB9IGVsc2Ugewog
        ICAgICB0ZW1wbGF0ZURhdGEgPSBnZXQodGhpcywgJ3RlbXBsYXRlRGF0YScp
        OwogICAgICByZXN1bHQgPSBoYW5kbGViYXJzR2V0KHBhdGhSb290LCBwYXRo
        LCB7IGRhdGE6IHRlbXBsYXRlRGF0YSB9KTsKICAgIH0KCiAgICByZXR1cm4g
        dmFsdWVOb3JtYWxpemVyID8gdmFsdWVOb3JtYWxpemVyKHJlc3VsdCkgOiBy
        ZXN1bHQ7CiAgfSwKCiAgcmVyZW5kZXJJZk5lZWRlZDogZnVuY3Rpb24oKSB7
        CiAgICB0aGlzLmN1cnJlbnRTdGF0ZS5yZXJlbmRlcklmTmVlZGVkKHRoaXMp
        OwogIH0sCgogIC8qKgogICAgRGV0ZXJtaW5lcyB3aGljaCB0ZW1wbGF0ZSB0
        byBpbnZva2UsIHNldHMgdXAgdGhlIGNvcnJlY3Qgc3RhdGUgYmFzZWQgb24K
        ICAgIHRoYXQgbG9naWMsIHRoZW4gaW52b2tlcyB0aGUgZGVmYXVsdCBgRW1i
        ZXIuVmlld2AgYHJlbmRlcmAgaW1wbGVtZW50YXRpb24uCgogICAgVGhpcyBt
        ZXRob2Qgd2lsbCBmaXJzdCBsb29rIHVwIHRoZSBgcGF0aGAga2V5IG9uIGBw
        YXRoUm9vdGAsCiAgICB0aGVuIHBhc3MgdGhhdCB2YWx1ZSB0byB0aGUgYHNo
        b3VsZERpc3BsYXlGdW5jYCBmdW5jdGlvbi4gSWYgdGhhdCByZXR1cm5zCiAg
        ICBgdHJ1ZSxgIHRoZSBgZGlzcGxheVRlbXBsYXRlYCBmdW5jdGlvbiB3aWxs
        IGJlIHJlbmRlcmVkIHRvIERPTS4gT3RoZXJ3aXNlLAogICAgYGludmVyc2VU
        ZW1wbGF0ZWAsIGlmIHNwZWNpZmllZCwgd2lsbCBiZSByZW5kZXJlZC4KCiAg
        ICBGb3IgZXhhbXBsZSwgaWYgdGhpcyBgRW1iZXIuX0hhbmRsZWJhcnNCb3Vu
        ZFZpZXdgIHJlcHJlc2VudGVkIHRoZSBge3sjd2l0aAogICAgZm9vfX1gIGhl
        bHBlciwgaXQgd291bGQgbG9vayB1cCB0aGUgYGZvb2AgcHJvcGVydHkgb2Yg
        aXRzIGNvbnRleHQsIGFuZAogICAgYHNob3VsZERpc3BsYXlGdW5jYCB3b3Vs
        ZCBhbHdheXMgcmV0dXJuIHRydWUuIFRoZSBvYmplY3QgZm91bmQgYnkgbG9v
        a2luZwogICAgdXAgYGZvb2Agd291bGQgYmUgcGFzc2VkIHRvIGBkaXNwbGF5
        VGVtcGxhdGVgLgoKICAgIEBtZXRob2QgcmVuZGVyCiAgICBAcGFyYW0ge0Vt
        YmVyLlJlbmRlckJ1ZmZlcn0gYnVmZmVyCiAgKi8KICByZW5kZXI6IGZ1bmN0
        aW9uKGJ1ZmZlcikgewogICAgLy8gSWYgbm90IGludm9rZWQgdmlhIGEgdHJp
        cGxlLW11c3RhY2hlICh7e3tmb299fX0pLCBlc2NhcGUKICAgIC8vIHRoZSBj
        b250ZW50IG9mIHRoZSB0ZW1wbGF0ZS4KICAgIHZhciBlc2NhcGUgPSBnZXQo
        dGhpcywgJ2lzRXNjYXBlZCcpOwoKICAgIHZhciBzaG91bGREaXNwbGF5ID0g
        Z2V0KHRoaXMsICdzaG91bGREaXNwbGF5RnVuYycpLAogICAgICAgIHByZXNl
        cnZlQ29udGV4dCA9IGdldCh0aGlzLCAncHJlc2VydmVDb250ZXh0JyksCiAg
        ICAgICAgY29udGV4dCA9IGdldCh0aGlzLCAncHJldmlvdXNDb250ZXh0Jyk7
        CgogICAgdmFyIGludmVyc2VUZW1wbGF0ZSA9IGdldCh0aGlzLCAnaW52ZXJz
        ZVRlbXBsYXRlJyksCiAgICAgICAgZGlzcGxheVRlbXBsYXRlID0gZ2V0KHRo
        aXMsICdkaXNwbGF5VGVtcGxhdGUnKTsKCiAgICB2YXIgcmVzdWx0ID0gdGhp
        cy5ub3JtYWxpemVkVmFsdWUoKTsKICAgIHRoaXMuX2xhc3ROb3JtYWxpemVk
        VmFsdWUgPSByZXN1bHQ7CgogICAgLy8gRmlyc3QsIHRlc3QgdGhlIGNvbmRp
        dGlvbmFsIHRvIHNlZSBpZiB3ZSBzaG91bGQKICAgIC8vIHJlbmRlciB0aGUg
        dGVtcGxhdGUgb3Igbm90LgogICAgaWYgKHNob3VsZERpc3BsYXkocmVzdWx0
        KSkgewogICAgICBzZXQodGhpcywgJ3RlbXBsYXRlJywgZGlzcGxheVRlbXBs
        YXRlKTsKCiAgICAgIC8vIElmIHdlIGFyZSBwcmVzZXJ2aW5nIHRoZSBjb250
        ZXh0IChmb3IgZXhhbXBsZSwgaWYgdGhpcwogICAgICAvLyBpcyBhbiAjaWYg
        YmxvY2ssIGNhbGwgdGhlIHRlbXBsYXRlIHdpdGggdGhlIHNhbWUgb2JqZWN0
        LgogICAgICBpZiAocHJlc2VydmVDb250ZXh0KSB7CiAgICAgICAgc2V0KHRo
        aXMsICdfY29udGV4dCcsIGNvbnRleHQpOwogICAgICB9IGVsc2UgewogICAg
        ICAvLyBPdGhlcndpc2UsIGRldGVybWluZSBpZiB0aGlzIGlzIGEgYmxvY2sg
        YmluZCBvciBub3QuCiAgICAgIC8vIElmIHNvLCBwYXNzIHRoZSBzcGVjaWZp
        ZWQgb2JqZWN0IHRvIHRoZSB0ZW1wbGF0ZQogICAgICAgIGlmIChkaXNwbGF5
        VGVtcGxhdGUpIHsKICAgICAgICAgIHNldCh0aGlzLCAnX2NvbnRleHQnLCBy
        ZXN1bHQpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8gVGhpcyBpcyBu
        b3QgYSBiaW5kIGJsb2NrLCBqdXN0IHB1c2ggdGhlIHJlc3VsdCBvZiB0aGUK
        ICAgICAgICAvLyBleHByZXNzaW9uIHRvIHRoZSByZW5kZXIgY29udGV4dCBh
        bmQgcmV0dXJuLgogICAgICAgICAgaWYgKHJlc3VsdCA9PT0gbnVsbCB8fCBy
        ZXN1bHQgPT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICByZXN1bHQgPSAi
        IjsKICAgICAgICAgIH0gZWxzZSBpZiAoIShyZXN1bHQgaW5zdGFuY2VvZiBI
        YW5kbGViYXJzLlNhZmVTdHJpbmcpKSB7CiAgICAgICAgICAgIHJlc3VsdCA9
        IFN0cmluZyhyZXN1bHQpOwogICAgICAgICAgfQoKICAgICAgICAgIGlmIChl
        c2NhcGUpIHsgcmVzdWx0ID0gSGFuZGxlYmFycy5VdGlscy5lc2NhcGVFeHBy
        ZXNzaW9uKHJlc3VsdCk7IH0KICAgICAgICAgIGJ1ZmZlci5wdXNoKHJlc3Vs
        dCk7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICB9CiAgICB9
        IGVsc2UgaWYgKGludmVyc2VUZW1wbGF0ZSkgewogICAgICBzZXQodGhpcywg
        J3RlbXBsYXRlJywgaW52ZXJzZVRlbXBsYXRlKTsKCiAgICAgIGlmIChwcmVz
        ZXJ2ZUNvbnRleHQpIHsKICAgICAgICBzZXQodGhpcywgJ19jb250ZXh0Jywg
        Y29udGV4dCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgc2V0KHRoaXMsICdf
        Y29udGV4dCcsIHJlc3VsdCk7CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAg
        IHNldCh0aGlzLCAndGVtcGxhdGUnLCBmdW5jdGlvbigpIHsgcmV0dXJuICcn
        OyB9KTsKICAgIH0KCiAgICByZXR1cm4gdGhpcy5fc3VwZXIoYnVmZmVyKTsK
        ICB9Cn0pOwoKfSkoKTsKCgoKKGZ1bmN0aW9uKCkgewovKioKQG1vZHVsZSBl
        bWJlcgpAc3VibW9kdWxlIGVtYmVyLWhhbmRsZWJhcnMKKi8KCnZhciBnZXQg
        PSBFbWJlci5nZXQsIHNldCA9IEVtYmVyLnNldCwgZm10ID0gRW1iZXIuU3Ry
        aW5nLmZtdDsKdmFyIGhhbmRsZWJhcnNHZXQgPSBFbWJlci5IYW5kbGViYXJz
        LmdldCwgbm9ybWFsaXplUGF0aCA9IEVtYmVyLkhhbmRsZWJhcnMubm9ybWFs
        aXplUGF0aDsKdmFyIGZvckVhY2ggPSBFbWJlci5BcnJheVBvbHlmaWxscy5m
        b3JFYWNoOwoKdmFyIEVtYmVySGFuZGxlYmFycyA9IEVtYmVyLkhhbmRsZWJh
        cnMsIGhlbHBlcnMgPSBFbWJlckhhbmRsZWJhcnMuaGVscGVyczsKCmZ1bmN0
        aW9uIGV4aXN0cyh2YWx1ZSkgewogIHJldHVybiAhRW1iZXIuaXNOb25lKHZh
        bHVlKTsKfQoKLy8gQmluZHMgYSBwcm9wZXJ0eSBpbnRvIHRoZSBET00uIFRo
        aXMgd2lsbCBjcmVhdGUgYSBob29rIGluIERPTSB0aGF0IHRoZQovLyBLVk8g
        c3lzdGVtIHdpbGwgbG9vayBmb3IgYW5kIHVwZGF0ZSBpZiB0aGUgcHJvcGVy
        dHkgY2hhbmdlcy4KZnVuY3Rpb24gYmluZChwcm9wZXJ0eSwgb3B0aW9ucywg
        cHJlc2VydmVDb250ZXh0LCBzaG91bGREaXNwbGF5LCB2YWx1ZU5vcm1hbGl6
        ZXIsIGNoaWxkUHJvcGVydGllcykgewogIHZhciBkYXRhID0gb3B0aW9ucy5k
        YXRhLAogICAgICBmbiA9IG9wdGlvbnMuZm4sCiAgICAgIGludmVyc2UgPSBv
        cHRpb25zLmludmVyc2UsCiAgICAgIHZpZXcgPSBkYXRhLnZpZXcsCiAgICAg
        IGN1cnJlbnRDb250ZXh0ID0gdGhpcywKICAgICAgbm9ybWFsaXplZCwgb2Jz
        ZXJ2ZXIsIGk7CgogIG5vcm1hbGl6ZWQgPSBub3JtYWxpemVQYXRoKGN1cnJl
        bnRDb250ZXh0LCBwcm9wZXJ0eSwgZGF0YSk7CgogIC8vIFNldCB1cCBvYnNl
        cnZlcnMgZm9yIG9ic2VydmFibGUgb2JqZWN0cwogIGlmICgnb2JqZWN0JyA9
        PT0gdHlwZW9mIHRoaXMpIHsKICAgIGlmIChkYXRhLmluc2lkZUdyb3VwKSB7
        CiAgICAgIG9ic2VydmVyID0gZnVuY3Rpb24oKSB7CiAgICAgICAgRW1iZXIu
        cnVuLm9uY2UodmlldywgJ3JlcmVuZGVyJyk7CiAgICAgIH07CgogICAgICB2
        YXIgdGVtcGxhdGUsIGNvbnRleHQsIHJlc3VsdCA9IGhhbmRsZWJhcnNHZXQo
        Y3VycmVudENvbnRleHQsIHByb3BlcnR5LCBvcHRpb25zKTsKCiAgICAgIHJl
        c3VsdCA9IHZhbHVlTm9ybWFsaXplciA/IHZhbHVlTm9ybWFsaXplcihyZXN1
        bHQpIDogcmVzdWx0OwoKICAgICAgY29udGV4dCA9IHByZXNlcnZlQ29udGV4
        dCA/IGN1cnJlbnRDb250ZXh0IDogcmVzdWx0OwogICAgICBpZiAoc2hvdWxk
        RGlzcGxheShyZXN1bHQpKSB7CiAgICAgICAgdGVtcGxhdGUgPSBmbjsKICAg
        ICAgfSBlbHNlIGlmIChpbnZlcnNlKSB7CiAgICAgICAgdGVtcGxhdGUgPSBp
        bnZlcnNlOwogICAgICB9CgogICAgICB0ZW1wbGF0ZShjb250ZXh0LCB7IGRh
        dGE6IG9wdGlvbnMuZGF0YSB9KTsKICAgIH0gZWxzZSB7CiAgICAgIC8vIENy
        ZWF0ZSB0aGUgdmlldyB0aGF0IHdpbGwgd3JhcCB0aGUgb3V0cHV0IG9mIHRo
        aXMgdGVtcGxhdGUvcHJvcGVydHkKICAgICAgLy8gYW5kIGFkZCBpdCB0byB0
        aGUgbmVhcmVzdCB2aWV3J3MgY2hpbGRWaWV3cyBhcnJheS4KICAgICAgLy8g
        U2VlIHRoZSBkb2N1bWVudGF0aW9uIG9mIEVtYmVyLl9IYW5kbGViYXJzQm91
        bmRWaWV3IGZvciBtb3JlLgogICAgICB2YXIgYmluZFZpZXcgPSB2aWV3LmNy
        ZWF0ZUNoaWxkVmlldyhFbWJlci5fSGFuZGxlYmFyc0JvdW5kVmlldywgewog
        ICAgICAgIHByZXNlcnZlQ29udGV4dDogcHJlc2VydmVDb250ZXh0LAogICAg
        ICAgIHNob3VsZERpc3BsYXlGdW5jOiBzaG91bGREaXNwbGF5LAogICAgICAg
        IHZhbHVlTm9ybWFsaXplckZ1bmM6IHZhbHVlTm9ybWFsaXplciwKICAgICAg
        ICBkaXNwbGF5VGVtcGxhdGU6IGZuLAogICAgICAgIGludmVyc2VUZW1wbGF0
        ZTogaW52ZXJzZSwKICAgICAgICBwYXRoOiBwcm9wZXJ0eSwKICAgICAgICBw
        YXRoUm9vdDogY3VycmVudENvbnRleHQsCiAgICAgICAgcHJldmlvdXNDb250
        ZXh0OiBjdXJyZW50Q29udGV4dCwKICAgICAgICBpc0VzY2FwZWQ6ICFvcHRp
        b25zLmhhc2gudW5lc2NhcGVkLAogICAgICAgIHRlbXBsYXRlRGF0YTogb3B0
        aW9ucy5kYXRhCiAgICAgIH0pOwoKICAgICAgdmlldy5hcHBlbmRDaGlsZChi
        aW5kVmlldyk7CgogICAgICBvYnNlcnZlciA9IGZ1bmN0aW9uKCkgewogICAg
        ICAgIEVtYmVyLnJ1bi5zY2hlZHVsZU9uY2UoJ3JlbmRlcicsIGJpbmRWaWV3
        LCAncmVyZW5kZXJJZk5lZWRlZCcpOwogICAgICB9OwogICAgfQoKICAgIC8v
        IE9ic2VydmVzIHRoZSBnaXZlbiBwcm9wZXJ0eSBvbiB0aGUgY29udGV4dCBh
        bmQKICAgIC8vIHRlbGxzIHRoZSBFbWJlci5fSGFuZGxlYmFyc0JvdW5kVmll
        dyB0byByZS1yZW5kZXIuIElmIHByb3BlcnR5CiAgICAvLyBpcyBhbiBlbXB0
        eSBzdHJpbmcsIHdlIGFyZSBwcmludGluZyB0aGUgY3VycmVudCBjb250ZXh0
        CiAgICAvLyBvYmplY3QgKHt7dGhpc319KSBzbyB1cGRhdGluZyBpdCBpcyBu
        b3Qgb3VyIHJlc3BvbnNpYmlsaXR5LgogICAgaWYgKG5vcm1hbGl6ZWQucGF0
        aCAhPT0gJycpIHsKICAgICAgdmlldy5yZWdpc3Rlck9ic2VydmVyKG5vcm1h
        bGl6ZWQucm9vdCwgbm9ybWFsaXplZC5wYXRoLCBvYnNlcnZlcik7CiAgICAg
        IGlmIChjaGlsZFByb3BlcnRpZXMpIHsKICAgICAgICBmb3IgKGk9MDsgaTxj
        aGlsZFByb3BlcnRpZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIHZpZXcu
        cmVnaXN0ZXJPYnNlcnZlcihub3JtYWxpemVkLnJvb3QsIG5vcm1hbGl6ZWQu
        cGF0aCsnLicrY2hpbGRQcm9wZXJ0aWVzW2ldLCBvYnNlcnZlcik7CiAgICAg
        ICAgfQogICAgICB9CiAgICB9CiAgfSBlbHNlIHsKICAgIC8vIFRoZSBvYmpl
        Y3QgaXMgbm90IG9ic2VydmFibGUsIHNvIGp1c3QgcmVuZGVyIGl0IG91dCBh
        bmQKICAgIC8vIGJlIGRvbmUgd2l0aCBpdC4KICAgIGRhdGEuYnVmZmVyLnB1
        c2goaGFuZGxlYmFyc0dldChjdXJyZW50Q29udGV4dCwgcHJvcGVydHksIG9w
        dGlvbnMpKTsKICB9Cn0KCmZ1bmN0aW9uIHNpbXBsZUJpbmQoY3VycmVudENv
        bnRleHQsIHByb3BlcnR5LCBvcHRpb25zKSB7CiAgdmFyIGRhdGEgPSBvcHRp
        b25zLmRhdGEsCiAgICAgIHZpZXcgPSBkYXRhLnZpZXcsCiAgICAgIG5vcm1h
        bGl6ZWQsIG9ic2VydmVyLCBwYXRoUm9vdCwgb3V0cHV0OwoKICBub3JtYWxp
        emVkID0gbm9ybWFsaXplUGF0aChjdXJyZW50Q29udGV4dCwgcHJvcGVydHks
        IGRhdGEpOwogIHBhdGhSb290ID0gbm9ybWFsaXplZC5yb290OwoKICAvLyBT
        ZXQgdXAgb2JzZXJ2ZXJzIGZvciBvYnNlcnZhYmxlIG9iamVjdHMKICBpZiAo
        cGF0aFJvb3QgJiYgKCdvYmplY3QnID09PSB0eXBlb2YgcGF0aFJvb3QpKSB7
        CiAgICBpZiAoZGF0YS5pbnNpZGVHcm91cCkgewogICAgICBvYnNlcnZlciA9
        IGZ1bmN0aW9uKCkgewogICAgICAgIEVtYmVyLnJ1bi5vbmNlKHZpZXcsICdy
        ZXJlbmRlcicpOwogICAgICB9OwoKICAgICAgdmFyIHJlc3VsdCA9IGhhbmRs
        ZWJhcnNHZXQoY3VycmVudENvbnRleHQsIHByb3BlcnR5LCBvcHRpb25zKTsK
        ICAgICAgaWYgKHJlc3VsdCA9PT0gbnVsbCB8fCByZXN1bHQgPT09IHVuZGVm
        aW5lZCkgeyByZXN1bHQgPSAiIjsgfQogICAgICBkYXRhLmJ1ZmZlci5wdXNo
        KHJlc3VsdCk7CiAgICB9IGVsc2UgewogICAgICB2YXIgYmluZFZpZXcgPSBu
        ZXcgRW1iZXIuX1NpbXBsZUhhbmRsZWJhcnNWaWV3KAogICAgICAgIHByb3Bl
        cnR5LCBjdXJyZW50Q29udGV4dCwgIW9wdGlvbnMuaGFzaC51bmVzY2FwZWQs
        IG9wdGlvbnMuZGF0YQogICAgICApOwoKICAgICAgYmluZFZpZXcuX3BhcmVu
        dFZpZXcgPSB2aWV3OwogICAgICB2aWV3LmFwcGVuZENoaWxkKGJpbmRWaWV3
        KTsKCiAgICAgIG9ic2VydmVyID0gZnVuY3Rpb24oKSB7CiAgICAgICAgRW1i
        ZXIucnVuLnNjaGVkdWxlT25jZSgncmVuZGVyJywgYmluZFZpZXcsICdyZXJl
        bmRlcicpOwogICAgICB9OwogICAgfQoKICAgIC8vIE9ic2VydmVzIHRoZSBn
        aXZlbiBwcm9wZXJ0eSBvbiB0aGUgY29udGV4dCBhbmQKICAgIC8vIHRlbGxz
        IHRoZSBFbWJlci5fSGFuZGxlYmFyc0JvdW5kVmlldyB0byByZS1yZW5kZXIu
        IElmIHByb3BlcnR5CiAgICAvLyBpcyBhbiBlbXB0eSBzdHJpbmcsIHdlIGFy
        ZSBwcmludGluZyB0aGUgY3VycmVudCBjb250ZXh0CiAgICAvLyBvYmplY3Qg
        KHt7dGhpc319KSBzbyB1cGRhdGluZyBpdCBpcyBub3Qgb3VyIHJlc3BvbnNp
        YmlsaXR5LgogICAgaWYgKG5vcm1hbGl6ZWQucGF0aCAhPT0gJycpIHsKICAg
        ICAgdmlldy5yZWdpc3Rlck9ic2VydmVyKG5vcm1hbGl6ZWQucm9vdCwgbm9y
        bWFsaXplZC5wYXRoLCBvYnNlcnZlcik7CiAgICB9CiAgfSBlbHNlIHsKICAg
        IC8vIFRoZSBvYmplY3QgaXMgbm90IG9ic2VydmFibGUsIHNvIGp1c3QgcmVu
        ZGVyIGl0IG91dCBhbmQKICAgIC8vIGJlIGRvbmUgd2l0aCBpdC4KICAgIG91
        dHB1dCA9IGhhbmRsZWJhcnNHZXQoY3VycmVudENvbnRleHQsIHByb3BlcnR5
        LCBvcHRpb25zKTsKICAgIGRhdGEuYnVmZmVyLnB1c2goKG91dHB1dCA9PT0g
        bnVsbCB8fCB0eXBlb2Ygb3V0cHV0ID09PSAndW5kZWZpbmVkJykgPyAnJyA6
        IG91dHB1dCk7CiAgfQp9CgovKioKICBAcHJpdmF0ZQoKICAnX3RyaWFnZU11
        c3RhY2hlJyBpcyB1c2VkIGludGVybmFsbHkgc2VsZWN0IGJldHdlZW4gYSBi
        aW5kaW5nLCBoZWxwZXIsIG9yIGNvbXBvbmVudCBmb3IKICB0aGUgZ2l2ZW4g
        Y29udGV4dC4gVW50aWwgdGhpcyBwb2ludCwgaXQgd291bGQgYmUgaGFyZCB0
        byBkZXRlcm1pbmUgaWYgdGhlCiAgbXVzdGFjaGUgaXMgYSBwcm9wZXJ0eSBy
        ZWZlcmVuY2Ugb3IgYSByZWd1bGFyIGhlbHBlciByZWZlcmVuY2UuIFRoaXMg
        dHJpYWdlCiAgaGVscGVyIHJlc29sdmVzIHRoYXQuCgogIFRoaXMgd291bGQg
        bm90IGJlIHR5cGljYWxseSBpbnZva2VkIGJ5IGRpcmVjdGx5LgoKICBAbWV0
        aG9kIF90cmlhZ2VNdXN0YWNoZQogIEBmb3IgRW1iZXIuSGFuZGxlYmFycy5o
        ZWxwZXJzCiAgQHBhcmFtIHtTdHJpbmd9IHByb3BlcnR5IFByb3BlcnR5L2hl
        bHBlcklEIHRvIHRyaWFnZQogIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIGhh
        c2ggb2YgdGVtcGxhdGUvcmVuZGVyaW5nIG9wdGlvbnMKICBAcmV0dXJuIHtT
        dHJpbmd9IEhUTUwgc3RyaW5nCiovCkVtYmVySGFuZGxlYmFycy5yZWdpc3Rl
        ckhlbHBlcignX3RyaWFnZU11c3RhY2hlJywgZnVuY3Rpb24ocHJvcGVydHks
        IG9wdGlvbnMpIHsKICBFbWJlci5hc3NlcnQoIllvdSBjYW5ub3QgcGFzcyBt
        b3JlIHRoYW4gb25lIGFyZ3VtZW50IHRvIHRoZSBfdHJpYWdlTXVzdGFjaGUg
        aGVscGVyIiwgYXJndW1lbnRzLmxlbmd0aCA8PSAyKTsKCiAgaWYgKGhlbHBl
        cnNbcHJvcGVydHldKSB7CiAgICByZXR1cm4gaGVscGVyc1twcm9wZXJ0eV0u
        Y2FsbCh0aGlzLCBvcHRpb25zKTsKICB9CgogIAoKICAgIHZhciBoZWxwZXIg
        PSBFbWJlci5IYW5kbGViYXJzLnJlc29sdmVIZWxwZXIob3B0aW9ucy5kYXRh
        LnZpZXcuY29udGFpbmVyLCBwcm9wZXJ0eSk7CiAgICBpZiAoaGVscGVyKSB7
        CiAgICAgIHJldHVybiBoZWxwZXIuY2FsbCh0aGlzLCBvcHRpb25zKTsKICAg
        IH0KICAKCiAgcmV0dXJuIGhlbHBlcnMuYmluZC5jYWxsKHRoaXMsIHByb3Bl
        cnR5LCBvcHRpb25zKTsKfSk7CgpFbWJlci5IYW5kbGViYXJzLnJlc29sdmVI
        ZWxwZXIgPSBmdW5jdGlvbihjb250YWluZXIsIG5hbWUpIHsKCiAgaWYgKCFj
        b250YWluZXIgfHwgbmFtZS5pbmRleE9mKCctJykgPT09IC0xKSB7CiAgICBy
        ZXR1cm47CiAgfQoKICB2YXIgaGVscGVyID0gY29udGFpbmVyLmxvb2t1cCgn
        aGVscGVyOicgKyBuYW1lKTsKICBpZiAoIWhlbHBlcikgewogICAgdmFyIGNv
        bXBvbmVudExvb2t1cCA9IGNvbnRhaW5lci5sb29rdXAoJ2NvbXBvbmVudC1s
        b29rdXA6bWFpbicpOwogICAgRW1iZXIuYXNzZXJ0KCJDb3VsZCBub3QgZmlu
        ZCAnY29tcG9uZW50LWxvb2t1cDptYWluJyBvbiB0aGUgcHJvdmlkZWQgY29u
        dGFpbmVyLCB3aGljaCBpcyBuZWNlc3NhcnkgZm9yIHBlcmZvcm1pbmcgY29t
        cG9uZW50IGxvb2t1cHMiLCBjb21wb25lbnRMb29rdXApOwoKICAgIHZhciBD
        b21wb25lbnQgPSBjb21wb25lbnRMb29rdXAubG9va3VwRmFjdG9yeShuYW1l
        LCBjb250YWluZXIpOwogICAgaWYgKENvbXBvbmVudCkgewogICAgICBoZWxw
        ZXIgPSBFbWJlckhhbmRsZWJhcnMubWFrZVZpZXdIZWxwZXIoQ29tcG9uZW50
        KTsKICAgICAgY29udGFpbmVyLnJlZ2lzdGVyKCdoZWxwZXI6JyArIG5hbWUs
        IGhlbHBlcik7CiAgICB9CiAgfQogIHJldHVybiBoZWxwZXI7Cn07CgovKioK
        ICBAcHJpdmF0ZQoKICBgYmluZGAgY2FuIGJlIHVzZWQgdG8gZGlzcGxheSBh
        IHZhbHVlLCB0aGVuIHVwZGF0ZSB0aGF0IHZhbHVlIGlmIGl0CiAgY2hhbmdl
        cy4gRm9yIGV4YW1wbGUsIGlmIHlvdSB3YW50ZWQgdG8gcHJpbnQgdGhlIGB0
        aXRsZWAgcHJvcGVydHkgb2YKICBgY29udGVudGA6CgogIGBgYGhhbmRsZWJh
        cnMKICB7e2JpbmQgImNvbnRlbnQudGl0bGUifX0KICBgYGAKCiAgVGhpcyB3
        aWxsIHJldHVybiB0aGUgYHRpdGxlYCBwcm9wZXJ0eSBhcyBhIHN0cmluZywg
        dGhlbiBjcmVhdGUgYSBuZXcgb2JzZXJ2ZXIKICBhdCB0aGUgc3BlY2lmaWVk
        IHBhdGguIElmIGl0IGNoYW5nZXMsIGl0IHdpbGwgdXBkYXRlIHRoZSB2YWx1
        ZSBpbiBET00uIE5vdGUKICB0aGF0IGlmIHlvdSBuZWVkIHRvIHN1cHBvcnQg
        SUU3IGFuZCBJRTggeW91IG11c3QgbW9kaWZ5IHRoZSBtb2RlbCBvYmplY3Rz
        CiAgcHJvcGVydGllcyB1c2luZyBgRW1iZXIuZ2V0KClgIGFuZCBgRW1iZXIu
        c2V0KClgIGZvciB0aGlzIHRvIHdvcmsgYXMgaXQKICByZWxpZXMgb24gRW1i
        ZXIncyBLVk8gc3lzdGVtLiBGb3IgYWxsIG90aGVyIGJyb3dzZXJzIHRoaXMg
        d2lsbCBiZSBoYW5kbGVkIGZvcgogIHlvdSBhdXRvbWF0aWNhbGx5LgoKICBA
        bWV0aG9kIGJpbmQKICBAZm9yIEVtYmVyLkhhbmRsZWJhcnMuaGVscGVycwog
        IEBwYXJhbSB7U3RyaW5nfSBwcm9wZXJ0eSBQcm9wZXJ0eSB0byBiaW5kCiAg
        QHBhcmFtIHtGdW5jdGlvbn0gZm4gQ29udGV4dCB0byBwcm92aWRlIGZvciBy
        ZW5kZXJpbmcKICBAcmV0dXJuIHtTdHJpbmd9IEhUTUwgc3RyaW5nCiovCkVt
        YmVySGFuZGxlYmFycy5yZWdpc3RlckhlbHBlcignYmluZCcsIGZ1bmN0aW9u
        KHByb3BlcnR5LCBvcHRpb25zKSB7CiAgRW1iZXIuYXNzZXJ0KCJZb3UgY2Fu
        bm90IHBhc3MgbW9yZSB0aGFuIG9uZSBhcmd1bWVudCB0byB0aGUgYmluZCBo
        ZWxwZXIiLCBhcmd1bWVudHMubGVuZ3RoIDw9IDIpOwoKICB2YXIgY29udGV4
        dCA9IChvcHRpb25zLmNvbnRleHRzICYmIG9wdGlvbnMuY29udGV4dHMubGVu
        Z3RoKSA/IG9wdGlvbnMuY29udGV4dHNbMF0gOiB0aGlzOwoKICBpZiAoIW9w
        dGlvbnMuZm4pIHsKICAgIHJldHVybiBzaW1wbGVCaW5kKGNvbnRleHQsIHBy
        b3BlcnR5LCBvcHRpb25zKTsKICB9CgogIHJldHVybiBiaW5kLmNhbGwoY29u
        dGV4dCwgcHJvcGVydHksIG9wdGlvbnMsIGZhbHNlLCBleGlzdHMpOwp9KTsK
        Ci8qKgogIEBwcml2YXRlCgogIFVzZSB0aGUgYGJvdW5kSWZgIGhlbHBlciB0
        byBjcmVhdGUgYSBjb25kaXRpb25hbCB0aGF0IHJlLWV2YWx1YXRlcwogIHdo
        ZW5ldmVyIHRoZSB0cnV0aGluZXNzIG9mIHRoZSBib3VuZCB2YWx1ZSBjaGFu
        Z2VzLgoKICBgYGBoYW5kbGViYXJzCiAge3sjYm91bmRJZiAiY29udGVudC5z
        aG91bGREaXNwbGF5VGl0bGUifX0KICAgIHt7Y29udGVudC50aXRsZX19CiAg
        e3svYm91bmRJZn19CiAgYGBgCgogIEBtZXRob2QgYm91bmRJZgogIEBmb3Ig
        RW1iZXIuSGFuZGxlYmFycy5oZWxwZXJzCiAgQHBhcmFtIHtTdHJpbmd9IHBy
        b3BlcnR5IFByb3BlcnR5IHRvIGJpbmQKICBAcGFyYW0ge0Z1bmN0aW9ufSBm
        biBDb250ZXh0IHRvIHByb3ZpZGUgZm9yIHJlbmRlcmluZwogIEByZXR1cm4g
        e1N0cmluZ30gSFRNTCBzdHJpbmcKKi8KRW1iZXJIYW5kbGViYXJzLnJlZ2lz
        dGVySGVscGVyKCdib3VuZElmJywgZnVuY3Rpb24ocHJvcGVydHksIGZuKSB7
        CiAgdmFyIGNvbnRleHQgPSAoZm4uY29udGV4dHMgJiYgZm4uY29udGV4dHMu
        bGVuZ3RoKSA/IGZuLmNvbnRleHRzWzBdIDogdGhpczsKICB2YXIgZnVuYyA9
        IGZ1bmN0aW9uKHJlc3VsdCkgewogICAgdmFyIHRydXRoeSA9IHJlc3VsdCAm
        JiBnZXQocmVzdWx0LCAnaXNUcnV0aHknKTsKICAgIGlmICh0eXBlb2YgdHJ1
        dGh5ID09PSAnYm9vbGVhbicpIHsgcmV0dXJuIHRydXRoeTsgfQoKICAgIGlm
        IChFbWJlci5pc0FycmF5KHJlc3VsdCkpIHsKICAgICAgcmV0dXJuIGdldChy
        ZXN1bHQsICdsZW5ndGgnKSAhPT0gMDsKICAgIH0gZWxzZSB7CiAgICAgIHJl
        dHVybiAhIXJlc3VsdDsKICAgIH0KICB9OwoKICByZXR1cm4gYmluZC5jYWxs
        KGNvbnRleHQsIHByb3BlcnR5LCBmbiwgdHJ1ZSwgZnVuYywgZnVuYywgWydp
        c1RydXRoeScsICdsZW5ndGgnXSk7Cn0pOwoKLyoqCiAgQG1ldGhvZCB3aXRo
        CiAgQGZvciBFbWJlci5IYW5kbGViYXJzLmhlbHBlcnMKICBAcGFyYW0ge0Z1
        bmN0aW9ufSBjb250ZXh0CiAgQHBhcmFtIHtIYXNofSBvcHRpb25zCiAgQHJl
        dHVybiB7U3RyaW5nfSBIVE1MIHN0cmluZwoqLwpFbWJlckhhbmRsZWJhcnMu
        cmVnaXN0ZXJIZWxwZXIoJ3dpdGgnLCBmdW5jdGlvbihjb250ZXh0LCBvcHRp
        b25zKSB7CiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDQpIHsKICAgIHZh
        ciBrZXl3b3JkTmFtZSwgcGF0aCwgcm9vdFBhdGgsIG5vcm1hbGl6ZWQ7Cgog
        ICAgRW1iZXIuYXNzZXJ0KCJJZiB5b3UgcGFzcyBtb3JlIHRoYW4gb25lIGFy
        Z3VtZW50IHRvIHRoZSB3aXRoIGhlbHBlciwgaXQgbXVzdCBiZSBpbiB0aGUg
        Zm9ybSAjd2l0aCBmb28gYXMgYmFyIiwgYXJndW1lbnRzWzFdID09PSAiYXMi
        KTsKICAgIG9wdGlvbnMgPSBhcmd1bWVudHNbM107CiAgICBrZXl3b3JkTmFt
        ZSA9IGFyZ3VtZW50c1syXTsKICAgIHBhdGggPSBhcmd1bWVudHNbMF07Cgog
        ICAgRW1iZXIuYXNzZXJ0KCJZb3UgbXVzdCBwYXNzIGEgYmxvY2sgdG8gdGhl
        IHdpdGggaGVscGVyIiwgb3B0aW9ucy5mbiAmJiBvcHRpb25zLmZuICE9PSBI
        YW5kbGViYXJzLlZNLm5vb3ApOwoKICAgIGlmIChFbWJlci5pc0dsb2JhbFBh
        dGgocGF0aCkpIHsKICAgICAgRW1iZXIuYmluZChvcHRpb25zLmRhdGEua2V5
        d29yZHMsIGtleXdvcmROYW1lLCBwYXRoKTsKICAgIH0gZWxzZSB7CiAgICAg
        IG5vcm1hbGl6ZWQgPSBub3JtYWxpemVQYXRoKHRoaXMsIHBhdGgsIG9wdGlv
        bnMuZGF0YSk7CiAgICAgIHBhdGggPSBub3JtYWxpemVkLnBhdGg7CiAgICAg
        IHJvb3RQYXRoID0gbm9ybWFsaXplZC5yb290OwoKICAgICAgLy8gVGhpcyBp
        cyBhIHdvcmthcm91bmQgZm9yIHRoZSBmYWN0IHRoYXQgeW91IGNhbm5vdCBi
        aW5kIHNlcGFyYXRlIG9iamVjdHMKICAgICAgLy8gdG9nZXRoZXIuIFdoZW4g
        d2UgaW1wbGVtZW50IHRoYXQgZnVuY3Rpb25hbGl0eSwgd2Ugc2hvdWxkIHVz
        ZSBpdCBoZXJlLgogICAgICB2YXIgY29udGV4dEtleSA9IEVtYmVyLiQuZXhw
        YW5kbyArIEVtYmVyLmd1aWRGb3Iocm9vdFBhdGgpOwogICAgICBvcHRpb25z
        LmRhdGEua2V5d29yZHNbY29udGV4dEtleV0gPSByb290UGF0aDsKCiAgICAg
        IC8vIGlmIHRoZSBwYXRoIGlzICcnICgidGhpcyIpLCBqdXN0IGJpbmQgZGly
        ZWN0bHkgdG8gdGhlIGN1cnJlbnQgY29udGV4dAogICAgICB2YXIgY29udGV4
        dFBhdGggPSBwYXRoID8gY29udGV4dEtleSArICcuJyArIHBhdGggOiBjb250
        ZXh0S2V5OwogICAgICBFbWJlci5iaW5kKG9wdGlvbnMuZGF0YS5rZXl3b3Jk
        cywga2V5d29yZE5hbWUsIGNvbnRleHRQYXRoKTsKICAgIH0KCiAgICByZXR1
        cm4gYmluZC5jYWxsKHRoaXMsIHBhdGgsIG9wdGlvbnMsIHRydWUsIGV4aXN0
        cyk7CiAgfSBlbHNlIHsKICAgIEVtYmVyLmFzc2VydCgiWW91IG11c3QgcGFz
        cyBleGFjdGx5IG9uZSBhcmd1bWVudCB0byB0aGUgd2l0aCBoZWxwZXIiLCBh
        cmd1bWVudHMubGVuZ3RoID09PSAyKTsKICAgIEVtYmVyLmFzc2VydCgiWW91
        IG11c3QgcGFzcyBhIGJsb2NrIHRvIHRoZSB3aXRoIGhlbHBlciIsIG9wdGlv
        bnMuZm4gJiYgb3B0aW9ucy5mbiAhPT0gSGFuZGxlYmFycy5WTS5ub29wKTsK
        ICAgIHJldHVybiBoZWxwZXJzLmJpbmQuY2FsbChvcHRpb25zLmNvbnRleHRz
        WzBdLCBjb250ZXh0LCBvcHRpb25zKTsKICB9Cn0pOwoKCi8qKgogIFNlZSBb
        Ym91bmRJZl0oL2FwaS9jbGFzc2VzL0VtYmVyLkhhbmRsZWJhcnMuaGVscGVy
        cy5odG1sI21ldGhvZF9ib3VuZElmKQoKICBAbWV0aG9kIGlmCiAgQGZvciBF
        bWJlci5IYW5kbGViYXJzLmhlbHBlcnMKICBAcGFyYW0ge0Z1bmN0aW9ufSBj
        b250ZXh0CiAgQHBhcmFtIHtIYXNofSBvcHRpb25zCiAgQHJldHVybiB7U3Ry
        aW5nfSBIVE1MIHN0cmluZwoqLwpFbWJlckhhbmRsZWJhcnMucmVnaXN0ZXJI
        ZWxwZXIoJ2lmJywgZnVuY3Rpb24oY29udGV4dCwgb3B0aW9ucykgewogIEVt
        YmVyLmFzc2VydCgiWW91IG11c3QgcGFzcyBleGFjdGx5IG9uZSBhcmd1bWVu
        dCB0byB0aGUgaWYgaGVscGVyIiwgYXJndW1lbnRzLmxlbmd0aCA9PT0gMik7
        CiAgRW1iZXIuYXNzZXJ0KCJZb3UgbXVzdCBwYXNzIGEgYmxvY2sgdG8gdGhl
        IGlmIGhlbHBlciIsIG9wdGlvbnMuZm4gJiYgb3B0aW9ucy5mbiAhPT0gSGFu
        ZGxlYmFycy5WTS5ub29wKTsKCiAgcmV0dXJuIGhlbHBlcnMuYm91bmRJZi5j
        YWxsKG9wdGlvbnMuY29udGV4dHNbMF0sIGNvbnRleHQsIG9wdGlvbnMpOwp9
        KTsKCi8qKgogIEBtZXRob2QgdW5sZXNzCiAgQGZvciBFbWJlci5IYW5kbGVi
        YXJzLmhlbHBlcnMKICBAcGFyYW0ge0Z1bmN0aW9ufSBjb250ZXh0CiAgQHBh
        cmFtIHtIYXNofSBvcHRpb25zCiAgQHJldHVybiB7U3RyaW5nfSBIVE1MIHN0
        cmluZwoqLwpFbWJlckhhbmRsZWJhcnMucmVnaXN0ZXJIZWxwZXIoJ3VubGVz
        cycsIGZ1bmN0aW9uKGNvbnRleHQsIG9wdGlvbnMpIHsKICBFbWJlci5hc3Nl
        cnQoIllvdSBtdXN0IHBhc3MgZXhhY3RseSBvbmUgYXJndW1lbnQgdG8gdGhl
        IHVubGVzcyBoZWxwZXIiLCBhcmd1bWVudHMubGVuZ3RoID09PSAyKTsKICBF
        bWJlci5hc3NlcnQoIllvdSBtdXN0IHBhc3MgYSBibG9jayB0byB0aGUgdW5s
        ZXNzIGhlbHBlciIsIG9wdGlvbnMuZm4gJiYgb3B0aW9ucy5mbiAhPT0gSGFu
        ZGxlYmFycy5WTS5ub29wKTsKCiAgdmFyIGZuID0gb3B0aW9ucy5mbiwgaW52
        ZXJzZSA9IG9wdGlvbnMuaW52ZXJzZTsKCiAgb3B0aW9ucy5mbiA9IGludmVy
        c2U7CiAgb3B0aW9ucy5pbnZlcnNlID0gZm47CgogIHJldHVybiBoZWxwZXJz
        LmJvdW5kSWYuY2FsbChvcHRpb25zLmNvbnRleHRzWzBdLCBjb250ZXh0LCBv
        cHRpb25zKTsKfSk7CgovKioKICBgYmluZC1hdHRyYCBhbGxvd3MgeW91IHRv
        IGNyZWF0ZSBhIGJpbmRpbmcgYmV0d2VlbiBET00gZWxlbWVudCBhdHRyaWJ1
        dGVzIGFuZAogIEVtYmVyIG9iamVjdHMuIEZvciBleGFtcGxlOgoKICBgYGBo
        YW5kbGViYXJzCiAgPGltZyB7e2JpbmQtYXR0ciBzcmM9ImltYWdlVXJsIiBh
        bHQ9ImltYWdlVGl0bGUifX0+CiAgYGBgCgogIFRoZSBhYm92ZSBoYW5kbGVi
        YXJzIHRlbXBsYXRlIHdpbGwgZmlsbCB0aGUgYDxpbWc+YCdzIGBzcmNgIGF0
        dHJpYnV0ZSB3aWxsCiAgdGhlIHZhbHVlIG9mIHRoZSBwcm9wZXJ0eSByZWZl
        cmVuY2VkIHdpdGggYCJpbWFnZVVybCJgIGFuZCBpdHMgYGFsdGAKICBhdHRy
        aWJ1dGUgd2l0aCB0aGUgdmFsdWUgb2YgdGhlIHByb3BlcnR5IHJlZmVyZW5j
        ZWQgd2l0aCBgImltYWdlVGl0bGUiYC4KCiAgSWYgdGhlIHJlbmRlcmluZyBj
        b250ZXh0IG9mIHRoaXMgdGVtcGxhdGUgaXMgdGhlIGZvbGxvd2luZyBvYmpl
        Y3Q6CgogIGBgYGphdmFzY3JpcHQKICB7CiAgICBpbWFnZVVybDogJ2h0dHA6
        Ly9sb2xjYXRzLmluZm8vaGF6LWEtZnVubnknLAogICAgaW1hZ2VUaXRsZTog
        J0EgaHVtb3JvdXMgaW1hZ2Ugb2YgYSBjYXQnCiAgfQogIGBgYAoKICBUaGUg
        cmVzdWx0aW5nIEhUTUwgb3V0cHV0IHdpbGwgYmU6CgogIGBgYGh0bWwKICA8
        aW1nIHNyYz0iaHR0cDovL2xvbGNhdHMuaW5mby9oYXotYS1mdW5ueSIgYWx0
        PSJBIGh1bW9yb3VzIGltYWdlIG9mIGEgY2F0Ij4KICBgYGAKCiAgYGJpbmQt
        YXR0cmAgY2Fubm90IHJlZGVjbGFyZSBleGlzdGluZyBET00gZWxlbWVudCBh
        dHRyaWJ1dGVzLiBUaGUgdXNlIG9mIGBzcmNgCiAgaW4gdGhlIGZvbGxvd2lu
        ZyBgYmluZC1hdHRyYCBleGFtcGxlIHdpbGwgYmUgaWdub3JlZCBhbmQgdGhl
        IGhhcmQgY29kZWQgdmFsdWUKICBvZiBgc3JjPSIvZmFpbHdoYWxlLmdpZiJg
        IHdpbGwgdGFrZSBwcmVjZWRlbmNlOgoKICBgYGBoYW5kbGViYXJzCiAgPGlt
        ZyBzcmM9Ii9mYWlsd2hhbGUuZ2lmIiB7e2JpbmQtYXR0ciBzcmM9ImltYWdl
        VXJsIiBhbHQ9ImltYWdlVGl0bGUifX0+CiAgYGBgCgogICMjIyBgYmluZC1h
        dHRyYCBhbmQgdGhlIGBjbGFzc2AgYXR0cmlidXRlCgogIGBiaW5kLWF0dHJg
        IHN1cHBvcnRzIGEgc3BlY2lhbCBzeW50YXggZm9yIGhhbmRsaW5nIGEgbnVt
        YmVyIG9mIGNhc2VzIHVuaXF1ZQogIHRvIHRoZSBgY2xhc3NgIERPTSBlbGVt
        ZW50IGF0dHJpYnV0ZS4gVGhlIGBjbGFzc2AgYXR0cmlidXRlIGNvbWJpbmVz
        CiAgbXVsdGlwbGUgZGlzY3JldGUgdmFsdWVzIGludG8gYSBzaW5nbGUgYXR0
        cmlidXRlIGFzIGEgc3BhY2UtZGVsaW1pdGVkCiAgbGlzdCBvZiBzdHJpbmdz
        LiBFYWNoIHN0cmluZyBjYW4gYmU6CgogICogYSBzdHJpbmcgcmV0dXJuIHZh
        bHVlIG9mIGFuIG9iamVjdCdzIHByb3BlcnR5LgogICogYSBib29sZWFuIHJl
        dHVybiB2YWx1ZSBvZiBhbiBvYmplY3QncyBwcm9wZXJ0eQogICogYSBoYXJk
        LWNvZGVkIHZhbHVlCgogIEEgc3RyaW5nIHJldHVybiB2YWx1ZSB3b3JrcyBp
        ZGVudGljYWxseSB0byBvdGhlciB1c2VzIG9mIGBiaW5kLWF0dHJgLiBUaGUK
        ICByZXR1cm4gdmFsdWUgb2YgdGhlIHByb3BlcnR5IHdpbGwgYmVjb21lIHRo
        ZSB2YWx1ZSBvZiB0aGUgYXR0cmlidXRlLiBGb3IKICBleGFtcGxlLCB0aGUg
        Zm9sbG93aW5nIHZpZXcgYW5kIHRlbXBsYXRlOgoKICBgYGBqYXZhc2NyaXB0
        CiAgICBBVmlldyA9IEVtYmVyLlZpZXcuZXh0ZW5kKHsKICAgICAgc29tZVBy
        b3BlcnR5OiBmdW5jdGlvbigpIHsKICAgICAgICByZXR1cm4gImFWYWx1ZSI7
        CiAgICAgIH0ucHJvcGVydHkoKQogICAgfSkKICBgYGAKCiAgYGBgaGFuZGxl
        YmFycwogIDxpbWcge3tiaW5kLWF0dHIgY2xhc3M9InZpZXcuc29tZVByb3Bl
        cnR5fX0+CiAgYGBgCgogIFJlc3VsdCBpbiB0aGUgZm9sbG93aW5nIHJlbmRl
        cmVkIG91dHB1dDoKCiAgYGBgaHRtbAogIDxpbWcgY2xhc3M9ImFWYWx1ZSI+
        CiAgYGBgCgogIEEgYm9vbGVhbiByZXR1cm4gdmFsdWUgd2lsbCBpbnNlcnQg
        YSBzcGVjaWZpZWQgY2xhc3MgbmFtZSBpZiB0aGUgcHJvcGVydHkKICByZXR1
        cm5zIGB0cnVlYCBhbmQgcmVtb3ZlIHRoZSBjbGFzcyBuYW1lIGlmIHRoZSBw
        cm9wZXJ0eSByZXR1cm5zIGBmYWxzZWAuCgogIEEgY2xhc3MgbmFtZSBpcyBw
        cm92aWRlZCB2aWEgdGhlIHN5bnRheAogIGBzb21lUHJvcGVydHlOYW1lOmNs
        YXNzLW5hbWUtaWYtdHJ1ZWAuCgogIGBgYGphdmFzY3JpcHQKICBBVmlldyA9
        IEVtYmVyLlZpZXcuZXh0ZW5kKHsKICAgIHNvbWVCb29sOiB0cnVlCiAgfSkK
        ICBgYGAKCiAgYGBgaGFuZGxlYmFycwogIDxpbWcge3tiaW5kLWF0dHIgY2xh
        c3M9InZpZXcuc29tZUJvb2w6Y2xhc3MtbmFtZS1pZi10cnVlIn19PgogIGBg
        YAoKICBSZXN1bHQgaW4gdGhlIGZvbGxvd2luZyByZW5kZXJlZCBvdXRwdXQ6
        CgogIGBgYGh0bWwKICA8aW1nIGNsYXNzPSJjbGFzcy1uYW1lLWlmLXRydWUi
        PgogIGBgYAoKICBBbiBhZGRpdGlvbmFsIHNlY3Rpb24gb2YgdGhlIGJpbmRp
        bmcgY2FuIGJlIHByb3ZpZGVkIGlmIHlvdSB3YW50IHRvCiAgcmVwbGFjZSB0
        aGUgZXhpc3RpbmcgY2xhc3MgaW5zdGVhZCBvZiByZW1vdmluZyBpdCB3aGVu
        IHRoZSBib29sZWFuCiAgdmFsdWUgY2hhbmdlczoKCiAgYGBgaGFuZGxlYmFy
        cwogIDxpbWcge3tiaW5kLWF0dHIgY2xhc3M9InZpZXcuc29tZUJvb2w6Y2xh
        c3MtbmFtZS1pZi10cnVlOmNsYXNzLW5hbWUtaWYtZmFsc2UifX0+CiAgYGBg
        CgogIEEgaGFyZC1jb2RlZCB2YWx1ZSBjYW4gYmUgdXNlZCBieSBwcmVwZW5k
        aW5nIGA6YCB0byB0aGUgZGVzaXJlZAogIGNsYXNzIG5hbWU6IGA6Y2xhc3Mt
        bmFtZS10by1hbHdheXMtYXBwbHlgLgoKICBgYGBoYW5kbGViYXJzCiAgPGlt
        ZyB7e2JpbmQtYXR0ciBjbGFzcz0iOmNsYXNzLW5hbWUtdG8tYWx3YXlzLWFw
        cGx5In19PgogIGBgYAoKICBSZXN1bHRzIGluIHRoZSBmb2xsb3dpbmcgcmVu
        ZGVyZWQgb3V0cHV0OgoKICBgYGBodG1sCiAgPGltZyBjbGFzcz0iY2xhc3Mt
        bmFtZS10by1hbHdheXMtYXBwbHkiPgogIGBgYAoKICBBbGwgdGhyZWUgc3Ry
        YXRlZ2llcyAtIHN0cmluZyByZXR1cm4gdmFsdWUsIGJvb2xlYW4gcmV0dXJu
        IHZhbHVlLCBhbmQKICBoYXJkLWNvZGVkIHZhbHVlIOKAkyBjYW4gYmUgY29t
        YmluZWQgaW4gYSBzaW5nbGUgZGVjbGFyYXRpb246CgogIGBgYGhhbmRsZWJh
        cnMKICA8aW1nIHt7YmluZC1hdHRyIGNsYXNzPSI6Y2xhc3MtbmFtZS10by1h
        bHdheXMtYXBwbHkgdmlldy5zb21lQm9vbDpjbGFzcy1uYW1lLWlmLXRydWUg
        dmlldy5zb21lUHJvcGVydHkifX0+CiAgYGBgCgogIEBtZXRob2QgYmluZC1h
        dHRyCiAgQGZvciBFbWJlci5IYW5kbGViYXJzLmhlbHBlcnMKICBAcGFyYW0g
        e0hhc2h9IG9wdGlvbnMKICBAcmV0dXJuIHtTdHJpbmd9IEhUTUwgc3RyaW5n
        CiovCkVtYmVySGFuZGxlYmFycy5yZWdpc3RlckhlbHBlcignYmluZC1hdHRy
        JywgZnVuY3Rpb24ob3B0aW9ucykgewoKICB2YXIgYXR0cnMgPSBvcHRpb25z
        Lmhhc2g7CgogIEVtYmVyLmFzc2VydCgiWW91IG11c3Qgc3BlY2lmeSBhdCBs
        ZWFzdCBvbmUgaGFzaCBhcmd1bWVudCB0byBiaW5kLWF0dHIiLCAhIUVtYmVy
        LmtleXMoYXR0cnMpLmxlbmd0aCk7CgogIHZhciB2aWV3ID0gb3B0aW9ucy5k
        YXRhLnZpZXc7CiAgdmFyIHJldCA9IFtdOwogIHZhciBjdHggPSB0aGlzOwoK
        ICAvLyBHZW5lcmF0ZSBhIHVuaXF1ZSBpZCBmb3IgdGhpcyBlbGVtZW50LiBU
        aGlzIHdpbGwgYmUgYWRkZWQgYXMgYQogIC8vIGRhdGEgYXR0cmlidXRlIHRv
        IHRoZSBlbGVtZW50IHNvIGl0IGNhbiBiZSBsb29rZWQgdXAgd2hlbgogIC8v
        IHRoZSBib3VuZCBwcm9wZXJ0eSBjaGFuZ2VzLgogIHZhciBkYXRhSWQgPSAr
        K0VtYmVyLnV1aWQ7CgogIC8vIEhhbmRsZSBjbGFzc2VzIGRpZmZlcmVudGx5
        LCBhcyB3ZSBjYW4gYmluZCBtdWx0aXBsZSBjbGFzc2VzCiAgdmFyIGNsYXNz
        QmluZGluZ3MgPSBhdHRyc1snY2xhc3MnXTsKICBpZiAoY2xhc3NCaW5kaW5n
        cyAhPSBudWxsKSB7CiAgICB2YXIgY2xhc3NSZXN1bHRzID0gRW1iZXJIYW5k
        bGViYXJzLmJpbmRDbGFzc2VzKHRoaXMsIGNsYXNzQmluZGluZ3MsIHZpZXcs
        IGRhdGFJZCwgb3B0aW9ucyk7CgogICAgcmV0LnB1c2goJ2NsYXNzPSInICsg
        SGFuZGxlYmFycy5VdGlscy5lc2NhcGVFeHByZXNzaW9uKGNsYXNzUmVzdWx0
        cy5qb2luKCcgJykpICsgJyInKTsKICAgIGRlbGV0ZSBhdHRyc1snY2xhc3Mn
        XTsKICB9CgogIHZhciBhdHRyS2V5cyA9IEVtYmVyLmtleXMoYXR0cnMpOwoK
        ICAvLyBGb3IgZWFjaCBhdHRyaWJ1dGUgcGFzc2VkLCBjcmVhdGUgYW4gb2Jz
        ZXJ2ZXIgYW5kIGVtaXQgdGhlCiAgLy8gY3VycmVudCB2YWx1ZSBvZiB0aGUg
        cHJvcGVydHkgYXMgYW4gYXR0cmlidXRlLgogIGZvckVhY2guY2FsbChhdHRy
        S2V5cywgZnVuY3Rpb24oYXR0cikgewogICAgdmFyIHBhdGggPSBhdHRyc1th
        dHRyXSwKICAgICAgICBub3JtYWxpemVkOwoKICAgIEVtYmVyLmFzc2VydChm
        bXQoIllvdSBtdXN0IHByb3ZpZGUgYW4gZXhwcmVzc2lvbiBhcyB0aGUgdmFs
        dWUgb2YgYm91bmQgYXR0cmlidXRlLiBZb3Ugc3BlY2lmaWVkOiAlQD0lQCIs
        IFthdHRyLCBwYXRoXSksIHR5cGVvZiBwYXRoID09PSAnc3RyaW5nJyk7Cgog
        ICAgbm9ybWFsaXplZCA9IG5vcm1hbGl6ZVBhdGgoY3R4LCBwYXRoLCBvcHRp
        b25zLmRhdGEpOwoKICAgIHZhciB2YWx1ZSA9IChwYXRoID09PSAndGhpcycp
        ID8gbm9ybWFsaXplZC5yb290IDogaGFuZGxlYmFyc0dldChjdHgsIHBhdGgs
        IG9wdGlvbnMpLAogICAgICAgIHR5cGUgPSBFbWJlci50eXBlT2YodmFsdWUp
        OwoKICAgIEVtYmVyLmFzc2VydChmbXQoIkF0dHJpYnV0ZXMgbXVzdCBiZSBu
        dW1iZXJzLCBzdHJpbmdzIG9yIGJvb2xlYW5zLCBub3QgJUAiLCBbdmFsdWVd
        KSwgdmFsdWUgPT09IG51bGwgfHwgdmFsdWUgPT09IHVuZGVmaW5lZCB8fCB0
        eXBlID09PSAnbnVtYmVyJyB8fCB0eXBlID09PSAnc3RyaW5nJyB8fCB0eXBl
        ID09PSAnYm9vbGVhbicpOwoKICAgIHZhciBvYnNlcnZlciwgaW52b2tlcjsK
        CiAgICBvYnNlcnZlciA9IGZ1bmN0aW9uIG9ic2VydmVyKCkgewogICAgICB2
        YXIgcmVzdWx0ID0gaGFuZGxlYmFyc0dldChjdHgsIHBhdGgsIG9wdGlvbnMp
        OwoKICAgICAgRW1iZXIuYXNzZXJ0KGZtdCgiQXR0cmlidXRlcyBtdXN0IGJl
        IG51bWJlcnMsIHN0cmluZ3Mgb3IgYm9vbGVhbnMsIG5vdCAlQCIsIFtyZXN1
        bHRdKSwgcmVzdWx0ID09PSBudWxsIHx8IHJlc3VsdCA9PT0gdW5kZWZpbmVk
        IHx8IHR5cGVvZiByZXN1bHQgPT09ICdudW1iZXInIHx8IHR5cGVvZiByZXN1
        bHQgPT09ICdzdHJpbmcnIHx8IHR5cGVvZiByZXN1bHQgPT09ICdib29sZWFu
        Jyk7CgogICAgICB2YXIgZWxlbSA9IHZpZXcuJCgiW2RhdGEtYmluZGF0dHIt
        IiArIGRhdGFJZCArICI9JyIgKyBkYXRhSWQgKyAiJ10iKTsKCiAgICAgIC8v
        IElmIHdlIGFyZW4ndCBhYmxlIHRvIGZpbmQgdGhlIGVsZW1lbnQsIGl0IG1l
        YW5zIHRoZSBlbGVtZW50CiAgICAgIC8vIHRvIHdoaWNoIHdlIHdlcmUgYm91
        bmQgaGFzIGJlZW4gcmVtb3ZlZCBmcm9tIHRoZSB2aWV3LgogICAgICAvLyBJ
        biB0aGF0IGNhc2UsIHdlIGNhbiBhc3N1bWUgdGhlIHRlbXBsYXRlIGhhcyBi
        ZWVuIHJlLXJlbmRlcmVkCiAgICAgIC8vIGFuZCB3ZSBuZWVkIHRvIGNsZWFu
        IHVwIHRoZSBvYnNlcnZlci4KICAgICAgaWYgKCFlbGVtIHx8IGVsZW0ubGVu
        Z3RoID09PSAwKSB7CiAgICAgICAgRW1iZXIucmVtb3ZlT2JzZXJ2ZXIobm9y
        bWFsaXplZC5yb290LCBub3JtYWxpemVkLnBhdGgsIGludm9rZXIpOwogICAg
        ICAgIHJldHVybjsKICAgICAgfQoKICAgICAgRW1iZXIuVmlldy5hcHBseUF0
        dHJpYnV0ZUJpbmRpbmdzKGVsZW0sIGF0dHIsIHJlc3VsdCk7CiAgICB9OwoK
        ICAgIC8vIEFkZCBhbiBvYnNlcnZlciB0byB0aGUgdmlldyBmb3Igd2hlbiB0
        aGUgcHJvcGVydHkgY2hhbmdlcy4KICAgIC8vIFdoZW4gdGhlIG9ic2VydmVy
        IGZpcmVzLCBmaW5kIHRoZSBlbGVtZW50IHVzaW5nIHRoZQogICAgLy8gdW5p
        cXVlIGRhdGEgaWQgYW5kIHVwZGF0ZSB0aGUgYXR0cmlidXRlIHRvIHRoZSBu
        ZXcgdmFsdWUuCiAgICAvLyBOb3RlOiBkb24ndCBhZGQgb2JzZXJ2ZXIgd2hl
        biBwYXRoIGlzICd0aGlzJyBvciBwYXRoCiAgICAvLyBpcyB3aG9sZSBrZXl3
        b3JkIGUuZy4ge3sjZWFjaCB4IGluIGxpc3R9fSAuLi4ge3tiaW5kLWF0dHIg
        YXR0cj0ieCJ9fQogICAgaWYgKHBhdGggIT09ICd0aGlzJyAmJiAhKG5vcm1h
        bGl6ZWQuaXNLZXl3b3JkICYmIG5vcm1hbGl6ZWQucGF0aCA9PT0gJycgKSkg
        ewogICAgICB2aWV3LnJlZ2lzdGVyT2JzZXJ2ZXIobm9ybWFsaXplZC5yb290
        LCBub3JtYWxpemVkLnBhdGgsIG9ic2VydmVyKTsKICAgIH0KCiAgICAvLyBp
        ZiB0aGlzIGNoYW5nZXMsIGFsc28gY2hhbmdlIHRoZSBsb2dpYyBpbiBlbWJl
        ci12aWV3cy9saWIvdmlld3Mvdmlldy5qcwogICAgaWYgKCh0eXBlID09PSAn
        c3RyaW5nJyB8fCAodHlwZSA9PT0gJ251bWJlcicgJiYgIWlzTmFOKHZhbHVl
        KSkpKSB7CiAgICAgIHJldC5wdXNoKGF0dHIgKyAnPSInICsgSGFuZGxlYmFy
        cy5VdGlscy5lc2NhcGVFeHByZXNzaW9uKHZhbHVlKSArICciJyk7CiAgICB9
        IGVsc2UgaWYgKHZhbHVlICYmIHR5cGUgPT09ICdib29sZWFuJykgewogICAg
        ICAvLyBUaGUgZGV2ZWxvcGVyIGNvbnRyb2xzIHRoZSBhdHRyIG5hbWUsIHNv
        IGl0IHNob3VsZCBhbHdheXMgYmUgc2FmZQogICAgICByZXQucHVzaChhdHRy
        ICsgJz0iJyArIGF0dHIgKyAnIicpOwogICAgfQogIH0sIHRoaXMpOwoKICAv
        LyBBZGQgdGhlIHVuaXF1ZSBpZGVudGlmaWVyCiAgLy8gTk9URTogV2UgdXNl
        IGFsbCBsb3dlci1jYXNlIHNpbmNlIEZpcmVmb3ggaGFzIHByb2JsZW1zIHdp
        dGggbWl4ZWQgY2FzZSBpbiBTVkcKICByZXQucHVzaCgnZGF0YS1iaW5kYXR0
        ci0nICsgZGF0YUlkICsgJz0iJyArIGRhdGFJZCArICciJyk7CiAgcmV0dXJu
        IG5ldyBFbWJlckhhbmRsZWJhcnMuU2FmZVN0cmluZyhyZXQuam9pbignICcp
        KTsKfSk7CgovKioKICBTZWUgYGJpbmQtYXR0cmAKCiAgQG1ldGhvZCBiaW5k
        QXR0cgogIEBmb3IgRW1iZXIuSGFuZGxlYmFycy5oZWxwZXJzCiAgQGRlcHJl
        Y2F0ZWQKICBAcGFyYW0ge0Z1bmN0aW9ufSBjb250ZXh0CiAgQHBhcmFtIHtI
        YXNofSBvcHRpb25zCiAgQHJldHVybiB7U3RyaW5nfSBIVE1MIHN0cmluZwoq
        LwpFbWJlckhhbmRsZWJhcnMucmVnaXN0ZXJIZWxwZXIoJ2JpbmRBdHRyJywg
        RW1iZXJIYW5kbGViYXJzLmhlbHBlcnNbJ2JpbmQtYXR0ciddKTsKCi8qKgog
        IEBwcml2YXRlCgogIEhlbHBlciB0aGF0LCBnaXZlbiBhIHNwYWNlLXNlcGFy
        YXRlZCBzdHJpbmcgb2YgcHJvcGVydHkgcGF0aHMgYW5kIGEgY29udGV4dCwK
        ICByZXR1cm5zIGFuIGFycmF5IG9mIGNsYXNzIG5hbWVzLiBDYWxsaW5nIHRo
        aXMgbWV0aG9kIGFsc28gaGFzIHRoZSBzaWRlCiAgZWZmZWN0IG9mIHNldHRp
        bmcgdXAgb2JzZXJ2ZXJzIGF0IHRob3NlIHByb3BlcnR5IHBhdGhzLCBzdWNo
        IHRoYXQgaWYgdGhleQogIGNoYW5nZSwgdGhlIGNvcnJlY3QgY2xhc3MgbmFt
        ZSB3aWxsIGJlIHJlYXBwbGllZCB0byB0aGUgRE9NIGVsZW1lbnQuCgogIEZv
        ciBleGFtcGxlLCBpZiB5b3UgcGFzcyB0aGUgc3RyaW5nICJmb29CYXIiLCBp
        dCB3aWxsIGZpcnN0IGxvb2sgdXAgdGhlCiAgImZvb0JhciIgdmFsdWUgb2Yg
        dGhlIGNvbnRleHQuIElmIHRoYXQgdmFsdWUgaXMgdHJ1ZSwgaXQgd2lsbCBh
        ZGQgdGhlCiAgImZvby1iYXIiIGNsYXNzIHRvIHRoZSBjdXJyZW50IGVsZW1l
        bnQgKGkuZS4sIHRoZSBkYXNoZXJpemVkIGZvcm0gb2YKICAiZm9vQmFyIiku
        IElmIHRoZSB2YWx1ZSBpcyBhIHN0cmluZywgaXQgd2lsbCBhZGQgdGhhdCBz
        dHJpbmcgYXMgdGhlIGNsYXNzLgogIE90aGVyd2lzZSwgaXQgd2lsbCBub3Qg
        YWRkIGFueSBuZXcgY2xhc3MgbmFtZS4KCiAgQG1ldGhvZCBiaW5kQ2xhc3Nl
        cwogIEBmb3IgRW1iZXIuSGFuZGxlYmFycwogIEBwYXJhbSB7RW1iZXIuT2Jq
        ZWN0fSBjb250ZXh0IFRoZSBjb250ZXh0IGZyb20gd2hpY2ggdG8gbG9va3Vw
        IHByb3BlcnRpZXMKICBAcGFyYW0ge1N0cmluZ30gY2xhc3NCaW5kaW5ncyBB
        IHN0cmluZywgc3BhY2Utc2VwYXJhdGVkLCBvZiBjbGFzcyBiaW5kaW5ncwog
        ICAgdG8gdXNlCiAgQHBhcmFtIHtFbWJlci5WaWV3fSB2aWV3IFRoZSB2aWV3
        IGluIHdoaWNoIG9ic2VydmVycyBzaG91bGQgbG9vayBmb3IgdGhlCiAgICBl
        bGVtZW50IHRvIHVwZGF0ZQogIEBwYXJhbSB7U3J0aW5nfSBiaW5kQXR0cklk
        IE9wdGlvbmFsIGJpbmRBdHRyIGlkIHVzZWQgdG8gbG9va3VwIGVsZW1lbnRz
        CiAgQHJldHVybiB7QXJyYXl9IEFuIGFycmF5IG9mIGNsYXNzIG5hbWVzIHRv
        IGFkZAoqLwpFbWJlckhhbmRsZWJhcnMuYmluZENsYXNzZXMgPSBmdW5jdGlv
        bihjb250ZXh0LCBjbGFzc0JpbmRpbmdzLCB2aWV3LCBiaW5kQXR0cklkLCBv
        cHRpb25zKSB7CiAgdmFyIHJldCA9IFtdLCBuZXdDbGFzcywgdmFsdWUsIGVs
        ZW07CgogIC8vIEhlbHBlciBtZXRob2QgdG8gcmV0cmlldmUgdGhlIHByb3Bl
        cnR5IGZyb20gdGhlIGNvbnRleHQgYW5kCiAgLy8gZGV0ZXJtaW5lIHdoaWNo
        IGNsYXNzIHN0cmluZyB0byByZXR1cm4sIGJhc2VkIG9uIHdoZXRoZXIgaXQg
        aXMKICAvLyBhIEJvb2xlYW4gb3Igbm90LgogIHZhciBjbGFzc1N0cmluZ0Zv
        clBhdGggPSBmdW5jdGlvbihyb290LCBwYXJzZWRQYXRoLCBvcHRpb25zKSB7
        CiAgICB2YXIgdmFsLAogICAgICAgIHBhdGggPSBwYXJzZWRQYXRoLnBhdGg7
        CgogICAgaWYgKHBhdGggPT09ICd0aGlzJykgewogICAgICB2YWwgPSByb290
        OwogICAgfSBlbHNlIGlmIChwYXRoID09PSAnJykgewogICAgICB2YWwgPSB0
        cnVlOwogICAgfSBlbHNlIHsKICAgICAgdmFsID0gaGFuZGxlYmFyc0dldChy
        b290LCBwYXRoLCBvcHRpb25zKTsKICAgIH0KCiAgICByZXR1cm4gRW1iZXIu
        Vmlldy5fY2xhc3NTdHJpbmdGb3JWYWx1ZShwYXRoLCB2YWwsIHBhcnNlZFBh
        dGguY2xhc3NOYW1lLCBwYXJzZWRQYXRoLmZhbHN5Q2xhc3NOYW1lKTsKICB9
        OwoKICAvLyBGb3IgZWFjaCBwcm9wZXJ0eSBwYXNzZWQsIGxvb3AgdGhyb3Vn
        aCBhbmQgc2V0dXAKICAvLyBhbiBvYnNlcnZlci4KICBmb3JFYWNoLmNhbGwo
        Y2xhc3NCaW5kaW5ncy5zcGxpdCgnICcpLCBmdW5jdGlvbihiaW5kaW5nKSB7
        CgogICAgLy8gVmFyaWFibGUgaW4gd2hpY2ggdGhlIG9sZCBjbGFzcyB2YWx1
        ZSBpcyBzYXZlZC4gVGhlIG9ic2VydmVyIGZ1bmN0aW9uCiAgICAvLyBjbG9z
        ZXMgb3ZlciB0aGlzIHZhcmlhYmxlLCBzbyBpdCBrbm93cyB3aGljaCBzdHJp
        bmcgdG8gcmVtb3ZlIHdoZW4KICAgIC8vIHRoZSBwcm9wZXJ0eSBjaGFuZ2Vz
        LgogICAgdmFyIG9sZENsYXNzOwoKICAgIHZhciBvYnNlcnZlciwgaW52b2tl
        cjsKCiAgICB2YXIgcGFyc2VkUGF0aCA9IEVtYmVyLlZpZXcuX3BhcnNlUHJv
        cGVydHlQYXRoKGJpbmRpbmcpLAogICAgICAgIHBhdGggPSBwYXJzZWRQYXRo
        LnBhdGgsCiAgICAgICAgcGF0aFJvb3QgPSBjb250ZXh0LAogICAgICAgIG5v
        cm1hbGl6ZWQ7CgogICAgaWYgKHBhdGggIT09ICcnICYmIHBhdGggIT09ICd0
        aGlzJykgewogICAgICBub3JtYWxpemVkID0gbm9ybWFsaXplUGF0aChjb250
        ZXh0LCBwYXRoLCBvcHRpb25zLmRhdGEpOwoKICAgICAgcGF0aFJvb3QgPSBu
        b3JtYWxpemVkLnJvb3Q7CiAgICAgIHBhdGggPSBub3JtYWxpemVkLnBhdGg7
        CiAgICB9CgogICAgLy8gU2V0IHVwIGFuIG9ic2VydmVyIG9uIHRoZSBjb250
        ZXh0LiBJZiB0aGUgcHJvcGVydHkgY2hhbmdlcywgdG9nZ2xlIHRoZQogICAg
        Ly8gY2xhc3MgbmFtZS4KICAgIG9ic2VydmVyID0gZnVuY3Rpb24oKSB7CiAg
        ICAgIC8vIEdldCB0aGUgY3VycmVudCB2YWx1ZSBvZiB0aGUgcHJvcGVydHkK
        ICAgICAgbmV3Q2xhc3MgPSBjbGFzc1N0cmluZ0ZvclBhdGgoY29udGV4dCwg
        cGFyc2VkUGF0aCwgb3B0aW9ucyk7CiAgICAgIGVsZW0gPSBiaW5kQXR0cklk
        ID8gdmlldy4kKCJbZGF0YS1iaW5kYXR0ci0iICsgYmluZEF0dHJJZCArICI9
        JyIgKyBiaW5kQXR0cklkICsgIiddIikgOiB2aWV3LiQoKTsKCiAgICAgIC8v
        IElmIHdlIGNhbid0IGZpbmQgdGhlIGVsZW1lbnQgYW55bW9yZSwgYSBwYXJl
        bnQgdGVtcGxhdGUgaGFzIGJlZW4KICAgICAgLy8gcmUtcmVuZGVyZWQgYW5k
        IHdlJ3ZlIGJlZW4gbnVrZWQuIFJlbW92ZSB0aGUgb2JzZXJ2ZXIuCiAgICAg
        IGlmICghZWxlbSB8fCBlbGVtLmxlbmd0aCA9PT0gMCkgewogICAgICAgIEVt
        YmVyLnJlbW92ZU9ic2VydmVyKHBhdGhSb290LCBwYXRoLCBpbnZva2VyKTsK
        ICAgICAgfSBlbHNlIHsKICAgICAgICAvLyBJZiB3ZSBoYWQgcHJldmlvdXNs
        eSBhZGRlZCBhIGNsYXNzIHRvIHRoZSBlbGVtZW50LCByZW1vdmUgaXQuCiAg
        ICAgICAgaWYgKG9sZENsYXNzKSB7CiAgICAgICAgICBlbGVtLnJlbW92ZUNs
        YXNzKG9sZENsYXNzKTsKICAgICAgICB9CgogICAgICAgIC8vIElmIG5lY2Vz
        c2FyeSwgYWRkIGEgbmV3IGNsYXNzLiBNYWtlIHN1cmUgd2Uga2VlcCB0cmFj
        ayBvZiBpdCBzbwogICAgICAgIC8vIGl0IGNhbiBiZSByZW1vdmVkIGluIHRo
        ZSBmdXR1cmUuCiAgICAgICAgaWYgKG5ld0NsYXNzKSB7CiAgICAgICAgICBl
        bGVtLmFkZENsYXNzKG5ld0NsYXNzKTsKICAgICAgICAgIG9sZENsYXNzID0g
        bmV3Q2xhc3M7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIG9sZENsYXNz
        ID0gbnVsbDsKICAgICAgICB9CiAgICAgIH0KICAgIH07CgogICAgaWYgKHBh
        dGggIT09ICcnICYmIHBhdGggIT09ICd0aGlzJykgewogICAgICB2aWV3LnJl
        Z2lzdGVyT2JzZXJ2ZXIocGF0aFJvb3QsIHBhdGgsIG9ic2VydmVyKTsKICAg
        IH0KCiAgICAvLyBXZSd2ZSBhbHJlYWR5IHNldHVwIHRoZSBvYnNlcnZlcjsg
        bm93IHdlIGp1c3QgbmVlZCB0byBmaWd1cmUgb3V0IHRoZQogICAgLy8gY29y
        cmVjdCBiZWhhdmlvciByaWdodCBub3cgb24gdGhlIGZpcnN0IHBhc3MgdGhy
        b3VnaC4KICAgIHZhbHVlID0gY2xhc3NTdHJpbmdGb3JQYXRoKGNvbnRleHQs
        IHBhcnNlZFBhdGgsIG9wdGlvbnMpOwoKICAgIGlmICh2YWx1ZSkgewogICAg
        ICByZXQucHVzaCh2YWx1ZSk7CgogICAgICAvLyBNYWtlIHN1cmUgd2Ugc2F2
        ZSB0aGUgY3VycmVudCB2YWx1ZSBzbyB0aGF0IGl0IGNhbiBiZSByZW1vdmVk
        IGlmIHRoZQogICAgICAvLyBvYnNlcnZlciBmaXJlcy4KICAgICAgb2xkQ2xh
        c3MgPSB2YWx1ZTsKICAgIH0KICB9KTsKCiAgcmV0dXJuIHJldDsKfTsKCgp9
        KSgpOwoKCgooZnVuY3Rpb24oKSB7Ci8qZ2xvYmFscyBIYW5kbGViYXJzICov
        CgovLyBUT0RPOiBEb24ndCByZXF1aXJlIHRoZSBlbnRpcmUgbW9kdWxlCi8q
        KgpAbW9kdWxlIGVtYmVyCkBzdWJtb2R1bGUgZW1iZXItaGFuZGxlYmFycwoq
        LwoKdmFyIGdldCA9IEVtYmVyLmdldCwgc2V0ID0gRW1iZXIuc2V0Owp2YXIg
        RW1iZXJIYW5kbGViYXJzID0gRW1iZXIuSGFuZGxlYmFyczsKdmFyIExPV0VS
        Q0FTRV9BX1ogPSAvXlthLXpdLzsKdmFyIFZJRVdfUFJFRklYID0gL152aWV3
        XC4vOwoKZnVuY3Rpb24gbWFrZUJpbmRpbmdzKHRoaXNDb250ZXh0LCBvcHRp
        b25zKSB7CiAgdmFyIGhhc2ggPSBvcHRpb25zLmhhc2gsCiAgICAgIGhhc2hU
        eXBlID0gb3B0aW9ucy5oYXNoVHlwZXM7CgogIGZvciAodmFyIHByb3AgaW4g
        aGFzaCkgewogICAgaWYgKGhhc2hUeXBlW3Byb3BdID09PSAnSUQnKSB7Cgog
        ICAgICB2YXIgdmFsdWUgPSBoYXNoW3Byb3BdOwoKICAgICAgaWYgKEVtYmVy
        LklTX0JJTkRJTkcudGVzdChwcm9wKSkgewogICAgICAgIEVtYmVyLndhcm4o
        IllvdSdyZSBhdHRlbXB0aW5nIHRvIHJlbmRlciBhIHZpZXcgYnkgcGFzc2lu
        ZyAiICsgcHJvcCArICI9IiArIHZhbHVlICsgIiB0byBhIHZpZXcgaGVscGVy
        LCBidXQgdGhpcyBzeW50YXggaXMgYW1iaWd1b3VzLiBZb3Ugc2hvdWxkIGVp
        dGhlciBzdXJyb3VuZCAiICsgdmFsdWUgKyAiIGluIHF1b3RlcyBvciByZW1v
        dmUgYEJpbmRpbmdgIGZyb20gIiArIHByb3AgKyAiLiIpOwogICAgICB9IGVs
        c2UgewogICAgICAgIGhhc2hbcHJvcCArICdCaW5kaW5nJ10gPSB2YWx1ZTsK
        ICAgICAgICBoYXNoVHlwZVtwcm9wICsgJ0JpbmRpbmcnXSA9ICdTVFJJTkcn
        OwogICAgICAgIGRlbGV0ZSBoYXNoW3Byb3BdOwogICAgICAgIGRlbGV0ZSBo
        YXNoVHlwZVtwcm9wXTsKICAgICAgfQogICAgfQogIH0KCiAgaWYgKGhhc2gu
        aGFzT3duUHJvcGVydHkoJ2lkQmluZGluZycpKSB7CiAgICAvLyBpZCBjYW4n
        dCBiZSBib3VuZCwgc28ganVzdCBwZXJmb3JtIG9uZS10aW1lIGxvb2t1cC4K
        ICAgIGhhc2guaWQgPSBFbWJlckhhbmRsZWJhcnMuZ2V0KHRoaXNDb250ZXh0
        LCBoYXNoLmlkQmluZGluZywgb3B0aW9ucyk7CiAgICBoYXNoVHlwZS5pZCA9
        ICdTVFJJTkcnOwogICAgZGVsZXRlIGhhc2guaWRCaW5kaW5nOwogICAgZGVs
        ZXRlIGhhc2hUeXBlLmlkQmluZGluZzsKICB9Cn0KCkVtYmVySGFuZGxlYmFy
        cy5WaWV3SGVscGVyID0gRW1iZXIuT2JqZWN0LmNyZWF0ZSh7CgogIHByb3Bl
        cnRpZXNGcm9tSFRNTE9wdGlvbnM6IGZ1bmN0aW9uKG9wdGlvbnMpIHsKICAg
        IHZhciBoYXNoID0gb3B0aW9ucy5oYXNoLCBkYXRhID0gb3B0aW9ucy5kYXRh
        OwogICAgdmFyIGV4dGVuc2lvbnMgPSB7fSwKICAgICAgICBjbGFzc2VzID0g
        aGFzaFsnY2xhc3MnXSwKICAgICAgICBkdXAgPSBmYWxzZTsKCiAgICBpZiAo
        aGFzaC5pZCkgewogICAgICBleHRlbnNpb25zLmVsZW1lbnRJZCA9IGhhc2gu
        aWQ7CiAgICAgIGR1cCA9IHRydWU7CiAgICB9CgogICAgaWYgKGhhc2gudGFn
        KSB7CiAgICAgIGV4dGVuc2lvbnMudGFnTmFtZSA9IGhhc2gudGFnOwogICAg
        ICBkdXAgPSB0cnVlOwogICAgfQoKICAgIGlmIChjbGFzc2VzKSB7CiAgICAg
        IGNsYXNzZXMgPSBjbGFzc2VzLnNwbGl0KCcgJyk7CiAgICAgIGV4dGVuc2lv
        bnMuY2xhc3NOYW1lcyA9IGNsYXNzZXM7CiAgICAgIGR1cCA9IHRydWU7CiAg
        ICB9CgogICAgaWYgKGhhc2guY2xhc3NCaW5kaW5nKSB7CiAgICAgIGV4dGVu
        c2lvbnMuY2xhc3NOYW1lQmluZGluZ3MgPSBoYXNoLmNsYXNzQmluZGluZy5z
        cGxpdCgnICcpOwogICAgICBkdXAgPSB0cnVlOwogICAgfQoKICAgIGlmICho
        YXNoLmNsYXNzTmFtZUJpbmRpbmdzKSB7CiAgICAgIGlmIChleHRlbnNpb25z
        LmNsYXNzTmFtZUJpbmRpbmdzID09PSB1bmRlZmluZWQpIGV4dGVuc2lvbnMu
        Y2xhc3NOYW1lQmluZGluZ3MgPSBbXTsKICAgICAgZXh0ZW5zaW9ucy5jbGFz
        c05hbWVCaW5kaW5ncyA9IGV4dGVuc2lvbnMuY2xhc3NOYW1lQmluZGluZ3Mu
        Y29uY2F0KGhhc2guY2xhc3NOYW1lQmluZGluZ3Muc3BsaXQoJyAnKSk7CiAg
        ICAgIGR1cCA9IHRydWU7CiAgICB9CgogICAgaWYgKGhhc2guYXR0cmlidXRl
        QmluZGluZ3MpIHsKICAgICAgRW1iZXIuYXNzZXJ0KCJTZXR0aW5nICdhdHRy
        aWJ1dGVCaW5kaW5ncycgdmlhIEhhbmRsZWJhcnMgaXMgbm90IGFsbG93ZWQu
        IFBsZWFzZSBzdWJjbGFzcyBFbWJlci5WaWV3IGFuZCBzZXQgaXQgdGhlcmUg
        aW5zdGVhZC4iKTsKICAgICAgZXh0ZW5zaW9ucy5hdHRyaWJ1dGVCaW5kaW5n
        cyA9IG51bGw7CiAgICAgIGR1cCA9IHRydWU7CiAgICB9CgogICAgaWYgKGR1
        cCkgewogICAgICBoYXNoID0gRW1iZXIuJC5leHRlbmQoe30sIGhhc2gpOwog
        ICAgICBkZWxldGUgaGFzaC5pZDsKICAgICAgZGVsZXRlIGhhc2gudGFnOwog
        ICAgICBkZWxldGUgaGFzaFsnY2xhc3MnXTsKICAgICAgZGVsZXRlIGhhc2gu
        Y2xhc3NCaW5kaW5nOwogICAgfQoKICAgIC8vIFNldCB0aGUgcHJvcGVyIGNv
        bnRleHQgZm9yIGFsbCBiaW5kaW5ncyBwYXNzZWQgdG8gdGhlIGhlbHBlci4g
        VGhpcyBhcHBsaWVzIHRvIHJlZ3VsYXIgYXR0cmlidXRlIGJpbmRpbmdzCiAg
        ICAvLyBhcyB3ZWxsIGFzIGNsYXNzIG5hbWUgYmluZGluZ3MuIElmIHRoZSBi
        aW5kaW5ncyBhcmUgbG9jYWwsIG1ha2UgdGhlbSByZWxhdGl2ZSB0byB0aGUg
        Y3VycmVudCBjb250ZXh0CiAgICAvLyBpbnN0ZWFkIG9mIHRoZSB2aWV3Lgog
        ICAgdmFyIHBhdGg7CgogICAgLy8gRXZhbHVhdGUgdGhlIGNvbnRleHQgb2Yg
        cmVndWxhciBhdHRyaWJ1dGUgYmluZGluZ3M6CiAgICBmb3IgKHZhciBwcm9w
        IGluIGhhc2gpIHsKICAgICAgaWYgKCFoYXNoLmhhc093blByb3BlcnR5KHBy
        b3ApKSB7IGNvbnRpbnVlOyB9CgogICAgICAvLyBUZXN0IGlmIHRoZSBwcm9w
        ZXJ0eSBlbmRzIGluICJCaW5kaW5nIgogICAgICBpZiAoRW1iZXIuSVNfQklO
        RElORy50ZXN0KHByb3ApICYmIHR5cGVvZiBoYXNoW3Byb3BdID09PSAnc3Ry
        aW5nJykgewogICAgICAgIHBhdGggPSB0aGlzLmNvbnRleHR1YWxpemVCaW5k
        aW5nUGF0aChoYXNoW3Byb3BdLCBkYXRhKTsKICAgICAgICBpZiAocGF0aCkg
        eyBoYXNoW3Byb3BdID0gcGF0aDsgfQogICAgICB9CiAgICB9CgogICAgLy8g
        RXZhbHVhdGUgdGhlIGNvbnRleHQgb2YgY2xhc3MgbmFtZSBiaW5kaW5nczoK
        ICAgIGlmIChleHRlbnNpb25zLmNsYXNzTmFtZUJpbmRpbmdzKSB7CiAgICAg
        IGZvciAodmFyIGIgaW4gZXh0ZW5zaW9ucy5jbGFzc05hbWVCaW5kaW5ncykg
        ewogICAgICAgIHZhciBmdWxsID0gZXh0ZW5zaW9ucy5jbGFzc05hbWVCaW5k
        aW5nc1tiXTsKICAgICAgICBpZiAodHlwZW9mIGZ1bGwgPT09ICdzdHJpbmcn
        KSB7CiAgICAgICAgICAvLyBDb250ZXh0dWFsaXplIHRoZSBwYXRoIG9mIGNs
        YXNzTmFtZUJpbmRpbmcgc28gdGhpczoKICAgICAgICAgIC8vCiAgICAgICAg
        ICAvLyAgICAgY2xhc3NOYW1lQmluZGluZz0iaXNHcmVlbjpncmVlbiIKICAg
        ICAgICAgIC8vCiAgICAgICAgICAvLyBpcyBjb252ZXJ0ZWQgdG8gdGhpczoK
        ICAgICAgICAgIC8vCiAgICAgICAgICAvLyAgICAgY2xhc3NOYW1lQmluZGlu
        Zz0iX3BhcmVudFZpZXcuY29udGV4dC5pc0dyZWVuOmdyZWVuIgogICAgICAg
        ICAgdmFyIHBhcnNlZFBhdGggPSBFbWJlci5WaWV3Ll9wYXJzZVByb3BlcnR5
        UGF0aChmdWxsKTsKICAgICAgICAgIHBhdGggPSB0aGlzLmNvbnRleHR1YWxp
        emVCaW5kaW5nUGF0aChwYXJzZWRQYXRoLnBhdGgsIGRhdGEpOwogICAgICAg
        ICAgaWYgKHBhdGgpIHsgZXh0ZW5zaW9ucy5jbGFzc05hbWVCaW5kaW5nc1ti
        XSA9IHBhdGggKyBwYXJzZWRQYXRoLmNsYXNzTmFtZXM7IH0KICAgICAgICB9
        CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gRW1iZXIuJC5leHRlbmQoaGFz
        aCwgZXh0ZW5zaW9ucyk7CiAgfSwKCiAgLy8gVHJhbnNmb3JtIGJpbmRpbmdz
        IGZyb20gdGhlIGN1cnJlbnQgY29udGV4dCB0byBhIGNvbnRleHQgdGhhdCBj
        YW4gYmUgZXZhbHVhdGVkIHdpdGhpbiB0aGUgdmlldy4KICAvLyBSZXR1cm5z
        IG51bGwgaWYgdGhlIHBhdGggc2hvdWxkbid0IGJlIGNoYW5nZWQuCiAgLy8K
        ICAvLyBUT0RPOiBjb25zaWRlciB0aGUgYWRkaXRpb24gb2YgYSBwcmVmaXgg
        dGhhdCB3b3VsZCBhbGxvdyB0aGlzIG1ldGhvZCB0byByZXR1cm4gYHBhdGhg
        LgogIGNvbnRleHR1YWxpemVCaW5kaW5nUGF0aDogZnVuY3Rpb24ocGF0aCwg
        ZGF0YSkgewogICAgdmFyIG5vcm1hbGl6ZWQgPSBFbWJlci5IYW5kbGViYXJz
        Lm5vcm1hbGl6ZVBhdGgobnVsbCwgcGF0aCwgZGF0YSk7CiAgICBpZiAobm9y
        bWFsaXplZC5pc0tleXdvcmQpIHsKICAgICAgcmV0dXJuICd0ZW1wbGF0ZURh
        dGEua2V5d29yZHMuJyArIHBhdGg7CiAgICB9IGVsc2UgaWYgKEVtYmVyLmlz
        R2xvYmFsUGF0aChwYXRoKSkgewogICAgICByZXR1cm4gbnVsbDsKICAgIH0g
        ZWxzZSBpZiAocGF0aCA9PT0gJ3RoaXMnKSB7CiAgICAgIHJldHVybiAnX3Bh
        cmVudFZpZXcuY29udGV4dCc7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4g
        J19wYXJlbnRWaWV3LmNvbnRleHQuJyArIHBhdGg7CiAgICB9CiAgfSwKCiAg
        aGVscGVyOiBmdW5jdGlvbih0aGlzQ29udGV4dCwgcGF0aCwgb3B0aW9ucykg
        ewogICAgdmFyIGRhdGEgPSBvcHRpb25zLmRhdGEsCiAgICAgICAgZm4gPSBv
        cHRpb25zLmZuLAogICAgICAgIG5ld1ZpZXc7CgogICAgbWFrZUJpbmRpbmdz
        KHRoaXNDb250ZXh0LCBvcHRpb25zKTsKCiAgICBpZiAoJ3N0cmluZycgPT09
        IHR5cGVvZiBwYXRoKSB7CgogICAgICAvLyBUT0RPOiB0aGlzIGlzIGEgbGFt
        ZSBjb25kaXRpb25hbCwgdGhpcyBzaG91bGQgbGlrZWx5IGNoYW5nZQogICAg
        ICAvLyBidXQgc29tZXRoaW5nIGFsb25nIHRoZXNlIGxpbmVzIHdpbGwgbGlr
        ZWx5IG5lZWQgdG8gYmUgYWRkZWQKICAgICAgLy8gYXMgZGVwcmVjYXRpb24g
        d2FybmluZ3MKICAgICAgLy8KICAgICAgaWYgKG9wdGlvbnMudHlwZXNbMF0g
        PT09ICdTVFJJTkcnICYmIExPV0VSQ0FTRV9BX1oudGVzdChwYXRoKSAmJiAh
        VklFV19QUkVGSVgudGVzdChwYXRoKSkgewogICAgICAgIEVtYmVyLmFzc2Vy
        dCgiVmlldyByZXF1aXJlcyBhIGNvbnRhaW5lciIsICEhZGF0YS52aWV3LmNv
        bnRhaW5lcik7CiAgICAgICAgbmV3VmlldyA9IGRhdGEudmlldy5jb250YWlu
        ZXIubG9va3VwRmFjdG9yeSgndmlldzonICsgcGF0aCk7CiAgICAgIH0gZWxz
        ZSB7CiAgICAgICAgbmV3VmlldyA9IEVtYmVySGFuZGxlYmFycy5nZXQodGhp
        c0NvbnRleHQsIHBhdGgsIG9wdGlvbnMpOwogICAgICB9CgogICAgICBFbWJl
        ci5hc3NlcnQoIlVuYWJsZSB0byBmaW5kIHZpZXcgYXQgcGF0aCAnIiArIHBh
        dGggKyAiJyIsICEhbmV3Vmlldyk7CiAgICB9IGVsc2UgewogICAgICBuZXdW
        aWV3ID0gcGF0aDsKICAgIH0KCiAgICBFbWJlci5hc3NlcnQoRW1iZXIuU3Ry
        aW5nLmZtdCgnWW91IG11c3QgcGFzcyBhIHZpZXcgdG8gdGhlICN2aWV3IGhl
        bHBlciwgbm90ICVAICglQCknLCBbcGF0aCwgbmV3Vmlld10pLCBFbWJlci5W
        aWV3LmRldGVjdChuZXdWaWV3KSB8fCBFbWJlci5WaWV3LmRldGVjdEluc3Rh
        bmNlKG5ld1ZpZXcpKTsKCiAgICB2YXIgdmlld09wdGlvbnMgPSB0aGlzLnBy
        b3BlcnRpZXNGcm9tSFRNTE9wdGlvbnMob3B0aW9ucywgdGhpc0NvbnRleHQp
        OwogICAgdmFyIGN1cnJlbnRWaWV3ID0gZGF0YS52aWV3OwogICAgdmlld09w
        dGlvbnMudGVtcGxhdGVEYXRhID0gZGF0YTsKICAgIHZhciBuZXdWaWV3UHJv
        dG8gPSBuZXdWaWV3LnByb3RvID8gbmV3Vmlldy5wcm90bygpIDogbmV3Vmll
        dzsKCiAgICBpZiAoZm4pIHsKICAgICAgRW1iZXIuYXNzZXJ0KCJZb3UgY2Fu
        bm90IHByb3ZpZGUgYSB0ZW1wbGF0ZSBibG9jayBpZiB5b3UgYWxzbyBzcGVj
        aWZpZWQgYSB0ZW1wbGF0ZU5hbWUiLCAhZ2V0KHZpZXdPcHRpb25zLCAndGVt
        cGxhdGVOYW1lJykgJiYgIWdldChuZXdWaWV3UHJvdG8sICd0ZW1wbGF0ZU5h
        bWUnKSk7CiAgICAgIHZpZXdPcHRpb25zLnRlbXBsYXRlID0gZm47CiAgICB9
        CgogICAgLy8gV2Ugb25seSB3YW50IHRvIG92ZXJyaWRlIHRoZSBgX2NvbnRl
        eHRgIGNvbXB1dGVkIHByb3BlcnR5IGlmIHRoZXJlIGlzCiAgICAvLyBubyBz
        cGVjaWZpZWQgY29udHJvbGxlci4gU2VlIFZpZXcjX2NvbnRleHQgZm9yIG1v
        cmUgaW5mb3JtYXRpb24uCiAgICBpZiAoIW5ld1ZpZXdQcm90by5jb250cm9s
        bGVyICYmICFuZXdWaWV3UHJvdG8uY29udHJvbGxlckJpbmRpbmcgJiYgIXZp
        ZXdPcHRpb25zLmNvbnRyb2xsZXIgJiYgIXZpZXdPcHRpb25zLmNvbnRyb2xs
        ZXJCaW5kaW5nKSB7CiAgICAgIHZpZXdPcHRpb25zLl9jb250ZXh0ID0gdGhp
        c0NvbnRleHQ7CiAgICB9CgogICAgY3VycmVudFZpZXcuYXBwZW5kQ2hpbGQo
        bmV3Vmlldywgdmlld09wdGlvbnMpOwogIH0KfSk7CgovKioKICBge3t2aWV3
        fX1gIGluc2VydHMgYSBuZXcgaW5zdGFuY2Ugb2YgYEVtYmVyLlZpZXdgIGlu
        dG8gYSB0ZW1wbGF0ZSBwYXNzaW5nIGl0cwogIG9wdGlvbnMgdG8gdGhlIGBF
        bWJlci5WaWV3YCdzIGBjcmVhdGVgIG1ldGhvZCBhbmQgdXNpbmcgdGhlIHN1
        cHBsaWVkIGJsb2NrIGFzCiAgdGhlIHZpZXcncyBvd24gdGVtcGxhdGUuCgog
        IEFuIGVtcHR5IGA8Ym9keT5gIGFuZCB0aGUgZm9sbG93aW5nIHRlbXBsYXRl
        OgoKICBgYGBoYW5kbGViYXJzCiAgQSBzcGFuOgogIHt7I3ZpZXcgdGFnTmFt
        ZT0ic3BhbiJ9fQogICAgaGVsbG8uCiAge3svdmlld319CiAgYGBgCgogIFdp
        bGwgcmVzdWx0IGluIEhUTUwgc3RydWN0dXJlOgoKICBgYGBodG1sCiAgPGJv
        ZHk+CiAgICA8IS0tIE5vdGU6IHRoZSBoYW5kbGViYXJzIHRlbXBsYXRlIHNj
        cmlwdAogICAgICAgICBhbHNvIHJlc3VsdHMgaW4gYSByZW5kZXJlZCBFbWJl
        ci5WaWV3CiAgICAgICAgIHdoaWNoIGlzIHRoZSBvdXRlciA8ZGl2PiBoZXJl
        IC0tPgoKICAgIDxkaXYgY2xhc3M9ImVtYmVyLXZpZXciPgogICAgICBBIHNw
        YW46CiAgICAgIDxzcGFuIGlkPSJlbWJlcjEiIGNsYXNzPSJlbWJlci12aWV3
        Ij4KICAgICAgICBIZWxsby4KICAgICAgPC9zcGFuPgogICAgPC9kaXY+CiAg
        PC9ib2R5PgogIGBgYAoKICAjIyMgYHBhcmVudFZpZXdgIHNldHRpbmcKCiAg
        VGhlIGBwYXJlbnRWaWV3YCBwcm9wZXJ0eSBvZiB0aGUgbmV3IGBFbWJlci5W
        aWV3YCBpbnN0YW5jZSBjcmVhdGVkIHRocm91Z2gKICBge3t2aWV3fX1gIHdp
        bGwgYmUgc2V0IHRvIHRoZSBgRW1iZXIuVmlld2AgaW5zdGFuY2Ugb2YgdGhl
        IHRlbXBsYXRlIHdoZXJlCiAgYHt7dmlld319YCB3YXMgY2FsbGVkLgoKICBg
        YGBqYXZhc2NyaXB0CiAgYVZpZXcgPSBFbWJlci5WaWV3LmNyZWF0ZSh7CiAg
        ICB0ZW1wbGF0ZTogRW1iZXIuSGFuZGxlYmFycy5jb21waWxlKCJ7eyN2aWV3
        fX0gbXkgcGFyZW50OiB7e3BhcmVudFZpZXcuZWxlbWVudElkfX0ge3svdmll
        d319IikKICB9KTsKCiAgYVZpZXcuYXBwZW5kVG8oJ2JvZHknKTsKICBgYGAK
        CiAgV2lsbCByZXN1bHQgaW4gSFRNTCBzdHJ1Y3R1cmU6CgogIGBgYGh0bWwK
        ICA8ZGl2IGlkPSJlbWJlcjEiIGNsYXNzPSJlbWJlci12aWV3Ij4KICAgIDxk
        aXYgaWQ9ImVtYmVyMiIgY2xhc3M9ImVtYmVyLXZpZXciPgogICAgICBteSBw
        YXJlbnQ6IGVtYmVyMQogICAgPC9kaXY+CiAgPC9kaXY+CiAgYGBgCgogICMj
        IyBTZXR0aW5nIENTUyBpZCBhbmQgY2xhc3MgYXR0cmlidXRlcwoKICBUaGUg
        SFRNTCBgaWRgIGF0dHJpYnV0ZSBjYW4gYmUgc2V0IG9uIHRoZSBge3t2aWV3
        fX1gJ3MgcmVzdWx0aW5nIGVsZW1lbnQgd2l0aAogIHRoZSBgaWRgIG9wdGlv
        bi4gVGhpcyBvcHRpb24gd2lsbCBfbm90XyBiZSBwYXNzZWQgdG8gYEVtYmVy
        LlZpZXcuY3JlYXRlYC4KCiAgYGBgaGFuZGxlYmFycwogIHt7I3ZpZXcgdGFn
        TmFtZT0ic3BhbiIgaWQ9ImEtY3VzdG9tLWlkIn19CiAgICBoZWxsby4KICB7
        ey92aWV3fX0KICBgYGAKCiAgUmVzdWx0cyBpbiB0aGUgZm9sbG93aW5nIEhU
        TUwgc3RydWN0dXJlOgoKICBgYGBodG1sCiAgPGRpdiBjbGFzcz0iZW1iZXIt
        dmlldyI+CiAgICA8c3BhbiBpZD0iYS1jdXN0b20taWQiIGNsYXNzPSJlbWJl
        ci12aWV3Ij4KICAgICAgaGVsbG8uCiAgICA8L3NwYW4+CiAgPC9kaXY+CiAg
        YGBgCgogIFRoZSBIVE1MIGBjbGFzc2AgYXR0cmlidXRlIGNhbiBiZSBzZXQg
        b24gdGhlIGB7e3ZpZXd9fWAncyByZXN1bHRpbmcgZWxlbWVudAogIHdpdGgg
        dGhlIGBjbGFzc2Agb3IgYGNsYXNzTmFtZUJpbmRpbmdzYCBvcHRpb25zLiBU
        aGUgYGNsYXNzYCBvcHRpb24gd2lsbAogIGRpcmVjdGx5IHNldCB0aGUgQ1NT
        IGBjbGFzc2AgYXR0cmlidXRlIGFuZCB3aWxsIG5vdCBiZSBwYXNzZWQgdG8K
        ICBgRW1iZXIuVmlldy5jcmVhdGVgLiBgY2xhc3NOYW1lQmluZGluZ3NgIHdp
        bGwgYmUgcGFzc2VkIHRvIGBjcmVhdGVgIGFuZCB1c2UKICBgRW1iZXIuVmll
        d2AncyBjbGFzcyBuYW1lIGJpbmRpbmcgZnVuY3Rpb25hbGl0eToKCiAgYGBg
        aGFuZGxlYmFycwogIHt7I3ZpZXcgdGFnTmFtZT0ic3BhbiIgY2xhc3M9ImEt
        Y3VzdG9tLWNsYXNzIn19CiAgICBoZWxsby4KICB7ey92aWV3fX0KICBgYGAK
        CiAgUmVzdWx0cyBpbiB0aGUgZm9sbG93aW5nIEhUTUwgc3RydWN0dXJlOgoK
        ICBgYGBodG1sCiAgPGRpdiBjbGFzcz0iZW1iZXItdmlldyI+CiAgICA8c3Bh
        biBpZD0iZW1iZXIyIiBjbGFzcz0iZW1iZXItdmlldyBhLWN1c3RvbS1jbGFz
        cyI+CiAgICAgIGhlbGxvLgogICAgPC9zcGFuPgogIDwvZGl2PgogIGBgYAoK
        ICAjIyMgU3VwcGx5aW5nIGEgZGlmZmVyZW50IHZpZXcgY2xhc3MKCiAgYHt7
        dmlld319YCBjYW4gdGFrZSBhbiBvcHRpb25hbCBmaXJzdCBhcmd1bWVudCBi
        ZWZvcmUgaXRzIHN1cHBsaWVkIG9wdGlvbnMgdG8KICBzcGVjaWZ5IGEgcGF0
        aCB0byBhIGN1c3RvbSB2aWV3IGNsYXNzLgoKICBgYGBoYW5kbGViYXJzCiAg
        e3sjdmlldyAiTXlBcHAuQ3VzdG9tVmlldyJ9fQogICAgaGVsbG8uCiAge3sv
        dmlld319CiAgYGBgCgogIFRoZSBmaXJzdCBhcmd1bWVudCBjYW4gYWxzbyBi
        ZSBhIHJlbGF0aXZlIHBhdGggYWNjZXNzaWJsZSBmcm9tIHRoZSBjdXJyZW50
        CiAgY29udGV4dC4KCiAgYGBgamF2YXNjcmlwdAogIE15QXBwID0gRW1iZXIu
        QXBwbGljYXRpb24uY3JlYXRlKHt9KTsKICBNeUFwcC5PdXRlclZpZXcgPSBF
        bWJlci5WaWV3LmV4dGVuZCh7CiAgICBpbm5lclZpZXdDbGFzczogRW1iZXIu
        Vmlldy5leHRlbmQoewogICAgICBjbGFzc05hbWVzOiBbJ2EtY3VzdG9tLXZp
        ZXctY2xhc3MtYXMtcHJvcGVydHknXQogICAgfSksCiAgICB0ZW1wbGF0ZTog
        RW1iZXIuSGFuZGxlYmFycy5jb21waWxlKCd7eyN2aWV3ICJ2aWV3LmlubmVy
        Vmlld0NsYXNzIn19IGhpIHt7L3ZpZXd9fScpCiAgfSk7CgogIE15QXBwLk91
        dGVyVmlldy5jcmVhdGUoKS5hcHBlbmRUbygnYm9keScpOwogIGBgYAoKICBX
        aWxsIHJlc3VsdCBpbiB0aGUgZm9sbG93aW5nIEhUTUw6CgogIGBgYGh0bWwK
        ICA8ZGl2IGlkPSJlbWJlcjEiIGNsYXNzPSJlbWJlci12aWV3Ij4KICAgIDxk
        aXYgaWQ9ImVtYmVyMiIgY2xhc3M9ImVtYmVyLXZpZXcgYS1jdXN0b20tdmll
        dy1jbGFzcy1hcy1wcm9wZXJ0eSI+CiAgICAgIGhpCiAgICA8L2Rpdj4KICA8
        L2Rpdj4KICBgYGAKCiAgIyMjIEJsb2NrbGVzcyB1c2UKCiAgSWYgeW91IHN1
        cHBseSBhIGN1c3RvbSBgRW1iZXIuVmlld2Agc3ViY2xhc3MgdGhhdCBzcGVj
        aWZpZXMgaXRzIG93biB0ZW1wbGF0ZQogIG9yIHByb3ZpZGUgYSBgdGVtcGxh
        dGVOYW1lYCBvcHRpb24gdG8gYHt7dmlld319YCBpdCBjYW4gYmUgdXNlZCB3
        aXRob3V0CiAgc3VwcGx5aW5nIGEgYmxvY2suIEF0dGVtcHRzIHRvIHVzZSBi
        b3RoIGEgYHRlbXBsYXRlTmFtZWAgb3B0aW9uIGFuZCBzdXBwbHkgYQogIGJs
        b2NrIHdpbGwgdGhyb3cgYW4gZXJyb3IuCgogIGBgYGhhbmRsZWJhcnMKICB7
        e3ZpZXcgIk15QXBwLlZpZXdXaXRoQVRlbXBsYXRlRGVmaW5lZCJ9fQogIGBg
        YAoKICAjIyMgYHZpZXdOYW1lYCBwcm9wZXJ0eQoKICBZb3UgY2FuIHN1cHBs
        eSBhIGB2aWV3TmFtZWAgb3B0aW9uIHRvIGB7e3ZpZXd9fWAuIFRoZSBgRW1i
        ZXIuVmlld2AgaW5zdGFuY2UKICB3aWxsIGJlIHJlZmVyZW5jZWQgYXMgYSBw
        cm9wZXJ0eSBvZiBpdHMgcGFyZW50IHZpZXcgYnkgdGhpcyBuYW1lLgoKICBg
        YGBqYXZhc2NyaXB0CiAgYVZpZXcgPSBFbWJlci5WaWV3LmNyZWF0ZSh7CiAg
        ICB0ZW1wbGF0ZTogRW1iZXIuSGFuZGxlYmFycy5jb21waWxlKCd7eyN2aWV3
        IHZpZXdOYW1lPSJhQ2hpbGRCeU5hbWUifX0gaGkge3svdmlld319JykKICB9
        KTsKCiAgYVZpZXcuYXBwZW5kVG8oJ2JvZHknKTsKICBhVmlldy5nZXQoJ2FD
        aGlsZEJ5TmFtZScpIC8vIHRoZSBpbnN0YW5jZSBvZiBFbWJlci5WaWV3IGNy
        ZWF0ZWQgYnkge3t2aWV3fX0gaGVscGVyCiAgYGBgCgogIEBtZXRob2Qgdmll
        dwogIEBmb3IgRW1iZXIuSGFuZGxlYmFycy5oZWxwZXJzCiAgQHBhcmFtIHtT
        dHJpbmd9IHBhdGgKICBAcGFyYW0ge0hhc2h9IG9wdGlvbnMKICBAcmV0dXJu
        IHtTdHJpbmd9IEhUTUwgc3RyaW5nCiovCkVtYmVySGFuZGxlYmFycy5yZWdp
        c3RlckhlbHBlcigndmlldycsIGZ1bmN0aW9uKHBhdGgsIG9wdGlvbnMpIHsK
        ICBFbWJlci5hc3NlcnQoIlRoZSB2aWV3IGhlbHBlciBvbmx5IHRha2VzIGEg
        c2luZ2xlIGFyZ3VtZW50IiwgYXJndW1lbnRzLmxlbmd0aCA8PSAyKTsKCiAg
        Ly8gSWYgbm8gcGF0aCBpcyBwcm92aWRlZCwgdHJlYXQgcGF0aCBwYXJhbSBh
        cyBvcHRpb25zLgogIGlmIChwYXRoICYmIHBhdGguZGF0YSAmJiBwYXRoLmRh
        dGEuaXNSZW5kZXJEYXRhKSB7CiAgICBvcHRpb25zID0gcGF0aDsKICAgIHBh
        dGggPSAiRW1iZXIuVmlldyI7CiAgfQoKICByZXR1cm4gRW1iZXJIYW5kbGVi
        YXJzLlZpZXdIZWxwZXIuaGVscGVyKHRoaXMsIHBhdGgsIG9wdGlvbnMpOwp9
        KTsKCgp9KSgpOwoKCgooZnVuY3Rpb24oKSB7Ci8qZ2xvYmFscyBIYW5kbGVi
        YXJzICovCgovLyBUT0RPOiBEb24ndCByZXF1aXJlIGFsbCBvZiB0aGlzIG1v
        ZHVsZQovKioKQG1vZHVsZSBlbWJlcgpAc3VibW9kdWxlIGVtYmVyLWhhbmRs
        ZWJhcnMKKi8KCnZhciBnZXQgPSBFbWJlci5nZXQsIGhhbmRsZWJhcnNHZXQg
        PSBFbWJlci5IYW5kbGViYXJzLmdldCwgZm10ID0gRW1iZXIuU3RyaW5nLmZt
        dDsKCi8qKgogIGB7e2NvbGxlY3Rpb259fWAgaXMgYSBgRW1iZXIuSGFuZGxl
        YmFyc2AgaGVscGVyIGZvciBhZGRpbmcgaW5zdGFuY2VzIG9mCiAgYEVtYmVy
        LkNvbGxlY3Rpb25WaWV3YCB0byBhIHRlbXBsYXRlLiBTZWUgW0VtYmVyLkNv
        bGxlY3Rpb25WaWV3XSgvYXBpL2NsYXNzZXMvRW1iZXIuQ29sbGVjdGlvblZp
        ZXcuaHRtbCkKICAgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb24gb24gaG93
        IGEgYENvbGxlY3Rpb25WaWV3YCBmdW5jdGlvbnMuCgogIGB7e2NvbGxlY3Rp
        b259fWAncyBwcmltYXJ5IHVzZSBpcyBhcyBhIGJsb2NrIGhlbHBlciB3aXRo
        IGEgYGNvbnRlbnRCaW5kaW5nYAogIG9wdGlvbiBwb2ludGluZyB0b3dhcmRz
        IGFuIGBFbWJlci5BcnJheWAtY29tcGF0aWJsZSBvYmplY3QuIEFuIGBFbWJl
        ci5WaWV3YAogIGluc3RhbmNlIHdpbGwgYmUgY3JlYXRlZCBmb3IgZWFjaCBp
        dGVtIGluIGl0cyBgY29udGVudGAgcHJvcGVydHkuIEVhY2ggdmlldwogIHdp
        bGwgaGF2ZSBpdHMgb3duIGBjb250ZW50YCBwcm9wZXJ0eSBzZXQgdG8gdGhl
        IGFwcHJvcHJpYXRlIGl0ZW0gaW4gdGhlCiAgY29sbGVjdGlvbi4KCiAgVGhl
        IHByb3ZpZGVkIGJsb2NrIHdpbGwgYmUgYXBwbGllZCBhcyB0aGUgdGVtcGxh
        dGUgZm9yIGVhY2ggaXRlbSdzIHZpZXcuCgogIEdpdmVuIGFuIGVtcHR5IGA8
        Ym9keT5gIHRoZSBmb2xsb3dpbmcgdGVtcGxhdGU6CgogIGBgYGhhbmRsZWJh
        cnMKICB7eyNjb2xsZWN0aW9uIGNvbnRlbnRCaW5kaW5nPSJBcHAuaXRlbXMi
        fX0KICAgIEhpIHt7dmlldy5jb250ZW50Lm5hbWV9fQogIHt7L2NvbGxlY3Rp
        b259fQogIGBgYAoKICBBbmQgdGhlIGZvbGxvd2luZyBhcHBsaWNhdGlvbiBj
        b2RlCgogIGBgYGphdmFzY3JpcHQKICBBcHAgPSBFbWJlci5BcHBsaWNhdGlv
        bi5jcmVhdGUoKQogIEFwcC5pdGVtcyA9IFsKICAgIEVtYmVyLk9iamVjdC5j
        cmVhdGUoe25hbWU6ICdEYXZlJ30pLAogICAgRW1iZXIuT2JqZWN0LmNyZWF0
        ZSh7bmFtZTogJ01hcnknfSksCiAgICBFbWJlci5PYmplY3QuY3JlYXRlKHtu
        YW1lOiAnU2FyYSd9KQogIF0KICBgYGAKCiAgV2lsbCByZXN1bHQgaW4gdGhl
        IEhUTUwgc3RydWN0dXJlIGJlbG93CgogIGBgYGh0bWwKICA8ZGl2IGNsYXNz
        PSJlbWJlci12aWV3Ij4KICAgIDxkaXYgY2xhc3M9ImVtYmVyLXZpZXciPkhp
        IERhdmU8L2Rpdj4KICAgIDxkaXYgY2xhc3M9ImVtYmVyLXZpZXciPkhpIE1h
        cnk8L2Rpdj4KICAgIDxkaXYgY2xhc3M9ImVtYmVyLXZpZXciPkhpIFNhcmE8
        L2Rpdj4KICA8L2Rpdj4KICBgYGAKCiAgIyMjIEJsb2NrbGVzcyBVc2UKCiAg
        SWYgeW91IHByb3ZpZGUgYW4gYGl0ZW1WaWV3Q2xhc3NgIG9wdGlvbiB0aGF0
        IGhhcyBpdHMgb3duIGB0ZW1wbGF0ZWAgeW91IGNhbgogIG9taXQgdGhlIGJs
        b2NrLgoKICBUaGUgZm9sbG93aW5nIHRlbXBsYXRlOgoKICBgYGBoYW5kbGVi
        YXJzCiAge3tjb2xsZWN0aW9uIGNvbnRlbnRCaW5kaW5nPSJBcHAuaXRlbXMi
        IGl0ZW1WaWV3Q2xhc3M9IkFwcC5Bbkl0ZW1WaWV3In19CiAgYGBgCgogIEFu
        ZCBhcHBsaWNhdGlvbiBjb2RlCgogIGBgYGphdmFzY3JpcHQKICBBcHAgPSBF
        bWJlci5BcHBsaWNhdGlvbi5jcmVhdGUoKTsKICBBcHAuaXRlbXMgPSBbCiAg
        ICBFbWJlci5PYmplY3QuY3JlYXRlKHtuYW1lOiAnRGF2ZSd9KSwKICAgIEVt
        YmVyLk9iamVjdC5jcmVhdGUoe25hbWU6ICdNYXJ5J30pLAogICAgRW1iZXIu
        T2JqZWN0LmNyZWF0ZSh7bmFtZTogJ1NhcmEnfSkKICBdOwoKICBBcHAuQW5J
        dGVtVmlldyA9IEVtYmVyLlZpZXcuZXh0ZW5kKHsKICAgIHRlbXBsYXRlOiBF
        bWJlci5IYW5kbGViYXJzLmNvbXBpbGUoIkdyZWV0aW5ncyB7e3ZpZXcuY29u
        dGVudC5uYW1lfX0iKQogIH0pOwogIGBgYAoKICBXaWxsIHJlc3VsdCBpbiB0
        aGUgSFRNTCBzdHJ1Y3R1cmUgYmVsb3cKCiAgYGBgaHRtbAogIDxkaXYgY2xh
        c3M9ImVtYmVyLXZpZXciPgogICAgPGRpdiBjbGFzcz0iZW1iZXItdmlldyI+
        R3JlZXRpbmdzIERhdmU8L2Rpdj4KICAgIDxkaXYgY2xhc3M9ImVtYmVyLXZp
        ZXciPkdyZWV0aW5ncyBNYXJ5PC9kaXY+CiAgICA8ZGl2IGNsYXNzPSJlbWJl
        ci12aWV3Ij5HcmVldGluZ3MgU2FyYTwvZGl2PgogIDwvZGl2PgogIGBgYAoK
        ICAjIyMgU3BlY2lmeWluZyBhIENvbGxlY3Rpb25WaWV3IHN1YmNsYXNzCgog
        IEJ5IGRlZmF1bHQgdGhlIGB7e2NvbGxlY3Rpb259fWAgaGVscGVyIHdpbGwg
        Y3JlYXRlIGFuIGluc3RhbmNlIG9mCiAgYEVtYmVyLkNvbGxlY3Rpb25WaWV3
        YC4gWW91IGNhbiBzdXBwbHkgYSBgRW1iZXIuQ29sbGVjdGlvblZpZXdgIHN1
        YmNsYXNzIHRvCiAgdGhlIGhlbHBlciBieSBwYXNzaW5nIGl0IGFzIHRoZSBm
        aXJzdCBhcmd1bWVudDoKCiAgYGBgaGFuZGxlYmFycwogIHt7I2NvbGxlY3Rp
        b24gQXBwLk15Q3VzdG9tQ29sbGVjdGlvbkNsYXNzIGNvbnRlbnRCaW5kaW5n
        PSJBcHAuaXRlbXMifX0KICAgIEhpIHt7dmlldy5jb250ZW50Lm5hbWV9fQog
        IHt7L2NvbGxlY3Rpb259fQogIGBgYAoKICAjIyMgRm9yd2FyZGVkIGBpdGVt
        LipgLW5hbWVkIE9wdGlvbnMKCiAgQXMgd2l0aCB0aGUgYHt7dmlld319YCwg
        aGVscGVyIG9wdGlvbnMgcGFzc2VkIHRvIHRoZSBge3tjb2xsZWN0aW9ufX1g
        IHdpbGwgYmUKICBzZXQgb24gdGhlIHJlc3VsdGluZyBgRW1iZXIuQ29sbGVj
        dGlvblZpZXdgIGFzIHByb3BlcnRpZXMuIEFkZGl0aW9uYWxseSwKICBvcHRp
        b25zIHByZWZpeGVkIHdpdGggYGl0ZW1gIHdpbGwgYmUgYXBwbGllZCB0byB0
        aGUgdmlld3MgcmVuZGVyZWQgZm9yIGVhY2gKICBpdGVtIChub3RlIHRoZSBj
        YW1lbGNhc2luZyk6CgogIGBgYGhhbmRsZWJhcnMKICB7eyNjb2xsZWN0aW9u
        IGNvbnRlbnRCaW5kaW5nPSJBcHAuaXRlbXMiCiAgICAgICAgICAgICAgICBp
        dGVtVGFnTmFtZT0icCIKICAgICAgICAgICAgICAgIGl0ZW1DbGFzc05hbWVz
        PSJncmVldGluZyJ9fQogICAgSG93ZHkge3t2aWV3LmNvbnRlbnQubmFtZX19
        CiAge3svY29sbGVjdGlvbn19CiAgYGBgCgogIFdpbGwgcmVzdWx0IGluIHRo
        ZSBmb2xsb3dpbmcgSFRNTCBzdHJ1Y3R1cmU6CgogIGBgYGh0bWwKICA8ZGl2
        IGNsYXNzPSJlbWJlci12aWV3Ij4KICAgIDxwIGNsYXNzPSJlbWJlci12aWV3
        IGdyZWV0aW5nIj5Ib3dkeSBEYXZlPC9wPgogICAgPHAgY2xhc3M9ImVtYmVy
        LXZpZXcgZ3JlZXRpbmciPkhvd2R5IE1hcnk8L3A+CiAgICA8cCBjbGFzcz0i
        ZW1iZXItdmlldyBncmVldGluZyI+SG93ZHkgU2FyYTwvcD4KICA8L2Rpdj4K
        ICBgYGAKCiAgQG1ldGhvZCBjb2xsZWN0aW9uCiAgQGZvciBFbWJlci5IYW5k
        bGViYXJzLmhlbHBlcnMKICBAcGFyYW0ge1N0cmluZ30gcGF0aAogIEBwYXJh
        bSB7SGFzaH0gb3B0aW9ucwogIEByZXR1cm4ge1N0cmluZ30gSFRNTCBzdHJp
        bmcKICBAZGVwcmVjYXRlZCBVc2UgYHt7ZWFjaH19YCBoZWxwZXIgaW5zdGVh
        ZC4KKi8KRW1iZXIuSGFuZGxlYmFycy5yZWdpc3RlckhlbHBlcignY29sbGVj
        dGlvbicsIGZ1bmN0aW9uKHBhdGgsIG9wdGlvbnMpIHsKICBFbWJlci5kZXBy
        ZWNhdGUoIlVzaW5nIHRoZSB7e2NvbGxlY3Rpb259fSBoZWxwZXIgd2l0aG91
        dCBzcGVjaWZ5aW5nIGEgY2xhc3MgaGFzIGJlZW4gZGVwcmVjYXRlZCBhcyB0
        aGUge3tlYWNofX0gaGVscGVyIG5vdyBzdXBwb3J0cyB0aGUgc2FtZSBmdW5j
        dGlvbmFsaXR5LiIsIHBhdGggIT09ICdjb2xsZWN0aW9uJyk7CgogIC8vIElm
        IG5vIHBhdGggaXMgcHJvdmlkZWQsIHRyZWF0IHBhdGggcGFyYW0gYXMgb3B0
        aW9ucy4KICBpZiAocGF0aCAmJiBwYXRoLmRhdGEgJiYgcGF0aC5kYXRhLmlz
        UmVuZGVyRGF0YSkgewogICAgb3B0aW9ucyA9IHBhdGg7CiAgICBwYXRoID0g
        dW5kZWZpbmVkOwogICAgRW1iZXIuYXNzZXJ0KCJZb3UgY2Fubm90IHBhc3Mg
        bW9yZSB0aGFuIG9uZSBhcmd1bWVudCB0byB0aGUgY29sbGVjdGlvbiBoZWxw
        ZXIiLCBhcmd1bWVudHMubGVuZ3RoID09PSAxKTsKICB9IGVsc2UgewogICAg
        RW1iZXIuYXNzZXJ0KCJZb3UgY2Fubm90IHBhc3MgbW9yZSB0aGFuIG9uZSBh
        cmd1bWVudCB0byB0aGUgY29sbGVjdGlvbiBoZWxwZXIiLCBhcmd1bWVudHMu
        bGVuZ3RoID09PSAyKTsKICB9CgogIHZhciBmbiA9IG9wdGlvbnMuZm47CiAg
        dmFyIGRhdGEgPSBvcHRpb25zLmRhdGE7CiAgdmFyIGludmVyc2UgPSBvcHRp
        b25zLmludmVyc2U7CiAgdmFyIHZpZXcgPSBvcHRpb25zLmRhdGEudmlldzsK
        CiAgLy8gSWYgcGFzc2VkIGEgcGF0aCBzdHJpbmcsIGNvbnZlcnQgdGhhdCBp
        bnRvIGFuIG9iamVjdC4KICAvLyBPdGhlcndpc2UsIGp1c3QgZGVmYXVsdCB0
        byB0aGUgc3RhbmRhcmQgY2xhc3MuCiAgdmFyIGNvbGxlY3Rpb25DbGFzczsK
        ICBjb2xsZWN0aW9uQ2xhc3MgPSBwYXRoID8gaGFuZGxlYmFyc0dldCh0aGlz
        LCBwYXRoLCBvcHRpb25zKSA6IEVtYmVyLkNvbGxlY3Rpb25WaWV3OwogIEVt
        YmVyLmFzc2VydChmbXQoIiVAICNjb2xsZWN0aW9uOiBDb3VsZCBub3QgZmlu
        ZCBjb2xsZWN0aW9uIGNsYXNzICVAIiwgW2RhdGEudmlldywgcGF0aF0pLCAh
        IWNvbGxlY3Rpb25DbGFzcyk7CgogIHZhciBoYXNoID0gb3B0aW9ucy5oYXNo
        LCBpdGVtSGFzaCA9IHt9LCBtYXRjaDsKCiAgLy8gRXh0cmFjdCBpdGVtIHZp
        ZXcgY2xhc3MgaWYgcHJvdmlkZWQgZWxzZSBkZWZhdWx0IHRvIHRoZSBzdGFu
        ZGFyZCBjbGFzcwogIHZhciBjb2xsZWN0aW9uUHJvdG90eXBlID0gY29sbGVj
        dGlvbkNsYXNzLnByb3RvKCksCiAgICAgIGl0ZW1WaWV3Q2xhc3M7CgogIGlm
        IChoYXNoLml0ZW1WaWV3KSB7CiAgICB2YXIgY29udHJvbGxlciA9IGRhdGEu
        a2V5d29yZHMuY29udHJvbGxlcjsKICAgIEVtYmVyLmFzc2VydCgnWW91IHNw
        ZWNpZmllZCBhbiBpdGVtVmlldywgYnV0IHRoZSBjdXJyZW50IGNvbnRleHQg
        aGFzIG5vIGNvbnRhaW5lciB0byBsb29rIHRoZSBpdGVtVmlldyB1cCBpbi4g
        VGhpcyBwcm9iYWJseSBtZWFucyB0aGF0IHlvdSBjcmVhdGVkIGEgdmlldyBt
        YW51YWxseSwgaW5zdGVhZCBvZiB0aHJvdWdoIHRoZSBjb250YWluZXIuIElu
        c3RlYWQsIHVzZSBjb250YWluZXIubG9va3VwKCJ2aWV3OnZpZXdOYW1lIiks
        IHdoaWNoIHdpbGwgcHJvcGVybHkgaW5zdGFudGlhdGUgeW91ciB2aWV3Lics
        IGNvbnRyb2xsZXIgJiYgY29udHJvbGxlci5jb250YWluZXIpOwogICAgdmFy
        IGNvbnRhaW5lciA9IGNvbnRyb2xsZXIuY29udGFpbmVyOwogICAgaXRlbVZp
        ZXdDbGFzcyA9IGNvbnRhaW5lci5yZXNvbHZlKCd2aWV3OicgKyBoYXNoLml0
        ZW1WaWV3KTsKICAgIEVtYmVyLmFzc2VydCgnWW91IHNwZWNpZmllZCB0aGUg
        aXRlbVZpZXcgJyArIGhhc2guaXRlbVZpZXcgKyAiLCBidXQgaXQgd2FzIG5v
        dCBmb3VuZCBhdCAiICsgY29udGFpbmVyLmRlc2NyaWJlKCJ2aWV3OiIgKyBo
        YXNoLml0ZW1WaWV3KSArICIgKGFuZCBpdCB3YXMgbm90IHJlZ2lzdGVyZWQg
        aW4gdGhlIGNvbnRhaW5lcikiLCAhIWl0ZW1WaWV3Q2xhc3MpOwogIH0gZWxz
        ZSBpZiAoaGFzaC5pdGVtVmlld0NsYXNzKSB7CiAgICBpdGVtVmlld0NsYXNz
        ID0gaGFuZGxlYmFyc0dldChjb2xsZWN0aW9uUHJvdG90eXBlLCBoYXNoLml0
        ZW1WaWV3Q2xhc3MsIG9wdGlvbnMpOwogIH0gZWxzZSB7CiAgICBpdGVtVmll
        d0NsYXNzID0gY29sbGVjdGlvblByb3RvdHlwZS5pdGVtVmlld0NsYXNzOwog
        IH0KCiAgRW1iZXIuYXNzZXJ0KGZtdCgiJUAgI2NvbGxlY3Rpb246IENvdWxk
        IG5vdCBmaW5kIGl0ZW1WaWV3Q2xhc3MgJUAiLCBbZGF0YS52aWV3LCBpdGVt
        Vmlld0NsYXNzXSksICEhaXRlbVZpZXdDbGFzcyk7CgogIGRlbGV0ZSBoYXNo
        Lml0ZW1WaWV3Q2xhc3M7CiAgZGVsZXRlIGhhc2guaXRlbVZpZXc7CgogIC8v
        IEdvIHRocm91Z2ggb3B0aW9ucyBwYXNzZWQgdG8gdGhlIHt7Y29sbGVjdGlv
        bn19IGhlbHBlciBhbmQgZXh0cmFjdCBvcHRpb25zCiAgLy8gdGhhdCBjb25m
        aWd1cmUgaXRlbSB2aWV3cyBpbnN0ZWFkIG9mIHRoZSBjb2xsZWN0aW9uIGl0
        c2VsZi4KICBmb3IgKHZhciBwcm9wIGluIGhhc2gpIHsKICAgIGlmIChoYXNo
        Lmhhc093blByb3BlcnR5KHByb3ApKSB7CiAgICAgIG1hdGNoID0gcHJvcC5t
        YXRjaCgvXml0ZW0oLikoLiopJC8pOwoKICAgICAgaWYgKG1hdGNoICYmIHBy
        b3AgIT09ICdpdGVtQ29udHJvbGxlcicpIHsKICAgICAgICAvLyBDb252ZXJ0
        IGl0ZW1TaG91bGRGb28gLT4gc2hvdWxkRm9vCiAgICAgICAgaXRlbUhhc2hb
        bWF0Y2hbMV0udG9Mb3dlckNhc2UoKSArIG1hdGNoWzJdXSA9IGhhc2hbcHJv
        cF07CiAgICAgICAgLy8gRGVsZXRlIGZyb20gaGFzaCBhcyB0aGlzIHdpbGwg
        ZW5kIHVwIGdldHRpbmcgcGFzc2VkIHRvIHRoZQogICAgICAgIC8vIHt7dmll
        d319IGhlbHBlciBtZXRob2QuCiAgICAgICAgZGVsZXRlIGhhc2hbcHJvcF07
        CiAgICAgIH0KICAgIH0KICB9CgogIGlmIChmbikgewogICAgaXRlbUhhc2gu
        dGVtcGxhdGUgPSBmbjsKICAgIGRlbGV0ZSBvcHRpb25zLmZuOwogIH0KCiAg
        dmFyIGVtcHR5Vmlld0NsYXNzOwogIGlmIChpbnZlcnNlICYmIGludmVyc2Ug
        IT09IEhhbmRsZWJhcnMuVk0ubm9vcCkgewogICAgZW1wdHlWaWV3Q2xhc3Mg
        PSBnZXQoY29sbGVjdGlvblByb3RvdHlwZSwgJ2VtcHR5Vmlld0NsYXNzJyk7
        CiAgICBlbXB0eVZpZXdDbGFzcyA9IGVtcHR5Vmlld0NsYXNzLmV4dGVuZCh7
        CiAgICAgICAgICB0ZW1wbGF0ZTogaW52ZXJzZSwKICAgICAgICAgIHRhZ05h
        bWU6IGl0ZW1IYXNoLnRhZ05hbWUKICAgIH0pOwogIH0gZWxzZSBpZiAoaGFz
        aC5lbXB0eVZpZXdDbGFzcykgewogICAgZW1wdHlWaWV3Q2xhc3MgPSBoYW5k
        bGViYXJzR2V0KHRoaXMsIGhhc2guZW1wdHlWaWV3Q2xhc3MsIG9wdGlvbnMp
        OwogIH0KICBpZiAoZW1wdHlWaWV3Q2xhc3MpIHsgaGFzaC5lbXB0eVZpZXcg
        PSBlbXB0eVZpZXdDbGFzczsgfQoKICBpZiAoIWhhc2gua2V5d29yZCkgewog
        ICAgaXRlbUhhc2guX2NvbnRleHQgPSBFbWJlci5jb21wdXRlZC5hbGlhcygn
        Y29udGVudCcpOwogIH0KCiAgdmFyIHZpZXdPcHRpb25zID0gRW1iZXIuSGFu
        ZGxlYmFycy5WaWV3SGVscGVyLnByb3BlcnRpZXNGcm9tSFRNTE9wdGlvbnMo
        eyBkYXRhOiBkYXRhLCBoYXNoOiBpdGVtSGFzaCB9LCB0aGlzKTsKICBoYXNo
        Lml0ZW1WaWV3Q2xhc3MgPSBpdGVtVmlld0NsYXNzLmV4dGVuZCh2aWV3T3B0
        aW9ucyk7CgogIHJldHVybiBFbWJlci5IYW5kbGViYXJzLmhlbHBlcnMudmll
        dy5jYWxsKHRoaXMsIGNvbGxlY3Rpb25DbGFzcywgb3B0aW9ucyk7Cn0pOwoK
        Cn0pKCk7CgoKCihmdW5jdGlvbigpIHsKLypnbG9iYWxzIEhhbmRsZWJhcnMg
        Ki8KLyoqCkBtb2R1bGUgZW1iZXIKQHN1Ym1vZHVsZSBlbWJlci1oYW5kbGVi
        YXJzCiovCgp2YXIgaGFuZGxlYmFyc0dldCA9IEVtYmVyLkhhbmRsZWJhcnMu
        Z2V0OwoKLyoqCiAgYHVuYm91bmRgIGFsbG93cyB5b3UgdG8gb3V0cHV0IGEg
        cHJvcGVydHkgd2l0aG91dCBiaW5kaW5nLiAqSW1wb3J0YW50OiogVGhlCiAg
        b3V0cHV0IHdpbGwgbm90IGJlIHVwZGF0ZWQgaWYgdGhlIHByb3BlcnR5IGNo
        YW5nZXMuIFVzZSB3aXRoIGNhdXRpb24uCgogIGBgYGhhbmRsZWJhcnMKICA8
        ZGl2Pnt7dW5ib3VuZCBzb21lUHJvcGVydHlUaGF0RG9lc250Q2hhbmdlfX08
        L2Rpdj4KICBgYGAKCiAgYHVuYm91bmRgIGNhbiBhbHNvIGJlIHVzZWQgaW4g
        Y29uanVuY3Rpb24gd2l0aCBhIGJvdW5kIGhlbHBlciB0bwogIHJlbmRlciBp
        dCBpbiBpdHMgdW5ib3VuZCBmb3JtOgoKICBgYGBoYW5kbGViYXJzCiAgPGRp
        dj57e3VuYm91bmQgaGVscGVyTmFtZSBzb21lUHJvcGVydHlUaGF0RG9lc250
        Q2hhbmdlfX08L2Rpdj4KICBgYGAKCiAgQG1ldGhvZCB1bmJvdW5kCiAgQGZv
        ciBFbWJlci5IYW5kbGViYXJzLmhlbHBlcnMKICBAcGFyYW0ge1N0cmluZ30g
        cHJvcGVydHkKICBAcmV0dXJuIHtTdHJpbmd9IEhUTUwgc3RyaW5nCiovCkVt
        YmVyLkhhbmRsZWJhcnMucmVnaXN0ZXJIZWxwZXIoJ3VuYm91bmQnLCBmdW5j
        dGlvbihwcm9wZXJ0eSwgZm4pIHsKICB2YXIgb3B0aW9ucyA9IGFyZ3VtZW50
        c1thcmd1bWVudHMubGVuZ3RoIC0gMV0sIGhlbHBlciwgY29udGV4dCwgb3V0
        OwoKICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDIpIHsKICAgIC8vIFVuYm91
        bmQgaGVscGVyIGNhbGwuCiAgICBvcHRpb25zLmRhdGEuaXNVbmJvdW5kID0g
        dHJ1ZTsKICAgIGhlbHBlciA9IEVtYmVyLkhhbmRsZWJhcnMuaGVscGVyc1th
        cmd1bWVudHNbMF1dIHx8IEVtYmVyLkhhbmRsZWJhcnMuaGVscGVyTWlzc2lu
        ZzsKICAgIG91dCA9IGhlbHBlci5hcHBseSh0aGlzLCBBcnJheS5wcm90b3R5
        cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpKTsKICAgIGRlbGV0ZSBvcHRp
        b25zLmRhdGEuaXNVbmJvdW5kOwogICAgcmV0dXJuIG91dDsKICB9CgogIGNv
        bnRleHQgPSAoZm4uY29udGV4dHMgJiYgZm4uY29udGV4dHMubGVuZ3RoKSA/
        IGZuLmNvbnRleHRzWzBdIDogdGhpczsKICByZXR1cm4gaGFuZGxlYmFyc0dl
        dChjb250ZXh0LCBwcm9wZXJ0eSwgZm4pOwp9KTsKCn0pKCk7CgoKCihmdW5j
        dGlvbigpIHsKLypqc2hpbnQgZGVidWc6dHJ1ZSovCi8qKgpAbW9kdWxlIGVt
        YmVyCkBzdWJtb2R1bGUgZW1iZXItaGFuZGxlYmFycwoqLwoKdmFyIGhhbmRs
        ZWJhcnNHZXQgPSBFbWJlci5IYW5kbGViYXJzLmdldCwgbm9ybWFsaXplUGF0
        aCA9IEVtYmVyLkhhbmRsZWJhcnMubm9ybWFsaXplUGF0aDsKCi8qKgogIGBs
        b2dgIGFsbG93cyB5b3UgdG8gb3V0cHV0IHRoZSB2YWx1ZSBvZiBhIHZhcmlh
        YmxlIGluIHRoZSBjdXJyZW50IHJlbmRlcmluZwogIGNvbnRleHQuCgogIGBg
        YGhhbmRsZWJhcnMKICB7e2xvZyBteVZhcmlhYmxlfX0KICBgYGAKCiAgQG1l
        dGhvZCBsb2cKICBAZm9yIEVtYmVyLkhhbmRsZWJhcnMuaGVscGVycwogIEBw
        YXJhbSB7U3RyaW5nfSBwcm9wZXJ0eQoqLwpFbWJlci5IYW5kbGViYXJzLnJl
        Z2lzdGVySGVscGVyKCdsb2cnLCBmdW5jdGlvbihwcm9wZXJ0eSwgb3B0aW9u
        cykgewogIHZhciBjb250ZXh0ID0gKG9wdGlvbnMuY29udGV4dHMgJiYgb3B0
        aW9ucy5jb250ZXh0cy5sZW5ndGgpID8gb3B0aW9ucy5jb250ZXh0c1swXSA6
        IHRoaXMsCiAgICAgIG5vcm1hbGl6ZWQgPSBub3JtYWxpemVQYXRoKGNvbnRl
        eHQsIHByb3BlcnR5LCBvcHRpb25zLmRhdGEpLAogICAgICBwYXRoUm9vdCA9
        IG5vcm1hbGl6ZWQucm9vdCwKICAgICAgcGF0aCA9IG5vcm1hbGl6ZWQucGF0
        aCwKICAgICAgdmFsdWUgPSAocGF0aCA9PT0gJ3RoaXMnKSA/IHBhdGhSb290
        IDogaGFuZGxlYmFyc0dldChwYXRoUm9vdCwgcGF0aCwgb3B0aW9ucyk7CiAg
        RW1iZXIuTG9nZ2VyLmxvZyh2YWx1ZSk7Cn0pOwoKLyoqCiAgRXhlY3V0ZSB0
        aGUgYGRlYnVnZ2VyYCBzdGF0ZW1lbnQgaW4gdGhlIGN1cnJlbnQgY29udGV4
        dC4KCiAgYGBgaGFuZGxlYmFycwogIHt7ZGVidWdnZXJ9fQogIGBgYAoKICBA
        bWV0aG9kIGRlYnVnZ2VyCiAgQGZvciBFbWJlci5IYW5kbGViYXJzLmhlbHBl
        cnMKICBAcGFyYW0ge1N0cmluZ30gcHJvcGVydHkKKi8KRW1iZXIuSGFuZGxl
        YmFycy5yZWdpc3RlckhlbHBlcignZGVidWdnZXInLCBmdW5jdGlvbihvcHRp
        b25zKSB7CiAgZGVidWdnZXI7Cn0pOwoKfSkoKTsKCgoKKGZ1bmN0aW9uKCkg
        ewovKioKQG1vZHVsZSBlbWJlcgpAc3VibW9kdWxlIGVtYmVyLWhhbmRsZWJh
        cnMKKi8KCnZhciBnZXQgPSBFbWJlci5nZXQsIHNldCA9IEVtYmVyLnNldDsK
        CkVtYmVyLkhhbmRsZWJhcnMuRWFjaFZpZXcgPSBFbWJlci5Db2xsZWN0aW9u
        Vmlldy5leHRlbmQoRW1iZXIuX01ldGFtb3JwaCwgewogIGluaXQ6IGZ1bmN0
        aW9uKCkgewogICAgdmFyIGl0ZW1Db250cm9sbGVyID0gZ2V0KHRoaXMsICdp
        dGVtQ29udHJvbGxlcicpOwogICAgdmFyIGJpbmRpbmc7CgogICAgaWYgKGl0
        ZW1Db250cm9sbGVyKSB7CiAgICAgIHZhciBjb250cm9sbGVyID0gZ2V0KHRo
        aXMsICdjb250cm9sbGVyLmNvbnRhaW5lcicpLmxvb2t1cEZhY3RvcnkoJ2Nv
        bnRyb2xsZXI6YXJyYXknKS5jcmVhdGUoewogICAgICAgIHBhcmVudENvbnRy
        b2xsZXI6IGdldCh0aGlzLCAnY29udHJvbGxlcicpLAogICAgICAgIGl0ZW1D
        b250cm9sbGVyOiBpdGVtQ29udHJvbGxlciwKICAgICAgICB0YXJnZXQ6IGdl
        dCh0aGlzLCAnY29udHJvbGxlcicpLAogICAgICAgIF9lYWNoVmlldzogdGhp
        cwogICAgICB9KTsKCiAgICAgIHRoaXMuZGlzYWJsZUNvbnRlbnRPYnNlcnZl
        cnMoZnVuY3Rpb24oKSB7CiAgICAgICAgc2V0KHRoaXMsICdjb250ZW50Jywg
        Y29udHJvbGxlcik7CiAgICAgICAgYmluZGluZyA9IG5ldyBFbWJlci5CaW5k
        aW5nKCdjb250ZW50JywgJ19lYWNoVmlldy5kYXRhU291cmNlJykub25lV2F5
        KCk7CiAgICAgICAgYmluZGluZy5jb25uZWN0KGNvbnRyb2xsZXIpOwogICAg
        ICB9KTsKCiAgICAgIHNldCh0aGlzLCAnX2FycmF5Q29udHJvbGxlcicsIGNv
        bnRyb2xsZXIpOwogICAgfSBlbHNlIHsKICAgICAgdGhpcy5kaXNhYmxlQ29u
        dGVudE9ic2VydmVycyhmdW5jdGlvbigpIHsKICAgICAgICBiaW5kaW5nID0g
        bmV3IEVtYmVyLkJpbmRpbmcoJ2NvbnRlbnQnLCAnZGF0YVNvdXJjZScpLm9u
        ZVdheSgpOwogICAgICAgIGJpbmRpbmcuY29ubmVjdCh0aGlzKTsKICAgICAg
        fSk7CiAgICB9CgogICAgcmV0dXJuIHRoaXMuX3N1cGVyKCk7CiAgfSwKCiAg
        X2Fzc2VydEFycmF5TGlrZTogZnVuY3Rpb24oY29udGVudCkgewogICAgRW1i
        ZXIuYXNzZXJ0KCJUaGUgdmFsdWUgdGhhdCAjZWFjaCBsb29wcyBvdmVyIG11
        c3QgYmUgYW4gQXJyYXkuIFlvdSBwYXNzZWQgIiArIGNvbnRlbnQuY29uc3Ry
        dWN0b3IgKyAiLCBidXQgaXQgc2hvdWxkIGhhdmUgYmVlbiBhbiBBcnJheUNv
        bnRyb2xsZXIiLCAhRW1iZXIuQ29udHJvbGxlck1peGluLmRldGVjdChjb250
        ZW50KSB8fCAoY29udGVudCAmJiBjb250ZW50LmlzR2VuZXJhdGVkKSB8fCBj
        b250ZW50IGluc3RhbmNlb2YgRW1iZXIuQXJyYXlDb250cm9sbGVyKTsKICAg
        IEVtYmVyLmFzc2VydCgiVGhlIHZhbHVlIHRoYXQgI2VhY2ggbG9vcHMgb3Zl
        ciBtdXN0IGJlIGFuIEFycmF5LiBZb3UgcGFzc2VkICIgKyAoKEVtYmVyLkNv
        bnRyb2xsZXJNaXhpbi5kZXRlY3QoY29udGVudCkgJiYgY29udGVudC5nZXQo
        J21vZGVsJykgIT09IHVuZGVmaW5lZCkgPyAoIiIgKyBjb250ZW50LmdldCgn
        bW9kZWwnKSArICIgKHdyYXBwZWQgaW4gIiArIGNvbnRlbnQgKyAiKSIpIDog
        KCIiICsgY29udGVudCkpLCBFbWJlci5BcnJheS5kZXRlY3QoY29udGVudCkp
        OwogIH0sCgogIGRpc2FibGVDb250ZW50T2JzZXJ2ZXJzOiBmdW5jdGlvbihj
        YWxsYmFjaykgewogICAgRW1iZXIucmVtb3ZlQmVmb3JlT2JzZXJ2ZXIodGhp
        cywgJ2NvbnRlbnQnLCBudWxsLCAnX2NvbnRlbnRXaWxsQ2hhbmdlJyk7CiAg
        ICBFbWJlci5yZW1vdmVPYnNlcnZlcih0aGlzLCAnY29udGVudCcsIG51bGws
        ICdfY29udGVudERpZENoYW5nZScpOwoKICAgIGNhbGxiYWNrLmNhbGwodGhp
        cyk7CgogICAgRW1iZXIuYWRkQmVmb3JlT2JzZXJ2ZXIodGhpcywgJ2NvbnRl
        bnQnLCBudWxsLCAnX2NvbnRlbnRXaWxsQ2hhbmdlJyk7CiAgICBFbWJlci5h
        ZGRPYnNlcnZlcih0aGlzLCAnY29udGVudCcsIG51bGwsICdfY29udGVudERp
        ZENoYW5nZScpOwogIH0sCgogIGl0ZW1WaWV3Q2xhc3M6IEVtYmVyLl9NZXRh
        bW9ycGhWaWV3LAogIGVtcHR5Vmlld0NsYXNzOiBFbWJlci5fTWV0YW1vcnBo
        VmlldywKCiAgY3JlYXRlQ2hpbGRWaWV3OiBmdW5jdGlvbih2aWV3LCBhdHRy
        cykgewogICAgdmlldyA9IHRoaXMuX3N1cGVyKHZpZXcsIGF0dHJzKTsKCiAg
        ICAvLyBBdCB0aGUgbW9tZW50LCBpZiBhIGNvbnRhaW5lciB2aWV3IHN1YmNs
        YXNzIHdhbnRzCiAgICAvLyB0byBpbnNlcnQga2V5d29yZHMsIGl0IGlzIHJl
        c3BvbnNpYmxlIGZvciBjbG9uaW5nCiAgICAvLyB0aGUga2V5d29yZHMgaGFz
        aC4gVGhpcyB3aWxsIGJlIGZpeGVkIG1vbWVudGFyaWx5LgogICAgdmFyIGtl
        eXdvcmQgPSBnZXQodGhpcywgJ2tleXdvcmQnKTsKICAgIHZhciBjb250ZW50
        ID0gZ2V0KHZpZXcsICdjb250ZW50Jyk7CgogICAgaWYgKGtleXdvcmQpIHsK
        ICAgICAgdmFyIGRhdGEgPSBnZXQodmlldywgJ3RlbXBsYXRlRGF0YScpOwoK
        ICAgICAgZGF0YSA9IEVtYmVyLmNvcHkoZGF0YSk7CiAgICAgIGRhdGEua2V5
        d29yZHMgPSB2aWV3LmNsb25lS2V5d29yZHMoKTsKICAgICAgc2V0KHZpZXcs
        ICd0ZW1wbGF0ZURhdGEnLCBkYXRhKTsKCiAgICAgIC8vIEluIHRoaXMgY2Fz
        ZSwgd2UgZG8gbm90IGJpbmQsIGJlY2F1c2UgdGhlIGBjb250ZW50YCBvZgog
        ICAgICAvLyBhICNlYWNoIGl0ZW0gY2Fubm90IGNoYW5nZS4KICAgICAgZGF0
        YS5rZXl3b3Jkc1trZXl3b3JkXSA9IGNvbnRlbnQ7CiAgICB9CgogICAgLy8g
        SWYge3sjZWFjaH19IGlzIGxvb3Bpbmcgb3ZlciBhbiBhcnJheSBvZiBjb250
        cm9sbGVycywKICAgIC8vIHBvaW50IGVhY2ggY2hpbGQgdmlldyBhdCB0aGVp
        ciByZXNwZWN0aXZlIGNvbnRyb2xsZXIuCiAgICBpZiAoY29udGVudCAmJiBn
        ZXQoY29udGVudCwgJ2lzQ29udHJvbGxlcicpKSB7CiAgICAgIHNldCh2aWV3
        LCAnY29udHJvbGxlcicsIGNvbnRlbnQpOwogICAgfQoKICAgIHJldHVybiB2
        aWV3OwogIH0sCgogIGRlc3Ryb3k6IGZ1bmN0aW9uKCkgewogICAgaWYgKCF0
        aGlzLl9zdXBlcigpKSB7IHJldHVybjsgfQoKICAgIHZhciBhcnJheUNvbnRy
        b2xsZXIgPSBnZXQodGhpcywgJ19hcnJheUNvbnRyb2xsZXInKTsKCiAgICBp
        ZiAoYXJyYXlDb250cm9sbGVyKSB7CiAgICAgIGFycmF5Q29udHJvbGxlci5k
        ZXN0cm95KCk7CiAgICB9CgogICAgcmV0dXJuIHRoaXM7CiAgfQp9KTsKCnZh
        ciBHcm91cGVkRWFjaCA9IEVtYmVyLkhhbmRsZWJhcnMuR3JvdXBlZEVhY2gg
        PSBmdW5jdGlvbihjb250ZXh0LCBwYXRoLCBvcHRpb25zKSB7CiAgdmFyIHNl
        bGYgPSB0aGlzLAogICAgICBub3JtYWxpemVkID0gRW1iZXIuSGFuZGxlYmFy
        cy5ub3JtYWxpemVQYXRoKGNvbnRleHQsIHBhdGgsIG9wdGlvbnMuZGF0YSk7
        CgogIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7CiAgdGhpcy5wYXRoID0gcGF0
        aDsKICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zOwogIHRoaXMudGVtcGxhdGUg
        PSBvcHRpb25zLmZuOwogIHRoaXMuY29udGFpbmluZ1ZpZXcgPSBvcHRpb25z
        LmRhdGEudmlldzsKICB0aGlzLm5vcm1hbGl6ZWRSb290ID0gbm9ybWFsaXpl
        ZC5yb290OwogIHRoaXMubm9ybWFsaXplZFBhdGggPSBub3JtYWxpemVkLnBh
        dGg7CiAgdGhpcy5jb250ZW50ID0gdGhpcy5sb29rdXBDb250ZW50KCk7Cgog
        IHRoaXMuYWRkQ29udGVudE9ic2VydmVycygpOwogIHRoaXMuYWRkQXJyYXlP
        YnNlcnZlcnMoKTsKCiAgdGhpcy5jb250YWluaW5nVmlldy5vbignd2lsbENs
        ZWFyUmVuZGVyJywgZnVuY3Rpb24oKSB7CiAgICBzZWxmLmRlc3Ryb3koKTsK
        ICB9KTsKfTsKCkdyb3VwZWRFYWNoLnByb3RvdHlwZSA9IHsKICBjb250ZW50
        V2lsbENoYW5nZTogZnVuY3Rpb24oKSB7CiAgICB0aGlzLnJlbW92ZUFycmF5
        T2JzZXJ2ZXJzKCk7CiAgfSwKCiAgY29udGVudERpZENoYW5nZTogZnVuY3Rp
        b24oKSB7CiAgICB0aGlzLmNvbnRlbnQgPSB0aGlzLmxvb2t1cENvbnRlbnQo
        KTsKICAgIHRoaXMuYWRkQXJyYXlPYnNlcnZlcnMoKTsKICAgIHRoaXMucmVy
        ZW5kZXJDb250YWluaW5nVmlldygpOwogIH0sCgogIGNvbnRlbnRBcnJheVdp
        bGxDaGFuZ2U6IEVtYmVyLkssCgogIGNvbnRlbnRBcnJheURpZENoYW5nZTog
        ZnVuY3Rpb24oKSB7CiAgICB0aGlzLnJlcmVuZGVyQ29udGFpbmluZ1ZpZXco
        KTsKICB9LAoKICBsb29rdXBDb250ZW50OiBmdW5jdGlvbigpIHsKICAgIHJl
        dHVybiBFbWJlci5IYW5kbGViYXJzLmdldCh0aGlzLm5vcm1hbGl6ZWRSb290
        LCB0aGlzLm5vcm1hbGl6ZWRQYXRoLCB0aGlzLm9wdGlvbnMpOwogIH0sCgog
        IGFkZEFycmF5T2JzZXJ2ZXJzOiBmdW5jdGlvbigpIHsKICAgIGlmICghdGhp
        cy5jb250ZW50KSB7IHJldHVybjsgfQoKICAgIHRoaXMuY29udGVudC5hZGRB
        cnJheU9ic2VydmVyKHRoaXMsIHsKICAgICAgd2lsbENoYW5nZTogJ2NvbnRl
        bnRBcnJheVdpbGxDaGFuZ2UnLAogICAgICBkaWRDaGFuZ2U6ICdjb250ZW50
        QXJyYXlEaWRDaGFuZ2UnCiAgICB9KTsKICB9LAoKICByZW1vdmVBcnJheU9i
        c2VydmVyczogZnVuY3Rpb24oKSB7CiAgICBpZiAoIXRoaXMuY29udGVudCkg
        eyByZXR1cm47IH0KCiAgICB0aGlzLmNvbnRlbnQucmVtb3ZlQXJyYXlPYnNl
        cnZlcih0aGlzLCB7CiAgICAgIHdpbGxDaGFuZ2U6ICdjb250ZW50QXJyYXlX
        aWxsQ2hhbmdlJywKICAgICAgZGlkQ2hhbmdlOiAnY29udGVudEFycmF5RGlk
        Q2hhbmdlJwogICAgfSk7CiAgfSwKCiAgYWRkQ29udGVudE9ic2VydmVyczog
        ZnVuY3Rpb24oKSB7CiAgICBFbWJlci5hZGRCZWZvcmVPYnNlcnZlcih0aGlz
        Lm5vcm1hbGl6ZWRSb290LCB0aGlzLm5vcm1hbGl6ZWRQYXRoLCB0aGlzLCB0
        aGlzLmNvbnRlbnRXaWxsQ2hhbmdlKTsKICAgIEVtYmVyLmFkZE9ic2VydmVy
        KHRoaXMubm9ybWFsaXplZFJvb3QsIHRoaXMubm9ybWFsaXplZFBhdGgsIHRo
        aXMsIHRoaXMuY29udGVudERpZENoYW5nZSk7CiAgfSwKCiAgcmVtb3ZlQ29u
        dGVudE9ic2VydmVyczogZnVuY3Rpb24oKSB7CiAgICBFbWJlci5yZW1vdmVC
        ZWZvcmVPYnNlcnZlcih0aGlzLm5vcm1hbGl6ZWRSb290LCB0aGlzLm5vcm1h
        bGl6ZWRQYXRoLCB0aGlzLmNvbnRlbnRXaWxsQ2hhbmdlKTsKICAgIEVtYmVy
        LnJlbW92ZU9ic2VydmVyKHRoaXMubm9ybWFsaXplZFJvb3QsIHRoaXMubm9y
        bWFsaXplZFBhdGgsIHRoaXMuY29udGVudERpZENoYW5nZSk7CiAgfSwKCiAg
        cmVuZGVyOiBmdW5jdGlvbigpIHsKICAgIGlmICghdGhpcy5jb250ZW50KSB7
        IHJldHVybjsgfQoKICAgIHZhciBjb250ZW50ID0gdGhpcy5jb250ZW50LAog
        ICAgICAgIGNvbnRlbnRMZW5ndGggPSBnZXQoY29udGVudCwgJ2xlbmd0aCcp
        LAogICAgICAgIGRhdGEgPSB0aGlzLm9wdGlvbnMuZGF0YSwKICAgICAgICB0
        ZW1wbGF0ZSA9IHRoaXMudGVtcGxhdGU7CgogICAgZGF0YS5pbnNpZGVFYWNo
        ID0gdHJ1ZTsKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY29udGVudExlbmd0
        aDsgaSsrKSB7CiAgICAgIHRlbXBsYXRlKGNvbnRlbnQub2JqZWN0QXQoaSks
        IHsgZGF0YTogZGF0YSB9KTsKICAgIH0KICB9LAoKICByZXJlbmRlckNvbnRh
        aW5pbmdWaWV3OiBmdW5jdGlvbigpIHsKICAgIHZhciBzZWxmID0gdGhpczsK
        ICAgIEVtYmVyLnJ1bi5zY2hlZHVsZU9uY2UoJ3JlbmRlcicsIHRoaXMsIGZ1
        bmN0aW9uKCkgewogICAgICAvLyBJdCdzIHBvc3NpYmxlIGl0J3MgYmVlbiBk
        ZXN0cm95ZWQgYWZ0ZXIgd2UgZW5xdWV1ZWQgYSByZS1yZW5kZXIgY2FsbC4K
        ICAgICAgaWYgKCFzZWxmLmRlc3Ryb3llZCkgewogICAgICAgIHNlbGYuY29u
        dGFpbmluZ1ZpZXcucmVyZW5kZXIoKTsKICAgICAgfQogICAgfSk7CiAgfSwK
        CiAgZGVzdHJveTogZnVuY3Rpb24oKSB7CiAgICB0aGlzLnJlbW92ZUNvbnRl
        bnRPYnNlcnZlcnMoKTsKICAgIGlmICh0aGlzLmNvbnRlbnQpIHsKICAgICAg
        dGhpcy5yZW1vdmVBcnJheU9ic2VydmVycygpOwogICAgfQogICAgdGhpcy5k
        ZXN0cm95ZWQgPSB0cnVlOwogIH0KfTsKCi8qKgogIFRoZSBge3sjZWFjaH19
        YCBoZWxwZXIgbG9vcHMgb3ZlciBlbGVtZW50cyBpbiBhIGNvbGxlY3Rpb24s
        IHJlbmRlcmluZyBpdHMKICBibG9jayBvbmNlIGZvciBlYWNoIGl0ZW0uIEl0
        IGlzIGFuIGV4dGVuc2lvbiBvZiB0aGUgYmFzZSBIYW5kbGViYXJzIGB7eyNl
        YWNofX1gCiAgaGVscGVyOgoKICBgYGBqYXZhc2NyaXB0CiAgRGV2ZWxvcGVy
        cyA9IFt7bmFtZTogJ1llaHVkYSd9LHtuYW1lOiAnVG9tJ30sIHtuYW1lOiAn
        UGF1bCd9XTsKICBgYGAKCiAgYGBgaGFuZGxlYmFycwogIHt7I2VhY2ggRGV2
        ZWxvcGVyc319CiAgICB7e25hbWV9fQogIHt7L2VhY2h9fQogIGBgYAoKICBg
        e3tlYWNofX1gIHN1cHBvcnRzIGFuIGFsdGVybmF0aXZlIHN5bnRheCB3aXRo
        IGVsZW1lbnQgbmFtaW5nOgoKICBgYGBoYW5kbGViYXJzCiAge3sjZWFjaCBw
        ZXJzb24gaW4gRGV2ZWxvcGVyc319CiAgICB7e3BlcnNvbi5uYW1lfX0KICB7
        ey9lYWNofX0KICBgYGAKCiAgV2hlbiBsb29waW5nIG92ZXIgb2JqZWN0cyB0
        aGF0IGRvIG5vdCBoYXZlIHByb3BlcnRpZXMsIGB7e3RoaXN9fWAgY2FuIGJl
        IHVzZWQKICB0byByZW5kZXIgdGhlIG9iamVjdDoKCiAgYGBgamF2YXNjcmlw
        dAogIERldmVsb3Blck5hbWVzID0gWydZZWh1ZGEnLCAnVG9tJywgJ1BhdWwn
        XQogIGBgYAoKICBgYGBoYW5kbGViYXJzCiAge3sjZWFjaCBEZXZlbG9wZXJO
        YW1lc319CiAgICB7e3RoaXN9fQogIHt7L2VhY2h9fQogIGBgYAogICMjIyB7
        e2Vsc2V9fSBjb25kaXRpb24KICBge3sjZWFjaH19YCBjYW4gaGF2ZSBhIG1h
        dGNoaW5nIGB7e2Vsc2V9fWAuIFRoZSBjb250ZW50cyBvZiB0aGlzIGJsb2Nr
        IHdpbGwgcmVuZGVyCiAgaWYgdGhlIGNvbGxlY3Rpb24gaXMgZW1wdHkuCgog
        IGBgYAogIHt7I2VhY2ggcGVyc29uIGluIERldmVsb3BlcnN9fQogICAge3tw
        ZXJzb24ubmFtZX19CiAge3tlbHNlfX0KICAgIDxwPlNvcnJ5LCBub2JvZHkg
        aXMgYXZhaWxhYmxlIGZvciB0aGlzIHRhc2suPC9wPgogIHt7L2VhY2h9fQog
        IGBgYAogICMjIyBTcGVjaWZ5aW5nIGEgVmlldyBjbGFzcyBmb3IgaXRlbXMK
        ICBJZiB5b3UgcHJvdmlkZSBhbiBgaXRlbVZpZXdDbGFzc2Agb3B0aW9uIHRo
        YXQgcmVmZXJlbmNlcyBhIHZpZXcgY2xhc3MKICB3aXRoIGl0cyBvd24gYHRl
        bXBsYXRlYCB5b3UgY2FuIG9taXQgdGhlIGJsb2NrLgoKICBUaGUgZm9sbG93
        aW5nIHRlbXBsYXRlOgoKICBgYGBoYW5kbGViYXJzCiAge3sjdmlldyBBcHAu
        TXlWaWV3IH19CiAgICB7e2VhY2ggdmlldy5pdGVtcyBpdGVtVmlld0NsYXNz
        PSJBcHAuQW5JdGVtVmlldyJ9fQogIHt7L3ZpZXd9fQogIGBgYAoKICBBbmQg
        YXBwbGljYXRpb24gY29kZQoKICBgYGBqYXZhc2NyaXB0CiAgQXBwID0gRW1i
        ZXIuQXBwbGljYXRpb24uY3JlYXRlKHsKICAgIE15VmlldzogRW1iZXIuVmll
        dy5leHRlbmQoewogICAgICBpdGVtczogWwogICAgICAgIEVtYmVyLk9iamVj
        dC5jcmVhdGUoe25hbWU6ICdEYXZlJ30pLAogICAgICAgIEVtYmVyLk9iamVj
        dC5jcmVhdGUoe25hbWU6ICdNYXJ5J30pLAogICAgICAgIEVtYmVyLk9iamVj
        dC5jcmVhdGUoe25hbWU6ICdTYXJhJ30pCiAgICAgIF0KICAgIH0pCiAgfSk7
        CgogIEFwcC5Bbkl0ZW1WaWV3ID0gRW1iZXIuVmlldy5leHRlbmQoewogICAg
        dGVtcGxhdGU6IEVtYmVyLkhhbmRsZWJhcnMuY29tcGlsZSgiR3JlZXRpbmdz
        IHt7bmFtZX19IikKICB9KTsKICBgYGAKCiAgV2lsbCByZXN1bHQgaW4gdGhl
        IEhUTUwgc3RydWN0dXJlIGJlbG93CgogIGBgYGh0bWwKICA8ZGl2IGNsYXNz
        PSJlbWJlci12aWV3Ij4KICAgIDxkaXYgY2xhc3M9ImVtYmVyLXZpZXciPkdy
        ZWV0aW5ncyBEYXZlPC9kaXY+CiAgICA8ZGl2IGNsYXNzPSJlbWJlci12aWV3
        Ij5HcmVldGluZ3MgTWFyeTwvZGl2PgogICAgPGRpdiBjbGFzcz0iZW1iZXIt
        dmlldyI+R3JlZXRpbmdzIFNhcmE8L2Rpdj4KICA8L2Rpdj4KICBgYGAKCiAg
        SWYgYW4gYGl0ZW1WaWV3Q2xhc3NgIGlzIGRlZmluZWQgb24gdGhlIGhlbHBl
        ciwgYW5kIHRoZXJlZm9yZSB0aGUgaGVscGVyIGlzIG5vdAogIGJlaW5nIHVz
        ZWQgYXMgYSBibG9jaywgYW4gYGVtcHR5Vmlld0NsYXNzYCBjYW4gYWxzbyBi
        ZSBwcm92aWRlZCBvcHRpb25hbGx5LgogIFRoZSBgZW1wdHlWaWV3Q2xhc3Ng
        IHdpbGwgbWF0Y2ggdGhlIGJlaGF2aW9yIG9mIHRoZSBge3tlbHNlfX1gIGNv
        bmRpdGlvbgogIGRlc2NyaWJlZCBhYm92ZS4gVGhhdCBpcywgdGhlIGBlbXB0
        eVZpZXdDbGFzc2Agd2lsbCByZW5kZXIgaWYgdGhlIGNvbGxlY3Rpb24KICBp
        cyBlbXB0eS4KCiAgIyMjIFJlcHJlc2VudGluZyBlYWNoIGl0ZW0gd2l0aCBh
        IENvbnRyb2xsZXIuCiAgQnkgZGVmYXVsdCB0aGUgY29udHJvbGxlciBsb29r
        dXAgd2l0aGluIGFuIGB7eyNlYWNofX1gIGJsb2NrIHdpbGwgYmUKICB0aGUg
        Y29udHJvbGxlciBvZiB0aGUgdGVtcGxhdGUgd2hlcmUgdGhlIGB7eyNlYWNo
        fX1gIHdhcyB1c2VkLiBJZiBlYWNoCiAgaXRlbSBuZWVkcyB0byBiZSBwcmVz
        ZW50ZWQgYnkgYSBjdXN0b20gY29udHJvbGxlciB5b3UgY2FuIHByb3ZpZGUg
        YQogIGBpdGVtQ29udHJvbGxlcmAgb3B0aW9uIHdoaWNoIHJlZmVyZW5jZXMg
        YSBjb250cm9sbGVyIGJ5IGxvb2t1cCBuYW1lLgogIEVhY2ggaXRlbSBpbiB0
        aGUgbG9vcCB3aWxsIGJlIHdyYXBwZWQgaW4gYW4gaW5zdGFuY2Ugb2YgdGhp
        cyBjb250cm9sbGVyCiAgYW5kIHRoZSBpdGVtIGl0c2VsZiB3aWxsIGJlIHNl
        dCB0byB0aGUgYGNvbnRlbnRgIHByb3BlcnR5IG9mIHRoYXQgY29udHJvbGxl
        ci4KCiAgVGhpcyBpcyB1c2VmdWwgaW4gY2FzZXMgd2hlcmUgcHJvcGVydGll
        cyBvZiBtb2RlbCBvYmplY3RzIG5lZWQgdHJhbnNmb3JtYXRpb24KICBvciBz
        eW50aGVzaXMgZm9yIGRpc3BsYXk6CgogIGBgYGphdmFzY3JpcHQKICBBcHAu
        RGV2ZWxvcGVyQ29udHJvbGxlciA9IEVtYmVyLk9iamVjdENvbnRyb2xsZXIu
        ZXh0ZW5kKHsKICAgIGlzQXZhaWxhYmxlRm9ySGlyZTogZnVuY3Rpb24oKSB7
        CiAgICAgIHJldHVybiAhdGhpcy5nZXQoJ2NvbnRlbnQuaXNFbXBsb3llZCcp
        ICYmIHRoaXMuZ2V0KCdjb250ZW50LmlzU2Vla2luZ1dvcmsnKTsKICAgIH0u
        cHJvcGVydHkoJ2lzRW1wbG95ZWQnLCAnaXNTZWVraW5nV29yaycpCiAgfSkK
        ICBgYGAKCiAgYGBgaGFuZGxlYmFycwogIHt7I2VhY2ggcGVyc29uIGluIGRl
        dmVsb3BlcnMgaXRlbUNvbnRyb2xsZXI9ImRldmVsb3BlciJ9fQogICAge3tw
        ZXJzb24ubmFtZX19IHt7I2lmIHBlcnNvbi5pc0F2YWlsYWJsZUZvckhpcmV9
        fUhpcmUgbWUhe3svaWZ9fQogIHt7L2VhY2h9fQogIGBgYAoKICBFYWNoIGl0
        ZW1Db250cm9sbGVyIHdpbGwgcmVjZWl2ZSBhIHJlZmVyZW5jZSB0byB0aGUg
        Y3VycmVudCBjb250cm9sbGVyIGFzCiAgYSBgcGFyZW50Q29udHJvbGxlcmAg
        cHJvcGVydHkuCgogICMjIyAoRXhwZXJpbWVudGFsKSBHcm91cGVkIEVhY2gK
        CiAgV2hlbiB1c2VkIGluIGNvbmp1bmN0aW9uIHdpdGggdGhlIGV4cGVyaW1l
        bnRhbCBbZ3JvdXAgaGVscGVyXShodHRwczovL2dpdGh1Yi5jb20vZW1iZXJq
        cy9ncm91cC1oZWxwZXIpLAogIHlvdSBjYW4gaW5mb3JtIEhhbmRsZWJhcnMg
        dG8gcmUtcmVuZGVyIGFuIGVudGlyZSBncm91cCBvZiBpdGVtcyBpbnN0ZWFk
        IG9mCiAgcmUtcmVuZGVyaW5nIHRoZW0gb25lIGF0IGEgdGltZSAoaW4gdGhl
        IGV2ZW50IHRoYXQgdGhleSBhcmUgY2hhbmdlZCBlbiBtYXNzZQogIG9yIGFu
        IGl0ZW0gaXMgYWRkZWQvcmVtb3ZlZCkuCgogIGBgYGhhbmRsZWJhcnMKICB7
        eyNncm91cH19CiAgICB7eyNlYWNoIHBlb3BsZX19CiAgICAgIHt7Zmlyc3RO
        YW1lfX0ge3tsYXN0TmFtZX19CiAgICB7ey9lYWNofX0KICB7ey9ncm91cH19
        CiAgYGBgCgogIFRoaXMgY2FuIGJlIGZhc3RlciB0aGFuIHRoZSBub3JtYWwg
        d2F5IHRoYXQgSGFuZGxlYmFycyByZS1yZW5kZXJzIGl0ZW1zCiAgaW4gc29t
        ZSBjYXNlcy4KCiAgSWYgZm9yIHNvbWUgcmVhc29uIHlvdSBoYXZlIGEgZ3Jv
        dXAgd2l0aCBtb3JlIHRoYW4gb25lIGAjZWFjaGAsIHlvdSBjYW4gbWFrZQog
        IG9uZSBvZiB0aGUgY29sbGVjdGlvbnMgYmUgdXBkYXRlZCBpbiBub3JtYWwg
        KG5vbi1ncm91cGVkKSBmYXNoaW9uIGJ5IHNldHRpbmcKICB0aGUgb3B0aW9u
        IGBncm91cGVkUm93cz10cnVlYCAoY291bnRlci1pbnR1aXRpdmUsIEkga25v
        dykuCgogIEZvciBleGFtcGxlLAoKICBgYGBoYW5kbGViYXJzCiAge3tkZWFs
        ZXJzaGlwTmFtZX19CgogIHt7I2dyb3VwfX0KICAgIHt7I2VhY2ggZGVhbGVy
        c319CiAgICAgIHt7Zmlyc3ROYW1lfX0ge3tsYXN0TmFtZX19CiAgICB7ey9l
        YWNofX0KCiAgICB7eyNlYWNoIGNhciBpbiBjYXJzIGdyb3VwZWRSb3dzPXRy
        dWV9fQogICAgICB7e2Nhci5tYWtlfX0ge3tjYXIubW9kZWx9fSB7e2Nhci5j
        b2xvcn19CiAgICB7ey9lYWNofX0KICB7ey9ncm91cH19CiAgYGBgCiAgQW55
        IGNoYW5nZSB0byBgZGVhbGVyc2hpcE5hbWVgIG9yIHRoZSBgZGVhbGVyc2Ag
        Y29sbGVjdGlvbiB3aWxsIGNhdXNlIHRoZQogIGVudGlyZSBncm91cCB0byBi
        ZSByZS1yZW5kZXJlZC4gSG93ZXZlciwgY2hhbmdlcyB0byB0aGUgYGNhcnNg
        IGNvbGxlY3Rpb24KICB3aWxsIGJlIHJlLXJlbmRlcmVkIGluZGl2aWR1YWxs
        eSAoYXMgbm9ybWFsKS4KCiAgTm90ZSB0aGF0IGBncm91cGAgYmVoYXZpb3Ig
        aXMgYWxzbyBkaXNhYmxlZCBieSBzcGVjaWZ5aW5nIGFuIGBpdGVtVmlld0Ns
        YXNzYC4KCiAgQG1ldGhvZCBlYWNoCiAgQGZvciBFbWJlci5IYW5kbGViYXJz
        LmhlbHBlcnMKICBAcGFyYW0gW25hbWVdIHtTdHJpbmd9IG5hbWUgZm9yIGl0
        ZW0gKHVzZWQgd2l0aCBgaW5gKQogIEBwYXJhbSBbcGF0aF0ge1N0cmluZ30g
        cGF0aAogIEBwYXJhbSBbb3B0aW9uc10ge09iamVjdH0gSGFuZGxlYmFycyBr
        ZXkvdmFsdWUgcGFpcnMgb2Ygb3B0aW9ucwogIEBwYXJhbSBbb3B0aW9ucy5p
        dGVtVmlld0NsYXNzXSB7U3RyaW5nfSBhIHBhdGggdG8gYSB2aWV3IGNsYXNz
        IHVzZWQgZm9yIGVhY2ggaXRlbQogIEBwYXJhbSBbb3B0aW9ucy5pdGVtQ29u
        dHJvbGxlcl0ge1N0cmluZ30gbmFtZSBvZiBhIGNvbnRyb2xsZXIgdG8gYmUg
        Y3JlYXRlZCBmb3IgZWFjaCBpdGVtCiAgQHBhcmFtIFtvcHRpb25zLmdyb3Vw
        ZWRSb3dzXSB7Ym9vbGVhbn0gZW5hYmxlIG5vcm1hbCBpdGVtLWJ5LWl0ZW0g
        cmVuZGVyaW5nIHdoZW4gaW5zaWRlIGEgYCNncm91cGAgaGVscGVyCiovCkVt
        YmVyLkhhbmRsZWJhcnMucmVnaXN0ZXJIZWxwZXIoJ2VhY2gnLCBmdW5jdGlv
        bihwYXRoLCBvcHRpb25zKSB7CiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09
        IDQpIHsKICAgIEVtYmVyLmFzc2VydCgiSWYgeW91IHBhc3MgbW9yZSB0aGFu
        IG9uZSBhcmd1bWVudCB0byB0aGUgZWFjaCBoZWxwZXIsIGl0IG11c3QgYmUg
        aW4gdGhlIGZvcm0gI2VhY2ggZm9vIGluIGJhciIsIGFyZ3VtZW50c1sxXSA9
        PT0gImluIik7CgogICAgdmFyIGtleXdvcmROYW1lID0gYXJndW1lbnRzWzBd
        OwoKICAgIG9wdGlvbnMgPSBhcmd1bWVudHNbM107CiAgICBwYXRoID0gYXJn
        dW1lbnRzWzJdOwogICAgaWYgKHBhdGggPT09ICcnKSB7IHBhdGggPSAidGhp
        cyI7IH0KCiAgICBvcHRpb25zLmhhc2gua2V5d29yZCA9IGtleXdvcmROYW1l
        OwogIH0KCiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDEpIHsKICAgIG9w
        dGlvbnMgPSBwYXRoOwogICAgcGF0aCA9ICd0aGlzJzsKICB9CgogIG9wdGlv
        bnMuaGFzaC5kYXRhU291cmNlQmluZGluZyA9IHBhdGg7CiAgLy8gU2V0IHVw
        IGVtcHR5VmlldyBhcyBhIG1ldGFtb3JwaCB3aXRoIG5vIHRhZwogIC8vb3B0
        aW9ucy5oYXNoLmVtcHR5Vmlld0NsYXNzID0gRW1iZXIuX01ldGFtb3JwaFZp
        ZXc7CgogIGlmIChvcHRpb25zLmRhdGEuaW5zaWRlR3JvdXAgJiYgIW9wdGlv
        bnMuaGFzaC5ncm91cGVkUm93cyAmJiAhb3B0aW9ucy5oYXNoLml0ZW1WaWV3
        Q2xhc3MpIHsKICAgIG5ldyBFbWJlci5IYW5kbGViYXJzLkdyb3VwZWRFYWNo
        KHRoaXMsIHBhdGgsIG9wdGlvbnMpLnJlbmRlcigpOwogIH0gZWxzZSB7CiAg
        ICByZXR1cm4gRW1iZXIuSGFuZGxlYmFycy5oZWxwZXJzLmNvbGxlY3Rpb24u
        Y2FsbCh0aGlzLCAnRW1iZXIuSGFuZGxlYmFycy5FYWNoVmlldycsIG9wdGlv
        bnMpOwogIH0KfSk7Cgp9KSgpOwoKCgooZnVuY3Rpb24oKSB7Ci8qKgpAbW9k
        dWxlIGVtYmVyCkBzdWJtb2R1bGUgZW1iZXItaGFuZGxlYmFycwoqLwoKLyoq
        CiAgYHRlbXBsYXRlYCBhbGxvd3MgeW91IHRvIHJlbmRlciBhIHRlbXBsYXRl
        IGZyb20gaW5zaWRlIGFub3RoZXIgdGVtcGxhdGUuCiAgVGhpcyBhbGxvd3Mg
        eW91IHRvIHJlLXVzZSB0aGUgc2FtZSB0ZW1wbGF0ZSBpbiBtdWx0aXBsZSBw
        bGFjZXMuIEZvciBleGFtcGxlOgoKICBgYGBodG1sCiAgPHNjcmlwdCB0eXBl
        PSJ0ZXh0L3gtaGFuZGxlYmFycyIgZGF0YS10ZW1wbGF0ZS1uYW1lPSJsb2dn
        ZWRfaW5fdXNlciI+CiAgICB7eyN3aXRoIGxvZ2dlZEluVXNlcn19CiAgICAg
        IExhc3QgTG9naW46IHt7bGFzdExvZ2lufX0KICAgICAgVXNlciBJbmZvOiB7
        e3RlbXBsYXRlICJ1c2VyX2luZm8ifX0KICAgIHt7L3dpdGh9fQogIDwvc2Ny
        aXB0PgogIGBgYAoKICBgYGBodG1sCiAgPHNjcmlwdCB0eXBlPSJ0ZXh0L3gt
        aGFuZGxlYmFycyIgZGF0YS10ZW1wbGF0ZS1uYW1lPSJ1c2VyX2luZm8iPgog
        ICAgTmFtZTogPGVtPnt7bmFtZX19PC9lbT4KICAgIEthcm1hOiA8ZW0+e3tr
        YXJtYX19PC9lbT4KICA8L3NjcmlwdD4KICBgYGAKCiAgYGBgaGFuZGxlYmFy
        cwogIHt7I2lmIGlzVXNlcn19CiAgICB7e3RlbXBsYXRlICJ1c2VyX2luZm8i
        fX0KICB7e2Vsc2V9fQogICAge3t0ZW1wbGF0ZSAidW5sb2dnZWRfdXNlcl9p
        bmZvIn19CiAge3svaWZ9fQogIGBgYAoKICBUaGlzIGhlbHBlciBsb29rcyBm
        b3IgdGVtcGxhdGVzIGluIHRoZSBnbG9iYWwgYEVtYmVyLlRFTVBMQVRFU2Ag
        aGFzaC4gSWYgeW91CiAgYWRkIGA8c2NyaXB0PmAgdGFncyB0byB5b3VyIHBh
        Z2Ugd2l0aCB0aGUgYGRhdGEtdGVtcGxhdGUtbmFtZWAgYXR0cmlidXRlIHNl
        dCwKICB0aGV5IHdpbGwgYmUgY29tcGlsZWQgYW5kIHBsYWNlZCBpbiB0aGlz
        IGhhc2ggYXV0b21hdGljYWxseS4KCiAgWW91IGNhbiBhbHNvIG1hbnVhbGx5
        IHJlZ2lzdGVyIHRlbXBsYXRlcyBieSBhZGRpbmcgdGhlbSB0byB0aGUgaGFz
        aDoKCiAgYGBgamF2YXNjcmlwdAogIEVtYmVyLlRFTVBMQVRFU1sibXlfY29v
        bF90ZW1wbGF0ZSJdID0gRW1iZXIuSGFuZGxlYmFycy5jb21waWxlKCc8Yj57
        e3VzZXJ9fTwvYj4nKTsKICBgYGAKCiAgQGRlcHJlY2F0ZWQKICBAbWV0aG9k
        IHRlbXBsYXRlCiAgQGZvciBFbWJlci5IYW5kbGViYXJzLmhlbHBlcnMKICBA
        cGFyYW0ge1N0cmluZ30gdGVtcGxhdGVOYW1lIHRoZSB0ZW1wbGF0ZSB0byBy
        ZW5kZXIKKi8KCkVtYmVyLkhhbmRsZWJhcnMucmVnaXN0ZXJIZWxwZXIoJ3Rl
        bXBsYXRlJywgZnVuY3Rpb24obmFtZSwgb3B0aW9ucykgewogIEVtYmVyLmRl
        cHJlY2F0ZSgiVGhlIGB0ZW1wbGF0ZWAgaGVscGVyIGhhcyBiZWVuIGRlcHJl
        Y2F0ZWQgaW4gZmF2b3Igb2YgdGhlIGBwYXJ0aWFsYCBoZWxwZXIuIFBsZWFz
        ZSB1c2UgYHBhcnRpYWxgIGluc3RlYWQsIHdoaWNoIHdpbGwgd29yayB0aGUg
        c2FtZSB3YXkuIik7CiAgcmV0dXJuIEVtYmVyLkhhbmRsZWJhcnMuaGVscGVy
        cy5wYXJ0aWFsLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0pOwoKfSkoKTsK
        CgoKKGZ1bmN0aW9uKCkgewovKioKQG1vZHVsZSBlbWJlcgpAc3VibW9kdWxl
        IGVtYmVyLWhhbmRsZWJhcnMKKi8KCi8qKgogIGBwYXJ0aWFsYCByZW5kZXJz
        IGEgdGVtcGxhdGUgZGlyZWN0bHkgdXNpbmcgdGhlIGN1cnJlbnQgY29udGV4
        dC4KICBJZiBuZWVkZWQgdGhlIGNvbnRleHQgY2FuIGJlIHNldCB1c2luZyB0
        aGUgYHt7I3dpdGggZm9vfX1gIGhlbHBlci4KCiAgYGBgaHRtbAogIDxzY3Jp
        cHQgdHlwZT0idGV4dC94LWhhbmRsZWJhcnMiIGRhdGEtdGVtcGxhdGUtbmFt
        ZT0iaGVhZGVyX2JhciI+CiAgICB7eyN3aXRoIGN1cnJlbnRVc2VyfX0KICAg
        ICAge3twYXJ0aWFsIHVzZXJfaW5mb319CiAgICB7ey93aXRofX0KICA8L3Nj
        cmlwdD4KICBgYGAKCiAgVGhlIGBkYXRhLXRlbXBsYXRlLW5hbWVgIGF0dHJp
        YnV0ZSBvZiBhIHBhcnRpYWwgdGVtcGxhdGUKICBpcyBwcmVmaXhlZCB3aXRo
        IGFuIHVuZGVyc2NvcmUuCgogIGBgYGh0bWwKICA8c2NyaXB0IHR5cGU9InRl
        eHQveC1oYW5kbGViYXJzIiBkYXRhLXRlbXBsYXRlLW5hbWU9Il91c2VyX2lu
        Zm8iPgogICAgPHNwYW4+SGVsbG8ge3t1c2VybmFtZX19ITwvc3Bhbj4KICA8
        L3NjcmlwdD4KICBgYGAKCiAgQG1ldGhvZCBwYXJ0aWFsCiAgQGZvciBFbWJl
        ci5IYW5kbGViYXJzLmhlbHBlcnMKICBAcGFyYW0ge1N0cmluZ30gcGFydGlh
        bE5hbWUgdGhlIG5hbWUgb2YgdGhlIHRlbXBsYXRlIHRvIHJlbmRlciBtaW51
        cyB0aGUgbGVhZGluZyB1bmRlcnNjb3JlCiovCgpFbWJlci5IYW5kbGViYXJz
        LnJlZ2lzdGVySGVscGVyKCdwYXJ0aWFsJywgZnVuY3Rpb24obmFtZSwgb3B0
        aW9ucykgewogIHZhciBuYW1lUGFydHMgPSBuYW1lLnNwbGl0KCIvIiksCiAg
        ICAgIGxhc3RQYXJ0ID0gbmFtZVBhcnRzW25hbWVQYXJ0cy5sZW5ndGggLSAx
        XTsKCiAgbmFtZVBhcnRzW25hbWVQYXJ0cy5sZW5ndGggLSAxXSA9ICJfIiAr
        IGxhc3RQYXJ0OwoKICB2YXIgdmlldyA9IG9wdGlvbnMuZGF0YS52aWV3LAog
        ICAgICB1bmRlcnNjb3JlZE5hbWUgPSBuYW1lUGFydHMuam9pbigiLyIpLAog
        ICAgICB0ZW1wbGF0ZSA9IHZpZXcudGVtcGxhdGVGb3JOYW1lKHVuZGVyc2Nv
        cmVkTmFtZSksCiAgICAgIGRlcHJlY2F0ZWRUZW1wbGF0ZSA9ICF0ZW1wbGF0
        ZSAmJiB2aWV3LnRlbXBsYXRlRm9yTmFtZShuYW1lKTsKCiAgRW1iZXIuYXNz
        ZXJ0KCJVbmFibGUgdG8gZmluZCBwYXJ0aWFsIHdpdGggbmFtZSAnIituYW1l
        KyInLiIsIHRlbXBsYXRlIHx8IGRlcHJlY2F0ZWRUZW1wbGF0ZSk7CgogIHRl
        bXBsYXRlID0gdGVtcGxhdGUgfHwgZGVwcmVjYXRlZFRlbXBsYXRlOwoKICB0
        ZW1wbGF0ZSh0aGlzLCB7IGRhdGE6IG9wdGlvbnMuZGF0YSB9KTsKfSk7Cgp9
        KSgpOwoKCgooZnVuY3Rpb24oKSB7Ci8qKgpAbW9kdWxlIGVtYmVyCkBzdWJt
        b2R1bGUgZW1iZXItaGFuZGxlYmFycwoqLwoKdmFyIGdldCA9IEVtYmVyLmdl
        dCwgc2V0ID0gRW1iZXIuc2V0OwoKLyoqCiAgYHt7eWllbGR9fWAgZGVub3Rl
        cyBhbiBhcmVhIG9mIGEgdGVtcGxhdGUgdGhhdCB3aWxsIGJlIHJlbmRlcmVk
        IGluc2lkZQogIG9mIGFub3RoZXIgdGVtcGxhdGUuIEl0IGhhcyB0d28gbWFp
        biB1c2VzOgoKICAjIyMgVXNlIHdpdGggYGxheW91dGAKICBXaGVuIHVzZWQg
        aW4gYSBIYW5kbGViYXJzIHRlbXBsYXRlIHRoYXQgaXMgYXNzaWduZWQgdG8g
        YW4gYEVtYmVyLlZpZXdgCiAgaW5zdGFuY2UncyBgbGF5b3V0YCBwcm9wZXJ0
        eSBFbWJlciB3aWxsIHJlbmRlciB0aGUgbGF5b3V0IHRlbXBsYXRlIGZpcnN0
        LAogIGluc2VydGluZyB0aGUgdmlldydzIG93biByZW5kZXJlZCBvdXRwdXQg
        YXQgdGhlIGB7e3lpZWxkfX1gIGxvY2F0aW9uLgoKICBBbiBlbXB0eSBgPGJv
        ZHk+YCBhbmQgdGhlIGZvbGxvd2luZyBhcHBsaWNhdGlvbiBjb2RlOgoKICBg
        YGBqYXZhc2NyaXB0CiAgQVZpZXcgPSBFbWJlci5WaWV3LmV4dGVuZCh7CiAg
        ICBjbGFzc05hbWVzOiBbJ2Etdmlldy13aXRoLWxheW91dCddLAogICAgbGF5
        b3V0OiBFbWJlci5IYW5kbGViYXJzLmNvbXBpbGUoJzxkaXYgY2xhc3M9Indy
        YXBwZXIiPnt7eWllbGR9fTwvZGl2PicpLAogICAgdGVtcGxhdGU6IEVtYmVy
        LkhhbmRsZWJhcnMuY29tcGlsZSgnPHNwYW4+SSBhbSB3cmFwcGVkPC9zcGFu
        PicpCiAgfSk7CgogIGFWaWV3ID0gQVZpZXcuY3JlYXRlKCk7CiAgYVZpZXcu
        YXBwZW5kVG8oJ2JvZHknKTsKICBgYGAKCiAgV2lsbCByZXN1bHQgaW4gdGhl
        IGZvbGxvd2luZyBIVE1MIG91dHB1dDoKCiAgYGBgaHRtbAogIDxib2R5Pgog
        ICAgPGRpdiBjbGFzcz0nZW1iZXItdmlldyBhLXZpZXctd2l0aC1sYXlvdXQn
        PgogICAgICA8ZGl2IGNsYXNzPSJ3cmFwcGVyIj4KICAgICAgICA8c3Bhbj5J
        IGFtIHdyYXBwZWQ8L3NwYW4+CiAgICAgIDwvZGl2PgogICAgPC9kaXY+CiAg
        PC9ib2R5PgogIGBgYAoKICBUaGUgYHlpZWxkYCBoZWxwZXIgY2Fubm90IGJl
        IHVzZWQgb3V0c2lkZSBvZiBhIHRlbXBsYXRlIGFzc2lnbmVkIHRvIGFuCiAg
        YEVtYmVyLlZpZXdgJ3MgYGxheW91dGAgcHJvcGVydHkgYW5kIHdpbGwgdGhy
        b3cgYW4gZXJyb3IgaWYgYXR0ZW1wdGVkLgoKICBgYGBqYXZhc2NyaXB0CiAg
        QlZpZXcgPSBFbWJlci5WaWV3LmV4dGVuZCh7CiAgICBjbGFzc05hbWVzOiBb
        J2Etdmlldy13aXRoLWxheW91dCddLAogICAgdGVtcGxhdGU6IEVtYmVyLkhh
        bmRsZWJhcnMuY29tcGlsZSgne3t5aWVsZH19JykKICB9KTsKCiAgYlZpZXcg
        PSBCVmlldy5jcmVhdGUoKTsKICBiVmlldy5hcHBlbmRUbygnYm9keScpOwoK
        ICAvLyB0aHJvd3MKICAvLyBVbmNhdWdodCBFcnJvcjogYXNzZXJ0aW9uIGZh
        aWxlZDoKICAvLyBZb3UgY2FsbGVkIHlpZWxkIGluIGEgdGVtcGxhdGUgdGhh
        dCB3YXMgbm90IGEgbGF5b3V0CiAgYGBgCgogICMjIyBVc2Ugd2l0aCBFbWJl
        ci5Db21wb25lbnQKICBXaGVuIGRlc2lnbmluZyBjb21wb25lbnRzIGB7e3lp
        ZWxkfX1gIGlzIHVzZWQgdG8gZGVub3RlIHdoZXJlLCBpbnNpZGUgdGhlIGNv
        bXBvbmVudCdzCiAgdGVtcGxhdGUsIGFuIG9wdGlvbmFsIGJsb2NrIHBhc3Nl
        ZCB0byB0aGUgY29tcG9uZW50IHNob3VsZCByZW5kZXI6CgogIGBgYGhhbmRs
        ZWJhcnMKICA8IS0tIGFwcGxpY2F0aW9uLmhicyAtLT4KICB7eyNsYWJlbGVk
        LXRleHRmaWVsZCB2YWx1ZT1zb21lUHJvcGVydHl9fQogICAgRmlyc3QgbmFt
        ZToKICB7ey9sYWJlbGVkLXRleHRmaWVsZH19CiAgYGBgCgogIGBgYGhhbmRs
        ZWJhcnMKICA8IS0tIGNvbXBvbmVudHMvbGFiZWxlZC10ZXh0ZmllbGQuaGJz
        IC0tPgogIDxsYWJlbD4KICAgIHt7eWllbGR9fSB7e2lucHV0IHZhbHVlPXZh
        bHVlfX0KICA8L2xhYmVsPgogIGBgYAoKICBSZXN1bHQ6CgogIGBgYGh0bWwK
        ICA8bGFiZWw+CiAgICBGaXJzdCBuYW1lOiA8aW5wdXQgdHlwZT0idGV4dCIg
        Lz4KICA8bGFiZWw+CiAgYGBgCgogIEBtZXRob2QgeWllbGQKICBAZm9yIEVt
        YmVyLkhhbmRsZWJhcnMuaGVscGVycwogIEBwYXJhbSB7SGFzaH0gb3B0aW9u
        cwogIEByZXR1cm4ge1N0cmluZ30gSFRNTCBzdHJpbmcKKi8KRW1iZXIuSGFu
        ZGxlYmFycy5yZWdpc3RlckhlbHBlcigneWllbGQnLCBmdW5jdGlvbihvcHRp
        b25zKSB7CiAgdmFyIHZpZXcgPSBvcHRpb25zLmRhdGEudmlldzsKCiAgd2hp
        bGUgKHZpZXcgJiYgIWdldCh2aWV3LCAnbGF5b3V0JykpIHsKICAgIGlmICh2
        aWV3Ll9jb250ZXh0VmlldykgewogICAgICB2aWV3ID0gdmlldy5fY29udGV4
        dFZpZXc7CiAgICB9IGVsc2UgewogICAgICB2aWV3ID0gZ2V0KHZpZXcsICdw
        YXJlbnRWaWV3Jyk7CiAgICB9CiAgfQoKICBFbWJlci5hc3NlcnQoIllvdSBj
        YWxsZWQgeWllbGQgaW4gYSB0ZW1wbGF0ZSB0aGF0IHdhcyBub3QgYSBsYXlv
        dXQiLCAhIXZpZXcpOwoKICB2aWV3Ll95aWVsZCh0aGlzLCBvcHRpb25zKTsK
        fSk7Cgp9KSgpOwoKCgooZnVuY3Rpb24oKSB7Ci8qKgpAbW9kdWxlIGVtYmVy
        CkBzdWJtb2R1bGUgZW1iZXItaGFuZGxlYmFycwoqLwoKLyoqCiAgYGxvY2Ag
        bG9va3MgdXAgdGhlIHN0cmluZyBpbiB0aGUgbG9jYWxpemVkIHN0cmluZ3Mg
        aGFzaC4KICBUaGlzIGlzIGEgY29udmVuaWVudCB3YXkgdG8gbG9jYWxpemUg
        dGV4dC4gRm9yIGV4YW1wbGU6CgogIGBgYGh0bWwKICA8c2NyaXB0IHR5cGU9
        InRleHQveC1oYW5kbGViYXJzIiBkYXRhLXRlbXBsYXRlLW5hbWU9ImhvbWUi
        PgogICAge3tsb2MgIndlbGNvbWUifX0KICA8L3NjcmlwdD4KICBgYGAKCiAg
        VGFrZSBub3RlIHRoYXQgYCJ3ZWxjb21lImAgaXMgYSBzdHJpbmcgYW5kIG5v
        dCBhbiBvYmplY3QKICByZWZlcmVuY2UuCgogIEBtZXRob2QgbG9jCiAgQGZv
        ciBFbWJlci5IYW5kbGViYXJzLmhlbHBlcnMKICBAcGFyYW0ge1N0cmluZ30g
        c3RyIFRoZSBzdHJpbmcgdG8gZm9ybWF0CiovCgpFbWJlci5IYW5kbGViYXJz
        LnJlZ2lzdGVySGVscGVyKCdsb2MnLCBmdW5jdGlvbihzdHIpIHsKICByZXR1
        cm4gRW1iZXIuU3RyaW5nLmxvYyhzdHIpOwp9KTsKCn0pKCk7CgoKCihmdW5j
        dGlvbigpIHsKCn0pKCk7CgoKCihmdW5jdGlvbigpIHsKCn0pKCk7CgoKCihm
        dW5jdGlvbigpIHsKLyoqCkBtb2R1bGUgZW1iZXIKQHN1Ym1vZHVsZSBlbWJl
        ci1oYW5kbGViYXJzCiovCgp2YXIgc2V0ID0gRW1iZXIuc2V0LCBnZXQgPSBF
        bWJlci5nZXQ7CgovKioKICBUaGUgaW50ZXJuYWwgY2xhc3MgdXNlZCB0byBj
        cmVhdGUgdGV4dCBpbnB1dHMgd2hlbiB0aGUgYHt7aW5wdXR9fWAKICBoZWxw
        ZXIgaXMgdXNlZCB3aXRoIGB0eXBlYCBvZiBgY2hlY2tib3hgLgoKICBTZWUg
        SGFuZGxlYmFycy5oZWxwZXJzLmlucHV0IGZvciB1c2FnZSBkZXRhaWxzLgoK
        ICAjIyBEaXJlY3QgbWFuaXB1bGF0aW9uIG9mIGBjaGVja2VkYAoKICBUaGUg
        YGNoZWNrZWRgIGF0dHJpYnV0ZSBvZiBhbiBgRW1iZXIuQ2hlY2tib3hgIG9i
        amVjdCBzaG91bGQgYWx3YXlzIGJlIHNldAogIHRocm91Z2ggdGhlIEVtYmVy
        IG9iamVjdCBvciBieSBpbnRlcmFjdGluZyB3aXRoIGl0cyByZW5kZXJlZCBl
        bGVtZW50CiAgcmVwcmVzZW50YXRpb24gdmlhIHRoZSBtb3VzZSwga2V5Ym9h
        cmQsIG9yIHRvdWNoLiBVcGRhdGluZyB0aGUgdmFsdWUgb2YgdGhlCiAgY2hl
        Y2tib3ggdmlhIGpRdWVyeSB3aWxsIHJlc3VsdCBpbiB0aGUgY2hlY2tlZCB2
        YWx1ZSBvZiB0aGUgb2JqZWN0IGFuZCBpdHMKICBlbGVtZW50IGxvc2luZyBz
        eW5jaHJvbml6YXRpb24uCgogICMjIExheW91dCBhbmQgTGF5b3V0TmFtZSBw
        cm9wZXJ0aWVzCgogIEJlY2F1c2UgSFRNTCBgaW5wdXRgIGVsZW1lbnRzIGFy
        ZSBzZWxmIGNsb3NpbmcgYGxheW91dGAgYW5kIGBsYXlvdXROYW1lYAogIHBy
        b3BlcnRpZXMgd2lsbCBub3QgYmUgYXBwbGllZC4gU2VlIFtFbWJlci5WaWV3
        XSgvYXBpL2NsYXNzZXMvRW1iZXIuVmlldy5odG1sKSdzCiAgbGF5b3V0IHNl
        Y3Rpb24gZm9yIG1vcmUgaW5mb3JtYXRpb24uCgogIEBjbGFzcyBDaGVja2Jv
        eAogIEBuYW1lc3BhY2UgRW1iZXIKICBAZXh0ZW5kcyBFbWJlci5WaWV3Ciov
        CkVtYmVyLkNoZWNrYm94ID0gRW1iZXIuVmlldy5leHRlbmQoewogIGNsYXNz
        TmFtZXM6IFsnZW1iZXItY2hlY2tib3gnXSwKCiAgdGFnTmFtZTogJ2lucHV0
        JywKCiAgYXR0cmlidXRlQmluZGluZ3M6IFsndHlwZScsICdjaGVja2VkJywg
        J2luZGV0ZXJtaW5hdGUnLCAnZGlzYWJsZWQnLCAndGFiaW5kZXgnLCAnbmFt
        ZSddLAoKICB0eXBlOiAiY2hlY2tib3giLAogIGNoZWNrZWQ6IGZhbHNlLAog
        IGRpc2FibGVkOiBmYWxzZSwKICBpbmRldGVybWluYXRlOiBmYWxzZSwKCiAg
        aW5pdDogZnVuY3Rpb24oKSB7CiAgICB0aGlzLl9zdXBlcigpOwogICAgdGhp
        cy5vbigiY2hhbmdlIiwgdGhpcywgdGhpcy5fdXBkYXRlRWxlbWVudFZhbHVl
        KTsKICB9LAoKICBkaWRJbnNlcnRFbGVtZW50OiBmdW5jdGlvbigpIHsKICAg
        IHRoaXMuX3N1cGVyKCk7CiAgICB0aGlzLmdldCgnZWxlbWVudCcpLmluZGV0
        ZXJtaW5hdGUgPSAhIXRoaXMuZ2V0KCdpbmRldGVybWluYXRlJyk7CiAgfSwK
        CiAgX3VwZGF0ZUVsZW1lbnRWYWx1ZTogZnVuY3Rpb24oKSB7CiAgICBzZXQo
        dGhpcywgJ2NoZWNrZWQnLCB0aGlzLiQoKS5wcm9wKCdjaGVja2VkJykpOwog
        IH0KfSk7Cgp9KSgpOwoKCgooZnVuY3Rpb24oKSB7Ci8qKgpAbW9kdWxlIGVt
        YmVyCkBzdWJtb2R1bGUgZW1iZXItaGFuZGxlYmFycwoqLwoKdmFyIGdldCA9
        IEVtYmVyLmdldCwgc2V0ID0gRW1iZXIuc2V0OwoKLyoqCiAgU2hhcmVkIG1p
        eGluIHVzZWQgYnkgYEVtYmVyLlRleHRGaWVsZGAgYW5kIGBFbWJlci5UZXh0
        QXJlYWAuCgogIEBjbGFzcyBUZXh0U3VwcG9ydAogIEBuYW1lc3BhY2UgRW1i
        ZXIKICBAcHJpdmF0ZQoqLwpFbWJlci5UZXh0U3VwcG9ydCA9IEVtYmVyLk1p
        eGluLmNyZWF0ZSh7CiAgdmFsdWU6ICIiLAoKICBhdHRyaWJ1dGVCaW5kaW5n
        czogWydwbGFjZWhvbGRlcicsICdkaXNhYmxlZCcsICdtYXhsZW5ndGgnLCAn
        dGFiaW5kZXgnLCAncmVhZG9ubHknXSwKICBwbGFjZWhvbGRlcjogbnVsbCwK
        ICBkaXNhYmxlZDogZmFsc2UsCiAgbWF4bGVuZ3RoOiBudWxsLAoKICBpbml0
        OiBmdW5jdGlvbigpIHsKICAgIHRoaXMuX3N1cGVyKCk7CiAgICB0aGlzLm9u
        KCJmb2N1c091dCIsIHRoaXMsIHRoaXMuX2VsZW1lbnRWYWx1ZURpZENoYW5n
        ZSk7CiAgICB0aGlzLm9uKCJjaGFuZ2UiLCB0aGlzLCB0aGlzLl9lbGVtZW50
        VmFsdWVEaWRDaGFuZ2UpOwogICAgdGhpcy5vbigicGFzdGUiLCB0aGlzLCB0
        aGlzLl9lbGVtZW50VmFsdWVEaWRDaGFuZ2UpOwogICAgdGhpcy5vbigiY3V0
        IiwgdGhpcywgdGhpcy5fZWxlbWVudFZhbHVlRGlkQ2hhbmdlKTsKICAgIHRo
        aXMub24oImlucHV0IiwgdGhpcywgdGhpcy5fZWxlbWVudFZhbHVlRGlkQ2hh
        bmdlKTsKICAgIHRoaXMub24oImtleVVwIiwgdGhpcywgdGhpcy5pbnRlcnBy
        ZXRLZXlFdmVudHMpOwogIH0sCgogIC8qKgogICAgVGhlIGFjdGlvbiB0byBi
        ZSBzZW50IHdoZW4gdGhlIHVzZXIgcHJlc3NlcyB0aGUgcmV0dXJuIGtleS4K
        CiAgICBUaGlzIGlzIHNpbWlsYXIgdG8gdGhlIGB7e2FjdGlvbn19YCBoZWxw
        ZXIsIGJ1dCBpcyBmaXJlZCB3aGVuCiAgICB0aGUgdXNlciBwcmVzc2VzIHRo
        ZSByZXR1cm4ga2V5IHdoZW4gZWRpdGluZyBhIHRleHQgZmllbGQsIGFuZCBz
        ZW5kcwogICAgdGhlIHZhbHVlIG9mIHRoZSBmaWVsZCBhcyB0aGUgY29udGV4
        dC4KCiAgICBAcHJvcGVydHkgYWN0aW9uCiAgICBAdHlwZSBTdHJpbmcKICAg
        IEBkZWZhdWx0IG51bGwKICAqLwogIGFjdGlvbjogbnVsbCwKCiAgLyoqCiAg
        ICBUaGUgZXZlbnQgdGhhdCBzaG91bGQgc2VuZCB0aGUgYWN0aW9uLgoKICAg
        IE9wdGlvbnMgYXJlOgoKICAgICogYGVudGVyYDogdGhlIHVzZXIgcHJlc3Nl
        ZCBlbnRlcgogICAgKiBga2V5UHJlc3NgOiB0aGUgdXNlciBwcmVzc2VkIGEg
        a2V5CgogICAgQHByb3BlcnR5IG9uRXZlbnQKICAgIEB0eXBlIFN0cmluZwog
        ICAgQGRlZmF1bHQgZW50ZXIKICAqLwogIG9uRXZlbnQ6ICdlbnRlcicsCgog
        IC8qKgogICAgV2hldGhlciB0aGV5IGBrZXlVcGAgZXZlbnQgdGhhdCB0cmln
        Z2VycyBhbiBgYWN0aW9uYCB0byBiZSBzZW50IGNvbnRpbnVlcwogICAgcHJv
        cGFnYXRpbmcgdG8gb3RoZXIgdmlld3MuCgogICAgQnkgZGVmYXVsdCwgd2hl
        biB0aGUgdXNlciBwcmVzc2VzIHRoZSByZXR1cm4ga2V5IG9uIHRoZWlyIGtl
        eWJvYXJkIGFuZAogICAgdGhlIHRleHQgZmllbGQgaGFzIGFuIGBhY3Rpb25g
        IHNldCwgdGhlIGFjdGlvbiB3aWxsIGJlIHNlbnQgdG8gdGhlIHZpZXcncwog
        ICAgY29udHJvbGxlciBhbmQgdGhlIGtleSBldmVudCB3aWxsIHN0b3AgcHJv
        cGFnYXRpbmcuCgogICAgSWYgeW91IHdvdWxkIGxpa2UgcGFyZW50IHZpZXdz
        IHRvIHJlY2VpdmUgdGhlIGBrZXlVcGAgZXZlbnQgZXZlbiBhZnRlciBhbgog
        ICAgYWN0aW9uIGhhcyBiZWVuIGRpc3BhdGNoZWQsIHNldCBgYnViYmxlc2Ag
        dG8gdHJ1ZS4KCiAgICBAcHJvcGVydHkgYnViYmxlcwogICAgQHR5cGUgQm9v
        bGVhbgogICAgQGRlZmF1bHQgZmFsc2UKICAqLwogIGJ1YmJsZXM6IGZhbHNl
        LAoKICBpbnRlcnByZXRLZXlFdmVudHM6IGZ1bmN0aW9uKGV2ZW50KSB7CiAg
        ICB2YXIgbWFwID0gRW1iZXIuVGV4dFN1cHBvcnQuS0VZX0VWRU5UUzsKICAg
        IHZhciBtZXRob2QgPSBtYXBbZXZlbnQua2V5Q29kZV07CgogICAgdGhpcy5f
        ZWxlbWVudFZhbHVlRGlkQ2hhbmdlKCk7CiAgICBpZiAobWV0aG9kKSB7IHJl
        dHVybiB0aGlzW21ldGhvZF0oZXZlbnQpOyB9CiAgfSwKCiAgX2VsZW1lbnRW
        YWx1ZURpZENoYW5nZTogZnVuY3Rpb24oKSB7CiAgICBzZXQodGhpcywgJ3Zh
        bHVlJywgdGhpcy4kKCkudmFsKCkpOwogIH0sCgogIC8qKgogICAgVGhlIGFj
        dGlvbiB0byBiZSBzZW50IHdoZW4gdGhlIHVzZXIgaW5zZXJ0cyBhIG5ldyBs
        aW5lLgoKICAgIENhbGxlZCBieSB0aGUgYEVtYmVyLlRleHRTdXBwb3J0YCBt
        aXhpbiBvbiBrZXlVcCBpZiBrZXljb2RlIG1hdGNoZXMgMTMuCiAgICBVc2Vz
        IHNlbmRBY3Rpb24gdG8gc2VuZCB0aGUgYGVudGVyYCBhY3Rpb24gdG8gdGhl
        IGNvbnRyb2xsZXIuCgogICAgQG1ldGhvZCBpbnNlcnROZXdsaW5lCiAgICBA
        cGFyYW0ge0V2ZW50fSBldmVudAogICovCiAgaW5zZXJ0TmV3bGluZTogZnVu
        Y3Rpb24oZXZlbnQpIHsKICAgIHNlbmRBY3Rpb24oJ2VudGVyJywgdGhpcywg
        ZXZlbnQpOwogICAgc2VuZEFjdGlvbignaW5zZXJ0LW5ld2xpbmUnLCB0aGlz
        LCBldmVudCk7CiAgfSwKCiAgLyoqCiAgICBDYWxsZWQgd2hlbiB0aGUgdXNl
        ciBoaXRzIGVzY2FwZS4KCiAgICBDYWxsZWQgYnkgdGhlIGBFbWJlci5UZXh0
        U3VwcG9ydGAgbWl4aW4gb24ga2V5VXAgaWYga2V5Y29kZSBtYXRjaGVzIDI3
        LgogICAgVXNlcyBzZW5kQWN0aW9uIHRvIHNlbmQgdGhlIGBlc2NhcGUtcHJl
        c3NgIGFjdGlvbiB0byB0aGUgY29udHJvbGxlci4KCiAgICBAbWV0aG9kIGNh
        bmNlbAogICAgQHBhcmFtIHtFdmVudH0gZXZlbnQKICAqLwogIGNhbmNlbDog
        ZnVuY3Rpb24oZXZlbnQpIHsKICAgIHNlbmRBY3Rpb24oJ2VzY2FwZS1wcmVz
        cycsIHRoaXMsIGV2ZW50KTsKICB9LAoKICAvKioKICAgIENhbGxlZCB3aGVu
        IHRoZSB0ZXh0IGFyZWEgaXMgZm9jdXNlZC4KCiAgICBAbWV0aG9kIGZvY3Vz
        SW4KICAgIEBwYXJhbSB7RXZlbnR9IGV2ZW50CiAgKi8KICBmb2N1c0luOiBm
        dW5jdGlvbihldmVudCkgewogICAgc2VuZEFjdGlvbignZm9jdXMtaW4nLCB0
        aGlzLCBldmVudCk7CiAgfSwKCiAgLyoqCiAgICBDYWxsZWQgd2hlbiB0aGUg
        dGV4dCBhcmVhIGlzIGJsdXJyZWQuCgogICAgQG1ldGhvZCBmb2N1c091dAog
        ICAgQHBhcmFtIHtFdmVudH0gZXZlbnQKICAqLwogIGZvY3VzT3V0OiBmdW5j
        dGlvbihldmVudCkgewogICAgc2VuZEFjdGlvbignZm9jdXMtb3V0JywgdGhp
        cywgZXZlbnQpOwogIH0sCgogIC8qKgogICAgVGhlIGFjdGlvbiB0byBiZSBz
        ZW50IHdoZW4gdGhlIHVzZXIgcHJlc3NlcyBhIGtleS4gRW5hYmxlZCBieSBz
        ZXR0aW5nCiAgICB0aGUgYG9uRXZlbnRgIHByb3BlcnR5IHRvIGBrZXlQcmVz
        c2AuCgogICAgVXNlcyBzZW5kQWN0aW9uIHRvIHNlbmQgdGhlIGBrZXlQcmVz
        c2AgYWN0aW9uIHRvIHRoZSBjb250cm9sbGVyLgoKICAgIEBtZXRob2Qga2V5
        UHJlc3MKICAgIEBwYXJhbSB7RXZlbnR9IGV2ZW50CiAgKi8KICBrZXlQcmVz
        czogZnVuY3Rpb24oZXZlbnQpIHsKICAgIHNlbmRBY3Rpb24oJ2tleS1wcmVz
        cycsIHRoaXMsIGV2ZW50KTsKICB9Cgp9KTsKCkVtYmVyLlRleHRTdXBwb3J0
        LktFWV9FVkVOVFMgPSB7CiAgMTM6ICdpbnNlcnROZXdsaW5lJywKICAyNzog
        J2NhbmNlbCcKfTsKCi8vIEluIHByaW5jaXBsZSwgdGhpcyBzaG91bGRuJ3Qg
        YmUgbmVjZXNzYXJ5LCBidXQgdGhlIGxlZ2FjeQovLyBzZWN0aW9uQWN0aW9u
        IHNlbWFudGljcyBmb3IgVGV4dEZpZWxkIGFyZSBkaWZmZXJlbnQgZnJvbQov
        LyB0aGUgY29tcG9uZW50IHNlbWFudGljcyBzbyB0aGlzIG1ldGhvZCBub3Jt
        YWxpemVzIHRoZW0uCmZ1bmN0aW9uIHNlbmRBY3Rpb24oZXZlbnROYW1lLCB2
        aWV3LCBldmVudCkgewogIHZhciBhY3Rpb24gPSBnZXQodmlldywgZXZlbnRO
        YW1lKSwKICAgICAgb24gPSBnZXQodmlldywgJ29uRXZlbnQnKSwKICAgICAg
        dmFsdWUgPSBnZXQodmlldywgJ3ZhbHVlJyk7CgogIC8vIGJhY2stY29tcGF0
        IHN1cHBvcnQgZm9yIGtleVByZXNzIGFzIGFuIGV2ZW50IG5hbWUgZXZlbiB0
        aG91Z2gKICAvLyBpdCdzIGFsc28gYSBtZXRob2QgbmFtZSB0aGF0IGNvbnN1
        bWVzIHRoZSBldmVudCAoYW5kIHRoZXJlZm9yZQogIC8vIGluY29tcGF0aWJs
        ZSB3aXRoIHNlbmRBY3Rpb24gc2VtYW50aWNzKS4KICBpZiAob24gPT09IGV2
        ZW50TmFtZSB8fCAob24gPT09ICdrZXlQcmVzcycgJiYgZXZlbnROYW1lID09
        PSAna2V5LXByZXNzJykpIHsKICAgIHZpZXcuc2VuZEFjdGlvbignYWN0aW9u
        JywgdmFsdWUpOwogIH0KCiAgdmlldy5zZW5kQWN0aW9uKGV2ZW50TmFtZSwg
        dmFsdWUpOwoKICBpZiAoYWN0aW9uIHx8IG9uID09PSBldmVudE5hbWUpIHsK
        ICAgIGlmKCFnZXQodmlldywgJ2J1YmJsZXMnKSkgewogICAgICBldmVudC5z
        dG9wUHJvcGFnYXRpb24oKTsKICAgIH0KICB9Cn0KCn0pKCk7CgoKCihmdW5j
        dGlvbigpIHsKLyoqCkBtb2R1bGUgZW1iZXIKQHN1Ym1vZHVsZSBlbWJlci1o
        YW5kbGViYXJzCiovCgp2YXIgZ2V0ID0gRW1iZXIuZ2V0LCBzZXQgPSBFbWJl
        ci5zZXQ7CgovKioKCiAgVGhlIGludGVybmFsIGNsYXNzIHVzZWQgdG8gY3Jl
        YXRlIHRleHQgaW5wdXRzIHdoZW4gdGhlIGB7e2lucHV0fX1gCiAgaGVscGVy
        IGlzIHVzZWQgd2l0aCBgdHlwZWAgb2YgYHRleHRgLgoKICBTZWUgW2hhbmRs
        ZWJhcnMuaGVscGVycy5pbnB1dF0oL2FwaS9jbGFzc2VzL0VtYmVyLkhhbmRs
        ZWJhcnMuaGVscGVycy5odG1sI21ldGhvZF9pbnB1dCkgIGZvciB1c2FnZSBk
        ZXRhaWxzLgoKICAjIyBMYXlvdXQgYW5kIExheW91dE5hbWUgcHJvcGVydGll
        cwoKICBCZWNhdXNlIEhUTUwgYGlucHV0YCBlbGVtZW50cyBhcmUgc2VsZiBj
        bG9zaW5nIGBsYXlvdXRgIGFuZCBgbGF5b3V0TmFtZWAKICBwcm9wZXJ0aWVz
        IHdpbGwgbm90IGJlIGFwcGxpZWQuIFNlZSBbRW1iZXIuVmlld10oL2FwaS9j
        bGFzc2VzL0VtYmVyLlZpZXcuaHRtbCkncwogIGxheW91dCBzZWN0aW9uIGZv
        ciBtb3JlIGluZm9ybWF0aW9uLgoKICBAY2xhc3MgVGV4dEZpZWxkCiAgQG5h
        bWVzcGFjZSBFbWJlcgogIEBleHRlbmRzIEVtYmVyLkNvbXBvbmVudAogIEB1
        c2VzIEVtYmVyLlRleHRTdXBwb3J0CiovCkVtYmVyLlRleHRGaWVsZCA9IEVt
        YmVyLkNvbXBvbmVudC5leHRlbmQoRW1iZXIuVGV4dFN1cHBvcnQsCiAgLyoq
        IEBzY29wZSBFbWJlci5UZXh0RmllbGQucHJvdG90eXBlICovIHsKCiAgY2xh
        c3NOYW1lczogWydlbWJlci10ZXh0LWZpZWxkJ10sCiAgdGFnTmFtZTogImlu
        cHV0IiwKICBhdHRyaWJ1dGVCaW5kaW5nczogWyd0eXBlJywgJ3ZhbHVlJywg
        J3NpemUnLCAncGF0dGVybicsICduYW1lJ10sCgogIC8qKgogICAgVGhlIGB2
        YWx1ZWAgYXR0cmlidXRlIG9mIHRoZSBpbnB1dCBlbGVtZW50LiBBcyB0aGUg
        dXNlciBpbnB1dHMgdGV4dCwgdGhpcwogICAgcHJvcGVydHkgaXMgdXBkYXRl
        ZCBsaXZlLgoKICAgIEBwcm9wZXJ0eSB2YWx1ZQogICAgQHR5cGUgU3RyaW5n
        CiAgICBAZGVmYXVsdCAiIgogICovCiAgdmFsdWU6ICIiLAoKICAvKioKICAg
        IFRoZSBgdHlwZWAgYXR0cmlidXRlIG9mIHRoZSBpbnB1dCBlbGVtZW50LgoK
        ICAgIEBwcm9wZXJ0eSB0eXBlCiAgICBAdHlwZSBTdHJpbmcKICAgIEBkZWZh
        dWx0ICJ0ZXh0IgogICovCiAgdHlwZTogInRleHQiLAoKICAvKioKICAgIFRo
        ZSBgc2l6ZWAgb2YgdGhlIHRleHQgZmllbGQgaW4gY2hhcmFjdGVycy4KCiAg
        ICBAcHJvcGVydHkgc2l6ZQogICAgQHR5cGUgU3RyaW5nCiAgICBAZGVmYXVs
        dCBudWxsCiAgKi8KICBzaXplOiBudWxsLAoKICAvKioKICAgIFRoZSBgcGF0
        dGVybmAgdGhlIHBhdHRlcm4gYXR0cmlidXRlIG9mIGlucHV0IGVsZW1lbnQu
        CgogICAgQHByb3BlcnR5IHBhdHRlcm4KICAgIEB0eXBlIFN0cmluZwogICAg
        QGRlZmF1bHQgbnVsbAogICovCiAgcGF0dGVybjogbnVsbAp9KTsKCn0pKCk7
        CgoKCihmdW5jdGlvbigpIHsKLyoKQG1vZHVsZSBlbWJlcgpAc3VibW9kdWxl
        IGVtYmVyLWhhbmRsZWJhcnMKKi8KCnZhciBnZXQgPSBFbWJlci5nZXQsIHNl
        dCA9IEVtYmVyLnNldDsKCi8qCiAgQGNsYXNzIEJ1dHRvbgogIEBuYW1lc3Bh
        Y2UgRW1iZXIKICBAZXh0ZW5kcyBFbWJlci5WaWV3CiAgQHVzZXMgRW1iZXIu
        VGFyZ2V0QWN0aW9uU3VwcG9ydAogIEBkZXByZWNhdGVkCiovCkVtYmVyLkJ1
        dHRvbiA9IEVtYmVyLlZpZXcuZXh0ZW5kKEVtYmVyLlRhcmdldEFjdGlvblN1
        cHBvcnQsIHsKICBjbGFzc05hbWVzOiBbJ2VtYmVyLWJ1dHRvbiddLAogIGNs
        YXNzTmFtZUJpbmRpbmdzOiBbJ2lzQWN0aXZlJ10sCgogIHRhZ05hbWU6ICdi
        dXR0b24nLAoKICBwcm9wYWdhdGVFdmVudHM6IGZhbHNlLAoKICBhdHRyaWJ1
        dGVCaW5kaW5nczogWyd0eXBlJywgJ2Rpc2FibGVkJywgJ2hyZWYnLCAndGFi
        aW5kZXgnXSwKCiAgLyoKICAgIEBwcml2YXRlCgogICAgT3ZlcnJpZGVzIGBU
        YXJnZXRBY3Rpb25TdXBwb3J0YCdzIGB0YXJnZXRPYmplY3RgIGNvbXB1dGVk
        CiAgICBwcm9wZXJ0eSB0byB1c2UgSGFuZGxlYmFycy1zcGVjaWZpYyBwYXRo
        IHJlc29sdXRpb24uCgogICAgQHByb3BlcnR5IHRhcmdldE9iamVjdAogICov
        CiAgdGFyZ2V0T2JqZWN0OiBFbWJlci5jb21wdXRlZChmdW5jdGlvbigpIHsK
        ICAgIHZhciB0YXJnZXQgPSBnZXQodGhpcywgJ3RhcmdldCcpLAogICAgICAg
        IHJvb3QgPSBnZXQodGhpcywgJ2NvbnRleHQnKSwKICAgICAgICBkYXRhID0g
        Z2V0KHRoaXMsICd0ZW1wbGF0ZURhdGEnKTsKCiAgICBpZiAodHlwZW9mIHRh
        cmdldCAhPT0gJ3N0cmluZycpIHsgcmV0dXJuIHRhcmdldDsgfQoKICAgIHJl
        dHVybiBFbWJlci5IYW5kbGViYXJzLmdldChyb290LCB0YXJnZXQsIHsgZGF0
        YTogZGF0YSB9KTsKICB9KS5wcm9wZXJ0eSgndGFyZ2V0JyksCgogIC8vIERl
        ZmF1bHRzIHRvICdidXR0b24nIGlmIHRhZ05hbWUgaXMgJ2lucHV0JyBvciAn
        YnV0dG9uJwogIHR5cGU6IEVtYmVyLmNvbXB1dGVkKGZ1bmN0aW9uKGtleSkg
        ewogICAgdmFyIHRhZ05hbWUgPSB0aGlzLnRhZ05hbWU7CiAgICBpZiAodGFn
        TmFtZSA9PT0gJ2lucHV0JyB8fCB0YWdOYW1lID09PSAnYnV0dG9uJykgeyBy
        ZXR1cm4gJ2J1dHRvbic7IH0KICB9KSwKCiAgZGlzYWJsZWQ6IGZhbHNlLAoK
        ICAvLyBBbGxvdyAnYScgdGFncyB0byBhY3QgbGlrZSBidXR0b25zCiAgaHJl
        ZjogRW1iZXIuY29tcHV0ZWQoZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gdGhp
        cy50YWdOYW1lID09PSAnYScgPyAnIycgOiBudWxsOwogIH0pLAoKICBtb3Vz
        ZURvd246IGZ1bmN0aW9uKCkgewogICAgaWYgKCFnZXQodGhpcywgJ2Rpc2Fi
        bGVkJykpIHsKICAgICAgc2V0KHRoaXMsICdpc0FjdGl2ZScsIHRydWUpOwog
        ICAgICB0aGlzLl9tb3VzZURvd24gPSB0cnVlOwogICAgICB0aGlzLl9tb3Vz
        ZUVudGVyZWQgPSB0cnVlOwogICAgfQogICAgcmV0dXJuIGdldCh0aGlzLCAn
        cHJvcGFnYXRlRXZlbnRzJyk7CiAgfSwKCiAgbW91c2VMZWF2ZTogZnVuY3Rp
        b24oKSB7CiAgICBpZiAodGhpcy5fbW91c2VEb3duKSB7CiAgICAgIHNldCh0
        aGlzLCAnaXNBY3RpdmUnLCBmYWxzZSk7CiAgICAgIHRoaXMuX21vdXNlRW50
        ZXJlZCA9IGZhbHNlOwogICAgfQogIH0sCgogIG1vdXNlRW50ZXI6IGZ1bmN0
        aW9uKCkgewogICAgaWYgKHRoaXMuX21vdXNlRG93bikgewogICAgICBzZXQo
        dGhpcywgJ2lzQWN0aXZlJywgdHJ1ZSk7CiAgICAgIHRoaXMuX21vdXNlRW50
        ZXJlZCA9IHRydWU7CiAgICB9CiAgfSwKCiAgbW91c2VVcDogZnVuY3Rpb24o
        ZXZlbnQpIHsKICAgIGlmIChnZXQodGhpcywgJ2lzQWN0aXZlJykpIHsKICAg
        ICAgLy8gQWN0dWFsbHkgaW52b2tlIHRoZSBidXR0b24ncyB0YXJnZXQgYW5k
        IGFjdGlvbi4KICAgICAgLy8gVGhpcyBtZXRob2QgY29tZXMgZnJvbSB0aGUg
        RW1iZXIuVGFyZ2V0QWN0aW9uU3VwcG9ydCBtaXhpbi4KICAgICAgdGhpcy50
        cmlnZ2VyQWN0aW9uKCk7CiAgICAgIHNldCh0aGlzLCAnaXNBY3RpdmUnLCBm
        YWxzZSk7CiAgICB9CgogICAgdGhpcy5fbW91c2VEb3duID0gZmFsc2U7CiAg
        ICB0aGlzLl9tb3VzZUVudGVyZWQgPSBmYWxzZTsKICAgIHJldHVybiBnZXQo
        dGhpcywgJ3Byb3BhZ2F0ZUV2ZW50cycpOwogIH0sCgogIGtleURvd246IGZ1
        bmN0aW9uKGV2ZW50KSB7CiAgICAvLyBIYW5kbGUgc3BhY2Ugb3IgZW50ZXIK
        ICAgIGlmIChldmVudC5rZXlDb2RlID09PSAxMyB8fCBldmVudC5rZXlDb2Rl
        ID09PSAzMikgewogICAgICB0aGlzLm1vdXNlRG93bigpOwogICAgfQogIH0s
        CgogIGtleVVwOiBmdW5jdGlvbihldmVudCkgewogICAgLy8gSGFuZGxlIHNw
        YWNlIG9yIGVudGVyCiAgICBpZiAoZXZlbnQua2V5Q29kZSA9PT0gMTMgfHwg
        ZXZlbnQua2V5Q29kZSA9PT0gMzIpIHsKICAgICAgdGhpcy5tb3VzZVVwKCk7
        CiAgICB9CiAgfSwKCiAgLy8gVE9ETzogSGFuZGxlIHByb3BlciB0b3VjaCBi
        ZWhhdmlvci4gSW5jbHVkaW5nIHNob3VsZCBtYWtlIGluYWN0aXZlIHdoZW4K
        ICAvLyBmaW5nZXIgbW92ZXMgbW9yZSB0aGFuIDIweCBvdXRzaWRlIG9mIHRo
        ZSBlZGdlIG9mIHRoZSBidXR0b24gKHZzIG1vdXNlCiAgLy8gd2hpY2ggZ29l
        cyBpbmFjdGl2ZSBhcyBzb29uIGFzIG1vdXNlIGdvZXMgb3V0IG9mIGVkZ2Vz
        LikKCiAgdG91Y2hTdGFydDogZnVuY3Rpb24odG91Y2gpIHsKICAgIHJldHVy
        biB0aGlzLm1vdXNlRG93bih0b3VjaCk7CiAgfSwKCiAgdG91Y2hFbmQ6IGZ1
        bmN0aW9uKHRvdWNoKSB7CiAgICByZXR1cm4gdGhpcy5tb3VzZVVwKHRvdWNo
        KTsKICB9LAoKICBpbml0OiBmdW5jdGlvbigpIHsKICAgIEVtYmVyLmRlcHJl
        Y2F0ZSgiRW1iZXIuQnV0dG9uIGlzIGRlcHJlY2F0ZWQgYW5kIHdpbGwgYmUg
        cmVtb3ZlZCBmcm9tIGZ1dHVyZSByZWxlYXNlcy4gQ29uc2lkZXIgdXNpbmcg
        dGhlIGB7e2FjdGlvbn19YCBoZWxwZXIuIik7CiAgICB0aGlzLl9zdXBlcigp
        OwogIH0KfSk7Cgp9KSgpOwoKCgooZnVuY3Rpb24oKSB7Ci8qKgpAbW9kdWxl
        IGVtYmVyCkBzdWJtb2R1bGUgZW1iZXItaGFuZGxlYmFycwoqLwoKdmFyIGdl
        dCA9IEVtYmVyLmdldCwgc2V0ID0gRW1iZXIuc2V0OwoKLyoqCiAgVGhlIGlu
        dGVybmFsIGNsYXNzIHVzZWQgdG8gY3JlYXRlIHRleHRhcmVhIGVsZW1lbnQg
        d2hlbiB0aGUgYHt7dGV4dGFyZWF9fWAKICBoZWxwZXIgaXMgdXNlZC4KCiAg
        U2VlIFtoYW5kbGViYXJzLmhlbHBlcnMudGV4dGFyZWFdKC9hcGkvY2xhc3Nl
        cy9FbWJlci5IYW5kbGViYXJzLmhlbHBlcnMuaHRtbCNtZXRob2RfdGV4dGFy
        ZWEpICBmb3IgdXNhZ2UgZGV0YWlscy4KCiAgIyMgTGF5b3V0IGFuZCBMYXlv
        dXROYW1lIHByb3BlcnRpZXMKCiAgQmVjYXVzZSBIVE1MIGB0ZXh0YXJlYWAg
        ZWxlbWVudHMgZG8gbm90IGNvbnRhaW4gaW5uZXIgSFRNTCB0aGUgYGxheW91
        dGAgYW5kCiAgYGxheW91dE5hbWVgIHByb3BlcnRpZXMgd2lsbCBub3QgYmUg
        YXBwbGllZC4gU2VlIFtFbWJlci5WaWV3XSgvYXBpL2NsYXNzZXMvRW1iZXIu
        Vmlldy5odG1sKSdzCiAgbGF5b3V0IHNlY3Rpb24gZm9yIG1vcmUgaW5mb3Jt
        YXRpb24uCgogIEBjbGFzcyBUZXh0QXJlYQogIEBuYW1lc3BhY2UgRW1iZXIK
        ICBAZXh0ZW5kcyBFbWJlci5Db21wb25lbnQKICBAdXNlcyBFbWJlci5UZXh0
        U3VwcG9ydAoqLwpFbWJlci5UZXh0QXJlYSA9IEVtYmVyLkNvbXBvbmVudC5l
        eHRlbmQoRW1iZXIuVGV4dFN1cHBvcnQsIHsKICBjbGFzc05hbWVzOiBbJ2Vt
        YmVyLXRleHQtYXJlYSddLAoKICB0YWdOYW1lOiAidGV4dGFyZWEiLAogIGF0
        dHJpYnV0ZUJpbmRpbmdzOiBbJ3Jvd3MnLCAnY29scycsICduYW1lJ10sCiAg
        cm93czogbnVsbCwKICBjb2xzOiBudWxsLAoKICBfdXBkYXRlRWxlbWVudFZh
        bHVlOiBFbWJlci5vYnNlcnZlcigndmFsdWUnLCBmdW5jdGlvbigpIHsKICAg
        IC8vIFdlIGRvIHRoaXMgY2hlY2sgc28gY3Vyc29yIHBvc2l0aW9uIGRvZXNu
        J3QgZ2V0IGFmZmVjdGVkIGluIElFCiAgICB2YXIgdmFsdWUgPSBnZXQodGhp
        cywgJ3ZhbHVlJyksCiAgICAgICAgJGVsID0gdGhpcy4kKCk7CiAgICBpZiAo
        JGVsICYmIHZhbHVlICE9PSAkZWwudmFsKCkpIHsKICAgICAgJGVsLnZhbCh2
        YWx1ZSk7CiAgICB9CiAgfSksCgogIGluaXQ6IGZ1bmN0aW9uKCkgewogICAg
        dGhpcy5fc3VwZXIoKTsKICAgIHRoaXMub24oImRpZEluc2VydEVsZW1lbnQi
        LCB0aGlzLCB0aGlzLl91cGRhdGVFbGVtZW50VmFsdWUpOwogIH0KCn0pOwoK
        fSkoKTsKCgoKKGZ1bmN0aW9uKCkgewovKmpzaGludCBlcWVxZXE6ZmFsc2Ug
        Ki8KCi8qKgpAbW9kdWxlIGVtYmVyCkBzdWJtb2R1bGUgZW1iZXItaGFuZGxl
        YmFycwoqLwoKdmFyIHNldCA9IEVtYmVyLnNldCwKICAgIGdldCA9IEVtYmVy
        LmdldCwKICAgIGluZGV4T2YgPSBFbWJlci5FbnVtZXJhYmxlVXRpbHMuaW5k
        ZXhPZiwKICAgIGluZGV4ZXNPZiA9IEVtYmVyLkVudW1lcmFibGVVdGlscy5p
        bmRleGVzT2YsCiAgICBmb3JFYWNoID0gRW1iZXIuRW51bWVyYWJsZVV0aWxz
        LmZvckVhY2gsCiAgICByZXBsYWNlID0gRW1iZXIuRW51bWVyYWJsZVV0aWxz
        LnJlcGxhY2UsCiAgICBpc0FycmF5ID0gRW1iZXIuaXNBcnJheSwKICAgIHBy
        ZWNvbXBpbGVUZW1wbGF0ZSA9IEVtYmVyLkhhbmRsZWJhcnMuY29tcGlsZTsK
        CkVtYmVyLlNlbGVjdE9wdGlvbiA9IEVtYmVyLlZpZXcuZXh0ZW5kKHsKICB0
        YWdOYW1lOiAnb3B0aW9uJywKICBhdHRyaWJ1dGVCaW5kaW5nczogWyd2YWx1
        ZScsICdzZWxlY3RlZCddLAoKICBkZWZhdWx0VGVtcGxhdGU6IGZ1bmN0aW9u
        KGNvbnRleHQsIG9wdGlvbnMpIHsKICAgIG9wdGlvbnMgPSB7IGRhdGE6IG9w
        dGlvbnMuZGF0YSwgaGFzaDoge30gfTsKICAgIEVtYmVyLkhhbmRsZWJhcnMu
        aGVscGVycy5iaW5kLmNhbGwoY29udGV4dCwgInZpZXcubGFiZWwiLCBvcHRp
        b25zKTsKICB9LAoKICBpbml0OiBmdW5jdGlvbigpIHsKICAgIHRoaXMubGFi
        ZWxQYXRoRGlkQ2hhbmdlKCk7CiAgICB0aGlzLnZhbHVlUGF0aERpZENoYW5n
        ZSgpOwoKICAgIHRoaXMuX3N1cGVyKCk7CiAgfSwKCiAgc2VsZWN0ZWQ6IEVt
        YmVyLmNvbXB1dGVkKGZ1bmN0aW9uKCkgewogICAgdmFyIGNvbnRlbnQgPSBn
        ZXQodGhpcywgJ2NvbnRlbnQnKSwKICAgICAgICBzZWxlY3Rpb24gPSBnZXQo
        dGhpcywgJ3BhcmVudFZpZXcuc2VsZWN0aW9uJyk7CiAgICBpZiAoZ2V0KHRo
        aXMsICdwYXJlbnRWaWV3Lm11bHRpcGxlJykpIHsKICAgICAgcmV0dXJuIHNl
        bGVjdGlvbiAmJiBpbmRleE9mKHNlbGVjdGlvbiwgY29udGVudC52YWx1ZU9m
        KCkpID4gLTE7CiAgICB9IGVsc2UgewogICAgICAvLyBQcmltaXRpdmVzIGdl
        dCBwYXNzZWQgdGhyb3VnaCBiaW5kaW5ncyBhcyBvYmplY3RzLi4uIHNpbmNl
        CiAgICAgIC8vIGBuZXcgTnVtYmVyKDQpICE9PSA0YCwgd2UgdXNlIGA9PWAg
        YmVsb3cKICAgICAgcmV0dXJuIGNvbnRlbnQgPT0gc2VsZWN0aW9uOwogICAg
        fQogIH0pLnByb3BlcnR5KCdjb250ZW50JywgJ3BhcmVudFZpZXcuc2VsZWN0
        aW9uJyksCgogIGxhYmVsUGF0aERpZENoYW5nZTogRW1iZXIub2JzZXJ2ZXIo
        J3BhcmVudFZpZXcub3B0aW9uTGFiZWxQYXRoJywgZnVuY3Rpb24oKSB7CiAg
        ICB2YXIgbGFiZWxQYXRoID0gZ2V0KHRoaXMsICdwYXJlbnRWaWV3Lm9wdGlv
        bkxhYmVsUGF0aCcpOwoKICAgIGlmICghbGFiZWxQYXRoKSB7IHJldHVybjsg
        fQoKICAgIEVtYmVyLmRlZmluZVByb3BlcnR5KHRoaXMsICdsYWJlbCcsIEVt
        YmVyLmNvbXB1dGVkKGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gZ2V0KHRo
        aXMsIGxhYmVsUGF0aCk7CiAgICB9KS5wcm9wZXJ0eShsYWJlbFBhdGgpKTsK
        ICB9KSwKCiAgdmFsdWVQYXRoRGlkQ2hhbmdlOiBFbWJlci5vYnNlcnZlcign
        cGFyZW50Vmlldy5vcHRpb25WYWx1ZVBhdGgnLCBmdW5jdGlvbigpIHsKICAg
        IHZhciB2YWx1ZVBhdGggPSBnZXQodGhpcywgJ3BhcmVudFZpZXcub3B0aW9u
        VmFsdWVQYXRoJyk7CgogICAgaWYgKCF2YWx1ZVBhdGgpIHsgcmV0dXJuOyB9
        CgogICAgRW1iZXIuZGVmaW5lUHJvcGVydHkodGhpcywgJ3ZhbHVlJywgRW1i
        ZXIuY29tcHV0ZWQoZnVuY3Rpb24oKSB7CiAgICAgIHJldHVybiBnZXQodGhp
        cywgdmFsdWVQYXRoKTsKICAgIH0pLnByb3BlcnR5KHZhbHVlUGF0aCkpOwog
        IH0pCn0pOwoKRW1iZXIuU2VsZWN0T3B0Z3JvdXAgPSBFbWJlci5Db2xsZWN0
        aW9uVmlldy5leHRlbmQoewogIHRhZ05hbWU6ICdvcHRncm91cCcsCiAgYXR0
        cmlidXRlQmluZGluZ3M6IFsnbGFiZWwnXSwKCiAgc2VsZWN0aW9uQmluZGlu
        ZzogJ3BhcmVudFZpZXcuc2VsZWN0aW9uJywKICBtdWx0aXBsZUJpbmRpbmc6
        ICdwYXJlbnRWaWV3Lm11bHRpcGxlJywKICBvcHRpb25MYWJlbFBhdGhCaW5k
        aW5nOiAncGFyZW50Vmlldy5vcHRpb25MYWJlbFBhdGgnLAogIG9wdGlvblZh
        bHVlUGF0aEJpbmRpbmc6ICdwYXJlbnRWaWV3Lm9wdGlvblZhbHVlUGF0aCcs
        CgogIGl0ZW1WaWV3Q2xhc3NCaW5kaW5nOiAncGFyZW50Vmlldy5vcHRpb25W
        aWV3Jwp9KTsKCi8qKgogIFRoZSBgRW1iZXIuU2VsZWN0YCB2aWV3IGNsYXNz
        IHJlbmRlcnMgYQogIFtzZWxlY3RdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemls
        bGEub3JnL2VuL0hUTUwvRWxlbWVudC9zZWxlY3QpIEhUTUwgZWxlbWVudCwK
        ICBhbGxvd2luZyB0aGUgdXNlciB0byBjaG9vc2UgZnJvbSBhIGxpc3Qgb2Yg
        b3B0aW9ucy4KCiAgVGhlIHRleHQgYW5kIGB2YWx1ZWAgcHJvcGVydHkgb2Yg
        ZWFjaCBgPG9wdGlvbj5gIGVsZW1lbnQgd2l0aGluIHRoZQogIGA8c2VsZWN0
        PmAgZWxlbWVudCBhcmUgcG9wdWxhdGVkIGZyb20gdGhlIG9iamVjdHMgaW4g
        dGhlIGBFbGVtZW50LlNlbGVjdGAncwogIGBjb250ZW50YCBwcm9wZXJ0eS4g
        VGhlIHVuZGVybHlpbmcgZGF0YSBvYmplY3Qgb2YgdGhlIHNlbGVjdGVkIGA8
        b3B0aW9uPmAgaXMKICBzdG9yZWQgaW4gdGhlIGBFbGVtZW50LlNlbGVjdGAn
        cyBgdmFsdWVgIHByb3BlcnR5LgoKICAjIyBUaGUgQ29udGVudCBQcm9wZXJ0
        eSAoYXJyYXkgb2Ygc3RyaW5ncykKCiAgVGhlIHNpbXBsZXN0IHZlcnNpb24g
        b2YgYW4gYEVtYmVyLlNlbGVjdGAgdGFrZXMgYW4gYXJyYXkgb2Ygc3RyaW5n
        cyBhcyBpdHMKICBgY29udGVudGAgcHJvcGVydHkuIFRoZSBzdHJpbmcgd2ls
        bCBiZSB1c2VkIGFzIGJvdGggdGhlIGB2YWx1ZWAgcHJvcGVydHkgYW5kCiAg
        dGhlIGlubmVyIHRleHQgb2YgZWFjaCBgPG9wdGlvbj5gIGVsZW1lbnQgaW5z
        aWRlIHRoZSByZW5kZXJlZCBgPHNlbGVjdD5gLgoKICBFeGFtcGxlOgoKICBg
        YGBqYXZhc2NyaXB0CiAgQXBwLkFwcGxpY2F0aW9uQ29udHJvbGxlciA9IEVt
        YmVyLkNvbnRyb2xsZXIuZXh0ZW5kKHsKICAgIG5hbWVzOiBbIlllaHVkYSIs
        ICJUb20iXQogIH0pOwogIGBgYAoKICBgYGBoYW5kbGViYXJzCiAge3t2aWV3
        IEVtYmVyLlNlbGVjdCBjb250ZW50PW5hbWVzfX0KICBgYGAKCiAgV291bGQg
        cmVzdWx0IGluIHRoZSBmb2xsb3dpbmcgSFRNTDoKCiAgYGBgaHRtbAogIDxz
        ZWxlY3QgY2xhc3M9ImVtYmVyLXNlbGVjdCI+CiAgICA8b3B0aW9uIHZhbHVl
        PSJZZWh1ZGEiPlllaHVkYTwvb3B0aW9uPgogICAgPG9wdGlvbiB2YWx1ZT0i
        VG9tIj5Ub208L29wdGlvbj4KICA8L3NlbGVjdD4KICBgYGAKCiAgWW91IGNh
        biBjb250cm9sIHdoaWNoIGA8b3B0aW9uPmAgaXMgc2VsZWN0ZWQgdGhyb3Vn
        aCB0aGUgYEVtYmVyLlNlbGVjdGAncwogIGB2YWx1ZWAgcHJvcGVydHk6Cgog
        IGBgYGphdmFzY3JpcHQKICBBcHAuQXBwbGljYXRpb25Db250cm9sbGVyID0g
        RW1iZXIuQ29udHJvbGxlci5leHRlbmQoewogICAgc2VsZWN0ZWROYW1lOiAn
        VG9tJywKICAgIG5hbWVzOiBbIlllaHVkYSIsICJUb20iXQogIH0pOwogIGBg
        YAoKICBgYGBoYW5kbGViYXJzCiAge3t2aWV3IEVtYmVyLlNlbGVjdAogICAg
        ICAgICBjb250ZW50PW5hbWVzCiAgICAgICAgIHZhbHVlPXNlbGVjdGVkTmFt
        ZQogIH19CiAgYGBgCgogIFdvdWxkIHJlc3VsdCBpbiB0aGUgZm9sbG93aW5n
        IEhUTUwgd2l0aCB0aGUgYDxvcHRpb24+YCBmb3IgJ1RvbScgc2VsZWN0ZWQ6
        CgogIGBgYGh0bWwKICA8c2VsZWN0IGNsYXNzPSJlbWJlci1zZWxlY3QiPgog
        ICAgPG9wdGlvbiB2YWx1ZT0iWWVodWRhIj5ZZWh1ZGE8L29wdGlvbj4KICAg
        IDxvcHRpb24gdmFsdWU9IlRvbSIgc2VsZWN0ZWQ9InNlbGVjdGVkIj5Ub208
        L29wdGlvbj4KICA8L3NlbGVjdD4KICBgYGAKCiAgQSB1c2VyIGludGVyYWN0
        aW5nIHdpdGggdGhlIHJlbmRlcmVkIGA8c2VsZWN0PmAgdG8gY2hvb3NlICJZ
        ZWh1ZGEiIHdvdWxkCiAgdXBkYXRlIHRoZSB2YWx1ZSBvZiBgc2VsZWN0ZWRO
        YW1lYCB0byAiWWVodWRhIi4KCiAgIyMgVGhlIENvbnRlbnQgUHJvcGVydHkg
        KGFycmF5IG9mIE9iamVjdHMpCgogIEFuIGBFbWJlci5TZWxlY3RgIGNhbiBh
        bHNvIHRha2UgYW4gYXJyYXkgb2YgSmF2YVNjcmlwdCBvciBFbWJlciBvYmpl
        Y3RzIGFzCiAgaXRzIGBjb250ZW50YCBwcm9wZXJ0eS4KCiAgV2hlbiB1c2lu
        ZyBvYmplY3RzIHlvdSBuZWVkIHRvIHRlbGwgdGhlIGBFbWJlci5TZWxlY3Rg
        IHdoaWNoIHByb3BlcnR5IHNob3VsZAogIGJlIGFjY2Vzc2VkIG9uIGVhY2gg
        b2JqZWN0IHRvIHN1cHBseSB0aGUgYHZhbHVlYCBhdHRyaWJ1dGUgb2YgdGhl
        IGA8b3B0aW9uPmAKICBhbmQgd2hpY2ggcHJvcGVydHkgc2hvdWxkIGJlIHVz
        ZWQgdG8gc3VwcGx5IHRoZSBlbGVtZW50IHRleHQuCgogIFRoZSBgb3B0aW9u
        VmFsdWVQYXRoYCBvcHRpb24gaXMgdXNlZCB0byBzcGVjaWZ5IHRoZSBwYXRo
        IG9uIGVhY2ggb2JqZWN0IHRvCiAgdGhlIGRlc2lyZWQgcHJvcGVydHkgZm9y
        IHRoZSBgdmFsdWVgIGF0dHJpYnV0ZS4gVGhlIGBvcHRpb25MYWJlbFBhdGhg
        CiAgc3BlY2lmaWVzIHRoZSBwYXRoIG9uIGVhY2ggb2JqZWN0IHRvIHRoZSBk
        ZXNpcmVkIHByb3BlcnR5IGZvciB0aGUKICBlbGVtZW50J3MgdGV4dC4gQm90
        aCBwYXRocyBtdXN0IHJlZmVyZW5jZSBlYWNoIG9iamVjdCBpdHNlbGYgYXMg
        YGNvbnRlbnRgOgoKICBgYGBqYXZhc2NyaXB0CiAgQXBwLkFwcGxpY2F0aW9u
        Q29udHJvbGxlciA9IEVtYmVyLkNvbnRyb2xsZXIuZXh0ZW5kKHsKICAgIHBy
        b2dyYW1tZXJzOiBbCiAgICAgIHtmaXJzdE5hbWU6ICJZZWh1ZGEiLCBpZDog
        MX0sCiAgICAgIHtmaXJzdE5hbWU6ICJUb20iLCAgICBpZDogMn0KICAgIF0K
        ICB9KTsKICBgYGAKCiAgYGBgaGFuZGxlYmFycwogIHt7dmlldyBFbWJlci5T
        ZWxlY3QKICAgICAgICAgY29udGVudD1wcm9ncmFtbWVycwogICAgICAgICBv
        cHRpb25WYWx1ZVBhdGg9ImNvbnRlbnQuaWQiCiAgICAgICAgIG9wdGlvbkxh
        YmVsUGF0aD0iY29udGVudC5maXJzdE5hbWUifX0KICBgYGAKCiAgV291bGQg
        cmVzdWx0IGluIHRoZSBmb2xsb3dpbmcgSFRNTDoKCiAgYGBgaHRtbAogIDxz
        ZWxlY3QgY2xhc3M9ImVtYmVyLXNlbGVjdCI+CiAgICA8b3B0aW9uIHZhbHVl
        PSIxIj5ZZWh1ZGE8L29wdGlvbj4KICAgIDxvcHRpb24gdmFsdWU9IjIiPlRv
        bTwvb3B0aW9uPgogIDwvc2VsZWN0PgogIGBgYAoKICBUaGUgYHZhbHVlYCBh
        dHRyaWJ1dGUgb2YgdGhlIHNlbGVjdGVkIGA8b3B0aW9uPmAgd2l0aGluIGFu
        IGBFbWJlci5TZWxlY3RgCiAgY2FuIGJlIGJvdW5kIHRvIGEgcHJvcGVydHkg
        b24gYW5vdGhlciBvYmplY3Q6CgogIGBgYGphdmFzY3JpcHQKICBBcHAuQXBw
        bGljYXRpb25Db250cm9sbGVyID0gRW1iZXIuQ29udHJvbGxlci5leHRlbmQo
        ewogICAgcHJvZ3JhbW1lcnM6IFsKICAgICAge2ZpcnN0TmFtZTogIlllaHVk
        YSIsIGlkOiAxfSwKICAgICAge2ZpcnN0TmFtZTogIlRvbSIsICAgIGlkOiAy
        fQogICAgXSwKICAgIGN1cnJlbnRQcm9ncmFtbWVyOiB7CiAgICAgIGlkOiAy
        CiAgICB9CiAgfSk7CiAgYGBgCgogIGBgYGhhbmRsZWJhcnMKICB7e3ZpZXcg
        RW1iZXIuU2VsZWN0CiAgICAgICAgIGNvbnRlbnQ9cHJvZ3JhbW1lcnMKICAg
        ICAgICAgb3B0aW9uVmFsdWVQYXRoPSJjb250ZW50LmlkIgogICAgICAgICBv
        cHRpb25MYWJlbFBhdGg9ImNvbnRlbnQuZmlyc3ROYW1lIgogICAgICAgICB2
        YWx1ZT1jdXJyZW50UHJvZ3JhbW1lci5pZH19CiAgYGBgCgogIFdvdWxkIHJl
        c3VsdCBpbiB0aGUgZm9sbG93aW5nIEhUTUwgd2l0aCBhIHNlbGVjdGVkIG9w
        dGlvbjoKCiAgYGBgaHRtbAogIDxzZWxlY3QgY2xhc3M9ImVtYmVyLXNlbGVj
        dCI+CiAgICA8b3B0aW9uIHZhbHVlPSIxIj5ZZWh1ZGE8L29wdGlvbj4KICAg
        IDxvcHRpb24gdmFsdWU9IjIiIHNlbGVjdGVkPSJzZWxlY3RlZCI+VG9tPC9v
        cHRpb24+CiAgPC9zZWxlY3Q+CiAgYGBgCgogIEludGVyYWN0aW5nIHdpdGgg
        dGhlIHJlbmRlcmVkIGVsZW1lbnQgYnkgc2VsZWN0aW5nIHRoZSBmaXJzdCBv
        cHRpb24KICAoJ1llaHVkYScpIHdpbGwgdXBkYXRlIHRoZSBgaWRgIG9mIGBj
        dXJyZW50UHJvZ3JhbW1lcmAKICB0byBtYXRjaCB0aGUgYHZhbHVlYCBwcm9w
        ZXJ0eSBvZiB0aGUgbmV3bHkgc2VsZWN0ZWQgYDxvcHRpb24+YC4KCiAgQWx0
        ZXJuYXRpdmVseSwgeW91IGNhbiBjb250cm9sIHNlbGVjdGlvbiB0aHJvdWdo
        IHRoZSB1bmRlcmx5aW5nIG9iamVjdHMKICB1c2VkIHRvIHJlbmRlciBlYWNo
        IG9iamVjdCBieSBiaW5kaW5nIHRoZSBgc2VsZWN0aW9uYCBvcHRpb24uIFdo
        ZW4gdGhlIHNlbGVjdGVkCiAgYDxvcHRpb24+YCBpcyBjaGFuZ2VkLCB0aGUg
        cHJvcGVydHkgcGF0aCBwcm92aWRlZCB0byBgc2VsZWN0aW9uYAogIHdpbGwg
        YmUgdXBkYXRlZCB0byBtYXRjaCB0aGUgY29udGVudCBvYmplY3Qgb2YgdGhl
        IHJlbmRlcmVkIGA8b3B0aW9uPmAKICBlbGVtZW50OgoKICBgYGBqYXZhc2Ny
        aXB0CiAgQXBwLkFwcGxpY2F0aW9uQ29udHJvbGxlciA9IEVtYmVyLkNvbnRy
        b2xsZXIuZXh0ZW5kKHsKICAgIHNlbGVjdGVkUGVyc29uOiBudWxsLAogICAg
        cHJvZ3JhbW1lcnM6IFsKICAgICAge2ZpcnN0TmFtZTogIlllaHVkYSIsIGlk
        OiAxfSwKICAgICAge2ZpcnN0TmFtZTogIlRvbSIsICAgIGlkOiAyfQogICAg
        XQogIH0pOwogIGBgYAoKICBgYGBoYW5kbGViYXJzCiAge3t2aWV3IEVtYmVy
        LlNlbGVjdAogICAgICAgICBjb250ZW50PXByb2dyYW1tZXJzCiAgICAgICAg
        IG9wdGlvblZhbHVlUGF0aD0iY29udGVudC5pZCIKICAgICAgICAgb3B0aW9u
        TGFiZWxQYXRoPSJjb250ZW50LmZpcnN0TmFtZSIKICAgICAgICAgc2VsZWN0
        aW9uPXNlbGVjdGVkUGVyc29ufX0KICBgYGAKCiAgV291bGQgcmVzdWx0IGlu
        IHRoZSBmb2xsb3dpbmcgSFRNTCB3aXRoIGEgc2VsZWN0ZWQgb3B0aW9uOgoK
        ICBgYGBodG1sCiAgPHNlbGVjdCBjbGFzcz0iZW1iZXItc2VsZWN0Ij4KICAg
        IDxvcHRpb24gdmFsdWU9IjEiPlllaHVkYTwvb3B0aW9uPgogICAgPG9wdGlv
        biB2YWx1ZT0iMiIgc2VsZWN0ZWQ9InNlbGVjdGVkIj5Ub208L29wdGlvbj4K
        ICA8L3NlbGVjdD4KICBgYGAKCiAgSW50ZXJhY3Rpbmcgd2l0aCB0aGUgcmVu
        ZGVyZWQgZWxlbWVudCBieSBzZWxlY3RpbmcgdGhlIGZpcnN0IG9wdGlvbgog
        ICgnWWVodWRhJykgd2lsbCB1cGRhdGUgdGhlIGBzZWxlY3RlZFBlcnNvbmAg
        dG8gbWF0Y2ggdGhlIG9iamVjdCBvZgogIHRoZSBuZXdseSBzZWxlY3RlZCBg
        PG9wdGlvbj5gLiBJbiB0aGlzIGNhc2UgaXQgaXMgdGhlIGZpcnN0IG9iamVj
        dAogIGluIHRoZSBgcHJvZ3JhbW1lcnNgCgogICMjIFN1cHBseWluZyBhIFBy
        b21wdAoKICBBIGBudWxsYCB2YWx1ZSBmb3IgdGhlIGBFbWJlci5TZWxlY3Rg
        J3MgYHZhbHVlYCBvciBgc2VsZWN0aW9uYCBwcm9wZXJ0eQogIHJlc3VsdHMg
        aW4gdGhlcmUgYmVpbmcgbm8gYDxvcHRpb24+YCB3aXRoIGEgYHNlbGVjdGVk
        YCBhdHRyaWJ1dGU6CgogIGBgYGphdmFzY3JpcHQKICBBcHAuQXBwbGljYXRp
        b25Db250cm9sbGVyID0gRW1iZXIuQ29udHJvbGxlci5leHRlbmQoewogICAg
        c2VsZWN0ZWRQcm9ncmFtbWVyOiBudWxsLAogICAgcHJvZ3JhbW1lcnM6IFsK
        ICAgICAgIlllaHVkYSIsCiAgICAgICJUb20iCiAgICBdCiAgfSk7CiAgYGBg
        CgogIGBgYCBoYW5kbGViYXJzCiAge3t2aWV3IEVtYmVyLlNlbGVjdAogICAg
        ICAgICBjb250ZW50PXByb2dyYW1tZXJzCiAgICAgICAgIHZhbHVlPXNlbGVj
        dGVkUHJvZ3JhbW1lcgogIH19CiAgYGBgCgogIFdvdWxkIHJlc3VsdCBpbiB0
        aGUgZm9sbG93aW5nIEhUTUw6CgogIGBgYGh0bWwKICA8c2VsZWN0IGNsYXNz
        PSJlbWJlci1zZWxlY3QiPgogICAgPG9wdGlvbiB2YWx1ZT0iWWVodWRhIj5Z
        ZWh1ZGE8L29wdGlvbj4KICAgIDxvcHRpb24gdmFsdWU9IlRvbSI+VG9tPC9v
        cHRpb24+CiAgPC9zZWxlY3Q+CiAgYGBgCgogIEFsdGhvdWdoIGBzZWxlY3Rl
        ZFByb2dyYW1tZXJgIGlzIGBudWxsYCBhbmQgbm8gYDxvcHRpb24+YAogIGhh
        cyBhIGBzZWxlY3RlZGAgYXR0cmlidXRlIHRoZSByZW5kZXJlZCBIVE1MIHdp
        bGwgZGlzcGxheSB0aGUKICBmaXJzdCBpdGVtIGFzIHRob3VnaCBpdCB3ZXJl
        IHNlbGVjdGVkLiBZb3UgY2FuIHN1cHBseSBhIHN0cmluZwogIHZhbHVlIGZv
        ciB0aGUgYEVtYmVyLlNlbGVjdGAgdG8gZGlzcGxheSB3aGVuIHRoZXJlIGlz
        IG5vIHNlbGVjdGlvbgogIHdpdGggdGhlIGBwcm9tcHRgIG9wdGlvbjoKCiAg
        YGBgamF2YXNjcmlwdAogIEFwcC5BcHBsaWNhdGlvbkNvbnRyb2xsZXIgPSBF
        bWJlci5Db250cm9sbGVyLmV4dGVuZCh7CiAgICBzZWxlY3RlZFByb2dyYW1t
        ZXI6IG51bGwsCiAgICBwcm9ncmFtbWVyczogWwogICAgICAiWWVodWRhIiwK
        ICAgICAgIlRvbSIKICAgIF0KICB9KTsKICBgYGAKCiAgYGBgaGFuZGxlYmFy
        cwogIHt7dmlldyBFbWJlci5TZWxlY3QKICAgICAgICAgY29udGVudD1wcm9n
        cmFtbWVycwogICAgICAgICB2YWx1ZT1zZWxlY3RlZFByb2dyYW1tZXIKICAg
        ICAgICAgcHJvbXB0PSJQbGVhc2Ugc2VsZWN0IGEgbmFtZSIKICB9fQogIGBg
        YAoKICBXb3VsZCByZXN1bHQgaW4gdGhlIGZvbGxvd2luZyBIVE1MOgoKICBg
        YGBodG1sCiAgPHNlbGVjdCBjbGFzcz0iZW1iZXItc2VsZWN0Ij4KICAgIDxv
        cHRpb24+UGxlYXNlIHNlbGVjdCBhIG5hbWU8L29wdGlvbj4KICAgIDxvcHRp
        b24gdmFsdWU9IlllaHVkYSI+WWVodWRhPC9vcHRpb24+CiAgICA8b3B0aW9u
        IHZhbHVlPSJUb20iPlRvbTwvb3B0aW9uPgogIDwvc2VsZWN0PgogIGBgYAoK
        ICBAY2xhc3MgU2VsZWN0CiAgQG5hbWVzcGFjZSBFbWJlcgogIEBleHRlbmRz
        IEVtYmVyLlZpZXcKKi8KRW1iZXIuU2VsZWN0ID0gRW1iZXIuVmlldy5leHRl
        bmQoCiAgLyoqIEBzY29wZSBFbWJlci5TZWxlY3QucHJvdG90eXBlICovIHsK
        CiAgdGFnTmFtZTogJ3NlbGVjdCcsCiAgY2xhc3NOYW1lczogWydlbWJlci1z
        ZWxlY3QnXSwKICBkZWZhdWx0VGVtcGxhdGU6IEVtYmVyLkhhbmRsZWJhcnMu
        dGVtcGxhdGUoZnVuY3Rpb24gYW5vbnltb3VzKEhhbmRsZWJhcnMsZGVwdGgw
        LGhlbHBlcnMscGFydGlhbHMsZGF0YSkgewp0aGlzLmNvbXBpbGVySW5mbyA9
        IFs0LCc+PSAxLjAuMCddOwpoZWxwZXJzID0gdGhpcy5tZXJnZShoZWxwZXJz
        LCBFbWJlci5IYW5kbGViYXJzLmhlbHBlcnMpOyBkYXRhID0gZGF0YSB8fCB7
        fTsKICB2YXIgYnVmZmVyID0gJycsIHN0YWNrMSwgaGFzaFR5cGVzLCBoYXNo
        Q29udGV4dHMsIGVzY2FwZUV4cHJlc3Npb249dGhpcy5lc2NhcGVFeHByZXNz
        aW9uLCBzZWxmPXRoaXM7CgpmdW5jdGlvbiBwcm9ncmFtMShkZXB0aDAsZGF0
        YSkgewogIAogIHZhciBidWZmZXIgPSAnJywgaGFzaFR5cGVzLCBoYXNoQ29u
        dGV4dHM7CiAgZGF0YS5idWZmZXIucHVzaCgiPG9wdGlvbiB2YWx1ZT1cIlwi
        PiIpOwogIGhhc2hUeXBlcyA9IHt9OwogIGhhc2hDb250ZXh0cyA9IHt9Owog
        IGRhdGEuYnVmZmVyLnB1c2goZXNjYXBlRXhwcmVzc2lvbihoZWxwZXJzLl90
        cmlhZ2VNdXN0YWNoZS5jYWxsKGRlcHRoMCwgInZpZXcucHJvbXB0Iiwge2hh
        c2g6e30sY29udGV4dHM6W2RlcHRoMF0sdHlwZXM6WyJJRCJdLGhhc2hDb250
        ZXh0czpoYXNoQ29udGV4dHMsaGFzaFR5cGVzOmhhc2hUeXBlcyxkYXRhOmRh
        dGF9KSkpOwogIGRhdGEuYnVmZmVyLnB1c2goIjwvb3B0aW9uPiIpOwogIHJl
        dHVybiBidWZmZXI7CiAgfQoKZnVuY3Rpb24gcHJvZ3JhbTMoZGVwdGgwLGRh
        dGEpIHsKICAKICB2YXIgc3RhY2sxLCBoYXNoVHlwZXMsIGhhc2hDb250ZXh0
        czsKICBoYXNoVHlwZXMgPSB7fTsKICBoYXNoQ29udGV4dHMgPSB7fTsKICBz
        dGFjazEgPSBoZWxwZXJzLmVhY2guY2FsbChkZXB0aDAsICJ2aWV3Lmdyb3Vw
        ZWRDb250ZW50Iiwge2hhc2g6e30saW52ZXJzZTpzZWxmLm5vb3AsZm46c2Vs
        Zi5wcm9ncmFtKDQsIHByb2dyYW00LCBkYXRhKSxjb250ZXh0czpbZGVwdGgw
        XSx0eXBlczpbIklEIl0saGFzaENvbnRleHRzOmhhc2hDb250ZXh0cyxoYXNo
        VHlwZXM6aGFzaFR5cGVzLGRhdGE6ZGF0YX0pOwogIGlmKHN0YWNrMSB8fCBz
        dGFjazEgPT09IDApIHsgZGF0YS5idWZmZXIucHVzaChzdGFjazEpOyB9CiAg
        ZWxzZSB7IGRhdGEuYnVmZmVyLnB1c2goJycpOyB9CiAgfQpmdW5jdGlvbiBw
        cm9ncmFtNChkZXB0aDAsZGF0YSkgewogIAogIHZhciBoYXNoQ29udGV4dHMs
        IGhhc2hUeXBlczsKICBoYXNoQ29udGV4dHMgPSB7J2NvbnRlbnQnOiBkZXB0
        aDAsJ2xhYmVsJzogZGVwdGgwfTsKICBoYXNoVHlwZXMgPSB7J2NvbnRlbnQn
        OiAiSUQiLCdsYWJlbCc6ICJJRCJ9OwogIGRhdGEuYnVmZmVyLnB1c2goZXNj
        YXBlRXhwcmVzc2lvbihoZWxwZXJzLnZpZXcuY2FsbChkZXB0aDAsICJ2aWV3
        Lmdyb3VwVmlldyIsIHtoYXNoOnsKICAgICdjb250ZW50JzogKCJjb250ZW50
        IiksCiAgICAnbGFiZWwnOiAoImxhYmVsIikKICB9LGNvbnRleHRzOltkZXB0
        aDBdLHR5cGVzOlsiSUQiXSxoYXNoQ29udGV4dHM6aGFzaENvbnRleHRzLGhh
        c2hUeXBlczpoYXNoVHlwZXMsZGF0YTpkYXRhfSkpKTsKICB9CgpmdW5jdGlv
        biBwcm9ncmFtNihkZXB0aDAsZGF0YSkgewogIAogIHZhciBzdGFjazEsIGhh
        c2hUeXBlcywgaGFzaENvbnRleHRzOwogIGhhc2hUeXBlcyA9IHt9OwogIGhh
        c2hDb250ZXh0cyA9IHt9OwogIHN0YWNrMSA9IGhlbHBlcnMuZWFjaC5jYWxs
        KGRlcHRoMCwgInZpZXcuY29udGVudCIsIHtoYXNoOnt9LGludmVyc2U6c2Vs
        Zi5ub29wLGZuOnNlbGYucHJvZ3JhbSg3LCBwcm9ncmFtNywgZGF0YSksY29u
        dGV4dHM6W2RlcHRoMF0sdHlwZXM6WyJJRCJdLGhhc2hDb250ZXh0czpoYXNo
        Q29udGV4dHMsaGFzaFR5cGVzOmhhc2hUeXBlcyxkYXRhOmRhdGF9KTsKICBp
        ZihzdGFjazEgfHwgc3RhY2sxID09PSAwKSB7IGRhdGEuYnVmZmVyLnB1c2go
        c3RhY2sxKTsgfQogIGVsc2UgeyBkYXRhLmJ1ZmZlci5wdXNoKCcnKTsgfQog
        IH0KZnVuY3Rpb24gcHJvZ3JhbTcoZGVwdGgwLGRhdGEpIHsKICAKICB2YXIg
        aGFzaENvbnRleHRzLCBoYXNoVHlwZXM7CiAgaGFzaENvbnRleHRzID0geydj
        b250ZW50JzogZGVwdGgwfTsKICBoYXNoVHlwZXMgPSB7J2NvbnRlbnQnOiAi
        SUQifTsKICBkYXRhLmJ1ZmZlci5wdXNoKGVzY2FwZUV4cHJlc3Npb24oaGVs
        cGVycy52aWV3LmNhbGwoZGVwdGgwLCAidmlldy5vcHRpb25WaWV3Iiwge2hh
        c2g6ewogICAgJ2NvbnRlbnQnOiAoIiIpCiAgfSxjb250ZXh0czpbZGVwdGgw
        XSx0eXBlczpbIklEIl0saGFzaENvbnRleHRzOmhhc2hDb250ZXh0cyxoYXNo
        VHlwZXM6aGFzaFR5cGVzLGRhdGE6ZGF0YX0pKSk7CiAgfQoKICBoYXNoVHlw
        ZXMgPSB7fTsKICBoYXNoQ29udGV4dHMgPSB7fTsKICBzdGFjazEgPSBoZWxw
        ZXJzWydpZiddLmNhbGwoZGVwdGgwLCAidmlldy5wcm9tcHQiLCB7aGFzaDp7
        fSxpbnZlcnNlOnNlbGYubm9vcCxmbjpzZWxmLnByb2dyYW0oMSwgcHJvZ3Jh
        bTEsIGRhdGEpLGNvbnRleHRzOltkZXB0aDBdLHR5cGVzOlsiSUQiXSxoYXNo
        Q29udGV4dHM6aGFzaENvbnRleHRzLGhhc2hUeXBlczpoYXNoVHlwZXMsZGF0
        YTpkYXRhfSk7CiAgaWYoc3RhY2sxIHx8IHN0YWNrMSA9PT0gMCkgeyBkYXRh
        LmJ1ZmZlci5wdXNoKHN0YWNrMSk7IH0KICBoYXNoVHlwZXMgPSB7fTsKICBo
        YXNoQ29udGV4dHMgPSB7fTsKICBzdGFjazEgPSBoZWxwZXJzWydpZiddLmNh
        bGwoZGVwdGgwLCAidmlldy5vcHRpb25Hcm91cFBhdGgiLCB7aGFzaDp7fSxp
        bnZlcnNlOnNlbGYucHJvZ3JhbSg2LCBwcm9ncmFtNiwgZGF0YSksZm46c2Vs
        Zi5wcm9ncmFtKDMsIHByb2dyYW0zLCBkYXRhKSxjb250ZXh0czpbZGVwdGgw
        XSx0eXBlczpbIklEIl0saGFzaENvbnRleHRzOmhhc2hDb250ZXh0cyxoYXNo
        VHlwZXM6aGFzaFR5cGVzLGRhdGE6ZGF0YX0pOwogIGlmKHN0YWNrMSB8fCBz
        dGFjazEgPT09IDApIHsgZGF0YS5idWZmZXIucHVzaChzdGFjazEpOyB9CiAg
        cmV0dXJuIGJ1ZmZlcjsKICAKfSksCiAgYXR0cmlidXRlQmluZGluZ3M6IFsn
        bXVsdGlwbGUnLCAnZGlzYWJsZWQnLCAndGFiaW5kZXgnLCAnbmFtZSddLAoK
        ICAvKioKICAgIFRoZSBgbXVsdGlwbGVgIGF0dHJpYnV0ZSBvZiB0aGUgc2Vs
        ZWN0IGVsZW1lbnQuIEluZGljYXRlcyB3aGV0aGVyIG11bHRpcGxlCiAgICBv
        cHRpb25zIGNhbiBiZSBzZWxlY3RlZC4KCiAgICBAcHJvcGVydHkgbXVsdGlw
        bGUKICAgIEB0eXBlIEJvb2xlYW4KICAgIEBkZWZhdWx0IGZhbHNlCiAgKi8K
        ICBtdWx0aXBsZTogZmFsc2UsCgogIC8qKgogICAgVGhlIGBkaXNhYmxlZGAg
        YXR0cmlidXRlIG9mIHRoZSBzZWxlY3QgZWxlbWVudC4gSW5kaWNhdGVzIHdo
        ZXRoZXIKICAgIHRoZSBlbGVtZW50IGlzIGRpc2FibGVkIGZyb20gaW50ZXJh
        Y3Rpb25zLgoKICAgIEBwcm9wZXJ0eSBkaXNhYmxlZAogICAgQHR5cGUgQm9v
        bGVhbgogICAgQGRlZmF1bHQgZmFsc2UKICAqLwogIGRpc2FibGVkOiBmYWxz
        ZSwKCiAgLyoqCiAgICBUaGUgbGlzdCBvZiBvcHRpb25zLgoKICAgIElmIGBv
        cHRpb25MYWJlbFBhdGhgIGFuZCBgb3B0aW9uVmFsdWVQYXRoYCBhcmUgbm90
        IG92ZXJyaWRkZW4sIHRoaXMgc2hvdWxkCiAgICBiZSBhIGxpc3Qgb2Ygc3Ry
        aW5ncywgd2hpY2ggd2lsbCBzZXJ2ZSBzaW11bHRhbmVvdXNseSBhcyBsYWJl
        bHMgYW5kIHZhbHVlcy4KCiAgICBPdGhlcndpc2UsIHRoaXMgc2hvdWxkIGJl
        IGEgbGlzdCBvZiBvYmplY3RzLiBGb3IgaW5zdGFuY2U6CgogICAgYGBgamF2
        YXNjcmlwdAogICAgRW1iZXIuU2VsZWN0LmNyZWF0ZSh7CiAgICAgIGNvbnRl
        bnQ6IEVtYmVyLkEoWwogICAgICAgICAgeyBpZDogMSwgZmlyc3ROYW1lOiAn
        WWVodWRhJyB9LAogICAgICAgICAgeyBpZDogMiwgZmlyc3ROYW1lOiAnVG9t
        JyB9CiAgICAgICAgXSksCiAgICAgIG9wdGlvbkxhYmVsUGF0aDogJ2NvbnRl
        bnQuZmlyc3ROYW1lJywKICAgICAgb3B0aW9uVmFsdWVQYXRoOiAnY29udGVu
        dC5pZCcKICAgIH0pOwogICAgYGBgCgogICAgQHByb3BlcnR5IGNvbnRlbnQK
        ICAgIEB0eXBlIEFycmF5CiAgICBAZGVmYXVsdCBudWxsCiAgKi8KICBjb250
        ZW50OiBudWxsLAoKICAvKioKICAgIFdoZW4gYG11bHRpcGxlYCBpcyBgZmFs
        c2VgLCB0aGUgZWxlbWVudCBvZiBgY29udGVudGAgdGhhdCBpcyBjdXJyZW50
        bHkKICAgIHNlbGVjdGVkLCBpZiBhbnkuCgogICAgV2hlbiBgbXVsdGlwbGVg
        IGlzIGB0cnVlYCwgYW4gYXJyYXkgb2Ygc3VjaCBlbGVtZW50cy4KCiAgICBA
        cHJvcGVydHkgc2VsZWN0aW9uCiAgICBAdHlwZSBPYmplY3Qgb3IgQXJyYXkK
        ICAgIEBkZWZhdWx0IG51bGwKICAqLwogIHNlbGVjdGlvbjogbnVsbCwKCiAg
        LyoqCiAgICBJbiBzaW5nbGUgc2VsZWN0aW9uIG1vZGUgKHdoZW4gYG11bHRp
        cGxlYCBpcyBgZmFsc2VgKSwgdmFsdWUgY2FuIGJlIHVzZWQgdG8KICAgIGdl
        dCB0aGUgY3VycmVudCBzZWxlY3Rpb24ncyB2YWx1ZSBvciBzZXQgdGhlIHNl
        bGVjdGlvbiBieSBpdCdzIHZhbHVlLgoKICAgIEl0IGlzIG5vdCBjdXJyZW50
        bHkgc3VwcG9ydGVkIGluIG11bHRpcGxlIHNlbGVjdGlvbiBtb2RlLgoKICAg
        IEBwcm9wZXJ0eSB2YWx1ZQogICAgQHR5cGUgU3RyaW5nCiAgICBAZGVmYXVs
        dCBudWxsCiAgKi8KICB2YWx1ZTogRW1iZXIuY29tcHV0ZWQoZnVuY3Rpb24o
        a2V5LCB2YWx1ZSkgewogICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDIp
        IHsgcmV0dXJuIHZhbHVlOyB9CiAgICB2YXIgdmFsdWVQYXRoID0gZ2V0KHRo
        aXMsICdvcHRpb25WYWx1ZVBhdGgnKS5yZXBsYWNlKC9eY29udGVudFwuPy8s
        ICcnKTsKICAgIHJldHVybiB2YWx1ZVBhdGggPyBnZXQodGhpcywgJ3NlbGVj
        dGlvbi4nICsgdmFsdWVQYXRoKSA6IGdldCh0aGlzLCAnc2VsZWN0aW9uJyk7
        CiAgfSkucHJvcGVydHkoJ3NlbGVjdGlvbicpLAoKICAvKioKICAgIElmIGdp
        dmVuLCBhIHRvcC1tb3N0IGR1bW15IG9wdGlvbiB3aWxsIGJlIHJlbmRlcmVk
        IHRvIHNlcnZlIGFzIGEgdXNlcgogICAgcHJvbXB0LgoKICAgIEBwcm9wZXJ0
        eSBwcm9tcHQKICAgIEB0eXBlIFN0cmluZwogICAgQGRlZmF1bHQgbnVsbAog
        ICovCiAgcHJvbXB0OiBudWxsLAoKICAvKioKICAgIFRoZSBwYXRoIG9mIHRo
        ZSBvcHRpb24gbGFiZWxzLiBTZWUgW2NvbnRlbnRdKC9hcGkvY2xhc3Nlcy9F
        bWJlci5TZWxlY3QuaHRtbCNwcm9wZXJ0eV9jb250ZW50KS4KCiAgICBAcHJv
        cGVydHkgb3B0aW9uTGFiZWxQYXRoCiAgICBAdHlwZSBTdHJpbmcKICAgIEBk
        ZWZhdWx0ICdjb250ZW50JwogICovCiAgb3B0aW9uTGFiZWxQYXRoOiAnY29u
        dGVudCcsCgogIC8qKgogICAgVGhlIHBhdGggb2YgdGhlIG9wdGlvbiB2YWx1
        ZXMuIFNlZSBbY29udGVudF0oL2FwaS9jbGFzc2VzL0VtYmVyLlNlbGVjdC5o
        dG1sI3Byb3BlcnR5X2NvbnRlbnQpLgoKICAgIEBwcm9wZXJ0eSBvcHRpb25W
        YWx1ZVBhdGgKICAgIEB0eXBlIFN0cmluZwogICAgQGRlZmF1bHQgJ2NvbnRl
        bnQnCiAgKi8KICBvcHRpb25WYWx1ZVBhdGg6ICdjb250ZW50JywKCiAgLyoq
        CiAgICBUaGUgcGF0aCBvZiB0aGUgb3B0aW9uIGdyb3VwLgogICAgV2hlbiB0
        aGlzIHByb3BlcnR5IGlzIHVzZWQsIGBjb250ZW50YCBzaG91bGQgYmUgc29y
        dGVkIGJ5IGBvcHRpb25Hcm91cFBhdGhgLgoKICAgIEBwcm9wZXJ0eSBvcHRp
        b25Hcm91cFBhdGgKICAgIEB0eXBlIFN0cmluZwogICAgQGRlZmF1bHQgbnVs
        bAogICovCiAgb3B0aW9uR3JvdXBQYXRoOiBudWxsLAoKICAvKioKICAgIFRo
        ZSB2aWV3IGNsYXNzIGZvciBvcHRncm91cC4KCiAgICBAcHJvcGVydHkgZ3Jv
        dXBWaWV3CiAgICBAdHlwZSBFbWJlci5WaWV3CiAgICBAZGVmYXVsdCBFbWJl
        ci5TZWxlY3RPcHRncm91cAogICovCiAgZ3JvdXBWaWV3OiBFbWJlci5TZWxl
        Y3RPcHRncm91cCwKCiAgZ3JvdXBlZENvbnRlbnQ6IEVtYmVyLmNvbXB1dGVk
        KGZ1bmN0aW9uKCkgewogICAgdmFyIGdyb3VwUGF0aCA9IGdldCh0aGlzLCAn
        b3B0aW9uR3JvdXBQYXRoJyk7CiAgICB2YXIgZ3JvdXBlZENvbnRlbnQgPSBF
        bWJlci5BKCk7CiAgICB2YXIgY29udGVudCA9IGdldCh0aGlzLCAnY29udGVu
        dCcpIHx8IFtdOwoKICAgIGZvckVhY2goY29udGVudCwgZnVuY3Rpb24oaXRl
        bSkgewogICAgICB2YXIgbGFiZWwgPSBnZXQoaXRlbSwgZ3JvdXBQYXRoKTsK
        CiAgICAgIGlmIChnZXQoZ3JvdXBlZENvbnRlbnQsICdsYXN0T2JqZWN0Lmxh
        YmVsJykgIT09IGxhYmVsKSB7CiAgICAgICAgZ3JvdXBlZENvbnRlbnQucHVz
        aE9iamVjdCh7CiAgICAgICAgICBsYWJlbDogbGFiZWwsCiAgICAgICAgICBj
        b250ZW50OiBFbWJlci5BKCkKICAgICAgICB9KTsKICAgICAgfQoKICAgICAg
        Z2V0KGdyb3VwZWRDb250ZW50LCAnbGFzdE9iamVjdC5jb250ZW50JykucHVz
        aChpdGVtKTsKICAgIH0pOwoKICAgIHJldHVybiBncm91cGVkQ29udGVudDsK
        ICB9KS5wcm9wZXJ0eSgnb3B0aW9uR3JvdXBQYXRoJywgJ2NvbnRlbnQuQGVh
        Y2gnKSwKCiAgLyoqCiAgICBUaGUgdmlldyBjbGFzcyBmb3Igb3B0aW9uLgoK
        ICAgIEBwcm9wZXJ0eSBvcHRpb25WaWV3CiAgICBAdHlwZSBFbWJlci5WaWV3
        CiAgICBAZGVmYXVsdCBFbWJlci5TZWxlY3RPcHRpb24KICAqLwogIG9wdGlv
        blZpZXc6IEVtYmVyLlNlbGVjdE9wdGlvbiwKCiAgX2NoYW5nZTogZnVuY3Rp
        b24oKSB7CiAgICBpZiAoZ2V0KHRoaXMsICdtdWx0aXBsZScpKSB7CiAgICAg
        IHRoaXMuX2NoYW5nZU11bHRpcGxlKCk7CiAgICB9IGVsc2UgewogICAgICB0
        aGlzLl9jaGFuZ2VTaW5nbGUoKTsKICAgIH0KICB9LAoKICBzZWxlY3Rpb25E
        aWRDaGFuZ2U6IEVtYmVyLm9ic2VydmVyKCdzZWxlY3Rpb24uQGVhY2gnLCBm
        dW5jdGlvbigpIHsKICAgIHZhciBzZWxlY3Rpb24gPSBnZXQodGhpcywgJ3Nl
        bGVjdGlvbicpOwogICAgaWYgKGdldCh0aGlzLCAnbXVsdGlwbGUnKSkgewog
        ICAgICBpZiAoIWlzQXJyYXkoc2VsZWN0aW9uKSkgewogICAgICAgIHNldCh0
        aGlzLCAnc2VsZWN0aW9uJywgRW1iZXIuQShbc2VsZWN0aW9uXSkpOwogICAg
        ICAgIHJldHVybjsKICAgICAgfQogICAgICB0aGlzLl9zZWxlY3Rpb25EaWRD
        aGFuZ2VNdWx0aXBsZSgpOwogICAgfSBlbHNlIHsKICAgICAgdGhpcy5fc2Vs
        ZWN0aW9uRGlkQ2hhbmdlU2luZ2xlKCk7CiAgICB9CiAgfSksCgogIHZhbHVl
        RGlkQ2hhbmdlOiBFbWJlci5vYnNlcnZlcigndmFsdWUnLCBmdW5jdGlvbigp
        IHsKICAgIHZhciBjb250ZW50ID0gZ2V0KHRoaXMsICdjb250ZW50JyksCiAg
        ICAgICAgdmFsdWUgPSBnZXQodGhpcywgJ3ZhbHVlJyksCiAgICAgICAgdmFs
        dWVQYXRoID0gZ2V0KHRoaXMsICdvcHRpb25WYWx1ZVBhdGgnKS5yZXBsYWNl
        KC9eY29udGVudFwuPy8sICcnKSwKICAgICAgICBzZWxlY3RlZFZhbHVlID0g
        KHZhbHVlUGF0aCA/IGdldCh0aGlzLCAnc2VsZWN0aW9uLicgKyB2YWx1ZVBh
        dGgpIDogZ2V0KHRoaXMsICdzZWxlY3Rpb24nKSksCiAgICAgICAgc2VsZWN0
        aW9uOwoKICAgIGlmICh2YWx1ZSAhPT0gc2VsZWN0ZWRWYWx1ZSkgewogICAg
        ICBzZWxlY3Rpb24gPSBjb250ZW50ID8gY29udGVudC5maW5kKGZ1bmN0aW9u
        KG9iaikgewogICAgICAgIHJldHVybiB2YWx1ZSA9PT0gKHZhbHVlUGF0aCA/
        IGdldChvYmosIHZhbHVlUGF0aCkgOiBvYmopOwogICAgICB9KSA6IG51bGw7
        CgogICAgICB0aGlzLnNldCgnc2VsZWN0aW9uJywgc2VsZWN0aW9uKTsKICAg
        IH0KICB9KSwKCgogIF90cmlnZ2VyQ2hhbmdlOiBmdW5jdGlvbigpIHsKICAg
        IHZhciBzZWxlY3Rpb24gPSBnZXQodGhpcywgJ3NlbGVjdGlvbicpOwogICAg
        dmFyIHZhbHVlID0gZ2V0KHRoaXMsICd2YWx1ZScpOwoKICAgIGlmICghRW1i
        ZXIuaXNOb25lKHNlbGVjdGlvbikpIHsgdGhpcy5zZWxlY3Rpb25EaWRDaGFu
        Z2UoKTsgfQogICAgaWYgKCFFbWJlci5pc05vbmUodmFsdWUpKSB7IHRoaXMu
        dmFsdWVEaWRDaGFuZ2UoKTsgfQoKICAgIHRoaXMuX2NoYW5nZSgpOwogIH0s
        CgogIF9jaGFuZ2VTaW5nbGU6IGZ1bmN0aW9uKCkgewogICAgdmFyIHNlbGVj
        dGVkSW5kZXggPSB0aGlzLiQoKVswXS5zZWxlY3RlZEluZGV4LAogICAgICAg
        IGNvbnRlbnQgPSBnZXQodGhpcywgJ2NvbnRlbnQnKSwKICAgICAgICBwcm9t
        cHQgPSBnZXQodGhpcywgJ3Byb21wdCcpOwoKICAgIGlmICghY29udGVudCB8
        fCAhZ2V0KGNvbnRlbnQsICdsZW5ndGgnKSkgeyByZXR1cm47IH0KICAgIGlm
        IChwcm9tcHQgJiYgc2VsZWN0ZWRJbmRleCA9PT0gMCkgeyBzZXQodGhpcywg
        J3NlbGVjdGlvbicsIG51bGwpOyByZXR1cm47IH0KCiAgICBpZiAocHJvbXB0
        KSB7IHNlbGVjdGVkSW5kZXggLT0gMTsgfQogICAgc2V0KHRoaXMsICdzZWxl
        Y3Rpb24nLCBjb250ZW50Lm9iamVjdEF0KHNlbGVjdGVkSW5kZXgpKTsKICB9
        LAoKCiAgX2NoYW5nZU11bHRpcGxlOiBmdW5jdGlvbigpIHsKICAgIHZhciBv
        cHRpb25zID0gdGhpcy4kKCdvcHRpb246c2VsZWN0ZWQnKSwKICAgICAgICBw
        cm9tcHQgPSBnZXQodGhpcywgJ3Byb21wdCcpLAogICAgICAgIG9mZnNldCA9
        IHByb21wdCA/IDEgOiAwLAogICAgICAgIGNvbnRlbnQgPSBnZXQodGhpcywg
        J2NvbnRlbnQnKSwKICAgICAgICBzZWxlY3Rpb24gPSBnZXQodGhpcywgJ3Nl
        bGVjdGlvbicpOwoKICAgIGlmICghY29udGVudCkgeyByZXR1cm47IH0KICAg
        IGlmIChvcHRpb25zKSB7CiAgICAgIHZhciBzZWxlY3RlZEluZGV4ZXMgPSBv
        cHRpb25zLm1hcChmdW5jdGlvbigpIHsKICAgICAgICByZXR1cm4gdGhpcy5p
        bmRleCAtIG9mZnNldDsKICAgICAgfSkudG9BcnJheSgpOwogICAgICB2YXIg
        bmV3U2VsZWN0aW9uID0gY29udGVudC5vYmplY3RzQXQoc2VsZWN0ZWRJbmRl
        eGVzKTsKCiAgICAgIGlmIChpc0FycmF5KHNlbGVjdGlvbikpIHsKICAgICAg
        ICByZXBsYWNlKHNlbGVjdGlvbiwgMCwgZ2V0KHNlbGVjdGlvbiwgJ2xlbmd0
        aCcpLCBuZXdTZWxlY3Rpb24pOwogICAgICB9IGVsc2UgewogICAgICAgIHNl
        dCh0aGlzLCAnc2VsZWN0aW9uJywgbmV3U2VsZWN0aW9uKTsKICAgICAgfQog
        ICAgfQogIH0sCgogIF9zZWxlY3Rpb25EaWRDaGFuZ2VTaW5nbGU6IGZ1bmN0
        aW9uKCkgewogICAgdmFyIGVsID0gdGhpcy5nZXQoJ2VsZW1lbnQnKTsKICAg
        IGlmICghZWwpIHsgcmV0dXJuOyB9CgogICAgdmFyIGNvbnRlbnQgPSBnZXQo
        dGhpcywgJ2NvbnRlbnQnKSwKICAgICAgICBzZWxlY3Rpb24gPSBnZXQodGhp
        cywgJ3NlbGVjdGlvbicpLAogICAgICAgIHNlbGVjdGlvbkluZGV4ID0gY29u
        dGVudCA/IGluZGV4T2YoY29udGVudCwgc2VsZWN0aW9uKSA6IC0xLAogICAg
        ICAgIHByb21wdCA9IGdldCh0aGlzLCAncHJvbXB0Jyk7CgogICAgaWYgKHBy
        b21wdCkgeyBzZWxlY3Rpb25JbmRleCArPSAxOyB9CiAgICBpZiAoZWwpIHsg
        ZWwuc2VsZWN0ZWRJbmRleCA9IHNlbGVjdGlvbkluZGV4OyB9CiAgfSwKCiAg
        X3NlbGVjdGlvbkRpZENoYW5nZU11bHRpcGxlOiBmdW5jdGlvbigpIHsKICAg
        IHZhciBjb250ZW50ID0gZ2V0KHRoaXMsICdjb250ZW50JyksCiAgICAgICAg
        c2VsZWN0aW9uID0gZ2V0KHRoaXMsICdzZWxlY3Rpb24nKSwKICAgICAgICBz
        ZWxlY3RlZEluZGV4ZXMgPSBjb250ZW50ID8gaW5kZXhlc09mKGNvbnRlbnQs
        IHNlbGVjdGlvbikgOiBbLTFdLAogICAgICAgIHByb21wdCA9IGdldCh0aGlz
        LCAncHJvbXB0JyksCiAgICAgICAgb2Zmc2V0ID0gcHJvbXB0ID8gMSA6IDAs
        CiAgICAgICAgb3B0aW9ucyA9IHRoaXMuJCgnb3B0aW9uJyksCiAgICAgICAg
        YWRqdXN0ZWQ7CgogICAgaWYgKG9wdGlvbnMpIHsKICAgICAgb3B0aW9ucy5l
        YWNoKGZ1bmN0aW9uKCkgewogICAgICAgIGFkanVzdGVkID0gdGhpcy5pbmRl
        eCA+IC0xID8gdGhpcy5pbmRleCAtIG9mZnNldCA6IC0xOwogICAgICAgIHRo
        aXMuc2VsZWN0ZWQgPSBpbmRleE9mKHNlbGVjdGVkSW5kZXhlcywgYWRqdXN0
        ZWQpID4gLTE7CiAgICAgIH0pOwogICAgfQogIH0sCgogIGluaXQ6IGZ1bmN0
        aW9uKCkgewogICAgdGhpcy5fc3VwZXIoKTsKICAgIHRoaXMub24oImRpZElu
        c2VydEVsZW1lbnQiLCB0aGlzLCB0aGlzLl90cmlnZ2VyQ2hhbmdlKTsKICAg
        IHRoaXMub24oImNoYW5nZSIsIHRoaXMsIHRoaXMuX2NoYW5nZSk7CiAgfQp9
        KTsKCn0pKCk7CgoKCihmdW5jdGlvbigpIHsKLyoqCkBtb2R1bGUgZW1iZXIK
        QHN1Ym1vZHVsZSBlbWJlci1oYW5kbGViYXJzLWNvbXBpbGVyCiovCgovKioK
        CiAgVGhlIGB7e2lucHV0fX1gIGhlbHBlciBpbnNlcnRzIGFuIEhUTUwgYDxp
        bnB1dD5gIHRhZyBpbnRvIHRoZSB0ZW1wbGF0ZSwKICB3aXRoIGEgYHR5cGVg
        IHZhbHVlIG9mIGVpdGhlciBgdGV4dGAgb3IgYGNoZWNrYm94YC4gSWYgbm8g
        YHR5cGVgIGlzIHByb3ZpZGVkLAogIGB0ZXh0YCB3aWxsIGJlIHRoZSBkZWZh
        dWx0IHZhbHVlIGFwcGxpZWQuIFRoZSBhdHRyaWJ1dGVzIG9mIGB7e2lucHV0
        fX1gCiAgbWF0Y2ggdGhvc2Ugb2YgdGhlIG5hdGl2ZSBIVE1MIHRhZyBhcyBj
        bG9zZWx5IGFzIHBvc3NpYmxlIGZvciB0aGVzZSB0d28gdHlwZXMuCgogICMj
        IFVzZSBhcyB0ZXh0IGZpZWxkCiAgQW4gYHt7aW5wdXR9fWAgd2l0aCBubyBg
        dHlwZWAgb3IgYSBgdHlwZWAgb2YgYHRleHRgIHdpbGwgcmVuZGVyIGFuIEhU
        TUwgdGV4dCBpbnB1dC4KICBUaGUgZm9sbG93aW5nIEhUTUwgYXR0cmlidXRl
        cyBjYW4gYmUgc2V0IHZpYSB0aGUgaGVscGVyOgoKKiBgdmFsdWVgCiogYHNp
        emVgCiogYG5hbWVgCiogYHBhdHRlcm5gCiogYHBsYWNlaG9sZGVyYAoqIGBk
        aXNhYmxlZGAKKiBgbWF4bGVuZ3RoYAoqIGB0YWJpbmRleGAKCgogIFdoZW4g
        c2V0IHRvIGEgcXVvdGVkIHN0cmluZywgdGhlc2UgdmFsdWVzIHdpbGwgYmUg
        ZGlyZWN0bHkgYXBwbGllZCB0byB0aGUgSFRNTAogIGVsZW1lbnQuIFdoZW4g
        bGVmdCB1bnF1b3RlZCwgdGhlc2UgdmFsdWVzIHdpbGwgYmUgYm91bmQgdG8g
        YSBwcm9wZXJ0eSBvbiB0aGUKICB0ZW1wbGF0ZSdzIGN1cnJlbnQgcmVuZGVy
        aW5nIGNvbnRleHQgKG1vc3QgdHlwaWNhbGx5IGEgY29udHJvbGxlciBpbnN0
        YW5jZSkuCgogICMjIFVuYm91bmQ6CgogIGBgYGhhbmRsZWJhcnMKICB7e2lu
        cHV0IHZhbHVlPSJodHRwOi8vd3d3LmZhY2Vib29rLmNvbSJ9fQogIGBgYAoK
        CiAgYGBgaHRtbAogIDxpbnB1dCB0eXBlPSJ0ZXh0IiB2YWx1ZT0iaHR0cDov
        L3d3dy5mYWNlYm9vay5jb20iLz4KICBgYGAKCiAgIyMgQm91bmQ6CgogIGBg
        YGphdmFzY3JpcHQKICBBcHAuQXBwbGljYXRpb25Db250cm9sbGVyID0gRW1i
        ZXIuQ29udHJvbGxlci5leHRlbmQoewogICAgZmlyc3ROYW1lOiAiU3Rhbmxl
        eSIsCiAgICBlbnRyeU5vdEFsbG93ZWQ6IHRydWUKICB9KTsKICBgYGAKCgog
        IGBgYGhhbmRsZWJhcnMKICB7e2lucHV0IHR5cGU9InRleHQiIHZhbHVlPWZp
        cnN0TmFtZSBkaXNhYmxlZD1lbnRyeU5vdEFsbG93ZWQgc2l6ZT0iNTAifX0K
        ICBgYGAKCgogIGBgYGh0bWwKICA8aW5wdXQgdHlwZT0idGV4dCIgdmFsdWU9
        IlN0YW5sZXkiIGRpc2FibGVkPSJkaXNhYmxlZCIgc2l6ZT0iNTAiLz4KICBg
        YGAKCiAgIyMgRXh0ZW5zaW9uCgogIEludGVybmFsbHksIGB7e2lucHV0IHR5
        cGU9InRleHQifX1gIGNyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgYEVtYmVyLlRl
        eHRGaWVsZGAsIHBhc3NpbmcKICBhcmd1bWVudHMgZnJvbSB0aGUgaGVscGVy
        IHRvIGBFbWJlci5UZXh0RmllbGRgJ3MgYGNyZWF0ZWAgbWV0aG9kLiBZb3Ug
        Y2FuIGV4dGVuZCB0aGUKICBjYXBhYmxpbHRpZXMgb2YgdGV4dCBpbnB1dHMg
        aW4geW91ciBhcHBsaWNhdGlvbnMgYnkgcmVvcGVuaW5nIHRoaXMgY2xhc3Mu
        IEZvciBleGFtcGxlLAogIGlmIHlvdSBhcmUgZGVwbG95aW5nIHRvIGJyb3dz
        ZXJzIHdoZXJlIHRoZSBgcmVxdWlyZWRgIGF0dHJpYnV0ZSBpcyB1c2VkLCB5
        b3UKICBjYW4gYWRkIHRoaXMgdG8gdGhlIGBUZXh0RmllbGRgJ3MgYGF0dHJp
        YnV0ZUJpbmRpbmdzYCBwcm9wZXJ0eToKCiAgYGBgamF2YXNjcmlwdAogIEVt
        YmVyLlRleHRGaWVsZC5yZW9wZW4oewogICAgYXR0cmlidXRlQmluZGluZ3M6
        IFsncmVxdWlyZWQnXQogIH0pOwogIGBgYAoKICBLZWVwIGluIG1pbmQgd2hl
        biB3cml0aW5nIGBFbWJlci5UZXh0RmllbGRgIHN1YmNsYXNzZXMgdGhhdCBg
        RW1iZXIuVGV4dEZpZWxkYAogIGl0c2VsZiBleHRlbmRzIGBFbWJlci5Db21w
        b25lbnRgLCBtZWFuaW5nIHRoYXQgaXQgZG9lcyBOT1QgaW5oZXJpdAogIHRo
        ZSBgY29udHJvbGxlcmAgb2YgdGhlIHBhcmVudCB2aWV3LgoKICBTZWUgbW9y
        ZSBhYm91dCBbRW1iZXIgY29tcG9uZW50c10oYXBpL2NsYXNzZXMvRW1iZXIu
        Q29tcG9uZW50Lmh0bWwpCgoKICAjIyBVc2UgYXMgY2hlY2tib3gKCiAgQW4g
        YHt7aW5wdXR9fWAgd2l0aCBhIGB0eXBlYCBvZiBgY2hlY2tib3hgIHdpbGwg
        cmVuZGVyIGFuIEhUTUwgY2hlY2tib3ggaW5wdXQuCiAgVGhlIGZvbGxvd2lu
        ZyBIVE1MIGF0dHJpYnV0ZXMgY2FuIGJlIHNldCB2aWEgdGhlIGhlbHBlcjoK
        CiogYGNoZWNrZWRgCiogYGRpc2FibGVkYAoqIGB0YWJpbmRleGAKKiBgaW5k
        ZXRlcm1pbmF0ZWAKKiBgbmFtZWAKCgogIFdoZW4gc2V0IHRvIGEgcXVvdGVk
        IHN0cmluZywgdGhlc2UgdmFsdWVzIHdpbGwgYmUgZGlyZWN0bHkgYXBwbGll
        ZCB0byB0aGUgSFRNTAogIGVsZW1lbnQuIFdoZW4gbGVmdCB1bnF1b3RlZCwg
        dGhlc2UgdmFsdWVzIHdpbGwgYmUgYm91bmQgdG8gYSBwcm9wZXJ0eSBvbiB0
        aGUKICB0ZW1wbGF0ZSdzIGN1cnJlbnQgcmVuZGVyaW5nIGNvbnRleHQgKG1v
        c3QgdHlwaWNhbGx5IGEgY29udHJvbGxlciBpbnN0YW5jZSkuCgogICMjIFVu
        Ym91bmQ6CgogIGBgYGhhbmRsZWJhcnMKICB7e2lucHV0IHR5cGU9ImNoZWNr
        Ym94IiBuYW1lPSJpc0FkbWluIn19CiAgYGBgCgogIGBgYGh0bWwKICA8aW5w
        dXQgdHlwZT0iY2hlY2tib3giIG5hbWU9ImlzQWRtaW4iIC8+CiAgYGBgCgog
        ICMjIEJvdW5kOgoKICBgYGBqYXZhc2NyaXB0CiAgQXBwLkFwcGxpY2F0aW9u
        Q29udHJvbGxlciA9IEVtYmVyLkNvbnRyb2xsZXIuZXh0ZW5kKHsKICAgIGlz
        QWRtaW46IHRydWUKICB9KTsKICBgYGAKCgogIGBgYGhhbmRsZWJhcnMKICB7
        e2lucHV0IHR5cGU9ImNoZWNrYm94IiBjaGVja2VkPWlzQWRtaW4gfX0KICBg
        YGAKCgogIGBgYGh0bWwKICA8aW5wdXQgdHlwZT0iY2hlY2tib3giIGNoZWNr
        ZWQ9ImNoZWNrZWQiIC8+CiAgYGBgCgogICMjIEV4dGVuc2lvbgoKICBJbnRl
        cm5hbGx5LCBge3tpbnB1dCB0eXBlPSJjaGVja2JveCJ9fWAgY3JlYXRlcyBh
        biBpbnN0YW5jZSBvZiBgRW1iZXIuQ2hlY2tib3hgLCBwYXNzaW5nCiAgYXJn
        dW1lbnRzIGZyb20gdGhlIGhlbHBlciB0byBgRW1iZXIuQ2hlY2tib3hgJ3Mg
        YGNyZWF0ZWAgbWV0aG9kLiBZb3UgY2FuIGV4dGVuZCB0aGUKICBjYXBhYmxp
        bHRpZXMgb2YgY2hlY2tib3ggaW5wdXRzIGluIHlvdXIgYXBwbGljYXRpb25z
        IGJ5IHJlb3BlbmluZyB0aGlzIGNsYXNzLiBGb3IgZXhhbXBsZSwKICBpZiB5
        b3Ugd2FudGVkIHRvIGFkZCBhIGNzcyBjbGFzcyB0byBhbGwgY2hlY2tib3hl
        cyBpbiB5b3VyIGFwcGxpY2F0aW9uOgoKICBgYGBqYXZhc2NyaXB0CiAgRW1i
        ZXIuQ2hlY2tib3gucmVvcGVuKHsKICAgIGNsYXNzTmFtZXM6IFsnbXktYXBw
        LWNoZWNrYm94J10KICB9KTsKICBgYGAKCgogIEBtZXRob2QgaW5wdXQKICBA
        Zm9yIEVtYmVyLkhhbmRsZWJhcnMuaGVscGVycwogIEBwYXJhbSB7SGFzaH0g
        b3B0aW9ucwoqLwpFbWJlci5IYW5kbGViYXJzLnJlZ2lzdGVySGVscGVyKCdp
        bnB1dCcsIGZ1bmN0aW9uKG9wdGlvbnMpIHsKICBFbWJlci5hc3NlcnQoJ1lv
        dSBjYW4gb25seSBwYXNzIGF0dHJpYnV0ZXMgdG8gdGhlIGBpbnB1dGAgaGVs
        cGVyLCBub3QgYXJndW1lbnRzJywgYXJndW1lbnRzLmxlbmd0aCA8IDIpOwoK
        ICB2YXIgaGFzaCA9IG9wdGlvbnMuaGFzaCwKICAgICAgdHlwZXMgPSBvcHRp
        b25zLmhhc2hUeXBlcywKICAgICAgaW5wdXRUeXBlID0gaGFzaC50eXBlLAog
        ICAgICBvbkV2ZW50ID0gaGFzaC5vbjsKCiAgZGVsZXRlIGhhc2gudHlwZTsK
        ICBkZWxldGUgaGFzaC5vbjsKCiAgaWYgKGlucHV0VHlwZSA9PT0gJ2NoZWNr
        Ym94JykgewogICAgcmV0dXJuIEVtYmVyLkhhbmRsZWJhcnMuaGVscGVycy52
        aWV3LmNhbGwodGhpcywgRW1iZXIuQ2hlY2tib3gsIG9wdGlvbnMpOwogIH0g
        ZWxzZSB7CiAgICBpZiAoaW5wdXRUeXBlKSB7IGhhc2gudHlwZSA9IGlucHV0
        VHlwZTsgfQogICAgaGFzaC5vbkV2ZW50ID0gb25FdmVudCB8fCAnZW50ZXIn
        OwogICAgcmV0dXJuIEVtYmVyLkhhbmRsZWJhcnMuaGVscGVycy52aWV3LmNh
        bGwodGhpcywgRW1iZXIuVGV4dEZpZWxkLCBvcHRpb25zKTsKICB9Cn0pOwoK
        LyoqCiAgYHt7dGV4dGFyZWF9fWAgaW5zZXJ0cyBhIG5ldyBpbnN0YW5jZSBv
        ZiBgPHRleHRhcmVhPmAgdGFnIGludG8gdGhlIHRlbXBsYXRlLgogIFRoZSBh
        dHRyaWJ1dGVzIG9mIGB7e3RleHRhcmVhfX1gIG1hdGNoIHRob3NlIG9mIHRo
        ZSBuYXRpdmUgSFRNTCB0YWdzIGFzCiAgY2xvc2VseSBhcyBwb3NzaWJsZS4K
        CiAgVGhlIGZvbGxvd2luZyBIVE1MIGF0dHJpYnV0ZXMgY2FuIGJlIHNldDoK
        CiAgICAqIGB2YWx1ZWAKICAgICogYG5hbWVgCiAgICAqIGByb3dzYAogICAg
        KiBgY29sc2AKICAgICogYHBsYWNlaG9sZGVyYAogICAgKiBgZGlzYWJsZWRg
        CiAgICAqIGBtYXhsZW5ndGhgCiAgICAqIGB0YWJpbmRleGAKCiAgV2hlbiBz
        ZXQgdG8gYSBxdW90ZWQgc3RyaW5nLCB0aGVzZSB2YWx1ZSB3aWxsIGJlIGRp
        cmVjdGx5IGFwcGxpZWQgdG8gdGhlIEhUTUwKICBlbGVtZW50LiBXaGVuIGxl
        ZnQgdW5xdW90ZWQsIHRoZXNlIHZhbHVlcyB3aWxsIGJlIGJvdW5kIHRvIGEg
        cHJvcGVydHkgb24gdGhlCiAgdGVtcGxhdGUncyBjdXJyZW50IHJlbmRlcmlu
        ZyBjb250ZXh0IChtb3N0IHR5cGljYWxseSBhIGNvbnRyb2xsZXIgaW5zdGFu
        Y2UpLgoKICBVbmJvdW5kOgoKICBgYGBoYW5kbGViYXJzCiAge3t0ZXh0YXJl
        YSB2YWx1ZT0iTG90cyBvZiBzdGF0aWMgdGV4dCB0aGF0IElTTidUIGJvdW5k
        In19CiAgYGBgCgogIFdvdWxkIHJlc3VsdCBpbiB0aGUgZm9sbG93aW5nIEhU
        TUw6CgogIGBgYGh0bWwKICA8dGV4dGFyZWEgY2xhc3M9ImVtYmVyLXRleHQt
        YXJlYSI+CiAgICBMb3RzIG9mIHN0YXRpYyB0ZXh0IHRoYXQgSVNOJ1QgYm91
        bmQKICA8L3RleHRhcmVhPgogIGBgYAoKICBCb3VuZDoKCiAgSW4gdGhlIGZv
        bGxvd2luZyBleGFtcGxlLCB0aGUgYHdyaXR0ZW5Xb3Jkc2AgcHJvcGVydHkg
        b24gYEFwcC5BcHBsaWNhdGlvbkNvbnRyb2xsZXJgCiAgd2lsbCBiZSB1cGRh
        dGVkIGxpdmUgYXMgdGhlIHVzZXIgdHlwZXMgJ0xvdHMgb2YgdGV4dCB0aGF0
        IElTIGJvdW5kJyBpbnRvCiAgdGhlIHRleHQgYXJlYSBvZiB0aGVpciBicm93
        c2VyJ3Mgd2luZG93LgoKICBgYGBqYXZhc2NyaXB0CiAgQXBwLkFwcGxpY2F0
        aW9uQ29udHJvbGxlciA9IEVtYmVyLkNvbnRyb2xsZXIuZXh0ZW5kKHsKICAg
        IHdyaXR0ZW5Xb3JkczogIkxvdHMgb2YgdGV4dCB0aGF0IElTIGJvdW5kIgog
        IH0pOwogIGBgYAoKICBgYGBoYW5kbGViYXJzCiAge3t0ZXh0YXJlYSB2YWx1
        ZT13cml0dGVuV29yZHN9fQogIGBgYAoKICAgV291bGQgcmVzdWx0IGluIHRo
        ZSBmb2xsb3dpbmcgSFRNTDoKCiAgYGBgaHRtbAogIDx0ZXh0YXJlYSBjbGFz
        cz0iZW1iZXItdGV4dC1hcmVhIj4KICAgIExvdHMgb2YgdGV4dCB0aGF0IElT
        IGJvdW5kCiAgPC90ZXh0YXJlYT4KICBgYGAKCiAgSWYgeW91IHdhbnRlZCBh
        IG9uZSB3YXkgYmluZGluZyBiZXR3ZWVuIHRoZSB0ZXh0IGFyZWEgYW5kIGEg
        ZGl2IHRhZwogIHNvbWV3aGVyZSBlbHNlIG9uIHlvdXIgc2NyZWVuLCB5b3Ug
        Y291bGQgdXNlIGBFbWJlci5jb21wdXRlZC5vbmVXYXlgOgoKICBgYGBqYXZh
        c2NyaXB0CiAgQXBwLkFwcGxpY2F0aW9uQ29udHJvbGxlciA9IEVtYmVyLkNv
        bnRyb2xsZXIuZXh0ZW5kKHsKICAgIHdyaXR0ZW5Xb3JkczogIkxvdHMgb2Yg
        dGV4dCB0aGF0IElTIGJvdW5kIiwKICAgIG91dHB1dFdyaXR0ZW5Xb3Jkczog
        RW1iZXIuY29tcHV0ZWQub25lV2F5KCJ3cml0dGVuV29yZHMiKQogIH0pOwog
        IGBgYAoKICBgYGBoYW5kbGViYXJzCiAge3t0ZXh0YXJlYSB2YWx1ZT13cml0
        dGVuV29yZHN9fQoKICA8ZGl2PgogICAge3tvdXRwdXRXcml0dGVuV29yZHN9
        fQogIDwvZGl2PgogIGBgYAoKICBXb3VsZCByZXN1bHQgaW4gdGhlIGZvbGxv
        d2luZyBIVE1MOgoKICBgYGBodG1sCiAgPHRleHRhcmVhIGNsYXNzPSJlbWJl
        ci10ZXh0LWFyZWEiPgogICAgTG90cyBvZiB0ZXh0IHRoYXQgSVMgYm91bmQK
        ICA8L3RleHRhcmVhPgoKICA8LS0gdGhlIGZvbGxvd2luZyBkaXYgd2lsbCBi
        ZSB1cGRhdGVkIGluIHJlYWwgdGltZSBhcyB5b3UgdHlwZSAtLT4KCiAgPGRp
        dj4KICAgIExvdHMgb2YgdGV4dCB0aGF0IElTIGJvdW5kCiAgPC9kaXY+CiAg
        YGBgCgogIEZpbmFsbHksIHRoaXMgZXhhbXBsZSByZWFsbHkgc2hvd3MgdGhl
        IHBvd2VyIGFuZCBlYXNlIG9mIEVtYmVyIHdoZW4gdHdvCiAgcHJvcGVydGll
        cyBhcmUgYm91bmQgdG8gZWFjaG90aGVyIHZpYSBgRW1iZXIuY29tcHV0ZWQu
        YWxpYXNgLiBUeXBlIGludG8KICBlaXRoZXIgdGV4dCBhcmVhIGJveCBhbmQg
        dGhleSdsbCBib3RoIHN0YXkgaW4gc3luYy4gTm90ZSB0aGF0CiAgYEVtYmVy
        LmNvbXB1dGVkLmFsaWFzYCBjb3N0cyBtb3JlIGluIHRlcm1zIG9mIHBlcmZv
        cm1hbmNlLCBzbyBvbmx5IHVzZSBpdCB3aGVuCiAgeW91ciByZWFsbHkgYmlu
        ZGluZyBpbiBib3RoIGRpcmVjdGlvbnM6CgogIGBgYGphdmFzY3JpcHQKICBB
        cHAuQXBwbGljYXRpb25Db250cm9sbGVyID0gRW1iZXIuQ29udHJvbGxlci5l
        eHRlbmQoewogICAgd3JpdHRlbldvcmRzOiAiTG90cyBvZiB0ZXh0IHRoYXQg
        SVMgYm91bmQiLAogICAgdHdvV2F5V3JpdHRlbldvcmRzOiBFbWJlci5jb21w
        dXRlZC5hbGlhcygid3JpdHRlbldvcmRzIikKICB9KTsKICBgYGAKCiAgYGBg
        aGFuZGxlYmFycwogIHt7dGV4dGFyZWEgdmFsdWU9d3JpdHRlbldvcmRzfX0K
        ICB7e3RleHRhcmVhIHZhbHVlPXR3b1dheVdyaXR0ZW5Xb3Jkc319CiAgYGBg
        CgogIGBgYGh0bWwKICA8dGV4dGFyZWEgaWQ9ImVtYmVyMSIgY2xhc3M9ImVt
        YmVyLXRleHQtYXJlYSI+CiAgICBMb3RzIG9mIHRleHQgdGhhdCBJUyBib3Vu
        ZAogIDwvdGV4dGFyZWE+CgogIDwtLSBib3RoIHVwZGF0ZWQgaW4gcmVhbCB0
        aW1lIC0tPgoKICA8dGV4dGFyZWEgaWQ9ImVtYmVyMiIgY2xhc3M9ImVtYmVy
        LXRleHQtYXJlYSI+CiAgICBMb3RzIG9mIHRleHQgdGhhdCBJUyBib3VuZAog
        IDwvdGV4dGFyZWE+CiAgYGBgCgogICMjIEV4dGVuc2lvbgoKICBJbnRlcm5h
        bGx5LCBge3t0ZXh0YXJlYX19YCBjcmVhdGVzIGFuIGluc3RhbmNlIG9mIGBF
        bWJlci5UZXh0QXJlYWAsIHBhc3NpbmcKICBhcmd1bWVudHMgZnJvbSB0aGUg
        aGVscGVyIHRvIGBFbWJlci5UZXh0QXJlYWAncyBgY3JlYXRlYCBtZXRob2Qu
        IFlvdSBjYW4KICBleHRlbmQgdGhlIGNhcGFiaWxpdGllcyBvZiB0ZXh0IGFy
        ZWFzIGluIHlvdXIgYXBwbGljYXRpb24gYnkgcmVvcGVuaW5nIHRoaXMKICBj
        bGFzcy4gRm9yIGV4YW1wbGUsIGlmIHlvdSBhcmUgZGVwbG95aW5nIHRvIGJy
        b3dzZXJzIHdoZXJlIHRoZSBgcmVxdWlyZWRgCiAgYXR0cmlidXRlIGlzIHVz
        ZWQsIHlvdSBjYW4gZ2xvYmFsbHkgYWRkIHN1cHBvcnQgZm9yIHRoZSBgcmVx
        dWlyZWRgIGF0dHJpYnV0ZQogIG9uIGFsbCB7e3RleHRhcmVhfX0ncycgaW4g
        eW91ciBhcHAgYnkgcmVvcGVuaW5nIGBFbWJlci5UZXh0QXJlYWAgb3IKICBg
        RW1iZXIuVGV4dFN1cHBvcnRgIGFuZCBhZGRpbmcgaXQgdG8gdGhlIGBhdHRy
        aWJ1dGVCaW5kaW5nc2AgY29uY2F0ZW5hdGVkCiAgcHJvcGVydHk6CgogIGBg
        YGphdmFzY3JpcHQKICBFbWJlci5UZXh0QXJlYS5yZW9wZW4oewogICAgYXR0
        cmlidXRlQmluZGluZ3M6IFsncmVxdWlyZWQnXQogIH0pOwogIGBgYAoKICBL
        ZWVwIGluIG1pbmQgd2hlbiB3cml0aW5nIGBFbWJlci5UZXh0QXJlYWAgc3Vi
        Y2xhc3NlcyB0aGF0IGBFbWJlci5UZXh0QXJlYWAKICBpdHNlbGYgZXh0ZW5k
        cyBgRW1iZXIuQ29tcG9uZW50YCwgbWVhbmluZyB0aGF0IGl0IGRvZXMgTk9U
        IGluaGVyaXQKICB0aGUgYGNvbnRyb2xsZXJgIG9mIHRoZSBwYXJlbnQgdmll
        dy4KCiAgU2VlIG1vcmUgYWJvdXQgW0VtYmVyIGNvbXBvbmVudHNdKGFwaS9j
        bGFzc2VzL0VtYmVyLkNvbXBvbmVudC5odG1sKQoKICBAbWV0aG9kIHRleHRh
        cmVhCiAgQGZvciBFbWJlci5IYW5kbGViYXJzLmhlbHBlcnMKICBAcGFyYW0g
        e0hhc2h9IG9wdGlvbnMKKi8KRW1iZXIuSGFuZGxlYmFycy5yZWdpc3Rlckhl
        bHBlcigndGV4dGFyZWEnLCBmdW5jdGlvbihvcHRpb25zKSB7CiAgRW1iZXIu
        YXNzZXJ0KCdZb3UgY2FuIG9ubHkgcGFzcyBhdHRyaWJ1dGVzIHRvIHRoZSBg
        dGV4dGFyZWFgIGhlbHBlciwgbm90IGFyZ3VtZW50cycsIGFyZ3VtZW50cy5s
        ZW5ndGggPCAyKTsKCiAgdmFyIGhhc2ggPSBvcHRpb25zLmhhc2gsCiAgICAg
        IHR5cGVzID0gb3B0aW9ucy5oYXNoVHlwZXM7CgogIHJldHVybiBFbWJlci5I
        YW5kbGViYXJzLmhlbHBlcnMudmlldy5jYWxsKHRoaXMsIEVtYmVyLlRleHRB
        cmVhLCBvcHRpb25zKTsKfSk7Cgp9KSgpOwoKCgooZnVuY3Rpb24oKSB7CkVt
        YmVyLkNvbXBvbmVudExvb2t1cCA9IEVtYmVyLk9iamVjdC5leHRlbmQoewog
        IGxvb2t1cEZhY3Rvcnk6IGZ1bmN0aW9uKG5hbWUsIGNvbnRhaW5lcikgewoK
        ICAgIGNvbnRhaW5lciA9IGNvbnRhaW5lciB8fCB0aGlzLmNvbnRhaW5lcjsK
        CiAgICB2YXIgZnVsbE5hbWUgPSAnY29tcG9uZW50OicgKyBuYW1lLAogICAg
        ICAgIHRlbXBsYXRlRnVsbE5hbWUgPSAndGVtcGxhdGU6Y29tcG9uZW50cy8n
        ICsgbmFtZSwKICAgICAgICB0ZW1wbGF0ZVJlZ2lzdGVyZWQgPSBjb250YWlu
        ZXIgJiYgY29udGFpbmVyLmhhcyh0ZW1wbGF0ZUZ1bGxOYW1lKTsKCiAgICBp
        ZiAodGVtcGxhdGVSZWdpc3RlcmVkKSB7CiAgICAgIGNvbnRhaW5lci5pbmpl
        Y3Rpb24oZnVsbE5hbWUsICdsYXlvdXQnLCB0ZW1wbGF0ZUZ1bGxOYW1lKTsK
        ICAgIH0KCiAgICB2YXIgQ29tcG9uZW50ID0gY29udGFpbmVyLmxvb2t1cEZh
        Y3RvcnkoZnVsbE5hbWUpOwoKICAgIC8vIE9ubHkgdHJlYXQgYXMgYSBjb21w
        b25lbnQgaWYgZWl0aGVyIHRoZSBjb21wb25lbnQKICAgIC8vIG9yIGEgdGVt
        cGxhdGUgaGFzIGJlZW4gcmVnaXN0ZXJlZC4KICAgIGlmICh0ZW1wbGF0ZVJl
        Z2lzdGVyZWQgfHwgQ29tcG9uZW50KSB7CiAgICAgIGlmICghQ29tcG9uZW50
        KSB7CiAgICAgICAgY29udGFpbmVyLnJlZ2lzdGVyKGZ1bGxOYW1lLCBFbWJl
        ci5Db21wb25lbnQpOwogICAgICAgIENvbXBvbmVudCA9IGNvbnRhaW5lci5s
        b29rdXBGYWN0b3J5KGZ1bGxOYW1lKTsKICAgICAgfQogICAgICByZXR1cm4g
        Q29tcG9uZW50OwogICAgfQogIH0KfSk7Cgp9KSgpOwoKCgooZnVuY3Rpb24o
        KSB7Ci8qZ2xvYmFscyBIYW5kbGViYXJzICovCi8qKgpAbW9kdWxlIGVtYmVy
        CkBzdWJtb2R1bGUgZW1iZXItaGFuZGxlYmFycwoqLwoKLyoqCiAgQHByaXZh
        dGUKCiAgRmluZCB0ZW1wbGF0ZXMgc3RvcmVkIGluIHRoZSBoZWFkIHRhZyBh
        cyBzY3JpcHQgdGFncyBhbmQgbWFrZSB0aGVtIGF2YWlsYWJsZQogIHRvIGBF
        bWJlci5Db3JlVmlld2AgaW4gdGhlIGdsb2JhbCBgRW1iZXIuVEVNUExBVEVT
        YCBvYmplY3QuIFRoaXMgd2lsbCBiZSBydW4KICBhcyBhcyBqUXVlcnkgRE9N
        LXJlYWR5IGNhbGxiYWNrLgoKICBTY3JpcHQgdGFncyB3aXRoIGB0ZXh0L3gt
        aGFuZGxlYmFyc2Agd2lsbCBiZSBjb21waWxlZAogIHdpdGggRW1iZXIncyBI
        YW5kbGViYXJzIGFuZCBhcmUgc3VpdGFibGUgZm9yIHVzZSBhcyBhIHZpZXcn
        cyB0ZW1wbGF0ZS4KICBUaG9zZSB3aXRoIHR5cGUgYHRleHQveC1yYXctaGFu
        ZGxlYmFyc2Agd2lsbCBiZSBjb21waWxlZCB3aXRoIHJlZ3VsYXIKICBIYW5k
        bGViYXJzIGFuZCBhcmUgc3VpdGFibGUgZm9yIHVzZSBpbiB2aWV3cycgY29t
        cHV0ZWQgcHJvcGVydGllcy4KCiAgQG1ldGhvZCBib290c3RyYXAKICBAZm9y
        IEVtYmVyLkhhbmRsZWJhcnMKICBAc3RhdGljCiAgQHBhcmFtIGN0eAoqLwpF
        bWJlci5IYW5kbGViYXJzLmJvb3RzdHJhcCA9IGZ1bmN0aW9uKGN0eCkgewog
        IHZhciBzZWxlY3RvcnMgPSAnc2NyaXB0W3R5cGU9InRleHQveC1oYW5kbGVi
        YXJzIl0sIHNjcmlwdFt0eXBlPSJ0ZXh0L3gtcmF3LWhhbmRsZWJhcnMiXSc7
        CgogIEVtYmVyLiQoc2VsZWN0b3JzLCBjdHgpCiAgICAuZWFjaChmdW5jdGlv
        bigpIHsKICAgIC8vIEdldCBhIHJlZmVyZW5jZSB0byB0aGUgc2NyaXB0IHRh
        ZwogICAgdmFyIHNjcmlwdCA9IEVtYmVyLiQodGhpcyk7CgogICAgdmFyIGNv
        bXBpbGUgPSAoc2NyaXB0LmF0dHIoJ3R5cGUnKSA9PT0gJ3RleHQveC1yYXct
        aGFuZGxlYmFycycpID8KICAgICAgICAgICAgICAgICAgRW1iZXIuJC5wcm94
        eShIYW5kbGViYXJzLmNvbXBpbGUsIEhhbmRsZWJhcnMpIDoKICAgICAgICAg
        ICAgICAgICAgRW1iZXIuJC5wcm94eShFbWJlci5IYW5kbGViYXJzLmNvbXBp
        bGUsIEVtYmVyLkhhbmRsZWJhcnMpLAogICAgICAvLyBHZXQgdGhlIG5hbWUg
        b2YgdGhlIHNjcmlwdCwgdXNlZCBieSBFbWJlci5WaWV3J3MgdGVtcGxhdGVO
        YW1lIHByb3BlcnR5LgogICAgICAvLyBGaXJzdCBsb29rIGZvciBkYXRhLXRl
        bXBsYXRlLW5hbWUgYXR0cmlidXRlLCB0aGVuIGZhbGwgYmFjayB0byBpdHMK
        ICAgICAgLy8gaWQgaWYgbm8gbmFtZSBpcyBmb3VuZC4KICAgICAgdGVtcGxh
        dGVOYW1lID0gc2NyaXB0LmF0dHIoJ2RhdGEtdGVtcGxhdGUtbmFtZScpIHx8
        IHNjcmlwdC5hdHRyKCdpZCcpIHx8ICdhcHBsaWNhdGlvbicsCiAgICAgIHRl
        bXBsYXRlID0gY29tcGlsZShzY3JpcHQuaHRtbCgpKTsKCiAgICAvLyBDaGVj
        ayBpZiB0ZW1wbGF0ZSBvZiBzYW1lIG5hbWUgYWxyZWFkeSBleGlzdHMKICAg
        IGlmIChFbWJlci5URU1QTEFURVNbdGVtcGxhdGVOYW1lXSAhPT0gdW5kZWZp
        bmVkKSB7CiAgICAgIHRocm93IG5ldyBFbWJlci5FcnJvcignVGVtcGxhdGUg
        bmFtZWQgIicgKyB0ZW1wbGF0ZU5hbWUgICsgJyIgYWxyZWFkeSBleGlzdHMu
        Jyk7CiAgICB9CgogICAgLy8gRm9yIHRlbXBsYXRlcyB3aGljaCBoYXZlIGEg
        bmFtZSwgd2Ugc2F2ZSB0aGVtIGFuZCB0aGVuIHJlbW92ZSB0aGVtIGZyb20g
        dGhlIERPTQogICAgRW1iZXIuVEVNUExBVEVTW3RlbXBsYXRlTmFtZV0gPSB0
        ZW1wbGF0ZTsKCiAgICAvLyBSZW1vdmUgc2NyaXB0IHRhZyBmcm9tIERPTQog
        ICAgc2NyaXB0LnJlbW92ZSgpOwogIH0pOwp9OwoKZnVuY3Rpb24gYm9vdHN0
        cmFwKCkgewogIEVtYmVyLkhhbmRsZWJhcnMuYm9vdHN0cmFwKCBFbWJlci4k
        KGRvY3VtZW50KSApOwp9CgpmdW5jdGlvbiByZWdpc3RlckNvbXBvbmVudHMo
        Y29udGFpbmVyKSB7CiAgdmFyIHRlbXBsYXRlcyA9IEVtYmVyLlRFTVBMQVRF
        UywgbWF0Y2g7CiAgaWYgKCF0ZW1wbGF0ZXMpIHsgcmV0dXJuOyB9CgogIGZv
        ciAodmFyIHByb3AgaW4gdGVtcGxhdGVzKSB7CiAgICBpZiAobWF0Y2ggPSBw
        cm9wLm1hdGNoKC9eY29tcG9uZW50c1wvKC4qKSQvKSkgewogICAgICByZWdp
        c3RlckNvbXBvbmVudChjb250YWluZXIsIG1hdGNoWzFdKTsKICAgIH0KICB9
        Cn0KCgpmdW5jdGlvbiByZWdpc3RlckNvbXBvbmVudChjb250YWluZXIsIG5h
        bWUpIHsKICBFbWJlci5hc3NlcnQoIllvdSBwcm92aWRlZCBhIHRlbXBsYXRl
        IG5hbWVkICdjb21wb25lbnRzLyIgKyBuYW1lICsgIicsIGJ1dCBjdXN0b20g
        Y29tcG9uZW50cyBtdXN0IGluY2x1ZGUgYSAnLSciLCBuYW1lLm1hdGNoKC8t
        LykpOwoKICB2YXIgZnVsbE5hbWUgPSAnY29tcG9uZW50OicgKyBuYW1lOwoK
        ICBjb250YWluZXIuaW5qZWN0aW9uKGZ1bGxOYW1lLCAnbGF5b3V0JywgJ3Rl
        bXBsYXRlOmNvbXBvbmVudHMvJyArIG5hbWUpOwoKICB2YXIgQ29tcG9uZW50
        ID0gY29udGFpbmVyLmxvb2t1cEZhY3RvcnkoZnVsbE5hbWUpOwoKICBpZiAo
        IUNvbXBvbmVudCkgewogICAgY29udGFpbmVyLnJlZ2lzdGVyKGZ1bGxOYW1l
        LCBFbWJlci5Db21wb25lbnQpOwogICAgQ29tcG9uZW50ID0gY29udGFpbmVy
        Lmxvb2t1cEZhY3RvcnkoZnVsbE5hbWUpOwogIH0KCiAgRW1iZXIuSGFuZGxl
        YmFycy5oZWxwZXIobmFtZSwgQ29tcG9uZW50KTsKfQoKZnVuY3Rpb24gcmVn
        aXN0ZXJDb21wb25lbnRMb29rdXAoY29udGFpbmVyKSB7CiAgY29udGFpbmVy
        LnJlZ2lzdGVyKCdjb21wb25lbnQtbG9va3VwOm1haW4nLCBFbWJlci5Db21w
        b25lbnRMb29rdXApOwp9CgovKgogIFdlIHRpZSB0aGlzIHRvIGFwcGxpY2F0
        aW9uLmxvYWQgdG8gZW5zdXJlIHRoYXQgd2UndmUgYXQgbGVhc3QKICBhdHRl
        bXB0ZWQgdG8gYm9vdHN0cmFwIGF0IHRoZSBwb2ludCB0aGF0IHRoZSBhcHBs
        aWNhdGlvbiBpcyBsb2FkZWQuCgogIFdlIGFsc28gdGllIHRoaXMgdG8gZG9j
        dW1lbnQgcmVhZHkgc2luY2Ugd2UncmUgZ3VhcmFudGVlZCB0aGF0IGFsbAog
        IHRoZSBpbmxpbmUgdGVtcGxhdGVzIGFyZSBwcmVzZW50IGF0IHRoaXMgcG9p
        bnQuCgogIFRoZXJlJ3Mgbm8gaGFybSB0byBydW5uaW5nIHRoaXMgdHdpY2Us
        IHNpbmNlIHdlIHJlbW92ZSB0aGUgdGVtcGxhdGVzCiAgZnJvbSB0aGUgRE9N
        IGFmdGVyIHByb2Nlc3NpbmcuCiovCgpFbWJlci5vbkxvYWQoJ0VtYmVyLkFw
        cGxpY2F0aW9uJywgZnVuY3Rpb24oQXBwbGljYXRpb24pIHsKICBBcHBsaWNh
        dGlvbi5pbml0aWFsaXplcih7CiAgICBuYW1lOiAnZG9tVGVtcGxhdGVzJywK
        ICAgIGluaXRpYWxpemU6IGJvb3RzdHJhcAogIH0pOwoKICAKICAgIEFwcGxp
        Y2F0aW9uLmluaXRpYWxpemVyKHsKICAgICAgbmFtZTogJ3JlZ2lzdGVyQ29t
        cG9uZW50TG9va3VwJywKICAgICAgYWZ0ZXI6ICdkb21UZW1wbGF0ZXMnLAog
        ICAgICBpbml0aWFsaXplOiByZWdpc3RlckNvbXBvbmVudExvb2t1cAogICAg
        fSk7CiAgfSk7Cgp9KSgpOwoKCgooZnVuY3Rpb24oKSB7Ci8qKgpFbWJlciBI
        YW5kbGViYXJzCgpAbW9kdWxlIGVtYmVyCkBzdWJtb2R1bGUgZW1iZXItaGFu
        ZGxlYmFycwpAcmVxdWlyZXMgZW1iZXItdmlld3MKKi8KCkVtYmVyLnJ1bkxv
        YWRIb29rcygnRW1iZXIuSGFuZGxlYmFycycsIEVtYmVyLkhhbmRsZWJhcnMp
        OwoKfSkoKTsKCihmdW5jdGlvbigpIHsKZGVmaW5lKCJyb3V0ZS1yZWNvZ25p
        emVyIiwKICBbXSwKICBmdW5jdGlvbigpIHsKICAgICJ1c2Ugc3RyaWN0IjsK
        ICAgIHZhciBzcGVjaWFscyA9IFsKICAgICAgJy8nLCAnLicsICcqJywgJysn
        LCAnPycsICd8JywKICAgICAgJygnLCAnKScsICdbJywgJ10nLCAneycsICd9
        JywgJ1xcJwogICAgXTsKCiAgICB2YXIgZXNjYXBlUmVnZXggPSBuZXcgUmVn
        RXhwKCcoXFwnICsgc3BlY2lhbHMuam9pbignfFxcJykgKyAnKScsICdnJyk7
        CgogICAgLy8gQSBTZWdtZW50IHJlcHJlc2VudHMgYSBzZWdtZW50IGluIHRo
        ZSBvcmlnaW5hbCByb3V0ZSBkZXNjcmlwdGlvbi4KICAgIC8vIEVhY2ggU2Vn
        bWVudCB0eXBlIHByb3ZpZGVzIGFuIGBlYWNoQ2hhcmAgYW5kIGByZWdleGAg
        bWV0aG9kLgogICAgLy8KICAgIC8vIFRoZSBgZWFjaENoYXJgIG1ldGhvZCBp
        bnZva2VzIHRoZSBjYWxsYmFjayB3aXRoIG9uZSBvciBtb3JlIGNoYXJhY3Rl
        cgogICAgLy8gc3BlY2lmaWNhdGlvbnMuIEEgY2hhcmFjdGVyIHNwZWNpZmlj
        YXRpb24gY29uc3VtZXMgb25lIG9yIG1vcmUgaW5wdXQKICAgIC8vIGNoYXJh
        Y3RlcnMuCiAgICAvLwogICAgLy8gVGhlIGByZWdleGAgbWV0aG9kIHJldHVy
        bnMgYSByZWdleCBmcmFnbWVudCBmb3IgdGhlIHNlZ21lbnQuIElmIHRoZQog
        ICAgLy8gc2VnbWVudCBpcyBhIGR5bmFtaWMgb2Ygc3RhciBzZWdtZW50LCB0
        aGUgcmVnZXggZnJhZ21lbnQgYWxzbyBpbmNsdWRlcwogICAgLy8gYSBjYXB0
        dXJlLgogICAgLy8KICAgIC8vIEEgY2hhcmFjdGVyIHNwZWNpZmljYXRpb24g
        Y29udGFpbnM6CiAgICAvLwogICAgLy8gKiBgdmFsaWRDaGFyc2A6IGEgU3Ry
        aW5nIHdpdGggYSBsaXN0IG9mIGFsbCB2YWxpZCBjaGFyYWN0ZXJzLCBvcgog
        ICAgLy8gKiBgaW52YWxpZENoYXJzYDogYSBTdHJpbmcgd2l0aCBhIGxpc3Qg
        b2YgYWxsIGludmFsaWQgY2hhcmFjdGVycwogICAgLy8gKiBgcmVwZWF0YDog
        dHJ1ZSBpZiB0aGUgY2hhcmFjdGVyIHNwZWNpZmljYXRpb24gY2FuIHJlcGVh
        dAoKICAgIGZ1bmN0aW9uIFN0YXRpY1NlZ21lbnQoc3RyaW5nKSB7IHRoaXMu
        c3RyaW5nID0gc3RyaW5nOyB9CiAgICBTdGF0aWNTZWdtZW50LnByb3RvdHlw
        ZSA9IHsKICAgICAgZWFjaENoYXI6IGZ1bmN0aW9uKGNhbGxiYWNrKSB7CiAg
        ICAgICAgdmFyIHN0cmluZyA9IHRoaXMuc3RyaW5nLCBjaGFyOwoKICAgICAg
        ICBmb3IgKHZhciBpPTAsIGw9c3RyaW5nLmxlbmd0aDsgaTxsOyBpKyspIHsK
        ICAgICAgICAgIGNoYXIgPSBzdHJpbmcuY2hhckF0KGkpOwogICAgICAgICAg
        Y2FsbGJhY2soeyB2YWxpZENoYXJzOiBjaGFyIH0pOwogICAgICAgIH0KICAg
        ICAgfSwKCiAgICAgIHJlZ2V4OiBmdW5jdGlvbigpIHsKICAgICAgICByZXR1
        cm4gdGhpcy5zdHJpbmcucmVwbGFjZShlc2NhcGVSZWdleCwgJ1xcJDEnKTsK
        ICAgICAgfSwKCiAgICAgIGdlbmVyYXRlOiBmdW5jdGlvbigpIHsKICAgICAg
        ICByZXR1cm4gdGhpcy5zdHJpbmc7CiAgICAgIH0KICAgIH07CgogICAgZnVu
        Y3Rpb24gRHluYW1pY1NlZ21lbnQobmFtZSkgeyB0aGlzLm5hbWUgPSBuYW1l
        OyB9CiAgICBEeW5hbWljU2VnbWVudC5wcm90b3R5cGUgPSB7CiAgICAgIGVh
        Y2hDaGFyOiBmdW5jdGlvbihjYWxsYmFjaykgewogICAgICAgIGNhbGxiYWNr
        KHsgaW52YWxpZENoYXJzOiAiLyIsIHJlcGVhdDogdHJ1ZSB9KTsKICAgICAg
        fSwKCiAgICAgIHJlZ2V4OiBmdW5jdGlvbigpIHsKICAgICAgICByZXR1cm4g
        IihbXi9dKykiOwogICAgICB9LAoKICAgICAgZ2VuZXJhdGU6IGZ1bmN0aW9u
        KHBhcmFtcykgewogICAgICAgIHJldHVybiBwYXJhbXNbdGhpcy5uYW1lXTsK
        ICAgICAgfQogICAgfTsKCiAgICBmdW5jdGlvbiBTdGFyU2VnbWVudChuYW1l
        KSB7IHRoaXMubmFtZSA9IG5hbWU7IH0KICAgIFN0YXJTZWdtZW50LnByb3Rv
        dHlwZSA9IHsKICAgICAgZWFjaENoYXI6IGZ1bmN0aW9uKGNhbGxiYWNrKSB7
        CiAgICAgICAgY2FsbGJhY2soeyBpbnZhbGlkQ2hhcnM6ICIiLCByZXBlYXQ6
        IHRydWUgfSk7CiAgICAgIH0sCgogICAgICByZWdleDogZnVuY3Rpb24oKSB7
        CiAgICAgICAgcmV0dXJuICIoLispIjsKICAgICAgfSwKCiAgICAgIGdlbmVy
        YXRlOiBmdW5jdGlvbihwYXJhbXMpIHsKICAgICAgICByZXR1cm4gcGFyYW1z
        W3RoaXMubmFtZV07CiAgICAgIH0KICAgIH07CgogICAgZnVuY3Rpb24gRXBz
        aWxvblNlZ21lbnQoKSB7fQogICAgRXBzaWxvblNlZ21lbnQucHJvdG90eXBl
        ID0gewogICAgICBlYWNoQ2hhcjogZnVuY3Rpb24oKSB7fSwKICAgICAgcmVn
        ZXg6IGZ1bmN0aW9uKCkgeyByZXR1cm4gIiI7IH0sCiAgICAgIGdlbmVyYXRl
        OiBmdW5jdGlvbigpIHsgcmV0dXJuICIiOyB9CiAgICB9OwoKICAgIGZ1bmN0
        aW9uIHBhcnNlKHJvdXRlLCBuYW1lcywgdHlwZXMpIHsKICAgICAgLy8gbm9y
        bWFsaXplIHJvdXRlIGFzIG5vdCBzdGFydGluZyB3aXRoIGEgIi8iLiBSZWNv
        Z25pdGlvbiB3aWxsCiAgICAgIC8vIGFsc28gbm9ybWFsaXplLgogICAgICBp
        ZiAocm91dGUuY2hhckF0KDApID09PSAiLyIpIHsgcm91dGUgPSByb3V0ZS5z
        dWJzdHIoMSk7IH0KCiAgICAgIHZhciBzZWdtZW50cyA9IHJvdXRlLnNwbGl0
        KCIvIiksIHJlc3VsdHMgPSBbXTsKCiAgICAgIGZvciAodmFyIGk9MCwgbD1z
        ZWdtZW50cy5sZW5ndGg7IGk8bDsgaSsrKSB7CiAgICAgICAgdmFyIHNlZ21l
        bnQgPSBzZWdtZW50c1tpXSwgbWF0Y2g7CgogICAgICAgIGlmIChtYXRjaCA9
        IHNlZ21lbnQubWF0Y2goL146KFteXC9dKykkLykpIHsKICAgICAgICAgIHJl
        c3VsdHMucHVzaChuZXcgRHluYW1pY1NlZ21lbnQobWF0Y2hbMV0pKTsKICAg
        ICAgICAgIG5hbWVzLnB1c2gobWF0Y2hbMV0pOwogICAgICAgICAgdHlwZXMu
        ZHluYW1pY3MrKzsKICAgICAgICB9IGVsc2UgaWYgKG1hdGNoID0gc2VnbWVu
        dC5tYXRjaCgvXlwqKFteXC9dKykkLykpIHsKICAgICAgICAgIHJlc3VsdHMu
        cHVzaChuZXcgU3RhclNlZ21lbnQobWF0Y2hbMV0pKTsKICAgICAgICAgIG5h
        bWVzLnB1c2gobWF0Y2hbMV0pOwogICAgICAgICAgdHlwZXMuc3RhcnMrKzsK
        ICAgICAgICB9IGVsc2UgaWYoc2VnbWVudCA9PT0gIiIpIHsKICAgICAgICAg
        IHJlc3VsdHMucHVzaChuZXcgRXBzaWxvblNlZ21lbnQoKSk7CiAgICAgICAg
        fSBlbHNlIHsKICAgICAgICAgIHJlc3VsdHMucHVzaChuZXcgU3RhdGljU2Vn
        bWVudChzZWdtZW50KSk7CiAgICAgICAgICB0eXBlcy5zdGF0aWNzKys7CiAg
        ICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gcmVzdWx0czsKICAgIH0K
        CiAgICAvLyBBIFN0YXRlIGhhcyBhIGNoYXJhY3RlciBzcGVjaWZpY2F0aW9u
        IGFuZCAoYGNoYXJTcGVjYCkgYW5kIGEgbGlzdCBvZiBwb3NzaWJsZQogICAg
        Ly8gc3Vic2VxdWVudCBzdGF0ZXMgKGBuZXh0U3RhdGVzYCkuCiAgICAvLwog
        ICAgLy8gSWYgYSBTdGF0ZSBpcyBhbiBhY2NlcHRpbmcgc3RhdGUsIGl0IHdp
        bGwgYWxzbyBoYXZlIHNldmVyYWwgYWRkaXRpb25hbAogICAgLy8gcHJvcGVy
        dGllczoKICAgIC8vCiAgICAvLyAqIGByZWdleGA6IEEgcmVndWxhciBleHBy
        ZXNzaW9uIHRoYXQgaXMgdXNlZCB0byBleHRyYWN0IHBhcmFtZXRlcnMgZnJv
        bSBwYXRocwogICAgLy8gICB0aGF0IHJlYWNoZWQgdGhpcyBhY2NlcHRpbmcg
        c3RhdGUuCiAgICAvLyAqIGBoYW5kbGVyc2A6IEluZm9ybWF0aW9uIG9uIGhv
        dyB0byBjb252ZXJ0IHRoZSBsaXN0IG9mIGNhcHR1cmVzIGludG8gY2FsbHMK
        ICAgIC8vICAgdG8gcmVnaXN0ZXJlZCBoYW5kbGVycyB3aXRoIHRoZSBzcGVj
        aWZpZWQgcGFyYW1ldGVycwogICAgLy8gKiBgdHlwZXNgOiBIb3cgbWFueSBz
        dGF0aWMsIGR5bmFtaWMgb3Igc3RhciBzZWdtZW50cyBpbiB0aGlzIHJvdXRl
        LiBVc2VkIHRvCiAgICAvLyAgIGRlY2lkZSB3aGljaCByb3V0ZSB0byB1c2Ug
        aWYgbXVsdGlwbGUgcmVnaXN0ZXJlZCByb3V0ZXMgbWF0Y2ggYSBwYXRoLgog
        ICAgLy8KICAgIC8vIEN1cnJlbnRseSwgU3RhdGUgaXMgaW1wbGVtZW50ZWQg
        bmFpdmVseSBieSBsb29waW5nIG92ZXIgYG5leHRTdGF0ZXNgIGFuZAogICAg
        Ly8gY29tcGFyaW5nIGEgY2hhcmFjdGVyIHNwZWNpZmljYXRpb24gYWdhaW5z
        dCBhIGNoYXJhY3Rlci4gQSBtb3JlIGVmZmljaWVudAogICAgLy8gaW1wbGVt
        ZW50YXRpb24gd291bGQgdXNlIGEgaGFzaCBvZiBrZXlzIHBvaW50aW5nIGF0
        IG9uZSBvciBtb3JlIG5leHQgc3RhdGVzLgoKICAgIGZ1bmN0aW9uIFN0YXRl
        KGNoYXJTcGVjKSB7CiAgICAgIHRoaXMuY2hhclNwZWMgPSBjaGFyU3BlYzsK
        ICAgICAgdGhpcy5uZXh0U3RhdGVzID0gW107CiAgICB9CgogICAgU3RhdGUu
        cHJvdG90eXBlID0gewogICAgICBnZXQ6IGZ1bmN0aW9uKGNoYXJTcGVjKSB7
        CiAgICAgICAgdmFyIG5leHRTdGF0ZXMgPSB0aGlzLm5leHRTdGF0ZXM7Cgog
        ICAgICAgIGZvciAodmFyIGk9MCwgbD1uZXh0U3RhdGVzLmxlbmd0aDsgaTxs
        OyBpKyspIHsKICAgICAgICAgIHZhciBjaGlsZCA9IG5leHRTdGF0ZXNbaV07
        CgogICAgICAgICAgdmFyIGlzRXF1YWwgPSBjaGlsZC5jaGFyU3BlYy52YWxp
        ZENoYXJzID09PSBjaGFyU3BlYy52YWxpZENoYXJzOwogICAgICAgICAgaXNF
        cXVhbCA9IGlzRXF1YWwgJiYgY2hpbGQuY2hhclNwZWMuaW52YWxpZENoYXJz
        ID09PSBjaGFyU3BlYy5pbnZhbGlkQ2hhcnM7CgogICAgICAgICAgaWYgKGlz
        RXF1YWwpIHsgcmV0dXJuIGNoaWxkOyB9CiAgICAgICAgfQogICAgICB9LAoK
        ICAgICAgcHV0OiBmdW5jdGlvbihjaGFyU3BlYykgewogICAgICAgIHZhciBz
        dGF0ZTsKCiAgICAgICAgLy8gSWYgdGhlIGNoYXJhY3RlciBzcGVjaWZpY2F0
        aW9uIGFscmVhZHkgZXhpc3RzIGluIGEgY2hpbGQgb2YgdGhlIGN1cnJlbnQK
        ICAgICAgICAvLyBzdGF0ZSwganVzdCByZXR1cm4gdGhhdCBzdGF0ZS4KICAg
        ICAgICBpZiAoc3RhdGUgPSB0aGlzLmdldChjaGFyU3BlYykpIHsgcmV0dXJu
        IHN0YXRlOyB9CgogICAgICAgIC8vIE1ha2UgYSBuZXcgc3RhdGUgZm9yIHRo
        ZSBjaGFyYWN0ZXIgc3BlYwogICAgICAgIHN0YXRlID0gbmV3IFN0YXRlKGNo
        YXJTcGVjKTsKCiAgICAgICAgLy8gSW5zZXJ0IHRoZSBuZXcgc3RhdGUgYXMg
        YSBjaGlsZCBvZiB0aGUgY3VycmVudCBzdGF0ZQogICAgICAgIHRoaXMubmV4
        dFN0YXRlcy5wdXNoKHN0YXRlKTsKCiAgICAgICAgLy8gSWYgdGhpcyBjaGFy
        YWN0ZXIgc3BlY2lmaWNhdGlvbiByZXBlYXRzLCBpbnNlcnQgdGhlIG5ldyBz
        dGF0ZSBhcyBhIGNoaWxkCiAgICAgICAgLy8gb2YgaXRzZWxmLiBOb3RlIHRo
        YXQgdGhpcyB3aWxsIG5vdCB0cmlnZ2VyIGFuIGluZmluaXRlIGxvb3AgYmVj
        YXVzZSBlYWNoCiAgICAgICAgLy8gdHJhbnNpdGlvbiBkdXJpbmcgcmVjb2du
        aXRpb24gY29uc3VtZXMgYSBjaGFyYWN0ZXIuCiAgICAgICAgaWYgKGNoYXJT
        cGVjLnJlcGVhdCkgewogICAgICAgICAgc3RhdGUubmV4dFN0YXRlcy5wdXNo
        KHN0YXRlKTsKICAgICAgICB9CgogICAgICAgIC8vIFJldHVybiB0aGUgbmV3
        IHN0YXRlCiAgICAgICAgcmV0dXJuIHN0YXRlOwogICAgICB9LAoKICAgICAg
        Ly8gRmluZCBhIGxpc3Qgb2YgY2hpbGQgc3RhdGVzIG1hdGNoaW5nIHRoZSBu
        ZXh0IGNoYXJhY3RlcgogICAgICBtYXRjaDogZnVuY3Rpb24oY2hhcikgewog
        ICAgICAgIC8vIERFQlVHICJQcm9jZXNzaW5nIGAiICsgY2hhciArICJgOiIK
        ICAgICAgICB2YXIgbmV4dFN0YXRlcyA9IHRoaXMubmV4dFN0YXRlcywKICAg
        ICAgICAgICAgY2hpbGQsIGNoYXJTcGVjLCBjaGFyczsKCiAgICAgICAgLy8g
        REVCVUcgIiAgIiArIGRlYnVnU3RhdGUodGhpcykKICAgICAgICB2YXIgcmV0
        dXJuZWQgPSBbXTsKCiAgICAgICAgZm9yICh2YXIgaT0wLCBsPW5leHRTdGF0
        ZXMubGVuZ3RoOyBpPGw7IGkrKykgewogICAgICAgICAgY2hpbGQgPSBuZXh0
        U3RhdGVzW2ldOwoKICAgICAgICAgIGNoYXJTcGVjID0gY2hpbGQuY2hhclNw
        ZWM7CgogICAgICAgICAgaWYgKHR5cGVvZiAoY2hhcnMgPSBjaGFyU3BlYy52
        YWxpZENoYXJzKSAhPT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgICAgICAgaWYg
        KGNoYXJzLmluZGV4T2YoY2hhcikgIT09IC0xKSB7IHJldHVybmVkLnB1c2go
        Y2hpbGQpOyB9CiAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiAoY2hhcnMg
        PSBjaGFyU3BlYy5pbnZhbGlkQ2hhcnMpICE9PSAndW5kZWZpbmVkJykgewog
        ICAgICAgICAgICBpZiAoY2hhcnMuaW5kZXhPZihjaGFyKSA9PT0gLTEpIHsg
        cmV0dXJuZWQucHVzaChjaGlsZCk7IH0KICAgICAgICAgIH0KICAgICAgICB9
        CgogICAgICAgIHJldHVybiByZXR1cm5lZDsKICAgICAgfQoKICAgICAgLyoq
        IElGIERFQlVHCiAgICAgICwgZGVidWc6IGZ1bmN0aW9uKCkgewogICAgICAg
        IHZhciBjaGFyU3BlYyA9IHRoaXMuY2hhclNwZWMsCiAgICAgICAgICAgIGRl
        YnVnID0gIlsiLAogICAgICAgICAgICBjaGFycyA9IGNoYXJTcGVjLnZhbGlk
        Q2hhcnMgfHwgY2hhclNwZWMuaW52YWxpZENoYXJzOwoKICAgICAgICBpZiAo
        Y2hhclNwZWMuaW52YWxpZENoYXJzKSB7IGRlYnVnICs9ICJeIjsgfQogICAg
        ICAgIGRlYnVnICs9IGNoYXJzOwogICAgICAgIGRlYnVnICs9ICJdIjsKCiAg
        ICAgICAgaWYgKGNoYXJTcGVjLnJlcGVhdCkgeyBkZWJ1ZyArPSAiKyI7IH0K
        CiAgICAgICAgcmV0dXJuIGRlYnVnOwogICAgICB9CiAgICAgIEVORCBJRiAq
        Ki8KICAgIH07CgogICAgLyoqIElGIERFQlVHCiAgICBmdW5jdGlvbiBkZWJ1
        Zyhsb2cpIHsKICAgICAgY29uc29sZS5sb2cobG9nKTsKICAgIH0KCiAgICBm
        dW5jdGlvbiBkZWJ1Z1N0YXRlKHN0YXRlKSB7CiAgICAgIHJldHVybiBzdGF0
        ZS5uZXh0U3RhdGVzLm1hcChmdW5jdGlvbihuKSB7CiAgICAgICAgaWYgKG4u
        bmV4dFN0YXRlcy5sZW5ndGggPT09IDApIHsgcmV0dXJuICIoICIgKyBuLmRl
        YnVnKCkgKyAiIFthY2NlcHRpbmddICkiOyB9CiAgICAgICAgcmV0dXJuICIo
        ICIgKyBuLmRlYnVnKCkgKyAiIDx0aGVuPiAiICsgbi5uZXh0U3RhdGVzLm1h
        cChmdW5jdGlvbihzKSB7IHJldHVybiBzLmRlYnVnKCkgfSkuam9pbigiIG9y
        ICIpICsgIiApIjsKICAgICAgfSkuam9pbigiLCAiKQogICAgfQogICAgRU5E
        IElGICoqLwoKICAgIC8vIFRoaXMgaXMgYSBzb21ld2hhdCBuYWl2ZSBzdHJh
        dGVneSwgYnV0IHNob3VsZCB3b3JrIGluIGEgbG90IG9mIGNhc2VzCiAgICAv
        LyBBIGJldHRlciBzdHJhdGVneSB3b3VsZCBwcm9wZXJseSByZXNvbHZlIC9w
        b3N0cy86aWQvbmV3IGFuZCAvcG9zdHMvZWRpdC86aWQKICAgIGZ1bmN0aW9u
        IHNvcnRTb2x1dGlvbnMoc3RhdGVzKSB7CiAgICAgIHJldHVybiBzdGF0ZXMu
        c29ydChmdW5jdGlvbihhLCBiKSB7CiAgICAgICAgaWYgKGEudHlwZXMuc3Rh
        cnMgIT09IGIudHlwZXMuc3RhcnMpIHsgcmV0dXJuIGEudHlwZXMuc3RhcnMg
        LSBiLnR5cGVzLnN0YXJzOyB9CiAgICAgICAgaWYgKGEudHlwZXMuZHluYW1p
        Y3MgIT09IGIudHlwZXMuZHluYW1pY3MpIHsgcmV0dXJuIGEudHlwZXMuZHlu
        YW1pY3MgLSBiLnR5cGVzLmR5bmFtaWNzOyB9CiAgICAgICAgaWYgKGEudHlw
        ZXMuc3RhdGljcyAhPT0gYi50eXBlcy5zdGF0aWNzKSB7IHJldHVybiBhLnR5
        cGVzLnN0YXRpY3MgLSBiLnR5cGVzLnN0YXRpY3M7IH0KCiAgICAgICAgcmV0
        dXJuIDA7CiAgICAgIH0pOwogICAgfQoKICAgIGZ1bmN0aW9uIHJlY29nbml6
        ZUNoYXIoc3RhdGVzLCBjaGFyKSB7CiAgICAgIHZhciBuZXh0U3RhdGVzID0g
        W107CgogICAgICBmb3IgKHZhciBpPTAsIGw9c3RhdGVzLmxlbmd0aDsgaTxs
        OyBpKyspIHsKICAgICAgICB2YXIgc3RhdGUgPSBzdGF0ZXNbaV07CgogICAg
        ICAgIG5leHRTdGF0ZXMgPSBuZXh0U3RhdGVzLmNvbmNhdChzdGF0ZS5tYXRj
        aChjaGFyKSk7CiAgICAgIH0KCiAgICAgIHJldHVybiBuZXh0U3RhdGVzOwog
        ICAgfQoKICAgIGZ1bmN0aW9uIGZpbmRIYW5kbGVyKHN0YXRlLCBwYXRoLCBx
        dWVyeVBhcmFtcykgewogICAgICB2YXIgaGFuZGxlcnMgPSBzdGF0ZS5oYW5k
        bGVycywgcmVnZXggPSBzdGF0ZS5yZWdleDsKICAgICAgdmFyIGNhcHR1cmVz
        ID0gcGF0aC5tYXRjaChyZWdleCksIGN1cnJlbnRDYXB0dXJlID0gMTsKICAg
        ICAgdmFyIHJlc3VsdCA9IFtdOwoKICAgICAgZm9yICh2YXIgaT0wLCBsPWhh
        bmRsZXJzLmxlbmd0aDsgaTxsOyBpKyspIHsKICAgICAgICB2YXIgaGFuZGxl
        ciA9IGhhbmRsZXJzW2ldLCBuYW1lcyA9IGhhbmRsZXIubmFtZXMsIHBhcmFt
        cyA9IHt9LAogICAgICAgICAgd2F0Y2hlZFF1ZXJ5UGFyYW1zID0gaGFuZGxl
        ci5xdWVyeVBhcmFtcyB8fCBbXSwKICAgICAgICAgIGFjdGl2ZVF1ZXJ5UGFy
        YW1zID0ge30sCiAgICAgICAgICBqLCBtOwoKICAgICAgICBmb3IgKGo9MCwg
        bT1uYW1lcy5sZW5ndGg7IGo8bTsgaisrKSB7CiAgICAgICAgICBwYXJhbXNb
        bmFtZXNbal1dID0gY2FwdHVyZXNbY3VycmVudENhcHR1cmUrK107CiAgICAg
        ICAgfQogICAgICAgIGZvciAoaj0wLCBtPXdhdGNoZWRRdWVyeVBhcmFtcy5s
        ZW5ndGg7IGogPCBtOyBqKyspIHsKICAgICAgICAgIHZhciBrZXkgPSB3YXRj
        aGVkUXVlcnlQYXJhbXNbal07CiAgICAgICAgICBpZihxdWVyeVBhcmFtc1tr
        ZXldKXsKICAgICAgICAgICAgYWN0aXZlUXVlcnlQYXJhbXNba2V5XSA9IHF1
        ZXJ5UGFyYW1zW2tleV07CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAg
        IHZhciBjdXJyZW50UmVzdWx0ID0geyBoYW5kbGVyOiBoYW5kbGVyLmhhbmRs
        ZXIsIHBhcmFtczogcGFyYW1zLCBpc0R5bmFtaWM6ICEhbmFtZXMubGVuZ3Ro
        IH07CiAgICAgICAgaWYod2F0Y2hlZFF1ZXJ5UGFyYW1zICYmIHdhdGNoZWRR
        dWVyeVBhcmFtcy5sZW5ndGggPiAwKSB7CiAgICAgICAgICBjdXJyZW50UmVz
        dWx0LnF1ZXJ5UGFyYW1zID0gYWN0aXZlUXVlcnlQYXJhbXM7CiAgICAgICAg
        fQogICAgICAgIHJlc3VsdC5wdXNoKGN1cnJlbnRSZXN1bHQpOwogICAgICB9
        CgogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQoKICAgIGZ1bmN0aW9uIGFk
        ZFNlZ21lbnQoY3VycmVudFN0YXRlLCBzZWdtZW50KSB7CiAgICAgIHNlZ21l
        bnQuZWFjaENoYXIoZnVuY3Rpb24oY2hhcikgewogICAgICAgIHZhciBzdGF0
        ZTsKCiAgICAgICAgY3VycmVudFN0YXRlID0gY3VycmVudFN0YXRlLnB1dChj
        aGFyKTsKICAgICAgfSk7CgogICAgICByZXR1cm4gY3VycmVudFN0YXRlOwog
        ICAgfQoKICAgIC8vIFRoZSBtYWluIGludGVyZmFjZQoKICAgIHZhciBSb3V0
        ZVJlY29nbml6ZXIgPSBmdW5jdGlvbigpIHsKICAgICAgdGhpcy5yb290U3Rh
        dGUgPSBuZXcgU3RhdGUoKTsKICAgICAgdGhpcy5uYW1lcyA9IHt9OwogICAg
        fTsKCgogICAgUm91dGVSZWNvZ25pemVyLnByb3RvdHlwZSA9IHsKICAgICAg
        YWRkOiBmdW5jdGlvbihyb3V0ZXMsIG9wdGlvbnMpIHsKICAgICAgICB2YXIg
        Y3VycmVudFN0YXRlID0gdGhpcy5yb290U3RhdGUsIHJlZ2V4ID0gIl4iLAog
        ICAgICAgICAgICB0eXBlcyA9IHsgc3RhdGljczogMCwgZHluYW1pY3M6IDAs
        IHN0YXJzOiAwIH0sCiAgICAgICAgICAgIGhhbmRsZXJzID0gW10sIGFsbFNl
        Z21lbnRzID0gW10sIG5hbWU7CgogICAgICAgIHZhciBpc0VtcHR5ID0gdHJ1
        ZTsKCiAgICAgICAgZm9yICh2YXIgaT0wLCBsPXJvdXRlcy5sZW5ndGg7IGk8
        bDsgaSsrKSB7CiAgICAgICAgICB2YXIgcm91dGUgPSByb3V0ZXNbaV0sIG5h
        bWVzID0gW107CgogICAgICAgICAgdmFyIHNlZ21lbnRzID0gcGFyc2Uocm91
        dGUucGF0aCwgbmFtZXMsIHR5cGVzKTsKCiAgICAgICAgICBhbGxTZWdtZW50
        cyA9IGFsbFNlZ21lbnRzLmNvbmNhdChzZWdtZW50cyk7CgogICAgICAgICAg
        Zm9yICh2YXIgaj0wLCBtPXNlZ21lbnRzLmxlbmd0aDsgajxtOyBqKyspIHsK
        ICAgICAgICAgICAgdmFyIHNlZ21lbnQgPSBzZWdtZW50c1tqXTsKCiAgICAg
        ICAgICAgIGlmIChzZWdtZW50IGluc3RhbmNlb2YgRXBzaWxvblNlZ21lbnQp
        IHsgY29udGludWU7IH0KCiAgICAgICAgICAgIGlzRW1wdHkgPSBmYWxzZTsK
        CiAgICAgICAgICAgIC8vIEFkZCBhICIvIiBmb3IgdGhlIG5ldyBzZWdtZW50
        CiAgICAgICAgICAgIGN1cnJlbnRTdGF0ZSA9IGN1cnJlbnRTdGF0ZS5wdXQo
        eyB2YWxpZENoYXJzOiAiLyIgfSk7CiAgICAgICAgICAgIHJlZ2V4ICs9ICIv
        IjsKCiAgICAgICAgICAgIC8vIEFkZCBhIHJlcHJlc2VudGF0aW9uIG9mIHRo
        ZSBzZWdtZW50IHRvIHRoZSBORkEgYW5kIHJlZ2V4CiAgICAgICAgICAgIGN1
        cnJlbnRTdGF0ZSA9IGFkZFNlZ21lbnQoY3VycmVudFN0YXRlLCBzZWdtZW50
        KTsKICAgICAgICAgICAgcmVnZXggKz0gc2VnbWVudC5yZWdleCgpOwogICAg
        ICAgICAgfQoKICAgICAgICAgIHZhciBoYW5kbGVyID0geyBoYW5kbGVyOiBy
        b3V0ZS5oYW5kbGVyLCBuYW1lczogbmFtZXMgfTsKICAgICAgICAgIGlmKHJv
        dXRlLnF1ZXJ5UGFyYW1zKSB7CiAgICAgICAgICAgIGhhbmRsZXIucXVlcnlQ
        YXJhbXMgPSByb3V0ZS5xdWVyeVBhcmFtczsKICAgICAgICAgIH0KICAgICAg
        ICAgIGhhbmRsZXJzLnB1c2goaGFuZGxlcik7CiAgICAgICAgfQoKICAgICAg
        ICBpZiAoaXNFbXB0eSkgewogICAgICAgICAgY3VycmVudFN0YXRlID0gY3Vy
        cmVudFN0YXRlLnB1dCh7IHZhbGlkQ2hhcnM6ICIvIiB9KTsKICAgICAgICAg
        IHJlZ2V4ICs9ICIvIjsKICAgICAgICB9CgogICAgICAgIGN1cnJlbnRTdGF0
        ZS5oYW5kbGVycyA9IGhhbmRsZXJzOwogICAgICAgIGN1cnJlbnRTdGF0ZS5y
        ZWdleCA9IG5ldyBSZWdFeHAocmVnZXggKyAiJCIpOwogICAgICAgIGN1cnJl
        bnRTdGF0ZS50eXBlcyA9IHR5cGVzOwoKICAgICAgICBpZiAobmFtZSA9IG9w
        dGlvbnMgJiYgb3B0aW9ucy5hcykgewogICAgICAgICAgdGhpcy5uYW1lc1tu
        YW1lXSA9IHsKICAgICAgICAgICAgc2VnbWVudHM6IGFsbFNlZ21lbnRzLAog
        ICAgICAgICAgICBoYW5kbGVyczogaGFuZGxlcnMKICAgICAgICAgIH07CiAg
        ICAgICAgfQogICAgICB9LAoKICAgICAgaGFuZGxlcnNGb3I6IGZ1bmN0aW9u
        KG5hbWUpIHsKICAgICAgICB2YXIgcm91dGUgPSB0aGlzLm5hbWVzW25hbWVd
        LCByZXN1bHQgPSBbXTsKICAgICAgICBpZiAoIXJvdXRlKSB7IHRocm93IG5l
        dyBFcnJvcigiVGhlcmUgaXMgbm8gcm91dGUgbmFtZWQgIiArIG5hbWUpOyB9
        CgogICAgICAgIGZvciAodmFyIGk9MCwgbD1yb3V0ZS5oYW5kbGVycy5sZW5n
        dGg7IGk8bDsgaSsrKSB7CiAgICAgICAgICByZXN1bHQucHVzaChyb3V0ZS5o
        YW5kbGVyc1tpXSk7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gcmVzdWx0
        OwogICAgICB9LAoKICAgICAgaGFzUm91dGU6IGZ1bmN0aW9uKG5hbWUpIHsK
        ICAgICAgICByZXR1cm4gISF0aGlzLm5hbWVzW25hbWVdOwogICAgICB9LAoK
        ICAgICAgZ2VuZXJhdGU6IGZ1bmN0aW9uKG5hbWUsIHBhcmFtcykgewogICAg
        ICAgIHZhciByb3V0ZSA9IHRoaXMubmFtZXNbbmFtZV0sIG91dHB1dCA9ICIi
        OwogICAgICAgIGlmICghcm91dGUpIHsgdGhyb3cgbmV3IEVycm9yKCJUaGVy
        ZSBpcyBubyByb3V0ZSBuYW1lZCAiICsgbmFtZSk7IH0KCiAgICAgICAgdmFy
        IHNlZ21lbnRzID0gcm91dGUuc2VnbWVudHM7CgogICAgICAgIGZvciAodmFy
        IGk9MCwgbD1zZWdtZW50cy5sZW5ndGg7IGk8bDsgaSsrKSB7CiAgICAgICAg
        ICB2YXIgc2VnbWVudCA9IHNlZ21lbnRzW2ldOwoKICAgICAgICAgIGlmIChz
        ZWdtZW50IGluc3RhbmNlb2YgRXBzaWxvblNlZ21lbnQpIHsgY29udGludWU7
        IH0KCiAgICAgICAgICBvdXRwdXQgKz0gIi8iOwogICAgICAgICAgb3V0cHV0
        ICs9IHNlZ21lbnQuZ2VuZXJhdGUocGFyYW1zKTsKICAgICAgICB9CgogICAg
        ICAgIGlmIChvdXRwdXQuY2hhckF0KDApICE9PSAnLycpIHsgb3V0cHV0ID0g
        Jy8nICsgb3V0cHV0OyB9CgogICAgICAgIGlmIChwYXJhbXMgJiYgcGFyYW1z
        LnF1ZXJ5UGFyYW1zKSB7CiAgICAgICAgICBvdXRwdXQgKz0gdGhpcy5nZW5l
        cmF0ZVF1ZXJ5U3RyaW5nKHBhcmFtcy5xdWVyeVBhcmFtcywgcm91dGUuaGFu
        ZGxlcnMpOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIG91dHB1dDsKICAg
        ICAgfSwKCiAgICAgIGdlbmVyYXRlUXVlcnlTdHJpbmc6IGZ1bmN0aW9uKHBh
        cmFtcywgaGFuZGxlcnMpIHsKICAgICAgICB2YXIgcGFpcnMgPSBbXSwgYWxs
        b3dlZFBhcmFtcyA9IFtdOwogICAgICAgIGZvcih2YXIgaT0wOyBpIDwgaGFu
        ZGxlcnMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIHZhciBjdXJyZW50UGFy
        YW1MaXN0ID0gaGFuZGxlcnNbaV0ucXVlcnlQYXJhbXM7CiAgICAgICAgICBp
        ZihjdXJyZW50UGFyYW1MaXN0KSB7CiAgICAgICAgICAgIGFsbG93ZWRQYXJh
        bXMucHVzaC5hcHBseShhbGxvd2VkUGFyYW1zLCBjdXJyZW50UGFyYW1MaXN0
        KTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgZm9yKHZhciBrZXkg
        aW4gcGFyYW1zKSB7CiAgICAgICAgICBpZiAocGFyYW1zLmhhc093blByb3Bl
        cnR5KGtleSkpIHsKICAgICAgICAgICAgaWYoYWxsb3dlZFBhcmFtcy5pbmRl
        eE9mKGtleSkgPT09IC0xKSB7CiAgICAgICAgICAgICAgdGhyb3cgJ1F1ZXJ5
        IHBhcmFtICInICsga2V5ICsgJyIgaXMgbm90IHNwZWNpZmllZCBhcyBhIHZh
        bGlkIHBhcmFtIGZvciB0aGlzIHJvdXRlJzsKICAgICAgICAgICAgfQogICAg
        ICAgICAgICB2YXIgdmFsdWUgPSBwYXJhbXNba2V5XTsKICAgICAgICAgICAg
        dmFyIHBhaXIgPSBlbmNvZGVVUklDb21wb25lbnQoa2V5KTsKICAgICAgICAg
        ICAgaWYodmFsdWUgIT09IHRydWUpIHsKICAgICAgICAgICAgICBwYWlyICs9
        ICI9IiArIGVuY29kZVVSSUNvbXBvbmVudCh2YWx1ZSk7CiAgICAgICAgICAg
        IH0KICAgICAgICAgICAgcGFpcnMucHVzaChwYWlyKTsKICAgICAgICAgIH0K
        ICAgICAgICB9CgogICAgICAgIGlmIChwYWlycy5sZW5ndGggPT09IDApIHsg
        cmV0dXJuICcnOyB9CgogICAgICAgIHJldHVybiAiPyIgKyBwYWlycy5qb2lu
        KCImIik7CiAgICAgIH0sCgogICAgICBwYXJzZVF1ZXJ5U3RyaW5nOiBmdW5j
        dGlvbihxdWVyeVN0cmluZykgewogICAgICAgIHZhciBwYWlycyA9IHF1ZXJ5
        U3RyaW5nLnNwbGl0KCImIiksIHF1ZXJ5UGFyYW1zID0ge307CiAgICAgICAg
        Zm9yKHZhciBpPTA7IGkgPCBwYWlycy5sZW5ndGg7IGkrKykgewogICAgICAg
        ICAgdmFyIHBhaXIgICAgICA9IHBhaXJzW2ldLnNwbGl0KCc9JyksCiAgICAg
        ICAgICAgICAga2V5ICAgICAgID0gZGVjb2RlVVJJQ29tcG9uZW50KHBhaXJb
        MF0pLAogICAgICAgICAgICAgIHZhbHVlICAgICA9IHBhaXJbMV0gPyBkZWNv
        ZGVVUklDb21wb25lbnQocGFpclsxXSkgOiB0cnVlOwogICAgICAgICAgcXVl
        cnlQYXJhbXNba2V5XSA9IHZhbHVlOwogICAgICAgIH0KICAgICAgICByZXR1
        cm4gcXVlcnlQYXJhbXM7CiAgICAgIH0sCgogICAgICByZWNvZ25pemU6IGZ1
        bmN0aW9uKHBhdGgpIHsKICAgICAgICB2YXIgc3RhdGVzID0gWyB0aGlzLnJv
        b3RTdGF0ZSBdLAogICAgICAgICAgICBwYXRoTGVuLCBpLCBsLCBxdWVyeVN0
        YXJ0LCBxdWVyeVBhcmFtcyA9IHt9OwoKICAgICAgICBxdWVyeVN0YXJ0ID0g
        cGF0aC5pbmRleE9mKCc/Jyk7CiAgICAgICAgaWYgKHF1ZXJ5U3RhcnQgIT09
        IC0xKSB7CiAgICAgICAgICB2YXIgcXVlcnlTdHJpbmcgPSBwYXRoLnN1YnN0
        cihxdWVyeVN0YXJ0ICsgMSwgcGF0aC5sZW5ndGgpOwogICAgICAgICAgcGF0
        aCA9IHBhdGguc3Vic3RyKDAsIHF1ZXJ5U3RhcnQpOwogICAgICAgICAgcXVl
        cnlQYXJhbXMgPSB0aGlzLnBhcnNlUXVlcnlTdHJpbmcocXVlcnlTdHJpbmcp
        OwogICAgICAgIH0KCiAgICAgICAgLy8gREVCVUcgR1JPVVAgcGF0aAoKICAg
        ICAgICBpZiAocGF0aC5jaGFyQXQoMCkgIT09ICIvIikgeyBwYXRoID0gIi8i
        ICsgcGF0aDsgfQoKICAgICAgICBwYXRoTGVuID0gcGF0aC5sZW5ndGg7CiAg
        ICAgICAgaWYgKHBhdGhMZW4gPiAxICYmIHBhdGguY2hhckF0KHBhdGhMZW4g
        LSAxKSA9PT0gIi8iKSB7CiAgICAgICAgICBwYXRoID0gcGF0aC5zdWJzdHIo
        MCwgcGF0aExlbiAtIDEpOwogICAgICAgIH0KCiAgICAgICAgZm9yIChpPTAs
        IGw9cGF0aC5sZW5ndGg7IGk8bDsgaSsrKSB7CiAgICAgICAgICBzdGF0ZXMg
        PSByZWNvZ25pemVDaGFyKHN0YXRlcywgcGF0aC5jaGFyQXQoaSkpOwogICAg
        ICAgICAgaWYgKCFzdGF0ZXMubGVuZ3RoKSB7IGJyZWFrOyB9CiAgICAgICAg
        fQoKICAgICAgICAvLyBFTkQgREVCVUcgR1JPVVAKCiAgICAgICAgdmFyIHNv
        bHV0aW9ucyA9IFtdOwogICAgICAgIGZvciAoaT0wLCBsPXN0YXRlcy5sZW5n
        dGg7IGk8bDsgaSsrKSB7CiAgICAgICAgICBpZiAoc3RhdGVzW2ldLmhhbmRs
        ZXJzKSB7IHNvbHV0aW9ucy5wdXNoKHN0YXRlc1tpXSk7IH0KICAgICAgICB9
        CgogICAgICAgIHN0YXRlcyA9IHNvcnRTb2x1dGlvbnMoc29sdXRpb25zKTsK
        CiAgICAgICAgdmFyIHN0YXRlID0gc29sdXRpb25zWzBdOwoKICAgICAgICBp
        ZiAoc3RhdGUgJiYgc3RhdGUuaGFuZGxlcnMpIHsKICAgICAgICAgIHJldHVy
        biBmaW5kSGFuZGxlcihzdGF0ZSwgcGF0aCwgcXVlcnlQYXJhbXMpOwogICAg
        ICAgIH0KICAgICAgfQogICAgfTsKCiAgICBmdW5jdGlvbiBUYXJnZXQocGF0
        aCwgbWF0Y2hlciwgZGVsZWdhdGUpIHsKICAgICAgdGhpcy5wYXRoID0gcGF0
        aDsKICAgICAgdGhpcy5tYXRjaGVyID0gbWF0Y2hlcjsKICAgICAgdGhpcy5k
        ZWxlZ2F0ZSA9IGRlbGVnYXRlOwogICAgfQoKICAgIFRhcmdldC5wcm90b3R5
        cGUgPSB7CiAgICAgIHRvOiBmdW5jdGlvbih0YXJnZXQsIGNhbGxiYWNrKSB7
        CiAgICAgICAgdmFyIGRlbGVnYXRlID0gdGhpcy5kZWxlZ2F0ZTsKCiAgICAg
        ICAgaWYgKGRlbGVnYXRlICYmIGRlbGVnYXRlLndpbGxBZGRSb3V0ZSkgewog
        ICAgICAgICAgdGFyZ2V0ID0gZGVsZWdhdGUud2lsbEFkZFJvdXRlKHRoaXMu
        bWF0Y2hlci50YXJnZXQsIHRhcmdldCk7CiAgICAgICAgfQoKICAgICAgICB0
        aGlzLm1hdGNoZXIuYWRkKHRoaXMucGF0aCwgdGFyZ2V0KTsKCiAgICAgICAg
        aWYgKGNhbGxiYWNrKSB7CiAgICAgICAgICBpZiAoY2FsbGJhY2subGVuZ3Ro
        ID09PSAwKSB7IHRocm93IG5ldyBFcnJvcigiWW91IG11c3QgaGF2ZSBhbiBh
        cmd1bWVudCBpbiB0aGUgZnVuY3Rpb24gcGFzc2VkIHRvIGB0b2AiKTsgfQog
        ICAgICAgICAgdGhpcy5tYXRjaGVyLmFkZENoaWxkKHRoaXMucGF0aCwgdGFy
        Z2V0LCBjYWxsYmFjaywgdGhpcy5kZWxlZ2F0ZSk7CiAgICAgICAgfQogICAg
        ICAgIHJldHVybiB0aGlzOwogICAgICB9LAoKICAgICAgd2l0aFF1ZXJ5UGFy
        YW1zOiBmdW5jdGlvbigpIHsKICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0
        aCA9PT0gMCkgeyB0aHJvdyBuZXcgRXJyb3IoInlvdSBtdXN0IHByb3ZpZGUg
        YXJndW1lbnRzIHRvIHRoZSB3aXRoUXVlcnlQYXJhbXMgbWV0aG9kIik7IH0K
        ICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7
        IGkrKykgewogICAgICAgICAgaWYgKHR5cGVvZiBhcmd1bWVudHNbaV0gIT09
        ICJzdHJpbmciKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigneW91
        IHNob3VsZCBjYWxsIHdpdGhRdWVyeVBhcmFtcyB3aXRoIGEgbGlzdCBvZiBz
        dHJpbmdzLCBlLmcuIHdpdGhRdWVyeVBhcmFtcygiZm9vIiwgImJhciIpJyk7
        CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHZhciBxdWVyeVBhcmFt
        cyA9IFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzKTsKICAgICAgICB0aGlzLm1h
        dGNoZXIuYWRkUXVlcnlQYXJhbXModGhpcy5wYXRoLCBxdWVyeVBhcmFtcyk7
        CiAgICAgIH0KICAgIH07CgogICAgZnVuY3Rpb24gTWF0Y2hlcih0YXJnZXQp
        IHsKICAgICAgdGhpcy5yb3V0ZXMgPSB7fTsKICAgICAgdGhpcy5jaGlsZHJl
        biA9IHt9OwogICAgICB0aGlzLnF1ZXJ5UGFyYW1zID0ge307CiAgICAgIHRo
        aXMudGFyZ2V0ID0gdGFyZ2V0OwogICAgfQoKICAgIE1hdGNoZXIucHJvdG90
        eXBlID0gewogICAgICBhZGQ6IGZ1bmN0aW9uKHBhdGgsIGhhbmRsZXIpIHsK
        ICAgICAgICB0aGlzLnJvdXRlc1twYXRoXSA9IGhhbmRsZXI7CiAgICAgIH0s
        CgogICAgICBhZGRRdWVyeVBhcmFtczogZnVuY3Rpb24ocGF0aCwgcGFyYW1z
        KSB7CiAgICAgICAgdGhpcy5xdWVyeVBhcmFtc1twYXRoXSA9IHBhcmFtczsK
        ICAgICAgfSwKCiAgICAgIGFkZENoaWxkOiBmdW5jdGlvbihwYXRoLCB0YXJn
        ZXQsIGNhbGxiYWNrLCBkZWxlZ2F0ZSkgewogICAgICAgIHZhciBtYXRjaGVy
        ID0gbmV3IE1hdGNoZXIodGFyZ2V0KTsKICAgICAgICB0aGlzLmNoaWxkcmVu
        W3BhdGhdID0gbWF0Y2hlcjsKCiAgICAgICAgdmFyIG1hdGNoID0gZ2VuZXJh
        dGVNYXRjaChwYXRoLCBtYXRjaGVyLCBkZWxlZ2F0ZSk7CgogICAgICAgIGlm
        IChkZWxlZ2F0ZSAmJiBkZWxlZ2F0ZS5jb250ZXh0RW50ZXJlZCkgewogICAg
        ICAgICAgZGVsZWdhdGUuY29udGV4dEVudGVyZWQodGFyZ2V0LCBtYXRjaCk7
        CiAgICAgICAgfQoKICAgICAgICBjYWxsYmFjayhtYXRjaCk7CiAgICAgIH0K
        ICAgIH07CgogICAgZnVuY3Rpb24gZ2VuZXJhdGVNYXRjaChzdGFydGluZ1Bh
        dGgsIG1hdGNoZXIsIGRlbGVnYXRlKSB7CiAgICAgIHJldHVybiBmdW5jdGlv
        bihwYXRoLCBuZXN0ZWRDYWxsYmFjaykgewogICAgICAgIHZhciBmdWxsUGF0
        aCA9IHN0YXJ0aW5nUGF0aCArIHBhdGg7CgogICAgICAgIGlmIChuZXN0ZWRD
        YWxsYmFjaykgewogICAgICAgICAgbmVzdGVkQ2FsbGJhY2soZ2VuZXJhdGVN
        YXRjaChmdWxsUGF0aCwgbWF0Y2hlciwgZGVsZWdhdGUpKTsKICAgICAgICB9
        IGVsc2UgewogICAgICAgICAgcmV0dXJuIG5ldyBUYXJnZXQoc3RhcnRpbmdQ
        YXRoICsgcGF0aCwgbWF0Y2hlciwgZGVsZWdhdGUpOwogICAgICAgIH0KICAg
        ICAgfTsKICAgIH0KCiAgICBmdW5jdGlvbiBhZGRSb3V0ZShyb3V0ZUFycmF5
        LCBwYXRoLCBoYW5kbGVyLCBxdWVyeVBhcmFtcykgewogICAgICB2YXIgbGVu
        ID0gMDsKICAgICAgZm9yICh2YXIgaT0wLCBsPXJvdXRlQXJyYXkubGVuZ3Ro
        OyBpPGw7IGkrKykgewogICAgICAgIGxlbiArPSByb3V0ZUFycmF5W2ldLnBh
        dGgubGVuZ3RoOwogICAgICB9CgogICAgICBwYXRoID0gcGF0aC5zdWJzdHIo
        bGVuKTsKICAgICAgdmFyIHJvdXRlID0geyBwYXRoOiBwYXRoLCBoYW5kbGVy
        OiBoYW5kbGVyIH07CiAgICAgIGlmKHF1ZXJ5UGFyYW1zKSB7IHJvdXRlLnF1
        ZXJ5UGFyYW1zID0gcXVlcnlQYXJhbXM7IH0KICAgICAgcm91dGVBcnJheS5w
        dXNoKHJvdXRlKTsKICAgIH0KCiAgICBmdW5jdGlvbiBlYWNoUm91dGUoYmFz
        ZVJvdXRlLCBtYXRjaGVyLCBjYWxsYmFjaywgYmluZGluZykgewogICAgICB2
        YXIgcm91dGVzID0gbWF0Y2hlci5yb3V0ZXM7CiAgICAgIHZhciBxdWVyeVBh
        cmFtcyA9IG1hdGNoZXIucXVlcnlQYXJhbXM7CgogICAgICBmb3IgKHZhciBw
        YXRoIGluIHJvdXRlcykgewogICAgICAgIGlmIChyb3V0ZXMuaGFzT3duUHJv
        cGVydHkocGF0aCkpIHsKICAgICAgICAgIHZhciByb3V0ZUFycmF5ID0gYmFz
        ZVJvdXRlLnNsaWNlKCk7CiAgICAgICAgICBhZGRSb3V0ZShyb3V0ZUFycmF5
        LCBwYXRoLCByb3V0ZXNbcGF0aF0sIHF1ZXJ5UGFyYW1zW3BhdGhdKTsKCiAg
        ICAgICAgICBpZiAobWF0Y2hlci5jaGlsZHJlbltwYXRoXSkgewogICAgICAg
        ICAgICBlYWNoUm91dGUocm91dGVBcnJheSwgbWF0Y2hlci5jaGlsZHJlbltw
        YXRoXSwgY2FsbGJhY2ssIGJpbmRpbmcpOwogICAgICAgICAgfSBlbHNlIHsK
        ICAgICAgICAgICAgY2FsbGJhY2suY2FsbChiaW5kaW5nLCByb3V0ZUFycmF5
        KTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICBS
        b3V0ZVJlY29nbml6ZXIucHJvdG90eXBlLm1hcCA9IGZ1bmN0aW9uKGNhbGxi
        YWNrLCBhZGRSb3V0ZUNhbGxiYWNrKSB7CiAgICAgIHZhciBtYXRjaGVyID0g
        bmV3IE1hdGNoZXIoKTsKCiAgICAgIGNhbGxiYWNrKGdlbmVyYXRlTWF0Y2go
        IiIsIG1hdGNoZXIsIHRoaXMuZGVsZWdhdGUpKTsKCiAgICAgIGVhY2hSb3V0
        ZShbXSwgbWF0Y2hlciwgZnVuY3Rpb24ocm91dGUpIHsKICAgICAgICBpZiAo
        YWRkUm91dGVDYWxsYmFjaykgeyBhZGRSb3V0ZUNhbGxiYWNrKHRoaXMsIHJv
        dXRlKTsgfQogICAgICAgIGVsc2UgeyB0aGlzLmFkZChyb3V0ZSk7IH0KICAg
        ICAgfSwgdGhpcyk7CiAgICB9OwogICAgcmV0dXJuIFJvdXRlUmVjb2duaXpl
        cjsKICB9KTsKCn0pKCk7CgoKCihmdW5jdGlvbigpIHsKZGVmaW5lKCJyb3V0
        ZXIiLAogIFsicm91dGUtcmVjb2duaXplciIsInJzdnAiXSwKICBmdW5jdGlv
        bihSb3V0ZVJlY29nbml6ZXIsIFJTVlApIHsKICAgICJ1c2Ugc3RyaWN0IjsK
        ICAgIC8qKgogICAgICBAcHJpdmF0ZQoKICAgICAgVGhpcyBmaWxlIHJlZmVy
        ZW5jZXMgc2V2ZXJhbCBpbnRlcm5hbCBzdHJ1Y3R1cmVzOgoKICAgICAgIyMg
        YFJlY29nbml6ZWRIYW5kbGVyYAoKICAgICAgKiBge1N0cmluZ30gaGFuZGxl
        cmA6IEEgaGFuZGxlciBuYW1lCiAgICAgICogYHtPYmplY3R9IHBhcmFtc2A6
        IEEgaGFzaCBvZiByZWNvZ25pemVkIHBhcmFtZXRlcnMKCiAgICAgICMjIGBI
        YW5kbGVySW5mb2AKCiAgICAgICogYHtCb29sZWFufSBpc0R5bmFtaWNgOiB3
        aGV0aGVyIGEgaGFuZGxlciBoYXMgYW55IGR5bmFtaWMgc2VnbWVudHMKICAg
        ICAgKiBge1N0cmluZ30gbmFtZWA6IHRoZSBuYW1lIG9mIGEgaGFuZGxlcgog
        ICAgICAqIGB7T2JqZWN0fSBoYW5kbGVyYDogYSBoYW5kbGVyIG9iamVjdAog
        ICAgICAqIGB7T2JqZWN0fSBjb250ZXh0YDogdGhlIGFjdGl2ZSBjb250ZXh0
        IGZvciB0aGUgaGFuZGxlcgogICAgKi8KCgogICAgdmFyIHNsaWNlID0gQXJy
        YXkucHJvdG90eXBlLnNsaWNlOwoKCgogICAgLyoqCiAgICAgIEBwcml2YXRl
        CgogICAgICBBIFRyYW5zaXRpb24gaXMgYSB0aGVubmFibGUgKGEgcHJvbWlz
        ZS1saWtlIG9iamVjdCkgdGhhdCByZXByZXNlbnRzCiAgICAgIGFuIGF0dGVt
        cHQgdG8gdHJhbnNpdGlvbiB0byBhbm90aGVyIHJvdXRlLiBJdCBjYW4gYmUg
        YWJvcnRlZCwgZWl0aGVyCiAgICAgIGV4cGxpY2l0bHkgdmlhIGBhYm9ydGAg
        b3IgYnkgYXR0ZW1wdGluZyBhbm90aGVyIHRyYW5zaXRpb24gd2hpbGUgYQog
        ICAgICBwcmV2aW91cyBvbmUgaXMgc3RpbGwgdW5kZXJ3YXkuIEFuIGFib3J0
        ZWQgdHJhbnNpdGlvbiBjYW4gYWxzbwogICAgICBiZSBgcmV0cnkoKWBkIGxh
        dGVyLgogICAgICovCgogICAgZnVuY3Rpb24gVHJhbnNpdGlvbihyb3V0ZXIs
        IHByb21pc2UpIHsKICAgICAgdGhpcy5yb3V0ZXIgPSByb3V0ZXI7CiAgICAg
        IHRoaXMucHJvbWlzZSA9IHByb21pc2U7CiAgICAgIHRoaXMuZGF0YSA9IHt9
        OwogICAgICB0aGlzLnJlc29sdmVkTW9kZWxzID0ge307CiAgICAgIHRoaXMu
        cHJvdmlkZWRNb2RlbHMgPSB7fTsKICAgICAgdGhpcy5wcm92aWRlZE1vZGVs
        c0FycmF5ID0gW107CiAgICAgIHRoaXMuc2VxdWVuY2UgPSArK1RyYW5zaXRp
        b24uY3VycmVudFNlcXVlbmNlOwogICAgICB0aGlzLnBhcmFtcyA9IHt9Owog
        ICAgfQoKICAgIFRyYW5zaXRpb24uY3VycmVudFNlcXVlbmNlID0gMDsKCiAg
        ICBUcmFuc2l0aW9uLnByb3RvdHlwZSA9IHsKICAgICAgdGFyZ2V0TmFtZTog
        bnVsbCwKICAgICAgdXJsTWV0aG9kOiAndXBkYXRlJywKICAgICAgcHJvdmlk
        ZWRNb2RlbHM6IG51bGwsCiAgICAgIHJlc29sdmVkTW9kZWxzOiBudWxsLAog
        ICAgICBwYXJhbXM6IG51bGwsCiAgICAgIHBpdm90SGFuZGxlcjogbnVsbCwK
        ICAgICAgcmVzb2x2ZUluZGV4OiAwLAogICAgICBoYW5kbGVySW5mb3M6IG51
        bGwsCgogICAgICBpc0FjdGl2ZTogdHJ1ZSwKCiAgICAgIC8qKgogICAgICAg
        IFRoZSBUcmFuc2l0aW9uJ3MgaW50ZXJuYWwgcHJvbWlzZS4gQ2FsbGluZyBg
        LnRoZW5gIG9uIHRoaXMgcHJvcGVydHkKICAgICAgICBpcyB0aGF0IHNhbWUg
        YXMgY2FsbGluZyBgLnRoZW5gIG9uIHRoZSBUcmFuc2l0aW9uIG9iamVjdCBp
        dHNlbGYsIGJ1dAogICAgICAgIHRoaXMgcHJvcGVydHkgaXMgZXhwb3NlZCBm
        b3Igd2hlbiB5b3Ugd2FudCB0byBwYXNzIGFyb3VuZCBhCiAgICAgICAgVHJh
        bnNpdGlvbidzIHByb21pc2UsIGJ1dCBub3QgdGhlIFRyYW5zaXRpb24gb2Jq
        ZWN0IGl0c2VsZiwgc2luY2UKICAgICAgICBUcmFuc2l0aW9uIG9iamVjdCBj
        YW4gYmUgZXh0ZXJuYWxseSBgYWJvcnRgZWQsIHdoaWxlIHRoZSBwcm9taXNl
        CiAgICAgICAgY2Fubm90LgogICAgICAgKi8KICAgICAgcHJvbWlzZTogbnVs
        bCwKCiAgICAgIC8qKgogICAgICAgIEN1c3RvbSBzdGF0ZSBjYW4gYmUgc3Rv
        cmVkIG9uIGEgVHJhbnNpdGlvbidzIGBkYXRhYCBvYmplY3QuCiAgICAgICAg
        VGhpcyBjYW4gYmUgdXNlZnVsIGZvciBkZWNvcmF0aW5nIGEgVHJhbnNpdGlv
        biB3aXRoaW4gYW4gZWFybGllcgogICAgICAgIGhvb2sgYW5kIHNoYXJlZCB3
        aXRoIGEgbGF0ZXIgaG9vay4gUHJvcGVydGllcyBzZXQgb24gYGRhdGFgIHdp
        bGwKICAgICAgICBiZSBjb3BpZWQgdG8gbmV3IHRyYW5zaXRpb25zIGdlbmVy
        YXRlZCBieSBjYWxsaW5nIGByZXRyeWAgb24gdGhpcwogICAgICAgIHRyYW5z
        aXRpb24uCiAgICAgICAqLwogICAgICBkYXRhOiBudWxsLAoKICAgICAgLyoq
        CiAgICAgICAgQSBzdGFuZGFyZCBwcm9taXNlIGhvb2sgdGhhdCByZXNvbHZl
        cyBpZiB0aGUgdHJhbnNpdGlvbgogICAgICAgIHN1Y2NlZWRzIGFuZCByZWpl
        Y3RzIGlmIGl0IGZhaWxzL3JlZGlyZWN0cy9hYm9ydHMuCgogICAgICAgIEZv
        cndhcmRzIHRvIHRoZSBpbnRlcm5hbCBgcHJvbWlzZWAgcHJvcGVydHkgd2hp
        Y2ggeW91IGNhbgogICAgICAgIHVzZSBpbiBzaXR1YXRpb25zIHdoZXJlIHlv
        dSB3YW50IHRvIHBhc3MgYXJvdW5kIGEgdGhlbm5hYmxlLAogICAgICAgIGJ1
        dCBub3QgdGhlIFRyYW5zaXRpb24gaXRzZWxmLgoKICAgICAgICBAcGFyYW0g
        e0Z1bmN0aW9ufSBzdWNjZXNzCiAgICAgICAgQHBhcmFtIHtGdW5jdGlvbn0g
        ZmFpbHVyZQogICAgICAgKi8KICAgICAgdGhlbjogZnVuY3Rpb24oc3VjY2Vz
        cywgZmFpbHVyZSkgewogICAgICAgIHJldHVybiB0aGlzLnByb21pc2UudGhl
        bihzdWNjZXNzLCBmYWlsdXJlKTsKICAgICAgfSwKCiAgICAgIC8qKgogICAg
        ICAgIEFib3J0cyB0aGUgVHJhbnNpdGlvbi4gTm90ZSB5b3UgY2FuIGFsc28g
        aW1wbGljaXRseSBhYm9ydCBhIHRyYW5zaXRpb24KICAgICAgICBieSBpbml0
        aWF0aW5nIGFub3RoZXIgdHJhbnNpdGlvbiB3aGlsZSBhIHByZXZpb3VzIG9u
        ZSBpcyB1bmRlcndheS4KICAgICAgICovCiAgICAgIGFib3J0OiBmdW5jdGlv
        bigpIHsKICAgICAgICBpZiAodGhpcy5pc0Fib3J0ZWQpIHsgcmV0dXJuIHRo
        aXM7IH0KICAgICAgICBsb2codGhpcy5yb3V0ZXIsIHRoaXMuc2VxdWVuY2Us
        IHRoaXMudGFyZ2V0TmFtZSArICI6IHRyYW5zaXRpb24gd2FzIGFib3J0ZWQi
        KTsKICAgICAgICB0aGlzLmlzQWJvcnRlZCA9IHRydWU7CiAgICAgICAgdGhp
        cy5pc0FjdGl2ZSA9IGZhbHNlOwogICAgICAgIHRoaXMucm91dGVyLmFjdGl2
        ZVRyYW5zaXRpb24gPSBudWxsOwogICAgICAgIHJldHVybiB0aGlzOwogICAg
        ICB9LAoKICAgICAgLyoqCiAgICAgICAgUmV0cmllcyBhIHByZXZpb3VzbHkt
        YWJvcnRlZCB0cmFuc2l0aW9uIChtYWtpbmcgc3VyZSB0byBhYm9ydCB0aGUK
        ICAgICAgICB0cmFuc2l0aW9uIGlmIGl0J3Mgc3RpbGwgYWN0aXZlKS4gUmV0
        dXJucyBhIG5ldyB0cmFuc2l0aW9uIHRoYXQKICAgICAgICByZXByZXNlbnRz
        IHRoZSBuZXcgYXR0ZW1wdCB0byB0cmFuc2l0aW9uLgogICAgICAgKi8KICAg
        ICAgcmV0cnk6IGZ1bmN0aW9uKCkgewogICAgICAgIHRoaXMuYWJvcnQoKTsK
        ICAgICAgICB2YXIgcmVjb2dIYW5kbGVycyA9IHRoaXMucm91dGVyLnJlY29n
        bml6ZXIuaGFuZGxlcnNGb3IodGhpcy50YXJnZXROYW1lKSwKICAgICAgICAg
        ICAgaGFuZGxlckluZm9zICA9IGdlbmVyYXRlSGFuZGxlckluZm9zV2l0aFF1
        ZXJ5UGFyYW1zKHRoaXMucm91dGVyLCByZWNvZ0hhbmRsZXJzLCB0aGlzLnF1
        ZXJ5UGFyYW1zKSwKICAgICAgICAgICAgbmV3VHJhbnNpdGlvbiA9IHBlcmZv
        cm1UcmFuc2l0aW9uKHRoaXMucm91dGVyLCBoYW5kbGVySW5mb3MsIHRoaXMu
        cHJvdmlkZWRNb2RlbHNBcnJheSwgdGhpcy5wYXJhbXMsIHRoaXMucXVlcnlQ
        YXJhbXMsIHRoaXMuZGF0YSk7CgogICAgICAgIHJldHVybiBuZXdUcmFuc2l0
        aW9uOwogICAgICB9LAoKICAgICAgLyoqCiAgICAgICAgU2V0cyB0aGUgVVJM
        LWNoYW5naW5nIG1ldGhvZCB0byBiZSBlbXBsb3llZCBhdCB0aGUgZW5kIG9m
        IGEKICAgICAgICBzdWNjZXNzZnVsIHRyYW5zaXRpb24uIEJ5IGRlZmF1bHQs
        IGEgbmV3IFRyYW5zaXRpb24gd2lsbCBqdXN0CiAgICAgICAgdXNlIGB1cGRh
        dGVVUkxgLCBidXQgcGFzc2luZyAncmVwbGFjZScgdG8gdGhpcyBtZXRob2Qg
        d2lsbAogICAgICAgIGNhdXNlIHRoZSBVUkwgdG8gdXBkYXRlIHVzaW5nICdy
        ZXBsYWNlV2l0aCcgaW5zdGVhZC4gT21pdHRpbmcKICAgICAgICBhIHBhcmFt
        ZXRlciB3aWxsIGRpc2FibGUgdGhlIFVSTCBjaGFuZ2UsIGFsbG93aW5nIGZv
        ciB0cmFuc2l0aW9ucwogICAgICAgIHRoYXQgZG9uJ3QgdXBkYXRlIHRoZSBV
        UkwgYXQgY29tcGxldGlvbiAodGhpcyBpcyBhbHNvIHVzZWQgZm9yCiAgICAg
        ICAgaGFuZGxlVVJMLCBzaW5jZSB0aGUgVVJMIGhhcyBhbHJlYWR5IGNoYW5n
        ZWQgYmVmb3JlIHRoZQogICAgICAgIHRyYW5zaXRpb24gdG9vayBwbGFjZSku
        CgogICAgICAgIEBwYXJhbSB7U3RyaW5nfSBtZXRob2QgdGhlIHR5cGUgb2Yg
        VVJMLWNoYW5naW5nIG1ldGhvZCB0byB1c2UKICAgICAgICAgIGF0IHRoZSBl
        bmQgb2YgYSB0cmFuc2l0aW9uLiBBY2NlcHRlZCB2YWx1ZXMgYXJlICdyZXBs
        YWNlJywKICAgICAgICAgIGZhbHN5IHZhbHVlcywgb3IgYW55IG90aGVyIG5v
        bi1mYWxzeSB2YWx1ZSAod2hpY2ggaXMKICAgICAgICAgIGludGVycHJldGVk
        IGFzIGFuIHVwZGF0ZVVSTCB0cmFuc2l0aW9uKS4KCiAgICAgICAgQHJldHVy
        biB7VHJhbnNpdGlvbn0gdGhpcyB0cmFuc2l0aW9uCiAgICAgICAqLwogICAg
        ICBtZXRob2Q6IGZ1bmN0aW9uKG1ldGhvZCkgewogICAgICAgIHRoaXMudXJs
        TWV0aG9kID0gbWV0aG9kOwogICAgICAgIHJldHVybiB0aGlzOwogICAgICB9
        LAoKICAgICAgLyoqCiAgICAgICAgRmlyZXMgYW4gZXZlbnQgb24gdGhlIGN1
        cnJlbnQgbGlzdCBvZiByZXNvbHZlZC9yZXNvbHZpbmcKICAgICAgICBoYW5k
        bGVycyB3aXRoaW4gdGhpcyB0cmFuc2l0aW9uLiBVc2VmdWwgZm9yIGZpcmlu
        ZyBldmVudHMKICAgICAgICBvbiByb3V0ZSBoaWVyYXJjaGllcyB0aGF0IGhh
        dmVuJ3QgZnVsbHkgYmVlbiBlbnRlcmVkIHlldC4KCiAgICAgICAgQHBhcmFt
        IHtCb29sZWFufSBpZ25vcmVGYWlsdXJlIHRoZSBuYW1lIG9mIHRoZSBldmVu
        dCB0byBmaXJlCiAgICAgICAgQHBhcmFtIHtTdHJpbmd9IG5hbWUgdGhlIG5h
        bWUgb2YgdGhlIGV2ZW50IHRvIGZpcmUKICAgICAgICovCiAgICAgIHRyaWdn
        ZXI6IGZ1bmN0aW9uKGlnbm9yZUZhaWx1cmUpIHsKICAgICAgICB2YXIgYXJn
        cyA9IHNsaWNlLmNhbGwoYXJndW1lbnRzKTsKICAgICAgICBpZiAodHlwZW9m
        IGlnbm9yZUZhaWx1cmUgPT09ICdib29sZWFuJykgewogICAgICAgICAgYXJn
        cy5zaGlmdCgpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAvLyBUaHJv
        dyBlcnJvcnMgb24gdW5oYW5kbGVkIHRyaWdnZXIgZXZlbnRzIGJ5IGRlZmF1
        bHQKICAgICAgICAgIGlnbm9yZUZhaWx1cmUgPSBmYWxzZTsKICAgICAgICB9
        CiAgICAgICAgdHJpZ2dlcih0aGlzLnJvdXRlciwgdGhpcy5oYW5kbGVySW5m
        b3Muc2xpY2UoMCwgdGhpcy5yZXNvbHZlSW5kZXggKyAxKSwgaWdub3JlRmFp
        bHVyZSwgYXJncyk7CiAgICAgIH0sCgogICAgICB0b1N0cmluZzogZnVuY3Rp
        b24oKSB7CiAgICAgICAgcmV0dXJuICJUcmFuc2l0aW9uIChzZXF1ZW5jZSAi
        ICsgdGhpcy5zZXF1ZW5jZSArICIpIjsKICAgICAgfQogICAgfTsKCiAgICBm
        dW5jdGlvbiBSb3V0ZXIoKSB7CiAgICAgIHRoaXMucmVjb2duaXplciA9IG5l
        dyBSb3V0ZVJlY29nbml6ZXIoKTsKICAgIH0KCiAgICAvLyBUT0RPOiBzZXBh
        cmF0ZSBpbnRvIG1vZHVsZT8KICAgIFJvdXRlci5UcmFuc2l0aW9uID0gVHJh
        bnNpdGlvbjsKCgoKICAgIC8qKgogICAgICBQcm9taXNlIHJlamVjdCByZWFz
        b25zIHBhc3NlZCB0byBwcm9taXNlIHJlamVjdGlvbgogICAgICBoYW5kbGVy
        cyBmb3IgZmFpbGVkIHRyYW5zaXRpb25zLgogICAgICovCiAgICBSb3V0ZXIu
        VW5yZWNvZ25pemVkVVJMRXJyb3IgPSBmdW5jdGlvbihtZXNzYWdlKSB7CiAg
        ICAgIHRoaXMubWVzc2FnZSA9IChtZXNzYWdlIHx8ICJVbnJlY29nbml6ZWRV
        UkxFcnJvciIpOwogICAgICB0aGlzLm5hbWUgPSAiVW5yZWNvZ25pemVkVVJM
        RXJyb3IiOwogICAgfTsKCiAgICBSb3V0ZXIuVHJhbnNpdGlvbkFib3J0ZWQg
        PSBmdW5jdGlvbihtZXNzYWdlKSB7CiAgICAgIHRoaXMubWVzc2FnZSA9ICht
        ZXNzYWdlIHx8ICJUcmFuc2l0aW9uQWJvcnRlZCIpOwogICAgICB0aGlzLm5h
        bWUgPSAiVHJhbnNpdGlvbkFib3J0ZWQiOwogICAgfTsKCiAgICBmdW5jdGlv
        biBlcnJvclRyYW5zaXRpb24ocm91dGVyLCByZWFzb24pIHsKICAgICAgcmV0
        dXJuIG5ldyBUcmFuc2l0aW9uKHJvdXRlciwgUlNWUC5yZWplY3QocmVhc29u
        KSk7CiAgICB9CgoKICAgIFJvdXRlci5wcm90b3R5cGUgPSB7CiAgICAgIC8q
        KgogICAgICAgIFRoZSBtYWluIGVudHJ5IHBvaW50IGludG8gdGhlIHJvdXRl
        ci4gVGhlIEFQSSBpcyBlc3NlbnRpYWxseQogICAgICAgIHRoZSBzYW1lIGFz
        IHRoZSBgbWFwYCBtZXRob2QgaW4gYHJvdXRlLXJlY29nbml6ZXJgLgoKICAg
        ICAgICBUaGlzIG1ldGhvZCBleHRyYWN0cyB0aGUgU3RyaW5nIGhhbmRsZXIg
        YXQgdGhlIGxhc3QgYC50bygpYAogICAgICAgIGNhbGwgYW5kIHVzZXMgaXQg
        YXMgdGhlIG5hbWUgb2YgdGhlIHdob2xlIHJvdXRlLgoKICAgICAgICBAcGFy
        YW0ge0Z1bmN0aW9ufSBjYWxsYmFjawogICAgICAqLwogICAgICBtYXA6IGZ1
        bmN0aW9uKGNhbGxiYWNrKSB7CiAgICAgICAgdGhpcy5yZWNvZ25pemVyLmRl
        bGVnYXRlID0gdGhpcy5kZWxlZ2F0ZTsKCiAgICAgICAgdGhpcy5yZWNvZ25p
        emVyLm1hcChjYWxsYmFjaywgZnVuY3Rpb24ocmVjb2duaXplciwgcm91dGUp
        IHsKICAgICAgICAgIHZhciBsYXN0SGFuZGxlciA9IHJvdXRlW3JvdXRlLmxl
        bmd0aCAtIDFdLmhhbmRsZXI7CiAgICAgICAgICB2YXIgYXJncyA9IFtyb3V0
        ZSwgeyBhczogbGFzdEhhbmRsZXIgfV07CiAgICAgICAgICByZWNvZ25pemVy
        LmFkZC5hcHBseShyZWNvZ25pemVyLCBhcmdzKTsKICAgICAgICB9KTsKICAg
        ICAgfSwKCiAgICAgIGhhc1JvdXRlOiBmdW5jdGlvbihyb3V0ZSkgewogICAg
        ICAgIHJldHVybiB0aGlzLnJlY29nbml6ZXIuaGFzUm91dGUocm91dGUpOwog
        ICAgICB9LAoKICAgICAgLyoqCiAgICAgICAgQ2xlYXJzIHRoZSBjdXJyZW50
        IGFuZCB0YXJnZXQgcm91dGUgaGFuZGxlcnMgYW5kIHRyaWdnZXJzIGV4aXQK
        ICAgICAgICBvbiBlYWNoIG9mIHRoZW0gc3RhcnRpbmcgYXQgdGhlIGxlYWYg
        YW5kIHRyYXZlcnNpbmcgdXAgdGhyb3VnaAogICAgICAgIGl0cyBhbmNlc3Rv
        cnMuCiAgICAgICovCiAgICAgIHJlc2V0OiBmdW5jdGlvbigpIHsKICAgICAg
        ICBlYWNoSGFuZGxlcih0aGlzLmN1cnJlbnRIYW5kbGVySW5mb3MgfHwgW10s
        IGZ1bmN0aW9uKGhhbmRsZXJJbmZvKSB7CiAgICAgICAgICB2YXIgaGFuZGxl
        ciA9IGhhbmRsZXJJbmZvLmhhbmRsZXI7CiAgICAgICAgICBpZiAoaGFuZGxl
        ci5leGl0KSB7CiAgICAgICAgICAgIGhhbmRsZXIuZXhpdCgpOwogICAgICAg
        ICAgfQogICAgICAgIH0pOwogICAgICAgIHRoaXMuY3VycmVudEhhbmRsZXJJ
        bmZvcyA9IG51bGw7CiAgICAgICAgdGhpcy50YXJnZXRIYW5kbGVySW5mb3Mg
        PSBudWxsOwogICAgICB9LAoKICAgICAgYWN0aXZlVHJhbnNpdGlvbjogbnVs
        bCwKCiAgICAgIC8qKgogICAgICAgIHZhciBoYW5kbGVyID0gaGFuZGxlcklu
        Zm8uaGFuZGxlcjsKICAgICAgICBUaGUgZW50cnkgcG9pbnQgZm9yIGhhbmRs
        aW5nIGEgY2hhbmdlIHRvIHRoZSBVUkwgKHVzdWFsbHkKICAgICAgICB2aWEg
        dGhlIGJhY2sgYW5kIGZvcndhcmQgYnV0dG9uKS4KCiAgICAgICAgUmV0dXJu
        cyBhbiBBcnJheSBvZiBoYW5kbGVycyBhbmQgdGhlIHBhcmFtZXRlcnMgYXNz
        b2NpYXRlZAogICAgICAgIHdpdGggdGhvc2UgcGFyYW1ldGVycy4KCiAgICAg
        ICAgQHBhcmFtIHtTdHJpbmd9IHVybCBhIFVSTCB0byBwcm9jZXNzCgogICAg
        ICAgIEByZXR1cm4ge0FycmF5fSBhbiBBcnJheSBvZiBgW2hhbmRsZXIsIHBh
        cmFtZXRlcl1gIHR1cGxlcwogICAgICAqLwogICAgICBoYW5kbGVVUkw6IGZ1
        bmN0aW9uKHVybCkgewogICAgICAgIC8vIFBlcmZvcm0gYSBVUkwtYmFzZWQg
        dHJhbnNpdGlvbiwgYnV0IGRvbid0IGNoYW5nZQogICAgICAgIC8vIHRoZSBV
        UkwgYWZ0ZXJ3YXJkLCBzaW5jZSBpdCBhbHJlYWR5IGhhcHBlbmVkLgogICAg
        ICAgIHZhciBhcmdzID0gc2xpY2UuY2FsbChhcmd1bWVudHMpOwogICAgICAg
        IGlmICh1cmwuY2hhckF0KDApICE9PSAnLycpIHsgYXJnc1swXSA9ICcvJyAr
        IHVybDsgfQogICAgICAgIHJldHVybiBkb1RyYW5zaXRpb24odGhpcywgYXJn
        cykubWV0aG9kKG51bGwpOwogICAgICB9LAoKICAgICAgLyoqCiAgICAgICAg
        SG9vayBwb2ludCBmb3IgdXBkYXRpbmcgdGhlIFVSTC4KCiAgICAgICAgQHBh
        cmFtIHtTdHJpbmd9IHVybCBhIFVSTCB0byB1cGRhdGUgdG8KICAgICAgKi8K
        ICAgICAgdXBkYXRlVVJMOiBmdW5jdGlvbigpIHsKICAgICAgICB0aHJvdyBu
        ZXcgRXJyb3IoInVwZGF0ZVVSTCBpcyBub3QgaW1wbGVtZW50ZWQiKTsKICAg
        ICAgfSwKCiAgICAgIC8qKgogICAgICAgIEhvb2sgcG9pbnQgZm9yIHJlcGxh
        Y2luZyB0aGUgY3VycmVudCBVUkwsIGkuZS4gd2l0aCByZXBsYWNlU3RhdGUK
        CiAgICAgICAgQnkgZGVmYXVsdCB0aGlzIGJlaGF2ZXMgdGhlIHNhbWUgYXMg
        YHVwZGF0ZVVSTGAKCiAgICAgICAgQHBhcmFtIHtTdHJpbmd9IHVybCBhIFVS
        TCB0byB1cGRhdGUgdG8KICAgICAgKi8KICAgICAgcmVwbGFjZVVSTDogZnVu
        Y3Rpb24odXJsKSB7CiAgICAgICAgdGhpcy51cGRhdGVVUkwodXJsKTsKICAg
        ICAgfSwKCiAgICAgIC8qKgogICAgICAgIFRyYW5zaXRpb24gaW50byB0aGUg
        c3BlY2lmaWVkIG5hbWVkIHJvdXRlLgoKICAgICAgICBJZiBuZWNlc3Nhcnks
        IHRyaWdnZXIgdGhlIGV4aXQgY2FsbGJhY2sgb24gYW55IGhhbmRsZXJzCiAg
        ICAgICAgdGhhdCBhcmUgbm8gbG9uZ2VyIHJlcHJlc2VudGVkIGJ5IHRoZSB0
        YXJnZXQgcm91dGUuCgogICAgICAgIEBwYXJhbSB7U3RyaW5nfSBuYW1lIHRo
        ZSBuYW1lIG9mIHRoZSByb3V0ZQogICAgICAqLwogICAgICB0cmFuc2l0aW9u
        VG86IGZ1bmN0aW9uKG5hbWUpIHsKICAgICAgICByZXR1cm4gZG9UcmFuc2l0
        aW9uKHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0sCgogICAgICBpbnRlcm1l
        ZGlhdGVUcmFuc2l0aW9uVG86IGZ1bmN0aW9uKG5hbWUpIHsKICAgICAgICBk
        b1RyYW5zaXRpb24odGhpcywgYXJndW1lbnRzLCB0cnVlKTsKICAgICAgfSwK
        CiAgICAgIC8qKgogICAgICAgIElkZW50aWNhbCB0byBgdHJhbnNpdGlvblRv
        YCBleGNlcHQgdGhhdCB0aGUgY3VycmVudCBVUkwgd2lsbCBiZSByZXBsYWNl
        ZAogICAgICAgIGlmIHBvc3NpYmxlLgoKICAgICAgICBUaGlzIG1ldGhvZCBp
        cyBpbnRlbmRlZCBwcmltYXJpbHkgZm9yIHVzZSB3aXRoIGByZXBsYWNlU3Rh
        dGVgLgoKICAgICAgICBAcGFyYW0ge1N0cmluZ30gbmFtZSB0aGUgbmFtZSBv
        ZiB0aGUgcm91dGUKICAgICAgKi8KICAgICAgcmVwbGFjZVdpdGg6IGZ1bmN0
        aW9uKG5hbWUpIHsKICAgICAgICByZXR1cm4gZG9UcmFuc2l0aW9uKHRoaXMs
        IGFyZ3VtZW50cykubWV0aG9kKCdyZXBsYWNlJyk7CiAgICAgIH0sCgogICAg
        ICAvKioKICAgICAgICBAcHJpdmF0ZQoKICAgICAgICBUaGlzIG1ldGhvZCB0
        YWtlcyBhIGhhbmRsZXIgbmFtZSBhbmQgYSBsaXN0IG9mIGNvbnRleHRzIGFu
        ZCByZXR1cm5zCiAgICAgICAgYSBzZXJpYWxpemVkIHBhcmFtZXRlciBoYXNo
        IHN1aXRhYmxlIHRvIHBhc3MgdG8gYHJlY29nbml6ZXIuZ2VuZXJhdGUoKWAu
        CgogICAgICAgIEBwYXJhbSB7U3RyaW5nfSBoYW5kbGVyTmFtZQogICAgICAg
        IEBwYXJhbSB7QXJyYXlbT2JqZWN0XX0gY29udGV4dHMKICAgICAgICBAcmV0
        dXJuIHtPYmplY3R9IGEgc2VyaWFsaXplZCBwYXJhbWV0ZXIgaGFzaAogICAg
        ICAqLwoKICAgICAgcGFyYW1zRm9ySGFuZGxlcjogZnVuY3Rpb24oaGFuZGxl
        ck5hbWUsIGNvbnRleHRzKSB7CiAgICAgICAgdmFyIHBhcnRpdGlvbmVkQXJn
        cyA9IGV4dHJhY3RRdWVyeVBhcmFtcyhzbGljZS5jYWxsKGFyZ3VtZW50cywg
        MSkpOwogICAgICAgIHJldHVybiBwYXJhbXNGb3JIYW5kbGVyKHRoaXMsIGhh
        bmRsZXJOYW1lLCBwYXJ0aXRpb25lZEFyZ3NbMF0sIHBhcnRpdGlvbmVkQXJn
        c1sxXSk7CiAgICAgIH0sCgogICAgICAvKioKICAgICAgICBUaGlzIG1ldGhv
        ZCB0YWtlcyBhIGhhbmRsZXIgbmFtZSBhbmQgcmV0dXJucyBhIGxpc3Qgb2Yg
        cXVlcnkgcGFyYW1zCiAgICAgICAgdGhhdCBhcmUgdmFsaWQgdG8gcGFzcyB0
        byB0aGUgaGFuZGxlciBvciBpdHMgcGFyZW50cwoKICAgICAgICBAcGFyYW0g
        e1N0cmluZ30gaGFuZGxlck5hbWUKICAgICAgICBAcmV0dXJuIHtBcnJheVtT
        dHJpbmddfSBhIGxpc3Qgb2YgcXVlcnkgcGFyYW1ldGVycwogICAgICAqLwog
        ICAgICBxdWVyeVBhcmFtc0ZvckhhbmRsZXI6IGZ1bmN0aW9uIChoYW5kbGVy
        TmFtZSkgewogICAgICAgIHJldHVybiBxdWVyeVBhcmFtc0ZvckhhbmRsZXIo
        dGhpcywgaGFuZGxlck5hbWUpOwogICAgICB9LAoKICAgICAgLyoqCiAgICAg
        ICAgVGFrZSBhIG5hbWVkIHJvdXRlIGFuZCBjb250ZXh0IG9iamVjdHMgYW5k
        IGdlbmVyYXRlIGEKICAgICAgICBVUkwuCgogICAgICAgIEBwYXJhbSB7U3Ry
        aW5nfSBuYW1lIHRoZSBuYW1lIG9mIHRoZSByb3V0ZSB0byBnZW5lcmF0ZQog
        ICAgICAgICAgYSBVUkwgZm9yCiAgICAgICAgQHBhcmFtIHsuLi5PYmplY3R9
        IG9iamVjdHMgYSBsaXN0IG9mIG9iamVjdHMgdG8gc2VyaWFsaXplCgogICAg
        ICAgIEByZXR1cm4ge1N0cmluZ30gYSBVUkwKICAgICAgKi8KICAgICAgZ2Vu
        ZXJhdGU6IGZ1bmN0aW9uKGhhbmRsZXJOYW1lKSB7CiAgICAgICAgdmFyIHBh
        cnRpdGlvbmVkQXJncyA9IGV4dHJhY3RRdWVyeVBhcmFtcyhzbGljZS5jYWxs
        KGFyZ3VtZW50cywgMSkpLAogICAgICAgICAgc3VwcGxpZWRQYXJhbXMgPSBw
        YXJ0aXRpb25lZEFyZ3NbMF0sCiAgICAgICAgICBxdWVyeVBhcmFtcyA9IHBh
        cnRpdGlvbmVkQXJnc1sxXTsKCiAgICAgICAgdmFyIHBhcmFtcyA9IHBhcmFt
        c0ZvckhhbmRsZXIodGhpcywgaGFuZGxlck5hbWUsIHN1cHBsaWVkUGFyYW1z
        LCBxdWVyeVBhcmFtcyksCiAgICAgICAgICB2YWxpZFF1ZXJ5UGFyYW1zID0g
        cXVlcnlQYXJhbXNGb3JIYW5kbGVyKHRoaXMsIGhhbmRsZXJOYW1lKTsKCiAg
        ICAgICAgdmFyIG1pc3NpbmdQYXJhbXMgPSBbXTsKCiAgICAgICAgZm9yICh2
        YXIga2V5IGluIHF1ZXJ5UGFyYW1zKSB7CiAgICAgICAgICBpZiAocXVlcnlQ
        YXJhbXMuaGFzT3duUHJvcGVydHkoa2V5KSAmJiAhfnZhbGlkUXVlcnlQYXJh
        bXMuaW5kZXhPZihrZXkpKSB7CiAgICAgICAgICAgIG1pc3NpbmdQYXJhbXMu
        cHVzaChrZXkpOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgaWYg
        KG1pc3NpbmdQYXJhbXMubGVuZ3RoID4gMCkgewogICAgICAgICAgdmFyIGVy
        ciA9ICdZb3Ugc3VwcGxpZWQgdGhlIHBhcmFtcyAnOwogICAgICAgICAgZXJy
        ICs9IG1pc3NpbmdQYXJhbXMubWFwKGZ1bmN0aW9uKHBhcmFtKSB7CiAgICAg
        ICAgICAgIHJldHVybiAnIicgKyBwYXJhbSArICI9IiArIHF1ZXJ5UGFyYW1z
        W3BhcmFtXSArICciJzsKICAgICAgICAgIH0pLmpvaW4oJyBhbmQgJyk7Cgog
        ICAgICAgICAgZXJyICs9ICcgd2hpY2ggYXJlIG5vdCB2YWxpZCBmb3IgdGhl
        ICInICsgaGFuZGxlck5hbWUgKyAnIiBoYW5kbGVyIG9yIGl0cyBwYXJlbnRz
        JzsKCiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyKTsKICAgICAgICB9
        CgogICAgICAgIHJldHVybiB0aGlzLnJlY29nbml6ZXIuZ2VuZXJhdGUoaGFu
        ZGxlck5hbWUsIHBhcmFtcyk7CiAgICAgIH0sCgogICAgICBpc0FjdGl2ZTog
        ZnVuY3Rpb24oaGFuZGxlck5hbWUpIHsKICAgICAgICB2YXIgcGFydGl0aW9u
        ZWRBcmdzICAgPSBleHRyYWN0UXVlcnlQYXJhbXMoc2xpY2UuY2FsbChhcmd1
        bWVudHMsIDEpKSwKICAgICAgICAgICAgY29udGV4dHMgICAgICAgICAgPSBw
        YXJ0aXRpb25lZEFyZ3NbMF0sCiAgICAgICAgICAgIHF1ZXJ5UGFyYW1zICAg
        ICAgID0gcGFydGl0aW9uZWRBcmdzWzFdLAogICAgICAgICAgICBhY3RpdmVR
        dWVyeVBhcmFtcyAgPSB7fSwKICAgICAgICAgICAgZWZmZWN0aXZlUXVlcnlQ
        YXJhbXMgPSB7fTsKCiAgICAgICAgdmFyIHRhcmdldEhhbmRsZXJJbmZvcyA9
        IHRoaXMudGFyZ2V0SGFuZGxlckluZm9zLAogICAgICAgICAgICBmb3VuZCA9
        IGZhbHNlLCBuYW1lcywgb2JqZWN0LCBoYW5kbGVySW5mbywgaGFuZGxlck9i
        ajsKCiAgICAgICAgaWYgKCF0YXJnZXRIYW5kbGVySW5mb3MpIHsgcmV0dXJu
        IGZhbHNlOyB9CgogICAgICAgIHZhciByZWNvZ0hhbmRsZXJzID0gdGhpcy5y
        ZWNvZ25pemVyLmhhbmRsZXJzRm9yKHRhcmdldEhhbmRsZXJJbmZvc1t0YXJn
        ZXRIYW5kbGVySW5mb3MubGVuZ3RoIC0gMV0ubmFtZSk7CiAgICAgICAgZm9y
        ICh2YXIgaT10YXJnZXRIYW5kbGVySW5mb3MubGVuZ3RoLTE7IGk+PTA7IGkt
        LSkgewogICAgICAgICAgaGFuZGxlckluZm8gPSB0YXJnZXRIYW5kbGVySW5m
        b3NbaV07CiAgICAgICAgICBpZiAoaGFuZGxlckluZm8ubmFtZSA9PT0gaGFu
        ZGxlck5hbWUpIHsgZm91bmQgPSB0cnVlOyB9CgogICAgICAgICAgaWYgKGZv
        dW5kKSB7CiAgICAgICAgICAgIHZhciByZWNvZ0hhbmRsZXIgPSByZWNvZ0hh
        bmRsZXJzW2ldOwoKICAgICAgICAgICAgbWVyZ2UoYWN0aXZlUXVlcnlQYXJh
        bXMsIGhhbmRsZXJJbmZvLnF1ZXJ5UGFyYW1zKTsKICAgICAgICAgICAgaWYg
        KHF1ZXJ5UGFyYW1zICE9PSBmYWxzZSkgewogICAgICAgICAgICAgIG1lcmdl
        KGVmZmVjdGl2ZVF1ZXJ5UGFyYW1zLCBoYW5kbGVySW5mby5xdWVyeVBhcmFt
        cyk7CiAgICAgICAgICAgICAgbWVyZ2VTb21lS2V5cyhlZmZlY3RpdmVRdWVy
        eVBhcmFtcywgcXVlcnlQYXJhbXMsIHJlY29nSGFuZGxlci5xdWVyeVBhcmFt
        cyk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChoYW5kbGVySW5m
        by5pc0R5bmFtaWMgJiYgY29udGV4dHMubGVuZ3RoID4gMCkgewogICAgICAg
        ICAgICAgIG9iamVjdCA9IGNvbnRleHRzLnBvcCgpOwoKICAgICAgICAgICAg
        ICBpZiAoaXNQYXJhbShvYmplY3QpKSB7CiAgICAgICAgICAgICAgICB2YXIg
        bmFtZSA9IHJlY29nSGFuZGxlci5uYW1lc1swXTsKICAgICAgICAgICAgICAg
        IGlmICgiIiArIG9iamVjdCAhPT0gdGhpcy5jdXJyZW50UGFyYW1zW25hbWVd
        KSB7IHJldHVybiBmYWxzZTsgfQogICAgICAgICAgICAgIH0gZWxzZSBpZiAo
        aGFuZGxlckluZm8uY29udGV4dCAhPT0gb2JqZWN0KSB7CiAgICAgICAgICAg
        ICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgICAgfQogICAgICAgICAg
        ICB9CiAgICAgICAgICB9CiAgICAgICAgfQoKCiAgICAgICAgcmV0dXJuIGNv
        bnRleHRzLmxlbmd0aCA9PT0gMCAmJiBmb3VuZCAmJiBxdWVyeVBhcmFtc0Vx
        dWFsKGFjdGl2ZVF1ZXJ5UGFyYW1zLCBlZmZlY3RpdmVRdWVyeVBhcmFtcyk7
        CiAgICAgIH0sCgogICAgICB0cmlnZ2VyOiBmdW5jdGlvbihuYW1lKSB7CiAg
        ICAgICAgdmFyIGFyZ3MgPSBzbGljZS5jYWxsKGFyZ3VtZW50cyk7CiAgICAg
        ICAgdHJpZ2dlcih0aGlzLCB0aGlzLmN1cnJlbnRIYW5kbGVySW5mb3MsIGZh
        bHNlLCBhcmdzKTsKICAgICAgfSwKCiAgICAgIC8qKgogICAgICAgIEhvb2sg
        cG9pbnQgZm9yIGxvZ2dpbmcgdHJhbnNpdGlvbiBzdGF0dXMgdXBkYXRlcy4K
        CiAgICAgICAgQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2UgVGhlIG1lc3NhZ2Ug
        dG8gbG9nLgogICAgICAqLwogICAgICBsb2c6IG51bGwKICAgIH07CgogICAg
        LyoqCiAgICAgIEBwcml2YXRlCgogICAgICBVc2VkIGludGVybmFsbHkgZm9y
        IGJvdGggVVJMIGFuZCBuYW1lZCB0cmFuc2l0aW9uIHRvIGRldGVybWluZQog
        ICAgICBhIHNoYXJlZCBwaXZvdCBwYXJlbnQgcm91dGUgYW5kIG90aGVyIGRh
        dGEgbmVjZXNzYXJ5IHRvIHBlcmZvcm0KICAgICAgYSB0cmFuc2l0aW9uLgog
        ICAgICovCiAgICBmdW5jdGlvbiBnZXRNYXRjaFBvaW50KHJvdXRlciwgaGFu
        ZGxlcnMsIG9iamVjdHMsIGlucHV0UGFyYW1zLCBxdWVyeVBhcmFtcykgewoK
        ICAgICAgdmFyIG1hdGNoUG9pbnQgPSBoYW5kbGVycy5sZW5ndGgsCiAgICAg
        ICAgICBwcm92aWRlZE1vZGVscyA9IHt9LCBpLAogICAgICAgICAgY3VycmVu
        dEhhbmRsZXJJbmZvcyA9IHJvdXRlci5jdXJyZW50SGFuZGxlckluZm9zIHx8
        IFtdLAogICAgICAgICAgcGFyYW1zID0ge30sCiAgICAgICAgICBvbGRQYXJh
        bXMgPSByb3V0ZXIuY3VycmVudFBhcmFtcyB8fCB7fSwKICAgICAgICAgIGFj
        dGl2ZVRyYW5zaXRpb24gPSByb3V0ZXIuYWN0aXZlVHJhbnNpdGlvbiwKICAg
        ICAgICAgIGhhbmRsZXJQYXJhbXMgPSB7fSwKICAgICAgICAgIG9iajsKCiAg
        ICAgIG9iamVjdHMgPSBzbGljZS5jYWxsKG9iamVjdHMpOwogICAgICBtZXJn
        ZShwYXJhbXMsIGlucHV0UGFyYW1zKTsKCiAgICAgIGZvciAoaSA9IGhhbmRs
        ZXJzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7CiAgICAgICAgdmFyIGhh
        bmRsZXJPYmogPSBoYW5kbGVyc1tpXSwKICAgICAgICAgICAgaGFuZGxlck5h
        bWUgPSBoYW5kbGVyT2JqLmhhbmRsZXIsCiAgICAgICAgICAgIG9sZEhhbmRs
        ZXJJbmZvID0gY3VycmVudEhhbmRsZXJJbmZvc1tpXSwKICAgICAgICAgICAg
        aGFzQ2hhbmdlZCA9IGZhbHNlOwoKICAgICAgICAvLyBDaGVjayBpZiBoYW5k
        bGVyIG5hbWVzIGhhdmUgY2hhbmdlZC4KICAgICAgICBpZiAoIW9sZEhhbmRs
        ZXJJbmZvIHx8IG9sZEhhbmRsZXJJbmZvLm5hbWUgIT09IGhhbmRsZXJPYmou
        aGFuZGxlcikgeyBoYXNDaGFuZ2VkID0gdHJ1ZTsgfQoKICAgICAgICBpZiAo
        aGFuZGxlck9iai5pc0R5bmFtaWMpIHsKICAgICAgICAgIC8vIFVSTCB0cmFu
        c2l0aW9uLgoKICAgICAgICAgIGlmIChvYmogPSBnZXRNYXRjaFBvaW50T2Jq
        ZWN0KG9iamVjdHMsIGhhbmRsZXJOYW1lLCBhY3RpdmVUcmFuc2l0aW9uLCB0
        cnVlLCBwYXJhbXMpKSB7CiAgICAgICAgICAgIGhhc0NoYW5nZWQgPSB0cnVl
        OwogICAgICAgICAgICBwcm92aWRlZE1vZGVsc1toYW5kbGVyTmFtZV0gPSBv
        Ymo7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBoYW5kbGVyUGFy
        YW1zW2hhbmRsZXJOYW1lXSA9IHt9OwogICAgICAgICAgICBmb3IgKHZhciBw
        cm9wIGluIGhhbmRsZXJPYmoucGFyYW1zKSB7CiAgICAgICAgICAgICAgaWYg
        KCFoYW5kbGVyT2JqLnBhcmFtcy5oYXNPd25Qcm9wZXJ0eShwcm9wKSkgeyBj
        b250aW51ZTsgfQogICAgICAgICAgICAgIHZhciBuZXdQYXJhbSA9IGhhbmRs
        ZXJPYmoucGFyYW1zW3Byb3BdOwogICAgICAgICAgICAgIGlmIChvbGRQYXJh
        bXNbcHJvcF0gIT09IG5ld1BhcmFtKSB7IGhhc0NoYW5nZWQgPSB0cnVlOyB9
        CiAgICAgICAgICAgICAgaGFuZGxlclBhcmFtc1toYW5kbGVyTmFtZV1bcHJv
        cF0gPSBwYXJhbXNbcHJvcF0gPSBuZXdQYXJhbTsKICAgICAgICAgICAgfQog
        ICAgICAgICAgfQogICAgICAgIH0gZWxzZSBpZiAoaGFuZGxlck9iai5oYXNP
        d25Qcm9wZXJ0eSgnbmFtZXMnKSkgewogICAgICAgICAgLy8gTmFtZWQgdHJh
        bnNpdGlvbi4KCiAgICAgICAgICBpZiAob2JqZWN0cy5sZW5ndGgpIHsgaGFz
        Q2hhbmdlZCA9IHRydWU7IH0KCiAgICAgICAgICBpZiAob2JqID0gZ2V0TWF0
        Y2hQb2ludE9iamVjdChvYmplY3RzLCBoYW5kbGVyTmFtZSwgYWN0aXZlVHJh
        bnNpdGlvbiwgaGFuZGxlck9iai5uYW1lc1swXSwgcGFyYW1zKSkgewogICAg
        ICAgICAgICBwcm92aWRlZE1vZGVsc1toYW5kbGVyTmFtZV0gPSBvYmo7CiAg
        ICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB2YXIgbmFtZXMgPSBoYW5k
        bGVyT2JqLm5hbWVzOwogICAgICAgICAgICBoYW5kbGVyUGFyYW1zW2hhbmRs
        ZXJOYW1lXSA9IHt9OwogICAgICAgICAgICBmb3IgKHZhciBqID0gMCwgbGVu
        ID0gbmFtZXMubGVuZ3RoOyBqIDwgbGVuOyArK2opIHsKICAgICAgICAgICAg
        ICB2YXIgbmFtZSA9IG5hbWVzW2pdOwogICAgICAgICAgICAgIGhhbmRsZXJQ
        YXJhbXNbaGFuZGxlck5hbWVdW25hbWVdID0gcGFyYW1zW25hbWVdID0gcGFy
        YW1zW25hbWVdIHx8IG9sZFBhcmFtc1tuYW1lXTsKICAgICAgICAgICAgfQog
        ICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgLy8gSWYgdGhlcmUgaXMg
        YW4gb2xkIGhhbmRsZXIsIHNlZSBpZiBxdWVyeSBwYXJhbXMgYXJlIHRoZSBz
        YW1lLiBJZiB0aGVyZSBpc24ndCBhbiBvbGQgaGFuZGxlciwKICAgICAgICAv
        LyBoYXNDaGFuZ2VkIHdpbGwgYWxyZWFkeSBiZSB0cnVlIGhlcmUKICAgICAg
        ICBpZihvbGRIYW5kbGVySW5mbyAmJiAhcXVlcnlQYXJhbXNFcXVhbChvbGRI
        YW5kbGVySW5mby5xdWVyeVBhcmFtcywgaGFuZGxlck9iai5xdWVyeVBhcmFt
        cykpIHsKICAgICAgICAgICAgaGFzQ2hhbmdlZCA9IHRydWU7CiAgICAgICAg
        fQoKICAgICAgICBpZiAoaGFzQ2hhbmdlZCkgeyBtYXRjaFBvaW50ID0gaTsg
        fQogICAgICB9CgogICAgICBpZiAob2JqZWN0cy5sZW5ndGggPiAwKSB7CiAg
        ICAgICAgdGhyb3cgbmV3IEVycm9yKCJNb3JlIGNvbnRleHQgb2JqZWN0cyB3
        ZXJlIHBhc3NlZCB0aGFuIHRoZXJlIGFyZSBkeW5hbWljIHNlZ21lbnRzIGZv
        ciB0aGUgcm91dGU6ICIgKyBoYW5kbGVyc1toYW5kbGVycy5sZW5ndGggLSAx
        XS5oYW5kbGVyKTsKICAgICAgfQoKICAgICAgdmFyIHBpdm90SGFuZGxlcklu
        Zm8gPSBjdXJyZW50SGFuZGxlckluZm9zW21hdGNoUG9pbnQgLSAxXSwKICAg
        ICAgICAgIHBpdm90SGFuZGxlciA9IHBpdm90SGFuZGxlckluZm8gJiYgcGl2
        b3RIYW5kbGVySW5mby5oYW5kbGVyOwoKICAgICAgcmV0dXJuIHsgbWF0Y2hQ
        b2ludDogbWF0Y2hQb2ludCwgcHJvdmlkZWRNb2RlbHM6IHByb3ZpZGVkTW9k
        ZWxzLCBwYXJhbXM6IHBhcmFtcywgaGFuZGxlclBhcmFtczogaGFuZGxlclBh
        cmFtcywgcGl2b3RIYW5kbGVyOiBwaXZvdEhhbmRsZXIgfTsKICAgIH0KCiAg
        ICBmdW5jdGlvbiBnZXRNYXRjaFBvaW50T2JqZWN0KG9iamVjdHMsIGhhbmRs
        ZXJOYW1lLCBhY3RpdmVUcmFuc2l0aW9uLCBwYXJhbU5hbWUsIHBhcmFtcykg
        ewoKICAgICAgaWYgKG9iamVjdHMubGVuZ3RoICYmIHBhcmFtTmFtZSkgewoK
        ICAgICAgICB2YXIgb2JqZWN0ID0gb2JqZWN0cy5wb3AoKTsKCiAgICAgICAg
        Ly8gSWYgcHJvdmlkZWQgb2JqZWN0IGlzIHN0cmluZyBvciBudW1iZXIsIHRy
        ZWF0IGFzIHBhcmFtLgogICAgICAgIGlmIChpc1BhcmFtKG9iamVjdCkpIHsK
        ICAgICAgICAgIHBhcmFtc1twYXJhbU5hbWVdID0gb2JqZWN0LnRvU3RyaW5n
        KCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJldHVybiBvYmplY3Q7
        CiAgICAgICAgfQogICAgICB9IGVsc2UgaWYgKGFjdGl2ZVRyYW5zaXRpb24p
        IHsKICAgICAgICAvLyBVc2UgbW9kZWwgZnJvbSBwcmV2aW91cyB0cmFuc2l0
        aW9uIGF0dGVtcHQsIHByZWZlcmFibHkgdGhlIHJlc29sdmVkIG9uZS4KICAg
        ICAgICByZXR1cm4gYWN0aXZlVHJhbnNpdGlvbi5yZXNvbHZlZE1vZGVsc1to
        YW5kbGVyTmFtZV0gfHwKICAgICAgICAgICAgICAgKHBhcmFtTmFtZSAmJiBh
        Y3RpdmVUcmFuc2l0aW9uLnByb3ZpZGVkTW9kZWxzW2hhbmRsZXJOYW1lXSk7
        CiAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBpc1BhcmFtKG9iamVjdCkg
        ewogICAgICByZXR1cm4gKHR5cGVvZiBvYmplY3QgPT09ICJzdHJpbmciIHx8
        IG9iamVjdCBpbnN0YW5jZW9mIFN0cmluZyB8fCAhaXNOYU4ob2JqZWN0KSk7
        CiAgICB9CgoKCiAgICAvKioKICAgICAgQHByaXZhdGUKCiAgICAgIFRoaXMg
        bWV0aG9kIHRha2VzIGEgaGFuZGxlciBuYW1lIGFuZCByZXR1cm5zIGEgbGlz
        dCBvZiBxdWVyeSBwYXJhbXMKICAgICAgdGhhdCBhcmUgdmFsaWQgdG8gcGFz
        cyB0byB0aGUgaGFuZGxlciBvciBpdHMgcGFyZW50cwoKICAgICAgQHBhcmFt
        IHtSb3V0ZXJ9IHJvdXRlcgogICAgICBAcGFyYW0ge1N0cmluZ30gaGFuZGxl
        ck5hbWUKICAgICAgQHJldHVybiB7QXJyYXlbU3RyaW5nXX0gYSBsaXN0IG9m
        IHF1ZXJ5IHBhcmFtZXRlcnMKICAgICovCiAgICBmdW5jdGlvbiBxdWVyeVBh
        cmFtc0ZvckhhbmRsZXIocm91dGVyLCBoYW5kbGVyTmFtZSkgewogICAgICB2
        YXIgaGFuZGxlcnMgPSByb3V0ZXIucmVjb2duaXplci5oYW5kbGVyc0Zvciho
        YW5kbGVyTmFtZSksCiAgICAgICAgcXVlcnlQYXJhbXMgPSBbXTsKCiAgICAg
        IGZvciAodmFyIGkgPSAwOyBpIDwgaGFuZGxlcnMubGVuZ3RoOyBpKyspIHsK
        ICAgICAgICBxdWVyeVBhcmFtcy5wdXNoLmFwcGx5KHF1ZXJ5UGFyYW1zLCBo
        YW5kbGVyc1tpXS5xdWVyeVBhcmFtcyB8fCBbXSk7CiAgICAgIH0KCiAgICAg
        IHJldHVybiBxdWVyeVBhcmFtczsKICAgIH0KICAgIC8qKgogICAgICBAcHJp
        dmF0ZQoKICAgICAgVGhpcyBtZXRob2QgdGFrZXMgYSBoYW5kbGVyIG5hbWUg
        YW5kIGEgbGlzdCBvZiBjb250ZXh0cyBhbmQgcmV0dXJucwogICAgICBhIHNl
        cmlhbGl6ZWQgcGFyYW1ldGVyIGhhc2ggc3VpdGFibGUgdG8gcGFzcyB0byBg
        cmVjb2duaXplci5nZW5lcmF0ZSgpYC4KCiAgICAgIEBwYXJhbSB7Um91dGVy
        fSByb3V0ZXIKICAgICAgQHBhcmFtIHtTdHJpbmd9IGhhbmRsZXJOYW1lCiAg
        ICAgIEBwYXJhbSB7QXJyYXlbT2JqZWN0XX0gb2JqZWN0cwogICAgICBAcmV0
        dXJuIHtPYmplY3R9IGEgc2VyaWFsaXplZCBwYXJhbWV0ZXIgaGFzaAogICAg
        Ki8KICAgIGZ1bmN0aW9uIHBhcmFtc0ZvckhhbmRsZXIocm91dGVyLCBoYW5k
        bGVyTmFtZSwgb2JqZWN0cywgcXVlcnlQYXJhbXMpIHsKCiAgICAgIHZhciBo
        YW5kbGVycyA9IHJvdXRlci5yZWNvZ25pemVyLmhhbmRsZXJzRm9yKGhhbmRs
        ZXJOYW1lKSwKICAgICAgICAgIHBhcmFtcyA9IHt9LAogICAgICAgICAgaGFu
        ZGxlckluZm9zID0gZ2VuZXJhdGVIYW5kbGVySW5mb3NXaXRoUXVlcnlQYXJh
        bXMocm91dGVyLCBoYW5kbGVycywgcXVlcnlQYXJhbXMpLAogICAgICAgICAg
        bWF0Y2hQb2ludCA9IGdldE1hdGNoUG9pbnQocm91dGVyLCBoYW5kbGVySW5m
        b3MsIG9iamVjdHMpLm1hdGNoUG9pbnQsCiAgICAgICAgICBtZXJnZWRRdWVy
        eVBhcmFtcyA9IHt9LAogICAgICAgICAgb2JqZWN0LCBoYW5kbGVyT2JqLCBo
        YW5kbGVyLCBuYW1lcywgaTsKCiAgICAgIHBhcmFtcy5xdWVyeVBhcmFtcyA9
        IHt9OwoKICAgICAgZm9yIChpPTA7IGk8aGFuZGxlcnMubGVuZ3RoOyBpKysp
        IHsKICAgICAgICBoYW5kbGVyT2JqID0gaGFuZGxlcnNbaV07CiAgICAgICAg
        aGFuZGxlciA9IHJvdXRlci5nZXRIYW5kbGVyKGhhbmRsZXJPYmouaGFuZGxl
        cik7CiAgICAgICAgbmFtZXMgPSBoYW5kbGVyT2JqLm5hbWVzOwoKICAgICAg
        ICAvLyBJZiBpdCdzIGEgZHluYW1pYyBzZWdtZW50CiAgICAgICAgaWYgKG5h
        bWVzLmxlbmd0aCkgewogICAgICAgICAgLy8gSWYgd2UgaGF2ZSBvYmplY3Rz
        LCB1c2UgdGhlbQogICAgICAgICAgaWYgKGkgPj0gbWF0Y2hQb2ludCkgewog
        ICAgICAgICAgICBvYmplY3QgPSBvYmplY3RzLnNoaWZ0KCk7CiAgICAgICAg
        ICAvLyBPdGhlcndpc2UgdXNlIGV4aXN0aW5nIGNvbnRleHQKICAgICAgICAg
        IH0gZWxzZSB7CiAgICAgICAgICAgIG9iamVjdCA9IGhhbmRsZXIuY29udGV4
        dDsKICAgICAgICAgIH0KCiAgICAgICAgICAvLyBTZXJpYWxpemUgdG8gZ2Vu
        ZXJhdGUgcGFyYW1zCiAgICAgICAgICBtZXJnZShwYXJhbXMsIHNlcmlhbGl6
        ZShoYW5kbGVyLCBvYmplY3QsIG5hbWVzKSk7CiAgICAgICAgfQogICAgICAg
        IGlmIChxdWVyeVBhcmFtcyAhPT0gZmFsc2UpIHsKICAgICAgICAgIG1lcmdl
        U29tZUtleXMocGFyYW1zLnF1ZXJ5UGFyYW1zLCByb3V0ZXIuY3VycmVudFF1
        ZXJ5UGFyYW1zLCBoYW5kbGVyT2JqLnF1ZXJ5UGFyYW1zKTsKICAgICAgICAg
        IG1lcmdlU29tZUtleXMocGFyYW1zLnF1ZXJ5UGFyYW1zLCBxdWVyeVBhcmFt
        cywgaGFuZGxlck9iai5xdWVyeVBhcmFtcyk7CiAgICAgICAgfQogICAgICB9
        CgogICAgICBpZiAocXVlcnlQYXJhbXNFcXVhbChwYXJhbXMucXVlcnlQYXJh
        bXMsIHt9KSkgeyBkZWxldGUgcGFyYW1zLnF1ZXJ5UGFyYW1zOyB9CiAgICAg
        IHJldHVybiBwYXJhbXM7CiAgICB9CgogICAgZnVuY3Rpb24gbWVyZ2UoaGFz
        aCwgb3RoZXIpIHsKICAgICAgZm9yICh2YXIgcHJvcCBpbiBvdGhlcikgewog
        ICAgICAgIGlmIChvdGhlci5oYXNPd25Qcm9wZXJ0eShwcm9wKSkgeyBoYXNo
        W3Byb3BdID0gb3RoZXJbcHJvcF07IH0KICAgICAgfQogICAgfQoKICAgIGZ1
        bmN0aW9uIG1lcmdlU29tZUtleXMoaGFzaCwgb3RoZXIsIGtleXMpIHsKICAg
        ICAgaWYgKCFvdGhlciB8fCAha2V5cykgeyByZXR1cm47IH0KICAgICAgZm9y
        KHZhciBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyBpKyspIHsKICAgICAgICB2
        YXIga2V5ID0ga2V5c1tpXSwgdmFsdWU7CiAgICAgICAgaWYob3RoZXIuaGFz
        T3duUHJvcGVydHkoa2V5KSkgewogICAgICAgICAgdmFsdWUgPSBvdGhlcltr
        ZXldOwogICAgICAgICAgaWYodmFsdWUgPT09IG51bGwgfHwgdmFsdWUgPT09
        IGZhbHNlIHx8IHR5cGVvZiB2YWx1ZSA9PT0gInVuZGVmaW5lZCIpIHsKICAg
        ICAgICAgICAgZGVsZXRlIGhhc2hba2V5XTsKICAgICAgICAgIH0gZWxzZSB7
        CiAgICAgICAgICAgIGhhc2hba2V5XSA9IG90aGVyW2tleV07CiAgICAgICAg
        ICB9CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgIEBw
        cml2YXRlCiAgICAqLwoKICAgIGZ1bmN0aW9uIGdlbmVyYXRlSGFuZGxlcklu
        Zm9zV2l0aFF1ZXJ5UGFyYW1zKHJvdXRlciwgaGFuZGxlcnMsIHF1ZXJ5UGFy
        YW1zKSB7CiAgICAgIHZhciBoYW5kbGVySW5mb3MgPSBbXTsKCiAgICAgIGZv
        ciAodmFyIGkgPSAwOyBpIDwgaGFuZGxlcnMubGVuZ3RoOyBpKyspIHsKICAg
        ICAgICB2YXIgaGFuZGxlciA9IGhhbmRsZXJzW2ldLAogICAgICAgICAgaGFu
        ZGxlckluZm8gPSB7IGhhbmRsZXI6IGhhbmRsZXIuaGFuZGxlciwgbmFtZXM6
        IGhhbmRsZXIubmFtZXMsIGNvbnRleHQ6IGhhbmRsZXIuY29udGV4dCwgaXNE
        eW5hbWljOiBoYW5kbGVyLmlzRHluYW1pYyB9LAogICAgICAgICAgYWN0aXZl
        UXVlcnlQYXJhbXMgPSB7fTsKCiAgICAgICAgaWYgKHF1ZXJ5UGFyYW1zICE9
        PSBmYWxzZSkgewogICAgICAgICAgbWVyZ2VTb21lS2V5cyhhY3RpdmVRdWVy
        eVBhcmFtcywgcm91dGVyLmN1cnJlbnRRdWVyeVBhcmFtcywgaGFuZGxlci5x
        dWVyeVBhcmFtcyk7CiAgICAgICAgICBtZXJnZVNvbWVLZXlzKGFjdGl2ZVF1
        ZXJ5UGFyYW1zLCBxdWVyeVBhcmFtcywgaGFuZGxlci5xdWVyeVBhcmFtcyk7
        CiAgICAgICAgfQoKICAgICAgICBpZiAoaGFuZGxlci5xdWVyeVBhcmFtcyAm
        JiBoYW5kbGVyLnF1ZXJ5UGFyYW1zLmxlbmd0aCA+IDApIHsKICAgICAgICAg
        IGhhbmRsZXJJbmZvLnF1ZXJ5UGFyYW1zID0gYWN0aXZlUXVlcnlQYXJhbXM7
        CiAgICAgICAgfQoKICAgICAgICBoYW5kbGVySW5mb3MucHVzaChoYW5kbGVy
        SW5mbyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBoYW5kbGVySW5mb3M7CiAg
        ICB9CgogICAgLyoqCiAgICAgIEBwcml2YXRlCiAgICAqLwogICAgZnVuY3Rp
        b24gY3JlYXRlUXVlcnlQYXJhbVRyYW5zaXRpb24ocm91dGVyLCBxdWVyeVBh
        cmFtcywgaXNJbnRlcm1lZGlhdGUpIHsKICAgICAgdmFyIGN1cnJlbnRIYW5k
        bGVycyA9IHJvdXRlci5jdXJyZW50SGFuZGxlckluZm9zLAogICAgICAgICAg
        Y3VycmVudEhhbmRsZXIgPSBjdXJyZW50SGFuZGxlcnNbY3VycmVudEhhbmRs
        ZXJzLmxlbmd0aCAtIDFdLAogICAgICAgICAgbmFtZSA9IGN1cnJlbnRIYW5k
        bGVyLm5hbWU7CgogICAgICBsb2cocm91dGVyLCAiQXR0ZW1wdGluZyBxdWVy
        eSBwYXJhbSB0cmFuc2l0aW9uIik7CgogICAgICByZXR1cm4gY3JlYXRlTmFt
        ZWRUcmFuc2l0aW9uKHJvdXRlciwgW25hbWUsIHF1ZXJ5UGFyYW1zXSwgaXNJ
        bnRlcm1lZGlhdGUpOwogICAgfQoKICAgIC8qKgogICAgICBAcHJpdmF0ZQog
        ICAgKi8KICAgIGZ1bmN0aW9uIGNyZWF0ZU5hbWVkVHJhbnNpdGlvbihyb3V0
        ZXIsIGFyZ3MsIGlzSW50ZXJtZWRpYXRlKSB7CiAgICAgIHZhciBwYXJ0aXRp
        b25lZEFyZ3MgICAgID0gZXh0cmFjdFF1ZXJ5UGFyYW1zKGFyZ3MpLAogICAg
        ICAgIHB1cmVBcmdzICAgICAgICAgICAgICA9IHBhcnRpdGlvbmVkQXJnc1sw
        XSwKICAgICAgICBxdWVyeVBhcmFtcyAgICAgICAgICAgPSBwYXJ0aXRpb25l
        ZEFyZ3NbMV0sCiAgICAgICAgaGFuZGxlcnMgICAgICAgICAgICAgID0gcm91
        dGVyLnJlY29nbml6ZXIuaGFuZGxlcnNGb3IocHVyZUFyZ3NbMF0pLAogICAg
        ICAgIGhhbmRsZXJJbmZvcyAgICAgICAgICA9IGdlbmVyYXRlSGFuZGxlcklu
        Zm9zV2l0aFF1ZXJ5UGFyYW1zKHJvdXRlciwgaGFuZGxlcnMsIHF1ZXJ5UGFy
        YW1zKTsKCgogICAgICBsb2cocm91dGVyLCAiQXR0ZW1wdGluZyB0cmFuc2l0
        aW9uIHRvICIgKyBwdXJlQXJnc1swXSk7CgogICAgICByZXR1cm4gcGVyZm9y
        bVRyYW5zaXRpb24ocm91dGVyLAogICAgICAgICAgICAgICAgICAgICAgICAg
        ICAgICAgaGFuZGxlckluZm9zLAogICAgICAgICAgICAgICAgICAgICAgICAg
        ICAgICAgc2xpY2UuY2FsbChwdXJlQXJncywgMSksCiAgICAgICAgICAgICAg
        ICAgICAgICAgICAgICAgICByb3V0ZXIuY3VycmVudFBhcmFtcywKICAgICAg
        ICAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1zLAogICAgICAg
        ICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCwKICAgICAgICAgICAgICAg
        ICAgICAgICAgICAgICAgIGlzSW50ZXJtZWRpYXRlKTsKICAgIH0KCiAgICAv
        KioKICAgICAgQHByaXZhdGUKICAgICovCiAgICBmdW5jdGlvbiBjcmVhdGVV
        UkxUcmFuc2l0aW9uKHJvdXRlciwgdXJsLCBpc0ludGVybWVkaWF0ZSkgewog
        ICAgICB2YXIgcmVzdWx0cyA9IHJvdXRlci5yZWNvZ25pemVyLnJlY29nbml6
        ZSh1cmwpLAogICAgICAgICAgY3VycmVudEhhbmRsZXJJbmZvcyA9IHJvdXRl
        ci5jdXJyZW50SGFuZGxlckluZm9zLAogICAgICAgICAgcXVlcnlQYXJhbXMg
        PSB7fSwKICAgICAgICAgIGksIGxlbjsKCiAgICAgIGxvZyhyb3V0ZXIsICJB
        dHRlbXB0aW5nIFVSTCB0cmFuc2l0aW9uIHRvICIgKyB1cmwpOwoKICAgICAg
        aWYgKHJlc3VsdHMpIHsKICAgICAgICAvLyBNYWtlIHN1cmUgdGhpcyByb3V0
        ZSBpcyBhY3R1YWxseSBhY2Nlc3NpYmxlIGJ5IFVSTC4KICAgICAgICBmb3Ig
        KGkgPSAwLCBsZW4gPSByZXN1bHRzLmxlbmd0aDsgaSA8IGxlbjsgKytpKSB7
        CgogICAgICAgICAgaWYgKHJvdXRlci5nZXRIYW5kbGVyKHJlc3VsdHNbaV0u
        aGFuZGxlcikuaW5hY2Nlc3NpYmx5QnlVUkwpIHsKICAgICAgICAgICAgcmVz
        dWx0cyA9IG51bGw7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQog
        ICAgICAgIH0KICAgICAgfQoKICAgICAgaWYgKCFyZXN1bHRzKSB7CiAgICAg
        ICAgcmV0dXJuIGVycm9yVHJhbnNpdGlvbihyb3V0ZXIsIG5ldyBSb3V0ZXIu
        VW5yZWNvZ25pemVkVVJMRXJyb3IodXJsKSk7CiAgICAgIH0KCiAgICAgIGZv
        cihpID0gMCwgbGVuID0gcmVzdWx0cy5sZW5ndGg7IGkgPCBsZW47IGkrKykg
        ewogICAgICAgIG1lcmdlKHF1ZXJ5UGFyYW1zLCByZXN1bHRzW2ldLnF1ZXJ5
        UGFyYW1zKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHBlcmZvcm1UcmFuc2l0
        aW9uKHJvdXRlciwgcmVzdWx0cywgW10sIHt9LCBxdWVyeVBhcmFtcywgbnVs
        bCwgaXNJbnRlcm1lZGlhdGUpOwogICAgfQoKCiAgICAvKioKICAgICAgQHBy
        aXZhdGUKCiAgICAgIFRha2VzIGFuIEFycmF5IG9mIGBIYW5kbGVySW5mb2Bz
        LCBmaWd1cmVzIG91dCB3aGljaCBvbmVzIGFyZQogICAgICBleGl0aW5nLCBl
        bnRlcmluZywgb3IgY2hhbmdpbmcgY29udGV4dHMsIGFuZCBjYWxscyB0aGUK
        ICAgICAgcHJvcGVyIGhhbmRsZXIgaG9va3MuCgogICAgICBGb3IgZXhhbXBs
        ZSwgY29uc2lkZXIgdGhlIGZvbGxvd2luZyB0cmVlIG9mIGhhbmRsZXJzLiBF
        YWNoIGhhbmRsZXIgaXMKICAgICAgZm9sbG93ZWQgYnkgdGhlIFVSTCBzZWdt
        ZW50IGl0IGhhbmRsZXMuCgogICAgICBgYGAKICAgICAgfH5pbmRleCAoIi8i
        KQogICAgICB8IHx+cG9zdHMgKCIvcG9zdHMiKQogICAgICB8IHwgfC1zaG93
        UG9zdCAoIi86aWQiKQogICAgICB8IHwgfC1uZXdQb3N0ICgiL25ldyIpCiAg
        ICAgIHwgfCB8LWVkaXRQb3N0ICgiL2VkaXQiKQogICAgICB8IHx+YWJvdXQg
        KCIvYWJvdXQvOmlkIikKICAgICAgYGBgCgogICAgICBDb25zaWRlciB0aGUg
        Zm9sbG93aW5nIHRyYW5zaXRpb25zOgoKICAgICAgMS4gQSBVUkwgdHJhbnNp
        dGlvbiB0byBgL3Bvc3RzLzFgLgogICAgICAgICAxLiBUcmlnZ2VycyB0aGUg
        YCptb2RlbGAgY2FsbGJhY2tzIG9uIHRoZQogICAgICAgICAgICBgaW5kZXhg
        LCBgcG9zdHNgLCBhbmQgYHNob3dQb3N0YCBoYW5kbGVycwogICAgICAgICAy
        LiBUcmlnZ2VycyB0aGUgYGVudGVyYCBjYWxsYmFjayBvbiB0aGUgc2FtZQog
        ICAgICAgICAzLiBUcmlnZ2VycyB0aGUgYHNldHVwYCBjYWxsYmFjayBvbiB0
        aGUgc2FtZQogICAgICAyLiBBIGRpcmVjdCB0cmFuc2l0aW9uIHRvIGBuZXdQ
        b3N0YAogICAgICAgICAxLiBUcmlnZ2VycyB0aGUgYGV4aXRgIGNhbGxiYWNr
        IG9uIGBzaG93UG9zdGAKICAgICAgICAgMi4gVHJpZ2dlcnMgdGhlIGBlbnRl
        cmAgY2FsbGJhY2sgb24gYG5ld1Bvc3RgCiAgICAgICAgIDMuIFRyaWdnZXJz
        IHRoZSBgc2V0dXBgIGNhbGxiYWNrIG9uIGBuZXdQb3N0YAogICAgICAzLiBB
        IGRpcmVjdCB0cmFuc2l0aW9uIHRvIGBhYm91dGAgd2l0aCBhIHNwZWNpZmll
        ZAogICAgICAgICBjb250ZXh0IG9iamVjdAogICAgICAgICAxLiBUcmlnZ2Vy
        cyB0aGUgYGV4aXRgIGNhbGxiYWNrIG9uIGBuZXdQb3N0YAogICAgICAgICAg
        ICBhbmQgYHBvc3RzYAogICAgICAgICAyLiBUcmlnZ2VycyB0aGUgYHNlcmlh
        bGl6ZWAgY2FsbGJhY2sgb24gYGFib3V0YAogICAgICAgICAzLiBUcmlnZ2Vy
        cyB0aGUgYGVudGVyYCBjYWxsYmFjayBvbiBgYWJvdXRgCiAgICAgICAgIDQu
        IFRyaWdnZXJzIHRoZSBgc2V0dXBgIGNhbGxiYWNrIG9uIGBhYm91dGAKCiAg
        ICAgIEBwYXJhbSB7VHJhbnNpdGlvbn0gdHJhbnNpdGlvbgogICAgICBAcGFy
        YW0ge0FycmF5W0hhbmRsZXJJbmZvXX0gaGFuZGxlckluZm9zCiAgICAqLwog
        ICAgZnVuY3Rpb24gc2V0dXBDb250ZXh0cyh0cmFuc2l0aW9uLCBoYW5kbGVy
        SW5mb3MpIHsKICAgICAgdmFyIHJvdXRlciA9IHRyYW5zaXRpb24ucm91dGVy
        LAogICAgICAgICAgcGFydGl0aW9uID0gcGFydGl0aW9uSGFuZGxlcnMocm91
        dGVyLmN1cnJlbnRIYW5kbGVySW5mb3MgfHwgW10sIGhhbmRsZXJJbmZvcyk7
        CgogICAgICByb3V0ZXIudGFyZ2V0SGFuZGxlckluZm9zID0gaGFuZGxlcklu
        Zm9zOwoKICAgICAgZWFjaEhhbmRsZXIocGFydGl0aW9uLmV4aXRlZCwgZnVu
        Y3Rpb24oaGFuZGxlckluZm8pIHsKICAgICAgICB2YXIgaGFuZGxlciA9IGhh
        bmRsZXJJbmZvLmhhbmRsZXI7CiAgICAgICAgZGVsZXRlIGhhbmRsZXIuY29u
        dGV4dDsKICAgICAgICBpZiAoaGFuZGxlci5leGl0KSB7IGhhbmRsZXIuZXhp
        dCgpOyB9CiAgICAgIH0pOwoKICAgICAgdmFyIGN1cnJlbnRIYW5kbGVySW5m
        b3MgPSBwYXJ0aXRpb24udW5jaGFuZ2VkLnNsaWNlKCk7CiAgICAgIHJvdXRl
        ci5jdXJyZW50SGFuZGxlckluZm9zID0gY3VycmVudEhhbmRsZXJJbmZvczsK
        CiAgICAgIGVhY2hIYW5kbGVyKHBhcnRpdGlvbi51cGRhdGVkQ29udGV4dCwg
        ZnVuY3Rpb24oaGFuZGxlckluZm8pIHsKICAgICAgICBoYW5kbGVyRW50ZXJl
        ZE9yVXBkYXRlZCh0cmFuc2l0aW9uLCBjdXJyZW50SGFuZGxlckluZm9zLCBo
        YW5kbGVySW5mbywgZmFsc2UpOwogICAgICB9KTsKCiAgICAgIGVhY2hIYW5k
        bGVyKHBhcnRpdGlvbi5lbnRlcmVkLCBmdW5jdGlvbihoYW5kbGVySW5mbykg
        ewogICAgICAgIGhhbmRsZXJFbnRlcmVkT3JVcGRhdGVkKHRyYW5zaXRpb24s
        IGN1cnJlbnRIYW5kbGVySW5mb3MsIGhhbmRsZXJJbmZvLCB0cnVlKTsKICAg
        ICAgfSk7CiAgICB9CgogICAgLyoqCiAgICAgIEBwcml2YXRlCgogICAgICBI
        ZWxwZXIgbWV0aG9kIHVzZWQgYnkgc2V0dXBDb250ZXh0cy4gSGFuZGxlcyBl
        cnJvcnMgb3IgcmVkaXJlY3RzCiAgICAgIHRoYXQgbWF5IGhhcHBlbiBpbiBl
        bnRlci9zZXR1cC4KICAgICovCiAgICBmdW5jdGlvbiBoYW5kbGVyRW50ZXJl
        ZE9yVXBkYXRlZCh0cmFuc2l0aW9uLCBjdXJyZW50SGFuZGxlckluZm9zLCBo
        YW5kbGVySW5mbywgZW50ZXIpIHsKICAgICAgdmFyIGhhbmRsZXIgPSBoYW5k
        bGVySW5mby5oYW5kbGVyLAogICAgICAgICAgY29udGV4dCA9IGhhbmRsZXJJ
        bmZvLmNvbnRleHQ7CgogICAgICB0cnkgewogICAgICAgIGlmIChlbnRlciAm
        JiBoYW5kbGVyLmVudGVyKSB7IGhhbmRsZXIuZW50ZXIoKTsgfQogICAgICAg
        IGNoZWNrQWJvcnQodHJhbnNpdGlvbik7CgogICAgICAgIHNldENvbnRleHQo
        aGFuZGxlciwgY29udGV4dCk7CiAgICAgICAgc2V0UXVlcnlQYXJhbXMoaGFu
        ZGxlciwgaGFuZGxlckluZm8ucXVlcnlQYXJhbXMpOwoKICAgICAgICBpZiAo
        aGFuZGxlci5zZXR1cCkgeyBoYW5kbGVyLnNldHVwKGNvbnRleHQsIGhhbmRs
        ZXJJbmZvLnF1ZXJ5UGFyYW1zKTsgfQogICAgICAgIGNoZWNrQWJvcnQodHJh
        bnNpdGlvbik7CiAgICAgIH0gY2F0Y2goZSkgewogICAgICAgIGlmICghKGUg
        aW5zdGFuY2VvZiBSb3V0ZXIuVHJhbnNpdGlvbkFib3J0ZWQpKSB7CiAgICAg
        ICAgICAvLyBUcmlnZ2VyIHRoZSBgZXJyb3JgIGV2ZW50IHN0YXJ0aW5nIGZy
        b20gdGhpcyBmYWlsZWQgaGFuZGxlci4KICAgICAgICAgIHRyYW5zaXRpb24u
        dHJpZ2dlcih0cnVlLCAnZXJyb3InLCBlLCB0cmFuc2l0aW9uLCBoYW5kbGVy
        KTsKICAgICAgICB9CgogICAgICAgIC8vIFByb3BhZ2F0ZSB0aGUgZXJyb3Ig
        c28gdGhhdCB0aGUgdHJhbnNpdGlvbiBwcm9taXNlIHdpbGwgcmVqZWN0Lgog
        ICAgICAgIHRocm93IGU7CiAgICAgIH0KCiAgICAgIGN1cnJlbnRIYW5kbGVy
        SW5mb3MucHVzaChoYW5kbGVySW5mbyk7CiAgICB9CgoKICAgIC8qKgogICAg
        ICBAcHJpdmF0ZQoKICAgICAgSXRlcmF0ZXMgb3ZlciBhbiBhcnJheSBvZiBg
        SGFuZGxlckluZm9gcywgcGFzc2luZyB0aGUgaGFuZGxlcgogICAgICBhbmQg
        Y29udGV4dCBpbnRvIHRoZSBjYWxsYmFjay4KCiAgICAgIEBwYXJhbSB7QXJy
        YXlbSGFuZGxlckluZm9dfSBoYW5kbGVySW5mb3MKICAgICAgQHBhcmFtIHtG
        dW5jdGlvbihPYmplY3QsIE9iamVjdCl9IGNhbGxiYWNrCiAgICAqLwogICAg
        ZnVuY3Rpb24gZWFjaEhhbmRsZXIoaGFuZGxlckluZm9zLCBjYWxsYmFjaykg
        ewogICAgICBmb3IgKHZhciBpPTAsIGw9aGFuZGxlckluZm9zLmxlbmd0aDsg
        aTxsOyBpKyspIHsKICAgICAgICBjYWxsYmFjayhoYW5kbGVySW5mb3NbaV0p
        OwogICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgIEBwcml2YXRlCgogICAg
        ICBkZXRlcm1pbmVzIGlmIHR3byBxdWVyeXBhcmFtIG9iamVjdHMgYXJlIHRo
        ZSBzYW1lIG9yIG5vdAogICAgKiovCiAgICBmdW5jdGlvbiBxdWVyeVBhcmFt
        c0VxdWFsKGEsIGIpIHsKICAgICAgYSA9IGEgfHwge307CiAgICAgIGIgPSBi
        IHx8IHt9OwogICAgICB2YXIgY2hlY2tlZEtleXMgPSBbXSwga2V5OwogICAg
        ICBmb3Ioa2V5IGluIGEpIHsKICAgICAgICBpZiAoIWEuaGFzT3duUHJvcGVy
        dHkoa2V5KSkgeyBjb250aW51ZTsgfQogICAgICAgIGlmKGJba2V5XSAhPT0g
        YVtrZXldKSB7IHJldHVybiBmYWxzZTsgfQogICAgICAgIGNoZWNrZWRLZXlz
        LnB1c2goa2V5KTsKICAgICAgfQogICAgICBmb3Ioa2V5IGluIGIpIHsKICAg
        ICAgICBpZiAoIWIuaGFzT3duUHJvcGVydHkoa2V5KSkgeyBjb250aW51ZTsg
        fQogICAgICAgIGlmICh+Y2hlY2tlZEtleXMuaW5kZXhPZihrZXkpKSB7IGNv
        bnRpbnVlOyB9CiAgICAgICAgLy8gYiBoYXMgYSBrZXkgbm90IGluIGEKICAg
        ICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgcmV0dXJuIHRydWU7
        CiAgICB9CgogICAgLyoqCiAgICAgIEBwcml2YXRlCgogICAgICBUaGlzIGZ1
        bmN0aW9uIGlzIGNhbGxlZCB3aGVuIHRyYW5zaXRpb25pbmcgZnJvbSBvbmUg
        VVJMIHRvCiAgICAgIGFub3RoZXIgdG8gZGV0ZXJtaW5lIHdoaWNoIGhhbmRs
        ZXJzIGFyZSBubyBsb25nZXIgYWN0aXZlLAogICAgICB3aGljaCBoYW5kbGVy
        cyBhcmUgbmV3bHkgYWN0aXZlLCBhbmQgd2hpY2ggaGFuZGxlcnMgcmVtYWlu
        CiAgICAgIGFjdGl2ZSBidXQgaGF2ZSB0aGVpciBjb250ZXh0IGNoYW5nZWQu
        CgogICAgICBUYWtlIGEgbGlzdCBvZiBvbGQgaGFuZGxlcnMgYW5kIG5ldyBo
        YW5kbGVycyBhbmQgcGFydGl0aW9uCiAgICAgIHRoZW0gaW50byBmb3VyIGJ1
        Y2tldHM6CgogICAgICAqIHVuY2hhbmdlZDogdGhlIGhhbmRsZXIgd2FzIGFj
        dGl2ZSBpbiBib3RoIHRoZSBvbGQgYW5kCiAgICAgICAgbmV3IFVSTCwgYW5k
        IGl0cyBjb250ZXh0IHJlbWFpbnMgdGhlIHNhbWUKICAgICAgKiB1cGRhdGVk
        IGNvbnRleHQ6IHRoZSBoYW5kbGVyIHdhcyBhY3RpdmUgaW4gYm90aCB0aGUK
        ICAgICAgICBvbGQgYW5kIG5ldyBVUkwsIGJ1dCBpdHMgY29udGV4dCBjaGFu
        Z2VkLiBUaGUgaGFuZGxlcidzCiAgICAgICAgYHNldHVwYCBtZXRob2QsIGlm
        IGFueSwgd2lsbCBiZSBjYWxsZWQgd2l0aCB0aGUgbmV3CiAgICAgICAgY29u
        dGV4dC4KICAgICAgKiBleGl0ZWQ6IHRoZSBoYW5kbGVyIHdhcyBhY3RpdmUg
        aW4gdGhlIG9sZCBVUkwsIGJ1dCBpcwogICAgICAgIG5vIGxvbmdlciBhY3Rp
        dmUuCiAgICAgICogZW50ZXJlZDogdGhlIGhhbmRsZXIgd2FzIG5vdCBhY3Rp
        dmUgaW4gdGhlIG9sZCBVUkwsIGJ1dAogICAgICAgIGlzIG5vdyBhY3RpdmUu
        CgogICAgICBUaGUgUGFydGl0aW9uZWRIYW5kbGVycyBzdHJ1Y3R1cmUgaGFz
        IGZvdXIgZmllbGRzOgoKICAgICAgKiBgdXBkYXRlZENvbnRleHRgOiBhIGxp
        c3Qgb2YgYEhhbmRsZXJJbmZvYCBvYmplY3RzIHRoYXQKICAgICAgICByZXBy
        ZXNlbnQgaGFuZGxlcnMgdGhhdCByZW1haW4gYWN0aXZlIGJ1dCBoYXZlIGEg
        Y2hhbmdlZAogICAgICAgIGNvbnRleHQKICAgICAgKiBgZW50ZXJlZGA6IGEg
        bGlzdCBvZiBgSGFuZGxlckluZm9gIG9iamVjdHMgdGhhdCByZXByZXNlbnQK
        ICAgICAgICBoYW5kbGVycyB0aGF0IGFyZSBuZXdseSBhY3RpdmUKICAgICAg
        KiBgZXhpdGVkYDogYSBsaXN0IG9mIGBIYW5kbGVySW5mb2Agb2JqZWN0cyB0
        aGF0IGFyZSBubwogICAgICAgIGxvbmdlciBhY3RpdmUuCiAgICAgICogYHVu
        Y2hhbmdlZGA6IGEgbGlzdCBvZiBgSGFuZGVySW5mb2Agb2JqZWN0cyB0aGF0
        IHJlbWFpbiBhY3RpdmUuCgogICAgICBAcGFyYW0ge0FycmF5W0hhbmRsZXJJ
        bmZvXX0gb2xkSGFuZGxlcnMgYSBsaXN0IG9mIHRoZSBoYW5kbGVyCiAgICAg
        ICAgaW5mb3JtYXRpb24gZm9yIHRoZSBwcmV2aW91cyBVUkwgKG9yIGBbXWAg
        aWYgdGhpcyBpcyB0aGUKICAgICAgICBmaXJzdCBoYW5kbGVkIHRyYW5zaXRp
        b24pCiAgICAgIEBwYXJhbSB7QXJyYXlbSGFuZGxlckluZm9dfSBuZXdIYW5k
        bGVycyBhIGxpc3Qgb2YgdGhlIGhhbmRsZXIKICAgICAgICBpbmZvcm1hdGlv
        biBmb3IgdGhlIG5ldyBVUkwKCiAgICAgIEByZXR1cm4ge1BhcnRpdGlvbn0K
        ICAgICovCiAgICBmdW5jdGlvbiBwYXJ0aXRpb25IYW5kbGVycyhvbGRIYW5k
        bGVycywgbmV3SGFuZGxlcnMpIHsKICAgICAgdmFyIGhhbmRsZXJzID0gewog
        ICAgICAgICAgICB1cGRhdGVkQ29udGV4dDogW10sCiAgICAgICAgICAgIGV4
        aXRlZDogW10sCiAgICAgICAgICAgIGVudGVyZWQ6IFtdLAogICAgICAgICAg
        ICB1bmNoYW5nZWQ6IFtdCiAgICAgICAgICB9OwoKICAgICAgdmFyIGhhbmRs
        ZXJDaGFuZ2VkLCBjb250ZXh0Q2hhbmdlZCwgcXVlcnlQYXJhbXNDaGFuZ2Vk
        LCBpLCBsOwoKICAgICAgZm9yIChpPTAsIGw9bmV3SGFuZGxlcnMubGVuZ3Ro
        OyBpPGw7IGkrKykgewogICAgICAgIHZhciBvbGRIYW5kbGVyID0gb2xkSGFu
        ZGxlcnNbaV0sIG5ld0hhbmRsZXIgPSBuZXdIYW5kbGVyc1tpXTsKCiAgICAg
        ICAgaWYgKCFvbGRIYW5kbGVyIHx8IG9sZEhhbmRsZXIuaGFuZGxlciAhPT0g
        bmV3SGFuZGxlci5oYW5kbGVyKSB7CiAgICAgICAgICBoYW5kbGVyQ2hhbmdl
        ZCA9IHRydWU7CiAgICAgICAgfSBlbHNlIGlmICghcXVlcnlQYXJhbXNFcXVh
        bChvbGRIYW5kbGVyLnF1ZXJ5UGFyYW1zLCBuZXdIYW5kbGVyLnF1ZXJ5UGFy
        YW1zKSkgewogICAgICAgICAgcXVlcnlQYXJhbXNDaGFuZ2VkID0gdHJ1ZTsK
        ICAgICAgICB9CgogICAgICAgIGlmIChoYW5kbGVyQ2hhbmdlZCkgewogICAg
        ICAgICAgaGFuZGxlcnMuZW50ZXJlZC5wdXNoKG5ld0hhbmRsZXIpOwogICAg
        ICAgICAgaWYgKG9sZEhhbmRsZXIpIHsgaGFuZGxlcnMuZXhpdGVkLnVuc2hp
        ZnQob2xkSGFuZGxlcik7IH0KICAgICAgICB9IGVsc2UgaWYgKGNvbnRleHRD
        aGFuZ2VkIHx8IG9sZEhhbmRsZXIuY29udGV4dCAhPT0gbmV3SGFuZGxlci5j
        b250ZXh0IHx8IHF1ZXJ5UGFyYW1zQ2hhbmdlZCkgewogICAgICAgICAgY29u
        dGV4dENoYW5nZWQgPSB0cnVlOwogICAgICAgICAgaGFuZGxlcnMudXBkYXRl
        ZENvbnRleHQucHVzaChuZXdIYW5kbGVyKTsKICAgICAgICB9IGVsc2Ugewog
        ICAgICAgICAgaGFuZGxlcnMudW5jaGFuZ2VkLnB1c2gob2xkSGFuZGxlcik7
        CiAgICAgICAgfQogICAgICB9CgogICAgICBmb3IgKGk9bmV3SGFuZGxlcnMu
        bGVuZ3RoLCBsPW9sZEhhbmRsZXJzLmxlbmd0aDsgaTxsOyBpKyspIHsKICAg
        ICAgICBoYW5kbGVycy5leGl0ZWQudW5zaGlmdChvbGRIYW5kbGVyc1tpXSk7
        CiAgICAgIH0KCiAgICAgIHJldHVybiBoYW5kbGVyczsKICAgIH0KCiAgICBm
        dW5jdGlvbiB0cmlnZ2VyKHJvdXRlciwgaGFuZGxlckluZm9zLCBpZ25vcmVG
        YWlsdXJlLCBhcmdzKSB7CiAgICAgIGlmIChyb3V0ZXIudHJpZ2dlckV2ZW50
        KSB7CiAgICAgICAgcm91dGVyLnRyaWdnZXJFdmVudChoYW5kbGVySW5mb3Ms
        IGlnbm9yZUZhaWx1cmUsIGFyZ3MpOwogICAgICAgIHJldHVybjsKICAgICAg
        fQoKICAgICAgdmFyIG5hbWUgPSBhcmdzLnNoaWZ0KCk7CgogICAgICBpZiAo
        IWhhbmRsZXJJbmZvcykgewogICAgICAgIGlmIChpZ25vcmVGYWlsdXJlKSB7
        IHJldHVybjsgfQogICAgICAgIHRocm93IG5ldyBFcnJvcigiQ291bGQgbm90
        IHRyaWdnZXIgZXZlbnQgJyIgKyBuYW1lICsgIicuIFRoZXJlIGFyZSBubyBh
        Y3RpdmUgaGFuZGxlcnMiKTsKICAgICAgfQoKICAgICAgdmFyIGV2ZW50V2Fz
        SGFuZGxlZCA9IGZhbHNlOwoKICAgICAgZm9yICh2YXIgaT1oYW5kbGVySW5m
        b3MubGVuZ3RoLTE7IGk+PTA7IGktLSkgewogICAgICAgIHZhciBoYW5kbGVy
        SW5mbyA9IGhhbmRsZXJJbmZvc1tpXSwKICAgICAgICAgICAgaGFuZGxlciA9
        IGhhbmRsZXJJbmZvLmhhbmRsZXI7CgogICAgICAgIGlmIChoYW5kbGVyLmV2
        ZW50cyAmJiBoYW5kbGVyLmV2ZW50c1tuYW1lXSkgewogICAgICAgICAgaWYg
        KGhhbmRsZXIuZXZlbnRzW25hbWVdLmFwcGx5KGhhbmRsZXIsIGFyZ3MpID09
        PSB0cnVlKSB7CiAgICAgICAgICAgIGV2ZW50V2FzSGFuZGxlZCA9IHRydWU7
        CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXR1cm47CiAgICAg
        ICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICBpZiAoIWV2ZW50V2Fz
        SGFuZGxlZCAmJiAhaWdub3JlRmFpbHVyZSkgewogICAgICAgIHRocm93IG5l
        dyBFcnJvcigiTm90aGluZyBoYW5kbGVkIHRoZSBldmVudCAnIiArIG5hbWUg
        KyAiJy4iKTsKICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIHNldENvbnRl
        eHQoaGFuZGxlciwgY29udGV4dCkgewogICAgICBoYW5kbGVyLmNvbnRleHQg
        PSBjb250ZXh0OwogICAgICBpZiAoaGFuZGxlci5jb250ZXh0RGlkQ2hhbmdl
        KSB7IGhhbmRsZXIuY29udGV4dERpZENoYW5nZSgpOyB9CiAgICB9CgogICAg
        ZnVuY3Rpb24gc2V0UXVlcnlQYXJhbXMoaGFuZGxlciwgcXVlcnlQYXJhbXMp
        IHsKICAgICAgaGFuZGxlci5xdWVyeVBhcmFtcyA9IHF1ZXJ5UGFyYW1zOwog
        ICAgICBpZiAoaGFuZGxlci5xdWVyeVBhcmFtc0RpZENoYW5nZSkgeyBoYW5k
        bGVyLnF1ZXJ5UGFyYW1zRGlkQ2hhbmdlKCk7IH0KICAgIH0KCgogICAgLyoq
        CiAgICAgIEBwcml2YXRlCgogICAgICBFeHRyYWN0cyBxdWVyeSBwYXJhbXMg
        ZnJvbSB0aGUgZW5kIG9mIGFuIGFycmF5CiAgICAqKi8KCiAgICBmdW5jdGlv
        biBleHRyYWN0UXVlcnlQYXJhbXMoYXJyYXkpIHsKICAgICAgdmFyIGxlbiA9
        IChhcnJheSAmJiBhcnJheS5sZW5ndGgpLCBoZWFkLCBxdWVyeVBhcmFtczsK
        CiAgICAgIGlmKGxlbiAmJiBsZW4gPiAwICYmIGFycmF5W2xlbiAtIDFdICYm
        IGFycmF5W2xlbiAtIDFdLmhhc093blByb3BlcnR5KCdxdWVyeVBhcmFtcycp
        KSB7CiAgICAgICAgcXVlcnlQYXJhbXMgPSBhcnJheVtsZW4gLSAxXS5xdWVy
        eVBhcmFtczsKICAgICAgICBoZWFkID0gc2xpY2UuY2FsbChhcnJheSwgMCwg
        bGVuIC0gMSk7CiAgICAgICAgcmV0dXJuIFtoZWFkLCBxdWVyeVBhcmFtc107
        CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIFthcnJheSwgbnVsbF07
        CiAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBwZXJmb3JtSW50ZXJtZWRp
        YXRlVHJhbnNpdGlvbihyb3V0ZXIsIHJlY29nSGFuZGxlcnMsIG1hdGNoUG9p
        bnRSZXN1bHRzKSB7CgogICAgICB2YXIgaGFuZGxlckluZm9zID0gZ2VuZXJh
        dGVIYW5kbGVySW5mb3Mocm91dGVyLCByZWNvZ0hhbmRsZXJzKTsKICAgICAg
        Zm9yICh2YXIgaSA9IDA7IGkgPCBoYW5kbGVySW5mb3MubGVuZ3RoOyArK2kp
        IHsKICAgICAgICB2YXIgaGFuZGxlckluZm8gPSBoYW5kbGVySW5mb3NbaV07
        CiAgICAgICAgaGFuZGxlckluZm8uY29udGV4dCA9IG1hdGNoUG9pbnRSZXN1
        bHRzLnByb3ZpZGVkTW9kZWxzW2hhbmRsZXJJbmZvLm5hbWVdOwogICAgICB9
        CgogICAgICB2YXIgc3R1YmJlZFRyYW5zaXRpb24gPSB7CiAgICAgICAgcm91
        dGVyOiByb3V0ZXIsCiAgICAgICAgaXNBYm9ydGVkOiBmYWxzZQogICAgICB9
        OwoKICAgICAgc2V0dXBDb250ZXh0cyhzdHViYmVkVHJhbnNpdGlvbiwgaGFu
        ZGxlckluZm9zKTsKICAgIH0KCiAgICAvKioKICAgICAgQHByaXZhdGUKCiAg
        ICAgIENyZWF0ZXMsIGJlZ2lucywgYW5kIHJldHVybnMgYSBUcmFuc2l0aW9u
        LgogICAgICovCiAgICBmdW5jdGlvbiBwZXJmb3JtVHJhbnNpdGlvbihyb3V0
        ZXIsIHJlY29nSGFuZGxlcnMsIHByb3ZpZGVkTW9kZWxzQXJyYXksIHBhcmFt
        cywgcXVlcnlQYXJhbXMsIGRhdGEsIGlzSW50ZXJtZWRpYXRlKSB7CgogICAg
        ICB2YXIgbWF0Y2hQb2ludFJlc3VsdHMgPSBnZXRNYXRjaFBvaW50KHJvdXRl
        ciwgcmVjb2dIYW5kbGVycywgcHJvdmlkZWRNb2RlbHNBcnJheSwgcGFyYW1z
        LCBxdWVyeVBhcmFtcyksCiAgICAgICAgICB0YXJnZXROYW1lID0gcmVjb2dI
        YW5kbGVyc1tyZWNvZ0hhbmRsZXJzLmxlbmd0aCAtIDFdLmhhbmRsZXIsCiAg
        ICAgICAgICB3YXNUcmFuc2l0aW9uaW5nID0gZmFsc2UsCiAgICAgICAgICBj
        dXJyZW50SGFuZGxlckluZm9zID0gcm91dGVyLmN1cnJlbnRIYW5kbGVySW5m
        b3M7CgogICAgICBpZiAoaXNJbnRlcm1lZGlhdGUpIHsKICAgICAgICByZXR1
        cm4gcGVyZm9ybUludGVybWVkaWF0ZVRyYW5zaXRpb24ocm91dGVyLCByZWNv
        Z0hhbmRsZXJzLCBtYXRjaFBvaW50UmVzdWx0cyk7CiAgICAgIH0KCiAgICAg
        IC8vIENoZWNrIGlmIHRoZXJlJ3MgYWxyZWFkeSBhIHRyYW5zaXRpb24gdW5k
        ZXJ3YXkuCiAgICAgIGlmIChyb3V0ZXIuYWN0aXZlVHJhbnNpdGlvbikgewog
        ICAgICAgIGlmICh0cmFuc2l0aW9uc0lkZW50aWNhbChyb3V0ZXIuYWN0aXZl
        VHJhbnNpdGlvbiwgdGFyZ2V0TmFtZSwgcHJvdmlkZWRNb2RlbHNBcnJheSwg
        cXVlcnlQYXJhbXMpKSB7CiAgICAgICAgICByZXR1cm4gcm91dGVyLmFjdGl2
        ZVRyYW5zaXRpb247CiAgICAgICAgfQogICAgICAgIHJvdXRlci5hY3RpdmVU
        cmFuc2l0aW9uLmFib3J0KCk7CiAgICAgICAgd2FzVHJhbnNpdGlvbmluZyA9
        IHRydWU7CiAgICAgIH0KCiAgICAgIHZhciBkZWZlcnJlZCA9IFJTVlAuZGVm
        ZXIoKSwKICAgICAgICAgIHRyYW5zaXRpb24gPSBuZXcgVHJhbnNpdGlvbihy
        b3V0ZXIsIGRlZmVycmVkLnByb21pc2UpOwoKICAgICAgdHJhbnNpdGlvbi50
        YXJnZXROYW1lID0gdGFyZ2V0TmFtZTsKICAgICAgdHJhbnNpdGlvbi5wcm92
        aWRlZE1vZGVscyA9IG1hdGNoUG9pbnRSZXN1bHRzLnByb3ZpZGVkTW9kZWxz
        OwogICAgICB0cmFuc2l0aW9uLnByb3ZpZGVkTW9kZWxzQXJyYXkgPSBwcm92
        aWRlZE1vZGVsc0FycmF5OwogICAgICB0cmFuc2l0aW9uLnBhcmFtcyA9IG1h
        dGNoUG9pbnRSZXN1bHRzLnBhcmFtczsKICAgICAgdHJhbnNpdGlvbi5kYXRh
        ID0gZGF0YSB8fCB7fTsKICAgICAgdHJhbnNpdGlvbi5xdWVyeVBhcmFtcyA9
        IHF1ZXJ5UGFyYW1zOwogICAgICB0cmFuc2l0aW9uLnBpdm90SGFuZGxlciA9
        IG1hdGNoUG9pbnRSZXN1bHRzLnBpdm90SGFuZGxlcjsKICAgICAgcm91dGVy
        LmFjdGl2ZVRyYW5zaXRpb24gPSB0cmFuc2l0aW9uOwoKICAgICAgdmFyIGhh
        bmRsZXJJbmZvcyA9IGdlbmVyYXRlSGFuZGxlckluZm9zKHJvdXRlciwgcmVj
        b2dIYW5kbGVycyk7CiAgICAgIHRyYW5zaXRpb24uaGFuZGxlckluZm9zID0g
        aGFuZGxlckluZm9zOwoKICAgICAgLy8gRmlyZSAnd2lsbFRyYW5zaXRpb24n
        IGV2ZW50IG9uIGN1cnJlbnQgaGFuZGxlcnMsIGJ1dCBkb24ndCBmaXJlIGl0
        CiAgICAgIC8vIGlmIGEgdHJhbnNpdGlvbiB3YXMgYWxyZWFkeSB1bmRlcndh
        eS4KICAgICAgaWYgKCF3YXNUcmFuc2l0aW9uaW5nKSB7CiAgICAgICAgdHJp
        Z2dlcihyb3V0ZXIsIGN1cnJlbnRIYW5kbGVySW5mb3MsIHRydWUsIFsnd2ls
        bFRyYW5zaXRpb24nLCB0cmFuc2l0aW9uXSk7CiAgICAgIH0KCiAgICAgIGxv
        Zyhyb3V0ZXIsIHRyYW5zaXRpb24uc2VxdWVuY2UsICJCZWdpbm5pbmcgdmFs
        aWRhdGlvbiBmb3IgdHJhbnNpdGlvbiB0byAiICsgdHJhbnNpdGlvbi50YXJn
        ZXROYW1lKTsKICAgICAgdmFsaWRhdGVFbnRyeSh0cmFuc2l0aW9uLCBtYXRj
        aFBvaW50UmVzdWx0cy5tYXRjaFBvaW50LCBtYXRjaFBvaW50UmVzdWx0cy5o
        YW5kbGVyUGFyYW1zKQogICAgICAgICAgICAgICAgICAgLnRoZW4odHJhbnNp
        dGlvblN1Y2Nlc3MsIHRyYW5zaXRpb25GYWlsdXJlKTsKCiAgICAgIHJldHVy
        biB0cmFuc2l0aW9uOwoKICAgICAgZnVuY3Rpb24gdHJhbnNpdGlvblN1Y2Nl
        c3MoKSB7CiAgICAgICAgY2hlY2tBYm9ydCh0cmFuc2l0aW9uKTsKCiAgICAg
        ICAgdHJ5IHsKICAgICAgICAgIGxvZyhyb3V0ZXIsIHRyYW5zaXRpb24uc2Vx
        dWVuY2UsICJWYWxpZGF0aW9uIHN1Y2NlZWRlZCwgZmluYWxpemluZyB0cmFu
        c2l0aW9uOyIpOwoKICAgICAgICAgIC8vIERvbid0IG92ZXJ3cml0ZSBjb250
        ZXh0cyAvIHVwZGF0ZSBVUkwgaWYgdGhpcyB3YXMgYSBub29wIHRyYW5zaXRp
        b24uCiAgICAgICAgICBpZiAoIWN1cnJlbnRIYW5kbGVySW5mb3MgfHwgIWN1
        cnJlbnRIYW5kbGVySW5mb3MubGVuZ3RoIHx8CiAgICAgICAgICAgICAgIXJv
        dXRlci5yZWNvZ25pemVyLmhhc1JvdXRlKGN1cnJlbnRIYW5kbGVySW5mb3Nb
        Y3VycmVudEhhbmRsZXJJbmZvcy5sZW5ndGggLSAxXS5uYW1lKSB8fAogICAg
        ICAgICAgICAgIGN1cnJlbnRIYW5kbGVySW5mb3MubGVuZ3RoICE9PSBtYXRj
        aFBvaW50UmVzdWx0cy5tYXRjaFBvaW50KSB7CiAgICAgICAgICAgIGZpbmFs
        aXplVHJhbnNpdGlvbih0cmFuc2l0aW9uLCBoYW5kbGVySW5mb3MpOwogICAg
        ICAgICAgfQoKICAgICAgICAgIC8vIGN1cnJlbnRIYW5kbGVySW5mb3Mgd2Fz
        IHVwZGF0ZWQgaW4gZmluYWxpemVUcmFuc2l0aW9uCiAgICAgICAgICB0cmln
        Z2VyKHJvdXRlciwgcm91dGVyLmN1cnJlbnRIYW5kbGVySW5mb3MsIHRydWUs
        IFsnZGlkVHJhbnNpdGlvbiddKTsKCiAgICAgICAgICBpZiAocm91dGVyLmRp
        ZFRyYW5zaXRpb24pIHsKICAgICAgICAgICAgcm91dGVyLmRpZFRyYW5zaXRp
        b24oaGFuZGxlckluZm9zKTsKICAgICAgICAgIH0KCiAgICAgICAgICBsb2co
        cm91dGVyLCB0cmFuc2l0aW9uLnNlcXVlbmNlLCAiVFJBTlNJVElPTiBDT01Q
        TEVURS4iKTsKCiAgICAgICAgICAvLyBSZXNvbHZlIHdpdGggdGhlIGZpbmFs
        IGhhbmRsZXIuCiAgICAgICAgICB0cmFuc2l0aW9uLmlzQWN0aXZlID0gZmFs
        c2U7CiAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKGhhbmRsZXJJbmZvc1to
        YW5kbGVySW5mb3MubGVuZ3RoIC0gMV0uaGFuZGxlcik7CiAgICAgICAgfSBj
        YXRjaChlKSB7CiAgICAgICAgICBkZWZlcnJlZC5yZWplY3QoZSk7CiAgICAg
        ICAgfQoKICAgICAgICAvLyBEb24ndCBudWxsaWZ5IGlmIGFub3RoZXIgdHJh
        bnNpdGlvbiBpcyB1bmRlcndheSAobWVhbmluZwogICAgICAgIC8vIHRoZXJl
        IHdhcyBhIHRyYW5zaXRpb24gaW5pdGlhdGVkIHdpdGggZW50ZXIvc2V0dXAp
        LgogICAgICAgIGlmICghdHJhbnNpdGlvbi5pc0Fib3J0ZWQpIHsKICAgICAg
        ICAgIHJvdXRlci5hY3RpdmVUcmFuc2l0aW9uID0gbnVsbDsKICAgICAgICB9
        CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIHRyYW5zaXRpb25GYWlsdXJlKHJl
        YXNvbikgewogICAgICAgIGRlZmVycmVkLnJlamVjdChyZWFzb24pOwogICAg
        ICB9CiAgICB9CgogICAgLyoqCiAgICAgIEBwcml2YXRlCgogICAgICBBY2Nl
        cHRzIGhhbmRsZXJzIGluIFJlY29nbml6ZXIgZm9ybWF0LCBlaXRoZXIgcmV0
        dXJuZWQgZnJvbQogICAgICByZWNvZ25pemUoKSBvciBoYW5kbGVyc0Zvcigp
        LCBhbmQgcmV0dXJucyB1bmlmaWVkCiAgICAgIGBIYW5kbGVySW5mb2BzLgog
        ICAgICovCiAgICBmdW5jdGlvbiBnZW5lcmF0ZUhhbmRsZXJJbmZvcyhyb3V0
        ZXIsIHJlY29nSGFuZGxlcnMpIHsKICAgICAgdmFyIGhhbmRsZXJJbmZvcyA9
        IFtdOwogICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gcmVjb2dIYW5kbGVy
        cy5sZW5ndGg7IGkgPCBsZW47ICsraSkgewogICAgICAgIHZhciBoYW5kbGVy
        T2JqID0gcmVjb2dIYW5kbGVyc1tpXSwKICAgICAgICAgICAgaXNEeW5hbWlj
        ID0gaGFuZGxlck9iai5pc0R5bmFtaWMgfHwgKGhhbmRsZXJPYmoubmFtZXMg
        JiYgaGFuZGxlck9iai5uYW1lcy5sZW5ndGgpOwoKICAgICAgICB2YXIgaGFu
        ZGxlckluZm8gPSB7CiAgICAgICAgICBpc0R5bmFtaWM6ICEhaXNEeW5hbWlj
        LAogICAgICAgICAgbmFtZTogaGFuZGxlck9iai5oYW5kbGVyLAogICAgICAg
        ICAgaGFuZGxlcjogcm91dGVyLmdldEhhbmRsZXIoaGFuZGxlck9iai5oYW5k
        bGVyKQogICAgICAgIH07CiAgICAgICAgaWYoaGFuZGxlck9iai5xdWVyeVBh
        cmFtcykgewogICAgICAgICAgaGFuZGxlckluZm8ucXVlcnlQYXJhbXMgPSBo
        YW5kbGVyT2JqLnF1ZXJ5UGFyYW1zOwogICAgICAgIH0KICAgICAgICBoYW5k
        bGVySW5mb3MucHVzaChoYW5kbGVySW5mbyk7CiAgICAgIH0KICAgICAgcmV0
        dXJuIGhhbmRsZXJJbmZvczsKICAgIH0KCiAgICAvKioKICAgICAgQHByaXZh
        dGUKICAgICAqLwogICAgZnVuY3Rpb24gdHJhbnNpdGlvbnNJZGVudGljYWwo
        b2xkVHJhbnNpdGlvbiwgdGFyZ2V0TmFtZSwgcHJvdmlkZWRNb2RlbHNBcnJh
        eSwgcXVlcnlQYXJhbXMpIHsKCiAgICAgIGlmIChvbGRUcmFuc2l0aW9uLnRh
        cmdldE5hbWUgIT09IHRhcmdldE5hbWUpIHsgcmV0dXJuIGZhbHNlOyB9Cgog
        ICAgICB2YXIgb2xkTW9kZWxzID0gb2xkVHJhbnNpdGlvbi5wcm92aWRlZE1v
        ZGVsc0FycmF5OwogICAgICBpZiAob2xkTW9kZWxzLmxlbmd0aCAhPT0gcHJv
        dmlkZWRNb2RlbHNBcnJheS5sZW5ndGgpIHsgcmV0dXJuIGZhbHNlOyB9Cgog
        ICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gb2xkTW9kZWxzLmxlbmd0aDsg
        aSA8IGxlbjsgKytpKSB7CiAgICAgICAgaWYgKG9sZE1vZGVsc1tpXSAhPT0g
        cHJvdmlkZWRNb2RlbHNBcnJheVtpXSkgeyByZXR1cm4gZmFsc2U7IH0KICAg
        ICAgfQoKICAgICAgaWYoIXF1ZXJ5UGFyYW1zRXF1YWwob2xkVHJhbnNpdGlv
        bi5xdWVyeVBhcmFtcywgcXVlcnlQYXJhbXMpKSB7CiAgICAgICAgcmV0dXJu
        IGZhbHNlOwogICAgICB9CgogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAg
        ICAvKioKICAgICAgQHByaXZhdGUKCiAgICAgIFVwZGF0ZXMgdGhlIFVSTCAo
        aWYgbmVjZXNzYXJ5KSBhbmQgY2FsbHMgYHNldHVwQ29udGV4dHNgCiAgICAg
        IHRvIHVwZGF0ZSB0aGUgcm91dGVyJ3MgYXJyYXkgb2YgYGN1cnJlbnRIYW5k
        bGVySW5mb3NgLgogICAgICovCiAgICBmdW5jdGlvbiBmaW5hbGl6ZVRyYW5z
        aXRpb24odHJhbnNpdGlvbiwgaGFuZGxlckluZm9zKSB7CgogICAgICB2YXIg
        cm91dGVyID0gdHJhbnNpdGlvbi5yb3V0ZXIsCiAgICAgICAgICBzZXEgPSB0
        cmFuc2l0aW9uLnNlcXVlbmNlLAogICAgICAgICAgaGFuZGxlck5hbWUgPSBo
        YW5kbGVySW5mb3NbaGFuZGxlckluZm9zLmxlbmd0aCAtIDFdLm5hbWUsCiAg
        ICAgICAgICB1cmxNZXRob2QgPSB0cmFuc2l0aW9uLnVybE1ldGhvZCwKICAg
        ICAgICAgIGk7CgogICAgICAvLyBDb2xsZWN0IHBhcmFtcyBmb3IgVVJMLgog
        ICAgICB2YXIgb2JqZWN0cyA9IFtdLCBwcm92aWRlZE1vZGVscyA9IHRyYW5z
        aXRpb24ucHJvdmlkZWRNb2RlbHNBcnJheS5zbGljZSgpOwogICAgICBmb3Ig
        KGkgPSBoYW5kbGVySW5mb3MubGVuZ3RoIC0gMTsgaT49MDsgLS1pKSB7CiAg
        ICAgICAgdmFyIGhhbmRsZXJJbmZvID0gaGFuZGxlckluZm9zW2ldOwogICAg
        ICAgIGlmIChoYW5kbGVySW5mby5pc0R5bmFtaWMpIHsKICAgICAgICAgIHZh
        ciBwcm92aWRlZE1vZGVsID0gcHJvdmlkZWRNb2RlbHMucG9wKCk7CiAgICAg
        ICAgICBvYmplY3RzLnVuc2hpZnQoaXNQYXJhbShwcm92aWRlZE1vZGVsKSA/
        IHByb3ZpZGVkTW9kZWwudG9TdHJpbmcoKSA6IGhhbmRsZXJJbmZvLmNvbnRl
        eHQpOwogICAgICAgIH0KCiAgICAgICAgaWYgKGhhbmRsZXJJbmZvLmhhbmRs
        ZXIuaW5hY2Nlc3NpYmx5QnlVUkwpIHsKICAgICAgICAgIHVybE1ldGhvZCA9
        IG51bGw7CiAgICAgICAgfQogICAgICB9CgogICAgICB2YXIgbmV3UXVlcnlQ
        YXJhbXMgPSB7fTsKICAgICAgZm9yIChpID0gaGFuZGxlckluZm9zLmxlbmd0
        aCAtIDE7IGk+PTA7IC0taSkgewogICAgICAgIG1lcmdlKG5ld1F1ZXJ5UGFy
        YW1zLCBoYW5kbGVySW5mb3NbaV0ucXVlcnlQYXJhbXMpOwogICAgICB9CiAg
        ICAgIHJvdXRlci5jdXJyZW50UXVlcnlQYXJhbXMgPSBuZXdRdWVyeVBhcmFt
        czsKCgogICAgICB2YXIgcGFyYW1zID0gcGFyYW1zRm9ySGFuZGxlcihyb3V0
        ZXIsIGhhbmRsZXJOYW1lLCBvYmplY3RzLCB0cmFuc2l0aW9uLnF1ZXJ5UGFy
        YW1zKTsKCiAgICAgIHJvdXRlci5jdXJyZW50UGFyYW1zID0gcGFyYW1zOwoK
        ICAgICAgaWYgKHVybE1ldGhvZCkgewogICAgICAgIHZhciB1cmwgPSByb3V0
        ZXIucmVjb2duaXplci5nZW5lcmF0ZShoYW5kbGVyTmFtZSwgcGFyYW1zKTsK
        CiAgICAgICAgaWYgKHVybE1ldGhvZCA9PT0gJ3JlcGxhY2UnKSB7CiAgICAg
        ICAgICByb3V0ZXIucmVwbGFjZVVSTCh1cmwpOwogICAgICAgIH0gZWxzZSB7
        CiAgICAgICAgICAvLyBBc3N1bWUgZXZlcnl0aGluZyBlbHNlIGlzIGp1c3Qg
        YSBVUkwgdXBkYXRlIGZvciBub3cuCiAgICAgICAgICByb3V0ZXIudXBkYXRl
        VVJMKHVybCk7CiAgICAgICAgfQogICAgICB9CgogICAgICBzZXR1cENvbnRl
        eHRzKHRyYW5zaXRpb24sIGhhbmRsZXJJbmZvcyk7CiAgICB9CgogICAgLyoq
        CiAgICAgIEBwcml2YXRlCgogICAgICBJbnRlcm5hbCBmdW5jdGlvbiB1c2Vk
        IHRvIGNvbnN0cnVjdCB0aGUgY2hhaW4gb2YgcHJvbWlzZXMgdXNlZAogICAg
        ICB0byB2YWxpZGF0ZSBhIHRyYW5zaXRpb24uIFdyYXBzIGNhbGxzIHRvIGBi
        ZWZvcmVNb2RlbGAsIGBtb2RlbGAsCiAgICAgIGFuZCBgYWZ0ZXJNb2RlbGAg
        aW4gcHJvbWlzZXMsIGFuZCBjaGVja3MgZm9yIHJlZGlyZWN0cy9hYm9ydHMK
        ICAgICAgYmV0d2VlbiBlYWNoLgogICAgICovCiAgICBmdW5jdGlvbiB2YWxp
        ZGF0ZUVudHJ5KHRyYW5zaXRpb24sIG1hdGNoUG9pbnQsIGhhbmRsZXJQYXJh
        bXMpIHsKCiAgICAgIHZhciBoYW5kbGVySW5mb3MgPSB0cmFuc2l0aW9uLmhh
        bmRsZXJJbmZvcywKICAgICAgICAgIGluZGV4ID0gdHJhbnNpdGlvbi5yZXNv
        bHZlSW5kZXg7CgogICAgICBpZiAoaW5kZXggPT09IGhhbmRsZXJJbmZvcy5s
        ZW5ndGgpIHsKICAgICAgICAvLyBObyBtb3JlIGNvbnRleHRzIHRvIHJlc29s
        dmUuCiAgICAgICAgcmV0dXJuIFJTVlAucmVzb2x2ZSh0cmFuc2l0aW9uLnJl
        c29sdmVkTW9kZWxzKTsKICAgICAgfQoKICAgICAgdmFyIHJvdXRlciA9IHRy
        YW5zaXRpb24ucm91dGVyLAogICAgICAgICAgaGFuZGxlckluZm8gPSBoYW5k
        bGVySW5mb3NbaW5kZXhdLAogICAgICAgICAgaGFuZGxlciA9IGhhbmRsZXJJ
        bmZvLmhhbmRsZXIsCiAgICAgICAgICBoYW5kbGVyTmFtZSA9IGhhbmRsZXJJ
        bmZvLm5hbWUsCiAgICAgICAgICBzZXEgPSB0cmFuc2l0aW9uLnNlcXVlbmNl
        OwoKICAgICAgaWYgKGluZGV4IDwgbWF0Y2hQb2ludCkgewogICAgICAgIGxv
        Zyhyb3V0ZXIsIHNlcSwgaGFuZGxlck5hbWUgKyAiOiB1c2luZyBjb250ZXh0
        IGZyb20gYWxyZWFkeS1hY3RpdmUgaGFuZGxlciIpOwoKICAgICAgICAvLyBX
        ZSdyZSBiZWZvcmUgdGhlIG1hdGNoIHBvaW50LCBzbyBkb24ndCBydW4gYW55
        IGhvb2tzLAogICAgICAgIC8vIGp1c3QgdXNlIHRoZSBhbHJlYWR5IHJlc29s
        dmVkIGNvbnRleHQgZnJvbSB0aGUgaGFuZGxlci4KICAgICAgICB0cmFuc2l0
        aW9uLnJlc29sdmVkTW9kZWxzW2hhbmRsZXJJbmZvLm5hbWVdID0KICAgICAg
        ICAgIHRyYW5zaXRpb24ucHJvdmlkZWRNb2RlbHNbaGFuZGxlckluZm8ubmFt
        ZV0gfHwKICAgICAgICAgIGhhbmRsZXJJbmZvLmhhbmRsZXIuY29udGV4dDsK
        ICAgICAgICByZXR1cm4gcHJvY2VlZCgpOwogICAgICB9CgogICAgICB0cmFu
        c2l0aW9uLnRyaWdnZXIodHJ1ZSwgJ3dpbGxSZXNvbHZlTW9kZWwnLCB0cmFu
        c2l0aW9uLCBoYW5kbGVyKTsKCiAgICAgIHJldHVybiBSU1ZQLnJlc29sdmUo
        KS50aGVuKGhhbmRsZUFib3J0KQogICAgICAgICAgICAgICAgICAgICAgICAg
        ICAudGhlbihiZWZvcmVNb2RlbCkKICAgICAgICAgICAgICAgICAgICAgICAg
        ICAgLnRoZW4oaGFuZGxlQWJvcnQpCiAgICAgICAgICAgICAgICAgICAgICAg
        ICAgIC50aGVuKG1vZGVsKQogICAgICAgICAgICAgICAgICAgICAgICAgICAu
        dGhlbihoYW5kbGVBYm9ydCkKICAgICAgICAgICAgICAgICAgICAgICAgICAg
        LnRoZW4oYWZ0ZXJNb2RlbCkKICAgICAgICAgICAgICAgICAgICAgICAgICAg
        LnRoZW4oaGFuZGxlQWJvcnQpCiAgICAgICAgICAgICAgICAgICAgICAgICAg
        IC50aGVuKG51bGwsIGhhbmRsZUVycm9yKQogICAgICAgICAgICAgICAgICAg
        ICAgICAgICAudGhlbihwcm9jZWVkKTsKCiAgICAgIGZ1bmN0aW9uIGhhbmRs
        ZUFib3J0KHJlc3VsdCkgewogICAgICAgIGlmICh0cmFuc2l0aW9uLmlzQWJv
        cnRlZCkgewogICAgICAgICAgbG9nKHRyYW5zaXRpb24ucm91dGVyLCB0cmFu
        c2l0aW9uLnNlcXVlbmNlLCAiZGV0ZWN0ZWQgYWJvcnQuIik7CiAgICAgICAg
        ICByZXR1cm4gUlNWUC5yZWplY3QobmV3IFJvdXRlci5UcmFuc2l0aW9uQWJv
        cnRlZCgpKTsKICAgICAgICB9CgogICAgICAgIHJldHVybiByZXN1bHQ7CiAg
        ICAgIH0KCiAgICAgIGZ1bmN0aW9uIGhhbmRsZUVycm9yKHJlYXNvbikgewog
        ICAgICAgIGlmIChyZWFzb24gaW5zdGFuY2VvZiBSb3V0ZXIuVHJhbnNpdGlv
        bkFib3J0ZWQpIHsKICAgICAgICAgIC8vIGlmIHRoZSB0cmFuc2l0aW9uIHdh
        cyBhYm9ydGVkIGFuZCAqbm8gYWRkaXRpb25hbCogZXJyb3Igd2FzIHRocm93
        biwKICAgICAgICAgIC8vIHJlamVjdCB3aXRoIHRoZSBSb3V0ZXIuVHJhbnNp
        dGlvbkFib3J0ZWQgaW5zdGFuY2UKICAgICAgICAgIHJldHVybiBSU1ZQLnJl
        amVjdChyZWFzb24pOwogICAgICAgIH0KCiAgICAgICAgLy8gb3RoZXJ3aXNl
        LCB3ZSdyZSBoZXJlIGJlY2F1c2Ugb2YgYSBkaWZmZXJlbnQgZXJyb3IKICAg
        ICAgICB0cmFuc2l0aW9uLmFib3J0KCk7CgogICAgICAgIGxvZyhyb3V0ZXIs
        IHNlcSwgaGFuZGxlck5hbWUgKyAiOiBoYW5kbGluZyBlcnJvcjogIiArIHJl
        YXNvbik7CgogICAgICAgIC8vIEFuIGVycm9yIHdhcyB0aHJvd24gLyBwcm9t
        aXNlIHJlamVjdGVkLCBzbyBmaXJlIGFuCiAgICAgICAgLy8gYGVycm9yYCBl
        dmVudCBmcm9tIHRoaXMgaGFuZGxlciBpbmZvIHVwIHRvIHJvb3QuCiAgICAg
        ICAgdHJhbnNpdGlvbi50cmlnZ2VyKHRydWUsICdlcnJvcicsIHJlYXNvbiwg
        dHJhbnNpdGlvbiwgaGFuZGxlckluZm8uaGFuZGxlcik7CgogICAgICAgIC8v
        IFByb3BhZ2F0ZSB0aGUgb3JpZ2luYWwgZXJyb3IuCiAgICAgICAgcmV0dXJu
        IFJTVlAucmVqZWN0KHJlYXNvbik7CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9u
        IGJlZm9yZU1vZGVsKCkgewoKICAgICAgICBsb2cocm91dGVyLCBzZXEsIGhh
        bmRsZXJOYW1lICsgIjogY2FsbGluZyBiZWZvcmVNb2RlbCBob29rIik7Cgog
        ICAgICAgIHZhciBhcmdzOwoKICAgICAgICBpZiAoaGFuZGxlckluZm8ucXVl
        cnlQYXJhbXMpIHsKICAgICAgICAgIGFyZ3MgPSBbaGFuZGxlckluZm8ucXVl
        cnlQYXJhbXMsIHRyYW5zaXRpb25dOwogICAgICAgIH0gZWxzZSB7CiAgICAg
        ICAgICBhcmdzID0gW3RyYW5zaXRpb25dOwogICAgICAgIH0KCiAgICAgICAg
        dmFyIHAgPSBoYW5kbGVyLmJlZm9yZU1vZGVsICYmIGhhbmRsZXIuYmVmb3Jl
        TW9kZWwuYXBwbHkoaGFuZGxlciwgYXJncyk7CiAgICAgICAgcmV0dXJuIChw
        IGluc3RhbmNlb2YgVHJhbnNpdGlvbikgPyBudWxsIDogcDsKICAgICAgfQoK
        ICAgICAgZnVuY3Rpb24gbW9kZWwoKSB7CiAgICAgICAgbG9nKHJvdXRlciwg
        c2VxLCBoYW5kbGVyTmFtZSArICI6IHJlc29sdmluZyBtb2RlbCIpOwogICAg
        ICAgIHZhciBwID0gZ2V0TW9kZWwoaGFuZGxlckluZm8sIHRyYW5zaXRpb24s
        IGhhbmRsZXJQYXJhbXNbaGFuZGxlck5hbWVdLCBpbmRleCA+PSBtYXRjaFBv
        aW50KTsKICAgICAgICByZXR1cm4gKHAgaW5zdGFuY2VvZiBUcmFuc2l0aW9u
        KSA/IG51bGwgOiBwOwogICAgICB9CgogICAgICBmdW5jdGlvbiBhZnRlck1v
        ZGVsKGNvbnRleHQpIHsKCiAgICAgICAgbG9nKHJvdXRlciwgc2VxLCBoYW5k
        bGVyTmFtZSArICI6IGNhbGxpbmcgYWZ0ZXJNb2RlbCBob29rIik7CgogICAg
        ICAgIC8vIFBhc3MgdGhlIGNvbnRleHQgYW5kIHJlc29sdmVkIHBhcmVudCBj
        b250ZXh0cyB0byBhZnRlck1vZGVsLCBidXQgd2UgZG9uJ3QKICAgICAgICAv
        LyB3YW50IHRvIHVzZSB0aGUgdmFsdWUgcmV0dXJuZWQgZnJvbSBgYWZ0ZXJN
        b2RlbGAgaW4gYW55IHdheSwgYnV0IHJhdGhlcgogICAgICAgIC8vIGFsd2F5
        cyByZXNvbHZlIHdpdGggdGhlIG9yaWdpbmFsIGBjb250ZXh0YCBvYmplY3Qu
        CgogICAgICAgIHRyYW5zaXRpb24ucmVzb2x2ZWRNb2RlbHNbaGFuZGxlcklu
        Zm8ubmFtZV0gPSBjb250ZXh0OwoKICAgICAgICB2YXIgYXJnczsKCiAgICAg
        ICAgaWYgKGhhbmRsZXJJbmZvLnF1ZXJ5UGFyYW1zKSB7CiAgICAgICAgICBh
        cmdzID0gW2NvbnRleHQsIGhhbmRsZXJJbmZvLnF1ZXJ5UGFyYW1zLCB0cmFu
        c2l0aW9uXTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgYXJncyA9IFtj
        b250ZXh0LCB0cmFuc2l0aW9uXTsKICAgICAgICB9CgogICAgICAgIHZhciBw
        ID0gaGFuZGxlci5hZnRlck1vZGVsICYmIGhhbmRsZXIuYWZ0ZXJNb2RlbC5h
        cHBseShoYW5kbGVyLCBhcmdzKTsKICAgICAgICByZXR1cm4gKHAgaW5zdGFu
        Y2VvZiBUcmFuc2l0aW9uKSA/IG51bGwgOiBwOwogICAgICB9CgogICAgICBm
        dW5jdGlvbiBwcm9jZWVkKCkgewogICAgICAgIGxvZyhyb3V0ZXIsIHNlcSwg
        aGFuZGxlck5hbWUgKyAiOiB2YWxpZGF0aW9uIHN1Y2NlZWRlZCwgcHJvY2Vl
        ZGluZyIpOwoKICAgICAgICBoYW5kbGVySW5mby5jb250ZXh0ID0gdHJhbnNp
        dGlvbi5yZXNvbHZlZE1vZGVsc1toYW5kbGVySW5mby5uYW1lXTsKICAgICAg
        ICB0cmFuc2l0aW9uLnJlc29sdmVJbmRleCsrOwogICAgICAgIHJldHVybiB2
        YWxpZGF0ZUVudHJ5KHRyYW5zaXRpb24sIG1hdGNoUG9pbnQsIGhhbmRsZXJQ
        YXJhbXMpOwogICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgIEBwcml2YXRl
        CgogICAgICBUaHJvd3MgYSBUcmFuc2l0aW9uQWJvcnRlZCBpZiB0aGUgcHJv
        dmlkZWQgdHJhbnNpdGlvbiBoYXMgYmVlbiBhYm9ydGVkLgogICAgICovCiAg
        ICBmdW5jdGlvbiBjaGVja0Fib3J0KHRyYW5zaXRpb24pIHsKICAgICAgaWYg
        KHRyYW5zaXRpb24uaXNBYm9ydGVkKSB7CiAgICAgICAgbG9nKHRyYW5zaXRp
        b24ucm91dGVyLCB0cmFuc2l0aW9uLnNlcXVlbmNlLCAiZGV0ZWN0ZWQgYWJv
        cnQuIik7CiAgICAgICAgdGhyb3cgbmV3IFJvdXRlci5UcmFuc2l0aW9uQWJv
        cnRlZCgpOwogICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgIEBwcml2YXRl
        CgogICAgICBFbmNhcHN1bGF0ZXMgdGhlIGxvZ2ljIGZvciB3aGV0aGVyIHRv
        IGNhbGwgYG1vZGVsYCBvbiBhIHJvdXRlLAogICAgICBvciB1c2Ugb25lIG9m
        IHRoZSBtb2RlbHMgcHJvdmlkZWQgdG8gYHRyYW5zaXRpb25Ub2AuCiAgICAg
        Ki8KICAgIGZ1bmN0aW9uIGdldE1vZGVsKGhhbmRsZXJJbmZvLCB0cmFuc2l0
        aW9uLCBoYW5kbGVyUGFyYW1zLCBuZWVkc1VwZGF0ZSkgewogICAgICB2YXIg
        aGFuZGxlciA9IGhhbmRsZXJJbmZvLmhhbmRsZXIsCiAgICAgICAgICBoYW5k
        bGVyTmFtZSA9IGhhbmRsZXJJbmZvLm5hbWUsIGFyZ3M7CgogICAgICBpZiAo
        IW5lZWRzVXBkYXRlICYmIGhhbmRsZXIuaGFzT3duUHJvcGVydHkoJ2NvbnRl
        eHQnKSkgewogICAgICAgIHJldHVybiBoYW5kbGVyLmNvbnRleHQ7CiAgICAg
        IH0KCiAgICAgIGlmICh0cmFuc2l0aW9uLnByb3ZpZGVkTW9kZWxzLmhhc093
        blByb3BlcnR5KGhhbmRsZXJOYW1lKSkgewogICAgICAgIHZhciBwcm92aWRl
        ZE1vZGVsID0gdHJhbnNpdGlvbi5wcm92aWRlZE1vZGVsc1toYW5kbGVyTmFt
        ZV07CiAgICAgICAgcmV0dXJuIHR5cGVvZiBwcm92aWRlZE1vZGVsID09PSAn
        ZnVuY3Rpb24nID8gcHJvdmlkZWRNb2RlbCgpIDogcHJvdmlkZWRNb2RlbDsK
        ICAgICAgfQoKICAgICAgaWYgKGhhbmRsZXJJbmZvLnF1ZXJ5UGFyYW1zKSB7
        CiAgICAgICAgYXJncyA9IFtoYW5kbGVyUGFyYW1zIHx8IHt9LCBoYW5kbGVy
        SW5mby5xdWVyeVBhcmFtcywgdHJhbnNpdGlvbl07CiAgICAgIH0gZWxzZSB7
        CiAgICAgICAgYXJncyA9IFtoYW5kbGVyUGFyYW1zIHx8IHt9LCB0cmFuc2l0
        aW9uLCBoYW5kbGVySW5mby5xdWVyeVBhcmFtc107CiAgICAgIH0KCiAgICAg
        IHJldHVybiBoYW5kbGVyLm1vZGVsICYmIGhhbmRsZXIubW9kZWwuYXBwbHko
        aGFuZGxlciwgYXJncyk7CiAgICB9CgogICAgLyoqCiAgICAgIEBwcml2YXRl
        CiAgICAgKi8KICAgIGZ1bmN0aW9uIGxvZyhyb3V0ZXIsIHNlcXVlbmNlLCBt
        c2cpIHsKCiAgICAgIGlmICghcm91dGVyLmxvZykgeyByZXR1cm47IH0KCiAg
        ICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAzKSB7CiAgICAgICAgcm91
        dGVyLmxvZygiVHJhbnNpdGlvbiAjIiArIHNlcXVlbmNlICsgIjogIiArIG1z
        Zyk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgbXNnID0gc2VxdWVuY2U7CiAg
        ICAgICAgcm91dGVyLmxvZyhtc2cpOwogICAgICB9CiAgICB9CgogICAgLyoq
        CiAgICAgIEBwcml2YXRlCgogICAgICBCZWdpbnMgYW5kIHJldHVybnMgYSBU
        cmFuc2l0aW9uIGJhc2VkIG9uIHRoZSBwcm92aWRlZAogICAgICBhcmd1bWVu
        dHMuIEFjY2VwdHMgYXJndW1lbnRzIGluIHRoZSBmb3JtIG9mIGJvdGggVVJM
        CiAgICAgIHRyYW5zaXRpb25zIGFuZCBuYW1lZCB0cmFuc2l0aW9ucy4KCiAg
        ICAgIEBwYXJhbSB7Um91dGVyfSByb3V0ZXIKICAgICAgQHBhcmFtIHtBcnJh
        eVtPYmplY3RdfSBhcmdzIGFyZ3VtZW50cyBwYXNzZWQgdG8gdHJhbnNpdGlv
        blRvLAogICAgICAgIHJlcGxhY2VXaXRoLCBvciBoYW5kbGVVUkwKICAgICov
        CiAgICBmdW5jdGlvbiBkb1RyYW5zaXRpb24ocm91dGVyLCBhcmdzLCBpc0lu
        dGVybWVkaWF0ZSkgewogICAgICAvLyBOb3JtYWxpemUgYmxhbmsgdHJhbnNp
        dGlvbnMgdG8gcm9vdCBVUkwgdHJhbnNpdGlvbnMuCiAgICAgIHZhciBuYW1l
        ID0gYXJnc1swXSB8fCAnLyc7CgogICAgICBpZihhcmdzLmxlbmd0aCA9PT0g
        MSAmJiBhcmdzWzBdLmhhc093blByb3BlcnR5KCdxdWVyeVBhcmFtcycpKSB7
        CiAgICAgICAgcmV0dXJuIGNyZWF0ZVF1ZXJ5UGFyYW1UcmFuc2l0aW9uKHJv
        dXRlciwgYXJnc1swXSwgaXNJbnRlcm1lZGlhdGUpOwogICAgICB9IGVsc2Ug
        aWYgKG5hbWUuY2hhckF0KDApID09PSAnLycpIHsKICAgICAgICByZXR1cm4g
        Y3JlYXRlVVJMVHJhbnNpdGlvbihyb3V0ZXIsIG5hbWUsIGlzSW50ZXJtZWRp
        YXRlKTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gY3JlYXRlTmFt
        ZWRUcmFuc2l0aW9uKHJvdXRlciwgc2xpY2UuY2FsbChhcmdzKSwgaXNJbnRl
        cm1lZGlhdGUpOwogICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgIEBwcml2
        YXRlCgogICAgICBTZXJpYWxpemVzIGEgaGFuZGxlciB1c2luZyBpdHMgY3Vz
        dG9tIGBzZXJpYWxpemVgIG1ldGhvZCBvcgogICAgICBieSBhIGRlZmF1bHQg
        dGhhdCBsb29rcyB1cCB0aGUgZXhwZWN0ZWQgcHJvcGVydHkgbmFtZSBmcm9t
        CiAgICAgIHRoZSBkeW5hbWljIHNlZ21lbnQuCgogICAgICBAcGFyYW0ge09i
        amVjdH0gaGFuZGxlciBhIHJvdXRlciBoYW5kbGVyCiAgICAgIEBwYXJhbSB7
        T2JqZWN0fSBtb2RlbCB0aGUgbW9kZWwgdG8gYmUgc2VyaWFsaXplZCBmb3Ig
        dGhpcyBoYW5kbGVyCiAgICAgIEBwYXJhbSB7QXJyYXlbT2JqZWN0XX0gbmFt
        ZXMgdGhlIG5hbWVzIGFycmF5IGF0dGFjaGVkIHRvIGFuCiAgICAgICAgaGFu
        ZGxlciBvYmplY3QgcmV0dXJuZWQgZnJvbSByb3V0ZXIucmVjb2duaXplci5o
        YW5kbGVyc0ZvcigpCiAgICAqLwogICAgZnVuY3Rpb24gc2VyaWFsaXplKGhh
        bmRsZXIsIG1vZGVsLCBuYW1lcykgewoKICAgICAgdmFyIG9iamVjdCA9IHt9
        OwogICAgICBpZiAoaXNQYXJhbShtb2RlbCkpIHsKICAgICAgICBvYmplY3Rb
        bmFtZXNbMF1dID0gbW9kZWw7CiAgICAgICAgcmV0dXJuIG9iamVjdDsKICAg
        ICAgfQoKICAgICAgLy8gVXNlIGN1c3RvbSBzZXJpYWxpemUgaWYgaXQgZXhp
        c3RzLgogICAgICBpZiAoaGFuZGxlci5zZXJpYWxpemUpIHsKICAgICAgICBy
        ZXR1cm4gaGFuZGxlci5zZXJpYWxpemUobW9kZWwsIG5hbWVzKTsKICAgICAg
        fQoKICAgICAgaWYgKG5hbWVzLmxlbmd0aCAhPT0gMSkgeyByZXR1cm47IH0K
        CiAgICAgIHZhciBuYW1lID0gbmFtZXNbMF07CgogICAgICBpZiAoL19pZCQv
        LnRlc3QobmFtZSkpIHsKICAgICAgICBvYmplY3RbbmFtZV0gPSBtb2RlbC5p
        ZDsKICAgICAgfSBlbHNlIHsKICAgICAgICBvYmplY3RbbmFtZV0gPSBtb2Rl
        bDsKICAgICAgfQogICAgICByZXR1cm4gb2JqZWN0OwogICAgfQoKCiAgICBy
        ZXR1cm4gUm91dGVyOwogIH0pOwoKfSkoKTsKCgoKKGZ1bmN0aW9uKCkgewov
        KioKQG1vZHVsZSBlbWJlcgpAc3VibW9kdWxlIGVtYmVyLXJvdXRpbmcKKi8K
        CmZ1bmN0aW9uIERTTChuYW1lKSB7CiAgdGhpcy5wYXJlbnQgPSBuYW1lOwog
        IHRoaXMubWF0Y2hlcyA9IFtdOwp9CgpEU0wucHJvdG90eXBlID0gewogIHJl
        c291cmNlOiBmdW5jdGlvbihuYW1lLCBvcHRpb25zLCBjYWxsYmFjaykgewog
        ICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDIgJiYgdHlwZW9mIG9wdGlv
        bnMgPT09ICdmdW5jdGlvbicpIHsKICAgICAgY2FsbGJhY2sgPSBvcHRpb25z
        OwogICAgICBvcHRpb25zID0ge307CiAgICB9CgogICAgaWYgKGFyZ3VtZW50
        cy5sZW5ndGggPT09IDEpIHsKICAgICAgb3B0aW9ucyA9IHt9OwogICAgfQoK
        ICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5wYXRoICE9PSAnc3RyaW5nJykgewog
        ICAgICBvcHRpb25zLnBhdGggPSAiLyIgKyBuYW1lOwogICAgfQoKICAgIGlm
        IChjYWxsYmFjaykgewogICAgICB2YXIgZHNsID0gbmV3IERTTChuYW1lKTsK
        ICAgICAgZHNsLnJvdXRlKCdsb2FkaW5nJyk7CiAgICAgIGRzbC5yb3V0ZSgn
        ZXJyb3InLCB7IHBhdGg6ICIvX3VudXNlZF9kdW1teV9lcnJvcl9wYXRoLzpl
        cnJvciIgfSk7CiAgICAgIGNhbGxiYWNrLmNhbGwoZHNsKTsKICAgICAgdGhp
        cy5wdXNoKG9wdGlvbnMucGF0aCwgbmFtZSwgZHNsLmdlbmVyYXRlKCksIG9w
        dGlvbnMucXVlcnlQYXJhbXMpOwogICAgfSBlbHNlIHsKICAgICAgdGhpcy5w
        dXNoKG9wdGlvbnMucGF0aCwgbmFtZSwgbnVsbCwgb3B0aW9ucy5xdWVyeVBh
        cmFtcyk7CiAgICB9CiAgfSwKCiAgcHVzaDogZnVuY3Rpb24odXJsLCBuYW1l
        LCBjYWxsYmFjaywgcXVlcnlQYXJhbXMpIHsKICAgIHZhciBwYXJ0cyA9IG5h
        bWUuc3BsaXQoJy4nKTsKICAgIGlmICh1cmwgPT09ICIiIHx8IHVybCA9PT0g
        Ii8iIHx8IHBhcnRzW3BhcnRzLmxlbmd0aC0xXSA9PT0gImluZGV4IikgeyB0
        aGlzLmV4cGxpY2l0SW5kZXggPSB0cnVlOyB9CgogICAgdGhpcy5tYXRjaGVz
        LnB1c2goW3VybCwgbmFtZSwgY2FsbGJhY2ssIHF1ZXJ5UGFyYW1zXSk7CiAg
        fSwKCiAgcm91dGU6IGZ1bmN0aW9uKG5hbWUsIG9wdGlvbnMpIHsKICAgIEVt
        YmVyLmFzc2VydCgiWW91IG11c3QgdXNlIGB0aGlzLnJlc291cmNlYCB0byBu
        ZXN0IiwgdHlwZW9mIG9wdGlvbnMgIT09ICdmdW5jdGlvbicpOwoKICAgIG9w
        dGlvbnMgPSBvcHRpb25zIHx8IHt9OwoKICAgIGlmICh0eXBlb2Ygb3B0aW9u
        cy5wYXRoICE9PSAnc3RyaW5nJykgewogICAgICBvcHRpb25zLnBhdGggPSAi
        LyIgKyBuYW1lOwogICAgfQoKICAgIGlmICh0aGlzLnBhcmVudCAmJiB0aGlz
        LnBhcmVudCAhPT0gJ2FwcGxpY2F0aW9uJykgewogICAgICBuYW1lID0gdGhp
        cy5wYXJlbnQgKyAiLiIgKyBuYW1lOwogICAgfQoKICAgIHRoaXMucHVzaChv
        cHRpb25zLnBhdGgsIG5hbWUsIG51bGwsIG9wdGlvbnMucXVlcnlQYXJhbXMp
        OwogIH0sCgogIGdlbmVyYXRlOiBmdW5jdGlvbigpIHsKICAgIHZhciBkc2xN
        YXRjaGVzID0gdGhpcy5tYXRjaGVzOwoKICAgIGlmICghdGhpcy5leHBsaWNp
        dEluZGV4KSB7CiAgICAgIHRoaXMucm91dGUoImluZGV4IiwgeyBwYXRoOiAi
        LyIgfSk7CiAgICB9CgogICAgcmV0dXJuIGZ1bmN0aW9uKG1hdGNoKSB7CiAg
        ICAgIGZvciAodmFyIGk9MCwgbD1kc2xNYXRjaGVzLmxlbmd0aDsgaTxsOyBp
        KyspIHsKICAgICAgICB2YXIgZHNsTWF0Y2ggPSBkc2xNYXRjaGVzW2ldOwog
        ICAgICAgIHZhciBtYXRjaE9iaiA9IG1hdGNoKGRzbE1hdGNoWzBdKS50byhk
        c2xNYXRjaFsxXSwgZHNsTWF0Y2hbMl0pOwogICAgICAgICAgICAgIH0KICAg
        IH07CiAgfQp9OwoKRFNMLm1hcCA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7CiAg
        dmFyIGRzbCA9IG5ldyBEU0woKTsKICBjYWxsYmFjay5jYWxsKGRzbCk7CiAg
        cmV0dXJuIGRzbDsKfTsKCkVtYmVyLlJvdXRlckRTTCA9IERTTDsKCn0pKCk7
        CgoKCihmdW5jdGlvbigpIHsKdmFyIGdldCA9IEVtYmVyLmdldDsKCi8qKgpA
        bW9kdWxlIGVtYmVyCkBzdWJtb2R1bGUgZW1iZXItcm91dGluZwoqLwoKLyoq
        CiAgCiAgRmluZHMgYSBjb250cm9sbGVyIGluc3RhbmNlLgoKICBAZm9yIEVt
        YmVyCiAgQG1ldGhvZCBjb250cm9sbGVyRm9yCiAgQHByaXZhdGUKKi8KRW1i
        ZXIuY29udHJvbGxlckZvciA9IGZ1bmN0aW9uKGNvbnRhaW5lciwgY29udHJv
        bGxlck5hbWUsIGxvb2t1cE9wdGlvbnMpIHsKICByZXR1cm4gY29udGFpbmVy
        Lmxvb2t1cCgnY29udHJvbGxlcjonICsgY29udHJvbGxlck5hbWUsIGxvb2t1
        cE9wdGlvbnMpOwp9OwoKLyoqCiAgR2VuZXJhdGVzIGEgY29udHJvbGxlciBh
        dXRvbWF0aWNhbGx5IGlmIG5vbmUgd2FzIHByb3ZpZGVkLgogIFRoZSB0eXBl
        IG9mIGdlbmVyYXRlZCBjb250cm9sbGVyIGRlcGVuZHMgb24gdGhlIGNvbnRl
        eHQuCiAgWW91IGNhbiBjdXN0b21pemUgeW91ciBnZW5lcmF0ZWQgY29udHJv
        bGxlcnMgYnkgZGVmaW5pbmcKICBgQXBwLk9iamVjdENvbnRyb2xsZXJgIGFu
        ZCBgQXBwLkFycmF5Q29udHJvbGxlcmAKICAKICBAZm9yIEVtYmVyCiAgQG1l
        dGhvZCBnZW5lcmF0ZUNvbnRyb2xsZXIKICBAcHJpdmF0ZQoqLwpFbWJlci5n
        ZW5lcmF0ZUNvbnRyb2xsZXIgPSBmdW5jdGlvbihjb250YWluZXIsIGNvbnRy
        b2xsZXJOYW1lLCBjb250ZXh0KSB7CiAgdmFyIENvbnRyb2xsZXJGYWN0b3J5
        LCBmdWxsTmFtZSwgaW5zdGFuY2UsIG5hbWUsIGZhY3RvcnlOYW1lLCBjb250
        cm9sbGVyVHlwZTsKCiAgaWYgKGNvbnRleHQgJiYgRW1iZXIuaXNBcnJheShj
        b250ZXh0KSkgewogICAgY29udHJvbGxlclR5cGUgPSAnYXJyYXknOwogIH0g
        ZWxzZSBpZiAoY29udGV4dCkgewogICAgY29udHJvbGxlclR5cGUgPSAnb2Jq
        ZWN0JzsKICB9IGVsc2UgewogICAgY29udHJvbGxlclR5cGUgPSAnYmFzaWMn
        OwogIH0KCiAgZmFjdG9yeU5hbWUgPSAnY29udHJvbGxlcjonICsgY29udHJv
        bGxlclR5cGU7CgogIENvbnRyb2xsZXJGYWN0b3J5ID0gY29udGFpbmVyLmxv
        b2t1cEZhY3RvcnkoZmFjdG9yeU5hbWUpLmV4dGVuZCh7CiAgICBpc0dlbmVy
        YXRlZDogdHJ1ZSwKICAgIHRvU3RyaW5nOiBmdW5jdGlvbigpIHsKICAgICAg
        cmV0dXJuICIoZ2VuZXJhdGVkICIgKyBjb250cm9sbGVyTmFtZSArICIgY29u
        dHJvbGxlcikiOwogICAgfQogIH0pOwoKICBmdWxsTmFtZSA9ICdjb250cm9s
        bGVyOicgKyBjb250cm9sbGVyTmFtZTsKCiAgY29udGFpbmVyLnJlZ2lzdGVy
        KGZ1bGxOYW1lLCBDb250cm9sbGVyRmFjdG9yeSk7CgogIGluc3RhbmNlID0g
        Y29udGFpbmVyLmxvb2t1cChmdWxsTmFtZSk7CgogIGlmIChnZXQoaW5zdGFu
        Y2UsICduYW1lc3BhY2UuTE9HX0FDVElWRV9HRU5FUkFUSU9OJykpIHsKICAg
        IEVtYmVyLkxvZ2dlci5pbmZvKCJnZW5lcmF0ZWQgLT4gIiArIGZ1bGxOYW1l
        LCB7IGZ1bGxOYW1lOiBmdWxsTmFtZSB9KTsKICB9CgogIHJldHVybiBpbnN0
        YW5jZTsKfTsKCn0pKCk7CgoKCihmdW5jdGlvbigpIHsKLyoqCkBtb2R1bGUg
        ZW1iZXIKQHN1Ym1vZHVsZSBlbWJlci1yb3V0aW5nCiovCgp2YXIgUm91dGVy
        ID0gcmVxdWlyZU1vZHVsZSgicm91dGVyIik7CnZhciBnZXQgPSBFbWJlci5n
        ZXQsIHNldCA9IEVtYmVyLnNldDsKdmFyIGRlZmluZVByb3BlcnR5ID0gRW1i
        ZXIuZGVmaW5lUHJvcGVydHk7Cgp2YXIgRGVmYXVsdFZpZXcgPSBFbWJlci5f
        TWV0YW1vcnBoVmlldzsKLyoqCiAgVGhlIGBFbWJlci5Sb3V0ZXJgIGNsYXNz
        IG1hbmFnZXMgdGhlIGFwcGxpY2F0aW9uIHN0YXRlIGFuZCBVUkxzLiBSZWZl
        ciB0bwogIHRoZSBbcm91dGluZyBndWlkZV0oaHR0cDovL2VtYmVyanMuY29t
        L2d1aWRlcy9yb3V0aW5nLykgZm9yIGRvY3VtZW50YXRpb24uCgogIEBjbGFz
        cyBSb3V0ZXIKICBAbmFtZXNwYWNlIEVtYmVyCiAgQGV4dGVuZHMgRW1iZXIu
        T2JqZWN0CiovCkVtYmVyLlJvdXRlciA9IEVtYmVyLk9iamVjdC5leHRlbmQo
        RW1iZXIuRXZlbnRlZCwgewogIGxvY2F0aW9uOiAnaGFzaCcsCgogIGluaXQ6
        IGZ1bmN0aW9uKCkgewogICAgdGhpcy5yb3V0ZXIgPSB0aGlzLmNvbnN0cnVj
        dG9yLnJvdXRlciB8fCB0aGlzLmNvbnN0cnVjdG9yLm1hcChFbWJlci5LKTsK
        ICAgIHRoaXMuX2FjdGl2ZVZpZXdzID0ge307CiAgICB0aGlzLl9zZXR1cExv
        Y2F0aW9uKCk7CiAgfSwKCiAgdXJsOiBFbWJlci5jb21wdXRlZChmdW5jdGlv
        bigpIHsKICAgIHJldHVybiBnZXQodGhpcywgJ2xvY2F0aW9uJykuZ2V0VVJM
        KCk7CiAgfSksCgogIHN0YXJ0Um91dGluZzogZnVuY3Rpb24oKSB7CiAgICB0
        aGlzLnJvdXRlciA9IHRoaXMucm91dGVyIHx8IHRoaXMuY29uc3RydWN0b3Iu
        bWFwKEVtYmVyLkspOwoKICAgIHZhciByb3V0ZXIgPSB0aGlzLnJvdXRlciwK
        ICAgICAgICBsb2NhdGlvbiA9IGdldCh0aGlzLCAnbG9jYXRpb24nKSwKICAg
        ICAgICBjb250YWluZXIgPSB0aGlzLmNvbnRhaW5lciwKICAgICAgICBzZWxm
        ID0gdGhpczsKCiAgICB0aGlzLl9zZXR1cFJvdXRlcihyb3V0ZXIsIGxvY2F0
        aW9uKTsKCiAgICBjb250YWluZXIucmVnaXN0ZXIoJ3ZpZXc6ZGVmYXVsdCcs
        IERlZmF1bHRWaWV3KTsKICAgIGNvbnRhaW5lci5yZWdpc3Rlcigndmlldzp0
        b3BsZXZlbCcsIEVtYmVyLlZpZXcuZXh0ZW5kKCkpOwoKICAgIGxvY2F0aW9u
        Lm9uVXBkYXRlVVJMKGZ1bmN0aW9uKHVybCkgewogICAgICBzZWxmLmhhbmRs
        ZVVSTCh1cmwpOwogICAgfSk7CgogICAgdGhpcy5oYW5kbGVVUkwobG9jYXRp
        b24uZ2V0VVJMKCkpOwogIH0sCgogIGRpZFRyYW5zaXRpb246IGZ1bmN0aW9u
        KGluZm9zKSB7CiAgICB1cGRhdGVQYXRocyh0aGlzKTsKCiAgICAKICAgICAg
        dGhpcy5fY2FuY2VsTG9hZGluZ0V2ZW50KCk7CiAgICAKICAgIHRoaXMubm90
        aWZ5UHJvcGVydHlDaGFuZ2UoJ3VybCcpOwoKICAgIAogICAgICAvLyBQdXQg
        dGhpcyBpbiB0aGUgcnVubG9vcCBzbyB1cmwgd2lsbCBiZSBhY2N1cmF0ZS4g
        U2VlbXMKICAgICAgLy8gbGVzcyBzdXJwcmlzaW5nIHRoYW4gZGlkVHJhbnNp
        dGlvbiBiZWluZyBvdXQgb2Ygc3luYy4KICAgICAgRW1iZXIucnVuLm9uY2Uo
        dGhpcywgdGhpcy50cmlnZ2VyLCAnZGlkVHJhbnNpdGlvbicpOwogICAgCgog
        ICAgaWYgKGdldCh0aGlzLCAnbmFtZXNwYWNlJykuTE9HX1RSQU5TSVRJT05T
        KSB7CiAgICAgIEVtYmVyLkxvZ2dlci5sb2coIlRyYW5zaXRpb25lZCBpbnRv
        ICciICsgRW1iZXIuUm91dGVyLl9yb3V0ZVBhdGgoaW5mb3MpICsgIiciKTsK
        ICAgIH0KICB9LAoKICBoYW5kbGVVUkw6IGZ1bmN0aW9uKHVybCkgewogICAg
        cmV0dXJuIHRoaXMuX2RvVHJhbnNpdGlvbignaGFuZGxlVVJMJywgW3VybF0p
        OwogIH0sCgogIHRyYW5zaXRpb25UbzogZnVuY3Rpb24oKSB7CiAgICByZXR1
        cm4gdGhpcy5fZG9UcmFuc2l0aW9uKCd0cmFuc2l0aW9uVG8nLCBhcmd1bWVu
        dHMpOwogIH0sCgogIGludGVybWVkaWF0ZVRyYW5zaXRpb25UbzogZnVuY3Rp
        b24oKSB7CiAgICB0aGlzLnJvdXRlci5pbnRlcm1lZGlhdGVUcmFuc2l0aW9u
        VG8uYXBwbHkodGhpcy5yb3V0ZXIsIGFyZ3VtZW50cyk7CgogICAgdXBkYXRl
        UGF0aHModGhpcyk7CgogICAgdmFyIGluZm9zID0gdGhpcy5yb3V0ZXIuY3Vy
        cmVudEhhbmRsZXJJbmZvczsKICAgIGlmIChnZXQodGhpcywgJ25hbWVzcGFj
        ZScpLkxPR19UUkFOU0lUSU9OUykgewogICAgICBFbWJlci5Mb2dnZXIubG9n
        KCJJbnRlcm1lZGlhdGUtdHJhbnNpdGlvbmVkIGludG8gJyIgKyBFbWJlci5S
        b3V0ZXIuX3JvdXRlUGF0aChpbmZvcykgKyAiJyIpOwogICAgfQogIH0sCgog
        IHJlcGxhY2VXaXRoOiBmdW5jdGlvbigpIHsKICAgIHJldHVybiB0aGlzLl9k
        b1RyYW5zaXRpb24oJ3JlcGxhY2VXaXRoJywgYXJndW1lbnRzKTsKICB9LAoK
        ICBnZW5lcmF0ZTogZnVuY3Rpb24oKSB7CiAgICB2YXIgdXJsID0gdGhpcy5y
        b3V0ZXIuZ2VuZXJhdGUuYXBwbHkodGhpcy5yb3V0ZXIsIGFyZ3VtZW50cyk7
        CiAgICByZXR1cm4gdGhpcy5sb2NhdGlvbi5mb3JtYXRVUkwodXJsKTsKICB9
        LAoKICBpc0FjdGl2ZTogZnVuY3Rpb24ocm91dGVOYW1lKSB7CiAgICB2YXIg
        cm91dGVyID0gdGhpcy5yb3V0ZXI7CiAgICByZXR1cm4gcm91dGVyLmlzQWN0
        aXZlLmFwcGx5KHJvdXRlciwgYXJndW1lbnRzKTsKICB9LAoKICBzZW5kOiBm
        dW5jdGlvbihuYW1lLCBjb250ZXh0KSB7CiAgICB0aGlzLnJvdXRlci50cmln
        Z2VyLmFwcGx5KHRoaXMucm91dGVyLCBhcmd1bWVudHMpOwogIH0sCgogIGhh
        c1JvdXRlOiBmdW5jdGlvbihyb3V0ZSkgewogICAgcmV0dXJuIHRoaXMucm91
        dGVyLmhhc1JvdXRlKHJvdXRlKTsKICB9LAoKICAvKioKICAgIEBwcml2YXRl
        CgogICAgUmVzZXRzIHRoZSBzdGF0ZSBvZiB0aGUgcm91dGVyIGJ5IGNsZWFy
        aW5nIHRoZSBjdXJyZW50IHJvdXRlCiAgICBoYW5kbGVycyBhbmQgZGVhY3Rp
        dmF0aW5nIHRoZW0uCgogICAgQG1ldGhvZCByZXNldAogICAqLwogIHJlc2V0
        OiBmdW5jdGlvbigpIHsKICAgIHRoaXMucm91dGVyLnJlc2V0KCk7CiAgfSwK
        CiAgX2xvb2t1cEFjdGl2ZVZpZXc6IGZ1bmN0aW9uKHRlbXBsYXRlTmFtZSkg
        ewogICAgdmFyIGFjdGl2ZSA9IHRoaXMuX2FjdGl2ZVZpZXdzW3RlbXBsYXRl
        TmFtZV07CiAgICByZXR1cm4gYWN0aXZlICYmIGFjdGl2ZVswXTsKICB9LAoK
        ICBfY29ubmVjdEFjdGl2ZVZpZXc6IGZ1bmN0aW9uKHRlbXBsYXRlTmFtZSwg
        dmlldykgewogICAgdmFyIGV4aXN0aW5nID0gdGhpcy5fYWN0aXZlVmlld3Nb
        dGVtcGxhdGVOYW1lXTsKCiAgICBpZiAoZXhpc3RpbmcpIHsKICAgICAgZXhp
        c3RpbmdbMF0ub2ZmKCd3aWxsRGVzdHJveUVsZW1lbnQnLCB0aGlzLCBleGlz
        dGluZ1sxXSk7CiAgICB9CgogICAgdmFyIGRpc2Nvbm5lY3QgPSBmdW5jdGlv
        bigpIHsKICAgICAgZGVsZXRlIHRoaXMuX2FjdGl2ZVZpZXdzW3RlbXBsYXRl
        TmFtZV07CiAgICB9OwoKICAgIHRoaXMuX2FjdGl2ZVZpZXdzW3RlbXBsYXRl
        TmFtZV0gPSBbdmlldywgZGlzY29ubmVjdF07CiAgICB2aWV3Lm9uZSgnd2ls
        bERlc3Ryb3lFbGVtZW50JywgdGhpcywgZGlzY29ubmVjdCk7CiAgfSwKCiAg
        X3NldHVwTG9jYXRpb246IGZ1bmN0aW9uKCkgewogICAgdmFyIGxvY2F0aW9u
        ID0gZ2V0KHRoaXMsICdsb2NhdGlvbicpLAogICAgICAgIHJvb3RVUkwgPSBn
        ZXQodGhpcywgJ3Jvb3RVUkwnKSwKICAgICAgICBvcHRpb25zID0ge307Cgog
        ICAgaWYgKHR5cGVvZiByb290VVJMID09PSAnc3RyaW5nJykgewogICAgICBv
        cHRpb25zLnJvb3RVUkwgPSByb290VVJMOwogICAgfQoKICAgIGlmICgnc3Ry
        aW5nJyA9PT0gdHlwZW9mIGxvY2F0aW9uKSB7CiAgICAgIG9wdGlvbnMuaW1w
        bGVtZW50YXRpb24gPSBsb2NhdGlvbjsKICAgICAgbG9jYXRpb24gPSBzZXQo
        dGhpcywgJ2xvY2F0aW9uJywgRW1iZXIuTG9jYXRpb24uY3JlYXRlKG9wdGlv
        bnMpKTsKICAgIH0KICB9LAoKICBfZ2V0SGFuZGxlckZ1bmN0aW9uOiBmdW5j
        dGlvbigpIHsKICAgIHZhciBzZWVuID0ge30sIGNvbnRhaW5lciA9IHRoaXMu
        Y29udGFpbmVyLAogICAgICAgIERlZmF1bHRSb3V0ZSA9IGNvbnRhaW5lci5s
        b29rdXBGYWN0b3J5KCdyb3V0ZTpiYXNpYycpLAogICAgICAgIHNlbGYgPSB0
        aGlzOwoKICAgIHJldHVybiBmdW5jdGlvbihuYW1lKSB7CiAgICAgIHZhciBy
        b3V0ZU5hbWUgPSAncm91dGU6JyArIG5hbWUsCiAgICAgICAgICBoYW5kbGVy
        ID0gY29udGFpbmVyLmxvb2t1cChyb3V0ZU5hbWUpOwoKICAgICAgaWYgKHNl
        ZW5bbmFtZV0pIHsgcmV0dXJuIGhhbmRsZXI7IH0KCiAgICAgIHNlZW5bbmFt
        ZV0gPSB0cnVlOwoKICAgICAgaWYgKCFoYW5kbGVyKSB7CiAgICAgICAgCiAg
        ICAgICAgCiAgICAgICAgY29udGFpbmVyLnJlZ2lzdGVyKHJvdXRlTmFtZSwg
        RGVmYXVsdFJvdXRlLmV4dGVuZCgpKTsKICAgICAgICBoYW5kbGVyID0gY29u
        dGFpbmVyLmxvb2t1cChyb3V0ZU5hbWUpOwoKICAgICAgICBpZiAoZ2V0KHNl
        bGYsICduYW1lc3BhY2UuTE9HX0FDVElWRV9HRU5FUkFUSU9OJykpIHsKICAg
        ICAgICAgIEVtYmVyLkxvZ2dlci5pbmZvKCJnZW5lcmF0ZWQgLT4gIiArIHJv
        dXRlTmFtZSwgeyBmdWxsTmFtZTogcm91dGVOYW1lIH0pOwogICAgICAgIH0K
        ICAgICAgfQoKICAgICAgaGFuZGxlci5yb3V0ZU5hbWUgPSBuYW1lOwogICAg
        ICByZXR1cm4gaGFuZGxlcjsKICAgIH07CiAgfSwKCiAgX3NldHVwUm91dGVy
        OiBmdW5jdGlvbihyb3V0ZXIsIGxvY2F0aW9uKSB7CiAgICB2YXIgbGFzdFVS
        TCwgZW1iZXJSb3V0ZXIgPSB0aGlzOwoKICAgIHJvdXRlci5nZXRIYW5kbGVy
        ID0gdGhpcy5fZ2V0SGFuZGxlckZ1bmN0aW9uKCk7CgogICAgdmFyIGRvVXBk
        YXRlVVJMID0gZnVuY3Rpb24oKSB7CiAgICAgIGxvY2F0aW9uLnNldFVSTChs
        YXN0VVJMKTsKICAgIH07CgogICAgcm91dGVyLnVwZGF0ZVVSTCA9IGZ1bmN0
        aW9uKHBhdGgpIHsKICAgICAgbGFzdFVSTCA9IHBhdGg7CiAgICAgIEVtYmVy
        LnJ1bi5vbmNlKGRvVXBkYXRlVVJMKTsKICAgIH07CgogICAgaWYgKGxvY2F0
        aW9uLnJlcGxhY2VVUkwpIHsKICAgICAgdmFyIGRvUmVwbGFjZVVSTCA9IGZ1
        bmN0aW9uKCkgewogICAgICAgIGxvY2F0aW9uLnJlcGxhY2VVUkwobGFzdFVS
        TCk7CiAgICAgIH07CgogICAgICByb3V0ZXIucmVwbGFjZVVSTCA9IGZ1bmN0
        aW9uKHBhdGgpIHsKICAgICAgICBsYXN0VVJMID0gcGF0aDsKICAgICAgICBF
        bWJlci5ydW4ub25jZShkb1JlcGxhY2VVUkwpOwogICAgICB9OwogICAgfQoK
        ICAgIHJvdXRlci5kaWRUcmFuc2l0aW9uID0gZnVuY3Rpb24oaW5mb3MpIHsK
        ICAgICAgZW1iZXJSb3V0ZXIuZGlkVHJhbnNpdGlvbihpbmZvcyk7CiAgICB9
        OwogIH0sCgogIF9kb1RyYW5zaXRpb246IGZ1bmN0aW9uKG1ldGhvZCwgYXJn
        cykgewogICAgLy8gTm9ybWFsaXplIGJsYW5rIHJvdXRlIHRvIHJvb3QgVVJM
        LgogICAgYXJncyA9IFtdLnNsaWNlLmNhbGwoYXJncyk7CiAgICBhcmdzWzBd
        ID0gYXJnc1swXSB8fCAnLyc7CgogICAgdmFyIHBhc3NlZE5hbWUgPSBhcmdz
        WzBdLCBuYW1lLCBzZWxmID0gdGhpcywKICAgICAgaXNRdWVyeVBhcmFtc09u
        bHkgPSBmYWxzZTsKCiAgICAKICAgIGlmICghaXNRdWVyeVBhcmFtc09ubHkg
        JiYgcGFzc2VkTmFtZS5jaGFyQXQoMCkgPT09ICcvJykgewogICAgICBuYW1l
        ID0gcGFzc2VkTmFtZTsKICAgIH0gZWxzZSBpZiAoIWlzUXVlcnlQYXJhbXNP
        bmx5KSB7CiAgICAgIGlmICghdGhpcy5yb3V0ZXIuaGFzUm91dGUocGFzc2Vk
        TmFtZSkpIHsKICAgICAgICBuYW1lID0gYXJnc1swXSA9IHBhc3NlZE5hbWUg
        KyAnLmluZGV4JzsKICAgICAgfSBlbHNlIHsKICAgICAgICBuYW1lID0gcGFz
        c2VkTmFtZTsKICAgICAgfQoKICAgICAgRW1iZXIuYXNzZXJ0KCJUaGUgcm91
        dGUgIiArIHBhc3NlZE5hbWUgKyAiIHdhcyBub3QgZm91bmQiLCB0aGlzLnJv
        dXRlci5oYXNSb3V0ZShuYW1lKSk7CiAgICB9CgogICAgdmFyIHRyYW5zaXRp
        b25Qcm9taXNlID0gdGhpcy5yb3V0ZXJbbWV0aG9kXS5hcHBseSh0aGlzLnJv
        dXRlciwgYXJncyk7CgogICAgLy8gRG9uJ3Qgc2NoZWR1bGUgbG9hZGluZyBz
        dGF0ZSBlbnRyeSBpZiB1c2VyIGhhcyBhbHJlYWR5IGFib3J0ZWQgdGhlIHRy
        YW5zaXRpb24uCiAgICAKICAgIAogICAgdHJhbnNpdGlvblByb21pc2UudGhl
        bihudWxsLCBmdW5jdGlvbihlcnJvcikgewogICAgICBpZiAoZXJyb3IubmFt
        ZSA9PT0gIlVucmVjb2duaXplZFVSTEVycm9yIikgewogICAgICAgIEVtYmVy
        LmFzc2VydCgiVGhlIFVSTCAnIiArIGVycm9yLm1lc3NhZ2UgKyAiJyBkaWQg
        bm90IG1hdGNoIGFueSByb3V0ZXMgaW4geW91ciBhcHBsaWNhdGlvbiIpOwog
        ICAgICB9CiAgICB9KTsKCiAgICAvLyBXZSB3YW50IHRvIHJldHVybiB0aGUg
        Y29uZmlndXJhYmxlIHByb21pc2Ugb2JqZWN0CiAgICAvLyBzbyB0aGF0IGNh
        bGxlcnMgb2YgdGhpcyBmdW5jdGlvbiBjYW4gdXNlIGAubWV0aG9kKClgIG9u
        IGl0LAogICAgLy8gd2hpY2ggb2J2aW91c2x5IGRvZXNuJ3QgZXhpc3QgZm9y
        IG5vcm1hbCBSU1ZQIHByb21pc2VzLgogICAgcmV0dXJuIHRyYW5zaXRpb25Q
        cm9taXNlOwogIH0sCgogIF9zY2hlZHVsZUxvYWRpbmdFdmVudDogZnVuY3Rp
        b24odHJhbnNpdGlvbiwgb3JpZ2luUm91dGUpIHsKICAgIHRoaXMuX2NhbmNl
        bExvYWRpbmdFdmVudCgpOwogICAgCiAgICAgIHRoaXMuX2xvYWRpbmdTdGF0
        ZVRpbWVyID0gRW1iZXIucnVuLnNjaGVkdWxlT25jZSgncm91dGVyVHJhbnNp
        dGlvbnMnLCB0aGlzLCAnX2ZpcmVMb2FkaW5nRXZlbnQnLCB0cmFuc2l0aW9u
        LCBvcmlnaW5Sb3V0ZSk7CiAgICAKICB9LAoKICBfZmlyZUxvYWRpbmdFdmVu
        dDogZnVuY3Rpb24odHJhbnNpdGlvbiwgb3JpZ2luUm91dGUpIHsKICAgIAog
        ICAgICBpZiAoIXRoaXMucm91dGVyLmFjdGl2ZVRyYW5zaXRpb24pIHsKICAg
        ICAgICAvLyBEb24ndCBmaXJlIGFuIGV2ZW50IGlmIHdlJ3ZlIHNpbmNlIG1v
        dmVkIG9uIGZyb20KICAgICAgICAvLyB0aGUgdHJhbnNpdGlvbiB0aGF0IHB1
        dCB1cyBpbiBhIGxvYWRpbmcgc3RhdGUuCiAgICAgICAgcmV0dXJuOwogICAg
        ICB9CgogICAgICB0cmFuc2l0aW9uLnRyaWdnZXIodHJ1ZSwgJ2xvYWRpbmcn
        LCB0cmFuc2l0aW9uLCBvcmlnaW5Sb3V0ZSk7CiAgICAgIH0sCgogIF9jYW5j
        ZWxMb2FkaW5nRXZlbnQ6IGZ1bmN0aW9uICgpIHsKICAgIGlmICh0aGlzLl9s
        b2FkaW5nU3RhdGVUaW1lcikgewogICAgICBFbWJlci5ydW4uY2FuY2VsKHRo
        aXMuX2xvYWRpbmdTdGF0ZVRpbWVyKTsKICAgIH0KICAgIHRoaXMuX2xvYWRp
        bmdTdGF0ZVRpbWVyID0gbnVsbDsKICB9Cn0pOwoKZnVuY3Rpb24gdHJpZ2dl
        ckV2ZW50KGhhbmRsZXJJbmZvcywgaWdub3JlRmFpbHVyZSwgYXJncykgewog
        IHZhciBuYW1lID0gYXJncy5zaGlmdCgpOwoKICBpZiAoIWhhbmRsZXJJbmZv
        cykgewogICAgaWYgKGlnbm9yZUZhaWx1cmUpIHsgcmV0dXJuOyB9CiAgICB0
        aHJvdyBuZXcgRW1iZXIuRXJyb3IoIkNvdWxkIG5vdCB0cmlnZ2VyIGV2ZW50
        ICciICsgbmFtZSArICInLiBUaGVyZSBhcmUgbm8gYWN0aXZlIGhhbmRsZXJz
        Iik7CiAgfQoKICB2YXIgZXZlbnRXYXNIYW5kbGVkID0gZmFsc2U7CgogIGZv
        ciAodmFyIGk9aGFuZGxlckluZm9zLmxlbmd0aC0xOyBpPj0wOyBpLS0pIHsK
        ICAgIHZhciBoYW5kbGVySW5mbyA9IGhhbmRsZXJJbmZvc1tpXSwKICAgICAg
        ICBoYW5kbGVyID0gaGFuZGxlckluZm8uaGFuZGxlcjsKCiAgICBpZiAoaGFu
        ZGxlci5fYWN0aW9ucyAmJiBoYW5kbGVyLl9hY3Rpb25zW25hbWVdKSB7CiAg
        ICAgIGlmIChoYW5kbGVyLl9hY3Rpb25zW25hbWVdLmFwcGx5KGhhbmRsZXIs
        IGFyZ3MpID09PSB0cnVlKSB7CiAgICAgICAgZXZlbnRXYXNIYW5kbGVkID0g
        dHJ1ZTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm47CiAgICAgIH0K
        ICAgIH0KICB9CgogIGlmICghZXZlbnRXYXNIYW5kbGVkICYmICFpZ25vcmVG
        YWlsdXJlKSB7CiAgICB0aHJvdyBuZXcgRW1iZXIuRXJyb3IoIk5vdGhpbmcg
        aGFuZGxlZCB0aGUgYWN0aW9uICciICsgbmFtZSArICInLiBJZiB5b3UgZGlk
        IGhhbmRsZSB0aGUgYWN0aW9uLCB0aGlzIGVycm9yIGNhbiBiZSBjYXVzZWQg
        YnkgcmV0dXJuaW5nIHRydWUgZnJvbSBhbiBhY3Rpb24gaGFuZGxlciwgY2F1
        c2luZyB0aGUgYWN0aW9uIHRvIGJ1YmJsZS4iKTsKICB9Cn0KCmZ1bmN0aW9u
        IHVwZGF0ZVBhdGhzKHJvdXRlcikgewogIHZhciBhcHBDb250cm9sbGVyID0g
        cm91dGVyLmNvbnRhaW5lci5sb29rdXAoJ2NvbnRyb2xsZXI6YXBwbGljYXRp
        b24nKSwKICAgICAgaW5mb3MgPSByb3V0ZXIucm91dGVyLmN1cnJlbnRIYW5k
        bGVySW5mb3MsCiAgICAgIHBhdGggPSBFbWJlci5Sb3V0ZXIuX3JvdXRlUGF0
        aChpbmZvcyk7CgogIGlmICghKCdjdXJyZW50UGF0aCcgaW4gYXBwQ29udHJv
        bGxlcikpIHsKICAgIGRlZmluZVByb3BlcnR5KGFwcENvbnRyb2xsZXIsICdj
        dXJyZW50UGF0aCcpOwogIH0KCiAgc2V0KGFwcENvbnRyb2xsZXIsICdjdXJy
        ZW50UGF0aCcsIHBhdGgpOwoKICBpZiAoISgnY3VycmVudFJvdXRlTmFtZScg
        aW4gYXBwQ29udHJvbGxlcikpIHsKICAgIGRlZmluZVByb3BlcnR5KGFwcENv
        bnRyb2xsZXIsICdjdXJyZW50Um91dGVOYW1lJyk7CiAgfQoKICBzZXQoYXBw
        Q29udHJvbGxlciwgJ2N1cnJlbnRSb3V0ZU5hbWUnLCBpbmZvc1tpbmZvcy5s
        ZW5ndGggLSAxXS5uYW1lKTsKfQoKZnVuY3Rpb24gc2NoZWR1bGVMZWdhY3lM
        b2FkaW5nUm91dGVFbnRyeShyb3V0ZXIpIHsKICBjYW5jZWxMZWdhY3lMb2Fk
        aW5nUm91dGVFbnRyeShyb3V0ZXIpOwogIGlmIChyb3V0ZXIucm91dGVyLmFj
        dGl2ZVRyYW5zaXRpb24pIHsKICAgIHJvdXRlci5fbGVnYWN5TG9hZGluZ1N0
        YXRlVGltZXIgPSBFbWJlci5ydW4uc2NoZWR1bGVPbmNlKCdyb3V0ZXJUcmFu
        c2l0aW9ucycsIG51bGwsIGVudGVyTGVnYWN5TG9hZGluZ1JvdXRlLCByb3V0
        ZXIpOwogIH0KfQoKZnVuY3Rpb24gZW50ZXJMZWdhY3lMb2FkaW5nUm91dGUo
        cm91dGVyKSB7CiAgdmFyIGxvYWRpbmdSb3V0ZSA9IHJvdXRlci5yb3V0ZXIu
        Z2V0SGFuZGxlcignbG9hZGluZycpOwogIGlmIChsb2FkaW5nUm91dGUgJiYg
        IWxvYWRpbmdSb3V0ZS5fbG9hZGluZ1N0YXRlQWN0aXZlKSB7CiAgICBpZiAo
        bG9hZGluZ1JvdXRlLmVudGVyKSB7IGxvYWRpbmdSb3V0ZS5lbnRlcigpOyB9
        CiAgICBpZiAobG9hZGluZ1JvdXRlLnNldHVwKSB7IGxvYWRpbmdSb3V0ZS5z
        ZXR1cCgpOyB9CiAgICBsb2FkaW5nUm91dGUuX2xvYWRpbmdTdGF0ZUFjdGl2
        ZSA9IHRydWU7CiAgfQp9CgpmdW5jdGlvbiBjYW5jZWxMZWdhY3lMb2FkaW5n
        Um91dGVFbnRyeShyb3V0ZXIpIHsKICBpZiAocm91dGVyLl9sZWdhY3lMb2Fk
        aW5nU3RhdGVUaW1lcikgewogICAgRW1iZXIucnVuLmNhbmNlbChyb3V0ZXIu
        X2xlZ2FjeUxvYWRpbmdTdGF0ZVRpbWVyKTsKICB9CiAgcm91dGVyLl9sZWdh
        Y3lMb2FkaW5nU3RhdGVUaW1lciA9IG51bGw7Cn0KCmZ1bmN0aW9uIGV4aXRM
        ZWdhY3lMb2FkaW5nUm91dGUocm91dGVyKSB7CgogIGNhbmNlbExlZ2FjeUxv
        YWRpbmdSb3V0ZUVudHJ5KHJvdXRlcik7CgogIHZhciBsb2FkaW5nUm91dGUg
        PSByb3V0ZXIucm91dGVyLmdldEhhbmRsZXIoJ2xvYWRpbmcnKTsKCiAgaWYg
        KGxvYWRpbmdSb3V0ZSAmJiBsb2FkaW5nUm91dGUuX2xvYWRpbmdTdGF0ZUFj
        dGl2ZSkgewogICAgaWYgKGxvYWRpbmdSb3V0ZS5leGl0KSB7IGxvYWRpbmdS
        b3V0ZS5leGl0KCk7IH0KICAgIGxvYWRpbmdSb3V0ZS5fbG9hZGluZ1N0YXRl
        QWN0aXZlID0gZmFsc2U7CiAgfQp9CgpFbWJlci5Sb3V0ZXIucmVvcGVuQ2xh
        c3MoewogIHJvdXRlcjogbnVsbCwKICBtYXA6IGZ1bmN0aW9uKGNhbGxiYWNr
        KSB7CiAgICB2YXIgcm91dGVyID0gdGhpcy5yb3V0ZXI7CiAgICBpZiAoIXJv
        dXRlcikgewogICAgICByb3V0ZXIgPSBuZXcgUm91dGVyKCk7CiAgICAgIHJv
        dXRlci5jYWxsYmFja3MgPSBbXTsKICAgICAgcm91dGVyLnRyaWdnZXJFdmVu
        dCA9IHRyaWdnZXJFdmVudDsKICAgICAgdGhpcy5yZW9wZW5DbGFzcyh7IHJv
        dXRlcjogcm91dGVyIH0pOwogICAgfQoKICAgIGlmIChnZXQodGhpcywgJ25h
        bWVzcGFjZS5MT0dfVFJBTlNJVElPTlNfSU5URVJOQUwnKSkgewogICAgICBy
        b3V0ZXIubG9nID0gRW1iZXIuTG9nZ2VyLmRlYnVnOwogICAgfQoKICAgIHZh
        ciBkc2wgPSBFbWJlci5Sb3V0ZXJEU0wubWFwKGZ1bmN0aW9uKCkgewogICAg
        ICB0aGlzLnJlc291cmNlKCdhcHBsaWNhdGlvbicsIHsgcGF0aDogIi8iIH0s
        IGZ1bmN0aW9uKCkgewogICAgICAgIGZvciAodmFyIGk9MDsgaSA8IHJvdXRl
        ci5jYWxsYmFja3MubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIHJvdXRlci5j
        YWxsYmFja3NbaV0uY2FsbCh0aGlzKTsKICAgICAgICB9CiAgICAgICAgY2Fs
        bGJhY2suY2FsbCh0aGlzKTsKICAgICAgfSk7CiAgICB9KTsKCiAgICByb3V0
        ZXIuY2FsbGJhY2tzLnB1c2goY2FsbGJhY2spOwogICAgcm91dGVyLm1hcChk
        c2wuZ2VuZXJhdGUoKSk7CiAgICByZXR1cm4gcm91dGVyOwogIH0sCgogIF9y
        b3V0ZVBhdGg6IGZ1bmN0aW9uKGhhbmRsZXJJbmZvcykgewogICAgdmFyIHBh
        dGggPSBbXTsKCiAgICBmb3IgKHZhciBpPTEsIGw9aGFuZGxlckluZm9zLmxl
        bmd0aDsgaTxsOyBpKyspIHsKICAgICAgdmFyIG5hbWUgPSBoYW5kbGVySW5m
        b3NbaV0ubmFtZSwKICAgICAgICAgIG5hbWVQYXJ0cyA9IG5hbWUuc3BsaXQo
        Ii4iKTsKCiAgICAgIHBhdGgucHVzaChuYW1lUGFydHNbbmFtZVBhcnRzLmxl
        bmd0aCAtIDFdKTsKICAgIH0KCiAgICByZXR1cm4gcGF0aC5qb2luKCIuIik7
        CiAgfQp9KTsKClJvdXRlci5UcmFuc2l0aW9uLnByb3RvdHlwZS5zZW5kID0g
        Um91dGVyLlRyYW5zaXRpb24ucHJvdG90eXBlLnRyaWdnZXI7CgoKCn0pKCk7
        CgoKCihmdW5jdGlvbigpIHsKLyoqCkBtb2R1bGUgZW1iZXIKQHN1Ym1vZHVs
        ZSBlbWJlci1yb3V0aW5nCiovCgp2YXIgZ2V0ID0gRW1iZXIuZ2V0LCBzZXQg
        PSBFbWJlci5zZXQsCiAgICBnZXRQcm9wZXJ0aWVzID0gRW1iZXIuZ2V0UHJv
        cGVydGllcywKICAgIGNsYXNzaWZ5ID0gRW1iZXIuU3RyaW5nLmNsYXNzaWZ5
        LAogICAgZm10ID0gRW1iZXIuU3RyaW5nLmZtdCwKICAgIGFfZm9yRWFjaCA9
        IEVtYmVyLkVudW1lcmFibGVVdGlscy5mb3JFYWNoLAogICAgYV9yZXBsYWNl
        ID0gRW1iZXIuRW51bWVyYWJsZVV0aWxzLnJlcGxhY2U7Cgp2YXIgZGVmYXVs
        dEFjdGlvbkhhbmRsZXJzID0gewoKICB3aWxsUmVzb2x2ZU1vZGVsOiBmdW5j
        dGlvbih0cmFuc2l0aW9uLCBvcmlnaW5Sb3V0ZSkgewogICAgdGhpcy5yb3V0
        ZXIuX3NjaGVkdWxlTG9hZGluZ0V2ZW50KHRyYW5zaXRpb24sIG9yaWdpblJv
        dXRlKTsKICB9LAoKICBlcnJvcjogZnVuY3Rpb24oZXJyb3IsIHRyYW5zaXRp
        b24sIG9yaWdpblJvdXRlKSB7CiAgICAKICAgICAgaWYgKHRoaXMgIT09IG9y
        aWdpblJvdXRlKSB7CiAgICAgICAgdmFyIGNoaWxkRXJyb3JSb3V0ZU5hbWUg
        PSBmaW5kQ2hpbGRSb3V0ZU5hbWUodGhpcywgJ2Vycm9yJyk7CiAgICAgICAg
        aWYgKGNoaWxkRXJyb3JSb3V0ZU5hbWUpIHsKICAgICAgICAgIHRoaXMuaW50
        ZXJtZWRpYXRlVHJhbnNpdGlvblRvKGNoaWxkRXJyb3JSb3V0ZU5hbWUsIGVy
        cm9yKTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgIH0KICAg
        IAoKICAgIGlmICh0aGlzLnJvdXRlTmFtZSA9PT0gJ2FwcGxpY2F0aW9uJykg
        ewogICAgICBFbWJlci5Mb2dnZXIuYXNzZXJ0KGZhbHNlLCAnRXJyb3Igd2hp
        bGUgbG9hZGluZyByb3V0ZTogJyArIEVtYmVyLmluc3BlY3QoZXJyb3IpKTsK
        ICAgIH0KCiAgICByZXR1cm4gdHJ1ZTsKICB9LAoKICBsb2FkaW5nOiBmdW5j
        dGlvbih0cmFuc2l0aW9uLCBvcmlnaW5Sb3V0ZSkgewogICAgCiAgICAgIGlm
        ICh0aGlzID09PSBvcmlnaW5Sb3V0ZSkgewogICAgICAgIC8vIFRoaXMgaXMg
        dGhlIHJvdXRlIHdpdGggdGhlIGVycm9yOyBqdXN0IGJ1YmJsZQogICAgICAg
        IC8vIHNvIHRoYXQgdGhlIHBhcmVudCByb3V0ZSBjYW4gbG9vayB1cCBpdHMg
        Y2hpbGQgbG9hZGluZyByb3V0ZS4KICAgICAgICByZXR1cm4gdHJ1ZTsKICAg
        ICAgfQoKICAgICAgdmFyIGNoaWxkTG9hZGluZ1JvdXRlTmFtZSA9IGZpbmRD
        aGlsZFJvdXRlTmFtZSh0aGlzLCAnbG9hZGluZycpOwogICAgICBpZiAoY2hp
        bGRMb2FkaW5nUm91dGVOYW1lKSB7CiAgICAgICAgdGhpcy5pbnRlcm1lZGlh
        dGVUcmFuc2l0aW9uVG8oY2hpbGRMb2FkaW5nUm91dGVOYW1lKTsKICAgICAg
        fSBlbHNlIGlmICh0cmFuc2l0aW9uLnBpdm90SGFuZGxlciAhPT0gdGhpcykg
        ewogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9CiAgICAKICB9Cn07Cgov
        KioKICBUaGUgYEVtYmVyLlJvdXRlYCBjbGFzcyBpcyB1c2VkIHRvIGRlZmlu
        ZSBpbmRpdmlkdWFsIHJvdXRlcy4gUmVmZXIgdG8KICB0aGUgW3JvdXRpbmcg
        Z3VpZGVdKGh0dHA6Ly9lbWJlcmpzLmNvbS9ndWlkZXMvcm91dGluZy8pIGZv
        ciBkb2N1bWVudGF0aW9uLgoKICBAY2xhc3MgUm91dGUKICBAbmFtZXNwYWNl
        IEVtYmVyCiAgQGV4dGVuZHMgRW1iZXIuT2JqZWN0CiovCkVtYmVyLlJvdXRl
        ID0gRW1iZXIuT2JqZWN0LmV4dGVuZChFbWJlci5BY3Rpb25IYW5kbGVyLCB7
        CgogIC8qKgogICAgQHByaXZhdGUKCiAgICBAbWV0aG9kIGV4aXQKICAqLwog
        IGV4aXQ6IGZ1bmN0aW9uKCkgewogICAgdGhpcy5kZWFjdGl2YXRlKCk7CiAg
        ICB0aGlzLnRlYXJkb3duVmlld3MoKTsKICB9LAoKICAvKioKICAgIEBwcml2
        YXRlCgogICAgQG1ldGhvZCBlbnRlcgogICovCiAgZW50ZXI6IGZ1bmN0aW9u
        KCkgewogICAgdGhpcy5hY3RpdmF0ZSgpOwogIH0sCgogIC8qKgogICAgVGhl
        IGNvbGxlY3Rpb24gb2YgZnVuY3Rpb25zLCBrZXllZCBieSBuYW1lLCBhdmFp
        bGFibGUgb24gdGhpcyByb3V0ZSBhcwogICAgYWN0aW9uIHRhcmdldHMuCgog
        ICAgVGhlc2UgZnVuY3Rpb25zIHdpbGwgYmUgaW52b2tlZCB3aGVuIGEgbWF0
        Y2hpbmcgYHt7YWN0aW9ufX1gIGlzIHRyaWdnZXJlZAogICAgZnJvbSB3aXRo
        aW4gYSB0ZW1wbGF0ZSBhbmQgdGhlIGFwcGxpY2F0aW9uJ3MgY3VycmVudCBy
        b3V0ZSBpcyB0aGlzIHJvdXRlLgoKICAgIEFjdGlvbnMgY2FuIGFsc28gYmUg
        aW52b2tlZCBmcm9tIG90aGVyIHBhcnRzIG9mIHlvdXIgYXBwbGljYXRpb24g
        dmlhIGBSb3V0ZSNzZW5kYAogICAgb3IgYENvbnRyb2xsZXIjc2VuZGAuCgog
        ICAgVGhlIGBhY3Rpb25zYCBoYXNoIHdpbGwgaW5oZXJpdCBhY3Rpb24gaGFu
        ZGxlcnMgZnJvbQogICAgdGhlIGBhY3Rpb25zYCBoYXNoIGRlZmluZWQgb24g
        ZXh0ZW5kZWQgUm91dGUgcGFyZW50IGNsYXNzZXMKICAgIG9yIG1peGlucyBy
        YXRoZXIgdGhhbiBqdXN0IHJlcGxhY2UgdGhlIGVudGlyZSBoYXNoLCBlLmcu
        OgoKICAgIGBgYGpzCiAgICBBcHAuQ2FuRGlzcGxheUJhbm5lciA9IEVtYmVy
        Lk1peGluLmNyZWF0ZSh7CiAgICAgIGFjdGlvbnM6IHsKICAgICAgICBkaXNw
        bGF5QmFubmVyOiBmdW5jdGlvbihtc2cpIHsKICAgICAgICAgIC8vIC4uLgog
        ICAgICAgIH0KICAgICAgfQogICAgfSk7CgogICAgQXBwLldlbGNvbWVSb3V0
        ZSA9IEVtYmVyLlJvdXRlLmV4dGVuZChBcHAuQ2FuRGlzcGxheUJhbm5lciwg
        ewogICAgICBhY3Rpb25zOiB7CiAgICAgICAgcGxheU11c2ljOiBmdW5jdGlv
        bigpIHsKICAgICAgICAgIC8vIC4uLgogICAgICAgIH0KICAgICAgfQogICAg
        fSk7CgogICAgLy8gYFdlbGNvbWVSb3V0ZWAsIHdoZW4gYWN0aXZlLCB3aWxs
        IGJlIGFibGUgdG8gcmVzcG9uZAogICAgLy8gdG8gYm90aCBhY3Rpb25zLCBz
        aW5jZSB0aGUgYWN0aW9ucyBoYXNoIGlzIG1lcmdlZCByYXRoZXIKICAgIC8v
        IHRoZW4gcmVwbGFjZWQgd2hlbiBleHRlbmRpbmcgbWl4aW5zIC8gcGFyZW50
        IGNsYXNzZXMuCiAgICB0aGlzLnNlbmQoJ2Rpc3BsYXlCYW5uZXInKTsKICAg
        IHRoaXMuc2VuZCgncGxheU11c2ljJyk7CiAgICBgYGAKCiAgICBXaXRoaW4g
        YSByb3V0ZSdzIGFjdGlvbiBoYW5kbGVyLCB0aGUgdmFsdWUgb2YgdGhlIGB0
        aGlzYCBjb250ZXh0CiAgICBpcyB0aGUgUm91dGUgb2JqZWN0OgoKICAgIGBg
        YGpzCiAgICBBcHAuU29uZ1JvdXRlID0gRW1iZXIuUm91dGUuZXh0ZW5kKHsK
        ICAgICAgYWN0aW9uczogewogICAgICAgIG15QWN0aW9uOiBmdW5jdGlvbigp
        IHsKICAgICAgICAgIHRoaXMuY29udHJvbGxlckZvcigic29uZyIpOwogICAg
        ICAgICAgdGhpcy50cmFuc2l0aW9uVG8oIm90aGVyLnJvdXRlIik7CiAgICAg
        ICAgICAuLi4KICAgICAgICB9CiAgICAgIH0KICAgIH0pOwogICAgYGBgCgog
        ICAgSXQgaXMgYWxzbyBwb3NzaWJsZSB0byBjYWxsIGB0aGlzLl9zdXBlcigp
        YCBmcm9tIHdpdGhpbiBhbgogICAgYWN0aW9uIGhhbmRsZXIgaWYgaXQgb3Zl
        cnJpZGVzIGEgaGFuZGxlciBkZWZpbmVkIG9uIGEgcGFyZW50CiAgICBjbGFz
        cyBvciBtaXhpbjoKCiAgICBUYWtlIGZvciBleGFtcGxlIHRoZSBmb2xsb3dp
        bmcgcm91dGVzOgoKICAgIGBgYGpzCiAgICBBcHAuRGVidWdSb3V0ZSA9IEVt
        YmVyLk1peGluLmNyZWF0ZSh7CiAgICAgIGFjdGlvbnM6IHsKICAgICAgICBk
        ZWJ1Z1JvdXRlSW5mb3JtYXRpb246IGZ1bmN0aW9uKCkgewogICAgICAgICAg
        Y29uc29sZS5kZWJ1ZygidHJvbG9sbyIpOwogICAgICAgIH0KICAgICAgfQog
        ICAgfSk7CgogICAgQXBwLkFubm95aW5nRGVidWdSb3V0ZSA9IEVtYmVyLlJv
        dXRlLmV4dGVuZChBcHAuRGVidWdSb3V0ZSwgewogICAgICBhY3Rpb25zOiB7
        CiAgICAgICAgZGVidWdSb3V0ZUluZm9ybWF0aW9uOiBmdW5jdGlvbigpIHsK
        ICAgICAgICAgIC8vIGFsc28gY2FsbCB0aGUgZGVidWdSb3V0ZUluZm9ybWF0
        aW9uIG9mIG1peGVkIGluIEFwcC5EZWJ1Z1JvdXRlCiAgICAgICAgICB0aGlz
        Ll9zdXBlcigpOwoKICAgICAgICAgIC8vIHNob3cgYWRkaXRpb25hbCBhbm5v
        eWFuY2UKICAgICAgICAgIHdpbmRvdy5hbGVydCguLi4pOwogICAgICAgIH0K
        ICAgICAgfQogICAgfSk7CiAgICBgYGAKCiAgICAjIyBCdWJibGluZwoKICAg
        IEJ5IGRlZmF1bHQsIGFuIGFjdGlvbiB3aWxsIHN0b3AgYnViYmxpbmcgb25j
        ZSBhIGhhbmRsZXIgZGVmaW5lZAogICAgb24gdGhlIGBhY3Rpb25zYCBoYXNo
        IGhhbmRsZXMgaXQuIFRvIGNvbnRpbnVlIGJ1YmJsaW5nIHRoZSBhY3Rpb24s
        CiAgICB5b3UgbXVzdCByZXR1cm4gYHRydWVgIGZyb20gdGhlIGhhbmRsZXI6
        CgogICAgYGBganMKICAgIEFwcC5Sb3V0ZXIubWFwKGZ1bmN0aW9uKCkgewog
        ICAgICB0aGlzLnJlc291cmNlKCJhbGJ1bSIsIGZ1bmN0aW9uKCkgewogICAg
        ICAgIHRoaXMucm91dGUoInNvbmciKTsKICAgICAgfSk7CiAgICB9KTsKCiAg
        ICBBcHAuQWxidW1Sb3V0ZSA9IEVtYmVyLlJvdXRlLmV4dGVuZCh7CiAgICAg
        IGFjdGlvbnM6IHsKICAgICAgICBzdGFydFBsYXlpbmc6IGZ1bmN0aW9uKCkg
        ewogICAgICAgIH0KICAgICAgfQogICAgfSk7CgogICAgQXBwLkFsYnVtU29u
        Z1JvdXRlID0gRW1iZXIuUm91dGUuZXh0ZW5kKHsKICAgICAgYWN0aW9uczog
        ewogICAgICAgIHN0YXJ0UGxheWluZzogZnVuY3Rpb24oKSB7CiAgICAgICAg
        ICAvLyAuLi4KCiAgICAgICAgICBpZiAoYWN0aW9uU2hvdWxkQWxzb0JlVHJp
        Z2dlcmVkT25QYXJlbnRSb3V0ZSkgewogICAgICAgICAgICByZXR1cm4gdHJ1
        ZTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0pOwogICAg
        YGBgCgogICAgIyMgQnVpbHQtaW4gYWN0aW9ucwoKICAgIFRoZXJlIGFyZSBh
        IGZldyBidWlsdC1pbiBhY3Rpb25zIHBlcnRhaW5pbmcgdG8gdHJhbnNpdGlv
        bnMgdGhhdCB5b3UKICAgIGNhbiB1c2UgdG8gY3VzdG9taXplIHRyYW5zaXRp
        b24gYmVoYXZpb3I6IGB3aWxsVHJhbnNpdGlvbmAgYW5kCiAgICBgZXJyb3Jg
        LgoKICAgICMjIyBgd2lsbFRyYW5zaXRpb25gCgogICAgVGhlIGB3aWxsVHJh
        bnNpdGlvbmAgYWN0aW9uIGlzIGZpcmVkIGF0IHRoZSBiZWdpbm5pbmcgb2Yg
        YW55CiAgICBhdHRlbXB0ZWQgdHJhbnNpdGlvbiB3aXRoIGEgYFRyYW5zaXRp
        b25gIG9iamVjdCBhcyB0aGUgc29sZQogICAgYXJndW1lbnQuIFRoaXMgYWN0
        aW9uIGNhbiBiZSB1c2VkIGZvciBhYm9ydGluZywgcmVkaXJlY3RpbmcsCiAg
        ICBvciBkZWNvcmF0aW5nIHRoZSB0cmFuc2l0aW9uIGZyb20gdGhlIGN1cnJl
        bnRseSBhY3RpdmUgcm91dGVzLgoKICAgIEEgZ29vZCBleGFtcGxlIGlzIHBy
        ZXZlbnRpbmcgbmF2aWdhdGlvbiB3aGVuIGEgZm9ybSBpcwogICAgaGFsZi1m
        aWxsZWQgb3V0OgoKICAgIGBgYGpzCiAgICBBcHAuQ29udGFjdEZvcm1Sb3V0
        ZSA9IEVtYmVyLlJvdXRlLmV4dGVuZCh7CiAgICAgIGFjdGlvbnM6IHsKICAg
        ICAgICB3aWxsVHJhbnNpdGlvbjogZnVuY3Rpb24odHJhbnNpdGlvbikgewog
        ICAgICAgICAgaWYgKHRoaXMuY29udHJvbGxlci5nZXQoJ3VzZXJIYXNFbnRl
        cmVkRGF0YScpKSB7CiAgICAgICAgICAgIHRoaXMuY29udHJvbGxlci5kaXNw
        bGF5TmF2aWdhdGlvbkNvbmZpcm0oKTsKICAgICAgICAgICAgdHJhbnNpdGlv
        bi5hYm9ydCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAg
        fSk7CiAgICBgYGAKCiAgICBZb3UgY2FuIGFsc28gcmVkaXJlY3QgZWxzZXdo
        ZXJlIGJ5IGNhbGxpbmcKICAgIGB0aGlzLnRyYW5zaXRpb25UbygnZWxzZXdo
        ZXJlJylgIGZyb20gd2l0aGluIGB3aWxsVHJhbnNpdGlvbmAuCiAgICBOb3Rl
        IHRoYXQgYHdpbGxUcmFuc2l0aW9uYCB3aWxsIG5vdCBiZSBmaXJlZCBmb3Ig
        dGhlCiAgICByZWRpcmVjdGluZyBgdHJhbnNpdGlvblRvYCwgc2luY2UgYHdp
        bGxUcmFuc2l0aW9uYCBkb2Vzbid0CiAgICBmaXJlIHdoZW4gdGhlcmUgaXMg
        YWxyZWFkeSBhIHRyYW5zaXRpb24gdW5kZXJ3YXkuIElmIHlvdSB3YW50CiAg
        ICBzdWJzZXF1ZW50IGB3aWxsVHJhbnNpdGlvbmAgYWN0aW9ucyB0byBmaXJl
        IGZvciB0aGUgcmVkaXJlY3RpbmcKICAgIHRyYW5zaXRpb24sIHlvdSBtdXN0
        IGZpcnN0IGV4cGxpY2l0bHkgY2FsbAogICAgYHRyYW5zaXRpb24uYWJvcnQo
        KWAuCgogICAgIyMjIGBlcnJvcmAKCiAgICBXaGVuIGF0dGVtcHRpbmcgdG8g
        dHJhbnNpdGlvbiBpbnRvIGEgcm91dGUsIGFueSBvZiB0aGUgaG9va3MKICAg
        IG1heSB0aHJvdyBhbiBlcnJvciwgb3IgcmV0dXJuIGEgcHJvbWlzZSB0aGF0
        IHJlamVjdHMsIGF0IHdoaWNoCiAgICBwb2ludCBhbiBgZXJyb3JgIGFjdGlv
        biB3aWxsIGJlIGZpcmVkIG9uIHRoZSBwYXJ0aWFsbHktZW50ZXJlZAogICAg
        cm91dGVzLCBhbGxvd2luZyBmb3IgcGVyLXJvdXRlIGVycm9yIGhhbmRsaW5n
        IGxvZ2ljLCBvciBzaGFyZWQKICAgIGVycm9yIGhhbmRsaW5nIGxvZ2ljIGRl
        ZmluZWQgb24gYSBwYXJlbnQgcm91dGUuCgogICAgSGVyZSBpcyBhbiBleGFt
        cGxlIG9mIGFuIGVycm9yIGhhbmRsZXIgdGhhdCB3aWxsIGJlIGludm9rZWQK
        ICAgIGZvciByZWplY3RlZCBwcm9taXNlcyAvIHRocm93biBlcnJvcnMgZnJv
        bSB0aGUgdmFyaW91cyBob29rcwogICAgb24gdGhlIHJvdXRlLCBhcyB3ZWxs
        IGFzIGFueSB1bmhhbmRsZWQgZXJyb3JzIGZyb20gY2hpbGQKICAgIHJvdXRl
        czoKCiAgICBgYGBqcwogICAgQXBwLkFkbWluUm91dGUgPSBFbWJlci5Sb3V0
        ZS5leHRlbmQoewogICAgICBiZWZvcmVNb2RlbDogZnVuY3Rpb24oKSB7CiAg
        ICAgICAgdGhyb3cgImJhZCB0aGluZ3MhIjsKICAgICAgICAvLyAuLi5vciwg
        ZXF1aXZhbGVudGx5OgogICAgICAgIHJldHVybiBFbWJlci5SU1ZQLnJlamVj
        dCgiYmFkIHRoaW5ncyEiKTsKICAgICAgfSwKCiAgICAgIGFjdGlvbnM6IHsK
        ICAgICAgICBlcnJvcjogZnVuY3Rpb24oZXJyb3IsIHRyYW5zaXRpb24pIHsK
        ICAgICAgICAgIC8vIEFzc3VtaW5nIHdlIGdvdCBoZXJlIGR1ZSB0byB0aGUg
        ZXJyb3IgaW4gYGJlZm9yZU1vZGVsYCwKICAgICAgICAgIC8vIHdlIGNhbiBl
        eHBlY3QgdGhhdCBlcnJvciA9PT0gImJhZCB0aGluZ3MhIiwKICAgICAgICAg
        IC8vIGJ1dCBhIHByb21pc2UgbW9kZWwgcmVqZWN0aW5nIHdvdWxkIGFsc28K
        ICAgICAgICAgIC8vIGNhbGwgdGhpcyBob29rLCBhcyB3b3VsZCBhbnkgZXJy
        b3JzIGVuY291bnRlcmVkCiAgICAgICAgICAvLyBpbiBgYWZ0ZXJNb2RlbGAu
        CgogICAgICAgICAgLy8gVGhlIGBlcnJvcmAgaG9vayBpcyBhbHNvIHByb3Zp
        ZGVkIHRoZSBmYWlsZWQKICAgICAgICAgIC8vIGB0cmFuc2l0aW9uYCwgd2hp
        Y2ggY2FuIGJlIHN0b3JlZCBhbmQgbGF0ZXIKICAgICAgICAgIC8vIGAucmV0
        cnkoKWBkIGlmIGRlc2lyZWQuCgogICAgICAgICAgdGhpcy50cmFuc2l0aW9u
        VG8oJ2xvZ2luJyk7CiAgICAgICAgfQogICAgICB9CiAgICB9KTsKICAgIGBg
        YAoKICAgIGBlcnJvcmAgYWN0aW9ucyB0aGF0IGJ1YmJsZSB1cCBhbGwgdGhl
        IHdheSB0byBgQXBwbGljYXRpb25Sb3V0ZWAKICAgIHdpbGwgZmlyZSBhIGRl
        ZmF1bHQgZXJyb3IgaGFuZGxlciB0aGF0IGxvZ3MgdGhlIGVycm9yLiBZb3Ug
        Y2FuCiAgICBzcGVjaWZ5IHlvdXIgb3duIGdsb2JhbCBkZWZhdWx0IGVycm9y
        IGhhbmRsZXIgYnkgb3ZlcnJpZGluZyB0aGUKICAgIGBlcnJvcmAgaGFuZGxl
        ciBvbiBgQXBwbGljYXRpb25Sb3V0ZWA6CgogICAgYGBganMKICAgIEFwcC5B
        cHBsaWNhdGlvblJvdXRlID0gRW1iZXIuUm91dGUuZXh0ZW5kKHsKICAgICAg
        YWN0aW9uczogewogICAgICAgIGVycm9yOiBmdW5jdGlvbihlcnJvciwgdHJh
        bnNpdGlvbikgewogICAgICAgICAgdGhpcy5jb250cm9sbGVyRm9yKCdiYW5u
        ZXInKS5kaXNwbGF5RXJyb3IoZXJyb3IubWVzc2FnZSk7CiAgICAgICAgfQog
        ICAgICB9CiAgICB9KTsKICAgIGBgYAoKICAgIEBzZWUge0VtYmVyLlJvdXRl
        I3NlbmR9CiAgICBAc2VlIHtIYW5kbGViYXJzLmhlbHBlcnMuYWN0aW9ufQoK
        ICAgIEBwcm9wZXJ0eSBhY3Rpb25zCiAgICBAdHlwZSBIYXNoCiAgICBAZGVm
        YXVsdCBudWxsCiAgKi8KICBhY3Rpb25zOiBudWxsLAoKICBfYWN0aW9uczog
        ZGVmYXVsdEFjdGlvbkhhbmRsZXJzLAoKICAvKioKICAgIEBkZXByZWNhdGVk
        CgogICAgUGxlYXNlIHVzZSBgYWN0aW9uc2AgaW5zdGVhZC4KICAgIEBtZXRo
        b2QgZXZlbnRzCiAgKi8KICBldmVudHM6IGRlZmF1bHRBY3Rpb25IYW5kbGVy
        cywKCiAgbWVyZ2VkUHJvcGVydGllczogWydldmVudHMnXSwKCiAgLyoqCiAg
        ICBUaGlzIGhvb2sgaXMgZXhlY3V0ZWQgd2hlbiB0aGUgcm91dGVyIGNvbXBs
        ZXRlbHkgZXhpdHMgdGhpcyByb3V0ZS4gSXQgaXMKICAgIG5vdCBleGVjdXRl
        ZCB3aGVuIHRoZSBtb2RlbCBmb3IgdGhlIHJvdXRlIGNoYW5nZXMuCgogICAg
        QG1ldGhvZCBkZWFjdGl2YXRlCiAgKi8KICBkZWFjdGl2YXRlOiBFbWJlci5L
        LAoKICAvKioKICAgIFRoaXMgaG9vayBpcyBleGVjdXRlZCB3aGVuIHRoZSBy
        b3V0ZXIgZW50ZXJzIHRoZSByb3V0ZSBmb3IgdGhlIGZpcnN0IHRpbWUuCiAg
        ICBJdCBpcyBub3QgZXhlY3V0ZWQgd2hlbiB0aGUgbW9kZWwgZm9yIHRoZSBy
        b3V0ZSBjaGFuZ2VzLgoKICAgIEBtZXRob2QgYWN0aXZhdGUKICAqLwogIGFj
        dGl2YXRlOiBFbWJlci5LLAoKICAvKioKICAgIFRyYW5zaXRpb24gaW50byBh
        bm90aGVyIHJvdXRlLiBPcHRpb25hbGx5IHN1cHBseSBtb2RlbChzKSBmb3Ig
        dGhlCiAgICByb3V0ZSBpbiBxdWVzdGlvbi4gSWYgbXVsdGlwbGUgbW9kZWxz
        IGFyZSBzdXBwbGllZCB0aGV5IHdpbGwgYmUgYXBwbGllZAogICAgbGFzdCB0
        byBmaXJzdCByZWN1cnNpdmVseSB1cCB0aGUgcmVzb3VyY2UgdHJlZSAoc2Vl
        IE11bHRpcGxlIE1vZGVscyBFeGFtcGxlCiAgICBiZWxvdykuIFRoZSBtb2Rl
        bChzKSB3aWxsIGJlIHNlcmlhbGl6ZWQgaW50byB0aGUgVVJMIHVzaW5nIHRo
        ZSBhcHByb3ByaWF0ZQogICAgcm91dGUncyBgc2VyaWFsaXplYCBob29rLiBT
        ZWUgYWxzbyAncmVwbGFjZVdpdGgnLgoKICAgIFNpbXBsZSBUcmFuc2l0aW9u
        IEV4YW1wbGUKCiAgICBgYGBqYXZhc2NyaXB0CiAgICBBcHAuUm91dGVyLm1h
        cChmdW5jdGlvbigpIHsKICAgICAgdGhpcy5yb3V0ZSgiaW5kZXgiKTsKICAg
        ICAgdGhpcy5yb3V0ZSgic2VjcmV0Iik7CiAgICAgIHRoaXMucm91dGUoImZv
        dXJPaEZvdXIiLCB7IHBhdGg6ICIqOiJ9KTsKICAgIH0pOwoKICAgIEFwcC5J
        bmRleFJvdXRlID0gRW1iZXIuUm91dGUuZXh0ZW5kKHsKICAgICAgYWN0aW9u
        czogewogICAgICAgIG1vdmVUb1NlY3JldDogZnVuY3Rpb24oY29udGV4dCl7
        CiAgICAgICAgICBpZiAoYXV0aG9yaXplZCgpKXsKICAgICAgICAgICAgdGhp
        cy50cmFuc2l0aW9uVG8oJ3NlY3JldCcsIGNvbnRleHQpOwogICAgICAgICAg
        fQogICAgICAgICAgICB0aGlzLnRyYW5zaXRpb25UbygnZm91ck9oRm91cicp
        OwogICAgICAgIH0KICAgICAgfQogICAgfSk7CiAgICBgYGAKCiAgICBNdWx0
        aXBsZSBNb2RlbHMgRXhhbXBsZQoKICAgIGBgYGphdmFzY3JpcHQKICAgIEFw
        cC5Sb3V0ZXIubWFwKGZ1bmN0aW9uKCkgewogICAgICB0aGlzLnJvdXRlKCJp
        bmRleCIpOwogICAgICB0aGlzLnJlc291cmNlKCdicmVha2Zhc3QnLCB7cGF0
        aDonOmJyZWFrZmFzdElkJ30sIGZ1bmN0aW9uKCl7CiAgICAgICAgdGhpcy5y
        ZXNvdXJjZSgnY2VyZWFsJywge3BhdGg6ICc6Y2VyZWFsSWQnfSk7CiAgICAg
        IH0pOwogICAgfSk7CgogICAgQXBwLkluZGV4Um91dGUgPSBFbWJlci5Sb3V0
        ZS5leHRlbmQoewogICAgICBhY3Rpb25zOiB7CiAgICAgICAgbW92ZVRvQ2hv
        Y29sYXRlQ2VyZWFsOiBmdW5jdGlvbigpewogICAgICAgICAgdmFyIGNlcmVh
        bCA9IHsgY2VyZWFsSWQ6ICJDaG9jb2xhdGVZdW1taW5lc3MifSwKICAgICAg
        ICAgICAgICBicmVha2Zhc3QgPSB7YnJlYWtmYXN0SWQ6ICJDZXJlYWxBbmRN
        aWxrIn07CgogICAgICAgICAgdGhpcy50cmFuc2l0aW9uVG8oJ2NlcmVhbCcs
        IGJyZWFrZmFzdCwgY2VyZWFsKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0p
        OwoKICAgIEBtZXRob2QgdHJhbnNpdGlvblRvCiAgICBAcGFyYW0ge1N0cmlu
        Z30gbmFtZSB0aGUgbmFtZSBvZiB0aGUgcm91dGUKICAgIEBwYXJhbSB7Li4u
        T2JqZWN0fSBtb2RlbHMgdGhlIG1vZGVsKHMpIHRvIGJlIHVzZWQgd2hpbGUg
        dHJhbnNpdGlvbmluZwogICAgdG8gdGhlIHJvdXRlLgogICovCiAgdHJhbnNp
        dGlvblRvOiBmdW5jdGlvbihuYW1lLCBjb250ZXh0KSB7CiAgICB2YXIgcm91
        dGVyID0gdGhpcy5yb3V0ZXI7CiAgICByZXR1cm4gcm91dGVyLnRyYW5zaXRp
        b25Uby5hcHBseShyb3V0ZXIsIGFyZ3VtZW50cyk7CiAgfSwKCiAgLyoqCiAg
        ICBQZXJmb3JtIGEgc3luY2hyb25vdXMgdHJhbnNpdGlvbiBpbnRvIGFub3Ro
        ZXIgcm91dGUgd2l0aCBvdXQgYXR0ZW1wdGluZwogICAgdG8gcmVzb2x2ZSBw
        cm9taXNlcywgdXBkYXRlIHRoZSBVUkwsIG9yIGFib3J0IGFueSBjdXJyZW50
        bHkgYWN0aXZlCiAgICBhc3luY2hyb25vdXMgdHJhbnNpdGlvbnMgKGkuZS4g
        cmVndWxhciB0cmFuc2l0aW9ucyBjYXVzZWQgYnkKICAgIGB0cmFuc2l0aW9u
        VG9gIG9yIFVSTCBjaGFuZ2VzKS4KCiAgICBUaGlzIG1ldGhvZCBpcyBoYW5k
        eSBmb3IgcGVyZm9ybWluZyBpbnRlcm1lZGlhdGUgdHJhbnNpdGlvbnMgb24g
        dGhlCiAgICB3YXkgdG8gYSBmaW5hbCBkZXN0aW5hdGlvbiByb3V0ZSwgYW5k
        IGlzIGNhbGxlZCBpbnRlcm5hbGx5IGJ5IHRoZQogICAgZGVmYXVsdCBpbXBs
        ZW1lbnRhdGlvbnMgb2YgdGhlIGBlcnJvcmAgYW5kIGBsb2FkaW5nYCBoYW5k
        bGVycy4KCiAgICBAbWV0aG9kIGludGVybWVkaWF0ZVRyYW5zaXRpb25Ubwog
        ICAgQHBhcmFtIHtTdHJpbmd9IG5hbWUgdGhlIG5hbWUgb2YgdGhlIHJvdXRl
        CiAgICBAcGFyYW0gey4uLk9iamVjdH0gbW9kZWxzIHRoZSBtb2RlbChzKSB0
        byBiZSB1c2VkIHdoaWxlIHRyYW5zaXRpb25pbmcKICAgIHRvIHRoZSByb3V0
        ZS4KICAgKi8KICBpbnRlcm1lZGlhdGVUcmFuc2l0aW9uVG86IGZ1bmN0aW9u
        KCkgewogICAgdmFyIHJvdXRlciA9IHRoaXMucm91dGVyOwogICAgcm91dGVy
        LmludGVybWVkaWF0ZVRyYW5zaXRpb25Uby5hcHBseShyb3V0ZXIsIGFyZ3Vt
        ZW50cyk7CiAgfSwKCiAgLyoqCiAgICBUcmFuc2l0aW9uIGludG8gYW5vdGhl
        ciByb3V0ZSB3aGlsZSByZXBsYWNpbmcgdGhlIGN1cnJlbnQgVVJMLCBpZiBw
        b3NzaWJsZS4KICAgIFRoaXMgd2lsbCByZXBsYWNlIHRoZSBjdXJyZW50IGhp
        c3RvcnkgZW50cnkgaW5zdGVhZCBvZiBhZGRpbmcgYSBuZXcgb25lLgogICAg
        QmVzaWRlIHRoYXQsIGl0IGlzIGlkZW50aWNhbCB0byBgdHJhbnNpdGlvblRv
        YCBpbiBhbGwgb3RoZXIgcmVzcGVjdHMuIFNlZQogICAgJ3RyYW5zaXRpb25U
        bycgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb24gcmVnYXJkaW5nIG11bHRp
        cGxlIG1vZGVscy4KCiAgICBFeGFtcGxlCgogICAgYGBgamF2YXNjcmlwdAog
        ICAgQXBwLlJvdXRlci5tYXAoZnVuY3Rpb24oKSB7CiAgICAgIHRoaXMucm91
        dGUoImluZGV4Iik7CiAgICAgIHRoaXMucm91dGUoInNlY3JldCIpOwogICAg
        fSk7CgogICAgQXBwLlNlY3JldFJvdXRlID0gRW1iZXIuUm91dGUuZXh0ZW5k
        KHsKICAgICAgYWZ0ZXJNb2RlbDogZnVuY3Rpb24oKSB7CiAgICAgICAgaWYg
        KCFhdXRob3JpemVkKCkpewogICAgICAgICAgdGhpcy5yZXBsYWNlV2l0aCgn
        aW5kZXgnKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0pOwogICAgYGBgCgog
        ICAgQG1ldGhvZCByZXBsYWNlV2l0aAogICAgQHBhcmFtIHtTdHJpbmd9IG5h
        bWUgdGhlIG5hbWUgb2YgdGhlIHJvdXRlCiAgICBAcGFyYW0gey4uLk9iamVj
        dH0gbW9kZWxzIHRoZSBtb2RlbChzKSB0byBiZSB1c2VkIHdoaWxlIHRyYW5z
        aXRpb25pbmcKICAgIHRvIHRoZSByb3V0ZS4KICAqLwogIHJlcGxhY2VXaXRo
        OiBmdW5jdGlvbigpIHsKICAgIHZhciByb3V0ZXIgPSB0aGlzLnJvdXRlcjsK
        ICAgIHJldHVybiByb3V0ZXIucmVwbGFjZVdpdGguYXBwbHkocm91dGVyLCBh
        cmd1bWVudHMpOwogIH0sCgogIC8qKgogICAgU2VuZHMgYW4gYWN0aW9uIHRv
        IHRoZSByb3V0ZXIsIHdoaWNoIHdpbGwgZGVsZWdhdGUgaXQgdG8gdGhlIGN1
        cnJlbnRseQogICAgYWN0aXZlIHJvdXRlIGhpZXJhcmNoeSBwZXIgdGhlIGJ1
        YmJsaW5nIHJ1bGVzIGV4cGxhaW5lZCB1bmRlciBgYWN0aW9uc2AuCgogICAg
        RXhhbXBsZQoKICAgIGBgYGphdmFzY3JpcHQKICAgIEFwcC5Sb3V0ZXIubWFw
        KGZ1bmN0aW9uKCkgewogICAgICB0aGlzLnJvdXRlKCJpbmRleCIpOwogICAg
        fSk7CgogICAgQXBwLkFwcGxpY2F0aW9uUm91dGUgPSBFbWJlci5Sb3V0ZS5l
        eHRlbmQoewogICAgICBhY3Rpb25zOiB7CiAgICAgICAgdHJhY2s6IGZ1bmN0
        aW9uKGFyZykgewogICAgICAgICAgY29uc29sZS5sb2coYXJnLCAnd2FzIGNs
        aWNrZWQnKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0pOwoKICAgIEFwcC5J
        bmRleFJvdXRlID0gRW1iZXIuUm91dGUuZXh0ZW5kKHsKICAgICAgYWN0aW9u
        czogewogICAgICAgIHRyYWNrSWZEZWJ1ZzogZnVuY3Rpb24oYXJnKSB7CiAg
        ICAgICAgICBpZiAoZGVidWcpIHsKICAgICAgICAgICAgdGhpcy5zZW5kKCd0
        cmFjaycsIGFyZyk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAg
        ICB9KTsKICAgIGBgYAoKICAgIEBtZXRob2Qgc2VuZAogICAgQHBhcmFtIHtT
        dHJpbmd9IG5hbWUgdGhlIG5hbWUgb2YgdGhlIGFjdGlvbiB0byB0cmlnZ2Vy
        CiAgICBAcGFyYW0gey4uLip9IGFyZ3MKICAqLwogIHNlbmQ6IGZ1bmN0aW9u
        KCkgewogICAgcmV0dXJuIHRoaXMucm91dGVyLnNlbmQuYXBwbHkodGhpcy5y
        b3V0ZXIsIGFyZ3VtZW50cyk7CiAgfSwKCiAgLyoqCiAgICBAcHJpdmF0ZQoK
        ICAgIFRoaXMgaG9vayBpcyB0aGUgZW50cnkgcG9pbnQgZm9yIHJvdXRlci5q
        cwoKICAgIEBtZXRob2Qgc2V0dXAKICAqLwogIHNldHVwOiBmdW5jdGlvbihj
        b250ZXh0LCBxdWVyeVBhcmFtcykgewogICAgdmFyIGNvbnRyb2xsZXJOYW1l
        ID0gdGhpcy5jb250cm9sbGVyTmFtZSB8fCB0aGlzLnJvdXRlTmFtZSwKICAg
        ICAgICBjb250cm9sbGVyID0gdGhpcy5jb250cm9sbGVyRm9yKGNvbnRyb2xs
        ZXJOYW1lLCB0cnVlKTsKICAgIGlmICghY29udHJvbGxlcikgewogICAgICBj
        b250cm9sbGVyID0gIHRoaXMuZ2VuZXJhdGVDb250cm9sbGVyKGNvbnRyb2xs
        ZXJOYW1lLCBjb250ZXh0KTsKICAgIH0KCiAgICAvLyBBc3NpZ24gdGhlIHJv
        dXRlJ3MgY29udHJvbGxlciBzbyB0aGF0IGl0IGNhbiBtb3JlIGVhc2lseSBi
        ZQogICAgLy8gcmVmZXJlbmNlZCBpbiBhY3Rpb24gaGFuZGxlcnMKICAgIHRo
        aXMuY29udHJvbGxlciA9IGNvbnRyb2xsZXI7CgogICAgdmFyIGFyZ3MgPSBb
        Y29udHJvbGxlciwgY29udGV4dF07CgogICAgCiAgICBpZiAodGhpcy5zZXR1
        cENvbnRyb2xsZXJzKSB7CiAgICAgIEVtYmVyLmRlcHJlY2F0ZSgiRW1iZXIu
        Um91dGUuc2V0dXBDb250cm9sbGVycyBpcyBkZXByZWNhdGVkLiBQbGVhc2Ug
        dXNlIEVtYmVyLlJvdXRlLnNldHVwQ29udHJvbGxlcihjb250cm9sbGVyLCBt
        b2RlbCkgaW5zdGVhZC4iKTsKICAgICAgdGhpcy5zZXR1cENvbnRyb2xsZXJz
        KGNvbnRyb2xsZXIsIGNvbnRleHQpOwogICAgfSBlbHNlIHsKICAgICAgdGhp
        cy5zZXR1cENvbnRyb2xsZXIuYXBwbHkodGhpcywgYXJncyk7CiAgICB9Cgog
        ICAgaWYgKHRoaXMucmVuZGVyVGVtcGxhdGVzKSB7CiAgICAgIEVtYmVyLmRl
        cHJlY2F0ZSgiRW1iZXIuUm91dGUucmVuZGVyVGVtcGxhdGVzIGlzIGRlcHJl
        Y2F0ZWQuIFBsZWFzZSB1c2UgRW1iZXIuUm91dGUucmVuZGVyVGVtcGxhdGUo
        Y29udHJvbGxlciwgbW9kZWwpIGluc3RlYWQuIik7CiAgICAgIHRoaXMucmVu
        ZGVyVGVtcGxhdGVzKGNvbnRleHQpOwogICAgfSBlbHNlIHsKICAgICAgdGhp
        cy5yZW5kZXJUZW1wbGF0ZS5hcHBseSh0aGlzLCBhcmdzKTsKICAgIH0KICB9
        LAoKICAvKioKICAgIEEgaG9vayB5b3UgY2FuIGltcGxlbWVudCB0byBvcHRp
        b25hbGx5IHJlZGlyZWN0IHRvIGFub3RoZXIgcm91dGUuCgogICAgSWYgeW91
        IGNhbGwgYHRoaXMudHJhbnNpdGlvblRvYCBmcm9tIGluc2lkZSBvZiB0aGlz
        IGhvb2ssIHRoaXMgcm91dGUKICAgIHdpbGwgbm90IGJlIGVudGVyZWQgaW4g
        ZmF2b3Igb2YgdGhlIG90aGVyIGhvb2suCgogICAgTm90ZSB0aGF0IHRoaXMg
        aG9vayBpcyBjYWxsZWQgYnkgdGhlIGRlZmF1bHQgaW1wbGVtZW50YXRpb24g
        b2YKICAgIGBhZnRlck1vZGVsYCwgc28gaWYgeW91IG92ZXJyaWRlIGBhZnRl
        ck1vZGVsYCwgeW91IG11c3QgZWl0aGVyCiAgICBleHBsaWNpdGx5IGNhbGwg
        YHJlZGlyZWN0YCBvciBqdXN0IHB1dCB5b3VyIHJlZGlyZWN0aW5nCiAgICBg
        dGhpcy50cmFuc2l0aW9uVG8oKWAgY2FsbCB3aXRoaW4gYGFmdGVyTW9kZWxg
        LgoKICAgIEBtZXRob2QgcmVkaXJlY3QKICAgIEBwYXJhbSB7T2JqZWN0fSBt
        b2RlbCB0aGUgbW9kZWwgZm9yIHRoaXMgcm91dGUKICAqLwogIHJlZGlyZWN0
        OiBFbWJlci5LLAoKICAvKioKICAgIFRoaXMgaG9vayBpcyB0aGUgZmlyc3Qg
        b2YgdGhlIHJvdXRlIGVudHJ5IHZhbGlkYXRpb24gaG9va3MKICAgIGNhbGxl
        ZCB3aGVuIGFuIGF0dGVtcHQgaXMgbWFkZSB0byB0cmFuc2l0aW9uIGludG8g
        YSByb3V0ZQogICAgb3Igb25lIG9mIGl0cyBjaGlsZHJlbi4gSXQgaXMgY2Fs
        bGVkIGJlZm9yZSBgbW9kZWxgIGFuZAogICAgYGFmdGVyTW9kZWxgLCBhbmQg
        aXMgYXBwcm9wcmlhdGUgZm9yIGNhc2VzIHdoZW46CgogICAgMSkgQSBkZWNp
        c2lvbiBjYW4gYmUgbWFkZSB0byByZWRpcmVjdCBlbHNld2hlcmUgd2l0aG91
        dAogICAgICAgbmVlZGluZyB0byByZXNvbHZlIHRoZSBtb2RlbCBmaXJzdC4K
        ICAgIDIpIEFueSBhc3luYyBvcGVyYXRpb25zIG5lZWQgdG8gb2NjdXIgZmly
        c3QgYmVmb3JlIHRoZQogICAgICAgbW9kZWwgaXMgYXR0ZW1wdGVkIHRvIGJl
        IHJlc29sdmVkLgoKICAgIFRoaXMgaG9vayBpcyBwcm92aWRlZCB0aGUgY3Vy
        cmVudCBgdHJhbnNpdGlvbmAgYXR0ZW1wdAogICAgYXMgYSBwYXJhbWV0ZXIs
        IHdoaWNoIGNhbiBiZSB1c2VkIHRvIGAuYWJvcnQoKWAgdGhlIHRyYW5zaXRp
        b24sCiAgICBzYXZlIGl0IGZvciBhIGxhdGVyIGAucmV0cnkoKWAsIG9yIHJl
        dHJpZXZlIHZhbHVlcyBzZXQKICAgIG9uIGl0IGZyb20gYSBwcmV2aW91cyBo
        b29rLiBZb3UgY2FuIGFsc28ganVzdCBjYWxsCiAgICBgdGhpcy50cmFuc2l0
        aW9uVG9gIHRvIGFub3RoZXIgcm91dGUgdG8gaW1wbGljaXRseQogICAgYWJv
        cnQgdGhlIGB0cmFuc2l0aW9uYC4KCiAgICBZb3UgY2FuIHJldHVybiBhIHBy
        b21pc2UgZnJvbSB0aGlzIGhvb2sgdG8gcGF1c2UgdGhlCiAgICB0cmFuc2l0
        aW9uIHVudGlsIHRoZSBwcm9taXNlIHJlc29sdmVzIChvciByZWplY3RzKS4g
        VGhpcyBjb3VsZAogICAgYmUgdXNlZnVsLCBmb3IgaW5zdGFuY2UsIGZvciBy
        ZXRyaWV2aW5nIGFzeW5jIGNvZGUgZnJvbQogICAgdGhlIHNlcnZlciB0aGF0
        IGlzIHJlcXVpcmVkIHRvIGVudGVyIGEgcm91dGUuCgogICAgYGBganMKICAg
        IEFwcC5Qb3N0Um91dGUgPSBFbWJlci5Sb3V0ZS5leHRlbmQoewogICAgICBi
        ZWZvcmVNb2RlbDogZnVuY3Rpb24odHJhbnNpdGlvbikgewogICAgICAgIGlm
        ICghQXBwLlBvc3QpIHsKICAgICAgICAgIHJldHVybiBFbWJlci4kLmdldFNj
        cmlwdCgnL21vZGVscy9wb3N0LmpzJyk7CiAgICAgICAgfQogICAgICB9CiAg
        ICB9KTsKICAgIGBgYAoKICAgIElmIGBBcHAuUG9zdGAgZG9lc24ndCBleGlz
        dCBpbiB0aGUgYWJvdmUgZXhhbXBsZSwKICAgIGBiZWZvcmVNb2RlbGAgd2ls
        bCB1c2UgalF1ZXJ5J3MgYGdldFNjcmlwdGAsIHdoaWNoCiAgICByZXR1cm5z
        IGEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIGFmdGVyIHRoZSBzZXJ2ZXIgaGFz
        CiAgICBzdWNjZXNzZnVsbHkgcmV0cmlldmVkIGFuZCBleGVjdXRlZCB0aGUg
        Y29kZSBmcm9tIHRoZQogICAgc2VydmVyLiBOb3RlIHRoYXQgaWYgYW4gZXJy
        b3Igd2VyZSB0byBvY2N1ciwgaXQgd291bGQKICAgIGJlIHBhc3NlZCB0byB0
        aGUgYGVycm9yYCBob29rIG9uIGBFbWJlci5Sb3V0ZWAsIGJ1dAogICAgaXQn
        cyBhbHNvIHBvc3NpYmxlIHRvIGhhbmRsZSBlcnJvcnMgc3BlY2lmaWMgdG8K
        ICAgIGBiZWZvcmVNb2RlbGAgcmlnaHQgZnJvbSB3aXRoaW4gdGhlIGhvb2sg
        KHRvIGRpc3Rpbmd1aXNoCiAgICBmcm9tIHRoZSBzaGFyZWQgZXJyb3IgaGFu
        ZGxpbmcgYmVoYXZpb3Igb2YgdGhlIGBlcnJvcmAKICAgIGhvb2spOgoKICAg
        IGBgYGpzCiAgICBBcHAuUG9zdFJvdXRlID0gRW1iZXIuUm91dGUuZXh0ZW5k
        KHsKICAgICAgYmVmb3JlTW9kZWw6IGZ1bmN0aW9uKHRyYW5zaXRpb24pIHsK
        ICAgICAgICBpZiAoIUFwcC5Qb3N0KSB7CiAgICAgICAgICB2YXIgc2VsZiA9
        IHRoaXM7CiAgICAgICAgICByZXR1cm4gRW1iZXIuJC5nZXRTY3JpcHQoJ3Bv
        c3QuanMnKS50aGVuKG51bGwsIGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAg
        c2VsZi50cmFuc2l0aW9uVG8oJ2hlbHAnKTsKCiAgICAgICAgICAgIC8vIE5v
        dGUgdGhhdCB0aGUgYWJvdmUgdHJhbnNpdGlvblRvIHdpbGwgaW1wbGljaXRs
        eQogICAgICAgICAgICAvLyBoYWx0IHRoZSB0cmFuc2l0aW9uLiBJZiB5b3Ug
        d2VyZSB0byByZXR1cm4KICAgICAgICAgICAgLy8gbm90aGluZyBmcm9tIHRo
        aXMgcHJvbWlzZSByZWplY3QgaGFuZGxlciwKICAgICAgICAgICAgLy8gYWNj
        b3JkaW5nIHRvIHByb21pc2Ugc2VtYW50aWNzLCB0aGF0IHdvdWxkCiAgICAg
        ICAgICAgIC8vIGNvbnZlcnQgdGhlIHJlamVjdCBpbnRvIGEgcmVzb2x2ZSBh
        bmQgdGhlCiAgICAgICAgICAgIC8vIHRyYW5zaXRpb24gd291bGQgY29udGlu
        dWUuIFRvIHByb3BhZ2F0ZSB0aGUKICAgICAgICAgICAgLy8gZXJyb3Igc28g
        dGhhdCBpdCdkIGJlIGhhbmRsZWQgYnkgdGhlIGBlcnJvcmAKICAgICAgICAg
        ICAgLy8gaG9vaywgeW91IHdvdWxkIGhhdmUgdG8gZWl0aGVyCiAgICAgICAg
        ICAgIHJldHVybiBFbWJlci5SU1ZQLnJlamVjdChlKTsKICAgICAgICAgICAg
        Ly8gb3IKICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICAgIH0pOwogICAg
        ICAgIH0KICAgICAgfQogICAgfSk7CiAgICBgYGAKCiAgICBAbWV0aG9kIGJl
        Zm9yZU1vZGVsCiAgICBAcGFyYW0ge1RyYW5zaXRpb259IHRyYW5zaXRpb24K
        ICAgIEBwYXJhbSB7T2JqZWN0fSBxdWVyeVBhcmFtcyB0aGUgYWN0aXZlIHF1
        ZXJ5IHBhcmFtcyBmb3IgdGhpcyByb3V0ZQogICAgQHJldHVybiB7UHJvbWlz
        ZX0gaWYgdGhlIHZhbHVlIHJldHVybmVkIGZyb20gdGhpcyBob29rIGlzCiAg
        ICAgIGEgcHJvbWlzZSwgdGhlIHRyYW5zaXRpb24gd2lsbCBwYXVzZSB1bnRp
        bCB0aGUgdHJhbnNpdGlvbgogICAgICByZXNvbHZlcy4gT3RoZXJ3aXNlLCBu
        b24tcHJvbWlzZSByZXR1cm4gdmFsdWVzIGFyZSBub3QKICAgICAgdXRpbGl6
        ZWQgaW4gYW55IHdheS4KICAqLwogIGJlZm9yZU1vZGVsOiBFbWJlci5LLAoK
        ICAvKioKICAgIFRoaXMgaG9vayBpcyBjYWxsZWQgYWZ0ZXIgdGhpcyByb3V0
        ZSdzIG1vZGVsIGhhcyByZXNvbHZlZC4KICAgIEl0IGZvbGxvd3MgaWRlbnRp
        Y2FsIGFzeW5jL3Byb21pc2Ugc2VtYW50aWNzIHRvIGBiZWZvcmVNb2RlbGAK
        ICAgIGJ1dCBpcyBwcm92aWRlZCB0aGUgcm91dGUncyByZXNvbHZlZCBtb2Rl
        bCBpbiBhZGRpdGlvbiB0bwogICAgdGhlIGB0cmFuc2l0aW9uYCwgYW5kIGlz
        IHRoZXJlZm9yZSBzdWl0ZWQgdG8gcGVyZm9ybWluZwogICAgbG9naWMgdGhh
        dCBjYW4gb25seSB0YWtlIHBsYWNlIGFmdGVyIHRoZSBtb2RlbCBoYXMgYWxy
        ZWFkeQogICAgcmVzb2x2ZWQuCgogICAgYGBganMKICAgIEFwcC5Qb3N0c1Jv
        dXRlID0gRW1iZXIuUm91dGUuZXh0ZW5kKHsKICAgICAgYWZ0ZXJNb2RlbDog
        ZnVuY3Rpb24ocG9zdHMsIHRyYW5zaXRpb24pIHsKICAgICAgICBpZiAocG9z
        dHMubGVuZ3RoID09PSAxKSB7CiAgICAgICAgICB0aGlzLnRyYW5zaXRpb25U
        bygncG9zdC5zaG93JywgcG9zdHNbMF0pOwogICAgICAgIH0KICAgICAgfQog
        ICAgfSk7CiAgICBgYGAKCiAgICBSZWZlciB0byBkb2N1bWVudGF0aW9uIGZv
        ciBgYmVmb3JlTW9kZWxgIGZvciBhIGRlc2NyaXB0aW9uCiAgICBvZiB0cmFu
        c2l0aW9uLXBhdXNpbmcgc2VtYW50aWNzIHdoZW4gYSBwcm9taXNlIGlzIHJl
        dHVybmVkCiAgICBmcm9tIHRoaXMgaG9vay4KCiAgICBAbWV0aG9kIGFmdGVy
        TW9kZWwKICAgIEBwYXJhbSB7T2JqZWN0fSByZXNvbHZlZE1vZGVsIHRoZSB2
        YWx1ZSByZXR1cm5lZCBmcm9tIGBtb2RlbGAsCiAgICAgIG9yIGl0cyByZXNv
        bHZlZCB2YWx1ZSBpZiBpdCB3YXMgYSBwcm9taXNlCiAgICBAcGFyYW0ge1Ry
        YW5zaXRpb259IHRyYW5zaXRpb24KICAgIEBwYXJhbSB7T2JqZWN0fSBxdWVy
        eVBhcmFtcyB0aGUgYWN0aXZlIHF1ZXJ5IHBhcmFtcyBmb3IgdGhpcyBoYW5k
        bGVyCiAgICBAcmV0dXJuIHtQcm9taXNlfSBpZiB0aGUgdmFsdWUgcmV0dXJu
        ZWQgZnJvbSB0aGlzIGhvb2sgaXMKICAgICAgYSBwcm9taXNlLCB0aGUgdHJh
        bnNpdGlvbiB3aWxsIHBhdXNlIHVudGlsIHRoZSB0cmFuc2l0aW9uCiAgICAg
        IHJlc29sdmVzLiBPdGhlcndpc2UsIG5vbi1wcm9taXNlIHJldHVybiB2YWx1
        ZXMgYXJlIG5vdAogICAgICB1dGlsaXplZCBpbiBhbnkgd2F5LgogICAqLwog
        IGFmdGVyTW9kZWw6IGZ1bmN0aW9uKHJlc29sdmVkTW9kZWwsIHRyYW5zaXRp
        b24sIHF1ZXJ5UGFyYW1zKSB7CiAgICB0aGlzLnJlZGlyZWN0KHJlc29sdmVk
        TW9kZWwsIHRyYW5zaXRpb24pOwogIH0sCgoKICAvKioKICAgIEBwcml2YXRl
        CgogICAgQ2FsbGVkIHdoZW4gdGhlIGNvbnRleHQgaXMgY2hhbmdlZCBieSBy
        b3V0ZXIuanMuCgogICAgQG1ldGhvZCBjb250ZXh0RGlkQ2hhbmdlCiAgKi8K
        ICBjb250ZXh0RGlkQ2hhbmdlOiBmdW5jdGlvbigpIHsKICAgIHRoaXMuY3Vy
        cmVudE1vZGVsID0gdGhpcy5jb250ZXh0OwogIH0sCgogIC8qKgogICAgQSBo
        b29rIHlvdSBjYW4gaW1wbGVtZW50IHRvIGNvbnZlcnQgdGhlIFVSTCBpbnRv
        IHRoZSBtb2RlbCBmb3IKICAgIHRoaXMgcm91dGUuCgogICAgYGBganMKICAg
        IEFwcC5Sb3V0ZXIubWFwKGZ1bmN0aW9uKCkgewogICAgICB0aGlzLnJlc291
        cmNlKCdwb3N0Jywge3BhdGg6ICcvcG9zdHMvOnBvc3RfaWQnfSk7CiAgICB9
        KTsKICAgIGBgYAoKICAgIFRoZSBtb2RlbCBmb3IgdGhlIGBwb3N0YCByb3V0
        ZSBpcyBgQXBwLlBvc3QuZmluZChwYXJhbXMucG9zdF9pZClgLgoKICAgIEJ5
        IGRlZmF1bHQsIGlmIHlvdXIgcm91dGUgaGFzIGEgZHluYW1pYyBzZWdtZW50
        IGVuZGluZyBpbiBgX2lkYDoKCiAgICAqIFRoZSBtb2RlbCBjbGFzcyBpcyBk
        ZXRlcm1pbmVkIGZyb20gdGhlIHNlZ21lbnQgKGBwb3N0X2lkYCdzCiAgICAg
        IGNsYXNzIGlzIGBBcHAuUG9zdGApCiAgICAqIFRoZSBmaW5kIG1ldGhvZCBp
        cyBjYWxsZWQgb24gdGhlIG1vZGVsIGNsYXNzIHdpdGggdGhlIHZhbHVlIG9m
        CiAgICAgIHRoZSBkeW5hbWljIHNlZ21lbnQuCgogICAgTm90ZSB0aGF0IGZv
        ciByb3V0ZXMgd2l0aCBkeW5hbWljIHNlZ21lbnRzLCB0aGlzIGhvb2sgaXMg
        b25seQogICAgZXhlY3V0ZWQgd2hlbiBlbnRlcmVkIHZpYSB0aGUgVVJMLiBJ
        ZiB0aGUgcm91dGUgaXMgZW50ZXJlZAogICAgdGhyb3VnaCBhIHRyYW5zaXRp
        b24gKGUuZy4gd2hlbiB1c2luZyB0aGUgYGxpbmtUb2AgSGFuZGxlYmFycwog
        ICAgaGVscGVyKSwgdGhlbiBhIG1vZGVsIGNvbnRleHQgaXMgYWxyZWFkeSBw
        cm92aWRlZCBhbmQgdGhpcyBob29rCiAgICBpcyBub3QgY2FsbGVkLiBSb3V0
        ZXMgd2l0aG91dCBkeW5hbWljIHNlZ21lbnRzIHdpbGwgYWx3YXlzCiAgICBl
        eGVjdXRlIHRoZSBtb2RlbCBob29rLgoKICAgIFRoaXMgaG9vayBmb2xsb3dz
        IHRoZSBhc3luY2hyb25vdXMvcHJvbWlzZSBzZW1hbnRpY3MKICAgIGRlc2Ny
        aWJlZCBpbiB0aGUgZG9jdW1lbnRhdGlvbiBmb3IgYGJlZm9yZU1vZGVsYC4g
        SW4gcGFydGljdWxhciwKICAgIGlmIGEgcHJvbWlzZSByZXR1cm5lZCBmcm9t
        IGBtb2RlbGAgZmFpbHMsIHRoZSBlcnJvciB3aWxsIGJlCiAgICBoYW5kbGVk
        IGJ5IHRoZSBgZXJyb3JgIGhvb2sgb24gYEVtYmVyLlJvdXRlYC4KCiAgICBF
        eGFtcGxlCgogICAgYGBganMKICAgIEFwcC5Qb3N0Um91dGUgPSBFbWJlci5S
        b3V0ZS5leHRlbmQoewogICAgICBtb2RlbDogZnVuY3Rpb24ocGFyYW1zKSB7
        CiAgICAgICAgcmV0dXJuIEFwcC5Qb3N0LmZpbmQocGFyYW1zLnBvc3RfaWQp
        OwogICAgICB9CiAgICB9KTsKICAgIGBgYAoKICAgIEBtZXRob2QgbW9kZWwK
        ICAgIEBwYXJhbSB7T2JqZWN0fSBwYXJhbXMgdGhlIHBhcmFtZXRlcnMgZXh0
        cmFjdGVkIGZyb20gdGhlIFVSTAogICAgQHBhcmFtIHtUcmFuc2l0aW9ufSB0
        cmFuc2l0aW9uCiAgICBAcGFyYW0ge09iamVjdH0gcXVlcnlQYXJhbXMgdGhl
        IHF1ZXJ5IHBhcmFtcyBmb3IgdGhpcyByb3V0ZQogICAgQHJldHVybiB7T2Jq
        ZWN0fFByb21pc2V9IHRoZSBtb2RlbCBmb3IgdGhpcyByb3V0ZS4gSWYKICAg
        ICAgYSBwcm9taXNlIGlzIHJldHVybmVkLCB0aGUgdHJhbnNpdGlvbiB3aWxs
        IHBhdXNlIHVudGlsCiAgICAgIHRoZSBwcm9taXNlIHJlc29sdmVzLCBhbmQg
        dGhlIHJlc29sdmVkIHZhbHVlIG9mIHRoZSBwcm9taXNlCiAgICAgIHdpbGwg
        YmUgdXNlZCBhcyB0aGUgbW9kZWwgZm9yIHRoaXMgcm91dGUuCiAgKi8KICBt
        b2RlbDogZnVuY3Rpb24ocGFyYW1zLCB0cmFuc2l0aW9uKSB7CiAgICB2YXIg
        bWF0Y2gsIG5hbWUsIHNhd1BhcmFtcywgdmFsdWU7CgogICAgZm9yICh2YXIg
        cHJvcCBpbiBwYXJhbXMpIHsKICAgICAgaWYgKG1hdGNoID0gcHJvcC5tYXRj
        aCgvXiguKilfaWQkLykpIHsKICAgICAgICBuYW1lID0gbWF0Y2hbMV07CiAg
        ICAgICAgdmFsdWUgPSBwYXJhbXNbcHJvcF07CiAgICAgIH0KICAgICAgc2F3
        UGFyYW1zID0gdHJ1ZTsKICAgIH0KCiAgICBpZiAoIW5hbWUgJiYgc2F3UGFy
        YW1zKSB7IHJldHVybiBwYXJhbXM7IH0KICAgIGVsc2UgaWYgKCFuYW1lKSB7
        IHJldHVybjsgfQoKICAgIHJldHVybiB0aGlzLmZpbmRNb2RlbChuYW1lLCB2
        YWx1ZSk7CiAgfSwKCiAgLyoqCgogICAgQG1ldGhvZCBmaW5kTW9kZWwKICAg
        IEBwYXJhbSB7U3RyaW5nfSB0eXBlIHRoZSBtb2RlbCB0eXBlCiAgICBAcGFy
        YW0ge09iamVjdH0gdmFsdWUgdGhlIHZhbHVlIHBhc3NlZCB0byBmaW5kCiAg
        Ki8KICBmaW5kTW9kZWw6IGZ1bmN0aW9uKCl7CiAgICB2YXIgc3RvcmUgPSBn
        ZXQodGhpcywgJ3N0b3JlJyk7CiAgICByZXR1cm4gc3RvcmUuZmluZC5hcHBs
        eShzdG9yZSwgYXJndW1lbnRzKTsKICB9LAoKICAvKioKICAgIFN0b3JlIHBy
        b3BlcnR5IHByb3ZpZGVzIGEgaG9vayBmb3IgZGF0YSBwZXJzaXN0ZW5jZSBs
        aWJyYXJpZXMgdG8gaW5qZWN0IHRoZW1zZWx2ZXMuCgogICAgQnkgZGVmYXVs
        dCwgdGhpcyBzdG9yZSBwcm9wZXJ0eSBwcm92aWRlcyB0aGUgZXhhY3Qgc2Ft
        ZSBmdW5jdGlvbmFsaXR5IHByZXZpb3VzbHkKICAgIGluIHRoZSBtb2RlbCBo
        b29rLgoKICAgIEN1cnJlbnRseSwgdGhlIHJlcXVpcmVkIGludGVyZmFjZSBp
        czoKCiAgICBgc3RvcmUuZmluZChtb2RlbE5hbWUsIGZpbmRBcmd1bWVudHMp
        YAoKICAgIEBtZXRob2Qgc3RvcmUKICAgIEBwYXJhbSB7T2JqZWN0fSBzdG9y
        ZQogICovCiAgc3RvcmU6IEVtYmVyLmNvbXB1dGVkKGZ1bmN0aW9uKCl7CiAg
        ICB2YXIgY29udGFpbmVyID0gdGhpcy5jb250YWluZXI7CiAgICB2YXIgcm91
        dGVOYW1lID0gdGhpcy5yb3V0ZU5hbWU7CiAgICB2YXIgbmFtZXNwYWNlID0g
        Z2V0KHRoaXMsICdyb3V0ZXIubmFtZXNwYWNlJyk7CgogICAgcmV0dXJuIHsK
        ICAgICAgZmluZDogZnVuY3Rpb24obmFtZSwgdmFsdWUpIHsKICAgICAgICB2
        YXIgbW9kZWxDbGFzcyA9IGNvbnRhaW5lci5sb29rdXBGYWN0b3J5KCdtb2Rl
        bDonICsgbmFtZSk7CgogICAgICAgIEVtYmVyLmFzc2VydCgiWW91IHVzZWQg
        dGhlIGR5bmFtaWMgc2VnbWVudCAiICsgbmFtZSArICJfaWQgaW4geW91ciBy
        b3V0ZSAiKyByb3V0ZU5hbWUgKyAiLCBidXQgIiArIG5hbWVzcGFjZSArICIu
        IiArIGNsYXNzaWZ5KG5hbWUpICsgIiBkaWQgbm90IGV4aXN0IGFuZCB5b3Ug
        ZGlkIG5vdCBvdmVycmlkZSB5b3VyIHJvdXRlJ3MgYG1vZGVsYCBob29rLiIs
        IG1vZGVsQ2xhc3MpOwoKICAgICAgICByZXR1cm4gbW9kZWxDbGFzcy5maW5k
        KHZhbHVlKTsKICAgICAgfQogICAgfTsKICB9KSwKCiAgLyoqCiAgICBBIGhv
        b2sgeW91IGNhbiBpbXBsZW1lbnQgdG8gY29udmVydCB0aGUgcm91dGUncyBt
        b2RlbCBpbnRvIHBhcmFtZXRlcnMKICAgIGZvciB0aGUgVVJMLgoKICAgIGBg
        YGpzCiAgICBBcHAuUm91dGVyLm1hcChmdW5jdGlvbigpIHsKICAgICAgdGhp
        cy5yZXNvdXJjZSgncG9zdCcsIHtwYXRoOiAnL3Bvc3RzLzpwb3N0X2lkJ30p
        OwogICAgfSk7CgogICAgQXBwLlBvc3RSb3V0ZSA9IEVtYmVyLlJvdXRlLmV4
        dGVuZCh7CiAgICAgIG1vZGVsOiBmdW5jdGlvbihwYXJhbXMpIHsKICAgICAg
        ICAvLyB0aGUgc2VydmVyIHJldHVybnMgYHsgaWQ6IDEyIH1gCiAgICAgICAg
        cmV0dXJuIGpRdWVyeS5nZXRKU09OKCIvcG9zdHMvIiArIHBhcmFtcy5wb3N0
        X2lkKTsKICAgICAgfSwKCiAgICAgIHNlcmlhbGl6ZTogZnVuY3Rpb24obW9k
        ZWwpIHsKICAgICAgICAvLyB0aGlzIHdpbGwgbWFrZSB0aGUgVVJMIGAvcG9z
        dHMvMTJgCiAgICAgICAgcmV0dXJuIHsgcG9zdF9pZDogbW9kZWwuaWQgfTsK
        ICAgICAgfQogICAgfSk7CiAgICBgYGAKCiAgICBUaGUgZGVmYXVsdCBgc2Vy
        aWFsaXplYCBtZXRob2Qgd2lsbCBpbnNlcnQgdGhlIG1vZGVsJ3MgYGlkYCBp
        bnRvIHRoZQogICAgcm91dGUncyBkeW5hbWljIHNlZ21lbnQgKGluIHRoaXMg
        Y2FzZSwgYDpwb3N0X2lkYCkgaWYgdGhlIHNlZ21lbnQgY29udGFpbnMgJ19p
        ZCcuCiAgICBJZiB0aGUgcm91dGUgaGFzIG11bHRpcGxlIGR5bmFtaWMgc2Vn
        bWVudHMgb3IgZG9lcyBub3QgY29udGFpbiAnX2lkJywgYHNlcmlhbGl6ZWAK
        ICAgIHdpbGwgcmV0dXJuIGBFbWJlci5nZXRQcm9wZXJ0aWVzKG1vZGVsLCBw
        YXJhbXMpYAoKICAgIFRoaXMgbWV0aG9kIGlzIGNhbGxlZCB3aGVuIGB0cmFu
        c2l0aW9uVG9gIGlzIGNhbGxlZCB3aXRoIGEgY29udGV4dAogICAgaW4gb3Jk
        ZXIgdG8gcG9wdWxhdGUgdGhlIFVSTC4KCiAgICBAbWV0aG9kIHNlcmlhbGl6
        ZQogICAgQHBhcmFtIHtPYmplY3R9IG1vZGVsIHRoZSByb3V0ZSdzIG1vZGVs
        CiAgICBAcGFyYW0ge0FycmF5fSBwYXJhbXMgYW4gQXJyYXkgb2YgcGFyYW1l
        dGVyIG5hbWVzIGZvciB0aGUgY3VycmVudAogICAgICByb3V0ZSAoaW4gdGhl
        IGV4YW1wbGUsIGBbJ3Bvc3RfaWQnXWAuCiAgICBAcmV0dXJuIHtPYmplY3R9
        IHRoZSBzZXJpYWxpemVkIHBhcmFtZXRlcnMKICAqLwogIHNlcmlhbGl6ZTog
        ZnVuY3Rpb24obW9kZWwsIHBhcmFtcykgewogICAgaWYgKHBhcmFtcy5sZW5n
        dGggPCAxKSB7IHJldHVybjsgfQoKICAgIHZhciBuYW1lID0gcGFyYW1zWzBd
        LCBvYmplY3QgPSB7fTsKCiAgICBpZiAoL19pZCQvLnRlc3QobmFtZSkgJiYg
        cGFyYW1zLmxlbmd0aCA9PT0gMSkgewogICAgICBvYmplY3RbbmFtZV0gPSBn
        ZXQobW9kZWwsICJpZCIpOwogICAgfSBlbHNlIHsKICAgICAgb2JqZWN0ID0g
        Z2V0UHJvcGVydGllcyhtb2RlbCwgcGFyYW1zKTsKICAgIH0KCiAgICByZXR1
        cm4gb2JqZWN0OwogIH0sCgogIC8qKgogICAgQSBob29rIHlvdSBjYW4gdXNl
        IHRvIHNldHVwIHRoZSBjb250cm9sbGVyIGZvciB0aGUgY3VycmVudCByb3V0
        ZS4KCiAgICBUaGlzIG1ldGhvZCBpcyBjYWxsZWQgd2l0aCB0aGUgY29udHJv
        bGxlciBmb3IgdGhlIGN1cnJlbnQgcm91dGUgYW5kIHRoZQogICAgbW9kZWwg
        c3VwcGxpZWQgYnkgdGhlIGBtb2RlbGAgaG9vay4KCiAgICBCeSBkZWZhdWx0
        LCB0aGUgYHNldHVwQ29udHJvbGxlcmAgaG9vayBzZXRzIHRoZSBgY29udGVu
        dGAgcHJvcGVydHkgb2YKICAgIHRoZSBjb250cm9sbGVyIHRvIHRoZSBgbW9k
        ZWxgLgoKICAgIFRoaXMgbWVhbnMgdGhhdCB5b3VyIHRlbXBsYXRlIHdpbGwg
        Z2V0IGEgcHJveHkgZm9yIHRoZSBtb2RlbCBhcyBpdHMKICAgIGNvbnRleHQs
        IGFuZCB5b3UgY2FuIGFjdCBhcyB0aG91Z2ggdGhlIG1vZGVsIGl0c2VsZiB3
        YXMgdGhlIGNvbnRleHQuCgogICAgVGhlIHByb3ZpZGVkIGNvbnRyb2xsZXIg
        d2lsbCBiZSBvbmUgcmVzb2x2ZWQgYmFzZWQgb24gdGhlIG5hbWUKICAgIG9m
        IHRoaXMgcm91dGUuCgogICAgSWYgbm8gZXhwbGljaXQgY29udHJvbGxlciBp
        cyBkZWZpbmVkLCBFbWJlciB3aWxsIGF1dG9tYXRpY2FsbHkgY3JlYXRlCiAg
        ICBhbiBhcHByb3ByaWF0ZSBjb250cm9sbGVyIGZvciB0aGUgbW9kZWwuCgog
        ICAgKiBpZiB0aGUgbW9kZWwgaXMgYW4gYEVtYmVyLkFycmF5YCAoaW5jbHVk
        aW5nIHJlY29yZCBhcnJheXMgZnJvbSBFbWJlcgogICAgICBEYXRhKSwgdGhl
        IGNvbnRyb2xsZXIgaXMgYW4gYEVtYmVyLkFycmF5Q29udHJvbGxlcmAuCiAg
        ICAqIG90aGVyd2lzZSwgdGhlIGNvbnRyb2xsZXIgaXMgYW4gYEVtYmVyLk9i
        amVjdENvbnRyb2xsZXJgLgoKICAgIEFzIGFuIGV4YW1wbGUsIGNvbnNpZGVy
        IHRoZSByb3V0ZXI6CgogICAgYGBganMKICAgIEFwcC5Sb3V0ZXIubWFwKGZ1
        bmN0aW9uKCkgewogICAgICB0aGlzLnJlc291cmNlKCdwb3N0Jywge3BhdGg6
        ICcvcG9zdHMvOnBvc3RfaWQnfSk7CiAgICB9KTsKICAgIGBgYAoKICAgIEZv
        ciB0aGUgYHBvc3RgIHJvdXRlLCBhIGNvbnRyb2xsZXIgbmFtZWQgYEFwcC5Q
        b3N0Q29udHJvbGxlcmAgd291bGQKICAgIGJlIHVzZWQgaWYgaXQgaXMgZGVm
        aW5lZC4gSWYgaXQgaXMgbm90IGRlZmluZWQsIGFuIGBFbWJlci5PYmplY3RD
        b250cm9sbGVyYAogICAgaW5zdGFuY2Ugd291bGQgYmUgdXNlZC4KCiAgICBF
        eGFtcGxlCiAgICAKICAgIGBgYGpzCiAgICBBcHAuUG9zdFJvdXRlID0gRW1i
        ZXIuUm91dGUuZXh0ZW5kKHsKICAgICAgc2V0dXBDb250cm9sbGVyOiBmdW5j
        dGlvbihjb250cm9sbGVyLCBtb2RlbCkgewogICAgICAgIGNvbnRyb2xsZXIu
        c2V0KCdtb2RlbCcsIG1vZGVsKTsKICAgICAgfQogICAgfSk7CiAgICBgYGAK
        CiAgICBAbWV0aG9kIHNldHVwQ29udHJvbGxlcgogICAgQHBhcmFtIHtDb250
        cm9sbGVyfSBjb250cm9sbGVyIGluc3RhbmNlCiAgICBAcGFyYW0ge09iamVj
        dH0gbW9kZWwKICAqLwogIHNldHVwQ29udHJvbGxlcjogZnVuY3Rpb24oY29u
        dHJvbGxlciwgY29udGV4dCkgewogICAgaWYgKGNvbnRyb2xsZXIgJiYgKGNv
        bnRleHQgIT09IHVuZGVmaW5lZCkpIHsKICAgICAgc2V0KGNvbnRyb2xsZXIs
        ICdtb2RlbCcsIGNvbnRleHQpOwogICAgfQogIH0sCgogIC8qKgogICAgUmV0
        dXJucyB0aGUgY29udHJvbGxlciBmb3IgYSBwYXJ0aWN1bGFyIHJvdXRlIG9y
        IG5hbWUuCgogICAgVGhlIGNvbnRyb2xsZXIgaW5zdGFuY2UgbXVzdCBhbHJl
        YWR5IGhhdmUgYmVlbiBjcmVhdGVkLCBlaXRoZXIgdGhyb3VnaCBlbnRlcmlu
        ZyB0aGUKICAgIGFzc29jaWF0ZWQgcm91dGUgb3IgdXNpbmcgYGdlbmVyYXRl
        Q29udHJvbGxlcmAuCgogICAgYGBganMKICAgIEFwcC5Qb3N0Um91dGUgPSBF
        bWJlci5Sb3V0ZS5leHRlbmQoewogICAgICBzZXR1cENvbnRyb2xsZXI6IGZ1
        bmN0aW9uKGNvbnRyb2xsZXIsIHBvc3QpIHsKICAgICAgICB0aGlzLl9zdXBl
        cihjb250cm9sbGVyLCBwb3N0KTsKICAgICAgICB0aGlzLmNvbnRyb2xsZXJG
        b3IoJ3Bvc3RzJykuc2V0KCdjdXJyZW50UG9zdCcsIHBvc3QpOwogICAgICB9
        CiAgICB9KTsKICAgIGBgYAoKICAgIEBtZXRob2QgY29udHJvbGxlckZvcgog
        ICAgQHBhcmFtIHtTdHJpbmd9IG5hbWUgdGhlIG5hbWUgb2YgdGhlIHJvdXRl
        IG9yIGNvbnRyb2xsZXIKICAgIEByZXR1cm4ge0VtYmVyLkNvbnRyb2xsZXJ9
        CiAgKi8KICBjb250cm9sbGVyRm9yOiBmdW5jdGlvbihuYW1lLCBfc2tpcEFz
        c2VydCkgewogICAgdmFyIGNvbnRhaW5lciA9IHRoaXMuY29udGFpbmVyLAog
        ICAgICAgIHJvdXRlID0gY29udGFpbmVyLmxvb2t1cCgncm91dGU6JytuYW1l
        KSwKICAgICAgICBjb250cm9sbGVyOwoKICAgIGlmIChyb3V0ZSAmJiByb3V0
        ZS5jb250cm9sbGVyTmFtZSkgewogICAgICBuYW1lID0gcm91dGUuY29udHJv
        bGxlck5hbWU7CiAgICB9CgogICAgY29udHJvbGxlciA9IGNvbnRhaW5lci5s
        b29rdXAoJ2NvbnRyb2xsZXI6JyArIG5hbWUpOwoKICAgIC8vIE5PVEU6IFdl
        J3JlIHNwZWNpZmljYWxseSBjaGVja2luZyB0aGF0IHNraXBBc3NlcnQgaXMg
        dHJ1ZSwgYmVjYXVzZSBhY2NvcmRpbmcKICAgIC8vICAgdG8gdGhlIG9sZCBB
        UEkgdGhlIHNlY29uZCBwYXJhbWV0ZXIgd2FzIG1vZGVsLiBXZSBkbyBub3Qg
        d2FudCBwZW9wbGUgd2hvCiAgICAvLyAgIHBhc3NlZCBhIG1vZGVsIHRvIHNr
        aXAgdGhlIGFzc2VydGlvbi4KICAgIEVtYmVyLmFzc2VydCgiVGhlIGNvbnRy
        b2xsZXIgbmFtZWQgJyIrbmFtZSsiJyBjb3VsZCBub3QgYmUgZm91bmQuIE1h
        a2Ugc3VyZSB0aGF0IHRoaXMgcm91dGUgZXhpc3RzIGFuZCBoYXMgYWxyZWFk
        eSBiZWVuIGVudGVyZWQgYXQgbGVhc3Qgb25jZS4gSWYgeW91IGFyZSBhY2Nl
        c3NpbmcgYSBjb250cm9sbGVyIG5vdCBhc3NvY2lhdGVkIHdpdGggYSByb3V0
        ZSwgbWFrZSBzdXJlIHRoZSBjb250cm9sbGVyIGNsYXNzIGlzIGV4cGxpY2l0
        bHkgZGVmaW5lZC4iLCBjb250cm9sbGVyIHx8IF9za2lwQXNzZXJ0ID09PSB0
        cnVlKTsKCiAgICByZXR1cm4gY29udHJvbGxlcjsKICB9LAoKICAvKioKICAg
        IEdlbmVyYXRlcyBhIGNvbnRyb2xsZXIgZm9yIGEgcm91dGUuCgogICAgSWYg
        dGhlIG9wdGlvbmFsIG1vZGVsIGlzIHBhc3NlZCB0aGVuIHRoZSBjb250cm9s
        bGVyIHR5cGUgaXMgZGV0ZXJtaW5lZCBhdXRvbWF0aWNhbGx5LAogICAgZS5n
        LiwgYW4gQXJyYXlDb250cm9sbGVyIGZvciBhcnJheXMuCgogICAgRXhhbXBs
        ZQoKICAgIGBgYGpzCiAgICBBcHAuUG9zdFJvdXRlID0gRW1iZXIuUm91dGUu
        ZXh0ZW5kKHsKICAgICAgc2V0dXBDb250cm9sbGVyOiBmdW5jdGlvbihjb250
        cm9sbGVyLCBwb3N0KSB7CiAgICAgICAgdGhpcy5fc3VwZXIoY29udHJvbGxl
        ciwgcG9zdCk7CiAgICAgICAgdGhpcy5nZW5lcmF0ZUNvbnRyb2xsZXIoJ3Bv
        c3RzJywgcG9zdCk7CiAgICAgIH0KICAgIH0pOwogICAgYGBgCgogICAgQG1l
        dGhvZCBnZW5lcmF0ZUNvbnRyb2xsZXIKICAgIEBwYXJhbSB7U3RyaW5nfSBu
        YW1lIHRoZSBuYW1lIG9mIHRoZSBjb250cm9sbGVyCiAgICBAcGFyYW0ge09i
        amVjdH0gbW9kZWwgdGhlIG1vZGVsIHRvIGluZmVyIHRoZSB0eXBlIG9mIHRo
        ZSBjb250cm9sbGVyIChvcHRpb25hbCkKICAqLwogIGdlbmVyYXRlQ29udHJv
        bGxlcjogZnVuY3Rpb24obmFtZSwgbW9kZWwpIHsKICAgIHZhciBjb250YWlu
        ZXIgPSB0aGlzLmNvbnRhaW5lcjsKCiAgICBtb2RlbCA9IG1vZGVsIHx8IHRo
        aXMubW9kZWxGb3IobmFtZSk7CgogICAgcmV0dXJuIEVtYmVyLmdlbmVyYXRl
        Q29udHJvbGxlcihjb250YWluZXIsIG5hbWUsIG1vZGVsKTsKICB9LAoKICAv
        KioKICAgIFJldHVybnMgdGhlIGN1cnJlbnQgbW9kZWwgZm9yIGEgZ2l2ZW4g
        cm91dGUuCgogICAgVGhpcyBpcyB0aGUgb2JqZWN0IHJldHVybmVkIGJ5IHRo
        ZSBgbW9kZWxgIGhvb2sgb2YgdGhlIHJvdXRlCiAgICBpbiBxdWVzdGlvbi4K
        CiAgICBFeGFtcGxlCgogICAgYGBganMKICAgIEFwcC5Sb3V0ZXIubWFwKGZ1
        bmN0aW9uKCkgewogICAgICAgIHRoaXMucmVzb3VyY2UoJ3Bvc3QnLCB7IHBh
        dGg6ICcvcG9zdC86cG9zdF9pZCcgfSwgZnVuY3Rpb24oKSB7CiAgICAgICAg
        ICAgIHRoaXMucmVzb3VyY2UoJ2NvbW1lbnRzJyk7CiAgICAgICAgfSk7CiAg
        ICB9KTsKCiAgICBBcHAuQ29tbWVudHNSb3V0ZSA9IEVtYmVyLlJvdXRlLmV4
        dGVuZCh7CiAgICAgICAgYWZ0ZXJNb2RlbDogZnVuY3Rpb24oKSB7CiAgICAg
        ICAgICAgIHRoaXMuc2V0KCdwb3N0JywgdGhpcy5tb2RlbEZvcigncG9zdCcp
        KTsKICAgICAgICB9CiAgICB9KTsKICAgIGBgYAoKICAgIEBtZXRob2QgbW9k
        ZWxGb3IKICAgIEBwYXJhbSB7U3RyaW5nfSBuYW1lIHRoZSBuYW1lIG9mIHRo
        ZSByb3V0ZQogICAgQHJldHVybiB7T2JqZWN0fSB0aGUgbW9kZWwgb2JqZWN0
        CiAgKi8KICBtb2RlbEZvcjogZnVuY3Rpb24obmFtZSkgewoKICAgIHZhciBy
        b3V0ZSA9IHRoaXMuY29udGFpbmVyLmxvb2t1cCgncm91dGU6JyArIG5hbWUp
        LAogICAgICAgIHRyYW5zaXRpb24gPSB0aGlzLnJvdXRlci5yb3V0ZXIuYWN0
        aXZlVHJhbnNpdGlvbjsKCiAgICAvLyBJZiB3ZSBhcmUgbWlkLXRyYW5zaXRp
        b24sIHdlIHdhbnQgdG8gdHJ5IGFuZCBsb29rIHVwCiAgICAvLyByZXNvbHZl
        ZCBwYXJlbnQgY29udGV4dHMgb24gdGhlIGN1cnJlbnQgdHJhbnNpdGlvbkV2
        ZW50LgogICAgaWYgKHRyYW5zaXRpb24pIHsKICAgICAgdmFyIG1vZGVsTG9v
        a3VwTmFtZSA9IChyb3V0ZSAmJiByb3V0ZS5yb3V0ZU5hbWUpIHx8IG5hbWU7
        CiAgICAgIGlmICh0cmFuc2l0aW9uLnJlc29sdmVkTW9kZWxzLmhhc093blBy
        b3BlcnR5KG1vZGVsTG9va3VwTmFtZSkpIHsKICAgICAgICByZXR1cm4gdHJh
        bnNpdGlvbi5yZXNvbHZlZE1vZGVsc1ttb2RlbExvb2t1cE5hbWVdOwogICAg
        ICB9CiAgICB9CgogICAgcmV0dXJuIHJvdXRlICYmIHJvdXRlLmN1cnJlbnRN
        b2RlbDsKICB9LAoKICAvKioKICAgIEEgaG9vayB5b3UgY2FuIHVzZSB0byBy
        ZW5kZXIgdGhlIHRlbXBsYXRlIGZvciB0aGUgY3VycmVudCByb3V0ZS4KCiAg
        ICBUaGlzIG1ldGhvZCBpcyBjYWxsZWQgd2l0aCB0aGUgY29udHJvbGxlciBm
        b3IgdGhlIGN1cnJlbnQgcm91dGUgYW5kIHRoZQogICAgbW9kZWwgc3VwcGxp
        ZWQgYnkgdGhlIGBtb2RlbGAgaG9vay4gQnkgZGVmYXVsdCwgaXQgcmVuZGVy
        cyB0aGUgcm91dGUncwogICAgdGVtcGxhdGUsIGNvbmZpZ3VyZWQgd2l0aCB0
        aGUgY29udHJvbGxlciBmb3IgdGhlIHJvdXRlLgoKICAgIFRoaXMgbWV0aG9k
        IGNhbiBiZSBvdmVycmlkZGVuIHRvIHNldCB1cCBhbmQgcmVuZGVyIGFkZGl0
        aW9uYWwgb3IKICAgIGFsdGVybmF0aXZlIHRlbXBsYXRlcy4KCiAgICBgYGBq
        cwogICAgQXBwLlBvc3RzUm91dGUgPSBFbWJlci5Sb3V0ZS5leHRlbmQoewog
        ICAgICByZW5kZXJUZW1wbGF0ZTogZnVuY3Rpb24oY29udHJvbGxlciwgbW9k
        ZWwpIHsKICAgICAgICB2YXIgZmF2Q29udHJvbGxlciA9IHRoaXMuY29udHJv
        bGxlckZvcignZmF2b3JpdGVQb3N0Jyk7CgogICAgICAgIC8vIFJlbmRlciB0
        aGUgYGZhdm9yaXRlUG9zdGAgdGVtcGxhdGUgaW50bwogICAgICAgIC8vIHRo
        ZSBvdXRsZXQgYHBvc3RzYCwgYW5kIGRpc3BsYXkgdGhlIGBmYXZvcml0ZVBv
        c3RgCiAgICAgICAgLy8gY29udHJvbGxlci4KICAgICAgICB0aGlzLnJlbmRl
        cignZmF2b3JpdGVQb3N0JywgewogICAgICAgICAgb3V0bGV0OiAncG9zdHMn
        LAogICAgICAgICAgY29udHJvbGxlcjogZmF2Q29udHJvbGxlcgogICAgICAg
        IH0pOwogICAgICB9CiAgICB9KTsKICAgIGBgYAoKICAgIEBtZXRob2QgcmVu
        ZGVyVGVtcGxhdGUKICAgIEBwYXJhbSB7T2JqZWN0fSBjb250cm9sbGVyIHRo
        ZSByb3V0ZSdzIGNvbnRyb2xsZXIKICAgIEBwYXJhbSB7T2JqZWN0fSBtb2Rl
        bCB0aGUgcm91dGUncyBtb2RlbAogICovCiAgcmVuZGVyVGVtcGxhdGU6IGZ1
        bmN0aW9uKGNvbnRyb2xsZXIsIG1vZGVsKSB7CiAgICB0aGlzLnJlbmRlcigp
        OwogIH0sCgogIC8qKgogICAgUmVuZGVycyBhIHRlbXBsYXRlIGludG8gYW4g
        b3V0bGV0LgoKICAgIFRoaXMgbWV0aG9kIGhhcyBhIG51bWJlciBvZiBkZWZh
        dWx0cywgYmFzZWQgb24gdGhlIG5hbWUgb2YgdGhlCiAgICByb3V0ZSBzcGVj
        aWZpZWQgaW4gdGhlIHJvdXRlci4KCiAgICBGb3IgZXhhbXBsZToKCiAgICBg
        YGBqcwogICAgQXBwLlJvdXRlci5tYXAoZnVuY3Rpb24oKSB7CiAgICAgIHRo
        aXMucm91dGUoJ2luZGV4Jyk7CiAgICAgIHRoaXMucmVzb3VyY2UoJ3Bvc3Qn
        LCB7cGF0aDogJy9wb3N0cy86cG9zdF9pZCd9KTsKICAgIH0pOwoKICAgIEFw
        cC5Qb3N0Um91dGUgPSBBcHAuUm91dGUuZXh0ZW5kKHsKICAgICAgcmVuZGVy
        VGVtcGxhdGU6IGZ1bmN0aW9uKCkgewogICAgICAgIHRoaXMucmVuZGVyKCk7
        CiAgICAgIH0KICAgIH0pOwogICAgYGBgCgogICAgVGhlIG5hbWUgb2YgdGhl
        IGBQb3N0Um91dGVgLCBhcyBkZWZpbmVkIGJ5IHRoZSByb3V0ZXIsIGlzIGBw
        b3N0YC4KCiAgICBCeSBkZWZhdWx0LCByZW5kZXIgd2lsbDoKCiAgICAqIHJl
        bmRlciB0aGUgYHBvc3RgIHRlbXBsYXRlCiAgICAqIHdpdGggdGhlIGBwb3N0
        YCB2aWV3IChgUG9zdFZpZXdgKSBmb3IgZXZlbnQgaGFuZGxpbmcsIGlmIG9u
        ZSBleGlzdHMKICAgICogYW5kIHRoZSBgcG9zdGAgY29udHJvbGxlciAoYFBv
        c3RDb250cm9sbGVyYCksIGlmIG9uZSBleGlzdHMKICAgICogaW50byB0aGUg
        YG1haW5gIG91dGxldCBvZiB0aGUgYGFwcGxpY2F0aW9uYCB0ZW1wbGF0ZQoK
        ICAgIFlvdSBjYW4gb3ZlcnJpZGUgdGhpcyBiZWhhdmlvcjoKCiAgICBgYGBq
        cwogICAgQXBwLlBvc3RSb3V0ZSA9IEFwcC5Sb3V0ZS5leHRlbmQoewogICAg
        ICByZW5kZXJUZW1wbGF0ZTogZnVuY3Rpb24oKSB7CiAgICAgICAgdGhpcy5y
        ZW5kZXIoJ215UG9zdCcsIHsgICAvLyB0aGUgdGVtcGxhdGUgdG8gcmVuZGVy
        CiAgICAgICAgICBpbnRvOiAnaW5kZXgnLCAgICAgICAgICAvLyB0aGUgdGVt
        cGxhdGUgdG8gcmVuZGVyIGludG8KICAgICAgICAgIG91dGxldDogJ2RldGFp
        bCcsICAgICAgIC8vIHRoZSBuYW1lIG9mIHRoZSBvdXRsZXQgaW4gdGhhdCB0
        ZW1wbGF0ZQogICAgICAgICAgY29udHJvbGxlcjogJ2Jsb2dQb3N0JyAgLy8g
        dGhlIGNvbnRyb2xsZXIgdG8gdXNlIGZvciB0aGUgdGVtcGxhdGUKICAgICAg
        ICB9KTsKICAgICAgfQogICAgfSk7CiAgICBgYGAKCiAgICBSZW1lbWJlciB0
        aGF0IHRoZSBjb250cm9sbGVyJ3MgYGNvbnRlbnRgIHdpbGwgYmUgdGhlIHJv
        dXRlJ3MgbW9kZWwuIEluCiAgICB0aGlzIGNhc2UsIHRoZSBkZWZhdWx0IG1v
        ZGVsIHdpbGwgYmUgYEFwcC5Qb3N0LmZpbmQocGFyYW1zLnBvc3RfaWQpYC4K
        CiAgICBAbWV0aG9kIHJlbmRlcgogICAgQHBhcmFtIHtTdHJpbmd9IG5hbWUg
        dGhlIG5hbWUgb2YgdGhlIHRlbXBsYXRlIHRvIHJlbmRlcgogICAgQHBhcmFt
        IHtPYmplY3R9IG9wdGlvbnMgdGhlIG9wdGlvbnMKICAqLwogIHJlbmRlcjog
        ZnVuY3Rpb24obmFtZSwgb3B0aW9ucykgewogICAgRW1iZXIuYXNzZXJ0KCJU
        aGUgbmFtZSBpbiB0aGUgZ2l2ZW4gYXJndW1lbnRzIGlzIHVuZGVmaW5lZCIs
        IGFyZ3VtZW50cy5sZW5ndGggPiAwID8gIUVtYmVyLmlzTm9uZShhcmd1bWVu
        dHNbMF0pIDogdHJ1ZSk7CgogICAgdmFyIG5hbWVQYXNzZWQgPSAhIW5hbWU7
        CgogICAgaWYgKHR5cGVvZiBuYW1lID09PSAnb2JqZWN0JyAmJiAhb3B0aW9u
        cykgewogICAgICBvcHRpb25zID0gbmFtZTsKICAgICAgbmFtZSA9IHRoaXMu
        cm91dGVOYW1lOwogICAgfQoKICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9
        OwogICAgbmFtZSA9IG5hbWUgPyBuYW1lLnJlcGxhY2UoL1wvL2csICcuJykg
        OiB0aGlzLnJvdXRlTmFtZTsKICAgIHZhciB2aWV3TmFtZSA9IG9wdGlvbnMu
        dmlldyB8fCB0aGlzLnZpZXdOYW1lIHx8IG5hbWU7CiAgICB2YXIgdGVtcGxh
        dGVOYW1lID0gdGhpcy50ZW1wbGF0ZU5hbWUgfHwgbmFtZTsKCiAgICB2YXIg
        Y29udGFpbmVyID0gdGhpcy5jb250YWluZXIsCiAgICAgICAgdmlldyA9IGNv
        bnRhaW5lci5sb29rdXAoJ3ZpZXc6JyArIHZpZXdOYW1lKSwKICAgICAgICB0
        ZW1wbGF0ZSA9IHZpZXcgPyB2aWV3LmdldCgndGVtcGxhdGUnKSA6IG51bGw7
        CgogICAgaWYgKCF0ZW1wbGF0ZSkgewogICAgICB0ZW1wbGF0ZSA9IGNvbnRh
        aW5lci5sb29rdXAoJ3RlbXBsYXRlOicgKyB0ZW1wbGF0ZU5hbWUpOwogICAg
        fQoKICAgIGlmICghdmlldyAmJiAhdGVtcGxhdGUpIHsKICAgICAgRW1iZXIu
        YXNzZXJ0KCJDb3VsZCBub3QgZmluZCBcIiIgKyBuYW1lICsgIlwiIHRlbXBs
        YXRlIG9yIHZpZXcuIiwgIW5hbWVQYXNzZWQpOwogICAgICBpZiAoZ2V0KHRo
        aXMucm91dGVyLCAnbmFtZXNwYWNlLkxPR19WSUVXX0xPT0tVUFMnKSkgewog
        ICAgICAgIEVtYmVyLkxvZ2dlci5pbmZvKCJDb3VsZCBub3QgZmluZCBcIiIg
        KyBuYW1lICsgIlwiIHRlbXBsYXRlIG9yIHZpZXcuIE5vdGhpbmcgd2lsbCBi
        ZSByZW5kZXJlZCIsIHsgZnVsbE5hbWU6ICd0ZW1wbGF0ZTonICsgbmFtZSB9
        KTsKICAgICAgfQogICAgICByZXR1cm47CiAgICB9CgogICAgb3B0aW9ucyA9
        IG5vcm1hbGl6ZU9wdGlvbnModGhpcywgbmFtZSwgdGVtcGxhdGUsIG9wdGlv
        bnMpOwogICAgdmlldyA9IHNldHVwVmlldyh2aWV3LCBjb250YWluZXIsIG9w
        dGlvbnMpOwoKICAgIGlmIChvcHRpb25zLm91dGxldCA9PT0gJ21haW4nKSB7
        IHRoaXMubGFzdFJlbmRlcmVkVGVtcGxhdGUgPSBuYW1lOyB9CgogICAgYXBw
        ZW5kVmlldyh0aGlzLCB2aWV3LCBvcHRpb25zKTsKICB9LAoKICAvKioKICAg
        IERpc2Nvbm5lY3RzIGEgdmlldyB0aGF0IGhhcyBiZWVuIHJlbmRlcmVkIGlu
        dG8gYW4gb3V0bGV0LgoKICAgIFlvdSBtYXkgcGFzcyBhbnkgb3IgYWxsIG9m
        IHRoZSBmb2xsb3dpbmcgb3B0aW9ucyB0byBgZGlzY29ubmVjdE91dGxldGA6
        CgogICAgKiBgb3V0bGV0YDogdGhlIG5hbWUgb2YgdGhlIG91dGxldCB0byBj
        bGVhciAoZGVmYXVsdDogJ21haW4nKQogICAgKiBgcGFyZW50Vmlld2A6IHRo
        ZSBuYW1lIG9mIHRoZSB2aWV3IGNvbnRhaW5pbmcgdGhlIG91dGxldCB0byBj
        bGVhcgogICAgICAgKGRlZmF1bHQ6IHRoZSB2aWV3IHJlbmRlcmVkIGJ5IHRo
        ZSBwYXJlbnQgcm91dGUpCgogICAgRXhhbXBsZToKCiAgICBgYGBqcwogICAg
        QXBwLkFwcGxpY2F0aW9uUm91dGUgPSBBcHAuUm91dGUuZXh0ZW5kKHsKICAg
        ICAgYWN0aW9uczogewogICAgICAgIHNob3dNb2RhbDogZnVuY3Rpb24oZXZ0
        KSB7CiAgICAgICAgICB0aGlzLnJlbmRlcihldnQubW9kYWxOYW1lLCB7CiAg
        ICAgICAgICAgIG91dGxldDogJ21vZGFsJywKICAgICAgICAgICAgaW50bzog
        J2FwcGxpY2F0aW9uJwogICAgICAgICAgfSk7CiAgICAgICAgfSwKICAgICAg
        ICBoaWRlTW9kYWw6IGZ1bmN0aW9uKGV2dCkgewogICAgICAgICAgdGhpcy5k
        aXNjb25uZWN0T3V0bGV0KHsKICAgICAgICAgICAgb3V0bGV0OiAnbW9kYWwn
        LAogICAgICAgICAgICBwYXJlbnRWaWV3OiAnYXBwbGljYXRpb24nCiAgICAg
        ICAgICB9KTsKICAgICAgICB9CiAgICAgIH0KICAgIH0pOwogICAgYGBgCgog
        ICAgQG1ldGhvZCBkaXNjb25uZWN0T3V0bGV0CiAgICBAcGFyYW0ge09iamVj
        dH0gb3B0aW9ucyB0aGUgb3B0aW9ucwogICovCiAgZGlzY29ubmVjdE91dGxl
        dDogZnVuY3Rpb24ob3B0aW9ucykgewogICAgb3B0aW9ucyA9IG9wdGlvbnMg
        fHwge307CiAgICBvcHRpb25zLnBhcmVudFZpZXcgPSBvcHRpb25zLnBhcmVu
        dFZpZXcgPyBvcHRpb25zLnBhcmVudFZpZXcucmVwbGFjZSgvXC8vZywgJy4n
        KSA6IHBhcmVudFRlbXBsYXRlKHRoaXMpOwogICAgb3B0aW9ucy5vdXRsZXQg
        PSBvcHRpb25zLm91dGxldCB8fCAnbWFpbic7CgogICAgdmFyIHBhcmVudFZp
        ZXcgPSB0aGlzLnJvdXRlci5fbG9va3VwQWN0aXZlVmlldyhvcHRpb25zLnBh
        cmVudFZpZXcpOwogICAgcGFyZW50Vmlldy5kaXNjb25uZWN0T3V0bGV0KG9w
        dGlvbnMub3V0bGV0KTsKICB9LAoKICB3aWxsRGVzdHJveTogZnVuY3Rpb24o
        KSB7CiAgICB0aGlzLnRlYXJkb3duVmlld3MoKTsKICB9LAoKICAvKioKICAg
        IEBwcml2YXRlCgogICAgQG1ldGhvZCB0ZWFyZG93blZpZXdzCiAgKi8KICB0
        ZWFyZG93blZpZXdzOiBmdW5jdGlvbigpIHsKICAgIC8vIFRlYXIgZG93biB0
        aGUgdG9wIGxldmVsIHZpZXcKICAgIGlmICh0aGlzLnRlYXJkb3duVG9wTGV2
        ZWxWaWV3KSB7IHRoaXMudGVhcmRvd25Ub3BMZXZlbFZpZXcoKTsgfQoKICAg
        IC8vIFRlYXIgZG93biBhbnkgb3V0bGV0cyByZW5kZXJlZCB3aXRoICdpbnRv
        JwogICAgdmFyIHRlYXJkb3duT3V0bGV0Vmlld3MgPSB0aGlzLnRlYXJkb3du
        T3V0bGV0Vmlld3MgfHwgW107CiAgICBhX2ZvckVhY2godGVhcmRvd25PdXRs
        ZXRWaWV3cywgZnVuY3Rpb24odGVhcmRvd25PdXRsZXRWaWV3KSB7CiAgICAg
        IHRlYXJkb3duT3V0bGV0VmlldygpOwogICAgfSk7CgogICAgZGVsZXRlIHRo
        aXMudGVhcmRvd25Ub3BMZXZlbFZpZXc7CiAgICBkZWxldGUgdGhpcy50ZWFy
        ZG93bk91dGxldFZpZXdzOwogICAgZGVsZXRlIHRoaXMubGFzdFJlbmRlcmVk
        VGVtcGxhdGU7CiAgfQp9KTsKCmZ1bmN0aW9uIHBhcmVudFJvdXRlKHJvdXRl
        KSB7CiAgdmFyIGhhbmRsZXJJbmZvcyA9IHJvdXRlLnJvdXRlci5yb3V0ZXIu
        dGFyZ2V0SGFuZGxlckluZm9zOwoKICBpZiAoIWhhbmRsZXJJbmZvcykgeyBy
        ZXR1cm47IH0KCiAgdmFyIHBhcmVudCwgY3VycmVudDsKCiAgZm9yICh2YXIg
        aT0wLCBsPWhhbmRsZXJJbmZvcy5sZW5ndGg7IGk8bDsgaSsrKSB7CiAgICBj
        dXJyZW50ID0gaGFuZGxlckluZm9zW2ldLmhhbmRsZXI7CiAgICBpZiAoY3Vy
        cmVudCA9PT0gcm91dGUpIHsgcmV0dXJuIHBhcmVudDsgfQogICAgcGFyZW50
        ID0gY3VycmVudDsKICB9Cn0KCmZ1bmN0aW9uIHBhcmVudFRlbXBsYXRlKHJv
        dXRlKSB7CiAgdmFyIHBhcmVudCA9IHBhcmVudFJvdXRlKHJvdXRlKSwgdGVt
        cGxhdGU7CgogIGlmICghcGFyZW50KSB7IHJldHVybjsgfQoKICBpZiAodGVt
        cGxhdGUgPSBwYXJlbnQubGFzdFJlbmRlcmVkVGVtcGxhdGUpIHsKICAgIHJl
        dHVybiB0ZW1wbGF0ZTsKICB9IGVsc2UgewogICAgcmV0dXJuIHBhcmVudFRl
        bXBsYXRlKHBhcmVudCk7CiAgfQp9CgpmdW5jdGlvbiBub3JtYWxpemVPcHRp
        b25zKHJvdXRlLCBuYW1lLCB0ZW1wbGF0ZSwgb3B0aW9ucykgewogIG9wdGlv
        bnMgPSBvcHRpb25zIHx8IHt9OwogIG9wdGlvbnMuaW50byA9IG9wdGlvbnMu
        aW50byA/IG9wdGlvbnMuaW50by5yZXBsYWNlKC9cLy9nLCAnLicpIDogcGFy
        ZW50VGVtcGxhdGUocm91dGUpOwogIG9wdGlvbnMub3V0bGV0ID0gb3B0aW9u
        cy5vdXRsZXQgfHwgJ21haW4nOwogIG9wdGlvbnMubmFtZSA9IG5hbWU7CiAg
        b3B0aW9ucy50ZW1wbGF0ZSA9IHRlbXBsYXRlOwogIG9wdGlvbnMuTE9HX1ZJ
        RVdfTE9PS1VQUyA9IGdldChyb3V0ZS5yb3V0ZXIsICduYW1lc3BhY2UuTE9H
        X1ZJRVdfTE9PS1VQUycpOwoKICBFbWJlci5hc3NlcnQoIkFuIG91dGxldCAo
        IitvcHRpb25zLm91dGxldCsiKSB3YXMgc3BlY2lmaWVkIGJ1dCB3YXMgbm90
        IGZvdW5kLiIsIG9wdGlvbnMub3V0bGV0ID09PSAnbWFpbicgfHwgb3B0aW9u
        cy5pbnRvKTsKCiAgdmFyIGNvbnRyb2xsZXIgPSBvcHRpb25zLmNvbnRyb2xs
        ZXIsIG5hbWVkQ29udHJvbGxlcjsKCiAgaWYgKG9wdGlvbnMuY29udHJvbGxl
        cikgewogICAgY29udHJvbGxlciA9IG9wdGlvbnMuY29udHJvbGxlcjsKICB9
        IGVsc2UgaWYgKG5hbWVkQ29udHJvbGxlciA9IHJvdXRlLmNvbnRhaW5lci5s
        b29rdXAoJ2NvbnRyb2xsZXI6JyArIG5hbWUpKSB7CiAgICBjb250cm9sbGVy
        ID0gbmFtZWRDb250cm9sbGVyOwogIH0gZWxzZSB7CiAgICBjb250cm9sbGVy
        ID0gcm91dGUuY29udHJvbGxlck5hbWUgfHwgcm91dGUucm91dGVOYW1lOwog
        IH0KCiAgaWYgKHR5cGVvZiBjb250cm9sbGVyID09PSAnc3RyaW5nJykgewog
        ICAgY29udHJvbGxlciA9IHJvdXRlLmNvbnRhaW5lci5sb29rdXAoJ2NvbnRy
        b2xsZXI6JyArIGNvbnRyb2xsZXIpOwogIH0KCiAgb3B0aW9ucy5jb250cm9s
        bGVyID0gY29udHJvbGxlcjsKCiAgcmV0dXJuIG9wdGlvbnM7Cn0KCmZ1bmN0
        aW9uIHNldHVwVmlldyh2aWV3LCBjb250YWluZXIsIG9wdGlvbnMpIHsKICBp
        ZiAodmlldykgewogICAgaWYgKG9wdGlvbnMuTE9HX1ZJRVdfTE9PS1VQUykg
        ewogICAgICBFbWJlci5Mb2dnZXIuaW5mbygiUmVuZGVyaW5nICIgKyBvcHRp
        b25zLm5hbWUgKyAiIHdpdGggIiArIHZpZXcsIHsgZnVsbE5hbWU6ICd2aWV3
        OicgKyBvcHRpb25zLm5hbWUgfSk7CiAgICB9CiAgfSBlbHNlIHsKICAgIHZh
        ciBkZWZhdWx0VmlldyA9IG9wdGlvbnMuaW50byA/ICd2aWV3OmRlZmF1bHQn
        IDogJ3ZpZXc6dG9wbGV2ZWwnOwogICAgdmlldyA9IGNvbnRhaW5lci5sb29r
        dXAoZGVmYXVsdFZpZXcpOwogICAgaWYgKG9wdGlvbnMuTE9HX1ZJRVdfTE9P
        S1VQUykgewogICAgICBFbWJlci5Mb2dnZXIuaW5mbygiUmVuZGVyaW5nICIg
        KyBvcHRpb25zLm5hbWUgKyAiIHdpdGggZGVmYXVsdCB2aWV3ICIgKyB2aWV3
        LCB7IGZ1bGxOYW1lOiAndmlldzonICsgb3B0aW9ucy5uYW1lIH0pOwogICAg
        fQogIH0KCiAgaWYgKCFnZXQodmlldywgJ3RlbXBsYXRlTmFtZScpKSB7CiAg
        ICBzZXQodmlldywgJ3RlbXBsYXRlJywgb3B0aW9ucy50ZW1wbGF0ZSk7Cgog
        ICAgc2V0KHZpZXcsICdfZGVidWdUZW1wbGF0ZU5hbWUnLCBvcHRpb25zLm5h
        bWUpOwogIH0KCiAgc2V0KHZpZXcsICdyZW5kZXJlZE5hbWUnLCBvcHRpb25z
        Lm5hbWUpOwogIHNldCh2aWV3LCAnY29udHJvbGxlcicsIG9wdGlvbnMuY29u
        dHJvbGxlcik7CgogIHJldHVybiB2aWV3Owp9CgpmdW5jdGlvbiBhcHBlbmRW
        aWV3KHJvdXRlLCB2aWV3LCBvcHRpb25zKSB7CiAgaWYgKG9wdGlvbnMuaW50
        bykgewogICAgdmFyIHBhcmVudFZpZXcgPSByb3V0ZS5yb3V0ZXIuX2xvb2t1
        cEFjdGl2ZVZpZXcob3B0aW9ucy5pbnRvKTsKICAgIHZhciB0ZWFyZG93bk91
        dGxldFZpZXcgPSBnZW5lcmF0ZU91dGxldFRlYXJkb3duKHBhcmVudFZpZXcs
        IG9wdGlvbnMub3V0bGV0KTsKICAgIGlmICghcm91dGUudGVhcmRvd25PdXRs
        ZXRWaWV3cykgeyByb3V0ZS50ZWFyZG93bk91dGxldFZpZXdzID0gW107IH0K
        ICAgIGFfcmVwbGFjZShyb3V0ZS50ZWFyZG93bk91dGxldFZpZXdzLCAwLCAw
        LCBbdGVhcmRvd25PdXRsZXRWaWV3XSk7CiAgICBwYXJlbnRWaWV3LmNvbm5l
        Y3RPdXRsZXQob3B0aW9ucy5vdXRsZXQsIHZpZXcpOwogIH0gZWxzZSB7CiAg
        ICB2YXIgcm9vdEVsZW1lbnQgPSBnZXQocm91dGUsICdyb3V0ZXIubmFtZXNw
        YWNlLnJvb3RFbGVtZW50Jyk7CiAgICAvLyB0ZWFyIGRvd24gdmlldyBpZiBv
        bmUgaXMgYWxyZWFkeSByZW5kZXJlZAogICAgaWYgKHJvdXRlLnRlYXJkb3du
        VG9wTGV2ZWxWaWV3KSB7CiAgICAgIHJvdXRlLnRlYXJkb3duVG9wTGV2ZWxW
        aWV3KCk7CiAgICB9CiAgICByb3V0ZS5yb3V0ZXIuX2Nvbm5lY3RBY3RpdmVW
        aWV3KG9wdGlvbnMubmFtZSwgdmlldyk7CiAgICByb3V0ZS50ZWFyZG93blRv
        cExldmVsVmlldyA9IGdlbmVyYXRlVG9wTGV2ZWxUZWFyZG93bih2aWV3KTsK
        ICAgIHZpZXcuYXBwZW5kVG8ocm9vdEVsZW1lbnQpOwogIH0KfQoKZnVuY3Rp
        b24gZ2VuZXJhdGVUb3BMZXZlbFRlYXJkb3duKHZpZXcpIHsKICByZXR1cm4g
        ZnVuY3Rpb24oKSB7IHZpZXcuZGVzdHJveSgpOyB9Owp9CgpmdW5jdGlvbiBn
        ZW5lcmF0ZU91dGxldFRlYXJkb3duKHBhcmVudFZpZXcsIG91dGxldCkgewog
        IHJldHVybiBmdW5jdGlvbigpIHsgcGFyZW50Vmlldy5kaXNjb25uZWN0T3V0
        bGV0KG91dGxldCk7IH07Cn0KCmZ1bmN0aW9uIGZpbmRDaGlsZFJvdXRlTmFt
        ZShyb3V0ZSwgbmFtZSkgewogIHZhciBjb250YWluZXIgPSByb3V0ZS5jb250
        YWluZXI7CgogIHZhciBjaGlsZE5hbWUgPSByb3V0ZS5yb3V0ZU5hbWUgPT09
        ICdhcHBsaWNhdGlvbicgPyBuYW1lIDogcm91dGUucm91dGVOYW1lICsgJy4n
        ICsgbmFtZTsKCiAgdmFyIGhhc0NoaWxkID0gcm91dGUucm91dGVyLmhhc1Jv
        dXRlKGNoaWxkTmFtZSkgJiYKICAgICAgICAgICAgICAgICAoY29udGFpbmVy
        LmhhcygndGVtcGxhdGU6JyArIGNoaWxkTmFtZSkgfHwKICAgICAgICAgICAg
        ICAgICAgY29udGFpbmVyLmhhcygncm91dGU6JyArIGNoaWxkTmFtZSkpOwoK
        ICByZXR1cm4gaGFzQ2hpbGQgJiYgY2hpbGROYW1lOwp9CgoKfSkoKTsKCgoK
        KGZ1bmN0aW9uKCkgewoKfSkoKTsKCgoKKGZ1bmN0aW9uKCkgewpFbWJlci5v
        bkxvYWQoJ0VtYmVyLkhhbmRsZWJhcnMnLCBmdW5jdGlvbigpIHsKICB2YXIg
        aGFuZGxlYmFyc1Jlc29sdmUgPSBFbWJlci5IYW5kbGViYXJzLnJlc29sdmVQ
        YXJhbXMsCiAgICAgIG1hcCA9IEVtYmVyLkFycmF5UG9seWZpbGxzLm1hcCwK
        ICAgICAgZ2V0ID0gRW1iZXIuZ2V0LAogICAgICBoYW5kbGViYXJzR2V0ID0g
        RW1iZXIuSGFuZGxlYmFycy5nZXQ7CgogIGZ1bmN0aW9uIHJlc29sdmVQYXJh
        bXMoY29udGV4dCwgcGFyYW1zLCBvcHRpb25zKSB7CiAgICByZXR1cm4gbWFw
        LmNhbGwocmVzb2x2ZVBhdGhzKGNvbnRleHQsIHBhcmFtcywgb3B0aW9ucyks
        IGZ1bmN0aW9uKHBhdGgsIGkpIHsKICAgICAgaWYgKG51bGwgPT09IHBhdGgp
        IHsKICAgICAgICAvLyBQYXJhbSB3YXMgc3RyaW5nL251bWJlciwgbm90IGEg
        cGF0aCwgc28ganVzdCByZXR1cm4gcmF3IHN0cmluZy9udW1iZXIuCiAgICAg
        ICAgcmV0dXJuIHBhcmFtc1tpXTsKICAgICAgfSBlbHNlIHsKICAgICAgICBy
        ZXR1cm4gaGFuZGxlYmFyc0dldChjb250ZXh0LCBwYXRoLCBvcHRpb25zKTsK
        ICAgICAgfQogICAgfSk7CiAgfQoKICBmdW5jdGlvbiByZXNvbHZlUGF0aHMo
        Y29udGV4dCwgcGFyYW1zLCBvcHRpb25zKSB7CiAgICB2YXIgcmVzb2x2ZWQg
        PSBoYW5kbGViYXJzUmVzb2x2ZShjb250ZXh0LCBwYXJhbXMsIG9wdGlvbnMp
        LAogICAgICAgIHR5cGVzID0gb3B0aW9ucy50eXBlczsKCiAgICByZXR1cm4g
        bWFwLmNhbGwocmVzb2x2ZWQsIGZ1bmN0aW9uKG9iamVjdCwgaSkgewogICAg
        ICBpZiAodHlwZXNbaV0gPT09ICdJRCcpIHsKICAgICAgICByZXR1cm4gdW53
        cmFwKG9iamVjdCwgcGFyYW1zW2ldKTsKICAgICAgfSBlbHNlIHsKICAgICAg
        ICByZXR1cm4gbnVsbDsKICAgICAgfQogICAgfSk7CgogICAgZnVuY3Rpb24g
        dW53cmFwKG9iamVjdCwgcGF0aCkgewogICAgICBpZiAocGF0aCA9PT0gJ2Nv
        bnRyb2xsZXInKSB7IHJldHVybiBwYXRoOyB9CgogICAgICBpZiAoRW1iZXIu
        Q29udHJvbGxlck1peGluLmRldGVjdChvYmplY3QpKSB7CiAgICAgICAgcmV0
        dXJuIHVud3JhcChnZXQob2JqZWN0LCAnbW9kZWwnKSwgcGF0aCA/IHBhdGgg
        KyAnLm1vZGVsJyA6ICdtb2RlbCcpOwogICAgICB9IGVsc2UgewogICAgICAg
        IHJldHVybiBwYXRoOwogICAgICB9CiAgICB9CiAgfQoKICBFbWJlci5Sb3V0
        ZXIucmVzb2x2ZVBhcmFtcyA9IHJlc29sdmVQYXJhbXM7CiAgRW1iZXIuUm91
        dGVyLnJlc29sdmVQYXRocyA9IHJlc29sdmVQYXRoczsKfSk7Cgp9KSgpOwoK
        CgooZnVuY3Rpb24oKSB7Ci8qKgpAbW9kdWxlIGVtYmVyCkBzdWJtb2R1bGUg
        ZW1iZXItcm91dGluZwoqLwoKdmFyIGdldCA9IEVtYmVyLmdldCwgc2V0ID0g
        RW1iZXIuc2V0LCBmbXQgPSBFbWJlci5TdHJpbmcuZm10OwpFbWJlci5vbkxv
        YWQoJ0VtYmVyLkhhbmRsZWJhcnMnLCBmdW5jdGlvbihIYW5kbGViYXJzKSB7
        CgogIHZhciByZXNvbHZlUGFyYW1zID0gRW1iZXIuUm91dGVyLnJlc29sdmVQ
        YXJhbXMsCiAgICAgIHJlc29sdmVQYXRocyAgPSBFbWJlci5Sb3V0ZXIucmVz
        b2x2ZVBhdGhzLAogICAgICBpc1NpbXBsZUNsaWNrID0gRW1iZXIuVmlld1V0
        aWxzLmlzU2ltcGxlQ2xpY2s7CgogIGZ1bmN0aW9uIGZ1bGxSb3V0ZU5hbWUo
        cm91dGVyLCBuYW1lKSB7CiAgICBpZiAoIXJvdXRlci5oYXNSb3V0ZShuYW1l
        KSkgewogICAgICBuYW1lID0gbmFtZSArICcuaW5kZXgnOwogICAgfQoKICAg
        IHJldHVybiBuYW1lOwogIH0KCiAgZnVuY3Rpb24gZ2V0UmVzb2x2ZWRQYXRo
        cyhvcHRpb25zKSB7CgogICAgdmFyIHR5cGVzID0gb3B0aW9ucy5vcHRpb25z
        LnR5cGVzLAogICAgICAgIGRhdGEgPSBvcHRpb25zLm9wdGlvbnMuZGF0YTsK
        CiAgICByZXR1cm4gcmVzb2x2ZVBhdGhzKG9wdGlvbnMuY29udGV4dCwgb3B0
        aW9ucy5wYXJhbXMsIHsgdHlwZXM6IHR5cGVzLCBkYXRhOiBkYXRhIH0pOwog
        IH0KCiAgLyoqCiAgICBgRW1iZXIuTGlua1ZpZXdgIHJlbmRlcnMgYW4gZWxl
        bWVudCB3aG9zZSBgY2xpY2tgIGV2ZW50IHRyaWdnZXJzIGEKICAgIHRyYW5z
        aXRpb24gb2YgdGhlIGFwcGxpY2F0aW9uJ3MgaW5zdGFuY2Ugb2YgYEVtYmVy
        LlJvdXRlcmAgdG8KICAgIGEgc3VwcGxpZWQgcm91dGUgYnkgbmFtZS4KCiAg
        ICBJbnN0YW5jZXMgb2YgYExpbmtWaWV3YCB3aWxsIG1vc3QgbGlrZWx5IGJl
        IGNyZWF0ZWQgdGhyb3VnaAogICAgdGhlIGBsaW5rLXRvYCBIYW5kbGViYXJz
        IGhlbHBlciwgYnV0IHByb3BlcnRpZXMgb2YgdGhpcyBjbGFzcwogICAgY2Fu
        IGJlIG92ZXJyaWRkZW4gdG8gY3VzdG9taXplIGFwcGxpY2F0aW9uLXdpZGUg
        YmVoYXZpb3IuCgogICAgQGNsYXNzIExpbmtWaWV3CiAgICBAbmFtZXNwYWNl
        IEVtYmVyCiAgICBAZXh0ZW5kcyBFbWJlci5WaWV3CiAgICBAc2VlIHtIYW5k
        bGViYXJzLmhlbHBlcnMubGluay10b30KICAqKi8KICB2YXIgTGlua1ZpZXcg
        PSBFbWJlci5MaW5rVmlldyA9IEVtYmVyLlZpZXcuZXh0ZW5kKHsKICAgIHRh
        Z05hbWU6ICdhJywKICAgIGN1cnJlbnRXaGVuOiBudWxsLAoKICAgIC8qKgog
        ICAgICBTZXRzIHRoZSBgdGl0bGVgIGF0dHJpYnV0ZSBvZiB0aGUgYExpbmtW
        aWV3YCdzIEhUTUwgZWxlbWVudC4KCiAgICAgIEBwcm9wZXJ0eSB0aXRsZQog
        ICAgICBAZGVmYXVsdCBudWxsCiAgICAqKi8KICAgIHRpdGxlOiBudWxsLAoK
        ICAgIC8qKgogICAgICBTZXRzIHRoZSBgcmVsYCBhdHRyaWJ1dGUgb2YgdGhl
        IGBMaW5rVmlld2AncyBIVE1MIGVsZW1lbnQuCgogICAgICBAcHJvcGVydHkg
        cmVsCiAgICAgIEBkZWZhdWx0IG51bGwKICAgICoqLwogICAgcmVsOiBudWxs
        LAoKICAgIC8qKgogICAgICBUaGUgQ1NTIGNsYXNzIHRvIGFwcGx5IHRvIGBM
        aW5rVmlld2AncyBlbGVtZW50IHdoZW4gaXRzIGBhY3RpdmVgCiAgICAgIHBy
        b3BlcnR5IGlzIGB0cnVlYC4KCiAgICAgIEBwcm9wZXJ0eSBhY3RpdmVDbGFz
        cwogICAgICBAdHlwZSBTdHJpbmcKICAgICAgQGRlZmF1bHQgYWN0aXZlCiAg
        ICAqKi8KICAgIGFjdGl2ZUNsYXNzOiAnYWN0aXZlJywKCiAgICAvKioKICAg
        ICAgVGhlIENTUyBjbGFzcyB0byBhcHBseSB0byBgTGlua1ZpZXdgJ3MgZWxl
        bWVudCB3aGVuIGl0cyBgbG9hZGluZ2AKICAgICAgcHJvcGVydHkgaXMgYHRy
        dWVgLgoKICAgICAgQHByb3BlcnR5IGxvYWRpbmdDbGFzcwogICAgICBAdHlw
        ZSBTdHJpbmcKICAgICAgQGRlZmF1bHQgbG9hZGluZwogICAgKiovCiAgICBs
        b2FkaW5nQ2xhc3M6ICdsb2FkaW5nJywKCiAgICAvKioKICAgICAgVGhlIENT
        UyBjbGFzcyB0byBhcHBseSB0byBhIGBMaW5rVmlld2AncyBlbGVtZW50IHdo
        ZW4gaXRzIGBkaXNhYmxlZGAKICAgICAgcHJvcGVydHkgaXMgYHRydWVgLgoK
        ICAgICAgQHByb3BlcnR5IGRpc2FibGVkQ2xhc3MKICAgICAgQHR5cGUgU3Ry
        aW5nCiAgICAgIEBkZWZhdWx0IGRpc2FibGVkCiAgICAqKi8KICAgIGRpc2Fi
        bGVkQ2xhc3M6ICdkaXNhYmxlZCcsCiAgICBfaXNEaXNhYmxlZDogZmFsc2Us
        CgogICAgLyoqCiAgICAgIERldGVybWluZXMgd2hldGhlciB0aGUgYExpbmtW
        aWV3YCB3aWxsIHRyaWdnZXIgcm91dGluZyB2aWEKICAgICAgdGhlIGByZXBs
        YWNlV2l0aGAgcm91dGluZyBzdHJhdGVneS4KCiAgICAgIEBwcm9wZXJ0eSBy
        ZXBsYWNlCiAgICAgIEB0eXBlIEJvb2xlYW4KICAgICAgQGRlZmF1bHQgZmFs
        c2UKICAgICoqLwogICAgcmVwbGFjZTogZmFsc2UsCgogICAgLyoqCiAgICAg
        IEJ5IGRlZmF1bHQgdGhlIGB7e2xpbmstdG99fWAgaGVscGVyIHdpbGwgYmlu
        ZCB0byB0aGUgYGhyZWZgIGFuZAogICAgICBgdGl0bGVgIGF0dHJpYnV0ZXMu
        IEl0J3MgZGlzY291cmFnZSB0aGF0IHlvdSBvdmVycmlkZSB0aGVzZSBkZWZh
        dWx0cywKICAgICAgaG93ZXZlciB5b3UgY2FuIHB1c2ggb250byB0aGUgYXJy
        YXkgaWYgbmVlZGVkLgoKICAgICAgQHByb3BlcnR5IGF0dHJpYnV0ZUJpbmRp
        bmdzCiAgICAgIEB0eXBlIEFycmF5IHwgU3RyaW5nCiAgICAgIEBkZWZhdWx0
        IFsnaHJlZicsICd0aXRsZScsICdyZWwnXQogICAgICoqLwogICAgYXR0cmli
        dXRlQmluZGluZ3M6IFsnaHJlZicsICd0aXRsZScsICdyZWwnXSwKCiAgICAv
        KioKICAgICAgQnkgZGVmYXVsdCB0aGUgYHt7bGluay10b319YCBoZWxwZXIg
        d2lsbCBiaW5kIHRvIHRoZSBgYWN0aXZlYCwgYGxvYWRpbmdgLCBhbmQKICAg
        ICAgYGRpc2FibGVkYCBjbGFzc2VzLiBJdCBpcyBkaXNjb3VyYWdlZCB0byBv
        dmVycmlkZSB0aGVzZSBkaXJlY3RseS4KCiAgICAgIEBwcm9wZXJ0eSBjbGFz
        c05hbWVCaW5kaW5ncwogICAgICBAdHlwZSBBcnJheQogICAgICBAZGVmYXVs
        dCBbJ2FjdGl2ZScsICdsb2FkaW5nJywgJ2Rpc2FibGVkJ10KICAgICAqKi8K
        ICAgIGNsYXNzTmFtZUJpbmRpbmdzOiBbJ2FjdGl2ZScsICdsb2FkaW5nJywg
        J2Rpc2FibGVkJ10sCgogICAgLyoqCiAgICAgIEJ5IGRlZmF1bHQgdGhlIGB7
        e2xpbmstdG99fWAgaGVscGVyIHJlc3BvbmRzIHRvIHRoZSBgY2xpY2tgIGV2
        ZW50LiBZb3UKICAgICAgY2FuIG92ZXJyaWRlIHRoaXMgZ2xvYmFsbHkgYnkg
        c2V0dGluZyB0aGlzIHByb3BlcnR5IHRvIHlvdXIgY3VzdG9tCiAgICAgIGV2
        ZW50IG5hbWUuCgogICAgICBUaGlzIGlzIHBhcnRpY3VsYXJseSB1c2VmdWwg
        b24gbW9iaWxlIHdoZW4gb25lIHdhbnRzIHRvIGF2b2lkIHRoZSAzMDBtcwog
        ICAgICBjbGljayBkZWxheSB1c2luZyBzb21lIHNvcnQgb2YgY3VzdG9tIGB0
        YXBgIGV2ZW50LgoKICAgICAgQHByb3BlcnR5IGV2ZW50TmFtZQogICAgICBA
        dHlwZSBTdHJpbmcKICAgICAgQGRlZmF1bHQgY2xpY2sKICAgICovCiAgICBl
        dmVudE5hbWU6ICdjbGljaycsCgogICAgLy8gdGhpcyBpcyBkb2MnZWQgaGVy
        ZSBzbyBpdCBzaG93cyB1cCBpbiB0aGUgZXZlbnRzCiAgICAvLyBzZWN0aW9u
        IG9mIHRoZSBBUEkgZG9jdW1lbnRhdGlvbiwgd2hpY2ggaXMgd2hlcmUKICAg
        IC8vIHBlb3BsZSB3aWxsIGxpa2VseSBnbyBsb29raW5nIGZvciBpdC4KICAg
        IC8qKgogICAgICBUcmlnZ2VycyB0aGUgYExpbmtWaWV3YCdzIHJvdXRpbmcg
        YmVoYXZpb3IuIElmCiAgICAgIGBldmVudE5hbWVgIGlzIGNoYW5nZWQgdG8g
        YSB2YWx1ZSBvdGhlciB0aGFuIGBjbGlja2AKICAgICAgdGhlIHJvdXRpbmcg
        YmVoYXZpb3Igd2lsbCB0cmlnZ2VyIG9uIHRoYXQgY3VzdG9tIGV2ZW50CiAg
        ICAgIGluc3RlYWQuCgogICAgICBAZXZlbnQgY2xpY2sKICAgICoqLwoKICAg
        IC8qKgogICAgICBBbiBvdmVycmlkYWJsZSBtZXRob2QgY2FsbGVkIHdoZW4g
        TGlua1ZpZXcgb2JqZWN0cyBhcmUgaW5zdGFudGlhdGVkLgoKICAgICAgRXhh
        bXBsZToKCiAgICAgIGBgYGphdmFzY3JpcHQKICAgICAgQXBwLk15TGlua1Zp
        ZXcgPSBFbWJlci5MaW5rVmlldy5leHRlbmQoewogICAgICAgIGluaXQ6IGZ1
        bmN0aW9uKCkgewogICAgICAgICAgdGhpcy5fc3VwZXIoKTsKICAgICAgICAg
        IEVtYmVyLkxvZ2dlci5sb2coJ0V2ZW50IGlzICcgKyB0aGlzLmdldCgnZXZl
        bnROYW1lJykpOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIGBgYAoKICAg
        ICAgTk9URTogSWYgeW91IGRvIG92ZXJyaWRlIGBpbml0YCBmb3IgYSBmcmFt
        ZXdvcmsgY2xhc3MgbGlrZSBgRW1iZXIuVmlld2Agb3IKICAgICAgYEVtYmVy
        LkFycmF5Q29udHJvbGxlcmAsIGJlIHN1cmUgdG8gY2FsbCBgdGhpcy5fc3Vw
        ZXIoKWAgaW4geW91cgogICAgICBgaW5pdGAgZGVjbGFyYXRpb24hIElmIHlv
        dSBkb24ndCwgRW1iZXIgbWF5IG5vdCBoYXZlIGFuIG9wcG9ydHVuaXR5IHRv
        CiAgICAgIGRvIGltcG9ydGFudCBzZXR1cCB3b3JrLCBhbmQgeW91J2xsIHNl
        ZSBzdHJhbmdlIGJlaGF2aW9yIGluIHlvdXIKICAgICAgYXBwbGljYXRpb24u
        CgogICAgICBAbWV0aG9kIGluaXQKICAgICovCiAgICBpbml0OiBmdW5jdGlv
        bigpIHsKICAgICAgdGhpcy5fc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRz
        KTsKCiAgICAgIC8vIE1hcCBkZXNpcmVkIGV2ZW50IG5hbWUgdG8gaW52b2tl
        IGZ1bmN0aW9uCiAgICAgIHZhciBldmVudE5hbWUgPSBnZXQodGhpcywgJ2V2
        ZW50TmFtZScpOwogICAgICB0aGlzLm9uKGV2ZW50TmFtZSwgdGhpcywgdGhp
        cy5faW52b2tlKTsKCiAgICAgIHZhciBoZWxwZXJQYXJhbWV0ZXJzID0gdGhp
        cy5wYXJhbWV0ZXJzLAogICAgICAgICAgdGVtcGxhdGVDb250ZXh0ID0gaGVs
        cGVyUGFyYW1ldGVycy5jb250ZXh0LAogICAgICAgICAgcGF0aHMgPSBnZXRS
        ZXNvbHZlZFBhdGhzKGhlbHBlclBhcmFtZXRlcnMpLAogICAgICAgICAgbGVu
        Z3RoID0gcGF0aHMubGVuZ3RoLAogICAgICAgICAgcGF0aCwgaSwgbm9ybWFs
        aXplZFBhdGg7CgogICAgICAKICAgICAgICB2YXIgbGlua1RleHRQYXRoID0g
        aGVscGVyUGFyYW1ldGVycy5vcHRpb25zLmxpbmtUZXh0UGF0aDsKICAgICAg
        ICBpZiAobGlua1RleHRQYXRoKSB7CiAgICAgICAgICBub3JtYWxpemVkUGF0
        aCA9IEVtYmVyLkhhbmRsZWJhcnMubm9ybWFsaXplUGF0aCh0ZW1wbGF0ZUNv
        bnRleHQsIGxpbmtUZXh0UGF0aCwgaGVscGVyUGFyYW1ldGVycy5vcHRpb25z
        LmRhdGEpOwogICAgICAgICAgdGhpcy5yZWdpc3Rlck9ic2VydmVyKG5vcm1h
        bGl6ZWRQYXRoLnJvb3QsIG5vcm1hbGl6ZWRQYXRoLnBhdGgsIHRoaXMsIHRo
        aXMucmVyZW5kZXIpOwogICAgICAgIH0KICAgICAgCgogICAgICBmb3IoaT0w
        OyBpIDwgbGVuZ3RoOyBpKyspIHsKICAgICAgICBwYXRoID0gcGF0aHNbaV07
        CiAgICAgICAgaWYgKG51bGwgPT09IHBhdGgpIHsKICAgICAgICAgIC8vIEEg
        bGl0ZXJhbCB2YWx1ZSB3YXMgcHJvdmlkZWQsIG5vdCBhIHBhdGgsIHNvIG5v
        dGhpbmcgdG8gb2JzZXJ2ZS4KICAgICAgICAgIGNvbnRpbnVlOwogICAgICAg
        IH0KCiAgICAgICAgbm9ybWFsaXplZFBhdGggPSBFbWJlci5IYW5kbGViYXJz
        Lm5vcm1hbGl6ZVBhdGgodGVtcGxhdGVDb250ZXh0LCBwYXRoLCBoZWxwZXJQ
        YXJhbWV0ZXJzLm9wdGlvbnMuZGF0YSk7CiAgICAgICAgdGhpcy5yZWdpc3Rl
        ck9ic2VydmVyKG5vcm1hbGl6ZWRQYXRoLnJvb3QsIG5vcm1hbGl6ZWRQYXRo
        LnBhdGgsIHRoaXMsIHRoaXMuX3BhcmFtc0NoYW5nZWQpOwogICAgICB9CgoK
        ICAgICAgICAgIH0sCgogICAgLyoqCiAgICAgIEBwcml2YXRlCgogICAgICBU
        aGlzIG1ldGhvZCBpcyBpbnZva2VkIGJ5IG9ic2VydmVycyBpbnN0YWxsZWQg
        ZHVyaW5nIGBpbml0YCB0aGF0IGZpcmUKICAgICAgd2hlbmV2ZXIgdGhlIHBh
        cmFtcyBjaGFuZ2UKICAgICAgQG1ldGhvZCBfcGFyYW1zQ2hhbmdlZAogICAg
        ICovCiAgICBfcGFyYW1zQ2hhbmdlZDogZnVuY3Rpb24oKSB7CiAgICAgIHRo
        aXMubm90aWZ5UHJvcGVydHlDaGFuZ2UoJ3Jlc29sdmVkUGFyYW1zJyk7CiAg
        ICB9LAoKCiAgICAvKioKICAgICAgQHByaXZhdGUKCiAgICAgIFRoaXMgbWV0
        aG9kIGlzIGludm9rZWQgYnkgb2JzZXJ2ZXJzIGluc3RhbGxlZCBkdXJpbmcg
        YGluaXRgIHRoYXQgZmlyZQogICAgICB3aGVuZXZlciB0aGUgcXVlcnkgcGFy
        YW1zIGNoYW5nZQogICAgICovCiAgICBfcXVlcnlQYXJhbXNDaGFuZ2VkOiBm
        dW5jdGlvbiAob2JqZWN0LCBwYXRoKSB7CiAgICAgIHRoaXMubm90aWZ5UHJv
        cGVydHlDaGFuZ2UoJ3F1ZXJ5UGFyYW1zJyk7CiAgICB9LAoKCiAgICAvKioK
        ICAgICAgQHByaXZhdGUKCiAgICAgIEV2ZW4gdGhvdWdoIHRoaXMgaXNuJ3Qg
        YSB2aXJ0dWFsIHZpZXcsIHdlIHdhbnQgdG8gdHJlYXQgaXQgYXMgaWYgaXQg
        aXMKICAgICAgc28gdGhhdCB5b3UgY2FuIGFjY2VzcyB0aGUgcGFyZW50IHdp
        dGgge3t2aWV3LnByb3B9fQoKICAgICAgQG1ldGhvZCBjb25jcmV0ZVZpZXcK
        ICAgICoqLwogICAgY29uY3JldGVWaWV3OiBFbWJlci5jb21wdXRlZChmdW5j
        dGlvbigpIHsKICAgICAgcmV0dXJuIGdldCh0aGlzLCAncGFyZW50Vmlldycp
        OwogICAgfSkucHJvcGVydHkoJ3BhcmVudFZpZXcnKSwKCiAgICAvKioKCiAg
        ICAgIEFjY2Vzc2VkIGFzIGEgY2xhc3NuYW1lIGJpbmRpbmcgdG8gYXBwbHkg
        dGhlIGBMaW5rVmlld2AncyBgZGlzYWJsZWRDbGFzc2AKICAgICAgQ1NTIGBj
        bGFzc2AgdG8gdGhlIGVsZW1lbnQgd2hlbiB0aGUgbGluayBpcyBkaXNhYmxl
        ZC4KCiAgICAgIFdoZW4gYHRydWVgIGludGVyYWN0aW9ucyB3aXRoIHRoZSBl
        bGVtZW50IHdpbGwgbm90IHRyaWdnZXIgcm91dGUgY2hhbmdlcy4KICAgICAg
        QHByb3BlcnR5IGRpc2FibGVkCiAgICAqLwogICAgZGlzYWJsZWQ6IEVtYmVy
        LmNvbXB1dGVkKGZ1bmN0aW9uKGtleSwgdmFsdWUpIHsKICAgICAgaWYgKHZh
        bHVlICE9PSB1bmRlZmluZWQpIHsgdGhpcy5zZXQoJ19pc0Rpc2FibGVkJywg
        dmFsdWUpOyB9CgogICAgICByZXR1cm4gdmFsdWUgPyBnZXQodGhpcywgJ2Rp
        c2FibGVkQ2xhc3MnKSA6IGZhbHNlOwogICAgfSksCgogICAgLyoqCiAgICAg
        IEFjY2Vzc2VkIGFzIGEgY2xhc3NuYW1lIGJpbmRpbmcgdG8gYXBwbHkgdGhl
        IGBMaW5rVmlld2AncyBgYWN0aXZlQ2xhc3NgCiAgICAgIENTUyBgY2xhc3Ng
        IHRvIHRoZSBlbGVtZW50IHdoZW4gdGhlIGxpbmsgaXMgYWN0aXZlLgoKICAg
        ICAgQSBgTGlua1ZpZXdgIGlzIGNvbnNpZGVyZWQgYWN0aXZlIHdoZW4gaXRz
        IGBjdXJyZW50V2hlbmAgcHJvcGVydHkgaXMgYHRydWVgCiAgICAgIG9yIHRo
        ZSBhcHBsaWNhdGlvbidzIGN1cnJlbnQgcm91dGUgaXMgdGhlIHJvdXRlIHRo
        ZSBgTGlua1ZpZXdgIHdvdWxkIHRyaWdnZXIKICAgICAgdHJhbnNpdGlvbnMg
        aW50by4KCiAgICAgIEBwcm9wZXJ0eSBhY3RpdmUKICAgICoqLwogICAgYWN0
        aXZlOiBFbWJlci5jb21wdXRlZChmdW5jdGlvbigpIHsKICAgICAgaWYgKGdl
        dCh0aGlzLCAnbG9hZGluZycpKSB7IHJldHVybiBmYWxzZTsgfQoKICAgICAg
        dmFyIHJvdXRlciA9IGdldCh0aGlzLCAncm91dGVyJyksCiAgICAgICAgICBy
        b3V0ZUFyZ3MgPSBnZXQodGhpcywgJ3JvdXRlQXJncycpLAogICAgICAgICAg
        Y29udGV4dHMgPSByb3V0ZUFyZ3Muc2xpY2UoMSksCiAgICAgICAgICByZXNv
        bHZlZFBhcmFtcyA9IGdldCh0aGlzLCAncmVzb2x2ZWRQYXJhbXMnKSwKICAg
        ICAgICAgIGN1cnJlbnRXaGVuID0gdGhpcy5jdXJyZW50V2hlbiB8fCByZXNv
        bHZlZFBhcmFtc1swXSwKICAgICAgICAgIGN1cnJlbnRXaXRoSW5kZXggPSBj
        dXJyZW50V2hlbiArICcuaW5kZXgnLAogICAgICAgICAgaXNBY3RpdmUgPSBy
        b3V0ZXIuaXNBY3RpdmUuYXBwbHkocm91dGVyLCBbY3VycmVudFdoZW5dLmNv
        bmNhdChjb250ZXh0cykpIHx8CiAgICAgICAgICAgICAgICAgICAgIHJvdXRl
        ci5pc0FjdGl2ZS5hcHBseShyb3V0ZXIsIFtjdXJyZW50V2l0aEluZGV4XS5j
        b25jYXQoY29udGV4dHMpKTsKCiAgICAgIGlmIChpc0FjdGl2ZSkgeyByZXR1
        cm4gZ2V0KHRoaXMsICdhY3RpdmVDbGFzcycpOyB9CiAgICB9KS5wcm9wZXJ0
        eSgncmVzb2x2ZWRQYXJhbXMnLCAncm91dGVBcmdzJywgJ3JvdXRlci51cmwn
        KSwKCiAgICAvKioKICAgICAgQWNjZXNzZWQgYXMgYSBjbGFzc25hbWUgYmlu
        ZGluZyB0byBhcHBseSB0aGUgYExpbmtWaWV3YCdzIGBsb2FkaW5nQ2xhc3Ng
        CiAgICAgIENTUyBgY2xhc3NgIHRvIHRoZSBlbGVtZW50IHdoZW4gdGhlIGxp
        bmsgaXMgbG9hZGluZy4KCiAgICAgIEEgYExpbmtWaWV3YCBpcyBjb25zaWRl
        cmVkIGxvYWRpbmcgd2hlbiBpdCBoYXMgYXQgbGVhc3Qgb25lCiAgICAgIHBh
        cmFtZXRlciB3aG9zZSB2YWx1ZSBpcyBjdXJyZW50bHkgbnVsbCBvciB1bmRl
        ZmluZWQuIER1cmluZwogICAgICB0aGlzIHRpbWUsIGNsaWNraW5nIHRoZSBs
        aW5rIHdpbGwgcGVyZm9ybSBubyB0cmFuc2l0aW9uIGFuZAogICAgICBlbWl0
        IGEgd2FybmluZyB0aGF0IHRoZSBsaW5rIGlzIHN0aWxsIGluIGEgbG9hZGlu
        ZyBzdGF0ZS4KCiAgICAgIEBwcm9wZXJ0eSBsb2FkaW5nCiAgICAqKi8KICAg
        IGxvYWRpbmc6IEVtYmVyLmNvbXB1dGVkKGZ1bmN0aW9uKCkgewogICAgICBp
        ZiAoIWdldCh0aGlzLCAncm91dGVBcmdzJykpIHsgcmV0dXJuIGdldCh0aGlz
        LCAnbG9hZGluZ0NsYXNzJyk7IH0KICAgIH0pLnByb3BlcnR5KCdyb3V0ZUFy
        Z3MnKSwKCiAgICAvKioKICAgICAgQHByaXZhdGUKCiAgICAgIFJldHVybnMg
        dGhlIGFwcGxpY2F0aW9uJ3MgbWFpbiByb3V0ZXIgZnJvbSB0aGUgY29udGFp
        bmVyLgoKICAgICAgQHByb3BlcnR5IHJvdXRlcgogICAgKiovCiAgICByb3V0
        ZXI6IEVtYmVyLmNvbXB1dGVkKGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4g
        Z2V0KHRoaXMsICdjb250cm9sbGVyJykuY29udGFpbmVyLmxvb2t1cCgncm91
        dGVyOm1haW4nKTsKICAgIH0pLAoKICAgIC8qKgogICAgICBAcHJpdmF0ZQoK
        ICAgICAgRXZlbnQgaGFuZGxlciB0aGF0IGludm9rZXMgdGhlIGxpbmssIGFj
        dGl2YXRpbmcgdGhlIGFzc29jaWF0ZWQgcm91dGUuCgogICAgICBAbWV0aG9k
        IF9pbnZva2UKICAgICAgQHBhcmFtIHtFdmVudH0gZXZlbnQKICAgICovCiAg
        ICBfaW52b2tlOiBmdW5jdGlvbihldmVudCkgewogICAgICBpZiAoIWlzU2lt
        cGxlQ2xpY2soZXZlbnQpKSB7IHJldHVybiB0cnVlOyB9CgogICAgICBldmVu
        dC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICBpZiAodGhpcy5idWJibGVzID09
        PSBmYWxzZSkgeyBldmVudC5zdG9wUHJvcGFnYXRpb24oKTsgfQoKICAgICAg
        aWYgKGdldCh0aGlzLCAnX2lzRGlzYWJsZWQnKSkgeyByZXR1cm4gZmFsc2U7
        IH0KCiAgICAgIGlmIChnZXQodGhpcywgJ2xvYWRpbmcnKSkgewogICAgICAg
        IEVtYmVyLkxvZ2dlci53YXJuKCJUaGlzIGxpbmstdG8gaXMgaW4gYW4gaW5h
        Y3RpdmUgbG9hZGluZyBzdGF0ZSBiZWNhdXNlIGF0IGxlYXN0IG9uZSBvZiBp
        dHMgcGFyYW1ldGVycyBwcmVzZW50bHkgaGFzIGEgbnVsbC91bmRlZmluZWQg
        dmFsdWUsIG9yIHRoZSBwcm92aWRlZCByb3V0ZSBuYW1lIGlzIGludmFsaWQu
        Iik7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CgogICAgICB2YXIg
        cm91dGVyID0gZ2V0KHRoaXMsICdyb3V0ZXInKSwKICAgICAgICAgIHJvdXRl
        QXJncyA9IGdldCh0aGlzLCAncm91dGVBcmdzJyk7CgogICAgICBpZiAoZ2V0
        KHRoaXMsICdyZXBsYWNlJykpIHsKICAgICAgICByb3V0ZXIucmVwbGFjZVdp
        dGguYXBwbHkocm91dGVyLCByb3V0ZUFyZ3MpOwogICAgICB9IGVsc2Ugewog
        ICAgICAgIHJvdXRlci50cmFuc2l0aW9uVG8uYXBwbHkocm91dGVyLCByb3V0
        ZUFyZ3MpOwogICAgICB9CiAgICB9LAoKICAgIC8qKgogICAgICBAcHJpdmF0
        ZQoKICAgICAgQ29tcHV0ZWQgcHJvcGVydHkgdGhhdCByZXR1cm5zIHRoZSBy
        ZXNvbHZlZCBwYXJhbWV0ZXJzLgoKICAgICAgQHByb3BlcnR5CiAgICAgIEBy
        ZXR1cm4ge0FycmF5fQogICAgICovCiAgICByZXNvbHZlZFBhcmFtczogRW1i
        ZXIuY29tcHV0ZWQoZnVuY3Rpb24oKSB7CiAgICAgIHZhciBwYXJhbWV0ZXJz
        ID0gdGhpcy5wYXJhbWV0ZXJzLAogICAgICAgICAgb3B0aW9ucyA9IHBhcmFt
        ZXRlcnMub3B0aW9ucywKICAgICAgICAgIHR5cGVzID0gb3B0aW9ucy50eXBl
        cywKICAgICAgICAgIGRhdGEgPSBvcHRpb25zLmRhdGE7CgogICAgICAKICAg
        ICAgLy8gT3JpZ2luYWwgaW1wbGVtZW50YXRpb24gaWYgcXVlcnkgcGFyYW1z
        IG5vdCBlbmFibGVkCiAgICAgIHJldHVybiByZXNvbHZlUGFyYW1zKHBhcmFt
        ZXRlcnMuY29udGV4dCwgcGFyYW1ldGVycy5wYXJhbXMsIHsgdHlwZXM6IHR5
        cGVzLCBkYXRhOiBkYXRhIH0pOwogICAgfSkucHJvcGVydHkoKSwKCiAgICAv
        KioKICAgICAgQHByaXZhdGUKCiAgICAgIENvbXB1dGVkIHByb3BlcnR5IHRo
        YXQgcmV0dXJucyB0aGUgY3VycmVudCByb3V0ZSBuYW1lIGFuZAogICAgICBh
        bnkgZHluYW1pYyBzZWdtZW50cy4KCiAgICAgIEBwcm9wZXJ0eQogICAgICBA
        cmV0dXJuIHtBcnJheX0gQW4gYXJyYXkgd2l0aCB0aGUgcm91dGUgbmFtZSBh
        bmQgYW55IGR5bmFtaWMgc2VnbWVudHMKICAgICAqLwogICAgcm91dGVBcmdz
        OiBFbWJlci5jb21wdXRlZChmdW5jdGlvbigpIHsKICAgICAgdmFyIHJlc29s
        dmVkUGFyYW1zID0gZ2V0KHRoaXMsICdyZXNvbHZlZFBhcmFtcycpLnNsaWNl
        KDApLAogICAgICAgICAgcm91dGVyID0gZ2V0KHRoaXMsICdyb3V0ZXInKSwK
        ICAgICAgICAgIG5hbWVkUm91dGUgPSByZXNvbHZlZFBhcmFtc1swXTsKCiAg
        ICAgIGlmICghbmFtZWRSb3V0ZSkgeyByZXR1cm47IH0KCiAgICAgIG5hbWVk
        Um91dGUgPSBmdWxsUm91dGVOYW1lKHJvdXRlciwgbmFtZWRSb3V0ZSk7CiAg
        ICAgIHJlc29sdmVkUGFyYW1zWzBdID0gbmFtZWRSb3V0ZTsKCiAgICAgIEVt
        YmVyLmFzc2VydChmbXQoIlRoZSBhdHRlbXB0IHRvIGxpbmstdG8gcm91dGUg
        JyVAJyBmYWlsZWQuIFRoZSByb3V0ZXIgZGlkIG5vdCBmaW5kICclQCcgaW4g
        aXRzIHBvc3NpYmxlIHJvdXRlczogJyVAJyIsIFtuYW1lZFJvdXRlLCBuYW1l
        ZFJvdXRlLCBFbWJlci5rZXlzKHJvdXRlci5yb3V0ZXIucmVjb2duaXplci5u
        YW1lcykuam9pbigiJywgJyIpXSksIHJvdXRlci5oYXNSb3V0ZShuYW1lZFJv
        dXRlKSk7CgogICAgICBmb3IgKHZhciBpID0gMSwgbGVuID0gcmVzb2x2ZWRQ
        YXJhbXMubGVuZ3RoOyBpIDwgbGVuOyArK2kpIHsKICAgICAgICB2YXIgcGFy
        YW0gPSByZXNvbHZlZFBhcmFtc1tpXTsKICAgICAgICBpZiAocGFyYW0gPT09
        IG51bGwgfHwgdHlwZW9mIHBhcmFtID09PSAndW5kZWZpbmVkJykgewogICAg
        ICAgICAgLy8gSWYgY29udGV4dHMgYXJlbid0IHByZXNlbnQsIGNvbnNpZGVy
        IHRoZSBsaW5rVmlldyB1bmxvYWRlZC4KICAgICAgICAgIHJldHVybjsKICAg
        ICAgICB9CiAgICAgIH0KCiAgICAgIAogICAgICByZXR1cm4gcmVzb2x2ZWRQ
        YXJhbXM7CiAgICB9KS5wcm9wZXJ0eSgncmVzb2x2ZWRQYXJhbXMnLCAncXVl
        cnlQYXJhbXMnLCAncm91dGVyLnVybCcpLAoKCiAgICBfcG90ZW50aWFsUXVl
        cnlQYXJhbXM6IEVtYmVyLmNvbXB1dGVkKGZ1bmN0aW9uICgpIHsKICAgICAg
        dmFyIG5hbWVkUm91dGUgPSBnZXQodGhpcywgJ3Jlc29sdmVkUGFyYW1zJylb
        MF07CiAgICAgIGlmICghbmFtZWRSb3V0ZSkgeyByZXR1cm4gbnVsbDsgfQog
        ICAgICB2YXIgcm91dGVyICAgICAgICAgID0gZ2V0KHRoaXMsICdyb3V0ZXIn
        KTsKCiAgICAgIG5hbWVkUm91dGUgPSBmdWxsUm91dGVOYW1lKHJvdXRlciwg
        bmFtZWRSb3V0ZSk7CgogICAgICByZXR1cm4gcm91dGVyLnJvdXRlci5xdWVy
        eVBhcmFtc0ZvckhhbmRsZXIobmFtZWRSb3V0ZSk7CiAgICB9KS5wcm9wZXJ0
        eSgncmVzb2x2ZWRQYXJhbXMnKSwKCiAgICBxdWVyeVBhcmFtczogRW1iZXIu
        Y29tcHV0ZWQoZnVuY3Rpb24gKCkgewogICAgICB2YXIgc2VsZiAgICAgICAg
        ICAgICAgPSB0aGlzLAogICAgICAgIHF1ZXJ5UGFyYW1zICAgICAgICAgPSBu
        dWxsLAogICAgICAgIGFsbG93ZWRRdWVyeVBhcmFtcyAgPSBnZXQodGhpcywg
        J19wb3RlbnRpYWxRdWVyeVBhcmFtcycpOwoKICAgICAgaWYgKCFhbGxvd2Vk
        UXVlcnlQYXJhbXMpIHsgcmV0dXJuIG51bGw7IH0KICAgICAgYWxsb3dlZFF1
        ZXJ5UGFyYW1zLmZvckVhY2goZnVuY3Rpb24gKHBhcmFtKSB7CiAgICAgICAg
        dmFyIHZhbHVlID0gZ2V0KHNlbGYsIHBhcmFtKTsKICAgICAgICBpZiAodHlw
        ZW9mIHZhbHVlICE9PSAndW5kZWZpbmVkJykgewogICAgICAgICAgcXVlcnlQ
        YXJhbXMgPSBxdWVyeVBhcmFtcyB8fCB7fTsKICAgICAgICAgIHF1ZXJ5UGFy
        YW1zW3BhcmFtXSA9IHZhbHVlOwogICAgICAgIH0KICAgICAgfSk7CgoKICAg
        ICAgcmV0dXJuIHF1ZXJ5UGFyYW1zOwogICAgfSkucHJvcGVydHkoJ19wb3Rl
        bnRpYWxRdWVyeVBhcmFtcy5bXScpLAoKICAgIC8qKgogICAgICBTZXRzIHRo
        ZSBlbGVtZW50J3MgYGhyZWZgIGF0dHJpYnV0ZSB0byB0aGUgdXJsIGZvcgog
        ICAgICB0aGUgYExpbmtWaWV3YCdzIHRhcmdldGVkIHJvdXRlLgoKICAgICAg
        SWYgdGhlIGBMaW5rVmlld2AncyBgdGFnTmFtZWAgaXMgY2hhbmdlZCB0byBh
        IHZhbHVlIG90aGVyCiAgICAgIHRoYW4gYGFgLCB0aGlzIHByb3BlcnR5IHdp
        bGwgYmUgaWdub3JlZC4KCiAgICAgIEBwcm9wZXJ0eSBocmVmCiAgICAqKi8K
        ICAgIGhyZWY6IEVtYmVyLmNvbXB1dGVkKGZ1bmN0aW9uKCkgewogICAgICBp
        ZiAoZ2V0KHRoaXMsICd0YWdOYW1lJykgIT09ICdhJykgeyByZXR1cm47IH0K
        CiAgICAgIHZhciByb3V0ZXIgPSBnZXQodGhpcywgJ3JvdXRlcicpLAogICAg
        ICAgICAgcm91dGVBcmdzID0gZ2V0KHRoaXMsICdyb3V0ZUFyZ3MnKTsKCiAg
        ICAgIHJldHVybiByb3V0ZUFyZ3MgPyByb3V0ZXIuZ2VuZXJhdGUuYXBwbHko
        cm91dGVyLCByb3V0ZUFyZ3MpIDogZ2V0KHRoaXMsICdsb2FkaW5nSHJlZicp
        OwogICAgfSkucHJvcGVydHkoJ3JvdXRlQXJncycpLAoKICAgIC8qKgogICAg
        ICBUaGUgZGVmYXVsdCBocmVmIHZhbHVlIHRvIHVzZSB3aGlsZSBhIGxpbmst
        dG8gaXMgbG9hZGluZy4KICAgICAgT25seSBhcHBsaWVzIHdoZW4gdGFnTmFt
        ZSBpcyAnYScKCiAgICAgIEBwcm9wZXJ0eSBsb2FkaW5nSHJlZgogICAgICBA
        dHlwZSBTdHJpbmcKICAgICAgQGRlZmF1bHQgIwogICAgKi8KICAgIGxvYWRp
        bmdIcmVmOiAnIycKICB9KTsKCiAgTGlua1ZpZXcudG9TdHJpbmcgPSBmdW5j
        dGlvbigpIHsgcmV0dXJuICJMaW5rVmlldyI7IH07CgogIC8qKgogICAgVGhl
        IGB7e2xpbmstdG99fWAgaGVscGVyIHJlbmRlcnMgYSBsaW5rIHRvIHRoZSBz
        dXBwbGllZAogICAgYHJvdXRlTmFtZWAgcGFzc2luZyBhbiBvcHRpb25hbGx5
        IHN1cHBsaWVkIG1vZGVsIHRvIHRoZQogICAgcm91dGUgYXMgaXRzIGBtb2Rl
        bGAgY29udGV4dCBvZiB0aGUgcm91dGUuIFRoZSBibG9jawogICAgZm9yIGB7
        e2xpbmstdG99fWAgYmVjb21lcyB0aGUgaW5uZXJIVE1MIG9mIHRoZSByZW5k
        ZXJlZAogICAgZWxlbWVudDoKCiAgICBgYGBoYW5kbGViYXJzCiAgICB7eyNs
        aW5rLXRvICdwaG90b0dhbGxlcnknfX0KICAgICAgR3JlYXQgSGFtc3RlciBQ
        aG90b3MKICAgIHt7L2xpbmstdG99fQogICAgYGBgCgogICAgYGBgaHRtbAog
        ICAgPGEgaHJlZj0iL2hhbXN0ZXItcGhvdG9zIj4KICAgICAgR3JlYXQgSGFt
        c3RlciBQaG90b3MKICAgIDwvYT4KICAgIGBgYAoKICAgICMjIyBTdXBwbHlp
        bmcgYSB0YWdOYW1lCiAgICBCeSBkZWZhdWx0IGB7e2xpbmstdG99fWAgcmVu
        ZGVycyBhbiBgPGE+YCBlbGVtZW50LiBUaGlzIGNhbgogICAgYmUgb3ZlcnJp
        ZGRlbiBmb3IgYSBzaW5nbGUgdXNlIG9mIGB7e2xpbmstdG99fWAgYnkgc3Vw
        cGx5aW5nCiAgICBhIGB0YWdOYW1lYCBvcHRpb246CgogICAgYGBgaGFuZGxl
        YmFycwogICAge3sjbGluay10byAncGhvdG9HYWxsZXJ5JyB0YWdOYW1lPSJs
        aSJ9fQogICAgICBHcmVhdCBIYW1zdGVyIFBob3RvcwogICAge3svbGluay10
        b319CiAgICBgYGAKCiAgICBgYGBodG1sCiAgICA8bGk+CiAgICAgIEdyZWF0
        IEhhbXN0ZXIgUGhvdG9zCiAgICA8L2xpPgogICAgYGBgCgogICAgVG8gb3Zl
        cnJpZGUgdGhpcyBvcHRpb24gZm9yIHlvdXIgZW50aXJlIGFwcGxpY2F0aW9u
        LCBzZWUKICAgICJPdmVycmlkaW5nIEFwcGxpY2F0aW9uLXdpZGUgRGVmYXVs
        dHMiLgogICAgCiAgICAjIyMgRGlzYWJsaW5nIHRoZSBgbGluay10b2AgaGVs
        cGVyCiAgICBCeSBkZWZhdWx0IGB7e2xpbmstdG99fWAgaXMgZW5hYmxlZC4g
        CiAgICBhbnkgcGFzc2VkIHZhbHVlIHRvIGBkaXNhYmxlZGAgaGVscGVyIHBy
        b3BlcnR5IHdpbGwgZGlzYWJsZSB0aGUgYGxpbmstdG9gIGhlbHBlci4KICAg
        ICAKICAgIHN0YXRpYyB1c2U6IHRoZSBgZGlzYWJsZWRgIG9wdGlvbjoKIAog
        ICAgYGBgaGFuZGxlYmFycwogICAge3sjbGluay10byAncGhvdG9HYWxsZXJ5
        JyBkaXNhYmxlZD10cnVlfX0KICAgICAgR3JlYXQgSGFtc3RlciBQaG90b3MK
        ICAgIHt7L2xpbmstdG99fQogICAgYGBgCiAgICAgCiAgICBkeW5hbWljIHVz
        ZTogdGhlIGBkaXNhYmxlZFdoZW5gIG9wdGlvbjoKICAgIAogICAgYGBgaGFu
        ZGxlYmFycwogICAge3sjbGluay10byAncGhvdG9HYWxsZXJ5JyBkaXNhYmxl
        ZFdoZW49Y29udHJvbGxlci5zb21lUHJvcGVydHl9fQogICAgICBHcmVhdCBI
        YW1zdGVyIFBob3RvcwogICAge3svbGluay10b319CiAgICBgYGAKICAgIAog
        ICAgYW55IHBhc3NlZCB2YWx1ZSB0byBgZGlzYWJsZWRgIHdpbGwgZGlzYWJs
        ZSBpdCBleGNlcHQgYHVuZGVmaW5lZGAuCiAgICB0byBlbnN1cmUgdGhhdCBv
        bmx5IGB0cnVlYCBkaXNhYmxlIHRoZSBgbGluay10b2AgaGVscGVyIHlvdSBj
        YW4KICAgIG92ZXJyaWRlIHRoZSBnbG9iYWwgYmVoYXZpb3VyIG9mIGBFbWJl
        ci5MaW5rVmlld2AuCiAgICAgICAgIAogICAgYGBgamF2YXNjcmlwdCAgCiAg
        ICBFbWJlci5MaW5rVmlldy5yZW9wZW4oewogICAgICBkaXNhYmxlZDogRW1i
        ZXIuY29tcHV0ZWQoZnVuY3Rpb24oa2V5LCB2YWx1ZSkgewogICAgICAgIGlm
        ICh2YWx1ZSAhPT0gdW5kZWZpbmVkKSB7IAogICAgICAgICAgdGhpcy5zZXQo
        J19pc0Rpc2FibGVkJywgdmFsdWUgPT09IHRydWUpOyAKICAgICAgICB9CiAg
        ICAgICAgcmV0dXJuIHZhbHVlID09PSB0cnVlID8gZ2V0KHRoaXMsICdkaXNh
        YmxlZENsYXNzJykgOiBmYWxzZTsKICAgICAgfSkKICAgIH0pOwogICAgYGBg
        CiAgICAgCiAgICBzZWUgIk92ZXJyaWRpbmcgQXBwbGljYXRpb24td2lkZSBE
        ZWZhdWx0cyIgZm9yIG1vcmUuCiAgICAKICAgICMjIyBIYW5kbGluZyBgaHJl
        ZmAKICAgIGB7e2xpbmstdG99fWAgd2lsbCB1c2UgeW91ciBhcHBsaWNhdGlv
        bidzIFJvdXRlciB0bwogICAgZmlsbCB0aGUgZWxlbWVudCdzIGBocmVmYCBw
        cm9wZXJ0eSB3aXRoIGEgdXJsIHRoYXQKICAgIG1hdGNoZXMgdGhlIHBhdGgg
        dG8gdGhlIHN1cHBsaWVkIGByb3V0ZU5hbWVgIGZvciB5b3VyCiAgICByb3V0
        ZXJzJ3MgY29uZmlndXJlZCBgTG9jYXRpb25gIHNjaGVtZSwgd2hpY2ggZGVm
        YXVsdHMKICAgIHRvIEVtYmVyLkhhc2hMb2NhdGlvbi4KCiAgICAjIyMgSGFu
        ZGxpbmcgY3VycmVudCByb3V0ZQogICAgYHt7bGluay10b319YCB3aWxsIGFw
        cGx5IGEgQ1NTIGNsYXNzIG5hbWUgb2YgJ2FjdGl2ZScKICAgIHdoZW4gdGhl
        IGFwcGxpY2F0aW9uJ3MgY3VycmVudCByb3V0ZSBtYXRjaGVzCiAgICB0aGUg
        c3VwcGxpZWQgcm91dGVOYW1lLiBGb3IgZXhhbXBsZSwgaWYgdGhlIGFwcGxp
        Y2F0aW9uJ3MKICAgIGN1cnJlbnQgcm91dGUgaXMgJ3Bob3RvR2FsbGVyeS5y
        ZWNlbnQnIHRoZSBmb2xsb3dpbmcKICAgIHVzZSBvZiBge3tsaW5rLXRvfX1g
        OgoKICAgIGBgYGhhbmRsZWJhcnMKICAgIHt7I2xpbmstdG8gJ3Bob3RvR2Fs
        bGVyeS5yZWNlbnQnfX0KICAgICAgR3JlYXQgSGFtc3RlciBQaG90b3MgZnJv
        bSB0aGUgbGFzdCB3ZWVrCiAgICB7ey9saW5rLXRvfX0KICAgIGBgYAoKICAg
        IHdpbGwgcmVzdWx0IGluCgogICAgYGBgaHRtbAogICAgPGEgaHJlZj0iL2hh
        bXN0ZXItcGhvdG9zL3RoaXMtd2VlayIgY2xhc3M9ImFjdGl2ZSI+CiAgICAg
        IEdyZWF0IEhhbXN0ZXIgUGhvdG9zCiAgICA8L2E+CiAgICBgYGAKCiAgICBU
        aGUgQ1NTIGNsYXNzIG5hbWUgdXNlZCBmb3IgYWN0aXZlIGNsYXNzZXMgY2Fu
        IGJlIGN1c3RvbWl6ZWQKICAgIGZvciBhIHNpbmdsZSB1c2Ugb2YgYHt7bGlu
        ay10b319YCBieSBwYXNzaW5nIGFuIGBhY3RpdmVDbGFzc2AKICAgIG9wdGlv
        bjoKCiAgICBgYGBoYW5kbGViYXJzCiAgICB7eyNsaW5rLXRvICdwaG90b0dh
        bGxlcnkucmVjZW50JyBhY3RpdmVDbGFzcz0iY3VycmVudC11cmwifX0KICAg
        ICAgR3JlYXQgSGFtc3RlciBQaG90b3MgZnJvbSB0aGUgbGFzdCB3ZWVrCiAg
        ICB7ey9saW5rLXRvfX0KICAgIGBgYAoKICAgIGBgYGh0bWwKICAgIDxhIGhy
        ZWY9Ii9oYW1zdGVyLXBob3Rvcy90aGlzLXdlZWsiIGNsYXNzPSJjdXJyZW50
        LXVybCI+CiAgICAgIEdyZWF0IEhhbXN0ZXIgUGhvdG9zCiAgICA8L2E+CiAg
        ICBgYGAKCiAgICBUbyBvdmVycmlkZSB0aGlzIG9wdGlvbiBmb3IgeW91ciBl
        bnRpcmUgYXBwbGljYXRpb24sIHNlZQogICAgIk92ZXJyaWRpbmcgQXBwbGlj
        YXRpb24td2lkZSBEZWZhdWx0cyIuCgogICAgIyMjIFN1cHBseWluZyBhIG1v
        ZGVsCiAgICBBbiBvcHRpb25hbCBtb2RlbCBhcmd1bWVudCBjYW4gYmUgdXNl
        ZCBmb3Igcm91dGVzIHdob3NlCiAgICBwYXRocyBjb250YWluIGR5bmFtaWMg
        c2VnbWVudHMuIFRoaXMgYXJndW1lbnQgd2lsbCBiZWNvbWUKICAgIHRoZSBt
        b2RlbCBjb250ZXh0IG9mIHRoZSBsaW5rZWQgcm91dGU6CgogICAgYGBgamF2
        YXNjcmlwdAogICAgQXBwLlJvdXRlci5tYXAoZnVuY3Rpb24oKSB7CiAgICAg
        IHRoaXMucmVzb3VyY2UoInBob3RvR2FsbGVyeSIsIHtwYXRoOiAiaGFtc3Rl
        ci1waG90b3MvOnBob3RvX2lkIn0pOwogICAgfSk7CiAgICBgYGAKCiAgICBg
        YGBoYW5kbGViYXJzCiAgICB7eyNsaW5rLXRvICdwaG90b0dhbGxlcnknIGFQ
        aG90b319CiAgICAgIHt7YVBob3RvLnRpdGxlfX0KICAgIHt7L2xpbmstdG99
        fQogICAgYGBgCgogICAgYGBgaHRtbAogICAgPGEgaHJlZj0iL2hhbXN0ZXIt
        cGhvdG9zLzQyIj4KICAgICAgVG9tc3RlcgogICAgPC9hPgogICAgYGBgCgog
        ICAgIyMjIFN1cHBseWluZyBtdWx0aXBsZSBtb2RlbHMKICAgIEZvciBkZWVw
        LWxpbmtpbmcgdG8gcm91dGUgcGF0aHMgdGhhdCBjb250YWluIG11bHRpcGxl
        CiAgICBkeW5hbWljIHNlZ21lbnRzLCBtdWx0aXBsZSBtb2RlbCBhcmd1bWVu
        dHMgY2FuIGJlIHVzZWQuCiAgICBBcyB0aGUgcm91dGVyIHRyYW5zaXRpb25z
        IHRocm91Z2ggdGhlIHJvdXRlIHBhdGgsIGVhY2gKICAgIHN1cHBsaWVkIG1v
        ZGVsIGFyZ3VtZW50IHdpbGwgYmVjb21lIHRoZSBjb250ZXh0IGZvciB0aGUK
        ICAgIHJvdXRlIHdpdGggdGhlIGR5bmFtaWMgc2VnbWVudHM6CgogICAgYGBg
        amF2YXNjcmlwdAogICAgQXBwLlJvdXRlci5tYXAoZnVuY3Rpb24oKSB7CiAg
        ICAgIHRoaXMucmVzb3VyY2UoInBob3RvR2FsbGVyeSIsIHtwYXRoOiAiaGFt
        c3Rlci1waG90b3MvOnBob3RvX2lkIn0sIGZ1bmN0aW9uKCkgewogICAgICAg
        IHRoaXMucm91dGUoImNvbW1lbnQiLCB7cGF0aDogImNvbW1lbnRzLzpjb21t
        ZW50X2lkIn0pOwogICAgICB9KTsKICAgIH0pOwogICAgYGBgCiAgICBUaGlz
        IGFyZ3VtZW50IHdpbGwgYmVjb21lIHRoZSBtb2RlbCBjb250ZXh0IG9mIHRo
        ZSBsaW5rZWQgcm91dGU6CgogICAgYGBgaGFuZGxlYmFycwogICAge3sjbGlu
        ay10byAncGhvdG9HYWxsZXJ5LmNvbW1lbnQnIGFQaG90byBjb21tZW50fX0K
        ICAgICAge3tjb21tZW50LmJvZHl9fQogICAge3svbGluay10b319CiAgICBg
        YGAKCiAgICBgYGBodG1sCiAgICA8YSBocmVmPSIvaGFtc3Rlci1waG90b3Mv
        NDIvY29tbWVudC83MTgiPgogICAgICBBKysrIHdvdWxkIHNudWdnbGUgYWdh
        aW4uCiAgICA8L2E+CiAgICBgYGAKCiAgICAjIyMgU3VwcGx5aW5nIGFuIGV4
        cGxpY2l0IGR5bmFtaWMgc2VnbWVudCB2YWx1ZQogICAgSWYgeW91IGRvbid0
        IGhhdmUgYSBtb2RlbCBvYmplY3QgYXZhaWxhYmxlIHRvIHBhc3MgdG8gYHt7
        bGluay10b319YCwKICAgIGFuIG9wdGlvbmFsIHN0cmluZyBvciBpbnRlZ2Vy
        IGFyZ3VtZW50IGNhbiBiZSBwYXNzZWQgZm9yIHJvdXRlcyB3aG9zZQogICAg
        cGF0aHMgY29udGFpbiBkeW5hbWljIHNlZ21lbnRzLiBUaGlzIGFyZ3VtZW50
        IHdpbGwgYmVjb21lIHRoZSB2YWx1ZQogICAgb2YgdGhlIGR5bmFtaWMgc2Vn
        bWVudDoKCiAgICBgYGBqYXZhc2NyaXB0CiAgICBBcHAuUm91dGVyLm1hcChm
        dW5jdGlvbigpIHsKICAgICAgdGhpcy5yZXNvdXJjZSgicGhvdG9HYWxsZXJ5
        Iiwge3BhdGg6ICJoYW1zdGVyLXBob3Rvcy86cGhvdG9faWQifSk7CiAgICB9
        KTsKICAgIGBgYAoKICAgIGBgYGhhbmRsZWJhcnMKICAgIHt7I2xpbmstdG8g
        J3Bob3RvR2FsbGVyeScgYVBob3RvSWR9fQogICAgICB7e2FQaG90by50aXRs
        ZX19CiAgICB7ey9saW5rLXRvfX0KICAgIGBgYAoKICAgIGBgYGh0bWwKICAg
        IDxhIGhyZWY9Ii9oYW1zdGVyLXBob3Rvcy80MiI+CiAgICAgIFRvbXN0ZXIK
        ICAgIDwvYT4KICAgIGBgYAoKICAgIFdoZW4gdHJhbnNpdGlvbmluZyBpbnRv
        IHRoZSBsaW5rZWQgcm91dGUsIHRoZSBgbW9kZWxgIGhvb2sgd2lsbAogICAg
        YmUgdHJpZ2dlcmVkIHdpdGggcGFyYW1ldGVycyBpbmNsdWRpbmcgdGhpcyBw
        YXNzZWQgaWRlbnRpZmllci4KCiAgICAjIyMgT3ZlcnJpZGluZyBhdHRyaWJ1
        dGVzCiAgICBZb3UgY2FuIG92ZXJyaWRlIGFueSBnaXZlbiBwcm9wZXJ0eSBv
        ZiB0aGUgRW1iZXIuTGlua1ZpZXcKICAgIHRoYXQgaXMgZ2VuZXJhdGVkIGJ5
        IHRoZSBge3tsaW5rLXRvfX1gIGhlbHBlciBieSBwYXNzaW5nCiAgICBrZXkv
        dmFsdWUgcGFpcnMsIGxpa2Ugc286CgogICAgYGBgaGFuZGxlYmFycwogICAg
        e3sjbGluay10byAgYVBob3RvIHRhZ05hbWU9J2xpJyB0aXRsZT0nRm9sbG93
        aW5nIHRoaXMgbGluayB3aWxsIGNoYW5nZSB5b3VyIGxpZmUnIGNsYXNzTmFt
        ZXM9WydwaWMnLCAnc3dlZXQnXX19CiAgICAgIFVoLW1hemluZyEKICAgIHt7
        L2xpbmstdG99fQogICAgYGBgCgogICAgU2VlIFtFbWJlci5MaW5rVmlld10o
        L2FwaS9jbGFzc2VzL0VtYmVyLkxpbmtWaWV3Lmh0bWwpIGZvciBhCiAgICBj
        b21wbGV0ZSBsaXN0IG9mIG92ZXJyaWRlYWJsZSBwcm9wZXJ0aWVzLiBCZSBz
        dXJlIHRvIGFsc28KICAgIGNoZWNrIG91dCBpbmhlcml0ZWQgcHJvcGVydGll
        cyBvZiBgTGlua1ZpZXdgLgoKICAgICMjIyBPdmVycmlkaW5nIEFwcGxpY2F0
        aW9uLXdpZGUgRGVmYXVsdHMKICAgIGBge3tsaW5rLXRvfX1gYCBjcmVhdGVz
        IGFuIGluc3RhbmNlIG9mIEVtYmVyLkxpbmtWaWV3CiAgICBmb3IgcmVuZGVy
        aW5nLiBUbyBvdmVycmlkZSBvcHRpb25zIGZvciB5b3VyIGVudGlyZQogICAg
        YXBwbGljYXRpb24sIHJlb3BlbiBFbWJlci5MaW5rVmlldyBhbmQgc3VwcGx5
        IHRoZQogICAgZGVzaXJlZCB2YWx1ZXM6CgogICAgYGBgIGphdmFzY3JpcHQK
        ICAgIEVtYmVyLkxpbmtWaWV3LnJlb3Blbih7CiAgICAgIGFjdGl2ZUNsYXNz
        OiAiaXMtYWN0aXZlIiwKICAgICAgdGFnTmFtZTogJ2xpJwogICAgfSkKICAg
        IGBgYAoKICAgIEl0IGlzIGFsc28gcG9zc2libGUgdG8gb3ZlcnJpZGUgdGhl
        IGRlZmF1bHQgZXZlbnQgaW4KICAgIHRoaXMgbWFubmVyOgoKICAgIGBgYCBq
        YXZhc2NyaXB0CiAgICBFbWJlci5MaW5rVmlldy5yZW9wZW4oewogICAgICBl
        dmVudE5hbWU6ICdjdXN0b21FdmVudE5hbWUnCiAgICB9KTsKICAgIGBgYAoK
        ICAgIEBtZXRob2QgbGluay10bwogICAgQGZvciBFbWJlci5IYW5kbGViYXJz
        LmhlbHBlcnMKICAgIEBwYXJhbSB7U3RyaW5nfSByb3V0ZU5hbWUKICAgIEBw
        YXJhbSB7T2JqZWN0fSBbY29udGV4dF0qCiAgICBAcGFyYW0gW29wdGlvbnNd
        IHtPYmplY3R9IEhhbmRsZWJhcnMga2V5L3ZhbHVlIHBhaXJzIG9mIG9wdGlv
        bnMsIHlvdSBjYW4gb3ZlcnJpZGUgYW55IHByb3BlcnR5IG9mIEVtYmVyLkxp
        bmtWaWV3CiAgICBAcmV0dXJuIHtTdHJpbmd9IEhUTUwgc3RyaW5nCiAgICBA
        c2VlIHtFbWJlci5MaW5rVmlld30KICAqLwogIEVtYmVyLkhhbmRsZWJhcnMu
        cmVnaXN0ZXJIZWxwZXIoJ2xpbmstdG8nLCBmdW5jdGlvbihuYW1lKSB7CiAg
        ICB2YXIgb3B0aW9ucyA9IFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAtMSlb
        MF0sCiAgICAgICAgcGFyYW1zID0gW10uc2xpY2UuY2FsbChhcmd1bWVudHMs
        IDAsIC0xKSwKICAgICAgICBoYXNoID0gb3B0aW9ucy5oYXNoOwoKICAgIGhh
        c2guZGlzYWJsZWRCaW5kaW5nID0gaGFzaC5kaXNhYmxlZFdoZW47CgogICAg
        CiAgICAgIGlmICghb3B0aW9ucy5mbikgewogICAgICAgIHZhciBsaW5rVGl0
        bGUgPSBwYXJhbXMuc2hpZnQoKTsKICAgICAgICB2YXIgbGlua1R5cGUgPSBv
        cHRpb25zLnR5cGVzLnNoaWZ0KCk7CiAgICAgICAgdmFyIGNvbnRleHQgPSB0
        aGlzOwogICAgICAgIGlmIChsaW5rVHlwZSA9PT0gJ0lEJykgewogICAgICAg
        ICAgb3B0aW9ucy5saW5rVGV4dFBhdGggPSBsaW5rVGl0bGU7CiAgICAgICAg
        ICBvcHRpb25zLmZuID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIHJldHVy
        biBFbWJlci5IYW5kbGViYXJzLmdldChjb250ZXh0LCBsaW5rVGl0bGUsIG9w
        dGlvbnMpOwogICAgICAgICAgfTsKICAgICAgICB9IGVsc2UgewogICAgICAg
        ICAgb3B0aW9ucy5mbiA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICByZXR1
        cm4gbGlua1RpdGxlOwogICAgICAgICAgfTsKICAgICAgICB9CiAgICAgIH0K
        ICAgIAoKICAgIGhhc2gucGFyYW1ldGVycyA9IHsKICAgICAgY29udGV4dDog
        dGhpcywKICAgICAgb3B0aW9uczogb3B0aW9ucywKICAgICAgcGFyYW1zOiBw
        YXJhbXMKICAgIH07CgogICAgcmV0dXJuIEVtYmVyLkhhbmRsZWJhcnMuaGVs
        cGVycy52aWV3LmNhbGwodGhpcywgTGlua1ZpZXcsIG9wdGlvbnMpOwogIH0p
        OwoKICAvKioKICAgIFNlZSBbbGluay10b10oL2FwaS9jbGFzc2VzL0VtYmVy
        LkhhbmRsZWJhcnMuaGVscGVycy5odG1sI21ldGhvZF9saW5rLXRvKQoKICAg
        IEBtZXRob2QgbGlua1RvCiAgICBAZm9yIEVtYmVyLkhhbmRsZWJhcnMuaGVs
        cGVycwogICAgQGRlcHJlY2F0ZWQKICAgIEBwYXJhbSB7U3RyaW5nfSByb3V0
        ZU5hbWUKICAgIEBwYXJhbSB7T2JqZWN0fSBbY29udGV4dF0qCiAgICBAcmV0
        dXJuIHtTdHJpbmd9IEhUTUwgc3RyaW5nCiAgKi8KICBFbWJlci5IYW5kbGVi
        YXJzLnJlZ2lzdGVySGVscGVyKCdsaW5rVG8nLCBFbWJlci5IYW5kbGViYXJz
        LmhlbHBlcnNbJ2xpbmstdG8nXSk7Cn0pOwoKCgp9KSgpOwoKCgooZnVuY3Rp
        b24oKSB7Ci8qKgpAbW9kdWxlIGVtYmVyCkBzdWJtb2R1bGUgZW1iZXItcm91
        dGluZwoqLwoKdmFyIGdldCA9IEVtYmVyLmdldCwgc2V0ID0gRW1iZXIuc2V0
        OwpFbWJlci5vbkxvYWQoJ0VtYmVyLkhhbmRsZWJhcnMnLCBmdW5jdGlvbihI
        YW5kbGViYXJzKSB7CiAgLyoqCiAgQG1vZHVsZSBlbWJlcgogIEBzdWJtb2R1
        bGUgZW1iZXItcm91dGluZwogICovCgogIEhhbmRsZWJhcnMuT3V0bGV0Vmll
        dyA9IEVtYmVyLkNvbnRhaW5lclZpZXcuZXh0ZW5kKEVtYmVyLl9NZXRhbW9y
        cGgpOwoKICAvKioKICAgIFRoZSBgb3V0bGV0YCBoZWxwZXIgaXMgYSBwbGFj
        ZWhvbGRlciB0aGF0IHRoZSByb3V0ZXIgd2lsbCBmaWxsIGluIHdpdGgKICAg
        IHRoZSBhcHByb3ByaWF0ZSB0ZW1wbGF0ZSBiYXNlZCBvbiB0aGUgY3VycmVu
        dCBzdGF0ZSBvZiB0aGUgYXBwbGljYXRpb24uCgogICAgYGBgIGhhbmRsZWJh
        cnMKICAgIHt7b3V0bGV0fX0KICAgIGBgYAoKICAgIEJ5IGRlZmF1bHQsIGEg
        dGVtcGxhdGUgYmFzZWQgb24gRW1iZXIncyBuYW1pbmcgY29udmVudGlvbnMg
        d2lsbCBiZSByZW5kZXJlZAogICAgaW50byB0aGUgYG91dGxldGAgKGUuZy4g
        YEFwcC5Qb3N0c1JvdXRlYCB3aWxsIHJlbmRlciB0aGUgYHBvc3RzYCB0ZW1w
        bGF0ZSkuCgogICAgWW91IGNhbiByZW5kZXIgYSBkaWZmZXJlbnQgdGVtcGxh
        dGUgYnkgdXNpbmcgdGhlIGByZW5kZXIoKWAgbWV0aG9kIGluIHRoZQogICAg
        cm91dGUncyBgcmVuZGVyVGVtcGxhdGVgIGhvb2suIFRoZSBmb2xsb3dpbmcg
        d2lsbCByZW5kZXIgdGhlIGBmYXZvcml0ZVBvc3RgCiAgICB0ZW1wbGF0ZSBp
        bnRvIHRoZSBgb3V0bGV0YC4KCiAgICBgYGAgamF2YXNjcmlwdAogICAgQXBw
        LlBvc3RzUm91dGUgPSBFbWJlci5Sb3V0ZS5leHRlbmQoewogICAgICByZW5k
        ZXJUZW1wbGF0ZTogZnVuY3Rpb24oKSB7CiAgICAgICAgdGhpcy5yZW5kZXIo
        J2Zhdm9yaXRlUG9zdCcpOwogICAgICB9CiAgICB9KTsKICAgIGBgYAoKICAg
        IFlvdSBjYW4gY3JlYXRlIGN1c3RvbSBuYW1lZCBvdXRsZXRzIGZvciBtb3Jl
        IGNvbnRyb2wuCgogICAgYGBgIGhhbmRsZWJhcnMKICAgIHt7b3V0bGV0ICdm
        YXZvcml0ZVBvc3QnfX0KICAgIHt7b3V0bGV0ICdwb3N0cyd9fQogICAgYGBg
        CgogICAgVGhlbiB5b3UgY2FuIGRlZmluZSB3aGF0IHRlbXBsYXRlIGlzIHJl
        bmRlcmVkIGludG8gZWFjaCBvdXRsZXQgaW4geW91cgogICAgcm91dGUuCgoK
        ICAgIGBgYCBqYXZhc2NyaXB0CiAgICBBcHAuUG9zdHNSb3V0ZSA9IEVtYmVy
        LlJvdXRlLmV4dGVuZCh7CiAgICAgIHJlbmRlclRlbXBsYXRlOiBmdW5jdGlv
        bigpIHsKICAgICAgICB0aGlzLnJlbmRlcignZmF2b3JpdGVQb3N0JywgeyBv
        dXRsZXQ6ICdmYXZvcml0ZVBvc3QnIH0pOwogICAgICAgIHRoaXMucmVuZGVy
        KCdwb3N0cycsIHsgb3V0bGV0OiAncG9zdHMnIH0pOwogICAgICB9CiAgICB9
        KTsKICAgIGBgYAoKICAgIFlvdSBjYW4gc3BlY2lmeSB0aGUgdmlldyBjbGFz
        cyB0aGF0IHRoZSBvdXRsZXQgdXNlcyB0byBjb250YWluIGFuZCBtYW5hZ2Ug
        dGhlCiAgICB0ZW1wbGF0ZXMgcmVuZGVyZWQgaW50byBpdC4KCiAgICBgYGAg
        aGFuZGxlYmFycwogICAge3tvdXRsZXQgdmlld0NsYXNzPUFwcC5TZWN0aW9u
        Q29udGFpbmVyfX0KICAgIGBgYAoKICAgIGBgYCBqYXZhc2NyaXB0CiAgICBB
        cHAuU2VjdGlvbkNvbnRhaW5lciA9IEVtYmVyLkNvbnRhaW5lclZpZXcuZXh0
        ZW5kKHsKICAgICAgdGFnTmFtZTogJ3NlY3Rpb24nLAogICAgICBjbGFzc05h
        bWVzOiBbJ3NwZWNpYWwnXQogICAgfSk7CiAgICBgYGAKCiAgICBAbWV0aG9k
        IG91dGxldAogICAgQGZvciBFbWJlci5IYW5kbGViYXJzLmhlbHBlcnMKICAg
        IEBwYXJhbSB7U3RyaW5nfSBwcm9wZXJ0eSB0aGUgcHJvcGVydHkgb24gdGhl
        IGNvbnRyb2xsZXIKICAgICAgdGhhdCBob2xkcyB0aGUgdmlldyBmb3IgdGhp
        cyBvdXRsZXQKICAgIEByZXR1cm4ge1N0cmluZ30gSFRNTCBzdHJpbmcKICAq
        LwogIEhhbmRsZWJhcnMucmVnaXN0ZXJIZWxwZXIoJ291dGxldCcsIGZ1bmN0
        aW9uKHByb3BlcnR5LCBvcHRpb25zKSB7CiAgICB2YXIgb3V0bGV0U291cmNl
        LCBvdXRsZXRDb250YWluZXJDbGFzczsKCiAgICBpZiAocHJvcGVydHkgJiYg
        cHJvcGVydHkuZGF0YSAmJiBwcm9wZXJ0eS5kYXRhLmlzUmVuZGVyRGF0YSkg
        ewogICAgICBvcHRpb25zID0gcHJvcGVydHk7CiAgICAgIHByb3BlcnR5ID0g
        J21haW4nOwogICAgfQoKICAgIG91dGxldFNvdXJjZSA9IG9wdGlvbnMuZGF0
        YS52aWV3OwogICAgd2hpbGUgKCFvdXRsZXRTb3VyY2UuZ2V0KCd0ZW1wbGF0
        ZS5pc1RvcCcpKSB7CiAgICAgIG91dGxldFNvdXJjZSA9IG91dGxldFNvdXJj
        ZS5nZXQoJ19wYXJlbnRWaWV3Jyk7CiAgICB9CgogICAgb3V0bGV0Q29udGFp
        bmVyQ2xhc3MgPSBvcHRpb25zLmhhc2gudmlld0NsYXNzIHx8IEhhbmRsZWJh
        cnMuT3V0bGV0VmlldzsKCiAgICBvcHRpb25zLmRhdGEudmlldy5zZXQoJ291
        dGxldFNvdXJjZScsIG91dGxldFNvdXJjZSk7CiAgICBvcHRpb25zLmhhc2gu
        Y3VycmVudFZpZXdCaW5kaW5nID0gJ192aWV3Lm91dGxldFNvdXJjZS5fb3V0
        bGV0cy4nICsgcHJvcGVydHk7CgogICAgcmV0dXJuIEhhbmRsZWJhcnMuaGVs
        cGVycy52aWV3LmNhbGwodGhpcywgb3V0bGV0Q29udGFpbmVyQ2xhc3MsIG9w
        dGlvbnMpOwogIH0pOwp9KTsKCn0pKCk7CgoKCihmdW5jdGlvbigpIHsKLyoq
        CkBtb2R1bGUgZW1iZXIKQHN1Ym1vZHVsZSBlbWJlci1yb3V0aW5nCiovCgp2
        YXIgZ2V0ID0gRW1iZXIuZ2V0LCBzZXQgPSBFbWJlci5zZXQ7CkVtYmVyLm9u
        TG9hZCgnRW1iZXIuSGFuZGxlYmFycycsIGZ1bmN0aW9uKEhhbmRsZWJhcnMp
        IHsKCiAgLyoqCiAgICBDYWxsaW5nIGBge3tyZW5kZXJ9fWBgIGZyb20gd2l0
        aGluIGEgdGVtcGxhdGUgd2lsbCBpbnNlcnQgYW5vdGhlcgogICAgdGVtcGxh
        dGUgdGhhdCBtYXRjaGVzIHRoZSBwcm92aWRlZCBuYW1lLiBUaGUgaW5zZXJ0
        ZWQgdGVtcGxhdGUgd2lsbAogICAgYWNjZXNzIGl0cyBwcm9wZXJ0aWVzIG9u
        IGl0cyBvd24gY29udHJvbGxlciAocmF0aGVyIHRoYW4gdGhlIGNvbnRyb2xs
        ZXIKICAgIG9mIHRoZSBwYXJlbnQgdGVtcGxhdGUpLgoKICAgIElmIGEgdmll
        dyBjbGFzcyB3aXRoIHRoZSBzYW1lIG5hbWUgZXhpc3RzLCB0aGUgdmlldyBj
        bGFzcyBhbHNvIHdpbGwgYmUgdXNlZC4KCiAgICBOb3RlOiBBIGdpdmVuIGNv
        bnRyb2xsZXIgbWF5IG9ubHkgYmUgdXNlZCAqb25jZSogaW4geW91ciBhcHAg
        aW4gdGhpcyBtYW5uZXIuCiAgICBBIHNpbmdsZXRvbiBpbnN0YW5jZSBvZiB0
        aGUgY29udHJvbGxlciB3aWxsIGJlIGNyZWF0ZWQgZm9yIHlvdS4KCiAgICBF
        eGFtcGxlOgoKICAgIGBgYGphdmFzY3JpcHQKICAgIEFwcC5OYXZpZ2F0aW9u
        Q29udHJvbGxlciA9IEVtYmVyLkNvbnRyb2xsZXIuZXh0ZW5kKHsKICAgICAg
        d2hvOiAid29ybGQiCiAgICB9KTsKICAgIGBgYAoKICAgIGBgYGhhbmRsZWJh
        cnMKICAgIDwhLS0gbmF2aWdhdGlvbi5oYnMgLS0+CiAgICBIZWxsbywge3t3
        aG99fS4KICAgIGBgYAoKICAgIGBgYGhhbmRlbGJhcnMKICAgIDwhLS0gYXBw
        bGljYXRpb24uaGJzIC0tPgogICAgPGgxPk15IGdyZWF0IGFwcDwvaDE+CiAg
        ICB7e3JlbmRlciBuYXZpZ2F0aW9ufX0KICAgIGBgYAoKICAgIGBgYGh0bWwK
        ICAgIDxoMT5NeSBncmVhdCBhcHA8L2gxPgogICAgPGRpdiBjbGFzcz0nZW1i
        ZXItdmlldyc+CiAgICAgIEhlbGxvLCB3b3JsZC4KICAgIDwvZGl2PgogICAg
        YGBgCgogICAgT3B0aW9uYWxseSB5b3UgbWF5IHByb3ZpZGUgYSBzZWNvbmQg
        YXJndW1lbnQ6IGEgcHJvcGVydHkgcGF0aAogICAgdGhhdCB3aWxsIGJlIGJv
        dW5kIHRvIHRoZSBgbW9kZWxgIHByb3BlcnR5IG9mIHRoZSBjb250cm9sbGVy
        LgoKICAgIElmIGEgYG1vZGVsYCBwcm9wZXJ0eSBwYXRoIGlzIHNwZWNpZmll
        ZCwgdGhlbiBhIG5ldyBpbnN0YW5jZSBvZiB0aGUKICAgIGNvbnRyb2xsZXIg
        d2lsbCBiZSBjcmVhdGVkIGFuZCBge3tyZW5kZXJ9fWAgY2FuIGJlIHVzZWQg
        bXVsdGlwbGUgdGltZXMKICAgIHdpdGggdGhlIHNhbWUgbmFtZS4KCiAgIEZv
        ciBleGFtcGxlIGlmIHlvdSBoYWQgdGhpcyBgYXV0aG9yYCB0ZW1wbGF0ZS4K
        CiAgIGBgYGhhbmRsZWJhcnMKPGRpdiBjbGFzcz0iYXV0aG9yIj4KICBXcml0
        dGVuIGJ5IHt7Zmlyc3ROYW1lfX0ge3tsYXN0TmFtZX19LgogIFRvdGFsIFBv
        c3RzOiB7e3Bvc3RDb3VudH19CjwvZGl2PgogIGBgYAoKICBZb3UgY291bGQg
        cmVuZGVyIGl0IGluc2lkZSB0aGUgYHBvc3RgIHRlbXBsYXRlIHVzaW5nIHRo
        ZSBgcmVuZGVyYCBoZWxwZXIuCgogIGBgYGhhbmRsZWJhcnMKPGRpdiBjbGFz
        cz0icG9zdCI+CiAgPGgxPnt7dGl0bGV9fTwvaDE+CiAgPGRpdj57e2JvZHl9
        fTwvZGl2PgogIHt7cmVuZGVyICJhdXRob3IiIGF1dGhvcn19CjwvZGl2Pgog
        ICBgYGAKCiAgICBAbWV0aG9kIHJlbmRlcgogICAgQGZvciBFbWJlci5IYW5k
        bGViYXJzLmhlbHBlcnMKICAgIEBwYXJhbSB7U3RyaW5nfSBuYW1lCiAgICBA
        cGFyYW0ge09iamVjdD99IGNvbnRleHRTdHJpbmcKICAgIEBwYXJhbSB7SGFz
        aH0gb3B0aW9ucwogICAgQHJldHVybiB7U3RyaW5nfSBIVE1MIHN0cmluZwog
        ICovCiAgRW1iZXIuSGFuZGxlYmFycy5yZWdpc3RlckhlbHBlcigncmVuZGVy
        JywgZnVuY3Rpb24obmFtZSwgY29udGV4dFN0cmluZywgb3B0aW9ucykgewog
        ICAgRW1iZXIuYXNzZXJ0KCJZb3UgbXVzdCBwYXNzIGEgdGVtcGxhdGUgdG8g
        cmVuZGVyIiwgYXJndW1lbnRzLmxlbmd0aCA+PSAyKTsKICAgIHZhciBjb250
        ZXh0UHJvdmlkZWQgPSBhcmd1bWVudHMubGVuZ3RoID09PSAzLAogICAgICAg
        IGNvbnRhaW5lciwgcm91dGVyLCBjb250cm9sbGVyLCB2aWV3LCBjb250ZXh0
        LCBsb29rdXBPcHRpb25zOwoKICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09
        PSAyKSB7CiAgICAgIG9wdGlvbnMgPSBjb250ZXh0U3RyaW5nOwogICAgICBj
        b250ZXh0U3RyaW5nID0gdW5kZWZpbmVkOwogICAgfQoKICAgIGlmICh0eXBl
        b2YgY29udGV4dFN0cmluZyA9PT0gJ3N0cmluZycpIHsKICAgICAgY29udGV4
        dCA9IEVtYmVyLkhhbmRsZWJhcnMuZ2V0KG9wdGlvbnMuY29udGV4dHNbMV0s
        IGNvbnRleHRTdHJpbmcsIG9wdGlvbnMpOwogICAgICBsb29rdXBPcHRpb25z
        ID0geyBzaW5nbGV0b246IGZhbHNlIH07CiAgICB9CgogICAgbmFtZSA9IG5h
        bWUucmVwbGFjZSgvXC8vZywgJy4nKTsKICAgIGNvbnRhaW5lciA9IG9wdGlv
        bnMuZGF0YS5rZXl3b3Jkcy5jb250cm9sbGVyLmNvbnRhaW5lcjsKICAgIHJv
        dXRlciA9IGNvbnRhaW5lci5sb29rdXAoJ3JvdXRlcjptYWluJyk7CgogICAg
        RW1iZXIuYXNzZXJ0KCJZb3UgY2FuIG9ubHkgdXNlIHRoZSB7e3JlbmRlcn19
        IGhlbHBlciBvbmNlIHdpdGhvdXQgYSBtb2RlbCBvYmplY3QgYXMgaXRzIHNl
        Y29uZCBhcmd1bWVudCwgYXMgaW4ge3tyZW5kZXIgXCJwb3N0XCIgcG9zdH19
        LiIsIGNvbnRleHRQcm92aWRlZCB8fCAhcm91dGVyIHx8ICFyb3V0ZXIuX2xv
        b2t1cEFjdGl2ZVZpZXcobmFtZSkpOwoKICAgIHZpZXcgPSBjb250YWluZXIu
        bG9va3VwKCd2aWV3OicgKyBuYW1lKSB8fCBjb250YWluZXIubG9va3VwKCd2
        aWV3OmRlZmF1bHQnKTsKCiAgICB2YXIgY29udHJvbGxlck5hbWUgPSBvcHRp
        b25zLmhhc2guY29udHJvbGxlcjsKCiAgICAvLyBMb29rIHVwIHRoZSBjb250
        cm9sbGVyIGJ5IG5hbWUsIGlmIHByb3ZpZGVkLgogICAgaWYgKGNvbnRyb2xs
        ZXJOYW1lKSB7CiAgICAgIGNvbnRyb2xsZXIgPSBjb250YWluZXIubG9va3Vw
        KCdjb250cm9sbGVyOicgKyBjb250cm9sbGVyTmFtZSwgbG9va3VwT3B0aW9u
        cyk7CiAgICAgIEVtYmVyLmFzc2VydCgiVGhlIGNvbnRyb2xsZXIgbmFtZSB5
        b3Ugc3VwcGxpZWQgJyIgKyBjb250cm9sbGVyTmFtZSArICInIGRpZCBub3Qg
        cmVzb2x2ZSB0byBhIGNvbnRyb2xsZXIuIiwgISFjb250cm9sbGVyKTsKICAg
        IH0gZWxzZSB7CiAgICAgIGNvbnRyb2xsZXIgPSBjb250YWluZXIubG9va3Vw
        KCdjb250cm9sbGVyOicgKyBuYW1lLCBsb29rdXBPcHRpb25zKSB8fAogICAg
        ICAgICAgICAgICAgICAgICAgRW1iZXIuZ2VuZXJhdGVDb250cm9sbGVyKGNv
        bnRhaW5lciwgbmFtZSwgY29udGV4dCk7CiAgICB9CgogICAgaWYgKGNvbnRy
        b2xsZXIgJiYgY29udGV4dFByb3ZpZGVkKSB7CiAgICAgIGNvbnRyb2xsZXIu
        c2V0KCdtb2RlbCcsIGNvbnRleHQpOwogICAgfQoKICAgIHZhciByb290ID0g
        b3B0aW9ucy5jb250ZXh0c1sxXTsKCiAgICBpZiAocm9vdCkgewogICAgICB2
        aWV3LnJlZ2lzdGVyT2JzZXJ2ZXIocm9vdCwgY29udGV4dFN0cmluZywgZnVu
        Y3Rpb24oKSB7CiAgICAgICAgY29udHJvbGxlci5zZXQoJ21vZGVsJywgRW1i
        ZXIuSGFuZGxlYmFycy5nZXQocm9vdCwgY29udGV4dFN0cmluZywgb3B0aW9u
        cykpOwogICAgICB9KTsKICAgIH0KCiAgICBjb250cm9sbGVyLnNldCgndGFy
        Z2V0Jywgb3B0aW9ucy5kYXRhLmtleXdvcmRzLmNvbnRyb2xsZXIpOwoKICAg
        IG9wdGlvbnMuaGFzaC52aWV3TmFtZSA9IEVtYmVyLlN0cmluZy5jYW1lbGl6
        ZShuYW1lKTsKICAgIG9wdGlvbnMuaGFzaC50ZW1wbGF0ZSA9IGNvbnRhaW5l
        ci5sb29rdXAoJ3RlbXBsYXRlOicgKyBuYW1lKTsKICAgIG9wdGlvbnMuaGFz
        aC5jb250cm9sbGVyID0gY29udHJvbGxlcjsKCiAgICBpZiAocm91dGVyICYm
        ICFjb250ZXh0KSB7CiAgICAgIHJvdXRlci5fY29ubmVjdEFjdGl2ZVZpZXco
        bmFtZSwgdmlldyk7CiAgICB9CgogICAgRW1iZXIuSGFuZGxlYmFycy5oZWxw
        ZXJzLnZpZXcuY2FsbCh0aGlzLCB2aWV3LCBvcHRpb25zKTsKICB9KTsKCn0p
        OwoKfSkoKTsKCgoKKGZ1bmN0aW9uKCkgewovKioKQG1vZHVsZSBlbWJlcgpA
        c3VibW9kdWxlIGVtYmVyLXJvdXRpbmcKKi8KRW1iZXIub25Mb2FkKCdFbWJl
        ci5IYW5kbGViYXJzJywgZnVuY3Rpb24oSGFuZGxlYmFycykgewoKICB2YXIg
        cmVzb2x2ZVBhcmFtcyA9IEVtYmVyLlJvdXRlci5yZXNvbHZlUGFyYW1zLAog
        ICAgICBpc1NpbXBsZUNsaWNrID0gRW1iZXIuVmlld1V0aWxzLmlzU2ltcGxl
        Q2xpY2s7CgogIHZhciBFbWJlckhhbmRsZWJhcnMgPSBFbWJlci5IYW5kbGVi
        YXJzLAogICAgICBoYW5kbGViYXJzR2V0ID0gRW1iZXJIYW5kbGViYXJzLmdl
        dCwKICAgICAgU2FmZVN0cmluZyA9IEVtYmVySGFuZGxlYmFycy5TYWZlU3Ry
        aW5nLAogICAgICBmb3JFYWNoID0gRW1iZXIuQXJyYXlQb2x5ZmlsbHMuZm9y
        RWFjaCwKICAgICAgZ2V0ID0gRW1iZXIuZ2V0LAogICAgICBhX3NsaWNlID0g
        QXJyYXkucHJvdG90eXBlLnNsaWNlOwoKICBmdW5jdGlvbiBhcmdzKG9wdGlv
        bnMsIGFjdGlvbk5hbWUpIHsKICAgIHZhciByZXQgPSBbXTsKICAgIGlmIChh
        Y3Rpb25OYW1lKSB7IHJldC5wdXNoKGFjdGlvbk5hbWUpOyB9CgogICAgdmFy
        IHR5cGVzID0gb3B0aW9ucy5vcHRpb25zLnR5cGVzLnNsaWNlKDEpLAogICAg
        ICAgIGRhdGEgPSBvcHRpb25zLm9wdGlvbnMuZGF0YTsKCiAgICByZXR1cm4g
        cmV0LmNvbmNhdChyZXNvbHZlUGFyYW1zKG9wdGlvbnMuY29udGV4dCwgb3B0
        aW9ucy5wYXJhbXMsIHsgdHlwZXM6IHR5cGVzLCBkYXRhOiBkYXRhIH0pKTsK
        ICB9CgogIHZhciBBY3Rpb25IZWxwZXIgPSBFbWJlckhhbmRsZWJhcnMuQWN0
        aW9uSGVscGVyID0gewogICAgcmVnaXN0ZXJlZEFjdGlvbnM6IHt9CiAgfTsK
        CiAgdmFyIGtleXMgPSBbImFsdCIsICJzaGlmdCIsICJtZXRhIiwgImN0cmwi
        XTsKCiAgdmFyIGlzQWxsb3dlZENsaWNrID0gZnVuY3Rpb24oZXZlbnQsIGFs
        bG93ZWRLZXlzKSB7CiAgICBpZiAodHlwZW9mIGFsbG93ZWRLZXlzID09PSAi
        dW5kZWZpbmVkIikgewogICAgICByZXR1cm4gaXNTaW1wbGVDbGljayhldmVu
        dCk7CiAgICB9CgogICAgaWYgKGFsbG93ZWRLZXlzLmluZGV4T2YoImFueSIp
        ID49IDApIHsKICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgdmFyIGFs
        bG93ZWQgPSB0cnVlOwoKICAgIGZvckVhY2guY2FsbChrZXlzLCBmdW5jdGlv
        bihrZXkpIHsKICAgICAgaWYgKGV2ZW50W2tleSArICJLZXkiXSAmJiBhbGxv
        d2VkS2V5cy5pbmRleE9mKGtleSkgPT09IC0xKSB7CiAgICAgICAgYWxsb3dl
        ZCA9IGZhbHNlOwogICAgICB9CiAgICB9KTsKCiAgICByZXR1cm4gYWxsb3dl
        ZDsKICB9OwoKICBBY3Rpb25IZWxwZXIucmVnaXN0ZXJBY3Rpb24gPSBmdW5j
        dGlvbihhY3Rpb25OYW1lLCBvcHRpb25zLCBhbGxvd2VkS2V5cykgewogICAg
        dmFyIGFjdGlvbklkID0gKCsrRW1iZXIudXVpZCkudG9TdHJpbmcoKTsKCiAg
        ICBBY3Rpb25IZWxwZXIucmVnaXN0ZXJlZEFjdGlvbnNbYWN0aW9uSWRdID0g
        ewogICAgICBldmVudE5hbWU6IG9wdGlvbnMuZXZlbnROYW1lLAogICAgICBo
        YW5kbGVyOiBmdW5jdGlvbihldmVudCkgewogICAgICAgIGlmICghaXNBbGxv
        d2VkQ2xpY2soZXZlbnQsIGFsbG93ZWRLZXlzKSkgeyByZXR1cm4gdHJ1ZTsg
        fQoKICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwoKICAgICAgICBp
        ZiAob3B0aW9ucy5idWJibGVzID09PSBmYWxzZSkgewogICAgICAgICAgZXZl
        bnQuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgfQoKICAgICAgICB2YXIg
        dGFyZ2V0ID0gb3B0aW9ucy50YXJnZXQ7CgogICAgICAgIGlmICh0YXJnZXQu
        dGFyZ2V0KSB7CiAgICAgICAgICB0YXJnZXQgPSBoYW5kbGViYXJzR2V0KHRh
        cmdldC5yb290LCB0YXJnZXQudGFyZ2V0LCB0YXJnZXQub3B0aW9ucyk7CiAg
        ICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRhcmdldCA9IHRhcmdldC5yb290
        OwogICAgICAgIH0KCiAgICAgICAgRW1iZXIucnVuKGZ1bmN0aW9uKCkgewog
        ICAgICAgICAgaWYgKHRhcmdldC5zZW5kKSB7CiAgICAgICAgICAgIHRhcmdl
        dC5zZW5kLmFwcGx5KHRhcmdldCwgYXJncyhvcHRpb25zLnBhcmFtZXRlcnMs
        IGFjdGlvbk5hbWUpKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAg
        IEVtYmVyLmFzc2VydCgiVGhlIGFjdGlvbiAnIiArIGFjdGlvbk5hbWUgKyAi
        JyBkaWQgbm90IGV4aXN0IG9uICIgKyB0YXJnZXQsIHR5cGVvZiB0YXJnZXRb
        YWN0aW9uTmFtZV0gPT09ICdmdW5jdGlvbicpOwogICAgICAgICAgICB0YXJn
        ZXRbYWN0aW9uTmFtZV0uYXBwbHkodGFyZ2V0LCBhcmdzKG9wdGlvbnMucGFy
        YW1ldGVycykpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CiAg
        ICB9OwoKICAgIG9wdGlvbnMudmlldy5vbignd2lsbENsZWFyUmVuZGVyJywg
        ZnVuY3Rpb24oKSB7CiAgICAgIGRlbGV0ZSBBY3Rpb25IZWxwZXIucmVnaXN0
        ZXJlZEFjdGlvbnNbYWN0aW9uSWRdOwogICAgfSk7CgogICAgcmV0dXJuIGFj
        dGlvbklkOwogIH07CgogIC8qKgogICAgVGhlIGB7e2FjdGlvbn19YCBoZWxw
        ZXIgcmVnaXN0ZXJzIGFuIEhUTUwgZWxlbWVudCB3aXRoaW4gYSB0ZW1wbGF0
        ZSBmb3IgRE9NCiAgICBldmVudCBoYW5kbGluZyBhbmQgZm9yd2FyZHMgdGhh
        dCBpbnRlcmFjdGlvbiB0byB0aGUgdGVtcGxhdGVzJ3MgY29udHJvbGxlcgog
        ICAgb3Igc3VwcGxpZWQgYHRhcmdldGAgb3B0aW9uIChzZWUgJ1NwZWNpZnlp
        bmcgYSBUYXJnZXQnKS4KCiAgICBJZiB0aGUgY29udHJvbGxlciBkb2VzIG5v
        dCBpbXBsZW1lbnQgdGhlIGV2ZW50LCB0aGUgZXZlbnQgaXMgc2VudAogICAg
        dG8gdGhlIGN1cnJlbnQgcm91dGUsIGFuZCBpdCBidWJibGVzIHVwIHRoZSBy
        b3V0ZSBoaWVyYXJjaHkgZnJvbSB0aGVyZS4KCiAgICBVc2VyIGludGVyYWN0
        aW9uIHdpdGggdGhhdCBlbGVtZW50IHdpbGwgaW52b2tlIHRoZSBzdXBwbGll
        ZCBhY3Rpb24gbmFtZSBvbgogICAgdGhlIGFwcHJvcHJpYXRlIHRhcmdldC4K
        CiAgICBHaXZlbiB0aGUgZm9sbG93aW5nIGFwcGxpY2F0aW9uIEhhbmRsZWJh
        cnMgdGVtcGxhdGUgb24gdGhlIHBhZ2UKCiAgICBgYGBoYW5kbGViYXJzCiAg
        ICA8ZGl2IHt7YWN0aW9uICdhbkFjdGlvbk5hbWUnfX0+CiAgICAgIGNsaWNr
        IG1lCiAgICA8L2Rpdj4KICAgIGBgYAoKICAgIEFuZCBhcHBsaWNhdGlvbiBj
        b2RlCgogICAgYGBgamF2YXNjcmlwdAogICAgQXBwLkFwcGxpY2F0aW9uQ29u
        dHJvbGxlciA9IEVtYmVyLkNvbnRyb2xsZXIuZXh0ZW5kKHsKICAgICAgYWN0
        aW9uczogewogICAgICAgIGFuQWN0aW9uTmFtZTogZnVuY3Rpb24oKSB7CiAg
        ICAgICAgICAKICAgICAgICB9ICAKICAgICAgfQogICAgfSk7CiAgICBgYGAK
        CiAgICBXaWxsIHJlc3VsdCBpbiB0aGUgZm9sbG93aW5nIHJlbmRlcmVkIEhU
        TUwKCiAgICBgYGBodG1sCiAgICA8ZGl2IGNsYXNzPSJlbWJlci12aWV3Ij4K
        ICAgICAgPGRpdiBkYXRhLWVtYmVyLWFjdGlvbj0iMSI+CiAgICAgICAgY2xp
        Y2sgbWUKICAgICAgPC9kaXY+CiAgICA8L2Rpdj4KICAgIGBgYAoKICAgIENs
        aWNraW5nICJjbGljayBtZSIgd2lsbCB0cmlnZ2VyIHRoZSBgYW5BY3Rpb25O
        YW1lYCBhY3Rpb24gb2YgdGhlCiAgICBgQXBwLkFwcGxpY2F0aW9uQ29udHJv
        bGxlcmAuIEluIHRoaXMgY2FzZSwgbm8gYWRkaXRpb25hbCBwYXJhbWV0ZXJz
        IHdpbGwgYmUgcGFzc2VkLgoKICAgIElmIHlvdSBwcm92aWRlIGFkZGl0aW9u
        YWwgcGFyYW1ldGVycyB0byB0aGUgaGVscGVyOgoKICAgIGBgYGhhbmRsZWJh
        cnMKICAgIDxidXR0b24ge3thY3Rpb24gJ2VkaXQnIHBvc3R9fT5FZGl0PC9i
        dXR0b24+CiAgICBgYGAKCiAgICBUaG9zZSBwYXJhbWV0ZXJzIHdpbGwgYmUg
        cGFzc2VkIGFsb25nIGFzIGFyZ3VtZW50cyB0byB0aGUgSmF2YVNjcmlwdAog
        ICAgZnVuY3Rpb24gaW1wbGVtZW50aW5nIHRoZSBhY3Rpb24uCgogICAgIyMj
        IEV2ZW50IFByb3BhZ2F0aW9uCgogICAgRXZlbnRzIHRyaWdnZXJlZCB0aHJv
        dWdoIHRoZSBhY3Rpb24gaGVscGVyIHdpbGwgYXV0b21hdGljYWxseSBoYXZl
        CiAgICBgLnByZXZlbnREZWZhdWx0KClgIGNhbGxlZCBvbiB0aGVtLiBZb3Ug
        ZG8gbm90IG5lZWQgdG8gZG8gc28gaW4geW91ciBldmVudAogICAgaGFuZGxl
        cnMuCgogICAgVG8gYWxzbyBkaXNhYmxlIGJ1YmJsaW5nLCBwYXNzIGBidWJi
        bGVzPWZhbHNlYCB0byB0aGUgaGVscGVyOgoKICAgIGBgYGhhbmRsZWJhcnMK
        ICAgIDxidXR0b24ge3thY3Rpb24gJ2VkaXQnIHBvc3QgYnViYmxlcz1mYWxz
        ZX19PkVkaXQ8L2J1dHRvbj4KICAgIGBgYAoKICAgIElmIHlvdSBuZWVkIHRo
        ZSBkZWZhdWx0IGhhbmRsZXIgdG8gdHJpZ2dlciB5b3Ugc2hvdWxkIGVpdGhl
        ciByZWdpc3RlciB5b3VyCiAgICBvd24gZXZlbnQgaGFuZGxlciwgb3IgdXNl
        IGV2ZW50IG1ldGhvZHMgb24geW91ciB2aWV3IGNsYXNzLiBTZWUgW0VtYmVy
        LlZpZXddKC9hcGkvY2xhc3Nlcy9FbWJlci5WaWV3Lmh0bWwpCiAgICAnUmVz
        cG9uZGluZyB0byBCcm93c2VyIEV2ZW50cycgZm9yIG1vcmUgaW5mb3JtYXRp
        b24uCgogICAgIyMjIFNwZWNpZnlpbmcgRE9NIGV2ZW50IHR5cGUKCiAgICBC
        eSBkZWZhdWx0IHRoZSBge3thY3Rpb259fWAgaGVscGVyIHJlZ2lzdGVycyBm
        b3IgRE9NIGBjbGlja2AgZXZlbnRzLiBZb3UgY2FuCiAgICBzdXBwbHkgYW4g
        YG9uYCBvcHRpb24gdG8gdGhlIGhlbHBlciB0byBzcGVjaWZ5IGEgZGlmZmVy
        ZW50IERPTSBldmVudCBuYW1lOgoKICAgIGBgYGhhbmRsZWJhcnMKICAgIDxk
        aXYge3thY3Rpb24gImFuQWN0aW9uTmFtZSIgb249ImRvdWJsZUNsaWNrIn19
        PgogICAgICBjbGljayBtZQogICAgPC9kaXY+CiAgICBgYGAKCiAgICBTZWUg
        YEVtYmVyLlZpZXdgICdSZXNwb25kaW5nIHRvIEJyb3dzZXIgRXZlbnRzJyBm
        b3IgYSBsaXN0IG9mCiAgICBhY2NlcHRhYmxlIERPTSBldmVudCBuYW1lcy4K
        CiAgICBOT1RFOiBCZWNhdXNlIGB7e2FjdGlvbn19YCBkZXBlbmRzIG9uIEVt
        YmVyJ3MgZXZlbnQgZGlzcGF0Y2ggc3lzdGVtIGl0IHdpbGwKICAgIG9ubHkg
        ZnVuY3Rpb24gaWYgYW4gYEVtYmVyLkV2ZW50RGlzcGF0Y2hlcmAgaW5zdGFu
        Y2UgaXMgYXZhaWxhYmxlLiBBbgogICAgYEVtYmVyLkV2ZW50RGlzcGF0Y2hl
        cmAgaW5zdGFuY2Ugd2lsbCBiZSBjcmVhdGVkIHdoZW4gYSBuZXcgYEVtYmVy
        LkFwcGxpY2F0aW9uYAogICAgaXMgY3JlYXRlZC4gSGF2aW5nIGFuIGluc3Rh
        bmNlIG9mIGBFbWJlci5BcHBsaWNhdGlvbmAgd2lsbCBzYXRpc2Z5IHRoaXMK
        ICAgIHJlcXVpcmVtZW50LgoKICAgICMjIyBTcGVjaWZ5aW5nIHdoaXRlbGlz
        dGVkIG1vZGlmaWVyIGtleXMKCiAgICBCeSBkZWZhdWx0IHRoZSBge3thY3Rp
        b259fWAgaGVscGVyIHdpbGwgaWdub3JlIGNsaWNrIGV2ZW50IHdpdGggcHJl
        c3NlZCBtb2RpZmllcgogICAga2V5cy4gWW91IGNhbiBzdXBwbHkgYW4gYGFs
        bG93ZWRLZXlzYCBvcHRpb24gdG8gc3BlY2lmeSB3aGljaCBrZXlzIHNob3Vs
        ZCBub3QgYmUgaWdub3JlZC4KCiAgICBgYGBoYW5kbGViYXJzCiAgICA8ZGl2
        IHt7YWN0aW9uICJhbkFjdGlvbk5hbWUiIGFsbG93ZWRLZXlzPSJhbHQifX0+
        CiAgICAgIGNsaWNrIG1lCiAgICA8L2Rpdj4KICAgIGBgYAoKICAgIFRoaXMg
        d2F5IHRoZSBge3thY3Rpb259fWAgd2lsbCBmaXJlIHdoZW4gY2xpY2tpbmcg
        d2l0aCB0aGUgYWx0IGtleSBwcmVzc2VkIGRvd24uCgogICAgQWx0ZXJuYXRp
        dmVseSwgc3VwcGx5ICJhbnkiIHRvIHRoZSBgYWxsb3dlZEtleXNgIG9wdGlv
        biB0byBhY2NlcHQgYW55IGNvbWJpbmF0aW9uIG9mIG1vZGlmaWVyIGtleXMu
        CgogICAgYGBgaGFuZGxlYmFycwogICAgPGRpdiB7e2FjdGlvbiAiYW5BY3Rp
        b25OYW1lIiBhbGxvd2VkS2V5cz0iYW55In19PgogICAgICBjbGljayBtZSB3
        aXRoIGFueSBrZXkgcHJlc3NlZAogICAgPC9kaXY+CiAgICBgYGAKCiAgICAj
        IyMgU3BlY2lmeWluZyBhIFRhcmdldAoKICAgIFRoZXJlIGFyZSBzZXZlcmFs
        IHBvc3NpYmxlIHRhcmdldCBvYmplY3RzIGZvciBge3thY3Rpb259fWAgaGVs
        cGVyczoKCiAgICBJbiBhIHR5cGljYWwgRW1iZXIgYXBwbGljYXRpb24sIHdo
        ZXJlIHZpZXdzIGFyZSBtYW5hZ2VkIHRocm91Z2ggdXNlIG9mIHRoZQogICAg
        YHt7b3V0bGV0fX1gIGhlbHBlciwgYWN0aW9ucyB3aWxsIGJ1YmJsZSB0byB0
        aGUgY3VycmVudCBjb250cm9sbGVyLCB0aGVuCiAgICB0byB0aGUgY3VycmVu
        dCByb3V0ZSwgYW5kIHRoZW4gdXAgdGhlIHJvdXRlIGhpZXJhcmNoeS4KCiAg
        ICBBbHRlcm5hdGl2ZWx5LCBhIGB0YXJnZXRgIG9wdGlvbiBjYW4gYmUgcHJv
        dmlkZWQgdG8gdGhlIGhlbHBlciB0byBjaGFuZ2UKICAgIHdoaWNoIG9iamVj
        dCB3aWxsIHJlY2VpdmUgdGhlIG1ldGhvZCBjYWxsLiBUaGlzIG9wdGlvbiBt
        dXN0IGJlIGEgcGF0aAogICAgdG8gYW4gb2JqZWN0LCBhY2Nlc3NpYmxlIGlu
        IHRoZSBjdXJyZW50IGNvbnRleHQ6CgogICAgYGBgaGFuZGxlYmFycwogICAg
        e3shIHRoZSBhcHBsaWNhdGlvbiB0ZW1wbGF0ZSB9fQogICAgPGRpdiB7e2Fj
        dGlvbiAiYW5BY3Rpb25OYW1lIiB0YXJnZXQ9dmlld319PgogICAgICBjbGlj
        ayBtZQogICAgPC9kaXY+CiAgICBgYGAKCiAgICBgYGBqYXZhc2NyaXB0CiAg
        ICBBcHAuQXBwbGljYXRpb25WaWV3ID0gRW1iZXIuVmlldy5leHRlbmQoewog
        ICAgICBhY3Rpb25zOiB7CiAgICAgICAgYW5BY3Rpb25OYW1lOiBmdW5jdGlv
        bigpe30KICAgICAgfQogICAgfSk7CgogICAgYGBgCgogICAgIyMjIEFkZGl0
        aW9uYWwgUGFyYW1ldGVycwoKICAgIFlvdSBtYXkgc3BlY2lmeSBhZGRpdGlv
        bmFsIHBhcmFtZXRlcnMgdG8gdGhlIGB7e2FjdGlvbn19YCBoZWxwZXIuIFRo
        ZXNlCiAgICBwYXJhbWV0ZXJzIGFyZSBwYXNzZWQgYWxvbmcgYXMgdGhlIGFy
        Z3VtZW50cyB0byB0aGUgSmF2YVNjcmlwdCBmdW5jdGlvbgogICAgaW1wbGVt
        ZW50aW5nIHRoZSBhY3Rpb24uCgogICAgYGBgaGFuZGxlYmFycwogICAge3sj
        ZWFjaCBwZXJzb24gaW4gcGVvcGxlfX0KICAgICAgPGRpdiB7e2FjdGlvbiAi
        ZWRpdCIgcGVyc29ufX0+CiAgICAgICAgY2xpY2sgbWUKICAgICAgPC9kaXY+
        CiAgICB7ey9lYWNofX0KICAgIGBgYAoKICAgIENsaWNraW5nICJjbGljayBt
        ZSIgd2lsbCB0cmlnZ2VyIHRoZSBgZWRpdGAgbWV0aG9kIG9uIHRoZSBjdXJy
        ZW50IGNvbnRyb2xsZXIKICAgIHdpdGggdGhlIHZhbHVlIG9mIGBwZXJzb25g
        IGFzIGEgcGFyYW1ldGVyLgoKICAgIEBtZXRob2QgYWN0aW9uCiAgICBAZm9y
        IEVtYmVyLkhhbmRsZWJhcnMuaGVscGVycwogICAgQHBhcmFtIHtTdHJpbmd9
        IGFjdGlvbk5hbWUKICAgIEBwYXJhbSB7T2JqZWN0fSBbY29udGV4dF0qCiAg
        ICBAcGFyYW0ge0hhc2h9IG9wdGlvbnMKICAqLwogIEVtYmVySGFuZGxlYmFy
        cy5yZWdpc3RlckhlbHBlcignYWN0aW9uJywgZnVuY3Rpb24oYWN0aW9uTmFt
        ZSkgewogICAgdmFyIG9wdGlvbnMgPSBhcmd1bWVudHNbYXJndW1lbnRzLmxl
        bmd0aCAtIDFdLAogICAgICAgIGNvbnRleHRzID0gYV9zbGljZS5jYWxsKGFy
        Z3VtZW50cywgMSwgLTEpOwoKICAgIHZhciBoYXNoID0gb3B0aW9ucy5oYXNo
        LAogICAgICAgIGNvbnRyb2xsZXI7CgogICAgLy8gY3JlYXRlIGEgaGFzaCB0
        byBwYXNzIGFsb25nIHRvIHJlZ2lzdGVyQWN0aW9uCiAgICB2YXIgYWN0aW9u
        ID0gewogICAgICBldmVudE5hbWU6IGhhc2gub24gfHwgImNsaWNrIgogICAg
        fTsKCiAgICBhY3Rpb24ucGFyYW1ldGVycyA9IHsKICAgICAgY29udGV4dDog
        dGhpcywKICAgICAgb3B0aW9uczogb3B0aW9ucywKICAgICAgcGFyYW1zOiBj
        b250ZXh0cwogICAgfTsKCiAgICBhY3Rpb24udmlldyA9IG9wdGlvbnMuZGF0
        YS52aWV3OwoKICAgIHZhciByb290LCB0YXJnZXQ7CgogICAgaWYgKGhhc2gu
        dGFyZ2V0KSB7CiAgICAgIHJvb3QgPSB0aGlzOwogICAgICB0YXJnZXQgPSBo
        YXNoLnRhcmdldDsKICAgIH0gZWxzZSBpZiAoY29udHJvbGxlciA9IG9wdGlv
        bnMuZGF0YS5rZXl3b3Jkcy5jb250cm9sbGVyKSB7CiAgICAgIHJvb3QgPSBj
        b250cm9sbGVyOwogICAgfQoKICAgIGFjdGlvbi50YXJnZXQgPSB7IHJvb3Q6
        IHJvb3QsIHRhcmdldDogdGFyZ2V0LCBvcHRpb25zOiBvcHRpb25zIH07CiAg
        ICBhY3Rpb24uYnViYmxlcyA9IGhhc2guYnViYmxlczsKCiAgICB2YXIgYWN0
        aW9uSWQgPSBBY3Rpb25IZWxwZXIucmVnaXN0ZXJBY3Rpb24oYWN0aW9uTmFt
        ZSwgYWN0aW9uLCBoYXNoLmFsbG93ZWRLZXlzKTsKICAgIHJldHVybiBuZXcg
        U2FmZVN0cmluZygnZGF0YS1lbWJlci1hY3Rpb249IicgKyBhY3Rpb25JZCAr
        ICciJyk7CiAgfSk7Cgp9KTsKCn0pKCk7CgoKCihmdW5jdGlvbigpIHsKLyoq
        CkBtb2R1bGUgZW1iZXIKQHN1Ym1vZHVsZSBlbWJlci1yb3V0aW5nCiovCgpp
        ZiAoRW1iZXIuRU5WLkVYUEVSSU1FTlRBTF9DT05UUk9MX0hFTFBFUikgewog
        IHZhciBnZXQgPSBFbWJlci5nZXQsIHNldCA9IEVtYmVyLnNldDsKCiAgLyoq
        CiAgIGB7e2NvbnRyb2x9fWAgd29ya3MgbGlrZSByZW5kZXIsIGV4Y2VwdCBp
        dCB1c2VzIGEgbmV3IGNvbnRyb2xsZXIgaW5zdGFuY2UgZm9yIGV2ZXJ5IGNh
        bGwsIGluc3RlYWQgb2YgcmV1c2luZyB0aGUgc2luZ2xldG9uIGNvbnRyb2xs
        ZXIuCgogICAgVGhlIGNvbnRyb2wgaGVscGVyIGlzIGN1cnJlbnRseSB1bmRl
        ciBkZXZlbG9wbWVudCBhbmQgaXMgY29uc2lkZXJlZCBleHBlcmltZW50YWwu
        CiAgICBUbyBlbmFibGUgaXQsIHNldCBgRU5WLkVYUEVSSU1FTlRBTF9DT05U
        Uk9MX0hFTFBFUiA9IHRydWVgIGJlZm9yZSByZXF1aXJpbmcgRW1iZXIuCgog
        ICBGb3IgZXhhbXBsZSBpZiB5b3UgaGFkIHRoaXMgYGF1dGhvcmAgdGVtcGxh
        dGUuCgogICBgYGBoYW5kbGViYXJzCjxkaXYgY2xhc3M9ImF1dGhvciI+CiAg
        V3JpdHRlbiBieSB7e2ZpcnN0TmFtZX19IHt7bGFzdE5hbWV9fS4KICBUb3Rh
        bCBQb3N0czoge3twb3N0Q291bnR9fQo8L2Rpdj4KICAgYGBgCgogICBZb3Ug
        Y291bGQgcmVuZGVyIGl0IGluc2lkZSB0aGUgYHBvc3RgIHRlbXBsYXRlIHVz
        aW5nIHRoZSBgY29udHJvbGAgaGVscGVyLgoKICAgYGBgaGFuZGxlYmFycwo8
        ZGl2IGNsYXNzPSJwb3N0Ij4KICA8aDE+e3t0aXRsZX19PC9oMT4KICA8ZGl2
        Pnt7Ym9keX19PC9kaXY+CiAgICAge3tjb250cm9sICJhdXRob3IiIGF1dGhv
        cn19CjwvZGl2PgogICBgYGAKCiAgICBAbWV0aG9kIGNvbnRyb2wKICAgIEBm
        b3IgRW1iZXIuSGFuZGxlYmFycy5oZWxwZXJzCiAgICBAcGFyYW0ge1N0cmlu
        Z30gcGF0aAogICAgQHBhcmFtIHtTdHJpbmd9IG1vZGVsUGF0aAogICAgQHBh
        cmFtIHtIYXNofSBvcHRpb25zCiAgICBAcmV0dXJuIHtTdHJpbmd9IEhUTUwg
        c3RyaW5nCiAgKi8KICBFbWJlci5IYW5kbGViYXJzLnJlZ2lzdGVySGVscGVy
        KCdjb250cm9sJywgZnVuY3Rpb24ocGF0aCwgbW9kZWxQYXRoLCBvcHRpb25z
        KSB7CiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMikgewogICAgICBv
        cHRpb25zID0gbW9kZWxQYXRoOwogICAgICBtb2RlbFBhdGggPSB1bmRlZmlu
        ZWQ7CiAgICB9CgogICAgdmFyIG1vZGVsOwoKICAgIGlmIChtb2RlbFBhdGgp
        IHsKICAgICAgbW9kZWwgPSBFbWJlci5IYW5kbGViYXJzLmdldCh0aGlzLCBt
        b2RlbFBhdGgsIG9wdGlvbnMpOwogICAgfQoKICAgIHZhciBjb250cm9sbGVy
        ID0gb3B0aW9ucy5kYXRhLmtleXdvcmRzLmNvbnRyb2xsZXIsCiAgICAgICAg
        dmlldyA9IG9wdGlvbnMuZGF0YS5rZXl3b3Jkcy52aWV3LAogICAgICAgIGNo
        aWxkcmVuID0gZ2V0KGNvbnRyb2xsZXIsICdfY2hpbGRDb250YWluZXJzJyks
        CiAgICAgICAgY29udHJvbElEID0gb3B0aW9ucy5oYXNoLmNvbnRyb2xJRCwK
        ICAgICAgICBjb250YWluZXIsIHN1YkNvbnRhaW5lcjsKCiAgICBpZiAoY2hp
        bGRyZW4uaGFzT3duUHJvcGVydHkoY29udHJvbElEKSkgewogICAgICBzdWJD
        b250YWluZXIgPSBjaGlsZHJlbltjb250cm9sSURdOwogICAgfSBlbHNlIHsK
        ICAgICAgY29udGFpbmVyID0gZ2V0KGNvbnRyb2xsZXIsICdjb250YWluZXIn
        KSwKICAgICAgc3ViQ29udGFpbmVyID0gY29udGFpbmVyLmNoaWxkKCk7CiAg
        ICAgIGNoaWxkcmVuW2NvbnRyb2xJRF0gPSBzdWJDb250YWluZXI7CiAgICB9
        CgogICAgdmFyIG5vcm1hbGl6ZWRQYXRoID0gcGF0aC5yZXBsYWNlKC9cLy9n
        LCAnLicpOwoKICAgIHZhciBjaGlsZFZpZXcgPSBzdWJDb250YWluZXIubG9v
        a3VwKCd2aWV3OicgKyBub3JtYWxpemVkUGF0aCkgfHwgc3ViQ29udGFpbmVy
        Lmxvb2t1cCgndmlldzpkZWZhdWx0JyksCiAgICAgICAgY2hpbGRDb250cm9s
        bGVyID0gc3ViQ29udGFpbmVyLmxvb2t1cCgnY29udHJvbGxlcjonICsgbm9y
        bWFsaXplZFBhdGgpLAogICAgICAgIGNoaWxkVGVtcGxhdGUgPSBzdWJDb250
        YWluZXIubG9va3VwKCd0ZW1wbGF0ZTonICsgcGF0aCk7CgogICAgRW1iZXIu
        YXNzZXJ0KCJDb3VsZCBub3QgZmluZCBjb250cm9sbGVyIGZvciBwYXRoOiAi
        ICsgbm9ybWFsaXplZFBhdGgsIGNoaWxkQ29udHJvbGxlcik7CiAgICBFbWJl
        ci5hc3NlcnQoIkNvdWxkIG5vdCBmaW5kIHZpZXcgZm9yIHBhdGg6ICIgKyBu
        b3JtYWxpemVkUGF0aCwgY2hpbGRWaWV3KTsKCiAgICBzZXQoY2hpbGRDb250
        cm9sbGVyLCAndGFyZ2V0JywgY29udHJvbGxlcik7CiAgICBzZXQoY2hpbGRD
        b250cm9sbGVyLCAnbW9kZWwnLCBtb2RlbCk7CgogICAgb3B0aW9ucy5oYXNo
        LnRlbXBsYXRlID0gY2hpbGRUZW1wbGF0ZTsKICAgIG9wdGlvbnMuaGFzaC5j
        b250cm9sbGVyID0gY2hpbGRDb250cm9sbGVyOwoKICAgIGZ1bmN0aW9uIG9i
        c2VydmVyKCkgewogICAgICB2YXIgbW9kZWwgPSBFbWJlci5IYW5kbGViYXJz
        LmdldCh0aGlzLCBtb2RlbFBhdGgsIG9wdGlvbnMpOwogICAgICBzZXQoY2hp
        bGRDb250cm9sbGVyLCAnbW9kZWwnLCBtb2RlbCk7CiAgICAgIGNoaWxkVmll
        dy5yZXJlbmRlcigpOwogICAgfQoKICAgIGlmIChtb2RlbFBhdGgpIHsKICAg
        ICAgRW1iZXIuYWRkT2JzZXJ2ZXIodGhpcywgbW9kZWxQYXRoLCBvYnNlcnZl
        cik7CiAgICAgIGNoaWxkVmlldy5vbmUoJ3dpbGxEZXN0cm95RWxlbWVudCcs
        IHRoaXMsIGZ1bmN0aW9uKCkgewogICAgICAgIEVtYmVyLnJlbW92ZU9ic2Vy
        dmVyKHRoaXMsIG1vZGVsUGF0aCwgb2JzZXJ2ZXIpOwogICAgICB9KTsKICAg
        IH0KCiAgICBFbWJlci5IYW5kbGViYXJzLmhlbHBlcnMudmlldy5jYWxsKHRo
        aXMsIGNoaWxkVmlldywgb3B0aW9ucyk7CiAgfSk7Cn0KCn0pKCk7CgoKCihm
        dW5jdGlvbigpIHsKCn0pKCk7CgoKCihmdW5jdGlvbigpIHsKLyoqCkBtb2R1
        bGUgZW1iZXIKQHN1Ym1vZHVsZSBlbWJlci1yb3V0aW5nCiovCgp2YXIgZ2V0
        ID0gRW1iZXIuZ2V0LCBzZXQgPSBFbWJlci5zZXQ7CgpFbWJlci5Db250cm9s
        bGVyTWl4aW4ucmVvcGVuKHsKICAvKioKICAgIFRyYW5zaXRpb24gdGhlIGFw
        cGxpY2F0aW9uIGludG8gYW5vdGhlciByb3V0ZS4gVGhlIHJvdXRlIG1heQog
        ICAgYmUgZWl0aGVyIGEgc2luZ2xlIHJvdXRlIG9yIHJvdXRlIHBhdGg6Cgog
        ICAgYGBgamF2YXNjcmlwdAogICAgICBhQ29udHJvbGxlci50cmFuc2l0aW9u
        VG9Sb3V0ZSgnYmxvZ1Bvc3RzJyk7CiAgICAgIGFDb250cm9sbGVyLnRyYW5z
        aXRpb25Ub1JvdXRlKCdibG9nUG9zdHMucmVjZW50RW50cmllcycpOwogICAg
        YGBgCgogICAgT3B0aW9uYWxseSBzdXBwbHkgYSBtb2RlbCBmb3IgdGhlIHJv
        dXRlIGluIHF1ZXN0aW9uLiBUaGUgbW9kZWwKICAgIHdpbGwgYmUgc2VyaWFs
        aXplZCBpbnRvIHRoZSBVUkwgdXNpbmcgdGhlIGBzZXJpYWxpemVgIGhvb2sg
        b2YKICAgIHRoZSByb3V0ZToKCiAgICBgYGBqYXZhc2NyaXB0CiAgICAgIGFD
        b250cm9sbGVyLnRyYW5zaXRpb25Ub1JvdXRlKCdibG9nUG9zdCcsIGFQb3N0
        KTsKICAgIGBgYAoKICAgIE11bHRpcGxlIG1vZGVscyB3aWxsIGJlIGFwcGxp
        ZWQgbGFzdCB0byBmaXJzdCByZWN1cnNpdmVseSB1cCB0aGUKICAgIHJlc291
        cmNlIHRyZWUuCgogICAgYGBgamF2YXNjcmlwdAoKICAgICAgdGhpcy5yZXNv
        dXJjZSgnYmxvZ1Bvc3QnLCB7cGF0aDonOmJsb2dQb3N0SWQnfSwgZnVuY3Rp
        b24oKXsKICAgICAgICB0aGlzLnJlc291cmNlKCdibG9nQ29tbWVudCcsIHtw
        YXRoOiAnOmJsb2dDb21tZW50SWQnfSk7CiAgICAgIH0pOwogICAgICAKICAg
        ICAgYUNvbnRyb2xsZXIudHJhbnNpdGlvblRvUm91dGUoJ2Jsb2dDb21tZW50
        JywgYVBvc3QsIGFDb21tZW50KTsKICAgIGBgYAoKICAgIFNlZSBhbHNvICdy
        ZXBsYWNlUm91dGUnLgoKICAgIEBwYXJhbSB7U3RyaW5nfSBuYW1lIHRoZSBu
        YW1lIG9mIHRoZSByb3V0ZQogICAgQHBhcmFtIHsuLi5PYmplY3R9IG1vZGVs
        cyB0aGUgbW9kZWwocykgdG8gYmUgdXNlZCB3aGlsZSB0cmFuc2l0aW9uaW5n
        CiAgICB0byB0aGUgcm91dGUuCiAgICBAZm9yIEVtYmVyLkNvbnRyb2xsZXJN
        aXhpbgogICAgQG1ldGhvZCB0cmFuc2l0aW9uVG9Sb3V0ZQogICovCiAgdHJh
        bnNpdGlvblRvUm91dGU6IGZ1bmN0aW9uKCkgewogICAgLy8gdGFyZ2V0IG1h
        eSBiZSBlaXRoZXIgYW5vdGhlciBjb250cm9sbGVyIG9yIGEgcm91dGVyCiAg
        ICB2YXIgdGFyZ2V0ID0gZ2V0KHRoaXMsICd0YXJnZXQnKSwKICAgICAgICBt
        ZXRob2QgPSB0YXJnZXQudHJhbnNpdGlvblRvUm91dGUgfHwgdGFyZ2V0LnRy
        YW5zaXRpb25UbzsKICAgIHJldHVybiBtZXRob2QuYXBwbHkodGFyZ2V0LCBh
        cmd1bWVudHMpOwogIH0sCgogIC8qKgogICAgQGRlcHJlY2F0ZWQKICAgIEBm
        b3IgRW1iZXIuQ29udHJvbGxlck1peGluCiAgICBAbWV0aG9kIHRyYW5zaXRp
        b25UbwogICovCiAgdHJhbnNpdGlvblRvOiBmdW5jdGlvbigpIHsKICAgIEVt
        YmVyLmRlcHJlY2F0ZSgidHJhbnNpdGlvblRvIGlzIGRlcHJlY2F0ZWQuIFBs
        ZWFzZSB1c2UgdHJhbnNpdGlvblRvUm91dGUuIik7CiAgICByZXR1cm4gdGhp
        cy50cmFuc2l0aW9uVG9Sb3V0ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwog
        IH0sCgogIC8qKgogICAgVHJhbnNpdGlvbiBpbnRvIGFub3RoZXIgcm91dGUg
        d2hpbGUgcmVwbGFjaW5nIHRoZSBjdXJyZW50IFVSTCwgaWYgcG9zc2libGUu
        CiAgICBUaGlzIHdpbGwgcmVwbGFjZSB0aGUgY3VycmVudCBoaXN0b3J5IGVu
        dHJ5IGluc3RlYWQgb2YgYWRkaW5nIGEgbmV3IG9uZS4gCiAgICBCZXNpZGUg
        dGhhdCwgaXQgaXMgaWRlbnRpY2FsIHRvIGB0cmFuc2l0aW9uVG9Sb3V0ZWAg
        aW4gYWxsIG90aGVyIHJlc3BlY3RzLgoKICAgIGBgYGphdmFzY3JpcHQKICAg
        ICAgYUNvbnRyb2xsZXIucmVwbGFjZVJvdXRlKCdibG9nUG9zdHMnKTsKICAg
        ICAgYUNvbnRyb2xsZXIucmVwbGFjZVJvdXRlKCdibG9nUG9zdHMucmVjZW50
        RW50cmllcycpOwogICAgYGBgCgogICAgT3B0aW9uYWxseSBzdXBwbHkgYSBt
        b2RlbCBmb3IgdGhlIHJvdXRlIGluIHF1ZXN0aW9uLiBUaGUgbW9kZWwKICAg
        IHdpbGwgYmUgc2VyaWFsaXplZCBpbnRvIHRoZSBVUkwgdXNpbmcgdGhlIGBz
        ZXJpYWxpemVgIGhvb2sgb2YKICAgIHRoZSByb3V0ZToKCiAgICBgYGBqYXZh
        c2NyaXB0CiAgICAgIGFDb250cm9sbGVyLnJlcGxhY2VSb3V0ZSgnYmxvZ1Bv
        c3QnLCBhUG9zdCk7CiAgICBgYGAKCiAgICBNdWx0aXBsZSBtb2RlbHMgd2ls
        bCBiZSBhcHBsaWVkIGxhc3QgdG8gZmlyc3QgcmVjdXJzaXZlbHkgdXAgdGhl
        CiAgICByZXNvdXJjZSB0cmVlLgoKICAgIGBgYGphdmFzY3JpcHQKCiAgICAg
        IHRoaXMucmVzb3VyY2UoJ2Jsb2dQb3N0Jywge3BhdGg6JzpibG9nUG9zdElk
        J30sIGZ1bmN0aW9uKCl7CiAgICAgICAgdGhpcy5yZXNvdXJjZSgnYmxvZ0Nv
        bW1lbnQnLCB7cGF0aDogJzpibG9nQ29tbWVudElkJ30pOwogICAgICB9KTsK
        ICAgICAgCiAgICAgIGFDb250cm9sbGVyLnJlcGxhY2VSb3V0ZSgnYmxvZ0Nv
        bW1lbnQnLCBhUG9zdCwgYUNvbW1lbnQpOwogICAgYGBgCgogICAgQHBhcmFt
        IHtTdHJpbmd9IG5hbWUgdGhlIG5hbWUgb2YgdGhlIHJvdXRlCiAgICBAcGFy
        YW0gey4uLk9iamVjdH0gbW9kZWxzIHRoZSBtb2RlbChzKSB0byBiZSB1c2Vk
        IHdoaWxlIHRyYW5zaXRpb25pbmcKICAgIHRvIHRoZSByb3V0ZS4KICAgIEBm
        b3IgRW1iZXIuQ29udHJvbGxlck1peGluCiAgICBAbWV0aG9kIHJlcGxhY2VS
        b3V0ZQogICovCiAgcmVwbGFjZVJvdXRlOiBmdW5jdGlvbigpIHsKICAgIC8v
        IHRhcmdldCBtYXkgYmUgZWl0aGVyIGFub3RoZXIgY29udHJvbGxlciBvciBh
        IHJvdXRlcgogICAgdmFyIHRhcmdldCA9IGdldCh0aGlzLCAndGFyZ2V0Jyks
        CiAgICAgICAgbWV0aG9kID0gdGFyZ2V0LnJlcGxhY2VSb3V0ZSB8fCB0YXJn
        ZXQucmVwbGFjZVdpdGg7CiAgICByZXR1cm4gbWV0aG9kLmFwcGx5KHRhcmdl
        dCwgYXJndW1lbnRzKTsKICB9LAoKICAvKioKICAgIEBkZXByZWNhdGVkCiAg
        ICBAZm9yIEVtYmVyLkNvbnRyb2xsZXJNaXhpbgogICAgQG1ldGhvZCByZXBs
        YWNlV2l0aAogICovCiAgcmVwbGFjZVdpdGg6IGZ1bmN0aW9uKCkgewogICAg
        RW1iZXIuZGVwcmVjYXRlKCJyZXBsYWNlV2l0aCBpcyBkZXByZWNhdGVkLiBQ
        bGVhc2UgdXNlIHJlcGxhY2VSb3V0ZS4iKTsKICAgIHJldHVybiB0aGlzLnJl
        cGxhY2VSb3V0ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogIH0KfSk7Cgp9
        KSgpOwoKCgooZnVuY3Rpb24oKSB7Ci8qKgpAbW9kdWxlIGVtYmVyCkBzdWJt
        b2R1bGUgZW1iZXItcm91dGluZwoqLwoKdmFyIGdldCA9IEVtYmVyLmdldCwg
        c2V0ID0gRW1iZXIuc2V0OwoKRW1iZXIuVmlldy5yZW9wZW4oewoKICAvKioK
        ICAgIFNldHMgdGhlIHByaXZhdGUgYF9vdXRsZXRzYCBvYmplY3Qgb24gdGhl
        IHZpZXcuCgogICAgQG1ldGhvZCBpbml0CiAgICovCiAgaW5pdDogZnVuY3Rp
        b24oKSB7CiAgICBzZXQodGhpcywgJ19vdXRsZXRzJywge30pOwogICAgdGhp
        cy5fc3VwZXIoKTsKICB9LAoKICAvKioKICAgIE1hbnVhbGx5IGZpbGwgYW55
        IG9mIGEgdmlldydzIGB7e291dGxldH19YCBhcmVhcyB3aXRoIHRoZQogICAg
        c3VwcGxpZWQgdmlldy4KCiAgICBFeGFtcGxlCgogICAgYGBgamF2YXNjcmlw
        dAogICAgdmFyIE15VmlldyA9IEVtYmVyLlZpZXcuZXh0ZW5kKHsKICAgICAg
        dGVtcGxhdGU6IEVtYmVyLkhhbmRsZWJhcnMuY29tcGlsZSgnQ2hpbGQgdmll
        dzoge3tvdXRsZXQgIm1haW4ifX0gJykKICAgIH0pOwogICAgdmFyIG15Vmll
        dyA9IE15Vmlldy5jcmVhdGUoKTsKICAgIG15Vmlldy5hcHBlbmRUbygnYm9k
        eScpOwogICAgLy8gVGhlIGh0bWwgZm9yIG15VmlldyBub3cgbG9va3MgbGlr
        ZToKICAgIC8vIDxkaXYgaWQ9ImVtYmVyMjI4IiBjbGFzcz0iZW1iZXItdmll
        dyI+Q2hpbGQgdmlldzogPC9kaXY+CgogICAgbXlWaWV3LmNvbm5lY3RPdXRs
        ZXQoJ21haW4nLCBFbWJlci5WaWV3LmV4dGVuZCh7CiAgICAgIHRlbXBsYXRl
        OiBFbWJlci5IYW5kbGViYXJzLmNvbXBpbGUoJzxoMT5Gb288L2gxPiAnKQog
        ICAgfSkpOwogICAgLy8gVGhlIGh0bWwgZm9yIG15VmlldyBub3cgbG9va3Mg
        bGlrZToKICAgIC8vIDxkaXYgaWQ9ImVtYmVyMjI4IiBjbGFzcz0iZW1iZXIt
        dmlldyI+Q2hpbGQgdmlldzoKICAgIC8vICAgPGRpdiBpZD0iZW1iZXIyMzQi
        IGNsYXNzPSJlbWJlci12aWV3Ij48aDE+Rm9vPC9oMT4gPC9kaXY+CiAgICAv
        LyA8L2Rpdj4KICAgIGBgYAogICAgQG1ldGhvZCBjb25uZWN0T3V0bGV0CiAg
        ICBAcGFyYW0gIHtTdHJpbmd9IG91dGxldE5hbWUgQSB1bmlxdWUgbmFtZSBm
        b3IgdGhlIG91dGxldAogICAgQHBhcmFtICB7T2JqZWN0fSB2aWV3ICAgICAg
        IEFuIEVtYmVyLlZpZXcKICAgKi8KICBjb25uZWN0T3V0bGV0OiBmdW5jdGlv
        bihvdXRsZXROYW1lLCB2aWV3KSB7CiAgICBpZiAodGhpcy5fcGVuZGluZ0Rp
        c2Nvbm5lY3Rpb25zKSB7CiAgICAgIGRlbGV0ZSB0aGlzLl9wZW5kaW5nRGlz
        Y29ubmVjdGlvbnNbb3V0bGV0TmFtZV07CiAgICB9CgogICAgaWYgKHRoaXMu
        X2hhc0VxdWl2YWxlbnRWaWV3KG91dGxldE5hbWUsIHZpZXcpKSB7CiAgICAg
        IHZpZXcuZGVzdHJveSgpOwogICAgICByZXR1cm47CiAgICB9CgogICAgdmFy
        IG91dGxldHMgPSBnZXQodGhpcywgJ19vdXRsZXRzJyksCiAgICAgICAgY29u
        dGFpbmVyID0gZ2V0KHRoaXMsICdjb250YWluZXInKSwKICAgICAgICByb3V0
        ZXIgPSBjb250YWluZXIgJiYgY29udGFpbmVyLmxvb2t1cCgncm91dGVyOm1h
        aW4nKSwKICAgICAgICByZW5kZXJlZE5hbWUgPSBnZXQodmlldywgJ3JlbmRl
        cmVkTmFtZScpOwoKICAgIHNldChvdXRsZXRzLCBvdXRsZXROYW1lLCB2aWV3
        KTsKCiAgICBpZiAocm91dGVyICYmIHJlbmRlcmVkTmFtZSkgewogICAgICBy
        b3V0ZXIuX2Nvbm5lY3RBY3RpdmVWaWV3KHJlbmRlcmVkTmFtZSwgdmlldyk7
        CiAgICB9CiAgfSwKCiAgLyoqCiAgICBAcHJpdmF0ZQoKICAgIERldGVybWlu
        ZXMgaWYgdGhlIHZpZXcgaGFzIGFscmVhZHkgYmVlbiBjcmVhdGVkIGJ5IGNo
        ZWNraW5nIGlmCiAgICB0aGUgdmlldyBoYXMgdGhlIHNhbWUgY29uc3RydWN0
        b3IsIHRlbXBsYXRlLCBhbmQgY29udGV4dCBhcyB0aGUKICAgIHZpZXcgaW4g
        dGhlIGBfb3V0bGV0c2Agb2JqZWN0LgoKICAgIEBtZXRob2QgX2hhc0VxdWl2
        YWxlbnRWaWV3CiAgICBAcGFyYW0gIHtTdHJpbmd9IG91dGxldE5hbWUgVGhl
        IG5hbWUgb2YgdGhlIG91dGxldCB3ZSBhcmUgY2hlY2tpbmcKICAgIEBwYXJh
        bSAge09iamVjdH0gdmlldyAgICAgICBBbiBFbWJlci5WaWV3CiAgICBAcmV0
        dXJuIHtCb29sZWFufQogICAqLwogIF9oYXNFcXVpdmFsZW50VmlldzogZnVu
        Y3Rpb24ob3V0bGV0TmFtZSwgdmlldykgewogICAgdmFyIGV4aXN0aW5nVmll
        dyA9IGdldCh0aGlzLCAnX291dGxldHMuJytvdXRsZXROYW1lKTsKICAgIHJl
        dHVybiBleGlzdGluZ1ZpZXcgJiYKICAgICAgZXhpc3RpbmdWaWV3LmNvbnN0
        cnVjdG9yID09PSB2aWV3LmNvbnN0cnVjdG9yICYmCiAgICAgIGV4aXN0aW5n
        Vmlldy5nZXQoJ3RlbXBsYXRlJykgPT09IHZpZXcuZ2V0KCd0ZW1wbGF0ZScp
        ICYmCiAgICAgIGV4aXN0aW5nVmlldy5nZXQoJ2NvbnRleHQnKSA9PT0gdmll
        dy5nZXQoJ2NvbnRleHQnKTsKICB9LAoKICAvKioKICAgIFJlbW92ZXMgYW4g
        b3V0bGV0IGZyb20gdGhlIHZpZXcuCgogICAgRXhhbXBsZQoKICAgIGBgYGph
        dmFzY3JpcHQKICAgIHZhciBNeVZpZXcgPSBFbWJlci5WaWV3LmV4dGVuZCh7
        CiAgICAgIHRlbXBsYXRlOiBFbWJlci5IYW5kbGViYXJzLmNvbXBpbGUoJ0No
        aWxkIHZpZXc6IHt7b3V0bGV0ICJtYWluIn19ICcpCiAgICB9KTsKICAgIHZh
        ciBteVZpZXcgPSBNeVZpZXcuY3JlYXRlKCk7CiAgICBteVZpZXcuYXBwZW5k
        VG8oJ2JvZHknKTsKICAgIC8vIG15VmlldydzIGh0bWw6CiAgICAvLyA8ZGl2
        IGlkPSJlbWJlcjIyOCIgY2xhc3M9ImVtYmVyLXZpZXciPkNoaWxkIHZpZXc6
        IDwvZGl2PgoKICAgIG15Vmlldy5jb25uZWN0T3V0bGV0KCdtYWluJywgRW1i
        ZXIuVmlldy5leHRlbmQoewogICAgICB0ZW1wbGF0ZTogRW1iZXIuSGFuZGxl
        YmFycy5jb21waWxlKCc8aDE+Rm9vPC9oMT4gJykKICAgIH0pKTsKICAgIC8v
        IG15VmlldydzIGh0bWw6CiAgICAvLyA8ZGl2IGlkPSJlbWJlcjIyOCIgY2xh
        c3M9ImVtYmVyLXZpZXciPkNoaWxkIHZpZXc6CiAgICAvLyAgIDxkaXYgaWQ9
        ImVtYmVyMjM0IiBjbGFzcz0iZW1iZXItdmlldyI+PGgxPkZvbzwvaDE+IDwv
        ZGl2PgogICAgLy8gPC9kaXY+CgogICAgbXlWaWV3LmRpc2Nvbm5lY3RPdXRs
        ZXQoJ21haW4nKTsKICAgIC8vIG15VmlldydzIGh0bWw6CiAgICAvLyA8ZGl2
        IGlkPSJlbWJlcjIyOCIgY2xhc3M9ImVtYmVyLXZpZXciPkNoaWxkIHZpZXc6
        IDwvZGl2PgogICAgYGBgCgogICAgQG1ldGhvZCBkaXNjb25uZWN0T3V0bGV0
        CiAgICBAcGFyYW0gIHtTdHJpbmd9IG91dGxldE5hbWUgVGhlIG5hbWUgb2Yg
        dGhlIG91dGxldCB0byBiZSByZW1vdmVkCiAgICovCiAgZGlzY29ubmVjdE91
        dGxldDogZnVuY3Rpb24ob3V0bGV0TmFtZSkgewogICAgaWYgKCF0aGlzLl9w
        ZW5kaW5nRGlzY29ubmVjdGlvbnMpIHsKICAgICAgdGhpcy5fcGVuZGluZ0Rp
        c2Nvbm5lY3Rpb25zID0ge307CiAgICB9CiAgICB0aGlzLl9wZW5kaW5nRGlz
        Y29ubmVjdGlvbnNbb3V0bGV0TmFtZV0gPSB0cnVlOwogICAgRW1iZXIucnVu
        Lm9uY2UodGhpcywgJ19maW5pc2hEaXNjb25uZWN0aW9ucycpOwogIH0sCgog
        IC8qKgogICAgQHByaXZhdGUKCiAgICBHZXRzIGFuIG91dGxldCB0aGF0IGlz
        IHBlbmRpbmcgZGlzY29ubmVjdGlvbiBhbmQgdGhlbgogICAgbnVsbGlmeXMg
        dGhlIG9iamVjdCBvbiB0aGUgYF9vdXRsZXRgIG9iamVjdC4KCiAgICBAbWV0
        aG9kIF9maW5pc2hEaXNjb25uZWN0aW9ucwogICAqLwogIF9maW5pc2hEaXNj
        b25uZWN0aW9uczogZnVuY3Rpb24oKSB7CiAgICB2YXIgb3V0bGV0cyA9IGdl
        dCh0aGlzLCAnX291dGxldHMnKTsKICAgIHZhciBwZW5kaW5nRGlzY29ubmVj
        dGlvbnMgPSB0aGlzLl9wZW5kaW5nRGlzY29ubmVjdGlvbnM7CiAgICB0aGlz
        Ll9wZW5kaW5nRGlzY29ubmVjdGlvbnMgPSBudWxsOwoKICAgIGZvciAodmFy
        IG91dGxldE5hbWUgaW4gcGVuZGluZ0Rpc2Nvbm5lY3Rpb25zKSB7CiAgICAg
        IHNldChvdXRsZXRzLCBvdXRsZXROYW1lLCBudWxsKTsKICAgIH0KICB9Cn0p
        OwoKfSkoKTsKCgoKKGZ1bmN0aW9uKCkgewovKioKQG1vZHVsZSBlbWJlcgpA
        c3VibW9kdWxlIGVtYmVyLXZpZXdzCiovCgovLyBBZGQgYSBuZXcgbmFtZWQg
        cXVldWUgYWZ0ZXIgdGhlICdhY3Rpb25zJyBxdWV1ZSAod2hlcmUgUlNWUCBw
        cm9taXNlcwovLyByZXNvbHZlKSwgd2hpY2ggaXMgdXNlZCBpbiByb3V0ZXIg
        dHJhbnNpdGlvbnMgdG8gcHJldmVudCB1bm5lY2Vzc2FyeQovLyBsb2FkaW5n
        IHN0YXRlIGVudHJ5IGlmIGFsbCBjb250ZXh0IHByb21pc2VzIHJlc29sdmUg
        b24gdGhlIAovLyAnYWN0aW9ucycgcXVldWUgZmlyc3QuCgp2YXIgcXVldWVz
        ID0gRW1iZXIucnVuLnF1ZXVlcywKICAgIGluZGV4T2YgPSBFbWJlci5BcnJh
        eVBvbHlmaWxscy5pbmRleE9mOwpxdWV1ZXMuc3BsaWNlKGluZGV4T2YuY2Fs
        bChxdWV1ZXMsICdhY3Rpb25zJykgKyAxLCAwLCAncm91dGVyVHJhbnNpdGlv
        bnMnKTsKCn0pKCk7CgoKCihmdW5jdGlvbigpIHsKLyoqCkBtb2R1bGUgZW1i
        ZXIKQHN1Ym1vZHVsZSBlbWJlci1yb3V0aW5nCiovCgp2YXIgZ2V0ID0gRW1i
        ZXIuZ2V0LCBzZXQgPSBFbWJlci5zZXQ7CgovKgogIFRoaXMgZmlsZSBpbXBs
        ZW1lbnRzIHRoZSBgbG9jYXRpb25gIEFQSSB1c2VkIGJ5IEVtYmVyJ3Mgcm91
        dGVyLgoKICBUaGF0IEFQSSBpczoKCiAgZ2V0VVJMOiByZXR1cm5zIHRoZSBj
        dXJyZW50IFVSTAogIHNldFVSTChwYXRoKTogc2V0cyB0aGUgY3VycmVudCBV
        UkwKICByZXBsYWNlVVJMKHBhdGgpOiByZXBsYWNlIHRoZSBjdXJyZW50IFVS
        TCAob3B0aW9uYWwpCiAgb25VcGRhdGVVUkwoY2FsbGJhY2spOiB0cmlnZ2Vy
        cyB0aGUgY2FsbGJhY2sgd2hlbiB0aGUgVVJMIGNoYW5nZXMKICBmb3JtYXRV
        UkwodXJsKTogZm9ybWF0cyBgdXJsYCB0byBiZSBwbGFjZWQgaW50byBgaHJl
        ZmAgYXR0cmlidXRlCgogIENhbGxpbmcgc2V0VVJMIG9yIHJlcGxhY2VVUkwg
        d2lsbCBub3QgdHJpZ2dlciBvblVwZGF0ZVVSTCBjYWxsYmFja3MuCgogIFRP
        RE86IFRoaXMgc2hvdWxkIHBlcmhhcHMgYmUgbW92ZWQgc28gdGhhdCBpdCdz
        IHZpc2libGUgaW4gdGhlIGRvYyBvdXRwdXQuCiovCgovKioKICBFbWJlci5M
        b2NhdGlvbiByZXR1cm5zIGFuIGluc3RhbmNlIG9mIHRoZSBjb3JyZWN0IGlt
        cGxlbWVudGF0aW9uIG9mCiAgdGhlIGBsb2NhdGlvbmAgQVBJLgoKICBZb3Ug
        Y2FuIHBhc3MgaXQgYSBgaW1wbGVtZW50YXRpb25gICgnaGFzaCcsICdoaXN0
        b3J5JywgJ25vbmUnKSB0byBmb3JjZSBhCiAgcGFydGljdWxhciBpbXBsZW1l
        bnRhdGlvbi4KCiAgQGNsYXNzIExvY2F0aW9uCiAgQG5hbWVzcGFjZSBFbWJl
        cgogIEBzdGF0aWMKKi8KRW1iZXIuTG9jYXRpb24gPSB7CiAgLyoqCiAgIENy
        ZWF0ZSBhbiBpbnN0YW5jZSBvZiBhIGFuIGltcGxlbWVudGF0aW9uIG9mIHRo
        ZSBgbG9jYXRpb25gIEFQSS4gUmVxdWlyZXMKICAgYW4gb3B0aW9ucyBvYmpl
        Y3Qgd2l0aCBhbiBgaW1wbGVtZW50YXRpb25gIHByb3BlcnR5LgoKICAgRXhh
        bXBsZQoKICAgYGBgamF2YXNjcmlwdAogICB2YXIgaGFzaExvY2F0aW9uID0g
        RW1iZXIuTG9jYXRpb24uY3JlYXRlKHtpbXBsZW1lbnRhdGlvbjogJ2hhc2gn
        fSk7CiAgIHZhciBoaXN0b3J5TG9jYXRpb24gPSBFbWJlci5Mb2NhdGlvbi5j
        cmVhdGUoe2ltcGxlbWVudGF0aW9uOiAnaGlzdG9yeSd9KTsKICAgdmFyIG5v
        bmVMb2NhdGlvbiA9IEVtYmVyLkxvY2F0aW9uLmNyZWF0ZSh7aW1wbGVtZW50
        YXRpb246ICdub25lJ30pOwogICBgYGAKCiAgICBAbWV0aG9kIGNyZWF0ZQog
        ICAgQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMKICAgIEByZXR1cm4ge09iamVj
        dH0gYW4gaW5zdGFuY2Ugb2YgYW4gaW1wbGVtZW50YXRpb24gb2YgdGhlIGBs
        b2NhdGlvbmAgQVBJCiAgKi8KICBjcmVhdGU6IGZ1bmN0aW9uKG9wdGlvbnMp
        IHsKICAgIHZhciBpbXBsZW1lbnRhdGlvbiA9IG9wdGlvbnMgJiYgb3B0aW9u
        cy5pbXBsZW1lbnRhdGlvbjsKICAgIEVtYmVyLmFzc2VydCgiRW1iZXIuTG9j
        YXRpb24uY3JlYXRlOiB5b3UgbXVzdCBzcGVjaWZ5IGEgJ2ltcGxlbWVudGF0
        aW9uJyBvcHRpb24iLCAhIWltcGxlbWVudGF0aW9uKTsKCiAgICB2YXIgaW1w
        bGVtZW50YXRpb25DbGFzcyA9IHRoaXMuaW1wbGVtZW50YXRpb25zW2ltcGxl
        bWVudGF0aW9uXTsKICAgIEVtYmVyLmFzc2VydCgiRW1iZXIuTG9jYXRpb24u
        Y3JlYXRlOiAiICsgaW1wbGVtZW50YXRpb24gKyAiIGlzIG5vdCBhIHZhbGlk
        IGltcGxlbWVudGF0aW9uIiwgISFpbXBsZW1lbnRhdGlvbkNsYXNzKTsKCiAg
        ICByZXR1cm4gaW1wbGVtZW50YXRpb25DbGFzcy5jcmVhdGUuYXBwbHkoaW1w
        bGVtZW50YXRpb25DbGFzcywgYXJndW1lbnRzKTsKICB9LAoKICAvKioKICAg
        UmVnaXN0ZXJzIGEgY2xhc3MgdGhhdCBpbXBsZW1lbnRzIHRoZSBgbG9jYXRp
        b25gIEFQSSB3aXRoIGFuIGltcGxlbWVudGF0aW9uCiAgIG5hbWUuIFRoaXMg
        aW1wbGVtZW50YXRpb24gbmFtZSBjYW4gdGhlbiBiZSBzcGVjaWZpZWQgYnkg
        dGhlIGxvY2F0aW9uIHByb3BlcnR5IG9uCiAgIHRoZSBhcHBsaWNhdGlvbidz
        IHJvdXRlciBjbGFzcy4KCiAgIEV4YW1wbGUKCiAgIGBgYGphdmFzY3JpcHQK
        ICAgRW1iZXIuTG9jYXRpb24ucmVnaXN0ZXJJbXBsZW1lbnRhdGlvbignaGlz
        dG9yeScsIEVtYmVyLkhpc3RvcnlMb2NhdGlvbik7CgogICBBcHAuUm91dGVy
        LnJlb3Blbih7CiAgICAgbG9jYXRpb246ICdoaXN0b3J5JwogICB9KTsKICAg
        YGBgCgogICAgQG1ldGhvZCByZWdpc3RlckltcGxlbWVudGF0aW9uCiAgICBA
        cGFyYW0ge1N0cmluZ30gbmFtZQogICAgQHBhcmFtIHtPYmplY3R9IGltcGxl
        bWVudGF0aW9uIG9mIHRoZSBgbG9jYXRpb25gIEFQSQogICovCiAgcmVnaXN0
        ZXJJbXBsZW1lbnRhdGlvbjogZnVuY3Rpb24obmFtZSwgaW1wbGVtZW50YXRp
        b24pIHsKICAgIHRoaXMuaW1wbGVtZW50YXRpb25zW25hbWVdID0gaW1wbGVt
        ZW50YXRpb247CiAgfSwKCiAgaW1wbGVtZW50YXRpb25zOiB7fQp9OwoKfSko
        KTsKCgoKKGZ1bmN0aW9uKCkgewovKioKQG1vZHVsZSBlbWJlcgpAc3VibW9k
        dWxlIGVtYmVyLXJvdXRpbmcKKi8KCnZhciBnZXQgPSBFbWJlci5nZXQsIHNl
        dCA9IEVtYmVyLnNldDsKCi8qKgogIEVtYmVyLk5vbmVMb2NhdGlvbiBkb2Vz
        IG5vdCBpbnRlcmFjdCB3aXRoIHRoZSBicm93c2VyLiBJdCBpcyB1c2VmdWwg
        Zm9yCiAgdGVzdGluZywgb3Igd2hlbiB5b3UgbmVlZCB0byBtYW5hZ2Ugc3Rh
        dGUgd2l0aCB5b3VyIFJvdXRlciwgYnV0IHRlbXBvcmFyaWx5CiAgZG9uJ3Qg
        d2FudCBpdCB0byBtdWNrIHdpdGggdGhlIFVSTCAoZm9yIGV4YW1wbGUgd2hl
        biB5b3UgZW1iZWQgeW91cgogIGFwcGxpY2F0aW9uIGluIGEgbGFyZ2VyIHBh
        Z2UpLgoKICBAY2xhc3MgTm9uZUxvY2F0aW9uCiAgQG5hbWVzcGFjZSBFbWJl
        cgogIEBleHRlbmRzIEVtYmVyLk9iamVjdAoqLwpFbWJlci5Ob25lTG9jYXRp
        b24gPSBFbWJlci5PYmplY3QuZXh0ZW5kKHsKICBwYXRoOiAnJywKCiAgLyoq
        CiAgICBAcHJpdmF0ZQoKICAgIFJldHVybnMgdGhlIGN1cnJlbnQgcGF0aC4K
        CiAgICBAbWV0aG9kIGdldFVSTAogICAgQHJldHVybiB7U3RyaW5nfSBwYXRo
        CiAgKi8KICBnZXRVUkw6IGZ1bmN0aW9uKCkgewogICAgcmV0dXJuIGdldCh0
        aGlzLCAncGF0aCcpOwogIH0sCgogIC8qKgogICAgQHByaXZhdGUKCiAgICBT
        ZXQgdGhlIHBhdGggYW5kIHJlbWVtYmVycyB3aGF0IHdhcyBzZXQuIFVzaW5n
        IHRoaXMgbWV0aG9kCiAgICB0byBjaGFuZ2UgdGhlIHBhdGggd2lsbCBub3Qg
        aW52b2tlIHRoZSBgdXBkYXRlVVJMYCBjYWxsYmFjay4KCiAgICBAbWV0aG9k
        IHNldFVSTAogICAgQHBhcmFtIHBhdGgge1N0cmluZ30KICAqLwogIHNldFVS
        TDogZnVuY3Rpb24ocGF0aCkgewogICAgc2V0KHRoaXMsICdwYXRoJywgcGF0
        aCk7CiAgfSwKCiAgLyoqCiAgICBAcHJpdmF0ZQoKICAgIFJlZ2lzdGVyIGEg
        Y2FsbGJhY2sgdG8gYmUgaW52b2tlZCB3aGVuIHRoZSBwYXRoIGNoYW5nZXMu
        IFRoZXNlCiAgICBjYWxsYmFja3Mgd2lsbCBleGVjdXRlIHdoZW4gdGhlIHVz
        ZXIgcHJlc3NlcyB0aGUgYmFjayBvciBmb3J3YXJkCiAgICBidXR0b24sIGJ1
        dCBub3QgYWZ0ZXIgYHNldFVSTGAgaXMgaW52b2tlZC4KCiAgICBAbWV0aG9k
        IG9uVXBkYXRlVVJMCiAgICBAcGFyYW0gY2FsbGJhY2sge0Z1bmN0aW9ufQog
        ICovCiAgb25VcGRhdGVVUkw6IGZ1bmN0aW9uKGNhbGxiYWNrKSB7CiAgICB0
        aGlzLnVwZGF0ZUNhbGxiYWNrID0gY2FsbGJhY2s7CiAgfSwKCiAgLyoqCiAg
        ICBAcHJpdmF0ZQoKICAgIFNldHMgdGhlIHBhdGggYW5kIGNhbGxzIHRoZSBg
        dXBkYXRlVVJMYCBjYWxsYmFjay4KCiAgICBAbWV0aG9kIGhhbmRsZVVSTAog
        ICAgQHBhcmFtIGNhbGxiYWNrIHtGdW5jdGlvbn0KICAqLwogIGhhbmRsZVVS
        TDogZnVuY3Rpb24odXJsKSB7CiAgICBzZXQodGhpcywgJ3BhdGgnLCB1cmwp
        OwogICAgdGhpcy51cGRhdGVDYWxsYmFjayh1cmwpOwogIH0sCgogIC8qKgog
        ICAgQHByaXZhdGUKCiAgICBHaXZlbiBhIFVSTCwgZm9ybWF0cyBpdCB0byBi
        ZSBwbGFjZWQgaW50byB0aGUgcGFnZSBhcyBwYXJ0CiAgICBvZiBhbiBlbGVt
        ZW50J3MgYGhyZWZgIGF0dHJpYnV0ZS4KCiAgICBUaGlzIGlzIHVzZWQsIGZv
        ciBleGFtcGxlLCB3aGVuIHVzaW5nIHRoZSB7e2FjdGlvbn19IGhlbHBlcgog
        ICAgdG8gZ2VuZXJhdGUgYSBVUkwgYmFzZWQgb24gYW4gZXZlbnQuCgogICAg
        QG1ldGhvZCBmb3JtYXRVUkwKICAgIEBwYXJhbSB1cmwge1N0cmluZ30KICAg
        IEByZXR1cm4ge1N0cmluZ30gdXJsCiAgKi8KICBmb3JtYXRVUkw6IGZ1bmN0
        aW9uKHVybCkgewogICAgLy8gVGhlIHJldHVybiB2YWx1ZSBpcyBub3Qgb3Zl
        cmx5IG1lYW5pbmdmdWwsIGJ1dCB3ZSBkbyBub3Qgd2FudCB0byB0aHJvdwog
        ICAgLy8gZXJyb3JzIHdoZW4gdGVzdCBjb2RlIHJlbmRlcnMgdGVtcGxhdGVz
        IGNvbnRhaW5pbmcge3thY3Rpb24gaHJlZj10cnVlfX0KICAgIC8vIGhlbHBl
        cnMuCiAgICByZXR1cm4gdXJsOwogIH0KfSk7CgpFbWJlci5Mb2NhdGlvbi5y
        ZWdpc3RlckltcGxlbWVudGF0aW9uKCdub25lJywgRW1iZXIuTm9uZUxvY2F0
        aW9uKTsKCn0pKCk7CgoKCihmdW5jdGlvbigpIHsKLyoqCkBtb2R1bGUgZW1i
        ZXIKQHN1Ym1vZHVsZSBlbWJlci1yb3V0aW5nCiovCgp2YXIgZ2V0ID0gRW1i
        ZXIuZ2V0LCBzZXQgPSBFbWJlci5zZXQ7CgovKioKICBFbWJlci5IYXNoTG9j
        YXRpb24gaW1wbGVtZW50cyB0aGUgbG9jYXRpb24gQVBJIHVzaW5nIHRoZSBi
        cm93c2VyJ3MKICBoYXNoLiBBdCBwcmVzZW50LCBpdCByZWxpZXMgb24gYSBo
        YXNoY2hhbmdlIGV2ZW50IGV4aXN0aW5nIGluIHRoZQogIGJyb3dzZXIuCgog
        IEBjbGFzcyBIYXNoTG9jYXRpb24KICBAbmFtZXNwYWNlIEVtYmVyCiAgQGV4
        dGVuZHMgRW1iZXIuT2JqZWN0CiovCkVtYmVyLkhhc2hMb2NhdGlvbiA9IEVt
        YmVyLk9iamVjdC5leHRlbmQoewoKICBpbml0OiBmdW5jdGlvbigpIHsKICAg
        IHNldCh0aGlzLCAnbG9jYXRpb24nLCBnZXQodGhpcywgJ2xvY2F0aW9uJykg
        fHwgd2luZG93LmxvY2F0aW9uKTsKICB9LAoKICAvKioKICAgIEBwcml2YXRl
        CgogICAgUmV0dXJucyB0aGUgY3VycmVudCBgbG9jYXRpb24uaGFzaGAsIG1p
        bnVzIHRoZSAnIycgYXQgdGhlIGZyb250LgoKICAgIEBtZXRob2QgZ2V0VVJM
        CiAgKi8KICBnZXRVUkw6IGZ1bmN0aW9uKCkgewogICAgICAgIC8vIERlZmF1
        bHQgaW1wbGVtZW50YXRpb24gd2l0aG91dCBmZWF0dXJlIGZsYWcgZW5hYmxl
        ZAogICAgcmV0dXJuIGdldCh0aGlzLCAnbG9jYXRpb24nKS5oYXNoLnN1YnN0
        cigxKTsKICB9LAoKICAvKioKICAgIEBwcml2YXRlCgogICAgU2V0IHRoZSBg
        bG9jYXRpb24uaGFzaGAgYW5kIHJlbWVtYmVycyB3aGF0IHdhcyBzZXQuIFRo
        aXMgcHJldmVudHMKICAgIGBvblVwZGF0ZVVSTGAgY2FsbGJhY2tzIGZyb20g
        dHJpZ2dlcmluZyB3aGVuIHRoZSBoYXNoIHdhcyBzZXQgYnkKICAgIGBIYXNo
        TG9jYXRpb25gLgoKICAgIEBtZXRob2Qgc2V0VVJMCiAgICBAcGFyYW0gcGF0
        aCB7U3RyaW5nfQogICovCiAgc2V0VVJMOiBmdW5jdGlvbihwYXRoKSB7CiAg
        ICBnZXQodGhpcywgJ2xvY2F0aW9uJykuaGFzaCA9IHBhdGg7CiAgICBzZXQo
        dGhpcywgJ2xhc3RTZXRVUkwnLCBwYXRoKTsKICB9LAoKICAvKioKICAgIEBw
        cml2YXRlCgogICAgVXNlcyBsb2NhdGlvbi5yZXBsYWNlIHRvIHVwZGF0ZSB0
        aGUgdXJsIHdpdGhvdXQgYSBwYWdlIHJlbG9hZAogICAgb3IgaGlzdG9yeSBt
        b2RpZmljYXRpb24uCgogICAgQG1ldGhvZCByZXBsYWNlVVJMCiAgICBAcGFy
        YW0gcGF0aCB7U3RyaW5nfQogICovCiAgcmVwbGFjZVVSTDogZnVuY3Rpb24o
        cGF0aCkgewogICAgZ2V0KHRoaXMsICdsb2NhdGlvbicpLnJlcGxhY2UoJyMn
        ICsgcGF0aCk7CiAgfSwKCiAgLyoqCiAgICBAcHJpdmF0ZQoKICAgIFJlZ2lz
        dGVyIGEgY2FsbGJhY2sgdG8gYmUgaW52b2tlZCB3aGVuIHRoZSBoYXNoIGNo
        YW5nZXMuIFRoZXNlCiAgICBjYWxsYmFja3Mgd2lsbCBleGVjdXRlIHdoZW4g
        dGhlIHVzZXIgcHJlc3NlcyB0aGUgYmFjayBvciBmb3J3YXJkCiAgICBidXR0
        b24sIGJ1dCBub3QgYWZ0ZXIgYHNldFVSTGAgaXMgaW52b2tlZC4KCiAgICBA
        bWV0aG9kIG9uVXBkYXRlVVJMCiAgICBAcGFyYW0gY2FsbGJhY2sge0Z1bmN0
        aW9ufQogICovCiAgb25VcGRhdGVVUkw6IGZ1bmN0aW9uKGNhbGxiYWNrKSB7
        CiAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICB2YXIgZ3VpZCA9IEVtYmVyLmd1
        aWRGb3IodGhpcyk7CgogICAgRW1iZXIuJCh3aW5kb3cpLm9uKCdoYXNoY2hh
        bmdlLmVtYmVyLWxvY2F0aW9uLScrZ3VpZCwgZnVuY3Rpb24oKSB7CiAgICAg
        IEVtYmVyLnJ1bihmdW5jdGlvbigpIHsKICAgICAgICB2YXIgcGF0aCA9IGxv
        Y2F0aW9uLmhhc2guc3Vic3RyKDEpOwogICAgICAgIGlmIChnZXQoc2VsZiwg
        J2xhc3RTZXRVUkwnKSA9PT0gcGF0aCkgeyByZXR1cm47IH0KCiAgICAgICAg
        c2V0KHNlbGYsICdsYXN0U2V0VVJMJywgbnVsbCk7CgogICAgICAgIGNhbGxi
        YWNrKHBhdGgpOwogICAgICB9KTsKICAgIH0pOwogIH0sCgogIC8qKgogICAg
        QHByaXZhdGUKCiAgICBHaXZlbiBhIFVSTCwgZm9ybWF0cyBpdCB0byBiZSBw
        bGFjZWQgaW50byB0aGUgcGFnZSBhcyBwYXJ0CiAgICBvZiBhbiBlbGVtZW50
        J3MgYGhyZWZgIGF0dHJpYnV0ZS4KCiAgICBUaGlzIGlzIHVzZWQsIGZvciBl
        eGFtcGxlLCB3aGVuIHVzaW5nIHRoZSB7e2FjdGlvbn19IGhlbHBlcgogICAg
        dG8gZ2VuZXJhdGUgYSBVUkwgYmFzZWQgb24gYW4gZXZlbnQuCgogICAgQG1l
        dGhvZCBmb3JtYXRVUkwKICAgIEBwYXJhbSB1cmwge1N0cmluZ30KICAqLwog
        IGZvcm1hdFVSTDogZnVuY3Rpb24odXJsKSB7CiAgICByZXR1cm4gJyMnK3Vy
        bDsKICB9LAoKICAvKioKICAgIEBwcml2YXRlCgogICAgQ2xlYW5zIHVwIHRo
        ZSBIYXNoTG9jYXRpb24gZXZlbnQgbGlzdGVuZXIuCgogICAgQG1ldGhvZCB3
        aWxsRGVzdHJveQogICovCiAgd2lsbERlc3Ryb3k6IGZ1bmN0aW9uKCkgewog
        ICAgdmFyIGd1aWQgPSBFbWJlci5ndWlkRm9yKHRoaXMpOwoKICAgIEVtYmVy
        LiQod2luZG93KS5vZmYoJ2hhc2hjaGFuZ2UuZW1iZXItbG9jYXRpb24tJytn
        dWlkKTsKICB9Cn0pOwoKRW1iZXIuTG9jYXRpb24ucmVnaXN0ZXJJbXBsZW1l
        bnRhdGlvbignaGFzaCcsIEVtYmVyLkhhc2hMb2NhdGlvbik7Cgp9KSgpOwoK
        CgooZnVuY3Rpb24oKSB7Ci8qKgpAbW9kdWxlIGVtYmVyCkBzdWJtb2R1bGUg
        ZW1iZXItcm91dGluZwoqLwoKdmFyIGdldCA9IEVtYmVyLmdldCwgc2V0ID0g
        RW1iZXIuc2V0Owp2YXIgcG9wc3RhdGVGaXJlZCA9IGZhbHNlOwp2YXIgc3Vw
        cG9ydHNIaXN0b3J5U3RhdGUgPSB3aW5kb3cuaGlzdG9yeSAmJiAnc3RhdGUn
        IGluIHdpbmRvdy5oaXN0b3J5OwoKLyoqCiAgRW1iZXIuSGlzdG9yeUxvY2F0
        aW9uIGltcGxlbWVudHMgdGhlIGxvY2F0aW9uIEFQSSB1c2luZyB0aGUgYnJv
        d3NlcidzCiAgaGlzdG9yeS5wdXNoU3RhdGUgQVBJLgoKICBAY2xhc3MgSGlz
        dG9yeUxvY2F0aW9uCiAgQG5hbWVzcGFjZSBFbWJlcgogIEBleHRlbmRzIEVt
        YmVyLk9iamVjdAoqLwpFbWJlci5IaXN0b3J5TG9jYXRpb24gPSBFbWJlci5P
        YmplY3QuZXh0ZW5kKHsKCiAgaW5pdDogZnVuY3Rpb24oKSB7CiAgICBzZXQo
        dGhpcywgJ2xvY2F0aW9uJywgZ2V0KHRoaXMsICdsb2NhdGlvbicpIHx8IHdp
        bmRvdy5sb2NhdGlvbik7CiAgICB0aGlzLmluaXRTdGF0ZSgpOwogIH0sCgog
        IC8qKgogICAgQHByaXZhdGUKCiAgICBVc2VkIHRvIHNldCBzdGF0ZSBvbiBm
        aXJzdCBjYWxsIHRvIHNldFVSTAoKICAgIEBtZXRob2QgaW5pdFN0YXRlCiAg
        Ki8KICBpbml0U3RhdGU6IGZ1bmN0aW9uKCkgewogICAgc2V0KHRoaXMsICdo
        aXN0b3J5JywgZ2V0KHRoaXMsICdoaXN0b3J5JykgfHwgd2luZG93Lmhpc3Rv
        cnkpOwogICAgdGhpcy5yZXBsYWNlU3RhdGUodGhpcy5mb3JtYXRVUkwodGhp
        cy5nZXRVUkwoKSkpOwogIH0sCgogIC8qKgogICAgV2lsbCBiZSBwcmUtcGVu
        ZGVkIHRvIHBhdGggdXBvbiBzdGF0ZSBjaGFuZ2UKCiAgICBAcHJvcGVydHkg
        cm9vdFVSTAogICAgQGRlZmF1bHQgJy8nCiAgKi8KICByb290VVJMOiAnLycs
        CgogIC8qKgogICAgQHByaXZhdGUKCiAgICBSZXR1cm5zIHRoZSBjdXJyZW50
        IGBsb2NhdGlvbi5wYXRobmFtZWAgd2l0aG91dCByb290VVJMCgogICAgQG1l
        dGhvZCBnZXRVUkwKICAgIEByZXR1cm4gdXJsIHtTdHJpbmd9CiAgKi8KICBn
        ZXRVUkw6IGZ1bmN0aW9uKCkgewogICAgdmFyIHJvb3RVUkwgPSBnZXQodGhp
        cywgJ3Jvb3RVUkwnKSwKICAgICAgICBsb2NhdGlvbiA9IGdldCh0aGlzLCAn
        bG9jYXRpb24nKSwKICAgICAgICBwYXRoID0gbG9jYXRpb24ucGF0aG5hbWU7
        CgogICAgcm9vdFVSTCA9IHJvb3RVUkwucmVwbGFjZSgvXC8kLywgJycpOwog
        ICAgdmFyIHVybCA9IHBhdGgucmVwbGFjZShyb290VVJMLCAnJyk7CgogICAg
        CiAgICByZXR1cm4gdXJsOwogIH0sCgogIC8qKgogICAgQHByaXZhdGUKCiAg
        ICBVc2VzIGBoaXN0b3J5LnB1c2hTdGF0ZWAgdG8gdXBkYXRlIHRoZSB1cmwg
        d2l0aG91dCBhIHBhZ2UgcmVsb2FkLgoKICAgIEBtZXRob2Qgc2V0VVJMCiAg
        ICBAcGFyYW0gcGF0aCB7U3RyaW5nfQogICovCiAgc2V0VVJMOiBmdW5jdGlv
        bihwYXRoKSB7CiAgICB2YXIgc3RhdGUgPSB0aGlzLmdldFN0YXRlKCk7CiAg
        ICBwYXRoID0gdGhpcy5mb3JtYXRVUkwocGF0aCk7CgogICAgaWYgKHN0YXRl
        ICYmIHN0YXRlLnBhdGggIT09IHBhdGgpIHsKICAgICAgdGhpcy5wdXNoU3Rh
        dGUocGF0aCk7CiAgICB9CiAgfSwKCiAgLyoqCiAgICBAcHJpdmF0ZQoKICAg
        IFVzZXMgYGhpc3RvcnkucmVwbGFjZVN0YXRlYCB0byB1cGRhdGUgdGhlIHVy
        bCB3aXRob3V0IGEgcGFnZSByZWxvYWQKICAgIG9yIGhpc3RvcnkgbW9kaWZp
        Y2F0aW9uLgoKICAgIEBtZXRob2QgcmVwbGFjZVVSTAogICAgQHBhcmFtIHBh
        dGgge1N0cmluZ30KICAqLwogIHJlcGxhY2VVUkw6IGZ1bmN0aW9uKHBhdGgp
        IHsKICAgIHZhciBzdGF0ZSA9IHRoaXMuZ2V0U3RhdGUoKTsKICAgIHBhdGgg
        PSB0aGlzLmZvcm1hdFVSTChwYXRoKTsKCiAgICBpZiAoc3RhdGUgJiYgc3Rh
        dGUucGF0aCAhPT0gcGF0aCkgewogICAgICB0aGlzLnJlcGxhY2VTdGF0ZShw
        YXRoKTsKICAgIH0KICB9LAoKICAvKioKICAgQHByaXZhdGUKCiAgIEdldCB0
        aGUgY3VycmVudCBgaGlzdG9yeS5zdGF0ZWAKICAgUG9seWZpbGwgY2hlY2tz
        IGZvciBuYXRpdmUgYnJvd3NlciBzdXBwb3J0IGFuZCBmYWxscyBiYWNrIHRv
        IHJldHJpZXZpbmcKICAgZnJvbSBhIHByaXZhdGUgX2hpc3RvcnlTdGF0ZSB2
        YXJpYWJsZQoKICAgQG1ldGhvZCBnZXRTdGF0ZQogICBAcmV0dXJuIHN0YXRl
        IHtPYmplY3R9CiAgKi8KICBnZXRTdGF0ZTogZnVuY3Rpb24oKSB7CiAgICBy
        ZXR1cm4gc3VwcG9ydHNIaXN0b3J5U3RhdGUgPyBnZXQodGhpcywgJ2hpc3Rv
        cnknKS5zdGF0ZSA6IHRoaXMuX2hpc3RvcnlTdGF0ZTsKICB9LAoKICAvKioK
        ICAgQHByaXZhdGUKCiAgIFB1c2hlcyBhIG5ldyBzdGF0ZQoKICAgQG1ldGhv
        ZCBwdXNoU3RhdGUKICAgQHBhcmFtIHBhdGgge1N0cmluZ30KICAqLwogIHB1
        c2hTdGF0ZTogZnVuY3Rpb24ocGF0aCkgewogICAgdmFyIHN0YXRlID0geyBw
        YXRoOiBwYXRoIH07CgogICAgZ2V0KHRoaXMsICdoaXN0b3J5JykucHVzaFN0
        YXRlKHN0YXRlLCBudWxsLCBwYXRoKTsKCiAgICAvLyBzdG9yZSBzdGF0ZSBp
        ZiBicm93c2VyIGRvZXNuJ3Qgc3VwcG9ydCBgaGlzdG9yeS5zdGF0ZWAKICAg
        IGlmICghc3VwcG9ydHNIaXN0b3J5U3RhdGUpIHsKICAgICAgdGhpcy5faGlz
        dG9yeVN0YXRlID0gc3RhdGU7CiAgICB9CgogICAgLy8gdXNlZCBmb3Igd2Vi
        a2l0IHdvcmthcm91bmQKICAgIHRoaXMuX3ByZXZpb3VzVVJMID0gdGhpcy5n
        ZXRVUkwoKTsKICB9LAoKICAvKioKICAgQHByaXZhdGUKCiAgIFJlcGxhY2Vz
        IHRoZSBjdXJyZW50IHN0YXRlCgogICBAbWV0aG9kIHJlcGxhY2VTdGF0ZQog
        ICBAcGFyYW0gcGF0aCB7U3RyaW5nfQogICovCiAgcmVwbGFjZVN0YXRlOiBm
        dW5jdGlvbihwYXRoKSB7CiAgICB2YXIgc3RhdGUgPSB7IHBhdGg6IHBhdGgg
        fTsKCiAgICBnZXQodGhpcywgJ2hpc3RvcnknKS5yZXBsYWNlU3RhdGUoc3Rh
        dGUsIG51bGwsIHBhdGgpOwoKICAgIC8vIHN0b3JlIHN0YXRlIGlmIGJyb3dz
        ZXIgZG9lc24ndCBzdXBwb3J0IGBoaXN0b3J5LnN0YXRlYAogICAgaWYgKCFz
        dXBwb3J0c0hpc3RvcnlTdGF0ZSkgewogICAgICB0aGlzLl9oaXN0b3J5U3Rh
        dGUgPSBzdGF0ZTsKICAgIH0KCiAgICAvLyB1c2VkIGZvciB3ZWJraXQgd29y
        a2Fyb3VuZAogICAgdGhpcy5fcHJldmlvdXNVUkwgPSB0aGlzLmdldFVSTCgp
        OwogIH0sCgogIC8qKgogICAgQHByaXZhdGUKCiAgICBSZWdpc3RlciBhIGNh
        bGxiYWNrIHRvIGJlIGludm9rZWQgd2hlbmV2ZXIgdGhlIGJyb3dzZXIKICAg
        IGhpc3RvcnkgY2hhbmdlcywgaW5jbHVkaW5nIHVzaW5nIGZvcndhcmQgYW5k
        IGJhY2sgYnV0dG9ucy4KCiAgICBAbWV0aG9kIG9uVXBkYXRlVVJMCiAgICBA
        cGFyYW0gY2FsbGJhY2sge0Z1bmN0aW9ufQogICovCiAgb25VcGRhdGVVUkw6
        IGZ1bmN0aW9uKGNhbGxiYWNrKSB7CiAgICB2YXIgZ3VpZCA9IEVtYmVyLmd1
        aWRGb3IodGhpcyksCiAgICAgICAgc2VsZiA9IHRoaXM7CgogICAgRW1iZXIu
        JCh3aW5kb3cpLm9uKCdwb3BzdGF0ZS5lbWJlci1sb2NhdGlvbi0nK2d1aWQs
        IGZ1bmN0aW9uKGUpIHsKICAgICAgLy8gSWdub3JlIGluaXRpYWwgcGFnZSBs
        b2FkIHBvcHN0YXRlIGV2ZW50IGluIENocm9tZQogICAgICBpZiAoIXBvcHN0
        YXRlRmlyZWQpIHsKICAgICAgICBwb3BzdGF0ZUZpcmVkID0gdHJ1ZTsKICAg
        ICAgICBpZiAoc2VsZi5nZXRVUkwoKSA9PT0gc2VsZi5fcHJldmlvdXNVUkwp
        IHsgcmV0dXJuOyB9CiAgICAgIH0KICAgICAgY2FsbGJhY2soc2VsZi5nZXRV
        UkwoKSk7CiAgICB9KTsKICB9LAoKICAvKioKICAgIEBwcml2YXRlCgogICAg
        VXNlZCB3aGVuIHVzaW5nIGB7e2FjdGlvbn19YCBoZWxwZXIuICBUaGUgdXJs
        IGlzIGFsd2F5cyBhcHBlbmRlZCB0byB0aGUgcm9vdFVSTC4KCiAgICBAbWV0
        aG9kIGZvcm1hdFVSTAogICAgQHBhcmFtIHVybCB7U3RyaW5nfQogICAgQHJl
        dHVybiBmb3JtYXR0ZWQgdXJsIHtTdHJpbmd9CiAgKi8KICBmb3JtYXRVUkw6
        IGZ1bmN0aW9uKHVybCkgewogICAgdmFyIHJvb3RVUkwgPSBnZXQodGhpcywg
        J3Jvb3RVUkwnKTsKCiAgICBpZiAodXJsICE9PSAnJykgewogICAgICByb290
        VVJMID0gcm9vdFVSTC5yZXBsYWNlKC9cLyQvLCAnJyk7CiAgICB9CgogICAg
        cmV0dXJuIHJvb3RVUkwgKyB1cmw7CiAgfSwKCiAgLyoqCiAgICBAcHJpdmF0
        ZQoKICAgIENsZWFucyB1cCB0aGUgSGlzdG9yeUxvY2F0aW9uIGV2ZW50IGxp
        c3RlbmVyLgoKICAgIEBtZXRob2Qgd2lsbERlc3Ryb3kKICAqLwogIHdpbGxE
        ZXN0cm95OiBmdW5jdGlvbigpIHsKICAgIHZhciBndWlkID0gRW1iZXIuZ3Vp
        ZEZvcih0aGlzKTsKCiAgICBFbWJlci4kKHdpbmRvdykub2ZmKCdwb3BzdGF0
        ZS5lbWJlci1sb2NhdGlvbi0nK2d1aWQpOwogIH0KfSk7CgpFbWJlci5Mb2Nh
        dGlvbi5yZWdpc3RlckltcGxlbWVudGF0aW9uKCdoaXN0b3J5JywgRW1iZXIu
        SGlzdG9yeUxvY2F0aW9uKTsKCn0pKCk7CgoKCihmdW5jdGlvbigpIHsKCn0p
        KCk7CgoKCihmdW5jdGlvbigpIHsKLyoqCkVtYmVyIFJvdXRpbmcKCkBtb2R1
        bGUgZW1iZXIKQHN1Ym1vZHVsZSBlbWJlci1yb3V0aW5nCkByZXF1aXJlcyBl
        bWJlci12aWV3cwoqLwoKfSkoKTsKCihmdW5jdGlvbigpIHsKZnVuY3Rpb24g
        dmlzaXQodmVydGV4LCBmbiwgdmlzaXRlZCwgcGF0aCkgewogIHZhciBuYW1l
        ID0gdmVydGV4Lm5hbWUsCiAgICB2ZXJ0aWNlcyA9IHZlcnRleC5pbmNvbWlu
        ZywKICAgIG5hbWVzID0gdmVydGV4LmluY29taW5nTmFtZXMsCiAgICBsZW4g
        PSBuYW1lcy5sZW5ndGgsCiAgICBpOwogIGlmICghdmlzaXRlZCkgewogICAg
        dmlzaXRlZCA9IHt9OwogIH0KICBpZiAoIXBhdGgpIHsKICAgIHBhdGggPSBb
        XTsKICB9CiAgaWYgKHZpc2l0ZWQuaGFzT3duUHJvcGVydHkobmFtZSkpIHsK
        ICAgIHJldHVybjsKICB9CiAgcGF0aC5wdXNoKG5hbWUpOwogIHZpc2l0ZWRb
        bmFtZV0gPSB0cnVlOwogIGZvciAoaSA9IDA7IGkgPCBsZW47IGkrKykgewog
        ICAgdmlzaXQodmVydGljZXNbbmFtZXNbaV1dLCBmbiwgdmlzaXRlZCwgcGF0
        aCk7CiAgfQogIGZuKHZlcnRleCwgcGF0aCk7CiAgcGF0aC5wb3AoKTsKfQoK
        ZnVuY3Rpb24gREFHKCkgewogIHRoaXMubmFtZXMgPSBbXTsKICB0aGlzLnZl
        cnRpY2VzID0ge307Cn0KCkRBRy5wcm90b3R5cGUuYWRkID0gZnVuY3Rpb24o
        bmFtZSkgewogIGlmICghbmFtZSkgeyByZXR1cm47IH0KICBpZiAodGhpcy52
        ZXJ0aWNlcy5oYXNPd25Qcm9wZXJ0eShuYW1lKSkgewogICAgcmV0dXJuIHRo
        aXMudmVydGljZXNbbmFtZV07CiAgfQogIHZhciB2ZXJ0ZXggPSB7CiAgICBu
        YW1lOiBuYW1lLCBpbmNvbWluZzoge30sIGluY29taW5nTmFtZXM6IFtdLCBo
        YXNPdXRnb2luZzogZmFsc2UsIHZhbHVlOiBudWxsCiAgfTsKICB0aGlzLnZl
        cnRpY2VzW25hbWVdID0gdmVydGV4OwogIHRoaXMubmFtZXMucHVzaChuYW1l
        KTsKICByZXR1cm4gdmVydGV4Owp9OwoKREFHLnByb3RvdHlwZS5tYXAgPSBm
        dW5jdGlvbihuYW1lLCB2YWx1ZSkgewogIHRoaXMuYWRkKG5hbWUpLnZhbHVl
        ID0gdmFsdWU7Cn07CgpEQUcucHJvdG90eXBlLmFkZEVkZ2UgPSBmdW5jdGlv
        bihmcm9tTmFtZSwgdG9OYW1lKSB7CiAgaWYgKCFmcm9tTmFtZSB8fCAhdG9O
        YW1lIHx8IGZyb21OYW1lID09PSB0b05hbWUpIHsKICAgIHJldHVybjsKICB9
        CiAgdmFyIGZyb20gPSB0aGlzLmFkZChmcm9tTmFtZSksIHRvID0gdGhpcy5h
        ZGQodG9OYW1lKTsKICBpZiAodG8uaW5jb21pbmcuaGFzT3duUHJvcGVydHko
        ZnJvbU5hbWUpKSB7CiAgICByZXR1cm47CiAgfQogIGZ1bmN0aW9uIGNoZWNr
        Q3ljbGUodmVydGV4LCBwYXRoKSB7CiAgICBpZiAodmVydGV4Lm5hbWUgPT09
        IHRvTmFtZSkgewogICAgICB0aHJvdyBuZXcgRW1iZXIuRXJyb3IoImN5Y2xl
        IGRldGVjdGVkOiAiICsgdG9OYW1lICsgIiA8LSAiICsgcGF0aC5qb2luKCIg
        PC0gIikpOwogICAgfQogIH0KICB2aXNpdChmcm9tLCBjaGVja0N5Y2xlKTsK
        ICBmcm9tLmhhc091dGdvaW5nID0gdHJ1ZTsKICB0by5pbmNvbWluZ1tmcm9t
        TmFtZV0gPSBmcm9tOwogIHRvLmluY29taW5nTmFtZXMucHVzaChmcm9tTmFt
        ZSk7Cn07CgpEQUcucHJvdG90eXBlLnRvcHNvcnQgPSBmdW5jdGlvbihmbikg
        ewogIHZhciB2aXNpdGVkID0ge30sCiAgICB2ZXJ0aWNlcyA9IHRoaXMudmVy
        dGljZXMsCiAgICBuYW1lcyA9IHRoaXMubmFtZXMsCiAgICBsZW4gPSBuYW1l
        cy5sZW5ndGgsCiAgICBpLCB2ZXJ0ZXg7CiAgZm9yIChpID0gMDsgaSA8IGxl
        bjsgaSsrKSB7CiAgICB2ZXJ0ZXggPSB2ZXJ0aWNlc1tuYW1lc1tpXV07CiAg
        ICBpZiAoIXZlcnRleC5oYXNPdXRnb2luZykgewogICAgICB2aXNpdCh2ZXJ0
        ZXgsIGZuLCB2aXNpdGVkKTsKICAgIH0KICB9Cn07CgpEQUcucHJvdG90eXBl
        LmFkZEVkZ2VzID0gZnVuY3Rpb24obmFtZSwgdmFsdWUsIGJlZm9yZSwgYWZ0
        ZXIpIHsKICB2YXIgaTsKICB0aGlzLm1hcChuYW1lLCB2YWx1ZSk7CiAgaWYg
        KGJlZm9yZSkgewogICAgaWYgKHR5cGVvZiBiZWZvcmUgPT09ICdzdHJpbmcn
        KSB7CiAgICAgIHRoaXMuYWRkRWRnZShuYW1lLCBiZWZvcmUpOwogICAgfSBl
        bHNlIHsKICAgICAgZm9yIChpID0gMDsgaSA8IGJlZm9yZS5sZW5ndGg7IGkr
        KykgewogICAgICAgIHRoaXMuYWRkRWRnZShuYW1lLCBiZWZvcmVbaV0pOwog
        ICAgICB9CiAgICB9CiAgfQogIGlmIChhZnRlcikgewogICAgaWYgKHR5cGVv
        ZiBhZnRlciA9PT0gJ3N0cmluZycpIHsKICAgICAgdGhpcy5hZGRFZGdlKGFm
        dGVyLCBuYW1lKTsKICAgIH0gZWxzZSB7CiAgICAgIGZvciAoaSA9IDA7IGkg
        PCBhZnRlci5sZW5ndGg7IGkrKykgewogICAgICAgIHRoaXMuYWRkRWRnZShh
        ZnRlcltpXSwgbmFtZSk7CiAgICAgIH0KICAgIH0KICB9Cn07CgpFbWJlci5E
        QUcgPSBEQUc7Cgp9KSgpOwoKCgooZnVuY3Rpb24oKSB7Ci8qKgpAbW9kdWxl
        IGVtYmVyCkBzdWJtb2R1bGUgZW1iZXItYXBwbGljYXRpb24KKi8KCnZhciBn
        ZXQgPSBFbWJlci5nZXQsCiAgICBjbGFzc2lmeSA9IEVtYmVyLlN0cmluZy5j
        bGFzc2lmeSwKICAgIGNhcGl0YWxpemUgPSBFbWJlci5TdHJpbmcuY2FwaXRh
        bGl6ZSwKICAgIGRlY2FtZWxpemUgPSBFbWJlci5TdHJpbmcuZGVjYW1lbGl6
        ZTsKCi8qKgogIFRoZSBEZWZhdWx0UmVzb2x2ZXIgZGVmaW5lcyB0aGUgZGVm
        YXVsdCBsb29rdXAgcnVsZXMgdG8gcmVzb2x2ZQogIGNvbnRhaW5lciBsb29r
        dXBzIGJlZm9yZSBjb25zdWx0aW5nIHRoZSBjb250YWluZXIgZm9yIHJlZ2lz
        dGVyZWQKICBpdGVtczoKCiogdGVtcGxhdGVzIGFyZSBsb29rZWQgdXAgb24g
        YEVtYmVyLlRFTVBMQVRFU2AKKiBvdGhlciBuYW1lcyBhcmUgbG9va2VkIHVw
        IG9uIHRoZSBhcHBsaWNhdGlvbiBhZnRlciBjb252ZXJ0aW5nCiAgdGhlIG5h
        bWUuIEZvciBleGFtcGxlLCBgY29udHJvbGxlcjpwb3N0YCBsb29rcyB1cAog
        IGBBcHAuUG9zdENvbnRyb2xsZXJgIGJ5IGRlZmF1bHQuCiogdGhlcmUgYXJl
        IHNvbWUgbnVhbmNlcyAoc2VlIGV4YW1wbGVzIGJlbG93KQoKICAjIyMgSG93
        IFJlc29sdmluZyBXb3JrcwoKICBUaGUgY29udGFpbmVyIGNhbGxzIHRoaXMg
        b2JqZWN0J3MgYHJlc29sdmVgIG1ldGhvZCB3aXRoIHRoZQogIGBmdWxsTmFt
        ZWAgYXJndW1lbnQuCgogIEl0IGZpcnN0IHBhcnNlcyB0aGUgZnVsbE5hbWUg
        aW50byBhbiBvYmplY3QgdXNpbmcgYHBhcnNlTmFtZWAuCgogIFRoZW4gaXQg
        Y2hlY2tzIGZvciB0aGUgcHJlc2VuY2Ugb2YgYSB0eXBlLXNwZWNpZmljIGlu
        c3RhbmNlCiAgbWV0aG9kIG9mIHRoZSBmb3JtIGByZXNvbHZlW1R5cGVdYCBh
        bmQgY2FsbHMgaXQgaWYgaXQgZXhpc3RzLgogIEZvciBleGFtcGxlIGlmIGl0
        IHdhcyByZXNvbHZpbmcgJ3RlbXBsYXRlOnBvc3QnLCBpdCB3b3VsZCBjYWxs
        CiAgdGhlIGByZXNvbHZlVGVtcGxhdGVgIG1ldGhvZC4KCiAgSXRzIGxhc3Qg
        cmVzb3J0IGlzIHRvIGNhbGwgdGhlIGByZXNvbHZlT3RoZXJgIG1ldGhvZC4K
        CiAgVGhlIG1ldGhvZHMgb2YgdGhpcyBvYmplY3QgYXJlIGRlc2lnbmVkIHRv
        IGJlIGVhc3kgdG8gb3ZlcnJpZGUKICBpbiBhIHN1YmNsYXNzLiBGb3IgZXhh
        bXBsZSwgeW91IGNvdWxkIGVuaGFuY2UgaG93IGEgdGVtcGxhdGUKICBpcyBy
        ZXNvbHZlZCBsaWtlIHNvOgoKICBgYGBqYXZhc2NyaXB0CiAgQXBwID0gRW1i
        ZXIuQXBwbGljYXRpb24uY3JlYXRlKHsKICAgIFJlc29sdmVyOiBFbWJlci5E
        ZWZhdWx0UmVzb2x2ZXIuZXh0ZW5kKHsKICAgICAgcmVzb2x2ZVRlbXBsYXRl
        OiBmdW5jdGlvbihwYXJzZWROYW1lKSB7CiAgICAgICAgdmFyIHJlc29sdmVk
        VGVtcGxhdGUgPSB0aGlzLl9zdXBlcihwYXJzZWROYW1lKTsKICAgICAgICBp
        ZiAocmVzb2x2ZWRUZW1wbGF0ZSkgeyByZXR1cm4gcmVzb2x2ZWRUZW1wbGF0
        ZTsgfQogICAgICAgIHJldHVybiBFbWJlci5URU1QTEFURVNbJ25vdF9mb3Vu
        ZCddOwogICAgICB9CiAgICB9KQogIH0pOwogIGBgYAoKICBTb21lIGV4YW1w
        bGVzIG9mIGhvdyBuYW1lcyBhcmUgcmVzb2x2ZWQ6CgogIGBgYAogICd0ZW1w
        bGF0ZTpwb3N0JyAvLz0+IEVtYmVyLlRFTVBMQVRFU1sncG9zdCddCiAgJ3Rl
        bXBsYXRlOnBvc3RzL2J5bGluZScgLy89PiBFbWJlci5URU1QTEFURVNbJ3Bv
        c3RzL2J5bGluZSddCiAgJ3RlbXBsYXRlOnBvc3RzLmJ5bGluZScgLy89PiBF
        bWJlci5URU1QTEFURVNbJ3Bvc3RzL2J5bGluZSddCiAgJ3RlbXBsYXRlOmJs
        b2dQb3N0JyAvLz0+IEVtYmVyLlRFTVBMQVRFU1snYmxvZ1Bvc3QnXQogICAg
        ICAgICAgICAgICAgICAgICAgLy8gICBPUgogICAgICAgICAgICAgICAgICAg
        ICAgLy8gICBFbWJlci5URU1QTEFURVNbJ2Jsb2dfcG9zdCddCiAgJ2NvbnRy
        b2xsZXI6cG9zdCcgLy89PiBBcHAuUG9zdENvbnRyb2xsZXIKICAnY29udHJv
        bGxlcjpwb3N0cy5pbmRleCcgLy89PiBBcHAuUG9zdHNJbmRleENvbnRyb2xs
        ZXIKICAnY29udHJvbGxlcjpibG9nL3Bvc3QnIC8vPT4gQmxvZy5Qb3N0Q29u
        dHJvbGxlcgogICdjb250cm9sbGVyOmJhc2ljJyAvLz0+IEVtYmVyLkNvbnRy
        b2xsZXIKICAncm91dGU6cG9zdCcgLy89PiBBcHAuUG9zdFJvdXRlCiAgJ3Jv
        dXRlOnBvc3RzLmluZGV4JyAvLz0+IEFwcC5Qb3N0c0luZGV4Um91dGUKICAn
        cm91dGU6YmxvZy9wb3N0JyAvLz0+IEJsb2cuUG9zdFJvdXRlCiAgJ3JvdXRl
        OmJhc2ljJyAvLz0+IEVtYmVyLlJvdXRlCiAgJ3ZpZXc6cG9zdCcgLy89PiBB
        cHAuUG9zdFZpZXcKICAndmlldzpwb3N0cy5pbmRleCcgLy89PiBBcHAuUG9z
        dHNJbmRleFZpZXcKICAndmlldzpibG9nL3Bvc3QnIC8vPT4gQmxvZy5Qb3N0
        VmlldwogICd2aWV3OmJhc2ljJyAvLz0+IEVtYmVyLlZpZXcKICAnZm9vOnBv
        c3QnIC8vPT4gQXBwLlBvc3RGb28KICAnbW9kZWw6cG9zdCcgLy89PiBBcHAu
        UG9zdAogIGBgYAoKICBAY2xhc3MgRGVmYXVsdFJlc29sdmVyCiAgQG5hbWVz
        cGFjZSBFbWJlcgogIEBleHRlbmRzIEVtYmVyLk9iamVjdAoqLwpFbWJlci5E
        ZWZhdWx0UmVzb2x2ZXIgPSBFbWJlci5PYmplY3QuZXh0ZW5kKHsKICAvKioK
        ICAgIFRoaXMgd2lsbCBiZSBzZXQgdG8gdGhlIEFwcGxpY2F0aW9uIGluc3Rh
        bmNlIHdoZW4gaXQgaXMKICAgIGNyZWF0ZWQuCgogICAgQHByb3BlcnR5IG5h
        bWVzcGFjZQogICovCiAgbmFtZXNwYWNlOiBudWxsLAoKICBub3JtYWxpemU6
        IGZ1bmN0aW9uKGZ1bGxOYW1lKSB7CiAgICB2YXIgc3BsaXQgPSBmdWxsTmFt
        ZS5zcGxpdCgnOicsIDIpLAogICAgICAgIHR5cGUgPSBzcGxpdFswXSwKICAg
        ICAgICBuYW1lID0gc3BsaXRbMV07CgogICAgRW1iZXIuYXNzZXJ0KCJUcmll
        ZCB0byBub3JtYWxpemUgYSBjb250YWluZXIgbmFtZSB3aXRob3V0IGEgY29s
        b24gKDopIGluIGl0LiBZb3UgcHJvYmFibHkgdHJpZWQgdG8gbG9va3VwIGEg
        bmFtZSB0aGF0IGRpZCBub3QgY29udGFpbiBhIHR5cGUsIGEgY29sb24sIGFu
        ZCBhIG5hbWUuIEEgcHJvcGVyIGxvb2t1cCBuYW1lIHdvdWxkIGJlIGB2aWV3
        OnBvc3RgLiIsIHNwbGl0Lmxlbmd0aCA9PT0gMik7CgogICAgaWYgKHR5cGUg
        IT09ICd0ZW1wbGF0ZScpIHsKICAgICAgdmFyIHJlc3VsdCA9IG5hbWU7Cgog
        ICAgICBpZiAocmVzdWx0LmluZGV4T2YoJy4nKSA+IC0xKSB7CiAgICAgICAg
        cmVzdWx0ID0gcmVzdWx0LnJlcGxhY2UoL1wuKC4pL2csIGZ1bmN0aW9uKG0p
        IHsgcmV0dXJuIG0uY2hhckF0KDEpLnRvVXBwZXJDYXNlKCk7IH0pOwogICAg
        ICB9CgogICAgICBpZiAobmFtZS5pbmRleE9mKCdfJykgPiAtMSkgewogICAg
        ICAgIHJlc3VsdCA9IHJlc3VsdC5yZXBsYWNlKC9fKC4pL2csIGZ1bmN0aW9u
        KG0pIHsgcmV0dXJuIG0uY2hhckF0KDEpLnRvVXBwZXJDYXNlKCk7IH0pOwog
        ICAgICB9CgogICAgICByZXR1cm4gdHlwZSArICc6JyArIHJlc3VsdDsKICAg
        IH0gZWxzZSB7CiAgICAgIHJldHVybiBmdWxsTmFtZTsKICAgIH0KICB9LAoK
        CiAgLyoqCiAgICBUaGlzIG1ldGhvZCBpcyBjYWxsZWQgdmlhIHRoZSBjb250
        YWluZXIncyByZXNvbHZlciBtZXRob2QuCiAgICBJdCBwYXJzZXMgdGhlIHBy
        b3ZpZGVkIGBmdWxsTmFtZWAgYW5kIHRoZW4gbG9va3MgdXAgYW5kCiAgICBy
        ZXR1cm5zIHRoZSBhcHByb3ByaWF0ZSB0ZW1wbGF0ZSBvciBjbGFzcy4KCiAg
        ICBAbWV0aG9kIHJlc29sdmUKICAgIEBwYXJhbSB7U3RyaW5nfSBmdWxsTmFt
        ZSB0aGUgbG9va3VwIHN0cmluZwogICAgQHJldHVybiB7T2JqZWN0fSB0aGUg
        cmVzb2x2ZWQgZmFjdG9yeQogICovCiAgcmVzb2x2ZTogZnVuY3Rpb24oZnVs
        bE5hbWUpIHsKICAgIHZhciBwYXJzZWROYW1lID0gdGhpcy5wYXJzZU5hbWUo
        ZnVsbE5hbWUpLAogICAgICAgIHR5cGVTcGVjaWZpY1Jlc29sdmVNZXRob2Qg
        PSB0aGlzW3BhcnNlZE5hbWUucmVzb2x2ZU1ldGhvZE5hbWVdOwoKICAgIGlm
        ICghcGFyc2VkTmFtZS5uYW1lIHx8ICFwYXJzZWROYW1lLnR5cGUpIHsKICAg
        ICAgdGhyb3cgbmV3IFR5cGVFcnJvcigiSW52YWxpZCBmdWxsTmFtZTogYCIg
        KyBmdWxsTmFtZSArICJgLCBtdXN0IG9mIG9mIHRoZSBmb3JtIGB0eXBlOm5h
        bWVgICIpOwogICAgfQoKICAgIGlmICh0eXBlU3BlY2lmaWNSZXNvbHZlTWV0
        aG9kKSB7CiAgICAgIHZhciByZXNvbHZlZCA9IHR5cGVTcGVjaWZpY1Jlc29s
        dmVNZXRob2QuY2FsbCh0aGlzLCBwYXJzZWROYW1lKTsKICAgICAgaWYgKHJl
        c29sdmVkKSB7IHJldHVybiByZXNvbHZlZDsgfQogICAgfQogICAgcmV0dXJu
        IHRoaXMucmVzb2x2ZU90aGVyKHBhcnNlZE5hbWUpOwogIH0sCiAgLyoqCiAg
        ICBDb252ZXJ0IHRoZSBzdHJpbmcgbmFtZSBvZiB0aGUgZm9ybSAidHlwZTpu
        YW1lIiB0bwogICAgYSBKYXZhc2NyaXB0IG9iamVjdCB3aXRoIHRoZSBwYXJz
        ZWQgYXNwZWN0cyBvZiB0aGUgbmFtZQogICAgYnJva2VuIG91dC4KCiAgICBA
        cHJvdGVjdGVkCiAgICBAcGFyYW0ge1N0cmluZ30gZnVsbE5hbWUgdGhlIGxv
        b2t1cCBzdHJpbmcKICAgIEBtZXRob2QgcGFyc2VOYW1lCiAgKi8KICBwYXJz
        ZU5hbWU6IGZ1bmN0aW9uKGZ1bGxOYW1lKSB7CiAgICB2YXIgbmFtZVBhcnRz
        ID0gZnVsbE5hbWUuc3BsaXQoIjoiKSwKICAgICAgICB0eXBlID0gbmFtZVBh
        cnRzWzBdLCBmdWxsTmFtZVdpdGhvdXRUeXBlID0gbmFtZVBhcnRzWzFdLAog
        ICAgICAgIG5hbWUgPSBmdWxsTmFtZVdpdGhvdXRUeXBlLAogICAgICAgIG5h
        bWVzcGFjZSA9IGdldCh0aGlzLCAnbmFtZXNwYWNlJyksCiAgICAgICAgcm9v
        dCA9IG5hbWVzcGFjZTsKCiAgICBpZiAodHlwZSAhPT0gJ3RlbXBsYXRlJyAm
        JiBuYW1lLmluZGV4T2YoJy8nKSAhPT0gLTEpIHsKICAgICAgdmFyIHBhcnRz
        ID0gbmFtZS5zcGxpdCgnLycpOwogICAgICBuYW1lID0gcGFydHNbcGFydHMu
        bGVuZ3RoIC0gMV07CiAgICAgIHZhciBuYW1lc3BhY2VOYW1lID0gY2FwaXRh
        bGl6ZShwYXJ0cy5zbGljZSgwLCAtMSkuam9pbignLicpKTsKICAgICAgcm9v
        dCA9IEVtYmVyLk5hbWVzcGFjZS5ieU5hbWUobmFtZXNwYWNlTmFtZSk7Cgog
        ICAgICBFbWJlci5hc3NlcnQoJ1lvdSBhcmUgbG9va2luZyBmb3IgYSAnICsg
        bmFtZSArICcgJyArIHR5cGUgKyAnIGluIHRoZSAnICsgbmFtZXNwYWNlTmFt
        ZSArICcgbmFtZXNwYWNlLCBidXQgdGhlIG5hbWVzcGFjZSBjb3VsZCBub3Qg
        YmUgZm91bmQnLCByb290KTsKICAgIH0KCiAgICByZXR1cm4gewogICAgICBm
        dWxsTmFtZTogZnVsbE5hbWUsCiAgICAgIHR5cGU6IHR5cGUsCiAgICAgIGZ1
        bGxOYW1lV2l0aG91dFR5cGU6IGZ1bGxOYW1lV2l0aG91dFR5cGUsCiAgICAg
        IG5hbWU6IG5hbWUsCiAgICAgIHJvb3Q6IHJvb3QsCiAgICAgIHJlc29sdmVN
        ZXRob2ROYW1lOiAicmVzb2x2ZSIgKyBjbGFzc2lmeSh0eXBlKQogICAgfTsK
        ICB9LAogIC8qKgogICAgTG9vayB1cCB0aGUgdGVtcGxhdGUgaW4gRW1iZXIu
        VEVNUExBVEVTCgogICAgQHByb3RlY3RlZAogICAgQHBhcmFtIHtPYmplY3R9
        IHBhcnNlZE5hbWUgYSBwYXJzZU5hbWUgb2JqZWN0IHdpdGggdGhlIHBhcnNl
        ZAogICAgICBmdWxsTmFtZSBsb29rdXAgc3RyaW5nCiAgICBAbWV0aG9kIHJl
        c29sdmVUZW1wbGF0ZQogICovCiAgcmVzb2x2ZVRlbXBsYXRlOiBmdW5jdGlv
        bihwYXJzZWROYW1lKSB7CiAgICB2YXIgdGVtcGxhdGVOYW1lID0gcGFyc2Vk
        TmFtZS5mdWxsTmFtZVdpdGhvdXRUeXBlLnJlcGxhY2UoL1wuL2csICcvJyk7
        CgogICAgaWYgKEVtYmVyLlRFTVBMQVRFU1t0ZW1wbGF0ZU5hbWVdKSB7CiAg
        ICAgIHJldHVybiBFbWJlci5URU1QTEFURVNbdGVtcGxhdGVOYW1lXTsKICAg
        IH0KCiAgICB0ZW1wbGF0ZU5hbWUgPSBkZWNhbWVsaXplKHRlbXBsYXRlTmFt
        ZSk7CiAgICBpZiAoRW1iZXIuVEVNUExBVEVTW3RlbXBsYXRlTmFtZV0pIHsK
        ICAgICAgcmV0dXJuIEVtYmVyLlRFTVBMQVRFU1t0ZW1wbGF0ZU5hbWVdOwog
        ICAgfQogIH0sCiAgLyoqCiAgICBHaXZlbiBhIHBhcnNlTmFtZSBvYmplY3Qg
        KG91dHB1dCBmcm9tIGBwYXJzZU5hbWVgKSwgYXBwbHkKICAgIHRoZSBjb252
        ZW50aW9ucyBleHBlY3RlZCBieSBgRW1iZXIuUm91dGVyYAoKICAgIEBwcm90
        ZWN0ZWQKICAgIEBwYXJhbSB7T2JqZWN0fSBwYXJzZWROYW1lIGEgcGFyc2VO
        YW1lIG9iamVjdCB3aXRoIHRoZSBwYXJzZWQKICAgICAgZnVsbE5hbWUgbG9v
        a3VwIHN0cmluZwogICAgQG1ldGhvZCB1c2VSb3V0ZXJOYW1pbmcKICAqLwog
        IHVzZVJvdXRlck5hbWluZzogZnVuY3Rpb24ocGFyc2VkTmFtZSkgewogICAg
        cGFyc2VkTmFtZS5uYW1lID0gcGFyc2VkTmFtZS5uYW1lLnJlcGxhY2UoL1wu
        L2csICdfJyk7CiAgICBpZiAocGFyc2VkTmFtZS5uYW1lID09PSAnYmFzaWMn
        KSB7CiAgICAgIHBhcnNlZE5hbWUubmFtZSA9ICcnOwogICAgfQogIH0sCiAg
        LyoqCiAgICBMb29rdXAgdGhlIGNvbnRyb2xsZXIgdXNpbmcgYHJlc29sdmVP
        dGhlcmAKCiAgICBAcHJvdGVjdGVkCiAgICBAcGFyYW0ge09iamVjdH0gcGFy
        c2VkTmFtZSBhIHBhcnNlTmFtZSBvYmplY3Qgd2l0aCB0aGUgcGFyc2VkCiAg
        ICAgIGZ1bGxOYW1lIGxvb2t1cCBzdHJpbmcKICAgIEBtZXRob2QgcmVzb2x2
        ZUNvbnRyb2xsZXIKICAqLwogIHJlc29sdmVDb250cm9sbGVyOiBmdW5jdGlv
        bihwYXJzZWROYW1lKSB7CiAgICB0aGlzLnVzZVJvdXRlck5hbWluZyhwYXJz
        ZWROYW1lKTsKICAgIHJldHVybiB0aGlzLnJlc29sdmVPdGhlcihwYXJzZWRO
        YW1lKTsKICB9LAogIC8qKgogICAgTG9va3VwIHRoZSByb3V0ZSB1c2luZyBg
        cmVzb2x2ZU90aGVyYAoKICAgIEBwcm90ZWN0ZWQKICAgIEBwYXJhbSB7T2Jq
        ZWN0fSBwYXJzZWROYW1lIGEgcGFyc2VOYW1lIG9iamVjdCB3aXRoIHRoZSBw
        YXJzZWQKICAgICAgZnVsbE5hbWUgbG9va3VwIHN0cmluZwogICAgQG1ldGhv
        ZCByZXNvbHZlUm91dGUKICAqLwogIHJlc29sdmVSb3V0ZTogZnVuY3Rpb24o
        cGFyc2VkTmFtZSkgewogICAgdGhpcy51c2VSb3V0ZXJOYW1pbmcocGFyc2Vk
        TmFtZSk7CiAgICByZXR1cm4gdGhpcy5yZXNvbHZlT3RoZXIocGFyc2VkTmFt
        ZSk7CiAgfSwKICAvKioKICAgIExvb2t1cCB0aGUgdmlldyB1c2luZyBgcmVz
        b2x2ZU90aGVyYAoKICAgIEBwcm90ZWN0ZWQKICAgIEBwYXJhbSB7T2JqZWN0
        fSBwYXJzZWROYW1lIGEgcGFyc2VOYW1lIG9iamVjdCB3aXRoIHRoZSBwYXJz
        ZWQKICAgICAgZnVsbE5hbWUgbG9va3VwIHN0cmluZwogICAgQG1ldGhvZCBy
        ZXNvbHZlVmlldwogICovCiAgcmVzb2x2ZVZpZXc6IGZ1bmN0aW9uKHBhcnNl
        ZE5hbWUpIHsKICAgIHRoaXMudXNlUm91dGVyTmFtaW5nKHBhcnNlZE5hbWUp
        OwogICAgcmV0dXJuIHRoaXMucmVzb2x2ZU90aGVyKHBhcnNlZE5hbWUpOwog
        IH0sCgogIHJlc29sdmVIZWxwZXI6IGZ1bmN0aW9uKHBhcnNlZE5hbWUpIHsK
        ICAgIHJldHVybiB0aGlzLnJlc29sdmVPdGhlcihwYXJzZWROYW1lKSB8fCBF
        bWJlci5IYW5kbGViYXJzLmhlbHBlcnNbcGFyc2VkTmFtZS5mdWxsTmFtZVdp
        dGhvdXRUeXBlXTsKICB9LAoKICAvKioKICAgIExvb2t1cCB0aGUgbW9kZWwg
        b24gdGhlIEFwcGxpY2F0aW9uIG5hbWVzcGFjZQoKICAgIEBwcm90ZWN0ZWQK
        ICAgIEBwYXJhbSB7T2JqZWN0fSBwYXJzZWROYW1lIGEgcGFyc2VOYW1lIG9i
        amVjdCB3aXRoIHRoZSBwYXJzZWQKICAgICAgZnVsbE5hbWUgbG9va3VwIHN0
        cmluZwogICAgQG1ldGhvZCByZXNvbHZlTW9kZWwKICAqLwogIHJlc29sdmVN
        b2RlbDogZnVuY3Rpb24ocGFyc2VkTmFtZSkgewogICAgdmFyIGNsYXNzTmFt
        ZSA9IGNsYXNzaWZ5KHBhcnNlZE5hbWUubmFtZSksCiAgICAgICAgZmFjdG9y
        eSA9IGdldChwYXJzZWROYW1lLnJvb3QsIGNsYXNzTmFtZSk7CgogICAgIGlm
        IChmYWN0b3J5KSB7IHJldHVybiBmYWN0b3J5OyB9CiAgfSwKICAvKioKICAg
        IExvb2sgdXAgdGhlIHNwZWNpZmllZCBvYmplY3QgKGZyb20gcGFyc2VkTmFt
        ZSkgb24gdGhlIGFwcHJvcHJpYXRlCiAgICBuYW1lc3BhY2UgKHVzdWFsbHkg
        b24gdGhlIEFwcGxpY2F0aW9uKQoKICAgIEBwcm90ZWN0ZWQKICAgIEBwYXJh
        bSB7T2JqZWN0fSBwYXJzZWROYW1lIGEgcGFyc2VOYW1lIG9iamVjdCB3aXRo
        IHRoZSBwYXJzZWQKICAgICAgZnVsbE5hbWUgbG9va3VwIHN0cmluZwogICAg
        QG1ldGhvZCByZXNvbHZlT3RoZXIKICAqLwogIHJlc29sdmVPdGhlcjogZnVu
        Y3Rpb24ocGFyc2VkTmFtZSkgewogICAgdmFyIGNsYXNzTmFtZSA9IGNsYXNz
        aWZ5KHBhcnNlZE5hbWUubmFtZSkgKyBjbGFzc2lmeShwYXJzZWROYW1lLnR5
        cGUpLAogICAgICAgIGZhY3RvcnkgPSBnZXQocGFyc2VkTmFtZS5yb290LCBj
        bGFzc05hbWUpOwogICAgaWYgKGZhY3RvcnkpIHsgcmV0dXJuIGZhY3Rvcnk7
        IH0KICB9LAoKICAvKioKICAgIFJldHVybnMgYSBodW1hbi1yZWFkYWJsZSBk
        ZXNjcmlwdGlvbiBmb3IgYSBmdWxsTmFtZS4gVXNlZCBieSB0aGUKICAgIEFw
        cGxpY2F0aW9uIG5hbWVzcGFjZSBpbiBhc3NlcnRpb25zIHRvIGRlc2NyaWJl
        IHRoZQogICAgcHJlY2lzZSBuYW1lIG9mIHRoZSBjbGFzcyB0aGF0IEVtYmVy
        IGlzIGxvb2tpbmcgZm9yLCByYXRoZXIgdGhhbgogICAgY29udGFpbmVyIGtl
        eXMuCgogICAgQHByb3RlY3RlZAogICAgQHBhcmFtIHtTdHJpbmd9IGZ1bGxO
        YW1lIHRoZSBsb29rdXAgc3RyaW5nCiAgICBAbWV0aG9kIGxvb2t1cERlc2Ny
        aXB0aW9uCiAgKi8KICBsb29rdXBEZXNjcmlwdGlvbjogZnVuY3Rpb24oZnVs
        bE5hbWUpIHsKICAgIHZhciBwYXJzZWROYW1lID0gdGhpcy5wYXJzZU5hbWUo
        ZnVsbE5hbWUpOwoKICAgIGlmIChwYXJzZWROYW1lLnR5cGUgPT09ICd0ZW1w
        bGF0ZScpIHsKICAgICAgcmV0dXJuICJ0ZW1wbGF0ZSBhdCAiICsgcGFyc2Vk
        TmFtZS5mdWxsTmFtZVdpdGhvdXRUeXBlLnJlcGxhY2UoL1wuL2csICcvJyk7
        CiAgICB9CgogICAgdmFyIGRlc2NyaXB0aW9uID0gcGFyc2VkTmFtZS5yb290
        ICsgIi4iICsgY2xhc3NpZnkocGFyc2VkTmFtZS5uYW1lKTsKICAgIGlmIChw
        YXJzZWROYW1lLnR5cGUgIT09ICdtb2RlbCcpIHsgZGVzY3JpcHRpb24gKz0g
        Y2xhc3NpZnkocGFyc2VkTmFtZS50eXBlKTsgfQoKICAgIHJldHVybiBkZXNj
        cmlwdGlvbjsKICB9LAoKICBtYWtlVG9TdHJpbmc6IGZ1bmN0aW9uKGZhY3Rv
        cnksIGZ1bGxOYW1lKSB7CiAgICByZXR1cm4gZmFjdG9yeS50b1N0cmluZygp
        OwogIH0KfSk7Cgp9KSgpOwoKCgooZnVuY3Rpb24oKSB7Ci8qKgpAbW9kdWxl
        IGVtYmVyCkBzdWJtb2R1bGUgZW1iZXItYXBwbGljYXRpb24KKi8KCnZhciBn
        ZXQgPSBFbWJlci5nZXQsIHNldCA9IEVtYmVyLnNldDsKCmZ1bmN0aW9uIERl
        cHJlY2F0ZWRDb250YWluZXIoY29udGFpbmVyKSB7CiAgdGhpcy5fY29udGFp
        bmVyID0gY29udGFpbmVyOwp9CgpEZXByZWNhdGVkQ29udGFpbmVyLmRlcHJl
        Y2F0ZSA9IGZ1bmN0aW9uKG1ldGhvZCkgewogIHJldHVybiBmdW5jdGlvbigp
        IHsKICAgIHZhciBjb250YWluZXIgPSB0aGlzLl9jb250YWluZXI7CgogICAg
        RW1iZXIuZGVwcmVjYXRlKCdVc2luZyB0aGUgZGVmYXVsdENvbnRhaW5lciBp
        cyBubyBsb25nZXIgc3VwcG9ydGVkLiBbZGVmYXVsdENvbnRhaW5lciMnICsg
        bWV0aG9kICsgJ10gc2VlOiBodHRwOi8vZ2l0LmlvL0VLUHBuQScsIGZhbHNl
        KTsKICAgIHJldHVybiBjb250YWluZXJbbWV0aG9kXS5hcHBseShjb250YWlu
        ZXIsIGFyZ3VtZW50cyk7CiAgfTsKfTsKCkRlcHJlY2F0ZWRDb250YWluZXIu
        cHJvdG90eXBlID0gewogIF9jb250YWluZXI6IG51bGwsCiAgbG9va3VwOiBE
        ZXByZWNhdGVkQ29udGFpbmVyLmRlcHJlY2F0ZSgnbG9va3VwJyksCiAgcmVz
        b2x2ZTogRGVwcmVjYXRlZENvbnRhaW5lci5kZXByZWNhdGUoJ3Jlc29sdmUn
        KSwKICByZWdpc3RlcjogRGVwcmVjYXRlZENvbnRhaW5lci5kZXByZWNhdGUo
        J3JlZ2lzdGVyJykKfTsKCi8qKgogIEFuIGluc3RhbmNlIG9mIGBFbWJlci5B
        cHBsaWNhdGlvbmAgaXMgdGhlIHN0YXJ0aW5nIHBvaW50IGZvciBldmVyeSBF
        bWJlcgogIGFwcGxpY2F0aW9uLiBJdCBoZWxwcyB0byBpbnN0YW50aWF0ZSwg
        aW5pdGlhbGl6ZSBhbmQgY29vcmRpbmF0ZSB0aGUgbWFueQogIG9iamVjdHMg
        dGhhdCBtYWtlIHVwIHlvdXIgYXBwLgoKICBFYWNoIEVtYmVyIGFwcCBoYXMg
        b25lIGFuZCBvbmx5IG9uZSBgRW1iZXIuQXBwbGljYXRpb25gIG9iamVjdC4g
        SW4gZmFjdCwgdGhlCiAgdmVyeSBmaXJzdCB0aGluZyB5b3Ugc2hvdWxkIGRv
        IGluIHlvdXIgYXBwbGljYXRpb24gaXMgY3JlYXRlIHRoZSBpbnN0YW5jZToK
        CiAgYGBgamF2YXNjcmlwdAogIHdpbmRvdy5BcHAgPSBFbWJlci5BcHBsaWNh
        dGlvbi5jcmVhdGUoKTsKICBgYGAKCiAgVHlwaWNhbGx5LCB0aGUgYXBwbGlj
        YXRpb24gb2JqZWN0IGlzIHRoZSBvbmx5IGdsb2JhbCB2YXJpYWJsZS4gQWxs
        IG90aGVyCiAgY2xhc3NlcyBpbiB5b3VyIGFwcCBzaG91bGQgYmUgcHJvcGVy
        dGllcyBvbiB0aGUgYEVtYmVyLkFwcGxpY2F0aW9uYCBpbnN0YW5jZSwKICB3
        aGljaCBoaWdobGlnaHRzIGl0cyBmaXJzdCByb2xlOiBhIGdsb2JhbCBuYW1l
        c3BhY2UuCgogIEZvciBleGFtcGxlLCBpZiB5b3UgZGVmaW5lIGEgdmlldyBj
        bGFzcywgaXQgbWlnaHQgbG9vayBsaWtlIHRoaXM6CgogIGBgYGphdmFzY3Jp
        cHQKICBBcHAuTXlWaWV3ID0gRW1iZXIuVmlldy5leHRlbmQoKTsKICBgYGAK
        CiAgQnkgZGVmYXVsdCwgY2FsbGluZyBgRW1iZXIuQXBwbGljYXRpb24uY3Jl
        YXRlKClgIHdpbGwgYXV0b21hdGljYWxseSBpbml0aWFsaXplCiAgeW91ciBh
        cHBsaWNhdGlvbiBieSBjYWxsaW5nIHRoZSBgRW1iZXIuQXBwbGljYXRpb24u
        aW5pdGlhbGl6ZSgpYCBtZXRob2QuIElmCiAgeW91IG5lZWQgdG8gZGVsYXkg
        aW5pdGlhbGl6YXRpb24sIHlvdSBjYW4gY2FsbCB5b3VyIGFwcCdzIGBkZWZl
        clJlYWRpbmVzcygpYAogIG1ldGhvZC4gV2hlbiB5b3UgYXJlIHJlYWR5IGZv
        ciB5b3VyIGFwcCB0byBiZSBpbml0aWFsaXplZCwgY2FsbCBpdHMKICBgYWR2
        YW5jZVJlYWRpbmVzcygpYCBtZXRob2QuCgogIFlvdSBjYW4gZGVmaW5lIGEg
        YHJlYWR5YCBtZXRob2Qgb24gdGhlIGBFbWJlci5BcHBsaWNhdGlvbmAgaW5z
        dGFuY2UsIHdoaWNoCiAgd2lsbCBiZSBydW4gYnkgRW1iZXIgd2hlbiB0aGUg
        YXBwbGljYXRpb24gaXMgaW5pdGlhbGl6ZWQuCgogIEJlY2F1c2UgYEVtYmVy
        LkFwcGxpY2F0aW9uYCBpbmhlcml0cyBmcm9tIGBFbWJlci5OYW1lc3BhY2Vg
        LCBhbnkgY2xhc3NlcwogIHlvdSBjcmVhdGUgd2lsbCBoYXZlIHVzZWZ1bCBz
        dHJpbmcgcmVwcmVzZW50YXRpb25zIHdoZW4gY2FsbGluZyBgdG9TdHJpbmco
        KWAuCiAgU2VlIHRoZSBgRW1iZXIuTmFtZXNwYWNlYCBkb2N1bWVudGF0aW9u
        IGZvciBtb3JlIGluZm9ybWF0aW9uLgoKICBXaGlsZSB5b3UgY2FuIHRoaW5r
        IG9mIHlvdXIgYEVtYmVyLkFwcGxpY2F0aW9uYCBhcyBhIGNvbnRhaW5lciB0
        aGF0IGhvbGRzIHRoZQogIG90aGVyIGNsYXNzZXMgaW4geW91ciBhcHBsaWNh
        dGlvbiwgdGhlcmUgYXJlIHNldmVyYWwgb3RoZXIgcmVzcG9uc2liaWxpdGll
        cwogIGdvaW5nIG9uIHVuZGVyLXRoZS1ob29kIHRoYXQgeW91IG1heSB3YW50
        IHRvIHVuZGVyc3RhbmQuCgogICMjIyBFdmVudCBEZWxlZ2F0aW9uCgogIEVt
        YmVyIHVzZXMgYSB0ZWNobmlxdWUgY2FsbGVkIF9ldmVudCBkZWxlZ2F0aW9u
        Xy4gVGhpcyBhbGxvd3MgdGhlIGZyYW1ld29yawogIHRvIHNldCB1cCBhIGds
        b2JhbCwgc2hhcmVkIGV2ZW50IGxpc3RlbmVyIGluc3RlYWQgb2YgcmVxdWly
        aW5nIGVhY2ggdmlldyB0bwogIGRvIGl0IG1hbnVhbGx5LiBGb3IgZXhhbXBs
        ZSwgaW5zdGVhZCBvZiBlYWNoIHZpZXcgcmVnaXN0ZXJpbmcgaXRzIG93bgog
        IGBtb3VzZWRvd25gIGxpc3RlbmVyIG9uIGl0cyBhc3NvY2lhdGVkIGVsZW1l
        bnQsIEVtYmVyIHNldHMgdXAgYSBgbW91c2Vkb3duYAogIGxpc3RlbmVyIG9u
        IHRoZSBgYm9keWAuCgogIElmIGEgYG1vdXNlZG93bmAgZXZlbnQgb2NjdXJz
        LCBFbWJlciB3aWxsIGxvb2sgYXQgdGhlIHRhcmdldCBvZiB0aGUgZXZlbnQg
        YW5kCiAgc3RhcnQgd2Fsa2luZyB1cCB0aGUgRE9NIG5vZGUgdHJlZSwgZmlu
        ZGluZyBjb3JyZXNwb25kaW5nIHZpZXdzIGFuZCBpbnZva2luZwogIHRoZWly
        IGBtb3VzZURvd25gIG1ldGhvZCBhcyBpdCBnb2VzLgoKICBgRW1iZXIuQXBw
        bGljYXRpb25gIGhhcyBhIG51bWJlciBvZiBkZWZhdWx0IGV2ZW50cyB0aGF0
        IGl0IGxpc3RlbnMgZm9yLCBhcwogIHdlbGwgYXMgYSBtYXBwaW5nIGZyb20g
        bG93ZXJjYXNlIGV2ZW50cyB0byBjYW1lbC1jYXNlZCB2aWV3IG1ldGhvZCBu
        YW1lcy4gRm9yCiAgZXhhbXBsZSwgdGhlIGBrZXlwcmVzc2AgZXZlbnQgY2F1
        c2VzIHRoZSBga2V5UHJlc3NgIG1ldGhvZCBvbiB0aGUgdmlldyB0byBiZQog
        IGNhbGxlZCwgdGhlIGBkYmxjbGlja2AgZXZlbnQgY2F1c2VzIGBkb3VibGVD
        bGlja2AgdG8gYmUgY2FsbGVkLCBhbmQgc28gb24uCgogIElmIHRoZXJlIGlz
        IGEgYnViYmxpbmcgYnJvd3NlciBldmVudCB0aGF0IEVtYmVyIGRvZXMgbm90
        IGxpc3RlbiBmb3IgYnkKICBkZWZhdWx0LCB5b3UgY2FuIHNwZWNpZnkgY3Vz
        dG9tIGV2ZW50cyBhbmQgdGhlaXIgY29ycmVzcG9uZGluZyB2aWV3IG1ldGhv
        ZAogIG5hbWVzIGJ5IHNldHRpbmcgdGhlIGFwcGxpY2F0aW9uJ3MgYGN1c3Rv
        bUV2ZW50c2AgcHJvcGVydHk6CgogIGBgYGphdmFzY3JpcHQKICBBcHAgPSBF
        bWJlci5BcHBsaWNhdGlvbi5jcmVhdGUoewogICAgY3VzdG9tRXZlbnRzOiB7
        CiAgICAgIC8vIGFkZCBzdXBwb3J0IGZvciB0aGUgcGFzdGUgZXZlbnQKICAg
        ICAgJ3Bhc3RlOiAicGFzdGUiCiAgICB9CiAgfSk7CiAgYGBgCgogIEJ5IGRl
        ZmF1bHQsIHRoZSBhcHBsaWNhdGlvbiBzZXRzIHVwIHRoZXNlIGV2ZW50IGxp
        c3RlbmVycyBvbiB0aGUgZG9jdW1lbnQKICBib2R5LiBIb3dldmVyLCBpbiBj
        YXNlcyB3aGVyZSB5b3UgYXJlIGVtYmVkZGluZyBhbiBFbWJlciBhcHBsaWNh
        dGlvbiBpbnNpZGUKICBhbiBleGlzdGluZyBwYWdlLCB5b3UgbWF5IHdhbnQg
        aXQgdG8gc2V0IHVwIHRoZSBsaXN0ZW5lcnMgb24gYW4gZWxlbWVudAogIGlu
        c2lkZSB0aGUgYm9keS4KCiAgRm9yIGV4YW1wbGUsIGlmIG9ubHkgZXZlbnRz
        IGluc2lkZSBhIERPTSBlbGVtZW50IHdpdGggdGhlIElEIG9mIGBlbWJlci1h
        cHBgCiAgc2hvdWxkIGJlIGRlbGVnYXRlZCwgc2V0IHlvdXIgYXBwbGljYXRp
        b24ncyBgcm9vdEVsZW1lbnRgIHByb3BlcnR5OgoKICBgYGBqYXZhc2NyaXB0
        CiAgd2luZG93LkFwcCA9IEVtYmVyLkFwcGxpY2F0aW9uLmNyZWF0ZSh7CiAg
        ICByb290RWxlbWVudDogJyNlbWJlci1hcHAnCiAgfSk7CiAgYGBgCgogIFRo
        ZSBgcm9vdEVsZW1lbnRgIGNhbiBiZSBlaXRoZXIgYSBET00gZWxlbWVudCBv
        ciBhIGpRdWVyeS1jb21wYXRpYmxlIHNlbGVjdG9yCiAgc3RyaW5nLiBOb3Rl
        IHRoYXQgKnZpZXdzIGFwcGVuZGVkIHRvIHRoZSBET00gb3V0c2lkZSB0aGUg
        cm9vdCBlbGVtZW50IHdpbGwKICBub3QgcmVjZWl2ZSBldmVudHMuKiBJZiB5
        b3Ugc3BlY2lmeSBhIGN1c3RvbSByb290IGVsZW1lbnQsIG1ha2Ugc3VyZSB5
        b3Ugb25seQogIGFwcGVuZCB2aWV3cyBpbnNpZGUgaXQhCgogIFRvIGxlYXJu
        IG1vcmUgYWJvdXQgdGhlIGFkdmFudGFnZXMgb2YgZXZlbnQgZGVsZWdhdGlv
        biBhbmQgdGhlIEVtYmVyIHZpZXcKICBsYXllciwgYW5kIGEgbGlzdCBvZiB0
        aGUgZXZlbnQgbGlzdGVuZXJzIHRoYXQgYXJlIHNldHVwIGJ5IGRlZmF1bHQs
        IHZpc2l0IHRoZQogIFtFbWJlciBWaWV3IExheWVyIGd1aWRlXShodHRwOi8v
        ZW1iZXJqcy5jb20vZ3VpZGVzL3VuZGVyc3RhbmRpbmctZW1iZXIvdGhlLXZp
        ZXctbGF5ZXIvI3RvY19ldmVudC1kZWxlZ2F0aW9uKS4KCiAgIyMjIEluaXRp
        YWxpemVycwoKICBMaWJyYXJpZXMgb24gdG9wIG9mIEVtYmVyIGNhbiByZWdp
        c3RlciBhZGRpdGlvbmFsIGluaXRpYWxpemVycywgbGlrZSBzbzoKCiAgYGBg
        amF2YXNjcmlwdAogIEVtYmVyLkFwcGxpY2F0aW9uLmluaXRpYWxpemVyKHsK
        ICAgIG5hbWU6ICJzdG9yZSIsCgogICAgaW5pdGlhbGl6ZTogZnVuY3Rpb24o
        Y29udGFpbmVyLCBhcHBsaWNhdGlvbikgewogICAgICBjb250YWluZXIucmVn
        aXN0ZXIoJ3N0b3JlOm1haW4nLCBhcHBsaWNhdGlvbi5TdG9yZSk7CiAgICB9
        CiAgfSk7CiAgYGBgCgogICMjIyBSb3V0aW5nCgogIEluIGFkZGl0aW9uIHRv
        IGNyZWF0aW5nIHlvdXIgYXBwbGljYXRpb24ncyByb3V0ZXIsIGBFbWJlci5B
        cHBsaWNhdGlvbmAgaXMKICBhbHNvIHJlc3BvbnNpYmxlIGZvciB0ZWxsaW5n
        IHRoZSByb3V0ZXIgd2hlbiB0byBzdGFydCByb3V0aW5nLiBUcmFuc2l0aW9u
        cwogIGJldHdlZW4gcm91dGVzIGNhbiBiZSBsb2dnZWQgd2l0aCB0aGUgYExP
        R19UUkFOU0lUSU9OU2AgZmxhZywgYW5kIG1vcmUKICBkZXRhaWxlZCBpbnRy
        YS10cmFuc2l0aW9uIGxvZ2dpbmcgY2FuIGJlIGxvZ2dlZCB3aXRoCiAgdGhl
        IGBMT0dfVFJBTlNJVElPTlNfSU5URVJOQUxgIGZsYWc6CgogIGBgYGphdmFz
        Y3JpcHQKICB3aW5kb3cuQXBwID0gRW1iZXIuQXBwbGljYXRpb24uY3JlYXRl
        KHsKICAgIExPR19UUkFOU0lUSU9OUzogdHJ1ZSwgLy8gYmFzaWMgbG9nZ2lu
        ZyBvZiBzdWNjZXNzZnVsIHRyYW5zaXRpb25zCiAgICBMT0dfVFJBTlNJVElP
        TlNfSU5URVJOQUw6IHRydWUgLy8gZGV0YWlsZWQgbG9nZ2luZyBvZiBhbGwg
        cm91dGluZyBzdGVwcwogIH0pOwogIGBgYAoKICBCeSBkZWZhdWx0LCB0aGUg
        cm91dGVyIHdpbGwgYmVnaW4gdHJ5aW5nIHRvIHRyYW5zbGF0ZSB0aGUgY3Vy
        cmVudCBVUkwgaW50bwogIGFwcGxpY2F0aW9uIHN0YXRlIG9uY2UgdGhlIGJy
        b3dzZXIgZW1pdHMgdGhlIGBET01Db250ZW50UmVhZHlgIGV2ZW50LiBJZiB5
        b3UKICBuZWVkIHRvIGRlZmVyIHJvdXRpbmcsIHlvdSBjYW4gY2FsbCB0aGUg
        YXBwbGljYXRpb24ncyBgZGVmZXJSZWFkaW5lc3MoKWAKICBtZXRob2QuIE9u
        Y2Ugcm91dGluZyBjYW4gYmVnaW4sIGNhbGwgdGhlIGBhZHZhbmNlUmVhZGlu
        ZXNzKClgIG1ldGhvZC4KCiAgSWYgdGhlcmUgaXMgYW55IHNldHVwIHJlcXVp
        cmVkIGJlZm9yZSByb3V0aW5nIGJlZ2lucywgeW91IGNhbiBpbXBsZW1lbnQg
        YQogIGByZWFkeSgpYCBtZXRob2Qgb24geW91ciBhcHAgdGhhdCB3aWxsIGJl
        IGludm9rZWQgaW1tZWRpYXRlbHkgYmVmb3JlIHJvdXRpbmcKICBiZWdpbnMu
        CiAgYGBgCgogIEBjbGFzcyBBcHBsaWNhdGlvbgogIEBuYW1lc3BhY2UgRW1i
        ZXIKICBAZXh0ZW5kcyBFbWJlci5OYW1lc3BhY2UKKi8KCnZhciBBcHBsaWNh
        dGlvbiA9IEVtYmVyLkFwcGxpY2F0aW9uID0gRW1iZXIuTmFtZXNwYWNlLmV4
        dGVuZChFbWJlci5EZWZlcnJlZE1peGluLCB7CgogIC8qKgogICAgVGhlIHJv
        b3QgRE9NIGVsZW1lbnQgb2YgdGhlIEFwcGxpY2F0aW9uLiBUaGlzIGNhbiBi
        ZSBzcGVjaWZpZWQgYXMgYW4KICAgIGVsZW1lbnQgb3IgYQogICAgW2pRdWVy
        eS1jb21wYXRpYmxlIHNlbGVjdG9yIHN0cmluZ10oaHR0cDovL2FwaS5qcXVl
        cnkuY29tL2NhdGVnb3J5L3NlbGVjdG9ycy8pLgoKICAgIFRoaXMgaXMgdGhl
        IGVsZW1lbnQgdGhhdCB3aWxsIGJlIHBhc3NlZCB0byB0aGUgQXBwbGljYXRp
        b24ncywKICAgIGBldmVudERpc3BhdGNoZXJgLCB3aGljaCBzZXRzIHVwIHRo
        ZSBsaXN0ZW5lcnMgZm9yIGV2ZW50IGRlbGVnYXRpb24uIEV2ZXJ5CiAgICB2
        aWV3IGluIHlvdXIgYXBwbGljYXRpb24gc2hvdWxkIGJlIGEgY2hpbGQgb2Yg
        dGhlIGVsZW1lbnQgeW91IHNwZWNpZnkgaGVyZS4KCiAgICBAcHJvcGVydHkg
        cm9vdEVsZW1lbnQKICAgIEB0eXBlIERPTUVsZW1lbnQKICAgIEBkZWZhdWx0
        ICdib2R5JwogICovCiAgcm9vdEVsZW1lbnQ6ICdib2R5JywKCiAgLyoqCiAg
        ICBUaGUgYEVtYmVyLkV2ZW50RGlzcGF0Y2hlcmAgcmVzcG9uc2libGUgZm9y
        IGRlbGVnYXRpbmcgZXZlbnRzIHRvIHRoaXMKICAgIGFwcGxpY2F0aW9uJ3Mg
        dmlld3MuCgogICAgVGhlIGV2ZW50IGRpc3BhdGNoZXIgaXMgY3JlYXRlZCBi
        eSB0aGUgYXBwbGljYXRpb24gYXQgaW5pdGlhbGl6YXRpb24gdGltZQogICAg
        YW5kIHNldHMgdXAgZXZlbnQgbGlzdGVuZXJzIG9uIHRoZSBET00gZWxlbWVu
        dCBkZXNjcmliZWQgYnkgdGhlCiAgICBhcHBsaWNhdGlvbidzIGByb290RWxl
        bWVudGAgcHJvcGVydHkuCgogICAgU2VlIHRoZSBkb2N1bWVudGF0aW9uIGZv
        ciBgRW1iZXIuRXZlbnREaXNwYXRjaGVyYCBmb3IgbW9yZSBpbmZvcm1hdGlv
        bi4KCiAgICBAcHJvcGVydHkgZXZlbnREaXNwYXRjaGVyCiAgICBAdHlwZSBF
        bWJlci5FdmVudERpc3BhdGNoZXIKICAgIEBkZWZhdWx0IG51bGwKICAqLwog
        IGV2ZW50RGlzcGF0Y2hlcjogbnVsbCwKCiAgLyoqCiAgICBUaGUgRE9NIGV2
        ZW50cyBmb3Igd2hpY2ggdGhlIGV2ZW50IGRpc3BhdGNoZXIgc2hvdWxkIGxp
        c3Rlbi4KCiAgICBCeSBkZWZhdWx0LCB0aGUgYXBwbGljYXRpb24ncyBgRW1i
        ZXIuRXZlbnREaXNwYXRjaGVyYCBsaXN0ZW5zCiAgICBmb3IgYSBzZXQgb2Yg
        c3RhbmRhcmQgRE9NIGV2ZW50cywgc3VjaCBhcyBgbW91c2Vkb3duYCBhbmQK
        ICAgIGBrZXl1cGAsIGFuZCBkZWxlZ2F0ZXMgdGhlbSB0byB5b3VyIGFwcGxp
        Y2F0aW9uJ3MgYEVtYmVyLlZpZXdgCiAgICBpbnN0YW5jZXMuCgogICAgSWYg
        eW91IHdvdWxkIGxpa2UgYWRkaXRpb25hbCBidWJibGluZyBldmVudHMgdG8g
        YmUgZGVsZWdhdGVkIHRvIHlvdXIKICAgIHZpZXdzLCBzZXQgeW91ciBgRW1i
        ZXIuQXBwbGljYXRpb25gJ3MgYGN1c3RvbUV2ZW50c2AgcHJvcGVydHkKICAg
        IHRvIGEgaGFzaCBjb250YWluaW5nIHRoZSBET00gZXZlbnQgbmFtZSBhcyB0
        aGUga2V5IGFuZCB0aGUKICAgIGNvcnJlc3BvbmRpbmcgdmlldyBtZXRob2Qg
        bmFtZSBhcyB0aGUgdmFsdWUuIEZvciBleGFtcGxlOgoKICAgIGBgYGphdmFz
        Y3JpcHQKICAgIEFwcCA9IEVtYmVyLkFwcGxpY2F0aW9uLmNyZWF0ZSh7CiAg
        ICAgIGN1c3RvbUV2ZW50czogewogICAgICAgIC8vIGFkZCBzdXBwb3J0IGZv
        ciB0aGUgcGFzdGUgZXZlbnQKICAgICAgICAncGFzdGU6ICJwYXN0ZSIKICAg
        ICAgfQogICAgfSk7CiAgICBgYGAKCiAgICBAcHJvcGVydHkgY3VzdG9tRXZl
        bnRzCiAgICBAdHlwZSBPYmplY3QKICAgIEBkZWZhdWx0IG51bGwKICAqLwog
        IGN1c3RvbUV2ZW50czogbnVsbCwKCiAgLy8gU3RhcnQgb2ZmIHRoZSBudW1i
        ZXIgb2YgZGVmZXJyYWxzIGF0IDEuIFRoaXMgd2lsbCBiZQogIC8vIGRlY3Jl
        bWVudGVkIGJ5IHRoZSBBcHBsaWNhdGlvbidzIG93biBgaW5pdGlhbGl6ZWAg
        bWV0aG9kLgogIF9yZWFkaW5lc3NEZWZlcnJhbHM6IDEsCgogIGluaXQ6IGZ1
        bmN0aW9uKCkgewogICAgaWYgKCF0aGlzLiQpIHsgdGhpcy4kID0gRW1iZXIu
        JDsgfQogICAgdGhpcy5fX2NvbnRhaW5lcl9fID0gdGhpcy5idWlsZENvbnRh
        aW5lcigpOwoKICAgIHRoaXMuUm91dGVyID0gdGhpcy5kZWZhdWx0Um91dGVy
        KCk7CgogICAgdGhpcy5fc3VwZXIoKTsKCiAgICB0aGlzLnNjaGVkdWxlSW5p
        dGlhbGl6ZSgpOwoKICAgIEVtYmVyLmxpYnJhcmllcy5yZWdpc3RlckNvcmVM
        aWJyYXJ5KCdIYW5kbGViYXJzJywgRW1iZXIuSGFuZGxlYmFycy5WRVJTSU9O
        KTsKICAgIEVtYmVyLmxpYnJhcmllcy5yZWdpc3RlckNvcmVMaWJyYXJ5KCdq
        UXVlcnknLCBFbWJlci4kKCkuanF1ZXJ5KTsKCiAgICBpZiAoIEVtYmVyLkxP
        R19WRVJTSU9OICkgewogICAgICBFbWJlci5MT0dfVkVSU0lPTiA9IGZhbHNl
        OyAvLyB3ZSBvbmx5IG5lZWQgdG8gc2VlIHRoaXMgb25jZSBwZXIgQXBwbGlj
        YXRpb24jaW5pdAogICAgICB2YXIgbWF4TmFtZUxlbmd0aCA9IE1hdGgubWF4
        LmFwcGx5KHRoaXMsIEVtYmVyLkEoRW1iZXIubGlicmFyaWVzKS5tYXBCeSgi
        bmFtZS5sZW5ndGgiKSk7CgogICAgICBFbWJlci5kZWJ1ZygnLS0tLS0tLS0t
        LS0tLS0tLS0tLS0tLS0tLS0tLS0tLScpOwogICAgICBFbWJlci5saWJyYXJp
        ZXMuZWFjaChmdW5jdGlvbihuYW1lLCB2ZXJzaW9uKSB7CiAgICAgICAgdmFy
        IHNwYWNlcyA9IG5ldyBBcnJheShtYXhOYW1lTGVuZ3RoIC0gbmFtZS5sZW5n
        dGggKyAxKS5qb2luKCIgIik7CiAgICAgICAgRW1iZXIuZGVidWcoW25hbWUs
        IHNwYWNlcywgJyA6ICcsIHZlcnNpb25dLmpvaW4oIiIpKTsKICAgICAgfSk7
        CiAgICAgIEVtYmVyLmRlYnVnKCctLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
        LS0tLS0tJyk7CiAgICB9CiAgfSwKCiAgLyoqCiAgICBAcHJpdmF0ZQoKICAg
        IEJ1aWxkIHRoZSBjb250YWluZXIgZm9yIHRoZSBjdXJyZW50IGFwcGxpY2F0
        aW9uLgoKICAgIEFsc28gcmVnaXN0ZXIgYSBkZWZhdWx0IGFwcGxpY2F0aW9u
        IHZpZXcgaW4gY2FzZSB0aGUgYXBwbGljYXRpb24KICAgIGl0c2VsZiBkb2Vz
        IG5vdC4KCiAgICBAbWV0aG9kIGJ1aWxkQ29udGFpbmVyCiAgICBAcmV0dXJu
        IHtFbWJlci5Db250YWluZXJ9IHRoZSBjb25maWd1cmVkIGNvbnRhaW5lcgog
        ICovCiAgYnVpbGRDb250YWluZXI6IGZ1bmN0aW9uKCkgewogICAgdmFyIGNv
        bnRhaW5lciA9IHRoaXMuX19jb250YWluZXJfXyA9IEFwcGxpY2F0aW9uLmJ1
        aWxkQ29udGFpbmVyKHRoaXMpOwoKICAgIHJldHVybiBjb250YWluZXI7CiAg
        fSwKCiAgLyoqCiAgICBAcHJpdmF0ZQoKICAgIElmIHRoZSBhcHBsaWNhdGlv
        biBoYXMgbm90IG9wdGVkIG91dCBvZiByb3V0aW5nIGFuZCBoYXMgbm90IGV4
        cGxpY2l0bHkKICAgIGRlZmluZWQgYSByb3V0ZXIsIHN1cHBseSBhIGRlZmF1
        bHQgcm91dGVyIGZvciB0aGUgYXBwbGljYXRpb24gYXV0aG9yCiAgICB0byBj
        b25maWd1cmUuCgogICAgVGhpcyBhbGxvd3MgYXBwbGljYXRpb24gZGV2ZWxv
        cGVycyB0byBkbzoKCiAgICBgYGBqYXZhc2NyaXB0CiAgICB2YXIgQXBwID0g
        RW1iZXIuQXBwbGljYXRpb24uY3JlYXRlKCk7CgogICAgQXBwLlJvdXRlci5t
        YXAoZnVuY3Rpb24oKSB7CiAgICAgIHRoaXMucmVzb3VyY2UoJ3Bvc3RzJyk7
        CiAgICB9KTsKICAgIGBgYAoKICAgIEBtZXRob2QgZGVmYXVsdFJvdXRlcgog
        ICAgQHJldHVybiB7RW1iZXIuUm91dGVyfSB0aGUgZGVmYXVsdCByb3V0ZXIK
        ICAqLwoKICBkZWZhdWx0Um91dGVyOiBmdW5jdGlvbigpIHsKICAgIGlmICh0
        aGlzLlJvdXRlciA9PT0gZmFsc2UpIHsgcmV0dXJuOyB9CiAgICB2YXIgY29u
        dGFpbmVyID0gdGhpcy5fX2NvbnRhaW5lcl9fOwoKICAgIGlmICh0aGlzLlJv
        dXRlcikgewogICAgICBjb250YWluZXIudW5yZWdpc3Rlcigncm91dGVyOm1h
        aW4nKTsKICAgICAgY29udGFpbmVyLnJlZ2lzdGVyKCdyb3V0ZXI6bWFpbics
        IHRoaXMuUm91dGVyKTsKICAgIH0KCiAgICByZXR1cm4gY29udGFpbmVyLmxv
        b2t1cEZhY3RvcnkoJ3JvdXRlcjptYWluJyk7CiAgfSwKCiAgLyoqCiAgICBA
        cHJpdmF0ZQoKICAgIEF1dG9tYXRpY2FsbHkgaW5pdGlhbGl6ZSB0aGUgYXBw
        bGljYXRpb24gb25jZSB0aGUgRE9NIGhhcwogICAgYmVjb21lIHJlYWR5LgoK
        ICAgIFRoZSBpbml0aWFsaXphdGlvbiBpdHNlbGYgaXMgc2NoZWR1bGVkIG9u
        IHRoZSBhY3Rpb25zIHF1ZXVlCiAgICB3aGljaCBlbnN1cmVzIHRoYXQgYXBw
        bGljYXRpb24gbG9hZGluZyBmaW5pc2hlcyBiZWZvcmUKICAgIGJvb3Rpbmcu
        CgogICAgSWYgeW91IGFyZSBhc3luY2hyb25vdXNseSBsb2FkaW5nIGNvZGUs
        IHlvdSBzaG91bGQgY2FsbAogICAgYGRlZmVyUmVhZGluZXNzKClgIHRvIGRl
        ZmVyIGJvb3RpbmcsIGFuZCB0aGVuIGNhbGwKICAgIGBhZHZhbmNlUmVhZGlu
        ZXNzKClgIG9uY2UgYWxsIG9mIHlvdXIgY29kZSBoYXMgZmluaXNoZWQKICAg
        IGxvYWRpbmcuCgogICAgQG1ldGhvZCBzY2hlZHVsZUluaXRpYWxpemUKICAq
        LwogIHNjaGVkdWxlSW5pdGlhbGl6ZTogZnVuY3Rpb24oKSB7CiAgICB2YXIg
        c2VsZiA9IHRoaXM7CgogICAgaWYgKCF0aGlzLiQgfHwgdGhpcy4kLmlzUmVh
        ZHkpIHsKICAgICAgRW1iZXIucnVuLnNjaGVkdWxlKCdhY3Rpb25zJywgc2Vs
        ZiwgJ19pbml0aWFsaXplJyk7CiAgICB9IGVsc2UgewogICAgICB0aGlzLiQo
        KS5yZWFkeShmdW5jdGlvbigpIHsKICAgICAgICBFbWJlci5ydW4oc2VsZiwg
        J19pbml0aWFsaXplJyk7CiAgICAgIH0pOwogICAgfQogIH0sCgogIC8qKgog
        ICAgVXNlIHRoaXMgdG8gZGVmZXIgcmVhZGluZXNzIHVudGlsIHNvbWUgY29u
        ZGl0aW9uIGlzIHRydWUuCgogICAgRXhhbXBsZToKCiAgICBgYGBqYXZhc2Ny
        aXB0CiAgICBBcHAgPSBFbWJlci5BcHBsaWNhdGlvbi5jcmVhdGUoKTsKICAg
        IEFwcC5kZWZlclJlYWRpbmVzcygpOwoKICAgIGpRdWVyeS5nZXRKU09OKCIv
        YXV0aC10b2tlbiIsIGZ1bmN0aW9uKHRva2VuKSB7CiAgICAgIEFwcC50b2tl
        biA9IHRva2VuOwogICAgICBBcHAuYWR2YW5jZVJlYWRpbmVzcygpOwogICAg
        fSk7CiAgICBgYGAKCiAgICBUaGlzIGFsbG93cyB5b3UgdG8gcGVyZm9ybSBh
        c3luY2hyb25vdXMgc2V0dXAgbG9naWMgYW5kIGRlZmVyCiAgICBib290aW5n
        IHlvdXIgYXBwbGljYXRpb24gdW50aWwgdGhlIHNldHVwIGhhcyBmaW5pc2hl
        ZC4KCiAgICBIb3dldmVyLCBpZiB0aGUgc2V0dXAgcmVxdWlyZXMgYSBsb2Fk
        aW5nIFVJLCBpdCBtaWdodCBiZSBiZXR0ZXIKICAgIHRvIHVzZSB0aGUgcm91
        dGVyIGZvciB0aGlzIHB1cnBvc2UuCgogICAgQG1ldGhvZCBkZWZlclJlYWRp
        bmVzcwogICovCiAgZGVmZXJSZWFkaW5lc3M6IGZ1bmN0aW9uKCkgewogICAg
        RW1iZXIuYXNzZXJ0KCJZb3UgbXVzdCBjYWxsIGRlZmVyUmVhZGluZXNzIG9u
        IGFuIGluc3RhbmNlIG9mIEVtYmVyLkFwcGxpY2F0aW9uIiwgdGhpcyBpbnN0
        YW5jZW9mIEVtYmVyLkFwcGxpY2F0aW9uKTsKICAgIEVtYmVyLmFzc2VydCgi
        WW91IGNhbm5vdCBkZWZlciByZWFkaW5lc3Mgc2luY2UgdGhlIGByZWFkeSgp
        YCBob29rIGhhcyBhbHJlYWR5IGJlZW4gY2FsbGVkLiIsIHRoaXMuX3JlYWRp
        bmVzc0RlZmVycmFscyA+IDApOwogICAgdGhpcy5fcmVhZGluZXNzRGVmZXJy
        YWxzKys7CiAgfSwKCiAgLyoqCiAgICBDYWxsIGBhZHZhbmNlUmVhZGluZXNz
        YCBhZnRlciBhbnkgYXN5bmNocm9ub3VzIHNldHVwIGxvZ2ljIGhhcyBjb21w
        bGV0ZWQuCiAgICBFYWNoIGNhbGwgdG8gYGRlZmVyUmVhZGluZXNzYCBtdXN0
        IGJlIG1hdGNoZWQgYnkgYSBjYWxsIHRvIGBhZHZhbmNlUmVhZGluZXNzYAog
        ICAgb3IgdGhlIGFwcGxpY2F0aW9uIHdpbGwgbmV2ZXIgYmVjb21lIHJlYWR5
        IGFuZCByb3V0aW5nIHdpbGwgbm90IGJlZ2luLgoKICAgIEBtZXRob2QgYWR2
        YW5jZVJlYWRpbmVzcwogICAgQHNlZSB7RW1iZXIuQXBwbGljYXRpb24jZGVm
        ZXJSZWFkaW5lc3N9CiAgKi8KICBhZHZhbmNlUmVhZGluZXNzOiBmdW5jdGlv
        bigpIHsKICAgIEVtYmVyLmFzc2VydCgiWW91IG11c3QgY2FsbCBhZHZhbmNl
        UmVhZGluZXNzIG9uIGFuIGluc3RhbmNlIG9mIEVtYmVyLkFwcGxpY2F0aW9u
        IiwgdGhpcyBpbnN0YW5jZW9mIEVtYmVyLkFwcGxpY2F0aW9uKTsKICAgIHRo
        aXMuX3JlYWRpbmVzc0RlZmVycmFscy0tOwoKICAgIGlmICh0aGlzLl9yZWFk
        aW5lc3NEZWZlcnJhbHMgPT09IDApIHsKICAgICAgRW1iZXIucnVuLm9uY2Uo
        dGhpcywgdGhpcy5kaWRCZWNvbWVSZWFkeSk7CiAgICB9CiAgfSwKCiAgLyoq
        CiAgICByZWdpc3RlcnMgYSBmYWN0b3J5IGZvciBsYXRlciBpbmplY3Rpb24K
        CiAgICBFeGFtcGxlOgoKICAgIGBgYGphdmFzY3JpcHQKICAgIEFwcCA9IEVt
        YmVyLkFwcGxpY2F0aW9uLmNyZWF0ZSgpOwoKICAgIEFwcC5QZXJzb24gID0g
        RW1iZXIuT2JqZWN0LmV4dGVuZCh7fSk7CiAgICBBcHAuT3JhbmdlICA9IEVt
        YmVyLk9iamVjdC5leHRlbmQoe30pOwogICAgQXBwLkVtYWlsICAgPSBFbWJl
        ci5PYmplY3QuZXh0ZW5kKHt9KTsKICAgIEFwcC5TZXNzaW9uID0gRW1iZXIu
        T2JqZWN0LmNyZWF0ZSh7fSk7CgogICAgQXBwLnJlZ2lzdGVyKCdtb2RlbDp1
        c2VyJywgQXBwLlBlcnNvbiwge3NpbmdsZXRvbjogZmFsc2UgfSk7CiAgICBB
        cHAucmVnaXN0ZXIoJ2ZydWl0OmZhdm9yaXRlJywgQXBwLk9yYW5nZSk7CiAg
        ICBBcHAucmVnaXN0ZXIoJ2NvbW11bmljYXRpb246bWFpbicsIEFwcC5FbWFp
        bCwge3NpbmdsZXRvbjogZmFsc2V9KTsKICAgIEFwcC5yZWdpc3Rlcignc2Vz
        c2lvbicsIEFwcC5TZXNzaW9uLCB7aW5zdGFudGlhdGU6IGZhbHNlfSk7CiAg
        ICBgYGAKCiAgICBAbWV0aG9kIHJlZ2lzdGVyCiAgICBAcGFyYW0gIGZ1bGxO
        YW1lIHtTdHJpbmd9IHR5cGU6bmFtZSAoZS5nLiwgJ21vZGVsOnVzZXInKQog
        ICAgQHBhcmFtICBmYWN0b3J5IHtGdW5jdGlvbn0gKGUuZy4sIEFwcC5QZXJz
        b24pCiAgICBAcGFyYW0gIG9wdGlvbnMge1N0cmluZ30gKG9wdGlvbmFsKQog
        ICoqLwogIHJlZ2lzdGVyOiBmdW5jdGlvbigpIHsKICAgIHZhciBjb250YWlu
        ZXIgPSB0aGlzLl9fY29udGFpbmVyX187CiAgICBjb250YWluZXIucmVnaXN0
        ZXIuYXBwbHkoY29udGFpbmVyLCBhcmd1bWVudHMpOwogIH0sCiAgLyoqCiAg
        ICBkZWZpbmVzIGFuIGluamVjdGlvbiBvciB0eXBlSW5qZWN0aW9uCgogICAg
        RXhhbXBsZToKCiAgICBgYGBqYXZhc2NyaXB0CiAgICBBcHAuaW5qZWN0KDxm
        dWxsX25hbWUgb3IgdHlwZT4sIDxwcm9wZXJ0eSBuYW1lPiwgPGZ1bGxfbmFt
        ZT4pCiAgICBBcHAuaW5qZWN0KCdtb2RlbDp1c2VyJywgJ2VtYWlsJywgJ21v
        ZGVsOmVtYWlsJykKICAgIEFwcC5pbmplY3QoJ21vZGVsJywgJ3NvdXJjZScs
        ICdzb3VyY2U6bWFpbicpCiAgICBgYGAKCiAgICBAbWV0aG9kIGluamVjdAog
        ICAgQHBhcmFtICBmYWN0b3J5TmFtZU9yVHlwZSB7U3RyaW5nfQogICAgQHBh
        cmFtICBwcm9wZXJ0eSB7U3RyaW5nfQogICAgQHBhcmFtICBpbmplY3Rpb25O
        YW1lIHtTdHJpbmd9CiAgKiovCiAgaW5qZWN0OiBmdW5jdGlvbigpIHsKICAg
        IHZhciBjb250YWluZXIgPSB0aGlzLl9fY29udGFpbmVyX187CiAgICBjb250
        YWluZXIuaW5qZWN0aW9uLmFwcGx5KGNvbnRhaW5lciwgYXJndW1lbnRzKTsK
        ICB9LAoKICAvKioKICAgIEBwcml2YXRlCiAgICBAZGVwcmVjYXRlZAoKICAg
        IENhbGxpbmcgaW5pdGlhbGl6ZSBtYW51YWxseSBpcyBub3Qgc3VwcG9ydGVk
        LgoKICAgIFBsZWFzZSBzZWUgRW1iZXIuQXBwbGljYXRpb24jYWR2YW5jZVJl
        YWRpbmVzcyBhbmQKICAgIEVtYmVyLkFwcGxpY2F0aW9uI2RlZmVyUmVhZGlu
        ZXNzLgoKICAgIEBtZXRob2QgaW5pdGlhbGl6ZQogICAqKi8KICBpbml0aWFs
        aXplOiBmdW5jdGlvbigpIHsKICAgIEVtYmVyLmRlcHJlY2F0ZSgnQ2FsbGlu
        ZyBpbml0aWFsaXplIG1hbnVhbGx5IGlzIG5vdCBzdXBwb3J0ZWQuIFBsZWFz
        ZSBzZWUgRW1iZXIuQXBwbGljYXRpb24jYWR2YW5jZVJlYWRpbmVzcyBhbmQg
        RW1iZXIuQXBwbGljYXRpb24jZGVmZXJSZWFkaW5lc3MnKTsKICB9LAogIC8q
        KgogICAgQHByaXZhdGUKCiAgICBJbml0aWFsaXplIHRoZSBhcHBsaWNhdGlv
        bi4gVGhpcyBoYXBwZW5zIGF1dG9tYXRpY2FsbHkuCgogICAgUnVuIGFueSBp
        bml0aWFsaXplcnMgYW5kIHJ1biB0aGUgYXBwbGljYXRpb24gbG9hZCBob29r
        LiBUaGVzZSBob29rcyBtYXkKICAgIGNob29zZSB0byBkZWZlciByZWFkaW5l
        c3MuIEZvciBleGFtcGxlLCBhbiBhdXRoZW50aWNhdGlvbiBob29rIG1pZ2h0
        IHdhbnQKICAgIHRvIGRlZmVyIHJlYWRpbmVzcyB1bnRpbCB0aGUgYXV0aCB0
        b2tlbiBoYXMgYmVlbiByZXRyaWV2ZWQuCgogICAgQG1ldGhvZCBfaW5pdGlh
        bGl6ZQogICovCiAgX2luaXRpYWxpemU6IGZ1bmN0aW9uKCkgewogICAgaWYg
        KHRoaXMuaXNEZXN0cm95ZWQpIHsgcmV0dXJuOyB9CgogICAgLy8gQXQgdGhp
        cyBwb2ludCwgdGhlIEFwcC5Sb3V0ZXIgbXVzdCBhbHJlYWR5IGJlIGFzc2ln
        bmVkCiAgICBpZiAodGhpcy5Sb3V0ZXIpIHsKICAgICAgdmFyIGNvbnRhaW5l
        ciA9IHRoaXMuX19jb250YWluZXJfXzsKICAgICAgY29udGFpbmVyLnVucmVn
        aXN0ZXIoJ3JvdXRlcjptYWluJyk7CiAgICAgIGNvbnRhaW5lci5yZWdpc3Rl
        cigncm91dGVyOm1haW4nLCB0aGlzLlJvdXRlcik7CiAgICB9CgogICAgdGhp
        cy5ydW5Jbml0aWFsaXplcnMoKTsKICAgIEVtYmVyLnJ1bkxvYWRIb29rcygn
        YXBwbGljYXRpb24nLCB0aGlzKTsKCiAgICAvLyBBdCB0aGlzIHBvaW50LCBh
        bnkgaW5pdGlhbGl6ZXJzIG9yIGxvYWQgaG9va3MgdGhhdCB3b3VsZCBoYXZl
        IHdhbnRlZAogICAgLy8gdG8gZGVmZXIgcmVhZGluZXNzIGhhdmUgZmlyZWQu
        IEluIGdlbmVyYWwsIGFkdmFuY2luZyByZWFkaW5lc3MgaGVyZQogICAgLy8g
        d2lsbCBwcm9jZWVkIHRvIGRpZEJlY29tZVJlYWR5LgogICAgdGhpcy5hZHZh
        bmNlUmVhZGluZXNzKCk7CgogICAgcmV0dXJuIHRoaXM7CiAgfSwKCiAgLyoq
        CiAgICBSZXNldCB0aGUgYXBwbGljYXRpb24uIFRoaXMgaXMgdHlwaWNhbGx5
        IHVzZWQgb25seSBpbiB0ZXN0cy4gSXQgY2xlYW5zIHVwCiAgICB0aGUgYXBw
        bGljYXRpb24gaW4gdGhlIGZvbGxvd2luZyBvcmRlcjoKCiAgICAxLiBEZWFj
        dGl2YXRlIGV4aXN0aW5nIHJvdXRlcwogICAgMi4gRGVzdHJveSBhbGwgb2Jq
        ZWN0cyBpbiB0aGUgY29udGFpbmVyCiAgICAzLiBDcmVhdGUgYSBuZXcgYXBw
        bGljYXRpb24gY29udGFpbmVyCiAgICA0LiBSZS1yb3V0ZSB0byB0aGUgZXhp
        c3RpbmcgdXJsCgogICAgVHlwaWNhbCBFeGFtcGxlOgoKICAgIGBgYGphdmFz
        Y3JpcHQKCiAgICB2YXIgQXBwOwoKICAgIEVtYmVyLnJ1bihmdW5jdGlvbigp
        IHsKICAgICAgQXBwID0gRW1iZXIuQXBwbGljYXRpb24uY3JlYXRlKCk7CiAg
        ICB9KTsKCiAgICBtb2R1bGUoImFjY2VwdGFuY2UgdGVzdCIsIHsKICAgICAg
        c2V0dXA6IGZ1bmN0aW9uKCkgewogICAgICAgIEFwcC5yZXNldCgpOwogICAg
        ICB9CiAgICB9KTsKCiAgICB0ZXN0KCJmaXJzdCB0ZXN0IiwgZnVuY3Rpb24o
        KSB7CiAgICAgIC8vIEFwcCBpcyBmcmVzaGx5IHJlc2V0CiAgICB9KTsKCiAg
        ICB0ZXN0KCJmaXJzdCB0ZXN0IiwgZnVuY3Rpb24oKSB7CiAgICAgIC8vIEFw
        cCBpcyBhZ2FpbiBmcmVzaGx5IHJlc2V0CiAgICB9KTsKICAgIGBgYAoKICAg
        IEFkdmFuY2VkIEV4YW1wbGU6CgogICAgT2NjYXNpb25hbGx5IHlvdSBtYXkg
        d2FudCB0byBwcmV2ZW50IHRoZSBhcHAgZnJvbSBpbml0aWFsaXppbmcgZHVy
        aW5nCiAgICBzZXR1cC4gVGhpcyBjb3VsZCBlbmFibGUgZXh0cmEgY29uZmln
        dXJhdGlvbiwgb3IgZW5hYmxlIGFzc2VydGluZyBwcmlvcgogICAgdG8gdGhl
        IGFwcCBiZWNvbWluZyByZWFkeS4KCiAgICBgYGBqYXZhc2NyaXB0CgogICAg
        dmFyIEFwcDsKCiAgICBFbWJlci5ydW4oZnVuY3Rpb24oKSB7CiAgICAgIEFw
        cCA9IEVtYmVyLkFwcGxpY2F0aW9uLmNyZWF0ZSgpOwogICAgfSk7CgogICAg
        bW9kdWxlKCJhY2NlcHRhbmNlIHRlc3QiLCB7CiAgICAgIHNldHVwOiBmdW5j
        dGlvbigpIHsKICAgICAgICBFbWJlci5ydW4oZnVuY3Rpb24oKSB7CiAgICAg
        ICAgICBBcHAucmVzZXQoKTsKICAgICAgICAgIEFwcC5kZWZlclJlYWRpbmVz
        cygpOwogICAgICAgIH0pOwogICAgICB9CiAgICB9KTsKCiAgICB0ZXN0KCJm
        aXJzdCB0ZXN0IiwgZnVuY3Rpb24oKSB7CiAgICAgIG9rKHRydWUsICdzb21l
        dGhpbmcgYmVmb3JlIGFwcCBpcyBpbml0aWFsaXplZCcpOwoKICAgICAgRW1i
        ZXIucnVuKGZ1bmN0aW9uKCkgewogICAgICAgIEFwcC5hZHZhbmNlUmVhZGlu
        ZXNzKCk7CiAgICAgIH0pOwogICAgICBvayh0cnVlLCAnc29tZXRoaW5nIGFm
        dGVyIGFwcCBpcyBpbml0aWFsaXplZCcpOwogICAgfSk7CiAgICBgYGAKCiAg
        ICBAbWV0aG9kIHJlc2V0CiAgKiovCiAgcmVzZXQ6IGZ1bmN0aW9uKCkgewog
        ICAgdGhpcy5fcmVhZGluZXNzRGVmZXJyYWxzID0gMTsKCiAgICBmdW5jdGlv
        biBoYW5kbGVSZXNldCgpIHsKICAgICAgdmFyIHJvdXRlciA9IHRoaXMuX19j
        b250YWluZXJfXy5sb29rdXAoJ3JvdXRlcjptYWluJyk7CiAgICAgIHJvdXRl
        ci5yZXNldCgpOwoKICAgICAgRW1iZXIucnVuKHRoaXMuX19jb250YWluZXJf
        XywgJ2Rlc3Ryb3knKTsKCiAgICAgIHRoaXMuYnVpbGRDb250YWluZXIoKTsK
        CiAgICAgIEVtYmVyLnJ1bi5zY2hlZHVsZSgnYWN0aW9ucycsIHRoaXMsIGZ1
        bmN0aW9uKCkgewogICAgICAgIHRoaXMuX2luaXRpYWxpemUoKTsKICAgICAg
        fSk7CiAgICB9CgogICAgRW1iZXIucnVuLmpvaW4odGhpcywgaGFuZGxlUmVz
        ZXQpOwogIH0sCgogIC8qKgogICAgQHByaXZhdGUKICAgIEBtZXRob2QgcnVu
        SW5pdGlhbGl6ZXJzCiAgKi8KICBydW5Jbml0aWFsaXplcnM6IGZ1bmN0aW9u
        KCkgewogICAgdmFyIGluaXRpYWxpemVycyA9IGdldCh0aGlzLmNvbnN0cnVj
        dG9yLCAnaW5pdGlhbGl6ZXJzJyksCiAgICAgICAgY29udGFpbmVyID0gdGhp
        cy5fX2NvbnRhaW5lcl9fLAogICAgICAgIGdyYXBoID0gbmV3IEVtYmVyLkRB
        RygpLAogICAgICAgIG5hbWVzcGFjZSA9IHRoaXMsCiAgICAgICAgbmFtZSwg
        aW5pdGlhbGl6ZXI7CgogICAgZm9yIChuYW1lIGluIGluaXRpYWxpemVycykg
        ewogICAgICBpbml0aWFsaXplciA9IGluaXRpYWxpemVyc1tuYW1lXTsKICAg
        ICAgZ3JhcGguYWRkRWRnZXMoaW5pdGlhbGl6ZXIubmFtZSwgaW5pdGlhbGl6
        ZXIuaW5pdGlhbGl6ZSwgaW5pdGlhbGl6ZXIuYmVmb3JlLCBpbml0aWFsaXpl
        ci5hZnRlcik7CiAgICB9CgogICAgZ3JhcGgudG9wc29ydChmdW5jdGlvbiAo
        dmVydGV4KSB7CiAgICAgIHZhciBpbml0aWFsaXplciA9IHZlcnRleC52YWx1
        ZTsKICAgICAgRW1iZXIuYXNzZXJ0KCJObyBhcHBsaWNhdGlvbiBpbml0aWFs
        aXplciBuYW1lZCAnIit2ZXJ0ZXgubmFtZSsiJyIsIGluaXRpYWxpemVyKTsK
        ICAgICAgaW5pdGlhbGl6ZXIoY29udGFpbmVyLCBuYW1lc3BhY2UpOwogICAg
        fSk7CiAgfSwKCiAgLyoqCiAgICBAcHJpdmF0ZQogICAgQG1ldGhvZCBkaWRC
        ZWNvbWVSZWFkeQogICovCiAgZGlkQmVjb21lUmVhZHk6IGZ1bmN0aW9uKCkg
        ewogICAgdGhpcy5zZXR1cEV2ZW50RGlzcGF0Y2hlcigpOwogICAgdGhpcy5y
        ZWFkeSgpOyAvLyB1c2VyIGhvb2sKICAgIHRoaXMuc3RhcnRSb3V0aW5nKCk7
        CgogICAgaWYgKCFFbWJlci50ZXN0aW5nKSB7CiAgICAgIC8vIEVhZ2VybHkg
        bmFtZSBhbGwgY2xhc3NlcyB0aGF0IGFyZSBhbHJlYWR5IGxvYWRlZAogICAg
        ICBFbWJlci5OYW1lc3BhY2UucHJvY2Vzc0FsbCgpOwogICAgICBFbWJlci5C
        T09URUQgPSB0cnVlOwogICAgfQoKICAgIHRoaXMucmVzb2x2ZSh0aGlzKTsK
        ICB9LAoKICAvKioKICAgIEBwcml2YXRlCgogICAgU2V0dXAgdXAgdGhlIGV2
        ZW50IGRpc3BhdGNoZXIgdG8gcmVjZWl2ZSBldmVudHMgb24gdGhlCiAgICBh
        cHBsaWNhdGlvbidzIGByb290RWxlbWVudGAgd2l0aCBhbnkgcmVnaXN0ZXJl
        ZAogICAgYGN1c3RvbUV2ZW50c2AuCgogICAgQG1ldGhvZCBzZXR1cEV2ZW50
        RGlzcGF0Y2hlcgogICovCiAgc2V0dXBFdmVudERpc3BhdGNoZXI6IGZ1bmN0
        aW9uKCkgewogICAgdmFyIGN1c3RvbUV2ZW50cyA9IGdldCh0aGlzLCAnY3Vz
        dG9tRXZlbnRzJyksCiAgICAgICAgcm9vdEVsZW1lbnQgPSBnZXQodGhpcywg
        J3Jvb3RFbGVtZW50JyksCiAgICAgICAgZGlzcGF0Y2hlciA9IHRoaXMuX19j
        b250YWluZXJfXy5sb29rdXAoJ2V2ZW50X2Rpc3BhdGNoZXI6bWFpbicpOwoK
        ICAgIHNldCh0aGlzLCAnZXZlbnREaXNwYXRjaGVyJywgZGlzcGF0Y2hlcik7
        CiAgICBkaXNwYXRjaGVyLnNldHVwKGN1c3RvbUV2ZW50cywgcm9vdEVsZW1l
        bnQpOwogIH0sCgogIC8qKgogICAgQHByaXZhdGUKCiAgICB0cmlnZ2VyIGEg
        bmV3IGNhbGwgdG8gYHJvdXRlYCB3aGVuZXZlciB0aGUgVVJMIGNoYW5nZXMu
        CiAgICBJZiB0aGUgYXBwbGljYXRpb24gaGFzIGEgcm91dGVyLCB1c2UgaXQg
        dG8gcm91dGUgdG8gdGhlIGN1cnJlbnQgVVJMLCBhbmQKCiAgICBAbWV0aG9k
        IHN0YXJ0Um91dGluZwogICAgQHByb3BlcnR5IHJvdXRlciB7RW1iZXIuUm91
        dGVyfQogICovCiAgc3RhcnRSb3V0aW5nOiBmdW5jdGlvbigpIHsKICAgIHZh
        ciByb3V0ZXIgPSB0aGlzLl9fY29udGFpbmVyX18ubG9va3VwKCdyb3V0ZXI6
        bWFpbicpOwogICAgaWYgKCFyb3V0ZXIpIHsgcmV0dXJuOyB9CgogICAgcm91
        dGVyLnN0YXJ0Um91dGluZygpOwogIH0sCgogIGhhbmRsZVVSTDogZnVuY3Rp
        b24odXJsKSB7CiAgICB2YXIgcm91dGVyID0gdGhpcy5fX2NvbnRhaW5lcl9f
        Lmxvb2t1cCgncm91dGVyOm1haW4nKTsKCiAgICByb3V0ZXIuaGFuZGxlVVJM
        KHVybCk7CiAgfSwKCiAgLyoqCiAgICBDYWxsZWQgd2hlbiB0aGUgQXBwbGlj
        YXRpb24gaGFzIGJlY29tZSByZWFkeS4KICAgIFRoZSBjYWxsIHdpbGwgYmUg
        ZGVsYXllZCB1bnRpbCB0aGUgRE9NIGhhcyBiZWNvbWUgcmVhZHkuCgogICAg
        QGV2ZW50IHJlYWR5CiAgKi8KICByZWFkeTogRW1iZXIuSywKCiAgLyoqCiAg
        ICBAZGVwcmVjYXRlZCBVc2UgJ1Jlc29sdmVyJyBpbnN0ZWFkCiAgICBTZXQg
        dGhpcyB0byBwcm92aWRlIGFuIGFsdGVybmF0ZSBjbGFzcyB0byBgRW1iZXIu
        RGVmYXVsdFJlc29sdmVyYAoKCiAgICBAcHJvcGVydHkgcmVzb2x2ZXIKICAq
        LwogIHJlc29sdmVyOiBudWxsLAoKICAvKioKICAgIFNldCB0aGlzIHRvIHBy
        b3ZpZGUgYW4gYWx0ZXJuYXRlIGNsYXNzIHRvIGBFbWJlci5EZWZhdWx0UmVz
        b2x2ZXJgCgogICAgQHByb3BlcnR5IHJlc29sdmVyCiAgKi8KICBSZXNvbHZl
        cjogbnVsbCwKCiAgd2lsbERlc3Ryb3k6IGZ1bmN0aW9uKCkgewogICAgRW1i
        ZXIuQk9PVEVEID0gZmFsc2U7CgogICAgdGhpcy5fX2NvbnRhaW5lcl9fLmRl
        c3Ryb3koKTsKICB9LAoKICBpbml0aWFsaXplcjogZnVuY3Rpb24ob3B0aW9u
        cykgewogICAgdGhpcy5jb25zdHJ1Y3Rvci5pbml0aWFsaXplcihvcHRpb25z
        KTsKICB9Cn0pOwoKRW1iZXIuQXBwbGljYXRpb24ucmVvcGVuQ2xhc3Moewog
        IGluaXRpYWxpemVyczoge30sCiAgaW5pdGlhbGl6ZXI6IGZ1bmN0aW9uKGlu
        aXRpYWxpemVyKSB7CiAgICAvLyBJZiB0aGlzIGlzIHRoZSBmaXJzdCBpbml0
        aWFsaXplciBiZWluZyBhZGRlZCB0byBhIHN1YmNsYXNzLCB3ZSBhcmUgZ29p
        bmcgdG8gcmVvcGVuIHRoZSBjbGFzcwogICAgLy8gdG8gbWFrZSBzdXJlIHdl
        IGhhdmUgYSBuZXcgYGluaXRpYWxpemVyc2Agb2JqZWN0LCB3aGljaCBleHRl
        bmRzIGZyb20gdGhlIHBhcmVudCBjbGFzcycgdXNpbmcKICAgIC8vIHByb3Rv
        dHlwYWwgaW5oZXJpdGFuY2UuIFdpdGhvdXQgdGhpcywgYXR0ZW1wdGluZyB0
        byBhZGQgaW5pdGlhbGl6ZXJzIHRvIHRoZSBzdWJjbGFzcyB3b3VsZAogICAg
        Ly8gcG9sbHV0ZSB0aGUgcGFyZW50IGNsYXNzIGFzIHdlbGwgYXMgb3RoZXIg
        c3ViY2xhc3Nlcy4KICAgIGlmICh0aGlzLnN1cGVyY2xhc3MuaW5pdGlhbGl6
        ZXJzICE9PSB1bmRlZmluZWQgJiYgdGhpcy5zdXBlcmNsYXNzLmluaXRpYWxp
        emVycyA9PT0gdGhpcy5pbml0aWFsaXplcnMpIHsKICAgICAgdGhpcy5yZW9w
        ZW5DbGFzcyh7CiAgICAgICAgaW5pdGlhbGl6ZXJzOiBFbWJlci5jcmVhdGUo
        dGhpcy5pbml0aWFsaXplcnMpCiAgICAgIH0pOwogICAgfQoKICAgIEVtYmVy
        LmFzc2VydCgiVGhlIGluaXRpYWxpemVyICciICsgaW5pdGlhbGl6ZXIubmFt
        ZSArICInIGhhcyBhbHJlYWR5IGJlZW4gcmVnaXN0ZXJlZCIsICF0aGlzLmlu
        aXRpYWxpemVyc1tpbml0aWFsaXplci5uYW1lXSk7CiAgICBFbWJlci5hc3Nl
        cnQoIkFuIGluaXRpYWxpemVyIGNhbm5vdCBiZSByZWdpc3RlcmVkIHdpdGgg
        Ym90aCBhIGJlZm9yZSBhbmQgYW4gYWZ0ZXIiLCAhKGluaXRpYWxpemVyLmJl
        Zm9yZSAmJiBpbml0aWFsaXplci5hZnRlcikpOwogICAgRW1iZXIuYXNzZXJ0
        KCJBbiBpbml0aWFsaXplciBjYW5ub3QgYmUgcmVnaXN0ZXJlZCB3aXRob3V0
        IGFuIGluaXRpYWxpemUgZnVuY3Rpb24iLCBFbWJlci5jYW5JbnZva2UoaW5p
        dGlhbGl6ZXIsICdpbml0aWFsaXplJykpOwoKICAgIHRoaXMuaW5pdGlhbGl6
        ZXJzW2luaXRpYWxpemVyLm5hbWVdID0gaW5pdGlhbGl6ZXI7CiAgfSwKCiAg
        LyoqCiAgICBAcHJpdmF0ZQoKICAgIFRoaXMgY3JlYXRlcyBhIGNvbnRhaW5l
        ciB3aXRoIHRoZSBkZWZhdWx0IEVtYmVyIG5hbWluZyBjb252ZW50aW9ucy4K
        CiAgICBJdCBhbHNvIGNvbmZpZ3VyZXMgdGhlIGNvbnRhaW5lcjoKCiAgICAq
        IHJlZ2lzdGVyZWQgdmlld3MgYXJlIGNyZWF0ZWQgZXZlcnkgdGltZSB0aGV5
        IGFyZSBsb29rZWQgdXAgKHRoZXkgYXJlCiAgICAgIG5vdCBzaW5nbGV0b25z
        KQogICAgKiByZWdpc3RlcmVkIHRlbXBsYXRlcyBhcmUgbm90IGZhY3Rvcmll
        czsgdGhlIHJlZ2lzdGVyZWQgdmFsdWUgaXMKICAgICAgcmV0dXJuZWQgZGly
        ZWN0bHkuCiAgICAqIHRoZSByb3V0ZXIgcmVjZWl2ZXMgdGhlIGFwcGxpY2F0
        aW9uIGFzIGl0cyBgbmFtZXNwYWNlYCBwcm9wZXJ0eQogICAgKiBhbGwgY29u
        dHJvbGxlcnMgcmVjZWl2ZSB0aGUgcm91dGVyIGFzIHRoZWlyIGB0YXJnZXRg
        IGFuZCBgY29udHJvbGxlcnNgCiAgICAgIHByb3BlcnRpZXMKICAgICogYWxs
        IGNvbnRyb2xsZXJzIHJlY2VpdmUgdGhlIGFwcGxpY2F0aW9uIGFzIHRoZWly
        IGBuYW1lc3BhY2VgIHByb3BlcnR5CiAgICAqIHRoZSBhcHBsaWNhdGlvbiB2
        aWV3IHJlY2VpdmVzIHRoZSBhcHBsaWNhdGlvbiBjb250cm9sbGVyIGFzIGl0
        cwogICAgICBgY29udHJvbGxlcmAgcHJvcGVydHkKICAgICogdGhlIGFwcGxp
        Y2F0aW9uIHZpZXcgcmVjZWl2ZXMgdGhlIGFwcGxpY2F0aW9uIHRlbXBsYXRl
        IGFzIGl0cwogICAgICBgZGVmYXVsdFRlbXBsYXRlYCBwcm9wZXJ0eQoKICAg
        IEBtZXRob2QgYnVpbGRDb250YWluZXIKICAgIEBzdGF0aWMKICAgIEBwYXJh
        bSB7RW1iZXIuQXBwbGljYXRpb259IG5hbWVzcGFjZSB0aGUgYXBwbGljYXRp
        b24gdG8gYnVpbGQgdGhlCiAgICAgIGNvbnRhaW5lciBmb3IuCiAgICBAcmV0
        dXJuIHtFbWJlci5Db250YWluZXJ9IHRoZSBidWlsdCBjb250YWluZXIKICAq
        LwogIGJ1aWxkQ29udGFpbmVyOiBmdW5jdGlvbihuYW1lc3BhY2UpIHsKICAg
        IHZhciBjb250YWluZXIgPSBuZXcgRW1iZXIuQ29udGFpbmVyKCk7CgogICAg
        RW1iZXIuQ29udGFpbmVyLmRlZmF1bHRDb250YWluZXIgPSBuZXcgRGVwcmVj
        YXRlZENvbnRhaW5lcihjb250YWluZXIpOwoKICAgIGNvbnRhaW5lci5zZXQg
        PSBFbWJlci5zZXQ7CiAgICBjb250YWluZXIucmVzb2x2ZXIgID0gcmVzb2x2
        ZXJGb3IobmFtZXNwYWNlKTsKICAgIGNvbnRhaW5lci5ub3JtYWxpemUgPSBj
        b250YWluZXIucmVzb2x2ZXIubm9ybWFsaXplOwogICAgY29udGFpbmVyLmRl
        c2NyaWJlICA9IGNvbnRhaW5lci5yZXNvbHZlci5kZXNjcmliZTsKICAgIGNv
        bnRhaW5lci5tYWtlVG9TdHJpbmcgPSBjb250YWluZXIucmVzb2x2ZXIubWFr
        ZVRvU3RyaW5nOwoKICAgIGNvbnRhaW5lci5vcHRpb25zRm9yVHlwZSgnY29t
        cG9uZW50JywgeyBzaW5nbGV0b246IGZhbHNlIH0pOwogICAgY29udGFpbmVy
        Lm9wdGlvbnNGb3JUeXBlKCd2aWV3JywgeyBzaW5nbGV0b246IGZhbHNlIH0p
        OwogICAgY29udGFpbmVyLm9wdGlvbnNGb3JUeXBlKCd0ZW1wbGF0ZScsIHsg
        aW5zdGFudGlhdGU6IGZhbHNlIH0pOwoKICAgIAogICAgICBjb250YWluZXIu
        b3B0aW9uc0ZvclR5cGUoJ2hlbHBlcicsIHsgaW5zdGFudGlhdGU6IGZhbHNl
        IH0pOwogICAgCgogICAgY29udGFpbmVyLnJlZ2lzdGVyKCdhcHBsaWNhdGlv
        bjptYWluJywgbmFtZXNwYWNlLCB7IGluc3RhbnRpYXRlOiBmYWxzZSB9KTsK
        CiAgICBjb250YWluZXIucmVnaXN0ZXIoJ2NvbnRyb2xsZXI6YmFzaWMnLCBF
        bWJlci5Db250cm9sbGVyLCB7IGluc3RhbnRpYXRlOiBmYWxzZSB9KTsKICAg
        IGNvbnRhaW5lci5yZWdpc3RlcignY29udHJvbGxlcjpvYmplY3QnLCBFbWJl
        ci5PYmplY3RDb250cm9sbGVyLCB7IGluc3RhbnRpYXRlOiBmYWxzZSB9KTsK
        ICAgIGNvbnRhaW5lci5yZWdpc3RlcignY29udHJvbGxlcjphcnJheScsIEVt
        YmVyLkFycmF5Q29udHJvbGxlciwgeyBpbnN0YW50aWF0ZTogZmFsc2UgfSk7
        CiAgICBjb250YWluZXIucmVnaXN0ZXIoJ3JvdXRlOmJhc2ljJywgRW1iZXIu
        Um91dGUsIHsgaW5zdGFudGlhdGU6IGZhbHNlIH0pOwogICAgY29udGFpbmVy
        LnJlZ2lzdGVyKCdldmVudF9kaXNwYXRjaGVyOm1haW4nLCBFbWJlci5FdmVu
        dERpc3BhdGNoZXIpOwoKICAgIGNvbnRhaW5lci5yZWdpc3Rlcigncm91dGVy
        Om1haW4nLCAgRW1iZXIuUm91dGVyKTsKICAgIGNvbnRhaW5lci5pbmplY3Rp
        b24oJ3JvdXRlcjptYWluJywgJ25hbWVzcGFjZScsICdhcHBsaWNhdGlvbjpt
        YWluJyk7CgogICAgY29udGFpbmVyLmluamVjdGlvbignY29udHJvbGxlcics
        ICd0YXJnZXQnLCAncm91dGVyOm1haW4nKTsKICAgIGNvbnRhaW5lci5pbmpl
        Y3Rpb24oJ2NvbnRyb2xsZXInLCAnbmFtZXNwYWNlJywgJ2FwcGxpY2F0aW9u
        Om1haW4nKTsKCiAgICBjb250YWluZXIuaW5qZWN0aW9uKCdyb3V0ZScsICdy
        b3V0ZXInLCAncm91dGVyOm1haW4nKTsKCiAgICByZXR1cm4gY29udGFpbmVy
        OwogIH0KfSk7CgovKioKICBAcHJpdmF0ZQoKICBUaGlzIGZ1bmN0aW9uIGRl
        ZmluZXMgdGhlIGRlZmF1bHQgbG9va3VwIHJ1bGVzIGZvciBjb250YWluZXIg
        bG9va3VwczoKCiAgKiB0ZW1wbGF0ZXMgYXJlIGxvb2tlZCB1cCBvbiBgRW1i
        ZXIuVEVNUExBVEVTYAogICogb3RoZXIgbmFtZXMgYXJlIGxvb2tlZCB1cCBv
        biB0aGUgYXBwbGljYXRpb24gYWZ0ZXIgY2xhc3NpZnlpbmcgdGhlIG5hbWUu
        CiAgICBGb3IgZXhhbXBsZSwgYGNvbnRyb2xsZXI6cG9zdGAgbG9va3MgdXAg
        YEFwcC5Qb3N0Q29udHJvbGxlcmAgYnkgZGVmYXVsdC4KICAqIGlmIHRoZSBk
        ZWZhdWx0IGxvb2t1cCBmYWlscywgbG9vayBmb3IgcmVnaXN0ZXJlZCBjbGFz
        c2VzIG9uIHRoZSBjb250YWluZXIKCiAgVGhpcyBhbGxvd3MgdGhlIGFwcGxp
        Y2F0aW9uIHRvIHJlZ2lzdGVyIGRlZmF1bHQgaW5qZWN0aW9ucyBpbiB0aGUg
        Y29udGFpbmVyCiAgdGhhdCBjb3VsZCBiZSBvdmVycmlkZGVuIGJ5IHRoZSBu
        b3JtYWwgbmFtaW5nIGNvbnZlbnRpb24uCgogIEBtZXRob2QgcmVzb2x2ZXJG
        b3IKICBAcGFyYW0ge0VtYmVyLk5hbWVzcGFjZX0gbmFtZXNwYWNlIHRoZSBu
        YW1lc3BhY2UgdG8gbG9vayBmb3IgY2xhc3NlcwogIEByZXR1cm4geyp9IHRo
        ZSByZXNvbHZlZCB2YWx1ZSBmb3IgYSBnaXZlbiBsb29rdXAKKi8KZnVuY3Rp
        b24gcmVzb2x2ZXJGb3IobmFtZXNwYWNlKSB7CiAgaWYgKG5hbWVzcGFjZS5n
        ZXQoJ3Jlc29sdmVyJykpIHsKICAgIEVtYmVyLmRlcHJlY2F0ZSgnQXBwbGlj
        YXRpb24ucmVzb2x2ZXIgaXMgZGVwcmVjYXRlZCBpbiBmYXZvciBvZiBBcHBs
        aWNhdGlvbi5SZXNvbHZlcicsIGZhbHNlKTsKICB9CgogIHZhciBSZXNvbHZl
        ckNsYXNzID0gbmFtZXNwYWNlLmdldCgncmVzb2x2ZXInKSB8fCBuYW1lc3Bh
        Y2UuZ2V0KCdSZXNvbHZlcicpIHx8IEVtYmVyLkRlZmF1bHRSZXNvbHZlcjsK
        ICB2YXIgcmVzb2x2ZXIgPSBSZXNvbHZlckNsYXNzLmNyZWF0ZSh7CiAgICBu
        YW1lc3BhY2U6IG5hbWVzcGFjZQogIH0pOwoKICBmdW5jdGlvbiByZXNvbHZl
        KGZ1bGxOYW1lKSB7CiAgICByZXR1cm4gcmVzb2x2ZXIucmVzb2x2ZShmdWxs
        TmFtZSk7CiAgfQoKICByZXNvbHZlLmRlc2NyaWJlID0gZnVuY3Rpb24oZnVs
        bE5hbWUpIHsKICAgIHJldHVybiByZXNvbHZlci5sb29rdXBEZXNjcmlwdGlv
        bihmdWxsTmFtZSk7CiAgfTsKCiAgcmVzb2x2ZS5tYWtlVG9TdHJpbmcgPSBm
        dW5jdGlvbihmYWN0b3J5LCBmdWxsTmFtZSkgewogICAgcmV0dXJuIHJlc29s
        dmVyLm1ha2VUb1N0cmluZyhmYWN0b3J5LCBmdWxsTmFtZSk7CiAgfTsKCiAg
        cmVzb2x2ZS5ub3JtYWxpemUgPSBmdW5jdGlvbihmdWxsTmFtZSkgewogICAg
        aWYgKHJlc29sdmVyLm5vcm1hbGl6ZSkgewogICAgICByZXR1cm4gcmVzb2x2
        ZXIubm9ybWFsaXplKGZ1bGxOYW1lKTsKICAgIH0gZWxzZSB7CiAgICAgIEVt
        YmVyLmRlcHJlY2F0ZSgnVGhlIFJlc29sdmVyIHNob3VsZCBub3cgcHJvdmlk
        ZSBhIFwnbm9ybWFsaXplXCcgZnVuY3Rpb24nLCBmYWxzZSk7CiAgICAgIHJl
        dHVybiBmdWxsTmFtZTsKICAgIH0KICB9OwoKICByZXR1cm4gcmVzb2x2ZTsK
        fQoKRW1iZXIucnVuTG9hZEhvb2tzKCdFbWJlci5BcHBsaWNhdGlvbicsIEVt
        YmVyLkFwcGxpY2F0aW9uKTsKCn0pKCk7CgoKCihmdW5jdGlvbigpIHsKCn0p
        KCk7CgoKCihmdW5jdGlvbigpIHsKLyoqCkBtb2R1bGUgZW1iZXIKQHN1Ym1v
        ZHVsZSBlbWJlci1hcHBsaWNhdGlvbgoqLwoKdmFyIGdldCA9IEVtYmVyLmdl
        dCwgc2V0ID0gRW1iZXIuc2V0OwoKZnVuY3Rpb24gdmVyaWZ5TmVlZHNEZXBl
        bmRlbmNpZXMoY29udHJvbGxlciwgY29udGFpbmVyLCBuZWVkcykgewogIHZh
        ciBkZXBlbmRlbmN5LCBpLCBsOwoKICBmb3IgKGk9MCwgbD1uZWVkcy5sZW5n
        dGg7IGk8bDsgaSsrKSB7CiAgICBkZXBlbmRlbmN5ID0gbmVlZHNbaV07CiAg
        ICBpZiAoZGVwZW5kZW5jeS5pbmRleE9mKCc6JykgPT09IC0xKSB7CiAgICAg
        IGRlcGVuZGVuY3kgPSAiY29udHJvbGxlcjoiICsgZGVwZW5kZW5jeTsKICAg
        IH0KCiAgICAvLyBTdHJ1Y3R1cmUgYXNzZXJ0IHRvIHN0aWxsIGRvIHZlcmlm
        aWNhdGlvbiBidXQgbm90IHN0cmluZyBjb25jYXQgaW4gcHJvZHVjdGlvbgog
        ICAgaWYgKCFjb250YWluZXIuaGFzKGRlcGVuZGVuY3kpKSB7CiAgICAgIEVt
        YmVyLmFzc2VydChFbWJlci5pbnNwZWN0KGNvbnRyb2xsZXIpICsgIiBuZWVk
        cyAiICsgZGVwZW5kZW5jeSArICIgYnV0IGl0IGRvZXMgbm90IGV4aXN0Iiwg
        ZmFsc2UpOwogICAgfQogIH0KfQoKLyoqCiAgQGNsYXNzIENvbnRyb2xsZXJN
        aXhpbgogIEBuYW1lc3BhY2UgRW1iZXIKKi8KRW1iZXIuQ29udHJvbGxlck1p
        eGluLnJlb3Blbih7CiAgY29uY2F0ZW5hdGVkUHJvcGVydGllczogWyduZWVk
        cyddLAoKICAvKioKICAgIEFuIGFycmF5IG9mIG90aGVyIGNvbnRyb2xsZXIg
        b2JqZWN0cyBhdmFpbGFibGUgaW5zaWRlCiAgICBpbnN0YW5jZXMgb2YgdGhp
        cyBjb250cm9sbGVyIHZpYSB0aGUgYGNvbnRyb2xsZXJzYAogICAgcHJvcGVy
        dHk6CgogICAgRm9yIGV4YW1wbGUsIHdoZW4geW91IGRlZmluZSBhIGNvbnRy
        b2xsZXI6CgogICAgYGBgamF2YXNjcmlwdAogICAgQXBwLkNvbW1lbnRzQ29u
        dHJvbGxlciA9IEVtYmVyLkFycmF5Q29udHJvbGxlci5leHRlbmQoewogICAg
        ICBuZWVkczogWydwb3N0J10KICAgIH0pOwogICAgYGBgCgogICAgVGhlIGFw
        cGxpY2F0aW9uJ3Mgc2luZ2xlIGluc3RhbmNlIG9mIHRoZXNlIG90aGVyCiAg
        ICBjb250cm9sbGVycyBhcmUgYWNjZXNzaWJsZSBieSBuYW1lIHRocm91Z2gg
        dGhlCiAgICBgY29udHJvbGxlcnNgIHByb3BlcnR5OgoKICAgIGBgYGphdmFz
        Y3JpcHQKICAgIHRoaXMuZ2V0KCdjb250cm9sbGVycy5wb3N0Jyk7IC8vIGlu
        c3RhbmNlIG9mIEFwcC5Qb3N0Q29udHJvbGxlcgogICAgYGBgCgogICAgVGhp
        cyBpcyBvbmx5IGF2YWlsYWJsZSBmb3Igc2luZ2xldG9uIGNvbnRyb2xsZXJz
        LgoKICAgIEBwcm9wZXJ0eSB7QXJyYXl9IG5lZWRzCiAgICBAZGVmYXVsdCBb
        XQogICovCiAgbmVlZHM6IFtdLAoKICBpbml0OiBmdW5jdGlvbigpIHsKICAg
        IHZhciBuZWVkcyA9IGdldCh0aGlzLCAnbmVlZHMnKSwKICAgIGxlbmd0aCA9
        IGdldChuZWVkcywgJ2xlbmd0aCcpOwoKICAgIGlmIChsZW5ndGggPiAwKSB7
        CiAgICAgIEVtYmVyLmFzc2VydCgnIGAnICsgRW1iZXIuaW5zcGVjdCh0aGlz
        KSArICcgc3BlY2lmaWVzIGBuZWVkc2AsIGJ1dCBkb2VzIG5vdCBoYXZlIGEg
        Y29udGFpbmVyLiBQbGVhc2UgZW5zdXJlIHRoaXMgY29udHJvbGxlciB3YXMg
        aW5zdGFudGlhdGVkIHdpdGggYSBjb250YWluZXIuJywgdGhpcy5jb250YWlu
        ZXIpOwoKICAgICAgdmVyaWZ5TmVlZHNEZXBlbmRlbmNpZXModGhpcywgdGhp
        cy5jb250YWluZXIsIG5lZWRzKTsKCiAgICAgIC8vIGlmIG5lZWRzIHRoZW4g
        aW5pdGlhbGl6ZSBjb250cm9sbGVycyBwcm94eQogICAgICBnZXQodGhpcywg
        J2NvbnRyb2xsZXJzJyk7CiAgICB9CgogICAgdGhpcy5fc3VwZXIuYXBwbHko
        dGhpcywgYXJndW1lbnRzKTsKICB9LAoKICAvKioKICAgIEBtZXRob2QgY29u
        dHJvbGxlckZvcgogICAgQHNlZSB7RW1iZXIuUm91dGUjY29udHJvbGxlckZv
        cn0KICAgIEBkZXByZWNhdGVkIFVzZSBgbmVlZHNgIGluc3RlYWQKICAqLwog
        IGNvbnRyb2xsZXJGb3I6IGZ1bmN0aW9uKGNvbnRyb2xsZXJOYW1lKSB7CiAg
        ICBFbWJlci5kZXByZWNhdGUoIkNvbnRyb2xsZXIjY29udHJvbGxlckZvciBp
        cyBkZXByZWNhdGVkLCBwbGVhc2UgdXNlIENvbnRyb2xsZXIjbmVlZHMgaW5z
        dGVhZCIpOwogICAgcmV0dXJuIEVtYmVyLmNvbnRyb2xsZXJGb3IoZ2V0KHRo
        aXMsICdjb250YWluZXInKSwgY29udHJvbGxlck5hbWUpOwogIH0sCgogIC8q
        KgogICAgU3RvcmVzIHRoZSBpbnN0YW5jZXMgb2Ygb3RoZXIgY29udHJvbGxl
        cnMgYXZhaWxhYmxlIGZyb20gd2l0aGluCiAgICB0aGlzIGNvbnRyb2xsZXIu
        IEFueSBjb250cm9sbGVyIGxpc3RlZCBieSBuYW1lIGluIHRoZSBgbmVlZHNg
        CiAgICBwcm9wZXJ0eSB3aWxsIGJlIGFjY2Vzc2libGUgYnkgbmFtZSB0aHJv
        dWdoIHRoaXMgcHJvcGVydHkuCgogICAgYGBgamF2YXNjcmlwdAogICAgQXBw
        LkNvbW1lbnRzQ29udHJvbGxlciA9IEVtYmVyLkFycmF5Q29udHJvbGxlci5l
        eHRlbmQoewogICAgICBuZWVkczogWydwb3N0J10sCiAgICAgIHBvc3RUaXRs
        ZTogZnVuY3Rpb24oKXsKICAgICAgICB2YXIgY3VycmVudFBvc3QgPSB0aGlz
        LmdldCgnY29udHJvbGxlcnMucG9zdCcpOyAvLyBpbnN0YW5jZSBvZiBBcHAu
        UG9zdENvbnRyb2xsZXIKICAgICAgICByZXR1cm4gY3VycmVudFBvc3QuZ2V0
        KCd0aXRsZScpOwogICAgICB9LnByb3BlcnR5KCdjb250cm9sbGVycy5wb3N0
        LnRpdGxlJykKICAgIH0pOwogICAgYGBgCgogICAgQHNlZSB7RW1iZXIuQ29u
        dHJvbGxlck1peGluI25lZWRzfQogICAgQHByb3BlcnR5IHtPYmplY3R9IGNv
        bnRyb2xsZXJzCiAgICBAZGVmYXVsdCBudWxsCiAgKi8KICBjb250cm9sbGVy
        czogRW1iZXIuY29tcHV0ZWQoZnVuY3Rpb24oKSB7CiAgICB2YXIgY29udHJv
        bGxlciA9IHRoaXM7CgogICAgcmV0dXJuIHsKICAgICAgbmVlZHM6IGdldChj
        b250cm9sbGVyLCAnbmVlZHMnKSwKICAgICAgY29udGFpbmVyOiBnZXQoY29u
        dHJvbGxlciwgJ2NvbnRhaW5lcicpLAogICAgICB1bmtub3duUHJvcGVydHk6
        IGZ1bmN0aW9uKGNvbnRyb2xsZXJOYW1lKSB7CiAgICAgICAgdmFyIG5lZWRz
        ID0gdGhpcy5uZWVkcywKICAgICAgICAgIGRlcGVuZGVuY3ksIGksIGw7CiAg
        ICAgICAgZm9yIChpPTAsIGw9bmVlZHMubGVuZ3RoOyBpPGw7IGkrKykgewog
        ICAgICAgICAgZGVwZW5kZW5jeSA9IG5lZWRzW2ldOwogICAgICAgICAgaWYg
        KGRlcGVuZGVuY3kgPT09IGNvbnRyb2xsZXJOYW1lKSB7CiAgICAgICAgICAg
        IHJldHVybiB0aGlzLmNvbnRhaW5lci5sb29rdXAoJ2NvbnRyb2xsZXI6JyAr
        IGNvbnRyb2xsZXJOYW1lKTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAg
        ICAgIHZhciBlcnJvck1lc3NhZ2UgPSBFbWJlci5pbnNwZWN0KGNvbnRyb2xs
        ZXIpICsgJyNuZWVkcyBkb2VzIG5vdCBpbmNsdWRlIGAnICsgY29udHJvbGxl
        ck5hbWUgKyAnYC4gVG8gYWNjZXNzIHRoZSAnICsgY29udHJvbGxlck5hbWUg
        KyAnIGNvbnRyb2xsZXIgZnJvbSAnICsgRW1iZXIuaW5zcGVjdChjb250cm9s
        bGVyKSArICcsICcgKyBFbWJlci5pbnNwZWN0KGNvbnRyb2xsZXIpICsgJyBz
        aG91bGQgaGF2ZSBhIGBuZWVkc2AgcHJvcGVydHkgdGhhdCBpcyBhbiBhcnJh
        eSBvZiB0aGUgY29udHJvbGxlcnMgaXQgaGFzIGFjY2VzcyB0by4nOwogICAg
        ICAgIHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihlcnJvck1lc3NhZ2UpOwog
        ICAgICB9CiAgICB9OwogIH0pLnJlYWRPbmx5KCkKfSk7Cgp9KSgpOwoKCgoo
        ZnVuY3Rpb24oKSB7Cgp9KSgpOwoKCgooZnVuY3Rpb24oKSB7Ci8qKgpFbWJl
        ciBBcHBsaWNhdGlvbgoKQG1vZHVsZSBlbWJlcgpAc3VibW9kdWxlIGVtYmVy
        LWFwcGxpY2F0aW9uCkByZXF1aXJlcyBlbWJlci12aWV3cywgZW1iZXItcm91
        dGluZwoqLwoKfSkoKTsKCihmdW5jdGlvbigpIHsKLyoqCkBtb2R1bGUgZW1i
        ZXIKQHN1Ym1vZHVsZSBlbWJlci1leHRlbnNpb24tc3VwcG9ydAoqLwovKioK
        ICBUaGUgYERhdGFBZGFwdGVyYCBoZWxwcyBhIGRhdGEgcGVyc2lzdGVuY2Ug
        bGlicmFyeQogIGludGVyZmFjZSB3aXRoIHRvb2xzIHRoYXQgZGVidWcgRW1i
        ZXIgc3VjaAogIGFzIHRoZSBDaHJvbWUgRW1iZXIgRXh0ZW5zaW9uLgoKICBU
        aGlzIGNsYXNzIHdpbGwgYmUgZXh0ZW5kZWQgYnkgYSBwZXJzaXN0ZW5jZSBs
        aWJyYXJ5CiAgd2hpY2ggd2lsbCBvdmVycmlkZSBzb21lIG9mIHRoZSBtZXRo
        b2RzIHdpdGgKICBsaWJyYXJ5LXNwZWNpZmljIGNvZGUuCgogIFRoZSBtZXRo
        b2RzIGxpa2VseSB0byBiZSBvdmVycmlkZW4gYXJlCiAgYGdldEZpbHRlcnNg
        LCBgZGV0ZWN0YCwgYGNvbHVtbnNGb3JUeXBlYCwKICBgZ2V0UmVjb3Jkc2As
        IGBnZXRSZWNvcmRDb2x1bW5WYWx1ZXNgLAogIGBnZXRSZWNvcmRLZXl3b3Jk
        c2AsIGBnZXRSZWNvcmRGaWx0ZXJWYWx1ZXNgLAogIGBnZXRSZWNvcmRDb2xv
        cmAsIGBvYnNlcnZlUmVjb3JkYAoKICBUaGUgYWRhcHRlciB3aWxsIG5lZWQg
        dG8gYmUgcmVnaXN0ZXJlZAogIGluIHRoZSBhcHBsaWNhdGlvbidzIGNvbnRh
        aW5lciBhcyBgZGF0YUFkYXB0ZXI6bWFpbmAKCiAgRXhhbXBsZToKICBgYGBq
        YXZhc2NyaXB0CiAgQXBwbGljYXRpb24uaW5pdGlhbGl6ZXIoewogICAgbmFt
        ZTogImRhdGFBZGFwdGVyIiwKCiAgICBpbml0aWFsaXplOiBmdW5jdGlvbihj
        b250YWluZXIsIGFwcGxpY2F0aW9uKSB7CiAgICAgIGFwcGxpY2F0aW9uLnJl
        Z2lzdGVyKCdkYXRhQWRhcHRlcjptYWluJywgRFMuRGF0YUFkYXB0ZXIpOwog
        ICAgfQogIH0pOwogIGBgYAoKICBAY2xhc3MgRGF0YUFkYXB0ZXIKICBAbmFt
        ZXNwYWNlIEVtYmVyCiAgQGV4dGVuZHMgRW1iZXIuT2JqZWN0CiovCkVtYmVy
        LkRhdGFBZGFwdGVyID0gRW1iZXIuT2JqZWN0LmV4dGVuZCh7CiAgaW5pdDog
        ZnVuY3Rpb24oKSB7CiAgICB0aGlzLl9zdXBlcigpOwogICAgdGhpcy5yZWxl
        YXNlTWV0aG9kcyA9IEVtYmVyLkEoKTsKICB9LAoKICAvKioKICAgIFRoZSBj
        b250YWluZXIgb2YgdGhlIGFwcGxpY2F0aW9uIGJlaW5nIGRlYnVnZ2VkLgog
        ICAgVGhpcyBwcm9wZXJ0eSB3aWxsIGJlIGluamVjdGVkCiAgICBvbiBjcmVh
        dGlvbi4KICAqLwogIGNvbnRhaW5lcjogbnVsbCwKCiAgLyoqCiAgICBAcHJp
        dmF0ZQoKICAgIE51bWJlciBvZiBhdHRyaWJ1dGVzIHRvIHNlbmQKICAgIGFz
        IGNvbHVtbnMuIChFbm91Z2ggdG8gbWFrZSB0aGUgcmVjb3JkCiAgICBpZGVu
        dGlmaWFibGUpLgogICovCiAgYXR0cmlidXRlTGltaXQ6IDMsCgogIC8qKgog
        ICAgQHByaXZhdGUKCiAgICBTdG9yZXMgYWxsIG1ldGhvZHMgdGhhdCBjbGVh
        ciBvYnNlcnZlcnMuCiAgICBUaGVzZSBtZXRob2RzIHdpbGwgYmUgY2FsbGVk
        IG9uIGRlc3RydWN0aW9uLgogICovCiAgcmVsZWFzZU1ldGhvZHM6IEVtYmVy
        LkEoKSwKCiAgLyoqCiAgICBAcHVibGljCgogICAgU3BlY2lmaWVzIGhvdyBy
        ZWNvcmRzIGNhbiBiZSBmaWx0ZXJlZC4KICAgIFJlY29yZHMgcmV0dXJuZWQg
        d2lsbCBuZWVkIHRvIGhhdmUgYSBgZmlsdGVyVmFsdWVzYAogICAgcHJvcGVy
        dHkgd2l0aCBhIGtleSBmb3IgZXZlcnkgbmFtZSBpbiB0aGUgcmV0dXJuZWQg
        YXJyYXkuCgogICAgQG1ldGhvZCBnZXRGaWx0ZXJzCiAgICBAcmV0dXJuIHtB
        cnJheX0gTGlzdCBvZiBvYmplY3RzIGRlZmluaW5nIGZpbHRlcnMuCiAgICAg
        VGhlIG9iamVjdCBzaG91bGQgaGF2ZSBhIGBuYW1lYCBhbmQgYGRlc2NgIHBy
        b3BlcnR5LgogICovCiAgZ2V0RmlsdGVyczogZnVuY3Rpb24oKSB7CiAgICBy
        ZXR1cm4gRW1iZXIuQSgpOwogIH0sCgogIC8qKgogICAgQHB1YmxpYwoKICAg
        IEZldGNoIHRoZSBtb2RlbCB0eXBlcyBhbmQgb2JzZXJ2ZSB0aGVtIGZvciBj
        aGFuZ2VzLgoKICAgIEBtZXRob2Qgd2F0Y2hNb2RlbFR5cGVzCgogICAgQHBh
        cmFtIHtGdW5jdGlvbn0gdHlwZXNBZGRlZCBDYWxsYmFjayB0byBjYWxsIHRv
        IGFkZCB0eXBlcy4KICAgIFRha2VzIGFuIGFycmF5IG9mIG9iamVjdHMgY29u
        dGFpbmluZyB3cmFwcGVkIHR5cGVzIChyZXR1cm5lZCBmcm9tIGB3cmFwTW9k
        ZWxUeXBlYCkuCgogICAgQHBhcmFtIHtGdW5jdGlvbn0gdHlwZXNVcGRhdGVk
        IENhbGxiYWNrIHRvIGNhbGwgd2hlbiBhIHR5cGUgaGFzIGNoYW5nZWQuCiAg
        ICBUYWtlcyBhbiBhcnJheSBvZiBvYmplY3RzIGNvbnRhaW5pbmcgd3JhcHBl
        ZCB0eXBlcy4KCiAgICBAcmV0dXJuIHtGdW5jdGlvbn0gTWV0aG9kIHRvIGNh
        bGwgdG8gcmVtb3ZlIGFsbCBvYnNlcnZlcnMKICAqLwogIHdhdGNoTW9kZWxU
        eXBlczogZnVuY3Rpb24odHlwZXNBZGRlZCwgdHlwZXNVcGRhdGVkKSB7CiAg
        ICB2YXIgbW9kZWxUeXBlcyA9IHRoaXMuZ2V0TW9kZWxUeXBlcygpLAogICAg
        ICAgIHNlbGYgPSB0aGlzLCB0eXBlc1RvU2VuZCwgcmVsZWFzZU1ldGhvZHMg
        PSBFbWJlci5BKCk7CgogICAgdHlwZXNUb1NlbmQgPSBtb2RlbFR5cGVzLm1h
        cChmdW5jdGlvbih0eXBlKSB7CiAgICAgIHZhciB3cmFwcGVkID0gc2VsZi53
        cmFwTW9kZWxUeXBlKHR5cGUpOwogICAgICByZWxlYXNlTWV0aG9kcy5wdXNo
        KHNlbGYub2JzZXJ2ZU1vZGVsVHlwZSh0eXBlLCB0eXBlc1VwZGF0ZWQpKTsK
        ICAgICAgcmV0dXJuIHdyYXBwZWQ7CiAgICB9KTsKCiAgICB0eXBlc0FkZGVk
        KHR5cGVzVG9TZW5kKTsKCiAgICB2YXIgcmVsZWFzZSA9IGZ1bmN0aW9uKCkg
        ewogICAgICByZWxlYXNlTWV0aG9kcy5mb3JFYWNoKGZ1bmN0aW9uKGZuKSB7
        IGZuKCk7IH0pOwogICAgICBzZWxmLnJlbGVhc2VNZXRob2RzLnJlbW92ZU9i
        amVjdChyZWxlYXNlKTsKICAgIH07CiAgICB0aGlzLnJlbGVhc2VNZXRob2Rz
        LnB1c2hPYmplY3QocmVsZWFzZSk7CiAgICByZXR1cm4gcmVsZWFzZTsKICB9
        LAoKICAvKioKICAgIEBwdWJsaWMKCiAgICBGZXRjaCB0aGUgcmVjb3JkcyBv
        ZiBhIGdpdmVuIHR5cGUgYW5kIG9ic2VydmUgdGhlbSBmb3IgY2hhbmdlcy4K
        CiAgICBAbWV0aG9kIHdhdGNoUmVjb3JkcwoKICAgIEBwYXJhbSB7RnVuY3Rp
        b259IHJlY29yZHNBZGRlZCBDYWxsYmFjayB0byBjYWxsIHRvIGFkZCByZWNv
        cmRzLgogICAgVGFrZXMgYW4gYXJyYXkgb2Ygb2JqZWN0cyBjb250YWluaW5n
        IHdyYXBwZWQgcmVjb3Jkcy4KICAgIFRoZSBvYmplY3Qgc2hvdWxkIGhhdmUg
        dGhlIGZvbGxvd2luZyBwcm9wZXJ0aWVzOgogICAgICBjb2x1bW5WYWx1ZXM6
        IHtPYmplY3R9IGtleSBhbmQgdmFsdWUgb2YgYSB0YWJsZSBjZWxsCiAgICAg
        IG9iamVjdDoge09iamVjdH0gdGhlIGFjdHVhbCByZWNvcmQgb2JqZWN0Cgog
        ICAgQHBhcmFtIHtGdW5jdGlvbn0gcmVjb3Jkc1VwZGF0ZWQgQ2FsbGJhY2sg
        dG8gY2FsbCB3aGVuIGEgcmVjb3JkIGhhcyBjaGFuZ2VkLgogICAgVGFrZXMg
        YW4gYXJyYXkgb2Ygb2JqZWN0cyBjb250YWluaW5nIHdyYXBwZWQgcmVjb3Jk
        cy4KCiAgICBAcGFyYW0ge0Z1bmN0aW9ufSByZWNvcmRzUmVtb3ZlZCBDYWxs
        YmFjayB0byBjYWxsIHdoZW4gYSByZWNvcmQgaGFzIHJlbW92ZWQuCiAgICBU
        YWtlcyB0aGUgZm9sbG93aW5nIHBhcmFtZXRlcnM6CiAgICAgIGluZGV4OiB0
        aGUgYXJyYXkgaW5kZXggd2hlcmUgdGhlIHJlY29yZHMgd2VyZSByZW1vdmVk
        CiAgICAgIGNvdW50OiB0aGUgbnVtYmVyIG9mIHJlY29yZHMgcmVtb3ZlZAoK
        ICAgIEByZXR1cm4ge0Z1bmN0aW9ufSBNZXRob2QgdG8gY2FsbCB0byByZW1v
        dmUgYWxsIG9ic2VydmVycwogICovCiAgd2F0Y2hSZWNvcmRzOiBmdW5jdGlv
        bih0eXBlLCByZWNvcmRzQWRkZWQsIHJlY29yZHNVcGRhdGVkLCByZWNvcmRz
        UmVtb3ZlZCkgewogICAgdmFyIHNlbGYgPSB0aGlzLCByZWxlYXNlTWV0aG9k
        cyA9IEVtYmVyLkEoKSwgcmVjb3JkcyA9IHRoaXMuZ2V0UmVjb3Jkcyh0eXBl
        KSwgcmVsZWFzZTsKCiAgICB2YXIgcmVjb3JkVXBkYXRlZCA9IGZ1bmN0aW9u
        KHVwZGF0ZWRSZWNvcmQpIHsKICAgICAgcmVjb3Jkc1VwZGF0ZWQoW3VwZGF0
        ZWRSZWNvcmRdKTsKICAgIH07CgogICAgdmFyIHJlY29yZHNUb1NlbmQgPSBy
        ZWNvcmRzLm1hcChmdW5jdGlvbihyZWNvcmQpIHsKICAgICAgcmVsZWFzZU1l
        dGhvZHMucHVzaChzZWxmLm9ic2VydmVSZWNvcmQocmVjb3JkLCByZWNvcmRV
        cGRhdGVkKSk7CiAgICAgIHJldHVybiBzZWxmLndyYXBSZWNvcmQocmVjb3Jk
        KTsKICAgIH0pOwoKCiAgICB2YXIgY29udGVudERpZENoYW5nZSA9IGZ1bmN0
        aW9uKGFycmF5LCBpZHgsIHJlbW92ZWRDb3VudCwgYWRkZWRDb3VudCkgewog
        ICAgICBmb3IgKHZhciBpID0gaWR4OyBpIDwgaWR4ICsgYWRkZWRDb3VudDsg
        aSsrKSB7CiAgICAgICAgdmFyIHJlY29yZCA9IGFycmF5Lm9iamVjdEF0KGkp
        OwogICAgICAgIHZhciB3cmFwcGVkID0gc2VsZi53cmFwUmVjb3JkKHJlY29y
        ZCk7CiAgICAgICAgcmVsZWFzZU1ldGhvZHMucHVzaChzZWxmLm9ic2VydmVS
        ZWNvcmQocmVjb3JkLCByZWNvcmRVcGRhdGVkKSk7CiAgICAgICAgcmVjb3Jk
        c0FkZGVkKFt3cmFwcGVkXSk7CiAgICAgIH0KCiAgICAgIGlmIChyZW1vdmVk
        Q291bnQpIHsKICAgICAgICByZWNvcmRzUmVtb3ZlZChpZHgsIHJlbW92ZWRD
        b3VudCk7CiAgICAgIH0KICAgIH07CgogICAgdmFyIG9ic2VydmVyID0geyBk
        aWRDaGFuZ2U6IGNvbnRlbnREaWRDaGFuZ2UsIHdpbGxDaGFuZ2U6IEVtYmVy
        LksgfTsKICAgIHJlY29yZHMuYWRkQXJyYXlPYnNlcnZlcihzZWxmLCBvYnNl
        cnZlcik7CgogICAgcmVsZWFzZSA9IGZ1bmN0aW9uKCkgewogICAgICByZWxl
        YXNlTWV0aG9kcy5mb3JFYWNoKGZ1bmN0aW9uKGZuKSB7IGZuKCk7IH0pOwog
        ICAgICByZWNvcmRzLnJlbW92ZUFycmF5T2JzZXJ2ZXIoc2VsZiwgb2JzZXJ2
        ZXIpOwogICAgICBzZWxmLnJlbGVhc2VNZXRob2RzLnJlbW92ZU9iamVjdChy
        ZWxlYXNlKTsKICAgIH07CgogICAgcmVjb3Jkc0FkZGVkKHJlY29yZHNUb1Nl
        bmQpOwoKICAgIHRoaXMucmVsZWFzZU1ldGhvZHMucHVzaE9iamVjdChyZWxl
        YXNlKTsKICAgIHJldHVybiByZWxlYXNlOwogIH0sCgogIC8qKgogICAgQHBy
        aXZhdGUKCiAgICBDbGVhciBhbGwgb2JzZXJ2ZXJzIGJlZm9yZSBkZXN0cnVj
        dGlvbgogICovCiAgd2lsbERlc3Ryb3k6IGZ1bmN0aW9uKCkgewogICAgdGhp
        cy5fc3VwZXIoKTsKICAgIHRoaXMucmVsZWFzZU1ldGhvZHMuZm9yRWFjaChm
        dW5jdGlvbihmbikgewogICAgICBmbigpOwogICAgfSk7CiAgfSwKCiAgLyoq
        CiAgICBAcHJpdmF0ZQoKICAgIERldGVjdCB3aGV0aGVyIGEgY2xhc3MgaXMg
        YSBtb2RlbC4KCiAgICBUZXN0IHRoYXQgYWdhaW5zdCB0aGUgbW9kZWwgY2xh
        c3MKICAgIG9mIHlvdXIgcGVyc2lzdGVuY2UgbGlicmFyeQoKICAgIEBtZXRo
        b2QgZGV0ZWN0CiAgICBAcGFyYW0ge0NsYXNzfSBrbGFzcyBUaGUgY2xhc3Mg
        dG8gdGVzdAogICAgQHJldHVybiBib29sZWFuIFdoZXRoZXIgdGhlIGNsYXNz
        IGlzIGEgbW9kZWwgY2xhc3Mgb3Igbm90CiAgKi8KICBkZXRlY3Q6IGZ1bmN0
        aW9uKGtsYXNzKSB7CiAgICByZXR1cm4gZmFsc2U7CiAgfSwKCiAgLyoqCiAg
        ICBAcHJpdmF0ZQoKICAgIEdldCB0aGUgY29sdW1ucyBmb3IgYSBnaXZlbiBt
        b2RlbCB0eXBlLgoKICAgIEBtZXRob2QgY29sdW1uc0ZvclR5cGUKICAgIEBw
        YXJhbSB7Q2xhc3N9IHR5cGUgVGhlIG1vZGVsIHR5cGUKICAgIEByZXR1cm4g
        e0FycmF5fSBBbiBhcnJheSBvZiBjb2x1bW5zIG9mIHRoZSBmb2xsb3dpbmcg
        Zm9ybWF0OgogICAgIG5hbWU6IHtTdHJpbmd9IG5hbWUgb2YgdGhlIGNvbHVt
        bgogICAgIGRlc2M6IHtTdHJpbmd9IEh1bWFuaXplZCBkZXNjcmlwdGlvbiAo
        d2hhdCB3b3VsZCBzaG93IGluIGEgdGFibGUgY29sdW1uIG5hbWUpCiAgKi8K
        ICBjb2x1bW5zRm9yVHlwZTogZnVuY3Rpb24odHlwZSkgewogICAgcmV0dXJu
        IEVtYmVyLkEoKTsKICB9LAoKICAvKioKICAgIEBwcml2YXRlCgogICAgQWRk
        cyBvYnNlcnZlcnMgdG8gYSBtb2RlbCB0eXBlIGNsYXNzLgoKICAgIEBtZXRo
        b2Qgb2JzZXJ2ZU1vZGVsVHlwZQogICAgQHBhcmFtIHtDbGFzc30gdHlwZSBU
        aGUgbW9kZWwgdHlwZSBjbGFzcwogICAgQHBhcmFtIHtGdW5jdGlvbn0gdHlw
        ZXNVcGRhdGVkIENhbGxlZCB3aGVuIGEgdHlwZSBpcyBtb2RpZmllZC4KICAg
        IEByZXR1cm4ge0Z1bmN0aW9ufSBUaGUgZnVuY3Rpb24gdG8gY2FsbCB0byBy
        ZW1vdmUgb2JzZXJ2ZXJzCiAgKi8KCiAgb2JzZXJ2ZU1vZGVsVHlwZTogZnVu
        Y3Rpb24odHlwZSwgdHlwZXNVcGRhdGVkKSB7CiAgICB2YXIgc2VsZiA9IHRo
        aXMsIHJlY29yZHMgPSB0aGlzLmdldFJlY29yZHModHlwZSk7CgogICAgdmFy
        IG9uQ2hhbmdlID0gZnVuY3Rpb24oKSB7CiAgICAgIHR5cGVzVXBkYXRlZChb
        c2VsZi53cmFwTW9kZWxUeXBlKHR5cGUpXSk7CiAgICB9OwogICAgdmFyIG9i
        c2VydmVyID0gewogICAgICBkaWRDaGFuZ2U6IGZ1bmN0aW9uKCkgewogICAg
        ICAgIEVtYmVyLnJ1bi5zY2hlZHVsZU9uY2UoJ2FjdGlvbnMnLCB0aGlzLCBv
        bkNoYW5nZSk7CiAgICAgIH0sCiAgICAgIHdpbGxDaGFuZ2U6IEVtYmVyLksK
        ICAgIH07CgogICAgcmVjb3Jkcy5hZGRBcnJheU9ic2VydmVyKHRoaXMsIG9i
        c2VydmVyKTsKCiAgICB2YXIgcmVsZWFzZSA9IGZ1bmN0aW9uKCkgewogICAg
        ICByZWNvcmRzLnJlbW92ZUFycmF5T2JzZXJ2ZXIoc2VsZiwgb2JzZXJ2ZXIp
        OwogICAgfTsKCiAgICByZXR1cm4gcmVsZWFzZTsKICB9LAoKCiAgLyoqCiAg
        ICBAcHJpdmF0ZQoKICAgIFdyYXBzIGEgZ2l2ZW4gbW9kZWwgdHlwZSBhbmQg
        b2JzZXJ2ZXMgY2hhbmdlcyB0byBpdC4KCiAgICBAbWV0aG9kIHdyYXBNb2Rl
        bFR5cGUKICAgIEBwYXJhbSB7Q2xhc3N9IHR5cGUgQSBtb2RlbCBjbGFzcwog
        ICAgQHBhcmFtIHtGdW5jdGlvbn0gdHlwZXNVcGRhdGVkIGNhbGxiYWNrIHRv
        IGNhbGwgd2hlbiB0aGUgdHlwZSBjaGFuZ2VzCiAgICBAcmV0dXJuIHtPYmpl
        Y3R9IGNvbnRhaW5zIHRoZSB3cmFwcGVkIHR5cGUgYW5kIHRoZSBmdW5jdGlv
        biB0byByZW1vdmUgb2JzZXJ2ZXJzCiAgICBGb3JtYXQ6CiAgICAgIHR5cGU6
        IHtPYmplY3R9IHRoZSB3cmFwcGVkIHR5cGUKICAgICAgICBUaGUgd3JhcHBl
        ZCB0eXBlIGhhcyB0aGUgZm9sbG93aW5nIGZvcm1hdDoKICAgICAgICAgIG5h
        bWU6IHtTdHJpbmd9IG5hbWUgb2YgdGhlIHR5cGUKICAgICAgICAgIGNvdW50
        OiB7SW50ZWdlcn0gbnVtYmVyIG9mIHJlY29yZHMgYXZhaWxhYmxlCiAgICAg
        ICAgICBjb2x1bW5zOiB7Q29sdW1uc30gYXJyYXkgb2YgY29sdW1ucyB0byBk
        ZXNjcmliZSB0aGUgcmVjb3JkCiAgICAgICAgICBvYmplY3Q6IHtDbGFzc30g
        dGhlIGFjdHVhbCBNb2RlbCB0eXBlIGNsYXNzCiAgICAgIHJlbGVhc2U6IHtG
        dW5jdGlvbn0gVGhlIGZ1bmN0aW9uIHRvIHJlbW92ZSBvYnNlcnZlcnMKICAq
        LwogIHdyYXBNb2RlbFR5cGU6IGZ1bmN0aW9uKHR5cGUsIHR5cGVzVXBkYXRl
        ZCkgewogICAgdmFyIHJlbGVhc2UsIHJlY29yZHMgPSB0aGlzLmdldFJlY29y
        ZHModHlwZSksCiAgICAgICAgdHlwZVRvU2VuZCwgc2VsZiA9IHRoaXM7Cgog
        ICAgdHlwZVRvU2VuZCA9IHsKICAgICAgbmFtZTogdHlwZS50b1N0cmluZygp
        LAogICAgICBjb3VudDogRW1iZXIuZ2V0KHJlY29yZHMsICdsZW5ndGgnKSwK
        ICAgICAgY29sdW1uczogdGhpcy5jb2x1bW5zRm9yVHlwZSh0eXBlKSwKICAg
        ICAgb2JqZWN0OiB0eXBlCiAgICB9OwoKCiAgICByZXR1cm4gdHlwZVRvU2Vu
        ZDsKICB9LAoKCiAgLyoqCiAgICBAcHJpdmF0ZQoKICAgIEZldGNoZXMgYWxs
        IG1vZGVscyBkZWZpbmVkIGluIHRoZSBhcHBsaWNhdGlvbi4KICAgIFRPRE86
        IFVzZSB0aGUgcmVzb2x2ZXIgaW5zdGVhZCBvZiBsb29waW5nIG92ZXIgbmFt
        ZXNwYWNlcy4KCiAgICBAbWV0aG9kIGdldE1vZGVsVHlwZXMKICAgIEByZXR1
        cm4ge0FycmF5fSBBcnJheSBvZiBtb2RlbCB0eXBlcwogICovCiAgZ2V0TW9k
        ZWxUeXBlczogZnVuY3Rpb24oKSB7CiAgICB2YXIgbmFtZXNwYWNlcyA9IEVt
        YmVyLkEoRW1iZXIuTmFtZXNwYWNlLk5BTUVTUEFDRVMpLCB0eXBlcyA9IEVt
        YmVyLkEoKSwgc2VsZiA9IHRoaXM7CgogICAgbmFtZXNwYWNlcy5mb3JFYWNo
        KGZ1bmN0aW9uKG5hbWVzcGFjZSkgewogICAgICBmb3IgKHZhciBrZXkgaW4g
        bmFtZXNwYWNlKSB7CiAgICAgICAgaWYgKCFuYW1lc3BhY2UuaGFzT3duUHJv
        cGVydHkoa2V5KSkgeyBjb250aW51ZTsgfQogICAgICAgIHZhciBrbGFzcyA9
        IG5hbWVzcGFjZVtrZXldOwogICAgICAgIGlmIChzZWxmLmRldGVjdChrbGFz
        cykpIHsKICAgICAgICAgIHR5cGVzLnB1c2goa2xhc3MpOwogICAgICAgIH0K
        ICAgICAgfQogICAgfSk7CiAgICByZXR1cm4gdHlwZXM7CiAgfSwKCiAgLyoq
        CiAgICBAcHJpdmF0ZQoKICAgIEZldGNoZXMgYWxsIGxvYWRlZCByZWNvcmRz
        IGZvciBhIGdpdmVuIHR5cGUuCgogICAgQG1ldGhvZCBnZXRSZWNvcmRzCiAg
        ICBAcmV0dXJuIHtBcnJheX0gYXJyYXkgb2YgcmVjb3Jkcy4KICAgICBUaGlz
        IGFycmF5IHdpbGwgYmUgb2JzZXJ2ZWQgZm9yIGNoYW5nZXMsCiAgICAgc28g
        aXQgc2hvdWxkIHVwZGF0ZSB3aGVuIG5ldyByZWNvcmRzIGFyZSBhZGRlZC9y
        ZW1vdmVkLgogICovCiAgZ2V0UmVjb3JkczogZnVuY3Rpb24odHlwZSkgewog
        ICAgcmV0dXJuIEVtYmVyLkEoKTsKICB9LAoKICAvKioKICAgIEBwcml2YXRl
        CgogICAgV3JhcHMgYSByZWNvcmQgYW5kIG9ic2VydmVycyBjaGFuZ2VzIHRv
        IGl0CgogICAgQG1ldGhvZCB3cmFwUmVjb3JkCiAgICBAcGFyYW0ge09iamVj
        dH0gcmVjb3JkIFRoZSByZWNvcmQgaW5zdGFuY2UKICAgIEByZXR1cm4ge09i
        amVjdH0gdGhlIHdyYXBwZWQgcmVjb3JkLiBGb3JtYXQ6CiAgICBjb2x1bW5W
        YWx1ZXM6IHtBcnJheX0KICAgIHNlYXJjaEtleXdvcmRzOiB7QXJyYXl9CiAg
        Ki8KICB3cmFwUmVjb3JkOiBmdW5jdGlvbihyZWNvcmQpIHsKICAgIHZhciBy
        ZWNvcmRUb1NlbmQgPSB7IG9iamVjdDogcmVjb3JkIH0sIGNvbHVtblZhbHVl
        cyA9IHt9LCBzZWxmID0gdGhpczsKCiAgICByZWNvcmRUb1NlbmQuY29sdW1u
        VmFsdWVzID0gdGhpcy5nZXRSZWNvcmRDb2x1bW5WYWx1ZXMocmVjb3JkKTsK
        ICAgIHJlY29yZFRvU2VuZC5zZWFyY2hLZXl3b3JkcyA9IHRoaXMuZ2V0UmVj
        b3JkS2V5d29yZHMocmVjb3JkKTsKICAgIHJlY29yZFRvU2VuZC5maWx0ZXJW
        YWx1ZXMgPSB0aGlzLmdldFJlY29yZEZpbHRlclZhbHVlcyhyZWNvcmQpOwog
        ICAgcmVjb3JkVG9TZW5kLmNvbG9yID0gdGhpcy5nZXRSZWNvcmRDb2xvcihy
        ZWNvcmQpOwoKICAgIHJldHVybiByZWNvcmRUb1NlbmQ7CiAgfSwKCiAgLyoq
        CiAgICBAcHJpdmF0ZQoKICAgIEdldHMgdGhlIHZhbHVlcyBmb3IgZWFjaCBj
        b2x1bW4uCgogICAgQG1ldGhvZCBnZXRSZWNvcmRDb2x1bW5WYWx1ZXMKICAg
        IEByZXR1cm4ge09iamVjdH0gS2V5cyBzaG91bGQgbWF0Y2ggY29sdW1uIG5h
        bWVzIGRlZmluZWQKICAgIGJ5IHRoZSBtb2RlbCB0eXBlLgogICovCiAgZ2V0
        UmVjb3JkQ29sdW1uVmFsdWVzOiBmdW5jdGlvbihyZWNvcmQpIHsKICAgIHJl
        dHVybiB7fTsKICB9LAoKICAvKioKICAgIEBwcml2YXRlCgogICAgUmV0dXJu
        cyBrZXl3b3JkcyB0byBtYXRjaCB3aGVuIHNlYXJjaGluZyByZWNvcmRzLgoK
        ICAgIEBtZXRob2QgZ2V0UmVjb3JkS2V5d29yZHMKICAgIEByZXR1cm4ge0Fy
        cmF5fSBSZWxldmFudCBrZXl3b3JkcyBmb3Igc2VhcmNoLgogICovCiAgZ2V0
        UmVjb3JkS2V5d29yZHM6IGZ1bmN0aW9uKHJlY29yZCkgewogICAgcmV0dXJu
        IEVtYmVyLkEoKTsKICB9LAoKICAvKioKICAgIEBwcml2YXRlCgogICAgUmV0
        dXJucyB0aGUgdmFsdWVzIG9mIGZpbHRlcnMgZGVmaW5lZCBieSBgZ2V0Rmls
        dGVyc2AuCgogICAgQG1ldGhvZCBnZXRSZWNvcmRGaWx0ZXJWYWx1ZXMKICAg
        IEBwYXJhbSB7T2JqZWN0fSByZWNvcmQgVGhlIHJlY29yZCBpbnN0YW5jZQog
        ICAgQHJldHVybiB7T2JqZWN0fSBUaGUgZmlsdGVyIHZhbHVlcwogICovCiAg
        Z2V0UmVjb3JkRmlsdGVyVmFsdWVzOiBmdW5jdGlvbihyZWNvcmQpIHsKICAg
        IHJldHVybiB7fTsKICB9LAoKICAvKioKICAgIEBwcml2YXRlCgogICAgRWFj
        aCByZWNvcmQgY2FuIGhhdmUgYSBjb2xvciB0aGF0IHJlcHJlc2VudHMgaXRz
        IHN0YXRlLgoKICAgIEBtZXRob2QgZ2V0UmVjb3JkQ29sb3IKICAgIEBwYXJh
        bSB7T2JqZWN0fSByZWNvcmQgVGhlIHJlY29yZCBpbnN0YW5jZQogICAgQHJl
        dHVybiB7U3RyaW5nfSBUaGUgcmVjb3JkJ3MgY29sb3IKICAgICAgUG9zc2li
        bGUgb3B0aW9uczogYmxhY2ssIHJlZCwgYmx1ZSwgZ3JlZW4KICAqLwogIGdl
        dFJlY29yZENvbG9yOiBmdW5jdGlvbihyZWNvcmQpIHsKICAgIHJldHVybiBu
        dWxsOwogIH0sCgogIC8qKgogICAgQHByaXZhdGUKCiAgICBPYnNlcnZlcyBh
        bGwgcmVsZXZhbnQgcHJvcGVydGllcyBhbmQgcmUtc2VuZHMgdGhlIHdyYXBw
        ZWQgcmVjb3JkCiAgICB3aGVuIGEgY2hhbmdlIG9jY3Vycy4KCiAgICBAbWV0
        aG9kIG9ic2VydmVyUmVjb3JkCiAgICBAcGFyYW0ge09iamVjdH0gcmVjb3Jk
        IFRoZSByZWNvcmQgaW5zdGFuY2UKICAgIEBwYXJhbSB7RnVuY3Rpb259IHJl
        Y29yZFVwZGF0ZWQgVGhlIGNhbGxiYWNrIHRvIGNhbGwgd2hlbiBhIHJlY29y
        ZCBpcyB1cGRhdGVkLgogICAgQHJldHVybiB7RnVuY3Rpb259IFRoZSBmdW5j
        dGlvbiB0byBjYWxsIHRvIHJlbW92ZSBhbGwgb2JzZXJ2ZXJzLgogICovCiAg
        b2JzZXJ2ZVJlY29yZDogZnVuY3Rpb24ocmVjb3JkLCByZWNvcmRVcGRhdGVk
        KSB7CiAgICByZXR1cm4gZnVuY3Rpb24oKXt9OwogIH0KCn0pOwoKCn0pKCk7
        CgoKCihmdW5jdGlvbigpIHsKLyoqCkVtYmVyIEV4dGVuc2lvbiBTdXBwb3J0
        CgpAbW9kdWxlIGVtYmVyCkBzdWJtb2R1bGUgZW1iZXItZXh0ZW5zaW9uLXN1
        cHBvcnQKQHJlcXVpcmVzIGVtYmVyLWFwcGxpY2F0aW9uCiovCgp9KSgpOwoK
        KGZ1bmN0aW9uKCkgewovKioKICBAbW9kdWxlIGVtYmVyCiAgQHN1Ym1vZHVs
        ZSBlbWJlci10ZXN0aW5nCiAqLwp2YXIgc2xpY2UgPSBbXS5zbGljZSwKICAg
        IGhlbHBlcnMgPSB7fSwKICAgIG9yaWdpbmFsTWV0aG9kcyA9IHt9LAogICAg
        aW5qZWN0SGVscGVyc0NhbGxiYWNrcyA9IFtdLAogICAgUm91dGVyID0gcmVx
        dWlyZU1vZHVsZSgncm91dGVyJyk7CgovKioKICBUaGlzIGlzIGEgY29udGFp
        bmVyIGZvciBhbiBhc3NvcnRtZW50IG9mIHRlc3RpbmcgcmVsYXRlZCBmdW5j
        dGlvbmFsaXR5OgoKICAqIENob29zZSB5b3VyIGRlZmF1bHQgdGVzdCBhZGFw
        dGVyIChmb3IgeW91ciBmcmFtZXdvcmsgb2YgY2hvaWNlKS4KICAqIFJlZ2lz
        dGVyL1VucmVnaXN0ZXIgYWRkaXRpb25hbCB0ZXN0IGhlbHBlcnMuCiAgKiBT
        ZXR1cCBjYWxsYmFja3MgdG8gYmUgZmlyZWQgd2hlbiB0aGUgdGVzdCBoZWxw
        ZXJzIGFyZSBpbmplY3RlZCBpbnRvCiAgICB5b3VyIGFwcGxpY2F0aW9uLgoK
        ICBAY2xhc3MgVGVzdAogIEBuYW1lc3BhY2UgRW1iZXIKKi8KRW1iZXIuVGVz
        dCA9IHsKCiAgLyoqCiAgICBgcmVnaXN0ZXJIZWxwZXJgIGlzIHVzZWQgdG8g
        cmVnaXN0ZXIgYSB0ZXN0IGhlbHBlciB0aGF0IHdpbGwgYmUgaW5qZWN0ZWQK
        ICAgIHdoZW4gYEFwcC5pbmplY3RUZXN0SGVscGVyc2AgaXMgY2FsbGVkLgoK
        ICAgIFRoZSBoZWxwZXIgbWV0aG9kIHdpbGwgYWx3YXlzIGJlIGNhbGxlZCB3
        aXRoIHRoZSBjdXJyZW50IEFwcGxpY2F0aW9uIGFzCiAgICB0aGUgZmlyc3Qg
        cGFyYW1ldGVyLgoKICAgIEZvciBleGFtcGxlOgogICAgYGBgamF2YXNjcmlw
        dAogICAgICBFbWJlci5UZXN0LnJlZ2lzdGVySGVscGVyKCdib290JywgZnVu
        Y3Rpb24oYXBwKSB7CiAgICAgICAgRW1iZXIucnVuKGFwcCwgYXBwLmFkdmFu
        Y2VSZWFkaW5lc3MpOwogICAgICB9KTsKICAgIGBgYAoKICAgIFRoaXMgaGVs
        cGVyIGNhbiBsYXRlciBiZSBjYWxsZWQgd2l0aG91dCBhcmd1bWVudHMgYmVj
        YXVzZSBpdCB3aWxsIGJlCiAgICBjYWxsZWQgd2l0aCBgYXBwYCBhcyB0aGUg
        Zmlyc3QgcGFyYW1ldGVyLgoKICAgIGBgYGphdmFzY3JpcHQKICAgICAgQXBw
        ID0gRW1iZXIuQXBwbGljYXRpb24uY3JlYXRlKCk7CiAgICAgIEFwcC5pbmpl
        Y3RUZXN0SGVscGVycygpOwogICAgICBib290KCk7CiAgICBgYGAKCiAgICBA
        cHVibGljCiAgICBAbWV0aG9kIHJlZ2lzdGVySGVscGVyCiAgICBAcGFyYW0g
        e1N0cmluZ30gbmFtZSBUaGUgbmFtZSBvZiB0aGUgaGVscGVyIG1ldGhvZCB0
        byBhZGQuCiAgICBAcGFyYW0ge0Z1bmN0aW9ufSBoZWxwZXJNZXRob2QKICAg
        IEBwYXJhbSBvcHRpb25zIHtPYmplY3R9CiAgKi8KICByZWdpc3RlckhlbHBl
        cjogZnVuY3Rpb24obmFtZSwgaGVscGVyTWV0aG9kKSB7CiAgICBoZWxwZXJz
        W25hbWVdID0gewogICAgICBtZXRob2Q6IGhlbHBlck1ldGhvZCwKICAgICAg
        bWV0YTogeyB3YWl0OiBmYWxzZSB9CiAgICB9OwogIH0sCgogIC8qKgogICAg
        YHJlZ2lzdGVyQXN5bmNIZWxwZXJgIGlzIHVzZWQgdG8gcmVnaXN0ZXIgYW4g
        YXN5bmMgdGVzdCBoZWxwZXIgdGhhdCB3aWxsIGJlIGluamVjdGVkCiAgICB3
        aGVuIGBBcHAuaW5qZWN0VGVzdEhlbHBlcnNgIGlzIGNhbGxlZC4KCiAgICBU
        aGUgaGVscGVyIG1ldGhvZCB3aWxsIGFsd2F5cyBiZSBjYWxsZWQgd2l0aCB0
        aGUgY3VycmVudCBBcHBsaWNhdGlvbiBhcwogICAgdGhlIGZpcnN0IHBhcmFt
        ZXRlci4KCiAgICBGb3IgZXhhbXBsZToKICAgIGBgYGphdmFzY3JpcHQKICAg
        ICAgRW1iZXIuVGVzdC5yZWdpc3RlckFzeW5jSGVscGVyKCdib290JywgZnVu
        Y3Rpb24oYXBwKSB7CiAgICAgICAgRW1iZXIucnVuKGFwcCwgYXBwLmFkdmFu
        Y2VSZWFkaW5lc3MpOwogICAgICB9KTsKICAgIGBgYAoKICAgIFRoZSBhZHZh
        bnRhZ2Ugb2YgYW4gYXN5bmMgaGVscGVyIGlzIHRoYXQgaXQgd2lsbCBub3Qg
        cnVuCiAgICB1bnRpbCB0aGUgbGFzdCBhc3luYyBoZWxwZXIgaGFzIGNvbXBs
        ZXRlZC4gIEFsbCBhc3luYyBoZWxwZXJzCiAgICBhZnRlciBpdCB3aWxsIHdh
        aXQgZm9yIGl0IGNvbXBsZXRlIGJlZm9yZSBydW5uaW5nLgoKCiAgICBGb3Ig
        ZXhhbXBsZToKICAgIGBgYGphdmFzY3JpcHQKICAgICAgRW1iZXIuVGVzdC5y
        ZWdpc3RlckFzeW5jSGVscGVyKCdkZWxldGVQb3N0JywgZnVuY3Rpb24oYXBw
        LCBwb3N0SWQpIHsKICAgICAgICBjbGljaygnLmRlbGV0ZS0nICsgcG9zdElk
        KTsKICAgICAgfSk7CgogICAgICAvLyAuLi4gaW4geW91ciB0ZXN0CiAgICAg
        IHZpc2l0KCcvcG9zdC8yJyk7CiAgICAgIGRlbGV0ZVBvc3QoMik7CiAgICAg
        IHZpc2l0KCcvcG9zdC8zJyk7CiAgICAgIGRlbGV0ZVBvc3QoMyk7CiAgICBg
        YGAKCiAgICBAcHVibGljCiAgICBAbWV0aG9kIHJlZ2lzdGVyQXN5bmNIZWxw
        ZXIKICAgIEBwYXJhbSB7U3RyaW5nfSBuYW1lIFRoZSBuYW1lIG9mIHRoZSBo
        ZWxwZXIgbWV0aG9kIHRvIGFkZC4KICAgIEBwYXJhbSB7RnVuY3Rpb259IGhl
        bHBlck1ldGhvZAogICovCiAgcmVnaXN0ZXJBc3luY0hlbHBlcjogZnVuY3Rp
        b24obmFtZSwgaGVscGVyTWV0aG9kKSB7CiAgICBoZWxwZXJzW25hbWVdID0g
        ewogICAgICBtZXRob2Q6IGhlbHBlck1ldGhvZCwKICAgICAgbWV0YTogeyB3
        YWl0OiB0cnVlIH0KICAgIH07CiAgfSwKCiAgLyoqCiAgICBSZW1vdmUgYSBw
        cmV2aW91c2x5IGFkZGVkIGhlbHBlciBtZXRob2QuCgogICAgRXhhbXBsZToK
        ICAgIGBgYAogICAgRW1iZXIuVGVzdC51bnJlZ2lzdGVySGVscGVyKCd3YWl0
        Jyk7CiAgICBgYGAKCiAgICBAcHVibGljCiAgICBAbWV0aG9kIHVucmVnaXN0
        ZXJIZWxwZXIKICAgIEBwYXJhbSB7U3RyaW5nfSBuYW1lIFRoZSBoZWxwZXIg
        dG8gcmVtb3ZlLgogICovCiAgdW5yZWdpc3RlckhlbHBlcjogZnVuY3Rpb24o
        bmFtZSkgewogICAgZGVsZXRlIGhlbHBlcnNbbmFtZV07CiAgICBpZiAob3Jp
        Z2luYWxNZXRob2RzW25hbWVdKSB7CiAgICAgIHdpbmRvd1tuYW1lXSA9IG9y
        aWdpbmFsTWV0aG9kc1tuYW1lXTsKICAgIH0KICAgIGRlbGV0ZSBvcmlnaW5h
        bE1ldGhvZHNbbmFtZV07CiAgICBkZWxldGUgRW1iZXIuVGVzdC5Qcm9taXNl
        LnByb3RvdHlwZVtuYW1lXTsKICB9LAoKICAvKioKICAgIFVzZWQgdG8gcmVn
        aXN0ZXIgY2FsbGJhY2tzIHRvIGJlIGZpcmVkIHdoZW5ldmVyIGBBcHAuaW5q
        ZWN0VGVzdEhlbHBlcnNgCiAgICBpcyBjYWxsZWQuCgogICAgVGhlIGNhbGxi
        YWNrIHdpbGwgcmVjZWl2ZSB0aGUgY3VycmVudCBhcHBsaWNhdGlvbiBhcyBh
        biBhcmd1bWVudC4KCiAgICBFeGFtcGxlOgogICAgYGBgCiAgICBFbWJlci5U
        ZXN0Lm9uSW5qZWN0SGVscGVycyhmdW5jdGlvbigpIHsKICAgICAgRW1iZXIu
        JChkb2N1bWVudCkuYWpheFN0YXJ0KGZ1bmN0aW9uKCkgewogICAgICAgIFRl
        c3QucGVuZGluZ0FqYXhSZXF1ZXN0cysrOwogICAgICB9KTsKCiAgICAgIEVt
        YmVyLiQoZG9jdW1lbnQpLmFqYXhTdG9wKGZ1bmN0aW9uKCkgewogICAgICAg
        IFRlc3QucGVuZGluZ0FqYXhSZXF1ZXN0cy0tOwogICAgICB9KTsKICAgIH0p
        OwogICAgYGBgCgogICAgQHB1YmxpYwogICAgQG1ldGhvZCBvbkluamVjdEhl
        bHBlcnMKICAgIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrIFRoZSBmdW5j
        dGlvbiB0byBiZSBjYWxsZWQuCiAgKi8KICBvbkluamVjdEhlbHBlcnM6IGZ1
        bmN0aW9uKGNhbGxiYWNrKSB7CiAgICBpbmplY3RIZWxwZXJzQ2FsbGJhY2tz
        LnB1c2goY2FsbGJhY2spOwogIH0sCgogIC8qKgogICAgVGhpcyByZXR1cm5z
        IGEgdGhlbmFibGUgdGFpbG9yZWQgZm9yIHRlc3RpbmcuICBJdCBjYXRjaGVz
        IGZhaWxlZAogICAgYG9uU3VjY2Vzc2AgY2FsbGJhY2tzIGFuZCBpbnZva2Vz
        IHRoZSBgRW1iZXIuVGVzdC5hZGFwdGVyLmV4Y2VwdGlvbmAKICAgIGNhbGxi
        YWNrIGluIHRoZSBsYXN0IGNoYWluZWQgdGhlbi4KCiAgICBUaGlzIG1ldGhv
        ZCBzaG91bGQgYmUgcmV0dXJuZWQgYnkgYXN5bmMgaGVscGVycyBzdWNoIGFz
        IGB3YWl0YC4KCiAgICBAcHVibGljCiAgICBAbWV0aG9kIHByb21pc2UKICAg
        IEBwYXJhbSB7RnVuY3Rpb259IHJlc29sdmVyIFRoZSBmdW5jdGlvbiB1c2Vk
        IHRvIHJlc29sdmUgdGhlIHByb21pc2UuCiAgKi8KICBwcm9taXNlOiBmdW5j
        dGlvbihyZXNvbHZlcikgewogICAgcmV0dXJuIG5ldyBFbWJlci5UZXN0LlBy
        b21pc2UocmVzb2x2ZXIpOwogIH0sCgogIC8qKgogICBVc2VkIHRvIGFsbG93
        IGVtYmVyLXRlc3RpbmcgdG8gY29tbXVuaWNhdGUgd2l0aCBhIHNwZWNpZmlj
        IHRlc3RpbmcKICAgZnJhbWV3b3JrLgoKICAgWW91IGNhbiBtYW51YWxseSBz
        ZXQgaXQgYmVmb3JlIGNhbGxpbmcgYEFwcC5zZXR1cEZvclRlc3RpbmcoKWAu
        CgogICBFeGFtcGxlOgogICBgYGAKICAgRW1iZXIuVGVzdC5hZGFwdGVyID0g
        TXlDdXN0b21BZGFwdGVyLmNyZWF0ZSgpCiAgIGBgYAoKICAgSWYgeW91IGRv
        IG5vdCBzZXQgaXQsIGVtYmVyLXRlc3Rpbmcgd2lsbCBkZWZhdWx0IHRvIGBF
        bWJlci5UZXN0LlFVbml0QWRhcHRlcmAuCgogICBAcHVibGljCiAgIEBwcm9w
        ZXJ0eSBhZGFwdGVyCiAgIEB0eXBlIHtDbGFzc30gVGhlIGFkYXB0ZXIgdG8g
        YmUgdXNlZC4KICAgQGRlZmF1bHQgRW1iZXIuVGVzdC5RVW5pdEFkYXB0ZXIK
        ICAqLwogIGFkYXB0ZXI6IG51bGwsCgogIC8qKgogICAgUmVwbGFjZW1lbnQg
        Zm9yIGBFbWJlci5SU1ZQLnJlc29sdmVgCiAgICBUaGUgb25seSBkaWZmZXJl
        bmNlIGlzIHRoaXMgdXNlcwogICAgYW5kIGluc3RhbmNlIG9mIGBFbWJlci5U
        ZXN0LlByb21pc2VgCgogICAgQHB1YmxpYwogICAgQG1ldGhvZCByZXNvbHZl
        CiAgICBAcGFyYW0ge01peGVkfSBUaGUgdmFsdWUgdG8gcmVzb2x2ZQogICov
        CiAgcmVzb2x2ZTogZnVuY3Rpb24odmFsKSB7CiAgICByZXR1cm4gRW1iZXIu
        VGVzdC5wcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUpIHsKICAgICAgcmV0dXJu
        IHJlc29sdmUodmFsKTsKICAgIH0pOwogIH0sCgogIC8qKgogICBAcHVibGlj
        CgogICAgIFRoaXMgYWxsb3dzIGVtYmVyLXRlc3RpbmcgdG8gcGxheSBuaWNl
        bHkgd2l0aCBvdGhlciBhc3luY2hyb25vdXMKICAgICBldmVudHMsIHN1Y2gg
        YXMgYW4gYXBwbGljYXRpb24gdGhhdCBpcyB3YWl0aW5nIGZvciBhIENTUzMK
        ICAgICB0cmFuc2l0aW9uIG9yIGFuIEluZGV4REIgdHJhbnNhY3Rpb24uCgog
        ICAgIEZvciBleGFtcGxlOgogICAgIGBgYGphdmFzY3JpcHQKICAgICBFbWJl
        ci5UZXN0LnJlZ2lzdGVyV2FpdGVyKGZ1bmN0aW9uKCkgewogICAgIHJldHVy
        biBteVBlbmRpbmdUcmFuc2FjdGlvbnMoKSA9PSAwOwogICAgIH0pOwogICAg
        IGBgYAogICAgIFRoZSBgY29udGV4dGAgYXJndW1lbnQgYWxsb3dzIHlvdSB0
        byBvcHRpb25hbGx5IHNwZWNpZnkgdGhlIGB0aGlzYAogICAgIHdpdGggd2hp
        Y2ggeW91ciBjYWxsYmFjayB3aWxsIGJlIGludm9rZWQuCgogICAgIEZvciBl
        eGFtcGxlOgogICAgIGBgYGphdmFzY3JpcHQKICAgICBFbWJlci5UZXN0LnJl
        Z2lzdGVyV2FpdGVyKE15REIsIE15REIuaGFzUGVuZGluZ1RyYW5zYWN0aW9u
        cyk7CiAgICAgYGBgCiAgICAgQHB1YmxpYwogICAgIEBtZXRob2QgcmVnaXN0
        ZXJXYWl0ZXIKICAgICBAcGFyYW0ge09iamVjdH0gY29udGV4dCAob3B0aW9u
        YWwpCiAgICAgQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2sKICAqLwogIHJl
        Z2lzdGVyV2FpdGVyOiBmdW5jdGlvbihjb250ZXh0LCBjYWxsYmFjaykgewog
        ICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDEpIHsKICAgICAgY2FsbGJh
        Y2sgPSBjb250ZXh0OwogICAgICBjb250ZXh0ID0gbnVsbDsKICAgIH0KICAg
        IGlmICghdGhpcy53YWl0ZXJzKSB7CiAgICAgIHRoaXMud2FpdGVycyA9IEVt
        YmVyLkEoKTsKICAgIH0KICAgIHRoaXMud2FpdGVycy5wdXNoKFtjb250ZXh0
        LCBjYWxsYmFja10pOwogIH0sCiAgLyoqCiAgICAgYHVucmVnaXN0ZXJXYWl0
        ZXJgIGlzIHVzZWQgdG8gdW5yZWdpc3RlciBhIGNhbGxiYWNrIHRoYXQgd2Fz
        CiAgICAgcmVnaXN0ZXJlZCB3aXRoIGByZWdpc3RlcldhaXRlcmAuCgogICAg
        IEBwdWJsaWMKICAgICBAbWV0aG9kIHVucmVnaXN0ZXJXYWl0ZXIKICAgICBA
        cGFyYW0ge09iamVjdH0gY29udGV4dCAob3B0aW9uYWwpCiAgICAgQHBhcmFt
        IHtGdW5jdGlvbn0gY2FsbGJhY2sKICAqLwogIHVucmVnaXN0ZXJXYWl0ZXI6
        IGZ1bmN0aW9uKGNvbnRleHQsIGNhbGxiYWNrKSB7CiAgICB2YXIgcGFpcjsK
        ICAgIGlmICghdGhpcy53YWl0ZXJzKSB7IHJldHVybjsgfQogICAgaWYgKGFy
        Z3VtZW50cy5sZW5ndGggPT09IDEpIHsKICAgICAgY2FsbGJhY2sgPSBjb250
        ZXh0OwogICAgICBjb250ZXh0ID0gbnVsbDsKICAgIH0KICAgIHBhaXIgPSBb
        Y29udGV4dCwgY2FsbGJhY2tdOwogICAgdGhpcy53YWl0ZXJzID0gRW1iZXIu
        QSh0aGlzLndhaXRlcnMuZmlsdGVyKGZ1bmN0aW9uKGVsdCkgewogICAgICBy
        ZXR1cm4gRW1iZXIuY29tcGFyZShlbHQsIHBhaXIpIT09MDsKICAgIH0pKTsK
        ICB9Cn07CgpmdW5jdGlvbiBoZWxwZXIoYXBwLCBuYW1lKSB7CiAgdmFyIGZu
        ID0gaGVscGVyc1tuYW1lXS5tZXRob2QsCiAgICAgIG1ldGEgPSBoZWxwZXJz
        W25hbWVdLm1ldGE7CgogIHJldHVybiBmdW5jdGlvbigpIHsKICAgIHZhciBh
        cmdzID0gc2xpY2UuY2FsbChhcmd1bWVudHMpLAogICAgICAgIGxhc3RQcm9t
        aXNlID0gRW1iZXIuVGVzdC5sYXN0UHJvbWlzZTsKCiAgICBhcmdzLnVuc2hp
        ZnQoYXBwKTsKCiAgICAvLyBzb21lIGhlbHBlcnMgYXJlIG5vdCBhc3luYyBh
        bmQKICAgIC8vIG5lZWQgdG8gcmV0dXJuIGEgdmFsdWUgaW1tZWRpYXRlbHku
        CiAgICAvLyBleGFtcGxlOiBgZmluZGAKICAgIGlmICghbWV0YS53YWl0KSB7
        CiAgICAgIHJldHVybiBmbi5hcHBseShhcHAsIGFyZ3MpOwogICAgfQoKICAg
        IGlmICghbGFzdFByb21pc2UpIHsKICAgICAgLy8gSXQncyB0aGUgZmlyc3Qg
        YXN5bmMgaGVscGVyIGluIGN1cnJlbnQgY29udGV4dAogICAgICBsYXN0UHJv
        bWlzZSA9IGZuLmFwcGx5KGFwcCwgYXJncyk7CiAgICB9IGVsc2UgewogICAg
        ICAvLyB3YWl0IGZvciBsYXN0IGhlbHBlcidzIHByb21pc2UgdG8gcmVzb2x2
        ZQogICAgICAvLyBhbmQgdGhlbiBleGVjdXRlCiAgICAgIHJ1bihmdW5jdGlv
        bigpIHsKICAgICAgICBsYXN0UHJvbWlzZSA9IEVtYmVyLlRlc3QucmVzb2x2
        ZShsYXN0UHJvbWlzZSkudGhlbihmdW5jdGlvbigpIHsKICAgICAgICAgIHJl
        dHVybiBmbi5hcHBseShhcHAsIGFyZ3MpOwogICAgICAgIH0pOwogICAgICB9
        KTsKICAgIH0KCiAgICByZXR1cm4gbGFzdFByb21pc2U7CiAgfTsKfQoKZnVu
        Y3Rpb24gcnVuKGZuKSB7CiAgaWYgKCFFbWJlci5ydW4uY3VycmVudFJ1bkxv
        b3ApIHsKICAgIEVtYmVyLnJ1bihmbik7CiAgfSBlbHNlIHsKICAgIGZuKCk7
        CiAgfQp9CgpFbWJlci5BcHBsaWNhdGlvbi5yZW9wZW4oewogIC8qKgogICAg
        QHByb3BlcnR5IHRlc3RIZWxwZXJzCiAgICBAdHlwZSB7T2JqZWN0fQogICAg
        QGRlZmF1bHQge30KICAqLwogIHRlc3RIZWxwZXJzOiB7fSwKCiAgLyoqCiAg
        IFRoaXMgaG9vayBkZWZlcnMgdGhlIHJlYWRpbmVzcyBvZiB0aGUgYXBwbGlj
        YXRpb24sIHNvIHRoYXQgeW91IGNhbiBzdGFydAogICB0aGUgYXBwIHdoZW4g
        eW91ciB0ZXN0cyBhcmUgcmVhZHkgdG8gcnVuLiBJdCBhbHNvIHNldHMgdGhl
        IHJvdXRlcidzCiAgIGxvY2F0aW9uIHRvICdub25lJywgc28gdGhhdCB0aGUg
        d2luZG93J3MgbG9jYXRpb24gd2lsbCBub3QgYmUgbW9kaWZpZWQKICAgKHBy
        ZXZlbnRpbmcgYm90aCBhY2NpZGVudGFsIGxlYWtpbmcgb2Ygc3RhdGUgYmV0
        d2VlbiB0ZXN0cyBhbmQgaW50ZXJmZXJlbmNlCiAgIHdpdGggeW91ciB0ZXN0
        aW5nIGZyYW1ld29yaykuCgogICBFeGFtcGxlOgogIGBgYAogIEFwcC5zZXR1
        cEZvclRlc3RpbmcoKTsKICBgYGAKCiAgICBAbWV0aG9kIHNldHVwRm9yVGVz
        dGluZwogICovCiAgc2V0dXBGb3JUZXN0aW5nOiBmdW5jdGlvbigpIHsKICAg
        IEVtYmVyLnRlc3RpbmcgPSB0cnVlOwoKICAgIHRoaXMuZGVmZXJSZWFkaW5l
        c3MoKTsKCiAgICB0aGlzLlJvdXRlci5yZW9wZW4oewogICAgICBsb2NhdGlv
        bjogJ25vbmUnCiAgICB9KTsKCiAgICAvLyBpZiBhZGFwdGVyIGlzIG5vdCBt
        YW51YWxseSBzZXQgZGVmYXVsdCB0byBRVW5pdAogICAgaWYgKCFFbWJlci5U
        ZXN0LmFkYXB0ZXIpIHsKICAgICAgIEVtYmVyLlRlc3QuYWRhcHRlciA9IEVt
        YmVyLlRlc3QuUVVuaXRBZGFwdGVyLmNyZWF0ZSgpOwogICAgfQogIH0sCgog
        IC8qKgogICAgVGhpcyBpbmplY3RzIHRoZSB0ZXN0IGhlbHBlcnMgaW50byB0
        aGUgd2luZG93J3Mgc2NvcGUuIElmIGEgZnVuY3Rpb24gb2YgdGhlCiAgICBz
        YW1lIG5hbWUgaGFzIGFscmVhZHkgYmVlbiBkZWZpbmVkIGl0IHdpbGwgYmUg
        Y2FjaGVkIChzbyB0aGF0IGl0IGNhbiBiZSByZXNldAogICAgaWYgdGhlIGhl
        bHBlciBpcyByZW1vdmVkIHdpdGggYHVucmVnaXN0ZXJIZWxwZXJgIG9yIGBy
        ZW1vdmVUZXN0SGVscGVyc2ApLgoKICAgQW55IGNhbGxiYWNrcyByZWdpc3Rl
        cmVkIHdpdGggYG9uSW5qZWN0SGVscGVyc2Agd2lsbCBiZSBjYWxsZWQgb25j
        ZSB0aGUKICAgaGVscGVycyBoYXZlIGJlZW4gaW5qZWN0ZWQuCgogIEV4YW1w
        bGU6CiAgYGBgCiAgQXBwLmluamVjdFRlc3RIZWxwZXJzKCk7CiAgYGBgCgog
        ICAgQG1ldGhvZCBpbmplY3RUZXN0SGVscGVycwogICovCiAgaW5qZWN0VGVz
        dEhlbHBlcnM6IGZ1bmN0aW9uKCkgewogICAgdGhpcy50ZXN0SGVscGVycyA9
        IHt9OwogICAgZm9yICh2YXIgbmFtZSBpbiBoZWxwZXJzKSB7CiAgICAgIG9y
        aWdpbmFsTWV0aG9kc1tuYW1lXSA9IHdpbmRvd1tuYW1lXTsKICAgICAgdGhp
        cy50ZXN0SGVscGVyc1tuYW1lXSA9IHdpbmRvd1tuYW1lXSA9IGhlbHBlcih0
        aGlzLCBuYW1lKTsKICAgICAgcHJvdG9XcmFwKEVtYmVyLlRlc3QuUHJvbWlz
        ZS5wcm90b3R5cGUsIG5hbWUsIGhlbHBlcih0aGlzLCBuYW1lKSwgaGVscGVy
        c1tuYW1lXS5tZXRhLndhaXQpOwogICAgfQoKICAgIGZvcih2YXIgaSA9IDAs
        IGwgPSBpbmplY3RIZWxwZXJzQ2FsbGJhY2tzLmxlbmd0aDsgaSA8IGw7IGkr
        KykgewogICAgICBpbmplY3RIZWxwZXJzQ2FsbGJhY2tzW2ldKHRoaXMpOwog
        ICAgfQoKICAgIEVtYmVyLlJTVlAuY29uZmlndXJlKCdvbmVycm9yJywgb25l
        cnJvcik7CiAgfSwKCiAgLyoqCiAgICBUaGlzIHJlbW92ZXMgYWxsIGhlbHBl
        cnMgdGhhdCBoYXZlIGJlZW4gcmVnaXN0ZXJlZCwgYW5kIHJlc2V0cyBhbmQg
        ZnVuY3Rpb25zCiAgICB0aGF0IHdlcmUgb3ZlcnJpZGRlbiBieSB0aGUgaGVs
        cGVycy4KCiAgICBFeGFtcGxlOgogICAgYGBgCiAgICBBcHAucmVtb3ZlVGVz
        dEhlbHBlcnMoKTsKICAgIGBgYAoKICAgIEBwdWJsaWMKICAgIEBtZXRob2Qg
        cmVtb3ZlVGVzdEhlbHBlcnMKICAqLwogIHJlbW92ZVRlc3RIZWxwZXJzOiBm
        dW5jdGlvbigpIHsKICAgIGZvciAodmFyIG5hbWUgaW4gaGVscGVycykgewog
        ICAgICB3aW5kb3dbbmFtZV0gPSBvcmlnaW5hbE1ldGhvZHNbbmFtZV07CiAg
        ICAgIGRlbGV0ZSB0aGlzLnRlc3RIZWxwZXJzW25hbWVdOwogICAgICBkZWxl
        dGUgb3JpZ2luYWxNZXRob2RzW25hbWVdOwogICAgfQogICAgRW1iZXIuUlNW
        UC5jb25maWd1cmUoJ29uZXJyb3InLCBudWxsKTsKICB9Cgp9KTsKCi8vIFRo
        aXMgbWV0aG9kIGlzIG5vIGxvbmdlciBuZWVkZWQKLy8gQnV0IHN0aWxsIGhl
        cmUgZm9yIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5Ci8vIG9mIGhlbHBlciBj
        aGFpbmluZwpmdW5jdGlvbiBwcm90b1dyYXAocHJvdG8sIG5hbWUsIGNhbGxi
        YWNrLCBpc0FzeW5jKSB7CiAgcHJvdG9bbmFtZV0gPSBmdW5jdGlvbigpIHsK
        ICAgIHZhciBhcmdzID0gYXJndW1lbnRzOwogICAgaWYgKGlzQXN5bmMpIHsK
        ICAgICAgcmV0dXJuIGNhbGxiYWNrLmFwcGx5KHRoaXMsIGFyZ3MpOwogICAg
        fSBlbHNlIHsKICAgICAgcmV0dXJuIHRoaXMudGhlbihmdW5jdGlvbigpIHsK
        ICAgICAgICByZXR1cm4gY2FsbGJhY2suYXBwbHkodGhpcywgYXJncyk7CiAg
        ICAgIH0pOwogICAgfQogIH07Cn0KCkVtYmVyLlRlc3QuUHJvbWlzZSA9IGZ1
        bmN0aW9uKCkgewogIEVtYmVyLlJTVlAuUHJvbWlzZS5hcHBseSh0aGlzLCBh
        cmd1bWVudHMpOwogIEVtYmVyLlRlc3QubGFzdFByb21pc2UgPSB0aGlzOwp9
        OwoKRW1iZXIuVGVzdC5Qcm9taXNlLnByb3RvdHlwZSA9IEVtYmVyLmNyZWF0
        ZShFbWJlci5SU1ZQLlByb21pc2UucHJvdG90eXBlKTsKRW1iZXIuVGVzdC5Q
        cm9taXNlLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IEVtYmVyLlRlc3QuUHJv
        bWlzZTsKCi8vIFBhdGNoIGB0aGVuYCB0byBpc29sYXRlIGFzeW5jIG1ldGhv
        ZHMKLy8gc3BlY2lmaWNhbGx5IGBFbWJlci5UZXN0Lmxhc3RQcm9taXNlYAp2
        YXIgb3JpZ2luYWxUaGVuID0gRW1iZXIuUlNWUC5Qcm9taXNlLnByb3RvdHlw
        ZS50aGVuOwpFbWJlci5UZXN0LlByb21pc2UucHJvdG90eXBlLnRoZW4gPSBm
        dW5jdGlvbihvblN1Y2Nlc3MsIG9uRmFpbHVyZSkgewogIHJldHVybiBvcmln
        aW5hbFRoZW4uY2FsbCh0aGlzLCBmdW5jdGlvbih2YWwpIHsKICAgIHJldHVy
        biBpc29sYXRlKG9uU3VjY2VzcywgdmFsKTsKICB9LCBvbkZhaWx1cmUpOwp9
        OwoKLy8gVGhpcyBtZXRob2QgaXNvbGF0ZXMgbmVzdGVkIGFzeW5jIG1ldGhv
        ZHMKLy8gc28gdGhhdCB0aGV5IGRvbid0IGNvbmZsaWN0IHdpdGggb3RoZXIg
        bGFzdCBwcm9taXNlcy4KLy8KLy8gMS4gU2V0IGBFbWJlci5UZXN0Lmxhc3RQ
        cm9taXNlYCB0byBudWxsCi8vIDIuIEludm9rZSBtZXRob2QKLy8gMy4gUmV0
        dXJuIHRoZSBsYXN0IHByb21pc2UgY3JlYXRlZCBkdXJpbmcgbWV0aG9kCi8v
        IDQuIFJlc3RvcmUgYEVtYmVyLlRlc3QubGFzdFByb21pc2VgIHRvIG9yaWdp
        bmFsIHZhbHVlCmZ1bmN0aW9uIGlzb2xhdGUoZm4sIHZhbCkgewogIHZhciB2
        YWx1ZSwgbGFzdFByb21pc2U7CgogIC8vIFJlc2V0IGxhc3RQcm9taXNlIGZv
        ciBuZXN0ZWQgaGVscGVycwogIEVtYmVyLlRlc3QubGFzdFByb21pc2UgPSBu
        dWxsOwoKICB2YWx1ZSA9IGZuLmNhbGwobnVsbCwgdmFsKTsKCiAgbGFzdFBy
        b21pc2UgPSBFbWJlci5UZXN0Lmxhc3RQcm9taXNlOwoKICAvLyBJZiB0aGUg
        bWV0aG9kIHJldHVybmVkIGEgcHJvbWlzZQogIC8vIHJldHVybiB0aGF0IHBy
        b21pc2UuIElmIG5vdCwKICAvLyByZXR1cm4gdGhlIGxhc3QgYXN5bmMgaGVs
        cGVyJ3MgcHJvbWlzZQogIGlmICgodmFsdWUgJiYgKHZhbHVlIGluc3RhbmNl
        b2YgRW1iZXIuVGVzdC5Qcm9taXNlKSkgfHwgIWxhc3RQcm9taXNlKSB7CiAg
        ICByZXR1cm4gdmFsdWU7CiAgfSBlbHNlIHsKICAgIHJ1bihmdW5jdGlvbigp
        IHsKICAgICAgbGFzdFByb21pc2UgPSBFbWJlci5UZXN0LnJlc29sdmUobGFz
        dFByb21pc2UpLnRoZW4oZnVuY3Rpb24oKSB7CiAgICAgICAgcmV0dXJuIHZh
        bHVlOwogICAgICB9KTsKICAgIH0pOwogICAgcmV0dXJuIGxhc3RQcm9taXNl
        OwogIH0KfQoKCmZ1bmN0aW9uIG9uZXJyb3IoZXJyb3IpIHsKICBpZiAoIShl
        cnJvciBpbnN0YW5jZW9mIFJvdXRlci5UcmFuc2l0aW9uQWJvcnRlZCkpIHsK
        ICAgIEVtYmVyLlRlc3QuYWRhcHRlci5leGNlcHRpb24oZXJyb3IpOwogIH0K
        fQoKfSkoKTsKCgoKKGZ1bmN0aW9uKCkgewovKioKICBAbW9kdWxlIGVtYmVy
        CiAgQHN1Ym1vZHVsZSBlbWJlci10ZXN0aW5nCiAqLwoKdmFyICQgPSBFbWJl
        ci4kOwoKLyoqCiAgVGhpcyBtZXRob2QgY3JlYXRlcyBhIGNoZWNrYm94IGFu
        ZCB0cmlnZ2VycyB0aGUgY2xpY2sgZXZlbnQgdG8gZmlyZSB0aGUKICBwYXNz
        ZWQgaW4gaGFuZGxlci4gSXQgaXMgdXNlZCB0byBjb3JyZWN0IGZvciBhIGJ1
        ZyBpbiBvbGRlciB2ZXJzaW9ucwogIG9mIGpRdWVyeSAoZS5nIDEuOC4zKS4K
        CiAgQHByaXZhdGUKICBAbWV0aG9kIHRlc3RDaGVja2JveENsaWNrCiovCmZ1
        bmN0aW9uIHRlc3RDaGVja2JveENsaWNrKGhhbmRsZXIpIHsKICAkKCc8aW5w
        dXQgdHlwZT0iY2hlY2tib3giPicpCiAgICAuY3NzKHsgcG9zaXRpb246ICdh
        YnNvbHV0ZScsIGxlZnQ6ICctMTAwMHB4JywgdG9wOiAnLTEwMDBweCcgfSkK
        ICAgIC5hcHBlbmRUbygnYm9keScpCiAgICAub24oJ2NsaWNrJywgaGFuZGxl
        cikKICAgIC50cmlnZ2VyKCdjbGljaycpCiAgICAucmVtb3ZlKCk7Cn0KCiQo
        ZnVuY3Rpb24oKSB7CiAgLyoKICAgIERldGVybWluZSB3aGV0aGVyIGEgY2hl
        Y2tib3ggY2hlY2tlZCB1c2luZyBqUXVlcnkncyAiY2xpY2siIG1ldGhvZCB3
        aWxsIGhhdmUKICAgIHRoZSBjb3JyZWN0IHZhbHVlIGZvciBpdHMgY2hlY2tl
        ZCBwcm9wZXJ0eS4KCiAgICBJZiB3ZSBkZXRlcm1pbmUgdGhhdCB0aGUgY3Vy
        cmVudCBqUXVlcnkgdmVyc2lvbiBleGhpYml0cyB0aGlzIGJlaGF2aW9yLAog
        ICAgcGF0Y2ggaXQgdG8gd29yayBjb3JyZWN0bHkgYXMgaW4gdGhlIGNvbW1p
        dCBmb3IgdGhlIGFjdHVhbCBmaXg6CiAgICBodHRwczovL2dpdGh1Yi5jb20v
        anF1ZXJ5L2pxdWVyeS9jb21taXQvMWZiMmY5Mi4KICAqLwogIHRlc3RDaGVj
        a2JveENsaWNrKGZ1bmN0aW9uKCkgewogICAgaWYgKCF0aGlzLmNoZWNrZWQg
        JiYgISQuZXZlbnQuc3BlY2lhbC5jbGljaykgewogICAgICAkLmV2ZW50LnNw
        ZWNpYWwuY2xpY2sgPSB7CiAgICAgICAgLy8gRm9yIGNoZWNrYm94LCBmaXJl
        IG5hdGl2ZSBldmVudCBzbyBjaGVja2VkIHN0YXRlIHdpbGwgYmUgcmlnaHQK
        ICAgICAgICB0cmlnZ2VyOiBmdW5jdGlvbigpIHsKICAgICAgICAgIGlmICgk
        Lm5vZGVOYW1lKCB0aGlzLCAiaW5wdXQiICkgJiYgdGhpcy50eXBlID09PSAi
        Y2hlY2tib3giICYmIHRoaXMuY2xpY2spIHsKICAgICAgICAgICAgdGhpcy5j
        bGljaygpOwogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICB9
        CiAgICAgICAgfQogICAgICB9OwogICAgfQogIH0pOwoKICAvLyBUcnkgYWdh
        aW4gdG8gdmVyaWZ5IHRoYXQgdGhlIHBhdGNoIHRvb2sgZWZmZWN0IG9yIGJs
        b3cgdXAuCiAgdGVzdENoZWNrYm94Q2xpY2soZnVuY3Rpb24oKSB7CiAgICBF
        bWJlci53YXJuKCJjbGlja2VkIGNoZWNrYm94ZXMgc2hvdWxkIGJlIGNoZWNr
        ZWQhIHRoZSBqUXVlcnkgcGF0Y2ggZGlkbid0IHdvcmsiLCB0aGlzLmNoZWNr
        ZWQpOwogIH0pOwp9KTsKCn0pKCk7CgoKCihmdW5jdGlvbigpIHsKLyoqCiBA
        bW9kdWxlIGVtYmVyCiBAc3VibW9kdWxlIGVtYmVyLXRlc3RpbmcKKi8KCnZh
        ciBUZXN0ID0gRW1iZXIuVGVzdDsKCi8qKgogIFRoZSBwcmltYXJ5IHB1cnBv
        c2Ugb2YgdGhpcyBjbGFzcyBpcyB0byBjcmVhdGUgaG9va3MgdGhhdCBjYW4g
        YmUgaW1wbGVtZW50ZWQKICBieSBhbiBhZGFwdGVyIGZvciB2YXJpb3VzIHRl
        c3QgZnJhbWV3b3Jrcy4KCiAgQGNsYXNzIEFkYXB0ZXIKICBAbmFtZXNwYWNl
        IEVtYmVyLlRlc3QKKi8KVGVzdC5BZGFwdGVyID0gRW1iZXIuT2JqZWN0LmV4
        dGVuZCh7CiAgLyoqCiAgICBUaGlzIGNhbGxiYWNrIHdpbGwgYmUgY2FsbGVk
        IHdoZW5ldmVyIGFuIGFzeW5jIG9wZXJhdGlvbiBpcyBhYm91dCB0byBzdGFy
        dC4KCiAgICBPdmVycmlkZSB0aGlzIHRvIGNhbGwgeW91ciBmcmFtZXdvcmsn
        cyBtZXRob2RzIHRoYXQgaGFuZGxlIGFzeW5jCiAgICBvcGVyYXRpb25zLgoK
        ICAgIEBwdWJsaWMKICAgIEBtZXRob2QgYXN5bmNTdGFydAogICovCiAgYXN5
        bmNTdGFydDogRW1iZXIuSywKCiAgLyoqCiAgICBUaGlzIGNhbGxiYWNrIHdp
        bGwgYmUgY2FsbGVkIHdoZW5ldmVyIGFuIGFzeW5jIG9wZXJhdGlvbiBoYXMg
        Y29tcGxldGVkLgoKICAgIEBwdWJsaWMKICAgIEBtZXRob2QgYXN5bmNFbmQK
        ICAqLwogIGFzeW5jRW5kOiBFbWJlci5LLAoKICAvKioKICAgIE92ZXJyaWRl
        IHRoaXMgbWV0aG9kIHdpdGggeW91ciB0ZXN0aW5nIGZyYW1ld29yaydzIGZh
        bHNlIGFzc2VydGlvbi4KICAgIFRoaXMgZnVuY3Rpb24gaXMgY2FsbGVkIHdo
        ZW5ldmVyIGFuIGV4Y2VwdGlvbiBvY2N1cnMgY2F1c2luZyB0aGUgdGVzdGlu
        ZwogICAgcHJvbWlzZSB0byBmYWlsLgoKICAgIFFVbml0IGV4YW1wbGU6Cgog
        ICAgYGBgamF2YXNjcmlwdAogICAgICBleGNlcHRpb246IGZ1bmN0aW9uKGVy
        cm9yKSB7CiAgICAgICAgb2soZmFsc2UsIGVycm9yKTsKICAgICAgfTsKICAg
        IGBgYAoKICAgIEBwdWJsaWMKICAgIEBtZXRob2QgZXhjZXB0aW9uCiAgICBA
        cGFyYW0ge1N0cmluZ30gZXJyb3IgVGhlIGV4Y2VwdGlvbiB0byBiZSByYWlz
        ZWQuCiAgKi8KICBleGNlcHRpb246IGZ1bmN0aW9uKGVycm9yKSB7CiAgICBz
        ZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICB0aHJvdyBlcnJvcjsKICAg
        IH0pOwogIH0KfSk7CgovKioKICBUaGlzIGNsYXNzIGltcGxlbWVudHMgdGhl
        IG1ldGhvZHMgZGVmaW5lZCBieSBFbWJlci5UZXN0LkFkYXB0ZXIgZm9yIHRo
        ZQogIFFVbml0IHRlc3RpbmcgZnJhbWV3b3JrLgoKICBAY2xhc3MgUVVuaXRB
        ZGFwdGVyCiAgQG5hbWVzcGFjZSBFbWJlci5UZXN0CiAgQGV4dGVuZHMgRW1i
        ZXIuVGVzdC5BZGFwdGVyCiovClRlc3QuUVVuaXRBZGFwdGVyID0gVGVzdC5B
        ZGFwdGVyLmV4dGVuZCh7CiAgYXN5bmNTdGFydDogZnVuY3Rpb24oKSB7CiAg
        ICBzdG9wKCk7CiAgfSwKICBhc3luY0VuZDogZnVuY3Rpb24oKSB7CiAgICBz
        dGFydCgpOwogIH0sCiAgZXhjZXB0aW9uOiBmdW5jdGlvbihlcnJvcikgewog
        ICAgb2soZmFsc2UsIEVtYmVyLmluc3BlY3QoZXJyb3IpKTsKICB9Cn0pOwoK
        fSkoKTsKCgoKKGZ1bmN0aW9uKCkgewovKioKKiBAbW9kdWxlIGVtYmVyCiog
        QHN1Ym1vZHVsZSBlbWJlci10ZXN0aW5nCiovCgp2YXIgZ2V0ID0gRW1iZXIu
        Z2V0LAogICAgVGVzdCA9IEVtYmVyLlRlc3QsCiAgICBoZWxwZXIgPSBUZXN0
        LnJlZ2lzdGVySGVscGVyLAogICAgYXN5bmNIZWxwZXIgPSBUZXN0LnJlZ2lz
        dGVyQXN5bmNIZWxwZXIsCiAgICBjb3VudEFzeW5jID0gMDsKClRlc3QucGVu
        ZGluZ0FqYXhSZXF1ZXN0cyA9IDA7CgpUZXN0Lm9uSW5qZWN0SGVscGVycyhm
        dW5jdGlvbigpIHsKICBFbWJlci4kKGRvY3VtZW50KS5hamF4U3RhcnQoZnVu
        Y3Rpb24oKSB7CiAgICBUZXN0LnBlbmRpbmdBamF4UmVxdWVzdHMrKzsKICB9
        KTsKCiAgRW1iZXIuJChkb2N1bWVudCkuYWpheFN0b3AoZnVuY3Rpb24oKSB7
        CiAgICBFbWJlci5hc3NlcnQoIkFuIGFqYXhTdG9wIGV2ZW50IHdoaWNoIHdv
        dWxkIGNhdXNlIHRoZSBudW1iZXIgb2YgcGVuZGluZyBBSkFYIHJlcXVlc3Rz
        IHRvIGJlIG5lZ2F0aXZlIGhhcyBiZWVuIHRyaWdnZXJlZC4gVGhpcyBpcyBt
        b3N0IGxpa2VseSBjYXVzZWQgYnkgQUpBWCBldmVudHMgdGhhdCB3ZXJlIHN0
        YXJ0ZWQgYmVmb3JlIGNhbGxpbmcgYGluamVjdFRlc3RIZWxwZXJzKClgLiIs
        IFRlc3QucGVuZGluZ0FqYXhSZXF1ZXN0cyAhPT0gMCk7CiAgICBUZXN0LnBl
        bmRpbmdBamF4UmVxdWVzdHMtLTsKICB9KTsKfSk7CgoKZnVuY3Rpb24gdmlz
        aXQoYXBwLCB1cmwpIHsKICBhcHAuX19jb250YWluZXJfXy5sb29rdXAoJ3Jv
        dXRlcjptYWluJykubG9jYXRpb24uc2V0VVJMKHVybCk7CiAgRW1iZXIucnVu
        KGFwcCwgYXBwLmhhbmRsZVVSTCwgdXJsKTsKICByZXR1cm4gd2FpdChhcHAp
        Owp9CgpmdW5jdGlvbiBjbGljayhhcHAsIHNlbGVjdG9yLCBjb250ZXh0KSB7
        CiAgdmFyICRlbCA9IGZpbmRXaXRoQXNzZXJ0KGFwcCwgc2VsZWN0b3IsIGNv
        bnRleHQpOwogIEVtYmVyLnJ1bigkZWwsICdtb3VzZWRvd24nKTsKCiAgaWYg
        KCRlbC5pcygnOmlucHV0JykpIHsKICAgIHZhciB0eXBlID0gJGVsLnByb3Ao
        J3R5cGUnKTsKICAgIGlmICh0eXBlICE9PSAnY2hlY2tib3gnICYmIHR5cGUg
        IT09ICdyYWRpbycgJiYgdHlwZSAhPT0gJ2hpZGRlbicpIHsKICAgICAgRW1i
        ZXIucnVuKCRlbCwgZnVuY3Rpb24oKXsKICAgICAgICAvLyBGaXJlZm94IGRv
        ZXMgbm90IHRyaWdnZXIgdGhlIGBmb2N1c2luYCBldmVudCBpZiB0aGUgd2lu
        ZG93CiAgICAgICAgLy8gZG9lcyBub3QgaGF2ZSBmb2N1cy4gSWYgdGhlIGRv
        Y3VtZW50IGRvZXNuJ3QgaGF2ZSBmb2N1cyBqdXN0CiAgICAgICAgLy8gdXNl
        IHRyaWdnZXIoJ2ZvY3VzaW4nKSBpbnN0ZWFkLgogICAgICAgIGlmICghZG9j
        dW1lbnQuaGFzRm9jdXMgfHwgZG9jdW1lbnQuaGFzRm9jdXMoKSkgewogICAg
        ICAgICAgdGhpcy5mb2N1cygpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAg
        ICB0aGlzLnRyaWdnZXIoJ2ZvY3VzaW4nKTsKICAgICAgICB9CiAgICAgIH0p
        OwogICAgfQogIH0KCiAgRW1iZXIucnVuKCRlbCwgJ21vdXNldXAnKTsKICBF
        bWJlci5ydW4oJGVsLCAnY2xpY2snKTsKCiAgcmV0dXJuIHdhaXQoYXBwKTsK
        fQoKZnVuY3Rpb24ga2V5RXZlbnQoYXBwLCBzZWxlY3RvciwgY29udGV4dCwg
        dHlwZSwga2V5Q29kZSkgewogIHZhciAkZWw7CiAgaWYgKHR5cGVvZiBrZXlD
        b2RlID09PSAndW5kZWZpbmVkJykgewogICAga2V5Q29kZSA9IHR5cGU7CiAg
        ICB0eXBlID0gY29udGV4dDsKICAgIGNvbnRleHQgPSBudWxsOwogIH0KICAk
        ZWwgPSBmaW5kV2l0aEFzc2VydChhcHAsIHNlbGVjdG9yLCBjb250ZXh0KTsK
        ICB2YXIgZXZlbnQgPSBFbWJlci4kLkV2ZW50KHR5cGUsIHsga2V5Q29kZTog
        a2V5Q29kZSB9KTsKICBFbWJlci5ydW4oJGVsLCAndHJpZ2dlcicsIGV2ZW50
        KTsKICByZXR1cm4gd2FpdChhcHApOwp9CgpmdW5jdGlvbiBmaWxsSW4oYXBw
        LCBzZWxlY3RvciwgY29udGV4dCwgdGV4dCkgewogIHZhciAkZWw7CiAgaWYg
        KHR5cGVvZiB0ZXh0ID09PSAndW5kZWZpbmVkJykgewogICAgdGV4dCA9IGNv
        bnRleHQ7CiAgICBjb250ZXh0ID0gbnVsbDsKICB9CiAgJGVsID0gZmluZFdp
        dGhBc3NlcnQoYXBwLCBzZWxlY3RvciwgY29udGV4dCk7CiAgRW1iZXIucnVu
        KGZ1bmN0aW9uKCkgewogICAgJGVsLnZhbCh0ZXh0KS5jaGFuZ2UoKTsKICB9
        KTsKICByZXR1cm4gd2FpdChhcHApOwp9CgpmdW5jdGlvbiBmaW5kV2l0aEFz
        c2VydChhcHAsIHNlbGVjdG9yLCBjb250ZXh0KSB7CiAgdmFyICRlbCA9IGZp
        bmQoYXBwLCBzZWxlY3RvciwgY29udGV4dCk7CiAgaWYgKCRlbC5sZW5ndGgg
        PT09IDApIHsKICAgIHRocm93IG5ldyBFbWJlci5FcnJvcigiRWxlbWVudCAi
        ICsgc2VsZWN0b3IgKyAiIG5vdCBmb3VuZC4iKTsKICB9CiAgcmV0dXJuICRl
        bDsKfQoKZnVuY3Rpb24gZmluZChhcHAsIHNlbGVjdG9yLCBjb250ZXh0KSB7
        CiAgdmFyICRlbDsKICBjb250ZXh0ID0gY29udGV4dCB8fCBnZXQoYXBwLCAn
        cm9vdEVsZW1lbnQnKTsKICAkZWwgPSBhcHAuJChzZWxlY3RvciwgY29udGV4
        dCk7CgogIHJldHVybiAkZWw7Cn0KCmZ1bmN0aW9uIGFuZFRoZW4oYXBwLCBj
        YWxsYmFjaykgewogIHJldHVybiB3YWl0KGFwcCwgY2FsbGJhY2soYXBwKSk7
        Cn0KCmZ1bmN0aW9uIHdhaXQoYXBwLCB2YWx1ZSkgewogIHJldHVybiBUZXN0
        LnByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSkgewogICAgLy8gSWYgdGhpcyBp
        cyB0aGUgZmlyc3QgYXN5bmMgcHJvbWlzZSwga2ljayBvZmYgdGhlIGFzeW5j
        IHRlc3QKICAgIGlmICgrK2NvdW50QXN5bmMgPT09IDEpIHsKICAgICAgVGVz
        dC5hZGFwdGVyLmFzeW5jU3RhcnQoKTsKICAgIH0KCiAgICAvLyBFdmVyeSAx
        MG1zLCBwb2xsIGZvciB0aGUgYXN5bmMgdGhpbmcgdG8gaGF2ZSBmaW5pc2hl
        ZAogICAgdmFyIHdhdGNoZXIgPSBzZXRJbnRlcnZhbChmdW5jdGlvbigpIHsK
        ICAgICAgLy8gMS4gSWYgdGhlIHJvdXRlciBpcyBsb2FkaW5nLCBrZWVwIHBv
        bGxpbmcKICAgICAgdmFyIHJvdXRlcklzTG9hZGluZyA9IGFwcC5fX2NvbnRh
        aW5lcl9fLmxvb2t1cCgncm91dGVyOm1haW4nKS5yb3V0ZXIuaXNMb2FkaW5n
        OwogICAgICBpZiAocm91dGVySXNMb2FkaW5nKSB7IHJldHVybjsgfQoKICAg
        ICAgLy8gMi4gSWYgdGhlcmUgYXJlIHBlbmRpbmcgQWpheCByZXF1ZXN0cywg
        a2VlcCBwb2xsaW5nCiAgICAgIGlmIChUZXN0LnBlbmRpbmdBamF4UmVxdWVz
        dHMpIHsgcmV0dXJuOyB9CgogICAgICAvLyAzLiBJZiB0aGVyZSBhcmUgc2No
        ZWR1bGVkIHRpbWVycyBvciB3ZSBhcmUgaW5zaWRlIG9mIGEgcnVuIGxvb3As
        IGtlZXAgcG9sbGluZwogICAgICBpZiAoRW1iZXIucnVuLmhhc1NjaGVkdWxl
        ZFRpbWVycygpIHx8IEVtYmVyLnJ1bi5jdXJyZW50UnVuTG9vcCkgeyByZXR1
        cm47IH0KICAgICAgICAgICAgLy8gU3RvcCBwb2xsaW5nCiAgICAgIGNsZWFy
        SW50ZXJ2YWwod2F0Y2hlcik7CgogICAgICAvLyBJZiB0aGlzIGlzIHRoZSBs
        YXN0IGFzeW5jIHByb21pc2UsIGVuZCB0aGUgYXN5bmMgdGVzdAogICAgICBp
        ZiAoLS1jb3VudEFzeW5jID09PSAwKSB7CiAgICAgICAgVGVzdC5hZGFwdGVy
        LmFzeW5jRW5kKCk7CiAgICAgIH0KCiAgICAgIC8vIFN5bmNocm9ub3VzbHkg
        cmVzb2x2ZSB0aGUgcHJvbWlzZQogICAgICBFbWJlci5ydW4obnVsbCwgcmVz
        b2x2ZSwgdmFsdWUpOwogICAgfSwgMTApOwogIH0pOwoKfQoKCi8qKgoqIExv
        YWRzIGEgcm91dGUsIHNldHMgdXAgYW55IGNvbnRyb2xsZXJzLCBhbmQgcmVu
        ZGVycyBhbnkgdGVtcGxhdGVzIGFzc29jaWF0ZWQKKiB3aXRoIHRoZSByb3V0
        ZSBhcyB0aG91Z2ggYSByZWFsIHVzZXIgaGFkIHRyaWdnZXJlZCB0aGUgcm91
        dGUgY2hhbmdlIHdoaWxlCiogdXNpbmcgeW91ciBhcHAuCioKKiBFeGFtcGxl
        OgoqCiogYGBgCiogdmlzaXQoJ3Bvc3RzL2luZGV4JykudGhlbihmdW5jdGlv
        bigpIHsKKiAgIC8vIGFzc2VydCBzb21ldGhpbmcKKiB9KTsKKiBgYGAKKgoq
        IEBtZXRob2QgdmlzaXQKKiBAcGFyYW0ge1N0cmluZ30gdXJsIHRoZSBuYW1l
        IG9mIHRoZSByb3V0ZQoqIEByZXR1cm4ge1JTVlAuUHJvbWlzZX0KKi8KYXN5
        bmNIZWxwZXIoJ3Zpc2l0JywgdmlzaXQpOwoKLyoqCiogQ2xpY2tzIGFuIGVs
        ZW1lbnQgYW5kIHRyaWdnZXJzIGFueSBhY3Rpb25zIHRyaWdnZXJlZCBieSB0
        aGUgZWxlbWVudCdzIGBjbGlja2AKKiBldmVudC4KKgoqIEV4YW1wbGU6CioK
        KiBgYGAKKiBjbGljaygnLnNvbWUtalF1ZXJ5LXNlbGVjdG9yJykudGhlbihm
        dW5jdGlvbigpIHsKKiAgLy8gYXNzZXJ0IHNvbWV0aGluZwoqIH0pOwoqIGBg
        YAoqCiogQG1ldGhvZCBjbGljawoqIEBwYXJhbSB7U3RyaW5nfSBzZWxlY3Rv
        ciBqUXVlcnkgc2VsZWN0b3IgZm9yIGZpbmRpbmcgZWxlbWVudCBvbiB0aGUg
        RE9NCiogQHJldHVybiB7UlNWUC5Qcm9taXNlfQoqLwphc3luY0hlbHBlcign
        Y2xpY2snLCBjbGljayk7CgovKioKKiBTaW11bGF0ZXMgYSBrZXkgZXZlbnQs
        IGUuZy4gYGtleXByZXNzYCwgYGtleWRvd25gLCBga2V5dXBgIHdpdGggdGhl
        IGRlc2lyZWQga2V5Q29kZQoqCiogRXhhbXBsZToKKgoqIGBgYAoqIGtleUV2
        ZW50KCcuc29tZS1qUXVlcnktc2VsZWN0b3InLCAna2V5cHJlc3MnLCAxMyku
        dGhlbihmdW5jdGlvbigpIHsKKiAgLy8gYXNzZXJ0IHNvbWV0aGluZwoqIH0p
        OwoqIGBgYAoqCiogQG1ldGhvZCBrZXlFdmVudAoqIEBwYXJhbSB7U3RyaW5n
        fSBzZWxlY3RvciBqUXVlcnkgc2VsZWN0b3IgZm9yIGZpbmRpbmcgZWxlbWVu
        dCBvbiB0aGUgRE9NCiogQHBhcmFtIHtTdHJpbmd9IHRoZSB0eXBlIG9mIGtl
        eSBldmVudCwgZS5nLiBga2V5cHJlc3NgLCBga2V5ZG93bmAsIGBrZXl1cGAK
        KiBAcGFyYW0ge051bWJlcn0gdGhlIGtleUNvZGUgb2YgdGhlIHNpbXVsYXRl
        ZCBrZXkgZXZlbnQKKiBAcmV0dXJuIHtSU1ZQLlByb21pc2V9CiovCmFzeW5j
        SGVscGVyKCdrZXlFdmVudCcsIGtleUV2ZW50KTsKCi8qKgoqIEZpbGxzIGlu
        IGFuIGlucHV0IGVsZW1lbnQgd2l0aCBzb21lIHRleHQuCioKKiBFeGFtcGxl
        OgoqCiogYGBgCiogZmlsbEluKCcjZW1haWwnLCAneW91QGV4YW1wbGUuY29t
        JykudGhlbihmdW5jdGlvbigpIHsKKiAgIC8vIGFzc2VydCBzb21ldGhpbmcK
        KiB9KTsKKiBgYGAKKgoqIEBtZXRob2QgZmlsbEluCiogQHBhcmFtIHtTdHJp
        bmd9IHNlbGVjdG9yIGpRdWVyeSBzZWxlY3RvciBmaW5kaW5nIGFuIGlucHV0
        IGVsZW1lbnQgb24gdGhlIERPTQoqIHRvIGZpbGwgdGV4dCB3aXRoCiogQHBh
        cmFtIHtTdHJpbmd9IHRleHQgdGV4dCB0byBwbGFjZSBpbnNpZGUgdGhlIGlu
        cHV0IGVsZW1lbnQKKiBAcmV0dXJuIHtSU1ZQLlByb21pc2V9CiovCmFzeW5j
        SGVscGVyKCdmaWxsSW4nLCBmaWxsSW4pOwoKLyoqCiogRmluZHMgYW4gZWxl
        bWVudCBpbiB0aGUgY29udGV4dCBvZiB0aGUgYXBwJ3MgY29udGFpbmVyIGVs
        ZW1lbnQuIEEgc2ltcGxlIGFsaWFzCiogZm9yIGBhcHAuJChzZWxlY3Rvcilg
        LgoqCiogRXhhbXBsZToKKgoqIGBgYAoqIHZhciAkZWwgPSBmaW5kKCcubXkt
        c2VsZWN0b3IpOwoqIGBgYAoqCiogQG1ldGhvZCBmaW5kCiogQHBhcmFtIHtT
        dHJpbmd9IHNlbGVjdG9yIGpRdWVyeSBzdHJpbmcgc2VsZWN0b3IgZm9yIGVs
        ZW1lbnQgbG9va3VwCiogQHJldHVybiB7T2JqZWN0fSBqUXVlcnkgb2JqZWN0
        IHJlcHJlc2VudGluZyB0aGUgcmVzdWx0cyBvZiB0aGUgcXVlcnkKKi8KaGVs
        cGVyKCdmaW5kJywgZmluZCk7CgovKioKKgoqIExpa2UgYGZpbmRgLCBidXQg
        dGhyb3dzIGFuIGVycm9yIGlmIHRoZSBlbGVtZW50IHNlbGVjdG9yIHJldHVy
        bnMgbm8gcmVzdWx0cwoqCiogRXhhbXBsZToKKgoqIGBgYAoqIHZhciAkZWwg
        PSBmaW5kV2l0aEFzc2VydCgnLmRvZXNudC1leGlzdCcpOyAvLyB0aHJvd3Mg
        ZXJyb3IKKiBgYGAKKgoqIEBtZXRob2QgZmluZFdpdGhBc3NlcnQKKiBAcGFy
        YW0ge1N0cmluZ30gc2VsZWN0b3IgalF1ZXJ5IHNlbGVjdG9yIHN0cmluZyBm
        b3IgZmluZGluZyBhbiBlbGVtZW50IHdpdGhpbgoqIHRoZSBET00KKiBAcmV0
        dXJuIHtPYmplY3R9IGpRdWVyeSBvYmplY3QgcmVwcmVzZW50aW5nIHRoZSBy
        ZXN1bHRzIG9mIHRoZSBxdWVyeQoqIEB0aHJvd3Mge0Vycm9yfSB0aHJvd3Mg
        ZXJyb3IgaWYgalF1ZXJ5IG9iamVjdCByZXR1cm5lZCBoYXMgYSBsZW5ndGgg
        b2YgMAoqLwpoZWxwZXIoJ2ZpbmRXaXRoQXNzZXJ0JywgZmluZFdpdGhBc3Nl
        cnQpOwoKLyoqCiAgQ2F1c2VzIHRoZSBydW4gbG9vcCB0byBwcm9jZXNzIGFu
        eSBwZW5kaW5nIGV2ZW50cy4gVGhpcyBpcyB1c2VkIHRvIGVuc3VyZSB0aGF0
        CiAgYW55IGFzeW5jIG9wZXJhdGlvbnMgZnJvbSBvdGhlciBoZWxwZXJzIChv
        ciB5b3VyIGFzc2VydGlvbnMpIGhhdmUgYmVlbiBwcm9jZXNzZWQuCgogIFRo
        aXMgaXMgbW9zdCBvZnRlbiB1c2VkIGFzIHRoZSByZXR1cm4gdmFsdWUgZm9y
        IHRoZSBoZWxwZXIgZnVuY3Rpb25zIChzZWUgJ2NsaWNrJywKICAnZmlsbElu
        JywndmlzaXQnLGV0YykuCgogIEV4YW1wbGU6CgogIGBgYAogIEVtYmVyLlRl
        c3QucmVnaXN0ZXJBc3luY0hlbHBlcignbG9naW5Vc2VyJywgZnVuY3Rpb24o
        YXBwLCB1c2VybmFtZSwgcGFzc3dvcmQpIHsKICAgIHZpc2l0KCdzZWN1cmVk
        L3BhdGgvaGVyZScpCiAgICAuZmlsbEluKCcjdXNlcm5hbWUnLCB1c2VybmFt
        ZSkKICAgIC5maWxsSW4oJyNwYXNzd29yZCcsIHVzZXJuYW1lKQogICAgLmNs
        aWNrKCcuc3VibWl0JykKCiAgICByZXR1cm4gd2FpdCgpOwogIH0pOwoKICBA
        bWV0aG9kIHdhaXQKICBAcGFyYW0ge09iamVjdH0gdmFsdWUgVGhlIHZhbHVl
        IHRvIGJlIHJldHVybmVkLgogIEByZXR1cm4ge1JTVlAuUHJvbWlzZX0KICBg
        YGAKKi8KYXN5bmNIZWxwZXIoJ3dhaXQnLCB3YWl0KTsKYXN5bmNIZWxwZXIo
        J2FuZFRoZW4nLCBhbmRUaGVuKTsKCn0pKCk7CgoKCihmdW5jdGlvbigpIHsK
        LyoqCiAgRW1iZXIgVGVzdGluZwoKICBAbW9kdWxlIGVtYmVyCiAgQHN1Ym1v
        ZHVsZSBlbWJlci10ZXN0aW5nCiAgQHJlcXVpcmVzIGVtYmVyLWFwcGxpY2F0
        aW9uCiovCgp9KSgpOwoKKGZ1bmN0aW9uKCkgewovKioKRW1iZXIKCkBtb2R1
        bGUgZW1iZXIKKi8KCmZ1bmN0aW9uIHRocm93V2l0aE1lc3NhZ2UobXNnKSB7
        CiAgcmV0dXJuIGZ1bmN0aW9uKCkgewogICAgdGhyb3cgbmV3IEVtYmVyLkVy
        cm9yKG1zZyk7CiAgfTsKfQoKZnVuY3Rpb24gZ2VuZXJhdGVSZW1vdmVkQ2xh
        c3MoY2xhc3NOYW1lKSB7CiAgdmFyIG1zZyA9ICIgaGFzIGJlZW4gbW92ZWQg
        aW50byBhIHBsdWdpbjogaHR0cHM6Ly9naXRodWIuY29tL2VtYmVyanMvZW1i
        ZXItc3RhdGVzIjsKCiAgcmV0dXJuIHsKICAgIGV4dGVuZDogdGhyb3dXaXRo
        TWVzc2FnZShjbGFzc05hbWUgKyBtc2cpLAogICAgY3JlYXRlOiB0aHJvd1dp
        dGhNZXNzYWdlKGNsYXNzTmFtZSArIG1zZykKICB9Owp9CgpFbWJlci5TdGF0
        ZU1hbmFnZXIgPSBnZW5lcmF0ZVJlbW92ZWRDbGFzcygiRW1iZXIuU3RhdGVN
        YW5hZ2VyIik7CgovKioKICBUaGlzIHdhcyBleHBvcnRlZCB0byBlbWJlci1z
        dGF0ZXMgcGx1Z2luIGZvciB2IDEuMC4wIHJlbGVhc2UuIFNlZTogaHR0cHM6
        Ly9naXRodWIuY29tL2VtYmVyanMvZW1iZXItc3RhdGVzCiAgCiAgQGNsYXNz
        IFN0YXRlTWFuYWdlcgogIEBuYW1lc3BhY2UgRW1iZXIKKi8KCkVtYmVyLlN0
        YXRlID0gZ2VuZXJhdGVSZW1vdmVkQ2xhc3MoIkVtYmVyLlN0YXRlIik7Cgov
        KioKICBUaGlzIHdhcyBleHBvcnRlZCB0byBlbWJlci1zdGF0ZXMgcGx1Z2lu
        IGZvciB2IDEuMC4wIHJlbGVhc2UuIFNlZTogaHR0cHM6Ly9naXRodWIuY29t
        L2VtYmVyanMvZW1iZXItc3RhdGVzCiAgCiAgQGNsYXNzIFN0YXRlCiAgQG5h
        bWVzcGFjZSBFbWJlcgoqLwoKfSkoKTsKCgp9KSgpOwo=
    http_version: 
  recorded_at: Mon, 17 Feb 2014 11:45:19 GMT
- request:
    method: get
    uri: http://builds.emberjs.com/tags/v1.2.0-beta.2/ember.min.js
    body:
      encoding: US-ASCII
      string: ''
    headers:
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - '*/*'
      User-Agent:
      - Ruby
      Host:
      - builds.emberjs.com
  response:
    status:
      code: 200
      message: OK
    headers:
      X-Amz-Id-2:
      - 1Cy5lpZagh4B47AieJ+cRFtBlcToKgX4Tn4oiNSCrYpQAUcYJGEAe6x2GMW+rRbo
      X-Amz-Request-Id:
      - D4B68D4D60C5E526
      Date:
      - Mon, 17 Feb 2014 11:45:21 GMT
      Last-Modified:
      - Fri, 25 Oct 2013 21:13:25 GMT
      Etag:
      - '"df24a83abd01c6149a8e14867d8925b6"'
      Content-Type:
      - text/javascript
      Content-Length:
      - '247775'
      Server:
      - AmazonS3
    body:
      encoding: ASCII-8BIT
      string: !binary |-
        Ly8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
        PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KLy8gUHJvamVjdDog
        ICBFbWJlciAtIEphdmFTY3JpcHQgQXBwbGljYXRpb24gRnJhbWV3b3JrCi8v
        IENvcHlyaWdodDogQ29weXJpZ2h0IDIwMTEtMjAxMyBUaWxkZSBJbmMuIGFu
        ZCBjb250cmlidXRvcnMKLy8gICAgICAgICAgICBQb3J0aW9ucyBDb3B5cmln
        aHQgMjAwNi0yMDExIFN0cm9iZSBJbmMuCi8vICAgICAgICAgICAgUG9ydGlv
        bnMgQ29weXJpZ2h0IDIwMDgtMjAxMSBBcHBsZSBJbmMuIEFsbCByaWdodHMg
        cmVzZXJ2ZWQuCi8vIExpY2Vuc2U6ICAgTGljZW5zZWQgdW5kZXIgTUlUIGxp
        Y2Vuc2UKLy8gICAgICAgICAgICBTZWUgaHR0cHM6Ly9yYXcuZ2l0aHViLmNv
        bS9lbWJlcmpzL2VtYmVyLmpzL21hc3Rlci9MSUNFTlNFCi8vID09PT09PT09
        PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
        PT09PT09PT09PT09PT09PT09PT09CgoKIC8vIFZlcnNpb246IDEuMi4wLWJl
        dGEuMgoKLy8gQ29weXJpZ2h0OiBDb3B5cmlnaHQgMjAxMS0yMDEzIFRpbGRl
        IEluYy4gYW5kIGNvbnRyaWJ1dG9ycwovLyAgICAgICAgICAgIFBvcnRpb25z
        IENvcHlyaWdodCAyMDA2LTIwMTEgU3Ryb2JlIEluYy4KLy8gICAgICAgICAg
        ICBQb3J0aW9ucyBDb3B5cmlnaHQgMjAwOC0yMDExIEFwcGxlIEluYy4gQWxs
        IHJpZ2h0cyByZXNlcnZlZC4KIWZ1bmN0aW9uKCl7dmFyIGUsdDshZnVuY3Rp
        b24oKXt2YXIgcj17fSxuPXt9O2U9ZnVuY3Rpb24oZSx0LG4pe3JbZV09e2Rl
        cHM6dCxjYWxsYmFjazpufX0sdD1mdW5jdGlvbihlKXtpZihuW2VdKXJldHVy
        biBuW2VdO25bZV09e307dmFyIGksbyxhLHMsdTtpZihpPXJbZV0sIWkpdGhy
        b3cgbmV3IEVycm9yKCJNb2R1bGUgJyIrZSsiJyBub3QgZm91bmQuIik7bz1p
        LmRlcHMsYT1pLmNhbGxiYWNrLHM9W107Zm9yKHZhciBjPTAsbD1vLmxlbmd0
        aDtsPmM7YysrKSJleHBvcnRzIj09PW9bY10/cy5wdXNoKHU9e30pOnMucHVz
        aCh0KG9bY10pKTt2YXIgaD1hLmFwcGx5KHRoaXMscyk7cmV0dXJuIG5bZV09
        dXx8aH19KCksZnVuY3Rpb24oKXsidW5kZWZpbmVkIj09dHlwZW9mIEVtYmVy
        JiYoRW1iZXI9e30pLEVtYmVyLmltcG9ydHM9RW1iZXIuaW1wb3J0c3x8dGhp
        czt2YXIgZT1FbWJlci5leHBvcnRzPUVtYmVyLmV4cG9ydHN8fHRoaXM7RW1i
        ZXIubG9va3VwPUVtYmVyLmxvb2t1cHx8dGhpcyxlLkVtPWUuRW1iZXI9RW09
        RW1iZXIsRW1iZXIuaXNOYW1lc3BhY2U9ITAsRW1iZXIudG9TdHJpbmc9ZnVu
        Y3Rpb24oKXtyZXR1cm4iRW1iZXIifSxFbWJlci5WRVJTSU9OPSIxLjIuMC1i
        ZXRhLjIiLCJ1bmRlZmluZWQiPT10eXBlb2YgRU5WJiYoZS5FTlY9e30pLCJ1
        bmRlZmluZWQiPT10eXBlb2YgRU5WLkRJU0FCTEVfUkFOR0VfQVBJJiYoRU5W
        LkRJU0FCTEVfUkFOR0VfQVBJPSEwKSxFbWJlci5FTlY9RW1iZXIuRU5WfHxF
        TlYsRW1iZXIuY29uZmlnPUVtYmVyLmNvbmZpZ3x8e30sRW1iZXIuRkVBVFVS
        RVM9RW1iZXIuRU5WLkZFQVRVUkVTfHx7fSxFbWJlci5GRUFUVVJFUy5pc0Vu
        YWJsZWQ9ZnVuY3Rpb24oZSl7dmFyIHQ9RW1iZXIuRkVBVFVSRVNbZV07cmV0
        dXJuIEVtYmVyLkVOVi5FTkFCTEVfQUxMX0ZFQVRVUkVTPyEwOnQ9PT0hMHx8
        dD09PSExfHx2b2lkIDA9PT10P3Q6RW1iZXIuRU5WLkVOQUJMRV9PUFRJT05B
        TF9GRUFUVVJFUz8hMDohMX0sRW1iZXIuRVhURU5EX1BST1RPVFlQRVM9RW1i
        ZXIuRU5WLkVYVEVORF9QUk9UT1RZUEVTLCJ1bmRlZmluZWQiPT10eXBlb2Yg
        RW1iZXIuRVhURU5EX1BST1RPVFlQRVMmJihFbWJlci5FWFRFTkRfUFJPVE9U
        WVBFUz0hMCksRW1iZXIuTE9HX1NUQUNLVFJBQ0VfT05fREVQUkVDQVRJT049
        RW1iZXIuRU5WLkxPR19TVEFDS1RSQUNFX09OX0RFUFJFQ0FUSU9OIT09ITEs
        RW1iZXIuU0hJTV9FUzU9RW1iZXIuRU5WLlNISU1fRVM1PT09ITE/ITE6RW1i
        ZXIuRVhURU5EX1BST1RPVFlQRVMsRW1iZXIuTE9HX1ZFUlNJT049RW1iZXIu
        RU5WLkxPR19WRVJTSU9OPT09ITE/ITE6ITAsRW1iZXIuSz1mdW5jdGlvbigp
        e3JldHVybiB0aGlzfSwidW5kZWZpbmVkIj09dHlwZW9mIEVtYmVyLmFzc2Vy
        dCYmKEVtYmVyLmFzc2VydD1FbWJlci5LKSwidW5kZWZpbmVkIj09dHlwZW9m
        IEVtYmVyLndhcm4mJihFbWJlci53YXJuPUVtYmVyLkspLCJ1bmRlZmluZWQi
        PT10eXBlb2YgRW1iZXIuZGVidWcmJihFbWJlci5kZWJ1Zz1FbWJlci5LKSwi
        dW5kZWZpbmVkIj09dHlwZW9mIEVtYmVyLmRlcHJlY2F0ZSYmKEVtYmVyLmRl
        cHJlY2F0ZT1FbWJlci5LKSwidW5kZWZpbmVkIj09dHlwZW9mIEVtYmVyLmRl
        cHJlY2F0ZUZ1bmMmJihFbWJlci5kZXByZWNhdGVGdW5jPWZ1bmN0aW9uKGUs
        dCl7cmV0dXJuIHR9KSxFbWJlci51dWlkPTAsRW1iZXIubWVyZ2U9ZnVuY3Rp
        b24oZSx0KXtmb3IodmFyIHIgaW4gdCl0Lmhhc093blByb3BlcnR5KHIpJiYo
        ZVtyXT10W3JdKTtyZXR1cm4gZX0sRW1iZXIuaXNOb25lPWZ1bmN0aW9uKGUp
        e3JldHVybiBudWxsPT09ZXx8dm9pZCAwPT09ZX0sRW1iZXIubm9uZT1FbWJl
        ci5kZXByZWNhdGVGdW5jKCJFbWJlci5ub25lIGlzIGRlcHJlY2F0ZWQuIFBs
        ZWFzZSB1c2UgRW1iZXIuaXNOb25lIGluc3RlYWQuIixFbWJlci5pc05vbmUp
        LEVtYmVyLmlzRW1wdHk9ZnVuY3Rpb24oZSl7cmV0dXJuIEVtYmVyLmlzTm9u
        ZShlKXx8MD09PWUubGVuZ3RoJiYiZnVuY3Rpb24iIT10eXBlb2YgZXx8Im9i
        amVjdCI9PXR5cGVvZiBlJiYwPT09RW1iZXIuZ2V0KGUsImxlbmd0aCIpfSxF
        bWJlci5lbXB0eT1FbWJlci5kZXByZWNhdGVGdW5jKCJFbWJlci5lbXB0eSBp
        cyBkZXByZWNhdGVkLiBQbGVhc2UgdXNlIEVtYmVyLmlzRW1wdHkgaW5zdGVh
        ZC4iLEVtYmVyLmlzRW1wdHkpfSgpLGZ1bmN0aW9uKCl7dmFyIGU9RW1iZXIu
        cGxhdGZvcm09e307aWYoRW1iZXIuY3JlYXRlPU9iamVjdC5jcmVhdGUsRW1i
        ZXIuY3JlYXRlJiYyIT09RW1iZXIuY3JlYXRlKHthOjF9LHthOnt2YWx1ZToy
        fX0pLmEmJihFbWJlci5jcmVhdGU9bnVsbCksIUVtYmVyLmNyZWF0ZXx8RW1i
        ZXIuRU5WLlNUVUJfT0JKRUNUX0NSRUFURSl7dmFyIHQ9ZnVuY3Rpb24oKXt9
        O0VtYmVyLmNyZWF0ZT1mdW5jdGlvbihlLHIpe2lmKHQucHJvdG90eXBlPWUs
        ZT1uZXcgdCxyKXt0LnByb3RvdHlwZT1lO2Zvcih2YXIgbiBpbiByKXQucHJv
        dG90eXBlW25dPXJbbl0udmFsdWU7ZT1uZXcgdH1yZXR1cm4gdC5wcm90b3R5
        cGU9bnVsbCxlfSxFbWJlci5jcmVhdGUuaXNTaW11bGF0ZWQ9ITB9dmFyIHIs
        bixpPU9iamVjdC5kZWZpbmVQcm9wZXJ0eTtpZihpKXRyeXtpKHt9LCJhIix7
        Z2V0OmZ1bmN0aW9uKCl7fX0pfWNhdGNoKG8pe2k9bnVsbH1pJiYocj1mdW5j
        dGlvbigpe3ZhciBlPXt9O3JldHVybiBpKGUsImEiLHtjb25maWd1cmFibGU6
        ITAsZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXt9LHNldDpmdW5jdGlv
        bigpe319KSxpKGUsImEiLHtjb25maWd1cmFibGU6ITAsZW51bWVyYWJsZToh
        MCx3cml0YWJsZTohMCx2YWx1ZTohMH0pLGUuYT09PSEwfSgpLG49ZnVuY3Rp
        b24oKXt0cnl7cmV0dXJuIGkoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2
        IiksImRlZmluZVByb3BlcnR5T25ET00iLHt9KSwhMH1jYXRjaChlKXt9cmV0
        dXJuITF9KCkscj9ufHwoaT1mdW5jdGlvbihlLHQscil7dmFyIG47cmV0dXJu
        IG49Im9iamVjdCI9PXR5cGVvZiBOb2RlP2UgaW5zdGFuY2VvZiBOb2RlOiJv
        YmplY3QiPT10eXBlb2YgZSYmIm51bWJlciI9PXR5cGVvZiBlLm5vZGVUeXBl
        JiYic3RyaW5nIj09dHlwZW9mIGUubm9kZU5hbWUsbj9lW3RdPXIudmFsdWU6
        T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsdCxyKX0pOmk9bnVsbCksZS5kZWZp
        bmVQcm9wZXJ0eT1pLGUuaGFzUHJvcGVydHlBY2Nlc3NvcnM9ITAsZS5kZWZp
        bmVQcm9wZXJ0eXx8KGUuaGFzUHJvcGVydHlBY2Nlc3NvcnM9ITEsZS5kZWZp
        bmVQcm9wZXJ0eT1mdW5jdGlvbihlLHQscil7ci5nZXR8fChlW3RdPXIudmFs
        dWUpfSxlLmRlZmluZVByb3BlcnR5LmlzU2ltdWxhdGVkPSEwKSxFbWJlci5F
        TlYuTUFOREFUT1JZX1NFVFRFUiYmIWUuaGFzUHJvcGVydHlBY2Nlc3NvcnMm
        JihFbWJlci5FTlYuTUFOREFUT1JZX1NFVFRFUj0hMSl9KCksZnVuY3Rpb24o
        KXt2YXIgZT1mdW5jdGlvbihlKXtyZXR1cm4gZSYmRnVuY3Rpb24ucHJvdG90
        eXBlLnRvU3RyaW5nLmNhbGwoZSkuaW5kZXhPZigiW25hdGl2ZSBjb2RlXSIp
        Pi0xfSx0PWUoQXJyYXkucHJvdG90eXBlLm1hcCk/QXJyYXkucHJvdG90eXBl
        Lm1hcDpmdW5jdGlvbihlKXtpZih2b2lkIDA9PT10aGlzfHxudWxsPT09dGhp
        cyl0aHJvdyBuZXcgVHlwZUVycm9yO3ZhciB0PU9iamVjdCh0aGlzKSxyPXQu
        bGVuZ3RoPj4+MDtpZigiZnVuY3Rpb24iIT10eXBlb2YgZSl0aHJvdyBuZXcg
        VHlwZUVycm9yO2Zvcih2YXIgbj1uZXcgQXJyYXkociksaT1hcmd1bWVudHNb
        MV0sbz0wO3I+bztvKyspbyBpbiB0JiYobltvXT1lLmNhbGwoaSx0W29dLG8s
        dCkpO3JldHVybiBufSxyPWUoQXJyYXkucHJvdG90eXBlLmZvckVhY2gpP0Fy
        cmF5LnByb3RvdHlwZS5mb3JFYWNoOmZ1bmN0aW9uKGUpe2lmKHZvaWQgMD09
        PXRoaXN8fG51bGw9PT10aGlzKXRocm93IG5ldyBUeXBlRXJyb3I7dmFyIHQ9
        T2JqZWN0KHRoaXMpLHI9dC5sZW5ndGg+Pj4wO2lmKCJmdW5jdGlvbiIhPXR5
        cGVvZiBlKXRocm93IG5ldyBUeXBlRXJyb3I7Zm9yKHZhciBuPWFyZ3VtZW50
        c1sxXSxpPTA7cj5pO2krKylpIGluIHQmJmUuY2FsbChuLHRbaV0saSx0KX0s
        bj1lKEFycmF5LnByb3RvdHlwZS5pbmRleE9mKT9BcnJheS5wcm90b3R5cGUu
        aW5kZXhPZjpmdW5jdGlvbihlLHQpe251bGw9PT10fHx2b2lkIDA9PT10P3Q9
        MDowPnQmJih0PU1hdGgubWF4KDAsdGhpcy5sZW5ndGgrdCkpO2Zvcih2YXIg
        cj10LG49dGhpcy5sZW5ndGg7bj5yO3IrKylpZih0aGlzW3JdPT09ZSlyZXR1
        cm4gcjtyZXR1cm4tMX07RW1iZXIuQXJyYXlQb2x5ZmlsbHM9e21hcDp0LGZv
        ckVhY2g6cixpbmRleE9mOm59LEVtYmVyLlNISU1fRVM1JiYoQXJyYXkucHJv
        dG90eXBlLm1hcHx8KEFycmF5LnByb3RvdHlwZS5tYXA9dCksQXJyYXkucHJv
        dG90eXBlLmZvckVhY2h8fChBcnJheS5wcm90b3R5cGUuZm9yRWFjaD1yKSxB
        cnJheS5wcm90b3R5cGUuaW5kZXhPZnx8KEFycmF5LnByb3RvdHlwZS5pbmRl
        eE9mPW4pKX0oKSxmdW5jdGlvbigpe3ZhciBlPVsiZGVzY3JpcHRpb24iLCJm
        aWxlTmFtZSIsImxpbmVOdW1iZXIiLCJtZXNzYWdlIiwibmFtZSIsIm51bWJl
        ciIsInN0YWNrIl07RW1iZXIuRXJyb3I9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9
        RXJyb3IuYXBwbHkodGhpcyxhcmd1bWVudHMpLHI9MDtyPGUubGVuZ3RoO3Ir
        Kyl0aGlzW2Vbcl1dPXRbZVtyXV19LEVtYmVyLkVycm9yLnByb3RvdHlwZT1F
        bWJlci5jcmVhdGUoRXJyb3IucHJvdG90eXBlKSxFbWJlci5vbmVycm9yPW51
        bGwsRW1iZXIuaGFuZGxlRXJyb3JzPWZ1bmN0aW9uKGUsdCl7aWYoImZ1bmN0
        aW9uIiE9dHlwZW9mIEVtYmVyLm9uZXJyb3IpcmV0dXJuIGUuY2FsbCh0fHx0
        aGlzKTt0cnl7cmV0dXJuIGUuY2FsbCh0fHx0aGlzKX1jYXRjaChyKXtFbWJl
        ci5vbmVycm9yKHIpfX19KCksZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUpe3Ro
        aXMuZGVzY3M9e30sdGhpcy53YXRjaGluZz17fSx0aGlzLmNhY2hlPXt9LHRo
        aXMuc291cmNlPWV9ZnVuY3Rpb24gdChlLHQpe3JldHVybiEoIWV8fCJmdW5j
        dGlvbiIhPXR5cGVvZiBlW3RdKX1FbWJlci5HVUlEX1BSRUZJWD0iZW1iZXIi
        O3ZhciByPUVtYmVyLnBsYXRmb3JtLmRlZmluZVByb3BlcnR5LG49RW1iZXIu
        Y3JlYXRlLGk9Il9fZW1iZXIiKyArbmV3IERhdGUsbz0wLGE9W10scz17fSx1
        PUVtYmVyLkVOVi5NQU5EQVRPUllfU0VUVEVSO0VtYmVyLkdVSURfS0VZPWk7
        dmFyIGM9e3dyaXRhYmxlOiExLGNvbmZpZ3VyYWJsZTohMSxlbnVtZXJhYmxl
        OiExLHZhbHVlOm51bGx9O0VtYmVyLmdlbmVyYXRlR3VpZD1mdW5jdGlvbihl
        LHQpe3R8fCh0PUVtYmVyLkdVSURfUFJFRklYKTt2YXIgbj10K28rKztyZXR1
        cm4gZSYmKGMudmFsdWU9bixyKGUsaSxjKSksbn0sRW1iZXIuZ3VpZEZvcj1m
        dW5jdGlvbihlKXtpZih2b2lkIDA9PT1lKXJldHVybiIodW5kZWZpbmVkKSI7
        aWYobnVsbD09PWUpcmV0dXJuIihudWxsKSI7dmFyIHQsbj10eXBlb2YgZTtz
        d2l0Y2gobil7Y2FzZSJudW1iZXIiOnJldHVybiB0PWFbZV0sdHx8KHQ9YVtl
        XT0ibnUiK2UpLHQ7Y2FzZSJzdHJpbmciOnJldHVybiB0PXNbZV0sdHx8KHQ9
        c1tlXT0ic3QiK28rKyksdDtjYXNlImJvb2xlYW4iOnJldHVybiBlPyIodHJ1
        ZSkiOiIoZmFsc2UpIjtkZWZhdWx0OnJldHVybiBlW2ldP2VbaV06ZT09PU9i
        amVjdD8iKE9iamVjdCkiOmU9PT1BcnJheT8iKEFycmF5KSI6KHQ9ImVtYmVy
        IitvKyssYy52YWx1ZT10LHIoZSxpLGMpLHQpfX07dmFyIGw9e3dyaXRhYmxl
        OiEwLGNvbmZpZ3VyYWJsZTohMSxlbnVtZXJhYmxlOiExLHZhbHVlOm51bGx9
        LGg9RW1iZXIuR1VJRF9LRVkrIl9tZXRhIjtFbWJlci5NRVRBX0tFWT1oO3Zh
        ciBtPXtkZXNjczp7fSx3YXRjaGluZzp7fX07dSYmKG0udmFsdWVzPXt9KSxF
        bWJlci5FTVBUWV9NRVRBPW0sT2JqZWN0LmZyZWV6ZSYmT2JqZWN0LmZyZWV6
        ZShtKTt2YXIgZj1FbWJlci5wbGF0Zm9ybS5kZWZpbmVQcm9wZXJ0eS5pc1Np
        bXVsYXRlZDtmJiYoZS5wcm90b3R5cGUuX19wcmV2ZW50UGxhaW5PYmplY3Rf
        Xz0hMCxlLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXt9KSxFbWJlci5t
        ZXRhPWZ1bmN0aW9uKHQsaSl7dmFyIG89dFtoXTtyZXR1cm4gaT09PSExP298
        fG06KG8/by5zb3VyY2UhPT10JiYoZnx8cih0LGgsbCksbz1uKG8pLG8uZGVz
        Y3M9bihvLmRlc2NzKSxvLndhdGNoaW5nPW4oby53YXRjaGluZyksby5jYWNo
        ZT17fSxvLnNvdXJjZT10LHUmJihvLnZhbHVlcz1uKG8udmFsdWVzKSksdFto
        XT1vKTooZnx8cih0LGgsbCksbz1uZXcgZSh0KSx1JiYoby52YWx1ZXM9e30p
        LHRbaF09byxvLmRlc2NzLmNvbnN0cnVjdG9yPW51bGwpLG8pfSxFbWJlci5n
        ZXRNZXRhPWZ1bmN0aW9uKGUsdCl7dmFyIHI9RW1iZXIubWV0YShlLCExKTty
        ZXR1cm4gclt0XX0sRW1iZXIuc2V0TWV0YT1mdW5jdGlvbihlLHQscil7dmFy
        IG49RW1iZXIubWV0YShlLCEwKTtyZXR1cm4gblt0XT1yLHJ9LEVtYmVyLm1l
        dGFQYXRoPWZ1bmN0aW9uKGUsdCxyKXtmb3IodmFyIGksbyxhPUVtYmVyLm1l
        dGEoZSxyKSxzPTAsdT10Lmxlbmd0aDt1PnM7cysrKXtpZihpPXRbc10sbz1h
        W2ldKXtpZihvLl9fZW1iZXJfc291cmNlX18hPT1lKXtpZighcilyZXR1cm4g
        dm9pZCAwO289YVtpXT1uKG8pLG8uX19lbWJlcl9zb3VyY2VfXz1lfX1lbHNl
        e2lmKCFyKXJldHVybiB2b2lkIDA7bz1hW2ldPXtfX2VtYmVyX3NvdXJjZV9f
        OmV9fWE9b31yZXR1cm4gb30sRW1iZXIud3JhcD1mdW5jdGlvbihlLHQpe2Z1
        bmN0aW9uIHIoKXt9ZnVuY3Rpb24gbigpe3ZhciBuLGk9dGhpcy5fc3VwZXI7
        cmV0dXJuIHRoaXMuX3N1cGVyPXR8fHIsbj1lLmFwcGx5KHRoaXMsYXJndW1l
        bnRzKSx0aGlzLl9zdXBlcj1pLG59cmV0dXJuIG4ud3JhcHBlZEZ1bmN0aW9u
        PWUsbi5fX2VtYmVyX29ic2VydmVzX189ZS5fX2VtYmVyX29ic2VydmVzX18s
        bi5fX2VtYmVyX29ic2VydmVzQmVmb3JlX189ZS5fX2VtYmVyX29ic2VydmVz
        QmVmb3JlX18sbi5fX2VtYmVyX2xpc3RlbnNfXz1lLl9fZW1iZXJfbGlzdGVu
        c19fLG59LEVtYmVyLmlzQXJyYXk9ZnVuY3Rpb24oZSl7cmV0dXJuIWV8fGUu
        c2V0SW50ZXJ2YWw/ITE6QXJyYXkuaXNBcnJheSYmQXJyYXkuaXNBcnJheShl
        KT8hMDpFbWJlci5BcnJheSYmRW1iZXIuQXJyYXkuZGV0ZWN0KGUpPyEwOnZv
        aWQgMCE9PWUubGVuZ3RoJiYib2JqZWN0Ij09dHlwZW9mIGU/ITA6ITF9LEVt
        YmVyLm1ha2VBcnJheT1mdW5jdGlvbihlKXtyZXR1cm4gbnVsbD09PWV8fHZv
        aWQgMD09PWU/W106RW1iZXIuaXNBcnJheShlKT9lOltlXX0sRW1iZXIuY2Fu
        SW52b2tlPXQsRW1iZXIudHJ5SW52b2tlPWZ1bmN0aW9uKGUscixuKXtyZXR1
        cm4gdChlLHIpP2Vbcl0uYXBwbHkoZSxufHxbXSk6dm9pZCAwfTt2YXIgcD1m
        dW5jdGlvbigpe3ZhciBlPTA7dHJ5e3RyeXt9ZmluYWxseXt0aHJvdyBlKyss
        bmV3IEVycm9yKCJuZWVkc0ZpbmFsbHlGaXhUZXN0Iil9fWNhdGNoKHQpe31y
        ZXR1cm4gMSE9PWV9KCk7RW1iZXIudHJ5RmluYWxseT1wP2Z1bmN0aW9uKGUs
        dCxyKXt2YXIgbixpLG87cj1yfHx0aGlzO3RyeXtuPWUuY2FsbChyKX1maW5h
        bGx5e3RyeXtpPXQuY2FsbChyKX1jYXRjaChhKXtvPWF9fWlmKG8pdGhyb3cg
        bztyZXR1cm4gdm9pZCAwPT09aT9uOml9OmZ1bmN0aW9uKGUsdCxyKXt2YXIg
        bixpO3I9cnx8dGhpczt0cnl7bj1lLmNhbGwocil9ZmluYWxseXtpPXQuY2Fs
        bChyKX1yZXR1cm4gdm9pZCAwPT09aT9uOml9LEVtYmVyLnRyeUNhdGNoRmlu
        YWxseT1wP2Z1bmN0aW9uKGUsdCxyLG4pe3ZhciBpLG8sYTtuPW58fHRoaXM7
        dHJ5e2k9ZS5jYWxsKG4pfWNhdGNoKHMpe2k9dC5jYWxsKG4scyl9ZmluYWxs
        eXt0cnl7bz1yLmNhbGwobil9Y2F0Y2godSl7YT11fX1pZihhKXRocm93IGE7
        cmV0dXJuIHZvaWQgMD09PW8/aTpvfTpmdW5jdGlvbihlLHQscixuKXt2YXIg
        aSxvO249bnx8dGhpczt0cnl7aT1lLmNhbGwobil9Y2F0Y2goYSl7aT10LmNh
        bGwobixhKX1maW5hbGx5e289ci5jYWxsKG4pfXJldHVybiB2b2lkIDA9PT1v
        P2k6b307dmFyIGQ9e30sYj0iQm9vbGVhbiBOdW1iZXIgU3RyaW5nIEZ1bmN0
        aW9uIEFycmF5IERhdGUgUmVnRXhwIE9iamVjdCIuc3BsaXQoIiAiKTtFbWJl
        ci5BcnJheVBvbHlmaWxscy5mb3JFYWNoLmNhbGwoYixmdW5jdGlvbihlKXtk
        WyJbb2JqZWN0ICIrZSsiXSJdPWUudG9Mb3dlckNhc2UoKX0pO3ZhciB2PU9i
        amVjdC5wcm90b3R5cGUudG9TdHJpbmc7RW1iZXIudHlwZU9mPWZ1bmN0aW9u
        KGUpe3ZhciB0O3JldHVybiB0PW51bGw9PT1lfHx2b2lkIDA9PT1lP1N0cmlu
        ZyhlKTpkW3YuY2FsbChlKV18fCJvYmplY3QiLCJmdW5jdGlvbiI9PT10P0Vt
        YmVyLk9iamVjdCYmRW1iZXIuT2JqZWN0LmRldGVjdChlKSYmKHQ9ImNsYXNz
        Iik6Im9iamVjdCI9PT10JiYodD1lIGluc3RhbmNlb2YgRXJyb3I/ImVycm9y
        IjpFbWJlci5PYmplY3QmJmUgaW5zdGFuY2VvZiBFbWJlci5PYmplY3Q/Imlu
        c3RhbmNlIjoib2JqZWN0IiksdH19KCksZnVuY3Rpb24oKXtFbWJlci5JbnN0
        cnVtZW50YXRpb249e307dmFyIGU9W10sdD17fSxyPWZ1bmN0aW9uKHIpe2Zv
        cih2YXIgbixpPVtdLG89MCxhPWUubGVuZ3RoO2E+bztvKyspbj1lW29dLG4u
        cmVnZXgudGVzdChyKSYmaS5wdXNoKG4ub2JqZWN0KTtyZXR1cm4gdFtyXT1p
        LGl9LG49ZnVuY3Rpb24oKXt2YXIgZT0idW5kZWZpbmVkIiE9dHlwZW9mIHdp
        bmRvdz93aW5kb3cucGVyZm9ybWFuY2V8fHt9Ont9LHQ9ZS5ub3d8fGUubW96
        Tm93fHxlLndlYmtpdE5vd3x8ZS5tc05vd3x8ZS5vTm93O3JldHVybiB0P3Qu
        YmluZChlKTpmdW5jdGlvbigpe3JldHVybituZXcgRGF0ZX19KCk7RW1iZXIu
        SW5zdHJ1bWVudGF0aW9uLmluc3RydW1lbnQ9ZnVuY3Rpb24oZSxpLG8sYSl7
        ZnVuY3Rpb24gcygpe2ZvcihwPTAsZD1tLmxlbmd0aDtkPnA7cCsrKWY9bVtw
        XSxiW3BdPWYuYmVmb3JlKGUsbigpLGkpO3JldHVybiBvLmNhbGwoYSl9ZnVu
        Y3Rpb24gdShlKXtpPWl8fHt9LGkuZXhjZXB0aW9uPWV9ZnVuY3Rpb24gYygp
        e2ZvcihwPTAsZD1tLmxlbmd0aDtkPnA7cCsrKWY9bVtwXSxmLmFmdGVyKGUs
        bigpLGksYltwXSk7RW1iZXIuU1RSVUNUVVJFRF9QUk9GSUxFJiZjb25zb2xl
        LnRpbWVFbmQobCl9dmFyIGwsaCxtPXRbZV07aWYoRW1iZXIuU1RSVUNUVVJF
        RF9QUk9GSUxFJiYobD1lKyI6ICIraS5vYmplY3QsY29uc29sZS50aW1lKGwp
        KSxtfHwobT1yKGUpKSwwPT09bS5sZW5ndGgpcmV0dXJuIGg9by5jYWxsKGEp
        LEVtYmVyLlNUUlVDVFVSRURfUFJPRklMRSYmY29uc29sZS50aW1lRW5kKGwp
        LGg7dmFyIGYscCxkLGI9W107cmV0dXJuIEVtYmVyLnRyeUNhdGNoRmluYWxs
        eShzLHUsYyl9LEVtYmVyLkluc3RydW1lbnRhdGlvbi5zdWJzY3JpYmU9ZnVu
        Y3Rpb24ocixuKXtmb3IodmFyIGksbz1yLnNwbGl0KCIuIiksYT1bXSxzPTAs
        dT1vLmxlbmd0aDt1PnM7cysrKWk9b1tzXSwiKiI9PT1pP2EucHVzaCgiW15c
        XC5dKiIpOmEucHVzaChpKTthPWEuam9pbigiXFwuIiksYSs9IihcXC4uKik/
        Ijt2YXIgYz17cGF0dGVybjpyLHJlZ2V4Om5ldyBSZWdFeHAoIl4iK2ErIiQi
        KSxvYmplY3Q6bn07cmV0dXJuIGUucHVzaChjKSx0PXt9LGN9LEVtYmVyLklu
        c3RydW1lbnRhdGlvbi51bnN1YnNjcmliZT1mdW5jdGlvbihyKXtmb3IodmFy
        IG4saT0wLG89ZS5sZW5ndGg7bz5pO2krKyllW2ldPT09ciYmKG49aSk7ZS5z
        cGxpY2UobiwxKSx0PXt9fSxFbWJlci5JbnN0cnVtZW50YXRpb24ucmVzZXQ9
        ZnVuY3Rpb24oKXtlPVtdLHQ9e319LEVtYmVyLmluc3RydW1lbnQ9RW1iZXIu
        SW5zdHJ1bWVudGF0aW9uLmluc3RydW1lbnQsRW1iZXIuc3Vic2NyaWJlPUVt
        YmVyLkluc3RydW1lbnRhdGlvbi5zdWJzY3JpYmV9KCksZnVuY3Rpb24oKXt2
        YXIgZSx0LHIsbjtlPUFycmF5LnByb3RvdHlwZS5tYXB8fEVtYmVyLkFycmF5
        UG9seWZpbGxzLm1hcCx0PUFycmF5LnByb3RvdHlwZS5mb3JFYWNofHxFbWJl
        ci5BcnJheVBvbHlmaWxscy5mb3JFYWNoLHI9QXJyYXkucHJvdG90eXBlLmlu
        ZGV4T2Z8fEVtYmVyLkFycmF5UG9seWZpbGxzLmluZGV4T2Ysbj1BcnJheS5w
        cm90b3R5cGUuc3BsaWNlO3ZhciBpPUVtYmVyLkVudW1lcmFibGVVdGlscz17
        bWFwOmZ1bmN0aW9uKHQscixuKXtyZXR1cm4gdC5tYXA/dC5tYXAuY2FsbCh0
        LHIsbik6ZS5jYWxsKHQscixuKX0sZm9yRWFjaDpmdW5jdGlvbihlLHIsbil7
        cmV0dXJuIGUuZm9yRWFjaD9lLmZvckVhY2guY2FsbChlLHIsbik6dC5jYWxs
        KGUscixuKX0saW5kZXhPZjpmdW5jdGlvbihlLHQsbil7cmV0dXJuIGUuaW5k
        ZXhPZj9lLmluZGV4T2YuY2FsbChlLHQsbik6ci5jYWxsKGUsdCxuKX0saW5k
        ZXhlc09mOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHZvaWQgMD09PXQ/W106aS5t
        YXAodCxmdW5jdGlvbih0KXtyZXR1cm4gaS5pbmRleE9mKGUsdCl9KX0sYWRk
        T2JqZWN0OmZ1bmN0aW9uKGUsdCl7dmFyIHI9aS5pbmRleE9mKGUsdCk7LTE9
        PT1yJiZlLnB1c2godCl9LHJlbW92ZU9iamVjdDpmdW5jdGlvbihlLHQpe3Zh
        ciByPWkuaW5kZXhPZihlLHQpOy0xIT09ciYmZS5zcGxpY2UociwxKX0sX3Jl
        cGxhY2U6ZnVuY3Rpb24oZSx0LHIsaSl7Zm9yKHZhciBvLGEscz1bXS5jb25j
        YXQoaSksdT1bXSxjPTZlNCxsPXQsaD1yO3MubGVuZ3RoOylhPWg+Yz9jOmgs
        MD49YSYmKGE9MCksbz1zLnNwbGljZSgwLGMpLG89W2wsYV0uY29uY2F0KG8p
        LGwrPWMsaC09YSx1PXUuY29uY2F0KG4uYXBwbHkoZSxvKSk7cmV0dXJuIHV9
        LHJlcGxhY2U6ZnVuY3Rpb24oZSx0LHIsbil7cmV0dXJuIGUucmVwbGFjZT9l
        LnJlcGxhY2UodCxyLG4pOmkuX3JlcGxhY2UoZSx0LHIsbil9LGludGVyc2Vj
        dGlvbjpmdW5jdGlvbihlLHQpe3ZhciByPVtdO3JldHVybiBpLmZvckVhY2go
        ZSxmdW5jdGlvbihlKXtpLmluZGV4T2YodCxlKT49MCYmci5wdXNoKGUpfSks
        cn19fSgpLGZ1bmN0aW9uKCl7dmFyIGUsdD1FbWJlci5NRVRBX0tFWSxyPUVt
        YmVyLkVOVi5NQU5EQVRPUllfU0VUVEVSLG49L14oW0EtWiRdfChbMC05XVtB
        LVokXSkpLipbXC5cKl0vLGk9L150aGlzW1wuXCpdLyxvPS9eKFteXC5cKl0r
        KS87ZT1mdW5jdGlvbihlLG4pe2lmKCIiPT09bilyZXR1cm4gZTtpZihufHwi
        c3RyaW5nIiE9dHlwZW9mIGV8fChuPWUsZT1udWxsKSxudWxsPT09ZXx8LTEh
        PT1uLmluZGV4T2YoIi4iKSlyZXR1cm4gcyhlLG4pO3ZhciBpLG89ZVt0XSxh
        PW8mJm8uZGVzY3Nbbl07cmV0dXJuIGE/YS5nZXQoZSxuKTooaT1yJiZvJiZv
        LndhdGNoaW5nW25dPjA/by52YWx1ZXNbbl06ZVtuXSx2b2lkIDAhPT1pfHwi
        b2JqZWN0IiE9dHlwZW9mIGV8fG4gaW4gZXx8ImZ1bmN0aW9uIiE9dHlwZW9m
        IGUudW5rbm93blByb3BlcnR5P2k6ZS51bmtub3duUHJvcGVydHkobikpfSxF
        bWJlci5jb25maWcub3ZlcnJpZGVBY2Nlc3NvcnMmJihFbWJlci5nZXQ9ZSxF
        bWJlci5jb25maWcub3ZlcnJpZGVBY2Nlc3NvcnMoKSxlPUVtYmVyLmdldCk7
        dmFyIGE9RW1iZXIubm9ybWFsaXplVHVwbGU9ZnVuY3Rpb24odCxyKXt2YXIg
        YSxzPWkudGVzdChyKSx1PSFzJiZuLnRlc3Qocik7aWYoKCF0fHx1KSYmKHQ9
        RW1iZXIubG9va3VwKSxzJiYocj1yLnNsaWNlKDUpKSx0PT09RW1iZXIubG9v
        a3VwJiYoYT1yLm1hdGNoKG8pWzBdLHQ9ZSh0LGEpLHI9ci5zbGljZShhLmxl
        bmd0aCsxKSksIXJ8fDA9PT1yLmxlbmd0aCl0aHJvdyBuZXcgRW1iZXIuRXJy
        b3IoIkludmFsaWQgUGF0aCIpO3JldHVyblt0LHJdfSxzPUVtYmVyLl9nZXRQ
        YXRoPWZ1bmN0aW9uKHQscil7dmFyIG4sbyxzLHUsYztpZihudWxsPT09dCYm
        LTE9PT1yLmluZGV4T2YoIi4iKSlyZXR1cm4gZShFbWJlci5sb29rdXAscik7
        Zm9yKG49aS50ZXN0KHIpLCghdHx8bikmJihzPWEodCxyKSx0PXNbMF0scj1z
        WzFdLHMubGVuZ3RoPTApLG89ci5zcGxpdCgiLiIpLGM9by5sZW5ndGgsdT0w
        O251bGwhPXQmJmM+dTt1KyspaWYodD1lKHQsb1t1XSwhMCksdCYmdC5pc0Rl
        c3Ryb3llZClyZXR1cm4gdm9pZCAwO3JldHVybiB0fTtFbWJlci5nZXRXaXRo
        RGVmYXVsdD1mdW5jdGlvbih0LHIsbil7dmFyIGk9ZSh0LHIpO3JldHVybiB2
        b2lkIDA9PT1pP246aX0sRW1iZXIuZ2V0PWV9KCksZnVuY3Rpb24oKXtmdW5j
        dGlvbiBlKGUsdCxyKXtmb3IodmFyIG49LTEsaT0wLG89ZS5sZW5ndGg7bz5p
        O2krPTMpaWYodD09PWVbaV0mJnI9PT1lW2krMV0pe249aTticmVha31yZXR1
        cm4gbn1mdW5jdGlvbiB0KGUsdCl7dmFyIHIsbj1mKGUsITApO3JldHVybiBu
        Lmxpc3RlbmVyc3x8KG4ubGlzdGVuZXJzPXt9KSxuLmhhc093blByb3BlcnR5
        KCJsaXN0ZW5lcnMiKXx8KG4ubGlzdGVuZXJzPW0obi5saXN0ZW5lcnMpKSxy
        PW4ubGlzdGVuZXJzW3RdLHImJiFuLmxpc3RlbmVycy5oYXNPd25Qcm9wZXJ0
        eSh0KT9yPW4ubGlzdGVuZXJzW3RdPW4ubGlzdGVuZXJzW3RdLnNsaWNlKCk6
        cnx8KHI9bi5saXN0ZW5lcnNbdF09W10pLHJ9ZnVuY3Rpb24gcih0LHIsbil7
        dmFyIGk9dFtwXSxvPWkmJmkubGlzdGVuZXJzJiZpLmxpc3RlbmVyc1tyXTtp
        ZihvKWZvcih2YXIgYT1vLmxlbmd0aC0zO2E+PTA7YS09Myl7dmFyIHM9b1th
        XSx1PW9bYSsxXSxjPW9bYSsyXSxsPWUobixzLHUpOy0xPT09bCYmbi5wdXNo
        KHMsdSxjKX19ZnVuY3Rpb24gbih0LHIsbil7dmFyIGk9dFtwXSxvPWkmJmku
        bGlzdGVuZXJzJiZpLmxpc3RlbmVyc1tyXSxhPVtdO2lmKG8pe2Zvcih2YXIg
        cz1vLmxlbmd0aC0zO3M+PTA7cy09Myl7dmFyIHU9b1tzXSxjPW9bcysxXSxs
        PW9bcysyXSxoPWUobix1LGMpOy0xPT09aCYmKG4ucHVzaCh1LGMsbCksYS5w
        dXNoKHUsYyxsKSl9cmV0dXJuIGF9fWZ1bmN0aW9uIGkocixuLGksbyxhKXtv
        fHwiZnVuY3Rpb24iIT10eXBlb2YgaXx8KG89aSxpPW51bGwpO3ZhciBzPXQo
        cixuKSx1PWUocyxpLG8pLGM9MDthJiYoY3w9YiksLTE9PT11JiYocy5wdXNo
        KGksbyxjKSwiZnVuY3Rpb24iPT10eXBlb2Ygci5kaWRBZGRMaXN0ZW5lciYm
        ci5kaWRBZGRMaXN0ZW5lcihuLGksbykpfWZ1bmN0aW9uIG8ocixuLGksbyl7
        ZnVuY3Rpb24gYShpLG8pe3ZhciBhPXQocixuKSxzPWUoYSxpLG8pOy0xIT09
        cyYmKGEuc3BsaWNlKHMsMyksImZ1bmN0aW9uIj09dHlwZW9mIHIuZGlkUmVt
        b3ZlTGlzdGVuZXImJnIuZGlkUmVtb3ZlTGlzdGVuZXIobixpLG8pKX1pZihv
        fHwiZnVuY3Rpb24iIT10eXBlb2YgaXx8KG89aSxpPW51bGwpLG8pYShpLG8p
        O2Vsc2V7dmFyIHM9cltwXSx1PXMmJnMubGlzdGVuZXJzJiZzLmxpc3RlbmVy
        c1tuXTtpZighdSlyZXR1cm47Zm9yKHZhciBjPXUubGVuZ3RoLTM7Yz49MDtj
        LT0zKWEodVtjXSx1W2MrMV0pfX1mdW5jdGlvbiBhKHIsbixpLG8sYSl7ZnVu
        Y3Rpb24gcygpe3JldHVybiBhLmNhbGwoaSl9ZnVuY3Rpb24gdSgpey0xIT09
        bCYmKGNbbCsyXSY9fnYpfW98fCJmdW5jdGlvbiIhPXR5cGVvZiBpfHwobz1p
        LGk9bnVsbCk7dmFyIGM9dChyLG4pLGw9ZShjLGksbyk7cmV0dXJuLTEhPT1s
        JiYoY1tsKzJdfD12KSxFbWJlci50cnlGaW5hbGx5KHMsdSl9ZnVuY3Rpb24g
        cyhyLG4saSxvLGEpe2Z1bmN0aW9uIHMoKXtyZXR1cm4gYS5jYWxsKGkpfWZ1
        bmN0aW9uIHUoKXtmb3IodmFyIGU9MCx0PWYubGVuZ3RoO3Q+ZTtlKyspe3Zh
        ciByPWZbZV07cFtlXVtyKzJdJj1+dn19b3x8ImZ1bmN0aW9uIiE9dHlwZW9m
        IGl8fChvPWksaT1udWxsKTt2YXIgYyxsLGgsbSxmPVtdLHA9W107Zm9yKGg9
        MCxtPW4ubGVuZ3RoO20+aDtoKyspe2M9bltoXSxsPXQocixjKTt2YXIgZD1l
        KGwsaSxvKTstMSE9PWQmJihsW2QrMl18PXYsZi5wdXNoKGQpLHAucHVzaChs
        KSl9cmV0dXJuIEVtYmVyLnRyeUZpbmFsbHkocyx1KX1mdW5jdGlvbiB1KGUp
        e3ZhciB0PWVbcF0ubGlzdGVuZXJzLHI9W107aWYodClmb3IodmFyIG4gaW4g
        dCl0W25dJiZyLnB1c2gobik7cmV0dXJuIHJ9ZnVuY3Rpb24gYyhlLHQscixu
        KXtpZihlIT09RW1iZXImJiJmdW5jdGlvbiI9PXR5cGVvZiBlLnNlbmRFdmVu
        dCYmZS5zZW5kRXZlbnQodCxyKSwhbil7dmFyIGk9ZVtwXTtuPWkmJmkubGlz
        dGVuZXJzJiZpLmxpc3RlbmVyc1t0XX1pZihuKXtmb3IodmFyIGE9bi5sZW5n
        dGgtMzthPj0wO2EtPTMpe3ZhciBzPW5bYV0sdT1uW2ErMV0sYz1uW2ErMl07
        dSYmKGMmdnx8KGMmYiYmbyhlLHQscyx1KSxzfHwocz1lKSwic3RyaW5nIj09
        dHlwZW9mIHUmJih1PXNbdV0pLHI/dS5hcHBseShzLHIpOnUuY2FsbChzKSkp
        fXJldHVybiEwfX1mdW5jdGlvbiBsKGUsdCl7dmFyIHI9ZVtwXSxuPXImJnIu
        bGlzdGVuZXJzJiZyLmxpc3RlbmVyc1t0XTtyZXR1cm4hKCFufHwhbi5sZW5n
        dGgpfWZ1bmN0aW9uIGgoZSx0KXt2YXIgcj1bXSxuPWVbcF0saT1uJiZuLmxp
        c3RlbmVycyYmbi5saXN0ZW5lcnNbdF07aWYoIWkpcmV0dXJuIHI7Zm9yKHZh
        ciBvPTAsYT1pLmxlbmd0aDthPm87bys9Myl7dmFyIHM9aVtvXSx1PWlbbysx
        XTtyLnB1c2goW3MsdV0pfXJldHVybiByfXZhciBtPUVtYmVyLmNyZWF0ZSxm
        PUVtYmVyLm1ldGEscD1FbWJlci5NRVRBX0tFWSxkPVtdLnNsaWNlLGI9MSx2
        PTI7RW1iZXIub249ZnVuY3Rpb24oKXt2YXIgZT1kLmNhbGwoYXJndW1lbnRz
        LC0xKVswXSx0PWQuY2FsbChhcmd1bWVudHMsMCwtMSk7cmV0dXJuIGUuX19l
        bWJlcl9saXN0ZW5zX189dCxlfSxFbWJlci5hZGRMaXN0ZW5lcj1pLEVtYmVy
        LnJlbW92ZUxpc3RlbmVyPW8sRW1iZXIuX3N1c3BlbmRMaXN0ZW5lcj1hLEVt
        YmVyLl9zdXNwZW5kTGlzdGVuZXJzPXMsRW1iZXIuc2VuZEV2ZW50PWMsRW1i
        ZXIuaGFzTGlzdGVuZXJzPWwsRW1iZXIud2F0Y2hlZEV2ZW50cz11LEVtYmVy
        Lmxpc3RlbmVyc0Zvcj1oLEVtYmVyLmxpc3RlbmVyc0RpZmY9bixFbWJlci5s
        aXN0ZW5lcnNVbmlvbj1yfSgpLGZ1bmN0aW9uKCl7dmFyIGU9RW1iZXIuZ3Vp
        ZEZvcix0PUVtYmVyLnNlbmRFdmVudCxyPUVtYmVyLl9PYnNlcnZlclNldD1m
        dW5jdGlvbigpe3RoaXMuY2xlYXIoKX07ci5wcm90b3R5cGUuYWRkPWZ1bmN0
        aW9uKHQscixuKXt2YXIgaSxvPXRoaXMub2JzZXJ2ZXJTZXQsYT10aGlzLm9i
        c2VydmVycyxzPWUodCksdT1vW3NdO3JldHVybiB1fHwob1tzXT11PXt9KSxp
        PXVbcl0sdm9pZCAwPT09aSYmKGk9YS5wdXNoKHtzZW5kZXI6dCxrZXlOYW1l
        OnIsZXZlbnROYW1lOm4sbGlzdGVuZXJzOltdfSktMSx1W3JdPWkpLGFbaV0u
        bGlzdGVuZXJzfSxyLnByb3RvdHlwZS5mbHVzaD1mdW5jdGlvbigpe3ZhciBl
        LHIsbixpLG89dGhpcy5vYnNlcnZlcnM7Zm9yKHRoaXMuY2xlYXIoKSxlPTAs
        cj1vLmxlbmd0aDtyPmU7KytlKW49b1tlXSxpPW4uc2VuZGVyLGkuaXNEZXN0
        cm95aW5nfHxpLmlzRGVzdHJveWVkfHx0KGksbi5ldmVudE5hbWUsW2ksbi5r
        ZXlOYW1lXSxuLmxpc3RlbmVycyl9LHIucHJvdG90eXBlLmNsZWFyPWZ1bmN0
        aW9uKCl7dGhpcy5vYnNlcnZlclNldD17fSx0aGlzLm9ic2VydmVycz1bXX19
        KCksZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCl7dmFyIG49aChlLCExKSxp
        PW4ud2F0Y2hpbmdbdF0+MHx8Imxlbmd0aCI9PT10LGE9bi5wcm90byxzPW4u
        ZGVzY3NbdF07aSYmYSE9PWUmJihzJiZzLndpbGxDaGFuZ2UmJnMud2lsbENo
        YW5nZShlLHQpLHIoZSx0LG4pLG8oZSx0LG4pLGMoZSx0KSl9ZnVuY3Rpb24g
        dChlLHQpe3ZhciByPWgoZSwhMSksaT1yLndhdGNoaW5nW3RdPjB8fCJsZW5n
        dGgiPT09dCxvPXIucHJvdG8scz1yLmRlc2NzW3RdO28hPT1lJiYocyYmcy5k
        aWRDaGFuZ2UmJnMuZGlkQ2hhbmdlKGUsdCksKGl8fCJsZW5ndGgiPT09dCkm
        JihuKGUsdCxyKSxhKGUsdCxyLCExKSxsKGUsdCkpKX1mdW5jdGlvbiByKHQs
        cixuKXtpZighdC5pc0Rlc3Ryb3lpbmcpe3ZhciBvPXcsYT0hbzthJiYobz13
        PXt9KSxpKGUsdCxyLG8sbiksYSYmKHc9bnVsbCl9fWZ1bmN0aW9uIG4oZSxy
        LG4pe2lmKCFlLmlzRGVzdHJveWluZyl7dmFyIG89XyxhPSFvO2EmJihvPV89
        e30pLGkodCxlLHIsbyxuKSxhJiYoXz1udWxsKX19ZnVuY3Rpb24gaShlLHQs
        cixuLGkpe3ZhciBvPW0odCk7aWYobltvXXx8KG5bb109e30pLCFuW29dW3Jd
        KXtuW29dW3JdPSEwO3ZhciBhPWkuZGVwcztpZihhPWEmJmFbcl0pZm9yKHZh
        ciBzIGluIGEpe3ZhciB1PWkuZGVzY3Nbc107dSYmdS5fc3VzcGVuZGVkPT09
        dHx8ZSh0LHMpfX19ZnVuY3Rpb24gbyh0LHIsbil7aWYobi5oYXNPd25Qcm9w
        ZXJ0eSgiY2hhaW5XYXRjaGVycyIpJiZuLmNoYWluV2F0Y2hlcnNbcl0pe3Zh
        ciBpLG8sYT1uLmNoYWluV2F0Y2hlcnNbcl0scz1bXTtmb3IoaT0wLG89YS5s
        ZW5ndGg7bz5pO2krKylhW2ldLndpbGxDaGFuZ2Uocyk7Zm9yKGk9MCxvPXMu
        bGVuZ3RoO28+aTtpKz0yKWUoc1tpXSxzW2krMV0pfX1mdW5jdGlvbiBhKGUs
        cixuLGkpe2lmKG4uaGFzT3duUHJvcGVydHkoImNoYWluV2F0Y2hlcnMiKSYm
        bi5jaGFpbldhdGNoZXJzW3JdKXt2YXIgbyxhLHM9bi5jaGFpbldhdGNoZXJz
        W3JdLHU9aT9udWxsOltdO2ZvcihvPTAsYT1zLmxlbmd0aDthPm87bysrKXNb
        b10uZGlkQ2hhbmdlKHUpO2lmKCFpKWZvcihvPTAsYT11Lmxlbmd0aDthPm87
        bys9Mil0KHVbb10sdVtvKzFdKX19ZnVuY3Rpb24gcygpe3krK31mdW5jdGlv
        biB1KCl7eS0tLDA+PXkmJihFLmNsZWFyKCksZy5mbHVzaCgpKX1mdW5jdGlv
        biBjKGUsdCl7aWYoIWUuaXNEZXN0cm95aW5nKXt2YXIgcixuLGk9dCsiOmJl
        Zm9yZSI7eT8ocj1FLmFkZChlLHQsaSksbj1iKGUsaSxyKSxwKGUsaSxbZSx0
        XSxuKSk6cChlLGksW2UsdF0pfX1mdW5jdGlvbiBsKGUsdCl7aWYoIWUuaXNE
        ZXN0cm95aW5nKXt2YXIgcixuPXQrIjpjaGFuZ2UiO3k/KHI9Zy5hZGQoZSx0
        LG4pLGQoZSxuLHIpKTpwKGUsbixbZSx0XSl9fXZhciBoPUVtYmVyLm1ldGEs
        bT1FbWJlci5ndWlkRm9yLGY9RW1iZXIudHJ5RmluYWxseSxwPUVtYmVyLnNl
        bmRFdmVudCxkPUVtYmVyLmxpc3RlbmVyc1VuaW9uLGI9RW1iZXIubGlzdGVu
        ZXJzRGlmZix2PUVtYmVyLl9PYnNlcnZlclNldCxFPW5ldyB2LGc9bmV3IHYs
        eT0wO0VtYmVyLnByb3BlcnR5V2lsbENoYW5nZT1lLEVtYmVyLnByb3BlcnR5
        RGlkQ2hhbmdlPXQ7dmFyIHcsXztFbWJlci5vdmVycmlkZUNoYWlucz1mdW5j
        dGlvbihlLHQscil7YShlLHQsciwhMCl9LEVtYmVyLmJlZ2luUHJvcGVydHlD
        aGFuZ2VzPXMsRW1iZXIuZW5kUHJvcGVydHlDaGFuZ2VzPXUsRW1iZXIuY2hh
        bmdlUHJvcGVydGllcz1mdW5jdGlvbihlLHQpe3MoKSxmKGUsdSx0KX19KCks
        ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCxyLG8pe3ZhciBhO2lmKGE9dC5z
        bGljZSh0Lmxhc3RJbmRleE9mKCIuIikrMSksdD10LnNsaWNlKDAsdC5sZW5n
        dGgtKGEubGVuZ3RoKzEpKSwidGhpcyIhPT10JiYoZT1uKGUsdCkpLCFhfHww
        PT09YS5sZW5ndGgpdGhyb3cgbmV3IEVtYmVyLkVycm9yKCJZb3UgcGFzc2Vk
        IGFuIGVtcHR5IHBhdGgiKTtpZighZSl7aWYobylyZXR1cm47dGhyb3cgbmV3
        IEVtYmVyLkVycm9yKCJPYmplY3QgaW4gcGF0aCAiK3QrIiBjb3VsZCBub3Qg
        YmUgZm91bmQgb3Igd2FzIGRlc3Ryb3llZC4iKX1yZXR1cm4gaShlLGEscil9
        dmFyIHQ9RW1iZXIuTUVUQV9LRVkscj1FbWJlci5FTlYuTUFOREFUT1JZX1NF
        VFRFUixuPUVtYmVyLl9nZXRQYXRoLGk9ZnVuY3Rpb24obixpLG8sYSl7aWYo
        InN0cmluZyI9PXR5cGVvZiBuJiYobz1pLGk9bixuPW51bGwpLCFufHwtMSE9
        PWkuaW5kZXhPZigiLiIpKXJldHVybiBlKG4saSxvLGEpO3ZhciBzLHUsYz1u
        W3RdLGw9YyYmYy5kZXNjc1tpXTtyZXR1cm4gbD9sLnNldChuLGksbyk6KHM9
        Im9iamVjdCI9PXR5cGVvZiBuJiYhKGkgaW4gbikscyYmImZ1bmN0aW9uIj09
        dHlwZW9mIG4uc2V0VW5rbm93blByb3BlcnR5P24uc2V0VW5rbm93blByb3Bl
        cnR5KGksbyk6YyYmYy53YXRjaGluZ1tpXT4wPyh1PXI/Yy52YWx1ZXNbaV06
        bltpXSxvIT09dSYmKEVtYmVyLnByb3BlcnR5V2lsbENoYW5nZShuLGkpLHI/
        dm9pZCAwIT09dXx8aSBpbiBuP2MudmFsdWVzW2ldPW86RW1iZXIuZGVmaW5l
        UHJvcGVydHkobixpLG51bGwsbyk6bltpXT1vLEVtYmVyLnByb3BlcnR5RGlk
        Q2hhbmdlKG4saSkpKTpuW2ldPW8pLG99O0VtYmVyLmNvbmZpZy5vdmVycmlk
        ZUFjY2Vzc29ycyYmKEVtYmVyLnNldD1pLEVtYmVyLmNvbmZpZy5vdmVycmlk
        ZUFjY2Vzc29ycygpLGk9RW1iZXIuc2V0KSxFbWJlci5zZXQ9aSxFbWJlci50
        cnlTZXQ9ZnVuY3Rpb24oZSx0LHIpe3JldHVybiBpKGUsdCxyLCEwKX19KCks
        ZnVuY3Rpb24oKXt2YXIgZT1FbWJlci5zZXQsdD1FbWJlci5ndWlkRm9yLHI9
        RW1iZXIuQXJyYXlQb2x5ZmlsbHMuaW5kZXhPZixuPWZ1bmN0aW9uKGUpe3Zh
        ciB0PXt9O2Zvcih2YXIgciBpbiBlKWUuaGFzT3duUHJvcGVydHkocikmJih0
        W3JdPWVbcl0pO3JldHVybiB0fSxpPWZ1bmN0aW9uKGUsdCl7dmFyIHI9ZS5r
        ZXlzLmNvcHkoKSxpPW4oZS52YWx1ZXMpO3JldHVybiB0LmtleXM9cix0LnZh
        bHVlcz1pLHQubGVuZ3RoPWUubGVuZ3RoLHR9LG89RW1iZXIuT3JkZXJlZFNl
        dD1mdW5jdGlvbigpe3RoaXMuY2xlYXIoKX07by5jcmVhdGU9ZnVuY3Rpb24o
        KXtyZXR1cm4gbmV3IG99LG8ucHJvdG90eXBlPXtjbGVhcjpmdW5jdGlvbigp
        e3RoaXMucHJlc2VuY2VTZXQ9e30sdGhpcy5saXN0PVtdfSxhZGQ6ZnVuY3Rp
        b24oZSl7dmFyIHI9dChlKSxuPXRoaXMucHJlc2VuY2VTZXQsaT10aGlzLmxp
        c3Q7ciBpbiBufHwobltyXT0hMCxpLnB1c2goZSkpfSxyZW1vdmU6ZnVuY3Rp
        b24oZSl7dmFyIG49dChlKSxpPXRoaXMucHJlc2VuY2VTZXQsbz10aGlzLmxp
        c3Q7ZGVsZXRlIGlbbl07dmFyIGE9ci5jYWxsKG8sZSk7YT4tMSYmby5zcGxp
        Y2UoYSwxKX0saXNFbXB0eTpmdW5jdGlvbigpe3JldHVybiAwPT09dGhpcy5s
        aXN0Lmxlbmd0aH0saGFzOmZ1bmN0aW9uKGUpe3ZhciByPXQoZSksbj10aGlz
        LnByZXNlbmNlU2V0O3JldHVybiByIGluIG59LGZvckVhY2g6ZnVuY3Rpb24o
        ZSx0KXtmb3IodmFyIHI9dGhpcy50b0FycmF5KCksbj0wLGk9ci5sZW5ndGg7
        aT5uO24rKyllLmNhbGwodCxyW25dKX0sdG9BcnJheTpmdW5jdGlvbigpe3Jl
        dHVybiB0aGlzLmxpc3Quc2xpY2UoKX0sY29weTpmdW5jdGlvbigpe3ZhciBl
        PW5ldyBvO3JldHVybiBlLnByZXNlbmNlU2V0PW4odGhpcy5wcmVzZW5jZVNl
        dCksZS5saXN0PXRoaXMudG9BcnJheSgpLGV9fTt2YXIgYT1FbWJlci5NYXA9
        ZnVuY3Rpb24oKXt0aGlzLmtleXM9RW1iZXIuT3JkZXJlZFNldC5jcmVhdGUo
        KSx0aGlzLnZhbHVlcz17fX07YS5jcmVhdGU9ZnVuY3Rpb24oKXtyZXR1cm4g
        bmV3IGF9LGEucHJvdG90eXBlPXtsZW5ndGg6MCxnZXQ6ZnVuY3Rpb24oZSl7
        dmFyIHI9dGhpcy52YWx1ZXMsbj10KGUpO3JldHVybiByW25dfSxzZXQ6ZnVu
        Y3Rpb24ocixuKXt2YXIgaT10aGlzLmtleXMsbz10aGlzLnZhbHVlcyxhPXQo
        cik7aS5hZGQociksb1thXT1uLGUodGhpcywibGVuZ3RoIixpLmxpc3QubGVu
        Z3RoKX0scmVtb3ZlOmZ1bmN0aW9uKHIpe3ZhciBuPXRoaXMua2V5cyxpPXRo
        aXMudmFsdWVzLG89dChyKTtyZXR1cm4gaS5oYXNPd25Qcm9wZXJ0eShvKT8o
        bi5yZW1vdmUociksZGVsZXRlIGlbb10sZSh0aGlzLCJsZW5ndGgiLG4ubGlz
        dC5sZW5ndGgpLCEwKTohMX0saGFzOmZ1bmN0aW9uKGUpe3ZhciByPXRoaXMu
        dmFsdWVzLG49dChlKTtyZXR1cm4gci5oYXNPd25Qcm9wZXJ0eShuKX0sZm9y
        RWFjaDpmdW5jdGlvbihlLHIpe3ZhciBuPXRoaXMua2V5cyxpPXRoaXMudmFs
        dWVzO24uZm9yRWFjaChmdW5jdGlvbihuKXt2YXIgbz10KG4pO2UuY2FsbChy
        LG4saVtvXSl9KX0sY29weTpmdW5jdGlvbigpe3JldHVybiBpKHRoaXMsbmV3
        IGEpfX07dmFyIHM9RW1iZXIuTWFwV2l0aERlZmF1bHQ9ZnVuY3Rpb24oZSl7
        YS5jYWxsKHRoaXMpLHRoaXMuZGVmYXVsdFZhbHVlPWUuZGVmYXVsdFZhbHVl
        fTtzLmNyZWF0ZT1mdW5jdGlvbihlKXtyZXR1cm4gZT9uZXcgcyhlKTpuZXcg
        YX0scy5wcm90b3R5cGU9RW1iZXIuY3JlYXRlKGEucHJvdG90eXBlKSxzLnBy
        b3RvdHlwZS5nZXQ9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5oYXMoZSk7aWYo
        dClyZXR1cm4gYS5wcm90b3R5cGUuZ2V0LmNhbGwodGhpcyxlKTt2YXIgcj10
        aGlzLmRlZmF1bHRWYWx1ZShlKTtyZXR1cm4gdGhpcy5zZXQoZSxyKSxyfSxz
        LnByb3RvdHlwZS5jb3B5PWZ1bmN0aW9uKCl7cmV0dXJuIGkodGhpcyxuZXcg
        cyh7ZGVmYXVsdFZhbHVlOnRoaXMuZGVmYXVsdFZhbHVlfSkpfX0oKSxmdW5j
        dGlvbigpe2Z1bmN0aW9uIGUoZSl7dmFyIHQ7RW1iZXIuaW1wb3J0cy5jb25z
        b2xlP3Q9RW1iZXIuaW1wb3J0cy5jb25zb2xlOiJ1bmRlZmluZWQiIT10eXBl
        b2YgY29uc29sZSYmKHQ9Y29uc29sZSk7dmFyIHI9Im9iamVjdCI9PXR5cGVv
        ZiB0P3RbZV06bnVsbDtyZXR1cm4gcj9yLmFwcGx5P2Z1bmN0aW9uKCl7ci5h
        cHBseSh0LGFyZ3VtZW50cyl9OmZ1bmN0aW9uKCl7dmFyIGU9QXJyYXkucHJv
        dG90eXBlLmpvaW4uY2FsbChhcmd1bWVudHMsIiwgIik7cihlKX06dm9pZCAw
        fWZ1bmN0aW9uIHQoZSx0KXtpZighZSl0cnl7dGhyb3cgbmV3IEVtYmVyLkVy
        cm9yKCJhc3NlcnRpb24gZmFpbGVkOiAiK3QpfWNhdGNoKHIpe3NldFRpbWVv
        dXQoZnVuY3Rpb24oKXt0aHJvdyByfSwwKX19RW1iZXIuTG9nZ2VyPXtsb2c6
        ZSgibG9nIil8fEVtYmVyLkssd2FybjplKCJ3YXJuIil8fEVtYmVyLkssZXJy
        b3I6ZSgiZXJyb3IiKXx8RW1iZXIuSyxpbmZvOmUoImluZm8iKXx8RW1iZXIu
        SyxkZWJ1ZzplKCJkZWJ1ZyIpfHxlKCJpbmZvIil8fEVtYmVyLkssYXNzZXJ0
        OmUoImFzc2VydCIpfHx0fX0oKSxmdW5jdGlvbigpe3ZhciBlPUVtYmVyLk1F
        VEFfS0VZLHQ9RW1iZXIubWV0YSxyPUVtYmVyLnBsYXRmb3JtLmRlZmluZVBy
        b3BlcnR5LG49RW1iZXIuRU5WLk1BTkRBVE9SWV9TRVRURVI7RW1iZXIuRGVz
        Y3JpcHRvcj1mdW5jdGlvbigpe307dmFyIGk9RW1iZXIuTUFOREFUT1JZX1NF
        VFRFUl9GVU5DVElPTj1mdW5jdGlvbigpe30sbz1FbWJlci5ERUZBVUxUX0dF
        VFRFUl9GVU5DVElPTj1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oKXt2
        YXIgcj10aGlzW2VdO3JldHVybiByJiZyLnZhbHVlc1t0XX19O0VtYmVyLmRl
        ZmluZVByb3BlcnR5PWZ1bmN0aW9uKGUsYSxzLHUsYyl7dmFyIGwsaCxtLGY7
        cmV0dXJuIGN8fChjPXQoZSkpLGw9Yy5kZXNjcyxoPWMuZGVzY3NbYV0sbT1j
        LndhdGNoaW5nW2FdPjAsaCBpbnN0YW5jZW9mIEVtYmVyLkRlc2NyaXB0b3Im
        JmgudGVhcmRvd24oZSxhKSxzIGluc3RhbmNlb2YgRW1iZXIuRGVzY3JpcHRv
        cj8oZj1zLGxbYV09cyxuJiZtP3IoZSxhLHtjb25maWd1cmFibGU6ITAsZW51
        bWVyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTp2b2lkIDB9KTplW2FdPXZv
        aWQgMCk6KGxbYV09dm9pZCAwLG51bGw9PXM/KGY9dSxuJiZtPyhjLnZhbHVl
        c1thXT11LHIoZSxhLHtjb25maWd1cmFibGU6ITAsZW51bWVyYWJsZTohMCxz
        ZXQ6aSxnZXQ6byhhKX0pKTplW2FdPXUpOihmPXMscihlLGEscykpKSxtJiZF
        bWJlci5vdmVycmlkZUNoYWlucyhlLGEsYyksZS5kaWREZWZpbmVQcm9wZXJ0
        eSYmZS5kaWREZWZpbmVQcm9wZXJ0eShlLGEsZiksdGhpc319KCksZnVuY3Rp
        b24oKXt2YXIgZT1FbWJlci5nZXQ7RW1iZXIuZ2V0UHJvcGVydGllcz1mdW5j
        dGlvbih0KXt2YXIgcj17fSxuPWFyZ3VtZW50cyxpPTE7Mj09PWFyZ3VtZW50
        cy5sZW5ndGgmJiJhcnJheSI9PT1FbWJlci50eXBlT2YoYXJndW1lbnRzWzFd
        KSYmKGk9MCxuPWFyZ3VtZW50c1sxXSk7Zm9yKHZhciBvPW4ubGVuZ3RoO28+
        aTtpKyspcltuW2ldXT1lKHQsbltpXSk7cmV0dXJuIHJ9fSgpLGZ1bmN0aW9u
        KCl7dmFyIGU9RW1iZXIuY2hhbmdlUHJvcGVydGllcyx0PUVtYmVyLnNldDtF
        bWJlci5zZXRQcm9wZXJ0aWVzPWZ1bmN0aW9uKHIsbil7cmV0dXJuIGUoZnVu
        Y3Rpb24oKXtmb3IodmFyIGUgaW4gbiluLmhhc093blByb3BlcnR5KGUpJiZ0
        KHIsZSxuW2VdKX0pLHJ9fSgpLGZ1bmN0aW9uKCl7dmFyIGU9RW1iZXIubWV0
        YSx0PUVtYmVyLnR5cGVPZixyPUVtYmVyLkVOVi5NQU5EQVRPUllfU0VUVEVS
        LG49RW1iZXIucGxhdGZvcm0uZGVmaW5lUHJvcGVydHk7RW1iZXIud2F0Y2hL
        ZXk9ZnVuY3Rpb24oaSxvKXtpZigibGVuZ3RoIiE9PW98fCJhcnJheSIhPT10
        KGkpKXt2YXIgYT1lKGkpLHM9YS53YXRjaGluZztzW29dP3Nbb109KHNbb118
        fDApKzE6KHNbb109MSwiZnVuY3Rpb24iPT10eXBlb2YgaS53aWxsV2F0Y2hQ
        cm9wZXJ0eSYmaS53aWxsV2F0Y2hQcm9wZXJ0eShvKSxyJiZvIGluIGkmJihh
        LnZhbHVlc1tvXT1pW29dLG4oaSxvLHtjb25maWd1cmFibGU6ITAsZW51bWVy
        YWJsZTohMCxzZXQ6RW1iZXIuTUFOREFUT1JZX1NFVFRFUl9GVU5DVElPTixn
        ZXQ6RW1iZXIuREVGQVVMVF9HRVRURVJfRlVOQ1RJT04obyl9KSkpfX0sRW1i
        ZXIudW53YXRjaEtleT1mdW5jdGlvbih0LGkpe3ZhciBvPWUodCksYT1vLndh
        dGNoaW5nOzE9PT1hW2ldPyhhW2ldPTAsImZ1bmN0aW9uIj09dHlwZW9mIHQu
        ZGlkVW53YXRjaFByb3BlcnR5JiZ0LmRpZFVud2F0Y2hQcm9wZXJ0eShpKSxy
        JiZpIGluIHQmJihuKHQsaSx7Y29uZmlndXJhYmxlOiEwLGVudW1lcmFibGU6
        ITAsd3JpdGFibGU6ITAsdmFsdWU6by52YWx1ZXNbaV19KSxkZWxldGUgby52
        YWx1ZXNbaV0pKTphW2ldPjEmJmFbaV0tLX19KCksZnVuY3Rpb24oKXtmdW5j
        dGlvbiBlKGUpe3JldHVybiBlLm1hdGNoKGwpWzBdfWZ1bmN0aW9uIHQoZSx0
        LHIpe2lmKGUmJiJvYmplY3QiPT10eXBlb2YgZSl7dmFyIGk9bihlKSxvPWku
        Y2hhaW5XYXRjaGVycztpLmhhc093blByb3BlcnR5KCJjaGFpbldhdGNoZXJz
        Iil8fChvPWkuY2hhaW5XYXRjaGVycz17fSksb1t0XXx8KG9bdF09W10pLG9b
        dF0ucHVzaChyKSx1KGUsdCl9fWZ1bmN0aW9uIHIoZSx0KXtpZighZSlyZXR1
        cm4gdm9pZCAwO3ZhciByPW4oZSwhMSk7aWYoci5wcm90bz09PWUpcmV0dXJu
        IHZvaWQgMDtpZigiQGVhY2giPT09dClyZXR1cm4gaShlLHQpO3ZhciBvPXIu
        ZGVzY3NbdF07cmV0dXJuIG8mJm8uX2NhY2hlYWJsZT90IGluIHIuY2FjaGU/
        ci5jYWNoZVt0XTp2b2lkIDA6aShlLHQpfXZhciBuPUVtYmVyLm1ldGEsaT1F
        bWJlci5nZXQsbz1FbWJlci5ub3JtYWxpemVUdXBsZSxhPUVtYmVyLkFycmF5
        UG9seWZpbGxzLmZvckVhY2gscz1FbWJlci53YXJuLHU9RW1iZXIud2F0Y2hL
        ZXksYz1FbWJlci51bndhdGNoS2V5LGw9L14oW15cLlwqXSspLyxoPVtdO0Vt
        YmVyLmZsdXNoUGVuZGluZ0NoYWlucz1mdW5jdGlvbigpe2lmKDAhPT1oLmxl
        bmd0aCl7dmFyIGU9aDtoPVtdLGEuY2FsbChlLGZ1bmN0aW9uKGUpe2VbMF0u
        YWRkKGVbMV0pfSkscygiV2F0Y2hpbmcgYW4gdW5kZWZpbmVkIGdsb2JhbCwg
        RW1iZXIgZXhwZWN0cyB3YXRjaGVkIGdsb2JhbHMgdG8gYmUgc2V0dXAgYnkg
        dGhlIHRpbWUgdGhlIHJ1biBsb29wIGlzIGZsdXNoZWQsIGNoZWNrIGZvciB0
        eXBvcyIsMD09PWgubGVuZ3RoKX19O3ZhciBtPUVtYmVyLnJlbW92ZUNoYWlu
        V2F0Y2hlcj1mdW5jdGlvbihlLHQscil7aWYoZSYmIm9iamVjdCI9PXR5cGVv
        ZiBlKXt2YXIgaT1uKGUsITEpO2lmKGkuaGFzT3duUHJvcGVydHkoImNoYWlu
        V2F0Y2hlcnMiKSl7dmFyIG89aS5jaGFpbldhdGNoZXJzO2lmKG9bdF0pe289
        b1t0XTtmb3IodmFyIGE9MCxzPW8ubGVuZ3RoO3M+YTthKyspb1thXT09PXIm
        Jm8uc3BsaWNlKGEsMSl9YyhlLHQpfX19LGY9RW1iZXIuX0NoYWluTm9kZT1m
        dW5jdGlvbihlLHIsbil7dGhpcy5fcGFyZW50PWUsdGhpcy5fa2V5PXIsdGhp
        cy5fd2F0Y2hpbmc9dm9pZCAwPT09bix0aGlzLl92YWx1ZT1uLHRoaXMuX3Bh
        dGhzPXt9LHRoaXMuX3dhdGNoaW5nJiYodGhpcy5fb2JqZWN0PWUudmFsdWUo
        KSx0aGlzLl9vYmplY3QmJnQodGhpcy5fb2JqZWN0LHRoaXMuX2tleSx0aGlz
        KSksdGhpcy5fcGFyZW50JiYiQGVhY2giPT09dGhpcy5fcGFyZW50Ll9rZXkm
        JnRoaXMudmFsdWUoKX0scD1mLnByb3RvdHlwZTtwLnZhbHVlPWZ1bmN0aW9u
        KCl7aWYodm9pZCAwPT09dGhpcy5fdmFsdWUmJnRoaXMuX3dhdGNoaW5nKXt2
        YXIgZT10aGlzLl9wYXJlbnQudmFsdWUoKTt0aGlzLl92YWx1ZT1yKGUsdGhp
        cy5fa2V5KX1yZXR1cm4gdGhpcy5fdmFsdWV9LHAuZGVzdHJveT1mdW5jdGlv
        bigpe2lmKHRoaXMuX3dhdGNoaW5nKXt2YXIgZT10aGlzLl9vYmplY3Q7ZSYm
        bShlLHRoaXMuX2tleSx0aGlzKSx0aGlzLl93YXRjaGluZz0hMX19LHAuY29w
        eT1mdW5jdGlvbihlKXt2YXIgdCxyPW5ldyBmKG51bGwsbnVsbCxlKSxuPXRo
        aXMuX3BhdGhzO2Zvcih0IGluIG4pblt0XTw9MHx8ci5hZGQodCk7cmV0dXJu
        IHJ9LHAuYWRkPWZ1bmN0aW9uKHQpe3ZhciByLG4saSxhLHM7aWYocz10aGlz
        Ll9wYXRocyxzW3RdPShzW3RdfHwwKSsxLHI9dGhpcy52YWx1ZSgpLG49byhy
        LHQpLG5bMF0mJm5bMF09PT1yKXQ9blsxXSxpPWUodCksdD10LnNsaWNlKGku
        bGVuZ3RoKzEpO2Vsc2V7aWYoIW5bMF0pcmV0dXJuIGgucHVzaChbdGhpcyx0
        XSksbi5sZW5ndGg9MCx2b2lkIDA7YT1uWzBdLGk9dC5zbGljZSgwLDAtKG5b
        MV0ubGVuZ3RoKzEpKSx0PW5bMV19bi5sZW5ndGg9MCx0aGlzLmNoYWluKGks
        dCxhKX0scC5yZW1vdmU9ZnVuY3Rpb24odCl7dmFyIHIsbixpLGEscztzPXRo
        aXMuX3BhdGhzLHNbdF0+MCYmc1t0XS0tLHI9dGhpcy52YWx1ZSgpLG49byhy
        LHQpLG5bMF09PT1yPyh0PW5bMV0saT1lKHQpLHQ9dC5zbGljZShpLmxlbmd0
        aCsxKSk6KGE9blswXSxpPXQuc2xpY2UoMCwwLShuWzFdLmxlbmd0aCsxKSks
        dD1uWzFdKSxuLmxlbmd0aD0wLHRoaXMudW5jaGFpbihpLHQpfSxwLmNvdW50
        PTAscC5jaGFpbj1mdW5jdGlvbih0LHIsbil7dmFyIGksbz10aGlzLl9jaGFp
        bnM7b3x8KG89dGhpcy5fY2hhaW5zPXt9KSxpPW9bdF0saXx8KGk9b1t0XT1u
        ZXcgZih0aGlzLHQsbikpLGkuY291bnQrKyxyJiZyLmxlbmd0aD4wJiYodD1l
        KHIpLHI9ci5zbGljZSh0Lmxlbmd0aCsxKSxpLmNoYWluKHQscikpfSxwLnVu
        Y2hhaW49ZnVuY3Rpb24odCxyKXt2YXIgbj10aGlzLl9jaGFpbnMsaT1uW3Rd
        O3ImJnIubGVuZ3RoPjEmJih0PWUocikscj1yLnNsaWNlKHQubGVuZ3RoKzEp
        LGkudW5jaGFpbih0LHIpKSxpLmNvdW50LS0saS5jb3VudDw9MCYmKGRlbGV0
        ZSBuW2kuX2tleV0saS5kZXN0cm95KCkpfSxwLndpbGxDaGFuZ2U9ZnVuY3Rp
        b24oZSl7dmFyIHQ9dGhpcy5fY2hhaW5zO2lmKHQpZm9yKHZhciByIGluIHQp
        dC5oYXNPd25Qcm9wZXJ0eShyKSYmdFtyXS53aWxsQ2hhbmdlKGUpO3RoaXMu
        X3BhcmVudCYmdGhpcy5fcGFyZW50LmNoYWluV2lsbENoYW5nZSh0aGlzLHRo
        aXMuX2tleSwxLGUpfSxwLmNoYWluV2lsbENoYW5nZT1mdW5jdGlvbihlLHQs
        cixuKXt0aGlzLl9rZXkmJih0PXRoaXMuX2tleSsiLiIrdCksdGhpcy5fcGFy
        ZW50P3RoaXMuX3BhcmVudC5jaGFpbldpbGxDaGFuZ2UodGhpcyx0LHIrMSxu
        KToocj4xJiZuLnB1c2godGhpcy52YWx1ZSgpLHQpLHQ9InRoaXMuIit0LHRo
        aXMuX3BhdGhzW3RdPjAmJm4ucHVzaCh0aGlzLnZhbHVlKCksdCkpfSxwLmNo
        YWluRGlkQ2hhbmdlPWZ1bmN0aW9uKGUsdCxyLG4pe3RoaXMuX2tleSYmKHQ9
        dGhpcy5fa2V5KyIuIit0KSx0aGlzLl9wYXJlbnQ/dGhpcy5fcGFyZW50LmNo
        YWluRGlkQ2hhbmdlKHRoaXMsdCxyKzEsbik6KHI+MSYmbi5wdXNoKHRoaXMu
        dmFsdWUoKSx0KSx0PSJ0aGlzLiIrdCx0aGlzLl9wYXRoc1t0XT4wJiZuLnB1
        c2godGhpcy52YWx1ZSgpLHQpKX0scC5kaWRDaGFuZ2U9ZnVuY3Rpb24oZSl7
        aWYodGhpcy5fd2F0Y2hpbmcpe3ZhciByPXRoaXMuX3BhcmVudC52YWx1ZSgp
        O3IhPT10aGlzLl9vYmplY3QmJihtKHRoaXMuX29iamVjdCx0aGlzLl9rZXks
        dGhpcyksdGhpcy5fb2JqZWN0PXIsdChyLHRoaXMuX2tleSx0aGlzKSksdGhp
        cy5fdmFsdWU9dm9pZCAwLHRoaXMuX3BhcmVudCYmIkBlYWNoIj09PXRoaXMu
        X3BhcmVudC5fa2V5JiZ0aGlzLnZhbHVlKCl9dmFyIG49dGhpcy5fY2hhaW5z
        O2lmKG4pZm9yKHZhciBpIGluIG4pbi5oYXNPd25Qcm9wZXJ0eShpKSYmbltp
        XS5kaWRDaGFuZ2UoZSk7bnVsbCE9PWUmJnRoaXMuX3BhcmVudCYmdGhpcy5f
        cGFyZW50LmNoYWluRGlkQ2hhbmdlKHRoaXMsdGhpcy5fa2V5LDEsZSl9LEVt
        YmVyLmZpbmlzaENoYWlucz1mdW5jdGlvbihlKXt2YXIgdD1uKGUsITEpLHI9
        dC5jaGFpbnM7ciYmKHIudmFsdWUoKSE9PWUmJih0LmNoYWlucz1yPXIuY29w
        eShlKSksci5kaWRDaGFuZ2UobnVsbCkpfX0oKSxmdW5jdGlvbigpe2Z1bmN0
        aW9uIGUoZSl7dmFyIHI9dChlKSxpPXIuY2hhaW5zO3JldHVybiBpP2kudmFs
        dWUoKSE9PWUmJihpPXIuY2hhaW5zPWkuY29weShlKSk6aT1yLmNoYWlucz1u
        ZXcgbihudWxsLG51bGwsZSksaX12YXIgdD1FbWJlci5tZXRhLHI9RW1iZXIu
        dHlwZU9mLG49RW1iZXIuX0NoYWluTm9kZTtFbWJlci53YXRjaFBhdGg9ZnVu
        Y3Rpb24obixpKXtpZigibGVuZ3RoIiE9PWl8fCJhcnJheSIhPT1yKG4pKXt2
        YXIgbz10KG4pLGE9by53YXRjaGluZzthW2ldP2FbaV09KGFbaV18fDApKzE6
        KGFbaV09MSxlKG4pLmFkZChpKSl9fSxFbWJlci51bndhdGNoUGF0aD1mdW5j
        dGlvbihyLG4pe3ZhciBpPXQociksbz1pLndhdGNoaW5nOzE9PT1vW25dPyhv
        W25dPTAsZShyKS5yZW1vdmUobikpOm9bbl0+MSYmb1tuXS0tfX0oKSxmdW5j
        dGlvbigpe2Z1bmN0aW9uIGUoZSl7cmV0dXJuIioiPT09ZXx8IWgudGVzdChl
        KX12YXIgdD1FbWJlci5tZXRhLHI9RW1iZXIuR1VJRF9LRVksbj1FbWJlci5N
        RVRBX0tFWSxpPUVtYmVyLnJlbW92ZUNoYWluV2F0Y2hlcixvPUVtYmVyLndh
        dGNoS2V5LGE9RW1iZXIudW53YXRjaEtleSxzPUVtYmVyLndhdGNoUGF0aCx1
        PUVtYmVyLnVud2F0Y2hQYXRoLGM9RW1iZXIudHlwZU9mLGw9RW1iZXIuZ2Vu
        ZXJhdGVHdWlkLGg9L1tcLlwqXS87RW1iZXIud2F0Y2g9ZnVuY3Rpb24odCxy
        KXsoImxlbmd0aCIhPT1yfHwiYXJyYXkiIT09Yyh0KSkmJihlKHIpP28odCxy
        KTpzKHQscikpfSxFbWJlci5pc1dhdGNoaW5nPWZ1bmN0aW9uKGUsdCl7dmFy
        IHI9ZVtuXTtyZXR1cm4ociYmci53YXRjaGluZ1t0XSk+MH0sRW1iZXIud2F0
        Y2guZmx1c2hQZW5kaW5nPUVtYmVyLmZsdXNoUGVuZGluZ0NoYWlucyxFbWJl
        ci51bndhdGNoPWZ1bmN0aW9uKHQscil7KCJsZW5ndGgiIT09cnx8ImFycmF5
        IiE9PWModCkpJiYoZShyKT9hKHQscik6dSh0LHIpKX0sRW1iZXIucmV3YXRj
        aD1mdW5jdGlvbihlKXt2YXIgbj10KGUsITEpLGk9bi5jaGFpbnM7ciBpbiBl
        JiYhZS5oYXNPd25Qcm9wZXJ0eShyKSYmbChlKSxpJiZpLnZhbHVlKCkhPT1l
        JiYobi5jaGFpbnM9aS5jb3B5KGUpKX07dmFyIG09W107RW1iZXIuZGVzdHJv
        eT1mdW5jdGlvbihlKXt2YXIgdCxyLG8sYSxzPWVbbl07aWYocyYmKGVbbl09
        bnVsbCx0PXMuY2hhaW5zKSlmb3IobS5wdXNoKHQpO20ubGVuZ3RoPjA7KXtp
        Zih0PW0ucG9wKCkscj10Ll9jaGFpbnMpZm9yKG8gaW4gcilyLmhhc093blBy
        b3BlcnR5KG8pJiZtLnB1c2gocltvXSk7dC5fd2F0Y2hpbmcmJihhPXQuX29i
        amVjdCxhJiZpKGEsdC5fa2V5LHQpKX19fSgpLGZ1bmN0aW9uKCl7ZnVuY3Rp
        b24gZShlLHQpe3ZhciByPWVbdF07cmV0dXJuIHI/ZS5oYXNPd25Qcm9wZXJ0
        eSh0KXx8KHI9ZVt0XT1mKHIpKTpyPWVbdF09e30scn1mdW5jdGlvbiB0KHQp
        e3JldHVybiBlKHQsImRlcHMiKX1mdW5jdGlvbiByKHIsbixpLG8pe3ZhciBh
        LHMsdSxjLGwsaD1yLl9kZXBlbmRlbnRLZXlzO2lmKGgpZm9yKGE9dChvKSxz
        PTAsdT1oLmxlbmd0aDt1PnM7cysrKWM9aFtzXSxsPWUoYSxjKSxsW2ldPShs
        W2ldfHwwKSsxLHAobixjKX1mdW5jdGlvbiBuKHIsbixpLG8pe3ZhciBhLHMs
        dSxjLGwsaD1yLl9kZXBlbmRlbnRLZXlzO2lmKGgpZm9yKGE9dChvKSxzPTAs
        dT1oLmxlbmd0aDt1PnM7cysrKWM9aFtzXSxsPWUoYSxjKSxsW2ldPShsW2ld
        fHwwKS0xLGQobixjKX1mdW5jdGlvbiBpKGUsdCl7dGhpcy5mdW5jPWUsdGhp
        cy5fY2FjaGVhYmxlPXQmJnZvaWQgMCE9PXQuY2FjaGVhYmxlP3QuY2FjaGVh
        YmxlOiEwLHRoaXMuX2RlcGVuZGVudEtleXM9dCYmdC5kZXBlbmRlbnRLZXlz
        LHRoaXMuX3JlYWRPbmx5PXQmJih2b2lkIDAhPT10LnJlYWRPbmx5fHwhIXQu
        cmVhZE9ubHkpfWZ1bmN0aW9uIG8oZSl7Zm9yKHZhciB0PTAscj1lLmxlbmd0
        aDtyPnQ7dCsrKWVbdF0uZGlkQ2hhbmdlKG51bGwpfWZ1bmN0aW9uIGEoZSx0
        KXtmb3IodmFyIHI9e30sbj0wO248dC5sZW5ndGg7bisrKXJbdFtuXV09Yyhl
        LHRbbl0pO3JldHVybiByfWZ1bmN0aW9uIHMoZSx0KXtFbWJlci5jb21wdXRl
        ZFtlXT1mdW5jdGlvbihlKXt2YXIgcj1tLmNhbGwoYXJndW1lbnRzKTtyZXR1
        cm4gRW1iZXIuY29tcHV0ZWQoZSxmdW5jdGlvbigpe3JldHVybiB0LmFwcGx5
        KHRoaXMscil9KX19ZnVuY3Rpb24gdShlLHQpe0VtYmVyLmNvbXB1dGVkW2Vd
        PWZ1bmN0aW9uKCl7dmFyIGU9bS5jYWxsKGFyZ3VtZW50cykscj1FbWJlci5j
        b21wdXRlZChmdW5jdGlvbigpe3JldHVybiB0LmFwcGx5KHRoaXMsW2EodGhp
        cyxlKV0pfSk7cmV0dXJuIHIucHJvcGVydHkuYXBwbHkocixlKX19dmFyIGM9
        RW1iZXIuZ2V0LGw9RW1iZXIuc2V0LGg9RW1iZXIubWV0YSxtPVtdLnNsaWNl
        LGY9RW1iZXIuY3JlYXRlLHA9KEVtYmVyLk1FVEFfS0VZLEVtYmVyLndhdGNo
        KSxkPUVtYmVyLnVud2F0Y2g7RW1iZXIuQ29tcHV0ZWRQcm9wZXJ0eT1pLGku
        cHJvdG90eXBlPW5ldyBFbWJlci5EZXNjcmlwdG9yO3ZhciBiPWkucHJvdG90
        eXBlO2IuY2FjaGVhYmxlPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9jYWNo
        ZWFibGU9ZSE9PSExLHRoaXN9LGIudm9sYXRpbGU9ZnVuY3Rpb24oKXtyZXR1
        cm4gdGhpcy5jYWNoZWFibGUoITEpfSxiLnJlYWRPbmx5PWZ1bmN0aW9uKGUp
        e3JldHVybiB0aGlzLl9yZWFkT25seT12b2lkIDA9PT1lfHwhIWUsdGhpc30s
        Yi5wcm9wZXJ0eT1mdW5jdGlvbigpe2Zvcih2YXIgZT1bXSx0PTAscj1hcmd1
        bWVudHMubGVuZ3RoO3I+dDt0KyspZS5wdXNoKGFyZ3VtZW50c1t0XSk7cmV0
        dXJuIHRoaXMuX2RlcGVuZGVudEtleXM9ZSx0aGlzfSxiLm1ldGE9ZnVuY3Rp
        b24oZSl7cmV0dXJuIDA9PT1hcmd1bWVudHMubGVuZ3RoP3RoaXMuX21ldGF8
        fHt9Oih0aGlzLl9tZXRhPWUsdGhpcyl9LGIuZGlkQ2hhbmdlPWZ1bmN0aW9u
        KGUsdCl7aWYodGhpcy5fY2FjaGVhYmxlJiZ0aGlzLl9zdXNwZW5kZWQhPT1l
        KXt2YXIgcj1oKGUpO3QgaW4gci5jYWNoZSYmKGRlbGV0ZSByLmNhY2hlW3Rd
        LG4odGhpcyxlLHQscikpfX0sYi5nZXQ9ZnVuY3Rpb24oZSx0KXt2YXIgbixp
        LGEscztpZih0aGlzLl9jYWNoZWFibGUpe2lmKGE9aChlKSxpPWEuY2FjaGUs
        dCBpbiBpKXJldHVybiBpW3RdO249aVt0XT10aGlzLmZ1bmMuY2FsbChlLHQp
        LHM9YS5jaGFpbldhdGNoZXJzJiZhLmNoYWluV2F0Y2hlcnNbdF0scyYmbyhz
        KSxyKHRoaXMsZSx0LGEpfWVsc2Ugbj10aGlzLmZ1bmMuY2FsbChlLHQpO3Jl
        dHVybiBufSxiLnNldD1mdW5jdGlvbihlLHQsbil7dmFyIGksbyxhLHM9dGhp
        cy5fY2FjaGVhYmxlLHU9dGhpcy5mdW5jLGM9aChlLHMpLGw9Yy53YXRjaGlu
        Z1t0XSxtPXRoaXMuX3N1c3BlbmRlZCxmPSExLHA9Yy5jYWNoZTtpZih0aGlz
        Ll9yZWFkT25seSl0aHJvdyBuZXcgRW1iZXIuRXJyb3IoIkNhbm5vdCBTZXQ6
        ICIrdCsiIG9uOiAiK2UudG9TdHJpbmcoKSk7dGhpcy5fc3VzcGVuZGVkPWU7
        dHJ5e2lmKHMmJnAuaGFzT3duUHJvcGVydHkodCkmJihvPXBbdF0sZj0hMCks
        aT11LndyYXBwZWRGdW5jdGlvbj91LndyYXBwZWRGdW5jdGlvbi5sZW5ndGg6
        dS5sZW5ndGgsMz09PWkpYT11LmNhbGwoZSx0LG4sbyk7ZWxzZXtpZigyIT09
        aSlyZXR1cm4gRW1iZXIuZGVmaW5lUHJvcGVydHkoZSx0LG51bGwsbyksRW1i
        ZXIuc2V0KGUsdCxuKSx2b2lkIDA7YT11LmNhbGwoZSx0LG4pfWlmKGYmJm89
        PT1hKXJldHVybjtsJiZFbWJlci5wcm9wZXJ0eVdpbGxDaGFuZ2UoZSx0KSxm
        JiZkZWxldGUgcFt0XSxzJiYoZnx8cih0aGlzLGUsdCxjKSxwW3RdPWEpLGwm
        JkVtYmVyLnByb3BlcnR5RGlkQ2hhbmdlKGUsdCl9ZmluYWxseXt0aGlzLl9z
        dXNwZW5kZWQ9bX1yZXR1cm4gYX0sYi50ZWFyZG93bj1mdW5jdGlvbihlLHQp
        e3ZhciByPWgoZSk7cmV0dXJuIHQgaW4gci5jYWNoZSYmbih0aGlzLGUsdCxy
        KSx0aGlzLl9jYWNoZWFibGUmJmRlbGV0ZSByLmNhY2hlW3RdLG51bGx9LEVt
        YmVyLmNvbXB1dGVkPWZ1bmN0aW9uKGUpe3ZhciB0O2lmKGFyZ3VtZW50cy5s
        ZW5ndGg+MSYmKHQ9bS5jYWxsKGFyZ3VtZW50cywwLC0xKSxlPW0uY2FsbChh
        cmd1bWVudHMsLTEpWzBdKSwiZnVuY3Rpb24iIT10eXBlb2YgZSl0aHJvdyBu
        ZXcgRW1iZXIuRXJyb3IoIkNvbXB1dGVkIFByb3BlcnR5IGRlY2xhcmVkIHdp
        dGhvdXQgYSBwcm9wZXJ0eSBmdW5jdGlvbiIpO3ZhciByPW5ldyBpKGUpO3Jl
        dHVybiB0JiZyLnByb3BlcnR5LmFwcGx5KHIsdCkscn0sRW1iZXIuY2FjaGVG
        b3I9ZnVuY3Rpb24oZSx0KXt2YXIgcj1oKGUsITEpLmNhY2hlO3JldHVybiBy
        JiZ0IGluIHI/clt0XTp2b2lkIDB9LHMoImVtcHR5IixmdW5jdGlvbihlKXty
        ZXR1cm4gRW1iZXIuaXNFbXB0eShjKHRoaXMsZSkpfSkscygibm90RW1wdHki
        LGZ1bmN0aW9uKGUpe3JldHVybiFFbWJlci5pc0VtcHR5KGModGhpcyxlKSl9
        KSxzKCJub25lIixmdW5jdGlvbihlKXtyZXR1cm4gRW1iZXIuaXNOb25lKGMo
        dGhpcyxlKSl9KSxzKCJub3QiLGZ1bmN0aW9uKGUpe3JldHVybiFjKHRoaXMs
        ZSl9KSxzKCJib29sIixmdW5jdGlvbihlKXtyZXR1cm4hIWModGhpcyxlKX0p
        LHMoIm1hdGNoIixmdW5jdGlvbihlLHQpe3ZhciByPWModGhpcyxlKTtyZXR1
        cm4ic3RyaW5nIj09dHlwZW9mIHI/ISFyLm1hdGNoKHQpOiExfSkscygiZXF1
        YWwiLGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGModGhpcyxlKT09PXR9KSxzKCJn
        dCIsZnVuY3Rpb24oZSx0KXtyZXR1cm4gYyh0aGlzLGUpPnR9KSxzKCJndGUi
        LGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGModGhpcyxlKT49dH0pLHMoImx0Iixm
        dW5jdGlvbihlLHQpe3JldHVybiBjKHRoaXMsZSk8dH0pLHMoImx0ZSIsZnVu
        Y3Rpb24oZSx0KXtyZXR1cm4gYyh0aGlzLGUpPD10fSksdSgiYW5kIixmdW5j
        dGlvbihlKXtmb3IodmFyIHQgaW4gZSlpZihlLmhhc093blByb3BlcnR5KHQp
        JiYhZVt0XSlyZXR1cm4hMTtyZXR1cm4hMH0pLHUoIm9yIixmdW5jdGlvbihl
        KXtmb3IodmFyIHQgaW4gZSlpZihlLmhhc093blByb3BlcnR5KHQpJiZlW3Rd
        KXJldHVybiEwO3JldHVybiExfSksdSgiYW55IixmdW5jdGlvbihlKXtmb3Io
        dmFyIHQgaW4gZSlpZihlLmhhc093blByb3BlcnR5KHQpJiZlW3RdKXJldHVy
        biBlW3RdO3JldHVybiBudWxsfSksdSgiY29sbGVjdCIsZnVuY3Rpb24oZSl7
        dmFyIHQ9W107Zm9yKHZhciByIGluIGUpZS5oYXNPd25Qcm9wZXJ0eShyKSYm
        KEVtYmVyLmlzTm9uZShlW3JdKT90LnB1c2gobnVsbCk6dC5wdXNoKGVbcl0p
        KTtyZXR1cm4gdH0pLEVtYmVyLmNvbXB1dGVkLmFsaWFzPWZ1bmN0aW9uKGUp
        e3JldHVybiBFbWJlci5jb21wdXRlZChlLGZ1bmN0aW9uKHQscil7cmV0dXJu
        IGFyZ3VtZW50cy5sZW5ndGg+MT8obCh0aGlzLGUscikscik6Yyh0aGlzLGUp
        fSl9LEVtYmVyLmNvbXB1dGVkLm9uZVdheT1mdW5jdGlvbihlKXtyZXR1cm4g
        RW1iZXIuY29tcHV0ZWQoZSxmdW5jdGlvbigpe3JldHVybiBjKHRoaXMsZSl9
        KX0sRW1iZXIuY29tcHV0ZWQuZGVmYXVsdFRvPWZ1bmN0aW9uKGUpe3JldHVy
        biBFbWJlci5jb21wdXRlZChmdW5jdGlvbih0LHIsbil7cmV0dXJuIDE9PT1h
        cmd1bWVudHMubGVuZ3RoP251bGwhPW4/bjpjKHRoaXMsZSk6bnVsbCE9cj9y
        OmModGhpcyxlKX0pfX0oKSxmdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSl7cmV0
        dXJuIGUrcn1mdW5jdGlvbiB0KGUpe3JldHVybiBlK259dmFyIHI9IjpjaGFu
        Z2UiLG49IjpiZWZvcmUiO0VtYmVyLmFkZE9ic2VydmVyPWZ1bmN0aW9uKHQs
        cixuLGkpe3JldHVybiBFbWJlci5hZGRMaXN0ZW5lcih0LGUociksbixpKSxF
        bWJlci53YXRjaCh0LHIpLHRoaXN9LEVtYmVyLm9ic2VydmVyc0Zvcj1mdW5j
        dGlvbih0LHIpe3JldHVybiBFbWJlci5saXN0ZW5lcnNGb3IodCxlKHIpKX0s
        RW1iZXIucmVtb3ZlT2JzZXJ2ZXI9ZnVuY3Rpb24odCxyLG4saSl7cmV0dXJu
        IEVtYmVyLnVud2F0Y2godCxyKSxFbWJlci5yZW1vdmVMaXN0ZW5lcih0LGUo
        ciksbixpKSx0aGlzfSxFbWJlci5hZGRCZWZvcmVPYnNlcnZlcj1mdW5jdGlv
        bihlLHIsbixpKXtyZXR1cm4gRW1iZXIuYWRkTGlzdGVuZXIoZSx0KHIpLG4s
        aSksRW1iZXIud2F0Y2goZSxyKSx0aGlzfSxFbWJlci5fc3VzcGVuZEJlZm9y
        ZU9ic2VydmVyPWZ1bmN0aW9uKGUscixuLGksbyl7cmV0dXJuIEVtYmVyLl9z
        dXNwZW5kTGlzdGVuZXIoZSx0KHIpLG4saSxvKX0sRW1iZXIuX3N1c3BlbmRP
        YnNlcnZlcj1mdW5jdGlvbih0LHIsbixpLG8pe3JldHVybiBFbWJlci5fc3Vz
        cGVuZExpc3RlbmVyKHQsZShyKSxuLGksbyl9O3ZhciBpPUVtYmVyLkFycmF5
        UG9seWZpbGxzLm1hcDtFbWJlci5fc3VzcGVuZEJlZm9yZU9ic2VydmVycz1m
        dW5jdGlvbihlLHIsbixvLGEpe3ZhciBzPWkuY2FsbChyLHQpO3JldHVybiBF
        bWJlci5fc3VzcGVuZExpc3RlbmVycyhlLHMsbixvLGEpfSxFbWJlci5fc3Vz
        cGVuZE9ic2VydmVycz1mdW5jdGlvbih0LHIsbixvLGEpe3ZhciBzPWkuY2Fs
        bChyLGUpO3JldHVybiBFbWJlci5fc3VzcGVuZExpc3RlbmVycyh0LHMsbixv
        LGEpfSxFbWJlci5iZWZvcmVPYnNlcnZlcnNGb3I9ZnVuY3Rpb24oZSxyKXty
        ZXR1cm4gRW1iZXIubGlzdGVuZXJzRm9yKGUsdChyKSl9LEVtYmVyLnJlbW92
        ZUJlZm9yZU9ic2VydmVyPWZ1bmN0aW9uKGUscixuLGkpe3JldHVybiBFbWJl
        ci51bndhdGNoKGUsciksRW1iZXIucmVtb3ZlTGlzdGVuZXIoZSx0KHIpLG4s
        aSksdGhpc319KCksZnVuY3Rpb24oKXtlKCJiYWNrYnVybmVyL3F1ZXVlIixb
        ImV4cG9ydHMiXSxmdW5jdGlvbihlKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24g
        dChlLHQscil7dGhpcy5kYXE9ZSx0aGlzLm5hbWU9dCx0aGlzLm9wdGlvbnM9
        cix0aGlzLl9xdWV1ZT1bXX10LnByb3RvdHlwZT17ZGFxOm51bGwsbmFtZTpu
        dWxsLG9wdGlvbnM6bnVsbCxfcXVldWU6bnVsbCxwdXNoOmZ1bmN0aW9uKGUs
        dCxyLG4pe3ZhciBpPXRoaXMuX3F1ZXVlOwpyZXR1cm4gaS5wdXNoKGUsdCxy
        LG4pLHtxdWV1ZTp0aGlzLHRhcmdldDplLG1ldGhvZDp0fX0scHVzaFVuaXF1
        ZTpmdW5jdGlvbihlLHQscixuKXt2YXIgaSxvLGEscyx1PXRoaXMuX3F1ZXVl
        O2ZvcihhPTAscz11Lmxlbmd0aDtzPmE7YSs9NClpZihpPXVbYV0sbz11W2Er
        MV0saT09PWUmJm89PT10KXJldHVybiB1W2ErMl09cix1W2ErM109bix7cXVl
        dWU6dGhpcyx0YXJnZXQ6ZSxtZXRob2Q6dH07cmV0dXJuIHRoaXMuX3F1ZXVl
        LnB1c2goZSx0LHIsbikse3F1ZXVlOnRoaXMsdGFyZ2V0OmUsbWV0aG9kOnR9
        fSxmbHVzaDpmdW5jdGlvbigpe3ZhciBlLHQscixuLGksbz10aGlzLl9xdWV1
        ZSxhPXRoaXMub3B0aW9ucyxzPWEmJmEuYmVmb3JlLHU9YSYmYS5hZnRlcixj
        PW8ubGVuZ3RoO2ZvcihjJiZzJiZzKCksaT0wO2M+aTtpKz00KWU9b1tpXSx0
        PW9baSsxXSxyPW9baSsyXSxuPW9baSszXSxyJiZyLmxlbmd0aD4wP3QuYXBw
        bHkoZSxyKTp0LmNhbGwoZSk7YyYmdSYmdSgpLG8ubGVuZ3RoPmM/KHRoaXMu
        X3F1ZXVlPW8uc2xpY2UoYyksdGhpcy5mbHVzaCgpKTp0aGlzLl9xdWV1ZS5s
        ZW5ndGg9MH0sY2FuY2VsOmZ1bmN0aW9uKGUpe3ZhciB0LHIsbixpLG89dGhp
        cy5fcXVldWU7Zm9yKG49MCxpPW8ubGVuZ3RoO2k+bjtuKz00KWlmKHQ9b1tu
        XSxyPW9bbisxXSx0PT09ZS50YXJnZXQmJnI9PT1lLm1ldGhvZClyZXR1cm4g
        by5zcGxpY2Uobiw0KSwhMDtpZihvPXRoaXMuX3F1ZXVlQmVpbmdGbHVzaGVk
        KWZvcihuPTAsaT1vLmxlbmd0aDtpPm47bis9NClpZih0PW9bbl0scj1vW24r
        MV0sdD09PWUudGFyZ2V0JiZyPT09ZS5tZXRob2QpcmV0dXJuIG9bbisxXT1u
        dWxsLCEwfX0sZS5RdWV1ZT10fSksZSgiYmFja2J1cm5lci9kZWZlcnJlZF9h
        Y3Rpb25fcXVldWVzIixbImJhY2tidXJuZXIvcXVldWUiLCJleHBvcnRzIl0s
        ZnVuY3Rpb24oZSx0KXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gcihlLHQpe3Zh
        ciByPXRoaXMucXVldWVzPXt9O3RoaXMucXVldWVOYW1lcz1lPWV8fFtdO2Zv
        cih2YXIgbixvPTAsYT1lLmxlbmd0aDthPm87bysrKW49ZVtvXSxyW25dPW5l
        dyBpKHRoaXMsbix0W25dKX1mdW5jdGlvbiBuKGUsdCl7Zm9yKHZhciByLG4s
        aT0wLG89dDtvPj1pO2krKylpZihyPWUucXVldWVOYW1lc1tpXSxuPWUucXVl
        dWVzW3JdLG4uX3F1ZXVlLmxlbmd0aClyZXR1cm4gaTtyZXR1cm4tMX12YXIg
        aT1lLlF1ZXVlO3IucHJvdG90eXBlPXtxdWV1ZU5hbWVzOm51bGwscXVldWVz
        Om51bGwsc2NoZWR1bGU6ZnVuY3Rpb24oZSx0LHIsbixpLG8pe3ZhciBhPXRo
        aXMucXVldWVzLHM9YVtlXTtpZighcyl0aHJvdyBuZXcgRXJyb3IoIllvdSBh
        dHRlbXB0ZWQgdG8gc2NoZWR1bGUgYW4gYWN0aW9uIGluIGEgcXVldWUgKCIr
        ZSsiKSB0aGF0IGRvZXNuJ3QgZXhpc3QiKTtyZXR1cm4gaT9zLnB1c2hVbmlx
        dWUodCxyLG4sbyk6cy5wdXNoKHQscixuLG8pfSxmbHVzaDpmdW5jdGlvbigp
        e2Zvcih2YXIgZSx0LHIsaSxvPXRoaXMucXVldWVzLGE9dGhpcy5xdWV1ZU5h
        bWVzLHM9MCx1PWEubGVuZ3RoO3U+czspe2U9YVtzXSx0PW9bZV0scj10Ll9x
        dWV1ZUJlaW5nRmx1c2hlZD10Ll9xdWV1ZS5zbGljZSgpLHQuX3F1ZXVlPVtd
        O3ZhciBjLGwsaCxtLGY9dC5vcHRpb25zLHA9ZiYmZi5iZWZvcmUsZD1mJiZm
        LmFmdGVyLGI9MCx2PXIubGVuZ3RoO2Zvcih2JiZwJiZwKCk7dj5iOyljPXJb
        Yl0sbD1yW2IrMV0saD1yW2IrMl0sbT1yW2IrM10sInN0cmluZyI9PXR5cGVv
        ZiBsJiYobD1jW2xdKSxsJiYoaCYmaC5sZW5ndGg+MD9sLmFwcGx5KGMsaCk6
        bC5jYWxsKGMpKSxiKz00O3QuX3F1ZXVlQmVpbmdGbHVzaGVkPW51bGwsdiYm
        ZCYmZCgpLC0xPT09KGk9bih0aGlzLHMpKT9zKys6cz1pfX19LHQuRGVmZXJy
        ZWRBY3Rpb25RdWV1ZXM9cn0pLGUoImJhY2tidXJuZXIiLFsiYmFja2J1cm5l
        ci9kZWZlcnJlZF9hY3Rpb25fcXVldWVzIiwiZXhwb3J0cyJdLGZ1bmN0aW9u
        KGUsdCl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIHIoZSl7cmV0dXJuIm51bWJl
        ciI9PXR5cGVvZiBlfHx2LnRlc3QoZSl9ZnVuY3Rpb24gbihlLHQpe3RoaXMu
        cXVldWVOYW1lcz1lLHRoaXMub3B0aW9ucz10fHx7fSx0aGlzLm9wdGlvbnMu
        ZGVmYXVsdFF1ZXVlfHwodGhpcy5vcHRpb25zLmRlZmF1bHRRdWV1ZT1lWzBd
        KSx0aGlzLmluc3RhbmNlU3RhY2s9W119ZnVuY3Rpb24gaShlKXtlLmJlZ2lu
        KCkscz1iLnNldFRpbWVvdXQoZnVuY3Rpb24oKXtzPW51bGwsZS5lbmQoKX0p
        fWZ1bmN0aW9uIG8oZSl7dmFyIHQscixuLGksYT0rbmV3IERhdGU7ZS5ydW4o
        ZnVuY3Rpb24oKXtmb3Iobj0wLGk9ZC5sZW5ndGg7aT5uJiYodD1kW25dLCEo
        dD5hKSk7bis9Mik7Zm9yKHI9ZC5zcGxpY2UoMCxuKSxuPTEsaT1yLmxlbmd0
        aDtpPm47bis9MillLnNjaGVkdWxlKGUub3B0aW9ucy5kZWZhdWx0UXVldWUs
        bnVsbCxyW25dKX0pLGQubGVuZ3RoJiYodT1iLnNldFRpbWVvdXQoZnVuY3Rp
        b24oKXtvKGUpLHU9bnVsbCxjPW51bGx9LGRbMF0tYSksYz1kWzBdKX1mdW5j
        dGlvbiBhKGUsdCl7Zm9yKHZhciByLG49LTEsaT0wLG89cC5sZW5ndGg7bz5p
        O2krKylpZihyPXBbaV0sclswXT09PWUmJnJbMV09PT10KXtuPWk7YnJlYWt9
        cmV0dXJuIG59dmFyIHMsdSxjLGw9ZS5EZWZlcnJlZEFjdGlvblF1ZXVlcyxo
        PVtdLnNsaWNlLG09W10ucG9wLGY9W10scD1bXSxkPVtdLGI9dGhpcyx2PS9c
        ZCsvO24ucHJvdG90eXBlPXtxdWV1ZU5hbWVzOm51bGwsb3B0aW9uczpudWxs
        LGN1cnJlbnRJbnN0YW5jZTpudWxsLGluc3RhbmNlU3RhY2s6bnVsbCxiZWdp
        bjpmdW5jdGlvbigpe3ZhciBlPXRoaXMub3B0aW9ucyYmdGhpcy5vcHRpb25z
        Lm9uQmVnaW4sdD10aGlzLmN1cnJlbnRJbnN0YW5jZTt0JiZ0aGlzLmluc3Rh
        bmNlU3RhY2sucHVzaCh0KSx0aGlzLmN1cnJlbnRJbnN0YW5jZT1uZXcgbCh0
        aGlzLnF1ZXVlTmFtZXMsdGhpcy5vcHRpb25zKSxlJiZlKHRoaXMuY3VycmVu
        dEluc3RhbmNlLHQpfSxlbmQ6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm9wdGlv
        bnMmJnRoaXMub3B0aW9ucy5vbkVuZCx0PXRoaXMuY3VycmVudEluc3RhbmNl
        LHI9bnVsbDt0cnl7dC5mbHVzaCgpfWZpbmFsbHl7dGhpcy5jdXJyZW50SW5z
        dGFuY2U9bnVsbCx0aGlzLmluc3RhbmNlU3RhY2subGVuZ3RoJiYocj10aGlz
        Lmluc3RhbmNlU3RhY2sucG9wKCksdGhpcy5jdXJyZW50SW5zdGFuY2U9ciks
        ZSYmZSh0LHIpfX0scnVuOmZ1bmN0aW9uKGUsdCl7dmFyIHI7dGhpcy5iZWdp
        bigpLHR8fCh0PWUsZT1udWxsKSwic3RyaW5nIj09dHlwZW9mIHQmJih0PWVb
        dF0pO3ZhciBuPSExO3RyeXtyPWFyZ3VtZW50cy5sZW5ndGg+Mj90LmFwcGx5
        KGUsaC5jYWxsKGFyZ3VtZW50cywyKSk6dC5jYWxsKGUpfWZpbmFsbHl7bnx8
        KG49ITAsdGhpcy5lbmQoKSl9cmV0dXJuIHJ9LGRlZmVyOmZ1bmN0aW9uKGUs
        dCxyKXtyfHwocj10LHQ9bnVsbCksInN0cmluZyI9PXR5cGVvZiByJiYocj10
        W3JdKTt2YXIgbj10aGlzLkRFQlVHPyhuZXcgRXJyb3IpLnN0YWNrOnZvaWQg
        MCxvPWFyZ3VtZW50cy5sZW5ndGg+Mz9oLmNhbGwoYXJndW1lbnRzLDMpOnZv
        aWQgMDtyZXR1cm4gdGhpcy5jdXJyZW50SW5zdGFuY2V8fGkodGhpcyksdGhp
        cy5jdXJyZW50SW5zdGFuY2Uuc2NoZWR1bGUoZSx0LHIsbywhMSxuKX0sZGVm
        ZXJPbmNlOmZ1bmN0aW9uKGUsdCxyKXtyfHwocj10LHQ9bnVsbCksInN0cmlu
        ZyI9PXR5cGVvZiByJiYocj10W3JdKTt2YXIgbj10aGlzLkRFQlVHPyhuZXcg
        RXJyb3IpLnN0YWNrOnZvaWQgMCxvPWFyZ3VtZW50cy5sZW5ndGg+Mz9oLmNh
        bGwoYXJndW1lbnRzLDMpOnZvaWQgMDtyZXR1cm4gdGhpcy5jdXJyZW50SW5z
        dGFuY2V8fGkodGhpcyksdGhpcy5jdXJyZW50SW5zdGFuY2Uuc2NoZWR1bGUo
        ZSx0LHIsbywhMCxuKX0sc2V0VGltZW91dDpmdW5jdGlvbigpe2Z1bmN0aW9u
        IGUoKXt0LmFwcGx5KGksbSl9dmFyIHQsbixpLGEscyxsLG09aC5jYWxsKGFy
        Z3VtZW50cyksZj1tLmxlbmd0aCxwPXRoaXM7aWYoMCE9PWYpe2lmKDE9PT1m
        KXQ9bS5zaGlmdCgpLG49MDtlbHNlIGlmKDI9PT1mKWE9bVswXSxzPW1bMV0s
        ImZ1bmN0aW9uIj09dHlwZW9mIHN8fCJmdW5jdGlvbiI9PXR5cGVvZiBhW3Nd
        PyhpPW0uc2hpZnQoKSx0PW0uc2hpZnQoKSxuPTApOnIocyk/KHQ9bS5zaGlm
        dCgpLG49bS5zaGlmdCgpKToodD1tLnNoaWZ0KCksbj0wKTtlbHNle3ZhciB2
        PW1bbS5sZW5ndGgtMV07cih2KSYmKG49bS5wb3AoKSksYT1tWzBdLGw9bVsx
        XSwiZnVuY3Rpb24iPT10eXBlb2YgbHx8InN0cmluZyI9PXR5cGVvZiBsJiZu
        dWxsIT09YSYmbCBpbiBhPyhpPW0uc2hpZnQoKSx0PW0uc2hpZnQoKSk6dD1t
        LnNoaWZ0KCl9dmFyIEU9K25ldyBEYXRlK3BhcnNlSW50KG4sMTApOyJzdHJp
        bmciPT10eXBlb2YgdCYmKHQ9aVt0XSk7dmFyIGcseTtmb3IoZz0wLHk9ZC5s
        ZW5ndGg7eT5nJiYhKEU8ZFtnXSk7Zys9Mik7cmV0dXJuIGQuc3BsaWNlKGcs
        MCxFLGUpLHUmJkU+Yz9lOih1JiYoY2xlYXJUaW1lb3V0KHUpLHU9bnVsbCks
        dT1iLnNldFRpbWVvdXQoZnVuY3Rpb24oKXtvKHApLHU9bnVsbCxjPW51bGx9
        LG4pLGM9RSxlKX19LHRocm90dGxlOmZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBy
        LG49dGhpcyxpPWFyZ3VtZW50cyxvPXBhcnNlSW50KG0uY2FsbChpKSwxMCks
        YT0wLHM9Zi5sZW5ndGg7cz5hO2ErKylpZihyPWZbYV0sclswXT09PWUmJnJb
        MV09PT10KXJldHVybjt2YXIgdT1iLnNldFRpbWVvdXQoZnVuY3Rpb24oKXtu
        LnJ1bi5hcHBseShuLGkpO2Zvcih2YXIgbz0tMSxhPTAscz1mLmxlbmd0aDtz
        PmE7YSsrKWlmKHI9ZlthXSxyWzBdPT09ZSYmclsxXT09PXQpe289YTticmVh
        a31vPi0xJiZmLnNwbGljZShvLDEpfSxvKTtmLnB1c2goW2UsdCx1XSl9LGRl
        Ym91bmNlOmZ1bmN0aW9uKGUsdCl7dmFyIHIsbixpLG89dGhpcyxzPWFyZ3Vt
        ZW50cyx1PW0uY2FsbChzKTsibnVtYmVyIj09dHlwZW9mIHV8fCJzdHJpbmci
        PT10eXBlb2YgdT8ocj11LHU9ITEpOnI9bS5jYWxsKHMpLHI9cGFyc2VJbnQo
        ciwxMCksbj1hKGUsdCksLTEhPT1uJiYoaT1wW25dLHAuc3BsaWNlKG4sMSks
        Y2xlYXJUaW1lb3V0KGlbMl0pKTt2YXIgYz1iLnNldFRpbWVvdXQoZnVuY3Rp
        b24oKXt1fHxvLnJ1bi5hcHBseShvLHMpLG49YShlLHQpLG4mJnAuc3BsaWNl
        KG4sMSl9LHIpO3UmJi0xPT09biYmby5ydW4uYXBwbHkobyxzKSxwLnB1c2go
        W2UsdCxjXSl9LGNhbmNlbFRpbWVyczpmdW5jdGlvbigpe3ZhciBlLHQ7Zm9y
        KGU9MCx0PWYubGVuZ3RoO3Q+ZTtlKyspY2xlYXJUaW1lb3V0KGZbZV1bMl0p
        O2ZvcihmPVtdLGU9MCx0PXAubGVuZ3RoO3Q+ZTtlKyspY2xlYXJUaW1lb3V0
        KHBbZV1bMl0pO3A9W10sdSYmKGNsZWFyVGltZW91dCh1KSx1PW51bGwpLGQ9
        W10scyYmKGNsZWFyVGltZW91dChzKSxzPW51bGwpfSxoYXNUaW1lcnM6ZnVu
        Y3Rpb24oKXtyZXR1cm4hIWQubGVuZ3RofHxzfSxjYW5jZWw6ZnVuY3Rpb24o
        ZSl7aWYoZSYmIm9iamVjdCI9PXR5cGVvZiBlJiZlLnF1ZXVlJiZlLm1ldGhv
        ZClyZXR1cm4gZS5xdWV1ZS5jYW5jZWwoZSk7aWYoImZ1bmN0aW9uIj09dHlw
        ZW9mIGUpZm9yKHZhciB0PTAscj1kLmxlbmd0aDtyPnQ7dCs9MilpZihkW3Qr
        MV09PT1lKXJldHVybiBkLnNwbGljZSh0LDIpLCEwfX0sbi5wcm90b3R5cGUu
        c2NoZWR1bGU9bi5wcm90b3R5cGUuZGVmZXIsbi5wcm90b3R5cGUuc2NoZWR1
        bGVPbmNlPW4ucHJvdG90eXBlLmRlZmVyT25jZSxuLnByb3RvdHlwZS5sYXRl
        cj1uLnByb3RvdHlwZS5zZXRUaW1lb3V0LHQuQmFja2J1cm5lcj1ufSl9KCks
        ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7IUVtYmVyLnJ1bi5jdXJyZW50UnVu
        TG9vcH12YXIgcj1mdW5jdGlvbihlKXtFbWJlci5ydW4uY3VycmVudFJ1bkxv
        b3A9ZX0sbj1mdW5jdGlvbihlLHQpe0VtYmVyLnJ1bi5jdXJyZW50UnVuTG9v
        cD10fSxpPXQoImJhY2tidXJuZXIiKS5CYWNrYnVybmVyLG89bmV3IGkoWyJz
        eW5jIiwiYWN0aW9ucyIsImRlc3Ryb3kiXSx7c3luYzp7YmVmb3JlOkVtYmVy
        LmJlZ2luUHJvcGVydHlDaGFuZ2VzLGFmdGVyOkVtYmVyLmVuZFByb3BlcnR5
        Q2hhbmdlc30sZGVmYXVsdFF1ZXVlOiJhY3Rpb25zIixvbkJlZ2luOnIsb25F
        bmQ6bn0pLGE9W10uc2xpY2U7RW1iZXIucnVuPWZ1bmN0aW9uKCl7dmFyIGU7
        aWYoRW1iZXIub25lcnJvcil0cnl7ZT1vLnJ1bi5hcHBseShvLGFyZ3VtZW50
        cyl9Y2F0Y2godCl7RW1iZXIub25lcnJvcih0KX1lbHNlIGU9by5ydW4uYXBw
        bHkobyxhcmd1bWVudHMpO3JldHVybiBlfSxFbWJlci5ydW4uam9pbj1mdW5j
        dGlvbigpe2lmKCFFbWJlci5ydW4uY3VycmVudFJ1bkxvb3ApcmV0dXJuIEVt
        YmVyLnJ1bi5hcHBseShFbWJlci5ydW4sYXJndW1lbnRzKTt2YXIgZT1hLmNh
        bGwoYXJndW1lbnRzKTtlLnVuc2hpZnQoImFjdGlvbnMiKSxFbWJlci5ydW4u
        c2NoZWR1bGUuYXBwbHkoRW1iZXIucnVuLGUpfSxFbWJlci5ydW4uYmFja2J1
        cm5lcj1vLEVtYmVyLnJ1bixFbWJlci5ydW4uY3VycmVudFJ1bkxvb3A9bnVs
        bCxFbWJlci5ydW4ucXVldWVzPW8ucXVldWVOYW1lcyxFbWJlci5ydW4uYmVn
        aW49ZnVuY3Rpb24oKXtvLmJlZ2luKCl9LEVtYmVyLnJ1bi5lbmQ9ZnVuY3Rp
        b24oKXtvLmVuZCgpfSxFbWJlci5ydW4uc2NoZWR1bGU9ZnVuY3Rpb24oKXtl
        KCksby5zY2hlZHVsZS5hcHBseShvLGFyZ3VtZW50cyl9LEVtYmVyLnJ1bi5o
        YXNTY2hlZHVsZWRUaW1lcnM9ZnVuY3Rpb24oKXtyZXR1cm4gby5oYXNUaW1l
        cnMoKX0sRW1iZXIucnVuLmNhbmNlbFRpbWVycz1mdW5jdGlvbigpe28uY2Fu
        Y2VsVGltZXJzKCl9LEVtYmVyLnJ1bi5zeW5jPWZ1bmN0aW9uKCl7by5jdXJy
        ZW50SW5zdGFuY2UmJm8uY3VycmVudEluc3RhbmNlLnF1ZXVlcy5zeW5jLmZs
        dXNoKCl9LEVtYmVyLnJ1bi5sYXRlcj1mdW5jdGlvbigpe3JldHVybiBvLmxh
        dGVyLmFwcGx5KG8sYXJndW1lbnRzKX0sRW1iZXIucnVuLm9uY2U9ZnVuY3Rp
        b24oKXtlKCk7dmFyIHQ9YS5jYWxsKGFyZ3VtZW50cyk7cmV0dXJuIHQudW5z
        aGlmdCgiYWN0aW9ucyIpLG8uc2NoZWR1bGVPbmNlLmFwcGx5KG8sdCl9LEVt
        YmVyLnJ1bi5zY2hlZHVsZU9uY2U9ZnVuY3Rpb24oKXtyZXR1cm4gZSgpLG8u
        c2NoZWR1bGVPbmNlLmFwcGx5KG8sYXJndW1lbnRzKX0sRW1iZXIucnVuLm5l
        eHQ9ZnVuY3Rpb24oKXt2YXIgZT1hLmNhbGwoYXJndW1lbnRzKTtyZXR1cm4g
        ZS5wdXNoKDEpLG8ubGF0ZXIuYXBwbHkobyxlKX0sRW1iZXIucnVuLmNhbmNl
        bD1mdW5jdGlvbihlKXtyZXR1cm4gby5jYW5jZWwoZSl9LEVtYmVyLnJ1bi5k
        ZWJvdW5jZT1mdW5jdGlvbigpe3JldHVybiBvLmRlYm91bmNlLmFwcGx5KG8s
        YXJndW1lbnRzKX0sRW1iZXIucnVuLnRocm90dGxlPWZ1bmN0aW9uKCl7cmV0
        dXJuIG8udGhyb3R0bGUuYXBwbHkobyxhcmd1bWVudHMpfX0oKSxmdW5jdGlv
        bigpe2Z1bmN0aW9uIGUoZSx0KXtyZXR1cm4gcihvKHQpP0VtYmVyLmxvb2t1
        cDplLHQpfWZ1bmN0aW9uIHQoZSx0KXtmb3IodmFyIHIgaW4gdCl0Lmhhc093
        blByb3BlcnR5KHIpJiYoZVtyXT10W3JdKX1FbWJlci5MT0dfQklORElOR1M9
        ITF8fCEhRW1iZXIuRU5WLkxPR19CSU5ESU5HUzt2YXIgcj1FbWJlci5nZXQs
        bj0oRW1iZXIuc2V0LEVtYmVyLmd1aWRGb3IpLGk9L14oW0EtWiRdfChbMC05
        XVtBLVokXSkpLyxvPUVtYmVyLmlzR2xvYmFsUGF0aD1mdW5jdGlvbihlKXty
        ZXR1cm4gaS50ZXN0KGUpfSxhPWZ1bmN0aW9uKGUsdCl7dGhpcy5fZGlyZWN0
        aW9uPSJmd2QiLHRoaXMuX2Zyb209dCx0aGlzLl90bz1lLHRoaXMuX2RpcmVj
        dGlvbk1hcD1FbWJlci5NYXAuY3JlYXRlKCl9O2EucHJvdG90eXBlPXtjb3B5
        OmZ1bmN0aW9uKCl7dmFyIGU9bmV3IGEodGhpcy5fdG8sdGhpcy5fZnJvbSk7
        cmV0dXJuIHRoaXMuX29uZVdheSYmKGUuX29uZVdheT0hMCksZX0sZnJvbTpm
        dW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fZnJvbT1lLHRoaXN9LHRvOmZ1bmN0
        aW9uKGUpe3JldHVybiB0aGlzLl90bz1lLHRoaXN9LG9uZVdheTpmdW5jdGlv
        bigpe3JldHVybiB0aGlzLl9vbmVXYXk9ITAsdGhpc30sdG9TdHJpbmc6ZnVu
        Y3Rpb24oKXt2YXIgZT10aGlzLl9vbmVXYXk/IltvbmVXYXldIjoiIjtyZXR1
        cm4iRW1iZXIuQmluZGluZzwiK24odGhpcykrIj4oIit0aGlzLl9mcm9tKyIg
        LT4gIit0aGlzLl90bysiKSIrZX0sY29ubmVjdDpmdW5jdGlvbih0KXt2YXIg
        cj10aGlzLl9mcm9tLG49dGhpcy5fdG87cmV0dXJuIEVtYmVyLnRyeVNldCh0
        LG4sZSh0LHIpKSxFbWJlci5hZGRPYnNlcnZlcih0LHIsdGhpcyx0aGlzLmZy
        b21EaWRDaGFuZ2UpLHRoaXMuX29uZVdheXx8RW1iZXIuYWRkT2JzZXJ2ZXIo
        dCxuLHRoaXMsdGhpcy50b0RpZENoYW5nZSksdGhpcy5fcmVhZHlUb1N5bmM9
        ITAsdGhpc30sZGlzY29ubmVjdDpmdW5jdGlvbihlKXt2YXIgdD0hdGhpcy5f
        b25lV2F5O3JldHVybiBFbWJlci5yZW1vdmVPYnNlcnZlcihlLHRoaXMuX2Zy
        b20sdGhpcyx0aGlzLmZyb21EaWRDaGFuZ2UpLHQmJkVtYmVyLnJlbW92ZU9i
        c2VydmVyKGUsdGhpcy5fdG8sdGhpcyx0aGlzLnRvRGlkQ2hhbmdlKSx0aGlz
        Ll9yZWFkeVRvU3luYz0hMSx0aGlzfSxmcm9tRGlkQ2hhbmdlOmZ1bmN0aW9u
        KGUpe3RoaXMuX3NjaGVkdWxlU3luYyhlLCJmd2QiKX0sdG9EaWRDaGFuZ2U6
        ZnVuY3Rpb24oZSl7dGhpcy5fc2NoZWR1bGVTeW5jKGUsImJhY2siKX0sX3Nj
        aGVkdWxlU3luYzpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXMuX2RpcmVjdGlv
        bk1hcCxuPXIuZ2V0KGUpO258fChFbWJlci5ydW4uc2NoZWR1bGUoInN5bmMi
        LHRoaXMsdGhpcy5fc3luYyxlKSxyLnNldChlLHQpKSwiYmFjayI9PT1uJiYi
        ZndkIj09PXQmJnIuc2V0KGUsImZ3ZCIpfSxfc3luYzpmdW5jdGlvbih0KXt2
        YXIgbj1FbWJlci5MT0dfQklORElOR1M7aWYoIXQuaXNEZXN0cm95ZWQmJnRo
        aXMuX3JlYWR5VG9TeW5jKXt2YXIgaT10aGlzLl9kaXJlY3Rpb25NYXAsbz1p
        LmdldCh0KSxhPXRoaXMuX2Zyb20scz10aGlzLl90bztpZihpLnJlbW92ZSh0
        KSwiZndkIj09PW8pe3ZhciB1PWUodCx0aGlzLl9mcm9tKTtuJiZFbWJlci5M
        b2dnZXIubG9nKCIgIix0aGlzLnRvU3RyaW5nKCksIi0+Iix1LHQpLHRoaXMu
        X29uZVdheT9FbWJlci50cnlTZXQodCxzLHUpOkVtYmVyLl9zdXNwZW5kT2Jz
        ZXJ2ZXIodCxzLHRoaXMsdGhpcy50b0RpZENoYW5nZSxmdW5jdGlvbigpe0Vt
        YmVyLnRyeVNldCh0LHMsdSl9KX1lbHNlIGlmKCJiYWNrIj09PW8pe3ZhciBj
        PXIodCx0aGlzLl90byk7biYmRW1iZXIuTG9nZ2VyLmxvZygiICIsdGhpcy50
        b1N0cmluZygpLCI8LSIsYyx0KSxFbWJlci5fc3VzcGVuZE9ic2VydmVyKHQs
        YSx0aGlzLHRoaXMuZnJvbURpZENoYW5nZSxmdW5jdGlvbigpe0VtYmVyLnRy
        eVNldChFbWJlci5pc0dsb2JhbFBhdGgoYSk/RW1iZXIubG9va3VwOnQsYSxj
        KX0pfX19fSx0KGEse2Zyb206ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9bmV3
        IGU7cmV0dXJuIHQuZnJvbS5hcHBseSh0LGFyZ3VtZW50cyl9LHRvOmZ1bmN0
        aW9uKCl7dmFyIGU9dGhpcyx0PW5ldyBlO3JldHVybiB0LnRvLmFwcGx5KHQs
        YXJndW1lbnRzKX0sb25lV2F5OmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcyxu
        PW5ldyByKG51bGwsZSk7cmV0dXJuIG4ub25lV2F5KHQpfX0pLEVtYmVyLkJp
        bmRpbmc9YSxFbWJlci5iaW5kPWZ1bmN0aW9uKGUsdCxyKXtyZXR1cm4gbmV3
        IEVtYmVyLkJpbmRpbmcodCxyKS5jb25uZWN0KGUpfSxFbWJlci5vbmVXYXk9
        ZnVuY3Rpb24oZSx0LHIpe3JldHVybiBuZXcgRW1iZXIuQmluZGluZyh0LHIp
        Lm9uZVdheSgpLmNvbm5lY3QoZSl9fSgpLGZ1bmN0aW9uKCl7ZnVuY3Rpb24g
        ZShlKXt2YXIgdD1FbWJlci5tZXRhKGUsITApLHI9dC5taXhpbnM7cmV0dXJu
        IHI/dC5oYXNPd25Qcm9wZXJ0eSgibWl4aW5zIil8fChyPXQubWl4aW5zPXgo
        cikpOnI9dC5taXhpbnM9e30scn1mdW5jdGlvbiB0KGUsdCl7cmV0dXJuIHQm
        JnQubGVuZ3RoPjAmJihlLm1peGlucz1DLmNhbGwodCxmdW5jdGlvbihlKXtp
        ZihlIGluc3RhbmNlb2YgeSlyZXR1cm4gZTt2YXIgdD1uZXcgeTtyZXR1cm4g
        dC5wcm9wZXJ0aWVzPWUsdH0pKSxlfWZ1bmN0aW9uIHIoZSl7cmV0dXJuImZ1
        bmN0aW9uIj09dHlwZW9mIGUmJmUuaXNNZXRob2QhPT0hMSYmZSE9PUJvb2xl
        YW4mJmUhPT1PYmplY3QmJmUhPT1OdW1iZXImJmUhPT1BcnJheSYmZSE9PURh
        dGUmJmUhPT1TdHJpbmd9ZnVuY3Rpb24gbihlLHQpe3ZhciByO3JldHVybiB0
        IGluc3RhbmNlb2YgeT8ocj1UKHQpLGVbcl0/UzooZVtyXT10LHQucHJvcGVy
        dGllcykpOnR9ZnVuY3Rpb24gaShlLHQscixuKXt2YXIgaTtyZXR1cm4gaT1y
        W2VdfHxuW2VdLHRbZV0mJihpPWk/aS5jb25jYXQodFtlXSk6dFtlXSksaX1m
        dW5jdGlvbiBvKGUsdCxyLG4saSl7dmFyIG87cmV0dXJuIHZvaWQgMD09PW5b
        dF0mJihvPWlbdF0pLG89b3x8ZS5kZXNjc1t0XSxvJiZvIGluc3RhbmNlb2Yg
        RW1iZXIuQ29tcHV0ZWRQcm9wZXJ0eT8ocj14KHIpLHIuZnVuYz1FbWJlci53
        cmFwKHIuZnVuYyxvLmZ1bmMpLHIpOnJ9ZnVuY3Rpb24gYShlLHQscixuLGkp
        e3ZhciBvO3JldHVybiB2b2lkIDA9PT1pW3RdJiYobz1uW3RdKSxvPW98fGVb
        dF0sImZ1bmN0aW9uIiE9dHlwZW9mIG8/cjpFbWJlci53cmFwKHIsbyl9ZnVu
        Y3Rpb24gcyhlLHQscixuKXt2YXIgaT1uW3RdfHxlW3RdO3JldHVybiBpPyJm
        dW5jdGlvbiI9PXR5cGVvZiBpLmNvbmNhdD9pLmNvbmNhdChyKTpFbWJlci5t
        YWtlQXJyYXkoaSkuY29uY2F0KHIpOkVtYmVyLm1ha2VBcnJheShyKX1mdW5j
        dGlvbiB1KGUsdCxuLGkpe3ZhciBvPWlbdF18fGVbdF07aWYoIW8pcmV0dXJu
        IG47dmFyIHM9RW1iZXIubWVyZ2Uoe30sbyk7Zm9yKHZhciB1IGluIG4paWYo
        bi5oYXNPd25Qcm9wZXJ0eSh1KSl7dmFyIGM9blt1XTtzW3VdPXIoYyk/YShl
        LHUsYyxvLHt9KTpjfXJldHVybiBzfWZ1bmN0aW9uIGMoZSx0LG4saSxjLGws
        aCxtKXtpZihuIGluc3RhbmNlb2YgRW1iZXIuRGVzY3JpcHRvcil7aWYobj09
        PXcmJmNbdF0pcmV0dXJuIFM7bi5mdW5jJiYobj1vKGksdCxuLGwsYykpLGNb
        dF09bixsW3RdPXZvaWQgMH1lbHNlIGgmJk8uY2FsbChoLHQpPj0wfHwiY29u
        Y2F0ZW5hdGVkUHJvcGVydGllcyI9PT10fHwibWVyZ2VkUHJvcGVydGllcyI9
        PT10P249cyhlLHQsbixsKTptJiZPLmNhbGwobSx0KT49MD9uPXUoZSx0LG4s
        bCk6cihuKSYmKG49YShlLHQsbixsLGMpKSxjW3RdPXZvaWQgMCxsW3RdPW59
        ZnVuY3Rpb24gbChlLHQscixvLGEscyl7ZnVuY3Rpb24gdShlKXtkZWxldGUg
        cltlXSxkZWxldGUgb1tlXX1mb3IodmFyIGgsbSxmLHAsZCxiLHY9MCxFPWUu
        bGVuZ3RoO0U+djt2KyspaWYoaD1lW3ZdLG09bih0LGgpLG0hPT1TKWlmKG0p
        e2I9RW1iZXIubWV0YShhKSxhLndpbGxNZXJnZU1peGluJiZhLndpbGxNZXJn
        ZU1peGluKG0pLHA9aSgiY29uY2F0ZW5hdGVkUHJvcGVydGllcyIsbSxvLGEp
        LGQ9aSgibWVyZ2VkUHJvcGVydGllcyIsbSxvLGEpO2ZvcihmIGluIG0pbS5o
        YXNPd25Qcm9wZXJ0eShmKSYmKHMucHVzaChmKSxjKGEsZixtW2ZdLGIscixv
        LHAsZCkpO20uaGFzT3duUHJvcGVydHkoInRvU3RyaW5nIikmJihhLnRvU3Ry
        aW5nPW0udG9TdHJpbmcpfWVsc2UgaC5taXhpbnMmJihsKGgubWl4aW5zLHQs
        cixvLGEscyksaC5fd2l0aG91dCYmQS5jYWxsKGguX3dpdGhvdXQsdSkpfWZ1
        bmN0aW9uIGgoZSx0LHIsbil7aWYoTi50ZXN0KHQpKXt2YXIgaT1uLmJpbmRp
        bmdzO2k/bi5oYXNPd25Qcm9wZXJ0eSgiYmluZGluZ3MiKXx8KGk9bi5iaW5k
        aW5ncz14KG4uYmluZGluZ3MpKTppPW4uYmluZGluZ3M9e30saVt0XT1yfX1m
        dW5jdGlvbiBtKGUsdCl7dmFyIHIsbixpLG89dC5iaW5kaW5ncztpZihvKXtm
        b3IociBpbiBvKW49b1tyXSxuJiYoaT1yLnNsaWNlKDAsLTcpLG4gaW5zdGFu
        Y2VvZiBFbWJlci5CaW5kaW5nPyhuPW4uY29weSgpLG4udG8oaSkpOm49bmV3
        IEVtYmVyLkJpbmRpbmcoaSxuKSxuLmNvbm5lY3QoZSksZVtyXT1uKTt0LmJp
        bmRpbmdzPXt9fX1mdW5jdGlvbiBmKGUsdCl7cmV0dXJuIG0oZSx0fHxFbWJl
        ci5tZXRhKGUpKSxlfWZ1bmN0aW9uIHAoZSx0LHIsbixpKXt2YXIgbyxhPXQu
        bWV0aG9kTmFtZTtyZXR1cm4gblthXXx8aVthXT8obz1pW2FdLHQ9blthXSk6
        ci5kZXNjc1thXT8odD1yLmRlc2NzW2FdLG89dm9pZCAwKToodD12b2lkIDAs
        bz1lW2FdKSx7ZGVzYzp0LHZhbHVlOm99fWZ1bmN0aW9uIGQoZSx0LHIsbixp
        KXt2YXIgbz1yW25dO2lmKG8pZm9yKHZhciBhPTAscz1vLmxlbmd0aDtzPmE7
        YSsrKUVtYmVyW2ldKGUsb1thXSxudWxsLHQpfWZ1bmN0aW9uIGIoZSx0LHIp
        e3ZhciBuPWVbdF07ImZ1bmN0aW9uIj09dHlwZW9mIG4mJihkKGUsdCxuLCJf
        X2VtYmVyX29ic2VydmVzQmVmb3JlX18iLCJyZW1vdmVCZWZvcmVPYnNlcnZl
        ciIpLGQoZSx0LG4sIl9fZW1iZXJfb2JzZXJ2ZXNfXyIsInJlbW92ZU9ic2Vy
        dmVyIiksZChlLHQsbiwiX19lbWJlcl9saXN0ZW5zX18iLCJyZW1vdmVMaXN0
        ZW5lciIpKSwiZnVuY3Rpb24iPT10eXBlb2YgciYmKGQoZSx0LHIsIl9fZW1i
        ZXJfb2JzZXJ2ZXNCZWZvcmVfXyIsImFkZEJlZm9yZU9ic2VydmVyIiksZChl
        LHQsciwiX19lbWJlcl9vYnNlcnZlc19fIiwiYWRkT2JzZXJ2ZXIiKSxkKGUs
        dCxyLCJfX2VtYmVyX2xpc3RlbnNfXyIsImFkZExpc3RlbmVyIikpfWZ1bmN0
        aW9uIHYodCxyLG4pe3ZhciBpLG8sYSxzPXt9LHU9e30sYz1FbWJlci5tZXRh
        KHQpLG09W107bChyLGUodCkscyx1LHQsbSk7Zm9yKHZhciBkPTAsdj1tLmxl
        bmd0aDt2PmQ7ZCsrKWlmKGk9bVtkXSwiY29uc3RydWN0b3IiIT09aSYmdS5o
        YXNPd25Qcm9wZXJ0eShpKSYmKGE9c1tpXSxvPXVbaV0sYSE9PXcpKXtmb3Io
        O2EmJmEgaW5zdGFuY2VvZiBfOyl7dmFyIEU9cCh0LGEsYyxzLHUpO2E9RS5k
        ZXNjLG89RS52YWx1ZX0odm9pZCAwIT09YXx8dm9pZCAwIT09bykmJihiKHQs
        aSxvKSxoKHQsaSxvLGMpLFYodCxpLGEsbyxjKSl9cmV0dXJuIG58fGYodCxj
        KSx0fWZ1bmN0aW9uIEUoZSx0LHIpe3ZhciBuPVQoZSk7aWYocltuXSlyZXR1
        cm4hMTtpZihyW25dPSEwLGU9PT10KXJldHVybiEwO2Zvcih2YXIgaT1lLm1p
        eGlucyxvPWk/aS5sZW5ndGg6MDstLW8+PTA7KWlmKEUoaVtvXSx0LHIpKXJl
        dHVybiEwO3JldHVybiExfWZ1bmN0aW9uIGcoZSx0LHIpe2lmKCFyW1QodCld
        KWlmKHJbVCh0KV09ITAsdC5wcm9wZXJ0aWVzKXt2YXIgbj10LnByb3BlcnRp
        ZXM7Zm9yKHZhciBpIGluIG4pbi5oYXNPd25Qcm9wZXJ0eShpKSYmKGVbaV09
        ITApfWVsc2UgdC5taXhpbnMmJkEuY2FsbCh0Lm1peGlucyxmdW5jdGlvbih0
        KXtnKGUsdCxyKX0pfXZhciB5LHcsXyxDPUVtYmVyLkFycmF5UG9seWZpbGxz
        Lm1hcCxPPUVtYmVyLkFycmF5UG9seWZpbGxzLmluZGV4T2YsQT1FbWJlci5B
        cnJheVBvbHlmaWxscy5mb3JFYWNoLFA9W10uc2xpY2UseD1FbWJlci5jcmVh
        dGUsVj1FbWJlci5kZWZpbmVQcm9wZXJ0eSxUPUVtYmVyLmd1aWRGb3IsUz17
        fSxOPUVtYmVyLklTX0JJTkRJTkc9L14uK0JpbmRpbmckLztFbWJlci5taXhp
        bj1mdW5jdGlvbihlKXt2YXIgdD1QLmNhbGwoYXJndW1lbnRzLDEpO3JldHVy
        biB2KGUsdCwhMSksZX0sRW1iZXIuTWl4aW49ZnVuY3Rpb24oKXtyZXR1cm4g
        dCh0aGlzLGFyZ3VtZW50cyl9LHk9RW1iZXIuTWl4aW4seS5wcm90b3R5cGU9
        e3Byb3BlcnRpZXM6bnVsbCxtaXhpbnM6bnVsbCxvd25lckNvbnN0cnVjdG9y
        Om51bGx9LHkuX2FwcGx5PXYseS5hcHBseVBhcnRpYWw9ZnVuY3Rpb24oZSl7
        dmFyIHQ9UC5jYWxsKGFyZ3VtZW50cywxKTtyZXR1cm4gdihlLHQsITApfSx5
        LmZpbmlzaFBhcnRpYWw9ZixFbWJlci5hbnlVbnByb2Nlc3NlZE1peGlucz0h
        MSx5LmNyZWF0ZT1mdW5jdGlvbigpe0VtYmVyLmFueVVucHJvY2Vzc2VkTWl4
        aW5zPSEwO3ZhciBlPXRoaXM7cmV0dXJuIHQobmV3IGUsYXJndW1lbnRzKX07
        dmFyIEQ9eS5wcm90b3R5cGU7RC5yZW9wZW49ZnVuY3Rpb24oKXt2YXIgZSx0
        O3RoaXMucHJvcGVydGllcz8oZT15LmNyZWF0ZSgpLGUucHJvcGVydGllcz10
        aGlzLnByb3BlcnRpZXMsZGVsZXRlIHRoaXMucHJvcGVydGllcyx0aGlzLm1p
        eGlucz1bZV0pOnRoaXMubWl4aW5zfHwodGhpcy5taXhpbnM9W10pO3ZhciBy
        LG49YXJndW1lbnRzLmxlbmd0aCxpPXRoaXMubWl4aW5zO2ZvcihyPTA7bj5y
        O3IrKyllPWFyZ3VtZW50c1tyXSxlIGluc3RhbmNlb2YgeT9pLnB1c2goZSk6
        KHQ9eS5jcmVhdGUoKSx0LnByb3BlcnRpZXM9ZSxpLnB1c2godCkpO3JldHVy
        biB0aGlzfSxELmFwcGx5PWZ1bmN0aW9uKGUpe3JldHVybiB2KGUsW3RoaXNd
        LCExKX0sRC5hcHBseVBhcnRpYWw9ZnVuY3Rpb24oZSl7cmV0dXJuIHYoZSxb
        dGhpc10sITApfSxELmRldGVjdD1mdW5jdGlvbihlKXtpZighZSlyZXR1cm4h
        MTtpZihlIGluc3RhbmNlb2YgeSlyZXR1cm4gRShlLHRoaXMse30pO3ZhciB0
        PUVtYmVyLm1ldGEoZSwhMSkubWl4aW5zO3JldHVybiB0PyEhdFtUKHRoaXMp
        XTohMX0sRC53aXRob3V0PWZ1bmN0aW9uKCl7dmFyIGU9bmV3IHkodGhpcyk7
        cmV0dXJuIGUuX3dpdGhvdXQ9UC5jYWxsKGFyZ3VtZW50cyksZX0sRC5rZXlz
        PWZ1bmN0aW9uKCl7dmFyIGU9e30sdD17fSxyPVtdO2coZSx0aGlzLHQpO2Zv
        cih2YXIgbiBpbiBlKWUuaGFzT3duUHJvcGVydHkobikmJnIucHVzaChuKTty
        ZXR1cm4gcn0seS5taXhpbnM9ZnVuY3Rpb24oZSl7dmFyIHQ9RW1iZXIubWV0
        YShlLCExKS5taXhpbnMscj1bXTtpZighdClyZXR1cm4gcjtmb3IodmFyIG4g
        aW4gdCl7dmFyIGk9dFtuXTtpLnByb3BlcnRpZXN8fHIucHVzaChpKX1yZXR1
        cm4gcn0sdz1uZXcgRW1iZXIuRGVzY3JpcHRvcix3LnRvU3RyaW5nPWZ1bmN0
        aW9uKCl7cmV0dXJuIihSZXF1aXJlZCBQcm9wZXJ0eSkifSxFbWJlci5yZXF1
        aXJlZD1mdW5jdGlvbigpe3JldHVybiB3fSxfPWZ1bmN0aW9uKGUpe3RoaXMu
        bWV0aG9kTmFtZT1lfSxfLnByb3RvdHlwZT1uZXcgRW1iZXIuRGVzY3JpcHRv
        cixFbWJlci5hbGlhcz1mdW5jdGlvbihlKXtyZXR1cm4gbmV3IF8oZSl9LEVt
        YmVyLmFsaWFzTWV0aG9kPWZ1bmN0aW9uKGUpe3JldHVybiBuZXcgXyhlKX0s
        RW1iZXIub2JzZXJ2ZXI9ZnVuY3Rpb24oKXt2YXIgZT1QLmNhbGwoYXJndW1l
        bnRzLC0xKVswXSx0PVAuY2FsbChhcmd1bWVudHMsMCwtMSk7aWYoImZ1bmN0
        aW9uIiE9dHlwZW9mIGUmJihlPWFyZ3VtZW50c1swXSx0PVAuY2FsbChhcmd1
        bWVudHMsMSkpLCJmdW5jdGlvbiIhPXR5cGVvZiBlKXRocm93IG5ldyBFbWJl
        ci5FcnJvcigiRW1iZXIub2JzZXJ2ZXIgY2FsbGVkIHdpdGhvdXQgYSBmdW5j
        dGlvbiIpO3JldHVybiBlLl9fZW1iZXJfb2JzZXJ2ZXNfXz10LGV9LEVtYmVy
        LmltbWVkaWF0ZU9ic2VydmVyPWZ1bmN0aW9uKCl7Zm9yKHZhciBlPTAsdD1h
        cmd1bWVudHMubGVuZ3RoO3Q+ZTtlKyspYXJndW1lbnRzW2VdO3JldHVybiBF
        bWJlci5vYnNlcnZlci5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LEVtYmVyLmJl
        Zm9yZU9ic2VydmVyPWZ1bmN0aW9uKCl7dmFyIGU9UC5jYWxsKGFyZ3VtZW50
        cywtMSlbMF0sdD1QLmNhbGwoYXJndW1lbnRzLDAsLTEpO2lmKCJmdW5jdGlv
        biIhPXR5cGVvZiBlJiYoZT1hcmd1bWVudHNbMF0sdD1QLmNhbGwoYXJndW1l
        bnRzLDEpKSwiZnVuY3Rpb24iIT10eXBlb2YgZSl0aHJvdyBuZXcgRW1iZXIu
        RXJyb3IoIkVtYmVyLmJlZm9yZU9ic2VydmVyIGNhbGxlZCB3aXRob3V0IGEg
        ZnVuY3Rpb24iKTtyZXR1cm4gZS5fX2VtYmVyX29ic2VydmVzQmVmb3JlX189
        dCxlfX0oKSxmdW5jdGlvbigpe3ZhciBlPUVtYmVyLkVudW1lcmFibGVVdGls
        cy5mb3JFYWNoLHQ9RW1iZXIuRW51bWVyYWJsZVV0aWxzLmluZGV4T2Y7RW1i
        ZXIubGlicmFyaWVzPWZ1bmN0aW9uKCl7dmFyIHI9W10sbj0wLGk9ZnVuY3Rp
        b24oZSl7Zm9yKHZhciB0PTA7dDxyLmxlbmd0aDt0KyspaWYoclt0XS5uYW1l
        PT09ZSlyZXR1cm4gclt0XX07cmV0dXJuIHIucmVnaXN0ZXI9ZnVuY3Rpb24o
        ZSx0KXtpKGUpfHxyLnB1c2goe25hbWU6ZSx2ZXJzaW9uOnR9KX0sci5yZWdp
        c3RlckNvcmVMaWJyYXJ5PWZ1bmN0aW9uKGUsdCl7aShlKXx8ci5zcGxpY2Uo
        bisrLDAse25hbWU6ZSx2ZXJzaW9uOnR9KX0sci5kZVJlZ2lzdGVyPWZ1bmN0
        aW9uKGUpe3ZhciBuPWkoZSk7biYmci5zcGxpY2UodChyLG4pLDEpfSxyLmVh
        Y2g9ZnVuY3Rpb24odCl7ZShyLGZ1bmN0aW9uKGUpe3QoZS5uYW1lLGUudmVy
        c2lvbil9KX0scn0oKSxFbWJlci5saWJyYXJpZXMucmVnaXN0ZXJDb3JlTGli
        cmFyeSgiRW1iZXIiLEVtYmVyLlZFUlNJT04pfSgpLGZ1bmN0aW9uKCl7ZSgi
        cnN2cC9hbGwiLFsicnN2cC9wcm9taXNlIiwiZXhwb3J0cyJdLGZ1bmN0aW9u
        KGUsdCl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIHIoZSl7aWYoIltvYmplY3Qg
        QXJyYXldIiE9PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChlKSl0
        aHJvdyBuZXcgVHlwZUVycm9yKCJZb3UgbXVzdCBwYXNzIGFuIGFycmF5IHRv
        IGFsbC4iKTtyZXR1cm4gbmV3IG4oZnVuY3Rpb24odCxyKXtmdW5jdGlvbiBu
        KGUpe3JldHVybiBmdW5jdGlvbih0KXtpKGUsdCl9fWZ1bmN0aW9uIGkoZSxy
        KXthW2VdPXIsMD09PS0tcyYmdChhKX12YXIgbyxhPVtdLHM9ZS5sZW5ndGg7
        MD09PXMmJnQoW10pO2Zvcih2YXIgdT0wO3U8ZS5sZW5ndGg7dSsrKW89ZVt1
        XSxvJiYiZnVuY3Rpb24iPT10eXBlb2Ygby50aGVuP28udGhlbihuKHUpLHIp
        OmkodSxvKX0pfXZhciBuPWUuUHJvbWlzZTt0LmFsbD1yfSksZSgicnN2cC9h
        c3luYyIsWyJleHBvcnRzIl0sZnVuY3Rpb24oZSl7InVzZSBzdHJpY3QiO2Z1
        bmN0aW9uIHQoKXtyZXR1cm4gZnVuY3Rpb24oZSx0KXtwcm9jZXNzLm5leHRU
        aWNrKGZ1bmN0aW9uKCl7ZSh0KX0pfX1mdW5jdGlvbiByKCl7cmV0dXJuIGZ1
        bmN0aW9uKGUsdCl7c2V0SW1tZWRpYXRlKGZ1bmN0aW9uKCl7ZSh0KX0pfX1m
        dW5jdGlvbiBuKCl7dmFyIGU9W10sdD1uZXcgcyhmdW5jdGlvbigpe3ZhciB0
        PWUuc2xpY2UoKTtlPVtdLHQuZm9yRWFjaChmdW5jdGlvbihlKXt2YXIgdD1l
        WzBdLHI9ZVsxXTt0KHIpfSl9KSxyPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQo
        ImRpdiIpO3JldHVybiB0Lm9ic2VydmUocix7YXR0cmlidXRlczohMH0pLHdp
        bmRvdy5hZGRFdmVudExpc3RlbmVyKCJ1bmxvYWQiLGZ1bmN0aW9uKCl7dC5k
        aXNjb25uZWN0KCksdD1udWxsfSwhMSksZnVuY3Rpb24odCxuKXtlLnB1c2go
        W3Qsbl0pLHIuc2V0QXR0cmlidXRlKCJkcmFpblF1ZXVlIiwiZHJhaW5RdWV1
        ZSIpfX1mdW5jdGlvbiBpKCl7cmV0dXJuIGZ1bmN0aW9uKGUsdCl7dS5zZXRU
        aW1lb3V0KGZ1bmN0aW9uKCl7ZSh0KX0sMSl9fXZhciBvLGE9InVuZGVmaW5l
        ZCIhPXR5cGVvZiB3aW5kb3c/d2luZG93Ont9LHM9YS5NdXRhdGlvbk9ic2Vy
        dmVyfHxhLldlYktpdE11dGF0aW9uT2JzZXJ2ZXIsdT0idW5kZWZpbmVkIiE9
        dHlwZW9mIGdsb2JhbD9nbG9iYWw6dGhpcztvPSJmdW5jdGlvbiI9PXR5cGVv
        ZiBzZXRJbW1lZGlhdGU/cigpOiJ1bmRlZmluZWQiIT10eXBlb2YgcHJvY2Vz
        cyYmIltvYmplY3QgcHJvY2Vzc10iPT09e30udG9TdHJpbmcuY2FsbChwcm9j
        ZXNzKT90KCk6cz9uKCk6aSgpLGUuYXN5bmM9b30pLGUoInJzdnAvY29uZmln
        IixbInJzdnAvYXN5bmMiLCJleHBvcnRzIl0sZnVuY3Rpb24oZSx0KXsidXNl
        IHN0cmljdCI7dmFyIHI9ZS5hc3luYyxuPXt9O24uYXN5bmM9cix0LmNvbmZp
        Zz1ufSksZSgicnN2cC9kZWZlciIsWyJyc3ZwL3Byb21pc2UiLCJleHBvcnRz
        Il0sZnVuY3Rpb24oZSx0KXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gcigpe3Zh
        ciBlPXtyZXNvbHZlOnZvaWQgMCxyZWplY3Q6dm9pZCAwLHByb21pc2U6dm9p
        ZCAwfTtyZXR1cm4gZS5wcm9taXNlPW5ldyBuKGZ1bmN0aW9uKHQscil7ZS5y
        ZXNvbHZlPXQsZS5yZWplY3Q9cn0pLGV9dmFyIG49ZS5Qcm9taXNlO3QuZGVm
        ZXI9cn0pLGUoInJzdnAvZXZlbnRzIixbImV4cG9ydHMiXSxmdW5jdGlvbihl
        KXsidXNlIHN0cmljdCI7dmFyIHQ9ZnVuY3Rpb24oZSx0KXt0aGlzLnR5cGU9
        ZTtmb3IodmFyIHIgaW4gdCl0Lmhhc093blByb3BlcnR5KHIpJiYodGhpc1ty
        XT10W3JdKX0scj1mdW5jdGlvbihlLHQpe2Zvcih2YXIgcj0wLG49ZS5sZW5n
        dGg7bj5yO3IrKylpZihlW3JdWzBdPT09dClyZXR1cm4gcjtyZXR1cm4tMX0s
        bj1mdW5jdGlvbihlKXt2YXIgdD1lLl9wcm9taXNlQ2FsbGJhY2tzO3JldHVy
        biB0fHwodD1lLl9wcm9taXNlQ2FsbGJhY2tzPXt9KSx0fSxpPXttaXhpbjpm
        dW5jdGlvbihlKXtyZXR1cm4gZS5vbj10aGlzLm9uLGUub2ZmPXRoaXMub2Zm
        LGUudHJpZ2dlcj10aGlzLnRyaWdnZXIsZX0sb246ZnVuY3Rpb24oZSx0LGkp
        e3ZhciBvLGEscz1uKHRoaXMpO2ZvcihlPWUuc3BsaXQoL1xzKy8pLGk9aXx8
        dGhpczthPWUuc2hpZnQoKTspbz1zW2FdLG98fChvPXNbYV09W10pLC0xPT09
        cihvLHQpJiZvLnB1c2goW3QsaV0pfSxvZmY6ZnVuY3Rpb24oZSx0KXt2YXIg
        aSxvLGEscz1uKHRoaXMpO2ZvcihlPWUuc3BsaXQoL1xzKy8pO289ZS5zaGlm
        dCgpOyl0PyhpPXNbb10sYT1yKGksdCksLTEhPT1hJiZpLnNwbGljZShhLDEp
        KTpzW29dPVtdfSx0cmlnZ2VyOmZ1bmN0aW9uKGUscil7dmFyIGksbyxhLHMs
        dSxjPW4odGhpcyk7aWYoaT1jW2VdKWZvcih2YXIgbD0wO2w8aS5sZW5ndGg7
        bCsrKW89aVtsXSxhPW9bMF0scz1vWzFdLCJvYmplY3QiIT10eXBlb2YgciYm
        KHI9e2RldGFpbDpyfSksdT1uZXcgdChlLHIpLGEuY2FsbChzLHUpfX07ZS5F
        dmVudFRhcmdldD1pfSksZSgicnN2cC9oYXNoIixbInJzdnAvZGVmZXIiLCJl
        eHBvcnRzIl0sZnVuY3Rpb24oZSx0KXsidXNlIHN0cmljdCI7ZnVuY3Rpb24g
        cihlKXt2YXIgdD0wO2Zvcih2YXIgciBpbiBlKXQrKztyZXR1cm4gdH1mdW5j
        dGlvbiBuKGUpe3ZhciB0PXt9LG49aSgpLG89cihlKTswPT09byYmbi5yZXNv
        bHZlKHt9KTt2YXIgYT1mdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24odCl7
        cyhlLHQpfX0scz1mdW5jdGlvbihlLHIpe3RbZV09ciwwPT09LS1vJiZuLnJl
        c29sdmUodCl9LHU9ZnVuY3Rpb24oZSl7bi5yZWplY3QoZSl9O2Zvcih2YXIg
        YyBpbiBlKWVbY10mJiJmdW5jdGlvbiI9PXR5cGVvZiBlW2NdLnRoZW4/ZVtj
        XS50aGVuKGEoYyksdSk6cyhjLGVbY10pO3JldHVybiBuLnByb21pc2V9dmFy
        IGk9ZS5kZWZlcjt0Lmhhc2g9bn0pLGUoInJzdnAvbm9kZSIsWyJyc3ZwL3By
        b21pc2UiLCJyc3ZwL2FsbCIsImV4cG9ydHMiXSxmdW5jdGlvbihlLHQscil7
        InVzZSBzdHJpY3QiO2Z1bmN0aW9uIG4oZSx0KXtyZXR1cm4gZnVuY3Rpb24o
        cixuKXtyP3Qocik6YXJndW1lbnRzLmxlbmd0aD4yP2UoQXJyYXkucHJvdG90
        eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpKTplKG4pfX1mdW5jdGlvbiBp
        KGUpe3JldHVybiBmdW5jdGlvbigpe3ZhciB0LHIsaT1BcnJheS5wcm90b3R5
        cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpLHM9dGhpcyx1PW5ldyBvKGZ1bmN0
        aW9uKGUsbil7dD1lLHI9bn0pO3JldHVybiBhKGkpLnRoZW4oZnVuY3Rpb24o
        aSl7aS5wdXNoKG4odCxyKSk7dHJ5e2UuYXBwbHkocyxpKX1jYXRjaChvKXty
        KG8pfX0pLHV9fXZhciBvPWUuUHJvbWlzZSxhPXQuYWxsO3IuZGVub2RlaWZ5
        PWl9KSxlKCJyc3ZwL3Byb21pc2UiLFsicnN2cC9jb25maWciLCJyc3ZwL2V2
        ZW50cyIsImV4cG9ydHMiXSxmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3Qi
        O2Z1bmN0aW9uIG4oZSl7cmV0dXJuIGkoZSl8fCJvYmplY3QiPT10eXBlb2Yg
        ZSYmbnVsbCE9PWV9ZnVuY3Rpb24gaShlKXtyZXR1cm4iZnVuY3Rpb24iPT10
        eXBlb2YgZX1mdW5jdGlvbiBvKGUpe2wub25lcnJvciYmbC5vbmVycm9yKGUu
        ZGV0YWlsKX1mdW5jdGlvbiBhKGUsdCl7ZT09PXQ/dShlLHQpOnMoZSx0KXx8
        dShlLHQpfWZ1bmN0aW9uIHMoZSx0KXt2YXIgcixvPW51bGw7dHJ5e2lmKGU9
        PT10KXRocm93IG5ldyBUeXBlRXJyb3IoIkEgcHJvbWlzZXMgY2FsbGJhY2sg
        Y2Fubm90IHJldHVybiB0aGF0IHNhbWUgcHJvbWlzZS4iKTtpZihuKHQpJiYo
        bz10LnRoZW4saShvKSkpcmV0dXJuIG8uY2FsbCh0LGZ1bmN0aW9uKG4pe3Jl
        dHVybiByPyEwOihyPSEwLHQhPT1uP2EoZSxuKTp1KGUsbiksdm9pZCAwKX0s
        ZnVuY3Rpb24odCl7cmV0dXJuIHI/ITA6KHI9ITAsYyhlLHQpLHZvaWQgMCl9
        KSwhMH1jYXRjaChzKXtyZXR1cm4gYyhlLHMpLCEwfXJldHVybiExfWZ1bmN0
        aW9uIHUoZSx0KXtsLmFzeW5jKGZ1bmN0aW9uKCl7ZS50cmlnZ2VyKCJwcm9t
        aXNlOnJlc29sdmVkIix7ZGV0YWlsOnR9KSxlLmlzRnVsZmlsbGVkPSEwLGUu
        ZnVsZmlsbG1lbnRWYWx1ZT10fSl9ZnVuY3Rpb24gYyhlLHQpe2wuYXN5bmMo
        ZnVuY3Rpb24oKXtlLnRyaWdnZXIoInByb21pc2U6ZmFpbGVkIix7ZGV0YWls
        OnR9KSxlLmlzUmVqZWN0ZWQ9ITAsZS5yZWplY3RlZFJlYXNvbj10fSl9dmFy
        IGw9ZS5jb25maWcsaD10LkV2ZW50VGFyZ2V0LG09ZnVuY3Rpb24oZSl7dmFy
        IHQ9dGhpcyxyPSExO2lmKCJmdW5jdGlvbiIhPXR5cGVvZiBlKXRocm93IG5l
        dyBUeXBlRXJyb3IoIllvdSBtdXN0IHBhc3MgYSByZXNvbHZlciBmdW5jdGlv
        biBhcyB0aGUgc29sZSBhcmd1bWVudCB0byB0aGUgcHJvbWlzZSBjb25zdHJ1
        Y3RvciIpO2lmKCEodCBpbnN0YW5jZW9mIG0pKXJldHVybiBuZXcgbShlKTt2
        YXIgbj1mdW5jdGlvbihlKXtyfHwocj0hMCxhKHQsZSkpfSxpPWZ1bmN0aW9u
        KGUpe3J8fChyPSEwLGModCxlKSl9O3RoaXMub24oInByb21pc2U6cmVzb2x2
        ZWQiLGZ1bmN0aW9uKGUpe3RoaXMudHJpZ2dlcigic3VjY2VzcyIse2RldGFp
        bDplLmRldGFpbH0pfSx0aGlzKSx0aGlzLm9uKCJwcm9taXNlOmZhaWxlZCIs
        ZnVuY3Rpb24oZSl7dGhpcy50cmlnZ2VyKCJlcnJvciIse2RldGFpbDplLmRl
        dGFpbH0pfSx0aGlzKSx0aGlzLm9uKCJlcnJvciIsbyk7dHJ5e2UobixpKX1j
        YXRjaChzKXtpKHMpfX0sZj1mdW5jdGlvbihlLHQscixuKXt2YXIgbyx1LGws
        aCxtPWkocik7aWYobSl0cnl7bz1yKG4uZGV0YWlsKSxsPSEwfWNhdGNoKGYp
        e2g9ITAsdT1mfWVsc2Ugbz1uLmRldGFpbCxsPSEwO3ModCxvKXx8KG0mJmw/
        YSh0LG8pOmg/Yyh0LHUpOiJyZXNvbHZlIj09PWU/YSh0LG8pOiJyZWplY3Qi
        PT09ZSYmYyh0LG8pKX07bS5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOm0saXNS
        ZWplY3RlZDp2b2lkIDAsaXNGdWxmaWxsZWQ6dm9pZCAwLHJlamVjdGVkUmVh
        c29uOnZvaWQgMCxmdWxmaWxsbWVudFZhbHVlOnZvaWQgMCx0aGVuOmZ1bmN0
        aW9uKGUsdCl7dGhpcy5vZmYoImVycm9yIixvKTt2YXIgcj1uZXcgdGhpcy5j
        b25zdHJ1Y3RvcihmdW5jdGlvbigpe30pO3JldHVybiB0aGlzLmlzRnVsZmls
        bGVkJiZsLmFzeW5jKGZ1bmN0aW9uKHQpe2YoInJlc29sdmUiLHIsZSx7ZGV0
        YWlsOnQuZnVsZmlsbG1lbnRWYWx1ZX0pfSx0aGlzKSx0aGlzLmlzUmVqZWN0
        ZWQmJmwuYXN5bmMoZnVuY3Rpb24oZSl7ZigicmVqZWN0IixyLHQse2RldGFp
        bDplLnJlamVjdGVkUmVhc29ufSl9LHRoaXMpLHRoaXMub24oInByb21pc2U6
        cmVzb2x2ZWQiLGZ1bmN0aW9uKHQpe2YoInJlc29sdmUiLHIsZSx0KX0pLHRo
        aXMub24oInByb21pc2U6ZmFpbGVkIixmdW5jdGlvbihlKXtmKCJyZWplY3Qi
        LHIsdCxlKX0pLHJ9LGZhaWw6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMudGhl
        bihudWxsLGUpfX0saC5taXhpbihtLnByb3RvdHlwZSksci5Qcm9taXNlPW19
        KSxlKCJyc3ZwL3JlamVjdCIsWyJyc3ZwL3Byb21pc2UiLCJleHBvcnRzIl0s
        ZnVuY3Rpb24oZSx0KXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gcihlKXtyZXR1
        cm4gbmV3IG4oZnVuY3Rpb24odCxyKXtyKGUpfSl9dmFyIG49ZS5Qcm9taXNl
        O3QucmVqZWN0PXJ9KSxlKCJyc3ZwL3Jlc29sdmUiLFsicnN2cC9wcm9taXNl
        IiwiZXhwb3J0cyJdLGZ1bmN0aW9uKGUsdCl7InVzZSBzdHJpY3QiO2Z1bmN0
        aW9uIHIoZSl7cmV0dXJuIG5ldyBuKGZ1bmN0aW9uKHQpe3QoZSl9KX12YXIg
        bj1lLlByb21pc2U7dC5yZXNvbHZlPXJ9KSxlKCJyc3ZwL3JldGhyb3ciLFsi
        ZXhwb3J0cyJdLGZ1bmN0aW9uKGUpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiB0
        KGUpe3Rocm93IHIuc2V0VGltZW91dChmdW5jdGlvbigpe3Rocm93IGV9KSxl
        fXZhciByPSJ1bmRlZmluZWQiPT10eXBlb2YgZ2xvYmFsP3RoaXM6Z2xvYmFs
        O2UucmV0aHJvdz10fSksZSgicnN2cCIsWyJyc3ZwL2V2ZW50cyIsInJzdnAv
        cHJvbWlzZSIsInJzdnAvbm9kZSIsInJzdnAvYWxsIiwicnN2cC9oYXNoIiwi
        cnN2cC9yZXRocm93IiwicnN2cC9kZWZlciIsInJzdnAvY29uZmlnIiwicnN2
        cC9yZXNvbHZlIiwicnN2cC9yZWplY3QiLCJleHBvcnRzIl0sZnVuY3Rpb24o
        ZSx0LHIsbixpLG8sYSxzLHUsYyxsKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24g
        aChlLHQpe2dbZV09dH12YXIgbT1lLkV2ZW50VGFyZ2V0LGY9dC5Qcm9taXNl
        LHA9ci5kZW5vZGVpZnksZD1uLmFsbCxiPWkuaGFzaCx2PW8ucmV0aHJvdyxF
        PWEuZGVmZXIsZz1zLmNvbmZpZyx5PXUucmVzb2x2ZSx3PWMucmVqZWN0O2wu
        UHJvbWlzZT1mLGwuRXZlbnRUYXJnZXQ9bSxsLmFsbD1kLGwuaGFzaD1iLGwu
        cmV0aHJvdz12LGwuZGVmZXI9RSxsLmRlbm9kZWlmeT1wLGwuY29uZmlndXJl
        PWgsbC5yZXNvbHZlPXksbC5yZWplY3Q9d30pfSgpLGZ1bmN0aW9uKCl7RW1i
        ZXIuTU9ERUxfRkFDVE9SWV9JTkpFQ1RJT05TPSExfHwhIUVtYmVyLkVOVi5N
        T0RFTF9GQUNUT1JZX0lOSkVDVElPTlMsZSgiY29udGFpbmVyIixbXSxmdW5j
        dGlvbigpe2Z1bmN0aW9uIGUoZSl7dGhpcy5wYXJlbnQ9ZSx0aGlzLmRpY3Q9
        e319ZnVuY3Rpb24gdCh0KXt0aGlzLnBhcmVudD10LHRoaXMuY2hpbGRyZW49
        W10sdGhpcy5yZXNvbHZlcj10JiZ0LnJlc29sdmVyfHxmdW5jdGlvbigpe30s
        dGhpcy5yZWdpc3RyeT1uZXcgZSh0JiZ0LnJlZ2lzdHJ5KSx0aGlzLmNhY2hl
        PW5ldyBlKHQmJnQuY2FjaGUpLHRoaXMuZmFjdG9yeUNhY2hlPW5ldyBlKHQm
        JnQuY2FjaGUpLHRoaXMudHlwZUluamVjdGlvbnM9bmV3IGUodCYmdC50eXBl
        SW5qZWN0aW9ucyksdGhpcy5pbmplY3Rpb25zPXt9LHRoaXMuZmFjdG9yeVR5
        cGVJbmplY3Rpb25zPW5ldyBlKHQmJnQuZmFjdG9yeVR5cGVJbmplY3Rpb25z
        KSx0aGlzLmZhY3RvcnlJbmplY3Rpb25zPXt9LHRoaXMuX29wdGlvbnM9bmV3
        IGUodCYmdC5fb3B0aW9ucyksdGhpcy5fdHlwZU9wdGlvbnM9bmV3IGUodCYm
        dC5fdHlwZU9wdGlvbnMpfWZ1bmN0aW9uIHIoZSl7dGhyb3cgbmV3IEVycm9y
        KGUrIiBpcyBub3QgY3VycmVudGx5IHN1cHBvcnRlZCBvbiBjaGlsZCBjb250
        YWluZXJzIil9ZnVuY3Rpb24gbihlLHQpe3ZhciByPW8oZSx0LCJzaW5nbGV0
        b24iKTtyZXR1cm4gciE9PSExfWZ1bmN0aW9uIGkoZSx0KXt2YXIgcj17fTtp
        ZighdClyZXR1cm4gcjtmb3IodmFyIG4saSxvPTAsYT10Lmxlbmd0aDthPm87
        bysrKXtpZihuPXRbb10saT1lLmxvb2t1cChuLmZ1bGxOYW1lKSx2b2lkIDA9
        PT1pKXRocm93IG5ldyBFcnJvcigiQXR0ZW1wdGluZyB0byBpbmplY3QgYW4g
        dW5rbm93biBpbmplY3Rpb246IGAiK24uZnVsbE5hbWUrImAiKTtyW24ucHJv
        cGVydHldPWl9cmV0dXJuIHJ9ZnVuY3Rpb24gbyhlLHQscil7dmFyIG49ZS5f
        b3B0aW9ucy5nZXQodCk7aWYobiYmdm9pZCAwIT09bltyXSlyZXR1cm4gblty
        XTt2YXIgaT10LnNwbGl0KCI6IilbMF07cmV0dXJuIG49ZS5fdHlwZU9wdGlv
        bnMuZ2V0KGkpLG4/bltyXTp2b2lkIDB9ZnVuY3Rpb24gYShlLHQpe3ZhciBy
        LG49ZS5ub3JtYWxpemUodCksaT1lLnJlc29sdmUobiksbz1lLmZhY3RvcnlD
        YWNoZSxhPXQuc3BsaXQoIjoiKVswXTtpZih2b2lkIDAhPT1pKXtpZihvLmhh
        cyh0KSlyZXR1cm4gby5nZXQodCk7aWYoIWl8fCJmdW5jdGlvbiIhPXR5cGVv
        ZiBpLmV4dGVuZHx8IUVtYmVyLk1PREVMX0ZBQ1RPUllfSU5KRUNUSU9OUyYm
        Im1vZGVsIj09PWEpcmV0dXJuIGk7dmFyIGM9cyhlLHQpLGw9dShlLHQpO3Jl
        dHVybiBsLl90b1N0cmluZz1lLm1ha2VUb1N0cmluZyhpLHQpLHI9aS5leHRl
        bmQoYyksci5yZW9wZW5DbGFzcyhsKSxvLnNldCh0LHIpLHJ9fWZ1bmN0aW9u
        IHMoZSx0KXt2YXIgcj10LnNwbGl0KCI6Iiksbj1yWzBdLG89W107cmV0dXJu
        IG89by5jb25jYXQoZS50eXBlSW5qZWN0aW9ucy5nZXQobil8fFtdKSxvPW8u
        Y29uY2F0KGUuaW5qZWN0aW9uc1t0XXx8W10pLG89aShlLG8pLG8uX2RlYnVn
        Q29udGFpbmVyS2V5PXQsby5jb250YWluZXI9ZSxvfWZ1bmN0aW9uIHUoZSx0
        KXt2YXIgcj10LnNwbGl0KCI6Iiksbj1yWzBdLG89W107cmV0dXJuIG89by5j
        b25jYXQoZS5mYWN0b3J5VHlwZUluamVjdGlvbnMuZ2V0KG4pfHxbXSksbz1v
        LmNvbmNhdChlLmZhY3RvcnlJbmplY3Rpb25zW3RdfHxbXSksbz1pKGUsbyks
        by5fZGVidWdDb250YWluZXJLZXk9dCxvfWZ1bmN0aW9uIGMoZSx0KXt2YXIg
        cj1hKGUsdCk7cmV0dXJuIG8oZSx0LCJpbnN0YW50aWF0ZSIpPT09ITE/cjpy
        PyJmdW5jdGlvbiI9PXR5cGVvZiByLmV4dGVuZD9yLmNyZWF0ZSgpOnIuY3Jl
        YXRlKHMoZSx0KSk6dm9pZCAwfWZ1bmN0aW9uIGwoZSx0KXtlLmNhY2hlLmVh
        Y2hMb2NhbChmdW5jdGlvbihyLG4pe28oZSxyLCJpbnN0YW50aWF0ZSIpIT09
        ITEmJnQobil9KX1mdW5jdGlvbiBoKGUpe2UuY2FjaGUuZWFjaExvY2FsKGZ1
        bmN0aW9uKHQscil7byhlLHQsImluc3RhbnRpYXRlIikhPT0hMSYmci5kZXN0
        cm95KCl9KSxlLmNhY2hlLmRpY3Q9e319ZnVuY3Rpb24gbShlLHQscixuKXt2
        YXIgaT1lLmdldCh0KTtpfHwoaT1bXSxlLnNldCh0LGkpKSxpLnB1c2goe3By
        b3BlcnR5OnIsZnVsbE5hbWU6bn0pfWZ1bmN0aW9uIGYoZSx0LHIsbil7dmFy
        IGk9ZVt0XT1lW3RdfHxbXTtpLnB1c2goe3Byb3BlcnR5OnIsZnVsbE5hbWU6
        bn0pfXJldHVybiBlLnByb3RvdHlwZT17cGFyZW50Om51bGwsZGljdDpudWxs
        LGdldDpmdW5jdGlvbihlKXt2YXIgdD10aGlzLmRpY3Q7cmV0dXJuIHQuaGFz
        T3duUHJvcGVydHkoZSk/dFtlXTp0aGlzLnBhcmVudD90aGlzLnBhcmVudC5n
        ZXQoZSk6dm9pZCAwfSxzZXQ6ZnVuY3Rpb24oZSx0KXt0aGlzLmRpY3RbZV09
        dH0scmVtb3ZlOmZ1bmN0aW9uKGUpe2RlbGV0ZSB0aGlzLmRpY3RbZV19LGhh
        czpmdW5jdGlvbihlKXt2YXIgdD10aGlzLmRpY3Q7cmV0dXJuIHQuaGFzT3du
        UHJvcGVydHkoZSk/ITA6dGhpcy5wYXJlbnQ/dGhpcy5wYXJlbnQuaGFzKGUp
        OiExfSxlYWNoTG9jYWw6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLmRpY3Q7
        Zm9yKHZhciBuIGluIHIpci5oYXNPd25Qcm9wZXJ0eShuKSYmZS5jYWxsKHQs
        bixyW25dKX19LHQucHJvdG90eXBlPXtwYXJlbnQ6bnVsbCxjaGlsZHJlbjpu
        dWxsLHJlc29sdmVyOm51bGwscmVnaXN0cnk6bnVsbCxjYWNoZTpudWxsLHR5
        cGVJbmplY3Rpb25zOm51bGwsaW5qZWN0aW9uczpudWxsLF9vcHRpb25zOm51
        bGwsX3R5cGVPcHRpb25zOm51bGwsY2hpbGQ6ZnVuY3Rpb24oKXt2YXIgZT1u
        ZXcgdCh0aGlzKTtyZXR1cm4gdGhpcy5jaGlsZHJlbi5wdXNoKGUpLGV9LHNl
        dDpmdW5jdGlvbihlLHQscil7ZVt0XT1yfSxyZWdpc3RlcjpmdW5jdGlvbihl
        LHQscil7aWYoLTE9PT1lLmluZGV4T2YoIjoiKSl0aHJvdyBuZXcgVHlwZUVy
        cm9yKCJtYWxmb3JtZWQgZnVsbE5hbWUsIGV4cGVjdGVkOiBgdHlwZTpuYW1l
        YCBnb3Q6ICIrZSk7aWYodm9pZCAwPT09dCl0aHJvdyBuZXcgVHlwZUVycm9y
        KCJBdHRlbXB0aW5nIHRvIHJlZ2lzdGVyIGFuIHVua25vd24gZmFjdG9yeTog
        YCIrZSsiYCIpO3ZhciBuPXRoaXMubm9ybWFsaXplKGUpO2lmKHRoaXMuY2Fj
        aGUuaGFzKG4pKXRocm93IG5ldyBFcnJvcigiQ2Fubm90IHJlLXJlZ2lzdGVy
        OiBgIitlKyJgLCBhcyBpdCBoYXMgYWxyZWFkeSBiZWVuIGxvb2tlZCB1cC4i
        KTt0aGlzLnJlZ2lzdHJ5LnNldChuLHQpLHRoaXMuX29wdGlvbnMuc2V0KG4s
        cnx8e30pfSx1bnJlZ2lzdGVyOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMubm9y
        bWFsaXplKGUpO3RoaXMucmVnaXN0cnkucmVtb3ZlKHQpLHRoaXMuY2FjaGUu
        cmVtb3ZlKHQpLHRoaXMuZmFjdG9yeUNhY2hlLnJlbW92ZSh0KSx0aGlzLl9v
        cHRpb25zLnJlbW92ZSh0KX0scmVzb2x2ZTpmdW5jdGlvbihlKXtyZXR1cm4g
        dGhpcy5yZXNvbHZlcihlKXx8dGhpcy5yZWdpc3RyeS5nZXQoZSl9LGRlc2Ny
        aWJlOmZ1bmN0aW9uKGUpe3JldHVybiBlfSxub3JtYWxpemU6ZnVuY3Rpb24o
        ZSl7cmV0dXJuIGV9LG1ha2VUb1N0cmluZzpmdW5jdGlvbihlKXtyZXR1cm4g
        ZS50b1N0cmluZygpfSxsb29rdXA6ZnVuY3Rpb24oZSx0KXtpZihlPXRoaXMu
        bm9ybWFsaXplKGUpLHQ9dHx8e30sdGhpcy5jYWNoZS5oYXMoZSkmJnQuc2lu
        Z2xldG9uIT09ITEpcmV0dXJuIHRoaXMuY2FjaGUuZ2V0KGUpO3ZhciByPWMo
        dGhpcyxlKTtyZXR1cm4gdm9pZCAwIT09cj8obih0aGlzLGUpJiZ0LnNpbmds
        ZXRvbiE9PSExJiZ0aGlzLmNhY2hlLnNldChlLHIpLHIpOnZvaWQgMH0sbG9v
        a3VwRmFjdG9yeTpmdW5jdGlvbihlKXtyZXR1cm4gYSh0aGlzLGUpfSxoYXM6
        ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuY2FjaGUuaGFzKGUpPyEwOiEhYSh0
        aGlzLGUpfSxvcHRpb25zRm9yVHlwZTpmdW5jdGlvbihlLHQpe3RoaXMucGFy
        ZW50JiZyKCJvcHRpb25zRm9yVHlwZSIpLHRoaXMuX3R5cGVPcHRpb25zLnNl
        dChlLHQpfSxvcHRpb25zOmZ1bmN0aW9uKGUsdCl7dGhpcy5vcHRpb25zRm9y
        VHlwZShlLHQpfSx0eXBlSW5qZWN0aW9uOmZ1bmN0aW9uKGUsdCxuKXt0aGlz
        LnBhcmVudCYmcigidHlwZUluamVjdGlvbiIpLG0odGhpcy50eXBlSW5qZWN0
        aW9ucyxlLHQsbil9LGluamVjdGlvbjpmdW5jdGlvbihlLHQsbil7cmV0dXJu
        IHRoaXMucGFyZW50JiZyKCJpbmplY3Rpb24iKSwtMT09PWUuaW5kZXhPZigi
        OiIpP3RoaXMudHlwZUluamVjdGlvbihlLHQsbik6KGYodGhpcy5pbmplY3Rp
        b25zLGUsdCxuKSx2b2lkIDApfSxmYWN0b3J5VHlwZUluamVjdGlvbjpmdW5j
        dGlvbihlLHQsbil7dGhpcy5wYXJlbnQmJnIoImZhY3RvcnlUeXBlSW5qZWN0
        aW9uIiksbSh0aGlzLmZhY3RvcnlUeXBlSW5qZWN0aW9ucyxlLHQsbil9LGZh
        Y3RvcnlJbmplY3Rpb246ZnVuY3Rpb24oZSx0LG4pe3JldHVybiB0aGlzLnBh
        cmVudCYmcigiaW5qZWN0aW9uIiksLTE9PT1lLmluZGV4T2YoIjoiKT90aGlz
        LmZhY3RvcnlUeXBlSW5qZWN0aW9uKGUsdCxuKTooZih0aGlzLmZhY3RvcnlJ
        bmplY3Rpb25zLGUsdCxuKSx2b2lkIDApfSxkZXN0cm95OmZ1bmN0aW9uKCl7
        dGhpcy5pc0Rlc3Ryb3llZD0hMDtmb3IodmFyIGU9MCx0PXRoaXMuY2hpbGRy
        ZW4ubGVuZ3RoO3Q+ZTtlKyspdGhpcy5jaGlsZHJlbltlXS5kZXN0cm95KCk7
        dGhpcy5jaGlsZHJlbj1bXSxsKHRoaXMsZnVuY3Rpb24oZSl7ZS5kZXN0cm95
        KCl9KSx0aGlzLnBhcmVudD12b2lkIDAsdGhpcy5pc0Rlc3Ryb3llZD0hMH0s
        cmVzZXQ6ZnVuY3Rpb24oKXtmb3IodmFyIGU9MCx0PXRoaXMuY2hpbGRyZW4u
        bGVuZ3RoO3Q+ZTtlKyspaCh0aGlzLmNoaWxkcmVuW2VdKTtoKHRoaXMpfX0s
        dH0pfSgpLGZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShyLG4saSxvKXt2YXIgYSxz
        LHU7aWYoIm9iamVjdCIhPXR5cGVvZiByfHxudWxsPT09cilyZXR1cm4gcjtp
        ZihuJiYocz10KGkscikpPj0wKXJldHVybiBvW3NdO2lmKCJhcnJheSI9PT1F
        bWJlci50eXBlT2Yocikpe2lmKGE9ci5zbGljZSgpLG4pZm9yKHM9YS5sZW5n
        dGg7LS1zPj0wOylhW3NdPWUoYVtzXSxuLGksbyl9ZWxzZSBpZihFbWJlci5D
        b3B5YWJsZSYmRW1iZXIuQ29weWFibGUuZGV0ZWN0KHIpKWE9ci5jb3B5KG4s
        aSxvKTtlbHNle2E9e307Zm9yKHUgaW4gcilyLmhhc093blByb3BlcnR5KHUp
        JiYiX18iIT09dS5zdWJzdHJpbmcoMCwyKSYmKGFbdV09bj9lKHJbdV0sbixp
        LG8pOnJbdV0pfXJldHVybiBuJiYoaS5wdXNoKHIpLG8ucHVzaChhKSksYX12
        YXIgdD1FbWJlci5FbnVtZXJhYmxlVXRpbHMuaW5kZXhPZjtpZihFbWJlci5j
        b21wYXJlPWZ1bmN0aW9uIGkoZSx0KXtpZihlPT09dClyZXR1cm4gMDt2YXIg
        cj1FbWJlci50eXBlT2YoZSksbj1FbWJlci50eXBlT2YodCksbz1FbWJlci5D
        b21wYXJhYmxlO2lmKG8pe2lmKCJpbnN0YW5jZSI9PT1yJiZvLmRldGVjdChl
        LmNvbnN0cnVjdG9yKSlyZXR1cm4gZS5jb25zdHJ1Y3Rvci5jb21wYXJlKGUs
        dCk7aWYoImluc3RhbmNlIj09PW4mJm8uZGV0ZWN0KHQuY29uc3RydWN0b3Ip
        KXJldHVybiAxLXQuY29uc3RydWN0b3IuY29tcGFyZSh0LGUpfXZhciBhPUVt
        YmVyLk9SREVSX0RFRklOSVRJT05fTUFQUElORztpZighYSl7dmFyIHM9RW1i
        ZXIuT1JERVJfREVGSU5JVElPTjthPUVtYmVyLk9SREVSX0RFRklOSVRJT05f
        TUFQUElORz17fTt2YXIgdSxjO2Zvcih1PTAsYz1zLmxlbmd0aDtjPnU7Kyt1
        KWFbc1t1XV09dTtkZWxldGUgRW1iZXIuT1JERVJfREVGSU5JVElPTn12YXIg
        bD1hW3JdLGg9YVtuXTtpZihoPmwpcmV0dXJuLTE7aWYobD5oKXJldHVybiAx
        O3N3aXRjaChyKXtjYXNlImJvb2xlYW4iOmNhc2UibnVtYmVyIjpyZXR1cm4g
        dD5lPy0xOmU+dD8xOjA7Y2FzZSJzdHJpbmciOnZhciBtPWUubG9jYWxlQ29t
        cGFyZSh0KTtyZXR1cm4gMD5tPy0xOm0+MD8xOjA7Y2FzZSJhcnJheSI6Zm9y
        KHZhciBmPWUubGVuZ3RoLHA9dC5sZW5ndGgsZD1NYXRoLm1pbihmLHApLGI9
        MCx2PTA7MD09PWImJmQ+djspYj1pKGVbdl0sdFt2XSksdisrO3JldHVybiAw
        IT09Yj9iOnA+Zj8tMTpmPnA/MTowO2Nhc2UiaW5zdGFuY2UiOnJldHVybiBF
        bWJlci5Db21wYXJhYmxlJiZFbWJlci5Db21wYXJhYmxlLmRldGVjdChlKT9l
        LmNvbXBhcmUoZSx0KTowO2Nhc2UiZGF0ZSI6dmFyIEU9ZS5nZXRUaW1lKCks
        Zz10LmdldFRpbWUoKTtyZXR1cm4gZz5FPy0xOkU+Zz8xOjA7ZGVmYXVsdDpy
        ZXR1cm4gMH19LEVtYmVyLmNvcHk9ZnVuY3Rpb24odCxyKXtyZXR1cm4ib2Jq
        ZWN0IiE9dHlwZW9mIHR8fG51bGw9PT10P3Q6RW1iZXIuQ29weWFibGUmJkVt
        YmVyLkNvcHlhYmxlLmRldGVjdCh0KT90LmNvcHkocik6ZSh0LHIscj9bXTpu
        dWxsLHI/W106bnVsbCl9LEVtYmVyLmluc3BlY3Q9ZnVuY3Rpb24oZSl7dmFy
        IHQ9RW1iZXIudHlwZU9mKGUpO2lmKCJhcnJheSI9PT10KXJldHVybiJbIitl
        KyJdIjtpZigib2JqZWN0IiE9PXQpcmV0dXJuIGUrIiI7dmFyIHIsbj1bXTtm
        b3IodmFyIGkgaW4gZSlpZihlLmhhc093blByb3BlcnR5KGkpKXtpZihyPWVb
        aV0sInRvU3RyaW5nIj09PXIpY29udGludWU7ImZ1bmN0aW9uIj09PUVtYmVy
        LnR5cGVPZihyKSYmKHI9ImZ1bmN0aW9uKCkgeyAuLi4gfSIpLG4ucHVzaChp
        KyI6ICIrcil9cmV0dXJuInsiK24uam9pbigiLCAiKSsifSJ9LEVtYmVyLmlz
        RXF1YWw9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZSYmImZ1bmN0aW9uIj09dHlw
        ZW9mIGUuaXNFcXVhbD9lLmlzRXF1YWwodCk6ZT09PXR9LEVtYmVyLk9SREVS
        X0RFRklOSVRJT049RW1iZXIuRU5WLk9SREVSX0RFRklOSVRJT058fFsidW5k
        ZWZpbmVkIiwibnVsbCIsImJvb2xlYW4iLCJudW1iZXIiLCJzdHJpbmciLCJh
        cnJheSIsIm9iamVjdCIsImluc3RhbmNlIiwiZnVuY3Rpb24iLCJjbGFzcyIs
        ImRhdGUiXSxFbWJlci5rZXlzPU9iamVjdC5rZXlzLCFFbWJlci5rZXlzfHxF
        bWJlci5jcmVhdGUuaXNTaW11bGF0ZWQpe3ZhciByPVsiY29uc3RydWN0b3Ii
        LCJoYXNPd25Qcm9wZXJ0eSIsImlzUHJvdG90eXBlT2YiLCJwcm9wZXJ0eUlz
        RW51bWVyYWJsZSIsInZhbHVlT2YiLCJ0b0xvY2FsZVN0cmluZyIsInRvU3Ry
        aW5nIl0sbj1mdW5jdGlvbihlLHIsbil7Il9fIiE9PW4uc3Vic3RyaW5nKDAs
        MikmJiJfc3VwZXIiIT09biYmKHQocixuKT49MHx8ZS5oYXNPd25Qcm9wZXJ0
        eShuKSYmci5wdXNoKG4pKX07RW1iZXIua2V5cz1mdW5jdGlvbihlKXt2YXIg
        dCxpPVtdO2Zvcih0IGluIGUpbihlLGksdCk7Zm9yKHZhciBvPTAsYT1yLmxl
        bmd0aDthPm87bysrKXQ9cltvXSxuKGUsaSx0KTtyZXR1cm4gaX19fSgpLGZ1
        bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe3JldHVybiAwPT09cy5sZW5ndGg/e306
        cy5wb3AoKX1mdW5jdGlvbiB0KGUpe3JldHVybiBzLnB1c2goZSksbnVsbH1m
        dW5jdGlvbiByKGUsdCl7ZnVuY3Rpb24gcihyKXt2YXIgbz1uKHIsZSk7cmV0
        dXJuIGk/dD09PW86ISFvfXZhciBpPTI9PT1hcmd1bWVudHMubGVuZ3RoO3Jl
        dHVybiByfXZhciBuPUVtYmVyLmdldCxpPUVtYmVyLnNldCxvPUFycmF5LnBy
        b3RvdHlwZS5zbGljZSxhPUVtYmVyLkVudW1lcmFibGVVdGlscy5pbmRleE9m
        LHM9W107RW1iZXIuRW51bWVyYWJsZT1FbWJlci5NaXhpbi5jcmVhdGUoe25l
        eHRPYmplY3Q6RW1iZXIucmVxdWlyZWQoRnVuY3Rpb24pLGZpcnN0T2JqZWN0
        OkVtYmVyLmNvbXB1dGVkKGZ1bmN0aW9uKCl7aWYoMD09PW4odGhpcywibGVu
        Z3RoIikpcmV0dXJuIHZvaWQgMDt2YXIgcixpPWUoKTtyZXR1cm4gcj10aGlz
        Lm5leHRPYmplY3QoMCxudWxsLGkpLHQoaSkscn0pLnByb3BlcnR5KCJbXSIp
        LGxhc3RPYmplY3Q6RW1iZXIuY29tcHV0ZWQoZnVuY3Rpb24oKXt2YXIgcj1u
        KHRoaXMsImxlbmd0aCIpO2lmKDA9PT1yKXJldHVybiB2b2lkIDA7dmFyIGks
        bz1lKCksYT0wLHM9bnVsbDtkbyBzPWksaT10aGlzLm5leHRPYmplY3QoYSsr
        LHMsbyk7d2hpbGUodm9pZCAwIT09aSk7cmV0dXJuIHQobyksc30pLnByb3Bl
        cnR5KCJbXSIpLGNvbnRhaW5zOmZ1bmN0aW9uKGUpe3JldHVybiB2b2lkIDAh
        PT10aGlzLmZpbmQoZnVuY3Rpb24odCl7cmV0dXJuIHQ9PT1lfSl9LGZvckVh
        Y2g6ZnVuY3Rpb24ocixpKXtpZigiZnVuY3Rpb24iIT10eXBlb2Ygcil0aHJv
        dyBuZXcgVHlwZUVycm9yO3ZhciBvPW4odGhpcywibGVuZ3RoIiksYT1udWxs
        LHM9ZSgpO3ZvaWQgMD09PWkmJihpPW51bGwpO2Zvcih2YXIgdT0wO28+dTt1
        Kyspe3ZhciBjPXRoaXMubmV4dE9iamVjdCh1LGEscyk7ci5jYWxsKGksYyx1
        LHRoaXMpLGE9Y31yZXR1cm4gYT1udWxsLHM9dChzKSx0aGlzfSxnZXRFYWNo
        OmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLm1hcEJ5KGUpfSxzZXRFYWNoOmZ1
        bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuZm9yRWFjaChmdW5jdGlvbihyKXtp
        KHIsZSx0KX0pfSxtYXA6ZnVuY3Rpb24oZSx0KXt2YXIgcj1FbWJlci5BKCk7
        cmV0dXJuIHRoaXMuZm9yRWFjaChmdW5jdGlvbihuLGksbyl7cltpXT1lLmNh
        bGwodCxuLGksbyl9KSxyfSxtYXBCeTpmdW5jdGlvbihlKXtyZXR1cm4gdGhp
        cy5tYXAoZnVuY3Rpb24odCl7cmV0dXJuIG4odCxlKX0pfSxtYXBQcm9wZXJ0
        eTpFbWJlci5hbGlhc01ldGhvZCgibWFwQnkiKSxmaWx0ZXI6ZnVuY3Rpb24o
        ZSx0KXt2YXIgcj1FbWJlci5BKCk7cmV0dXJuIHRoaXMuZm9yRWFjaChmdW5j
        dGlvbihuLGksbyl7ZS5jYWxsKHQsbixpLG8pJiZyLnB1c2gobil9KSxyfSxy
        ZWplY3Q6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5maWx0ZXIoZnVuY3Rp
        b24oKXtyZXR1cm4hZS5hcHBseSh0LGFyZ3VtZW50cyl9KX0sZmlsdGVyQnk6
        ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5maWx0ZXIoci5hcHBseSh0aGlzLGFy
        Z3VtZW50cykpfSxmaWx0ZXJQcm9wZXJ0eTpFbWJlci5hbGlhc01ldGhvZCgi
        ZmlsdGVyQnkiKSxyZWplY3RCeTpmdW5jdGlvbihlLHQpe3ZhciByPWZ1bmN0
        aW9uKHIpe3JldHVybiBuKHIsZSk9PT10fSxpPWZ1bmN0aW9uKHQpe3JldHVy
        biEhbih0LGUpfSxvPTI9PT1hcmd1bWVudHMubGVuZ3RoP3I6aTtyZXR1cm4g
        dGhpcy5yZWplY3Qobyl9LHJlamVjdFByb3BlcnR5OkVtYmVyLmFsaWFzTWV0
        aG9kKCJyZWplY3RCeSIpLGZpbmQ6ZnVuY3Rpb24ocixpKXt2YXIgbz1uKHRo
        aXMsImxlbmd0aCIpO3ZvaWQgMD09PWkmJihpPW51bGwpO2Zvcih2YXIgYSxz
        LHU9bnVsbCxjPSExLGw9ZSgpLGg9MDtvPmgmJiFjO2grKylhPXRoaXMubmV4
        dE9iamVjdChoLHUsbCksKGM9ci5jYWxsKGksYSxoLHRoaXMpKSYmKHM9YSks
        dT1hO3JldHVybiBhPXU9bnVsbCxsPXQobCksc30sZmluZEJ5OmZ1bmN0aW9u
        KCl7cmV0dXJuIHRoaXMuZmluZChyLmFwcGx5KHRoaXMsYXJndW1lbnRzKSl9
        LGZpbmRQcm9wZXJ0eTpFbWJlci5hbGlhc01ldGhvZCgiZmluZEJ5IiksZXZl
        cnk6ZnVuY3Rpb24oZSx0KXtyZXR1cm4hdGhpcy5maW5kKGZ1bmN0aW9uKHIs
        bixpKXtyZXR1cm4hZS5jYWxsKHQscixuLGkpfSl9LGV2ZXJ5Qnk6ZnVuY3Rp
        b24oKXtyZXR1cm4gdGhpcy5ldmVyeShyLmFwcGx5KHRoaXMsYXJndW1lbnRz
        KSl9LGV2ZXJ5UHJvcGVydHk6RW1iZXIuYWxpYXNNZXRob2QoImV2ZXJ5Qnki
        KSxhbnk6ZnVuY3Rpb24oZSx0KXtyZXR1cm4hIXRoaXMuZmluZChmdW5jdGlv
        bihyLG4saSl7cmV0dXJuISFlLmNhbGwodCxyLG4saSl9KX0sc29tZTpFbWJl
        ci5hbGlhc01ldGhvZCgiYW55IiksYW55Qnk6ZnVuY3Rpb24oKXtyZXR1cm4g
        dGhpcy5hbnkoci5hcHBseSh0aGlzLGFyZ3VtZW50cykpfSxzb21lUHJvcGVy
        dHk6RW1iZXIuYWxpYXNNZXRob2QoImFueUJ5IikscmVkdWNlOmZ1bmN0aW9u
        KGUsdCxyKXtpZigiZnVuY3Rpb24iIT10eXBlb2YgZSl0aHJvdyBuZXcgVHlw
        ZUVycm9yO3ZhciBuPXQ7cmV0dXJuIHRoaXMuZm9yRWFjaChmdW5jdGlvbih0
        LGkpe249ZS5jYWxsKG51bGwsbix0LGksdGhpcyxyKX0sdGhpcyksbn0saW52
        b2tlOmZ1bmN0aW9uKGUpe3ZhciB0LHI9RW1iZXIuQSgpO3JldHVybiBhcmd1
        bWVudHMubGVuZ3RoPjEmJih0PW8uY2FsbChhcmd1bWVudHMsMSkpLHRoaXMu
        Zm9yRWFjaChmdW5jdGlvbihuLGkpe3ZhciBvPW4mJm5bZV07ImZ1bmN0aW9u
        Ij09dHlwZW9mIG8mJihyW2ldPXQ/by5hcHBseShuLHQpOm8uY2FsbChuKSl9
        LHRoaXMpLHJ9LHRvQXJyYXk6ZnVuY3Rpb24oKXt2YXIgZT1FbWJlci5BKCk7
        cmV0dXJuIHRoaXMuZm9yRWFjaChmdW5jdGlvbih0LHIpe2Vbcl09dH0pLGV9
        LGNvbXBhY3Q6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5maWx0ZXIoZnVuY3Rp
        b24oZSl7cmV0dXJuIG51bGwhPWV9KX0sd2l0aG91dDpmdW5jdGlvbihlKXtp
        ZighdGhpcy5jb250YWlucyhlKSlyZXR1cm4gdGhpczt2YXIgdD1FbWJlci5B
        KCk7cmV0dXJuIHRoaXMuZm9yRWFjaChmdW5jdGlvbihyKXtyIT09ZSYmKHRb
        dC5sZW5ndGhdPXIpCn0pLHR9LHVuaXE6ZnVuY3Rpb24oKXt2YXIgZT1FbWJl
        ci5BKCk7cmV0dXJuIHRoaXMuZm9yRWFjaChmdW5jdGlvbih0KXthKGUsdCk8
        MCYmZS5wdXNoKHQpfSksZX0sIltdIjpFbWJlci5jb21wdXRlZChmdW5jdGlv
        bigpe3JldHVybiB0aGlzfSksYWRkRW51bWVyYWJsZU9ic2VydmVyOmZ1bmN0
        aW9uKGUsdCl7dmFyIHI9dCYmdC53aWxsQ2hhbmdlfHwiZW51bWVyYWJsZVdp
        bGxDaGFuZ2UiLGk9dCYmdC5kaWRDaGFuZ2V8fCJlbnVtZXJhYmxlRGlkQ2hh
        bmdlIixvPW4odGhpcywiaGFzRW51bWVyYWJsZU9ic2VydmVycyIpO3JldHVy
        biBvfHxFbWJlci5wcm9wZXJ0eVdpbGxDaGFuZ2UodGhpcywiaGFzRW51bWVy
        YWJsZU9ic2VydmVycyIpLEVtYmVyLmFkZExpc3RlbmVyKHRoaXMsIkBlbnVt
        ZXJhYmxlOmJlZm9yZSIsZSxyKSxFbWJlci5hZGRMaXN0ZW5lcih0aGlzLCJA
        ZW51bWVyYWJsZTpjaGFuZ2UiLGUsaSksb3x8RW1iZXIucHJvcGVydHlEaWRD
        aGFuZ2UodGhpcywiaGFzRW51bWVyYWJsZU9ic2VydmVycyIpLHRoaXN9LHJl
        bW92ZUVudW1lcmFibGVPYnNlcnZlcjpmdW5jdGlvbihlLHQpe3ZhciByPXQm
        JnQud2lsbENoYW5nZXx8ImVudW1lcmFibGVXaWxsQ2hhbmdlIixpPXQmJnQu
        ZGlkQ2hhbmdlfHwiZW51bWVyYWJsZURpZENoYW5nZSIsbz1uKHRoaXMsImhh
        c0VudW1lcmFibGVPYnNlcnZlcnMiKTtyZXR1cm4gbyYmRW1iZXIucHJvcGVy
        dHlXaWxsQ2hhbmdlKHRoaXMsImhhc0VudW1lcmFibGVPYnNlcnZlcnMiKSxF
        bWJlci5yZW1vdmVMaXN0ZW5lcih0aGlzLCJAZW51bWVyYWJsZTpiZWZvcmUi
        LGUsciksRW1iZXIucmVtb3ZlTGlzdGVuZXIodGhpcywiQGVudW1lcmFibGU6
        Y2hhbmdlIixlLGkpLG8mJkVtYmVyLnByb3BlcnR5RGlkQ2hhbmdlKHRoaXMs
        Imhhc0VudW1lcmFibGVPYnNlcnZlcnMiKSx0aGlzfSxoYXNFbnVtZXJhYmxl
        T2JzZXJ2ZXJzOkVtYmVyLmNvbXB1dGVkKGZ1bmN0aW9uKCl7cmV0dXJuIEVt
        YmVyLmhhc0xpc3RlbmVycyh0aGlzLCJAZW51bWVyYWJsZTpjaGFuZ2UiKXx8
        RW1iZXIuaGFzTGlzdGVuZXJzKHRoaXMsIkBlbnVtZXJhYmxlOmJlZm9yZSIp
        fSksZW51bWVyYWJsZUNvbnRlbnRXaWxsQ2hhbmdlOmZ1bmN0aW9uKGUsdCl7
        dmFyIHIsaSxvO3JldHVybiByPSJudW1iZXIiPT10eXBlb2YgZT9lOmU/bihl
        LCJsZW5ndGgiKTplPS0xLGk9Im51bWJlciI9PXR5cGVvZiB0P3Q6dD9uKHQs
        Imxlbmd0aCIpOnQ9LTEsbz0wPml8fDA+cnx8MCE9PWktciwtMT09PWUmJihl
        PW51bGwpLC0xPT09dCYmKHQ9bnVsbCksRW1iZXIucHJvcGVydHlXaWxsQ2hh
        bmdlKHRoaXMsIltdIiksbyYmRW1iZXIucHJvcGVydHlXaWxsQ2hhbmdlKHRo
        aXMsImxlbmd0aCIpLEVtYmVyLnNlbmRFdmVudCh0aGlzLCJAZW51bWVyYWJs
        ZTpiZWZvcmUiLFt0aGlzLGUsdF0pLHRoaXN9LGVudW1lcmFibGVDb250ZW50
        RGlkQ2hhbmdlOmZ1bmN0aW9uKGUsdCl7dmFyIHIsaSxvO3JldHVybiByPSJu
        dW1iZXIiPT10eXBlb2YgZT9lOmU/bihlLCJsZW5ndGgiKTplPS0xLGk9Im51
        bWJlciI9PXR5cGVvZiB0P3Q6dD9uKHQsImxlbmd0aCIpOnQ9LTEsbz0wPml8
        fDA+cnx8MCE9PWktciwtMT09PWUmJihlPW51bGwpLC0xPT09dCYmKHQ9bnVs
        bCksRW1iZXIuc2VuZEV2ZW50KHRoaXMsIkBlbnVtZXJhYmxlOmNoYW5nZSIs
        W3RoaXMsZSx0XSksbyYmRW1iZXIucHJvcGVydHlEaWRDaGFuZ2UodGhpcywi
        bGVuZ3RoIiksRW1iZXIucHJvcGVydHlEaWRDaGFuZ2UodGhpcywiW10iKSx0
        aGlzfX0pLEVtYmVyLkVudW1lcmFibGUucmVvcGVuKHtzb3J0Qnk6ZnVuY3Rp
        b24oKXt2YXIgZT1hcmd1bWVudHM7cmV0dXJuIHRoaXMudG9BcnJheSgpLnNv
        cnQoZnVuY3Rpb24odCxyKXtmb3IodmFyIGk9MDtpPGUubGVuZ3RoO2krKyl7
        dmFyIG89ZVtpXSxhPW4odCxvKSxzPW4ocixvKSx1PUVtYmVyLmNvbXBhcmUo
        YSxzKTtpZih1KXJldHVybiB1fXJldHVybiAwfSl9fSl9KCksZnVuY3Rpb24o
        KXt2YXIgZT1FbWJlci5nZXQsdD0oRW1iZXIuc2V0LEVtYmVyLmlzTm9uZSks
        cj1FbWJlci5FbnVtZXJhYmxlVXRpbHMubWFwLG49RW1iZXIuY2FjaGVGb3I7
        RW1iZXIuQXJyYXk9RW1iZXIuTWl4aW4uY3JlYXRlKEVtYmVyLkVudW1lcmFi
        bGUse2xlbmd0aDpFbWJlci5yZXF1aXJlZCgpLG9iamVjdEF0OmZ1bmN0aW9u
        KHQpe3JldHVybiAwPnR8fHQ+PWUodGhpcywibGVuZ3RoIik/dm9pZCAwOmUo
        dGhpcyx0KX0sb2JqZWN0c0F0OmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7cmV0
        dXJuIHIoZSxmdW5jdGlvbihlKXtyZXR1cm4gdC5vYmplY3RBdChlKX0pfSxu
        ZXh0T2JqZWN0OmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLm9iamVjdEF0KGUp
        fSwiW10iOkVtYmVyLmNvbXB1dGVkKGZ1bmN0aW9uKHQscil7cmV0dXJuIHZv
        aWQgMCE9PXImJnRoaXMucmVwbGFjZSgwLGUodGhpcywibGVuZ3RoIiksciks
        dGhpc30pLGZpcnN0T2JqZWN0OkVtYmVyLmNvbXB1dGVkKGZ1bmN0aW9uKCl7
        cmV0dXJuIHRoaXMub2JqZWN0QXQoMCl9KSxsYXN0T2JqZWN0OkVtYmVyLmNv
        bXB1dGVkKGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub2JqZWN0QXQoZSh0aGlz
        LCJsZW5ndGgiKS0xKX0pLGNvbnRhaW5zOmZ1bmN0aW9uKGUpe3JldHVybiB0
        aGlzLmluZGV4T2YoZSk+PTB9LHNsaWNlOmZ1bmN0aW9uKHIsbil7dmFyIGk9
        RW1iZXIuQSgpLG89ZSh0aGlzLCJsZW5ndGgiKTtmb3IodChyKSYmKHI9MCks
        KHQobil8fG4+bykmJihuPW8pLDA+ciYmKHI9bytyKSwwPm4mJihuPW8rbik7
        bj5yOylpW2kubGVuZ3RoXT10aGlzLm9iamVjdEF0KHIrKyk7cmV0dXJuIGl9
        LGluZGV4T2Y6ZnVuY3Rpb24odCxyKXt2YXIgbixpPWUodGhpcywibGVuZ3Ro
        Iik7Zm9yKHZvaWQgMD09PXImJihyPTApLDA+ciYmKHIrPWkpLG49cjtpPm47
        bisrKWlmKHRoaXMub2JqZWN0QXQobik9PT10KXJldHVybiBuO3JldHVybi0x
        fSxsYXN0SW5kZXhPZjpmdW5jdGlvbih0LHIpe3ZhciBuLGk9ZSh0aGlzLCJs
        ZW5ndGgiKTtmb3IoKHZvaWQgMD09PXJ8fHI+PWkpJiYocj1pLTEpLDA+ciYm
        KHIrPWkpLG49cjtuPj0wO24tLSlpZih0aGlzLm9iamVjdEF0KG4pPT09dCly
        ZXR1cm4gbjtyZXR1cm4tMX0sYWRkQXJyYXlPYnNlcnZlcjpmdW5jdGlvbih0
        LHIpe3ZhciBuPXImJnIud2lsbENoYW5nZXx8ImFycmF5V2lsbENoYW5nZSIs
        aT1yJiZyLmRpZENoYW5nZXx8ImFycmF5RGlkQ2hhbmdlIixvPWUodGhpcywi
        aGFzQXJyYXlPYnNlcnZlcnMiKTtyZXR1cm4gb3x8RW1iZXIucHJvcGVydHlX
        aWxsQ2hhbmdlKHRoaXMsImhhc0FycmF5T2JzZXJ2ZXJzIiksRW1iZXIuYWRk
        TGlzdGVuZXIodGhpcywiQGFycmF5OmJlZm9yZSIsdCxuKSxFbWJlci5hZGRM
        aXN0ZW5lcih0aGlzLCJAYXJyYXk6Y2hhbmdlIix0LGkpLG98fEVtYmVyLnBy
        b3BlcnR5RGlkQ2hhbmdlKHRoaXMsImhhc0FycmF5T2JzZXJ2ZXJzIiksdGhp
        c30scmVtb3ZlQXJyYXlPYnNlcnZlcjpmdW5jdGlvbih0LHIpe3ZhciBuPXIm
        JnIud2lsbENoYW5nZXx8ImFycmF5V2lsbENoYW5nZSIsaT1yJiZyLmRpZENo
        YW5nZXx8ImFycmF5RGlkQ2hhbmdlIixvPWUodGhpcywiaGFzQXJyYXlPYnNl
        cnZlcnMiKTtyZXR1cm4gbyYmRW1iZXIucHJvcGVydHlXaWxsQ2hhbmdlKHRo
        aXMsImhhc0FycmF5T2JzZXJ2ZXJzIiksRW1iZXIucmVtb3ZlTGlzdGVuZXIo
        dGhpcywiQGFycmF5OmJlZm9yZSIsdCxuKSxFbWJlci5yZW1vdmVMaXN0ZW5l
        cih0aGlzLCJAYXJyYXk6Y2hhbmdlIix0LGkpLG8mJkVtYmVyLnByb3BlcnR5
        RGlkQ2hhbmdlKHRoaXMsImhhc0FycmF5T2JzZXJ2ZXJzIiksdGhpc30saGFz
        QXJyYXlPYnNlcnZlcnM6RW1iZXIuY29tcHV0ZWQoZnVuY3Rpb24oKXtyZXR1
        cm4gRW1iZXIuaGFzTGlzdGVuZXJzKHRoaXMsIkBhcnJheTpjaGFuZ2UiKXx8
        RW1iZXIuaGFzTGlzdGVuZXJzKHRoaXMsIkBhcnJheTpiZWZvcmUiKX0pLGFy
        cmF5Q29udGVudFdpbGxDaGFuZ2U6ZnVuY3Rpb24odCxyLG4pe3ZvaWQgMD09
        PXQ/KHQ9MCxyPW49LTEpOih2b2lkIDA9PT1yJiYocj0tMSksdm9pZCAwPT09
        biYmKG49LTEpKSxFbWJlci5pc1dhdGNoaW5nKHRoaXMsIkBlYWNoIikmJmUo
        dGhpcywiQGVhY2giKSxFbWJlci5zZW5kRXZlbnQodGhpcywiQGFycmF5OmJl
        Zm9yZSIsW3RoaXMsdCxyLG5dKTt2YXIgaSxvO2lmKHQ+PTAmJnI+PTAmJmUo
        dGhpcywiaGFzRW51bWVyYWJsZU9ic2VydmVycyIpKXtpPVtdLG89dCtyO2Zv
        cih2YXIgYT10O28+YTthKyspaS5wdXNoKHRoaXMub2JqZWN0QXQoYSkpfWVs
        c2UgaT1yO3JldHVybiB0aGlzLmVudW1lcmFibGVDb250ZW50V2lsbENoYW5n
        ZShpLG4pLHRoaXN9LGFycmF5Q29udGVudERpZENoYW5nZTpmdW5jdGlvbih0
        LHIsaSl7dm9pZCAwPT09dD8odD0wLHI9aT0tMSk6KHZvaWQgMD09PXImJihy
        PS0xKSx2b2lkIDA9PT1pJiYoaT0tMSkpO3ZhciBvLGE7aWYodD49MCYmaT49
        MCYmZSh0aGlzLCJoYXNFbnVtZXJhYmxlT2JzZXJ2ZXJzIikpe289W10sYT10
        K2k7Zm9yKHZhciBzPXQ7YT5zO3MrKylvLnB1c2godGhpcy5vYmplY3RBdChz
        KSl9ZWxzZSBvPWk7dGhpcy5lbnVtZXJhYmxlQ29udGVudERpZENoYW5nZShy
        LG8pLEVtYmVyLnNlbmRFdmVudCh0aGlzLCJAYXJyYXk6Y2hhbmdlIixbdGhp
        cyx0LHIsaV0pO3ZhciB1PWUodGhpcywibGVuZ3RoIiksYz1uKHRoaXMsImZp
        cnN0T2JqZWN0IiksbD1uKHRoaXMsImxhc3RPYmplY3QiKTtyZXR1cm4gdGhp
        cy5vYmplY3RBdCgwKSE9PWMmJihFbWJlci5wcm9wZXJ0eVdpbGxDaGFuZ2Uo
        dGhpcywiZmlyc3RPYmplY3QiKSxFbWJlci5wcm9wZXJ0eURpZENoYW5nZSh0
        aGlzLCJmaXJzdE9iamVjdCIpKSx0aGlzLm9iamVjdEF0KHUtMSkhPT1sJiYo
        RW1iZXIucHJvcGVydHlXaWxsQ2hhbmdlKHRoaXMsImxhc3RPYmplY3QiKSxF
        bWJlci5wcm9wZXJ0eURpZENoYW5nZSh0aGlzLCJsYXN0T2JqZWN0IikpLHRo
        aXN9LCJAZWFjaCI6RW1iZXIuY29tcHV0ZWQoZnVuY3Rpb24oKXtyZXR1cm4g
        dGhpcy5fX2VhY2h8fCh0aGlzLl9fZWFjaD1uZXcgRW1iZXIuRWFjaFByb3h5
        KHRoaXMpKSx0aGlzLl9fZWFjaH0pfSl9KCksZnVuY3Rpb24oKXtmdW5jdGlv
        biBlKGUsdCl7cmV0dXJuIkB0aGlzIj09PXQ/ZTpoKGUsdCl9ZnVuY3Rpb24g
        dChlLHQscil7dGhpcy5jYWxsYmFja3M9ZSx0aGlzLmNwPXQsdGhpcy5pbnN0
        YW5jZU1ldGE9cix0aGlzLmRlcGVuZGVudEtleXNCeUd1aWQ9e30sdGhpcy50
        cmFja2VkQXJyYXlzQnlHdWlkPXt9LHRoaXMuc3VzcGVuZGVkPSExLHRoaXMu
        Y2hhbmdlZEl0ZW1zPXt9fWZ1bmN0aW9uIHIoZSx0LHIpe3RoaXMuZGVwZW5k
        ZW50QXJyYXk9ZSx0aGlzLmluZGV4PXQsdGhpcy5pdGVtPWUub2JqZWN0QXQo
        dCksdGhpcy50cmFja2VkQXJyYXk9cix0aGlzLmJlZm9yZU9ic2VydmVyPW51
        bGwsdGhpcy5vYnNlcnZlcj1udWxsLHRoaXMuZGVzdHJveWVkPSExfWZ1bmN0
        aW9uIG4oZSx0LHIpe3JldHVybiAwPmU/TWF0aC5tYXgoMCx0K2UpOnQ+ZT9l
        Ok1hdGgubWluKHQtcixlKX1mdW5jdGlvbiBpKGUsdCxyKXtyZXR1cm4gTWF0
        aC5taW4ocix0LWUpfWZ1bmN0aW9uIG8oZSx0LHIsbixpLG8pe3ZhciBhPXth
        cnJheUNoYW5nZWQ6ZSxpbmRleDpyLGl0ZW06dCxwcm9wZXJ0eU5hbWU6bixw
        cm9wZXJ0eTppfTtyZXR1cm4gbyYmKGEucHJldmlvdXNWYWx1ZXM9byksYX1m
        dW5jdGlvbiBhKGUsdCxyLG4saSl7QyhlLGZ1bmN0aW9uKGEscyl7aS5zZXRW
        YWx1ZSh0LmFkZGVkSXRlbS5jYWxsKHRoaXMsaS5nZXRWYWx1ZSgpLGEsbyhl
        LGEscyxuLHIpLGkuc3VnYXJNZXRhKSl9LHRoaXMpfWZ1bmN0aW9uIHMoZSx0
        KXt2YXIgcjtlLl9jYWxsYmFja3MoKSxlLl9oYXNJbnN0YW5jZU1ldGEodGhp
        cyx0KT8ocj1lLl9pbnN0YW5jZU1ldGEodGhpcyx0KSxyLnNldFZhbHVlKGUu
        cmVzZXRWYWx1ZShyLmdldFZhbHVlKCkpKSk6cj1lLl9pbnN0YW5jZU1ldGEo
        dGhpcyx0KSxlLm9wdGlvbnMuaW5pdGlhbGl6ZSYmZS5vcHRpb25zLmluaXRp
        YWxpemUuY2FsbCh0aGlzLHIuZ2V0VmFsdWUoKSx7cHJvcGVydHk6ZSxwcm9w
        ZXJ0eU5hbWU6dH0sci5zdWdhck1ldGEpfWZ1bmN0aW9uIHUoZSx0LHIpe3Ro
        aXMuY29udGV4dD1lLHRoaXMucHJvcGVydHlOYW1lPXQsdGhpcy5jYWNoZT1m
        KGUpLmNhY2hlLHRoaXMuZGVwZW5kZW50QXJyYXlzPXt9LHRoaXMuc3VnYXJN
        ZXRhPXt9LHRoaXMuaW5pdGlhbFZhbHVlPXJ9ZnVuY3Rpb24gYyh0KXt2YXIg
        cj10aGlzO3RoaXMub3B0aW9ucz10LHRoaXMuX2luc3RhbmNlTWV0YXM9e30s
        dGhpcy5fZGVwZW5kZW50S2V5cz1udWxsLHRoaXMuX2l0ZW1Qcm9wZXJ0eUtl
        eXM9e30sdGhpcy5fcHJldmlvdXNJdGVtUHJvcGVydHlLZXlzPXt9LHRoaXMu
        cmVhZE9ubHkoKSx0aGlzLmNhY2hlYWJsZSgpLHRoaXMucmVjb21wdXRlT25j
        ZT1mdW5jdGlvbihlKXtFbWJlci5ydW4ub25jZSh0aGlzLG4sZSl9O3ZhciBu
        PWZ1bmN0aW9uKHQpe3ZhciBuPShyLl9kZXBlbmRlbnRLZXlzLHIuX2luc3Rh
        bmNlTWV0YSh0aGlzLHQpKSxpPXIuX2NhbGxiYWNrcygpO3MuY2FsbCh0aGlz
        LHIsdCksbi5kZXBlbmRlbnRBcnJheXNPYnNlcnZlci5zdXNwZW5kQXJyYXlP
        YnNlcnZlcnMoZnVuY3Rpb24oKXtDKHIuX2RlcGVuZGVudEtleXMsZnVuY3Rp
        b24odCl7dmFyIGk9ZSh0aGlzLHQpLG89bi5kZXBlbmRlbnRBcnJheXNbdF07
        aT09PW8/ci5fcHJldmlvdXNJdGVtUHJvcGVydHlLZXlzW3RdJiYoZGVsZXRl
        IHIuX3ByZXZpb3VzSXRlbVByb3BlcnR5S2V5c1t0XSxuLmRlcGVuZGVudEFy
        cmF5c09ic2VydmVyLnNldHVwUHJvcGVydHlPYnNlcnZlcnModCxyLl9pdGVt
        UHJvcGVydHlLZXlzW3RdKSk6KG4uZGVwZW5kZW50QXJyYXlzW3RdPWksbyYm
        bi5kZXBlbmRlbnRBcnJheXNPYnNlcnZlci50ZWFyZG93bk9ic2VydmVycyhv
        LHQpLGkmJm4uZGVwZW5kZW50QXJyYXlzT2JzZXJ2ZXIuc2V0dXBPYnNlcnZl
        cnMoaSx0KSl9LHRoaXMpfSx0aGlzKSxDKHIuX2RlcGVuZGVudEtleXMsZnVu
        Y3Rpb24obyl7dmFyIHM9ZSh0aGlzLG8pO3MmJmEuY2FsbCh0aGlzLHMsaSxy
        LHQsbil9LHRoaXMpfTt0aGlzLmZ1bmM9ZnVuY3Rpb24oZSl7cmV0dXJuIG4u
        Y2FsbCh0aGlzLGUpLHIuX2luc3RhbmNlTWV0YSh0aGlzLGUpLmdldFZhbHVl
        KCl9fWZ1bmN0aW9uIGwoZSl7cmV0dXJuIGV9dmFyIGg9RW1iZXIuZ2V0LG09
        KEVtYmVyLnNldCxFbWJlci5ndWlkRm9yKSxmPUVtYmVyLm1ldGEscD1FbWJl
        ci5wcm9wZXJ0eVdpbGxDaGFuZ2UsZD1FbWJlci5wcm9wZXJ0eURpZENoYW5n
        ZSxiPUVtYmVyLmFkZEJlZm9yZU9ic2VydmVyLHY9RW1iZXIucmVtb3ZlQmVm
        b3JlT2JzZXJ2ZXIsRT1FbWJlci5hZGRPYnNlcnZlcixnPUVtYmVyLnJlbW92
        ZU9ic2VydmVyLHk9RW1iZXIuQ29tcHV0ZWRQcm9wZXJ0eSx3PVtdLnNsaWNl
        LF89RW1iZXIuY3JlYXRlLEM9RW1iZXIuRW51bWVyYWJsZVV0aWxzLmZvckVh
        Y2gsTz0vXiguKilcLkBlYWNoXC4oLiopLyxBPS8oLipcLkBlYWNoKXsyLH0v
        O3QucHJvdG90eXBlPXtzZXRWYWx1ZTpmdW5jdGlvbihlKXt0aGlzLmluc3Rh
        bmNlTWV0YS5zZXRWYWx1ZShlLCEwKX0sZ2V0VmFsdWU6ZnVuY3Rpb24oKXty
        ZXR1cm4gdGhpcy5pbnN0YW5jZU1ldGEuZ2V0VmFsdWUoKX0sc2V0dXBPYnNl
        cnZlcnM6ZnVuY3Rpb24oZSx0KXt0aGlzLmRlcGVuZGVudEtleXNCeUd1aWRb
        bShlKV09dCxlLmFkZEFycmF5T2JzZXJ2ZXIodGhpcyx7d2lsbENoYW5nZToi
        ZGVwZW5kZW50QXJyYXlXaWxsQ2hhbmdlIixkaWRDaGFuZ2U6ImRlcGVuZGVu
        dEFycmF5RGlkQ2hhbmdlIn0pLHRoaXMuY3AuX2l0ZW1Qcm9wZXJ0eUtleXNb
        dF0mJnRoaXMuc2V0dXBQcm9wZXJ0eU9ic2VydmVycyh0LHRoaXMuY3AuX2l0
        ZW1Qcm9wZXJ0eUtleXNbdF0pfSx0ZWFyZG93bk9ic2VydmVyczpmdW5jdGlv
        bihlLHQpe3ZhciByPXRoaXMuY3AuX2l0ZW1Qcm9wZXJ0eUtleXNbdF18fFtd
        O2RlbGV0ZSB0aGlzLmRlcGVuZGVudEtleXNCeUd1aWRbbShlKV0sdGhpcy50
        ZWFyZG93blByb3BlcnR5T2JzZXJ2ZXJzKHQsciksZS5yZW1vdmVBcnJheU9i
        c2VydmVyKHRoaXMse3dpbGxDaGFuZ2U6ImRlcGVuZGVudEFycmF5V2lsbENo
        YW5nZSIsZGlkQ2hhbmdlOiJkZXBlbmRlbnRBcnJheURpZENoYW5nZSJ9KX0s
        c3VzcGVuZEFycmF5T2JzZXJ2ZXJzOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhp
        cy5zdXNwZW5kZWQ7dGhpcy5zdXNwZW5kZWQ9ITAsZS5jYWxsKHQpLHRoaXMu
        c3VzcGVuZGVkPXJ9LHNldHVwUHJvcGVydHlPYnNlcnZlcnM6ZnVuY3Rpb24o
        dCxyKXt2YXIgbj1lKHRoaXMuaW5zdGFuY2VNZXRhLmNvbnRleHQsdCksaT1l
        KG4sImxlbmd0aCIpLG89bmV3IEFycmF5KGkpO3RoaXMucmVzZXRUcmFuc2Zv
        cm1hdGlvbnModCxvKSxDKG4sZnVuY3Rpb24oZSxpKXt2YXIgYT10aGlzLmNy
        ZWF0ZVByb3BlcnR5T2JzZXJ2ZXJDb250ZXh0KG4saSx0aGlzLnRyYWNrZWRB
        cnJheXNCeUd1aWRbdF0pO29baV09YSxDKHIsZnVuY3Rpb24odCl7YihlLHQs
        dGhpcyxhLmJlZm9yZU9ic2VydmVyKSxFKGUsdCx0aGlzLGEub2JzZXJ2ZXIp
        fSx0aGlzKX0sdGhpcyl9LHRlYXJkb3duUHJvcGVydHlPYnNlcnZlcnM6ZnVu
        Y3Rpb24oZSx0KXt2YXIgcixuLGksbz10aGlzLGE9dGhpcy50cmFja2VkQXJy
        YXlzQnlHdWlkW2VdO2EmJmEuYXBwbHkoZnVuY3Rpb24oZSxhLHMpe3MhPT1F
        bWJlci5UcmFja2VkQXJyYXkuREVMRVRFJiZDKGUsZnVuY3Rpb24oZSl7ZS5k
        ZXN0cm95ZWQ9ITAscj1lLmJlZm9yZU9ic2VydmVyLG49ZS5vYnNlcnZlcixp
        PWUuaXRlbSxDKHQsZnVuY3Rpb24oZSl7dihpLGUsbyxyKSxnKGksZSxvLG4p
        fSl9KX0pfSxjcmVhdGVQcm9wZXJ0eU9ic2VydmVyQ29udGV4dDpmdW5jdGlv
        bihlLHQsbil7dmFyIGk9bmV3IHIoZSx0LG4pO3JldHVybiB0aGlzLmNyZWF0
        ZVByb3BlcnR5T2JzZXJ2ZXIoaSksaX0sY3JlYXRlUHJvcGVydHlPYnNlcnZl
        cjpmdW5jdGlvbihlKXt2YXIgdD10aGlzO2UuYmVmb3JlT2JzZXJ2ZXI9ZnVu
        Y3Rpb24ocixuKXtyZXR1cm4gdC5pdGVtUHJvcGVydHlXaWxsQ2hhbmdlKHIs
        bixlLmRlcGVuZGVudEFycmF5LGUpfSxlLm9ic2VydmVyPWZ1bmN0aW9uKHIs
        bil7cmV0dXJuIHQuaXRlbVByb3BlcnR5RGlkQ2hhbmdlKHIsbixlLmRlcGVu
        ZGVudEFycmF5LGUpfX0scmVzZXRUcmFuc2Zvcm1hdGlvbnM6ZnVuY3Rpb24o
        ZSx0KXt0aGlzLnRyYWNrZWRBcnJheXNCeUd1aWRbZV09bmV3IEVtYmVyLlRy
        YWNrZWRBcnJheSh0KX0sdHJhY2tBZGQ6ZnVuY3Rpb24oZSx0LHIpe3ZhciBu
        PXRoaXMudHJhY2tlZEFycmF5c0J5R3VpZFtlXTtuJiZuLmFkZEl0ZW1zKHQs
        cil9LHRyYWNrUmVtb3ZlOmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj10aGlzLnRy
        YWNrZWRBcnJheXNCeUd1aWRbZV07cmV0dXJuIG4/bi5yZW1vdmVJdGVtcyh0
        LHIpOltdfSx1cGRhdGVJbmRleGVzOmZ1bmN0aW9uKHQscil7dmFyIG49ZShy
        LCJsZW5ndGgiKTt0LmFwcGx5KGZ1bmN0aW9uKGUsdCxyKXtyIT09RW1iZXIu
        VHJhY2tlZEFycmF5LkRFTEVURSYmKHIhPT1FbWJlci5UcmFja2VkQXJyYXku
        UkVUQUlOfHxlLmxlbmd0aCE9PW58fDAhPT10KSYmQyhlLGZ1bmN0aW9uKGUs
        cil7ZS5pbmRleD1yK3R9KX0pfSxkZXBlbmRlbnRBcnJheVdpbGxDaGFuZ2U6
        ZnVuY3Rpb24odCxyLGEpe2Z1bmN0aW9uIHMoZSl7ZltoXS5kZXN0cm95ZWQ9
        ITAsdihjLGUsdGhpcyxmW2hdLmJlZm9yZU9ic2VydmVyKSxnKGMsZSx0aGlz
        LGZbaF0ub2JzZXJ2ZXIpfWlmKCF0aGlzLnN1c3BlbmRlZCl7dmFyIHUsYyxs
        LGgsZixwPXRoaXMuY2FsbGJhY2tzLnJlbW92ZWRJdGVtLGQ9bSh0KSxiPXRo
        aXMuZGVwZW5kZW50S2V5c0J5R3VpZFtkXSxFPXRoaXMuY3AuX2l0ZW1Qcm9w
        ZXJ0eUtleXNbYl18fFtdLHk9ZSh0LCJsZW5ndGgiKSx3PW4ocix5LDApLF89
        aSh3LHksYSk7Zm9yKGY9dGhpcy50cmFja1JlbW92ZShiLHcsXyksaD1fLTE7
        aD49MCYmKGw9dytoLCEobD49eSkpOy0taCljPXQub2JqZWN0QXQobCksQyhF
        LHMsdGhpcyksdT1vKHQsYyxsLHRoaXMuaW5zdGFuY2VNZXRhLnByb3BlcnR5
        TmFtZSx0aGlzLmNwKSx0aGlzLnNldFZhbHVlKHAuY2FsbCh0aGlzLmluc3Rh
        bmNlTWV0YS5jb250ZXh0LHRoaXMuZ2V0VmFsdWUoKSxjLHUsdGhpcy5pbnN0
        YW5jZU1ldGEuc3VnYXJNZXRhKSl9fSxkZXBlbmRlbnRBcnJheURpZENoYW5n
        ZTpmdW5jdGlvbih0LHIsaSxhKXtpZighdGhpcy5zdXNwZW5kZWQpe3ZhciBz
        LHUsYz10aGlzLmNhbGxiYWNrcy5hZGRlZEl0ZW0sbD1tKHQpLGg9dGhpcy5k
        ZXBlbmRlbnRLZXlzQnlHdWlkW2xdLGY9bmV3IEFycmF5KGEpLHA9dGhpcy5j
        cC5faXRlbVByb3BlcnR5S2V5c1toXSxkPWUodCwibGVuZ3RoIiksdj1uKHIs
        ZCxhKTtDKHQuc2xpY2Uodix2K2EpLGZ1bmN0aW9uKGUscil7cCYmKHU9Zlty
        XT10aGlzLmNyZWF0ZVByb3BlcnR5T2JzZXJ2ZXJDb250ZXh0KHQsdityLHRo
        aXMudHJhY2tlZEFycmF5c0J5R3VpZFtoXSksQyhwLGZ1bmN0aW9uKHQpe2Io
        ZSx0LHRoaXMsdS5iZWZvcmVPYnNlcnZlciksRShlLHQsdGhpcyx1Lm9ic2Vy
        dmVyKX0sdGhpcykpLHM9byh0LGUsdityLHRoaXMuaW5zdGFuY2VNZXRhLnBy
        b3BlcnR5TmFtZSx0aGlzLmNwKSx0aGlzLnNldFZhbHVlKGMuY2FsbCh0aGlz
        Lmluc3RhbmNlTWV0YS5jb250ZXh0LHRoaXMuZ2V0VmFsdWUoKSxlLHMsdGhp
        cy5pbnN0YW5jZU1ldGEuc3VnYXJNZXRhKSl9LHRoaXMpLHRoaXMudHJhY2tB
        ZGQoaCx2LGYpfX0saXRlbVByb3BlcnR5V2lsbENoYW5nZTpmdW5jdGlvbih0
        LHIsbixpKXt2YXIgbz1tKHQpO3RoaXMuY2hhbmdlZEl0ZW1zW29dfHwodGhp
        cy5jaGFuZ2VkSXRlbXNbb109e2FycmF5Om4sb2JzZXJ2ZXJDb250ZXh0Omks
        b2JqOnQscHJldmlvdXNWYWx1ZXM6e319KSx0aGlzLmNoYW5nZWRJdGVtc1tv
        XS5wcmV2aW91c1ZhbHVlc1tyXT1lKHQscil9LGl0ZW1Qcm9wZXJ0eURpZENo
        YW5nZTpmdW5jdGlvbigpe3RoaXMuZmx1c2hDaGFuZ2VzKCl9LGZsdXNoQ2hh
        bmdlczpmdW5jdGlvbigpe3ZhciBlLHQscixuPXRoaXMuY2hhbmdlZEl0ZW1z
        O2ZvcihlIGluIG4pdD1uW2VdLHQub2JzZXJ2ZXJDb250ZXh0LmRlc3Ryb3ll
        ZHx8KHRoaXMudXBkYXRlSW5kZXhlcyh0Lm9ic2VydmVyQ29udGV4dC50cmFj
        a2VkQXJyYXksdC5vYnNlcnZlckNvbnRleHQuZGVwZW5kZW50QXJyYXkpLHI9
        byh0LmFycmF5LHQub2JqLHQub2JzZXJ2ZXJDb250ZXh0LmluZGV4LHRoaXMu
        aW5zdGFuY2VNZXRhLnByb3BlcnR5TmFtZSx0aGlzLmNwLHQucHJldmlvdXNW
        YWx1ZXMpLHRoaXMuc2V0VmFsdWUodGhpcy5jYWxsYmFja3MucmVtb3ZlZEl0
        ZW0uY2FsbCh0aGlzLmluc3RhbmNlTWV0YS5jb250ZXh0LHRoaXMuZ2V0VmFs
        dWUoKSx0Lm9iaixyLHRoaXMuaW5zdGFuY2VNZXRhLnN1Z2FyTWV0YSkpLHRo
        aXMuc2V0VmFsdWUodGhpcy5jYWxsYmFja3MuYWRkZWRJdGVtLmNhbGwodGhp
        cy5pbnN0YW5jZU1ldGEuY29udGV4dCx0aGlzLmdldFZhbHVlKCksdC5vYmos
        cix0aGlzLmluc3RhbmNlTWV0YS5zdWdhck1ldGEpKSk7dGhpcy5jaGFuZ2Vk
        SXRlbXM9e319fSx1LnByb3RvdHlwZT17Z2V0VmFsdWU6ZnVuY3Rpb24oKXty
        ZXR1cm4gdGhpcy5wcm9wZXJ0eU5hbWUgaW4gdGhpcy5jYWNoZT90aGlzLmNh
        Y2hlW3RoaXMucHJvcGVydHlOYW1lXTp0aGlzLmluaXRpYWxWYWx1ZX0sc2V0
        VmFsdWU6ZnVuY3Rpb24oZSx0KXtpZih2b2lkIDAhPT1lKXt2YXIgcj10JiZl
        IT09dGhpcy5jYWNoZVt0aGlzLnByb3BlcnR5TmFtZV07ciYmcCh0aGlzLmNv
        bnRleHQsdGhpcy5wcm9wZXJ0eU5hbWUpLHRoaXMuY2FjaGVbdGhpcy5wcm9w
        ZXJ0eU5hbWVdPWUsciYmZCh0aGlzLmNvbnRleHQsdGhpcy5wcm9wZXJ0eU5h
        bWUpfWVsc2UgZGVsZXRlIHRoaXMuY2FjaGVbdGhpcy5wcm9wZXJ0eU5hbWVd
        fX0sRW1iZXIuUmVkdWNlQ29tcHV0ZWRQcm9wZXJ0eT1jLGMucHJvdG90eXBl
        PV8oeS5wcm90b3R5cGUpLGMucHJvdG90eXBlLl9jYWxsYmFja3M9ZnVuY3Rp
        b24oKXtpZighdGhpcy5jYWxsYmFja3Mpe3ZhciBlPXRoaXMub3B0aW9uczt0
        aGlzLmNhbGxiYWNrcz17cmVtb3ZlZEl0ZW06ZS5yZW1vdmVkSXRlbXx8bCxh
        ZGRlZEl0ZW06ZS5hZGRlZEl0ZW18fGx9fXJldHVybiB0aGlzLmNhbGxiYWNr
        c30sYy5wcm90b3R5cGUuX2hhc0luc3RhbmNlTWV0YT1mdW5jdGlvbihlLHQp
        e3ZhciByPW0oZSksbj1yKyI6Iit0O3JldHVybiEhdGhpcy5faW5zdGFuY2VN
        ZXRhc1tuXX0sYy5wcm90b3R5cGUuX2luc3RhbmNlTWV0YT1mdW5jdGlvbihl
        LHIpe3ZhciBuPW0oZSksaT1uKyI6IityLG89dGhpcy5faW5zdGFuY2VNZXRh
        c1tpXTtyZXR1cm4gb3x8KG89dGhpcy5faW5zdGFuY2VNZXRhc1tpXT1uZXcg
        dShlLHIsdGhpcy5pbml0aWFsVmFsdWUoKSksby5kZXBlbmRlbnRBcnJheXNP
        YnNlcnZlcj1uZXcgdCh0aGlzLl9jYWxsYmFja3MoKSx0aGlzLG8sZSxyLG8u
        c3VnYXJNZXRhKSksb30sYy5wcm90b3R5cGUuaW5pdGlhbFZhbHVlPWZ1bmN0
        aW9uKCl7cmV0dXJuImZ1bmN0aW9uIj09dHlwZW9mIHRoaXMub3B0aW9ucy5p
        bml0aWFsVmFsdWU/dGhpcy5vcHRpb25zLmluaXRpYWxWYWx1ZSgpOnRoaXMu
        b3B0aW9ucy5pbml0aWFsVmFsdWV9LGMucHJvdG90eXBlLnJlc2V0VmFsdWU9
        ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbml0aWFsVmFsdWUoKX0sYy5wcm90
        b3R5cGUuaXRlbVByb3BlcnR5S2V5PWZ1bmN0aW9uKGUsdCl7dGhpcy5faXRl
        bVByb3BlcnR5S2V5c1tlXT10aGlzLl9pdGVtUHJvcGVydHlLZXlzW2VdfHxb
        XSx0aGlzLl9pdGVtUHJvcGVydHlLZXlzW2VdLnB1c2godCl9LGMucHJvdG90
        eXBlLmNsZWFySXRlbVByb3BlcnR5S2V5cz1mdW5jdGlvbihlKXt0aGlzLl9p
        dGVtUHJvcGVydHlLZXlzW2VdJiYodGhpcy5fcHJldmlvdXNJdGVtUHJvcGVy
        dHlLZXlzW2VdPXRoaXMuX2l0ZW1Qcm9wZXJ0eUtleXNbZV0sdGhpcy5faXRl
        bVByb3BlcnR5S2V5c1tlXT1bXSl9LGMucHJvdG90eXBlLnByb3BlcnR5PWZ1
        bmN0aW9uKCl7dmFyIGUsdCxyLG49dGhpcyxpPSh3LmNhbGwoYXJndW1lbnRz
        KSxuZXcgRW1iZXIuU2V0KTtyZXR1cm4gQyh3LmNhbGwoYXJndW1lbnRzKSxm
        dW5jdGlvbihvKXtpZihBLnRlc3QobykpdGhyb3cgbmV3IEVtYmVyLkVycm9y
        KCJOZXN0ZWQgQGVhY2ggcHJvcGVydGllcyBub3Qgc3VwcG9ydGVkOiAiK28p
        OyhlPU8uZXhlYyhvKSk/KHQ9ZVsxXSxyPWVbMl0sbi5pdGVtUHJvcGVydHlL
        ZXkodCxyKSxpLmFkZCh0KSk6aS5hZGQobyl9KSx5LnByb3RvdHlwZS5wcm9w
        ZXJ0eS5hcHBseSh0aGlzLGkudG9BcnJheSgpKX0sRW1iZXIucmVkdWNlQ29t
        cHV0ZWQ9ZnVuY3Rpb24oZSl7dmFyIHQ7aWYoYXJndW1lbnRzLmxlbmd0aD4x
        JiYodD13LmNhbGwoYXJndW1lbnRzLDAsLTEpLGU9dy5jYWxsKGFyZ3VtZW50
        cywtMSlbMF0pLCJvYmplY3QiIT10eXBlb2YgZSl0aHJvdyBuZXcgRW1iZXIu
        RXJyb3IoIlJlZHVjZSBDb21wdXRlZCBQcm9wZXJ0eSBkZWNsYXJlZCB3aXRo
        b3V0IGFuIG9wdGlvbnMgaGFzaCIpO2lmKCEoImluaXRpYWxWYWx1ZSJpbiBl
        KSl0aHJvdyBuZXcgRW1iZXIuRXJyb3IoIlJlZHVjZSBDb21wdXRlZCBQcm9w
        ZXJ0eSBkZWNsYXJlZCB3aXRob3V0IGFuIGluaXRpYWwgdmFsdWUiKTt2YXIg
        cj1uZXcgYyhlKTtyZXR1cm4gdCYmci5wcm9wZXJ0eS5hcHBseShyLHQpLHJ9
        fSgpLGZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe3ZhciBlPXRoaXM7cmV0dXJu
        IHQuYXBwbHkodGhpcyxhcmd1bWVudHMpLHRoaXMuZnVuYz1mdW5jdGlvbih0
        KXtyZXR1cm4gZnVuY3Rpb24ocil7cmV0dXJuIGUuX2hhc0luc3RhbmNlTWV0
        YSh0aGlzLHIpfHxpKGUuX2RlcGVuZGVudEtleXMsZnVuY3Rpb24odCl7RW1i
        ZXIuYWRkT2JzZXJ2ZXIodGhpcyx0LGZ1bmN0aW9uKCl7ZS5yZWNvbXB1dGVP
        bmNlLmNhbGwodGhpcyxyKX0pfSx0aGlzKSx0LmFwcGx5KHRoaXMsYXJndW1l
        bnRzKX19KHRoaXMuZnVuYyksdGhpc312YXIgdD1FbWJlci5SZWR1Y2VDb21w
        dXRlZFByb3BlcnR5LHI9W10uc2xpY2Usbj1FbWJlci5jcmVhdGUsaT1FbWJl
        ci5FbnVtZXJhYmxlVXRpbHMuZm9yRWFjaDtFbWJlci5BcnJheUNvbXB1dGVk
        UHJvcGVydHk9ZSxlLnByb3RvdHlwZT1uKHQucHJvdG90eXBlKSxlLnByb3Rv
        dHlwZS5pbml0aWFsVmFsdWU9ZnVuY3Rpb24oKXtyZXR1cm4gRW1iZXIuQSgp
        fSxlLnByb3RvdHlwZS5yZXNldFZhbHVlPWZ1bmN0aW9uKGUpe3JldHVybiBl
        LmNsZWFyKCksZX0sRW1iZXIuYXJyYXlDb21wdXRlZD1mdW5jdGlvbih0KXt2
        YXIgbjtpZihhcmd1bWVudHMubGVuZ3RoPjEmJihuPXIuY2FsbChhcmd1bWVu
        dHMsMCwtMSksdD1yLmNhbGwoYXJndW1lbnRzLC0xKVswXSksIm9iamVjdCIh
        PXR5cGVvZiB0KXRocm93IG5ldyBFbWJlci5FcnJvcigiQXJyYXkgQ29tcHV0
        ZWQgUHJvcGVydHkgZGVjbGFyZWQgd2l0aG91dCBhbiBvcHRpb25zIGhhc2gi
        KTt2YXIgaT1uZXcgZSh0KTtyZXR1cm4gbiYmaS5wcm9wZXJ0eS5hcHBseShp
        LG4pLGl9fSgpLGZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLG4saSxvKXtmdW5j
        dGlvbiBhKGUpe3JldHVybiBFbWJlci5PYmplY3RQcm94eS5kZXRlY3RJbnN0
        YW5jZShlKT9yKHQoZSwiY29udGVudCIpKTpyKGUpfXZhciBzLHUsYyxsLGg7
        cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg8NCYmKG89dChlLCJsZW5ndGgiKSks
        YXJndW1lbnRzLmxlbmd0aDwzJiYoaT0wKSxpPT09bz9pOihzPWkrTWF0aC5m
        bG9vcigoby1pKS8yKSx1PWUub2JqZWN0QXQocyksbD1hKHUpLGg9YShuKSxs
        PT09aD9zOihjPXRoaXMub3JkZXIodSxuKSwwPT09YyYmKGM9aD5sPy0xOjEp
        LDA+Yz90aGlzLmJpbmFyeVNlYXJjaChlLG4scysxLG8pOmM+MD90aGlzLmJp
        bmFyeVNlYXJjaChlLG4saSxzKTpzKSl9dmFyIHQ9RW1iZXIuZ2V0LHI9KEVt
        YmVyLnNldCxFbWJlci5ndWlkRm9yKSxuPUVtYmVyLm1lcmdlLGk9W10uc2xp
        Y2Usbz1FbWJlci5FbnVtZXJhYmxlVXRpbHMuZm9yRWFjaCxhPUVtYmVyLkVu
        dW1lcmFibGVVdGlscy5tYXA7RW1iZXIuY29tcHV0ZWQubWF4PWZ1bmN0aW9u
        KGUpe3JldHVybiBFbWJlci5yZWR1Y2VDb21wdXRlZC5jYWxsKG51bGwsZSx7
        aW5pdGlhbFZhbHVlOi0xLzAsYWRkZWRJdGVtOmZ1bmN0aW9uKGUsdCl7cmV0
        dXJuIE1hdGgubWF4KGUsdCl9LHJlbW92ZWRJdGVtOmZ1bmN0aW9uKGUsdCl7
        cmV0dXJuIGU+dD9lOnZvaWQgMH19KX0sRW1iZXIuY29tcHV0ZWQubWluPWZ1
        bmN0aW9uKGUpe3JldHVybiBFbWJlci5yZWR1Y2VDb21wdXRlZC5jYWxsKG51
        bGwsZSx7aW5pdGlhbFZhbHVlOjEvMCxhZGRlZEl0ZW06ZnVuY3Rpb24oZSx0
        KXtyZXR1cm4gTWF0aC5taW4oZSx0KX0scmVtb3ZlZEl0ZW06ZnVuY3Rpb24o
        ZSx0KXtyZXR1cm4gdD5lP2U6dm9pZCAwfX0pfSxFbWJlci5jb21wdXRlZC5t
        YXA9ZnVuY3Rpb24oZSx0KXt2YXIgcj17YWRkZWRJdGVtOmZ1bmN0aW9uKGUs
        cixuKXt2YXIgaT10LmNhbGwodGhpcyxyKTtyZXR1cm4gZS5pbnNlcnRBdChu
        LmluZGV4LGkpLGV9LHJlbW92ZWRJdGVtOmZ1bmN0aW9uKGUsdCxyKXtyZXR1
        cm4gZS5yZW1vdmVBdChyLmluZGV4LDEpLGV9fTtyZXR1cm4gRW1iZXIuYXJy
        YXlDb21wdXRlZChlLHIpfSxFbWJlci5jb21wdXRlZC5tYXBCeT1mdW5jdGlv
        bihlLHIpe3ZhciBuPWZ1bmN0aW9uKGUpe3JldHVybiB0KGUscil9O3JldHVy
        biBFbWJlci5jb21wdXRlZC5tYXAoZSsiLkBlYWNoLiIrcixuKX0sRW1iZXIu
        Y29tcHV0ZWQubWFwUHJvcGVydHk9RW1iZXIuY29tcHV0ZWQubWFwQnksRW1i
        ZXIuY29tcHV0ZWQuZmlsdGVyPWZ1bmN0aW9uKGUsdCl7dmFyIHI9e2luaXRp
        YWxpemU6ZnVuY3Rpb24oZSx0LHIpe3IuZmlsdGVyZWRBcnJheUluZGV4ZXM9
        bmV3IEVtYmVyLlN1YkFycmF5fSxhZGRlZEl0ZW06ZnVuY3Rpb24oZSxyLG4s
        aSl7dmFyIG89ISF0LmNhbGwodGhpcyxyKSxhPWkuZmlsdGVyZWRBcnJheUlu
        ZGV4ZXMuYWRkSXRlbShuLmluZGV4LG8pO3JldHVybiBvJiZlLmluc2VydEF0
        KGEsciksZX0scmVtb3ZlZEl0ZW06ZnVuY3Rpb24oZSx0LHIsbil7dmFyIGk9
        bi5maWx0ZXJlZEFycmF5SW5kZXhlcy5yZW1vdmVJdGVtKHIuaW5kZXgpO3Jl
        dHVybiBpPi0xJiZlLnJlbW92ZUF0KGkpLGV9fTtyZXR1cm4gRW1iZXIuYXJy
        YXlDb21wdXRlZChlLHIpfSxFbWJlci5jb21wdXRlZC5maWx0ZXJCeT1mdW5j
        dGlvbihlLHIsbil7dmFyIGk7cmV0dXJuIGk9Mj09PWFyZ3VtZW50cy5sZW5n
        dGg/ZnVuY3Rpb24oZSl7cmV0dXJuIHQoZSxyKX06ZnVuY3Rpb24oZSl7cmV0
        dXJuIHQoZSxyKT09PW59LEVtYmVyLmNvbXB1dGVkLmZpbHRlcihlKyIuQGVh
        Y2guIityLGkpfSxFbWJlci5jb21wdXRlZC5maWx0ZXJQcm9wZXJ0eT1FbWJl
        ci5jb21wdXRlZC5maWx0ZXJCeSxFbWJlci5jb21wdXRlZC51bmlxPWZ1bmN0
        aW9uKCl7dmFyIGU9aS5jYWxsKGFyZ3VtZW50cyk7cmV0dXJuIGUucHVzaCh7
        aW5pdGlhbGl6ZTpmdW5jdGlvbihlLHQscil7ci5pdGVtQ291bnRzPXt9fSxh
        ZGRlZEl0ZW06ZnVuY3Rpb24oZSx0LG4saSl7dmFyIG89cih0KTtyZXR1cm4g
        aS5pdGVtQ291bnRzW29dPysraS5pdGVtQ291bnRzW29dOmkuaXRlbUNvdW50
        c1tvXT0xLGUuYWRkT2JqZWN0KHQpLGV9LHJlbW92ZWRJdGVtOmZ1bmN0aW9u
        KGUsdCxuLGkpe3ZhciBvPXIodCksYT1pLml0ZW1Db3VudHM7cmV0dXJuIDA9
        PT0tLWFbb10mJmUucmVtb3ZlT2JqZWN0KHQpLGV9fSksRW1iZXIuYXJyYXlD
        b21wdXRlZC5hcHBseShudWxsLGUpfSxFbWJlci5jb21wdXRlZC51bmlvbj1F
        bWJlci5jb21wdXRlZC51bmlxLEVtYmVyLmNvbXB1dGVkLmludGVyc2VjdD1m
        dW5jdGlvbigpe3ZhciBlPWZ1bmN0aW9uKGUpe3JldHVybiBhKGUucHJvcGVy
        dHkuX2RlcGVuZGVudEtleXMsZnVuY3Rpb24oZSl7cmV0dXJuIHIoZSl9KX0s
        dD1pLmNhbGwoYXJndW1lbnRzKTtyZXR1cm4gdC5wdXNoKHtpbml0aWFsaXpl
        OmZ1bmN0aW9uKGUsdCxyKXtyLml0ZW1Db3VudHM9e319LGFkZGVkSXRlbTpm
        dW5jdGlvbih0LG4saSxvKXt2YXIgYT1yKG4pLHM9KGUoaSkscihpLmFycmF5
        Q2hhbmdlZCkpLHU9aS5wcm9wZXJ0eS5fZGVwZW5kZW50S2V5cy5sZW5ndGgs
        Yz1vLml0ZW1Db3VudHM7cmV0dXJuIGNbYV18fChjW2FdPXt9KSx2b2lkIDA9
        PT1jW2FdW3NdJiYoY1thXVtzXT0wKSwxPT09KytjW2FdW3NdJiZ1PT09RW1i
        ZXIua2V5cyhjW2FdKS5sZW5ndGgmJnQuYWRkT2JqZWN0KG4pLHR9LHJlbW92
        ZWRJdGVtOmZ1bmN0aW9uKHQsbixpLG8pe3ZhciBhLHM9cihuKSx1PShlKGkp
        LHIoaS5hcnJheUNoYW5nZWQpKSxjPShpLnByb3BlcnR5Ll9kZXBlbmRlbnRL
        ZXlzLmxlbmd0aCxvLml0ZW1Db3VudHMpO3JldHVybiB2b2lkIDA9PT1jW3Nd
        W3VdJiYoY1tzXVt1XT0wKSwwPT09LS1jW3NdW3VdJiYoZGVsZXRlIGNbc11b
        dV0sYT1FbWJlci5rZXlzKGNbc10pLmxlbmd0aCwwPT09YSYmZGVsZXRlIGNb
        c10sdC5yZW1vdmVPYmplY3QobikpLHR9fSksRW1iZXIuYXJyYXlDb21wdXRl
        ZC5hcHBseShudWxsLHQpfSxFbWJlci5jb21wdXRlZC5zZXREaWZmPWZ1bmN0
        aW9uKGUscil7aWYoMiE9PWFyZ3VtZW50cy5sZW5ndGgpdGhyb3cgbmV3IEVt
        YmVyLkVycm9yKCJzZXREaWZmIHJlcXVpcmVzIGV4YWN0bHkgdHdvIGRlcGVu
        ZGVudCBhcnJheXMuIik7cmV0dXJuIEVtYmVyLmFycmF5Q29tcHV0ZWQuY2Fs
        bChudWxsLGUscix7YWRkZWRJdGVtOmZ1bmN0aW9uKG4saSxvKXt2YXIgYT10
        KHRoaXMsZSkscz10KHRoaXMscik7cmV0dXJuIG8uYXJyYXlDaGFuZ2VkPT09
        YT9zLmNvbnRhaW5zKGkpfHxuLmFkZE9iamVjdChpKTpuLnJlbW92ZU9iamVj
        dChpKSxufSxyZW1vdmVkSXRlbTpmdW5jdGlvbihuLGksbyl7dmFyIGE9dCh0
        aGlzLGUpLHM9dCh0aGlzLHIpO3JldHVybiBvLmFycmF5Q2hhbmdlZD09PXM/
        YS5jb250YWlucyhpKSYmbi5hZGRPYmplY3QoaSk6bi5yZW1vdmVPYmplY3Qo
        aSksbn19KX0sRW1iZXIuY29tcHV0ZWQuc29ydD1mdW5jdGlvbihyLGkpe3Zh
        ciBhLHM7cmV0dXJuImZ1bmN0aW9uIj09dHlwZW9mIGk/YT1mdW5jdGlvbih0
        LHIsbil7bi5vcmRlcj1pLG4uYmluYXJ5U2VhcmNoPWV9OihzPWksYT1mdW5j
        dGlvbihuLGksYSl7ZnVuY3Rpb24gdSgpe3ZhciBlLG4sdSxsPXQodGhpcyxz
        KSxoPWEuc29ydFByb3BlcnRpZXM9W10sbT1hLnNvcnRQcm9wZXJ0eUFzY2Vu
        ZGluZz17fTtpLnByb3BlcnR5LmNsZWFySXRlbVByb3BlcnR5S2V5cyhyKSxv
        KGwsZnVuY3Rpb24odCl7LTEhPT0obj10LmluZGV4T2YoIjoiKSk/KGU9dC5z
        dWJzdHJpbmcoMCxuKSx1PSJkZXNjIiE9PXQuc3Vic3RyaW5nKG4rMSkudG9M
        b3dlckNhc2UoKSk6KGU9dCx1PSEwKSxoLnB1c2goZSksbVtlXT11LGkucHJv
        cGVydHkuaXRlbVByb3BlcnR5S2V5KHIsZSl9KSxsLmFkZE9ic2VydmVyKCJA
        ZWFjaCIsdGhpcyxjKX1mdW5jdGlvbiBjKCl7RW1iZXIucnVuLm9uY2UodGhp
        cyxsLGkucHJvcGVydHlOYW1lKX1mdW5jdGlvbiBsKGUpe3UuY2FsbCh0aGlz
        KSxpLnByb3BlcnR5LnJlY29tcHV0ZU9uY2UuY2FsbCh0aGlzLGUpfUVtYmVy
        LmFkZE9ic2VydmVyKHRoaXMscyxjKSx1LmNhbGwodGhpcyksYS5vcmRlcj1m
        dW5jdGlvbihlLHIpe2Zvcih2YXIgbixpLG8sYT0wO2E8dGhpcy5zb3J0UHJv
        cGVydGllcy5sZW5ndGg7KythKWlmKG49dGhpcy5zb3J0UHJvcGVydGllc1th
        XSxpPUVtYmVyLmNvbXBhcmUodChlLG4pLHQocixuKSksMCE9PWkpcmV0dXJu
        IG89dGhpcy5zb3J0UHJvcGVydHlBc2NlbmRpbmdbbl0sbz9pOi0xKmk7cmV0
        dXJuIDB9LGEuYmluYXJ5U2VhcmNoPWV9KSxFbWJlci5hcnJheUNvbXB1dGVk
        LmNhbGwobnVsbCxyLHtpbml0aWFsaXplOmEsYWRkZWRJdGVtOmZ1bmN0aW9u
        KGUsdCxyLG4pe3ZhciBpPW4uYmluYXJ5U2VhcmNoKGUsdCk7cmV0dXJuIGUu
        aW5zZXJ0QXQoaSx0KSxlfSxyZW1vdmVkSXRlbTpmdW5jdGlvbihlLHQscixp
        KXt2YXIgbyxhLHM7cmV0dXJuIHIucHJldmlvdXNWYWx1ZXM/KG89bih7Y29u
        dGVudDp0fSxyLnByZXZpb3VzVmFsdWVzKSxzPUVtYmVyLk9iamVjdFByb3h5
        LmNyZWF0ZShvKSk6cz10LGE9aS5iaW5hcnlTZWFyY2goZSxzKSxlLnJlbW92
        ZUF0KGEpLGV9fSl9fSgpLGZ1bmN0aW9uKCl7RW1iZXIuUlNWUD10KCJyc3Zw
        Iil9KCksZnVuY3Rpb24oKXt2YXIgZT0vWyBfXS9nLHQ9e30scj0vKFthLXpc
        ZF0pKFtBLVpdKS9nLG49LyhcLXxffFwufFxzKSsoLik/L2csaT0vKFthLXpc
        ZF0pKFtBLVpdKykvZyxvPS9cLXxccysvZztFbWJlci5TVFJJTkdTPXt9LEVt
        YmVyLlN0cmluZz17Zm10OmZ1bmN0aW9uKGUsdCl7dmFyIHI9MDtyZXR1cm4g
        ZS5yZXBsYWNlKC8lQChbMC05XSspPy9nLGZ1bmN0aW9uKGUsbil7cmV0dXJu
        IG49bj9wYXJzZUludChuLDEwKS0xOnIrKyxlPXRbbl0sbnVsbD09PWU/Iihu
        dWxsKSI6dm9pZCAwPT09ZT8iIjpFbWJlci5pbnNwZWN0KGUpfSl9LGxvYzpm
        dW5jdGlvbihlLHQpe3JldHVybiBlPUVtYmVyLlNUUklOR1NbZV18fGUsRW1i
        ZXIuU3RyaW5nLmZtdChlLHQpfSx3OmZ1bmN0aW9uKGUpe3JldHVybiBlLnNw
        bGl0KC9ccysvKX0sZGVjYW1lbGl6ZTpmdW5jdGlvbihlKXtyZXR1cm4gZS5y
        ZXBsYWNlKHIsIiQxXyQyIikudG9Mb3dlckNhc2UoKX0sZGFzaGVyaXplOmZ1
        bmN0aW9uKHIpe3ZhciBuLGk9dCxvPWkuaGFzT3duUHJvcGVydHkocik7cmV0
        dXJuIG8/aVtyXToobj1FbWJlci5TdHJpbmcuZGVjYW1lbGl6ZShyKS5yZXBs
        YWNlKGUsIi0iKSxpW3JdPW4sbil9LGNhbWVsaXplOmZ1bmN0aW9uKGUpe3Jl
        dHVybiBlLnJlcGxhY2UobixmdW5jdGlvbihlLHQscil7cmV0dXJuIHI/ci50
        b1VwcGVyQ2FzZSgpOiIifSkucmVwbGFjZSgvXihbQS1aXSkvLGZ1bmN0aW9u
        KGUpe3JldHVybiBlLnRvTG93ZXJDYXNlKCl9KX0sY2xhc3NpZnk6ZnVuY3Rp
        b24oZSl7Zm9yKHZhciB0PWUuc3BsaXQoIi4iKSxyPVtdLG49MCxpPXQubGVu
        Z3RoO2k+bjtuKyspe3ZhciBvPUVtYmVyLlN0cmluZy5jYW1lbGl6ZSh0W25d
        KTtyLnB1c2goby5jaGFyQXQoMCkudG9VcHBlckNhc2UoKStvLnN1YnN0cigx
        KSl9cmV0dXJuIHIuam9pbigiLiIpfSx1bmRlcnNjb3JlOmZ1bmN0aW9uKGUp
        e3JldHVybiBlLnJlcGxhY2UoaSwiJDFfJDIiKS5yZXBsYWNlKG8sIl8iKS50
        b0xvd2VyQ2FzZSgpfSxjYXBpdGFsaXplOmZ1bmN0aW9uKGUpe3JldHVybiBl
        LmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpK2Uuc3Vic3RyKDEpfX19KCksZnVu
        Y3Rpb24oKXt2YXIgZT1FbWJlci5TdHJpbmcuZm10LHQ9RW1iZXIuU3RyaW5n
        Lncscj1FbWJlci5TdHJpbmcubG9jLG49RW1iZXIuU3RyaW5nLmNhbWVsaXpl
        LGk9RW1iZXIuU3RyaW5nLmRlY2FtZWxpemUsbz1FbWJlci5TdHJpbmcuZGFz
        aGVyaXplLGE9RW1iZXIuU3RyaW5nLnVuZGVyc2NvcmUscz1FbWJlci5TdHJp
        bmcuY2FwaXRhbGl6ZSx1PUVtYmVyLlN0cmluZy5jbGFzc2lmeTsoRW1iZXIu
        RVhURU5EX1BST1RPVFlQRVM9PT0hMHx8RW1iZXIuRVhURU5EX1BST1RPVFlQ
        RVMuU3RyaW5nKSYmKFN0cmluZy5wcm90b3R5cGUuZm10PWZ1bmN0aW9uKCl7
        cmV0dXJuIGUodGhpcyxhcmd1bWVudHMpfSxTdHJpbmcucHJvdG90eXBlLnc9
        ZnVuY3Rpb24oKXtyZXR1cm4gdCh0aGlzKX0sU3RyaW5nLnByb3RvdHlwZS5s
        b2M9ZnVuY3Rpb24oKXtyZXR1cm4gcih0aGlzLGFyZ3VtZW50cyl9LFN0cmlu
        Zy5wcm90b3R5cGUuY2FtZWxpemU9ZnVuY3Rpb24oKXtyZXR1cm4gbih0aGlz
        KX0sU3RyaW5nLnByb3RvdHlwZS5kZWNhbWVsaXplPWZ1bmN0aW9uKCl7cmV0
        dXJuIGkodGhpcyl9LFN0cmluZy5wcm90b3R5cGUuZGFzaGVyaXplPWZ1bmN0
        aW9uKCl7cmV0dXJuIG8odGhpcyl9LFN0cmluZy5wcm90b3R5cGUudW5kZXJz
        Y29yZT1mdW5jdGlvbigpe3JldHVybiBhKHRoaXMpfSxTdHJpbmcucHJvdG90
        eXBlLmNsYXNzaWZ5PWZ1bmN0aW9uKCl7cmV0dXJuIHUodGhpcyl9LFN0cmlu
        Zy5wcm90b3R5cGUuY2FwaXRhbGl6ZT1mdW5jdGlvbigpe3JldHVybiBzKHRo
        aXMpfSl9KCksZnVuY3Rpb24oKXt2YXIgZT1BcnJheS5wcm90b3R5cGUuc2xp
        Y2U7KEVtYmVyLkVYVEVORF9QUk9UT1RZUEVTPT09ITB8fEVtYmVyLkVYVEVO
        RF9QUk9UT1RZUEVTLkZ1bmN0aW9uKSYmKEZ1bmN0aW9uLnByb3RvdHlwZS5w
        cm9wZXJ0eT1mdW5jdGlvbigpe3ZhciBlPUVtYmVyLmNvbXB1dGVkKHRoaXMp
        O3JldHVybiBlLnByb3BlcnR5LmFwcGx5KGUsYXJndW1lbnRzKX0sRnVuY3Rp
        b24ucHJvdG90eXBlLm9ic2VydmVzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMu
        X19lbWJlcl9vYnNlcnZlc19fPWUuY2FsbChhcmd1bWVudHMpLHRoaXN9LEZ1
        bmN0aW9uLnByb3RvdHlwZS5vYnNlcnZlc0ltbWVkaWF0ZWx5PWZ1bmN0aW9u
        KCl7Zm9yKHZhciBlPTAsdD1hcmd1bWVudHMubGVuZ3RoO3Q+ZTtlKyspYXJn
        dW1lbnRzW2VdO3JldHVybiB0aGlzLm9ic2VydmVzLmFwcGx5KHRoaXMsYXJn
        dW1lbnRzKX0sRnVuY3Rpb24ucHJvdG90eXBlLm9ic2VydmVzQmVmb3JlPWZ1
        bmN0aW9uKCl7cmV0dXJuIHRoaXMuX19lbWJlcl9vYnNlcnZlc0JlZm9yZV9f
        PWUuY2FsbChhcmd1bWVudHMpLHRoaXN9LEZ1bmN0aW9uLnByb3RvdHlwZS5v
        bj1mdW5jdGlvbigpe3ZhciB0PWUuY2FsbChhcmd1bWVudHMpO3JldHVybiB0
        aGlzLl9fZW1iZXJfbGlzdGVuc19fPXQsdGhpc30pfSgpLGZ1bmN0aW9uKCl7
        RW1iZXIuQ29tcGFyYWJsZT1FbWJlci5NaXhpbi5jcmVhdGUoe2NvbXBhcmU6
        RW1iZXIucmVxdWlyZWQoRnVuY3Rpb24pfSl9KCksZnVuY3Rpb24oKXt2YXIg
        ZT1FbWJlci5nZXQ7RW1iZXIuc2V0LEVtYmVyLkNvcHlhYmxlPUVtYmVyLk1p
        eGluLmNyZWF0ZSh7Y29weTpFbWJlci5yZXF1aXJlZChGdW5jdGlvbiksZnJv
        emVuQ29weTpmdW5jdGlvbigpe2lmKEVtYmVyLkZyZWV6YWJsZSYmRW1iZXIu
        RnJlZXphYmxlLmRldGVjdCh0aGlzKSlyZXR1cm4gZSh0aGlzLCJpc0Zyb3pl
        biIpP3RoaXM6dGhpcy5jb3B5KCkuZnJlZXplKCk7dGhyb3cgbmV3IEVtYmVy
        LkVycm9yKEVtYmVyLlN0cmluZy5mbXQoIiVAIGRvZXMgbm90IHN1cHBvcnQg
        ZnJlZXppbmciLFt0aGlzXSkpfX0pfSgpLGZ1bmN0aW9uKCl7dmFyIGU9RW1i
        ZXIuZ2V0LHQ9RW1iZXIuc2V0O0VtYmVyLkZyZWV6YWJsZT1FbWJlci5NaXhp
        bi5jcmVhdGUoe2lzRnJvemVuOiExLGZyZWV6ZTpmdW5jdGlvbigpe3JldHVy
        biBlKHRoaXMsImlzRnJvemVuIik/dGhpczoodCh0aGlzLCJpc0Zyb3plbiIs
        ITApLHRoaXMpfX0pLEVtYmVyLkZST1pFTl9FUlJPUj0iRnJvemVuIG9iamVj
        dCBjYW5ub3QgYmUgbW9kaWZpZWQuIn0oKSxmdW5jdGlvbigpe3ZhciBlPUVt
        YmVyLkVudW1lcmFibGVVdGlscy5mb3JFYWNoO0VtYmVyLk11dGFibGVFbnVt
        ZXJhYmxlPUVtYmVyLk1peGluLmNyZWF0ZShFbWJlci5FbnVtZXJhYmxlLHth
        ZGRPYmplY3Q6RW1iZXIucmVxdWlyZWQoRnVuY3Rpb24pLGFkZE9iamVjdHM6
        ZnVuY3Rpb24odCl7cmV0dXJuIEVtYmVyLmJlZ2luUHJvcGVydHlDaGFuZ2Vz
        KHRoaXMpLGUodCxmdW5jdGlvbihlKXt0aGlzLmFkZE9iamVjdChlKX0sdGhp
        cyksRW1iZXIuZW5kUHJvcGVydHlDaGFuZ2VzKHRoaXMpLHRoaXN9LHJlbW92
        ZU9iamVjdDpFbWJlci5yZXF1aXJlZChGdW5jdGlvbikscmVtb3ZlT2JqZWN0
        czpmdW5jdGlvbih0KXtyZXR1cm4gRW1iZXIuYmVnaW5Qcm9wZXJ0eUNoYW5n
        ZXModGhpcyksZSh0LGZ1bmN0aW9uKGUpe3RoaXMucmVtb3ZlT2JqZWN0KGUp
        fSx0aGlzKSxFbWJlci5lbmRQcm9wZXJ0eUNoYW5nZXModGhpcyksdGhpc319
        KX0oKSxmdW5jdGlvbigpe3ZhciBlPSJJbmRleCBvdXQgb2YgcmFuZ2UiLHQ9
        W10scj1FbWJlci5nZXQ7RW1iZXIuc2V0LEVtYmVyLk11dGFibGVBcnJheT1F
        bWJlci5NaXhpbi5jcmVhdGUoRW1iZXIuQXJyYXksRW1iZXIuTXV0YWJsZUVu
        dW1lcmFibGUse3JlcGxhY2U6RW1iZXIucmVxdWlyZWQoKSxjbGVhcjpmdW5j
        dGlvbigpe3ZhciBlPXIodGhpcywibGVuZ3RoIik7cmV0dXJuIDA9PT1lP3Ro
        aXM6KHRoaXMucmVwbGFjZSgwLGUsdCksdGhpcyl9LGluc2VydEF0OmZ1bmN0
        aW9uKHQsbil7aWYodD5yKHRoaXMsImxlbmd0aCIpKXRocm93IG5ldyBFbWJl
        ci5FcnJvcihlKTtyZXR1cm4gdGhpcy5yZXBsYWNlKHQsMCxbbl0pLHRoaXN9
        LHJlbW92ZUF0OmZ1bmN0aW9uKG4saSl7aWYoIm51bWJlciI9PXR5cGVvZiBu
        KXtpZigwPm58fG4+PXIodGhpcywibGVuZ3RoIikpdGhyb3cgbmV3IEVtYmVy
        LkVycm9yKGUpO3ZvaWQgMD09PWkmJihpPTEpLHRoaXMucmVwbGFjZShuLGks
        dCl9cmV0dXJuIHRoaXN9LHB1c2hPYmplY3Q6ZnVuY3Rpb24oZSl7cmV0dXJu
        IHRoaXMuaW5zZXJ0QXQocih0aGlzLCJsZW5ndGgiKSxlKSxlfSxwdXNoT2Jq
        ZWN0czpmdW5jdGlvbihlKXtpZighRW1iZXIuRW51bWVyYWJsZS5kZXRlY3Qo
        ZSkmJiFFbWJlci5pc0FycmF5KGUpKXRocm93IG5ldyBUeXBlRXJyb3IoIk11
        c3QgcGFzcyBFbWJlci5FbnVtZXJhYmxlIHRvIEVtYmVyLk11dGFibGVBcnJh
        eSNwdXNoT2JqZWN0cyIpO3JldHVybiB0aGlzLnJlcGxhY2Uocih0aGlzLCJs
        ZW5ndGgiKSwwLGUpLHRoaXN9LHBvcE9iamVjdDpmdW5jdGlvbigpe3ZhciBl
        PXIodGhpcywibGVuZ3RoIik7aWYoMD09PWUpcmV0dXJuIG51bGw7dmFyIHQ9
        dGhpcy5vYmplY3RBdChlLTEpO3JldHVybiB0aGlzLnJlbW92ZUF0KGUtMSwx
        KSx0fSxzaGlmdE9iamVjdDpmdW5jdGlvbigpe2lmKDA9PT1yKHRoaXMsImxl
        bmd0aCIpKXJldHVybiBudWxsO3ZhciBlPXRoaXMub2JqZWN0QXQoMCk7cmV0
        dXJuIHRoaXMucmVtb3ZlQXQoMCksZX0sdW5zaGlmdE9iamVjdDpmdW5jdGlv
        bihlKXtyZXR1cm4gdGhpcy5pbnNlcnRBdCgwLGUpLGV9LHVuc2hpZnRPYmpl
        Y3RzOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnJlcGxhY2UoMCwwLGUpLHRo
        aXN9LHJldmVyc2VPYmplY3RzOmZ1bmN0aW9uKCl7dmFyIGU9cih0aGlzLCJs
        ZW5ndGgiKTtpZigwPT09ZSlyZXR1cm4gdGhpczt2YXIgdD10aGlzLnRvQXJy
        YXkoKS5yZXZlcnNlKCk7cmV0dXJuIHRoaXMucmVwbGFjZSgwLGUsdCksdGhp
        c30sc2V0T2JqZWN0czpmdW5jdGlvbihlKXtpZigwPT09ZS5sZW5ndGgpcmV0
        dXJuIHRoaXMuY2xlYXIoKTt2YXIgdD1yKHRoaXMsImxlbmd0aCIpO3JldHVy
        biB0aGlzLnJlcGxhY2UoMCx0LGUpLHRoaXN9LHJlbW92ZU9iamVjdDpmdW5j
        dGlvbihlKXtmb3IodmFyIHQ9cih0aGlzLCJsZW5ndGgiKXx8MDstLXQ+PTA7
        KXt2YXIgbj10aGlzLm9iamVjdEF0KHQpO249PT1lJiZ0aGlzLnJlbW92ZUF0
        KHQpfXJldHVybiB0aGlzfSxhZGRPYmplY3Q6ZnVuY3Rpb24oZSl7cmV0dXJu
        IHRoaXMuY29udGFpbnMoZSl8fHRoaXMucHVzaE9iamVjdChlKSx0aGlzfX0p
        fSgpLGZ1bmN0aW9uKCl7dmFyIGU9RW1iZXIuZ2V0LHQ9RW1iZXIuc2V0LHI9
        QXJyYXkucHJvdG90eXBlLnNsaWNlLG49RW1iZXIuZ2V0UHJvcGVydGllcztF
        bWJlci5PYnNlcnZhYmxlPUVtYmVyLk1peGluLmNyZWF0ZSh7Z2V0OmZ1bmN0
        aW9uKHQpe3JldHVybiBlKHRoaXMsdCl9LGdldFByb3BlcnRpZXM6ZnVuY3Rp
        b24oKXtyZXR1cm4gbi5hcHBseShudWxsLFt0aGlzXS5jb25jYXQoci5jYWxs
        KGFyZ3VtZW50cykpKX0sc2V0OmZ1bmN0aW9uKGUscil7cmV0dXJuIHQodGhp
        cyxlLHIpLHRoaXN9LHNldFByb3BlcnRpZXM6ZnVuY3Rpb24oZSl7cmV0dXJu
        IEVtYmVyLnNldFByb3BlcnRpZXModGhpcyxlKX0sYmVnaW5Qcm9wZXJ0eUNo
        YW5nZXM6ZnVuY3Rpb24oKXtyZXR1cm4gRW1iZXIuYmVnaW5Qcm9wZXJ0eUNo
        YW5nZXMoKSx0aGlzfSxlbmRQcm9wZXJ0eUNoYW5nZXM6ZnVuY3Rpb24oKXty
        ZXR1cm4gRW1iZXIuZW5kUHJvcGVydHlDaGFuZ2VzKCksdGhpc30scHJvcGVy
        dHlXaWxsQ2hhbmdlOmZ1bmN0aW9uKGUpe3JldHVybiBFbWJlci5wcm9wZXJ0
        eVdpbGxDaGFuZ2UodGhpcyxlKSx0aGlzfSxwcm9wZXJ0eURpZENoYW5nZTpm
        dW5jdGlvbihlKXtyZXR1cm4gRW1iZXIucHJvcGVydHlEaWRDaGFuZ2UodGhp
        cyxlKSx0aGlzfSxub3RpZnlQcm9wZXJ0eUNoYW5nZTpmdW5jdGlvbihlKXty
        ZXR1cm4gdGhpcy5wcm9wZXJ0eVdpbGxDaGFuZ2UoZSksdGhpcy5wcm9wZXJ0
        eURpZENoYW5nZShlKSx0aGlzfSxhZGRCZWZvcmVPYnNlcnZlcjpmdW5jdGlv
        bihlLHQscil7RW1iZXIuYWRkQmVmb3JlT2JzZXJ2ZXIodGhpcyxlLHQscil9
        LGFkZE9ic2VydmVyOmZ1bmN0aW9uKGUsdCxyKXtFbWJlci5hZGRPYnNlcnZl
        cih0aGlzLGUsdCxyKX0scmVtb3ZlT2JzZXJ2ZXI6ZnVuY3Rpb24oZSx0LHIp
        e0VtYmVyLnJlbW92ZU9ic2VydmVyKHRoaXMsZSx0LHIpfSxoYXNPYnNlcnZl
        ckZvcjpmdW5jdGlvbihlKXtyZXR1cm4gRW1iZXIuaGFzTGlzdGVuZXJzKHRo
        aXMsZSsiOmNoYW5nZSIpfSxnZXRXaXRoRGVmYXVsdDpmdW5jdGlvbihlLHQp
        e3JldHVybiBFbWJlci5nZXRXaXRoRGVmYXVsdCh0aGlzLGUsdCl9LGluY3Jl
        bWVudFByb3BlcnR5OmZ1bmN0aW9uKHIsbil7cmV0dXJuIEVtYmVyLmlzTm9u
        ZShuKSYmKG49MSksdCh0aGlzLHIsKGUodGhpcyxyKXx8MCkrbiksZSh0aGlz
        LHIpfSxkZWNyZW1lbnRQcm9wZXJ0eTpmdW5jdGlvbihyLG4pe3JldHVybiBF
        bWJlci5pc05vbmUobikmJihuPTEpLHQodGhpcyxyLChlKHRoaXMscil8fDAp
        LW4pLGUodGhpcyxyKX0sdG9nZ2xlUHJvcGVydHk6ZnVuY3Rpb24ocil7cmV0
        dXJuIHQodGhpcyxyLCFlKHRoaXMscikpLGUodGhpcyxyKX0sY2FjaGVGb3I6
        ZnVuY3Rpb24oZSl7cmV0dXJuIEVtYmVyLmNhY2hlRm9yKHRoaXMsZSl9LG9i
        c2VydmVyc0ZvcktleTpmdW5jdGlvbihlKXtyZXR1cm4gRW1iZXIub2JzZXJ2
        ZXJzRm9yKHRoaXMsZSl9fSl9KCksZnVuY3Rpb24oKXt2YXIgZT1FbWJlci5n
        ZXQ7RW1iZXIuc2V0LEVtYmVyLlRhcmdldEFjdGlvblN1cHBvcnQ9RW1iZXIu
        TWl4aW4uY3JlYXRlKHt0YXJnZXQ6bnVsbCxhY3Rpb246bnVsbCxhY3Rpb25D
        b250ZXh0Om51bGwsdGFyZ2V0T2JqZWN0OkVtYmVyLmNvbXB1dGVkKGZ1bmN0
        aW9uKCl7dmFyIHQ9ZSh0aGlzLCJ0YXJnZXQiKTtpZigic3RyaW5nIj09PUVt
        YmVyLnR5cGVPZih0KSl7dmFyIHI9ZSh0aGlzLHQpO3JldHVybiB2b2lkIDA9
        PT1yJiYocj1lKEVtYmVyLmxvb2t1cCx0KSkscn1yZXR1cm4gdH0pLnByb3Bl
        cnR5KCJ0YXJnZXQiKSxhY3Rpb25Db250ZXh0T2JqZWN0OkVtYmVyLmNvbXB1
        dGVkKGZ1bmN0aW9uKCl7dmFyIHQ9ZSh0aGlzLCJhY3Rpb25Db250ZXh0Iik7
        aWYoInN0cmluZyI9PT1FbWJlci50eXBlT2YodCkpe3ZhciByPWUodGhpcyx0
        KTtyZXR1cm4gdm9pZCAwPT09ciYmKHI9ZShFbWJlci5sb29rdXAsdCkpLHJ9
        cmV0dXJuIHR9KS5wcm9wZXJ0eSgiYWN0aW9uQ29udGV4dCIpLHRyaWdnZXJB
        Y3Rpb246ZnVuY3Rpb24odCl7ZnVuY3Rpb24gcihlLHQpe3ZhciByPVtdO3Jl
        dHVybiB0JiZyLnB1c2godCksci5jb25jYXQoZSl9dD10fHx7fTt2YXIgbj10
        LmFjdGlvbnx8ZSh0aGlzLCJhY3Rpb24iKSxpPXQudGFyZ2V0fHxlKHRoaXMs
        InRhcmdldE9iamVjdCIpLG89dC5hY3Rpb25Db250ZXh0O2lmKCJ1bmRlZmlu
        ZWQiPT10eXBlb2YgbyYmKG89ZSh0aGlzLCJhY3Rpb25Db250ZXh0T2JqZWN0
        Iil8fHRoaXMpLGkmJm4pe3ZhciBhO3JldHVybiBhPWkuc2VuZD9pLnNlbmQu
        YXBwbHkoaSxyKG8sbikpOmlbbl0uYXBwbHkoaSxyKG8pKSxhIT09ITEmJihh
        PSEwKSxhfXJldHVybiExfX0pfSgpLGZ1bmN0aW9uKCl7RW1iZXIuRXZlbnRl
        ZD1FbWJlci5NaXhpbi5jcmVhdGUoe29uOmZ1bmN0aW9uKGUsdCxyKXtyZXR1
        cm4gRW1iZXIuYWRkTGlzdGVuZXIodGhpcyxlLHQsciksdGhpc30sb25lOmZ1
        bmN0aW9uKGUsdCxyKXtyZXR1cm4gcnx8KHI9dCx0PW51bGwpLEVtYmVyLmFk
        ZExpc3RlbmVyKHRoaXMsZSx0LHIsITApLHRoaXN9LHRyaWdnZXI6ZnVuY3Rp
        b24oZSl7dmFyIHQscixuPVtdO2Zvcih0PTEscj1hcmd1bWVudHMubGVuZ3Ro
        O3I+dDt0Kyspbi5wdXNoKGFyZ3VtZW50c1t0XSk7RW1iZXIuc2VuZEV2ZW50
        KHRoaXMsZSxuKX0sb2ZmOmZ1bmN0aW9uKGUsdCxyKXtyZXR1cm4gRW1iZXIu
        cmVtb3ZlTGlzdGVuZXIodGhpcyxlLHQsciksdGhpc30saGFzOmZ1bmN0aW9u
        KGUpe3JldHVybiBFbWJlci5oYXNMaXN0ZW5lcnModGhpcyxlKX19KX0oKSxm
        dW5jdGlvbigpe3ZhciBlPXQoInJzdnAiKTtlLmNvbmZpZ3VyZSgiYXN5bmMi
        LGZ1bmN0aW9uKGUsdCl7RW1iZXIucnVuLnNjaGVkdWxlKCJhY3Rpb25zIix0
        LGUsdCl9KTt2YXIgcj1FbWJlci5nZXQ7RW1iZXIuRGVmZXJyZWRNaXhpbj1F
        bWJlci5NaXhpbi5jcmVhdGUoe3RoZW46ZnVuY3Rpb24oZSx0KXtmdW5jdGlv
        biBuKHQpe3JldHVybiB0PT09bz9lKGEpOmUodCl9dmFyIGksbyxhO3JldHVy
        biBhPXRoaXMsaT1yKHRoaXMsIl9kZWZlcnJlZCIpLG89aS5wcm9taXNlLG8u
        dGhlbihlJiZuLHQpfSxyZXNvbHZlOmZ1bmN0aW9uKGUpe3ZhciB0LG47dD1y
        KHRoaXMsIl9kZWZlcnJlZCIpLG49dC5wcm9taXNlLGU9PT10aGlzP3QucmVz
        b2x2ZShuKTp0LnJlc29sdmUoZSl9LHJlamVjdDpmdW5jdGlvbihlKXtyKHRo
        aXMsIl9kZWZlcnJlZCIpLnJlamVjdChlKX0sX2RlZmVycmVkOkVtYmVyLmNv
        bXB1dGVkKGZ1bmN0aW9uKCl7cmV0dXJuIGUuZGVmZXIoKX0pfSl9KCksZnVu
        Y3Rpb24oKXt2YXIgZT1FbWJlci5nZXQsdD1FbWJlci50eXBlT2Y7RW1iZXIu
        QWN0aW9uSGFuZGxlcj1FbWJlci5NaXhpbi5jcmVhdGUoe21lcmdlZFByb3Bl
        cnRpZXM6WyJfYWN0aW9ucyJdLHdpbGxNZXJnZU1peGluOmZ1bmN0aW9uKGUp
        e3ZhciByO2UuX2FjdGlvbnN8fCgib2JqZWN0Ij09PXQoZS5hY3Rpb25zKT9y
        PSJhY3Rpb25zIjoib2JqZWN0Ij09PXQoZS5ldmVudHMpJiYocj0iZXZlbnRz
        IiksciYmKGUuX2FjdGlvbnM9RW1iZXIubWVyZ2UoZS5fYWN0aW9uc3x8e30s
        ZVtyXSkpLGRlbGV0ZSBlW3JdKX0sc2VuZDpmdW5jdGlvbih0KXt2YXIgcixu
        PVtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpO2lmKHRoaXMuX2FjdGlvbnMm
        JnRoaXMuX2FjdGlvbnNbdF0pe2lmKHRoaXMuX2FjdGlvbnNbdF0uYXBwbHko
        dGhpcyxuKSE9PSEwKXJldHVybn1lbHNlIGlmKHRoaXMuZGVwcmVjYXRlZFNl
        bmQmJnRoaXMuZGVwcmVjYXRlZFNlbmRIYW5kbGVzJiZ0aGlzLmRlcHJlY2F0
        ZWRTZW5kSGFuZGxlcyh0KSYmdGhpcy5kZXByZWNhdGVkU2VuZC5hcHBseSh0
        aGlzLFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzKSkhPT0hMClyZXR1cm47KHI9
        ZSh0aGlzLCJ0YXJnZXQiKSkmJnIuc2VuZC5hcHBseShyLGFyZ3VtZW50cyl9
        fSl9KCksZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUscil7ci50aGVuKGZ1bmN0
        aW9uKHIpe3JldHVybiB0KGUsImlzRnVsZmlsbGVkIiwhMCksdChlLCJjb250
        ZW50IixyKSxyfSxmdW5jdGlvbihyKXt0KGUsImlzUmVqZWN0ZWQiLCEwKSx0
        KGUsInJlYXNvbiIscil9KS5mYWlsKGkpfXZhciB0PUVtYmVyLnNldCxyPUVt
        YmVyLmdldCxuPUVtYmVyLlJTVlAucmVzb2x2ZSxpPUVtYmVyLlJTVlAucmV0
        aHJvdyxvPUVtYmVyLmNvbXB1dGVkLm5vdCxhPUVtYmVyLmNvbXB1dGVkLm9y
        O0VtYmVyLlByb21pc2VQcm94eU1peGluPUVtYmVyLk1peGluLmNyZWF0ZSh7
        cmVhc29uOm51bGwsaXNQZW5kaW5nOm8oImlzU2V0dGxlZCIpLnJlYWRPbmx5
        KCksaXNTZXR0bGVkOmEoImlzUmVqZWN0ZWQiLCJpc0Z1bGZpbGxlZCIpLnJl
        YWRPbmx5KCksaXNSZWplY3RlZDohMSxpc0Z1bGZpbGxlZDohMSxwcm9taXNl
        OkVtYmVyLmNvbXB1dGVkKGZ1bmN0aW9uKHQscil7aWYoMj09PWFyZ3VtZW50
        cy5sZW5ndGgpcmV0dXJuIHI9bihyKSxlKHRoaXMscikscjt0aHJvdyBuZXcg
        RW1iZXIuRXJyb3IoIlByb21pc2VQcm94eSdzIHByb21pc2UgbXVzdCBiZSBz
        ZXQiKX0pLHRoZW46ZnVuY3Rpb24oZSx0KXtyZXR1cm4gcih0aGlzLCJwcm9t
        aXNlIikudGhlbihlLHQpfX0pfSgpLGZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShl
        LHQscil7dGhpcy50eXBlPWUsdGhpcy5jb3VudD10LHRoaXMuaXRlbXM9cn1m
        dW5jdGlvbiB0KGUsdCxyLG4pe3RoaXMub3BlcmF0aW9uPWUsdGhpcy5pbmRl
        eD10LHRoaXMuc3BsaXQ9cix0aGlzLnJhbmdlU3RhcnQ9bn12YXIgcj1FbWJl
        ci5nZXQsbj1FbWJlci5FbnVtZXJhYmxlVXRpbHMuZm9yRWFjaCxpPSJyIixv
        PSJpIixhPSJkIjtFbWJlci5UcmFja2VkQXJyYXk9ZnVuY3Rpb24odCl7YXJn
        dW1lbnRzLmxlbmd0aDwxJiYodD1bXSk7dmFyIG49cih0LCJsZW5ndGgiKTt0
        aGlzLl9vcGVyYXRpb25zPW4/W25ldyBlKGksbix0KV06W119LEVtYmVyLlRy
        YWNrZWRBcnJheS5SRVRBSU49aSxFbWJlci5UcmFja2VkQXJyYXkuSU5TRVJU
        PW8sRW1iZXIuVHJhY2tlZEFycmF5LkRFTEVURT1hLEVtYmVyLlRyYWNrZWRB
        cnJheS5wcm90b3R5cGU9e2FkZEl0ZW1zOmZ1bmN0aW9uKHQsbil7dmFyIGk9
        cihuLCJsZW5ndGgiKTtpZighKDE+aSkpe3ZhciBhLHMsdT10aGlzLl9maW5k
        QXJyYXlPcGVyYXRpb24odCksYz11Lm9wZXJhdGlvbixsPXUuaW5kZXgsaD11
        LnJhbmdlU3RhcnQ7cz1uZXcgZShvLGksbiksYz91LnNwbGl0Pyh0aGlzLl9z
        cGxpdChsLHQtaCxzKSxhPWwrMSk6KHRoaXMuX29wZXJhdGlvbnMuc3BsaWNl
        KGwsMCxzKSxhPWwpOih0aGlzLl9vcGVyYXRpb25zLnB1c2gocyksYT1sKSx0
        aGlzLl9jb21wb3NlSW5zZXJ0KGEpfX0scmVtb3ZlSXRlbXM6ZnVuY3Rpb24o
        dCxyKXtpZighKDE+cikpe3ZhciBuLGksbz10aGlzLl9maW5kQXJyYXlPcGVy
        YXRpb24odCkscz0oby5vcGVyYXRpb24sby5pbmRleCksdT1vLnJhbmdlU3Rh
        cnQ7cmV0dXJuIG49bmV3IGUoYSxyKSxvLnNwbGl0Pyh0aGlzLl9zcGxpdChz
        LHQtdSxuKSxpPXMrMSk6KHRoaXMuX29wZXJhdGlvbnMuc3BsaWNlKHMsMCxu
        KSxpPXMpLHRoaXMuX2NvbXBvc2VEZWxldGUoaSl9fSxhcHBseTpmdW5jdGlv
        bih0KXt2YXIgcj1bXSxvPTA7bih0aGlzLl9vcGVyYXRpb25zLGZ1bmN0aW9u
        KGUpe3QoZS5pdGVtcyxvLGUudHlwZSksZS50eXBlIT09YSYmKG8rPWUuY291
        bnQscj1yLmNvbmNhdChlLml0ZW1zKSl9KSx0aGlzLl9vcGVyYXRpb25zPVtu
        ZXcgZShpLHIubGVuZ3RoLHIpXX0sX2ZpbmRBcnJheU9wZXJhdGlvbjpmdW5j
        dGlvbihlKXt2YXIgcixuLGksbyxzLHU9ITE7Zm9yKHI9bz0wLG49dGhpcy5f
        b3BlcmF0aW9ucy5sZW5ndGg7bj5yOysrcilpZihpPXRoaXMuX29wZXJhdGlv
        bnNbcl0saS50eXBlIT09YSl7aWYocz1vK2kuY291bnQtMSxlPT09bylicmVh
        aztpZihlPm8mJnM+PWUpe3U9ITA7YnJlYWt9bz1zKzF9cmV0dXJuIG5ldyB0
        KGkscix1LG8pfSxfc3BsaXQ6ZnVuY3Rpb24odCxyLG4pe3ZhciBpPXRoaXMu
        X29wZXJhdGlvbnNbdF0sbz1pLml0ZW1zLnNsaWNlKHIpLGE9bmV3IGUoaS50
        eXBlLG8ubGVuZ3RoLG8pO2kuY291bnQ9cixpLml0ZW1zPWkuaXRlbXMuc2xp
        Y2UoMCxyKSx0aGlzLl9vcGVyYXRpb25zLnNwbGljZSh0KzEsMCxuLGEpfSxf
        Y29tcG9zZUluc2VydDpmdW5jdGlvbihlKXt2YXIgdD10aGlzLl9vcGVyYXRp
        b25zW2VdLHI9dGhpcy5fb3BlcmF0aW9uc1tlLTFdLG49dGhpcy5fb3BlcmF0
        aW9uc1tlKzFdLGk9ciYmci50eXBlLGE9biYmbi50eXBlO2k9PT1vPyhyLmNv
        dW50Kz10LmNvdW50LHIuaXRlbXM9ci5pdGVtcy5jb25jYXQodC5pdGVtcyks
        YT09PW8/KHIuY291bnQrPW4uY291bnQsci5pdGVtcz1yLml0ZW1zLmNvbmNh
        dChuLml0ZW1zKSx0aGlzLl9vcGVyYXRpb25zLnNwbGljZShlLDIpKTp0aGlz
        Ll9vcGVyYXRpb25zLnNwbGljZShlLDEpKTphPT09byYmKHQuY291bnQrPW4u
        Y291bnQsdC5pdGVtcz10Lml0ZW1zLmNvbmNhdChuLml0ZW1zKSx0aGlzLl9v
        cGVyYXRpb25zLnNwbGljZShlKzEsMSkpfSxfY29tcG9zZURlbGV0ZTpmdW5j
        dGlvbihlKXt2YXIgdCxyLG4saT10aGlzLl9vcGVyYXRpb25zW2VdLHM9aS5j
        b3VudCx1PXRoaXMuX29wZXJhdGlvbnNbZS0xXSxjPXUmJnUudHlwZSxsPSEx
        LGg9W107Yz09PWEmJihpPXUsZS09MSk7Zm9yKHZhciBtPWUrMTtzPjA7Kytt
        KXQ9dGhpcy5fb3BlcmF0aW9uc1ttXSxyPXQudHlwZSxuPXQuY291bnQsciE9
        PWE/KG4+cz8oaD1oLmNvbmNhdCh0Lml0ZW1zLnNwbGljZSgwLHMpKSx0LmNv
        dW50LT1zLG0tPTEsbj1zLHM9MCk6KG49PT1zJiYobD0hMCksaD1oLmNvbmNh
        dCh0Lml0ZW1zKSxzLT1uKSxyPT09byYmKGkuY291bnQtPW4pKTppLmNvdW50
        Kz1uO3JldHVybiBpLmNvdW50PjA/dGhpcy5fb3BlcmF0aW9ucy5zcGxpY2Uo
        ZSsxLG0tMS1lKTp0aGlzLl9vcGVyYXRpb25zLnNwbGljZShlLGw/MjoxKSxo
        fSx0b1N0cmluZzpmdW5jdGlvbigpe3ZhciBlPSIiO3JldHVybiBuKHRoaXMu
        X29wZXJhdGlvbnMsZnVuY3Rpb24odCl7ZSs9IiAiK3QudHlwZSsiOiIrdC5j
        b3VudH0pLGUuc3Vic3RyaW5nKDEpfX19KCksZnVuY3Rpb24oKXtmdW5jdGlv
        biBlKGUsdCl7dGhpcy50eXBlPWUsdGhpcy5jb3VudD10fXZhciB0PShFbWJl
        ci5nZXQsRW1iZXIuRW51bWVyYWJsZVV0aWxzLmZvckVhY2gpLHI9InIiLG49
        ImYiO0VtYmVyLlN1YkFycmF5PWZ1bmN0aW9uKHQpe2FyZ3VtZW50cy5sZW5n
        dGg8MSYmKHQ9MCksdGhpcy5fb3BlcmF0aW9ucz10PjA/W25ldyBlKHIsdCld
        OltdfSxFbWJlci5TdWJBcnJheS5wcm90b3R5cGU9e2FkZEl0ZW06ZnVuY3Rp
        b24odCxpKXt2YXIgbz0tMSxhPWk/cjpuLHM9dGhpcztyZXR1cm4gdGhpcy5f
        ZmluZE9wZXJhdGlvbih0LGZ1bmN0aW9uKG4sdSxjLGwsaCl7dmFyIG0sZjth
        PT09bi50eXBlPysrbi5jb3VudDp0PT09Yz9zLl9vcGVyYXRpb25zLnNwbGlj
        ZSh1LDAsbmV3IGUoYSwxKSk6KG09bmV3IGUoYSwxKSxmPW5ldyBlKG4udHlw
        ZSxsLXQrMSksbi5jb3VudD10LWMscy5fb3BlcmF0aW9ucy5zcGxpY2UodSsx
        LDAsbSxmKSksaSYmKG89bi50eXBlPT09cj9oKyh0LWMpOmgpLHMuX2NvbXBv
        c2VBdCh1KX0sZnVuY3Rpb24odCl7cy5fb3BlcmF0aW9ucy5wdXNoKG5ldyBl
        KGEsMSkpLGkmJihvPXQpLHMuX2NvbXBvc2VBdChzLl9vcGVyYXRpb25zLmxl
        bmd0aC0xKX0pLG99LHJlbW92ZUl0ZW06ZnVuY3Rpb24oZSl7dmFyIHQ9LTEs
        bj10aGlzO3JldHVybiB0aGlzLl9maW5kT3BlcmF0aW9uKGUsZnVuY3Rpb24o
        aSxvLGEscyx1KXtpLnR5cGU9PT1yJiYodD11KyhlLWEpKSxpLmNvdW50PjE/
        LS1pLmNvdW50OihuLl9vcGVyYXRpb25zLnNwbGljZShvLDEpLG4uX2NvbXBv
        c2VBdChvKSl9LGZ1bmN0aW9uKCl7dGhyb3cgbmV3IEVtYmVyLkVycm9yKCJD
        YW4ndCByZW1vdmUgYW4gaXRlbSB0aGF0IGhhcyBuZXZlciBiZWVuIGFkZGVk
        LiIpfSksdH0sX2ZpbmRPcGVyYXRpb246ZnVuY3Rpb24oZSx0LG4pe3ZhciBp
        LG8sYSxzLHUsYz0wO2ZvcihpPXM9MCxvPXRoaXMuX29wZXJhdGlvbnMubGVu
        Z3RoO28+aTtzPXUrMSwrK2kpe2lmKGE9dGhpcy5fb3BlcmF0aW9uc1tpXSx1
        PXMrYS5jb3VudC0xLGU+PXMmJnU+PWUpcmV0dXJuIHQoYSxpLHMsdSxjKSx2
        b2lkIDA7YS50eXBlPT09ciYmKGMrPWEuY291bnQpfW4oYyl9LF9jb21wb3Nl
        QXQ6ZnVuY3Rpb24oZSl7dmFyIHQscj10aGlzLl9vcGVyYXRpb25zW2VdO3Im
        JihlPjAmJih0PXRoaXMuX29wZXJhdGlvbnNbZS0xXSx0LnR5cGU9PT1yLnR5
        cGUmJihyLmNvdW50Kz10LmNvdW50LHRoaXMuX29wZXJhdGlvbnMuc3BsaWNl
        KGUtMSwxKSwtLWUpKSxlPHRoaXMuX29wZXJhdGlvbnMubGVuZ3RoLTEmJih0
        PXRoaXMuX29wZXJhdGlvbnNbZSsxXSx0LnR5cGU9PT1yLnR5cGUmJihyLmNv
        dW50Kz10LmNvdW50LHRoaXMuX29wZXJhdGlvbnMuc3BsaWNlKGUrMSwxKSkp
        KX0sdG9TdHJpbmc6ZnVuY3Rpb24oKXt2YXIgZT0iIjtyZXR1cm4gdCh0aGlz
        Ll9vcGVyYXRpb25zLGZ1bmN0aW9uKHQpe2UrPSIgIit0LnR5cGUrIjoiK3Qu
        Y291bnR9KSxlLnN1YnN0cmluZygxKX19fSgpLGZ1bmN0aW9uKCl7RW1iZXIu
        Q29udGFpbmVyPXQoImNvbnRhaW5lciIpLEVtYmVyLkNvbnRhaW5lci5zZXQ9
        RW1iZXIuc2V0fSgpLGZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe3ZhciBlLHQs
        bz0hMSxhPWZ1bmN0aW9uKCl7b3x8YS5wcm90bygpLG4odGhpcyxpLGcpLG4o
        dGhpcywiX3N1cGVyIixnKTt2YXIgdT1zKHRoaXMpLGg9dS5wcm90bztpZih1
        LnByb3RvPXRoaXMsZSl7dmFyIG09ZTsKZT1udWxsLHRoaXMucmVvcGVuLmFw
        cGx5KHRoaXMsbSl9aWYodCl7dmFyIGY9dDt0PW51bGw7Zm9yKHZhciBwPXRo
        aXMuY29uY2F0ZW5hdGVkUHJvcGVydGllcyxiPTAseT1mLmxlbmd0aDt5PmI7
        YisrKXt2YXIgdz1mW2JdO2lmKG51bGwhPT13JiYib2JqZWN0Ij09dHlwZW9m
        IHcpZm9yKHZhciBfPUVtYmVyLmtleXModyksQz0wLE89Xy5sZW5ndGg7Tz5D
        O0MrKyl7dmFyIEE9X1tDXTtpZih3Lmhhc093blByb3BlcnR5KEEpKXt2YXIg
        UD13W0FdLHg9RW1iZXIuSVNfQklORElORztpZih4LnRlc3QoQSkpe3ZhciBW
        PXUuYmluZGluZ3M7Vj91Lmhhc093blByb3BlcnR5KCJiaW5kaW5ncyIpfHwo
        Vj11LmJpbmRpbmdzPXIodS5iaW5kaW5ncykpOlY9dS5iaW5kaW5ncz17fSxW
        W0FdPVB9dmFyIFQ9dS5kZXNjc1tBXTtpZihwJiZFKHAsQSk+PTApe3ZhciBT
        PXRoaXNbQV07UD1TPyJmdW5jdGlvbiI9PXR5cGVvZiBTLmNvbmNhdD9TLmNv
        bmNhdChQKTpFbWJlci5tYWtlQXJyYXkoUykuY29uY2F0KFApOkVtYmVyLm1h
        a2VBcnJheShQKX1UP1Quc2V0KHRoaXMsQSxQKToiZnVuY3Rpb24iIT10eXBl
        b2YgdGhpcy5zZXRVbmtub3duUHJvcGVydHl8fEEgaW4gdGhpcz92P0VtYmVy
        LmRlZmluZVByb3BlcnR5KHRoaXMsQSxudWxsLFApOnRoaXNbQV09UDp0aGlz
        LnNldFVua25vd25Qcm9wZXJ0eShBLFApfX19fWQodGhpcyx1KSx0aGlzLmlu
        aXQuYXBwbHkodGhpcyxhcmd1bWVudHMpLHUucHJvdG89aCxjKHRoaXMpLGwo
        dGhpcywiaW5pdCIpfTtyZXR1cm4gYS50b1N0cmluZz1mLnByb3RvdHlwZS50
        b1N0cmluZyxhLndpbGxSZW9wZW49ZnVuY3Rpb24oKXtvJiYoYS5Qcm90b3R5
        cGVNaXhpbj1mLmNyZWF0ZShhLlByb3RvdHlwZU1peGluKSksbz0hMX0sYS5f
        aW5pdE1peGlucz1mdW5jdGlvbih0KXtlPXR9LGEuX2luaXRQcm9wZXJ0aWVz
        PWZ1bmN0aW9uKGUpe3Q9ZX0sYS5wcm90bz1mdW5jdGlvbigpe3ZhciBlPWEu
        c3VwZXJjbGFzcztyZXR1cm4gZSYmZS5wcm90bygpLG98fChvPSEwLGEuUHJv
        dG90eXBlTWl4aW4uYXBwbHlQYXJ0aWFsKGEucHJvdG90eXBlKSx1KGEucHJv
        dG90eXBlKSksdGhpcy5wcm90b3R5cGV9LGF9ZnVuY3Rpb24gdChlKXtyZXR1
        cm4gZnVuY3Rpb24oKXtyZXR1cm4gZX19dmFyIHI9KEVtYmVyLnNldCxFbWJl
        ci5nZXQsRW1iZXIuY3JlYXRlKSxuPUVtYmVyLnBsYXRmb3JtLmRlZmluZVBy
        b3BlcnR5LGk9RW1iZXIuR1VJRF9LRVksbz1FbWJlci5ndWlkRm9yLGE9RW1i
        ZXIuZ2VuZXJhdGVHdWlkLHM9RW1iZXIubWV0YSx1PUVtYmVyLnJld2F0Y2gs
        Yz1FbWJlci5maW5pc2hDaGFpbnMsbD1FbWJlci5zZW5kRXZlbnQsaD1FbWJl
        ci5kZXN0cm95LG09RW1iZXIucnVuLnNjaGVkdWxlLGY9RW1iZXIuTWl4aW4s
        cD1mLl9hcHBseSxkPWYuZmluaXNoUGFydGlhbCxiPWYucHJvdG90eXBlLnJl
        b3Blbix2PUVtYmVyLkVOVi5NQU5EQVRPUllfU0VUVEVSLEU9RW1iZXIuRW51
        bWVyYWJsZVV0aWxzLmluZGV4T2YsZz17Y29uZmlndXJhYmxlOiEwLHdyaXRh
        YmxlOiEwLGVudW1lcmFibGU6ITEsdmFsdWU6dm9pZCAwfSx5PWUoKTt5LnRv
        U3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIkVtYmVyLkNvcmVPYmplY3QifSx5
        LlByb3RvdHlwZU1peGluPWYuY3JlYXRlKHtyZW9wZW46ZnVuY3Rpb24oKXty
        ZXR1cm4gcCh0aGlzLGFyZ3VtZW50cywhMCksdGhpc30saW5pdDpmdW5jdGlv
        bigpe30sY29uY2F0ZW5hdGVkUHJvcGVydGllczpudWxsLGlzRGVzdHJveWVk
        OiExLGlzRGVzdHJveWluZzohMSxkZXN0cm95OmZ1bmN0aW9uKCl7cmV0dXJu
        IHRoaXMuaXNEZXN0cm95aW5nP3ZvaWQgMDoodGhpcy5pc0Rlc3Ryb3lpbmc9
        ITAsbSgiYWN0aW9ucyIsdGhpcyx0aGlzLndpbGxEZXN0cm95KSxtKCJkZXN0
        cm95Iix0aGlzLHRoaXMuX3NjaGVkdWxlZERlc3Ryb3kpLHRoaXMpfSx3aWxs
        RGVzdHJveTpFbWJlci5LLF9zY2hlZHVsZWREZXN0cm95OmZ1bmN0aW9uKCl7
        dGhpcy5pc0Rlc3Ryb3llZHx8KGgodGhpcyksdGhpcy5pc0Rlc3Ryb3llZD0h
        MCl9LGJpbmQ6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdCBpbnN0YW5jZW9mIEVt
        YmVyLkJpbmRpbmd8fCh0PUVtYmVyLkJpbmRpbmcuZnJvbSh0KSksdC50byhl
        KS5jb25uZWN0KHRoaXMpLHR9LHRvU3RyaW5nOmZ1bmN0aW9uKCl7dmFyIGU9
        ImZ1bmN0aW9uIj09dHlwZW9mIHRoaXMudG9TdHJpbmdFeHRlbnNpb24scj1l
        PyI6Iit0aGlzLnRvU3RyaW5nRXh0ZW5zaW9uKCk6IiIsbj0iPCIrdGhpcy5j
        b25zdHJ1Y3Rvci50b1N0cmluZygpKyI6IitvKHRoaXMpK3IrIj4iO3JldHVy
        biB0aGlzLnRvU3RyaW5nPXQobiksbn19KSx5LlByb3RvdHlwZU1peGluLm93
        bmVyQ29uc3RydWN0b3I9eSxFbWJlci5jb25maWcub3ZlcnJpZGVQcm90b3R5
        cGVNaXhpbiYmRW1iZXIuY29uZmlnLm92ZXJyaWRlUHJvdG90eXBlTWl4aW4o
        eS5Qcm90b3R5cGVNaXhpbikseS5fX3N1cGVyX189bnVsbDt2YXIgdz1mLmNy
        ZWF0ZSh7Q2xhc3NNaXhpbjpFbWJlci5yZXF1aXJlZCgpLFByb3RvdHlwZU1p
        eGluOkVtYmVyLnJlcXVpcmVkKCksaXNDbGFzczohMCxpc01ldGhvZDohMSxl
        eHRlbmQ6ZnVuY3Rpb24oKXt2YXIgdCxuPWUoKTtyZXR1cm4gbi5DbGFzc01p
        eGluPWYuY3JlYXRlKHRoaXMuQ2xhc3NNaXhpbiksbi5Qcm90b3R5cGVNaXhp
        bj1mLmNyZWF0ZSh0aGlzLlByb3RvdHlwZU1peGluKSxuLkNsYXNzTWl4aW4u
        b3duZXJDb25zdHJ1Y3Rvcj1uLG4uUHJvdG90eXBlTWl4aW4ub3duZXJDb25z
        dHJ1Y3Rvcj1uLGIuYXBwbHkobi5Qcm90b3R5cGVNaXhpbixhcmd1bWVudHMp
        LG4uc3VwZXJjbGFzcz10aGlzLG4uX19zdXBlcl9fPXRoaXMucHJvdG90eXBl
        LHQ9bi5wcm90b3R5cGU9cih0aGlzLnByb3RvdHlwZSksdC5jb25zdHJ1Y3Rv
        cj1uLGEodCkscyh0KS5wcm90bz10LG4uQ2xhc3NNaXhpbi5hcHBseShuKSxu
        fSxjcmVhdGVXaXRoTWl4aW5zOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztyZXR1
        cm4gYXJndW1lbnRzLmxlbmd0aD4wJiZ0aGlzLl9pbml0TWl4aW5zKGFyZ3Vt
        ZW50cyksbmV3IGV9LGNyZWF0ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7cmV0
        dXJuIGFyZ3VtZW50cy5sZW5ndGg+MCYmdGhpcy5faW5pdFByb3BlcnRpZXMo
        YXJndW1lbnRzKSxuZXcgZX0scmVvcGVuOmZ1bmN0aW9uKCl7cmV0dXJuIHRo
        aXMud2lsbFJlb3BlbigpLGIuYXBwbHkodGhpcy5Qcm90b3R5cGVNaXhpbixh
        cmd1bWVudHMpLHRoaXN9LHJlb3BlbkNsYXNzOmZ1bmN0aW9uKCl7cmV0dXJu
        IGIuYXBwbHkodGhpcy5DbGFzc01peGluLGFyZ3VtZW50cykscCh0aGlzLGFy
        Z3VtZW50cywhMSksdGhpc30sZGV0ZWN0OmZ1bmN0aW9uKGUpe2lmKCJmdW5j
        dGlvbiIhPXR5cGVvZiBlKXJldHVybiExO2Zvcig7ZTspe2lmKGU9PT10aGlz
        KXJldHVybiEwO2U9ZS5zdXBlcmNsYXNzfXJldHVybiExfSxkZXRlY3RJbnN0
        YW5jZTpmdW5jdGlvbihlKXtyZXR1cm4gZSBpbnN0YW5jZW9mIHRoaXN9LG1l
        dGFGb3JQcm9wZXJ0eTpmdW5jdGlvbihlKXt2YXIgdD1zKHRoaXMucHJvdG8o
        KSwhMSkuZGVzY3NbZV07cmV0dXJuIHQuX21ldGF8fHt9fSxlYWNoQ29tcHV0
        ZWRQcm9wZXJ0eTpmdW5jdGlvbihlLHQpe3ZhciByLG49dGhpcy5wcm90bygp
        LGk9cyhuKS5kZXNjcyxvPXt9O2Zvcih2YXIgYSBpbiBpKXI9aVthXSxyIGlu
        c3RhbmNlb2YgRW1iZXIuQ29tcHV0ZWRQcm9wZXJ0eSYmZS5jYWxsKHR8fHRo
        aXMsYSxyLl9tZXRhfHxvKX19KTt3Lm93bmVyQ29uc3RydWN0b3I9eSxFbWJl
        ci5jb25maWcub3ZlcnJpZGVDbGFzc01peGluJiZFbWJlci5jb25maWcub3Zl
        cnJpZGVDbGFzc01peGluKHcpLHkuQ2xhc3NNaXhpbj13LHcuYXBwbHkoeSks
        RW1iZXIuQ29yZU9iamVjdD15fSgpLGZ1bmN0aW9uKCl7RW1iZXIuT2JqZWN0
        PUVtYmVyLkNvcmVPYmplY3QuZXh0ZW5kKEVtYmVyLk9ic2VydmFibGUpLEVt
        YmVyLk9iamVjdC50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiJFbWJlci5P
        YmplY3QifX0oKSxmdW5jdGlvbigpe2Z1bmN0aW9uIGUodCxyLGkpe3ZhciBh
        PXQubGVuZ3RoO2NbdC5qb2luKCIuIildPXI7Zm9yKHZhciBzIGluIHIpaWYo
        bC5jYWxsKHIscykpe3ZhciB1PXJbc107aWYodFthXT1zLHUmJnUudG9TdHJp
        bmc9PT1uKXUudG9TdHJpbmc9byh0LmpvaW4oIi4iKSksdVttXT10LmpvaW4o
        Ii4iKTtlbHNlIGlmKHUmJnUuaXNOYW1lc3BhY2Upe2lmKGlbaCh1KV0pY29u
        dGludWU7aVtoKHUpXT0hMCxlKHQsdSxpKX19dC5sZW5ndGg9YX1mdW5jdGlv
        biB0KCl7dmFyIGUsdCxyPUVtYmVyLk5hbWVzcGFjZSxuPUVtYmVyLmxvb2t1
        cDtpZighci5QUk9DRVNTRUQpZm9yKHZhciBpIGluIG4paWYoInBhcmVudCIh
        PT1pJiYidG9wIiE9PWkmJiJmcmFtZUVsZW1lbnQiIT09aSYmIndlYmtpdFN0
        b3JhZ2VJbmZvIiE9PWkmJiEoImdsb2JhbFN0b3JhZ2UiPT09aSYmbi5TdG9y
        YWdlTGlzdCYmbi5nbG9iYWxTdG9yYWdlIGluc3RhbmNlb2Ygbi5TdG9yYWdl
        TGlzdHx8bi5oYXNPd25Qcm9wZXJ0eSYmIW4uaGFzT3duUHJvcGVydHkoaSkp
        KXt0cnl7ZT1FbWJlci5sb29rdXBbaV0sdD1lJiZlLmlzTmFtZXNwYWNlfWNh
        dGNoKG8pe2NvbnRpbnVlfXQmJihlW21dPWkpfX1mdW5jdGlvbiByKGUpe3Zh
        ciB0PWUuc3VwZXJjbGFzcztyZXR1cm4gdD90W21dP3RbbV06cih0KTp2b2lk
        IDB9ZnVuY3Rpb24gbigpe0VtYmVyLkJPT1RFRHx8dGhpc1ttXXx8aSgpO3Zh
        ciBlO2lmKHRoaXNbbV0pZT10aGlzW21dO2Vsc2UgaWYodGhpcy5fdG9TdHJp
        bmcpZT10aGlzLl90b1N0cmluZztlbHNle3ZhciB0PXIodGhpcyk7ZT10PyIo
        c3ViY2xhc3Mgb2YgIit0KyIpIjoiKHVua25vd24gbWl4aW4pIix0aGlzLnRv
        U3RyaW5nPW8oZSl9cmV0dXJuIGV9ZnVuY3Rpb24gaSgpe3ZhciByPSF1LlBS
        T0NFU1NFRCxuPUVtYmVyLmFueVVucHJvY2Vzc2VkTWl4aW5zO2lmKHImJih0
        KCksdS5QUk9DRVNTRUQ9ITApLHJ8fG4pe2Zvcih2YXIgaSxvPXUuTkFNRVNQ
        QUNFUyxhPTAscz1vLmxlbmd0aDtzPmE7YSsrKWk9b1thXSxlKFtpLnRvU3Ry
        aW5nKCldLGkse30pO0VtYmVyLmFueVVucHJvY2Vzc2VkTWl4aW5zPSExfX1m
        dW5jdGlvbiBvKGUpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiBlfX12YXIg
        YT1FbWJlci5nZXQscz1FbWJlci5BcnJheVBvbHlmaWxscy5pbmRleE9mLHU9
        RW1iZXIuTmFtZXNwYWNlPUVtYmVyLk9iamVjdC5leHRlbmQoe2lzTmFtZXNw
        YWNlOiEwLGluaXQ6ZnVuY3Rpb24oKXtFbWJlci5OYW1lc3BhY2UuTkFNRVNQ
        QUNFUy5wdXNoKHRoaXMpLEVtYmVyLk5hbWVzcGFjZS5QUk9DRVNTRUQ9ITF9
        LHRvU3RyaW5nOmZ1bmN0aW9uKCl7dmFyIGU9YSh0aGlzLCJuYW1lIik7cmV0
        dXJuIGU/ZToodCgpLHRoaXNbRW1iZXIuR1VJRF9LRVkrIl9uYW1lIl0pfSxu
        YW1lQ2xhc3NlczpmdW5jdGlvbigpe2UoW3RoaXMudG9TdHJpbmcoKV0sdGhp
        cyx7fSl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt2YXIgZT1FbWJlci5OYW1lc3Bh
        Y2UuTkFNRVNQQUNFUztFbWJlci5sb29rdXBbdGhpcy50b1N0cmluZygpXT12
        b2lkIDAsZS5zcGxpY2Uocy5jYWxsKGUsdGhpcyksMSksdGhpcy5fc3VwZXIo
        KX19KTt1LnJlb3BlbkNsYXNzKHtOQU1FU1BBQ0VTOltFbWJlcl0sTkFNRVNQ
        QUNFU19CWV9JRDp7fSxQUk9DRVNTRUQ6ITEscHJvY2Vzc0FsbDppLGJ5TmFt
        ZTpmdW5jdGlvbihlKXtyZXR1cm4gRW1iZXIuQk9PVEVEfHxpKCksY1tlXX19
        KTt2YXIgYz11Lk5BTUVTUEFDRVNfQllfSUQsbD17fS5oYXNPd25Qcm9wZXJ0
        eSxoPUVtYmVyLmd1aWRGb3IsbT1FbWJlci5OQU1FX0tFWT1FbWJlci5HVUlE
        X0tFWSsiX25hbWUiO0VtYmVyLk1peGluLnByb3RvdHlwZS50b1N0cmluZz1u
        fSgpLGZ1bmN0aW9uKCl7RW1iZXIuQXBwbGljYXRpb249RW1iZXIuTmFtZXNw
        YWNlLmV4dGVuZCgpfSgpLGZ1bmN0aW9uKCl7dmFyIGU9IkluZGV4IG91dCBv
        ZiByYW5nZSIsdD1bXSxyPUVtYmVyLmdldDtFbWJlci5zZXQsRW1iZXIuQXJy
        YXlQcm94eT1FbWJlci5PYmplY3QuZXh0ZW5kKEVtYmVyLk11dGFibGVBcnJh
        eSx7Y29udGVudDpudWxsLGFycmFuZ2VkQ29udGVudDpFbWJlci5jb21wdXRl
        ZC5hbGlhcygiY29udGVudCIpLG9iamVjdEF0Q29udGVudDpmdW5jdGlvbihl
        KXtyZXR1cm4gcih0aGlzLCJhcnJhbmdlZENvbnRlbnQiKS5vYmplY3RBdChl
        KX0scmVwbGFjZUNvbnRlbnQ6ZnVuY3Rpb24oZSx0LG4pe3IodGhpcywiY29u
        dGVudCIpLnJlcGxhY2UoZSx0LG4pfSxfY29udGVudFdpbGxDaGFuZ2U6RW1i
        ZXIuYmVmb3JlT2JzZXJ2ZXIoImNvbnRlbnQiLGZ1bmN0aW9uKCl7dGhpcy5f
        dGVhcmRvd25Db250ZW50KCl9KSxfdGVhcmRvd25Db250ZW50OmZ1bmN0aW9u
        KCl7dmFyIGU9cih0aGlzLCJjb250ZW50Iik7ZSYmZS5yZW1vdmVBcnJheU9i
        c2VydmVyKHRoaXMse3dpbGxDaGFuZ2U6ImNvbnRlbnRBcnJheVdpbGxDaGFu
        Z2UiLGRpZENoYW5nZToiY29udGVudEFycmF5RGlkQ2hhbmdlIn0pfSxjb250
        ZW50QXJyYXlXaWxsQ2hhbmdlOkVtYmVyLkssY29udGVudEFycmF5RGlkQ2hh
        bmdlOkVtYmVyLkssX2NvbnRlbnREaWRDaGFuZ2U6RW1iZXIub2JzZXJ2ZXIo
        ImNvbnRlbnQiLGZ1bmN0aW9uKCl7cih0aGlzLCJjb250ZW50IiksdGhpcy5f
        c2V0dXBDb250ZW50KCl9KSxfc2V0dXBDb250ZW50OmZ1bmN0aW9uKCl7dmFy
        IGU9cih0aGlzLCJjb250ZW50Iik7ZSYmZS5hZGRBcnJheU9ic2VydmVyKHRo
        aXMse3dpbGxDaGFuZ2U6ImNvbnRlbnRBcnJheVdpbGxDaGFuZ2UiLGRpZENo
        YW5nZToiY29udGVudEFycmF5RGlkQ2hhbmdlIn0pfSxfYXJyYW5nZWRDb250
        ZW50V2lsbENoYW5nZTpFbWJlci5iZWZvcmVPYnNlcnZlcigiYXJyYW5nZWRD
        b250ZW50IixmdW5jdGlvbigpe3ZhciBlPXIodGhpcywiYXJyYW5nZWRDb250
        ZW50IiksdD1lP3IoZSwibGVuZ3RoIik6MDt0aGlzLmFycmFuZ2VkQ29udGVu
        dEFycmF5V2lsbENoYW5nZSh0aGlzLDAsdCx2b2lkIDApLHRoaXMuYXJyYW5n
        ZWRDb250ZW50V2lsbENoYW5nZSh0aGlzKSx0aGlzLl90ZWFyZG93bkFycmFu
        Z2VkQ29udGVudChlKX0pLF9hcnJhbmdlZENvbnRlbnREaWRDaGFuZ2U6RW1i
        ZXIub2JzZXJ2ZXIoImFycmFuZ2VkQ29udGVudCIsZnVuY3Rpb24oKXt2YXIg
        ZT1yKHRoaXMsImFycmFuZ2VkQ29udGVudCIpLHQ9ZT9yKGUsImxlbmd0aCIp
        OjA7dGhpcy5fc2V0dXBBcnJhbmdlZENvbnRlbnQoKSx0aGlzLmFycmFuZ2Vk
        Q29udGVudERpZENoYW5nZSh0aGlzKSx0aGlzLmFycmFuZ2VkQ29udGVudEFy
        cmF5RGlkQ2hhbmdlKHRoaXMsMCx2b2lkIDAsdCl9KSxfc2V0dXBBcnJhbmdl
        ZENvbnRlbnQ6ZnVuY3Rpb24oKXt2YXIgZT1yKHRoaXMsImFycmFuZ2VkQ29u
        dGVudCIpO2UmJmUuYWRkQXJyYXlPYnNlcnZlcih0aGlzLHt3aWxsQ2hhbmdl
        OiJhcnJhbmdlZENvbnRlbnRBcnJheVdpbGxDaGFuZ2UiLGRpZENoYW5nZToi
        YXJyYW5nZWRDb250ZW50QXJyYXlEaWRDaGFuZ2UifSl9LF90ZWFyZG93bkFy
        cmFuZ2VkQ29udGVudDpmdW5jdGlvbigpe3ZhciBlPXIodGhpcywiYXJyYW5n
        ZWRDb250ZW50Iik7ZSYmZS5yZW1vdmVBcnJheU9ic2VydmVyKHRoaXMse3dp
        bGxDaGFuZ2U6ImFycmFuZ2VkQ29udGVudEFycmF5V2lsbENoYW5nZSIsZGlk
        Q2hhbmdlOiJhcnJhbmdlZENvbnRlbnRBcnJheURpZENoYW5nZSJ9KX0sYXJy
        YW5nZWRDb250ZW50V2lsbENoYW5nZTpFbWJlci5LLGFycmFuZ2VkQ29udGVu
        dERpZENoYW5nZTpFbWJlci5LLG9iamVjdEF0OmZ1bmN0aW9uKGUpe3JldHVy
        biByKHRoaXMsImNvbnRlbnQiKSYmdGhpcy5vYmplY3RBdENvbnRlbnQoZSl9
        LGxlbmd0aDpFbWJlci5jb21wdXRlZChmdW5jdGlvbigpe3ZhciBlPXIodGhp
        cywiYXJyYW5nZWRDb250ZW50Iik7cmV0dXJuIGU/cihlLCJsZW5ndGgiKTow
        fSksX3JlcGxhY2U6ZnVuY3Rpb24oZSx0LG4pe3ZhciBpPXIodGhpcywiY29u
        dGVudCIpO3JldHVybiBpJiZ0aGlzLnJlcGxhY2VDb250ZW50KGUsdCxuKSx0
        aGlzfSxyZXBsYWNlOmZ1bmN0aW9uKCl7aWYocih0aGlzLCJhcnJhbmdlZENv
        bnRlbnQiKSE9PXIodGhpcywiY29udGVudCIpKXRocm93IG5ldyBFbWJlci5F
        cnJvcigiVXNpbmcgcmVwbGFjZSBvbiBhbiBhcnJhbmdlZCBBcnJheVByb3h5
        IGlzIG5vdCBhbGxvd2VkLiIpO3RoaXMuX3JlcGxhY2UuYXBwbHkodGhpcyxh
        cmd1bWVudHMpfSxfaW5zZXJ0QXQ6ZnVuY3Rpb24odCxuKXtpZih0PnIodGhp
        cywiY29udGVudC5sZW5ndGgiKSl0aHJvdyBuZXcgRW1iZXIuRXJyb3IoZSk7
        cmV0dXJuIHRoaXMuX3JlcGxhY2UodCwwLFtuXSksdGhpc30saW5zZXJ0QXQ6
        ZnVuY3Rpb24oZSx0KXtpZihyKHRoaXMsImFycmFuZ2VkQ29udGVudCIpPT09
        cih0aGlzLCJjb250ZW50IikpcmV0dXJuIHRoaXMuX2luc2VydEF0KGUsdCk7
        dGhyb3cgbmV3IEVtYmVyLkVycm9yKCJVc2luZyBpbnNlcnRBdCBvbiBhbiBh
        cnJhbmdlZCBBcnJheVByb3h5IGlzIG5vdCBhbGxvd2VkLiIpfSxyZW1vdmVB
        dDpmdW5jdGlvbihuLGkpe2lmKCJudW1iZXIiPT10eXBlb2Ygbil7dmFyIG8s
        YT1yKHRoaXMsImNvbnRlbnQiKSxzPXIodGhpcywiYXJyYW5nZWRDb250ZW50
        IiksdT1bXTtpZigwPm58fG4+PXIodGhpcywibGVuZ3RoIikpdGhyb3cgbmV3
        IEVtYmVyLkVycm9yKGUpO2Zvcih2b2lkIDA9PT1pJiYoaT0xKSxvPW47bitp
        Pm87bysrKXUucHVzaChhLmluZGV4T2Yocy5vYmplY3RBdChvKSkpO2Zvcih1
        LnNvcnQoZnVuY3Rpb24oZSx0KXtyZXR1cm4gdC1lfSksRW1iZXIuYmVnaW5Q
        cm9wZXJ0eUNoYW5nZXMoKSxvPTA7bzx1Lmxlbmd0aDtvKyspdGhpcy5fcmVw
        bGFjZSh1W29dLDEsdCk7RW1iZXIuZW5kUHJvcGVydHlDaGFuZ2VzKCl9cmV0
        dXJuIHRoaXN9LHB1c2hPYmplY3Q6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMu
        X2luc2VydEF0KHIodGhpcywiY29udGVudC5sZW5ndGgiKSxlKSxlfSxwdXNo
        T2JqZWN0czpmdW5jdGlvbihlKXtpZighRW1iZXIuRW51bWVyYWJsZS5kZXRl
        Y3QoZSkmJiFFbWJlci5pc0FycmF5KGUpKXRocm93IG5ldyBUeXBlRXJyb3Io
        Ik11c3QgcGFzcyBFbWJlci5FbnVtZXJhYmxlIHRvIEVtYmVyLk11dGFibGVB
        cnJheSNwdXNoT2JqZWN0cyIpO3JldHVybiB0aGlzLl9yZXBsYWNlKHIodGhp
        cywibGVuZ3RoIiksMCxlKSx0aGlzfSxzZXRPYmplY3RzOmZ1bmN0aW9uKGUp
        e2lmKDA9PT1lLmxlbmd0aClyZXR1cm4gdGhpcy5jbGVhcigpO3ZhciB0PXIo
        dGhpcywibGVuZ3RoIik7cmV0dXJuIHRoaXMuX3JlcGxhY2UoMCx0LGUpLHRo
        aXN9LHVuc2hpZnRPYmplY3Q6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2lu
        c2VydEF0KDAsZSksZX0sdW5zaGlmdE9iamVjdHM6ZnVuY3Rpb24oZSl7cmV0
        dXJuIHRoaXMuX3JlcGxhY2UoMCwwLGUpLHRoaXN9LHNsaWNlOmZ1bmN0aW9u
        KCl7dmFyIGU9dGhpcy50b0FycmF5KCk7cmV0dXJuIGUuc2xpY2UuYXBwbHko
        ZSxhcmd1bWVudHMpfSxhcnJhbmdlZENvbnRlbnRBcnJheVdpbGxDaGFuZ2U6
        ZnVuY3Rpb24oZSx0LHIsbil7dGhpcy5hcnJheUNvbnRlbnRXaWxsQ2hhbmdl
        KHQscixuKX0sYXJyYW5nZWRDb250ZW50QXJyYXlEaWRDaGFuZ2U6ZnVuY3Rp
        b24oZSx0LHIsbil7dGhpcy5hcnJheUNvbnRlbnREaWRDaGFuZ2UodCxyLG4p
        fSxpbml0OmZ1bmN0aW9uKCl7dGhpcy5fc3VwZXIoKSx0aGlzLl9zZXR1cENv
        bnRlbnQoKSx0aGlzLl9zZXR1cEFycmFuZ2VkQ29udGVudCgpfSx3aWxsRGVz
        dHJveTpmdW5jdGlvbigpe3RoaXMuX3RlYXJkb3duQXJyYW5nZWRDb250ZW50
        KCksdGhpcy5fdGVhcmRvd25Db250ZW50KCl9fSl9KCksZnVuY3Rpb24oKXtm
        dW5jdGlvbiBlKGUsdCl7dmFyIHI9dC5zbGljZSg4KTtyIGluIHRoaXN8fHUo
        dGhpcyxyKX1mdW5jdGlvbiB0KGUsdCl7dmFyIHI9dC5zbGljZSg4KTtyIGlu
        IHRoaXN8fGModGhpcyxyKX12YXIgcj1FbWJlci5nZXQsbj1FbWJlci5zZXQs
        aT0oRW1iZXIuU3RyaW5nLmZtdCxFbWJlci5hZGRCZWZvcmVPYnNlcnZlciks
        bz1FbWJlci5hZGRPYnNlcnZlcixhPUVtYmVyLnJlbW92ZUJlZm9yZU9ic2Vy
        dmVyLHM9RW1iZXIucmVtb3ZlT2JzZXJ2ZXIsdT1FbWJlci5wcm9wZXJ0eVdp
        bGxDaGFuZ2UsYz1FbWJlci5wcm9wZXJ0eURpZENoYW5nZSxsPUVtYmVyLm1l
        dGEsaD1FbWJlci5kZWZpbmVQcm9wZXJ0eTtFbWJlci5PYmplY3RQcm94eT1F
        bWJlci5PYmplY3QuZXh0ZW5kKHtjb250ZW50Om51bGwsX2NvbnRlbnREaWRD
        aGFuZ2U6RW1iZXIub2JzZXJ2ZXIoImNvbnRlbnQiLGZ1bmN0aW9uKCl7fSks
        aXNUcnV0aHk6RW1iZXIuY29tcHV0ZWQuYm9vbCgiY29udGVudCIpLF9kZWJ1
        Z0NvbnRhaW5lcktleTpudWxsLHdpbGxXYXRjaFByb3BlcnR5OmZ1bmN0aW9u
        KHIpe3ZhciBuPSJjb250ZW50LiIrcjtpKHRoaXMsbixudWxsLGUpLG8odGhp
        cyxuLG51bGwsdCl9LGRpZFVud2F0Y2hQcm9wZXJ0eTpmdW5jdGlvbihyKXt2
        YXIgbj0iY29udGVudC4iK3I7YSh0aGlzLG4sbnVsbCxlKSxzKHRoaXMsbixu
        dWxsLHQpfSx1bmtub3duUHJvcGVydHk6ZnVuY3Rpb24oZSl7dmFyIHQ9cih0
        aGlzLCJjb250ZW50Iik7cmV0dXJuIHQ/cih0LGUpOnZvaWQgMH0sc2V0VW5r
        bm93blByb3BlcnR5OmZ1bmN0aW9uKGUsdCl7dmFyIGk9bCh0aGlzKTtpZihp
        LnByb3RvPT09dGhpcylyZXR1cm4gaCh0aGlzLGUsbnVsbCx0KSx0O3ZhciBv
        PXIodGhpcywiY29udGVudCIpO3JldHVybiBuKG8sZSx0KX19KX0oKSxmdW5j
        dGlvbigpe2Z1bmN0aW9uIGUoZSx0LHIsaSxvKXt2YXIgYSxzPXIuX29iamVj
        dHM7Zm9yKHN8fChzPXIuX29iamVjdHM9e30pOy0tbz49aTspe3ZhciB1PWUu
        b2JqZWN0QXQobyk7dSYmKEVtYmVyLmFkZEJlZm9yZU9ic2VydmVyKHUsdCxy
        LCJjb250ZW50S2V5V2lsbENoYW5nZSIpLEVtYmVyLmFkZE9ic2VydmVyKHUs
        dCxyLCJjb250ZW50S2V5RGlkQ2hhbmdlIiksYT1uKHUpLHNbYV18fChzW2Fd
        PVtdKSxzW2FdLnB1c2gobykpfX1mdW5jdGlvbiB0KGUsdCxyLGksYSl7dmFy
        IHM9ci5fb2JqZWN0cztzfHwocz1yLl9vYmplY3RzPXt9KTtmb3IodmFyIHUs
        YzstLWE+PWk7KXt2YXIgbD1lLm9iamVjdEF0KGEpO2wmJihFbWJlci5yZW1v
        dmVCZWZvcmVPYnNlcnZlcihsLHQsciwiY29udGVudEtleVdpbGxDaGFuZ2Ui
        KSxFbWJlci5yZW1vdmVPYnNlcnZlcihsLHQsciwiY29udGVudEtleURpZENo
        YW5nZSIpLGM9bihsKSx1PXNbY10sdVtvLmNhbGwodSxhKV09bnVsbCl9fXZh
        ciByPShFbWJlci5zZXQsRW1iZXIuZ2V0KSxuPUVtYmVyLmd1aWRGb3IsaT1F
        bWJlci5FbnVtZXJhYmxlVXRpbHMuZm9yRWFjaCxvPUVtYmVyLkFycmF5UG9s
        eWZpbGxzLmluZGV4T2YsYT1FbWJlci5PYmplY3QuZXh0ZW5kKEVtYmVyLkFy
        cmF5LHtpbml0OmZ1bmN0aW9uKGUsdCxyKXt0aGlzLl9zdXBlcigpLHRoaXMu
        X2tleU5hbWU9dCx0aGlzLl9vd25lcj1yLHRoaXMuX2NvbnRlbnQ9ZX0sb2Jq
        ZWN0QXQ6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fY29udGVudC5vYmplY3RB
        dChlKTtyZXR1cm4gdCYmcih0LHRoaXMuX2tleU5hbWUpfSxsZW5ndGg6RW1i
        ZXIuY29tcHV0ZWQoZnVuY3Rpb24oKXt2YXIgZT10aGlzLl9jb250ZW50O3Jl
        dHVybiBlP3IoZSwibGVuZ3RoIik6MH0pfSkscz0vXi4rOihiZWZvcmV8Y2hh
        bmdlKSQvO0VtYmVyLkVhY2hQcm94eT1FbWJlci5PYmplY3QuZXh0ZW5kKHtp
        bml0OmZ1bmN0aW9uKGUpe3RoaXMuX3N1cGVyKCksdGhpcy5fY29udGVudD1l
        LGUuYWRkQXJyYXlPYnNlcnZlcih0aGlzKSxpKEVtYmVyLndhdGNoZWRFdmVu
        dHModGhpcyksZnVuY3Rpb24oZSl7dGhpcy5kaWRBZGRMaXN0ZW5lcihlKX0s
        dGhpcyl9LHVua25vd25Qcm9wZXJ0eTpmdW5jdGlvbihlKXt2YXIgdDtyZXR1
        cm4gdD1uZXcgYSh0aGlzLl9jb250ZW50LGUsdGhpcyksRW1iZXIuZGVmaW5l
        UHJvcGVydHkodGhpcyxlLG51bGwsdCksdGhpcy5iZWdpbk9ic2VydmluZ0Nv
        bnRlbnRLZXkoZSksdH0sYXJyYXlXaWxsQ2hhbmdlOmZ1bmN0aW9uKGUscixu
        KXt2YXIgaSxvLGE9dGhpcy5fa2V5cztvPW4+MD9yK246LTEsRW1iZXIuYmVn
        aW5Qcm9wZXJ0eUNoYW5nZXModGhpcyk7Zm9yKGkgaW4gYSlhLmhhc093blBy
        b3BlcnR5KGkpJiYobz4wJiZ0KGUsaSx0aGlzLHIsbyksRW1iZXIucHJvcGVy
        dHlXaWxsQ2hhbmdlKHRoaXMsaSkpO0VtYmVyLnByb3BlcnR5V2lsbENoYW5n
        ZSh0aGlzLl9jb250ZW50LCJAZWFjaCIpLEVtYmVyLmVuZFByb3BlcnR5Q2hh
        bmdlcyh0aGlzKX0sYXJyYXlEaWRDaGFuZ2U6ZnVuY3Rpb24odCxyLG4saSl7
        dmFyIG8sYT10aGlzLl9rZXlzO289aT4wP3IraTotMSxFbWJlci5jaGFuZ2VQ
        cm9wZXJ0aWVzKGZ1bmN0aW9uKCl7Zm9yKHZhciBuIGluIGEpYS5oYXNPd25Q
        cm9wZXJ0eShuKSYmKG8+MCYmZSh0LG4sdGhpcyxyLG8pLEVtYmVyLnByb3Bl
        cnR5RGlkQ2hhbmdlKHRoaXMsbikpO0VtYmVyLnByb3BlcnR5RGlkQ2hhbmdl
        KHRoaXMuX2NvbnRlbnQsIkBlYWNoIil9LHRoaXMpfSxkaWRBZGRMaXN0ZW5l
        cjpmdW5jdGlvbihlKXtzLnRlc3QoZSkmJnRoaXMuYmVnaW5PYnNlcnZpbmdD
        b250ZW50S2V5KGUuc2xpY2UoMCwtNykpfSxkaWRSZW1vdmVMaXN0ZW5lcjpm
        dW5jdGlvbihlKXtzLnRlc3QoZSkmJnRoaXMuc3RvcE9ic2VydmluZ0NvbnRl
        bnRLZXkoZS5zbGljZSgwLC03KSl9LGJlZ2luT2JzZXJ2aW5nQ29udGVudEtl
        eTpmdW5jdGlvbih0KXt2YXIgbj10aGlzLl9rZXlzO2lmKG58fChuPXRoaXMu
        X2tleXM9e30pLG5bdF0pblt0XSsrO2Vsc2V7blt0XT0xO3ZhciBpPXRoaXMu
        X2NvbnRlbnQsbz1yKGksImxlbmd0aCIpO2UoaSx0LHRoaXMsMCxvKX19LHN0
        b3BPYnNlcnZpbmdDb250ZW50S2V5OmZ1bmN0aW9uKGUpe3ZhciBuPXRoaXMu
        X2tleXM7aWYobiYmbltlXT4wJiYtLW5bZV08PTApe3ZhciBpPXRoaXMuX2Nv
        bnRlbnQsbz1yKGksImxlbmd0aCIpO3QoaSxlLHRoaXMsMCxvKX19LGNvbnRl
        bnRLZXlXaWxsQ2hhbmdlOmZ1bmN0aW9uKGUsdCl7RW1iZXIucHJvcGVydHlX
        aWxsQ2hhbmdlKHRoaXMsdCl9LGNvbnRlbnRLZXlEaWRDaGFuZ2U6ZnVuY3Rp
        b24oZSx0KXtFbWJlci5wcm9wZXJ0eURpZENoYW5nZSh0aGlzLHQpfX0pfSgp
        LGZ1bmN0aW9uKCl7dmFyIGU9RW1iZXIuZ2V0LHQ9KEVtYmVyLnNldCxFbWJl
        ci5FbnVtZXJhYmxlVXRpbHMuX3JlcGxhY2UpLHI9RW1iZXIuTWl4aW4uY3Jl
        YXRlKEVtYmVyLk11dGFibGVBcnJheSxFbWJlci5PYnNlcnZhYmxlLEVtYmVy
        LkNvcHlhYmxlLHtnZXQ6ZnVuY3Rpb24oZSl7cmV0dXJuImxlbmd0aCI9PT1l
        P3RoaXMubGVuZ3RoOiJudW1iZXIiPT10eXBlb2YgZT90aGlzW2VdOnRoaXMu
        X3N1cGVyKGUpfSxvYmplY3RBdDpmdW5jdGlvbihlKXtyZXR1cm4gdGhpc1tl
        XX0scmVwbGFjZTpmdW5jdGlvbihyLG4saSl7aWYodGhpcy5pc0Zyb3plbil0
        aHJvdyBFbWJlci5GUk9aRU5fRVJST1I7dmFyIG89aT9lKGksImxlbmd0aCIp
        OjA7cmV0dXJuIHRoaXMuYXJyYXlDb250ZW50V2lsbENoYW5nZShyLG4sbyks
        MD09PW8/dGhpcy5zcGxpY2UocixuKTp0KHRoaXMscixuLGkpLHRoaXMuYXJy
        YXlDb250ZW50RGlkQ2hhbmdlKHIsbixvKSx0aGlzfSx1bmtub3duUHJvcGVy
        dHk6ZnVuY3Rpb24oZSx0KXt2YXIgcjtyZXR1cm4gdm9pZCAwIT09dCYmdm9p
        ZCAwPT09ciYmKHI9dGhpc1tlXT10KSxyfSxpbmRleE9mOmZ1bmN0aW9uKGUs
        dCl7dmFyIHIsbj10aGlzLmxlbmd0aDtmb3IodD12b2lkIDA9PT10PzA6MD50
        P01hdGguY2VpbCh0KTpNYXRoLmZsb29yKHQpLDA+dCYmKHQrPW4pLHI9dDtu
        PnI7cisrKWlmKHRoaXNbcl09PT1lKXJldHVybiByO3JldHVybi0xfSxsYXN0
        SW5kZXhPZjpmdW5jdGlvbihlLHQpe3ZhciByLG49dGhpcy5sZW5ndGg7Zm9y
        KHQ9dm9pZCAwPT09dD9uLTE6MD50P01hdGguY2VpbCh0KTpNYXRoLmZsb29y
        KHQpLDA+dCYmKHQrPW4pLHI9dDtyPj0wO3ItLSlpZih0aGlzW3JdPT09ZSly
        ZXR1cm4gcjtyZXR1cm4tMX0sY29weTpmdW5jdGlvbihlKXtyZXR1cm4gZT90
        aGlzLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gRW1iZXIuY29weShlLCEwKX0p
        OnRoaXMuc2xpY2UoKX19KSxuPVsibGVuZ3RoIl07RW1iZXIuRW51bWVyYWJs
        ZVV0aWxzLmZvckVhY2goci5rZXlzKCksZnVuY3Rpb24oZSl7QXJyYXkucHJv
        dG90eXBlW2VdJiZuLnB1c2goZSl9KSxuLmxlbmd0aD4wJiYocj1yLndpdGhv
        dXQuYXBwbHkocixuKSksRW1iZXIuTmF0aXZlQXJyYXk9cixFbWJlci5BPWZ1
        bmN0aW9uKGUpe3JldHVybiB2b2lkIDA9PT1lJiYoZT1bXSksRW1iZXIuQXJy
        YXkuZGV0ZWN0KGUpP2U6RW1iZXIuTmF0aXZlQXJyYXkuYXBwbHkoZSl9LEVt
        YmVyLk5hdGl2ZUFycmF5LmFjdGl2YXRlPWZ1bmN0aW9uKCl7ci5hcHBseShB
        cnJheS5wcm90b3R5cGUpLEVtYmVyLkE9ZnVuY3Rpb24oZSl7cmV0dXJuIGV8
        fFtdfX0sKEVtYmVyLkVYVEVORF9QUk9UT1RZUEVTPT09ITB8fEVtYmVyLkVY
        VEVORF9QUk9UT1RZUEVTLkFycmF5KSYmRW1iZXIuTmF0aXZlQXJyYXkuYWN0
        aXZhdGUoKX0oKSxmdW5jdGlvbigpe3ZhciBlPUVtYmVyLmdldCx0PUVtYmVy
        LnNldCxyPUVtYmVyLmd1aWRGb3Isbj1FbWJlci5pc05vbmUsaT1FbWJlci5T
        dHJpbmcuZm10O0VtYmVyLlNldD1FbWJlci5Db3JlT2JqZWN0LmV4dGVuZChF
        bWJlci5NdXRhYmxlRW51bWVyYWJsZSxFbWJlci5Db3B5YWJsZSxFbWJlci5G
        cmVlemFibGUse2xlbmd0aDowLGNsZWFyOmZ1bmN0aW9uKCl7aWYodGhpcy5p
        c0Zyb3plbil0aHJvdyBuZXcgRW1iZXIuRXJyb3IoRW1iZXIuRlJPWkVOX0VS
        Uk9SKTt2YXIgbj1lKHRoaXMsImxlbmd0aCIpO2lmKDA9PT1uKXJldHVybiB0
        aGlzO3ZhciBpO3RoaXMuZW51bWVyYWJsZUNvbnRlbnRXaWxsQ2hhbmdlKG4s
        MCksRW1iZXIucHJvcGVydHlXaWxsQ2hhbmdlKHRoaXMsImZpcnN0T2JqZWN0
        IiksRW1iZXIucHJvcGVydHlXaWxsQ2hhbmdlKHRoaXMsImxhc3RPYmplY3Qi
        KTtmb3IodmFyIG89MDtuPm87bysrKWk9cih0aGlzW29dKSxkZWxldGUgdGhp
        c1tpXSxkZWxldGUgdGhpc1tvXTtyZXR1cm4gdCh0aGlzLCJsZW5ndGgiLDAp
        LEVtYmVyLnByb3BlcnR5RGlkQ2hhbmdlKHRoaXMsImZpcnN0T2JqZWN0Iiks
        RW1iZXIucHJvcGVydHlEaWRDaGFuZ2UodGhpcywibGFzdE9iamVjdCIpLHRo
        aXMuZW51bWVyYWJsZUNvbnRlbnREaWRDaGFuZ2UobiwwKSx0aGlzfSxpc0Vx
        dWFsOmZ1bmN0aW9uKHQpe2lmKCFFbWJlci5FbnVtZXJhYmxlLmRldGVjdCh0
        KSlyZXR1cm4hMTt2YXIgcj1lKHRoaXMsImxlbmd0aCIpO2lmKGUodCwibGVu
        Z3RoIikhPT1yKXJldHVybiExO2Zvcig7LS1yPj0wOylpZighdC5jb250YWlu
        cyh0aGlzW3JdKSlyZXR1cm4hMTtyZXR1cm4hMH0sYWRkOkVtYmVyLmFsaWFz
        TWV0aG9kKCJhZGRPYmplY3QiKSxyZW1vdmU6RW1iZXIuYWxpYXNNZXRob2Qo
        InJlbW92ZU9iamVjdCIpLHBvcDpmdW5jdGlvbigpe2lmKGUodGhpcywiaXNG
        cm96ZW4iKSl0aHJvdyBuZXcgRW1iZXIuRXJyb3IoRW1iZXIuRlJPWkVOX0VS
        Uk9SKTt2YXIgdD10aGlzLmxlbmd0aD4wP3RoaXNbdGhpcy5sZW5ndGgtMV06
        bnVsbDtyZXR1cm4gdGhpcy5yZW1vdmUodCksdH0scHVzaDpFbWJlci5hbGlh
        c01ldGhvZCgiYWRkT2JqZWN0Iiksc2hpZnQ6RW1iZXIuYWxpYXNNZXRob2Qo
        InBvcCIpLHVuc2hpZnQ6RW1iZXIuYWxpYXNNZXRob2QoInB1c2giKSxhZGRF
        YWNoOkVtYmVyLmFsaWFzTWV0aG9kKCJhZGRPYmplY3RzIikscmVtb3ZlRWFj
        aDpFbWJlci5hbGlhc01ldGhvZCgicmVtb3ZlT2JqZWN0cyIpLGluaXQ6ZnVu
        Y3Rpb24oZSl7dGhpcy5fc3VwZXIoKSxlJiZ0aGlzLmFkZE9iamVjdHMoZSl9
        LG5leHRPYmplY3Q6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXNbZV19LGZpcnN0
        T2JqZWN0OkVtYmVyLmNvbXB1dGVkKGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMu
        bGVuZ3RoPjA/dGhpc1swXTp2b2lkIDB9KSxsYXN0T2JqZWN0OkVtYmVyLmNv
        bXB1dGVkKGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubGVuZ3RoPjA/dGhpc1t0
        aGlzLmxlbmd0aC0xXTp2b2lkIDB9KSxhZGRPYmplY3Q6ZnVuY3Rpb24oaSl7
        aWYoZSh0aGlzLCJpc0Zyb3plbiIpKXRocm93IG5ldyBFbWJlci5FcnJvcihF
        bWJlci5GUk9aRU5fRVJST1IpO2lmKG4oaSkpcmV0dXJuIHRoaXM7dmFyIG8s
        YT1yKGkpLHM9dGhpc1thXSx1PWUodGhpcywibGVuZ3RoIik7cmV0dXJuIHM+
        PTAmJnU+cyYmdGhpc1tzXT09PWk/dGhpczoobz1baV0sdGhpcy5lbnVtZXJh
        YmxlQ29udGVudFdpbGxDaGFuZ2UobnVsbCxvKSxFbWJlci5wcm9wZXJ0eVdp
        bGxDaGFuZ2UodGhpcywibGFzdE9iamVjdCIpLHU9ZSh0aGlzLCJsZW5ndGgi
        KSx0aGlzW2FdPXUsdGhpc1t1XT1pLHQodGhpcywibGVuZ3RoIix1KzEpLEVt
        YmVyLnByb3BlcnR5RGlkQ2hhbmdlKHRoaXMsImxhc3RPYmplY3QiKSx0aGlz
        LmVudW1lcmFibGVDb250ZW50RGlkQ2hhbmdlKG51bGwsbyksdGhpcyl9LHJl
        bW92ZU9iamVjdDpmdW5jdGlvbihpKXtpZihlKHRoaXMsImlzRnJvemVuIikp
        dGhyb3cgbmV3IEVtYmVyLkVycm9yKEVtYmVyLkZST1pFTl9FUlJPUik7aWYo
        bihpKSlyZXR1cm4gdGhpczt2YXIgbyxhLHM9cihpKSx1PXRoaXNbc10sYz1l
        KHRoaXMsImxlbmd0aCIpLGw9MD09PXUsaD11PT09Yy0xO3JldHVybiB1Pj0w
        JiZjPnUmJnRoaXNbdV09PT1pJiYoYT1baV0sdGhpcy5lbnVtZXJhYmxlQ29u
        dGVudFdpbGxDaGFuZ2UoYSxudWxsKSxsJiZFbWJlci5wcm9wZXJ0eVdpbGxD
        aGFuZ2UodGhpcywiZmlyc3RPYmplY3QiKSxoJiZFbWJlci5wcm9wZXJ0eVdp
        bGxDaGFuZ2UodGhpcywibGFzdE9iamVjdCIpLGMtMT51JiYobz10aGlzW2Mt
        MV0sdGhpc1t1XT1vLHRoaXNbcihvKV09dSksZGVsZXRlIHRoaXNbc10sZGVs
        ZXRlIHRoaXNbYy0xXSx0KHRoaXMsImxlbmd0aCIsYy0xKSxsJiZFbWJlci5w
        cm9wZXJ0eURpZENoYW5nZSh0aGlzLCJmaXJzdE9iamVjdCIpLGgmJkVtYmVy
        LnByb3BlcnR5RGlkQ2hhbmdlKHRoaXMsImxhc3RPYmplY3QiKSx0aGlzLmVu
        dW1lcmFibGVDb250ZW50RGlkQ2hhbmdlKGEsbnVsbCkpLHRoaXN9LGNvbnRh
        aW5zOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzW3IoZSldPj0wfSxjb3B5OmZ1
        bmN0aW9uKCl7dmFyIG49dGhpcy5jb25zdHJ1Y3RvcixpPW5ldyBuLG89ZSh0
        aGlzLCJsZW5ndGgiKTtmb3IodChpLCJsZW5ndGgiLG8pOy0tbz49MDspaVtv
        XT10aGlzW29dLGlbcih0aGlzW29dKV09bztyZXR1cm4gaX0sdG9TdHJpbmc6
        ZnVuY3Rpb24oKXt2YXIgZSx0PXRoaXMubGVuZ3RoLHI9W107Zm9yKGU9MDt0
        PmU7ZSsrKXJbZV09dGhpc1tlXTtyZXR1cm4gaSgiRW1iZXIuU2V0PCVAPiIs
        W3Iuam9pbigiLCIpXSl9fSl9KCksZnVuY3Rpb24oKXt2YXIgZT1FbWJlci5E
        ZWZlcnJlZE1peGluO0VtYmVyLmdldDt2YXIgdD1FbWJlci5PYmplY3QuZXh0
        ZW5kKGUpO3QucmVvcGVuQ2xhc3Moe3Byb21pc2U6ZnVuY3Rpb24oZSxyKXt2
        YXIgbj10LmNyZWF0ZSgpO3JldHVybiBlLmNhbGwocixuKSxufX0pLEVtYmVy
        LkRlZmVycmVkPXR9KCksZnVuY3Rpb24oKXt2YXIgZT1FbWJlci5BcnJheVBv
        bHlmaWxscy5mb3JFYWNoLHQ9RW1iZXIuRU5WLkVNQkVSX0xPQURfSE9PS1N8
        fHt9LHI9e307RW1iZXIub25Mb2FkPWZ1bmN0aW9uKGUsbil7dmFyIGk7dFtl
        XT10W2VdfHxFbWJlci5BKCksdFtlXS5wdXNoT2JqZWN0KG4pLChpPXJbZV0p
        JiZuKGkpfSxFbWJlci5ydW5Mb2FkSG9va3M9ZnVuY3Rpb24obixpKXtyW25d
        PWksdFtuXSYmZS5jYWxsKHRbbl0sZnVuY3Rpb24oZSl7ZShpKX0pfX0oKSxm
        dW5jdGlvbigpe0VtYmVyLmdldCxFbWJlci5Db250cm9sbGVyTWl4aW49RW1i
        ZXIuTWl4aW4uY3JlYXRlKEVtYmVyLkFjdGlvbkhhbmRsZXIse2lzQ29udHJv
        bGxlcjohMCx0YXJnZXQ6bnVsbCxjb250YWluZXI6bnVsbCxwYXJlbnRDb250
        cm9sbGVyOm51bGwsc3RvcmU6bnVsbCxtb2RlbDpFbWJlci5jb21wdXRlZC5h
        bGlhcygiY29udGVudCIpLGRlcHJlY2F0ZWRTZW5kSGFuZGxlczpmdW5jdGlv
        bihlKXtyZXR1cm4hIXRoaXNbZV19LGRlcHJlY2F0ZWRTZW5kOmZ1bmN0aW9u
        KGUpe3ZhciB0PVtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpO3RoaXNbZV0u
        YXBwbHkodGhpcyx0KX19KSxFbWJlci5Db250cm9sbGVyPUVtYmVyLk9iamVj
        dC5leHRlbmQoRW1iZXIuQ29udHJvbGxlck1peGluKX0oKSxmdW5jdGlvbigp
        e3ZhciBlPUVtYmVyLmdldCx0PShFbWJlci5zZXQsRW1iZXIuRW51bWVyYWJs
        ZVV0aWxzLmZvckVhY2gpO0VtYmVyLlNvcnRhYmxlTWl4aW49RW1iZXIuTWl4
        aW4uY3JlYXRlKEVtYmVyLk11dGFibGVFbnVtZXJhYmxlLHtzb3J0UHJvcGVy
        dGllczpudWxsLHNvcnRBc2NlbmRpbmc6ITAsc29ydEZ1bmN0aW9uOkVtYmVy
        LmNvbXBhcmUsb3JkZXJCeTpmdW5jdGlvbihyLG4pe3ZhciBpPTAsbz1lKHRo
        aXMsInNvcnRQcm9wZXJ0aWVzIiksYT1lKHRoaXMsInNvcnRBc2NlbmRpbmci
        KSxzPWUodGhpcywic29ydEZ1bmN0aW9uIik7cmV0dXJuIHQobyxmdW5jdGlv
        bih0KXswPT09aSYmKGk9cyhlKHIsdCksZShuLHQpKSwwPT09aXx8YXx8KGk9
        LTEqaSkpfSksaX0sZGVzdHJveTpmdW5jdGlvbigpe3ZhciByPWUodGhpcywi
        Y29udGVudCIpLG49ZSh0aGlzLCJzb3J0UHJvcGVydGllcyIpO3JldHVybiBy
        JiZuJiZ0KHIsZnVuY3Rpb24oZSl7dChuLGZ1bmN0aW9uKHQpe0VtYmVyLnJl
        bW92ZU9ic2VydmVyKGUsdCx0aGlzLCJjb250ZW50SXRlbVNvcnRQcm9wZXJ0
        eURpZENoYW5nZSIpfSx0aGlzKX0sdGhpcyksdGhpcy5fc3VwZXIoKX0saXNT
        b3J0ZWQ6RW1iZXIuY29tcHV0ZWQuYm9vbCgic29ydFByb3BlcnRpZXMiKSxh
        cnJhbmdlZENvbnRlbnQ6RW1iZXIuY29tcHV0ZWQoImNvbnRlbnQiLCJzb3J0
        UHJvcGVydGllcy5AZWFjaCIsZnVuY3Rpb24oKXt2YXIgcj1lKHRoaXMsImNv
        bnRlbnQiKSxuPWUodGhpcywiaXNTb3J0ZWQiKSxpPWUodGhpcywic29ydFBy
        b3BlcnRpZXMiKSxvPXRoaXM7cmV0dXJuIHImJm4/KHI9ci5zbGljZSgpLHIu
        c29ydChmdW5jdGlvbihlLHQpe3JldHVybiBvLm9yZGVyQnkoZSx0KX0pLHQo
        cixmdW5jdGlvbihlKXt0KGksZnVuY3Rpb24odCl7RW1iZXIuYWRkT2JzZXJ2
        ZXIoZSx0LHRoaXMsImNvbnRlbnRJdGVtU29ydFByb3BlcnR5RGlkQ2hhbmdl
        Iil9LHRoaXMpfSx0aGlzKSxFbWJlci5BKHIpKTpyfSksX2NvbnRlbnRXaWxs
        Q2hhbmdlOkVtYmVyLmJlZm9yZU9ic2VydmVyKCJjb250ZW50IixmdW5jdGlv
        bigpe3ZhciByPWUodGhpcywiY29udGVudCIpLG49ZSh0aGlzLCJzb3J0UHJv
        cGVydGllcyIpO3ImJm4mJnQocixmdW5jdGlvbihlKXt0KG4sZnVuY3Rpb24o
        dCl7RW1iZXIucmVtb3ZlT2JzZXJ2ZXIoZSx0LHRoaXMsImNvbnRlbnRJdGVt
        U29ydFByb3BlcnR5RGlkQ2hhbmdlIil9LHRoaXMpfSx0aGlzKSx0aGlzLl9z
        dXBlcigpfSksc29ydEFzY2VuZGluZ1dpbGxDaGFuZ2U6RW1iZXIuYmVmb3Jl
        T2JzZXJ2ZXIoInNvcnRBc2NlbmRpbmciLGZ1bmN0aW9uKCl7dGhpcy5fbGFz
        dFNvcnRBc2NlbmRpbmc9ZSh0aGlzLCJzb3J0QXNjZW5kaW5nIil9KSxzb3J0
        QXNjZW5kaW5nRGlkQ2hhbmdlOkVtYmVyLm9ic2VydmVyKCJzb3J0QXNjZW5k
        aW5nIixmdW5jdGlvbigpe2lmKGUodGhpcywic29ydEFzY2VuZGluZyIpIT09
        dGhpcy5fbGFzdFNvcnRBc2NlbmRpbmcpe3ZhciB0PWUodGhpcywiYXJyYW5n
        ZWRDb250ZW50Iik7dC5yZXZlcnNlT2JqZWN0cygpfX0pLGNvbnRlbnRBcnJh
        eVdpbGxDaGFuZ2U6ZnVuY3Rpb24ocixuLGksbyl7dmFyIGE9ZSh0aGlzLCJp
        c1NvcnRlZCIpO2lmKGEpe3ZhciBzPWUodGhpcywiYXJyYW5nZWRDb250ZW50
        IiksdT1yLnNsaWNlKG4sbitpKSxjPWUodGhpcywic29ydFByb3BlcnRpZXMi
        KTt0KHUsZnVuY3Rpb24oZSl7cy5yZW1vdmVPYmplY3QoZSksdChjLGZ1bmN0
        aW9uKHQpe0VtYmVyLnJlbW92ZU9ic2VydmVyKGUsdCx0aGlzLCJjb250ZW50
        SXRlbVNvcnRQcm9wZXJ0eURpZENoYW5nZSIpfSx0aGlzKX0sdGhpcyl9cmV0
        dXJuIHRoaXMuX3N1cGVyKHIsbixpLG8pfSxjb250ZW50QXJyYXlEaWRDaGFu
        Z2U6ZnVuY3Rpb24ocixuLGksbyl7dmFyIGE9ZSh0aGlzLCJpc1NvcnRlZCIp
        LHM9ZSh0aGlzLCJzb3J0UHJvcGVydGllcyIpO2lmKGEpe3ZhciB1PXIuc2xp
        Y2UobixuK28pO3QodSxmdW5jdGlvbihlKXt0aGlzLmluc2VydEl0ZW1Tb3J0
        ZWQoZSksdChzLGZ1bmN0aW9uKHQpe0VtYmVyLmFkZE9ic2VydmVyKGUsdCx0
        aGlzLCJjb250ZW50SXRlbVNvcnRQcm9wZXJ0eURpZENoYW5nZSIpfSx0aGlz
        KX0sdGhpcyl9cmV0dXJuIHRoaXMuX3N1cGVyKHIsbixpLG8pfSxpbnNlcnRJ
        dGVtU29ydGVkOmZ1bmN0aW9uKHQpe3ZhciByPWUodGhpcywiYXJyYW5nZWRD
        b250ZW50Iiksbj1lKHIsImxlbmd0aCIpLGk9dGhpcy5fYmluYXJ5U2VhcmNo
        KHQsMCxuKTtyLmluc2VydEF0KGksdCl9LGNvbnRlbnRJdGVtU29ydFByb3Bl
        cnR5RGlkQ2hhbmdlOmZ1bmN0aW9uKHQpe3ZhciByPWUodGhpcywiYXJyYW5n
        ZWRDb250ZW50Iiksbj1yLmluZGV4T2YodCksaT1yLm9iamVjdEF0KG4tMSks
        bz1yLm9iamVjdEF0KG4rMSksYT1pJiZ0aGlzLm9yZGVyQnkodCxpKSxzPW8m
        JnRoaXMub3JkZXJCeSh0LG8pOygwPmF8fHM+MCkmJihyLnJlbW92ZU9iamVj
        dCh0KSx0aGlzLmluc2VydEl0ZW1Tb3J0ZWQodCkpfSxfYmluYXJ5U2VhcmNo
        OmZ1bmN0aW9uKHQscixuKXt2YXIgaSxvLGEscztyZXR1cm4gcj09PW4/cjoo
        cz1lKHRoaXMsImFycmFuZ2VkQ29udGVudCIpLGk9citNYXRoLmZsb29yKChu
        LXIpLzIpLG89cy5vYmplY3RBdChpKSxhPXRoaXMub3JkZXJCeShvLHQpLDA+
        YT90aGlzLl9iaW5hcnlTZWFyY2godCxpKzEsbik6YT4wP3RoaXMuX2JpbmFy
        eVNlYXJjaCh0LHIsaSk6aSl9fSl9KCksZnVuY3Rpb24oKXt2YXIgZT1FbWJl
        ci5nZXQsdD0oRW1iZXIuc2V0LEVtYmVyLkVudW1lcmFibGVVdGlscy5mb3JF
        YWNoKSxyPUVtYmVyLkVudW1lcmFibGVVdGlscy5yZXBsYWNlO0VtYmVyLkFy
        cmF5Q29udHJvbGxlcj1FbWJlci5BcnJheVByb3h5LmV4dGVuZChFbWJlci5D
        b250cm9sbGVyTWl4aW4sRW1iZXIuU29ydGFibGVNaXhpbix7aXRlbUNvbnRy
        b2xsZXI6bnVsbCxsb29rdXBJdGVtQ29udHJvbGxlcjpmdW5jdGlvbigpe3Jl
        dHVybiBlKHRoaXMsIml0ZW1Db250cm9sbGVyIil9LG9iamVjdEF0Q29udGVu
        dDpmdW5jdGlvbih0KXt2YXIgcj1lKHRoaXMsImxlbmd0aCIpLG49ZSh0aGlz
        LCJhcnJhbmdlZENvbnRlbnQiKSxpPW4mJm4ub2JqZWN0QXQodCk7aWYodD49
        MCYmcj50KXt2YXIgbz10aGlzLmxvb2t1cEl0ZW1Db250cm9sbGVyKGkpO2lm
        KG8pcmV0dXJuIHRoaXMuY29udHJvbGxlckF0KHQsaSxvKX1yZXR1cm4gaX0s
        YXJyYW5nZWRDb250ZW50RGlkQ2hhbmdlOmZ1bmN0aW9uKCl7dGhpcy5fc3Vw
        ZXIoKSx0aGlzLl9yZXNldFN1YkNvbnRyb2xsZXJzKCl9LGFycmF5Q29udGVu
        dERpZENoYW5nZTpmdW5jdGlvbihuLGksbyl7dmFyIGE9ZSh0aGlzLCJfc3Vi
        Q29udHJvbGxlcnMiKSxzPWEuc2xpY2UobixuK2kpO3QocyxmdW5jdGlvbihl
        KXtlJiZlLmRlc3Ryb3koKX0pLHIoYSxuLGksbmV3IEFycmF5KG8pKSx0aGlz
        Ll9zdXBlcihuLGksbyl9LGluaXQ6ZnVuY3Rpb24oKXt0aGlzLl9zdXBlcigp
        LHRoaXMuc2V0KCJfc3ViQ29udHJvbGxlcnMiLEVtYmVyLkEoKSl9LGNvbnRl
        bnQ6RW1iZXIuY29tcHV0ZWQoZnVuY3Rpb24oKXtyZXR1cm4gRW1iZXIuQSgp
        fSksY29udHJvbGxlckF0OmZ1bmN0aW9uKHQscixuKXt2YXIgaSxvPWUodGhp
        cywiY29udGFpbmVyIiksYT1lKHRoaXMsIl9zdWJDb250cm9sbGVycyIpLHM9
        YVt0XTtpZihzKXJldHVybiBzO2lmKGk9ImNvbnRyb2xsZXI6IituLCFvLmhh
        cyhpKSl0aHJvdyBuZXcgRW1iZXIuRXJyb3IoJ0NvdWxkIG5vdCByZXNvbHZl
        IGl0ZW1Db250cm9sbGVyOiAiJytuKyciJyk7cmV0dXJuIHM9by5sb29rdXBG
        YWN0b3J5KGkpLmNyZWF0ZSh7dGFyZ2V0OnRoaXMscGFyZW50Q29udHJvbGxl
        cjplKHRoaXMsInBhcmVudENvbnRyb2xsZXIiKXx8dGhpcyxjb250ZW50OnJ9
        KSxhW3RdPXMsc30sX3N1YkNvbnRyb2xsZXJzOm51bGwsX3Jlc2V0U3ViQ29u
        dHJvbGxlcnM6ZnVuY3Rpb24oKXt2YXIgcj1lKHRoaXMsIl9zdWJDb250cm9s
        bGVycyIpO3ImJnQocixmdW5jdGlvbihlKXtlJiZlLmRlc3Ryb3koKX0pLHRo
        aXMuc2V0KCJfc3ViQ29udHJvbGxlcnMiLEVtYmVyLkEoKSl9fSl9KCksZnVu
        Y3Rpb24oKXtFbWJlci5PYmplY3RDb250cm9sbGVyPUVtYmVyLk9iamVjdFBy
        b3h5LmV4dGVuZChFbWJlci5Db250cm9sbGVyTWl4aW4pfSgpLGZ1bmN0aW9u
        KCl7dmFyIGU9dGhpcy5qUXVlcnl8fEVtYmVyLmltcG9ydHMmJkVtYmVyLmlt
        cG9ydHMualF1ZXJ5O2V8fCJmdW5jdGlvbiIhPXR5cGVvZiByZXF1aXJlfHwo
        ZT1yZXF1aXJlKCJqcXVlcnkiKSksRW1iZXIuJD1lfSgpLGZ1bmN0aW9uKCl7
        aWYoRW1iZXIuJCl7dmFyIGU9RW1iZXIuU3RyaW5nLncoImRyYWdzdGFydCBk
        cmFnIGRyYWdlbnRlciBkcmFnbGVhdmUgZHJhZ292ZXIgZHJvcCBkcmFnZW5k
        Iik7RW1iZXIuRW51bWVyYWJsZVV0aWxzLmZvckVhY2goZSxmdW5jdGlvbihl
        KXtFbWJlci4kLmV2ZW50LmZpeEhvb2tzW2VdPXtwcm9wczpbImRhdGFUcmFu
        c2ZlciJdfX0pfX0oKSxmdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSl7dmFyIHQ9
        ZS5zaGlmdEtleXx8ZS5tZXRhS2V5fHxlLmFsdEtleXx8ZS5jdHJsS2V5LHI9
        ZS53aGljaD4xO3JldHVybiF0JiYhcn12YXIgdD10aGlzLmRvY3VtZW50JiZm
        dW5jdGlvbigpe3ZhciBlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIp
        O3JldHVybiBlLmlubmVySFRNTD0iPGRpdj48L2Rpdj4iLGUuZmlyc3RDaGls
        ZC5pbm5lckhUTUw9IjxzY3JpcHQ+PC9zY3JpcHQ+IiwiIj09PWUuZmlyc3RD
        aGlsZC5pbm5lckhUTUx9KCkscj10aGlzLmRvY3VtZW50JiZmdW5jdGlvbigp
        e3ZhciBlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpO3JldHVybiBl
        LmlubmVySFRNTD0iVGVzdDogPHNjcmlwdCB0eXBlPSd0ZXh0L3gtcGxhY2Vo
        b2xkZXInPjwvc2NyaXB0PlZhbHVlIiwiVGVzdDoiPT09ZS5jaGlsZE5vZGVz
        WzBdLm5vZGVWYWx1ZSYmIiBWYWx1ZSI9PT1lLmNoaWxkTm9kZXNbMl0ubm9k
        ZVZhbHVlfSgpLG49ZnVuY3Rpb24oZSx0KXtpZihlLmdldEF0dHJpYnV0ZSgi
        aWQiKT09PXQpcmV0dXJuIGU7dmFyIHIsaSxvLGE9ZS5jaGlsZE5vZGVzLmxl
        bmd0aDtmb3Iocj0wO2E+cjtyKyspaWYoaT1lLmNoaWxkTm9kZXNbcl0sbz0x
        PT09aS5ub2RlVHlwZSYmbihpLHQpKXJldHVybiBvfSxpPWZ1bmN0aW9uKGUs
        aSl7dCYmKGk9IiZzaHk7IitpKTt2YXIgbz1bXTtpZihyJiYoaT1pLnJlcGxh
        Y2UoLyhccyspKDxzY3JpcHQgaWQ9JyhbXiddKyknKS9nLGZ1bmN0aW9uKGUs
        dCxyLG4pe3JldHVybiBvLnB1c2goW24sdF0pLHJ9KSksZS5pbm5lckhUTUw9
        aSxvLmxlbmd0aD4wKXt2YXIgYSxzPW8ubGVuZ3RoO2ZvcihhPTA7cz5hO2Er
        Kyl7dmFyIHU9bihlLG9bYV1bMF0pLGM9ZG9jdW1lbnQuY3JlYXRlVGV4dE5v
        ZGUob1thXVsxXSk7dS5wYXJlbnROb2RlLmluc2VydEJlZm9yZShjLHUpfX1p
        Zih0KXtmb3IodmFyIGw9ZS5maXJzdENoaWxkOzE9PT1sLm5vZGVUeXBlJiYh
        bC5ub2RlTmFtZTspbD1sLmZpcnN0Q2hpbGQ7Mz09PWwubm9kZVR5cGUmJiLC
        rSI9PT1sLm5vZGVWYWx1ZS5jaGFyQXQoMCkmJihsLm5vZGVWYWx1ZT1sLm5v
        ZGVWYWx1ZS5zbGljZSgxKSl9fSxvPXt9LGE9ZnVuY3Rpb24oZSl7aWYodm9p
        ZCAwIT09b1tlXSlyZXR1cm4gb1tlXTt2YXIgdD0hMDtpZigic2VsZWN0Ij09
        PWUudG9Mb3dlckNhc2UoKSl7dmFyIHI9ZG9jdW1lbnQuY3JlYXRlRWxlbWVu
        dCgic2VsZWN0Iik7aShyLCc8b3B0aW9uIHZhbHVlPSJ0ZXN0Ij5UZXN0PC9v
        cHRpb24+JyksdD0xPT09ci5vcHRpb25zLmxlbmd0aH1yZXR1cm4gb1tlXT10
        LHR9LHM9ZnVuY3Rpb24oZSx0KXt2YXIgcj1lLnRhZ05hbWU7aWYoYShyKSlp
        KGUsdCk7ZWxzZXt2YXIgbj1lLm91dGVySFRNTHx8KG5ldyBYTUxTZXJpYWxp
        emVyKS5zZXJpYWxpemVUb1N0cmluZyhlKSxvPW4ubWF0Y2gobmV3IFJlZ0V4
        cCgiPCIrcisiKFtePl0qKT4iLCJpIikpWzBdLHM9IjwvIityKyI+Iix1PWRv
        Y3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpO2ZvcihpKHUsbyt0K3MpLGU9
        dS5maXJzdENoaWxkO2UudGFnTmFtZSE9PXI7KWU9ZS5uZXh0U2libGluZ31y
        ZXR1cm4gZX07RW1iZXIuVmlld1V0aWxzPXtzZXRJbm5lckhUTUw6cyxpc1Np
        bXBsZUNsaWNrOmV9fSgpLGZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXtyZXR1
        cm4gZT9uLnRlc3QoZSk/ZS5yZXBsYWNlKGksIiIpOmU6ZX1mdW5jdGlvbiB0
        KGUpe3ZhciB0PXsiPCI6IiZsdDsiLCI+IjoiJmd0OyIsJyInOiImcXVvdDsi
        LCInIjoiJiN4Mjc7IiwiYCI6IiYjeDYwOyJ9LHI9ZnVuY3Rpb24oZSl7cmV0
        dXJuIHRbZV18fCImYW1wOyJ9LG49ZS50b1N0cmluZygpO3JldHVybiBhLnRl
        c3Qobik/bi5yZXBsYWNlKG8scik6bn1FbWJlci5nZXQsRW1iZXIuc2V0O3Zh
        ciByPWZ1bmN0aW9uKCl7dGhpcy5zZWVuPXt9LHRoaXMubGlzdD1bXX07ci5w
        cm90b3R5cGU9e2FkZDpmdW5jdGlvbihlKXtlIGluIHRoaXMuc2Vlbnx8KHRo
        aXMuc2VlbltlXT0hMCx0aGlzLmxpc3QucHVzaChlKSl9LHRvRE9NOmZ1bmN0
        aW9uKCl7cmV0dXJuIHRoaXMubGlzdC5qb2luKCIgIil9fTt2YXIgbj0vW15h
        LXpBLVowLTlcLV0vLGk9L1teYS16QS1aMC05XC1dL2csbz0vJig/IVx3Kzsp
        fFs8PiInYF0vZyxhPS9bJjw+IidgXS8scz1mdW5jdGlvbigpe3ZhciBlPWRv
        Y3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpLHQ9ZG9jdW1lbnQuY3JlYXRl
        RWxlbWVudCgiaW5wdXQiKTtyZXR1cm4gdC5zZXRBdHRyaWJ1dGUoIm5hbWUi
        LCJmb28iKSxlLmFwcGVuZENoaWxkKHQpLCEhZS5pbm5lckhUTUwubWF0Y2go
        ImZvbyIpfSgpO0VtYmVyLlJlbmRlckJ1ZmZlcj1mdW5jdGlvbihlKXtyZXR1
        cm4gbmV3IEVtYmVyLl9SZW5kZXJCdWZmZXIoZSl9LEVtYmVyLl9SZW5kZXJC
        dWZmZXI9ZnVuY3Rpb24oZSl7dGhpcy50YWdOYW1lcz1bZXx8bnVsbF0sdGhp
        cy5idWZmZXI9IiJ9LEVtYmVyLl9SZW5kZXJCdWZmZXIucHJvdG90eXBlPXtf
        ZWxlbWVudDpudWxsLF9oYXNFbGVtZW50OiEwLGVsZW1lbnRDbGFzc2VzOm51
        bGwsY2xhc3NlczpudWxsLGVsZW1lbnRJZDpudWxsLGVsZW1lbnRBdHRyaWJ1
        dGVzOm51bGwsZWxlbWVudFByb3BlcnRpZXM6bnVsbCxlbGVtZW50VGFnOm51
        bGwsZWxlbWVudFN0eWxlOm51bGwscGFyZW50QnVmZmVyOm51bGwscHVzaDpm
        dW5jdGlvbihlKXtyZXR1cm4gdGhpcy5idWZmZXIrPWUsdGhpc30sYWRkQ2xh
        c3M6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuZWxlbWVudENsYXNzZXM9dGhp
        cy5lbGVtZW50Q2xhc3Nlc3x8bmV3IHIsdGhpcy5lbGVtZW50Q2xhc3Nlcy5h
        ZGQoZSksdGhpcy5jbGFzc2VzPXRoaXMuZWxlbWVudENsYXNzZXMubGlzdCx0
        aGlzfSxzZXRDbGFzc2VzOmZ1bmN0aW9uKGUpe3RoaXMuY2xhc3Nlcz1lfSxp
        ZDpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5lbGVtZW50SWQ9ZSx0aGlzfSxh
        dHRyOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcy5lbGVtZW50QXR0cmlidXRl
        cz10aGlzLmVsZW1lbnRBdHRyaWJ1dGVzfHx7fTtyZXR1cm4gMT09PWFyZ3Vt
        ZW50cy5sZW5ndGg/cltlXToocltlXT10LHRoaXMpfSxyZW1vdmVBdHRyOmZ1
        bmN0aW9uKGUpe3ZhciB0PXRoaXMuZWxlbWVudEF0dHJpYnV0ZXM7cmV0dXJu
        IHQmJmRlbGV0ZSB0W2VdLHRoaXN9LHByb3A6ZnVuY3Rpb24oZSx0KXt2YXIg
        cj10aGlzLmVsZW1lbnRQcm9wZXJ0aWVzPXRoaXMuZWxlbWVudFByb3BlcnRp
        ZXN8fHt9O3JldHVybiAxPT09YXJndW1lbnRzLmxlbmd0aD9yW2VdOihyW2Vd
        PXQsdGhpcyl9LHJlbW92ZVByb3A6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5l
        bGVtZW50UHJvcGVydGllcztyZXR1cm4gdCYmZGVsZXRlIHRbZV0sdGhpc30s
        c3R5bGU6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5lbGVtZW50U3R5bGU9
        dGhpcy5lbGVtZW50U3R5bGV8fHt9LHRoaXMuZWxlbWVudFN0eWxlW2VdPXQs
        dGhpc30sYmVnaW46ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMudGFnTmFtZXMu
        cHVzaChlfHxudWxsKSx0aGlzfSxwdXNoT3BlbmluZ1RhZzpmdW5jdGlvbigp
        e3ZhciByPXRoaXMuY3VycmVudFRhZ05hbWUoKTtpZihyKXtpZih0aGlzLl9o
        YXNFbGVtZW50JiYhdGhpcy5fZWxlbWVudCYmMD09PXRoaXMuYnVmZmVyLmxl
        bmd0aClyZXR1cm4gdGhpcy5fZWxlbWVudD10aGlzLmdlbmVyYXRlRWxlbWVu
        dCgpLHZvaWQgMDt2YXIgbixpLG89dGhpcy5idWZmZXIsYT10aGlzLmVsZW1l
        bnRJZCxzPXRoaXMuY2xhc3Nlcyx1PXRoaXMuZWxlbWVudEF0dHJpYnV0ZXMs
        Yz10aGlzLmVsZW1lbnRQcm9wZXJ0aWVzLGw9dGhpcy5lbGVtZW50U3R5bGU7
        aWYobys9IjwiK2UociksYSYmKG8rPScgaWQ9IicrdChhKSsnIicsdGhpcy5l
        bGVtZW50SWQ9bnVsbCkscyYmKG8rPScgY2xhc3M9IicrdChzLmpvaW4oIiAi
        KSkrJyInLHRoaXMuY2xhc3Nlcz1udWxsKSxsKXtvKz0nIHN0eWxlPSInO2Zv
        cihpIGluIGwpbC5oYXNPd25Qcm9wZXJ0eShpKSYmKG8rPWkrIjoiK3QobFtp
        XSkrIjsiKTtvKz0nIicsdGhpcy5lbGVtZW50U3R5bGU9bnVsbH1pZih1KXtm
        b3IobiBpbiB1KXUuaGFzT3duUHJvcGVydHkobikmJihvKz0iICIrbisnPSIn
        K3QodVtuXSkrJyInKTt0aGlzLmVsZW1lbnRBdHRyaWJ1dGVzPW51bGx9aWYo
        Yyl7Zm9yKGkgaW4gYylpZihjLmhhc093blByb3BlcnR5KGkpKXt2YXIgaD1j
        W2ldOyhofHwibnVtYmVyIj09dHlwZW9mIGgpJiYobys9aD09PSEwPyIgIitp
        Kyc9IicraSsnIic6IiAiK2krJz0iJyt0KGNbaV0pKyciJyl9dGhpcy5lbGVt
        ZW50UHJvcGVydGllcz1udWxsfW8rPSI+Iix0aGlzLmJ1ZmZlcj1vfX0scHVz
        aENsb3NpbmdUYWc6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLnRhZ05hbWVzLnBv
        cCgpO3QmJih0aGlzLmJ1ZmZlcis9IjwvIitlKHQpKyI+Iil9LGN1cnJlbnRU
        YWdOYW1lOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudGFnTmFtZXNbdGhpcy50
        YWdOYW1lcy5sZW5ndGgtMV19LGdlbmVyYXRlRWxlbWVudDpmdW5jdGlvbigp
        e3ZhciByLG4saSxvPXRoaXMudGFnTmFtZXMucG9wKCksYT10aGlzLmVsZW1l
        bnRJZCx1PXRoaXMuY2xhc3NlcyxjPXRoaXMuZWxlbWVudEF0dHJpYnV0ZXMs
        bD10aGlzLmVsZW1lbnRQcm9wZXJ0aWVzLGg9dGhpcy5lbGVtZW50U3R5bGUs
        bT0iIjtpPWMmJmMubmFtZSYmIXM/IjwiK2UobykrJyBuYW1lPSInK3QoYy5u
        YW1lKSsnIj4nOm87dmFyIGY9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChpKSxw
        PUVtYmVyLiQoZik7aWYoYSYmKHAuYXR0cigiaWQiLGEpLHRoaXMuZWxlbWVu
        dElkPW51bGwpLHUmJihwLmF0dHIoImNsYXNzIix1LmpvaW4oIiAiKSksdGhp
        cy5jbGFzc2VzPW51bGwpLGgpe2ZvcihuIGluIGgpaC5oYXNPd25Qcm9wZXJ0
        eShuKSYmKG0rPW4rIjoiK2hbbl0rIjsiKTtwLmF0dHIoInN0eWxlIixtKSx0
        aGlzLmVsZW1lbnRTdHlsZT1udWxsfWlmKGMpe2ZvcihyIGluIGMpYy5oYXNP
        d25Qcm9wZXJ0eShyKSYmcC5hdHRyKHIsY1tyXSk7dGhpcy5lbGVtZW50QXR0
        cmlidXRlcz1udWxsfWlmKGwpe2ZvcihuIGluIGwpbC5oYXNPd25Qcm9wZXJ0
        eShuKSYmcC5wcm9wKG4sbFtuXSk7dGhpcy5lbGVtZW50UHJvcGVydGllcz1u
        dWxsfXJldHVybiBmfSxlbGVtZW50OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5p
        bm5lclN0cmluZygpO3JldHVybiBlJiYodGhpcy5fZWxlbWVudD1FbWJlci5W
        aWV3VXRpbHMuc2V0SW5uZXJIVE1MKHRoaXMuX2VsZW1lbnQsZSkpLHRoaXMu
        X2VsZW1lbnR9LHN0cmluZzpmdW5jdGlvbigpe2lmKHRoaXMuX2hhc0VsZW1l
        bnQmJnRoaXMuX2VsZW1lbnQpe3ZhciBlPXRoaXMuZWxlbWVudCgpLHQ9ZS5v
        dXRlckhUTUw7cmV0dXJuInVuZGVmaW5lZCI9PXR5cGVvZiB0P0VtYmVyLiQo
        IjxkaXYvPiIpLmFwcGVuZChlKS5odG1sKCk6dH1yZXR1cm4gdGhpcy5pbm5l
        clN0cmluZygpfSxpbm5lclN0cmluZzpmdW5jdGlvbigpe3JldHVybiB0aGlz
        LmJ1ZmZlcn19fSgpLGZ1bmN0aW9uKCl7dmFyIGU9RW1iZXIuZ2V0LHQ9RW1i
        ZXIuc2V0O0VtYmVyLlN0cmluZy5mbXQsRW1iZXIuRXZlbnREaXNwYXRjaGVy
        PUVtYmVyLk9iamVjdC5leHRlbmQoe2V2ZW50czp7dG91Y2hzdGFydDoidG91
        Y2hTdGFydCIsdG91Y2htb3ZlOiJ0b3VjaE1vdmUiLHRvdWNoZW5kOiJ0b3Vj
        aEVuZCIsdG91Y2hjYW5jZWw6InRvdWNoQ2FuY2VsIixrZXlkb3duOiJrZXlE
        b3duIixrZXl1cDoia2V5VXAiLGtleXByZXNzOiJrZXlQcmVzcyIsbW91c2Vk
        b3duOiJtb3VzZURvd24iLG1vdXNldXA6Im1vdXNlVXAiLGNvbnRleHRtZW51
        OiJjb250ZXh0TWVudSIsY2xpY2s6ImNsaWNrIixkYmxjbGljazoiZG91Ymxl
        Q2xpY2siLG1vdXNlbW92ZToibW91c2VNb3ZlIixmb2N1c2luOiJmb2N1c0lu
        Iixmb2N1c291dDoiZm9jdXNPdXQiLG1vdXNlZW50ZXI6Im1vdXNlRW50ZXIi
        LG1vdXNlbGVhdmU6Im1vdXNlTGVhdmUiLHN1Ym1pdDoic3VibWl0IixpbnB1
        dDoiaW5wdXQiLGNoYW5nZToiY2hhbmdlIixkcmFnc3RhcnQ6ImRyYWdTdGFy
        dCIsZHJhZzoiZHJhZyIsZHJhZ2VudGVyOiJkcmFnRW50ZXIiLGRyYWdsZWF2
        ZToiZHJhZ0xlYXZlIixkcmFnb3ZlcjoiZHJhZ092ZXIiLGRyb3A6ImRyb3Ai
        LGRyYWdlbmQ6ImRyYWdFbmQifSxyb290RWxlbWVudDoiYm9keSIsc2V0dXA6
        ZnVuY3Rpb24ocixuKXt2YXIgaSxvPWUodGhpcywiZXZlbnRzIik7RW1iZXIu
        JC5leHRlbmQobyxyfHx7fSksRW1iZXIuaXNOb25lKG4pfHx0KHRoaXMsInJv
        b3RFbGVtZW50IixuKSxuPUVtYmVyLiQoZSh0aGlzLCJyb290RWxlbWVudCIp
        KSxuLmFkZENsYXNzKCJlbWJlci1hcHBsaWNhdGlvbiIpO2ZvcihpIGluIG8p
        by5oYXNPd25Qcm9wZXJ0eShpKSYmdGhpcy5zZXR1cEhhbmRsZXIobixpLG9b
        aV0pfSxzZXR1cEhhbmRsZXI6ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXRoaXM7
        ZS5vbih0KyIuZW1iZXIiLCIuZW1iZXItdmlldyIsZnVuY3Rpb24oZSx0KXty
        ZXR1cm4gRW1iZXIuaGFuZGxlRXJyb3JzKGZ1bmN0aW9uKCl7dmFyIGk9RW1i
        ZXIuVmlldy52aWV3c1t0aGlzLmlkXSxvPSEwLGE9bnVsbDtyZXR1cm4gYT1u
        Ll9maW5kTmVhcmVzdEV2ZW50TWFuYWdlcihpLHIpLGEmJmEhPT10P289bi5f
        ZGlzcGF0Y2hFdmVudChhLGUscixpKTppP289bi5fYnViYmxlRXZlbnQoaSxl
        LHIpOmUuc3RvcFByb3BhZ2F0aW9uKCksb30sdGhpcyl9KSxlLm9uKHQrIi5l
        bWJlciIsIltkYXRhLWVtYmVyLWFjdGlvbl0iLGZ1bmN0aW9uKGUpe3JldHVy
        biBFbWJlci5oYW5kbGVFcnJvcnMoZnVuY3Rpb24oKXt2YXIgdD1FbWJlci4k
        KGUuY3VycmVudFRhcmdldCkuYXR0cigiZGF0YS1lbWJlci1hY3Rpb24iKSxu
        PUVtYmVyLkhhbmRsZWJhcnMuQWN0aW9uSGVscGVyLnJlZ2lzdGVyZWRBY3Rp
        b25zW3RdO3JldHVybiBuJiZuLmV2ZW50TmFtZT09PXI/bi5oYW5kbGVyKGUp
        OnZvaWQgMH0sdGhpcyl9KX0sX2ZpbmROZWFyZXN0RXZlbnRNYW5hZ2VyOmZ1
        bmN0aW9uKHQscil7Zm9yKHZhciBuPW51bGw7dCYmKG49ZSh0LCJldmVudE1h
        bmFnZXIiKSwhbnx8IW5bcl0pOyl0PWUodCwicGFyZW50VmlldyIpO3JldHVy
        biBufSxfZGlzcGF0Y2hFdmVudDpmdW5jdGlvbihlLHQscixuKXt2YXIgaT0h
        MCxvPWVbcl07cmV0dXJuImZ1bmN0aW9uIj09PUVtYmVyLnR5cGVPZihvKT8o
        aT1FbWJlci5ydW4oZnVuY3Rpb24oKXtyZXR1cm4gby5jYWxsKGUsdCxuKX0p
        LHQuc3RvcFByb3BhZ2F0aW9uKCkpOmk9dGhpcy5fYnViYmxlRXZlbnQobix0
        LHIpLGl9LF9idWJibGVFdmVudDpmdW5jdGlvbihlLHQscil7cmV0dXJuIEVt
        YmVyLnJ1bihmdW5jdGlvbigpe3JldHVybiBlLmhhbmRsZUV2ZW50KHIsdCl9
        KX0sZGVzdHJveTpmdW5jdGlvbigpe3ZhciB0PWUodGhpcywicm9vdEVsZW1l
        bnQiKTtyZXR1cm4gRW1iZXIuJCh0KS5vZmYoIi5lbWJlciIsIioqIikucmVt
        b3ZlQ2xhc3MoImVtYmVyLWFwcGxpY2F0aW9uIiksdGhpcy5fc3VwZXIoKX19
        KX0oKSxmdW5jdGlvbigpe3ZhciBlPUVtYmVyLnJ1bi5xdWV1ZXMsdD1FbWJl
        ci5BcnJheVBvbHlmaWxscy5pbmRleE9mO2Uuc3BsaWNlKHQuY2FsbChlLCJh
        Y3Rpb25zIikrMSwwLCJyZW5kZXIiLCJhZnRlclJlbmRlciIpfSgpLGZ1bmN0
        aW9uKCl7dmFyIGU9RW1iZXIuZ2V0LHQ9RW1iZXIuc2V0O0VtYmVyLkNvbnRy
        b2xsZXJNaXhpbi5yZW9wZW4oe3RhcmdldDpudWxsLG5hbWVzcGFjZTpudWxs
        LHZpZXc6bnVsbCxjb250YWluZXI6bnVsbCxfY2hpbGRDb250YWluZXJzOm51
        bGwsaW5pdDpmdW5jdGlvbigpe3RoaXMuX3N1cGVyKCksdCh0aGlzLCJfY2hp
        bGRDb250YWluZXJzIix7fSl9LF9tb2RlbERpZENoYW5nZTpFbWJlci5vYnNl
        cnZlcigibW9kZWwiLGZ1bmN0aW9uKCl7dmFyIHI9ZSh0aGlzLCJfY2hpbGRD
        b250YWluZXJzIik7Zm9yKHZhciBuIGluIHIpci5oYXNPd25Qcm9wZXJ0eShu
        KSYmcltuXS5kZXN0cm95KCk7dCh0aGlzLCJfY2hpbGRDb250YWluZXJzIix7
        fSl9KX0pfSgpLGZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe0VtYmVyLnJ1bi5v
        bmNlKEVtYmVyLlZpZXcsIm5vdGlmeU11dGF0aW9uTGlzdGVuZXJzIil9dmFy
        IHQ9e30scj1FbWJlci5nZXQsbj1FbWJlci5zZXQsaT1FbWJlci5ndWlkRm9y
        LG89RW1iZXIuRW51bWVyYWJsZVV0aWxzLmZvckVhY2gsYT1FbWJlci5FbnVt
        ZXJhYmxlVXRpbHMuYWRkT2JqZWN0LHM9RW1iZXIubWV0YSx1PUVtYmVyLmNv
        bXB1dGVkKGZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5fY2hpbGRWaWV3cyx0PUVt
        YmVyLkEoKSxuPXRoaXM7cmV0dXJuIG8oZSxmdW5jdGlvbihlKXt2YXIgbjtl
        LmlzVmlydHVhbD8obj1yKGUsImNoaWxkVmlld3MiKSkmJnQucHVzaE9iamVj
        dHMobik6dC5wdXNoKGUpfSksdC5yZXBsYWNlPWZ1bmN0aW9uKGUsdCxyKXtp
        ZihuIGluc3RhbmNlb2YgRW1iZXIuQ29udGFpbmVyVmlldylyZXR1cm4gbi5y
        ZXBsYWNlKGUsdCxyKTt0aHJvdyBuZXcgRW1iZXIuRXJyb3IoImNoaWxkVmll
        d3MgaXMgaW1tdXRhYmxlIil9LHR9KTtFbWJlci5URU1QTEFURVM9e30sRW1i
        ZXIuQ29yZVZpZXc9RW1iZXIuT2JqZWN0LmV4dGVuZChFbWJlci5FdmVudGVk
        LEVtYmVyLkFjdGlvbkhhbmRsZXIse2lzVmlldzohMCxzdGF0ZXM6dCxpbml0
        OmZ1bmN0aW9uKCl7dGhpcy5fc3VwZXIoKSx0aGlzLnRyYW5zaXRpb25Ubygi
        cHJlUmVuZGVyIil9LHBhcmVudFZpZXc6RW1iZXIuY29tcHV0ZWQoZnVuY3Rp
        b24oKXt2YXIgZT10aGlzLl9wYXJlbnRWaWV3O3JldHVybiBlJiZlLmlzVmly
        dHVhbD9yKGUsInBhcmVudFZpZXciKTplfSkucHJvcGVydHkoIl9wYXJlbnRW
        aWV3Iiksc3RhdGU6bnVsbCxfcGFyZW50VmlldzpudWxsLGNvbmNyZXRlVmll
        dzpFbWJlci5jb21wdXRlZChmdW5jdGlvbigpe3JldHVybiB0aGlzLmlzVmly
        dHVhbD9yKHRoaXMsInBhcmVudFZpZXciKTp0aGlzfSkucHJvcGVydHkoInBh
        cmVudFZpZXciKSxpbnN0cnVtZW50TmFtZToiY29yZV92aWV3IixpbnN0cnVt
        ZW50RGV0YWlsczpmdW5jdGlvbihlKXtlLm9iamVjdD10aGlzLnRvU3RyaW5n
        KCl9LHJlbmRlclRvQnVmZmVyOmZ1bmN0aW9uKGUsdCl7dmFyIHI9InJlbmRl
        ci4iK3RoaXMuaW5zdHJ1bWVudE5hbWUsbj17fTtyZXR1cm4gdGhpcy5pbnN0
        cnVtZW50RGV0YWlscyhuKSxFbWJlci5pbnN0cnVtZW50KHIsbixmdW5jdGlv
        bigpe3JldHVybiB0aGlzLl9yZW5kZXJUb0J1ZmZlcihlLHQpfSx0aGlzKX0s
        X3JlbmRlclRvQnVmZmVyOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMudGFnTmFt
        ZTsobnVsbD09PXR8fHZvaWQgMD09PXQpJiYodD0iZGl2Iik7dmFyIHI9dGhp
        cy5idWZmZXI9ZSYmZS5iZWdpbih0KXx8RW1iZXIuUmVuZGVyQnVmZmVyKHQp
        O3JldHVybiB0aGlzLnRyYW5zaXRpb25UbygiaW5CdWZmZXIiLCExKSx0aGlz
        LmJlZm9yZVJlbmRlcihyKSx0aGlzLnJlbmRlcihyKSx0aGlzLmFmdGVyUmVu
        ZGVyKHIpLHJ9LHRyaWdnZXI6ZnVuY3Rpb24oZSl7dGhpcy5fc3VwZXIuYXBw
        bHkodGhpcyxhcmd1bWVudHMpO3ZhciB0PXRoaXNbZV07aWYodCl7dmFyIHIs
        bixpPVtdO2ZvcihyPTEsbj1hcmd1bWVudHMubGVuZ3RoO24+cjtyKyspaS5w
        dXNoKGFyZ3VtZW50c1tyXSk7cmV0dXJuIHQuYXBwbHkodGhpcyxpKX19LGRl
        cHJlY2F0ZWRTZW5kSGFuZGxlczpmdW5jdGlvbihlKXtyZXR1cm4hIXRoaXNb
        ZV19LGRlcHJlY2F0ZWRTZW5kOmZ1bmN0aW9uKGUpe3ZhciB0PVtdLnNsaWNl
        LmNhbGwoYXJndW1lbnRzLDEpO3RoaXNbZV0uYXBwbHkodGhpcyx0KX0saGFz
        OmZ1bmN0aW9uKGUpe3JldHVybiJmdW5jdGlvbiI9PT1FbWJlci50eXBlT2Yo
        dGhpc1tlXSl8fHRoaXMuX3N1cGVyKGUpfSxkZXN0cm95OmZ1bmN0aW9uKCl7
        dmFyIGU9dGhpcy5fcGFyZW50VmlldztpZih0aGlzLl9zdXBlcigpKXJldHVy
        biB0aGlzLnJlbW92ZWRGcm9tRE9NfHx0aGlzLmRlc3Ryb3lFbGVtZW50KCks
        ZSYmZS5yZW1vdmVDaGlsZCh0aGlzKSx0aGlzLnRyYW5zaXRpb25UbygiZGVz
        dHJveWluZyIsITEpLHRoaXN9LGNsZWFyUmVuZGVyZWRDaGlsZHJlbjpFbWJl
        ci5LLHRyaWdnZXJSZWN1cnNpdmVseTpFbWJlci5LLGludm9rZVJlY3Vyc2l2
        ZWx5OkVtYmVyLkssdHJhbnNpdGlvblRvOkVtYmVyLkssZGVzdHJveUVsZW1l
        bnQ6RW1iZXIuS30pO3ZhciBjPUVtYmVyLl9WaWV3Q29sbGVjdGlvbj1mdW5j
        dGlvbihlKXt2YXIgdD10aGlzLnZpZXdzPWV8fFtdO3RoaXMubGVuZ3RoPXQu
        bGVuZ3RofTtjLnByb3RvdHlwZT17bGVuZ3RoOjAsdHJpZ2dlcjpmdW5jdGlv
        bihlKXtmb3IodmFyIHQscj10aGlzLnZpZXdzLG49MCxpPXIubGVuZ3RoO2k+
        bjtuKyspdD1yW25dLHQudHJpZ2dlciYmdC50cmlnZ2VyKGUpfSx0cmlnZ2Vy
        UmVjdXJzaXZlbHk6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PXRoaXMudmlld3Ms
        cj0wLG49dC5sZW5ndGg7bj5yO3IrKyl0W3JdLnRyaWdnZXJSZWN1cnNpdmVs
        eShlKX0saW52b2tlUmVjdXJzaXZlbHk6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0
        LHI9dGhpcy52aWV3cyxuPTAsaT1yLmxlbmd0aDtpPm47bisrKXQ9cltuXSxl
        KHQpCn0sdHJhbnNpdGlvblRvOmZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByPXRo
        aXMudmlld3Msbj0wLGk9ci5sZW5ndGg7aT5uO24rKylyW25dLnRyYW5zaXRp
        b25UbyhlLHQpfSxwdXNoOmZ1bmN0aW9uKCl7dGhpcy5sZW5ndGgrPWFyZ3Vt
        ZW50cy5sZW5ndGg7dmFyIGU9dGhpcy52aWV3cztyZXR1cm4gZS5wdXNoLmFw
        cGx5KGUsYXJndW1lbnRzKX0sb2JqZWN0QXQ6ZnVuY3Rpb24oZSl7cmV0dXJu
        IHRoaXMudmlld3NbZV19LGZvckVhY2g6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhp
        cy52aWV3cztyZXR1cm4gbyh0LGUpfSxjbGVhcjpmdW5jdGlvbigpe3RoaXMu
        bGVuZ3RoPTAsdGhpcy52aWV3cy5sZW5ndGg9MH19O3ZhciBsPVtdO0VtYmVy
        LlZpZXc9RW1iZXIuQ29yZVZpZXcuZXh0ZW5kKHtjb25jYXRlbmF0ZWRQcm9w
        ZXJ0aWVzOlsiY2xhc3NOYW1lcyIsImNsYXNzTmFtZUJpbmRpbmdzIiwiYXR0
        cmlidXRlQmluZGluZ3MiXSxpc1ZpZXc6ITAsdGVtcGxhdGVOYW1lOm51bGws
        bGF5b3V0TmFtZTpudWxsLHRlbXBsYXRlczpFbWJlci5URU1QTEFURVMsdGVt
        cGxhdGU6RW1iZXIuY29tcHV0ZWQoZnVuY3Rpb24oZSx0KXtpZih2b2lkIDAh
        PT10KXJldHVybiB0O3ZhciBuPXIodGhpcywidGVtcGxhdGVOYW1lIiksaT10
        aGlzLnRlbXBsYXRlRm9yTmFtZShuLCJ0ZW1wbGF0ZSIpO3JldHVybiBpfHxy
        KHRoaXMsImRlZmF1bHRUZW1wbGF0ZSIpfSkucHJvcGVydHkoInRlbXBsYXRl
        TmFtZSIpLGNvbnRyb2xsZXI6RW1iZXIuY29tcHV0ZWQoZnVuY3Rpb24oKXt2
        YXIgZT1yKHRoaXMsIl9wYXJlbnRWaWV3Iik7cmV0dXJuIGU/cihlLCJjb250
        cm9sbGVyIik6bnVsbH0pLnByb3BlcnR5KCJfcGFyZW50VmlldyIpLGxheW91
        dDpFbWJlci5jb21wdXRlZChmdW5jdGlvbigpe3ZhciBlPXIodGhpcywibGF5
        b3V0TmFtZSIpLHQ9dGhpcy50ZW1wbGF0ZUZvck5hbWUoZSwibGF5b3V0Iik7
        cmV0dXJuIHR8fHIodGhpcywiZGVmYXVsdExheW91dCIpfSkucHJvcGVydHko
        ImxheW91dE5hbWUiKSxfeWllbGQ6ZnVuY3Rpb24oZSx0KXt2YXIgbj1yKHRo
        aXMsInRlbXBsYXRlIik7biYmbihlLHQpfSx0ZW1wbGF0ZUZvck5hbWU6ZnVu
        Y3Rpb24oZSl7aWYoZSl7dmFyIHQ9dGhpcy5jb250YWluZXJ8fEVtYmVyLkNv
        bnRhaW5lciYmRW1iZXIuQ29udGFpbmVyLmRlZmF1bHRDb250YWluZXI7cmV0
        dXJuIHQmJnQubG9va3VwKCJ0ZW1wbGF0ZToiK2UpfX0sY29udGV4dDpFbWJl
        ci5jb21wdXRlZChmdW5jdGlvbihlLHQpe3JldHVybiAyPT09YXJndW1lbnRz
        Lmxlbmd0aD8obih0aGlzLCJfY29udGV4dCIsdCksdCk6cih0aGlzLCJfY29u
        dGV4dCIpfSkudm9sYXRpbGUoKSxfY29udGV4dDpFbWJlci5jb21wdXRlZChm
        dW5jdGlvbigpe3ZhciBlLHQ7cmV0dXJuKHQ9cih0aGlzLCJjb250cm9sbGVy
        IikpP3Q6KGU9dGhpcy5fcGFyZW50VmlldyxlP3IoZSwiX2NvbnRleHQiKTpu
        dWxsKX0pLF9jb250ZXh0RGlkQ2hhbmdlOkVtYmVyLm9ic2VydmVyKCJjb250
        ZXh0IixmdW5jdGlvbigpe3RoaXMucmVyZW5kZXIoKX0pLGlzVmlzaWJsZToh
        MCxjaGlsZFZpZXdzOnUsX2NoaWxkVmlld3M6bCxfY2hpbGRWaWV3c1dpbGxD
        aGFuZ2U6RW1iZXIuYmVmb3JlT2JzZXJ2ZXIoImNoaWxkVmlld3MiLGZ1bmN0
        aW9uKCl7aWYodGhpcy5pc1ZpcnR1YWwpe3ZhciBlPXIodGhpcywicGFyZW50
        VmlldyIpO2UmJkVtYmVyLnByb3BlcnR5V2lsbENoYW5nZShlLCJjaGlsZFZp
        ZXdzIil9fSksX2NoaWxkVmlld3NEaWRDaGFuZ2U6RW1iZXIub2JzZXJ2ZXIo
        ImNoaWxkVmlld3MiLGZ1bmN0aW9uKCl7aWYodGhpcy5pc1ZpcnR1YWwpe3Zh
        ciBlPXIodGhpcywicGFyZW50VmlldyIpO2UmJkVtYmVyLnByb3BlcnR5RGlk
        Q2hhbmdlKGUsImNoaWxkVmlld3MiKX19KSxuZWFyZXN0SW5zdGFuY2VPZjpm
        dW5jdGlvbihlKXtmb3IodmFyIHQ9cih0aGlzLCJwYXJlbnRWaWV3Iik7dDsp
        e2lmKHQgaW5zdGFuY2VvZiBlKXJldHVybiB0O3Q9cih0LCJwYXJlbnRWaWV3
        Iil9fSxuZWFyZXN0T2ZUeXBlOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1yKHRo
        aXMsInBhcmVudFZpZXciKSxuPWUgaW5zdGFuY2VvZiBFbWJlci5NaXhpbj9m
        dW5jdGlvbih0KXtyZXR1cm4gZS5kZXRlY3QodCl9OmZ1bmN0aW9uKHQpe3Jl
        dHVybiBlLmRldGVjdCh0LmNvbnN0cnVjdG9yKX07dDspe2lmKG4odCkpcmV0
        dXJuIHQ7dD1yKHQsInBhcmVudFZpZXciKX19LG5lYXJlc3RXaXRoUHJvcGVy
        dHk6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PXIodGhpcywicGFyZW50VmlldyIp
        O3Q7KXtpZihlIGluIHQpcmV0dXJuIHQ7dD1yKHQsInBhcmVudFZpZXciKX19
        LG5lYXJlc3RDaGlsZE9mOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1yKHRoaXMs
        InBhcmVudFZpZXciKTt0Oyl7aWYocih0LCJwYXJlbnRWaWV3IilpbnN0YW5j
        ZW9mIGUpcmV0dXJuIHQ7dD1yKHQsInBhcmVudFZpZXciKX19LF9wYXJlbnRW
        aWV3RGlkQ2hhbmdlOkVtYmVyLm9ic2VydmVyKCJfcGFyZW50VmlldyIsZnVu
        Y3Rpb24oKXt0aGlzLmlzRGVzdHJveWluZ3x8KHRoaXMudHJpZ2dlcigicGFy
        ZW50Vmlld0RpZENoYW5nZSIpLHIodGhpcywicGFyZW50Vmlldy5jb250cm9s
        bGVyIikmJiFyKHRoaXMsImNvbnRyb2xsZXIiKSYmdGhpcy5ub3RpZnlQcm9w
        ZXJ0eUNoYW5nZSgiY29udHJvbGxlciIpKX0pLF9jb250cm9sbGVyRGlkQ2hh
        bmdlOkVtYmVyLm9ic2VydmVyKCJjb250cm9sbGVyIixmdW5jdGlvbigpe3Ro
        aXMuaXNEZXN0cm95aW5nfHwodGhpcy5yZXJlbmRlcigpLHRoaXMuZm9yRWFj
        aENoaWxkVmlldyhmdW5jdGlvbihlKXtlLnByb3BlcnR5RGlkQ2hhbmdlKCJj
        b250cm9sbGVyIil9KSl9KSxjbG9uZUtleXdvcmRzOmZ1bmN0aW9uKCl7dmFy
        IGU9cih0aGlzLCJ0ZW1wbGF0ZURhdGEiKSx0PWU/RW1iZXIuY29weShlLmtl
        eXdvcmRzKTp7fTtyZXR1cm4gbih0LCJ2aWV3IixyKHRoaXMsImNvbmNyZXRl
        VmlldyIpKSxuKHQsIl92aWV3Iix0aGlzKSxuKHQsImNvbnRyb2xsZXIiLHIo
        dGhpcywiY29udHJvbGxlciIpKSx0fSxyZW5kZXI6ZnVuY3Rpb24oZSl7dmFy
        IHQ9cih0aGlzLCJsYXlvdXQiKXx8cih0aGlzLCJ0ZW1wbGF0ZSIpO2lmKHQp
        e3ZhciBuLGk9cih0aGlzLCJjb250ZXh0Iiksbz10aGlzLmNsb25lS2V5d29y
        ZHMoKSxhPXt2aWV3OnRoaXMsYnVmZmVyOmUsaXNSZW5kZXJEYXRhOiEwLGtl
        eXdvcmRzOm8saW5zaWRlR3JvdXA6cih0aGlzLCJ0ZW1wbGF0ZURhdGEuaW5z
        aWRlR3JvdXAiKX07bj10KGkse2RhdGE6YX0pLHZvaWQgMCE9PW4mJmUucHVz
        aChuKX19LHJlcmVuZGVyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY3VycmVu
        dFN0YXRlLnJlcmVuZGVyKHRoaXMpfSxjbGVhclJlbmRlcmVkQ2hpbGRyZW46
        ZnVuY3Rpb24oKXtmb3IodmFyIGU9dGhpcy5sZW5ndGhCZWZvcmVSZW5kZXIs
        dD10aGlzLmxlbmd0aEFmdGVyUmVuZGVyLHI9dGhpcy5fY2hpbGRWaWV3cyxu
        PXQtMTtuPj1lO24tLSlyW25dJiZyW25dLmRlc3Ryb3koKX0sX2FwcGx5Q2xh
        c3NOYW1lQmluZGluZ3M6ZnVuY3Rpb24oZSl7dmFyIHQscixuLGk9dGhpcy5j
        bGFzc05hbWVzO28oZSxmdW5jdGlvbihlKXt2YXIgbyxzPUVtYmVyLlZpZXcu
        X3BhcnNlUHJvcGVydHlQYXRoKGUpLHU9ZnVuY3Rpb24oKXtyPXRoaXMuX2Ns
        YXNzU3RyaW5nRm9yUHJvcGVydHkoZSksdD10aGlzLiQoKSxvJiYodC5yZW1v
        dmVDbGFzcyhvKSxpLnJlbW92ZU9iamVjdChvKSkscj8odC5hZGRDbGFzcyhy
        KSxvPXIpOm89bnVsbH07bj10aGlzLl9jbGFzc1N0cmluZ0ZvclByb3BlcnR5
        KGUpLG4mJihhKGksbiksbz1uKSx0aGlzLnJlZ2lzdGVyT2JzZXJ2ZXIodGhp
        cyxzLnBhdGgsdSksdGhpcy5vbmUoIndpbGxDbGVhclJlbmRlciIsZnVuY3Rp
        b24oKXtvJiYoaS5yZW1vdmVPYmplY3Qobyksbz1udWxsKX0pfSx0aGlzKX0s
        X2FwcGx5QXR0cmlidXRlQmluZGluZ3M6ZnVuY3Rpb24oZSx0KXt2YXIgbixp
        O28odCxmdW5jdGlvbih0KXt2YXIgbz10LnNwbGl0KCI6IiksYT1vWzBdLHM9
        b1sxXXx8YSx1PWZ1bmN0aW9uKCl7aT10aGlzLiQoKSxuPXIodGhpcyxhKSxF
        bWJlci5WaWV3LmFwcGx5QXR0cmlidXRlQmluZGluZ3MoaSxzLG4pfTt0aGlz
        LnJlZ2lzdGVyT2JzZXJ2ZXIodGhpcyxhLHUpLG49cih0aGlzLGEpLEVtYmVy
        LlZpZXcuYXBwbHlBdHRyaWJ1dGVCaW5kaW5ncyhlLHMsbil9LHRoaXMpfSxf
        Y2xhc3NTdHJpbmdGb3JQcm9wZXJ0eTpmdW5jdGlvbihlKXt2YXIgdD1FbWJl
        ci5WaWV3Ll9wYXJzZVByb3BlcnR5UGF0aChlKSxuPXQucGF0aCxpPXIodGhp
        cyxuKTtyZXR1cm4gdm9pZCAwPT09aSYmRW1iZXIuaXNHbG9iYWxQYXRoKG4p
        JiYoaT1yKEVtYmVyLmxvb2t1cCxuKSksRW1iZXIuVmlldy5fY2xhc3NTdHJp
        bmdGb3JWYWx1ZShuLGksdC5jbGFzc05hbWUsdC5mYWxzeUNsYXNzTmFtZSl9
        LGVsZW1lbnQ6RW1iZXIuY29tcHV0ZWQoZnVuY3Rpb24oZSx0KXtyZXR1cm4g
        dm9pZCAwIT09dD90aGlzLmN1cnJlbnRTdGF0ZS5zZXRFbGVtZW50KHRoaXMs
        dCk6dGhpcy5jdXJyZW50U3RhdGUuZ2V0RWxlbWVudCh0aGlzKX0pLnByb3Bl
        cnR5KCJfcGFyZW50VmlldyIpLCQ6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMu
        Y3VycmVudFN0YXRlLiQodGhpcyxlKX0sbXV0YXRlQ2hpbGRWaWV3czpmdW5j
        dGlvbihlKXtmb3IodmFyIHQscj10aGlzLl9jaGlsZFZpZXdzLG49ci5sZW5n
        dGg7LS1uPj0wOyl0PXJbbl0sZSh0aGlzLHQsbik7cmV0dXJuIHRoaXN9LGZv
        ckVhY2hDaGlsZFZpZXc6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fY2hpbGRW
        aWV3cztpZighdClyZXR1cm4gdGhpczt2YXIgcixuLGk9dC5sZW5ndGg7Zm9y
        KG49MDtpPm47bisrKXI9dFtuXSxlKHIpO3JldHVybiB0aGlzfSxhcHBlbmRU
        bzpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5faW5zZXJ0RWxlbWVudExhdGVy
        KGZ1bmN0aW9uKCl7dGhpcy4kKCkuYXBwZW5kVG8oZSl9KSx0aGlzfSxyZXBs
        YWNlSW46ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2luc2VydEVsZW1lbnRM
        YXRlcihmdW5jdGlvbigpe0VtYmVyLiQoZSkuZW1wdHkoKSx0aGlzLiQoKS5h
        cHBlbmRUbyhlKX0pLHRoaXN9LF9pbnNlcnRFbGVtZW50TGF0ZXI6ZnVuY3Rp
        b24oZSl7dGhpcy5fc2NoZWR1bGVkSW5zZXJ0PUVtYmVyLnJ1bi5zY2hlZHVs
        ZU9uY2UoInJlbmRlciIsdGhpcywiX2luc2VydEVsZW1lbnQiLGUpfSxfaW5z
        ZXJ0RWxlbWVudDpmdW5jdGlvbihlKXt0aGlzLl9zY2hlZHVsZWRJbnNlcnQ9
        bnVsbCx0aGlzLmN1cnJlbnRTdGF0ZS5pbnNlcnRFbGVtZW50KHRoaXMsZSl9
        LGFwcGVuZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmFwcGVuZFRvKGRvY3Vt
        ZW50LmJvZHkpfSxyZW1vdmU6ZnVuY3Rpb24oKXt0aGlzLnJlbW92ZWRGcm9t
        RE9NfHx0aGlzLmRlc3Ryb3lFbGVtZW50KCksdGhpcy5pbnZva2VSZWN1cnNp
        dmVseShmdW5jdGlvbihlKXtlLmNsZWFyUmVuZGVyZWRDaGlsZHJlbiYmZS5j
        bGVhclJlbmRlcmVkQ2hpbGRyZW4oKX0pfSxlbGVtZW50SWQ6bnVsbCxmaW5k
        RWxlbWVudEluUGFyZW50RWxlbWVudDpmdW5jdGlvbihlKXt2YXIgdD0iIyIr
        dGhpcy5lbGVtZW50SWQ7cmV0dXJuIEVtYmVyLiQodClbMF18fEVtYmVyLiQo
        dCxlKVswXX0sY3JlYXRlRWxlbWVudDpmdW5jdGlvbigpe2lmKHIodGhpcywi
        ZWxlbWVudCIpKXJldHVybiB0aGlzO3ZhciBlPXRoaXMucmVuZGVyVG9CdWZm
        ZXIoKTtyZXR1cm4gbih0aGlzLCJlbGVtZW50IixlLmVsZW1lbnQoKSksdGhp
        c30sd2lsbEluc2VydEVsZW1lbnQ6RW1iZXIuSyxkaWRJbnNlcnRFbGVtZW50
        OkVtYmVyLkssd2lsbENsZWFyUmVuZGVyOkVtYmVyLkssaW52b2tlUmVjdXJz
        aXZlbHk6ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHIsbixpLG89dD09PSExP3Ro
        aXMuX2NoaWxkVmlld3M6W3RoaXNdO28ubGVuZ3RoOyl7cj1vLnNsaWNlKCks
        bz1bXTtmb3IodmFyIGE9MCxzPXIubGVuZ3RoO3M+YTthKyspbj1yW2FdLGk9
        bi5fY2hpbGRWaWV3cz9uLl9jaGlsZFZpZXdzLnNsaWNlKDApOm51bGwsZShu
        KSxpJiZvLnB1c2guYXBwbHkobyxpKX19LHRyaWdnZXJSZWN1cnNpdmVseTpm
        dW5jdGlvbihlKXtmb3IodmFyIHQscixuLGk9W3RoaXNdO2kubGVuZ3RoOyl7
        dD1pLnNsaWNlKCksaT1bXTtmb3IodmFyIG89MCxhPXQubGVuZ3RoO2E+bztv
        Kyspcj10W29dLG49ci5fY2hpbGRWaWV3cz9yLl9jaGlsZFZpZXdzLnNsaWNl
        KDApOm51bGwsci50cmlnZ2VyJiZyLnRyaWdnZXIoZSksbiYmaS5wdXNoLmFw
        cGx5KGksbil9fSx2aWV3SGllcmFyY2h5Q29sbGVjdGlvbjpmdW5jdGlvbigp
        e2Zvcih2YXIgZSx0PW5ldyBjKFt0aGlzXSkscj0wO3I8dC5sZW5ndGg7cisr
        KWU9dC5vYmplY3RBdChyKSxlLl9jaGlsZFZpZXdzJiZ0LnB1c2guYXBwbHko
        dCxlLl9jaGlsZFZpZXdzKTtyZXR1cm4gdH0sZGVzdHJveUVsZW1lbnQ6ZnVu
        Y3Rpb24oKXtyZXR1cm4gdGhpcy5jdXJyZW50U3RhdGUuZGVzdHJveUVsZW1l
        bnQodGhpcyl9LHdpbGxEZXN0cm95RWxlbWVudDpFbWJlci5LLF9ub3RpZnlX
        aWxsRGVzdHJveUVsZW1lbnQ6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLnZpZXdI
        aWVyYXJjaHlDb2xsZWN0aW9uKCk7cmV0dXJuIGUudHJpZ2dlcigid2lsbENs
        ZWFyUmVuZGVyIiksZS50cmlnZ2VyKCJ3aWxsRGVzdHJveUVsZW1lbnQiKSxl
        fSxfZWxlbWVudERpZENoYW5nZTpFbWJlci5vYnNlcnZlcigiZWxlbWVudCIs
        ZnVuY3Rpb24oKXt0aGlzLmZvckVhY2hDaGlsZFZpZXcoZnVuY3Rpb24oZSl7
        ZGVsZXRlIHMoZSkuY2FjaGUuZWxlbWVudH0pfSkscGFyZW50Vmlld0RpZENo
        YW5nZTpFbWJlci5LLGluc3RydW1lbnROYW1lOiJ2aWV3IixpbnN0cnVtZW50
        RGV0YWlsczpmdW5jdGlvbihlKXtlLnRlbXBsYXRlPXIodGhpcywidGVtcGxh
        dGVOYW1lIiksdGhpcy5fc3VwZXIoZSl9LF9yZW5kZXJUb0J1ZmZlcjpmdW5j
        dGlvbihlLHQpe3RoaXMubGVuZ3RoQmVmb3JlUmVuZGVyPXRoaXMuX2NoaWxk
        Vmlld3MubGVuZ3RoO3ZhciByPXRoaXMuX3N1cGVyKGUsdCk7cmV0dXJuIHRo
        aXMubGVuZ3RoQWZ0ZXJSZW5kZXI9dGhpcy5fY2hpbGRWaWV3cy5sZW5ndGgs
        cn0scmVuZGVyVG9CdWZmZXJJZk5lZWRlZDpmdW5jdGlvbihlKXtyZXR1cm4g
        dGhpcy5jdXJyZW50U3RhdGUucmVuZGVyVG9CdWZmZXJJZk5lZWRlZCh0aGlz
        LGUpfSxiZWZvcmVSZW5kZXI6ZnVuY3Rpb24oZSl7dGhpcy5hcHBseUF0dHJp
        YnV0ZXNUb0J1ZmZlcihlKSxlLnB1c2hPcGVuaW5nVGFnKCl9LGFmdGVyUmVu
        ZGVyOmZ1bmN0aW9uKGUpe2UucHVzaENsb3NpbmdUYWcoKX0sYXBwbHlBdHRy
        aWJ1dGVzVG9CdWZmZXI6ZnVuY3Rpb24oZSl7dmFyIHQ9cih0aGlzLCJjbGFz
        c05hbWVCaW5kaW5ncyIpO3QubGVuZ3RoJiZ0aGlzLl9hcHBseUNsYXNzTmFt
        ZUJpbmRpbmdzKHQpO3ZhciBuPXIodGhpcywiYXR0cmlidXRlQmluZGluZ3Mi
        KTtuLmxlbmd0aCYmdGhpcy5fYXBwbHlBdHRyaWJ1dGVCaW5kaW5ncyhlLG4p
        LGUuc2V0Q2xhc3Nlcyh0aGlzLmNsYXNzTmFtZXMpLGUuaWQodGhpcy5lbGVt
        ZW50SWQpO3ZhciBpPXIodGhpcywiYXJpYVJvbGUiKTtpJiZlLmF0dHIoInJv
        bGUiLGkpLHIodGhpcywiaXNWaXNpYmxlIik9PT0hMSYmZS5zdHlsZSgiZGlz
        cGxheSIsIm5vbmUiKX0sdGFnTmFtZTpudWxsLGFyaWFSb2xlOm51bGwsY2xh
        c3NOYW1lczpbImVtYmVyLXZpZXciXSxjbGFzc05hbWVCaW5kaW5nczpsLGF0
        dHJpYnV0ZUJpbmRpbmdzOmwsaW5pdDpmdW5jdGlvbigpe3RoaXMuZWxlbWVu
        dElkPXRoaXMuZWxlbWVudElkfHxpKHRoaXMpLHRoaXMuX3N1cGVyKCksdGhp
        cy5fY2hpbGRWaWV3cz10aGlzLl9jaGlsZFZpZXdzLnNsaWNlKCksdGhpcy5j
        bGFzc05hbWVCaW5kaW5ncz1FbWJlci5BKHRoaXMuY2xhc3NOYW1lQmluZGlu
        Z3Muc2xpY2UoKSksdGhpcy5jbGFzc05hbWVzPUVtYmVyLkEodGhpcy5jbGFz
        c05hbWVzLnNsaWNlKCkpfSxhcHBlbmRDaGlsZDpmdW5jdGlvbihlLHQpe3Jl
        dHVybiB0aGlzLmN1cnJlbnRTdGF0ZS5hcHBlbmRDaGlsZCh0aGlzLGUsdCl9
        LHJlbW92ZUNoaWxkOmZ1bmN0aW9uKGUpe2lmKCF0aGlzLmlzRGVzdHJveWlu
        Zyl7bihlLCJfcGFyZW50VmlldyIsbnVsbCk7dmFyIHQ9dGhpcy5fY2hpbGRW
        aWV3cztyZXR1cm4gRW1iZXIuRW51bWVyYWJsZVV0aWxzLnJlbW92ZU9iamVj
        dCh0LGUpLHRoaXMucHJvcGVydHlEaWRDaGFuZ2UoImNoaWxkVmlld3MiKSx0
        aGlzfX0scmVtb3ZlQWxsQ2hpbGRyZW46ZnVuY3Rpb24oKXtyZXR1cm4gdGhp
        cy5tdXRhdGVDaGlsZFZpZXdzKGZ1bmN0aW9uKGUsdCl7ZS5yZW1vdmVDaGls
        ZCh0KX0pfSxkZXN0cm95QWxsQ2hpbGRyZW46ZnVuY3Rpb24oKXtyZXR1cm4g
        dGhpcy5tdXRhdGVDaGlsZFZpZXdzKGZ1bmN0aW9uKGUsdCl7dC5kZXN0cm95
        KCl9KX0scmVtb3ZlRnJvbVBhcmVudDpmdW5jdGlvbigpe3ZhciBlPXRoaXMu
        X3BhcmVudFZpZXc7cmV0dXJuIHRoaXMucmVtb3ZlKCksZSYmZS5yZW1vdmVD
        aGlsZCh0aGlzKSx0aGlzfSxkZXN0cm95OmZ1bmN0aW9uKCl7dmFyIGUsdCxu
        PXRoaXMuX2NoaWxkVmlld3MsaT1yKHRoaXMsInBhcmVudFZpZXciKSxvPXRo
        aXMudmlld05hbWU7aWYodGhpcy5fc3VwZXIoKSl7Zm9yKGU9bi5sZW5ndGgs
        dD1lLTE7dD49MDt0LS0pblt0XS5yZW1vdmVkRnJvbURPTT0hMDtmb3IobyYm
        aSYmaS5zZXQobyxudWxsKSxlPW4ubGVuZ3RoLHQ9ZS0xO3Q+PTA7dC0tKW5b
        dF0uZGVzdHJveSgpO3JldHVybiB0aGlzfX0sY3JlYXRlQ2hpbGRWaWV3OmZ1
        bmN0aW9uKGUsdCl7aWYoIWUpdGhyb3cgbmV3IFR5cGVFcnJvcigiY3JlYXRl
        Q2hpbGRWaWV3cyBmaXJzdCBhcmd1bWVudCBtdXN0IGV4aXN0Iik7aWYoZS5p
        c1ZpZXcmJmUuX3BhcmVudFZpZXc9PT10aGlzJiZlLmNvbnRhaW5lcj09PXRo
        aXMuY29udGFpbmVyKXJldHVybiBlO2lmKHQ9dHx8e30sdC5fcGFyZW50Vmll
        dz10aGlzLEVtYmVyLkNvcmVWaWV3LmRldGVjdChlKSl0LnRlbXBsYXRlRGF0
        YT10LnRlbXBsYXRlRGF0YXx8cih0aGlzLCJ0ZW1wbGF0ZURhdGEiKSx0LmNv
        bnRhaW5lcj10aGlzLmNvbnRhaW5lcixlPWUuY3JlYXRlKHQpLGUudmlld05h
        bWUmJm4ocih0aGlzLCJjb25jcmV0ZVZpZXciKSxlLnZpZXdOYW1lLGUpO2Vs
        c2UgaWYoInN0cmluZyI9PXR5cGVvZiBlKXt2YXIgaT0idmlldzoiK2Usbz10
        aGlzLmNvbnRhaW5lci5sb29rdXBGYWN0b3J5KGkpO3QudGVtcGxhdGVEYXRh
        PXIodGhpcywidGVtcGxhdGVEYXRhIiksZT1vLmNyZWF0ZSh0KX1lbHNlIHQu
        Y29udGFpbmVyPXRoaXMuY29udGFpbmVyLHIoZSwidGVtcGxhdGVEYXRhIil8
        fCh0LnRlbXBsYXRlRGF0YT1yKHRoaXMsInRlbXBsYXRlRGF0YSIpKSxFbWJl
        ci5zZXRQcm9wZXJ0aWVzKGUsdCk7cmV0dXJuIGV9LGJlY2FtZVZpc2libGU6
        RW1iZXIuSyxiZWNhbWVIaWRkZW46RW1iZXIuSyxfaXNWaXNpYmxlRGlkQ2hh
        bmdlOkVtYmVyLm9ic2VydmVyKCJpc1Zpc2libGUiLGZ1bmN0aW9uKCl7dmFy
        IGU9dGhpcy4kKCk7aWYoZSl7dmFyIHQ9cih0aGlzLCJpc1Zpc2libGUiKTtl
        LnRvZ2dsZSh0KSx0aGlzLl9pc0FuY2VzdG9ySGlkZGVuKCl8fCh0P3RoaXMu
        X25vdGlmeUJlY2FtZVZpc2libGUoKTp0aGlzLl9ub3RpZnlCZWNhbWVIaWRk
        ZW4oKSl9fSksX25vdGlmeUJlY2FtZVZpc2libGU6ZnVuY3Rpb24oKXt0aGlz
        LnRyaWdnZXIoImJlY2FtZVZpc2libGUiKSx0aGlzLmZvckVhY2hDaGlsZFZp
        ZXcoZnVuY3Rpb24oZSl7dmFyIHQ9cihlLCJpc1Zpc2libGUiKTsodHx8bnVs
        bD09PXQpJiZlLl9ub3RpZnlCZWNhbWVWaXNpYmxlKCl9KX0sX25vdGlmeUJl
        Y2FtZUhpZGRlbjpmdW5jdGlvbigpe3RoaXMudHJpZ2dlcigiYmVjYW1lSGlk
        ZGVuIiksdGhpcy5mb3JFYWNoQ2hpbGRWaWV3KGZ1bmN0aW9uKGUpe3ZhciB0
        PXIoZSwiaXNWaXNpYmxlIik7KHR8fG51bGw9PT10KSYmZS5fbm90aWZ5QmVj
        YW1lSGlkZGVuKCl9KX0sX2lzQW5jZXN0b3JIaWRkZW46ZnVuY3Rpb24oKXtm
        b3IodmFyIGU9cih0aGlzLCJwYXJlbnRWaWV3Iik7ZTspe2lmKHIoZSwiaXNW
        aXNpYmxlIik9PT0hMSlyZXR1cm4hMDtlPXIoZSwicGFyZW50VmlldyIpfXJl
        dHVybiExfSxjbGVhckJ1ZmZlcjpmdW5jdGlvbigpe3RoaXMuaW52b2tlUmVj
        dXJzaXZlbHkoZnVuY3Rpb24oZSl7ZS5idWZmZXI9bnVsbH0pfSx0cmFuc2l0
        aW9uVG86ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLmN1cnJlbnRTdGF0ZSxu
        PXRoaXMuY3VycmVudFN0YXRlPXRoaXMuc3RhdGVzW2VdO3RoaXMuc3RhdGU9
        ZSxyJiZyLmV4aXQmJnIuZXhpdCh0aGlzKSxuLmVudGVyJiZuLmVudGVyKHRo
        aXMpLCJpbkRPTSI9PT1lJiZkZWxldGUgRW1iZXIubWV0YSh0aGlzKS5jYWNo
        ZS5lbGVtZW50LHQhPT0hMSYmdGhpcy5mb3JFYWNoQ2hpbGRWaWV3KGZ1bmN0
        aW9uKHQpe3QudHJhbnNpdGlvblRvKGUpfSl9LGhhbmRsZUV2ZW50OmZ1bmN0
        aW9uKGUsdCl7cmV0dXJuIHRoaXMuY3VycmVudFN0YXRlLmhhbmRsZUV2ZW50
        KHRoaXMsZSx0KX0scmVnaXN0ZXJPYnNlcnZlcjpmdW5jdGlvbihlLHQscixu
        KXtpZihufHwiZnVuY3Rpb24iIT10eXBlb2Ygcnx8KG49cixyPW51bGwpLGUm
        JiJvYmplY3QiPT10eXBlb2YgZSl7dmFyIGk9dGhpcyxvPWZ1bmN0aW9uKCl7
        aS5jdXJyZW50U3RhdGUuaW52b2tlT2JzZXJ2ZXIodGhpcyxuKX0sYT1mdW5j
        dGlvbigpe0VtYmVyLnJ1bi5zY2hlZHVsZU9uY2UoInJlbmRlciIsdGhpcyxv
        KX07RW1iZXIuYWRkT2JzZXJ2ZXIoZSx0LHIsYSksdGhpcy5vbmUoIndpbGxD
        bGVhclJlbmRlciIsZnVuY3Rpb24oKXtFbWJlci5yZW1vdmVPYnNlcnZlcihl
        LHQscixhKX0pfX19KTt2YXIgaD17cHJlcGVuZDpmdW5jdGlvbih0LHIpe3Qu
        JCgpLnByZXBlbmQociksZSgpfSxhZnRlcjpmdW5jdGlvbih0LHIpe3QuJCgp
        LmFmdGVyKHIpLGUoKX0saHRtbDpmdW5jdGlvbih0LHIpe3QuJCgpLmh0bWwo
        ciksZSgpfSxyZXBsYWNlOmZ1bmN0aW9uKHQpe3ZhciBpPXIodCwiZWxlbWVu
        dCIpO24odCwiZWxlbWVudCIsbnVsbCksdC5faW5zZXJ0RWxlbWVudExhdGVy
        KGZ1bmN0aW9uKCl7RW1iZXIuJChpKS5yZXBsYWNlV2l0aChyKHQsImVsZW1l
        bnQiKSksZSgpfSl9LHJlbW92ZTpmdW5jdGlvbih0KXt0LiQoKS5yZW1vdmUo
        KSxlKCl9LGVtcHR5OmZ1bmN0aW9uKHQpe3QuJCgpLmVtcHR5KCksZSgpfX07
        RW1iZXIuVmlldy5yZW9wZW4oe2RvbU1hbmFnZXI6aH0pLEVtYmVyLlZpZXcu
        cmVvcGVuQ2xhc3Moe19wYXJzZVByb3BlcnR5UGF0aDpmdW5jdGlvbihlKXt2
        YXIgdCxyLG49ZS5zcGxpdCgiOiIpLGk9blswXSxvPSIiO3JldHVybiBuLmxl
        bmd0aD4xJiYodD1uWzFdLDM9PT1uLmxlbmd0aCYmKHI9blsyXSksbz0iOiIr
        dCxyJiYobys9IjoiK3IpKSx7cGF0aDppLGNsYXNzTmFtZXM6byxjbGFzc05h
        bWU6IiI9PT10P3ZvaWQgMDp0LGZhbHN5Q2xhc3NOYW1lOnJ9fSxfY2xhc3NT
        dHJpbmdGb3JWYWx1ZTpmdW5jdGlvbihlLHQscixuKXtpZihyfHxuKXJldHVy
        biByJiZ0P3I6biYmIXQ/bjpudWxsO2lmKHQ9PT0hMCl7dmFyIGk9ZS5zcGxp
        dCgiLiIpO3JldHVybiBFbWJlci5TdHJpbmcuZGFzaGVyaXplKGlbaS5sZW5n
        dGgtMV0pfXJldHVybiB0IT09ITEmJm51bGwhPXQ/dDpudWxsfX0pO3ZhciBt
        PUVtYmVyLk9iamVjdC5leHRlbmQoRW1iZXIuRXZlbnRlZCkuY3JlYXRlKCk7
        RW1iZXIuVmlldy5hZGRNdXRhdGlvbkxpc3RlbmVyPWZ1bmN0aW9uKGUpe20u
        b24oImNoYW5nZSIsZSl9LEVtYmVyLlZpZXcucmVtb3ZlTXV0YXRpb25MaXN0
        ZW5lcj1mdW5jdGlvbihlKXttLm9mZigiY2hhbmdlIixlKX0sRW1iZXIuVmll
        dy5ub3RpZnlNdXRhdGlvbkxpc3RlbmVycz1mdW5jdGlvbigpe20udHJpZ2dl
        cigiY2hhbmdlIil9LEVtYmVyLlZpZXcudmlld3M9e30sRW1iZXIuVmlldy5j
        aGlsZFZpZXdzUHJvcGVydHk9dSxFbWJlci5WaWV3LmFwcGx5QXR0cmlidXRl
        QmluZGluZ3M9ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPUVtYmVyLnR5cGVPZihy
        KTsidmFsdWUiPT09dHx8InN0cmluZyIhPT1uJiYoIm51bWJlciIhPT1ufHxp
        c05hTihyKSk/InZhbHVlIj09PXR8fCJib29sZWFuIj09PW4/KEVtYmVyLmlz
        Tm9uZShyKSYmKHI9IiIpLHIhPT1lLnByb3AodCkmJmUucHJvcCh0LHIpKTpy
        fHxlLnJlbW92ZUF0dHIodCk6ciE9PWUuYXR0cih0KSYmZS5hdHRyKHQscil9
        LEVtYmVyLlZpZXcuc3RhdGVzPXR9KCksZnVuY3Rpb24oKXt2YXIgZT0oRW1i
        ZXIuZ2V0LEVtYmVyLnNldCk7RW1iZXIuVmlldy5zdGF0ZXMuX2RlZmF1bHQ9
        e2FwcGVuZENoaWxkOmZ1bmN0aW9uKCl7dGhyb3ciWW91IGNhbid0IHVzZSBh
        cHBlbmRDaGlsZCBvdXRzaWRlIG9mIHRoZSByZW5kZXJpbmcgcHJvY2VzcyJ9
        LCQ6ZnVuY3Rpb24oKXtyZXR1cm4gdm9pZCAwfSxnZXRFbGVtZW50OmZ1bmN0
        aW9uKCl7cmV0dXJuIG51bGx9LGhhbmRsZUV2ZW50OmZ1bmN0aW9uKCl7cmV0
        dXJuITB9LGRlc3Ryb3lFbGVtZW50OmZ1bmN0aW9uKHQpe3JldHVybiBlKHQs
        ImVsZW1lbnQiLG51bGwpLHQuX3NjaGVkdWxlZEluc2VydCYmKEVtYmVyLnJ1
        bi5jYW5jZWwodC5fc2NoZWR1bGVkSW5zZXJ0KSx0Ll9zY2hlZHVsZWRJbnNl
        cnQ9bnVsbCksdH0scmVuZGVyVG9CdWZmZXJJZk5lZWRlZDpmdW5jdGlvbigp
        e3JldHVybiExfSxyZXJlbmRlcjpFbWJlci5LLGludm9rZU9ic2VydmVyOkVt
        YmVyLkt9fSgpLGZ1bmN0aW9uKCl7dmFyIGU9RW1iZXIuVmlldy5zdGF0ZXMu
        cHJlUmVuZGVyPUVtYmVyLmNyZWF0ZShFbWJlci5WaWV3LnN0YXRlcy5fZGVm
        YXVsdCk7RW1iZXIubWVyZ2UoZSx7aW5zZXJ0RWxlbWVudDpmdW5jdGlvbihl
        LHQpe2UuY3JlYXRlRWxlbWVudCgpO3ZhciByPWUudmlld0hpZXJhcmNoeUNv
        bGxlY3Rpb24oKTtyLnRyaWdnZXIoIndpbGxJbnNlcnRFbGVtZW50IiksdC5j
        YWxsKGUpO2Zvcih2YXIgbj1lLmdldCgiZWxlbWVudCIpO249bi5wYXJlbnRO
        b2RlOyluPT09ZG9jdW1lbnQmJihyLnRyYW5zaXRpb25UbygiaW5ET00iLCEx
        KSxyLnRyaWdnZXIoImRpZEluc2VydEVsZW1lbnQiKSl9LHJlbmRlclRvQnVm
        ZmVySWZOZWVkZWQ6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS5yZW5kZXJUb0J1
        ZmZlcih0KSwhMH0sZW1wdHk6RW1iZXIuSyxzZXRFbGVtZW50OmZ1bmN0aW9u
        KGUsdCl7cmV0dXJuIG51bGwhPT10JiZlLnRyYW5zaXRpb25UbygiaGFzRWxl
        bWVudCIpLHR9fSl9KCksZnVuY3Rpb24oKXtFbWJlci5nZXQsRW1iZXIuc2V0
        O3ZhciBlPUVtYmVyLlZpZXcuc3RhdGVzLmluQnVmZmVyPUVtYmVyLmNyZWF0
        ZShFbWJlci5WaWV3LnN0YXRlcy5fZGVmYXVsdCk7RW1iZXIubWVyZ2UoZSx7
        JDpmdW5jdGlvbihlKXtyZXR1cm4gZS5yZXJlbmRlcigpLEVtYmVyLiQoKX0s
        cmVyZW5kZXI6ZnVuY3Rpb24oKXt0aHJvdyBuZXcgRW1iZXIuRXJyb3IoIlNv
        bWV0aGluZyB5b3UgZGlkIGNhdXNlZCBhIHZpZXcgdG8gcmUtcmVuZGVyIGFm
        dGVyIGl0IHJlbmRlcmVkIGJ1dCBiZWZvcmUgaXQgd2FzIGluc2VydGVkIGlu
        dG8gdGhlIERPTS4iKX0sYXBwZW5kQ2hpbGQ6ZnVuY3Rpb24oZSx0LHIpe3Zh
        ciBuPWUuYnVmZmVyLGk9ZS5fY2hpbGRWaWV3cztyZXR1cm4gdD1lLmNyZWF0
        ZUNoaWxkVmlldyh0LHIpLGkubGVuZ3RofHwoaT1lLl9jaGlsZFZpZXdzPWku
        c2xpY2UoKSksaS5wdXNoKHQpLHQucmVuZGVyVG9CdWZmZXIobiksZS5wcm9w
        ZXJ0eURpZENoYW5nZSgiY2hpbGRWaWV3cyIpLHR9LGRlc3Ryb3lFbGVtZW50
        OmZ1bmN0aW9uKGUpe2UuY2xlYXJCdWZmZXIoKTt2YXIgdD1lLl9ub3RpZnlX
        aWxsRGVzdHJveUVsZW1lbnQoKTtyZXR1cm4gdC50cmFuc2l0aW9uVG8oInBy
        ZVJlbmRlciIsITEpLGV9LGVtcHR5OmZ1bmN0aW9uKCl7fSxyZW5kZXJUb0J1
        ZmZlcklmTmVlZGVkOmZ1bmN0aW9uKCl7cmV0dXJuITF9LGluc2VydEVsZW1l
        bnQ6ZnVuY3Rpb24oKXt0aHJvdyJZb3UgY2FuJ3QgaW5zZXJ0IGFuIGVsZW1l
        bnQgdGhhdCBoYXMgYWxyZWFkeSBiZWVuIHJlbmRlcmVkIn0sc2V0RWxlbWVu
        dDpmdW5jdGlvbihlLHQpe3JldHVybiBudWxsPT09dD9lLnRyYW5zaXRpb25U
        bygicHJlUmVuZGVyIik6KGUuY2xlYXJCdWZmZXIoKSxlLnRyYW5zaXRpb25U
        bygiaGFzRWxlbWVudCIpKSx0fSxpbnZva2VPYnNlcnZlcjpmdW5jdGlvbihl
        LHQpe3QuY2FsbChlKX19KX0oKSxmdW5jdGlvbigpe3ZhciBlPUVtYmVyLmdl
        dCx0PUVtYmVyLnNldCxyPUVtYmVyLlZpZXcuc3RhdGVzLmhhc0VsZW1lbnQ9
        RW1iZXIuY3JlYXRlKEVtYmVyLlZpZXcuc3RhdGVzLl9kZWZhdWx0KTtFbWJl
        ci5tZXJnZShyLHskOmZ1bmN0aW9uKHQscil7dmFyIG49ZSh0LCJlbGVtZW50
        Iik7cmV0dXJuIHI/RW1iZXIuJChyLG4pOkVtYmVyLiQobil9LGdldEVsZW1l
        bnQ6ZnVuY3Rpb24odCl7dmFyIHI9ZSh0LCJwYXJlbnRWaWV3Iik7cmV0dXJu
        IHImJihyPWUociwiZWxlbWVudCIpKSxyP3QuZmluZEVsZW1lbnRJblBhcmVu
        dEVsZW1lbnQocik6RW1iZXIuJCgiIyIrZSh0LCJlbGVtZW50SWQiKSlbMF19
        LHNldEVsZW1lbnQ6ZnVuY3Rpb24oZSx0KXtpZihudWxsIT09dCl0aHJvdyJZ
        b3UgY2Fubm90IHNldCBhbiBlbGVtZW50IHRvIGEgbm9uLW51bGwgdmFsdWUg
        d2hlbiB0aGUgZWxlbWVudCBpcyBhbHJlYWR5IGluIHRoZSBET00uIjtyZXR1
        cm4gZS50cmFuc2l0aW9uVG8oInByZVJlbmRlciIpLHR9LHJlcmVuZGVyOmZ1
        bmN0aW9uKGUpe3JldHVybiBlLnRyaWdnZXJSZWN1cnNpdmVseSgid2lsbENs
        ZWFyUmVuZGVyIiksZS5jbGVhclJlbmRlcmVkQ2hpbGRyZW4oKSxlLmRvbU1h
        bmFnZXIucmVwbGFjZShlKSxlfSxkZXN0cm95RWxlbWVudDpmdW5jdGlvbihl
        KXtyZXR1cm4gZS5fbm90aWZ5V2lsbERlc3Ryb3lFbGVtZW50KCksZS5kb21N
        YW5hZ2VyLnJlbW92ZShlKSx0KGUsImVsZW1lbnQiLG51bGwpLGUuX3NjaGVk
        dWxlZEluc2VydCYmKEVtYmVyLnJ1bi5jYW5jZWwoZS5fc2NoZWR1bGVkSW5z
        ZXJ0KSxlLl9zY2hlZHVsZWRJbnNlcnQ9bnVsbCksZX0sZW1wdHk6ZnVuY3Rp
        b24oZSl7dmFyIHQscixuPWUuX2NoaWxkVmlld3M7aWYobilmb3IodD1uLmxl
        bmd0aCxyPTA7dD5yO3IrKyluW3JdLl9ub3RpZnlXaWxsRGVzdHJveUVsZW1l
        bnQoKTtlLmRvbU1hbmFnZXIuZW1wdHkoZSl9LGhhbmRsZUV2ZW50OmZ1bmN0
        aW9uKGUsdCxyKXtyZXR1cm4gZS5oYXModCk/ZS50cmlnZ2VyKHQscik6ITB9
        LGludm9rZU9ic2VydmVyOmZ1bmN0aW9uKGUsdCl7dC5jYWxsKGUpfX0pO3Zh
        ciBuPUVtYmVyLlZpZXcuc3RhdGVzLmluRE9NPUVtYmVyLmNyZWF0ZShyKTtF
        bWJlci5tZXJnZShuLHtlbnRlcjpmdW5jdGlvbihlKXtlLmlzVmlydHVhbHx8
        KEVtYmVyLlZpZXcudmlld3NbZS5lbGVtZW50SWRdPWUpLGUuYWRkQmVmb3Jl
        T2JzZXJ2ZXIoImVsZW1lbnRJZCIsZnVuY3Rpb24oKXt0aHJvdyBuZXcgRW1i
        ZXIuRXJyb3IoIkNoYW5naW5nIGEgdmlldydzIGVsZW1lbnRJZCBhZnRlciBj
        cmVhdGlvbiBpcyBub3QgYWxsb3dlZCIpfSl9LGV4aXQ6ZnVuY3Rpb24oZSl7
        dGhpcy5pc1ZpcnR1YWx8fGRlbGV0ZSBFbWJlci5WaWV3LnZpZXdzW2UuZWxl
        bWVudElkXX0saW5zZXJ0RWxlbWVudDpmdW5jdGlvbigpe3Rocm93IllvdSBj
        YW4ndCBpbnNlcnQgYW4gZWxlbWVudCBpbnRvIHRoZSBET00gdGhhdCBoYXMg
        YWxyZWFkeSBiZWVuIGluc2VydGVkIn19KX0oKSxmdW5jdGlvbigpe3ZhciBl
        PSJZb3UgY2FuJ3QgY2FsbCAlQCBvbiBhIHZpZXcgYmVpbmcgZGVzdHJveWVk
        Iix0PUVtYmVyLlN0cmluZy5mbXQscj1FbWJlci5WaWV3LnN0YXRlcy5kZXN0
        cm95aW5nPUVtYmVyLmNyZWF0ZShFbWJlci5WaWV3LnN0YXRlcy5fZGVmYXVs
        dCk7RW1iZXIubWVyZ2Uocix7YXBwZW5kQ2hpbGQ6ZnVuY3Rpb24oKXt0aHJv
        dyB0KGUsWyJhcHBlbmRDaGlsZCJdKX0scmVyZW5kZXI6ZnVuY3Rpb24oKXt0
        aHJvdyB0KGUsWyJyZXJlbmRlciJdKX0sZGVzdHJveUVsZW1lbnQ6ZnVuY3Rp
        b24oKXt0aHJvdyB0KGUsWyJkZXN0cm95RWxlbWVudCJdKX0sZW1wdHk6ZnVu
        Y3Rpb24oKXt0aHJvdyB0KGUsWyJlbXB0eSJdKX0sc2V0RWxlbWVudDpmdW5j
        dGlvbigpe3Rocm93IHQoZSxbInNldCgnZWxlbWVudCcsIC4uLikiXSl9LHJl
        bmRlclRvQnVmZmVySWZOZWVkZWQ6ZnVuY3Rpb24oKXtyZXR1cm4hMX0saW5z
        ZXJ0RWxlbWVudDpFbWJlci5LfSl9KCksZnVuY3Rpb24oKXtFbWJlci5WaWV3
        LmNsb25lU3RhdGVzPWZ1bmN0aW9uKGUpe3ZhciB0PXt9O3QuX2RlZmF1bHQ9
        e30sdC5wcmVSZW5kZXI9RW1iZXIuY3JlYXRlKHQuX2RlZmF1bHQpLHQuZGVz
        dHJveWluZz1FbWJlci5jcmVhdGUodC5fZGVmYXVsdCksdC5pbkJ1ZmZlcj1F
        bWJlci5jcmVhdGUodC5fZGVmYXVsdCksdC5oYXNFbGVtZW50PUVtYmVyLmNy
        ZWF0ZSh0Ll9kZWZhdWx0KSx0LmluRE9NPUVtYmVyLmNyZWF0ZSh0Lmhhc0Vs
        ZW1lbnQpO2Zvcih2YXIgciBpbiBlKWUuaGFzT3duUHJvcGVydHkocikmJkVt
        YmVyLm1lcmdlKHRbcl0sZVtyXSk7cmV0dXJuIHR9fSgpLGZ1bmN0aW9uKCl7
        ZnVuY3Rpb24gZShlLHQscixuKXt0LnRyaWdnZXJSZWN1cnNpdmVseSgid2ls
        bEluc2VydEVsZW1lbnQiKSxyP3IuZG9tTWFuYWdlci5hZnRlcihyLG4uc3Ry
        aW5nKCkpOmUuZG9tTWFuYWdlci5wcmVwZW5kKGUsbi5zdHJpbmcoKSksdC5m
        b3JFYWNoKGZ1bmN0aW9uKGUpe2UudHJhbnNpdGlvblRvKCJpbkRPTSIpLGUu
        cHJvcGVydHlEaWRDaGFuZ2UoImVsZW1lbnQiKSxlLnRyaWdnZXJSZWN1cnNp
        dmVseSgiZGlkSW5zZXJ0RWxlbWVudCIpfSl9dmFyIHQ9RW1iZXIuVmlldy5j
        bG9uZVN0YXRlcyhFbWJlci5WaWV3LnN0YXRlcykscj1FbWJlci5nZXQsbj1F
        bWJlci5zZXQsaT1FbWJlci5FbnVtZXJhYmxlVXRpbHMuZm9yRWFjaCxvPUVt
        YmVyLl9WaWV3Q29sbGVjdGlvbjtFbWJlci5Db250YWluZXJWaWV3PUVtYmVy
        LlZpZXcuZXh0ZW5kKEVtYmVyLk11dGFibGVBcnJheSx7c3RhdGVzOnQsaW5p
        dDpmdW5jdGlvbigpe3RoaXMuX3N1cGVyKCk7dmFyIGU9cih0aGlzLCJjaGls
        ZFZpZXdzIik7RW1iZXIuZGVmaW5lUHJvcGVydHkodGhpcywiY2hpbGRWaWV3
        cyIsRW1iZXIuVmlldy5jaGlsZFZpZXdzUHJvcGVydHkpO3ZhciB0PXRoaXMu
        X2NoaWxkVmlld3M7aShlLGZ1bmN0aW9uKGUsaSl7dmFyIG87InN0cmluZyI9
        PXR5cGVvZiBlPyhvPXIodGhpcyxlKSxvPXRoaXMuY3JlYXRlQ2hpbGRWaWV3
        KG8pLG4odGhpcyxlLG8pKTpvPXRoaXMuY3JlYXRlQ2hpbGRWaWV3KGUpLHRb
        aV09b30sdGhpcyk7dmFyIG89cih0aGlzLCJjdXJyZW50VmlldyIpO28mJih0
        Lmxlbmd0aHx8KHQ9dGhpcy5fY2hpbGRWaWV3cz10aGlzLl9jaGlsZFZpZXdz
        LnNsaWNlKCkpLHQucHVzaCh0aGlzLmNyZWF0ZUNoaWxkVmlldyhvKSkpfSxy
        ZXBsYWNlOmZ1bmN0aW9uKGUsdCxuKXt2YXIgaT1uP3IobiwibGVuZ3RoIik6
        MDtpZih0aGlzLmFycmF5Q29udGVudFdpbGxDaGFuZ2UoZSx0LGkpLHRoaXMu
        Y2hpbGRWaWV3c1dpbGxDaGFuZ2UodGhpcy5fY2hpbGRWaWV3cyxlLHQpLDA9
        PT1pKXRoaXMuX2NoaWxkVmlld3Muc3BsaWNlKGUsdCk7ZWxzZXt2YXIgbz1b
        ZSx0XS5jb25jYXQobik7bi5sZW5ndGgmJiF0aGlzLl9jaGlsZFZpZXdzLmxl
        bmd0aCYmKHRoaXMuX2NoaWxkVmlld3M9dGhpcy5fY2hpbGRWaWV3cy5zbGlj
        ZSgpKSx0aGlzLl9jaGlsZFZpZXdzLnNwbGljZS5hcHBseSh0aGlzLl9jaGls
        ZFZpZXdzLG8pfXJldHVybiB0aGlzLmFycmF5Q29udGVudERpZENoYW5nZShl
        LHQsaSksdGhpcy5jaGlsZFZpZXdzRGlkQ2hhbmdlKHRoaXMuX2NoaWxkVmll
        d3MsZSx0LGkpLHRoaXN9LG9iamVjdEF0OmZ1bmN0aW9uKGUpe3JldHVybiB0
        aGlzLl9jaGlsZFZpZXdzW2VdfSxsZW5ndGg6RW1iZXIuY29tcHV0ZWQoZnVu
        Y3Rpb24oKXtyZXR1cm4gdGhpcy5fY2hpbGRWaWV3cy5sZW5ndGh9KS52b2xh
        dGlsZSgpLHJlbmRlcjpmdW5jdGlvbihlKXt0aGlzLmZvckVhY2hDaGlsZFZp
        ZXcoZnVuY3Rpb24odCl7dC5yZW5kZXJUb0J1ZmZlcihlKX0pfSxpbnN0cnVt
        ZW50TmFtZToiY29udGFpbmVyIixjaGlsZFZpZXdzV2lsbENoYW5nZTpmdW5j
        dGlvbihlLHQscil7aWYodGhpcy5wcm9wZXJ0eVdpbGxDaGFuZ2UoImNoaWxk
        Vmlld3MiKSxyPjApe3ZhciBuPWUuc2xpY2UodCx0K3IpO3RoaXMuY3VycmVu
        dFN0YXRlLmNoaWxkVmlld3NXaWxsQ2hhbmdlKHRoaXMsZSx0LHIpLHRoaXMu
        aW5pdGlhbGl6ZVZpZXdzKG4sbnVsbCxudWxsKX19LHJlbW92ZUNoaWxkOmZ1
        bmN0aW9uKGUpe3JldHVybiB0aGlzLnJlbW92ZU9iamVjdChlKSx0aGlzfSxj
        aGlsZFZpZXdzRGlkQ2hhbmdlOmZ1bmN0aW9uKGUsdCxuLGkpe2lmKGk+MCl7
        dmFyIG89ZS5zbGljZSh0LHQraSk7dGhpcy5pbml0aWFsaXplVmlld3Mobyx0
        aGlzLHIodGhpcywidGVtcGxhdGVEYXRhIikpLHRoaXMuY3VycmVudFN0YXRl
        LmNoaWxkVmlld3NEaWRDaGFuZ2UodGhpcyxlLHQsaSl9dGhpcy5wcm9wZXJ0
        eURpZENoYW5nZSgiY2hpbGRWaWV3cyIpfSxpbml0aWFsaXplVmlld3M6ZnVu
        Y3Rpb24oZSx0LG8pe2koZSxmdW5jdGlvbihlKXtuKGUsIl9wYXJlbnRWaWV3
        Iix0KSwhZS5jb250YWluZXImJnQmJm4oZSwiY29udGFpbmVyIix0LmNvbnRh
        aW5lcikscihlLCJ0ZW1wbGF0ZURhdGEiKXx8bihlLCJ0ZW1wbGF0ZURhdGEi
        LG8pfSl9LGN1cnJlbnRWaWV3Om51bGwsX2N1cnJlbnRWaWV3V2lsbENoYW5n
        ZTpFbWJlci5iZWZvcmVPYnNlcnZlcigiY3VycmVudFZpZXciLGZ1bmN0aW9u
        KCl7dmFyIGU9cih0aGlzLCJjdXJyZW50VmlldyIpO2UmJmUuZGVzdHJveSgp
        fSksX2N1cnJlbnRWaWV3RGlkQ2hhbmdlOkVtYmVyLm9ic2VydmVyKCJjdXJy
        ZW50VmlldyIsZnVuY3Rpb24oKXt2YXIgZT1yKHRoaXMsImN1cnJlbnRWaWV3
        Iik7ZSYmdGhpcy5wdXNoT2JqZWN0KGUpfSksX2Vuc3VyZUNoaWxkcmVuQXJl
        SW5ET006ZnVuY3Rpb24oKXt0aGlzLmN1cnJlbnRTdGF0ZS5lbnN1cmVDaGls
        ZHJlbkFyZUluRE9NKHRoaXMpfX0pLEVtYmVyLm1lcmdlKHQuX2RlZmF1bHQs
        e2NoaWxkVmlld3NXaWxsQ2hhbmdlOkVtYmVyLkssY2hpbGRWaWV3c0RpZENo
        YW5nZTpFbWJlci5LLGVuc3VyZUNoaWxkcmVuQXJlSW5ET006RW1iZXIuS30p
        LEVtYmVyLm1lcmdlKHQuaW5CdWZmZXIse2NoaWxkVmlld3NEaWRDaGFuZ2U6
        ZnVuY3Rpb24oKXt0aHJvdyBuZXcgRW1iZXIuRXJyb3IoIllvdSBjYW5ub3Qg
        bW9kaWZ5IGNoaWxkIHZpZXdzIHdoaWxlIGluIHRoZSBpbkJ1ZmZlciBzdGF0
        ZSIpfX0pLEVtYmVyLm1lcmdlKHQuaGFzRWxlbWVudCx7Y2hpbGRWaWV3c1dp
        bGxDaGFuZ2U6ZnVuY3Rpb24oZSx0LHIsbil7Zm9yKHZhciBpPXI7cituPmk7
        aSsrKXRbaV0ucmVtb3ZlKCl9LGNoaWxkVmlld3NEaWRDaGFuZ2U6ZnVuY3Rp
        b24oZSl7RW1iZXIucnVuLnNjaGVkdWxlT25jZSgicmVuZGVyIixlLCJfZW5z
        dXJlQ2hpbGRyZW5BcmVJbkRPTSIpfSxlbnN1cmVDaGlsZHJlbkFyZUluRE9N
        OmZ1bmN0aW9uKHQpe3ZhciByLG4saSxhLHMsdT10Ll9jaGlsZFZpZXdzLGM9
        bmV3IG87Zm9yKHI9MCxuPXUubGVuZ3RoO24+cjtyKyspaT11W3JdLHN8fChz
        PUVtYmVyLlJlbmRlckJ1ZmZlcigpLHMuX2hhc0VsZW1lbnQ9ITEpLGkucmVu
        ZGVyVG9CdWZmZXJJZk5lZWRlZChzKT9jLnB1c2goaSk6Yy5sZW5ndGg/KGUo
        dCxjLGEscykscz1udWxsLGE9aSxjLmNsZWFyKCkpOmE9aTtjLmxlbmd0aCYm
        ZSh0LGMsYSxzKX19KX0oKSxmdW5jdGlvbigpe3ZhciBlPUVtYmVyLmdldCx0
        PUVtYmVyLnNldDtFbWJlci5TdHJpbmcuZm10LEVtYmVyLkNvbGxlY3Rpb25W
        aWV3PUVtYmVyLkNvbnRhaW5lclZpZXcuZXh0ZW5kKHtjb250ZW50Om51bGws
        ZW1wdHlWaWV3Q2xhc3M6RW1iZXIuVmlldyxlbXB0eVZpZXc6bnVsbCxpdGVt
        Vmlld0NsYXNzOkVtYmVyLlZpZXcsaW5pdDpmdW5jdGlvbigpe3ZhciBlPXRo
        aXMuX3N1cGVyKCk7cmV0dXJuIHRoaXMuX2NvbnRlbnREaWRDaGFuZ2UoKSxl
        fSxfY29udGVudFdpbGxDaGFuZ2U6RW1iZXIuYmVmb3JlT2JzZXJ2ZXIoImNv
        bnRlbnQiLGZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5nZXQoImNvbnRlbnQiKTt0
        JiZ0LnJlbW92ZUFycmF5T2JzZXJ2ZXIodGhpcyk7dmFyIHI9dD9lKHQsImxl
        bmd0aCIpOjA7dGhpcy5hcnJheVdpbGxDaGFuZ2UodCwwLHIpfSksX2NvbnRl
        bnREaWRDaGFuZ2U6RW1iZXIub2JzZXJ2ZXIoImNvbnRlbnQiLGZ1bmN0aW9u
        KCl7dmFyIHQ9ZSh0aGlzLCJjb250ZW50Iik7dCYmKHRoaXMuX2Fzc2VydEFy
        cmF5TGlrZSh0KSx0LmFkZEFycmF5T2JzZXJ2ZXIodGhpcykpO3ZhciByPXQ/
        ZSh0LCJsZW5ndGgiKTowO3RoaXMuYXJyYXlEaWRDaGFuZ2UodCwwLG51bGws
        cil9KSxfYXNzZXJ0QXJyYXlMaWtlOmZ1bmN0aW9uKCl7fSxkZXN0cm95OmZ1
        bmN0aW9uKCl7aWYodGhpcy5fc3VwZXIoKSl7dmFyIHQ9ZSh0aGlzLCJjb250
        ZW50Iik7cmV0dXJuIHQmJnQucmVtb3ZlQXJyYXlPYnNlcnZlcih0aGlzKSx0
        aGlzLl9jcmVhdGVkRW1wdHlWaWV3JiZ0aGlzLl9jcmVhdGVkRW1wdHlWaWV3
        LmRlc3Ryb3koKSx0aGlzfX0sYXJyYXlXaWxsQ2hhbmdlOmZ1bmN0aW9uKHQs
        cixuKXt2YXIgaT1lKHRoaXMsImVtcHR5VmlldyIpO2kmJmkgaW5zdGFuY2Vv
        ZiBFbWJlci5WaWV3JiZpLnJlbW92ZUZyb21QYXJlbnQoKTt2YXIgbyxhLHMs
        dT10aGlzLl9jaGlsZFZpZXdzO3M9dGhpcy5fY2hpbGRWaWV3cy5sZW5ndGg7
        dmFyIGM9bj09PXM7Zm9yKGMmJih0aGlzLmN1cnJlbnRTdGF0ZS5lbXB0eSh0
        aGlzKSx0aGlzLmludm9rZVJlY3Vyc2l2ZWx5KGZ1bmN0aW9uKGUpe2UucmVt
        b3ZlZEZyb21ET009ITB9LCExKSksYT1yK24tMTthPj1yO2EtLSlvPXVbYV0s
        by5kZXN0cm95KCl9LGFycmF5RGlkQ2hhbmdlOmZ1bmN0aW9uKHIsbixpLG8p
        e3ZhciBhLHMsdSxjLGwsaCxtPVtdO2lmKGM9cj9lKHIsImxlbmd0aCIpOjAp
        Zm9yKGw9ZSh0aGlzLCJpdGVtVmlld0NsYXNzIiksInN0cmluZyI9PXR5cGVv
        ZiBsJiYobD1lKGwpfHxsKSx1PW47bitvPnU7dSsrKXM9ci5vYmplY3RBdCh1
        KSxhPXRoaXMuY3JlYXRlQ2hpbGRWaWV3KGwse2NvbnRlbnQ6cyxjb250ZW50
        SW5kZXg6dX0pLG0ucHVzaChhKTtlbHNle2lmKGg9ZSh0aGlzLCJlbXB0eVZp
        ZXciKSwhaClyZXR1cm47InN0cmluZyI9PXR5cGVvZiBoJiYoaD1lKGgpfHxo
        KSxoPXRoaXMuY3JlYXRlQ2hpbGRWaWV3KGgpLG0ucHVzaChoKSx0KHRoaXMs
        ImVtcHR5VmlldyIsaCksRW1iZXIuQ29yZVZpZXcuZGV0ZWN0KGgpJiYodGhp
        cy5fY3JlYXRlZEVtcHR5Vmlldz1oKX10aGlzLnJlcGxhY2UobiwwLG0pfSxj
        cmVhdGVDaGlsZFZpZXc6ZnVuY3Rpb24ocixuKXtyPXRoaXMuX3N1cGVyKHIs
        bik7dmFyIGk9ZShyLCJ0YWdOYW1lIik7cmV0dXJuKG51bGw9PT1pfHx2b2lk
        IDA9PT1pKSYmKGk9RW1iZXIuQ29sbGVjdGlvblZpZXcuQ09OVEFJTkVSX01B
        UFtlKHRoaXMsInRhZ05hbWUiKV0sdChyLCJ0YWdOYW1lIixpKSkscn19KSxF
        bWJlci5Db2xsZWN0aW9uVmlldy5DT05UQUlORVJfTUFQPXt1bDoibGkiLG9s
        OiJsaSIsdGFibGU6InRyIix0aGVhZDoidHIiLHRib2R5OiJ0ciIsdGZvb3Q6
        InRyIix0cjoidGQiLHNlbGVjdDoib3B0aW9uIn19KCksZnVuY3Rpb24oKXt2
        YXIgZT1FbWJlci5nZXQsdD1FbWJlci5zZXQscj0oRW1iZXIuaXNOb25lLEFy
        cmF5LnByb3RvdHlwZS5zbGljZSk7RW1iZXIuQ29tcG9uZW50PUVtYmVyLlZp
        ZXcuZXh0ZW5kKEVtYmVyLlRhcmdldEFjdGlvblN1cHBvcnQse2luaXQ6ZnVu
        Y3Rpb24oKXt0aGlzLl9zdXBlcigpLHQodGhpcywiY29udGV4dCIsdGhpcyks
        dCh0aGlzLCJjb250cm9sbGVyIix0aGlzKX0sY2xvbmVLZXl3b3JkczpmdW5j
        dGlvbigpe3JldHVybnt2aWV3OnRoaXMsY29udHJvbGxlcjp0aGlzfX0sX3lp
        ZWxkOmZ1bmN0aW9uKHQscil7dmFyIG49ci5kYXRhLnZpZXcsaT10aGlzLl9w
        YXJlbnRWaWV3LG89ZSh0aGlzLCJ0ZW1wbGF0ZSIpO28mJm4uYXBwZW5kQ2hp
        bGQoRW1iZXIuVmlldyx7aXNWaXJ0dWFsOiEwLHRhZ05hbWU6IiIsX2NvbnRl
        eHRWaWV3OmksdGVtcGxhdGU6byxjb250ZXh0OmUoaSwiY29udGV4dCIpLGNv
        bnRyb2xsZXI6ZShpLCJjb250cm9sbGVyIiksdGVtcGxhdGVEYXRhOntrZXl3
        b3JkczppLmNsb25lS2V5d29yZHMoKX19KX0sdGFyZ2V0T2JqZWN0OkVtYmVy
        LmNvbXB1dGVkKGZ1bmN0aW9uKCl7dmFyIHQ9ZSh0aGlzLCJfcGFyZW50Vmll
        dyIpO3JldHVybiB0P2UodCwiY29udHJvbGxlciIpOm51bGx9KS5wcm9wZXJ0
        eSgiX3BhcmVudFZpZXciKSxzZW5kQWN0aW9uOmZ1bmN0aW9uKHQpe3ZhciBu
        LGk9ci5jYWxsKGFyZ3VtZW50cywxKTtuPXZvaWQgMD09PXQ/ZSh0aGlzLCJh
        Y3Rpb24iKTplKHRoaXMsdCksdm9pZCAwIT09biYmdGhpcy50cmlnZ2VyQWN0
        aW9uKHthY3Rpb246bixhY3Rpb25Db250ZXh0Oml9KX19KX0oKSxmdW5jdGlv
        bigpe0VtYmVyLlZpZXdUYXJnZXRBY3Rpb25TdXBwb3J0PUVtYmVyLk1peGlu
        LmNyZWF0ZShFbWJlci5UYXJnZXRBY3Rpb25TdXBwb3J0LHt0YXJnZXQ6RW1i
        ZXIuY29tcHV0ZWQuYWxpYXMoImNvbnRyb2xsZXIiKSxhY3Rpb25Db250ZXh0
        OkVtYmVyLmNvbXB1dGVkLmFsaWFzKCJjb250ZXh0Iil9KX0oKSxmdW5jdGlv
        bigpe2UoIm1ldGFtb3JwaCIsW10sZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7
        Ly8gQ29weXJpZ2h0OiDCqTIwMTEgTXkgQ29tcGFueSBJbmMuIEFsbCByaWdo
        dHMgcmVzZXJ2ZWQuCnZhciBlPWZ1bmN0aW9uKCl7fSx0PTAscj10aGlzLmRv
        Y3VtZW50LG49KCJ1bmRlZmluZWQiPT10eXBlb2YgRU5WP3t9OkVOVikuRElT
        QUJMRV9SQU5HRV9BUEksaT0hbiYmciYmImNyZWF0ZVJhbmdlImluIHImJiJ1
        bmRlZmluZWQiIT10eXBlb2YgUmFuZ2UmJlJhbmdlLnByb3RvdHlwZS5jcmVh
        dGVDb250ZXh0dWFsRnJhZ21lbnQsbz1yJiZmdW5jdGlvbigpe3ZhciBlPXIu
        Y3JlYXRlRWxlbWVudCgiZGl2Iik7cmV0dXJuIGUuaW5uZXJIVE1MPSI8ZGl2
        PjwvZGl2PiIsZS5maXJzdENoaWxkLmlubmVySFRNTD0iPHNjcmlwdD48L3Nj
        cmlwdD4iLCIiPT09ZS5maXJzdENoaWxkLmlubmVySFRNTH0oKSxhPXImJmZ1
        bmN0aW9uKCl7dmFyIGU9ci5jcmVhdGVFbGVtZW50KCJkaXYiKTtyZXR1cm4g
        ZS5pbm5lckhUTUw9IlRlc3Q6IDxzY3JpcHQgdHlwZT0ndGV4dC94LXBsYWNl
        aG9sZGVyJz48L3NjcmlwdD5WYWx1ZSIsIlRlc3Q6Ij09PWUuY2hpbGROb2Rl
        c1swXS5ub2RlVmFsdWUmJiIgVmFsdWUiPT09ZS5jaGlsZE5vZGVzWzJdLm5v
        ZGVWYWx1ZX0oKSxzPWZ1bmN0aW9uKHIpe3ZhciBuO249dGhpcyBpbnN0YW5j
        ZW9mIHM/dGhpczpuZXcgZSxuLmlubmVySFRNTD1yO3ZhciBpPSJtZXRhbW9y
        cGgtIit0Kys7cmV0dXJuIG4uc3RhcnQ9aSsiLXN0YXJ0IixuLmVuZD1pKyIt
        ZW5kIixufTtlLnByb3RvdHlwZT1zLnByb3RvdHlwZTt2YXIgdSxjLGwsaCxt
        LGYscCxkLGI7aWYoaD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnN0YXJ0VGFn
        KCkrdGhpcy5pbm5lckhUTUwrdGhpcy5lbmRUYWcoKX0sZD1mdW5jdGlvbigp
        e3JldHVybiI8c2NyaXB0IGlkPSciK3RoaXMuc3RhcnQrIicgdHlwZT0ndGV4
        dC94LXBsYWNlaG9sZGVyJz48L3NjcmlwdD4ifSxiPWZ1bmN0aW9uKCl7cmV0
        dXJuIjxzY3JpcHQgaWQ9JyIrdGhpcy5lbmQrIicgdHlwZT0ndGV4dC94LXBs
        YWNlaG9sZGVyJz48L3NjcmlwdD4ifSxpKXU9ZnVuY3Rpb24oZSx0KXt2YXIg
        bj1yLmNyZWF0ZVJhbmdlKCksaT1yLmdldEVsZW1lbnRCeUlkKGUuc3RhcnQp
        LG89ci5nZXRFbGVtZW50QnlJZChlLmVuZCk7cmV0dXJuIHQ/KG4uc2V0U3Rh
        cnRCZWZvcmUoaSksbi5zZXRFbmRBZnRlcihvKSk6KG4uc2V0U3RhcnRBZnRl
        cihpKSxuLnNldEVuZEJlZm9yZShvKSksbn0sYz1mdW5jdGlvbihlLHQpe3Zh
        ciByPXUodGhpcyx0KTtyLmRlbGV0ZUNvbnRlbnRzKCk7dmFyIG49ci5jcmVh
        dGVDb250ZXh0dWFsRnJhZ21lbnQoZSk7ci5pbnNlcnROb2RlKG4pfSxsPWZ1
        bmN0aW9uKCl7dmFyIGU9dSh0aGlzLCEwKTtlLmRlbGV0ZUNvbnRlbnRzKCl9
        LG09ZnVuY3Rpb24oZSl7dmFyIHQ9ci5jcmVhdGVSYW5nZSgpO3Quc2V0U3Rh
        cnQoZSksdC5jb2xsYXBzZSghMSk7dmFyIG49dC5jcmVhdGVDb250ZXh0dWFs
        RnJhZ21lbnQodGhpcy5vdXRlckhUTUwoKSk7ZS5hcHBlbmRDaGlsZChuKX0s
        Zj1mdW5jdGlvbihlKXt2YXIgdD1yLmNyZWF0ZVJhbmdlKCksbj1yLmdldEVs
        ZW1lbnRCeUlkKHRoaXMuZW5kKTt0LnNldFN0YXJ0QWZ0ZXIobiksdC5zZXRF
        bmRBZnRlcihuKTt2YXIgaT10LmNyZWF0ZUNvbnRleHR1YWxGcmFnbWVudChl
        KTt0Lmluc2VydE5vZGUoaSl9LHA9ZnVuY3Rpb24oZSl7dmFyIHQ9ci5jcmVh
        dGVSYW5nZSgpLG49ci5nZXRFbGVtZW50QnlJZCh0aGlzLnN0YXJ0KTt0LnNl
        dFN0YXJ0QWZ0ZXIobiksdC5zZXRFbmRBZnRlcihuKTt2YXIgaT10LmNyZWF0
        ZUNvbnRleHR1YWxGcmFnbWVudChlKTt0Lmluc2VydE5vZGUoaSl9O2Vsc2V7
        dmFyIHY9e3NlbGVjdDpbMSwiPHNlbGVjdCBtdWx0aXBsZT0nbXVsdGlwbGUn
        PiIsIjwvc2VsZWN0PiJdLGZpZWxkc2V0OlsxLCI8ZmllbGRzZXQ+IiwiPC9m
        aWVsZHNldD4iXSx0YWJsZTpbMSwiPHRhYmxlPiIsIjwvdGFibGU+Il0sdGJv
        ZHk6WzIsIjx0YWJsZT48dGJvZHk+IiwiPC90Ym9keT48L3RhYmxlPiJdLHRy
        OlszLCI8dGFibGU+PHRib2R5Pjx0cj4iLCI8L3RyPjwvdGJvZHk+PC90YWJs
        ZT4iXSxjb2xncm91cDpbMiwiPHRhYmxlPjx0Ym9keT48L3Rib2R5Pjxjb2xn
        cm91cD4iLCI8L2NvbGdyb3VwPjwvdGFibGU+Il0sbWFwOlsxLCI8bWFwPiIs
        IjwvbWFwPiJdLF9kZWZhdWx0OlswLCIiLCIiXX0sRT1mdW5jdGlvbihlLHQp
        e2lmKGUuZ2V0QXR0cmlidXRlKCJpZCIpPT09dClyZXR1cm4gZTt2YXIgcixu
        LGksbz1lLmNoaWxkTm9kZXMubGVuZ3RoO2ZvcihyPTA7bz5yO3IrKylpZihu
        PWUuY2hpbGROb2Rlc1tyXSxpPTE9PT1uLm5vZGVUeXBlJiZFKG4sdCkpcmV0
        dXJuIGl9LGc9ZnVuY3Rpb24oZSx0KXt2YXIgbj1bXTtpZihhJiYodD10LnJl
        cGxhY2UoLyhccyspKDxzY3JpcHQgaWQ9JyhbXiddKyknKS9nLGZ1bmN0aW9u
        KGUsdCxyLGkpe3JldHVybiBuLnB1c2goW2ksdF0pLHJ9KSksZS5pbm5lckhU
        TUw9dCxuLmxlbmd0aD4wKXt2YXIgaSxvPW4ubGVuZ3RoO2ZvcihpPTA7bz5p
        O2krKyl7dmFyIHM9RShlLG5baV1bMF0pLHU9ci5jcmVhdGVUZXh0Tm9kZShu
        W2ldWzFdKTtzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHUscyl9fX0seT1m
        dW5jdGlvbihlLHQpe3ZhciBuPXZbZS50YWdOYW1lLnRvTG93ZXJDYXNlKCld
        fHx2Ll9kZWZhdWx0LGk9blswXSxhPW5bMV0scz1uWzJdO28mJih0PSImc2h5
        OyIrdCk7dmFyIHU9ci5jcmVhdGVFbGVtZW50KCJkaXYiKTtnKHUsYSt0K3Mp
        O2Zvcih2YXIgYz0wO2k+PWM7YysrKXU9dS5maXJzdENoaWxkO2lmKG8pe2Zv
        cih2YXIgbD11OzE9PT1sLm5vZGVUeXBlJiYhbC5ub2RlTmFtZTspbD1sLmZp
        cnN0Q2hpbGQ7Mz09PWwubm9kZVR5cGUmJiLCrSI9PT1sLm5vZGVWYWx1ZS5j
        aGFyQXQoMCkmJihsLm5vZGVWYWx1ZT1sLm5vZGVWYWx1ZS5zbGljZSgxKSl9
        cmV0dXJuIHV9LHc9ZnVuY3Rpb24oZSl7Zm9yKDsiIj09PWUucGFyZW50Tm9k
        ZS50YWdOYW1lOyllPWUucGFyZW50Tm9kZTtyZXR1cm4gZX0sXz1mdW5jdGlv
        bihlLHQpe2UucGFyZW50Tm9kZSE9PXQucGFyZW50Tm9kZSYmdC5wYXJlbnRO
        b2RlLmluc2VydEJlZm9yZShlLHQucGFyZW50Tm9kZS5maXJzdENoaWxkKX07
        Yz1mdW5jdGlvbihlLHQpe3ZhciBuLGksbyxhPXcoci5nZXRFbGVtZW50QnlJ
        ZCh0aGlzLnN0YXJ0KSkscz1yLmdldEVsZW1lbnRCeUlkKHRoaXMuZW5kKSx1
        PXMucGFyZW50Tm9kZTtmb3IoXyhhLHMpLG49YS5uZXh0U2libGluZztuOyl7
        aWYoaT1uLm5leHRTaWJsaW5nLG89bj09PXMpe2lmKCF0KWJyZWFrO3M9bi5u
        ZXh0U2libGluZ31pZihuLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQobiksbyli
        cmVhaztuPWl9Zm9yKG49eShhLnBhcmVudE5vZGUsZSk7bjspaT1uLm5leHRT
        aWJsaW5nLHUuaW5zZXJ0QmVmb3JlKG4scyksbj1pfSxsPWZ1bmN0aW9uKCl7
        dmFyIGU9dyhyLmdldEVsZW1lbnRCeUlkKHRoaXMuc3RhcnQpKSx0PXIuZ2V0
        RWxlbWVudEJ5SWQodGhpcy5lbmQpO3RoaXMuaHRtbCgiIiksZS5wYXJlbnRO
        b2RlLnJlbW92ZUNoaWxkKGUpLHQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0
        KX0sbT1mdW5jdGlvbihlKXtmb3IodmFyIHQscj15KGUsdGhpcy5vdXRlckhU
        TUwoKSk7cjspdD1yLm5leHRTaWJsaW5nLGUuYXBwZW5kQ2hpbGQocikscj10
        fSxmPWZ1bmN0aW9uKGUpe3ZhciB0LG4saT1yLmdldEVsZW1lbnRCeUlkKHRo
        aXMuZW5kKSxvPWkubmV4dFNpYmxpbmcsYT1pLnBhcmVudE5vZGU7Zm9yKG49
        eShhLGUpO247KXQ9bi5uZXh0U2libGluZyxhLmluc2VydEJlZm9yZShuLG8p
        LG49dH0scD1mdW5jdGlvbihlKXt2YXIgdCxuLGk9ci5nZXRFbGVtZW50QnlJ
        ZCh0aGlzLnN0YXJ0KSxvPWkucGFyZW50Tm9kZTtuPXkobyxlKTtmb3IodmFy
        IGE9aS5uZXh0U2libGluZztuOyl0PW4ubmV4dFNpYmxpbmcsby5pbnNlcnRC
        ZWZvcmUobixhKSxuPXR9fXJldHVybiBzLnByb3RvdHlwZS5odG1sPWZ1bmN0
        aW9uKGUpe3JldHVybiB0aGlzLmNoZWNrUmVtb3ZlZCgpLHZvaWQgMD09PWU/
        dGhpcy5pbm5lckhUTUw6KGMuY2FsbCh0aGlzLGUpLHRoaXMuaW5uZXJIVE1M
        PWUsdm9pZCAwKX0scy5wcm90b3R5cGUucmVwbGFjZVdpdGg9ZnVuY3Rpb24o
        ZSl7dGhpcy5jaGVja1JlbW92ZWQoKSxjLmNhbGwodGhpcyxlLCEwKX0scy5w
        cm90b3R5cGUucmVtb3ZlPWwscy5wcm90b3R5cGUub3V0ZXJIVE1MPWgscy5w
        cm90b3R5cGUuYXBwZW5kVG89bSxzLnByb3RvdHlwZS5hZnRlcj1mLHMucHJv
        dG90eXBlLnByZXBlbmQ9cCxzLnByb3RvdHlwZS5zdGFydFRhZz1kLHMucHJv
        dG90eXBlLmVuZFRhZz1iLHMucHJvdG90eXBlLmlzUmVtb3ZlZD1mdW5jdGlv
        bigpe3ZhciBlPXIuZ2V0RWxlbWVudEJ5SWQodGhpcy5zdGFydCksdD1yLmdl
        dEVsZW1lbnRCeUlkKHRoaXMuZW5kKTtyZXR1cm4hZXx8IXR9LHMucHJvdG90
        eXBlLmNoZWNrUmVtb3ZlZD1mdW5jdGlvbigpe2lmKHRoaXMuaXNSZW1vdmVk
        KCkpdGhyb3cgbmV3IEVycm9yKCJDYW5ub3QgcGVyZm9ybSBvcGVyYXRpb25z
        IG9uIGEgTWV0YW1vcnBoIHRoYXQgaXMgbm90IGluIHRoZSBET00uIil9LHN9
        KX0oKSxmdW5jdGlvbigpe3ZhciBlPU9iamVjdC5jcmVhdGV8fGZ1bmN0aW9u
        KGUpe2Z1bmN0aW9uIHQoKXt9cmV0dXJuIHQucHJvdG90eXBlPWUsbmV3IHR9
        LHQ9dGhpcy5IYW5kbGViYXJzfHxFbWJlci5pbXBvcnRzJiZFbWJlci5pbXBv
        cnRzLkhhbmRsZWJhcnM7dHx8ImZ1bmN0aW9uIiE9dHlwZW9mIHJlcXVpcmV8
        fCh0PXJlcXVpcmUoImhhbmRsZWJhcnMiKSksRW1iZXIuSGFuZGxlYmFycz1l
        KHQpLEVtYmVyLkhhbmRsZWJhcnMuaGVscGVyPWZ1bmN0aW9uKGUsdCl7RW1i
        ZXIuVmlldy5kZXRlY3QodCk/RW1iZXIuSGFuZGxlYmFycy5yZWdpc3Rlckhl
        bHBlcihlLEVtYmVyLkhhbmRsZWJhcnMubWFrZVZpZXdIZWxwZXIodCkpOkVt
        YmVyLkhhbmRsZWJhcnMucmVnaXN0ZXJCb3VuZEhlbHBlci5hcHBseShudWxs
        LGFyZ3VtZW50cyl9LEVtYmVyLkhhbmRsZWJhcnMubWFrZVZpZXdIZWxwZXI9
        ZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQpe3JldHVybiBFbWJlci5I
        YW5kbGViYXJzLmhlbHBlcnMudmlldy5jYWxsKHRoaXMsZSx0KX19LEVtYmVy
        LkhhbmRsZWJhcnMuaGVscGVycz1lKHQuaGVscGVycyksRW1iZXIuSGFuZGxl
        YmFycy5Db21waWxlcj1mdW5jdGlvbigpe30sdC5Db21waWxlciYmKEVtYmVy
        LkhhbmRsZWJhcnMuQ29tcGlsZXIucHJvdG90eXBlPWUodC5Db21waWxlci5w
        cm90b3R5cGUpKSxFbWJlci5IYW5kbGViYXJzLkNvbXBpbGVyLnByb3RvdHlw
        ZS5jb21waWxlcj1FbWJlci5IYW5kbGViYXJzLkNvbXBpbGVyLEVtYmVyLkhh
        bmRsZWJhcnMuSmF2YVNjcmlwdENvbXBpbGVyPWZ1bmN0aW9uKCl7fSx0Lkph
        dmFTY3JpcHRDb21waWxlciYmKEVtYmVyLkhhbmRsZWJhcnMuSmF2YVNjcmlw
        dENvbXBpbGVyLnByb3RvdHlwZT1lKHQuSmF2YVNjcmlwdENvbXBpbGVyLnBy
        b3RvdHlwZSksRW1iZXIuSGFuZGxlYmFycy5KYXZhU2NyaXB0Q29tcGlsZXIu
        cHJvdG90eXBlLmNvbXBpbGVyPUVtYmVyLkhhbmRsZWJhcnMuSmF2YVNjcmlw
        dENvbXBpbGVyKSxFbWJlci5IYW5kbGViYXJzLkphdmFTY3JpcHRDb21waWxl
        ci5wcm90b3R5cGUubmFtZXNwYWNlPSJFbWJlci5IYW5kbGViYXJzIixFbWJl
        ci5IYW5kbGViYXJzLkphdmFTY3JpcHRDb21waWxlci5wcm90b3R5cGUuaW5p
        dGlhbGl6ZUJ1ZmZlcj1mdW5jdGlvbigpe3JldHVybiInJyJ9LEVtYmVyLkhh
        bmRsZWJhcnMuSmF2YVNjcmlwdENvbXBpbGVyLnByb3RvdHlwZS5hcHBlbmRU
        b0J1ZmZlcj1mdW5jdGlvbihlKXtyZXR1cm4iZGF0YS5idWZmZXIucHVzaCgi
        K2UrIik7In07dmFyIHI9L2hlbHBlcnNcLiguKj8pXCkvLG49L2hlbHBlcnNc
        WycoLio/KScvLGk9LyguKmJsb2NrSGVscGVyTWlzc2luZ1wuY2FsbFwoLiop
        KHN0YWNrWzAtOV0rKSgsLiopLztFbWJlci5IYW5kbGViYXJzLkphdmFTY3Jp
        cHRDb21waWxlci5zdHJpbmdpZnlMYXN0QmxvY2tIZWxwZXJNaXNzaW5nSW52
        b2NhdGlvbj1mdW5jdGlvbihlKXt2YXIgdD1lW2UubGVuZ3RoLTFdLG89KHIu
        ZXhlYyh0KXx8bi5leGVjKHQpKVsxXSxhPWkuZXhlYyh0KTtlW2UubGVuZ3Ro
        LTFdPWFbMV0rIiciK28rIiciK2FbM119O3ZhciBvPUVtYmVyLkhhbmRsZWJh
        cnMuSmF2YVNjcmlwdENvbXBpbGVyLnN0cmluZ2lmeUxhc3RCbG9ja0hlbHBl
        ck1pc3NpbmdJbnZvY2F0aW9uLGE9RW1iZXIuSGFuZGxlYmFycy5KYXZhU2Ny
        aXB0Q29tcGlsZXIucHJvdG90eXBlLmJsb2NrVmFsdWU7RW1iZXIuSGFuZGxl
        YmFycy5KYXZhU2NyaXB0Q29tcGlsZXIucHJvdG90eXBlLmJsb2NrVmFsdWU9
        ZnVuY3Rpb24oKXthLmFwcGx5KHRoaXMsYXJndW1lbnRzKSxvKHRoaXMuc291
        cmNlKX07dmFyIHM9RW1iZXIuSGFuZGxlYmFycy5KYXZhU2NyaXB0Q29tcGls
        ZXIucHJvdG90eXBlLmFtYmlndW91c0Jsb2NrVmFsdWU7RW1iZXIuSGFuZGxl
        YmFycy5KYXZhU2NyaXB0Q29tcGlsZXIucHJvdG90eXBlLmFtYmlndW91c0Js
        b2NrVmFsdWU9ZnVuY3Rpb24oKXtzLmFwcGx5KHRoaXMsYXJndW1lbnRzKSxv
        KHRoaXMuc291cmNlKX07dmFyIHU9ImVtYmVyIisgK25ldyBEYXRlLGM9MTtF
        bWJlci5IYW5kbGViYXJzLkNvbXBpbGVyLnByb3RvdHlwZS5tdXN0YWNoZT1m
        dW5jdGlvbihlKXtpZihlLmlzSGVscGVyJiYiY29udHJvbCI9PT1lLmlkLnN0
        cmluZyllLmhhc2g9ZS5oYXNofHxuZXcgdC5BU1QuSGFzaE5vZGUoW10pLGUu
        aGFzaC5wYWlycy5wdXNoKFsiY29udHJvbElEIixuZXcgdC5BU1QuU3RyaW5n
        Tm9kZSh1K2MrKyldKTtlbHNlIGlmKGUucGFyYW1zLmxlbmd0aHx8ZS5oYXNo
        KTtlbHNle3ZhciByPW5ldyB0LkFTVC5JZE5vZGUoW3twYXJ0OiJfdHJpYWdl
        TXVzdGFjaGUifV0pO2UuZXNjYXBlZHx8KGUuaGFzaD1lLmhhc2h8fG5ldyB0
        LkFTVC5IYXNoTm9kZShbXSksZS5oYXNoLnBhaXJzLnB1c2goWyJ1bmVzY2Fw
        ZWQiLG5ldyB0LkFTVC5TdHJpbmdOb2RlKCJ0cnVlIildKSksZT1uZXcgdC5B
        U1QuTXVzdGFjaGVOb2RlKFtyXS5jb25jYXQoW2UuaWRdKSxlLmhhc2gsIWUu
        ZXNjYXBlZCl9cmV0dXJuIHQuQ29tcGlsZXIucHJvdG90eXBlLm11c3RhY2hl
        LmNhbGwodGhpcyxlKX0sRW1iZXIuSGFuZGxlYmFycy5wcmVjb21waWxlPWZ1
        bmN0aW9uKGUpe3ZhciByPXQucGFyc2UoZSksbj17a25vd25IZWxwZXJzOnth
        Y3Rpb246ITAsdW5ib3VuZDohMCxiaW5kQXR0cjohMCx0ZW1wbGF0ZTohMCx2
        aWV3OiEwLF90cmlhZ2VNdXN0YWNoZTohMH0sZGF0YTohMCxzdHJpbmdQYXJh
        bXM6ITB9LGk9KG5ldyBFbWJlci5IYW5kbGViYXJzLkNvbXBpbGVyKS5jb21w
        aWxlKHIsbik7cmV0dXJuKG5ldyBFbWJlci5IYW5kbGViYXJzLkphdmFTY3Jp
        cHRDb21waWxlcikuY29tcGlsZShpLG4sdm9pZCAwLCEwKX0sdC5jb21waWxl
        JiYoRW1iZXIuSGFuZGxlYmFycy5jb21waWxlPWZ1bmN0aW9uKGUpe3ZhciBy
        PXQucGFyc2UoZSksbj17ZGF0YTohMCxzdHJpbmdQYXJhbXM6ITB9LGk9KG5l
        dyBFbWJlci5IYW5kbGViYXJzLkNvbXBpbGVyKS5jb21waWxlKHIsbiksbz0o
        bmV3IEVtYmVyLkhhbmRsZWJhcnMuSmF2YVNjcmlwdENvbXBpbGVyKS5jb21w
        aWxlKGksbix2b2lkIDAsITApLGE9RW1iZXIuSGFuZGxlYmFycy50ZW1wbGF0
        ZShvKTtyZXR1cm4gYS5pc01ldGhvZD0hMSxhfSl9KCksZnVuY3Rpb24oKXtm
        dW5jdGlvbiBlKGUsdCxyLG4pe3ZhciBpLG8sYSxzLHU9W10sYz1uLmhhc2gs
        bD1jLmJvdW5kT3B0aW9ucztmb3IocyBpbiBsKWwuaGFzT3duUHJvcGVydHko
        cykmJihjW3NdPUVtYmVyLkhhbmRsZWJhcnMuZ2V0KGUsbFtzXSxuKSk7Zm9y
        KGk9MCxvPXIubGVuZ3RoO28+aTsrK2kpYT1yW2ldLHUucHVzaChFbWJlci5I
        YW5kbGViYXJzLmdldChhLnJvb3QsYS5wYXRoLG4pKTtyZXR1cm4gdS5wdXNo
        KG4pLHQuYXBwbHkoZSx1KX12YXIgdD1BcnJheS5wcm90b3R5cGUuc2xpY2Us
        cj1FbWJlci5IYW5kbGViYXJzLnRlbXBsYXRlLG49RW1iZXIuSGFuZGxlYmFy
        cy5ub3JtYWxpemVQYXRoPWZ1bmN0aW9uKGUsdCxyKXt2YXIgbixpLG89ciYm
        ci5rZXl3b3Jkc3x8e307cmV0dXJuIG49dC5zcGxpdCgiLiIsMSlbMF0sby5o
        YXNPd25Qcm9wZXJ0eShuKSYmKGU9b1tuXSxpPSEwLHQ9dD09PW4/IiI6dC5z
        dWJzdHIobi5sZW5ndGgrMSkpLHtyb290OmUscGF0aDp0LGlzS2V5d29yZDpp
        fX0saT1FbWJlci5IYW5kbGViYXJzLmdldD1mdW5jdGlvbihlLHQscil7dmFy
        IGksbz1yJiZyLmRhdGEsYT1uKGUsdCxvKTtyZXR1cm4gZT1hLnJvb3QsdD1h
        LnBhdGgsaT1FbWJlci5nZXQoZSx0KSx2b2lkIDA9PT1pJiZlIT09RW1iZXIu
        bG9va3VwJiZFbWJlci5pc0dsb2JhbFBhdGgodCkmJihpPUVtYmVyLmdldChF
        bWJlci5sb29rdXAsdCkpLGl9O0VtYmVyLkhhbmRsZWJhcnMucmVzb2x2ZVBh
        cmFtcz1mdW5jdGlvbihlLHQscil7Zm9yKHZhciBuLG8sYT1bXSxzPXIudHlw
        ZXMsdT0wLGM9dC5sZW5ndGg7Yz51O3UrKyluPXRbdV0sbz1zW3VdLCJJRCI9
        PT1vP2EucHVzaChpKGUsbixyKSk6YS5wdXNoKG4pO3JldHVybiBhfSxFbWJl
        ci5IYW5kbGViYXJzLnJlc29sdmVIYXNoPWZ1bmN0aW9uKGUsdCxyKXt2YXIg
        bixvPXt9LGE9ci5oYXNoVHlwZXM7Zm9yKHZhciBzIGluIHQpdC5oYXNPd25Q
        cm9wZXJ0eShzKSYmKG49YVtzXSxvW3NdPSJJRCI9PT1uP2koZSx0W3NdLHIp
        OnRbc10pO3JldHVybiBvfSxFbWJlci5IYW5kbGViYXJzLnJlZ2lzdGVySGVs
        cGVyKCJoZWxwZXJNaXNzaW5nIixmdW5jdGlvbihlKXt2YXIgcixuPSIiLGk9
        YXJndW1lbnRzW2FyZ3VtZW50cy5sZW5ndGgtMV0sbz1FbWJlci5IYW5kbGVi
        YXJzLnJlc29sdmVIZWxwZXIoaS5kYXRhLnZpZXcuY29udGFpbmVyLGUpO2lm
        KG8pcmV0dXJuIG8uYXBwbHkodGhpcyx0LmNhbGwoYXJndW1lbnRzLDEpKTt0
        aHJvdyByPSIlQCBIYW5kbGViYXJzIGVycm9yOiBDb3VsZCBub3QgZmluZCBw
        cm9wZXJ0eSAnJUAnIG9uIG9iamVjdCAlQC4iLGkuZGF0YSYmKG49aS5kYXRh
        LnZpZXcpLG5ldyBFbWJlci5FcnJvcihFbWJlci5TdHJpbmcuZm10KHIsW24s
        ZSx0aGlzXSkpfSksRW1iZXIuSGFuZGxlYmFycy5yZWdpc3RlckhlbHBlcigi
        YmxvY2tIZWxwZXJNaXNzaW5nIixmdW5jdGlvbihlKXt2YXIgcj1hcmd1bWVu
        dHNbYXJndW1lbnRzLmxlbmd0aC0xXSxuPUVtYmVyLkhhbmRsZWJhcnMucmVz
        b2x2ZUhlbHBlcihyLmRhdGEudmlldy5jb250YWluZXIsZSk7cmV0dXJuIG4/
        bi5hcHBseSh0aGlzLHQuY2FsbChhcmd1bWVudHMsMSkpOkhhbmRsZWJhcnMu
        aGVscGVycy5ibG9ja0hlbHBlck1pc3NpbmcuYXBwbHkodGhpcyxhcmd1bWVu
        dHMpfSksRW1iZXIuSGFuZGxlYmFycy5yZWdpc3RlckJvdW5kSGVscGVyPWZ1
        bmN0aW9uKGUpe3ZhciByPXQuY2FsbChhcmd1bWVudHMsMSksbj1FbWJlci5I
        YW5kbGViYXJzLm1ha2VCb3VuZEhlbHBlci5hcHBseSh0aGlzLHIpO0VtYmVy
        LkhhbmRsZWJhcnMucmVnaXN0ZXJIZWxwZXIoZSxuKX0sRW1iZXIuSGFuZGxl
        YmFycy5tYWtlQm91bmRIZWxwZXI9ZnVuY3Rpb24ocil7ZnVuY3Rpb24gaSgp
        e3ZhciBpLGEscyx1LGMsbD10LmNhbGwoYXJndW1lbnRzLDAsLTEpLGg9bC5s
        ZW5ndGgsbT1hcmd1bWVudHNbYXJndW1lbnRzLmxlbmd0aC0xXSxmPVtdLHA9
        bS50eXBlcyxkPW0uZGF0YSxiPW0uaGFzaCx2PWQudmlldyxFPW0uY29udGV4
        dHMsZz1FJiZFLmxlbmd0aD9FWzBdOnRoaXMseT0iIix3PUVtYmVyLl9TaW1w
        bGVIYW5kbGViYXJzVmlldy5wcm90b3R5cGUubm9ybWFsaXplZFZhbHVlLF89
        Yi5ib3VuZE9wdGlvbnM9e307Zm9yKHMgaW4gYilFbWJlci5JU19CSU5ESU5H
        LnRlc3QocykmJihfW3Muc2xpY2UoMCwtNyldPWJbc10pO3ZhciBDPVtdO2Zv
        cihkLnByb3BlcnRpZXM9W10saT0wO2g+aTsrK2kpaWYoZC5wcm9wZXJ0aWVz
        LnB1c2gobFtpXSksIklEIj09PXBbaV0pe3ZhciBPPW4oZyxsW2ldLGQpO2Yu
        cHVzaChPKSxDLnB1c2goTyl9ZWxzZSBmLnB1c2gobnVsbCk7aWYoZC5pc1Vu
        Ym91bmQpcmV0dXJuIGUodGhpcyxyLGYsbSk7dmFyIEE9bmV3IEVtYmVyLl9T
        aW1wbGVIYW5kbGViYXJzVmlldyhudWxsLG51bGwsIW0uaGFzaC51bmVzY2Fw
        ZWQsbS5kYXRhKTtBLm5vcm1hbGl6ZWRWYWx1ZT1mdW5jdGlvbigpe3ZhciBl
        LHQ9W107Zm9yKGUgaW4gXylfLmhhc093blByb3BlcnR5KGUpJiYoYz1uKGcs
        X1tlXSxkKSxBLnBhdGg9Yy5wYXRoLEEucGF0aFJvb3Q9Yy5yb290LGJbZV09
        dy5jYWxsKEEpKTtmb3IoaT0wO2g+aTsrK2kpYz1mW2ldLGM/KEEucGF0aD1j
        LnBhdGgsQS5wYXRoUm9vdD1jLnJvb3QsdC5wdXNoKHcuY2FsbChBKSkpOnQu
        cHVzaChsW2ldKTtyZXR1cm4gdC5wdXNoKG0pLHIuYXBwbHkoZyx0KX0sdi5h
        cHBlbmRDaGlsZChBKTtmb3IodSBpbiBfKV8uaGFzT3duUHJvcGVydHkodSkm
        JkMucHVzaChuKGcsX1t1XSxkKSk7Zm9yKGk9MCxhPUMubGVuZ3RoO2E+aTsr
        K2kpYz1DW2ldLHYucmVnaXN0ZXJPYnNlcnZlcihjLnJvb3QsYy5wYXRoLEEs
        QS5yZXJlbmRlcik7aWYoIklEIj09PXBbMF0mJjAhPT1mLmxlbmd0aCl7dmFy
        IFA9ZlswXSx4PVAucm9vdCxWPVAucGF0aDtFbWJlci5pc0VtcHR5KFYpfHwo
        eT1WKyIuIik7Zm9yKHZhciBUPTAsUz1vLmxlbmd0aDtTPlQ7VCsrKXYucmVn
        aXN0ZXJPYnNlcnZlcih4LHkrb1tUXSxBLEEucmVyZW5kZXIpfX12YXIgbz10
        LmNhbGwoYXJndW1lbnRzLDEpO3JldHVybiBpLl9yYXdGdW5jdGlvbj1yLGl9
        LEVtYmVyLkhhbmRsZWJhcnMudGVtcGxhdGU9ZnVuY3Rpb24oZSl7dmFyIHQ9
        cihlKTtyZXR1cm4gdC5pc1RvcD0hMCx0fX0oKSxmdW5jdGlvbigpe0VtYmVy
        LlN0cmluZy5odG1sU2FmZT1mdW5jdGlvbihlKXtyZXR1cm4gbmV3IEhhbmRs
        ZWJhcnMuU2FmZVN0cmluZyhlKX07dmFyIGU9RW1iZXIuU3RyaW5nLmh0bWxT
        YWZlOyhFbWJlci5FWFRFTkRfUFJPVE9UWVBFUz09PSEwfHxFbWJlci5FWFRF
        TkRfUFJPVE9UWVBFUy5TdHJpbmcpJiYoU3RyaW5nLnByb3RvdHlwZS5odG1s
        U2FmZT1mdW5jdGlvbigpe3JldHVybiBlKHRoaXMpfSl9KCksZnVuY3Rpb24o
        KXtFbWJlci5IYW5kbGViYXJzLnJlc29sdmVQYXRocz1mdW5jdGlvbihlKXtm
        b3IodmFyIHQ9W10scj1lLmNvbnRleHRzLG49ZS5yb290cyxpPWUuZGF0YSxv
        PTAsYT1yLmxlbmd0aDthPm87bysrKXQucHVzaChFbWJlci5IYW5kbGViYXJz
        LmdldChuW29dLHJbb10se2RhdGE6aX0pKTtyZXR1cm4gdH19KCksZnVuY3Rp
        b24oKXtmdW5jdGlvbiBlKCl7RW1iZXIucnVuLm9uY2UoRW1iZXIuVmlldywi
        bm90aWZ5TXV0YXRpb25MaXN0ZW5lcnMiKX1FbWJlci5zZXQsRW1iZXIuZ2V0
        O3ZhciByPXQoIm1ldGFtb3JwaCIpLG49e3JlbW92ZTpmdW5jdGlvbih0KXt0
        Lm1vcnBoLnJlbW92ZSgpLGUoKX0scHJlcGVuZDpmdW5jdGlvbih0LHIpe3Qu
        bW9ycGgucHJlcGVuZChyKSxlKCl9LGFmdGVyOmZ1bmN0aW9uKHQscil7dC5t
        b3JwaC5hZnRlcihyKSxlKCl9LGh0bWw6ZnVuY3Rpb24odCxyKXt0Lm1vcnBo
        Lmh0bWwociksZSgpfSxyZXBsYWNlOmZ1bmN0aW9uKHQpe3ZhciByPXQubW9y
        cGg7dC50cmFuc2l0aW9uVG8oInByZVJlbmRlciIpLEVtYmVyLnJ1bi5zY2hl
        ZHVsZSgicmVuZGVyIix0aGlzLGZ1bmN0aW9uKCl7aWYoIXQuaXNEZXN0cm95
        aW5nKXt0LmNsZWFyUmVuZGVyZWRDaGlsZHJlbigpO3ZhciBuPXQucmVuZGVy
        VG9CdWZmZXIoKTt0Lmludm9rZVJlY3Vyc2l2ZWx5KGZ1bmN0aW9uKGUpe2Uu
        cHJvcGVydHlXaWxsQ2hhbmdlKCJlbGVtZW50Iil9KSx0LnRyaWdnZXJSZWN1
        cnNpdmVseSgid2lsbEluc2VydEVsZW1lbnQiKSxyLnJlcGxhY2VXaXRoKG4u
        c3RyaW5nKCkpLHQudHJhbnNpdGlvblRvKCJpbkRPTSIpLHQuaW52b2tlUmVj
        dXJzaXZlbHkoZnVuY3Rpb24oZSl7ZS5wcm9wZXJ0eURpZENoYW5nZSgiZWxl
        bWVudCIpfSksdC50cmlnZ2VyUmVjdXJzaXZlbHkoImRpZEluc2VydEVsZW1l
        bnQiKSxlKCl9fSl9LGVtcHR5OmZ1bmN0aW9uKHQpe3QubW9ycGguaHRtbCgi
        IiksZSgpfX07RW1iZXIuX01ldGFtb3JwaD1FbWJlci5NaXhpbi5jcmVhdGUo
        e2lzVmlydHVhbDohMCx0YWdOYW1lOiIiLGluc3RydW1lbnROYW1lOiJtZXRh
        bW9ycGgiLGluaXQ6ZnVuY3Rpb24oKXt0aGlzLl9zdXBlcigpLHRoaXMubW9y
        cGg9cigpfSxiZWZvcmVSZW5kZXI6ZnVuY3Rpb24oZSl7ZS5wdXNoKHRoaXMu
        bW9ycGguc3RhcnRUYWcoKSksZS5wdXNoT3BlbmluZ1RhZygpfSxhZnRlclJl
        bmRlcjpmdW5jdGlvbihlKXtlLnB1c2hDbG9zaW5nVGFnKCksZS5wdXNoKHRo
        aXMubW9ycGguZW5kVGFnKCkpfSxjcmVhdGVFbGVtZW50OmZ1bmN0aW9uKCl7
        dmFyIGU9dGhpcy5yZW5kZXJUb0J1ZmZlcigpO3RoaXMub3V0ZXJIVE1MPWUu
        c3RyaW5nKCksdGhpcy5jbGVhckJ1ZmZlcigpfSxkb21NYW5hZ2VyOm59KSxF
        bWJlci5fTWV0YW1vcnBoVmlldz1FbWJlci5WaWV3LmV4dGVuZChFbWJlci5f
        TWV0YW1vcnBoKSxFbWJlci5fU2ltcGxlTWV0YW1vcnBoVmlldz1FbWJlci5D
        b3JlVmlldy5leHRlbmQoRW1iZXIuX01ldGFtb3JwaCl9KCksZnVuY3Rpb24o
        KXtmdW5jdGlvbiBlKGUsdCxyLG4pe3RoaXMucGF0aD1lLHRoaXMucGF0aFJv
        b3Q9dCx0aGlzLmlzRXNjYXBlZD1yLHRoaXMudGVtcGxhdGVEYXRhPW4sdGhp
        cy5tb3JwaD1vKCksdGhpcy5zdGF0ZT0icHJlUmVuZGVyIix0aGlzLnVwZGF0
        ZUlkPW51bGwsdGhpcy5fcGFyZW50Vmlldz1udWxsLHRoaXMuYnVmZmVyPW51
        bGx9dmFyIHI9RW1iZXIuZ2V0LG49RW1iZXIuc2V0LGk9RW1iZXIuSGFuZGxl
        YmFycy5nZXQsbz10KCJtZXRhbW9ycGgiKTtFbWJlci5fU2ltcGxlSGFuZGxl
        YmFyc1ZpZXc9ZSxlLnByb3RvdHlwZT17aXNWaXJ0dWFsOiEwLGlzVmlldzoh
        MCxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy51cGRhdGVJZCYmKEVtYmVyLnJ1
        bi5jYW5jZWwodGhpcy51cGRhdGVJZCksdGhpcy51cGRhdGVJZD1udWxsKSx0
        aGlzLl9wYXJlbnRWaWV3JiZ0aGlzLl9wYXJlbnRWaWV3LnJlbW92ZUNoaWxk
        KHRoaXMpLHRoaXMubW9ycGg9bnVsbCx0aGlzLnN0YXRlPSJkZXN0cm95ZWQi
        fSxwcm9wZXJ0eVdpbGxDaGFuZ2U6RW1iZXIuSyxwcm9wZXJ0eURpZENoYW5n
        ZTpFbWJlci5LLG5vcm1hbGl6ZWRWYWx1ZTpmdW5jdGlvbigpe3ZhciBlLHQs
        cj10aGlzLnBhdGgsbj10aGlzLnBhdGhSb290O3JldHVybiIiPT09cj9lPW46
        KHQ9dGhpcy50ZW1wbGF0ZURhdGEsZT1pKG4scix7ZGF0YTp0fSkpLGV9LHJl
        bmRlclRvQnVmZmVyOmZ1bmN0aW9uKGUpe3ZhciB0PSIiO3QrPXRoaXMubW9y
        cGguc3RhcnRUYWcoKSx0Kz10aGlzLnJlbmRlcigpLHQrPXRoaXMubW9ycGgu
        ZW5kVGFnKCksZS5wdXNoKHQpfSxyZW5kZXI6ZnVuY3Rpb24oKXt2YXIgZT10
        aGlzLmlzRXNjYXBlZCx0PXRoaXMubm9ybWFsaXplZFZhbHVlKCk7cmV0dXJu
        IG51bGw9PT10fHx2b2lkIDA9PT10P3Q9IiI6dCBpbnN0YW5jZW9mIEhhbmRs
        ZWJhcnMuU2FmZVN0cmluZ3x8KHQ9U3RyaW5nKHQpKSxlJiYodD1IYW5kbGVi
        YXJzLlV0aWxzLmVzY2FwZUV4cHJlc3Npb24odCkpLHR9LHJlcmVuZGVyOmZ1
        bmN0aW9uKCl7c3dpdGNoKHRoaXMuc3RhdGUpe2Nhc2UicHJlUmVuZGVyIjpj
        YXNlImRlc3Ryb3llZCI6YnJlYWs7Y2FzZSJpbkJ1ZmZlciI6dGhyb3cgbmV3
        IEVtYmVyLkVycm9yKCJTb21ldGhpbmcgeW91IGRpZCB0cmllZCB0byByZXBs
        YWNlIGFuIHt7ZXhwcmVzc2lvbn19IGJlZm9yZSBpdCB3YXMgaW5zZXJ0ZWQg
        aW50byB0aGUgRE9NLiIpO2Nhc2UiaGFzRWxlbWVudCI6Y2FzZSJpbkRPTSI6
        dGhpcy51cGRhdGVJZD1FbWJlci5ydW4uc2NoZWR1bGVPbmNlKCJyZW5kZXIi
        LHRoaXMsInVwZGF0ZSIpfXJldHVybiB0aGlzfSx1cGRhdGU6ZnVuY3Rpb24o
        KXt0aGlzLnVwZGF0ZUlkPW51bGwsdGhpcy5tb3JwaC5odG1sKHRoaXMucmVu
        ZGVyKCkpfSx0cmFuc2l0aW9uVG86ZnVuY3Rpb24oZSl7dGhpcy5zdGF0ZT1l
        fX07dmFyIGE9RW1iZXIuVmlldy5jbG9uZVN0YXRlcyhFbWJlci5WaWV3LnN0
        YXRlcykscz1FbWJlci5tZXJnZTtzKGEuX2RlZmF1bHQse3JlcmVuZGVySWZO
        ZWVkZWQ6RW1iZXIuS30pLHMoYS5pbkRPTSx7cmVyZW5kZXJJZk5lZWRlZDpm
        dW5jdGlvbihlKXtlLm5vcm1hbGl6ZWRWYWx1ZSgpIT09ZS5fbGFzdE5vcm1h
        bGl6ZWRWYWx1ZSYmZS5yZXJlbmRlcigpfX0pLEVtYmVyLl9IYW5kbGViYXJz
        Qm91bmRWaWV3PUVtYmVyLl9NZXRhbW9ycGhWaWV3LmV4dGVuZCh7aW5zdHJ1
        bWVudE5hbWU6ImJvdW5kSGFuZGxlYmFycyIsc3RhdGVzOmEsc2hvdWxkRGlz
        cGxheUZ1bmM6bnVsbCxwcmVzZXJ2ZUNvbnRleHQ6ITEscHJldmlvdXNDb250
        ZXh0Om51bGwsZGlzcGxheVRlbXBsYXRlOm51bGwsaW52ZXJzZVRlbXBsYXRl
        Om51bGwscGF0aDpudWxsLHBhdGhSb290Om51bGwsbm9ybWFsaXplZFZhbHVl
        OmZ1bmN0aW9uKCl7dmFyIGUsdCxuPXIodGhpcywicGF0aCIpLG89cih0aGlz
        LCJwYXRoUm9vdCIpLGE9cih0aGlzLCJ2YWx1ZU5vcm1hbGl6ZXJGdW5jIik7
        cmV0dXJuIiI9PT1uP2U9bzoodD1yKHRoaXMsInRlbXBsYXRlRGF0YSIpLGU9
        aShvLG4se2RhdGE6dH0pKSxhP2EoZSk6ZX0scmVyZW5kZXJJZk5lZWRlZDpm
        dW5jdGlvbigpe3RoaXMuY3VycmVudFN0YXRlLnJlcmVuZGVySWZOZWVkZWQo
        dGhpcyl9LHJlbmRlcjpmdW5jdGlvbihlKXt2YXIgdD1yKHRoaXMsImlzRXNj
        YXBlZCIpLGk9cih0aGlzLCJzaG91bGREaXNwbGF5RnVuYyIpLG89cih0aGlz
        LCJwcmVzZXJ2ZUNvbnRleHQiKSxhPXIodGhpcywicHJldmlvdXNDb250ZXh0
        Iikscz1yKHRoaXMsImludmVyc2VUZW1wbGF0ZSIpLHU9cih0aGlzLCJkaXNw
        bGF5VGVtcGxhdGUiKSxjPXRoaXMubm9ybWFsaXplZFZhbHVlKCk7aWYodGhp
        cy5fbGFzdE5vcm1hbGl6ZWRWYWx1ZT1jLGkoYykpaWYobih0aGlzLCJ0ZW1w
        bGF0ZSIsdSksbyluKHRoaXMsIl9jb250ZXh0IixhKTtlbHNle2lmKCF1KXJl
        dHVybiBudWxsPT09Y3x8dm9pZCAwPT09Yz9jPSIiOmMgaW5zdGFuY2VvZiBI
        YW5kbGViYXJzLlNhZmVTdHJpbmd8fChjPVN0cmluZyhjKSksdCYmKGM9SGFu
        ZGxlYmFycy5VdGlscy5lc2NhcGVFeHByZXNzaW9uKGMpKSxlLnB1c2goYyks
        dm9pZCAwO24odGhpcywiX2NvbnRleHQiLGMpfWVsc2Ugcz8obih0aGlzLCJ0
        ZW1wbGF0ZSIscyksbz9uKHRoaXMsIl9jb250ZXh0IixhKTpuKHRoaXMsIl9j
        b250ZXh0IixjKSk6bih0aGlzLCJ0ZW1wbGF0ZSIsZnVuY3Rpb24oKXtyZXR1
        cm4iIn0pO3JldHVybiB0aGlzLl9zdXBlcihlKX19KX0oKSxmdW5jdGlvbigp
        e2Z1bmN0aW9uIGUoZSl7cmV0dXJuIUVtYmVyLmlzTm9uZShlKX1mdW5jdGlv
        biB0KGUsdCxyLG4sYSxzKXt2YXIgdSxjLGwsaD10LmRhdGEsbT10LmZuLGY9
        dC5pbnZlcnNlLHA9aC52aWV3LGQ9dGhpcztpZih1PW8oZCxlLGgpLCJvYmpl
        Y3QiPT10eXBlb2YgdGhpcyl7aWYoaC5pbnNpZGVHcm91cCl7Yz1mdW5jdGlv
        bigpe0VtYmVyLnJ1bi5vbmNlKHAsInJlcmVuZGVyIil9O3ZhciBiLHYsRT1p
        KGQsZSx0KTtFPWE/YShFKTpFLHY9cj9kOkUsbihFKT9iPW06ZiYmKGI9Ziks
        Yih2LHtkYXRhOnQuZGF0YX0pfWVsc2V7dmFyIGc9cC5jcmVhdGVDaGlsZFZp
        ZXcoRW1iZXIuX0hhbmRsZWJhcnNCb3VuZFZpZXcse3ByZXNlcnZlQ29udGV4
        dDpyLHNob3VsZERpc3BsYXlGdW5jOm4sdmFsdWVOb3JtYWxpemVyRnVuYzph
        LGRpc3BsYXlUZW1wbGF0ZTptLGludmVyc2VUZW1wbGF0ZTpmLHBhdGg6ZSxw
        YXRoUm9vdDpkLHByZXZpb3VzQ29udGV4dDpkLGlzRXNjYXBlZDohdC5oYXNo
        LnVuZXNjYXBlZCx0ZW1wbGF0ZURhdGE6dC5kYXRhfSk7cC5hcHBlbmRDaGls
        ZChnKSxjPWZ1bmN0aW9uKCl7RW1iZXIucnVuLnNjaGVkdWxlT25jZSgicmVu
        ZGVyIixnLCJyZXJlbmRlcklmTmVlZGVkIil9fWlmKCIiIT09dS5wYXRoJiYo
        cC5yZWdpc3Rlck9ic2VydmVyKHUucm9vdCx1LnBhdGgsYykscykpZm9yKGw9
        MDtsPHMubGVuZ3RoO2wrKylwLnJlZ2lzdGVyT2JzZXJ2ZXIodS5yb290LHUu
        cGF0aCsiLiIrc1tsXSxjKX1lbHNlIGguYnVmZmVyLnB1c2goaShkLGUsdCkp
        fWZ1bmN0aW9uIHIoZSx0LHIpe3ZhciBuLGEscyx1LGM9ci5kYXRhLGw9Yy52
        aWV3O2lmKG49byhlLHQsYykscz1uLnJvb3QscyYmIm9iamVjdCI9PXR5cGVv
        ZiBzKXtpZihjLmluc2lkZUdyb3VwKXthPWZ1bmN0aW9uKCl7RW1iZXIucnVu
        Lm9uY2UobCwicmVyZW5kZXIiKX07dmFyIGg9aShlLHQscik7KG51bGw9PT1o
        fHx2b2lkIDA9PT1oKSYmKGg9IiIpLGMuYnVmZmVyLnB1c2goaCl9ZWxzZXt2
        YXIgbT1uZXcgRW1iZXIuX1NpbXBsZUhhbmRsZWJhcnNWaWV3KHQsZSwhci5o
        YXNoLnVuZXNjYXBlZCxyLmRhdGEpO20uX3BhcmVudFZpZXc9bCxsLmFwcGVu
        ZENoaWxkKG0pLGE9ZnVuY3Rpb24oKXtFbWJlci5ydW4uc2NoZWR1bGVPbmNl
        KCJyZW5kZXIiLG0sInJlcmVuZGVyIil9fSIiIT09bi5wYXRoJiZsLnJlZ2lz
        dGVyT2JzZXJ2ZXIobi5yb290LG4ucGF0aCxhKX1lbHNlIHU9aShlLHQsciks
        Yy5idWZmZXIucHVzaChudWxsPT09dXx8InVuZGVmaW5lZCI9PXR5cGVvZiB1
        PyIiOnUpfXZhciBuPUVtYmVyLmdldDtFbWJlci5zZXQsRW1iZXIuU3RyaW5n
        LmZtdDt2YXIgaT1FbWJlci5IYW5kbGViYXJzLmdldCxvPUVtYmVyLkhhbmRs
        ZWJhcnMubm9ybWFsaXplUGF0aCxhPUVtYmVyLkFycmF5UG9seWZpbGxzLmZv
        ckVhY2gscz1FbWJlci5IYW5kbGViYXJzLHU9cy5oZWxwZXJzO3MucmVnaXN0
        ZXJIZWxwZXIoIl90cmlhZ2VNdXN0YWNoZSIsZnVuY3Rpb24oZSx0KXtpZih1
        W2VdKXJldHVybiB1W2VdLmNhbGwodGhpcyx0KTt2YXIgcj1FbWJlci5IYW5k
        bGViYXJzLnJlc29sdmVIZWxwZXIodC5kYXRhLnZpZXcuY29udGFpbmVyLGUp
        O3JldHVybiByP3IuY2FsbCh0aGlzLHQpOnUuYmluZC5jYWxsKHRoaXMsZSx0
        KX0pLEVtYmVyLkhhbmRsZWJhcnMucmVzb2x2ZUhlbHBlcj1mdW5jdGlvbihl
        LHQpe2lmKGUmJi0xIT09dC5pbmRleE9mKCItIikpe3ZhciByPWUubG9va3Vw
        KCJoZWxwZXI6Iit0KTtpZighcil7dmFyIG49ZS5sb29rdXAoImNvbXBvbmVu
        dC1sb29rdXA6bWFpbiIpLGk9bi5sb29rdXBGYWN0b3J5KHQsZSk7aSYmKHI9
        cy5tYWtlVmlld0hlbHBlcihpKSxlLnJlZ2lzdGVyKCJoZWxwZXI6Iit0LHIp
        KX1yZXR1cm4gcn19LHMucmVnaXN0ZXJIZWxwZXIoImJpbmQiLGZ1bmN0aW9u
        KG4saSl7dmFyIG89aS5jb250ZXh0cyYmaS5jb250ZXh0cy5sZW5ndGg/aS5j
        b250ZXh0c1swXTp0aGlzO3JldHVybiBpLmZuP3QuY2FsbChvLG4saSwhMSxl
        KTpyKG8sbixpKX0pLHMucmVnaXN0ZXJIZWxwZXIoImJvdW5kSWYiLGZ1bmN0
        aW9uKGUscil7dmFyIGk9ci5jb250ZXh0cyYmci5jb250ZXh0cy5sZW5ndGg/
        ci5jb250ZXh0c1swXTp0aGlzLG89ZnVuY3Rpb24oZSl7dmFyIHQ9ZSYmbihl
        LCJpc1RydXRoeSIpO3JldHVybiJib29sZWFuIj09dHlwZW9mIHQ/dDpFbWJl
        ci5pc0FycmF5KGUpPzAhPT1uKGUsImxlbmd0aCIpOiEhZX07cmV0dXJuIHQu
        Y2FsbChpLGUsciwhMCxvLG8sWyJpc1RydXRoeSIsImxlbmd0aCJdKX0pLHMu
        cmVnaXN0ZXJIZWxwZXIoIndpdGgiLGZ1bmN0aW9uKHIsbil7aWYoND09PWFy
        Z3VtZW50cy5sZW5ndGgpe3ZhciBpLGEscyxjO2lmKG49YXJndW1lbnRzWzNd
        LGk9YXJndW1lbnRzWzJdLGE9YXJndW1lbnRzWzBdLEVtYmVyLmlzR2xvYmFs
        UGF0aChhKSlFbWJlci5iaW5kKG4uZGF0YS5rZXl3b3JkcyxpLGEpO2Vsc2V7
        Yz1vKHRoaXMsYSxuLmRhdGEpLGE9Yy5wYXRoLHM9Yy5yb290O3ZhciBsPUVt
        YmVyLiQuZXhwYW5kbytFbWJlci5ndWlkRm9yKHMpO24uZGF0YS5rZXl3b3Jk
        c1tsXT1zO3ZhciBoPWE/bCsiLiIrYTpsO0VtYmVyLmJpbmQobi5kYXRhLmtl
        eXdvcmRzLGksaCl9cmV0dXJuIHQuY2FsbCh0aGlzLGEsbiwhMCxlKX1yZXR1
        cm4gdS5iaW5kLmNhbGwobi5jb250ZXh0c1swXSxyLG4pfSkscy5yZWdpc3Rl
        ckhlbHBlcigiaWYiLGZ1bmN0aW9uKGUsdCl7cmV0dXJuIHUuYm91bmRJZi5j
        YWxsKHQuY29udGV4dHNbMF0sZSx0KX0pLHMucmVnaXN0ZXJIZWxwZXIoInVu
        bGVzcyIsZnVuY3Rpb24oZSx0KXt2YXIgcj10LmZuLG49dC5pbnZlcnNlO3Jl
        dHVybiB0LmZuPW4sdC5pbnZlcnNlPXIsdS5ib3VuZElmLmNhbGwodC5jb250
        ZXh0c1swXSxlLHQpfSkscy5yZWdpc3RlckhlbHBlcigiYmluZC1hdHRyIixm
        dW5jdGlvbihlKXt2YXIgdD1lLmhhc2gscj1lLmRhdGEudmlldyxuPVtdLHU9
        dGhpcyxjPSsrRW1iZXIudXVpZCxsPXRbImNsYXNzIl07aWYobnVsbCE9bCl7
        dmFyIGg9cy5iaW5kQ2xhc3Nlcyh0aGlzLGwscixjLGUpO24ucHVzaCgnY2xh
        c3M9IicrSGFuZGxlYmFycy5VdGlscy5lc2NhcGVFeHByZXNzaW9uKGguam9p
        bigiICIpKSsnIicpLGRlbGV0ZSB0WyJjbGFzcyJdfXZhciBtPUVtYmVyLmtl
        eXModCk7cmV0dXJuIGEuY2FsbChtLGZ1bmN0aW9uKGEpe3ZhciBzLGw9dFth
        XTtzPW8odSxsLGUuZGF0YSk7dmFyIGgsbSxmPSJ0aGlzIj09PWw/cy5yb290
        OmkodSxsLGUpLHA9RW1iZXIudHlwZU9mKGYpO2g9ZnVuY3Rpb24oKXt2YXIg
        dD1pKHUsbCxlKSxuPXIuJCgiW2RhdGEtYmluZGF0dHItIitjKyI9JyIrYysi
        J10iKTtyZXR1cm4gbiYmMCE9PW4ubGVuZ3RoPyhFbWJlci5WaWV3LmFwcGx5
        QXR0cmlidXRlQmluZGluZ3MobixhLHQpLHZvaWQgMCk6KEVtYmVyLnJlbW92
        ZU9ic2VydmVyKHMucm9vdCxzLnBhdGgsbSksdm9pZCAwKX0sInRoaXMiPT09
        bHx8cy5pc0tleXdvcmQmJiIiPT09cy5wYXRofHxyLnJlZ2lzdGVyT2JzZXJ2
        ZXIocy5yb290LHMucGF0aCxoKSwic3RyaW5nIj09PXB8fCJudW1iZXIiPT09
        cCYmIWlzTmFOKGYpP24ucHVzaChhKyc9IicrSGFuZGxlYmFycy5VdGlscy5l
        c2NhcGVFeHByZXNzaW9uKGYpKyciJyk6ZiYmImJvb2xlYW4iPT09cCYmbi5w
        dXNoKGErJz0iJythKyciJyl9LHRoaXMpLG4ucHVzaCgiZGF0YS1iaW5kYXR0
        ci0iK2MrJz0iJytjKyciJyksbmV3IHMuU2FmZVN0cmluZyhuLmpvaW4oIiAi
        KSl9KSxzLnJlZ2lzdGVySGVscGVyKCJiaW5kQXR0ciIscy5oZWxwZXJzWyJi
        aW5kLWF0dHIiXSkscy5iaW5kQ2xhc3Nlcz1mdW5jdGlvbihlLHQscixuLHMp
        e3ZhciB1LGMsbCxoPVtdLG09ZnVuY3Rpb24oZSx0LHIpe3ZhciBuLG89dC5w
        YXRoO3JldHVybiBuPSJ0aGlzIj09PW8/ZToiIj09PW8/ITA6aShlLG8sciks
        RW1iZXIuVmlldy5fY2xhc3NTdHJpbmdGb3JWYWx1ZShvLG4sdC5jbGFzc05h
        bWUsdC5mYWxzeUNsYXNzTmFtZSl9O3JldHVybiBhLmNhbGwodC5zcGxpdCgi
        ICIpLGZ1bmN0aW9uKHQpe3ZhciBpLGEsZixwLGQ9RW1iZXIuVmlldy5fcGFy
        c2VQcm9wZXJ0eVBhdGgodCksYj1kLnBhdGgsdj1lOyIiIT09YiYmInRoaXMi
        IT09YiYmKHA9byhlLGIscy5kYXRhKSx2PXAucm9vdCxiPXAucGF0aCksYT1m
        dW5jdGlvbigpe3U9bShlLGQscyksbD1uP3IuJCgiW2RhdGEtYmluZGF0dHIt
        IituKyI9JyIrbisiJ10iKTpyLiQoKSxsJiYwIT09bC5sZW5ndGg/KGkmJmwu
        cmVtb3ZlQ2xhc3MoaSksdT8obC5hZGRDbGFzcyh1KSxpPXUpOmk9bnVsbCk6
        RW1iZXIucmVtb3ZlT2JzZXJ2ZXIodixiLGYpfSwiIiE9PWImJiJ0aGlzIiE9
        PWImJnIucmVnaXN0ZXJPYnNlcnZlcih2LGIsYSksYz1tKGUsZCxzKSxjJiYo
        aC5wdXNoKGMpLGk9Yyl9KSxofX0oKSxmdW5jdGlvbigpe2Z1bmN0aW9uIGUo
        ZSxyKXt2YXIgbj1yLmhhc2gsaT1yLmhhc2hUeXBlcztmb3IodmFyIG8gaW4g
        bilpZigiSUQiPT09aVtvXSl7dmFyIGE9bltvXTtFbWJlci5JU19CSU5ESU5H
        LnRlc3Qobyl8fChuW28rIkJpbmRpbmciXT1hLGlbbysiQmluZGluZyJdPSJT
        VFJJTkciLGRlbGV0ZSBuW29dLGRlbGV0ZSBpW29dKX1uLmhhc093blByb3Bl
        cnR5KCJpZEJpbmRpbmciKSYmKG4uaWQ9dC5nZXQoZSxuLmlkQmluZGluZyxy
        KSxpLmlkPSJTVFJJTkciLGRlbGV0ZSBuLmlkQmluZGluZyxkZWxldGUgaS5p
        ZEJpbmRpbmcpfUVtYmVyLmdldCxFbWJlci5zZXQ7dmFyIHQ9RW1iZXIuSGFu
        ZGxlYmFycyxyPS9eW2Etel0vLG49L152aWV3XC4vO3QuVmlld0hlbHBlcj1F
        bWJlci5PYmplY3QuY3JlYXRlKHtwcm9wZXJ0aWVzRnJvbUhUTUxPcHRpb25z
        OmZ1bmN0aW9uKGUpe3ZhciB0PWUuaGFzaCxyPWUuZGF0YSxuPXt9LGk9dFsi
        Y2xhc3MiXSxvPSExO3QuaWQmJihuLmVsZW1lbnRJZD10LmlkLG89ITApLHQu
        dGFnJiYobi50YWdOYW1lPXQudGFnLG89ITApLGkmJihpPWkuc3BsaXQoIiAi
        KSxuLmNsYXNzTmFtZXM9aSxvPSEwKSx0LmNsYXNzQmluZGluZyYmKG4uY2xh
        c3NOYW1lQmluZGluZ3M9dC5jbGFzc0JpbmRpbmcuc3BsaXQoIiAiKSxvPSEw
        KSx0LmNsYXNzTmFtZUJpbmRpbmdzJiYodm9pZCAwPT09bi5jbGFzc05hbWVC
        aW5kaW5ncyYmKG4uY2xhc3NOYW1lQmluZGluZ3M9W10pLG4uY2xhc3NOYW1l
        QmluZGluZ3M9bi5jbGFzc05hbWVCaW5kaW5ncy5jb25jYXQodC5jbGFzc05h
        bWVCaW5kaW5ncy5zcGxpdCgiICIpKSxvPSEwKSx0LmF0dHJpYnV0ZUJpbmRp
        bmdzJiYobi5hdHRyaWJ1dGVCaW5kaW5ncz1udWxsLG89ITApLG8mJih0PUVt
        YmVyLiQuZXh0ZW5kKHt9LHQpLGRlbGV0ZSB0LmlkLGRlbGV0ZSB0LnRhZyxk
        ZWxldGUgdFsiY2xhc3MiXSxkZWxldGUgdC5jbGFzc0JpbmRpbmcpO3ZhciBh
        O2Zvcih2YXIgcyBpbiB0KXQuaGFzT3duUHJvcGVydHkocykmJkVtYmVyLklT
        X0JJTkRJTkcudGVzdChzKSYmInN0cmluZyI9PXR5cGVvZiB0W3NdJiYoYT10
        aGlzLmNvbnRleHR1YWxpemVCaW5kaW5nUGF0aCh0W3NdLHIpLGEmJih0W3Nd
        PWEpKTtpZihuLmNsYXNzTmFtZUJpbmRpbmdzKWZvcih2YXIgdSBpbiBuLmNs
        YXNzTmFtZUJpbmRpbmdzKXt2YXIgYz1uLmNsYXNzTmFtZUJpbmRpbmdzW3Vd
        O2lmKCJzdHJpbmciPT10eXBlb2YgYyl7dmFyIGw9RW1iZXIuVmlldy5fcGFy
        c2VQcm9wZXJ0eVBhdGgoYyk7YT10aGlzLmNvbnRleHR1YWxpemVCaW5kaW5n
        UGF0aChsLnBhdGgsciksYSYmKG4uY2xhc3NOYW1lQmluZGluZ3NbdV09YSts
        LmNsYXNzTmFtZXMpfX1yZXR1cm4gRW1iZXIuJC5leHRlbmQodCxuKX0sY29u
        dGV4dHVhbGl6ZUJpbmRpbmdQYXRoOmZ1bmN0aW9uKGUsdCl7dmFyIHI9RW1i
        ZXIuSGFuZGxlYmFycy5ub3JtYWxpemVQYXRoKG51bGwsZSx0KTtyZXR1cm4g
        ci5pc0tleXdvcmQ/InRlbXBsYXRlRGF0YS5rZXl3b3Jkcy4iK2U6RW1iZXIu
        aXNHbG9iYWxQYXRoKGUpP251bGw6InRoaXMiPT09ZT8iX3BhcmVudFZpZXcu
        Y29udGV4dCI6Il9wYXJlbnRWaWV3LmNvbnRleHQuIitlfSxoZWxwZXI6ZnVu
        Y3Rpb24oaSxvLGEpe3ZhciBzLHU9YS5kYXRhLGM9YS5mbjtlKGksYSkscz0i
        c3RyaW5nIj09dHlwZW9mIG8/IlNUUklORyI9PT1hLnR5cGVzWzBdJiZyLnRl
        c3QobykmJiFuLnRlc3Qobyk/dS52aWV3LmNvbnRhaW5lci5sb29rdXBGYWN0
        b3J5KCJ2aWV3OiIrbyk6dC5nZXQoaSxvLGEpOm87dmFyIGw9dGhpcy5wcm9w
        ZXJ0aWVzRnJvbUhUTUxPcHRpb25zKGEsaSksaD11LnZpZXc7bC50ZW1wbGF0
        ZURhdGE9dTt2YXIgbT1zLnByb3RvP3MucHJvdG8oKTpzO2MmJihsLnRlbXBs
        YXRlPWMpLG0uY29udHJvbGxlcnx8bS5jb250cm9sbGVyQmluZGluZ3x8bC5j
        b250cm9sbGVyfHxsLmNvbnRyb2xsZXJCaW5kaW5nfHwobC5fY29udGV4dD1p
        KSxoLmFwcGVuZENoaWxkKHMsbCl9fSksdC5yZWdpc3RlckhlbHBlcigidmll
        dyIsZnVuY3Rpb24oZSxyKXtyZXR1cm4gZSYmZS5kYXRhJiZlLmRhdGEuaXNS
        ZW5kZXJEYXRhJiYocj1lLGU9IkVtYmVyLlZpZXciKSx0LlZpZXdIZWxwZXIu
        aGVscGVyKHRoaXMsZSxyKX0pfSgpLGZ1bmN0aW9uKCl7dmFyIGU9RW1iZXIu
        Z2V0LHQ9RW1iZXIuSGFuZGxlYmFycy5nZXQ7RW1iZXIuU3RyaW5nLmZtdCxF
        bWJlci5IYW5kbGViYXJzLnJlZ2lzdGVySGVscGVyKCJjb2xsZWN0aW9uIixm
        dW5jdGlvbihyLG4pe3ImJnIuZGF0YSYmci5kYXRhLmlzUmVuZGVyRGF0YSYm
        KG49cixyPXZvaWQgMCk7dmFyIGk9bi5mbixvPW4uZGF0YSxhPW4uaW52ZXJz
        ZTtuLmRhdGEudmlldzt2YXIgcztzPXI/dCh0aGlzLHIsbik6RW1iZXIuQ29s
        bGVjdGlvblZpZXc7dmFyIHUsYyxsPW4uaGFzaCxoPXt9LG09cy5wcm90bygp
        O2lmKGwuaXRlbVZpZXcpe3ZhciBmPW8ua2V5d29yZHMuY29udHJvbGxlcixw
        PWYuY29udGFpbmVyO2M9cC5yZXNvbHZlKCJ2aWV3OiIrbC5pdGVtVmlldyl9
        ZWxzZSBjPWwuaXRlbVZpZXdDbGFzcz90KG0sbC5pdGVtVmlld0NsYXNzLG4p
        Om0uaXRlbVZpZXdDbGFzcztkZWxldGUgbC5pdGVtVmlld0NsYXNzLGRlbGV0
        ZSBsLml0ZW1WaWV3O2Zvcih2YXIgZCBpbiBsKWwuaGFzT3duUHJvcGVydHko
        ZCkmJih1PWQubWF0Y2goL15pdGVtKC4pKC4qKSQvKSx1JiYiaXRlbUNvbnRy
        b2xsZXIiIT09ZCYmKGhbdVsxXS50b0xvd2VyQ2FzZSgpK3VbMl1dPWxbZF0s
        ZGVsZXRlIGxbZF0pKTtpJiYoaC50ZW1wbGF0ZT1pLGRlbGV0ZSBuLmZuKTt2
        YXIgYjthJiZhIT09SGFuZGxlYmFycy5WTS5ub29wPyhiPWUobSwiZW1wdHlW
        aWV3Q2xhc3MiKSxiPWIuZXh0ZW5kKHt0ZW1wbGF0ZTphLHRhZ05hbWU6aC50
        YWdOYW1lfSkpOmwuZW1wdHlWaWV3Q2xhc3MmJihiPXQodGhpcyxsLmVtcHR5
        Vmlld0NsYXNzLG4pKSxiJiYobC5lbXB0eVZpZXc9YiksbC5rZXl3b3JkfHwo
        aC5fY29udGV4dD1FbWJlci5jb21wdXRlZC5hbGlhcygiY29udGVudCIpKTt2
        YXIgdj1FbWJlci5IYW5kbGViYXJzLlZpZXdIZWxwZXIucHJvcGVydGllc0Zy
        b21IVE1MT3B0aW9ucyh7ZGF0YTpvLGhhc2g6aH0sdGhpcyk7cmV0dXJuIGwu
        aXRlbVZpZXdDbGFzcz1jLmV4dGVuZCh2KSxFbWJlci5IYW5kbGViYXJzLmhl
        bHBlcnMudmlldy5jYWxsKHRoaXMscyxuKX0pfSgpLGZ1bmN0aW9uKCl7dmFy
        IGU9RW1iZXIuSGFuZGxlYmFycy5nZXQ7RW1iZXIuSGFuZGxlYmFycy5yZWdp
        c3RlckhlbHBlcigidW5ib3VuZCIsZnVuY3Rpb24odCxyKXt2YXIgbixpLG8s
        YT1hcmd1bWVudHNbYXJndW1lbnRzLmxlbmd0aC0xXTtyZXR1cm4gYXJndW1l
        bnRzLmxlbmd0aD4yPyhhLmRhdGEuaXNVbmJvdW5kPSEwLG49RW1iZXIuSGFu
        ZGxlYmFycy5oZWxwZXJzW2FyZ3VtZW50c1swXV18fEVtYmVyLkhhbmRsZWJh
        cnMuaGVscGVyTWlzc2luZyxvPW4uYXBwbHkodGhpcyxBcnJheS5wcm90b3R5
        cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsMSkpLGRlbGV0ZSBhLmRhdGEuaXNV
        bmJvdW5kLG8pOihpPXIuY29udGV4dHMmJnIuY29udGV4dHMubGVuZ3RoP3Iu
        Y29udGV4dHNbMF06dGhpcyxlKGksdCxyKSl9KX0oKSxmdW5jdGlvbigpe3Zh
        ciBlPUVtYmVyLkhhbmRsZWJhcnMuZ2V0LHQ9RW1iZXIuSGFuZGxlYmFycy5u
        b3JtYWxpemVQYXRoO0VtYmVyLkhhbmRsZWJhcnMucmVnaXN0ZXJIZWxwZXIo
        ImxvZyIsZnVuY3Rpb24ocixuKXt2YXIgaT1uLmNvbnRleHRzJiZuLmNvbnRl
        eHRzLmxlbmd0aD9uLmNvbnRleHRzWzBdOnRoaXMsbz10KGkscixuLmRhdGEp
        LGE9by5yb290LHM9by5wYXRoLHU9InRoaXMiPT09cz9hOmUoYSxzLG4pO0Vt
        YmVyLkxvZ2dlci5sb2codSl9KSxFbWJlci5IYW5kbGViYXJzLnJlZ2lzdGVy
        SGVscGVyKCJkZWJ1Z2dlciIsZnVuY3Rpb24oKXt9KX0oKSxmdW5jdGlvbigp
        e3ZhciBlPUVtYmVyLmdldCx0PUVtYmVyLnNldDtFbWJlci5IYW5kbGViYXJz
        LkVhY2hWaWV3PUVtYmVyLkNvbGxlY3Rpb25WaWV3LmV4dGVuZChFbWJlci5f
        TWV0YW1vcnBoLHtpbml0OmZ1bmN0aW9uKCl7dmFyIHIsbj1lKHRoaXMsIml0
        ZW1Db250cm9sbGVyIik7aWYobil7dmFyIGk9ZSh0aGlzLCJjb250cm9sbGVy
        LmNvbnRhaW5lciIpLmxvb2t1cEZhY3RvcnkoImNvbnRyb2xsZXI6YXJyYXki
        KS5jcmVhdGUoe3BhcmVudENvbnRyb2xsZXI6ZSh0aGlzLCJjb250cm9sbGVy
        IiksaXRlbUNvbnRyb2xsZXI6bix0YXJnZXQ6ZSh0aGlzLCJjb250cm9sbGVy
        IiksX2VhY2hWaWV3OnRoaXN9KTt0aGlzLmRpc2FibGVDb250ZW50T2JzZXJ2
        ZXJzKGZ1bmN0aW9uKCl7dCh0aGlzLCJjb250ZW50IixpKSxyPW5ldyBFbWJl
        ci5CaW5kaW5nKCJjb250ZW50IiwiX2VhY2hWaWV3LmRhdGFTb3VyY2UiKS5v
        bmVXYXkoKSxyLmNvbm5lY3QoaSl9KSx0KHRoaXMsIl9hcnJheUNvbnRyb2xs
        ZXIiLGkpfWVsc2UgdGhpcy5kaXNhYmxlQ29udGVudE9ic2VydmVycyhmdW5j
        dGlvbigpe3I9bmV3IEVtYmVyLkJpbmRpbmcoImNvbnRlbnQiLCJkYXRhU291
        cmNlIikub25lV2F5KCksci5jb25uZWN0KHRoaXMpfSk7cmV0dXJuIHRoaXMu
        X3N1cGVyKCl9LF9hc3NlcnRBcnJheUxpa2U6ZnVuY3Rpb24oKXt9LGRpc2Fi
        bGVDb250ZW50T2JzZXJ2ZXJzOmZ1bmN0aW9uKGUpe0VtYmVyLnJlbW92ZUJl
        Zm9yZU9ic2VydmVyKHRoaXMsImNvbnRlbnQiLG51bGwsIl9jb250ZW50V2ls
        bENoYW5nZSIpLEVtYmVyLnJlbW92ZU9ic2VydmVyKHRoaXMsImNvbnRlbnQi
        LG51bGwsIl9jb250ZW50RGlkQ2hhbmdlIiksZS5jYWxsKHRoaXMpLEVtYmVy
        LmFkZEJlZm9yZU9ic2VydmVyKHRoaXMsImNvbnRlbnQiLG51bGwsIl9jb250
        ZW50V2lsbENoYW5nZSIpLEVtYmVyLmFkZE9ic2VydmVyKHRoaXMsImNvbnRl
        bnQiLG51bGwsIl9jb250ZW50RGlkQ2hhbmdlIil9LGl0ZW1WaWV3Q2xhc3M6
        RW1iZXIuX01ldGFtb3JwaFZpZXcsZW1wdHlWaWV3Q2xhc3M6RW1iZXIuX01l
        dGFtb3JwaFZpZXcsY3JlYXRlQ2hpbGRWaWV3OmZ1bmN0aW9uKHIsbil7cj10
        aGlzLl9zdXBlcihyLG4pO3ZhciBpPWUodGhpcywia2V5d29yZCIpLG89ZShy
        LCJjb250ZW50Iik7aWYoaSl7dmFyIGE9ZShyLCJ0ZW1wbGF0ZURhdGEiKTth
        PUVtYmVyLmNvcHkoYSksYS5rZXl3b3Jkcz1yLmNsb25lS2V5d29yZHMoKSx0
        KHIsInRlbXBsYXRlRGF0YSIsYSksYS5rZXl3b3Jkc1tpXT1vfXJldHVybiBv
        JiZlKG8sImlzQ29udHJvbGxlciIpJiZ0KHIsImNvbnRyb2xsZXIiLG8pLHJ9
        LGRlc3Ryb3k6ZnVuY3Rpb24oKXtpZih0aGlzLl9zdXBlcigpKXt2YXIgdD1l
        KHRoaXMsIl9hcnJheUNvbnRyb2xsZXIiKTtyZXR1cm4gdCYmdC5kZXN0cm95
        KCksdGhpc319fSk7dmFyIHI9RW1iZXIuSGFuZGxlYmFycy5Hcm91cGVkRWFj
        aD1mdW5jdGlvbihlLHQscil7dmFyIG49dGhpcyxpPUVtYmVyLkhhbmRsZWJh
        cnMubm9ybWFsaXplUGF0aChlLHQsci5kYXRhKTt0aGlzLmNvbnRleHQ9ZSx0
        aGlzLnBhdGg9dCx0aGlzLm9wdGlvbnM9cix0aGlzLnRlbXBsYXRlPXIuZm4s
        dGhpcy5jb250YWluaW5nVmlldz1yLmRhdGEudmlldyx0aGlzLm5vcm1hbGl6
        ZWRSb290PWkucm9vdCx0aGlzLm5vcm1hbGl6ZWRQYXRoPWkucGF0aCx0aGlz
        LmNvbnRlbnQ9dGhpcy5sb29rdXBDb250ZW50KCksdGhpcy5hZGRDb250ZW50
        T2JzZXJ2ZXJzKCksdGhpcy5hZGRBcnJheU9ic2VydmVycygpLHRoaXMuY29u
        dGFpbmluZ1ZpZXcub24oIndpbGxDbGVhclJlbmRlciIsZnVuY3Rpb24oKXtu
        LmRlc3Ryb3koKX0pfTtyLnByb3RvdHlwZT17Y29udGVudFdpbGxDaGFuZ2U6
        ZnVuY3Rpb24oKXt0aGlzLnJlbW92ZUFycmF5T2JzZXJ2ZXJzKCl9LGNvbnRl
        bnREaWRDaGFuZ2U6ZnVuY3Rpb24oKXt0aGlzLmNvbnRlbnQ9dGhpcy5sb29r
        dXBDb250ZW50KCksdGhpcy5hZGRBcnJheU9ic2VydmVycygpLHRoaXMucmVy
        ZW5kZXJDb250YWluaW5nVmlldygpfSxjb250ZW50QXJyYXlXaWxsQ2hhbmdl
        OkVtYmVyLkssY29udGVudEFycmF5RGlkQ2hhbmdlOmZ1bmN0aW9uKCl7dGhp
        cy5yZXJlbmRlckNvbnRhaW5pbmdWaWV3KCl9LGxvb2t1cENvbnRlbnQ6ZnVu
        Y3Rpb24oKXtyZXR1cm4gRW1iZXIuSGFuZGxlYmFycy5nZXQodGhpcy5ub3Jt
        YWxpemVkUm9vdCx0aGlzLm5vcm1hbGl6ZWRQYXRoLHRoaXMub3B0aW9ucyl9
        LGFkZEFycmF5T2JzZXJ2ZXJzOmZ1bmN0aW9uKCl7dGhpcy5jb250ZW50JiZ0
        aGlzLmNvbnRlbnQuYWRkQXJyYXlPYnNlcnZlcih0aGlzLHt3aWxsQ2hhbmdl
        OiJjb250ZW50QXJyYXlXaWxsQ2hhbmdlIixkaWRDaGFuZ2U6ImNvbnRlbnRB
        cnJheURpZENoYW5nZSJ9KX0scmVtb3ZlQXJyYXlPYnNlcnZlcnM6ZnVuY3Rp
        b24oKXt0aGlzLmNvbnRlbnQmJnRoaXMuY29udGVudC5yZW1vdmVBcnJheU9i
        c2VydmVyKHRoaXMse3dpbGxDaGFuZ2U6ImNvbnRlbnRBcnJheVdpbGxDaGFu
        Z2UiLGRpZENoYW5nZToiY29udGVudEFycmF5RGlkQ2hhbmdlIn0pfSxhZGRD
        b250ZW50T2JzZXJ2ZXJzOmZ1bmN0aW9uKCl7RW1iZXIuYWRkQmVmb3JlT2Jz
        ZXJ2ZXIodGhpcy5ub3JtYWxpemVkUm9vdCx0aGlzLm5vcm1hbGl6ZWRQYXRo
        LHRoaXMsdGhpcy5jb250ZW50V2lsbENoYW5nZSksRW1iZXIuYWRkT2JzZXJ2
        ZXIodGhpcy5ub3JtYWxpemVkUm9vdCx0aGlzLm5vcm1hbGl6ZWRQYXRoLHRo
        aXMsdGhpcy5jb250ZW50RGlkQ2hhbmdlKX0scmVtb3ZlQ29udGVudE9ic2Vy
        dmVyczpmdW5jdGlvbigpe0VtYmVyLnJlbW92ZUJlZm9yZU9ic2VydmVyKHRo
        aXMubm9ybWFsaXplZFJvb3QsdGhpcy5ub3JtYWxpemVkUGF0aCx0aGlzLmNv
        bnRlbnRXaWxsQ2hhbmdlKSxFbWJlci5yZW1vdmVPYnNlcnZlcih0aGlzLm5v
        cm1hbGl6ZWRSb290LHRoaXMubm9ybWFsaXplZFBhdGgsdGhpcy5jb250ZW50
        RGlkQ2hhbmdlKX0scmVuZGVyOmZ1bmN0aW9uKCl7aWYodGhpcy5jb250ZW50
        KXt2YXIgdD10aGlzLmNvbnRlbnQscj1lKHQsImxlbmd0aCIpLG49dGhpcy5v
        cHRpb25zLmRhdGEsaT10aGlzLnRlbXBsYXRlO24uaW5zaWRlRWFjaD0hMDtm
        b3IodmFyIG89MDtyPm87bysrKWkodC5vYmplY3RBdChvKSx7ZGF0YTpufSl9
        fSxyZXJlbmRlckNvbnRhaW5pbmdWaWV3OmZ1bmN0aW9uKCl7dmFyIGU9dGhp
        cztFbWJlci5ydW4uc2NoZWR1bGVPbmNlKCJyZW5kZXIiLHRoaXMsZnVuY3Rp
        b24oKXtlLmRlc3Ryb3llZHx8ZS5jb250YWluaW5nVmlldy5yZXJlbmRlcigp
        fSl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLnJlbW92ZUNvbnRlbnRPYnNl
        cnZlcnMoKSx0aGlzLmNvbnRlbnQmJnRoaXMucmVtb3ZlQXJyYXlPYnNlcnZl
        cnMoKSx0aGlzLmRlc3Ryb3llZD0hMH19LEVtYmVyLkhhbmRsZWJhcnMucmVn
        aXN0ZXJIZWxwZXIoImVhY2giLGZ1bmN0aW9uKGUsdCl7aWYoND09PWFyZ3Vt
        ZW50cy5sZW5ndGgpe3ZhciByPWFyZ3VtZW50c1swXTt0PWFyZ3VtZW50c1sz
        XSxlPWFyZ3VtZW50c1syXSwiIj09PWUmJihlPSJ0aGlzIiksdC5oYXNoLmtl
        eXdvcmQ9cn1yZXR1cm4gMT09PWFyZ3VtZW50cy5sZW5ndGgmJih0PWUsZT0i
        dGhpcyIpLHQuaGFzaC5kYXRhU291cmNlQmluZGluZz1lLCF0LmRhdGEuaW5z
        aWRlR3JvdXB8fHQuaGFzaC5ncm91cGVkUm93c3x8dC5oYXNoLml0ZW1WaWV3
        Q2xhc3M/RW1iZXIuSGFuZGxlYmFycy5oZWxwZXJzLmNvbGxlY3Rpb24uY2Fs
        bCh0aGlzLCJFbWJlci5IYW5kbGViYXJzLkVhY2hWaWV3Iix0KToobmV3IEVt
        YmVyLkhhbmRsZWJhcnMuR3JvdXBlZEVhY2godGhpcyxlLHQpLnJlbmRlcigp
        LHZvaWQgMCl9KX0oKSxmdW5jdGlvbigpe0VtYmVyLkhhbmRsZWJhcnMucmVn
        aXN0ZXJIZWxwZXIoInRlbXBsYXRlIixmdW5jdGlvbigpe3JldHVybiBFbWJl
        ci5IYW5kbGViYXJzLmhlbHBlcnMucGFydGlhbC5hcHBseSh0aGlzLGFyZ3Vt
        ZW50cyl9KX0oKSxmdW5jdGlvbigpe0VtYmVyLkhhbmRsZWJhcnMucmVnaXN0
        ZXJIZWxwZXIoInBhcnRpYWwiLGZ1bmN0aW9uKGUsdCl7dmFyIHI9ZS5zcGxp
        dCgiLyIpLG49cltyLmxlbmd0aC0xXTtyW3IubGVuZ3RoLTFdPSJfIituO3Zh
        ciBpPXQuZGF0YS52aWV3LG89ci5qb2luKCIvIiksYT1pLnRlbXBsYXRlRm9y
        TmFtZShvKSxzPSFhJiZpLnRlbXBsYXRlRm9yTmFtZShlKTthPWF8fHMsYSh0
        aGlzLHtkYXRhOnQuZGF0YX0pfSl9KCksZnVuY3Rpb24oKXt2YXIgZT1FbWJl
        ci5nZXQ7RW1iZXIuc2V0LEVtYmVyLkhhbmRsZWJhcnMucmVnaXN0ZXJIZWxw
        ZXIoInlpZWxkIixmdW5jdGlvbih0KXtmb3IodmFyIHI9dC5kYXRhLnZpZXc7
        ciYmIWUociwibGF5b3V0Iik7KXI9ci5fY29udGV4dFZpZXc/ci5fY29udGV4
        dFZpZXc6ZShyLCJwYXJlbnRWaWV3Iik7ci5feWllbGQodGhpcyx0KX0pfSgp
        LGZ1bmN0aW9uKCl7RW1iZXIuSGFuZGxlYmFycy5yZWdpc3RlckhlbHBlcigi
        bG9jIixmdW5jdGlvbihlKXtyZXR1cm4gRW1iZXIuU3RyaW5nLmxvYyhlKX0p
        fSgpLGZ1bmN0aW9uKCl7dmFyIGU9RW1iZXIuc2V0O0VtYmVyLmdldCxFbWJl
        ci5DaGVja2JveD1FbWJlci5WaWV3LmV4dGVuZCh7Y2xhc3NOYW1lczpbImVt
        YmVyLWNoZWNrYm94Il0sdGFnTmFtZToiaW5wdXQiLGF0dHJpYnV0ZUJpbmRp
        bmdzOlsidHlwZSIsImNoZWNrZWQiLCJpbmRldGVybWluYXRlIiwiZGlzYWJs
        ZWQiLCJ0YWJpbmRleCIsIm5hbWUiXSx0eXBlOiJjaGVja2JveCIsY2hlY2tl
        ZDohMSxkaXNhYmxlZDohMSxpbmRldGVybWluYXRlOiExLGluaXQ6ZnVuY3Rp
        b24oKXt0aGlzLl9zdXBlcigpLHRoaXMub24oImNoYW5nZSIsdGhpcyx0aGlz
        Ll91cGRhdGVFbGVtZW50VmFsdWUpfSxkaWRJbnNlcnRFbGVtZW50OmZ1bmN0
        aW9uKCl7dGhpcy5fc3VwZXIoKSx0aGlzLmdldCgiZWxlbWVudCIpLmluZGV0
        ZXJtaW5hdGU9ISF0aGlzLmdldCgiaW5kZXRlcm1pbmF0ZSIpfSxfdXBkYXRl
        RWxlbWVudFZhbHVlOmZ1bmN0aW9uKCl7ZSh0aGlzLCJjaGVja2VkIix0aGlz
        LiQoKS5wcm9wKCJjaGVja2VkIikpfX0pfSgpLGZ1bmN0aW9uKCl7ZnVuY3Rp
        b24gZShlLHIsbil7dmFyIGk9dChyLGUpLG89dChyLCJvbkV2ZW50IiksYT10
        KHIsInZhbHVlIik7KG89PT1lfHwia2V5UHJlc3MiPT09byYmImtleS1wcmVz
        cyI9PT1lKSYmci5zZW5kQWN0aW9uKCJhY3Rpb24iLGEpLHIuc2VuZEFjdGlv
        bihlLGEpLChpfHxvPT09ZSkmJih0KHIsImJ1YmJsZXMiKXx8bi5zdG9wUHJv
        cGFnYXRpb24oKSl9dmFyIHQ9RW1iZXIuZ2V0LHI9RW1iZXIuc2V0O0VtYmVy
        LlRleHRTdXBwb3J0PUVtYmVyLk1peGluLmNyZWF0ZSh7dmFsdWU6IiIsYXR0
        cmlidXRlQmluZGluZ3M6WyJwbGFjZWhvbGRlciIsImRpc2FibGVkIiwibWF4
        bGVuZ3RoIiwidGFiaW5kZXgiLCJyZWFkb25seSJdLHBsYWNlaG9sZGVyOm51
        bGwsZGlzYWJsZWQ6ITEsbWF4bGVuZ3RoOm51bGwsaW5pdDpmdW5jdGlvbigp
        e3RoaXMuX3N1cGVyKCksdGhpcy5vbigiZm9jdXNPdXQiLHRoaXMsdGhpcy5f
        ZWxlbWVudFZhbHVlRGlkQ2hhbmdlKSx0aGlzLm9uKCJjaGFuZ2UiLHRoaXMs
        dGhpcy5fZWxlbWVudFZhbHVlRGlkQ2hhbmdlKSx0aGlzLm9uKCJwYXN0ZSIs
        dGhpcyx0aGlzLl9lbGVtZW50VmFsdWVEaWRDaGFuZ2UpLHRoaXMub24oImN1
        dCIsdGhpcyx0aGlzLl9lbGVtZW50VmFsdWVEaWRDaGFuZ2UpLHRoaXMub24o
        ImlucHV0Iix0aGlzLHRoaXMuX2VsZW1lbnRWYWx1ZURpZENoYW5nZSksdGhp
        cy5vbigia2V5VXAiLHRoaXMsdGhpcy5pbnRlcnByZXRLZXlFdmVudHMpfSxh
        Y3Rpb246bnVsbCxvbkV2ZW50OiJlbnRlciIsYnViYmxlczohMSxpbnRlcnBy
        ZXRLZXlFdmVudHM6ZnVuY3Rpb24oZSl7dmFyIHQ9RW1iZXIuVGV4dFN1cHBv
        cnQuS0VZX0VWRU5UUyxyPXRbZS5rZXlDb2RlXTtyZXR1cm4gdGhpcy5fZWxl
        bWVudFZhbHVlRGlkQ2hhbmdlKCkscj90aGlzW3JdKGUpOnZvaWQgMH0sX2Vs
        ZW1lbnRWYWx1ZURpZENoYW5nZTpmdW5jdGlvbigpe3IodGhpcywidmFsdWUi
        LHRoaXMuJCgpLnZhbCgpKX0saW5zZXJ0TmV3bGluZTpmdW5jdGlvbih0KXtl
        KCJlbnRlciIsdGhpcyx0KSxlKCJpbnNlcnQtbmV3bGluZSIsdGhpcyx0KX0s
        Y2FuY2VsOmZ1bmN0aW9uKHQpe2UoImVzY2FwZS1wcmVzcyIsdGhpcyx0KX0s
        Zm9jdXNJbjpmdW5jdGlvbih0KXtlKCJmb2N1cy1pbiIsdGhpcyx0KX0sZm9j
        dXNPdXQ6ZnVuY3Rpb24odCl7ZSgiZm9jdXMtb3V0Iix0aGlzLHQpfSxrZXlQ
        cmVzczpmdW5jdGlvbih0KXtlKCJrZXktcHJlc3MiLHRoaXMsdCl9fSksRW1i
        ZXIuVGV4dFN1cHBvcnQuS0VZX0VWRU5UUz17MTM6Imluc2VydE5ld2xpbmUi
        LDI3OiJjYW5jZWwifX0oKSxmdW5jdGlvbigpe0VtYmVyLmdldCxFbWJlci5z
        ZXQsRW1iZXIuVGV4dEZpZWxkPUVtYmVyLkNvbXBvbmVudC5leHRlbmQoRW1i
        ZXIuVGV4dFN1cHBvcnQse2NsYXNzTmFtZXM6WyJlbWJlci10ZXh0LWZpZWxk
        Il0sdGFnTmFtZToiaW5wdXQiLGF0dHJpYnV0ZUJpbmRpbmdzOlsidHlwZSIs
        InZhbHVlIiwic2l6ZSIsInBhdHRlcm4iLCJuYW1lIl0sdmFsdWU6IiIsdHlw
        ZToidGV4dCIsc2l6ZTpudWxsLHBhdHRlcm46bnVsbH0pfSgpLGZ1bmN0aW9u
        KCl7dmFyIGU9RW1iZXIuZ2V0LHQ9RW1iZXIuc2V0O0VtYmVyLkJ1dHRvbj1F
        bWJlci5WaWV3LmV4dGVuZChFbWJlci5UYXJnZXRBY3Rpb25TdXBwb3J0LHtj
        bGFzc05hbWVzOlsiZW1iZXItYnV0dG9uIl0sY2xhc3NOYW1lQmluZGluZ3M6
        WyJpc0FjdGl2ZSJdLHRhZ05hbWU6ImJ1dHRvbiIscHJvcGFnYXRlRXZlbnRz
        OiExLGF0dHJpYnV0ZUJpbmRpbmdzOlsidHlwZSIsImRpc2FibGVkIiwiaHJl
        ZiIsInRhYmluZGV4Il0sdGFyZ2V0T2JqZWN0OkVtYmVyLmNvbXB1dGVkKGZ1
        bmN0aW9uKCl7dmFyIHQ9ZSh0aGlzLCJ0YXJnZXQiKSxyPWUodGhpcywiY29u
        dGV4dCIpLG49ZSh0aGlzLCJ0ZW1wbGF0ZURhdGEiKTtyZXR1cm4ic3RyaW5n
        IiE9dHlwZW9mIHQ/dDpFbWJlci5IYW5kbGViYXJzLmdldChyLHQse2RhdGE6
        bn0pfSkucHJvcGVydHkoInRhcmdldCIpLHR5cGU6RW1iZXIuY29tcHV0ZWQo
        ZnVuY3Rpb24oKXt2YXIgZT10aGlzLnRhZ05hbWU7cmV0dXJuImlucHV0Ij09
        PWV8fCJidXR0b24iPT09ZT8iYnV0dG9uIjp2b2lkIDB9KSxkaXNhYmxlZDoh
        MSxocmVmOkVtYmVyLmNvbXB1dGVkKGZ1bmN0aW9uKCl7cmV0dXJuImEiPT09
        dGhpcy50YWdOYW1lPyIjIjpudWxsfSksbW91c2VEb3duOmZ1bmN0aW9uKCl7
        cmV0dXJuIGUodGhpcywiZGlzYWJsZWQiKXx8KHQodGhpcywiaXNBY3RpdmUi
        LCEwKSx0aGlzLl9tb3VzZURvd249ITAsdGhpcy5fbW91c2VFbnRlcmVkPSEw
        KSxlKHRoaXMsInByb3BhZ2F0ZUV2ZW50cyIpfSxtb3VzZUxlYXZlOmZ1bmN0
        aW9uKCl7dGhpcy5fbW91c2VEb3duJiYodCh0aGlzLCJpc0FjdGl2ZSIsITEp
        LHRoaXMuX21vdXNlRW50ZXJlZD0hMSl9LG1vdXNlRW50ZXI6ZnVuY3Rpb24o
        KXt0aGlzLl9tb3VzZURvd24mJih0KHRoaXMsImlzQWN0aXZlIiwhMCksdGhp
        cy5fbW91c2VFbnRlcmVkPSEwKX0sbW91c2VVcDpmdW5jdGlvbigpe3JldHVy
        biBlKHRoaXMsImlzQWN0aXZlIikmJih0aGlzLnRyaWdnZXJBY3Rpb24oKSx0
        KHRoaXMsImlzQWN0aXZlIiwhMSkpLHRoaXMuX21vdXNlRG93bj0hMSx0aGlz
        Ll9tb3VzZUVudGVyZWQ9ITEsZSh0aGlzLCJwcm9wYWdhdGVFdmVudHMiKX0s
        a2V5RG93bjpmdW5jdGlvbihlKXsoMTM9PT1lLmtleUNvZGV8fDMyPT09ZS5r
        ZXlDb2RlKSYmdGhpcy5tb3VzZURvd24oKX0sa2V5VXA6ZnVuY3Rpb24oZSl7
        KDEzPT09ZS5rZXlDb2RlfHwzMj09PWUua2V5Q29kZSkmJnRoaXMubW91c2VV
        cCgpfSx0b3VjaFN0YXJ0OmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLm1vdXNl
        RG93bihlKX0sdG91Y2hFbmQ6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMubW91
        c2VVcChlKX0saW5pdDpmdW5jdGlvbigpe3RoaXMuX3N1cGVyKCl9fSl9KCks
        ZnVuY3Rpb24oKXt2YXIgZT1FbWJlci5nZXQ7RW1iZXIuc2V0LEVtYmVyLlRl
        eHRBcmVhPUVtYmVyLkNvbXBvbmVudC5leHRlbmQoRW1iZXIuVGV4dFN1cHBv
        cnQse2NsYXNzTmFtZXM6WyJlbWJlci10ZXh0LWFyZWEiXSx0YWdOYW1lOiJ0
        ZXh0YXJlYSIsYXR0cmlidXRlQmluZGluZ3M6WyJyb3dzIiwiY29scyIsIm5h
        bWUiXSxyb3dzOm51bGwsY29sczpudWxsLF91cGRhdGVFbGVtZW50VmFsdWU6
        RW1iZXIub2JzZXJ2ZXIoInZhbHVlIixmdW5jdGlvbigpe3ZhciB0PWUodGhp
        cywidmFsdWUiKSxyPXRoaXMuJCgpO3ImJnQhPT1yLnZhbCgpJiZyLnZhbCh0
        KX0pLGluaXQ6ZnVuY3Rpb24oKXt0aGlzLl9zdXBlcigpLHRoaXMub24oImRp
        ZEluc2VydEVsZW1lbnQiLHRoaXMsdGhpcy5fdXBkYXRlRWxlbWVudFZhbHVl
        KX19KX0oKSxmdW5jdGlvbigpe3ZhciBlPUVtYmVyLnNldCx0PUVtYmVyLmdl
        dCxyPUVtYmVyLkVudW1lcmFibGVVdGlscy5pbmRleE9mLG49RW1iZXIuRW51
        bWVyYWJsZVV0aWxzLmluZGV4ZXNPZixpPUVtYmVyLkVudW1lcmFibGVVdGls
        cy5mb3JFYWNoLG89RW1iZXIuRW51bWVyYWJsZVV0aWxzLnJlcGxhY2UsYT1F
        bWJlci5pc0FycmF5O0VtYmVyLkhhbmRsZWJhcnMuY29tcGlsZSxFbWJlci5T
        ZWxlY3RPcHRpb249RW1iZXIuVmlldy5leHRlbmQoe3RhZ05hbWU6Im9wdGlv
        biIsYXR0cmlidXRlQmluZGluZ3M6WyJ2YWx1ZSIsInNlbGVjdGVkIl0sZGVm
        YXVsdFRlbXBsYXRlOmZ1bmN0aW9uKGUsdCl7dD17ZGF0YTp0LmRhdGEsaGFz
        aDp7fX0sRW1iZXIuSGFuZGxlYmFycy5oZWxwZXJzLmJpbmQuY2FsbChlLCJ2
        aWV3LmxhYmVsIix0KX0saW5pdDpmdW5jdGlvbigpe3RoaXMubGFiZWxQYXRo
        RGlkQ2hhbmdlKCksdGhpcy52YWx1ZVBhdGhEaWRDaGFuZ2UoKSx0aGlzLl9z
        dXBlcigpfSxzZWxlY3RlZDpFbWJlci5jb21wdXRlZChmdW5jdGlvbigpe3Zh
        ciBlPXQodGhpcywiY29udGVudCIpLG49dCh0aGlzLCJwYXJlbnRWaWV3LnNl
        bGVjdGlvbiIpO3JldHVybiB0KHRoaXMsInBhcmVudFZpZXcubXVsdGlwbGUi
        KT9uJiZyKG4sZS52YWx1ZU9mKCkpPi0xOmU9PW59KS5wcm9wZXJ0eSgiY29u
        dGVudCIsInBhcmVudFZpZXcuc2VsZWN0aW9uIiksbGFiZWxQYXRoRGlkQ2hh
        bmdlOkVtYmVyLm9ic2VydmVyKCJwYXJlbnRWaWV3Lm9wdGlvbkxhYmVsUGF0
        aCIsZnVuY3Rpb24oKXt2YXIgZT10KHRoaXMsInBhcmVudFZpZXcub3B0aW9u
        TGFiZWxQYXRoIik7ZSYmRW1iZXIuZGVmaW5lUHJvcGVydHkodGhpcywibGFi
        ZWwiLEVtYmVyLmNvbXB1dGVkKGZ1bmN0aW9uKCl7cmV0dXJuIHQodGhpcyxl
        KX0pLnByb3BlcnR5KGUpKX0pLHZhbHVlUGF0aERpZENoYW5nZTpFbWJlci5v
        YnNlcnZlcigicGFyZW50Vmlldy5vcHRpb25WYWx1ZVBhdGgiLGZ1bmN0aW9u
        KCl7dmFyIGU9dCh0aGlzLCJwYXJlbnRWaWV3Lm9wdGlvblZhbHVlUGF0aCIp
        O2UmJkVtYmVyLmRlZmluZVByb3BlcnR5KHRoaXMsInZhbHVlIixFbWJlci5j
        b21wdXRlZChmdW5jdGlvbigpe3JldHVybiB0KHRoaXMsZSl9KS5wcm9wZXJ0
        eShlKSl9KX0pLEVtYmVyLlNlbGVjdE9wdGdyb3VwPUVtYmVyLkNvbGxlY3Rp
        b25WaWV3LmV4dGVuZCh7dGFnTmFtZToib3B0Z3JvdXAiLGF0dHJpYnV0ZUJp
        bmRpbmdzOlsibGFiZWwiXSxzZWxlY3Rpb25CaW5kaW5nOiJwYXJlbnRWaWV3
        LnNlbGVjdGlvbiIsbXVsdGlwbGVCaW5kaW5nOiJwYXJlbnRWaWV3Lm11bHRp
        cGxlIixvcHRpb25MYWJlbFBhdGhCaW5kaW5nOiJwYXJlbnRWaWV3Lm9wdGlv
        bkxhYmVsUGF0aCIsb3B0aW9uVmFsdWVQYXRoQmluZGluZzoicGFyZW50Vmll
        dy5vcHRpb25WYWx1ZVBhdGgiLGl0ZW1WaWV3Q2xhc3NCaW5kaW5nOiJwYXJl
        bnRWaWV3Lm9wdGlvblZpZXcifSksRW1iZXIuU2VsZWN0PUVtYmVyLlZpZXcu
        ZXh0ZW5kKHt0YWdOYW1lOiJzZWxlY3QiLGNsYXNzTmFtZXM6WyJlbWJlci1z
        ZWxlY3QiXSxkZWZhdWx0VGVtcGxhdGU6RW1iZXIuSGFuZGxlYmFycy50ZW1w
        bGF0ZShmdW5jdGlvbihlLHQscixuLGkpe2Z1bmN0aW9uIG8oZSx0KXt2YXIg
        bixpLG89IiI7CnJldHVybiB0LmJ1ZmZlci5wdXNoKCc8b3B0aW9uIHZhbHVl
        PSIiPicpLG49e30saT17fSx0LmJ1ZmZlci5wdXNoKHAoci5fdHJpYWdlTXVz
        dGFjaGUuY2FsbChlLCJ2aWV3LnByb21wdCIse2hhc2g6e30sY29udGV4dHM6
        W2VdLHR5cGVzOlsiSUQiXSxoYXNoQ29udGV4dHM6aSxoYXNoVHlwZXM6bixk
        YXRhOnR9KSkpLHQuYnVmZmVyLnB1c2goIjwvb3B0aW9uPiIpLG99ZnVuY3Rp
        b24gYShlLHQpe3ZhciBuLGksbztpPXt9LG89e30sbj1yLmVhY2guY2FsbChl
        LCJ2aWV3Lmdyb3VwZWRDb250ZW50Iix7aGFzaDp7fSxpbnZlcnNlOmQubm9v
        cCxmbjpkLnByb2dyYW0oNCxzLHQpLGNvbnRleHRzOltlXSx0eXBlczpbIklE
        Il0saGFzaENvbnRleHRzOm8saGFzaFR5cGVzOmksZGF0YTp0fSksbnx8MD09
        PW4/dC5idWZmZXIucHVzaChuKTp0LmJ1ZmZlci5wdXNoKCIiKX1mdW5jdGlv
        biBzKGUsdCl7dmFyIG4saTtuPXtjb250ZW50OmUsbGFiZWw6ZX0saT17Y29u
        dGVudDoiSUQiLGxhYmVsOiJJRCJ9LHQuYnVmZmVyLnB1c2gocChyLnZpZXcu
        Y2FsbChlLCJ2aWV3Lmdyb3VwVmlldyIse2hhc2g6e2NvbnRlbnQ6ImNvbnRl
        bnQiLGxhYmVsOiJsYWJlbCJ9LGNvbnRleHRzOltlXSx0eXBlczpbIklEIl0s
        aGFzaENvbnRleHRzOm4saGFzaFR5cGVzOmksZGF0YTp0fSkpKX1mdW5jdGlv
        biB1KGUsdCl7dmFyIG4saSxvO2k9e30sbz17fSxuPXIuZWFjaC5jYWxsKGUs
        InZpZXcuY29udGVudCIse2hhc2g6e30saW52ZXJzZTpkLm5vb3AsZm46ZC5w
        cm9ncmFtKDcsYyx0KSxjb250ZXh0czpbZV0sdHlwZXM6WyJJRCJdLGhhc2hD
        b250ZXh0czpvLGhhc2hUeXBlczppLGRhdGE6dH0pLG58fDA9PT1uP3QuYnVm
        ZmVyLnB1c2gobik6dC5idWZmZXIucHVzaCgiIil9ZnVuY3Rpb24gYyhlLHQp
        e3ZhciBuLGk7bj17Y29udGVudDplfSxpPXtjb250ZW50OiJJRCJ9LHQuYnVm
        ZmVyLnB1c2gocChyLnZpZXcuY2FsbChlLCJ2aWV3Lm9wdGlvblZpZXciLHto
        YXNoOntjb250ZW50OiIifSxjb250ZXh0czpbZV0sdHlwZXM6WyJJRCJdLGhh
        c2hDb250ZXh0czpuLGhhc2hUeXBlczppLGRhdGE6dH0pKSl9dGhpcy5jb21w
        aWxlckluZm89WzQsIj49IDEuMC4wIl0scj10aGlzLm1lcmdlKHIsRW1iZXIu
        SGFuZGxlYmFycy5oZWxwZXJzKSxpPWl8fHt9O3ZhciBsLGgsbSxmPSIiLHA9
        dGhpcy5lc2NhcGVFeHByZXNzaW9uLGQ9dGhpcztyZXR1cm4gaD17fSxtPXt9
        LGw9clsiaWYiXS5jYWxsKHQsInZpZXcucHJvbXB0Iix7aGFzaDp7fSxpbnZl
        cnNlOmQubm9vcCxmbjpkLnByb2dyYW0oMSxvLGkpLGNvbnRleHRzOlt0XSx0
        eXBlczpbIklEIl0saGFzaENvbnRleHRzOm0saGFzaFR5cGVzOmgsZGF0YTpp
        fSksKGx8fDA9PT1sKSYmaS5idWZmZXIucHVzaChsKSxoPXt9LG09e30sbD1y
        WyJpZiJdLmNhbGwodCwidmlldy5vcHRpb25Hcm91cFBhdGgiLHtoYXNoOnt9
        LGludmVyc2U6ZC5wcm9ncmFtKDYsdSxpKSxmbjpkLnByb2dyYW0oMyxhLGkp
        LGNvbnRleHRzOlt0XSx0eXBlczpbIklEIl0saGFzaENvbnRleHRzOm0saGFz
        aFR5cGVzOmgsZGF0YTppfSksKGx8fDA9PT1sKSYmaS5idWZmZXIucHVzaChs
        KSxmfSksYXR0cmlidXRlQmluZGluZ3M6WyJtdWx0aXBsZSIsImRpc2FibGVk
        IiwidGFiaW5kZXgiLCJuYW1lIl0sbXVsdGlwbGU6ITEsZGlzYWJsZWQ6ITEs
        Y29udGVudDpudWxsLHNlbGVjdGlvbjpudWxsLHZhbHVlOkVtYmVyLmNvbXB1
        dGVkKGZ1bmN0aW9uKGUscil7aWYoMj09PWFyZ3VtZW50cy5sZW5ndGgpcmV0
        dXJuIHI7dmFyIG49dCh0aGlzLCJvcHRpb25WYWx1ZVBhdGgiKS5yZXBsYWNl
        KC9eY29udGVudFwuPy8sIiIpO3JldHVybiBuP3QodGhpcywic2VsZWN0aW9u
        LiIrbik6dCh0aGlzLCJzZWxlY3Rpb24iKX0pLnByb3BlcnR5KCJzZWxlY3Rp
        b24iKSxwcm9tcHQ6bnVsbCxvcHRpb25MYWJlbFBhdGg6ImNvbnRlbnQiLG9w
        dGlvblZhbHVlUGF0aDoiY29udGVudCIsb3B0aW9uR3JvdXBQYXRoOm51bGws
        Z3JvdXBWaWV3OkVtYmVyLlNlbGVjdE9wdGdyb3VwLGdyb3VwZWRDb250ZW50
        OkVtYmVyLmNvbXB1dGVkKGZ1bmN0aW9uKCl7dmFyIGU9dCh0aGlzLCJvcHRp
        b25Hcm91cFBhdGgiKSxyPUVtYmVyLkEoKSxuPXQodGhpcywiY29udGVudCIp
        fHxbXTtyZXR1cm4gaShuLGZ1bmN0aW9uKG4pe3ZhciBpPXQobixlKTt0KHIs
        Imxhc3RPYmplY3QubGFiZWwiKSE9PWkmJnIucHVzaE9iamVjdCh7bGFiZWw6
        aSxjb250ZW50OkVtYmVyLkEoKX0pLHQociwibGFzdE9iamVjdC5jb250ZW50
        IikucHVzaChuKX0pLHJ9KS5wcm9wZXJ0eSgib3B0aW9uR3JvdXBQYXRoIiwi
        Y29udGVudC5AZWFjaCIpLG9wdGlvblZpZXc6RW1iZXIuU2VsZWN0T3B0aW9u
        LF9jaGFuZ2U6ZnVuY3Rpb24oKXt0KHRoaXMsIm11bHRpcGxlIik/dGhpcy5f
        Y2hhbmdlTXVsdGlwbGUoKTp0aGlzLl9jaGFuZ2VTaW5nbGUoKX0sc2VsZWN0
        aW9uRGlkQ2hhbmdlOkVtYmVyLm9ic2VydmVyKCJzZWxlY3Rpb24uQGVhY2gi
        LGZ1bmN0aW9uKCl7dmFyIHI9dCh0aGlzLCJzZWxlY3Rpb24iKTtpZih0KHRo
        aXMsIm11bHRpcGxlIikpe2lmKCFhKHIpKXJldHVybiBlKHRoaXMsInNlbGVj
        dGlvbiIsRW1iZXIuQShbcl0pKSx2b2lkIDA7dGhpcy5fc2VsZWN0aW9uRGlk
        Q2hhbmdlTXVsdGlwbGUoKX1lbHNlIHRoaXMuX3NlbGVjdGlvbkRpZENoYW5n
        ZVNpbmdsZSgpfSksdmFsdWVEaWRDaGFuZ2U6RW1iZXIub2JzZXJ2ZXIoInZh
        bHVlIixmdW5jdGlvbigpe3ZhciBlLHI9dCh0aGlzLCJjb250ZW50Iiksbj10
        KHRoaXMsInZhbHVlIiksaT10KHRoaXMsIm9wdGlvblZhbHVlUGF0aCIpLnJl
        cGxhY2UoL15jb250ZW50XC4/LywiIiksbz1pP3QodGhpcywic2VsZWN0aW9u
        LiIraSk6dCh0aGlzLCJzZWxlY3Rpb24iKTtuIT09byYmKGU9cj9yLmZpbmQo
        ZnVuY3Rpb24oZSl7cmV0dXJuIG49PT0oaT90KGUsaSk6ZSl9KTpudWxsLHRo
        aXMuc2V0KCJzZWxlY3Rpb24iLGUpKX0pLF90cmlnZ2VyQ2hhbmdlOmZ1bmN0
        aW9uKCl7dmFyIGU9dCh0aGlzLCJzZWxlY3Rpb24iKSxyPXQodGhpcywidmFs
        dWUiKTtFbWJlci5pc05vbmUoZSl8fHRoaXMuc2VsZWN0aW9uRGlkQ2hhbmdl
        KCksRW1iZXIuaXNOb25lKHIpfHx0aGlzLnZhbHVlRGlkQ2hhbmdlKCksdGhp
        cy5fY2hhbmdlKCl9LF9jaGFuZ2VTaW5nbGU6ZnVuY3Rpb24oKXt2YXIgcj10
        aGlzLiQoKVswXS5zZWxlY3RlZEluZGV4LG49dCh0aGlzLCJjb250ZW50Iiks
        aT10KHRoaXMsInByb21wdCIpO2lmKG4mJnQobiwibGVuZ3RoIikpe2lmKGkm
        JjA9PT1yKXJldHVybiBlKHRoaXMsInNlbGVjdGlvbiIsbnVsbCksdm9pZCAw
        O2kmJihyLT0xKSxlKHRoaXMsInNlbGVjdGlvbiIsbi5vYmplY3RBdChyKSl9
        fSxfY2hhbmdlTXVsdGlwbGU6ZnVuY3Rpb24oKXt2YXIgcj10aGlzLiQoIm9w
        dGlvbjpzZWxlY3RlZCIpLG49dCh0aGlzLCJwcm9tcHQiKSxpPW4/MTowLHM9
        dCh0aGlzLCJjb250ZW50IiksdT10KHRoaXMsInNlbGVjdGlvbiIpO2lmKHMm
        JnIpe3ZhciBjPXIubWFwKGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaW5kZXgt
        aX0pLnRvQXJyYXkoKSxsPXMub2JqZWN0c0F0KGMpO2EodSk/byh1LDAsdCh1
        LCJsZW5ndGgiKSxsKTplKHRoaXMsInNlbGVjdGlvbiIsbCl9fSxfc2VsZWN0
        aW9uRGlkQ2hhbmdlU2luZ2xlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5nZXQo
        ImVsZW1lbnQiKTtpZihlKXt2YXIgbj10KHRoaXMsImNvbnRlbnQiKSxpPXQo
        dGhpcywic2VsZWN0aW9uIiksbz1uP3IobixpKTotMSxhPXQodGhpcywicHJv
        bXB0Iik7YSYmKG8rPTEpLGUmJihlLnNlbGVjdGVkSW5kZXg9byl9fSxfc2Vs
        ZWN0aW9uRGlkQ2hhbmdlTXVsdGlwbGU6ZnVuY3Rpb24oKXt2YXIgZSxpPXQo
        dGhpcywiY29udGVudCIpLG89dCh0aGlzLCJzZWxlY3Rpb24iKSxhPWk/bihp
        LG8pOlstMV0scz10KHRoaXMsInByb21wdCIpLHU9cz8xOjAsYz10aGlzLiQo
        Im9wdGlvbiIpO2MmJmMuZWFjaChmdW5jdGlvbigpe2U9dGhpcy5pbmRleD4t
        MT90aGlzLmluZGV4LXU6LTEsdGhpcy5zZWxlY3RlZD1yKGEsZSk+LTF9KX0s
        aW5pdDpmdW5jdGlvbigpe3RoaXMuX3N1cGVyKCksdGhpcy5vbigiZGlkSW5z
        ZXJ0RWxlbWVudCIsdGhpcyx0aGlzLl90cmlnZ2VyQ2hhbmdlKSx0aGlzLm9u
        KCJjaGFuZ2UiLHRoaXMsdGhpcy5fY2hhbmdlKX19KX0oKSxmdW5jdGlvbigp
        e0VtYmVyLkhhbmRsZWJhcnMucmVnaXN0ZXJIZWxwZXIoImlucHV0IixmdW5j
        dGlvbihlKXt2YXIgdD1lLmhhc2gscj0oZS5oYXNoVHlwZXMsdC50eXBlKSxu
        PXQub247cmV0dXJuIGRlbGV0ZSB0LnR5cGUsZGVsZXRlIHQub24sImNoZWNr
        Ym94Ij09PXI/RW1iZXIuSGFuZGxlYmFycy5oZWxwZXJzLnZpZXcuY2FsbCh0
        aGlzLEVtYmVyLkNoZWNrYm94LGUpOihyJiYodC50eXBlPXIpLHQub25FdmVu
        dD1ufHwiZW50ZXIiLEVtYmVyLkhhbmRsZWJhcnMuaGVscGVycy52aWV3LmNh
        bGwodGhpcyxFbWJlci5UZXh0RmllbGQsZSkpfSksRW1iZXIuSGFuZGxlYmFy
        cy5yZWdpc3RlckhlbHBlcigidGV4dGFyZWEiLGZ1bmN0aW9uKGUpe3JldHVy
        biBlLmhhc2gsZS5oYXNoVHlwZXMsRW1iZXIuSGFuZGxlYmFycy5oZWxwZXJz
        LnZpZXcuY2FsbCh0aGlzLEVtYmVyLlRleHRBcmVhLGUpfSl9KCksZnVuY3Rp
        b24oKXtFbWJlci5Db21wb25lbnRMb29rdXA9RW1iZXIuT2JqZWN0LmV4dGVu
        ZCh7bG9va3VwRmFjdG9yeTpmdW5jdGlvbihlLHQpe3Q9dHx8dGhpcy5jb250
        YWluZXI7dmFyIHI9ImNvbXBvbmVudDoiK2Usbj0idGVtcGxhdGU6Y29tcG9u
        ZW50cy8iK2UsaT10JiZ0LmhhcyhuKTtpJiZ0LmluamVjdGlvbihyLCJsYXlv
        dXQiLG4pO3ZhciBvPXQubG9va3VwRmFjdG9yeShyKTtyZXR1cm4gaXx8bz8o
        b3x8KHQucmVnaXN0ZXIocixFbWJlci5Db21wb25lbnQpLG89dC5sb29rdXBG
        YWN0b3J5KHIpKSxvKTp2b2lkIDB9fSl9KCksZnVuY3Rpb24oKXtmdW5jdGlv
        biBlKCl7RW1iZXIuSGFuZGxlYmFycy5ib290c3RyYXAoRW1iZXIuJChkb2N1
        bWVudCkpfWZ1bmN0aW9uIHQoZSl7ZS5yZWdpc3RlcigiY29tcG9uZW50LWxv
        b2t1cDptYWluIixFbWJlci5Db21wb25lbnRMb29rdXApfUVtYmVyLkhhbmRs
        ZWJhcnMuYm9vdHN0cmFwPWZ1bmN0aW9uKGUpe3ZhciB0PSdzY3JpcHRbdHlw
        ZT0idGV4dC94LWhhbmRsZWJhcnMiXSwgc2NyaXB0W3R5cGU9InRleHQveC1y
        YXctaGFuZGxlYmFycyJdJztFbWJlci4kKHQsZSkuZWFjaChmdW5jdGlvbigp
        e3ZhciBlPUVtYmVyLiQodGhpcyksdD0idGV4dC94LXJhdy1oYW5kbGViYXJz
        Ij09PWUuYXR0cigidHlwZSIpP0VtYmVyLiQucHJveHkoSGFuZGxlYmFycy5j
        b21waWxlLEhhbmRsZWJhcnMpOkVtYmVyLiQucHJveHkoRW1iZXIuSGFuZGxl
        YmFycy5jb21waWxlLEVtYmVyLkhhbmRsZWJhcnMpLHI9ZS5hdHRyKCJkYXRh
        LXRlbXBsYXRlLW5hbWUiKXx8ZS5hdHRyKCJpZCIpfHwiYXBwbGljYXRpb24i
        LG49dChlLmh0bWwoKSk7aWYodm9pZCAwIT09RW1iZXIuVEVNUExBVEVTW3Jd
        KXRocm93IG5ldyBFbWJlci5FcnJvcignVGVtcGxhdGUgbmFtZWQgIicrcisn
        IiBhbHJlYWR5IGV4aXN0cy4nKTtFbWJlci5URU1QTEFURVNbcl09bixlLnJl
        bW92ZSgpfSl9LEVtYmVyLm9uTG9hZCgiRW1iZXIuQXBwbGljYXRpb24iLGZ1
        bmN0aW9uKHIpe3IuaW5pdGlhbGl6ZXIoe25hbWU6ImRvbVRlbXBsYXRlcyIs
        aW5pdGlhbGl6ZTplfSksci5pbml0aWFsaXplcih7bmFtZToicmVnaXN0ZXJD
        b21wb25lbnRMb29rdXAiLGFmdGVyOiJkb21UZW1wbGF0ZXMiLGluaXRpYWxp
        emU6dH0pfSl9KCksZnVuY3Rpb24oKXtFbWJlci5ydW5Mb2FkSG9va3MoIkVt
        YmVyLkhhbmRsZWJhcnMiLEVtYmVyLkhhbmRsZWJhcnMpfSgpLGZ1bmN0aW9u
        KCl7ZSgicm91dGUtcmVjb2duaXplciIsW10sZnVuY3Rpb24oKXsidXNlIHN0
        cmljdCI7ZnVuY3Rpb24gZShlKXt0aGlzLnN0cmluZz1lfWZ1bmN0aW9uIHQo
        ZSl7dGhpcy5uYW1lPWV9ZnVuY3Rpb24gcihlKXt0aGlzLm5hbWU9ZX1mdW5j
        dGlvbiBuKCl7fWZ1bmN0aW9uIGkoaSxvLGEpeyIvIj09PWkuY2hhckF0KDAp
        JiYoaT1pLnN1YnN0cigxKSk7Zm9yKHZhciBzPWkuc3BsaXQoIi8iKSx1PVtd
        LGM9MCxsPXMubGVuZ3RoO2w+YztjKyspe3ZhciBoLG09c1tjXTsoaD1tLm1h
        dGNoKC9eOihbXlwvXSspJC8pKT8odS5wdXNoKG5ldyB0KGhbMV0pKSxvLnB1
        c2goaFsxXSksYS5keW5hbWljcysrKTooaD1tLm1hdGNoKC9eXCooW15cL10r
        KSQvKSk/KHUucHVzaChuZXcgcihoWzFdKSksby5wdXNoKGhbMV0pLGEuc3Rh
        cnMrKyk6IiI9PT1tP3UucHVzaChuZXcgbik6KHUucHVzaChuZXcgZShtKSks
        YS5zdGF0aWNzKyspfXJldHVybiB1fWZ1bmN0aW9uIG8oZSl7dGhpcy5jaGFy
        U3BlYz1lLHRoaXMubmV4dFN0YXRlcz1bXX1mdW5jdGlvbiBhKGUpe3JldHVy
        biBlLnNvcnQoZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS50eXBlcy5zdGFycyE9
        PXQudHlwZXMuc3RhcnM/ZS50eXBlcy5zdGFycy10LnR5cGVzLnN0YXJzOmUu
        dHlwZXMuZHluYW1pY3MhPT10LnR5cGVzLmR5bmFtaWNzP2UudHlwZXMuZHlu
        YW1pY3MtdC50eXBlcy5keW5hbWljczplLnR5cGVzLnN0YXRpY3MhPT10LnR5
        cGVzLnN0YXRpY3M/ZS50eXBlcy5zdGF0aWNzLXQudHlwZXMuc3RhdGljczow
        fSl9ZnVuY3Rpb24gcyhlLHQpe2Zvcih2YXIgcj1bXSxuPTAsaT1lLmxlbmd0
        aDtpPm47bisrKXt2YXIgbz1lW25dO3I9ci5jb25jYXQoby5tYXRjaCh0KSl9
        cmV0dXJuIHJ9ZnVuY3Rpb24gdShlLHQscil7Zm9yKHZhciBuPWUuaGFuZGxl
        cnMsaT1lLnJlZ2V4LG89dC5tYXRjaChpKSxhPTEscz1bXSx1PTAsYz1uLmxl
        bmd0aDtjPnU7dSsrKXt2YXIgbCxoLG09blt1XSxmPW0ubmFtZXMscD17fSxk
        PW0ucXVlcnlQYXJhbXN8fFtdLGI9e307Zm9yKGw9MCxoPWYubGVuZ3RoO2g+
        bDtsKyspcFtmW2xdXT1vW2ErK107Zm9yKGw9MCxoPWQubGVuZ3RoO2g+bDts
        Kyspe3ZhciB2PWRbbF07clt2XSYmKGJbdl09clt2XSl9dmFyIEU9e2hhbmRs
        ZXI6bS5oYW5kbGVyLHBhcmFtczpwLGlzRHluYW1pYzohIWYubGVuZ3RofTtk
        JiZkLmxlbmd0aD4wJiYoRS5xdWVyeVBhcmFtcz1iKSxzLnB1c2goRSl9cmV0
        dXJuIHN9ZnVuY3Rpb24gYyhlLHQpe3JldHVybiB0LmVhY2hDaGFyKGZ1bmN0
        aW9uKHQpe2U9ZS5wdXQodCl9KSxlfWZ1bmN0aW9uIGwoZSx0LHIpe3RoaXMu
        cGF0aD1lLHRoaXMubWF0Y2hlcj10LHRoaXMuZGVsZWdhdGU9cn1mdW5jdGlv
        biBoKGUpe3RoaXMucm91dGVzPXt9LHRoaXMuY2hpbGRyZW49e30sdGhpcy5x
        dWVyeVBhcmFtcz17fSx0aGlzLnRhcmdldD1lfWZ1bmN0aW9uIG0oZSx0LHIp
        e3JldHVybiBmdW5jdGlvbihuLGkpe3ZhciBvPWUrbjtyZXR1cm4gaT8oaSht
        KG8sdCxyKSksdm9pZCAwKTpuZXcgbChlK24sdCxyKX19ZnVuY3Rpb24gZihl
        LHQscixuKXtmb3IodmFyIGk9MCxvPTAsYT1lLmxlbmd0aDthPm87bysrKWkr
        PWVbb10ucGF0aC5sZW5ndGg7dD10LnN1YnN0cihpKTt2YXIgcz17cGF0aDp0
        LGhhbmRsZXI6cn07biYmKHMucXVlcnlQYXJhbXM9biksZS5wdXNoKHMpfWZ1
        bmN0aW9uIHAoZSx0LHIsbil7dmFyIGk9dC5yb3V0ZXMsbz10LnF1ZXJ5UGFy
        YW1zO2Zvcih2YXIgYSBpbiBpKWlmKGkuaGFzT3duUHJvcGVydHkoYSkpe3Zh
        ciBzPWUuc2xpY2UoKTtmKHMsYSxpW2FdLG9bYV0pLHQuY2hpbGRyZW5bYV0/
        cChzLHQuY2hpbGRyZW5bYV0scixuKTpyLmNhbGwobixzKX19dmFyIGQ9WyIv
        IiwiLiIsIioiLCIrIiwiPyIsInwiLCIoIiwiKSIsIlsiLCJdIiwieyIsIn0i
        LCJcXCJdLGI9bmV3IFJlZ0V4cCgiKFxcIitkLmpvaW4oInxcXCIpKyIpIiwi
        ZyIpO2UucHJvdG90eXBlPXtlYWNoQ2hhcjpmdW5jdGlvbihlKXtmb3IodmFy
        IHQscj10aGlzLnN0cmluZyxuPTAsaT1yLmxlbmd0aDtpPm47bisrKXQ9ci5j
        aGFyQXQobiksZSh7dmFsaWRDaGFyczp0fSl9LHJlZ2V4OmZ1bmN0aW9uKCl7
        cmV0dXJuIHRoaXMuc3RyaW5nLnJlcGxhY2UoYiwiXFwkMSIpfSxnZW5lcmF0
        ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnN0cmluZ319LHQucHJvdG90eXBl
        PXtlYWNoQ2hhcjpmdW5jdGlvbihlKXtlKHtpbnZhbGlkQ2hhcnM6Ii8iLHJl
        cGVhdDohMH0pfSxyZWdleDpmdW5jdGlvbigpe3JldHVybiIoW14vXSspIn0s
        Z2VuZXJhdGU6ZnVuY3Rpb24oZSl7cmV0dXJuIGVbdGhpcy5uYW1lXX19LHIu
        cHJvdG90eXBlPXtlYWNoQ2hhcjpmdW5jdGlvbihlKXtlKHtpbnZhbGlkQ2hh
        cnM6IiIscmVwZWF0OiEwfSl9LHJlZ2V4OmZ1bmN0aW9uKCl7cmV0dXJuIigu
        KykifSxnZW5lcmF0ZTpmdW5jdGlvbihlKXtyZXR1cm4gZVt0aGlzLm5hbWVd
        fX0sbi5wcm90b3R5cGU9e2VhY2hDaGFyOmZ1bmN0aW9uKCl7fSxyZWdleDpm
        dW5jdGlvbigpe3JldHVybiIifSxnZW5lcmF0ZTpmdW5jdGlvbigpe3JldHVy
        biIifX0sby5wcm90b3R5cGU9e2dldDpmdW5jdGlvbihlKXtmb3IodmFyIHQ9
        dGhpcy5uZXh0U3RhdGVzLHI9MCxuPXQubGVuZ3RoO24+cjtyKyspe3ZhciBp
        PXRbcl0sbz1pLmNoYXJTcGVjLnZhbGlkQ2hhcnM9PT1lLnZhbGlkQ2hhcnM7
        aWYobz1vJiZpLmNoYXJTcGVjLmludmFsaWRDaGFycz09PWUuaW52YWxpZENo
        YXJzKXJldHVybiBpfX0scHV0OmZ1bmN0aW9uKGUpe3ZhciB0O3JldHVybih0
        PXRoaXMuZ2V0KGUpKT90Oih0PW5ldyBvKGUpLHRoaXMubmV4dFN0YXRlcy5w
        dXNoKHQpLGUucmVwZWF0JiZ0Lm5leHRTdGF0ZXMucHVzaCh0KSx0KX0sbWF0
        Y2g6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0LHIsbixpPXRoaXMubmV4dFN0YXRl
        cyxvPVtdLGE9MCxzPWkubGVuZ3RoO3M+YTthKyspdD1pW2FdLHI9dC5jaGFy
        U3BlYywidW5kZWZpbmVkIiE9dHlwZW9mKG49ci52YWxpZENoYXJzKT8tMSE9
        PW4uaW5kZXhPZihlKSYmby5wdXNoKHQpOiJ1bmRlZmluZWQiIT10eXBlb2Yo
        bj1yLmludmFsaWRDaGFycykmJi0xPT09bi5pbmRleE9mKGUpJiZvLnB1c2go
        dCk7cmV0dXJuIG99fTt2YXIgdj1mdW5jdGlvbigpe3RoaXMucm9vdFN0YXRl
        PW5ldyBvLHRoaXMubmFtZXM9e319O3JldHVybiB2LnByb3RvdHlwZT17YWRk
        OmZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByLG89dGhpcy5yb290U3RhdGUsYT0i
        XiIscz17c3RhdGljczowLGR5bmFtaWNzOjAsc3RhcnM6MH0sdT1bXSxsPVtd
        LGg9ITAsbT0wLGY9ZS5sZW5ndGg7Zj5tO20rKyl7dmFyIHA9ZVttXSxkPVtd
        LGI9aShwLnBhdGgsZCxzKTtsPWwuY29uY2F0KGIpO2Zvcih2YXIgdj0wLEU9
        Yi5sZW5ndGg7RT52O3YrKyl7dmFyIGc9Ylt2XTtnIGluc3RhbmNlb2Ygbnx8
        KGg9ITEsbz1vLnB1dCh7dmFsaWRDaGFyczoiLyJ9KSxhKz0iLyIsbz1jKG8s
        ZyksYSs9Zy5yZWdleCgpKX12YXIgeT17aGFuZGxlcjpwLmhhbmRsZXIsbmFt
        ZXM6ZH07cC5xdWVyeVBhcmFtcyYmKHkucXVlcnlQYXJhbXM9cC5xdWVyeVBh
        cmFtcyksdS5wdXNoKHkpfWgmJihvPW8ucHV0KHt2YWxpZENoYXJzOiIvIn0p
        LGErPSIvIiksby5oYW5kbGVycz11LG8ucmVnZXg9bmV3IFJlZ0V4cChhKyIk
        Iiksby50eXBlcz1zLChyPXQmJnQuYXMpJiYodGhpcy5uYW1lc1tyXT17c2Vn
        bWVudHM6bCxoYW5kbGVyczp1fSl9LGhhbmRsZXJzRm9yOmZ1bmN0aW9uKGUp
        e3ZhciB0PXRoaXMubmFtZXNbZV0scj1bXTtpZighdCl0aHJvdyBuZXcgRXJy
        b3IoIlRoZXJlIGlzIG5vIHJvdXRlIG5hbWVkICIrZSk7Zm9yKHZhciBuPTAs
        aT10LmhhbmRsZXJzLmxlbmd0aDtpPm47bisrKXIucHVzaCh0LmhhbmRsZXJz
        W25dKTtyZXR1cm4gcn0saGFzUm91dGU6ZnVuY3Rpb24oZSl7cmV0dXJuISF0
        aGlzLm5hbWVzW2VdfSxnZW5lcmF0ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRo
        aXMubmFtZXNbZV0saT0iIjtpZighcil0aHJvdyBuZXcgRXJyb3IoIlRoZXJl
        IGlzIG5vIHJvdXRlIG5hbWVkICIrZSk7Zm9yKHZhciBvPXIuc2VnbWVudHMs
        YT0wLHM9by5sZW5ndGg7cz5hO2ErKyl7dmFyIHU9b1thXTt1IGluc3RhbmNl
        b2Ygbnx8KGkrPSIvIixpKz11LmdlbmVyYXRlKHQpKX1yZXR1cm4iLyIhPT1p
        LmNoYXJBdCgwKSYmKGk9Ii8iK2kpLHQmJnQucXVlcnlQYXJhbXMmJihpKz10
        aGlzLmdlbmVyYXRlUXVlcnlTdHJpbmcodC5xdWVyeVBhcmFtcyxyLmhhbmRs
        ZXJzKSksaX0sZ2VuZXJhdGVRdWVyeVN0cmluZzpmdW5jdGlvbihlLHQpe2Zv
        cih2YXIgcj1bXSxuPVtdLGk9MDtpPHQubGVuZ3RoO2krKyl7dmFyIG89dFtp
        XS5xdWVyeVBhcmFtcztvJiZuLnB1c2guYXBwbHkobixvKX1mb3IodmFyIGEg
        aW4gZSlpZihlLmhhc093blByb3BlcnR5KGEpKXtpZigtMT09PW4uaW5kZXhP
        ZihhKSl0aHJvdydRdWVyeSBwYXJhbSAiJythKyciIGlzIG5vdCBzcGVjaWZp
        ZWQgYXMgYSB2YWxpZCBwYXJhbSBmb3IgdGhpcyByb3V0ZSc7dmFyIHM9ZVth
        XSx1PWVuY29kZVVSSUNvbXBvbmVudChhKTtzIT09ITAmJih1Kz0iPSIrZW5j
        b2RlVVJJQ29tcG9uZW50KHMpKSxyLnB1c2godSl9cmV0dXJuIDA9PT1yLmxl
        bmd0aD8iIjoiPyIrci5qb2luKCImIil9LHBhcnNlUXVlcnlTdHJpbmc6ZnVu
        Y3Rpb24oZSl7Zm9yKHZhciB0PWUuc3BsaXQoIiYiKSxyPXt9LG49MDtuPHQu
        bGVuZ3RoO24rKyl7dmFyIGk9dFtuXS5zcGxpdCgiPSIpLG89ZGVjb2RlVVJJ
        Q29tcG9uZW50KGlbMF0pLGE9aVsxXT9kZWNvZGVVUklDb21wb25lbnQoaVsx
        XSk6ITA7cltvXT1hfXJldHVybiByfSxyZWNvZ25pemU6ZnVuY3Rpb24oZSl7
        dmFyIHQscixuLGksbz1bdGhpcy5yb290U3RhdGVdLGM9e307aWYoaT1lLmlu
        ZGV4T2YoIj8iKSwtMSE9PWkpe3ZhciBsPWUuc3Vic3RyKGkrMSxlLmxlbmd0
        aCk7ZT1lLnN1YnN0cigwLGkpLGM9dGhpcy5wYXJzZVF1ZXJ5U3RyaW5nKGwp
        fWZvcigiLyIhPT1lLmNoYXJBdCgwKSYmKGU9Ii8iK2UpLHQ9ZS5sZW5ndGgs
        dD4xJiYiLyI9PT1lLmNoYXJBdCh0LTEpJiYoZT1lLnN1YnN0cigwLHQtMSkp
        LHI9MCxuPWUubGVuZ3RoO24+ciYmKG89cyhvLGUuY2hhckF0KHIpKSxvLmxl
        bmd0aCk7cisrKTt2YXIgaD1bXTtmb3Iocj0wLG49by5sZW5ndGg7bj5yO3Ir
        KylvW3JdLmhhbmRsZXJzJiZoLnB1c2gob1tyXSk7bz1hKGgpO3ZhciBtPWhb
        MF07cmV0dXJuIG0mJm0uaGFuZGxlcnM/dShtLGUsYyk6dm9pZCAwfX0sbC5w
        cm90b3R5cGU9e3RvOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcy5kZWxlZ2F0
        ZTtpZihyJiZyLndpbGxBZGRSb3V0ZSYmKGU9ci53aWxsQWRkUm91dGUodGhp
        cy5tYXRjaGVyLnRhcmdldCxlKSksdGhpcy5tYXRjaGVyLmFkZCh0aGlzLnBh
        dGgsZSksdCl7aWYoMD09PXQubGVuZ3RoKXRocm93IG5ldyBFcnJvcigiWW91
        IG11c3QgaGF2ZSBhbiBhcmd1bWVudCBpbiB0aGUgZnVuY3Rpb24gcGFzc2Vk
        IHRvIGB0b2AiKTt0aGlzLm1hdGNoZXIuYWRkQ2hpbGQodGhpcy5wYXRoLGUs
        dCx0aGlzLmRlbGVnYXRlKX1yZXR1cm4gdGhpc30sd2l0aFF1ZXJ5UGFyYW1z
        OmZ1bmN0aW9uKCl7aWYoMD09PWFyZ3VtZW50cy5sZW5ndGgpdGhyb3cgbmV3
        IEVycm9yKCJ5b3UgbXVzdCBwcm92aWRlIGFyZ3VtZW50cyB0byB0aGUgd2l0
        aFF1ZXJ5UGFyYW1zIG1ldGhvZCIpO2Zvcih2YXIgZT0wO2U8YXJndW1lbnRz
        Lmxlbmd0aDtlKyspaWYoInN0cmluZyIhPXR5cGVvZiBhcmd1bWVudHNbZV0p
        dGhyb3cgbmV3IEVycm9yKCd5b3Ugc2hvdWxkIGNhbGwgd2l0aFF1ZXJ5UGFy
        YW1zIHdpdGggYSBsaXN0IG9mIHN0cmluZ3MsIGUuZy4gd2l0aFF1ZXJ5UGFy
        YW1zKCJmb28iLCAiYmFyIiknKTt2YXIgdD1bXS5zbGljZS5jYWxsKGFyZ3Vt
        ZW50cyk7dGhpcy5tYXRjaGVyLmFkZFF1ZXJ5UGFyYW1zKHRoaXMucGF0aCx0
        KX19LGgucHJvdG90eXBlPXthZGQ6ZnVuY3Rpb24oZSx0KXt0aGlzLnJvdXRl
        c1tlXT10fSxhZGRRdWVyeVBhcmFtczpmdW5jdGlvbihlLHQpe3RoaXMucXVl
        cnlQYXJhbXNbZV09dH0sYWRkQ2hpbGQ6ZnVuY3Rpb24oZSx0LHIsbil7dmFy
        IGk9bmV3IGgodCk7dGhpcy5jaGlsZHJlbltlXT1pO3ZhciBvPW0oZSxpLG4p
        O24mJm4uY29udGV4dEVudGVyZWQmJm4uY29udGV4dEVudGVyZWQodCxvKSxy
        KG8pfX0sdi5wcm90b3R5cGUubWFwPWZ1bmN0aW9uKGUsdCl7dmFyIHI9bmV3
        IGg7ZShtKCIiLHIsdGhpcy5kZWxlZ2F0ZSkpLHAoW10scixmdW5jdGlvbihl
        KXt0P3QodGhpcyxlKTp0aGlzLmFkZChlKX0sdGhpcyl9LHZ9KX0oKSxmdW5j
        dGlvbigpe2UoInJvdXRlciIsWyJyb3V0ZS1yZWNvZ25pemVyIiwicnN2cCJd
        LGZ1bmN0aW9uKGUsdCl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIHIoZSx0KXt0
        aGlzLnJvdXRlcj1lLHRoaXMucHJvbWlzZT10LHRoaXMuZGF0YT17fSx0aGlz
        LnJlc29sdmVkTW9kZWxzPXt9LHRoaXMucHJvdmlkZWRNb2RlbHM9e30sdGhp
        cy5wcm92aWRlZE1vZGVsc0FycmF5PVtdLHRoaXMuc2VxdWVuY2U9KytyLmN1
        cnJlbnRTZXF1ZW5jZSx0aGlzLnBhcmFtcz17fX1mdW5jdGlvbiBuKCl7dGhp
        cy5yZWNvZ25pemVyPW5ldyBlfWZ1bmN0aW9uIGkoZSxuKXtyZXR1cm4gbmV3
        IHIoZSx0LnJlamVjdChuKSl9ZnVuY3Rpb24gbyhlLHQscixuKXt2YXIgaSxv
        LHM9dC5sZW5ndGgsdT17fSxjPWUuY3VycmVudEhhbmRsZXJJbmZvc3x8W10s
        aD17fSxtPWUuY3VycmVudFBhcmFtc3x8e30sZj1lLmFjdGl2ZVRyYW5zaXRp
        b24scD17fTtmb3Iocj1qLmNhbGwociksbChoLG4pLGk9dC5sZW5ndGgtMTtp
        Pj0wO2ktLSl7dmFyIGQ9dFtpXSxiPWQuaGFuZGxlcix2PWNbaV0sRT0hMTtp
        Zih2JiZ2Lm5hbWU9PT1kLmhhbmRsZXJ8fChFPSEwKSxkLmlzRHluYW1pYylp
        ZihvPWEocixiLGYsITAsaCkpRT0hMCx1W2JdPW87ZWxzZXtwW2JdPXt9O2Zv
        cih2YXIgeSBpbiBkLnBhcmFtcylpZihkLnBhcmFtcy5oYXNPd25Qcm9wZXJ0
        eSh5KSl7dmFyIHc9ZC5wYXJhbXNbeV07bVt5XSE9PXcmJihFPSEwKSxwW2Jd
        W3ldPWhbeV09d319ZWxzZSBpZihkLmhhc093blByb3BlcnR5KCJuYW1lcyIp
        KWlmKHIubGVuZ3RoJiYoRT0hMCksbz1hKHIsYixmLGQubmFtZXNbMF0saCkp
        dVtiXT1vO2Vsc2V7dmFyIF89ZC5uYW1lcztwW2JdPXt9O2Zvcih2YXIgQz0w
        LE89Xy5sZW5ndGg7Tz5DOysrQyl7dmFyIEE9X1tDXTtwW2JdW0FdPWhbQV09
        aFtBXXx8bVtBXX19diYmIWcodi5xdWVyeVBhcmFtcyxkLnF1ZXJ5UGFyYW1z
        KSYmKEU9ITApLEUmJihzPWkpfWlmKHIubGVuZ3RoPjApdGhyb3cgbmV3IEVy
        cm9yKCJNb3JlIGNvbnRleHQgb2JqZWN0cyB3ZXJlIHBhc3NlZCB0aGFuIHRo
        ZXJlIGFyZSBkeW5hbWljIHNlZ21lbnRzIGZvciB0aGUgcm91dGU6ICIrdFt0
        Lmxlbmd0aC0xXS5oYW5kbGVyKTt2YXIgUD1jW3MtMV0seD1QJiZQLmhhbmRs
        ZXI7cmV0dXJue21hdGNoUG9pbnQ6cyxwcm92aWRlZE1vZGVsczp1LHBhcmFt
        czpoLGhhbmRsZXJQYXJhbXM6cCxwaXZvdEhhbmRsZXI6eH19ZnVuY3Rpb24g
        YShlLHQscixuLGkpe2lmKGUubGVuZ3RoJiZuKXt2YXIgbz1lLnBvcCgpO2lm
        KCFzKG8pKXJldHVybiBvO2lbbl09by50b1N0cmluZygpfWVsc2UgaWYocily
        ZXR1cm4gci5yZXNvbHZlZE1vZGVsc1t0XXx8biYmci5wcm92aWRlZE1vZGVs
        c1t0XX1mdW5jdGlvbiBzKGUpe3JldHVybiJzdHJpbmciPT10eXBlb2YgZXx8
        ZSBpbnN0YW5jZW9mIFN0cmluZ3x8IWlzTmFOKGUpfWZ1bmN0aW9uIHUoZSx0
        KXtmb3IodmFyIHI9ZS5yZWNvZ25pemVyLmhhbmRsZXJzRm9yKHQpLG49W10s
        aT0wO2k8ci5sZW5ndGg7aSsrKW4ucHVzaC5hcHBseShuLHJbaV0ucXVlcnlQ
        YXJhbXN8fFtdKTtyZXR1cm4gbn1mdW5jdGlvbiBjKGUsdCxyLG4pe3ZhciBp
        LGEscyx1LGMsZj1lLnJlY29nbml6ZXIuaGFuZGxlcnNGb3IodCkscD17fSxk
        PW0oZSxmLG4pLGI9byhlLGQscikubWF0Y2hQb2ludDtmb3IocC5xdWVyeVBh
        cmFtcz17fSxjPTA7YzxmLmxlbmd0aDtjKyspYT1mW2NdLHM9ZS5nZXRIYW5k
        bGVyKGEuaGFuZGxlciksdT1hLm5hbWVzLHUubGVuZ3RoJiYoaT1jPj1iP3Iu
        c2hpZnQoKTpzLmNvbnRleHQsbChwLE0ocyxpLHUpKSksbiE9PSExJiYoaChw
        LnF1ZXJ5UGFyYW1zLGUuY3VycmVudFF1ZXJ5UGFyYW1zLGEucXVlcnlQYXJh
        bXMpLGgocC5xdWVyeVBhcmFtcyxuLGEucXVlcnlQYXJhbXMpKTtyZXR1cm4g
        ZyhwLnF1ZXJ5UGFyYW1zLHt9KSYmZGVsZXRlIHAucXVlcnlQYXJhbXMscH1m
        dW5jdGlvbiBsKGUsdCl7Zm9yKHZhciByIGluIHQpdC5oYXNPd25Qcm9wZXJ0
        eShyKSYmKGVbcl09dFtyXSl9ZnVuY3Rpb24gaChlLHQscil7aWYodCYmcilm
        b3IodmFyIG49MDtuPHIubGVuZ3RoO24rKyl7dmFyIGksbz1yW25dO3QuaGFz
        T3duUHJvcGVydHkobykmJihpPXRbb10sbnVsbD09PWl8fGk9PT0hMXx8InVu
        ZGVmaW5lZCI9PXR5cGVvZiBpP2RlbGV0ZSBlW29dOmVbb109dFtvXSl9fWZ1
        bmN0aW9uIG0oZSx0LHIpe2Zvcih2YXIgbj1bXSxpPTA7aTx0Lmxlbmd0aDtp
        Kyspe3ZhciBvPXRbaV0sYT17aGFuZGxlcjpvLmhhbmRsZXIsbmFtZXM6by5u
        YW1lcyxjb250ZXh0Om8uY29udGV4dCxpc0R5bmFtaWM6by5pc0R5bmFtaWN9
        LHM9e307ciE9PSExJiYoaChzLGUuY3VycmVudFF1ZXJ5UGFyYW1zLG8ucXVl
        cnlQYXJhbXMpLGgocyxyLG8ucXVlcnlQYXJhbXMpKSxvLnF1ZXJ5UGFyYW1z
        JiZvLnF1ZXJ5UGFyYW1zLmxlbmd0aD4wJiYoYS5xdWVyeVBhcmFtcz1zKSxu
        LnB1c2goYSl9cmV0dXJuIG59ZnVuY3Rpb24gZihlLHQscil7dmFyIG49ZS5j
        dXJyZW50SGFuZGxlckluZm9zLGk9bltuLmxlbmd0aC0xXSxvPWkubmFtZTty
        ZXR1cm4gUihlLCJBdHRlbXB0aW5nIHF1ZXJ5IHBhcmFtIHRyYW5zaXRpb24i
        KSxwKGUsW28sdF0scil9ZnVuY3Rpb24gcChlLHQscil7dmFyIG49Tyh0KSxp
        PW5bMF0sbz1uWzFdLGE9ZS5yZWNvZ25pemVyLmhhbmRsZXJzRm9yKGlbMF0p
        LHM9bShlLGEsbyk7cmV0dXJuIFIoZSwiQXR0ZW1wdGluZyB0cmFuc2l0aW9u
        IHRvICIraVswXSksUChlLHMsai5jYWxsKGksMSksZS5jdXJyZW50UGFyYW1z
        LG8sbnVsbCxyKX1mdW5jdGlvbiBkKGUsdCxyKXt2YXIgbyxhLHM9ZS5yZWNv
        Z25pemVyLnJlY29nbml6ZSh0KSx1PShlLmN1cnJlbnRIYW5kbGVySW5mb3Ms
        e30pO2lmKFIoZSwiQXR0ZW1wdGluZyBVUkwgdHJhbnNpdGlvbiB0byAiK3Qp
        LHMpZm9yKG89MCxhPXMubGVuZ3RoO2E+bzsrK28paWYoZS5nZXRIYW5kbGVy
        KHNbb10uaGFuZGxlcikuaW5hY2Nlc3NpYmx5QnlVUkwpe3M9bnVsbDticmVh
        a31pZighcylyZXR1cm4gaShlLG5ldyBuLlVucmVjb2duaXplZFVSTEVycm9y
        KHQpKTtmb3Iobz0wLGE9cy5sZW5ndGg7YT5vO28rKylsKHUsc1tvXS5xdWVy
        eVBhcmFtcyk7cmV0dXJuIFAoZSxzLFtdLHt9LHUsbnVsbCxyKX1mdW5jdGlv
        biBiKGUsdCl7dmFyIHI9ZS5yb3V0ZXIsbj15KHIuY3VycmVudEhhbmRsZXJJ
        bmZvc3x8W10sdCk7ci50YXJnZXRIYW5kbGVySW5mb3M9dCxFKG4uZXhpdGVk
        LGZ1bmN0aW9uKGUpe3ZhciB0PWUuaGFuZGxlcjtkZWxldGUgdC5jb250ZXh0
        LHQuZXhpdCYmdC5leGl0KCl9KTt2YXIgaT1uLnVuY2hhbmdlZC5zbGljZSgp
        O3IuY3VycmVudEhhbmRsZXJJbmZvcz1pLEUobi51cGRhdGVkQ29udGV4dCxm
        dW5jdGlvbih0KXt2KGUsaSx0LCExKX0pLEUobi5lbnRlcmVkLGZ1bmN0aW9u
        KHQpe3YoZSxpLHQsITApfSl9ZnVuY3Rpb24gdihlLHQscixpKXt2YXIgbz1y
        LmhhbmRsZXIsYT1yLmNvbnRleHQ7dHJ5e2kmJm8uZW50ZXImJm8uZW50ZXIo
        KSxOKGUpLF8obyxhKSxDKG8sci5xdWVyeVBhcmFtcyksby5zZXR1cCYmby5z
        ZXR1cChhLHIucXVlcnlQYXJhbXMpLE4oZSl9Y2F0Y2gocyl7dGhyb3cgcyBp
        bnN0YW5jZW9mIG4uVHJhbnNpdGlvbkFib3J0ZWR8fGUudHJpZ2dlcighMCwi
        ZXJyb3IiLHMsZSxvKSxzfXQucHVzaChyKX1mdW5jdGlvbiBFKGUsdCl7Zm9y
        KHZhciByPTAsbj1lLmxlbmd0aDtuPnI7cisrKXQoZVtyXSl9ZnVuY3Rpb24g
        ZyhlLHQpe2U9ZXx8e30sdD10fHx7fTt2YXIgcixuPVtdO2ZvcihyIGluIGUp
        aWYoZS5oYXNPd25Qcm9wZXJ0eShyKSl7aWYodFtyXSE9PWVbcl0pcmV0dXJu
        ITE7bi5wdXNoKHIpfWZvcihyIGluIHQpaWYodC5oYXNPd25Qcm9wZXJ0eShy
        KSYmIX5uLmluZGV4T2YocikpcmV0dXJuITE7cmV0dXJuITB9ZnVuY3Rpb24g
        eShlLHQpe3ZhciByLG4saSxvLGEscz17dXBkYXRlZENvbnRleHQ6W10sZXhp
        dGVkOltdLGVudGVyZWQ6W10sdW5jaGFuZ2VkOltdfTtmb3Iobz0wLGE9dC5s
        ZW5ndGg7YT5vO28rKyl7dmFyIHU9ZVtvXSxjPXRbb107dSYmdS5oYW5kbGVy
        PT09Yy5oYW5kbGVyP2codS5xdWVyeVBhcmFtcyxjLnF1ZXJ5UGFyYW1zKXx8
        KGk9ITApOnI9ITAscj8ocy5lbnRlcmVkLnB1c2goYyksdSYmcy5leGl0ZWQu
        dW5zaGlmdCh1KSk6bnx8dS5jb250ZXh0IT09Yy5jb250ZXh0fHxpPyhuPSEw
        LHMudXBkYXRlZENvbnRleHQucHVzaChjKSk6cy51bmNoYW5nZWQucHVzaCh1
        KX1mb3Iobz10Lmxlbmd0aCxhPWUubGVuZ3RoO2E+bztvKyspcy5leGl0ZWQu
        dW5zaGlmdChlW29dKTtyZXR1cm4gc31mdW5jdGlvbiB3KGUsdCxyLG4pe2lm
        KGUudHJpZ2dlckV2ZW50KXJldHVybiBlLnRyaWdnZXJFdmVudCh0LHIsbiks
        dm9pZCAwO3ZhciBpPW4uc2hpZnQoKTtpZighdCl7aWYocilyZXR1cm47dGhy
        b3cgbmV3IEVycm9yKCJDb3VsZCBub3QgdHJpZ2dlciBldmVudCAnIitpKyIn
        LiBUaGVyZSBhcmUgbm8gYWN0aXZlIGhhbmRsZXJzIil9Zm9yKHZhciBvPSEx
        LGE9dC5sZW5ndGgtMTthPj0wO2EtLSl7dmFyIHM9dFthXSx1PXMuaGFuZGxl
        cjtpZih1LmV2ZW50cyYmdS5ldmVudHNbaV0pe2lmKHUuZXZlbnRzW2ldLmFw
        cGx5KHUsbikhPT0hMClyZXR1cm47bz0hMH19aWYoIW8mJiFyKXRocm93IG5l
        dyBFcnJvcigiTm90aGluZyBoYW5kbGVkIHRoZSBldmVudCAnIitpKyInLiIp
        fWZ1bmN0aW9uIF8oZSx0KXtlLmNvbnRleHQ9dCxlLmNvbnRleHREaWRDaGFu
        Z2UmJmUuY29udGV4dERpZENoYW5nZSgpfWZ1bmN0aW9uIEMoZSx0KXtlLnF1
        ZXJ5UGFyYW1zPXQsZS5xdWVyeVBhcmFtc0RpZENoYW5nZSYmZS5xdWVyeVBh
        cmFtc0RpZENoYW5nZSgpfWZ1bmN0aW9uIE8oZSl7dmFyIHQscixuPWUmJmUu
        bGVuZ3RoO3JldHVybiBuJiZuPjAmJmVbbi0xXSYmZVtuLTFdLmhhc093blBy
        b3BlcnR5KCJxdWVyeVBhcmFtcyIpPyhyPWVbbi0xXS5xdWVyeVBhcmFtcyx0
        PWouY2FsbChlLDAsbi0xKSxbdCxyXSk6W2UsbnVsbF19ZnVuY3Rpb24gQShl
        LHQscil7Zm9yKHZhciBuPXgoZSx0KSxpPTA7aTxuLmxlbmd0aDsrK2kpe3Zh
        ciBvPW5baV07by5jb250ZXh0PXIucHJvdmlkZWRNb2RlbHNbby5uYW1lXX12
        YXIgYT17cm91dGVyOmUsaXNBYm9ydGVkOiExfTtiKGEsbil9ZnVuY3Rpb24g
        UChlLG4saSxhLHMsdSxjKXtmdW5jdGlvbiBsKCl7Tih2KTt0cnl7UihlLHYu
        c2VxdWVuY2UsIlZhbGlkYXRpb24gc3VjY2VlZGVkLCBmaW5hbGl6aW5nIHRy
        YW5zaXRpb247IiksZCYmZC5sZW5ndGgmJmUucmVjb2duaXplci5oYXNSb3V0
        ZShkW2QubGVuZ3RoLTFdLm5hbWUpJiZkLmxlbmd0aD09PW0ubWF0Y2hQb2lu
        dHx8VCh2LEUpLHcoZSxlLmN1cnJlbnRIYW5kbGVySW5mb3MsITAsWyJkaWRU
        cmFuc2l0aW9uIl0pLGUuZGlkVHJhbnNpdGlvbiYmZS5kaWRUcmFuc2l0aW9u
        KEUpLFIoZSx2LnNlcXVlbmNlLCJUUkFOU0lUSU9OIENPTVBMRVRFLiIpLHYu
        aXNBY3RpdmU9ITEsYi5yZXNvbHZlKEVbRS5sZW5ndGgtMV0uaGFuZGxlcil9
        Y2F0Y2godCl7Yi5yZWplY3QodCl9di5pc0Fib3J0ZWR8fChlLmFjdGl2ZVRy
        YW5zaXRpb249bnVsbCl9ZnVuY3Rpb24gaChlKXtiLnJlamVjdChlKX12YXIg
        bT1vKGUsbixpLGEscyksZj1uW24ubGVuZ3RoLTFdLmhhbmRsZXIscD0hMSxk
        PWUuY3VycmVudEhhbmRsZXJJbmZvcztpZihjKXJldHVybiBBKGUsbixtKTtp
        ZihlLmFjdGl2ZVRyYW5zaXRpb24pe2lmKFYoZS5hY3RpdmVUcmFuc2l0aW9u
        LGYsaSxzKSlyZXR1cm4gZS5hY3RpdmVUcmFuc2l0aW9uO2UuYWN0aXZlVHJh
        bnNpdGlvbi5hYm9ydCgpLHA9ITB9dmFyIGI9dC5kZWZlcigpLHY9bmV3IHIo
        ZSxiLnByb21pc2UpO3YudGFyZ2V0TmFtZT1mLHYucHJvdmlkZWRNb2RlbHM9
        bS5wcm92aWRlZE1vZGVscyx2LnByb3ZpZGVkTW9kZWxzQXJyYXk9aSx2LnBh
        cmFtcz1tLnBhcmFtcyx2LmRhdGE9dXx8e30sdi5xdWVyeVBhcmFtcz1zLHYu
        cGl2b3RIYW5kbGVyPW0ucGl2b3RIYW5kbGVyLGUuYWN0aXZlVHJhbnNpdGlv
        bj12O3ZhciBFPXgoZSxuKTtyZXR1cm4gdi5oYW5kbGVySW5mb3M9RSxwfHx3
        KGUsZCwhMCxbIndpbGxUcmFuc2l0aW9uIix2XSksUihlLHYuc2VxdWVuY2Us
        IkJlZ2lubmluZyB2YWxpZGF0aW9uIGZvciB0cmFuc2l0aW9uIHRvICIrdi50
        YXJnZXROYW1lKSxTKHYsbS5tYXRjaFBvaW50LG0uaGFuZGxlclBhcmFtcyku
        dGhlbihsLGgpLHZ9ZnVuY3Rpb24geChlLHQpe2Zvcih2YXIgcj1bXSxuPTAs
        aT10Lmxlbmd0aDtpPm47KytuKXt2YXIgbz10W25dLGE9by5pc0R5bmFtaWN8
        fG8ubmFtZXMmJm8ubmFtZXMubGVuZ3RoLHM9e2lzRHluYW1pYzohIWEsbmFt
        ZTpvLmhhbmRsZXIsaGFuZGxlcjplLmdldEhhbmRsZXIoby5oYW5kbGVyKX07
        by5xdWVyeVBhcmFtcyYmKHMucXVlcnlQYXJhbXM9by5xdWVyeVBhcmFtcyks
        ci5wdXNoKHMpfXJldHVybiByfWZ1bmN0aW9uIFYoZSx0LHIsbil7aWYoZS50
        YXJnZXROYW1lIT09dClyZXR1cm4hMTt2YXIgaT1lLnByb3ZpZGVkTW9kZWxz
        QXJyYXk7aWYoaS5sZW5ndGghPT1yLmxlbmd0aClyZXR1cm4hMTtmb3IodmFy
        IG89MCxhPWkubGVuZ3RoO2E+bzsrK28paWYoaVtvXSE9PXJbb10pcmV0dXJu
        ITE7cmV0dXJuIGcoZS5xdWVyeVBhcmFtcyxuKT8hMDohMX1mdW5jdGlvbiBU
        KGUsdCl7dmFyIHIsbj1lLnJvdXRlcixpPShlLnNlcXVlbmNlLHRbdC5sZW5n
        dGgtMV0ubmFtZSksbz1lLnVybE1ldGhvZCxhPVtdLHU9ZS5wcm92aWRlZE1v
        ZGVsc0FycmF5LnNsaWNlKCk7Zm9yKHI9dC5sZW5ndGgtMTtyPj0wOy0tcil7
        dmFyIGg9dFtyXTtpZihoLmlzRHluYW1pYyl7dmFyIG09dS5wb3AoKTthLnVu
        c2hpZnQocyhtKT9tLnRvU3RyaW5nKCk6aC5jb250ZXh0KX1oLmhhbmRsZXIu
        aW5hY2Nlc3NpYmx5QnlVUkwmJihvPW51bGwpfXZhciBmPXt9O2ZvcihyPXQu
        bGVuZ3RoLTE7cj49MDstLXIpbChmLHRbcl0ucXVlcnlQYXJhbXMpO24uY3Vy
        cmVudFF1ZXJ5UGFyYW1zPWY7dmFyIHA9YyhuLGksYSxlLnF1ZXJ5UGFyYW1z
        KTtpZihuLmN1cnJlbnRQYXJhbXM9cCxvKXt2YXIgZD1uLnJlY29nbml6ZXIu
        Z2VuZXJhdGUoaSxwKTsicmVwbGFjZSI9PT1vP24ucmVwbGFjZVVSTChkKTpu
        LnVwZGF0ZVVSTChkKX1iKGUsdCl9ZnVuY3Rpb24gUyhlLGksbyl7ZnVuY3Rp
        b24gYShyKXtyZXR1cm4gZS5pc0Fib3J0ZWQ/KFIoZS5yb3V0ZXIsZS5zZXF1
        ZW5jZSwiZGV0ZWN0ZWQgYWJvcnQuIiksdC5yZWplY3QobmV3IG4uVHJhbnNp
        dGlvbkFib3J0ZWQpKTpyfWZ1bmN0aW9uIHMocil7cmV0dXJuIHIgaW5zdGFu
        Y2VvZiBuLlRyYW5zaXRpb25BYm9ydGVkP3QucmVqZWN0KHIpOihlLmFib3J0
        KCksUihwLEUsdisiOiBoYW5kbGluZyBlcnJvcjogIityKSxlLnRyaWdnZXIo
        ITAsImVycm9yIixyLGUsZC5oYW5kbGVyKSx0LnJlamVjdChyKSl9ZnVuY3Rp
        b24gdSgpe1IocCxFLHYrIjogY2FsbGluZyBiZWZvcmVNb2RlbCBob29rIik7
        dmFyIHQ7dD1kLnF1ZXJ5UGFyYW1zP1tkLnF1ZXJ5UGFyYW1zLGVdOltlXTt2
        YXIgbj1iLmJlZm9yZU1vZGVsJiZiLmJlZm9yZU1vZGVsLmFwcGx5KGIsdCk7
        cmV0dXJuIG4gaW5zdGFuY2VvZiByP251bGw6bn1mdW5jdGlvbiBjKCl7Uihw
        LEUsdisiOiByZXNvbHZpbmcgbW9kZWwiKTt2YXIgdD1EKGQsZSxvW3ZdLGY+
        PWkpO3JldHVybiB0IGluc3RhbmNlb2Ygcj9udWxsOnR9ZnVuY3Rpb24gbCh0
        KXtSKHAsRSx2KyI6IGNhbGxpbmcgYWZ0ZXJNb2RlbCBob29rIiksZS5yZXNv
        bHZlZE1vZGVsc1tkLm5hbWVdPXQ7dmFyIG47bj1kLnF1ZXJ5UGFyYW1zP1t0
        LGQucXVlcnlQYXJhbXMsZV06W3QsZV07dmFyIGk9Yi5hZnRlck1vZGVsJiZi
        LmFmdGVyTW9kZWwuYXBwbHkoYixuKTtyZXR1cm4gaSBpbnN0YW5jZW9mIHI/
        bnVsbDppfWZ1bmN0aW9uIGgoKXtyZXR1cm4gUihwLEUsdisiOiB2YWxpZGF0
        aW9uIHN1Y2NlZWRlZCwgcHJvY2VlZGluZyIpLGQuY29udGV4dD1lLnJlc29s
        dmVkTW9kZWxzW2QubmFtZV0sZS5yZXNvbHZlSW5kZXgrKyxTKGUsaSxvKX12
        YXIgbT1lLmhhbmRsZXJJbmZvcyxmPWUucmVzb2x2ZUluZGV4O2lmKGY9PT1t
        Lmxlbmd0aClyZXR1cm4gdC5yZXNvbHZlKGUucmVzb2x2ZWRNb2RlbHMpO3Zh
        ciBwPWUucm91dGVyLGQ9bVtmXSxiPWQuaGFuZGxlcix2PWQubmFtZSxFPWUu
        c2VxdWVuY2U7cmV0dXJuIGk+Zj8oUihwLEUsdisiOiB1c2luZyBjb250ZXh0
        IGZyb20gYWxyZWFkeS1hY3RpdmUgaGFuZGxlciIpLGUucmVzb2x2ZWRNb2Rl
        bHNbZC5uYW1lXT1lLnByb3ZpZGVkTW9kZWxzW2QubmFtZV18fGQuaGFuZGxl
        ci5jb250ZXh0LGgoKSk6KGUudHJpZ2dlcighMCwid2lsbFJlc29sdmVNb2Rl
        bCIsZSxiKSx0LnJlc29sdmUoKS50aGVuKGEpLnRoZW4odSkudGhlbihhKS50
        aGVuKGMpLnRoZW4oYSkudGhlbihsKS50aGVuKGEpLnRoZW4obnVsbCxzKS50
        aGVuKGgpKX1mdW5jdGlvbiBOKGUpe2lmKGUuaXNBYm9ydGVkKXRocm93IFIo
        ZS5yb3V0ZXIsZS5zZXF1ZW5jZSwiZGV0ZWN0ZWQgYWJvcnQuIiksbmV3IG4u
        VHJhbnNpdGlvbkFib3J0ZWR9ZnVuY3Rpb24gRChlLHQscixuKXt2YXIgaSxv
        PWUuaGFuZGxlcixhPWUubmFtZTtpZighbiYmby5oYXNPd25Qcm9wZXJ0eSgi
        Y29udGV4dCIpKXJldHVybiBvLmNvbnRleHQ7aWYodC5wcm92aWRlZE1vZGVs
        cy5oYXNPd25Qcm9wZXJ0eShhKSl7dmFyIHM9dC5wcm92aWRlZE1vZGVsc1th
        XTtyZXR1cm4iZnVuY3Rpb24iPT10eXBlb2Ygcz9zKCk6c31yZXR1cm4gaT1l
        LnF1ZXJ5UGFyYW1zP1tyfHx7fSxlLnF1ZXJ5UGFyYW1zLHRdOltyfHx7fSx0
        LGUucXVlcnlQYXJhbXNdLG8ubW9kZWwmJm8ubW9kZWwuYXBwbHkobyxpKX1m
        dW5jdGlvbiBSKGUsdCxyKXtlLmxvZyYmKDM9PT1hcmd1bWVudHMubGVuZ3Ro
        P2UubG9nKCJUcmFuc2l0aW9uICMiK3QrIjogIityKToocj10LGUubG9nKHIp
        KSl9ZnVuY3Rpb24gSShlLHQscil7dmFyIG49dFswXXx8Ii8iO3JldHVybiAx
        PT09dC5sZW5ndGgmJnRbMF0uaGFzT3duUHJvcGVydHkoInF1ZXJ5UGFyYW1z
        Iik/ZihlLHRbMF0scik6Ii8iPT09bi5jaGFyQXQoMCk/ZChlLG4scik6cChl
        LGouY2FsbCh0KSxyKX1mdW5jdGlvbiBNKGUsdCxyKXt2YXIgbj17fTtpZihz
        KHQpKXJldHVybiBuW3JbMF1dPXQsbjtpZihlLnNlcmlhbGl6ZSlyZXR1cm4g
        ZS5zZXJpYWxpemUodCxyKTtpZigxPT09ci5sZW5ndGgpe3ZhciBpPXJbMF07
        cmV0dXJuIG5baV09L19pZCQvLnRlc3QoaSk/dC5pZDp0LG59fXZhciBqPUFy
        cmF5LnByb3RvdHlwZS5zbGljZTtyZXR1cm4gci5jdXJyZW50U2VxdWVuY2U9
        MCxyLnByb3RvdHlwZT17dGFyZ2V0TmFtZTpudWxsLHVybE1ldGhvZDoidXBk
        YXRlIixwcm92aWRlZE1vZGVsczpudWxsLHJlc29sdmVkTW9kZWxzOm51bGws
        cGFyYW1zOm51bGwscGl2b3RIYW5kbGVyOm51bGwscmVzb2x2ZUluZGV4OjAs
        aGFuZGxlckluZm9zOm51bGwsaXNBY3RpdmU6ITAscHJvbWlzZTpudWxsLGRh
        dGE6bnVsbCx0aGVuOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMucHJvbWlz
        ZS50aGVuKGUsdCl9LGFib3J0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXNB
        Ym9ydGVkP3RoaXM6KFIodGhpcy5yb3V0ZXIsdGhpcy5zZXF1ZW5jZSx0aGlz
        LnRhcmdldE5hbWUrIjogdHJhbnNpdGlvbiB3YXMgYWJvcnRlZCIpLHRoaXMu
        aXNBYm9ydGVkPSEwLHRoaXMuaXNBY3RpdmU9ITEsdGhpcy5yb3V0ZXIuYWN0
        aXZlVHJhbnNpdGlvbj1udWxsLHRoaXMpfSxyZXRyeTpmdW5jdGlvbigpe3Ro
        aXMuYWJvcnQoKTt2YXIgZT10aGlzLnJvdXRlci5yZWNvZ25pemVyLmhhbmRs
        ZXJzRm9yKHRoaXMudGFyZ2V0TmFtZSksdD1tKHRoaXMucm91dGVyLGUsdGhp
        cy5xdWVyeVBhcmFtcykscj1QKHRoaXMucm91dGVyLHQsdGhpcy5wcm92aWRl
        ZE1vZGVsc0FycmF5LHRoaXMucGFyYW1zLHRoaXMucXVlcnlQYXJhbXMsdGhp
        cy5kYXRhKTtyZXR1cm4gcn0sbWV0aG9kOmZ1bmN0aW9uKGUpe3JldHVybiB0
        aGlzLnVybE1ldGhvZD1lLHRoaXN9LHRyaWdnZXI6ZnVuY3Rpb24oZSl7dmFy
        IHQ9ai5jYWxsKGFyZ3VtZW50cyk7ImJvb2xlYW4iPT10eXBlb2YgZT90LnNo
        aWZ0KCk6ZT0hMSx3KHRoaXMucm91dGVyLHRoaXMuaGFuZGxlckluZm9zLnNs
        aWNlKDAsdGhpcy5yZXNvbHZlSW5kZXgrMSksZSx0KX0sdG9TdHJpbmc6ZnVu
        Y3Rpb24oKXtyZXR1cm4iVHJhbnNpdGlvbiAoc2VxdWVuY2UgIit0aGlzLnNl
        cXVlbmNlKyIpIn19LG4uVHJhbnNpdGlvbj1yLG4uVW5yZWNvZ25pemVkVVJM
        RXJyb3I9ZnVuY3Rpb24oZSl7dGhpcy5tZXNzYWdlPWV8fCJVbnJlY29nbml6
        ZWRVUkxFcnJvciIsdGhpcy5uYW1lPSJVbnJlY29nbml6ZWRVUkxFcnJvciJ9
        LG4uVHJhbnNpdGlvbkFib3J0ZWQ9ZnVuY3Rpb24oZSl7dGhpcy5tZXNzYWdl
        PWV8fCJUcmFuc2l0aW9uQWJvcnRlZCIsdGhpcy5uYW1lPSJUcmFuc2l0aW9u
        QWJvcnRlZCJ9LG4ucHJvdG90eXBlPXttYXA6ZnVuY3Rpb24oZSl7dGhpcy5y
        ZWNvZ25pemVyLmRlbGVnYXRlPXRoaXMuZGVsZWdhdGUsdGhpcy5yZWNvZ25p
        emVyLm1hcChlLGZ1bmN0aW9uKGUsdCl7dmFyIHI9dFt0Lmxlbmd0aC0xXS5o
        YW5kbGVyLG49W3Qse2FzOnJ9XTtlLmFkZC5hcHBseShlLG4pfSl9LGhhc1Jv
        dXRlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnJlY29nbml6ZXIuaGFzUm91
        dGUoZSl9LHJlc2V0OmZ1bmN0aW9uKCl7RSh0aGlzLmN1cnJlbnRIYW5kbGVy
        SW5mb3N8fFtdLGZ1bmN0aW9uKGUpe3ZhciB0PWUuaGFuZGxlcjt0LmV4aXQm
        JnQuZXhpdCgpfSksdGhpcy5jdXJyZW50SGFuZGxlckluZm9zPW51bGwsdGhp
        cy50YXJnZXRIYW5kbGVySW5mb3M9bnVsbH0sYWN0aXZlVHJhbnNpdGlvbjpu
        dWxsLGhhbmRsZVVSTDpmdW5jdGlvbihlKXt2YXIgdD1qLmNhbGwoYXJndW1l
        bnRzKTtyZXR1cm4iLyIhPT1lLmNoYXJBdCgwKSYmKHRbMF09Ii8iK2UpLEko
        dGhpcyx0KS5tZXRob2QobnVsbCl9LHVwZGF0ZVVSTDpmdW5jdGlvbigpe3Ro
        cm93IG5ldyBFcnJvcigidXBkYXRlVVJMIGlzIG5vdCBpbXBsZW1lbnRlZCIp
        fSxyZXBsYWNlVVJMOmZ1bmN0aW9uKGUpe3RoaXMudXBkYXRlVVJMKGUpfSx0
        cmFuc2l0aW9uVG86ZnVuY3Rpb24oKXtyZXR1cm4gSSh0aGlzLGFyZ3VtZW50
        cyl9LGludGVybWVkaWF0ZVRyYW5zaXRpb25UbzpmdW5jdGlvbigpe0kodGhp
        cyxhcmd1bWVudHMsITApfSxyZXBsYWNlV2l0aDpmdW5jdGlvbigpe3JldHVy
        biBJKHRoaXMsYXJndW1lbnRzKS5tZXRob2QoInJlcGxhY2UiKX0scGFyYW1z
        Rm9ySGFuZGxlcjpmdW5jdGlvbihlKXt2YXIgdD1PKGouY2FsbChhcmd1bWVu
        dHMsMSkpO3JldHVybiBjKHRoaXMsZSx0WzBdLHRbMV0pfSxxdWVyeVBhcmFt
        c0ZvckhhbmRsZXI6ZnVuY3Rpb24oZSl7cmV0dXJuIHUodGhpcyxlKX0sZ2Vu
        ZXJhdGU6ZnVuY3Rpb24oZSl7dmFyIHQ9TyhqLmNhbGwoYXJndW1lbnRzLDEp
        KSxyPXRbMF0sbj10WzFdLGk9Yyh0aGlzLGUscixuKSxvPXUodGhpcyxlKSxh
        PVtdO2Zvcih2YXIgcyBpbiBuKW4uaGFzT3duUHJvcGVydHkocykmJiF+by5p
        bmRleE9mKHMpJiZhLnB1c2gocyk7aWYoYS5sZW5ndGg+MCl7dmFyIGw9Illv
        dSBzdXBwbGllZCB0aGUgcGFyYW1zICI7dGhyb3cgbCs9YS5tYXAoZnVuY3Rp
        b24oZSl7cmV0dXJuJyInK2UrIj0iK25bZV0rJyInfSkuam9pbigiIGFuZCAi
        KSxsKz0nIHdoaWNoIGFyZSBub3QgdmFsaWQgZm9yIHRoZSAiJytlKyciIGhh
        bmRsZXIgb3IgaXRzIHBhcmVudHMnLG5ldyBFcnJvcihsKX1yZXR1cm4gdGhp
        cy5yZWNvZ25pemVyLmdlbmVyYXRlKGUsaSl9LGlzQWN0aXZlOmZ1bmN0aW9u
        KGUpe3ZhciB0LHIsbj1PKGouY2FsbChhcmd1bWVudHMsMSkpLGk9blswXSxv
        PW5bMV0sYT17fSx1PXt9LGM9dGhpcy50YXJnZXRIYW5kbGVySW5mb3MsbT0h
        MTtpZighYylyZXR1cm4hMTtmb3IodmFyIGY9dGhpcy5yZWNvZ25pemVyLmhh
        bmRsZXJzRm9yKGNbYy5sZW5ndGgtMV0ubmFtZSkscD1jLmxlbmd0aC0xO3A+
        PTA7cC0tKWlmKHI9Y1twXSxyLm5hbWU9PT1lJiYobT0hMCksbSl7dmFyIGQ9
        ZltwXTtpZihsKGEsci5xdWVyeVBhcmFtcyksbyE9PSExJiYobCh1LHIucXVl
        cnlQYXJhbXMpLGgodSxvLGQucXVlcnlQYXJhbXMpKSxyLmlzRHluYW1pYyYm
        aS5sZW5ndGg+MClpZih0PWkucG9wKCkscyh0KSl7dmFyIGI9ZC5uYW1lc1sw
        XTtpZigiIit0IT09dGhpcy5jdXJyZW50UGFyYW1zW2JdKXJldHVybiExfWVs
        c2UgaWYoci5jb250ZXh0IT09dClyZXR1cm4hMX1yZXR1cm4gMD09PWkubGVu
        Z3RoJiZtJiZnKGEsdSl9LHRyaWdnZXI6ZnVuY3Rpb24oKXt2YXIgZT1qLmNh
        bGwoYXJndW1lbnRzKTt3KHRoaXMsdGhpcy5jdXJyZW50SGFuZGxlckluZm9z
        LCExLGUpfSxsb2c6bnVsbH0sbn0pfSgpLGZ1bmN0aW9uKCl7ZnVuY3Rpb24g
        ZShlKXt0aGlzLnBhcmVudD1lLHRoaXMubWF0Y2hlcz1bXX1lLnByb3RvdHlw
        ZT17cmVzb3VyY2U6ZnVuY3Rpb24odCxyLG4pe2lmKDI9PT1hcmd1bWVudHMu
        bGVuZ3RoJiYiZnVuY3Rpb24iPT10eXBlb2YgciYmKG49cixyPXt9KSwxPT09
        YXJndW1lbnRzLmxlbmd0aCYmKHI9e30pLCJzdHJpbmciIT10eXBlb2Ygci5w
        YXRoJiYoci5wYXRoPSIvIit0KSxuKXt2YXIgaT1uZXcgZSh0KTtpLnJvdXRl
        KCJsb2FkaW5nIiksaS5yb3V0ZSgiZXJyb3IiLHtwYXRoOiIvX3VudXNlZF9k
        dW1teV9lcnJvcl9wYXRoLzplcnJvciJ9KSxuLmNhbGwoaSksdGhpcy5wdXNo
        KHIucGF0aCx0LGkuZ2VuZXJhdGUoKSxyLnF1ZXJ5UGFyYW1zKX1lbHNlIHRo
        aXMucHVzaChyLnBhdGgsdCxudWxsLHIucXVlcnlQYXJhbXMpfSxwdXNoOmZ1
        bmN0aW9uKGUsdCxyLG4pe3ZhciBpPXQuc3BsaXQoIi4iKTsoIiI9PT1lfHwi
        LyI9PT1lfHwiaW5kZXgiPT09aVtpLmxlbmd0aC0xXSkmJih0aGlzLmV4cGxp
        Y2l0SW5kZXg9ITApLHRoaXMubWF0Y2hlcy5wdXNoKFtlLHQscixuXSl9LHJv
        dXRlOmZ1bmN0aW9uKGUsdCl7dD10fHx7fSwic3RyaW5nIiE9dHlwZW9mIHQu
        cGF0aCYmKHQucGF0aD0iLyIrZSksdGhpcy5wYXJlbnQmJiJhcHBsaWNhdGlv
        biIhPT10aGlzLnBhcmVudCYmKGU9dGhpcy5wYXJlbnQrIi4iK2UpLHRoaXMu
        cHVzaCh0LnBhdGgsZSxudWxsLHQucXVlcnlQYXJhbXMpfSxnZW5lcmF0ZTpm
        dW5jdGlvbigpe3ZhciBlPXRoaXMubWF0Y2hlcztyZXR1cm4gdGhpcy5leHBs
        aWNpdEluZGV4fHx0aGlzLnJvdXRlKCJpbmRleCIse3BhdGg6Ii8ifSksZnVu
        Y3Rpb24odCl7Zm9yKHZhciByPTAsbj1lLmxlbmd0aDtuPnI7cisrKXt2YXIg
        aT1lW3JdO3QoaVswXSkudG8oaVsxXSxpWzJdKX19fX0sZS5tYXA9ZnVuY3Rp
        b24odCl7dmFyIHI9bmV3IGU7cmV0dXJuIHQuY2FsbChyKSxyfSxFbWJlci5S
        b3V0ZXJEU0w9ZX0oKSxmdW5jdGlvbigpe3ZhciBlPUVtYmVyLmdldDtFbWJl
        ci5jb250cm9sbGVyRm9yPWZ1bmN0aW9uKGUsdCxyKXtyZXR1cm4gZS5sb29r
        dXAoImNvbnRyb2xsZXI6Iit0LHIpfSxFbWJlci5nZW5lcmF0ZUNvbnRyb2xs
        ZXI9ZnVuY3Rpb24odCxyLG4pe3ZhciBpLG8sYSxzLHU7cmV0dXJuIHU9biYm
        RW1iZXIuaXNBcnJheShuKT8iYXJyYXkiOm4/Im9iamVjdCI6ImJhc2ljIixz
        PSJjb250cm9sbGVyOiIrdSxpPXQubG9va3VwRmFjdG9yeShzKS5leHRlbmQo
        e2lzR2VuZXJhdGVkOiEwLHRvU3RyaW5nOmZ1bmN0aW9uKCl7cmV0dXJuIihn
        ZW5lcmF0ZWQgIityKyIgY29udHJvbGxlcikifX0pLG89ImNvbnRyb2xsZXI6
        IityLHQucmVnaXN0ZXIobyxpKSxhPXQubG9va3VwKG8pLGUoYSwibmFtZXNw
        YWNlLkxPR19BQ1RJVkVfR0VORVJBVElPTiIpJiZFbWJlci5Mb2dnZXIuaW5m
        bygiZ2VuZXJhdGVkIC0+ICIrbyx7ZnVsbE5hbWU6b30pLGF9fSgpLGZ1bmN0
        aW9uKCl7ZnVuY3Rpb24gZShlLHQscil7dmFyIG49ci5zaGlmdCgpO2lmKCFl
        KXtpZih0KXJldHVybjt0aHJvdyBuZXcgRW1iZXIuRXJyb3IoIkNvdWxkIG5v
        dCB0cmlnZ2VyIGV2ZW50ICciK24rIicuIFRoZXJlIGFyZSBubyBhY3RpdmUg
        aGFuZGxlcnMiKX1mb3IodmFyIGk9ITEsbz1lLmxlbmd0aC0xO28+PTA7by0t
        KXt2YXIgYT1lW29dLHM9YS5oYW5kbGVyO2lmKHMuX2FjdGlvbnMmJnMuX2Fj
        dGlvbnNbbl0pe2lmKHMuX2FjdGlvbnNbbl0uYXBwbHkocyxyKSE9PSEwKXJl
        dHVybjtpPSEwfX1pZighaSYmIXQpdGhyb3cgbmV3IEVtYmVyLkVycm9yKCJO
        b3RoaW5nIGhhbmRsZWQgdGhlIGFjdGlvbiAnIituKyInLiBJZiB5b3UgZGlk
        IGhhbmRsZSB0aGUgYWN0aW9uLCB0aGlzIGVycm9yIGNhbiBiZSBjYXVzZWQg
        YnkgcmV0dXJuaW5nIHRydWUgZnJvbSBhbiBhY3Rpb24gaGFuZGxlciwgY2F1
        c2luZyB0aGUgYWN0aW9uIHRvIGJ1YmJsZS4iKX1mdW5jdGlvbiByKGUpe3Zh
        ciB0PWUuY29udGFpbmVyLmxvb2t1cCgiY29udHJvbGxlcjphcHBsaWNhdGlv
        biIpLHI9ZS5yb3V0ZXIuY3VycmVudEhhbmRsZXJJbmZvcyxuPUVtYmVyLlJv
        dXRlci5fcm91dGVQYXRoKHIpOyJjdXJyZW50UGF0aCJpbiB0fHxhKHQsImN1
        cnJlbnRQYXRoIiksbyh0LCJjdXJyZW50UGF0aCIsbiksImN1cnJlbnRSb3V0
        ZU5hbWUiaW4gdHx8YSh0LCJjdXJyZW50Um91dGVOYW1lIiksbyh0LCJjdXJy
        ZW50Um91dGVOYW1lIixyW3IubGVuZ3RoLTFdLm5hbWUpfXZhciBuPXQoInJv
        dXRlciIpLGk9RW1iZXIuZ2V0LG89RW1iZXIuc2V0LGE9RW1iZXIuZGVmaW5l
        UHJvcGVydHkscz1FbWJlci5fTWV0YW1vcnBoVmlldztFbWJlci5Sb3V0ZXI9
        RW1iZXIuT2JqZWN0LmV4dGVuZChFbWJlci5FdmVudGVkLHtsb2NhdGlvbjoi
        aGFzaCIsaW5pdDpmdW5jdGlvbigpe3RoaXMucm91dGVyPXRoaXMuY29uc3Ry
        dWN0b3Iucm91dGVyfHx0aGlzLmNvbnN0cnVjdG9yLm1hcChFbWJlci5LKSx0
        aGlzLl9hY3RpdmVWaWV3cz17fSx0aGlzLl9zZXR1cExvY2F0aW9uKCl9LHVy
        bDpFbWJlci5jb21wdXRlZChmdW5jdGlvbigpe3JldHVybiBpKHRoaXMsImxv
        Y2F0aW9uIikuZ2V0VVJMKCl9KSxzdGFydFJvdXRpbmc6ZnVuY3Rpb24oKXt0
        aGlzLnJvdXRlcj10aGlzLnJvdXRlcnx8dGhpcy5jb25zdHJ1Y3Rvci5tYXAo
        RW1iZXIuSyk7dmFyIGU9dGhpcy5yb3V0ZXIsdD1pKHRoaXMsImxvY2F0aW9u
        Iikscj10aGlzLmNvbnRhaW5lcixuPXRoaXM7dGhpcy5fc2V0dXBSb3V0ZXIo
        ZSx0KSxyLnJlZ2lzdGVyKCJ2aWV3OmRlZmF1bHQiLHMpLHIucmVnaXN0ZXIo
        InZpZXc6dG9wbGV2ZWwiLEVtYmVyLlZpZXcuZXh0ZW5kKCkpLHQub25VcGRh
        dGVVUkwoZnVuY3Rpb24oZSl7bi5oYW5kbGVVUkwoZSl9KSx0aGlzLmhhbmRs
        ZVVSTCh0LmdldFVSTCgpKX0sZGlkVHJhbnNpdGlvbjpmdW5jdGlvbihlKXty
        KHRoaXMpLHRoaXMuX2NhbmNlbExvYWRpbmdFdmVudCgpLHRoaXMubm90aWZ5
        UHJvcGVydHlDaGFuZ2UoInVybCIpLEVtYmVyLnJ1bi5vbmNlKHRoaXMsdGhp
        cy50cmlnZ2VyLCJkaWRUcmFuc2l0aW9uIiksaSh0aGlzLCJuYW1lc3BhY2Ui
        KS5MT0dfVFJBTlNJVElPTlMmJkVtYmVyLkxvZ2dlci5sb2coIlRyYW5zaXRp
        b25lZCBpbnRvICciK0VtYmVyLlJvdXRlci5fcm91dGVQYXRoKGUpKyInIil9
        LGhhbmRsZVVSTDpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fZG9UcmFuc2l0
        aW9uKCJoYW5kbGVVUkwiLFtlXSl9LHRyYW5zaXRpb25UbzpmdW5jdGlvbigp
        e3JldHVybiB0aGlzLl9kb1RyYW5zaXRpb24oInRyYW5zaXRpb25UbyIsYXJn
        dW1lbnRzKX0saW50ZXJtZWRpYXRlVHJhbnNpdGlvblRvOmZ1bmN0aW9uKCl7
        dGhpcy5yb3V0ZXIuaW50ZXJtZWRpYXRlVHJhbnNpdGlvblRvLmFwcGx5KHRo
        aXMucm91dGVyLGFyZ3VtZW50cykscih0aGlzKTt2YXIgZT10aGlzLnJvdXRl
        ci5jdXJyZW50SGFuZGxlckluZm9zO2kodGhpcywibmFtZXNwYWNlIikuTE9H
        X1RSQU5TSVRJT05TJiZFbWJlci5Mb2dnZXIubG9nKCJJbnRlcm1lZGlhdGUt
        dHJhbnNpdGlvbmVkIGludG8gJyIrRW1iZXIuUm91dGVyLl9yb3V0ZVBhdGgo
        ZSkrIiciKX0scmVwbGFjZVdpdGg6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5f
        ZG9UcmFuc2l0aW9uKCJyZXBsYWNlV2l0aCIsYXJndW1lbnRzKX0sZ2VuZXJh
        dGU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLnJvdXRlci5nZW5lcmF0ZS5hcHBs
        eSh0aGlzLnJvdXRlcixhcmd1bWVudHMpO3JldHVybiB0aGlzLmxvY2F0aW9u
        LmZvcm1hdFVSTChlKX0saXNBY3RpdmU6ZnVuY3Rpb24oKXt2YXIgZT10aGlz
        LnJvdXRlcjtyZXR1cm4gZS5pc0FjdGl2ZS5hcHBseShlLGFyZ3VtZW50cyl9
        LHNlbmQ6ZnVuY3Rpb24oKXt0aGlzLnJvdXRlci50cmlnZ2VyLmFwcGx5KHRo
        aXMucm91dGVyLGFyZ3VtZW50cyl9LGhhc1JvdXRlOmZ1bmN0aW9uKGUpe3Jl
        dHVybiB0aGlzLnJvdXRlci5oYXNSb3V0ZShlKX0scmVzZXQ6ZnVuY3Rpb24o
        KXt0aGlzLnJvdXRlci5yZXNldCgpfSxfbG9va3VwQWN0aXZlVmlldzpmdW5j
        dGlvbihlKXt2YXIgdD10aGlzLl9hY3RpdmVWaWV3c1tlXTtyZXR1cm4gdCYm
        dFswXX0sX2Nvbm5lY3RBY3RpdmVWaWV3OmZ1bmN0aW9uKGUsdCl7dmFyIHI9
        dGhpcy5fYWN0aXZlVmlld3NbZV07ciYmclswXS5vZmYoIndpbGxEZXN0cm95
        RWxlbWVudCIsdGhpcyxyWzFdKTt2YXIgbj1mdW5jdGlvbigpe2RlbGV0ZSB0
        aGlzLl9hY3RpdmVWaWV3c1tlXX07dGhpcy5fYWN0aXZlVmlld3NbZV09W3Qs
        bl0sdC5vbmUoIndpbGxEZXN0cm95RWxlbWVudCIsdGhpcyxuKX0sX3NldHVw
        TG9jYXRpb246ZnVuY3Rpb24oKXt2YXIgZT1pKHRoaXMsImxvY2F0aW9uIiks
        dD1pKHRoaXMsInJvb3RVUkwiKSxyPXt9OyJzdHJpbmciPT10eXBlb2YgdCYm
        KHIucm9vdFVSTD10KSwic3RyaW5nIj09dHlwZW9mIGUmJihyLmltcGxlbWVu
        dGF0aW9uPWUsZT1vKHRoaXMsImxvY2F0aW9uIixFbWJlci5Mb2NhdGlvbi5j
        cmVhdGUocikpKX0sX2dldEhhbmRsZXJGdW5jdGlvbjpmdW5jdGlvbigpe3Zh
        ciBlPXt9LHQ9dGhpcy5jb250YWluZXIscj10Lmxvb2t1cEZhY3RvcnkoInJv
        dXRlOmJhc2ljIiksbj10aGlzO3JldHVybiBmdW5jdGlvbihvKXt2YXIgYT0i
        cm91dGU6IitvLHM9dC5sb29rdXAoYSk7cmV0dXJuIGVbb10/czooZVtvXT0h
        MCxzfHwodC5yZWdpc3RlcihhLHIuZXh0ZW5kKCkpLHM9dC5sb29rdXAoYSks
        aShuLCJuYW1lc3BhY2UuTE9HX0FDVElWRV9HRU5FUkFUSU9OIikmJkVtYmVy
        LkxvZ2dlci5pbmZvKCJnZW5lcmF0ZWQgLT4gIithLHtmdWxsTmFtZTphfSkp
        LHMucm91dGVOYW1lPW8scyl9fSxfc2V0dXBSb3V0ZXI6ZnVuY3Rpb24oZSx0
        KXt2YXIgcixuPXRoaXM7ZS5nZXRIYW5kbGVyPXRoaXMuX2dldEhhbmRsZXJG
        dW5jdGlvbigpO3ZhciBpPWZ1bmN0aW9uKCl7dC5zZXRVUkwocil9O2lmKGUu
        dXBkYXRlVVJMPWZ1bmN0aW9uKGUpe3I9ZSxFbWJlci5ydW4ub25jZShpKX0s
        dC5yZXBsYWNlVVJMKXt2YXIgbz1mdW5jdGlvbigpe3QucmVwbGFjZVVSTChy
        KX07ZS5yZXBsYWNlVVJMPWZ1bmN0aW9uKGUpe3I9ZSxFbWJlci5ydW4ub25j
        ZShvKX19ZS5kaWRUcmFuc2l0aW9uPWZ1bmN0aW9uKGUpe24uZGlkVHJhbnNp
        dGlvbihlKX19LF9kb1RyYW5zaXRpb246ZnVuY3Rpb24oZSx0KXt0PVtdLnNs
        aWNlLmNhbGwodCksdFswXT10WzBdfHwiLyI7dmFyIHIsbj10WzBdLGk9ITE7
        aXx8Ii8iIT09bi5jaGFyQXQoMCk/aXx8KHI9dGhpcy5yb3V0ZXIuaGFzUm91
        dGUobik/bjp0WzBdPW4rIi5pbmRleCIpOnI9bjt2YXIgbz10aGlzLnJvdXRl
        cltlXS5hcHBseSh0aGlzLnJvdXRlcix0KTtyZXR1cm4gby50aGVuKG51bGws
        ZnVuY3Rpb24oZSl7IlVucmVjb2duaXplZFVSTEVycm9yIj09PWUubmFtZX0p
        LG99LF9zY2hlZHVsZUxvYWRpbmdFdmVudDpmdW5jdGlvbihlLHQpe3RoaXMu
        X2NhbmNlbExvYWRpbmdFdmVudCgpLHRoaXMuX2xvYWRpbmdTdGF0ZVRpbWVy
        PUVtYmVyLnJ1bi5zY2hlZHVsZU9uY2UoInJvdXRlclRyYW5zaXRpb25zIix0
        aGlzLCJfZmlyZUxvYWRpbmdFdmVudCIsZSx0KX0sX2ZpcmVMb2FkaW5nRXZl
        bnQ6ZnVuY3Rpb24oZSx0KXt0aGlzLnJvdXRlci5hY3RpdmVUcmFuc2l0aW9u
        JiZlLnRyaWdnZXIoITAsImxvYWRpbmciLGUsdCl9LF9jYW5jZWxMb2FkaW5n
        RXZlbnQ6ZnVuY3Rpb24oKXt0aGlzLl9sb2FkaW5nU3RhdGVUaW1lciYmRW1i
        ZXIucnVuLmNhbmNlbCh0aGlzLl9sb2FkaW5nU3RhdGVUaW1lciksdGhpcy5f
        bG9hZGluZ1N0YXRlVGltZXI9bnVsbH19KSxFbWJlci5Sb3V0ZXIucmVvcGVu
        Q2xhc3Moe3JvdXRlcjpudWxsLG1hcDpmdW5jdGlvbih0KXt2YXIgcj10aGlz
        LnJvdXRlcjtyfHwocj1uZXcgbixyLmNhbGxiYWNrcz1bXSxyLnRyaWdnZXJF
        dmVudD1lLHRoaXMucmVvcGVuQ2xhc3Moe3JvdXRlcjpyfSkpLGkodGhpcywi
        bmFtZXNwYWNlLkxPR19UUkFOU0lUSU9OU19JTlRFUk5BTCIpJiYoci5sb2c9
        RW1iZXIuTG9nZ2VyLmRlYnVnKTt2YXIgbz1FbWJlci5Sb3V0ZXJEU0wubWFw
        KGZ1bmN0aW9uKCl7dGhpcy5yZXNvdXJjZSgiYXBwbGljYXRpb24iLHtwYXRo
        OiIvIn0sZnVuY3Rpb24oKXtmb3IodmFyIGU9MDtlPHIuY2FsbGJhY2tzLmxl
        bmd0aDtlKyspci5jYWxsYmFja3NbZV0uY2FsbCh0aGlzKTt0LmNhbGwodGhp
        cyl9KX0pO3JldHVybiByLmNhbGxiYWNrcy5wdXNoKHQpLHIubWFwKG8uZ2Vu
        ZXJhdGUoKSkscn0sX3JvdXRlUGF0aDpmdW5jdGlvbihlKXtmb3IodmFyIHQ9
        W10scj0xLG49ZS5sZW5ndGg7bj5yO3IrKyl7dmFyIGk9ZVtyXS5uYW1lLG89
        aS5zcGxpdCgiLiIpO3QucHVzaChvW28ubGVuZ3RoLTFdKX1yZXR1cm4gdC5q
        b2luKCIuIil9fSksbi5UcmFuc2l0aW9uLnByb3RvdHlwZS5zZW5kPW4uVHJh
        bnNpdGlvbi5wcm90b3R5cGUudHJpZ2dlcn0oKSxmdW5jdGlvbigpe2Z1bmN0
        aW9uIGUoZSl7dmFyIHQ9ZS5yb3V0ZXIucm91dGVyLnRhcmdldEhhbmRsZXJJ
        bmZvcztpZih0KWZvcih2YXIgcixuLGk9MCxvPXQubGVuZ3RoO28+aTtpKysp
        e2lmKG49dFtpXS5oYW5kbGVyLG49PT1lKXJldHVybiByO3I9bn19ZnVuY3Rp
        b24gdChyKXt2YXIgbixpPWUocik7aWYoaSlyZXR1cm4obj1pLmxhc3RSZW5k
        ZXJlZFRlbXBsYXRlKT9uOnQoaSl9ZnVuY3Rpb24gcihlLHIsbixpKXtpPWl8
        fHt9LGkuaW50bz1pLmludG8/aS5pbnRvLnJlcGxhY2UoL1wvL2csIi4iKTp0
        KGUpLGkub3V0bGV0PWkub3V0bGV0fHwibWFpbiIsaS5uYW1lPXIsaS50ZW1w
        bGF0ZT1uLGkuTE9HX1ZJRVdfTE9PS1VQUz11KGUucm91dGVyLCJuYW1lc3Bh
        Y2UuTE9HX1ZJRVdfTE9PS1VQUyIpO3ZhciBvLGE9aS5jb250cm9sbGVyO3Jl
        dHVybiBhPWkuY29udHJvbGxlcj9pLmNvbnRyb2xsZXI6KG89ZS5jb250YWlu
        ZXIubG9va3VwKCJjb250cm9sbGVyOiIrcikpP286ZS5jb250cm9sbGVyTmFt
        ZXx8ZS5yb3V0ZU5hbWUsInN0cmluZyI9PXR5cGVvZiBhJiYoYT1lLmNvbnRh
        aW5lci5sb29rdXAoImNvbnRyb2xsZXI6IithKSksaS5jb250cm9sbGVyPWEs
        aX1mdW5jdGlvbiBuKGUsdCxyKXtpZihlKXIuTE9HX1ZJRVdfTE9PS1VQUyYm
        RW1iZXIuTG9nZ2VyLmluZm8oIlJlbmRlcmluZyAiK3IubmFtZSsiIHdpdGgg
        IitlLHtmdWxsTmFtZToidmlldzoiK3IubmFtZX0pO2Vsc2V7dmFyIG49ci5p
        bnRvPyJ2aWV3OmRlZmF1bHQiOiJ2aWV3OnRvcGxldmVsIjtlPXQubG9va3Vw
        KG4pLHIuTE9HX1ZJRVdfTE9PS1VQUyYmRW1iZXIuTG9nZ2VyLmluZm8oIlJl
        bmRlcmluZyAiK3IubmFtZSsiIHdpdGggZGVmYXVsdCB2aWV3ICIrZSx7ZnVs
        bE5hbWU6InZpZXc6IityLm5hbWV9KX1yZXR1cm4gdShlLCJ0ZW1wbGF0ZU5h
        bWUiKXx8KGMoZSwidGVtcGxhdGUiLHIudGVtcGxhdGUpLGMoZSwiX2RlYnVn
        VGVtcGxhdGVOYW1lIixyLm5hbWUpKSxjKGUsInJlbmRlcmVkTmFtZSIsci5u
        YW1lKSxjKGUsImNvbnRyb2xsZXIiLHIuY29udHJvbGxlciksZX1mdW5jdGlv
        biBpKGUsdCxyKXtpZihyLmludG8pe3ZhciBuPWUucm91dGVyLl9sb29rdXBB
        Y3RpdmVWaWV3KHIuaW50byksaT1hKG4sci5vdXRsZXQpO2UudGVhcmRvd25P
        dXRsZXRWaWV3c3x8KGUudGVhcmRvd25PdXRsZXRWaWV3cz1bXSksbShlLnRl
        YXJkb3duT3V0bGV0Vmlld3MsMCwwLFtpXSksbi5jb25uZWN0T3V0bGV0KHIu
        b3V0bGV0LHQpfWVsc2V7dmFyIHM9dShlLCJyb3V0ZXIubmFtZXNwYWNlLnJv
        b3RFbGVtZW50Iik7ZS50ZWFyZG93blRvcExldmVsVmlldyYmZS50ZWFyZG93
        blRvcExldmVsVmlldygpLGUucm91dGVyLl9jb25uZWN0QWN0aXZlVmlldyhy
        Lm5hbWUsdCksZS50ZWFyZG93blRvcExldmVsVmlldz1vKHQpLHQuYXBwZW5k
        VG8ocyl9fWZ1bmN0aW9uIG8oZSl7cmV0dXJuIGZ1bmN0aW9uKCl7ZS5kZXN0
        cm95KCl9fWZ1bmN0aW9uIGEoZSx0KXtyZXR1cm4gZnVuY3Rpb24oKXtlLmRp
        c2Nvbm5lY3RPdXRsZXQodCl9fWZ1bmN0aW9uIHMoZSx0KXt2YXIgcj1lLmNv
        bnRhaW5lcixuPSJhcHBsaWNhdGlvbiI9PT1lLnJvdXRlTmFtZT90OmUucm91
        dGVOYW1lKyIuIit0LGk9ZS5yb3V0ZXIuaGFzUm91dGUobikmJihyLmhhcygi
        dGVtcGxhdGU6IituKXx8ci5oYXMoInJvdXRlOiIrbikpO3JldHVybiBpJiZu
        fXZhciB1PUVtYmVyLmdldCxjPUVtYmVyLnNldCxsPUVtYmVyLmdldFByb3Bl
        cnRpZXMsaD0oRW1iZXIuU3RyaW5nLmNsYXNzaWZ5LEVtYmVyLlN0cmluZy5m
        bXQsRW1iZXIuRW51bWVyYWJsZVV0aWxzLmZvckVhY2gpLG09RW1iZXIuRW51
        bWVyYWJsZVV0aWxzLnJlcGxhY2UsZj17d2lsbFJlc29sdmVNb2RlbDpmdW5j
        dGlvbihlLHQpe3RoaXMucm91dGVyLl9zY2hlZHVsZUxvYWRpbmdFdmVudChl
        LHQpfSxlcnJvcjpmdW5jdGlvbihlLHQscil7aWYodGhpcyE9PXIpe3ZhciBu
        PXModGhpcywiZXJyb3IiKTtpZihuKXJldHVybiB0aGlzLmludGVybWVkaWF0
        ZVRyYW5zaXRpb25UbyhuLGUpLHZvaWQgMH1yZXR1cm4iYXBwbGljYXRpb24i
        PT09dGhpcy5yb3V0ZU5hbWUmJkVtYmVyLkxvZ2dlci5hc3NlcnQoITEsIkVy
        cm9yIHdoaWxlIGxvYWRpbmcgcm91dGU6ICIrRW1iZXIuaW5zcGVjdChlKSks
        ITB9LGxvYWRpbmc6ZnVuY3Rpb24oZSx0KXtpZih0aGlzPT09dClyZXR1cm4h
        MDt2YXIgcj1zKHRoaXMsImxvYWRpbmciKTsKaWYocil0aGlzLmludGVybWVk
        aWF0ZVRyYW5zaXRpb25UbyhyKTtlbHNlIGlmKGUucGl2b3RIYW5kbGVyIT09
        dGhpcylyZXR1cm4hMH19O0VtYmVyLlJvdXRlPUVtYmVyLk9iamVjdC5leHRl
        bmQoRW1iZXIuQWN0aW9uSGFuZGxlcix7ZXhpdDpmdW5jdGlvbigpe3RoaXMu
        ZGVhY3RpdmF0ZSgpLHRoaXMudGVhcmRvd25WaWV3cygpfSxlbnRlcjpmdW5j
        dGlvbigpe3RoaXMuYWN0aXZhdGUoKX0sYWN0aW9uczpudWxsLF9hY3Rpb25z
        OmYsZXZlbnRzOmYsbWVyZ2VkUHJvcGVydGllczpbImV2ZW50cyJdLGRlYWN0
        aXZhdGU6RW1iZXIuSyxhY3RpdmF0ZTpFbWJlci5LLHRyYW5zaXRpb25Ubzpm
        dW5jdGlvbigpe3ZhciBlPXRoaXMucm91dGVyO3JldHVybiBlLnRyYW5zaXRp
        b25Uby5hcHBseShlLGFyZ3VtZW50cyl9LGludGVybWVkaWF0ZVRyYW5zaXRp
        b25UbzpmdW5jdGlvbigpe3ZhciBlPXRoaXMucm91dGVyO2UuaW50ZXJtZWRp
        YXRlVHJhbnNpdGlvblRvLmFwcGx5KGUsYXJndW1lbnRzKX0scmVwbGFjZVdp
        dGg6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLnJvdXRlcjtyZXR1cm4gZS5yZXBs
        YWNlV2l0aC5hcHBseShlLGFyZ3VtZW50cyl9LHNlbmQ6ZnVuY3Rpb24oKXty
        ZXR1cm4gdGhpcy5yb3V0ZXIuc2VuZC5hcHBseSh0aGlzLnJvdXRlcixhcmd1
        bWVudHMpfSxzZXR1cDpmdW5jdGlvbihlKXt2YXIgdD10aGlzLmNvbnRyb2xs
        ZXJOYW1lfHx0aGlzLnJvdXRlTmFtZSxyPXRoaXMuY29udHJvbGxlckZvcih0
        LCEwKTtyfHwocj10aGlzLmdlbmVyYXRlQ29udHJvbGxlcih0LGUpKSx0aGlz
        LmNvbnRyb2xsZXI9cjt2YXIgbj1bcixlXTt0aGlzLnNldHVwQ29udHJvbGxl
        cnM/dGhpcy5zZXR1cENvbnRyb2xsZXJzKHIsZSk6dGhpcy5zZXR1cENvbnRy
        b2xsZXIuYXBwbHkodGhpcyxuKSx0aGlzLnJlbmRlclRlbXBsYXRlcz90aGlz
        LnJlbmRlclRlbXBsYXRlcyhlKTp0aGlzLnJlbmRlclRlbXBsYXRlLmFwcGx5
        KHRoaXMsbil9LHJlZGlyZWN0OkVtYmVyLkssYmVmb3JlTW9kZWw6RW1iZXIu
        SyxhZnRlck1vZGVsOmZ1bmN0aW9uKGUsdCl7dGhpcy5yZWRpcmVjdChlLHQp
        fSxjb250ZXh0RGlkQ2hhbmdlOmZ1bmN0aW9uKCl7dGhpcy5jdXJyZW50TW9k
        ZWw9dGhpcy5jb250ZXh0fSxtb2RlbDpmdW5jdGlvbihlKXt2YXIgdCxyLG4s
        aTtmb3IodmFyIG8gaW4gZSkodD1vLm1hdGNoKC9eKC4qKV9pZCQvKSkmJihy
        PXRbMV0saT1lW29dKSxuPSEwO2lmKCFyJiZuKXJldHVybiBlO2lmKHIpcmV0
        dXJuIHRoaXMuZmluZE1vZGVsKHIsaSl9LGZpbmRNb2RlbDpmdW5jdGlvbigp
        e3ZhciBlPXUodGhpcywic3RvcmUiKTtyZXR1cm4gZS5maW5kLmFwcGx5KGUs
        YXJndW1lbnRzKX0sc3RvcmU6RW1iZXIuY29tcHV0ZWQoZnVuY3Rpb24oKXt2
        YXIgZT10aGlzLmNvbnRhaW5lcjtyZXR1cm4gdGhpcy5yb3V0ZU5hbWUsdSh0
        aGlzLCJyb3V0ZXIubmFtZXNwYWNlIikse2ZpbmQ6ZnVuY3Rpb24odCxyKXt2
        YXIgbj1lLmxvb2t1cEZhY3RvcnkoIm1vZGVsOiIrdCk7cmV0dXJuIG4uZmlu
        ZChyKX19fSksc2VyaWFsaXplOmZ1bmN0aW9uKGUsdCl7aWYoISh0Lmxlbmd0
        aDwxKSl7dmFyIHI9dFswXSxuPXt9O3JldHVybi9faWQkLy50ZXN0KHIpJiYx
        PT09dC5sZW5ndGg/bltyXT11KGUsImlkIik6bj1sKGUsdCksbn19LHNldHVw
        Q29udHJvbGxlcjpmdW5jdGlvbihlLHQpe2UmJnZvaWQgMCE9PXQmJmMoZSwi
        bW9kZWwiLHQpfSxjb250cm9sbGVyRm9yOmZ1bmN0aW9uKGUpe3ZhciB0LHI9
        dGhpcy5jb250YWluZXIsbj1yLmxvb2t1cCgicm91dGU6IitlKTtyZXR1cm4g
        biYmbi5jb250cm9sbGVyTmFtZSYmKGU9bi5jb250cm9sbGVyTmFtZSksdD1y
        Lmxvb2t1cCgiY29udHJvbGxlcjoiK2UpfSxnZW5lcmF0ZUNvbnRyb2xsZXI6
        ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLmNvbnRhaW5lcjtyZXR1cm4gdD10
        fHx0aGlzLm1vZGVsRm9yKGUpLEVtYmVyLmdlbmVyYXRlQ29udHJvbGxlcihy
        LGUsdCl9LG1vZGVsRm9yOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuY29udGFp
        bmVyLmxvb2t1cCgicm91dGU6IitlKSxyPXRoaXMucm91dGVyLnJvdXRlci5h
        Y3RpdmVUcmFuc2l0aW9uO2lmKHIpe3ZhciBuPXQmJnQucm91dGVOYW1lfHxl
        O2lmKHIucmVzb2x2ZWRNb2RlbHMuaGFzT3duUHJvcGVydHkobikpcmV0dXJu
        IHIucmVzb2x2ZWRNb2RlbHNbbl19cmV0dXJuIHQmJnQuY3VycmVudE1vZGVs
        fSxyZW5kZXJUZW1wbGF0ZTpmdW5jdGlvbigpe3RoaXMucmVuZGVyKCl9LHJl
        bmRlcjpmdW5jdGlvbihlLHQpeyJvYmplY3QiIT10eXBlb2YgZXx8dHx8KHQ9
        ZSxlPXRoaXMucm91dGVOYW1lKSx0PXR8fHt9LGU9ZT9lLnJlcGxhY2UoL1wv
        L2csIi4iKTp0aGlzLnJvdXRlTmFtZTt2YXIgbz10LnZpZXd8fHRoaXMudmll
        d05hbWV8fGUsYT10aGlzLnRlbXBsYXRlTmFtZXx8ZSxzPXRoaXMuY29udGFp
        bmVyLGM9cy5sb29rdXAoInZpZXc6IitvKSxsPWM/Yy5nZXQoInRlbXBsYXRl
        Iik6bnVsbDtyZXR1cm4gbHx8KGw9cy5sb29rdXAoInRlbXBsYXRlOiIrYSkp
        LGN8fGw/KHQ9cih0aGlzLGUsbCx0KSxjPW4oYyxzLHQpLCJtYWluIj09PXQu
        b3V0bGV0JiYodGhpcy5sYXN0UmVuZGVyZWRUZW1wbGF0ZT1lKSxpKHRoaXMs
        Yyx0KSx2b2lkIDApOih1KHRoaXMucm91dGVyLCJuYW1lc3BhY2UuTE9HX1ZJ
        RVdfTE9PS1VQUyIpJiZFbWJlci5Mb2dnZXIuaW5mbygnQ291bGQgbm90IGZp
        bmQgIicrZSsnIiB0ZW1wbGF0ZSBvciB2aWV3LiBOb3RoaW5nIHdpbGwgYmUg
        cmVuZGVyZWQnLHtmdWxsTmFtZToidGVtcGxhdGU6IitlfSksdm9pZCAwKX0s
        ZGlzY29ubmVjdE91dGxldDpmdW5jdGlvbihlKXtlPWV8fHt9LGUucGFyZW50
        Vmlldz1lLnBhcmVudFZpZXc/ZS5wYXJlbnRWaWV3LnJlcGxhY2UoL1wvL2cs
        Ii4iKTp0KHRoaXMpLGUub3V0bGV0PWUub3V0bGV0fHwibWFpbiI7dmFyIHI9
        dGhpcy5yb3V0ZXIuX2xvb2t1cEFjdGl2ZVZpZXcoZS5wYXJlbnRWaWV3KTty
        LmRpc2Nvbm5lY3RPdXRsZXQoZS5vdXRsZXQpfSx3aWxsRGVzdHJveTpmdW5j
        dGlvbigpe3RoaXMudGVhcmRvd25WaWV3cygpfSx0ZWFyZG93blZpZXdzOmZ1
        bmN0aW9uKCl7dGhpcy50ZWFyZG93blRvcExldmVsVmlldyYmdGhpcy50ZWFy
        ZG93blRvcExldmVsVmlldygpO3ZhciBlPXRoaXMudGVhcmRvd25PdXRsZXRW
        aWV3c3x8W107aChlLGZ1bmN0aW9uKGUpe2UoKX0pLGRlbGV0ZSB0aGlzLnRl
        YXJkb3duVG9wTGV2ZWxWaWV3LGRlbGV0ZSB0aGlzLnRlYXJkb3duT3V0bGV0
        Vmlld3MsZGVsZXRlIHRoaXMubGFzdFJlbmRlcmVkVGVtcGxhdGV9fSl9KCks
        ZnVuY3Rpb24oKXtFbWJlci5vbkxvYWQoIkVtYmVyLkhhbmRsZWJhcnMiLGZ1
        bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHIsaSl7cmV0dXJuIG4uY2FsbCh0KGUs
        cixpKSxmdW5jdGlvbih0LG4pe3JldHVybiBudWxsPT09dD9yW25dOm8oZSx0
        LGkpfSl9ZnVuY3Rpb24gdChlLHQsbyl7ZnVuY3Rpb24gYShlLHQpe3JldHVy
        biJjb250cm9sbGVyIj09PXQ/dDpFbWJlci5Db250cm9sbGVyTWl4aW4uZGV0
        ZWN0KGUpP2EoaShlLCJtb2RlbCIpLHQ/dCsiLm1vZGVsIjoibW9kZWwiKTp0
        fXZhciBzPXIoZSx0LG8pLHU9by50eXBlcztyZXR1cm4gbi5jYWxsKHMsZnVu
        Y3Rpb24oZSxyKXtyZXR1cm4iSUQiPT09dVtyXT9hKGUsdFtyXSk6bnVsbH0p
        fXZhciByPUVtYmVyLkhhbmRsZWJhcnMucmVzb2x2ZVBhcmFtcyxuPUVtYmVy
        LkFycmF5UG9seWZpbGxzLm1hcCxpPUVtYmVyLmdldCxvPUVtYmVyLkhhbmRs
        ZWJhcnMuZ2V0O0VtYmVyLlJvdXRlci5yZXNvbHZlUGFyYW1zPWUsRW1iZXIu
        Um91dGVyLnJlc29sdmVQYXRocz10fSl9KCksZnVuY3Rpb24oKXt2YXIgZT1F
        bWJlci5nZXQ7RW1iZXIuc2V0LEVtYmVyLlN0cmluZy5mbXQsRW1iZXIub25M
        b2FkKCJFbWJlci5IYW5kbGViYXJzIixmdW5jdGlvbigpe2Z1bmN0aW9uIHQo
        ZSx0KXtyZXR1cm4gZS5oYXNSb3V0ZSh0KXx8KHQrPSIuaW5kZXgiKSx0fWZ1
        bmN0aW9uIHIoZSl7dmFyIHQ9ZS5vcHRpb25zLnR5cGVzLHI9ZS5vcHRpb25z
        LmRhdGE7cmV0dXJuIGkoZS5jb250ZXh0LGUucGFyYW1zLHt0eXBlczp0LGRh
        dGE6cn0pfXZhciBuPUVtYmVyLlJvdXRlci5yZXNvbHZlUGFyYW1zLGk9RW1i
        ZXIuUm91dGVyLnJlc29sdmVQYXRocyxvPUVtYmVyLlZpZXdVdGlscy5pc1Np
        bXBsZUNsaWNrLGE9RW1iZXIuTGlua1ZpZXc9RW1iZXIuVmlldy5leHRlbmQo
        e3RhZ05hbWU6ImEiLGN1cnJlbnRXaGVuOm51bGwsdGl0bGU6bnVsbCxyZWw6
        bnVsbCxhY3RpdmVDbGFzczoiYWN0aXZlIixsb2FkaW5nQ2xhc3M6ImxvYWRp
        bmciLGRpc2FibGVkQ2xhc3M6ImRpc2FibGVkIixfaXNEaXNhYmxlZDohMSxy
        ZXBsYWNlOiExLGF0dHJpYnV0ZUJpbmRpbmdzOlsiaHJlZiIsInRpdGxlIiwi
        cmVsIl0sY2xhc3NOYW1lQmluZGluZ3M6WyJhY3RpdmUiLCJsb2FkaW5nIiwi
        ZGlzYWJsZWQiXSxldmVudE5hbWU6ImNsaWNrIixpbml0OmZ1bmN0aW9uKCl7
        dGhpcy5fc3VwZXIuYXBwbHkodGhpcyxhcmd1bWVudHMpO3ZhciB0PWUodGhp
        cywiZXZlbnROYW1lIik7dGhpcy5vbih0LHRoaXMsdGhpcy5faW52b2tlKTt2
        YXIgbixpLG8sYT10aGlzLnBhcmFtZXRlcnMscz1hLmNvbnRleHQsdT1yKGEp
        LGM9dS5sZW5ndGgsbD1hLm9wdGlvbnMubGlua1RleHRQYXRoO2ZvcihsJiYo
        bz1FbWJlci5IYW5kbGViYXJzLm5vcm1hbGl6ZVBhdGgocyxsLGEub3B0aW9u
        cy5kYXRhKSx0aGlzLnJlZ2lzdGVyT2JzZXJ2ZXIoby5yb290LG8ucGF0aCx0
        aGlzLHRoaXMucmVyZW5kZXIpKSxpPTA7Yz5pO2krKyluPXVbaV0sbnVsbCE9
        PW4mJihvPUVtYmVyLkhhbmRsZWJhcnMubm9ybWFsaXplUGF0aChzLG4sYS5v
        cHRpb25zLmRhdGEpLHRoaXMucmVnaXN0ZXJPYnNlcnZlcihvLnJvb3Qsby5w
        YXRoLHRoaXMsdGhpcy5fcGFyYW1zQ2hhbmdlZCkpfSxfcGFyYW1zQ2hhbmdl
        ZDpmdW5jdGlvbigpe3RoaXMubm90aWZ5UHJvcGVydHlDaGFuZ2UoInJlc29s
        dmVkUGFyYW1zIil9LF9xdWVyeVBhcmFtc0NoYW5nZWQ6ZnVuY3Rpb24oKXt0
        aGlzLm5vdGlmeVByb3BlcnR5Q2hhbmdlKCJxdWVyeVBhcmFtcyIpfSxjb25j
        cmV0ZVZpZXc6RW1iZXIuY29tcHV0ZWQoZnVuY3Rpb24oKXtyZXR1cm4gZSh0
        aGlzLCJwYXJlbnRWaWV3Iil9KS5wcm9wZXJ0eSgicGFyZW50VmlldyIpLGRp
        c2FibGVkOkVtYmVyLmNvbXB1dGVkKGZ1bmN0aW9uKHQscil7cmV0dXJuIHZv
        aWQgMCE9PXImJnRoaXMuc2V0KCJfaXNEaXNhYmxlZCIscikscj9lKHRoaXMs
        ImRpc2FibGVkQ2xhc3MiKTohMX0pLGFjdGl2ZTpFbWJlci5jb21wdXRlZChm
        dW5jdGlvbigpe2lmKGUodGhpcywibG9hZGluZyIpKXJldHVybiExO3ZhciB0
        PWUodGhpcywicm91dGVyIikscj1lKHRoaXMsInJvdXRlQXJncyIpLG49ci5z
        bGljZSgxKSxpPWUodGhpcywicmVzb2x2ZWRQYXJhbXMiKSxvPXRoaXMuY3Vy
        cmVudFdoZW58fGlbMF0sYT1vKyIuaW5kZXgiLHM9dC5pc0FjdGl2ZS5hcHBs
        eSh0LFtvXS5jb25jYXQobikpfHx0LmlzQWN0aXZlLmFwcGx5KHQsW2FdLmNv
        bmNhdChuKSk7cmV0dXJuIHM/ZSh0aGlzLCJhY3RpdmVDbGFzcyIpOnZvaWQg
        MH0pLnByb3BlcnR5KCJyZXNvbHZlZFBhcmFtcyIsInJvdXRlQXJncyIsInJv
        dXRlci51cmwiKSxsb2FkaW5nOkVtYmVyLmNvbXB1dGVkKGZ1bmN0aW9uKCl7
        cmV0dXJuIGUodGhpcywicm91dGVBcmdzIik/dm9pZCAwOmUodGhpcywibG9h
        ZGluZ0NsYXNzIil9KS5wcm9wZXJ0eSgicm91dGVBcmdzIikscm91dGVyOkVt
        YmVyLmNvbXB1dGVkKGZ1bmN0aW9uKCl7cmV0dXJuIGUodGhpcywiY29udHJv
        bGxlciIpLmNvbnRhaW5lci5sb29rdXAoInJvdXRlcjptYWluIil9KSxfaW52
        b2tlOmZ1bmN0aW9uKHQpe2lmKCFvKHQpKXJldHVybiEwO2lmKHQucHJldmVu
        dERlZmF1bHQoKSx0aGlzLmJ1YmJsZXM9PT0hMSYmdC5zdG9wUHJvcGFnYXRp
        b24oKSxlKHRoaXMsIl9pc0Rpc2FibGVkIikpcmV0dXJuITE7aWYoZSh0aGlz
        LCJsb2FkaW5nIikpcmV0dXJuIEVtYmVyLkxvZ2dlci53YXJuKCJUaGlzIGxp
        bmstdG8gaXMgaW4gYW4gaW5hY3RpdmUgbG9hZGluZyBzdGF0ZSBiZWNhdXNl
        IGF0IGxlYXN0IG9uZSBvZiBpdHMgcGFyYW1ldGVycyBwcmVzZW50bHkgaGFz
        IGEgbnVsbC91bmRlZmluZWQgdmFsdWUsIG9yIHRoZSBwcm92aWRlZCByb3V0
        ZSBuYW1lIGlzIGludmFsaWQuIiksITE7dmFyIHI9ZSh0aGlzLCJyb3V0ZXIi
        KSxuPWUodGhpcywicm91dGVBcmdzIik7ZSh0aGlzLCJyZXBsYWNlIik/ci5y
        ZXBsYWNlV2l0aC5hcHBseShyLG4pOnIudHJhbnNpdGlvblRvLmFwcGx5KHIs
        bil9LHJlc29sdmVkUGFyYW1zOkVtYmVyLmNvbXB1dGVkKGZ1bmN0aW9uKCl7
        dmFyIGU9dGhpcy5wYXJhbWV0ZXJzLHQ9ZS5vcHRpb25zLHI9dC50eXBlcyxp
        PXQuZGF0YTtyZXR1cm4gbihlLmNvbnRleHQsZS5wYXJhbXMse3R5cGVzOnIs
        ZGF0YTppfSl9KS5wcm9wZXJ0eSgpLHJvdXRlQXJnczpFbWJlci5jb21wdXRl
        ZChmdW5jdGlvbigpe3ZhciByPWUodGhpcywicmVzb2x2ZWRQYXJhbXMiKS5z
        bGljZSgwKSxuPWUodGhpcywicm91dGVyIiksaT1yWzBdO2lmKGkpe2k9dChu
        LGkpLHJbMF09aTtmb3IodmFyIG89MSxhPXIubGVuZ3RoO2E+bzsrK28pe3Zh
        ciBzPXJbb107aWYobnVsbD09PXN8fCJ1bmRlZmluZWQiPT10eXBlb2Ygcyly
        ZXR1cm59cmV0dXJuIHJ9fSkucHJvcGVydHkoInJlc29sdmVkUGFyYW1zIiwi
        cXVlcnlQYXJhbXMiLCJyb3V0ZXIudXJsIiksX3BvdGVudGlhbFF1ZXJ5UGFy
        YW1zOkVtYmVyLmNvbXB1dGVkKGZ1bmN0aW9uKCl7dmFyIHI9ZSh0aGlzLCJy
        ZXNvbHZlZFBhcmFtcyIpWzBdO2lmKCFyKXJldHVybiBudWxsO3ZhciBuPWUo
        dGhpcywicm91dGVyIik7cmV0dXJuIHI9dChuLHIpLG4ucm91dGVyLnF1ZXJ5
        UGFyYW1zRm9ySGFuZGxlcihyKX0pLnByb3BlcnR5KCJyZXNvbHZlZFBhcmFt
        cyIpLHF1ZXJ5UGFyYW1zOkVtYmVyLmNvbXB1dGVkKGZ1bmN0aW9uKCl7dmFy
        IHQ9dGhpcyxyPW51bGwsbj1lKHRoaXMsIl9wb3RlbnRpYWxRdWVyeVBhcmFt
        cyIpO3JldHVybiBuPyhuLmZvckVhY2goZnVuY3Rpb24obil7dmFyIGk9ZSh0
        LG4pOyJ1bmRlZmluZWQiIT10eXBlb2YgaSYmKHI9cnx8e30scltuXT1pKX0p
        LHIpOm51bGx9KS5wcm9wZXJ0eSgiX3BvdGVudGlhbFF1ZXJ5UGFyYW1zLltd
        IiksaHJlZjpFbWJlci5jb21wdXRlZChmdW5jdGlvbigpe2lmKCJhIj09PWUo
        dGhpcywidGFnTmFtZSIpKXt2YXIgdD1lKHRoaXMsInJvdXRlciIpLHI9ZSh0
        aGlzLCJyb3V0ZUFyZ3MiKTtyZXR1cm4gcj90LmdlbmVyYXRlLmFwcGx5KHQs
        cik6ZSh0aGlzLCJsb2FkaW5nSHJlZiIpfX0pLnByb3BlcnR5KCJyb3V0ZUFy
        Z3MiKSxsb2FkaW5nSHJlZjoiIyJ9KTthLnRvU3RyaW5nPWZ1bmN0aW9uKCl7
        cmV0dXJuIkxpbmtWaWV3In0sRW1iZXIuSGFuZGxlYmFycy5yZWdpc3Rlckhl
        bHBlcigibGluay10byIsZnVuY3Rpb24oKXt2YXIgZT1bXS5zbGljZS5jYWxs
        KGFyZ3VtZW50cywtMSlbMF0sdD1bXS5zbGljZS5jYWxsKGFyZ3VtZW50cyww
        LC0xKSxyPWUuaGFzaDtpZihyLmRpc2FibGVkQmluZGluZz1yLmRpc2FibGVk
        V2hlbiwhZS5mbil7dmFyIG49dC5zaGlmdCgpLGk9ZS50eXBlcy5zaGlmdCgp
        LG89dGhpczsiSUQiPT09aT8oZS5saW5rVGV4dFBhdGg9bixlLmZuPWZ1bmN0
        aW9uKCl7cmV0dXJuIEVtYmVyLkhhbmRsZWJhcnMuZ2V0KG8sbixlKX0pOmUu
        Zm49ZnVuY3Rpb24oKXtyZXR1cm4gbn19cmV0dXJuIHIucGFyYW1ldGVycz17
        Y29udGV4dDp0aGlzLG9wdGlvbnM6ZSxwYXJhbXM6dH0sRW1iZXIuSGFuZGxl
        YmFycy5oZWxwZXJzLnZpZXcuY2FsbCh0aGlzLGEsZSl9KSxFbWJlci5IYW5k
        bGViYXJzLnJlZ2lzdGVySGVscGVyKCJsaW5rVG8iLEVtYmVyLkhhbmRsZWJh
        cnMuaGVscGVyc1sibGluay10byJdKX0pfSgpLGZ1bmN0aW9uKCl7RW1iZXIu
        Z2V0LEVtYmVyLnNldCxFbWJlci5vbkxvYWQoIkVtYmVyLkhhbmRsZWJhcnMi
        LGZ1bmN0aW9uKGUpe2UuT3V0bGV0Vmlldz1FbWJlci5Db250YWluZXJWaWV3
        LmV4dGVuZChFbWJlci5fTWV0YW1vcnBoKSxlLnJlZ2lzdGVySGVscGVyKCJv
        dXRsZXQiLGZ1bmN0aW9uKHQscil7dmFyIG4saTtmb3IodCYmdC5kYXRhJiZ0
        LmRhdGEuaXNSZW5kZXJEYXRhJiYocj10LHQ9Im1haW4iKSxuPXIuZGF0YS52
        aWV3OyFuLmdldCgidGVtcGxhdGUuaXNUb3AiKTspbj1uLmdldCgiX3BhcmVu
        dFZpZXciKTtyZXR1cm4gaT1yLmhhc2gudmlld0NsYXNzfHxlLk91dGxldFZp
        ZXcsci5kYXRhLnZpZXcuc2V0KCJvdXRsZXRTb3VyY2UiLG4pLHIuaGFzaC5j
        dXJyZW50Vmlld0JpbmRpbmc9Il92aWV3Lm91dGxldFNvdXJjZS5fb3V0bGV0
        cy4iK3QsZS5oZWxwZXJzLnZpZXcuY2FsbCh0aGlzLGkscil9KX0pfSgpLGZ1
        bmN0aW9uKCl7RW1iZXIuZ2V0LEVtYmVyLnNldCxFbWJlci5vbkxvYWQoIkVt
        YmVyLkhhbmRsZWJhcnMiLGZ1bmN0aW9uKCl7RW1iZXIuSGFuZGxlYmFycy5y
        ZWdpc3RlckhlbHBlcigicmVuZGVyIixmdW5jdGlvbihlLHQscil7dmFyIG4s
        aSxvLGEscyx1LGM9Mz09PWFyZ3VtZW50cy5sZW5ndGg7Mj09PWFyZ3VtZW50
        cy5sZW5ndGgmJihyPXQsdD12b2lkIDApLCJzdHJpbmciPT10eXBlb2YgdCYm
        KHM9RW1iZXIuSGFuZGxlYmFycy5nZXQoci5jb250ZXh0c1sxXSx0LHIpLHU9
        e3NpbmdsZXRvbjohMX0pLGU9ZS5yZXBsYWNlKC9cLy9nLCIuIiksbj1yLmRh
        dGEua2V5d29yZHMuY29udHJvbGxlci5jb250YWluZXIsaT1uLmxvb2t1cCgi
        cm91dGVyOm1haW4iKSxhPW4ubG9va3VwKCJ2aWV3OiIrZSl8fG4ubG9va3Vw
        KCJ2aWV3OmRlZmF1bHQiKTt2YXIgbD1yLmhhc2guY29udHJvbGxlcjtvPWw/
        bi5sb29rdXAoImNvbnRyb2xsZXI6IitsLHUpOm4ubG9va3VwKCJjb250cm9s
        bGVyOiIrZSx1KXx8RW1iZXIuZ2VuZXJhdGVDb250cm9sbGVyKG4sZSxzKSxv
        JiZjJiZvLnNldCgibW9kZWwiLHMpO3ZhciBoPXIuY29udGV4dHNbMV07aCYm
        YS5yZWdpc3Rlck9ic2VydmVyKGgsdCxmdW5jdGlvbigpe28uc2V0KCJtb2Rl
        bCIsRW1iZXIuSGFuZGxlYmFycy5nZXQoaCx0LHIpKX0pLG8uc2V0KCJ0YXJn
        ZXQiLHIuZGF0YS5rZXl3b3Jkcy5jb250cm9sbGVyKSxyLmhhc2gudmlld05h
        bWU9RW1iZXIuU3RyaW5nLmNhbWVsaXplKGUpLHIuaGFzaC50ZW1wbGF0ZT1u
        Lmxvb2t1cCgidGVtcGxhdGU6IitlKSxyLmhhc2guY29udHJvbGxlcj1vLGkm
        JiFzJiZpLl9jb25uZWN0QWN0aXZlVmlldyhlLGEpLEVtYmVyLkhhbmRsZWJh
        cnMuaGVscGVycy52aWV3LmNhbGwodGhpcyxhLHIpfSl9KX0oKSxmdW5jdGlv
        bigpe0VtYmVyLm9uTG9hZCgiRW1iZXIuSGFuZGxlYmFycyIsZnVuY3Rpb24o
        KXtmdW5jdGlvbiBlKGUscil7dmFyIG49W107ciYmbi5wdXNoKHIpO3ZhciBp
        PWUub3B0aW9ucy50eXBlcy5zbGljZSgxKSxvPWUub3B0aW9ucy5kYXRhO3Jl
        dHVybiBuLmNvbmNhdCh0KGUuY29udGV4dCxlLnBhcmFtcyx7dHlwZXM6aSxk
        YXRhOm99KSl9dmFyIHQ9RW1iZXIuUm91dGVyLnJlc29sdmVQYXJhbXMscj1F
        bWJlci5WaWV3VXRpbHMuaXNTaW1wbGVDbGljayxuPUVtYmVyLkhhbmRsZWJh
        cnMsaT1uLmdldCxvPW4uU2FmZVN0cmluZyxhPUVtYmVyLkFycmF5UG9seWZp
        bGxzLmZvckVhY2gscz0oRW1iZXIuZ2V0LEFycmF5LnByb3RvdHlwZS5zbGlj
        ZSksdT1uLkFjdGlvbkhlbHBlcj17cmVnaXN0ZXJlZEFjdGlvbnM6e319LGM9
        WyJhbHQiLCJzaGlmdCIsIm1ldGEiLCJjdHJsIl0sbD1mdW5jdGlvbihlLHQp
        e2lmKCJ1bmRlZmluZWQiPT10eXBlb2YgdClyZXR1cm4gcihlKTtpZih0Lmlu
        ZGV4T2YoImFueSIpPj0wKXJldHVybiEwO3ZhciBuPSEwO3JldHVybiBhLmNh
        bGwoYyxmdW5jdGlvbihyKXtlW3IrIktleSJdJiYtMT09PXQuaW5kZXhPZihy
        KSYmKG49ITEpfSksbn07dS5yZWdpc3RlckFjdGlvbj1mdW5jdGlvbih0LHIs
        bil7dmFyIG89KCsrRW1iZXIudXVpZCkudG9TdHJpbmcoKTtyZXR1cm4gdS5y
        ZWdpc3RlcmVkQWN0aW9uc1tvXT17ZXZlbnROYW1lOnIuZXZlbnROYW1lLGhh
        bmRsZXI6ZnVuY3Rpb24obyl7aWYoIWwobyxuKSlyZXR1cm4hMDtvLnByZXZl
        bnREZWZhdWx0KCksci5idWJibGVzPT09ITEmJm8uc3RvcFByb3BhZ2F0aW9u
        KCk7dmFyIGE9ci50YXJnZXQ7YT1hLnRhcmdldD9pKGEucm9vdCxhLnRhcmdl
        dCxhLm9wdGlvbnMpOmEucm9vdCxFbWJlci5ydW4oZnVuY3Rpb24oKXthLnNl
        bmQ/YS5zZW5kLmFwcGx5KGEsZShyLnBhcmFtZXRlcnMsdCkpOmFbdF0uYXBw
        bHkoYSxlKHIucGFyYW1ldGVycykpfSl9fSxyLnZpZXcub24oIndpbGxDbGVh
        clJlbmRlciIsZnVuY3Rpb24oKXtkZWxldGUgdS5yZWdpc3RlcmVkQWN0aW9u
        c1tvXX0pLG99LG4ucmVnaXN0ZXJIZWxwZXIoImFjdGlvbiIsZnVuY3Rpb24o
        ZSl7dmFyIHQscj1hcmd1bWVudHNbYXJndW1lbnRzLmxlbmd0aC0xXSxuPXMu
        Y2FsbChhcmd1bWVudHMsMSwtMSksaT1yLmhhc2gsYT17ZXZlbnROYW1lOmku
        b258fCJjbGljayJ9O2EucGFyYW1ldGVycz17Y29udGV4dDp0aGlzLG9wdGlv
        bnM6cixwYXJhbXM6bn0sYS52aWV3PXIuZGF0YS52aWV3O3ZhciBjLGw7aS50
        YXJnZXQ/KGM9dGhpcyxsPWkudGFyZ2V0KToodD1yLmRhdGEua2V5d29yZHMu
        Y29udHJvbGxlcikmJihjPXQpLGEudGFyZ2V0PXtyb290OmMsdGFyZ2V0Omws
        b3B0aW9uczpyfSxhLmJ1YmJsZXM9aS5idWJibGVzO3ZhciBoPXUucmVnaXN0
        ZXJBY3Rpb24oZSxhLGkuYWxsb3dlZEtleXMpO3JldHVybiBuZXcgbygnZGF0
        YS1lbWJlci1hY3Rpb249IicraCsnIicpfSl9KX0oKSxmdW5jdGlvbigpe2lm
        KEVtYmVyLkVOVi5FWFBFUklNRU5UQUxfQ09OVFJPTF9IRUxQRVIpe3ZhciBl
        PUVtYmVyLmdldCx0PUVtYmVyLnNldDtFbWJlci5IYW5kbGViYXJzLnJlZ2lz
        dGVySGVscGVyKCJjb250cm9sIixmdW5jdGlvbihyLG4saSl7ZnVuY3Rpb24g
        bygpe3ZhciBlPUVtYmVyLkhhbmRsZWJhcnMuZ2V0KHRoaXMsbixpKTt0KHAs
        Im1vZGVsIixlKSxmLnJlcmVuZGVyKCl9Mj09PWFyZ3VtZW50cy5sZW5ndGgm
        JihpPW4sbj12b2lkIDApO3ZhciBhO24mJihhPUVtYmVyLkhhbmRsZWJhcnMu
        Z2V0KHRoaXMsbixpKSk7dmFyIHMsdSxjPWkuZGF0YS5rZXl3b3Jkcy5jb250
        cm9sbGVyLGw9KGkuZGF0YS5rZXl3b3Jkcy52aWV3LGUoYywiX2NoaWxkQ29u
        dGFpbmVycyIpKSxoPWkuaGFzaC5jb250cm9sSUQ7bC5oYXNPd25Qcm9wZXJ0
        eShoKT91PWxbaF06KHM9ZShjLCJjb250YWluZXIiKSx1PXMuY2hpbGQoKSxs
        W2hdPXUpO3ZhciBtPXIucmVwbGFjZSgvXC8vZywiLiIpLGY9dS5sb29rdXAo
        InZpZXc6IittKXx8dS5sb29rdXAoInZpZXc6ZGVmYXVsdCIpLHA9dS5sb29r
        dXAoImNvbnRyb2xsZXI6IittKSxkPXUubG9va3VwKCJ0ZW1wbGF0ZToiK3Ip
        O3QocCwidGFyZ2V0IixjKSx0KHAsIm1vZGVsIixhKSxpLmhhc2gudGVtcGxh
        dGU9ZCxpLmhhc2guY29udHJvbGxlcj1wLG4mJihFbWJlci5hZGRPYnNlcnZl
        cih0aGlzLG4sbyksZi5vbmUoIndpbGxEZXN0cm95RWxlbWVudCIsdGhpcyxm
        dW5jdGlvbigpe0VtYmVyLnJlbW92ZU9ic2VydmVyKHRoaXMsbixvKX0pKSxF
        bWJlci5IYW5kbGViYXJzLmhlbHBlcnMudmlldy5jYWxsKHRoaXMsZixpKX0p
        fX0oKSxmdW5jdGlvbigpe3ZhciBlPUVtYmVyLmdldDtFbWJlci5zZXQsRW1i
        ZXIuQ29udHJvbGxlck1peGluLnJlb3Blbih7dHJhbnNpdGlvblRvUm91dGU6
        ZnVuY3Rpb24oKXt2YXIgdD1lKHRoaXMsInRhcmdldCIpLHI9dC50cmFuc2l0
        aW9uVG9Sb3V0ZXx8dC50cmFuc2l0aW9uVG87cmV0dXJuIHIuYXBwbHkodCxh
        cmd1bWVudHMpfSx0cmFuc2l0aW9uVG86ZnVuY3Rpb24oKXtyZXR1cm4gdGhp
        cy50cmFuc2l0aW9uVG9Sb3V0ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LHJl
        cGxhY2VSb3V0ZTpmdW5jdGlvbigpe3ZhciB0PWUodGhpcywidGFyZ2V0Iiks
        cj10LnJlcGxhY2VSb3V0ZXx8dC5yZXBsYWNlV2l0aDtyZXR1cm4gci5hcHBs
        eSh0LGFyZ3VtZW50cyl9LHJlcGxhY2VXaXRoOmZ1bmN0aW9uKCl7cmV0dXJu
        IHRoaXMucmVwbGFjZVJvdXRlLmFwcGx5KHRoaXMsYXJndW1lbnRzKX19KX0o
        KSxmdW5jdGlvbigpe3ZhciBlPUVtYmVyLmdldCx0PUVtYmVyLnNldDtFbWJl
        ci5WaWV3LnJlb3Blbih7aW5pdDpmdW5jdGlvbigpe3QodGhpcywiX291dGxl
        dHMiLHt9KSx0aGlzLl9zdXBlcigpfSxjb25uZWN0T3V0bGV0OmZ1bmN0aW9u
        KHIsbil7aWYodGhpcy5fcGVuZGluZ0Rpc2Nvbm5lY3Rpb25zJiZkZWxldGUg
        dGhpcy5fcGVuZGluZ0Rpc2Nvbm5lY3Rpb25zW3JdLHRoaXMuX2hhc0VxdWl2
        YWxlbnRWaWV3KHIsbikpcmV0dXJuIG4uZGVzdHJveSgpLHZvaWQgMDt2YXIg
        aT1lKHRoaXMsIl9vdXRsZXRzIiksbz1lKHRoaXMsImNvbnRhaW5lciIpLGE9
        byYmby5sb29rdXAoInJvdXRlcjptYWluIikscz1lKG4sInJlbmRlcmVkTmFt
        ZSIpO3QoaSxyLG4pLGEmJnMmJmEuX2Nvbm5lY3RBY3RpdmVWaWV3KHMsbil9
        LF9oYXNFcXVpdmFsZW50VmlldzpmdW5jdGlvbih0LHIpe3ZhciBuPWUodGhp
        cywiX291dGxldHMuIit0KTtyZXR1cm4gbiYmbi5jb25zdHJ1Y3Rvcj09PXIu
        Y29uc3RydWN0b3ImJm4uZ2V0KCJ0ZW1wbGF0ZSIpPT09ci5nZXQoInRlbXBs
        YXRlIikmJm4uZ2V0KCJjb250ZXh0Iik9PT1yLmdldCgiY29udGV4dCIpfSxk
        aXNjb25uZWN0T3V0bGV0OmZ1bmN0aW9uKGUpe3RoaXMuX3BlbmRpbmdEaXNj
        b25uZWN0aW9uc3x8KHRoaXMuX3BlbmRpbmdEaXNjb25uZWN0aW9ucz17fSks
        dGhpcy5fcGVuZGluZ0Rpc2Nvbm5lY3Rpb25zW2VdPSEwLEVtYmVyLnJ1bi5v
        bmNlKHRoaXMsIl9maW5pc2hEaXNjb25uZWN0aW9ucyIpfSxfZmluaXNoRGlz
        Y29ubmVjdGlvbnM6ZnVuY3Rpb24oKXt2YXIgcj1lKHRoaXMsIl9vdXRsZXRz
        Iiksbj10aGlzLl9wZW5kaW5nRGlzY29ubmVjdGlvbnM7dGhpcy5fcGVuZGlu
        Z0Rpc2Nvbm5lY3Rpb25zPW51bGw7Zm9yKHZhciBpIGluIG4pdChyLGksbnVs
        bCl9fSl9KCksZnVuY3Rpb24oKXt2YXIgZT1FbWJlci5ydW4ucXVldWVzLHQ9
        RW1iZXIuQXJyYXlQb2x5ZmlsbHMuaW5kZXhPZjtlLnNwbGljZSh0LmNhbGwo
        ZSwiYWN0aW9ucyIpKzEsMCwicm91dGVyVHJhbnNpdGlvbnMiKX0oKSxmdW5j
        dGlvbigpe0VtYmVyLmdldCxFbWJlci5zZXQsRW1iZXIuTG9jYXRpb249e2Ny
        ZWF0ZTpmdW5jdGlvbihlKXt2YXIgdD1lJiZlLmltcGxlbWVudGF0aW9uLHI9
        dGhpcy5pbXBsZW1lbnRhdGlvbnNbdF07cmV0dXJuIHIuY3JlYXRlLmFwcGx5
        KHIsYXJndW1lbnRzKX0scmVnaXN0ZXJJbXBsZW1lbnRhdGlvbjpmdW5jdGlv
        bihlLHQpe3RoaXMuaW1wbGVtZW50YXRpb25zW2VdPXR9LGltcGxlbWVudGF0
        aW9uczp7fX19KCksZnVuY3Rpb24oKXt2YXIgZT1FbWJlci5nZXQsdD1FbWJl
        ci5zZXQ7RW1iZXIuTm9uZUxvY2F0aW9uPUVtYmVyLk9iamVjdC5leHRlbmQo
        e3BhdGg6IiIsZ2V0VVJMOmZ1bmN0aW9uKCl7cmV0dXJuIGUodGhpcywicGF0
        aCIpfSxzZXRVUkw6ZnVuY3Rpb24oZSl7dCh0aGlzLCJwYXRoIixlKX0sb25V
        cGRhdGVVUkw6ZnVuY3Rpb24oZSl7dGhpcy51cGRhdGVDYWxsYmFjaz1lfSxo
        YW5kbGVVUkw6ZnVuY3Rpb24oZSl7dCh0aGlzLCJwYXRoIixlKSx0aGlzLnVw
        ZGF0ZUNhbGxiYWNrKGUpfSxmb3JtYXRVUkw6ZnVuY3Rpb24oZSl7cmV0dXJu
        IGV9fSksRW1iZXIuTG9jYXRpb24ucmVnaXN0ZXJJbXBsZW1lbnRhdGlvbigi
        bm9uZSIsRW1iZXIuTm9uZUxvY2F0aW9uKX0oKSxmdW5jdGlvbigpe3ZhciBl
        PUVtYmVyLmdldCx0PUVtYmVyLnNldDtFbWJlci5IYXNoTG9jYXRpb249RW1i
        ZXIuT2JqZWN0LmV4dGVuZCh7aW5pdDpmdW5jdGlvbigpe3QodGhpcywibG9j
        YXRpb24iLGUodGhpcywibG9jYXRpb24iKXx8d2luZG93LmxvY2F0aW9uKX0s
        Z2V0VVJMOmZ1bmN0aW9uKCl7cmV0dXJuIGUodGhpcywibG9jYXRpb24iKS5o
        YXNoLnN1YnN0cigxKX0sc2V0VVJMOmZ1bmN0aW9uKHIpe2UodGhpcywibG9j
        YXRpb24iKS5oYXNoPXIsdCh0aGlzLCJsYXN0U2V0VVJMIixyKX0scmVwbGFj
        ZVVSTDpmdW5jdGlvbih0KXtlKHRoaXMsImxvY2F0aW9uIikucmVwbGFjZSgi
        IyIrdCl9LG9uVXBkYXRlVVJMOmZ1bmN0aW9uKHIpe3ZhciBuPXRoaXMsaT1F
        bWJlci5ndWlkRm9yKHRoaXMpO0VtYmVyLiQod2luZG93KS5vbigiaGFzaGNo
        YW5nZS5lbWJlci1sb2NhdGlvbi0iK2ksZnVuY3Rpb24oKXtFbWJlci5ydW4o
        ZnVuY3Rpb24oKXt2YXIgaT1sb2NhdGlvbi5oYXNoLnN1YnN0cigxKTtlKG4s
        Imxhc3RTZXRVUkwiKSE9PWkmJih0KG4sImxhc3RTZXRVUkwiLG51bGwpLHIo
        aSkpfSl9KX0sZm9ybWF0VVJMOmZ1bmN0aW9uKGUpe3JldHVybiIjIitlfSx3
        aWxsRGVzdHJveTpmdW5jdGlvbigpe3ZhciBlPUVtYmVyLmd1aWRGb3IodGhp
        cyk7RW1iZXIuJCh3aW5kb3cpLm9mZigiaGFzaGNoYW5nZS5lbWJlci1sb2Nh
        dGlvbi0iK2UpfX0pLEVtYmVyLkxvY2F0aW9uLnJlZ2lzdGVySW1wbGVtZW50
        YXRpb24oImhhc2giLEVtYmVyLkhhc2hMb2NhdGlvbil9KCksZnVuY3Rpb24o
        KXt2YXIgZT1FbWJlci5nZXQsdD1FbWJlci5zZXQscj0hMSxuPXdpbmRvdy5o
        aXN0b3J5JiYic3RhdGUiaW4gd2luZG93Lmhpc3Rvcnk7RW1iZXIuSGlzdG9y
        eUxvY2F0aW9uPUVtYmVyLk9iamVjdC5leHRlbmQoe2luaXQ6ZnVuY3Rpb24o
        KXt0KHRoaXMsImxvY2F0aW9uIixlKHRoaXMsImxvY2F0aW9uIil8fHdpbmRv
        dy5sb2NhdGlvbiksdGhpcy5pbml0U3RhdGUoKX0saW5pdFN0YXRlOmZ1bmN0
        aW9uKCl7dCh0aGlzLCJoaXN0b3J5IixlKHRoaXMsImhpc3RvcnkiKXx8d2lu
        ZG93Lmhpc3RvcnkpLHRoaXMucmVwbGFjZVN0YXRlKHRoaXMuZm9ybWF0VVJM
        KHRoaXMuZ2V0VVJMKCkpKX0scm9vdFVSTDoiLyIsZ2V0VVJMOmZ1bmN0aW9u
        KCl7dmFyIHQ9ZSh0aGlzLCJyb290VVJMIikscj1lKHRoaXMsImxvY2F0aW9u
        Iiksbj1yLnBhdGhuYW1lO3Q9dC5yZXBsYWNlKC9cLyQvLCIiKTt2YXIgaT1u
        LnJlcGxhY2UodCwiIik7cmV0dXJuIGl9LHNldFVSTDpmdW5jdGlvbihlKXt2
        YXIgdD10aGlzLmdldFN0YXRlKCk7ZT10aGlzLmZvcm1hdFVSTChlKSx0JiZ0
        LnBhdGghPT1lJiZ0aGlzLnB1c2hTdGF0ZShlKX0scmVwbGFjZVVSTDpmdW5j
        dGlvbihlKXt2YXIgdD10aGlzLmdldFN0YXRlKCk7ZT10aGlzLmZvcm1hdFVS
        TChlKSx0JiZ0LnBhdGghPT1lJiZ0aGlzLnJlcGxhY2VTdGF0ZShlKX0sZ2V0
        U3RhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gbj9lKHRoaXMsImhpc3RvcnkiKS5z
        dGF0ZTp0aGlzLl9oaXN0b3J5U3RhdGV9LHB1c2hTdGF0ZTpmdW5jdGlvbih0
        KXt2YXIgcj17cGF0aDp0fTtlKHRoaXMsImhpc3RvcnkiKS5wdXNoU3RhdGUo
        cixudWxsLHQpLG58fCh0aGlzLl9oaXN0b3J5U3RhdGU9ciksdGhpcy5fcHJl
        dmlvdXNVUkw9dGhpcy5nZXRVUkwoKX0scmVwbGFjZVN0YXRlOmZ1bmN0aW9u
        KHQpe3ZhciByPXtwYXRoOnR9O2UodGhpcywiaGlzdG9yeSIpLnJlcGxhY2VT
        dGF0ZShyLG51bGwsdCksbnx8KHRoaXMuX2hpc3RvcnlTdGF0ZT1yKSx0aGlz
        Ll9wcmV2aW91c1VSTD10aGlzLmdldFVSTCgpfSxvblVwZGF0ZVVSTDpmdW5j
        dGlvbihlKXt2YXIgdD1FbWJlci5ndWlkRm9yKHRoaXMpLG49dGhpcztFbWJl
        ci4kKHdpbmRvdykub24oInBvcHN0YXRlLmVtYmVyLWxvY2F0aW9uLSIrdCxm
        dW5jdGlvbigpeyhyfHwocj0hMCxuLmdldFVSTCgpIT09bi5fcHJldmlvdXNV
        UkwpKSYmZShuLmdldFVSTCgpKX0pfSxmb3JtYXRVUkw6ZnVuY3Rpb24odCl7
        dmFyIHI9ZSh0aGlzLCJyb290VVJMIik7cmV0dXJuIiIhPT10JiYocj1yLnJl
        cGxhY2UoL1wvJC8sIiIpKSxyK3R9LHdpbGxEZXN0cm95OmZ1bmN0aW9uKCl7
        dmFyIGU9RW1iZXIuZ3VpZEZvcih0aGlzKTtFbWJlci4kKHdpbmRvdykub2Zm
        KCJwb3BzdGF0ZS5lbWJlci1sb2NhdGlvbi0iK2UpfX0pLEVtYmVyLkxvY2F0
        aW9uLnJlZ2lzdGVySW1wbGVtZW50YXRpb24oImhpc3RvcnkiLEVtYmVyLkhp
        c3RvcnlMb2NhdGlvbil9KCksZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQscixu
        LGkpe3ZhciBvLGE9dC5uYW1lLHM9dC5pbmNvbWluZyx1PXQuaW5jb21pbmdO
        YW1lcyxjPXUubGVuZ3RoO2lmKG58fChuPXt9KSxpfHwoaT1bXSksIW4uaGFz
        T3duUHJvcGVydHkoYSkpe2ZvcihpLnB1c2goYSksblthXT0hMCxvPTA7Yz5v
        O28rKyllKHNbdVtvXV0scixuLGkpO3IodCxpKSxpLnBvcCgpfX1mdW5jdGlv
        biB0KCl7dGhpcy5uYW1lcz1bXSx0aGlzLnZlcnRpY2VzPXt9fXQucHJvdG90
        eXBlLmFkZD1mdW5jdGlvbihlKXtpZihlKXtpZih0aGlzLnZlcnRpY2VzLmhh
        c093blByb3BlcnR5KGUpKXJldHVybiB0aGlzLnZlcnRpY2VzW2VdO3ZhciB0
        PXtuYW1lOmUsaW5jb21pbmc6e30saW5jb21pbmdOYW1lczpbXSxoYXNPdXRn
        b2luZzohMSx2YWx1ZTpudWxsfTtyZXR1cm4gdGhpcy52ZXJ0aWNlc1tlXT10
        LHRoaXMubmFtZXMucHVzaChlKSx0fX0sdC5wcm90b3R5cGUubWFwPWZ1bmN0
        aW9uKGUsdCl7dGhpcy5hZGQoZSkudmFsdWU9dH0sdC5wcm90b3R5cGUuYWRk
        RWRnZT1mdW5jdGlvbih0LHIpe2Z1bmN0aW9uIG4oZSx0KXtpZihlLm5hbWU9
        PT1yKXRocm93IG5ldyBFbWJlci5FcnJvcigiY3ljbGUgZGV0ZWN0ZWQ6ICIr
        cisiIDwtICIrdC5qb2luKCIgPC0gIikpfWlmKHQmJnImJnQhPT1yKXt2YXIg
        aT10aGlzLmFkZCh0KSxvPXRoaXMuYWRkKHIpO28uaW5jb21pbmcuaGFzT3du
        UHJvcGVydHkodCl8fChlKGksbiksaS5oYXNPdXRnb2luZz0hMCxvLmluY29t
        aW5nW3RdPWksby5pbmNvbWluZ05hbWVzLnB1c2godCkpfX0sdC5wcm90b3R5
        cGUudG9wc29ydD1mdW5jdGlvbih0KXt2YXIgcixuLGk9e30sbz10aGlzLnZl
        cnRpY2VzLGE9dGhpcy5uYW1lcyxzPWEubGVuZ3RoO2ZvcihyPTA7cz5yO3Ir
        KyluPW9bYVtyXV0sbi5oYXNPdXRnb2luZ3x8ZShuLHQsaSl9LHQucHJvdG90
        eXBlLmFkZEVkZ2VzPWZ1bmN0aW9uKGUsdCxyLG4pe3ZhciBpO2lmKHRoaXMu
        bWFwKGUsdCkscilpZigic3RyaW5nIj09dHlwZW9mIHIpdGhpcy5hZGRFZGdl
        KGUscik7ZWxzZSBmb3IoaT0wO2k8ci5sZW5ndGg7aSsrKXRoaXMuYWRkRWRn
        ZShlLHJbaV0pO2lmKG4paWYoInN0cmluZyI9PXR5cGVvZiBuKXRoaXMuYWRk
        RWRnZShuLGUpO2Vsc2UgZm9yKGk9MDtpPG4ubGVuZ3RoO2krKyl0aGlzLmFk
        ZEVkZ2UobltpXSxlKX0sRW1iZXIuREFHPXR9KCksZnVuY3Rpb24oKXt2YXIg
        ZT1FbWJlci5nZXQsdD1FbWJlci5TdHJpbmcuY2xhc3NpZnkscj1FbWJlci5T
        dHJpbmcuY2FwaXRhbGl6ZSxuPUVtYmVyLlN0cmluZy5kZWNhbWVsaXplO0Vt
        YmVyLkRlZmF1bHRSZXNvbHZlcj1FbWJlci5PYmplY3QuZXh0ZW5kKHtuYW1l
        c3BhY2U6bnVsbCxub3JtYWxpemU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5zcGxp
        dCgiOiIsMikscj10WzBdLG49dFsxXTtpZigidGVtcGxhdGUiIT09cil7dmFy
        IGk9bjtyZXR1cm4gaS5pbmRleE9mKCIuIik+LTEmJihpPWkucmVwbGFjZSgv
        XC4oLikvZyxmdW5jdGlvbihlKXtyZXR1cm4gZS5jaGFyQXQoMSkudG9VcHBl
        ckNhc2UoKX0pKSxuLmluZGV4T2YoIl8iKT4tMSYmKGk9aS5yZXBsYWNlKC9f
        KC4pL2csZnVuY3Rpb24oZSl7cmV0dXJuIGUuY2hhckF0KDEpLnRvVXBwZXJD
        YXNlKCl9KSkscisiOiIraX1yZXR1cm4gZX0scmVzb2x2ZTpmdW5jdGlvbihl
        KXt2YXIgdD10aGlzLnBhcnNlTmFtZShlKSxyPXRoaXNbdC5yZXNvbHZlTWV0
        aG9kTmFtZV07aWYoIXQubmFtZXx8IXQudHlwZSl0aHJvdyBuZXcgVHlwZUVy
        cm9yKCJJbnZhbGlkIGZ1bGxOYW1lOiBgIitlKyJgLCBtdXN0IG9mIG9mIHRo
        ZSBmb3JtIGB0eXBlOm5hbWVgICIpO2lmKHIpe3ZhciBuPXIuY2FsbCh0aGlz
        LHQpO2lmKG4pcmV0dXJuIG59cmV0dXJuIHRoaXMucmVzb2x2ZU90aGVyKHQp
        fSxwYXJzZU5hbWU6ZnVuY3Rpb24obil7dmFyIGk9bi5zcGxpdCgiOiIpLG89
        aVswXSxhPWlbMV0scz1hLHU9ZSh0aGlzLCJuYW1lc3BhY2UiKSxjPXU7aWYo
        InRlbXBsYXRlIiE9PW8mJi0xIT09cy5pbmRleE9mKCIvIikpe3ZhciBsPXMu
        c3BsaXQoIi8iKTtzPWxbbC5sZW5ndGgtMV07dmFyIGg9cihsLnNsaWNlKDAs
        LTEpLmpvaW4oIi4iKSk7Yz1FbWJlci5OYW1lc3BhY2UuYnlOYW1lKGgpfXJl
        dHVybntmdWxsTmFtZTpuLHR5cGU6byxmdWxsTmFtZVdpdGhvdXRUeXBlOmEs
        bmFtZTpzLHJvb3Q6YyxyZXNvbHZlTWV0aG9kTmFtZToicmVzb2x2ZSIrdChv
        KX19LHJlc29sdmVUZW1wbGF0ZTpmdW5jdGlvbihlKXt2YXIgdD1lLmZ1bGxO
        YW1lV2l0aG91dFR5cGUucmVwbGFjZSgvXC4vZywiLyIpO3JldHVybiBFbWJl
        ci5URU1QTEFURVNbdF0/RW1iZXIuVEVNUExBVEVTW3RdOih0PW4odCksRW1i
        ZXIuVEVNUExBVEVTW3RdP0VtYmVyLlRFTVBMQVRFU1t0XTp2b2lkIDApfSx1
        c2VSb3V0ZXJOYW1pbmc6ZnVuY3Rpb24oZSl7ZS5uYW1lPWUubmFtZS5yZXBs
        YWNlKC9cLi9nLCJfIiksImJhc2ljIj09PWUubmFtZSYmKGUubmFtZT0iIil9
        LHJlc29sdmVDb250cm9sbGVyOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnVz
        ZVJvdXRlck5hbWluZyhlKSx0aGlzLnJlc29sdmVPdGhlcihlKX0scmVzb2x2
        ZVJvdXRlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnVzZVJvdXRlck5hbWlu
        ZyhlKSx0aGlzLnJlc29sdmVPdGhlcihlKX0scmVzb2x2ZVZpZXc6ZnVuY3Rp
        b24oZSl7cmV0dXJuIHRoaXMudXNlUm91dGVyTmFtaW5nKGUpLHRoaXMucmVz
        b2x2ZU90aGVyKGUpfSxyZXNvbHZlSGVscGVyOmZ1bmN0aW9uKGUpe3JldHVy
        biB0aGlzLnJlc29sdmVPdGhlcihlKXx8RW1iZXIuSGFuZGxlYmFycy5oZWxw
        ZXJzW2UuZnVsbE5hbWVXaXRob3V0VHlwZV19LHJlc29sdmVNb2RlbDpmdW5j
        dGlvbihyKXt2YXIgbj10KHIubmFtZSksaT1lKHIucm9vdCxuKTtyZXR1cm4g
        aT9pOnZvaWQgMH0scmVzb2x2ZU90aGVyOmZ1bmN0aW9uKHIpe3ZhciBuPXQo
        ci5uYW1lKSt0KHIudHlwZSksaT1lKHIucm9vdCxuKTtyZXR1cm4gaT9pOnZv
        aWQgMH0sbG9va3VwRGVzY3JpcHRpb246ZnVuY3Rpb24oZSl7dmFyIHI9dGhp
        cy5wYXJzZU5hbWUoZSk7aWYoInRlbXBsYXRlIj09PXIudHlwZSlyZXR1cm4i
        dGVtcGxhdGUgYXQgIityLmZ1bGxOYW1lV2l0aG91dFR5cGUucmVwbGFjZSgv
        XC4vZywiLyIpO3ZhciBuPXIucm9vdCsiLiIrdChyLm5hbWUpO3JldHVybiJt
        b2RlbCIhPT1yLnR5cGUmJihuKz10KHIudHlwZSkpLG59LG1ha2VUb1N0cmlu
        ZzpmdW5jdGlvbihlKXtyZXR1cm4gZS50b1N0cmluZygpfX0pfSgpLGZ1bmN0
        aW9uKCl7ZnVuY3Rpb24gZShlKXt0aGlzLl9jb250YWluZXI9ZX1mdW5jdGlv
        biB0KGUpe2Z1bmN0aW9uIHQoZSl7cmV0dXJuIG4ucmVzb2x2ZShlKX1lLmdl
        dCgicmVzb2x2ZXIiKTt2YXIgcj1lLmdldCgicmVzb2x2ZXIiKXx8ZS5nZXQo
        IlJlc29sdmVyIil8fEVtYmVyLkRlZmF1bHRSZXNvbHZlcixuPXIuY3JlYXRl
        KHtuYW1lc3BhY2U6ZX0pO3JldHVybiB0LmRlc2NyaWJlPWZ1bmN0aW9uKGUp
        e3JldHVybiBuLmxvb2t1cERlc2NyaXB0aW9uKGUpfSx0Lm1ha2VUb1N0cmlu
        Zz1mdW5jdGlvbihlLHQpe3JldHVybiBuLm1ha2VUb1N0cmluZyhlLHQpfSx0
        Lm5vcm1hbGl6ZT1mdW5jdGlvbihlKXtyZXR1cm4gbi5ub3JtYWxpemU/bi5u
        b3JtYWxpemUoZSk6ZX0sdH12YXIgcj1FbWJlci5nZXQsbj1FbWJlci5zZXQ7
        ZS5kZXByZWNhdGU9ZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKCl7dmFy
        IHQ9dGhpcy5fY29udGFpbmVyO3JldHVybiB0W2VdLmFwcGx5KHQsYXJndW1l
        bnRzKX19LGUucHJvdG90eXBlPXtfY29udGFpbmVyOm51bGwsbG9va3VwOmUu
        ZGVwcmVjYXRlKCJsb29rdXAiKSxyZXNvbHZlOmUuZGVwcmVjYXRlKCJyZXNv
        bHZlIikscmVnaXN0ZXI6ZS5kZXByZWNhdGUoInJlZ2lzdGVyIil9O3ZhciBp
        PUVtYmVyLkFwcGxpY2F0aW9uPUVtYmVyLk5hbWVzcGFjZS5leHRlbmQoRW1i
        ZXIuRGVmZXJyZWRNaXhpbix7cm9vdEVsZW1lbnQ6ImJvZHkiLGV2ZW50RGlz
        cGF0Y2hlcjpudWxsLGN1c3RvbUV2ZW50czpudWxsLF9yZWFkaW5lc3NEZWZl
        cnJhbHM6MSxpbml0OmZ1bmN0aW9uKCl7aWYodGhpcy4kfHwodGhpcy4kPUVt
        YmVyLiQpLHRoaXMuX19jb250YWluZXJfXz10aGlzLmJ1aWxkQ29udGFpbmVy
        KCksdGhpcy5Sb3V0ZXI9dGhpcy5kZWZhdWx0Um91dGVyKCksdGhpcy5fc3Vw
        ZXIoKSx0aGlzLnNjaGVkdWxlSW5pdGlhbGl6ZSgpLEVtYmVyLmxpYnJhcmll
        cy5yZWdpc3RlckNvcmVMaWJyYXJ5KCJIYW5kbGViYXJzIixFbWJlci5IYW5k
        bGViYXJzLlZFUlNJT04pLEVtYmVyLmxpYnJhcmllcy5yZWdpc3RlckNvcmVM
        aWJyYXJ5KCJqUXVlcnkiLEVtYmVyLiQoKS5qcXVlcnkpLEVtYmVyLkxPR19W
        RVJTSU9OKXtFbWJlci5MT0dfVkVSU0lPTj0hMTt2YXIgZT1NYXRoLm1heC5h
        cHBseSh0aGlzLEVtYmVyLkEoRW1iZXIubGlicmFyaWVzKS5tYXBCeSgibmFt
        ZS5sZW5ndGgiKSk7RW1iZXIubGlicmFyaWVzLmVhY2goZnVuY3Rpb24odCl7
        bmV3IEFycmF5KGUtdC5sZW5ndGgrMSkuam9pbigiICIpfSl9fSxidWlsZENv
        bnRhaW5lcjpmdW5jdGlvbigpe3ZhciBlPXRoaXMuX19jb250YWluZXJfXz1p
        LmJ1aWxkQ29udGFpbmVyKHRoaXMpO3JldHVybiBlfSxkZWZhdWx0Um91dGVy
        OmZ1bmN0aW9uKCl7aWYodGhpcy5Sb3V0ZXIhPT0hMSl7dmFyIGU9dGhpcy5f
        X2NvbnRhaW5lcl9fO3JldHVybiB0aGlzLlJvdXRlciYmKGUudW5yZWdpc3Rl
        cigicm91dGVyOm1haW4iKSxlLnJlZ2lzdGVyKCJyb3V0ZXI6bWFpbiIsdGhp
        cy5Sb3V0ZXIpKSxlLmxvb2t1cEZhY3RvcnkoInJvdXRlcjptYWluIil9fSxz
        Y2hlZHVsZUluaXRpYWxpemU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzOyF0aGlz
        LiR8fHRoaXMuJC5pc1JlYWR5P0VtYmVyLnJ1bi5zY2hlZHVsZSgiYWN0aW9u
        cyIsZSwiX2luaXRpYWxpemUiKTp0aGlzLiQoKS5yZWFkeShmdW5jdGlvbigp
        e0VtYmVyLnJ1bihlLCJfaW5pdGlhbGl6ZSIpfSl9LGRlZmVyUmVhZGluZXNz
        OmZ1bmN0aW9uKCl7dGhpcy5fcmVhZGluZXNzRGVmZXJyYWxzKyt9LGFkdmFu
        Y2VSZWFkaW5lc3M6ZnVuY3Rpb24oKXt0aGlzLl9yZWFkaW5lc3NEZWZlcnJh
        bHMtLSwwPT09dGhpcy5fcmVhZGluZXNzRGVmZXJyYWxzJiZFbWJlci5ydW4u
        b25jZSh0aGlzLHRoaXMuZGlkQmVjb21lUmVhZHkpfSxyZWdpc3RlcjpmdW5j
        dGlvbigpe3ZhciBlPXRoaXMuX19jb250YWluZXJfXztlLnJlZ2lzdGVyLmFw
        cGx5KGUsYXJndW1lbnRzKX0saW5qZWN0OmZ1bmN0aW9uKCl7dmFyIGU9dGhp
        cy5fX2NvbnRhaW5lcl9fO2UuaW5qZWN0aW9uLmFwcGx5KGUsYXJndW1lbnRz
        KX0saW5pdGlhbGl6ZTpmdW5jdGlvbigpe30sX2luaXRpYWxpemU6ZnVuY3Rp
        b24oKXtpZighdGhpcy5pc0Rlc3Ryb3llZCl7aWYodGhpcy5Sb3V0ZXIpe3Zh
        ciBlPXRoaXMuX19jb250YWluZXJfXztlLnVucmVnaXN0ZXIoInJvdXRlcjpt
        YWluIiksZS5yZWdpc3Rlcigicm91dGVyOm1haW4iLHRoaXMuUm91dGVyKX1y
        ZXR1cm4gdGhpcy5ydW5Jbml0aWFsaXplcnMoKSxFbWJlci5ydW5Mb2FkSG9v
        a3MoImFwcGxpY2F0aW9uIix0aGlzKSx0aGlzLmFkdmFuY2VSZWFkaW5lc3Mo
        KSx0aGlzfX0scmVzZXQ6ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7dmFyIGU9
        dGhpcy5fX2NvbnRhaW5lcl9fLmxvb2t1cCgicm91dGVyOm1haW4iKTtlLnJl
        c2V0KCksRW1iZXIucnVuKHRoaXMuX19jb250YWluZXJfXywiZGVzdHJveSIp
        LHRoaXMuYnVpbGRDb250YWluZXIoKSxFbWJlci5ydW4uc2NoZWR1bGUoImFj
        dGlvbnMiLHRoaXMsZnVuY3Rpb24oKXt0aGlzLl9pbml0aWFsaXplKCl9KX10
        aGlzLl9yZWFkaW5lc3NEZWZlcnJhbHM9MSxFbWJlci5ydW4uam9pbih0aGlz
        LGUpfSxydW5Jbml0aWFsaXplcnM6ZnVuY3Rpb24oKXt2YXIgZSx0LG49cih0
        aGlzLmNvbnN0cnVjdG9yLCJpbml0aWFsaXplcnMiKSxpPXRoaXMuX19jb250
        YWluZXJfXyxvPW5ldyBFbWJlci5EQUcsYT10aGlzO2ZvcihlIGluIG4pdD1u
        W2VdLG8uYWRkRWRnZXModC5uYW1lLHQuaW5pdGlhbGl6ZSx0LmJlZm9yZSx0
        LmFmdGVyKTtvLnRvcHNvcnQoZnVuY3Rpb24oZSl7dmFyIHQ9ZS52YWx1ZTt0
        KGksYSl9KX0sZGlkQmVjb21lUmVhZHk6ZnVuY3Rpb24oKXt0aGlzLnNldHVw
        RXZlbnREaXNwYXRjaGVyKCksdGhpcy5yZWFkeSgpLHRoaXMuc3RhcnRSb3V0
        aW5nKCksRW1iZXIudGVzdGluZ3x8KEVtYmVyLk5hbWVzcGFjZS5wcm9jZXNz
        QWxsKCksRW1iZXIuQk9PVEVEPSEwKSx0aGlzLnJlc29sdmUodGhpcyl9LHNl
        dHVwRXZlbnREaXNwYXRjaGVyOmZ1bmN0aW9uKCl7dmFyIGU9cih0aGlzLCJj
        dXN0b21FdmVudHMiKSx0PXIodGhpcywicm9vdEVsZW1lbnQiKSxpPXRoaXMu
        X19jb250YWluZXJfXy5sb29rdXAoImV2ZW50X2Rpc3BhdGNoZXI6bWFpbiIp
        O24odGhpcywiZXZlbnREaXNwYXRjaGVyIixpKSxpLnNldHVwKGUsdCl9LHN0
        YXJ0Um91dGluZzpmdW5jdGlvbigpe3ZhciBlPXRoaXMuX19jb250YWluZXJf
        Xy5sb29rdXAoInJvdXRlcjptYWluIik7ZSYmZS5zdGFydFJvdXRpbmcoKX0s
        aGFuZGxlVVJMOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX19jb250YWluZXJf
        Xy5sb29rdXAoInJvdXRlcjptYWluIik7dC5oYW5kbGVVUkwoZSl9LHJlYWR5
        OkVtYmVyLksscmVzb2x2ZXI6bnVsbCxSZXNvbHZlcjpudWxsLHdpbGxEZXN0
        cm95OmZ1bmN0aW9uKCl7RW1iZXIuQk9PVEVEPSExLHRoaXMuX19jb250YWlu
        ZXJfXy5kZXN0cm95KCl9LGluaXRpYWxpemVyOmZ1bmN0aW9uKGUpe3RoaXMu
        Y29uc3RydWN0b3IuaW5pdGlhbGl6ZXIoZSl9fSk7RW1iZXIuQXBwbGljYXRp
        b24ucmVvcGVuQ2xhc3Moe2luaXRpYWxpemVyczp7fSxpbml0aWFsaXplcjpm
        dW5jdGlvbihlKXt2b2lkIDAhPT10aGlzLnN1cGVyY2xhc3MuaW5pdGlhbGl6
        ZXJzJiZ0aGlzLnN1cGVyY2xhc3MuaW5pdGlhbGl6ZXJzPT09dGhpcy5pbml0
        aWFsaXplcnMmJnRoaXMucmVvcGVuQ2xhc3Moe2luaXRpYWxpemVyczpFbWJl
        ci5jcmVhdGUodGhpcy5pbml0aWFsaXplcnMpfSksdGhpcy5pbml0aWFsaXpl
        cnNbZS5uYW1lXT1lfSxidWlsZENvbnRhaW5lcjpmdW5jdGlvbihyKXt2YXIg
        bj1uZXcgRW1iZXIuQ29udGFpbmVyO3JldHVybiBFbWJlci5Db250YWluZXIu
        ZGVmYXVsdENvbnRhaW5lcj1uZXcgZShuKSxuLnNldD1FbWJlci5zZXQsbi5y
        ZXNvbHZlcj10KHIpLG4ubm9ybWFsaXplPW4ucmVzb2x2ZXIubm9ybWFsaXpl
        LG4uZGVzY3JpYmU9bi5yZXNvbHZlci5kZXNjcmliZSxuLm1ha2VUb1N0cmlu
        Zz1uLnJlc29sdmVyLm1ha2VUb1N0cmluZyxuLm9wdGlvbnNGb3JUeXBlKCJj
        b21wb25lbnQiLHtzaW5nbGV0b246ITF9KSxuLm9wdGlvbnNGb3JUeXBlKCJ2
        aWV3Iix7c2luZ2xldG9uOiExfSksbi5vcHRpb25zRm9yVHlwZSgidGVtcGxh
        dGUiLHtpbnN0YW50aWF0ZTohMX0pLG4ub3B0aW9uc0ZvclR5cGUoImhlbHBl
        ciIse2luc3RhbnRpYXRlOiExfSksbi5yZWdpc3RlcigiYXBwbGljYXRpb246
        bWFpbiIscix7aW5zdGFudGlhdGU6ITF9KSxuLnJlZ2lzdGVyKCJjb250cm9s
        bGVyOmJhc2ljIixFbWJlci5Db250cm9sbGVyLHtpbnN0YW50aWF0ZTohMX0p
        LG4ucmVnaXN0ZXIoImNvbnRyb2xsZXI6b2JqZWN0IixFbWJlci5PYmplY3RD
        b250cm9sbGVyLHtpbnN0YW50aWF0ZTohMX0pLG4ucmVnaXN0ZXIoImNvbnRy
        b2xsZXI6YXJyYXkiLEVtYmVyLkFycmF5Q29udHJvbGxlcix7aW5zdGFudGlh
        dGU6ITF9KSxuLnJlZ2lzdGVyKCJyb3V0ZTpiYXNpYyIsRW1iZXIuUm91dGUs
        e2luc3RhbnRpYXRlOiExfSksbi5yZWdpc3RlcigiZXZlbnRfZGlzcGF0Y2hl
        cjptYWluIixFbWJlci5FdmVudERpc3BhdGNoZXIpLG4ucmVnaXN0ZXIoInJv
        dXRlcjptYWluIixFbWJlci5Sb3V0ZXIpLG4uaW5qZWN0aW9uKCJyb3V0ZXI6
        bWFpbiIsIm5hbWVzcGFjZSIsImFwcGxpY2F0aW9uOm1haW4iKSxuLmluamVj
        dGlvbigiY29udHJvbGxlciIsInRhcmdldCIsInJvdXRlcjptYWluIiksbi5p
        bmplY3Rpb24oImNvbnRyb2xsZXIiLCJuYW1lc3BhY2UiLCJhcHBsaWNhdGlv
        bjptYWluIiksbi5pbmplY3Rpb24oInJvdXRlIiwicm91dGVyIiwicm91dGVy
        Om1haW4iKSxufX0pLEVtYmVyLnJ1bkxvYWRIb29rcygiRW1iZXIuQXBwbGlj
        YXRpb24iLEVtYmVyLkFwcGxpY2F0aW9uKX0oKSxmdW5jdGlvbigpe2Z1bmN0
        aW9uIGUoZSx0LHIpe3ZhciBuLGksbztmb3IoaT0wLG89ci5sZW5ndGg7bz5p
        O2krKyluPXJbaV0sLTE9PT1uLmluZGV4T2YoIjoiKSYmKG49ImNvbnRyb2xs
        ZXI6IituKSwhdC5oYXMobil9dmFyIHQ9RW1iZXIuZ2V0O0VtYmVyLnNldCxF
        bWJlci5Db250cm9sbGVyTWl4aW4ucmVvcGVuKHtjb25jYXRlbmF0ZWRQcm9w
        ZXJ0aWVzOlsibmVlZHMiXSxuZWVkczpbXSxpbml0OmZ1bmN0aW9uKCl7dmFy
        IHI9dCh0aGlzLCJuZWVkcyIpLG49dChyLCJsZW5ndGgiKTtuPjAmJihlKHRo
        aXMsdGhpcy5jb250YWluZXIsciksdCh0aGlzLCJjb250cm9sbGVycyIpKSx0
        aGlzLl9zdXBlci5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LGNvbnRyb2xsZXJG
        b3I6ZnVuY3Rpb24oZSl7cmV0dXJuIEVtYmVyLmNvbnRyb2xsZXJGb3IodCh0
        aGlzLCJjb250YWluZXIiKSxlKX0sY29udHJvbGxlcnM6RW1iZXIuY29tcHV0
        ZWQoZnVuY3Rpb24oKXt2YXIgZT10aGlzO3JldHVybntuZWVkczp0KGUsIm5l
        ZWRzIiksY29udGFpbmVyOnQoZSwiY29udGFpbmVyIiksdW5rbm93blByb3Bl
        cnR5OmZ1bmN0aW9uKHQpe3ZhciByLG4saSxvPXRoaXMubmVlZHM7Zm9yKG49
        MCxpPW8ubGVuZ3RoO2k+bjtuKyspaWYocj1vW25dLHI9PT10KXJldHVybiB0
        aGlzLmNvbnRhaW5lci5sb29rdXAoImNvbnRyb2xsZXI6Iit0KTt2YXIgYT1F
        bWJlci5pbnNwZWN0KGUpKyIjbmVlZHMgZG9lcyBub3QgaW5jbHVkZSBgIit0
        KyJgLiBUbyBhY2Nlc3MgdGhlICIrdCsiIGNvbnRyb2xsZXIgZnJvbSAiK0Vt
        YmVyLmluc3BlY3QoZSkrIiwgIitFbWJlci5pbnNwZWN0KGUpKyIgc2hvdWxk
        IGhhdmUgYSBgbmVlZHNgIHByb3BlcnR5IHRoYXQgaXMgYW4gYXJyYXkgb2Yg
        dGhlIGNvbnRyb2xsZXJzIGl0IGhhcyBhY2Nlc3MgdG8uIjt0aHJvdyBuZXcg
        UmVmZXJlbmNlRXJyb3IoYSl9fX0pLnJlYWRPbmx5KCl9KX0oKSxmdW5jdGlv
        bigpe0VtYmVyLkRhdGFBZGFwdGVyPUVtYmVyLk9iamVjdC5leHRlbmQoe2lu
        aXQ6ZnVuY3Rpb24oKXt0aGlzLl9zdXBlcigpLHRoaXMucmVsZWFzZU1ldGhv
        ZHM9RW1iZXIuQSgpfSxjb250YWluZXI6bnVsbCxhdHRyaWJ1dGVMaW1pdDoz
        LHJlbGVhc2VNZXRob2RzOkVtYmVyLkEoKSxnZXRGaWx0ZXJzOmZ1bmN0aW9u
        KCl7cmV0dXJuIEVtYmVyLkEoKX0sd2F0Y2hNb2RlbFR5cGVzOmZ1bmN0aW9u
        KGUsdCl7dmFyIHIsbj10aGlzLmdldE1vZGVsVHlwZXMoKSxpPXRoaXMsbz1F
        bWJlci5BKCk7cj1uLm1hcChmdW5jdGlvbihlKXt2YXIgcj1pLndyYXBNb2Rl
        bFR5cGUoZSk7cmV0dXJuIG8ucHVzaChpLm9ic2VydmVNb2RlbFR5cGUoZSx0
        KSkscn0pLGUocik7dmFyIGE9ZnVuY3Rpb24oKXtvLmZvckVhY2goZnVuY3Rp
        b24oZSl7ZSgpfSksaS5yZWxlYXNlTWV0aG9kcy5yZW1vdmVPYmplY3QoYSl9
        O3JldHVybiB0aGlzLnJlbGVhc2VNZXRob2RzLnB1c2hPYmplY3QoYSksYX0s
        d2F0Y2hSZWNvcmRzOmZ1bmN0aW9uKGUsdCxyLG4pe3ZhciBpLG89dGhpcyxh
        PUVtYmVyLkEoKSxzPXRoaXMuZ2V0UmVjb3JkcyhlKSx1PWZ1bmN0aW9uKGUp
        e3IoW2VdKX0sYz1zLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gYS5wdXNoKG8u
        b2JzZXJ2ZVJlY29yZChlLHUpKSxvLndyYXBSZWNvcmQoZSl9KSxsPWZ1bmN0
        aW9uKGUscixpLHMpe2Zvcih2YXIgYz1yO3Ircz5jO2MrKyl7dmFyIGw9ZS5v
        YmplY3RBdChjKSxoPW8ud3JhcFJlY29yZChsKTthLnB1c2goby5vYnNlcnZl
        UmVjb3JkKGwsdSkpLHQoW2hdKX1pJiZuKHIsaSl9LGg9e2RpZENoYW5nZTps
        LHdpbGxDaGFuZ2U6RW1iZXIuS307cmV0dXJuIHMuYWRkQXJyYXlPYnNlcnZl
        cihvLGgpLGk9ZnVuY3Rpb24oKXthLmZvckVhY2goZnVuY3Rpb24oZSl7ZSgp
        fSkscy5yZW1vdmVBcnJheU9ic2VydmVyKG8saCksby5yZWxlYXNlTWV0aG9k
        cy5yZW1vdmVPYmplY3QoaSl9LHQoYyksdGhpcy5yZWxlYXNlTWV0aG9kcy5w
        dXNoT2JqZWN0KGkpLGl9LHdpbGxEZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5f
        c3VwZXIoKSx0aGlzLnJlbGVhc2VNZXRob2RzLmZvckVhY2goZnVuY3Rpb24o
        ZSl7ZSgpfSl9LGRldGVjdDpmdW5jdGlvbigpe3JldHVybiExfSxjb2x1bW5z
        Rm9yVHlwZTpmdW5jdGlvbigpe3JldHVybiBFbWJlci5BKCl9LG9ic2VydmVN
        b2RlbFR5cGU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLG49dGhpcy5nZXRS
        ZWNvcmRzKGUpLGk9ZnVuY3Rpb24oKXt0KFtyLndyYXBNb2RlbFR5cGUoZSld
        KX0sbz17ZGlkQ2hhbmdlOmZ1bmN0aW9uKCl7RW1iZXIucnVuLnNjaGVkdWxl
        T25jZSgiYWN0aW9ucyIsdGhpcyxpKX0sd2lsbENoYW5nZTpFbWJlci5LfTtu
        LmFkZEFycmF5T2JzZXJ2ZXIodGhpcyxvKTt2YXIgYT1mdW5jdGlvbigpe24u
        cmVtb3ZlQXJyYXlPYnNlcnZlcihyLG8pfTtyZXR1cm4gYX0sd3JhcE1vZGVs
        VHlwZTpmdW5jdGlvbihlKXt2YXIgdCxyPXRoaXMuZ2V0UmVjb3JkcyhlKTty
        ZXR1cm4gdD17bmFtZTplLnRvU3RyaW5nKCksY291bnQ6RW1iZXIuZ2V0KHIs
        Imxlbmd0aCIpLGNvbHVtbnM6dGhpcy5jb2x1bW5zRm9yVHlwZShlKSxvYmpl
        Y3Q6ZX19LGdldE1vZGVsVHlwZXM6ZnVuY3Rpb24oKXt2YXIgZT1FbWJlci5B
        KEVtYmVyLk5hbWVzcGFjZS5OQU1FU1BBQ0VTKSx0PUVtYmVyLkEoKSxyPXRo
        aXM7cmV0dXJuIGUuZm9yRWFjaChmdW5jdGlvbihlKXtmb3IodmFyIG4gaW4g
        ZSlpZihlLmhhc093blByb3BlcnR5KG4pKXt2YXIgaT1lW25dO3IuZGV0ZWN0
        KGkpJiZ0LnB1c2goaSl9fSksdH0sZ2V0UmVjb3JkczpmdW5jdGlvbigpe3Jl
        dHVybiBFbWJlci5BKCl9LHdyYXBSZWNvcmQ6ZnVuY3Rpb24oZSl7dmFyIHQ9
        e29iamVjdDplfTtyZXR1cm4gdC5jb2x1bW5WYWx1ZXM9dGhpcy5nZXRSZWNv
        cmRDb2x1bW5WYWx1ZXMoZSksdC5zZWFyY2hLZXl3b3Jkcz10aGlzLmdldFJl
        Y29yZEtleXdvcmRzKGUpLHQuZmlsdGVyVmFsdWVzPXRoaXMuZ2V0UmVjb3Jk
        RmlsdGVyVmFsdWVzKGUpLHQuY29sb3I9dGhpcy5nZXRSZWNvcmRDb2xvcihl
        KSx0fSxnZXRSZWNvcmRDb2x1bW5WYWx1ZXM6ZnVuY3Rpb24oKXtyZXR1cm57
        fX0sZ2V0UmVjb3JkS2V5d29yZHM6ZnVuY3Rpb24oKXtyZXR1cm4gRW1iZXIu
        QSgpfSxnZXRSZWNvcmRGaWx0ZXJWYWx1ZXM6ZnVuY3Rpb24oKXtyZXR1cm57
        fX0sZ2V0UmVjb3JkQ29sb3I6ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbH0sb2Jz
        ZXJ2ZVJlY29yZDpmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbigpe319fSl9
        KCl9KCksInVuZGVmaW5lZCI9PXR5cGVvZiBsb2NhdGlvbnx8ImxvY2FsaG9z
        dCIhPT1sb2NhdGlvbi5ob3N0bmFtZSYmIjEyNy4wLjAuMSIhPT1sb2NhdGlv
        bi5ob3N0bmFtZXx8RW1iZXIuTG9nZ2VyLndhcm4oIllvdSBhcmUgcnVubmlu
        ZyBhIHByb2R1Y3Rpb24gYnVpbGQgb2YgRW1iZXIgb24gbG9jYWxob3N0IGFu
        ZCB3b24ndCByZWNlaXZlIGRldGFpbGVkIGVycm9yIG1lc3NhZ2VzLiBJZiB5
        b3Ugd2FudCBmdWxsIGVycm9yIG1lc3NhZ2VzIHBsZWFzZSB1c2UgdGhlIG5v
        bi1taW5pZmllZCBidWlsZCBwcm92aWRlZCBvbiB0aGUgRW1iZXIgd2Vic2l0
        ZS4iKTs=
    http_version: 
  recorded_at: Mon, 17 Feb 2014 11:45:22 GMT
recorded_with: VCR 2.8.0
